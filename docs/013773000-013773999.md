# StackOverflow 问答 13773000-13773999

# javascript - 如何使用 jQuery 在父元素 ID 中查找元素？

> ID：13773002
> 
> 赞同：0
> 
> 时间：2012-12-08T00:08:08.037
> 
> 标签：javascript, jquery, element, hierarchy

我试图在另一个 DIV id 中找到 DIV。

```
<div id="container1">
    <div class="inside">
    </div>
</div>

<div id="container2">
    <div class="inside">
    </div>
</div> 
```

请注意，有 2 个具有“内部”类的 DIV。我正在尝试在特定容器中选择一个。

当只有一组容器时，这有效：

```
$carousel_container = $(carousel).find(".inside"); 
```

但是，当我定义父 ID，然后尝试选择内部 div 时，它不起作用：

```
$carousel_container = $(carousel).find("#" + o.theid + " .inside"); // where o.theid = container1 or container2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:11:48.347

尝试

```
$(carousel).find("#" + o.theid + " > .inside"); 
```

where`>`是指的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:11:58.113

你有没有尝试过：

```
$carousel_container = $(carousel).find("#" + o.theid).children('.inside'); 
```

# django - Django templatetag 根据字段标签返回字段

> ID：13773009
> 
> 赞同：0
> 
> 时间：2012-12-08T00:09:43.317
> 
> 标签：django, django-templates

我知道字段标签（让我们说“BOP”）。我想创建一个模板标签，它将返回正确的字段对象，这样我就可以在这样的表单中使用它。

```
{% with bop=form|f_lookup:"BOP"  %}
    <div>
        <div class="span-4">BOP</div>
        <div class="span-5">{{ bop }}</div>
    </div>
{% endwith %} 
```

我的模板标签不起作用，我知道我必须忽略一些明显的东西..

```
@register.filter(name='f_lookup')
def field_lookup_by_label(form, arg):
    """Look up a form field based on a label"""
    return next((form.fields[k] for k, v in form.fields.items() if v.label == arg), None) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:42:51.527

试试这个：

```
return next((fld for fld in form if fld.label == arg), None) 
```

如果这有效，那么原因如下。`form.fields`是一个`Field`对象字典，它不知道如何在模板中呈现自己。只有当您调用表单的`__getitem__`函数时，字段才会转换为`BoundField`对象，该对象知道如何将自己呈现为 HTML。[请参阅https://github.com/django/django/blob/master/django/forms/forms.py](https://github.com/django/django/blob/master/django/forms/forms.py)的第 101 和 412 行。

当您返回 的元素时`form.fields`，您只是返回`Field`子类，而不是`BoundField`，并且只有`BoundField`对象知道如何在模板中呈现自己。

另外，我相信如果您不将标签作为关键字参数传递给您的 bop 字段构造函数，那么您的原始函数将无法工作。如果使用 调用构造函数，则对象的标签`Field`将是。构造对象时，标签取自字段的标签，如果是，则取自字段的名称。`None``label=None``BoundField``label``None`

# actionscript-3 - AIR 应用程序与桌面上的 C# 应用程序交互？

> ID：13773010
> 
> 赞同：1
> 
> 时间：2012-12-08T00:09:46.657
> 
> 标签：actionscript-3, apache-flex, flex4.5

我有一个 AIR 应用程序，它必须以某种方式与桌面上的 C# 应用程序交互，（它通常必须接收 C# 应用程序从 MSSQL 数据库中提取的数据）。

*   是否有可能进行这种互动以及如何互动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:17:50.727

很多方法。最简单的是连接一个 tcpip 连接，并通过 localhost 进行数据通信。这样您以后就可以移动应用程序。

```
public function connectToServer(ip:String="127.0.0.1", port:Number=65045):void {
        trace("connect")
        theSocket=new Socket(ip, port);
        theSocket.connect(ip,port);
        theSocket.addEventListener(IOErrorEvent.IO_ERROR, ioerrorEvent)
        theSocket.addEventListener(ProgressEvent.SOCKET_DATA,Getdata);
        theSocket.timeout=10*60*60*1000 //10 minutes
    } 
```

我想你会知道 c# 方面。

您也可以制作两个应用程序都将读取/写入的文件，您可以使用扩展名，因此一个应用程序将被另一个应用程序包含，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:16:53.607

您可以将一些本机代码库烘焙到您的 AIR 应用程序中以与其他应用程序对话，或者更好的是，将该 C# 应用程序的功能作为本机代码合并到您的 AIR 应用程序中，以便您可以直接与 MySQL 对话。祝你好运！

[http://help.adobe.com/en_US/air/build/WS597e5dadb9cc1e0253f7d2fc1311b491071-8000.html](http://help.adobe.com/en_US/air/build/WS597e5dadb9cc1e0253f7d2fc1311b491071-8000.html)

# google-bigquery - 如何处理内部错误

> ID：13773013
> 
> 赞同：0
> 
> 时间：2012-12-08T00:10:40.543
> 
> 标签：google-bigquery

我时不时地开始收到“意外。请再试一次”。对于我尝试的任何查询。它通常稍后会好转，但它出现的速度非常令人担忧。

发生这种情况时我该怎么办？

以下是一些工作 ID：

```
job_648552a52f3046c5b2df9300a31d4693
job_4af4184725974c3fb38e0ded96b776c9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:39:12.200

如果您收到此回复，请告知我们，因为这表明 BigQuery 中存在错误。

查看有问题的作业，这是一个竞争条件，我们在导入完全复制到所有数据中心之前将其标记为完成，并且查询会到达不同的数据中心。我已经提交了一个错误，我们正在修复。

# php - 如何在 PHP 中返回这个值？

> ID：13773015
> 
> 赞同：0
> 
> 时间：2012-12-08T00:10:53.137
> 
> 标签：php, mysql, mysqli

我对这段代码有问题：

```
$loginrequest = $mysqli->prepare(
    "SELECT name, password, salt FROM users WHERE name = ? OR email = ?");
$loginrequest->bind_param("ss", $login, $login);
$loginrequest->execute();
$loginrequest->bind_result($name, $encrypted_password, $salt);

while ($loginrequest->fetch()) {

  $hash = $this->checkhashSSHA($salt, $password);

  if ($encrypted_password == $hash) {
    return $name;
  }
  else {
    return false;
  }
} 
```

如您所见，我想检查用户登录，如果密码正确，我想返回用户名，否则返回错误。

但是我不必关闭`$mysqli`查询吗？

```
$loginrequest->close();
$mysqli->close(); 
```

因为该值`$name`仅在 while 循环中可用（如果我理解正确的话）。我的意思是我之前可以声明一个字符串并将其更改为`$name`值，但是有必要关闭她吗？

顺便说一句，我不能使用`store_result`，因为 PHP 版本太旧了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:33:16.047

*   结束语句不会取消绑定获取的变量。
*   您获取一行并返回，因此`while`可以将其删除。

这将比较密码和关闭语句：

```
 $loginrequest->fetch();
    $loginrequest->close();
    $hash = $this->checkhashSSHA($salt, $password);
    if ($encrypted_password == $hash)
      return $name;
    return false; 
```

# playframework - 在本地部署 Play 应用程序

> ID：13773017
> 
> 赞同：5
> 
> 时间：2012-12-08T00:10:59.247
> 
> 标签：playframework, playframework-1.x

我知道部署 Play 应用程序至少有两个本地选项，即复制整个内容并运行 play start，或导出战争以将其作为另一个应用程序服务器的一部分运行。

我还使用了 gae 和 heroku 的部署机制。很整齐。

但是，我想做的是：

*   在本地部署到我的服务器（会有一堆在负载均衡器后面接收相同的副本）。
*   运行只是玩netty，所以不要对tomcat/jboss/你命名
*   不要部署源代码、git 文件等......只是必要的最低限度（我猜是预编译、配置、模板、公共目录......）

是否有我在游戏中错过的命令或选项来执行此操作？也许导出战争并从不同的游戏服务器运行它，如果这有意义的话？还是我要找出需要的东西，而不是在预编译和复制之后才知道？

**编辑：**

接受的答案是我一直在寻找的，但在 1.2.x 上不可用。最终我创建了自己的脚本，其中最重要的部分是：

1.  运行播放预编译
2.  将*conf/、precompiled/、public/、lib/*和*app/views/*目录复制到您要部署的位置（我的脚本执行 tar.gz 并在那里解压缩）。
3.  运行播放开始 -Dprecompiled=true

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:23:38.620

> 这适用于 Play 2，而不是 Play 1。

运行`play dist`以生成一个 zip，您可以将其复制到任何地方并运行。 [更多细节...](http://www.playframework.org/documentation/2.0.4/ProductionDist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T12:07:15.757

您可以与源一起部署，也可以作为战争部署。

最方便的部署方式是从你的 vcs 中获取它。请参阅[PlayFramework 应用程序的最佳部署策略？](https://stackoverflow.com/questions/6526735/best-deployment-strategy-for-playframework-applications)，cdegroot 的回答，用于讨论该策略。

# android - SQLite 更新查询不起作用

> ID：13773023
> 
> 赞同：0
> 
> 时间：2012-12-08T00:11:34.353
> 
> 标签：android, sqlite

我正在运行一个可以编译的更新查询。但是当我测试结果时，似乎没有任何变化。在我看来一切都很好，但显然有些地方出了问题。谁能看到我错过了什么。SQLite 很新，如果它很简单，请道歉。谢谢！

```
public static Boolean updateHealth (int unitVal, int oldValue, int newValue) {
    String unit = Integer.toString(unitVal);
    String oldVal = Integer.toString(oldValue);
    String newVal = Integer.toString(newValue);

    System.err.printf("old val: %s, new val: %s\n", oldVal, newVal);
    SQLiteDatabase db = myDBOpenHelper.getWritableDatabase();
    String where = UNIT_COLUMN + " = " + unit + " AND " + HEALTH_COLUMN + " = " + oldVal;

    Cursor cursor = db.query(UNITS_TABLE, new String[] {UNIT_COLUMN}, where, null, null, null, null);

    if (cursor != null) {
        /* the record doesn't exist, cancel the operation */
        return false;
    }

    ContentValues updatedValues = new ContentValues();
    updatedValues.put(HEALTH_COLUMN, newVal);

    /* SQL query clauses */
    String whereArgs[] = null;

    db.update(UNITS_TABLE, updatedValues, where, whereArgs);

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:21:19.680

当没有检索到行时，游标不为空。所以你要换行`if (cursor != null) {`顺便`if(!cursor.moveToNext()) {`

说一句，更新前不需要查询数据库。您可以进行更新，查看有多少行受到影响，如果受影响的行数大于 0，则返回 true，否则返回 false。方法返回受影响的行数`update`。

# python - Python, Connectin 拒绝 10061

> ID：13773024
> 
> 赞同：5
> 
> 时间：2012-12-08T00:11:45.130
> 
> 标签：python, windows, sockets, networking

我不断收到此错误

> [Errno 10061] 由于目标机器主动拒绝，无法建立连接。

我正在运行 Windows 7 64 位，没有病毒或保护软件，并且允许 python 通过我的防火墙（我也尝试完全关闭我的防火墙，但结果相同）。当我运行服务器并使用 telnet 时，它连接得很好。当我尝试使用客户端连接到服务器时，它失败了。关于我可以尝试解决此问题的任何建议？如果您需要更多信息，请询问，我会提供。

**客户代码**

```
import socket
import sys
def main():
   host = ""
   port = 8934
   message = "Hello World!"

   host = raw_input("Enter IP: ")
   #Create Socket
   try:
      s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
   except socket.error, msg:
      print "Failed to create socket. Error code: %s Error Message: %s"%(str(msg[0]),msg[1])
      sys.exit()
   print "Socket created"

   #Connec to Server
   print host
   print port
   s.connect((host,port))
   print "You are connected to %s with IP adress of %s"%(host,host)

   #Send Data
   try:
      s.sendall(message)
   except socket.error:
      print "Failed to send."
   #Receive Data
      reply = s.recv(4096)

if __name__ == "__main__":
   main() 
```

**服务器代码**

```
# !usr/bin/python

import socket
import sys

HOST = ""
PORT = 8934

def main():
   #Setup socket
   try:
      s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
   except socket.error,msg:
      print "Unable to create socket"
      sys.exit()
   print "Socket created."

   #Bind to adress
   try:
      s.bind((HOST,PORT))
   except socket.error,msg:
      print "Bind failed. Closing..."
      sys.exit()
   print "Socket bound."

   #Start listening
   s.listen(10)
   print "Socket Listening"

   #Accept connection
   conn, addr = s.accept()
   print "Connected to %s:%s"%(addr[0],addr[1])

if __name__ == "__main__":
   main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:23:34.817

猜测你的缩进，运行你的代码……它工作得很好。*（只要我在`127.0.0.1`它要求我输入 IP 时输入。）

当然，我第二次运行客户端时（如果我没有重新启动服务器）我得到一个连接被拒绝的错误。但这只是因为您编写了一个服务器，该服务器在获得第一个连接后立即退出。所以第二次运行客户端时，没有服务器，所以操作系统拒绝连接。

您总是可以再次运行服务器，这样您就可以再运行一次客户端。（除了服务器在尝试绑定套接字时可能会收到 10048 错误，因为操作系统会为之前的所有者保留它。如果您看到，请查看`SO_REUSEADDR`文档。）

*“工作正常”是指它已连接，并在退出前打印出以下内容：

```
Socket created
127.0.0.1
8934
You are connected to 127.0.0.1 with IP adress of 127.0.0.1 
```

显然，它永远不会向服务器发送任何内容或接收任何返回，因为服务器没有`send`或`recv`调用，或其他任何东西。

# javascript - 所有对象的调用函数

> ID：13773027
> 
> 赞同：0
> 
> 时间：2012-12-08T00:11:51.343
> 
> 标签：javascript

我试图在每次鼠标点击时调用所有按钮对象的方法，但我一点也不熟悉 javascript 原型的工作方式，非常感谢一些帮助。这是我到目前为止所拥有的。

```
var button1 = new button(200, 200, 150, 150, "testFunc();"); 
function button(x,y,width,height, func) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.func = func;

}

button.prototype.click = function(clickx, clicky) {
    eval(this.func)
        console.log("Clicked button at" + this.x + " " + clicky);
        if (clickx > this.x && (clickx + width) < this.x) {
            if (clicky > this.y && (clicky + height) < this.y) {

                this.func(); //Call the button's function
            }
        }   
}

function onClick(x, y) {
    button.prototype.click.call(x, y); 
} 
```

我基本上希望每个按钮对象都使用单击的 xy 坐标检查它是否被单击。当然这应该可以用javascript来实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:26:18.187

好的，有几件事。

1.  构造函数应始终以大写字母开头。`Button`不是`button`。
2.  函数是对象，你可以直接传入一个对象，而无需使用*任何*`eval`东西。
3.  如果要对按钮列表进行操作，则需要按钮列表。原型中的函数与所有实例共享，但您无法从原型中获取所有实例。您需要自己维护该列表。数组适用于列表。

* * *

```
// Constructor! capitalized!
function Button(x, y, width, height, func) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.func = func;
}

// Each constructed Button will have a click() method.
Button.prototype.click = function(clickx, clicky) {
    console.log("Clicked button at" + this.x + " " + clicky);
    if (clickx > this.x && (clickx + width) < this.x) {
        if (clicky > this.y && (clicky + height) < this.y) {
            this.func(); //Call the button's function
        }
    }   
}

// Passed as the function to execute in this not very exciting example.
function testFunc() {
    console.log('called testFunc()!')
}

// Make a bunch of buttons, save them in an array.
// Note how we actually pass a function object as the last argument.
// Note how the last argument IS NOT a string.
var buttons = [
  new Button(100, 100, 150, 150, testFunc),
  new Button(250, 250, 150, 150, testFunc),
  new Button(400, 400, 150, 150, testFunc)
];

// called by something else that passes x and y
function onClick(x, y) {
    // tell each button we had a click, and pass in x and y to see
    // if it should handle it.
    for (var i = 0; i < buttons.length; i++) {
        var button = buttons[i];
        button.click(x, y);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:34:08.207

我假设您正在针对 dom 进行编码。

要获得点击，您的按钮必须是 dom 元素，您的 DOM 元素在哪里定义？DOM 是您需要编写代码的 api。如果它不遵循文档对象模型，你不能只是神奇地让你的随机按钮对象监听点击事件......这与 javascript 原型无关。

```
var domElement = document.createElement("DIV")

domElement.onclick = function(event){
 // do some stuffs
  alert("clicked at"+event.pageX+" "+event.pageY);
} 
```

**我引用你的代码：**

```
var button1 = new button(200, 200, 150, 150, "testFunc();"); 
function button(x,y,width,height, func) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.func = func;

}

button.prototype.click = function(clickx, clicky) {
    eval(this.func)
        console.log("Clicked button at" + this.x + " " + clicky);
        if (clickx > this.x && (clickx + width) < this.x) {
            if (clicky > this.y && (clicky + height) < this.y) {

                this.func(); //Call the button's function
            }
        }   
}

function onClick(x, y) {
    button.prototype.click.call(x, y); 
} 
```

# c# - 无法在“0.0.0.0”上绑定 DatagramSocket

> ID：13773032
> 
> 赞同：0
> 
> 时间：2012-12-08T00:12:10.527
> 
> 标签：c#, udp, windows-runtime, datagram

在 Win RT 中，我们必须使用 DatagramSocket 而不是 UdpClient。好的，但是下面的代码给了我这个我在 UdpClient 上没有得到的错误。

```
 var g = new DatagramSocket();
        g.MessageReceived += g_MessageReceived;
        await g.BindEndpointAsync(new HostName("0.0.0.0"), "5000"); //<--- this line 
```

*IPAddress.Any = 0.0.0.0

我收到此错误：“不知道这样的主机。（来自 HRESULT 的异常：0x80072AF9）”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T00:17:22.787

要绑定到所有本地接口（绑定 0.0.0.0 aka INADDR_ANY 与 Berkeley Sockets API 的方式），请使用[`BindServiceNameAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/hh701211).

> 该方法在参数`BindServiceNameAsync`中指定的本地服务名称或UDP端口上绑定到本地计算机上所有网络接口的本地IP地址。`localServiceName`如果`localServiceName`参数为空字符串，系统将选择要绑定的本地UDP端口。

# twitter-bootstrap - 使用 twitter bootstrap 子菜单防止在移动 safari 上触摸失败

> ID：13773036
> 
> 赞同：1
> 
> 时间：2012-12-08T00:12:39.347
> 
> 标签：twitter-bootstrap, mobile-safari, submenu, fall-through

我正在开发一个网页，该网页使用 twitter bootstrap 创建带有子菜单的下拉菜单。在桌面浏览器上一切正常，但是当我在 iPad 上的移动 Safari 中打开它时，我遇到了问题。如果子菜单下方有任何类型的输入，而不是跟随该链接，则触摸事件会转到输入。因此，如果子菜单项下方有文本输入，则光标将进入该框。

请注意，这只发生在子菜单上，而不是主要下拉菜单上。此外，当它后面没有任何内容时，子菜单项也可以正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T23:58:42.793

今天我被类似的问题困住了一段时间。

我遇到的问题是底层元素是 HTML5 视频。iOS 不允许在视频元素之上进行任何叠加。因此，我添加了一个 jQuery 方法，该方法在单击菜单按钮时隐藏视频元素。类似的东西可能适用于您的文本输入。

```
<script type="text/javascript">             
            jQuery(function() { 
                if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
                    jQuery("#menu-button").click(function() {
                        jQuery(".video-content").toggle();
                    });
                }
            });
    </script> 
```

# android - WebView.getUrl() 返回 null 因为页面未完成加载

> ID：13773037
> 
> 赞同：2
> 
> 时间：2012-12-08T00:12:42.057
> 
> 标签：android, webview, geturl

我想获取 webview 的 url。但是，该方法在页面加载完成之前调用，因此它总是返回 null。有什么办法吗？谢谢。

```
WebView webView = new WebView(this);
setContentView(webView);

webView.loadUrl(myURL);

//page is not done loading yet
String url = webView.getUrl(); //returns null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:35:48.517

尝试添加`WebViewClient`并覆盖该`onPageFinished(...)`方法。我从来没有做过，但这样的事情可能会奏效......

```
String theUrl;
WebView webView = new WebView(this);
setContentView(webView);

webview.setWebViewClient(new WebViewClient() {

    public void onPageFinished(WebView view, String url) {
        theUrl = url;
    }

});

webView.loadUrl(myURL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T00:36:25.883

创建一个`WebViewClient`覆盖[onPageStarted(webView, url, favicon)](https://developer.android.com/reference/android/webkit/WebViewClient.html#onPageStarted%28android.webkit.WebView,%20java.lang.String,%20android.graphics.Bitmap%29)的子类并将其设置为您的`WebView`（使用`setWebViewClient()`）。
您将拥有正在加载或显示的页面的 url。

# php - 如何使用缓冲区加入 2 个脚本？

> ID：13773040
> 
> 赞同：0
> 
> 时间：2012-12-08T00:13:14.180
> 
> 标签：php

我有一个 3 方脚本可以捕获 PHP 脚本呈现的 HTML，如下所示：

```
ob_start( array(&$this,'writeCache') ); 
```

在 writeCache 中：

```
function writeCache($content)
{
    //data save
} 
```

它获取内容并将其保存到文件中。

现在我有 3 方第二个脚本，它获取 HTML 字符串并清理它：

```
$content = htmLawed($content); 
```

htmLawed 这样做：

```
1\. Interpreting $content
2\. ob_start()
3\. render new content
4\. gets the result of the render and returns 
```

所以现在当我把它放在一起时：

```
function writeCache($content)
{
    $content = htmLawed($content); 
    //data save
} 
```

我得到错误：

```
Fatal error: ob_end_clean(): Cannot use output buffering in output buffering display handlers 
```

那么有什么方法可以从输出缓冲显示处理程序中逃脱内容，这样我就可以将它传递给 htmLawed 并且它将能够执行 ob_start()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:06:21.247

您收到的错误表明您无法从回调中调用 ob_start() 。我不明白为什么您无法解决此问题，但是您需要进行更多重组。

您可能想尝试拦截输出缓冲区的内容并在它进入输出缓冲区回调之前使用 htmLawed() 对其进行处理。

```
echo htmLawed(ob_get_clean());
ob_end_clean(); 
```

# php - 显示错误消息时如何停止显示“请选择”选项的下拉菜单

> ID：13773045
> 
> 赞同：5
> 
> 时间：2012-12-08T00:13:51.673
> 
> 标签：php, html

让我先说我已经尝试将下面的代码剪得尽可能小：

```
 <?php
        // required variables (make them explciit no need for foreach loop)

        $getyear       = (isset($_POST['year'])) ? $_POST['year'] : '';
        $getpass       = (isset($_POST['studentpass'])) ? $_POST['studentpass'] : '';
        $getretypepass = (isset($_POST['retypepass'])) ? $_POST['retypepass'] : '';
        $errormsg      = (isset($errormsg)) ? $errormsg : '';

        $validSubmission = isset($_POST['registerbtn']) && $_POST['year'] && $_POST['studentpass'] && $_POST['retypepass'];

        $min_year = 1;
        $max_year = 10;
        $years    = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
        $yearHTML = '';
        $yearHTML .= '<select name="year" id="yearDrop">' . PHP_EOL;
        $yearHTML .= '<option value="">Please Select</option>' . PHP_EOL;
        foreach ($years as $year) {
            if (!$validSubmission && isset($_POST['year']) && $year == $_POST['year']) {
                $yearHTML .= "<option value='" . $year . "' selected='selected'>$year</option>" . PHP_EOL;
            } else {
                $yearHTML .= "<option value='" . $year . "'>$year</option>" . PHP_EOL;
            }
        }

        $yearHTML .= '</select>';

        if ((isset($_POST['registerbtn']))) {
            if (in_array($_POST['year'], $years) === true) {
                $getyear = (int) $_POST['year'];
            }
            $getpass       = $_POST['studentpass'];
            $getretypepass = $_POST['retypepass'];

            if ($getyear) {
                if ($getpass) {
                    if (strlen($getpass) <= 5) {
                        $errormsg = "The Password must be a minimum of 6 characters or more";
                    } else {
                        if ($getretypepass) {
                            if ($getpass === $getretypepass) {
                                //perform 2 queries, one query contains $aliasnumrows and other contains $numrows

                                if ($aliasnumrows == 0) {
                                    if ($numrows == 0) {
                                        //perform query which contains $numrows

                                        if ($numrows == 1) {
                                            $errormsg = "<span style='color: green'>Student has been Registered</span>";

                                            $getyear = "";

                                        } else {
                                            $errormsg = "An error has occured, Student has not been Registered";

                                        }

                                    }

                                    else {
                                        $errormsg = "There is already a Student with that Username";
                                    }
                                }

                                else {
                                    $errormsg = "There is already a Student with that Alias";
                                }
                            }

                            else {
                                $errormsg = "Your Passwords did not match";
                            }
                        }

                        else {
                            $errormsg = "You must retype your Password to Register";
                        }
                    }
                } else {
                    $errormsg = "You must enter in a Password to Register";
                }

            }

        else{
    $errormsg = "You must enter in Student's current Academic Year to Register";
    }

    }

$form = "
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
  <table>
  <tr>
  <td></td>
  <td id='errormsg'>$errormsg</td>
</tr>
  <tr>
  <td>Year:</td>
  <td>{$yearHTML}</td>
  </tr>
  <tr>
  <td>Password:</td>
  <td><input type='password' name='studentpass' value='' /></td>  
  </tr>
  <tr>
  <td>Retype Password:</td>
  <td><input type='password' name='retypepass' value='' /></td>  
  </tr>
  <tr>
  <tr>
  <td></td>
  <td><input type='submit' value='Register' name='registerbtn' /></td>
  </tr>
  </table>
  </form>";

  echo $form; 
```

好的，这就是我遇到的问题。多年来，我有一个下拉菜单和两个用于输入密码和重新输入密码的文本输入。现在，如果用户从下拉菜单中选择年份并提交表单，则会显示错误消息，指出必须输入密码，并且年份下拉菜单仍显示用户从年份下拉菜单中选择的选项。

我遇到的问题是，如果出现以下任一消息，则下拉选项将返回显示“请选择”。我的问题是，当出现以下错误消息时，如何阻止下拉菜单返回“请选择”选项？

```
$errormsg = "There is already a Student with that Username";
$errormsg = "There is already a Student with that Alias";
$errormsg = "Your Passwords did not match";
$errormsg = "You must retype your Password to Register"; 
```

我认为需要更改的代码行在这里：

```
 $validSubmission = isset($_POST['registerbtn']) && $_POST['year'] && $_POST['studentpass'] && $_POST['retypepass']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:19:26.283

我*认为*您正在寻找的是：

```
// This is just a suggestion, but I would set these to null instead of an empty string:
    $getyear       = (isset($_POST['year'])) ? $_POST['year'] : null;
    $getpass       = (isset($_POST['studentpass'])) ? $_POST['studentpass'] : null;
    $getretypepass = (isset($_POST['retypepass'])) ? $_POST['retypepass'] : null;
    $errormsg      = (isset($errormsg)) ? $errormsg : null;
// You have already defined these, so no need to use $_POST here
// Also, I like to compare it to an actual value rather than just doing if ($variable)
// to avoid unforseen circumstances. Note, isset() returns false if $var == null.
$validSubmission = (isset($_POST['registerbtn']) && isset($getyear) && isset($getpass) && isset($getretypepass)); 
```

然后我认为您稍后会倒退逻辑：

```
 foreach ($years as $year) {
        if ($validSubmission && $year == $getyear) {
            $yearHTML .= "<option value='" . $year . "' selected='selected'>$year</option>" . PHP_EOL;
        } else {
            $yearHTML .= "<option value='" . $year . "'>$year</option>" . PHP_EOL;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:42:55.790

在重新填充年份下拉列表时，您可能实际上并不关心提交的任何部分是否有效，您只想重新填充它。只需放弃逻辑即可。

```
foreach ($years as $year) {
    if (isset($_POST['year']) && $year == $_POST['year']) {
        $yearHTML .= "<option value='" . $year . "' selected='selected'>$year</option>" . PHP_EOL;
    } else {
        $yearHTML .= "<option value='" . $year . "'>$year</option>" . PHP_EOL;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T00:19:02.930

问题是您正在回发到服务器，而服务器正在重新呈现页面。为了*正确*执行此操作并且以适用于所有浏览器的方式执行此操作，您需要将 $_POST 结果（在正确转义它们之后）回显到输入元素中。

同样，您需要使用选择框的 $_POST 值来确定`option`应该`selected="selected"`设置哪个标签的属性。

# java - 使用 Cookie 浏览 Android WebView 选项卡

> ID：13773047
> 
> 赞同：0
> 
> 时间：2012-12-08T00:14:14.737
> 
> 标签：java, php, android, mysql

我的应用程序有一个 3 选项卡式 ActionBar 布局。这 3 个选项卡是*仪表板*、*提要*和*消息*。

当您单击这三个中的任何一个时，应用程序应该创建一个 www.flyalaskava.org/incog/mobile/ 的 WebView - 如果您没有活动会话 - 将显示一个图像和一个“登录脸书”按钮。

问题是，当我加载第一个选项卡 ( *Dashboard* ) 并使用 Facebook cliek 登录时，它会让我登录 - 但是一旦我点击另一个选项卡，我就会失去我的会话并被重新提示。

请记住，目前所有这些都使用相同的*php*文件，并且登录系统在 Android 之外可以完美运行。对不起，如果这是一个新手问题 - 任何帮助表示赞赏。

```
package com.example.testing;

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;

import com.handmark.pulltorefresh.library.PullToRefreshWebView;

public class Main extends FragmentActivity implements ActionBar.TabListener {

    PullToRefreshWebView mPullRefreshWebView;
    WebView mWebView;

    /**
     * The serialization (saved instance state) Bundle key representing the
     * current tab position.
     */
    private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mPullRefreshWebView = (PullToRefreshWebView) findViewById(R.id.pull_refresh_webview);
        mWebView = mPullRefreshWebView.getRefreshableView();

        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.setWebViewClient(new SampleWebViewClient());
        mWebView.loadUrl("http://www.google.com");

        // Set up the action bar to show tabs.
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // For each of the sections in the app, add a tab to the action bar.
        actionBar.addTab(actionBar.newTab().setText(R.string.title_section1)
            .setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText(R.string.title_section2)
            .setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText(R.string.title_section3)
            .setTabListener(this));
    }

    private static class SampleWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        // Restore the previously serialized current tab position.
        if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
            getActionBar().setSelectedNavigationItem(
                savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM)
            );
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        // Serialize the current tab position.
        outState.putInt(STATE_SELECTED_NAVIGATION_ITEM, getActionBar()
            .getSelectedNavigationIndex());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_settings:
                displayAlert();
                break;
            case R.id.menu_exit:
                displayExit();
                break;
            default:; 
        }
        return(super.onOptionsItemSelected(item));
    }

    public  void displayAlert() {
        new AlertDialog.Builder(this)
            .setMessage("This Application was created by Grant Adkins")
            .setTitle("About")  
            .setCancelable(false)  
            .setNeutralButton(android.R.string.ok,  
                new DialogInterface.OnClickListener() {  
                    public void onClick(DialogInterface dialog, int whichButton){
                        dialog.cancel();
                    }  
                }
            )  
            .show(); 
    }

    public  void displayExit() {
        new AlertDialog.Builder(this).setMessage("Exit the application")  
            .setTitle("Are you sure?")  
            .setCancelable(false)  
            .setNeutralButton(android.R.string.no,  
                new DialogInterface.OnClickListener() {  
                    public void onClick(DialogInterface dialog, int whichButton){
                        dialog.cancel();
                    }  
                }).setPositiveButton(android.R.string.yes,  
                    new DialogInterface.OnClickListener() {  
                        public void onClick(DialogInterface dialog, int whichButton){
                            finish();
                        }  
                    }
                ) 
            .show(); 
    }
    public boolean isOnline() {
        ConnectivityManager cm = 
            (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        String summary = "<html><body>No Network Connection.</body></html>";
        mWebView.loadData(summary, "text/html", null);
        return false;
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, show the tab contents in the
        // container view
        int page = tab.getPosition() + 1;
        if(page == 1) {
            /// eventually is going to load index.php?content=dashboard
            mWebView.loadUrl("http://www.flyalaskava.org/incog/mobile/");
            isOnline();
        } else if (page == 2) {
            /// eventually is going to load index.php?content=messages
            mWebView.loadUrl("http://www.flyalaskava.org/incog/mobile/");
            isOnline();
        } else if (page == 3) {
            /// eventually is going to load index.php?content=feed
            mWebView.loadUrl("http://www.flyalaskava.org/incog/mobile/");
            isOnline();
        } else {
            mWebView.loadUrl("http://www.google.com");
            isOnline();
        }
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            // Create a new TextView and set its text to the fragment's section
            // number argument value.
            TextView textView = new TextView(getActivity());
            textView.setGravity(Gravity.CENTER);
            textView.setText(
                Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER))
            );

            return textView;
        }
    }
}` 
```

***\\\\\\\\更新\\\\\\***

我发现这篇[文章](https://stackoverflow.com/questions/2566485/webview-and-cookies-on-android)似乎是一个类似的问题，可能是因为我使用`mWebView.loadUrl("http://www.flyalaskava.org/incog/mobile/");` 它就像一个新的浏览器，有没有办法在不使用该方法的情况下更改 url。

[这](http://i50.tinypic.com/2hs5ahk.png)是问题的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:22:58.587

考虑使用[服务](http://developer.android.com/guide/components/services.html)而不是 cookie。服务将允许您在应用程序的后台保持与服务器的连接。服务一旦创建就很容易被引用（阅读服务和意图）。然后，该服务将充当您与服务器的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:31:38.940

创建您的后添加以下行`WebView`：

```
CookieSyncManager.createInstance(mWebView.getContext()).sync();
CookieManager.getInstance().acceptCookie(); 
```

# wpf - WPF ComboBox：如何使用具有绑定的通用 ItemContainerStyle

> ID：13773048
> 
> 赞同：1
> 
> 时间：2012-12-08T00:14:15.377
> 
> 标签：wpf, styles, bind, itemcontainerstyle

我想为我的 ComboBoxItem 内容使用通用样式，并将文本内容绑定到我的基础类上的不同属性。所以这是我能想到的最好的方法，但绑定是硬编码的。因此，对于使用此 ItemContainerStyle 绑定到组合框的每个类，我都必须实现“MainText”和“SubText”属性。

问题是，有没有办法对绑定进行软编码，以便从组合框引用的样式我可以指定使用底层类的哪些字符串属性。

```
<Style TargetType="{x:Type ComboBoxItem}"  x:Key="ComboBoxItemStyleA1">
        <Setter Property="Template" >
            <Setter.Value>
                <ControlTemplate TargetType="ComboBoxItem">

                    <Border x:Name="BB" Padding="8,3,8,3" Background="DarkGreen">
                        <StackPanel Margin="0">
                            <TextBlock Foreground="White"   FontSize="16" Text="{Binding MainText}"/>
                            <TextBlock Foreground="White"   FontSize="8" Text="{Binding SubText}"/>
                        </StackPanel>
                    </Border>
                        <ControlTemplate.Triggers>

                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" TargetName="BB" Value="#FF256294"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

并使用这种风格......

```
<ComboBox ItemsSource="{Binding Items}" 
    ItemContainerStyle="{StaticResource ComboBoxItemStyleA1}" /> 
```

进一步 dowhilefor 的回答（非常感谢 - WPF 很棒，但肯定是一次发现之旅）

我最初使用数据模板来定义单元格外观 - 然后想使用基于组合框的样式和定义的控件模板，我可以在其中指定 onmouseover 触发器。即这些是为了改变背景颜色等。

Butj a) 我无法删除上面模板的边框部分 - 触发器通过 targettype="BB" 绑定到它。所以我有点想将触发器绑定到容器，这样数据模板就会从模板绑定中获取背景，但不知道如何将其插入。

b）我意识到，即使我注释掉触发器上的 BB 特定绑定只是为了让它运行——组合框也找不到并使用我定义的 DataTemplate。似乎在我的 comboboxitemstyle 中定义 controltemplate 会阻止它拾取数据模板。

我希望我在这里说得通 - 底线是我只想要一种样式，我可以使用触发器来设置我的 cobobox 项目的背景颜色。它不应该知道数据是什么 - 即能够插入将（模板？）绑定到此背景颜色的数据模板。

非常感谢您的快速响应。

顺便说一句，我将 ItemContainerStyle 与 ItemTemplate 结合使用，因此我可以在下拉列表中使用与组合框列表中显示的内容不同的表示形式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:18:17.967

首先不要使用`ItemContainerStyle`。更准确地说，永远不要对 内部的数据上下文有任何绑定`ItemContainerStyle`，至少不要尝试。为什么？Style 用于定义组合框项目的外观，而不管内容。如果要定义内容的外观，请使用 DataTemplate。有多种方法可以告诉组合框他可以在哪里为您提供的数据找到合适的 DataTemplate。签出该属性并搜索隐式样式`ItemTemplate`，`ItemTemplateSelector`以了解有关它们的更多信息。

因此，对于您的问题，`ItemContainerStyle`为您创建一个组合框（如果您真的需要的话），它不关心将要放入的对象。现在，您仍然需要为每个人提供多个 DataTemplate，并了解您想要模板化的数据对象。没有办法解决它，没有软数据绑定。试着让你的模板小而简单。如果由于某种原因您需要完全相同的模板，但您的属性只是命名不同，为什么不使用带有 properties 的 DataContext 的包装器项`Caption`，`Description`您可以在代码中决定如何用包装到此中的真实数据填充这些属性目的。

# cocoa - NSView - 在什么情况下边界和框架 *size* 可能不相等？

> ID：13773050
> 
> 赞同：1
> 
> 时间：2012-12-08T00:14:47.793
> 
> 标签：cocoa, nsview

我知道 frame 是视图相对于其父视图的框架，而 bounds 是视图的内部边界（除了滚动视图，原点总是 [0, 0] 吗？）。

但是，我不清楚在什么条件下框架和边界**大小**可能会有所不同，如果有的话。是否有官方的 Apple 文档说明`frame.size = bounds.size`是否`frame.size ?= bounds.size`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:14:37.750

你可以做任何你想做的事情。想象一下，您的视图是一幅画，您只能通过相机观看。移动原点将改变您当前可以通过移动相机看到的绘画部分。缩小尺寸会放大，因此可以看到更少的绘画，但看起来更大。扩大尺寸会缩小，以便更多的绘画可见，但看起来更小。

从[文档中`bounds`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/bounds)：

> 默认情况下，返回的矩形的原点是 (0, 0) 并且它的大小与接收者的框架矩形的大小（以磅为单位）相匹配......
> 
> 如果显式更改边界矩形的原点或大小，此方法不会返回默认矩形，而是返回您设置的矩形。但是，如果您向视图添加旋转因子，该因子也会反映在返回的边界矩形中。

并从以下[文档中获取`setBounds:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setBounds%3a)：

> 边界矩形确定接收器坐标系在其框架矩形内的原点和比例......
> 
> 调用此方法后，NSView 会创建一个内部变换（或将这些更改附加到现有的内部变换）以在您的视图中从帧坐标转换为边界坐标。只要两个坐标系的宽高比保持不变，你的内容就显得正常。如果比率不同，您的内容可能会出现偏差。

# eclipse - 具有 groovy 性质的 Eclipse 动态 Web 项目复制 .groovy 文件

> ID：13773051
> 
> 赞同：0
> 
> 时间：2012-12-08T00:15:11.943
> 
> 标签：eclipse, deployment, groovy, web, project

我有一个 eclipse 动态 web 项目，它有一些 groovy 文件（虽然不是 grails 项目，只是将 groovy 用于一些小的后端东西）。我已将 src/main/groovy 添加为源文件夹。但是，当我选择“在服务器上运行”时，它会复制实际的 .groovy 文件，就好像它是一个资源一样。有没有办法解决这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T16:22:34.950

我在这里遇到了完全相同的问题。我在这里有一个使用以下内容的网络项目：

Eclipse Kepler Gradle Groovy Spring MVC

我在 Eclipse 中设置了 Tomcat，从命令行或 Gradle 视图我可以编译、组装和生成 war 文件，但是当我尝试“在服务器上运行”时，部署到 Tomcat 的文件是 .groovy 文件，而不是实际的 .class 文件，即使它们是在 build/classes/main 文件夹中成功生成的

因此，为了解决这个问题，我删除并在 eclipse 中重新创建了 Tomcat 服务器，之后它能够找到并部署由 Gradle 编译的正确文件集

希望这可以帮助

# jquery - 按钮第二次无法点击

> ID：13773053
> 
> 赞同：0
> 
> 时间：2012-12-08T00:15:30.127
> 
> 标签：jquery, html

我的 jQuery 代码出现问题，当我按下“编辑”按钮，然后按下“取消”按钮时，如果我再次按下“编辑”，它将不起作用。

HTML

```
<div id="2">
<button class="edit" id="2">edit</button>
</div> 
```

jQuery

```
$('.edit').click(function(){
        var id = $(this).attr('id');
        var post = $('div#'+id);
        var title = $('div#'+id+'>h1').html();
        var content = $('div#'+id+'>p').html();
        var edit = '<input type="text" class="title" id="'+id+'" value="title"><br>';
        var edit2 = '<textarea class="content" id="'+id+'" rows="10" cols="100">content</textarea>';
        $(this).remove();        
        post.append(edit);
        post.append(edit2);
        post.append('<br><button id="'+id+'" class="save">save</button><button id="'+id+'" class="cancel">cancel</button>');
        $('.cancel').click(function(){
            $('div#'+id+'>input').empty().remove();
            $('div#'+id+'>textarea').empty().remove();
            $(this).empty().remove();
            $('.save').empty().remove();
            $('div#'+id+'>br').remove();
            post.append('<button class="edit" id="'+id+'">Edit</button>');
        });
        /*$('.save').click(function(){
            var newTitle = $('input#'+id+'.title').val();
            var newContent = $('textarea#'+id+'.content').val();
            console.log(newTitle);
            console.log(newContent);
            console.log(id);
            $.post('/editPost', {id: id, title: newTitle, content: newContent}, function(){
                location.reload();
            });
        });*/
    }); 
```

jsfidde：http: [//jsfiddle.net/pHCT8/2/](http://jsfiddle.net/pHCT8/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:18:09.397

首先，您不能在两个元素上使用相同的 ID，这肯定会呈现浏览器和 JS 错误。

（此外，如果您不使用 HTML5 DOCTYPE，那么您的 ID 不应以数字开头）

然后使用 jQuery`on()`语法作为实时处理程序：

```
$('#2').on('click','.edit', function(){ 
```

请注意，开始`$('#2')`是您希望单击侦听器工作的外部限制。如果你需要它，那么使用`$('body').on('click','.edit', function(){`它会监听`.edit`整个身体标签内的所有点击

原因是您的 click 事件处理程序仅适用于使用 DOM 加载的元素，但您的 ajax 编辑函数将创建加载时（动态创建）时不在 DOM 中的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:22:45.907

您可以隐藏/显示它，而不是销毁和重新创建按钮（在这种情况下您会丢失事件处理程序）

```
var self = $(this).hide();
...
$('.cancel').click(function(){
    ...
    self.show(); 
```

[http://jsfiddle.net/mowglisanu/pHCT8/4/](http://jsfiddle.net/mowglisanu/pHCT8/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T00:21:05.037

与其真正摆脱按钮，为什么不直接在点击时使用 .hide，然后在点击取消时使用 .show 呢？

[http://jsfiddle.net/pHCT8/5/](http://jsfiddle.net/pHCT8/5/)

更改的部分是：

`$(this).hide();`而不是`$(this).remove;`

`$('.edit').show();`而不是`post.append('<button class="edit" id="'+id+'">Edit</button>');`

# javascript - Jquery：单击内部其他对象时阻止onclick div动作

> ID：13773057
> 
> 赞同：0
> 
> 时间：2012-12-08T00:15:46.790
> 
> 标签：javascript, jquery, html, hide, show

我有这种情况：http: [//jsfiddle.net/Lm7ac/4/](http://jsfiddle.net/Lm7ac/4/)

```
$(".more").hide();

$(document).on("click", ".btn",function() { 
            alert("hello");     
});   

$(document).on("click", "div.post",function() {
     var morediv = $(this).find(".more");

     morediv.slideToggle('fast');
}); 
```

单击“.btn”时，我需要保持“.more”关闭（或打开）。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:18:41.630

使用`event.stopPropagation()`：

```
$(document).on("click", ".btn",function(event) {
    event.stopPropagation();    
    alert("hello");     
}); 
```

...注意`event`回调的参数，确保如上所述包含它。

[http://jsfiddle.net/KJ5Uv/](http://jsfiddle.net/KJ5Uv/)

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T00:18:33.680

就`return false`在`.btn`单击事件处理程序的末尾。

```
$(document).on("click", ".btn",function() { 
            alert("hello");     
    return false;
}); 
```

当您`return false`在 jQuery 事件处理程序中时，它就像同时调用`event.preventDefault()`一样`event.stopPropagation()`。

这是一个演示：http: [//jsfiddle.net/Lm7ac/5/](http://jsfiddle.net/Lm7ac/5/)

文档`event.preventDefault()`：[http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

文档`event.stopPropagation()`：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

# objective-c - 添加列时出现问题 - Cocoa

> ID：13773059
> 
> 赞同：0
> 
> 时间：2012-12-08T00:16:08.727
> 
> 标签：objective-c, cocoa, updates

只是一个简单的问题（我希望！）

我有一个***void***方法，可以在表中添加一列。

为什么如果我以编程方式调用该方法（例如：[self method]）我的表***将不会更新***，而是如果我通过*IBAction*（从应用程序按下按钮）调用它，它可以*工作*？实际上我可以从日志中看到**在这两种情况下都调用了该方法，**但仅使用 IBAction 更新数据。

**方法：**

```
- (IBAction)void {
    NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:@"1"];
    [column setWidth:50];
    [tableData addTableColumn:column];
    [tableData reloadData];

    [[column headerCell] setStringValue:@"aColumn"];
    NSLog(@"Method called"); //The method is called in both cases
} 
```

我无法找出我做错了什么。

（可可编程新手）

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:51:50.190

你在哪里以编程方式调用它？您可能在视图加载到 init 方法之前调用了它，而不是像 awakeFromNib 之类的其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:46:38.370

我尝试了您的代码并得到了不同的结果。从代码中调用它很好（并且更新了表），但不是从按钮调用（并且在尝试从按钮调用时日志也没有运行）。

问题在于方法名称——您不应该将方法命名为 void。您是否在控制台中没有收到错误消息：“无法将操作 void：连接到 AppDelegate 类的目标”编译器甚至不允许我将该方法连接到按钮（看起来我可以在 IB 中，但是我收到该错误消息，如果我将该方法放在 .h 文件中，则它旁边没有显示它是否已连接的圆圈）。

# testing - 在 Visual Studio 2010 中测试 void

> ID：13773060
> 
> 赞同：0
> 
> 时间：2012-12-08T00:16:44.607
> 
> 标签：testing

我有一个项目（c#）并有以下代码。一切正常。但我只想知道如何测试它并在 Visual Studio 2010 中查看结果。我是经典的 asp 开发人员，总是`Response.end()`用来获取结果。但不知道如何在 c# 项目中做到这一点。谢谢。

```
public static string ApplicationLocationList()
{    
    GetApplicationLocationListTableAdapter getApplicationLocationListTableAdapter = new GetApplicationLocationListTableAdapter();

    DataTable dtgetApplicationLocationListTableAdapter.GetApplicationLocationListData(Library.MovieClass.saveApplicationID);

        if (dt.Rows.Count > 0)
        {
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                string cityList = dt.Rows[i]["City"].ToString();
                string stateList = dt.Rows[i]["State"].ToString();
                sb.Append(cityList + "," + stateList + System.Environment.NewLine);
            }
            return sb.ToString();
        }
        else
        {
            return string.Empty;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:37:39.580

从您对`Response`对象的引用来看，我猜这是一个 ASP.NET 项目。如果要查看`sb`页面上的内容，可以尝试以下操作：

```
Response.Write(sb.ToString());
Response.Flush(); 
```

那应该将内容写入`StringBuilder`缓冲区`Response`，并且该`Flush()`方法应该将其发送到客户端页面。

如果你只想看到`string`返回的空，你可以省略`Write()`方法和只是`Flush()`响应，它应该在回发后只显示一个空白页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:49:58.643

我假设这是一个 ASP.NET 应用程序，在这种情况下，`System.Web.HttpApplication.CompleteRequest`您`Response.End`希望`Response.Write(sb.ToString());`在`return sb.ToString();`.

如果它是一个控制台应用程序，那么`System.Diagnostics.Debug.WriteLine(sb.ToString());`在同一个地方使用。

# sql - Datepart 星期功能不起作用请需要帮助

> ID：13773062
> 
> 赞同：0
> 
> 时间：2012-12-08T00:17:00.817
> 
> 标签：sql, select, datepart

我要使用的表是

```
create type Rehearsal_ty as object
(RehID char(4),
RLocation add_ty,
Attendance varchar2 (100),
RDate date)

create table Rehearsal_tbl of Rehearsal_ty 
```

我尝试使用的 select 语句无法正常工作

```
SELECT rehid, DATEPART(wk,rdate)
from Rehearsal_tbl

SELECT DATEPART (ww,rdate())
FROM Rehearsal_tbl; 
```

请帮助真的卡住了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:10:04.133

**（更新）** 看起来 Oracle 文档不正确 - 这是一个有效的版本。你可以在这里测试它：[http ://sqlfiddle.com/#!4/77080/7](http://sqlfiddle.com/#!4/77080/7)

```
select RehID, to_char(rdate, 'IW') as IsoWeekChar
from Rehearsal_tbl; 
```

.

```
select RehID, to_char(rdate, 'WW') as IsoWeekChar
from Rehearsal_tbl; 
```

.

```
select RehID, to_number(to_char(rdate, 'IW')) as IsoWeekNumeric
from Rehearsal_tbl; 
```

.

```
select RehID, to_number(to_char(rdate, 'WW')) as OraWeekNumeric
from Rehearsal_tbl; 
```

# php - 我应该如何跟踪用户的电子邮件邀请

> ID：13773064
> 
> 赞同：0
> 
> 时间：2012-12-08T00:17:33.127
> 
> 标签：php, javascript, cookies, joomla

我正在创建一个病毒式电子邮件功能 - 它使用[PHP 创建一个独特的链接： uniqid - Manual](http://php.net/manual/en/function.uniqid.php)或类似的东西供用户共享。当点击其独特链接的人注册时，用户将获得免费的“信用”奖励。

我的问题：我如何跟踪用户的朋友到“注册完成”页面——这样我才能奖励用户？

我最好的猜测：1）设置一个cookie来识别用户的朋友何时到达“注册完成”页面？2) 或者直接把用户的朋友带到注册页面，然后解析链接并将唯一令牌放置在注册表单的隐藏字段中。示例：http: //FunNewSite.org/register.php?key= [14usdijf8923u5](http://FunNewSite.org/register.php?key=14usdijf8923u5)

我的问题类似于这些：[如何生成唯一的网址来跟踪用户注册？](https://stackoverflow.com/questions/5840058/how-to-generate-unique-urls-to-track-user-signups)

[rails beta 请求注册并获得社交媒体分享奖励](https://stackoverflow.com/questions/10920466/rails-beta-request-signup-with-social-media-sharing-reward)

但是这些答案对我来说没有足够的细节我的应用程序识别这个新用户的注册事件的最佳方式是什么？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:25:17.403

像上面显示的那样在 URL 中包含密钥，然后您可以通过 PHP 访问它：

```
<?php
$key = isset($_REQUEST['registration_key']) ? $_REQUEST['registration_key'] : '';
$key = preg_replace('/[^a-z0-9]/i', '', $key); // Strip out any non alphanumeric characters
?> 
```

并在您的 HTML 中打印：

`<input type="hidden" name="registration_key" value="<?php echo $key; ?>" />`

您可以添加任何您认为合适的其他跟踪逻辑（例如，如果您想记录他们开始注册但从未完成注册）。

然后，您只需检查何时发送登录以验证密钥。

**编辑**

如果您想“记住”用户在几天前点击了一个链接，然后通过直接进入回到您的网站并点击了“注册”，您可以使用 cookie。

您是否要将其归还给推荐用户取决于您。但除非您想这样做，否则您不需要 cookie 来完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:30:23.783

发送邀请后，只需将 userId 和密钥保存在数据库中即可。注册后，或在注册中，您可以从您提供的密钥中找到发件人的用户 ID。

# r - R中的logit函数

> ID：13773066
> 
> 赞同：4
> 
> 时间：2012-12-07T21:35:30.113
> 
> 标签：r, math

我阅读了标记为黄铜的数据集，我需要找到 3 个国家每个年龄的 logit 函数日志 (p/1-p)，并根据黄铜标准进行绘图。

```
dat <- structure(list(Age=c(1L,5L,10L,20L,30L),Brass_Standard=c(85,76.9,75,71.3,65.2),Sweden=c(98.7,98.4,98.2,97.9,97.4),Italy=c(84.8,73.9,72.1,69.9,64.1),Japan=c(96.4,95.2,94.7,93.8,91.7)),.Names=c("Age","Brass_Standard","Sweden","Italy","Japan"),class="data.frame",row.names=c("1","2","3","4","5"))

     Age   Brass_Standard  Sweden  Italy  Japan
1      1             85.0    98.7   84.8   96.4
2      5             76.9    98.4   73.9   95.2
3     10             75.0    98.2   72.1   94.7
4     20             71.3    97.9   69.9   93.8
5     30             65.2    97.4   64.1   91.7 
```

我将 R 中的 logit 定义为

```
logit<-function(x) log(x/(1-x)) 
```

但是当我尝试执行瑞典的值时，我得到了一个错误。其次，我如何绘制各国的 logit 曲线以进行比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:22:07.010

读取数据：

```
dat <- read.table(textConnection(
"Age Brass_Standard    Sweden  Italy   Japan
1   1   85.0   98.7   84.8   96.4
2   5   76.9   98.4   73.9   95.2
3   10  75.0   98.2   72.1   94.7
4   20  71.3   97.9   69.9   93.8
5   30  65.2   97.4   64.1   91.7
")) 
```

获取包：

```
library(ggplot2)
library(scales)
library(reshape2) 
```

将百分比重新调整为比例：

```
dat[,-1] <- dat[,-1]/100 
```

重塑数据：

```
mdat <- melt(dat,id.var="Age") 
```

绘制所有变量（包括`Brass_Standard`）与年龄的关系图，将 y 轴转换为 logit 标度，显示线性回归拟合：

```
qplot(Age,value,data=mdat,colour=variable)+
    scale_y_continuous(trans=logit_trans())+
    geom_smooth(method="lm")+theme_bw()
ggsave("logitplot1.png") 
```

![在此处输入图像描述](../Images/43506fb40faf43d0779dfc50c8082283.png)

重塑数据略有不同：

```
mdat2 <- melt(dat,id.var=c("Age","Brass_Standard")) 
```

绘制数据 vs.`Brass_Standard`而不是 vs. `Age`：将 x 和 y 都转换为 logit 尺度，并再次添加线性回归拟合。

```
qplot(Brass_Standard,value,data=mdat2,colour=variable)+
    scale_y_continuous(trans=logit_trans())+
    scale_x_continuous(trans=logit_trans())+
    geom_smooth(method="lm")+
    theme_bw()
ggsave("logitplot2.png") 
```

![在此处输入图像描述](../Images/971e6a54086f9ef2269290301fac9fdf.png)

如果您需要获得这些拟合的系数，我会建议如下：

```
library(nlme)
pdat <- with(mdat2,data.frame(Age,variable,
                              logit_Brass_Standard=plogis(Brass_Standard),
                              logit_value=plogis(value)))

fit1 <- lmList(logit_Brass_Standard~logit_value|variable,data=pdat)
coef(fit1) 
```

[http://www.demog.berkeley.edu/~eddieh/toolbox.html#BrassMortality](http://www.demog.berkeley.edu/~eddieh/toolbox.html#BrassMortality)看起来它也可能有用。

（我希望我没有为你做作业……）

# java - 获取 JPanel 图形颜色总是相同的颜色

> ID：13773069
> 
> 赞同：1
> 
> 时间：2012-12-08T00:17:43.350
> 
> 标签：java, swing

我有一个垂直颜色条，它有 7 种主要颜色全部组合为渐变。然后我把它画成`JPanel`这样：

```
@Override
public void paintComponent(Graphics g){
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D)g;
    int w = getWidth();
    int h = getHeight();

    Point2D start = new Point2D.Float(0, 0);
    Point2D end = new Point2D.Float(0, h);
    float[] dist = {
        0.02f,
        0.28f,
        0.42f,
        0.56f,
        0.70f,
        0.84f,
        1.0f
    };

    Color[] colors = {
        Color.red,
        Color.magenta,
        Color.blue,
        Color.cyan,
        Color.green,
        Color.yellow,
        Color.red
    };

    LinearGradientPaint p = new LinearGradientPaint(start, end, dist, colors);

    g2d.setPaint(p);
    g2d.fillRect(0, 0, w, h);
} 
```

然后我在同一个类中有一个单击事件，如下所示：

```
public void mouseClick(MouseEvent evt){
    BufferedImage img = (BufferedImage)this.createImage(getWidth(), getHeight());
    int[] colors = new int[3];
    int x = evt.getX();
    int y = evt.getY();
    img.getRaster().getPixel(evt.getX(), evt.getY(), colors);
    ColorPickerDialog.sldColor = new Color(colors[0], colors[1], colors[2]);
    getParent().invalidate();
    getParent().repaint();
} 
```

该行`img.getRaster().getPixel(evt.getX(), evt.getY(), colors);`始终返回 RGB 颜色：

*   240
*   240
*   240

我可以点击任何地方，红色、黄色、绿色、青色等，我总是能恢复那些 RGB 颜色。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:38:47.507

我想我看到了问题。线

```
img.getRaster().getPixel(evt.getX(), evt.getY(), colors); 
```

返回对应于 RGB 颜色的 int[]。getPixel 方法将您的数组作为参数接收，但它返回自己的数组。它从未真正触及您的阵列。你想做的是这个。

```
int[] colors = img.getRaster().getPixel(evt.getX(), evt.getY(), new int[3]); 
```

这应该将方法的返回值存储在您的数组中，而不是默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:51:18.843

我得到了它！

我替换了这一行：

```
BufferedImage img = (BufferedImage)this.createImage(getWidth(), getHeight()); 
```

有了这个：

```
BufferedImage img = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
Graphics2D g = img.createGraphics();
this.paint(g); 
```

And now it works perfectly!

# playframework - Play Framework 2 - 多数据库配置中的枚举问题

> ID：13773073
> 
> 赞同：1
> 
> 时间：2012-12-08T00:18:14.847
> 
> 标签：playframework, playframework-2.0, multiple-databases, ebean

我在尝试配置对两个 oracle 数据库的访问时遇到了一些奇怪的问题。这是我的配置文件的样子：

```
db.default.url="jdbc:oracle:thin:@db1:1521:DB1"
db.default.driver=oracle.jdbc.driver.OracleDriver
db.default.user=username1
db.default.password=password1

db.db2.url="jdbc:oracle:thin:@db2:1521:DB2"
db.db2.driver=oracle.jdbc.driver.OracleDriver
db.db2.user=username2
db.db2.password=password2

ebean.default="model.db.Class1,model.db.Class2"
ebean.db2="model.db2.Class3,model.db2.Class4" 
```

Class1 声明了一个用于类属性之一的枚举。

在应用程序启动时的运行时出现异常：

```
play.api.UnexpectedException: Unexpected exception [NoClassDefFoundError: models/db Class1$myEnum] at lay.core.ReloadableApplication$$anonfun$get$1$$anonfun$apply$3$$anonfun$1.apply(ApplicationProvider.scala:134) ~[play_2.9.1.jar:2.0.4] 
```

...

当配置文件中单独列出类时，Ebean 似乎找不到我的枚举的声明。如果我从 application.conf 中删除第二个数据库的配置并将 ebean.default 的定义替换为“models.*”，一切正常。

任何帮助将不胜感激。

弗拉德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:41:43.013

据我所知，您必须将模型类放入单独的包中，您不能引用单个类。

因此，在您的情况下，它将是：

```
ebean.default="model.db.*"
ebean.db2="model.db2.*" 
```

# ruby - Ruby 脚本的 UTF-8 编码

> ID：13773078
> 
> 赞同：0
> 
> 时间：2012-12-08T00:19:11.633
> 
> 标签：ruby, utf-8, character-encoding

这是我昨天问的一个[问题](https://stackoverflow.com/questions/13753601/nokogiri-syntax-error-unexpected-tidentifier-expecting-end)的后续。我正在尝试学习独立的 Ruby 脚本，但我正在努力解决我相信引入 Ruby 1.9 的整个字符编码问题。

昨天发帖人建议我在文档顶部插入`# encoding: UTF-8`一行，这似乎暂时有效。现在我正在尝试编写一个简单的脚本来将行回显到终端中，但没有任何反应。幸运的是，没有错误消息，但又没有任何反应。

这是一个例子。这将工作...

```
puts "hello" 
```

并将`hello`在终端中回显，但这...

```
# encoding: UTF-8

puts "hello" 
```

不起作用。

显然，我对 char 编码的复杂性不熟悉，有人可以解释这一点以及我需要做什么才能使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:00:55.607

据我所知，这似乎是 Espresso 的问题。

# php - 如何检查 webhook 发布的数据是否在某个表中，如果没有从另一个表中选择一些数据

> ID：13773080
> 
> 赞同：0
> 
> 时间：2012-12-08T00:19:21.153
> 
> 标签：php, sql-server, tsql, select

我正在尝试使用 webhook 发布的 xml 数据更新 ms sql server 表的特定字段数据，下面是 php $tsql 脚本

$tsql = "更新项目集数量 = (数量 - '$qty') WHERE ItemLookupCode = '$sku'";

'$sku' 来自 webhook 发布的 xml 数据字段，但问题是，例如，我从 xml 中获得了 4 个'$sku'，而 '$sku' 中的 2 个与 'Item' 表中的 ItemLookupCode 匹配，因此我可以更新但其他 2'$sku' 我必须使用另一个表中的不同字段从另一个表中找到 - Item2（例如另一个表的名称）所以当我在 Item2 表中得到 2'$sku' 的特定字段后，我会回到'Item ' 表，我可以使用从 Item2 表中获得的数据使用不同的字段更新 Item 表中的 Quantity 如果我让你感到困惑，我很抱歉......所以基本上我要做的是如果来自 xml 的“$sku”匹配Item 表中的 ItemLookupCode 然后我更新数量，但如果 xml 中的“$sku”不匹配或在 Item 表中没有另一个词s ItemLookupCode 然后我如何尝试使用那些'$ sku'从另一个表中查找一些数据

（例如）如果某些项目的 sku 不在 Item 表的 ItemLookupCode 列中，则使用该“$ sku”选择 Item2 表中某些列的特定值以更新 Item 表的 Quantity

十分感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:06:08.330

```
UPDATE Item  SET Quantity = (Quantity - '$qty') 
From OtherTable o
WHERE Item.Name=o.Name and o.ItemLookupCode = '$sku' 
```

# ruby - Twitter Gem / API，是否可以根据共享的 t.co url 找到 screen_name？

> ID：13773081
> 
> 赞同：0
> 
> 时间：2012-12-08T00:19:23.247
> 
> 标签：ruby, google-analytics, twitter, gem

我正在使用 twitter gem，但我可以接受 API 答案。通过谷歌分析，我可以访问共享 URL 及其有效性： ![共享网址](../Images/df98a2c286e62516e864e6d8ad1c4bb4.png)

我想知道是否可以追踪哪个用户共享了哪个链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:38:03.127

您将不得不使用搜索 API - 但有一个问题。

Twitter 的搜索 API 不索引 t.co URL - 因此您无法搜索 t.co/0uxMcDrD。

但是，Twitter 将允许您搜索包含在 t.co shortner 中的 URL。

在您的情况下，所有这些 URL 都指向 picatic.com

因此，像[https://twitter.com/search?q=picatic.com](https://twitter.com/search?q=picatic.com)这样的搜索将显示链接到您网站的每条推文，因此，它们都包含在 t.co 中。

然后，您可以查看哪些用户发布了有关您网站的推文并链接到该网站。

# sql - 如何在非规范化外键上添加约束？

> ID：13773084
> 
> 赞同：0
> 
> 时间：2012-12-08T00:19:36.530
> 
> 标签：sql, sql-server, foreign-keys

在 SQL Server 数据库中，我有两个具有一对多关系的表。Table2 有一个列 Table1ID，它是一个外键。

现在我们的业务规则要求我们添加第三个表 Table3，它将位于其他两个表之间。所以 Table3 会有一个 Table1ID 外键，而 Table2 会有一个 Table3ID。为了向后兼容，我们需要将 Table1ID 保留在 Table2 中。

如何确保 Table2 中的 Table1ID 始终与 Table3 中匹配记录的 Table1ID 匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:24:11.710

也许通过在 table3id 和 table1id 列上定义表 2 和表 3 之间的外键约束。

# java - Linux + 动态插入的 Java 小程序 = 在 NPObject 上调用方法时出错

> ID：13773086
> 
> 赞同：1
> 
> 时间：2012-12-08T00:19:40.790
> 
> 标签：java, php, javascript, linux, japplet

我有一个 html 页面，我在其中动态创建小程序的 HTML 代码并使用 javascript 将其插入到页面中。
之后我调用了一些小程序的方法。
在其他操作系统中一切正常，并且用户以前在某些 Linux 机器上工作。
但是现在在 Linux 下我得到一个非常奇怪且过于笼统的错误信息：
`Error calling method on NPObject!`
我真的不明白发生了什么。当不是动态创建小程序代码时（不是用 JS，只需将其插入到模板中的 HTML 中），它就可以正常工作。
这可能是什么？
有什么想法吗？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:06:31.117

> 这可能是什么？

一系列 applet/JS/browser/CSS 交互错误中的最新一个。以下是[applet liveconnect](https://www.google.com/search?hl=en&as_q=applet+liveconnect&as_epq=&as_oq=&as_eq=&as_nlo=&as_nhi=&lr=&cr=&as_qdr=all&as_sitesearch=bugdatabase.sun&as_occt=any&safe=images&tbs=&as_filetype=&as_rights=#hl=en&lr=&tbo=d&as_qdr=all&q=applet+liveconnect+site%3abugs.sun.com&oq=applet+liveconnect+site%3abugs.sun.com&gs_l=serp.3...49069.51894.0.53059.5.5.0.0.0.0.745.2661.4-3j1j1.5.0.les%3B..0.0...1c.1.zJfIAMEjGqw&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.&fp=303f6dd17190fca9&bpcl=39650382&biw=1030&bih=975)的热门内容。

> 有什么想法吗？

不要与之抗争，而是使用另一种策略。我建议：

1.  在页面加载时加载小程序。
2.  使用 CSS 隐藏小程序（将其移出可见页面，或缩小尺寸）。
3.  触发与 CSS 交互的 JS 来显示小程序。

# java - 使包重定向到另一个包

> ID：13773090
> 
> 赞同：0
> 
> 时间：2012-12-08T00:20:17.253
> 
> 标签：java, package

我想让一个包重定向到另一个包。例如，我有一个名为“packageA”的包和另一个名为“packageB”的包，导入 packageA 将导入 packageB。我希望能够在不复制包的情况下做到这一点。另外，如果导入的是 packageA 而不是 packageB，有什么方法可以运行方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:27:36.177

简短的回答：没有。

长答案：包是类的一部分，`import`语句是在编译时读取的，它们不会被解释。您想要的必须由扭曲的 Java 编译器完成。由于一些编译器是开源的，这*可能是*可以做到的，但不要期望找到这样的功能。

替代答案：如果您使用的是 Netbeans、Eclipse 等 IDE。有很多重构工具可以帮助您将包名称更改为另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:31:58.363

让我们看看`import`语句是如何工作的：

首先，`import`只导入类或接口。它**从不**导入包。特别是，像

```
import java.util.* 
```

导入名为 . 的包中的所有**类和接口**`java.util`。这个包只是类和接口的容器，所以谈论“导入包”真的没有任何意义。包本身不是编译或运行的任何东西。

话虽如此，谈论“重定向”没有任何意义，因为您要重定向到什么？如果你想从“packageA”中导入一个类，直接导入即可。

同样，从 packageA 导入一个类可以让您访问该类的方法。由于该类位于 packageA 中，因此尝试从 packageB 导入它没有任何意义。即使 packageB 有一个同名的类，它们也是两个不同的类。事实上，这是 Java 中使用包的主要原因：避免两个不同程序员编写的类的名称冲突。

综上所述，您遇到了什么问题，您试图通过“重定向导入”来解决？

# objective-c - 如何在 iOS/OS X 中将 HTML 转换为 Markdown？有什么方法可以在应用程序中使用 pandoc？

> ID：13773092
> 
> 赞同：3
> 
> 时间：2012-12-08T00:20:35.863
> 
> 标签：objective-c, ios, haskell, markdown, pandoc

我有一个要转换为 markdown 的 HTML 字符串。我发现的最好的工具是 pandoc，它是用 Haskell 编写的。如何让 pandoc 在 Mac/iOS 应用程序中运行？我听说过将 Haskell 编译到 ARM 以合并到 iOS 项目中，但我不知道如何真正让 pandoc 在 Objective-C 应用程序中编译和工作。

谢谢，罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T02:25:41.283

我将尝试帮助您了解如何从问题的 Objective-c 部分使用 pandoc。Objective-C 是 C 的超集，或者有人告诉我，这意味着有效的 C 代码是有效的 Objective-C 代码。

所以你的问题可能是我如何从 C 中调用 haskell，有一个[关于](http://www.haskell.org/haskellwiki/Calling_Haskell_from_C).

你如何在 IOS 和 arm 上完成所有这些工作是另一回事，当被分解成另一个问题时更有可能得到回答。

# android - Android：无法在屏幕上显示随机数

> ID：13773095
> 
> 赞同：0
> 
> 时间：2012-12-08T00:20:48.363
> 
> 标签：android

我正在尝试将随机生成的整数打印到屏幕上。我查看了其他几个人关于如何做到这一点的问题，这是我的尝试：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_program);
        TextView currentNumber = new TextView(this);
        // randNum() generates the random number and returns it (returns int)
        currentNumber.setText(randNum()); 
        this.setContentView(currentNumber);
    } 
```

但是，当我尝试打开当前活动时，（模拟器）应用程序停止工作。我究竟做错了什么？此外，我将计划允许用户稍后生成一个新的随机数，并且我希望显示器更新`currentNumber`变量（覆盖第一个数字）。这是最好的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:22:45.953

`randNum()`我假设是一个`int`. 当您传递`int`to 时`setText()`，它会解释为您不想要的资源。

试试这个：

```
currentNumber.setText(String.valueOf(randNum())); 
```

或者，如果您愿意（效率较低，但可能更具可读性）：

```
currentNumber.setText(randNum() + ""); 
```

*注意：另外，当您将来遇到崩溃时，请将 LogCat 的*完整*红色部分发布，以便我们帮助您调试。*

# php - Eventbrite 自定义 user_list_events

> ID：13773098
> 
> 赞同：0
> 
> 时间：2012-12-08T00:21:05.517
> 
> 标签：php, eventbrite

使用 Eventbrite API 创建自己的自定义事件列表时遇到了一些麻烦。

使用此处提供的标准示例时，我可以正常工作[https://github.com/ryanjarvinen/eventbrite.php/blob/master/examples/event-list-example.md](https://github.com/ryanjarvinen/eventbrite.php/blob/master/examples/event-list-example.md)，但我想自定义布局，以及拉一些额外的字段。

这是我在使用上述方法时所拥有的，效果很好：

```
try {
    $events = $eb_client->user_list_events();
} catch ( Exception $e ) {
    // Be sure to plan for potential error cases 
    // so that your application can respond appropriately

    //var_dump($e);
    $events = array();
}

Eventbrite::eventList( $events, 'eventListRow'); 
```

但是，当我尝试使用提供的附加事件列表自定义示例时，没有检索到任何数据。以下是我尝试整合的方式：

```
$events = $eb_client->user_list_events();
$events = array();

return $this->load->view('user_list_events', $events, TRUE);        
$event_list_html = Eventbrite::eventList( $events, $custom_render_function);
return $event_list_html; 
```

我的查看页面是：

```
$custom_render_function = function($evnt){
$time = strtotime($evnt->start_date);
if( isset($evnt->venue) && isset( $evnt->venue->name )){ 
    $venue_name = $evnt->venue->name;
}else{
    $venue_name = 'online';
}   
$evnt_html = "<div class='eb_evnt_list_item' id='evnt_div_"
            . $evnt->id ."'><span class='eb_evnt_list_date'>"
            . strftime('%a, %B %e', $time) . "</span><span class='eb_evnt_list_time'>" 
            . strftime('%l:%M %P', $time) . "</span><a class='eb_evnt_list_title' href='"
            . $evnt->url."'>".$evnt->title."</a><span class='eb_evnt_list_location'>"
            . $venue_name . "</span></div>\n";
return $evnt_html;
} 
```

我尝试了多种选择，例如添加上面的代码，我已经返回 $this->load->view('user_list_events', $events, TRUE); ，但这会返回 Parse 错误：语法错误，意外的 '}' 或 Parse 错误：语法错误，意外的 '$event_list_html'。

提前致谢。本

**更新**

```
 $events = $eb_client->user_list_events();

 return $this->load->view('user_list_events', Eventbrite::eventList( $events, $custom_render_function), TRUE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:39:14.403

看起来您可能会通过用新的空数组覆盖 API 响应来擦除它：

```
$events = array(); 
```

# qt - 是否可以将动态创建的对象移动到 qthread 中？

> ID：13773101
> 
> 赞同：1
> 
> 时间：2012-12-08T00:21:40.043
> 
> 标签：qt, qthread, qt4.7

这是关于 qthreads 的一般问题，我知道如何使用 movethread() 函数，但那是针对非动态创建的对象。

用户将通过选择添加按钮在 GUI 应用程序上创建对象。如果用户想要删除已创建的对象，也可以使用删除按钮。用户应该能够从列表视图中选择对象。我已经使用 qstyleeditemdelegate 创建了自定义列表视图的示例，我知道如何将列表移动到模型中。我担心线程。

我想做的是允许用户动态创建某个类的对象。然后将每个对象移动到 qthread 中。我应该继续寻找吗？任何提示，技巧或提示？

我可以创建一个将对象移动到线程中的函数吗？

```
Pseudo Code: 
void MoveThisObject(MyCustomObject Object)
{
       QThread* thread = new QThread;
       Object->moveToThread(thread);
       /****setup connections****/

       thread->start();
} 
```

我仍在写下我需要的东西，我还没有真正创建实际的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:26:16.783

您可以将 QObject（当然，只要它不是 QWidget）移动到不同的线程，无论它是否是动态创建的。大多数应用程序中的大多数 QObject 无论如何都是动态创建的，否则它们很难多态。

# python - 我有一个从超类继承并覆盖函数的子类。如何让输出显示为 3 和 6？

> ID：13773102
> 
> 赞同：2
> 
> 时间：2012-12-08T00:21:42.950
> 
> 标签：python, class, overriding, super

我已经搞乱了参数和一般的类，但我仍然无法让它工作。即使我删除`self.v3`了我需要的，我也会得到`None`第二个输出......

```
class Base(object):
    def __init__(self, v1, v2):
        self.v1 = v1
        self.v2 = v2
    def together(self):
        return self.v1 + self.v2

class Sub1(Base):
    def __init__(self, v1, v2, v3):
        super(Sub1, self).__init__(v1, v2)
        self.v3 = v3
    def together(self):
        super(Sub1, self).together() + self.v3
b1 = Base(1,2)
print b1.together()
s1 = Sub1(3,2,1)
print s1.together() 
```

输出：`3, 6`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:41:24.610

您的子类的`together`方法实际上并不返回该值。将其更改为

```
return super(Sub1, self).together() + self.v3 
```

# asp.net - 如何在 asp.net 中绑定 DataList 模板字段

> ID：13773103
> 
> 赞同：0
> 
> 时间：2012-12-08T00:21:44.300
> 
> 标签：asp.net, templates, bind, datalist

我想将 Datalist 模板中的标签 -i created- 绑定到我的 dataSource 中名为“item”的 col

经过几次试验，我使用了以下代码

```
 DataList2.DataSource = dt;  // my DataSource
        Label l1 = (Label)DataList2.FindControl("itemLabel");
        l1.Text = dt.Rows[0]["item"].ToString();
        DataList2.DataBind(); 
```

我在第 3 行出现以下错误我正在寻找正确的表达式

```
Object reference not set to an instance of an object. 
```

任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:30:29.280

标签为空，因为它`NamingConainer`（用于`FindControl`）不是`DataList`其中之一`DataListItems`（a`DataList`用于多个项目）。

所以你需要`DataBind`先处理它，然后你才能处理它的[`ItemDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)事件。在那里您可以找到标签和底层的`DataItem`.

```
void Item_Bound(Object sender, DataListItemEventArgs e)
{
   if (e.Item.ItemType == ListItemType.Item || 
       e.Item.ItemType == ListItemType.AlternatingItem)
   {

    // Retrieve the Label control in the current DataListItem.
    Label itemLabel= (Label)e.Item.FindControl("itemLabel");
    DataRow row = ((DataRowView)e.Item.DataItem).Row;
    String item = row.Field<string>("item");
    itemLabel.Text = item;
 }
} 
```

# java - 在 java 多线程程序中使用 AtomicInteger 是否比其他同步方法更慢且效率低？

> ID：13773104
> 
> 赞同：1
> 
> 时间：2012-12-08T00:21:47.310
> 
> 标签：java, multithreading

我正在用两个多线程 java 程序进行实验。我有一个不同步，另一个正在使用`AtomicInteger`. `AtomicInteger`速度要慢得多。我认为这可能是因为`AtomicInteger`使用的方法`compareAndset()`。我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:22:48.030

当然，同步的安全性伴随着一些性能成本。例如，请参阅[同步成本](https://stackoverflow.com/q/4354677/130224)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:47:19.887

该类`AtomicInteger`及其同级将与您可以用纯 Java 编写的任何等效功能一样快，并且通常会更快，因为它们很可能能够使用平台上可用的本机指令。

每当您编写并发程序时，请使用该`java.util.concurrency`包。它比你用or编写的任何东西都更健壮*、*更高效。`synchronized``volatile`

只有当两个线程都使用合适的内存屏障时，一个线程的操作才能保证对另一个线程可见。例如，写入和读取一个`volatile`变量，或者输入一个`synchronized`块。跳过内存障碍会更快，但是由于您的程序被破坏，您的效率为零。

# javascript - 为什么 Mozilla 有用 IDL 编写的 JavaScript 文档

> ID：13773107
> 
> 赞同：6
> 
> 时间：2012-12-08T00:22:34.940
> 
> 标签：javascript, api, idl, webidl

阅读有关[fileReader](https://developer.mozilla.org/en-US/docs/DOM/FileReader)的文档，并发现他们使用[void](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/void)运算符编写方法，如下所示：

```
void readAsArrayBuffer (
        in Blob blob
); 
```

只是想了解他们为什么要这样写？这种语法是否有任何实际用途？

后来发现根本不是js，而是IDL，即接口描述语言。

仅供参考：在问这个问题之前，我使用谷歌搜索并阅读了 JS 中实际的 void 运算符。所以请没有必要让我回来。问题有点模糊，但它必须处理，为什么 Mozilla 有这样写的关于 JavaScript 的文档？在 IDL 中与实际 JavaScript 几乎没有什么关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:45:59.923

Mozilla 以两种方式使用 IDL

*   [Web IDL](http://www.w3.org/TR/WebIDL/)：用于 W3C 规范等描述 Javascript API。这些是规范性规范。

*   [XPCOM](https://developer.mozilla.org/en-US/docs/XPCOM)内部 IDL 方言：原生 Javascript API 是用 C++ 实现的。在 Gecko（Firefox 的引擎）的情况下，特别是在称为 XPCOM 的特定领域框架中

正如链接页面所述，Gecko 在内部以语言中立的 IDL 方言描述接口，因为这些接口必须在本机运行时 (C++) 和 Javascript 引擎 (Javascript) 中实现。

在这种情况下，IDL 描述要么是来自原始 Web IDL 规范的复制粘贴，要么来自 Gecko 的内部实现。

# java - 使用脚本引擎的多次调用处理的全局环境

> ID：13773108
> 
> 赞同：1
> 
> 时间：2012-12-08T00:22:41.517
> 
> 标签：java, global, state, simultaneous, scriptengine

我们很好奇脚本引擎如何处理全局变量。我们正在寻找一个在调用时不保留全局变量状态的脚本引擎。有这样的引擎吗？我们正在寻找一种可以在 Java 脚本引擎 API 下使用的脚本语言。

当多次调用脚本引擎时，对 eval() 或 evaluate() 方法的顶级调用会保留全局变量的状态，这意味着对 eval() 的后续调用将使用上次调用留下的全局变量. 是否有一个脚本引擎不保留状态，或者提供重置状态的能力，以便每次调用脚本引擎时全局变量都处于初始状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T19:47:33.697

随后对 eval() 的调用不会重置 scriptEngine 的状态：

```
 myScriptEngine.eval("var myGlobalVar = 5");
    myScriptEngine.eval("myGlobalVar++"); //will set myGlobalVar to 6; 
```

另一方面，来自一个 ScriptEngineManager 的多个 scriptEngine 是完全独立的（至少 JAV8 是这样）。

# windows-phone-8 - Windows Phone 用户登录

> ID：13773114
> 
> 赞同：0
> 
> 时间：2012-12-08T00:23:14.300
> 
> 标签：windows-phone-8

我想开始在 Windows Phone 上编写游戏，想知道最好的方法是让用户在 Windows Phone 上的会话中登录。可以用 XBOX LIVE 做到这一点吗？还是我必须手工制作自己的登录系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:45:55.537

您可以查看 Windows Azure 移动服务 (http://www.windowsazure.com/en-us/develop/mobile/) 以帮助您了解身份验证机制，使您能够获得开箱即用的支持适用于 Microsoft 帐户、facebook、google 和 twitter（目前是免费的，您还可以将其用于更多用途）。

如果您不想使用任何外部支持，那么您将必须拥有自己的手工登录系统和存放它的地方（您也可以使用移动服务）。

如果您需要任何示例代码，请给我留言，我会尝试收集一些东西。:)

# mysql - 带有简单连接的 MySQL 语法

> ID：13773117
> 
> 赞同：1
> 
> 时间：2012-12-08T00:23:52.440
> 
> 标签：mysql, pdo

我无法弄清楚为什么这个查询不起作用。名称已被清理，因为这是专有代码。

```
QRY: 
SELECT l.albert, o.ben, m.caleb, m.dennis, m.edgar
    FROM octopus o, lorax l, monkey m
WHERE o.ben = l.ben
    AND l.franklin= m.franklin
    AND o.ben= :ben
ORDER BY l.albert DESC
    LIMIT 1 
```

这是我得到的错误：

```
MySQL Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'QRY: SELECT l.albert, o.ben, m.caleb, m.dennis, m' at line 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T00:30:58.427

好像你有

```
"QRY: " 
```

在查询的开头。它应该从

```
"SELECT ... 
```

# ruby - Web 服务器的 Apache HTTP 与 Ruby 机架速度比较

> ID：13773119
> 
> 赞同：2
> 
> 时间：2012-12-08T00:24:03.363
> 
> 标签：ruby, apache, http, rack

我正计划托管一些静态网页，并且对使用 Ruby Rack 来增加趣味性很感兴趣。我想知道是否有人知道速度比较以及这两个选项每秒可以处理多少个请求。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:30:45.317

除了测试之外，Ruby Rack 很少单独使用，并且几乎总是在它前面有某种服务器前端。这些需要某种层来管理 Rack 进程。

[乘客](http://www.modrails.com/)是一种流行的选择，可与 Apache`httpd`和[nginx](http://nginx.org/)一起使用。[对于托管涉及HAProxy](http://haproxy.1wt.eu/)或硬件设备的基于机架的应用程序，还有其他更奇特的安排。

要确定您的堆栈可以处理多少“每秒请求”，您需要进行基准测试。每个应用程序都有完全不同的性能配置文件，并且可以对堆栈的各个部分进行额外的调整，从硬件、操作系统、数据库、Ruby 解释器的选择、Web 前端和负载平衡器一直到。

不要忘记，大多数性能极高的应用程序“欺骗”极大地使用缓存来产生速度印象，同时使用后台作业队列延迟尽可能多的耗时操作。

请记住，它通常更多的是关于速度的*印象*而不是实际速度。如果您可以始终如一地实现约 20 毫秒的页面加载时间，即使您的平均时间相同，这也比具有 5000 毫秒间歇性峰值的约 5 毫秒要好得多。人们注意到的不一致比实际表现更重要。

# math - 如何将 3D 坐标转换为 2d 坐标？

> ID：13773121
> 
> 赞同：1
> 
> 时间：2012-12-08T00:24:15.700
> 
> 标签：math

> **可能重复：**
> [将坐标从法线向量给定的平面映射到 XY 平面](https://stackoverflow.com/questions/8780646/mapping-coordinates-from-plane-given-by-normal-vector-to-xy-plane)

如何获得位于 3D 空间中的点的屏幕位置？

相机的位置是 0,0,0 并且没有旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:32:32.793

取决于您的投影类型。

标准透视投影是：

```
x' = (centre of viewport) - (half width of viewport) * x/z
y' = (centre of viewport) - (half height of viewport) * y/z 
```

这将为您在两个方向上提供 90 度的视野，并假设您从 (0, 0, 0) 沿 z 方向看。

在投影之前缩放几何图形以处理视口通常不是正方形的事实是正常的。您还会注意到，当 z 为 0 时结果是不确定的，并且当 z 趋向于 0 时会出现问题。当其中一个应该在相机后面时，它还会将正 z 和负 z 映射到屏幕。通常，您会修剪 z 小于某个阈值的几何体（或丢弃点）。

就点而言，还请注意（假设您保持正 z）如果 abs(x) > z 或 abs(y) > z 则该点不在屏幕上。如果您继续使用完整的几何图形，则可以使用该观察将其剪辑在屏幕边缘，从而节省每像素测试。

# ios - 如何为以下场景安排本地通知？

> ID：13773123
> 
> 赞同：27
> 
> 时间：2012-12-08T00:24:27.997
> 
> 标签：ios, uialertview, uilocalnotification

专家，我有一个场景，我需要每天通知用户三次（早上、下午、晚上）。根据每个日期的数据库值，这些通知的时间每天都会有所不同。

这三个通知是可配置的。这意味着用户可能只是选择设置下午和晚上，同时在设置下关闭早上通知。

据我了解，我可以使用本地通知来实现这一点。

我可以执行以下操作： - 在应用程序退出之前，在 didFinishLaunchingWithOptions 中，我可以检查下一个通知到期时间是什么，是否设置（开/关）。如果已设置，我会安排它。如果不是，我继续下一个通知类型并做同样的事情。如果所有通知都关闭，显然不会安排任何通知。

现在，当通知出现时，我会看到带有“关闭”和“查看”两个按钮的警报。如果用户选择“查看”，我的应用程序将恢复活动状态，并且在用户退出之前安排下一个通知。

到目前为止，一切都很好。

现在如果用户选择“关闭”我该怎么办？它不会启动我的应用程序，因此不会安排下一个通知？

我如何实现这一目标？有没有更好的方法来做到这一点？

帮助！帮助！帮助！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-08T04:03:10.223

您可以一次简单地安排所有（或多个）通知。您无需等待用户**查看**您的应用来安排下一个通知。

从[UILocalNotification 的文档中](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UILocalNotification)，

> 一个应用程序只能有有限数量的预定通知；系统保留最快触发的 64 个通知（自动重新安排的通知计为单个通知）并丢弃其余通知

因此，如果您每天有 3 条通知，则可以一次预先安排 3 周的通知。我想如果用户一个月不打开您的应用程序，您仍然会遇到问题，但是您需要担心这种情况吗？

无论如何，我只是想确保您不需要一次安排这些通知。

例子：

```
UILocalNotification* n1 = [[UILocalNotification alloc] init];
n1.fireDate = [NSDate dateWithTimeIntervalSinceNow: 60];
n1.alertBody = @"one";
UILocalNotification* n2 = [[UILocalNotification alloc] init];
n2.fireDate = [NSDate dateWithTimeIntervalSinceNow: 90];
n2.alertBody = @"two";
[[UIApplication sharedApplication] scheduleLocalNotification: n1];
[[UIApplication sharedApplication] scheduleLocalNotification: n2]; 
```

因此，即使用户在第一个通知出现时选择**关闭**，第二个通知仍然会被传递。

顺便说一句，该`didFinishLaunchingWithOptions`方法会在您的应用程序启动后立即调用，而不是在它关闭之前。也就是说，您可以随时安排新通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-28T19:31:23.540

您还可以使用该`repeatInterval`属性，以便他们无限期地重新安排自己。但是，您仅限于 中的单位`NSCalendarUnit`。有关更多信息，请参阅[文档](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UILocalNotification)

# where - Where 子句不起作用

> ID：13773129
> 
> 赞同：0
> 
> 时间：2012-12-08T00:24:56.343
> 
> 标签：where, google-sheets

`=QUERY('Sheet8'!A:Z;"select A, B where 'Year' = 2016")` 我有这个查询，我想让年份部分动态化，所以我尝试了这个 `=QUERY('Sheet8'!A:Z;"select A, B where 'Year' = year(now())+4")` 但是没有奏效，所以甚至尝试将值保存在单元格中并在 are 子句中引用它们，`where 'Year' = Sheet!B1`但这也不起作用。如何在进行比较之前创建一个看起来执行操作的 where 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:24:58.650

`year()`QUERY select 子句中的函数是一个标[量函数](https://developers.google.com/chart/interactive/docs/querylanguage#scalar_functions)，它必须引用其中一个列。因此，如果日期列在 A 列中，您将使用`where year(A) =`etc.

为了使其动态化，最好（IMO）连接从电子表格函数生成的值（而不是 select 子句，它似乎不会根据电子表格时区生成）。所以像：

`=QUERY('Sheet8'!A:Z;"select A, B where year(A) = "&(YEAR(NOW())+4))`

# android - 每个建议最多 2 列？

> ID：13773131
> 
> 赞同：1
> 
> 时间：2012-12-08T00:25:03.240
> 
> 标签：android, android-searchmanager

每个搜索建议最多只能显示两列吗？Android SDK 中的 SearchableDictionary 示例显示单词 (SUGGEST_COLUMN_TEXT_1) 及其定义 (SUGGEST_COLUMN_TEXT_2) 以响应用户在搜索栏中键入的内容。是否可以在下面添加第三行？其他 SUGGEST_COLUMN_* 似乎都不合适。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T18:21:28.593

我正在回答这个问题，因为我从 grokkingandroid.com[得到确认，最多允许 2 列用于建议。](http://www.grokkingandroid.com/android-tutorial-adding-suggestions-to-search/#comment-5692)链接是：

# python - Windows 上的 Pyusb - 没有可用的后端

> ID：13773132
> 
> 赞同：41
> 
> 时间：2012-12-08T00:25:04.160
> 
> 标签：python, windows-7, libusb, pyusb

我正在尝试通过 USB 将我的 Python 应用程序接口与 NFC 设备连接。最好的选择似乎是[PyUSB](https://github.com/pyusb/pyusb)，但我无法让它连接到 libusb 后端。我不断得到

> ValueError：没有可用的后端

我查看了堆栈跟踪，发现`usb/backend/libusb10.py`（它是 pyusb 的一部分）正在尝试加载`libusb-1.0.dll`以用作后端，但找不到它。不是它不在我的路径上，它根本不在我的电脑上！

我已经安装了[libusb-win32](https://sourceforge.net/projects/libusb-win32/)，但生成的目录似乎只包含 libusb0.dll。libusb-1.0.dll 在哪里？？？

我很想知道从哪里获取该 dll，甚至想知道让 PyUSB 在 Windows 7 上运行的不同建议。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-10T03:46:31.563

下载并安装[libusb-win32-devel-filter-1.2.6.0.exe](https://sourceforge.net/projects/libusb-win32/files/libusb-win32-releases/1.2.6.0/)。它应该工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-26T22:04:16.253

我最近尝试与我正在开发的 USB 设备交谈时遇到了类似的问题。我在网上搜寻 libusb-1.0.dll 并没有运气。我找到了源代码，但没有构建并准备安装。我最终安装了 libusb-win32 二进制文件，即 libusb0.dll。

PyUSB 将搜索 libusb-1.0、libusb0 和 openUSB 后端。

libusb0.dll 已经在我的系统上，但仍然没有正确设置，PyUSB 没有工作。

我按照[此处](http://sourceforge.net/apps/trac/libusb-win32/wiki)的说明使用提供的用于安装过滤器驱动程序的 GUI 工具和 INF 向导下载并安装驱动程序。请注意，在我运行 INF 向导之前它不起作用。

我对编程很陌生，我发现缺乏清晰的文档/示例来将这一切串在一起相当令人沮丧。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-30T20:45:49.627

我正在使用 Python 2.6.5，`libusb-win32-device.bin-0.1.12.1`并且`pyusb-1.0.0-a0`在 Windows XP 系统上并不断接收`ValueError: No backend available`.

由于网络上没有针对此问题的任何真正帮助，我花了很多时间寻找`ctypes util.py`使用该`Path`变量来查找库文件的方法。我的`path`没有包括`windows\system32`也`PYUSB`没有找到图书馆。我更新了`path`变量，现在 USB 正在工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-03T06:36:28.470

有一个更简单的解决方案。

[从下载链接下载](https://sourceforge.net/projects/libusb/files/libusb-1.0/libusb-1.0.20/libusb-1.0.20.7z/download)libusb-1.0.20 并解压到 C:\PATH

然后试试这一行：

> 后端 = usb.backend.libusb1.get_backend(find_library=lambda x: "C:\PATH\libusb-1.0.20\MS32\dll\libusb-1.0.dll")
> 
> dev = usb.core.find（后端=后端，find_all=True）

根据您的系统，尝试使用 MS64 或 MS32 版本的 .dll

2020 年 1 月 17 日更新，请求分享更多代码后：

```
import usb.core
import usb.util

from infi.devicemanager import DeviceManager
dm = DeviceManager()
devices = dm.all_devices
for i in devices:
    try:
        print ('{} : address: {}, bus: {}, location: {}'.format(i.friendly_name, i.address, i.bus_number, i.location))
    except Exception:
        pass

import usb.backend.libusb1

backend = usb.backend.libusb1.get_backend(find_library=lambda x: "C:\\libusb-1.0.20\\MS32\\dll\\libusb-1.0.dll")
dev = usb.core.find(backend=backend, find_all=True)

def EnumerateUSB():    #I use a simple function that scans all known USB connections and saves their info in the file
    with open("EnumerateUSBLog.txt", "w") as wf:
        counter = 0
        for d in dev:
            try:
                wf.write("USB Device number " + str(counter) + ":" + "\n")
                wf.write(d._get_full_descriptor_str() + "\n")
                wf.write(d.get_active_configuration() + "\n")
                wf.write("\n")
                counter += 1
            except NotImplementedError:
                wf.write("Device number " + str(counter) + "is busy." + "\n")
                wf.write("\n")
                counter += 1
            except usb.core.USBError:
                wf.write("Device number " + str(counter) + " is either disconnected or not found." + "\n")
                wf.write("\n")
                counter += 1
        wf.close() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-15T12:23:37.857

我在 Windows 10 上遇到了同样的问题，Python 2.7.16 和 Python 3.7.2。我安装了 libusb（通过`python -m pip install libusb`），但错误消息仍然存在。另外，上面关于安装 libusb-win32 的建议对我不起作用；两个链接（原始帖子和@beebek 的答案）都不存在。

**然而**，起作用的是@ user1495323的评论：我`libusb-1.0.dll`从 复制`C:\Users\username\AppData\Roaming\Python\Python27\site-packages\libusb\_platform\_windows\x64\` 到`C:\Windows\System32\`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-06-26T02:32:44.323

1.  下载最新的 libusb [下载 libusb](http://sourceforge.net/projects/libusb/files/libusb-1.0/libusb-1.0.20/libusb-1.0.20.7z/download)

将*MS32\dll\libusb-1.0.dll 复制*到*C:\Windows\SysWOW64*

将*MS64\dll\libusb-1.0.dll 复制*到*C:\Windows\System32*

3.

```
pip install libusb 
```

将*MS32\dll\libusb-1.0.dll 复制*到*C:\Python\Python37-32\Lib\site-packages\libusb_platform_windows\x86*

将*MS64\dll\libusb-1.0.dll 复制*到*C:\Python\Python37-32\Lib\site-packages\libusb_platform_windows\x64*

这种方法对我有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-16T12:49:59.503

“libusb API 有两个版本：当前的`libusb-1.0`API 和它的旧版本`libusb-0.1`。” ( [http://www.libusb.org/](http://www.libusb.org/) ) "`libusb-win32`是 USB 库 <code>libusb-0.1 到 Microsoft Windows 操作系统的端口"。[从同一页面](http://www.libusb.org/)（`1.0.9`是当前版本）“下载最新版本的压缩包”以获得`libusb-1.0`等效的，你会找到一个文件夹`Win32`，在那里你会找到你`libusb-1.0.dll`的玩！你甚至可以构建它：[http](http://www.libusb.org/wiki/windows_backend) ://www.libusb.org/wiki/windows_backend 。

**编辑** 您必须构建它（从/ [http://sourceforge.net/projects/libusb/files/libusb-1.0/](http://sourceforge.net/projects/libusb/files/libusb-1.0/)下载），因为 tarball 来自 2012，而最新的来源来自 2014-06-15。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-21T07:56:22.037

2021 并且问题仍然出现在 Windows (Windows 10) 上。我通过安装`pyusb`并将`libusb` **libusb 路径添加到 Windows 环境来**解决它：

1.  `pip install pyusb`
2.  `pip install libusb`
3.  `libusb-1.0.dll`将自动添加到：

`\venv\Lib\site-packages\libusb\_platform\_windows\x64`
和
`\venv\Lib\site-packages\libusb\_platform\_windows\x32`

4.  现在只需将这些路径（完整路径）添加到 Windows Path**并重新启动 CMD / PyCharm**。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-06T18:55:02.387

要使用 PYUSB 通过 USB 连接到您的 NFC 设备，您需要为该设备安装后端。我认为除了 libusb 设备之外的任何设备都没有任何后端。

建立一个后端。您需要知道设备的驱动程序（.sys 文件），因此您可以编写一个包装 DLL 来公开设备中的功能。您的 DLL 必须有一种基于 PID 和 VID 查找设备的方法、另一种打开设备的方法和另一种发送数据的方法等等......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-15T09:15:58.677

以防万一：

我没有在 Windows 上尝试过，但我必须设置 DYLD_LIBRARY_PATH 路径来规避 Macintosh 上的这个错误。

> 导出 DYLD_LIBRARY_PATH=/opt/local/lib

关于是否设置这个变量的讨论在[这里](https://superuser.com/questions/282450/where-do-i-set-dyld-library-path-on-mac-os-x-and-is-it-a-good-idea)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-02T10:12:18.107

libusb后端由/usb路径中的python脚本初始化，通过从Windows PATH加载二进制DLL，如果zadig的虚拟DLL丢失或安装，它会抱怨这个。因为zadig安装的DLL不导出任何外部世界的符号（我猜是虚拟的）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-14T12:01:38.320

**当我在Windows x64**上安装**pyusb**和**libusb**时，在 2022 年 backendnotavailable 出现了一些问题。

 *** * *

我找到了解决它的方法阅读 - > [Github解决解释](https://github.com/pyusb/pyusb/blob/master/docs/faq.rst)

要解决此问题，***首先***您需要在系统的 PATH 变量中复制 libusb-1.0.dll *(..\envs<your_env_name>\Lib\site-packages\libusb_platform_windows\x64)的路径。*

***其次***重启IDE。

***第三次***尝试 get_backend 使用 usb.backend：

```
import usb.core
from usb.backend import libusb1

# it should find libusb-1.0.dll at our path variable
back = libusb1.get_backend()
print(type(back))  # return: <class 'usb.backend.libusb1._LibUSB'>

dev = usb.core.find(backend=back)
print(type(dev))  # return: <class 'usb.core.Device'>

# flag 'find_all=True' would return generator
# reprecent connected usb devices

dev_list = usb.core.find(find_all=True, backend=back)
print(type(dev_list)) # return: <class 'generator'> 
```

如果返回是 a `NoneType`，则表示`get_backend()`没有找到 libusb-1.0.dll 或找到错误的 usblib（这是我的问题 - 我在 x64 机器上将 atPATH 变量路径复制到 _x86 文件）。

* * *

另一种解决方法->将 libusb-1.0.dll 从*(.._x64\libusb-1.0.dll) 复制*到*(C:\Windows\System32)*。**

# visual-studio - 构建 MVC TFS 解决方案的最低 CI 从站要求

> ID：13773137
> 
> 赞同：0
> 
> 时间：2012-12-08T00:25:54.420
> 
> 标签：visual-studio, build, tfs, msbuild, continuous-integration

在干净的 Windows 2012 Server VM 上拉取和构建 TFS 托管的 Visual Studio 2012 MVC 解决方案的最低要求是什么？

我正在设置一个持续集成从属设备，并且我想安装尽可能少的工具，以便从 Team Foundation Server 源代码控制和构建中获取项目集。

我的工作假设是我需要[Team Explorer](http://www.microsoft.com/en-us/download/details.aspx?id=30656)从 TFS 服务器获取文件，并需要[Visual Studio Express 2012 (Web)](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web)来实际构建解决方案。

CI 从站不会使用 Team Foundation Build，而是会成为 Jenkins 网格的一部分。我知道他们有一个 TFS 插件，但我不知道它是否可以用来代替 Team Explorer。

随后将运行单元测试，但尚未确定要使用的框架。

该解决方案具有现有的 NuGet 包依赖项，并且未签入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:13:43.250

*   [团队探索者无处不在](http://www.microsoft.com/en-us/download/details.aspx?id=30661)
*   [适用于 Windows 7 和 .NET Framework 4 的 Microsoft Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

# python - 艰难地学习 Python：练习 43 函数创建

> ID：13773138
> 
> 赞同：3
> 
> 时间：2012-12-08T00:25:56.533
> 
> 标签：python, getattr

```
while True:
    print "\n--------"
    room = getattr(self, next)
    next = room() 
```

我的问题源于上面的代码块，可在[Learn Python The Hard Way](http://learnpythonthehardway.org/) -[练习 43](http://learnpythonthehardway.org/book/ex43.html)中找到。我知道第三行将`getattr()`函数结果（在本例中`self.next`为 ）存储到`room`变量中（除非我错了......？）

现在让我感到困惑的是第四行，函数`room()`存储在变量`next`中。从根本上说，我不理解这`room()`部分，因为这不是代码块中定义的函数。Python 是否允许用户根据前面的变量定义函数？（例如：`room()`第一次编写会`room()`根据存储在变量中的内容创建一个调用的函数`room`）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T00:29:03.540

```
room = getattr(self, next) 
```

返回一个可调用的*函数*。

```
next = room() 
```

函数是 python 中的第一类对象，因此它们可以这样传递。便利！

考虑以下：

```
>>> class foo:
      def bar(self):
        print 'baz!'
      def __init__(self):
        # Following lines do the same thing!
        getattr(self, 'bar')()
        self.bar() 
>>> foo()
baz!
baz!
<__main__.foo instance at 0x02ADD8C8> 
```

# ruby-on-rails - RMagick gem 无法在 Debian Stable 上安装

> ID：13773140
> 
> 赞同：9
> 
> 时间：2012-12-08T00:26:15.060
> 
> 标签：ruby-on-rails, ruby, imagemagick, rmagick

编辑：[已修复] 问题是我已经安装了它，但不知道，并尝试从源代码安装。这创建了两个版本，gem 不知道使用哪个版本。我通过转到下载的源并运行来修复它

```
sudo make uninstall 
```

然后我再次运行 gem install rmagick 并且成功了！

[原来的问题]

我正在尝试安装 rmagick gem，就像在[这个 railscast](http://railscasts.com/episodes/253-carrierwave-file-uploads)中一样。这是我放入 gemfile 的片段：

```
 gem 'rmagick'
 gem 'carrierwave' 
```

当我运行 bundle install 时，我得到以下输出：

```
Installing rmagick (2.13.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/techusb/.rbenv/versions/1.9.3-p125/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for cc... yes
checking for Magick-config... yes

Warning: Found more than one ImageMagick installation. This could cause problems at runtime.
         /usr/local/bin/Magick-config reports version 6.8.0 Q16 is installed in /usr/local
         /usr/bin/Magick-config reports version 1.3.12 is installed in /usr
Using 6.8.0 Q16 from /usr/local.

checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/techusb/.rbenv/versions/1.9.3-p125/bin/ruby
/home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:931:in `block in have_header'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/1.9.1/mkmf.rb:930:in `have_header'
    from extconf.rb:193:in `<main>'

Gem files will remain installed in /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1 for inspection.
Results logged to /home/techusb/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
An error occurred while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

关于这条线：

```
The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first. 
```

我想我已经用尽了有关如何通过 google/stackoverflow 修复此错误的所有信息。我已经尝试安装开发包等。不知道从这里去哪里。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-30T08:32:49.253

=> [https://stackoverflow.com/a/10647962/1420038](https://stackoverflow.com/a/10647962/1420038)；

“新的正确方法是安装libmagickwand-dev：

sudo apt-get install libmagickwand-dev 然后你应该可以安装 rmagick 没问题。”

适用于 debian 6.0.6

# ios - UIBarButtonItem 在视图更改之前不会被禁用

> ID：13773143
> 
> 赞同：3
> 
> 时间：2012-12-08T00:26:53.333
> 
> 标签：ios, uibarbuttonitem, uitoolbar

我有一个 UINavigationController 并在我的一个视图控制器中使用工具栏。我有几个 UIBarButtonItems。在不同的点上，我禁用工具栏中的某些按钮，使用类似`_btnEdit.enabled = NO`.

这一切都很好，除了有一次没有用户交互时会发生这种情况。在这种情况下，按钮似乎已启用（未灰显），但不接受触摸。如果我用某些东西（底部的操作表）覆盖栏或更改设备的方向，它会正确显示。

我试过了`self.navigationController.toolbar setNeedsDisplay]`，`[self.navigationController.toolbar drawRect:self.navigationController.toolbar.bounds]`但都没有任何效果。

关于如何“刷新”这个观点的任何想法？我知道 UIBarButtonItems 不是从 UIView 继承的，我觉得这可能导致了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:27:42.963

这是预期的行为。setNeedsDisplay 是一个很好的反射尝试，但您不拥有导航栏和`UIBarButtonItem doesn't inherit from UIView`，因此我们需要稍微不同地考虑它们。
在这里你可以如何实现你的目标：

```
UIBarButtonItem *bbi = self.navigationItem.rightBarButtonItem;
bbi.enabled = NO;
[self.navigationItem setRightBarButtonItem:bbi animated:YES]; 
```

注意： 我刚刚对此进行了快速测试并且它正在工作`self`。`UIViewController`

# nsautoreleasepool - @autoreleasepool 在 iOS 6 中的意义

> ID：13773145
> 
> 赞同：0
> 
> 时间：2012-12-08T00:27:10.790
> 
> 标签：nsautoreleasepool

旧版本的 XCode，如果您删除 main.m 中的自动释放池代码，应用程序会崩溃。但是现在即使我在 main.m 中没有任何声明，例如 @autoreleasepool，那么该应用程序也可以正常工作。发生了什么变化？我尝试了 ARC 和没有 ARC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:29:49.983

Objective-C 运行时为你安装了一个“最后的自动释放池”。最好不要依赖它。

# jquery - 淡出到 50% 不起作用

> ID：13773146
> 
> 赞同：1
> 
> 时间：2012-12-08T00:27:22.463
> 
> 标签：jquery

我需要你的帮助。我查看了所有教程，但无法弄清楚我做错了什么。我希望蓝色方块淡出到 50% 的不透明度。我已经尝试过使用 fadeTo ，但无论出于何种原因，它都不起作用。我需要做什么。我的错误在哪里？太感谢了！

```
<script type="text/javascript" src="jquery-1.8.0.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){

   $("#divA").mouseover(function(){$("#divB").fadeTo('slow', 0.5, function());
   $("#divA").mouseout(function(){$("#divB").fadeTo('slow', 1, function());
  });
</script>
<style type="text/css">
  #divA { background:red; width:25px; height:25px; margin:50px }
  #divB { background:blue; width:200px; height:200px }
</style>
</head>
<body>
Hover over the red square to fadeout the blue one to 50% opacity.<br>
The blue square fades back in when your cursor leaves the red one.
<div id="divA"></div>
<div id="divB"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:31:44.187

javascript 中有一些语法错误。它缺少右括号和右括号。也不需要空的回调，它缺少左大括号和右大括号。

尝试：

```
 $(document).ready(function(){

      $("#divA").mouseover(function(){
          $("#divB").fadeTo('slow', 0.5);
      });

      $("#divA").mouseout(function(){
          $("#divB").fadeTo('slow', 1);
      });
  }); 
```

示例：http: [//jsfiddle.net/XnBQ6/](http://jsfiddle.net/XnBQ6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:33:59.867

看起来你没有关闭你的功能。

```
$("#divA").mouseover(function(){
  $("#divB").fadeTo('slow', 0.5); 
```

应该：

```
$("#divA").mouseover(function(){
  $("#divB").fadeTo('slow', 0.5);
}); 
```

# android - onStart 和 onResume 方法如何在android中工作

> ID：13773148
> 
> 赞同：0
> 
> 时间：2012-12-08T00:27:39.450
> 
> 标签：android, android-lifecycle

所以我为安卓创建了一个短信用户界面。它处理消息线程的方式是，当我点击发送时，它会发送消息，创建一个新的消息线程，然后将此消息添加到我的对话视图的相应实例中。

ConverseView 是一个只有 onCreate(Bundle) 方法的活动。此方法创建一个适配器并使用 ArrayList 中的值填充该适配器。当用户点击发送时，数组列表会添加一条消息。然而，这些并没有出现在视图中。

我相信问题是，正在创建活动，然后我添加了一条消息，并且 ListView 没有更新。我怎样才能解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:31:31.893

使用`ArrayAdapter adapter;`由`ArrayList`. 要在修改 ArrayList 后更新列表中的数据，只需调用`adapter.notifyDataSetChanged()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:32:13.657

[在此处](http://developer.android.com/reference/android/app/Activity.html)查看有关生命周期的更多信息。

本质上，`onStart(Bundle state)`是在 Activity 启动后调用。这意味着活动是活跃的并且响应 a) 应用程序和 b) Android 本身。

`onResume(Bundle state)`表示活动即将显示到屏幕上。这是您应该完成您必须做的任何 UI 工作的地方。

至于您的数据未显示，您需要调用`Adapter.notifyDataSetChanged()`以推动您的适配器重绘。如果没有此调用，您的适配器将不会（以图形方式）更新。

# python - 带范围的双重列表理解

> ID：13773149
> 
> 赞同：3
> 
> 时间：2012-12-08T00:28:07.840
> 
> 标签：python, list, list-comprehension

我在 Python 中有一个列表，我正在尝试使用列表理解从中打印前五个元素。

我知道这必须使用双重列表推导来完成。我目前有以下内容：

```
print [[x[i] for x in mylist] for i in range(0,5)] 
```

这会引发以下错误：`IndexError: tuple index out of range`.

当我分别打印每一个时，效果很好。我有`print mylist[0]`，`print mylist[1]`等等...

这里有什么问题？我有一种感觉，我的整个双重理解都不正确。现在这就是我的想法：

```
[x for x in range(0,5)] 
```

这将为范围（0,5）中的每个 x 创建一个 x 列表。由于这是我的索引，因此我在此之前嵌套了另一个列表理解语句，以在我的特定列表上执行此操作。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:31:34.687

`mylist[:5]`给出 的前 5 个元素`mylist`。（如果`mylist`其中的元素少于 5 个，`mylist[:5]`则将返回一个长度列表`len(mylist)`。）在这里使用列表推导式将是矫枉过正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T00:38:53.547

提供`myList`至少包含 5 个元素，并且您真的想使用列表推导，试试这个：

```
[print (mylist[i]) for i in range (0, 5)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T00:36:43.000

unutbu 是最好的解决方案。使用列表推导执行它，你会想要

```
[mylist[i] for i in range(5)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T00:40:04.027

至于为什么会出现错误，如果`myList`是元组列表，请这样看：

```
myList = [(0, 1), (1, 2), (2, 3)]

result = []
for i in range(5):
    sub_result = []
    # Here x will be (0, 1), etc.
    for x in myList:
        # Here you are referencing the ith element of your tuple
        # If your tuple doesn't contain that many elements, you get the error
        sub_result.append(x[i]) 
```

因此它正在访问您的元组而不是您的列表。其他解决方案都显示了如何纠正这个问题，所以一定要投票给他们 - 希望这将有助于找出导致错误的原因:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T00:33:23.753

您正在尝试访问超出范围的索引。这意味着您的`x`元组的长度 < 5。

它发生在像这样的数据上`[[1,2,3],[4,5,6]..]`

x 这里是`[1,2,3]`，然后`[4,5,6]`等

当你尝试时`x[5]`- 你会得到异常

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T00:37:41.920

打印 [mylist[j] for j in [ i for i in range(5)]]

尽管@unutbu 的方法更具可读性。

# css - `compact` 的库未加载

> ID：13773150
> 
> 赞同：0
> 
> 时间：2012-12-08T00:28:27.737
> 
> 标签：css, sass, bourbon

当我尝试`linear-gradient`与波旁威士忌一起使用时：

```
@include linear-gradient(#8080a0, #606090); 
```

我明白了：

```
background-color: #8080A0;
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(100%, compact(#8080A0, #606090, false, false, false, false, false, false, false, false)));
background-image: -webkit-linear-gradient(top, compact(#8080A0, #606090, false, false, false, false, false, false, false, false));
background-image: -moz-linear-gradient(top, compact(#8080A0, #606090, false, false, false, false, false, false, false, false));
background-image: -ms-linear-gradient(top, compact(#8080A0, #606090, false, false, false, false, false, false, false, false));
background-image: -o-linear-gradient(top, compact(#8080A0, #606090, false, false, false, false, false, false, false, false));
background-image: linear-gradient(top, compact(#8080A0, #606090, false, false, false, false, false, false, false, false)); 
```

这似乎表明`compact()`没有被调用。它在一个名为`lib/bourbon/sass_extensions/functions/compact.rb`. 我怎样才能加载它？

**解决了**

问题似乎出在波旁威士忌本身。我使用的是 2.1.3 版，它有问题。这几天作者一直在更新它，他们添加了一个新版本 3.0.1，它正在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:23:21.797

这个[Stackoverflow 答案](https://stackoverflow.com/a/11752227/44816)是否有助于让您的紧凑功能正常工作？

**原始问题的原始答案**（供后代使用）

`compact()`不是有效的 CSS。您生成的 CSS 包含多个引用，Chrome 会忽略它不知道如何解释的规则。

# html - Internet Explorer 中的 textarea 问题

> ID：13773151
> 
> 赞同：1
> 
> 时间：2012-12-08T00:28:33.697
> 
> 标签：html, internet-explorer

下面的代码在每行中仅显示/接受 4 个字符作为输入，正如我提到的 5 个。

我最近升级了我的电脑win7。我确信 textarea 在我的 XP 机器中按预期工作。

```
<html>
<head>
<title>Untitled Page</title>
</head>
<body>
<td><textarea id="txtNarrative" cols="5" rows="4">1234512345123</textarea></td>
</body>
</html> 
```

请让我知道如何使它在每行中接受 5 个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:35:18.627

将 HTML Doctype 放在文档的第一行，在 IE9 上为我解决了这个问题：

```
<!DOCTYPE HTML>
<head>
... 
```

# node.js - 如何在 node.js 中应用帖子重定向并获取模式？

> ID：13773152
> 
> 赞同：2
> 
> 时间：2012-12-08T00:28:36.207
> 
> 标签：node.js, express, pug, post-redirect-get

我正在使用 node.js 中的一个非常简单的应用程序进行测试，我在其中创建并保存了一个应用程序。我使用 newPost 函数显示帖子表单，并在 savePost 方法中收到带有数据的帖子。在后一个中，我进行了验证（使用 iform 模块），我想再次显示与以前相同的页面，但使用用户发送的数据以及发现的错误填充表单。

我有一个类似的代码。如果我发现任何错误，我会在其中呈现相同的翡翠页面。尽管我想应用模式重定向并到达那里，但它可以工作，因为我不想在用户按 F5 时再次发送发布请求。

那么，如何进行发布重定向并从发布方法获取传递我收到的所有参数并添加错误的常用方法是什么？是否有任何模块可以帮助做到这一点？

```
var prepareObject = function(req, res){
    var errors = {};
    if('iform' in req){
        errors = req.iform.errors;
    }
    return {title: 'Nuevo Post', body:req.body, errors: errors};
};

// mapped as /newPost (type GET)
exports.newPost = function(req, res){
    //show form to create post
    res.render('newPost', prepareObject(req, res));
}

// mapped as /savePost (type POST)
exports.savePost = function(req, res){
    if(req.iform.errors) {
        //there are errors: show form again to correct errors
        res.render('newPost', prepareObject(req, res));
    }else{
        //no errors: show posts
        res.redirect('/posts');
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:15:43.023

您可以重定向到 GET "/newPost" 而不是呈现 "newPost" 模板。要使自动完成工作，您可以将数据添加到重定向查询（更快）并呈现它，或者将数据添加到会话（不要忘记在呈现后将其删除），但后一个选项需要会话存储。

# sed - 使用 SED 或 AWK 进行模式提取

> ID：13773153
> 
> 赞同：0
> 
> 时间：2012-12-08T00:28:47.720
> 
> 标签：sed, awk, grep

我如何从中`68`提取`v1+r0.68`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:52:03.977

使用 awk，返回最后一个 '.' 之后的所有内容。

```
echo "v1+r0.68" | awk -F. '{print $NF}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:31:06.633

使用 sed 获取最后一个点之后的数字：

```
echo 'v1+r0.68' | sed 's/.*[.]\([0-9][0-9]*\)$/\1/' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T15:55:09.570

使用 匹配行尾之前的数字字符串`grep`：

```
$ echo 'v1+r0.68' | grep -Eo '[0-9]+$'
68 
```

或匹配 a 之后的任何数字`.`

```
$ echo 'v1+r0.68' | grep -Po '(?<=\.)\d+'
68 
```

`.`在with之后打印所有内容`awk`：

```
echo "v1+r0.68" | awk -F. '{print $NF}'
68 
```

`.`用 with替换之前的所有内容`sed`：

```
echo "v1+r0.68" | sed 's/.*\.//'
68 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T00:48:51.853

grep 擅长提取东西：

```
kent$  echo " v1+r0.68"|grep -oE "[0-9]+$" 
68 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T03:30:51.163

类型`man grep`

你会看到

...

```
 -o, --only-matching

          Show only the part of a matching line that matches PATTERN. 
```

然后输入`echo 'v1+r0.68' | grep -o '68'`

如果你想在任何特别的地方做：

```
echo 'v1+r0.68' | grep -o '68' > anyWhereSpecial.file_ending 
```

# c++ - 无法在构造函数中实例化对象

> ID：13773156
> 
> 赞同：-1
> 
> 时间：2012-12-08T00:29:45.483
> 
> 标签：c++, object, static, instantiation

我有一个像这样的 C++ 头文件：

```
class someClass : public someBaseClass
{
public:
    someClass();
    ~someClass();

private:
    Text playText; //declare text object
}; 
```

它的 C++ 源文件是：

```
someClass::someClass() : playText("Play") //instantiate text object
{
}

someClass::~someClass()
{
} 
```

然后我有另一个类，它有一个静态成员`someClass`：

```
class anotherClass
{
public:
    anotherClass();
    ~anotherClass();
private:
    static someClass className; //declare someClass object
}; 
```

对应的 C++ 源文件：

```
anotherClass::anotherClass()
{
}

anotherClass::~anotherClass()
{
}

someClass anotherClass::className; //must do because its static 
```

我的问题是，当我关闭我的应用程序时，我收到一条错误消息：

```
Unhandled exception at 0x6903a9e0 in Breakout.exe: 0xC0000005: Access violation reading location 0x00000054. 
```

但奇怪的是，当我`: playText("Play")`在 someClass 构造函数中注释掉我的代码部分时，消息消失了。我基本上无法实例化`playText`，否则我会收到错误（仅当我在运行时关闭应用程序时）。

我完全糊涂了，找不到任何关于为什么会发生这种情况的信息，所以有谁知道为什么会发生这种情况以及我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:32:00.013

`class`是保留关键字。您不能在此处将其用作标识符：

```
static someClass class; 
```

您必须为静态成员变量使用另一个名称。我很惊讶这甚至可以编译。

# javascript - jQuery Isotope 按数字排序错误地对项目进行排序

> ID：13773164
> 
> 赞同：1
> 
> 时间：2012-12-08T00:30:30.347
> 
> 标签：javascript, jquery, jquery-isotope

我在我的网站上设置了同位素顺序并排序，但如果我将排序更改为编号，则会对项目进行错误排序。

例如我有这样的项目：

```
<div class="boxm" data-name="aaa" data-number="11944"></div>
<div class="boxm" data-name="bbb" data-number="1494"></div>
<div class="boxm" data-name="ccc" data-number="1574"></div>
<div class="boxm" data-name="ddd" data-number="1892"></div>
<div class="boxm" data-name="eee" data-number="19520"></div>
<div class="boxm" data-name="fff" data-number="2090"></div>
<div class="boxm" data-name="fgf" data-number="9010"></div> 
```

使用这样的同位素代码：

```
$container.isotope({
        itemSelector : '.boxm',
        masonry : {
            columnWidth : 67,
            cornerStampSelector: '.corner-stamp'
        },
        getSortData : {
            name : function($elem){
                return $elem.attr('data-name');
            },
            number : function($elem){
                return $elem.attr('data-number');
            }
        }
    });
$sortLinks.click(function(){
        var $this = $(this);
        if($this.hasClass('selected')){
            return false;
        }
        var $isSet = $this.parents('.option-set');
        $isSet.find('.selected').removeClass('selected');
        $this.addClass('selected');

        var options = {},
            key = $isSet.attr('data-option-key'),
            value = $this.attr('data-option-value');
        value = value === 'false' ? false : value;
        options[key] = value;
        if(key === 'layoutMode' && typeof changeLayoutMode === 'function'){
            changeLayoutMode($this, options)
        }else {
            $container.isotope(options);
        }

        return false;

    }); 
```

如果我按数字顺序，它将与我在这里输入的顺序相同，如果我按 DESC 排序，它将从 9010 开始，然后是 2090。如果我是对的，这是因为 Isotope 只看前两个字符，但我需要正确订购。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:36:32.593

可能是因为 data-number 属性的值不是整数值而是字符串。尝试这个：

```
number : function($elem){
            parseInt($elem.attr('data-number'), 10);
        } 
```

存储在字符串中的数字并非总是以逻辑方式排序，即 199999 由于初始数字而小于 2。

（感谢 balexandre 关于添加基础的评论）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:36:32.713

```
getSortData : {
            name : function($elem){
                return $elem.attr('data-name');
            },
            number : function($elem){
                return $elem.attr('data-number');
            }
        } 
```

你在这里返回一个字符串

更改返回`$elem.attr('data-number');`返回`parseInt($elem.attr('data-number'));`

这应该可以解决问题。

# asp.net - ASP Net Gridview HyperLinkField 导航到 URL 表单数据库

> ID：13773168
> 
> 赞同：0
> 
> 时间：2012-12-08T00:30:53.377
> 
> 标签：asp.net, gridview, hyperlink

在我的数据库中，我有一个包含网站和名称列表的表格。我需要用名称填充我的 gridview HyperLinkField，每个名称都链接到数据库中对应的 URL。

在过去，我已经为链接到我自己网站中另一个页面的简单查询完成了此操作，但我找不到任何我现在想要做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:53:32.040

假设数据源中的项目有两个属性`WebsiteName`和`Link`. 现在试试这个：

```
<asp:GridView runat="Server" id="gv1" AutoGenerateColumns="False" GridLines="None">
    <Columns>
       <asp:HyperLinkColumn HeaderText="Links" DataNavigateUrlField="Link" DataTextField="WebsiteName" />
    </Columns>
</asp:GridView> 
```

# xcode - xcode中的样式条形按钮

> ID：13773174
> 
> 赞同：0
> 
> 时间：2012-12-08T00:31:28.883
> 
> 标签：xcode, button, ios6, navbar

我正在尝试在导航栏中对我的按钮进行样式化。但是我弄错了，png是正确的，但是我得到了这个代码。

[http://i50.tinypic.com/o73tr5.png](http://i50.tinypic.com/o73tr5.png)

谁能帮助我。

我正在使用此代码

> ```
> UIImage *barButton = [[UIImage imageNamed:@"back-button"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)]; 
> ```

```
[[UIBarButtonItem appearance] setBackgroundImage:barButton forState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:52:52.380

它不起作用，因为您忘记添加文件扩展名。这是一个如何定义 UIImage 的示例。

```
blackBackgroundButton = [UIImage imageNamed:@"btn_13.png"]; 
```

如果这不起作用，请告诉我。

# ios - 仅自动旋转 MpMoviePlayerControler iOS 6

> ID：13773179
> 
> 赞同：0
> 
> 时间：2012-12-08T00:31:45.623
> 
> 标签：ios, rotation

好吧伙计们和其他人一样的问题。如果我编辑 .plist 以支持所有方向，我就能让它工作，但我只需要在我的 MPMoviePlayerController 上支持旋转（也许在我的 MWPhotoBrwoser 图像上）

我的代码：Viewcontroller.h

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <MediaPlayer/MediaPlayer.h>

@interface MusikViewController : UIViewController{
    AVAudioPlayer *audioPlayer;

}

//tilføjer vores film afspiller
@property (nonatomic, strong) MPMoviePlayerController *moviePlayer;

//Laver de to knapper
//Musik knap
- (IBAction)Play:(UIButton *)sender;
//Film knap
- (IBAction)playButton:(id)sender;

//info knap
- (IBAction)info:(id)sender;

@end 
```

视图控制器.m

```
#import "MusikViewController.h"

@implementation MusikViewController
@synthesize moviePlayer;

- (IBAction)Play:(UIButton *)sender
{
    NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/roteWeste.mp4", [[NSBundle mainBundle] resourcePath]]];

    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
    audioPlayer.numberOfLoops = -1;

    if (audioPlayer == nil){
        NSLog(@"Der skete en fejl, prøv at genstarte app'en, hvis problemet bliver ved, prøv da at send en mail til Mrostgaard@gmail.com");
    }
    else
        [audioPlayer play];
}

- (IBAction)playButton:(id)sender {

    NSString *videoFile = [[NSBundle mainBundle] pathForResource:@"RoteVeste2" ofType:@"m4v"];

    moviePlayer = [[MPMoviePlayerController alloc]initWithContentURL:[NSURL fileURLWithPath:videoFile]];

    [self.view addSubview:moviePlayer.view];

    moviePlayer.fullscreen = YES;

    moviePlayer.allowsAirPlay = YES;
    moviePlayer.controlStyle = MPMovieControlModeVolumeOnly;

    [moviePlayer play];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        if ((UIDeviceOrientationIsLandscape(interfaceOrientation))||(UIDeviceOrientationIsLandscape(interfaceOrientation))) {
            return YES;
        }
        else return NO;
    }
    else
    {
        if ((UIDeviceOrientationIsLandscape(interfaceOrientation))||(UIDeviceOrientationIsLandscape(interfaceOrientation))) {
            return YES;
        }
        else return NO; }
}
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [audioPlayer stop]; // Or pause
}

- (IBAction)info:(id)sender {
}
@end 
```

我似乎无法让它工作。编码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        if ((UIDeviceOrientationIsLandscape(interfaceOrientation))||(UIDeviceOrientationIsLandscape(interfaceOrientation))) {
            return YES;
        }
        else return NO;
    }
    else
    {
        if ((UIDeviceOrientationIsLandscape(interfaceOrientation))||(UIDeviceOrientationIsLandscape(interfaceOrientation))) {
            return YES;
        }
        else return NO; }
} 
```

只是我最近的尝试，但我几乎尝试了所有方法只需要旋转 MPMovieViewController。

我什至试过这个，无法让它工作 [http://fostah.com/ios/2012/09/27/ios6-orientation-handling.html](http://fostah.com/ios/2012/09/27/ios6-orientation-handling.html)

真心希望能得到帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:16:09.233

在阅读您的问题时：“如果我编辑 .plist 以支持所有方向，我就可以使用它，但我只需要在我的 MPMoviePlayerController （也许在我的 MWPhotoBrwoser 图像）支持旋转”，第一句话是你应该允许 .plist 中的所有方向。plist 中允许的方向应该是应用程序中不同视图控制器必须支持的所有方向的联合。

无论您在特定视图控制器中做什么，您将永远无法允许旋转到您的 plist 中不允许的方向。

然后由所有单独的视图控制器来说明特定视图控制器允许的方向。所以分步骤：

1.  允许 plist 中至少一个视图控制器支持的所有方向
2.  对于所有单独的视图控制器，使用`shouldAutorotateToInterfaceOrientation`(iOS5) 和 `shouldAutorotate`/ `supportedInterfaceOrientations`(iOS6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T14:12:34.057

在 AppDelegate.h 中添加以下方法

```
-(NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{

    if(!ISIPAD)){

        if ([[self.window.rootViewController presentedViewController] isKindOfClass:[MPMoviePlayerViewController class]] && ![[self.window.rootViewController presentedViewController] isBeingDismissed])
        {
            return UIInterfaceOrientationMaskAllButUpsideDown;
        }
        else
        {
            return UIInterfaceOrientationMaskPortrait;
        }
    }
    return UIInterfaceOrientationMaskAllButUpsideDown ;

} 
```

# java - 小程序不读取文件

> ID：13773182
> 
> 赞同：1
> 
> 时间：2012-12-08T00:32:01.013
> 
> 标签：java, file, applet

我有一个试图读取文件的小程序。它引发了一个异常，但我将它传递给了正确的路径，所以我不确定我哪里出错了。如果您想知道，我正在使用它来读取数字并使用这些数字来更改多维数组。继承人的代码：

```
public class Save {
    public void loadSave(File loadPath) {
        try {
            Scanner loadScanner = new Scanner(loadPath);

            while(loadScanner.hasNext()){
                for(int y = 0; y < Screen.room.block.length;y++){
                    for(int x = 0; x < Screen.room.block[0].length;x++){
                        Screen.room.block[y][x].groundID = loadScanner.nextInt();
                        System.out.println(loadScanner.nextInt());
                    }   
                }
                for(int y = 0; y < Screen.room.block.length;y++){
                    for(int x = 0; x < Screen.room.block[0].length;x++){
                        Screen.room.block[y][x].airID = loadScanner.nextInt();
                    }   
                }
            }
            loadScanner.close();
        } catch (Exception e) { e.printStackTrace();}
    }
} 
```

我如何访问它：

```
 save.loadSave(new File(frame.getClass().getResource("mission1.tdm").toString())); 
```

好的，我使用了上面编辑过的代码，它仍然说它找不到文件，即使错误吐出了它所在的确切路径。

# python - 在 Python 中，有没有办法在可迭代的每个项目上调用方法？

> ID：13773188
> 
> 赞同：3
> 
> 时间：2012-12-08T00:32:43.760
> 
> 标签：python, methods, iteration, premature-optimization

> **可能重复：**
> [在 python 中是否有没有结果的地图？](https://stackoverflow.com/questions/1080026/is-there-a-map-without-result-in-python)

当我想快速/有效地对可迭代对象包含的每个项目调用就地方法时，我经常在程序中遇到这种情况。（很快意味着 for 循环的开销是不可接受的）。当我想调用`draw()`每个`Sprite`对象时，一个很好的例子就是一个精灵列表。

我知道我可以做这样的事情：

`[sprite.draw() for sprite in sprite_list]`

但我觉得列表理解被滥用了，因为我没有使用返回的列表。函数也是如此`map`。让我过早优化，但我也不想要返回值的开销。

我想知道的是Python中是否有一种方法可以让我做我刚才解释的事情，也许就像我在下面建议的假设函数：

`do_all(sprite_list, draw)`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-08T00:40:22.257

您始终可以编写自己的`do_all`函数：

```
def do_all(iterable, func):
    for i in iter(iterable):
       func(i) 
```

然后随时调用它。

使用显式`for`循环确实没有性能问题。

使用列表推导或 存在性能问题，*但*`map`仅在构建结果列表时。显然，如果您必须在此过程中构建一个 500M 的列表，那么迭代超过 500M 的项目会慢很多。

值得在这里指出的是，对于像绘制精灵列表这样的事情，几乎可以肯定不会出现这种情况。您没有 500M 的精灵要绘制。如果你这样做了，它可能会比创建一个包含 5 亿份无副本的列表要长得多。在大多数可能的情况下，您确实需要对 500M 个对象做同样非常简单的事情，有更好的解决方案，比如切换到`numpy`. 但是有*一些*可以想象的情况可能会出现这种情况。

解决这个问题的简单方法是使用生成器表达式或`itertools.imap`（或者，在 Python 3 中，只是`map`），然后通过编写`dispose`函数来处理这些值。一种可能：

```
def dispose(iterator):
    for i in iterator:
        pass 
```

然后：

```
dispose(itertools.imap(Sprite.draw, sprite_list)) 
```

你甚至可以定义`do_all`为：

```
def do_all(iterable, func):
    dispose(itertools.imap(func, iterable)) 
```

如果你这样做是为了清楚或简单，我认为这是错误的。for 循环版本非常容易阅读，而且这个版本看起来就像您正在尝试使用错误的函数名称和语法编写 Haskell。

如果你是为了性能而这样做......好吧，如果现实生活中的性能情况很重要（这似乎不太可能），你可能想要玩一堆不同的潜在实现`dispose`，并可能将其移`dispose`回`do_all`以避免额外的函数调用，甚至可能在 C 中实现整个事情（借用 stdlib 的 itertools.c 中的快速迭代代码）。

或者，更好的是`pip install more-itertools`，然后使用[`more_itertools.consume`](http://packages.python.org/more-itertools/api.html#more_itertools.consume). 对于它的价值，当前版本只是这样做`collections.deque(iterator, maxlen=0)`，并且在针对自定义 C 实现的测试中，它的速度不到 1%（除了非常小的迭代器——我的系统上的截止值是 19），所以它可能不值得在C. 但是如果有人这样做，或者如果某些未来的 Python（或 PyPy）提供了一种更快的方法来实现它，那么它很可能会`more-itertools`在你发现它并更改你的代码之前被添加进去。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T00:36:59.567

假设 sprite_list 是 Sprite 对象的列表，您可以执行以下操作：

```
map(Sprite.draw, sprite_list) 
```

这将在每个项目上调用 Sprite.draw() ，`sprite_list`其中与您发布的列表理解基本相同。如果您不想创建列表，则可以使用 for 循环：

```
for sprite in sprite_list:
    sprite.draw() 
```

# asp.net - asp net mvc3 发布要操作的对象列表

> ID：13773190
> 
> 赞同：0
> 
> 时间：2012-12-08T00:32:53.277
> 
> 标签：asp.net, asp.net-mvc-3

我用 aspnet mvc3 创建了一个页面。它将所有用户信息显示为列表。我想用这个列表做点什么。每个项目都有一些复选框。当我单击一些复选框并按下提交按钮时，我想将整个列表作为一个集合发布并将该集合的每个项目保存到数据库中。网上有很多注释，但没有确切的解决方案。我有一个 UserDto。并想用它来传输所有部分的用户数据。

有没有人对此有任何完整的解决方案，或者他们可以给出任何想法？

提前致谢。

凯雷姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:10:28.890

我添加了一些代码。你可以看到引导句它们是关于什么的。

这是我的索引视图详细信息：

```
@model List<DomainModel.UserApprovalDto>
@{
    ViewBag.Title = "Manage Users";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>
    Manage Users</h2>
<div>@Html.Partial("_PartialManageUsers", (List<DomainModel.UserApprovalDto>)Model)        </div> 
```

这是我的部分视图细节：

```
 @model  List<DomainModel.UserApprovalDto>
@using (Html.BeginForm("ConfirmUsers", "ManageUsers", FormMethod.Post))
{
    <table>
    <tr>
        <th>
        Name
        </th>
        <th>
        Is Reported
        </th>
    </tr>
    @for (int i = 0; i < Model.Count(); i++)
    {
        <tr>
        <td>
            @Html.DisplayFor(modelItem => Model[i].FirstName)
        </td>
        <td>
            @Html.CheckBox("IsReported", Model[i].IsReported.HasValue ? Model[i].IsReported.Value : false)
            @*@Html.CheckBoxFor(modelItem => Model[i].IsReported.Value);*@ @*    @if (Model[i].IsReported != null)
            {
            @Html.CheckBoxFor(modelItem => Model[i].IsReported.Value);
            }
            else
            {
            @Html.CheckBoxFor(modelItem => Model[i].IsReported.Value);
            }*@
        </td>
        <td>
        </td>
        </tr>
    }
    </table>
    <div>
    <input name="submitUsers" type="submit" value="Save" />
    </div>
} 
```

这是我的控制器提交方法

```
 [HttpPost]
    public ActionResult ConfirmUsers(List<DomainModel.UserApprovalDto> collection)
    {

        if (ModelState.IsValid)
        {
    //TO-DO
        }
        return RedirectToAction("Index");
    } 
```

最后一个是我的 DTO 课程详细信息：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace DomainModel
{
    public class UserApprovalDto
    {
    public long UserId { get; set; }

    public Guid CarUserId { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    public string PhotoPath { get; set; }
    public string PhotoSmallPath { get; set; }
    public string PhotoSquarePath { get; set; }
    public string PhotoBigPath { get; set; }

    public bool IsBlocked { get; set; }
    public bool IsDeleted { get; set; }

    }
} 
```

当我提交此代码时，我的列表将 null 集合返回到我的控制器方法。

感谢您的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T06:46:43.810

假设您正在创建一个向课程添加/删除用户的屏幕。所以让我们创建一些视图模型

```
public class CourseVM
{
  public string Name { set;get;}
  public int CourseID { set;get;}
  public List<UserVM> Users { set;get;}
  public CourseVM()
  {
    Users=new List<UserVM>();
  }
}
public class UserVM
{
  public string Name { set;get;}
  public int UserID{ set;get;}
  public bool IsSelected { set;get;}
} 
```

现在在您的`GET`操作中，您将填充 ViewModel 的值并将其发送到视图。

```
public ActionResult Add()
{
    var vm = new CourseVM();

    //The below code is hardcoded for demo. you may replace with DB data.
    vm.Users.Add(new UseVM { Name = "Jon" , UserID=1});
    vm.Users.Add(new UseVM { Name = "Scott", UserID=2 });

    return View(vm);
} 
```

现在让我们创建一个 EditorTemplate。转到并创建一个名为“ **EditorTemplates**`Views/YourControllerName` ”的文件夹，并在那里创建一个与 Property Name( )同名的新视图**`UserVM.cshtml`**

 **将此代码添加到您的新编辑器模板中。

@model 频道视图模型

```
<p>
  <b>@Model.Name</b>   :
  @Html.CheckBoxFor(x => x.IsSelected) <br />
  @Html.HiddenFor(x=>x.Id)
</p> 
```

`EditorFor`现在在您的主视图中，使用Html Helper 方法调用您的编辑器模板。

```
@model CourseVM
@using (Html.BeginForm())
{    
    <div>  
      @Html.EditorFor(m=>m.Users)         
    </div>    
    <input type="submit" value="Submit" />
} 
```

现在，当您发布表单时，您的模型将具有`Users`Collection，其中 Selected Checkboxes 将具有属性`True`值。`IsSelected`

```
[HttpPost]
public ActionResult Add(CourseVM model)
{
   if(ModelState.IsValid)
   {
      //Check for model.Users collection and Each items
      //  IsSelected property value.
      //Save and Redirect(PRG pattern)
   }
   return View(model);
} 
```**

# ruby - Ruby：如何在树结构上实现 .map 方法？

> ID：13773191
> 
> 赞同：0
> 
> 时间：2012-12-08T00:33:13.173
> 
> 标签：ruby, map, tree

我有一个用 ruby​​ 实现的树数据结构。我用它来表示解析树。

正如您所料，它的工作原理是拥有许多节点对象，每个对象都包含有用的值以及对其子节点的引用数组。

我编写了一个遍历树的方法，该方法非常简单，工作方式如下：

```
def depth_first_traversal(node, &block) 
    if(node.has_children?)
        depth_first_traversal(node.children[0], &block) 
        yield node 
        depth_first_traversal(node.children[1], &block)
    else
        yield node  
    end
end 
```

问题是对于每棵树，我只明确地持有对根节点的引用。到目前为止，我一直在使用递归遍历来访问所有其他节点。

现在我需要更改树中节点的值，但我不知道该怎么做。我怎么能修改这个遍历，以便我可以修改树中的每个元素，而不是仅仅将它们的引用传递给`&block?`

--- 编辑： ---
为缺乏细节道歉，我试图让我的问题广泛而有用。

树中节点的“值”是节点对象的每个实例中的几个实例变量。让我们打电话给他们`@value`和`@type`。它们有 getter 和 setter 方法。

这棵树是一棵二叉树——但以后可能会改变。我也不认为这是我正在努力解决的问题的方面：

我的树显式创建了 Node `@root`。树中的所有其他节点都是在循环中创建的。所以一个典型的节点是可以访问的，例如作为“根的子节点的子节点”，并且不能以其他方式访问。

换句话说，搜索这种指针结构是我访问节点的唯一方法。如果 ruby​​ 仅按值传递，则产生的任何值（如在上述方法中）将是该对象的副本，而不是对象本身。

所以我很困惑我应该如何修改任何树中的值，而不仅仅是这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:58:25.480

如果我理解正确，你可能会做这样的事情：

```
def df_tree_map(node, &block)
    if(node.has_children?)
        df_tree_map(node.children[0], &block)
        node = yield node
        df_tree_map(node.children[1], &block)
    else
        node = yield node
    end
end 
```

显然这将对树结构产生影响，但这可能是一个好处。不过，这里的关键点是你的块需要返回一个节点而不是任何旧的东西。例如，返回一个字符串不会像 Array#map 那样工作，因为一个节点天生就有子节点。

另一种解决方案是允许 map 函数修改节点的内容而不是结构。我在这里有点自由，因为您没有发布实例变量节点也可以访问，但它应该足够有意义：

```
def df_tree_map(node, &block)
    if(node.has_children?)
        df_tree_map(node.children[0], &block)
        node.contents = yield node.contents
        df_tree_map(node.children[1], &block)
    else
        node.contents = yield node.contents
    end
end 
```

在这里，我不是将节点本身传递给块，而是传递内容。这样，树结构就不能被地图改变。看起来它可能与 Array#map 函数更一致，但它可能无法满足您的需求。

# c - 在 C 中调用函数

> ID：13773202
> 
> 赞同：0
> 
> 时间：2012-12-08T00:35:07.477
> 
> 标签：c, x86, x86-64, compiler-optimization

我的问题特别针对 C 中的函数调用。因此，我们可以正常调用函数，也可以通过函数指针调用函数。当您的接口保持不变但具有不同的实现时，将使用函数指针，但即使您有一个具有函数指针的实现也可以提高代码的可读性。

那么，使用静态调用而不是动态函数指针有什么好处。调用显然将在 2 条指令中实现，因为需要获取函数的地址，但返回将花费相同的周期。我只是想了解，处理器和编译器如何优化动态函数指针的静态调用？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T00:38:13.793

在大多数情况下，通过指针调用函数会导致编译器无法内联调用（如果编译器确定这样做是有益的）。在某些情况下，编译器甚至能够确定结果在编译时调用函数，从而优化掉函数的整个代码。函数指针也可以防止这种情况发生。

这并不意味着影响将以任何实际重要的方式显而易见。确定这一点的唯一方法是对您的代码进行基准测试/分析。

但是，我看不到函数指针如何能够提供更好的代码可读性。你可能想举一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T00:46:39.183

通常，直接调用允许对编译器进行更多优化。

如果真的只有一个实现并且编译器可以看到它[*]，它可以优化并执行与直接调用完全相同的操作。但这当然取决于编译器的智能程度以及您使用的优化选项。

[*] 即如果指针值在编译时已知；即如果它是“静态”变量，它的地址永远不会传递到编译单元之外，等等。

# java - 缓存资源不存在的事实

> ID：13773207
> 
> 赞同：0
> 
> 时间：2012-12-08T00:35:52.297
> 
> 标签：java, memcached

有一个问题，无法缓存影响我们系统负载的东西。

由于一个错误，我的代码调用了一个参数不正确的服务，该服务当然返回了 404、null、空。基本上，没有找到满足要求的东西。没有找到任何东西的事实被返回给缓存响应的过程。我的缓存系统不允许我们缓存 null 值，因此我们基本上无法缓存响应或没有响应的事实，因此每次发生这种情况时我们都必须进行实时调用。由于这个错误，它发生了很多。

我当然已经修复了这个错误，但我的问题是是否有和/或应该有一种方法来缓存无法找到某些资源的事实。如果我们能有这样一个安全网，那么这个错误就不会那么严重了。

是否应该有一种方法来缓存未找到或未找到的事实？为什么或者为什么不？

我正在使用带有 spymemcached 客户端的 memcache 服务器，并且我的代码是用 Java 编写的，尽管我的问题应该与这一事实无关。也许其他实现可以提供 cacheKey exists 方法或类似的东西。我对此进行了研究，但在 Java 世界中没有发现任何我认为适合我的情况的东西。即使有，由于公司标准，我可能无法切换到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:43:56.393

为什么不直接定义一个*表示*null 的常量值呢？然后缓存它，并在读取时考虑它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:44:44.483

当您需要知道一个值是否存在并且 null 是一个有效值时，我通常会使用“holder”或“singleton”类。例如：

```
public final class Singleton<T> {
  private final T value;
  public Singleton(T value) {
    this.value = value;
  }
  private final T get() {
    return value;
  }
} 
```

所以现在而不是：

```
// if this returns null, does it mean the document doesn't exist 
// or there's nothing in the cache?
public Document getCached(String name); 
```

您可以使用：

```
// if this returns null, there's nothing in the cache
// if non-null, the singleton wrapper may contain a null value,
// indicating the document doesn't exist
public Singleton<Document> getCached(String name); 
```

# php - 如果 mysql 值包含来自不同表的另一个 mysql 值，则回显

> ID：13773223
> 
> 赞同：0
> 
> 时间：2012-12-08T00:37:58.050
> 
> 标签：php, mysql

我有两个表，“客户”和“用户”。

在客户表中，我有一个标题为“名称”的列。这包含所有客户名称。

在我的用户表中，我有一个标题为“管理”的列。这有某些客户名称。

*如果“管理”包含* 来自“名称”的**任何**客户，我正在尝试显示内容。

这是一个例子......

“name”包含客户“applebees”、“johnny carinos”和“pizza hut”。

用户 rick 正在“管理”“applebees”和“pizza hut”。在他的行/列中，它看起来像“applebees，pizza hut”（我正在使用内爆函数，这就是为什么有一个，，）

所以，在我的客户页面上，我想让 rick 看到 applebees 和必胜客。我不想让他看到约翰尼·卡里诺斯，因为他没有管理它。

我怎样才能做到这一点？我试过 preg match & strpos 但失败得很惨。（我对 php 还是比较陌生）。这会更容易，因为它是单个值，所以我可以设置 value = value。不幸的是，拥有多个“管理”值真的让我很困惑！

希望这是有道理的。谢谢你的帮助！

这就是我现在所拥有的（是的，我知道，这可能是非常错误的。）

```
<?php

$sql = "SELECT * FROM customers";
$result = mysql_query($sql);
        $thecust = $_SESSION['user']['managing'];
    $thecustomers = htmlentities($row['name']);

    $check = strprk(wing, $thecust);
    if ($check) {

while ($row = mysql_fetch_array($result)) {
?>

    <tr> 
        <td><?php echo "<a href='customer.php?id=" . $row['id'] . "'>" . $row['name'] . "</a>"?></td> 
        <td><?php echo htmlentities($row['contact_name'], ENT_QUOTES, 'UTF-8'); ?></td> 
        <td><?php echo htmlentities($row['contact_number'], ENT_QUOTES, 'UTF-8'); ?></td> 
        <td><?php echo htmlentities($row['contact_email'], ENT_QUOTES, 'UTF-8'); ?></td> 
    </tr> 

<? } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:48:51.060

答案在于您的数据库架构和查询方式。你并没有真正进入你的数据库表结构，但我建议你使用这样的东西

```
users
-------
user_id INT, autoincrement, PRIMARY KEY
user_name VARCHAR
[other user-specific fields]

users_to_customers
-------
user_id INT
customer_id INT
[compound primary key across both fields]

customers
-------
customer_id INT, autoincrement, PRIMARY KEY
customer_name VARCHAR
[other customer specific fields] 
```

注意我这里有三个表。这允许您将任意数量的用户与任意数量的客户相关联。现在要获取您正在寻找的信息，假设您知道`user_id`查看客户页面的用户。您的查询可能看起来像

```
SELECT c.customer_id, c.customer_name, [whatever other fields you need]
FROM users AS u
INNER JOIN users_to_customers AS uc
INNER JOIN customers AS c
WHERE u.user_id = ? [the user_id of the user viewing the page] 
```

这将为您提供与用户相关的客户的客户信息。

* * *

您也不应该使用`mysql_*`已弃用的函数（请注意 PHP.net 文档中的大红色警告）。也许使用 mysqli_* 函数。

# iphone - 超过 3 个客户端的 GameKit 客户端/服务器问题

> ID：13773228
> 
> 赞同：1
> 
> 时间：2012-12-08T00:38:37.567
> 
> 标签：iphone, ios, ipad, gamekit, gksession

我目前正在构建一个 iOS 应用程序，它允许用户使用 GameKit 与朋友分享内容。一台设备成为服务器，然后他们可以将内容发送到连接的对等方。这在 4 个连接的客户端之前运行良好。

第 4 个客户端始终可以加入并接收一个文件，但随后它似乎忽略了所有其他数据包并崩溃，没有产生错误或崩溃日志（必须强制关闭应用程序）。

在开始这个项目之前，我读到有几个开发人员在 P2P 中遇到了超过 4 个连接的问题，但没有关于客户端服务器的报告（我读到了多达 16 个玩家）。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:06:15.093

```
GKMatchTypePeerToPeer -> 4  (maximum players)
GKMatchTypeHosted     -> 16 (maximum players)
GKMatchTypeTurnBased  -> 16 (maximum players)

This example (http://www.raywenderlich.com/12976/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-7) is GKMatchTypeHosted 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:20:30.767

这似乎是与 iOS 6 相关的错误。当同时连接了 iOS5 设备和 iOS 6 设备时，就会出现此问题。直到大约 4 个玩家然后随机断开连接才会发生。

有几个人在苹果开发者论坛上进行了报道（对于那些有帐户的人 - [https://devforums.apple.com/thread/170210](https://devforums.apple.com/thread/170210)）

# jquery - Click/Toggle jQuery 不适用于 FireFox，但适用于 IE 和 Chrome

> ID：13773237
> 
> 赞同：1
> 
> 时间：2012-12-08T00:40:33.143
> 
> 标签：jquery, firefox, hide, toggle, show

我的代码设置为在单击正确的导航按钮时显示面板，如果再次单击或激活另一个按钮则隐藏。例如：如果你点击“bio”按钮，bio 面板应该会弹出。如果再次单击它，它就会消失。但是，如果你有生物面板并且你想显示商店面板，生物面板将消失并显示商店面板。此代码在 IE 和 Chrome 中完美运行，但在 FireFox 中不起作用。请记住，我对此完全陌生，并且自学如何编写代码。

我正在使用的 jQuery 代码如下：

```
$(document).ready(function(){
    $(".bio").click(function(){
        $(".panel").not(".biopanel").hide();
        $(".biopanel").toggle("fast");
        });

    $(".blog").click(function(){
        $(".panel").not(".blogpanel").hide();
        $(".blogpanel").toggle("fast");
        });

    $(".credits").click(function(){
        $(".panel").not(".creditspanel").hide();
        $(".creditspanel").toggle("fast");
        });

    $(".store").click(function(){
        $(".panel").not(".storepanel").hide();
        $(".storepanel").toggle("fast");
        });

    $(".contact").click(function(){
        $(".panel").not(".contactpanel").hide();
        $(".contactpanel").toggle("fast");
        });

    $(".casual").click(function(){
        $(".panel").not(".casualpanel").hide();
        $(".casualpanel").toggle("fast");
        });

    $(".glamour").click(function(){
        $(".panel").not(".glamourpanel").hide();
        $(".glamourpanel").toggle("fast");
        });

    $(".tears").click(function(){
        $(".panel").not(".tearspanel").hide();
        $(".tearspanel").toggle("fast");
        });
});

<!DOCTYPE HTML>
<!--[if lt IE 7 ]> <html lang="en" class="ie ie6"> <![endif]--> 
<!--[if IE 7 ]>    <html lang="en" class="ie ie7"> <![endif]--> 
<!--[if IE 8 ]>    <html lang="en" class="ie ie8"> <![endif]--> 
<!--[if IE 9 ]>    <html lang="en" class="ie ie9"> <![endif]--> 
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>Demo</title>
    <meta name="description" content="Demo Page">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
    <script type="text/javascript" src="js/simplifiedjs.js"></script>
</head>

<body>
    <div id="nav_wrapper">        
        <nav id="navigation" class="navigation">
            <ul>
            <li><a class="bio" href="#">Bio</a></li>
            <li><a class="blog" href="#">Blog</a></li>
            <li><a class="credits" href="#">Credits</a></li>
            <li><a href="#">Gallery</a>
                <ul class="submenu"  >
                    <li><a class="casual" href="#">Casual</a></li>
                    <li><a class="glamour" href="#">Glamour</a></li>
                    <li><a class="tears" href="#">Tears</a></li>
                </ul>
            </li>
            <li><a class="store" href="#">Store</a></li>
            <li><a class="contact" href="#">Contact</a></li>
        </ul>
    </nav>

    <!-- START OF BIO PANEL -->
    <div class="biopanel panel"> 
        <h2>The Bio</h2>
            <p>Phasellus vitae tempor eros. Integer pulvinar sem justo. Nulla lobortis nisl eu tellus ultricies eget elementum eros pellentesque. Cras at arcu ut nulla consectetur sollicitudin.</p> 
        <div style="clear:both;"></div> 
    </div> 
    <!-- END OF BIO PANEL -->

    <!-- START OF BLOG PANEL -->
    <div class="blogpanel panel">
        <h2>My Blog & Updates</h2>
            <h3>Oct 15th, 2012</h3>
                <p>Phasellus vitae tempor eros. Integer pulvinar sem justo. Nulla lobortis nisl eu tellus ultricies eget elementum eros pellentesque. Cras at arcu ut nulla consectetur sollicitudin.</p>
                <div class="border"></div>
            <h3>Oct 14th, 2012</h3>
                <p>Phasellus vitae tempor eros. Integer pulvinar sem justo. Nulla lobortis nisl eu tellus ultricies eget elementum eros pellentesque. Cras at arcu ut nulla consectetur sollicitudin.</p>
    </div>
    <!-- END OF BLOG PANEL -->

    <!-- START OF CREDITS PANEL -->
    <div class="creditspanel panel">
        <h2>Resume & Credits</h2>
            <div class="creditsscroll">
            <h3>Print</h3>
                <p>Phasellus vitae tempor eros. Integer pulvinar sem justo. Nulla lobortis nisl eu tellus ultricies eget elementum eros pellentesque. Cras at arcu ut nulla consectetur sollicitudin.</p>
                    <div class="border"></div>
            <h3>Online</h3>
                <p>Phasellus vitae tempor eros. Integer pulvinar sem justo. Nulla lobortis nisl eu tellus ultricies eget elementum eros pellentesque. Cras at arcu ut nulla consectetur sollicitudin.</p>
                    <div class="border"></div>
            <h3>Promotions</h3>
                <p>Phasellus vitae tempor eros. Integer pulvinar sem justo. Nulla lobortis nisl eu tellus ultricies eget elementum eros pellentesque. Cras at arcu ut nulla consectetur sollicitudin.</p>
                    <div class="border"></div>
            <h3>Contests & Titles</h3>
                <p>Phasellus vitae tempor eros. Integer pulvinar sem justo. Nulla lobortis nisl eu tellus ultricies eget elementum eros pellentesque. Cras at arcu ut nulla consectetur sollicitudin.</p>
                    <div class="border"></div>
            </div>
    </div>
    <!-- END OF CREDITS PANEL -->

    <!-- START OF GLAMOUR SHEETS -->
    <div class="casualpanel panel">
        <h2>Casual</h2>
            <ul class="casualimgs">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
    </div>

    <div class="glamourpanel panel">
        <h2>Glamour</h2>
            <ul class="glamourimgs">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
    </div>

    <div class="tearspanel panel">
        <h2>Tears</h2>
            <ul class="tearsimgs">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
    </div>
    <!-- END OF GLAMOUR SHEETS -->

    <!-- START OF STORE PANEL -->
    <div class="storepanel panel">
        <h2>The Store</h2>
            <div class="leftcolumn">
                <h3></h3>
                    <p>This is the store panel. It will contain future information about items that may be for purchase.</p>
            </div>

            <div class="rightcolumn">
                <h3></h3>
                    <img src="images/poster.jpg" class="posterimg"><br><br>
                    <p align="center">Subtitle Information</p>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" class="paypalbutton">
                    <input type="hidden" name="cmd" value="_s-xclick">
                    <input type="hidden" name="hosted_button_id" value="9DNX38DGJ9LDQ">
                    <input type="image" src="#" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                    </form>
            </div>
    </div>
    <!-- END OF STORE PANEL -->

    <!-- START OF CONTACT PANEL -->   
    <div class="contactpanel panel">
        <div id="contact-form" class="clearfix">
            <h1>Get In Touch!</h1>
            <p>Do you have questions, comments, or suggestions? Send me a message! I love to hear from people, and I read every message personally.<br>In the event that my form isn't functioning, please contact me directly at ---</p>
            <ul id="errors" class="">
                <li id="info">There were some problems with your form submission:</li>
            </ul>
            <p id="success">Thanks for your message! I can't wait to hear from you.</p>
            <form method="POST" action="process.php">
                <label for="name">Name: <span class="required">*</span></label>
                <input type="text" id="name" name="name" value="" placeholder="John Doe" required="required" autofocus="autofocus" />
                <label for="email">Email Address: <span class="required">*</span></label>
                <input type="email" id="email" name="email" value="" placeholder="johndoe@example.com" required="required" />
                <label for="subject">Subject: </label>
                <input type="text" id="subject" name="subject" value="" />
                <label for="message">Message: <span class="required">*</span></label>
                <textarea id="message" name="message" placeholder="Your message must be greater than 20 charcters" required="required" data-minlength="20"></textarea>
                <span id="loading"></span>
                <input type="submit" value="Submit!" id="submit-button" />
                <p id="req-field-desc"><span class="required">*</span> indicates a required field</p>
            </form>
        </div>
    </div>
    <!-- END OF CONTACT PANEL -->

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:52:42.767

首先，`.panel`向所有面板添加一个类，如下所示：

```
<div class="biopanel panel"></div>
<div class="blogpanel panel"></div>
... 
```

然后你可以这样做：

```
$('.bio').click(function(){
    $(".panel").not(".biopanel").hide();
    $(".biopanel").show();
});
... 
```

[**JSFIDDLE**](http://jsfiddle.net/aMpHs/2/)

尚未测试，但它应该可以工作。您还可以将切换功能用作事件。

```
$('.bio').toggle(function(){
   //First click
   //Do some stuff
}, function(){
   //Second click
   //Do other stuff
}); 
```

这个甚至在 javascript 被禁用时也可以工作： [**一个更短的版本**](http://jsfiddle.net/aMpHs/10/)

# java - IntelliJ git 集成提示和技巧

> ID：13773239
> 
> 赞同：3
> 
> 时间：2012-12-08T00:40:47.140
> 
> 标签：java, git, intellij-idea

我实际上忽略了 IntelliJ 的 git 集成，最近我对 git 默认附带的 diff 工具感到沮丧，我注意到 intellij 如何以非常好的方式查看给定文件的历史记录，并比较以前的版本等。

您喜欢 IntelliJ 的哪些很酷/有用的 git 集成技巧和窍门？

1.  我想看看一些键盘快捷键，比如如果我在一个文件上，我想快速打开历史视图或与最后一个提交的文件进行比较。

2.  是否可以比较提交？（不仅仅是一个文件）

BTW，IntelliJ 默认使用什么 diff 工具，很不错！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T00:53:39.250

您可以查看 IntelliJ IDEA 的[默认键盘映射参考卡](http://www.jetbrains.com/idea/docs/IntelliJIDEA_ReferenceCard.pdf)以了解开始时可用的内容。

我不相信有一个默认的键盘快捷键分配给显示当前文件历史记录，但您可以专门分配一个快捷方式来显示文件历史记录：

> 设置→键盘映射→（在右侧的搜索框中键入：“历史”以缩小选项）→将所需的键盘快捷键分配给“Git：显示历史”

虽然绝对可以比较来自不同提交的文件的各种修订，但我不确定您还想做什么来比较单个文件范围之外的提交，但是在查看提交时，您可以查看所有提交中的更改，显示所有差异，一次一个文件。

就他们的差异工具而言，我相信它是内部开发的，并且是他们[版本控制](http://www.jetbrains.com/idea/features/version_control.html)功能集的一部分。

# export - 为什么我在 MaxScript 中得到奇怪的顶点位置值

> ID：13773240
> 
> 赞同：0
> 
> 时间：2012-12-08T00:40:50.827
> 
> 标签：export, mesh, maxscript

我正在尝试在 maxscript 中编写一个简单的网格导出器。这没什么花哨的，它只需要导出面、顶点和顶点。我的代码和工作一样好，但有时我在顶点位置得到非常奇怪的值（例如-1.1234e-005）。我知道这是一个非常大的数字，但问题是，我的顶点不在数字指示的位置附近（我已经看到这种情况发生在 1m*1m*1m 的盒子上）。我发现当它发生在网格上时，它总是发生在那个网格和相同的顶点上，直到我移动那个特定的顶点（缩放/移动整个东西不起作用）。我使用此代码导出顶点位置：

```
num_verts  = sel_mesh.numverts
for i=1 to num_verts do (
  v = getVert sel_mesh i
  format "v %\n" v to:out_file
)
format "\n" to:out_file 
```

我试过用谷歌搜索这个问题，但似乎没有人有同样的问题。我对我的 tvertices 使用相同的代码，并且这些代码可以很好地导出。如果需要，我可以发布整个出口商。如果您需要查看更多代码，请告诉我:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:37:00.207

这实际上是一个非常小的数字。

`-1.1234e-005`是`-1.1234 * (10 ^ -5)`，非常小。

与您的评论相反，`formattedPrint`是否“解决”了这个问题。

```
formattedPrint -1.1234e-005 format:".6f"

output:    "-0.000011" 
```

您可以在导出器中使用它：

```
num_verts  = sel_mesh.numverts
for i=1 to num_verts do (
  v = getVert sel_mesh i
  format "v %\n" (formattedPrint v format:".6f") to:out_file
)
format "\n" to:out_file 
```

# java - 带有 GUI 的 Java ResultSet SQL

> ID：13773250
> 
> 赞同：0
> 
> 时间：2012-12-08T00:42:47.310
> 
> 标签：java, swing, user-interface, jtable, resultset

我对下面的代码有一个奇怪的问题，它在没有 if else 语句的情况下运行时工作正常，但在使用 if else 时在 jtable 中不显示任何结果。我在这里错过了什么愚蠢的东西吗？

```
 try {
        Class.forName(dbClass);
        Connection con = DriverManager.getConnection (dbUrl,dbUsername, dbPassword);
        Statement stmt = con.createStatement();

        String userQuery = "SELECT p_id AS 'Patient ID', forename AS 'Forename', surname AS 'Surname', address AS 'Address' FROM Patient WHERE surname LIKE '%"+s+"%'";
        ResultSet userResult = stmt.executeQuery(userQuery);

        if(!userResult.next())
        {
            JOptionPane.showMessageDialog(null, "No Results.");
        {
        else{
        ResultSetMetaData rsMetaData =userResult.getMetaData();
        DefaultTableModel dtm = new DefaultTableModel();
        int cols = rsMetaData.getColumnCount();
        Vector colName = new Vector();
        Vector dataRows = new Vector();

        for (int i=1; i<cols; i++){
        colName.addElement(rsMetaData.getColumnName(i));
        }
        dtm.setColumnIdentifiers(colName);

        while(userResult.next()){
            dataRows = new Vector();
            for(int j = 1; j<cols; j++){
                dataRows.addElement(userResult.getString(j));
            }
            dtm.addRow(dataRows);
        }
        searchTable.setModel(dtm);
        con.close();
        }
    } //end try

    catch(ClassNotFoundException e) {
        JOptionPane.showMessageDialog(null, "Database Error.");
        e.printStackTrace();
    }

    catch(SQLException e) {
        JOptionPane.showMessageDialog(null, "Database Error.");
        e.printStackTrace();
    } 
```

我正在为 GUI 使用 netbeans。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:39:26.730

连接对象 (con) 应在 if/else 块之外关闭。

此外，userResult.next() 在 else 语句块中被调用了两次。

您可以通过将 while() 替换为 do while 循环来修复它：

```
do {
        dataRows = new Vector();
        for (int j = 1; j < cols; j++) {
            dataRows.addElement(userResult.getString(j));
        }
            dtm.addRow(dataRows);
    }
while (userResult.next()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:15:19.860

请包括 finally 以处理关闭连接并删除其他资源。

# twitter - 如何测试 Twitter 卡片？

> ID：13773252
> 
> 赞同：4
> 
> 时间：2012-12-08T00:42:59.380
> 
> 标签：twitter

我正在使用玩家卡设置 Twitter 卡。它可以在预览工具中使用，但文档说它需要“在 twitter.com 现代桌面浏览器上进行测试？原生 iOs 和 Android Twitter 应用程序？mobile.twitter.com iOS 和 Android 默认浏览器？”

如果尚未获得批准，我如何在 twitter.com 和 twitter 移动应用程序上对其进行测试？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-28T03:21:35.530

Twitter 添加了一个卡片验证器。不确定这是否会对您有所帮助，但它可能会对通过 Google 搜索进入此页面的其他人有所帮助。

[https://cards-dev.twitter.com/validator](https://cards-dev.twitter.com/validator)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T18:28:40.857

我也有同样的问题，在 Twitter 开发者论坛上没有得到回答。我能够验证玩家卡 URL 并将我的域列入白名单，而无需先在每个不同的上下文中进行审查。

确保您的 URL 符合玩家卡片要求 ( [https://developer.twitter.com/en/docs/twitter-for-websites/cards/guides/getting-started](https://developer.twitter.com/en/docs/twitter-for-websites/cards/guides/getting-started) )。我的 twitter:player 条目指向一个简单的 html 页面，其中包含一个 VideoJS 播放器，我的内容被定义为将其调整为 100% 的宽度和高度（这样小型移动网络体验就不会出现裁剪。）当然所有资产都必须像文档中定义的那样通过 https 获取。

对于拥有大量 Twitter 追随者的人来说，播放器卡应该确实有助于观看视频/频道。

祝你好运，斯坦

# c++ - 带有使用模板的方法的嵌套结构

> ID：13773254
> 
> 赞同：12
> 
> 时间：2012-12-08T00:43:22.500
> 
> 标签：c++, struct

我想将 python 嵌套的 defs 翻译成 c++，我正在使用嵌套结构。

```
#include<iostream>
static void ffunc(int x, int y)
{
    static int x1 = x;
    static int y1 = y;
    struct g
    {
        static void gfunc(int z)
        {
            static int z1 = z;
            std::cout << x1 << y1 << z << std::endl;

            struct h
            {
                static void hfunc(int k)
                {
                    std::cout<< x1 << y1 << z1 << k <<  std::endl;
                }
            };
            h::hfunc(4);
        }
    };
    g::gfunc(3);
}
int main()
{
    ffunc(1, 2);
} 
```

这段代码工作正常。问题是，我想要模板，以便嵌套函数可以使用任何类型的参数。但是，当我尝试使用模板时：

```
#include<iostream>
template <typename t1>
static void ffunc(t1 x, t1 y)
{
    static t1 x1 = x;
    static t1 y1 = y;
    struct g
    {
        static void gfunc(int z)
        {
            static int z1 = z;
            std::cout << x1 << y1 << z << std::endl;

            struct h
            {
                static void hfunc(int k)
                {
                    std::cout<< x1 << y1 << z1 << k <<  std::endl;
                }
            };
            h::hfunc(4);
        }
    };
    g::gfunc(3);
}
int main()
{
    ffunc(1, 2);
} 
```

我得到错误：

```
/tmp/cceIMovo.o: In function `void ffunc<int>(int, int)::g::gfunc(int)':
nested.cc:(.text+0x17d): undefined reference to `y1'
nested.cc:(.text+0x183): undefined reference to `x1'
/tmp/cceIMovo.o: In function `void ffunc<int>(int, int)::g::gfunc(int)::h::hfunc(int)':
nested.cc:(.text+0x1e5): undefined reference to `z1'
nested.cc:(.text+0x1ec): undefined reference to `y1'
nested.cc:(.text+0x1f2): undefined reference to `x1' 
```

有谁知道我想做的事在 C++ 中是否可行？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:58:40.143

我可能错了，但这看起来像一个编译器错误。GCC (4.7.2) 会产生该错误，而 Clang (3.1) 和 ICC (13.0.0) 可以很好地处理它。

尝试在其他编译器上重现此代码的最少代码：http: [//pastebin.com/kf2sF3NL](http://pastebin.com/kf2sF3NL)

# android - org.osmdroid.views.MapView 无法实例化

> ID：13773256
> 
> 赞同：0
> 
> 时间：2012-12-08T00:43:27.640
> 
> 标签：android, android-layout, osmdroid

我真的需要你的帮助。OSMDROID 地图无法加载，我一直在逐行查看代码但没有得到它...... **此代码可在手机上运行（完美显示地图）** ...... ..... *此代码适用于模拟器（不显示地图）* *

我把屏幕截图 [http://i1196.photobucket.com/albums/aa402/funkee_iads/osmdroidnotLoad.png](http://i1196.photobucket.com/albums/aa402/funkee_iads/osmdroidnotLoad.png)

下面出现在图形布局中

> 无法实例化以下类： - org.osmdroid.views.MapView（打开类，显示错误日志）有关详细信息，请参阅错误日志（窗口 > 显示视图）。提示：当在 Eclipse 中显示时，在自定义视图中使用 View.isInEditMode() 以跳过代码

并且错误日志显示

> org.osmdroid.views.MapView 无法实例化它真的很奇怪。

我使用这个库

-slf4j-android-1.5.8.jar / -osmdroid-android-3.0.8.jar / -osmbonuspack_v2.4.jar / -mapsforge-map-writer-0.3.0-jar-with-dependencies.jar

在这里我把代码::::

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     android:background="#ffd7bd"
    android:orientation="vertical" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="45dp" >

      <ImageView
        android:id="@+id/imageView0"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:background="#ffd7bd"
       android:orientation="vertical"
       android:layout_marginLeft="-200dp "

        android:textStyle="bold"
   android:textColor="#000000" android:shadowColor="#8a6603"
   android:shadowDx="3" android:shadowDy="2" android:shadowRadius="1.8"
        android:src="@drawable/muestra2" />

    </TableRow>

  <org.osmdroid.views.MapView
        android:id="@+id/openmapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

</LinearLayout> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T15:35:18.777

我从没想过taht，但只有添加权限才能完美

> 使用权限 android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

不知道为什么我需要这个权限，但它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:34:14.140

这是[osmdroid 需要的权限之一](http://code.google.com/p/osmdroid/wiki/HowToUseJar)。我认为这是必要的，因为 osmdroid 需要访问某个地方来下载地图的图块。

# c# - 他尺寸的第二个数字

> ID：13773258
> 
> 赞同：-2
> 
> 时间：2012-12-08T00:43:56.257
> 
> 标签：c#

好吧，它并不难，我做到了，但我不知道如何找到它的位置。我知道在 CASE1 和 CASE2 中找到位置，但在 CASE3 中找不到。有什么帮助吗？

```
 int serial = 1, num, max, max2, i = 2,n;
        Console.WriteLine("Enter number of numbers");
        n = int.Parse(Console.ReadLine());
        Console.WriteLine("Enter number");
        num = int.Parse(Console.ReadLine());
        /*case 1 */
        max = num;
        max2 = num;
        for (; i <= n; i++)
        {
            Console.WriteLine("enter num");
            num = int.Parse(Console.ReadLine());
             /* case 3 */
            if (num > max)
            {
                max2 = max;
                max = num;
                serial = i;
            }
              /* case 2 */
            else if (num > max2)
            {
                max2 = num;
                serial = i;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:18:56.000

让我们再使用一个变量来存储最大数字的位置。下面`serial2`是您的问题的结果。

```
int serial = 1, serial2 = 1, num, max, max2, i = 2,n;
Console.WriteLine("Enter number of numbers");
n = int.Parse(Console.ReadLine());
Console.WriteLine("Enter number");
num = int.Parse(Console.ReadLine());
/*case 1 */
max = num;
max2 = num;
for (; i <= n; i++)
{
    Console.WriteLine("enter num");
    num = int.Parse(Console.ReadLine());
     /* case 3 */
    if (num > max)
    {
        max2 = max;
        max = num;
        serial2 = serial;
        serial = i;
    }
      /* case 2 */
    else if (num > max2)
    {
        max2 = num;
        serial2 = i;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T01:28:56.320

我认为这就是您所追求的 - 当您输入的数字替换最大的数字时，您只是没有更新您的第二大索引：

```
Console.WriteLine("Enter number of numbers");
int numberOfNumbers = int.Parse(Console.ReadLine());
int? largestNumber = null;
int? secondLargestNumber = null;
int? indexOfLargestNumber = null;
int? indexOfSecondLargestNumber = null;

for (int i = 0; i < numberOfNumbers; i++)
{
    Console.WriteLine("Enter number");
    int inputNumber = int.Parse(Console.ReadLine());

    if (largestNumber == null || inputNumber > largestNumber)
    { 

        secondLargestNumber = largestNumber;
        largestNumber = inputNumber;

        indexOfSecondLargestNumber = indexOfLargestNumber;
        indexOfLargestNumber = i;

    }
    else if (secondLargestNumber == null || inputNumber > secondLargestNumber)
    {
        secondLargestNumber = inputNumber;
        indexOfSecondLargestNumber = i;
    }
}

/*because you started i=1 rather than i=0 as I've done, incrememting the indexes by 1*/
indexOfSecondLargestNumber++;
indexOfLargestNumber++;

Console.WriteLine("The {0} number entered ({1}) was the second largest.",indexOfSecondLargestNumber,secondLargestNumber); 
```

# php - PHP致命错误：找不到类

> ID：13773261
> 
> 赞同：0
> 
> 时间：2012-12-08T00:44:18.693
> 
> 标签：php, symfony

`Class 'Splash\\SiteBundle\\Util\\Resize' not found`我在产品上运行我的应用程序时得到了。这不会发生在 dev 上。

以下是错误代码：

```
$resize = new \Splash\SiteBundle\Util\Resize($this->getAbsolutePath()); 
```

我有一个`Splash\SiteBundle\Util\Resize.php`用这个命名空间调用的文件

```
namespace Splash\SiteBundle\Util;

Class Resize{  ... } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:36:27.120

所以快速修复是添加这个`include dirname(__FILE__) . "/../Util/Resize.php"` 我不确定为什么我的生产机器需要包含，而我的开发机器没有它可以正常工作。使用 Symfony2 和自动加载器，我从来不需要`include`文件。不知道发生了什么，但这让我暂时过去了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:41:41.273

可能导致这种情况发生的可能原因之一是无法清除缓存

```
 php app/console cache:clear -e prod 
```

另一个愚蠢的想法可能是生产在该文件中存在合并冲突，并且 PHP 没有看到已编译的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T20:43:26.873

我喜欢它的小事。我的`util`文件夹没有大写。我改变了这个，它现在可以工作了。我很惊讶我的开发机器没有因为这个错误而失败。

# javascript - Javascript的正则表达式lookbehind解决方法？

> ID：13773268
> 
> 赞同：3
> 
> 时间：2012-12-08T00:45:11.053
> 
> 标签：javascript, regex

我在正则表达式方面很糟糕，所以我会以试图更好地描述我的问题的名义有点不合常规地传达我的问题。

```
var TheBadPattern = /(\d{2}:\d{2}:\d{2},\d{3})/;
var TheGoodPattern = /([a-zA-Z0-9\-,.;:'"])(?:\r\n?|\n)([a-zA-Z0-9\-])/gi;

// My goal is to then do this
inputString = inputString.replace(TheGoodPattern, '$1 $2); 
```

**问题：**我想匹配所有好的模式并进行后续的查找/替换，除非它们是由坏的模式进行的，有什么想法吗？我能够用其他支持lookbehind的语言来实现这一点，但没有它我会不知所措吗？（ps：据我了解，JS 不支持前瞻/后瞻，或者如果您愿意，'?>!'、'?<='）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:05:01.067

JavaScript 确实支持前瞻。而且由于您只需要向后看（也不需要向前看），因此有一种解决方法（这并不能真正帮助您的代码的可读性，但它确实有效！）。所以你可以做的是反转字符串和模式。

```
inputString = inputString.split("").reverse().join("");
var pattern = /([a-z0-9\-])(?:\n\r?|\r)([a-z0-9\-,.;:'"])(?!\d{3},\d{2}:\d{2}:\d{2})/gi
inputString = inputString.replace(TheGoodPattern, '$1 $2');
inputString = inputString.split("").reverse().join(""); 
```

请注意，您已经多余地使用了大写字母（它们正在处理`i`修饰符）。

如果您提供一些示例输入，我实际上会为您测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:30:36.437

我还使用了[m.buettner](https://stackoverflow.com/users/1633117/m-buettner)推荐的反向方法，根据您的模式，它可能会变得非常棘手。如果您匹配简单的模式或字符串，我发现这种解决方法效果很好。

话虽如此，我想我会为了好玩而跳出框框。该解决方案并非没有自己的弱点，但它也可以工作，并且应该很容易适应具有中到复杂正则表达式的现有代码。

[http://jsfiddle.net/52QBx/](http://jsfiddle.net/52QBx/)

js：

```
function negativeLookBehind(lookBehindRegExp, matchRegExp, modifiers)
{
    var text = $('#content').html();
    var badGoodRegex = regexMerge(lookBehindRegExp, matchRegExp, modifiers);
    var badGoodMatches = text.match(badGoodRegex);
    var placeHolderMap = {};
    for(var i = 0;i<badGoodMatches.length;i++)
    {
        var match = badGoodMatches[i];
        var placeHolder = "${item"+i+"}"
        placeHolderMap[placeHolder] = match;
        $('#content').html($('#content').html().replace(match, placeHolder));
    }

    var text = $('#content').html();
    var goodRegex = matchRegExp;
    var goodMatches = text.match(goodRegex);

    for(prop in placeHolderMap)
    {
        $('#content').html($('#content').html().replace(prop, placeHolderMap[prop]));
    }
    return goodMatches;
}
function regexMerge(regex1, regex2, modifiers)
{
    /*this whole concept could be its own beast, so I just asked to have modifiers for the combined expression passed in rather than determined from the two regexes passed in.*/
    return new RegExp(regex1.source + regex2.source, modifiers);
}
var result = negativeLookBehind(/(bad )/gi, /(good\d)/gi, "gi");
alert(result); 
```

​ html:

```
<div id="content">Some random text trying to find good1 text but only when that good2 text is not preceded by bad text so bad good3 should not be found bad good4 is a bad oxymoron anyway.</div>​ 
```

主要思想是找到所有总模式（包括后向匹配和真正匹配），并暂时从正在搜索的文本中删除这些模式。我使用了一张地图，因为隐藏的值可能会有所不同，因此每个替换都必须是可逆的。然后，我们可以只为您真正想要找到的项目运行正则表达式，而不会妨碍那些与后视相匹配的项目。确定结果后，我们换回原始项目并返回结果。这是一个古怪但实用的解决方法。

# python - Python3.2：扩展 sum() 函数——计算列表的“值”，除了不加法

> ID：13773269
> 
> 赞同：2
> 
> 时间：2012-12-08T00:45:15.700
> 
> 标签：python, list, python-3.x, iteration

在我正在编写的一些代码中，我想要一个类似于内置 sum() 函数的函数，除了我自己的自定义两个参数函数而不是加法。编写这样一个函数很容易，但我想知道标准库中是否有一个？我浏览了[itertools 文档](http://docs.python.org/3.2/library/itertools.html)，但没有找到任何东西。它也类似于`itertools.accumulate(mylist)[-1]`，除了 sum 以外的函数。

我自己的这种功能的代码：

```
def accumulate(iterable, func):
    it = iter(iterable)
    out = func(next(it), next(it))
    for i in it:
        out = func(out, i) # "out += i"
    return out 
```

所以`sum(mylist)`将相当于`accumulate(mylist, lambda x, y: x+y)`. 当然，在我的用例中，我想使用一个不同的函数（它比简单的算术运算更复杂。）

这似乎是一件相当普遍的事情，这就是为什么我很惊讶半小时的搜索没有找到这样的东西。那么：标准库中是否以及在哪里存在这样的功能？（我现在在上面使用我自己的代码。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:09:44.307

该函数的常用名称是`fold`or `reduce`，它实际上是在 Python 2 中以后一个名称内置的：

```
>>> reduce(lambda x,y: x*y, [1,3,5,4])
60 
```

在 Python 3 中，您必须从`functools`模块中导入它。

# actionscript-3 - 在 AIR 移动应用程序上长时间计算时减少 CPU 负载？

> ID：13773272
> 
> 赞同：0
> 
> 时间：2012-12-08T00:45:24.423
> 
> 标签：actionscript-3, apache-flex, flex4.5

我面临以下问题： - 有一个计算是在加载应用程序期间计算复杂的数学运算，它需要相当长的时间（大约 20 秒），此时 CPU 几乎 100% 使用，应用程序看起来像被冻结了。由于它是一个移动应用程序，因此必须防止这种情况发生，即使有延长初始加载时间的成本，但由于它位于第 3 方库中，因此无法直接访问计算代码。

*   有没有办法阻止大部分 CPU 的 AIR 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T02:05:44.037

在桌面上，您将使用 Workers API。它很新，我推荐它用于仅限 AS3 的项目。如果你使用 flex，最好等几个月。Workers 是一个多线程 API，它允许你创建一个 UI 和一个工作线程。这仍将使用 100% 的 CPU，但 UI 不会卡住。这里有一些链接可以帮助您入门： [Thibault Imbert - 先睹为快](http://www.bytearray.org/?p=4423)， [介绍 as 3 workers](http://esdot.ca/site/2012/intro-to-as3-workers-hello-world)， [AS3 Workers livedocs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html)

但是，在 Mobile 上，您不能使用工作人员，因此您必须将您的功能分开，并在那里插入一些延迟，例如 callLater 或 setTimeout。很难编写这样的函数，但如果它有一个循环，您可以在每次 x 迭代后插入一个 callLater 方法。您可以对 x 和 callLater 函数的延迟进行参数化，以实现完美的解决方案。调用 callLater 后，将渲染 UI，生成并捕获事件。如果您不需要它们，请删除它们的侦听器，或使用更高优先级的处理程序停止它们的传播。如果您需要，我可以在循环中发布一些 callLater 的源示例。

# jquery - jQuery UI 菜单在模糊时折叠

> ID：13773273
> 
> 赞同：4
> 
> 时间：2012-12-08T00:45:27.397
> 
> 标签：jquery, jquery-ui, drop-down-menu, menu

我认为 jQuery UI 子菜单在 mouseblur 事件上保持打开状态很烦人。（参见[http://api.jqueryui.com/menu](http://api.jqueryui.com/menu)的底部。）

我一直在研究如何在事件发生一段时间后折叠菜单`blur`，但没有一个好的解决方案。

*   该`menublur`事件在每个菜单和菜单项模糊时触发。
*   `blur`为每个子菜单创建一个自定义事件是很糟糕的。

我还能做什么？jQuery UI 菜单似乎不完整，也没有经过深思熟虑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T07:42:48.707

我的策略是为每个事件创建一个计时器，该计时器在触发事件`menublur`时重置。`menufocus`如果我们打开了一个子菜单并且我们将鼠标从整个菜单上移开，最后一个事件将是`menublur`这样，在预定义的时间量之后我们可以折叠菜单。

HTML：

```
<ul id="menu">
    <li><a href="#">Item 1</a></li>
    <li><a href="#">Item 2</a></li>
    <li><a href="#">Item 3</a>
        <ul>
            <li><a href="#">Item 3-1</a></li>
            <li><a href="#">Item 3-2</a></li>
            <li><a href="#">Item 3-3</a></li>
            <li><a href="#">Item 3-4</a></li>
            <li><a href="#">Item 3-5</a></li>
        </ul>
    </li>
    <li><a href="#">Item 4</a></li>
    <li><a href="#">Item 5</a></li>
</ul> 
```

JavaScript：

```
$(document).ready(function() {
    var menu = $('#menu');
    menu.menu();

    var blurTimer;
    var blurTimeAbandoned = 200;  // time in ms for when menu is consider no longer in focus

    menu.on('menufocus', function() {
        clearTimeout(blurTimer);
    });

    menu.on('menublur', function(event) {
        blurTimer = setTimeout(function() {
            menu.menu("collapseAll", null, true );
        }, blurTimeAbandoned);
    });
}); 
```

演示：[jsfiddle](http://jsfiddle.net/cR4EK/) ​</p>

参考：[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout) , [clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)

# r - 在 R 编程神经网络中为 nnet 指定“初始权重”

> ID：13773275
> 
> 赞同：2
> 
> 时间：2012-12-08T00:46:12.560
> 
> 标签：r, neural-network

在 R 编程中，我试图了解如何使用 nnet 让用户指定初始权重而不是默认权重来运行神经网络算法？R 文档提到了以下论点。如何使用权重的任何示例？

```
nnet(formula, data, weights, ...,
subset, na.action, contrasts = NULL) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:43:51.517

自定义重量应具有以下形式：

```
weights <- c(

 BH1, I1H1, I2H1, .., InH1,
 BH2, I1H2, I2H2, .., InH2,
 ...
 BHn, I1Hn, I2Hn, .., InHn,
 BO,
 I1Out, .., InOut) 
```

IE

```
c(
 weights from bias & inputs to 1st hidden unit,
 from bias & inputs to second hidden unit H2,
 from bias & inputs to last hidden unit Hn,
 biast of output unit,
 skip layer weights ( if any)
 ) 
```

问候

PS 请记住将连接到一个单位的所有权重的标准偏差保持在 1.0 以下。否则你会很快得到饱和的单位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T02:13:07.500

查看文档[http://cran.r-project.org/web/packages/nnet/nnet.pdf](http://cran.r-project.org/web/packages/nnet/nnet.pdf)

默认 S3 方法：

```
nnet(x, y, weights, size, Wts, mask,
linout = FALSE, entropy = FALSE, softmax = FALSE,
censored = FALSE, skip = FALSE, rang = .7, decay = ,
maxit = 1 , Hess = FALSE, trace = TRUE, MaxNWts = 1 ,
abstol = 1\. e-4, reltol = 1\. e-8, ...) 
```

**Wts**：初始参数向量。如果丢失随机选择。

所以你必须根据你的网络拓扑定义自己的 Wts，它应该可以工作

# php - 致命错误：ezSQL_mysql 需要编译 mySQL Lib 和/或链接到 PHP 引擎

> ID：13773277
> 
> 赞同：4
> 
> 时间：2012-12-08T00:46:24.280
> 
> 标签：php, mysql, fatal-error, url-shortener, yourls

我正在尝试在运行 Lubuntu 12.04 的基本 Web 服务器上[获取您的链接缩短 PHP 脚本。](http://yourls.org/)

我创建了一个 MySQL 数据库并安装了 PHP5。当我尝试在浏览器中访问 YOURLS 的管理界面时，我看到以下消息：

```
Fatal Error: ezSQL_mysql requires mySQL Lib to be compiled and or linked in to the PHP engine 
```

我对 MySQL 和 PHP 很陌生，所以我不知道如何解决这个问题。你能指出我正确的方向吗？

（有关设置您的快速指南，您可以观看[此视频](http://www.youtube.com/watch?v=vQ8R5CYSITU)以了解总体思路。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:47:29.127

您需要确保 MySQL 扩展已加载到 PHP.ini 中，并且也已编译到 PHP 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-28T17:17:04.133

安装`mysql-devel`和`php-mysqli`打包

`yum install mysql-devel php-mysqli`

名字可能会随着欧内斯特在他的回答中的表现而有所改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T13:49:47.243

如果你已经通过 yum 安装了你的 php server 和 mysql，尝试使用 yum 搜索相关包。

例如，如果您使用“yum install php55”，请尝试“yum search php55”，然后查找“php55-mysqld”之类的内容。如果找到，安装它“yum install php-mysqld”。这将安装 PHP 与您的 mysql 交互所需的模块。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-05T00:10:02.270

安装所有 php 包及其依赖项对我有用。

百胜安装 php-*

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-04-07T18:42:09.487

最后我找到了解决方案，只需`class ezSQL_mysql extends ezSQLcore`在 ez_sql_mysql.php 中更改此行 >

至`class ezSQL_mysqlx extends ezSQLcore`

:)

# windows-phone-8 - Windows Phone 8 SDK 语音命令和快速应用恢复

> ID：13773283
> 
> 赞同：1
> 
> 时间：2012-12-08T00:47:24.303
> 
> 标签：windows-phone-8, text-to-speech

我在将 Fast App Resume 集成到我的 Windows Phone 8 应用程序时遇到问题。当我按住开始按钮并输入语音命令时，如果应用程序已加载，该命令将不会触发 Navigate 事件。当应用程序加载时，我尝试拦截所有可能发生的事件......什么都没有。

有没有人知道如何在代码中处理这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T00:44:18.423

我已经与 Microsoft 确认了这种行为确实是这样，并且这是他们的意图。他们已将反馈留给 Engineering 以供查看，但我们可以通过在 UserVoice 上投票来帮助[它](http://wpdev.uservoice.com/forums/110705-app-platform/suggestions/3506293-fix-voicecommands-so-they-work-whether-the-app-is-)。

# git - 如何搜索 git 日志以更改给定文件？

> ID：13773286
> 
> 赞同：1
> 
> 时间：2012-12-08T00:47:48.167
> 
> 标签：git

当对文件 ABC 进行更改时，如何搜索所有提交以找到那些提交？

假设 /path/to/file 未知。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T04:20:27.057

您正在寻找`git log -- <filename>`

以下将给出在当前目录中更改 ABC 的所有提交的日志：

```
git log -- ABC 
```

如果它在子目录中并且您不确定在哪里，请改用以下内容：

```
git log -- */ABC 
```

即使 ABC 位于多个子目录深处，它也可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T00:55:27.437

使用[git-blame](http://www.kernel.org/pub/software/scm/git/docs/git-blame.html)命令：

```
git blame /path/to/file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T09:25:13.040

如果您只想要提交名称和哈希：

```
git log --pretty=oneline -- /path/to/file 
```

# httprequest - 动态插入“HTTP Request Defaults”值

> ID：13773287
> 
> 赞同：2
> 
> 时间：2012-12-08T00:48:07.723
> 
> 标签：httprequest, jmeter

我正在尝试从命令提示符动态插入“HTTP 请求默认值”值，以便可以针对不同的服务器运行测试。但是，我在测试 GUI 中找不到可以输入`${__P(hostname,www.dummy.org)}`. 它是在“服务器名称或 IP”字段中还是在“路径”字段中？

在[Apache 用户手册](http://jmeter.apache.org/usermanual/test_plan.html#using_variables)中，它说：

> 例如，您可以在测试计划中定义以下内容：
> 
> `HOST www.example.com`
> `THREADS 10`
> `LOOPS 20`
> 
> 您可以在测试计划中参考这些`${HOST}` `${THREADS}`等。如果您以后想更改主机，只需更改`HOST`变量的值即可。这适用于少量测试，但在测试大量不同组合时变得乏味。一种解决方案是使用属性来定义变量的值，例如：
> 
> `HOST ${__P(host,www.example.com)}`
> `THREADS ${__P(threads,10)}`
> `LOOPS ${__P(loops,20)}`
> 
> 然后您可以在命令行上更改部分或全部值，如下所示：
> 
> `jmeter ... -Jhost=www3.example.org -Jloops=13`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:26:42.197

你可以把它放在： 服务器名或IP 但只有主机名。

主机名后的路径必须放在路径字段中

# php - 使用 foreach 在 MySQL 中存储数组项

> ID：13773288
> 
> 赞同：0
> 
> 时间：2012-12-08T00:48:08.163
> 
> 标签：php, mysql

我在数组中有数组，我想遍历嵌套数组的每个项目并将它们放入不同的 mysql 列中。每个数组有 3 个条目的限制，我需要 $workexp_array_t 进入工作经验列， $credentials_array_t 项目进入凭证列等。

我遇到的问题是，使用这些嵌套的 foreach 循环它只是将条目的第一个字母放入列中，而不是正确的条目。如何让每个数组项进入其正确的列？我真的需要为每件事（即教育经验、证书、工作经验等）设置单独的表格吗？

```
 $tutor_background = array($workexp_array_t, $credentials_array_t, $education_array_t, $extra_array_t);

foreach ($tutor_background as $entry) {
    foreach ($entry as $background) {
        $query = "INSERT INTO tutor_background (login_value, work_history, credentials, education_history, extra_skills) VALUES ('{$_SESSION['login_value']}', '{$background[0]}', '{$background[1]}', '{$background[2]}', '{$background[3]}')";
        $process_query = mysql_query($query);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:55:09.427

在这里猜测一下，说你只需要一个 foreach。

```
$tutor_background = array($workexp_array_t, $credentials_array_t, $education_array_t, $extra_array_t);

foreach ($tutor_background as $entry) {
        $query = "INSERT INTO tutor_background (login_value, work_history, credentials, education_history, extra_skills) VALUES ('{$_SESSION['login_value']}', '{$entry[0]}', '{$entry[1]}', '{$entry[2]}', '{$entry[3]}')";
        $process_query = mysql_query($query);
    }
} 
```

# arraylist - 使用 HashMaps 和 ArrayList 的最短路径（使用 BFS）

> ID：13773291
> 
> 赞同：0
> 
> 时间：2012-12-08T00:48:25.457
> 
> 标签：arraylist, hashmap, shortest-path, breadth-first-search

我试图找到寻找朋友的最短路径。如果 X 想连接到 Y，我想打印出朋友的最短路径，以便 X 到达 Y。每次运行代码时，我都会得到 null。

公共无效最短（字符串优先，字符串目标）{

```
 HashMap<String, String> prev = new HashMap<String, String>();
    Queue<PersonNode> q = new LinkedList<PersonNode>();
    PersonNode firstPerson = hash.get(first);

    firstPerson.visited = true;
    prev.put(first, first + " ");
    q.add(firstPerson);

    while(!q.isEmpty()){    
        PersonNode curr = q.remove();

        if(!curr.visited){
            curr.visited = true;
            if(curr.equals(target)){
                break;
            }
            else{
                for(int i =0; i < curr.list.size(); i++){
                    if(curr.list.get(i).visited = false){
                        q.add(curr.list.get(i));
                        curr.list.get(i).visited = true;
                        prev.put(curr.list.get(i).name, prev.get(curr.list.get(i).name) + curr.list.get(i));

                    }
                }

            }
            if(!curr.equals(target)){
                System.out.println("They have no connections");
            }

        }
    }
    System.out.println(prev.get(target));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T11:13:25.717

**尝试调试您的代码**。我看到你设置`firstperson.visited`在`true`循环之外。然后，您将其从队列中弹出并忽略它，因为它是`true`. 在您的循环中也是如此：您将所有访问过的属性设置为 true，这将导致它们在运行时从队列中弹出时被忽略

我还认为“他们没有联系”-部分不应该在 while 循环内

# node.js - Backbone.js Node.js 访问服务器上的模型

> ID：13773296
> 
> 赞同：0
> 
> 时间：2012-12-08T00:49:23.920
> 
> 标签：node.js, backbone.js

带有 Mongoose/Express 的 Backbone.js。

我很难理解如何与服务器上的数据库和模型进行通信。老实说，我不了解模型和服务器的关系。客户端上的模型是否与服务器上的模型同步？服务器上还有模型吗？目前在 MongoDB 中有填充数据，我要做的就是让 fetch() 工作。任何帮助都会很棒。当 Backbone 已经完成所有这些操作时，我试图避免使用 RESTful 调用。

```
// CLIENT
// Lobby.js

(function($){

    var socket = io.connect('http://localhost:3000');

    var App = Backbone.Router.extend({
        routes: {
            '': 'lobby'
        },
        lobby: function () {
            var collection  = new Collection();
            var listView = new MatchListView(collection);

            collection.fetch();

            collection.fetch({success: function(){
                console.log("Fetch Success"); // => 2 (collection have been populated)
            }});
        }
    });

    var Model = Backbone.Model.extend();

    /**
    * Collection - bound to the server 
    * matchListView is listening for event changes
    */
    var Collection = Backbone.Collection.extend({
        url: 'lobby',
        socket:socket,
        model: Model,
        initialize: function(Collection){
            _.bindAll(this, 'addOne', 'removeOne', 'removeOne');

            this.ioBind('createMatch', this.addOne, this);
            this.ioBind('removeMatch', this.removeOne, this);
        },
        addOne: function(data) {
            this.add({id:data._id});
        },
        removeOne: function(data) {
            console.log('remove match ' + data._id);
            this.remove({id:data._id});
        }
    });

    /**
    * View - bount to collection
    * listening for changes to collection 'add' and 'remove'
    */  
    var MatchListView = Backbone.View.extend({
        el: $('body'),
        urlRoot: 'lobby',
        socket:socket,
        events: { 
            'click #create': 'createMatch'
        },    
        initialize: function(Collection){
            _.bindAll(this, 'render', 'renderCollection','addOne', 'removeOne', 'createMatch');

            this.collectionView = Collection;
            this.collectionView.bind('add', this.addOne);
            this.collectionView.bind('remove', this.removeOne);

            this._viewPointers = {}; // make sure we're starting over
            this.render();
        },
        render: function(){
            ...
        }
    });

    $(document).ready(function () 
    {
        //  create a new app and trigger the router.
        window.app = new App();
        Backbone.history.start();
    });

})(jQuery); 
```

上面的页面位于 /lobby。服务器上的 mongoDB 及其架构位于 /mongo

```
//SERVER
// Mongo.js

 /**
* Mongol Database
*/
var mongoose = require('mongoose');
var db = mongoose.createConnection('mongodb://localhost:27017/test');
//var db = mongoose.createConnection('mongodb://nodejitsu_cpiv:es7te3ognihsibnii3a7ekdfu3@ds043927.mongolab.com:43927/nodejitsu_cpiv_nodejitsudb7525674102');
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function callback () 
{
    console.log("connected to database tester");
});

/* ====================
// Lobby 
// =================== */
var schema = mongoose.Schema,
    ObjectId = schema.ObjectId;

var lobbySchema = new schema({
    status:Number,
    sockets: [{ id:String, team:Number}],
    player1:{id:Number},
    player2:{id:Number}
});

// Collection
var Lobby = db.model('lobby', lobbySchema); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:51:09.633

这是一种思考方式。

模型表示具有或多或少一致模式的数据记录（在您的情况下为`status`,`sockets`等）。这些记录规范地存在于您的 MongoDB 中。Mongoose 为您提供了一种方便的方法来创建、查询、更新和从 node.js 中的服务器代码中删除它们。所以在服务器端，数据存在于 MongoDB 中，您定义的 Mongoose 模式和模型是您与数据交互和操作的方式。

在浏览器中，您具有表示数据记录的模型的相同**概念**，但您使用 Backbone 来创建、查询、更新和删除它们。而不是 MongoDB，从浏览器的角度来看，规范数据记录存在于端 REST API 调用的另一端，主干将帮助您创建。

现在，服务器上的 Mongoose 模型到客户端上的 Backbone 模型的映射不是自动的。这只是一个推荐的架构。您必须将代码与 URL 和属性适当地连接起来，以使事情或多或少适当地匹配。有些差异是可以的，比如`bcryptedPassword`在服务器上的用户模型上有一个字段，但从不将该属性发送到浏览器，因为这样做是不必要且不安全的。

关于您的代码摘录的几个要点。

你`fetch()`无缘无故打了两次电话。你也在`this.collectionView.bind('add', this.addOne);`你想要的地方使用`this.collectionView.on('add', this.addOne);`。`bind`用于固定`this`方法的上下文。`on/off`用于注册事件处理程序。

# mysql - 为 mysql 问题生成 ssl 证书

> ID：13773303
> 
> 赞同：0
> 
> 时间：2012-12-08T00:50:27.210
> 
> 标签：mysql, openssl

我正在按照这里的说明 [http://dev.mysql.com/doc/refman/5.6/en/creating-ssl-certs.html](http://dev.mysql.com/doc/refman/5.6/en/creating-ssl-certs.html)

但最后，我得到以下信息

```
[root@thor newcert]# openssl verify -CAfile ca-cert.pem server-cert.pem client-cert.pem
server-cert.pem: /C=GB/ST=Berkshire/L=Newbury/O=My Company Ltd
error 18 at 0 depth lookup:self signed certificate
OK
client-cert.pem: /C=GB/ST=Berkshire/L=Newbury/O=My Company Ltd
error 18 at 0 depth lookup:self signed certificate
OK 
```

我该如何调试呢？我有点困惑，因为几天前按照这些说明操作，我无法让它再次工作。我已经以用户帐户和 root 身份尝试过此操作。

谢谢你。

-缺口

编辑：使用 CentOS 5.7 和 MySQL 5.5.21

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:25:03.257

嗯，这很尴尬。我认为错误是因为我自己创建了密钥。我不知道为什么我以前没有收到错误。

我认为错误是一个问题，因为 mysql 无法读取我的证书。事实证明 SELinux 阻止了 mysql 读取证书。我用它来找出 SELinux [http://wiki.centos.org/HowTos/SELinux](http://wiki.centos.org/HowTos/SELinux)，最后，只是将证书移动到 /var/lib/mysql 的子目录中

# android - 如何从 android.content.Intent 中获取用户的选择（确定，取消）以卸载应用程序

> ID：13773308
> 
> 赞同：3
> 
> 时间：2012-12-08T00:51:18.643
> 
> 标签：android, android-intent

我有一个片段，当他们单击卸载时，它使用意图卸载应用程序。

```
View.OnClickListener removeButtonClick = new View.OnClickListener() {

    @Override
    public void onClick(View paramView) {
        PackageManager pm = ContextProvider.getContext().getPackageManager();
        Intent intent = new Intent(Intent.ACTION_DELETE, Uri.fromParts("package",
                    app.packageName, null));
        int result = 0;
        startActivityForResult(intent, result);
    }
}; 
```

活动完成后，它成功调用：

```
@Override 
public void onActivityResult(int requestCode, int resultCode, Intent data) { 
    new MainActivity.UpdateDatabase().execute(); // update database
    ContextProvider.getContext().getFragmentManager().popBackStack(); // go back
} 
```

但 requestCode 和 resultCode 为 0 并且无论用户是否按下卸载或取消，数据都为空。我怎样才能知道他们选择了什么？

这就是我最终做的事情：

```
@Override 
    public void onActivityResult(int requestCode, int resultCode, Intent data) { 
        Boolean found = false;
        PackageManager pm = ContextProvider.getContext().getPackageManager();
        List<PackageInfo> packages = pm.getInstalledPackages(0);
        for (PackageInfo pi : packages) {
            if (pi.packageName.equals(app.packageName)) {
                found = true;
                break;
            }
        }
        if (!found) { // User uninstalled app so update database and go back
            new MainActivity.UpdateDatabase().execute();                                    
            goBack();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:34:14.140

不知道该怎么做，但是您可以使用包管理器查看包是否仍然存在吗？

# bison - 野牛版本之间的差异

> ID：13773311
> 
> 赞同：1
> 
> 时间：2012-12-08T00:52:10.847
> 
> 标签：bison

我是词法分析和解析器生成的新手，我尝试直接从[wikipedia](http://en.wikipedia.org/wiki/GNU_bison)编译野牛示例开始。这是一个可重入解析器的示例。

我尝试使用 2 个版本的野牛进行编译：2.5 和 2.6.5。前者编译和执行完美，但后者包括`yyscan_t`在词法分析器头（Lexer.h）中声明的解析器头中的类型（我猜这是可重入功能所必需的）。因此它不会编译`Parser.c`生成`Parser.y`

这是 2.6.5 中生成的额外部分，`Parser.h`而 2.5 中不存在：

```
#ifdef YYPARSE_PARAM
#if defined __STDC__ || defined __cplusplus
int yyparse (void *YYPARSE_PARAM);
#else
int yyparse ();
#endif
#else /* ! YYPARSE_PARAM */
#if defined __STDC__ || defined __cplusplus
int yyparse (SExpression **expression, yyscan_t scanner); // this line
#else
int yyparse ();
#endif
#endif /* ! YYPARSE_PARAM */ 
```

我已经标记了导致问题的行。有什么想法吗？

编辑：我需要做的是确保`yyscan_t`在野牛生成的头文件中声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:48:46.173

实际上，自 2.6 以来的 bison 将前面提到的代码块插入到标题部分中。

您需要通过将 %code {...}（或 %{...%}）部分的一部分移动到新代码中来告诉野牛在此块之前插入 yyparse 函数参数的所有声明带有标签“需要”的部分，以便将其插入到标题的顶部，在您的 yy 文件中：

```
%code requires {
typedef void*                 yyscan_t;
} 
```

请参阅野牛压裂手册：

[http://www.gnu.org/software/bison/manual/html_node/_0025code-Summary.html](http://www.gnu.org/software/bison/manual/html_node/_0025code-Summary.html)

[http://www.gnu.org/software/bison/manual/html_node/Prologue-Alternatives.html#Prologue-Alternatives](http://www.gnu.org/software/bison/manual/html_node/Prologue-Alternatives.html#Prologue-Alternatives)

希望有帮助

# excel - 如何将一列中的日期与另一列同一行中的单元格进行比较？

> ID：13773312
> 
> 赞同：0
> 
> 时间：2012-12-08T00:52:15.480
> 
> 标签：excel, vba

我觉得这应该是一个足够简单的任务，但我对 Excel VBA 的经验不足，不知道如何处理它。基本上我想连续查看两个单元格，如果它们都有特定的日期，则做一些事情。这两个单元格将始终位于两个特定列之一中。

例如，如果 D2 和 I2 中的日期都早于 11 月，那么我想对该行执行某些操作并移至下一行。然后，如果 D3 和 I3 中的日期都早于 11 月，那么我想对该行做一些事情并移动到下一行。等等等等...

我的问题不在于如何完成所有步骤。这真的是关于如何进行比较。我知道如何通过执行以下操作仅选择这两列中的单元格：

```
Union(Range(Cells(2, 4), Cells(Rows.Count, 4).End(xlUp)), _
    Range(Cells(2, 9), Cells(Rows.Count, 9).End(xlUp))).Select 
```

但后来我突然想到，我不知道如何比较两列的各个单元格。我只知道如何遍历*一*列的每个单元格。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:20:31.850

只是循环遍历 1 列，然后使用该`Offset`方法进行比较怎么样。

检查这个：

```
Option Explicit

Sub CheckTwoCols()

Dim wks As Worksheet, lastrow As Long, rng As Range, cel as Range

Set wks = Sheets(1) 'change sheet reference to suit your needs

With wks

    lastrow = .Range("D" & .Rows.Count).End(xlup).Row

    Set rng = .Range("D2:D" & lastrow)

    For each cel in rng

        'column I is 5 columns to the right of column D
        If cel < "11/1/2012" and cel.offset(,5)  < "11/1/2012" Then

             'process code

        End If 

   Next

End With

End Sub 
```

# java - Java paintComponent 无缘无故地绘制顶部 GUI 面板的副本

> ID：13773315
> 
> 赞同：2
> 
> 时间：2012-12-08T00:52:28.943
> 
> 标签：java, swing, paintcomponent

我正在使用 Java 开发一个简单的绘画应用程序，但 Swing 不想合作。起初我尝试制作一个包含`DrawArea`设置面板的 JTabbedPane，但由于某些奇怪的原因，第二个`mouseDragged()`（以及通过扩展 drawArea.repaint() 方法）被触发，JTabbedPane 似乎重复了。想象一下垂直堆叠的两个相同的选项卡窗格。我认为这只是 JTabbedPane 中的一些错误，但我使用面板上的 JButtons 将所有内容重写为一个非常简单的自定义菜单，并且发生了完全相同的事情。这不像 GUI 实际上复制了顶部区域；它无法使用，我可以在上面画画。看看这个： ![在此处输入图像描述](../Images/99f4f29d8bdc4c6e2218fedad66a5ee1.png)

编辑：我发现了一个[类似的问题](https://stackoverflow.com/questions/13358658/paintcomponent-draws-other-components-on-top-of-my-drawing?rq=1)。如果我调用 super.paintComponent(g)，问题就会消失（并且 drawArea.setBackground(color) 确实有效！）但是调用的函数`super`（对我来说是一个新关键字）基本上会重新绘制 drawArea，因此不再保存绘制轨迹.

如果我绘制一个矩形来填充 drawArea 它会覆盖问题，即使 mouseDragged 仍然被触发。这是渲染代码：

```
@Override
public void mouseDragged(MouseEvent e) {
    x = e.getX(); y = e.getY();
    drawArea.repaint();
}

// (subclass):
class DrawArea extends JPanel {
    public void paintComponent(Graphics g) {
        g.setColor(Color.WHITE);
        g.fillOval(x-3, y-3, 7, 7);
    }
} 
```

这是 GUI 代码：

```
 frame = new JFrame("Jadra");
    frame.setSize(650, 600);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setResizable(false);
    menu = new JPanel();

    settingsButton = new JButton("Settings");
    clearButton = new JButton("Clear");
    exitButton = new JButton("Quit");

    menu.setLayout(new FlowLayout());
    menu.add(settingsButton);
    menu.add(clearButton);
    menu.add(exitButton);
    menu.setBackground(new Color(30, 90, 60));

    drawArea = new DrawArea();
    drawArea.setBackground(Color.red);
    drawArea.setOpaque(true);
    drawArea.addMouseMotionListener(this);

    frame.getContentPane().add(menu, BorderLayout.NORTH);
    frame.getContentPane().add(drawArea, BorderLayout.CENTER);

    Thread pt = new Thread(new Painter());
    frame.setVisible(true);
    pt.start(); 
```

请告诉我我做了一件非常愚蠢的事情。否则这看起来像一个非常烦人的错误。我真的很感谢你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:02:58.247

您的`DrawPanel.paintComponent()`方法应该向上链接到它所覆盖的方法，`JPanel`以允许发生默认绘制。只需添加

```
super.paintComponent(g); 
```

作为此方法的第一行。

# android - Android 相对布局对齐组件

> ID：13773323
> 
> 赞同：2
> 
> 时间：2012-12-08T00:53:39.840
> 
> 标签：android, android-layout, android-relativelayout

嗨，我遇到了 android 相对布局设计的问题。我只是无法将 4 个按钮放在一个居中的按钮周围。请参阅下面的 XML 作为示例。控件几乎是不言自明的。

谢谢大家的帮助。

### 布局 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main_test_wholeLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:gravity="center_horizontal"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/main_test_relativeLayoutMenu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@drawable/main_panel_a"
    android:gravity="center" >

    <ImageButton
        android:id="@+id/center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/more_baby_call" />

    <ImageButton
        android:id="@+id/top"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/center"
        android:src="@drawable/more_baby_call" />

    <ImageButton
        android:id="@+id/bottom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/center"
        android:src="@drawable/more_baby_call" />

    <ImageButton
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/center"
        android:src="@drawable/more_baby_call" />

    <ImageButton
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/center"
        android:src="@drawable/more_baby_call" />

</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T12:00:34.307

尝试设置：

android:layout_centerHorizo​​ntal="true" android:layout_centerVertical="true"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T01:38:14.820

不要使用相对布局的重力而是将其用于中心 ImageButton

```
android:centerInParent = "true" 
```

我希望它会工作

# java - 在一行中增加 X Mod N

> ID：13773324
> 
> 赞同：5
> 
> 时间：2012-12-08T00:53:47.730
> 
> 标签：java, c

我有几个小程序需要在整数集**Z** sub n 上无限循环。我经常在这个庄园里写代码：

```
int x = 0;
int n = 13; //or some other prime
while(1) {
  //do stuff dependent on x
  ++x;
  x %= n;
} 
```

我主要用 C/C++ 和 Java 编写代码，所以我想知道：

有没有办法在一行中增加 x mod n 而不是在任何一种语言中增加两个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T00:56:32.313

```
x = (x + 1) % n; 
```

不足为奇。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T01:08:02.900

你有没有考虑过：

```
x = (x + 1 == n ? 0: x + 1); 
```

有可能`x + 1`会针对一条指令进行优化，并且至少可以保证您永远不会使用除法（当`%`涉及到时，一个糟糕的优化器可能会使用它）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-08T01:05:37.637

另一种选择是这个

```
x = ++x % n;  // Java 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-28T18:59:01.503

`if (++x == n) x = 0;`

使用`x = (x + 1 == n ? 0 : x + 1);`需要两个加法：一个用于比较，另一个用于将 的值`x`设置为`x + 1`。

# http-status-code-503 - Google Groups Migration API 提供 503“后端错误”

> ID：13773328
> 
> 赞同：1
> 
> 时间：2012-12-08T00:54:38.050
> 
> 标签：http-status-code-503, google-groups-api, google-groups-migration

从 Group Migration API 的 Insert 方法 (https://developers.google.com/google-apps/groups-migration/v1/reference/archive/insert) 获取以下 503 响应。

我只是在尝试使用示例有效负载来解决峰值问题——尽管如果我摆弄 POST，我会得到 401 或 404 错误；无法创建 400 错误。有其他人成功使用此 API 吗？服务是否存在临时服务问题？

谢谢！克里斯

要求：

```
POST https://www.googleapis.com/upload/groups/v1/groups/testmaspa@googlegroups.com/archive?    uploadType=media HTTP/1.1
Content-Type: message/rfc822
Authorization: Bearer blah...
Host: www.googleapis.com
Content-Length: 470
Expect: 100-continue

Received: by 10.143.160.15 with HTTP; Mon, 16 Jul 2007 10:12:26 -0700 (PDT)
Message-ID: NNNN@mail.samplegroup.com
Date: Mon, 16 Jul 2007 10:12:26 -0700
From: "chris@mnaspa.org"
To: "chris@mnaspa.org"
Subject: TEST SUBJECT
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Delivered-To: testmaspa@googlegroups.com
This is the body of the migrated email message.  Booyah! 
```

回复：

```
HTTP/1.1 503 Service Unavailable
Server: HTTP Upload Server Built on Dec 3 2012 11:16:02 (1354562162)
Content-Type: application/json
Date: Sat, 08 Dec 2012 00:36:53 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 177

{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "backendError",
    "message": "Backend Error"
   }
  ],
  "code": 503,
  "message": "Backend Error"
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:12:57.293

503 是超额配额，通常......最近发生了很多......可能是由于 Group Settings API 的一些新增内容？我们增加了配额，但仍然收到 500 个错误。

我们有一张票，它已被确认为一个问题，正在调查中。一些稳定性已经恢复，但对我们来说仍然是一个大问题。

我们的每日配额限制请求尚未增加，但可能每周都会审核这些请求。

最好的问候，大卫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T10:41:14.933

您应该将 Message-ID 从 NNNN@mail.samplegroup.com 更改为 <NNNN@mail.samplegroup.com>

另请参阅[Google Groups Migration C# API Not Working](https://stackoverflow.com/questions/14709495/google-groups-migration-c-sharp-api-not-working/21574683#21574683)。

# javascript - mousedown div 包含到父级（最新）

> ID：13773331
> 
> 赞同：2
> 
> 时间：2012-12-08T00:55:40.027
> 
> 标签：javascript, jquery

我的内部 div 假设在 mousemove 上用鼠标光标移动，但如果它使用 isDragging 变量拖动，我希望它在 if 语句处停止，因此它会顺利拖动，但它似乎不会停止任何建议和帮助将不胜感激更新：[jsFiddle](http://jsfiddle.net/pPn3v/47/)

```
var yellow = $('#yellow');
var offset = yellow.offset();
var offsetWidth = offset.left + yellow.width();
var offsetHeight = offset.top + yellow.height();
var isDragging = false;

var red = $('#red');

$('#red').hide();

yellow.on('mousedown', function(event) {    
    $('#red').show();  
});
yellow.on('mouseup', function(event) {
    $('#red').hide();        
});
yellow.on('mousemove', function (e) {

    if(e.pageX > offset.left + ($(red).width() / 2) && e.pageX < offsetWidth - ($(red).width() / 2)
        && e.pageY > offset.top + ($(red).height() / 2) && e.pageY < offsetHeight - ($(red).height() / 2) && !isDragging ){
        red.css("left", e.pageX - $(red).width() / 2 );
        red.css("top", e.pageY - $(red).height() / 2);
    }

    $('#red').draggable(
        {'containment':'#yellow',
         start:function(event, ui) {
            isDragging = true;
        },
        drag:function(event, ui) {
            isDragging = true;
        },stop:function(event, ui) {
            isDragging = false;
        }
    });
});

<div id="yellow">
    <div id="red"></div>
</div>

    #yellow {
position: absolute;    
width: 250px; 
height: 250px; 
background-color: Yellow; 
}

#red {
position: absolute;
width: 100px; 
height: 100px; 
background-color: red; 
z-index: 100; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:30:43.587

我不能说我为这个解决方案感到自豪，但它似乎完成了任务：

[http://jsfiddle.net/pPn3v/42/](http://jsfiddle.net/pPn3v/42/)

```
var yellow = $('#yellow');
var offset = yellow.offset();
var offsetWidth = offset.left + yellow.width();
var offsetHeight = offset.top + yellow.height();

var red = $('#red');

yellow.on('mousemove', function (e) {
    if(e.pageX+red.width() < offsetWidth
      && e.pageY+red.height() < offsetHeight){
        red.css("left", e.pageX);
        red.css("top", e.pageY);
    }
});

red.on('mousemove', function (e) {
    if(e.pageX+red.width() < offsetWidth
      && e.pageY+red.height() < offsetHeight){
        red.css("left", e.pageX);
        red.css("top", e.pageY);  
    }               
}); 
```

# python - 用于解析空格分隔文件的 Python 库

> ID：13773332
> 
> 赞同：1
> 
> 时间：2012-12-08T00:55:43.670
> 
> 标签：python

> **可能重复：**
> [在 Python 中解析固定宽度文件的有效方法](https://stackoverflow.com/questions/4914008/efficient-way-of-parsing-fixed-width-files-in-python)

甚至不确定“空格分隔”是否真的是正确的术语（这可能是阻碍我搜索工作的原因）。基本上，字段 X 从字符 0 开始，字段 Y 从字符 30 开始。很确定这是我们的一个系统仍在使用的古老文件格式。我可以轻松推出自己的解决方案，但如果存在，我宁愿使用现有的库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:03:22.733

这个问题看起来和你的很相似。看起来他们对哪些模块最有用有一些建议：

[如何有效地解析固定宽度的文件？](https://stackoverflow.com/questions/4914008/efficient-way-of-parsing-fixed-width-files-in-python)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T01:03:28.697

```
with open('myfile.txt') as f:
  for line in f.readlines():
    x, y = line[:28], line[29:] 
```

`x, y`应该将每行的参数分开。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-08T01:03:17.693

子类[csv.Dialect](http://docs.python.org/2/library/csv.html#csv-fmt-params)如下：

```
import csv

class SpaceCsv(csv.Dialect):
    "csv format for exporting tables"
    delimiter = None
    doublequote = True
    escapechar = None
    lineterminator = '\n'
    quotechar = '"'
    skipinitialspace = True
    quoting = csv.QUOTE_MINIMAL
csv.register_dialect('space', SpaceCsv) 
```

然后将其用作`csv.reader(filename, dialect="space")`. 让我知道你是怎么办的...

# .net - 导航属性“SenderId”不是“对话”类型的声明属性

> ID：13773334
> 
> 赞同：5
> 
> 时间：2012-12-08T00:56:29.713
> 
> 标签：.net, entity-framework, ef-code-first, database-migration, entity-framework-migrations

当我尝试执行 Update-Database 时，出现此错误：

> 导航属性“SenderId”不是“对话”类型的声明属性。验证它没有被明确地从模型中排除，并且它是一个有效的导航属性。

**编辑**

我认为问题在于对话和用户之间的映射关系，因为对话和用户有两个一对多的关系，即对话有两个指向用户的外键

以下是用户和对话的连接方式：

用户：

```
public class User
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid UserId { get; set; }

    public virtual ICollection<Conversation> ConversationSenders { get; set; }
    public virtual ICollection<Conversation> ConversationRecievers { get; set; } 
```

对话：

```
public class Conversation
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    public Guid ConversationId { get; set; }

    [ForeignKey("SenderId")]
    public Guid SenderId { get; set; }

    [ForeignKey("RecieverId")]
    public Guid RecieverId { get; set; }

    [InverseProperty("ConversationSenders")]
    public virtual User Sender { get; set; }

    [InverseProperty("ConversationRecievers")]
    public virtual User Reciever { get; set; }

} 
```

这是完整的代码：

用户：

```
public class User
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid UserId { get; set; }

    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid CollegeId { get; set; }

    public int RoleId { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [Required]
    [DataType(DataType.Password)]
    public string Password { get; set; }

    [Required]
    public string Name { get; set; }

    [Required]
    public string Surname { get; set; }

    public string Gender { get; set; }

    //role

    public DateTime? DateOfBirth { get; set; }

    public string ImageURL { get; set; }

    [ForeignKey("CollegeId")]
    public virtual College College { get; set; }

    [ForeignKey("RoleId")]
    public virtual UserRole UserRole { get; set; }

    public virtual ICollection<Advert> Adverts { get; set; }
    public virtual ICollection<Competition> Competitions { get; set; }
    public virtual ICollection<Message> Messages { get; set; }
    public virtual ICollection<Conversation> ConversationSenders { get; set; }
    public virtual ICollection<Conversation> ConversationRecievers { get; set; }
    public virtual ICollection<UserOS> UserOses { get; set; } 
```

对话：

```
public class Conversation
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid ConversationId { get; set; }

    [ForeignKey("SenderId")]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid SenderId { get; set; }

    [ForeignKey("RecieverId")]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid RecieverId { get; set; }

    [InverseProperty("ConversationSenders")]
    public virtual User Sender { get; set; }

    [InverseProperty("ConversationRecievers")]
    public virtual User Reciever { get; set; }

    public virtual ICollection<Message> Messages { get; set; }
} 
```

信息

```
 public class Message
{
    [Key]
    [HiddenInput(DisplayValue = false)]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid MessageId { get; set; }

    [HiddenInput(DisplayValue = false)]
    public Guid UserId { get; set; }

    [HiddenInput(DisplayValue = false)]
    public Guid ConversationId { get; set; }

    public string Text { get; set; }

    public bool? IsSeen { get; set; }

    [ForeignKey("UserId")]
    public virtual User ConversationSender { get; set; }

    [ForeignKey("ConversationId")]
    public virtual Conversation Conversation { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T13:52:40.190

最后我找到了解决方案，愚蠢的错误。在保护中应该是

```
 [ForeignKey("Sender"), Column(Order = 0)]

    public Guid SenderId { get; set; }

    [ForeignKey("Receiver"), Column(Order = 1)]

    public Guid ReceiverId { get; set; } 
```

并不是

```
[ForeignKey("SenderId"), Column(Order = 0)]
[ForeignKey("ReceiverId"), Column(Order = 1)] 
```

之后我收到错误：

“在表 'Conversations' 上引入 FOREIGN KEY 约束 'FK_dbo.Conversations_dbo.Users_ReceiverId' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。参见前面错误。”

解决方案是：在 DbContext 中这段代码：

```
 modelBuilder.Entity<Conversation>()
           .HasRequired(s => s.Sender)
           .WithMany(s => s.ConversationSenders)
           .HasForeignKey(s => s.SenderId)
           .WillCascadeOnDelete(false);

        modelBuilder.Entity<Conversation>()
            .HasRequired(r => r.Receiver)
            .WithMany(r => r.ConversationReceivers)
            .HasForeignKey(r => r.ReceiverId)
            .WillCascadeOnDelete(false); 
```

我已经测试过了，现在一切正常=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:25:35.003

```
[ForeignKey("SenderId")]
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid SenderId { get; set; }

[ForeignKey("RecieverId")]
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid RecieverId { get; set; } 
```

这两行错误地标有 `[DatabaseGenerated(DatabaseGeneratedOption.Identity)]`属性。从属性中删除这两个属性。更正的版本应该是：

```
[ForeignKey("User")]    
public Guid SenderId { get; set; }

[ForeignKey("User")]   
public Guid RecieverId { get; set; } 
```

# objective-c - 启动模式视图控制器来解决标签栏和导航 VC 的方向“锁定”问题？

> ID：13773335
> 
> 赞同：0
> 
> 时间：2012-12-08T00:56:31.300
> 
> 标签：objective-c, ios, uitabbarcontroller, orientation

我有一个 iPhone 应用程序，其根视图控制器 (VC) 为 UITabBarController（设置为纵向），带有多个选项卡，其中一个是简单的 UIViewController。在那个 UIViewController 中是一个按钮 - “播放视频”，单击它会打开视频的模态视图（并自动开始播放视频）。视频视图是 UIViewController 中的 UIWebView。我一直试图让 Web View 的 VC 将方向更改为横向，但没有任何运气。

我环顾四周并了解到，如果您有一个标签栏或导航控制器，所有子 VC 将与父级具有相同的方向 - 这是有道理的。这就是我制作 web 视图的 VC 模式的原因，希望这是一种解决方向问题的方法。

我的问题是：这是否准确 - 使用模式不需要 Web 视图 VC 是纵向的并且可以响应 shouldAutorotateToInterfaceOrientation 方法（即使我还不能让它工作）？

顺便说一句，使用 iOS 6。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:05:06.377

试试这个。只需在摘要屏幕中设置肖像，然后在应用程序委托中，实现此：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
    return UIInterfaceOrientationMaskAll;
} 
```

在标签栏控制器中（并且没有其他旋转代码）：

```
-(BOOL)shouldAutorotate {
    return NO;
} 
```

最后，在模态视图控制器中：

```
-(BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T02:51:25.623

显然在 ios6 及更高版本中，旋转的工作方式是不同的。所以你要做的是以下

1.  在您的 .plist 中支持所有 4 个方向。
2.  子类化 UITabBarController（例如：CustomTabBarController）
3.  在 CustomTabBarController 中放入以下代码行

    ```
    -(NSUInteger)supportedInterfaceOrientations
    {
        return UIInterfaceOrientationMaskPortrait;
    }

    - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
    {
        return UIInterfaceOrientationPortrait;
    } 
    ```

4.  在您的应用程序委托或您正在初始化 UITabBarController 的任何地方，将这些实例替换为 CustomTabBarController 实例。

5.  在您的模态控制器中放置线条

    ```
    - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
     {
        return UIInterfaceOrientationLandscapeLeft;
    }

    -(BOOL)shouldAutorotate{
        return NO;

    } 
    ```

这一切都应该奏效。

显然，我发现的诀窍是，UITabBarController 不会听你的指令。它将支持您在 .plist 中提到的所有方向。

因此，您必须对其进行子类化。

我尝试执行上述所有操作，并且效果很好。请让我知道，如果您愿意，我可以将代码发送给您。

# php - 倒数计时器从客户端机器获取时间，需要服务器时间

> ID：13773337
> 
> 赞同：0
> 
> 时间：2012-12-08T00:56:33.173
> 
> 标签：php, javascript

我正在使用这个 javascript 代码来计算当前时间和目标时间之间的差异。

计数器工作正常，但根据客户端时间，而不是服务器端时间。

这是我正在使用的代码：

```
 function StartCountDown(myDiv,myTargetDate)
{
var dthen   = new Date(myTargetDate);
var dnow    = new Date();
ddiff       = new Date(dthen-dnow);
gsecs       = Math.floor(ddiff.valueOf()/1000);
CountBack(myDiv,gsecs);
} 
```

如何获取服务器时间，而不是客户端本地机器时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:00:17.420

您可以将时间作为 php 函数回显到您的脚本

```
var time = "<?php echo date('Y-m-d H:i:s')?>"; 
```

或您喜欢的任何日期/时间格式。但是当然这只会在页面首次加载时获得服务器时间。[您可以尝试像这里这样的方法： http](http://www.roseindia.net/ajax/jquery/jqueryservertime.shtml) ://www.roseindia.net/ajax/jquery/jqueryservertime.shtml使用 ajax 将时间加载到您的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:01:04.913

好吧，您需要做的就是从 php 打印 javascript 标记中服务器的当前时间...将该时间设置为您的日期“dthen”变量...这里是：

```
<?php 
print '<script type="text/javascript">var dthen = '.time().';</script>';
?>
//Then your code in another script tag 
```

# xaml - 数据绑定到 ComboBox c++/cx XAML Metro 应用程序时 SelectedValue、SelectedIndex 的问题

> ID：13773338
> 
> 赞同：2
> 
> 时间：2012-12-08T00:56:36.113
> 
> 标签：xaml, data-binding, combobox, microsoft-metro, c++-cx

如何在以下代码中使用 ComboBox 的选定元素的值？

C++：

```
namespace testtesttest
{
[Windows::UI::Xaml::Data::Bindable]
public ref class Wrapper sealed : Windows::UI::Xaml::Data::INotifyPropertyChanged
{
public:
    Wrapper()
    {
        // the index of the selected element of the combobox when the application starts
        m_selectedElement = 2;

        m_myStringArray = ref new Platform::Collections::Vector<int>(3);
        // 1, 2, and 4 in the combobox list
        m_myStringArray->SetAt(0,1);
        m_myStringArray->SetAt(1,2);
        m_myStringArray->SetAt(2,4);
    }

    virtual event Windows::UI::Xaml::Data::PropertyChangedEventHandler^ PropertyChanged;

    property Windows::Foundation::Collections::IVector<int>^ MyStringArray
    {
        Windows::Foundation::Collections::IVector<int>^ get() { return m_myStringArray; }
    }

    property int SelectedElement
    {
        int get() { return m_selectedElement; }
        void set(int value) { m_selectedElement = value; RaisePropertyChanged("SelectedElement"); }
    }
protected:
    void RaisePropertyChanged(Platform::String^ propertyName)
    {
        PropertyChanged(this, ref new Windows::UI::Xaml::Data::PropertyChangedEventArgs(propertyName));
    }
private:
    Platform::Collections::Vector<int>^ m_myStringArray;
    int m_selectedElement;
};
} 
```

XAML：

```
<TextBlock HorizontalAlignment="Left" 
           Height="73" Margin="50,436,0,0" 
           TextWrapping="Wrap" 
           Text="{Binding Path=SelectedElement}" 
           VerticalAlignment="Top" 
           Width="200"/>
<ComboBox ItemsSource="{Binding Path=MyStringArray}" 
          SelectedIndex="{Binding Path=SelectedElement}"  
          HorizontalAlignment="Left" 
          Height="50" Margin="369,50,0,0" 
          VerticalAlignment="Top" Width="286"/> 
```

我测试了其他绑定并且它们有效。我正在正确设置 DataContext。构造函数中的 m_selectedElement = 2 将组合框中的选定元素设置为列表中的第 3 个。SelectedElement 属性的 get() 方法被调用，但 set() 方法不被调用。我通过放置断点来检查这一点。我究竟做错了什么？

此外，是否可以将 Platform::Array^ 绑定到 ComboBox？我尝试使用 Platform::Array < Platform::String ^>^ 和 Platform::Array < int>^ ，但我无法让它工作。STL 容器也不起作用。可以绑定到组合框的其他可能容器是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:33:02.960

改变

```
SelectedIndex="{Binding Path=SelectedElement}" 
```

至

```
SelectedIndex="{Binding Path=SelectedElement, Mode=TwoWay}" 
```

如果您希望 UI 更新您的 ViewModel，则需要双向绑定。

您只能在绑定中使用 WinRT 组件（引用类/结构、枚举类）。使用 Platform::Collections::Vector 在用于绑定时通常是正确的选择，尤其是因为它还实现了 IObservableVector。STL 容器不起作用，因为它们不能通过 ABI。

# c# - 通过 IList 中的多个对象“层”进行 LINQ 查询？

> ID：13773339
> 
> 赞同：1
> 
> 时间：2012-12-08T00:56:46.230
> 
> 标签：c#, linq

我有一个`List<Category>`地方`Category`是：

```
public class Category {
    public List<Category> Categories { get; set; } // this holds sub-categories
    public string Name { get; set; }
    public string Icon { get; set; }
    public string Id { get; set; }
} 
```

由于`Categories`它本身是另一个`List<Category>`，因此它可以包含子类别，而这些子类别可以包含子类别，依此类推......

我知道我可以像这样查询第一个“层”：

```
Categories.Where(x => x.Categories.Any(c => c.Id == id)).FirstOrDefault(); 
```

如何有效地查询对象树中的特定层`Category`，`Id`可能是 3,4 或 5 层（最多有 3 层，但我想知道将来参考）？

**编辑**

`Category`此外，如果我只有`Id`3 层深的子类别，我怎么能得到整个对象树，一直到顶层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:38:47.377

您可以编写如下扩展方法来展平`Category`为`IEnumerable<Category>`：

```
public static IEnumerable<Category> Flatten(this Category category)
{
    if (category.Categories != null)
    {
        foreach (var sub in category.Categories)
        {
            foreach (var subSub in sub.Flatten())
                yield return subSub;
        }
    }
    yield return category;
} 
```

然后，您可以随意使用 Linq `IEnumerable<Category>`：

```
var filtered = categoryList.SelectMany(x => x.Flatten())
                           .Where(x => x.Id == id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:40:37.503

这将递归地遍历类别，直到找到与传递的 id 匹配的类别（如果有）。将返回找到的类别的完整路径（即像面包屑菜单一样）：

```
static IEnumerable<Category> GetById(IEnumerable<Category> categories, string id)
{
    if (categories == null || !categories.Any())
        yield break;

    Category result = categories.FirstOrDefault(c => c.Id == id);
    if (result != null)
    {
        yield return result;
        yield break;
    }

    foreach (var category in categories)
    {
        var subCategories = GetById(category.Categories, id);
        if (subCategories.Any()) // we have found the category
        {
            yield return category; // return current category first

            foreach (var subCategory in subCategories)                    
                yield return subCategory;                   

            yield break; // don't search in other categories
        }
    }
} 
```

用法：

```
IEnumerable<Category> result = GetById(categories, id);
// Food > Beer > Kilkenny
string breadcrumbs = String.Join(" > ", result.Select(c => c.Name).ToArray()); 
```

如果您愿意，可以将此方法转换为扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T01:08:43.197

如果您有一个不确定的嵌套级别，您将需要递归`Categories`，即使您有一个固定的嵌套级别，对于任何超过 2-3 级的嵌套级别，都值得递归。

Linq 并没有真正表达递归的方法，尽管这篇文章谈到了使用 Linq2Xml 特性来实现它：[Expressing recursion in LINQ](https://stackoverflow.com/questions/732281/expressing-recursion-in-linq)

如果您能够修改类本身，则可以实现一个`GetChildById`-style 方法来递归地扫描 child `Categories`。

# java - main方法抛出异常是什么意思？

> ID：13773340
> 
> 赞同：34
> 
> 时间：2012-12-08T00:56:46.753
> 
> 标签：java, exception

我正在复习我为明天早上的期末考试做的期中考试。我把这个问题弄错了，但没有指出正确的答案，我忽略了向教授询问。

考虑以下代码片段：

```
public static void main(String[] args) throws FileNotFoundException 
```

下列关于此代码的陈述哪项是正确的？

1.  main 方法旨在捕获和处理所有类型的异常。
2.  main 方法旨在捕获和处理`FileNotFoundException`.
3.  如果发生这种情况，主方法应该简单地终止`FileNotFoundException`。
4.  如果发生任何异常，主方法应该简单地终止。

我选择了第二个选项。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-08T01:05:15.633

答案是4号，

> 4.- 如果发生任何异常，主方法应该简单地终止。

throws 子句仅声明该方法抛出一个检查过的 FileNotFoundException 并且调用方法应该捕获或重新抛出它。如果在 main 方法中抛出（而不是捕获）未经检查的异常，它也会终止。

检查这个测试：

```
public class ExceptionThrownTest {

    @Test
    public void testingExceptions() {

        try {
            ExceptionThrownTest.main(new String[] {});
        } catch (Throwable e) {
            assertTrue(e instanceof RuntimeException);
        }

    }

    public static void main(String[] args) throws FileNotFoundException {

        dangerousMethod();

        // Won't be executed because RuntimeException thrown
        unreachableMethod();

    }

    private static void dangerousMethod() {
        throw new RuntimeException();
    }

    private static void unreachableMethod() {
        System.out.println("Won't execute");
    }
} 
```

正如你所看到的，如果我抛出一个`RuntimeException`方法将终止，即使抛出的异常不是`FileNotFoundException`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-05T02:27:43.260

伙计，有点晚了，但答案是 3 号。

数字 1 是假的，因为它没有处理 FileNotFoundException

出于同样的原因，数字 2 是错误的。

第 3 条是真的。如果抛出 FileNotFoundException，主方法将终止。

4 号是假的。如果出现任何异常，它不会终止。它只会在未经检查的异常或 FileNotFoundException 的情况下终止。如果在 'throws' 子句中没有声明其他检查异常，则表示它们正在方法中处理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-24T12:00:55.123

main 方法没有捕获任何异常，而是`FileNotFoundException`通过将其抛出到调用 main 方法的源来处理异常。

系统运行时启动 JVM 类，JVM 类中的一个特定类调用 main 方法。

在这种情况下，主要方法的处理`throws`由 JVM 类决定。

*   您可以在Oracle 提供的[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se5.0/html/execution.html#44459)中了解它。
*   此外，您可以查看一些可用的 JVM 的源代码，尽管走这条路会带您去其他编程语言[OpenJdk](http://openjdk.java.net/groups/hotspot/)。

我想在那个话题上分享我小小的谦虚的研究外壳，希望它对好奇的人有所帮助:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-13T13:54:39.740

我同意其他一些答案，即问题的正确答案是选项 3。选项 4 说：

> 4.  如果发生任何异常，主方法应该简单地终止。

请注意此选项中的“任何”。这是发生异常`main()`但未终止的代码示例：

```
public static void main(String[] args) throws FileNotFoundException {
    try {
        methodThatThrowsACheckedException();
    } catch (SomeCheckedException e) {
        // do something to handle this exception
    }
} 
```

在此代码中发生异常，但该方法不会终止，因为它已设置为处理此异常。如果异常是未捕获的`UncheckedException`，那么该方法当然会终止。但是，选项 4 的要点是，任何反例都会使其无效，因为它说发生了“任何”异常。

但是，选项 3 将这种终止限制为仅在引发方法签名中的异常时发生：

> 3.  如果发生这种情况，主方法应该简单地终止`FileNotFoundException`。

选项 3 更有意义的原因是因为如下代码在实践中没有意义：

```
public static void main(String[] args) throws FileNotFoundException {
    try {
        methodThatThrowsFileNotFoundException();
    } catch (FileNotFoundException e) {
        // do something to handle this exception
    }
} 
```

声明一个方法抛出异常没有多大意义，但在方法中捕获该异常（除非，也许，你在做某事后重新抛出它，在这种情况下，选项 3 仍然成立，因为方法最终终止）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-13T18:18:24.237

仅凭 的声明`main()`，不可能说哪个答案是客观正确的。根据方法的定义，任何陈述都可能是真的。

> 1.  main 方法旨在捕获和处理所有类型的异常。
>     
>     
> 2.  main 方法旨在捕获和处理`FileNotFoundException`.

上述两种说法都适用于以下情况：

```
public static void main(String[] args) throws FileNotFoundException {
    while (true) {
        try {
            doSomething();
        }
        catch (Exception e) {}
    }
} 
```

声明的异常不会被 抛出`main()`，但这不是错误；只是毫无意义和误导。

> 3.  如果发生这种情况，主方法应该简单地终止`FileNotFoundException`。
>     
>     
> 4.  如果发生任何异常，主方法应该简单地终止。

上述两种说法都适用于以下情况：

```
public static void main(String[] args) throws FileNotFoundException {
    try {
        doSomething();
    }
    catch (Exception e) {
        return;
    }
} 
```

* * *

当然，我们可以根据一个体面且合理的程序员可能打算与此方法签名进行通信来猜测问题的意图。这将是他们打算让该方法 throw `FileNotFoundException`，并且必须处理其他 checked `Exception`s。我们也可以合理地假设“处理”不仅意味着“过程”，而且特别是它不会（重新）抛出这样的异常。

这些假设立即排除了#1 和#2。

剩下的问题是“简单终止”是否包括抛出异常，或仅包括显式`return`/ `System.exit()`。在前一种情况下，#3 和#4 都可能为真：

```
public static void main(String[] args) throws FileNotFoundException {
    try {
        doSomething();
    }
    catch (FileNotFoundException fnfe) {
        throw fnfe;
    }
    catch (Exception e) {
        return;
    }
} 
```

`main()`在后一种情况下，#3 和 #4 都不可能为真，同时也满足将 throw的假设`FileNotFoundException`。

* * *

总而言之，这些选项的措辞不好。如果我必须选择一个答案，那将是基于 MartinV 答案的逻辑的#3。我的假设是＃3中的“应该”这个词是教授的一个不幸的选择，而像“可能”这样的词会是一个更好的选择。使用比“简单终止”（并且可以说是“处理”）更精确的语言也是一个好主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-12T00:24:58.423

1.  `main()`最终抛出*所有*未处理的异常，对吧？因此，有效地添加 throws`FileNotFoundException`是多余的。

2.  一条`throws`语句没有暗示方法如何处理异常。这个`main()`方法确实可以处理`FileNotFoundException`，然后重新抛出。

因此，该`throws`语句*没有*说明任何异常是如何被捕获和处理的。并且问题 3 和 4 仅在我们假设有问题的异常*未处理*时才有效。没有这个假设，问题是不确定的。有了这个假设，3 和 4 都是真的！

正确的答案是要求学校为这门课退款——即使是在 6.5 年后。

可以转发一下这位老师的联系方式吗？我想和他们谈谈。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-05T03:01:28.913

虽然已经为这个问题选择了一个答案，但我认为你的测试的正确答案是 3：

> 3.  如果发生 FileNotFoundException，主方法应该简单地终止。

因为它说*应该*，而不是*会*。
我的意思是，该方法中的代码可以捕获任何异常，包括已检查和未检查的，或者吞下、恢复或重新抛出它——或者它根本无法捕获它们。

但是，如果它在`FileNotFoundException`没有最终（重新）抛出它的情况下捕获 a ，它就违反了自己的合同：任何调用者都不会看到方法签名中所述的异常，因为该方法处理了它（在这种情况下，甚至编译器也可能会抱怨） ，表示永远不会抛出异常，但我不确定这里）。

我认为您的期中考试提出了一个关于设计而不是具体实现的问题。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-06-06T09:26:06.360

答案是 2 和 3。

2.main方法旨在捕获和处理FileNotFoundException。3.如果发生 FileNotFoundException，主方法应该简单地终止。

但是如果即使它被设计为处理它也无法处理异常，并且程序会异常终止。

throws 关键字用于让 JVM 处理我们懒于处理的异常，它编译成功但在运行时显示异常（如果你在 main 方法中处理它，则它编译并运行成功）。

4.如果发生任何异常，主方法应该简单地终止。并不总是正确的，因为发生的异常可能在 main 方法中处理。

1.main方法旨在捕获和处理所有类型的异常。不正确，因为JVM不处理未经检查的异常。

# vba - VBA - Excel - 如何检索匹配文件名的照片并将它们放在单元格中

> ID：13773351
> 
> 赞同：2
> 
> 时间：2012-12-08T00:58:21.193
> 
> 标签：vba, excel

我有一个 Excel 表，其中 A 列有一个产品代码列表。我还有一个包含每个产品图片的文件夹，图片的文件名是产品代码。我想将每个产品的图片放在它们各自代码旁边的 B 列中。如果可能的话，我还想重新格式化图片以使其适合单元格。

我真的不知道从哪里开始，任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:25:43.473

这是开始的代码。请在你身边测试一下。

```
 Sub AddPictures()
 Dim myPic As Picture
 Dim wkSheet As Worksheet
 Dim myRng As Range
 Dim myCell As Range
 Dim rowCount As Long
 Dim rowCount2 As Long

     Set wkSheet = Sheets(2) ' -- Change to your sheet

    '-- The usual way of finding used row count for specific column
    rowCount2 = wkSheet.Cells(wkSheet.Rows.Count, "C").End(xlUp).Row

    If rowCount2 <> 0 Then
        Set myRng = wkSheet.Range("C2", wkSheet.Cells(wkSheet.Rows.Count, "C").End(xlUp))

        For Each myCell In myRng.Cells
               If Trim(myCell.Value) = "" Then
                    MsgBox "No file path"
               ElseIf Dir(CStr(myCell.Value)) = "" Then
                    MsgBox myCell.Value & " Doesn't exist!"
               Else
                    myCell.Offset(0, 1).Parent.Pictures.Insert (myCell.Value)
                    Set myPic = myCell.Parent.Pictures.Insert(myCell.Value)

                    With myCell.Offset(0, 1)  '1 columns to the right of C ( is D)
                        '-- resize image here to fit into the size of your cell
                        myPic.Top = .Top
                        myPic.Width = .Width
                        myPic.Height = .Height
                        myPic.Left = .Left
                        myPic.Placement = xlMoveAndSize
                    End With
               End If
        Next myCell

    Else
        MsgBox "There is no file paths in your column"
    End If
End Sub 
```

**输出：**

![在此处输入图像描述](../Images/12cb0cbbd8744a28714f16dc9af51ba5.png)

* * *

PS：根据您的值设置范围，文件路径。如果您需要在整个工作表中搜索使用过的 REAL 列和行，请告诉我。我可以为此分享一个功能。现在您只需要在特定的文件路径列中查找已使用的行，因此上述典型的已使用行数行就足够了。

# android - 从java数组创建字符串数组（在xml中）？（安卓）

> ID：13773355
> 
> 赞同：0
> 
> 时间：2012-12-08T00:59:21.260
> 
> 标签：android

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(RoutesActivity.this, directionArray, R.id.route_direction_spinner); 
```

所以，我正在尝试制作一个微调器，并且我有一个 java 字符串数组（directionArray）。我的问题是 Eclipse 在将鼠标悬停在“createFromResource”上时返回此错误：“ArrayAdapter 类型中的方法 createFromResource(Context, int, int) 不适用于参数 (RoutesActivity, String[], int)”并给了我这个 Quick修复：“将 'directionArray' 的类型更改为 'int'。” 基本上，我有一个需要在 ArrayAdapter 中使用的 Java 数组，但显然它不会让我使用。有没有办法从java中创建一个xml资源，和/或绕过上述错误的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:21:07.263

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(RoutesActivity.this, android.R.layout.simple_spinner_item, directionArray); 
```

使用这个然后你的标准：

```
Spinner spinner1 = (Spinner) findViewById(R.id.route_direction_spinner);
spinner1.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T01:02:34.100

不，XML 资源在编译时被解析为二进制格式。您不能在运行时创建新的 XML 资源。

# .htaccess - .htaccess 从 www 和非 www 重定向到 https

> ID：13773356
> 
> 赞同：1
> 
> 时间：2012-12-08T00:59:27.607
> 
> 标签：.htaccess, redirect, https

我需要一种简单的方法来强制`https`重定向传入的非`https`请求。

换句话说，如果一个请求进入`http://www.example.com`or`http://example.com`我希望它分别被重定向到`https://www.example.com`or `https://example.com`。

这两个选项中的任何一个在我的场景中都是有效的——只要请求`www`和非`www`请求都被重定向。

我已经尝试了许多基于各种资源的解决方案，但其中大多数最终导致我陷入无限循环 - 或者某种错误消息表明重定向尚未正确设置。

我正在使用 media Temple 作为我的主机，并且希望**能够**通过编辑我的`.htaccess`文件来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:03:58.840

试试这个：

```
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

# javascript - 如何使 iframe 中的事件与处理程序一起工作？

> ID：13773361
> 
> 赞同：0
> 
> 时间：2012-12-08T01:00:44.447
> 
> 标签：javascript, jquery, css

我希望当您将鼠标悬停在 iframe/超链接内的部分上时，动画将起作用。目前没有任何反应。我在我的[网站](http://tragicclothing.co.uk/deleteeee.html)上将 div 的宽度稍微加宽了，这样您就可以看到鼠标悬停事件（动作）应该做什么。

Html（用于视频）：

```
<div id="box3" onmouseout="$('#box3').stop().animate({boxShadow: '10px 10px 15px', top: 0}, 'fast')"
    onmousemove="$('#box3').stop().animate({boxShadow: '3px 3px 3px', top: 3}, 'fast')" style="top: 0px;
width: 710px;
box-shadow: 10px 10px 15px 0px rgb(102, 102, 102);">
<iframe width="700" height="525" id="under" src="http://www.youtube.com/embed/LRo-L9zYf-M" frameborder="0" allowfullscreen="allowfullscreen"></iframe> 
```

我尝试使用 css 和 z-index 将另一个 div 放在 iframe 前面，但这没有用

CSS：

```
#under {
width: 100%;
height: 100%;
position: relative; 
```

}

```
#box3 {
width: 100%;
height: 100%;
position: absolute;
top: 0;
left: 0; 
```

}

```
#box3 {
z-index: 10; 
```

任何想法将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:16:06.283

您无法使用 Javascript 从不同的域访问 iFrame 的内容。所有现代浏览器都将其作为安全功能，以防止您窃取信用卡信息。据我所知，没有办法解决这个问题。

# linux - unix shell 脚本中的分段错误（核心转储）错误。帮忙找bug？

> ID：13773362
> 
> 赞同：3
> 
> 时间：2012-12-08T01:00:44.890
> 
> 标签：linux, bash, shell, unix, review

现在，我已经知道这意味着有一个错误，但我找不到它。您能帮忙检查我的代码并尝试找出问题所在吗？错误消息围绕我创建的日期函数。所有其他功能在此代码中都可以正常工作。

错误：

```
sguthrie1@cs:~$ ./finalproject.sh -d 
Segmentation fault (core dumped) 
```

代码：

```
function check
{
        echo "usage: hw14.sh option argument
Please enter one or more options or arguments."
        exit
}
function date
{
        if [[ $myvar == "-d" ]]
        then date "+%d %B,%Y"
        fi
}
function host
{
        if [[ $myvar == "-h" ]]
        then hostname
        fi
}
function who
{
        if [[ $myvar == "-w" ]]
        then whoami
        fi
}
function help
{
        if [[ $myvar == "-help" ]]
        then echo "
valid options:
-d = display today's date in day-month-year format
-h = display name of computer you are currently working on
-w = display who you are logged in as
arguments:
Any argument entered is checked to see if it is a file name
"
        fi
}
if [ $# -le 0 ]
then check
fi
for myvar
do
        if [[ $myvar == "-"* ]]
        then date; host; who; help
        fi
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:07:59.810

该`date`函数在没有终止条件的情况下递归调用自身。这[可能总是](https://lists.gnu.org/archive/html/bug-bash/2012-07/msg00004.html)在 Bash 中出现段错误。用于`command date`调用日期命令而不是函数。在 bash 4.2 中，您还可以通过设置`FUNCNEST`变量来设置递归深度限制以帮助检测此类错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T01:07:56.737

您的`date`函数无意中调用了自己。您可以重命名函数以避免冲突，或者更具体地将系统命令称为`/bin/date`.

# android - 是否可以创建状态列表选择器的 xml 子类？

> ID：13773363
> 
> 赞同：0
> 
> 时间：2012-12-08T01:00:48.063
> 
> 标签：android

例如，假设我有一个在 XML 中声明的颜色状态列表，名为**example1.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:color="@color/red"
        android:state_pressed="true" />

    <item
        android:color="@color/blue"
        android:state_checked="true" />

    <item
        android:color="@color/green"
        android:state_disabled="true" />

    <item
        android:color="@color/orange" />
</selector> 
```

然后，我想创建**example2.xml**并且我希望它与**example1.xml**完全相同，只是我希望按下的颜色是紫色而不是红色：

```
 <item
        android:color="@color/purple"
        android:state_pressed="true" /> 
```

所以**example2.xml**最终会像这样：

```
<?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android" >
        <item
            android:color="@color/purple" <-- note this value is different
            android:state_pressed="true" />

        <item
            android:color="@color/blue"
            android:state_checked="true" />

        <item
            android:color="@color/green"
            android:state_disabled="true" />

        <item
            android:color="@color/orange" />
    </selector> 
```

但没有所有重复的代码。另外，如果我想改变颜色，我可以在一个地方改变它。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:39:51.560

我不认为你可以在 Android 上做到这一点，你必须为不同的选择器创建多个 xml 资源。

# iphone - 本地通知调度问题

> ID：13773364
> 
> 赞同：2
> 
> 时间：2012-12-08T01:00:50.253
> 
> 标签：iphone, ios, uilocalnotification

我已经设置了本地通知，我的问题是我已将其设置为星期六，并且重复间隔为一周。但是，我设置了正确的日期，但我仍然在每个星期天得到它，但在正确设置的时间。有人看到我的错误吗？哦，别忘了，如果我设置了正确的日期，如果它...星期三，我会在一分钟后立即收到通知。不知道我的错在哪里。

```
 - (void)applicationDidEnterBackground:(UIApplication *)applicatio
{
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar] ;

    NSDateComponents *componentsForReferenceDate =

    [calendar components:(NSDayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit ) fromDate:[NSDate date]];

    //set day (saturday)

    [componentsForReferenceDate setDay:1] ;
    [componentsForReferenceDate setMonth:12] ;
    [componentsForReferenceDate setYear:2012] ;

    NSDate *referenceDate = [calendar dateFromComponents:componentsForReferenceDate] ;

    // set components for time 18:30\. 

    NSDateComponents *componentsForFireDate =

    [calendar components:(NSYearCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit| NSSecondCalendarUnit ) fromDate: referenceDate];

    [componentsForFireDate setHour: 18] ;
    [componentsForFireDate setMinute:38] ;
    [componentsForFireDate setSecond:0] ;

    NSDate *fireDateOfNotification = [calendar dateFromComponents: componentsForFireDate];

    // Create the notification

    UILocalNotification *notification = [[UILocalNotification alloc]  init] ;

    notification.fireDate = fireDateOfNotification ;
    notification.timeZone = [NSTimeZone localTimeZone] ;
    notification.alertBody = [NSString stringWithFormat: @"You are missed!"] ;
    notification.alertAction = @"Back";
    notification.userInfo= [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"Some information"] forKey:@"information"];
    notification.repeatInterval= NSWeekCalendarUnit ;
    notification.soundName = @"Appnotifisound.wav";
    notification.applicationIconBadgeNumber = 1;
    [[UIApplication sharedApplication] scheduleLocalNotification:notification] ; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:31:11.410

这是因为您正在创建两个不同的`NSDateComponents`. 一个用于设置日期、月份和年份，另一个用于设置小时、分钟和秒。

这应该工作：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {

   [[UIApplication sharedApplication] cancelAllLocalNotifications];

    NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar] ;    
    NSDateComponents *componentsForReferenceDate = [[NSDateComponents alloc] init];

    //set day (saturday)

    [componentsForReferenceDate setDay:7] ;
    [componentsForReferenceDate setMonth:12] ;
    [componentsForReferenceDate setYear:2012] ;

    // set time (08:30 PM) 

    [componentsForReferenceDate setHour: 20] ;
    [componentsForReferenceDate setMinute:30] ;
    [componentsForReferenceDate setSecond:00] ;

    NSDate *fireDateOfNotification = [calendar dateFromComponents: componentsForReferenceDate];

    // Create the notification

    UILocalNotification *notification = [[UILocalNotification alloc]  init] ;

    notification.fireDate = fireDateOfNotification ;
    notification.timeZone = [NSTimeZone localTimeZone] ;
    notification.alertBody = [NSString stringWithFormat: @"You are missed!"] ;
    notification.alertAction = @"Back";
    notification.userInfo= [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"Some information"] forKey:@"information"];
    notification.repeatInterval= NSWeekCalendarUnit ;
    notification.soundName = @"Appnotifisound.wav";
    notification.applicationIconBadgeNumber = 1;
    [[UIApplication sharedApplication] scheduleLocalNotification:notification] ;

} 
```

# javascript - Python URL解码？

> ID：13773365
> 
> 赞同：5
> 
> 时间：2012-12-08T01:00:53.407
> 
> 标签：javascript, python

在javascript中，我执行以下操作：

```
encodeURIComponent(comments) 
```

在 Python 中，我执行以下操作：

```
urllib2.unquote(comments) 
```

出于某种原因，当我执行以下操作时：

```
encodedURIComponents('ø') 
```

我明白`%C3%B8`了，但是当我解码时

```
urllib2.unquote('%C3%B8') 
```

我得到`Ã¸`而不是`ø`，这是原始字符。

是什么赋予了？

我在一个在客户端使用 jQuery 和 Python/Django 服务器端的平台上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T01:03:49.013

只需尝试解码它：

```
urllib2.unquote('%C3%B8').decode('utf-8')   # --> 'ø' 
```

# python - 如何在 Ubuntu 上使用 python 逐帧捕获视频？

> ID：13773368
> 
> 赞同：2
> 
> 时间：2012-12-08T01:01:21.390
> 
> 标签：python, linux, ubuntu, video

我想知道如何从使用 python 连接到我的 Ubuntu 系统的相机逐帧捕获视频？我需要使用什么库？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:45:54.487

图像捕获可以在 Linux 上使用[V4L](http://linuxtv.org/wiki)完成。尽管两者都不是专门用于此目的，但[OpenCV](http://opencv.org/)和[Pygame](http://www.pygame.org/)都有 V4L 的接口。以下是使用每种方法的一些参考：

*   **OpenCV** -[文档](http://opencv.willowgarage.com/documentation/python/highgui_reading_and_writing_images_and_video.html?highlight=capture#CaptureFromCAM)和[示例代码](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/python/capture-cam.py?rev=616)
*   **Pygame** -[文档](http://www.pygame.org/docs/ref/camera.html)和[示例代码](http://www.pygame.org/docs/tut/camera/CameraIntro.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T01:46:05.993

我认为从相机流式传输视频的最佳模块是`opencv`模块，参考[这里](http://opencv.willowgarage.com/documentation/python/index.html)，教程[这里](http://opencv.willowgarage.com/wiki/PythonInterface)。`cvCaptureFromCAM` [在这里](http://opencv.willowgarage.com/documentation/reading_and_writing_images_and_video.html#cvCaptureFromCAM)专门使用来准确捕获流。

# c++ - Turbo C++：为 malloc 函数生成目标代码

> ID：13773373
> 
> 赞同：0
> 
> 时间：2012-12-08T01:02:11.480
> 
> 标签：c++, c, assembly, linker, tasm

我正在使用 Turbo C++ 3.1。

我有一些需要 C 标准库的 malloc 的汇编模块。所以我在我的 .asm 文件中有：

```
extern _malloc:proc 
```

我想生成一个包含 malloc() 的目标文件。为了使用链接器并构建一个可执行文件。例子：

```
tasm /zi bmlib.asm  // create object file: bmlib.obj
tasm /zi bmlibt.asm // create object (which contains main program): bmlibt.obj
? //Generate object file for malloc: malloc.obj
tlink /v3 bmlibt bmlib malloc // link all modules
bmlibt.exe // Execute the program 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:16:00.213

如果您真的希望 Turbo C++`malloc`包含在目标文件中，您将使用`tlib`从标准库中提取该目标文件。临时我不记得要给出的标志，也不记得`tlib`标准库的文件名，但两者都应该很容易找到。

不过，您实际上并不需要这样做：如果您只是`tcc`在命令行上使用，它会自动编译和链接您从标准库中使用过的模块。不过，您确实只需要在 C 中使用至少一个文件——`malloc`这取决于 C 启动代码中发生的一些初始化，因此即使您成功链接它，如果没有该启动代码，它实际上也不会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:09:47.940

malloc() 是 C（或 C++）运行时库的一部分。您可能可以告诉链接器静态链接 C 运行时（通常称为 CRT），但通常它是动态链接的，因此可执行文件的大小更小。在任何情况下，您通常都无法选择将运行时的 malloc() 实现内置到单独的目标文件中。如果您实现自己的版本，当然，它将成为您的目标文件的一部分。在这种情况下，您的实现会覆盖系统的实现。

所以我想你应该寻找的是某种方式来告诉链接器你想与 C 运行时库链接，无论是静态的还是动态的。然后，当您的程序集目标文件链接到最终可执行文件时，它应该可以访问它。

# c++ - QUdpSocket：无法接收数据报

> ID：13773374
> 
> 赞同：3
> 
> 时间：2012-12-08T01:02:27.077
> 
> 标签：c++, qt, sockets, udp, sfml

我正在使用 QUdpSocket 来接收来自服务器的数据。当我使用 SFML 接收数据时，我可以通过 SocketUdp 接收数据，但使用 qt 它不起作用。

```
void TheClass::Bind()
{
  m_sock_receive = new QUdpSocket(this);
  if (m_sock_receive->bind(QHostAddress::Any, port))
  {
    std::cout << "Bind: OK" << std::endl;
    connect(m_sock_receive, SIGNAL(readyRead()), this, SLOT(QtReceive()));
  } 
  else
      std::cout << "Bind: NOK" << std::endl;
}

void TheClass::QtReceive()
{
    std::cout << "Pending data !" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:51:01.037

我会在绑定之前进行连接。绑定之后，readyRead 可能会在连接调用完成之前触发。如果您不清空待处理的数据报，readyRead 将不会再次触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-24T15:48:06.567

为了将 SIGNAL(readyRead()) 连接到任何插槽，QUdpSocket 必须位于 QAbstractSocket::BoundState 中。尽管您在连接之前调用了绑定，但 QUdpSocket 上的绑定会进行非阻塞调用，这意味着绑定可能会延迟。为确保在绑定完成且 QUdpSocket 处于绑定状态后将 SIGNAL(readyRead()) 连接到 SLOT(QtReceive())，请执行以下操作：

```
void TheClass::Bind()
{
  m_sock_receive = new QUdpSocket(this);
  connect(m_sock_receive, SIGNAL(stateChanged(QAbstractSocket::SocketState)),
        this, SLOT(onSocketStateChange(QAbstractSocket::SocketState)));
  if (m_sock_receive->bind(QHostAddress::Any, port))
  {
    std::cout << "Bind: OK" << std::endl;
  } 
  else
      std::cout << "Bind: NOK" << std::endl;
}

void TheClass::QtReceive()
{
    std::cout << "Pending data !" << std::endl;
}

void TheClass::onSocketStateChange (QAbstractSocket::SocketState state) {
    if ( state == QAbstractSocket::BoundState ) {
        connect(m_sock_receive, SIGNAL(readyRead()), this, SLOT(QtReceive()));
    }
} 
```

# php - PHP mysql select查询where（通配符）

> ID：13773381
> 
> 赞同：1
> 
> 时间：2012-12-08T01:03:18.200
> 
> 标签：php, mysql, wildcard

我正在尝试使用以下 MySQL 查询，但显然有问题。我正在尝试让**page.php**或**page.php?q=**返回以下查询：

```
if (!isset($_GET['q'])) { $where = "WHERE column1 LIKE %"; }
else { $where = "WHERE column1 LIKE ".$_GET['q']; }

$query = "SELECT column1, column2 FROM table '$where' GROUP BY column1"; 
```

所以如果没有 GET，那么`WHERE`MySQL 查询中就没有。我将 GET 设置为某个值，然后有一个`WHERE`具有该 GET 值的值。

目前我收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''WHERE column1LIKE ' GROUP BY column1' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:06:11.007

您需要使用某种转义，但这是另一天的练习。如果您只是想让它工作，请删除 where 变量周围的单引号。

```
$query = "SELECT column1, column2 FROM table $where GROUP BY column1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:10:25.003

您需要将搜索字符串放在`WHERE`单引号之间的子句中，如下所示：

```
$where = "";
// if there the get q is set we add the were clause
if (!isset($_GET['q'])) {
    $where = "WHERE column1 LIKE %";
    // ^ This WHERE clause is useless, since it matches all strings.
    // Omitting this WHERE clause has the same effect.
}
else { $where = "WHERE column1 LIKE ".$_GET['q']; }

$query = "SELECT column1, column2 FROM table ".$where." GROUP BY column1"; 
```

**请注意**，您的脚本极易受到攻击。[阅读有关 SQL 注入的信息](http://www.unixwiz.net/techtips/sql-injection.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T02:06:16.917

对于使用[PDO](http://php.net/manual/en/book.pdo.php)的通用解决方案，请尝试此代码段（其中 $db 是 PDO 连接对象）。

```
$params = array();

$sql = 'SELECT column1, column2 FROM table where 1 ';

if (!empty($_GET['q'])) {
    $sql .= " column1 like ?";
    $params[] = '%' . $_GET['q'] . '%';
}

if (!empty($_GET['r'])) {
    $sql .= " column2 like ?";
    $params[] = '%' . $_GET['r'] . '%';
}

$sql .= ' GROUP BY column1 ORDER BY column1';

$query = $db->prepare($sql);
$i = 1;
foreach ($params as $param) {
    $query->bindValue($i, $param);
    $i++;
}
$query->execute(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T01:08:09.437

我认为你可以简单地这样做：顺便说一句..你不需要另一部分“”类似％“”你可以简单地省略 where 子句，它会产生相同的效果......这是什么的副本你刚刚发布：

```
$where = "";
//if there the get q is set we add the where clause
if(isset($_GET['q'])) { 
   $where = "WHERE column1 LIKE '".$_GET['q']."'"; 
}

$query = "SELECT column1, column2 FROM table ".$where." GROUP BY column1"; 
```

# ant - 具有路径验证任务的 ANT GUI

> ID：13773388
> 
> 赞同：1
> 
> 时间：2012-12-08T01:03:52.543
> 
> 标签：ant, antform

我最近一直在尝试使用[AntForm设置一个小型应用程序（具有各种路径和其他变量）的 ANT 脚本](http://antforms.sourceforge.net/). AntForm 有一个文件选择器，但我必须编写一些自定义的东西来验证路径（即，确保它是我向用户询问的东西的路径）。我想知道是否有人有以这种方式使用 AntForm 的经验。我想要的是带有文件选择器的向导页面，当用户单击“下一步”或选择文件时，执行某种验证任务，向导从那里继续。如果我可以将“下一步”按钮变灰或添加“无效路径”消息，那绝对是最好的选择，但这对于 AntForm 的设计目的似乎有点复杂。下面是一个入门示例 XML 文件。请注意，它希望 AntForm.jar 位于 ./bin 目录中。

```
<?xml version="1.0"?>
<project name="My App Setup" default="getPath" basedir=".">

    <property name="app.dir" value="${user.home}/appXYZ"/>

    <path id="runtime.cp">
        <pathelement location="bin/"/>
        <fileset dir="lib" includes="antform.jar"/>
    </path>
    <taskdef name="antform" classname="com.sardak.antform.AntForm"
        classpathref="runtime.cp"/>
    <taskdef name="antmenu" classname="com.sardak.antform.AntMenu"
        classpathref="runtime.cp"/>

    <!-- test wizard behaviour, step 1 -->
    <target name="getPath" 
        description="Check for App XYZ in path">
        <antform title="Choose directory of app xyz"
            lookAndFeel="com.sun.java.swing.plaf.windows.WindowsLookAndFeel"
            okMessage="Next"
            nextTarget="wizard2"
            >
            <fileSelectionProperty 
                label="App XYZ Distribution"
                property="app.dir"
                directoryChooser="true" />
            <!-- TODO: how to validate and choose where to go from this form? -->
        </antform>
    </target>

        <!-- test wizard behaviour, step 1 -->
    <target name="wizard2" 
        description="continue setup">
        <antform title="did we validate?"
            lookAndFeel="com.sun.java.swing.plaf.windows.WindowsLookAndFeel"
            okMessage="Finish"
            previousTarget="getPath"
            >

            <label>Did we validate the path before we got here?</label>
        </antform>
    </target>
</project> 
```

# c++ - 如何通过 Boost::MPI 发送 2d C 样式数组？

> ID：13773390
> 
> 赞同：2
> 
> 时间：2012-12-08T01:04:15.707
> 
> 标签：c++, c, boost, mpi, boost-mpi

我`double A[B_ROWS][B_COLUMNS];`在 C API 中使用过类似的东西：

```
MPI_Isend(&A[low_bound][0], (upper_bound - low_bound) * A_COLUMNS, MPI_DOUBLE, i, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &request); 
```

和

```
 MPI_Recv(&A[low_bound][0], (upper_bound - low_bound) * A_COLUMNS, MPI_DOUBLE, 0, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &status); 
```

现在[使用 boost::mpi](http://www.boost.org/doc/libs/1_52_0/doc/html/mpi/tutorial.html#mpi.c_mapping)我尝试：

```
world.isend(i, TO_SLAVE_TAG + 2, &A[low_bound][0], (upper_bound - low_bound) * A_COLUMNS); 
```

和

```
world.recv(0, TO_SLAVE_TAG + 2, &A[low_bound][0], (upper_bound - low_bound) * A_COLUMNS); 
```

但我的应用程序不断失败，例如：

```
rank 1 in job 10  master_39934   caused collective abort of all ranks
  exit status of rank 1: killed by signal 11 
```

这意味着`seg fault`，请注意原始 C 应用程序可以根据需要运行，而我目前更改的所有内容都是使用 api - 而不是任何逻辑。

那么通过 boost::mpi 发送 2d C 样式数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T20:00:35.190

假设我的盲目猜测是正确的，并且您在上面键入的内容是准确的，则 的大小与（相反，有）`A`无关。如果是这样，下面的代码将修复这种“不同步”错误：`A_COLUMNS``A``B_COLUMNS`

```
template<typename World, typename T>
void isend( World& w, int dest, int tag, T const* t, size_t n = 1) {
  world.isend(dest, tag, &t, n);
}
template<typename World, typename T, size_t aSize>
void isend( World& w, int dest, int tag, T const (*arr1)[aSize], size_t n = 1) {
  world.isend(dest, tag, &(*arr)[0], n*aSize);
}
template<typename World, typename T, size_t aSize, size_t bSize>
void isend( World& w, int dest, int tag, T const (*arr2)[aSize][bSize], size_t n = 1) {
  world.isend(dest, tag, &(*arr)[0][0], n*aSize*bSize);
}

template<typename World, typename T>
void recv( World& w, int dest, int tag, T* t, size_t n = 1) {
  world.recv(dest, tag, &t, n);
}
template<typename World, typename T, size_t aSize>
void recv( World& w, int dest, int tag, T (*arr1)[aSize], size_t n = 1) {
  world.recv(dest, tag, &(*arr)[0], n*aSize);
}
template<typename World, typename T, size_t aSize, size_t bSize>
void recv( World& w, int dest, int tag, T (*arr2)[aSize][bSize], size_t n = 1) {
  world.recv(dest, tag, &(*arr)[0][0], n*aSize*bSize);
} 
```

对于一维和二维数组，上面的代码将计算出您真正想要发送多少个 T 副本，而不是您必须手动维护它。

它甚至适用于切片，例如`&A[low_bound], upper_bound-lower_bound`.

您可能需要注意的一件事是吹过阵列的末端。您的 C 代码很容易超出数组的末尾，但那里没有任何重要的东西，所以它幸存了下来。在 C++ 代码中，您可以在那里拥有一个对象，然后您会死而不是生存。

另一种方法可能是编写一个函数，该函数同时接受切片的上限和下限，如下所示：

```
template<typename World, typename T, size_t N>
void isend_slice( World& w, int dest, int tag, T const (&t)[N], size_t start=0, size_t end=N ) {
  Assert( end <= N && start < end );
  isend(world, dest, tag, &(t[start]), end-start);
}
template<typename World, typename T, size_t N>
void recv_slice( World& w, int dest, int tag, T (&t)[N], size_t start=0, size_t end=N ) {
  Assert( end <= N && start < end );
  recv(world, dest, tag, &(t[start]), end-start);
} 
```

在这种情况下，你直接传递一个数组，然后说出你想从哪里开始和结束阅读。优点是我检查数组是否真的有数据要发送，或者数据到达的空间。

（这两个函数依赖于上面的函数）

在分布式情况下，您希望为您的 Asserts 生成一个描述性的日志记录机制。

以下是上述代码的示例用法：

```
int array[10];
int array2[10][10];
isend(world, dest, tag+0, &int(7)); // tag is an int
isend(world, dest, tag+1, &array); // tag+1 is a 10 int array
isend(world, dest, tag+2, &array2); // tag+2 is a 100 int array
isend(world, dest, tag+1, &(array2[5])); // tag+1 is a 10 int array
isend_slice(world, tag+3, 0, array2, 7, 11); // asserts, but its a 40 int array 
```

同样适用于recv。

# common-lisp - 无限递归 SB-KERNEL:OUTPUT-OBJECT

> ID：13773394
> 
> 赞同：1
> 
> 时间：2012-12-08T01:04:59.013
> 
> 标签：common-lisp, sbcl

我正在使用包 drakma，它可以正确执行：

```
(drakma:http-request "http://www.google.de") 
```

单独使用时。但是，一旦我开始使用自己编写的包，就会导致控制堆栈溢出。回溯看起来像这样：

```
...htmlstuff.....
200
((:DATE . "Sat, 08 Dec 2012 01:00:23 GMT") (:EXPIRES . "-1")
 (:CACHE-CONTROL . "private, max-age=0")
 (:CONTENT-TYPE . "text/html; charset=ISO-8859-1")
 (:SET-COOKIE
  . "PREF=ID=5c4b30f4308d3e16:FF=0:TM=1354928423:LM=1354928423:S=1Z5pCWaGYqp7vYxW; expires=Mon, 08-Dec-2014 01:00:23 GMT; path=/; domain=.google.de,NID=66=QXQcXBWPNkcLtxxp5Hmlb7enfDS_wlNOA5bfxT-GsokTpAH4fulI8zxOIl_3IQQzeIcIodmcWDc0JC80k7-d-kOPznrhCJYACNu-zpp7wpPXypilOyjK2mebDUnUl3Xj; expires=Sun, 09-Jun-2013 01:00:23 GMT; path=/; domain=.google.de; HttpOnly")
 (:P3P
  . "CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\"")
 (:SERVER . "gws") (:X-XSS-PROTECTION . "1; mode=block")
 (:X-FRAME-OPTIONS . "SAMEORIGIN") (:CONNECTION . "close"))
#<PURI:URI http://www.google.de/>
INFO: Control stack guard page unprotected
Control stack guard page temporarily disabled: proceed with caution

debugger invoked on a SB-KERNEL::CONTROL-STACK-EXHAUSTED in thread
#<THREAD "main thread" RUNNING {1002978CA3}>:
  Control stack exhausted (no more space for function call frames).
This is probably due to heavily nested or infinitely recursive function
calls, or a tail call that SBCL cannot or has not optimized away.

PROCEED WITH CAUTION.

Type HELP for debugger help, or (SB-EXT:QUIT) to exit from SBCL.

restarts (invokable by number or by possibly-abbreviated name):
  0: [ABORT] Exit debugger, returning to top level.

(SB-KERNEL::CONTROL-STACK-EXHAUSTED-ERROR)
0] 

....way more of those....
15854: ((SB-PCL::FAST-METHOD PRINT-OBJECT (T T))
        #<unavailable argument>
        #<unavailable argument>
#1#        #1=
        #<unavailable argument>)
15855: ((LABELS SB-IMPL::HANDLE-IT :IN SB-KERNEL:OUTPUT-OBJECT)
        #<SYNONYM-STREAM :SYMBOL SB-SYS:*TTY* {10001B3103}>)
15856: ((SB-PCL::FAST-METHOD PRINT-OBJECT (T T))
        #<unavailable argument>
        #<unavailable argument>
#1#        #1=
        #<unavailable argument>)
15857: ((LABELS SB-IMPL::HANDLE-IT :IN SB-KERNEL:OUTPUT-OBJECT)
        #<SYNONYM-STREAM :SYMBOL SB-SYS:*TTY* {10001B3103}>)
15858: ((SB-PCL::FAST-METHOD PRINT-OBJECT (T T))
        #<unavailable argument>
        #<unavailable argument>
#1#        #1=
        #<unavailable argument>)
15859: ((LABELS SB-IMPL::HANDLE-IT :IN SB-KERNEL:OUTPUT-OBJECT)
        #<SYNONYM-STREAM :SYMBOL SB-SYS:*STDOUT* {10001DCB03}>)
15860: #1#(PRIN1 #1= NIL)
15861: (SB-IMPL::REPL-FUN NIL)
15862: ((LAMBDA () :IN SB-IMPL::TOPLEVEL-REPL))
15863: (SB-IMPL::%WITH-REBOUND-IO-SYNTAX
        #<CLOSURE (LAMBDA # :IN SB-IMPL::TOPLEVEL-REPL) {10076F355B}>)
15864: (SB-IMPL::TOPLEVEL-REPL NIL)
15865: (SB-IMPL::TOPLEVEL-INIT)
15866: ((FLET #:WITHOUT-INTERRUPTS-BODY-236911 :IN SAVE-LISP-AND-DIE))
15867: ((LABELS SB-IMPL::RESTART-LISP :IN SAVE-LISP-AND-DIE)) 
```

大约有 15k 个打印对象互相调用。

我发现错误出现在这三行中：

```
(define-condition recepie-action-errornous (simple-error) ())

(defmethod print-object (err recepie-action-errornous)
  (rstyl:LOG-ERROR err)) 
```

whereas`(rstyl:LOG-ERROR err)`是一个扩展为：

```
(WRITE ERR :ESCAPE NIL :STREAM A-PACKAGE:*LOG-STREAM-ERROR*) 
```

价值`*LOG-STREAM-ERROR*`在于：`#<SYNONYM-STREAM :SYMBOL SB-SYS:*TTY* {10001B3103}>` 这条线怎么会有这么大的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:46:40.513

实际上，事情很少。

`simple-error`是一种定义打印它的特殊插槽的条件，`:format-control`and `:format-arguments`. 不幸的是，它们的实用性很小，因为您既不能在子条件的定义中也不能在任何初始化后挂钩中覆盖它们，因为没有。一般来说，我发现`simple-error`它的用处非常有限，因为它不能只捕获需要打印的消息，而是每次创建此条件的实例时都必须提供消息。

因此，如果您想扩展`simple-error`，您可以执行以下操作：

```
(define-condition recepie-action-errornous (simple-error) ()
  (:report
   (lambda (condition stream)
     (declare (ignore condition))
     (format stream "Erroneous recepie action happened")))) 
```

然后，您的日志记录可能如下所示：

```
(write (make-condition 'recepie-action-errornous) :escape nil) 
```

它会打印`"Erroneous recepie action happened"`消息。还不错，但是您没有使用将该条件与其祖先条件区分开来的唯一功能`condition`，即打印格式化输出的能力。

换句话说，我并没有真正看到你的情况在扩展`simple-error`我看到它的主要功能是根据你在构建它时提供的参数来促进报告，但如果你不提供任何东西，那么它就是一个有点浪费。

# java - 如何初始化列表 > 一行中的值，然后遍历这些对？

> ID：13773398
> 
> 赞同：0
> 
> 时间：2012-12-08T01:05:26.967
> 
> 标签：java, list, iteration

> **可能重复：**
> [在一行中初始化 ArrayList](https://stackoverflow.com/questions/1005073/initialization-of-an-arraylist-in-one-line)

我是 java 新手，对列表有一些疑问。

我得到了定义的变量 x 和 y。

我想创建一个包含 {x+1,y+1}、{x-1,y-1} 等列表的列表
我试过这样的事情：

```
List<List<T>> currentList; 
```

然后尝试向其中添加项目，但它不起作用

有没有一种简单的方法可以在一行中定义这样的列表？是否有可能遍历成对的值来操作它们？

任何帮助都非常感谢！:)

# r - 汇总变量不匹配

> ID：13773402
> 
> 赞同：2
> 
> 时间：2012-12-08T01:05:44.283
> 
> 标签：r

我有一个数据集，参与者两次拿了几个 12 个项目。我想数一数其中的次数`V1 != V2 & V3 != V4`等等，以量化他们关注的程度。

`with(data, 'V1' != 'V2')`为整个数据集返回逻辑 TRUE。我也尝试为此创建一个函数，但我无法让它对不同的变量进行操作。鉴于`identical()`.

```
score.mismatch <- function(data,...) {
mis <- 0
if (data$V1 != data$V2) {
    mis <- mis + 1
    return(mis)
}
if (data$V3 != data$V4) {
    mis <- mis + 1
    return(mis)
} 
    # And so on
return(mis)
} 
```

感谢您的任何反馈和提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:24:50.507

这会给你同样的结果：

```
with(data, sum( sum(V1 != V2), sum(V3 != V4) ) ) 
```

当强制为数字时，TRUE 为 1。如果你想要它在一个函数中：

```
mismat <- function(df){
            mis <- with(df, sum( sum(V1 != V2), sum(V3 != V4) ) ) } 
```

在使用`with`内部函数时可能会出现一些我不完全理解的问题，但我认为它们不会出现在这里，除非您的论点`mismat()`没有具有这些名称的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:41:21.317

粘贴在您问题中的代码中有两个重要问题可能会给您带来麻烦

首先，语句中变量名周围的引号`with`表示比较两个文字字符串，`"V1"`并且`"V2"`. 而如果没有引号，它会说比较被*调用的对象* `V1`和`V2` 这个例子可能会更清楚：

```
 df <- data.frame(V1=11:13, V2=1:3)

   #   df looks like: 
   #     V1 V2
   #   1 11  1
   #   2 12  2
   #   3 13  3

  # CORRECT:  we paste the values within V1 and V2
  with(df, paste(V1, V2, sep="~"))
  [1] "11~1" "12~2" "13~3"

  # INCORRECT:  we paste the strings "V1" and "V2".
  #            There is no connection between them and df
  with(df, paste("V1", "V2", sep="~"))
  [1] "V1~V2" 
```

其次，在您的函数中：在每个`if`子句中，您都有一个`return`语句。这意味着在达到单个`TRUE`值时，该函数应该停止继续。但是根据您的指示，我相信您不希望这种行为。

您可能希望删除子句中的`return`语句`if`，只保留最后一个。虽然，更有可能的是，您可能想要使用@DWin 的建议；）

# c++ - OpenCV cvCaptureFromCAM 使用 PS3 Eye 返回 null

> ID：13773405
> 
> 赞同：0
> 
> 时间：2012-12-08T01:06:17.473
> 
> 标签：c++, opencv

我已经用开放的 CV 设置了我的 ps3 眼睛，但是当我调用该函数时`cvCaptureFromCAM(0)`，它总是返回 null。我将[这些驱动程序](http://www.codelaboratories.com/products/eye)用于我的 ps3 eye 和 OpenCV2.2。

我已经尝试了许多其他解决方案，我在 StackOverflow 和互联网上的其他博客上找到了，比如使用`CV_CAP_ANY`代替 0 甚至重新设计整个代码以使用 OpenCV2 格式，`cv::VideoCapture capWebcam(0);`但我仍然得到一个空指针，表明我的相机无法访问。

我知道我的 ps3 eye 可以正常工作，因为我已经通过 Skype 上的视频聊天对其进行了测试，它的工作原理与任何其他网络摄像头一样。

有谁知道如何解决这个问题？或者更好的是，有没有人成功地设置了 PS3 eye 以与 openCV 一起使用？

PS：如果有人想看代码，你可以在[这里下载一份](http://www.18f4550.com/OpenCV_and_Emgu_CV/OpenCV_tut_1/Tracker7.zip)

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:32:01.997

尝试检测网络摄像头的C风格..

```
int main()
{
    CvCapture *webcam = NULL;
    webcam = cvCreateCameraCapture(-1);
    if(webcam!=NULL)
      {
       IplImage *frame = cvQueryFrame(webcam);
       cvShowImage("WEBCAM_TEST",frame);
       cvWaitKey(0);
       return 0;
      }
   else
       {
         std::cout<<"CAMERA NOT DETECTED"<<std::endl;
         return 0;
       }

} 
```

# c++ - QProcess 输出未显示

> ID：13773410
> 
> 赞同：0
> 
> 时间：2012-12-08T01:07:10.590
> 
> 标签：c++, linux, qt, scp

我有一些使用 Qt 的 QProcess 在 Linux 中运行 scp 命令的 C++ 代码，但我从未从该进程中获得任何输出：

```
void CopyClass::CopyClass()
{ 
    mpScpProcess = new QProcess(this);
    connect(mpScpProcess, SIGNAL(finished(int)),  this, SLOT(onCopyFinished(int)));
    connect(mpScpProcess, SIGNAL(readyReadStandardOutput()), this, SLOT(onReadCopyOutput()));
}

void CopyClass::startScp()
{
    mpScpProcess->setProcessChannelMode(QProcess::MergedChannels); 
    mpScpProcess->start("scp 192.168.1.100:/file.txt ./");
}

void CopyClass::onCopyFinished(int val)
{
    qWarning("Copy Finished");
}

void CopyClass::onReadCopyOutput()
{
    QString output = mpScpProcess->readAll().data();

    qWarning("Output: %s", qPrintable(output));
} 
```

onCopyFinished 被调用，scp 复制成功，但没有输出（永远不会调用 onReadCopyOutput）。但我知道它应该输出如下内容：

```
file.txt                                     100%  1KB   1.9MB/s   00:00 
```

有谁知道为什么它不起作用？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:37:12.877

scp 在其标准输出被重定向到管道时不生成输出：

```
scp src dest > out.txt
```

你会看到它`out.txt`是空的。我认为您对此无能为力。

# ruby-on-rails - 如果行不存在则创建行

> ID：13773411
> 
> 赞同：2
> 
> 时间：2012-12-08T01:07:37.253
> 
> 标签：ruby-on-rails

我需要做这样的事情：

```
if @item.exists?(:cron => "mycron")
  # redirect to item page
else
  # create new @item
end 
```

在 Rails 中有更简单的方法吗？

也许是这样的：

```
@item.create_if_not_exists(:cron => "mycron") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T01:08:53.883

是的，它被称为**[`find_or_create_by`](http://guides.rubyonrails.org/active_record_querying.html#find-or-build-a-new-object)**

```
@item = Item.find_or_create_by_cron("mycron")
# redirect to item page 
```

# coldfusion - 使用一个连接通过 cfmail 发送邮件

> ID：13773412
> 
> 赞同：4
> 
> 时间：2012-12-08T01:07:41.117
> 
> 标签：coldfusion, smtp, coldfusion-9, cfmail

我遇到了一个问题，我的邮件服务器每 5 分钟只接受 100 个与服务器的连接。我当前的代码循环访问我的数据库，为列表中的每个人调用 cfmail。我想问题是我每次使用 cfmail 时都会打开一个新连接？

```
<CFLOOP QUERY="Customer" >

    <!---send mail to Admin ----->
     <cfmail to = "#cstEmail#"
      from = "#FORM.fromAddressEmail#"
      subject = "#FORM.subjectEmail#"
      server = "#var.mailserver#"
      port= "#var.mailport#"
      username="#var.mailuser#"
      password="#var.mailpass#"
      failto="#var.failEmail#
      type="html"         
       > 
```

我遇到的是一次只发送了 100 封邮件，其余的都发送到了 cf 的未投递文件夹。我会将它们发送到线轴，然后再有 100 个通过..

现在，我在旧版本的 cf 中读到了 cf 管理员中有一个“维护连接”复选框 - 我正在运行 cf9，但看不到此选项。

使用 cfmail 的查询属性会强制 cfmail 只连接到邮件服务器一次以发送所有电子邮件吗？

```
<cfmail query="Customer"
from = "#FORM.fromAddressEmail#"
to = "#cstEmail#"
subject = "#FORM.subjectEmail#"> 
```

我什至不知道如何在不发送几百封电子邮件的情况下进行测试。如果这是解决问题的可行解决方案，有什么想法吗？

谢谢你的帮助！比斯科蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:53:52.260

我最终通过使用计划任务每​​ 5 分钟将文件从 Undelivr 目录移回 Spool 目录而妥协。我对这个解决方案并不感到兴奋，但它确实有效。

感谢 Russ 的 Respooler 扩展。[http://cfrespooler.riaforge.org/](http://cfrespooler.riaforge.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T07:02:58.940

通过使用上面的代码在 CFMAIL 中调用 QUERY，我只成功地加快了客户端进程。邮件服务器在第 100 次连接后仍然拒绝邮件 - 导致我确定与我的第一个示例中一样简单地循环 CFMAIL 相比，这种方法没有服务器端的好处。我似乎唯一的答案是在 cf 环境的企业版中运行代码，该环境启用了“维护连接”功能。

# java - 在jsp中访问请求属性（Spring 3 mvc）

> ID：13773413
> 
> 赞同：1
> 
> 时间：2012-12-08T01:07:45.350
> 
> 标签：java, spring, spring-mvc

我在 spring mvc 中使用了一个非常基本的基本控制器

```
...
@RequestMapping("/welcome")
    public ModelAndView helloWorld() {

        String message = "Hello World, Spring 3.0!";
        return new ModelAndView("helloteste", "message", message);
    }
... 
```

但是从 jsp 访问它时，什么也没有显示。Jsp波纹管

```
<html>
<head>
<title>Spring 3.0 MVC Series: Hello World </title>
</head>
<body>
${message}

</body>
</html> 
```

屏幕上的结果（服务器不解析标签...）

```
${message} 
```

但是，如果我直接从请求的属性中获取信息，它就可以工作......

```
<%
String s = (String ) request.getAttribute("message");
out.print(s);

%> 
```

为什么符号 ${...} 不起作用？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:09:37.313

JSP 似乎没有解析表达式语言。如果您的 web.xml 文件没有`version`为标记指定 2.4 或更高的属性，这可能是一个配置问题`<web-app/>`。在这种情况下，我建议您将 web.xml 文件更新为以下内容，前提是您的应用服务器足够现代：

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">

</web-app> 
```

# twitter-oauth - 处理 oauth_token 和 oauth_verifier 时出现 http 错误 401：未经授权

> ID：13773414
> 
> 赞同：1
> 
> 时间：2012-12-08T01:07:48.220
> 
> 标签：twitter-oauth

有人可以帮忙吗？提前致谢。

我使用 nonce、callback_url、consumer_key 等向 Twitter 发送请求。Twitter 然后提示用户输入登录名和密码。用户成功输入登录凭据。之后，Twitter 将 oauth_token 和 oauth_verifier 发送到之前调用中指定的回调 URl。但现在我总是收到“HTTP Error 401: Unauthorized”错误。有人可以帮忙吗？花了几天时间。谢谢你。

“获取 /account/twitter/oauthacc?oauth_token=ererererer&oauth_verifier=ereret43rwererererer”

```
HTTP Error 401: Unauthorized
    Traceback (most recent call last):
      File 
 "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 714, in __call__handler.get(*groups)
  File "/base/data/home/apps/s~test/2-7.3629731/oauth.py", line 74, in get
    self.mOauthRequestToken = vOauthApi.getRequestToken(self.ACCESS_TOKEN_URL)
  File "/base/data/home/apps/s~-test/2-7.369731/libs/oauthtwitter.py", line 206, in getRequestToken
    resp = self._FetchUrl(url, no_cache=True)
  File "/base/data/home/apps/s~test/2-7.3639731/libs/oauthtwitter.py", line 118, in _FetchUrl
    url_data = opener.open(url).read()
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 387, in open
    response = meth(req, response)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 498, in http_response
    'http', request, response, code, msg, hdrs)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 425, in error
    return self._call_chain(*args)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 360, in _call_chain
    result = func(*args)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 506, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 401: Unauthorized 
```

# c - C中的二维数组和警告：赋值使指针从没有强制转换的整数

> ID：13773415
> 
> 赞同：2
> 
> 时间：2012-12-08T01:07:50.543
> 
> 标签：c, arrays, segmentation-fault, 2d

我不经常用 C 语言编写，遇到了一些麻烦。对于初学者，我想我确信我将从文本文件中读取的行正确地放入二维数组中。当我尝试将线放入数组时，我也遇到了问题。我收到一个警告，即赋值从没有强制转换的指针中生成整数。我希望它是一个字符，我认为这就是我得到 Seg Fault 的原因，因为它大于我分配的大小。我在下面包含了我的代码。我敢打赌这是一个愚蠢的错误，我有一段时间没有使用 C，谢谢！

```
#include <stdio.h>
FILE *fid;
char line[70];
char dna[66800][70];

main() {
    int counter = 0; 
    fid = fopen("dna.fna","r");
    while(fgets(line, sizeof(line), fid) != NULL){
        //fputs ( line, stdout ); 
    dna[counter][0] = line;   //Getting a Seg Fault here     
    counter++;
    }

    fclose(fid); 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:10:04.150

这种情况下的赋值实际上应该是一个副本，如下所示：

```
strncpy(dna[counter], line, sizeof(line)); 
```

您收到的警告是由于`line`被衰减为指针并试图将其分配给`char`.

您还必须确保`counter`永远不会超过 66800。

# php - jQuery 与 php 而在表 tr td 列的总和为小计

> ID：13773418
> 
> 赞同：0
> 
> 时间：2012-12-08T01:07:55.533
> 
> 标签：php, jquery

我想知道我的 jquery 是否适合添加 td 并获得小计和总计的总计。

我的jQuery是，

```
$(document).ready(function(){
    var sum = 0;
    var td = $('input[name=sumof]').val();
    jQuery.each(td,function(number){
            sum += parseInt($(this).val());
        $('#total_f').val(sum);
    });
}) 
```

这是我的html

```
<div class="quotation_computation" style="margin-top:50px;">
    <table cellpadding="5" cellspacing="0" width="100%">
        <tr>
            <th>#</th>
            <th>Definition</th>
            <th>Amount</th>
            <th>Total</th>
            <th>BTW</th>
        </tr>
        <?
        $get_details = mysql_query( "SELECT * FROM jon_com_quo_computation WHERE com_code = '".$_GET['ccom']."' " ) or die ( mysql_error());

            $found_record = mysql_num_rows( $get_details );
            if ( $found_record != 0 ) {
            while( $set_det = mysql_fetch_array( $get_details ) ) {
                $total = $set_det['quo_quantity'] * $set_det['quo_amt'];
            ?>
        <tr>
            <td class="add_text">
                    <?=$set_det['quo_quantity'];?> x
            </td>
            <td class="add_text" width="250"><?=$set_det['quo_definition'];?></td>
            <td class="sum_text">
                    <?=$set_det['quo_amt'];?>
                <input type="hidden" name="sumof" value="<?=$set_det['quo_amt'];?>" />
            </td>
            <td class="add_text" id="total"><?=$total;?></td>
            <td class="add_text"><?=$set_det['quo_btw'];?></td>
        </tr>
        <?
                }
            } else {
            ?>                
        <tr>
            <td class="add_text">#</td>
            <td class="add_text">Definition</td>
            <td class="add_text">Amount</td>
            <td class="add_text" id="total">Total</td>
            <td class="add_text">BTW</td>
        </tr>
        <?
            }
            ?>
    </table>
</div>

<div class="sub_total_computation" style="width:200px; position:relative; left:325px;">
<?
    $get_total_computation = SET_SQL( "SELECT quo_btw FROM jon_com_quo_computation WHERE com_code = '".$_GET['ccom']."' " );

    ?>
    <table cellpadding="5" cellspacing="0" width="100%">
        <tr>
            <td><strong>Sub Total</strong></td>
            <td>
                <span id="total_f"></span>
                <input type="hidden" name="total_f" value="" />
            </td>
        </tr>
        <tr>
            <td><?=$get_total_computation['quo_btw'];?></td>
            <td><?=$btw;?></td>
        </tr>
        <tr>
            <td><strong>Total</strong></td>
            <td><?=$btw;?></td>
        </tr>
    </table>
</div> 
```

如果您看到`hidden name=sumof`即时消息将把答案也放在那里，`td class=sum_text`但答案没有出现。我们是否需要使用 on`.keyup`函数才能出现 jquery？或者我只需要使用`PHP`它就可以了？

谢谢你，先生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:11:43.620

尝试这个：

```
$(document).ready(function(){
   var sum = 0;
   $('input[name=sumof]').each(function(){
        sum += parseInt($(this).val());
   });
   $('#total_f').val(sum);
 }); 
```

您的变量 td 只会从输入元素中获取一个值，并且不足以用作对象（输入元素）与您的 each() 函数循环。此外，您只需要让函数输出总和一次，因此我将其从每个循环中取出。

为了进一步提高函数效率，您可以只使用 td 元素的内容，并完全删除隐藏的输入元素：

```
$(document).ready(function(){
   var sum = 0;
   $('td.sum_text').each(function(){
        sum += parseInt($(this).text());
   });
   $('#total_f').val(sum);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T01:12:55.760

你这里有问题：

```
var td = $('input[name=sumof]').val();    // you are getting the value of the first matched element
jQuery.each(td,function(number){
    sum += parseInt($(this).val()); 
```

您假设`td`包含一个集合，但是当您使用 时`val()`，结果是`Description: Get the current value of the first element in the set of matched elements.`

所以只需将其更改为：

```
var td = $('input[name=sumof]'); 
```

# ruby-on-rails - Rails - 由于验证而导致功能测试失败

> ID：13773423
> 
> 赞同：0
> 
> 时间：2012-12-08T01:08:35.320
> 
> 标签：ruby-on-rails, validation, pdf, tdd, paperclip

我一生都无法弄清楚这里出了什么问题。这是这种情况：

*   我有一个使用回形针作为 pdf 附件的文档模型
*   功能测试上传文档失败
*   这样做的原因是我验证它是一个 pdf 文件 - 不知何故验证失败
*   但是，该文件*是*pdf，并且验证不应失败
*   验证仅在测试中失败 - 通过上传它抱怨的文件手动完成工作绝对正常

这是我失败的测试（计数不增加一）：

```
test "should create document" do
  assert_difference('Document.count') do
    post :create, document: { pdf: fixture_file_upload("../files/document_test_file.pdf"), language: @document.language, published_on: @document.published_on, tags: @document.tags, title: @document.title, user_id: @user }
  end

  assert_redirected_to document_path(assigns(:document))
end 
```

这是我在文档模型中的验证：

```
def document_is_a_pdf
  if !self.pdf.content_type.match(/pdf/)
    errors.add(:pdf, "must be a pdf file")
    false
  end
end 
```

如果我不在模型中调用该验证，则测试运行良好。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-27T10:06:46.993

我知道这是一个老问题，但如果有人仍然需要帮助，

来自[http://apidock.com/rails/ActionController/TestProcess/fixture_file_upload](http://apidock.com/rails/ActionController/TestProcess/fixture_file_upload)

```
 fixture_file_upload(path, mime_type = nil, binary = false) 
```

默认情况下，Fixture 文件上传方法会将 mime 类型设置为 nil，因此只需如下更改 mime 类型即可解决此问题

```
 fixture_file_upload("../files/document_test_file.pdf", 'application/pdf') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:55:56.440

我发现了问题。不知何故，在测试时，无法确定内容类型。这就是内容类型验证失败且测试未通过的原因。

我将内容类型添加到文档模型中的可访问属性中，并在测试中插入了内容类型（文档哈希中的第二个属性）：

```
test "should create document" do
  assert_difference('Document.count') do
    post :create, document: { pdf: fixture_file_upload("../files/document_test_file.pdf"), pdf_content_type: "application/pdf", language: @document.language, published_on: @document.published_on, tags: @document.tags, title: @document.title, user_id: @user }
  end

  assert_redirected_to document_path(assigns(:document))
end 
```

# java - 哈希表 Java 插入

> ID：13773428
> 
> 赞同：6
> 
> 时间：2012-12-08T01:09:41.373
> 
> 标签：java, hashtable

我是 Java 新手，我正在尝试学习哈希表。我想将对象插入到我的哈希表中，然后能够在最后打印哈希表中的所有对象。我不确定我这样做是否正确，因为我已经读到我需要重写 get() 方法或 hashCode() 方法，但我不知道为什么。

我正在传递学生姓名的字符串对象。当我在插入后运行调试器时，它会将键显示为“null”，并且插入的索引位于哈希表中的随机位置。前任。1、6、10

这就是我一直在添加的方式。谁能告诉我这是否正确，我真的需要覆盖吗？

提前致谢！

**代码**

```
 Hashtable<String,String> hashTable=new Hashtable<String,String>();
 hashTable.put("Donald", "Trump");
 hashTable.put("Mike", "Myers");
 hashTable.put ("Jimmer", "Markus"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:14:55.187

你做事正确。请记住，a`Hashtable`不是直接访问结构。例如，您不能“从 a 中获取第三项`Hashtable`”。当您谈论 a 时，“索引”一词没有真正的含义`Hashtable`：项目的数字索引没有任何意义。

A`Hashtable`保证它将为您保存键值对，从而可以*非常*快速地根据键得出值（例如：给定`Donald`，您将`Trump`很快得到）。当然，必须满足某些条件才能使其正常工作，但对于您的简单字符串到字符串示例，这是有效的。

您应该阅读更多关于哈希表的一般信息，以了解它们在幕后是如何工作的。

**编辑**（根据 OP 的要求）：您正在询问有关`Student`在 Hashtable 中存储实例的问题。正如我上面提到的，必须解决某些条件才能使 Hashtable 正常工作。这些条件是关于*关键*部分，而不是*价值*部分。

如果您的`Student`实例是*value*，而简单的 String 是*key*，那么您无需做任何特别的事情，因为 String 原语已经回答了正确 Hashtable 键所需的所有条件。

如果您的`Student`实例是*key*，则必须满足以下条件：

1.  在内部`Student`，您必须`hashCode`以这样的方式覆盖该方法，以便后续调用`hashCode`将返回完全相同的值。换句话说，表达式`x.hashCode() == x.hashCode()`必须**始终**为真。

2.  在 内部`Student`，您必须重写该`equals`方法，使其仅返回`true`两个相同的 实例，否则`Student`返回。`false`

这些条件足以`Student`充当适当的 Hashtable 键。你可以通过编写一个更好的`hashCode`实现来进一步优化事情（阅读它......在这里输入很长），但只要你回答了上述两个，你就可以了。

例子：

```
class Student {
    private String name;
    private String address;

    public int hashCode() {
        // Assuming 'name' and 'address' are not null, for simplification here.

        return name.hashCode() + address.hashCode();
    }

    public boolean equals (Object other) {
        if (!(other instanceof Student) {
            return false;
        }
        if (other == this) {
            return true;
        }

        Student otherStudent = (Student) other;
        return name.equals(otherStudent.name) && address.equals(otherStudent.address);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:27:04.903

试试这个代码：

```
 Hashtable<String,String> hashTable=new Hashtable<String,String>();

 hashTable.put("Donald", "16 years old");
 hashTable.put("Mike", "20 years old");
 hashTable.put ("Jimmer", "18 years old");

Enumeration studentsNames; 
String str; 

// Show all students in hash table. 
studentsNames = hashTable.keys(); 
while(studentsNames.hasMoreElements()) { 
str = (String) studentsNames.nextElement(); 
txt.append("\n"+str + ": " + hashTable.get(str)); 
} 
```

# c - 不兼容的整数到指针转换将“int”传递给“const char *”类型的参数

> ID：13773431
> 
> 赞同：0
> 
> 时间：2012-12-08T01:09:56.163
> 
> 标签：c

我有以下代码因 EXC_BAD_ACCESS (code=1) 而失败，并有以下警告：

不兼容的整数到指针转换将“int”传递给“const char *”类型的参数

```
char *printb(fmt,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10)
{
    static char string[256];
    sprintf(string,fmt,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10);
    return(string);
} 
```

此代码正在调用 printb：

```
 if (gotargs) fname = *(argv++);
    else do {
        printf("file name #%d: ", i+1);
        fname = gets(inbuf);
    } while (*fname == 0);
    if ((gbuf=fopen(fname, "r")) == NULL)
        error(printb("I can't find '%s'", fname));
    printf("reading '%s'...\n", fname);
    if (fgets((lp = inbuf), 512, gbuf) == NULL)
        error("file is empty"); 
```

另外，我怎样才能正确地将 gets() 转换为 fgets() ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:12:51.190

嗯，为什么要用古式的函数声明

```
char *printb(fmt,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,a10)
{ 
```

?

此声明将所有参数声明为`int`s。您尝试将`char *`指针传递给此函数只会导致灾难。此外，您没有在`printb`调用中提供所有参数，这是另一场灾难。

看起来您正在尝试实现一个具有可变数量参数的函数。特别是该语言支持`...`参数声明。阅读有关可变参数函数和`va_list`.

您的功能将按照以下方式实现

```
char *printb(const char *fmt, ...)
{
   static char string[256];
   va_list va;

   va_start(va, fmt);
   vsprintf(string, fmt, va);
   va_end(va);

   return string;
} 
```

或更好

```
 ...
   vsnprintf(string, sizeof string, fmt, va);
   ... 
```

尽管返回指向内部静态缓冲区的指针的想法也存在缺陷。

同时，试图用你的方法“模仿”可变参数是没有希望的。它行不通。

# c - Valgrind 结果很干净，但分配比释放更多

> ID：13773434
> 
> 赞同：4
> 
> 时间：2012-12-08T01:10:11.043
> 
> 标签：c, pointers, memory-leaks, heap-memory, valgrind

我从 Valgrind 得到这个结果：

```
 ==24810== HEAP SUMMARY:
    ==24810==     in use at exit: 0 bytes in 0 blocks
    ==24810==   total heap usage: 9 allocs, 6 frees, 0 bytes allocated
    ==24810== 
    ==24810== LEAK SUMMARY:
    ==24810==    definitely lost: 0 bytes in 0 blocks
    ==24810==    indirectly lost: 0 bytes in 0 blocks
    ==24810==      possibly lost: 0 bytes in 0 blocks
    ==24810==    still reachable: 0 bytes in 0 blocks
    ==24810==         suppressed: 0 bytes in 0 blocks 
```

它说没有内存泄漏。在我看来这是一个很好的结果。但是，这*9 个分配，6 个释放*呢？看起来我还没有在某处释放一些内存。我检查了代码，有 3 个全局 const 指针。也许它们不被视为错误，而是被打印为未释放？

我应该担心这个还是应该认为代码没有错误？谢谢你们。....只是试图理解指针和内存分配的所有 ANSI C 麻烦:)))

格言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:30:07.733

in valgrind website [http://valgrind.org/docs/manual/quick-start.html#quick-start.interpret](http://valgrind.org/docs/manual/quick-start.html#quick-start.interpret)

> "definitely lost": your program is leaking memory -- fix it!
> 
> "probably lost": your program is leaking memory, unless you're doing funny things with pointers (such as moving them to point to the middle of a heap block).

So for your case your program should be good.

# delphi - 在 OwnerData 和 OwnerDraw 设置为 True 的 TListView 上显示错误提示

> ID：13773435
> 
> 赞同：11
> 
> 时间：2012-12-08T01:10:21.680
> 
> 标签：delphi, delphi-2007, hint, ownerdrawn, tlistview

我使用 Delphi 2007。我有一个`TListView`with`OwnerData`并`OwnerDraw`设置为 True。`ViewStyle`设置为`vsReport`。

我有一个`record`.

```
type TAList=record
  Item:Integer;
  SubItem1:String;
  SubItem2:String;
end;

var
 ModuleData: array of TAList;

procedure TForm1.ListView3Data(Sender: TObject; Item: TListItem);
begin
 Item.Caption := IntToStr(ModuleData[Item.Index].Item);
 Item.SubItems.Add(ModuleData[Item.Index].SubItem1);
 Item.SubItems.Add(ModuleData[Item.Index].SubItem2);
end;

procedure TForm1.ListView3DrawItem(Sender: TCustomListView; Item: TListItem; Rect: TRect; State: TOwnerDrawState);
var
 LIndex : integer;
 LRect: TRect;
 LText: string;
 TTListView: TListView;
begin
 TTListView := TListView(Sender);

 if (Item.SubItems[0] = '...') then
 begin
  TTListView.Canvas.Brush.Color := clHighlight;
  TTListView.Canvas.Font.Color  := clHighlightText;
 end else
 begin
  TTListView.Canvas.Brush.Color := TTListView.Color;
  TTListView.Canvas.Font.Color  := TTListView.Font.Color;
 end;

 for LIndex := 0 to TTListView.Columns.Count - 1 do
 begin
  if (not(ListView_GetSubItemRect(TTListView.Handle, Item.Index, LIndex, LVIR_BOUNDS, @LRect))) then Continue;
  TTListView.Canvas.FillRect(LRect);
  if (LIndex = 0) then LText := Item.Caption else LText := Item.SubItems[LIndex - 1];
  LRect.Left := LRect.Left + 6;
  DrawText(TTListView.Canvas.Handle, PChar(LText), Length(LText), LRect, DT_SINGLELINE or DT_VCENTER or DT_NOPREFIX or DT_END_ELLIPSIS);
 end;
end; 
```

我希望在 SubItem2 被截断时显示提示。在 Windows XP 上，根本不显示任何提示。在 Windows Vista 和 Windows 7 上，当我的鼠标悬停在某个项目上时，它会显示一个完全关闭的提示。

我没有处理提示的特殊代码。应该有一个`OwnerData`和`OwnerDraw`模式吗？

这是我得到的图像：

[![列表显示](../Images/4c767913c1e94b71e0cca818c80822a0.png)](https://i.stack.imgur.com/HvXMX.png)
[（来源：[noelshack.com](https://image.noelshack.com/fichiers/2012/49/1354932206-1.png)）]

[![带有提示的列表视图](../Images/c2e42036f901a94babf10152085ac7d9.png)](https://i.stack.imgur.com/iL82W.png)
[（来源：[noelshack.com](https://image.noelshack.com/fichiers/2012/49/1354932206-2.png)）]

**编辑：** 大卫问为什么`OwnerDraw`设置为`True`. 有两个原因：

1.  这样，我可以“禁止”用户选择。
2.  如果我设置`OwnerDraw`为`False`，我会遇到另一个问题。请参阅[为什么在自定义绘制的列表视图上出现白色列分隔符？](https://stackoverflow.com/questions/13276910/why-do-i-get-white-column-separators-on-my-custom-drawn-listview)

**编辑 2：** 如果我`OnInfoTip`按照 TLama 的建议处理事件，我会得到一个非主题的气球提示*和*来自 Windows Vista 和 7 的错误提示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T13:32:02.673

## 1\. 环境

此处描述的行为我仅在 Windows 7 SP1 64 位家庭高级版上体验和测试过，最新更新安装在 Delphi 2009 中内置的应用程序中，也应用了最新更新。在其他系统中，我没有尝试过这个。

## 2.关于问题

您可以在屏幕截图中看到的默认项目提示并非来自 VCL。在您刚刚点击的某些情况下，系统以错误的方式显示这些提示，可能以某种方式缓存。您悬停的最后一个项目的文本显示为您刚刚悬停的项目的提示。这是属性配置（只是重要的部分；其余部分我保留在默认组件值中）：

```
ListView1.ShowHint := False;
ListView1.OwnerData := True;
ListView1.OwnerDraw := True;
ListView1.ViewStyle := vsReport; 
```

处理以下事件：

```
OnData
OnDrawItem 
```

实际上，您甚至不需要处理[`OnDrawItem`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TCustomListView.OnDrawItem)来模拟问题。[`OnData`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TListView.OnData)提示由事件中的项目提供的文本显示。我无法更深入地追踪它，因为似乎没有通知处理程序（甚至系统通知）可能与您在 VCL 中看到的提示有关，这就是我怀疑系统的原因。

## 三、解决之道

我尝试过的任何方法都无法解决保持当前属性配置的问题。这是我尝试过的列表：

### 3.1。删除 LVS_EX_LABELTIP 样式？

作为一个热门的最爱，实际上我检查的第一个是[`LVS_EX_LABELTIP`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774732%28v=vs.85%29.aspx#LVS_EX_LABELTIP)从列表视图的样式中排除，希望项目提示显示将停止，您将能够通过[`OnInfoTip`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TCustomListView.OnInfoTip)事件实现自己的自定义提示。问题是，这种样式没有在列表视图控件的任何地方实现，因此它不包含在列表视图样式中。

### 3.2\. 禁用 OwnerDraw 属性？

将[`OwnerDraw`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TCustomListView.OwnerDraw)属性设置为 False 实际上可以解决问题（然后通过实际悬停的项目显示提示以及正确的项目文本），但是您已经说过您需要使用所有者绘图，因此它也不是您的解决方案。

### 3.3\. 删除 LVS_EX_INFOTIP 样式？

从列表视图的样式中删除[`LVS_EX_INFOTIP`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774732%28v=vs.85%29.aspx#LVS_EX_INFOTIP)样式最终停止了系统显示项目提示，但也导致控件停止向父级发送工具提示通知。因此，[`OnInfoTip`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ComCtrls.TCustomListView.OnInfoTip)事件的功能被切断。在这种情况下，您需要完全自己实现提示处理。这就是我在下面的代码中尝试过的。

## 4\. 解决方法

我决定通过排除[`LVS_EX_INFOTIP`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774732%28v=vs.85%29.aspx#LVS_EX_INFOTIP)样式并实现自己的工具提示处理来禁用列表视图的所有系统提示。到目前为止，我至少知道以下问题：

*   当您使用常规[`Hint`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TControl.Hint)属性并将具有缩短标题的项目悬停到列表视图的*空白*[`Hint`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TControl.Hint)区域时，会显示，但除非您退出控制客户端矩形或提示显示时间间隔过去，否则它不会隐藏（即使您再次悬停带有缩短标题的项目）。问题是我不知道如何`CursorRect`为`THintInfo`结构指定，以便您*覆盖*整个客户矩形，除了项目区域矩形。

*   您必须使用与您在所有者绘图事件方法中使用的相同的项目矩形范围，因为系统不知道您在哪里呈现项目的文本。因此，另一个缺点是保持同步。

这是一个演示项目的主要单元代码，[`from here`](http://projects-stackoverflow-tlama.googlecode.com/files/13773435v3.ZIP)如果需要，您可以下载：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ComCtrls, CommCtrl, StdCtrls;

type
  TRecord = record
    Item: Integer;
    SubItem1: string;
    SubItem2: string;
  end;

type
  TListView = class(ComCtrls.TListView)
  private
    procedure CMHintShow(var AMessage: TCMHintShow); message CM_HINTSHOW;
  end;

type
  TForm1 = class(TForm)
    ListView1: TListView;
    procedure FormCreate(Sender: TObject);
    procedure ListView1DrawItem(Sender: TCustomListView; Item: TListItem;
      Rect: TRect; State: TOwnerDrawState);
    procedure ListView1Data(Sender: TObject; Item: TListItem);
  private
    ModuleData: array of TRecord;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
  ListColumn: TListColumn;
begin
  SetLength(ModuleData, 3);
  ModuleData[0].Item := 0;
  ModuleData[0].SubItem1 := '[0;0] Subitem caption';
  ModuleData[0].SubItem2 := '[1;0] Subitem caption';
  ModuleData[1].Item := 1;
  ModuleData[1].SubItem1 := '[0;1] Subitem caption';
  ModuleData[1].SubItem2 := '[1;1] Subitem caption';
  ModuleData[2].Item := 2;
  ModuleData[2].SubItem1 := '[0;2] This is a long subitem caption';
  ModuleData[2].SubItem2 := '[0;2] This is even longer subitem caption';

  ListView1.OwnerData := True;
  ListView1.OwnerDraw := True;
  ListView1.ViewStyle := vsReport;

  ListView_SetExtendedListViewStyle(
    ListView1.Handle,
    ListView_GetExtendedListViewStyle(ListView1.Handle) and not LVS_EX_INFOTIP);

  ListColumn := ListView1.Columns.Add;
  ListColumn.Caption := 'Col. 1';
  ListColumn.Width := 50;
  ListColumn := ListView1.Columns.Add;
  ListColumn.Caption := 'Col. 2';
  ListColumn.Width := 50;
  ListColumn := ListView1.Columns.Add;
  ListColumn.Caption := 'Col. 3';
  ListColumn.Width := 50;

  ListView1.Items.Add;
  ListView1.Items.Add;
  ListView1.Items.Add;
end;

procedure TForm1.ListView1Data(Sender: TObject; Item: TListItem);
begin
  Item.Caption := IntToStr(ModuleData[Item.Index].Item);
  Item.SubItems.Add(ModuleData[Item.Index].SubItem1);
  Item.SubItems.Add(ModuleData[Item.Index].SubItem2);
end;

procedure TForm1.ListView1DrawItem(Sender: TCustomListView; Item: TListItem;
  Rect: TRect; State: TOwnerDrawState);
var
  R: TRect;
  S: string;
  SubItem: Integer;
  ListView: TListView;
begin
  ListView := TListView(Sender);

  if (Item.SubItems[0] = '...') then
  begin
    ListView.Canvas.Brush.Color := clHighlight;
    ListView.Canvas.Font.Color  := clHighlightText;
  end
  else
  begin
    ListView.Canvas.Brush.Color := ListView.Color;
    ListView.Canvas.Font.Color  := ListView.Font.Color;
  end;

  for SubItem := 0 to ListView.Columns.Count - 1 do
  begin
    if ListView_GetSubItemRect(ListView.Handle, Item.Index, SubItem,
      LVIR_LABEL, @R) then
    begin
      ListView.Canvas.FillRect(R);
      if (SubItem = 0) then
        S := Item.Caption
      else
      begin
        R.Left := R.Left + 6;
        S := Item.SubItems[SubItem - 1];
      end;
      DrawText(ListView.Canvas.Handle, PChar(S), Length(S), R, DT_SINGLELINE or
        DT_VCENTER or DT_NOPREFIX or DT_END_ELLIPSIS);
    end;
  end;
end;

{ TListView }

procedure TListView.CMHintShow(var AMessage: TCMHintShow);
var
  R: TRect;
  S: string;
  Item: Integer;
  SubItem: Integer;
  HitTestInfo: TLVHitTestInfo;
begin
  with AMessage do
  begin
    HitTestInfo.pt := Point(HintInfo.CursorPos.X, HintInfo.CursorPos.Y);
    if ListView_SubItemHitTest(Handle, @HitTestInfo) <> -1 then
    begin
      Item := HitTestInfo.iItem;
      SubItem := HitTestInfo.iSubItem;

      if (Item <> -1) and (SubItem <> -1) and
        ListView_GetSubItemRect(Handle, Item, SubItem, LVIR_LABEL, @R) then
      begin
        if (SubItem = 0) then
          S := Items[Item].Caption
        else
        begin
          R.Left := R.Left + 6;
          S := Items[Item].SubItems[SubItem - 1];
        end;

        if ListView_GetStringWidth(Handle, PChar(S)) > R.Right - R.Left then
        begin
          MapWindowPoints(Handle, 0, R.TopLeft, 1);
          MapWindowPoints(Handle, 0, R.BottomRight, 1);

          HintInfo^.CursorRect := R;
          HintInfo^.HintPos.X := R.Left;
          HintInfo^.HintPos.Y := R.Top;
          HintInfo^.HintMaxWidth := ClientWidth;
          HintInfo^.HintStr := S;

          AMessage.Result := 0;
        end
        else
          AMessage.Result := 1;
      end
      else
        AMessage.Result := 1;
    end
    else
      inherited;
  end;
end;

end. 
```

# java - Java Applet Not Finding File

> ID：13773446
> 
> 赞同：0
> 
> 时间：2012-12-08T01:12:57.990
> 
> 标签：java, file, applet

> **Possible Duplicate:**
> [Applet not reading file](https://stackoverflow.com/questions/13773182/applet-not-reading-file)

I have an applet that I am trying to make read a file. It throws a filenotfound exception, but I am passing it the correct path so I am not sure where I am going wrong. I am using this to read numbers and use those numbers to change a multidimensional array, if you were wondering. Heres the code:

```
public class Save {
    public void loadSave(File loadPath) {
        try {
            Scanner loadScanner = new Scanner(loadPath);

            while(loadScanner.hasNext()){
                for(int y = 0; y < Screen.room.block.length;y++){
                    for(int x = 0; x < Screen.room.block[0].length;x++){
                        Screen.room.block[y][x].groundID = loadScanner.nextInt();
                        System.out.println(loadScanner.nextInt());
                    }   
                }
                for(int y = 0; y < Screen.room.block.length;y++){
                    for(int x = 0; x < Screen.room.block[0].length;x++){
                        Screen.room.block[y][x].airID = loadScanner.nextInt();
                    }   
                }
            }
            loadScanner.close();
        } catch (Exception e) { e.printStackTrace();}
    }
} 
```

How I access it:

```
save.loadSave(new File(frame.getClass().getResource("mission1.tdm").toString())); 
```

# authentication - Symfony2 FosUser：CSRF 令牌问题

> ID：13773447
> 
> 赞同：0
> 
> 时间：2012-12-08T01:13:18.700
> 
> 标签：authentication, symfony, csrf, fosuserbundle

我使用 FOSUser bundle 提供的认证系统

一切都很好，但最近点击：

```
 <form action="{{ path('fos_user_registration_register') }}" method="post">                          
                           <button class="btn btn-small btn-success" type="submit">S'inscrire</button>                     
     </form> 
```

生成错误：CSRF 令牌无效。请尝试重新提交表单。

FOSUserBundle 的视图和控制器都没有被修改...！？

这是怎么发生的，如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T02:13:54.600

确保你的树枝模板有

```
{{form_rest(form)}} 
```

或者你的 php 文件有

```
<?php echo $view['form']->rest($form) ?> 
```

如果您指定单个字段

# regex - 可被 8 或奇数整除的二进制数的正则表达式

> ID：13773448
> 
> 赞同：0
> 
> 时间：2012-12-08T01:13:20.770
> 
> 标签：regex

> “编写一个正则表达式来描述所有零字符串和表示二进制数的字符串，这些二进制数可以是奇数或可被 8 整除。这些数字可能没有任何前导零。”

我给出了`(000|1)$`标记为错误的答案。我看不出原因。请解释！提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:15:33.393

您忘记了其中两个要求。

1.  它必须只包含`1`s 和`0`s：

    ```
    ^[01]*(000|1)$ 
    ```

2.  可能没有前导`0`s：

    ```
    ^(?!0)[01]*(000|1)$ 
    ```

    如果不允许前瞻，它会变得有点棘手：

    ```
    ^1[01]*(000|1)$|^1$ 
    ```

另一个补充，如果您只允许使用“理论”正则表达式（交替、组和重复）中可用的正则表达式结构，它看起来像这样（在这种情况下，锚是隐含的）：

```
1(0|1)*(000|1)|1 
```

# visual-studio-2012 - Can not refactor in Visual Studio 2012

> ID：13773449
> 
> 赞同：2
> 
> 时间：2012-12-08T01:13:24.263
> 
> 标签：visual-studio-2012

I can not access the refactoring menu, my code compiles and runs, and I can't use the shortcut; it says that the refactoring extract method is not available at this time and I do not have the right click option nor the top menu.

Any thoughts?

# php - 用 stristr() 替换不推荐使用的 eregi()。这个 php 邮件脚本对标头注入安全吗？

> ID：13773451
> 
> 赞同：2
> 
> 时间：2012-12-08T01:14:23.683
> 
> 标签：php, email-headers, eregi

多年来，我一直在使用相同的 php 脚本从联系表单发送电子邮件。但是当我的网络服务器升级到 php 5.3 时，对 eregi 的调用导致显示已弃用的错误。

在谷歌搜索后，我了解到我可以使用 stristr 而不是 eregi。

当我进行这个简单的切换时，一切正常，但我不是 php 向导，所以我想知道我的脚本是否仍然可以防止头注入。

有人可以让我放心并确认此脚本是安全的（或至少足够安全）以用于从联系表发送电子邮件吗？

以下是使用 stristr 的当前脚本的示例：

```
 <?

$to="myemail@gmail.com";

// the $Name is the PHP variable, the _Post['Name'] should match the name of the input boxes in the form

$Name=$_POST['Name'];

$Email=$_POST['Email'];

$Phone=$_POST['Phone'];

$Message=$_POST['Message'];

// you can format the email anyway you want.

$message="Form submitted by $Name

Applicant Information:\n

Name: $Name

Email: $Email

Phone: $Phone

Message: $Message";

// Check for script HiJack

$arBadStr = array("Content-Type:", "MIME-Version:", "Content-Transfer-Encoding:", "bcc:", "cc:");

foreach($_POST as $tName => $tVal){

foreach($arBadStr as $tStr){

if(stristr($tStr, $tVal)){

$fSub = "Failed: Header Injection.";

reportError($fSub); 

}}}

if(mail($to,"mywebsite.com contact Form Submission",$message,"From: $Name <$Email>")) {

echo "Thank you $Name for your interest. We will contact you shortly";

} else {

echo "There was a problem sending the mail. Please check that you filled in the form correctly.";

}

// Report error function called when test detects hijacking. Mails report to webmaster and kills process.

function reportError($fSub) {

while(list($name, $value) = each($_POST)) {

$eBody .= "$name : $value \n\r"; }

mail( "myemail@gmail.com", $fSub, $eBody, "From: Webmaster <myemail@gmail.com>");

exit(header("Location: http://www.mywebsite.com")); }

?> 
```

## 更新

基于 cryptic 的慷慨帮助，这就是我的新脚本的样子。如您所见，我已经删除了一些标题验证功能，而不是简单地清理输入字段。

```
 <?
$to="myemail@gmail.com";

// the $Name is the PHP variable, the _Post['Name'] should match the name of the input boxes in the form

$Name = str_replace(array("\n", "\r"), '', $_POST['Name']);
$Email = str_replace(array("\n", "\r"), '', $_POST['Email']);
$Phone = str_replace(array("\n", "\r"), '', $_POST['Phone']);
$Message = str_replace(array("\n", "\r"), '', $_POST['Message']);

function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

$Name = clean_string($Name);
$Email = clean_string($Email);
$Phone = clean_string($Phone);
$Message = clean_string($Message);

// you can format the email anyway you want.

$message="Form submitted by $Name

Applicant Information:\n

Name: $Name

Email: $Email

Phone: $Phone

Message: $Message";

if(mail($to,"mywebsite.com contact Form Submission",$message,"From: $Name <$Email>")) {

echo "Thank you $Name for your interest. We will contact you shortly";

} else {

echo "There was a problem sending the mail. Please check that you filled in the form correctly.";

}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:40:26.833

您尝试将 BCC、CC 等标头列入黑名单，但无法阻止 TO、FROM。

> RFC 822 第 16 页第 4.1 节中指出：
> 
> 该规范允许大多数字段多次出现。除非另有说明，否则此处未指定它们的解释，并且不鼓励使用它们。

因此，攻击者将能够操纵消息以添加其他收件人和发件人。您实际上应该只检查换行符和回车符，或者只是通过删除 \r 和 \n 字符来清理所有 $_POST 值。

```
<?php

function clean_string($string) 
{
    return str_replace(array("\n", "\r"), '', $string);
}

$to = 'myemail@gmail.com';

// the $Name is the PHP variable, the _Post['Name'] should match the name of the input boxes in the form
$Name    = clean_string($Name);
$Email   = clean_string($Email);
$Phone   = clean_string($Phone);
$Message = clean_string($Message);

// you can format the email anyway you want.
$message = "Form submitted by $Name

Applicant Information:\n

Name: $Name

Email: $Email

Phone: $Phone

Message: $Message";

if (mail($to, 'mywebsite.com contact Form Submission', $message, "From: $Name <$Email>"))
{
    echo 'Thank you ' . htmlspecialchars($Name) . ' for your interest. We will contact you shortly';
}
else
{
    echo "There was a problem sending the mail. Please check that you filled in the form correctly.";
}

?> 
```

# mod-rewrite - 使用 HTACCESS 或 PHP 进行 301 URL 转发

> ID：13773453
> 
> 赞同：0
> 
> 时间：2012-12-08T01:14:53.800
> 
> 标签：mod-rewrite

只是好奇是否有人可以帮助我解决这个 HTACCESS 问题。

我有这些需要正确转发的旧 URL。

**以前的结构**

domain.com/Canada/Accounting

domain.com/Canada/Trades

domain.com/Canada/Sales

**适当的结构**

类别 - /jobs/accounting-jobs

位置 - /jobs/jobs-kelowna

一起 - /jobs/accounting-jobs-kelowna

**域结构**

domain.com/jobs/ *[类别]* -jobs- *[位置]*

这是可能的，无论是通过 HTACCES 还是 PHP ......只是不想要这些 404'ed 页面。如果有转发这些的好方法，我有 86+ 要做。这就是我所拥有的，但我无法正确成功地转发错误的网址。

**老的**

```
/browse
/Toronto/
/Canada/Administrative
/Vancouver/
/Canada/Trades
/Calgary/
/Canada/Hospitality 
```

这是我现在的 HTACCESS。

```
Options +FollowSymlinks

    RewriteEngine on
    RewriteBase /

    #
    # Trailing slash check
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
    RewriteRule ^(.*)$ $1/ [L,R=301]

    #
    # PAGES
    RewriteRule ^add-job/?$     /add-job.php [L]
    RewriteRule ^jobs/?$        /results.php [L]
    RewriteRule ^sitemap/?$     /sitemap.php [L]

    #
    # SEARCH
    # CATEGORY - accounting-jobs
    # LOCATION -            jobs-kelowna
    # TOGETHER - accounting-jobs-kelowna
    RewriteRule ^jobs/([a-zA-Z0-9_-]+)/([0-9]+)?$    results.php?whatwhere=$1&page=$2
    RewriteRule ^jobs/([a-zA-Z0-9_-]+)/([0-9]+)/?$   results.php?whatwhere=$1&page=$2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:23:31.130

如果你有`mod_rewrite`，你可以将这些行添加到你的`.htaccess`文件中：

```
RewriteEngine on
RewriteRule ^Canada/Accounting$ /jobs/accounting-jobs [R,L] 
```

但是，您的问题尚不清楚您想要映射什么。前 3 个 URL 是否应该重定向到 3 个新 URL？他们似乎并不等同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:28:04.587

要 301 重定向您的页面，您可以执行以下操作：

```
RewriteEngine On
RewriteBase /

RewriteRule ^(\w+)/(\w+)$ /jobs/$2-jobs-$1 [R=301,L] 
```

这仅解决您之前结构中的 url（组合，您没有显示任何仅包含位置或类别的先前 url），但请注意，它`Canada`会保留`Canada`，它不会变成`canada`. 您也可以使用 rewrite 将所有内容更改为小写。

您还必须注意不要重写任何当前 url，但如果没有更多信息，应该这样做。

**编辑：**对于仅限位置的网址，您可以使用如下规则：

```
RewriteRule ^(\w+)/$ /jobs/jobs-$1 [R=301,L] 
```

同样，您需要注意您的重写规则不会干扰您当前的网址。如果是这种情况，您将需要手动重定向每个旧网址。

对于小写的新网址，您应该搜索 SO，有一些关于将 mized-case 变量转换为小写的问题有很好的答案。

# nosql - Cassandra CompositeType 作为行键验证器

> ID：13773457
> 
> 赞同：1
> 
> 时间：2012-12-08T01:15:58.047
> 
> 标签：nosql, cassandra, hector

我正在做一些 POC。

我有存储服务器事件的列族。为了避免行过大，我们在行键中使用复合类型将每一行拆分为另外 N 行：

```
CREATE COLUMN FAMILY logs with comparator='ReversedType(TimeUUIDType)' and key_validation_class='CompositeType(UTF8Type,IntegerType)' and default_validation_class=UTF8Type; 
```

所以对于每个服务器名称，我们有 N 行，我们使用非常简单的循环算法将数据写入每一行。

将数据写入任何行都没有问题：

```
 Mutator<Composite> mutator = HFactory.createMutator(keySpace, CompositeSerializer.get());
    HColumn<UUID,String> col = 
    HFactory.createColumn( TimeUUIDUtils.getUniqueTimeUUIDinMillis(), log);
    Composite rowName = new Composite();
    rowName.addComponent(serverName, StringSerializer.get());
    rowName.addComponent(this.roundRobinDestributor.getRow(), IntegerSerializer.get());
    mutator.insert(rowName, columnFamilyName, col);
} 
```

到目前为止一切顺利，但现在我有两个问题：

1）由于如果我想获取某些 serverName 的所有日志，我会扫描行键，我应该使用`ByteOrderedPartitioner`吗？

2) 任何人都可以帮助我，或者告诉我一些帮助如何创建 Hector 查询，它将为 server1 带来所有行（{server1:0}、{server1:1} {server1:2) 等...）？我看到了很多使用 CompositeType 作为比较器的示例，但没有使用密钥验证器的示例。

非常感谢任何帮助或评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:55:55.507

首先，行过大在 cassandra 中应该不是问题。尽管如此，溢出行可能值得，因为在这种情况下，跨集群的数据分布会更加均匀。

1.  `ByteOrderedPartitioner`这里看起来不是一个好的选择，因为很难在集群中实现行的均匀分布，这将导致热点。

2.  使用时无法查询键的范围`RandomPartitioner`。但是，如果最大 N 值相当小（最多 256），则`MultigetSliceQuery`可能会用于查询整组行。

# c# - 如何以减少耦合的方式存储 XML 文件中的数据

> ID：13773460
> 
> 赞同：1
> 
> 时间：2012-12-08T01:16:38.857
> 
> 标签：c#, xml, xml-parsing, decoupling

因此，在我的 C# 程序中，我正在读取用户希望该程序从文件中执行的一系列命令。我目前正在使用 XML 来存储这些数据。

我很难想出一种存储这些数据的好方法，而不会用 XML 数据访问调用乱扔代码，从而将其与仅使用 XML 结合起来。

这是我正在使用的 XML 类型的示例（提供上下文）：

```
<cooking>
    <job>
      <name>Cook Scrambled Eggs</name>
      <device>Robo-Chef</device>
      <action>
        <name>break eggs into pan</name>
      </action>
      <action>
        <name>scramble the eggs</name>
        <duration> 00:01:00</duration>
      </action>
    </job>    

    <trigger>
      <name>Breakfast</name>
      <forJob>Cook Scrambled Eggs</forJob>
      <start_time> Everyday at 7:00 AM</start_time>
    </trigger>    
</cooking> 
```

什么是从调度 XML 文件中读取和存储这些数据的好方法，以便程序的其余部分与它来自 XML 文件的事实分离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:40:36.747

好吧，您实际上可以对 C# 对象进行序列化和反序列化。

在这种情况下，您需要从示例数据中提取 XML Schema，使用 xsd.exe 生成 C# 类，然后使用`XmlSerializer`.

生成模式和类： [https ://stackoverflow.com/a/11654672/1373170](https://stackoverflow.com/a/11654672/1373170)

这样，您只需耦合到其他 C# 类，而不必担心源代码。例如，您甚至可以稍后将格式更改为 JSON，而无需重构所有内容。

# java - 在单个表达式中展开 Guava Optional

> ID：13773463
> 
> 赞同：6
> 
> 时间：2012-12-08T01:16:47.803
> 
> 标签：java, guava

作为一名同时在 Scala 中工作的开发人员`GWT`，我欢迎加入`Optional`Guava。

我们最常见的用例之一`Optional`是从方法返回可选值时（正如对[What's the point of Guava's Optional class](https://stackoverflow.com/questions/9561295/whats-the-point-of-guavas-optional-class)的回答所建议的那样。

在scala中，我经常写这样的代码：

```
def someExpensiveOperation(params: Type): Option[ResultType] = ...
someExpensiveOperation(params).foreach({ val =>
  doSomethingWithVal (val)
}) 
```

番石榴的 Option 似乎不允许任何比这样更优雅的东西：

```
Optional<MyType> optionalResponse = someExpensiveOperation(params);
if (optionalResponse.isPresent()) {
    doSomethingWithVal(optionalResponse.get())
} 
```

局部变量是多余的，它需要重复一个可以抽象的模式（the `if (optional.isPresent()) { doSomethingWith(optional.get()) }`）。

另一种选择是调用返回`Optional`两次的方法：

```
if (someExpensiveOperation(params).isPresent()) {
    doSomethingWithVal(someExpensiveOperation(params).get())
} 
```

但这显然是不可取的，因为它不必要地多次调用昂贵的操作。

我很好奇其他人是如何处理这种非常常见的情况的（也许是通过编写类似的静态实用程序方法`<T>useIfPresent(Optional<T> val, Closure<? super T> closure)`？），或者是否有人找到了更优雅的解决方案。

另外，如果有人知道为什么`Optional.foreach(Closure<? super T> closure)`省略了（但希望命名更好）之类的方法，我很想知道其中的原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T02:05:36.017

它不存在是因为我们觉得编写闭包的匿名类笨拙更笨拙且可读性更低——至少在 Java 中，不一定在 Scala 中——比局部变量和您已经编写的 if 语句。

也就是说，另一种选择是

```
for (Foo x : someExpensiveOperation().asSet()) {
  // do stuff with x
} 
```

请注意，`asSet`这里是必要的 -`Optional`非常刻意地不自己实现`Iterable`。

# json - 从 mongo db 对象中提取完整的 JSON 对象

> ID：13773468
> 
> 赞同：1
> 
> 时间：2012-12-08T01:18:01.943
> 
> 标签：json, mongodb

我获取的 DBObject 如下所示

```
{ "_id" : { "$oid" : "50c28ac1de86acf0bdfbeca0"} , 
"schedule" : { "startAt" : 1354926785198 , "endAt" : 1391155200000 , "repeatForever" : true , "interval" : 3600} , "destination" : "Storage-East"} 
```

我想提取没有“_id”的 JSON 字符串，以便可以将其反序列化回我的 Java 对象。如果我使用以下内容，我可以删除“_id”字段，并且可以从 JSON 字符串中取回 Java 对象。还有其他优雅的方法吗？

```
dbObj.removeField("_id");
String jsonString = dbObj.toString();

// Now readValue from the json string 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:30:25.793

不要删除后面的数据，只需使用结果预测。您只需在 find 语句中使用结果投影即可删除`_id`：

```
//find all documents where destination equals Storage-East, but exclude _id from result set
db.inventory.find( { "destination": 'Storage-East' }, { _id:0 } ) 
```

您可以找到文档[http://docs.mongodb.org/manual/core/read-operations/#result-projections](http://docs.mongodb.org/manual/core/read-operations/#result-projections)。

# .net - 并行启动迭代器方法返回的任务

> ID：13773469
> 
> 赞同：1
> 
> 时间：2012-12-08T01:18:08.513
> 
> 标签：.net, vb.net, iterator, task-parallel-library

先来看这个简单的方法：

```
Public Iterator Function GetLongRunningTasks(count As Long) As IEnumerable(Of Task)
    For i = 1 To count
        Yield Task.Delay(3000)
    Next
End Function 
```

此方法返回指定数量的任务，每个任务在启动后 3 秒完成。让我们称其为在极差的网络连接上模拟网络 API 调用（没关系）。

我的问题是一个简单的迭代将一次启动一个任务，因此每次迭代之间都会发生 3000 毫秒的延迟。

```
 For Each t In GetLongRunningTasks(50)
        Await t
    Next ' this takes ~150 seconds to complete (50x3000ms) 
```

我想要做的是一次启动所有 50 个任务，然后进入 foreach 循环。最好坚持上面的例子，这样做的正确方法是什么？

**编辑**

正如斯蒂芬所建议的那样，一种解决方案是迭代`GetLongRunningTasks(50).ToList()`. 也许只有我一个人，但我认为在阅读代码时使用 ToList 的原因并不明显。

我想知道以下片段是否完全相同？

```
 Dim tasks As New List(Of Task)
    tasks.AddRange(GetLongRunningTasks(50))

    For Each t In tasks
        Await t
    Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T02:51:07.560

您可以调用`ToList`创建所有的`Task`s。然后你可以使用`For Each`（或者`Task.WhenAll`如果你只是`Await`ing 每一个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T11:33:20.513

只是为斯蒂芬的答案添加一些解释：`GetLongRunningTasks()`返回一个惰性迭代器，它`Task`仅在您迭代它时创建 s 。在您的原始代码中，每次迭代都会创建一个`Task`，然后等待它完成，然后才开始另一个迭代，然后再开始另一个`Task`.

所以，你需要它来首先遍历整个集合以启动所有`Task`s 并等待它们完成，只有当你拥有它们时。斯蒂芬的`ToList()`建议正是这样`AddRange()`做的，你也会这样做。

如果您仍然不清楚，也许另一种方法会有所帮助：

```
Dim tasks As New List(Of Task)
For Each t in GetLongRunningTasks(50)
    tasks.Add(t)
Next

For Each t In tasks
    Await t
Next 
```

此外，启动大量 IO-bound`Task`很可能不是最有效的选择，以有限的并行度运行它们是。为此，您可以使用`SemaphoreSlim`'s`WaitAsnyc()`或使用TPL Dataflow 中的`ActionBlock`with `MaxDegreeOfParallelism`set。

# php - 使用 URL 变量 PHP 的图像文件名

> ID：13773471
> 
> 赞同：-3
> 
> 时间：2012-12-08T01:18:34.700
> 
> 标签：php

我找到了这个脚本，我希望下载时图像的名称与 URL 变量相同。那可能吗？如果是这样，人们将如何做到这一点？我的脚本是...

```
<?php
header('Content-Type: image/png');
header('Content-Disposition: attachment; filename="EDITTHIS"');
echo file_get_contents("http://domain.tld/folder/" . $_GET["m"] . ".png");
?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:20:55.890

```
<?php
header('Content-Type: image/png');
header('Content-Disposition: attachment; filename="'.$_GET["m"].'.png"');
echo file_get_contents("http://domain.tld/folder/" . $_GET["m"] . ".png");
?> 
```

这假定`$_GET['m']`它是您系统上的一个有效文件，并且它也是一个 png。但是，这基本上是你所要求的。您示例的 EDITTHIS 部分是一个占位符，这意味着您可以随意命名文件。只需将 EDITTHIS 替换为任何内容。在这种情况下，`$_GET['m']`

# android - 碎片分离/重新附加与显示/隐藏

> ID：13773476
> 
> 赞同：7
> 
> 时间：2012-12-08T01:20:02.083
> 
> 标签：android, android-fragments, android-fragmentactivity

我无法找出在没有寻呼机的情况下浏览片段的正确方法，并且在屏幕方向的配置更改期间遇到问题。我在片段上使用显示/隐藏以使它们可见和功能，但我想知道我是否应该使用分离/附加。我在将东西添加到后台堆栈时也遇到了问题，我认为这也是由于使用了显示/隐藏。使用附加/分离更好还是有一种方法可以覆盖后退按钮的功能以使其显示/隐藏最后/当前片段。

行为：我有一个地图片段和一个列表片段以及其他一些片段。一切都正常启动，并且最初随着方向的变化而工作。当我导航到列表视图时，它会正确填充，但是在方向更改时，列表会在没有数据的情况下重新绘制。地图视图也被重新绘制，并且在我的寻呼机标题指示器后面可见。如果有人能指出我正确的方向来解决这个问题，那就太棒了。我怀疑这是由我显示和隐藏片段的方式引起的。

这是我创建片段并将它们添加到片段管理器的地方。我还展示了我显示/隐藏片段的位置。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map_frags);
    mapViewContainer = LayoutInflater.from(this)
            .inflate(R.layout.map, null);

    setupFragments();
    showFragment(0);
}
public void setListData(String name) {
    bName = name;
    showFragment(1);
}
private void setupFragments() {
    final FragmentManager fm = getSupportFragmentManager();
    final FragmentTransaction ft = fm.beginTransaction();
    mFragment1 = fm.findFragmentByTag("f1");
    if (mFragment1 == null) {
        mFragment1 = new MenuFragment();
        ft.add(mFragment1, "f1");
        ft.hide(mFragment1);
    }
    mMapFragment = (MapFragment) getSupportFragmentManager()
            .findFragmentByTag(MapFragment.TAG);
    if (mMapFragment == null) {
        mMapFragment = MapFragment.newInstance(0);
        ft.add(R.id.fragment_container, mMapFragment, MapFragment.TAG);
    }
    ft.hide(mMapFragment);

    myListFragment = (ListFrag) getSupportFragmentManager()
            .findFragmentByTag(ListFrag.TAG);
    if (myListFragment == null) {
        myListFragment = new ListFrag();
        ft.add(R.id.fragment_container, myListFragment, ListFrag.TAG);
    }
    ft.hide(myListFragment);

    frag = (frag) getSupportFragmentManager().findFragmentByTag(
            frag.TAG);
    if (frag == null) {
        bacFrag = new frag();
        ft.add(R.id.fragment_container, frag, frag.TAG);
    }
    ft.hide(bacFrag);
    ft.commit();
}

public void showFragment(int fragIn) {
    final FragmentTransaction ft = getSupportFragmentManager()
            .beginTransaction();
    ft.setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);
    if (mVisible != null) {
        if (mVisible == mListFragment) {
            ft.remove(mListFragment);
        } else {
            ft.hide(mVisible);
        } 
    }

    switch (fragIn) {
    case 0:
        ft.show(mMapFragment);
        ft.commit();
        mVisible = mMapFragment;
        break;
    case 1:
        mListFragment = (ListFragmentDisplay) getSupportFragmentManager()
                .findFragmentByTag(ListFragmentDisplay.TAG);
        Toast.makeText(this, "startListFrag", Toast.LENGTH_LONG).show();
        if (mListFragment == null) {
            mListFragment = new ListFragmentDisplay();
            ft.add(R.id.fragment_container, mListFragment,
                    ListFragmentDisplay.TAG);
        }
        ft.show(mListFragment).commit();
        mVisible = mListFragment;
        break;
    case 2:
        ft.show(myfragment).commit();
        mVisible = myfragment;
        break;
    case 3:
        ft.show(frag).commit();
        mVisible = frag;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T13:53:02.270

这不是你的错。问题是当方向改变时，所有的 Activity 都被销毁了，甚至所有的片段都被添加了。因此，其中的任何数据都不会被保留。不建议使用 `android:configChanges="orientation|keyboardHidden"`. 相反，为每个片段设置`setRetainInstance(true)`它会很好地与您当前的代码配合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T04:09:05.727

如果您想获得更好的持久性（例如，当活动因空间问题而暂时销毁时）还记得使用[onSaveInstanceState](http://developer.android.com/intl/es/reference/android/app/Fragment.html#onSaveInstanceState%28android.os.Bundle%29)保存片段的状态。`setRetainInstance`只有在配置更改即将到来时才会起作用。

# javascript - page.evaluate() 中是否存在 phantomJS 注入漏洞？

> ID：13773478
> 
> 赞同：4
> 
> 时间：2012-12-08T01:20:28.027
> 
> 标签：javascript, security, phantomjs

使用 PhantomJS，您可以在浏览器中执行代码`page.evaluate()`。如果我们允许用户指定可以在该浏览器上下文中执行的代码，我们是否会向攻击向量敞开大门？有没有办法从浏览器上下文逃到 phantomJS 环境，从而在我们的服务器上执行命令？

这是一个例子：

```
page.open(options.url, function(status) {
    var test = function() {
            return page.evaluate(function() {
                return eval({{USER JAVASCRIPT STRING}});
            });
    });

        var interval = setInterval(function() {
          if (test()) {
            clearInterval(interval);
            // take screenshot, do other stuff, close phantom
          }
        }, 250);
}); 
```

据我了解，`eval()`内部发生的事情`page.evaluate()`可以防止它们逃离打开的页面的上下文。用户 javascript 字符串作为字符串传递（它不会“编译”成单个 javascript 文件）。在我看来，这与用户使用浏览器浏览网站并试图通过他们最喜欢的 Javascript 控制台破解并没有什么不同。因此，这种用法并不代表安全漏洞。这个对吗？

**更新**

为了更清楚地了解确切的用例。基本要点是有人会转到一个 URL，[http:](http://www.myapp.com/?url=http://anotherurl.com/&condition=) //www.myapp.com/?url=http: //anotherurl.com/&condition= {{javascriptstring}}。当一个worker可用时，它会启动一个幻像实例，`page.open`提供的URL，然后当`condition`遇到时，它会截取网页的屏幕截图。这样做的目的是，某些页面，尤其是那些具有大量异步 javascript 的页面，具有不像`DOM ready`or那样简单的奇怪的“就绪”条件`window ready`。这样，在 javascript 条件为真之前不会截取屏幕截图。示例包括`$(".domNode").data("jQueryUIWidget").loaded == true`或`$(".someNode").length > 0`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:04:25.847

我对 PhantomJS 不是很熟悉，但是`eval`在运行未知代码时本质上是不安全的。逃避预期的上下文很容易：

```
return page.evaluate(function() {
    return eval({{javascriptstring}});
}); 
```

> `http://example.com/?url=http://anotherurl.com/&condition={{javascriptstring}}`

如何`{{javascriptstring}}`等于：

```
console.log('All your script are belong to us'); 
```

我不确定你可以用 PhantomJS 做什么样的讨厌的事情，但这是一个用户能够运行他们想要的任何代码的例子，所以这听起来不是一个好主意。用户字符串实际上可以是整个程序。

澄清一下，注入漏洞不在您的代码中`page.evaluate()`，而是`eval`在*您的*代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:29:47.633

是的，这是[基于 DOM 的 XSS](https://www.owasp.org/index.php/DOM_Based_XSS)。这是一个可用于劫持用户（或管理）会话并将用户暴露于其他攻击的漏洞。

如果输入来自 GET/POST 或 Fragment 或 URL 的一部分，那么它很容易被利用。如果输入来自 UI，则可以通过[点击劫持来利用](http://blog.kotowicz.net/2011/03/exploiting-unexploitable-xss-with.html)它。

# java - JavaFX TextArea：如何设置制表宽度

> ID：13773483
> 
> 赞同：7
> 
> 时间：2012-12-08T01:21:07.977
> 
> 标签：java, user-interface, textarea, javafx-2

如何设置 JavaFX [TextArea](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextArea.html)的标签宽度？

当我在 TextArea 中使用制表（制表键）时，制表的宽度很宽。我想控制宽度，即使用 4 个空格。在文档中，我找不到执行此操作的方法。

我尝试了这段代码（其中 taInput 是一个 TextArea），但它不能正常工作：

```
taInput.setOnKeyPressed(new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent e) {
        if (e.getCode() == KeyCode.TAB) {
            // TAB SPACES
            StringBuilder sb = new StringBuilder(config.getTabSpacesCount());
            for (int i=0; i<config.getTabSpacesCount(); i++) {
                sb.append(' ');
            }
            taInput.insertText(taInput.getCaretPosition(), sb.toString());
            e.consume();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T02:20:25.730

最后我找到了一种方法来做到这一点。

似乎 setOnKeyPressed() 方法不适用于此任务，因为事件是在执行 keyPress 操作之后处理的。

addEventFilter() 在事件执行之前处理事件，因此您可以操纵事件。

我的新代码：

```
taInput.addEventFilter(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent e) {
        if (e.getCode() == KeyCode.TAB) {
            String s = StringUtils.repeat(' ', config.getTabSpacesCount());
            taInput.insertText(taInput.getCaretPosition(), s);
            e.consume();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T17:55:59.150

@tenotron

您的代码还为 TAB 键与一组修饰符（shift、control、alt、meta 或快捷方式）的组合执行相同的逻辑。TextArea 中的含义

按 T​​AB 键 = Ctrl(修饰符) + TAB = .... = 你的逻辑。

要解决此问题，您必须使用[KeyCombination](http://docs.oracle.com/javafx/2/api/javafx/scene/input/KeyCombination.html#match%28javafx.scene.input.KeyEvent%29)

示例代码：

```
textArea.addEventFilter(KeyEvent.KEY_PRESSED,
                new EventHandler<KeyEvent>() {
                    final KeyCombination combo = new KeyCodeCombination(
                            KeyCode.TAB);
            @Override
                    public void handle(KeyEvent event) {
                          // check for only tab key
                        if (combo.match(event)) {
                            textArea.insertText(textArea.getCaretPosition(),
                                    "I am not real TAB");
                            event.consume();
                }
            }
        }); 
```

现在按 TAB 键结果 "I am not Real TAB" ， ctrl+TAB 将突出显示场景中的下一个节点。

**参考 ：**

[正确检查 KeyEvent](http://fxexperience.com/2011/10/correctly-checking-keyevents/)

[组合键](http://docs.oracle.com/javafx/2/api/javafx/scene/input/KeyCombination.html#match%28javafx.scene.input.KeyEvent%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-20T15:56:34.377

尝试将您想要的内容显示为字符串。`s.replace("\t", " ");` 如果你想要四个空格，然后使用。这对我有用。

# facebook - 如何从 facebook 移动网络应用程序获取 iphone facebook 应用程序的通知

> ID：13773484
> 
> 赞同：1
> 
> 时间：2012-12-08T01:21:20.150
> 
> 标签：facebook, mobile, notifications

我制作了 facebook 移动网络应用程序。

它有时会发送 facebook 推送通知。

Facebook 网页 (www.facebook.com) 可以很好地接收通知，但 facebook 移动应用程序（iOS 和 android）没有。

是否可以从我的 facebook 网络应用程序向 facebook 移动应用程序发送通知？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:33:09.490

你在使用通知 api 吗？如果是这样，您应该知道它只在网站上发送通知。从[https://developers.facebook.com/docs/app-notifications/](https://developers.facebook.com/docs/app-notifications/)，

注意：只有 Facebook.com 上的应用程序可以使用通知 API。此外，这些通知仅出现在 Facebook.com 的桌面版本上。

# wcf - 已处理 InvalidDataContractException

> ID：13773490
> 
> 赞同：0
> 
> 时间：2012-12-08T01:21:56.383
> 
> 标签：wcf, web-services, datacontractserializer

尝试使用 datacontract 序列化程序导入 xmlschema 时出现以下错误：

指定的类型无效。在名称空间为“http://schemas.microsoft.com/2003/10/Serialization/Arrays”的架构中找不到名称为“ArrayOfanyType”的类型。

我知道它发生了，因为我使用的是一个列表，但我将如何解决它？通过使用

knownTypes.Add(typeof(????))

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:47:39.940

You'd need to share the XSD bit here. My guess is that one of the elements in the schema is of type xs:any. Assuming you meant you are using svcutil to import the info, you need to use svcutil /t:xmlserializer to import the schema.

# c# - Windows Phone 7 onDraw

> ID：13773493
> 
> 赞同：0
> 
> 时间：2012-12-08T01:22:17.710
> 
> 标签：c#, visual-studio-2010, windows-phone-7, xna

我正在开发一个游戏。我想在屏幕上绘制几个纹理。我通过使用 spriteBatch 绘制 texture2d 成功地实现了这一点。

问题是只有当我将代码放在 onDraw 方法中时才会显示纹理。onDraw 方法绑定到计时器，因此它会执行很多次。我只想画一次我的矩形。

当我将代码放入构造函数时，矩形不会显示 - 只有当我将代码放入 onDraw 函数时它们才会显示。我怎么能省略呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T10:48:24.267

在 XNA 中这样做并没有任何明智的选择。大多数游戏都想在每一帧重新绘制整个屏幕——这就是 XNA 的结构。（而且，如果没有*真正*令人信服的理由，这也是你应该如何构建游戏的方式。）

XNA 是双缓冲的（我认为没有办法将其关闭）。您在后缓冲区上进行绘图，然后将其与前缓冲区交换。您永远不会直接在屏幕上绘图。

*因此，虽然*您不必清除屏幕并在每一帧上重新绘制它，但如果您不这样做，您必须手动保持这两个缓冲区的内容同步 - 否则会出现严重闪烁。这不值得努力。

您*可能*正在寻找的是`Game.SupressDraw`方法（从 - 或 - 调用它`Update`作为替代方法：覆盖`BeginDraw`和返回`false`）。这将防止`Draw`为该特定帧调用，并防止后缓冲区被交换到前面。所以前一帧只是停留在屏幕上。

但通常更容易简单地绘制每一帧。

# qt - 在 MainWindow 中使用 QCheckBox 和 QPushButton 关注 QGLWidget

> ID：13773497
> 
> 赞同：1
> 
> 时间：2012-12-08T01:23:25.843
> 
> 标签：qt, focus, qglwidget

我有一个带有 QCheckBox 和 QPushButton 的 Qt 主窗口以及一个用于图形渲染的子 QGLwidget 类小部件。

我已经放入`void Ui_MainWindow::setupUi(QMainWindow *MainWindow)`成员函数：

```
void Ui_MainWindow::setupUi(QMainWindow *MainWindow)
{
   pushButton_2 = new QPushButton(widget);
...
   checkBox_3 = new QCheckBox(widget);
...
    widget_2 = new GLWidget(widget);
    widget_2->setFocusPolicy(Qt::StrongFocus);
    widget_2->setFocus();
...
} 
```

我创建了修改图形渲染的信号`widget_2`：

```
void Ui_MainWindow::createSignals()
{ 
...
connect(pushButton_2, SIGNAL(clicked()), this, SLOT(pauseSimu()));  
connect(checkBox_3, SIGNAL(clicked()), this, SLOT(hideClassic()));     
...
} 
```

`widget_2`尽管单击`pushButton_2`or ，但要始终保持专注`checkBox_3`，我必须输入`pauseSimu()`and `hideClassic()`：

```
void Ui_MainWindow::pauseSimu()
{

widget_2->setFocus();

...

} 
```

和

```
void Ui_MainWindow::hideClassic()
{

widget_2->setFocus();

...

} 
```

上的关键事件`widget_2 GLWidget`编码在 GLWidget 类成员函数中。

我怎样才能避免`setFocus()`在所有信号函数中使用以始终将注意力集中在`widget_2`GLWidget 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:18:53.040

尝试调用`setFocusPolicy(Qt::NoFocus)`您的按钮和复选框。

# html - 检索 HTML 片段

> ID：13773499
> 
> 赞同：0
> 
> 时间：2012-12-08T01:24:24.783
> 
> 标签：html, visual-studio-2010

所以我在这里有这个 HTML：

```
<div id="verify-purchase-modal" data-role="dialog">
    <div data-role="header">
        <h1>Buy Item</h1>
    </div>
    <div data-role="content">
<form action="/Catalog/ProcessPurchase" method="post">              <div></div>
                <div class="catalog-modal-image">
                        <img src="http://t6ak.roblox.com/cd4fad953f57e86e537da262b3503e04" alt="General Badblox" />

                </div>
                <div>
                    Would you like to buy the <strong>"General Badblox"</strong> Package
                    from ROBLOX for
                        <span class="currency-robux">400</span>?
                </div>
                <div class="ui-grid-a no-margin-grid add-large-margin-top clear">
                    <div class="ui-block-a">
                        <input name="__RequestVerificationToken" type="hidden" value="9EZgfWvmFbfVWWSvuIhMrWWs6E2XmjONlejy5JJRYQh5KBbttyCtH/ve1KcPq1MbLYnj6ktT8SyGfFrWRYshUMLUI1mmthTs1KJNizlPG8T809is5Y0ZJYJyqaTCmnom2P6vVpmnZATlqsFtN4pVhd1QH94cZbLU2eszES4+QLeES2Cv" />
                        <input data-val="true" data-val-number="The field CurrencyType must be a number." data-val-required="The CurrencyType field is required." id="CurrencyType" name="CurrencyType" type="hidden" value="1" />
                        <input data-val="true" data-val-number="The field AssetID must be a number." data-val-required="The AssetID field is required." id="AssetID" name="AssetID" type="hidden" value="98755232" />
                        <input data-val="true" data-val-number="The field UserAssetOptionID must be a number." data-val-required="The UserAssetOptionID field is required." id="UserAssetOptionID" name="UserAssetOptionID" type="hidden" value="0" />
                        <input type="submit" value="Buy Now" data-theme="d" />
                    </div>
                    <div class="ui-block-b">
                        <a id="cancelPurchase" data-rel="back" data-role="button" data-theme="f">Cancel</a>
                    </div>
                </div>
                    <div class="dialog-footnote">
                        Your balance after this transaction will be <span class="currency-robux">11,910</span>.
                    </div>
</form>
    </div>
</div> 
```

我用VB从一个网站上得到它。在写着“400？”的那一行。我想提取 400，所以我将所有 HTML 保存为字符串。我试图做简单的事情，只使用一个子字符串来获取它，但我不断收到 OOB（越界）错误。请记住，我正在尝试在 Visual Basic 中执行此操作。

```
 Dim daHtml As String = WebBrowser1.Document.Body.OuterHtml
    Msg(daHtml.Substring(daHtml.IndexOf("currency-robux"">"), daHtml.IndexOf("</span>?"))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:42:44.270

在 VB 中，子字符串的工作方式与其他语言不同。错了，在我看来。而不是 substring(startIndex, endIndex) 它是 substring (startIndex, length)。所以你正在寻找从以下开始的东西：

```
daHTML.IndexOf("currency-robux"">") 
```

长度为：

```
daHTML.indexOf("</span>?") 
```

因此，超出了字符串的范围。

# http - 使用 Chrome 开发者工具获取 Favicon

> ID：13773503
> 
> 赞同：6
> 
> 时间：2012-12-08T01:25:15.410
> 
> 标签：http, google-chrome-devtools

当我尝试访问我的测试网页时，我收到 503 错误。

在浏览器选项卡中，与我的页面关联的图标。但是，当我使用 Chrome 开发人员工具时，我看不到该图像是如何出现的。

我在点击页面之前清除了缓存。此外，我查看了 HTML 和网络选项卡，但看不到文件是如何检索的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T21:24:58.103

这仍然是一个问题。见[这里](https://code.google.com/p/chromium/issues/detail?id=110449)。它已经被推迟了一段时间。

# java - 尝试加载图像时编译到 jar 会导致 NullPointerException

> ID：13773508
> 
> 赞同：0
> 
> 时间：2012-12-08T01:25:55.037
> 
> 标签：java, image, nullpointerexception

我当前的项目在 Eclipse 中运行时没有错误。但是，在导出到可运行的 jar 后，它根本不起作用。从命令提示符运行会产生以下错误消息：

```
Uncaught error fetching image:
java.lang.NullPointerException
    at sun.awt.image.URLImageSource.getConnection(Unknown Source)
    at sun.awt.image.URLImageSource.getDecoder(Unknown Source)
    at sun.awt.image.InputStreamImageSource.doFetch(Unknown Source)
    at sun.awt.image.ImageFetcher.fetchloop(Unknown Source)
    at sun.awt.image.ImageFetcher.run(Unknown Source) 
```

测试使我得出结论，当我尝试加载项目所需的图像时会发生错误，其行类似于以下内容：

```
grassTile1 = rl.getImage("\\grassTile1.png"); 
```

rl 是 ResourceLoader 的一个实例，其 getImage 如下：

```
public Image getImage(String x){
    URL y = this.getClass().getResource(x);
    System.out.println(y);
    Image img = tk.getImage(y);
    if(img==null) throw new IllegalArgumentException("Image at "+x+" not found.");
    System.out.println(y);
    return new ImageIcon(img).getImage();
} 
```

tk 是通过 Toolkit.getDefaultToolkit(); 获得的。这些图像与 jar 中的 ResourceLoader.class 存在于同一目录中。注释掉对 loadImages() 的调用（其中包含对 ResourceLoader 的唯一调用）会导致程序运行，但显然没有图像资源。

该程序在 Eclipse 中按预期运行。应该对引用的相对路径进行哪些更改，以便它们在编译到 jar 时能够正常运行？

编辑：根据反馈更改 ResourceLoader.getImage()。

```
public Image getImage(String x){
    URL y = this.getClass().getResource(x);
    System.out.println(y);
    ImageIcon icon = new ImageIcon(getClass().getResource(x));
    Image i = icon.getImage();
    return i;
} 
```

这比我写的原始 getImage() 函数好还是坏？

更新二：根据 Perception 的建议，从传递给 getImage() 的数据中删除前导斜杠解决了问题。

# shell - 带正斜杠的 Sed 模式

> ID：13773509
> 
> 赞同：1
> 
> 时间：2012-12-08T01:25:59.167
> 
> 标签：shell, sed, awk

我有一个包含以下文本的文件：

*   内容-这个/media/news/section3/S02/basic/文件名.mp4然后是545756。
*   此/media/news/section3/S02/文件名的内容.mp4 然后是 42346。
*   这个/media/news/random3/S02/basic/文件名的内容.mp4然后是543。
*   这个/media/news/random3/S02/basic/文件名的内容.mp4然后是789。

我希望摆脱“-这个/media/news/section3的内容”或“-这个/media/news/random3的内容”和“然后***** *编号”。我想只留下“文件名.mp4”有时文件名也像这样打印“Name.of.the.file.mp4”

我尝试了不同的查看方式，但我只是一个初学者，它很快就会变得非常混乱，尤其是正斜杠。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:39:35.497

尝试：

```
 sed 's/.*\/\(.*mp4\).*/\1/' /path/to/your/file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:17:10.710

为避免与正斜杠混淆，了解`s`sed 的命令不限于以下内容会有所帮助`/`： 虽然命令的通常形式`s`是`s/pattern/replacement/`，但您可以将正斜杠替换为其他字符，例如`s,pattern,replacement,`。因此，要改写@adayzdone 的答案，您可以这样写：

```
sed 's,.*/\(.*mp4\).*,\1,' /path/to/your/file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:07:34.447

没有必要`awk`or `sed`。您可以简单地使用`grep`：

```
grep -o "[^/]*\.mp4" file 
```

解释：

```
-o, --only-matching
       Print only the matched (non-empty) parts of a matching line, with each
       such part on a separate output line.

[^/]*   Match anything not a forward slash any number of times

\.mp4   Remember to escape the dot metacharacter. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T01:32:35.713

这不会直接回答您的问题，但无论如何它可能会做您需要的事情：

如果这些是`mp4`您正在描述的计算机上的文件，您可以获得文件的名称，如下所示：

```
find /path/to/some/base/dir -type f -name "*.mp4" -exec basename {} \; 
```

`mp4`这将为您提供 . 下所有文件的文件名（不以目录路径为前缀）`/path/to/some/base/dir`。

* * *

如果这些实际上是您需要操作的文件中的行，则以下内容应该可以工作，尽管有点 hacky：

```
awk 'BEGIN{FS="/"} {print $NF}' input_file.txt | awk '{$NF=$(NF-1)=""; print}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T01:40:21.757

假设您的文件名为`files.txt`，并且假设您只对`mp4`文件感兴趣，那么以下`sed`命令应该适用于其中带有或不带有点的名称：

```
sed -i "s/^.*\/\(.*mp4\).*$/\1/g" files.txt 
```

我命名了我的文件`files.txt`，这些是它的内容，在上述命令之前和之后：

**之前**：

```
Content-of this /media/news/section3/S02/basic/Name of the file.mp4 then 545756.
Content-of this /media/news/section3/S02/Name of the file.mp4 then 42346.
Content-of this /media/news/random3/S02/basic/Name.of.the.file.mp4 then 543.
Content-of this /media/news/random3/S02/basic/Name of the file.mp4 then 789. 
```

**之后**：

```
Name of the file.mp4
Name of the file.mp4
Name.of.the.file.mp4
Name of the file.mp4 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T09:35:15.173

另一种解决方案：

```
awk '{gsub(/[^.]*\//,""); for(i=1;i<=NF-2;i++) {printf "%s ", $i} print ""}' file 
```

# ace-editor - 如何为 ACE 创建独立模式扩展？

> ID：13773513
> 
> 赞同：5
> 
> 时间：2012-12-08T01:27:28.830
> 
> 标签：ace-editor

我想用自定义语言的模式扩展 ace。据我所知，一般流程是：

1.  下载王牌源。
2.  为您的自定义语言创建一个新的 lib/ace/mode/foo.js。
3.  运行“make build”（或类似的）来重建 ACE。
4.  在您的网站中使用新编译的 build/src-min-no-conflict（或其他）ACE 发行版。

但我只想使用他们网站上现有的 ACE 发行版，并结合我独立的新模式。我不想在构建过程中重新构建 ACE 来构建我的新模式。我通过这样做接近了：

```
ace.config.setModuleUrl("foo-mode", "./foo.js");
session.setMode("foo-mode"); 
```

但我很快就遇到了 requirejs / 依赖问题。例如，我不能`require("ace/mode/matching_brace_outdent")`在我的模式内做。`setMode('ace/mode/c_cpp')`我通过第一次调用（作为副产品定义了matching_brace_outdent 模块）暂时解决了这个问题。但是我在尝试让自定义的 WorkerClient 工作时遇到了更糟糕的问题。

将我的模式构建为 ACE 的一部分是我唯一的选择吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T23:11:47.897

尝试预构建的版本。

[https://github.com/ajaxorg/ace-builds/releases](https://github.com/ajaxorg/ace-builds/releases)

您可能需要编辑其他文件（模式列表等），具体取决于您希望在 UI 中呈现新语言的方式：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-14T05:37:24.907

关于`require`非工作器的自定义模式下的无冲突模式，如果您将自定义模式定义为一个模块或内部的一系列模块`define`or `ace.define`，您应该能够`require`在函数包装器中使用提供给您的内容：

```
ace.define("ace/mode/your_module_name",
        ["require","exports","module","ace/your_other_dependencies"],
        function(require, exports, module) {

    // you can use require('...') here
}); 
```

相信你也可以使用`ace.require`.

我不太确定如何“手动构建”自定义工作者，但是按照[这个答案](https://stackoverflow.com/a/42632568/3243497)，我想我可以通过围绕[相对苗条`worker-json.js`](https://github.com/ajaxorg/ace-builds/blob/master/src/worker-json.js#L1409-L1699)的核心复制代码来让它工作。

# javascript - javascript - 更改标题追加而不是重写

> ID：13773514
> 
> 赞同：2
> 
> 时间：2012-12-08T01:27:35.407
> 
> 标签：javascript, jquery

我创建了一个新闻提要脚本，当有新的新闻可用时，它会自动通知用户，比如在 twitter 上。我想将此警报添加到标题中，所以使用了这个；

```
var originalTitle = document.title;
document.title = '(' + result + ') ' + originalTitle; 
```

现在我没有看到问题，但它会在它`result`之前附加值，`originalTitle`如果在有新消息时不经常更新它会很好。

例如; 如果添加了 1 个故事而不是另一个故事很长一段时间你会得到这个；

```
(1) (1) (1) (1) (1) (1) title 
```

例如 2；如果故事不断增加，你会得到这个；

```
(5) (4) (3) (2) (1) title 
```

不漂亮。我希望每次都重写 while 标题，而不仅仅是`result`每次都附加在前面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:29:30.953

看起来*每次*`originalTitle`都被覆盖，无论当时的标题是什么，这就是你结束的原因*`(5) (4) ... title`*

 *只需将原始标题与您已有的代码行保存在**一个地方即可。**

```
var originalTitle = document.title; 
```

在您的 document.ready 处理程序中调用该行，不要理会它。然后每次你想更新标题时，这应该做你想做的

```
document.title = '(' + result + ') ' + originalTitle; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T01:31:01.377

发生这种情况是因为您`originalTitle`每次都在更新，因此首先是

```
(1) title 
```

然后当您再次调用 originalTitle 时，它​​是“（1）标题”，而不仅仅是标题。所以只需将 originalTitle 设置在顶部某处，不要更新它。*

# objective-c - 当“代理”应用程序在后台启动时 NSPanels 消失

> ID：13773515
> 
> 赞同：0
> 
> 时间：2012-12-08T01:27:57.407
> 
> 标签：objective-c, xcode, nsstatusitem, nspanel

我使用 Cocoa“状态栏”教程 ( [http://cocoatutorial.grapewave.com/tag/status-bar/](http://cocoatutorial.grapewave.com/tag/status-bar/) ) 作为起点，试图为自己构建一个仅显示为 StatusItem 的代理。

这个应用程序没有主 NSWindow 对象，它有三个与之关联的 NSPanel。一个 NSPanel 用作“应用程序首选项”窗口，另外两个只是提示用户使用 OK 按钮输入一小段文本。

首选项面板通过 NSMenuItem 启动，如下所示：

```
NSMenuItem *showPrefsMI = [[NSMenuItem alloc] initWithTitle:@"Show Prefs" action:@selector(makeKeyAndOrderFront:) keyEquivalent:@""];
[showPrefsMI setTarget:prefsPanel];
[menu addItem:showPrefsMI]; 
```

当我从 XCode 内部构建和运行应用程序时，一切似乎都运行良好。但是，当我从 Xcode 外部（例如 Finder）运行应用程序时，这些窗口根本不会出现。

此外，我可以在 XCode 中复制该行为。如果我显示首选项面板，然后单击关闭它（例如，我单击此 Safari 窗口），首选项面板就会消失，再也不会出现。我必须从 XCode 中物理停止应用程序，然后再次运行它才能重新出现首选项面板。

提前感谢任何人的帮助！

# magento - Magento - 特定产品或类别的不同图片库块

> ID：13773523
> 
> 赞同：0
> 
> 时间：2012-12-08T01:29:10.383
> 
> 标签：magento, magento-1.7

我正在尝试更改图片库的显示方式，但仅适用于特定产品或特定类别。使用开发人员显示提示，我可以看到我要为某些产品修改的块是由 media.phtml 输出的。

假设我有一个名为 media-special.phtml 的备用文件，我需要使用什么 XML 以及该 XML 放在哪里，以使用 media-special.phtml 而不是 media.phtml 来处理特定产品或特定类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:58:52.093

类别和产品都允许您将布局 xml 与实体记录一起保存。在所需实体的此字段中，添加以下内容：

```
<action method="setTemplate" block="product.info.media">
    <tpl>path/to/media-special.phtml</tpl>
</action> 
```

# r - 使用 `Rcpp` 和/或 `RcppArmadillo` 将 `data.table` 传递给 c++ 函数

> ID：13773529
> 
> 赞同：11
> 
> 时间：2012-12-08T01:30:02.137
> 
> 标签：r, data.table, rcpp

有没有办法使用和/或不手动转换为a将`data.table`对象传递给 c++ 函数？在下面的示例中，两者都以.`Rcpp``RcppArmadillo``data.table``data.frame``test_rcpp(X2)``test_arma(X2)``c++ exception (unknown reason)`

**R代码**

```
X=data.frame(c(1:100),c(1:100))
X2=data.table(X)
test_rcpp(X)
test_rcpp(X2)
test_arma(X)
test_arma(X2) 
```

**c++ 函数**

```
NumericMatrix test_rcpp(NumericMatrix X) {
    return(X);
}

mat test_arma(mat X) {
    return(X);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-08T14:18:14.143

在其他答案的基础上，这里是一些示例代码：

```
#include <Rcpp.h>
using namespace Rcpp ;

// [[Rcpp::export]]
double do_stuff_with_a_data_table(DataFrame df){
    CharacterVector x = df["x"] ;
    NumericVector   y = df["y"] ;
    IntegerVector   z = df["v"] ;

    /* do whatever with x, y, v */
    double res = sum(y) ;
    return res ;
} 
```

因此，正如 Matthew 所说，这将 the`data.table`视为 a `data.frame`（又名 a `Rcpp::DataFrame`in `Rcpp`）。

```
require(data.table)
DT <- data.table(
    x=rep(c("a","b","c"),each=3), 
    y=c(1,3,6), 
    v=1:9)
do_stuff_with_a_data_table( DT ) 
# [1] 30 
```

这完全忽略了`data.table`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-08T14:04:25.923

尝试传递`data.table`as a`DataFrame`而不是`NumericMatrix`. 无论如何，它`data.frame`具有相同的结构，因此您不需要转换它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-08T01:33:41.080

[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)位于编码为 SEXP 的*原生*R 类型之上。这包括例如`data.frame`或`matrix`。

`data.table`不是原生的，它是一个附加组件。所以想要这个的人（你？）必须写一个转换器，或者为其他人提供资金来写一个。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-21T21:12:53.300

作为参考，我认为最好的办法是从允许通过列表更新列表`rcpp`中输出一个列表。`data.table`

这是一个虚拟示例：

```
cCode <- 
    '
     DataFrame DT(DTi);
     NumericVector x = DT["x"];
     int N = x.size();
     LogicalVector b(N);
     NumericVector d(N);
     for(int i=0; i<N; i++){
         b[i] = x[i]<=4;
         d[i] = x[i]+1.;
     }
     return Rcpp::List::create(Rcpp::Named("b") = b, Rcpp::Named("d") = d);
    ';

require("data.table");
require("rcpp");
require("inline");
DT <- data.table(x=1:9,y=sample(letters,9)) #declare a data.table
modDataTable <- cxxfunction(signature(DTi="data.frame"), plugin="Rcpp", body=cCode)

DT_add <- modDataTable(DT)  #here we get the list
DT[, names(DT_add):=DT_add] #here we update by reference the data.table 
```

# javascript - 如何将javascript动态变量传递给另一个javascript中的函数？

> ID：13773533
> 
> 赞同：0
> 
> 时间：2012-12-08T01:30:24.540
> 
> 标签：javascript

我有两个 JavaScript。从第一个 JavaScript 我想在其他 JavaScript 中调用一个函数，如下例所示：

```
jwplayer().load({file: 'http://content.bitsontherun.com/videos/nPripu9l-60830.mp4'}) 
```

上面对 jwplayer 函数的调用工作正常，但我想使用已经拥有动态值的变量 URL 将动态媒体 URL 加载到 jwplayer 函数。我尝试了以下方法，但它从未将动态媒体 URL 传递给 jwplayer 函数！你们能告诉我我做错了什么吗？警报显示了 URL 值，证明 URL 没问题，但它从未将其传递给播放器！

```
....
alert('' + url);
jwplayer().load({file: '+ url'}); 
```

这第二个JavaScript：

```
<div id='mediaspace'>This text will be replaced</div>

<script type='text/javascript'>
    jwplayer('mediaspace').setup({
        'flashplayer': './player.swf',
        'autostart': 'true',
        'controlbar': 'bottom',
        'width': '470',
        'height': '320'
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:37:07.500

你的 url`jwplayer().load({file: '+ url'});`被读取为字符串，而不是变量。它应该是：

```
jwplayer().load({file: url}); 
```

# r - 计算 R 中的购买间时间

> ID：13773535
> 
> 赞同：3
> 
> 时间：2012-12-08T01:30:36.477
> 
> 标签：r

我有以下数据框：

```
id<-c(1,1,1,3,3,3)
date<-c("23-01-07","27-01-07","30-01-07","11-12-07","12-12-07","01-01-08")
df<-data.frame(id,date)
df$date2<-as.Date(as.character(df$date), format = "%d-%m-%y")

id    date      date2
1 23-01-07 2007-01-23
1 27-01-07 2007-01-27
1 30-01-07 2007-01-30
3 11-12-07 2007-12-11
3 12-12-07 2007-12-12
3 01-01-08 2008-01-01 
```

现在我需要计算每个id的交易之间的购买时间（一个客户的每笔交易与同一客户之前的交易之间的天数）；这样我得到以下结果：

```
id    date      date2  interpurchase.time
1 23-01-07 2007-01-23         0
1 27-01-07 2007-01-27         4 
1 30-01-07 2007-01-30         3
3 11-12-07 2007-12-11         0  
3 12-12-07 2007-12-12         1 
3 01-01-08 2008-01-01        20 
```

我想知道是否有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:50:55.390

您可以使用`plyr`：

```
library(plyr)
ddply(df, "id", transform, inter.time = c(0, diff(date2))) 
```

或`ave`：

```
transform(df, inter.time = ave(as.numeric(date2), id,
                               FUN = function(x)c(0, diff(x)))) 
```

两者都给

```
#   id     date      date2 inter.time
# 1  1 23-01-07 2007-01-23          0
# 2  1 27-01-07 2007-01-27          4
# 3  1 30-01-07 2007-01-30          3
# 4  3 11-12-07 2007-12-11          0
# 5  3 12-12-07 2007-12-12          1
# 6  3 01-01-08 2008-01-01         20 
```

PS：您可能希望将这些零替换为`NA`.

# python - python cdist error ValueError: XA must be a 2-dimensional array

> ID：13773537
> 
> 赞同：13
> 
> 时间：2012-12-08T01:30:45.573
> 
> 标签：python

这是我的代码的缩短版本：

```
`dist_array = ssd.cdist(test[y], training)` 
```

打印的 test[y] 是

```
[  0.00000000e+00   1.79900000e+01   1.03800000e+01   1.22800000e+02
   1.00100000e+03   1.18400000e-01   2.77600000e-01   3.00100000e-01
   1.47100000e-01   2.41900000e-01   7.87100000e-02   1.09500000e+00
   9.05300000e-01   8.58900000e+00   1.53400000e+02   6.39900000e-03
   4.90400000e-02   5.37300000e-02   1.58700000e-02   3.00300000e-02
   6.19300000e-03   2.53800000e+01   1.73300000e+01   1.84600000e+02
   2.01900000e+03   1.62200000e-01   6.65600000e-01   7.11900000e-01
   2.65400000e-01   4.60100000e-01   1.18900000e-01] 
```

打印（缩短）的培训是：

```
[[  0.00000000e+00   1.92100000e+01   1.85700000e+01 ...,   2.09100000e-01
    3.53700000e-01   8.29400000e-02]
 [  0.00000000e+00   1.47100000e+01   2.15900000e+01 ...,   1.83400000e-01
    3.69800000e-01   1.09400000e-01]
 [  1.00000000e+00   1.30500000e+01   1.93100000e+01 ...,   1.11100000e-02
    2.43900000e-01   6.28900000e-02]
 ..., 
 [  0.00000000e+00   1.66000000e+01   2.80800000e+01 ...,   1.41800000e-01
    2.21800000e-01   7.82000000e-02]
 [  0.00000000e+00   2.06000000e+01   2.93300000e+01 ...,   2.65000000e-01
    4.08700000e-01   1.24000000e-01]
 [  1.00000000e+00   7.76000000e+00   2.45400000e+01 ...,   0.00000000e+00
    2.87100000e-01   7.03900000e-02]] 
```

两者都有 31 列。有没有办法找到阵列 XA 和阵列 XB 的每一行之间的距离，并将距离输出到另一个阵列中？

非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-05-09T15:15:57.923

您需要将它们更改为二维数组：

```
import numpy as np

np.array([1,2,3,4]).shape

--(4,)

np.array([1,2,3,4]).reshape(-1,1).shape

--(4,1)

np.array([1,2,3,4]).reshape(1,-1).shape

--(1,4) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:34:19.623

这在这里讨论：http: [//comments.gmane.org/gmane.comp.python.scientific.user/29106](http://comments.gmane.org/gmane.comp.python.scientific.user/29106)

您需要使用例如运算符将一维数组广播到二维数组`newaxis`：`distance.cdist(ref_1d[numpy.newaxis, :], query_2d)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-19T11:52:47.487

```
from scipy.spatial import distance

p_a = np.array([4, 0])

p_b = np.array([0, 3])

p_a = p_a.reshape(1, -1)

p_b = p_b.reshape(1, -1)

distance.cdist(p_a, p_b, 'euclidean')
Out[58]: array([[ 5.]]) 
```

# javascript - jQuery：我怎样才能将这些元素中的两个放在同一个页面上？

> ID：13773549
> 
> 赞同：0
> 
> 时间：2012-12-08T01:32:53.060
> 
> 标签：javascript, jquery

我正在使用以下脚本，但如果我在同一页面上出现超过 1 次，它就会中断。我正在尝试将它放到可以在同一页面上放置多个轮播的位置。

HTML：

```
<div class="carousel_outer">
    <div class="portfolio-carousel horizontal">
        <div class="carousel" id="carousel1">
            <div class="carousel_container carousel1">
                <ul class="portfolio-wrap carousel1">
                    <li><a class="gall_thumb" href="#" title="First Pic"><img src="#" alt="First Pic" /></a></li>
                    <li><a class="gall_thumb" href="#" title="Second Pic"><img src="#" alt="Second Pic" /></a></li>
                </ul>
            </div> 
            <a class="carousel_prev" href="#">Previous</a>
            <a class="carousel_next" href="#">Next</a>
        </div> 
    </div> 
</div> 
```

页面上的Javascript：

```
$('.carousel').mycarousel({
    delay: 150,
    fade:300,
    slide: 700,
    effect:'slide',                   
    orientation:'horizontal',
    loop: false,
    autoplay: false
}); 
```

和实际的轮播javascript：

```
(function ($) {
$.fn.extend({
    mycarousel: function (options) {
        var defaults = {
            delay: 150,
            fade: 300,
            slide: 500,
            effect: "fade",
            orientation: "horizontal",
            captionFade: 150,
            loop: false,
            autoplay: true,
            time: 3000
        };
        var options = $.extend(defaults, options);
        return this.each(function () {
            var o = options;
            var carousel = this;
            $carousel_container = $(carousel).find(".carousel_container");
            $li = $(carousel).find(".carousel_container ul li");
            var visible_width = parseInt($carousel_container.css("width"), 10);
            var visible_height = parseInt($carousel_container.css("height"), 10);
            var number_items = $li.size();
            var item_width = parseInt($li.css("width"), 10);
            var item_height = parseInt($li.css("height"), 10);
            var item_marginRight = parseInt($li.css("marginRight"), 10);
            var item_marginLeft = parseInt($li.css("marginLeft"), 10);
            var item_marginTop = parseInt($li.css("marginTop"), 10);
            var item_marginBottom = parseInt($li.css("marginBottom"), 10);
            if (o.orientation == "horizontal") {
                var visible_items = Math.ceil(visible_width / (item_width + item_marginRight + item_marginLeft));
            } else {
                var visible_items = Math.ceil(visible_height / (item_height + item_marginTop + item_marginBottom));
            }
            var slides = Math.ceil(number_items / visible_items);
            $float_easing = "easeInOutQuart";

            function set_item_classes_visibility() {
                $li.each(function (index) {
                    var class_number = Math.floor((index + visible_items) / visible_items);
                    $(this).addClass("visible_" + class_number);
                    if (class_number == "1") {
                        $(this).css("display", "block");
                        $(this).find(".inner").css("display", "block");
                    } else {
                        $(this).css("display", "none");
                        $(this).find(".inner").css("display", "none");
                    }
                });
            }
            set_item_classes_visibility();

            function set_next_prev_classes() {
                var visible_item_class = $(carousel).find(".carousel_container ul li:visible").attr("class");
                var visible_id = visible_item_class.split("_");
                if (!o.loop) {
                    if (visible_id[1] == "1") {
                        $(".carousel_prev").addClass("disable");
                    } else {
                        $(".carousel_prev").removeClass("disable");
                    }
                    if (visible_id[1] == slides) {
                        $(".carousel_next").addClass("disable");
                    } else {
                        $(".carousel_next").removeClass("disable");
                    }
                }
            }
            set_next_prev_classes();

            function set_item_position() {
                $li.each(function () {
                    $(this).css("display", "none");
                    $(this).css("position", "absolute");
                    if (o.orientation == "horizontal") {
                        $(this).css("top", "0");
                        $(this).css("left", visible_width + parseInt($carousel_container.css("paddingLeft")) + parseInt($carousel_container.css("paddingRight")), 10);
                    } else {
                        if (o.orientation == "vertical") {
                            $(this).css("left", "0");
                            $(this).css("top", visible_height + parseInt($carousel_container.css("paddingTop")) + parseInt($carousel_container.css("paddingBottom")), 10);
                        }
                    }
                });
                $carousel_container.find("li.visible_1").each(function (index) {
                    $(this).css("display", "block");
                    if (o.orientation == "horizontal") {
                        var left_position = (index * (item_width + item_marginRight + item_marginLeft)) + parseInt($carousel_container.css("paddingLeft"), 10);
                        $(this).css("left", left_position);
                    } else {
                        if (o.orientation == "vertical") {
                            var top_position = (index * (item_height + item_marginTop + item_marginBottom)) + parseInt($carousel_container.css("paddingTop"), 10);
                            $(this).css("top", top_position);
                        }
                    }
                });
            }
            if (o.effect == "slide") {
                set_item_position();
            }
            function show_next_prev(method) {
                function show_items_fade(id) {
                    var next_class_name = "visible_" + id;
                    $carousel_container.find("li." + next_class_name).css("display", "block");
                    $carousel_container.find("li." + next_class_name).each(function (index) {
                        var delay = (index) * o.delay;
                        if (method == "prev") {
                            var delay = ((visible_items - 1) - index) * o.delay;
                        }
                        var index_item = (index + 1);
                        $(this).find(".inner").delay(delay).fadeIn(o.fade, function () {
                            if (index_item == visible_items || id == slides) {
                                set_next_prev_classes();
                            }
                        });
                    });
                }
                function show_items_slide(id) {
                    var next_class_name = "visible_" + id;
                    $carousel_container.find("li." + next_class_name + " .inner").css("display", "block");
                    $carousel_container.find("li." + next_class_name).each(function (index) {
                        $(this).css("display", "block");
                        var delay = (index) * o.delay;
                        if (method == "prev") {
                            var delay = ((visible_items - 1) - index) * o.delay;
                        }
                        var index_item = (index + 1);
                        if (o.orientation == "horizontal") {
                            var left_position = (index * (item_width + item_marginRight + item_marginLeft)) + parseInt($carousel_container.css("paddingLeft"), 10);
                            $(this).delay(delay).animate({
                                left: left_position
                            }, o.slide, $float_easing, function () {
                                if (index_item == visible_items || id == slides) {
                                    set_next_prev_classes();
                                }
                            });
                        } else {
                            if (o.orientation == "vertical") {
                                var top_position = (index * (item_height + item_marginTop + item_marginBottom)) + parseInt($carousel_container.css("paddingTop"), 10);
                                $(this).delay(delay).animate({
                                    top: top_position
                                }, o.slide, $float_easing, function () {
                                    if (index_item == visible_items || id == slides) {
                                        set_next_prev_classes();
                                    }
                                });
                            }
                        }
                    });
                }
                var visible_item_class = $carousel_container.find("li:visible").attr("class");
                visible_id = visible_item_class.split("_");
                var next_id = parseInt(visible_id[1], 10) + 1;
                var prev_id = parseInt(visible_id[1], 10) - 1;
                if (visible_id[1] == 1) {
                    prev_id = slides;
                }
                if (visible_id[1] == slides) {
                    next_id = 1;
                }
                switch (o.effect) {
                    case "fade":
                        $carousel_container.find("li:visible").each(function (index) {
                            var delay = (index) * o.delay;
                            var index_item = (index + 1);
                            var last_item = $carousel_container.find("li." + visible_item_class).size();
                            if (method == "prev") {
                                delay = ((visible_items - 1) - index) * o.delay;
                                last_item = 1;
                            }
                            $(this).find(".inner").delay(delay).fadeOut(o.fade, function () {
                                if (index_item == last_item) {
                                    $("li." + visible_item_class).css("display", "none");
                                    if (method == "next") {
                                        show_items_fade(next_id);
                                    } else {
                                        if (method == "prev") {
                                            show_items_fade(prev_id);
                                        }
                                    }
                                }
                            });
                        });
                        break;
                    case "slide":
                        $carousel_container.find("li.visible_" + prev_id).each(function (index) {
                            if (o.orientation == "horizontal") {
                                if (method == "next") {
                                    var left_position = visible_width + parseInt($carousel_container.css("paddingLeft"), 10) + parseInt($carousel_container.css("paddingRight"), 10);
                                } else {
                                    if (method == "prev") {
                                        var left_position = "-" + item_width + "px";
                                    }
                                }
                                $(this).css("left", left_position);
                            } else {
                                if (o.orientation == "vertical") {
                                    if (method == "next") {
                                        var top_position = visible_height + parseInt($carousel_container.css("paddingTop"), 10) + parseInt($carousel_container.css("paddingBottom"), 10);
                                    } else {
                                        if (method == "prev") {
                                            var top_position = "-" + item_height + "px";
                                        }
                                    }
                                    $(this).css("top", top_position);
                                }
                            }
                        });
                        $carousel_container.find("li." + visible_item_class).each(function (index) {
                            var delay = (index) * o.delay;
                            var zindex = index + 10;
                            var index_item = (index + 1);
                            var last_item = $carousel_container.find("li." + visible_item_class).size();
                            if (method == "prev") {
                                delay = ((visible_items - 1) - index) * o.delay;
                                zindex = ((visible_items - 1) - index) + 10;
                                last_item = 1;
                            }
                            $(this).css("z-index", zindex);
                            if (o.orientation == "horizontal") {
                                if (method == "next") {
                                    var left_position = "-" + item_width;
                                } else {
                                    if (method == "prev") {
                                        var left_position = visible_width + parseInt($carousel_container.css("paddingLeft"), 10) + parseInt($carousel_container.css("paddingRight"), 10);
                                    }
                                }
                                $(this).delay(delay).animate({
                                    left: left_position
                                }, o.slide, $float_easing, function () {
                                    if (index_item == last_item) {
                                        $("li." + visible_item_class).css("display", "none");
                                        if (method == "next") {
                                            show_items_slide(next_id);
                                        } else {
                                            if (method == "prev") {
                                                show_items_slide(prev_id);
                                            }
                                        }
                                    }
                                });
                            } else {
                                if (o.orientation == "vertical") {
                                    if (method == "next") {
                                        var top_position = "-" + item_height;
                                    } else {
                                        if (method == "prev") {
                                            var top_position = visible_height + parseInt($carousel_container.css("paddingTop"), 10) + parseInt($carousel_container.css("paddingBottom"), 10);
                                        }
                                    }
                                    $(this).delay(delay).animate({
                                        top: top_position
                                    }, o.slide, $float_easing, function () {
                                        if (index_item == last_item) {
                                            $("li." + visible_item_class).css("display", "none");
                                            if (method == "next") {
                                                show_items_slide(next_id);
                                            } else {
                                                if (method == "prev") {
                                                    show_items_slide(prev_id);
                                                }
                                            }
                                        }
                                    });
                                }
                            }
                        });
                        break;
                }
            }
            if (o.autoplay) {
                var interval = setInterval(function () {
                    var visible_item_class = $(carousel).find(".carousel_container ul li:visible").attr("class");
                    var visible_id = visible_item_class.split("_");
                    if (!o.loop) {
                        if (visible_id[1] == slides) {
                            clearInterval(interval);
                        } else {
                            show_next_prev("next");
                        }
                    } else {
                        show_next_prev("next");
                    }
                }, o.time);
            }
            $(carousel).find(".carousel_next").click(function () {
                clearInterval(interval);
                show_next_prev("next");
                return (false);
            });
            $(carousel).find(".carousel_prev").click(function () {
                clearInterval(interval);
                show_next_prev("prev");
                return (false);
            });
            $li.hover(function () {
                clearInterval(interval);
                $(this).find(".caption").fadeIn(o.captionFade);
            }, function () {
                $(this).find(".caption").fadeOut(o.captionFade);
            });
        });
    }
});
})(jQuery); 
```

我在想是否有某种方法可以用 ID 识别每个轮播，并且脚本只在每个 ID 内执行它可以工作的东西，但我不知道如何完成它。

编辑：当我单击下一个/上一个按钮时，我收到以下 js 控制台错误：`visible_item_class is undefined`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:54:45.197

根据`set_next_prev_classes`插件中的功能，问题可能是您的“下一个”和“上一个”按钮共享一个公共类。（插件不应该以这种方式做事，但无论如何都是这样。）

解决方案应该简单到为每个轮播的“下一个”和“上一个”按钮提供 DISTINCT 类名称——这可以像在每个按钮上附加数字 1 和 2 一样简单。（然后告诉插件作者这种方法会导致问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:00:46.593

解决问题的两种方法。

1.  更改轮播代码以获取用作轮播的 div 的 id 和轮播控件。

2.  复制轮播代码两次。首先将“.carousel”替换为“#Id1”，第二个替换为“#Id2”。
    然后控件将是“#Id1_next”、“#Id1_prev”。这有点骇人听闻，但无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T01:45:13.740

给他们每个人一个唯一的 ID，然后用那个 ID 给他们打电话。

```
$('#carousel1').mycarousel({
    theid: $(this).attr('id'),
    delay: 150,
    fade:300,
    slide: 700,
    effect:'slide',                   
    orientation:'horizontal',
    loop: false,
    autoplay: false
});

$('#carousel2').mycarousel({
    theid: $(this).attr('id'),
    delay: 150,
    fade:300,
    slide: 700,
    effect:'slide',                   
    orientation:'horizontal',
    loop: false,
    autoplay: false
}); 
```

附带说明一下，以下行是必要的： `theid: $(this).attr('id')`

我没有看到它在轮播代码中的任何地方使用。

# objective-c - 为什么使用 setLevel: 不会使窗口高于全屏游戏？

> ID：13773550
> 
> 赞同：1
> 
> 时间：2012-12-08T01:32:55.027
> 
> 标签：objective-c, macos, cocoa

大多数游戏（如果不是全部）不使用 Lion 的全屏功能。他们使用非官方方法使自己全屏显示。问题是 - 无论我将窗口的级别设置多高（我目前使用的是 25 级 - 使窗口高于状态栏及其图标），它都不会出现在游戏中。我想在游戏中实现类似于Steam全屏覆盖的效果。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:22:50.627

全屏游戏通常根本不是 Windows。大多数此类应用程序都使用 CoreGraphics 来捕获显示（请参阅 参考资料[`CGDisplayCapture`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/Quartz_Services_Ref/Reference/reference.html)），完全绕过窗口合成。（所以你不能在它们上面显示内容。）请注意，这是完全“官方的”——这只是与全屏窗口不同的方法。

Steam 的工作原理是让 Steam 启动器将代码注入应用程序以显示状态弹出窗口。它不是一种可以——或者应该——在更一般的情况下使用的技术。

# php - PHP/MySQL：在数据库列中存储多个值

> ID：13773558
> 
> 赞同：0
> 
> 时间：2012-12-08T01:34:07.723
> 
> 标签：php, mysql, database, arrays

我有一个表格可以让你输入电话号码。您可以单击加号按钮并添加更多字段。我需要将所有这些值存储在数据库中，但只有一列可以完成。

电话号码也是一个类型下拉列表，您可以在其中选择以下内容：移动、家庭和工作。所以我需要一种方法将每个字段的类型和数字配对在一起，然后将所有配对组合在一起。然后稍后当我需要信息时，能够将其全部提取出来并将所有值放入一个数组中。几乎就像加密和解密一样。

我在想类似的东西：

```
type:number;type:number;type:number;type:number;type:number;type:number 
```

能够使用explode和implode进行加密和解密。

但这有多好？我还有一个搜索电话号码的搜索功能。我想我的方式对于搜索功能来说并不容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T01:37:24.810

我会说这是个坏主意。如果您计划使用有限类型的号码，例如家庭、工作、手机等，我建议您为每个号码添加列。否则，创建一个单独的数据库表“phone_numbers”并将其与您的客户 ID 或类似名称相关联，并添加您喜欢的任意数量的数字。搜索将更快，更容易实现。

如果您仍需要将它们存储在单个字段中，请按照您的建议使用 php implode() 和 explode()。在我这样做的情况下，我会使用客户很少想到的字符，例如管道符号“|” 作为分隔符。当然，如果我的用户不小心在输入中使用了它，我需要使用 str_replace 或此类技术来过滤掉它，但最好是它是一个很少使用的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T01:38:22.517

搜索肯定是行不通的。特别是如果您使用搜索自动完成等功能，您希望能够快速选择以特定数字开头的所有数字。

有两种选择：添加更多列或为电话号码添加单独的表格，其中仅包含人员的类型、号码和 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T07:58:45.440

PHP代码：

```
$delimiter = "|";
if (isset($_POST['editfill_mobile'])) {
        $mobileArray = $_POST['editfill_mobile'];
        $replymobile = "";
        $i = 0;
        foreach ($mobileArray as $key => $value) {
            $i++;
            $replymobile .= $value;
            $replymobile .= $delimiter;
        }
    } 
```

将此 $replymobile 按原样存储在数据库列中。

最终，当您查询数据库时，您可能需要拆分上述字符串以从中解析数据....

# php - 使用 mysql_query 函数和安全性的 PHP 参数化查询？

> ID：13773564
> 
> 赞同：4
> 
> 时间：2012-12-08T01:35:26.707
> 
> 标签：php, mysql

## 免责声明

请原谅我的无知，我已经编写 C# 超过 12 年了，我对 .NET 框架和 OO 编程非常熟悉，而且我在企业应用程序方面有很好的背景，但这是我第一次接触php。

## 问题

好吧，所以我试图弄清楚如何`prepare`使用该`mysql_query`功能发出一个，但我无法将两个和两个放在一起。现在我这样连接：

```
mysql_connect('xxx.x.x.x:xxxx', 'x', 'x');
mysql_select_db('x'); 
```

这是成功的。

现在，我想插入一些数据，所以我正在查看`mysql_query`函数，但不知道如何发送**参数化查询**以防止 SQL 注入。我的代码目前如下所示：

```
mysql_query("INSERT INTO users (email, password, ...)
    VALUES (:email, :password, :...) 
```

**但是如何将值数组传递给它呢？**

## 附加问题

**如果我使用`mysql_real_escape_string`通过用户输入收到的每个值，我是否需要担心发出参数化查询？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:52:55.143

您最好使用[PDO](http://php.net/manual/en/book.pdo.php)（或 mysqli）来执行此操作。[但是，您会在bobby-tables 网站](http://bobby-tables.com/php.html)上找到使用 PDO、mysqli、adodb 等的示例。我建议您阅读[bindValue()](http://php.net/manual/en/pdostatement.bindvalue.php)的 PDO 文档，这将为您提供所需的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T02:03:10.007

正如我的评论中所述， mysql_ 函数已被弃用。您应该使用允许参数绑定以防止 SQL 注入的 mysqli_ 或 PDO。

# python - 在 Python 中，如何创建包含其他列表的某个索引的列表？

> ID：13773568
> 
> 赞同：0
> 
> 时间：2012-12-08T01:35:40.613
> 
> 标签：python, list

说我有几个列表

```
A = [1,2,3]
B = [4,5,6]
C = [7,8,9] 
```

如何创建新列表以使其包含匹配的索引，如：

```
D = [1,4,7]
E = [2,5,8]
F = [3,6,9] 
```

原始列表将始终包含相同数量的元素，我需要它适用于任意数量的元素和任意数量的列表，而不仅仅是三个。我想我需要在一个范围内循环，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T01:40:59.057

如果我理解正确，您可能正在寻找[zip()](http://docs.python.org/2/library/functions.html#zip)：

```
>>> a = [1, 2, 3]
>>> b = [4, 5, 6]
>>> c = [7, 8, 9]
>>> zipped = zip(a, b, c)
>>> zipped
[(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

如果您有一个要压缩的列表列表，而不是多个列表，则可以`*`用于解压缩子列表，如下所示：

```
>>> myListOfLists = [[1,2,3],[4,5,6],[7,8,9]]
>>> zipped = zip(*myListOfLists)
>>> zipped
[(1, 4, 7), (2, 5, 8), (3, 6, 9)] 
```

# java - 没有捕获的 try/catch/finally 会发生什么？

> ID：13773572
> 
> 赞同：4
> 
> 时间：2012-12-08T01:36:11.190
> 
> 标签：java, exception

看到一个我在期中考试中做错的问题，这让我想知道：

```
public double[] readInputFile(String fielane) throws IOException
{
  File inputFile = new File(filename);
  Scanner in = new Scanner(inputFile);
  try
  {
    readData(in);
    return data;
  }
  finally
  {
    inputFile.close();
  }
} 
```

这会将所有异常传递到链上，还是只会传递检查过的 IOException？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T01:38:06.867

该`finally`块将被执行，然后最初抛出的异常（即，作为 的结果抛出的第一个异常`readData(in)`）将向上渗透。

我想这个问题的警告是关于将被渗透的异常类型。这可能是`IOException`，或任何类型的未经检查的异常（即，或的子类`java.lang.RuntimeException`）`java.lang.Error`。

**根据@zapl**的评论进行编辑：如果`finally`块抛出`IOException`（作为 的结果`inputFile.close()`），则该异常将渗透到调用者，无论该`try`块是否抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:39:55.147

块内的代码`finally`将始终被执行，与上面的块内是否发生异常无关`try`。

在您的示例中，该`finally`块确保关闭输入文件；因此，即使抛出异常，也可以保证连接不会保持打开状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T01:42:22.100

> 这会将所有异常传递到链上，还是只会传递检查过的 IOException？

它将传递所有异常，但要编译的代码`readData`应声明为仅抛出`IOException`或其子类。

该`finally`块将在该`try`块之后执行，就像往常一样。

# sqlite - SQLite 可以将匹配的行合并为一个吗？

> ID：13773573
> 
> 赞同：0
> 
> 时间：2012-12-08T01:36:38.297
> 
> 标签：sqlite, left-join

我有以下表格的：m 关系：

```
Game
  g_id
  g_name

Player
  p_id
  p_name

GamePlayer
  gp_id
  gp_p_id
  gp_g_id 
```

像这样的查询：

```
SELECT g_name, p_name 
FROM GamePlayer 
INNER JOIN Game ON g_id = gp_g_id
INNER JOIN Player ON p_id = gp_p_id; 
```

这将为里面的每个条目返回一个 Row `GamePlayer`。如果我有两个游戏，每个游戏有三个玩家，这个查询将返回 6 行，其中包含游戏和玩家的名称（显然只有两个不同的游戏名称），如下所示：

```
GameName1   John
GameName1   Dan
GameName1   Phil
GameName2   Dan
GameName2   Pete
GameName2   Kate 
```

我喜欢（在这种情况下）两行看起来像这样：

```
GameName1   John   Dan   Phil
GameName2   Dan    Pete  Kate 
```

这有可能吗？

注意：一个游戏中可能有超过三个玩家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:39:16.070

基于数据创建列需要某种 SQLite 没有的数据透视函数。

您可以做的是使用[group_concat](http://www.sqlite.org/lang_aggfunc.html#groupconcat)将多个值合并为一列值：

```
SELECT g_name,
       group_concat(p_name)
FROM Game
JOIN GamePlayer ON g_id = gp_g_id
JOIN Player ON gp_p_id = p_id
GROUP BY g_name 
```

# java - 短信应用程序android获取线程更新

> ID：13773577
> 
> 赞同：0
> 
> 时间：2012-12-08T01:37:07.977
> 
> 标签：java, android, android-listview

```
private ArrayList<String> conversation = new ArrayList<String>();
public ArrayAdapter<String> adapter;
private String phoneNumber;     
ListView listView;

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.converse_view);

    this.adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1,
            conversation);

    ListView listView = (ListView) findViewById(R.id.conversation);
    listView.setAdapter(adapter);

}

protected void onResume()
{
   super.onResume();
   setContentView(R.layout.converse_view);
   this.adapter.notifyDataSetChanged();

}

public void changeNumber(String phoneNumber2) {
    this.phoneNumber = phoneNumber2;

}

public void addText(String message) {
    conversation.add(message);

}

@Override
public String toString() {
    return phoneNumber;
}

public boolean equals(converseView other) {
    return this.phoneNumber.equals(other.phoneNumber);
} 
```

我正在创建一个短信应用程序，这是我的对话视图屏幕课程。addText() 在您单击发送按钮时被调用。我如何让列表视图更新，以便我可以看到发送的短信

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:43:09.570

您需要将消息添加到适配器，并通知适配器列表已更改。

```
if (this.adapter!=null)
{
  this.adapter.add(message);
  this.adapter.notifyDataSetChanged();
} 
```

基本上，适配器最后一次知道对话状态的时间是：

```
this.adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, android.R.id.text1,
        conversation); 
```

这会将 ArrayList 中的所有内容添加到 ArrayAdapter，但不会以任何方式将它们链接在一起。

# ios - UITableViewController Xib 未在 iOS5 中使用（在 iOS 6 中工作）

> ID：13773581
> 
> 赞同：0
> 
> 时间：2012-12-08T01:37:28.700
> 
> 标签：ios, ios5, ios6, interface-builder, tableview

我有几个 ViewControllers 子类 UITableViewController 并有一个 Xib 文件，我在其中设置 TableViews 外观（样式、颜色等）并添加页眉和页脚。

在 iOS 5 上似乎没有加载 xib 文件。在 iOS 6 上，加载了 xib 并且视图看起来与预期的一样。

iOS 6

![在此处输入图像描述](../Images/6b1016988f16fa527a6fdf7598d43699.png)

iOS 5 ![iPad iOS 5.1](../Images/1d1c7ee855a7918d24273f2540400dde.png)

Xib - 界面生成器

![在此处输入图像描述](../Images/8bb241937c212b1aabf3f3ef965bb086.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:44:23.993

事实证明，在 iOS 5 之前，UITableViewController 指定的初始化程序没有加载 Nib。这在 iOS 6 中发生了变化，现在它会检查 Nib。

为了使应用程序与两个版本一起工作，我进行了指定的初始化程序调用

```
self = [super initWithNibName:@"Nib Name" bundle:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:01:47.940

谢谢。对我来说还好

我添加一个方法' `initWithMyNib`'我用' `initWithStyle`'替换' `initWithMyNib`'

```
(id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self)
    {
        // Custom initialization
    }
    return self;
}

(id)initWithMyNib:(NSString*)strNibName
{
    self = [super initWithNibName:strNibName bundle:nil];
    if (self)
    {
        // Custom initialization
    }
    return self;
} 
```

# java - eclipse插件编程中的“工作台尚未创建”错误

> ID：13773582
> 
> 赞同：11
> 
> 时间：2012-12-08T01:37:31.170
> 
> 标签：java, eclipse, plugins, workspace

随着我的 eclipse 插件启动，我得到了`Root exception:java.lang.IllegalStateException: Workbench has not been created yet.`错误。

并且它似乎会导致一些捆绑异常错误的副作用。我不认为我的代码使用 egit 模块。

```
org.osgi.framework.BundleException: Exception in org.eclipse.egit.ui.Activator.start() of bundle org.eclipse.egit.ui.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300) 
```

如何消除此错误？这是访问工作区的代码。我发现[这篇文章 - 调试失败的 Eclipse 启动](http://www.eclipsezone.com/eclipse/forums/t99010.html)说它是竞争条件，但我不确定为什么我有竞争条件，如果是，如何删除它。

```
public void renameClassRefactor() throws CoreException {
    // get the project information with ResourcesPlugin
    IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
    // 1\. The name of the project in the workspace

    System.out.println(ResourcesPlugin.getWorkspace().toString());
    java.io.File workspaceDirectory = root.getLocation().toFile();
    System.out.println(workspaceDirectory.toString()); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-01-28T11:39:56.903

为了“尚未创建工作台”这一天，我挣扎了很多。

但我通过以下步骤得到了解决方案。-

1.  转到**运行配置**-> 删除所有目标平台 jar。
2.  单击添加所需的捆绑包。
3.  检查`org.apache.felix.gogo.runtime`、`org.apache.felix.gogo.shell`、`org.eclipse.equinox.console`和`org.eclipse.osgi`您的 jar 文件。
4.  最后也是重要的一步。转到**设置-** >**选中“****启动前清除配置区域**”复选框。
5.  现在运行 OSGi 应用程序。
6.  享受它是否对你有用，因为它对我有用。

谢谢

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-08T04:22:39.380

参考[这个站点](http://waheedtechblog.blogspot.com/2011/11/javalangillegalstateexception-workbench.html)，我可以`-clean`在运行配置中添加参数以删除错误消息。

![在此处输入图像描述](../Images/abecc9237ac050ed61348b981f1310a1.png)

# c - “错误表达式”声明 char 数组 c

> ID：13773583
> 
> 赞同：-1
> 
> 时间：2012-12-08T01:37:38.107
> 
> 标签：c, turbo-c

当我使用 bcc 编译我的 .c 文件时，我得到一个错误的表达式错误（如下所示），我不知道是什么原因造成的。

主要是，以下行导致...

```
 char test[13312]; 
```

...这个错误

```
kernel.c:25.5: error: bad expression
kernel.c:25.10: error: need ';' 
```

注释掉该行（以及使用测试数组的行）会使错误消失。

这是所有代码：

```
/* kernel 
 *
 * Register parameters for various BIOS interrupts 
 * http://www.ctyme.com/intr/int.htm
 * 
 * Sector 1: Map
 * Sector 2: Dir
 * Sector 3: Kernel 
 */

void printString(char* chars);
void readString(char* arr);
void readSector(char* buffer, int sector);
void readFile(char* fileName, char* buffer); 

void handleInterrupt21(int ax, int bx, int cx, int dx);

int mod(int a, int b);
int div(int a, int b);

void main(){ 
    printString("helloooo from main");
    //char line[80];
    //char buffer[80];
    char test[13312];
    makeInterrupt21();
    interrupt(0x21,0,"test",0,0); 
    //interrupt(0x21,3,"messag",buffer,0);
    //interrupt(0x21,3,"helloo",line,0); 
    //interrupt(0x21,0,"hello from main",0,0);
    readFile("messag",test);    
    interrupt(0x21,0,test,0,0); 
    //interrupt(0x21,0,line,0,0);
    while(1);
}

// Prints out each character of the array until it reaches 0x0 
// Call using Int 21 w/ ax=0
void printString(char* chars){ 

    int i=0; 

    for(i=0;chars[i]!='\0';i++){ 
        char al = chars[i];
        char ah = 0xe;
        int ax = ah * 256 + al;
        interrupt(0x10, ax, 0, 0, 0);
    }

}

// Reads from keyboard, while updating the display with what is being typed 
// Can deal with backspaces 
// Call using Int 21 w/ ax=1
void readString(char* arr){ 
    char enter = 0xd; 
    char endLine = 0xa; 
    char nullChar = 0x0; 
    char back = 0x8; 

    // while loop set up 
    int i = 0; 
    char ascii = interrupt(0x16, 0, 0, 0, 0);
    interrupt(0x10, 0xe*256+ascii, 0, 0, 0);

    // exit key: enter
    while(ascii!=enter){ 

        // decrements i (up to 0) if a backspace is entered, otherwise increments i
        // deals with what is in the char array         
        if(ascii==back&&i>0) {i--;}
        else if(ascii==back) {i=0;} 
        else {arr[i]=ascii; i++;}   

        // get next input letter and write it to screen 
        ascii = interrupt(0x16, 0, 0, 0, 0); 
        interrupt(0x10, 0xe*256+ascii, 0, 0, 0);

        // clear the display when backspace is clicked 
        if(ascii==back){
            interrupt(0x10, 0xe*256+nullChar, 0, 0, 0);
            interrupt(0x10, 0xe*256+ascii, 0, 0, 0);
        }
    }

    // puts end line and null characters at the end of the array 
    arr[i] = endLine; 
    arr[i+1] = nullChar; 

    // Writes a new line character to the screen 
    interrupt(0x10, 0xe*256+endLine, 0, 0, 0); 
} 

// Will take a predefined character array of 512 bytes+, and a sector number
// Call using Int 21 w/ ax=2
void readSector(char* buffer, int sector){ 
    int ah = 2; // tells BIOS to read 
    int al = 1; // number of sectors to read 
    int ax = ah * 256 + al; 
    int bx = buffer; // address where the data should be stored to 
    int ch = div(sector,36); //0 // track number 
    int cl = mod(sector,18)+1;  //13; // relative sector number 
    int cx = ch * 256 + cl;     
    int dh = mod(div(sector,18),2); //1; // head number
    int dl = 0; // device number; 0=floppy
    int dx = dh * 256 + dl; 

    //printString(bx);

    interrupt(0x13, ax, bx, cx, dx); 
    //printString((char)buffer);
} 

// Call using Int 21 w/ ax=3
// Not a finished 
void readFile(char* fileName, char* buffer){ 
    printString("entered"); 
    char dir[512];
    readSector(dir,2);
    // p will always be first char of what we're looking at
    int i,j,p;
    i = j = p 
    int flag= 0;    

    while(i<16){
        printString("i-loop");
        j=p;
        while(j<6){
            printString("j-loop");
            if(!dir[j]==fileName[j-p])
                break; 
            j++;
        }
        if(j==5) {flag=1; printString("flag=1"); break;}
        p+=32;
        i++;
    }
    if(flag==0){
        printString("0");
    } else {
        printString("1");
    }

    buffer = flag; 
} 

void handleInterrupt21(int ax, int bx, int cx, int dx){ 
    if(ax==0) {
        // bx = String 
        printString(bx); 
    } else if(ax==1) {
        // bx = buffer to hold read string 
        readString(bx);
    } else if(ax==2) {
        // bx = buffer to hold read string
        // cx = sector number
        readSector(bx,cx); 
    } else if(ax==3) { 
        // bx = char array holding file name
        // cx = address of a buffer to hold the file
        readFile(bx,cx);    
    }  else {
        printString("Invalid use of Int 21\0"); 
    }
} 

// aka a%b
int mod(int a, int b){ 
    while(a>=b)
        a=a-b;
    return a; 
} 

// aka a/b 
int div(int a, int b){ 
    int q = 0; 
    while (a>=b){
        q++;
        a=a-b;
    }
    return q; 
} 
```

**更新：** 修复声明错误仍然会导致编译错误（仅在密件抄送中）。似乎编译器不喜欢任何变量声明。

```
 /* kernel 
     *
     * Register parameters for various BIOS interrupts 
     * http://www.ctyme.com/intr/int.htm
     * 
     * Sector 1: Map
     * Sector 2: Dir
     * Sector 3: Kernel 
     */

    void printString(char* chars);
    void readString(char* arr);
    void readSector(char* buffer, int sector);
    void readFile(char* fileName, char* buffer); 

    void handleInterrupt21(int ax, int bx, int cx, int dx);

    int mod(int a, int b);
    int div(int a, int b);

    void main(){ 
        //char line[80];
        //char buffer[80];
        char test[13312];
        makeInterrupt21();
        interrupt(0x21,0,"test",0,0); 
        //interrupt(0x21,3,"messag",buffer,0);
        //interrupt(0x21,3,"helloo",line,0); 
        //interrupt(0x21,0,"hello from main",0,0);
        readFile("messag",test);    
        interrupt(0x21,0,test,0,0); 
        //interrupt(0x21,0,line,0,0);
        while(1);
    }

    // Prints out each character of the array until it reaches 0x0 
    // Call using Int 21 w/ ax=0
    void printString(char* chars){ 

        int i=0; 

        for(i=0;chars[i]!='\0';i++){ 
            char al = chars[i];
            char ah = 0xe;
            int ax = ah * 256 + al;
            interrupt(0x10, ax, 0, 0, 0);
        }

    }

    // Reads from keyboard, while updating the display with what is being typed 
    // Can deal with backspaces 
    // Call using Int 21 w/ ax=1
    void readString(char* arr){ 
        char enter = 0xd; 
        char endLine = 0xa; 
        char nullChar = 0x0; 
        char back = 0x8; 

        // while loop set up 
        int i = 0; 
        char ascii = interrupt(0x16, 0, 0, 0, 0);
        interrupt(0x10, 0xe*256+ascii, 0, 0, 0);

        // exit key: enter
        while(ascii!=enter){ 

            // decrements i (up to 0) if a backspace is entered, otherwise increments i
            // deals with what is in the char array         
            if(ascii==back&&i>0) {i--;}
            else if(ascii==back) {i=0;} 
            else {arr[i]=ascii; i++;}   

            // get next input letter and write it to screen 
            ascii = interrupt(0x16, 0, 0, 0, 0); 
            interrupt(0x10, 0xe*256+ascii, 0, 0, 0);

            // clear the display when backspace is clicked 
            if(ascii==back){
                interrupt(0x10, 0xe*256+nullChar, 0, 0, 0);
                interrupt(0x10, 0xe*256+ascii, 0, 0, 0);
            }
        }

        // puts end line and null characters at the end of the array 
        arr[i] = endLine; 
        arr[i+1] = nullChar; 

        // Writes a new line character to the screen 
        interrupt(0x10, 0xe*256+endLine, 0, 0, 0); 
    } 

    // Will take a predefined character array of 512 bytes+, and a sector number
    // Call using Int 21 w/ ax=2
    void readSector(char* buffer, int sector){ 
        int ah = 2; // tells BIOS to read 
        int al = 1; // number of sectors to read 
        int ax = ah * 256 + al; 
        int bx = buffer; // address where the data should be stored to 
        int ch = div(sector,36); //0 // track number 
        int cl = mod(sector,18)+1;  //13; // relative sector number 
        int cx = ch * 256 + cl;     
        int dh = mod(div(sector,18),2); //1; // head number
        int dl = 0; // device number; 0=floppy
        int dx = dh * 256 + dl; 

        //printString(bx);

        interrupt(0x13, ax, bx, cx, dx); 
        //printString((char)buffer);
    } 

    // Call using Int 21 w/ ax=3
    // Not finished 
    void readFile(char* fileName, char* buffer){ 
        printString("entered"); 
        char dir[512];
        readSector(dir,2);
        // p will always be first char of what we're looking at
        int i,j,p; 
        i = j = p = 0; 
        while(i<16){
            printString("i-loop");
            j=p;
            while(j<6){
                printString("j-loop");
                if(!dir[j]==fileName[j-p])
                    break; 
                j++;
            }
            if(j==5) {flag=1; printString("flag=1"); break;}
            p+=32;
            i++;
        }
        if(flag==0){
            printString("0");
        } else {
            printString("1");
        }

        buffer = flag; 
    } 

    void handleInterrupt21(int ax, int bx, int cx, int dx){ 
        if(ax==0) {
            // bx = String 
            printString(bx); 
        } else if(ax==1) {
            // bx = buffer to hold read string 
            readString(bx);
        } else if(ax==2) {
            // bx = buffer to hold read string
            // cx = sector number
            readSector(bx,cx); 
        } else if(ax==3) { 
            // bx = char array holding file name
            // cx = address of a buffer to hold the file
            readFile(bx,cx);    
        }  else {
            printString("Invalid use of Int 21\0"); 
        }
    } 

    // aka a%b
    int mod(int a, int b){ 
        while(a>=b)
            a=a-b;
        return a; 
    } 

    // aka a/b 
    int div(int a, int b){ 
        int q = 0; 
        while (a>=b){
            q++;
            a=a-b;
        }
        return q; 
    } 
```

错误：

```
 kernel.c:119.6: error: bad expression
 kernel.c:119.10: error: need ';'
 kernel.c:119.11: error: dir undeclared
 kernel.c:119.15: error: illegal indirection
 kernel.c:122.5: error: bad expression
 kernel.c:122.7: error: need ';'
 kernel.c:122.8: error: i undeclared
 kernel.c:122.10: error: j undeclared
 kernel.c:122.12: error: p undeclared
 kernel.c:129.14: error: illegal indirection
 kernel.c:133.18: error: flag undeclared 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:53:29.223

关于将整数分配给指针之类的事情有很多警告。但唯一的编译错误是您缺少`;`after `i = j = p`。

`test`声明或附近没有任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:02:30.473

只是在黑暗中拍摄，但你是在一台 8 位的机器上`size_t`吗？如果是，则 13312 将由于溢出而导致 0。所以实际上，你有：

```
char test[0]; 
```

这将解释错误。请显示以下输出：

```
printf("%u\n", (unsigned)sizeof(size_t)); 
```

# spring - Hibernate 不会抛出 StaleObjectStateException（不要进行优化锁定）

> ID：13773609
> 
> 赞同：0
> 
> 时间：2012-12-08T01:42:23.957
> 
> 标签：spring, hibernate

我在这里感到困惑。我想在我的 spring hibernate 程序中实现乐观锁定，但是即使我在单独的浏览器中打开一个数据并单独更新它，hibernate 也不会抛出 StaleObjectStateException。

我的道是这样的：

```
public void update(User user) throws StaleObjectStateException{       
sessionFactory.getCurrentSession().saveOrUpdate(user);
} 
```

我的 Pojo 看起来像这样：

```
@Version@Temporal(TemporalType.TIMESTAMP)
@Column(name="timestamp", length=19)
public Timestamp getTimestamp() {
return this.timestamp;
} 
```

配置文件

```
<bean name="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="configurationClass">
        <value>org.hibernate.cfg.AnnotationConfiguration</value>
    </property>
</bean>
<tx:annotation-driven />
<bean name="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

我怀疑它为什么不抛出异常的一个疑问是，在更新时，另一个会话时间戳也会更新，因为数据是持久的？请帮忙。

佩里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:52:25.810

我看到您正在使用 spring 事务管理器。所以我想在某个地方你有`@Transactional`跟踪你的交易的注释。在这种情况下，我认为`StaleObjectStateException`不会在执行类的更新方法时抛出，而是在提交事务时抛出。而且我还认为spring会将hibernate异常包装到`HibernateOptimisticLockingFailureException`. 因此，您需要在标有`@Transactional`注解的方法中添加 throws 声明。如果您没有任何事务注释，则需要在 Dao 中添加一些或使用手动事务处理。

# c# - 使用 Regex.Split 删除任何非数字并拆分 -

> ID：13773610
> 
> 赞同：1
> 
> 时间：2012-12-08T01:42:27.813
> 
> 标签：c#, regex, string, split

我不知道为什么，但出于某种原因，Regex Split 方法超出了我的想象。我正在尝试浏览教程以了解我需要的东西，但似乎找不到任何东西。

我只是在阅读一个 excel 文档并想格式化一个字符串，例如`$145,000-$179,999`给我两个字符串。`145000`和`179999`。同时，我想修剪一个字符串，例如`'$180,000-Limit`to simple `180000`。

```
var loanLimits = Regex.Matches(Result.Rows[row + 2 + i][column].ToString(), @"\d+"); 
```

上面的代码似乎`'$145,000-$179,999`分成 4 部分：`145`, `000`, `179`, `999`. 关于如何实现我所要求的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:48:36.187

正则表达式完全匹配一个字符（在正则表达式中不知道“数字”或“单词”的概念——你必须在你的表达式中自己定义）。您正在使用的表达式`\d+`, 使用字符类`\d`，这意味着任何数字 0-9（并且`+`意味着匹配一个或多个）。因此，在表达式`$145,000`中，请注意您要查找的部分不仅仅是由数字组成；它还包括逗号。因此，正则表达式会找到与您的正则表达式匹配的每一个连续字符组，即四组数字。

有几种方法可以解决这个问题。

1.  `,`在您的正则表达式中包含so `(\d|,)+`，这意味着匹配一行中尽可能多的数字*或*逗号字符。将有两个匹配项：`145,000`和`179,999`，您可以从中进一步删除逗号`myStr.Replace(",", "")`。（[**演示**](http://ideone.com/oGDruU)）
2.  按照你在标题中所说的做，并删除所有非数字字符。所以你可以使用`Regex.Replace`这个表达式`[^\d-]+`——这意味着匹配任何不是数字或连字符的东西——然后用`""`. 然后结果将是`145000-179999`，您可以使用简单的非正则表达式拆分，将其拆分`myStr.Split('-')`，以获得您的两个部分。（[**演示**](http://ideone.com/aBN1b8)）

请注意，对于您的第二个`$180,000-Limit`示例`Match`（`Split`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T01:51:56.543

您可以尝试通过根据 - 吐出每个字符串来分别处理每个字符串，并从中仅提取数字

```
 ArrayList mystrings = new ArrayList();
 List<string> myList = Result.Rows[row + 2 + i][column].ToString().Split('-').ToList();

 foreach(var item in myList)
 {

     string result = Regex.Replace(item, @"[^\d]", "");
     mystrings.Add(result);
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T02:33:35.253

使用 RegEx 的替代方法是使用 DotNet 框架中的内置字符串和字符方法。假设输入字符串总是有一个连字符：

```
string input = "$145,000-$179,999";

var split = input.Split( '-' )
        .Select( x => string.Join( "", x.Where( char.IsLetterOrDigit ) ) )
        .ToList();

string first = split.First(); //145000
string second = split.Last(); //179999 
```

1.  `Split`首先，您使用标准方法拆分字符串
2.  然后通过有选择地从集合中的每个项目中仅获取字母或数字来创建一个新字符串：`x.Where...`
3.  `Join`然后你使用标准方法加入字符串
4.  最后，为您的 2 个字符串获取集合中的第一个和最后一个项目。

# c# - CefSharp - 强命名

> ID：13773611
> 
> 赞同：3
> 
> 时间：2012-12-08T01:42:30.887
> 
> 标签：c#, browser, chromium, cefsharp

在我的项目中加载 CefSharp 程序集时出现错误。CefSharp 和 CefSharp.WinForms 都没有强命名。有没有办法解决？

错误：

```
Referenced assembly 'CefSharp.WinForms' does not have a strong name 
Referenced assembly 'CefSharp' does not have a strong name 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:29:24.673

强签名的程序集不能引用未签名的程序集。所以你的选择是：

*   查找（或在许可允许您这样做的情况下创建）CefSharp.XXX 程序集的强签名版本
*   停止签署您自己的程序集
*   使用`Assembly.Load`和反射使用非签名程序集。

# asp.net-mvc - Kendo ListView 模型与 View 托管 ListView 使用的模型

> ID：13773619
> 
> 赞同：1
> 
> 时间：2012-12-08T01:44:02.443
> 
> 标签：asp.net-mvc, listview, kendo-ui, model-binding

我有一个托管 Kendo ListView 的 MVC4 视图。ViewModel 包含 ListView 所需的属性以及主视图使用的属性。问题是 ListView 使用 ViewModel 的 IEnumerable 而我的主视图没有。似乎我不能在 1 个视图中同时拥有两者（或者我可以吗？）。

例如，作为局部视图加载到列表视图中的 MVC 视图绑定到以下模型：

```
@model app.WebSiteModels.EditPhotoViewModel 
```

其中 EditPhotoViewModel 定义为：

```
public class EditPhotoViewModel
{
    public WebsitePhoto WebsitePhoto { get; set; }  //WebsitePhoto is used in my main view
    public IEnumerable<Photo> PhotoList { get; set; }  //the Photo properties are used in my listview
} 
```

列表视图绑定到 EditPhotoViewModel 的 IEnumerable 版本：@model IEnumerable

问题：

`@model app.WebSiteModels.EditPhotoViewModel`不适用于视图列表， `@model IEnumerable<app.WebSiteModels.EditPhotoViewModel>`也不适用于我的主视图

我必须在这里遗漏一些非常基本的东西 - 请尽快提供帮助，因为我几天来一直试图解决这个问题，这很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:18:34.483

您可以将 ListView 绑定到 PhotoList 属性。方法如下：

```
@model app.WebSiteModels.EditPhotoViewModel

@(Html.Kendo().ListView(Model.PhotoList).Name("photoList")) 
```

# jquery - div 容器淡出不起作用

> ID：13773620
> 
> 赞同：0
> 
> 时间：2012-12-08T01:44:22.753
> 
> 标签：jquery

当我将鼠标悬停在菜单栏上时，我希望内容达到 50%。无论出于何种原因，我都没有完成它。我在只有 2 个 div 的测试页面上完成了它。一旦我有更多的div，它就不起作用了。为什么不？？？我指的页面是[http://www.guntmarwolff.com/eigenschaftenv.php](http://www.guntmarwolff.com/eigenschaftenv.php)

预先感谢您的帮助！

```
 $(document).ready(function(){

      $("Layer5").mouseover(function(){
          $("header1").fadeTo('slow', 0.5);
      });

      $("Layer5").mouseout(function(){
          $("header1").fadeTo('slow', 1);
      });
  });

</script>

<div id="Layer5">
    <div style="position:relative; top:125px; left:480px; font-size:50px; z-index:1000;"><ul class="topmenu" id="css3menu1" name="css3menu1">
    <li class="topfirst"><a href="http://www.xy.com" style="height:26px;line-height:26px;">Home</a></li>
    <li class="topmenu"><a href="#" style="height:26px;line-height:26px;"><span>Info</span></a>

<div id="container1">
<div id="header1" class="header1">
  <div class="navbar1" style="position:relative;top:0px;left:-40px;z-index:1200px; id="about"><img src="headeigenschaftendeserfolgs.png" border="0"/></div>
  <p>
<p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:52:29.850

首先，ID 在其名称前有一个哈希：

id="第5层"

css

```
#Layer5 {} 
```

js (jquery)

```
$("#Layer5"); 
```

修复了，你应该对你的html进行排序。这对我有用：

```
 $(document).ready(function(){

  $("#Layer5 li a").hover( function() {
       console.log("in");
      $("#header1").fadeTo('slow', 0.5);
      }, 
  function () {
      console.log("out");
      $("#header1").fadeTo('slow', 1);
}); 
```

});

```
<div id="Layer5">
<div style="position:relative; top: 0px; left:80px; font-size:50px; z-index:1000;">
    <ul class="topmenu" id="css3menu1" name="css3menu1">
        <li class="topfirst"><a href="http://www.xy.com" style="height:26px;line-height:26px;">Home</a></li>
        <li class="topmenu"><a href="#" style="height:26px;line-height:26px;"><span>Info</span></a></li>
    </ul>
</div> 
```

我所有的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:02:13.850

与原帖有点偏离主题，但 JQuery 的优点之一是能够轻松地将多个事件链接在一起。

```
$(document).ready(function(){
  $("#Layer5").mouseover(function(){
    $("#header1").fadeTo('slow', 0.5);
  })
  .mouseout(function(){
    $("#header1").fadeTo('slow', 1);
  });
}); 
```

# jquery - 来自相同输入类型=隐藏类“myclass”的上升事件并获得不同的值

> ID：13773623
> 
> 赞同：0
> 
> 时间：2012-12-08T01:45:03.773
> 
> 标签：jquery, html

我有以下html。

```
<input class="gallery-next1" type="hidden" value="2"><a href="#" class="gallery-next" >unu</a></input> 
```

和下面的jQuery

```
$(".gallery-next").click(function (){
     alert($(this).closest("input").val());
}); 
```

此查询显示在警报“未定义”中。你知道为什么我没有得到价值 2 吗？

好的，现在 1 无处不在我如何将此类绑定到同一个函数并让对象触发事件？

```
<input class="gallery-next1" type="hidden" value="1"><a href="#" class="gallery-next" >unu</a>
<input class="gallery-next1" type="hidden" value="2"/><a href="#" class="gallery-next" >doi</a>
<input class="gallery-next1" type="hidden" value="3"/><a href="#" class="gallery-next" >trei</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:47:26.330

### 您的标记无效。

`<input>`element 没有结束标签，因此您的浏览器尝试修复错误，只需`<a>`在`<input>`.

修复标记并使用[`siblings()`](http://api.jquery.com/siblings/)or [`prev()`](http://api.jquery.com/prev/)：

```
$(".gallery-next").click(function() {
    alert($(this).siblings("input").val());  // or $(this).prev().val();
}); 
```

**演示：http:** [//jsfiddle.net/cqwKw/](http://jsfiddle.net/cqwKw/)

# ruby-on-rails - 运行导轨时未找到符号

> ID：13773633
> 
> 赞同：2
> 
> 时间：2012-12-08T01:46:52.770
> 
> 标签：ruby-on-rails

我刚刚通过 rvm 在运行山狮的 mac 上安装了 Ruby on Rails。当我运行服务器时出现此错误，这是什么意思？

```
 **********:DII ****$ rails server
dyld: lazy symbol binding failed: Symbol not found: _rb_utf8_encoding
  Referenced from: /Users/*******/.rvm/gems/ruby-1.9.3-p327@DII/gems/nokogiri-1.5.5/lib/nokogiri/nokogiri.bundle
  Expected in: flat namespace

dyld: Symbol not found: _rb_utf8_encoding
  Referenced from: /Users/******/.rvm/gems/ruby-1.9.3-p327@DII/gems/nokogiri-1.5.5/lib/nokogiri/nokogiri.bundle
  Expected in: flat namespace

Trace/BPT trap: 5 
```

* * *

问题是在升级 ruby​​ 之前，这个项目在 ruby​​ 1.8.7 下运行，我遇到了这个问题。这只是一个测试项目，所以我从零开始创建了一个新项目

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T11:51:28.103

这意味着您正在尝试使用为 ruby​​ 1.9.3 编译的 gem 运行 ruby​​ 1.8.7 - 有些东西已经扭曲了它的内裤

我会尝试将 gem 重新安装到一个干净的 gemset 中，并确保您使用的是您认为的 ruby​​ 版本

# objective-c - UIImagePickerController 的 UIImage 的 NSURL 返回 (null)

> ID：13773635
> 
> 赞同：1
> 
> 时间：2012-12-08T01:47:05.823
> 
> 标签：objective-c, uiimage, uiimagepickercontroller, dropbox, nsurl

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editInfo {
userURL = [editInfo objectForKey:UIImagePickerControllerMediaURL];
userImage = image;
userImageView.image=userImage;
[self dismissViewControllerAnimated:YES completion:nil];} 
```

然后我获取 NSURL userURL，并将其放在 UIActivityViewController 中以用于上传图像。但是，这永远不会起作用，并且在尝试上传时总是失败（null）。但是，当我使用 xcode 项目中包含的预设图像和以下代码时，它始终可以正常工作并正确上传：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"kitten.jpg" withExtension:nil]; 
```

如果有帮助，我正在使用[https://github.com/goosoftware/GSDropboxActivity](https://github.com/goosoftware/GSDropboxActivity)

当我使用 UIImagePickerControllerReferenceURL 而不是 UIImagePickerControllerMediaURL 时，我收到以下错误：[警告] DropboxSDK：文件不存在 (/asset.JPG) 无法上传 assets-library://asset/asset.JPG?id=EECAF4D0-A5ED- 40E7-8E6F-3A586C0AB06E&ext=JPG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T19:57:32.937

理论上，`UIImagePickerControllerMediaURL`只为电影填充，而不是图像。如果您使用，`UIImagePickerControllerReferenceURL`那么您获得的 URL 不是文件系统的 URL，而是资产库。要从中获取文件，您需要使用资产库。使用类似以下内容：

```
typedef void (^ALAssetsLibraryAssetForURLResultBlock)(ALAsset *asset);
typedef void (^ALAssetsLibraryAccessFailureBlock)(NSError *error);    

ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset){

    ALAssetRepresentation *rep = [myasset defaultRepresentation];
    CGImageRef iref = [rep fullResolutionImage];

    if (iref){

        UIImage *myImage = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];

         // Do whatever you now want with your UIImage
     }      
};      

ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror){                   
    //failed to get image.
};                          

ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];
[assetslibrary assetForURL:[filePath objectAtIndex:0] resultBlock:resultblock failureBlock:failureblock]; 
```

这会处理将处理您的请求的块，但您仍然需要实际从资产库中请求资源。为此，试试这个：

```
ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];
NSURL myAssetUrl = [NSURL URLWithString:[editInfo objectForKey:UIImagePickerControllerMediaURL]];
[assetslibrary assetForURL:myAssetUrl resultBlock:resultblock failureBlock:failureblock]; 
```

从理论上讲，您应该得到您所追求的 :) 此代码由[Ramshad](https://stackoverflow.com/users/1143874/ramshad)提供，可以在[此处找到对其的进一步讨论](https://stackoverflow.com/questions/11721762/how-to-convert-image-path-to-uiimage-using-alassetslibrary)

希望这将帮助您完成您所追求的。抱歉，如果有点晚了:(

**编辑**

请注意，如果您不使用 ARC，则需要在此示例中整理内存，因为我根本没有包含任何内存管理。

# ruby - 如何在后台运行 Sinatra 作业？

> ID：13773636
> 
> 赞同：5
> 
> 时间：2012-12-08T01:47:10.677
> 
> 标签：ruby, heroku, sinatra, delayed-job, ruby-1.9

响应请求时，是否可以发送响应然后继续处理？

还是您需要运行后台进程？什么是最简单的解决方案？

Heroku 上的 Sinatra 应用程序，Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T02:36:54.113

您可以运行另一个线程，例如：

[http://mark-watson.blogspot.com/2011/11/ruby-sinatra-web-apps-with-background.html](http://mark-watson.blogspot.com/2011/11/ruby-sinatra-web-apps-with-background.html)

# batch-file - 批处理文件以在文件夹中搜索 dll 文件名

> ID：13773638
> 
> 赞同：0
> 
> 时间：2012-12-08T01:47:26.033
> 
> 标签：batch-file, command, cmd

我需要编写一个批处理文件，该文件将在文件夹中搜索所有 dll，并用它们的名字进行一些处理。例如，一个文件夹包含

文件 1.dll 文件 2.dll 文件 3.dll

在 C:\temp 内

应该返回

文件 1 文件 2 文件 3

我想对这些文件名做一些进一步的处理。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:18:48.560

`for /r %i in (*.dll) do @echo %~ni`

# ruby - Rspec 验证测试在“放置”更新时失败

> ID：13773639
> 
> 赞同：0
> 
> 时间：2012-12-08T01:47:26.263
> 
> 标签：ruby, ruby-on-rails-3, rspec, factory-bot

我有这个工厂：`@host = FactoryGirl.create(:host)`

该测试通过：

```
it 'should update and redirect to the show page' do                                  
  new_attr = @host.attributes.merge("hostname" => "New_name")             
  put 'update', id: @host, host: new_attr              
  response.should redirect_to(host_path(@host))                           
end¬ 
```

但是这个失败了：

```
 it 'should fail on validation for empty hostname and redirect to edit' do                                           
    bad_attr = @host.attributes.merge("hostname" => "")                     
    put 'update', id: @host, host: bad_attr                                 
    response.should redirect_to(edit_host_path(@host))                
  end 
```

出现此错误：

```
 1) HostsController POST update failure should redirect to edit
         Failure/Error: response.should redirect_to(edit_host_path(@host))
           Expected response to be a redirect to <http://test.host/hosts/1/edit> but was a redirect to <http://test.host/hosts/1>
         # ./spec/controllers/hosts_controller_spec.rb:127:in `block (4 levels) in <top (required)>' 
```

在我的 HostsController 的 #update 中，使用空主机名验证失败的主机对象应该是`redirect_to edit_host_path(@host)`. 这是我的 HostsController#update

```
def update                                                                    
  @host = Host.find(params[:id])                                              
  if @host.save                 
    flash[:notice] = 'Host was successfully updated.'                         
    redirect_to host_path(@host)                                              
  else¬                                                                        
    redirect_to edit_host_path(@host)    
  end
end 
```

我已经在控制台中保存和更新属性并且我的验证工作。那么为什么会出现这个错误呢？有任何想法吗？Rspec 似乎是在说我的具有不良属性的工厂对象正在通过验证，但我的模型验证良好。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:58:36.213

/我做了一个手掌。

在 HostsController#update 中，这个：

```
@host = Host.find(params[:id])
@host.save 
```

应该是这样的：

```
@host = Host.find(params[:id])
@host.update_attributes(params[:host]) 
```

# c - libjpeg：一次处理所有扫描线

> ID：13773644
> 
> 赞同：1
> 
> 时间：2012-12-08T01:48:36.050
> 
> 标签：c, jpeg, libjpeg

[我使用来自Independent JPEG Group](http://www.ijg.org/)的 jpeg 库 v8d ，我想改变 jpeg 解压缩读取和处理数据的方式。

在 djpeg中，每次调用`main()`中一次只读取和处理一个扫描线/行。`jpeg_read_scanlines()`因此，要读取整个图像，将调用此函数，直到读取并处理所有行：

```
 while (cinfo.output_scanline < cinfo.output_height) { 
    num_scanlines = jpeg_read_scanlines(&cinfo, dest_mgr->buffer,
                    dest_mgr->buffer_height); //read and process
    (*dest_mgr->put_pixel_rows) (&cinfo, dest_mgr, num_scanlines); //write to file
  } 
```

但是我想读取整个图像一次并将其存储在内存中，然后从内存中处理整个图像。通过阅读`libjpeg.txt`，我发现这是可能的：“如果您将整个图像都保存在内存中，您可以一次调用处理整个图像，但通常一次处理一条扫描线是最简单的。”

尽管我取得了一些进展，但我无法让它完全发挥作用。`pub.buffer_height`我现在可以通过增加value 和size来读取几行`pub.buffer`，但无论多大`pub.buffer_height`，每次调用`pub.buffer`只读取几行。`jpeg_read_scanlines()`对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T17:13:29.427

> 每一行只读取几行`jpeg_read_scanlines()`

是的，所以你循环调用它。这是一个一次抓取一条扫描线的循环：

```
unsigned char *rowp[1], *pixdata = ...;
unsigned rowbytes = ..., height = ...;

while (cinfo.output_scanline < height) {
    rowp[0] = pixdata + cinfo.output_scanline * rowbytes;
    jpeg_read_scanlines(&cinfo, rowp, 1);
} 
```

循环退出后，您将拥有整个图像。

# java - ConcurrentLinkedQueue 和列表方法

> ID：13773646
> 
> 赞同：0
> 
> 时间：2012-12-08T01:48:46.880
> 
> 标签：java, linked-list, queue

我目前正在寻找一个线程安全的程序，允许我在我的程序中实现时间优先级。如果您愿意，我很乐意与您分享代码，但这对我的问题并不重要，我认为这并不重要。我最初在启动并运行该程序的（非线程安全）版本时使用了链表，但现在我正在切换到线程安全版本，我已经从链表更改为并发链接队列。问题是我需要从队列中获取元素（通常从头部，偶尔从尾部）。我真的只需要看看头部的元素是否满足某个属性。在链表版本中，它看起来像：

```
if (order.getQuantity()>= a.getFirst().getQuantity()){
                        Fill orderfill = new  Fill(a.getFirst().getQuantity(),a.getFirst().getLimitPrice(), order.getOrderID(),a.getFirst().getOrderID());
                        fills.add(orderfill);
                        order.setQuantity(order.getQuantity()-a.getFirst().getQuantity());
                        a.removeFirst(); 
```

这里的“a”是我的链表。当我更改为并发链接队列时，getFirst 方法不再存在。是否有一种队列友好的方法可以实现与链表的 getFirst 或 getLast 方法相同的目标？（如您所见，我只需要获取该对象，以便我可以开始使用与该对象相关的方法来处理其他事情）。

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:54:29.003

您可能想使用[ConcurrentLinkedDeque](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html)，它提供`getFirst()`和`getLast()`方法。

# ruby - 尝试将应用程序部署到 heroku 每次都收到错误

> ID：13773647
> 
> 赞同：1
> 
> 时间：2012-12-08T01:49:00.200
> 
> 标签：ruby, heroku, github

我目前正在尝试将应用程序部署到 heroku [https://github.com/Shopify/dashing/wiki/How-to%3A-Deploy-to-Heroku](https://github.com/Shopify/dashing/wiki/How-to%3A-Deploy-to-Heroku)

我完全按照这些说明进行操作

```
bundle install
git init
git add .
git commit -m "My beautiful dashboard"

heroku apps:create myapp

git push heroku master 
```

每次都收到这个错误

```
git push heroku master
Counting objects: 441, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (225/225), done.
Writing objects: 100% (441/441), 503.88 KiB | 445 KiB/s, done.
Total 441 (delta 170), reused 441 (delta 170)

-----> Heroku receiving push
-----> Ruby app detected
 !
 !     Gemfile.lock is required. Please run "bundle install" locally
 !     and commit your Gemfile.lock.
 !
 !     Heroku push rejected, failed to compile Ruby app 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:58:26.523

你没有 Gemfile.lock 文件
试试 `bundle install`然后`git commit -am "message you wanna put here"`

如下所述，检查`gitignore`并删除`/Gemfile.lock`，再次提交可能会解决您的问题

# javascript - 只允许标签中的几个标签用于复制粘贴

> ID：13773648
> 
> 赞同：1
> 
> 时间：2012-12-08T01:49:01.817
> 
> 标签：javascript, html

如果我们不希望人们复制我们网站中的任何内容，我们可以使用

```
<body oncontextmenu="return false" onselectstart="return false"> 
```

这适用于整个身体。但是如果我想让body中的一些标签不受限制呢？例如，我想要我的联系方式，电子邮件可复制。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:50:50.407

你的方法是有缺陷的；这永远不会奏效。

如果人们想从您的网站访问内容，他们可以简单地从浏览器的*本地*菜单（即`tools -> web developer -> page source`在 FireFox 中）查看您网站的代码。或者打开开发人员工具并完全删除您的 dom 级别 0 处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:06:44.247

不幸的是，没有真正的方法可以保护您的内容或源代码。即使这种方法能够可靠地工作，任何恶意用户都只需关闭他们的 JavaScript 并且“保护”将变得无用。

如果您的内容被盗，您可以随时引用《[数字千年版权法》](http://www.copyright.gov/legislation/dmca.pdf)向违规网站的主机提出投诉。您可能需要进行 Whois 查询才能获得任何联系方式。

此外，主要的搜索引擎，如谷歌，也有从他们的排名中删除此类网站的政策（有效地将它们从公开曝光中列入黑名单），因此您可以放心，如果发生此类情况，您很可能会得到合理的解决方案情况。

# image - 将 id/class 添加到帖子中的第一张图片？

> ID：13773651
> 
> 赞同：1
> 
> 时间：2012-12-08T01:49:54.997
> 
> 标签：image, wordpress

我尝试了[Luminate](http://www.luminate.com/)图片广告，但是它将广告添加到帖子的每张图片中，感觉就像垃圾邮件。如果我可以向第一张图像添加唯一的 id/类，我可以将 Luminate 脚本仅链接到该图像。

编辑：我有一个 wordpress 网站。我在 Luminate 设置中解决了这个问题，方法是转到应用程序 > 图片广告选项并将其设置为 5%。不过感谢您的回复。

# javascript - Javascript jQuery ajax

> ID：13773654
> 
> 赞同：2
> 
> 时间：2012-12-08T01:50:53.113
> 
> 标签：javascript, jquery, google-geocoder

我正在尝试按照此[Google Maps API 地理编码功能问题](https://stackoverflow.com/questions/7172710/google-maps-api-geocode-function-problem)代码来使用 Google 地理编码 API，但我做错了。我从地理编码开始，然后是 jQuery 验证器，但不知何故，状态没有得到设置。有什么帮助吗？

```
jQuery(document).ready(function($) {

  var shvalidator = $('#post').validate({
    rules: {
      post_title: { required:true }
    },
    messages:  { 
        post_title: {required:jQuery.format("Enter the name of the venue")} 
    }
  });

  function getAddress() {

    var geocoder = new google.maps.Geocoder();

    var fulladdress = $('#sh_venue_address1').val()+' ' \
      +$('#sh_venue_address2').val()+' ' \
      +$('#sh_venue_city').val()+' ' \
      +$('#sh_venue_state').val()+' ' \
      +$('#sh_venue_postalcode').val();

    alert(fulladdress );
    var a,b;

    geocoder.geocode( { 'address': fulladdress},
    function(results, status) {
     //**// 
     if (status == google.maps.GeocoderStatus.OK) {
        a = results[0].geometry.location.lat();
        b = results[0].geometry.location.lng();
        setAddress(a,b);
      }
    });
  }

  // this is the callback method that waits for response from google
  function setAddress(lat,lng) {
    $('#sh_venue_latitude').val(lat);
    $('#sh_venue_longitude').val(lng);
    alert ($('#sh_venue_latitude').val());
  }

  // this is used to validate the form before submitting
  $('#post').submit(function() {
    getAddress();
    if (shvalidator.valid()==true){
      return true;
    } else {
      $('#ajax-loading').hide();
      $('#publish').removeClass('button-primary-disabled');
      return false;
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:36:51.840

我认为它不起作用，因为函数 getAddress 在处理提交之前没有完全执行（因为它是对地址进行地理编码的异步调用）。我想在提交函数中这样做：

```
getAddress(function(){
if (shvalidator.valid()==true){
      return true;
    } else {
      $('#ajax-loading').hide();
      $('#publish').removeClass('button-primary-disabled');
      return false;
    }
}); 
```

并将 getAddress 函数更改为：

```
function getAddress(callback){
...
setAddress(a,b);
callback();

...
} 
```

# android - 捕获 GoogleMap Android API V2 的屏幕截图

> ID：13773658
> 
> 赞同：51
> 
> 时间：2012-12-08T01:51:16.630
> 
> 标签：android, android-mapview, google-maps-android-api-2

**最终更新**

功能请求已由 Google 完成。请[在下面查看此答案。](https://stackoverflow.com/a/18093295/1103584)

**原始问题**

使用旧版本的 Google Maps Android API，我能够捕获谷歌地图的屏幕截图以通过社交媒体分享。我使用以下代码捕获屏幕截图并将图像保存到文件中，效果很好：

```
public String captureScreen()
{
    String storageState = Environment.getExternalStorageState();
    Log.d("StorageState", "Storage state is: " + storageState);

    // image naming and path  to include sd card  appending name you choose for file
    String mPath = this.getFilesDir().getAbsolutePath();

    // create bitmap screen capture
    Bitmap bitmap;
    View v1 = this.mapView.getRootView();
    v1.setDrawingCacheEnabled(true);
    bitmap = Bitmap.createBitmap(v1.getDrawingCache());
    v1.setDrawingCacheEnabled(false);

    OutputStream fout = null;

    String filePath = System.currentTimeMillis() + ".jpeg";

    try 
    {
        fout = openFileOutput(filePath,
                MODE_WORLD_READABLE);

        // Write the string to the file
        bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fout);
        fout.flush();
        fout.close();
    } 
    catch (FileNotFoundException e) 
    {
        // TODO Auto-generated catch block
        Log.d("ImageCapture", "FileNotFoundException");
        Log.d("ImageCapture", e.getMessage());
        filePath = "";
    } 
    catch (IOException e) 
    {
        // TODO Auto-generated catch block
        Log.d("ImageCapture", "IOException");
        Log.d("ImageCapture", e.getMessage());
        filePath = "";
    }

    return filePath;
} 
```

但是，API V2 使用的新 GoogleMap 对象没有 MapView 那样的“getRootView()”方法。

我试图这样做：

```
 SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.basicMap);

    View v1 = mapFragment.getView(); 
```

但我得到的截图没有任何地图内容，看起来像这样： ![空白地图截图](../Images/abec16655b71628e6f4017b1cd6faa00.png)

有人知道如何截取新的 Google Maps Android API V2 的屏幕截图吗？

**更新**

我也尝试通过这种方式获取 rootView：

```
View v1 = getWindow().getDecorView().getRootView(); 
```

这会生成一个屏幕截图，其中包含屏幕顶部的操作栏，但地图仍然是空白的，就像我附加的屏幕截图一样。

**更新**

已向 Google 提交功能请求。如果这是您希望谷歌在未来添加的内容，请在功能请求中添加星标： [向 Google Maps API V2 添加屏幕截图功能](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4898)

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-08-07T01:41:45.637

更新 - 谷歌添加了一个快照方法**！：

已满足对 Android Google Map API V2 OpenGL 层进行屏幕截图的方法的功能请求。

要截屏，只需实现以下接口：

```
public abstract void onSnapshotReady (Bitmap snapshot) 
```

并致电：

`public final void snapshot (GoogleMap.SnapshotReadyCallback callback)`

截取屏幕截图，然后显示标准“图像共享”选项的示例：

```
public void captureScreen()
    {
        SnapshotReadyCallback callback = new SnapshotReadyCallback() 
        {

            @Override
            public void onSnapshotReady(Bitmap snapshot) 
            {
                // TODO Auto-generated method stub
                bitmap = snapshot;

                OutputStream fout = null;

                String filePath = System.currentTimeMillis() + ".jpeg";

                try 
                {
                    fout = openFileOutput(filePath,
                            MODE_WORLD_READABLE);

                    // Write the string to the file
                    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fout);
                    fout.flush();
                    fout.close();
                } 
                catch (FileNotFoundException e) 
                {
                    // TODO Auto-generated catch block
                    Log.d("ImageCapture", "FileNotFoundException");
                    Log.d("ImageCapture", e.getMessage());
                    filePath = "";
                } 
                catch (IOException e) 
                {
                    // TODO Auto-generated catch block
                    Log.d("ImageCapture", "IOException");
                    Log.d("ImageCapture", e.getMessage());
                    filePath = "";
                }

                openShareImageDialog(filePath);
            }
        };

        mMap.snapshot(callback);
    } 
```

图像完成捕获后，它将触发标准的“共享图像”对话框，以便用户可以选择他们想要共享的方式：

```
public void openShareImageDialog(String filePath) 
{
File file = this.getFileStreamPath(filePath);

if(!filePath.equals(""))
{
    final ContentValues values = new ContentValues(2);
    values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg");
    values.put(MediaStore.Images.Media.DATA, file.getAbsolutePath());
    final Uri contentUriFile = getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);

    final Intent intent = new Intent(android.content.Intent.ACTION_SEND);
    intent.setType("image/jpeg");
    intent.putExtra(android.content.Intent.EXTRA_STREAM, contentUriFile);
    startActivity(Intent.createChooser(intent, "Share Image"));
}
else
{
            //This is a custom class I use to show dialogs...simply replace this with whatever you want to show an error message, Toast, etc.
    DialogUtilities.showOkDialogWithText(this, R.string.shareImageFailed);
}
} 
```

文档在[这里](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.SnapshotReadyCallback)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-08-19T07:34:43.300

以下是通过示例捕获 Google Map V2 屏幕截图的步骤

**步骤 1.**打开`Android Sdk Manager (Window > Android Sdk Manager)`然后`Expand Extras`现在`update/install Google Play Services to Revision 10`忽略此步骤（如果已经）`installed`

在此处阅读注释[https://developers.google.com/maps/documentation/android/releases#august_2013](https://developers.google.com/maps/documentation/android/releases#august_2013)

**第2步。** `Restart Eclipse`

**步骤 3。** `import com.google.android.gms.maps.GoogleMap.SnapshotReadyCallback;`

**步骤 4.** 制作方法来捕获/存储地图的屏幕/图像，如下所示

```
public void CaptureMapScreen() 
{
SnapshotReadyCallback callback = new SnapshotReadyCallback() {
            Bitmap bitmap;

            @Override
            public void onSnapshotReady(Bitmap snapshot) {
                // TODO Auto-generated method stub
                bitmap = snapshot;
                try {
                    FileOutputStream out = new FileOutputStream("/mnt/sdcard/"
                        + "MyMapScreen" + System.currentTimeMillis()
                        + ".png");

                    // above "/mnt ..... png" => is a storage path (where image will be stored) + name of image you can customize as per your Requirement

                    bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        };

        myMap.snapshot(callback);

        // myMap is object of GoogleMap +> GoogleMap myMap;
        // which is initialized in onCreate() => 
        // myMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map_pass_home_call)).getMap();
} 
```

**第 5 步。**`CaptureMapScreen()`现在在要捕获图像的位置调用此方法

就我而言，我`calling this method on Button click in my onCreate()`工作正常

**像：**

```
Button btnCap = (Button) findViewById(R.id.btnTakeScreenshot);
    btnCap.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                CaptureMapScreen();
            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }

        }
    }); 
```

[在这里](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#snapshot%28com.google.android.gms.maps.GoogleMap.SnapshotReadyCallback,%20android.graphics.Bitmap%29) 和[这里](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.SnapshotReadyCallback)检查文档

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-08T14:35:09.617

我捕获了地图截图。它会有所帮助

```
 private GoogleMap map;
 private static LatLng latLong; 
```

`

```
public void onMapReady(GoogleMap googleMap) {
           map = googleMap;
           setMap(this.map);
           animateCamera();
            map.moveCamera (CameraUpdateFactory.newLatLng (latLong));
            map.setOnMapLoadedCallback (new GoogleMap.OnMapLoadedCallback () {
                @Override
                public void onMapLoaded() {
                    snapShot();
                }
            });
        } 
```

`

snapShot() 方法用于截取地图

```
 public void snapShot(){
    GoogleMap.SnapshotReadyCallback callback=new GoogleMap.SnapshotReadyCallback () {
        Bitmap bitmap;
        @Override
        public void onSnapshotReady(Bitmap snapshot) {
            bitmap=snapshot;

            try{
                file=new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),"map.png");
                FileOutputStream fout=new FileOutputStream (file);
                bitmap.compress (Bitmap.CompressFormat.PNG,90,fout);
                Toast.makeText (PastValuations.this, "Capture", Toast.LENGTH_SHORT).show ();

            }catch (Exception e){
                e.printStackTrace ();
                Toast.makeText (PastValuations.this, "Not Capture", Toast.LENGTH_SHORT).show ();
            }

        }
    };map.snapshot (callback);
} 
```

我的输出如下[![在此处输入图像描述](../Images/5395b1c5bbce85d969e6eed158667a45.png)](https://i.stack.imgur.com/nulbK.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-10T13:13:44.790

**编辑**：此答案不再有效 - Google Maps Android API V2 上的屏幕截图功能请求已得到满足。有关[示例，请参见此答案](https://stackoverflow.com/a/18093295/1103584)。

**原始接受的答案**

由于新的 Android API v2 地图使用 OpenGL 显示，因此无法创建屏幕截图。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-16T03:29:12.930

由于投票最多的答案不适用于地图片段顶部的折线和其他叠加层（我在寻找什么），我想分享这个解决方案。

```
public void captureScreen()
        {
            GoogleMap.SnapshotReadyCallback callback = new GoogleMap.SnapshotReadyCallback()
            {

                @Override
                public void onSnapshotReady(Bitmap snapshot) {
                    try {
                        getWindow().getDecorView().findViewById(android.R.id.content).setDrawingCacheEnabled(true);
                        Bitmap backBitmap = getWindow().getDecorView().findViewById(android.R.id.content).getDrawingCache();
                        Bitmap bmOverlay = Bitmap.createBitmap(
                                backBitmap.getWidth(), backBitmap.getHeight(),
                                backBitmap.getConfig());
                        Canvas canvas = new Canvas(bmOverlay);
                        canvas.drawBitmap(snapshot, new Matrix(), null);
                        canvas.drawBitmap(backBitmap, 0, 0, null);

                        OutputStream fout = null;

                        String filePath = System.currentTimeMillis() + ".jpeg";

                        try
                        {
                            fout = openFileOutput(filePath,
                                    MODE_WORLD_READABLE);

                            // Write the string to the file
                            bmOverlay.compress(Bitmap.CompressFormat.JPEG, 90, fout);
                            fout.flush();
                            fout.close();
                        }
                        catch (FileNotFoundException e)
                        {
                            // TODO Auto-generated catch block
                            Log.d("ImageCapture", "FileNotFoundException");
                            Log.d("ImageCapture", e.getMessage());
                            filePath = "";
                        }
                        catch (IOException e)
                        {
                            // TODO Auto-generated catch block
                            Log.d("ImageCapture", "IOException");
                            Log.d("ImageCapture", e.getMessage());
                            filePath = "";
                        }

                        openShareImageDialog(filePath);

                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            };

           ;

            map.snapshot(callback);
        } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-30T07:41:59.177

```
private GoogleMap mMap;
SupportMapFragment mapFragment;
LinearLayout linearLayout;
String jobId="1"; 
```

档案档案；

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate (savedInstanceState);
    setContentView (R.layout.activity_maps);

    linearLayout=(LinearLayout)findViewById (R.id.linearlayout);
    // Obtain the SupportMapFragment and get notified when the map is ready to be used.
     mapFragment = (SupportMapFragment)getSupportFragmentManager ()
            .findFragmentById (R.id.map);
    mapFragment.getMapAsync (this);
    //Taking Snapshot of Google Map

}

/**
 * Manipulates the map once available.
 * This callback is triggered when the map is ready to be used.
 * This is where we can add markers or lines, add listeners or move the camera. In this case,
 * we just add a marker near Sydney, Australia.
 * If Google Play services is not installed on the device, the user will be prompted to install
 * it inside the SupportMapFragment. This method will only be triggered once the user has
 * installed Google Play services and returned to the app.
 */
@Override
public void onMapReady(GoogleMap googleMap) {
    mMap = googleMap;

    // Add a marker in Sydney and move the camera
    LatLng sydney = new LatLng (-26.888033, 75.802754);
    mMap.addMarker (new MarkerOptions ().position (sydney).title ("Kailash Tower"));
    mMap.moveCamera (CameraUpdateFactory.newLatLng (sydney));
    mMap.setOnMapLoadedCallback (new GoogleMap.OnMapLoadedCallback () {
        @Override
        public void onMapLoaded() {
            snapShot();
        }
    });
}

// Initializing Snapshot Method
public void snapShot(){
    GoogleMap.SnapshotReadyCallback callback=new GoogleMap.SnapshotReadyCallback () {
        Bitmap bitmap;
        @Override
        public void onSnapshotReady(Bitmap snapshot) {
            bitmap=snapshot;
            bitmap=getBitmapFromView(linearLayout);
            try{
               file=new File (getExternalCacheDir (),"map.png");
                FileOutputStream fout=new FileOutputStream (file);
                bitmap.compress (Bitmap.CompressFormat.PNG,90,fout);
                Toast.makeText (MapsActivity.this, "Capture", Toast.LENGTH_SHORT).show ();
                sendSceenShot (file);
            }catch (Exception e){
                e.printStackTrace ();
                Toast.makeText (MapsActivity.this, "Not Capture", Toast.LENGTH_SHORT).show ();
            }

        }
    };mMap.snapshot (callback);
}
private Bitmap getBitmapFromView(View view) {
    Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(),Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas (returnedBitmap);
    Drawable bgDrawable =view.getBackground();
    if (bgDrawable!=null) {
        //has background drawable, then draw it on the canvas
        bgDrawable.draw(canvas);
    }   else{
        //does not have background drawable, then draw white background on the canvas
        canvas.drawColor(Color.WHITE);
    }
    view.draw(canvas);
    return returnedBitmap;
}

//Implementing Api using Retrofit
private void sendSceenShot(File file) {
    RequestBody job=null;

    Gson gson = new GsonBuilder ()
            .setLenient ()
            .create ();

    Retrofit retrofit = new Retrofit.Builder ()
            .baseUrl (BaseUrl.url)
            .addConverterFactory (GsonConverterFactory.create (gson))
            .build ();

    final RequestBody requestBody = RequestBody.create (MediaType.parse ("image/*"),file);
    job=RequestBody.create (MediaType.parse ("text"),jobId);

    MultipartBody.Part  fileToUpload = MultipartBody.Part.createFormData ("name",file.getName (), requestBody);

    API service = retrofit.create (API.class);
    Call<ScreenCapture_Pojo> call=service.sendScreen (job,fileToUpload);
    call.enqueue (new Callback<ScreenCapture_Pojo> () {
        @Override
        public void onResponse(Call <ScreenCapture_Pojo> call, Response<ScreenCapture_Pojo> response) {
            if (response.body ().getMessage ().equalsIgnoreCase ("Success")){
                Toast.makeText (MapsActivity.this, "success", Toast.LENGTH_SHORT).show ();
            }
        }

        @Override
        public void onFailure(Call <ScreenCapture_Pojo> call, Throwable t) {

        }
    });

} 
```

}

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-22T18:09:59.313

我希望这将有助于捕获您的地图的屏幕截图

**方法调用：**

```
gmap.setOnMapLoadedCallback(mapLoadedCallback); 
```

**方法声明：**

```
final SnapshotReadyCallback snapReadyCallback = new SnapshotReadyCallback() {
        Bitmap bitmap;
        @Override
        public void onSnapshotReady(Bitmap snapshot) {
            bitmap = snapshot;

            try {

                //do something with your snapshot

                imageview.setImageBitmap(bitmap);

            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    };

GoogleMap.OnMapLoadedCallback mapLoadedCallback = new GoogleMap.OnMapLoadedCallback() {
        @Override
        public void onMapLoaded() {
            gmap.snapshot(snapReadyCallback);
        }
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-14T08:50:01.653

使用 mapcalback 获取地图截图

```
 GoogleMap.SnapshotReadyCallback callback = new GoogleMap.SnapshotReadyCallback() {
                    Bitmap bitmap=null;
                    @Override
                    public void onSnapshotReady(Bitmap snapshot) {
                        // TODO Auto-generated method stub
                        bitmap = snapshot;
                        try {
                            saveImage(bitmap);
                            Toast.makeText(getActivity().getApplicationContext(), "Successful.Screenshot Saved.", Toast.LENGTH_LONG).show();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }

                    private void saveImage(Bitmap bitmap) throws IOException {
                        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
                        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

                        Date date = new Date();
                        CharSequence format = android.text.format.DateFormat.format("yyyy-MM-dd_hh:mm:ss", date);
                        String dirpath = Environment.getExternalStorageDirectory() + "";
                        File file = new File(dirpath);
                        if (!file.exists()) {
                            boolean mkdir = file.mkdir();
                        }
                        String path1 = dirpath + "/Documents/SCREENSHOT/";
                        File imageurl1 = new File(path1);
                        imageurl1.mkdirs();
                        File f = new File(path1 +"/"+ format + ".png");
                        f.createNewFile();
                        FileOutputStream fo = new FileOutputStream(f);
                        fo.write(bytes.toByteArray());
                        fo.close();
                    }
                };
                mMap.snapshot(callback); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-02-06T09:01:22.490

Eclipse DDMS 即使是谷歌地图 V2 也可以捕获屏幕。

如果您有“root”权限，请尝试调用 /system/bin/screencap 或 /system/bin/screenshot。我从[Eclipse android DDMS 如何实现“屏幕捕获”中了解到](https://stackoverflow.com/questions/14684081/how-eclipse-android-ddms-implement-screen-capture)

# ruby - 如何在 RSpec 中测试后台进程？

> ID：13773659
> 
> 赞同：0
> 
> 时间：2012-12-08T01:51:27.653
> 
> 标签：ruby, rspec, sinatra, background-process, ruby-1.9

找到了在 Sinatra 中运行单独进程的简单方法：在 Sinatra 中[运行后台进程](https://stackoverflow.com/questions/9911566/run-background-process-in-sinatra)

```
get '/start_process'
  @@pid = Process.spawn('external_command_to_run')
end 
```

您将如何在 RSpec 中对此进行测试？

红宝石 1.9.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T10:20:30.513

提取一个执行后台处理的类并对其进行单元测试。然后测试您的操作调用此类上的方法的期望

一些“伪代码”：

```
before do
  MyWorker.should_receive(:perform)
end

specify { get :something } 
```

# java - 如何根据对象的属性对对象进行排序？

> ID：13773662
> 
> 赞同：2
> 
> 时间：2012-12-08T01:51:47.660
> 
> 标签：java, hashmap

除了排序方法之外，我得到了其他一切工作。我需要根据学生的第一个属性对 HashMap 中的学生进行排序。我需要在将所有学生添加到 HashMap 之后发生排序方法，而不是在添加时发生。

```
package HashMap;

        import java.io.InputStream;
        import java.util.HashMap;
        import java.util.HashSet;
        import java.util.Scanner;

        public class clubMapping {
            HashMap<String, HashSet<Student>> map = new HashMap<String, HashSet<Student>>();

            public clubMapping(String clubName) {
                InputStream is = getClass().getClassLoader().getResourceAsStream(
                        "student.txt");
                Scanner scan = new Scanner(is);
                while (scan.hasNext())
                    add(scan.next(), scan.next(), Integer.parseInt(scan.next()),
                            scan.next());
                scan.close();
                System.out.println(map);
                System.out.println();
                System.out.println(map.get(clubName));
            }

            public void add(String last, String first, Integer id, String club) {
                HashSet<Student> set = new HashSet<Student>();
                if (!map.containsKey(club)) {
                    set.add(new Student(last, first, id));
                    map.put(club, set);
                } else {
                    set = map.get(club);
                    set.add(new Student(last, first, id));
                }
            }

            public static void main(String[] args) {
                new clubMapping("Math");
            }
        }

    package HashMap;

    public class Student {
        String last, first;
        Integer id;

        public Student(String l, String f, Integer i) {
            last = l;
            first = f;
            id = i;
        }

        public String toString() {
            return last + " " + first + " " + id;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:02:37.703

对于学生集，您应该使用 a`TreeSet`而不是 a 。`HashSet`树集是隐式排序的，哈希集不是。

```
public void add(String last, String first, Integer id, String club) {
    TreeSet<Student> set = new TreeSet<Student>(studentComp);
    if (!map.containsKey(club)) {
        set.add(new Student(last, first, id));
        map.put(club, set);
    } else {
        set = map.get(club);
        set.add(new Student(last, first, id));
    }
} 
```

但是您必须定义一个比较器以用于排序，如下所示。

```
private static Comparator<Student> studentComp = new Comparator<Student>() {
    @Override
    public int compare(Student s1, Student s2) {
        return (s1.last.compareTo(s2.last));
    }
}; 
```

此外，您可能应该将您的学生属性封装在 getter/setter 方法中，而不是像我上面所做的那样直接访问它们（正如您的班级目前允许的那样）。

# java - main方法的Java异常规范

> ID：13773664
> 
> 赞同：2
> 
> 时间：2012-12-08T01:52:09.757
> 
> 标签：java, exception

我们不需要Java程序中的main方法的异常规范吗？例如，以下代码的工作原理完全相同，但没有为 main 方法指定“throws Xcept”。

```
class Xcept extends Exception {
     public Xcept(){
     }
     public Xcept(String msg){
         super(msg);
     }
}

public class MyException {
    public void f() throws Xcept {
        System.out.println("Exception from f()");
        throw new Xcept("Simple Exception");
    }
    public static void main(String[] args) throws Xcept {
        MyException sed = new MyException();
        try {
            sed.f();
        } catch(Xcept e) {
            e.printStackTrace();
        }
        finally {
            System.out.println("Reached here");
        }
    }
} 
```

我读到 java 强制执行此操作，但如果我为 main 方法排除此规范，则不会出现编译时错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T01:54:47.970

那是因为`Xcept`永远不会被抛出你的`main`方法，因为你实际上`catch`在那里......`sed.f()`调用可能会导致`Xcept`被抛出，但它会被捕获和处理。

# java - 在 mongodb 中保存对象列表

> ID：13773666
> 
> 赞同：0
> 
> 时间：2012-12-08T01:52:34.890
> 
> 标签：java, mongodb

我有汽车列表 { car​​1, car2, car3 }，每辆车至少有两个或更多字段。该列表被转换为 BasicDBList。[这里的例子](https://stackoverflow.com/questions/13759913/insert-a-complete-list-in-mongodb)

```
DBObject saveObject = new BasicDBObject().append("$push", dbBasicListOfCars);
collection.(car).save(saveObject); 
```

它无法将列表保存在自己的集合中，并抱怨该字段不能以“$”符号开头。

如何将整个列表推送到集合中？还是我必须将个别汽车保存在收藏中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T06:21:50.260

```
new BasicDBObject().append("$push", dbBasicListOfCars); 
```

在上面的语句中，您尝试在 DBObject 中插入一个键值对，键为**"$push"**，值为**dbBasicListOfCars**。MongoDB 不允许键有'$'，因此它失败了。

但是，您尝试保存的方式也是错误的。

您需要的是 com.mongodb.BasicDBList，它是一个允许创建数组 DBObjects 的实用程序类。BasicDBList 仅支持数字键。传递无法转换为整数的字符串将导致 IllegalArgumentException。

```
 BasicDBList list = new BasicDBList();
 list.put("1", "bar"); // ok
 list.put("1E1", "bar"); // throws exception 
```

参考：[http ://api.mongodb.org/java/current/com/mongodb/BasicDBList.html](http://api.mongodb.org/java/current/com/mongodb/BasicDBList.html)

注意：MongoDB 也会从 java.util.Lists 创建数组。

```
DBObject obj = new BasicDBList();
 obj.put( "0", value1 );
 obj.put( "4", value2 );
 obj.put( 2, value3 ); 
```

这通过创建 DBObject { "0" : value1, "1" : null, "2" : value3, "3" : null, "4" : value2 } 来模拟数组 [ value1, null, value3, null, value2 ] .

# cocos2d-iphone - 如何在 CocosBuilder 中使用 Texture Atlas 中的图像？

> ID：13773667
> 
> 赞同：0
> 
> 时间：2012-12-08T01:52:38.167
> 
> 标签：cocos2d-iphone, sprite-sheet

我正在尝试使用 Texture Atlas 构建 Cocos2d 关卡，其中包含构建图像。

我如何在 CocosBuilder 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:24:11.503

CocosBuilder 支持纹理图集，因此如果您的 CCB 项目文件与您的 textureatlas.plist 和 textureatlas.png 位于同一位置，它们将显示在 CocosBuilder 的资源列表中。然后，您可以像使用任何其他图像文件一样在 CCB 界面中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:41:06.127

我不确定我是否完全理解这个问题。但是，我发现这个快速教程对学习 CocosBuilder 非常有帮助：create [-a-game-with-ccb](http://code.zynga.com/2012/10/creating-a-game-with-cocosbuilder/)。

# r - 在ggplot2中累积图

> ID：13773668
> 
> 赞同：0
> 
> 时间：2012-12-08T01:52:51.997
> 
> 标签：r, ggplot2

是否可以在 x 轴上创建一个 0% 到 100% 的图表形式，在 y 上创建一个单位，并从 y=0 累积到 y=max，所以我可以说“我的元素的 X 出现在第一个 Y 单位内” . ggplot2 中是否有预定义的统计数据允许我这样做？

这是一些数据：[http ://sprunge.us/XYJK](http://sprunge.us/XYJK)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:00:11.413

您可以在使用 ggplot 处理之前或在以下情况下应用它：

例如：

```
library(ggplot2)
library(scales)
library(XML) 
x <- eval(parse(file("http://sprunge.us/XYJK"))) # Your data
d <- data.frame(x=x,y=1:length(x)) 
d$z <- cumsum(d$x) / sum(d$x) # As percent

ggplot(d, aes(z,y)) + geom_line() + scale_x_continuous(label=percent) 
```

或者

```
library(ggplot2)
library(scales)
d <- data.frame(x=x,y=1:100)
ggplot(d, aes(cumsum(x)/sum(x),y) + geom_line() + scale_x_continuous(label=percent) 
```

我假设这是销售数据或类似的东西。因此，在这种情况下，50% 的收入来自前 5000 笔交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T05:21:56.977

在我看来，您好像在寻找经验 CDF。您的数据在许多地方都复制了值，因此我根据排序值的频率表创建了经验 CDF。我将您的数据复制到向量 x 中，然后执行以下操作：

```
tf <- as.data.frame(table(x), stringsAsFactors = FALSE)
tf <- within(tf, {
          Var1 <- as.numeric(Var1)
          pct <- 100 * cumsum(Freq)/sum(Freq)
                 } )
ggplot(tf, aes(x = Var1, y = pct)) + 
    geom_step(size = 1) +
    labs(x = "Value", y = "Cumulative percentage") 
```

问题是您的数据严重偏斜，以至于直方图模拟了一条双曲线，因此绝大多数数据都远低于 1000，并且有几个严重的异常值。给你个思路，

```
quantile(x, c(0.005, 0.01, 0.05, 0.10, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99, 0.995))
   0.5%          1%          5%         10%         25%         50% 
 1.64425      2.79850     7.54500    11.77500    21.76000    39.35000 
    75%         90%         95%         99%       99.5% 
 73.28000   398.05000   1695.78750 10499.99000 11638.55600 
```

和

```
summary(tst$y)
Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
0.00    21.76    39.35   434.90    73.28 18520.00 
```

平均值大于分布的第 90 个百分位！在这种情况下，我认为 ecdf 图不会提供非常丰富的信息。要找出向量中值的比例小于或等于给定值，请尝试以下小函数：

```
cumprop <- function(x, val) mean(x <= val)
cumprop(x, 1000)
cumprop(x, mean(x))  # proportion of values <= mean(x) 
```

# java - 如果一个类实现了一个接口，并被分配给一个具有该接口类型的变量，那么该对象是什么类型？

> ID：13773672
> 
> 赞同：2
> 
> 时间：2012-12-08T01:54:08.347
> 
> 标签：java, interface

```
public class Motor implements Measurable {
  ...
}

public Measurable motorTemperature = new Motor(); 
```

对象的类型是什么`motorTemperature`？是电机，可测量，还是两者兼而有之？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T01:57:00.237

`Motor`即使将对象分配给静态类型为 interface 的变量，对象的运行时类型仍然存在`Measurable`。类型定义了行为，而接口定义了哪些方法可以在没有强制转换的情况下调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T01:56:37.507

它是一个 Motor 对象，因为您实例化了一个实现接口 Measurable 的新 Motor() 对象

您无法实例化类型 Measurable，因为无法实例化接口。接口告诉实现该接口的对象将能够执行 x 操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T01:57:44.433

它是一个类 Motor 和接口 Measurable。两者都是不同意义上的类型，因为
接口和类的分离是 Java 给人一种多重继承印象的方式，尽管接口的实现只指定了契约。

# iphone - 如何将多行文本绘制到 uiimageview iphone？

> ID：13773678
> 
> 赞同：1
> 
> 时间：2012-12-08T01:55:36.100
> 
> 标签：iphone, text, uiimageview, uitextview

我有文本的 UITextView，在用户按下 DONE 后，我将文本转换为 UIImageView 并显示它。它适用于一行文本非常好，

和[截图 1](http://www.freeimagehosting.net/mn6v6)

. 但是如果用户键入两行或更多：结果仍然是一行？？？[截图 2](http://www.freeimagehosting.net/8ufuq)

我想在 UIimageView 中显示两行或多行

有谁能够帮我！非常感谢！

这是我的代码：

```
-(UIImage *)convertTextToImage : (ObjectText *) objT; 
{ 
    UIGraphicsBeginImageContext(CGSizeMake(([objT.content sizeWithFont:objT.font].width+10), ([objT.content sizeWithFont:objT.font].height+10)));
    [[objT getcolor] set];
    [objT.content drawAtPoint:CGPointMake(5, 5) withFont:objT.font];
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();     
    UIGraphicsEndImageContext(); 
    return result; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:02:16.327

**抽象属性**

```
NSString* textContent = @"Hello, World!";
NSString* text2Content = @"Hello, World!"; 
NSString* text3Content = @"Hello, World!"; 
NSString* text4Content = @"Hello, World!"; 
```

**文字绘图 - 1**

```
CGRect textRect = CGRectMake(65, 43, 56, 55);
[[UIColor blackColor] setFill];
[textContent drawInRect: textRect withFont: [UIFont fontWithName: @"Helvetica" size: 12] lineBreakMode: UILineBreakModeWordWrap alignment: UITextAlignmentCenter]; 
```

**文字绘图 - 2**

```
CGRect text2Rect = CGRectMake(77, 79, 37, 31);
[[UIColor blackColor] setFill];
[text2Content drawInRect: text2Rect withFont: [UIFont fontWithName: @"Helvetica" size: 12] lineBreakMode: UILineBreakModeWordWrap alignment: UITextAlignmentCenter]; 
```

**文字绘图 - 3**

```
CGRect text3Rect = CGRectMake(118, 74, 49, 43);
[[UIColor blackColor] setFill];
[text3Content drawInRect: text3Rect withFont: [UIFont fontWithName: @"Helvetica" size: 12] lineBreakMode: UILineBreakModeWordWrap alignment: UITextAlignmentCenter]; 
```

**文字绘图 - 4**

```
CGRect text4Rect = CGRectMake(71, 17, 41, 28);
[[UIColor blackColor] setFill];
[text4Content drawInRect: text4Rect withFont: [UIFont fontWithName: @"Helvetica" size: 12] lineBreakMode: UILineBreakModeWordWrap alignment: UITextAlignmentCenter]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:36:17.530

您的问题是您依靠该`sizeWithFont`方法来完全控制标签的大小。在不限制宽度的情况下，标签将始终扩展到足够宽的框架以使文本在一行上显示。

试试这个（代码会将宽度限制为您指定的宽度）：

```
-(UIImage *)convertTextToImage : (ObjectText *) objT; 
{ 
    //THIS IS THE MAX WIDTH YOU WANT, and anything wider would wrap to two lines
    CGFloat desiredWidth = 100.0;
    CGSize sizeToConstrainTo = CGSizeMake(desiredWidth, 5000);
    CGSize newSize = [objT.content sizeWithFont:objT.font
                              constrainedToSize:sizeToConstrainTo
                                  lineBreakMode:UILineBreakModeWordWrap];
    UIGraphicsBeginImageContext(newSize);
    [[objT getcolor] set];
    [objT.content drawAtPoint:CGPointMake(5, 5) withFont:objT.font];
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();     
    UIGraphicsEndImageContext(); 
    return result; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T10:40:28.563

这是我的答案，我认为这是一个好方法。试试这个代码：

-(UIImage *)convertTextToImage : (ObjectText *) objT; { UIGraphicsBeginImageContext(CGSizeMake([objT.content sizeWithFont:objT.font constrainedToSize:CGSizeMake(900, 900)].width+10, [objT.content sizeWithFont:objT.font constrainedToSize:CGSizeMake(900, 900)].height+10 ));

```
[[objT getcolor] set];

[objT.content drawInRect:CGRectMake(5, 5, [objT.content sizeWithFont:objT.font constrainedToSize:CGSizeMake(900, 900)].width, [objT.content sizeWithFont:objT.font constrainedToSize:CGSizeMake(900, 900)].height) withFont:objT.font];

UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return  result; 
```

}

# android - Android - AsyncTask、SQLite 和上下文

> ID：13773679
> 
> 赞同：2
> 
> 时间：2012-12-08T01:55:44.977
> 
> 标签：android, sqlite

我正在使用 AsyncTask 在单独的线程中下载和解析数据，我需要将 loadXml 返回的值传递到数据库中。

问题是我无法实例化数据库，因为它需要一个上下文，而我的 DownloadXmlTask​​ 与实例化它的活动类位于一个单独的类中。

如果我无法实例化数据库类，如何使用将值传递到数据库中？

代码示例：

```
public class DownloadXmlTask extends AsyncTask<String,Void,Void>{

public static final String TAG = "VotingApp";

@Override
protected Void doInBackground(String... urls) {
    try {
        // Get the parsed list of Candidate objects
        ArrayList<Candidate> candidatesList = loadXml(urls[0]);
        CandidatesDatabaseHelper db = new CandidatesDatabaseHelper(getApplicationContext()); <---- ERROR (I know I can't use getApplicationContext() here)

        // Insert the candidates into the database
        for(Candidate c : candidatesList){
                      //NOT FINISHED
        }

    } catch (IOException e) {
        Log.d(TAG, "Error " + e);
    } catch (XmlPullParserException e) {
        Log.d(TAG, "Error " + e);
    }
    Log.d(TAG, "NOT WORKING");
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T02:07:02.597

您可以通过使 AsyncTask 成为内部类来解决该问题，但是如果您只是按照当前的方式进行操作，那么从技术上讲，您可以这样做`AsyncTask<Object,Void,Void>`：

```
@Override
protected Void doInBackground(Object... urls) {
    Context context = (Context)urls[0]; //should always be true by your own rules
    /*then you can also loop the urls for the rest of the Strings to cast
    **if there are going to be more. Or not. Your choice*/
//..... 
```

instead of `String`. When calling `.execute(this, someString)`, send it the Context first and the String second. Then you just cast each of them into their appropriate variables. Try that and let me know if it works. Can't test it out right now unfortunately so you're going to have to test it.

# iphone - 子视图显示错误

> ID：13773682
> 
> 赞同：1
> 
> 时间：2012-12-08T01:56:50.863
> 
> 标签：iphone, ios, uiview, subview

我已经创建了一个项目并实现了[文件夹项目](https://github.com/jwilling/JWFolders)，现在我已经设置了一个子视图，该子视图显示在图片上的文件夹上方。在弹出窗口中有一个图像，我想这样做，如果我点击图像，将显示一个带有整个图像的新控制器。我已经正确设置了所有...但是，我尝试更改子视图等。此 Navigationcontroller 从未出现在所有“层”的顶部。它出现在文件夹视图控制器中。顺便说一句，Navcontroller 是由这个项目设置的：[https](https://github.com/mwaterfall/MWPhotoBrowser) ://github.com/mwaterfall/MWPhotoBrowser和 Popup 是通过这个设置的：[https ://github.com/kgn/KGModal](https://github.com/kgn/KGModal)

所以这是我的代码：

```
-(IBAction)mehr:(id)sender {

    UIView *contentView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 280, 440)];
cubut = [UIButton buttonWithType:UIButtonTypeCustom];
                                                     [cubut addTarget:self
                                                               action:@selector(dothis:)
                                                     forControlEvents:UIControlEventTouchUpInside];
                                                     [cubut setTitle:@"Show View" forState:UIControlStateNormal];
                                                     cubut.frame = CGRectMake(5, 70, 270, 200);

                                                     [contentView addSubview:cubut];
- (IBAction)dothis:(id)sender {

    MWPhotoBrowser *browser = [[MWPhotoBrowser alloc] initWithDelegate:self];

    // Set browser options.
    browser.wantsFullScreenLayout = YES;
    browser.displayActionButton = YES;

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:browser];

    [self presentModalViewController:navController animated:YES];

    NSMutableArray *photos = [[NSMutableArray alloc] init];
    MWPhoto *photo;
    photo = [MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"star" ofType:@"png"]];
    photo.caption = @"The star is soo beateful...";
    [photos addObject:photo];

    self.photos = photos;

}
- (MWPhoto *)photoBrowser:(MWPhotoBrowser *)photoBrowser photoAtIndex:(NSUInteger)index {
    if (index < _photos.count)
        return [_photos objectAtIndex:index];
    return nil;
}
- (NSUInteger)numberOfPhotosInPhotoBrowser:(MWPhotoBrowser *)photoBrowser {
    return _photos.count;
} 
```

还有图片：（按钮设置为自定义，所以你看不到它......它与图像具有相同的框架）

![在此处输入图像描述](../Images/577784b828b63cb74870e436429f2bb9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T14:03:26.950

所以这还没有完成，所以我不得不提出自己的问题，我没有找到解决方案。

# java - 为什么不应该用 C/C++ 编写 Android 应用程序，因为您“只是更喜欢用 C/C++ 编程”？

> ID：13773686
> 
> 赞同：92
> 
> 时间：2012-12-08T01:57:53.873
> 
> 标签：java, android, c++

**更新**（为了清晰和减少歧义）：

我将开始修补安卓应用程序。[我计划使用 NDK 编写 C++（因为我在 C++ 方面有更多经验并且更喜欢 Java），但在Android NDK 页面](http://developer.android.com/tools/sdk/ndk/index.html#Installing)上遇到了以下内容：

> 你应该只在对你的应用程序必不可少的情况下使用 NDK——<strong>永远不要因为你只是更喜欢用 C/C++ 编程。

我的印象是你应该使用你喜欢的语言，只要它适合这份工作。有人可以解释为什么强烈建议不要使用 C/C++ 进行 android 开发吗？

* * *

**原来的：**

我将开始修改移动应用程序，特别是 android，它是我当前手机的操作系统，我想知道用 C++（或至少是核心，然后用 Java 包装）编写应用程序是否是一个可接受的选择。

一些背景，我是一名计算机科学专业的学生，​​已经参加了 3 门 C++ 课程（入门、中级、OOP，并且正在参加春季的 STL 课程）和只有 1 门 Java 课程（中级）。正因为如此，我更喜欢 C++ 并且更喜欢它而不是 Java。[我在Android NDK 页面](http://developer.android.com/tools/sdk/ndk/index.html#Installing)上遇到了以下内容：

> 在 Android 上使用本机代码通常不会带来明显的性能提升，但它总是会增加应用程序的复杂性。通常，您应该只在对您的应用程序必不可少的情况下使用 NDK——<strong>永远不要，因为您只是更喜欢使用 C/C++ 编程。

*   我的印象是你应该使用适合工作的语言以及你熟悉的语言
*   我可能想将应用程序移植到另一个支持 C++ 但不支持 java 的移动平台，例如 iOS
*   虽然 Java 是一种高级语言，因此应该可以加快开发速度，但我觉得开发速度会慢一些，因为我几乎必须重新学习所有内容（因为我只上过一门该语言的课程）

任何建议将不胜感激。

ps：关于这个主题的许多答案都是几年前的，很少有后续答案提到 NDK 允许在 android 2.3 及更高版本上开发完整的原生应用程序。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-12-08T02:51:01.657

这样想吧。您可以使用 Java SDK 构建一个完整的工作应用程序，该应用程序利用 100% 的开发人员可用的 API。NDK 没有什么是 SDK 不能做的（从 API 的角度来看），NDK 只是提供了更高的性能。

现在反过来看。如果您选择 100% 在 NDK 中编写应用程序，您仍然可以编写功能齐全的应用程序，但您可以访问的框架 API 的数量受到限制。并非所有 Android 框架都可以在原生层访问；大多数 API 仅是 Java。这并不是说**您**可能需要的所有 API 在 NDK 中都不可用，但几乎**所有**API 都没有公开。

除此之外，NDK 引入了特定于平台的代码，可扩展您的发行版的大小。对于您打算支持的每种设备架构，您的本机代码必须内置到 .so 文件中（一个用于 armv5、armv7 和 x86），所有这些文件都打包到同一个 APK 中。这种可执行代码的重复会使您的应用程序的大小增加 3 倍（即“胖二进制文件”），除非您在分发应用程序时承担为每个架构构建单独 APK 的任务。因此，如果您不希望 APK 的大小显着增长，那么部署过程就会变得更加繁琐。

同样，虽然这些都不会阻止您做您选择的事情，但它指出了为什么 Google 将 Java 描述为大多数代码的“首选”方法和阻力最小的路径。我希望它能阐明为什么文档的措辞是这样的。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-08T02:03:28.487

如果您一生中只打算开发一个应用程序，请使用 NDK。

如果您的目标是学习 Android 开发，并打算在您的一生中开发多个应用程序 - 并希望能够正确支持所有应用程序 - 从长远来看，如果您学习 Java 和改用 Android 的 Java SDK。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-10T14:17:38.013

King 的程序员将 C++ 用于他们的游戏逻辑。从他们的营业额来看，他们似乎做得很好。

根据我的经验，C++ 适合问题解决者，Java 适合问题回避者。我喜欢这两种语言，但是当你写出好的代码时，C++ 是相当有益的。但是，到达那里可能只需要几分钟的魔法。

你也可以为数据科学家推荐 C++，他们通常会通过 Python 或 R 来完成他们的工作。C++ 可以做同样的事情，性能也好或不好，但它只需要成为该语言的天才。这就是为什么我永远不会*不*向想要这样做的人推荐 C++ 的原因——我只是对他们想要的款待有所了解。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-08T02:12:09.687

最重要的考虑是编译后的 Java 代码将在所有 android 设备上运行，而本机代码需要为所有目标平台编译。

Java 和 Android 的一般意图是，如果不是所有应用程序，您都用 Java 编写大部分应用程序，并且只有在没有其他选择时才使用本机内容......所以关于编写应用程序的所有内容都适合用 Java 编写。

通过用 Java 编写，您可以避免在本地和 Java 世界之间架起一座桥梁。

同样，如果您冒险学习 Java，您也会帮自己一个大忙。不仅您的 Android 应用程序会变得更好，而且您将使自己接触到一种截然不同的 OO 方法，并且您将成为更好的程序员。

除此之外，您将通过用 Java 编写来回避一大堆安全风险。

在我看来，这很简单——使用 Java。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-17T03:02:52.387

我发现这篇有趣的文章来自： [http ://betanews.com/2014/07/22/why-c-is-the-perfect-choice-for-modern-app-development/](http://betanews.com/2014/07/22/why-c-is-the-perfect-choice-for-modern-app-development/)

C++ 是专门为独立于平台而构建的，因此在现有的每一个操作系统上都可以找到。您的典型移动用户可能知道 Android 应用程序是用 Objective-C 编写的 Java 和 iOS 应用程序，但许多人不知道的是，您的设备内存中的 C/C++ 代码比其他任何东西都多。C/C++ 驱动了小型设备（如与硬件交互的内核以及典型的运行时库）和支持这些设备的电信网络的大部分技术。对于开发团队而言，更重要的是，有 C/C++ 接口和库可用于您需要在任何设备和平台上执行的任何操作。Android NDK 工具集是完整的 C/C++ 支持的一个很好的例子，它最初是为游戏开发团队添加的，使他们能够通过避免 Java 和 Android Java 运行时 Dalvik 来获得设备的最佳性能。 Android Java 代码在其上执行。它已定期进行改进以启用所有 Android 服务。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-26T10:48:18.667

我会说将 java 用于主应用程序。但是，如果您有一些需要移植的 C++ 代码或一些需要在 C++ 中有效实现的库，那么对这些位使用 ndk

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-06-19T03:41:50.130

我看不出有任何理由不使用 C++ 进行正常的 android 开发，如果您在使用 C++ 和复杂的操作系统（如 windows 或任何其他操作系统）方面有丰富的经验，那么您可以快速掌握 android 并且没有那么复杂其他操作系统都是。在学习java或不学习的情况下工作会更加令人沮丧和复杂！

# python - 将列表转换为 numpy 数组

> ID：13773687
> 
> 赞同：3
> 
> 时间：2012-12-08T01:57:54.047
> 
> 标签：python, arrays, numpy

此代码设置为读取两列数据，然后将第一列打印到第一个 numpy 数组中，然后将第二列打印到第二个 numpy 数组中。

```
def read2coldata(filename):

    import numpy
    b = []
    f = open(filename,"r")
    lines = f.readlines()
    f.close()
    for line in lines:
        a = line.split()
        for i in a:
            b.append(i)
    return (numpy.array(b[::2]),numpy.array(b[1::2])) 
```

然而，这给出了：

```
(array(['1.5', '8', '16', '17'], dtype='|S3'), array(['4', '5', '6', '6.2'], dtype='|S3')) 
```

我如何摆脱`dtype="|S3"`零件以离开：

```
(array(["1.5","8","16","17"], array(["4","5","6","6.2"]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T02:25:41.617

`dtype="S3"`你不想“走开” 。当您打印一个 numpy 数组时，它会为您提供其中数据的类型。它不是数据的一部分，它是关于程序如何存储和理解数据的信息。

在您的特定示例中，您读取了数字，因此您可能希望以后在计算或其他任何事情中使用它们，在这种情况下，您希望将数据理解为数字（在您的情况下为浮点数）。

目前它们被存储为字符串，这就是为什么你看到`dtype="S3"`它本质上意味着大小为 3 或更小的字符串类型。(IIRC)

我向您建议您的函数的替代方法：`numpy.genfromtxt`是将 txt 文件中的数据加载到 numpy 数组中的函数。

该文档非常好，如果您花 20 分钟了解参数，您会发现它非常有用。

```
array1 = numpy.genfromtxt('path_to_my_file.txt', usecols=0)
array2 = numpy.genfromtxt('path_to_my_file.txt', usecols=1) 
```

这应该让你开始。

# javascript - Google Maps API v3 隐藏和显示绑定到标记的圆圈

> ID：13773688
> 
> 赞同：3
> 
> 时间：2012-12-08T01:57:53.497
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我已经使用 google map api v3 成功地将一个圆圈绑定到我的标记。我知道这一点，因为如果我使标记可拖动，圆圈也会移动。

如果单击标记，我如何参考圆圈。如果不可见，我需要显示圆圈，反之亦然。

这是创建标记和圆圈的代码

```
var markerOptions = {
title: title,
icon: markerImage,
shadow: markerShadow,
position: latlng,
map: map
}
var marker = new google.maps.Marker(markerOptions);   
// Add a Circle overlay to the map.
var circle = new google.maps.Circle({
map: map,
radius: 50*1609.34,// 50 MI
visible: false
});
//circle.bindTo('map', marker);
circle.bindTo('center', marker, 'position'); 
```

我在 stackoverflow 上找到了一个答案，这让我认为我需要进行 rem'd 地图绑定以及中心绑定，但这不起作用。

这是我的标记点击事件。

```
google.maps.event.addListener(marker, "click", function() {
var infowindowOptions = {
content: html
 }
var infowindow = new google.maps.InfoWindow(infowindowOptions);
cm_setInfowindow(infowindow);
infowindow.open(map, marker);
marker.setIcon(markerImageOut);
marker.circle({visible: true}); 
```

有任何想法吗。我需要与刚刚单击或鼠标悬停的标记的绑定圆圈进行交互。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T02:02:01.427

一种选择是使圆成为标记的属性（如 ._myCircle），在单击处理程序中将其作为 marker._myCircle 引用。

添加圆圈作为标记的 _myCircle 属性：

```
var circle = new google.maps.Circle({
  map: map,
  radius: 50*1609.34,// 50 MI
  visible: false
});
circle.bindTo('center', marker, 'position');
marker._myCircle = circle; 
```

要切换它使用类似的东西（未测试）：

```
if(marker._myCircle.getMap() != null) marker._myCircle.setMap(null);
else marker._myCircle.setMap(map); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T10:49:06.513

```
var rad =".$this->conf['radius'] * 1000 ."; //convert km to meter
var populationOptions = {
   strokeColor: '#FF0000',
   strokeOpacity: 0.8,
   strokeWeight: 1,
   fillColor: '#FF0000',
   fillOpacity: 0.35,
   map: map,//map object
   center: new google.maps.LatLng($corr_match[0], $corr_match[1]),//center of circle
   radius: rad
};
var cityCircle = new google.maps.Circle(populationOptions); 
```

# php - 在进入数据库时 使用反斜杠撇号

> ID：13773690
> 
> 赞同：-2
> 
> 时间：2012-12-08T01:58:55.243
> 
> 标签：php, mysql

解决了问题的前一部分，仍然需要了解为什么这不起作用:)

回到分别转义字符串，我有这个。

```
 mysql_query("INSERT INTO users (firstname,surname,email,password,birthday,birthmonth,birthyear,houseno,streetname,town,country,postcode,phonenumber,singer,songwriter,producer,composer,band,instrument,instrument2,extra,confirmcode) VALUES ('".$firstname."','".$surname."','".$email."','".$password."',".$birthday.",".$birthmonth.",".$birthyear.",'".$houseno."','".$streetname."','".$town."','".$country."','".$postcode."',".$phonenumber.",".$singer.",".$songwriter.",".$producer.",".$composer.", ".$band.",'".$instrument."','".$instrument2."','".$extra."','".$rand."')",
    mysql_real_escape_string($surname),
    mysql_real_escape_string($firstname),
    mysql_real_escape_string($stown),
    mysql_real_escape_string($houseno),
    mysql_real_escape_string($streetname),
    mysql_real_escape_string($extra),
    mysql_real_escape_string($email)) or die ('pood'); 
    echo $streetname; 
```

我收到了 die 错误 - 所以它不回显 $streetname; （应该是'Clark\'s Way'），并且似乎没有反斜杠撇号，因为它没有被输入数据库。

抱歉，如果我没有按照您的标准进行研究，但我一直在试图理解为什么这几个小时都不起作用。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:09:33.753

`mysql_query()`不接受这样的多个论点。您需要转义查询字符串中的*每个变量。*像这样：

```
... VALUES ('".mysql_real_escape_string($firstname)."','".mysql_r... 
```

所以，你最终会得到这样的东西：

```
$query = "INSERT INTO users (firstname,surname,email,password,birthday,
birthmonth,birthyear,houseno,streetname,town,country,postcode,
phonenumber,singer,songwriter,producer,composer,band,instrument,
instrument2,extra,confirmcode) VALUES (
'". mysql_real_escape_string($firstname) ."',
'". mysql_real_escape_string($surname) ."',
'". mysql_real_escape_string($email) ."',
'". mysql_real_escape_string($password) ."',
'". mysql_real_escape_string($birthday) ."',
'". mysql_real_escape_string($birthmonth) ."',
'". mysql_real_escape_string($birthyear) ."',
'". mysql_real_escape_string($houseno) ."',
'". mysql_real_escape_string($streetname) ."',
'". mysql_real_escape_string($town) ."',
'". mysql_real_escape_string($country) ."',
'". mysql_real_escape_string($postcode) ."',
'". mysql_real_escape_string($phonenumber) ."',
'". mysql_real_escape_string($singer) ."',
'". mysql_real_escape_string($songwriter) ."',
'". mysql_real_escape_string($producer) ."',
'". mysql_real_escape_string($composer) ."',
'". mysql_real_escape_string($band) ."',
'". mysql_real_escape_string($instrument) ."',
'". mysql_real_escape_string($instrument2) ."',
'". mysql_real_escape_string($extra) ."',
'". mysql_real_escape_string($rand) ."')";

mysql_query($query) or die (mysql_error()); 
```

对不起，如果那里有错字。但我想你明白了。

* * *

这是参数化查询如何工作的（未经测试的）示例，改编自[手册中](http://us3.php.net/manual/en/pdostatement.bindparam.php)的示例：

```
$query = "INSERT INTO users (firstname,surname,email,password,birthday,
birthmonth,birthyear,houseno,streetname,town,country,postcode,
phonenumber,singer,songwriter,producer,composer,band,instrument,
instrument2,extra,confirmcode) VALUES (
:firstname, :surname, :email, :password, :birthday, :birthmonth,
:birthyear, :houseno, :streetname, :town, :country, :postcode, :phonenumber,
:singer, :songwriter, :producer, :composer, :band, :instrument, :instrument2,
:extra, :rand)";

// assume $dbh is your PDO database connection
$sth = $dbh->prepare($query);
$sth->bindParam(':firstname', $firstname);
$sth->bindParam(':surname', $surname);
$sth->bindParam(':email', $email);
$sth->bindParam(':password', $password);
$sth->bindParam(':birthday', $birthday);
// and so on...

$sth->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:22:31.177

该错误是由于反斜杠引号引起的。删除反斜杠，它看起来应该可以工作。

之前： `VALUES (\'Joshua\',\'Oakley\',`
之后： `VALUES ('Joshua','Oakley',`

# ios - NSMutabledata字节容量

> ID：13773693
> 
> 赞同：0
> 
> 时间：2012-12-08T02:00:10.573
> 
> 标签：ios, nsmutabledata

> **可能重复：**
> [NSMutableData 消失](https://stackoverflow.com/questions/13770770/nsmutabledata-dissapearing)

当我在我的程序中有一个 NSMutableData 变量时，它总是在它有 90810 字节时转储它的内容。数据中的字节数是否会导致数据丢失？这是代码。

```
- (void)fetchEntries
{
        // Construct a URL that will ask the service for what you want 
    NSURL *url = [NSURL URLWithString: @"http://www.nhara.org/scored_races-2013.htm"];//

    // Put that URL into an NSURLRequest
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    // Create a connection that will exchange this request for data from the URL 
    connection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];
}

- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data 
{
    // Add the incoming chunk of data to the container we are keeping 
    // The data always comes in the correct order 
     [xmlData appendData:data];

    NSString *xmlCheck = [[[NSString alloc] initWithData:xmlData encoding:NSUTF8StringEncoding]autorelease];
    NSLog(@"xmlCheck = %@", xmlCheck);

}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"error= %@",error);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn {

    // We are just checking to make sure we are getting the XML 
    NSString *xmlCheck = [[[NSString alloc] initWithData:xmlData encoding:NSUTF8StringEncoding] autorelease];
    NSLog(@"xmlCheck2 = %@", xmlCheck);
} 
```

这是它被切断的地方，但它改变了

```
<td style="font-size: 12.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; font-family: Arial Narrow; font-style: normal; text-align: general; vertical-align: bottom; white-space: nowrap; border-left: medium none; border-right: 1.0pt solid windowtext; border-top: medium none; border-bottom: 1.0pt solid windowtext; padding-left: 1px; padding-right: 1px; padding-top: 1px; background: #EAF1DD">
    King Pine</td>
    <td style="font-size: 12.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; font-family: Arial Narrow; text-align: right; font-style: normal; vertical-align: bottom; white-space: nowrap; border-left: medium none; border-right: 1.0pt solid windowtext; border-top: medium none; bor
2012-12-07 19:35:48.652 race tracker[2357:c07] xmlCheck = (null)
2012-12-07 19:43:28.914 race tracker[2357:c07] xmlCheck2 = (null)
2012-12-07 19:43:28.921 race tracker[2357:c07] (
) 
```

我试图理解为什么我的 NSMutableData 不起作用，因此对 NSMutableData 的解释会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:23:22.097

`NSMutableData`将增长到任意大小。

运行`curl http://www.nhara.org/scored_races-2013.htm > file.txt`后，我可以告诉你服务器返回的文件长度正好是 90810 字节。所以这就是为什么你得到那个字节数的原因。填充的不是可变数据对象，而是 90810 正是正确的长度。

你的问题在这里：

```
[[NSString alloc] initWithData:xmlData encoding:NSUTF8StringEncoding] 
```

您的服务器返回的字符串不是有效的 UTF-8。要自己验证这一点，请尝试`NSASCIIStringEncoding`（这是一种所有字节都有效的编码）。你会看到你正确地累积了一个字符串。

搜索返回的文件后，具体问题是位置 74,963 的字节——用于印刷单引号的 0x92。看起来像你想要`NSWindowsCP1252StringEncoding`的。上传该 HTML 的人似乎使用了 Microsoft 的代码页 1252。

# node.js - Node.js 操作需要同步的实例

> ID：13773695
> 
> 赞同：-1
> 
> 时间：2012-12-08T02:00:15.767
> 
> 标签：node.js

JavaScript 是单线程的（除了 web worker 和产生多个进程），最好不要等待长时间运行的操作，因为它会阻塞线程。但是，在查看 Github 中的几个模块时，*它们实际上使用了这些同步操作*，大部分时间用于文件操作。

我在盯着糟糕的代码/实践吗？或者我不知道 JavaScript 中是否真的需要同步操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T02:30:02.950

你可以发布一个例子吗？你最有可能在看：

*   一个实际上是异步的调用，例如`fs.read`. 请注意，节点核心 API 中的所有同步调用都以单词“Sync”结尾，如`fs.readSync`.
*   同步代码，例如`require('somemodule')`在应用程序开始接受网络请求之前运行的代码

是的，如果您看到代码`fs.readSync`在响应 HTTP 请求时执行类似操作，那是错误的代码/做法，并且该应用程序将在同步操作发生时锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:27:40.803

Node.js 不是单线程的，它使用线程池，但它们作为单线程暴露给 javascript 层，否则无法编写异步代码。任何 I/O 调用都会阻塞当前线程。

> 线程在内部用于伪造所有系统调用的异步性质。libuv 还使用线程来允许应用程序异步执行实际上是阻塞的任务，方法是生成一个线程并在完成时收集结果。

[http://nikhilm.github.com/uvbook/threads.html](http://nikhilm.github.com/uvbook/threads.html)

Node.js 已决定包含同步函数以保持与其他常用语言的相似性，但不应该使用它们，永远不要，永远不要，永远不要！

Node.js 本质上是异步的，它是纯 javascript。Javascript 是闭包、回调的同义词。如果你想用 Node.js 编写同步代码，也许你应该尝试另一种脚本语言，比如 python。

有一个名为 async 的优秀模块可以减轻嵌套回调的痛苦。那么，为什么要使用同步代码呢？愚蠢的。如果我使用同步代码，我将失去 Node 为我提供的所有好处。唯一的例外是 CLI 应用程序，但同样，我更喜欢异步编写所有代码。这并不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T02:18:24.893

在某种程度上，必须发生同步操作。Node.js 将它们放在线程中，这样整个服务器就不会被阻塞。

# php - 在 Ajax -> PHP -> MySQL 之后 HTML 特殊字符编码不起作用

> ID：13773697
> 
> 赞同：0
> 
> 时间：2012-12-08T02:01:14.840
> 
> 标签：php, mysql, encoding

我有一个设置，它使用 PHP 从 MySQL 加载数据并以 HTML 格式显示。到目前为止它有效。所有字符都以应有的方式显示。但是当我单击一个按钮以使用 $.ajax 来刷新站点的某个部分时，它调用 PHP 来刷新 MySQL 数据，一些字符显示为？标记，这些字符是 MySQL 数据。

家

```
<!doctype html>
<html>
    <head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript">
        $(function() {
            $("div#click input").live("click", function() {
                $("div#main").load("main.php");
            });
        });
    </script>
    </head>

    <body>
        <div id="main">
        é¨ûåa
        </div>

        <div id="click">
        <input type="button" value="click" onclick="return false;" />
        </div>
    </body>
</html> 
```

主文件

```
<?php
$a = mysql_connect('localhost', 'root', '');
mysql_select_db('link', $a);

?>
<div id="main">
ééîüåaa

</div>

<?php
$r = mysql_query("SELECT * from promo;");

while ($row = mysql_fetch_object($r)) {
        $name       = $row->name;
        echo $name;
}
mysql_close($a);
?> 
```

MySQL 表：

```
CREATE TABLE `promo` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL DEFAULT '',
  `link` tinytext NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:03:59.670

在进行 mysql_query 之前尝试使用此调用

```
mysql_set_charset("utf8") 
```

# javascript - jQuery - slideUp 开始快而结束慢？

> ID：13773701
> 
> 赞同：0
> 
> 时间：2012-12-08T02:02:07.267
> 
> 标签：javascript, jquery, html, css, jquery-animate

`slideUp`我有一个使用jQuery 中的功能的下拉菜单。我想知道是否可以取消恒定速度并快速开始并缓慢结束。我环顾四周，阅读了 中的`easing`方法`animate`，并尝试了它，但似乎它不适用于`slideUp`，仅`animate`（如果我错了，请告诉我）；但除此之外，我似乎无法弄清楚。有任何想法吗？这是我当前的代码：

```
$(document).ready(function(){
    var h = "fast";

    $("[data-action='dropdown']").click(function(e) {
        e.stopPropagation();
    });

    $("body").click(function() {
        $("[data-action='dropdown'] ul ul").slideUp(h);
    });

    $("[data-action='dropdown'] ul li").click(function() {
        $("[data-action='dropdown'] ul ul").slideUp(h);

        $("ul", this).slideDown(h, function(){
            $("ul", this).slideUp(h);
        });
    });
}); 
```

HTML 是一个非常基本的下拉结构（只是一个`ul`带有 s 的元素，`li`然后是 inner `ul`s 嵌套在里面。然后在 css 中，我将它隐藏到内部`ul ul`隐藏的地方，显示为 none，然后，当然，由 jQuery 切换） .

任何帮助将不胜感激！`:-)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T05:45:59.827

我们可以使用[jQuery easing 插件](https://gsgd.co.uk/sandbox/jquery/easing/)来做到这一点。

包括 jQuery 缓动 Javascript 文件：

```
https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js 
```

然后我们可以使用缓动变量作为函数中的参数`slideUp`。

**Javascript**

```
jQuery('#Example').slideUp({
    duration: 1000,
    easing: 'easeOutCubic'
}); 
```

**[演示](https://jsfiddle.net/s1ut0ong/)**

# javascript - 在进行 ajax 调用后尝试验证结果

> ID：13773703
> 
> 赞同：0
> 
> 时间：2012-12-08T02:02:24.170
> 
> 标签：javascript, jquery, ajax

好的，所以我有表单验证函数。该函数通过表单验证函数运行，如果字段无效，则返回 false。

问题是当它到达使用 ajax 来检查字段是否有效的函数时。

出于某种原因，它似乎不会“等待”ajax 返回并自动返回 false。

有没有解决的办法？

这是代码：

```
function form_validation(){

    if (!NewValidationForm('pcode', 'Please fill in all the fields'))
        return false;
    if (!NewValidationForm('fname', 'Please fill in all the fields'))
        return false;

    if(!validate_coupon()){
        alert("bad!!");
        return false;
    }

    return true;
}

function validate_coupon(){
    var url = $j("#site_url").val() + 'ajax_functions.php';
    var coupon = $j("#pcode").val();
    var result_status = false; // seem its jumps from here to:

    $j.ajax({
    type: "POST",
    url: url,
    data: { ajax: 'ajax', coupon: coupon}
    }).success(function(insertID){
        var obj = $j.parseJSON(insertID);
        if(obj.status == 1){
            result_status = true;
        }
    });
    // straight over here
    if(result_status == true){
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T02:28:51.170

通常在这种情况下，我会做这样的事情`$(document).ready()`：

```
$('form').submit(function (evt) {
    if (!$(this).attr('data-submitted')) {
        evt.preventDefault();
        $(this).attr('data-submitted', 'true');
        // call your form validation code here that fires the ajax request
        return false;
    }
    return true;
}); 
```

然后，在您的`$.ajax`回调中，当您的验证完成时，调用`$('form').submit()`. 这有效地使用了表单上的属性作为验证请求是否处于状态的标志。当用户第一次提交表单时，标志被设置并且验证过程开始。当验证完成时，表单的提交事件被触发，并且由于设置了标志，这一次表单被正常提交。

如果这种方法适合您，您可能需要添加一点润色。例如，您可能希望在调用之前禁用提交按钮，`$.ajax`并在验证失败时再次启用它。如果验证失败，您可能还想从表单中删除该`data-submitted`属性，因为用户可能会再次提交表单，而您可能希望在这种情况下执行另一次验证。

# html - 检测 Windows 版本的条件注释？

> ID：13773707
> 
> 赞同：0
> 
> 时间：2012-12-08T02:02:42.480
> 
> 标签：html, conditional-comments

我最近发现您可以使用它来检测 Windows 版本：

```
<!--[if WindowsEdition]>Blah<![endif]--> 
```

但是`WindowsEdition`使用什么值呢？

基本上，我正在尝试使用条件注释来检测 Internet Explorer 的用户是否使用支持升级到 IE9 或更高版本的 Windows 版本。我希望能够检测到“Windows XP 及以下”​​和“Windows Vista 及更高”之间的区别。

这样做的目的是引导 IE7 及更低版本的用户更新到 IE9/10，或者如果他们的操作系统不支持 IE9，则切换到 Chrome/Firefox。这样做的原因是该站点在 IE8 中运行，但缺少许多 CSS 功能，因此用几句话来说就是“丑陋但可用”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:45:52.143

只有 Windows Vista 或更高版本才会向 WindowEdition 条件注释返回一个值。

来自[Conditional Comment Wikipedia 页面](http://en.wikipedia.org/wiki/Conditional_comment)

> 与用于查看网页的 Windows**版本**相对应的整数。如果值与正在使用的版本匹配，则返回布尔值 true。有关支持的值及其描述的版本的信息，请参阅 GetProductInfo 函数的 pdwReturnedProductType 参数。

重点是我的。他们的版本是指 Home、Home Starter、Professional、Ultimate 等。

[GetProductInfo 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724358%28v=vs.85%29.aspx)的 MSDN 页面支持这一点。该页面还列出了 GetProductInfo 的输入参数，其中包括

> dwOSMajorVersion [输入]
> 
> 操作系统的主要版本号。最小值为 6。

版本 6 对应于 Vista，所以我怀疑 Windows XP 和 XP 之前的 Windows 版本没有这个 GetProductInfo 函数，不能调用它，也不会返回任何东西来与 IE 中的条件注释进行比较。

# php - 返回一个在 MySQL 表中找不到的值？

> ID：13773708
> 
> 赞同：0
> 
> 时间：2012-12-08T02:02:51.357
> 
> 标签：php, mysql

假设以下数组：

```
$users = array(
    // User ID => Username
    '72' => 'jack192',
    '23' => 'robert1984',
    '253' => 'mary111',
    '4' => 'jason92'
); 
```

和下表：

```
Table myTable:
username | colFoo | colBar 
```

我想运行如下查询，但是我希望输出另外包含一个不在表中的列（数组中的用户 ID）：

```
$user_string = implode("','", array_values($users));
$query = "SELECT username, colFoo, colBar FROM myTable WHERE username IN ('$user_string')"; 
```

这通常会输出如下内容：

```
Array
(
    [0] => Array
        (
            [username] => jack192
            [colFoo] => 98
            [colBar] => 7
        )

    [1] => Array
        (
            [username] => robert1984
            [colFoo] => 
            [colBar] => 2
        )

    [2] => Array
        (
            [username] => mary111
            [colFoo] => 41
            [colBar] => 9
        )

    [3] => Array
        (
            [username] => jason92
            [colFoo] => 46
            [colBar] => 13
        )
) 
```

但是，我希望输出看起来像这样，`user_id`对应于原始数组中的键：

```
Array
(
    [0] => Array
        (
            [username] => jack192
            [colFoo] => 98
            [colBar] => 7
            [user_id] => 72
        )

    [1] => Array
        (
            [username] => robert1984
            [colFoo] => 
            [colBar] => 2
            [user_id] => 23
        )

    [2] => Array
        (
            [username] => mary111
            [colFoo] => 41
            [colBar] => 9
            [user_id] => 253
        )

    [3] => Array
        (
            [username] => jason92
            [colFoo] => 46
            [colBar] => 13
            [user_id] => 4
        )
) 
```

我想我基本上只想将用户的 ID 输入到查询中并将其作为输出返回，而不需要 MySQL 对其进行任何进一步的处理。这可以在没有任何额外 PHP 代码的情况下纯粹在 SQL 中完成吗？

* * *

*注意：我没有对要从中提取此数据的数据库的写访问权限，也没有创建架构，因此我无法向`user_id`其中添加字段或任何内容。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:50:32.527

这是另一种方法，几乎​​是其他 2 个答案的混搭。您可以构建一个“假”表并将`JOIN`其用于`myTable`.

```
SELECT t.username, t.colFoo, t.colBar, s.user_id 
FROM myTable t 
LEFT JOIN
   (
    SELECT 72 as user_id, 'jack192' as username
       UNION SELECT 23 as user_id, 'robert1984' as username
       UNION SELECT 253 as user_id, 'mary111' as username
       UNION SELECT 4 as user_id, 'jason92' as username
   ) s
ON t.username = s.username; 
```

SQLFiddle 示例 - [sqlfiddle.com/#!2/64650/2](http://sqlfiddle.com/#!2/64650/2)

表`fake`结构可以通过 php`foreach`循环创建。

```
$select = '';
foreach ($users as $k => $v){
$select .=  "UNION SELECT $k as user_id, '$v' as username\n";
}
echo ltrim($select, "UNION "); 
```

仍然是一个乏味且不理想的解决方案，而是另一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:29:52.600

你可以试试 CASE

```
SELECT username, colFoo, colBar,
CASE `username`
  WHEN 'jack192' THEN SELECT 72;
  WHEN 'robert1984' THEN SELECT 23;
  ELSE SELECT NULL;
...
END CASE userid
FROM myTable ... 
```

如果数组中有很多值，它会变得有点麻烦。

[http://dev.mysql.com/doc/refman/5.0/en/case.html](http://dev.mysql.com/doc/refman/5.0/en/case.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T02:33:49.297

您不能仅使用 SQL 来执行此操作，因为 id 未在表中定义（无法承受 Hulka 提出的繁琐的 case 语句）。

不太直接地回答这个问题，但提供了一个替代解决方案：

但是，您可以对您的 php 进行“小”修改，以实现所需的结果：

```
$user_string = implode("','", array_values($users));
foreach ($users as $k => $v){ 
  $query[$k] = "SELECT \"$v\"
                       ,username 
                       ,colFoo
                       ,colBar 
                FROM myTable WHERE username IN ('$user_string')";
} 
```

查询与'SELECT "6" as user_id, field from TABLE 基本相同；' 对于每个用户，这将返回

```
6   field
----------
6   value1
6   value2
... 
```

根据您的界面，您可能能够准备和执行，但您没有提供足够的细节来生成特定的代码。

您必须多次运行查询，但您可以 push 或 array_merge。虽然，我个人认为你应该使用 user_ids 作为这个新数组的索引。这将需要对上述内容进行适度的重写。

# java - 一个类可以没有构造函数吗？

> ID：13773710
> 
> 赞同：57
> 
> 时间：2012-12-08T02:02:55.683
> 
> 标签：java

这是一段代码作为示例，剩下的只是方法（在底部查看迷宫类）。所以当它被实例化时，使用

```
Maze labyrinth = new Maze(); 
```

和

```
System.out.println (labyrinth); 
```

这将打印出网格数组。这是合法的吗？我认为所有类都需要构造函数它如何打印出二维网格数组？

**迷宫类：**

```
public class Maze
{
    private final int TRIED = 3;
    private final int PATH = 7;
    private int[][] grid = { {1,1,1,0,1,1,0,0,0,1,1,1,1},
                             {1,0,1,1,1,0,1,1,1,1,0,0,1},
                             {0,0,0,0,1,0,1,0,1,0,1,0,0},
                             {1,1,1,0,1,1,1,0,1,0,1,1,1},
                             {1,0,1,0,0,0,0,1,1,1,0,0,1},
                             {1,0,1,1,1,1,1,1,0,1,1,1,1},
                             {1,0,0,0,0,0,0,0,0,0,0,0,0},
                             {1,1,1,1,1,1,1,1,1,1,1,1,1} };

    public String toString ()
    {
        String result = "\n";
        for (int row = 0; row < grid.length; row++)
        {
            for (int column=0; column < grid[row].length; column++)
            result += grid[row][column] + "";
            result += "\n";
        }
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-08T02:06:43.587

不需要*显式*定义构造函数；但是，所有类都必须有一个构造函数，如果不提供任何构造函数，则会生成一个默认的空构造函数：

```
public Maze() {
} 
```

请参阅[默认构造函数](http://en.wikipedia.org/wiki/Default_constructor)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-08T02:06:57.673

如果你不显式编写构造函数，编译器会默认生成一个无参数的构造函数。

```
public Maze(){

} 
```

如果你没有显式编写构造函数，编译器会默认生成一个无参数的构造函数。

```
public Maze(){

} 
```

以上将由编译器包含。

例如检查这个类的字节码：

```
public class ABC {

} 
```

**字节码：**

```
public class sorting/ABC {

  // compiled from: ABC.java

  // access flags 0x1
  public <init>()V         //Default no-args constructor included by the compiler
   L0
    LINENUMBER 7 L0
    ALOAD 0
    INVOKESPECIAL java/lang/Object.<init>()V
    RETURN
   L1
    LOCALVARIABLE this Lsorting/ABC; L0 L1 0
    MAXSTACK = 1
    MAXLOCALS = 1
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-26T11:58:32.633

更准确地说，编译器会自动为没有构造函数的类提供*无参数*构造函数，这个构造函数调用超类的*无**参数*构造函数，如果超类没有*无参数*构造函数，这是一个错误，如果是，那很好。

 **如果你的类没有显式*超类*，那么它有一个*隐式* *超类*（`Object`），它**确实**有一个*无参数的*构造函数。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-12-19T08:59:53.243

这个问题的典型答案是“如果你不声明构造函数，就会创建一个默认构造函数”。这*通常是*正确的，但并非*总是*如此。一个类可能没有构造函数。

（这里要画的一个重要区别是 JVM[并不要求所有类文件都具有构造函数](https://docs.oracle.com/javase/specs/jvms/se9/html/jvms-2.html#jvms-2.9.1)；但是，如果未显式声明构造函数，则*Java* [中定义的任何类都具有默认构造函数](https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.8.9)。这个答案提出了一个奇怪的地方，即前者的示例是从 Java 代码创建的）。

考虑以下代码，来自[这个问题](https://stackoverflow.com/questions/47589638/why-does-javac-create-an-additional-class/47589823#47589823)：

```
public class Outer
{
    private class Inner {}

    void someMethod()
    {
        Inner inObj = this.new Inner();
    }
} 
```

如果你用 OpenJDK 编译它，你会发现 3 个类文件：

```
Outer.class
Outer$Inner.class
Outer$1.class 
```

`Outer$1`其中最不寻常的是：它实际上什么都没有，甚至没有构造函数：

```
Compiled from "Outer.java"
class Outer$1 {
} 
```

而`Inner`and`Outer`类具有生成的构造函数：

```
Compiled from "Outer.java"
class Outer {
  Outer();        <------------- Generated Constructor
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  void someMethod();
    Code:
       0: new           #2                  // class Outer$Inner
       3: dup
       4: aload_0
       5: aconst_null
       6: invokespecial #3                  // Method Outer$Inner."<init>":(LOuter;LOuter$1;)V
       9: astore_1
      10: return
}
Compiled from "Outer.java"
class Outer$Inner {
  final Outer this$0;

  Outer$Inner(Outer, Outer$1);        <------------- Generated Constructor
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method "<init>":(LOuter;)V
       5: return
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-08T02:09:55.417

如果不指定构造函数，编译器会生成一个默认的构造函数。

但是，任何在声明时未初始化的成员变量都将为空。

换句话说，如果您没有为*网格*分配值（就像您在示例中所做的那样），它将为空。

您的示例运行良好，因为您碰巧在声明*网格*后立即为其分配了一个值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-03T08:28:06.157

Java 实际上并不需要在类描述中显式构造函数。如果您不包含构造函数，那么 Java 编译器将创建一个带有空参数的默认构造函数。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-02-12T10:49:15.463

如果您的意思是您不希望任何人直接创建您的类的实例，我认为您可以创建一个构造函数将其访问修饰符设置为私有，并且您只能通过可以访问此私有的公共静态方法创建此类的实例构造函数**

# java - 扩展对象与实现接口

> ID：13773714
> 
> 赞同：0
> 
> 时间：2012-12-08T02:03:26.090
> 
> 标签：java, inheritance, interface

试图理解我在测试中出错的问题：

* * *

继承与实现接口有何不同？

1.  通过继承，类从其超类获得行为。
2.  使用接口，类从它实现的接口中获得行为。**（这是我选的那个）**
3.  通过继承，一个类必须实现其超类定义的方法。
4.  使用接口，一个类从它实现的接口中获得实例变量和行为。

我的想法是接口定义行为，而超类定义特征......或者它们是否相同？还是我的理解完全倒退了？

* * *

编辑：我想我应该指定我**确实**知道接口和继承之间的区别。我只是想知道使用术语*behavior*的两个选项。我不知道教授是否对术语吹毛求疵，或者他是否问得不好。

我知道当你实现一个接口时，你必须实现接口中定义的所有方法。因此，我会说接口定义了一个类**必须**具有的行为，但是扩展了另一个超类（尽管它确实也定义了一些行为（可以给子类更多的行为），它似乎并不像定义行为的接口。如果类实现了接口，则可以确定它具有某些行为。

也许这个问题是要问接口本身是否有行为代码，或者它是否只是定义——如果这样说的话，我会知道答案的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:05:43.197

当你实现一个接口时，你不必太在意它的实现。还请记住，您可以实现任意数量的接口，因为它们只指定合约而不是如何实现它们。界面的创建者让您负责。

当你扩展一个对象时，通常是因为你需要一些已经存在的对象已经拥有的功能，但只需要额外的一点。或者您想重新定义已经存在的对象的一些现有行为。

给你答案：1是对的。您不必实现超类（继承）的方法。只有当它是抽象的时，这个超类的下一个子类才需要实现方法（就像在接口中一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T02:53:00.047

我认为您的一些误解可能纯粹源于语义。也许描述接口的更直接的方式是它定义了一个 API，但不提供该 API 的实现。需要注意的是，我将使用 Java 作为示例，但在像 C++ 这样的语言中，实现接口*是*一种特殊类型的继承——即从由纯虚函数组成的类继承。

例如，在 Java 中，您可能将 EventListener 接口定义为：

```
public interface IEventListener {
    public void handleEvent(Event event);
} 
```

使用问题的措辞，该接口没有说明实现 IEventListener 接口的类在接收事件时的行为，它只确保实现该接口的任何类都具有能够接收事件的特性类型事件。

另一方面，继承允许超类也继承行为（实现）。例如，考虑以下 Java 基类：

```
public abstract BaseClass {
    public void baseMethod(int value) {
        System.out.println(int);
}

public class SubClass extends BaseClass {
} 
```

任何从 BaseClass 继承的类都获得 BaseClass 的 API（特性）和实现（行为）。换句话说，你不仅可以调用instanceOfSubClass.baseMethod(1)，一个特性，这样做会导致BaseClass中定义的行为，即1被打印到控制台。

所以你的答案（2）是不正确的，因为接口没有指定行为（实现）只有 API（特征）。继承可以处理两者。

我认为问题的重点是解释当您想要共享行为而不仅仅是 API 时，继承特别有用。也就是说，实现（行为）也可以通过组合来共享，这样的策略通常更好 - 请参阅 Bloch 的 Effective Java 中的第 16 条以获得很好的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T02:08:50.383

实现 x 接口的对象告诉对象它必须执行接口定义中列出的所有操作（方法）。所以在实现 x 的对象中，你需要实现所有的动作。无法实例化接口。

但是当您从对象 y 继承时，对象 y 可能已经实现了某些操作。如果不是，该方法将被标记为抽象（在 java 中），您需要在继承的对象中实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T02:15:36.277

这是 Java 中一个非常常见的 OO 设计问题。

**真诚地推荐这篇关于这个主题的非常好的文章，它很好地解释了它**：

[http://www.javaworld.com/javaqa/2001-04/03-qa-0420-abstract.html](http://www.javaworld.com/javaqa/2001-04/03-qa-0420-abstract.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T02:16:24.993

正确答案是 1。您选择的答案（选项 2）是错误的，因为接口在技术上没有任何行为。它们只是抽象方法的列表。您可以将它们更多地视为您可以在其上创建类的模板。例如，假设一个项目被分成两部分，最后需要整合。每个团队都可以使用一个通用接口来建立他们的类，这样集成就会变得容易得多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T02:17:37.267

继承，你得到一只猫。有了一个界面，你就得到了一只猫的骨架。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-08T02:20:03.670

您从继承中获得行为和实现。请记住，子类从其超类继承所有非构造函数和私有方法。这意味着您可以继承某些方法的功能（实现）。

通过实施，您可以获得公正的行为。你对实现所做的只是与编译器签订合同，说你承诺覆盖在实现的类或接口中定义的所有抽象方法。

我希望这会有所帮助。

# python - Python中的随机性

> ID：13773716
> 
> 赞同：7
> 
> 时间：2012-12-08T02:03:28.563
> 
> 标签：python, random

我`random.random()`用来获得随机浮点数（显然！）。但我真正想做的是：

```
there's a 30% chance my app does this:
  pass
else:
  pass 
```

你们能帮我整理一下吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T02:05:46.353

```
if random.random() > 0.5: 
    # your app does this 
    pass
else: 
    # your app does that
    pass 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-08T02:06:54.070

尝试这个：

```
if random.randint(1, 10) in (1, 2, 3):
    print '30% chance'
else:
    print '70% chance' 
```

这里`randint`会生成一个介于 1-10 之间的数字，有 30% 的机会在 1-3 之间，有 70% 的机会在 4-10 之间

# .net - 将图像旋转 15 度增量？

> ID：13773717
> 
> 赞同：1
> 
> 时间：2012-12-08T02:03:36.847
> 
> 标签：.net, vb.net, image, image-rotation

我面临着一项似乎非常艰巨的任务。我需要在 PictureBox 内以 15 度的增量旋转图像。在花了很长时间搜索互联网的深度之后，我还没有找到任何可以完成这项任务的东西。我能想到的最接近的方法是使用以下方法进行 90 度翻转：

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    InitializeBitmap()
End Sub

Dim bitmap1 As Bitmap

Private Sub InitializeBitmap()
    Try
        bitmap1 = CType(Bitmap.FromFile("G:\Documents\Dawson\Semster 3\Visual Basic I\Test\subs\subs\Wheel.bmp"), Bitmap)
        PictureBox1.SizeMode = PictureBoxSizeMode.AutoSize
        PictureBox1.Image = bitmap1
    Catch ex As System.IO.FileNotFoundException
        MessageBox.Show("There was an error. Check the path to the bitmap.")
    End Try
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) Handles Button1.Click

    If bitmap1 IsNot Nothing Then
        bitmap1.RotateFlip(RotateFlipType.Rotate90FlipXY)
        PictureBox1.Image = bitmap1
    End If
End Sub 
```

我需要将图像翻转 15 度增量的代码；仅此而已，也仅此而已。

任何愿意向我提供此代码的人将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T02:25:47.003

这是一篇[CodeProject 文章，展示了如何在 PictureBox 中旋转图像](http://www.codeproject.com/Articles/58815/C-Image-PictureBox-Rotations)。

基本方法需要使用 GDI 和[Graphics 类](http://msdn.microsoft.com/en-us/library/vstudio/system.drawing.graphics%28v=vs.90%29.aspx)来获取图像，执行旋转（通过类似[Graphics.RotateTransform](http://msdn.microsoft.com/en-us/library/vstudio/system.drawing.graphics.rotatetransform%28v=vs.90%29.aspx)的方法），然后将结果保存为图像，并将其分配给您的`PictureBox`控件。

# sql - 从多对多计算

> ID：13773719
> 
> 赞同：0
> 
> 时间：2012-12-08T02:03:42.483
> 
> 标签：sql, postgresql

如何根据以下结构检查标签是否至少使用过一次。

![表结构](../Images/582f99254f52a5cda62a5e163de1ad1b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T02:09:39.333

[`EXISTS`](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)半联接很可能是此任务的几种可能查询样式中最快的：

```
SELECT t.*
FROM   taggit_tag t
WHERE EXISTS (
   SELECT 1
   FROM   taggit_taggeditem ti
   WHERE  ti.tag_id = t.tag_id
   ); 
```

# fortran90 - fortran90 读取实数数组

> ID：13773720
> 
> 赞同：0
> 
> 时间：2012-12-08T02:03:52.280
> 
> 标签：fortran90

我有一个文件中的真实数据列表。真实数据是这样的。。

```
 25.935
 25.550
 24.274
 29.936
 23.122
 27.360
 28.154
 24.320
 28.613
 27.601
 29.948
 29.367 
```

我编写 fortran90 代码将此数据读入数组，如下所示：

```
PROGRAM autocorr
implicit none

INTEGER, PARAMETER :: TRUN=4000,TCOR=1800

 real,dimension(TRUN) :: angle

real :: temp, temp2, average1, average2
integer :: i, j, p, q, k, count1, t, count2

REAL, DIMENSION(0:TCOR) :: ACF

 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

open(100, file="fort.64",status="old")
do k = 1,TRUN
    read(100,*) angle(k)
end do 
```

然后，当我再次打印以查看值时，我得到

25.934999
25.549999
24.274000
29.936001
23.122000
27.360001
28.153999
24.320000
28.613001
27.601000
29.948000
29.367001
32.122002
33.818001
21.837000
29.283001
26.489000
24.010000
27.698000
30.799999
36.157001
29.034000
34.700001
26.058001
29.114000
24.177000
25.209000
25.820999
26.620001
29.761000

我可以知道为什么这些值现在是小数点后 6 位吗？如何避免这种影响，使其不影响计算结果？

感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:32:54.883

您没有显示用于再次写出值的语句。因此，我怀疑您使用了 Fortran 的*列表导向*输出，类似这样

```
write(output_unit,*) angle(k) 
```

如果你这样做了，你就将程序显示多少位数的控制权交给了编译器。这就是使用`*`代替显式格式的含义，标准说编译器可以使用数字的任何合理表示。

因此，您所看到的是您的数字以 8 sf 显示，这与单精度浮点数所提供的有关。如果你想显示小数点后只有 3 位的数字，你可以写

```
write(output_unit,'(f8.3)') angle(k) 
```

或其一些变体。

您已声明`angle`为 type `real`; 除非您使用编译器标志覆盖了默认值，否则这意味着您使用的是单精度 IEEE754 浮点数（在异国计算机之外的任何计算机上）。还要记住，大多数实数（在数学意义上）没有浮点的精确表示，并且精确数字的单精度十进制近似值`25.935`可能是`25.934999`; 您打印的其他数字似乎是您的程序读取的数字的浮点近似值。

如果您真的想以较低的精度计算结果，那么您将不得不采用一些聪明的编程技术。

# java - Java中的递归合并排序

> ID：13773723
> 
> 赞同：0
> 
> 时间：2012-12-08T02:04:44.113
> 
> 标签：java, implementation, mergesort

首先，在此先感谢所有回复，非常感谢他们。现在到这篇文章的目的；我在 Java 中实现合并排序时遇到问题。我得到一个空指针异常，但是，我无法弄清楚错误是什么，对我来说代码看起来不错。到目前为止，这是我所拥有的：

```
public List mSort(List l) {

    if (l.size() <= 1)
        return l;

    List left = null;
    List right = null;
    int mid = l.size() / 2;

    for (int x = 0; x < mid; x++)
        left.add(l.get(x));
    for (int x = 0; x >= mid; x++)
        right.add(l.get(x));

    left = mSort(left);
    right = mSort(right);

    return merge(left, right);
}

public List merge(List left, List right) {

    List r = null;
    while (left.size() > 0 || right.size() > 0) {
        if (left.size() > 0 && right.size() > 0)
            if (left.get(0) <= right.get(0)) {
                r.add(left.get(0));
                left.remove(0);
            }
            else {
                r.add(right.get(0));
                right.remove(0);
            }
        else if (left.size() > 0) {
            r.add(left.get(0));
            left.remove(0);

        }
        else if (right.size() > 0) {
            r.add(right.get(0));
            right.remove(0);
        }
    }
    return r;

} 
```

...显然，指针异常来自“mSort”方法中的“For”语句，任何可以指出我的错误或指导我正确方向的东西都非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:10:57.850

`left`并且`right`是空的，你不能添加它！！！

```
List left = new ArrayList();
List right = new ArrayList(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-05T18:41:43.820

```
for (int x = 0; x < mid; x++)
        left.add(l.get(x));
    for (int x = 0; x >= mid; x++)
        right.add(l.get(x)); 
```

一定是

```
int x = 0;
for (; x < mid; x++)
    left.add(l.get(x));
for (; x < l.size(); x++)
    right.add(l.get(x)); 
```

# php - php！操作员不工作

> ID：13773724
> 
> 赞同：-2
> 
> 时间：2012-12-08T02:05:00.470
> 
> 标签：php

我有几个复选框的代码，像这样工作正常

```
foreach($_POST as $key => $order_type) {
    if ('1' == $_POST[$key]) $_POST[$key] = '0';
} 
```

如果我否定 if 它停止工作并且我确定有些不是 == '1'; 它只是将它们设置为 NULL。

```
foreach($_POST as $key => $order_type) {
    if ('1' != $_POST[$key]) $_POST[$key] = '0';
} 
```

我想念什么吗？也试过`!('1' == $_POST[$key])`了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:14:38.960

复选框只有在被选中时才会被发送到服务器。

我假设它们的值为`1`，因此您将能够在`$_POST`数组中找到它们。但是，值所在的位置将不存在`0`（除非您在 html 中指定值`0`并选中该框...）。

要选中复选框，您需要使用`isset`该值，因为该值实际上并不那么重要，它要么设置（选中），要么没有，然后它就不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:09:55.933

一个简单的 if/else 怎么样？

```
if ('1' == $_POST[$key]) {
   $_POST[$key] = '0'; }
else {
   Do this if it's != ;
} 
```

# kendo-ui - Kendo UI 树视图中的分层数据源

> ID：13773726
> 
> 赞同：-1
> 
> 时间：2012-12-08T02:05:17.253
> 
> 标签：kendo-ui, kendo-treeview

我是 Kendo UI 的新手，我正在尝试在 Kendo UI 中使用 Hierarchial 数据源实现树视图。以下是代码示例

```
var elementList= " {text:\"ABC\"},{text:\"DEF\",items:[{text:\"childDEF\"}]}";

var dataDefault=new kendo.data.HierarchialDataSource(
                        {
                              data:elementList
                        });

$("#grouptree").kendoTreeView({
                       dataSource:dataDefault
                       }); 
```

elementList 中的文本是动态形成的。我将结果保存在一个数组中，然后将数组中的数据存储在此变量中。我需要在树层次结构中显示它。但是当我运行它时，我在“数据：元素列表”行中收到“对象不支持此属性或方法”错误。

我在这里遗漏了一些其他参数，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T07:27:05.970

您正在为数据源提供一个字符串。将 elementList 更改为常规 JavaScript 数组。您还拼错了 HierarchicalDataSource（缺少“c”）。这是固定代码：http: [//jsbin.com/usoqoh/1/edit](http://jsbin.com/usoqoh/1/edit)

# .htaccess - .htaccess：如何使用 .htaccess 永久重定向动态地址，使用 no-follow、do-not-index 指令

> ID：13773733
> 
> 赞同：3
> 
> 时间：2012-12-08T02:06:22.060
> 
> 标签：.htaccess, redirect

我有以下问题。下面的链接格式不再存在：

`photos.domain.com/web/poppic.php?n=[any number from 0 to the roof]`
Ej,:`photos.domain.com/web/poppic.php?n=30`

一年前，我将其替换为：`photos.domain.com/`

多年后，我仍然有大量的 404 错误。我需要一个永久重定向和一个 htaccess 指令，以便搜索引擎不跟随并且不再索引那个旧链接。

我试过`rewriterule ^web\/poppic\.php?n=30 "http\:\/\/photos\.domain\.com" [R=301,L]`会奏效。但是，我需要写每一行，从 0 到 9999999999999999999999999： `rewriterule ^web\/poppic\.php?n=0 "http\:\/\/photos\.domain\.com" [R=301,L]` `rewriterule ^web\/poppic\.php?n=1 "http\:\/\/photos\.domain\.com" [R=301,L]` `rewriterule ^web\/poppic\.php?n=2 "http\:\/\/photos\.domain\.com" [R=301,L]` 等等。

我怎样才能用一个变量来代替`php?n=[number]`（`php?n=$variable`或类似的东西）？

此外，它并没有告诉爬虫不要关注/索引页面。

能否请你帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:30:21.687

您无法使用 apache 的 mod_rewrite 匹配重写规则内的查询字符串。您需要使用重写条件并匹配`%{QUERY_STRING}`变量：

```
RewriteCond %{QUERY_STRING} ^n=[0-9]+
RewriteRule ^web/poppic\.php$ /? [L,R=301] 
```

不确定您的原始规则如何：

```
rewriterule ^web\/poppic\.php?n=30 "http\:\/\/photos\.domain\.com" [R=301,L] 
```

曾经工作过。在 apache 2.2 或 2.4 下它对我不起作用。

# c# - 是否有可以为 C# MessageBox 生成代码的插件或独立程序？

> ID：13773744
> 
> 赞同：1
> 
> 时间：2012-12-08T02:07:34.337
> 
> 标签：c#

在我在堆栈中添加另一个项目之前，是否有可以为 C# MessageBox 生成代码的插件或独立程序？下面是我正在寻找的示例图片。我找到了一些其他语言，但没有找到 C#。谢谢。

![在此处输入图像描述](../Images/b894f4367a73d034fd905e500c6fa7b0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T02:09:17.047

嗯，.NET [MessageBox 类（Windows 窗体）](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.forms.messagebox%28v=vs.90%29.aspx)和[MessageBox (WPF)](http://msdn.microsoft.com/en-us/library/system.windows.messagebox.aspx)都使得从 C# 创建消息框非常非常简单。创建消息框只是一个方法调用，所有选项都在枚举中很好地指定。

# java - getBean(类 arg0) 在没有类型转换的情况下无法工作

> ID：13773745
> 
> 赞同：1
> 
> 时间：2012-12-08T02:07:53.117
> 
> 标签：java, spring

```
protected Object createJobInstance(TriggerFiredBundle bundle) throws Exception 
{
   Job job =  ctx.getBean(bundle.getJobDetail().getJobClass());
} 
```

上面的代码在没有类型转换的情况下不起作用..为什么当 getBean 的输入类型是 Class < T > 并且返回类型是 T 时需要类型转换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:58:27.833

在运行时之前，JVM 可能无法从您的代码中分辨出 bean 的类型，因此无法编译它。您要么必须在此处向下转换，要么更改`getJobClass()`方法的签名（以 return `Class<? extends Job>`）。

# css - 如何将 CSS 动画限制为某个 div？

> ID：13773746
> 
> 赞同：4
> 
> 时间：2012-12-08T02:08:07.007
> 
> 标签：css, html

我一直在尝试在一个 100px 高的 div 中实现一个由几个旋转图像和 webkit 转换组成的 CSS 类空间动画。

我希望将 CSS 动画限制在的 div 称为*#example*。

***在此处查看当前编码：http:*** [//jsfiddle.net/R6DKg/1/](http://jsfiddle.net/R6DKg/1/)

```
#example { 
position:fixed; 
z-index:2000; 
width:100%;
} 
```

如您所见，CSS 动画占据了整个页面，而不是包含在*#example*中，即使编码本身位于 HTML 端的 div 中。

有经验的 CSS 用户的任何见解都会非常有帮助。我觉得这好像是一个小的编码更改，但我已经在这几个小时里调整了代码中的各种内容，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:14:35.047

您可能正在寻找该`overflow:hidden;`物业。

[http://jsfiddle.net/R6DKg/5/](http://jsfiddle.net/R6DKg/5/)

# bash - bash脚本中的条件变量？

> ID：13773752
> 
> 赞同：2
> 
> 时间：2012-12-08T02:09:03.940
> 
> 标签：bash

我不习惯用 bash 编写代码，但我正在自学。我正在尝试创建一个脚本，该脚本将从进程列表中查询信息。我已经做到了，但我想更进一步并做到这一点：

1.  如果存在操作系统，则该脚本使用一组命令运行。
2.  如果存在 B OS，则该脚本使用一组不同的命令运行。

这是我到目前为止所拥有的。它适用于我的 Centos 发行版，但不适用于我的 Ubuntu。任何帮助是极大的赞赏。

```
#!/bin/bash

pid=$(ps -eo pmem,pid | sort -nr -k 1 | cut -d " " -f 2 | head -1)
howmany=$(lsof -l -n -p $pid | wc -l)
nameofprocess=$(ps -eo pmem,fname | sort -nr -k 1 | cut -d " " -f 2 | head -1)
percent=$(ps -eo pmem,pid,fname | sort -k 1 -nr | head -1 | cut -d " " -f 1)

lsof -l -n -p $pid > ~/`date "+%Y-%m-%d-%H%M"`.process.log 2>&1

echo " "
echo "$nameofprocess has $howmany files open, and is using $percent"%" of memory."
echo "-----------------------------------"
echo "A log has been created in your home directory"
echo "-----------------------------------"
echo " "
echo ""$USER", do you want to terminate? (y/n)"
read yn
case $yn in

        [yY] | [yY][Ee][Ss] )
                kill -15 $pid
                ;;

        [nN] | [n|N][O|o] )
                echo "Not killing. Powering down."
                echo "......."
                sleep 2
                ;;
        *) echo "Does not compute"
                ;;
esac 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T13:08:06.287

这是我的脚本版本。它适用于 Ubuntu 和 Debian。在某些方面它可能比你的更安全（当一个进程占用超过 10% 的内存时，我显然有一个错误，因为你的笨拙`cut`）。此外，你`ps`不是“原子的”，所以事情可能会在不同的`ps`.

```
#!/bin/bash

read percent pid nameofprocess < <(ps -eo pmem,pid,fname --sort=-pmem h)
mapfile -t openfiles < <(lsof -l -n -p $pid)
howmany=${#openfiles[@]}

printf '%s\n' "${openfiles[@]}" > ~/$(date "+%Y-%m-%d-%H%M.process.log")

cat <<EOF

$nameofprocess has $howmany files open, and is using $percent% of memory.
-----------------------------------
A log has been created in your home directory
-----------------------------------

EOF

read -p "$USER, do you want to terminate? (y/n) "

case $REPLY in
    [yY] | [yY][Ee][Ss] )
            kill -15 $pid
            ;;

    [nN] | [n|N][O|o] )
            echo "Not killing. Powering down."
            echo "......."
            sleep 2
            ;;
    *) echo "Does not compute"
            ;;
esac 
```

首先，检查您的版本是否`ps`具有`--sort`标志和`h`选项：

*   `--sort=-pmem`告诉`ps`排序 wrt 递减`pmem`
*   `h`告诉`ps`不显示任何标题

所有这些都交给了`read`bash 内置函数，它读取空格分隔的字段，这里是 fields `pmem`, `pid`,`fname`并将这些值放入相应的变量`percent`, `pid`and`nameofprocess`中。

该`mapfile`命令读取标准输入（此处为`lsof`命令的输出）并将每一行放入一个数组字段中。该数组的大小由 line 计算`howmany=${#openfiles[@]}`。`lsof`存储在数组中的 的输出`openfiles`被输出到相应的文件。

`echo`然后，我们使用 a代替 many `cat <<EOF`，然后将`read`is 与`-p`(prompt) 选项一起使用。

我不知道这是否真的回答了你的问题，但至少，你有一个编写良好的 bash 脚本，更少的多个无用命令调用（直到你的`case`声明，你调用了 16 个进程，我只调用了 4 个）。此外，在第一次`ps`调用之后，您的脚本中的事情可能会发生变化（即使它不太可能发生），而不是我的。

您可能还喜欢以下内容，它不会将 的输出放入`lsof`数组中，而是使用额外的`wc`命令：

```
#!/bin/bash

read percent pid nameofprocess < <(ps -eo pmem,pid,fname --sort=-pmem h)
logfilename="~/$(date "+%Y-%m-%d-%H%M.process.log")
lsof -l -n -p $pid > "$logfilename"
howmany=$(wc -l < "$logfilename")

cat <<EOF

$nameofprocess has $howmany files open, and is using $percent% of memory.
-----------------------------------
A log has been created in your home directory ($logfilename)
-----------------------------------

EOF

read -p "$USER, do you want to terminate? (y/n) "

case $REPLY in
    [yY] | [yY][Ee][Ss] )
            kill -15 $pid
            ;;

    [nN] | [n|N][O|o] )
            echo "Not killing. Powering down."
            echo "......."
            sleep 2
            ;;
    *) echo "Does not compute"
            ;;
esac 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:23:19.987

例如，您可以通过（更新）来实现这一点

```
#!/bin/bash

# place distribution independent code here
# dist=$(lsb_release -is)

if [[ -f /etc/redheat-release ]];
then # this is a RedHead based distribution like centos, fedora, ...
    dist="redhead"
elif [[ -f /etc/issue.net ]];
then
    # dist=$(cat /etc/issue.net | cut -d' ' -f1) # debian, ubuntu, ...
    dist="ubuntu"
else
    dist="unknown"
fi

if [[ $dist == "ubuntu" ]];
then
    # use your ubuntu command set
elif [[ $dist == "redhead" ]];
then
    # use your centos command set
else
    # do some magic here
fi

# place distribution independent code here 
```

# javascript - 使用 highcharts 在堆栈标签中显示特定系列值

> ID：13773755
> 
> 赞同：7
> 
> 时间：2012-12-08T02:09:53.107
> 
> 标签：javascript, jquery, highcharts

这是我正在使用的：http: [//jsfiddle.net/josip0423/prJjY/171/](http://jsfiddle.net/josip0423/prJjY/171/)

在过去的几个小时里，我一直在为此苦苦挣扎，却一无所获。我对javascript很陌生，今天才发现highcharts。

默认情况下，堆栈标签显示两个系列的总数 (this.total)。我想要做的是显示一个系列的百分比（“完整”系列的值/this.total * 100）。

我不知道如何提取“完整”系列的价值。

```
yAxis: {
            stackLabels: {
                style: {
                    color: 'black'
                },
                enabled: true,
                formatter: function() {

                    **return this.total**

                }
            }
        } 
```

所以最后，我的图表看起来完全一样，除了每列上方的标签将显示“完成”系列的百分比。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T12:30:44.090

您可以通过从格式化程序回调函数获取系列对象来做到这一点。

```
stackLabels: {
              style: {
                         color: 'black'
                     },
                     enabled: true,
                     formatter: function() {   
                        return (this.axis.series[1].yData[this.x] / this.total * 100).toPrecision(2) + '%';                                
                    }
            } 
```

这是您的案例的jsfiddle：

> [http://jsfiddle.net/prJjY/183/](http://jsfiddle.net/prJjY/183/)

# javascript - 启用输入字段 X+1 onChange of input field X

> ID：13773759
> 
> 赞同：1
> 
> 时间：2012-12-08T02:09:56.307
> 
> 标签：javascript, jquery, html

所以每个“特殊输入” div 都包含一个输入字段。我正在尝试规范何时可以将每个信息输入到每个输入字段中。

最初，我希望启用顶部的第一个输入字段，而禁用其下方的其余输入字段。

输入字段 1 的 OnChange，我希望启用它下面的下一个输入字段，而其余的则禁用。输入字段 2 的 OnChange，我希望输入字段 3 启用，而其余部分保持禁用，等等...

我知道我可以在需要时使用 JQuery 的 attr() 来启用输入字段，但我不确定如何应用逻辑来实现这一点，因为 JQuery 对我来说很新。

```
<div class="special-input"><input type="text" /></div>
<div class="special-input"><input type="text" /></div>
<div class="special-input"><input type="text" /></div>
<div class="special-input"><input type="text" /></div>
<div class="special-input"><input type="text" /></div>
<div class="special-input"><input type="text" /></div>
<div class="special-input"><input type="text" /></div>
<div class="special-input"><input type="text" /></div>
<div class="special-input"><input type="text" /></div>
...... 
...... 
......
<div class="special-input"><input type="text" /></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:30:19.253

```
 // Cache the inputs, this is a good way to improve performance of your 
    // jQuery code when re-using selectors.
        var $inputs = $('.special-input :input');
    // Disable all except the first input
        $inputs.not(':first').attr('disabled', 'disabled');
        $inputs.each(function(i) {
    // For each input, bind a change event to enable the next input, 
    // if the user presses enter, the next textbox will receive focus. if the user
    // presses tab, the following input won't receive focus, so you'll have to add 
    // code if you want this to work.
            $(this).on('change', function() {
                // Get the index of the current input element we're looking at,
                // We need to re-wrap the $input[i] element as it is now a normal 
                // DOM element.
                var $nextInput = $($inputs[i + 1]);
                $nextInput.removeAttr('disabled').focus();
            });
        });​ 
```

**编辑：您可以在**[http://jsfiddle.net/dFZEq/11/](http://jsfiddle.net/dFZEq/11/)看到一个工作示例

**编辑2：**

要在满足某个条件后启用下一行的元素集，请使用以下命令：

```
var $specialInputs = $('.special-input');

// don't disable the first line's input elements.
$specialInputs.not(':first').find(':input').attr('disabled', 'disabled');

$specialInputs.on('change', function() {
    var $this = $(this);

    if ($this.find(':input').filter(function() {
        // you can change this filter to match any condition you 
        // like, for now we'll just make sure all inputs have a non-empty value
        return $(this).val() == '';
    }).length == 0) {

        var $nextInputSet = $($specialInputs[$this.index() + 1]).find(':input');

        // enable the next set of elements
        $nextInputSet.removeAttr('disabled');

        // focus your element here, requires more work
        $nextInputSet.first().focus();
    }
});​ 
```

[http://jsfiddle.net/tFG5W/](http://jsfiddle.net/tFG5W/)上的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:19:13.913

我没有测试以下代码，但应该看起来像这样：

```
$(".special-input").bind("change",function(event){
    $(this).attr("disabled","disabled");
    $(this).next().removeAttr("disabled").focus();
}); 
```

# c# - 如何在 C# WinForms 项目中使用旧的 Courier 位图字体？

> ID：13773760
> 
> 赞同：1
> 
> 时间：2012-12-08T02:10:54.500
> 
> 标签：c#, visual-studio-2012, regedit, bitmap-fonts

[我正在尝试与此处](https://stackoverflow.com/questions/12061763/reproduce-the-microsoft-registry-editor-edit-binary-value-window-in-vs-2010-c/13772949#13772949)讨论的完全相同的 RegEdit 克隆项目，就像 Darxis 一样，我被“编辑二进制值”对话框难住了。

我相信使用的字体是**原始**的Courier（**不是**Courier New），但由于这是一种老式的位图字体，我不能在现代 C# WinForms 项目中使用它。我已经尝试了我可以在网上找到的所有 TTF 版本的 Courier，但没有一个以与原始版本相同的方式重现 0（即四条直线且**没有曲线**）。

叫我肛门，但和 Darxis 一样，我希望我的版本具有与 Microsoft 注册表编辑器**完全相同的外观。**然后除了烦人的向后不兼容问题之外，我为此目的安装的每个 TTF 字体都导致 VS2012 脱口而出“仅支持 TrueType 字体。这不是 TrueType 字体”，这绝对是 BS！

我什至尝试创建一个旧的 GDI LOGFONT 并使用它（如此[处](https://stackoverflow.com/questions/4273417/c-create-a-font-from-a-logical-font-logfont-quality-setting-is-ignored)所述），这给了我关于非 TrueType 字体的同样可怕的错误消息。那么有**没有**办法让旧字体（特别是 C:\Windows\Fonts 中的 coure.fon）与 C# 项目一起使用？！对于如此琐碎和愚蠢的事情，我几乎要束手无策了，但在我弄清楚之前，我将无法休息！

非常感谢任何可以帮助我解决这个非常烦人的问题的人:-)

# algorithm - 第一个被称为 NP Complete 的算法是什么？

> ID：13773763
> 
> 赞同：0
> 
> 时间：2012-12-08T02:11:49.353
> 
> 标签：algorithm, np

应该有一个初始问题来开始构建 NPC 问题集。只有这样，问题才能从集合 NP 添加到集合 NPC 中，表明 NP 中的问题可简化为 NPC 中的第一个问题。那么，第一个添加到NPC的问题是什么，以及如何有人断定它确实是NPC。

（注意：谷歌搜索，没有答案。我希望这里有人的教授在课堂上提到过这样的事情）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:41:14.627

这是一个可满足性或 SAT 问题。

历史：
[http ://en.wikipedia.org/wiki/Boolean_satisfiability_problem](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem)

证明： http:
[//www.proofwiki.org/wiki/CNF_SAT_is_NP-complete](http://www.proofwiki.org/wiki/CNF_SAT_is_NP-complete)

# arduino - Serial.begin（速度，配置）不为莱昂纳多板编译

> ID：13773764
> 
> 赞同：2
> 
> 时间：2012-12-08T02:11:56.840
> 
> 标签：arduino

我想将我的串行通信配置为没有奇偶校验、1 个开始位和 2 个停止位。状态的[文档](http://arduino.cc/en/Serial/Begin)`Serial.begin(speed, config)`：

> (...) 可选的第二个参数配置数据、奇偶校验和停止位。默认为 8 个数据位，无奇偶校验，1 个停止位。

该文档还列出了可能的配置值。根据我的（有限）理解，我需要 SERIAL_7N2 或 SERIAL_8N2 来满足我的要求。（我不确定数据位与我需要的 1 起始位有何关系。）

但是，我什至无法编译，因为我不知道如何将该配置值提供给 begin 方法。（我没有太多 Arduino/C++ 经验）。

在我的代码中，我尝试了以下两种变体：

```
Serial.begin(9600, SERIAL_8N2);
Serial.begin(9600, "SERIAL_8N2"); 
```

我错过了什么吗？

附加信息：

`Serial.begin(speed, config)`已与最新的[Arduino 1.0.2 IDE](http://arduino.cc/en/Main/ReleaseNotes)版本一起推出。

可以找到定义/实现 begin 方法的代码：

*   [HardwareSerial.h](https://github.com/arduino/Arduino/blob/master/hardware/arduino/cores/arduino/HardwareSerial.h)
*   [HardwareSerial.cpp](https://github.com/arduino/Arduino/blob/master/hardware/arduino/cores/arduino/HardwareSerial.cpp)

* * *

编辑：

根据 PeterJ 和 borges 的回复，以下变体是正确的。

```
Serial.begin(9600, SERIAL_8N2); 
```

但是，它仍然无法正常工作。

[我发现如果我将配置的板从我的 Arduino Leonardo 更改为Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)，则不会发生编译错误。

因此，它可能是一个只发生在一部分板子上的错误......或者它可能不受支持？！

* * *

编辑2：

现在已经解决了：）博尔赫斯的回答为我指出了正确的解决方案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T03:40:25.637

您在评论中提到：（编辑：现在在标题中）

> 如果我将板子从“Arduino Leonardo”更改为“Arduino Uno”，我不会收到编译错误。

Arduino Leonardo 在串行通信方面有一些特点：

1.  Leonardo 有一个具有原生 USB 通信功能的微控制器 ( [ATmega32U4](http://www.atmel.com/devices/atmega32u4.aspx) )。为了保持整个生态系统已经建立的兼容性，Leonardo 通过 USB 虚拟化了串行通信。您可以使用代码访问此通信`Serial`。实际上，您可以通过 USB 插头访问该通信。

2.  要使用“真正的”串行通信（AKA 串行 TTL），您需要使用引脚 0（RX）和 1（TX）。在您将使用的代码中`Serial1`（注意数字 1！）。

一个例子：

```
void setup() {
    Serial1.begin(9600, SERIAL_8N2);
    Serial1.println("Hello?");
}

void loop() {
} 
```

更多信息（推荐）：

*   [阿杜诺·莱昂纳多](http://arduino.cc/en/Main/ArduinoBoardLeonardo)
*   [Arduino Leonardo 指南](http://arduino.cc/en/Guide/ArduinoLeonardo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T02:48:12.307

第一种方法应该没问题，所以你有编译器配置或包含问题。确保文件顶部包含以下内容：

```
#include <HardwareSerial.h> 
```

此外，虽然 SERIAL_8N2 有效，但它是一个很少使用的奇怪设置。您很可能需要 SERIAL_8N1。

# android - Android软件后退按钮不返回上一个视图

> ID：13773767
> 
> 赞同：0
> 
> 时间：2012-12-08T02:12:31.140
> 
> 标签：android

我一直在寻找一个多月，我无法在任何地方解决这个问题。每当我点击后退按钮时，我的应用程序就会关闭。我已经搜索过`finish()`我已经覆盖了`onBackPressed()`，我似乎无法解决这个问题。

```
public class Toasty extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_toasty);

    Button button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {

          public void onClick(View arg0) {
             Toast.makeText(getApplicationContext(),
                     "Here's your toast!", Toast.LENGTH_LONG).show();
             setContentView(R.layout.activity_show_toast);
          }
    });
  }
} 
```

这几乎就是我所做的一切。它会在下一个屏幕上弹出一个文本视图，然后弹出一个 Toast。然后我按下后退按钮，当我想要做的只是重置时应用程序退出，以便可以再次按下按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:23:04.177

“不返回以前的视图”

这是因为当您按下后退按钮时，它不会离开视图，而是离开 Activity。

因此，如果您有一个 Activity，无论您更改视图多少次，它都会退出应用程序。

要更改行为：

A. 用你的第二个视图创建一个新的 Activity 并通过一个 Intent 去它

```
 Intent i = new Intent(this, ActivityTwo.class);
  startActivity(intent); 
```

注意：ActivityTwo 将是一个包含 R.layout.activity_toasty 作为其视图的活动

B. 覆盖后退按钮，如下所示

```
@Override
public void onBackPressed(){
     if(currentViewIsShowToast){
         setContentView(R.layout.activity_toasty);
         //Change activity to previous view
     }
     else 
         super.onBackPressed();
} 
```

# java - 反向文件java程序

> ID：13773769
> 
> 赞同：0
> 
> 时间：2012-12-08T02:13:34.247
> 
> 标签：java

我正在尝试让程序正常工作。输入是带有文本行的源文件。输出是一个带有原始文本行的目标文件，但相反。

```
ex. 
abcd  -->  dcba
efgh       hgfe

1234       4321 
```

我看过几个类似的问题，但他们以与我不同的方式解决这个问题，这并不能完全解决这个个人问题。我已经通读了，我想我只是在想这个。我将非常感谢有关为什么我的代码根本没有输出到目标文件的输入。我做了一个堆栈跟踪，它一直打印得非常好。

谢谢，

代码：（命令行参数：source2.txt target2.txt

```
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java. util.Scanner;

/**
   This program copies one file to another.
*/
public class Reverse
{
   public static void main(String[] args) throws IOException
   {
      try{
      String source = args[0];
      String target = args[1];

      File sourceFile=new File(source);

      Scanner content=new Scanner(sourceFile);
      PrintWriter pwriter =new PrintWriter(target);

      while(content.hasNextLine())
      {
         String s=content.nextLine();
         StringBuffer buffer = new StringBuffer(s);
         buffer=buffer.reverse();
         String rs=buffer.toString();
         pwriter.println(rs);
      }
      content.close();    
      pwriter.close();
      }

      catch(Exception e){
          System.out.println("Something went wrong");
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T02:17:41.883

你看到什么输出？

PrintWriter 抑制`IOException`并设置错误标志；您应该使用 OutputStreamWriter()。

> 此类中的方法从不抛出 I/O 异常，尽管它的某些构造函数可能会。客户端可以通过调用 checkError() 来查询是否发生了任何错误。

另外，不要用“出现问题”来处理异常；至少转储堆栈跟踪，以便您知道哪里出了问题。

也就是说，我可能会将读取的每一行输出到控制台，如下所示：

```
System.out.println("** Read ["+s+"]"); 
```

确认我实际上正在阅读该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T06:58:15.730

我对你的代码做了一些修改..

```
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Scanner;

public class Reverse
{
public static void main(String[] args) throws IOException
{
  try{
 // String source = args[0];
 // String target = args[1];

  File sourceFile=new File("C:/Users/Ruchira/Downloads/in.txt");//input File Path
  File outFile=new File("C:/Users/Ruchira/Downloads/out.txt");//out put file path

  Scanner content=new Scanner(sourceFile);
  PrintWriter pwriter =new PrintWriter(outFile);

  while(content.hasNextLine())
  {
     String s=content.nextLine();
     StringBuffer buffer = new StringBuffer(s);
     buffer=buffer.reverse();
     String rs=buffer.toString();
     pwriter.println(rs);
  }
  content.close();    
  pwriter.close();
  }

  catch(Exception e){
      System.out.println("Something went wrong");
  }
}
} 
```

这将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T02:35:35.207

```
import java.io.*;
import java.util.*;

class Driver {

public static void main(String[] args) {
    ReverseFile demo = new ReverseFile();
    demo.readFile("source2.txt");
    demo.reverse("target2.txt");
}
}

class ReverseFile {

// Declare a stream of input
DataInputStream inStream;

// Store the bytes of input file in a String
ArrayList<Character> fileArray = new ArrayList<Character>();

// Store file sizes to see how much compression we get
long inFileSize;
long outFileSize;

// Track how many bytes we've read. Useful for large files.
int byteCount;

public void readFile(String fileName) {
             try {
        // Create a new File object, get size
        File inputFile = new File(fileName);
        inFileSize = inputFile.length();

        // The constructor of DataInputStream requires an InputStream
        inStream = new DataInputStream(new FileInputStream(inputFile));
    }

    // Oops.  Errors.
    catch (FileNotFoundException e) {
        e.printStackTrace();
        System.exit(0);
    }

    // Read the input file
    try {

        // While there are more bytes available to read...
        while (inStream.available() > 0) {

            // Read in a single byte and store it in a character
            char c = (char)inStream.readByte();

            if ((++byteCount)% 1024 == 0)
                System.out.println("Read " + byteCount/1024 + " of " + inFileSize/1024 + " KB...");

            // Print the characters to see them for debugging purposes
            //System.out.print(c);

            // Add the character to an ArrayList
            fileArray.add(c);
        }

        // clean up
        inStream.close();
        System.out.println("Done!!!\n");
    }

    // Oops.  Errors.
    catch (IOException e) {
        e.printStackTrace();
        System.exit(0);
    }

    // Print the ArrayList contents for debugging purposes
    //System.out.println(fileArray);
}

public void reverse(String fileName) throws IOException {
        FileWriter output = new FileWriter(fileName);

        for (int i = fileArray.size() - 1; i >= 0; i++) {
            try {
                output.write(fileArray.get(i));
            }
            catch (IOException e) {
                e.printStackTrace();
            }
        }

        output.close();
    }
} 
```

那应该行得通。如果没有，请告诉我，我会进一步调查问题。

# r - 将列中逗号分隔的字符串拆分为单独的行

> ID：13773770
> 
> 赞同：136
> 
> 时间：2012-12-08T02:13:44.527
> 
> 标签：r, string, split, r-faq

我有一个数据框，如下所示：

```
data.frame(director = c("Aaron Blaise,Bob Walker", "Akira Kurosawa", 
                        "Alan J. Pakula", "Alan Parker", "Alejandro Amenabar", "Alejandro Gonzalez Inarritu", 
                        "Alejandro Gonzalez Inarritu,Benicio Del Toro", "Alejandro González Iñárritu", 
                        "Alex Proyas", "Alexander Hall", "Alfonso Cuaron", "Alfred Hitchcock", 
                        "Anatole Litvak", "Andrew Adamson,Marilyn Fox", "Andrew Dominik", 
                        "Andrew Stanton", "Andrew Stanton,Lee Unkrich", "Angelina Jolie,John Stevenson", 
                        "Anne Fontaine", "Anthony Harvey"), AB = c('A', 'B', 'A', 'A', 'B', 'B', 'B', 'A', 'B', 'A', 'B', 'A', 'A', 'B', 'B', 'B', 'B', 'B', 'B', 'A')) 
```

如您所见，该`director`列中的某些条目是多个名称，以逗号分隔。我想将这些条目分成单独的行，同时保持另一列的值。例如，上面数据框中的第一行应该分成两行，每列有一个名称，`director`列中有“A” `AB`。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2015-07-20T10:56:48.990

几种选择：

**[1）使用data.table](/questions/tagged/data.table "显示标记为“data.table”的问题")的两种方式：**

```
library(data.table)
# method 1 (preferred)
setDT(v)[, lapply(.SD, function(x) unlist(tstrsplit(x, ",", fixed=TRUE))), by = AB
         ][!is.na(director)]
# method 2
setDT(v)[, strsplit(as.character(director), ",", fixed=TRUE), by = .(AB, director)
         ][,.(director = V1, AB)] 
```

**2) [dplyr](/questions/tagged/dplyr "显示标记为“dplyr”的问题") / [tidyr](/questions/tagged/tidyr "显示标记为“tidyr”的问题")组合：**

```
library(dplyr)
library(tidyr)
v %>% 
  mutate(director = strsplit(as.character(director), ",")) %>%
  unnest(director) 
```

**3）仅使用[tidyr](/questions/tagged/tidyr "显示标记为“tidyr”的问题")：**使用[`tidyr 0.5.0`](https://blog.rstudio.org/2016/06/13/tidyr-0-5-0/)（及更高版本），您也可以只使用`separate_rows`：

```
separate_rows(v, director, sep = ",") 
```

您可以使用该`convert = TRUE`参数自动将数字转换为数字列。

**4) 以 R 为基数：**

```
# if 'director' is a character-column:
stack(setNames(strsplit(df$director,','), df$AB))

# if 'director' is a factor-column:
stack(setNames(strsplit(as.character(df$director),','), df$AB)) 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2017-04-15T22:21:42.533

这个老问题经常被用作欺骗目标（用 标记`r-faq`）。到今天为止，它已经回答了 3 次，提供了 6 种不同的方法，但**缺乏一个基准**作为指导，哪种方法最快¹。

基准解决方案包括

*   [Matthew Lundberg 的基本 R 方法](https://stackoverflow.com/a/13773900/3817004)，但根据[Rich Scriven 的评论](https://stackoverflow.com/questions/13773770/split-comma-separated-column-into-separate-rows#comment71864689_13773900)进行了修改，
*   [Jaap 的](https://stackoverflow.com/a/31514711/3817004)两种`data.table`方法和两种`dplyr`/`tidyr`方法，
*   [阿难的`splitstackshape`解决方案](https://stackoverflow.com/a/28291428/3817004)，
*   以及 Jaap`data.table`方法的另外两个变体。

使用该包对 6 种不同大小的数据帧进行了基准测试，总共有 8 种不同的方法`microbenchmark`（参见下面的代码）。

OP 给出的样本数据仅包含 20 行。要创建更大的数据框，只需将这 20 行重复 1、10、100、1000、10000 和 100000 次，这样问题的大小就可以达到 200 万行。

### 基准测试结果

[![在此处输入图像描述](../Images/3a0635ca11f03d34889218cf0a107cee.png)](https://i.stack.imgur.com/Fm0nA.png)

基准测试结果表明，对于足够大的数据帧，所有`data.table`方法都比任何其他方法都快。对于超过 5000 行的数据帧，Jaap 的`data.table`方法 2 和变体`DT3`是最快的，比最慢的方法快很多。

值得注意的是，这两种`tidyverse`方法的时间安排和`splistackshape`解决方案非常相似，以至于很难区分图表中的曲线。它们是所有数据帧大小的基准测试方法中最慢的。

对于较小的数据帧，Matt 的基本 R 解决方案和`data.table`方法 4 的开销似乎比其他方法少。

### 代码

```
director <- 
  c("Aaron Blaise,Bob Walker", "Akira Kurosawa", "Alan J. Pakula", 
    "Alan Parker", "Alejandro Amenabar", "Alejandro Gonzalez Inarritu", 
    "Alejandro Gonzalez Inarritu,Benicio Del Toro", "Alejandro González Iñárritu", 
    "Alex Proyas", "Alexander Hall", "Alfonso Cuaron", "Alfred Hitchcock", 
    "Anatole Litvak", "Andrew Adamson,Marilyn Fox", "Andrew Dominik", 
    "Andrew Stanton", "Andrew Stanton,Lee Unkrich", "Angelina Jolie,John Stevenson", 
    "Anne Fontaine", "Anthony Harvey")
AB <- c("A", "B", "A", "A", "B", "B", "B", "A", "B", "A", "B", "A", 
        "A", "B", "B", "B", "B", "B", "B", "A")

library(data.table)
library(magrittr) 
```

### 为问题大小的基准运行定义函数`n`

```
run_mb <- function(n) {
  # compute number of benchmark runs depending on problem size `n`
  mb_times <- scales::squish(10000L / n , c(3L, 100L)) 
  cat(n, " ", mb_times, "\n")
  # create data
  DF <- data.frame(director = rep(director, n), AB = rep(AB, n))
  DT <- as.data.table(DF)
  # start benchmarks
  microbenchmark::microbenchmark(
    matt_mod = {
      s <- strsplit(as.character(DF$director), ',')
      data.frame(director=unlist(s), AB=rep(DF$AB, lengths(s)))},
    jaap_DT1 = {
      DT[, lapply(.SD, function(x) unlist(tstrsplit(x, ",", fixed=TRUE))), by = AB
         ][!is.na(director)]},
    jaap_DT2 = {
      DT[, strsplit(as.character(director), ",", fixed=TRUE), 
         by = .(AB, director)][,.(director = V1, AB)]},
    jaap_dplyr = {
      DF %>% 
        dplyr::mutate(director = strsplit(as.character(director), ",")) %>%
        tidyr::unnest(director)},
    jaap_tidyr = {
      tidyr::separate_rows(DF, director, sep = ",")},
    cSplit = {
      splitstackshape::cSplit(DF, "director", ",", direction = "long")},
    DT3 = {
      DT[, strsplit(as.character(director), ",", fixed=TRUE),
         by = .(AB, director)][, director := NULL][
           , setnames(.SD, "V1", "director")]},
    DT4 = {
      DT[, .(director = unlist(strsplit(as.character(director), ",", fixed = TRUE))), 
         by = .(AB)]},
    times = mb_times
  )
} 
```

### 针对不同的问题规模运行基准测试

```
# define vector of problem sizes
n_rep <- 10L^(0:5)
# run benchmark for different problem sizes
mb <- lapply(n_rep, run_mb) 
```

### 为绘图准备数据

```
mbl <- rbindlist(mb, idcol = "N")
mbl[, n_row := NROW(director) * n_rep[N]]
mba <- mbl[, .(median_time = median(time), N = .N), by = .(n_row, expr)]
mba[, expr := forcats::fct_reorder(expr, -median_time)] 
```

### 创建图表

```
library(ggplot2)
ggplot(mba, aes(n_row, median_time*1e-6, group = expr, colour = expr)) + 
  geom_point() + geom_smooth(se = FALSE) + 
  scale_x_log10(breaks = NROW(director) * n_rep) + scale_y_log10() + 
  xlab("number of rows") + ylab("median of execution time [ms]") +
  ggtitle("microbenchmark results") + theme_bw() 
```

### 会话信息和包版本（摘录）

```
devtools::session_info()
#Session info
# version  R version 3.3.2 (2016-10-31)
# system   x86_64, mingw32
#Packages
# data.table      * 1.10.4  2017-02-01 CRAN (R 3.3.2)
# dplyr             0.5.0   2016-06-24 CRAN (R 3.3.1)
# forcats           0.2.0   2017-01-23 CRAN (R 3.3.2)
# ggplot2         * 2.2.1   2016-12-30 CRAN (R 3.3.2)
# magrittr        * 1.5     2014-11-22 CRAN (R 3.3.0)
# microbenchmark    1.4-2.1 2015-11-25 CRAN (R 3.3.3)
# scales            0.4.1   2016-11-09 CRAN (R 3.3.2)
# splitstackshape   1.4.2   2014-10-23 CRAN (R 3.3.3)
# tidyr             0.6.1   2017-01-10 CRAN (R 3.3.2) 
```

* * *

¹[[这个热情洋溢的评论](https://stackoverflow.com/questions/43409756/r-efficiently-separate-groups-in-data-frame#comment73879642_43409986)][激起了我的好奇心*Brilliant！**快几个数量级！*对作为该问题的副本而关闭[的问题](https://stackoverflow.com/q/43409756/3817004)的答案。 *`tidyverse`*]

 ** * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-12-08T02:36:20.200

命名您的原始 data.frame `v`，我们有这个：

```
> s <- strsplit(as.character(v$director), ',')
> data.frame(director=unlist(s), AB=rep(v$AB, sapply(s, FUN=length)))
                      director AB
1                 Aaron Blaise  A
2                   Bob Walker  A
3               Akira Kurosawa  B
4               Alan J. Pakula  A
5                  Alan Parker  A
6           Alejandro Amenabar  B
7  Alejandro Gonzalez Inarritu  B
8  Alejandro Gonzalez Inarritu  B
9             Benicio Del Toro  B
10 Alejandro González Iñárritu  A
11                 Alex Proyas  B
12              Alexander Hall  A
13              Alfonso Cuaron  B
14            Alfred Hitchcock  A
15              Anatole Litvak  A
16              Andrew Adamson  B
17                 Marilyn Fox  B
18              Andrew Dominik  B
19              Andrew Stanton  B
20              Andrew Stanton  B
21                 Lee Unkrich  B
22              Angelina Jolie  B
23              John Stevenson  B
24               Anne Fontaine  B
25              Anthony Harvey  A 
```

注意使用`rep`来构建新的 AB 列。在这里，`sapply`返回每个原始行中的名称数。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2015-02-03T04:34:37.663

派对迟到了，但另一个通用的替代方法是使用`cSplit`我的“splitstackshape”包中的一个`direction`参数。将此设置`"long"`为获得您指定的结果：

```
library(splitstackshape)
head(cSplit(mydf, "director", ",", direction = "long"))
#              director AB
# 1:       Aaron Blaise  A
# 2:         Bob Walker  A
# 3:     Akira Kurosawa  B
# 4:     Alan J. Pakula  A
# 5:        Alan Parker  A
# 6: Alejandro Amenabar  B 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-26T18:21:37.840

```
devtools::install_github("yikeshu0611/onetree")

library(onetree)

dd=spread_byonecolumn(data=mydata,bycolumn="director",joint=",")

head(dd)
            director AB
1       Aaron Blaise  A
2         Bob Walker  A
3     Akira Kurosawa  B
4     Alan J. Pakula  A
5        Alan Parker  A
6 Alejandro Amenabar  B 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-22T17:28:40.097

目前可以推荐使用`strsplit`from *base产生的另一个基准将**列中的逗号分隔字符串拆分为单独的行*，因为它在各种大小范围内都是最快的：

```
s <- strsplit(v$director, ",", fixed=TRUE)
s <- data.frame(director=unlist(s), AB=rep(v$AB, lengths(s))) 
```

请注意，使用`fixed=TRUE`对时间有重大影响。

[![显示计算时间随行数的曲线](../Images/991213d3cfa19e6725f6a383a979fee0.png)](https://i.stack.imgur.com/y9B9h.png)

比较方法：

```
met <- alist(base = {s <- strsplit(v$director, ",") #Matthew Lundberg
   s <- data.frame(director=unlist(s), AB=rep(v$AB, sapply(s, FUN=length)))}
 , baseLength = {s <- strsplit(v$director, ",") #Rich Scriven
   s <- data.frame(director=unlist(s), AB=rep(v$AB, lengths(s)))}
 , baseLeFix = {s <- strsplit(v$director, ",", fixed=TRUE)
   s <- data.frame(director=unlist(s), AB=rep(v$AB, lengths(s)))}
 , cSplit = s <- cSplit(v, "director", ",", direction = "long") #A5C1D2H2I1M1N2O1R2T1
 , dt = s <- setDT(v)[, lapply(.SD, function(x) unlist(tstrsplit(x, "," #Jaap
   , fixed=TRUE))), by = AB][!is.na(director)]
#, dt2 = s <- setDT(v)[, strsplit(director, "," #Jaap #Only Unique
#  , fixed=TRUE), by = .(AB, director)][,.(director = V1, AB)]
 , dplyr = {s <- v %>%  #Jaap
    mutate(director = strsplit(director, ",", fixed=TRUE)) %>%
    unnest(director)}
 , tidyr = s <- separate_rows(v, director, sep = ",") #Jaap
 , stack = s <- stack(setNames(strsplit(v$director, ",", fixed=TRUE), v$AB)) #Jaap
#, dt3 = {s <- setDT(v)[, strsplit(director, ",", fixed=TRUE), #Uwe #Only Unique
#  by = .(AB, director)][, director := NULL][, setnames(.SD, "V1", "director")]}
 , dt4 = {s <- setDT(v)[, .(director = unlist(strsplit(director, "," #Uwe
   , fixed = TRUE))), by = .(AB)]}
 , dt5 = {s <- vT[, .(director = unlist(strsplit(director, "," #Uwe
   , fixed = TRUE))), by = .(AB)]}
   ) 
```

图书馆：

```
library(microbenchmark)
library(splitstackshape) #cSplit
library(data.table) #dt, dt2, dt3, dt4
#setDTthreads(1) #Looks like it has here minor effect
library(dplyr) #dplyr
library(tidyr) #dplyr, tidyr 
```

数据：

```
v0 <- data.frame(director = c("Aaron Blaise,Bob Walker", "Akira Kurosawa", 
                        "Alan J. Pakula", "Alan Parker", "Alejandro Amenabar", "Alejandro Gonzalez Inarritu", 
                        "Alejandro Gonzalez Inarritu,Benicio Del Toro", "Alejandro González Iñárritu", 
                        "Alex Proyas", "Alexander Hall", "Alfonso Cuaron", "Alfred Hitchcock", 
                        "Anatole Litvak", "Andrew Adamson,Marilyn Fox", "Andrew Dominik", 
                        "Andrew Stanton", "Andrew Stanton,Lee Unkrich", "Angelina Jolie,John Stevenson", 
                        "Anne Fontaine", "Anthony Harvey"), AB = c('A', 'B', 'A', 'A', 'B', 'B', 'B', 'A', 'B', 'A', 'B', 'A', 'A', 'B', 'B', 'B', 'B', 'B', 'B', 'A')) 
```

计算和计时结果：

```
n <- 10^(0:5)
x <- lapply(n, function(n) {v <- v0[rep(seq_len(nrow(v0)), n),]
  vT <- setDT(v)
  ti <- min(100, max(3, 1e4/n))
  microbenchmark(list = met, times = ti, control=list(order="block"))})

y <- do.call(cbind, lapply(x, function(y) aggregate(time ~ expr, y, median)))
y <- cbind(y[1], y[-1][c(TRUE, FALSE)])
y[-1] <- y[-1] / 1e6 #ms
names(y)[-1] <- paste("n:", n * nrow(v0))
y #Time in ms
#         expr     n: 20    n: 200    n: 2000   n: 20000   n: 2e+05   n: 2e+06
#1        base 0.2989945 0.6002820  4.8751170  46.270246  455.89578  4508.1646
#2  baseLength 0.2754675 0.5278900  3.8066300  37.131410  442.96475  3066.8275
#3   baseLeFix 0.2160340 0.2424550  0.6674545   4.745179   52.11997   555.8610
#4      cSplit 1.7350820 2.5329525 11.6978975  99.060448 1053.53698 11338.9942
#5          dt 0.7777790 0.8420540  1.6112620   8.724586  114.22840  1037.9405
#6       dplyr 6.2425970 7.9942780 35.1920280 334.924354 4589.99796 38187.5967
#7       tidyr 4.0323765 4.5933730 14.7568235 119.790239 1294.26959 11764.1592
#8       stack 0.2931135 0.4672095  2.2264155  22.426373  289.44488  2145.8174
#9         dt4 0.5822910 0.6414900  1.2214470   6.816942   70.20041   787.9639
#10        dt5 0.5015235 0.5621240  1.1329110   6.625901   82.80803   636.1899 
```

注意，方法如

```
(v <- rbind(v0[1:2,], v0[1,]))
#                 director AB
#1 Aaron Blaise,Bob Walker  A
#2          Akira Kurosawa  B
#3 Aaron Blaise,Bob Walker  A

setDT(v)[, strsplit(director, "," #Jaap #Only Unique
  , fixed=TRUE), by = .(AB, director)][,.(director = V1, AB)]
#         director AB
#1:   Aaron Blaise  A
#2:     Bob Walker  A
#3: Akira Kurosawa  B 
```

`strsplit`为`unique` *director*返回 a并且可能与

```
tmp <- unique(v)
s <- strsplit(tmp$director, ",", fixed=TRUE)
s <- data.frame(director=unlist(s), AB=rep(tmp$AB, lengths(s))) 
```

但据我了解，这没有被问到。*

# pandas - 如何计算熊猫时间戳列表的差异？

> ID：13773777
> 
> 赞同：1
> 
> 时间：2012-12-08T02:14:19.207
> 
> 标签：pandas

当我有这样的熊猫时间戳时：

```
list(uni_index)

Out[95]:

[<Timestamp: 2011-04-16 00:00:01>,
 <Timestamp: 2011-04-16 00:00:21>,
 <Timestamp: 2011-04-16 00:00:46>,
 <Timestamp: 2011-04-16 00:01:08>,
 <Timestamp: 2011-04-16 00:01:33>,
 <Timestamp: 2011-04-16 00:01:55>,
 ... 
```

我将如何获得这些时间戳的差异？

我为它找到了一个像这样的野蛮人：

```
np.diff(uni_index.values.astype(int)) 
```

但如果可以直接从 pandas 获取 datetime.timedeltas 中的答案，那就太好了。也许是吧，我只是还没找到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T11:34:11.790

如果您使用 pandas Series 而不是列表，则可以使用它的[`diff`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.diff.html)方法：

```
s = Series(uni_index)
s.diff() 
```

例如：

```
In [45]: s
Out[45]: 
0    2012-02-01 10:00:00
1    2012-02-01 10:01:00
2    2012-02-01 10:02:00
3    2012-02-01 10:03:00

In [46]: s.diff()
Out[46]: 
0        NaN
1    0:01:00
2    0:01:00
3    0:01:00 
```

# c++ - 输入字符串 C++ 双 chevron

> ID：13773783
> 
> 赞同：0
> 
> 时间：2012-12-08T02:15:08.367
> 
> 标签：c++, visual-c++, shunting-yard

我目前正在尝试在“<<”和“>>”的字符串中使用双 V 形来表示位移。但是，我的程序似乎无法识别对任何输入使用双 V 形。如果我将其更改为任何其他字符串，它会完美运行。

derpleft 会起作用，但是“<<”不起作用。

```
keywords_["derpleft"]  = keywords_["<<"] = make<BitShiftLeft>();
keywords_["derpright"] = keywords_[">>"] =  make<BitShiftRight>();

dictionary_type keywords_;

typedef std::map<string_type,Token::pointer_type>   dictionary_type;

typedef std::string string_type; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:56:46.593

我只是不明白这个说法：

```
keywords_["derpleft"]  = keywords_["<<"] = make<BitShiftLeft>(); 
```

看来您想要`<<`并`derpleft`指向（存储）`make<BitShiftLeft>`调用返回的值。在那种情况下，为什么不简单地如下：

```
keywords_["derpleft"]  = make<BitShiftLeft>();
keywords_["<<"] =  make<BitShiftLeft>(); 
```

您可以将`make`call 的值存储在某个局部变量中（`auto`首选关键字）。

最重要的是，你没有提到问题是什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:29:17.470

我忘了关闭这个线程，但问题是我没有在我的一个编辑器函数中将布尔值设置为 true。这只是我创建的一个逻辑错误。

# c - 包装类成员访问

> ID：13773785
> 
> 赞同：0
> 
> 时间：2012-12-08T02:15:22.187
> 
> 标签：c, struct, queue, wrapper, member

所以我有一个带有哨兵节点的通用双向链接队列结构：

```
// Queue node:
struct _QNode {
    struct _QNode *prev;     /* Previous list element. */
    struct _QNode *next;     /* Next list element.    */
};
typedef struct _QNode QNode;

// Queue object:
struct _Queue {
    QNode front;    // sentinel node at the front of the queue
    QNode rear;     // sentinel node at the tail of the queue
}; 
```

还有一个“管道胶带”结构，用于将整数值加载到队列节点中

```
struct _Tape {
    int32_t payload;    // user data field
    QNode node;       // generic node
}; 
```

以及结合了两者的包装类 IntegerQueue。

我的问题是如何访问要弹出的给定节点的有效负载变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T04:52:13.547

有了你所拥有的，你可以构建漂亮的 QNode 列表。但是如果你有一个这样的 QNodes 队列，你只能访问其中的 QNodes，而不是你的 Tape，至少不能以公认的方式访问（你可以争辩说，每个 QNode 都包含在 Tape-struct 中，因此减去一些从 QNode 的地址获取磁带地址的值，但如果其他人看到它，你就会被枪杀）。
所以我认为你必须以某种方式将你的有效载荷放入 QNodes。如果您将使用 C++，那么您可以使用模板以通用方式执行此操作，在这里您可以使用宏，或者在 Queue 中使用一个 void 指针，然后将其转换为您的有效负载类型（这再次让您射击）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:36:16.507

处理事情的正统方式是：

```
typedef struct QNode QNode;
struct QNode
{
    QNode *prev;     /* Previous list element. */
    QNode *next;     /* Next list element.     */
    void  *data;     /* Data for this node     */
}; 
```

这可用于存储指向任何数据类型（结构或简单类型）的指针。然后，您可以为此类泛型类型围绕队列创建类型安全的包装器。请注意，这是非侵入性的；它不会改变排队的类型，这通常是有益的。一个警告：如果您打算存储`int32_t`，那么指针将使用至少与数据一样多的空间（64 位机器上的指针使用 8 个字节，而数据使用 4 个字节）。`QNodeInt32`使用专门的类型 ( ) 直接存储值会更经济。泛型通常会占用空间。

# android - 从我的移动设备读取 android 中的 txt 文件

> ID：13773797
> 
> 赞同：1
> 
> 时间：2012-12-08T02:17:42.247
> 
> 标签：android, file

我的桌面上有 4 个 txt 文件。我创建了一个 android 应用程序，我将在其中读取这些文件并在 EditText 中打印这些文件，但这些文件是 ddms -> myapp -> data -> files 中的药物。

所以使用模拟器我的应用程序可以正常播放，但是在我的手机中，不要读取这些文件并关闭应用程序。

这是我的代码：

```
 public String ReadFileTrack1()
    {
      FileInputStream fIn = null;
      InputStreamReader isr = null;
      char[] inputBuffer = new char[900];
      String data = null;

      try
      {
         fIn = openFileInput(tracks[0]+".txt");
         isr = new InputStreamReader(fIn);
         isr.read(inputBuffer);

         data = new String(inputBuffer);
      }   

      catch (Exception e) 
      {
         e.printStackTrace();
      }

      finally 
      {
         try 
         {
             isr.close();
             fIn.close();
         } 

         catch (IOException e) 
         {
             e.printStackTrace();
         }
      }

      return data;
    } 
```

代码是正确的，但不要在我的手机上玩。我能为这个问题做些什么？如何在我的手机中加载这 4 个 txt 文件，以便我的应用程序正常播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:08:27.153

您不能在安全设备上写入应用程序的私有存储目录​​，除非应用程序首先创建一个子目录并授予其他人对其的写入权限（这通常是一个坏主意）。

将文件放在外部存储（sdcard）上，或者在构建时将它们打包为 apk 中的资产。

（有一个例外：如果应用程序是可调试的，那么可以使用 adb shell 的 run-as 工具以应用程序用户的身份将某些内容复制到私有目录中，但这很晦涩，不是您想要使用的内容不适用于最终的应用程序。通常，该功能用于另一个方向，以检查正在开发的应用程序在其无法正常工作时对其文件或数据库所做的事情）

# php - BBCode - 正则表达式仅匹配属性上的一个引号或两个引号

> ID：13773799
> 
> 赞同：1
> 
> 时间：2012-12-08T02:17:59.933
> 
> 标签：php, regex, bbcode

我正在尝试构建一个匹配 BBCode 属性的正则表达式。我希望它匹配不带引号 ( `attr=value`) 的属性以及带有引号 ( ) 的属性`attr="value"`，但如果只有一个标记 (`attr="value`或`attr=value"`) 则不匹配。

我设法接近使用此正则表达式`/\[size\=((?=")"(.*?)"|([^"]*))\](.*?)\[\/size\]/is`（用于大小标签）的解决方案，使用前瞻，但它将引用和未引用属性的匹配放在不同的索引上。这是一个方案：

```
+-----------------------+----------+----------+----------+----------+
| Input                 | Match #1 | Match #2 | Match #3 | Match #4 |
+-----------------------+----------+----------+----------+----------+
| [size="7"]txt[/size]  | "7"      | 7        |          | txt      |
+-----------------------+----------+----------+----------+----------+
| [size=7]txt[/size]    | 7        |          | 7        | txt      |
+-----------------------+----------+----------+----------+----------+ 
```

虽然这不是一个主要问题，但我想知道是否有任何 wya 可以将它们匹配到相同的索引。

**背景资料：**

基本上，我正在努力改进 BBCode 解析器。至于现在，它只允许放置不带引号的属性`"`。现在，这给它带来了很多限制，所以我正在添加对引用属性的支持。问题是我不能打破向后兼容性，所以我必须想出适用于这两种情况的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:05:49.410

由于与您的第一种情况匹配的组必须与与第二种情况匹配的组不同，我不相信有任何方法可以让它们与相同的索引/组匹配。

但是，看到像下面这样解决这个问题的代码并不罕见：

```
attr = matches[1] or matches[2] 
```

由于您可以肯定地知道这些元素中最多有 1 个是非空的，因此`or`逻辑有效。

# php - 如果用户的行包含值，则回显 html

> ID：13773800
> 
> 赞同：2
> 
> 时间：2012-12-08T02:18:03.207
> 
> 标签：php, if-statement, joomla, echo

我在一个 Joomla 网站上工作，当用户在程序中完成某个测验时，我想在他们的个人资料中显示验证图形和文本。我已经完成了大部分代码，但我无法让它做我想做的事。这是我所拥有的：

```
        $db = &JFactory::getDBO();

        $uri = JURI::base();
        $my =& JFactory::getUser();
        $user =& CFactory::getActiveProfile();

        $query = '选择 distinct(a.id)、a.title、a.alias、a.description、a.created、a.responses、c.title 作为类别'
            . ' from #__quiz_quizzes a left join #__quiz_categories c on a.catid=c.id left join #__quiz_responses r on a.id=r.quiz_id'
            . ' 其中 r.created_by='.$user->id.' a.published=1 order by a.created desc';
        $db->setQuery($query, 0, 10);
        $items = $db->loadObjectList();
            $menu = &JSite::getMenu();
            $mnuitems = $menu->getItems('link', 'index.php?option=com_communityquiz&view=quiz');
            $itemid = isset($mnuitems[0]) ？'&Itemid='.$mnuitems[0]->id : '';
    if (strpos($itemid,'3')) {
    echo " 代表已验证";
    } 别的 {
    echo " Rep is not Verified {S​​HOW_FOR profile_owner} 如何获得验证{/SHOW_FOR}{HIDE_FOR profile_owner} 这是什么意思？{/HIDE_FOR}";
    回声“”；
    }

```

麻烦的是，如果有人用 id '3' 参加过测试，它会说他们已经过验证。如果 quiz_id 等于“3”，并且 created_by 字段与`$user`. 我的代码取自原始插件，对于这么小的功能甚至可能不需要所有代码，不胜感激帮助简化！ [数据库表截图](http://www.intellirep.com/images/data_tables_quiz_responses.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:07:19.263

我想我是通过 Stack Overflow 上其他论坛条目的组合找到它的。这有效：

```
 $user   =& CFactory::getActiveProfile();
    $result = mysql_query("SELECT COUNT(*) AS num_rows FROM hxlth_quiz_responses WHERE created_by='{$user->id}' and quiz_id='3' and score='3' LIMIT 1;");
    $row = mysql_fetch_array($result);
    if($row["num_rows"] > 0){
    echo "<div style='margin: 0 15px 15px 0; padding: 5px; box-shadow: rgba(0,0,0,0.4) 1px 1px; border: 1px solid #cccccc;'><img src='/images/check1.jpg' align='absmiddle' width='22' height='21' /> Rep is Verified</div>";
    } else {
    echo "<div style='margin: 0 15px 15px 0; padding: 5px; box-shadow: rgba(0,0,0,0.4) 1px 1px; border: 1px solid #cccccc;'><img src='/images/x1.jpg' align='absmiddle' width='21' height='21'> Rep is not Verified {SHOW_FOR profile_owner}<a href='index.php?option=com_communityquiz&view=quiz&task=respond&id=3'><font size='1'> How to get verified</font></a>{/SHOW_FOR}{HIDE_FOR profile_owner} <a href='index.php?option=com_communityquiz&view=quiz&task=respond&id=3'><font size='1'> What does this mean?</font>{/HIDE_FOR}";
    echo "</a></div>";
    } 
```

它现在可以正确显示图形和文本，我什至加入了 AND 分数变体，以确保他们实际上通过了测验！

# ruby-on-rails - 新型号索引页面，显示其他型号索引页面

> ID：13773804
> 
> 赞同：0
> 
> 时间：2012-12-08T02:18:23.600
> 
> 标签：ruby-on-rails, routing, scaffolding

我已经生成了新模型：

> rails 生成脚手架站点

然后我试图显示所有条目，但不是显示 /sites 它显示 /devices

```
> rake routes
>   test_on GET    /test/on(.:format)                test#on
         test_off GET    /test/off(.:format)               test#off
         power_on GET    /power/on(.:format)               power#on
        power_off GET    /power/off(.:format)              power#off
      power_cycle GET    /power/cycle(.:format)            power#cycle
       home_index GET    /home/index(.:format)             home#index
      devices_new GET    /devices/new(.:format)            devices#new
  devices_destroy DELETE /devices/destroy(.:format)        devices#destroy
    turnon_device PUT    /devices/:id/turnon(.:format)     devices#turnon
   turnoff_device PUT    /devices/:id/turnoff(.:format)    devices#turnoff
powercycle_device PUT    /devices/:id/powercycle(.:format) devices#powercycle
  getsites_device GET    /devices/:id/getsites(.:format)   devices#getsites
          devices GET    /devices(.:format)                devices#index
                  POST   /devices(.:format)                devices#create
       new_device GET    /devices/new(.:format)            devices#new
      edit_device GET    /devices/:id/edit(.:format)       devices#edit
           device GET    /devices/:id(.:format)            devices#show
                  PUT    /devices/:id(.:format)            devices#update
                  DELETE /devices/:id(.:format)            devices#destroy
            users GET    /users(.:format)                  users#index
                  POST   /users(.:format)                  users#create
         new_user GET    /users/new(.:format)              users#new
        edit_user GET    /users/:id/edit(.:format)         users#edit
             user GET    /users/:id(.:format)              users#show
                  PUT    /users/:id(.:format)              users#update
                  DELETE /users/:id(.:format)              users#destroy
            sites GET    /sites(.:format)                  sites#index
                  POST   /sites(.:format)                  sites#create
         new_site GET    /sites/new(.:format)              sites#new
        edit_site GET    /sites/:id/edit(.:format)         sites#edit
             site GET    /sites/:id(.:format)              sites#show
                  PUT    /sites/:id(.:format)              sites#update
                  DELETE /sites/:id(.:format)              sites#destroy
             root        /                                 devices#index 
```

感谢任何帮助谢谢你，D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T04:46:31.760

你是什​​么意思？你有两个：

```
 devices GET    /devices(.:format)                devices#index
        sites GET    /sites(.:format)                  sites#index 
```

你能对你的问题写一些更好的解释吗？

# r - 如何重现置信区间图？

> ID：13773806
> 
> 赞同：4
> 
> 时间：2012-12-08T02:18:29.683
> 
> 标签：r, graphics, confidence-interval

我需要重现类似于所附图像的图表。我希望用这个图形来比较不同比例的置信区间。如何使用 R 生成附加图形？任何正确方向的指针将不胜感激。

![在此处输入图像描述](../Images/689b527a5884d6469e11a3921bddba77.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T06:08:18.060

如果没有上下文和可重复的示例，很难给出一个好的答案。但我觉得剧情很有趣。

这是我对ggplot2的尝试。我仍然对 alpha layer 有一些问题，但情节的主要思想就在这里。

一些数据

```
structure(list(scen = 1:6, 
               name = c("I", "II", "III", "IV", "V","VI"), 
               ymin = c(0.06, -0.102, 0.487, 0.116, -0.436, 0.021), 
               ymax = c(-0.231,0.135, 0.117, 0.338, -0.347, -0.025)), 
          .Names = c("scen", "name", "ymin", "ymax"), 
          row.names = c(NA, 6L), 
          class = "data.frame") 
```

数据看起来像这样

数据

```
 scen name   ymin   ymax   y
1    1    I  0.060 -0.231   I
2    2   II -0.102  0.135  II
3    3  III  0.487  0.117 III
4    4   IV  0.116  0.338  IV
5    5    V -0.436 -0.347   V
6    6   VI  0.021 -0.025  VI 
```

这是结果

![在此处输入图像描述](../Images/7783cc395875f0d1fa8e0f2267fe38c7.png)

```
theme_new <- theme_set(theme_bw())
p <- ggplot(data=dat) +
  geom_segment(aes(x=ymin,y=scen,xend=ymax,yend=scen),
               arrow=arrow(length=unit(0.3,"cm"),
                           ends='both'),size=1) 

p <- p+  geom_rect(xmin=max(dat$ymin)/2,
                    xmax=min(dat$ymax)/2,
                    ymin=0,
                    ymax=max(dat$scen)+1,
                    alpha=0.2,fill='grey')

p <- p + geom_text(aes(x=(ymin+ymax)/2,
                       y=scen+0.2,label =name),size=6)

p<- p + coord_cartesian(ylim=c(0,max(dat$scen)+3))+
  xlab(expression(P[1]-P[0]))+
  theme( 
    axis.ticks = element_blank(),
    axis.text.y = element_blank(),
    axis.text.x = element_blank(),
    axis.title.x = element_text(face="bold",  size=20))

p <- p + geom_vline(linetype   ='dashed',
                    xintercept = mid.dash)

p <- p + geom_text(aes(x= mid.dash,
                       y = max(dat$scen)+2, 
                       label="Zone of Indifference", 
                       color="NA*"),rotate=180)
p <- p + theme(legend.position = "none") 
```

p

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-28T17:51:02.933

这是对 agstudy 答案的跟进（请投票支持他的答案）。评论太长了，太不同了，无法证明我编辑他的答案是合理的。此外，小事情仍然需要调整以看起来像教科书人物。下次我做这种事情时，我会尝试使用`tikzDevice`来让字体、下标等正常工作。我已经添加了花括号，但是 1）我更喜欢没有它的图，并且 2）我无法使用正确的字体，并且大括号在 PDF 中看起来很糟糕（我使用导出工具`ggsave()`将图像保存为 PNG ） `RStudio`.

```
## Confidence interval segments with ggplot 
# https://stackoverflow.com/questions/13773806/

# Data
d = structure(list(index = 1:6, name = c("I", "II", "III", "IV", 
"V", "VI"), xmin = c(0.06, -0.102, 0.487, 0.116, -0.436, 0.121
), xmax = c(-0.231, 0.135, 0.117, 0.338, -0.347, -0.055)), .Names = c("index", 
"name", "xmin", "xmax"), row.names = c(NA, 6L), class = "data.frame")

# Plot Data
x1 = -0.5              # lower limit of x-axis
x2 = +0.5              # upper limit of x-axis
y1 = -0.5              # lower limit of y-axis
y2 = max(d$index)+2    # upper limit of y-axis
z0 = 0                 # center of indifference zone
z1 = -0.25             # lower limit of indifference zone
z2 = +0.25             # upper limit of indifference zone
z3 = min(d$index)-0.5  # lower limit of indifference zone
z4 = max(d$index)+0.5  # lower limit of indifference zone

df = cbind(d, data.frame(z0 = z0, z1 = z1, z2 = z2, x1 = x1, x2 = x2, z3 = z3, z4 = z4)) 

# Plot confidence intervals
library(ggplot2) 
ggplot(data = df) +
    # extend the y-axis limits to make room for label
    coord_cartesian(xlim = c(x1, x2), ylim = c(y1, y2)) +
    # zone of indifference layer:
    geom_rect(aes(xmin = z1, xmax = z2, ymin = z3, ymax = z4),
        alpha = 0.5,
        fill = "grey") +
    # vertical line to indicate the true mean
    geom_segment(aes(x = z0, xend = z0, y = z3, yend = z4), linetype = 2) + 
    # confidence intervals with arrows: 
    geom_segment(aes(x = xmin, xend = xmax, y = index, yend = index),
        arrow = arrow(length = unit(0.3, "cm"), ends = "both"), size = 1) +
    # labels above the confidence intervals: 
    geom_text(aes(x = (xmin+xmax)/2, y = index+0.2, label = name), size = 4) +
    # make curly bracket - tweak vjust, hjust and size manually to center it!
    geom_text(aes(x = z0, y = z4, label = "{"), angle = 270, vjust = 0.38, hjust = 1, size = 80, fontface = "bold", family = 'Helvetica Neue UltraLight') + 
    # label above the indifference layer
    annotate("text", x = z0, y = y2, hjust = 0.5, vjust = 1,
        label = "Zone of Indifference\n", fontface = "bold", size = 5) +
    # label below the indifference layer 
    annotate("text", x = z0, y = y1, hjust = 0.5, 
        label = "P[1]-P[0]", parse = TRUE, # bold.italic does not survive parse=TRUE
        family = "Times", fontface = "bold.italic", size = 5) + 
    # tweak x-axis and ticks | get rid of default axis, ticks, labels, etc.
    scale_x_continuous(breaks = c(x1, x2), 
                    labels = c("-x", "+x")) +  # set breaks + labels
    #theme_void() +  # should have worked, but...
    theme(panel.background = element_rect(fill = NA, colour = NA)) +
    # insert tweaked horizontal x-axis + ticks
    theme(panel.grid = element_blank()) + 
    theme(panel.border = element_blank()) + # may want to keep
    theme(axis.line.y = element_blank()) +
    theme(axis.title.y = element_blank()) +
    theme(axis.ticks.y = element_blank()) +
    theme(axis.text.y = element_blank()) +
    theme(axis.line.x = element_line(size = 1, linetype = "solid")) +
    theme(axis.title.x = element_blank()) +
    theme(axis.ticks.x = element_line(size = 1)) +
    theme(axis.ticks.length = unit(.3, "cm")) +
    theme(axis.text.x = element_text(size = 14)) 

ggsave("ggplot-ci-indifference.pdf", device = cairo_pdf)
## the curly-brace does not print properly! 
```

[![在此处输入图像描述](../Images/0e48082ec0690b42e6362d3b7fec4bf5.png)](https://i.stack.imgur.com/LKVzf.png)

**没有花括号会更漂亮**。

信用：对于花括号，请参阅：[如何在图表中添加大括号？](https://stackoverflow.com/questions/6178763/how-to-add-braces-to-a-graph/43325140)

# c# - System.Net.Mail.SmtpException：SMTP 服务器需要安全连接或客户端未通过身份验证

> ID：13773810
> 
> 赞同：16
> 
> 时间：2012-12-08T02:18:50.050
> 
> 标签：c#, smtp, smtpclient

我正在尝试从 C# 应用程序发送带有我网站地址的电子邮件。
直到最近，这几个月都运行良好。（也许我的提供者改变了一些东西或者其他人改变了设置）

这是代码：

```
 private void sendEmail(Email invite) {
            MailMessage mail = new MailMessage();
            SmtpClient SmtpServer = new SmtpClient(smtpServerName);
            mail.From = new MailAddress(emailUsername);

            mail.To.Add(invite.RecipientEmail);
            mail.Subject = invite.MessageSubject;
            mail.Body = invite.MessageBody;

            SmtpServer.UseDefaultCredentials = false;
            SmtpServer.Port = 587;
            SmtpServer.Credentials = new System.Net.NetworkCredential(emailUsername, emailPassword);
//          SmtpServer.EnableSsl = true;
            SmtpServer.Send(mail);
        } 
```

这是错误：

> SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应是：需要 SMTP 身份验证。

看着其他问题，我尝试了他们的建议，使`SmtpServer.EnableSsl = true`. 这根本不起作用。它给出了以下内容：

> System.Net.Mail.SmtpException：服务器不支持安全连接。

我猜我应该禁用 SSL 并按照以前的方式使用它。

任何建议如何使电子邮件发送再次工作？

**编辑**
我尝试过但没有`SmtpServer.UseDefaultCredentials = false;`
尝试过将其设置为 true：`SmtpServer.UseDefaultCredentials =true;`
我尝试过评论该行以及以下内容`//SmtpServer.Credentials = new System.Net.NetworkCredential(emailUsername, emailPassword);`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T19:44:46.723

该错误消息通常由以下原因之一引起：

*   连接设置不正确，例如为安全或非安全连接指定了错误的端口
*   凭据不正确。我会验证用户名和密码组合，以确保凭据正确。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T02:44:15.480

我认为你必须设置`DeliveryMethod = SmtpDeliveryMethod.Network`

这个目前正在我的电脑上工作，我刚刚检查过，工作得很好，试试这个

```
using System.Net;
using System.Net.Mail;

var fromAddress = new MailAddress("from@gmail.com", "From Name");
var toAddress = new MailAddress("to@example.com", "To Name");
const string fromPassword = "fromPassword";
const string subject = "Subject";
const string body = "Body";

var smtp = new SmtpClient
           {
               Host = "smtp.gmail.com",
               Port = 587,
               EnableSsl = true,
               DeliveryMethod = SmtpDeliveryMethod.Network,
               UseDefaultCredentials = false,
               Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
           };
using (var message = new MailMessage(fromAddress, toAddress)
                     {
                         Subject = subject,
                         Body = body
                     })
{
    smtp.Send(message);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-02-27T06:59:30.663

如果您确定您的用户名和密码正确，但仍然出现错误，则表示 Gmail 已阻止您的应用程序。

[您应该在与您的 gmail 帐户相关的以下链接](https://www.google.com/settings/security/lesssecureapps)中选中“打开”单选按钮。然后它会正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-20T03:50:32.967

如果您在服务器上部署应用程序，请尝试在您的服务器中登录您的 google 帐户。奇怪的是，smtp 电子邮件发送应用程序在我的桌面上运行良好。不在服务器中。这可能会受到 google 安全机制工作方式的影响。

# emacs - 如何使鼠标单击设置点，而不是 aquamacs 中的标记

> ID：13773814
> 
> 赞同：2
> 
> 时间：2012-12-08T02:19:41.533
> 
> 标签：emacs, mouse, aquamacs

在 Aquamacs 2.2 中，我可以执行以下操作：

1) 用 C-SPACE 设置标记

2）点击某处设置点

因此，这将定义该区域。从 Aquamacs-2.3 开始，这种行为就消失了：单击设置标记和点。有没有办法定制 aquamacs 以拥有旧的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:57:13.223

对于 Emacs 24，这对我有用（也可能适用于 Aquamacs）：取消设置`<down-mouse-1>`事件的绑定，这是设置标记的原因（但*不是*点；点由不同的绑定设置，对于 up -事件`<mouse-1>`）。

这似乎提供了您所要求的行为：在设置标记后单击鼠标设置`C-space`点，并且可以看到突出显示的相应区域。

* * *

我通过阅读上述绑定的帮助来确定这一点，方法是： `M-x help``k``click`，并阅读`*Help*`文本，解释`<down-mouse-1>`绑定到命令`mouse-drag-region`（设置标记）。

然后，我通过执行以下操作以交互方式禁用绑定来测试结果行为： `M-x global-unset-key`然后单击；但是以编程方式执行它可能更安全，例如在暂存缓冲区中，通过评估：

```
(global-unset-key [down-mouse-1]) 
```

如果您喜欢由此产生的行为，那么只需将上面的行复制到您的`.emacs`

* * *

使用上述解决方案似乎确实会导致鼠标拖动有点时髦，因为它不会在拖动过程中突出显示所选区域（但是一旦放手，您仍然可以看到该区域是什么，您现在可以通过单击微调其终点，这在某些情况下可能很有用。）

# php - 更改 PhpMyAdmin Cookie 路径

> ID：13773815
> 
> 赞同：1
> 
> 时间：2012-12-08T02:19:55.210
> 
> 标签：php, session, cookies, phpmyadmin

PhpMyAdmin 将 cookie 路径设置为安装 PMA 的路径。

*   因此，如果它安装在*/pma/*中，它会将 cookie 路径设置为*/pma/*。

但是，我有注销代码，需要访问会话才能将用户与其他系统会话一起从 PMA 中注销，但它位于*/*中。

这当然不起作用，因为浏览器不允许在 cookie 路径之外访问 cookie。

在 php.ini 中设置默认 cookie 路径不起作用，因为 PMA 在设置将覆盖 php.ini 设置的 cookie 时指定了自己的路径。

有没有办法通过设置配置选项或可能扩展 PMA 类将 PMA 设置的默认 cookie 路径更改为*/ ？*我还读过一个叫做猴子补丁的东西[runkit](http://docs.php.net/manual/en/book.runkit.php)，它可以做到吗？如果有怎么办？

编辑 PMA 核心文件不是一种选择，因为我希望在升级之间进行更改。如果可以将其编码到 config.inc.php 中，它将在升级之间保持不变。

我通过 config.inc.php 尝试过的一些事情：

*   使用相同的名称和 sessionid 设置我自己的 cookie 不起作用，因为 cookie 被 PHP 处理中进一步设置的一个 PMA 覆盖。
*   更改 $_SERVER['PHP_SELF'] 的值，这是用于确定路径的值之一，不起作用，不知道为什么。
*   我试图扩展 PMA_Config 类，特别是 getCookiePath() 方法，但没有工作，因为我不知道如何实例化它，所以它覆盖了 PMA_Config 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:48:49.807

我最终使用了PMA的[Signon authtype](http://wiki.phpmyadmin.net/pma/Auth_types#signon)

然后我的 PMA 配置变为：

```
$cfg['Servers'][$i]['auth_type']     = 'signon';
$cfg['Servers'][$i]['SignonSession'] = 'YOUR_SESSION_ID'; // You can use ini_get('session_name') if you prefer
$cfg['Servers'][$i]['SignonURL']     = 'FULL_URL'; // URL it will redirect unauthenticated users
$cfg['Servers'][$i]['LogoutURL']     = 'FULL_URL'; // URL where user will be redirected after logout 
```

在我的 SSO 脚本中，我在登录系统的其余部分时添加了这些行，因此它也将同时登录到 PMA。

```
$_SESSION['PMA_single_signon_user'] = 'MY_PMA_USERNAME';
$_SESSION['PMA_single_signon_password'] = 'MY_PMA_PASSWORD'; 
```

现在我不需要访问 PMA cookie，因为它使用主系统设置的 SID cookie。要注销主系统和 PMA，我会定期注销 cookie：

```
$_SESSION = array();
setcookie(session_name(), '', time() - 3600);
session_destroy(); 
```

# model - Yii 没有通过给定属性找到模型

> ID：13773817
> 
> 赞同：0
> 
> 时间：2012-12-08T02:21:10.037
> 
> 标签：model, yii, find

我的密码没有加密。我将它用于一个简单的网站。无论如何，当我尝试通过密码搜索模型时

```
Yii::log("Password: " . CVarDumper::dumpAsString($this->password),'debug');
$record = Guest::model()->findByAttributes(array('password'=>$this->password)); 
```

当我登录`$this->password`时，它确实显示它已初始化但`$record`返回 null。但是，如果我通过它的 ID 找到它，它确实会返回一些东西。我还尝试在 phpmyadmin 上手动注入 SQL，它确实有效。

对不起，这里的新手。

任何输入将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:26:56.717

您的问题可能是 defaultScope() 中未列出“密码”

见这里：[Yii ActiveRecord 字段只返回最近添加的列的默认值](https://stackoverflow.com/questions/13550296/yii-activerecord-field-only-returns-default-value-for-recently-added-column)

你能为客人展示你的模型吗？

# mysql - 如何使用 mysql 匹配第二个表中的多种可能性？

> ID：13773818
> 
> 赞同：0
> 
> 时间：2012-12-08T02:21:29.460
> 
> 标签：mysql

我不完全确定如何提出这个问题，所以我将首先提供一个示例表和一个示例输出，然后对我正在尝试完成的内容进行更全面的解释。

想象一下，我有两张桌子。第一个是公司列表。其中一些公司由于从不同来源导入并不断更新而出现重复条目​​。例如，公司表可能如下所示：

```
| rawName           | strippedName |
| Kohl's            | kohls        |
| kohls.com         | kohls        |
| kohls Corporation | kohls        | 
```

所以在这种情况下，我们有来自三个不同来源的信息。为了让我的程序了解这些来源中的每一个都是同一个商店，我创建了剥离的名称列（我也使用它来创建 URL 和诸如此类的东西）。

在第二个表中，我们有关于交易、优惠券、送货优惠等的信息。但是，由于这些信息来自不同的来源，因此最终得到了我们上面确定的三个不同的 rawName。例如，第二个表可能如下所示：

```
| merchantName      | dealInformation       |
| kohls.com         | 10% off everything... |
| kohl's            | Free shipping on...   |
| kohls corporation | 1 Day Flash Sale!     |
| kohls.com         | Buy one get one...    | 
```

所以在这里我们有四个条目都来自同一家公司。但是，当网站上的用户访问 Kohls 的列表时，我希望它显示来自每个来源的所有条目。

这是我目前拥有的，但它似乎并没有起到作用。这似乎只有在我将该子查询中的 LIMIT 设置为 1 时才有效，以便它只带回一个 rawNames。我需要它来匹配所有的 rawNames。

```
SELECT * FROM table2
WHERE merchantName = (SELECT rawName FROM table1 WHERE strippedName = '".$strippedName."') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:25:45.490

最快的解决方法是将您的替换`mercahantName =`为`merchantName IN`

```
SELECT * FROM table2
WHERE merchantName IN (SELECT rawName FROM table1 WHERE strippedName = '".$strippedName."') 
```

运算符需要在`=`每一侧都有一个值 -`IN`关键字将一个值与多个值匹配。

# python - urlparse 的奇怪行为

> ID：13773821
> 
> 赞同：1
> 
> 时间：2012-12-08T02:22:34.747
> 
> 标签：python, url, urlparse

我想知道我在 python 的 urlparse 中看到的一些奇怪行为是否有已知的解决方法。

以下是 python interpeter 中几行的一些结果：

```
>>> import urlparse
>>> urlparse.parse_qsl('https://localhost/?code=bork&charlie=brown')
[('https://localhost/?code', 'bork'), ('charlie', 'brown')] 
```

在上面的例子中，为什么第一个值的键是“https://localhost/?code”？它不应该只是“代码”吗？注意： parse_qs 具有相同的不良行为。

```
>>> urlparse.urlparse('abcd://location/?code=bork&charlie=brown')
ParseResult(scheme='abcd', netloc='location', path='/?code=bork&charlie=brown', params='', query='', fragment='')
>>> urlparse.urlparse('https://location/?code=bork&charlie=brown')
ParseResult(scheme='https', netloc='location', path='/', params='', query='code=bork&charlie=brown', fragment='') 
```

在上面的示例中，请注意查询字符串并不总是被放入查询值中。为什么协议很重要？查询字段不应该总是得到查询字符串吗？使用“ftp”或其他众所周知的协议进行测试似乎也令人不快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T02:29:33.410

[`urlparse.parse_qsl`](http://docs.python.org/2/library/urlparse.html#urlparse.parse_qsl)(and [`urlparse.parse_qs`](http://docs.python.org/2/library/urlparse.html#urlparse.parse_qs)) 是用于请求的查询部分的方法（后面的字符串`?`）。

也许您想使用一种首先了解整个 URL 的方法 ( [`urlparse.urlparse`](http://docs.python.org/2/library/urlparse.html#urlparse.urlparse))，然后将查询从结果传递到`urlparse_qsl`：

```
>>> import urlparse
>>> myurl = urlparse.urlparse('https://localhost/?code=bork&charlie=brown')
>>> print myurl
ParseResult(scheme='https', netloc='localhost', path='/', params='', query='code=bork&charlie=brown', fragment='')
>>> print myurl.scheme
https
>>> print urlparse.parse_qs(myurl.query)
{'charlie': ['brown'], 'code': ['bork']} 
```

该方案很重要，因为尽管查询存在于通用语法中，但某些协议可能不支持它们。

**也可以看看：**

[http://en.wikipedia.org/wiki/URI_scheme](http://en.wikipedia.org/wiki/URI_scheme)（查看官方注册方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:29:46.063

[`urlparse.parse_qs`](http://docs.python.org/2/library/urlparse.html#urlparse.parse_qs)(and )的文档`parse_qsl`确实声明它是为了“解析作为字符串参数给出的查询字符串”。您不是给它一个查询字符串，而是给它整个 URL。试试这个：

```
>>> urlparse.parse_qsl('code=bork&charlie=brown')
[('code', 'bork'), ('charlie', 'brown')] 
```

# jquery - 控制带有单选按钮的下拉菜单而不修改 html

> ID：13773822
> 
> 赞同：1
> 
> 时间：2012-12-08T02:22:40.180
> 
> 标签：jquery, radio-button

所以这个问题实际上是与几年前[使用 jquery 使用 jquery 的单选按钮选择的前一个问题更新下拉选择](https://stackoverflow.com/questions/3975331/)相关的更新。我遇到过类似的情况，我需要制作单选按钮来替换下拉菜单，但我无法修改 html/jquery/ajax。

使用上述方法，我已经能够完成这项工作，这非常棒。但是，我在这几天一直在努力解决的问题上遇到了一个问题。单击第一个单选选项后，第二组加载但仅加载第一个单选按钮（在本例中表示“选择选项；n”），但是当第一个组中的相同单选按钮再次单击时，所有选项都按原样显示。我无法弄清楚为什么该功能在第二次点击时正确触发，但不是第一次。这是供参考的网站[http://www.amymatto.com/product177.html](http://www.amymatto.com/product177.html)这是我更新的单选按钮代码。

```
<script type='text/javascript'>
$(function(){
$("#menu_1 select option").each(function(i,e) {
$("<input type='radio' name='sizeopt'/>")
    .attr("value", $(this).val())
    .attr("checked", i === 1)
    .click(function() {
        $("#menu_1 select").val($(this).val()).trigger('change');
                $("#coloropt").empty();
}).appendTo("#sizeopt");
$("#menu_1 select").change(function(){
    $("input[name='sizeopt'][value='"+this.value+"']").attr("checked","checked");
    $("#menu_2 select option").delay(800).queue(function(i,e) {
    $("<input type='radio' name='coloropt'/>")
         .attr("value", $(this).val())
         .attr("checked", i === 0)
         .click(function() {
             $("#menu_2 select").val($(this).val()).trigger('change');
    }).appendTo("#coloropt");
    $("#menu_2 select option").dequeue();
});
});
});
});
$("#menu_1 select").change(function(){
    $("input[name='sizeopt'][value='"+this.value+"']").attr("checked","checked");
});
</script> 
```

我对使用 jquery 还很陌生，所以请原谅块中的任何错误。我可能完全关闭了，但我的假设是，如果我在单击时清空包含 coloropt 输入的 div 并设置延迟以生成颜色 opt 输入，它将清除所有内容并给更改函数时间来处理 ajax 请求。我正在使用

```
.trigger('change') 
```

从下拉菜单中触发 onchange 并且一切似乎都在工作......但需要点击两次？我很难过，有人对此有任何想法，或者在我的代码中发现了一些可能导致它第一次错过的东西吗？

多谢你们！

# php - 如何在下拉菜单中显示正确的选项并保持选项显示

> ID：13773823
> 
> 赞同：0
> 
> 时间：2012-12-08T02:22:42.593
> 
> 标签：php

我没有完全得到下面的代码，但我在下面有一个下拉菜单，我希望它在下面显示这些值：

```
1
1/2
2
2/3
3
3/4
4
4/5

...

10 
```

现在我还希望能够在提交后保持选择的选项，所以我在下面尝试了这段代码，但问题是它只是显示值`1/2, 2/3, 3/4, 4/5...`等。

```
foreach ($years as $year) {
    if ($validSubmission && $year == $getduration) {
         if ($year != $max_year) {
         $nextYear = $year + 1;
      $durationHTML .= "<option value='" . $year . "' selected='selected'>$year/$nextYear</option>".PHP_EOL;      
     }else{
    $durationHTML .= "<option value='" . $year . "' selected='selected'>$year</option>".PHP_EOL;  
}
}else{
         if ($year != $max_year) {
         $nextYear = $year + 1;
    $durationHTML .= "<option value='" . $year . "'>$year/$nextYear</option>".PHP_EOL;
}else{
    $durationHTML .= "<option value='" . $year . "'>$year</option>" . PHP_EOL;
     }
}
} 
```

原始代码如下所示，它显示了正确的选项，但没有执行 $validSubmission 变量，因此在提交页面后它不会保持选择的选项：

```
foreach ($years as $year) {
    $durationHTML .= "<option>$year</option>".PHP_EOL;  
    if ($year != $max_year) {
         $nextYear = $year + 1;
         $durationHTML .= "<option>$year/$nextYear</option>".PHP_EOL;              
    }
}
$durationHTML .= '</select>'; 
```

下面的代码确实在提交后保持选项显示，但不显示`/`介于值之间的值：

```
 foreach ($years as $year) {
        if ($validSubmission && $year == $getduration) {
            $durationHTML .= "<option value='" . $year . "' selected='selected'>$year</option>" . PHP_EOL;
        } else {
            $durationHTML .= "<option value='" . $year . "'>$year</option>" . PHP_EOL;
        }
    } 
```

但试图结合这两个代码没有奏效，这就是我遇到的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:09:23.803

试试这个修改/简化的代码。通过使用[三元比较](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)- `$var = condition ? if_true : if_false`- 来设置`selected='selected'`属性，您可以最小化代码（从 ~17 行到 ~9 行）。

```
foreach ($years as $year) {

    //Gets the single years - 1,2,3...
    $sel =($validSubmission && $year == $getduration)? " selected='selected'": "";
    $durationHTML .= "<option value='$year'$sel>$year</option>".PHP_EOL;

    //Gets the double years - 1/2,2/3,3/4...
    if ($year != $max_year) {
    $nextYear = $year + 1;
    $sel =($validSubmission && ($year.'/'.$nextYear) == $getduration)? " selected='selected'": "";
    $durationHTML .= "<option value='$year/$nextYear'$sel>$year/$nextYear</option>".PHP_EOL;  
    }
} 
```

# css - 声明中的选择器？

> ID：13773833
> 
> 赞同：0
> 
> 时间：2012-12-08T02:24:12.597
> 
> 标签：css, dynamic, selector, declaration

冒着大量反对票的风险，我会把它全部放在网上并问：为什么不允许在声明中使用选择器？

jQuery 很好，但它比 CSS[慢。](http://dev.opera.com/articles/view/css3-vs-jquery-animations/)再说一次，我喜欢 jQuery，但锤子不是锯子。

为什么在声明中不允许选择器来创建快速动态页面，是否有充分的理由？

提前谢谢了！

**例子**

为什么我们不能做这样的事情？

```
.class1 {max-width: #element1.width} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:36:22.053

在 Internet Explorer 的早期版本中，CSS 支持表达式。

出于标准合规性、性能和安全原因，IE 8 中放弃了对 CSS 中表达式的支持。

参考：http: [//msdn.microsoft.com/en-us/library/ms537634%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms537634%28v=VS.85%29.aspx)

# python - 从字符串数组转换时如何设置numpy浮点数组的精度？

> ID：13773840
> 
> 赞同：2
> 
> 时间：2012-12-08T02:25:09.480
> 
> 标签：python, numpy

我正在使用以下链接将字符串数组 [转换为浮点数组将字符串转换为浮点数组](https://stackoverflow.com/questions/3877209/how-to-convert-an-array-of-strings-to-an-array-of-floats-in-numpy)

我得到的数据格式很奇怪

```
535\.    535\.    535\.    534.68  534.68  534.68 
```

虽然 numpy 能够将字符串数组转换为浮点数，但当数据格式为**535 时，其他一些会失败。**

有没有办法一次性将所有**535.**转换为**535.00**。

我正在使用以下代码进行转换

```
import numpy as np
strarray = ["535.","535.","534.68"]
floatarray = np.array(filter(None,strarray),dtype='|S10').astype(np.float)
print floatarray 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:30:26.313

将字符串转换为`float128`. 尝试这个：

```
import numpy as np
strarray = ["535.","535.","534.68"]
floatarray = np.array(filter(None,strarray),dtype='|S10').astype(np.float128)
print floatarray 
```

输出：

```
[ 535.0  535.0  534.68] 
```

或使用推荐的`longdouble`：

```
import numpy as np
strarray = ["535.","535.","534.68"]
floatarray = np.array(filter(None,strarray),dtype='|S10').astype(np.longdouble)
print floatarray 
```

输出：

```
[ 535.0  535.0  534.68] 
```

# c++ - GTK::main::run 段错误

> ID：13773846
> 
> 赞同：1
> 
> 时间：2012-12-08T02:25:54.067
> 
> 标签：c++, segmentation-fault, gtkmm

我正在尝试编写一个 GTK 程序。我设法让我的窗口在其中生成一个按钮，但是现在当我尝试打包一个盒子并向盒子添加 2 个按钮时，我出现了段错误。让我感到困惑的是，当我创建任何东西时它不会出现段错误，但是当我运行 GTK::Main::run 时它不会出现段错误。

```
int main(int argc, char *argv[])
{
    Glib::RefPtr<Gtk::Application> app =
    Gtk::Application::create(argc, argv,
    "org.gtkmm.examples.base");

    MainWindow mainWindow;
    cout << "trying to run window"<< endl;
    Gtk::Main::run(mainWindow);
    cout << "done running window"<< endl;
    return 0;
 } 
```

和

```
MainWindow::MainWindow()
:quit_button("Quit"),
write_button("Write"),
window_box()
{
set_border_width(10);
quit_button.signal_clicked().connect(sigc::mem_fun(*this,
    &MainWindow::quit_button_clicked));
write_button.signal_clicked().connect(sigc::mem_fun(*this,
    &MainWindow::write_button_clicked));
window_box.start_pack(quit_button);
window_box.start_pack(write_button);
add(window_box);
write_button.show();
quit_button.show();
window_box.show();
}

MainWindow::~MainWindow()
{

}

void MainWindow::write_button_clicked()
{
    std::cout << "Hello World" << std::endl;
}
void MainWindow::quit_button_clicked()
{
    exit(0);
} 
```

是我的主要方法和我的 MainWindow 类的构造函数。我试过不打包任何东西或打包更少的东西，但我仍然存在段错误。我是 GTK 的新手，所以我知道我一定遗漏了一些简单的东西。

编辑：主窗口声明

```
#include <gtkmm.h>
#include <iostream>

using namespace std;

class MainWindow : public Gtk::Window
{
public:
    MainWindow();
    ~MainWindow();

protected:
//Signal Handlers
 void   write_button_clicked();
 void   quit_button_clicked();

//Widgets
 Gtk::Button quit_button;
 Gtk::Button write_button;
 Gtk::VBox window_box;asd

};
#endif // GTKMM_EXAMPLE_HELLOWORLD_H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:35:11.860

`Gtk::Main`已被弃用并替换为`Gtk::Application`，它现在处理事件循环。

如果不是 像[ergosys](https://stackoverflow.com/questions/13773846/gtkmainrun-segfaults?rq=1#comment18954839_13773846)所说的那样`Gtk::Main::run(mainWindow);`使用它，它就会起作用。`app->run(mainWindow);`

为了进行适当的清理，您可能也应该调用`app->quit()`而不是 libc `quit()`（或者只是关闭窗口，这也会终止主循环）

# mysql - mysql 通过 ssh 授予权限

> ID：13773850
> 
> 赞同：0
> 
> 时间：2012-12-08T02:27:10.773
> 
> 标签：mysql, ssh

命令：

```
ssh xxx.xxx.xxx.xxx \"mysql -u root -password \\\"grant all privileges on rcf_275d315.* to rfc_user@localhost identified by \'W27j453frxrff23\'\\\"\" 
```

给我一个错误：

```
bash: mysql -u root -p97yf2beiru3trf289 "grant all privileges on rcf_275d315.* to rfc_user@localhost identified by 'W27j453frxrff23'": command not found 
```

当我复制 bash 返回的字符串时，在本地运行它可以正常工作。粘贴在远程服务上时也可以使用。

由于某种原因，它不能通过 ssh 工作，并返回错误：

```
mysql -u root -p97yf2beiru3trf289 "grant all privileges on rcf_275d315.* to rfc_user@localhost identified by 'W27j453frxrff23'": command not found 
```

* * *

## 更新：

我尝试了一些变化，但没有成功：

```
ssh xxx.xxx.xxx.xxx \"mysql -u root -pBOY8o7ubio87gubip7 \\\"grant all privileges on rfc_275d315.* to rfc_user identified by \'KUG34dY976fyvc768g\'\\\"\" 
```

结果：

```
bash: mysql -u root -pBOY8o7ubio87gubip7 "grant all privileges on rfc_275d315.* to rfc_user identified by 'KUG34dY976fyvc768g'": command not found

ssh xxx.xxx.xxx.xxx \"mysql -u root -pBOY8o7ubio87gubip7 \\"grant all privileges on rfc_275d315.* to rfc_user identified by \'KUG34dY976fyvc768g\'\\"\" 
```

结果：

```
bash: -c: line 0: unexpected EOF while looking for matching `"'
bash: -c: line 1: syntax error: unexpected end of file

ssh xxx.xxx.xxx.xxx mysql -u root -pBOY8o7ubio87gubip7 \\"grant all privileges on rfc_275d315.* to rfc_user identified by \'KUG34dY976fyvc768g\'\\" 
```

结果：

```
mysql  Ver 14.14 Distrib 5.1.66, for redhat-linux-gnu (x86_64) using readline 5.1
Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective 
```

拥有者。

```
Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.

ssh xxx.xxx.xxx.xxx mysql -u root -pBOY8o7ubio87gubip7 \\\"grant all privileges on rfc_275d315.* to rfc_user identified by \'KUG34dY976fyvc768g\'\\\" 
```

结果：

```
mysql  Ver 14.14 Distrib 5.1.66, for redhat-linux-gnu (x86_64) using readline 5.1
Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective 
```

拥有者。

```
Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit. 
```

仍然，不要问题出在哪里。谢谢你的帮助。

更新：当 echo 保存到文件时：ssh xxx.xxx.xxx.xxx "echo mysql -u root -piugiu -e \\"将 rfc_275d315.* 上的所有权限授予由 \'in76bn6bgb876n\'\\" > rfc 标识的 rfc_user /echo.txt"

我在文件中得到这个：mysql -u root -piugiu -e“将 rfc_275d315.* 上的所有权限授予由‘in76bn6bgb876n’标识的 rfc_user”

这是正确的命令，当复制并粘贴到远程服务器上的命令行时，它可以正常工作。

当 echo 被删除时： ssh xxx.xxx.xxx.xxx "mysql -u root -piugiu -e \\"将 rfc_275d315.* 上的所有权限授予由 \'in76bn6bgb876n\'\\" > rfc/echo.txt 标识的 rfc_user "

文本文件包含有关 mysql 使用的信息： Usage: mysql [OPTIONS] [database] -?, --help 显示此帮助并退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T13:13:44.423

```
ssh xxx.xxx.xxx.xxx 'mysql -u root -pBOY8o7ubio87gubip7 -e "grant all privileges on rfc_275d315.* to rfc_user@localhost identified by '\''KUG34dY976fyvc768g'\''" yourdatabase' 
```

应该工作。您忘记了`-e`允许您传递语句的 MySQL 客户端参数

**编辑1：**

固定报价

在 bash 中，您可以使用两种不同的引用方式（就像在许多其他语言中一样）

**1.弱引用：双引号**

例如`echo "$PATH"`

> 在弱引用的字符串中，没有解释
> 
> *   空格作为单词分隔符
> *   路径名扩展
> *   过程替代
> *   单引号引入强引用
> *   用于模式匹配的字符

否则参数扩展完成：

`ls -l "*"`

不会被解释，会按`*`字面意思传递，除非你有一个名为的文件，否则会导致错误`*`

`echo "Your PATH is: $PATH"`

将按预期工作。`$PATH`被解释

**2\. 强引用：单引号**

在单引号内，您根本没有任何解释。单引号内的所有字符都被视为文本。

如果您必须在单引号文本中使用单引号，则仅转义是不够的。你必须像这样连接：

`QUERY='SELECT * FROM myTable WHERE col1 = '` `\'` `'value1'` `\'`

来源：[http ://wiki.bash-hackers.org/syntax/quoting](http://wiki.bash-hackers.org/syntax/quoting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:29:07.577

您不需要引用您发送到的命令`ssh`。删除命令周围的最外层引用`mysql`，它应该可以正常工作。

# c - fread() 没有正确写入字符串

> ID：13773851
> 
> 赞同：2
> 
> 时间：2012-12-08T02:27:11.647
> 
> 标签：c, file, fread

我正在尝试使用`fread()`将文件的内容写入 char 数组，但它似乎不起作用。这是我在其中实现它的程序部分。我包含了很多跟踪语句来检查每个步骤是否给出了正确的输出。他们似乎都很完美。`fileSize`出来的正确。的大小`sendFileBuf`也正确显示。当它进入`while`循环时，`printf`那里的语句只执行了两次，即使`fileSize`值在 62000 左右。当我打印时`sendFileBuf`，它会出现奇怪的字符，比如`ÿØÿá`. 我已经用几个文件试过了，总是有一些错误。请帮帮我！

```
void sendFile(fileNode fileToSend, int sockFd)
{
    int fileSize;

    fileSize = atoi(fileToSend.fileSize);
    printf("file size after conversion to int: %d\n", fileSize);

    //Sending file size
    if(send(sockFd, fileToSend.fileSize, sizeof(fileToSend.fileSize), 0) < 0)
    {
        perror("Sending file size");
        close(sockFd);
        exit(1);
    }

    //Send actual file
    FILE *newFp;
    char path[50];
    strcpy(path, "SharedFiles/");
    strcat(path, fileToSend.fileName);

    if((newFp = fopen(path, "r")) == NULL)
    {
        perror("Opening file");
        exit(1);
    }

    //Write file to buffer and send
    char sendFileBuf[fileSize];
    memset(&sendFileBuf, 0, sizeof(sendFileBuf));
    printf("Size of sendfilebuf: %ld", sizeof(sendFileBuf));

    fread(&sendFileBuf, 1, fileSize, newFp);

    printf("sending file buffer %s\n", sendFileBuf);
    if(send(sockFd, sendFileBuf, sizeof(sendFileBuf), 0) < 0)
    {
        perror("Sending file");
        fclose(newFp);
        close(sockFd);
        exit(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:48:33.673

包含调用的 while 循环`fread`可能没有执行您想要的操作。如果在一次调用中未能读取所有内容，则第二次调用会将数据读入缓冲区的开头（并覆盖第一次迭代中写入的内容）。

例如，假设缓冲区是 10 字节，而您正在读取的数据是：

```
1234567890abcde 
```

第一个循环将读取前 10 个字符 ( `1234567890`)。第二次迭代将读`abcde`入缓冲区的开头。之后，缓冲区将包含：

```
abcde67890 
```

并且缓冲区中不会有空终止符（假设刚刚读取的数据中不包含零）。所以 printf 可能会包含缓冲区末尾的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T05:34:28.047

没有其他人问过这个，所以我们开始吧：你说这个函数“出现了奇怪的字符，比如`ÿØÿá`”。

是什么让你觉得这些角色很奇怪？您要读取什么样的文件？是文本文件吗？还是MP3？还是图片文件？或者完全是别的什么？

您在屏幕上看到的内容可能是*完全有效*的，因为许多文件包含人类不可读的数据。您正在打印（作为字符串）可能根本不是字符串的文件内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T02:29:48.013

当您`sendFileBuf`在表达式上使用时，它会衰减为指针，因此您不必取消引用它`&`。试试这种方式：

```
fread(sendFileBuf, 1, fileSize, newFp); 
```

同样的事情`memset()`：

```
memset(sendFileBuf, 0, sizeof(sendFileBuf)); 
```

# php - 发布 RSS 提要数据时出现 PHP 错误

> ID：13773853
> 
> 赞同：1
> 
> 时间：2012-12-08T02:27:41.760
> 
> 标签：php, rss

我正在尝试在我的网站上发布博客。我下载了 Simplepie 并按照网站上的说明进行操作，但我不断收到这些错误。作为 PHP 新手，我不确定它们的含义。有什么帮助吗？

> 警告：require_once() [function.require-once]: URL file-access is disabled in server configuration in /hermes/bosweb/web177/b1775/ipg.waldropcom/php/test.php on line 7
> 
> 警告：require_once(http://www.waldrop.com/php/autoloader.php) [function.require-once]：无法打开流：在 /hermes/bosweb/web177/b1775/ipg 中找不到合适的包装器第 7 行的 .waldropcom/php/test.php
> 
> 致命错误：require_once() [function.require]：打开失败需要'http://www.waldrop.com/php/autoloader.php'（include_path='.:/usr/local/lib/php-5.2.17 /lib/php') 在第 7 行的 /hermes/bosweb/web177/b1775/ipg.waldropcom/php/test.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T02:51:07.920

可能您的应用程序试图包含一个远程文件，但它失败了。您需要在 php.ini 中启用[allow_url_fopen](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)和[allow_url_include](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-include)设置以要求或包含远程文件。

# javascript - 为什么ajax成功函数运行2次？

> ID：13773854
> 
> 赞同：0
> 
> 时间：2012-12-08T02:27:43.037
> 
> 标签：javascript, ajax, jquery

**main.html**

```
<script src="jsv3/onload.js"></script>

<script>
var countImage = 0;
function load_pages(page) {
    $.ajax({
        type: "GET",
        url: "scandir.php",
        data: "page=" + page,
        dataType: 'json',
        success: function (data) {
            var num = 0;
            var cache = [];
            var startNum = 0;
            var endNum = 0;

            $.each(data, function(i,paths){
            if ( !(page == countImage) && !(page+1 == countImage))
            {
                    if (paths[0] != ''){
                        num = parseInt(paths[0].split("_P")[1],10);
                        if (!$('#img_'+num).length){
                        $("#div_"+num).append("<img id = 'img_"+num+"' src = '"+paths[0]+"' alt = 'flip book' />");
                        }
                        cache.push (num);
                    }

                    if (paths[1] != ''){
                        num = parseInt(paths[1].split("_P")[1],10);
                        if (!$('#img_'+num).length){
                        $("#div_"+num).append("<img id = 'img_"+num+"' src = '"+paths[1]+"' alt = 'flip book' />");
                        }
                        cache.push (num);
                    }
            }
            });

            startNum = cache[0];
            endNum = cache[cache.length-1];

            for (var z = 0; z < 2; z++) {
                startNum--; 
                if ($('#img_'+startNum).length){
                $("#img_"+startNum+":last-child").remove();
                }
            }

            for (var x = 0; x < 2; x++) {
                endNum++;   
                if ($('#img_'+endNum).length){
                $("#img_"+endNum+":last-child").remove();
                }
            }

            /*if ($('#img_6').length)
            alert ('img6 exist');
            else
            alert ('img6 not exist');*/

        }
    });
}

function create_div() {
    var counter = 1;
    $.ajax({
        type: "GET",
        url: "countImg.php",
        dataType: 'json',
        success: function (data) {
            //$("#book").append("<div id='cover'></div>");
            countImage = data;
            for (var j = 0; j < data; j++) {
                $("#book").append("<div id = 'div_"+counter+"'></div>");
                counter++;
            }
            counter = 1;
        }
    });
}

$(document).ready(function(){
    console.log('test');
    create_div();
});
</script> 
```

**onload.js（调用初始化函数）：**

```
/* = Start
-------------------------------------------------------------- */

$(window).bind('keydown', function(e){

    if (e.keyCode==37)
        $('#book').turn('previous');
    else if (e.keyCode==39)
        $('#book').turn('next');

}); 

/*   Moved to the html file (FlipV5.html) to ensure the page loading is finished before initialize turn.js */

$(window).load(function(){
    $('#page').show();
    Book.init();

    if (isiPhone()) {
        $('#page').addClass('mobile');
    } else {
        Book.zoom_auto();
        Book.book_position();
    }
    Book.dragdrop_init();

    Navigation.init();
    calculate_zoom_factor();

});

$(window).resize(function() {

    if (!isiPhone()) {
        Book.book_position();
        Book.zoom_auto();
        Book.dragdrop_init();
    }
    calculate_zoom_factor();

});

function resizeDetect() {
    var rtime = new Date(1, 1, 1, 1,00,00);
    var timeout = false;
    var delta = 200;

    $(window).resize(function() {
        rtime = new Date();
        if (timeout === false) {
            timeout = true;
            setTimeout(resizeend, delta);
        }
    });

    function resizeend() {
        if (new Date() - rtime < delta) {
            setTimeout(resizeend, delta);
        } else {
            timeout = false;
            window_width = $(window).width();
            window_height = $(window).height();

            if ( $(window).width() > $(window).height() ) {
            //Book.scaleVertical();
            } else {

            }

        }               
    }
}

resizeDetect(); 
```

**onload.js（初始化函数）**

```
 init: function() {

        default_book_width  = WIDTH_BOOK;
        default_book_height = HEIGHT_BOOK;
        default_page_width  = WIDTH_BOOK;
        default_page_height = HEIGHT_BOOK;
        window_height       = $(window).height();
        window_width        = $(window).width();
        zoom_steps      = ZOOM_STEPS_LENGTH;
        current_zoom_step   = 0;
        dbl_clicked = false;
        on_start = true;
        self = this;

        $('#book').turn({
            display: 'double',
            acceleration: true,
            elevation:50,
            when: {
                first: function(e, page) {
                    $('.nav_arrow.prev').hide();
                },

                turned: function(e, page) {
                    if (page > 1) {
                        $('.nav_arrow.prev').fadeIn();
                        $('#about').hide();
                    }
                    if ( page < $(this).turn('pages') ) {
                        $('.nav_arrow.next').fadeIn();
                    }
                    pageNo = $('#book').turn('page');
                    load_pages(pageNo);                                        
                },

                turning: function(e, page) {
                    if (page < 2) {
                        $('#about').show();
                    }
                },

                last: function(e, page) {
                    $('.nav_arrow.next').hide();
                }   
            }
        });
        Book.arrows();
    },

    scaleHorizontal: function() {
        new_width   = $(window).width()-100;
        ratio       = new_width / $('#page').width();
        new_height  = $('#page').height() * ratio;
        $('#page').css({
            width: new_width, 
            height: new_height
        });
        $('#book').turn('size', new_width, new_height);
    },

    scaleStart: function() {
        if ( on_start == true ) {
            bookHeightCheck();          
            if ( higherThanWindow == true ) {
                Book.scaleVertical();
                if ( $('#page').width() > $(window).width() ) {
                    Book.scaleHorizontal();
                }
            } else {
                Book.scaleHorizontal();
            }
            on_start = false;
        }
    }, 
```

流程是这样的： main.html 调用 create_div 来做一些函数，并且由于它附加了 onload.js，它运行 Book.init() ，它将调用 load_pages 函数。所以，我相信问题是由于两个ajax调用是同时实现的？

create_div() ajax 意外检测到 load_pages 中的 ajax 调用是成功的，所以它运行了两次成功函数。

如何解决这样的问题？谢谢

# javascript - EaselJS onPress 在 IPAD 上不起作用

> ID：13773855
> 
> 赞同：0
> 
> 时间：2012-12-08T02:28:18.790
> 
> 标签：javascript, canvas, easeljs

我有一个使用 EaselJS 创建的 Ipad Web 应用程序。当我按下使用“onPress”的元素时，我的 IPAD 上的调试控制台出现以下错误。

**发生了错误。这很可能是由于使用本地或跨域图像读取画布像素数据的安全限制。**

这适用于我的桌面，但是当我在我的 iPad 上访问网站时它不起作用。我没有使用任何外部图像（所有图像都是我网站的本地图像）如果有帮助，它们是 SVG 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:48:12.493

Webkit 在使用 SVG 时会污染画布。最好的办法是使用 PNG。

# python - 我们如何才能使 __future__ 进口全球化？

> ID：13773861
> 
> 赞同：16
> 
> 时间：2012-12-08T02:29:10.023
> 
> 标签：python, python-2.7

规格：Python 2.7

我正在开发一个包含多个模块的项目，我想在所有模块中激活 __future__ 模块中的一些功能。我想在一个模块上导入我需要的所有功能，然后将该单个模块导入到其他模块中，并让这些功能在所有模块中都处于活动状态，或者类似的效果。

我试过了：

*[A.py]*

```
from __future__ import division 
```

*[B.py]*

```
import A
print(1/2) 
```

运行 B.py 的除法仍然是整数。我试过了：

*[A.py]*

```
print(1/2) 
```

*[B.py]*

```
from __future__ import division
import A 
```

运行 B.py 给出了相同的结果。对于前面的两个示例，我还尝试通过“from A import *”切换“import A”，结果相同。

我在 Google 上搜索了一段时间，并在 Python 文档中找到了关于 __future__ 模块如何工作的最佳描述，显然足够了。在那里，我只能找到这些功能在它们被导入的模块中处于活动状态的保证，而没有提及如何在全局范围内进行操作。

所以我想知道是否有办法做到这一点，无论是我描述的方式，还是创建某种运行时配置文件，或者通过其他方式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-08T02:38:43.543

没有办法用语言做到这一点。从这个意义上说，你真的不能让`__future__`进口全球化。（好吧，您可能可以`import`用一些复杂的东西`imp`或其他东西替换正常的语句。请参阅[Future 语句](http://docs.python.org/2/reference/simple_stmts.html#future)文档并向下滚动到“代码编译...”但是这样的任何事情几乎肯定是个坏主意。）

原因是这`from __future__ import division`不是真正的正常导入。或者，更确切地说，它*不仅仅是*一个正常的导入。实际上，您确实*获得*了一个`division`可以检查的名称，但是仅具有该值没有任何效果-因此将其传递给其他模块不会影响这些模块。除了正常的导入之外，Python 还具有特殊的魔力，可以检测`__future__`模块顶部或交互式解释器中的导入，并更改代码的编译方式。如果您想了解所有详细信息，请参阅“真正导入”部分的未来和[**“**](http://docs.python.org/2/library/__future__.html)[魔术”部分的未来声明](http://docs.python.org/2/reference/simple_stmts.html#future)。

并且没有配置文件可以让您执行此操作。但是有一个命令行参数：

```
python -Qnew main.py 
```

这与在任何地方执行相同的效果`from __future__ import division`。

您可以将其添加到`#!`行中，或者`alias pyfuturediv='python -Qnew'`（甚至`alias python='python -Qnew'`）添加到您的 shell 中，或者其他任何内容，这可能与您的目的的配置文件一样好。

但实际上，如果您想确保模块 B 获得新式划分，您可能*应该*`__future__`首先在 B 中声明。

或者，当然，您可以只为 Python 3.0+ 而不是 2.3-2.7 编写代码。（请注意，一些核心开发人员反对使用命令行参数，因为“全局获取功能 X 的正确方法是使用 Python >= 功能 X 的 MandatoryRelease 的版本”。）或者`//`在你的意思是使用`//`.

另一种可能性是使用[6](http://pypi.python.org/pypi/six)，该模块旨在让您编写几乎是 Python 3.3 的代码并使其在 2.4-2.7（和 3.0-3.2）中正常工作。例如，你没有得到一个`print`函数，但你得到了一个`print_`工作完全相同的函数。你没有得到 Unicode 文字，但你得到`u()`了假文字——再加上源代码中的 UTF-8 编码声明，几乎就足够了。它还提供了很多你无法从中获得的东西—— `__future__`<code>StringIO 和`BytesIO`作为`exec`函数的`next`函数等等。

如果问题是您有 1000 个源文件，并且全部编辑它们很痛苦，您可以使用`sed`，或`3to2`仅使用修复除法的选项，或者......</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-15T17:32:24.177

另一种方法是使用[isort](https://github.com/timothycrosley/isort)。`isort`有一个`-a`命令行标志来将导入添加到您指定的文件中。简单地`isort`不带参数运行将在当前工作目录和所有子目录中的所有 python 文件上递归运行它。

如果像我一样，您在该文件夹中有一个虚拟环境，并且正在使用 git（或具有仅列出您的文件的等效方式）并且不想在该虚拟环境中的所有文件上运行它，您可以使用一些东西喜欢：

`git ls-tree -r HEAD --name-only | grep "\.py$" | xargs isort -a -y "from __future__ import division"`

# python - Flask 中的 API——返回 JSON 但 HTML 异常破坏了我的 JSON 客户端

> ID：13773862
> 
> 赞同：15
> 
> 时间：2012-12-08T02:29:11.647
> 
> 标签：python, html, json, api, flask

HTML 中返回的异常会破坏我的 JSON 客户端。我想 jsonify 这个输出。

更多细节：我有一个视图函数，它是这个 api 应用程序的端点。

如您所见，此函数以 json 格式返回结果。

```
@app.route('/route1')
def api_route1():
    if user_id in request.args: 
        k1 = request.args['user_id']
        return flask.jsonify(recs=some_function(k1))
    else:
        return "no valid user_id supplied" 
```

问题，未处理的异常在 HTML 中，例如，

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 
    Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>TypeError: 'NoneType' object is not iterable // Werkzeug Debugger</title>
        <link rel="stylesheet" 
            href="?__debugger__=yes&amp;cmd=resource&amp;f=style.css" 
            type="text/css"> 
```

这打破了我的 json 客户端。HTML 格式显然是默认格式，但我不知道如何选择退出并指定 jsonified 异常（理想情况下 jsonify 任何返回的甚至是标头）。

我怀疑我需要的是优秀的 Flask 文档中的某个地方，但我找不到它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-10T00:12:49.823

[您应该在烧瓶中](http://flask.pocoo.org/docs/patterns/errorpages/)定义 HTTP错误处理程序。

一个简单的 JSON 返回 404 处理程序可能如下所示：

```
@app.errorhandler(404)
def page_not_found(e):
    return flask.jsonify(error=404, text=str(e)), 404 
```

有了这个，您将能够`data.error`在客户端上进行检查，如果存在，您可以使用 data.text 获取错误文本（传递的错误`e`是`werkzeug.exceptions.NotFound`其字符串表示形式为“404：未找到”）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T04:25:16.657

向 JSON 客户端提供回溯可能会泄露敏感信息。

我的建议是：

*   关闭调试
*   安装像[哨兵这样的日志聚合工具](https://github.com/getsentry/sentry)
*   使此应用程序的错误 500 页面返回 json 格式的一般错误

500 页可能如下所示：

```
{ "error": "500 - internal server error" } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T04:44:17.810

下面的代码应该可以解决问题。所以想法是捕获任何可能引发的异常，使用 traceback 模块将异常详细信息格式化为字符串，然后将其作为有效的 json 返回。我建议将一堆 except 语句与您期望发生的主要错误类型和更易读的错误消息一起放置。然后你可以有一个最后一个，除非万一发生奇怪和意外的事情。

```
import traceback

@app.route('/route1')
def api_route1():
    if user_id in request.args: 
        try:
            k1 = request.args['user_id']
            return flask.jsonify(recs=some_function(k1))
        except:
            return flask.jsonify(exception=traceback.format_exc())
    else:
        return flask.jsonify(exception="no valid user_id supplied") 
```

# jquery - 闪烁淡出 div。我怎么能阻止它？

> ID：13773865
> 
> 赞同：0
> 
> 时间：2012-12-08T02:29:44.033
> 
> 标签：jquery

很抱歉今天我的问题打扰了你。

当我转到不同的子菜单以及将鼠标移开时，您知道如何阻止 div 闪烁吗？我希望内容是 50% 的全部时间。似乎当我浏览不同的子菜单时，每次跳转都会再次淡入。我能做些什么？？非常感谢你的帮助。

[http://www.guntmarwolff.com/test/fadetest3.php](http://www.guntmarwolff.com/test/fadetest3.php)

```
<script type="text/javascript" src="jquery-1.8.0.min.js"></script>

<script type="text/javascript">
     $(document).ready(function(){

  $("#Layer5 li a").hover( function() {
       console.log("in");
      $("#header1").fadeTo('slow', 0.5);
      }, 
  function () {
      console.log("out");
      $("#header1").fadeTo('slow', 1);
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T02:45:06.117

如果“闪烁”是因为它不断地“进出”褪色，您*可以使用 .stop() 或使用 animate 和 queue:false，就像这样 -

```
$("#Layer5 li a").hover( function() {
    $("#header1").animate(
      {'opacity': '.5'},
      {queue: false}
    )
}, function () {
    $("#header1").animate(
      {'opacity': '1'},
      {queue: false}
    )
}); 
```

这是工作示例的小提琴 - [http://jsfiddle.net/jmsessink/XwMVj/](http://jsfiddle.net/jmsessink/XwMVj/)

# java - 如何在屏幕捕获程序中使用 Java 获得超过 30FPS？

> ID：13773870
> 
> 赞同：2
> 
> 时间：2012-12-08T02:29:56.907
> 
> 标签：java, screen, capture, recording, awtrobot

我目前正在使用 Java 中的 Robot 类来记录屏幕。但是，它没有达到每秒 30 帧的最小值。我没有重新创建对象，并且尽可能高效，但我平均每秒只有 15 帧左右。机器人根本没有切割它。

我可以使用什么来捕获屏幕？我已经尝试过 Xuggle，但我似乎也无法足够快地捕捉到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T02:54:30.827

对于遵循 X11 标准的操作系统（Linux、FreeBSD、Solaris 等），我们可以通过[JavaCV](http://code.google.com/p/javacv/)和[FFmpeg](http://ffmpeg.org/)这样做：

```
import com.googlecode.javacv.*;

public class ScreenGrabber {
    public static void main(String[] args) throws Exception {
        int x = 0, y = 0, w = 1024, h = 768; // specify the region of screen to grab
        FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(":0.0+" + x + "," + y);
        grabber.setFormat("x11grab");
        grabber.setImageWidth(w);
        grabber.setImageHeight(h);
        grabber.start();

        CanvasFrame frame = new CanvasFrame("Screen Capture");
        while (frame.isVisible()) {
            frame.showImage(grabber.grab());
        }
        frame.dispose();
        grabber.stop();
    }
} 
```

我不了解 Windows 或 Mac OS X，但我怀疑我们需要直接访问本机 API。尽管如此，[JavaCPP](http://code.google.com/p/javacpp/)可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-04T21:43:07.263

建立在@Samuel的回答之上，根据官方的[ffmpeg文档](https://trac.ffmpeg.org/wiki/Capture/Desktop)，如果你将`file`传递给的参数`FFmpegFrameGrabber`（这实际上是`input`作为ffmpeg的选项传递下来的参数`-i`）遵循[不同的每个`device`期望的格式](http://ffmpeg.org/ffmpeg-devices.html)。

IE：

对于 Windows：`dshow`预计`-i video="screen-capture-recorder"`

对于 OSX：`avfoundation`预计`-i "<screen device index>:"`

对于 Linux：`x11grab`期望`-i :<display id>+<x>,<y>`.

因此，只需将这些值（参数`-i`）传递给构造函数并相应地设置格式（通过`setFormat`）就可以了：

例子：

对于 Windows：

```
new FFmpegFrameGrabber("video=\"screen-capture-recorder\"")
    .setFormat("dshow"); 
```

对于 OSX：

```
new FFmpegFrameGrabber("\"<screen device index>:\"")
    .setFormat("avfoundation"); 
```

对于 Linux：

```
new FFmpegFrameGrabber(":<display id>+<x>,<y>")
    .setFormat("x11grab"); 
```

PS：尚未对此进行全面测试，因此不确定报价是否真的必要。

# c# - 如何在 JavaScript 中获取具有多个级别的 JSON 字符串的子元素

> ID：13773874
> 
> 赞同：-1
> 
> 时间：2012-12-08T02:30:28.427
> 
> 标签：c#, javascript, json, json.net

这是我由 C# JSON 解析器生成的 JSON 字符串：

```
{
    "NewDataSet": {
        "Table": [
            {
                "ResultId": "1",
                "AttachmentId": "1",
                "AttachmentName": "Report1",
                "RowsCount": "34",
                "NotifyUserName": "william",
                "InsBy": "developer",
                "InsAt": "2012-12-07T17:28:01.46+08:00",
                "IsNotify": "false"
            },
            {
                "ResultId": "2",
                "AttachmentId": "2",
                "AttachmentName": "Report2",
                "RowsCount": "37",
                "NotifyUserName": "william",
                "InsBy": "developer",
                "InsAt": "2012-12-07T17:28:15.57+08:00",
                "IsNotify": "false"
            },
            {
                "ResultId": "3",
                "AttachmentId": "3",
                "AttachmentName": "Report3",
                "RowsCount": "69",
                "NotifyUserName": "william",
                "InsBy": "developer",
                "InsAt": "2012-12-07T17:28:25.58+08:00",
                "IsNotify": "false"
            }
        ]
    }
} 
```

然后我想将字符串解析到前端 JavaScript 以迭代值。我是这样做的。

```
 var jsonText;
        $.ajax({
            type: "POST",
            url: "Default.aspx/MethodWithNoParameterJSON",
            data: {},
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            async: true,
            cache: false,
            success: function (msg) {
                //rulesName = dbtitle+msg.d;
                //rulesCount = +msg.d;
                jsonText = msg.d;
               alert(jsonText.NewDataSet.Table[0].ResultId), 
            },
            error: function (x, e) {
                alert("The call to the server side failed. " + x.responseText);
            }
        }); 
```

如何获取子元素数据`jsonText.NewDataSet.Table[0].ResultId`？每当我调用`alert(jsonText.NewDataSet.Table[0].ResultId)`时，它总是会提示 null 或 undefined 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:43:45.683

你为什么`msg.d`要设置你的`jsonText`变量？`.d`财产从何而来？该`msg`参数应该已经是从您的 JSON 响应创建的对象。试试这个：

```
msg.NewDataSet.Table[0].ResultId 
```

（请注意，您的`jsonText`变量命名错误：此时您拥有的不是 JSON 或“文本”，它是一个对象 - 或者，在您的情况下，`undefined`因为`msg.d`未定义。但您正试图将其用作对象，不像 JSON。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:36:50.343

错字？我认为应该是

```
jsonText.NewDataSet.Table[0].ResultId // replace RulesId with ResultId 
```

# jquery - 从 UL 中的每个 LI 中选择文本

> ID：13773875
> 
> 赞同：0
> 
> 时间：2012-12-08T02:30:49.637
> 
> 标签：jquery, jquery-mobile

无法从 UL 中的每个 LI 中选择和收集文本。请看我到目前为止的例子，[http://jsfiddle.net/Twisty/YYbfY/](http://jsfiddle.net/Twisty/YYbfY/)

HTML

```
<div data-role="navbar" data-mini="true">
    <ul id="resultHeader">
        <li><span class='ui-btn ui-btn-inline ui-btn-up-b'><span class='ui-btn-inner'>Column A</span></span></li>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-b'><span class='ui-btn-inner'>Column B</span></span></li>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-b'><span class='ui-btn-inner'>Column C</span></span></li>
    </ul>
    <ul class='resultRow'>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d' title='mack5.com.'><span class='ui-btn-inner'>Item 1</span></span></li>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d'><span class='ui-btn-inner'>Item 2</span></span></li>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d'><span class='ui-btn-inner'>Item 3</span></span></li>
    </ul>
    <ul class='resultRow'>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d' title='mack5.com.'><span class='ui-btn-inner'>Item 1</span></span></li>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d'><span class='ui-btn-inner'>Item 2</span></span></li>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d'><span class='ui-btn-inner'>Item 3</span></span></li>
    </ul>
    <ul class='resultRow'>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d' title='mack5.com.'><span class='ui-btn-inner'>Item 1</span></span></li>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d'><span class='ui-btn-inner'>Item 2</span></span></li>
        <li><span class='ui-btn ui-btn-inline ui-btn-up-d'><span class='ui-btn-inner'>Item 3</span></span></li>
    </ul>
</div>

<textarea id="clipText-cell"></textarea>
<textarea id="clipText-row"></textarea>
<textarea id="clipText-all"></textarea>

<div id="copyPopup" data-role="popup" data-positionTo="origin">
    <div data-role="controlgroup" data-mini="true">
        <a href="" data-role="button" id="copyCell-btn">Copy '<span id="copyCellBtn-text"></span>'</a>
        <a href="" data-role="button" id="copyRow-btn">Copy Row</a>
        <a href="" data-role="button" id=copyAll-btn>Copy All Rows</a>
    </div>
</div> 
```

查询

```
var tapTimer, isTapHold = false;
$(".resultRow li").bind("vmousedown vmouseup", function(e) {
    var clickedLi = $(this).parent().parent("li");
    var clickedUl = clickedLi.parent("ul");
    var cellText = $(this).text();
    var rowText = "";
    var tableText = "";    
    var rows = [];
    var table = [];

    if (e.type == "vmousedown") {
        tapTimer = setTimeout(function() {
            isTapHold = true;
            //alert("Click-Hold for 1.5 seconds.");
            $("#copyCellBtn-text").html(cellText);
            $("#clipText-cell").val(cellText);
            $("#clipText-row").val(rowText);
            $("#clipText-all").val(tableText);            
            $("#copyPopup").popup("open", {
                x: (e.pageX + 100),
                y: (e.pageY + 60)
            });
        }, 1500);
    } else {
        // e.type = 'vmouseup'
        // Clear the timeout if not already reached
        clearTimeout(tapTimer);

        // if flag is set to false, regular tap or click
        if (!isTapHold) {
            // Not Click-Hold, do nothing
        }

        // Reset flag
        isTapHold = false;
    }
}); 
```

我想要发生的是当用户点击或点击按住时，会出现一个弹出菜单，他们可以在其中选择复制他们点击的文本、整行的文本或整个表格的文本。

为了收集行数据，我试图弄清楚如何遍历被点击`li`的每个，`ul`并收集相应的所有文本`textarea`。一旦我能得到这个，我就可以创建一个循环来对所有的`ul`'s 做同样的事情，以便以后收集所有的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:17:32.710

您可以使用下面的代码片段

```
var rowtext = "" ;
    var rowText = $.each(clickedLi.parent("ul").children("li"),function(){
        rowtext += $(this).find("span.ui-btn-inner").html(); }); 
```

检查小提琴

[http://jsfiddle.net/YYbfY/26/](http://jsfiddle.net/YYbfY/26/)

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:33:35.217

Twisty，我想我已经设法穿透了表格/行。

您可能想考虑按照以下几行组织代码：

```
$(function() {
    var $$ = {};//cache of static jQuery objects
    $$.copyCellBtn_text = $("#copyCellBtn-text");
    $$.clipText_cell = $("#clipText-cell");
    $$.clipText_row = $("#clipText-row");
    $$.clipText_all = $("#clipText-all");
    $$.copyPopup = $("#copyPopup");

    var tapTimer, 
        isTapHold = false, 
        tapHoldDelay = 1500,
        textJoinStr = ', ',//adjust as required
        textObj = { //fully populated later
            cell: '',
            row: '',
            table: ''
        };

    function makeTapTimer(e) {
        return setTimeout(function() {
            isTapHold = true;
            //alert("Click-Hold for 1.5 seconds.");
            $$.copyCellBtn_text.html(textObj.cell);
            $$.clipText_cell.val(textObj.cell);
            $$.clipText_row.val(textObj.row);
            $$.clipText_all.val(textObj.table);
            $$.copyPopup.popup("open", {
                x: (e.pageX + 100),
                y: (e.pageY + 60)
            });
        }, tapHoldDelay);
    }

    $("#resultHeader").closest("div").on("vmousedown", ".resultRow li", function(e) {
        tapTimer = makeTapTimer(e);

        var clickedCell = $(this);//==button
        var clickedUl = clickedCell.closest("ul");//==row
        var clickedTable = clickedCell.closest("div");//==table

        textObj.cell = clickedCell.text();

        textObj.row = clickedUl.data('text');
        if(!textObj.row) {
            textObj.row = $.map(clickedUl.find("li"), function(btn, i) {
                return $(btn).text();
            }).join(textJoinStr);
            clickedUl.data('text', textObj.row);
        }

        textObj.table = clickedTable.data('text');
        if(!textObj.table) {
            textObj.table = $.map(clickedTable.find(".resultRow li"), function(btn, i) {
                return $(btn).text();
            }).join(textJoinStr);
            clickedTable.data('text', textObj.table);
        }
    }).on('vmouseup', function() {
        clearTimeout(tapTimer);
        isTapHold = false;
    });
}); 
```

*未经测试 - 可能需要调试*

# java - 无法让 JScrollPane 在 JFrame 上工作

> ID：13773876
> 
> 赞同：4
> 
> 时间：2012-12-08T02:30:51.693
> 
> 标签：java, swing, jscrollpane

请查看下面的小代码。出现滚动窗格，但不显示滑块。即使我调整框架的大小，滑块也不会。请帮忙。

```
import javax.swing.*;
public class sample {
    static JFrame frame;
    public static void main(String[] args) {
        String Msg = "Sample Message To Test Scrolling";
        frame = new JFrame("Sample Program");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(600, 600);
        JPanel panel = new JPanel();
        panel.setLayout(null);

        for (int ypos = 0, i = 0; i < 40; i++) {
            JLabel label = new JLabel("" + i + " " + Msg);
            label.setFont(new Font("Courier", Font.BOLD, 12));
            panel.add(label);
            label.setBounds(10, ypos + 5,
                            label.getPreferredSize().width,
                            label.getPreferredSize().height);
            ypos += label.getPreferredSize().height;
        }
        JScrollPane scroll = new JScrollPane(panel,
                                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                                JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        frame.setLayout(new BorderLayput());
        frame.add(scroll);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T02:32:58.890

只有当 JScrollPane 的视口所包含的组件大于视口时，滑块才会出现。根据您发布的代码，我不明白为什么您的组件会大于视口，因为面板的大小将基于其首选大小，这是永远不会改变的，因为您正在使用它向其中添加组件空布局。

顺便说一句，您几乎不应该使用空布局。

例如：

```
import java.awt.Dimension;
import java.awt.GridLayout;

import javax.swing.*;

public class Sample2 {
   private static final int PREF_W = 600;
   private static final int PREF_H = PREF_W;
   private static final int MAX_ROWS = 400;
   private static final String TEXT_BODY = "Sample Message To Test Scrolling";;

   private static void createAndShowGui() {
      JPanel panel = new JPanel(new GridLayout(0, 1));
      panel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
      for (int i = 0; i < MAX_ROWS; i++) {
         String text = String.format("%03d %s", i, TEXT_BODY);
         JLabel label = new JLabel(text);
         panel.add(label);
      }

      JScrollPane scrollPane = new JScrollPane(panel);
      scrollPane.setPreferredSize(new Dimension(PREF_W, PREF_H));

      JFrame frame = new JFrame("Sample2");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(scrollPane);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# mercurial - TortoiseHG 如何在 mercurial 中合并？

> ID：13773879
> 
> 赞同：1
> 
> 时间：2012-12-08T02:31:50.163
> 
> 标签：mercurial, merge, tortoisehg

我有两台机器，window 7 和 TortoiseHG 2.6 和 Linux 和 TortoiseHG 1.5。我使用 bitbucket 作为网站来保存我的集中存储库。窗口机器与 bitbucket 用户帐户 Cassie-win 相关联，而 linux 机器与 bitbucket 用户帐户 Cassie-linux 相关联。这是我执行的步骤。

*   在 butbucket Cassie-linux 帐户上创建了一个空的集中式存储库
*   在linux机器上本地创建两个文件file1.txt和file2.txt并推送到Cassie-linux账号。
*   将用户 Cassie-win 添加到存储库
*   将存储库克隆到窗口机器，在那里对 file2.txt 进行更改并将其推送回集中存储库。
*   同时，还要对linux机器上的file2.txt做一些修改，并在本地提交
*   然后我从 Cassie-linux 帐户的集中存储库中提取更改到我的本地 linux 机器。现在我的 linux 本地存储库有两个头，因为 file2.txt 中的内容不同，我想将它们合并在一起。

我在我的 linux 机器上使用了 TortoiseHG 的“合并”工具来合并这两个头。然而，它一直未能如愿。我试了几百次，不知道我哪里弄错了。file1 和 file2 都是只有三行的测试文件。我还使用命令“hg resolve file2.txt”来检查错误。但是，它只显示合并失败，并没有显示太多信息。有谁知道如何使用 TortoiseHG 合并工具来合并两个头？阻止 TortoiseHG 合并两个头可能是什么问题？

我嵌入了我在具有 TortoiseHg 1.5 的 Linux 机器上拍摄的屏幕截图。
![在此处输入图像描述](../Images/970ff610335159b5d582c02b895b2b36.png)

我右键单击“来自 Cassie-win 帐户”，它具有“合并”选项。然后，我使用“合并”工具单击“合并”选项，但失败并显示如下错误消息。 ![在此处输入图像描述](../Images/260a5f83c90f6a2a35b175f1b27f3c32.png)

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T13:38:05.497

首先要做的事情：合并只是创建一个新的文件版本。您必须先提交它，然后才能看到它或将其推送到您的其他 repo 克隆。

现在，如果您正在执行合并并且同一行或相邻行已在两个合并父项中进行了修改，则自动合并将不会成功，并且您将被要求选择在每个冲突点执行的操作。`Kdiff3`，TortoiseHG 用于在 Windows 上合并文件的工具不是很直观，所以这里有一个概述：

1.  如果有多个文件要合并，您将看到一个目录控件。导航到其中一个文件并将其打开，以便您并排看到两个文件版本。

2.  根据具体情况，您现在可能必须激活“合并此文件”（在“合并”菜单和工具栏上），这将在其他两个下方显示文件的第三个版本（合并结果）。

3.  您现在可以从一个更改导航到另一个更改，然后单击`A`和`B`按钮来选择要使用的更改。请注意，按钮是切换按钮，可以同时激活两者（将两个版本导入合并）。另请注意，您还将看到*可以*自动合并的差异。一般来说，您可以不理会它们（有导航按钮直接转到下一个*未解决*的差异）。

一旦你弄清楚了如何处理所有这些并为每个差异选择了一个版本，你就可以保存并继续下一个文件。完成后，您的合并就可以提交了。

**编辑：** 所以您需要在 Linux 端执行此操作，而您没有`Kdiff3`. 好的，然后用老式的方式来做：使用命令行和常规编辑器。

1.  当合并失败时，冲突的文件变成包含两个修订的上下文差异。用你最喜欢的编辑器打开它，仔细查看并清理每个上下文差异区域（当你看到它们时你就会知道它们），直到你拥有一个干净、可用的文件，就像你想要的那样。

2.  退出，进入命令行并输入`hg resolve -m file2.txt`. 这将从冲突列表中删除该文件。

3.  当您对所有冲突的文件（您可以使用 列出它们`hg resolve -l`）完成此操作后，您将被允许提交，您的麻烦就结束了。

PS。如果您不喜欢您拥有的合并工具，请考虑安装 kdiff3 （它[可用于 linux](http://packages.debian.org/unstable/kde/kdiff3)，但不知道它有多好用），或者`p4merge`按照@LazyBadger 的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:32:52.393

通过 TortoiseHg 中的“合并”，您的意思是您在将工作目录更新到另一个头后，从一个头的上下文菜单中尝试了“与本地合并”？如果是这样，您应该已经看到一个向导引导您完成合并的步骤。如果 TortoiseHg 不能自动合并两个头，它会期望你进行干预。一旦它要求您这样做，您就有几个选项，包括“Mercurial Resolve”和“Tool Resolve”。如果您可以发布有关合并“失败”时看到的错误的更多详细信息，我们可能会更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T13:44:57.390

**旁注**

1.  您可以在没有“中间位桶”的情况下在主机之间交换数据：仅`hg serve`在两台主机`hg pull <PARTY>`上和另一侧
2.  您可以使用来自我们两个主机的单个 BB 帐户（BB 端的管理较少），并且仅通过变更集中的用户名来区分 Bitbucket 界面中每个变更集的来源

**关于合并的问题**

当（在*任何*SCM 中）您尝试合并两条不同的编码行时，有两种可能的情况

*   独立更改不重叠，无需用户干预即可组合成共同后代。如果这种情况合并“刚刚发生”
*   更改是相交的，一些字符串处于冲突状态：即我们对一些旧数据有两个不同的更改。在这种情况下，需要用户选择，并且 SCM 或存储带有冲突部分的合并结果（并在适当的用户操作之前将合并记录为不成功和未完成）或运行*用户定义的合并解析器*（阅读“可视化合并工具”）

在您的情况下，显然，他有第二种情况：merge-sources 中来自 3 的某些字符串发生冲突，并且您尚未在 TortoiseHG Diff/Merge 工具中进行配置（`TortoiseHG`- `Global Setting`- `TortoiseHG`）

拥有和添加这些工具将是未来的最佳选择。现在您可以手动编辑冲突文件并在冲突行中选择正确的数据，将冲突标记为已解决（检查文件的 TortoiseHG 上下文菜单），删除临时文件，最后提交合并

![在此处输入图像描述](../Images/3b16704f3174bd57a2ab45ac290995e0.png)

# hashmap - OpenCL中的HashMap？

> ID：13773880
> 
> 赞同：3
> 
> 时间：2012-12-08T02:31:57.797
> 
> 标签：hashmap, opencl

是否可以在 OpenCL 中创建一个简单的 HashMap？例如，所有键都具有 type`long`和所有值 type `int`，并且永远不必修改（即以只读方式传递给内核）。

HashMap 的构建可能需要一些时间（是否在 CPU 上完成一次并且永远不必再次修改），但读取访问会很频繁，因此`get(long key, *hashmap H)`应该很便宜。

OpenCL 中是否有任何已知的实现？我没能找到他们。如果我必须从头开始编写一个，哪种 HashMap 实现最适合这种用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:57:52.600

我认为使用[开放寻址](http://en.wikipedia.org/wiki/Hash_table#Open_addressing)的简单哈希表实现可以满足您的要求：

*   就其性质而言，它存储在单个缓冲区中，因此传输到内核是微不足道的。
*   然后很容易在内核中编写 getter 逻辑，尤其是当您不需要任何同步（只读）时。

因此，当第一项是键，第二项是值时，传递一个缓冲区`long2`或一个缓冲区，并且还传递缓冲区大小；`struct { long key; int val; }`现在编写一个常规的开放地址获取器。

# c# - 重新打开后继续在文件末尾写入

> ID：13773881
> 
> 赞同：0
> 
> 时间：2012-12-08T02:31:59.997
> 
> 标签：c#, file, indexing, filestream, binarywriter

[在 C# 中]如果我保持文件打开，我可以写入多个输入并保存它，但如果我关闭它，重新打开它并再次开始写入，它会从开头开始并覆盖所有内容。我试着用它打开它`FileMode.Append`并做一个`File.Seek(0, SeekOrigin.End);`

这是文件打开代码：

```
else if (File.Exists((dossier_defaut + nom_lexique)) && File.Exists((dossier_defaut + nom_index))) //si les deux fichiers existent
{
                //ouverture des fichiers
    fs_lxq = File.Open((dossier_defaut + nom_lexique + extLexique), FileMode.Append, FileAccess.ReadWrite);  // Création du fichier
    fs_idx = File.Open((dossier_defaut + nom_index + extIndex), FileMode.Open, FileAccess.ReadWrite);  // Création du fichier
}
else //aucun fichier existe
{
                    //création de deux nouveaux fichiers
    fs_lxq = File.Open((dossier_defaut + nom_lexique + extLexique), FileMode.Create, FileAccess.ReadWrite);  // Création du fichier
    fs_idx = File.Open((dossier_defaut + nom_index + extIndex), FileMode.Create, FileAccess.ReadWrite);  // Création du fichier

} 
```

我怎么能保证它总是会写到最后呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:58:47.183

您可以使用对象的`AppendText`方法`File`。见下文：

```
 using (StreamWriter sw = File.AppendText(path)) 
        {
            sw.WriteLine("This");
            sw.WriteLine("is Extra");
            sw.WriteLine("Text");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:20:55.780

好的，这只是我的条件中的一个愚蠢的错误，即在程序打开时检查文件是否存在我忘记添加文件扩展名，因此每次都找不到它并创建新文件

# java - 使用“import java.util.Random”如何获得不重复的结果？

> ID：13773884
> 
> 赞同：2
> 
> 时间：2012-12-08T02:33:11.713
> 
> 标签：java, arrays, string, netbeans, random

再会！我是编程的初学者，我一直在研究一个程序。它使用`import java.util.Random`是因为我希望我的问题以没有特定顺序随机出现。但问题和唯一的问题是问题重复了。例如，“你快乐吗？” 被问了三遍“你想要 iPhone 5 吗？” 甚至没有被问到。我应该怎么做才能不按特定顺序显示所有问题，这样它就不会多次选择同一个问题？到目前为止，这就是我所拥有的。

```
import java.util.Random;
public class RandomQuiz {
    public static void main (String args []){
        int a, b=0;
        String arr [];
        arr = new String [5];
        a = b;
        arr [a] = "Are you happy? \na. yes\t\tb. no\nc. maybe\td. no comment";
        a = b+1;
        arr [a] = "Did you eat breakfast? \na. yes\t\tb. no\nc. maybe\td. no comment";
        a = b+2;
        arr [a] = "Have you watched tv? \na. yes\t\tb. no\nc. maybe\td. no comment";
        a = b+3;
        arr [a] = "Do you want iPhone 5? \na. yes\t\tb. no\nc. maybe\td. no comment";
        a = b+4;
        arr [a] = "Will you have iPad mini? \na. yes\t\tb. no\nc. maybe\td. no comment";

        //prints array values in random
        Random randnum = new Random ();
        for (int count = 1; count <=5; count++){
            a = randnum.nextInt (5);
            System.out.println ("Question # " + count + "\n" + arr [a]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T02:36:54.540

1 到 5 之间的真正随机整数几乎肯定会有大量重复数字。如果您只想将数组的元素按随机顺序排列，那么您应该使用`Collections.shuffle`：

```
public static void main(String[] args) {
  String[] array = {
    "Are you happy? \na. yes\t\tb. no\nc. maybe\td. no comment",
    "Did you eat breakfast? \na. yes\t\tb. no\nc. maybe\td. no comment",
    "Have you watched tv? \na. yes\t\tb. no\nc. maybe\td. no comment",
    "Do you want iPhone 5? \na. yes\t\tb. no\nc. maybe\td. no comment",
    "Will you have iPad mini? \na. yes\t\tb. no\nc. maybe\td. no comment"
  };

  List<String> items = Arrays.asList(array);
  Collections.shuffle(items);

  for (int index = 0; index < 5; index++) {
    System.out.println("Question # " + (index + 1) + "\n" + items.get(index));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:45:42.777

尝试这个

```
 Random randnum = new Random (System.currentTimeMillis());
    java.util.HashSet<Integer> myset = new java.util.HashSet<Integer>();
    for (int count = 1; count <=5; count++){
        while(true)  {
            a = randnum.nextInt (5) ;
            if(!myset.contains(a)) { myset.add(new Integer(a)); break;}
        }
        System.out.println ("Question # " + count + "\n" + arr [a]);
    } 
```

# html - 通过 CSS 到表格的圆角边缘

> ID：13773888
> 
> 赞同：1
> 
> 时间：2012-12-08T02:34:12.240
> 
> 标签：html, templates, border, css

我正在开发一个 HTML/CSS 电子邮件模板，并希望将 3px 的边框半径添加到外部表/容器中。

这是[页面](http://rainleader.com/basic.html)。我尝试将其添加为样式，`table td {}`但没有成功。我应该定位另一个元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:59:24.157

使用伪选择器相对容易。

```
table{
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border-collapse: separate;
}
/* Top Left */
table tr:first-child td:first-child{
    -webkit-border-top-left-radius: 5px;
    -moz-border-radius-topleft: 5px;
    border-top-left-radius: 5px;
}
/* Top Right */
table tr:first-child td:last-child{
    -webkit-border-top-right-radius: 5px;
    -moz-border-radius-topright: 5px;
    border-top-right-radius: 5px;
}
/* Bottom Left */
table tr:last-child td:first-child{
    -webkit-border-bottom-left-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    border-bottom-left-radius: 5px;
}
/* Bottom Right */
table tr:last-child td:last-child{
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-right-radius: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:05:43.533

这取决于许多因素，即：

*   浏览器（FF、Chrome、IE 等）
*   平台（PC/台式机/手机等）
*   CSS 级别

但是，通常，您不能为单个表格元素设置样式，例如`<tr>`或`<td>`。

你可以做的是：

```
 table {
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    border-collapse: separate;
    overflow: hidden;
 } 
```

对于表格和其他元素...

表必须被视为一个整体。但是您可以将上述内容应用于`<span>`等`<div>`。

对于 IE（由于缺乏标准化，通常会导致大量 CSS 问题），您可以使用条件 CSS 作为主要 CSS 元素的补充：

```
<!--[if IE]>
  <link rel="stylesheet" type="text/css" href="ie-css.css" />
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:13:19.107

如果你想用更少的代码做到这一点，你可以像这样添加“溢出隐藏到表格元素：

```
table{
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border-collapse: separate;
    overflow: hidden;
} 
```

这样你就不需要所有的伪选择器

# c - 使用 libJPEG 访问 DCT 系数和量化值

> ID：13773889
> 
> 赞同：0
> 
> 时间：2012-12-08T02:34:20.043
> 
> 标签：c, image-processing, jpeg, libjpeg, dct

我正在读取一个位图文件并使用 libJPEG 库将其压缩为 JPEG 文件，这很简单。但现在我想在压缩期间将每个中间阶段，即 DCT 和量化写入文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:09:05.150

是的，你可以，libjpeg 附带的帮助文件解释了如何访问 DCT 系数。然后，您可以展开随附的 example.c 文件来进行压缩并检查 DCT 系数。

# ruby - 如何使用 webmock 正则表达式匹配器？

> ID：13773895
> 
> 赞同：28
> 
> 时间：2012-12-08T02:35:00.337
> 
> 标签：ruby, regex, rspec, webmock

如何匹配如下 URL：

```
http://www.example.com/foo/:id/bar
http://www.example.com/foo/1/bar
http://www.example.com/foo/999/bar 
```

stub_request(:post, "www.example.com")

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-09-13T15:17:44.523

您可以在 Ruby 中使用`%r{}`而不是`//`您的正则表达式，以避免必须转义 URL 中的正斜杠。例如：

```
stub_request(:post, %r{\Ahttp://www.example.com/foo/\d+/bar\z}) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-02-17T15:31:53.440

stub_request 的第二个参数必须是正则表达式，而不是字符串。

```
stub_request(:post, /http:\/\/www.example.com\/foo\/\d+\/bar/) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-09T12:24:54.247

`http://www\..*?\.com/foo/\d+/bar`应该为你工作。

# php - 受保护的 $var = null; 与受保护的 $var;

> ID：13773897
> 
> 赞同：2
> 
> 时间：2012-12-08T02:35:24.667
> 
> 标签：php, variables, null, initialization

我想知道下面两行代码之间是否有区别：

```
protected $var = null;
protected $var; 
```

我已经看到两者都被使用了，我想知道这是否只是一个偏好问题（也就是`$var;`将变量初始化为`null`无论如何），或者两者之间是否真的存在明显的差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T02:39:01.890

一样。这只是风格上的差异。

从[http://php.net/manual/en/language.types.null.php](http://php.net/manual/en/language.types.null.php)：

在以下情况下，变量被认为是空的：

*   它已被分配了常量 NULL。

*   **它尚未设置为任何值。**

*   它已被取消设置（）。

# python - 从 API 响应中获取值

> ID：13773905
> 
> 赞同：0
> 
> 时间：2012-12-08T02:37:18.683
> 
> 标签：python

如何使用 python 从这个 api 响应中获取值？

[http://tinychat.com/api/find.room/randomroom](http://tinychat.com/api/find.room/randomroom)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:48:19.363

它是基本的 XML 数据。您可以使用 XML 解析器对其进行解析。我不记得如何使用内置的 XML 解析器了，所以这里是使用 BeautifulSoup 的方法：

```
import requests
from BeautifulSoup import BeautifulStoneSoup

data = requests.get('http://tinychat.com/api/find.room/randomroom').text
soup = BeautifulStoneSoup(data)

response = dict(soup.find('response').attrs)
geoip = dict(soup.find('geoip').attrs) 
```

现在，`response`包含`geoip`Python 字典，您可以轻松使用：

```
{
    u'rt': u'5.47',
    u'roomtype': u'show',
    u'name': u'tinychat^randomroom',
    u'referer': u'',
    u'rtmp': u'rtmp://209.212.144.86:443/tinyconf',
    u'time': u'1354934566',
    u'result': u'RES'
} 
```

# jquery - 使用 Pyramid 处理 ajax 文件上传服务器端

> ID：13773907
> 
> 赞同：1
> 
> 时间：2012-12-08T02:37:46.783
> 
> 标签：jquery, python, ajax, pyramid

我使用以下代码上传了 Ajax 文件：

```
$('#photo-input:file').change(function() {
                var photo = this.files[0];
                var caption = $('.photo-caption').val();
                type = photo.type;
                if (photo.type != 'image/png' && photo.type != 'image/jpg' && !photo.type != 'image/gif' && photo.type != 'image/jpeg' ) {
                    alert('Sorry, you may only upload png, jpg, jpeg, or gif images.');
                    return false;
                }

                $('.photo-post-submit').click(function () {
                    var formData = new FormData();
                    formData.append('photo', photo);
                    $.ajax({
                        url: '/post',
                        type: 'POST',
                        data: {'photo' : formData, 'caption' : caption},
                        cache: false,
                        contentType: false,
                        processData: false,
                        success: function () {
                        }
                    }, 'json');
                });

            }); 
```

但是当我打电话`request.POST['caption']`或`request.POST['photo']`收到错误消息时：

```
Not an HTML form submission (Content-Type: application/xml) 
```

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T08:39:09.087

看起来好像您对`$.post`and`$.ajax`方法感到困惑，因为您传入了一个单独的`json`参数（它`$.ajax`不接受作为 dataType 参数）。

此外，您真的不应该将 设置`contentType`为`false`，*而*您正在设置`processData`为`false`，这对于 Pyramid 与 jQuery 对这种组合的影响有什么关系会造成非常混乱的组合。

要将`cache`参数设置为 POST 到服务器`false`，请使用：

```
$.ajax({
    url: '/post',
    type: 'POST',
    data: {'photo' : formData, 'caption' : caption},
    cache: false,
    dataType: 'json',
    success: function () {
    }
}); 
```

请注意，`dataType`设置为`json`，这意味着您的 Pyramid 视图需要*返回*JSON，jQuery AJAX 代码需要 JSON 响应。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T03:15:42.017

对于文件上传，请使用 JQuery .upload 插件。有关更多详细信息，请查看[https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)。

# c# - 在c#中使用linq to xml获取节点名称及其在xml中的对应值？

> ID：13773909
> 
> 赞同：0
> 
> 时间：2012-12-08T02:37:47.130
> 
> 标签：c#, xml, linq-to-xml

我想使用 linq to xml 在 xml 文件中获取节点的名称及其对应的值。

我通常做这行代码来获取节点的值并将其存储在列表中

```
var qry = from c in XElement.Load(commonpath).Elements("Root") select c;

        List<string> result = new List<string>();
        foreach (var i in qry)
        {
            result.Add(Convert.ToString(i));
        } 
```

但现在我希望节点名称和值都将其存储在字典中

```
Dictionary<string, double> amount = new Dictionary<string, double>();
        var qry = "";//what query here
        foreach(var i in qry)
        {
            amount.Add("Node Name", "Value");
        } 
```

那么对于这种情况的正确查询是什么，请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:00:30.680

我希望这是您正在寻找的：

```
 var doc = XDocument.Parse(@"
         <root>
            <firstname>Lucas</firstname>
            <lastname>Ontivero</lastname>
         </root>");
    var qry = from element in doc.Element("root").Descendants() select element;
    var result = qry.ToDictionary(e => e.Name, e => e.Value);
    result.ToList().ForEach(x=> Console.WriteLine("{0}:{1}", x.Key, x.Value )); 
```

它打印：

```
  名字：卢卡斯
  姓氏：Ontivero

```

让我知道它是否有用。祝你好运！

# c++ - OpenSceneGraph、HUD 和带纹理的 Qt 小部件问题

> ID：13773916
> 
> 赞同：0
> 
> 时间：2012-12-08T02:39:32.553
> 
> 标签：c++, qt, openscenegraph

所以我有一个 Qt 应用程序。我在外面有一些基本的 Qt GUI，但是我有一个 Qt 小部件，`OpenSceneGraph`用于渲染 3D 场景。为了让屏幕内的事情变得更复杂，我有一个可以打开和关闭的 HUD。这个 HUD 由一些图形元素和一个渲染到纹理的 Qt Widget 组成。

我基本上可以正常工作，但是我在 HUD/Qt 小部件中遇到了一些尺寸问题。当我第一次将 HUD 切换为可见时，Qt 小部件在那里，但太大了。我可以更改大小，但无论如何，当我第一次按下一个键时，Qt 小部件会自动调整大小以适合我给它的纹理区域（这是我所期望的），但是这个自动调整大小的小部件不适合该区域正确。无法读取小部件包含的表格。

为了帮助我有两个屏幕截图。第一个是在我输入密钥之前：
[http](http://cerrnim.com/wp-content/uploads/2012/12/before.png)
://cerrnim.com/wp-content/uploads/2012/12/before.png 第二个是在我输入密钥之后：
[http ://cerrnim.com/wp-内容/上传/2012/12/after.png](http://cerrnim.com/wp-content/uploads/2012/12/after.png)

此外，这里有一些代码片段展示了我如何创建 HUD。它当然是更大计划的一部分，但希望这是足够的信息。

```
/* AUX function to create HUD geo. */                                           
osg::Geode* HUDGeometry( int x1, int y1, int x2, int y2,                        
    std::string model, HUDEvents event, NetworkViewer* viewer ) {               
  osg::Geometry* quad = osg::createTexturedQuadGeometry(osg::Vec3(x1,y1,0),     
                          osg::Vec3(x2-x1,0,0), osg::Vec3(0,y2-y1,0), 1, 1);    
  osg::Geode* geode = new osg::Geode( ) ;                                       

  geode->setName( model ) ;                                                     
  geode->setUserData( new HUDEvent( event, viewer ) ) ;                         

  osg::Texture2D* HUDTexture = new osg::Texture2D();                            
  HUDTexture->setDataVariance(osg::Object::DYNAMIC);                            
  osg::Image* hudImage = osgDB::readImageFile(model);                           
  HUDTexture->setImage(hudImage);                                               
  geode->getOrCreateStateSet()->setTextureAttributeAndModes(                    
    0, HUDTexture, osg::StateAttribute::ON);                                    

  geode->addDrawable( quad ) ;                                                  

  return geode ;                                                                
}      

/* Creates the HUD but does not display it yet. */                              
void NetworkViewer::initHUD( ) {                                                
  osg::MatrixTransform* mt = new osg::MatrixTransform;                          

  osg::Camera* hudCamera = new osg::Camera;                                     
  hudCamera->setReferenceFrame(osg::Transform::ABSOLUTE_RF);                    
  hudCamera->setViewMatrix(osg::Matrix::identity());                            
  //hudCamera->setProjectionResizePolicy(osg::Camera::FIXED);                   
  hudCamera->setProjectionMatrixAsOrtho2D(0,100,0,100);                         
  hudCamera->setClearMask(GL_DEPTH_BUFFER_BIT);                                 
  hudCamera->setRenderOrder(osg::Camera::POST_RENDER);                          
  hudCamera->setAllowEventFocus(true);                                          

  QWidget* widget = new QWidget;                                                
  layout = new QVBoxLayout( ) ;                                                 
  widget->setLayout(layout);                                                    
  widget->layout()->addWidget(((GUI*)view)->getTabs( ));                        
  //widget->setGeometry(0, 0, 500, 400);                                        

  osg::ref_ptr<osgQt::QWidgetImage> widgetImage = new osgQt::QWidgetImage(widget);

  osg::Geometry* quad = osg::createTexturedQuadGeometry(osg::Vec3(30,32,0),     
                                  osg::Vec3(40,0,0), osg::Vec3(0,35,0), 1, 1);  
  osg::Geode* geode = new osg::Geode;                                           
  geode->addDrawable(quad);                                                     

  osg::Texture2D* texture = new osg::Texture2D(widgetImage.get());              
  texture->setResizeNonPowerOfTwoHint(false);                                   
  texture->setFilter(osg::Texture::MIN_FILTER,osg::Texture::LINEAR);            
  texture->setWrap(osg::Texture::WRAP_S, osg::Texture::CLAMP_TO_EDGE);          
  texture->setWrap(osg::Texture::WRAP_T, osg::Texture::CLAMP_TO_EDGE);          
  mt->getOrCreateStateSet()->setTextureAttributeAndModes(0, texture, osg::StateAttribute::ON);

  mt->addChild(hudCamera);                                                      
  osgViewer::InteractiveImageHandler* handler =                                 
    new osgViewer::InteractiveImageHandler(widgetImage.get(), texture, hudCamera);

  mt->getOrCreateStateSet()->setMode(GL_LIGHTING, osg::StateAttribute::OFF);    
  mt->getOrCreateStateSet()->setMode(GL_BLEND, osg::StateAttribute::ON);        
  mt->getOrCreateStateSet()->setRenderingHint(osg::StateSet::TRANSPARENT_BIN);  
  mt->getOrCreateStateSet()->setAttribute(new osg::Program);                    

  quad->setEventCallback(handler);                                              
  quad->setCullCallback(handler);                                               

  hudCamera->addChild( geode ) ;                                                
  hudCamera->addChild( HUDGeometry(73,73,75,75,                                 
    "models/quit.png", EXIT_OBJ, this ));                                       
  hudCamera->addChild( HUDGeometry(25,25,75,75,                                 
    "models/hud.png", NO_EVENT, this ));           

  osg::Group* overlay = new osg::Group;                                         
  overlay->addChild(mt);                                                        

  root->addChild(overlay);                                                      
  HUD = hudCamera ;                                                             
  disableHUD( ) ;                                                               
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:11:51.950

我认为主要问题是您没有使小部件的尺寸适应您渲染它的四边形的尺寸。

我不确定`QWidgetImage`内部在做什么，但我想它只是将小部件渲染到适当大小的画布上并将结果转换为图像。在您的代码中，您将完整的图像（无论其尺寸或纵横比）映射到该四边形。如果您希望小部件适合四边形，则需要在创建它的图像之前调整小部件的大小。

# c++ - 如何将枚举类型的数据保存到文件中？

> ID：13773922
> 
> 赞同：1
> 
> 时间：2012-12-08T02:41:15.093
> 
> 标签：c++, qt, enums

我有枚举类型的数据，例如：

```
typedef enum
{
    NULLTYPE = 0U,
    ParameterGetType = 1U,
    ParameterSetType = 2U,
    ParameterStatusType  = 3U,
    EventActionType  = 4U,
    CommandType  = 5U,
    CommandGetType  = 6U,
    CommandSetType  = 7U,
    EquipmentIDGetType   = 15U,
    EquipmentIDSetType   = 16U,
    EquipmentIDStatusType = 17U,
    EventReportGetType  = 18U,
    EventReportSetType  = 19U,
    EventReportStatusType = 20U,
    PeriodicReportType = 21U,
    PeriodicReportGetType  = 22U,
    PeriodicReportSetType  = 23U,
    PeriodicReportStatusType  = 24U,
    CommandResponseType  = 25U,
    CommandResponseGetType  = 26U,
    CommandResponseSetType  = 27U,
    CommandResponseStatusType  = 28U,
    CommandResponseDeletedType  = 29U

}MessageType; 
```

我想使用 QByteArray 和 QFile::write(QByteArray) 将它保存到二进制文件中，
但我不知道数据的长度，以及数据的字节值的“分布”，<br>（如果数据为1，其他字节的值会为零吗？）
我认为不限于qt，如何将数据写入文件？

（对于短类型数据（MsgItem->PIN），我会这样做：）

```
QByteArray bytes;
bytes.append(((MsgItem->PIN)>>8) & 0xff);
bytes.append((MsgItem->PIN) & 0xff);
MsgFile->write(bytes);
MsgFile->flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:49:08.270

将枚举值转换为固定大小的整数（使用`<cstdint>`和 eg `uint16_t`）并执行您需要的任何字节排序操作。

# ruby - 使用 rbenv 编译 ruby 时如何传递编译标志？

> ID：13773929
> 
> 赞同：2
> 
> 时间：2012-12-08T02:42:58.930
> 
> 标签：ruby, compilation

我看到[这篇文章](http://alisnic.net/blog/making-your-ruby-fly/)解释了如何为 rvm 编译红宝石`-O3`等等，但是我如何用 rbenv 做同样的事情？特别是我想要`-O0 -g3`（没有优化，最高调试级别）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:41:05.443

您可以通过env 变量导出`CFALGS`或传递其他配置标志。但是，这可能是[ruby​​-build](https://github.com/sstephenson/ruby-build)实际上阻碍了您的情况。由于只需调用[ruby​​-build $DEFINITION ~/.rbenv/versions/$DEFINITION](https://github.com/sstephenson/ruby-build/blob/master/bin/rbenv-install#L81)并且可以使用任何 Ruby in ，您可以手动配置 Ruby：`ruby-build``CONFIGURE_OPTS``rbenv install``rbenv``~/.rbenv/versions/`

```
$ CFLAGS="-O0 -ggdb" ./configure --prefix=~/.rbenv/versions/1.9.3-debug
$ make
$ make install 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-25T00:47:26.307

这个[页面](http://albertogrespan.com/blog/installing-ruby-the-right-way-on-os-x-using-rbenv/)说你可以这样做：

> 如果你想用你喜欢的 OpenSSL、Readline 和 LibYAML 版本编译 Ruby，你只需要导出或附加 RUBY_CONFIGURE_OPTS 到你的安装命令。

我还没有尝试过，但是当我到达我的开发机器时我会尝试。

# python - 有没有办法让 Google App Engine 在遇到任何和所有 Python 错误时打印出来？我收到服务器错误，但不知道为什么

> ID：13773931
> 
> 赞同：1
> 
> 时间：2012-12-08T02:43:45.347
> 
> 标签：python, google-app-engine

*我*多次看到这个屏幕：

```
Server error  
The website encountered an error while retrieving http://localhost:8080/. It may be down for maintenance or configured incorrectly.
Here are some suggestions:
Reload this webpage later.  
HTTP Error 500 (Internal Server Error):  
An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

显然，这绝对没有提供任何有用的信息。所以我必须系统地撤销我之前编写的所有代码，每一步都重新加载页面，看看我是否找到了应用引擎不喜欢的东西，整个过程只是......令人沮丧。

我只花了半个小时来挖掘我的代码，试图找出有什么问题。结果 GAE 不喜欢我正在导入的模块——请注意，我仍然*不*知道它为什么不喜欢它，但这不是重点。

我的问题是，有没有办法报告任何和所有错误？我将 Debug 设置为 true，但是对于何时实际打印出堆栈跟踪非常挑剔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T05:20:36.660

无论您使用什么框架都会生成它。可能有一个异常处理程序会生成您的 500 消息。您必须找到它并对其进行调整以不捕获所有异常。

无法帮助您弄清楚在哪里，我不确定您使用的是什么框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:23:32.470

默认情况下 - 对于大多数框架 - 记录异常而不是输出给用户，因为向用户显示应用程序内部详细信息的堆栈跟踪没有意义。如果您正在运行 dev_appserver，这些会显示在控制台窗口中；在生产中，这些可以通过日志查看器访问。

# regex - Perl 正则表达式在元素中查找元素

> ID：13773938
> 
> 赞同：0
> 
> 时间：2012-12-08T02:44:22.453
> 
> 标签：regex, perl

我需要通过正则表达式`<div id="class1">`从`</div>`. `<div>`我可能在它的文本里面也有很多。请在下面找到代码

```
This is example <div id="class1">This is <div id="subclass1">This is </div> <div id="subclass2">This is </div> This is </div> This is example 
```

我试过下面的代码。但它只得到第`</div>`一个`<div id="subclass1">` 可以帮助我解决这个问题吗？

我试图捕获的代码是：

```
<div id="class1">(?:(?!<\/div>).)*?</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T04:54:20.050

使用适当的 HTML 解析器。

```
use strict;
use warnings;
use feature qw( say );

use XML::LibXML qw( );

my $html = 'This is example <div id="class1">This is <div id="subclass1">This is </div> <div id="subclass2">This is </div> This is </div> This is example';

my $parser = XML::LibXML->new();
my $doc    = $parser->parse_html_string($html);
my $root   = $doc->documentElement();

for my $div ($root->findnodes('//div[@id="class1"]')) {
   say "[", $div->toString(), "]";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:54:17.210

```
$ echo 'This is example <div id="class1">This is <div id="subclass1">This is </div> <div id="subclass2">This is </div> This is </div> This is example' | sed -n 's/<div id="class1">\(.*\)<\/div>/\1/p'
This is example This is <div id="subclass1">This is </div> <div id="subclass2">This is </div> This is  This is example 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:34:06.000

您应该使用适当的 HTML/XML 解析器。如果您出于任何原因想使用正则表达式，嵌套正则表达式可以帮助您。（检查`perldoc perlre`细节。）

```
$re = qr{
  (
    <div[^>]*>
    (?:(??{$re}) | [^<>]*)*
    </div>
  )
}x;

print "$1\n" if(/$re/o); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T12:21:57.130

很多人总是说“使用正确的 HTML 解析器”来解析 HTML 而不是正则表达式。有些人没有意识到需要满足一些要求，而这些要求可能需要正则表达式。

`<div id=".+?">.*</div>`应该为你工作。

[http://regexr.com?33336](http://regexr.com?33336)

# database - Symfony2 Doctrine 使用缓存表

> ID：13773947
> 
> 赞同：0
> 
> 时间：2012-12-08T02:46:21.753
> 
> 标签：database, caching, symfony, doctrine, doctrine-orm

对于我正在进行的项目，我们有一个完全规范化的数据库，其中没有多余的信息。

我想保留这种方法，但还要添加“缓存”表，这些表本质上是具有预先计算信息的表。我希望能够将这些信息放在单独的表格中（然后可以根据需要将其删除并重新生成）。

例如，其中一部分涉及论坛。一个“缓存”值是用户发表的帖子数。无需将其保留在任何规范化表中，因为它可以根据与该用户链接的帖子计数来计算。然而，这是一个（相对）昂贵的调用，所以缓存表会为我跟踪这个值，我可以根据需要从中提取。

我也强烈考虑为此使用像 MongoDB 这样的 NoSQL 数据库，因为缓存的表基本上没有连接或外键（使其非常适合 MongoDB）。

任何想法我应该如何在 Symfony2 中使用 Doctrine 来解决这个问题？以前有人做过吗？

万分感谢！

# 更新

正如 greg0ire 评论的那样，Doctrine 看起来有一些内置的缓存功能：[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html)

有谁知道我是否可以使用它来缓存我的值而不将它们存储在数据库中？

例如，如果我有一个未映射的属性 $postCount，我可以使用 Doctrine 缓存该值（或者我猜是填充了该值的对象）吗？

这种方法的唯一问题（缓存到内存而不是数据库）是我们在集群环境中工作，所以我要么必须多次构建缓存（用户点击的每台服务器），要么设置 get a共享缓存服务器设置（这有点棘手）。

我将继续调查这条路线，但有人知道任何数据库存储方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:14:46.450

我想你可能正在寻找[Doctrine 的结果缓存](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/caching.html#result-cache) 这里是[sf2 配置的相关部分](http://symfony.com/doc/2.0/reference/configuration/doctrine.html#caching-drivers)。

# python - 我的代码有什么问题？当我调用新事件时，旧事件不会停止

> ID：13773948
> 
> 赞同：0
> 
> 时间：2012-12-08T02:46:33.067
> 
> 标签：python, events, tkinter

我的代码应该在画布中创建多个图像。我应该可以加入他们的行列。图像已启用拖放功能。我想我需要在画布中处理多个事件。每次我想在两者之间画一条线时，图像也会被拖动。我不知道如何将一个事件专门调用到我的画布 Pease 帮助并为糟糕的代码感到抱歉。

```
from Tkinter import *
import tkMessageBox

def callback():
        if tkMessageBox.askokcancel("Quit", "Do you really wish to quit?"):
            root.destroy()

class AppUI(Frame):
        def __init__(self, master):

            Frame.__init__(self, master, background="white", relief=FLAT, bd=2, height=768, width=1024)

            self.menubar = Menu(self)

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="File", menu=menu)
            menu.add_command(label="New")
            menu.add_command(label="Open")
            menu.add_command(label="Save As")
            menu.add_command(label="Save Copy of")
            menu.add_separator()
            menu.add_command(label="exit")

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="Edit", menu=menu)
            menu.add_command(label="Cut")
            menu.add_command(label="Copy")
            menu.add_command(label="Paste")

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="Debug", menu=menu)
            menu.add_command(label="Open Debugger")
            menu.add_command(label="Auto-debug")
            menu.add_command(label="Revert")

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="Run", menu=menu)
            menu.add_command(label="Stimulation")
            menu.add_command(label="Check")
            menu.add_command(label="Scan Module")

            menu = Menu(self.menubar)
            self.menubar.add_cascade(label="Help", menu=menu)
            menu.add_command(label="Help files")
            menu.add_command(label="FTA site")
            menu.add_separator()
            menu.add_command(label="Credits")

            self.master.config(menu=self.menubar)      

            f0 = Frame(root, background="white")

            b1 = Button(f0, bd=2, padx=15, pady=15, justify = LEFT)
            photo1 = PhotoImage(file="Images/p1.gif")
            b1.config(image = photo1,width="50",height="50", command=self.create_image1)
            b1.image = photo1
            b1.pack(side=LEFT)

            b2 = Button(f0, bd=2, padx=15, pady=15, justify = LEFT)
            photo2 = PhotoImage(file="Images/p4.gif")
            b2.config(image=photo2, width="50",height="50", command = self.create_image2)
            b2.image = photo2
            b2.pack(side=LEFT)

            b3 = Button(f0,padx=15, bd=2, pady=15, justify = LEFT)
            photo3 = PhotoImage(file="Images/p8.gif")
            b3.config(image=photo3, width="50",height="50", command = self.create_image3)
            b3.image = photo3
            b3.pack(side=LEFT)

            b4 = Button(f0,padx=15, bd=2, pady=15, justify = LEFT)
            photo4 = PhotoImage(file="Images/p7.gif")
            b4.config(image=photo4, width="50",height="50", command = self.create_image4)
            b4.image = photo4
            b4.pack(side=LEFT)

            b5 = Button(f0,padx=15, bd=2, pady=15, justify = LEFT)
            photo5 = PhotoImage(file="Images/p5.gif")
            b5.config(image=photo5, width="50",height="50", command = self.printtheline)
            b5.image = photo5
            b5.pack(side=LEFT)

            f0.pack(anchor=NW, side=TOP)

            self.imglist = []

            self.canvas = Canvas(self, height=750, width=1500, bg="white")
            self.canvas.pack(side=LEFT)

    def create_image1(self):
            photos1 = PhotoImage(file="Images/p1.gif")
            self.photos1=photos1
            self.imglist.append(photos1)
            self.img1=self.canvas.create_image(60, 60, image=photos1)
            self.canvas.bind("<B1-Motion>", self.move_image1)
            self.canvas.bind("<ButtonRelease-1>")

    def create_image2(self):
            photos2 = PhotoImage(file="Images/p4.gif")
            self.photos2=photos2
            self.imglist.append(photos2)
            self.img2=self.canvas.create_image(60, 60, image=photos2)
            self.canvas.bind("<B1-Motion>", self.move_image2)

    def create_image3(self):
            photos3 = PhotoImage(file="Images/p8.gif")
            self.photos3=photos3
            self.imglist.append(photos3)
            self.img3=self.canvas.create_image(60, 60, image=photos3)
            self.canvas.bind("<B1-Motion>", self.move_image3)

    def create_image4(self):
            photos4 = PhotoImage(file="Images/p7.gif")
            self.photos4=photos4
            self.imglist.append(photos4)
            self.img4=self.canvas.create_image(60, 60, image=photos4)
            self.canvas.bind("<B1-Motion>", self.move_image4)

    def move_image1(self, event):
            self.canvas.delete(self.img1)
            x = event.x
            y = event.y
            self.img1 = self.canvas.create_image(x, y, image=self.photos1, anchor='nw')
            self.canvas.update()
    def move_image2(self, event):
            self.canvas.delete(self.img2)
            x = event.x
            y = event.y
            self.img2 = self.canvas.create_image(x, y, image=self.photos2, anchor='nw')
            self.canvas.update()
    def move_image3(self, event):
            self.canvas.delete(self.img3)
            x = event.x
            y = event.y
            self.img3 = self.canvas.create_image(x, y, image=self.photos3, anchor='nw')
            self.canvas.update()
    def move_image4(self, event):
            self.canvas.delete(self.img4)
            x = event.x
            y = event.y
            self.img4 = self.canvas.create_image(x, y, image=self.photos4, anchor='nw')
            self.canvas.update()

    def getevent(self, event):
            self.x = event.x
            self.y = event.y

    def createline(self, event):
            x0,y0 = (self.x, self.y)
            x1,y1 = (event.x, event.y)
            self.canvas.create_line(x0,y0,x1,y1, fill="black")

    def printtheline(self):
            self.canvas.bind("<Button-1>", self.getevent)
            self.canvas.bind("<ButtonRelease-1>", self.createline)

root = Tk()
root.protocol("WM_DELETE_WINDOW", callback)

app = AppUI(root)
app.pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:02:31.557

每次您调用时，`self.canvas.bind("<B1-Motion>", ...)`您都在破坏您拥有的任何旧绑定并创建一个新绑定。因此，您最后一次调用它是每次都触发的那个。您也绝对不想`update`从绑定调用的函数中调用。

您需要做的是在鼠标按钮上创建三个不同的绑定。在按下按钮时，您需要确定光标下的对象并保存对它的引用，以及起始 x、y。在按钮运动时，您使用保存的参考并`canvas_move`使用当前 x,y 调用以计算与上次移动时间的增量。最后，在鼠标按下时，您可以完成任何需要完成的操作。

有关完整工作示例，请参阅问题[板绘图代码以移动椭圆的](https://stackoverflow.com/q/6740855/7432)[此答案](https://stackoverflow.com/a/6789351/7432)。

# objective-c - 如何将数据保存在 NSMutableArray 中

> ID：13773950
> 
> 赞同：0
> 
> 时间：2012-12-08T02:47:21.143
> 
> 标签：objective-c, arrays

**AAA.米：**

```
- (void)keepCurrentArray:(id)object
{
     _currentTest=[[NSMutableArray alloc]init];
    [_currentTest addObject:@"one"];
    [_currentTest addObject:@"two"];
    [_currentTest addObject:object];
    NSLog(@"My Array is:%@",_currentTest);
} 
```

BBB.m 类将对象传递给 AAA 类。现在，如果我将 X 传递给上述方法，那么数组将是：`one,two,X`。然后我将它发送 Y 并且数组将`one,two,Y`代替我想要完成的：`one,two,x,one,two,y`。那是因为我每次都在分配和初始化 _currentTest 吗？我该如何解决？

**更新：** 我有一些关于如何解决这个问题的建议，但没有一个对我有用。我用答案中的代码创建了一个新项目，当我尝试添加我得到的第二个对象时，我仍然得到相同的结果：`one, two, test`而不是`one,two,test,one,two,test`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:49:53.693

是的，这是因为您每次运行该方法时都在分配和初始化。相反，放入`_currentTest = [[NSMutableArray alloc] init];`AAA.m 的 init 方法。

**AAA.m**

```
-(id)init
{
    if ((self = [super init]))
        _currentTest = [[NSMutableArray alloc] init];
    return self;
}

- (void)keepCurrentArray:(id)object
{
    [_currentTest addObject:@"one"];
    [_currentTest addObject:@"two"];
    [_currentTest addObject:object];
    NSLog(@"My Array is:%@",_currentTest);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:45:46.517

`_currentTest`好吧，如果您希望能够在方法调用之间保留它， 那么您需要有一个属性。

把它放在你的 .h 文件中
`@property (nonatomic, copy) NSMutableArray * currentTest;`

这在小时 .m 文件中

```
- (NSMutableArray *)currentTest
{
    if (!_currentTest)
        _currentTest = [[NSMutableArray alloc] initWithCapacity:11];

    return _currentTest;
}

- (void)keepCurrentArray:(id)object
{
    [self.currentTest addObject:@"one"];
    [self.currentTest addObject:@"two"];
    [self.currentTest addObject:object];
    NSLog(@"My Array is:%@", self.currentTest);
} 
```

* * *

我只是试试你放在 drop box 上的代码，它的工作方式完全符合预期，数组保持它的价值和一切，
**但是**

> 正如它所假设的那样，这不是您想要实现的目标

你的问题不在 AAA.m，你的问题在 BBB.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ViewController *kios = [ViewController new];
    [kios keepCurrentArray:@"Test"];
    [kios keepCurrentArray:@"Test2"];

} 
```

我冒昧地将 添加`@"test2"`到您发送的代码中。如果你运行它，你会看到在第二次调用时你的数组仍然存在。
这里的`REAL`问题是您`NEW`每次都在创建一个 ViewController。一个全新的，它是空的（干净的）是正常的，它是一个新的。
如果我星期一买了一个记事本并把它填满，我不希望我在星期五买另一个记事本时已经填满了我在上一个星期一写的东西。
但这正是您对 ViewController 所期望的行为。

> 您需要将 NSMutableArray 存储在另一个不会被破坏和一遍又一遍地创建的对象中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T03:20:11.497

发生这种情况是因为每次调用方法时都会创建一个新数组。基本上，您需要查看它是否已经创建，并且仅在需要时才创建它。您可以将方法更改为：

```
- (void)keepCurrentArray:(id)object
{
    if (!_currentTest) 
    {
        _currentTest=[[NSMutableArray alloc]init];
    }

    [_currentTest addObject:@"one"];
    [_currentTest addObject:@"two"];
    [_currentTest addObject:object];
    NSLog(@"My Array is:%@",_currentTest);
} 
```

**编辑：**
除了上述问题外，您还需要更正此代码（已删除评论）：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ViewController *kios = [ViewController new];
    [kios keepCurrentArray:@"Test"];
} 
```

每次单击表中的一行时，此代码**都会创建一个新实例。`ViewController`**因为您正在创建一个**新**实例而不是重用旧实例，所以每次都从一个空数组开始。为了继续添加到同一个数组，您需要继续使用同一个视图控制器。

为此，您需要在 .h 文件中添加声明的属性，类似于`currentTest`声明的属性：

```
@property (strong,nonatomic) ViewController *kios; 
```

然后，更改您的操作，以便仅在需要时（第一次）创建一个新的视图控制器，然后在此之后重用它：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!_kios)
    {
        _kios = [ViewController new];
    }

    [_kios keepCurrentArray:@"Test"];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T13:15:03.997

`_currentTest=[[NSMutableArray alloc]init];`在一个方法上从来都不是一件好事！！！

根据命名约定，它似乎是 AAA 类的属性。所以对于属性，alloc+init 应该是 in`init`或`awakeFromNib`。所以如果只初始化一次。

但是，在某些情况下，init 被多次调用，然后您以前的值会丢失并添加新的集合。

所以你可以做的是创建另一个类并将这个`_currentTest`Array 放在那里并使其成为静态并在这里使用它。我希望这会正常工作。并确保在该类的 init 方法中只初始化一次，如下所示：

```
//**this is not compiled and checked may contains typo and errors**

@implementation Storage

static NSMutableArray *yourStaticArray;

-(id)init{
    self = [super init];
    if (self) {
        if (!yourStaticArray) {
            yourStaticArray=[NSMutableArray new];
        }
    }
    return self;
}

-(void)addYourStaticArray:(NSString *)val{
    [yourStaticArray addObject:val];
}

-(NSArray *)yourStaticArray {
    return yourStaticArray ;
}

@end 
```

# java - 防崩溃扫描器--无限 循环错误（开始 java）

> ID：13773952
> 
> 赞同：1
> 
> 时间：2012-12-08T02:47:32.390
> 
> 标签：java, java.util.scanner, infinite-loop

所以这是我的防崩溃扫描程序类的代码：

```
import java.util.*;
public class BPScanner {
    Scanner kb = new Scanner(System.in);
    public int nextInt() {
        while (true) {
            try {
                String input = kb.nextLine();
                int i = Integer.parseInt(input);
                return i;
        }
            catch (NumberFormatException e1) {}
            catch (NoSuchElementException e2) {}
            System.out.print("\nPlease input an integer: ");
            kb.close();
            kb = new Scanner(System.in);
        }
    }    
} 
```

我从另一个类调用这个类：

```
public void scnr() {
    while (true){
        System.out.print("Type a num (for test), (0 to break)");
        int n = bpkb.nextInt();
        if (n == 0) break;
        System.out.println(n);
    }
} 
```

当我运行它时，它会返回一个无限循环，不断说：

```
Please input an integer: 
Please input an integer: 
Please input an integer: 
Please input an integer: 
```

任何想法如何解决它？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:02:05.987

`nextInt`只需从函数中删除以下代码：

```
kb.close();
kb = new Scanner(System.in); 
```

# garbage-collection - 为什么垃圾收集 permgen 需要 3 次 Full GC？

> ID：13773954
> 
> 赞同：3
> 
> 时间：2012-12-08T02:47:46.433
> 
> 标签：garbage-collection, java-7, permgen

在 perm gen 被垃圾收集之前需要连续三个“Full GC”的原因是什么？

第一次 GC 将堆从 2.4gb 降低到 761mb，但未能大幅 GC perm gen，尽管它似乎恢复了 6K。

我们将忽略年轻代集合。

正如预期的那样，第二次 Full GC 对堆的作用很小，因为当时服务器负载很轻。奇怪的是它对烫发没有任何作用。

第三次 Full GC 最终将 perm gen 从其最大值 524mb 降低到 141mb。

这是 GC 日志中未经编辑的片段：

```
2012-12-07T19:46:40.731-0600: [Full GC [CMS: 2474402K->761372K(2804992K), 4.6386780 secs]     2606228K->761372K(3111680K), [CMS Perm : 524286K->524280K(524288K)], 4.6387670 secs] [Times: user=4.68 sys=0.00, real=4.63 secs] 
2012-12-07T19:46:45.374-0600: [GC [ParNew
Desired survivor size 17432576 bytes, new threshold 6 (max 6)
- age   1:      65976 bytes,      65976 total
: 1552K->8827K(306688K), 0.0199700 secs] 762925K->770200K(3111680K), 0.0200340 secs]  [Times: user=0.08 sys=0.00, real=0.02 secs] 
2012-12-07T19:46:45.395-0600: [Full GC [CMS: 761372K->752917K(2804992K), 3.7379280 secs]  770212K->752917K(3111680K), [CMS Perm : 524287K->524287K(524288K)], 3.7380180 secs] [Times: user=3.77 sys=0.00, real=3.74 secs] 
2012-12-07T19:46:49.135-0600: [Full GC [CMS: 752917K->693347K(2804992K), 3.2845870 secs] 752917K->693347K(3111680K), [CMS Perm : 524287K->141759K(524288K)], 3.2846780 secs] [Times: user=3.32 sys=0.00, real=3.29 secs] 
```

系统信息和 GC 标志：

```
Java 1.7.0_07, 64-Bit Server, Ubuntu 12.04 
-Xms3g -Xmx3g -XX:PermSize=512m -XX:MaxPermSize=512m
-XX:+UseConcMarkSweepGC 
```

编辑：我们有两个应用服务器；第二个表现出稍微不同的行为：只有两个 Full GC 条目。

```
2012-12-07T20:36:31.097-0600: [Full GC [CMS: 2307424K->753901K(2804992K), 5.0783720 secs] 2394279K->753901K(3111680K), [CMS Perm : 524280K->524121K(524288K)], 5.0784780 secs] [Times: user=5.12 sys=0.00, real=5.08 secs] 
2012-12-07T20:36:36.178-0600: [Full GC [CMS: 753901K->695698K(2804992K), 3.4488560 secs] 755266K->695698K(3111680K), [CMS Perm : 524121K->140568K(524288K)], 3.4489690 secs] [Times: user=3.48 sys=0.00, real=3.45 secs] 
```

所以看起来年轻一代很重要。也许它需要两个连续的 Full GC，在我们的特定设置中没有其他 GC（年轻代 GC）来垃圾收集 perm gen。我已经挖掘了很多，但我没有找到任何关于这种行为的讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:35:43.530

heap 和 perm gen 的并发收集不会相互影响，这并不让我感到惊讶，因为特别是 heap 收集本身已经是一个复杂的操作；这就解释了为什么 perm gen 只被第二次收集了。不过，我主要是猜测。

获取有关在 perm gen 中实际收集的内容（卸载的类、字符串？）的更多详细信息可能会很有趣。-XX:+PrintGCDetails 会有所帮助，也许 -verbose:class。

# java - 有什么方法可以将我的对象保存在数据库中，然后当我正常恢复它时？

> ID：13773956
> 
> 赞同：0
> 
> 时间：2012-12-08T02:47:54.800
> 
> 标签：java

我在 Java 上做一些项目......我需要将大量数据保存到不同的表中......但是一次提交，所以，为了便于控制，我创建了一个 dto 并定义了我的对象。 ..直到这里很好，现在我想保存它我想知道我是否可以序列化它并保存它，或者以某种方式将它保存在我的数据库中（使用新表）并将对象保存为自身（而不是创建字段对于每个属性并保存每个属性），然后取回所有对象并能够使用所有信息。

有什么办法吗？我正在搜索保存序列化对象并将它们取回，知道这是不是这样吗？

pd我正在使用JPA和spring

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:53:05.540

你的意思是这样吗？

[http://javapapers.com/core-java/serialize-de-serialize-java-object-from-database/](http://javapapers.com/core-java/serialize-de-serialize-java-object-from-database/)

否则使用一些对象关系机制：

[http://www.hibernate.org](http://www.hibernate.org)

[http://blog.mybatis.org](http://blog.mybatis.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T16:04:58.377

`find`如果您使用 JPA，正如您所说的那样，那么如果您执行 a或[createQuery](http://docs.oracle.com/cd/E13189_01/kodo/docs40/full/html/ejb3_overview_query.html)，您将取回您的对象：

```
public static MyObject findMyObject( String id ) {
    MyObject.PK pk = new MyObject.PK( id );
    MyObject result = entityManager.find( MyObject.class, pk );
    return result;    
} 
```

如果您定义了一个名为`MyObject`.

# java - 在定义之前引用匿名内部类

> ID：13773957
> 
> 赞同：0
> 
> 时间：2012-12-08T02:48:09.940
> 
> 标签：java, anonymous-inner-class

在[另一篇文章](https://stackoverflow.com/questions/13773662/how-to-sort-object-based-on-objects-attribute/13773705#13773705)中，有人告诉我，在使用它的函数“之后”（下）定义一个匿名内部类是错误的。但是，类似下面的内容编译并运行良好：

```
public class CompTest {

    public static void main(String[] args) {
        TreeSet<Integer> ts = new TreeSet<Integer>(intComp);
        ts.add(1);
        ts.add(2);
        ts.add(3);
        System.out.println(ts.toString());
    }

    private static Comparator<Integer> intComp = new Comparator<Integer>() {
        @Override
        public int compare(Integer i1, Integer i2) {
            return i2.compareTo(i1);
        }
    };

} 
```

这方面的官方说法是什么？我的猜测是，既然`intComp`是`static`，那么当类`CompTest`被“加载”时它会被实例化一次（不确定加载是如何发生的，因为只有一个 main 方法并且没有`CompTest`构造对象），因此当`main()`需要时`intComp`，它是可用的不管它在源文件中的哪个位置被实际定义。

即使它确实有效（出于上述原因甚至是不同的原因）......这是不好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T02:56:15.057

您指的是我相信的此评论：

> *“比较器定义应该在添加代码之前 – Bryan Glazer”*

没有技术理由将声明放在`intComp`声明之前（或之后）`main`。无论哪种方式都可以正常工作。

将比较器放在更早的唯一可能原因是风格。也就是说，`intComp`声明是一个静态*变量*，*通常*在类的开头声明变量。

[我倾向于同意风格点，但这是一个小问题。另外，如果是我，我会将比较器声明为`final`，给它一个更有意义的名称，并使用“常量”命名风格；例如`INT_COMP`（但更有意义）。]

* * *

Re Nambari 的评论：

> “我认为这是不好的做法，匿名课程是针对有限范围的，而不是针对全球范围的。”

这是无稽之谈。以这种方式使用匿名类是很常见的。当然，匿名类*也*可以在嵌套作用域中使用……这是它们的优点之一……但这绝不意味着*这种*模式是错误的。

# dart - 运行发布安装。请确保 Git 已正确安装。Mac OSX

> ID：13773959
> 
> 赞同：2
> 
> 时间：2012-12-08T02:48:11.423
> 
> 标签：dart

将 git: 依赖项放入 pubspec 时。我收到以下错误：

“运行 pub install”遇到问题。... ... ... 请确保 Git 已正确安装。

我的 git 安装在 1.8.0 版本，我可以通过我的 Mac OS X 10.7.5 上的终端访问它。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T11:55:59.520

我认为问题在于 git 的路径`PATH`仅在终端启动时加载。终端通过运行文件`~/.profile`或`~/.bash_profile`经常将路径导出到常用程序来做到这一点。因此，像 Dart Editor 这样的 GUI 应用程序无法“看到”git，因为它不运行这个启动文件。

不过，有一种方法可以使某些路径对所有应用程序可见。

请参阅：[https ://serverfault.com/questions/16355/how-to-set-global-path-on-os-x/277034](https://serverfault.com/questions/16355/how-to-set-global-path-on-os-x/277034)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T12:04:10.650

尝试创建一个文件：

```
/etc/paths.d/git 
```

具有以下内容：

```
/usr/local/git/bin/ 
```

如果您的 Git 安装位于其他位置，请相应地使用该路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T02:55:23.493

我决定只导航到 dart 项目文件夹并`pub install`在终端上运行。

# amazon-ec2 - 我创建的每个新密钥对的 Amazon EC2 权限被拒绝（公钥）

> ID：13773963
> 
> 赞同：1
> 
> 时间：2012-12-08T02:49:18.723
> 
> 标签：amazon-ec2, ssh-keys

我的第一个密钥对（eyelid_s.pem）工作正常。我将此密钥对用作访问实例以供个人使用。

现在我想为一个团队创建一个新的实例，所以我创建了一个新的密钥对 (SE_Server.pem) 作为新实例的默认密钥对。但它只是行不通。即使是旧 pem 也不适用于新实例。我在第一个实例上尝试了新的密钥对，但它们也不起作用。

我已经这样做了：

```
chmod 400 SE_Server.pem 
```

所以这不应该是文件权限问题。

```
OpenSSH_5.9p1, OpenSSL 0.9.8r 8 Feb 2011
debug1: Reading configuration data /etc/ssh_config
debug1: /etc/ssh_config line 20: Applying options for *
debug1: Connecting to ec2-23-20-118-96.compute-1.amazonaws.com  [2001:778::ffff:64:0:1714:7660] port 22.
debug1: Connection established.
debug1: identity file /Users/Lynn/.ssh/id_rsa type 1
debug1: identity file /Users/Lynn/.ssh/id_rsa-cert type -1
debug1: identity file /Users/Lynn/.ssh/id_dsa type -1
debug1: identity file /Users/Lynn/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.5p1 Debian-6+squeeze2
debug1: match: OpenSSH_5.5p1 Debian-6+squeeze2 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA 4d:28:fd:e1:aa:ba:89:9a:6e:e7:b3:d7:fa:15:bd:af
debug1: Host 'ec2-23-20-118-96.compute-1.amazonaws.com' is known and matches the RSA host key.
debug1: Found key in /Users/Lynn/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/Lynn/.ssh/id_rsa
debug1: Authentications that can continue: publickey
debug1: Offering RSA public key: /Users/Lynn/eyelid_s.pem
debug1: Authentications that can continue: publickey
debug1: Offering RSA public key: SE_Server_key.pem
debug1: Authentications that can continue: publickey
debug1: Trying private key: /Users/Lynn/.ssh/id_dsa
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

如果有人可以帮助我，我将不胜感激！这真的很烦人，因为我无法访问我的新实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T19:57:17.170

您可以拥有多个密钥（不在 AWS 控制台中，但您可以使用它们通过 ssh 进入您的机器），只需确保根据您的 ssh 版本将它们添加到“authorized_keys”或“authorized_keys2”中。

[http://www.idrix.fr/Root/Samples/pubkey2ssh.c](http://www.idrix.fr/Root/Samples/pubkey2ssh.c) - 一种导入 .pem 的方法，但我确信还有其他方法。

# scala - Scala in Depth 在这个例子中是如何隐式工作的

> ID：13773964
> 
> 赞同：1
> 
> 时间：2012-12-08T02:49:26.120
> 
> 标签：scala, implicit-conversion, traits

在 Scala in Depth 一书中。有这个隐式作用域的例子如下：

```
scala> object Foo {
     | trait Bar
     | implicit def newBar = new Bar {
     |   override def toString = "Implicit Bar"
     | }
     | }
defined module Foo

scala> implicitly[Foo.Bar]
res0: Foo.Bar = Implicit Bar 
```

我的问题是如何在上面给出的示例中隐式找到特征 Bar 的实现？我想我对隐式的工作方式有点困惑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T03:58:06.230

显然，对于 Foo.Bar，它像 Foo#Bar 一样工作，即`if T is a type projection S#U, the parts of S as well as T itself`在隐式范围内（规范的 7.2，但请参阅隐式范围的常用资源，例如您已经在咨询）。（更新：[这是这样一个资源。](https://stackoverflow.com/questions/5598085/where-does-scala-look-for-implicits)它并没有准确说明这种情况，以及一个真实的例子是否看起来像人为的。）

```
object Foo {
  trait Bar
  implicit def newBar = new Bar {
    override def toString = "Implicit Bar"
  }
}

class Foo2 {
  trait Bar
  def newBar = new Bar {
    override def toString = "Implicit Bar"
  }
}
object Foo2 {
  val f = new Foo2
  implicit val g = f.newBar
}

object Test extends App {
  // expressing it this way makes it clearer
  type B = Foo.type#Bar
  //type B = Foo.Bar
  type B = Foo2#Bar
  def m(implicit b: B) = 1
  println(implicitly[B])
  println(m)
} 
```

# javascript - 将事件侦听器添加到从数组创建的按钮

> ID：13773966
> 
> 赞同：1
> 
> 时间：2012-12-08T02:50:06.143
> 
> 标签：javascript, arrays, mouseevent, createelement

我正在使用从我的数据库中获取的“标签”创建按钮。我想为每个按钮添加鼠标事件侦听器。但是，侦听器似乎只对最后创建的按钮起作用。有任何想法吗？谢谢。

```
var tagsContainer = document.getElementById('tags');
var tagarray = placetags.split(" ");
for (var tagcounter = 0; tagcounter < tagarray.length; tagcounter++){
  var tag = document.createElement('input');
  tag.type = 'button';
  tag.value = tagarray[tagcounter];
  tag.id = 'tagbutton';
  tagsContainer.appendChild(tag);
  tag.addEventListener('mouseover' , function(){
    tag.style.color = 'white';
  });
  tag.addEventListener('mouseout' , function(){
    tag.style.color = 'orange';
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:52:32.793

您需要从此更改您的处理程序

```
tag.addEventListener('mouseover' , function(){
    tag.style.color = 'white';
}); 
```

对此

```
tag.addEventListener('mouseover' , function(){
    this.style.color = 'white';
}); 
```

由于使用您的原始代码，您的处理程序正在*关闭*tag 变量，因此`tag`最终会引用创建的最后一个按钮。

# c# - 通过 Lambda 表达式选择层次结构数据库

> ID：13773973
> 
> 赞同：1
> 
> 时间：2012-12-08T02:51:39.667
> 
> 标签：c#, sql, lambda

层次结构数据库通过 Lambda 表达式选择嗨我的表结构是递归的

ID

父母ID

用户组名

![在此处输入图像描述](../Images/d9be9613dab9386702b51805052d2be9.png)

如何像这样通过 Lambda 表达式从我的上下文中选择子集 ID

![在此处输入图像描述](../Images/557de7a9a049445e4d543edb2d45772b.png)

我尝试先选择

var keys = db.UsersGroups.Select(x => x).Where(u => u.GroupMasterID == 1).ToArray();

var UsersGroup = db.UsersGroups.Where(x => keys.Contains(x.GroupMasterID));

但我认为它返回错误或只返回 2 级数据

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:21:08.610

使用 linq 是您无法做到的，如果不搞砸的话。您所要做的就是使用一个可能的[公共表表达式](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)来展平层次结构，然后您将能够编写一个简单的 linq 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:59:45.723

最后我创建了一个 sql 函数

像这样

```
Create  FUNCTION [dbo].[GET_USERGROUPLIST]
(
    @GROUPID INT
)
RETURNS  TABLE 
AS
RETURN 
(
    WITH UsersGroups_CTE AS (
SELECT *
FROM [dbo].[UsersGroups]
WHERE ID = @GROUPID
UNION ALL
SELECT e.ID, e.GroupName, e.ParentID ,e.Status
FROM [dbo].[UsersGroups] e
INNER JOIN UsersGroups_CTE ucte ON ucte.ID = e.ParentID
)
SELECT *
FROM UsersGroups_CTE Where UsersGroups_CTE.Status = 1
); 
```

然后像这样在我的模型中使用

```
db.GET_USERGROUPLIST(1); 
```

非常感谢 lontivero 的建议

# r - 如何在R中绘制折线图？

> ID：13773977
> 
> 赞同：1
> 
> 时间：2012-12-08T02:52:16.257
> 
> 标签：r, linechart

我在文件中有数据，它们看起来是这样的：

```
frame_delay
0.000030
0.000028
0.000028
0.000028
0.000028
0.000028
0.000027
0.000027
0.000027
0.000027
0.000028
0.000027
.... 
```

我写了这个`R`脚本

```
delays <- read.table("../../data/frame_delay.dat", header=T)
plot(delays) 
```

并得到以下图表。

![在此处输入图像描述](../Images/1269bdce8679710557dfefc4942613b1.png)

我想知道如何调整我的代码以获得像这样更具可读性的内容（忘记行），其中 y 轴表示上述值，x 轴表示从 1 到任何数字的任何序列。

![在此处输入图像描述](../Images/140eb7e972376c2fb2ce609de82955a5.png)

感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:04:35.853

试试这个：

```
delays <- read.table("../../data/frame_delay.dat", header=T)
plot(row(delays), delays[, 1], type="l") 
```

![在此处输入图像描述](../Images/4c4dde0204093f545407c81d4f20a99b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:57:32.357

给它一个人工的 X 轴，比如这个（命名你的数据框`x`）：

```
plot(cbind(1:length(x[[1]]), x), xlab='Index') 
```

这做同样的事情，也许更有效一点：

```
plot(1:length(x[[1]]),x[[1]], xlab='Index') 
```

# php - jQuery 还是标记？

> ID：13773979
> 
> 赞同：0
> 
> 时间：2012-12-08T02:52:38.260
> 
> 标签：php, javascript, jquery

[我已经成功地在这个jsFiddle](http://jsfiddle.net/decade/uYBYM/)中使用 jQuery waypoints 让我的菜单变得粘稠。它在小提琴中运行良好，但是当我在我的[测试 drupal 站点](http://drupal.scienceworld.ca)上实现时，它不再处于活动状态。

这是标记：

```
<?php if ($page['main_menu']): ?>
  <div id="stickywrapper">
    <div class="main-menu-wrapper">
      <div class="main-menu-wrapper-inner <?php echo $grid_size ?>">
        <nav id="main-menu" class="<?php echo $grid_full_width ?> clearfix">
          <?php print render($page['search_box']); ?>
          <?php print render($page['main_menu']); ?>
        </nav>
      </div><!--end main-menu-wrapper-inner-->
    </div><!--end main-menu-wrapper-->
  </div><!--end stickywrapper-->
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:05:43.030

中的 JavaScript 代码末尾有一个杂散的 Unicode 零宽度空格 (U+200B) 字符`stickymenu.js`，导致语法错误。删除它，一切都会好起来的。

# artificial-intelligence - 阈值感知器可以表示多少个不同的布尔函数？

> ID：13773982
> 
> 赞同：1
> 
> 时间：2012-12-08T02:52:58.143
> 
> 标签：artificial-intelligence, classification, threshold, perceptron, neural-network

它指出有 n 个输入的 2^2^n 个不同的布尔函数。问题是，其中有多少可以由阈值感知器表示？

答案不就是全部吗？我这样说是因为感知器与硬阈值相同，其中 z = mx1 + c - x2 并且如果 z>=0 则阈值(z) = 1，如果 z<0 则阈值(z) = 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:17:01.317

全部，如果感知器包含至少一个隐藏层。如果只有一个层，那么它只能表示线性可分函数（例如，不包括 XOR）。

# web-applications - extjs4 应用程序中的水平导航栏

> ID：13773985
> 
> 赞同：0
> 
> 时间：2012-12-08T02:53:05.300
> 
> 标签：web-applications, extjs, yii

我想将水平导航栏添加到由 extjs4.1 开发的应用程序中，为此我将工具栏添加到视口。

```
var toolbar = Ext.create('Ext.toolbar.Toolbar', {
    id: 'header',
    region: 'north',
    items: [
        {
            // xtype: 'button', // default for Toolbars
            text: 'Button'
        },
        {
            xtype: 'splitbutton',
            text : 'Split Button'
        },
        // begin using the right-justified button container
        '->', // same as { xtype: 'tbfill' }
        {
            xtype    : 'textfield',
            name     : 'field1',
            emptyText: 'enter search term'
        },
        // add a vertical separator bar between toolbar items
        '-', // same as {xtype: 'tbseparator'} to create Ext.toolbar.Separator
        'text 1', // same as {xtype: 'tbtext', text: 'text1'} to create Ext.toolbar.TextItem
        { xtype: 'tbspacer' },// same as ' ' to create Ext.toolbar.Spacer
        'text 2',
        { xtype: 'tbspacer', width: 50 }, // add a 50px space
        'text 3'
    ]
});
var viewport = Ext.create('Ext.Viewport', {
    layout: {
        type: 'border',
        padding: 5
    },
    defaults: {
        split: true
    },
    items: [toolbar,{ 
```

但我想通过服务器创建水平导航栏，因为任何类型的用户都有特定的导航栏，例如管理员可以在他的导航栏中看到 createUser 但其他用户在导航栏中看不到它。我不知道我该怎么做这与 extjs4 中的工具栏。有没有其他方法可以做到这一点？或者我如何通过服务器为任何用户创建工具栏项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:40:30.703

因此，例如，当您登录时 - 您从具有用户访问权限的服务器数据返回，这些数据与您的工具栏相关（或无论您如何获取此数据）。你有你的控制器，它管理你的视图。您的视图包含您的工具栏。但默认情况下，您的工具栏是隐藏的。您可以添加到您的工具栏方法，如 - showAdminButtons()、showSimpleUserButtons()。一旦您从具有用户访问权限的服务器数据中获取 - 您检查用户是什么并在您需要的视图方法中调用。但我的建议是，如果您的工具栏应该在用户交互期间更改 - 创建您需要的所有按钮，并且只在正确的时间显示/隐藏您需要的内容。这将防止每次在 dom 中创建按钮。否则，如果您只创建一次工具栏 - 例如在方法 showAdminButtons() 中创建此按钮。并且不要 不要忘记规则 - 不信任来自客户端的数据。并检查是否允许执行此操作。

# php - 如何存储来自 JSON api 的大部分静态数据？

> ID：13773987
> 
> 赞同：2
> 
> 时间：2012-12-08T02:53:11.187
> 
> 标签：php, database, json, api

我的 php 项目正在使用 reddit JSON api 来获取当前页面提交的标题。

现在，每次加载页面时我都在运行一些代码，并且遇到了一些问题，即使没有真正的 API 限制。

我想以某种方式在本地存储提交的标题。你能推荐最好的方法吗？该网站在 appfog 上运行。你会推荐什么？

这是我当前的代码：

```
<?php

/* settings */

$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];

$reddit_url = 'http://www.reddit.com/api/info.{format}?url='.$url;

$format = 'json'; //use XML if you'd like...JSON FTW!
$title = '';

/* action */
$content = get_url(str_replace('{format}',$format,$reddit_url)); //again, can be xml or json
if($content) {
    if($format == 'json') {
        $json = json_decode($content,true);
        foreach($json['data']['children'] as $child) { // we want all children for this example
            $title= $child['data']['title'];
        }
    }
}

/* output */

/* utility function:  go get it! */
function get_url($url) {
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,1);
    $content = curl_exec($ch);
    curl_close($ch);
    return $content;
}
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:23:17.503

## 介绍

这是您的代码的修改版本

```
$url = "http://stackoverflow.com/";
$loader = new Loader();
$loader->parse($url);
printf("<h4>New List : %d</h4>", count($loader));
printf("<ul>");
foreach ( $loader as $content ) {
    printf("<li>%s</li>", $content['title']);
}
printf("</ul>"); 
```

**输出**

新名单：7

*   Joel Spolsky 和 ​​Jeff Atwood 的新播客。
*   示例代码/ Pyhton 的好网站
*   stackoverflow.com 显然拥有互联网历史上最好的 Web 代码，reddit 最好开始复制它。
*   一个类似 reddit 的 OpenID 程序员网站
*   很棒的开发者网站。让知道的人回答您的问题。
*   Stack Overflow 公开发布
*   Stack Overflow，一个编程问答网站。& Reddit 可以从他们的界面中学到很多东西！

[简单演示](http://codepad.viper-7.com/wbUNE6)

## 问题

我看到你想在这里实现的一些事情，即

*   我想以某种方式在本地存储提交的标题
*   现在我每次加载页面时都在运行一些代码

据我了解，您需要的是 **数据的简单缓存副本，**这样您就不必一直加载 url。

## 简单的解决方案

您可以使用的一个简单的缓存系统是[memcache](http://php.net/manual/en/memcache.examples-overview.php) ..

**示例 A**

```
$url = "http://stackoverflow.com/";

// Start cache
$m = new Memcache();
$m->addserver("localhost");
$cache = $m->get(sha1($url));

if ($cache) {
    // Use cache copy
    $loader = $cache;
    printf("<h2>Cache List: %d</h2>", count($loader));
} else {

    // Start a new Loader
    $loader = new Loader();
    $loader->parse($url);
    printf("<h2>New List : %d</h2>", count($loader));
    $m->set(sha1($url), $loader);
}

// Oupput all listing
printf("<ul>");
foreach ( $loader as $content ) {
    printf("<li>%s</li>", $content['title']);
}
printf("</ul>"); 
```

**示例 B**

您可以 `Last Modification Date`用作缓存键，以便仅在修改文档时才保存新副本

```
$headers = get_headers(sprintf("http://www.reddit.com/api/info.json?url=%s",$url), true);
$time = strtotime($headers['Date']); // get last modification date 
$cache = $m->get($time);

if ($cache) {
    $loader = $cache;
} 
```

由于您的类实现了`JsonSerializable`您可以对结果进行 json 编码并存储在 MongoDB 或 MySQL 等数据库中

```
 $data = json_encode($loader);
 // Save to DB 
```

## 使用的类

```
class Loader implements IteratorAggregate, Countable, JsonSerializable {
    private $request = "http://www.reddit.com/api/info.json?url=%s";
    private $data = array();
    private $total;

    function parse($url) {
        $content = json_decode($this->getContent(sprintf($this->request, $url)), true);
        $this->data = array_map(function ($v) {
            return $v['data'];
        }, $content['data']['children']);
        $this->total = count($this->data);
    }

    public function getIterator() {
        return new ArrayIterator($this->data);
    }

    public function count() {
        return $this->total;
    }

    public function getType() {
        return $this->type;
    }

    public function jsonSerialize() {
        return $this->data;
    }

    function getContent($url) {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 1);
        $content = curl_exec($ch);
        curl_close($ch);
        return $content;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:50:10.137

我不确定您的问题到底是什么，但弹出的第一件事如下：

```
foreach($json['data']['children'] as $child) { // we want all children for this example
    $title= $child['data']['title'];
} 
```

您确定要覆盖`$title`吗？实际上，这只会保留最后一个`$child`标题。

现在，回答你的问题。我假设您正在寻找某种机制来缓存请求的 URL 的内容，这样您就不必每次都重新发出请求，对吗？我对 appFog 没有任何经验，只有 Orchestra.io，但我相信他们在写入文件方面有相同的限制，因为你只能写入临时文件。

我的建议是将（已处理的）响应缓存在：

*   具有短 TTL 的 APC 共享内存
*   临时文件
*   数据库

您可以使用 URL + 参数的哈希作为查找键，在内部进行此检查`get_url()`意味着您不需要更改代码的任何其他部分，并且只需要 ~3 LOC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:32:06.730

在这之后：

```
if($format == 'json') {
    $json = json_decode($content,true);
    foreach($json['data']['children'] as $child) { // we want all children for this example
        $title = $child['data']['title'];
    }
} 
```

}`

然后存储在一个 json 文件中并将其转储到您的本地文件夹网站路径中

`$storeTitle = array('title'=>$title)`

`$fp = fopen('../pathToJsonFile/title.json'), 'w');
fwrite($fp, json_encode($storeTitle));
fclose($fp);`

然后下次可以随时调用json文件，解码，提取标题到变量中使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T05:23:52.483

我通常只是将数据按原样存储为平面文件，如下所示：

```
<?php
define('TEMP_DIR', 'temp/');
define('TEMP_AGE', 3600);

function getinfo($url) {
    $temp = TEMP_DIR . urlencode($url) . '.json';

    if(!file_exists($temp) OR time() - filemtime($temp) > TEMP_AGE) {
        $info = "http://www.reddit.com/api/info.json?url=$url";
        $json = file_get_contents($info);
        file_put_contents($temp, $json);
        }
    else {
        $json = file_get_contents($temp);
        }

    $json = json_decode($json, true);
    $titles = array();
    foreach($json['data']['children'] as $child) {
        $titles[] = $child['data']['title'];
        }
    return $titles;
    }

$test = getinfo('http://imgur.com/');
print_r($test); 
```

PS。我`file_get_contents`用来获取 json 数据，您可能有自己的理由使用 curl。我也不检查格式，因为显然你更喜欢 json。

# oracle - Oracle xmltype 列，创建包含以下路径的 xmlindex

> ID：13773988
> 
> 赞同：2
> 
> 时间：2012-12-08T02:53:27.380
> 
> 标签：oracle, oracle11g, xmltype, xmlindex

我需要在 xmltype 列上创建一个 xmlindex，系统是 Oracle 11g。我正在使用的代码是：

```
CREATE INDEX "TS"."XMLINDEX_NBXML" ON "TS"."NETBOTZ" V (NBXML) INDEXTYPE IS
XDB.XMLINDEX PARAMETERS('PATH TABLE NETBOTZ_PATH_TABLE( TABLESPACE USERS) PATHS
(/variable-set/variable[@class="nbTempSensor"]/double-val )') 
```

收到的错误是：
SQL 错误

提交失败：ORA-29958：执行 ODCIINDEXCREATE 例程时发生致命错误 ORA-30968：XML 索引的 XPATH 或 NAMESPACE 选项无效

XML 文件如下。我尝试将“/variable-set/variable[@class="nbTempSensor"]/double-val" 作为路径参数，因为我们在视图中成功地使用了它来检索 nbTempSensor 值。你能说出路径的正确语法是什么吗？预先感谢您的帮助。

```
<?xml version="1.0" ?> 
- <variable-set timestamp="1351899921109" time="2012-11-02 16:45:21"         
now="1351899921118">
- <variable varid="nbBaseEnclosure" guid="B035DF7_nbBaseEnclosure" class="nbEnclosure" 
classpath="/nbEnclosure">
  <u32-val>2</u32-val> 
- <metadata slotid="nbEncMenuIcons">
- <string-list-val>
  <string-val>menu_link_wall_unplug.gif</string-val> 
  <string-val>menu_link_wall_error.gif</string-val> 
  <string-val>menu_link_wall.gif</string-val> 
  </string-list-val>
  </metadata>
- <metadata slotid="nbProductData">
- <struct-val>
+ <struct-element fieldid="vendor">
  <string-val>NetBotz, Inc.</string-val> 
  </struct-element>
- <struct-element fieldid="type">
  <string-val>Wall</string-val> 
  </struct-element>
- <struct-element fieldid="model">
  <string-val>420</string-val> 
  </struct-element>
- <struct-element fieldid="fullmodel">
  <string-val>NetBotz 420</string-val> 
  </struct-element>
- <struct-element fieldid="submodel">
  <string-val>420 Wall</string-val> 
  </struct-element>
- <struct-element fieldid="serial_num">
  <string-val>00:02:D3:03:5D:F7</string-val> 
  </struct-element>
- <struct-element fieldid="manufacturer">
  <string-val>NetBotz, Inc.</string-val> 
  </struct-element>
- <struct-element fieldid="revision">
  <string-val>A00</string-val> 
  </struct-element>
- <struct-element fieldid="board_id">
  <string-val>0000</string-val> 
  </struct-element>
- <struct-element fieldid="osversion">
  <string-val>V2_6_2_20071031_1658</string-val> 
  </struct-element>
- <struct-element fieldid="appversion">
  <string-val>V2_6_2_20071031_1658</string-val> 
  </struct-element>
- <struct-element fieldid="apcappversion">
  <string-val>apc_bw02_bw_262.bin</string-val> 
  </struct-element>
- <struct-element fieldid="mac_addr">
  <string-val>00:02:D3:03:5D:F7</string-val> 
  </struct-element>
- <struct-element fieldid="manuf_date">
  <utc-val>1232625600</utc-val> 
  </struct-element>
- <struct-element fieldid="svc_date">
  <utc-val>1251417512</utc-val> 
  </struct-element>
- <struct-element fieldid="bootversion">
  <string-val>V2_6_2_20071031_1658</string-val> 
  </struct-element>
- <struct-element fieldid="apcaosversion">
  <string-val>apc_bw02_aos_262.bin</string-val> 
  </struct-element>
  </struct-val>
  </metadata>
- <metadata slotid="nbLocationData" isclassdef="yes">
  <struct-val /> 
  </metadata>
- <metadata slotid="nbSerialNum">
  <string-val>00:02:D3:03:5D:F7</string-val> 
  </metadata>
- <metadata slotid="nbEncNBCIcon">
  <string-val>wall420_all.png</string-val> 
  </metadata>
- <metadata slotid="nbLabel">
  <nls-string-val raw="NetBotz 420">NetBotz 420</nls-string-val> 
  </metadata>
- <metadata slotid="nbEnum" isclassdef="yes">
- <nls-string-list-val>
  <nls-string-val raw="%{nbMsg|Disconnected%}">Disconnected</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Error%}">Error</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Normal%}">Normal</nls-string-val> 
  </nls-string-list-val>
  </metadata>
  </variable>
- <variable varid="nbHawkEnc_0" guid="B035DF7_nbHawkEnc_0" class="nbHawkEnc" 
classpath="/nbEnclosure/nbUSBEnclosure/nbHawkEnc">
  <u32-val>2</u32-val> 
- <metadata slotid="nbDockedToEncID">
  <varid-val>nbBaseEnclosure</varid-val> 
  </metadata>
- <metadata slotid="nbEncMenuIcons" isclassdef="yes">
- <string-list-val>
  <string-val>menu_link_pod_unplug.gif</string-val> 
  <string-val>menu_link_pod_error.gif</string-val> 
  <string-val>menu_link_pod.gif</string-val> 
  </string-list-val>
  </metadata>
- <metadata slotid="nbLocationData" isclassdef="yes">
  <struct-val /> 
  </metadata>
- <metadata slotid="nbSerialNum">
  <string-val>SENSOR_00:02:D3:03:5D:F7</string-val> 
  </metadata>
- <metadata slotid="nbEncNBCIcon" isclassdef="yes">
  <string-val>sensor_pod.png</string-val> 
  </metadata>
- <metadata slotid="nbLabel">
  <nls-string-val raw="%{|Sensor Pod%}">Sensor Pod</nls-string-val> 
  </metadata>
- <metadata slotid="nbEnum" isclassdef="yes">
- <nls-string-list-val>
  <nls-string-val raw="%{nbMsg|Disconnected%}">Disconnected</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Error%}">Error</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Normal%}">Normal</nls-string-val> 
  </nls-string-list-val>
  </metadata>
  </variable>
- <variable varid="nbEyeEnc_0" guid="B035DF7_nbEyeEnc_0" class="nbEyeEnc" 
classpath="/nbEnclosure/nbUSBEnclosure/nbEyeEnc">
  <u32-val>2</u32-val> 
- <metadata slotid="nbDockedToEncID">
  <varid-val>nbBaseEnclosure</varid-val> 
  </metadata>
- <metadata slotid="nbEncMenuIcons" isclassdef="yes">
- <string-list-val>
  <string-val>menu_link_camera_unplug.gif</string-val> 
  <string-val>menu_link_camera_error.gif</string-val> 
  <string-val>menu_link_camera.gif</string-val> 
  </string-list-val>
  </metadata>
- <metadata slotid="nbLocationData" isclassdef="yes">
  <struct-val /> 
  </metadata>
- <metadata slotid="nbSerialNum">
  <string-val>CAMERA_00:02:D3:03:5D:F7</string-val> 
  </metadata>
- <metadata slotid="nbEncNBCIcon" isclassdef="yes">
  <string-val>camera_pod.png</string-val> 
  </metadata>
- <metadata slotid="nbLabel">
  <nls-string-val raw="%{nbMsg|Camera|%}">Camera</nls-string-val> 
  </metadata>
- <metadata slotid="nbEnum" isclassdef="yes">
- <nls-string-list-val>
  <nls-string-val raw="%{nbMsg|Disconnected%}">Disconnected</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Error%}">Error</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Normal%}">Normal</nls-string-val> 
  </nls-string-list-val>
  </metadata>
  </variable>
- <variable varid="nbIPInterface_eth0_status" guid="B035DF7_nbIPInterface_eth0_status" 
class="nbIPInterfaceStatus" classpath="/nbIPInterfaceStatus">
- <struct-val>
- <struct-element fieldid="enable">
  <bool-val val="false" /> 
  </struct-element>
- <struct-element fieldid="hostname">
  <string-val /> 
  </struct-element>
- <struct-element fieldid="ip">
  <string-val /> 
  </struct-element>
- <struct-element fieldid="subnet">
  <string-val /> 
  </struct-element>
- <struct-element fieldid="gateway">
  <string-val /> 
  </struct-element>
+ <struct-element fieldid="usedhcp">
  <bool-val val="true" /> 
  </struct-element>
- <struct-element fieldid="linkisup">
  <bool-val val="false" /> 
  </struct-element>
  </struct-val>
  </variable>
- <variable varid="nbWirelessIPInterface_wlan0_status"     
guid="B035DF7_nbWirelessIPInterface_wlan0_status" class="nbIPInterfaceStatus" 
classpath="/nbIPInterfaceStatus">
- <struct-val>
- <struct-element fieldid="enable">
  <bool-val val="true" /> 
  </struct-element>
- <struct-element fieldid="hostname">
  <string-val>thm-netbotz</string-val> 
  </struct-element>
- <struct-element fieldid="ip">
  <string-val>10.0.1.7</string-val> 
  </struct-element>
- <struct-element fieldid="subnet">
  <string-val>255.255.255.128</string-val> 
  </struct-element>
- <struct-element fieldid="gateway">
  <string-val>10.0.1.8</string-val> 
  </struct-element>
- <struct-element fieldid="usedhcp">
  <bool-val val="false" /> 
  </struct-element>
- <struct-element fieldid="leapsupport">
  <bool-val val="false" /> 
  </struct-element>
- <struct-element fieldid="authsupport">
  <bool-val val="true" /> 
  </struct-element>
- <struct-element fieldid="linkisup">
  <bool-val val="true" /> 
  </struct-element>
- <struct-element fieldid="essid">
  <string-val>Sparta</string-val> 
  </struct-element>
- <struct-element fieldid="mode">
  <u32-val>2</u32-val> 
  </struct-element>
- <struct-element fieldid="channel">
  <u32-val>6</u32-val> 
  </struct-element>
- <struct-element fieldid="frequency">
  <u32-val>2437000</u32-val> 
  </struct-element>
- <struct-element fieldid="bit_rate">
  <u32-val>11000000</u32-val> 
  </struct-element>
- <struct-element fieldid="link_stats_percent">
  <bool-val val="true" /> 
  </struct-element>
- <struct-element fieldid="link_quality">
  <u32-val>91</u32-val> 
  </struct-element>
- <struct-element fieldid="link_level">
  <i32-val>39</i32-val> 
  </struct-element>
- <struct-element fieldid="link_rating">
  <u32-val>3</u32-val> 
  </struct-element>
- <struct-element fieldid="access_point">
  <octet-val>00259CAD7579</octet-val> 
  </struct-element>
  </struct-val>
  </variable>
- <variable varid="nbConfigUpdTime" guid="B035DF7_nbConfigUpdTime"     
class="nbConfigUpdTimeCls" classpath="/nbConfigUpdTimeCls">
  <utc-val>1351782846</utc-val> 
  </variable>
- <variable varid="nbPeriodicHTTP" class="nbPeriodicReportHTTP"     
classpath="/nbPeriodicReport/nbPeriodicReportHTTP">
- <struct-val>
- <struct-element fieldid="enable">
  <bool-val val="true" /> 
  </struct-element>
- <struct-element fieldid="url_0">
  <string-val>https://tsdevel.therascan.net/scan/main/netbotz.php</string-val> 
  </struct-element>
- <struct-element fieldid="userid_0">
  <string-val>amcare</string-val> 
  </struct-element>
- <struct-element fieldid="password_0">
  <password-val /> 
  </struct-element>
- <struct-element fieldid="url_1">
  <string-val>http://</string-val> 
  </struct-element>
- <struct-element fieldid="userid_1">
  <string-val /> 
  </struct-element>
- <struct-element fieldid="password_1">
  <password-val /> 
  </struct-element>
- <struct-element fieldid="secopt">
  <u32-val>0</u32-val> 
  </struct-element>
- <struct-element fieldid="schedule">
  <string-val>0 0 0 0 0 0 0</string-val> 
  </struct-element>
- <struct-element fieldid="interval">
  <u32-val>900</u32-val> 
  </struct-element>
- <struct-element fieldid="incpix">
  <bool-val val="false" /> 
  </struct-element>
- <struct-element fieldid="sensorprio">
  <i32-val>30</i32-val> 
  </struct-element>
  </struct-val>
- <metadata slotid="nbLastReportSuccessful">
  <bool-val val="true" /> 
  </metadata>
- <metadata slotid="nbLabel">
  <nls-string-val raw="Periodic HTTP Report">Periodic HTTP Report</nls-string-val> 
  </metadata>
  </variable>
- <variable varid="nbLinkStatus_eth0" guid="B035DF7_nbLinkStatus_eth0"     
class="nbLinkStatusSnr"     
classpath="/nbSensor/nbStateSensor/nbBoolSensor/nbLinkStatusSnr">
  <u32-val>0</u32-val> 
- <metadata slotid="nbEncID">
  <varid-val>nbBaseEnclosure</varid-val> 
  </metadata>
- <metadata slotid="nbLocationData" isclassdef="yes">
  <struct-val /> 
  </metadata>
- <metadata slotid="nbLabel">
  <nls-string-val raw="%{|Ethernet Link Status%}">Ethernet Link Status</nls-string-
val> 
  </metadata>
- <metadata slotid="nbEnum" isclassdef="yes">
- <nls-string-list-val>
  <nls-string-val raw="%{nbMsg|Down%}">Down</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Up%}">Up</nls-string-val> 
  </nls-string-list-val>
  </metadata>
  </variable>
- <variable varid="nbLinkStatus_wlan0" guid="B035DF7_nbLinkStatus_wlan0"     
class="nbLinkStatusSnr"     
classpath="/nbSensor/nbStateSensor/nbBoolSensor/nbLinkStatusSnr">
  <u32-val>1</u32-val> 
- <metadata slotid="nbEncID">
  <varid-val>nbBaseEnclosure</varid-val> 
  </metadata>
- <metadata slotid="nbLocationData" isclassdef="yes">
  <struct-val /> 
  </metadata>
- <metadata slotid="nbLabel">
  <nls-string-val raw="%{|Wireless Link Status %s|wlan0%}">Wireless Link Status 
wlan0</nls-string-val> 
  </metadata>
- <metadata slotid="nbEnum" isclassdef="yes">
- <nls-string-list-val>
  <nls-string-val raw="%{nbMsg|Down%}">Down</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Up%}">Up</nls-string-val> 
  </nls-string-list-val>
  </metadata>
  </variable>
- <variable varid="nbEyeEnc_0_CMOT" guid="B035DF7_nbEyeEnc_0_CMOT" class="nbCamMotSnr" 
classpath="/nbSensor/nbStateSensor/nbBoolSensor/nbCamMotSnr">
  <u32-val>0</u32-val> 
- <metadata slotid="nbEncID">
  <varid-val>nbEyeEnc_0</varid-val> 
  </metadata>
- <metadata slotid="nbLocationData">
  <struct-val /> 
  </metadata>
- <metadata slotid="nbLabel" isclassdef="yes">
  <nls-string-val raw="%{nbMsg|Camera Motion%}">Camera Motion</nls-string-val> 
  </metadata>
- <metadata slotid="nbEnum" isclassdef="yes">
- <nls-string-list-val>
  <nls-string-val raw="%{nbMsg|No Motion%}">No Motion</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Motion Detected%}">Motion Detected</nls-string-val> 
  </nls-string-list-val>
  </metadata>
  </variable>
- <variable varid="nbEyeEnc_0_DOOR" guid="B035DF7_nbEyeEnc_0_DOOR" 
class="nbDoorSensor" classpath="/nbSensor/nbStateSensor/nbBoolSensor/nbDoorSensor">
  <u32-val isnull="yes" /> 
- <metadata slotid="nbEncID">
  <varid-val>nbEyeEnc_0</varid-val> 
  </metadata>
- <metadata slotid="nbLocationData">
  <struct-val /> 
  </metadata>
- <metadata slotid="nbLabel" isclassdef="yes">
  <nls-string-val raw="%{nbMsg|Door Switch%}">Door Switch</nls-string-val> 
  </metadata>
- <metadata slotid="nbEnum" isclassdef="yes">
- <nls-string-list-val>
  <nls-string-val raw="%{nbMsg|Open%}">Open</nls-string-val> 
  <nls-string-val raw="%{nbMsg|Closed%}">Closed</nls-string-val> 
  </nls-string-list-val>
  </metadata>
  </variable>
- <variable varid="nbHawkEnc_0_DEW" guid="B035DF7_nbHawkEnc_0_DEW"     
class="nbDewPointSensor" classpath="/nbSensor/nbNumSensor/nbDewPointSensor">
  <double-val>11.300000</double-val> 
- <metadata slotid="nbUnitsID" isclassdef="yes">
  <varid-val>nbUnits_DegC</varid-val> 
  </metadata>
- <metadata slotid="nbEncID">
  <varid-val>nbHawkEnc_0</varid-val> 
  </metadata>
- <metadata slotid="nbLabel" isclassdef="yes">
  <nls-string-val raw="%{nbMsg|Dew Point%}">Dew Point</nls-string-val> 
  </metadata>
  </variable>
- <variable varid="nbHawkEnc_0_AUDI" guid="B035DF7_nbHawkEnc_0_AUDI" 
class="nbAudioSensor" classpath="/nbSensor/nbNumSensor/nbAudioSensor">
  <double-val>2.000000</double-val> 
- <metadata slotid="nbEncID">
  <varid-val>nbHawkEnc_0</varid-val> 
  </metadata>
- <metadata slotid="nbLabel" isclassdef="yes">
  <nls-string-val raw="%{nbMsg|Audio%}">Audio</nls-string-val> 
  </metadata>
  </variable>
- <variable varid="nbHawkEnc_0_AFLW" guid="B035DF7_nbHawkEnc_0_AFLW"     
class="nbAirflowSensor" classpath="/nbSensor/nbNumSensor/nbAirflowSensor">
  <double-val>22.859994</double-val> 
- <metadata slotid="nbUnitsID" isclassdef="yes">
  <varid-val>nbUnits_MetersPerMinute</varid-val> 
  </metadata>
- <metadata slotid="nbEncID">
  <varid-val>nbHawkEnc_0</varid-val> 
  </metadata>
- <metadata slotid="nbLabel" isclassdef="yes">
  <nls-string-val raw="%{nbMsg|Air Flow%}">Air Flow</nls-string-val> 
  </metadata>
  </variable>
- <variable varid="nbHawkEnc_0_HUMI" guid="B035DF7_nbHawkEnc_0_HUMI" 
class="nbHumidSensor" classpath="/nbSensor/nbNumSensor/nbHumidSensor">
  <double-val>39.000000</double-val> 
- <metadata slotid="nbUnitsID" isclassdef="yes">
  <varid-val>nbUnits_PctRH</varid-val> 
  </metadata>
- <metadata slotid="nbEncID">
  <varid-val>nbHawkEnc_0</varid-val> 
  </metadata>
- <metadata slotid="nbLabel" isclassdef="yes">
  <nls-string-val raw="%{nbMsg|Humidity%}">Humidity</nls-string-val> 
  </metadata>
  </variable>
- <variable varid="nbHawkEnc_0_TEMP" guid="B035DF7_nbHawkEnc_0_TEMP" 
class="nbTempSensor" classpath="/nbSensor/nbNumSensor/nbTempSensor">
  <double-val>26.400000</double-val> 
- <metadata slotid="nbUnitsID" isclassdef="yes">
  <varid-val>nbUnits_DegC</varid-val> 
  </metadata>
- <metadata slotid="nbEncID">
  <varid-val>nbHawkEnc_0</varid-val> 
  </metadata>
- <metadata slotid="nbLabel" isclassdef="yes">
  <nls-string-val raw="%{nbMsg|Temperature%}">Temperature</nls-string-val> 
  </metadata>
  </variable>
- <variable varid="nbEyeEnc_0_CAMERA" guid="B035DF7_nbEyeEnc_0_CAMERA" 
class="nbEyeCamera" classpath="/nbCamera/nbEyeCamera">
- <struct-val>
- <struct-element fieldid="motion">
  <u32-val>0</u32-val> 
  </struct-element>
  </struct-val>
- <metadata slotid="nbEncID">
  <varid-val>nbEyeEnc_0</varid-val> 
  </metadata>
- <metadata slotid="nbLabel">
  <nls-string-val raw="" /> 
  </metadata>
  </variable>
  </variable-set> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T18:36:29.990

你不能做这个。XMLINDEX 文档指出这是不允许的： [http ://docs.oracle.com/cd/E11882_01/appdev.112/e23094/xdb_indexing.htm#ADXDB4385](http://docs.oracle.com/cd/E11882_01/appdev.112/e23094/xdb_indexing.htm#ADXDB4385)

> 路径必须仅引用子轴和后代轴，并且它们必须仅测试元素和属性节点或其名称（可能使用通配符）。特别是，**路径不得涉及谓词**。

由于您感兴趣的值在 xml 文档中出现一次，您可以在其上创建常规索引。否则你必须索引所有“变量”路径。

```
SQL> create index foo on netbotz(to_number(extractvalue(nbxml,'/variable-set/variable[@class="nbTempSensor"]/double-val')));

Index created.

SQL> explain plan for select * from netbotz where to_number(extractvalue(nbxml,'/variable-set/variable[@class="nbTempSensor"]/double-val')) between 1 and 4;

Explained.

SQL> select * From table(dbms_xplan.display);

Plan hash value: 992868181

---------------------------------------------------------------------------------------
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |         |     1 |  2002 |     0   (0)| 00:00:01 |
|   1 |  TABLE ACCESS BY INDEX ROWID| NETBOTZ |     1 |  2002 |     0   (0)| 00:00:01 |
|*  2 |   INDEX RANGE SCAN          | FOO     |     1 |       |     0   (0)| 00:00:01 |
--------------------------------------------------------------------------------------- 
```

# c# - 应用程序访问共享文件夹上的 mdb 文件，而客户端上没有 ms 访问权限

> ID：13773989
> 
> 赞同：2
> 
> 时间：2012-12-08T02:53:33.963
> 
> 标签：c#, visual-studio-2010, ms-access, oledb

我已经在网上搜索了数周，但找不到任何答案或与我的问题相关的任何内容

问题是，我有一个使用 c# 从 mdb 文件加载数据的应用程序。该应用程序运行良好，因为现在，应用程序和 mdb 文件（对于数据库，使用 oledb）位于同一台计算机上，而不是任何共享文件夹上。但是一旦准备好在办公室部署它，应用程序和 mdb 文件需要位于共享文件夹中，供多个用户使用，但客户端/用户 PC 没有安装 MS 访问权限。

问题是我们无法在客户端 PC 上安装 ms access 或任何可再分发文件（我在访问过的大多数论坛/网站上看到的文件）。

客户端 PC 具有 .net 4.0

我的问题是：

1.  它会起作用吗？（即使客户端 PC 上没有安装任何 ms 访问或可再分发文件，客户端 PC 也可以访问/执行共享文件夹上的 app 和 mdb 文件？）
2.  它不会那样工作，我有哪些选项可以让客户端 PC 打开和运行保存在共享文件夹中的应用程序和 mdb 文件？
3.  如果无法解决，我如何使用可再发行文件编译我的应用程序，比如说一个 .dll 文件，该文件将帮助客户端 PC 在没有安装 ms 访问权限的情况下打开应用程序？例如（app、mdb 和 .dll 在同一个共享文件夹上）

我真的希望并提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:02:01.083

如果您使用 OLEDB.NET，您可以在没有安装 MS Access 的客户端的情况下在程序中使用 access DB，没有任何问题。与您的问题类似的问题已在[此处](https://stackoverflow.com/questions/3971900/do-i-need-to-have-excel-installed-to-query-spreadsheets-using-an-oledb-provider)回答。答案是正确的，使用 JET 可以在客户端没有安装办公室的情况下工作。希望这对你有帮助！

有一些链接可以帮助您开始使用 JET 请注意，如果您使用通用名称 OLEDB，google 会获得更好的结果：

[http://msdn.microsoft.com/en-us/library/aa288452%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa288452%28v=vs.71%29.aspx) [如何使用 C# 连接到 MS Access 文件 (mdb)？](https://stackoverflow.com/questions/10374808/how-to-connect-to-a-ms-access-file-mdb-using-c) [http://www.dscripts.net/2009/01/20/connect-to-microsoft-access-mdb-database-using-csharp/](http://www.dscripts.net/2009/01/20/connect-to-microsoft-access-mdb-database-using-csharp/) [http://msdn.microsoft.com/en-us/library/5ybdbtte% 28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/5ybdbtte%28v=vs.71%29.aspx) [OLEDB 连接到 Access 数据库 (accdb)](https://stackoverflow.com/questions/8302349/oledb-connection-to-access-database-accdb)

**编辑：** 对我链接的答案的评论询问 JET 是否适用于 MS2010。答案是肯定的，根据我的经验。

# php - php系统函数的使用

> ID：13773993
> 
> 赞同：0
> 
> 时间：2012-12-08T02:54:54.120
> 
> 标签：php, whm

我一直避免使用程序执行 PHP 函数。从我所做的所有搜索和阅读中，似乎我别无选择，只能使用系统功能解压缩受密码保护的 ZIP 文件。

这真的仍然是没有可以解压缩受密码保护文件的 PHP 库的唯一选择吗？

如果我必须使用系统功能，有没有办法将其使用限制为我需要的命令或我可以做的其他事情来防止任何潜在的漏洞。我有一个VPS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:14:27.120

是的，有一些不错的扩展，如[Zlib](http://php.net/manual/en/book.zlib.php)和[Zip](http://php.net/manual/en/book.zip.php)，用于处理 PHP 中的压缩文件，但您无法使用这些扩展创建或提取受密码保护的文件。

您需要找到一个 3rd 方库（我不知道是否存在任何库）来实现这一目标，或者只是继续使用程序执行。

此外，您可能希望使用[passthru()](http://php.net/manual/en/function.passthru.php)进行一些实验以保持禁用`shell_exec`或`system`喜欢危险的方法。

# prolog - 使用 Prolog 的 collat z-list 实现

> ID：13773994
> 
> 赞同：3
> 
> 时间：2012-12-08T02:55:09.813
> 
> 标签：prolog, collatz

我正在尝试创建一个`collatz_list`在 Prolog 中调用的函数。这个函数有两个参数，第一个是数字，第二个是列表。这个列表将是我这个函数的输出。所以，这是我的功能：

```
collatz_list(1,[1]).
collatz_list(N,[H|T]) :-
   N > 1,
   N mod 2 =:= 0,
   collatz_list(N, [H|T]).  
collatz_list(N,[H|T]) :-
   N > 1,
   N mod 2 =:= 1,
   N is N*3 +1,
   collatz_list(N,[H|T]). 
```

我正在努力创建输出列表。任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T13:10:11.117

假设您想编写一个`collatz_list/2`带有参数的谓词，`(int, list)`collat `list`​​z 序列的开头`int`和结尾在哪里`1`（我们希望如此！到目前为止，这是一个悬而未决的问题）；你只需要以声明的方式对递归定义进行编码。

这是我的尝试：

```
/* if N = 1, we just stop */
collatz_list(1, []).

/* case 1: N even
   we place N / 2 in the head of the list
   the tail is the collatz sequence starting from N / 2 */
collatz_list(N, [H|T]) :-
    0 is N mod 2,
    H is N / 2, 
    collatz_list(H, T), !. 

/* case 2: N is odd
   we place 3N + 1 in the head of the list
   the tail is the collatz sequence starting from 3N + 1 */
collatz_list(N, [H|T]) :-
    H is 3 * N + 1, 
    collatz_list(H, T). 
```

**修改版，包括起始编号**

让我们测试一下：

```
full_list(N, [N|T]) :-
    collatz_list(N, T).

collatz_list(1, []).

collatz_list(N, [H|T]) :-
    0 is N mod 2,
    H is N / 2, 
    collatz_list(H, T), !. 

collatz_list(N, [H|T]) :-
    H is 3 * N + 1, 
    collatz_list(H, T). 

?- full_list(27, L).
L = [27, 82, 41, 124, 62, 31, 94, 47, 142|...]. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-26T09:35:56.143

首先，我们定义简单的辅助谓词`collatz_next/2`来执行*单个*Collat​​z 步骤：

```
collatz_next(X,Y) :-
   X >= 1,
   (  X =:= 1       -> Y = 1
   ;  X mod 2 =:= 0 -> Y is X // 2
   ;                   Y is 3*X + 1
   ). 
```

为了推进到一个固定点，我们使用元谓词`fixedpoint/3`和`fixedpointlist/3`：

```
?- fixedpoint(collatz_next,11,X).
X = 1\.                                            % succeeds deterministically

?- fixedpointlist(collatz_next,11,Xs).
Xs = [11,34,17,52,26,13,40,20,10,5,16,8,4,2,1].   % succeeds deterministically 
```

上述查询中使用的两个元谓词都是基于单调控制结构[`if_/3`](https://stackoverflow.com/a/27358600/4609915)和具体化术语相等谓词[`(=)/3`](https://stackoverflow.com/a/27358600/4609915)，可以定义如下：

```
:- meta_predicate fixedpoint(2,?,?).
fixedpoint(P_2, X0,X) :-
   call(P_2, X0,X1),
   if_(X0=X1, X=X0, fixedpoint(P_2, X1,X)).

:- meta_predicate fixedpointlist(2,?,?).
fixedpointlist(P_2,X0,[X0|Xs]) :-
   call(P_2, X0,X1),
   if_(X0=X1, Xs=[], fixedpointlist(P_2,X1,Xs)). 
```

# php - 所有输入字段都容易受到sql注入吗？

> ID：13773997
> 
> 赞同：0
> 
> 时间：2012-12-08T02:56:41.310
> 
> 标签：php, mysql, sql-injection

> **可能重复：**
> [如何防止 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

出于好奇，这更像是我试图确定的一个哲学观点。

我知道理论上，任何密码或加密都是可以破解的。

但是 SQL 注入是否也一样，只需找到适当的措施来处理 / 绕过站点中实施的任何安全措施？或者，注入是否可以通过一套固定的安全措施得到明确和肯定的防御？

我基本上想知道是否有可能通过注入无法破解我网站中的输入字段，或者是否总会存在一些漏洞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:05:16.170

易受 SQL 注入攻击是一个错误。一个构建良好的应用程序不会包含这样的错误，并且无论付出多少努力都不会出现这样的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T03:13:21.577

SQL 注入意味着输入的数据符合有效的 SQL（尽管通常以创造性的方式注入以产生不希望的结果）。

为了防止它，您只需要确保任何用户提供的数据都以不会被滥用的方式编码。

正如上面的链接（[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)）中所述，使用准备好的语句是防止 SQL 注入的最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T03:36:20.923

Sql注入是一种用来劫持网站安全的技术。

当输入字段中指定的数据未过滤转义字符并传递到 sql 查询执行时，就会发生 Sql 注入。

要测试 sql 注入，请参考以下 url。 [http://sqlzoo.net/hack/](http://sqlzoo.net/hack/)

在上面的网址中，尝试在名称字段中指定“ **'** ”并在密码字段中指定“ **OR 1=1 # ”**

所以结果查询将是

```
 SELECT * from user where name='' OR 1=1#' and password=''; 
```

在上面的示例中，您可以注意到在输入字段中指定上述数据后查询被破坏，任何匿名用户都可以轻松登录网站。

有几种技术可以防止 sql 注入。

(1) 输入数据必须使用 mysql_real_escape_string 过滤，同时传递给 sql 查询执行。

有关 mysql_real_escape_string 函数的更多详细信息，请参阅下面 url 中提到的文档。 [http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

# c# - C# 中的文化变化（语言变化）

> ID：13773998
> 
> 赞同：0
> 
> 时间：2012-12-08T02:56:49.473
> 
> 标签：c#

我有一个字符串“Sunday”，我想更改这个 Polish(Poland) 。我该如何改变。我尝试使用 Iformateprovider

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T03:03:34.140

基本上，每种语言都需要不同的“资源”：

*   [http://msdn.microsoft.com/en-us/library/756hydy4%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/756hydy4%28v=vs.71%29.aspx)

“English”资源将包含单词“Sunday”，“Polish”资源包含单词“niedziela”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T04:45:11.683

您需要从您想要的文化中获取“IFormatProvider”。即

```
 new System.Globalization.CultureInfo("pl-pl").DateTimeFormat.DayNames[0]; // niedziela 
```

或者将当前格式化`DateTime`为一周中的某一天：

```
var day = String.Format(
   new System.Globalization.CultureInfo("pl-pl"), 
   "Now:{0:dddd}", DateTime.Now); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T11:13:35.290

如果你有一些`DateTime`价值`dateTime`，那么你可以使用

```
dateTime.ToString("dddd") 
```

生成当前文化中的星期几名称，或

```
dateTime.ToString("dddd", new CultureInfo("da-DK")) 
```

在另一种文化中生产它（这里是丹麦语（丹麦））。

如果您想要这些日期名称的“来源”，请使用

```
string[] dayNamesPolish = (new CultureInfo("pl-PL")).DateTimeFormat.DayNames;
string[] dayNamesEnglish = CultureInfo.InvariantCulture.DateTimeFormat.DayNames; 
```

要实际翻译字符串，请执行以下操作：

```
string stringToTranslate = "Sunday";
int idx = Array.IndexOf(dayNamesEnglish, stringToTranslate);
string stringResult = dayNamesPolish[idx]; 
```

即使`FirstDayOfWeek`在两种文化中不一样（波兰语将星期一作为第一天），这仍然有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T03:05:59.447

请参阅此国家语言支持 (NLS) API 参考， http: [//msdn.microsoft.com/en-us/goglobal/bb896001.aspx](http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx)

# c# - 以编程方式访问 ControlTemplate 的给定子项

> ID：13773999
> 
> 赞同：0
> 
> 时间：2012-12-08T02:57:02.107
> 
> 标签：c#, wpf, controltemplate, code-behind

我有这个 ControlTemplate 包含我希望能够以编程方式访问的东西（在这种情况下是渐变），经过数小时的反复试验，我觉得终于是时候向你寻求帮助了，StackOverflow。

模板生成了一朵花，我不知道该用什么，所以我只选择了拇指元素，因为我以前以类似的方式使用过它。如果您能想到其他更适合的方法，请告诉我。

无论如何，这是我的 ControlTemplate 的开始，来自 XAML 文件：

```
<ControlTemplate x:Key="cherryFlowerStyle" TargetType="{x:Type Thumb}">
                        <Viewbox Width="119.560" Height="114.268" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
                            <Canvas Width="119.560" Height="114.268">
                                <Canvas>
                                    <!-- Layer 1/<Path> -->
                                    <Path Data="... (removed to save space) ...">
                                        <Path.Fill>
                                            <RadialGradientBrush x:Name="cherryFlowerColorGradient" MappingMode="Absolute" GradientOrigin="593.380,333.416" Center="593.380,333.416" RadiusX="36.460" RadiusY="36.460">
                                                <RadialGradientBrush.GradientStops>
                                                    <!-- Flower color -->
                                                    <GradientStop x:Name="cherryFlowerColorGradientOuterColor" Offset="0.15" Color="#ffd6e062"/> 
```

这就是我在 C# 中所做的：

```
Thumb flower = new Thumb();
flower.Template = TryFindResource("cherryFlowerStyle") as ControlTemplate;
GradientStop grStop = (GradientStop)flower.Template.FindName("cherryFlowerColorGradientOuterColor", flower);
                        Console.WriteLine("gradient: " +grStop); 
```

创建一个新的拇指并应用模板工作（它在画布上画成一朵花）。但是，尝试访问模板内的渐变是行不通的。我希望有一个好的解决方案，否则我必须以丑陋的方式去做；在屏幕外创建一朵花（在 XAML 中）并在代码隐藏中引用它，因为它有效：/

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:04:49.747

那是行不通的，因为 Gradient 不是模板的子级，它是模板子级的属性值。因此，您可以`Path`按名称访问，并修改其`Fill`值。但请记住，梯度可能会被冻结。为什么不使用绑定和 DataContext 呢？或者更好的是，使用依赖属性直接修改颜色并使用 TemplateBinding。这将是一种更好的处理方式，而且工作量更少。Thumb 元素也用于移动元素，它封装了鼠标处理，如果您不需要该`Control`元素将是一个更好的基类。如果要性能，`Visual`还是`ContainerVisual`会好很多，但也很有限。