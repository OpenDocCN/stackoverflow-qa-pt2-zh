# StackOverflow 问答 15660000-15660999

# php - wp_title() 返回值无法设置样式

> ID：15660000
> 
> 赞同：0
> 
> 时间：2013-03-27T13:26:51.503
> 
> 标签：php, css, wordpress, echo

标题显示在我的图像之前并且没有样式。如何解决？

```
$tytul = wp_title();
echo '<img class="icon" src="http://site.pl/site/icon.png" /><h2>'.$tytul.'</h2>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:33:36.313

`wp_title()`将打印内容本身，而不是返回它，所以`echo wp_title()`不会从回声中给你任何东西，但会打印标题。如果你使用`var_dump(wp_title())`，你会看到标题，那么结果就是`NULL`。你想要的是：

```
echo '<img class="icon" src="http://site.pl/site/icon.png" /><h2>';
wp_title();
echo '</h2>'; 
```

# javascript - getElementsByTagName 不工作 javascript、XML、谷歌地图

> ID：15660005
> 
> 赞同：0
> 
> 时间：2013-03-27T13:27:06.507
> 
> 标签：javascript, xml, google-maps

我无法使用 getElementsByTagName 从 xml 文件中获取数据。我应该使用什么？

这是 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<markers>
    <marker>
        <lat>37.427770</lat> 
        <lng>-122.144841</lng>
        <name>Jackie</name>
    </marker>
    <marker>
        <lat>37.413320</lat> 
        <lng>-122.125604</lng>
        <name>Peter</name>
    </marker>
</markers> 
```

整个 HTML 文件：

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Common Loader</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
  </script>
 <script type="text/javascript" src="util.js"></script>
<script type="text/javascript">
var infowindow;
var map;

function initialize() {
var myLatlng = new google.maps.LatLng(37.4419, -122.1419);
var myOptions = {
  zoom: 13,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
downloadUrl("moredata.xml", function(data) {
  var markers = data.documentElement.getElementsByTagName("marker");
  for (var i = 0; i < markers.length; i++) {
    var latlng = new 
google.maps.LatLng(parseFloat(markers[i].getElementsByTagName("lat")),
                                parseFloat(markers[i].getElementsByTagName("lng")));
    var marker = createMarker(markers[i].getElementsByTagName("name"), latlng);
   }
 });
}

 function createMarker(name, latlng) {
 var marker = new google.maps.Marker({position: latlng, map: map});
 google.maps.event.addListener(marker, "click", function() {
  if (infowindow) infowindow.close();
  infowindow = new google.maps.InfoWindow({content: name});
  infowindow.open(map, marker);
});
return marker;
}

</script>
</head>
<body onload="initialize()">
<div id="map_canvas" style="width:400px; height:300px"></div>
</body>
</html> 
```

该文件是[http://gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/downloadurl_info.html的编辑版本](http://gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/downloadurl_info.html)

我试图在不使用属性的情况下获取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:33:24.590

我认为问题在于，

```
var markers = data.documentElement.getElementsByTagName("marker"); 
```

尝试将其更改为，

```
var markers = data.getElementsByTagName("marker"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:59:24.503

首先，`var markers = data.documentElement.getElementsByTagName("marker");`将导致一个空节点列表，因为您`<marker>`的 XML 中绝对没有元素。

接下来，`parseFloat(markers[i].getElementsByTagName("lat")`也不会工作。假设`markers[i]`将是元素`<title>`，[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)则将返回元素的[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)`<lat>` - 这是您可能无法做到的`parseFloat`！

相反，您需要从列表中获取第一个元素，访问其第一个[TextNode](https://developer.mozilla.org/en-US/docs/DOM/Text)并从中获取[`nodeValue`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeValue)- 或者至少以某种方式[`textContent`](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)从您的`<lat>`.

然后，回调函数看起来像

```
function(data) {
    var markers = data.documentElement.getElementsByTagName("title"); // or "marker", after you've changed it
    console.log(markers);
    for (var i=0; i<markers.length; i++) {
        var lats = markers[i].getElementsByTagName("lat"),
            lngs = markers[i].getElementsByTagName("lng"),
            names = markers[i].getElementsByTagName("name");
        if (lats.length && lngs.length) {
            console.log("contents:", lats[0].textContent, lats[0].textContent);
            var lat = parseFloat(lats[0].textContent),
                lng = parseFloat(lats[0].textContent);
        } else console.log("didn't found <lat>/<lng>");
        if (!isNaN(lat) && !isNaN(lng) && names.length) {
            var name = names[0].textContent,
                latlng = new google.maps.LatLng(lat, lng),
                marker = createMarker(name, latlng);
                console.log("created marker", name, marker);
        }
    }
} 
```

# css - 带有流动侧边栏和最大宽度主列的单列布局

> ID：15660016
> 
> 赞同：0
> 
> 时间：2013-03-27T13:27:32.730
> 
> 标签：css

我想要一个单列布局，其中文本正文的最大宽度应该是 30em，但它应该尽可能宽（最多 30em）。

左边距（文本正文左边缘和浏览器窗口左边缘之间的空白区域）最多应为 6em，并在必要时缩小（在较小的屏幕上）。

右边距应使用可用的剩余空间。

我见过这个问题：[我需要一个 max-margin CSS 属性，但它不存在。我怎么能假装呢？](https://stackoverflow.com/questions/6285279/i-need-a-max-margin-css-property-but-it-doesnt-exist-how-could-i-fake-it)- 但我不明白如何在我的情况下使用它。这就是我尝试过的（[http://jsfiddle.net/y2rd8/1/](http://jsfiddle.net/y2rd8/1/)）

```
<div class="left"></div>
<div class="right"></div>
<div class="body">
A wonderful serenity has taken possession of my entire soul,
</div>
<div style="clear: both;" /> 
```

和

```
.left, .right {
    background: gray;
}

.left {
    float: left;
    max-width: 6em;
}
.right {
    float: right;
    width: auto;
}

.body {
    max-width: 30em;
    border: 1px solid green;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:49:24.243

我会选择你所拥有的东西，但可能会远离浮动并完全消除`.left`，`.right`然后使用媒体查询来管理左边距：

[http://jsfiddle.net/y2rd8/9](http://jsfiddle.net/y2rd8/9)

```
.body {
    max-width: 30em;
    border: 1px solid green;
    margin-right: 1em;
}
@media screen and (max-width: 480px) {
    .body {
        margin-left: 2em;
    }
}
@media screen and (min-width: 481px) {
    .body {
        margin-left: 4em;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T08:48:37.983

Use a media query with size of max width of content plus two times the max width of the margin.

```
.body {
    max-width: 30em;
    border: 1px solid green;
    margin: auto;
}
/* 42em = 30 + (2*6) */
@media screen and (min-width: 42em) {
    .body {
        margin-left: 6em;
    }
} 
```

[http://jsfiddle.net/schettino72/j9HpH/1/](http://jsfiddle.net/schettino72/j9HpH/1/)

# java - Java：我可以在java中使用带有输入的布尔值吗

> ID：15660018
> 
> 赞同：0
> 
> 时间：2013-03-27T13:27:34.273
> 
> 标签：java

我是学习 Java 的新手，我为自己设定了创建购物篮的任务。

这是我的代码：

```
System.out.println("Grapes " + "£" + grapes + "    Quantity:");
    input= amount.nextLine();
    System.out.println("You Selected " + input + " Grapes"); 
```

我如何添加一个布尔值，所以当有人说他们想订购 1 串葡萄时，它会出现“葡萄串”，而当有人订购 2 串以上的葡萄时，会出现“葡萄串”。

谢谢你的帮助，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:29:46.703

```
int num = Integer.parseInt(input);
if(num == 1){
    // do whatever you want
}
else {
    // another action
} 
```

实际上，您甚至可以在不解析的情况下比较字符串表示

```
if(input.equals("1")) 
```

但我想无论如何你都需要整数表示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:30:06.280

你会做这样的事情：

```
boolean multiple_grapes = (Integer.valueOf(input) > 1);
if (multiple_grapes) {
  System.out.println("You Selected " + input + " Bunches of Grapes");
} else {
  System.out.println("You Selected " + input + " Bunch of Grapes");
} 
```

您需要解析`input`到`Integer`才能将其与整数值进行比较`1`。

# java - if/then 逻辑混乱的设计建议

> ID：15660026
> 
> 赞同：1
> 
> 时间：2013-03-27T13:27:48.833
> 
> 标签：java, oop, design-patterns

我愿意为这种常见场景选择设计模式：

我有一个接收消息的模块（MessageListener）。它收到的每条消息实际上都是一个对象 (MyMessage1,MyMessage2,..)

My_Message1,My_Message2 扩展了 My_Message_Abstract。

现在，当 MessageListener Object(onMessage(..)) 检索到消息时，我想做一个不同的“命令”，这取决于消息实例.. 像这样：

```
onMessage(My_Message_Abstract msg)
{
   if (msg instance of My_Message1)
   {
      doSomething()..
   }
   else if(msg instance of My_Message2)
   {
     doSomethingElse()..
    }
} 
```

我想摆脱这个锅炉 if/then 代码并拥有更好的未来维护/动态/插件能力/整洁的方式。

所以我采用了Command设计模式。我发现我可以有这样的东西：

在 MessageListener 中有一个地图：

```
Map<Integer, MessageCommand> messageCommandsMap = new HashMap<Integer, MessageCommand>();

..

sessionTargetMap.put(MSG_1_TYPE, new Message1Command());
sessionTargetMap.put(MSG_2_TYPE, new Message2Command());

(Message1Command,Message2Command implements from Command interface)

onMessage(My_Message_Abstract msg)
{
messageCommandsMap.get(msg.getType).executeCommand(msg);
} 
```

我不喜欢 MessageListeenr 中的 hashmap 想法，因为我将所有命令耦合到该对象（MessageListener）。

作为该线程提供的解决方案： [Java 中的 if 语句长列表](https://stackoverflow.com/questions/1199646/long-list-of-if-statements-in-java)

知道如何改进吗？Mybe 我应该为这个想法使用其他模式吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:31:49.587

我采用的方法是用一个通用接口装饰这些类，使我能够利用 Java 函数的虚拟特性。例如我会这样做：

```
public interface CoolInterface  
{
      void doSomething();  
}  

My_Message_Abstract implements CoolInterface  
{  
      public abstract void doSomething();
}  
Message1Command extends My_Message_Abstract
{  
       public void doSomething(){ System.out.println("First");
}    
Message2Command extends My_Message_Abstract
{  
       public void doSomething(){ System.out.println("");
} 
```

您的代码现在变为：

```
onMessage(My_Message_Abstract msg)
{
  msg.doSomething();
} 
```

如果您想委托，请执行以下操作：

```
 My_Message_Abstract implements CoolInterface  
    {  
          public void doSomething()
          {
             System.out.println("Default");
          }  
    }    

   Message1Command extends My_Message_Abstract
{  
       public void doSomething(){ System.out.println("First");
}    
Message2Command extends My_Message_Abstract
{  
       // no need to override the method just invoke doSomething as normal
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:02:15.167

`enum`当您想要列出可能要做的事情时，我总是喜欢使用：

```
public class Test {
  // A type of message.
  class MyMessage1 {
  };
  // A whole set of message types.

  interface MyMessage2 {
  };

  // The Dos - To demonstrate we just print something.
  enum Do {
    Something(MyMessage1.class) {
      @Override
      void doIt() {
        System.out.println("Something");
      }
    },
    SomethngElse(MyMessage2.class) {
      @Override
      void doIt() {
        System.out.println("Something else");
      }
    },
    Everything(Object.class) {
      @Override
      void doIt() {
        System.out.println("Everything");
      }
    };
    // Which classes this one applies to - could use an array of Class here just as easily.
    final Set<Class> applies = new HashSet<Class>();
    // You can add multiples on construction.
    Do(Class... applies) {
      this.applies.addAll(Arrays.asList(applies));
    }

    // Perform all that are relevant to this message type.
    static void doIt(Class messageClass) {
      for (Do d : Do.values()) {
        // If it is assignable
        boolean doIt = false;
        for (Class c : d.applies) {
          if (c.isAssignableFrom(messageClass)) {
            doIt = true;
          }
        }
        if (doIt) {
          // Execute the function.
          d.doIt();
        }
      }
    }

    // What to do.
    abstract void doIt();
  }

  public void test() {
    System.out.println("Hello");
    // Test with a concrete message.
    onMessage(new MyMessage1());
    // And an implementation of an interface.
    onMessage(new MyMessage2() {
    });
  }

  private void onMessage(Object message) {
    // Do something depending on the class of the message.
    Do.doIt(message.getClass());
  }

  public static void main(String args[]) {
    new Test().test();
  }
} 
```

使用这种模式，您甚至可以`Everything`为所有消息触发一个 which。

很容易扩展它以使用`Something`适用于的类数组。

如果您只想应用第一个匹配项，请在适当的位置跳出循环。

我的观点是——通过这种机制——你可以实现几乎任何你喜欢的策略，而不必积极地修改代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:34:40.197

您可以拥有一个 MessageCommand Factory，它基本上知道将哪个 MessageCommand 用于给定的消息类型。在工厂中，您可以使用映射或 if/else 来识别命令类。

现在，您的消息侦听器要求工厂根据类型给出适当的消息命令，然后每个消息命令都包含有效处理命令 (doSomethingElse) 方法的逻辑。

代码外观的抽象概念：

```
 class MessageCommandFactory {
       Command get(MessageType messageType) {
         if(messageType == MSG_1_TYPE) {
           return new Message1Command();
         } else ...
       } 

    class MessageListener {
    MessageCommandFactory messageCommandFactor;
        onMessage(My_Absctract_Message message) {
          Command command =  messageCommandFactory.get(message.getType());
          command.execute();
      }
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:43:11.043

所以实际上你`MessageListener`做了两个步骤：

1.  弄清楚收到了什么消息
2.  运行适当的命令

您可以像@Woot4Moo 那样将“运行”委托给消息本身，或者子类`MessageListener`为消息执行特定的操作，如下所示：

```
public class Message1Listener implements MessageListener {
  onMessage(SpecificMessage1 msg) {
    /* do something with msg */
  }
}

public class MessageBus {
  Map<Class<? extends Message>, MessageListener> listeners = new HashMap<>();
  void register(MessageListener listener, Class<? extends Message> msgType) {
    listeners.put(msgType, listener);
  }

  void onMessage(Message msg) {
    listeners.get(msg.getClass()).onMessage(msg);
  }
} 
```

你`MessageListener`已经成为`MessageBus`这里，代理注册的处理程序。这是一个*非常*基本的设置，您可以根据需要进行扩展（即`MessageListener`每个消息类型都有一个列表），甚至可能已经存在于您的上下文中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T13:43:56.107

在类似的情况下，我从您已有的开始，但添加了一个方法：

```
addMessageListener(int messageType, MessageCommand messageCommand) 
```

此外，其他类需要一种方法来“定位”您的类。最简单的方法是将上述方法设为公共静态，如果这适用于您的环境……但也可以酌情使用其他发现方式。

该方法只是添加到您已有的地图中。

如果两个命令希望收听相同的消息，则很容易通过将地图的“值”侧变为列表来进行调整

此外，您始终可以使用一些已经“预先注册”的预先确定的命令开始地图，或者从某种类型的配置中读取预先注册信息......等等。

**示例 1：**假设您有一个名为 NewMessageHandler 的新类。这个类需要处理一个全新的消息类型。在某个适当的时候，当NewMessageHandler 初始化自己时，if 也可以将自己注册为监听器。它必须“找到”调度程序类（希望这是一个单例），然后它可以调用 addMessageListener()。

**示例 2：** Dispatcher 类可以读取一个配置文件，该文件定义了一对消息类型和将处理该消息的类。

```
public class Dispatcher 
{
  public static Dispatcher getInstance()
  {
     //return the instance. Could accept parms for more complex needs
  }

  public void addMessageListener(int messageType, MessageCommand messageCommand)
  {
    //Add to the internal map
  }

  private void init()
  {
     //Optionally, read config file or System properties, and call addMessageListener()
  }

  private void dispatchMessage(Message msg)
  {
    //Look up map and dispatch to the registered instance
    //Call the handleMessage() method on the appropriate listener      
  }

} 
```

界面

```
public interface MessageCommand 
{
   public void handleMessage(Message msg);
} 
```

而另一个……

```
public class NewMessageHandler implements MessageCommand 
{

   private void init()
   {
      Dispatcher.addMessageListener(666, this)
   }

  public void handleMessage(Message msg)
  {

  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T14:32:08.770

这里的基本问题是消息是数据，您需要根据该数据的属性进行调度。因此，要么您需要更改数据对象以分派到不同的处理程序，要么您需要在侦听器中使用分派表。无论哪种方式，您都需要代码来处理调度。

IMO，消息是执行调度的*错误位置。*它是数据，行为是听者的责任。如果你有两个监听器，你会想要使用不同的调度表。

对于我自己的实现，我可能会使用 if-else 链来处理最多五到六个可能的区别。在此之上，一个函子图。这些只是更容易，而且很明显正在发生什么。

但是，如果您真的不喜欢简单的方法，这里有一个使用反射的方法：

```
public class Dispatcher {

    public static class Foo {}
    public static class Bar {}

    public void dispatch(Object obj) throws Exception {
        try {
            Method handler = this.getClass().getDeclaredMethod("handler", obj.getClass());
            handler.invoke(this, obj);
        }
        catch (Exception e) {
            System.out.println("couldn't determine handler for " + obj.getClass().getName());
        }
    }

    private void handler(Foo foo) {
        System.out.println("handler(Foo)");
    }

    private void handler(Bar bar) {
        System.out.println("handler(Bar)");
    }

    public static void main(String[] argv) throws Exception {

        Dispatcher dispatcher = new Dispatcher();

        dispatcher.dispatch(new Foo());
        dispatcher.dispatch(new Bar());
        dispatcher.dispatch("something else");

    }
} 
```

# python - 在 socketserver handle() 中保持连接而不进行轮询

> ID：15660041
> 
> 赞同：2
> 
> 时间：2013-03-27T13:28:26.883
> 
> 标签：python, sockets, events

我正在寻找一种与 python socketserver 保持连接的方法。我想避免以下情况。

**轮询输入**

例子：

```
class SingleTCPHandler(SocketServer.StreamRequestHandler):
    def handle(self):
        while True:
            message = self.rfile.readline().strip()
            ... do something with message 
```

我正在做的是不断检查是否收到了某些东西。我想避免这种情况，因为服务器是在 Raspberry pi 上运行的，所以我希望尽可能减少不必要的计算。

* * *

**更新：2013 年 3 月 28 日**

似乎 socket.recv() 是一个阻塞调用。根据[socketserver](http://docs.python.org/2/library/socketserver.html)的文档：

> 不同之处在于第二个处理程序中的 readline() 调用将多次调用 recv() 直到遇到换行符，而第一个处理程序中的单个 recv() 调用将只返回从客户端发送的内容sendall() 调用。

这意味着如果 socket.recv() 是一个阻塞调用，那么`while True`它不会导致不断检查新消息是否已经到达并且不会像我最初想象的那样消耗处理器。

* * *

**每条消息一个连接**

例子：

```
class SingleTCPHandler(SocketServer.StreamRequestHandler):
    def handle(self):
        while True:
            message = self.rfile.readline().strip()
            ... do something with message 
```

一旦收到消息，这将关闭连接。但是，消息每 60 毫秒发送一次，因此客户端每次都会初始化一个新连接。这给应该尽可能快的连接带来了开销。

**问题**

有没有办法在每次收到消息时获得某种“中断”？

（概念）示例：

```
class SingleTCPHandler(SocketServer.StreamRequestHandler):
    def handle(self):
        if interrupt:
            message = self.rfile.readline().strip()
            ... do something with message 
```

我之前问过一个类似的[问题](https://stackoverflow.com/a/14323295/1214214)，但是这个问题总结了前一个问题中没有直接解决的问题的本质。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:21:26.057

为了我自己的利益，我继续实施了一个版本。

```
import asyncore, socket, time, signal, sys

finished = None

class EchoHandler(asyncore.dispatcher_with_send):

    def handle_read(self):
        data = self.recv(8192)
        if data:
            self.send(data)

    def handle_close(self):
        print 'Closing connection from %s' % repr(self.getpeername())
        self.close()

class Listner(asyncore.dispatcher):

    def __init__(self, host, port):
        asyncore.dispatcher.__init__(self)
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.set_reuse_addr()
        self.bind((host, port))
        self.listen(5)
        self.number_accepted = 1

    def handle_accept(self):
        pair = self.accept()
        if pair is not None:
            sock, addr = pair
            print 'Incoming connection from %s' % repr(addr)
            handler = EchoHandler(sock)
            self.number_accepted-=1
        if self.number_accepted < 0:
            finished = 1

client = Listner('127.0.0.1', 1033)
asyncore.loop()

while not finished:
    time.sleep(1) 
```

# java - c:forEach 循环打印方括号分隔符

> ID：15660042
> 
> 赞同：6
> 
> 时间：2013-03-27T13:28:27.597
> 
> 标签：java, jsp, jstl

我将一个名为 dataTable 的属性传递给我的 JSP，它是一个字符串列表。在 JSP 中，如果我输出属性，则使用 ${dataTable} 以原始格式将其打印出来：

```
[[Header1, Header2, Header3], [A, B, C], [1, 2, 3]] 
```

我可以像这样直接打印一个项目：

```
${dataTable[1][2]} 
```

输出：C

然后，当我编写一个嵌套的 c:forEach 循环来打印表格时，包括每行末尾的方括号，但不包括整个对象上的方括号。

我的代码是：

```
<c:forEach var="row" items="${dataTable}">
    <c:forEach var="item" items="${row} ">
        <span>${item}</span>
    </c:forEach>
    <br />
</c:forEach> 
```

结果是：

```
 <span>[Header1</span>
        <span> Header2</span>
        <span> Header3] </span>
    <br />
        <span>[A</span>
        <span> B</span>
        <span> C] </span>
    <br />
        <span>[1</span>
        <span> 2</span>
        <span> 3] </span>
    <br /> 
```

这几乎就是我想要的，我只是不想要每行开头和结尾的方括号。

我错过了什么导致那些方括号在迭代时出现，但在我直接访问项目时却没有？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:47:46.760

之后有一个额外的空间`${row}`导致列表在这一行上获得“toStringed” `<c:forEach var="item" items="${row} ">`，将其更改为`<c:forEach var="item" items="${row}">`，你会很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:18:10.287

你说这`dataTable`是一个字符串列表——这意味着内部`forEach`标签正在遍历一个字符串。在 Apache JSTL 实现（[此处](http://grepcode.com/file/repo1.maven.org/maven2/javax.servlet/jstl/1.2/org/apache/taglibs/standard/tag/common/core/ForEachSupport.java#ForEachSupport.toForEachIterator%28java.lang.String%29)为 1.2 源代码）中，迭代字符串会将其解析为逗号分隔的标记。所以字符串`"[A, B, C]"`被解析到列表中`["[A", " B", " C]"'`。

要获得您想要的行为，请尝试`dataTable`使用嵌套列表进行定义，例如，`[["A", "B", "C"], ["1", "2", "3"]]`而不是`["[A, B, C]", "[1, 2, 3]"]`.

# hyperlink - octopress markdown 可以从其他文件中读取参考链接吗？

> ID：15660044
> 
> 赞同：1
> 
> 时间：2013-03-27T13:28:38.173
> 
> 标签：hyperlink, markdown, octopress

我在 windows 平台上构建了我的第一个 Octopress 博客，并在每篇文章中发现了重复的参考链接。

```
# new_post.markdown
[google]
[google]: http://google.com 
```

我可以在一个文件名 reflink.markdown 中收集所有参考链接并将其包含以供重复使用吗？

```
# reflink.markdown
[google]: http://www.google.com
[yahoo]: http://www.yahoo.com
[xxx]: http://xxx.com 
```

然后我尝试将以下行添加到 new_post.markdown 并且它是工作！

```
{% include reflink.markdown %} 
```

但我想在每篇文章中跳过这一步，有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:24:10.013

添加以下行

> {% 包括 reflink.markdown %}

在文件夹`post.html`里面。`_layout`

# ruby-on-rails - 如何修复 Rails 中设计的批量分配安全错误？

> ID：15660046
> 
> 赞同：0
> 
> 时间：2013-03-27T13:28:39.917
> 
> 标签：ruby-on-rails, authentication, devise

我在我的 Rails 应用程序中使用 Devise 进行身份验证。当我尝试以用户身份注册时，我收到一条错误消息：无法批量分配受保护的属性：电子邮件、密码、密码确认。直到我在名为“所有者”的用户表中添加了一个新列之后，我才收到此错误。

用户.rb

```
class User < ActiveRecord::Base
    devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable   
    attr_accessible :owner, :email, :password, :password_confirmation, :admin, :as => :admin    
end 
```

迁移以添加用户：

```
class AddOwnerToUsers < ActiveRecord::Migration
  def change
    add_column :users, :owner, :boolean, :default => false
  end
end 
```

在我添加之前：所有者，我不记得有这个问题。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:39:34.497

我不太`:as`确定`attr_accessible`. 我从来没有用过。到目前为止，我已经了解，您必须在更新质量属性时指定这一点，例如：

```
User.new(params[:user], :as => :admin) 
```

或者，

```
@user = User.find(1)
@user.update_attributes(params[:user], :as => :admin) 
```

# ios - 声音一直在循环

> ID：15660047
> 
> 赞同：0
> 
> 时间：2013-03-27T13:28:42.283
> 
> 标签：ios, ipad, audio, cocos2d-iphone

我已经实现了加载我声音数组的方法：

```
-(void) soundSuper
{
    [soundEngine stopAllSounds];

    [soundEngine playSound:(1000+tag) sourceGroupId:1 pitch:1 pan:1 gain:1.0f loop:NO];
    NSLog(@"sound1 activated");

    [self schedule:@selector(playSecondSound) interval:2];
}

-(void) playSecondSound {
    [self unschedule:@selector(playSecondSound)];
    [soundEngine playSound:(1008+tag) sourceGroupId:1 pitch:1 pan:1 gain:1.0f loop:NO];
    NSLog(@"sound2 activated");
} 
```

在这里，它加载声音，然后在触摸按钮时播放。2声，同时响起。问题是现在，我想在我的 initScene 中加载声音。我用这种方法得到这个：

```
[self schedule:@selector(soundSuper) interval:2]; 
```

但问题是当我进入时，声音播放，但它一直在循环。我不知道该怎么办，因为我已经在void第二声音方法上取消了它。有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:14:02.020

你不认为你应该也取消安排“soundSuper”选择器，像这样

```
-(void) soundSuper
{
    //HERE : you unschedule this selector too.
    [self unschedule:@selector(soundSuper)];

    [soundEngine stopAllSounds];

    [soundEngine playSound:(1000+tag) sourceGroupId:1 pitch:1 pan:1 gain:1.0f loop:NO];
    NSLog(@"sound1 activated");

    [self schedule:@selector(playSecondSound) interval:2];
} 
```

# c++ - C++ API - 什么是正确的方法

> ID：15660048
> 
> 赞同：4
> 
> 时间：2013-03-27T13:28:42.510
> 
> 标签：c++, api, dll

我必须为 C++ 框架构建一个 API，它可以做一些模拟工作。我已经创建了一个带有`__declspec(dllexport)`函数的新类，并将框架构建到一个 DLL 中。这很好用，我可以在 C# 应用程序中使用该框架。但是是否有另一种或更好的方法来使用 C++ 创建 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:31:58.110

如果要创建 C++-API，从 DLL/共享库中导出一组类是可行的方法。但是，许多用 C++ 编写的库决定提供 C 接口，因为纯 C 接口更容易绑定到外语。要将外语绑定到 C++，通常需要 SWIG 等包装器生成器。

C++-API 还存在一个问题，即由于 C++ 名称修改，需要使用相同的编译器/链接器来构建框架和应用程序。

重要的是要注意`__declspec(dllexport)`告诉编译器应该导出一个类的机制是特定于 Microsoft 编译器的。通常将其放入预处理器宏中以便能够在其他编译器上使用相同的代码：

```
 #ifdef _MSC_VER 
 #   define MY_APP_API __declspec(dllexport)
 #else
 #   define MY_APP_API
 #endif

 class MY_APP_API MyClass {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:36:39.417

导出类的解决方案有一些严重的缺点。您将无法用其他语言编写 DLL，因为它们不支持名称修饰。此外，您将无法使用 VS 以外的其他编译器（出于相同的原因）。此外，您可能无法使用*其他版本*的 VS，因为 MS 不保证该修改机制在不同版本的编译器中保持相同。

我建议使用扁平的 C 风格界面，例如。

```
MyClass::Method(int i, float f); 
```

导出为：

```
MyClass_MyMethod(MyClass * instance, int i, float f); 
```

您可以将其包装在 C# 中以使其再次成为一个类。

# php - 更新mysql数据库和id以及与id相关的图像？

> ID：15660049
> 
> 赞同：0
> 
> 时间：2013-03-27T13:28:42.417
> 
> 标签：php, mysql

我有这个 php 文件，它将更新 mysql 数据库中的表。

它在一定程度上起作用。它会更新产品的名称（product_name），也会更新（date_added）。但它没有更新 id，因此没有显示使用该 id 上传的图像！

这是代码：

```
<?php 
// Parse the form data and add inventory item to the system
if (isset($_POST['product_name'])) {

    $product_name = mysql_real_escape_string($_POST['product_name']);
    // See if that product name is an identical match to another product in the system
    $sql = mysql_query("SELECT id FROM tomProduct WHERE product_name='$product_name' LIMIT 1");
    $productMatch = mysql_num_rows($sql); // count the output amount
    if ($productMatch > 0) {
        echo 'Sorry you tried to place a duplicate "Product Name" into the system, <a href="index.php">click here</a>';
        exit();
    }
    // Add this product into the database now
    $sql = mysql_query("UPDATE tomProduct SET product_name='$product_name', date_added=now()") or die (mysql_error());
     $pid = mysql_insert_id();
    // Place image in the folder 
    $newname = "$pid.jpg";
    move_uploaded_file( $_FILES['fileField']['tmp_name'], "../tom/$newname");
    header("location: verify_members.php"); 
    exit();
}
?> 
```

这是表格：

```
<form action="verify_members.php" enctype="multipart/form-data" name="myForm" id="myform" method="post">
<table width="90%" border="0" cellspacing="0" cellpadding="6">
  <tr>
    <td width="20%" align="right">Product Name</td>
    <td width="80%"><label>
      <input name="product_name" type="text" id="product_name" size="64" />
    </label></td>
  </tr>
  <tr>
    <td align="right">Product Image</td>
    <td><label>
      <input type="file" name="fileField" id="fileField" />
    </label></td>
  </tr> 
        <tr>      
  <tr>
    <td>&nbsp;</td>
    <td><label>
      <input type="submit" name="button" id="button" value="Add This Item Now" />
    </label></td>
  </tr>
</table>
</form> 
```

有谁知道为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:32:32.777

`mysql_insert_id()`返回最后一条`INSERT`记录，而不是`UPDATE`.

# jqgrid - jqgrid 4.4.4 getGridParam("page") 没有返回正确的值

> ID：15660050
> 
> 赞同：0
> 
> 时间：2013-03-27T13:28:43.747
> 
> 标签：jqgrid

在 jqgrid 4.4.4 $("#myGrid").getGridParam("page"); 获取用户在分页文本框中输入的页码。

但它会返回该分页文本框中已经存在的页码。

注意：在 jqgrid 3.7.2 (+ jquery 1.4.2) 中它工作正常（即返回用户输入的值）

有人有建议和解决方法吗？

（现在我使用的是 jquery 版本 1.9.0 + jqgrid 4.4.4）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:05:37.197

这个问题发生在我升级到 4.4.4 之后。问题的原因基本上是提交[https://github.com/tonytomov/jqGrid/commit/3e4aa0f2fdcb8c2c2a17e842899aca6d1000410a](https://github.com/tonytomov/jqGrid/commit/3e4aa0f2fdcb8c2c2a17e842899aca6d1000410a)

此提交将 onpagin 更改为在网格页面计算之前执行。在我当前的项目中，我已经恢复了这些行，所以我的分页再次起作用（我使用外部源绑定）。我建议实现onBeforePaging和onAfterPaging，每个用户都可以附加到他们想要的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:51:22.240

以下将为您提供价值：

```
$(".ui-pg-input").val(); 
```

# c# - 两个客户端之间的不同服务行为

> ID：15660051
> 
> 赞同：0
> 
> 时间：2013-03-27T13:28:44.010
> 
> 标签：c#, wcf

我有一项`WCF`需要在现有应用程序中组合的服务。
服务界面：

```
[ServiceContract(CallbackContract = typeof(IClientCallback))]
    public interface IExecutionService
    {
        [OperationContract]
        ExecutionStatus Execute(string path);

        [OperationContract]
        ExecutionStatus Abort();
    } 
```

和回调：

```
[ServiceContract]
    public interface IClientCallback
    {
        [OperationContract(IsOneWay = false)]
        string GetUserInput(string message, string information, bool isPause);

        [OperationContract(IsOneWay = true)]
        void OutputAvailable(OutputAvailableEventArgs args);

        [OperationContract(IsOneWay = true)]
        void ResultAvailable(ResultAvailableEventArgs args);

        [OperationContract(IsOneWay = true)]
        void ExecutionStarted(ExecutionStartedEventArgs args);

        [OperationContract(IsOneWay = true)]
        void ExecutionEnded(ExecutionEndedEventArgs args);
    } 
```

该服务正在执行一些工作并在有需要报告的情况下进行报告。Args 类被标记为`DataContract`带有命名空间。它们包含 .Net 原生类型 ( `int`, `string`, `DateTime`)。

我创建了一个测试应用程序，一切都很好（从要求服务执行到`ExecutionStarted`调用约 1 秒的时间）。

在我现有的应用程序中创建客户端时，有两个问题：

1.  `Execute()`缓慢 - 从到大约 1 分钟`ExecutionStarted()`。
2.  最后一个电话 - `ExecutionEnded`- 只是没有发生。会发生什么？最后一次`OutputAvailable`调用发生了。在调试期间，我看到服务调用了该`ExecutionEnded`方法，但是在客户端调用的是`OutputAvailable`（应该被调用，只是更早而不是代替完成方法）。

我在我的测试客户端和我的真实应用程序中使用相同的测试。

我希望一些可能有帮助的代码：

**服务**：

类声明：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Reentrant)]
        public class ExecutionService : IExecutionService

public ExecutionStatus Execute(string path)
        {
            lock (locker)
            {
                var tempClient = OperationContext.Current.GetCallbackChannel<IClientCallback>();
                if (client == null)
                    client = tempClient;
                else if (client != null && client != tempClient)
                {
                    throw new FaultException(new FaultReason("Execution Service is busy processing a request."));
                }
                else if (tempClient == null)
                    throw new FaultException(new FaultReason("No client found, execution is aborted."));
                Log.InfoFormat("client: "+ DateTime.Now);
                Log.InfoFormat(client == null ? "null" : client.ToString());
            }
            ((IContextChannel)client).OperationTimeout = new TimeSpan(0,3,0);
            Task<ExecutionStatus> executionTask = Task.Factory.StartNew(() => HandleExecution(path));
            return executionTask.Result;
} 
```

（确保我一次只有一个客户端。我需要可重入模式，以便可以在服务方法期间使用回调。）

**客户端：** 创建与服务的连接：

```
 var myBinding = new WSDualHttpBinding();
 var myEndpoint = new EndpointAddress("http://localhost:3050/ExecutionService");
 var myChannelFactory = new DuplexChannelFactory<IExecutionService>(this, myBinding, myEndpoint);
 service = myChannelFactory.CreateChannel();
 var executionStatus = service.Execute(@"C:\Users\nosh\Desktop\launcher.py"); 
```

如有必要，我将发布更多代码。
另一个问题是，在我的真实应用程序中，我得到：

```
A first chance exception of type 'System.TimeoutException' occurred in System.ServiceModel.dll
A first chance exception of type 'System.TimeoutException' occurred in mscorlib.dll 
```

就在“执行”方法返回之前，后来我得到：

```
A first chance exception of type 'System.Runtime.Serialization.SerializationException' occurred in System.Runtime.Serialization.dll
A first chance exception of type 'System.ServiceModel.Dispatcher.NetDispatcherFaultException' occurred in System.ServiceModel.dll
A first chance exception of type 'System.ServiceModel.Dispatcher.NetDispatcherFaultException' occurred in System.ServiceModel.dll
A first chance exception of type 'System.ServiceModel.Dispatcher.NetDispatcherFaultException' occurred in System.ServiceModel.dll
A first chance exception of type 'System.ServiceModel.Dispatcher.NetDispatcherFaultException' occurred in System.ServiceModel.dll 
```

这在我的测试应用程序中不会发生。
知道这里有什么问题吗？

**编辑**
我想我知道出了什么问题，只是不知道如何解决它。问题是我真正的应用程序是`WPF`，并且在使用`WCF`. 我尝试切换到`NetTcpBinding`但没有帮助。我会很感激其他建议。

**编辑 2**
对于这个`WPF`问题，您应该在回调实现中添加以下内容：

```
[CallbackBehavior(UseSynchronizationContext = false)] 
```

（感谢[Ian Ringrose在](https://stackoverflow.com/users/57159/ian-ringrose)[这里](http://www.codingtiger.com/questions/wcf/Seeking-WCF-Duplex-TwoWay-Subscribe+Callback-Example.html)提供答案。）
现在我仍然面对一个无响应`WPF`的客户端，但与服务的连接没有挂起。我会很感激更多的建议。

**编辑 3**
现在它只是一个没有在客户端上调用的方法。连接是活动的（我在它之后还有其他调用），该方法没有做任何特别的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:58:49.837

我想每个人都会不时地偶然发现那些 WTF。
我无法解释解决方案背后的逻辑，但解决方案本身很简单：

1.  在服务解决方案中，重命名有问题的方法（在`ICallback`界面中）。
2.  重新编译并更新和重新编译有问题的应用程序。
3.  运行应用程序，突然调用方法。
4.  再次将该方法重命名为原始名称。
5.  赢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:56:14.227

我不知道您是如何设置服务的，但是您是否使用异步方法来调用服务？否则我建议你实现它。您的服务是静态的，因此这也可能是问题所在，当您在其他设备上运行它时，链接将无法正常工作。至于序列化错误我无能为力。

# php - PHP 的 fopen 和 fwrite 的 VB.NET 版本是什么，如果存在的话？

> ID：15660060
> 
> 赞同：2
> 
> 时间：2013-03-27T13:29:25.240
> 
> 标签：php, .net, vb.net, fopen, fwrite

我是 .NET 的新手，并且是一个整体的开发者，所以请多多包涵。我一直在研究一个聊天应用程序，发现了一个使用 PHP 和 Ajax 的很棒的教程。我已经使用 VB.NET 解决了大部分问题，但似乎无法找到设置一种“fopen/fwrite”的方法。希望这是有道理的。这是我试图“转换”的 PHP 代码：

```
 <?  
session_start();  
if(isset($_SESSION['name'])){  
    $text = $_POST['text'];  

    $fp = fopen("log.html", 'a');  
    fwrite($fp, "<div class='msgln'>(".date("g:i A").") <b>".$_SESSION['name']."</b>: ".stripslashes(htmlspecialchars($text))."<br></div>");  
    fclose($fp);  
}  
?> 
```

如果您需要任何其他信息，请告诉我。同样，在从事销售和营销 12 年后，现在只编程了 4 个月。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:47:43.013

[File.AppendAllText](http://msdn.microsoft.com/en-us/library/ms143356.aspx)可能最接近您真正想要的。

但是要回答您的问题：[File.AppendText](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)将在文件上创建一个`StreamWriter`，因此逐字翻译将是：

```
Using writer As StreamWriter = File.AppendText("log.html")
    writer.Write(...)
End Using 
```

这几乎正​​是上面提到的方法所做的（如果我的语法稍有错误，我深表歉意，我在大约十年内没有编写 VB.NET）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:52:23.180

下面是一个等效的 vb.net 示例。

图书馆：

```
Imports System.IO
Imports System.Text 
```

代码：

```
Dim yourFile As System.IO.FileStream
Dim byteData() As Byte
byteData = Encoding.ASCII.GetBytes("Something to add to the file")
yourFile = New FileStream("file.txt", FileMode.Append)
yourFile.Write(byteData, 0, byteData.Length)
yourFile.Close() 
```

# json - 如何将 json 文件读入 Clojure defrecord 中（稍后搜索）

> ID：15660066
> 
> 赞同：2
> 
> 时间：2013-03-27T13:29:38.203
> 
> 标签：json, clojure

我在 Clojure REPL 中创建了一个 defrecord：

```
user=> (defrecord Data [column1 column2 column3])
user.Data 
```

如何通过读取 .json 文件自动向此记录添加数据？defrecord 中的每一列都与 json 数据中的一个键完全对应。如果文件包含一条记录，它看起来类似于：

```
[
  {
    "column1" : "value1"
    "column2" : "value2"
    "column3" : "value3"
  }
] 
```

但是文件中有成千上万条这样的记录。

我可以像这样啜饮文件的内容：

```
(json/read-json (slurp "path/to/file.json"))) 
```

read-json 函数的依赖项被添加到 project.clj 文件中，该文件位于我`lein repl`从命令行运行的目录中：`:dependencies [org.clojure/data.json "0.2.1"]`.

我希望能够使用 Clojure 函数搜索记录的值，这样我传递给搜索函数的值介于单个记录的 column1 和 column2 值之间（即*nth-record.column1 .value* **<=** *查询* **<=** *nth-record.column2.value*）。找到匹配记录后，我想返回同一记录中另一列的值 (nth-record.column3.value)。第 1 列和第 2 列的值将是唯一的，表示不重叠的值范围。column3 的值不是唯一的。

这似乎是一个相当微不足道的任务，但我无法弄清楚如何使用 Clojure 文档或我在网上找到的示例来完成它。对我来说，记录如何在 Clojure 内部存储并不重要，只要我可以搜索它们并返回同一记录中相关字段的值即可。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T15:07:35.303

使用`data.json`包：

```
(require '[clojure.data.json :as json]) 
```

将值读入内存：

```
(def all-records (json/read-str (slurp "path/to/file.json")
                :key-fn keyword))
;; ==> [ { :column1 "value1", :column2 "value2", :column3 "value3" }, ...] 
```

查找匹配记录：

```
(def query "some-value")
(def matching (filter #(and (< (:column1 %) query) (< query (:column2 %))) all-records)) 
```

获取第 3 列：

```
(map :column3 matching) 
```

将它们收集在一起（并使其更灵活）：

```
(defn find-matching [select-fn result-fn records]
   (map result-fn (filter select-fn records)))

(defn select-within [rec query]
  (and (< (:column1 rec) query) (< query (:column2 rec))))

(find-matching #(select-within % "some-value") :column3 all-records) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:37:19.867

1.  可能应该使用柴郡来提高速度。
2.  如果您的查询变得足够复杂，请考虑使用 lucene，clojure 有一个很好的包装器。

我认为您认为记录在某种程度上比地图更适合于此，据我所知，您没有使用任何使记录变得特别的功能，例如多态性。可能有办法让柴郡吐出唱片，但我不会打扰。

# xslt - XSLT：如何编码嵌套字段和具有多个参数的字段？

> ID：15660070
> 
> 赞同：0
> 
> 时间：2013-03-27T13:29:52.187
> 
> 标签：xslt, xml-parsing, filemaker

现在我的情况比我在 XSLT for MODS XML 到 FilemakerPro 转换中询问的情况更复杂[，如何处理带有参数的 mod？](https://stackoverflow.com/questions/15648696/in-xslt-for-mods-xml-to-filemakerpro-conversion-how-treat-a-mod-with-a-paramete). 在我尝试转换为 FileMaker Pro 格式的 XML 中，我有：

```
<name type="personal">
   <namePart type="family">
      Giobbi
   </namePart>
   <namePart type="given">
      Robert
   </namePart>
   <role>
      <roleTerm authority="marcrelator" type="code">
         aut
       </roleTerm>
   </role>
</name> 
```

我在 XSLT 中放了什么`<xsl:value-of select="...." />`来处理它。新的并发症是：

1.  源 XML 具有嵌套结构，其中包含多个元素`name`。
2.  对于 item`roleTerm`有两个参数`authority`和`code`。

在生成的 XML 中，我想要为“家庭”和“给定”名称以及`roleTerm`.

此外，在某些情况下，会有两个或更多这样的`<name>...</name>`实体。我该如何处理——以便在目标 XML 中创建额外的列？是否像`MAXREPEAT`从更改`"1"`为更大的值一样简单？

所需的输出应类似于以下内容：

```
<FMPXMLRESULT xmlns="http://www.filemaker.com/fmpxmlresult"    
     xmlns:mod="http://www.loc.gov/mods/v3">
   <ERRORCODE>0</ERRORCODE>
   <PRODUCT NAME="N/A" BUILD="N/A" VERSION="N/A"/>
<DATABASE NAME="N/A" LAYOUT="N/A" RECORDS="1" DATEFORMAT="M/d/yyyy" TIMEFORMAT="h:mm:ss a"/>
<METADATA>
  <FIELD EMPTYOK="YES" MAXREPEAT="1" TYPE="TEXT" NAME="Title"/>
  <FIELD EMPTYOK="YES" MAXREPEAT="1" TYPE="TEXT" NAME="Genre"/>
  <FIELD EMPTYOK="YES" MAXREPEAT="1" TYPE="TEXT" NAME="LastName"/>
  <FIELD EMPTYOK="YES" MAXREPEAT="1" TYPE="TEXT" NAME="FirstName"/>
</METADATA>
<RESULTSET>
  <ROW MODID="1" RECORDID="1">
    <COL>
      <DATA>Roberto Giobbi's Card college. Volume 1</DATA>
    </COL>
    <COL>
      <DATA>book</DATA>
    </COL>
    <COL>
      <DATA>Giobbi</DATA>
    </COL>
    <COL>
      <DATA>Roberto</DATA>
    </COL>
  </ROW>
</RESULTSET>
</FMPXMLRESULT> 
```

我说“类似”是因为当然会有更多的行，源 XML 中的每个项目一个，更重要的是因为我不知道当表单的字段不止一个时结果应该是什么样子`<name type="personal">...</name>`在源中（即，书目源 xml 文件中的多个作者）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:39:05.917

每个文本内容的示例选择：

重复 COL：

```
<xsl:for-each select="name">
    <ROW MODID="{position()}" RECORDID="{position()}">
        ...
    </ROW>
</xsl:for-each> 
```

选择姓氏：

```
<xsl:value-of select="namePart[@type='family']"/> 
```

用于生成

```
<xsl:value-of select="namePart[@type='given']"/> 
```

用于选择 roleTerm

```
<xsl:value-of select="roleTerm[@authority='marcrelator' and @type='code']"/> 
```

# android - 应用程序标签附近的 ProgressDialog

> ID：15660071
> 
> 赞同：0
> 
> 时间：2013-03-27T13:29:58.593
> 
> 标签：android, progressdialog, progress

我注意到一些应用程序在应用程序标签附近有 ProgressDialog，我在下图中用红色圆圈标记 - ![在此处输入图像描述](../Images/349cadb4ed76221d876498f2bd7e65bc.png)

有人知道我怎样才能在那里获得 ProgressDialog 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:51:29.863

您正在谈论所谓的[Action Bar](http://developer.android.com/guide/topics/ui/actionbar.html)。这个 UI 概念允许开发人员将他们的菜单和有关当前显示屏幕的上下文信息放在顶部的单独栏中，包括您提到的不确定进度指示器。原生地，这个栏在旧的 android 版本上是不可用的，但是有一个优秀的库可以让你使用动作栏并且仍然针对旧版本：[ActionBarSherlock](http://actionbarsherlock.com/)

[您可以通过ActionBarSherlock 演示](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos)查看操作栏的功能

# vba - 具有多个类别的 VBA 图表

> ID：15660072
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:29:59.237
> 
> 标签：vba, charts

任何人都可以提供以下帮助 - 我有一个包含 37000 条记录的大型数据集。数据有一个主要类别 - Basin Name 和一个子类别 - Play name。戏剧可以在几个盆地中，并且盆地可以有许多戏剧。我想要一个可以将所有相似值组合在一起的脚本，并为每组相似数据绘制一个图表（x，y 散点图）。请看下面的例子。

我对VBA完全陌生，所以我不知道这是否可以做到......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:37:57.550

从其声。您最好使用数据透视表汇总数据，然后从中创建图表。

在线阅读有关数据透视表的信息，它们将改变您的生活；-)

# c# - 如何在 WebMatrix 的 sql 查询中转义 & 符号？

> ID：15660073
> 
> 赞同：2
> 
> 时间：2013-03-27T13:30:05.243
> 
> 标签：c#, sql-server-ce, webmatrix

我正在尝试在 WebMatrix 中查询数据库，我已经做过几次了，只是这一次，我发现供应商列中的一些字段包含与号。我查看了几篇文章，但没有人从 WebMatrix 的角度攻击这个解决方案（实际上，根本没有人真正解决直接问题，而是针对特定环境的解决方案）。

我还尝试了几件事，包括 C# 的 Replace 方法（尽管，我从来没有得到一个明确的例子来说明我应该用什么替换 & （显然这不起作用）。

理想的情况是 sql 环境本身中的转义字符，但是，afaik，不存在这样的转义字符。我应该用什么替换以下查询以返回其字段包含＆符号的行，如下所示：

```
SELECT vendor_id FROM vendors WHERE vendor_name = 'J & H Equipment' 
```

即使 vendor_name 列包含的值（字符串）正好是“J & H Equipment”，上述查询也不返回任何行

它提到我正在参数化我的查询，所以实际的查询看起来像：

```
string selectQueryString = "SELECT ap_vendor_id FROM ap_vendors WHERE ap_vendor_name = @0";

var code = db.QueryValue(selectQueryString, searchString); 
```

在这段代码之后，我只是将值写入页面（使用剃刀，是的，我尝试过 Html.Raw(code) 和 @code），因为这是一个 AJAX 调用。

此外，以下是我在实际查询之前尝试运行的替换功能：

```
searchString = searchString.Replace("&", "\\&"); 
```

请注意，双反斜杠是必需的，因为“\”字符在 C# 中是转义字符，因此两个“\”在 C# 中等同于一个“\”。

--------------------------我的解决方案---------- -----

对我来说，解决方案是在调用 AJAX 之前在我的 javascript 中使用 encodeURIComponent（我确信很清楚，到目前为止，我已经很久没有使用 AJAX 了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:34:10.680

解决方案是在 AJAX 调用之前在 javascript 中使用 encodeURIComponent。

# iphone - 两个标签栏项目与一个视图控制器一起使用

> ID：15660076
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:30:06.703
> 
> 标签：iphone, ios, objective-c, xcode

我在 xcode 4.5 中有一个带有五个视图控制器（5 个项目）的 tabbarcontroller，我希望项目 2 不显示它的视图控制器，但我想在 3 号视图控制器中显示（标记时）各种 GMSMarker，并隐藏这些标记（当未标记 tabbaritem 时）。viewController 3 显示的是 GoogleMap。

我是初学者，我尝试过“setSelectedIndex”功能，但它对我不起作用。

有人有什么想法吗？？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:11:40.050

`UITabBarController`旨在`UIViewController`为每个选项卡保存单独的实例。实现我认为您正在尝试做的更好的方法是简单地创建多个`UIViewController`您尝试在项目 2 和 3 中使用的实例。如果这不可能，您可能正在计划一个糟糕的用户体验（并且您可以考虑将两个选项卡组合成一个，并在其中放置一个分段控件或其他东西来切换功能）。

# arrays - 如何找到最大的数

> ID：15660084
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:30:17.193
> 
> 标签：arrays

如何计算最大数并显示？

```
import java.util.Scanner;
public class GreatestNumber {

public static void main(String[] args) {
int [] num = new int [10];
int counter;
int max = 0;

Scanner read = new Scanner(System.in); 
```

//提示用户输入数字

```
for (int i=0; i<num.length; i++)
  {
   System.out.print("Enter StaffID to be edited:");
   num[i]=read.nextInt();
  } 
```

//计算目前为止的最大数

//显示最大数

```
}//end main
}//end class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:33:37.953

你需要类似的东西：

```
int maxVal = Integer.MIN_VALUE;
for (int i=0; i < num.length ; i++) 
    if (num[i] > maxVal) maxVal = num[i];

System.out.println(maxVal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:33:45.377

每次向数组中添加一个数字时，只需检查它是否大于当前最大的数字，如果是，则将 max 设置为新数字。这样可以节省稍后循环遍历数组以找出最大数字的时间。

```
for (int i=0; i<num.length; i++)
{
    System.out.print("Enter StaffID to be edited:");
    num[i]=read.nextInt();
    if (num[i] > max)
    {
        max = num[i];
    }
} 
```

# php - 传递大变量时如何减少内存使用量

> ID：15660092
> 
> 赞同：3
> 
> 时间：2013-03-27T13:30:38.907
> 
> 标签：php, variables, memory

例如：

```
a(wordwrap(str_repeat('abcdef', 500000), 160, "\n", true));    

function a($v){
  $v[1] = 'x';      
  $v = b($v);
  return $v;
}

function b($v){
  $v[2] = 'x';    
  $v = c($v);
  return $v;
}

function c($v){
  $v[3] = 'x';  
  d($v);    
}

function d($v){
  $v[4] = 'x';
  print $v;
} 
```

这使用〜23 MB。我认为是因为 PHP 在每次修改时都会创建该文本的副本。如果我只在使用 12 MB 时打印文本。

我可以在调用函数之前以某种方式释放原始变量的内存吗？喜欢

```
unset($v);
$v = c($v); 
```

显然这是行不通的，因为它在传递给lol`$v`之前就被破坏了。`c()`但我想以某种方式让`c()`修改相同的文本。就像使用参考一样。（我尝试了引用，但它们实际上增加了内存使用量，可能是因为 PHP 制作了更多副本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:36:54.243

是的，你是对的，PHP 使用写时复制的方法。您可能想尝试参考，例如：

```
function a(&$v){
    $v[1] = 'x';      
    $v = b($v);
    return $v;
} 
```

我刚刚注意到，您尝试了引用，您确定内存使用率没有降低吗？

# java - android TextWatcher中的stackoverflow

> ID：15660093
> 
> 赞同：1
> 
> 时间：2013-03-27T13:30:43.260
> 
> 标签：java, android, textwatcher

当我在 TextWatcher 中使用此代码时，`stackoverflow`出现错误：

```
 txt.setText(s.toString().substring(0, s.length()-1) + "a"); 
```

为什么会发生这种情况，我该如何预防？我使用它`onTextChanged`并且`afterTextChanged`它们都生成stackoverflow

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:38:06.607

此代码已损坏。在伪代码中，它读取

```
//whenever the text changes, replace the last letter with an 'a' 
```

设置文本是文本更改，即使新文本与旧文本匹配，因此每次将“a”替换为另一个“a”时，您都会递归直到堆栈已满。

如果有终端案例，比如

```
if (!txt.endsWith("a")) 
```

那么这不会溢出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-28T02:44:26.733

我使用的一个解决方案是暂时禁用导致递归的侦听器。

注意：RichEditText 是 EditText 的子类。例如。

```
 @Override
  public void afterTextChanged(Editable s)
  {
    ...
    RichEditText.this.removeTextChangedListener(this); //disable listener

    //Change s here. Changes made to s will not cause recursion since the listener is disabled

    RichEditText.this.addTextChangedListener(this);  //reenable listener

   ...
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:32:44.227

当然，您会收到 StackOverFlow 错误。每次发生变化时，`onTextChanged`都会调用回调。然后，在其中再次更改文本。

医生说：

> 调用此方法是为了通知您，在 s 中的某处，文本已更改。从此回调中对 s 进行进一步更改是合法的，但请注意不要让自己陷入无限循环

您需要一个条件来避免无限循环。例如：

```
if(s.charAt(s.length()-1)!='a')
  s = s.append("a"); 
```

# javascript - 更改部分 Google 地图标记的颜色

> ID：15660095
> 
> 赞同：0
> 
> 时间：2013-03-27T13:30:52.603
> 
> 标签：javascript, google-maps, google-fusion-tables

我即将开发一个谷歌地图应用程序，其中标记将从具有以下结构（简化）的表中填充：

```
marker_id (INT)
label (TEXT)
latitude (FLOAT)
longitude (FLOAT)
creation_date (DATE/TIME) 
```

信息可以存储在 Fusion 表（首选）或 MySQL 中。所有标记都将以红色显示在地图上。地图旁边将有日期选择器组件，我希望所有创建日期在所选日期的标记的颜色更改为其他颜色（例如黄色）。有什么方法可以做到这一点，而不必在客户端创建所有标记并保存对它们的引用？可能有很多标记（超过 10K，可能高达 100K），所以我不确定这在客户端的效果如何（这就是我更喜欢融合表层的原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:52:49.357

这可以通过 GMaps API 使用 FT 层来完成。有关基础知识，请参阅[API 文档](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)。

```
styles: [{
    where: "creation_date = '4/1/2013' ",
    markerOptions: {
      iconName: "small_yellow"
    }
  },
  {  // default style
    markerOptions: {
     iconName: "small_red"
  } ] 
```

有这么多标记 FT 是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:53:43.327

编辑：没有看到您想避免在客户端进行引用。AFAIK如果不创建标记就不可能在谷歌地图上显示标记......也许如果你遇到可伸缩性问题，你可以想办法一次显示更少的标记

* * *

根据需要手动设置或更改图标：

```
var redIcon = {
  url:'/icons/redIcon.png',
};

var yellowIcon = {
  url:'/icons/yellowIcon.png',
};

// Populate some data structure to associate pins with data
var dataPlusMarkers = [
{ data: 99,  pin: new google.maps.Marker(...) },
{ data: 200, pin: new google.maps.Marker(...) }
];

function setColors(){
  dataPlusMarkers.forEach(function(one){
    if(one.data > 100){ 
      one.pin.setIcon(yellowIcon);
    } else {
      one.pin.setIcon(redIcon);
    }
  });
}; 
```

# php - 保护管理员目录免受谷歌等搜索引擎的侵害

> ID：15660096
> 
> 赞同：1
> 
> 时间：2013-03-27T13:30:57.833
> 
> 标签：php

我有一个网站文件夹，例如 mywebsite，我的管理面板与 ajax、jquery 等其他目录一起位于该文件夹中，我想知道，一旦访问该目录，是否有任何方法可以从搜索引擎隐藏我的管理目录，网络服务器自动指向具有登录表单的索引页面，我通过加密保护该页面，但我想这是一个风险，请提供任何链接或任何其他有用的建议以防止出现上述情况。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:33:25.677

这里的关键词是`robots.txt`

更多信息：

*   [http://www.robotstxt.org/](http://www.robotstxt.org/)
*   [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

请记住，这只是一个**建议**；恶意机器人/爬虫/蜘蛛无论如何都可以扫描/查找/发现目录。不利的一面是：恶意 bots/crawlers/spider 将使用这个文件来快速发现哪些目录不应该被“发现”。您需要的是登录机制，而不是“隐藏”管理目录的方法。

您也可以诉诸（如[Harry Beasant 所述](https://stackoverflow.com/a/15660154/215042)）使用 .htaccess ，但这*也*只是排除了搜索引擎而不是恶意用户（特别是 Harry Beasant 的“答案”也会导致另一个*无辜*的网站获得不需要的流量![不酷](../Images/2ff58330b40fb770c6a9104cf4ff6828.png)......严重不酷）。另外：很多搜索引擎不会被重写；因此，这可能会解决您对 Google/MSN/... 的“问题”，但不能解决 Bing 或百度（搜索引擎领域的两个主要参与者）等问题。最后，Harry 遗漏（或没有特别提及）的是，您需要将此 .htaccess*放在 admin 目录中*; 如果您不小心将它放在您的网站根目录中，该网站将从这些搜索引擎中完全消失。你来之不易的名声因一个小小的错误而失传![再见](../Images/b7a22465600038089a29ea6e00117f22.png)。如果你问我，非常危险。

禁用目录列表（如[Squeezy 所述](https://stackoverflow.com/a/15660178/215042)）*始终*是一个好主意，不仅适用于管理目录。但是，同样，这并不能阻止恶意用户“发现”您的管理目录。

只是**不要[通过默默无闻来依赖安全](http://en.wikipedia.org/wiki/Security_through_obscurity)**性，并为自己建立一个体面的登录机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:33:33.233

最好使用 .htaccess 文件来保护目录；

你可以做类似的事情；

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} AltaVista [OR]
RewriteCond %{HTTP_USER_AGENT} Googlebot [OR]
RewriteCond %{HTTP_USER_AGENT} msnbot [OR]
RewriteCond %{HTTP_USER_AGENT} Slurp
RewriteRule ^.*$ "http\:\/\/htmlremix\.com" [R=301,L] 
```

这将阻止搜索引擎机器人对其进行索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:34:32.857

只要您不添加指向管理面板的链接，您就应该是安全的。确保也没有为父文件夹启用目录列表。

典型的搜索引擎不会*猜测*您的目录。实际上，放置 robots.txt 会将您的目录暴露给扫描仪（因为那里提到了它），而不是将其放在未公开的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:34:59.747

您可能需要查看 /robots.txt 文件，该文件可以配置为从搜索引擎中排除特定目录。你可能会使用类似的东西：

```
User-Agent: *
Disallow: /admin/ 
```

（假设您要排除的目录名为`admin`）。这将告诉机器人不要访问它，但是如果他们真的想这样做当然不会阻止他们这样做......（当然，“好的”搜索引擎尊重这个标准）。

# plone - Plone 4 Zope 显示特定文件夹 TALES 的内容

> ID：15660099
> 
> 赞同：1
> 
> 时间：2013-03-27T13:31:09.193
> 
> 标签：plone, template-tal, zpt

## 问题

我有一个客户希望在他们的搜索页面上显示某个文件夹（包含图像）的全部内容，如果搜索返回 0 结果。该文件夹位于 mysite.com/images

## 设置：

作为测试环境，我设置了一个具有以下结构的单独站点：

```
ROOT
|-Folder1 <-- current directory I am viewing
| |-images
|-Other folders 
```

我修改了`folder_summar_view`模板，以包含以下代码（我决定修改一个视图，看看我是否可以将它分解成碎片以使其执行我想要的操作）：

```
<div tal:define="image context/images/getFolderContents">
  <div tal:content="i" tal:repeat="i image" />
</div> 
```

## 我所看到的：

```
<Products.ZCatalog.Catalog.mybrains object at 0x9d2ddb8> 
```

## 我尝试过的事情和进一步的解释

我假设当`context/images/getFolderContents`我的图像文件夹中的“对象”返回大脑时，我可以使用`tal:repeat`下面的语句遍历每个“对象”。然后将它们显示在我的页面上。

如果我只使用以下代码：

```
<div tal:content="context/images/getFolderContents" /> 
```

我的输出与上面的“我看到的”部分非常相似：

```
<Products.ZCatalog.Catalog.mybrains object at [...]> 
```

*其中 [...] 是另一个数字*

我一直在做一些研究并阅读 Plone Theming 这本书，但我的代码类似于**第 169 页**`tal:repeat`上的示例，似乎唯一的区别是他们没有在大脑上使用它（据我所知）。

 **我试过这个，虽然它产生了相同的结果（不知道为什么我坚持它不会）：

```
<div tal:define="image python:context.images.getFolderContents()">
  <div tal:content="i" tal:repeat="i image" />
</div> 
```

我似乎无法“进入”返回的大脑。我在网上寻找的所有东西都没有太大帮助，我还浏览了`atct_album_view`模板`folder_listings`以了解是否有用。- 我认为我忽略或遗漏了一些东西。

[我偶然发现的第一个链接是 this](https://weblion.psu.edu/trac/weblion/wiki/CustomizeFolderViews)，但是从那以后我继续前进，尽管相似，但这并不是我想要做的。

他们聊天室里的 Plone 人很友好地给了我这个`context/images/getFolderContents`声明，我试图在没有再次寻求帮助的情况下继续前进，但似乎我碰壁了。

## 更多我尝试过的东西

[使用此链接作为灵感](https://weblion.psu.edu/trac/weblion/wiki/TAL)，我决定尝试以下方法：

```
<div tal:define="image context/images/getFolderContents">
  <div tal:content="image/getURL" />
</div> 
```

但是当我尝试查看模板时会引发错误。错误的意思是“getFolderContents 大脑没有属性 getURL”——虽然`image/Title`显示了文件夹的名称，但这并不是我真正需要的。

[我也找到了这个链接](http://developer.plone.org/searching_and_indexing/query.html)，但是因为我正在使用默认搜索，我真的不想编辑 python 脚本，因为我担心它可能会对正常的 Plone 站点搜索产生不利影响。[同样在这个链接中](http://developer.plone.org/content/listing.html)，他们似乎正在使用更多的 Python 脚本。- 为了扩展这一点，我不确定这些脚本如何与页面模板“链接”（它们如何知道彼此“交谈”）。

## 结论

总之，我需要显示位于我网站根目录的名为“images”的文件夹中包含的所有图像，我无法使用`getFolderContents`. 除了显示“图像”文件夹的标题或大脑识别（`<Products.ZCatalog.Catalog.mybrains object at 0x9d2ddb8>`）之外，我没有运气。欢迎任何帮助或想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:50:28.923

当 getFoldercontents 返回一个大脑列表时，我看不到你的代码是如何工作的。只需用类似的东西重复它：

```
<tal:block tal:repeat="image context/images/getFolderContents">
  <a tal:attributes="href image/getURL" tal:content="image/Title"/>
</tal:block> 
```**

# python - 难以在 Celery 中更改 Python 方法签名

> ID：15660104
> 
> 赞同：1
> 
> 时间：2013-03-27T13:31:29.130
> 
> 标签：python, celery, celery-task, celeryd

这可能是一个明显的船长风格的问题，但我觉得我错过了一些东西。

我继承了一个创建 Celery 任务的 Python WSGI 应用程序。看起来像这样：

```
#web.py

from bottle import route, run, request, response, abort
import bottle
from project.tasks import process_request

@route('/')
def web():
    url = request.query_string
    process_request.delay(
        url=url,
        path=request.path,
        query=request.query_string,
        cookies=dict(request.cookies),
        headers=dict(request.headers),
        remote_addr=request.remote_addr,
    ) 
```

该`process_request`方法如下所示：

```
#tasks.py
@celery.task
def process_request(url, path, query, cookies, headers, remote_addr):
    #does some stuff 
```

以上所有工作。我尝试向 process_request 添加时间戳，因此调用如下所示：

```
#web.py

#imports from above
from datetime import datetime

@route('/')
def web():
    url = request.query_string
    process_request.delay(
        url=url,
        path=request.path,
        query=request.query_string,
        cookies=dict(request.cookies),
        headers=dict(request.headers),
        remote_addr=request.remote_addr,
        s_time=str(datetime.now())
    ) 
```

我将`process_request`方法更改为：

```
#tasks.py
@celery.task
def process_request(url, path, query, cookies, headers, remote_addr, s_time):
    #does some stuff 
```

那没有用。未处理请求。我检查了我的 celeryd 日志文件，发现了这个：

```
[2013-03-26 16:19:03,330: ERROR/MainProcess] Task beacon.tasks.process_request[235f9fa8-1f10-4ee0-a1f9-e389021ea0ad] raised exception: TypeError('process_request() takes exactly 7 non-keyword arguments (6 given)',)
Traceback (most recent call last):
  File "/home/beacon/.virtualenvs/beacon/lib/python2.6/site-packages/celery/task/trace.py", line 228, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/beacon/.virtualenvs/beacon/lib/python2.6/site-packages/celery/task/trace.py", line 415, in __protected_call__
    return self.run(*args, **kwargs)
TypeError: process_request() takes exactly 7 non-keyword arguments (6 given) 
```

我不知道我做错了什么。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:39:38.007

这里的问题是排队的任务使用旧方法签名，即没有时间戳变量。如果没有更多信息，就很难确定您的最佳行动方案。

当前排队的任务是否至关重要？在我看来，解决这个问题最简单、最干净的方法是停止 celery，通过 Redis/RabbitMQ/ 清空队列，然后重新启动 celery。此外，这不言而喻，确保您的任务函数接受新参数作为参数；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-01T06:54:32.790

1.  添加一个新任务，例如`process_request_with_stime()`，保留旧任务`process_request()`，并替换`web()`.

2.  部署

3.  在处理完任务的所有旧排队作业后`process_request()`，删除`process_request()`任务，重命名`process_request_with_stime()`为`process_request()`

# c# - 将字典扩展到 JSON 字段

> ID：15660107
> 
> 赞同：2
> 
> 时间：2013-03-27T13:31:45.943
> 
> 标签：c#, json, servicestack

我们有这样的 DTO 类：

```
public class DTO
    {
        public int Number { get; set; }
        public string Title { get; set; }

        public Dictionary<string, string> CustomFields { get; set; }
    } 
```

我想通过 ServiceStack 将 DTO 序列化/反序列化为 JSON，其中 CustomFields 扩展为 DTO 字段。例如

```
new DTO 
{
    Number = 42
    Title = "SuperPuper"
    CustomFields = new Dictionary<string, string> {{"Description", "HelloWorld"}, {"Color", "Red"}}
} 
```

序列化为

```
{
    "Number":42,
    "Title":"SuperPuper",
    "Description":"HelloWorld",
    "Color":"Red"
} 
```

我怎样才能做到这一点？

*   在序列化过程中，所有字典字段都必须表示为 JSON 对象字段。
*   在反序列化过程中，传入的 JSON 对象的所有不是 DTO 字段的字段都必须放入 Dictionary 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:54:10.207

如果您使用 Newtonsoft 库，您可以这样做：

```
 DTO Test = new DTO
   {
       Number = 42,
       Title = "SuperPuper",
       CustomFields = new Dictionary<string, string> { { "Description", "HelloWorld" }, { "Color", "Red" } }
   };

    String Json = Newtonsoft.Json.JsonConvert.SerializeObject(Test);

    Json = Json.Replace("\"CustomFields\":{", "");
    Json = Json.Replace("}}", "}"); 
```

生成的 json 字符串如下所示：

```
{"Number":42,"Title":"SuperPuper","Description":"HelloWorld","Color":"Red"} 
```

[编辑]

我不会做你所有的工作......这应该让你开始：

```
// to reconstruct the object
Newtonsoft.Json.Linq.JObject MyObject = Newtonsoft.Json.JsonConvert.DeserializeObject(Json) as Newtonsoft.Json.Linq.JObject;

// Create a new object here.

foreach( var Token in MyObject)
{         
    // sample  
    if (Token.Key == "Number")
    {
        // populate the fields of the new object with Token.Value
    }      
} 
```

# c# - HTTPWebRequest 和 HTTPWebResponse 的用途

> ID：15660109
> 
> 赞同：0
> 
> 时间：2013-03-27T13:31:50.277
> 
> 标签：c#, asp.net

我正在研究 ASP .NET 中的 Web 编程，并遇到了这两个类。我想知道这些可以用来做什么？

我的第一个想法是，如果您在客户端和服务器之间设置代理，可以使用它们，但我不确定这是否是主要目的。

谢谢

编辑：类不是方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:36:27.117

它们确实可以用于此。然而，这并不特定于 ASP.NET。

您可以通过执行以下操作创建一个 HttpWebRequest 对象：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://url.com"); 
```

然后调用它来检索 HttpWebResponse：

```
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

您可以在此处进行很多自定义，但希望这将为您从网络上读取数据提供一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:39:06.960

它们用于使用 HTTP 协议与另一个进程进行通信。

在 ASP.NET 的上下文中，您的进程可以使用它们与另一个服务通信。也许您的数据库使用 HTTP 协议，例如 CouchDB。也许您有一个 ASP.NET 应用程序需要与之通信的休息服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:37:24.427

正如它们的名字所暗示的那样，这些是创建请求 ( `HttpWebRequest`) 或创建响应 ( `HttpWebResponse`) 的类。
使用`HttpWebRequest`您使用 HTTP 协议定义对 URI 的请求。而`HttpWebResponse`该类为您提供 HTTP 服务器的答案，该服务器提供所有信息，如 HTTP 标头和请求的实际正文。

这是来自 MSDN 的示例

```
HttpWebRequest HttpWReq = 
(HttpWebRequest)WebRequest.Create("http://www.contoso.com");

HttpWebResponse HttpWResp = (HttpWebResponse)HttpWReq.GetResponse();
// Insert code that uses the response object.
HttpWResp.Close(); 
```

考虑来自基类的强制转换`WebRequest`。

见[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)和[`HttpWebResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)。

# javascript - 使用 javascript 在 span 元素上获取自定义字段值

> ID：15660110
> 
> 赞同：1
> 
> 时间：2013-03-27T13:31:51.413
> 
> 标签：javascript, dom

如果我有这样的事情：

```
<span stylecode="123456789" class="punctis-social-widget"></span> 
```

如何使用 javascript（不是 jquery）获取样式代码值。此外，在跨度上使用自定义字段是否有效？

注意：字段样式代码有时不存在，因此函数的结果可能为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:34:50.530

使用自定义属性是无效的。如果您需要存储任何值，请考虑使用 HTML5`data`属性。

```
<span id="item1" data-stylecode="123456789" class="punctis-social-widget"></span> 
```

然后使用 JS 来获取：

```
<script>
    var element = document.getElementById('item1');  // You could use class
    var sDataValue = element.getAttribute('data-stylecode');  //123456789
</script> 
```

对于 jQuery 获取值：

```
$('item1').data('stylecode');  //123456789 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:35:21.507

如果您可以选择 span 元素，您可以简单地执行以下操作：

```
spanElem.getAttribute('stylecode'); 
```

如果该属性不存在，`getAttribute()`将简单地返回`null`或 a `''`（似乎因浏览器而异）。

如果它有一个 id，选择它会更容易，在这种情况下你可以使用，`document.getElementById('id');`否则你可以`document.getElementsByClassName('punctis-social-widget')`在较新的符合标准的浏览器中使用，或者使用`document.getElementsByTagName('span');`并循环它们并检查它们的 className 属性。

正如 Matthew 所提到的，自定义属性无效（但通常不会导致任何问题 afaik），但如果您使用 HTML 5，将其转换为数据属性将使其有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:36:35.060

虽然使用这样的自定义属性不是一个好习惯，但您可以这样完成此任务：

```
var apan = document.getElementsByTagName('span');
var code = span[0].getAttribute('stylecode');
console.log(code); 
```

使用`data`属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T13:36:46.447

我知道如何捕捉属性的值：

```
var span = document.getElementsByTagName("span");
var stylecode = span.getAttribute("stylecode"); 
```

但我不知道你问题的第二部分。对不起。

# c# - 插入到 SQL Server CE 数据库

> ID：15660112
> 
> 赞同：-2
> 
> 时间：2013-03-27T13:31:53.833
> 
> 标签：c#, insert, sql-server-ce

如何插入`.sdf`数据库中的表？

我尝试了以下方法：

```
string connection = @"Data Source=|DataDirectory|\InvoiceDatabase.sdf";
SqlCeConnection cn = new SqlCeConnection(connection);

try
{
   cn.Open();
}
catch (SqlCeException ex)
{
    MessageBox.Show("Connection failed");
    MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
    Application.ExitThread();
}

string clientName = txt_ClientName.Text;
string address = txt_ClientAddress.Text;
string postcode = txt_postcode.Text;
string telNo = txt_TelNo.Text;

string sqlquery = ("INSERT INTO Client (Name,Address,Postcode,Telephone_Number)Values(" + clientName + "','" + address + "','" + postcode + "','" + telNo + ")");
SqlCeCommand cmd = new SqlCeCommand(sqlquery, cn);

try {
  int affectedRows = cmd.ExecuteNonQuery();

  if (affectedRows > 0)
  {
     txt_ClientAddress.Text = "";
     txt_ClientName.Text = "";
     txt_postcode.Text = "";
     txt_TelNo.Text = "";
     MessageBox.Show("Client: " + clientName + " added to database. WOoo");
  }
}
catch(Exception){
    MessageBox.Show("Insert Failed.");
} 
```

但我做什么似乎并不重要，它只是显示“插入失败”。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:33:49.703

您忘记了第一个值的左引号。

```
Values(" + clientName + "','" 
```

改成：

```
Values('" + clientName + "','" 
```

但这通常是构建查询的不好方法。请改用参数化查询。
请参阅：http: [//msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcecommand.parameters (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlcecommand.parameters(v=vs.80).aspx)

```
catch(Exception ex)
{
   MessageBox.Show(ex);
} 
```

将为您提供有关错误的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:42:13.007

这是同一个古老的故事。当您构建连接字符串的 sql 命令时，这些类型的错误比比皆是。简单的语法问题还不是最糟糕的。[Sql 注入](https://stackoverflow.com/questions/332365/how-does-this-sql-injection-work)是最危险的一种。

请以这种方式构建您的查询

```
string sqlquery = ("INSERT INTO Client (Name,Address,Postcode,Telephone_Number)" + 
                   "Values(@client,@address, @postcode, @tel)";
SqlCeCommand cmd = new SqlCeCommand(sqlquery, cn);
cmd.Parameters.AddWithValue("@client", clientName);
cmd.Parameters.AddWithValue("@address", address);
cmd.Parameters.AddWithValue("@postcode", postcode);
cmd.Parameters.AddWithValue("@tel", telNo);
cmd.ExecuteNonQuery(); 
```

正如其他人已经说过的那样，您的语法错误是由于省略了初始单引号引起的。但是你可能有其他错误。例如，一个名为`O'Hara`?的客户呢？现在您在客户端名称中有一个单引号，这会严重破坏您的字符串连接。取而代之的是一个参数将被准确解析，并且找到的每个有问题的字符都将得到适当的处理（在这种情况下加倍单引号）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:35:53.370

您的 SQL 语句不正确。

```
string sqlquery = ("INSERT INTO Client (Name,Address,Postcode,Telephone_Number)Values('" + clientName + "','" + address + "','" + postcode + "','" + telNo + "')"); 
```

拿着这个。您忘记了值开头和结尾的 '

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-27T05:02:49.953

要将数据插入 Sql 中，应考虑数据类型。如果你插入一个字符串值（varchar）你必须用单引号括起来，比如'"+full_Name+"'，但是整数类型不需要这个。例子

```
string myQuery = "INSERT INTO Persons (phone, fullname) VALUES ("+telNo+",'"+full_Name+"')"; 
```

其中全名是字符串变量，电话号码只是数字。

# ios - 使用 Storyboard 本地化 UIViewController

> ID：15660116
> 
> 赞同：1
> 
> 时间：2013-03-27T13:31:59.713
> 
> 标签：ios, xcode, ios6, xcode4.6

我有预先存在的带有本地化的 UIViewController。我在默认的 English Local 中添加了新的 UIViewController，我期待它会在其他 Storyboard 本地中为我创建相同的表单。但那并没有发生。

所以现在，我只有英文故事板中的这个新 UIViewController。

有没有办法将这个新的 UIViewController 复制到本地的另一个 Storyboard，或者指示 Xcode 在另一个本地创建这个 UIViewController？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:34:42.627

在您的项目属性中，如果您使用该`Localizations`部分，您可以在那里添加本地化语言和本地化语言的相关资源。它会要求您为本地化语言生成特定文件/资源​​，资源可以是您的控制器、plist 文件、可本地化文件等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:48:25.523

I've faced the same problem, so I just selected new UIViewController (whole VC scene) in "English" storyboard and copy-pasted it to another locale's storyboard. Then I made my "locale dependent" changes.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T14:00:39.887

如果您只有一个新的视图控制器，您可以复制/粘贴，但如果您有很多新的更改，请查看[此视频](http://www.youtube.com/watch?v=cF1Rf02QvZQ)并阅读说明，该人创建了一个 Python 脚本，可根据您选择的基本情节提要更改其他情节提要，向其他本地化故事板添加新项目。我前段时间尝试过并且工作过。

# mysql - php调用时mysql默认字符集不同

> ID：15660120
> 
> 赞同：3
> 
> 时间：2013-03-27T13:32:16.607
> 
> 标签：mysql, set, character

和其他许多人一样，我在使用 mysql 字符集时遇到了一些问题。和其他许多人一样，我希望一切都是 UTF-8，但是 mysql 是用 latin-1 安装的，无论我如何尝试/google/experiment mysql 配置，客户端设置中仍然潜伏着 latin-1。

好的，这是设置。我有一个（非root）mysql用户'usr'，密码为'pwd'。每当我通过终端 (mysql -uusr -p) 访问 mysql，然后很好地询问他的字符集时，他说他爱上了 utf8（他应该爱）：

```
mysql> SHOW VARIABLES LIKE 'character%';
+--------------------------+----------------------------+
| Variable_name | Value |
+--------------------------+----------------------------+
| character_set_client | utf8 |
| character_set_connection | utf8 |
| character_set_database | utf8 |
| character_set_filesystem | binary |
| character_set_results | utf8 |
| character_set_server | utf8 |
| character_set_system | utf8 |
| character_sets_dir | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)

mysql> SHOW VARIABLES LIKE 'collation%';
+----------------------+-----------------+
| Variable_name | Value |
+----------------------+-----------------+
| collation_connection | utf8_general_ci |
| collation_database | utf8_unicode_ci |
| collation_server | utf8_unicode_ci |
+----------------------+-----------------+
3 rows in set (0.00 sec) 
```

但是，如果我使用 PHP 访问 mysql（通过同一个用户）：

```
$mysql_link=mysql_connect('localhost','usr','pwd');
$result1=mysql_query("show variables like 'character%'");
$result2=mysql_query("show variables like 'collation%'");
mysql_close($mysql_link) 
```

而 print_r $result1, $result 2，它神奇地回落到 latin-1：

```
character_set_client => latin1
character_set_connection => utf8
character_set_database => utf8
character_set_filesystem => binary
character_set_results => latin1
character_set_server => utf8
character_set_system => utf8
character_sets_dir => /usr/share/mysql/charsets/

collation_connection => utf8_unicode_ci
collation_database => utf8_general_ci
collation_server => utf8_unicode_ci 
```

无论我是通过浏览器（如 php-cgi）还是通过终端（如 php-cli）调用 php，都会发生这种情况。

对此的解决方法是在每个连接处手动设置字符集：

```
mysql_set_charset('utf8',$mysql_link); 
```

这样可行。但我觉得应该有一种方法可以通过 mysql 配置来做到这一点。

作为参考，Mysql config (my.cfg) 包括：

```
[client]
default_character_set = utf8

[mysqld]
init_connect='SET collation_connection = utf8_unicode_ci'
character-set-server = utf8
collation-server = utf8_unicode_ci 
```

PHP配置（php.ini）包括

```
 default_charset = "utf-8" 
```

谢谢转发！=)

PS 我知道 mysql_ 函数已被弃用，应该用 mysqli_ 替换。但希望这与这个确切的问题没有任何关系=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T05:28:37.717

如果您和大多数人一样，您可以使用 root 帐户访问 MySQL。[文档](http://dev.mysql.com/doc/refman/5.5/en/charset-applications.html)中的这个小片段可能是您的确凿证据。

> 如前所述，应用程序在连接后仍需要使用 SET NAMES 或等效项来配置其连接。您可能很想用 --init_connect="SET NAMES 'utf8'" 选项启动服务器，以使每个连接的客户端自动执行 SET NAMES。但是，这将产生不一致的结果，因为具有 SUPER 权限的用户不会执行 init_connect 值。

# cakephp - cakePHP 重定向方法双参数

> ID：15660131
> 
> 赞同：1
> 
> 时间：2013-03-27T13:32:36.313
> 
> 标签：cakephp

我正在调用重定向方法：

```
$encryptedEmail = "123";
$this->redirect(array("controller" => "claim", "action" => "index", $encryptedEmail)); 
```

我重定向到的操作具有以下路由设置：

```
Router::connect('/claim/index/**', array('controller' => 'claim', 'action' => 'index')); 
```

重定向将我发送到以下网址

> /索赔/索引/123123

出于某种原因，我想传递给动作的数据加倍：/

我正在按照文档中的说明进行重定向，不确定为什么要这样做。

谢谢

# java - 什么是 .lck 文件，为什么我不能用缓冲阅读器阅读它？

> ID：15660132
> 
> 赞同：0
> 
> 时间：2013-03-27T13:32:39.010
> 
> 标签：java, parsing, file-io, web-crawler, crawler4j

我正在尝试使用 crawler4j 来抓取网站。我能够按照 crawler4j 网站上的说明进行操作。完成后，它会创建一个包含两个不同 .lck 文件的文件夹，一个 .jdb 文件和一个 .info.0 文件。

我尝试使用我在[此](https://stackoverflow.com/a/15549773/667440)答案中提供的代码读取文件以读取文件，但它一直失败。我以前使用过相同的函数来读取文本文件，所以我知道代码有效。

几个月前，我还[发现](https://stackoverflow.com/questions/12547999/accessing-lck-and-jdb-files-stored-via-web-crawler)有人问过同样的问题。他们从来没有得到答案。

为什么我不能使用我的代码打开这些 .lck 文件并将其读取到内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:17:41.400

Crawler4j 使用[BerkeleyDB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)来存储爬取信息。请参阅此处的源代码。

从命令行，您可以使用 DB utils 来访问数据。[已经在这里](https://stackoverflow.com/questions/37644/examining-berkeley-db-files-from-the-cli)涵盖了。

如果您想访问 Java 代码中的数据，您只需导入 BerkeleyDB 库（那里的 Maven 指令）并按照[如何打开 DB 的教程进行操作](http://docs.oracle.com/cd/E17277_02/html/collections/tutorial/opendatabases.html)。

# paypal - PayPal部分并行支付：三笔支付OK，一笔报错“买家未完成付款退货。(13114)”

> ID：15660146
> 
> 赞同：1
> 
> 时间：2013-03-27T13:33:17.953
> 
> 标签：paypal

基本上，这种情况怎么可能？

单笔交易的一笔（四笔）付款失败，`returned without completing`尽管同一笔交易的其他三笔付款都正常完成。整体交易状态为`PaymentActionCompleted`。

用户如何只支付一次“未完成退货”？我想这一定是一些时间问题？我知道并行支付不会进行交易，但我的印象是，至少承诺（点击“立即付款”）将是原子的，而且——例如——在提交后立即点击取消几乎没有什么作用。

重复错误信息（针对单次失败的付款）：`The Buyer returned without completing the payment. (13114)`。

我已经看到很多其他错误消息的“部分成功”，但这是第一个没有多大意义的消息。

# sql - 在 Oracle 中使用 set 命令更新视图

> ID：15660151
> 
> 赞同：0
> 
> 时间：2013-03-27T13:33:28.683
> 
> 标签：sql, database, oracle, views

我正在尝试自学 SQL 并陷入困境。

我正在使用 Oracle 提供的标准演示表（[参见此处](http://www.in-oracle.com/pictures/Database/backup-recovery/P_data_back.PNG)）。

假设我创建了两个相同的视图：

```
create view view_a_emp as
select empno, ename, job
from emp
where job = 'CLERK'; 
```

和

```
create view view_b_emp as
select empno, ename, job
from emp
where job = 'CLERK'; 
```

我将为每个返回 4 行。

如果我更新 view_b_emp，像这样：

```
update view_b_emp
set job = 'ASSISTANT'; 
```

现在两个视图都没有返回任何行，并且基础基表已被修改（所有“文员”现在都是“助理”）。

很明显，我误解了视图的工作原理，但我认为视图的想法是提供一个虚拟表。

谁能解释为什么在一个视图上更新和设置属性会改变基础表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:37:29.990

这就是它的工作原理！视图只不过是一个存储的查询。

如果您希望防止对视图的更新与视图的定义发生冲突，您可以添加`with check option`到视图中。

请参阅[http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_8004.htm#SQLRF54792](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_8004.htm#SQLRF54792)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:37:45.763

因为它链接到基础表，所以修改表视图将修改其基础表。 [http://www.informit.com/articles/article.aspx?p=130855&seqNum=4](http://www.informit.com/articles/article.aspx?p=130855&seqNum=4)

# android - 初始视图之外的 ListView 项目不可点击

> ID：15660152
> 
> 赞同：0
> 
> 时间：2013-03-27T13:33:29.200
> 
> 标签：android, listview, scroll, nullpointerexception, android-arrayadapter

我有四个 ListView，我同步它们的滚动，以便在它们中的任何一个滚动时同时滚动。第一个 ListView 由一个自定义适配器填充，仅包含一个 TextView，其余三个由另一个自定义适配器填充，并包含一个 RatingBar。两个适配器都扩展了 ArrayAdapter。

这是问题所在：

每当我滚动其中一个时，虽然滚动过程是平滑且同步的，但初始视图之外的项目行为不正常。我无法点击它们。我得到一个空指针异常。他们获取位于初始视图中的数据。 ![问题说明](../Images/2ad004b2ecd496eacfffb69cd057af13.png)

*   绿色 获取相同的数据
*   红色不是交互式的

我相信它与滚动时的 getView() 有关。字段未正确填充。滚动 ListView 时不应该调用 getView() 吗？

# java - 为什么搜索引擎不能直接索引 Ajax 网站？

> ID：15660159
> 
> 赞同：0
> 
> 时间：2013-03-27T13:33:47.483
> 
> 标签：java, ajax, gwt, search, search-engine

作为一名（GWT 开发人员），我理解 Ajax 站点动态呈现页面，例如，我制作的站点是单页并包含用于呈现“主页”、“关于我们”、“产品”等“页面”的选项卡。

然而，这些页面通常包含一个哈希（`#`），如果我访问说，`http://example.com#HomePage`或者`#Products`它将“最终”呈现页面和内容......

现在，如果我将我的产品页面站点放在可抓取的静态博客站点上，例如：`http://example.com#Products`如果我点击这个站点，那么我的站点将在一些 ajax 调用后最终呈现产品。

但是，如果我从浏览器检查站点的“页面源”，页面仍然是相同的 html“ajax 内容为空”；这是无法索引ajax网站的原因吗？搜索引擎不会将它们抓取的 URL 放在 HTML 单元中，以便它们可以呈现页面而不仅仅是获取静态页面？

无论如何，我看到了解决这个问题的实现，使用外部“爬虫”服务作为 ajax 站点的一部分，但是没有不需要设置这样的外部服务/服务器的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:57:05.247

> 但是，如果我从浏览器检查站点的“页面源”，页面仍然是相同的 html“ajax 内容为空”；这是无法索引ajax网站的原因吗？搜索引擎不会将它们抓取的 URL 放在 HTML 单元中，以便它们可以呈现页面而不仅仅是获取静态页面？

是的，依赖 Ajax 来获取内容的网站依赖于 JavaScript 来获取内容，而搜索引擎索引机器人（通常）不执行 JavaScript，因为：

*   这样做需要更多的 CPU/RAM
*   很难确定哪些交互会引入新内容，哪些交互会做其他事情

> 无论如何，我看到了解决这个问题的实现，使用外部“爬虫”服务作为 ajax 站点的一部分，但是没有不需要设置这样的外部服务/服务器的解决方案吗？

首先不要依赖 JavaScript。建立一个使用常规链接的网站。如果您愿意，可以在顶部放置 JavaScript。拉入新内容时，使用[`pushState`和朋友用真实 URL 更新地址栏。](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)

简而言之，遵循[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript原则](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:50:33.710

您应该知道的第一件事是爬虫不会在页面上执行 javascript，但是有一种方法可以使页面可爬取（向爬虫显示您的应用程序使用 AJAX）。

示例（谷歌爬虫）：

您应该首先通过向应用程序 AJAX 链接添加特殊标记来向爬虫表明您的站点支持 AJAX 爬虫方案。之后，爬虫将转换该 URL，并使用转换后的 URL 调用您的服务器。服务器应返回 HTML 快照（生成的 HTML），它表示用户在浏览器中使用 AJAX 加载页面时创建的 HTML 内容。最后，您可以使用[Fetch 作为 Google 工具](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=158587)来测试 Google 爬虫在调用您的 AJAX 链接时会收到什么。深入的解释可以在[这里](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)找到。

我不使用 GWT，但也许你可以[在这里找到](http://code.google.com/p/gwt-platform/wiki/CrawlerSupport)一些具体的解决方案。

# security - 为什么不建议在 MongoDB 中使用服务器端存储函数？

> ID：15660161
> 
> 赞同：18
> 
> 时间：2013-03-27T13:33:59.413
> 
> 标签：security, mongodb, stored-functions

根据 MongoDB[文档](http://docs.mongodb.org/manual/applications/server-side-javascript/#storing-functions-server-side "服务器端 Javascript")，不建议使用服务器端存储函数。这个警告背后的原因是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T13:40:16.810

尽管 Google 搜索结果中只填满了告诉您如何操作的人，但我确信我已经多次说明了该列表：

*   这是`eval`
*   `eval`具有易于注入的自然能力，它就像 SQL 的非 PDO 等价物，如果你不围绕它构建一个完整的转义库，它会搞砸你。通过使用这些函数，您可以有效地将更安全的本地语言 MongoDB 替换为与任何旧 SQL 一样不安全的东西。
*   它需要一个全局锁，可以带写锁，直到操作完成后才会释放，不像其他操作在某些情况下会释放。
*   `eval`仅适用于Primaries，而不适用于副本集的任何其他成员
*   它基本上是在一个捆绑的 V8/spidermonkey 环境中运行的、未经检查的大量 JS，它与 MongoDB 一起提供，完全能够触及数据库的任何部分和管理命令，这听起来安全吗？
*   它不是 MongoDB，也不是“MongoDBs SQL”，它在内置的 JS 环境中运行，而不是 MongoDBs C++ 代码本身（与聚合框架不同）。
*   由于前一点，与许多其他选项相比，它非常慢，这也适用于`$where`使用。

这应该足以让你在这方面开始。

# php - 超级对象codeigniter

> ID：15660165
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:34:05.753
> 
> 标签：php, codeigniter

我在应用程序/库中创建了一个名为**Myclass的自定义类。**

现在按照手册，如果我想使用本机资源，我必须使用超级对象。

但是，如果我只是**像下面的代码一样扩展 Myclass**，我可以在不使用超级对象的情况下加载视图、模型等

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Myclass extends CI_Controller{

    public function my_func()
    {
        $this->load->view('home');
    }

} 
```

**那么为什么我应该使用超级对象呢？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:53:45.540

如果您扩展基本控制器，则应将其保存在`application/core`

从手册[扩展核心类](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

> 例如，要扩展本机 Input 类，您将创建一个名为 application/core/MY_Input.php 的文件

我在这里假设你想从而`Myclass`不是扩展你的控制器`CI_Controller`。

# testing - 验收测试驱动开发具有多个客户的服务

> ID：15660174
> 
> 赞同：0
> 
> 时间：2013-03-27T13:34:23.503
> 
> 标签：testing, tdd, bdd, acceptance-testing, atdd

我有一个与验收测试驱动开发 (ATDD) 相关的问题。我的应用程序是作为 REST 服务开发的，它可能有多个客户端 - 网站、移动设备、桌面。ATDD 概念说我应该从端到端测试开始每个功能。由于我的服务可能有多个提供相同用例的客户端应用程序（端），所以在编写验收测试时应该使用什么方法？验收测试是否应该将对 REST 服务或客户端应用程序的直接请求作为输入？或两者？我知道如果我的验收测试从 REST 请求开始，我会省略客户端部分，这绝对不行。如果这些从客户端开始，我将为每个客户端重复基本相同的功能测试。我需要找到一种位于这些边缘中间某处的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:47:37.210

正如@bcarlso 建议的那样，您可以根据业务规则编写验收测试，因此它们并不特定于某个特定平台。

使用这些规范在每个平台上端到端地测试每个场景当然是可能的，许多组织都这样做。但是您可能会以一个非常大、速度慢的测试套件结束，这将难以维护。

Cucumber 和类似工具 ATDD 不要求您进行端到端测试。您可以使用它们来验证某些事物中的行为，就像一个类中的单个方法一样。

集中精力编写好的单元测试，以便在集成之前捕获绝大多数缺陷。不要依赖自动化验收测试来作为糟糕开发过程的 QA。使用少量高级端到端测试来测试通过应用程序的主要成功路径。

这里有一个权衡：一些与集成相关的问题可能会漏网。执行根本原因分析，并尝试确定将来如何避免类似的缺陷。在适当的级别添加额外的测试。只是不要让您的项目淹没在自己的测试套件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:17:53.917

在练习 ATDD 时，我认为验收测试只是另一个用户界面。话虽如此，我将在业务层的 UI 下方进行测试。假设我有一个功能：

```
Given I have an addend of 5
and an augend of 3
When I calculate the sum
Then I should receive 8 
```

在实施此测试时，我的接缝将位于业务层。假设一个 Java/Spring 类型的应用程序我的测试看起来像：

```
@Given("I have an addend of (\\d+)")
public void addend(int addend) { this.addend = addend; }

@Given("I have an augend of (\\d+)")
public void augend(int augend) { this.augend = augend; }

@When("I calculate the sum")
public void calculate() {
    calculator = applicationContext.getBean(ScientificCalculator.class);
    actualResult = calculator.sum(addend, augend);
}

@Then("I should receive (\\d+)")
public void verifyResult(int result) { assertEquals(result, this.actualResult); } 
```

一旦我开发了背后的业务逻辑`ScientificCalculator`并且所有的测试场景都通过了，我就知道从功能的角度来看，应用程序做了它需要做的事情。因为这完全绕过了 UI，所以不需要为每个 UI 重复测试。UI 现在完全没有业务规则（一件好事），您可以将 XML、JSON、HTML 以及您想要的任何 UI 放在前面。假设我们使用 Spring MVC，控制器将像这样简单：

```
@GET("calculate/sum/{addend}/{augend}")
public void addSomeNumbers(String addend, String augend) {
    result = calculator.sum(Integer.parseInt(addend), Integer.parseInt(augend));
    // Render the view with the result.
} 
```

我会测试 UI 吗？大概。但几乎没有那么彻底，因为现有测试涵盖了主要的业务规则，而且一般来说，UI 错误的风险要低一些，并且比被误解或错误实现的业务逻辑更容易修复。

希望有帮助！

布兰登

# validation - 以编程方式创建的表单和验证，未处理的面孔消息

> ID：15660175
> 
> 赞同：0
> 
> 时间：2013-03-27T13:34:26.583
> 
> 标签：validation, jsf, richfaces

我使用 Apache MyFaces 库创建了一个表单。表单通过绑定与 jsf 页面相关联。此外，我构建了一个实现 Validator 接口的 TestValidator 类。我的表单显示出来了，我输入了我的输入，验证成功触发。不幸的是，我无法显示相应的 FacesMessage。我想我无法告诉 JSF '请在抛出验证器异常后重新渲染 h:messages'。

什么地方出了错？提前致谢。

```
@FacesValidator("TestValidator") // class TestValidator
public class TestValidator implements Validator {
    @Override
    public void validate(FacesContext context, UIComponent uiComponent, Object value) throws ValidatorException {
        System.out.println("TestValidator.validate: " + value);
        if (((String) value).equals("2")){
            FacesMessage fm = new FacesMessage();
            fm.setSeverity(FacesMessage.SEVERITY_ERROR);
            fm.setSummary("TestValidator FEHLER");
            fm.setDetail("TestValidator FEHLER");
            throw new ValidatorException(fm); 
        }
    }
}

<!-- JSF-Snippet -->
<t:div id="formContainer" binding="#{formsbuilder.form}" />

private Div createFacesMessagesDiv() { // FormsBuilder-Bean-Snippet for creating the container for the FacesMessage
    facesMessagesDiv = new Div(); // CORRESPONDING BEAN PROPERTY
    facesMessagesDiv.setId("facesMessagesContainer");
    facesMessagesDiv.setStyle("color: blue; border: 3px solid green;");
    HtmlOutputText introText = new HtmlOutputText();
    introText.setId("facesMessagesIntroText");
    introText.setValue("FacesMessages - Start: ");
    facesMessagesDiv.getChildren().add(introText);
    HtmlMessages fms = new HtmlMessages();
    fms.setId("facesMessages");
    facesMessagesDiv.getChildren().add(fms);
    HtmlOutputText outroText = new HtmlOutputText();
    outroText.setId("facesMessagesOutroText");
    outroText.setValue("FacesMessages - Ende!");
    facesMessagesDiv.getChildren().add(outroText);
    return facesMessagesDiv;
}

private HtmlAjaxCommandLink createSaveFormButton() { // saveButton after hitting this button, facesMessages should show up;
    HtmlAjaxCommandLink saveFormButton = HtmlRendering.createGeneralButton("saveForm" + currentSubForm.getIdAsString(), /* ID */
    "#{resources.labels['formsgenerator_saveForm']}",
    "#{formsbuilder.submitForm}",
    null, /* action */
    null, /* actionReturnType */
    null, /* onComplete */
    "", /* styleClassValueExpression */
    "", /* imageValue */
    "modifiedContainerDiv");
    saveFormButton.setReRender(facesMessagesDiv); // CORRESPONDING BEAN PROPERTY
saveFormButton.setValueExpression("oncomplete", HtmlRendering.createValueExpression("afterGeneralSavingSubForm()");
return saveFormButton;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:38:14.913

您似乎没有正确设置消息。

您忘记将 FacesMessage 添加到 FacesContext。

尝试这个：

```
public void validate(FacesContext context, UIComponent uiComponent, Object value) throws ValidatorException {
    System.out.println("TestValidator.validate: " + value);
    if (((String) value).equals("2")){
        FacesMessage fm = new FacesMessage();
        fm.setSeverity(FacesMessage.SEVERITY_ERROR);
        fm.setSummary("TestValidator FEHLER");
        fm.setDetail("TestValidator FEHLER");
        FacesContext.getCurrentInstance().addMessage(null, fm);
        throw new ValidatorException(fm); 
    }
} 
```

这是编写 FacesMessage 的更简洁的方法：

```
public void validate(FacesContext context, UIComponent uiComponent, Object value) throws ValidatorException {
    System.out.println("TestValidator.validate: " + value);
    if (((String) value).equals("2")){
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "TestValidator FEHLER", "TestValidator FEHLER"));
        throw new ValidatorException(fm); 
    }
} 
```

# uicollectionview - UICollectionView UIMenuController 获取单元格

> ID：15660179
> 
> 赞同：1
> 
> 时间：2013-03-27T13:34:38.907
> 
> 标签：uicollectionview, uicollectionviewcell, uimenucontroller, uimenuitem

我成功地将自定义 UIMenuItems 添加到 UICollectionViewCell 的上下文菜单中。

使用内置操作（剪切/复制/粘贴）时，`-collectionView:performAction:forItemAtIndexPath:withSender`会调用委托方法。

但如果调用自定义操作，它永远不会被调用。从 UIMenuItem 获取相应的 UICollectionViewCell 是否有任何简单的可能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T05:59:35.913

这是一个例子，看看这个[http://paulsolt.com/2012/11/uicollectionview-custom-actions-and-uimenucontroller/](http://paulsolt.com/2012/11/uicollectionview-custom-actions-and-uimenucontroller/)

# c# - Awesomium - 返回对象名称

> ID：15660185
> 
> 赞同：1
> 
> 时间：2013-03-27T13:34:44.040
> 
> 标签：c#, javascript, wpf, awesomium

**Javascript / HTML**

```
<script type="text/javascript">
function configurator(clicked) 
{ 
       myGlobalObject.onLinkClicked(clicked.name);
} 
</script>

<a name="link1" href="#" onclick="configurator(this)">Link 1</a>
<a name="link2" href="#" onclick="configurator(this)">Link 2</a> 
```

我正在使用 Awesomium 的 JSObject.bind 方法从 C# 调用 Javascript 方法。但是我不知道点击链接时如何返回链接名称（<a name=' *return this to* C#'>）。有人可以帮助我吗？

**C＃**

```
using (JSObject myGlobalObject = webControl1.CreateGlobalJavascriptObject("myGlobalObject"))
{
   myGlobalObject.Bind("onLinkClicked", true, (sen, eve) =>
   {
       //Don't know what code to write here....
   });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:41:21.320

这应该可以解决问题

```
clicked.getAttribute("name") 
```

# r - for循环中的迭代

> ID：15660191
> 
> 赞同：0
> 
> 时间：2013-03-27T13:35:07.847
> 
> 标签：r, for-loop, iteration

这是我当前的代码

```
dat= data.frame(a=1:10,b=1:10,c=1:10,d=1:10,e=1:10)
for (i in 1:ncol(dat)) {
    print(interaction(##...what to write here?*...##))} 
```

我的 for 循环应该做以下事情

第一次迭代：

```
 interaction(dat[,1],dat[,2]) 
```

第二次迭代：

```
interaction(dat[,1],dat[,2],dat[,3]) 
```

第三次迭代

```
interaction(dat[,1],dat[,2],dat[,3],dat[,4]) 
```

ETC...

我真的不介意这个功能是`interaction`还是`sum`什么。这是第一个循环的简单原理。我在使用 aov( `what to write here?`) 时遇到了同样的问题，但我发现了对象的公式类型，它允许我根据 i( = 迭代对象) 编写公式。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:14:46.077

如果我正确理解您的问题，这将使您开始......在`for loop`：

```
for (i in 2:ncol(dat)) {
  interaction(dat[,1:i])
} 
```

您也可以使用以下`apply`系列之一：

```
lapply(2:ncol(dat), 
       function(x) interaction(dat[,1:x])) 
```

但实际上，最好的答案取决于您计划如何使用这些未来。

# android - 在android上获取蓝牙网络共享设备的IP地址

> ID：15660192
> 
> 赞同：3
> 
> 时间：2013-03-27T13:35:08.387
> 
> 标签：android, bluetooth, ip, gateway

我有一个特定的问题：我有一个 Android 1.6 设备，它使用蓝牙连接到智能手机 (android) 并使用网络共享来访问互联网......除了该连接之外，蓝牙本身不能用于其他任何事情。它也没有wifi。

现在，我正在尝试为该设备制作一个应用程序，该应用程序将连接到智能手机上的“服务器”应用程序！最简单的方法是什么？我有一个模拟应用程序正在运行，但我必须手动输入“服务器”的 IP（如果智能手机在 wifi 上）。如果它使用蓝牙网络共享，我可以以某种方式以编程方式获取网络共享智能手机的 IP 或其他东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T18:27:56.307

您可以在智能手机上运行终端模拟器并尝试运行以下命令：

*   getprop net.dns1
*   ip地址显示
*   ip路由显示
*   网络配置文件

也许您可以在您的应用程序中运行这些命令？否则，您必须通读 Android API 手册，该手册可在[此处找到。](http://developer.android.com/about/versions/android-1.6.html)

更新：从 Android Nougat 7.x 开始，ifconfig 存在，而 netcfg 消失了。

[这个问题](https://stackoverflow.com/questions/6289714/ip-address-of-pc-in-usb-tethering-mode-in-android-without-wifi-programatically?rq=1)，似乎也相关并且可能有用。

# c# - 实体框架：使用包含添加项目

> ID：15660194
> 
> 赞同：0
> 
> 时间：2013-03-27T13:35:19.700
> 
> 标签：c#, linq, entity-framework

我有两张桌子：

`User(id,name,birthday)`

和

`Teacher(id,id_user,post,specialization)`

`(Teacher : User)`

如何使用 Include 添加教师？

像这样的东西：`_db.Users.Include("Teacher").Add(teacher);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:49:41.370

根据您定义模型的方式，如果您在用户类中有教师的导航属性，如下所示：

```
public class Teacher
{
    public int Id {get;set;}
    //....
    public User User {get;set;} 
} 
```

然后你应该能够做到

```
var teacher = new Teacher(){ User = someuser};
_db.Teacher.Add(teacher); 
```

这将节省教师和用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:49:46.833

包含用于“急切加载”数据，而不是保存。如果你想保存一个新的教师和一个新的用户对象，它会是这样的：

```
var t = new Teacher();
t.User = new User();
context.Teachers.Add(t)
context.SaveChanges(); 
```

# javascript - 在 iframe 的 onload 事件中加载 Ajax

> ID：15660202
> 
> 赞同：0
> 
> 时间：2013-03-27T13:35:56.483
> 
> 标签：javascript, ajax, iframe

我正在尝试在 iframe 中的 onload 事件上加载 Ajax 页面（如果可能的话？）。

所以我有一个 iframe：

```
<iframe onload="loadIjax('ipage','./page.php');"> <div id="ipage"></div> </iframe> 
```

和 Javascript

```
function loadIjax(divId,strURL)
 {

 if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
  // show ajax response
  parent.document.getElementById(divID).innerHTML=xmlhttp.responseText;
  }
 }
 xmlhttp.open("GET",strURL,true);
 xmlhttp.send();
 } 
```

所以想法是在页面加载时在 iframe 中加载 page.php。

我的问题，这甚至可能是迄今为止所写的吗？在这一点上它不起作用。问题是 Javascript 在 iframe 中找不到 div。如果我将相同的 div 放在 iframe 之外，它确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:40:31.390

将 HTML 放在 iframe 标记中什么都不做。这是不正确的 HTML。

iframe 在其中包含一个完整的页面。这意味着他们有自己的`window`和`document`。因此，当您调用时，`document.getElementById`您是在父窗口中进行操作，而不是在 iframe 内。您需要做的是在 iframe 中通过其文档查找元素。您可以通过访问 iframe 的`contentWindow`属性来做到这一点：

```
var iframe = document.getElementById('myIframeId');
iframe.contentWindow.document.getElementById('containerId').innerHTML = 'foo'; 
```

# c++ - “inet_pton”：找不到标识符

> ID：15660203
> 
> 赞同：26
> 
> 时间：2013-03-27T13:36:01.913
> 
> 标签：c++, linux, windows, networking, udp

我试图在我的程序中包含以下代码，但会出现错误（'inet_pton': identifier not found）。

```
// IPv4:

struct sockaddr_in ip4addr;
int s;

ip4addr.sin_family = AF_INET;
ip4addr.sin_port = htons(3490);
inet_pton(AF_INET, "10.0.0.1", &ip4addr.sin_addr);

s = socket(PF_INET, SOCK_STREAM, 0);
bind(s, (struct sockaddr*)&ip4addr, sizeof ip4addr); 
```

输出

```
 error C3861: 'inet_pton': identifier not found 
```

包含标题

```
 #include <stdio.h>
 #include <stdlib.h>
 #include "udpDefine.h"
 #include <windows.h> 
```

任何帮助都可能会错过一些标题或库。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-27T13:40:08.197

功能

```
int inet_pton(int af, const char *src, void *dst); 
```

在头文件中声明：

```
#include <arpa/inet.h> 
```

如果这是 Windows（Vista 或更高版本），则有与此 ANSI 版本类似的 Winsock：

```
INT WSAAPI InetPton(
  _In_   INT  Family,
  _In_   PCTSTR pszAddrString,
  _Out_  PVOID pAddrBuf
); 
```

尝试`#include <Ws2tcpip.h>` 添加 Ws2_32.lib

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-28T16:52:02.257

在 Windows XP（及更高版本）中，您可以使用以下功能：

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>    

#include <winsock2.h>
#include <ws2tcpip.h>

int inet_pton(int af, const char *src, void *dst)
{
  struct sockaddr_storage ss;
  int size = sizeof(ss);
  char src_copy[INET6_ADDRSTRLEN+1];

  ZeroMemory(&ss, sizeof(ss));
  /* stupid non-const API */
  strncpy (src_copy, src, INET6_ADDRSTRLEN+1);
  src_copy[INET6_ADDRSTRLEN] = 0;

  if (WSAStringToAddress(src_copy, af, NULL, (struct sockaddr *)&ss, &size) == 0) {
    switch(af) {
      case AF_INET:
    *(struct in_addr *)dst = ((struct sockaddr_in *)&ss)->sin_addr;
    return 1;
      case AF_INET6:
    *(struct in6_addr *)dst = ((struct sockaddr_in6 *)&ss)->sin6_addr;
    return 1;
    }
  }
  return 0;
}

const char *inet_ntop(int af, const void *src, char *dst, socklen_t size)
{
  struct sockaddr_storage ss;
  unsigned long s = size;

  ZeroMemory(&ss, sizeof(ss));
  ss.ss_family = af;

  switch(af) {
    case AF_INET:
      ((struct sockaddr_in *)&ss)->sin_addr = *(struct in_addr *)src;
      break;
    case AF_INET6:
      ((struct sockaddr_in6 *)&ss)->sin6_addr = *(struct in6_addr *)src;
      break;
    default:
      return NULL;
  }
  /* cannot direclty use &size because of strict aliasing rules */
  return (WSAAddressToString((struct sockaddr *)&ss, sizeof(ss), NULL, dst, &s) == 0)?
          dst : NULL;
} 
```

与 ws2_32 库链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-19T07:55:12.753

Windows 用户也可以在这里找到答案：

[https://docs.microsoft.com/en-us/windows/desktop/api/ws2tcpip/nf-ws2tcpip-inetptonw](https://docs.microsoft.com/en-us/windows/desktop/api/ws2tcpip/nf-ws2tcpip-inetptonw)

> 该`InetPton`函数将标准文本表示形式的 IPv4 或 IPv6 Internet 网络地址转换为其数字二进制形式。此函数的 ANSI 版本是`inet_pton`.

> Windows Vista 及更高版本支持该`InetPton`功能。

> 当`UNICODE`or`_UNICODE`未定义时，`InetPton`定义为`InetPtonA`，此函数的 ANSI 版本。此函数的 ANSI 版本始终定义为`inet_pton`.

> ```
> Header      ws2tcpip.h
> Library     Ws2_32.lib
> DLL         Ws2_32.dll 
> ```

您需要使用`ws2tcpip.h`标题并添加`Ws2_32.lib`到链接器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-25T14:33:09.553

在我的情况下，找不到该函数，因为头文件中有一个“#define WINVER 0x0502”。

在 Windows 系统上，此功能最少需要版本 0x600 (= Vista)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-30T03:34:10.103

在 WS2tcpip.h 中，定义了这个 api inet_pton：

```
#if (NTDDI_VERSION >= NTDDI_VISTA)
WINSOCK_API_LINKAGE
INT
WSAAPI
inet_pton(
    _In_                                      INT             Family,
    _In_                                      PCSTR           pszAddrString,
    _When_(Family == AF_INET, _Out_writes_bytes_(sizeof(IN_ADDR)))
    _When_(Family == AF_INET6, _Out_writes_bytes_(sizeof(IN6_ADDR)))
                                              PVOID           pAddrBuf
    ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-20T07:55:06.497

在你的代码中显式地声明这个函数。

```
int inet_pton(int af, const char *src, void *dst)
{
  struct sockaddr_storage ss;
  int size = sizeof(ss);
  char src_copy[INET6_ADDRSTRLEN+1];

  ZeroMemory(&ss, sizeof(ss));
  /* stupid non-const API */
  strncpy (src_copy, src, INET6_ADDRSTRLEN+1);
  src_copy[INET6_ADDRSTRLEN] = 0;

  if (WSAStringToAddress(src_copy, af, NULL, (struct sockaddr *)&ss, &size) == 0) {
    switch(af) {
      case AF_INET:
    *(struct in_addr *)dst = ((struct sockaddr_in *)&ss)->sin_addr;
    return 1;
      case AF_INET6:
    *(struct in6_addr *)dst = ((struct sockaddr_in6 *)&ss)->sin6_addr;
    return 1;
    }
  }
  return 0;
} 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2015-03-21T08:25:54.100

要解决此问题，只需在所有#includes 之后将以下内容添加到您的代码中

```
#pragma comment(lib, "ws2_32.lib") 
```

# java - Java 文件 I/O 字符串全部粘在一起，没有新行

> ID：15660204
> 
> 赞同：0
> 
> 时间：2013-03-27T13:36:02.203
> 
> 标签：java, file-io

我有一个变量文件列表。

```
filelist = "Example 1\n Example 2\n" 
```

当我这样做时，`System.out.println(filename)`我得到：

```
"Example 1

Example 2" 
```

但是当我写入 txt 文件时，我得到：

```
"Example 1 Example 2" 
```

我如何让这些从 \n 的换行符开始？

```
try {
        TextFile = new Formatter("C:\\Text.txt");
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        TextFile.format("%s", filename);
        TextFile.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:37:42.653

我的猜测是您在 Windows 上运行，`\r\n`默认情况下它用作行分隔符。（如，这就是记事本等程序解释为行分隔符的内容。）

您可以对其进行硬编码，或者从系统属性中获取特定于平台的内容：

```
String lineSeparator = System.getProperty("line.separator"); 
```

或者使用`BufferedWriter`（或类似的）提供编写新行的方法 - 再次使用特定于平台的默认行分隔符。

# c#-4.0 - Win32 类中缺少 win32_USBDevice

> ID：15660205
> 
> 赞同：0
> 
> 时间：2013-03-27T13:36:06.800
> 
> 标签：c#-4.0, usb, wmi, device

我正在尝试检索已连接 USB 设备的 PID 和 VID。从这行 C# 代码开始：

```
System.Management.ManagementClass USBClass = new ManagementClass("Win32_USBDevice"); 
```

然后我得到了异常`"ManagementException not found"`，后来我遇到了这个链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa394084 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394084(v=vs.85).aspx)

结果`Win32_USBDevice`根本不在名单上。试过`Win32_USBController`但没有得到我想要的。谁能让我知道列表中是否有任何替代类来提取连接的 USB 设备的 PID 和 VID？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-27T18:56:11.517

Try this:

`System.Management.ManagementClass USBClass = new ManagementClass("Win32_USBHub");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:53:25.373

使用 Win32_PnPEntity。您可以通过解析“PNPDeviceID”从 Win32_PnPEntity 获取连接的 USB 设备的 PID 和 VID。

从这个例子开始：[获取已连接 USB 设备的列表](https://stackoverflow.com/questions/3331043/get-list-of-connected-usb-devices)

# jquery - 如何从用于通过 ajax 填充下拉淹没列表的数组传递参数？

> ID：15660213
> 
> 赞同：0
> 
> 时间：2013-03-27T13:36:26.713
> 
> 标签：jquery, ruby-on-rails, ajax, parameters

我有以下看法：

```
index.html.js
<h5>Select your state:</h5>
<%= select_tag "state", options_for_select(@states.collect{|x| x[0]}), :onchange => '$.get("/home/populate_options")' %> 
```

其中@states 是一组状态缩写，例如：

```
@states
  [
    ['AK', 'AK'],
    ['AL', 'AL'],
    . . .
  ] 
```

如何通过 ajax 将包含所选状态值的参数（如果选择阿拉斯加，应将“AK”发送到控制器操作）传递给我的控制器操作？

我是否必须在发送之前在我的 javascript 中手动构建 url `$.get("/home/populate_options")`，使其看起来更像`$.get("/home/populate_options/AK")`？也许我需要改变我使用助手的方式，这样我才能真正使用'rails-like'助手并使用符号发送参数：state =>“AK”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:14:24.240

尝试这个：

当你有`@states = [['AK','AK'],['AL','AL']]`这样的。你不需要使用`collect`就`@states`足够了。

对于在参数中发送值，`onchange`您可以执行以下操作：

```
 <%= select_tag "state", options_for_select(@states), :onchange => '$.get("/home/populate_options?state="+$(this).val())' %> 
```

但在您的问题中，不清楚您究竟从哪里填充数据`ajax`。

# mysql - 从具有不同名称的两个不同表中选择两个字段

> ID：15660218
> 
> 赞同：-3
> 
> 时间：2013-03-27T13:36:33.717
> 
> 标签：mysql

^ 我该怎么做？

**代码**

```
SELECT Officer FROM fines WHERE Name=... 
UNION 
SELECT id FROM houses WHERE Owner=... 
```

试过这个，但它只会返回第一部分。

我这个查询返回如下内容：官员的姓名和房屋 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:39:36.017

你正在做`union`，它返回一个单列。此栏有时会`officer`，有时会`id`。

我想你想加入；

```
SELECT f.Officer, h.id
FROM fines f join
     houses h
     on -- join condition goes here
WHERE Owner=... 
```

我不知道加入条件是什么，也许是房子主人的东西。

# c# - 我可以创建两个线程并在 c# 中的一个任务中运行它们吗？

> ID：15660223
> 
> 赞同：-6
> 
> 时间：2013-03-27T13:36:42.180
> 
> 标签：c#, multithreading, task

我必须在 c# 中创建几个执行图形遍历函数的任务，现在我想做的是有两个独立的线程，它们将不同的源作为该遍历函数的参数并在任务本身中启动。我有一个使用任务的想法，因为我希望 4 个任务以并行方式工作，但让它们使用两个执行相同功能的线程？那可能吗？

所以我想要的是，`task1`包含`thread1`，`thread2`& `task2`包含`thread3`，`thread4`&`task3`包含`thread5`，`thread6`。

所有这些线程都执行相同的功能。是否可以实施？还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:00:45.647

1.  声明一个可用于将参数传递给线程的类：

> ```
> class ThreadParamsClass
> {
>     internal int int1, int2;
> 
>     internal ThreadParamsClass(int int1, int int2)
>     {
>         this.int1 = int1;
>         this.int2 = int2;
>     }
> } 
> ```

1.  创建该类的多个实例并启动线程，将参数对象传递给线程：

> ```
> ThreadParamsClass[] ThreadParams = new ThreadParamsClass[6];
> ThreadParams[0] = new ThreadParamsClass(1, 2);
> ThreadParams[1] = new ThreadParamsClass(3, 4);
> ThreadParams[2] = new ThreadParamsClass(5, 6);
> ThreadParams[3] = new ThreadParamsClass(7, 8);
> ThreadParams[4] = new ThreadParamsClass(9, 10);
> ThreadParams[5] = new ThreadParamsClass(11, 12);
> for (int i = 0; i < 6; i++)
> {
>     Thread Thread1 = new Thread(new ParameterizedThreadStart(Function1));
>     Thread1.Start(ThreadParams[i]);
> }
> 
> void Function1(object Params)
> {
>     ThreadParamsClass ThreadParams = (ThreadParamsClass)Params;
>     int result = ThreadParams.int1 + ThreadParams.int2;
> } 
> ```

# ios - 将 RGB 图像转换为 1 通道图像（黑/白）

> ID：15660224
> 
> 赞同：1
> 
> 时间：2013-03-27T13:36:44.673
> 
> 标签：ios, ios5, core-image

如何使用 ios5 将 RGB 图像转换为 1 通道图像（黑/白）？

输入图像通常是书页的照片。目标是通过将复印件转换为 1 通道图像来减小复印件的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:36:10.557

如果我理解您的问题，您想根据像素的亮度对图像应用黑白阈值。要快速执行此操作，您可以使用我的开源[GPUImage](https://github.com/BradLarson/GPUImage)项目（支持回 iOS 4.x）和它提供的几个图像处理操作。

特别是，GPUImageLuminanceThresholdFilter 和 GPUImageAdaptiveThresholdFilter 可能是您在这里寻找的。前者根据您设置的亮度阈值（默认值为 50%）将像素变为黑色或白色。后者在应用此阈值时会考虑局部平均亮度，这可以为书页上的文本产生更好的结果。

在 UIImage 上使用这些过滤器非常简单：

```
UIImage *inputImage = [UIImage imageNamed:@"book.jpg"];
GPUImageLuminanceThresholdFilter *thresholdFilter = [[GPUImageLuminanceThresholdFilter alloc] init];
UIImage *quickFilteredImage = [thresholdFilter imageByFilteringImage:inputImage]; 
```

这些也可以应用于实时相机馈送和相机拍摄的照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:17:35.753

您可以使用 Core Image 将图像处理为黑白。

使用`CIEdgeWork`，这会将您的图像转换为黑白

有关核心图像编程的更多信息，请访问：- [https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html#//apple_ref/doc/uid/TP30001185- CH3-TPXREF101](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html#//apple_ref/doc/uid/TP30001185-CH3-TPXREF101)

您正在寻找的代码可能是这样的：

```
CIContext *context = [CIContext contextWithOptions:nil]; // 1
CIImage *image = [CIImage imageWithContentsOfURL:myURL]; // 2
CIFilter *filter = [CIFilter filterWithName:@"CIEdgeWork"]; // 3
[filter setValue:image forKey:kCIInputImgeKey];
[filter setValue:[NSNumber numberWithFloat:0.8f] forKey:@"InputIntensity"];
CIImage *result = [filter valueForKey:kCIOutputImageKey]; // 4
CGImageRef cgImage = [context createCGImage:result fromRect:[result extent]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:27:05.280

这是一些示例代码，可能会有所帮助：

```
@implementation UIImage (GrayImage)

-(UIImage*)grayImage
{
    int width = self.size.width;
    int height = self.size.height;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
    CGContextRef context = CGBitmapContextCreate
(nil,width,height,8,0,colorSpace,kCGImageAlphaNone);
    CGColorSpaceRelease(colorSpace);

    if (context == NULL) {
        return nil;
    }

    CGContextDrawImage(context,CGRectMake(0, 0, width, height), self.CGImage);
    CGImageRef cgImage = CGBitmapContextCreateImage(context);
    UIImage *grayImage = [UIImage imageWithCGImage:cgImage];
    CGImageRelease(cgImage);
    CGContextRelease(context);

    return grayImage;
}

@end 
```

我只是将它写为 UIImage 的类别，但不支持具有透明像素的 png 图像，否则它将是黑色的。

# c# - 在没有第三方库的情况下使用 C# .net 3.0 或更低版本将 pdf 转换为 tiff？

> ID：15660233
> 
> 赞同：8
> 
> 时间：2013-03-27T13:37:23.100
> 
> 标签：c#, wpf, pdf, tiff

有几个 SO 帖子和谷歌搜索对我的问题没有太大帮助。所以我又来了。

我需要将 PDF 转换为单个 tiff 图像（显然是多页 tiff）。我已经弄清楚了 tiff 创建部分。但问题在于从 pdf 中提取图像/位图。当然 c# .net 没有这些功能，但应该有办法做到这一点。

关于为什么我不想使用第三方库，是因为它们不是免费的——有些可能是免费的，但出于安全原因，它可能无法在所有环境中使用。而不仅仅是好奇如何做到这一点，在一些帖子中，这个问题被视为一种罪过:)。

任何适当的方法/想法或从哪里开始都会有所帮助。我更喜欢基于 WPF 的解决方案而不是基于 GDI+ 的解决方案，因为我在 windows 服务器上看到了 GDI+ tiff 创建解决方案的问题。我的想法是创建 pdf 更加困难，当然我可以理解它是否容易，它应该已经在 .net 中了。

编辑：同样对于初学者来说，包含简单格式的 pdf 会很好。没有必要它应该支持每种类型的 pdf。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:57:06.300

即使是第 3 方，这也不容易 :)[使用 C# 和 GhostScript 将 PDF 转换为一系列图像](http://www.codeproject.com/Articles/317700/Convert-a-PDF-into-a-series-of-images-using-Csharp)

# java - 有没有办法区分 Java 中不同的泛型实例化运行时？

> ID：15660242
> 
> 赞同：6
> 
> 时间：2013-03-27T13:37:43.910
> 
> 标签：java, generics

我来自 C# 世界，我刚刚了解了 Java 中的[擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，这让我有点反感。Java中真的没有办法与运行时区分开`SomeGenericInstance<String>`来吗？`SomeGenericInstance<Integer>`

我问是因为我已经实现了一个超级简单的 pub-sub 框架，并且我想要一个通用类`GenericMessage<T>`。重要的是不要发送`GenericMessage<String>`给`GenericMessage<Integer>`. 我尝试通过一个键值对列表来实现它，其中键是`Class`表示消息类型的对象。但是这个代码行产生`true`了一个问题......：

`new GenericMessage<Integer>().getClass.equals(new GenericMessage<String>().getClass())`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:42:20.303

据我所知，对不起，这根本不可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:46:05.180

您可以使用**Java Reflection**来做到这一点。不知道这是否总是一个好主意，但这肯定是可能的。这是一个例子：

```
public class Test{

    private List<String> list;

    public static void main(String[] args) throws Exception{
        Field field = Test.class.getDeclaredField("list");
        Field f = field.getGenericType().getClass().getDeclaredField("actualTypeArguments");
        f.setAccessible(true);
        Type[] genericTypes = (Type[]) f.get(field.getGenericType());
        System.out.println(genericTypes[0]);
    }

} 
```

或者，您可以直接转换为 ParameterizedType，如果您觉得更好的话：

```
public class Test{

    private List<String> list;

    public static void main(String[] args) throws Exception{
        Field field = Test.class.getDeclaredField("list");
        ParameterizedType parameterizedType = (ParameterizedType) field.getGenericType();
        Type[] actualTypes = parameterizedType.getActualTypeArguments();
        System.out.println(actualTypes[0]);
    }

} 
```

两个示例都打印：`class java.lang.String`

现在只是为了留下更完整的答案，对*Map*也可以这样做。如您所见，该`getActualTypeArguments()`方法返回 a`Type[]`并且对于*Map*，键类型为索引 0，值类型为索引 1。示例：

```
public class Test{

    private Map<String, Integer> map;

    public static void main(String[] args) throws Exception{
        Field mapField = Test.class.getDeclaredField("map");
        ParameterizedType mapParameterizedType = (ParameterizedType) mapField.getGenericType();
        Type[] actualMapTypes = mapParameterizedType.getActualTypeArguments();
        System.out.println(actualMapTypes[0]);
        System.out.println(actualMapTypes[1]);
    }

} 
```

印刷：

```
class java.lang.String
class java.lang.Integer 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:47:43.633

您可以使用下一个技巧访问它：

```
public class Example<T> {

    Class<T> genericType;

    public Example(Class<T> genericType) {
        this.genericType= genericType;
    }

    public static void main(String args[]) {
        Example<Integer> ex1 = new Example<>(Integer.class);
        Example<String> ex2 = new Example<>(String.class);
        System.out.println(ex1.genericType);
        System.out.println(ex2.genericType);
    }
} 
```

输出：

> 类 java.lang.Integer
> 
> 类 java.lang.String

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T05:34:48.820

这是一种在不使用反射的情况下获得所需内容的方法（假设您能够对 pub-sub 框架进行修改以传递`Class`令牌）。向 assylias 和 zvzdhk 致敬，因为他们为我指明了类文字的方向。

```
interface GenericMessage<T> {

}

interface StringMessage<T extends String> extends GenericMessage<T> {
    String getString();
}

interface IntMessage<T extends Integer> extends GenericMessage<T> {
    int getInt();
}

interface MessageListener<T> {
    <T> void handleMessage(Class<T> type, GenericMessage<T> instance);
}

// "marker interfaces"
interface StringMessageListener<T extends String> extends MessageListener<T> {

}

interface IntMessageListener<T extends Integer> extends MessageListener<T> {

}

class IntMessageImpl<T extends Integer> implements IntMessage<T> {
    public int getInt() {
        return 0;
    }
}

class StringListenerImpl<T extends String> implements StringMessageListener<T> {

    public <T> void handleMessage(Class<T> type, GenericMessage<T> genericMessage) {
        StringMessage stringMessage = (StringMessage) genericMessage; // Typesafe cast since T extends String on both StringMessage and StringMessageListener
        String message = stringMessage.getString();
        // Do something with message
    }
}

class IntListenerImpl<T extends Integer> implements IntMessageListener<T> {
         // an implementation for the Integer case ...
}

void showTypeChecking() {

    GenericMessage<String> badStringMessage = new IntMessageImpl<>(); // Compile-time check fails due to bad type of new message implementation

    MessageListener<Integer> badIntListener = new StringListenerImpl<>(); // Compile-time check fails due to bad type on new listener implementation

    MessageListener<String> stringListener1 = new StringListenerImpl<>();
    MessageListener<String> stringListener2 = new StringListenerImpl<>();
    MessageListener<Integer> intListener = new IntListenerImpl<>();

    GenericMessage<String> stringMessage = new GenericMessage<String>() {};
    stringListener1.handleMessage(String.class, stringMessage);
    stringListener1.handleMessage(Integer.class, stringMessage); // Compile-time check fails due to bad type on class literal

    GenericMessage<Integer> intMessage = new GenericMessage<Integer>() {};
    intListener.handleMessage(Integer.class, intMessage);

    GenericMessage<String> badIntMessage = new GenericMessage<String>() {};
    intListener.handleMessage(Integer.class, badIntMessage); // Compile-time check fails due to bad type on intMessage

    GenericMessage uncheckedMessage = new IntMessageImpl();
    intListener.handleMessage(Integer.class, uncheckedMessage); // Compiler issues warning about unchecked assignment of uncheckedMessage argument

    MessageListener uncheckedListener = new StringListenerImpl();
    uncheckedListener.handleMessage(String.class, stringMessage); // Compiler issues warning about an unchecked call to handleMessage() method
} 
```

它在这种情况下并不直接适用，但您可能会发现对[类型安全异构容器](http://books.google.com/books?id=ka2VUBqHiWkC&lpg=PA142&ots=yYIjMjrZV4&dq=typesafe%20heterogeneous%20container&pg=PA142#v=onepage&q=typesafe%20heterogeneous%20container&f=false)模式的讨论有助于更多地了解 Java 泛型。这绝对是语言中最难掌握的部分之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T04:50:01.833

无法区分“一个`SomeGenericInstance<String>`对象”和“一个`SomeGenericInstance<String>`对象”，因为没有区别。只有“一个`SomeGenericInstance`对象”。

# python - 使用子类别处理 Python CSV 文件

> ID：15660244
> 
> 赞同：3
> 
> 时间：2013-03-27T13:37:46.217
> 
> 标签：python, csv

在我的 Python 应用程序中，我将各个字段的值保存到一个文本文件中，我决定使用 CSV 格式，以便可以在 Excel 中以可读的方式打开它。我还可以修改文件中的值并将它们导入应用程序。文件中的格式如下所示：

```
Category 1, Param 1, Param 2, Param 3, Param 4
Command 1, 100, 123, 456, 1000
Command 2, 980, 312, 567, 882
Command 3, 0, 111, 584, 223
Category 2, Param A, Param B, Param C
Command A, 24, 14, 66
Command B, 59, 0, 123 
```

保存 CSV 文件不是什么大问题，但我想知道的是如何分隔类别，因为每个类别的参数数量都不相同。我一直在使用`csv`Python 的模块和`DictReader`方法，但它只是抓取所有内容并将其放在同一个篮子中。因此，例如，如果我使用此代码：

```
def parseCsvFile(self, paramsfile):
    with open(paramsfile, 'rb') as csvfile:
        paramNames = ['Category', 'Param 1', 'Param 2', 'Param 3', 'Param 4']
        paramsReader = csv.DictReader(csvfile, fieldnames=paramNames)
        for row in paramsReader:
            print row['Category'] 
```

我会得到这个结果：

```
Category 1
Command 1
Command 2
Command 3
Category 2
Command A
Command B 
```

有没有办法先检索类别 1 的数据，然后使用另一组字段名检索类别 2？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:13:55.827

我认为真正的问题是它`csv.DictReader`真的不是为这种文件设计的。特别是，它假定应该使用相同的字典来寻址整个文件中的每一行。但是您正在中途更改线路的类型。相反，您应该只使用`csv.reader`.

我猜您仍然想将您的数据作为字典来处理；在这种情况下，您只需要自己创建字典。我还猜测您希望将数据处理为整数；如果不替换`int`下面的相关内容。以下是我认为你想要的：

```
def parseCsvFile(self, paramsfile) :
    import csv
    csvDict = {}
    category = 'Unknown Category'
    params = []
    with open(paramsfile, 'rb') as csvfile :
        paramsReader = csv.reader(csvfile)
        for row in paramsReader :
            if row[0].startswith('Category') :
                category = row[0]
                csvDict[category] = {}
                params = [p.strip() for p in row[1:] if p]
            else :
                csvDict[category][row[0]] = dict(zip(params, [int(p) for p in row[1:] if p]))
    return csvDict 
```

返回的字典 csvDict 将是一个嵌套字典。文件的每个部分将是字典中的一个键，相应的项将是另一个字典，该字典将该部分中的每一行作为字典保存。

# java - ArrayIndexOutOfBoundsException ArrayLists 数组

> ID：15660248
> 
> 赞同：0
> 
> 时间：2013-03-27T13:37:59.690
> 
> 标签：java, arrays, arraylist, indexoutofboundsexception

我创建了一个大小为 45 的数组列表。由于某种原因，我收到了 ArrayOutOfBoundException。

这是我收到错误的地方：

```
 String temp;
    Scanner sc = new Scanner(str1);
    while(sc.hasNext())
    {
        temp = sc.next();
        int len = temp.length();
        if(len > 0)
            wordsByLen[len - 1].add(temp);  //throwing the error here with exception of 59
    } 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:40:22.380

您是否`wordsByLen`正确初始化了数组？我怀疑不是。

我认为您需要做的是*用正确的长度*初始化数组，然后为每个可能的字长收集一个集合。例如（在伪代码中）

```
for (int i = 0; i < MAXWORDLENGTH; i++) {
   wordsByLen[i] = new ArrayList<String>();
} 
```

我可能会使用 a`Map<Integer,List<String>>`代替。您必须以类似的方式对其进行初始化，但这将是一种更可靠的机制。对于可以记录单词的最大字符数，您不会有任意限制。

# azure - 与 T-sql 的 LIKE 命令等效的天蓝色表存储查询是什么？

> ID：15660250
> 
> 赞同：36
> 
> 时间：2013-03-27T13:38:03.723
> 
> 标签：azure, azure-sql-database, azure-storage, azure-table-storage

我正在使用 Azure 存储资源管理器查询 Azure 表存储。我想查找包含给定文本的所有消息，例如在 T-SQL 中：

```
message like '%SysFn%' 
```

执行 T-SQL 给出“处理此请求时发生错误”

Azure 中此查询的等效项是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-27T13:57:06.857

没有直接的等价物，因为没有通配符搜索。[此处](http://msdn.microsoft.com/en-us/library/windowsazure/dd894031.aspx)列出了所有支持的操作。您会看到 eq、gt、ge、lt、le 等。也许您可以利用这些来查找特定范围。

根据您的分区方案，您可以根据特定的分区键选择实体的子集，然后扫描每个实体，检查`message`以找到您需要的特定实体（基本上是部分分区扫描）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-09-15T15:39:35.140

虽然在 Azure 表存储中不能严格执行高级通配符搜索，但您可以结合使用“ge”和“lt”运算符来实现“前缀”搜索。此过程在 Scott Helme 的博客文章中进行了[解释](https://scotthelme.co.uk/hacking-table-storage-like-queries/)。

本质上，此方法使用 ASCII 递增来查询 Azure 表存储以查找其属性以特定文本字符串开头的任何行。我编写了一个小型 Powershell 函数，它生成执行前缀搜索所需的自定义过滤器。

```
Function Get-AzTableWildcardFilter {
    param (
        [Parameter(Mandatory=$true)]
        [string]$FilterProperty,

        [Parameter(Mandatory=$true)]
        [string]$FilterText
    )

    Begin {}

    Process {
        $SearchArray = ([char[]]$FilterText)
        $SearchArray[-1] = [char](([int]$SearchArray[-1]) + 1)
        $SearchString = ($SearchArray -join '')
    }

    End {
        Write-Output "($($FilterProperty) ge '$($FilterText)') and ($($FilterProperty) lt '$($SearchString)')"
    }
} 
```

然后，您可以像这样使用此函数`Get-AzTableRow`（其中 $CloudTable 是您的`Microsoft.Azure.Cosmos.Table.CloudTable`对象）：

```
Get-AzTableRow -Table $CloudTable -CustomFilter (Get-AzTableWildcardFilter -FilterProperty 'RowKey' -FilterText 'foo') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-27T05:13:56.330

另一种选择是将日志从 Azure 表存储导出到 csv。拥有 csv 后，您可以在 excel 或任何其他应用程序中打开它并搜索文本。

[您可以使用 TableXplorer ( http://clumsyleaf.com/products/tablexplorer](http://clumsyleaf.com/products/tablexplorer) )导出表存储数据。在此有一个选项可将过滤后的数据导出到 csv。

# android - 如何在 android 应用程序的整个生命周期中保持全局 db4o

> ID：15660256
> 
> 赞同：0
> 
> 时间：2013-03-27T13:38:15.940
> 
> 标签：android, db4o

我们正在开发一个 Android 应用程序，它使用 db4o 在多个活动和服务中存储各种对象。我们正在寻找使用 db4o 的最佳方法，特别是何时打开和关闭 db。我们不想在每次存储操作后关闭数据库并在每次检索操作时重新打开它，因为这可能会影响应用程序的速度，因为处理器很难打开和关闭。我们更愿意保留 db4o 的全局状态，该状态可在应用程序的整个生命周期中使用。

我在这里为多个活动阅读 [全局 db4o 数据库，](https://stackoverflow.com/questions/13225485/global-db4o-database-for-multiple-activities?answertab=votes#tab-top) 这是将数据库保存在自定义应用程序对象上并在需要时获取实例的好主意：

```
public class MyApplication extends Application {
    private volatile ObjectContainer container;
    @Override
    public void onCreate() {
        super.onCreate();
        // the application object is a regular Android context,
        // So you can get the required info`
        this.container = Db4oEmbedded.openFile(...)
    }

    @Override
    public void onTerminate() {
        super.onTerminate();
        // if something was not finished, better rollback
        container.rollback();
        container.close();
    }

    public ObjectContainer database(){
        return container;
    }
} 
```

但是，我意识到应用程序的**onTerminate()**方法仅用于仿真目的，从未在实际手机上执行。我的问题是，如果从不调用 onTerminate() 我们应该在哪里关闭 db 对象，这是打开和关闭的最佳策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-16T08:52:24.607

您可以在应用程序类中创建延迟加载单例实例，并在 Launching Activity 的 OnCreate 方法中初始化（打开）它并在 onDestroy 中关闭它。

# haskell - 声明 lambda 函数时出错：先声明一个实例

> ID：15660258
> 
> 赞同：8
> 
> 时间：2013-03-27T13:38:26.413
> 
> 标签：haskell

我试图通过编写一些使用它们的简单函数来理解 Haskell 中的*lambda 函数*（即*匿名函数）。*

在下面的示例中，我只是尝试接收 3 个参数并使用匿名函数添加三个参数中的两个，然后添加第三个参数。我收到一条错误消息，说我必须先声明一个实例。

```
specialAdd x y z = (\x y -> x + y) + z 
```

我感谢任何解释为什么我的示例不起作用和/或任何有助于我更好地理解 lambda 函数的解释。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T15:34:57.370

> `specialAdd x y z = (\x y -> x + y) + z`

在此示例中，您尝试做的是向数字添加一个函数，但这是行不通的。看`(\x y -> x + y) + z`：它有形式`a + b`。为了使这样的表达式起作用，`a`零件和`b`零件必须是相同类型的数字。

Haskell 是一种不寻常的语言，所以它的错误消息很少是“你不能那样做”的形式。所以这里发生的事情是，Haskell 认为那`(\x y -> x + y)`是一个函数，并且由于在表达式中`a + b`,`b`必须与 的类型相同`a`，因此它得出结论 也`b`必须是一个函数。Haskell 还允许您定义自己的规则来添加非内置类型；所以它不能只给你一个错误说“你不能添加两个函数”，而是“你没有定义一个允许我添加两个函数的规则”。

以下将做你想要的：

```
specialAdd x y z = ((\x y -> x + y) x y) + z 
```

在这里，您将函数`(\x y -> x + y)`应用于参数`x`和`y`，然后将结果添加到`z`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T14:31:05.723

练习匿名函数的一个好方法是将它们与高阶函数一起使用，如折叠或映射。

使用地图作为入口点，

地图的基本定义，

```
map f [] = []
map f (x:xs) = f x : f xs 
```

建立了一个例子，

```
>>> let list = [0..4]
>>> let f x = x + 1 
```

应用我们获得的地图，

```
>>> map f list 
[1,2,3,4,5] 
```

现在，我们可以省略 f 的声明并使用匿名函数替换它，

```
>>> map (\x->x+1) list 
[1,2,3,4,5] 
```

然后我们推断， **map f list == map (\x->x+1) list**，因此

```
f = \x-> x + 1 --- The same as f x = x + 1, but this is the equivalent lambda notation. 
```

然后从一个简单的函数开始，我们将了解如何将其转换为匿名函数，然后了解匿名函数如何依赖于 lambda 抽象。

作为练习，尝试转换 fx = 2*x。

现在更复杂了，一个接受两个参数的匿名函数，

又是一个工作示例，

```
>>> let add x y = x + y
>>> foldl' add 0 [0..4]
10 
```

可以使用匿名函数重写为，

```
>>> foldl' (\x y -> x + y) 0 [0..4] 
```

再次使用相等我们推导出 add = \xy -> x + y
此外，在 hakell 中，所有函数都是一个参数的函数，我们可以部分应用它，我们可以将之前的匿名函数重写为， add = \x -> ( \y -> x + y)。

那么诀窍在哪里？？因为，我只是将匿名函数的使用展示为高阶函数，并从那开始，展示如何利用它来使用 lambda 表示法重写函数。我的意思是它如何帮助你学习如何写下匿名函数？

仅仅是因为我已经给你（展示给你）一个使用高阶函数的现有框架。
这个框架是一个巨大的机会来适应你这个符号。
从中可以推断出无限范围的运动，例如尝试执行以下操作。

```
A - Find the corresponding anonymous function ?

1 - let f (x,y) = x + y in map f [(0,1),(2,3),(-1,1)]  
2 - let f x y = x * y in foldl' f 1 [1..5] 

B - Rewrite all of them using lambda notation into a declarative form (f = \x-> (\y-> ...) 
```

等等 ....

* * *

总结一下，

一个函数作为

```
(F0)   f x1 x2 ... xn = {BODY of f} 
```

总是可以重写为，

```
(F1)   f = \x1 x2 ... xn -> {BODY of f} 
```

在哪里

```
(F2)   (\x1 x2 ... xn -> {BODY of f}) 
```

F2 形式只是匿名函数，将函数纯粹转换为 lambda 演算形式。F1 是一个声明性的 lambda 表示法（因为我们声明了 f，正如我们定义的那样，将它绑定到匿名 F2）。F0 是 Haskeller 的常用符号。

最后一点重点是我们可以在参数之间加上括号，这会创建一个闭包。这样做意味着可以使用函数参数的子集完全评估函数代码的子集（意味着转换为不再出现自由变量的形式），但这是另一回事。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T13:41:46.303

这是正确的形式：
`specialAdd a b c = ((\x y -> x + y) a b) + c`

来自Learn You a Haskell 的示例...：
`zipWith (\a b -> (a * 30 + 3) / b) [5,4,3,2,1] [1,2,3,4,5]`

很好的解释： http: [//learnyouahaskell.com/higher-order-functions#lambdas](http://learnyouahaskell.com/higher-order-functions#lambdas)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T04:21:10.533

据我了解，Labmbda/Anonymous 函数可帮助您声明“内联”函数，而无需为其命名。对于“->”之后的表达式，“\”（希腊语的 ASCII，λ）位于变量名之前。例如，

```
(\x y -> x + y) 
```

是类似于 (+) 的匿名 (lambda) 函数。它接受两个 Num 类型的参数并返回它们的总和：

```
Prelude> :type (+)
(+) :: Num a => a -> a -> a

Prelude> :type (\x y -> x + y)
(\x y -> x + y) :: Num a => a -> a -> a 
```

您的示例不起作用，因为正如其他人指出的那样，它的右侧使用 lambda 函数 (\xy -> x + y) 作为 (+) 运算符的参数，该运算符是默认定义的仅适用于 Num 类型的参数。lambda 函数的一些美妙之处在于它的“匿名”使用。Vladimir 展示了如何通过从左侧传递变量来在声明中使用 lambda 函数。更“匿名”的用法可能是简单地使用变量调用它，而不给函数命名（因此是匿名的）。例如，

```
Prelude> (\x y z -> x + y + z) 1 2 3
6

and if you like writing parentheses:

Prelude> (((+).) . (+)) 1 2 3
6 
```

或者在更长的表达式中（如在您的示例声明中），例如，

```
Prelude> filter (\x -> length x < 3) [[1],[1,2],[1,2,3]]
[[1],[1,2]] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T13:42:29.367

您正试图将其用作不正确`(+)`的东西。`(Num a) => (a -> a -> a) -> a -> ??`

`(+)`在类中定义`Num`并且 (a -> a -> a) 不是该类的实例。

你到底想达到什么目的？

# php - PHP - 使用通配符和/或子域验证域

> ID：15660268
> 
> 赞同：2
> 
> 时间：2013-03-27T13:38:56.413
> 
> 标签：php, regex

我正在尝试用 PHP 编写一个验证脚本，该脚本将与我的网站提供的 API 一起使用。这个想法是用户将进入他们的 API 应该工作的所有域，防止竞争对手将代码放在他们的网站上。我只想验证输入的域的格式是否有效

应允许以下域类型：

*   xyz.domain.xxxx
*   *.domain.xxxx
*   域.xxxx

我四处搜索，发现的代码片段（[1](http://kevinphillips.co.nz/news/validate-domain-name/)、[2](https://stackoverflow.com/questions/10118536/regular-expression-for-validating-url-with-sub-domain)、[3](https://stackoverflow.com/questions/10877687/regular-expression-required-for-valid-domain-name-check-in-php)）倾向于将所有域简化为最简单的形式，`domain.com`并且似乎没有考虑通配符或子域 - 或者似乎有点操作与我正在寻找的不同。

我希望有一天能够掌握 Reg 表达式。

提前致谢！

***更新：解决方案***

我最终使用了拒绝 TLD 的 RegEx - 如果`preg_match`失败，我会在域上运行 DNS 检查，作为验证 TLD 的安全网。这样可以防止人们进入垃圾之类的`MyNameIsFred`

```
$domain = str_replace('http://', '', strtolower($_REQUEST['domain']));

//Not checking TLDs. Instead if the domain fails, we will check DNS records to see if it is a TLD or somehow otherwise exists.
/* $reg = '/^(?!.{254,})(?!.*[^.]{64,})(?!.*\*\*)([a-z0-9*](?>[a-z0-9-*]*[a-z0-9*])?)(?>\.(?1)){0,126}$/iD'; //TLD domains OK */

$reg = '/^(?!.{254,})(?!.*[^.]{64,})(?!.*\*\*)[a-z0-9*](?>[a-z0-9-*]*[a-z0-9*])?(?>\.[a-z0-9*](?>[a-z0-9-*]*[a-z0-9*])?){1,126}$/iD'; //No TLD
if (preg_match($reg, $domain)!=1) {
    if (!checkdnsrr($domain.'.', 'A') && !checkdnsrr($domain.'.', 'AAAA'))
        //ERROR
}    
//SUCCESS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:41:45.653

这应该验证域（使用通配符）

```
'/^(?!.{254,})(?!.*[^.]{64,})(?!.*\*\*)([a-z0-9*](?>[a-z0-9-*]*[a-z0-9*])?)(?>\.(?1)){1,126}$/iD' 
```

~~将允许仅 TLD 域~~（根据要求删除），或仅允许`*`.

不允许连续`*`的 s。

如果上述方法不起作用，则可能是您使用的是旧版本的 PHP（以及旧版本的 PCRE）。以下应解决该问题：

```
'/^(?!.{254,})(?!.*[^.]{64,})(?!.*\*\*)[a-z0-9*](?>[a-z0-9-*]*[a-z0-9*])?(?>\.[a-z0-9*](?>[a-z0-9-*]*[a-z0-9*])?){1,126}$/iD' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:44:26.250

非常直接，没有对不同部分进行太多测试，但一般模式。

```
^([\w*]+\.)?([\w-]+)(\.\w+)$ 
```

# php - 单选按钮和电子邮件

> ID：15660271
> 
> 赞同：-4
> 
> 时间：2013-03-27T13:39:00.323
> 
> 标签：php, html

这是我要实现的总体结果。

两个单选按钮 - 建议和投诉

如果建议被选中（默认情况下）发送到 xyz 电子邮件。如果投诉是检查 - 发送到 xyz 电子邮件和 abc 电子邮件。

代码在两个文件 html 和 php.ini 中。html上的表单调用php文件。HTML 部分

```
input type="radio" id="Suggestion" name="radiob" checked onClick="toggleDiv2"/
input type="radio" id="Complaint" name="radiob" onClick="toggleDiv('ifcomplaint')"/ 
```

PHP部分

```
$mailto = 'xyz-email' ; 
```

JS是否必须参与都没关系。我会以任何可行的方式去做。我似乎无法设置它，以便它根据单选按钮选择发送到另一封电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:51:19.420

给单选按钮`value`属性，然后你可以测试`$_POST['radiob']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:03:56.883

为第一个单选按钮添加 value="1"，为第二个单选按钮添加 value="2"。现在在 php 端检查

```
$radioValue=$_POST['radiob'];
if($radioValue==1){
send to xyz
}
else{
send to both
} 
```

# mongodb - 以时间戳为键的 MongoDB 版本控制

> ID：15660272
> 
> 赞同：2
> 
> 时间：2013-03-27T13:39:00.560
> 
> 标签：mongodb, time, schema, versioning

我正在尝试在 MongoDB 中实现版本控制（基于存储文档之间的差异），如本文所述：[在 MongoDB 中实现数据版本控制的方法](https://stackoverflow.com/questions/4185105/ways-to-implement-data-versioning-in-mongodb)。

到目前为止，我使用的是相同的方法，但想进行如下查询：“给我 Date1 和 Date2 之间的所有更改”。帖子中显示的架构仅使用简单的增量编号作为不允许此类查询的更改的键：

```
{
    _id : "id of address book record",
    changes : { 
                1234567 : { "city" : "Omaha", "state" : "Nebraska" },
                1234568 : { "city" : "Kansas City", "state" : "Missouri" }
    }
} 
```

我唯一的猜测是，要进行基于时间的查询，我必须在键值中包含一些时间信息。也许像这样的 ObjectId 或 ISODate：

```
{
    _id : "id of address book record",
    changes : { 
                ISODate(Date) : { "city" : "Omaha", "state" : "Nebraska" },
                ObjectId(id) : { "city" : "Kansas City", "state" : "Missouri" }
    }
} 
```

我用谷歌搜索了很长时间的解决方案，但找不到任何真正有用的东西。如果有人知道如何做到这一点，如果你能帮助我，那就太好了。甚至可能这是解决问题的完全错误的方法，并且有更好的方法来解决这个问题......我愿意接受任何建议！

谢谢你的协助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:05:10.180

使用 IsoDate（或简单的日期）进行版本控制是一种好方法。但是，为了有效地搜索它，您不应将其用作字段标识符，而应将更改设置为数组并将日期放入此数​​组的子文档中：

```
{
    _id : "id of address book record",
    changes : [ 
                { "change_date": ISODate(Date), "city" : "Omaha", "state" : "Nebraska" },
                { "change_date": ISODate(Date), "city" : "Kansas City", "state" : "Missouri" }
    ]
} 
```

这允许您使用 changes.change_date 字段进行 $gte 或 $lte 查询。[`$max`您还可以使用聚合分组运算符](https://docs.mongodb.com/manual/reference/operator/aggregation/max/)找到最近的一个（不要与[$max 查询运算符](https://docs.mongodb.com/manual/reference/operator/meta/max/)混淆，后者的作用完全不同）。

您可能还想为 changes.change_date 添加索引以加快这些查询。

# ios - 管理 App Store 上几个非常相似的应用程序的发布

> ID：15660274
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:39:06.393
> 
> 标签：ios, release-management

我需要找到一种简单的方法来维护一组不同的 iOS 应用程序，但它们将彼此非常相似。实际上太相似了，差异只是关于内容。

遵循发布/更新应用程序的典型方式，这意味着：

1.  创建具有所有功能和 UI 的应用程序的“核心项目”。
2.  创建 n 个重用核心项目的项目。每个项目只会提供一个具有不同内容的数据库。
3.  必须将每个项目/应用程序发布/更新到 AppStore

这太费时间了。是否有工具或方法可以帮助我们加快流程并帮助维护？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:09:01.813

内置过程是在单个项目中创建多个目标。每个目标都有自己的信息列表等。

# c# - 如何更改面板中的边框样式？

> ID：15660276
> 
> 赞同：1
> 
> 时间：2013-03-27T13:39:15.317
> 
> 标签：c#, asp.net

我有一个下拉列表，其中包含一个边框样式名称列表，例如“Dotted，Solid，Groove ...”我需要更改borderstyle，所以尝试了这样的事情

```
Panel1.BorderStyle = DropDownList1.SelectedItem.ToString(); 
```

这就是我如何填充下拉列表 DropDownList3.DataSource = Enum.GetValues(typeof(BorderStyle));

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:44:13.947

尝试这样的事情

```
string selectedStyle = DropDownList1.SelectedItem.ToString();

if (selectedStyle == "Dotted")
{
    Panel1.BorderStyle = System.Web.UI.WebControls.BorderStyle.Dotted;
}
else if (selectedStyle == "Solid")
{
    Panel1.BorderStyle = System.Web.UI.WebControls.BorderStyle.Solid;
}
// and so on ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:50:12.867

这对你有用吗

```
 panel1.BorderStyle = (BorderStyle)Enum.Parse(typeof(BorderStyle),
    DropDownList1.SelectedItem.ToString()); 
```

> 您需要在您身边添加一些额外的代码检查，以防找不到 BorderStyle

引用自 MSDN：[WebControl BorderStyle](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.borderstyle.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:54:57.550

对我来说，我会做类似的事情：

```
panel1.BorderStyle = (BorderStyle)Enum.Parse ( typeof ( BorderStyle ), DropDownList1.SelectedItem.ToString () ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:52:02.080

我没有尝试过，但可能你提供了一个具有真实值的 Item 集合，例如：

```
 System.Web.UI.WebControls.BorderStyle.Dotted
 System.Web.UI.WebControls.BorderStyle.Solid
 etc. 
```

然后尝试类似：

```
Panel1.BorderStyle = DropDownList1.SelectedItem; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T13:45:30.800

```
panel1.BorderStyle = BorderStyle.Fixed3D; 
```

# c++ - 这声明了什么'void func（bool b ...）'？

> ID：15660279
> 
> 赞同：1
> 
> 时间：2013-03-27T13:39:31.453
> 
> 标签：c++, function

我回答了这个问题[我怎样才能让我的 va_list 参数重复自己？](https://stackoverflow.com/questions/15659859/how-can-i-get-my-va-list-arguments-to-repeat-itself)并注意到不常见的函数声明：

```
void ordered(int num1, double list ...); 
```

首先，我认为编译器会抱怨，但 clang 3.2 没有，g++ 4.7.2 也没有。

这个声明扩展到什么？它被解释为什么？

编辑：我知道省略号。但是在示例中，正常形式`<return type> <function-name>(<argument1-type> <arg-name>, ...);`是缺少逗号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:46:42.223

这是 C++ 标准中的语法片段：

```
parameter-declaration-clause:
  parameter-declaration-list[opt] ...[opt]
  parameter-declaration-list , ... 
```

如果是其他参数声明，基本上可以在省略号之前`,`，但不必如此。函数声明：

```
void f(int,double...); 
```

真正意思：

```
void f(int,double,...); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:41:44.403

它与以下内容相同：

```
void ordered(int num1, double list, ...); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:48:16.570

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T13:42:22.267

三个点 ( `...`) 称为“省略号”，表示变量参数列表。因此，您可以传递任意数量的参数（尽管存在操作系统指定的限制）。例如，以这种方式`printf`工作。

请参阅[此处](http://publications.gbdirect.co.uk/c_book/chapter9/stdarg.html)以获取更多说明。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T13:42:57.810

我猜你的意思是“……”对吧？

对于某些函数，不可能指定调用中预期的所有参数的数量和类型。通过使用省略号 (...) 终止参数声明列表来声明此类函数。

# codeigniter - 将表字段类似为 Codeigniter 中的某个别名

> ID：15660285
> 
> 赞同：0
> 
> 时间：2013-03-27T13:39:47.033
> 
> 标签：codeigniter, activerecord

在codeigniter中，我正在为一些数据插入创建一个通用函数

为此我保持一些规范

假设我有两张表，一张是 dt_category，另一张是 dt_product

这是 dt_category 结构

```
|-------------------|---------------------|--------------------|------------------|
| category_id       | category_name       | category_slug      |  timestamp       |
|-------------------|---------------------|--------------------|------------------| 
```

这是 dt_product 结构

```
|-------------------|---------------------|--------------------|------------------|
| product_id        |  product_name       |  product_slug      |  timestamp       |
|-------------------|---------------------|--------------------|------------------| 
```

如您所见，两个表字段都只是通过字段名前缀更改，我的意思是在 dt_category 中它的 category_id

在 dt_product 它的 product_id 等等

现在在调用函数插入类别数据时，我使用这种方法

```
$category_name=$this->input->post('category_name');
               $insert_array=array('category_name'=>$category_name,
                                   'timestamp'=>time());
               $data['msg']=$this->erp_model->data_insert('dt_category',$insert_array); 
```

对于产品数据，只需此方法

```
$product_name=$this->input->post('product_name');
               $insert_array=array('product_name'=>$product_name,
                                   'timestamp'=>time());
               $data['msg']=$this->erp_model->data_insert('dt_product',$insert_array); 
```

处理插入的函数就是这个

```
function data_insert($table,$data)
    {
        $this->db->insert($table,$data);
        $timestamp=$data['timestamp'];
        $table_nm=explode('_',$table); //spliting the table name in format dt_table_name,
        $table_slug=$table_nm[1]."_"."slug";//if its dt_product table_nm[1]="product", 
                                            //if category,table_nm[1]="category"
                                            //thus $table_slug="product_slug" or "category_slug"
        $query = $this->db->select('*')
                        ->from($table)
                        ->where('timestamp', $timestamp)
                        ->get();
        foreach($query->result() as $r_q)
        {
            $id=$r_q->$table_nm[1].'_id';//i want $id value of product_id since $table_nm[1]="product"
            $name=$r_q->$table_nm[1].'_name';//i want $name value of product_name since $table_nm[1]="product"
        }
        echo $id."-".$name;

    } 
```

在基于 table_name 的 aboce 函数中，我想获取字段名称的值

```
$id=$r_q->$table_nm[1].'_id'; should resemble $id=$r_q->product_id; if the table is dt_product 
```

我知道我做错了，因为 ->product_id 是一个 resultanat 对象，而我试图表达为一个字符串，

有没有办法让我做到这一点，

我的意思是根据表名获取字段名；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:22:05.677

好的，我解决了我的问题，这是答案

我在检索时尝试连接，但现在我先做了，然后分配了字段

```
$tab_id=$table_nm[1].'_id';
            $tab_name=$table_nm[1].'_name'; 
```

这是解决的代码

```
function data_insert($table,$data)
        {
            $this->db->insert($table,$data);
            $timestamp=$data['timestamp'];
            $table_nm=explode('_',$table);
            $table_slug=$table_nm[1]."_"."slug";
            echo $table_slug;
            $query = $this->db->select('*')
                            ->from($table)
                            ->where('timestamp', $timestamp)
                            ->get();
            $tab_id=$table_nm[1].'_id';
            $tab_name=$table_nm[1].'_name';
            foreach($query->result() as $r_q)
            {
                $id=$r_q->$tab_id;
                $name=$r_q->$tab_name;
            }
            echo $id."-".$name;

        } 
```

# extjs4.1 - 在 Extjs 4.1 中分配 plugins 属性的语法是什么

> ID：15660290
> 
> 赞同：0
> 
> 时间：2013-03-27T13:39:53.660
> 
> 标签：extjs4.1, extjs-mvc

Ext.grid.Panel 中插件属性的语法是什么？如果我在下面的代码中注释掉 plugins 属性，它可以正常工作，但如果留下它会产生错误。

```
this.grid = new Ext.grid.Panel( {
    id: "t-"+this.gridName+"-grid",
    header: true,
    title: gridTitle,
    selType : 'rowmodel',
    border: false,
    store: store,            
    columns: cm,
    selModel: sm,
    loadMask: true,
    provider: this.page.provider,
    viewConfig: {
        stripeRows: true
    },
    plugins: [Ext.create('Ext.ux.grid.GridHeaderFilters')]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:41:38.577

上面的语法是完全正确的。确保您使用 Ext.create 创建的类必须具有与定义相同的名称。

```
"Ext.define('Ext.ux.grid.RowExpander',{" 
```

还要检查初始化函数。无论您在 grid.on 中分配什么方法，即“this.onRender”，都必须存在于您的插件文件中。有时出于测试目的，我们将其删除并且没有意识到这一点。

```
init : function(grid){
        grid.on( 'render',        this.onRender,        this);

    }, 
```

# javascript - Windows Store 应用程序中 WinJS 范围控件（滑块）刻度上方的自定义工具提示/div

> ID：15660291
> 
> 赞同：0
> 
> 时间：2013-03-27T13:39:54.683
> 
> 标签：javascript, html, windows-store-apps, winjs

在 js/html 中为 Windows 应用商店应用程序使用 WinJS 控件“范围”（这是一个滑块），有没有一种方法可以创建一个自定义 div，它会在用户拖动它时跟随刻度，就像默认的工具提示控件，但哪个会从头开始创建？

范围控件似乎是一种“简单”的标准 HTML5 控件，因为您只需使用：

```
<input type="range" /> 
```

..tag 来使用它，而不是带有一些“WinJS.UI.SomeSpecificControl”值的“data-win-control”属性的标签。虽然“范围”控件的解释似乎依赖于渲染它的浏览器引擎，但我不知道我可以在哪里*“绑定”*一个绝对定位的 div 左右......

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:47:41.697

我认为您需要做的是根据范围元素的宽度计算百分比并将偏移元素添加到其中。然后需要将 ack 转换为像素以用于工具提示的绝对定位。我在这里整理了一个例子[http://jsfiddle.net/CYSeY/4/](http://jsfiddle.net/CYSeY/4/)

下面的代码

CSS：

```
#range {
    margin-left: 100px;
}

#tip {
    position: absolute;
    display: none;
    border: 1px solid black;
    padding: 4px;
} 
```

HTML：

```
<input type="range" id="range" min="0" max="20" value="0" />
<div id='tip'>Some tip</div> 
```

JavaScript：（onload 或 WinJS 页面就绪事件）

```
var r = document.getElementById('range');
var max = r.getAttribute('max');
var min = r.getAttribute('min');
var w = r.clientWidth;
//w += r.offsetLeft;
var isDragging = false;

var moveTip = (function (e) {
    if (isDragging) {
        var posPerc = (r.value / max) * 100;
        var pixPos = (posPerc / 100) * w;
        pixPos += r.offsetLeft;

        document.getElementById('tip').style.display = 'block';
        document.getElementById('tip').style.left = pixPos + 'px';
    }
});

r.onmousedown = (function (e) {
    isDragging = true;
    r.addEventListener('mousemove', moveTip, false);
});
r.onmouseup = (function (e) {
    isDragging = false;
    r.removeEventListener('mousemove', moveTip);
    document.getElementById('tip').style.display = 'none';
}); 
```

上面的代码可以稍微整理一下，但这是一个很好的起点。'

演示：

```
var r = document.getElementById('range');
var max = r.getAttribute('max');
var min = r.getAttribute('min');
var w = r.clientWidth;
//w += r.offsetLeft;
var isDragging = false;

var moveTip = (function(e) {
  if (isDragging) {
    var posPerc = (r.value / max) * 100;
    var pixPos = (posPerc / 100) * w;
    pixPos += r.offsetLeft;

    document.getElementById('tip').style.display = 'block';
    document.getElementById('tip').style.left = pixPos + 'px';
  }
});

r.onmousedown = (function(e) {
  isDragging = true;
  r.addEventListener('mousemove', moveTip, false);
});
r.onmouseup = (function(e) {
  isDragging = false;
  r.removeEventListener('mousemove', moveTip);
  document.getElementById('tip').style.display = 'none';
});
```

```
 #range {

      margin-left: 100px;

    }

    #tip {

      position: absolute;

      display: none;

      border: 1px solid black;

      padding: 4px;

    }
```

```
<input type="range" id="range" min="0" max="20" value="0" />
<div id='tip'>Some tip</div>
```

# yii - yii上传文件错误

> ID：15660294
> 
> 赞同：0
> 
> 时间：2013-03-27T13:39:57.673
> 
> 标签：yii

我是一名葡萄牙学生，我正在尝试实现一个用于游戏管理的 Web 应用程序。

表结构`game`

```
`game` (
`idGame` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(75) NOT NULL,
`primaryScreen` blob NOT NULL,
`game_content` blob NOT NULL,
`category` varchar(45) NOT NULL,
`platform` varchar(45) NOT NULL,
`device` varchar(45) NOT NULL,
`description` varchar(250) NOT NULL,
`funcionalities` varchar(150) NOT NULL,
PRIMARY KEY (`idGame`)
)

`screen` (
`idScreen` int(11) NOT NULL AUTO_INCREMENT,
`id_Game` int(11) NOT NULL,
`image` longblob NOT NULL,
PRIMARY KEY (`idScreen`),
KEY `id_Game` (`id_Game`)
) 
```

我已经阅读了关于如何将文件上传到数据库中的 bolb 的 yii 教程 [http://www.yiiframework.com/wiki/95/saving-files-to-a-blob-field-in-the-database](http://www.yiiframework.com/wiki/95/saving-files-to-a-blob-field-in-the-database)

唯一的区别是在保存之前的函数中我只想保留文件的内容（我可以这样做还是必须保留文件名，文件扩展名......）所以我在模型中这样做：

```
public function beforeSave()
{
if($file=CUploadedFile::getInstance($this,'game_uploaded'))
{
// $this->file_name=$file->name;
//$this->file_type=$file->type;
//$this->file_size=$file->size;
$this->game_content=file_get_contents($file->tempName);
//$file->saveAs('path/to/uploads');

}
if($file=CUploadedFile::getInstance($this,'primscreen'))
{
//$this->file_name=$file->name;
//$this->file_type=$file->type;
//$this->file_size=$file->size;
$this->primaryScreen=file_get_contents($file->tempName);
//$file->saveAs('path/to/uploads');
}

return parent::beforeSave();
} 
```

但是当我尝试时出现此错误：

```
PDOStatement::execute(): MySQL server has gone away 
```

有人可以帮我吗？
我感谢任何建议。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:54:07.243

1.  一个常见的原因`MySQL server has gone away`是超时。尝试`default_socket_timeout`像这样增加：

    ```
    ini_set('default_socket_timeout', 300); 
    ```

2.  另一个可能是 blob 的大小。尝试在`php.ini`

    ```
    post_max_size
    upload_max_filesize 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T08:51:58.413

在您的配置文件中

尝试将其主机从“localhost”更改为“127.0.0.1”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:19:34.190

在保存到数据库之前尝试使用 base64_encode

邦特拉巴霍！

# python - 寻找相同的帧位置，但得到不同的数据

> ID：15660297
> 
> 赞同：2
> 
> 时间：2013-03-27T13:40:07.577
> 
> 标签：python, opencv

我想从某个起始帧开始查询视频中间的帧。在[OpenCV Seek Function/Rewind](https://stackoverflow.com/questions/2974625/opencv-seek-function-rewind)之后，我使用`CV_CAP_PROP_POS_FRAMES`.

为了验证它是否按预期工作，我寻求第 10 帧并从图像中打印一个切片。然后我再次寻找第 10 帧并打印相同的切片。

```
In [1]: import cv

In [2]: capture = cv.CaptureFromFile('T35V1.MOV')

In [3]: cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_POS_FRAMES, 10)
Out[3]: 1

In [4]: np.asarray(cv.GetMat(cv.QueryFrame(capture)))[100] # an arbitrary slice
Out[4]: 
array([[ 36, 104, 120],
       [ 36, 104, 120],
       [ 36, 107, 123],
       ..., 
       [ 50, 114, 136],
       [ 54, 115, 136],
       [ 55, 116, 137]], dtype=uint8)

In [5]: cv.SetCaptureProperty(capture, cv.CV_CAP_PROP_POS_FRAMES, 10)
Out[5]: 1

In [6]: np.asarray(cv.GetMat(cv.QueryFrame(capture)))[100]
Out[6]: 
array([[ 32, 107, 119],
       [ 32, 107, 119],
       [ 35, 109, 124],
       ..., 
       [ 42, 114, 135],
       [ 47, 118, 139],
       [ 50, 121, 142]], dtype=uint8) 
```

数据不一致。我在滥用这个吗？

相关：[http](http://code.opencv.org/issues/481) ://code.opencv.org/issues/481 这个 C++ 中 OpenCV 的用户发现设置和获取属性两次可以解决这个问题。对我来说，无论我使用`cv`还是`cv2`，问题仍然存在。

# javascript - 是否可以在不下载应用程序的情况下将文件上传到 git-hub 帐户/存储库？

> ID：15660298
> 
> 赞同：1
> 
> 时间：2013-03-27T13:40:07.897
> 
> 标签：javascript, github

我需要将文件上传到我的仓库。

我可以只使用 Web 界面来执行此操作吗？

这是一个相关的问题，没有答案，只是链接。

[如何在 GitHub 上上传文件](https://stackoverflow.com/questions/9577968/how-to-upload-files-on-github)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:44:02.273

当然可以...您可以简单地在存储库中创建一个新文件。

![git新文件](../Images/3d37b53008f2e2989f096002bb2165dd.png)

编辑：根据[这篇博文](https://github.com/blog/1302-goodbye-uploads)，没有办法直接上传文件了。此功能已于 2012 年 12 月弃用。

# batch-file - 具有日期和扩展名的重命名文件可以是可变的

> ID：15660300
> 
> 赞同：0
> 
> 时间：2013-03-27T13:40:08.710
> 
> 标签：batch-file

好的，让我再次解释一下，我有两个位置：

F:\Reporting\02.2013 在文件夹“02.2013”​​中我有以下文件

*   `Balance Sheet_20130228_045485.xls`2013 年 3 月 22 日下午 2:40
*   `Balance Sheet_20130228_024867.xls`2013 年 3 月 23 日下午 1:40
*   `Balance Sheet_20130228_023556.xls`2013 年 3 月 23 日下午 3:50

F:\Statements\02.2013 在文件夹“02.2013”​​中我有以下文件

*   `FS_20130228_045485.xls`2013 年 3 月 22 日下午 4:40
*   `FS_20130228_024867.xls`2013 年 3 月 23 日下午 1:40
*   `FS_20130228_023556.xls`2013 年 3 月 23 日下午 6:45

首先，我想将两个文件夹中的最新修改文件移动到目标文件夹：

*   目标文件夹是`F:\accounting\02.2013`

然后我想将这些文件重命名为

*   `Balance Sheet_20130228_023556.doc`作为`BalanceMTD.xls`
*   `FS_20130228_045485.doc`作为`FS.xls`

注意：我每个月都要做这个活动，

*   所以文件夹位置会像`F:\Reporting\03.2013`
*   并且文件名也将更改为`FS_20130331_045465.doc`2013 年 4 月 27 日下午 4:30

你能建议我任何可以帮助我做到这一点的批处理文件吗？如果需要，我会在每个月更改日期，然后再执行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:25:12.270

这将移动并重命名每个源目录中的最新文件：

```
@echo off
setlocal
set DateFolder=02.2013
set TargetFolder=F:\Accounting\%DateFolder%

:: Move the newest file from Reporting and rename it to BalanceMTD.xls
call :MoveAndRename "F:\Accounting\%DateFolder%" "%TargetFolder%\BalanceMTD.xls"

:: Move the newest file from Statements and rename it to FS.xls
call :MoveAndRename "F:\Statements\%DateFolder%" "%TargetFolder%\FS.xls"

:: Done
goto :eof

:MoveAndRename
set SourceFolder=%~1
set TargetFile=%~2

:: Find the newest file in the source folder
for /f "tokens=*" %%F in ('dir /b /od /a-d "%SourceFolder%"') do set "NewestFile=%%F"

:: Move and rename it to the target
move "%SourceFolder%\%NewestFile%" "%TargetFile%"

:: Done with this subroutine
goto :eof 
```

我将大部分工作代码放在名为 的“子程序”`MoveAndRename`中，它只是在特定文件夹中查找最新文件（使用 a`for /f`上的循环`dir /a-d`按日期顺序循环所有文件，只记住最后一个），然后 a`move`移动并将其重命名为目标。（如果您想保留原始文件，请`copy`改用。）

批处理文件的顶部然后只是`MoveAndRename`多次调用子例程，一次用于您要查看的每个源文件夹。

如果您想避免每月编辑批处理文件，请将第三行更改为：

```
set DateFolder=%1 
```

并将日期作为参数传递给批处理文件： `MonthlyProcess.bat 02.2013`. 或者您可以`DateFolder`使用`%date%`环境变量进行设置，但由于它是根据您的语言环境设置格式化的，并且在其他地方有很好的记录，我将把它留给您作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:49:48.963

```
@echo off
setlocal EnableDelayedExpansion
cd F:\MY DOCUMENTS\zyx
rem Process all file names
for /F "delims=" %%a in ('dir /B *.xls') do (
   rem Get base name before first underscore (ie: "Balance Sheet" or "FS")
   for /F "delims=_" %%b in ("%%a") do (
      rem Check if name have two words (ie: "Balance"/"Sheet" or "IC"/"Activities")
      for /F "tokens=1,2" %%c in ("%%b") do (
         rem If base name have just one word...
         if "%%d" equ "" (
            rem New name is that word (ie: "FS")
            set newName=%%c
         ) else (
            rem We don't know what goes here!
         )
      )
   )
   ren "%%a" "!newName!.xls"
) 
```

如果您向我们提供有关如何执行此操作的详细信息，我们可以完成以前的程序...

# java - Glacier 档案检索 - 无效的保管库名称

> ID：15660302
> 
> 赞同：0
> 
> 时间：2013-03-27T13:40:14.893
> 
> 标签：java, amazon-web-services, amazon-glacier

我创建了一个新的 Glacier 保险库以用于开发。我为作业完成通知设置了 SNS 和 SQS。

我正在使用 AWS 的 java SDK。我能够成功地将档案添加到保管库，但在创建检索作业时出现错误。

我使用的代码来自 SDK

```
InitiateJobRequest initJobRequest = new InitiateJobRequest()
        .withVaultName(vaultName)
        .withJobParameters(new JobParameters().withType("archive-retrieval").withArchiveId(archiveId)); 
```

我在测试和生产中使用相同的代码，它工作正常，但在开发中我得到这个错误：

> 状态代码：400，AWS 服务：AmazonGlacier，AWS 请求 ID：xxxxxxxx，AWS 错误代码：InvalidParameterValueException，AWS 错误消息：无效文件库名称：arn:aws:glacier:us-west-2:xxxxxxx:vaults/xxxxxx

我知道保管库名称是正确的并且它存在，因为我使用相同的名称来运行添加存档作业并且它完成得很好。

我怀疑保管库在创建后可能需要一些时间才能允许检索请求，但我找不到任何文档来确认这一点。

有人有类似的问题吗？或者在您发起检索请求之前知道保管库是否存在延迟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T23:43:57.270

```
 try {
        // Get the S3 directory file.
        S3Object object = null;
        try {
            object = s3.getObject(new GetObjectRequest(s3BucketName, key));
        } catch (com.amazonaws.AmazonClientException e) {
            logger.error("Caught an AmazonClientException");
            logger.error("Error Message: " + e.getMessage());
            return;
        }

        // Show
        logger.info("\tContent-Type: "
                + object.getObjectMetadata().getContentType());
        GlacierS3Dir dir = GlacierS3Dir.digestS3GlacierDirectory(object
                .getObjectContent());
        logger.info("\tGlacier object ID is " + dir.getGlacierFileID());

        // Connect to Glacier
        ArchiveTransferManager atm = new ArchiveTransferManager(client,credentials);
        logger.info("\tVault: " + vaultName);

        // create a name
        File f = new File(key);
        String filename = f.getName();
        filename =  path + filename.replace("dir", "tgz");

        logger.info("Downloading to '" + filename
                + "'. This will take up to 4 hours...");
        atm.download(vaultName, dir.getGlacierFileID(), new File(filename));
        logger.info("Done.");

    } catch (AmazonServiceException ase) {
        logger.error("Caught an AmazonServiceException.");
        logger.error("Error Message:    " + ase.getMessage());
        logger.error("HTTP Status Code: " + ase.getStatusCode());
        logger.error("AWS Error Code:   " + ase.getErrorCode());
        logger.error("Error Type:       " + ase.getErrorType());
        logger.error("Request ID:       " + ase.getRequestId());
    } catch (AmazonClientException ace) {
        logger.error("Caught an AmazonClientException.");
        logger.error("Error Message: " + ace.getMessage());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T23:15:33.550

错误消息“无效的保管库名称”表示此存档位于不同的保管库中。证明链接：[https ://forums.aws.amazon.com/message.jspa?messageID=446187](https://forums.aws.amazon.com/message.jspa?messageID=446187)

# c++ - 从二维字符串数组中打印出字符串

> ID：15660312
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:40:44.870
> 
> 标签：c++, arrays, string, 2d

所以，我的数组看起来像这样：

```
string links[26][4];
links[0][0] = 'A';
links[0][1] = 'WOL-LA-CHEE'; 
```

如果我尝试打印，可以这样说“WOL-LA-CHEE”：

cout <<链接[0][1]

我的输出如下所示：

乙

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:42:53.980

如果将文本放在单引号之间，则表示字符文字。`std::string`由于from`char`和有复制构造函数`const char *`，这适用于一个字符，但它不会像您认为的那样对多个字符起作用。您很可能希望将字符串放在双引号之间：

```
 links[0][1] = "WOL-LA-CHEE"; 
```

[阅读有关多字符文字的资料。](https://stackoverflow.com/questions/7459939/what-do-single-quotes-do-in-c-when-used-on-multiple-characters)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:42:41.430

将字符串放在双引号中。`"WOL-LA-CHEE"`. 单引号声明一个字符常量，在这种情况下它的值是未指定的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:43:27.683

`'WOL-LA-CHEE'`是一个多字符文字。它具有实现定义的值，并且是一个`int`. 似乎您想要一个字符串文字：

```
links[0][0] = "A";
links[0][1] = "WOL-LA-CHEE"; 
```

分配`'A'`以前有效，因为这是一个普通的字符文字并且具有 type `char`。`std::string`有一个重载`operator=`需要一个`char`.

# django - django模板中的布尔比较

> ID：15660314
> 
> 赞同：12
> 
> 时间：2013-03-27T13:40:52.210
> 
> 标签：django

我的 Django 模型中有一个布尔字段，例如

```
reminder = models.BooleanField() 
```

现在我想在某些特定条件下比较我的 django 模板中的这个字段。

我正在这样做

```
{% if x.reminder == 'True' %} 
```

但不幸的是，上面的代码没有给我预期的结果。我想删除所有`reminder = False` 请帮助我在这里做错了什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-27T13:42:23.960

您正在与`x.reminder`名为 的字符串进行比较`'True'`，而不是 True 常量

```
{% if x.reminder %} 
```

或者

```
{% if x.reminder == True %} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T13:43:28.233

只需使用这个：

```
{% if x.reminder %} 
```

这（不带引号）从 django 1.5 开始有效，但它是多余的。

```
{% if x.reminder == True %} 
```

[https://docs.djangoproject.com/en/dev/releases/1.5/#minor-features](https://docs.djangoproject.com/en/dev/releases/1.5/#minor-features)

> 模板引擎现在将 True、False 和 None 解释为相应的 Python 对象。

# zeroclipboard - zClip - ZeroClipboard.swf 已删除 - 需要新文件

> ID：15660327
> 
> 赞同：6
> 
> 时间：2013-03-27T13:41:45.323
> 
> 标签：zeroclipboard, zclip

我在我的网站上使用[zClip](http://www.steamdev.com/zclip/)在文本框中复制了几件东西，我让一切正常，但现在，没有改变任何东西，它就停止了工作。

原因是文件[ZeroClipboard.swf](http://zeroclipboard.googlecode.com/svn-history/r10/trunk/ZeroClipboard.swf)的宿主已删除该文件或由于某种原因使其无法访问。

我的计算机上有另一个脚本的 ZeroClipboard.swf 的另一个版本（？），我尝试用我在我的计算机上找到的另一个版本的新链接（？）替换已删除的链接。但它不起作用，flash 电影加载但我无法单击我的按钮并复制内容。当我使用不再起作用的旧链接时，它会显示“电影尚未加载”。它无法加载，因为该文件不可访问。

因此，由于使用新链接电影加载但不起作用，我确定它是另一个与我的脚本不兼容的版本。

**现在我的问题是：** 你们中是否有人拥有 SteamDev.com 网站上托管的 ZeroClipboard.swf 版本？如果，你能不能把它上传到某个地方让我下载，我真的很感激。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T17:42:53.013

我今天正在寻找`ZeroClipboard.swf`，我遇到了同样的问题。

环顾四周，我在[这里](http://davidwalsh.name/clipboard)找到了一个关于它的教程。你可以看到有一个托管版本`ZeroClipboard.swf`，这里是 url：

[http://davidwalsh.name/demo/ZeroClipboard.swf](http://davidwalsh.name/demo/ZeroClipboard.swf)

我试过这个版本，它就像一个魅力。现在，我强烈建议您托管此文件的正确版本，以避免以后出现此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T09:53:00.423

只需去官方网站，然后打开源代码并从那里复制 swf 路径:)

这里是[http://www.steamdev.com/zclip/js/ZeroClipboard.swf](http://www.steamdev.com/zclip/js/ZeroClipboard.swf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T11:27:34.853

它没有加载，因为它由于 XSS 漏洞而被阻止[http://seclists.org/fulldisclosure/2013/Mar/207现在您可以从](http://seclists.org/fulldisclosure/2013/Mar/207)[https://github.com/jonrohan/ZeroClipboard](https://github.com/jonrohan/ZeroClipboard) 获得安全版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-22T06:21:30.867

从以下链接获取 ZeroClipboard.swf 文件：

[https://github.com/paulirish/css3please/blob/master/ZeroClipboard.swf](https://github.com/paulirish/css3please/blob/master/ZeroClipboard.swf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-12T18:37:39.777

上面的答案对我不起作用，但我查看了 zClip 的源代码并找到了他们正在使用的 .swf 的 url；[http://www.steamdev.com/zclip/js/ZeroClipboard.swf](http://www.steamdev.com/zclip/js/ZeroClipboard.swf)

# file - AS400 Cobol 文件共享

> ID：15660332
> 
> 赞同：0
> 
> 时间：2013-03-27T13:41:56.630
> 
> 标签：file, ibm-midrange, cobol

我们希望每天多次使用 COBOL 将大量记录添加到 AS400 数据库文件中。30 位用户通过在线 cobol 屏幕也不断更新和添加此文件（尽管记录不同）。我最初对此的想法是令人恐惧的，但是 AS400 上的文件共享是否足够强大以处理这种多线程，或者一个任务是否锁定文件并在完成后释放它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:02:31.233

我是一名 RPG 程序员。几十年来，我经常每天都有数百个工作在同一个表中添加、更改和删除记录。

IBM i 文件共享工作得非常好 - 我什至从未想过它。有一些任务需要对文件进行独占访问——例如备份和恢复——但应用程序执行的 I/O 类型在典型的“共享更新”访问中工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:54:47.100

COBOL 应用程序可能会锁定它已读取的记录，直到它们被更新或释放，或者如果在提交控制下处理，直到提交或回滚。

# c# - 列表 在类内使用

> ID：15660345
> 
> 赞同：4
> 
> 时间：2013-03-27T13:42:31.770
> 
> 标签：c#, list, class, generic-list

我找到了一个关于在类中使用 List 的代码示例。有些代码我不明白。Name 和 Description 字段在 List 定义中具有值，但 Album 字段没有值。（

`new genre { Name = "Rock" , Description = "Rock music", Album?? }`

）。为什么？

```
public class Genre
{
    public string  Name { get; set; }
    public string  Description { get; set; }
    public List<Album> Albums { get; set; }
}

public class Album
{
    public string  Title { get; set; }
    public decimal  Price { get; set; }
    public Genre  Genre { get; set; }
}

var genre = new List<Genre>
{
    new genre { Name = "Rock" , Description = "Rock music" },
    new genre { Name = "Classic" , Description = "Middle ages music" }
};

new List<Album>
{
    new Album { Title = "Queensrÿche", Price = 8.99M, Genre = genre.Single(g => g.Name == "Rock") },
    new Album { Title = "Chopin", Price = 8.99M, Genre = genre.Single(g => g.Name == "Classic") }
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T13:44:34.080

这种 C# 语法称为`Object and Collection initializers`.

这是[文档](http://msdn.microsoft.com/en-gb/library/vstudio/bb384062.aspx)。

此语法允许您设置在对象或集合初始化期间可以访问的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:11:46.603

正如其他人所提到的，代码示例正在使用[Object 和 Collection Initializers](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)。对于集合，初始化程序调用集合的构造函数，然后为大括号内列出的每个元素调用 .Add() 函数。对于对象，初始化程序调用对象的构造函数，然后为您指定的任何属性设置值。

对象和集合初始化器实际上在临时变量中创建您的对象或集合，然后将结果分配给您的变量。这可确保您获得全有或全无的结果（即，如果您在初始化期间从另一个线程访问它时无法获得部分初始化的值）。初始化代码可以改写如下：

```
var temp_list = new List<Genre>();
// new genre { Name = "Rock" , Description = "Rock music" }
var temp_genre_1 = new Genre();
temp_genre_1.Name = "Rock";
temp_genre_1.Description = "Rock music";
temp_list.Add(temp_genre_1);
// new genre { Name = "Classic" , Description = "Middle ages music" }
var temp_genre_2 = new Genre();
temp_genre_2.Name = "Classic";
temp_genre_2.Description = "Middle ages music";
temp_list.Add(temp_genre_2);
// set genre to the result of your Collection Initializer
var genre = temp_list; 
```

由于此代码没有显式设置`Album`流派属性的值，因此它被设置为您的类中指定的默认值`Genre`（对于引用类型为 null）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:45:47.513

这些是用于快速初始化属性的[对象和集合初始化器。](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)您不需要初始化所有属性，只需初始化您需要的那些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T13:46:29.863

因为编码器不想设置它的值。如果要在末尾添加语句 Album = new List()。您不需要设置所有属性。

# python - Django Tastypie 记录级授权

> ID：15660347
> 
> 赞同：2
> 
> 时间：2013-03-27T13:42:38.210
> 
> 标签：python, django, python-2.7, tastypie

我在使用 sweetpie 0.9.12+ 实现记录级授权时遇到问题。

我的设置如下所示：

**模型**

```
class UserProfile(models.Model):
    def __unicode__(self):
        return self.user.get_full_name()

    user = models.OneToOneField(User)

class Sample(models.Model):
    def __unicode__(self):
        return '%s' % self.id

    OPEN = 0
    CLAIMED = 1
    CLOSED = 2
    MANUAL = 3
    MODIFIED = 4
    DELETED = 5
    ERROR = 6
    RESERVED = 7
    STATUS_CHOICES = (
        (OPEN, 'Open'),
        (CLAIMED, 'Claimed'),
        (CLOSED, 'Closed'),
        (MANUAL, 'Manual'),
        (MODIFIED, 'Modified'),
        (DELETED, 'Deleted'),
        (ERROR, 'Error'),
        (RESERVED, 'Reserved'),
    )

    status = models.SmallIntegerField(max_length = 1, default = OPEN, choices = STATUS_CHOICES)
    user_profile = models.ForeignKey(UserProfile, blank = True, null = True) 
```

**资源**

```
class BaseResource(ModelResource):
    # Base class with rather strict default settings
    # All other Resources extend this and override any defaults to higher permissions
    class Meta:
        authentication = DjangoAuthentication()
        authorization = ReadOnlyAuthorization()
        allowed_methods = []

class SampleResource(BaseResource): # BaseResource defines a default Meta, setting allowed_methods and authentication for all other resources in the API
    UserProfile = fields.ForeignKey(UserProfileResource, 'user_profile', null = True, full = True)
    class Meta(BaseResource.Meta):
        queryset = Sample.objects.all()
        resource_name = 'sample'
        allowed_methods = ['get', 'post', 'put', 'patch']
        authorization = SampleAuthorization()
        always_return_data = True

    def dehydrate_status(self, bundle):
        return Sample.STATUS_CHOICES[bundle.data['status']][1]

    def hydrate_status(self, bundle):
        bundle.data['status'] = Sample.__dict__[bundle.data['status'].upper()]
        return bundle 
```

**授权**

```
class SampleAuthorization(Authorization):
    # Checks that the records' owner is either None or the logged in user
    def authorize_user(self, bundle):
        return bundle.obj.user_profile in (None, self.user_profile(bundle))

    def user_profile(self, bundle):
        return user_profile.objects.get(user = bundle.request.user)

    def read_list(self, object_list, bundle):
        print 'Read List'
        return object_list.filter(Q(user_profile = self.user_profile(bundle)) | Q(user_profile = None))

    def read_detail(self, object_list, bundle):
        print 'Read Detail'
        return self.authorize_user(bundle)

    def create_list(self, object_list, bundle):
        return object_list

    def create_detail(self, object_list, bundle):
        return self.authorize_user(bundle)

    def update_list(self, object_list, bundle):
        print 'Update List'
        allowed = []
        for obj in object_list:
            if obj.user_profile in (None, self.user_profile(bundle)):
                allowed.append(obj)

        return allowed

    def update_detail(self, object_list, bundle):
        print 'Update Detail'
        print bundle.obj.status, bundle.data['status']
        # Compare status stored on the server against the user-set status
        # If server status is >= user status
        # Raise Unauthorized
        if bundle.obj.status >= bundle.data['status']:
                raise Unauthorized('New status must be higher than current status')
        return self.authorize_user(bundle)

    def delete_list(self, object_list, bundle):
        raise Unauthorized('Deletion not allowed through API')

    def delete_detail(self, object_list, bundle):
        raise Unauthorized('Deletion not allowed through API') 
```

我的问题是 update_detail 似乎被调用了两次，输入不同。请求的更新正在尝试更改存储在服务器上的记录的状态。新状态必须高于存储状态，否则更改为未经授权。

运行上述代码时，我的输出如下所示：

```
Read Detail
Update Detail
0 Claimed
Update Detail
1 1
[27/Mar/2013 09:35:23] "PATCH /api/1.0/sample/1/ HTTP/1.1" 401 0 
```

在第一次通过时，bundle.obj.status 具有正确的值，但 bundle.data['status'] 尚未水合。在第二遍中，bundle.obj.status 已更改为新状态，并且新状态已被水合。

因为状态在第一次通过时没有被水合，所以我无法可靠地比较它们，并且不想手动调用 hydrate_status 因为它会扰乱在后台完成的整个水合过程。因为第二遍的值是相同的，所以无论我将它设置为什么状态，它总是会引发 Unauthorized 异常。

如果 Tastypie 两次调用该方法并为存储的状态值和新的状态值输入不同的输入，我该如何实现记录级授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T15:30:08.367

Turns out, the multiple calls to update_detail was a bug in the tastypie framework.

Issue was submitted on github and resolved in a [bug fix](https://github.com/toastdriven/django-tastypie/issues/884).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T09:59:33.690

看看使用 django-guardian 而不是硬编码模型上的关系。下面的授权类将是一个好的开始：

[https://gist.github.com/airtonix/5476453](https://gist.github.com/airtonix/5476453)

# asp.net - 发送邮件 StringBuilder 卡住了

> ID：15660348
> 
> 赞同：0
> 
> 时间：2013-03-27T13:42:41.180
> 
> 标签：asp.net

我声明了 StringBuilder builder = new StringBuilder(); 我用 builder.AppendLine("xyz"); 写了一些字符串

邮寄过程已成功执行。但是当我尝试用 builder.AppendLine("xyz"); 写一些信息时 邮件内容总是返回空:(。

如何使用 builder.AppendLine("xyz"); 填写我的邮件内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:45:32.153

如果电子邮件需要采用 HTML 格式，可能是这样的。

```
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);

hw.Write("xyz"); 
```

# java - 我如何在服务器上写入并在 android 上读取

> ID：15660352
> 
> 赞同：0
> 
> 时间：2013-03-27T13:42:46.480
> 
> 标签：java, android, java-server, client-applications

我想在我的 java 服务器中创建一个 printwriter，在我的 android 代码中创建一个 buffertreader。知道我可以从我的 android 发送一条消息并在我的 java 编译器上阅读它，但我也想做相反的事情。在 android 上读取并在服务器上写入。我是否需要两个应用程序，因为我不知道是否可以将它放在尝试每个代码之间？

安卓代码：

```
try {

 client = new Socket("10.0.2.2", 4444);  //connect to server
 printwriter = new PrintWriter(client.getOutputStream(),true);
 printwriter.write(messsage);  //write the message to output stream

 printwriter.flush();
 printwriter.close();
 client.close();   //closing the connection

} catch (UnknownHostException e) { 
```

爪哇服务器：

```
 while (true) {
        try {

            clientSocket = serverSocket.accept();   //accept the client connection
            inputStreamReader = new InputStreamReader(clientSocket.getInputStream());
            bufferedReader = new BufferedReader(inputStreamReader); //get the client message
            message = bufferedReader.readLine();

            System.out.println(message);
            inputStreamReader.close();
            clientSocket.close();

        } catch (IOException ex) { 
```

感谢您花时间阅读我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:18:04.703

是的，您可以在它们之间创建两种方式的通信，您所要做的就是在客户端（Android）打开一个 InputStream 并在 Java 服务器端打开一个 OutputStream，可以通过以下方式实现：

安卓代码：

```
try {

 client = new Socket("10.0.2.2", 4444);  //connect to server
 printwriter = new PrintWriter(client.getOutputStream(),true);
 printwriter.write(messsage);  //write the message to output stream

 printwriter.flush();
 printwriter.close();

 InputStream in = client.getInputStream();

 byte data[] = new byte[1024]
 in.read(data);    ///perform your reading operation here

 client.close();   //closing the connection

} catch (UnknownHostException e) { 
```

爪哇服务器：

```
while (true) {
    try {

        clientSocket = serverSocket.accept();   //accept the client connection
        inputStreamReader = new InputStreamReader(clientSocket.getInputStream());
        bufferedReader = new BufferedReader(inputStreamReader); //get the client message
        message = bufferedReader.readLine();

        System.out.println(message);
        inputStreamReader.close();

        PrintWriter pw = new PrintWriter(clientSocket.getOutputStream());
        pw.write(new String("write data here"));
        pw.flush();
        pw.close();
        clientSocket.close();

    } catch (IOException ex) { 
```

# c# - 为什么 Gridview 页脚添加了额外的列？

> ID：15660353
> 
> 赞同：1
> 
> 时间：2013-03-27T13:42:50.330
> 
> 标签：c#, asp.net, gridview

不敢相信我不得不问这个问题——你会认为这样一个基本功能很容易实现，但我在为 Gridview 创建页脚时遇到了麻烦。我已经查看了各种教程和其他问题，例如[此处](http://highoncoding.com/Articles/98_Adding_a_New_Row_in_GridView.aspx)、[此处](http://msdn.microsoft.com/en-us/library/bb310552.aspx)和[此处](https://stackoverflow.com/questions/12545919/how-do-i-add-footertemplate-to-gridview-with-bountfields)，但仍然遇到困难。

问题在于正确显示页脚（即没有添加额外的空列）。根据我收集的信息，您需要将 FooterTemplate 放在 TemplateField 标记中，否则它将不起作用 - 至少它不会为我编译。如果我在 BoundFields 列之后插入它，那么它会添加一个额外的列，这是不可取的。

```
<asp:GridView ID="gridview1" runat="server" AutoGenerateColumns="false" AllowSorting="true"
    CellPadding="3" HorizontalAlign="Center" GridLines="both" CssClass="dataTable1"
    OnRowDataBound="Colour_Columns" Caption="PARTIAL COMPARE" ShowFooter="true">
    <HeaderStyle BackColor="Black" ForeColor="AntiqueWhite" Height="30" CssClass="header" />
    <FooterStyle BackColor="Black" ForeColor="AntiqueWhite" Height="30" CssClass="footer" />
    <Columns>
        <asp:BoundField DataField="FOLDER" HeaderText="Location" />
        <asp:BoundField DataField="FILE" HeaderText="File" />
        <asp:BoundField DataField="CHECKSUM" HeaderText="Checksum" Visible="false" />
        <asp:BoundField DataField="STATUS" HeaderText="Status" />
        <asp:BoundField DataField="DATE" HeaderText="Date" Visible="false" />
        <asp:TemplateField>
            <FooterTemplate>
                <asp:Button ID="UpdateButton" runat="server" Text="UPDATE" CssClass="updateButton" />
            </FooterTemplate>
        </asp:TemplateField>
     </Columns>
</asp:GridView> 
```

![在此处输入图像描述](../Images/378000fa60408cb109bf4d570eda4d44.png)

同样，如果我将它放在 BoundFields 之前，它会在左侧添加一个额外的列。如果我尝试将所有 BoundFields 放在 TemplateField 下，它将无法编译。

如何在不创建额外列的情况下将页脚添加到 gridview？另外，当我们使用它时，如何将它的 colspan 设置为 1？（它只会有一个更新按钮，因此页脚中不需要三列。）

**颜色方案方法：**

```
protected void Colour_Columns(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if (e.Row.Cells[3].Text == "Match")
           e.Row.BackColor = Color.Lime;
        if (e.Row.Cells[3].Text == "Mismatch")
           e.Row.BackColor = Color.Gold;
        if (e.Row.Cells[3].Text == "New File")
           e.Row.BackColor = Color.PeachPuff;
    }
} 
```

此方法似乎无法识别 ItemTemplate 值...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:59:27.883

尝试仅对最后一列使用模板字段，并在该列中指定 ItemTemplate 和 FooterTemplate。试试下面的代码。

```
<asp:GridView ID="gridview1" runat="server" AutoGenerateColumns="false" AllowSorting="true"
    CellPadding="3" HorizontalAlign="Center" GridLines="both" CssClass="dataTable1"
    OnRowDataBound="Colour_Columns" Caption="PARTIAL COMPARE" ShowFooter="true">
    <HeaderStyle BackColor="Black" ForeColor="AntiqueWhite" Height="30" CssClass="header" />
    <FooterStyle BackColor="Black" ForeColor="AntiqueWhite" Height="30" CssClass="footer" />
    <Columns>
        <asp:BoundField DataField="FOLDER" HeaderText="Location" />
        <asp:BoundField DataField="FILE" HeaderText="File" />
        <asp:BoundField DataField="CHECKSUM" HeaderText="Checksum" Visible="false" />
        <asp:TemplateField HeaderText="Status">
             <ItemTemplate>
                  <asp:Label ID="StatusLabel" runat="server" Text='<%# Eval("STATUS") %>' />
            </ItemTemplate>
            <FooterTemplate>
                <asp:Button ID="UpdateButton" runat="server" Text="UPDATE" CssClass="updateButton" />
            </FooterTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="DATE" HeaderText="Date" Visible="false" />
     </Columns>
</asp:GridView> 
```

我更改了 Cs 文件以从模板字段中读取值。请重新复制 ASPX，因为我也通过向标签添加 ID 进行了更改

CS：

```
protected void Colour_Columns(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Label StatusLabel = e.Row.FindControl("StatusLabel") as Label;
        if (StatusLabel.Text == "Match")
           e.Row.BackColor = Color.Lime;
        if (StatusLabel.Text == "Mismatch")
           e.Row.BackColor = Color.Gold;
        if (StatusLabel.Text == "New File")
           e.Row.BackColor = Color.PeachPuff;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:35:00.760

你不应该使用`FooterTemplate`with `BoundField`。页脚模板旨在与`TemplateField`.Additional 页脚模板一起应用**，**这样您就可以在有数字数据的情况下在 gridview 底部聚合总计。

这是在第一列中使用带有页脚字段的模板字段的示例，您可以根据需要进行更改以满足您的需要：

**ASPX：**

```
 <asp:GridView ID="gridview1" runat="server" AutoGenerateColumns="false" ShowFooter="true">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Label ID="lblFolder" runat="server" Text='<%# Eval("FOLDER") %>' />
                </ItemTemplate>
                <FooterTemplate>
                    Footer content displayed under FOLDER, notice no extra column!
                </FooterTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Label ID="lblFile" runat="server" Text='<%# Eval("FILE") %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:Label ID="lblCheck" runat="server" Text='<%# Eval("CHECKSUM") %>' />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

**结果：**

![在此处输入图像描述](../Images/03e9b332554957a6fbfbec08067e253e.png)

或者，您可以坚持使用 BoundFields 并在代码中动态添加页脚：

```
protected void gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Footer)
    {
        var footer = new Label();
        footer.Text = "Footer content";
        //Footer will be displayed under the *first* column
        e.Row.Cells[0].Controls.Add(footer); 
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T04:33:01.700

如何编码此表格：

  PURCHASE ORDER MASTER [lblPONumberH]                       
PO Number ://here is textBox //RequireField PO Date : //here istextbox with Calender extender Vendor: //here is dropdown Created By ://here is textbox save//Button Cancel//Button网格视图                                

项目 描述 预算编号 数量 UOM 价格 Databound DataBound DataBound DataBound DataBound Edit & Del btn
in footer style txtItemDescription ddlBnumber txtQuantity ddlUOM txtPrice AddBtn

# windows-phone-8 - 需要在 wp8 应用程序中添加崩溃报告功能

> ID：15660356
> 
> 赞同：2
> 
> 时间：2013-03-27T13:42:52.897
> 
> 标签：windows-phone-8, windows-phone, error-reporting

我在 WP7.1 和 WP8 中开发了一个 Windows Phone 应用程序。我需要为我的应用程序实现崩溃报告功能。每当发生强制关闭时，我都想了解发生的所有细节。有谁知道解决这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:04:29.797

[Telerik 的 Windows Phone 控制套件](http://www.telerik.com/products/windows-phone/overview/all-controls/diagnostics.aspx)的诊断元素包括错误报告。

或者，您可以查看众多[Little Watson](http://blogs.msdn.com/b/andypennell/archive/2010/11/01/error-reporting-on-windows-phone-7.aspx)实现之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:16:21.790

在 WP8 上，您可以使用 Flurry，它具有未处理异常的事件处理程序。我注意到它并不是非常详细，但它是免费的。优点是您可以抛出日志错误调用以尝试缩小范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-09T09:35:03.453

我正在使用[BugSense](https://www.bugsense.com)，对此我感到非常满意。除了带有通知的崩溃报告之外，您还可以获得很好的统计数据，例如哪个设备上的哪个应用程序版本受问题影响最大等等。使用就像引用程序集并调用一个 init 函数一样简单，尽管您可以自定义报告的内容（自定义值，如 userId 或其他一些指标）。他们提供系统的免费和付费版本。支持也很大。我强烈推荐它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T14:06:25.127

你可以试试 yandex appmetrica 的 win 手机[https://github.com/yandexmobile/metrica-sample-dotnet](https://github.com/yandexmobile/metrica-sample-dotnet)

# ios - 将两张图片上传到 WebServer

> ID：15660360
> 
> 赞同：2
> 
> 时间：2013-03-27T13:42:54.717
> 
> 标签：ios, objective-c, post, file-upload, afnetworking

我试图将两张图片上传到我的网络服务器。这是我现在要做的，上传一张图片：

```
NSData *imageData = UIImagePNGRepresentation(imageToSend);
// setting up the URL to post to
NSString *urlString = @"http://www.myweb.com.br/_resources/testeDir.php";

// setting up the request object now
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = @"14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

/*
 now lets create the body of the post
 */
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"userfile\"; filename=\"ipodfile.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// setting the body of the post to the reqeust
[request setHTTPBody:body];

//Create the connection with the string URL and kick it off
NSURLConnection *urlConnection = [NSURLConnection connectionWithRequest:request delegate:self];
[urlConnection start]; 
```

一张图片效果很好，但是，我怎么能同时发送两张图片呢？

一种选择是使用 AFNetworking，但到目前为止我无法让它工作，这是我尝试过的：

```
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:urlString];
NSMutableURLRequest *requestHTTP = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData:imageData name:@"userfile" fileName:@"ipodfile.jpg" mimeType:@"image/jpeg"];
}];

AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:requestHTTP];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {

    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
    //CGFloat progress = ((CGFloat)totalBytesWritten) / totalBytesExpectedToWrite * 100;

}];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"Upload succes");
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Upload failed");
}];
[operation start]; 
```

这是我的php代码：

```
<?php
    $currentDirectory = getcwd(); 
    $uploaddir = $currentDirectory."/4/HD/";
    $uploaddir2 = $currentDirectory."/4/thumb/";
    $file = basename($_FILES['userfile']['name']);
    $uploadfile = $uploaddir . $file;
    $file2 = basename($_FILES['userfile2']['name2']);
    $uploadfile2 = $uploaddir2 . $file2;

  if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
        echo $uploaddir."{$file}";
      } 

  if (move_uploaded_file($_FILES['userfile2']['tmp_name'], $uploadfile2)) {
        echo $uploaddir2."{$file2}";
      } 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:51:13.713

只需将另一个图像添加到具有不同名称的请求中。

```
 NSMutableData *body = [NSMutableData data];
   [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
   [body appendData:[@"Content-Disposition: form-data; name=\"userfile\"; filename=\"ipodfile.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
   [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
   [body appendData:[NSData dataWithData:imageData]];
   [body appendData:[[NSString stringWithFormat:@"\r\n",boundary]  dataUsingEncoding:NSUTF8StringEncoding]];//MOD HERE
    //and add

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Disposition: form-data; name=\"userfile2\"; filename=\"ipodfile2.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

在添加两个文件之前不要关闭正文*--%--\r\n*

[编辑]这就是我的做法：

```
if([[NSFileManager defaultManager] fileExistsAtPath:path])
    {
        NSData *data = [NSData dataWithContentsOfFile:path];
        //NSLog(@"image present:%d",[data length]);

        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Disposition: attachment; name=\"file1\"; filename=\"image.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        //[body appendData:[self encryptThisData:data]];
        [body appendData:data];
        [body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    }
    if([[NSFileManager defaultManager] fileExistsAtPath:videoPath])
    {
        NSString *content = [NSString stringWithContentsOfFile:videoPath encoding:NSUTF8StringEncoding error:nil];
        NSURL *pathURL = [NSURL URLWithString:content];
        ////NSLog(@"cur url is:%@",pathURL);
        NSData *data = [NSData dataWithContentsOfURL:pathURL];
        //NSLog(@"data len is:%d",[data length]);

        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Disposition: attachment; name=\"file3\"; filename=\"video.mov\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:data];
        [body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    }
// close form   
    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // set request body 
    [request setHTTPBody:body]; 
```

# java - Android : 画布上的 AdMob

> ID：15660361
> 
> 赞同：0
> 
> 时间：2013-03-27T13:42:55.870
> 
> 标签：java, android, admob, android-canvas, draw

我有一个类，我设置所有位图等，并调用我定义 Canvas 和所有绘制方法的类。就像我绘制所有项目一样，当我添加 AdMob 时，我只是调用方法从主类中绘制它，如下所示：

```
a.runOnUiThread(new Runnable() {
public void run() {
    LinearLayout ll = new LinearLayout(a);
    ll.setPadding(0, 50, 0, 0);
    adView = new AdView(a, AdSize.BANNER,  "my_code");  
    AdRequest request = new AdRequest();
    adView.loadAd(request);
    adView.setVisibility(View.VISIBLE);

    ll.addView(adView);

    ll.draw(canvas);
} 
```

});

而且我没有收到任何错误，我设置了一些日志，并且我得到了它已绘制但没有出现在屏幕上的信息；我试图设置可见性等，但没有帮助。那么如何将我的添加放在前面或如何以其他方式绘制它？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:23:14.977

可能是您没有要展示的广告资源。看看你的 logcat 输出，Admob 说了什么。

# r - 如何更改 R heatmap.2 中 rowsidecolors 的位置

> ID：15660363
> 
> 赞同：1
> 
> 时间：2013-03-27T13:43:01.957
> 
> 标签：r, heatmap, gplots

使用包中的 R`heatmap.2`函数时`gplots`，可以传递参数`rowsidecolors`，然后将在树状图旁边插入一列，[**如下所示**](http://manuals.bioinformatics.ucr.edu/home/R_BioCondManual/hclust3.png)。我想知道是否可以将列重新定位到行标签旁边的热图的另一侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T18:53:23.860

阅读“help(heatmap.2)”，了解使用“RowSideColors”时 4 个绘图组件会发生什么。请参阅[R heatmap.2 中的移动颜色键（gplots 包的功能）](https://stackoverflow.com/questions/15351575/moving-color-key-in-r-heatmap-2-function-of-gplots-package)，以很好地解释如何控制它们的位置。

尝试这个：

```
heatmap.2 ( 
    matrix(rnorm(100), 10, 10),
    lmat=rbind(c(0,5,4,0,0), c(0,3,2,1,0)), 
    lhei=c(2,5),
    lwid=c(1,1,4,0.25,1),
    col=colorpanel(20, "blue", "black", "red"),
    key = F, trace = "none", scale = "row",
    RowSideColors = rainbow(10)
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-30T14:35:37.933

这与您将要达到的默认值差不多：

```
lmat=rbind(c(5,0,4), c(3,1,2))
lhei=c(1.5,4)
lwid=c(1.5,0.25,4) 
```

新编号为：

2.热图，

3\. 行树状图，

4\. 柱状图，

5\. 钥匙，

1.单杠

维护者应该保持相同的数字，只为单杠添加 5。但是，嘿，让我们让它变得更有趣:) 基本上他们把它放在一个“队列”LIFO 中。将水平条设置为 1 并将其他所有内容向下移动 1。

# android - Android - 将数字时钟设置为仅以 24 小时格式显示时间

> ID：15660364
> 
> 赞同：1
> 
> 时间：2013-03-27T13:43:08.573
> 
> 标签：android

我有下面的代码来显示数字时钟。本质上它工作正常，但我希望它只显示 24 小时格式，因此如果用户要在 24 小时或 12 小时格式之间更改设置中的格式，它不会影响我的应用程序中显示的时间。

```
 DigitalClock digital_clock_4inches = (DigitalClock)findViewById(R.id.bge_digital_clock_4inches);
digital_clock_4inches.setTypeface(bge_currentDateandTimeFont_4inches); 
```

我了解接管 DigitalClock 代码，如此处所示[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/DigitalClock.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/DigitalClock.java)是选项，如果是这种情况，代码会发生什么变化。

提前感谢您的帮助。

* * *

定时器：

```
 Timer timer = new Timer();
timer.schedule(new TimerTask() {
    @Override
    public void run() {

    }
},0,1000);//Update text every second 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:53:23.660

使用显示 24 小时格式时间的日历创建您自己的时钟。

```
Calendar c = Calendar.getInstance(); 
int seconds = c.get(Calendar.SECOND); 
int min= c.get(Calendar.MINUTE); 
int hour= c.get(Calendar.HOUR); 
if(c.get(Calendar.AM_PM))//if returns pm add 12 to hour
Textview.append(hour + ":" + min + ":" + seconds ); 
```

使用 Timer 类每秒更新一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-22T10:04:13.830

在计时器代码中，您应该更新 textviews 文本：

```
Timer timer = new Timer()
timer.schedule(new TimerTask() {

@Override
public void run() {
seconds++;
if(seconds == 60){
min+=1;
seconds = 0;}

if(min == 60){
hour+=1;
min = 0;}

if(hour == 24){
hour = 0;
}

Textview.append(hour + ":" + min + ":" + seconds );

}},0,1000);//Update text every second 
```

# mysql - 获取两个sql文件的区别

> ID：15660365
> 
> 赞同：0
> 
> 时间：2013-03-27T13:43:10.493
> 
> 标签：mysql, database, diff, mysqldump, dump

我想得到两个 sql 转储的区别。我必须将差异保存在一个新文件中。区别应该是合法查询！例如，如果我有一个包含以下内容的文件，

```
CREATE TABLE IF NOT EXISTS `newtable` (
  `name` int(11) NOT NULL AUTO_INCREMENT,
  `id` int(11) NOT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

INSERT INTO `newtable` (`name`, `id`) VALUES
(1, 2); 
```

和第二个文件，

```
CREATE TABLE IF NOT EXISTS `newtable` (
  `name` int(11) NOT NULL AUTO_INCREMENT,
  `id` int(11) NOT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

INSERT INTO `newtable` (`name`, `id`) VALUES
(1, 2),
(4, 5); 
```

然后我会得到，

```
INSERT INTO `newtable` (`name`, `id`) VALUES
(1, 2),
(4, 5); 
```

那么这怎么可能？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:54:30.833

这是一种方法，假设两个表都没有重复项：

```
select (case when max(src) = 1 then 'DELETED'
              else 'ADDED'
         end) as what, name, id
from ((select 1 as src, name, id
       from newtable1 t
      ) union all
      (select 2 as src, name, id
       from newtable2 t
      )
     ) t
group by name, id
having count(*) = 1 
```

这将返回该行是从一个表添加还是删除到另一个表。`insert`您可以使用语句将这些结果插入另一个表或任何地方。

# javascript - jquery.cascade-select.js 捕获 .cascade() 函数的成功事件？

> ID：15660369
> 
> 赞同：0
> 
> 时间：2013-03-27T13:43:19.327
> 
> 标签：javascript, jquery, ajax

在 javascript/jquery 中，我有两个下拉菜单和一个文本字段。在选择第一个下拉列表时，会填充第二个下拉列表。为此，我使用了`jquery.cascade-select.js`. 它工作正常。

我想要的是，**在级联功能成功**后，我需要设置文本字段的值。

我尝试在`$(document).ready()`函数中设置值，但它不能满足我的需求。

是否可以捕获`.cascade()`函数的成功事件？

# asp.net - 会话到期时关闭浏览器？网

> ID：15660372
> 
> 赞同：2
> 
> 时间：2013-03-27T13:43:38.673
> 
> 标签：asp.net, session, code-behind

我有一个 asp.net 网页，在会话到期之前有 60 秒的空闲时间窗口。有没有办法（通过 asp 或 c# 代码）**在 Session_End 事件中关闭****浏览器**- 或者最好只关闭选项卡？

 **我已经看到很多关于 SO 的帖子想要做相反的事情（在浏览器关闭时结束会话），但不是我需要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:53:53.833

您无法关闭浏览器，但可以通过执行以下操作重定向到“会话已过期”页面：

```
 protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);
        this.PageHead.Controls.Add(new LiteralControl(
            string.Format("<meta http-equiv='refresh' content='{0};url={1}'>", 
            Session.Timeout * 60, "SessionExpired.aspx")));
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:54:38.433

你可以看看这个例子 - [Alert Session Time out in ASP.NET](http://www.codeproject.com/Articles/227382/Alert-Session-Time-out-in-ASP-Net)

它基本上在超时之前警告用户（例如，美国银行网站）。一旦达到时间限制，将用户重定向到注销页面。

仅供参考：如果您在没有警告的情况下重定向或关闭页面，用户会生气。**

# php - MySQL 数据库和 PHP - 将行与文件匹配并附加扩展名

> ID：15660373
> 
> 赞同：0
> 
> 时间：2013-03-27T13:43:40.210
> 
> 标签：php, mysql, search, replace

我有以下问题：

我从我的上级那里接手了一个由他开发的 MS-SQL 数据库。可悲的是，数据库的发展状况非常糟糕。

我已经将数据库“转换”为 MySQL 并导入了数据。现在的问题是，有一个表“hotels”，其中包含名为“image1、image2、image3”等的行，直到 image24。我将它们从表中删除并创建了一个名为 hotel_images 的新表，其中图像被分配给一家酒店。现在描述我的问题：

导入的数据包含每个图像的字符串，例如“007593-20110809-145433-01”，但缺少扩展名。所有图像都放在同一个目录中（大约有 4000 个），并且只保存了字符串。

在将数据拉入网站时，我自己已经做了一个解决方法，我在网站上检查 file_exists，然后返回不同的扩展名（.BMP、.GIF、JPG 等），但我不喜欢这个解决方案。

我是否有可能使用图像文件夹检查单个表中可用的所有字符串，并在字符串匹配时向表中添加正确的扩展名？它一定是这样的

```
SELECT image from hotel_images (search for value in /images/) IF MATCH ALTER TABLE hotel_images set image = this + .extension 
```

我将不胜感激任何建议！

编辑：我刚刚注意到我可以从文件夹中对文本文件进行目录列表，然后将其与表中的每个字符串进行匹配，如果匹配则替换它 - 这是一个可能的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:54:45.783

您必须选择所有行（不带扩展名）

然后，在 PHP 中，对所有图像进行 foreach 以查找它们是否存在于文件夹中，获取它们的扩展名

然后使用现有文件名更新行，添加扩展名...

举个例子：

```
$images_query = mysql_query("SELECT id, image_name from hotel_images");

while($image = mysql_fetch_array($images_query)){
  if(file_exists($image["image_name"])){
    //Get extension
    $ext = "...";

    //Then update row with new name
    mysql_query("UPDATE hotel_images SET image_name = '" . $image["image_name"] . $ext ."' WHERE id = " . $image["id"]);

  }

} 
```

你在寻找类似的东西吗？

它没有经过测试的脚本，直接在 SO textarea 中进行；）

# java - 使用 Java 更新 Mysql 表行

> ID：15660374
> 
> 赞同：0
> 
> 时间：2013-03-27T13:43:41.353
> 
> 标签：java, mysql, jdbc

当我尝试更新如下表记录时出现错误

方法 - 1：

```
String jsonText = "{"id":100,"nickname":"yash","name":"Rahul"}"
Statement st3 = con.createStatement();
st3.executeUpdate("UPDATE comment SET c_wt ="+c_newwt+",c_Jsonwt ="+jsonText+" WHERE c_id="+c_id); 
```

而且，当我这样做时，它会更新

方法 - 2：

```
Statement st3 = con.createStatement();
st3.executeUpdate("UPDATE comment SET c_wt ="+c_newwt+",c_Jsonwt ="+"'{"id":100,"nickname":"yash","name":"Rahul"}'"+" WHERE c_id="+c_id); 
```

我需要使用方法 1 更新表格。有人可以解决我的问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:45:53.913

您没有在 SQL 中包含带有“”的 JSON，请使用以下内容。您还需要转义 JSON 中的 " 标记并在 String 声明中添加分号

```
String jsonText = "{\"id\":100,\"nickname\":\"yash\",\"name\":\"Rahul\"}";
Statement st3 = con.createStatement();
st3.executeUpdate("UPDATE comment SET c_wt ="+c_newwt+",c_Jsonwt ='"+jsonText+"' WHERE c_id="+c_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:46:17.600

有一些缺失的引号：`'"+jsonText+"'`

```
st3.executeUpdate("UPDATE comment SET c_wt ="+c_newwt+",c_Jsonwt ='"+jsonText+"' WHERE c_id="+c_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:48:18.847

I would suggest something like

```
String jsonText = "{\"id\":100,\"nickname\":\"yash\",\"name\":\"Rahul\"}";
Statement st3 = con.createStatement();
st3.executeUpdate("UPDATE comment SET c_wt ="+c_newwt+",c_Jsonwt =\""+jsonText+"\" WHERE c_id="+c_id); 
```

It looks like a lot of quotes need escaping.

# javascript - 编译 RequireJS 以移除 AMD 依赖

> ID：15660380
> 
> 赞同：8
> 
> 时间：2013-03-27T13:43:57.210
> 
> 标签：javascript, optimization, requirejs, concatenation, amd

我在开发中使用 RequireJS 来管理我的依赖项，但在生产中我想删除对 AMD 加载程序的所有依赖项。看起来 RequireJS 优化器创建了一个在运行时仍然使用 AMD 负载的文件 - 我只是希望拥有一个静态（非 AMD 依赖，但仍然与 AMD 兼容）文件，例如 jquery 生成的文件（通过查看 jquery源，看来他们在他们的 grunt 文件中手动排序了他们的依赖项）。这可能吗？

我也愿意使用 RequireJS 以外的其他库。

注意：这类似于我的另一个问题[Javascript requirejs in development but compiled in production](https://stackoverflow.com/questions/14325554/javascript-requirejs-in-development-but-compiled-in-production)，但在这种情况下，我想一起删除 AMD。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T11:24:57.560

如果您想通过`<script>`标签或 AMD 加载您的脚本，那么您可能需要根据[我的 EventEmitter 类如何公开其 self](https://github.com/Wolfy87/EventEmitter/blob/ae0c5099bd8f08a61f70a0ebc39b32a2ce52ddb0/EventEmitter.js#L425-L436)来使用某些东西。

```
// Expose the class either via AMD, CommonJS or the global object
if (typeof define === 'function' && define.amd) {
    define(function () {
        return EventEmitter;
    });
}
else if (typeof module !== 'undefined' && module.exports){
    module.exports = EventEmitter;
}
else {
    this.EventEmitter = EventEmitter;
} 
```

这通过 AMD、CommonJS（节点）和全局对象（即`window`）公开对象。这有一个主要警告，它适用于只想通过 AMD 公开其类的单文件脚本。

如果你有很多模块，那么你可能想先用[r.js编译脚本，用](http://requirejs.org/docs/optimization.html)[Almond](https://github.com/jrburke/almond)填充 AMD，然后使用类似上面的东西以上面的多种方式公开它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-21T12:36:18.063

我和你有同样的问题。

最后我解决了这个问题，我创建了一个 requireJS 项目的基本结构和一个执行自动化的 Gruntfile。

1.  少处理
2.  优化requireJS。
3.  去除 AMD
4.  将 HTML 中的 scripts 标签从 require 语法替换为 script 标签 sintax。

我希望这可以帮助你。

[https://github.com/sheldorn/require-base-structure](https://github.com/sheldorn/require-base-structure)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-02T22:01:57.013

[https://github.com/kodmax/grunt-stonejs](https://github.com/kodmax/grunt-stonejs)就是答案。将基于 requirejs 的项目编译为 JS Stone。基本为零开销。

# cassandra - 在 Cassandra 数据库中，在 CQL 中创建的表在 CLI 中看不到？

> ID：15660383
> 
> 赞同：1
> 
> 时间：2013-03-27T13:44:00.113
> 
> 标签：cassandra, command-line-interface, cql

在 Cassandra 数据库中，在 CQL 中创建的表在同一列族的 CLI 中看不到，是否有相同的参考原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:15:53.853

这是因为使用两种不同的协议来创建列族。您正在使用 CQL 二进制协议创建“表”，然后您尝试使用 THRIFT 界面（通过 CLI）对其进行编辑，这是不允许的。来自 Cassandra 首席技术官：

> 这是设计使然。CLI 和基于 Thrift 的消费者通常不知道如何理解 CQL3 元数据，并且会在没有意识到的情况下做错事。

[您可以在此处](https://issues.apache.org/jira/browse/CASSANDRA-5246)找到记录在案的“问题” 。

如果您想访问您创建的表中的数据，可以使用[cqlsh](http://www.datastax.com/docs/1.1/dml/using_cql#using-cql)。

# clojure - 如何在clojure中使用quil查找图像的宽度和高度

> ID：15660387
> 
> 赞同：1
> 
> 时间：2013-03-27T13:44:10.777
> 
> 标签：clojure, processing, quil

我试图在 clojure 中找到加载图像的宽度。在处理过程中，我会这样做，

```
 PImage img=loadImage("image.jpg");
    int x=img.width;
    int y=img.height; 
```

我试图在clojure中做同样的事情，但它不起作用

```
 (defn loadwebimg []
     (let [filelst (map (fn [f] (.getName f)) (.listFiles (File. (str datadir))))
           imgf (first (shuffle filelst))
           webimg (load-image (str datadir imgf))
           ]
      (image webimg 0 0) 
      (println webimg.height)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T21:02:36.413

如果 webimg 是一个对象，那么您将使用`.`特殊表单来读取其字段，就像您在其上方使用的文件对象一样。

正如 user100464 指出的那样：

```
(println webimg.height) 
```

会成为

```
(println (. webimg height) 
```

或者

```
(println (.height webimg)) 
```

# sql - openquery：数据格式

> ID：15660394
> 
> 赞同：0
> 
> 时间：2013-03-27T13:44:26.843
> 
> 标签：sql, oracle, openquery

我正在尝试通过 SQL 服务器从 Oracle 检索数据，因此我正在使用 openquery，并且能够以这种方式获取日期间隔：

```
SELECT
  *
FROM OPENQUERY(DATABASE, 
     'SELECT * FROM ORACLE.TABLE
      WHERE CREATEDATE between {d ''2013-03-23''} and {d ''2013-03-27''} ') 
```

我怎样才能做类似的查询，但日期间隔将是`yyyy-mm-dd hh:mm:ss`格式并保留`openquery`？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:46:00.587

您可以在`openquery`语句中进行从日期到字符串的转换：

```
select to_char(<datecol>, 'YYYY-MM-DD hh:mi:ss') . . . 
```

或者，您可以`convert()`在 SQL Server 中使用并在外部`select`.

# c++ - 提升::变体；定义访客类别

> ID：15660395
> 
> 赞同：0
> 
> 时间：2013-03-27T13:44:29.527
> 
> 标签：c++, visitor-pattern, boost-variant

在 Java 中，我可以在不指定类型的情况下定义泛型类的变量。

```
class Tree<T extends Comparable<? super T>> {}
somewhere-else: Tree tree; 
```

然后我可以从文件中读取一些对象并将其类型转换为我想要的类类型。

```
tree = (Tree<String>) some object; 
```

我`boost::variant`已经开始了一个变体定义。

```
typedef boost::variant<Tree<std::string>, Tree<int>> TreeVariant; TreeVariant tree; 
```

我知道我需要指定 a`visitor class`但从[这个示例](http://www.boost.org/doc/libs/1_53_0/doc/html/variant.html#variant.motivation.solution)中不清楚如何定义它以便我能够分配给我的`tree`变量`Tree<std::string>`or `Tree<int>`。

然后我想从那里继续使用变量调用 Tree 的成员函数`tree`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:55:59.930

无需创建访问者来为`boost::variant`. 如本教程的[基本用法](http://www.boost.org/doc/libs/1_53_0/doc/html/variant/tutorial.html#variant.tutorial.basic)部分所示，您只需分配值：

```
TreeVariant tree;
Tree<std::string> stringTree;
Tree<int> intTree;
tree = stringTree;
tree = intTree; 
```

至于调用成员函数，您应该使用访问者：

```
class TreeVisitor : public boost::static_visitor<>
{
public:
  void operator()(Tree<std::string>& tree) const
  {
    // Do something with the string tree
  }

  void operator()(Tree<int>& tree) const
  {
    // Do something with the int tree
  }
};

boost::apply_visitor(TreeVisitor(), tree); 
```

您还可以从 a 返回值`static_visitor`，如下所示：

```
class TreeVisitor : public boost::static_visitor<bool>
{
public:
  bool operator()(Tree<std::string>& tree) const
  {
    // Do something with the string tree
    return true;
  }

  bool operator()(Tree<int>& tree) const
  {
    // Do something with the int tree
    return false;
  }
};

bool result = boost::apply_visitor(TreeVisitor(), tree); 
```

# objective-c - 在 AppCode 中复制警告消息

> ID：15660396
> 
> 赞同：0
> 
> 时间：2013-03-27T13:44:33.643
> 
> 标签：objective-c, appcode

我正在尝试用于 Objective-C 开发的[新 AppCode 2.0 。](http://www.jetbrains.com/objc/)
如果我悬停它指示有问题的代码，它会在我不知道 Xcode 的气泡中向我显示警告。

如何将此消息复制到剪贴板以进行谷歌搜索？

[请注意，我不想要关于警告本身的信息，只是关于如何复制它，所以请不要添加我应该粘贴一些代码的评论。]

* * *

其实我只是找到了一个方法：如果出现气泡，你需要用光标指向它，这很困难，因为你必须通过箭头输入它指向有问题的代码。而不是您必须通过不将打印在气泡内的文本指向消息的开头。通过拖动到倒数第二个字符，您可以标记文本并复制它，同时仍然按住鼠标键。但是，如果您还尝试标记最后一个字符，它将失败。

所以现在的问题是：如何更容易地执行警告消息的复制？

* * *

好的，对于我们中间更好奇的人：

AppCode 对该行产生警告

```
 self.descriptionLabelSize = [description sizeWithFont:[UIFont fontWithName:@"Helvetica" size:17] constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap]; 
```

它说`UILineBreakModeWordWrap`：

> 参数类型不匹配：不兼容的枚举类型“NSLineBreakMode”和“匿名枚举”

我很确定我们都同意 Xcode 的这一行是正确的。我只是想用谷歌搜索一下，如果我找不到任何东西，请向 AppCode 团队报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:05:35.377

有一种方法可以复制警告消息：以批处理模式对当前文件运行检查：代码 | 检查代码并选择当前文件范围。然后在下面的检查视图中找到您的警告（这个将在“类型检查”下）。顺便说一句，你不应该使用“UILineBreakModeWordWrap”——它自 iOS 6.0 以来已被弃用（AppCode 应该警告你）。如果你使用 NSLineBreakByWordWrapping，警告就会消失。

# javascript - 了解 jQueryUI 事件

> ID：15660402
> 
> 赞同：1
> 
> 时间：2013-03-27T13:44:46.907
> 
> 标签：javascript, jquery, jquery-ui

我试图更好地理解 jQueryUI 插件的事件，例如[http://api.jqueryui.com/autocomplete/](http://api.jqueryui.com/autocomplete/)。

例如，我有 select( event, ui ) 事件。根据文档，这两位代码似乎是相同的。正确的？

```
$( ".selector" ).autocomplete({
  select: function( event, ui ) {}
});

( ".selector" ).on( "autocompleteselect", function( event, ui ) {} ); 
```

好的，我想两者都将“autocompleteselect”事件的事件处理函数附加到所选元素。该文档还将“选择”事件的“类型”显示为“自动完成选择”。但我认为事件名称是“选择”。是“选择”还是“自动完成选择”？请注意，我首先尝试浏览 jQueryUI 源代码，但从未使用过字符串“autocompleteselect”。“自动完成选择”在哪里定义？

我的下一个困惑来源是当我将代码放入与事件关联的匿名函数中时。此代码是否总是首先执行，然后是与偶数执行相关的任何其他默认插件代码？还会`event.preventDefault();`阻止默认行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:50:06.703

这是小部件工厂添加的功能。当使用[_trigger](http://api.jqueryui.com/jQuery.widget/#method-_trigger)触发事件时，它实际上会触发类型为 的事件`widget name + type`。

例如：如果您正在创建一个带有名称的小部件`mywidget`并在小部件中触发一个事件，就像`this._trigger('select')`实际触发的事件将是`mywidgetselect`.

因此，如果您查看`autocomplete`源代码，您会发现`this._trigger( "select", ...)`那里使用了它。

您还可以参考[此博客](http://www.erichynds.com/jquery/tips-for-developing-jquery-ui-widgets/)了解更多详细信息

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-27T14:07:40.270

这两件事并不完全相同。他们只是做同样的事情;-)嗯，差不多。

首先，我需要解释一点理论：通常，在处理“异步”代码时，您有两种选择：回调和事件侦听器。**回调**是一个函数，由系统调用，在某些其他操作完成后。通常，您配置对象或运行一个函数并“启动”回调以在发生事情时启动。事件发生时系统调用**事件侦听器。**通常，您将一堆事件侦听器绑定到事件，并且代码的其他部分可能会触发事件，从而触发所有侦听器函数。

当您不习惯事件和回调时，您可能看不到区别。只要知道使用回调会导致代码紧凑“意大利面条”，另一方面，使用侦听器会导致灵活但难以阅读的代码。我相信最好的方法是将两者结合起来以获得尽可能可读的代码。

在您的特定情况下，“select”是配置对象的一个​​属性，它指定一个回调函数。

“autocompleteselect”是事件的名称 - 您可以向该事件添加侦听器

```
$('.selector').on('autocompleteselect', doSomething); 
```

或自己触发事件

```
$('.selector').trigger('autocompleteselect'); 
```

# drop-down-menu - 为 PayPal 第三方购物车中的下拉菜单分配值

> ID：15660405
> 
> 赞同：0
> 
> 时间：2013-03-27T13:44:53.467
> 
> 标签：drop-down-menu, paypal

我正在尝试在第三方网站上实施 PayPal 购物车。首先要求客户从下拉菜单中选择产品（“产品”），然后（可选）在文本字段中输入特定金额（“附加成本”）。这两个值最终都应在提交时发送到 PayPal。

虽然一切都适用于两个文本字段，其中`amount_1`明确`amount_2`定义，但我很难为下拉选项分配不同的值（/数量，例如 10.00 和 5.00），并使所选选项的值成为我的值`amount_1`。这是我到目前为止发现的代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_cart">
  <input type="hidden" name="business" value="whatever@gmail.com">
  <input type="hidden" name="upload" value="1">

  <input type="hidden" name="item_name_1" value="Product">
  <input type="hidden" name="on0_1" value="Product">
  <select name="os0_1">
    <option value="product1">Product 1</option>
    <option value="product2">Product 2</option>
  </select>

  <input type="hidden" name="item_name_2" value="Additional Costs">
  <input type="text" name="amount_2" value="0.00">GBP
  <br>
  <br>

  <input type="hidden" name="currency_code" value="GBP">
  <input type="image" src="http://www.paypal.com/en_US/i/btn/x-click-but01.gif" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form>
```

`option_select`并且`option_amount`似乎不适用于这种形式。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:00:13.247

我假设这是用于选择产品的选择框`amount_1`：

```
<select name="os0_1">
    <option value="product1">Product 1</option>
    <option value="product2">Product 2</option>
</select> 
```

你需要做的是：

```
<input type="hidden" name="item_name_1" value="Product" id="item_name_1">
<select name="amount_1" onchange="changeProductName()" id="amount_1">
    <option value="5.00">Product that is a fiver</option>
    <option value="10.00">Product that is a tenner</option>
</select>

<script>
    function changeProductName() {
        var e = document.getElementById('amount_1');
        var h = document.getElementById('item_name_1');

        h.value = e.options[e.selectedIndex].text;
    }
</script> 
```

这将改变`item_name_1`价格选项的友好值。

# json - Highcharts jQuery.parseJSON 与系列

> ID：15660410
> 
> 赞同：0
> 
> 时间：2013-03-27T13:45:17.143
> 
> 标签：json, highcharts

我正在尝试在我的系列中使用我的 JSON 数据，但没有运气。谁能告诉我我做错了什么？

JSON代码如下：

```
[{"name":"In1","data":[4.1,25,22.3,2.7,5.2,3.9,6,4.6999999999999,25.3,16.5,4.4,5.5,5.3,5,3.8000000000001,27,19.7,3.3000000000001,4.5,5.3,6.6,5.7,29.3,26.9,3.8,3.8,5.5999999999999,5.7]},{"name":"In2","data":[10.2,0,0,8.3,9.2,8.3,9.6,10.5,0,0,7,8.3,8.3000000000001,9.9,9.6999999999999,0,0,8.9000000000001,12.9,9.9,10.7,8.5,0,0,9.8,9.6,10.5,8.5]},{"name":"Out1","data":[0,1.76,0.02,0,0,0,0,0,2.56,1.49,0,0,0,0,0,0,0.13,0,0,0,0,0,0.0099999999999998,0,0,0,0,0]},{"name":"Out2","data":[0.009999999999998,0,0,3.84,1.89,2.59,2.21,2.45,0,0,3.93,3.31,0.98,0,0.07,0,0,1.22,0,0.42,1.48,0.48,0,0,0,0.19,0.010000000000005,0.54]}] 
```

我使用如下代码：

var data = jQuery.parseJSON(' '); 文档.写（数据）；$（函数（）{

```
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y +'°C';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: data.name[0],
            data: data.data[0]
                }, {
            name: data.name[1],
            data: data.data[1]
                }]
    });
}); 
```

});

谁能告诉我为什么没有显示图表，当我使用：name：data.name[0]，data：data.data[0]}，{name：data.name[1]，data：data.data[1 ] 当我在我的系列中使用“数据”时，一切顺利吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:55:08.790

您应该使用 data[0].name 和 data[0].data。

```
series: [{
        name: data[0].name,
        data: data[0].data
            }, {
        name: data[1].name,
        data: data[1].data
            }] 
```

此外，看起来您的数据已正确格式化为系列数组。如果你想把它全部绘制出来，你应该能够做到：

```
series: data 
```

# c++ - VS2012 预编译头文件：我的 .h 文件如何知道 stdafx.h 中的包含？

> ID：15660412
> 
> 赞同：1
> 
> 时间：2013-03-27T13:45:22.370
> 
> 标签：c++, precompiled-headers

我在 VS2012 中有一个使用预编译头文件的非常基本的项目。我知道我应该将所有“常见”包含添加到 stdafx.h 并且我需要将其包含在每个 .cpp 文件中。因此，基本设置如下所示：

富.h：

```
#ifndef FOO_H
#define FOO_H

class Foo {

public:
    Foo();
    ~Foo();

    void do(string str);
};
#endif 
```

Foo.c：

```
#include "stdafx.h"
#include "Foo.h"

void Foo::do(string str) {} 
```

在 stdafx.h 中：

```
#include <string>
using namespace std; 
```

如果没有预编译的头文件，我会放入`#include <string>`foo.h，因为它必须知道`string`. `string`但是这个 foo.h在这个设置中是怎么知道的呢？（请注意，stdafx.h 仅包含在 .cpp 文件中）。

注意：我有一个使用预编译头文件的工作示例；问题是它是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:47:38.743

这是因为编译器按照它们在主编译单元中出现的顺序处理头文件。

因为`.cpp`文件包含`<string>`（间接通过`"stdafx.h"`），`<string>`所以编译器知道其中的内容，并且可以被后面的代码使用，甚至是从头文件中提取的代码。

但是它很脆弱，因为在没有首先包含的情况下包含头文件`<string>`会导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:54:45.583

您可以将预编译的标头视为头文件的一种缓存。编译器在第一次遇到一组头文件时（通常在编译 stdafx.cpp 时）对其进行分析，编译它们，然后为任何需要它们的模块准备好结果。

# c++ - 如何为虚拟和虚拟纯方法使用不同的颜色？

> ID：15660413
> 
> 赞同：0
> 
> 时间：2013-03-27T13:45:23.807
> 
> 标签：c++, vim

我正在尝试为虚拟和纯虚拟方法获得不同的颜色，就像这样

```
syn region   cppVirtualPureMethod   start="virtual" end="= 0;"
syn region   cppVirtualMethod   start="virtual" end="[;{]" 
```

不幸的是，仅使用开始标识符执行选择，因此无法消除两种情况之间的歧义。是否有一些 vim 技巧来获得我需要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:13:34.430

正如您已经发现的那样，`:syn region`只考虑`start=`匹配的部分。您必须使用`:syn match`（可能使用跨行匹配的昂贵正则表达式）来包含区分端。

一般来说（考虑到您[事先尝试过类似](https://stackoverflow.com/questions/15523282/starting-a-syn-region-with-a-keyword)的事情），在 Vim 中很难做到如此精细的突出显示，Vim 的语法解析是为广泛的适用性和 80/20 正确性而设计的，而不是精确的语法表示。如果您真的需要以不同的视觉风格显示如此细微的细微差别（尤其是对于语法*非常*复杂的 C++），我宁愿使用带有适当解析器的 IDE 来处理完整的语言。

# java - textarea 到 servlet

> ID：15660420
> 
> 赞同：0
> 
> 时间：2013-03-27T13:45:33.147
> 
> 标签：java, jsp, textarea

我的jsp文件中有这段代码

```
<%  
//Instantiate MetaMap and bring the output words
coding_sugest csug=new coding_sugest();
//Get the value from the textarea
if (request.getParameter("phy_exam")==null){
    response.sendRedirect("index.html");
}

String x_value=request.getParameter("phy_exam");
csug.setPhy_exam(x_value);
out.println("<h3>"+x_value+"</h3>");
//Call to bring the list of positive words
List<String> word_suggestions=(csug.positive_words());
Iterator<String> it = word_suggestions.iterator();
//Print the list values to a textarea
out.println("<textarea name='suggest_list' rows='10' id='word_suggest'>");
        while(it.hasNext()){
            out.println(it.next());
        }
out.println("</textarea>");
%> 
```

通过这种方式，我调用我的类，然后调用该类的一个方法，为我带来一些文本值以将它们填充到`<textarea>`. 我希望用户对其进行修改，`<textarea>`然后使用这些新文本值创建一个新列表，以便我可以使用数据库中的新值进行查询。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:50:53.860

您应该在`jsp`文件中使用`<form>`. 此外，您应该为您的表单添加一个提交按钮。这个表单应该被转发到一个`java servlet`“servlet”中，你应该将用户输入添加到数据库中。

如果您有任何问题，请告诉我。

# jackrabbit - Sling vs CMIS 作为 Apache jackrabbit 的 REST 接口

> ID：15660421
> 
> 赞同：4
> 
> 时间：2013-03-27T13:45:36.937
> 
> 标签：jackrabbit, jcr, cmis, sling, apache-chemistry

如果我明白了，Apache Sling 会为 Jackrabbit JCR 存储库充当 REST CRUD 接口。

由于已经存在一个 RESTful 协议（其 AtomPub 实现中的 CMIS）与 JCR 存储库一起工作，除了视图/模板层，使用 Apache Sling 与 CMIS（即通过 Apache Chemistry）有什么优势吗？

使用 CMIS 不支持的 JCR (Sling) 有什么可以做的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:39:07.697

这两种协议的一些特征可能会帮助您选择使用其中的一种。

**管理信息系统**

最初是作为跨不同（文档）内容存储库联合内容的一种手段，其核心业务是让不同的内容存储库通过 Web 界面（REST / WS）相互通信。虽然该协议的最新版本通过基于 JSON 的浏览器绑定改进了浏览器对内容的操作，但 CMIS 经常显示为一个有点闲聊的协议，并不总是在内容交付方面大放异彩。

优点：标准，由众多供应商支持，支持稍微丰富的数据模型（Renditions、Policies）

缺点：如果使用 AtomPub 或 WS 绑定，则需要大量 XML 解析，无法创建自定义服务 API

**吊索**

我不是这方面的专家，但据我所知，它是 JCR 之上的一个轻量级、可扩展的 HTTP 层。数据处理逻辑与您通过 HTTP 作为组件请求的内容相关联，使您能够在交付之前处理并最终优化内容。

优点：在内容检索之上添加了一个数据处理层，在纯 HTTP 上工作，没有复杂的有效负载来描述每个操作

缺点：非标准，无法轻松交换内容存储库

# .htaccess - .htaccess 删除 GET 值之一并重定向

> ID：15660425
> 
> 赞同：3
> 
> 时间：2013-03-27T13:45:50.320
> 
> 标签：.htaccess

url: [http://www.side.com/en/page-1/](http://www.side.com/en/page-1/) 我需要重定向到[http://www.side.com/page-1/](http://www.side.com/page-1/)

如何使用 .htaccess 文件执行此操作，可能调用 php 文件并解析字符串（URI）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:53:11.713

你可以用一个简单的规则来做到这一点：

```
RewriteEngine On
RewriteRule ^.*?/(.*)$ /$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:59:08.077

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^en/(.*)$ /$1 [L,R=301,NC] 
```

# javascript - Jquery在动态生成的表上总计行

> ID：15660429
> 
> 赞同：0
> 
> 时间：2013-03-27T13:46:01.717
> 
> 标签：javascript, jquery, dynamic, sum

我有一些代码可以在将数据插入现有行时附加新的表行。

[您可以在此处](http://www.isikhulu.co.za/testapp/)查看正在运行的代码。

输入产品时，新行将附加到具有唯一输入名称的表中。

然后要求用户输入价格和数量。

我想要的是两步计算。在输入框 Total 中，我想要该`price * qty`特定行的总和。其次，我希望 div`grandtotal`显示所有输入框的总和，所有输入框都是动态的，以用户插入的行数为准。

通常我只会使用：

```
function fill() {
    var txt8 = document.getElementById("TextBox8").value;
    var txt9 = document.getElementById("TextBox9").value;
    document.getElementById("TextBox10").value = txt8 + txt9;
} 
```

但这是一个静态的静态表，其中名称和 ID 是已知的。如何使这项工作适用于动态生成的表？

抱歉，我忘了给你小提琴链接：http: [//jsfiddle.net/yUfhL/230/](http://jsfiddle.net/yUfhL/230/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:48:57.737

To get all inputs that have an ID that starts with `linetotal`, you could write the following in jQuery:

```
$('input[id^=linetotal]') 
```

Now, to calculate the total, just iterate over the collection:

```
var total = 0;
$('input[id^=linetotal]').each(function() { 
    total += parseInt(this.value, 10) || 0; 
}); 
```

Your output, then:

```
$('#grandtotal').text(total); 
```

**Edit**

To first calculate the line totals for every line, you could iterate through them like so:

```
$('table.order-list tr').each(function() {
   var price = parseInt( $('input[name=price]', this).val(), 10 );
   var qty   = parseInt( $('input[name=qty]'  , this).val(), 10 );
   $('input[id^=linetotal]', this).val(price * qty);
}); 
```

Of course, you wouldn't have to iterate over all rows at all times. At the change event, you're only interested in the current row, which is accessible by `$(this).closest('tr')`

# android - 从非 root 设备获取存储的 Wi-Fi 密码

> ID：15660438
> 
> 赞同：0
> 
> 时间：2013-03-27T13:46:29.943
> 
> 标签：android, passwords, wifi

有没有办法从没有root的设备中获取存储的wifi密码？我将在我们的应用程序中提供备份和共享选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T10:46:41.310

对于未使用系统密钥签名的 APK，不支持读取/写入 WiFi 密码的 API。所以你将无法检索它。

# mysql - 格式化 MySQL 查询：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册

> ID：15660441
> 
> 赞同：0
> 
> 时间：2013-03-27T13:46:35.197
> 
> 标签：mysql

在阅读了许多类似的线程后，我在这里发帖，但这并不能解决我的问题，所以我需要 MySQL 专家来帮助我确定这个查询有什么问题：

查询如下所示：

```
SELECT DISTINCT(p.ID), p.*, pm.*, t.*, tt.*, tr.* 
FROM wp_posts p, wp_postmeta pm, wp_terms as t, wp_term_taxonomy as tt, wp_term_relationships as tr 
'WHERE p.ID = pm.post_id 
AND t.term_id = tt.term_id 
AND tt.taxonomy = wpsc_product_category 
AND tt.term_taxonomy_id = tr.term_taxonomy_id 
AND tr.object_id = p.ID 
AND p.post_type = wpsc-product 
AND pm.meta_key != _wpsc_price 
AND (p.post_title LIKE '%'\"some string to search\"'%' 
     OR p.post_content LIKE '%'\"some string to search\"'%' 
     OR pm.meta_value = '\"some string to search\"' 
     OR t.name LIKE '%'\"some string to search\"'%') 
GROUP BY p.ID ORDER By p.ID ' 
```

我不知道查询格式有什么问题得到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''WHERE p.ID = pm.post_id AND t.term_id = tt.term_id AND tt.taxonomy = wpsc_produ' at line 1 
```

在我的查询中，我需要整合字符串，而我现在更改为 PDO 为时已晚。我该如何解决这个错误？

PS：我在本地服务器上运行，所以 php info 向我显示了有关 MySQL 服务器的信息，我猜它是版本：

```
Client API version  5.5.29 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:48:17.350

You don't need quote marks around the WHERE clause.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:48:25.440

According to the error message, you have an extra single quote before the `WHERE` clause.

As a sidenote, `DISTINCT` keyword will be more likely to be useless because it will only work if all values in all columns are equal on both row otherwise the row is unique even if they have the same value.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:58:00.210

您应该始终在查询中保持相同的约定，以使其更具可读性并且不太可能出错。

这不会影响结果，但如果您使用别名“wp_posts p”或“wp_posts AS p”是等效的，但您在此查询中混合使用。我为您制定了相同的约定，并在下面修复了您的查询。

```
SELECT DISTINCT(p.ID), p.*, pm.*, t.*, tt.*, tr.* 
FROM wp_posts p, wp_postmeta pm, wp_terms t, wp_term_taxonomy tt, wp_term_relationships tr 
WHERE p.ID = pm.post_id 
AND t.term_id = tt.term_id 
AND tt.taxonomy = wpsc_product_category 
AND tt.term_taxonomy_id = tr.term_taxonomy_id 
AND tr.object_id = p.ID 
AND p.post_type = wpsc-product 
AND pm.meta_key != _wpsc_price 
AND (p.post_title LIKE "%some string to search%" 
     OR p.post_content LIKE "%some string to search%" 
     OR pm.meta_value = "some string to search" 
     OR t.name LIKE "%some string to search%") 
GROUP BY p.ID ORDER By p.ID 
```

# php - 在 PHP 中将数组转换为简单的 1 级数组

> ID：15660442
> 
> 赞同：3
> 
> 时间：2013-03-27T13:46:36.587
> 
> 标签：php, arrays

一个简单的事情，但我忘了如何转换

```
Array
(
    [0] => Array
        (
            [hashcode] => 952316176c1266c7ef1674e790375419
        )

    [1] => Array
        (
            [hashcode] => 5b821a14c98302ac40de3bdd77a37ceq
        )

) 
```

进入这个：

```
Array (952316176c1266c7ef1674e790375419, 5b821a14c98302ac40de3bdd77a37ceq) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:51:13.893

我知道这还为时过早，但由于这即将到来，我想我把它扔在那里。从（尚未发布的）PHP 5.5 开始，您可以使用[`array_column()`](http://benramsey.com/blog/2013/03/introducing-array-column-in-php-5-dot-5/)：

```
 $hashcodes = array_column($array, 'hashcode'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T13:48:11.670

尝试这个 ：

```
$array  = array(array("test"=>"xcxccx"),array("test"=>"sdfsdfds"));

$result = call_user_func_array('array_merge', array_map("array_values",$array));

echo "<pre>";
print_r($result); 
```

输出：

```
Array
(
    [0] => xcxccx
    [1] => sdfsdfds
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:52:28.097

一个好的ol'循环解决了:)

```
<?php

$array = array(
    array( 'hashcode' => 'hash' ),  
    array( 'hashcode' => 'hash2' ), 
);

$flat = array();

foreach ( $array as $arr ) {
    $flat[] = $arr['hashcode'];
}

echo "<pre>";

print_r( $flat );

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:54:42.383

```
$source = array(
    array(
        'hashcode' => '952316176c1266c7ef1674e790375419'
    ),
    array(
        'hashcode' => '5b821a14c98302ac40de3bdd77a37ceq'
    )
);

$result = array();
array_walk($source, function($element) use(&$result){
    $result[] = $element['hashcode'];
});

echo '<pre>';
var_dump($result); 
```

# mongodb - 如何在 mongodb 中对嵌入式文档进行查找和修改？

> ID：15660447
> 
> 赞同：1
> 
> 时间：2013-03-27T13:46:43.050
> 
> 标签：mongodb

我似乎无法让它工作。在这种情况下，是否有更好的可能性或选项而不是 findandmodify？

```
db.runCommand(
                {
                  findAndModify: "articles",
                  query: {"comments._id": ObjectId("515221650be1684cb9000002")},
                  new: true,
                  update: {"$push":{"comments.votes.up":"511cff226d6e0d1f20000001"}, "$inc":{"comments.votes.count":1, "comments.votes.up_count":1, "comments.votes.point":1}}
                }
             ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:52:00.177

评论是子文档集合吗？如果是，那么您是否缺少 $ 符号。喜欢评论。$.votes.up。试试这个。它会工作

```
 db.runCommand(
            {
              findAndModify: "articles",
              query: {"comments._id": ObjectId("515221650be1684cb9000002")},
              new: true,
              update: {"$push":{"comments.$.votes.up":"511cff226d6e0d1f20000001"}, "$inc":{"comments.$.votes.count":1, "comments.$.votes.up_count":1, "comments.$.votes.point":1}}
            }
         ) 
```

# c# - control.select() 和通过鼠标左键单击选择控件有什么区别？

> ID：15660449
> 
> 赞同：0
> 
> 时间：2013-03-27T13:46:48.597
> 
> 标签：c#, datagridview

我知道我可以选择控件使用`control.Select();`，也可以使用鼠标左键单击控件来选择控件。但我不明白的是，当我选择`DataGridView`使用时，`datagridview.Select();`我不能使用任何事件，`DataGridView`但是当我`DataGridView`通过鼠标左键单击选择时，我可以使用事件`DataGridView`。

我试过了`control.Focus();` ，`ActiveControl`但它也没有响应事件。什么不见​​了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:58:34.290

要以编程方式调用事件，请使用如下代码：

```
YourMethodName(TheControlName, null); 
```

例如在这种情况下，您应该使用：

```
datagridview_KeyUp( datagridview, null); //or whatever the name of your method and control, just replace it 
```

# r - quantmod periodReturn 函数 - 如何处理 NA 值？

> ID：15660451
> 
> 赞同：2
> 
> 时间：2013-03-27T13:47:02.757
> 
> 标签：r, xts, quantmod

我正在使用 quantmod 函数 periodReturn，它为具有可用值的列产生正确的结果。

这是功能：`periodReturn(timeseries, period='weekly', type='log')`

这是输入：

```
 dax_data.csv nikkei_data.csv spx_data.csv
1990-01-04 01:00:00           NA           38713           NA
1990-01-05 01:00:00           NA           38275           NA
1990-01-08 01:00:00           NA           38295           NA
1990-01-09 01:00:00           NA           37951           NA
1990-01-10 01:00:00           NA           37697           NA
1990-01-11 01:00:00           NA           38170           NA 
```

这是输出：

```
 weekly.returns
1999-11-26 01:00:00             NA
1999-12-03 01:00:00    0.026679863
1999-12-10 01:00:00   -0.003482017
1999-12-17 01:00:00    0.041124348
1999-12-22 01:00:00    0.021583488
1999-12-30 01:00:00    0.069259912 
```

我想使用所有三列（ldo）。

我如何告诉 periodReturn 仅 NA 所有没有数据的行并在一个存在时立即开始？

以下是`dput`使此可重现的数据：

```
dput(head(timeseries)) 
structure(c(NA, NA, NA, NA, NA, NA, 38713, 38275, 38295, 37951, 
37697, 38170, NA, NA, NA, NA, NA, NA), .Dim = c(6L, 3L), .indexCLASS = c("POSIXct", 
"POSIXt"), tclass = c("POSIXct", "POSIXt"), .indexTZ = "", tzone = "", class = c("xts", 
"zoo"), index = structure(c(631411200, 631497600, 631756800, 
631843200, 631929600, 632016000), tzone = "", tclass = c("POSIXct", 
"POSIXt")), .Dimnames = list(NULL, c("dax_data.csv", "nikkei_data.csv", 
"spx_data.csv"))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:51:17.370

而不是`timeseries`用作参数使用

```
 timeseries[apply(!is.na(timeseries), 1, all), ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-18T08:38:08.777

`periodReturn`不适用于多列时间序列数据。因此，我们必须将其应用于所有列并组合输出

```
weekly_return = do.call(merge.xts,lapply(colnames(timeseries),function(x){ 
z = periodReturn(timeseries[,x],period = "weekly",type="log");
colnames(z) = x;
return(z) 
} )) 
```

# windows-phone-7 - 如何在设备上运行 Windows Phone 7 PhoneGap 应用

> ID：15660452
> 
> 赞同：2
> 
> 时间：2013-03-27T13:47:04.183
> 
> 标签：windows-phone-7, cordova

我制作了一个 html5 应用程序，我已通过 phonegap 将其转换为 Windows 应用程序。我想在我的 Windows 设备上运行它，但我不知道将我的应用程序传输到设备上，所以我无法在我的设备上运行它。我的设备是诺基亚 lumia 720。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:51:28.653

我自己没有尝试过，但也许这可以帮助你？

[http://docs.phonegap.com/en/2.1.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone](http://docs.phonegap.com/en/2.1.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone)

# java - Hessian：C++ 服务器

> ID：15660454
> 
> 赞同：1
> 
> 时间：2013-03-27T13:47:06.717
> 
> 标签：java, c++, serialization, hessian

我将编写一个使用 Hessian 协议进行二进制序列化的客户端-服务器应用程序。你知道是否有办法用 C++ 服务器和 Java 客户端来做到这一点？我只找到了反之亦然的例子（Java 服务器和 C++ 客户端）。

提前致谢。

# jquery - 防止在单击锚点上跳转到顶部 jquery 选项卡功能

> ID：15660456
> 
> 赞同：0
> 
> 时间：2013-03-27T13:47:13.260
> 
> 标签：jquery, tabs, anchor

我在 I-net 中发现了这个非常棒的选项卡功能。我已经阅读了使用锚点时的标准问题：Windows 跳转到顶部。尽管集成了一个 e.PreventDefault() 和一个 Live Eventlistener，但单击选项卡时它仍然跳到顶部。你能给我一个建议吗？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
$(document).ready(function () {
    $('ul.tabs').each(function () {
        var $active, $content, $links = $(this).find('a');
        $active = $links.first().addClass('active');
        $content = $($active.attr('href'));

        $links.not(':first').each(function () {
            $($(this).attr('href')).hide();
        });

        // Binde den click event handler
        $(this).on('click', 'a', function (e) {
            // Mache den alten Tab inaktiv
            $active.removeClass('active');
            $content.hide();
            $active = $(this);
            $content = $($(this).attr('href'));
            $active.addClass('active');
            $content.fadeIn(800);
            e.preventDefault();
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:49:19.973

搜索`event.preventDefault`, `stopPropagation`and **`return false`**（测试了很多时间）
，并且，将 HREF 更改为`javascript:void(0)`（如果可以的话）

e.preventDefault 有时无法做到这一点。我发现最好的方法是在名为 onclick 的函数末尾添加 return false。

```
 // Binde den click event handler
        $(this).on('click', 'a', function (e) {
            e.preventDefault();
            // Mache den alten Tab inaktiv
            $active.removeClass('active');
            $content.hide();
            $active = $(this);
            $content = $($(this).attr('href'));
            $active.addClass('active');
            $content.fadeIn(800);
            e.stopPropagation();
            return false;;
        }); 
```

# c# - 类型初始化异常

> ID：15660457
> 
> 赞同：0
> 
> 时间：2013-03-27T13:47:13.500
> 
> 标签：c#, exception, types, byte

我在 C# 中有以下程序

基本上，该程序正在抛出一个`TypeInitializationException`. 我相信罪魁祸首是这条线：

```
static byte[] buffer = ToByteArray("Hello, this is a test message"); 
```

我尝试更改静态字段等，但它仍然给我错误。可以做些什么来解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:50:07.960

`ToByteArray`您在此片段中的实施有错误`Convert.ToByte(CharArray)`。使用下一个代码将字符串转换为`Unicode`编码中的字节数组。随意将编码更改为您在`Encoding`课堂上认为可以接受和有用的任何内容，包括`ASCII`和`UTF-8`

```
public static byte[] ToByteArray(string StringToConvert)
{
    return Encoding.Unicode.GetBytes(StringToConvert);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:51:26.977

我认为这是问题所在，

```
ByteArray[i] = Convert.ToByte(CharArray); 
```

利用

```
ByteArray[i] = Convert.ToByte(CharArray[i]); 
```

# gcc - 在 Ubuntu 10.10 32 位上构建 gcc-4.0.4。检测到缓冲区溢出

> ID：15660460
> 
> 赞同：2
> 
> 时间：2013-03-27T13:47:30.247
> 
> 标签：gcc, ubuntu, overflow

> 当我构建 gcc-4.0.4（在 Ubuntu 10.10 上）时，出现了一个问题：
> 
> arm-linux-ar rc ./libgcc.a libgcc/./_udivsi3.o libgcc/./_divsi3.o libgcc/./_umodsi3.o libgcc/./_modsi3.o libgcc/./_dvmd_lnx.o libgcc/./ _muldi3.o libgcc/./_negdi2.o libgcc/./_lshrdi3.o libgcc/./_ashldi3.o libgcc/./_ashrdi3.o libgcc/./_cmpdi2.o libgcc/./_ucmpdi2.o libgcc/./_floatdidf .o libgcc/./_floatdisf.o libgcc/./_fixunsdfsi.o libgcc/./_fixunssfsi.o libgcc/./_fixunsdfdi.o libgcc/./_fixdfdi.o libgcc/./_fixunssfdi.o libgcc/./_fixsfdi。 o libgcc/./_fixxfdi.o libgcc/./_fixunsxfdi.o libgcc/./_floatdixf.o libgcc/./_fixunsxfsi.o libgcc/./_fixtfdi.o libgcc/./_fixunstfdi.o libgcc/./_floatditf.o libgcc/./_clear_cache.o libgcc/./_enable_execute_stack.o libgcc/./ *trampoline.o libgcc/./*_main.o libgcc/./_absvsi2.o libgcc/./_absvdi2.o libgcc/./_addvsi3.o libgcc/./_addvdi3.o libgcc/./_subvsi3.o libgcc/./_subvdi3.o libgcc/./_mulvsi3 .o libgcc/./_mulvdi3.o libgcc/./_negvsi2.o libgcc/./_negvdi2.o libgcc/./_ctors.o libgcc/./_ffssi2.o libgcc/./_ffsdi2.o libgcc/./_clz。 o libgcc/./_clzsi2.o libgcc/./_clzdi2.o libgcc/./_ctzsi2.o libgcc/./_ctzdi2.o libgcc/./_popcount_tab.o libgcc/./_popcountsi2.o libgcc/./_popcountdi2.o libgcc/./_paritysi2.o libgcc/./_paritydi2.o libgcc/./_powisf2.o libgcc/./_powidf2.o libgcc/./_powixf2.o libgcc/./_powitf2.o libgcc/./_mulsc3.o libgcc /./_muldc3.o libgcc/./_mulxc3.o libgcc/./_multc3.o libgcc/./_divsc3.o libgcc/./_divdc3.o libgcc/./_divxc3.o libgcc/./_divtc3.o libgcc/ ./ *eprintf.o libgcc/./*_gcc_bcmp.o libgcc/./_divdi3.o libgcc/./_moddi3.o libgcc/./_udivdi3.o libgcc/./_umoddi3.o libgcc/./_udiv_w_sdiv.o libgcc/./_udivmoddi4.o libgcc/./unwind -dw2.o libgcc/./unwind-dw2-fde-glibc.o libgcc/./unwind-sjlj.o libgcc/./gthr-gnat.o libgcc/./unwind-co *** 检测到缓冲区溢出 ***: arm-linux-ar 终止 ======= 回溯: =========/lib/libc.so.6(__fortify_fail+0x50)[0x8f1890] /lib/libc.so.6( +0xe478a)[0x8f078a] /lib/libc.so.6(+0xe3ec8)[0x8efec8] /lib/libc.so.6(_IO_default_xsputn+0x9e)[0x8765ee] /lib/libc.so.6(_IO_padn+0xd8) [0x869f78] /lib/libc.so.6(_IO_vfprintf+0x2b79)[0x84bd89] /lib/libc.so.6(__vsprintf_chk+0xad)[0x8eff7d] /lib/libc.so.6(__sprintf_chk+0x2d)[0x8efebd ] arm-linux-ar[0x8050c05] arm-linux-ar[0x804ed7e] arm-linux-ar[0x805168c] arm-linux-ar[0x8055178] arm-linux-ar[0x804b7d2] arm-linux-ar[0x804c494] / lib/libc.so.6(__libc_start_main+0xe7)[0x822ce7] arm-linux-ar[0x80496e1] ======= 内存映射：======== 003e4000-00400000 r-xp 00000000 08： 01 131636 /lib/ld-2.12.1.so 00400000-00401000 r--p 0001b000 08:01 131636 /lib/ld-2.12.1.so 00401000-00402000 rw-p 0001c000 08:01 131636 /lib/ld-2.12.1.so 006b2000-006cc000 r-xp 00000000 08:01 131244 /lib/libgcc_s.so.1 006cc000-006cd000 r--p 00019000 08:01 cc_131244 /lib/s.so. 1 006CD000-006CE000 RW-P 0001A000 08:01 131244 /lib/libgcc_so.so.1 0080C000C000-00963000 R-XP 000000000000000000000000000000000000011322222225 /LIBC /LIBC-2.12.12.12.12.12.1.SO SO SO SO SO SO SO SO SO :01 132225 /lib/libc-2.12.1.so 00965000-00966000 rw-p 00159000 08:01 132225 /lib/libc-2.12.1.so 00966000-00969000 rw-p 000000004 00:00 040-0 00:00 040-a-p xp 00000000 00:00 0 [vdso] 08048000-08097000 r-xp 00000000 08:01 4278511 0080c000-00963000 r-xp 00000000 08:01 132225 /lib/libc-2.12.1.so 00963000-00965000 r--p 00157000 08:01 132225 /lib/libc-2.10.00.so 06006-p-606 00159000 08:01 132225 /LIB/LIBC-2.12.1.SO 0096600S-00969000 RW-P 00000000 00 00 00 00 00 00 00 00A42000-00A43000 R-XP 0000000000 000000 00 00:00 0:00 0 [VDSO] 08048000-00000000000000000000000000000000000000000000000000000..0000 000000000000000来4278511 0080c000-00963000 r-xp 00000000 08:01 132225 /lib/libc-2.12.1.so 00963000-00965000 r--p 00157000 08:01 132225 /lib/libc-2.10.00.so 06006-p-606 00159000 08:01 132225 /LIB/LIBC-2.12.1.SO 0096600S-00969000 RW-P 00000000 00 00 00 00 00 00 00 00A42000-00A43000 R-XP 0000000000 000000 00 00:00 0:00 0 [VDSO] 08048000-00000000000000000000000000000000000000000000000000000..0000 000000000000000来427851
> /home/zouhansi/armlinux/tools/bin/arm-linux-ar 08097000-08098000 r--p 0004e000 08:01 427851
> /home/zouhansi/armlinux/tools/bin/arm-linux-ar 08098000-08099000 rw-p 0004f000 08:01 427851
> /home/zouhansi/armlinux/tools/bin/arm-linux-ar 08099000-0809d000 rw-p 00000000 00:00 0 09354000-09558000 rw-p 00000000 00:00 0
> -c74] --s 00000000 08:01 661517
> /usr/lib/gconv/gconv-modules.cache b74c8000-b765b000 r--p 002a3000 08:01 657761 /usr/lib/locale/locale-archive b765b000-b785b000 r--p 00000000 08:01 657761 /usr/lib/locale/locale-archive b785b000-b785c000 rw-p 00000000 00:00 0 b785f000-b786b000 rw-p 00000000 00:00 0 bf839000-bf85c0000 rw-p 00:00
> [00-p]
> 
> 我从网络中找到了一些解决方案，在 CFLAGS 中添加“-D_FORTIFY_SOURCE=0”。我曾像这样编辑 Makefile：CFLAGS_FOR_BUILD = -g -O2 -D_FORTIFY_SOURCE=0
> 
> 我再做一次。但是这个问题又出现了。
> 
> 你能发表一些意见吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T09:58:32.240

我在构建 GCC 交叉编译器时遇到了类似的问题——似乎 binutils 充满了对 sprintf() 的不安全调用。

对我有用的解决方法是设置：

```
export CFLAGS="-fno-stack-protector -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=0" 
```

这些必须在运行 ../src/configure*之前设置。*

这里似乎有一个 binutils 补丁：[http](http://www.redhat.com/archives/fedora-extras-commits/2009-November/msg06284.html) ://www.redhat.com/archives/fedora-extras-commits/2009-November/msg06284.html但它并没有完全适用于我使用的源，所以我坚持使用 CFLAGS hack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-23T00:00:52.320

[在我用最新版本的binutils](https://www.gnu.org/software/binutils/)交叉编译 GCC 之后，它工作了，我不再遇到缓冲区溢出。

这是我安装最新的 binutils 后使用的行：

```
../gcc-4.5.1/configure --target=arm-linux --prefix=/.../toolchain/bin/binutils --disable-nls --disable-multilib --disable-shared --disable-decimal-float --disable--threads --disable-libmudflap --disable-libssp --disable-libgomp --enable-languages=c --with-system-zlib --with-newlib 
```

# c# - If string is not null or empty else

> ID：15660461
> 
> 赞同：73
> 
> 时间：2013-03-27T13:47:38.177
> 
> 标签：c#, if-statement, isnullorempty

我通常在整个应用程序中出于各种原因使用这样的东西：

```
if (String.IsNullOrEmpty(strFoo))
{
     FooTextBox.Text = "0";
}
else
{
     FooTextBox.Text = strFoo;
} 
```

如果我要经常使用它，我将创建一个返回所需字符串的方法。例如：

```
public string NonBlankValueOf(string strTestString)
{
    if (String.IsNullOrEmpty(strTestString))
        return "0";
    else
        return strTestString;
} 
```

并像这样使用它：

```
FooTextBox.Text = NonBlankValueOf(strFoo); 
```

我一直想知道是否有 C# 的一部分可以为我做这件事。可以这样称呼的东西：

```
FooTextBox.Text = String.IsNullOrEmpty(strFoo,"0") 
```

第二个参数是返回值 if`String.IsNullOrEmpty(strFoo) == true`

如果没有，是否有人有他们使用的更好的方法？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-03-27T13:49:22.033

有一个空值合并运算符 ( `??`)，但它不会处理空字符串。

如果您只对处理空字符串感兴趣，您可以像这样使用它

```
string output = somePossiblyNullString ?? "0"; 
```

根据您的具体需要`bool expr ? true_value : false_value`，您可以使用条件运算符来简化设置或返回值的 if/else 语句块。

```
string output = string.IsNullOrEmpty(someString) ? "0" : someString; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-27T13:49:44.933

您可以使用[三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)：

```
return string.IsNullOrEmpty(strTestString) ? "0" : strTestString

FooTextBox.Text = string.IsNullOrEmpty(strFoo) ? "0" : strFoo; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-27T13:52:34.437

*您可以为 String 类型编写自己的[**扩展**](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)方法：-*

```
 public static string NonBlankValueOf(this string source)
 {
    return (string.IsNullOrEmpty(source)) ? "0" : source;
 } 
```

现在您可以像使用任何字符串类型一样使用它

```
FooTextBox.Text = strFoo.NonBlankValueOf(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-27T13:49:33.620

这可能会有所帮助：

```
public string NonBlankValueOf(string strTestString)
{
    return String.IsNullOrEmpty(strTestString)? "0": strTestString;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-12T21:19:38.657

老问题，但我想我会添加这个来帮忙，

```
#if DOTNET35
bool isTrulyEmpty = String.IsNullOrEmpty(s) || s.Trim().Length == 0;
#else
bool isTrulyEmpty = String.IsNullOrWhiteSpace(s) ;
#endif 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-12T16:59:52.267

您可以使用 C#8/9 中的 switch 表达式进行模式匹配来实现这一点

```
FooTextBox.Text = strFoo switch
{
    { Length: >0 } s => s, // If the length of the string is greater than 0 
    _ => "0" // Anything else
}; 
```

# jquery - 几分钟后 JQGrid 停止响应/超时

> ID：15660464
> 
> 赞同：0
> 
> 时间：2013-03-27T13:47:40.823
> 
> 标签：jquery, web, timeout, controls

不确定它是否只是最近，但 JQGrid 会在几分钟后停止响应和运行，现在可能是 3-5 分钟。对列进行排序不会做任何事情，只是更改数据页。它们的超链接可以像普通网页一样显示其他内容，但用户必须刷新页面才能使这些控件正常工作。是否有超时变量或者这通常如何工作？

# git - 如何将具有许多分支的大型 bzr 项目迁移到 git 并过滤历史记录

> ID：15660467
> 
> 赞同：3
> 
> 时间：2013-03-27T13:47:43.517
> 
> 标签：git, version-control, filter, migration, bazaar

[在使用 bazaar（和启动板](https://launchpad.net)）几年后，我们计划将[FEniCS 项目](http://fenicsproject.org)迁移到 Git。我们对此迁移有一些要求，这使得它相当复杂：

1.  我们希望保留历史记录，但对其进行过滤并从历史记录中删除（现在已过时的）文件列表以减小存储库大小。
2.  有来自许多独立贡献者的[许多](https://code.launchpad.net/dolfin)特性分支（目前来自 25 个不同人的 76 个分支）。我们想为他们提供一个简单的迁移路径（可由 git 新手完成），以便将他们的分支放入转换和过滤的存储库中。

### 有一个解决方案1。

我以[DOLFIN](https://launchpad.net/dolfin)为例：

导入 bzr 主干：

```
git init dolfin && cd dolfin
(cd path/to/bzr/trunk; bzr fast-export --plain) | git fast-import 
```

过滤历史：

```
git filter-branch --index-filter "git rm -rf --cached --ignore-unmatch ${files_to_strip}" --prune-empty 
```

### 2也[有解决方案](https://dgleich.wordpress.com/2011/01/22/convert-bazaar-to-git/)。

它需要为上述`bzr fast-export`( `dolfin.marks.bzr`) 和`git fast-import`( `dolfin.marks.git`) 步骤导出标记文件。我们可以将这些提供给贡献者，他们可以像这样导入他们的特性分支：

```
(cd path/to/bzr/branch; bzr fast-export --marks=path/to/dolfin.marks.bzr --git-branch=$(bzr nick)) | \
git fast-import --import-marks=path/to/dolfin.marks.git --export-marks=path/to/dolfin.marks.git 
```

然而，当我们过滤分支时，这个秘诀就失效了，因为这个操作使所有主干提交的 SHA1 哈希无效，因此标记文件也无效。

### *但是对于 1.和*2没有解决方案。

所以问题是：是否有可靠地满足要求 1\. 和 2\. 的*配方*？

请注意，理想情况下，这也应该适用于复杂情况，例如已将主干重新合并（甚至多次）的功能分支：应该正确识别来自主干的这些合并的父级（就像它们在 2\. 中一样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T22:22:32.353

不幸的是，目前无法使用标记文件对 1 和 2 执行此操作。

如果您忽略标记文件（只是不生成它们），让用户进行完全转换并确保过滤对所有用户一致发生，那么您最终应该得到相同的 SHA1，因此到处都有相同的公共历史记录。

# c# - 使用 Show() 时表单设计混乱

> ID：15660471
> 
> 赞同：1
> 
> 时间：2013-03-27T13:47:57.220
> 
> 标签：c#, winforms, show, showdialog

我正在尝试制作一个加载屏幕窗口。我使用`Show()`而不是`ShowDialog()`因为在显示后我有一些代码要执行。使用`ShowDialog()`表单时很好，但使用`Show()`表单时却搞砸了。是什么原因造成的，解决方案是什么？这是我的做法：

```
 bool closeLoadingWindow = false;
    void ShowLoadingWindow()
    {
        LoadingWindow loadingWindow = new LoadingWindow();
        loadingWindow.Show();
        while (!closeLoadingWindow);
        loadingWindow.Close();
        return;
    }
    public MainWindow()
    {
        Thread loadingWindowThread = new Thread(ShowLoadingWindow);
        loadingWindowThread.Start();
        InitializeComponent();
        // ...
        closeLoadingWindow = true;
    } 
```

使用时`ShowDialog()`：

![图 1](../Images/1e3ed97b552a3daa99361f4a390f6eb6.png)

使用 Show() 时：

![图 2](../Images/991b8e3f18876d1b2cb0ec70db3d1240.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:03:28.960

原因`ShowDialog`是因为你的`while`循环不会被执行，一旦运行时到达那行代码，它将停止处理，直到表单被关闭。

您的代码没有意义，这里使用线程的目的是将“忙碌”代码（您的`while`循环）保持在主 UI 线程之外，这样它就不会阻塞。但是，您正试图在*同一个*线程上创建/显示您的表单，并且是一个非 UI 线程。

您不一定需要在`Show`这里使用，您可以使用`ShowDialog`，但在消除表格等方面有点棘手。但是，为了解决您目前遇到的问题，我建议您这样做：

```
LoadingWindow _loadingWindow;

void ShowLoadingWindow()
{
    if (_loadingWindow == null)
        _loadingWindow = new LoadingWindow();
    _loadingWindow.Show();
}

void HideLoadingWindow()
{
    if (_loadingWindow != null)
    {
         _loadingWindow.Close();
         _loadingWindow.Dispose();
    }
}

void LoadSomething()
{
    while (...)
    {
        // busy code goes here
    }
    // after code is finished, close the form
    MethodInvoker closeForm = delegate { HideLoadingWindow(); };
    _loadingWindow.Invoke(closeForm);
}

public MainWindow()
{
    ShowLoadingWindow();
    new Thread(LoadSomething).Start();
}
} 
```

仅供参考 - 根据您在线程中尝试执行的操作的性质，使用[任务并行库](http://msdn.microsoft.com/en-gb/library/dd460717.aspx)而不是创建专用线程可能是一种更好的方法，具有各种好处，如[继续](http://msdn.microsoft.com/en-us/library/dd997396.aspx)/[取消](http://msdn.microsoft.com/en-gb/library/ee372288.aspx)支持。

# java - 在Java中对HashMap值进行排序没有给出正确的顺序

> ID：15660473
> 
> 赞同：1
> 
> 时间：2013-03-27T13:48:03.017
> 
> 标签：java, sorting, hashmap

我在`HashMaps`用`Java`. 我的代码是：

```
 @SuppressWarnings("unchecked")
          Map<String, Integer> scores = ((HashMap<String, Integer>) prefs.get());
          Map<String, Integer> sortedscores = sortByValues(scores);
          printMap(scores);
          System.out.println("==============");
          printMap(sortedscores); 
```

prefs.get() 返回一个`Map<String, ?>`我转换成的`<String, Integer >`

排序功能：

```
public static <K, V extends Comparable<V>> Map<K, V> sortByValues(final Map<K, V> map) {
    Comparator<K> valueComparator =  new Comparator<K>() {
        public int compare(K k1, K k2) {
            int compare = map.get(k2).compareTo(map.get(k1));
            if (compare == 0) return 1;
            else return compare;
        }
    };
    Map<K, V> sortedByValues = new TreeMap<K, V>(valueComparator);
    sortedByValues.putAll(map);
    return new LinkedHashMap<K,V>(sortedByValues);
}
public static void printMap(Map<String, Integer> unsortMap){
    for (Map.Entry entry : unsortMap.entrySet()) {
        System.out.println("Key : " + entry.getKey() 
                               + " Value : " + entry.getValue());
    }
} 
```

输出是：

```
Key : John Doe Value : 1000
Key : balazs Value : 975
Key : Balazs Value : 900
Key : aladar Value : 975
Key : balazs2 Value : 975
Key : score Value : 1000
Key : house Value : 1037
==============
Key : balazs Value : 975
Key : aladar Value : 975
Key : balazs2 Value : 975
Key : Balazs Value : 900
Key : house Value : 1037
Key : John Doe Value : 1000
Key : score Value : 1000 
```

第一个是未排序的，第二个是排序的。我的问题是第二个输出不是 DESC 顺序（按值）

编辑：如果我自己创建一个 hasmap 它工作正常：

```
Map<String, Integer> unsortMap = new HashMap<String, Integer>();
        unsortMap.put("asd", 1);
        unsortMap.put("asd2r1", 5);
        unsortMap.put("house", 7);
        unsortMap.put("3", 124);
        unsortMap.put("7", 4);
        unsortMap.put("5", 6);
        unsortMap.put("6", 2);
        unsortMap.put("8", 0); 
```

但是，如果我尝试这样做：`Map<String, Integer> scores = ((HashMap<String, Integer>) prefs.get());`我得到了那个奇怪的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:50:58.620

您的比较器看起来不符合[规范](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)：

```
 int compare = map.get(k2).compareTo(map.get(k1));
        if (compare == 0) return 1;
        else return compare; 
```

为什么当两个条目相等时返回 1 ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:52:09.120

你基本上应该重写这个：

```
public int compare(K k1, K k2) {
    int compare = map.get(k2).compareTo(map.get(k1));
    if (compare == 0) return 1;
    else return compare;
} 
```

至：

```
public int compare(K k1, K k2) {
    return map.get(k2).compareTo(map.get(k1));
} 
```

当两个值相等时，您实际上是在说一个大于另一个……这没有多大意义。如果键是可比较的，请使用自然比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:07:14.273

找到了解决方案：问题是它比较的是字符串而不是整数。我尝试的转换

```
Map<String, Integer> scores = ((HashMap<String, Integer>) prefs.get()); 
```

没有将其转换为整数。所以我使用了一个正确的循环：

```
 for (@SuppressWarnings("rawtypes") Map.Entry entry : scores.entrySet()) {
       scoresInt.put(entry.getKey().toString(), Integer.parseInt(entry.getValue().toString()));
   } 
```

将 hasmap 转换为排序就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:14:57.360

我认为问题出在返回语句中：

```
Map<K, V> sortedByValues = new TreeMap<K, V>(valueComparator);
sortedByValues.putAll(map);
return new LinkedHashMap<K,V>(sortedByValues); 
```

你有一个排序的地图，然后你把所有的对放在一个新的地图中，所以它们再次没有排序。尝试这样做：

```
Map<K, V> sortedByValues = new TreeMap<K, V>(valueComparator);
sortedByValues.putAll(map);
return sortedByValues; 
```

# c - Bin 打包 - 精确的 np-hard 指数算法

> ID：15660476
> 
> 赞同：0
> 
> 时间：2013-03-27T13:48:15.233
> 
> 标签：c, algorithm, combinations, brute-force, bin-packing

我使用最佳拟合方法为装箱问题编写了一个启发式算法，itens S =（i1，...，in），箱大小 T，并且想要创建一个真正的精确指数算法，以计算最佳解决方案（最小包装所有物品的箱子数量），但我不知道如何检查包装的每一种可能性，我在 C 中做。

有人可以告诉我任何想法我必须使用哪些结构？我怎样才能测试itens的所有de组合？它必须是递归算法吗？有一些可以帮助我的书或文章吗？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:49:42.300

给出的算法会找到*一种*包装，通常是一种非常好的包装，但不一定是最优的，所以它*不能解决*问题。

对于 NP 完全问题，解决它们的算法通常最容易递归地描述（迭代描述最终会明确所有被递归隐藏的簿记）。对于 bin 打包，您可以从最小数量的 bin 开始（对象大小总和除以 bin 大小的上高斯，但您甚至可以从 1 开始），尝试将对象分配到 bin 的所有组合，检查每个这样的分配它是合法的（bin 内容大小的总和 <= 每个 bin 的 bin 大小），如果是则返回接受（或输出找到的分配），或者如果没有找到分配，则增加 bin 的数量。

您要求结构，这是一个想法：每个 bin 应该以某种方式描述包含的对象（列表或数组），并且您需要所有 bin 的列表（或数组）。使用这些相当简单的结构，递归算法如下所示： 要尝试所有可能的分配，您为每个对象运行一个循环，该循环将尝试将其分配给每个可用的 bin。在检查合法性之前等待分配所有对象，或者（作为次要优化）在继续下一个对象之前只将一个对象分配给它适合的箱（这是在最后一个对象已经结束时结束的递归）已分配），如果没有找到这样的 bin，则返回前一个对象，或者（对于第一个对象）在重试之前增加 bin 的数量。

希望这可以帮助。

# powershell - Powershell and last modified date

> ID：15660487
> 
> 赞同：2
> 
> 时间：2013-03-27T13:48:46.670
> 
> 标签：powershell

I am working in a windows environment.

I have a project that requires a short script to determine if a file with a modified date of today exists in a folder. If the file exists, it should copy it, if a file does not exist, it should return an error code.

I prefer to not use 3rd party apps. I am considering powershell.

I can pull a list to visually determine if the file exists, but I am having trouble batching to return an error if the count is zero.

```
Get-ChildItem -Path C:\temp\ftp\archive -Recurse | Where-Object  { $_.lastwritetime.month -eq 3 -AND $_.lastwritetime.year -eq 2013  -AND $_.lastwritetime.day -eq 21} 
```

Any help is greatly appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:57:49.800

您可以将当前日期与每个文件 LastWriteTime 短日期的日期部分进行比较：

```
Get-ChildItem -Path C:\temp\ftp\archive -Recurse | Where-Object  {
   $_.LastWriteTime.ToShortDateString() -eq (Get-Date).ToShortDateString() 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T20:51:23.633

```
Get-ChildItem $path -r | % {if((!($_.psiscontianer))-and(Get-Date $_.LastWriteTime -Uformat %D)-eq(Get-Date -UFormat %D)){$_.FullName}else{Write-Warning 'No from Today'}} 
```

仅供参考，在进行大型工作时，例如要处理 TB 的文件，请使用 foreach-object。它比 Where-Object 更快。此方法在可用时直接处理数组中收集的对象，而不是等到所有对象都收集完毕。

> [总之，总有很多不同的方法可以在 PowerShell 中实现相同的结果。我提倡使用你最容易记住的东西。同时，PowerShell 可以在这些方法之间提供一些巨大的性能差异 - 了解更多信息是值得的！](http://tfl09.blogspot.com/2011/11/performance-with-powershell.html)

您仍然可以通过计算日期使线路更有效率

```
$date = (Get-Date -UFormat %D)
Get-ChildItem $path -r | % {if((!($_.psiscontianer))-and(Get-Date $_.LastWriteTime -Uformat %D)-eq$date){$_.FullName}else{Write-Warning 'No from Today'}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:22:55.087

测试是否没有文件：

```
$out = Get-ChildItem -Path C:\temp\ftp\archive -Recurse | Where-Object  {  
   $_.LastWriteTime.ToShortDateString() -eq (Get-Date).ToShortDateString() 
};
if ($out.Count -gt 0)
//do something with your output
else
//sorry no file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:18:24.083

我能够使用以下脚本：

```
$Date = Get-Date
$Date = $Date.adddays(-1)
$Date2Str = $Date.ToString("yyyMMdd")
$Files = gci "C:\\Temp\\FTP\\Archive"

ForEach ($File in $Files){
    $FileDate = $File.LastWriteTime
    $CTDate2Str = $FileDate.ToString("yyyyMMdd")
    if ($CTDate2Str -eq $Date2Str) {Copy-Item $File.Fullname "C:\\Temp\\FTP"; exit}
}
Throw "No file was found to process" 
```

# scala - Error : case class implementing parent's abstract method

> ID：15660489
> 
> 赞同：0
> 
> 时间：2013-03-27T13:48:52.997
> 
> 标签：scala

I am learning scala, so bear with me if this a stupid question. I am experimenting with case classes and trying out the following:-

```
case class A {
    def eval(x: Int): Boolean
}

case class B extends A

case class C extends A {
    override def eval(x: Int): Boolean = true
    // Compiler error is - 
    // Multiple markers at this line
    // - Missing closing brace `}' assumed here
    // - expected start of definition
} 
```

Is it not possible for case classes to implement abstract methods?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:02:40.850

一个案例类不能继承另一个案例类（编译器做了很多魔术）。在 scala 中，您通常会使用特征，因此您的代码如下所示：

```
trait A {
  def eval(x: Int): Boolean
}

case class C() extends A {
  override def eval(x: Int): Boolean = true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:01:23.133

`abstract` `case` `class`是自相矛盾的。不建议从 a 进行扩展，`case class`并且通过制作一个`case class`抽象，您被迫对其进行子类化以拥有一个可实例化的类。

常见的模式是一个`abstract class`或`trait`作为基础，一个或多个（通常不止一个）`case class`es*总是在继承树的叶子上*。

# java - Issue related to JComboBox

> ID：15660494
> 
> 赞同：0
> 
> 时间：2013-03-27T13:49:05.070
> 
> 标签：java, swing, jcombobox, itemlistener

I have 3 controls on frame 2 COMBOBOXES(swing) and 1 text box. Text box contains some text.One combobox contains font type and other contains font size.

The text in the text box should change its size and type are per selection in comboboxes. But i am not getting how to know which combobox is selected.

I have written the following code:

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

class changeFont extends JFrame implements ItemListener
{

    JComboBox fonttype,fontsize;
    JTextField tf;
    Prog17()
    {
        super("Title");
        setLayout(new FlowLayout());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
        setSize(300,300);

        fonttype=new JComboBox();
        fontsize=new JComboBox();

        String fontlist[];
        GraphicsEnvironment ge=GraphicsEnvironment.getLocalGraphicsEnvironment();
        fontlist=ge.getAvailableFontFamilyNames();

        for(int i=0;i<fontlist.length;i++)
            fonttype.addItem(fontlist[i]);  

        add(fonttype);  
        fonttype.addItemListener(this);     

        fontsize.addItem("10");
        fontsize.addItem("20");
        fontsize.addItem("30");
        add(fontsize);

        fontsize.addItemListener(this);
        tf=new JTextField("Game Over");
        add(tf);

    }

    public void itemStateChanged(ItemEvent ie)
    {   

    }

    public static void main(String args[])
    {
        changeFont obj1=new changeFont();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:05:07.557

在`itemStateChanged`支票`ie.getSource()==fonttype`或`ie.getSource()==fontsize`

# android - How to view a Georgian language string in a TextView?

> ID：15660496
> 
> 赞同：0
> 
> 时间：2013-03-27T13:49:17.623
> 
> 标签：android, textview, georgian

If a TextView has a georgian text, I see only spaces.

i.e

```
String georgString = "("+"სახლი ქუჩის ბოლოში"+")"; 
```

I see:

```
"(        )" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:05:12.030

> 如果 TextView 有格鲁吉亚文本，我只会看到空格。

我找到了快速的解决方案。您需要将公历文本添加到`strings.xml`其中，然后它将起作用。

```
<string name="test">(სახლი ქუჩის ბოლოში)</string>

// an usage
textView.setText(getString(R.string.test)); 
```

[（**我刚刚对其进行了测试**并且**它有效**。如果您直接分配文本，则可能存在编码问题，但使用资源时您不必处理它）。让我知道。]

# java - 为什么要获取构造函数对象而不是直接创建实例？

> ID：15660503
> 
> 赞同：0
> 
> 时间：2013-03-27T13:49:24.613
> 
> 标签：java, reflection

有：

```
Class<? extends MyInterface> clazz = ...; 
```

我应该（以及为什么）写：

```
Constructor<? extends MyInterface> ctor = clazz.getConstructor();
MyInterface object = ctor.newInstance(); 
```

或者：

```
MyInterface object = clazz.newInstance(); 
```

选择是否取决于我打算使用的构造函数是空的还是带参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:56:05.717

根据Javadoc `newInstance()`：

> 该类被实例化为一个带有空参数列表的新表达式。如果尚未初始化该类，则将其初始化。

显然，您可以将`newInstance()`其用作快捷方式

```
Constructor<? extends MyInterface> ctor = clazz.getConstructor();
MyInterface object = ctor.newInstance(); 
```

但是有一个细微的区别：`Class#newInstance()`将构造函数中的 Excption 包装在 a`ExceptionInInitializerError`中，而`Constructor#newInstance()`将其包装在 a中`InvocationTargetException`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:57:14.160

看看这个[类似的问题](https://stackoverflow.com/questions/195321/why-is-class-newinstance-evil)。[此](http://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html)链接还提供了更多示例和更详细的说明。

```
To sum up the arguments (from the second link):

    Class.newInstance() can only invoke the zero-argument constructor, 
    while Constructor.newInstance() may invoke any constructor, regardless 
    of the number of parameters.

    Class.newInstance() throws any exception thrown by the constructor, 
    regardless of whether it is checked or unchecked. 

    Class.newInstance() requires that the constructor be visible;  
    Constructor.newInstance() may invoke private constructors under certain 
    circumstances. 
```

很抱歉编辑我的帖子以添加更多引用，但这比我能更好地解释它。[Class.newInstance()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)的 Javadoc解释如下：

*创建由此 Class 对象表示的类的新实例。该类被实例化为一个带有空参数列表的新表达式。如果尚未初始化该类，则将其初始化。*

*请注意，此方法传播由 nullary 构造函数引发的任何异常，包括已检查的异常。使用此方法可以有效地绕过编译器执行的编译时异常检查。Constructor.newInstance 方法通过将构造函数抛出的任何异常包装在（已检查）InvocationTargetException 中来避免此问题。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:55:07.730

根据源码`of java.lang.Class` `Class.newInstance()`是一样的`Constructor.newInstance()`

在实现中，调用默认构造函数（没有任何参数的构造函数）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:56:08.420

`clazz.newInstance()`实际上试图抓住`Constructor`对象，所以它最终是一样的。

第一种语法允许使用带参数的构造函数来实例化类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T13:58:16.207

通读 javadoc for . 答案是显而易见的[`java.lang.Class`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)。

*   该`clazz.newInstance()`方法仅适用于无参数构造函数。

*   , `clazz.getConstructor()`etc 方法也适用于带参数的构造函数......前提是您提供类型，然后提供构造函数参数的值。

如果您的用例只要求您使用无参数构造函数，那么`clazz.newInstance()`是更简单的方法。

# java - 是否可以重新使用在 RPG 的另一个 OS/400 作业中创建的 JVM？

> ID：15660505
> 
> 赞同：1
> 
> 时间：2013-03-27T13:49:30.243
> 
> 标签：java, jvm, ibm-midrange, rpgle

我有一个调用 Java 类的 RPG PGM，如果 Job 中没有 JVM，则 RPG 运行时会在调用 Java 类时添加一个。此后，来自同一 RPG 程序或同一 Job 中的另一个 RPG 程序的所有调用都使用相同的 JVM。

问题是，如果我从另一个 Job 启动相同的 PRG 程序，它会启动另一个 JVM，基本上我有一个用于 Job 的 JVM。

我想知道是否有可能只有一个 JVM 并从其他作业附加到它。

任何帮助将不胜感激。

这就是我试图通过程序集成 RPG/JAVA 的方式。但是由于某种原因，线程没有被触发。

```
========
RPG CODE
========

d DSP_class       c                   'tests.mthreads.RPGProcessDispatcher'
d DSP             s               o   class(*JAVA:DSP_class)           

d DSP_new         pr              o   extproc(*JAVA:                   
d                                     DSP_class:                       
d                                     *CONSTRUCTOR)                    

d DSP_dispatch    pr              n   extproc(*JAVA:                   
d                                     DSP_class:                       
d                                     'dispatch')                      

d dispatcher      s                   like(DSP)
d dispatched      s               n            

d i               s              3i 0          
  /free                                         
     dispatcher = DSP_new();                   
     for i=1 by 1 to 2;                        
        dispatched = DSP_dispatch(dispatcher); 
      endfor;                                   

      *inlr=*on;   
  /end-free        

RPGProcessDispatcher
====================

public boolean dispatch() {
    if (freeThreads == 0) {
        return false;
    }

    System.out.println("Tread @"+freeThreads);
    decThreadsAvailable();

    RPGSimpleProcess p = new RPGSimpleProcess();
    p.registerRunCompleted(this);

    Thread t = new Thread(p);
    t.start();

    return true;
}

RPGSimpleProcess
================

@Override
public void run() {
    try {
        Thread.sleep(100000);

        notifyEnd();        
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T14:19:05.393

快速回答是否定的。

更长的答案是，如果您有一个永无止境的服务器作业正在运行，它接受来自各个客户端的请求，那么所有客户端实际上都会重用由服务器作业启动的 JVM。

创建此服务器作业的一种方法是使用数据队列将数据从客户端传递到服务器作业，然后返回。当机器 IPL 时启动服务器作业（将自动启动作业条目添加到批处理子系统）并让它通过[QRCVDTAQ](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/apis/qrcvdtaq.htm)侦听数据队列。[该作业将启动 JVM，调用 Java 方法并通过QSNDDTAQ](http://pic.dhe.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/apis/qsnddtaq.htm)返回答案。每个客户端都会做同样的事情，在数百个单独的作业和单个服务器作业之间进行双向通信。

# android - Android：无法实例化服务...无法实例化类 com.stocktickerwidget.AppWidget$UpdateService；没有空的构造函数

> ID：15660512
> 
> 赞同：3
> 
> 时间：2013-03-27T13:49:56.867
> 
> 标签：android, service, constructor

请帮忙。

`Android: Unable to instantiate service...can't instantiate class com.stocktickerwidget.AppWidget$UpdateService; no empty constructor`

我收到上面的错误，

我不懂为什么。

谢谢

```
public class UpdateService extends Service {
    public UpdateService() {
       //
        }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.e("", "onStartCommand di AppWidget");
        int[] appWidgetIds = intent.getIntArrayExtra("widgetsids");
        final int N = appWidgetIds.length;
        AppWidgetManager manager = AppWidgetManager.getInstance(this);

        // Perform this loop procedure for each App Widget that belongs to
        // this provider

        for (int i = 0; i < N; i++) {
            int appWidgetId = appWidgetIds[i];
            Log.e("",
                    "i=" + Integer.toString(i) + " di "
                            + Integer.toString(N));
            RemoteViews view = buildUpdate(getApplicationContext(),
                    appWidgetIds);

            // Tell the AppWidgetManager to perform an update on the current
            // app widget
            manager.updateAppWidget(appWidgetId, view);

        }
        return (START_NOT_STICKY);

    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T14:06:05.190

首先，删除您的构造函数，因为您从`Service`.

然后，要么让它成为一个`static`内部类，要么让它成为一个独立的公共 Java 类。您不能在这里使用常规的内部类，因为 Android 无法创建该内部类的实例。

# java - 自定义 ContextResolver 在 RESTEasy 2.3.5 中解组请求之前未调用

> ID：15660513
> 
> 赞同：1
> 
> 时间：2013-03-27T13:49:57.477
> 
> 标签：java, xml, jaxb, resteasy

从 RESTEasy 版本 2.3.2 升级到 2.3.5 后，JAXBContext 的自定义 ContextResolver 出现问题。

应该在解组请求和编组响应之前调用此解析器。

这在 RESTEasy 2.3.2 中有效，但似乎在 2.3.5 中被破坏（在此处插入很快就会被证明是错误的免责声明）。

有人有想法么 ？

最好的问候本杰明

# javascript - 为什么我的字符串值通过淘汰赛验证，但整数值没有？

> ID：15660520
> 
> 赞同：1
> 
> 时间：2013-03-27T13:50:09.387
> 
> 标签：javascript, knockout.js, knockout-validation

将淘汰赛 2.2.1 与最新的淘汰赛验证.js 一起使用。

有关我的问题的工作示例，请参见以下 jsfiddle：

[http://jsfiddle.net/tbstudee/keRPY/4/](http://jsfiddle.net/tbstudee/keRPY/4/)

正如您在加载现有数据时看到的那样，整数值没有通过验证，但字符串值通过了。这仅在使用现有数据初始化 viewModel 时发生。

我知道问题出在我的 isValid 标志中，因为将其注释掉会删除加载时的验证错误。

```
self.isValid = ko.computed(function () {
    return ko.validation.group(
        self,
        {
            observable: true,
            deep: true
        }).showAllMessages(true);
}, self); 
```

除了用字符串而不是整数为我的视图模型播种之外，我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:05:52.517

`maxLength`and`minLength`用于字符串，用于您需要使用的数字`min`and `max`，否则验证最终会将值转换为字符串。看看[这个小提琴](http://jsfiddle.net/tyrsius/LcSWG/)

```
self.myInt = ko.observable(data.myInt).extend({
        required: true,
        number: true,
        min: 100000,
        max: 999999
    }); 
```

# javascript - 第一次验证后，动态添加到表单的输入不验证

> ID：15660521
> 
> 赞同：0
> 
> 时间：2013-03-27T13:50:09.947
> 
> 标签：javascript, jquery

我有一个表格，可以在其中动态地添加一些输入。

每次用户从 addMaterialFornecedor select 中选择另一个“fornecedor”时，我都会为 preco 添加一个输入。

我的问题是，当我单击按钮并调用 validate() 函数[http://js.sapo.pt/SAPO/Ink/FormValidator/doc.html](http://js.sapo.pt/SAPO/Ink/FormValidator/doc.html)如果我在单击按钮之前选择了“fornecedor”，则验证表单，但如果我单击按钮，选择“fornecedor”，然后再次单击它不会验证：s

[http://jsfiddle.net/rVQB4/3/](http://jsfiddle.net/rVQB4/3/)

我正在使用的 javascript 代码：

```
function formValidate(form){

  if(!SAPO.Ink.FormValidator.validate(form, options)){
    //some debug
    console.log(form);
    return false;
  }else{
    //some ajax calls
    return false;
  }

} 
```

这是一个更好地解释问题的视频：[https](https://dl.dropbox.com/u/6416035/stack3.ogv) ://dl.dropbox.com/u/6416035/stack3.ogv 对不起我的英语：s 谢谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:08:12.083

Livequery 通过将事件绑定到动态添加到 DOM 的事件来为动态添加到网页的项目创造奇迹。如果此绑定未发生，则不会为这些动态对象触发事件。

这是一个例子：

```
$(document).ready(function() {
  $("#myDynamicObject").livequery(function() {
    $(this).change(function() {
      // Do something.
    });
  });
}); 
```

有关如何使用 livequery 的更多信息，请参见[此处。](http://docs.jquery.com/Plugins/livequery)

# android - 如何在运行时更改布局？

> ID：15660526
> 
> 赞同：0
> 
> 时间：2013-03-27T13:50:17.820
> 
> 标签：android, android-layout, landscape

我有一个线性布局，在 xml 文件中设置了一个按钮、一个 gridview 和一个 textview。当屏幕处于纵向时，所有这些元素都可以正常显示。但是，当我将屏幕方向更改为横向时，textview 会消失。我想更改配置更改的布局。我想以某种方式水平显示元素，使它们中的每一个都占据屏幕的一定百分比。我还必须更改网格视图中每行显示的项目数，也许还有其他一些参数。直到现在我有这个，但我不知道如何更改其余的参数。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    LinearLayout linearlayout= (LinearLayout) findViewById(R.id.LinearLayout02);
    GridView gridview=(GridView) findViewById(R.id.gridview);
    if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE){           
       linearlayout.setOrientation(LinearLayout.HORIZONTAL);     
    }
    else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        linearlayout.setOrientation(LinearLayout.VERTICAL);         
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:54:45.937

您需要在 /res/ 目录中创建一个名为的`layout-land`文件夹，然后在该文件夹中创建一个与其他布局同名的新布局 xml，并将项目（TextView 等）放置在您想要的位置当设备处于横向状态时，Android 将负责其余的工作。

编辑：使用以下代码：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
     super.onConfigurationChanged(newConfig);
     setContentView(R.layout.my_main_layout);

     //save your text from textviews, edittexts, etc. in temp variables

     InitializeUI(); //take your findViewById stuff out of onCreate and put it in its own method that can be called here as well.

     //set you textviews, etc back to previous values from temp vars

 } 
```

那应该这样做。

# ios - 导航栏未显示在故事板的 UItableviewcontroller 中

> ID：15660527
> 
> 赞同：1
> 
> 时间：2013-03-27T13:50:22.483
> 
> 标签：ios, xcode, uinavigationcontroller, storyboard, uitableview

我创建了一个`UICollectionviewcontroller` 视图并嵌入了一个`UINavigationcontroller`然后我在导航栏中创建了一个按钮。我再次创建了一个`UITableviewcontroller`也我嵌入了一个`uinavigationcontroller`，当我单击`UICollectionview`导航栏中的按钮时它显示`UITableviewcontroller`到这一点很好，但在此之后导航控制器中的栏`UITableview`根本没有显示。请帮助我

![uitableviewcontroller 图片](../Images/827a345da81b5976762dc701fd2d9d25.png)

![在此处输入图像描述](../Images/0377a9bd0174563d1c28cd35a33e0f84.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:53:14.373

尝试使用这段代码将导航栏设置为不隐藏：

```
-(void) viewWillAppear:(BOOL)animated {
[[self navigationController] setNavigationBarHidden:NO animated:YES];
} 
```

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-14T21:47:45.627

根据苹果文档，这不会显示导航控制器。为了显示导航控制器，您需要先实例化一个导航控制器，然后加载表格视图控制器，如下所示：

```
LTBaseTableViewController *viewController = [[LTBaseTableViewController alloc] initWithStyle:UITableViewStylePlain];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
[self.window setRootViewController:navigationController]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-23T21:59:17.083

我也为此苦苦挣扎。最终通过添加[https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/WorkingwithConstraintsinInterfaceBuidler.html中定义的导航控制器来解决](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/WorkingwithConstraintsinInterfaceBuidler.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T07:19:30.447

除了@barryjones 解决方案，您还可以使用导航控制器直接推送表格视图控制器。

```
[self.navigationController pushViewController:yourTableViewController animated:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-26T22:28:35.970

除了上述答案之外，我还以类似的方式在 UITabBArController 的选项卡之间以编程方式移动。

我读过的大多数帖子都建议

```
tabBarController?.selectedIndex = 0 
```

但是，这会造成标签栏不再可见的情况。最终通过将以下内容添加到 AppDelegate.swift 中的类来解决

```
var tabBarController: UITabBarController? 
```

然后在 AppDelegate 中，我修改了 didFinishLaunchingWithOptions 如下：

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    // Override point for customization after application launch.
    tabBarController = window?.rootViewController as! UITabBarController
    return true
} 
```

然后，您可以在各种视图控制器中的任何位置使用以下行

```
tabBarController?.selectedIndex = 0 
```

# ghostscript - Dymo labelwriter 上的 PostScript

> ID：15660532
> 
> 赞同：1
> 
> 时间：2013-03-27T13:50:39.150
> 
> 标签：ghostscript, postscript

我正在尝试将 postscript 文件打印到 Dymo LabelWriter（尝试了 LabelWriter 450 和 LabelWriter 330-Turbo），我得到了它的低谷，但边距似乎很高，标签的 1/3 '不可打印（见图，黑色方块应该覆盖整个标签的宽度）。

![在此处输入图像描述](../Images/d12f7c18507b91296d0e2114fc6f406e.png)

标签在 39 毫米上是 89 毫米（所以 252 点 x 123 点）我使用的是边界框，`8 8 252 123`并且页面方向设置为纵向。

我什至用 Gimp 生成的 eps 文件对其进行了测试，它使相同的区域空白。

任何人都知道为什么它不能正确打印？

编辑：

该文件可以在这里查看：http: [//pastebin.com/c7YC5ftb](http://pastebin.com/c7YC5ftb)

我用来在 Dymo LabelWriter 上打印的命令是：

```
C:\ps\gswin32c.exe -sDEVICE=mswinpr2 -dNoCancel -dNOPAUSE -dSAFER -sOutputFile="%%printer%%DYMO LabelWriter 450" -q "C:\ps\dymo.ps" -c quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:02:18.343

问题已解决，打印机未设置为接受此类标签

如果您遇到此问题，请转到打印机驱动程序的高级设置并设置标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:07:31.907

不是没有看到 PostScript 文件，没有。我从 Dymo 网站上看不到打印机接受 PostScript 输入，那么您如何将 PostScript 文件发送给它？

添加以响应问题中的编辑。

好吧，我并不完全清楚你期望它是什么样子。

您的原始评论指的是黑色方块，但 PostScript 不包含黑色方块，它绘制了一个纵横比为 20:1 的矩形。您已将媒体设置为比长度更宽 (252,123)，但随后您使用方向将内容旋转 270 度。这是真的，这是肖像，但颠倒了。如果你想要肖像，为什么不将媒体设置为肖像？

简单地说，原点是照片中拇指正上方的角落，我认为打印的长边和短边相对于实际标签是颠倒的。

请注意，BoundingBox 注释是*注释*并且被 PostScript 解释器忽略，因此更改它没有任何效果。

也许你能解释你想要达到的目标？

# c++ - 将网格写入文件

> ID：15660534
> 
> 赞同：0
> 
> 时间：2013-03-27T13:50:50.633
> 
> 标签：c++

我正在编写代码来读取一组数字，然后将它们显示在屏幕上的 4x4 网格中，然后程序将确定它是否是幻方。我的问题是如何让用户将数字输入到 readData 方法中显示的文件中，以便在调用该方法时显示用户网格。

文件 data.txt 也存储在哪里？

谢谢

```
#include<iostream>
#include<fstream>
using namespace std;
const int dimension = 4;   // dimension for the array
typedef int Sq[dimension] [dimension];  // declare vector for type names

void ReadData(Sq square ) // read data from file
{  ifstream inFile;
  char fileName[13] = "data.txt";
  inFile.open (fileName);  // open file for reading                
  for (int r = 0; r < dimension; r++)   // row loop
      for ( int c = 0; c < dimension; c++)  // column loop
            inFile >> square[r][c]; // read data into matrix
      inFile.close( ); // close the file                
}

void Display ( const Sq square ) // display matrix
{ cout << " Magic Square Program " << endl << endl;
 for (int r = 0; r < dimension; r++)
   { for ( int c = 0; c < dimension; c++)
        { cout.width(6);  //set output width to 6 characters
           cout << square[r][c] << "\t ";  // display numbers
            }
       cout << endl;
    }    
 }
bool magicSquare( Sq square)  // add rows, columns, and diagonals
{ int firstSum = 0, sum;
  bool magic = true;
  for (int r = 0; r < dimension; r++) // add 1st column for a comparison
      firstSum += square[r][1]; 
   for (int r = 1; r < dimension; r++) // row loop first when adding rows
      { sum = 0;
         for ( int c = 0; c < dimension; c++)
             sum += square[r][c];  // add row
         if ( sum != firstSum)  // check for magic failure
              return (false);  // not magic
       }

     for ( int c = 0; c < dimension; c++)   // column loop first when adding columns
       { sum = 0;
          for (int r = 0; r < dimension; r++)
              sum += square[r][c];   // add columns
              if ( sum != firstSum)  // check for magic failure
               return (false);  // not magic
        }
     sum = 0;
     for (int r = 0; r < dimension; r++)  
          sum += square[r][r];   // add front diagonal
        if ( sum != firstSum)  // check for magic failure
           return (false);  // not magic
      sum = 0;
      for (int r = 0; r < dimension; r++)  
          sum += square[r][dimension - r - 1];   // add back diagonal
         if ( sum != firstSum)  // check for magic failure
          return (false);  // not magic
      else
          return (true);
      }  // end magicSquare function

int main( )
{
  Sq square;
 ReadData( square);  // read data from file
 Display ( square);  // display matrix
 if ( magicSquare(square) )   // check for magic property
    cout << "\n This Square is Magic \n " << endl;
 else
    cout << "\n This Square is Not Magic \n " << endl;
 system("Pause");
 return(0);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:00:31.317

最简单的方法是让程序将文件名作为命令行参数。Main 应该看起来像这样，`argc`参数的数量在哪里，并且`argv[]`是指向它们的 char 指针数组（`argv[0]`始终是可执行文件的名称）。请参阅[int argc, char *argv[] 是什么意思？](https://stackoverflow.com/questions/3024197/what-does-int-argc-char-argv-mean)

```
int main(int argc, char * argv[]) 
```

那么，你做

```
if (argc == 2)
{
   ReadData(square, argv[1]);
   ...
}
else
  ... 
```

ReadData 看起来像这样：-

```
void ReadData(Sq &square, const std::string &filename) // read data from file
{
  ifstream inFile;
  inFile.open (filename);  // open file for reading 
```

笔记！您需要将 square 作为*参考*参数 ( `&square`) 否则您的输入数据将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:56:09.583

> 我的问题是如何让用户将数字输入到 readData 方法中显示的文件中？

礼貌地问？由于它是磁盘上的文件，因此用户必须在程序启动*之前填充它。*如果文件不存在，您可以使用适当的`ifstream`标志**不创建文件，而是显示错误消息，然后终止程序。**

> 文件 data.txt 也存储在哪里？

在二进制文件的当前执行路径中。这可能是也可能不是二进制文件所在的文件夹。

作为旁注，当您使用 C++ 时，`std::array<>`可能比 C 样式数组更适合。

# java - 使用 Spring AOP 获取方法参数？

> ID：15660535
> 
> 赞同：86
> 
> 时间：2013-03-27T13:50:52.480
> 
> 标签：java, spring

我正在使用 Spring AOP 并具有以下方面：

```
@Aspect
public class LoggingAspect {

    @Before("execution(* com.mkyong.customer.bo.CustomerBo.addCustomer(..))")
    public void logBefore(JoinPoint joinPoint) {

        System.out.println("logBefore() is running!");
        System.out.println("hijacked : " + joinPoint.getSignature().getName());
        System.out.println("******");
    }

} 
```

以上方面拦截`addCustomer`方法执行。`addCustomer`方法将字符串作为输入。但我需要记录传递给`addCustomer`方法内部`logBefore`方法的输入。
有可能这样做吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-03-27T14:01:00.590

你有几个选择：

首先，您可以使用[`JoinPoint#getArgs()`](http://www.eclipse.org/aspectj/doc/released/runtime-api/org/aspectj/lang/JoinPoint.html#getArgs%28%29)返回`Object[]`包含建议方法的所有参数的方法。你可能需要根据你想对它们做什么来做一些投射。

其次，您可以`args`像这样使用切入点表达式：

```
// use '..' in the args expression if you have zero or more parameters at that point
@Before("execution(* com.mkyong.customer.bo.CustomerBo.addCustomer(..)) && args(yourString,..)") 
```

那么您的方法可以改为定义为

```
public void logBefore(JoinPoint joinPoint, String yourString) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-27T13:59:51.500

是的，可以使用[getArgs找到任何参数的值](http://www.eclipse.org/aspectj/doc/next/runtime-api/org/aspectj/lang/JoinPoint.html#getArgs%28%29)

```
@Before("execution(* com.mkyong.customer.bo.CustomerBo.addCustomer(..))")
public void logBefore(JoinPoint joinPoint) {

   Object[] signatureArgs = thisJoinPoint.getArgs();
   for (Object signatureArg: signatureArgs) {
      System.out.println("Arg: " + signatureArg);
      ...
   }
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-11-02T15:28:57.557

如果您必须记录所有参数或您的方法有一个参数，您可以简单地使用 getArgs ，如先前答案中所述。

如果你必须记录一个特定的参数，你可以注释它，然后像这样恢复它的值：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.PARAMETER)
public @interface Data {
 String methodName() default "";
}

@Aspect
public class YourAspect {

 @Around("...")
 public Object around(ProceedingJoinPoint point) throws Throwable {
  Method method = MethodSignature.class.cast(point.getSignature()).getMethod();
  Object[] args = point.getArgs();
  StringBuilder data = new StringBuilder();
    Annotation[][] parameterAnnotations = method.getParameterAnnotations();
    for (int argIndex = 0; argIndex < args.length; argIndex++) {
        for (Annotation paramAnnotation : parameterAnnotations[argIndex]) {
            if (!(paramAnnotation instanceof Data)) {
                continue;
            }
            Data dataAnnotation = (Data) paramAnnotation;
            if (dataAnnotation.methodName().length() > 0) {
                Object obj = args[argIndex];
                Method dataMethod = obj.getClass().getMethod(dataAnnotation.methodName());
                data.append(dataMethod.invoke(obj));
                continue;
            }
            data.append(args[argIndex]);
        }
    }
 }
} 
```

使用示例：

```
public void doSomething(String someValue, @Data String someData, String otherValue) {
    // Apsect will log value of someData param
}

public void doSomething(String someValue, @Data(methodName = "id") SomeObject someData, String otherValue) {
    // Apsect will log returned value of someData.id() method
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-04-12T13:15:04.087

如果您为许多建议定义一个切入点，还有另一种方法可能会有所帮助：

```
@Pointcut("execution(@com.stackoverflow.MyAnnotation * *(..))")
protected void myPointcut() {
}

@AfterThrowing(pointcut = "myPointcut() && args(someId,..)", throwing = "e")
public void afterThrowingException(JoinPoint joinPoint, Exception e, Integer someId) {
    System.out.println(someId.toString());
}

@AfterReturning(pointcut = "myPointcut() && args(someId,..)")
public void afterSuccessfulReturn(JoinPoint joinPoint, Integer someId) {
    System.out.println(someId.toString());
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-11-07T06:46:06.387

您可以使用以下任一方法。

```
@Before("execution(* ong.customer.bo.CustomerBo.addCustomer(String))")
public void logBefore1(JoinPoint joinPoint) {
    System.out.println(joinPoint.getArgs()[0]);
 } 
```

或者

```
@Before("execution(* ong.customer.bo.CustomerBo.addCustomer(String)), && args(inputString)")
public void logBefore2(JoinPoint joinPoint, String inputString) {
    System.out.println(inputString);
 } 
```

joinpoint.getArgs() 返回对象数组。由于输入是单个字符串，因此只返回一个对象。

在第二种方法中，在通知方法中的表达式和输入参数中的名称应该相同，`args(inputString)`即`public void logBefore2(JoinPoint joinPoint, String inputString)`

此处，`addCustomer(String)`表示带有一个 String 输入参数的方法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-27T14:00:14.127

如果是单个 String 参数，请执行以下操作： `joinPoint.getArgs()[0];`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-05T06:15:51.653

您可以获取方法参数及其值，如果使用以下代码使用注释进行注释：

`Map<String, Object> annotatedParameterValue = getAnnotatedParameterValue(MethodSignature.class.cast(jp.getSignature()).getMethod(), jp.getArgs());` ……

```
private Map<String, Object> getAnnotatedParameterValue(Method method, Object[] args) {
        Map<String, Object> annotatedParameters = new HashMap<>();
        Annotation[][] parameterAnnotations = method.getParameterAnnotations();
        Parameter[] parameters = method.getParameters();

        int i = 0;
        for (Annotation[] annotations : parameterAnnotations) {
            Object arg = args[i];
            String name = parameters[i++].getDeclaringExecutable().getName();
            for (Annotation annotation : annotations) {
                if (annotation instanceof AuditExpose) {
                    annotatedParameters.put(name, arg);
                }
            }
        }
        return annotatedParameters;
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-05-11T22:13:42.100

如果您使用@Aspect 选项是在您的Aspect 中添加此方法并发送JoinPoint 和您需要的参数名称。

```
private Object getParameter(ProceedingJoinPoint joinPoint, String parameterName) {
    Object valueParameter = null;
    if (Objects.nonNull(joinPoint) && joinPoint.getSignature() instanceof MethodSignature
            && Objects.nonNull(parameterName) ) {
        MethodSignature method = (MethodSignature)joinPoint.getSignature();
        String[] parameters = method.getParameterNames();
        for (int t = 0; t< parameters.length; t++) {
            if( Objects.nonNull(parameters[t]) && parameters[t].equals(parameterName)) {
                Object[] obj = joinPoint.getArgs();
                valueParameter = obj[t];
            }
        }
    }
    return valueParameter;
} 
```

和调用示例：

```
Object parameterObject = getParameter(joinPoint, "nameClient");
if ( Objects.nonNull(parameterObject) ) {
    String parametro = String.valueOf(parameterObject);
} 
```

只需要知道转换对象的类型

# magento-1.7 - 了解慢查询

> ID：15660540
> 
> 赞同：0
> 
> 时间：2013-03-27T13:51:08.293
> 
> 标签：magento-1.7, mysql-slow-query-log

我为 mySQL 启用了慢查询日志，以观察执行时间超过 10 秒的慢查询。然后我发现只有一个查询记录在 mysql.slow_log 表中。那是：

```
SELECT `e`.*, IF(at_is_active.value_id > 0, at_is_active.value, at_is_active_default.value) AS `is_active`, IF(at_include_in_menu.value_id > 0, at_include_in_menu.value, at_include_in_menu_default.value) AS `include_in_menu`, `core_url_rewrite`.`request_path` FROM `catalog_category_entity` AS `e`
 INNER JOIN `catalog_category_entity_int` AS `at_is_active_default` 
   ON (`at_is_active_default`.`entity_id` = `e`.`entity_id`) 
   AND (`at_is_active_default`.`attribute_id` = '42') 
   AND `at_is_active_default`.`store_id` = 0
 LEFT JOIN `catalog_category_entity_int` AS `at_is_active` 
   ON (`at_is_active`.`entity_id` = `e`.`entity_id`) 
   AND (`at_is_active`.`attribute_id` = '42') 
   AND (`at_is_active`.`store_id` = 1)
 INNER JOIN `catalog_category_entity_int` AS `at_include_in_menu_default` 
   ON (`at_include_in_menu_default`.`entity_id` = `e`.`entity_id`) 
   AND (`at_include_in_menu_default`.`attribute_id` = '67') 
   AND `at_include_in_menu_default`.`store_id` = 0
 LEFT JOIN `catalog_category_entity_int` AS `at_include_in_menu` 
   ON (`at_include_in_menu`.`entity_id` = `e`.`entity_id`) 
   AND (`at_include_in_menu`.`attribute_id` = '67') 
   AND (`at_include_in_menu`.`store_id` = 1)
 LEFT JOIN `core_url_rewrite` 
   ON (core_url_rewrite.category_id=e.entity_id) 
   AND (core_url_rewrite.is_system=1 
   AND core_url_rewrite.product_id IS NULL AND core_url_rewrite.store_id='1' 
   AND id_path LIKE 'category/%') 
WHERE (`e`.`entity_type_id` = '3') 
   AND (`e`.`entity_id` IN('####HERE ARE SOME IDs####')) 
   AND (IF(at_is_active.value_id > 0, at_is_active.value, at_is_active_default.value) = '1') 
   AND (IF(at_include_in_menu.value_id > 0, at_include_in_menu.value, at_include_in_menu_default.value) = '1') 
```

它还导致高 CPU 使用率。我在同一时间观察了日志时间和 CPU 监控曲线并发现了这一点。它经常发生在 9/10 小时间隔之后。当 magento 调用/执行此查询时，您能否帮助我，以便我可以更改负责执行此查询的任何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T04:45:58.637

这可能是由索引 catalogue_url 引起的

一个快速的解决方法是将所有索引设置为手动。

然后通过 cron 每小时运行这个 shell 脚本：

```
php shell/indexer.php --reindex catalog_product_attribute
php shell/indexer.php --reindex catalog_product_price
php shell/indexer.php --reindex tag_summary
php shell/indexer.php --reindex cataloginventory_stock
php shell/indexer.php --reindex catalogsearch_fulltext
php shell/indexer.php --reindex catalog_category_product
php shell/indexer.php --reindex catalog_category_flat
php shell/indexer.php --reindex catalog_product_flat 
```

它索引除 url 之外的所有内容。

然后每晚运行：

```
<?php

echo "clearing core_url_rewrite so that indexer can repopulate immediately\n";

require_once "/home/path/to/store/app/Mage.php";
umask( 0 );
Mage::App('default');

$resource = Mage::getSingleton('core/resource');

$writeConnection = $resource->getConnection('core_write');

$query = "TRUNCATE `core_url_rewrite`";

$writeConnection->query($query);

echo "cleared\n";

$start = time();

echo "reindexing catalog_url start \n";

$process = Mage::getSingleton('index/indexer')->getProcessByCode('catalog_url');
$process->reindexEverything();

$finish = time() - $start;

echo "reindexing catalog_url finished in ".$finish." seconds \n";

?> 
```

# group-by - 在关系代数中使用聚合和/或组进行查询 - 计数、最大值、最小值等

> ID：15660545
> 
> 赞同：2
> 
> 时间：2013-03-27T13:51:16.183
> 
> 标签：group-by, count, max, aggregate-functions, relational-algebra

我读过很多教科书并浏览了互联网上的很多页面，但我无法理解函数/运算符（如 min、max、count 等）如何聚合在关系/表或元组/行组中关系/表是用诸如∪（联合）、∩（交集）、x（连接）、-（减号）、π（投影）等基本操作构建的。

谁能告诉我如何用关系代数表达这些函数/运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T11:07:09.393

关系代数中的计算功能尚未完全包括在内。

在关系代数中，模式 (A1, A2, ... An) 上的聚合操作如下所示：

```
G1, G2, ..., Gm g f1(A1'), f2(A2'), ..., fk(Ak') (r) 
```

其中每个`Aj', 1 ≤ j ≤ k`，是原始属性之一`Ai, 1 ≤ i ≤ n`。

g 前面的属性是分组属性，其功能类似于 SQL 中的“group by”子句。然后有任意数量的聚合函数应用于各个属性。该操作适用于任意关系 r。分组属性是可选的，如果未提供，聚合函数将应用于应用操作的整个关系。

假设我们有一个名为 Account 的表，其中包含三列，即 Account_Number、Branch_Name 和 Balance。我们希望找到每个分支的最大余额。这是由`Branch_NameGMax(Balance)(Account)`. 无论分行如何，要找到所有账户的最高余额，我们可以简单地写`GMax(Balance)(Account)`.

# c++ - 程序可以在 ideone 上运行，但不能在本地运行（可能存在内存错误）

> ID：15660546
> 
> 赞同：0
> 
> 时间：2013-03-27T13:51:16.353
> 
> 标签：c++, algorithm, memory

[https://ideone.com/822Egw](https://ideone.com/822Egw)

我正在尝试解决 BFS 练习，当我使用 ideone 的编译器时，它可以工作并打印出“2 4”，这是此输入的正确输出：

```
7 8
..#...##
.##.....
###.A..A
.#......
.#....A.
...A....
........ 
```

这是完整的代码：

```
#include <stdio.h>
#include <string.h>
#include <queue>

using namespace std;

#define MAX 1001

struct node
{
  int x;
  int y;
  int distance;
};

int l, c;
char grid[MAX][MAX], temp;
node clouds[MAX * MAX];
int n_clouds = 0;
int i, u;
int visited[MAX][MAX];
int dx[] = {-1, 0, 1, 0};
int dy[] = {0, -1, 0, 1};
int n_min, n_max;

inline int max(int a, int b)
{
  return a > b ? a : b;
}

inline int min(int a, int b)
{
  return a < b ? a : b;
}

void read_input()
{
  scanf("%d %d", &l, &c);

  for (i = 0; i < l; i++)
  {
    for (u = 0; u < c; u++)
    {
      scanf(" %c", &temp);
      grid[i][u] = temp;

      if (temp == '#')
      {
        node cloud;
        cloud.x = u;
        cloud.y = i;

        clouds[n_clouds] = cloud;
        n_clouds++;
      }
    }
  }
}

void bfs(node start)
{
  queue<node> q;
  q.push(start);

  memset(visited, 0, sizeof visited);

  while (!q.empty())
  {
    node current = q.front();
    q.pop();

    int x = current.x;
    int y = current.y;
    int distance = current.distance;

    if (x < 0 || y < 0 || x >= c || y >= l || visited[y][x])
    {
      continue;
    }

    //printf("x: %d, y: %d\n", x, y);

    visited[y][x] = 1;

    if (grid[y][x] == 'A')
    {
      printf("distance: %d\n", distance);

      if (n_min == -1)
        n_min = distance;
      else
        n_min = min(n_min, distance);

      n_max = max(n_max, distance);
      return;
    }

    node node;
    node.distance = distance + 1;

    int k;
    for (k = 0; k < 4; k++)
    {
      node.x = x + dx[k];
      node.y = y + dy[k];
      q.push(node);

      //printf("node.x = %d, node.y = %d, k = %d\n", node.x, node.y, k);
    }
  }
}

int main()
{
  read_input();

  n_min = -1;
  n_max = -1;

  for (i = 0; i < n_clouds; i++)
  {
    bfs(clouds[i]);
  }

  printf("%d %d\n", n_min, n_max);

  return 0;
} 
```

我正在`g++ file.cpp -o file`编译，这是我的 4GB RAM 笔记本电脑上的本地输出：

```
distance: 4196516
distance: 4196515
distance: 4196514
distance: 4196516
distance: 4196515
distance: 4196516
distance: 4196515
distance: 4196514
distance: 4196516
distance: 4196515
4196514 4196516 
```

它与 ideone 的输出非常不同：

```
distance: 4
distance: 3
distance: 2
distance: 4
distance: 3
distance: 4
distance: 3
distance: 2
distance: 4
distance: 3
2 4 
```

我猜这是某种可能由 [MAX][MAX] 二维数组引起的内存错误，但我认为我可以有 [1001][1001] 数组。我需要关于正在发生的事情的想法。另外，我相信任何输入都会发生这种情况，因为有了这个，我也会得到奇怪的巨大数字：

```
3 3
#..
...
..A 
```

在 ideone 我得到正确的输出：

```
distance: 4
4 4 
```

这个程序应该计算从任何云（'#'）到机场（'A'）的最小和最大距离。

这是 valgrind 的输出，我认为它没有报告任何内存错误：

```
~/src/oni> valgrind ./nuvemcinzas < nuvemcinzas_input.txt 
==20861== Memcheck, a memory error detector
==20861== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==20861== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==20861== Command: ./nuvemcinzas
==20861== 
==20861== Conditional jump or move depends on uninitialised value(s)
==20861==    at 0x53954F1: vfprintf (vfprintf.c:1629)
==20861==    by 0x539E8D8: printf (printf.c:35)
==20861==    by 0x400C71: bfs(node) (in /home/david/src/oni/nuvemcinzas)
==20861==    by 0x400E25: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
==20861== Use of uninitialised value of size 8
==20861==    at 0x53937EB: _itoa_word (_itoa.c:195)
==20861==    by 0x5395837: vfprintf (vfprintf.c:1629)
==20861==    by 0x539E8D8: printf (printf.c:35)
==20861==    by 0x400C71: bfs(node) (in /home/david/src/oni/nuvemcinzas)
==20861==    by 0x400E25: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
==20861== Conditional jump or move depends on uninitialised value(s)
==20861==    at 0x53937F5: _itoa_word (_itoa.c:195)
==20861==    by 0x5395837: vfprintf (vfprintf.c:1629)
==20861==    by 0x539E8D8: printf (printf.c:35)
==20861==    by 0x400C71: bfs(node) (in /home/david/src/oni/nuvemcinzas)
==20861==    by 0x400E25: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
distance: 4196516
==20861== Conditional jump or move depends on uninitialised value(s)
==20861==    at 0x400EB9: max(int, int) (in /home/david/src/oni/nuvemcinzas)
==20861==    by 0x400CBA: bfs(node) (in /home/david/src/oni/nuvemcinzas)
==20861==    by 0x400E25: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
distance: 4196515
==20861== Conditional jump or move depends on uninitialised value(s)
==20861==    at 0x400C7B: bfs(node) (in /home/david/src/oni/nuvemcinzas)
==20861==    by 0x400E25: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
==20861== Conditional jump or move depends on uninitialised value(s)
==20861==    at 0x400ED5: min(int, int) (in /home/david/src/oni/nuvemcinzas)
==20861==    by 0x400C9F: bfs(node) (in /home/david/src/oni/nuvemcinzas)
==20861==    by 0x400E25: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
distance: 4196514
distance: 4196516
distance: 4196515
distance: 4196516
distance: 4196515
distance: 4196514
distance: 4196516
distance: 4196515
==20861== Conditional jump or move depends on uninitialised value(s)
==20861==    at 0x53954F1: vfprintf (vfprintf.c:1629)
==20861==    by 0x539E8D8: printf (printf.c:35)
==20861==    by 0x400E66: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
==20861== Use of uninitialised value of size 8
==20861==    at 0x53937EB: _itoa_word (_itoa.c:195)
==20861==    by 0x5395837: vfprintf (vfprintf.c:1629)
==20861==    by 0x539E8D8: printf (printf.c:35)
==20861==    by 0x400E66: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
==20861== Conditional jump or move depends on uninitialised value(s)
==20861==    at 0x53937F5: _itoa_word (_itoa.c:195)
==20861==    by 0x5395837: vfprintf (vfprintf.c:1629)
==20861==    by 0x539E8D8: printf (printf.c:35)
==20861==    by 0x400E66: main (in /home/david/src/oni/nuvemcinzas)
==20861== 
4196514 4196516
==20861== 
==20861== HEAP SUMMARY:
==20861==     in use at exit: 0 bytes in 0 blocks
==20861==   total heap usage: 49 allocs, 49 frees, 15,896 bytes allocated
==20861== 
==20861== All heap blocks were freed -- no leaks are possible
==20861== 
==20861== For counts of detected and suppressed errors, rerun with: -v
==20861== Use --track-origins=yes to see where uninitialised values come from
==20861== ERROR SUMMARY: 208 errors from 9 contexts (suppressed: 2 from 2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:55:30.480

您没有正确初始化云数组中的距离值

尝试改变这个

```
 node cloud;
    cloud.x = u;
    cloud.y = i;
    clouds[n_clouds] = cloud; 
```

对此

```
 node cloud;
    cloud.x = u;
    cloud.y = i;
    cloud.distance = 0;
    clouds[n_clouds] = cloud; 
```

# css - 使用 Kellum 方法和搜索文本时出现奇怪的图像替换错误

> ID：15660566
> 
> 赞同：0
> 
> 时间：2013-03-27T13:52:12.303
> 
> 标签：css, image-replacement

我在[Kellum](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/)方法中发现了一个奇怪的错误：

基本上在 webkit 中，如果您按 CTRL+F 并搜索`Hello`文本会返回到视图中（按几次输入以循环浏览它），这在使用它进行图像替换等时会出现问题。如果可能的话，如何解决这个问题，同时保留使用“Kellum”方法？

[http://jsfiddle.net/4d5H6/](http://jsfiddle.net/4d5H6/)

```
<div class="replace">
Hello
</div>

div.replace{background:#FF0000; height:40px; width:40px; text-indent:100%; white-space:nowrap; overflow:hidden;} 
```

# c# - 在 ASPX 项目中设置 CurrentUI

> ID：15660576
> 
> 赞同：0
> 
> 时间：2013-03-27T13:52:29.703
> 
> 标签：c#, asp.net, jquery, cultureinfo

我正在 webforms aspx 项目中构建一个多语言站点，并且我正在考虑执行此操作的最佳解决方案。

我在 MasterPage 上有一些图像，单击后，我正在调用 Jquery 方法，该方法应重定向到 Web 方法。

反过来，我有一个正在初始化文化的基本页面，并且除了 MasterPage 之外的所有页面都继承自它。

到目前为止，我有以下内容：-

HTML:-

```
<div class="LocalizationFlags">
<img src="Images/gb.png" onclick="langSelection('gb')" /> &nbsp; &nbsp; 
<img src="Images/fr.png" onclick="langSelection('fr')"/> &nbsp; &nbsp; 
<img src="Images/es.png" onclick="langSelection('es')"/> &nbsp; &nbsp; 
<img src="Images/de.png" onclick="langSelection('de')"/> &nbsp; &nbsp; 
<img src="Images/it.png" onclick="langSelection('it')"/>
</div> 
```

jQuery :-

```
 function langSelection(lang) {
    setSession(lang);
};

function setSession(Lang) {
    var args = {
        lang: Lang
    };
    $.ajax({
        type: "POST",
        url: "Site.Master.aspx/SetUserCulture",
        data: JSON.stringify(args),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function () {
            alert('Success.');
        },
        error: function () {
            alert("Fail");
        }
    });
}; 
```

站点.Master.cs

```
 [WebMethod(EnableSession = true)]
    private void SetUserCulture(string lang)
    {
        HttpContext.Current.Session["CurrentUI"] = lang;
    } 
```

BasePage.cs

```
 protected override void InitializeCulture()
    {
        if (Session["CurrentUI"] != null)
        {
            String selectedLanguage = (string)Session["CurrentUI"];
            UICulture = selectedLanguage;
            Culture = selectedLanguage;

            Thread.CurrentThread.CurrentCulture =
                CultureInfo.CreateSpecificCulture(selectedLanguage);
            Thread.CurrentThread.CurrentUICulture = new
                CultureInfo(selectedLanguage);
        }

        base.InitializeCulture();
    } 
```

现在，我目前的情况有几个问题。Jquery 不起作用，抛出“失败”，而且我知道我不能使用 Site.Master.cs 来放入 webmethod。

是否只是为此方法创建 WCF 服务，然后从 Jquery 代码中调用它的情况？

我在正确的轨道上吗？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:08:42.577

您的 ajax 请求很可能会失败，因为它没有到达目的地 - 正如您所说的，您不能`WebMethod`在主代码隐藏中拥有。此外，无需使用 JSON 序列化您的参数，普通对象也可以正常工作。此外，`dataType: json`这里不需要 - 您不会为此请求返回任何数据。

这里不需要 Web 服务 - 一个简单的 HTTP 处理程序就足够了。只是不要忘记实现标记接口`IRequiresSessionState`以访问处理程序内的会话。

一般来说，cookie 可能是存储用户文化的更好地方，因为您可能希望在同一用户的不同访问中保留此信息。另一个选项也是数据库中的用户配置文件 - 如果您正在处理注册用户。但是，您当前使用会话的实现应该可以工作。

# jasper-reports - 如何在 seq 中获取条形码，两个彼此相邻。贾斯珀 iReport

> ID：15660578
> 
> 赞同：0
> 
> 时间：2013-03-27T13:52:34.253
> 
> 标签：jasper-reports, ireport

我正在 Jasper iReport 中设计条形码标签。它是彼此相邻的 2 个标签。目前我有这样的：

![在此处输入图像描述](../Images/e9f736e5b932a3085086c5e3cec50189.png)

如您所见，它的相同条形码编号彼此相邻。我希望它看起来像这样：

![在此处输入图像描述](../Images/b16b77d6bb679f7cb547ad76e2eb4300.png)

因此，我需要唯一的，而不是相邻的两个相同的条形码编号。不知道如何解决这个问题。有人可以帮忙吗？

这是我使用的代码：

```
select to_char(pallet_id_no_seq.nextval) as barcode 
from dual 
connect by level <= $p{quantity} 
```

正如您在上面看到的，查询有一个参数，我可以使用它来选择要在 Jasper 的详细信息带中打印多少条码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:23:50.590

试试这样：

```
 SELECT to_char(pallet_id_no_seq.nextval) as barcode 
 FROM (
      SELECT * FROM DUAL
      CONNECT BY LEVEL <= $P{quantity}
  ) 
```

在 iReport 中：在 Report Inspector 中右键单击您的报告名称，然后选择 Page Format。将列数更改为 2 并保存。再次右键单击报告并选择属性。在这里，您可能需要将打印顺序更改为水平 - 测试它并查看它的外观。

# visual-studio-2010 - 调试 CUDA 内核

> ID：15660583
> 
> 赞同：2
> 
> 时间：2013-03-27T13:52:48.590
> 
> 标签：visual-studio-2010, opencv, cuda

我有一个 OpenCV 应用程序，带有额外的 CUDA( *.cu* ) 文件，我想使用**Parallel NSight**进行调试。NSight 调试适用于 CUDA 示例（没有 OpenCV *.cpp*文件），但是当我尝试在我的应用程序中启动调试器时，调试器会加载**许多**附加模块（“未加载符号”）并因以下错误而崩溃：

```
OpenCV Error: Gpu API call (out of memory) in unknown function, file ..\.\
opencv-2.4.4\modules\core\src\gpumat.cpp, line 1415 
```

此外，还会打开一个窗口：“Microsoft Visual c++ 调试库”，其中包含：“调试错误！” 和“已调用 R6010 中止”。

可能是什么问题？可以避免加载此模块吗？我不确定它们是否必要。

以及如何正确调试 CUDA 内核？我知道 CPU 和 GPU 代码不能同时调试。

**编辑：**

我很确定加载超过 200 个内核会使其崩溃。单个 gpu::GpuMat 声明本身有 100 多个内核（模块），然后 SURF、BFM 和类似算法运行其余的......

**我只想**调试放置断点的内核（即我自己的内核，而不是 OpenCV 的内核）。是否可以以某种方式排除其他模块/内核？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:28:26.010

听起来你的所有 OpenCV 内核都编译了符号，这不是你想要的。确保您没有使用 CUDA 调试标志构建 OpenCV。具体来说，您不希望将 -g/-G/--debug* 标志传递给 nvcc。

调试大量内核虽然会影响性能，但不应导致崩溃。我建议升级到 Nsight 3.0，现在可以从 Nsight Visual Studio Edition Early Access 站点获得。在这个版本中进行了许多改进。

# actionscript-3 - 从子元素访问选项卡导航器及其子元素

> ID：15660584
> 
> 赞同：0
> 
> 时间：2013-03-27T13:52:50.567
> 
> 标签：actionscript-3, apache-flex, air, flex4

我的主应用程序 mxml 我正在使用选项卡导航器，我可以通过以下代码在应用程序的任何位置访问该选项卡导航器..

mx.core.FlexGlobals.topLevelApplication.menuOption.selectedIndex=0;

现在我的问题是我在 transactionUI 中使用了一个切换按钮栏，它是选项卡导航器的子元素，我如何像上面提到的代码一样访问该元素？

**我的主要 mxml 选项卡导航器 ::**

```
<mx:TabNavigator   left="10" top="20" bottom="10" right="10" id="menuOption" >

    <ui1:homeUI label="Home" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" /> 

    <ui1:transactionUI label="Transaction" width="100%" height="100%" backgroundColor="#373737"  />     

        <ui1:calanderUI label="Employee service" width="100%" height="100%"  horizontalCenter="0"  backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />
        <ui1:ManagementUI label="Management" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />
        <ui1:reportUI label="Reports" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />

        <ui1:admin label="Admin" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />

    </mx:TabNavigator> 
```

在我的主应用程序 mxml 中，我使用的是选项卡导航器，我可以通过以下代码在应用程序的任何位置访问该选项卡导航器。

mx.core.FlexGlobals.topLevelApplication.menuOption.selectedIndex=0;

现在我的问题是我在 transactionUI 中使用了一个切换按钮栏，它是选项卡导航器的子元素，我如何像上面提到的代码一样访问该元素？

我的主要 mxml 选项卡导航器 ::

```
<ui1:homeUI label="Home" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" /> 

<ui1:transactionUI label="Transaction" width="100%" height="100%" backgroundColor="#373737"  />     

    <ui1:calanderUI label="Employee service" width="100%" height="100%"  horizontalCenter="0"  backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />
    <ui1:ManagementUI label="Management" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />
    <ui1:reportUI label="Reports" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />

    <ui1:admin label="Admin" width="100%" height="100%" backgroundColor="#373737" chromeColor="#181818" contentBackgroundColor="#181818" color="#FDFDFD" />

</mx:TabNavigator> 
```

****我在 transactionUI 中的切换栏 ::* ***

```
<s:NavigatorContent xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%"
                xmlns:ui="com.colan.*" xmlns:ui1="com.colan.ui.*"
                backgroundColor="#373737" chromeColor="#181818" 
                contentBackgroundColor="#181818" color="#FDFDFD">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[

        import mx.collections.*;
        import mx.core.*;
    ]]>
</fx:Script>
<mx:VBox horizontalAlign="center"  verticalAlign="middle" width="100%"  height="100%">

    <mx:HBox horizontalAlign="center"  verticalAlign="middle" width="100%"  height="15%" >

        <mx:ToggleButtonBar id="toggleButtonBar"
                            dataProvider="{viewStack}"    
                            selectedButtonTextStyleName="mySelectedButtonTextStyleName"
                            />

    </mx:HBox>
    <mx:HBox horizontalAlign="center"  verticalAlign="middle" width="100%"  height="85%" >

        <mx:ViewStack id="viewStack"                 
                      visible="{toggleButtonBar.selectedIndex > -1}" width="100%"  height="100%" >

            <ui1:transaction label="Transaction"/>
            <ui1:addClient label="Add  Client"/>
            <ui1:invoice label="Make invoice"/>
            <ui1:workCatalogue label="Work catalogue"/>
            <ui1:productCataloge label="Products Categories"/>

            <ui1:suppliers label="Offers"/>
            <ui1:calendarPlanUI label="Calendar"/>

        </mx:ViewStack>
    </mx:HBox>
</mx:VBox> 
```

请给我建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:31:47.690

((mx.core.FlexGlobals.topLevelApplication.menuOption).getChildAt(1) as transactionUI).toggleButtonBar

虽然这很粗略，但可以帮助您上手。没有测试过。

# css - 悬停时的图标字体背景

> ID：15660586
> 
> 赞同：0
> 
> 时间：2013-03-27T13:52:54.993
> 
> 标签：css, background, hover, icon-fonts

在我的网站[http://www.stefaanoyen.be](http://www.stefaanoyen.be)（左栏）的页脚中，我有一些社交媒体图标，它们是图标字体。悬停时，我想要红色的圆圈和白色的图标。红色圆圈有效，但它们后面有一个白色方块。如何将白色限制为图标/圆圈的形状？

这是我的 HTLM：

```
<p class="share"><a href="#">l</a> <a href="#">i</a> <a href="#">g</a> <a href="#">f</a></p> 
```

这是我的 CSS：

```
.share a {
color: #ececec;
text-decoration: none;
font: 50px 'socialicoregular', Helvetica, sans-serif;
}

.share:hover {
cursor: pointer;
}

.share a:hover {
color: #B61618;
text-decoration: none;
font: 50px 'socialicoregular', Helvetica, sans-serif;
background-color: #fff;
} 
```

非常感谢你的帮助！

斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:03:07.143

这个没有简单的解决方案，因为您只依赖一种字体。您可以尝试向元素添加一个`border-radius`（您`font-size`的设置为 50px，因此 25px 的半径可能会这样做，但您将不得不使用它） 。`.share a:hover`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:02:08.747

“图标/圆圈的形状”实际上是一个矩形。您正在为链接设置白色背景。链接是一个矩形。您将无法直接设置字体/字符的背景样式。

由于您的图标都是圆形的，因此您可以使用以下小技巧：

```
border-radius: 50px; 
```

这只是一个猜测的数字。这并不意味着它是正确的。只需找到与您的图标高度/宽度相匹配的那个。（您可能还需要使用 line-height 以确保您的字体是，或者至少看起来是垂直居中的。）

# sql - 在查询中选择逻辑。这在甲骨文中可能吗？

> ID：15660588
> 
> 赞同：1
> 
> 时间：2013-03-27T13:53:02.063
> 
> 标签：sql, oracle, oracle11g

我试图在查询的 select 语句上实现某种逻辑。我想要它，如果没有给出属性，或者如果 inAttribute 是'NONE'；它将返回日期和所有值（compprice、compspread、price、spread、run）。

如果在属性中给出了一个值，那么我希望它返回它请求的值（请参阅我尝试做的案例声明）。

下面是我的尝试，它只是不工作。请问有什么帮助吗？

```
 SELECT 
    mi.date,
    IF inAttribute = '' THEN

              mi.compprice, 
              mi.compspread, 
              mi.price, 
              mi.spread, 
              mi.run
              ELSE
                 CASE inAttribute
                      WHEN 'CP' THEN  mi.compprice, 
                      WHEN 'CS THEN mi.compspread, 
                      WHEN 'MP' THEN  mi.price, 
                      WHEN 'MS' THEN mi.spread, 
                      WHEN 'R' THEN mi.run
                 END 
    END IF
    FROM userValueTable mi
    WHERE mi.index_family = inIdxFamily
    AND mi.index_id = inIdxId
    AND mi.date_>= inStartDate
    AND mi.date_<= inEndDate
    ORDER by mi.date_ ASC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:06:25.457

几句话

*   您不能有从一行到另一行的可变列列表。
    *   '' 等于 NULL，将 NULL 与相等 ( = ) 进行比较总是错误的。*   您可以使用 CASE 子句拥有一些固定数量的列并设置任何列的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:06:06.940

Oracle SQL 中没有 IF，只有 PL/SQL 中。您必须将其重写为 CASE。与您在 ELSE 部分的查询中所做的相同（您在 'CS' THEN ... 之后错过了一个单引号）。

```
SELECT ...
 (CASE WHEN inAttribute IS NULL THEN mi.compprice
     WHEN .... THEN...
     WHEN .... THEN...
     ...
 ELSE ...
 END) AS some_column_alias
FROM ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:38:56.600

Oracle 没有`IF`for SQL。改为使用`CASE`- 它可以像`switch - case`您在查询中使用的 C/C#/Java/etc 一样，它也可以像`if`.

另外，如上所述：

*   除非您使用动态 SQL，否则您将无法返回恒定数量的列
*   在 Oracle 中，`''`被视为 NULL 因此而不是`= ''`使用`IS NULL`.

如果您不想使用动态 SQL，可以在选择列表中添加“类型”列，然后将任何不适用的值清空。您的下游逻辑可以根据类型选择要使用（或忽略）的值。这是一个例子：

```
SELECT
  mi.date,
  CASE
    WHEN inAttribute IS NULL THEN 'inAttrNull'
    ELSE 'inAttrNotNull'
    END AS RecordType,
  CASE WHEN inAttribute IS NULL THEN mi.compprice END AS compprice,
  CASE WHEN inAttribute IS NULL THEN mi.compspread END AS compspread,
  CASE WHEN inAttribute IS NULL THEN mi.price END AS price,
  CASE WHEN inAttribute IS NULL THEN mi.spread END AS spread,
  CASE WHEN inAttribute IS NULL THEN mi.run END AS run,
  CASE inAttribute
    WHEN 'CP' THEN mi.compprice
    WHEN 'CS' THEN mi.compspread
    WHEN 'MP' THEN mi.price
    WHEN 'MS' THEN mi.spread
    WHEN 'R'  THEN mi.run
  END AS SpecialValue
FROM userValueTable mi
... and your WHERE and ORDER BY clauses 
```

你会得到一个类似这样的结果集：

```
RecordType    compprice  compspread price      spread     run        specialvalue
------------- ---------- ---------- ---------- ---------- ---------- ------------
inAttrNotNull     (null)      (null)    (null)     (null)     (null)      1234.56
inAttrNull        111.11      222.22    333.33     444.44     555.55       (null) 
```

我知道这不是您想要的，但它可能是您可以使用的替代方案。

# c# - WPF C#如何为HighlightBrush Color设置动画？

> ID：15660589
> 
> 赞同：4
> 
> 时间：2013-03-27T13:53:03.310
> 
> 标签：c#, wpf, xaml, listview, animation

我正在尝试为 ListView 的选定项目颜色设置动画。

我可以通过这段代码访问这个“属性”：

```
<Style.Resources>
      <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Blue">
</Style.Resources> 
```

如何为这个“属性”的颜色设置动画？

```
 <Storyboard x:Key="MyStoryboard">
     <ColorAnimation Storyboard.TargetName="MyList" 
                     Storyboard.TargetProperty="{x:Static SystemColors.HighlightBrushKey}"    // compilation error
                     To="Gray" Duration="0:0:1" />
 </Storyboard> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:37:16.193

所以这里是 SampleStyle ;-)

它使用 ListViewItem 的模板，您可以在其中为 IsSelected-Property 的 Trigger Enter/Exit Actions 添加一个带有 ColorAnimation 的 Stoyboard！

```
<Style TargetType="{x:Type ListViewItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListViewItem}">
                <Border x:Name="Bd" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                    <Grid>
                        <GridViewRowPresenter VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                        <ContentPresenter x:Name="contentPresenter" Visibility="Collapsed" />
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="GridView.ColumnCollection" Value="{x:Null}">
                        <Setter TargetName="contentPresenter" Property="Visibility" Value="Visible"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="true">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="Bd" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                    From="Red" To="Blue" Duration="0:0:1" />
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                        <Trigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="Bd" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                    From="Blue" To="Transparent" Duration="0:0:1" />
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.ExitActions>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# c++ - VisualStudio 2012 外部包括可见性

> ID：15660591
> 
> 赞同：0
> 
> 时间：2013-03-27T13:53:13.933
> 
> 标签：c++, visual-c++

我有“source”和“include”文件夹，它们分别包含我的项目的 .cpp 和 .h 文件。我将它们与项目放在同一目录中。在项目中，我包含两个文件夹的内容，并在属性中添加“include”文件夹作为附加的包含目录。项目编译但我无法访问任何不是的标题通过智能感知与这些文件相关。例如 GL\glew.h 标头包含在我的标头中并在我的标头中使用，但在键入#include 时我无法在标头列表中看到这些标头。一旦我在“include”或“source”文件夹之外创建了一个 .cpp 文件，所有其余的项目包括再次在那里可见。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T09:32:30.833

我终于解决了这个问题。这是问题所在：

似乎在 VS2012 中使用真实路径是这样的：

**../../../SomeIncludeDir**

不会真正为智能工作。至少对我来说。我不得不在开头添加这个：

$(项目目录)

所以它是这样的：

**$(ProjectDir)/../../SomeIncludeDir**

这样VS就可以看到包含的目录了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:07:28.600

确保在项目属性中设置头文件的路径。将标头添加到解决方案资源管理器不会使它们对 IntelliSense 可见。

Alt+F7 打开属性页 > 配置属性 > C/C++ > 常规 > 附加包含目录

# mysql - 选择值 x WHERE x 具有相同的未知值 AND WHERE 值 y 在数组中

> ID：15660595
> 
> 赞同：1
> 
> 时间：2013-03-27T13:53:26.947
> 
> 标签：mysql, sql, select, relational-division

我有一个存储产品组的表。

```
table "products_groups"

id  |  id_group | id_product
============================
 1  |  1        | 1
 2  |  1        | 2
 3  |  1        | 3
 4  |  2        | 1
 5  |  2        | 2
 6  |  3        | 2 
```

我需要一个 SQL 查询来查找包含给定数组中所有 id_product 的 id_group。

```
product_ids = array(1);       // should return no results
product_ids = array(1,2);     // should only return id_group 2
product_ids = array(1,2,3);   // should only return id_group 1
product_ids = array(1,2,3,4); // should return no results 
```

我玩/四处搜索，最终卡在

```
SELECT p1.id_group
FROM products_groups p1, products_groups p2
WHERE p1.id <> p2.id
AND p1.id_group = p2.id_group
AND (
    p1.id_product = 1 
    OR p1.id_product = 2
    OR p1.id_product = 3
) 
```

但它显然没有给我我正在寻找的结果。不知道是我想的太简单还是太复杂。

注意：当然 id_product 值将在 SQL 中动态生成。它最终将与 PHP/Codeigniter 一起使用

背景信息：每个产品都有一个价格，但产品可以在一个有套餐价格的产品组中。这就是为什么我需要知道每个订单的产品是否在一个组中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:56:08.153

这个问题叫做`Relational Division`

 ~~~~```
SELECT  id_group
FROM    products_groups
WHERE   id_product IN (1,2)
GROUP   BY id_group
HAVING  COUNT(*) = 2 
```~~  ~~*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

或类似的东西，

```
SELECT  id_group
FROM    products_groups
GROUP   BY id_group
HAVING  SUM(id_product IN (1,2)) = COUNT(*) AND
        COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/909da/5)~~~~

# python - Oauth Python 推特身份验证

> ID：15660596
> 
> 赞同：0
> 
> 时间：2013-03-27T13:53:28.600
> 
> 标签：python, oauth

```
import oauth2 as oauth

key = "xxxxx"
secret = "xxxxx"

request_token_url = "https://api.twitter.com/oauth/request_token"

consumer = oauth.Consumer(key= key, secret= secret)
client = oauth.Client(consumer)

resp, content = client.request(request_token_url, "GET")

print content 
```

一旦我执行了这个脚本，它就可以正常工作，但是处理它给我的输出的最佳方法是什么。

输出类似于“xxxxxxxx&yyyyyyyyyy&zzzzzzzzz”

我需要使用变量 xxxx 和 yyyy 我如何解析这些并将它们放入变量中？

谢谢威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:58:06.987

```
output = content.split('&')
x = output[0]
y = output[1] 
```

还可以查看 Tweepy 以了解 Python 与 Twitter 的交互。 [https://github.com/tweepy/tweepy](https://github.com/tweepy/tweepy)

# ember.js - 在 ember 中，视图的名称是如何相对于路由器确定的？

> ID：15660598
> 
> 赞同：0
> 
> 时间：2013-03-27T13:53:47.977
> 
> 标签：ember.js

余烬rc1。我不明白视图是如何通过命名约定自动实例化它们的路由的。

我定义了以下资源：

```
 this.resource('groups', { path : '/groups' }, function() {
      this.resource('received', { path : '/received' }, function() {            
        this.route('show', { path : '/:asset_link_group_id' });
  }); 
```

当路由器为组/接收/索引实例化视图时，它会查找名为 ReceivedIndexView 的视图。为什么不 GroupsReceivedIndexView ？

控制器也是如此 - 它查找 ReceivedIndexController，而不是 GroupsReceivedIndexController。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:01:30.127

“嵌套在资源下的路由采用资源名称加上它们的名称作为路由名称”，来自[http://emberjs.com/guides/routing/defining-your-routes/](http://emberjs.com/guides/routing/defining-your-routes/)

我对设置的理解是查看路由，然后将其作为父资源，以便自动派生补丁。这样 /resource1/sameresourcename/new 和 /resource2/sameresourcename/new 实际上会导致问题，因为它不使用完整的“树”来生成这些路径/名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T16:00:22.343

我花了很多时间研究这个，因为我在理解命名约定的方式和原因时遇到了问题。这是我找到的关于选择哪些路由/资源来创建视图/控制器/资源名称的信息最丰富的站点。

来自 Peter “我们故意只嵌套一层深。正确的解决方案是 @jamesarosen 建议的。”

[https://github.com/emberjs/ember.js/issues/2086](https://github.com/emberjs/ember.js/issues/2086)

# ruby-on-rails - 如何在 Ruby on Rails 中使用额外列验证连接表的唯一性

> ID：15660599
> 
> 赞同：0
> 
> 时间：2013-03-27T13:53:49.693
> 
> 标签：ruby-on-rails, ruby

我在一个自引用的模型中有很多直通关系。在连接表中，我还有一个额外的列来定义关系的来源。向该关系添加新对象时，我想避免基于 user_id、friend_id 和 source_id 的连接表中的重复项

用户模型

```
 class User < ActiveRecord::Base
      has_many :friendships
      has_many :friends, :class_name => "User", :through => :friendships
 end 
```

加入模型

```
 class Friendship < ActiveRecord::Base
     attr_accessible :friend_id, :user_id, :source_id, :alert, :hide

     # Relationships
     belongs_to :user
     belongs_to :friend, :class_name => "User"
     has_one :source
 end 
```

我明白我可以做到这一点

```
 unless user.friends.include?(newFriend)
      user.friendships.build(:friend_id => friendUser.id, :source_id => source.id)
 end 
```

但这似乎会检查新用户是否存在于当前用户的朋友中。我需要检查连接模型级别并确保与给定源 ID 的连接不存在。

我知道有几种方法可以做到这一点，但我对 ruby​​ on rails 还是很陌生，我正在寻找“rails 方式”来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:55:23.083

您可以根据中间表中的多个列进行验证，如下所示：

```
 validates_uniqueness_of :user_id, :scope => [:friend_id, :source_id] 
```

# excel - 使用更改日期移动数据的宏

> ID：15660600
> 
> 赞同：0
> 
> 时间：2013-03-27T13:53:53.377
> 
> 标签：excel, vba

抱歉，如果没有很好地解释这一点，我是一个宏新手，所以我不确定这是否可能..

我希望为一些简单的统计报告创建一个工作日表，该表每天自动创建一个新行，并删除最旧的行，显示当天和前 6 天的数据。理想情况下，我希望当天在表格的顶部，并且每天在相应行中输入的数据向下移动 1 行，为新一天的统计数据创建空间。

作为关于我尝试做什么的一些背景信息.. 我基本上创建了一个友好的 UI 显示（离线 HTML），数据记录在一个非常简单的 5 列（统计）乘 7 行（工作日）表中。这个数据库需要由技术能力有限的多人更新，所以我基本上试图让他们尽可能容易地每天输入统计数据，而不必担心更新到正确的日期并确保他们正在替换正确的日期数据等理论上，最好自动化每天更新表格的过程，以便为他们输入当前日期数据创造空间，将昨天的数据下移一行（如果整个表格的单元格范围总是一样的，它应该允许我自动更新离线 HTML 显示）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:15:36.143

首先为日期标题单元格命名。（单击单元格。查看屏幕左上角出现单元格坐标的位置。“A1”、“B2”等...在该文本框中，输入标题名称：“MyDateHeader”

然后，使用此宏（您可以将其添加到工作簿打开事件，或激活）

```
Sub YourMacro()

    Dim DateHeader As Range
    Set DateHeader = Range("MyDateHeader")

    Dim FirstDateCell As Range
    Set FirstDateCell = DateHeader.Offset(1, 0)

    Dim MyDay As Integer, MyMonth As Integer, MyYear As Integer
    Dim CurrDay As Integer, CurrMonth As Integer, CurrYear As Integer

    MyDay = Day(FirstDateCell.Value)
    MyMonth = Month(FirstDateCell.Value)
    MyYear = Year(FirstDateCell.Value)

    CurrDay = Day(Date)
    CurrMonth = Month(Date)
    CurrYear = Year(Date)

    If (MyDay <> CurrDay) Or (MyMonth <> CurrMonth) Or (MyYear <> CurrYear) Then
        FirstDateCell.EntireRow.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromRightOrBelow
        DateHeader.Offset(1, 0).Value = Date 'Careful, FirstDateCell has moved down.
        DateHeader.Offset(8, 0).EntireRow.Clear
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:16:51.983

这应该让你开始：

```
Sub WeekdayTable()

Dim tbl As Range
Dim r As Integer

Set tbl = Range("A1:E7") 'Define your table, 5 columns x 7 rows. Modify as needed.

For r = tbl.Rows.Count To 2 Step -1
    tbl.Rows(r).Value = tbl.Rows(r - 1).Value
Next

'empty out row 1
tbl.Rows(1).Clear

'Assuming the column 1 contains valid DATE values, _
' we can use the DateAdd function to print the next date:
tbl.Cells(1, 1) = DateAdd("d", 1, tbl.Cells(2, 1))

End Sub 
```

# android - 为什么我在 Kindle Fire 设备上调试 Android 应用程序时无法查看本地 SQLite 数据库？

> ID：15660602
> 
> 赞同：3
> 
> 时间：2013-03-27T13:53:57.127
> 
> 标签：android, eclipse, android-sqlite, ddms, kindle-fire

我正在开发一个 Android 应用程序，并在 Kindle Fire 设备上对其进行调试。我实现了在 Kindle Fire 上调试所需的所有步骤，一切正常。但问题是我无法在设备上查看我的应用程序的 SQLite 数据库。我使用这个插件[http://www.tylerfrankenstein.com/browse-android -emulator-sqlite-database-eclipse](http://www.tylerfrankenstein.com/browse-android-emulator-sqlite-database-eclipse) 在模拟器上查看 SQLite 数据库，现在我想在设备上执行此操作。但是当我转到文件资源管理器中的数据文件夹时，我发现它是空的： ![](../Images/4388400918d869b9f29f1d10155fcee5.png) 如何解决这个问题并使用Kindle Fire 设备上的 SQLite 浏览器？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:04:38.660

您无法从生产硬件上的 DDMS 访问内部存储上的文件。

您可以尝试使用`adb shell run-as`命令行客户端来拉取数据库`adb`：[https ://stackoverflow.com/a/8434477/115145](https://stackoverflow.com/a/8434477/115145)

```
adb shell
run-as com.corp.appName
cat files/myFile.txt > /mnt/sdcard/myFile.txt 
```

# java - eclipse junit runner java createprocess报错87参数不正确

> ID：15660606
> 
> 赞同：0
> 
> 时间：2013-03-27T13:54:11.280
> 
> 标签：java, eclipse, junit

我正在做一个项目，并且有 Windows 7、64 位。我正在尝试帮助一位同事为这个项目进行开发。她也有一台 Windows 7 64 位机器。在这里机器上，应用程序大部分运行良好，我们可以在 Jetty 7 启动配置中加载应用程序，并按预期工作。但是，当她尝试运行任何 JUnit 测试项目时，她会收到“java createprocess error 87 the parameter is wrong”。我们已经验证了项目配置是一样的，classpath和windows路径都很好。她的 eclipse (Indigo) 和 Java 6 版本比我稍新。有人对这里可能出现的问题有任何想法吗？

# ios - 覆盖 loadView 会导致 viewDidLoad 和 loadView 在每次出现 VC 时触发

> ID：15660608
> 
> 赞同：0
> 
> 时间：2013-03-27T13:54:17.197
> 
> 标签：ios, objective-c, ios6, uiviewcontroller, subclass

我的视图层次结构位于几个自定义“根” UIViewController 子类上。我正在尝试为我的根 VC 子类之一设置自定义 self.view。在那里，我正在做：

**MyRootViewController_With_Scroll.h**

```
// Import lowest level root VC
#import "MyRootViewController.h"
// my custom scroll view I want to use as self.view
@class MyScrollView;

@interface MyRootViewController_With_Scroll : MyRootViewController {

}

@property (strong) MyScrollView *view;

@end 
```

**MyRootViewController_With_Scroll.m**

```
#import MyRootViewController_With_Scroll.h;

@interface MyRootViewController_With_Scroll ()

@end

@implementation MyRootViewController_With_Scroll

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)loadView
{
    NSLog(@"loading view");
    CGRect windowSize = [UIScreen mainScreen].applicationFrame;
    MyScrollView *rootScrollView = [MyScrollView scrollerWithSize:windowSize.size];
    self.view = rootScrollView;

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

// Getter and setter for self.view
- (MyScrollView *)view
{
    return (MyScrollView *)[super view];
}
- (void)setView:(MyScrollView *)view
{
    [super setView:view];
} 
```

根据 iOS6 文档，viewDidLoad 在应用程序的整个生命周期中只假设每个视图控制器触发一次。

我在这里做错了什么？是什么导致我的视​​图控制器反复调用 loadView/viewDidLoad？奇怪的是，我的应用程序“主屏幕”VC 只加载一次视图，但导航层级中的所有后续视图每次出现时都会触发 loadView。到底是怎么回事？

**编辑**我已将属性更改为`strong`. 发生同样的问题。

**编辑 2**我已经停止覆盖 loadView 并且它仍在发生。现在我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:59:31.187

这是预期的行为。如果您要从导航堆栈中弹出视图控制器，并且没有其他任何东西可以引用它们，那么它们将被释放。因此，当它再次出现时，它将是一个新的实例，所以它必须重新执行`loadView`等等。包括`self`在您的日志记录中，您应该看到它每次都是不同的对象。

您还将视图控制器的视图属性重新定义为`weak`- 如果您*正在*重新使用视图控制器对象，那么一旦视图没有超级视图，这将被取消。

在 iOS 6 之前，位于导航堆栈中间的视图控制器会在内存压力下卸载其视图：

```
root --> VC1 --> VC2 
```

VC2 在屏幕上，收到内存警告。VC1 将卸载它的视图。当您将 VC2 从堆栈中弹出时，VC1 将`loadView`再次调用。这不再发生。

但是，如果您已弹出回 VC1，并且没有任何东西对 VC2 有强引用，则 VC2 将被释放。当您将另一个 VC2 压入堆栈时，这是一个新实例，`loadView`将再次被调用。假设您正在代码中创建这些 VC2 的新实例，因此您应该能够知道您正在创建一个新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:01:34.893

那是因为您的视图属性较弱。所以它一直被重新分配。另外，我认为您根本不需要覆盖视图属性。

# oop - 如何在 MATLAB 的一个类中更改一个变量时更新所有变量？

> ID：15660611
> 
> 赞同：0
> 
> 时间：2013-03-27T13:54:31.953
> 
> 标签：oop, matlab

我正在编写一个乘以它的两个参数的乘法器类。如果未给出参数，则给出默认值 1。现在，当我更新一个变量时，我没有得到确切的产品。我的代码如下：

```
 classdef Multiplier
    properties (SetAccess = public, GetAccess = public)
        first;
        second;

    end

    properties(SetAccess = immutable, GetAccess = public)
        product;

    end

    methods

        function obj = Multiplier(varargin)

            if nargin == 0
                obj.first = 1;
                obj.second = 1;

            end
            if nargin == 1
                obj.first = varargin{1};
                obj.second = 1;

            end
            if nargin > 1
                obj.first = varargin{1};
                obj.second = varargin{2};

            end

            obj.product = obj.first * obj.second;

         end
    end

    end

k = Multiplier
k.first = 5
k.product  -> This should return 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:56:16.680

你应该做你的`product`财产`Dependent`。有关示例，请参见[这篇文章。](https://stackoverflow.com/questions/8098935/matlab-dependent-properties-and-calculation)

# entity-framework - 具有通用存储库的实体框架延迟加载

> ID：15660619
> 
> 赞同：1
> 
> 时间：2013-03-27T13:54:46.540
> 
> 标签：entity-framework, asp.net-mvc-4, lazy-loading, entity-framework-5, navigation-properties

我当前的项目使用通用存储库接口，因此：

```
public interface IDataSource : IDisposable
{
    void Add<T>(T newItem) where T : EntityBase;

    T Get<T>(Guid id) where T : EntityBase;
    T Get<T>(Expression<Func<T, bool>> predicate) where T : EntityBase;
    IQueryable<T> GetAll<T>(Expression<Func<T, bool>> predicate = null) where T : EntityBase;
    int Count<T>(Expression<Func<T, bool>> predicate = null) where T : EntityBase;
    bool Any<T>(Expression<Func<T, bool>> predicate = null) where T : EntityBase;

    void Update<T>(T updated) where T : EntityBase;

    void Delete<T>(Guid id) where T : EntityBase;
    void Delete<T>(T item) where T : EntityBase;

    void Commit();
} 
```

例如，该`Get`方法如下所示：

```
public T Get<T>(Expression<Func<T, bool>> predicate) where T : EntityBase
{
    return db.Set<T>().Single(predicate);
} 
```

我的数据上下文的实例在哪里`db`，它扩展了实体框架的`DbContext`. 整个事情的实现`IDisposable`，以便我可以在工作单元模式的范围块中使用它，在提交更改之前等待结束，或者如果在此之前出现问题，则处理整个事情。

逻辑层使用此接口来处理更复杂的查询，以使业务逻辑与数据访问完全分离。因此，对该层的查询可能如下所示：

```
public List<Product> ItemsBoughtByCustomer(Guid customerID)
{
    using (var db = DataAccess.GetContext())
    {
        List<Purchase> purchaseHistory = db.GetAll<Purchase>(p => p.CustomerID == customerID);
        List<int> IDs = purchaseHistory.Select(p => p.ProductID);
        return db.GetAll<Product>(p => IDs.Contains(p.ID));
    }
} 
```

*（是的，我意识到可以浓缩；它在应用程序中，但例如，这更清楚。）*

我的问题是有时我会返回一组对象，然后我可能想要获取它引用的一些东西。例如，当我要显示一个产品时，显示可能想要这样做：

```
@foreach (Comment comment in Product.Comments)
{
    <div class="comment">
        <span>@Html.UserDisplay(comment.Author)</span>
        <span>@comment.Body</span>
    </div>
} 
```

*（忽略 HTML 的质量；同样，这是一个简单的示例）*

问题是，当 Entity Framework 的延迟加载在从我的查询返回实体时使这些属性为空时，这会引发错误。现在，我知道该`Include()`方法，但如果我的存储库是通用的，那么很难应用它们。我可以完全关闭它，但是当我不需要它们时，EF 将开始检索大量链接的事物集合——我的模型的结构和事物与审计日志的链接意味着 EF 有很多链接到跟随。

有没有一种方法可以让我以更智能的方式进行延迟加载？是否有类似的方法`.Single()`，`.Where()`我可以调用该方法`DbSet`，它也会带来子对象，以便我可以专门要求将子对象包含在某个查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:09:26.547

为包含路径添加一个可选参数，然后在 DbSet 上调用 Include(str)。您的 Get 方法示例：

```
public T Get<T>(Expression<Func<T, bool>> predicate, string includePath = null) where T : EntityBase
{
    var query = db.Set<T>();

    if( !string.IsNullorWhitespace( includePath ) )
    {
        query = query.Include( includePath );
    }

    return query.Single(predicate);
} 
```

# android - 加载的位图尺寸小于源 png

> ID：15660620
> 
> 赞同：2
> 
> 时间：2013-03-27T13:54:48.100
> 
> 标签：android, bitmap, png, pixel

我有一个 280 × 558 像素的 png 图像。但是当我加载它时

```
BitmapFactory.decodeResource(getResources, R.drawable.image_name) 
```

创建的位图大小为 186 × 371。

Nexus 7 使用 drawable-large-xhdpi 文件夹中的图像会发生这种情况。ldpi 和 mdpi 设备正确地将它们各自的图像加载到 drawable-ldpi 和 drawable-mdpi 中。

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:57:53.503

Nexus 7 不是 xhdpi，它将图像从 hdpi 缩放到 tvdpi

> 谷歌 Nexus 7 | 4.1 | tvdpi（但会缩小你的 hdpi 资产

请参阅：[http ://blog.blundellapps.com/list-of-android-devices-with-pixel-density-buckets/](http://blog.blundellapps.com/list-of-android-devices-with-pixel-density-buckets/)

要加载不缩放的图像，请使用 BitmapFactory.Options 的 inScaled 选项。使用这些选项，您还可以缩放到不同的 dpi。

请参阅：http: [//developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inScaled](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inScaled)

# eclipse - 将 JSF 项目导出为 WAR 文件会导致 RuntimeException：找不到 FacesContext

> ID：15660629
> 
> 赞同：0
> 
> 时间：2013-03-27T13:55:08.637
> 
> 标签：eclipse, jsf, war

当我将我的 JSF 1.2 项目导出为 WAR 文件时，它没有在 Eclipse Indigo 中正确创建。也就是说，当我再次导入它并运行它时，它最终会出现“FacesContext not found”错误。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:13:32.747

> *我再次检查，当我再次导入并运行 url 模式时缺少 /faces/ 。当我手动附加它时，它会很好。有什么方法可以使导入的文件中的 url 模式也相同吗？*

您过于依赖 IDE 为您提供所有必要的魔法。您的初始项目设置了 JSF 项目方面，并且您正在使用内置浏览器*在服务器上*运行来运行项目，而不是仅仅启动服务器并在外部浏览器中自己导航到它。

JSF 项目方面是与 JSF/Servlet 规范完全无关的 Eclipse 特定功能。此信息不存储在 WAR 中。当您再次导入它时，它将成为一个默认的动态 Web 项目，而无需设置任何特定的项目方面。您需要右键单击项目，转到*Project Facets*部分并手动添加 JSF 项目方面。这样，IDE 就会意识到该项目是一个 JSF 项目，并将执行必要的魔法，例如在*Run As*`FacesServlet`期间自动内联目标 URL 中的映射。

# c# - 在 C# 中使用类型后缀是否有任何性能提升？

> ID：15660633
> 
> 赞同：0
> 
> 时间：2013-03-27T13:55:18.287
> 
> 标签：c#, performance, types

有时需要使用类型后缀（例如*0d*表示值为 0 的对偶或*0f表示浮点数），并且通常被认为是好的样式。*

但它有任何性能影响吗？

所以调用了几百万次

```
if (x == 0d) ...   or
if (x == 0.0) ... 
```

将尽可能快

```
if (x == 0) ... 
```

我想，编译器会将 0 转换为 0.0 一次，因此性能无关紧要。但由于我在质量代码中看到过几次，我不确定......

* * *

由于注释而添加：x 不是 int，而是 double。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:57:56.657

如果您检查 IL 代码，您会在与to 文字`conv`比较时发现额外的操作码`int``0.0`

```
int x = 0;
Console.WriteLine (x == 0.0);

IL_0000:  ldc.i4.0    
IL_0001:  stloc.0     // x
IL_0002:  ldloc.0     // x
IL_0003:  conv.r8     //<-- this is absent if literal is 0
IL_0004:  ldc.r8      00 00 00 00 00 00 00 00 
IL_000D:  ceq         
IL_000F:  call        System.Console.WriteLine 
```

这是由于一个事实，`Int32` `==`运算符重载接受`int`作为第二个参数。

**备注：**使用编译器优化标志在 LINQPad 中**编译**。

**一个重要的说法**是在您确定这是一个瓶颈之前不要进行纳米优化。这样的优化通常会破坏代码的可读性和结果 - 可维护性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:58:30.013

在 Ilya Ivanov 的提示下，我检查了一个小示例程序的 IL 代码。

Ilya 假设 x 是一个整数。如果是这种情况，他对转换 (conv.r8) 的评论是绝对正确的。但是我想到的情况是，如果您将 double 类型的变量与 double 文字进行比较。 **在这种情况下，类型后缀有什么不同吗？**

**答案是不！**

让我们看看这个小程序，比较 (d == 0) 或 (d == 0d)：

```
static void Main(string[] args)
{
    double d = 0.0;

    if (d == 0)     // if (d == 0d)
        d = 1.23;

    Console.WriteLine(d);
} 
```

两个版本都编译成完全相同的 IL 代码：

```
.method private hidebysig static 
    void Main (
        string[] args
    ) cil managed 
{
    // Method begins at RVA 0x2050
    // Code size 48 (0x30)
    .maxstack 2
    .entrypoint
    .locals init (
        [0] float64 d,
        [1] bool CS$4$0000
    )

    IL_0000: nop
    IL_0001: ldc.r8 0.0
    IL_000a: stloc.0
    IL_000b: ldloc.0
    IL_000c: ldc.r8 0.0
    IL_0015: ceq
    IL_0017: ldc.i4.0
    IL_0018: ceq
    IL_001a: stloc.1
    IL_001b: ldloc.1
    IL_001c: brtrue.s IL_0028

    IL_001e: ldc.r8 1.23
    IL_0027: stloc.0

    IL_0028: ldloc.0
    IL_0029: call void [mscorlib]System.Console::WriteLine(float64)
    IL_002e: nop
    IL_002f: ret
} // end of method Program::Main 
```

当然，汇编代码也是一样的。

所以写 0 而不是 0.0 或 0d 就好了......

# gwt - GWT 和可视化 API 选项

> ID：15660637
> 
> 赞同：0
> 
> 时间：2013-03-27T13:55:26.400
> 
> 标签：gwt

我正在使用 GWT 和 google Visualization API ( [https://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted](https://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted) ) 使用以下代码制作折线图

```
import com.google.gwt.user.client.ui.SimplePanel;
import com.google.gwt.user.client.ui.Widget;
import com.google.gwt.visualization.client.AbstractDataTable.ColumnType;
import com.google.gwt.visualization.client.DataTable;
import com.google.gwt.visualization.client.visualizations.LineChart;
import com.google.gwt.visualization.client.visualizations.LineChart.Options;

public class TestPlot {

Widget pie;
static SimplePanel S;
public Widget getLineChart() {
    S = new SimplePanel();

    DataTable data = DataTable.create();
    data.addColumn(ColumnType.STRING, "X");
    data.addColumn(ColumnType.NUMBER, "Chanel 1");
    data.addColumn(ColumnType.NUMBER, "Channel 2");
    data.addRows(2);
    data.setValue(0, 0, "0");
    data.setValue(0, 1, 0);
    data.setValue(0, 2, 0);
    data.setValue(1, 0, "1");
    data.setValue(1, 1, 4);
    data.setValue(1, 2, 1);

    Options options = Options.create();
    options.setWidth(1000);
    options.setHeight(700);
    options.setTitle("Test");
    options.setEnableTooltip(false);
    options.setPointSize(0);

    LineChart pie = new LineChart(data, options);
    //pie.draw(createTable2());
    S.add(pie);
    return S;
}     
} 
```

我想设置[https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart)上显示的一些选项，这些选项没有方法 options.setWhatever()。看来我需要使用 options.setOption(option, value) 但我无法让它工作。例如，我如何将上面示例中的两条线设置为红色和绿色。我试过了：

```
options.setOption("colors", "['red','green']"); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:26:27.083

因为你只需要改变线条的颜色，

您必须使用颜色和 hae 创建自己的 Options 类，才能将其添加到主要选项中

```
series1_options = Options.create();
series1_options.set("color","black");
series_options.set("0",series1_options);
options.set("series",series_options); 
```

请参阅[链接](https://stackoverflow.com/questions/9020465/gwt-linechart-options)。不要选择包装器选项，您可能会面临比主要问题（*我面临*）更多的问题。

# python - 如何分离 ALSA 驱动程序？

> ID：15660640
> 
> 赞同：1
> 
> 时间：2013-03-27T13:55:30.870
> 
> 标签：python, linux, audio, usb, alsa

我正在开发一个需要使用超过 32 个 USB 声卡的应用程序。它是用 python 编写的，我正在 Ubuntu 12.04 上对其进行测试。我正在使用的一些有用的模块是 pyusb 和 pyalsaaudio。

我的问题是 ALSA 驱动程序最多可以处理 32 个声音设备，因此，由于应用程序不需要同时输出到所有设备（由于带宽限制，它也不能），我正在考虑分离USB 卡中的 ALSA 驱动程序，并在需要时附加它（使用某种队列）。

我目前可以识别所有 USB 设备（在安装允许系统处理它们的 3.6 内核之后）并使用 pyusb 获取它们的表示。我试过（用3张卡测试）：

```
>>> import usb.core
>>> import usb.util
>>> cards = []
>>> cards.append(usb.core.find(idVendor=0x0d8c))
>>> cards.append(usb.core.find(idVendor=0x0c76))
>>> cards.append(usb.core.find(idVendor=0x1130))
>>> len(cards)
3
>>> for c in cards:
...     c.detach_kernel_driver(0)
... 
```

它成功地从`aplay -L`. 但是，它们仍然出现在 的输出中`cat /proc/asound/cards`，所以恐怕 ALSA 驱动程序没有被分离（如果你能解释为什么它们从一个而不是另一个消失，这也会有帮助）。

有没有我可以运行的命令（可能来自终端，不一定来自 python）来从特定声卡分离/重新附加 ALSA 驱动程序？

非常感谢。

# linq - 检索提供的列表中不存在 id 的所有区域

> ID：15660643
> 
> 赞同：0
> 
> 时间：2013-03-27T13:55:42.043
> 
> 标签：linq, linq-to-sql

我确定我必须在这里遗漏一些非常简单的东西..

好的，我有一个 AreaId 列表。我想将该列表与 MapArea 表进行比较，并返回表中存在但不在提供的列表中的任何 ID。

这是我要检查的提供区域列表：

```
 var currentAreas = (from c in _entities.mapAreaLink
                            where c.listingId == id
                            select new
                                {
                                    c.MapArea.areaId
                                }
                            ).ToList(); 
```

这是获取 mapAreas 的详尽列表..

```
 var availableAreas = (from m in _entities.MapAreas
                              select new
                                  {
                                      m.areaId
                                  }
                                  ).ToList(); 
```

这将比较两个列表并获取存在于 maparea 表中但不存在于 maparealink 中的项目（受我正在查看的项目的 id 约束）。

```
var unusedAreas = availableAreas.Except(currentAreas).ToList(); 
```

我似乎恢复了列表，但我现在需要做的是根据上面的 except.tolist 的结果返回一个 maparea 对象列表。

我以为我可以这样做：

```
 var mapareas = (from e in _entities.MapAreas
                        where unusedAreas.Contains(e.areaId)            
                        select e).ToList(); 
```

我在 e.areaId 上的 where 和“无法解析方法包含（int）”上得到一个模棱两可的调用。

我试过使用：

```
var unusedAreas = availableAreas.Except(currentAreas).ToArray(); 
```

没有喜悦..有人可以在这里帮助我吗-我猜我必须在这里缺少基本知识。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:25:25.287

您只使用一个`int`属性创建匿名类型。这不是必需的，它会导致后面的问题。如果您创建列表，`int`您会没事的：

```
var currentAreas = (from c in _entities.mapAreaLink
                    where c.listingId == id
                    select c.MapArea.areaId).ToList();
var availableAreas = (from m in _entities.MapAreas
                      select m.areaId).ToList(); 
```

# sql - 将 datediff 显示为秒、毫秒

> ID：15660647
> 
> 赞同：24
> 
> 时间：2013-03-27T13:56:01.500
> 
> 标签：sql, sql-server, tsql, datetime

我正在尝试计算两个日期时间值之间的差异。

我试过了`datediff(s, begin,end)`，`datediff(ms, begin,end)`但是我希望返回的差异`seconds,milliseconds`如下所示：

```
4,14
63,54 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-27T13:57:39.640

```
SELECT 
  DATEDIFF(MILLISECOND, begin, end) / 1000, 
  DATEDIFF(MILLISECOND, begin, end) % 1000
FROM ...; 
```

如果您绝对必须在 SQL 查询中将其形成为字符串（您的表示层不能这样做吗？），那么：

```
SELECT 
  CONVERT(VARCHAR(12),  DATEDIFF(MILLISECOND, begin, end) / 1000)
  + ',' 
  + RIGHT('000' + CONVERT(VARCHAR(4), DATEDIFF(MILLISECOND, begin, end) % 1000), 3)
FROM ...; 
```

另外我真的希望你有比`begin`and更好的列名`end`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-03T07:40:00.303

实际上，标记的答案最初在 1 - 99 毫秒内产生了错误的结果：

示例 1 秒，27 毫秒：

1.  `DATEDIFF % 1000`将返回 27
2.  `CONVERT`将转换为`'27'`
3.  将建立字符串连接`'1' + ',' + '27'`
4.  结果：`'1.27'`这意味着 270ms 而不是 27ms

不要忘记将毫秒填充为三个零：

```
DECLARE @start datetime2(7) = '2015-07-03 09:24:33.000'
DECLARE @end datetime2(7) = '2015-07-03 09:24:34.027'

SELECT 
    CAST (DATEDIFF(SECOND, @start, @end) AS nvarchar(3)) + N'.' +
    RIGHT('000' + CAST((DATEDIFF(MILLISECOND, @start, @end) % 1000) AS nvarchar(3)), 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-09T15:57:00.337

DATEDIFF 在 MySQL 中只接受两个参数。这对我有用：

```
TIMESTAMPDIFF(SECOND, NOW(), '2019-09-09 18:52:00') 
```

# python - python：将两个文件作为一个文件对象打开

> ID：15660649
> 
> 赞同：3
> 
> 时间：2013-03-27T13:56:03.843
> 
> 标签：python

我有两个文件：标题和正文。我正在*使用图书馆*来阅读整个内容。我可以使用“fileinput.input”创建一个 FileInput 对象并将其交给读取数据的库。问题是 FileInput 对象没有库似乎期望的“.read”属性。

我需要一个带有 .read 的 FileObject，就像将两个文件作为一个文件读取一样。

任何想法现有的解决方法？是的，我知道我可以一起构建自己的小类或 cat 文件。只是想知道是否有一些我从未听说过的神奇 FileObject joiner。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:08:08.227

如果您的库从带有 的文件中读取`.read()`，那么将多个文件对象合并为一个的抽象意义不大。阅读所有内容并将其放入`StringIO`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:46:35.980

if you just want to call readline() on the files, try this:

```
def cat(*args):
    for arg in args:
        with open(arg,'r') as f:
            for line in f:
                yield line

for line in cat('/tmp/x1','/tmp/x2'):
    processLine(line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:16:15.630

您的文件对象已经可以通过生成器进行迭代，因此只需使用 itertools 将它们链接成一个大的可迭代对象。

```
import itertools
all_the_things = itertools.chain(HeaderFile, BodyFile)
for line in all_the_things:
   # your code here 
```

# json - Twitter json计数限制？

> ID：15660653
> 
> 赞同：0
> 
> 时间：2013-03-27T13:56:07.310
> 
> 标签：json, twitter

我想知道您可以使用 api URL 作为 json 返回的推文数量是否有限制？例如。[http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&screen_name=CocaCola&count=3000](http://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=false&screen_name=CocaCola&count=3000)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T14:05:11.583

I think the V1.1 really have the limited.

[https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

Count(Optional): Specifies the number of tweets to try and retrieve, up to a maximum of 200 per distinct request. The value of count is best thought of as a limit to the number of tweets to return because suspended or deleted content is removed after the count has been applied. We include retweets in the count, even if include_rts is not supplied. It is recommended you always send include_rts=1 when using this API method.

# android - 为什么我的吐司不起作用？

> ID：15660659
> 
> 赞同：0
> 
> 时间：2013-03-27T13:56:15.783
> 
> 标签：android, toast

基本上，我无法让我的 toast 出现在我的应用程序的屏幕上，我已将 toast 代码复制到另一个应用程序中并且代码工作正常，只是由于某种原因我似乎无法让它在这个工作一。我已将我的应用程序剥离回只是启动屏幕，该屏幕不做任何事情，但在 onCreate 方法中调用 toast 但仍然没有。我已经尝试了我能想到的一切。有人可以告诉我它有什么问题吗？任何帮助是极大的赞赏。

```
public class Splash extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash_layout);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 

        Toast t1 = Toast.makeText(this, "hello world", Toast.LENGTH_LONG);
        t1.show();

    }//end onCreate     
} // end splash 
```

下面给出了清单以防万一对任何人都有用，额外的活动是从主菜单启动的，但我将启动主菜单的意图从飞溅活动中删除，以尝试更容易找出问题所在

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.example.bluetoothdms"
     android:versionCode="1"
      android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    android:largeHeap="true">
    <activity
        android:name="com.example.bluetoothdms.Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.bluetoothdms.MainMenu"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.example.bluetoothdms.Bluetooth_Content"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.example.bluetoothdms.DMS_Content"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.example.bluetoothdms.FAQ"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.example.bluetoothdms.File_Opener">
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:03:13.990

实例`Toast`化

```
Toast t1 = new Toast(context);
t1.makeText(....);
t1.show() 
```

或使用

```
Toast.makeText(...).show(); 
```

# json - SyntaxError：无法解析 JSON 正文：意外的令牌 o

> ID：15660661
> 
> 赞同：1
> 
> 时间：2013-03-27T13:56:18.450
> 
> 标签：json, node.js, heroku

我在 Facebook 上有一个 Node.js Heroku 应用程序，并且我不断在日志中发现以下错误（当我实际尝试访问我的应用程序时出现一般应用程序错误）：

```
2013-03-27T12:58:54+00:00 heroku[web.1]: Starting process with command `node web
.js`
2013-03-27T12:58:55+00:00 app[web.1]: info: socket.io started
2013-03-27T12:58:55+00:00 app[web.1]: Listening on 6925
2013-03-27T12:58:56+00:00 heroku[web.1]: State changed from starting to up
2013-03-27T13:00:40+00:00 app[web.1]: ^
2013-03-27T13:00:40+00:00 app[web.1]: undefined:1
2013-03-27T13:00:40+00:00 app[web.1]:
2013-03-27T13:00:40+00:00 app[web.1]: SyntaxError: Failed to parse JSON body: Un
expected token o
2013-03-27T13:00:40+00:00 app[web.1]:     at Object.parse (native)
2013-03-27T13:00:40+00:00 app[web.1]:     at EventEmitter.emit (events.js:99:17)

2013-03-27T13:00:40+00:00 app[web.1]: SyntaxError: Unexpected token S
2013-03-27T13:00:40+00:00 app[web.1]:     at EventEmitter.mixin._fireError (/app
/node_modules/faceplate/node_modules/restler/lib/restler.js:192:10)
2013-03-27T13:00:40+00:00 app[web.1]:     at IncomingMessage.parsers.json (/app/
node_modules/faceplate/node_modules/restler/lib/restler.js:367:9)
2013-03-27T13:00:40+00:00 app[web.1]:     at EventEmitter.FaceplateSession.get (
/app/node_modules/faceplate/index.js:121:25)
2013-03-27T13:00:40+00:00 app[web.1]:     at mixin._responseHandler (/app/node_m
odules/faceplate/node_modules/restler/lib/restler.js:142:20)
2013-03-27T13:00:40+00:00 app[web.1]:     at EventEmitter.mixin._encode (/app/no
de_modules/faceplate/node_modules/restler/lib/restler.js:184:29)
2013-03-27T13:00:40+00:00 app[web.1]:     at IncomingMessage.parsers.auto (/app/
node_modules/faceplate/node_modules/restler/lib/restler.js:356:21)
2013-03-27T13:00:40+00:00 app[web.1]:     at mixin._responseHandler (/app/node_m
odules/faceplate/node_modules/restler/lib/restler.js:140:16)
2013-03-27T13:00:40+00:00 app[web.1]:     at EventEmitter.mixin._decode (/app/no
de_modules/faceplate/node_modules/restler/lib/restler.js:156:7)
2013-03-27T13:00:41+00:00 heroku[web.1]: Process exited with status 1
2013-03-27T13:00:41+00:00 heroku[web.1]: State changed from up to crashed 
```

在我的服务器代码中，我使用的是`JSON.stringify`，例如从查询返回到 Postgres 数据库的答案`console.log(data + ': is in the tags table, with tag_id=' + JSON.stringify(result));`在哪里。`result`但是，我从不使用`JSON.parse`，所以这个错误有点令人困惑，直到今天我也从未遇到过这个错误（我的应用程序在周一运行良好）。

同样令人困惑的是，如果我注释掉这些`JSON.stringify`调用，我仍然会收到错误消息，因此非常感谢任何想法！

根据[https://github.com/heroku/faceplate/issues/26](https://github.com/heroku/faceplate/issues/26)，我对我的代码进行了以下更改：

```
function handle_facebook_request(req, res) {

  // if the user is logged in
  if (req.facebook.token) {

 async.parallel([
  function(cb) {
    // query 4 friends and send them to the socket for this socket id
    req.facebook.get('/me/friends', { limit: 4 }, function(friends) {
      req.friends = JSON.parse(JSON.stringify(friends));
      cb();
    });
  },
  function(cb) {
    // query 16 photos and send them to the socket for this socket id
    req.facebook.get('/me/photos', { limit: 16 }, function(photos) {
      req.photos = JSON.parse(JSON.stringify(photos));
      cb();
    });
  },
  function(cb) {
    // query 4 likes and send them to the socket for this socket id
    req.facebook.get('/me/likes', { limit: 4 }, function(likes) {
      req.likes = JSON.parse(JSON.stringify(likes));
      cb();
    });
  },
  function(cb) {
    // use fql to get a list of my friends that are using this app
    req.facebook.fql('SELECT uid, name, is_app_user, pic_square FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user = 1', function(result) {
      req.friends_using_app = JSON.parse(JSON.stringify(result));
      cb();
    });
  }
], function() {
  render_page(req, res);
});

  } else {
    render_page(req, res);
  }
} 
```

`req.????`带有eg的每一行`req.friends`过去就像`req.friends = friends;`ie 我添加了`JSON.parse`和`JSON.stringify`调用一样，没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:33:54.310

如前所述，可以在此处找到解决方案：[https](https://github.com/heroku/faceplate/issues/26) ://github.com/heroku/faceplate/issues/26应该注意的是，现在有更多关于修复 0.0.4 版面板的详细信息（感谢我的提示！）

# rally - 修订历史和修订

> ID：15660664
> 
> 赞同：3
> 
> 时间：2013-03-27T13:56:31.353
> 
> 标签：rally

我正在尝试进入修订历史，但我不确定如何获得它。无论我做什么，它都会返回 null。相关代码如下：

```
 string objectType = "HierarchicalRequirement";
        string orderString = "";
        bool fetchFullObjects = true;
        long start = 1;
        long pageSize = 200;
        QueryResult queryResult = Global.service.query(Global.workspace, objectType, queryString, orderString, fetchFullObjects, start, pageSize);
        int cnt = 0;
        for (int i = 0; i < queryResult.Results.Length; i++)
        {
            // Results array is of type "DomainObject"
            DomainObject rallyobject = queryResult.Results[i];
            HierarchicalRequirement story = (HierarchicalRequirement)rallyobject;
            var rev = story.RevisionHistory;

            if (rev.Revisions != null)
            {
                  // traverse revisions for info, never gets here
            }

            dataGridView3.Rows.Add(new object[] { story.FormattedID, story.Description, story.InProgressDate, story.AcceptedDate, story.PlanEstimate});

        }

        // Return the avereage days from inprogress to accepted
        return;
    } 
```

在调试中，rev 总是返回 null ..

也许我错误地投射查询结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:12:48.073

为了结束循环，这里有一个示例，展示了如何执行 Kyle 提到的 service.read()。Mark 建议使用 LBAPI 肯定是跟踪工件快照的一种更可靠的方法，但是您必须自己构建 LBAPI 的 REST 查询 URL，Rally 还没有用于 LBAPI 的 C# SDK .

提醒一下，特别是如果您刚刚开始构建集成，我强烈建议您使用 Rally 的[.NET REST SDK](https://developer.help.rallydev.com/rest-api-net)之一，而不是 SOAP。

REST 更健壮、性能更高，而且，Webservices API 1.4x（x 尚未确定）将是支持 SOAP 的最终 API 版本。Webservices 2.x 将仅支持 REST，因此对于任何希望推进新的 Web 服务功能的人来说，使用 REST 将是必不可少的。

```
namespace SOAP_QueryStoryRevisions
{
    class Program
    {
        static void Main(string[] args)
        {

            // create a service object
            RallyServiceService service = new RallyServiceService();

            // Credentials
            string rallyUser = "user@company.com";
            string rallyPassword = "topsecret";

            // set the service URL
            service.Url = "https://rally1.rallydev.com/slm/webservice/1.37/RallyService";

            // login to service using HTTP Basic auth
            System.Net.NetworkCredential credential =
               new System.Net.NetworkCredential(rallyUser, rallyPassword);

            Uri uri = new Uri(service.Url);
            System.Net.ICredentials credentials = credential.GetCredential(uri, "Basic");
            service.Credentials = credentials;
            service.PreAuthenticate = true;

            // Configure the service to maintain an HTTP session cookie
            service.CookieContainer = new System.Net.CookieContainer();

            // Get current user
            User user = (User)service.getCurrentUser();

            // Get reference to UserProfile for current user
            UserProfile profile = new UserProfile();
            profile.@ref = user.UserProfile.@ref;

            // Read will return a WSObject that you can then cast to a UserProfile 
            WSObject resultobj = service.read(profile);
            UserProfile newprofile = (UserProfile)resultobj;

            // Default workspace for current user
            Console.WriteLine(newprofile.DefaultWorkspace.@ref);

            // set workspace for query
            Workspace workspace = new Workspace();
            workspace.@ref = newprofile.DefaultWorkspace.@ref;

            // Make the web service call
            //---------------------------

            // Look for Stories
            string objectType = "hierarchicalrequirement";

            // Find Stories
            string queryString = "(FormattedID < US100)";

            // Order by FormattedID Ascending
            string orderString = "FormattedID asc";

            // Fetch full objects, or return just object shells
            // with the "@ref" attribute set.  You can fetch the full version
            // of a ref object later by calling service.read().
            bool fetchFullObjects = true;

            // Paging information
            long start = 0;
            long pageSize = 200;

            // Query for project
            QueryResult projectQueryResult = service.query(workspace, "Project", "(Name = \"My Project\")", orderString, fetchFullObjects, start, pageSize);

            // look at the object returned from query()
            Console.WriteLine("Query returned " + projectQueryResult.TotalResultCount + " Projects");

            // Grab project
            DomainObject myProjectObject = projectQueryResult.Results[0];
            Project myProject = (Project)myProjectObject;

            // issue query
            QueryResult queryResult = service.query(workspace, myProject, true, true, objectType, queryString, orderString, fetchFullObjects, start, pageSize);

            // look at the object returned from query()
            Console.WriteLine("Query returned " + queryResult.TotalResultCount + " objects");

            // loop through results returned

            Console.WriteLine("There are " + queryResult.Results.Length + " objects on this page");
            for (int i = 0; i < queryResult.Results.Length; i++)
            {
                // Results array is of type "DomainObject"
                DomainObject rallyobject = queryResult.Results[i];
                Console.WriteLine("  result[" + i + "] = " + rallyobject);
                Console.WriteLine("           ref = " + rallyobject.@ref);

                HierarchicalRequirement myStory = (HierarchicalRequirement)rallyobject;

                Console.WriteLine("===>           FormattedID = " + myStory.FormattedID);
                Console.WriteLine("===>           Story Name = " + myStory.Name);

                RevisionHistory myStoryRevisionHistory = myStory.RevisionHistory;

                // Perform service.read on RevisionHistory
                RevisionHistory myRevisionHistoryHydrated =  (RevisionHistory)service.read(myStoryRevisionHistory);

                // Grab revisions
                Revision[] myRevisions = myRevisionHistoryHydrated.Revisions;

                // Loop through each Revision and read it, output summary
                for (int j = 0; j < myRevisions.Length; j++)
                {
                    Revision revisionHydrated = (Revision)service.read(myRevisions[j]);
                    Console.WriteLine("===>                Revision[" + j + "] = " + revisionHydrated.RevisionNumber);
                    Console.WriteLine("===>                Description: " + revisionHydrated.Description);
                }
            }

            Console.ReadKey();
        }

        // determine if the result had errors
        static bool hasErrors(OperationResult result)
        {
            return (result.Errors.Length > 0);
        }

        // print warnings and errors to the console
        static void printWarningsErrors(OperationResult result)
        {
            if (result.Warnings.Length > 0)
            {
                Console.WriteLine("Result has warnings:");
                for (int i = 0; i < result.Warnings.Length; i++)
                {
                    Console.WriteLine("  warnings[" + i + "] = " + result.Warnings[i]);
                }
            }
            if (result.Errors.Length > 0)
            {
                Console.WriteLine("Result has errors:");
                for (int i = 0; i < result.Errors.Length; i++)
                {
                    Console.WriteLine("  errors[" + i + "] = " + result.Errors[i]);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:02:43.050

我不确定您要如何处理修订历史记录，但您可能想要查看的另一个选项是新的 Lookback API：

[https://rally1.rallydev.com/analytics/doc/](https://rally1.rallydev.com/analytics/doc/)

这为 REST API 提供了更丰富且可解析的工件历史视图。例如，要查找对象 ID 为 1234 的项目（或任何子项目）下故事的完整历史记录，您可以执行以下操作：

```
find={ _ProjectHierarchy: 1234, _TypeHierarchy: "HierarchicalRequirement" } 
```

对于分析团队，完整的 URL 将是：

```
https://rally1.rallydev.com/analytics/v2.0/service/rally/workspace/41529001/artifact/snapshot/query.js?find={_ProjectHierarchy:279050021,_TypeHierarchy:"HierarchicalRequirement"} 
```

其中 41529001 是工作区的 ObjectID，279050021 是项目 OID。

添加 fields 参数以指定要返回的字段，或在处于开发模式时添加 fields=true 以确定可用的字段：

```
https://rally1.rallydev.com/analytics/v2.0/service/rally/workspace/41529001/artifact/snapshot/query.js?find={_ProjectHierarchy:279050021,_TypeHierarchy:%22HierarchicalRequirement%22}&fields=true 
```

请注意，fields=true 限制为每页 200 个结果，因此您应该指定生产中所需的实际字段列表。例如，要返回创建快照的对象 ID、故事名称和日期，它将变为：

```
https://rally1.rallydev.com/analytics/v2.0/service/rally/workspace/41529001/artifact/snapshot/query.js?find={_ProjectHierarchy:279050021,_TypeHierarchy:%22HierarchicalRequirement%22}&fields=[%22ObjectID%22,%20%22Name%22,%20%22_ValidFrom%22,%20%22_ValidTo%22] 
```

此快照模型可能感兴趣的另一个功能是 _PreviousValues 字段，它保存在当前快照中更改的字段的旧值，因此您可以检测（和查询）工件状态的更改。更多信息在这里： [https ://rally1.rallydev.com/analytics/doc/Analytics2.0LookbackAPIUserManual.html?_debugResources=y&n=1364482493883#h.uv4o9mhshx4](https://rally1.rallydev.com/analytics/doc/Analytics2.0LookbackAPIUserManual.html?_debugResources=y&n=1364482493883#h.uv4o9mhshx4)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:13:23.217

我不确定您是否可以使用 SOAP 做到这一点。fetchFullObjects 参数不会填充诸如修订历史和修订等子对象字段。这些字段可通过 WSAPI 在一个请求中使用，但是通过在 fetch 参数中指定它们。

在这种情况下，您可能必须执行 service.read(rev) 来填充修订。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T17:30:14.900

这是一种使用 REST 获取和显示修订历史记录的方法。

```
import com.google.gson.JsonObject;
import com.rallydev.rest.RallyRestApi;
import com.rallydev.rest.request.QueryRequest;
import com.rallydev.rest.response.QueryResponse;
import com.rallydev.rest.util.Fetch;
import com.rallydev.rest.util.QueryFilter;

import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Comparator;
import java.util.HashMap;
import java.util.TreeSet;

public class revisions {

    public static void main(String[] args) throws URISyntaxException, IOException {

        // Configure RallyRestApi
        final String rallyURL = "https://rally1.rallydev.com";
        final String wsapiVersion = "v2.0";
        final RallyRestApi restApi = new RallyRestApi(new URI(rallyURL), "RallyID", "password");    // TODO: update id / password
        restApi.setWsapiVersion(wsapiVersion);

        // Select and query project information
        final String myProject = "A Project Name";                      // TODO: update project name
        QueryRequest projectRequest = new QueryRequest("Project");
        projectRequest.setFetch(new Fetch("Name", "Iterations"));
        projectRequest.setQueryFilter(new QueryFilter("Name", "=", myProject));
        QueryResponse projectQueryResponse = restApi.query(projectRequest);
        String iterationListRef = projectQueryResponse.getResults().get(0).getAsJsonObject().get("Iterations").getAsJsonObject().get("_ref").toString().replaceAll("\"", "");
        iterationListRef = iterationListRef.substring(iterationListRef.indexOf("Project"));

        // Query and store iteration information
        QueryRequest iterationRequest = new QueryRequest(iterationListRef);
        QueryResponse iterationQueryResponse = restApi.query(iterationRequest);

        HashMap<String, String> iterations = new HashMap<String, String>();
        String iterationName = "", iterationStartDate="";
        int irc = iterationQueryResponse.getTotalResultCount();
        for (int iter = 0; iter < irc; iter++) {
            JsonObject iterationObj = iterationQueryResponse.getResults().get(iter).getAsJsonObject();

            iterationName = iterationObj.get("_refObjectName").toString();
            iterationName = iterationName.substring(1, iterationName.length()-1);
            iterationStartDate = iterationObj.get("StartDate").toString().replaceAll("\"", "").substring(0, 10);
            iterations.put(iterationName, iterationStartDate);
        }

        // Query and store story information
        QueryRequest storyRequest = new QueryRequest("HierarchicalRequirement");
        String ir = iterationRequest.toUrl();
        storyRequest.setProject(ir.substring(0, ir.indexOf("/iterations")));
        QueryResponse storyQueryResponse = restApi.query(storyRequest);

        TreeSet<StoryInfo> stories = new TreeSet<StoryInfo>(new StoryComp());
        String refIteration = "", storyID = "", storyName = "", revHistory = "";
        int src = storyQueryResponse.getTotalResultCount();
        for (int story = 0; story < src; story++) {         
            JsonObject storyOjb = storyQueryResponse.getResults().get(story).getAsJsonObject();

            refIteration = storyOjb.get("Iteration").toString();
            if (refIteration.contains("_refObjectName")) 
                refIteration = storyOjb.get("Iteration").getAsJsonObject().get("_refObjectName").toString().replaceAll("\"", "");

            storyID = storyOjb.get("FormattedID").toString();
            storyID = storyID.substring(1, storyID.length()-1);

            storyName = storyOjb.get("_refObjectName").toString().replaceAll("\"", "");

        revHistory = storyOjb.get("RevisionHistory").getAsJsonObject().get("_ref").toString().replaceAll("\"", "");
        revHistory = revHistory.substring(revHistory.indexOf("revisionhistory"))+"/Revisions";

        stories.add(new StoryInfo(refIteration, ""+iterations.get(refIteration), storyID, storyName, revHistory));
        }

        System.out.println("Project: "+myProject);
        for (StoryInfo s:stories) {
            // Print the story iteration, id, name and revisions!
        System.out.println('\n'+s.iteration+" - "+s.id+" "+s.name);
        QueryRequest historyRequest = new QueryRequest(s.revHist);
        QueryResponse historyResponse = restApi.query(historyRequest);
        final int hrc = historyResponse.getTotalResultCount();
        for (int rev = 1; rev < hrc; rev++) {
            JsonObject historyObj = historyResponse.getResults().get(rev).getAsJsonObject();
//          System.out.println(historyObj);     // BINGO !!!
            System.out.println(historyObj.get("RevisionNumber")+" "+historyObj.get("CreationDate")+" "+historyObj.get("Description"));
        }                
        }
        restApi.close();
    }

    static class StoryComp implements Comparator<StoryInfo> {
        public int compare(StoryInfo i1, StoryInfo i2) {
            return (i1.startDate+i1.id).compareTo(i2.startDate+i2.id);
        }
    }   

    static class StoryInfo {
        String iteration, startDate, id, name, revHist;
        StoryInfo(String it, String sd, String i, String n, String rh) {
            iteration = it; startDate = sd; id = i; name = n; revHist = rh;
        }
    }

} 
```

# sql - 用于解析 XML 字段并检索值的 SQL 查询

> ID：15660666
> 
> 赞同：5
> 
> 时间：2013-03-27T13:56:32.563
> 
> 标签：sql, sql-server, xml, parsing

我正在尝试解析一个 XML 字段，它是 SCOM 2007 数据仓库数据库的一部分，并且发现了许多示例，这些示例显示了实现此目的的类似场景，但是似乎没有返回值，通常是在我运行查询时出错。

这是一个示例，一千左右的一行我需要运行它，我想在其中提取值 England 和 UK（组成标签的 GUID 对于每种数据类型都是一致的，因此永远不会更改并且可以使用查询等）。当然，每一行都有不同的城市和国家代码，这就是我想要捕捉的。

表名是 dbo.ManagedEntityProperty，列名是 PropertyXML

```
<Root>
            <Property Guid="AFB4F9E6-BF48-1737-76AD-C9B3EC325B97">192.168.1.0</Property>
            <Property Guid="5C324096-D928-76DB-E9E7-E629DCC261B1">WASPDC01.LIV10.Local</Property>
            <Property Guid="96981E2D-DECF-7CB7-DEC5-5C52046B68A6">192.168.1.0</Property>
            <Property Guid="FA3887C3-F274-306A-867C-37105A190F78">England</Property>
            <Property Guid="61AA7309-595F-576E-337E-E9335E5CA773">255.255.255.0</Property>
            <Property Guid="F8ABF27F-A169-6FCD-1862-C06F1DB4BF24">UK</Property>
            <Property Guid="B832B2DE-A649-60A1-AC13-06F1EC601E5F">Active</Property>
</Root> 
```

有什么建议或指导吗？我尝试根据[元素值的 SQL Server 查询 xml 属性](https://stackoverflow.com/questions/12913724/sql-server-query-xml-attribute-for-an-element-value)实现建议，但我仍然处于 SQL XML 查询的初级阶段，以前从未做过类似的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:02:14.217

尝试这样的事情：

```
-- declare your two GUIDs that you're interested in
DECLARE @GuidCountry UNIQUEIDENTIFIER
SET @GuidCountry = 'FA3887C3-F274-306A-867C-37105A190F78'

DECLARE @GuidCountryCode UNIQUEIDENTIFIER 
SET @GuidCountryCode = 'F8ABF27F-A169-6FCD-1862-C06F1DB4BF24'

;WITH ListOfAllProperties AS
(
    SELECT 
        ID,   -- or whatever uniquely identifies a single row in your table
        PropertyGuid = XProp.value('@Guid', 'uniqueidentifier'),
        PropertyValue = XProp.value('(.)', 'varchar(100)')
    FROM 
        dbo.ManagedEntityProperty
    CROSS APPLY
        PropertyXML.nodes('/Root/Property') AS XTbl(XProp)
)
SELECT *
FROM ListOfAllProperties
WHERE PropertyGuid IN (@GuidCountry, @GuidCountryCode) 
```

这基本上`<Property>`将表中的所有节点枚举到单独的行中，并在从这些行中获取您感兴趣的两个项目时

**更新：**如果您需要将这两个值显示为单独的列，则必须使用以下内容：

```
SELECT 
    ID,
    CountryCode = PropertyXML.value('(/Root/Property[@Guid=sql:variable("@GuidCountryCode")]/text())[1]', 'varchar(100)'),
    CountryName = PropertyXML.value('(/Root/Property[@Guid=sql:variable("@GuidCountry")]/text())[1]', 'varchar(100)')
FROM 
    dbo.ManagedEntityProperty 
```

# java - 如何在按钮中放置长文本？

> ID：15660667
> 
> 赞同：0
> 
> 时间：2013-03-27T13:56:40.797
> 
> 标签：java, android

我的按钮是固定大小的高度。我需要它像下面图片左侧的文字一样。现在它就像在右边。我已经尝试了所有重力选项，但没有结果。有没有办法做到这一点？

[http://i.imgur.com/blDVA1D.jpg](http://i.imgur.com/blDVA1D.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:01:36.470

如果 wrap_content as height 不符合您的需求，您可能必须更改文本大小。同样 singleLine = false 可能会有所帮助...

android Button 还带有默认填充，因此您应该将 i 设置为 0。

# vim - 什么是 .un~ 文件，或者为什么终端中的 Vim 会生成 .un~ 文件？

> ID：15660669
> 
> 赞同：117
> 
> 时间：2013-03-27T13:56:48.280
> 
> 标签：vim, terminal, dotfiles

我注意到我有一些以 . 结尾的点文件`.un~`，例如我有一个`.vividchalk.vim.un~`，但我不确定它来自哪里。似乎它们是我在终端中使用 Vim 时创建的。这些文件是什么？当我关闭我正在编辑的文件时，可以让它们自行删除吗？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2013-03-27T14:02:39.300

当您编辑和保存文件时，Vim 会创建一个与原始文件同名并`un~`在末尾添加扩展名的文件。

Vim 7.3 包含一个新特性persistent undo，即在退出Vim 时不会丢失undo 信息，而是存储在一个以 . 结尾的文件中`.un~`。你已经设置了`undofile`选项，所以 Vim 在保存原始文件时会创建一个撤销文件。你可以通过清除选项来阻止 Vim 创建备份文件：

```
:set noundofile 
```

请注意，默认情况下此选项处于关闭状态。您已在其中一个初始化文件中显式启用该`undofile`选项。如果您希望您的撤消文件仅存储在特定目录中，您可以将`undodir`选项指向将包含所有聚合撤消文件的目录。

来源：http: [//vimhelp.appspot.com/vim_faq.txt.html#faq-7.2](http://vimhelp.appspot.com/vim_faq.txt.html#faq-7.2)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-05-04T02:19:27.860

我花了一段时间才找到实际放置`:set noundofile`命令的位置。我是新手，我只会回答我是如何让它不做备份的。

1.  打开vim。
2.  输入命令模式`:e $HOME/.vimrc`
3.  写`:set noundofile`
4.  保存并退出：`:wq`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-10-14T11:44:52.173

[另一种避免vim在任何地方创建撤消文件的可能方法是将撤消](https://vimhelp.org/options.txt.html#%27undodir%27)目录设置为某个现有目录，例如

```
if has('persistent_undo')         "check if your vim version supports
  set undodir=$HOME/.vim/undo     "directory where the undo files will be stored
  set undofile                    "turn on the feature
endif 
```

[从这里被抓住](https://riptutorial.com/vim/example/25592/configuring-your-vimrc-to-use-a-undodir)

# python - Alembic --autogenerate 产生空迁移

> ID：15660676
> 
> 赞同：32
> 
> 时间：2013-03-27T13:57:08.497
> 
> 标签：python, migration, flask, flask-sqlalchemy, alembic

我正在尝试`Alembic`第一次使用并想使用[此处](http://alembic.readthedocs.org/en/latest/tutorial.html#auto-generating-migrations)`--autogenerate`描述的功能

我的项目结构看起来像

```
project/
       configuration/
                    __init__.py
                    dev.py
                    test.py
       core/
           app/
              models/
                    __init__.py
                    user.py
       db/
          alembic/
                  versions/
                  env.py
          alembic.ini 
```

我正在使用`Flask`and`SQLAlchemy`和他们的`Flask-SQLAlchemy`扩展。我的模型`User`看起来像

```
class User(UserMixin, db.Model):
    __tablename__ = 'users'
    # noinspection PyShadowingBuiltins
    uuid = Column('uuid', GUID(), default=uuid.uuid4, primary_key=True,
                  unique=True)
    email = Column('email', String, nullable=False, unique=True)
    _password = Column('password', String, nullable=False)
    created_on = Column('created_on', sa.types.DateTime(timezone=True),
                        default=datetime.utcnow())
    last_login = Column('last_login', sa.types.DateTime(timezone=True),
                        onupdate=datetime.utcnow()) 
```

[如此处](http://mattupstate.com/python/databases/2012/11/15/database-migrations-with-alembic-sqlalchemy-and-flask.html)所述，我修改`env.py`为看起来像

```
from configuration import app

alembic_config = config.get_section(config.config_ini_section)
alembic_config['sqlalchemy.url'] = app.config['SQLALCHEMY_DATABASE_URI']
engine = engine_from_config(
    alembic_config,
            prefix='sqlalchemy.',
            poolclass=pool.NullPool) 
```

和

```
from configuration import db

target_metadata = db.metadata 
```

`configuration.__init__py`看起来像哪里

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy
import dev

app = Flask(__name__)
app.config.from_envvar('SETTINGS_PT')
db = SQLAlchemy(app) 
```

现在当我运行迁移时

```
$alembic revision --autogenerate -m "Added user table"
INFO  [alembic.migration] Context impl PostgresqlImpl.
INFO  [alembic.migration] Will assume transactional DDL.
  Generating /Users/me/IdeaProjects/project/db/alembic/versions/55a9d5
  35d8ae_added_user_table.py...done 
```

但文件`alembic/versions/55a9d5`有空`upgrade()`和`downgrade()`方法

```
"""Added user table

Revision ID: 1b62a62eef0d
Revises: None
Create Date: 2013-03-27 06:37:08.314177

"""

# revision identifiers, used by Alembic.
revision = '1b62a62eef0d'
down_revision = None

from alembic import op
import sqlalchemy as sa

def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    pass
    ### end Alembic commands ###

def downgrade():
    ### commands auto generated by Alembic - please adjust! ###
    pass
    ### end Alembic commands ### 
```

怎么就看不懂有新`User`机型了？请帮忙

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-27T19:53:25.853

根据@zzzeek，在我包含以下内容后`env.py`，我可以使用`--autogenerate`选项

在下`env.py`_`run_migrations_online()`

```
from configuration import app
from core.expense.models import user # added my model here

alembic_config = config.get_section(config.config_ini_section)
alembic_config['sqlalchemy.url'] = app.config['SQLALCHEMY_DATABASE_URI']
engine = engine_from_config(
    alembic_config,
    prefix='sqlalchemy.',
    poolclass=pool.NullPool) 
```

然后我跑`alembic revision --autogenerate -m "Added initial table"`了

```
def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.create_table('users',
    sa.Column('uuid', sa.GUID(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('password', sa.String(), nullable=False),
    sa.Column('created_on', sa.DateTime(timezone=True), nullable=True),
    sa.Column('last_login', sa.DateTime(timezone=True), nullable=True),
    sa.PrimaryKeyConstraint('uuid'),
    sa.UniqueConstraint('email'),
    sa.UniqueConstraint('uuid')
    )
    ### end Alembic commands ### 
```

感谢迈克尔的所有帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-26T04:31:57.160

我觉得这里值得指出的是，我在当前版本（0.8.4）也遇到了同样的问题，但是设置元数据的方法似乎变得更加明确了：除了导入模型，还需要设置`target_metadata`（其中存在`env.py`但默认为`None`)。

[文档](http://alembic.readthedocs.org/en/latest/autogenerate.html)建议导入他们称为 的东西，`Base`但不清楚具体是什么；导入我的模型继承的 DeclarativeBase 实例对我没有任何作用（与 OP 的结果相同）。

但是，代码中的实际注释建议`target_metadata`使用实际模型`ModelNameHere.metadata`（

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-01T05:18:17.640

如果你不希望你的 flake8 抛出未使用的导入错误，那么你也可以将 Record 添加到`__all__`你的模型文件中。

在 users.py 的末尾

```
__all__ = Users 
```

更多信息 - [https://docs.python.org/3/tutorial/modules.html#importing-from-a-package](https://docs.python.org/3/tutorial/modules.html#importing-from-a-package)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-07T11:16:07.553

一切都简单多了，刚开始[阅读文档](https://alembic.sqlalchemy.org/en/latest/autogenerate.html)，我就解决了自动生成迁移的问题。不要忘记 在 env.py 文件中`target_metadata`从 None 更改为。`Base.metadata`

```
target_metadata = Base.metadata 
```

以及要在`__init__.py`模块中跟踪的所有模型的导入，这些模型包含从 Base 模型继承的所有 db 模型。然后你只需要在你的 env.py 中导入这些 Base

```
from app.database.models import Base 
```

而已！

# git - Git：哪种存储库结构可以降低合并冲突的风险？

> ID：15660677
> 
> 赞同：0
> 
> 时间：2013-03-27T13:57:08.613
> 
> 标签：git, database-design, merge

我将设置一个 git repo 以在多个客户端之间同步一些数据。由于用户无法访问 git 存储库——甚至不知道——我想设置一个文件结构，它（如果可能）消除了在推送到其他客户端时发生合并冲突的风险。所以简化我要存储的复杂数据结构，让我们用“带有评论的文章”这个比喻来谈论数据。

我在想三个选择：

```
/repository.git/Article1/Article.xml
                     .../Comment1.xml
                     .../Comment2.xml 
```

或者

```
/repository.git/Article1/Article_with_comments_appended.xml 
```

或者

```
/repository.git/All_Articles_including_their_comments.xml 
```

我的用户能够：

*   编辑整篇文章（很少）
*   添加评论（经常）
*   删除评论（很少）

不会使用所有其他操作——尤其是删除文章——。

那么哪种替代方案最能降低合并冲突的风险？还有其他的吗？权衡性能（备选方案 3）与降低合并冲突的风险（备选方案 1 和 2）如何？

# common-lisp - 未在 CL-WHO 模板中呈现的字符串

> ID：15660679
> 
> 赞同：0
> 
> 时间：2013-03-27T13:57:09.427
> 
> 标签：common-lisp, cl-who

```
(require :cl-who)
(defmacro rawpage ((&rest head) &body body)
  `(cl-who:with-html-output-to-string (*standard-output* nil :prologue t)
    (:html
    (:head
      (:meta :charset "utf-8")
      ,@head)
    (:body
      ,@body))))

(defmacro str+ (&rest strs)
  `(concatenate 'string ,@strs))

(rawpage () (:div (str+ "hello," "name"))) 
```

这段代码没有输出我想要的。我期望它输出：

```
<html><head><meta charset='utf-8' /></head><body><div>hello,name</div></body></html> 
```

但是，它输出：

```
<html><head><meta charset='utf-8' /></head><body><div></div></body></html> 
```

谁能告诉我为什么？我正在使用 SBCL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:08:56.507

您的问题是，在 CL-WHO 中，非常量字符串应该`str`像这样放在里面：

```
(defmacro rawpage ()
  (:div (str (str+ "hello," "name")))) 
```

# android - Android - 获取 WebService 数据以在应用程序启动时更新地图

> ID：15660682
> 
> 赞同：0
> 
> 时间：2013-03-27T13:57:19.987
> 
> 标签：android, google-maps

当我的 Android 应用程序首次启动时（随后每 15 秒），我需要更新地图（使用 Google Maps API V2）。

坐标是从 REST WebService 中获取的，我可以从中获取数据（有一个带有监听器的按钮，每次按下它都会调用 Web 服务并在 Toast 上显示数据）。

我的问题是我不知道如何将数据传递给地图本身（需要显示带有收集位置的标记），因为我在 AsyncTask 中实现了 WebService 调用。

现在我有一个 MainActivity，里面有一个 MapFragment。理想情况下，应用程序将获取数据并更新 MapFragment 上的所有标记。

所以我的问题是：

如何从 AsyncTask 中获取数据？我想，一旦我能得到数据，我就知道如何填充地图了..

我最初的想法是在我的 Main Activity 的 onCreate() 方法中调用 AsyncTask，并在该方法中调用另一个启动映射的方法，从 AsyncTask 传递值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:44:32.247

首先在 15 秒内更新地图，像这样在计时器中调用 AsynchTask，

```
public void AsynchTaskTimer() {
    final Handler handler = new Handler();
    Timer timer = new Timer();
    TimerTask timer = new TimerTask() {       
        @Override
        public void run() {
            handler.post(new Runnable() {
                public void run() {       
                    try {
                        new YourAsynchTask().execute();
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                    }
                }
            });
        }
    };
    timer.schedule(timer, 0, 15000); //execute in every 15sec
} 
```

呼入。`AsynchTaskTimer()`_ 中`onCreate()`取消。`timer``onDestroy()`

现在在`YourAsynchTask()`调用 webservice 中`doInBackground`，从 webservice 获取标记数据填充标记对象的 ArrayList，并将标记对象的 ArrayList 传递给显示标记的方法。像这样

```
 private class YourAsynchTask extends AsyncTask<String, Void, Integer> {
   ArrayList<MarkerObject> markerArrList= new ArrayList<MarkerObject>();
markerArrList.clear();
            @Override
            protected void onPreExecute() {
                progressDialog = ProgressDialog.show(YourMapFragActivity.this, "Wait...",
                        "Loading");
                progressDialog.setMessage("Please Wait");
                progressDialog.show();
                super.onPreExecute();
            }

            @Override
            protected Integer doInBackground(String... params) {
                markerArrList=getMapMarkerDataFromWebservice();
                return 1;
            }

            @Override
            protected void onPostExecute(Integer result) {
                super.onPostExecute(result);
                showMarkerLocationOnMap(markerArrList);
                if (progressDialog.isShowing()) {
                    progressDialog.dismiss();
                }
            }
        } 
```

`showMarkerLocationOnMap`从中获取一一标记数据`markerArrList`并显示在`map`

希望这对您有所帮助。

# iphone - 将块与 NSOperation 一起使用

> ID：15660684
> 
> 赞同：1
> 
> 时间：2013-03-27T13:57:25.537
> 
> 标签：iphone, ios, objective-c-blocks, nsoperation, nsoperationqueue

这是[这篇文章](https://stackoverflow.com/questions/15435920/nsoperation-with-completition-block)的延续。我遇到了 NSOperation 块的问题，我的应用程序在`completionblock`.

我认为问题是保留周期（我有一个警告：）`Capturing self strongly in this block is likely to lead to a retain cycle`，我尝试[了这个解决方案](https://stackoverflow.com/questions/7205128/fix-warning-capturing-an-object-strongly-in-this-block-is-likely-to-lead-to-a)（参见上面的代码），警告消失了，但应用程序仍然崩溃。

该应用程序是一个简单的 tableView。该操作在传递的图像中应用了一些修改。

这是我第一次自己创建和使用块，谢谢你给我一些基本的解释

***代码：***

**表视图控制器.m：**

在表视图中：cellForRowAtIndexPath：

```
 [[ImageManager sharedManager] modifyImage:[UIImage imageNamed:@"anImage.png"] completionBlock:^(UIImage *image, NSError *error) {        
    [cell.imageView setImage:image];
}]; 
```

**ImageManager.h：**

```
 #import <Foundation/Foundation.h>
 @interface ImageManager : NSObject
 @property(nonatomic, strong) NSOperationQueue *imageOperationQueu;

 -(void) modifyImage:(UIImage*)image completionBlock:(void(^)(UIImage *image,NSError *error)) completBlock;

 + (id) sharedManager;

 @end 
```

**图像管理器.m：**

```
#import "ImageManager.h"
#import "ImageOperations.h"

static ImageManager *MySharedManager = nil;

@implementation ImageManager

@synthesize imageOperationQueu;

+ (id)sharedManager
{
  static dispatch_once_t onceToken;
  dispatch_once(&onceToken, ^{
    if (MySharedManager == nil) MySharedManager = [[self alloc] init];
  });
  return MySharedManager;
}

- (NSOperationQueue *)imageOperationQueu
{
   if (!imageOperationQueu)
 {
    imageOperationQueu = [[NSOperationQueue alloc] init];
    [imageOperationQueu setMaxConcurrentOperationCount:3];
    imageOperationQueu.name = @"imageOperationQueu";
 }
return imageOperationQueu;
}

-(void) modifyImage:(UIImage*)image completionBlock:(void(^)(UIImage *image,NSError *error)) completBlock
{
 ImageOperations *op = [[ImageOperations alloc]initWithImage:image WithCompletionBlock:completBlock];
[self.imageOperationQueu addOperation:op];
}
@end 
```

**图像操作.h：**

```
 #import <Foundation/Foundation.h>

 typedef void (^CompletionBlock)(UIImage *image,NSError *error);

 @interface ImageOperations : NSOperation

 @property(nonatomic, weak) CompletionBlock completBlock;
 @property(nonatomic, strong) UIImage *imageToTransform;

 -(id)initWithImage:(UIImage *)image WithCompletionBlock:(CompletionBlock) block;
 @end 
```

**图像操作.m：**

```
 #import "ImageOperations.h"

 @implementation ImageOperations
 @synthesize imageToTransform;
 @synthesize completBlock;

 -(id)initWithImage:(UIImage *)image WithCompletionBlock:(CompletionBlock) block
 {
  if (self = [super init])
  {
    NSLog(@"initWithImage");
    self.imageToTransform = image;
    [self setCompletBlock:block];
  }
 return self;
}

- (void)main
{
  @autoreleasepool
{        
    UIImage *img = [self setRoundedImage:self.imageToTransform];

    __weak ImageOperations *imgOp = self;

    [imgOp setCompletionBlock:^{
        NSLog(@"setCompletionBlock");
        imgOp.completBlock(img,nil);
    }];
}
}

-(UIImage*)setRoundedImage:(UIImage*)image
{
// ..
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:06:00.533

几个想法：

1.  您将块定义为`weak`属性。在*使用 Objective-C 指南编程的*[使用块](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8-SW12)部分中，他们建议您改用。（注意，我们复制的是块，而不是它使用的对象；不过，您必须小心该块中的强引用。）块变量的范围非常微妙。（有关示例，请参见*Block Programming Topics指南中*[要避免](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/Blocks/Articles/bxUsing.html#//apple_ref/doc/uid/TP40007502-CH5-SW6)的模式。）调用已发布的 a可能会产生一些不可预知的结果。使用.*`copy`*`block``weak``copy`**

***   您的 tableview 有一个微妙的问题，如果在调用完成块时单元格已经滚动，将会发生这种情况。该单元格可能已被重新用于表格的另一行。（事实证明，圆角逻辑可能足够快，这个问题不太可能出现，但如果您执行较慢的操作（例如下载图像或图像很大），这一点至关重要。）无论如何，而不是：

    ```
    [[ImageManager sharedManager] modifyImage:[UIImage imageNamed:@"anImage.png"] completionBlock:^(UIImage *image, NSError *error) {        
        [cell.imageView setImage:image];
    }]; 
    ```

    您可能想要调用该`UITableView`方法`cellForRowAtIndexPath`（不要与该`UITableViewController`方法混淆`tableView:cellForRowAtIndexPath:`）：

    ```
    [[ImageManager sharedManager] modifyImage:[UIImage imageNamed:@"anImage.png"] completionBlock:^(UIImage *image, NSError *error) {   
        if (error == nil)
        {     
            UITableViewCell *updateCell = [tableView cellForRowAtIndexPath:indexPath];

            // if cell has scrolled off screen, this will be `nil`, so let's check

            if (updateCell)
                [updateCell.imageView setImage:image];
        }
    }]; 
    ```

    *   您可能希望对该`imageNamed`方法本身在首先检索图像时可能会很慢这一事实保持敏感。如果所有单元格都返回相同的`imageNamed`，这不是问题，但如果 (a) 使用唯一`imageNamed`文件；(b) 如果处理较旧、速度较慢的设备，您甚至可能还希望将`imageNamed`进程推入后台队列。在较新的设备（或模拟器）上，您永远不会看到问题，但如果您在旧的、速度较慢的设备上进行测试，您可能会在快速的 tableview 滚动中看到一些卡顿（但由于`imageNamed`缓存，您只会看到这个首次检索图像时 UI 口吃……如果您对所有图像使用相同的图像名称，您可能看不到这一点。）

    *   您的呼叫`completBlock`正在后台队列中完成。由于您正在进行 UI 更新，您可能需要确保将其分派回主队列：

    ```
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        // call the completBlock here
    }]; 
    ```**

# php - 使用 Javascript 调整图像大小后，如何使用 $_POST 通过 PHP 上传

> ID：15660686
> 
> 赞同：4
> 
> 时间：2013-03-27T13:57:31.250
> 
> 标签：php, javascript, forms, upload, resize

基本上我尝试编写一个网页，用户可以通过 iPhone/Andoid 和桌面上传图片。这些图片应保存为 ./userupload 中的缩略图，并且指向此的链接存储在 MySQL DB 中。

我通过简单的 HTML 表单上传和一个 PHP 脚本来实现它，该脚本切出了应该是缩略图的部分，保存新图片并将链接写入数据库。这听起来很容易，但棘手的是现在 iPhone 图片真的很大，而移动上传 6MB 的图片需要很长时间 cia 3G。因此，我寻找一种在客户端使用 Javascript 进行大小调整的可能性。通过stackoverflow，我发现了这个非常有用[的小脚本](https://github.com/stomita/ios-imagefile-megapixel)，我现在用它来调整大小。

不幸的是，我的 Javascript 和 HTML5 技能不是很发达，我不知道如何将调整大小的图像（现在通过`<img>`标签显示）连同 的其他输入一起`<form>`传递给我的后端 php 脚本以保存图像并写入链接到数据库。你有什么想法？

**提前**谢谢你****

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:13:35.027

好吧，由于您`src`的 resized 属性中有一个 base64 编码的图像`<img>`，您可以将该值放入隐藏输入中并上传 bas64 字符串（而不是真实图像）。然后，您可以在 PHP 脚本中解码图像并以您需要的方式保存。**

# android - WSClient++ 获取服务器错误信息

> ID：15660698
> 
> 赞同：1
> 
> 时间：2013-03-27T13:57:54.850
> 
> 标签：android, web-services, ws-client

我在尝试将 webServis 与 WSClient++ 连接时遇到问题。

```
protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            final DoveMan d = new DoveMan();

            Thread t = new Thread(new Runnable() {
                @Override
                public void run() {
                    GetMealResponse a;
                    try {
                        a = d.getMeals(0);
                        Log.d("dene", a.getErrorMessage());
                    } catch (Exception e) {
                        Log.d("there is", "catch Block");// TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            });
            t.start();

        } 
```

我尝试获取错误消息。但是当我运行应用程序时。

```
 03-27 13:49:25.200: D/there is(441): catch Block
03-27 13:49:25.200: W/System.err(441): com.neurospeech.wsclient.SoapFaultException: Server Error
03-27 13:49:25.200: W/System.err(441):  at com.neurospeech.wsclient.SoapWebService.postXML(SoapWebService.java:225)
03-27 13:49:25.200: W/System.err(441):  at com.neurospeech.wsclient.SoapWebService.getSoapResponse(SoapWebService.java:157)
03-27 13:49:25.200: W/System.err(441):  at servis.DoveMan.getMeals(DoveMan.java:53)
03-27 13:49:25.200: W/System.err(441):  at com.example.servertest.MainActivity$1.run(MainActivity.java:21)
03-27 13:49:25.200: W/System.err(441):  at java.lang.Thread.run(Thread.java:1019) 
```

我得到这个消息并且 Log.d("dene", a.getErrorMessage()) 没有运行。

我怎样才能解决这个问题 ？

# reporting-services - 如何最小化 SSRS 中的参数面板？

> ID：15660701
> 
> 赞同：0
> 
> 时间：2013-03-27T13:57:57.843
> 
> 标签：reporting-services, report-viewer2010

我有一个提取 SSRS 报告的程序。我知道我可以阻止参数面板完全显示，但这不是我们需要的。我需要以编程方式最小化参数面板，但如果用户需要，仍然可以使用它。

我总是可以添加另一个按钮来显示或隐藏整个面板，但这似乎有点草率。

使用标准的 reportViewer 控件，我怎样才能让报表查看器从这个面板最小化开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:22:37.023

Have you tried setting the `ReportViewer.PromptAreaCollapsed` property to `true`, which seems to control this action?

[MSDN entry for ReportViewer.PromptAreaCollapsed](http://msdn.microsoft.com/en-us/library/microsoft.reporting.winforms.reportviewer.promptareacollapsed%28v=vs.100%29.aspx).

# ruby-on-rails-3 - 在 Rails 应用程序中存储开发人员特定变量的最佳方式

> ID：15660710
> 
> 赞同：0
> 
> 时间：2013-03-27T13:58:31.533
> 
> 标签：ruby-on-rails-3, environment-variables, development-environment

我们有一个团队正在开发一个 Rails 3.1 应用程序。对于每个开发人员，我们希望在开发环境中存储一个变量，git 忽略该变量以识别该用户。例如

在第一个开发人员环境中

```
adminuser = "Ryan" 
```

并在第二个开发者开发环境中

```
adminuser = "Tom" 
```

我们会将其用于应用程序中的开发人员特定逻辑。什么是实现这一点的最简单和最好的方法，这是正确的方法吗？

# android - Android 4.2 无法正确显示切换按钮

> ID：15660711
> 
> 赞同：0
> 
> 时间：2013-03-27T13:58:32.407
> 
> 标签：android, android-layout

我使用我的 Android 2.2 手机创建了一个应用程序。我在一个活动中有四个切换按钮。我在运行 Android 4.2 的平板电脑上查看了我的应用程序，但指示灯不在按钮底部。

![显示不正确的切换](../Images/e900b0543874ce77cf38e880b4a0f1ec.png)

我首先认为它可能会被切断，所以我设置了按钮 height `200dp`，但指示器仍然不存在。
我也在以编程方式调整宽度，但将其注释掉并没有帮助。
切换在运行 Android 2.2 的手机上正确显示。

这是其中一个按钮的 XML：

```
<ToggleButton
    android:id="@+id/cat_btn1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView3"
    android:layout_alignParentLeft="true"
    android:textSize="12dp"
    android:onClick="toggleClicked"
    android:layout_marginLeft="10dp" /> 
```

我决定使用 API 17 创建另一个项目，该项目有一个切换按钮并且它显示正确，所以我不知道是什么导致了我的第一个项目中的问题。

第二个项目图像和 XML：

![正确显示切换](../Images/35f604445f165ccae131752ef98e432b.png)

```
<ToggleButton
    android:id="@+id/toggleButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="56dp"
    android:layout_toRightOf="@+id/textView1"
    android:text="ToggleButton" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:08:43.297

使用自定义主题时要小心。在许多情况下，您需要从基于 API 级别的适当父主题继承以获得您想要的外观和感觉。

使用 Eclipse 中的活动创建的现代项目将为您设置样式资源以鼓励这样做：

*   `res/values/styles.xml`定义一个`AppBaseTheme`, 继承自 API 级别 11 之前的主题（例如，`Theme.Light`）

*   `res/values-v11/styles.xml`覆盖`AppBaseTheme`从`Holo`主题继承（例如，`Theme.Holo.Light`）

*   `res/values-v14/styles.xml`可能存在以再次覆盖`AppBaseTheme`（例如，使用`Theme.Holo.Light.DarkActionBar`）

*   `res/values/styles.xml`还有`AppTheme`，定义为继承自`AppBaseTheme`，您`AppTheme`在清单中引用的位置以及应用程序主题（或活动主题）的位置

将应该适用于任何 API 级别的自定义设置放在`AppTheme`. 将特定于 API 级别的自定义设置放在适当的`AppBaseTheme`. 而且，如果您想更改总体外观（例如，切换到深色/无操作栏），请`AppBaseTheme`使用适合该 API 级别的主题更改继承自的主题。

# eclipse - 缩短 Eclipse git 工作流程

> ID：15660713
> 
> 赞同：2
> 
> 时间：2013-03-27T13:58:39.947
> 
> 标签：eclipse, git, egit

我在 Eclipse 中使用带有 Egit 的 rebase 工作流。我在本地分支机构工作，就这个问题而言，将其称为“工作”。当我准备好整合我的更改时，我必须：

1.  切换到`master`
2.  拉动（快进）
3.  切换到`working`
4.  变基`master`，解决任何冲突
5.  切换到`master`
6.  合并`working`
7.  推。

如您所见，有很多分支切换正在进行。这不是一个很大的时间消耗，因为切换分支非常快。然而，时间加起来，这是教新人做的额外步骤。我真正想做的是，同时`working`：

1.  拉取（导致`master`被更新）
2.  变基`master`
3.  切换到`master`
4.  合并`working`
5.  推

在这个工作流程中，我也不必为了引入更改并继续工作而完全不必要地切换分支。只需拉动，变基，继续。

`master`即使您在另一个分支上，如何将 git 配置为始终在拉取时更新？我更喜欢使用 Egit 的答案，但命令行解决方案也是可以接受的——它们也许可以用 Egit 执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:45:29.390

You could rather:

*   `fetch` (no need to change your current branch working)
*   `rebase origin/master working`
*   switch to `master` and merge `working` (fast-forward)

The last step would update master with both `origin/master` and `working`.

# ios - 如何在 UIWebview 中更改字体大小

> ID：15660714
> 
> 赞同：3
> 
> 时间：2013-03-27T13:58:40.487
> 
> 标签：ios, objective-c, uiwebview, font-size

我有一个来自数组的`UIWebView`那个。`loadHTMLString`

我需要这个 webView 来动态改变字体大小

这是我如何填充我的 WebView：

```
[webView loadHTMLString:[NSString stringWithFormat:@"%@<p class=\"paragraph\"  style=\"float: right\"  >%@</p>",css,[[ contentArray objectAtIndex:0] valueForKey:@"content"]]   baseURL:nil ]; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T14:00:49.437

将此代码放在您的`webViewDidFinishLoad`委托方法中：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView1{

int fontSize = 20;
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%d%%'", fontSize];
[webView1 stringByEvaluatingJavaScriptFromString:jsString];
[jsString release];

} 
```

希望能帮助到你 ;）

**更新：** 对于启用 ARC 的开发人员，您应该忽略添加：

 ~~~~```
[jsString release]; 
```~~~~

# asp.net-mvc - ASP MVC：从具有非常大字符串的视图中打开视图

> ID：15660716
> 
> 赞同：0
> 
> 时间：2013-03-27T13:58:45.213
> 
> 标签：asp.net-mvc

我有一个包含很长字符串（> 1000 个字符）的视图。在该视图中，我想在其自己的页面中打开另一个（完整）视图，并且我希望该视图的模型是非常长的字符串。所以它看起来像这样：

第一种观点：

```
@model myDataStringWithManyLongStringsInIt<string>

@{
    foreach (string s in Model)
    {
        @Html.ActionLink("Show long string", "LongStringView", new { longString = s }, new { target = "_blank" }) 
```

在我的控制器中：

```
public ActionResult LongStringView(string longString)
{
    return View(longString);
} 
```

在我看来 LongStringView：

```
@Model string
<div class="row-flud">
    <div class="span12">@Model</div>
</div> 
```

我的问题是当我运行此代码时，我的 longString 太长了。所以我收到以下错误：

```
HTTP Error 404.15 - Not Found
The request filtering module is configured to deny a request where the query string is too long. 
```

我在第一个视图中也尝试过，但结果是一样的：

```
@Html.ActionLink("Test!", "LongStringView", "MyController", new { longString = s }, new { target="_blank"}) 
```

如果我这样做：

```
@Html.ActionLink("Test two!", "LongStringView", "MyViews", longString, null) 
```

然后我的控制器中的函数 LongStringView 被调用，但它的输入变量 longString 始终为空。:(

所以我想做的是从一个页面（视图）我想打开另一个页面（视图）并在另一个页面中显示我在第一页中拥有的非常长的字符串。

我做错了什么，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:21:51.297

好吧，根据您的评论，您只得到了没有正确标识符的字符串。

解决此问题的一种方法是在服务器端处理字符串，并将它们与新创建的标识符一起存储，但这样您的应用程序就不会是无状态的，所以让我们以一种更简单（但不是最佳）的方式来做：

忘记控制器，不需要额外的操作。只需检查视图：

```
@foreach (var result in results)
{
    var shortString = result.Substring(0, 99);
    <section>
        <div class="row-fluid">
            <div class="span12">@shortString</div>
            <a href="#" class="full-link" data-long-string="@result">See long version</a> 
        </div>
    </section>
}

<div id="myModal" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
    </div>
    <div class="modal-footer">
        <a href="#" class="btn"  data-dismiss="modal">Close</a>
    </div>
</div> 
```

您还需要一点 javascript（将模态的打开附加到单击事件，并切换模态的内容）：

```
$(function() {
    $('.full-link').on('click', function () {
        var longString = $(this).data('longString');
        var $myModal = $('#myModal');
        var $bodyElem = $myModal.children('.modal-body');
        $bodyElem.html(longString);
        $myModal.modal('show');
    });
}); 
```

至于把这个javascript放在哪里。您最好的选择是制作一个 javascript 文件，将此脚本放在那里，并在您引用 jquery 后在某处引用它。喜欢：

```
<!DOCTYPE html>
<html>
    <head>
        ...
    </head>
    <body>
        ... ALL YOUR LAYOUT GOES HERE ...

        <script src="http://code.jquery.com/jquery.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="path/to/yourscript.js"></script>
    </body>
</html> 
```

在body标签的底部有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:48:59.483

所以你想在你的 URL 中传递一个 >1000 字符参数？听起来是个糟糕的计划。

如何从数据库中重新加载长字符串`LongStringView`？然后，您可以将 ID 或任何参数传递给该方法以识别要加载的字符串。

或者，您可以使用 JQueryUI 对话框或类似的对话框来显示字符串，而无需回发到服务器。

# c# - C# 函数返回一个空文档

> ID：15660717
> 
> 赞同：0
> 
> 时间：2013-03-27T13:58:46.393
> 
> 标签：c#

我有一个 WCF 服务，它返回存储在 SQL 数据库中的文档和图像。我能够毫无问题地返回所有图像。当涉及到文件时，我可以退回文件，但是当我打开它时它是空的。单步执行代码时文件大小是正确的，并且在打开文档时它的页数也正确。就是一片空白。

这是我用来获取文件的内容：

```
String folderPath = System.Configuration.ConfigurationManager.AppSettings["ImagePath"].ToString();

 MemoryStream ms = new MemoryStream(byteArrayIn);

 FileStream fs = new FileStream(folderPath + "1" + fileExt,FileMode.Create ,FileAccess.Write);

 byte[] bytes = new byte[ms.Length];

 fs.Write(bytes, 0, bytes.Length);

 fs.Flush();

 ms.Flush();

 fs.Close();

 ms.Close(); 
```

我也用 .pdfs 尝试过它，它告诉我文件可能已损坏并且无法打开。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:06:57.090

您分配字节，然后将其写出。当您分配字节时，它是一个零数组（或者可能是一个随机字节数组。不完全确定，但这既不是这里也不是那里。）。你永远不会填充它。

```
byte[] bytes = new byte[ms.Length];

fs.Write(bytes, 0, bytes.Length); 
```

此外，正如 Nikola 指出的那样，如果 byteArrayIn 已经有一个包含您的数据的字节数组，那么看起来 MemoryStream 可能是不必要的，只需将其写出来即可。

# excel - 无法合并 VBA 2007 工作表中的单元格不活动

> ID：15660720
> 
> 赞同：1
> 
> 时间：2013-03-27T13:58:49.090
> 
> 标签：excel, vba, merge, range

我正在尝试创建一个按钮，根据我给他的日期和年份进行自动工作安排。它使用字符串中的名称创建一个新工作表 - 年份

```
Sub Create_Arran_Click()

Dim year As String
Dim sdate As Date
Dim row As Integer

year = Worksheets("Main").Cells(17, 4)
sdate = Worksheets("Main").Cells(18, 4)
Sheets.Add.Name = year

For i = 1 To 56
row = ((i - 1) * 12) + 2
Worksheets(year).Cells(row, 1) = "week " & i
Worksheets(year).Cells(row + 1, 1) = "day"
Worksheets(year).Cells(row, 1).Font.Bold = True
For j = 2 To 15

    (!)Range(Cells(row, j), Cells(row, (j + 1))).Merge 
    Worksheets(year).Cells(row, j) = sdate + (j - 2)
    (!)Range(Cells(row + 1, j), Cells(row + 1, j + 1)).Merge 
    Worksheets(year).Cells(row + 1, j) = Weekday(sdate + (j - 2), vbSunday)

j = j + 2
Next
sdate = sdate + 7
Next' 
```

问题是标有“！”的行 没有在“年”表中进行合并。我尝试了几件事，例如：

```
 'Worksheets(year).Range(Cells(row, j), Cells(row, (j + 1))).Merge 
```

或 sheet(year).Range(Cells(row, j), Cells(row, (j + 1))).Merge 或 Worksheets(year).activate

但没有什么可以帮助任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:02:22.187

当您从另一个工作表中引用一个范围时，您需要在调用 Range AND Cells 时说出它的位置

所以与其写

```
Worksheets(year).Range(Cells(row, j), Cells(row, (j + 1))).Merge 
```

做这个

```
with Worksheets(year)
.Range(.Cells(row, j), .Cells(row, (j + 1))).Merge
end with 
```

请注意我在调用 Range 和 Cells 时如何引用工作表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-22T05:01:20.700

当您也以这种格式引用单元格时，您需要参考工作表

工作表（“年”）.范围（工作表（“年”）。单元格（i，j），工作表（“年”）.单元格（i，j+3））.merge

索拉吉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:59:35.193

当您这样做时，`Range(Cells(row, j), Cells(row, (j + 1))).Merge`您正在使用编写代码的工作表，它可能不是“年”工作表。

尝试做`Worksheets(Year).Range(Cells(row, j), Cells(row, (j + 1))).Merge`。

如有必要，请在之前激活：

```
Worksheets(Year).Activate
Worksheets(Year).Range(Cells(row, j), Cells(row, (j + 1))).Merge 
```

# bigdata - Q/kdb+ 读取大文本文件

> ID：15660721
> 
> 赞同：2
> 
> 时间：2013-03-27T13:58:55.053
> 
> 标签：bigdata, kdb, q-lang

我需要读取一个包含交易数据的大文件（大约 20G），我想知道是否有一种很好的方法可以在不杀死内存的情况下读取文件。

我当前的方法是按列加载文件并将这些列连接在一起：

```
columnA:(" S "; 10 20 30)0:`filepath 
```

这种方法的问题是，虽然速度很快，但它使用了大量的内存，我想提高它的内存使用率。

我也试过用.Q.fs，但是加载文件需要3个多小时...

有没有办法在不消耗大量内存的情况下有效地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T11:46:50.157

[`.Q.fsn`](http://code.kx.com/q/ref/dotq/#qfsn-streaming-algorithm)是一个版本[`.Q.fs`](http://code.kx.com/q/ref/dotq/#qfs-streaming-algorithm)，允许指定以字节为单位读取的块的大小，`.Q.fs`使用默认大小`131000`。您可以增加块大小以加快速度。`.Q.fsn`接受三个参数，前两个与`.Q.fs`最后一个是大小相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:35:52.677

您是否需要将表保存在内存中，或者这是将表写入磁盘的中间步骤？

如果您想将表格保存在内存中，听起来您没有足够的 RAM。无论您是阅读每个单独的列，然后使用 加入或流式传输表`.Q.fs`，我怀疑总内存占用量将是相似的。

您可以按照[此处](http://code.kx.com/q/cookbook/loading-from-large-files/)显示如何处理大文件的步骤进行操作，尽管所有这些都使用`.Q.fs`. 我猜你已经看过这个了。

如果您将表格作为张开表格直接保存到磁盘，您可以读取每一列，然后单独写出。然后从内存中删除该列，然后再继续下一个。

# c# - 为什么 Cdecl 调用在“标准”P/Invoke 约定中经常不匹配？

> ID：15660722
> 
> 赞同：69
> 
> 时间：2013-03-27T13:58:56.870
> 
> 标签：c#, c++, pinvoke, stdcall, cdecl

我正在开发一个相当大的代码库，其中 C++ 功能是从 C# P/Invoked。

我们的代码库中有很多调用，例如...

C++：

```
extern "C" int __stdcall InvokedFunction(int); 
```

使用相应的 C#：

```
[DllImport("CPlusPlus.dll", ExactSpelling = true, SetLastError = true, CallingConvention = CallingConvention.Cdecl)]
    private static extern int InvokedFunction(IntPtr intArg); 
```

我已经搜索了网络（在我能力范围内），以了解为什么存在这种明显的不匹配。例如，为什么 C# 中有 Cdecl，而 C++ 中有 __stdcall？显然，这会导致堆栈被清除两次，但是，在这两种情况下，变量都以相同的相反顺序被推入堆栈，因此我看不到任何错误，尽管返回信息可能会在以下情况下被清除在调试期间尝试跟踪？

来自 MSDN：http: [//msdn.microsoft.com/en-us/library/2x8kf7zx%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/2x8kf7zx%28v=vs.100%29.aspx)

```
// explicit DLLImport needed here to use P/Invoke marshalling
[DllImport("msvcrt.dll", EntryPoint = "printf", CallingConvention = CallingConvention::Cdecl,  CharSet = CharSet::Ansi)]

// Implicit DLLImport specifying calling convention
extern "C" int __stdcall MessageBeep(int); 
```

再一次，`extern "C"`在 C++ 代码和`CallingConvention.Cdecl`C# 中都有。为什么不是`CallingConvention.Stdcall`？或者，此外，为什么`__stdcall`在 C++ 中有？

提前致谢！

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-03-27T16:28:04.360

这在 SO 问题中反复出现，我将尝试将其变成（长）参考答案。32 位代码背负着不兼容的调用约定的悠久历史。关于如何进行函数调用的选择在很久以前是有意义的，但如今在后端大多是一个巨大的痛苦。64 位代码只有一个调用约定，谁要再添加一个，谁就会被送到南大西洋的小岛上。

[除了Wikipedia 文章](http://en.wikipedia.org/wiki/X86_calling_conventions)中的内容之外，我将尝试注释它们的历史和相关性。起点是如何进行函数调用的选择是传递参数的顺序、存储参数的位置以及调用后如何清理。

*   `__stdcall`通过在 16 位 Windows 和 OS/2 中使用的旧的 16 位 pascal 调用约定，它进入了 Windows 编程。它是所有 Windows api 函数以及 COM 使用的约定。由于大多数 pinvoke 旨在进行操作系统调用，因此如果您未在 [DllImport] 属性中明确指定 Stdcall，则它是默认设置。它存在的一个也是唯一的原因是它指定被调用者清理。这会产生更紧凑的代码，这在他们不得不在 640 KB RAM 中压缩 GUI 操作系统的日子里非常重要。它最大的缺点就是*危险*。调用者假设的函数参数与被调用者实现的参数之间的不匹配会导致堆栈不平衡。这反过来又会导致极难诊断崩溃。

*   `__cdecl`是用 C 语言编写的代码的标准调用约定。它存在的主要原因是它支持使用可变数量的参数进行函数调用。常见于 C 代码中，具有 printf() 和 scanf() 等函数。副作用是由于调用者知道实际传递了多少参数，因此清理的是调用者。在 [DllImport] 声明中忘记 CallingConvention = CallingConvention.Cdecl 是一个*非常*常见的错误。

*   `__fastcall`是一个定义相当不明确的调用约定，具有相互不兼容的选择。这在 Borland 编译器中很常见，这家公司曾经在编译器技术方面非常有影响力，直到它们解体。也是许多微软员工的前雇主，包括 C# 名声的 Anders Hejlsberg。*它的发明是通过将其中一些*参数通过 CPU 寄存器而不是堆栈来降低参数传递的成本。由于标准化较差，托管代码不支持它。

*   `__thiscall`是为 C++ 代码发明的调用约定。与 __cdecl 非常相似，但它还指定了如何将隐藏的类对象的*this*指针传递给类的实例方法。C++ 中超越 C 的额外细节。虽然它看起来很容易实现，但 .NET pinvoke marshaller 不*支持*它。您无法调用 C++ 代码的主要原因。并发症不是调用约定，而是*this的正确值*指针。由于 C++ 对多重继承的支持，这可能会变得非常复杂。只有 C++ 编译器才能弄清楚到底需要传递什么。只有完全相同的 C++ 编译器为 C++ 类生成代码，不同的编译器在如何实现 MI 以及如何优化它方面做出了不同的选择。

*   `__clrcall`是托管代码的调用约定。它是其他的混合，*this*指针传递像 __thiscall，优化参数传递像 __fastcall，参数顺序像 __cdecl 和调用者清理像 __stdcall。托管代码的巨大优势是内置于抖动中的*验证器。*这确保调用者和被调用者之间永远不会不兼容。从而使设计人员能够利用所有这些约定的优势，但没有麻烦的包袱。尽管有使代码安全的开销，但托管代码如何与本机代码保持竞争力的示例。

您提到`extern "C"`，了解其重要性对于互操作性也很重要。语言编译器经常用额外的字符*装饰*导出函数的名称。也称为“名称修改”。这是一个非常糟糕的技巧，永远不会停止制造麻烦。您需要了解它以确定 [DllImport] 属性的 CharSet、EntryPoint 和 ExactSpelling 属性的正确值。有很多约定：

*   Windows api 装饰。Windows 最初是一个非 Unicode 操作系统，对字符串使用 8 位编码。Windows NT 是第一个以 Unicode 为核心的系统。这导致了一个相当大的兼容性问题，旧代码将无法在新操作系统上运行，因为它将 8 位编码的字符串传递给需要 utf-16 编码的 Unicode 字符串的 winapi 函数。他们通过写*两个来解决这个问题*每个 winapi 函数的版本。一种采用 8 位字符串，另一种采用 Unicode 字符串。并通过在旧版本名称（A = Ansi）的末尾粘贴字母 A 和在新版本（W = 宽）的末尾粘贴 W 来区分两者。如果函数不接受字符串，则不添加任何内容。pinvoke marshaller 无需您的帮助即可自动处理此问题，它只会尝试查找所有 3 个可能的版本。但是，您应该始终指定 CharSet.Auto（或 Unicode），将字符串从 Ansi 转换为 Unicode 的传统函数的开销是不必要且有损的。

*   __stdcall 函数的标准装饰是 _foo@4。前导下划线和一个 @n 后缀，表示参数的组合大小。如果调用者和被调用者不同意参数的数量，则此后缀旨在帮助解决令人讨厌的堆栈不平衡问题。效果很好，虽然错误消息不是很好，但 pinvoke 编组器会告诉您它找不到入口点。值得注意的是，Windows 在使用 __stdcall 时并*没有*使用这种装饰。这是故意的，让程序员有机会获得正确的 GetProcAddress() 参数。pinvoke marshaller 也会自动处理这个问题，首先尝试找到带有@n 后缀的入口点，然后尝试不带后缀的入口点。

*   __cdecl 函数的标准装饰是 _foo。一个前导下划线。pinvoke marshaller 会自动对此进行排序。可悲的是， __stdcall 的可选 @n 后缀不允许它告诉您您的 CallingConvention 属性是错误的，这是巨大的损失。

*   C++ 编译器使用名称修饰，产生真正奇怪的名称，例如“??2@YAPAXI@Z”，“operator new”的导出名称。这是一个必要的邪恶，因为它支持函数重载。它最初被设计为使用遗留 C 语言工具来构建程序的预处理器。这使得有必要通过给它们不同的名称来区分 a`void foo(char)`和`void foo(int)`重载。这就是`extern "C"`语法发挥作用的地方，它告诉 C++ 编译器*不要*将名称修饰应用于函数名称。大多数编写互操作代码的程序员有意使用它来使其他语言的声明更易于编写。这实际上是一个错误，装饰对于捕捉不匹配非常有用。您将使用链接器的 .map 文件或 Dumpbin.exe /exports 实用程序来查看修饰名称。undname.exe SDK 实用程序非常方便地将损坏的名称转换回其原始 C++ 声明。

所以这应该清除属性。您使用 EntryPoint 给出导出函数的确切名称，该名称可能与您想在自己的代码中调用它的名称不匹配，尤其是对于 C++ 错位名称。并且您使用 ExactSpelling 告诉 pinvoke marshaller 不要尝试查找替代名称，因为您已经给出了正确的名称。

我会暂时缓解我的写作痉挛。您的问题标题的答案应该很清楚，Stdcall 是默认设置，但与用 C 或 C++ 编写的代码不匹配。并且您的 [DllImport] 声明*不*兼容。这应该会在来自 PInvokeStackImbalance 托管调试器助手的调试器中产生警告，这是一个旨在检测错误声明的调试器扩展。并且可以相当随机地使您的代码崩溃，尤其是在发布版本中。确保您没有关闭 MDA。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T14:39:31.810

`cdecl`并且`stdcall`在 C++ 和 .NET 之间都是有效和可用的，但它们应该在两个非托管和托管世界之间保持一致。因此，您对 InvokedFunction 的 C# 声明无效。应该是标准调用。MSDN 示例仅提供了两个不同的示例，一个使用 stdcall (MessageBeep)，一个使用 cdecl (printf)。他们是无关的。

# maven - web.config 中的 JBoss7.1.3 servlet-name 产生 ClassNotFoundException: javax.faces.webapp.FacesServlet

> ID：15660725
> 
> 赞同：0
> 
> 时间：2013-03-27T13:59:15.607
> 
> 标签：maven, jsf-2, jboss7.x, java-ee-6

我正在尝试使用 javaee6-api、jsf-api-2.1.19 在 jboss7.1.3 中创建 javaee6 ear 应用程序，不幸的是，每当我指定时，我都无法解决这个问题

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

JBoss 正在抛出：

```
Caused by: java.lang.ClassNotFoundException: javax.faces.webapp.FacesServlet from [Module "deployment.myApp.ear.myApp-web.war:main" from Service Module Loader] 
```

jsf 罐子在我的战争和耳朵项目中。我已经指定：

```
<context-param>
    <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
    <param-value>true</param-value>
</context-param> 
```

让应用程序使用我打包的 jsf。

但是当我删除 servlet 时，应用程序已成功部署。任何想法？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:13:55.210

我对这个问题的解决方案是删除 maven war 插件中的额外配置，同样也会导致 Mojarra 拆除问题。

这是剩下的：

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>${version.war.plugin}</version>
    <configuration>
        <failOnMissingWebXml>false</failOnMissingWebXml>
    </configuration>
</plugin> 
```

# c# - 如何确定 C# 视图模型的范围

> ID：15660729
> 
> 赞同：5
> 
> 时间：2013-03-27T13:59:26.797
> 
> 标签：c#, asp.net-mvc, oop

我有一个显示人员列表的视图。对于所述视图，我创建了一个`PersonListViewModel`

```
class PersonListViewModel { 
    public IEnumerable<Person> People {get;set;}
    public int TotalPersonCount {get;set;}
    public int PeoplePerPage {get;set;}
    public string OrganizationName {get;set;}
} 
```

我的问题是关于`Person`课堂的。类应该在哪里`Person`定义？我应该怎么称呼它？

这个问题是有界上下文或层之间映射类型的更一般问题的一个实例。我知道我可以使用 AutoMapper 等来完成其中的一些工作，但 AutoMapper 只能缓解问题，但不能解决问题。

这里有一些我考虑过的选项以及优缺点：

**将`PersonListViewModel`和`Person`类放在同一个命名空间中，例如`Whatever.Organization.ViewModels`.**

优点：`Person`类名显示它是什么 - 一个人，以及这个类绑定到命名空间指定的上下文。缺点：在我构建此`Person`实例的演示者中（很可能）会与业务域空间中的类发生冲突`Person`，因此我必须为其中一个添加前缀。缺点：必须添加一个命名空间来包含视图模型（不一定是问题，因为你可能，我也确实已经有一个视图模型的命名空间）。

**在课堂`Person`内`PersonListViewModel`筑巢。** 优点：可以为不同的视图模型有多个`Person`类。Pro：`Person`自然地作用于它所属的视图模型。缺点：不能`Person`在视图和视图模型之间重用。Inb4：我确实认为不应重用 ViewModel，我确实认为在适当的时候重用表示层中的非 ViewModel 对象定义。这种方法不允许这种重用，并且在 5% 的情况下是必要的——我不想创建不同的模式。

**使用 *ViewModel Pro 对每个表示层对象进行后缀** ：解决重用和名称冲突问题。缺点：没有意义，因为`Person`它只是一个包含视图数据的视图模型，这可能是也可能不是这种情况——例如，如果将 person 实例提供给 [sub]view——那么，从技术上讲，它将是视图模型，但如果它用作属性，`PersonListViewModel`则`Person`不是视图模型（不超过`int`of`TotalPersonCount`是视图模型，它不是）。

到目前为止，我还没有一个能让我开心的解决方案。但是解决方案#1 似乎是最正确的（从理论上讲），我仍然希望提出更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:12:47.227

我会选择选项 3。`Person`如果它不包含视图的数据，为什么还要将它传递给视图？通常，ViewModel 应该只包含视图所需的数据。`PersonViewModel`创建 a来传递数据以供`Person`视图使用并没有错。如果视图不需要它，请不要传递它。

您正在创建 a 的事实`PersonListViewModel`意味着您正在对视图中的人员列表进行演示。因此，创建一个`PersonViewModel`用于保存您将在视图中为列表中的每个人显示的显示数据是非常有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:27:09.023

我会坚持第三种选择。正如您所说，它允许在不同的视图模型之间使用它，并且当您循环遍历 Person 列表时，仅将单个 Person 元素传递给部分，我看不到任何 OOP 问题。

# c# - 如何使用按位运算符和枚举生成动态表达式？

> ID：15660731
> 
> 赞同：6
> 
> 时间：2013-03-27T13:59:28.287
> 
> 标签：c#, linq, dynamic, expression, bit-manipulation

假设我有以下枚举。

```
[Flags] public enum Color { Red = 1, Blue = 2, Green = 4 } 
```

现在，我想使用以下查询来查找 Red shirts。

```
Shirts.Where(x => (x.Color & Color.Red) != 0) 
```

它工作得很好，但是当我尝试动态构建它时：

```
var color= Expression.Constant(Color.Red);
var property = Expression.Property(Expression.Parameter(typeof(Shirt)), "Color");
Expression.NotEqual(Expression.And(property, color), Expression.Constant(0)); 
```

我得到以下异常：

> *二元运算符 And 没有为类型“MyEnums.Color”和“MyEnums.Color”定义。*

我正在使用 .NET 4.5

有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T14:09:01.690

尝试首先使用以下方法将颜色和属性转换为基础类型[`Expression.Convert`](http://msdn.microsoft.com/en-us/library/bb292051.aspx)：

```
var color= Expression.Constant(Color.Red);
var property = Expression.Property(Expression.Parameter(typeof(Shirt)), "Color");
var colorValue = Expression.Convert(color, Enum.GetUnderlyingType(typeof(Color)));
var propertyValue = Expression.Convert(property, Enum.GetUnderlyingType(typeof(Color)));
Expression.NotEqual(Expression.And(propertyValue, colorValue), Expression.Constant(0)); 
```

# java - Java 面板 BufferedImage 不工作

> ID：15660735
> 
> 赞同：1
> 
> 时间：2013-03-27T13:59:32.943
> 
> 标签：java, swing, graphics, panel, bufferedimage

AnaPencere.java

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.BufferedImage;

public class AnaPencere {
    JFrame anaPencere;
    BufferedImage bImageLEFT;
    BufferedImage bImageRIGHT;
    public static void main(String[] args){
        AnaPencere apencere = new AnaPencere();
    }

    public AnaPencere() {
            anaPencere = new JFrame("Main Window");
            anaPencere.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            anaPencere.setSize(613, 253);
            anaPencere.setLocationRelativeTo(null);
            anaPencere.setVisible(true);
            anaPencere.add(new left());
            anaPencere.add(new right());

    }

    private class left extends JPanel{
        private left() {
            this.setBounds(0, 0, 313, 253);
            this.setFocusable(true);
            bImageLEFT = new BufferedImage(313, 253, BufferedImage.TYPE_INT_ARGB);
            paintComponent(bImageLEFT.createGraphics());
        }

        public void paintComponent(Graphics g){
            Graphics2D g2 = (Graphics2D)g;
            g2.drawString(">  LEFT  <", Font.BOLD, 13);
        }
    }

    private class right extends JPanel{
        private right() {
            this.setBounds(313, 0, 300, 253);
            this.setFocusable(true);
            bImageRIGHT = new BufferedImage(313, 253, BufferedImage.TYPE_INT_ARGB);
            paintComponent(bImageRIGHT.createGraphics());
        }

        public void paintComponent(Graphics g){
            Graphics2D g2 = (Graphics2D)g;
            g2.drawString(">  RIGHT  <", Font.BOLD, 13);
        }
    }
} 
```

（我设置 jpanels 坐标左右类）当我运行我的代码时，我只显示**> LEFT <** text ，我看不到**> RIGHT <** text。我该如何解决这个问题？

*对不起我的英语不好..*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:01:25.967

在这里，我对您的代码进行了更改。并将评论放在有关地方。看看它：

![在此处输入图像描述](../Images/ebe026b296bc57e0bb905de54ccfa502.png)

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.BufferedImage;

public class AnaPencere {
    JFrame anaPencere;
    BufferedImage bImageLEFT;
    BufferedImage bImageRIGHT;
    public static void main(String[] args){
        AnaPencere apencere = new AnaPencere();
    }

    public AnaPencere() {
            anaPencere = new JFrame("Main Window");
            anaPencere.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            anaPencere.setSize(613, 253);
            anaPencere.setLocationRelativeTo(null);
            JPanel pLeft = new left();
            JPanel pRight = new right();
            anaPencere.getContentPane().add(pLeft,BorderLayout.WEST);
            anaPencere.getContentPane().add(pRight,BorderLayout.EAST);
            anaPencere.setVisible(true);//Set visible true after all components are added
    }

    private class left extends JPanel{
        private left() {
            //this.setBounds(0, 0, 313, 253);//Don't set Bounds. Use Layouts provided by Swing API
            setPreferredSize(new Dimension(150,200));//Set the preferredSize
            this.setFocusable(true);
            bImageLEFT = new BufferedImage(313, 253, BufferedImage.TYPE_INT_ARGB);
            //paintComponent(bImageLEFT.createGraphics());// No need to call it explicitly. Swing will do it for itself.
        }

   public void paintComponent(Graphics g){
        super.paintComponent(g);//call the paintComponent method of JPanel class
        Graphics2D g2 = (Graphics2D)g;
        g2.setFont(new Font(g.getFont().getName(),Font.BOLD,13));//set Font in this way
        g2.drawString(">  LEFT  <", 10, 20);//10 is x coordinate , 20 is y cordinate
    }
    }

    private class right extends JPanel{
        private right() {
            //this.setBounds(313, 0, 300, 253);/Don't set Bounds. Use Layouts provided by Swing API
            setPreferredSize(new Dimension(150,200));//Set the preferredSize
            this.setFocusable(true);
            bImageRIGHT = new BufferedImage(313, 253, BufferedImage.TYPE_INT_ARGB);
           // paintComponent(bImageRIGHT.createGraphics());//No need to call it explicitly. It is called by swing components itself.
        }

        public void paintComponent(Graphics g){
             super.paintComponent(g);//call the paintComponent method of JPanel class
            Graphics2D g2 = (Graphics2D)g;
            g2.setFont(new Font(g.getFont().getName(),Font.BOLD,13));//set Font in this way
            g2.drawString(">  RIGHT  <", 10, 20);//10 is x coordinate , 20 is y cordinate
        }
    }
} 
```

# java - Mysql 查询返回 servlet 中的单个记录。如何打印？

> ID：15660736
> 
> 赞同：0
> 
> 时间：2013-03-27T13:59:34.357
> 
> 标签：java, mysql, servlets, jdbc

我写的代码是

```
import java.io.IOException; 
import java.io.PrintWriter; 
import java.sql.Connection; 
import java.sql.DriverManager;
import java.sql.ResultSet; 
import java.sql.SQLException;
import java.sql.Statement; 
import java.util.logging.Level;
import java.util.logging.Logger; 
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet; 
import javax.servlet.http.HttpServletRequest; 
import javax.servlet.http.HttpServletResponse;

public class Search extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException, ClassNotFoundException, SQLException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        Connection con =null;
        Statement stmt = null;
        ResultSet rs = null;
        String veh_no = request.getParameter("vehicle_no");
        try {
            /* TODO output your page here. You may use following sample code. */
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection ("jdbc:mysql://localhost:3306/pay_n_park","root","admin");             
            stmt = con.createStatement();
            rs = stmt.executeQuery("select block_no from vehicle where vehicle_no='"+veh_no+"' and out_time=NULL");
            if(rs != null){
                out.println("<!DOCTYPE html>");
                out.println("<html>");
                out.println("<head>");
                out.println("<title>Search Results</title>");            
                out.println("</head>");
                out.println("<body>");
                out.println("<h1>Search Results :</h1>");
                out.print("<br/> Vehicle No: " + veh_no);
                out.print("<br/> Block No  : " + rs.getString("block_no"));
                out.println("</body>");
                out.println("</html>");
            }

        } finally {            
            out.close();
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        try {
            processRequest(request, response);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(Search.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(Search.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        try {
            processRequest(request, response);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(Search.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException ex) {
            Logger.getLogger(Search.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }
}// </editor-fold> 
```

结果集`rs`只有一条记录。如果我这样做`rs.next()`，它会出来`if`，我不想那样。我应该怎么做才能打印这个记录，它`if`在这两种情况下都出来了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:03:36.450

返回`ResultSet`的是**never** `null`。您确实需要调用`ResultSet#next()`以将光标设置到下一行。它的默认位置即*在*第一行之前。不这样做只会导致

所以，只需更换

```
if(rs != null){ 
```

经过

```
if (rs.next()) { 
```

你应该准备好了。

如果您打算处理“未找到结果”的情况，只需在`else`中进行`if`：

```
if (rs.next()) {
    // At least one record found.
} else {
    // No records found.
} 
```

### 也可以看看：

*   [从java中的mysql select语句中检索数据](https://stackoverflow.com/questions/5795507/retreiving-data-from-mysql-select-statement-in-java/5795554#5795554)
*   [JDBC 驱动程序在空 ResultSet 上抛出“ResultSet Closed”异常](https://stackoverflow.com/questions/1813858/sqlite-3-jdbc-driver-throws-resultsset-closed-exception-on-empty-resultset/1814443#1814443)

* * *

**与具体问题无关**，此代码还有其他严重问题：存在巨大的 SQL 注入攻击漏洞，并且数据库资源正在泄漏。这个不对。

### 也可以看看：

*   [如何防止 JSP 中的 SQL 注入？](https://stackoverflow.com/questions/6272861/how-to-prevent-sql-injection-in-jsp/6272885#6272885)
*   [JDBC MySql 连接池实践避免连接池耗尽](https://stackoverflow.com/questions/2313197/jdbc-mysql-connection-pooling-practices/2313262#2313262)

# c - 使用联合结构的可扩展地图矢量

> ID：15660737
> 
> 赞同：2
> 
> 时间：2013-03-27T13:59:34.790
> 
> 标签：c, pointers, vector, struct

一开始我必须道歉，如果我做了第二个主题而不是坚持第一个主题，但我是stackoverflow的新手。

我在上一个问题中问过： [在预定义的结构上创建动态向量](https://stackoverflow.com/questions/15616103/creating-dynamic-vector-on-predefined-struct)

并收到了很多关于我遇到的问题的有用信息。但是这个问题对我来说仍然不是很透明来解决它。

仍在工作@该结构：

```
typedef struct somestruct_s {
    int s;
    union {
        unsigned char *ptr;
        unsigned char l_ptr[sizeof(char *)];
    };
}somestruct_t; 
```

自从我上一个问题以来，我一直在编码并尽力找到解决方案。从那以后，这个问题对我来说变得更加清楚了。该程序的重​​点是创建一个动态且可扩展的映射，该映射将用于位操作。端点是一个映射，我们可以在其上设置一些位，例如：将映射的 260 索引上的位设置为 1。如果映射可以放入指向映射的指针所占用的内存中，那么我们可以将它放在那里，并且那个点这个联盟的。另一个问题是，如果有关于不适合地图的位的问题，则没有错误。我们简单地回答，有位 0。例如，如果我们在不适合该映射的位位置设置 0，我们不会扩展映射。地图扩展只应在地图外“我们需要将位设置为 1”的 1 种情况下进行。

AnatolyS 给了我一些破冰技巧：

一个函数，如果我理解得很好，它会根据大小返回指针或映射：

```
unsigned char* somestruct_get_bitmap(somestruct_t* ths) {
    if( sizeof(char*) > ths->s ) 
        return ths->ptr;
    return ths->l_ptr;
} 
```

以及对构造函数/析构函数的一些说明：

```
unsigned char* somestruct_init(somestruct_t* ths, unsigned char* ptr) {
    ths->s = strlen(ptr) + 1;
    if( sizeof(char*) > ths->s )  {
       ths->ptr = strdup(ptr);
       return;
    }
    strcpy(ths->l_ptr, ptr);
}

unsigned char* somestruct_destroy(somestruct_t* ths) {
    if( sizeof(char*) > ths->s )  {
        free(ths->ptr);
        return;
    }
} 
```

但我还是看的不够清楚。特别是我不太了解构造函数以及在扩展地图的情况下内存重新分配应该是什么样子。或者如何操作指针来设置和获取可扩展映射的值。

抱歉，我无法表达得更简单，但信息有限。据我所知;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:57:03.940

如果我理解你想要做什么，你想要一大块相邻的字节，任何类型的数据，你将使用它来进行位操作，并且会动态地改变它的大小。

在那种情况下，这不是火箭科学。我完全不知道所有关于字符串的混乱和混乱的联合（它*不会*节省任何内存）有什么好处。sizeof 指针代码也没有任何意义。

只需执行以下操作：

```
#include <stdint.h>
#include <stdbool.h>

typedef struct
{
  uint8_t* data;
  size_t   size;
} bitmap_t;

bool bitmap_create (bitmap_t* bm, size_t size)
{
  bm->size = size;
  bm->data = malloc(size);
  return bm->data != NULL;  // return false if allocation failed, otherwise true
}

void bitmap_delete (bitmap_t* bm)
{
  free(bm->data);
}

bool bitmap_resize (bitmap_t* bm, size_t new_size)
{
  bm->size = new_size;
  bm->data = realloc(new_size);
  return bm->data != NULL;
}

void bitmap_set_bit (bitmap_t* bm, size_t byte_n, uint8_t bit_n)
{
  if(byte_n >= bm->size || bit_n > 7)
  {
    halt_and_catch_fire();
  }

  bm->data[byte_n] |= 1u << bit_n;
}

void bitmap_clear_bit (bitmap_t* bm, size_t byte_n, uint8_t bit_n)
{
  if(byte_n >= bm->size || bit_n > 7)
  {
    halt_and_catch_fire();
  }

  bm->data[byte_n] &= ~(1u << bit_n);
} 
```

# c# - HttpWebRequest BeginGetResponse 回调未在 WP8 上触发（在 WP7 上工作）

> ID：15660741
> 
> 赞同：0
> 
> 时间：2013-03-27T13:59:40.867
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8, webrequest

我以前的应用程序无法在 WP8 上运行时遇到问题，该应用程序在 WP7 上运行良好。

这是我用于 http 请求的代码：

```
public void SendMessage()
    {    
        request = WebRequest.Create(uri) as HttpWebRequest;
        request.Method = "POST";
        request.AllowReadStreamBuffering = true;
        request.ContentType = "application/octet-stream";

        try 
        {
            // get device info
            String deviceInfo = String.Format("platform,{0};os,{1};width,{2};height,{3};dpi,{4};",
                Config.PLATFORM_NAME,
                Environment.OSVersion.Version.ToString(),
                System.Windows.Application.Current.Host.Content.ActualWidth.ToString(),
                System.Windows.Application.Current.Host.Content.ActualHeight.ToString(),
                96);
            request.Headers["X_MX_DEVICE_INFO"] = deviceInfo;
        } 
        catch (Exception) {}

        request.BeginGetRequestStream(new AsyncCallback(ProcessRequestStream), null);
    }

    private void ProcessRequestStream(IAsyncResult asyncResult)
    {
        if (!message.IsCancelled())
        {
            try
            {
                using (Stream stream = request.EndGetRequestStream(asyncResult))
                {
                    message.GetRequest(stream);
                }
                request.BeginGetResponse(new AsyncCallback(ProcessResponseStream), null);
            }
            catch (Exception e)
            {
                syncContext.Post(OnEnd, e);
            }
        }
        else
        {
            syncContext.Post(OnEnd, null);
        }
    }

    private void ProcessResponseStream(IAsyncResult asyncResult)
    {
        if (!message.IsCancelled())
        {
            try
            {
                response = (HttpWebResponse)request.EndGetResponse(asyncResult);
                if (HttpStatusCode.OK != response.StatusCode)
                {
                    throw new Exception("http status error: " + response.ToString());
                }

                syncContext.Post(SetResponse, response);
            }
            catch (Exception e)
            {
                syncContext.Post(OnEnd, e);
            }
        }
        else
        {
            syncContext.Post(OnEnd, null);
        }
    }

    private void SetResponse(object state)
    {
        Exception ex = null;
        try
        {
            using (Stream stream = ((HttpWebResponse)state).GetResponseStream())
            {
                message.SetRespone(stream);
            }
        }
        catch (Exception e)
        {
            ex = e;
        }
        syncContext.Post(OnEnd, ex);
    }

    private void OnEnd(object state)
    {
        message.OnEnd((Exception)state);
    }
} 
```

看起来好像 BeginGetResponse 的回调没有被触发。我试过 Fiddler 来看看什么响应回来了，看起来好像什么都没有回来，但只是针对 WP8。

这有什么可能的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:32:08.403

I believe this could be related to the Referer issue on Windows Phone 8.

For WP7.1: The value of the Referer header is null by default. You can specify a custom value for the Referer header.

For WP8: The value of the Referer header references the installation directory of the app in the format file:///Applications/Install//Install/.

There are some blog posts around the internet, with possible solutions:

*   [http://geoffwebbercross.blogspot.nl/2012/01/wp7-http-using-sockets-problem-with.html](http://geoffwebbercross.blogspot.nl/2012/01/wp7-http-using-sockets-problem-with.html)
*   [http://atomaras.wordpress.com/category/windows-phone-8/](http://atomaras.wordpress.com/category/windows-phone-8/)

But in your case I would still strongly recommend to analyze Fiddler logs. Make sure you have downloaded and installed [Fiddler4](https://fiddler2.com/fiddler2/version.asp). Also, make sure you firstly launch fiddler and only then launch the WP emulator.

# php - 抓取 HTML 表并在 PHP 中创建 XML

> ID：15660742
> 
> 赞同：0
> 
> 时间：2013-03-27T13:59:41.023
> 
> 标签：php, html, xml, curl

我已经编写了一个登录到我们学校笔记系统的 php 脚本。但我正在尝试将 HTML 页面解析为 xml。但我遇到了一些麻烦。首先，表格的 html 代码有点乱，我不知道现在该做什么。

这是 CURL PHP 页面： http: [//koetse.eu/test/curl.php](http://koetse.eu/test/curl.php)。这是回复的源代码：http: [//pastebin.com/RDawmsnY](http://pastebin.com/RDawmsnY)

我正在尝试将凌乱的 HTML 表格更改为 xml 文件，看起来有点像：

```
<?xml version="1.0" ?> > 
<notes>
    <name>Jurre (4HC)</name>
            <class>kwt</class>
            <class>netl</class>
                    <note>6.6</note>
                    <note>6.3</note>
                    <note>4.9</note>
                    <se>5.8</se>
            <class>entl</class>
                    <note>7.5</note>
                    <note>7.3</note>
                    <note>7.7</note>
                    <note>10.0</note>
                    <note>6.6</note>
                    <note>9.6</note>
                    <note>6.7</note>
                    <note>6.7</note>
                    <se>8.6</se>
            <class>lv</class>
                    <note>7.8</note>
                    <note>4.8</note>
                    <se>6.3</se>
</notes> 
```

等...（我只做了前3行作为例子）

很抱歉使用 pastebin，但我与帖子的最大长度发生了争执。

问候尤尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:40:07.590

很惊讶没有人提到整洁。[http://www.w3.org/People/Raggett/tidy/](http://www.w3.org/People/Raggett/tidy/)。已经正式救了我几次。在将垃圾通过它之后，我已经设法将您的 HTML 加载到 DOM 文档中而没有问题。

然而，在通过 tidy 之后，我必须做一个重要的模块 - 你学校的系统输出一些标签，虽然它们可以在 XML 文档中完美运行，但在 HTML 中无法运行 - wisssearch。使用正则表达式搜索和替换，最后你就得到了一个有效的 DOMDocument！

接下来要做的事情：

*   摆脱所有那些 &xAA; 标记 - 正则表达式
*   解析东西！

（整洁 -f errors.txt -m your_file.txt ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:30:24.307

那个 HTML 文档确实看起来很糟糕。我认为您无法使用 DOM 解析器或任何类似 XML 的东西来解析它。

我建议尝试正则表达式方法。

类名显示在一个很好的无编号列表中，因此您可以通过查找`<ul>`and`</ul>`标记然后使用正则表达式从 span 标记中提取名称来抓取它们。

同样，您可以找到 的第二次出现`<table`和第一次出现`</table>`，然后在其中找到 regexp 以获取行和单元格，最后丢弃 span 的内容并留下数字。

# blackberry - sax 解析黑莓 7.1 时出错

> ID：15660745
> 
> 赞同：0
> 
> 时间：2013-03-27T13:59:50.937
> 
> 标签：blackberry, xml-parsing, sax

我正在尝试在黑莓中使用 SAX 解析器并使用了本教程：

[http://javarevisited.blogspot.com/2011/12/parse-read-xml-file-java-sax-parser.html#ixzz2OZJ6vB8O](http://javarevisited.blogspot.com/2011/12/parse-read-xml-file-java-sax-parser.html#ixzz2OZJ6vB8O)

这是我的解析类的代码

```
import java.io.ByteArrayInputStream;

import java.io.InputStream;

import net.rim.device.api.xml.parsers.SAXParser;
import net.rim.device.api.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

public class Samp extends DefaultHandler{

    String url = "http://ravee.clientarea.in/exhibitr/getData.php?db_table=events";
    TheVectorClass tcv ;

    boolean currentElement = false;
    String currentValue = "";

//   private Account acct;
     private String temp;

    public void parsingmethod()

     {     

        System.out.println("in parsingmethod");
         SAXParserFactory spfac = SAXParserFactory.newInstance();

         //Now use the parser factory to create a SAXParser object
         //Create an instance of this class; it defines all the handler methods
        Samp handler;    
        try {
            SAXParser sp = spfac.newSAXParser();

             handler = new Samp();

//           XMLReader = new 

             System.out.println("url is     "
                     + url );
             InputStream is  = new ByteArrayInputStream(url.getBytes());
             //Finally, tell the parser to parse the input and notify the handler
             System.out.println("value of is     " +is);
             System.out.println("value of is     " +handler);

//           System.out.println("            sp.parse(is, handler)                "+            
//          here in next line I get the error 
             sp.parse(is, handler);

        }  catch (Exception e) {
            // TODO Auto-generated catch block
            System.out.println("here in samp error 2");
            e.printStackTrace();
            System.out.println("e.gemessage  2  " +e.getMessage() );
        }

    //Read more: http://javarevisited.blogspot.com/2011/12/parse-read-xml-file-java-sax-parser.html#ixzz2OZJ6vB8O

     }

    /*
     * Every time the parser encounters the beginning of a new element,
     * it calls this method, which resets the string buffer
     */ 
    public void startElement(String uri, String localName,
                  String qName, Attributes attributes) throws SAXException {
           temp = "";

           System.out.println("reached");
           if (qName.equalsIgnoreCase("parameters")) {
//                  acct = new Account();
//                  acct.setType(attributes.getValue("type"));
                  System.out.println("val " +temp);

           }
    }

    /*
     * When the parser encounters the end of an element, it calls this method
     */
    public void endElement(String uri, String localName, String qName)
                  throws SAXException {

           if (qName.equalsIgnoreCase("nme")) {
                  // add it to the list
//                  accList.add(acct);

               System.out.println("val1 " +temp);

           }

           else if (qName.equalsIgnoreCase("descriptin")) {
//                  acct.setName(temp);

               System.out.println("val1 " +temp);
           }

} 
```

并在我的屏幕类中调用它

```
public final class HomeScreen extends MainScreen
{
    /**
    * Creates a new HomeScreen object
    */

    Samp smp;
    String elemtn;

    Connection coon;
    boolean currentElement = false;
    String currentValue = "";

    HomeScreen hm;

    //     Samp smp ;
    TheVectorClass tcv ;
    public HomeScreen()
    {
        // Set the displayed title of the screen
        setTitle("parsing  ");
        final TheVectorClass tcv ;

        //        hm = new HomeScreen();

        smp = new Samp();

        try {
            MainScreenUpdaterThread thread = new MainScreenUpdaterThread(this , smp);
            thread.start();

            System.out.println("before");
            //            smp.parsingmethod();
            System.out.println("after");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            System.out.println("e.get message   "+e.getMessage());
        }   
    }
} 
```

我得到的错误是

> 期待一个元素

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:50:29.243

错误是由于制作输入流的方式

```
InputStream is  = new ByteArrayInputStream(url.getBytes()); 
```

当 xml 文件在本地时，我们使用这种方式创建输入流，当文件在服务器上时，我们需要打开连接，以便我们像这样打开连接

首先将url的字符串转换为streamconnection

```
StreamConnection stream = (StreamConnection)Connector.open(url);

and then open the input stream 

InputStream is =  stream.openInputStream(); 
```

然后使用输入流解析xml

# javascript - 触发点击事件使浏览器崩溃

> ID：15660749
> 
> 赞同：0
> 
> 时间：2013-03-27T13:59:57.053
> 
> 标签：javascript, jquery

检查此链接： [jsfiddle 示例](http://jsfiddle.net/ev3FR/1/)

单击 div 时，我希望里面的链接触发单击事件。但控制台显示点击事件一直触发，直到浏览器崩溃。为什么会这样？什么是解决方案？

真正的 div 里面有很多内容，所以我不希望`<a>`标签覆盖整个 div 或将 div 包装在`<a>`标签内。此功能适用于移动设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:00:53.870

因为在每一个`click`事件中，你都会`click`再次调用，从而导致永无止境的递归。

由于您的单击处理程序`div`与`box`类位于 s 上，因此单击这些 s 内的任何内容都会`div`导致.`click``div`

似乎您想要单击`div`以跟随链接？`click`您可以这样做，而不是在链接上触发 a ：

```
window.location = $(this).find(".link").attr("href"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:04:15.787

尝试这个。它停止无限循环。但更好的问题是为什么要这样做？

```
$(".box").click(function(e){
    console.log("clicked");
    $(this).find(".link").trigger("click");
});

$(".link").click(function(e){
    e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:13:45.720

当您触发单击“.link”时，该事件会冒泡到其父级并最终再次到达“.box”。因此进入递归。为了防止这种情况，你可以做类似的事情

```
$(".box").click(function(e){
    if(e.currentTarget == e.target)
    {    
        console.log("clicked");
        $(this).find(".link").trigger("click");
    }
}); 
```

e.target 是事件发生的元素，e.currentTarget 是绑定事件的元素。

另一种替代解决方案是（推荐），

```
$(".box").click(function(e){
    console.log("clicked");
    $(this).find(".link").trigger("click");       
});
$(".link").click(function (e)
{
    /*This would prevent a click triggered on ".link" to propagate upto its parent i.e ".box" */
    e.stopPropagation();
}); 
```

# java - 在java程序中设置延迟

> ID：15660758
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:00:15.590
> 
> 标签：java, delay

对于这样一个新手问题，我很抱歉，我正在尝试在两个`JText`更改颜色的字段之间设置延迟，即：

```
 box1.setBackground(Color.yellow);
 box2.setBackground(Color.red); 
```

我试过使用：

```
try {
    Thread.sleep(1000); 
}catch(InterruptedException ex) {
    Thread.currentThread().interrupt();
} 
```

然而，当使用这个时，延迟*会立即发生*，两种颜色只会在延迟后改变。预先感谢您对我的情况的任何启发:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:03:20.550

```
box1.setBackground(Color.yellow);
new Thread(new Runnable(){
   public void run(){
       try{
          Thread.sleep(1000);
       }catch(InterruptedException ex){
          ex.printStackTrace();
       }
       box2.setBackground(Color.red);
   }
}).start(); 
```

如果执行 Thread.sleep(1000); 在主线程上，一旦睡眠终止，页面的渲染就会完成，你会看到两个框都在改变它们的颜色。

如果 sleep 运行在与主线程不同的另一个线程中，则 mainThread 渲染将在新线程启动后立即完成，您可以看到第一个框改变了他的颜色。执行完 sleep 后，box2 会改变他的颜色。对不起我的英语，我希望你能理解:)

# ruby-on-rails-3.2 - 如何使用 Rails3 为文件生成缩略图？

> ID：15660760
> 
> 赞同：0
> 
> 时间：2013-03-27T14:00:18.737
> 
> 标签：ruby-on-rails-3.2

我想获取 word 和 pdf 文件的缩略图（文件内容的预览），我正在使用 carrierwave 来处理上传。

我像这样配置上传器：

```
# encoding: utf-8
require 'carrierwave/processing/mime_types'

class FileUploader < CarrierWave::Uploader::Base

  # Include RMagick or ImageScience support:
  # include CarrierWave::RMagick
  include CarrierWave::MiniMagick
  # include CarrierWave::ImageScience

  include CarrierWave::MimeTypes

  version :m do
    process :resize_to_fill => [75, 75]
  end

  version :b do
    process :resize_to_fill => [125, 125]
  end
  ....

end 
```

但它不能与非图像一起使用

# javascript - 如何在coffeescript的jquery ajax回调中设置window.variable

> ID：15660761
> 
> 赞同：0
> 
> 时间：2013-03-27T14:00:22.023
> 
> 标签：javascript, jquery, ajax, backbone.js, coffeescript

该项目使用 Rails + Backbone-on-rails。我已经尝试过这个&那个......但我仍然无法在响应回调中设置全局变量。这是我试图做的：
1）在同一个地方初始化变量主干被初始化

```
$(document).ready ->
  window.current_user = null
  Notes.initialize() 
```

2）设置回调

```
 authorize: ->
    jQuery.ajax(
      type: 'POST'
      url: '/api/sessions.json'
      wait: true
      data:
        email: @get('email')
        password:  @get('password')
    ).success( (response) ->
      exports = this
      exports.current_user = response
      window.current_user = response
      `window.current_user = response` 
```

3）最后执行这个方法：

```
loginUser: (e)->
    e.preventDefault()
    if !@validateField('password') && !@validateField('email')
      return false
    @model.attributes  = @readAttributes()
    @$('#errors').text()
    @model.authorize() # call a method defined above
    console.warn window.current_user
    if window.current_user
      @$('#errors').text('You\'ve successfuly logged in ' )
    else
      @$('#errors').text('Wrong email/password!') 
```

的输出`console.warn window.current_user`是`null`
我应该如何使用这个全局变量？
PS。服务器的响应是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:38:35.883

仅通过将 1) 更改为

```
$(document).ready ->
  window.current_user =
    name: ""
    company: ""
    created_at: ""
    email: ""
    facebook: ""
    id: ""
    license_id: ""
    linkedin: ""
    password_digest: ""
    phone: ""
    title: ""
    twitter: ""
    updated_at: ""
    web: ""
  Notes.initialize() 
```

还没找到其他方法...

# sql - 基于列值的 SQL Server 条件连接

> ID：15660765
> 
> 赞同：14
> 
> 时间：2013-03-27T14:00:36.713
> 
> 标签：sql, sql-server, tsql

我正在研究 SQL Server 中设备/资产数据库的一个相当复杂的方面，并希望寻求帮助。我将在这里尝试专注于一个问题，然后针对另一个问题提出一个单独的问题。

我有一个称为设备`tblEquipment`的表和一个需要对设备集合执行的所需操作的表（`tblActionsRequired`），为了这个问题，相关字段是：

*   `tblEquipment`：`EquipmentID, BasedAtID, AreaID`
*   `tblRequiredActions`：`AllSites (bit), BasedAtID, AreaID`

因此，您的想法`tblRequiredActions`是，您会说站点 A 的所有设备都需要经常检查。区域是一个地点的特定房间或办公室等。因此，如果 AllSites 为真，则该操作适用于公司范围内的所有设备，如果为假，则需要 BasedAtID（用于站点），如果您想进一步缩小范围，AreaID 是可选的。

所以现在的问题是根据这三个字段提取哪些动作应该应用于哪些设备。

我现在所拥有的是我认为可能有效的方法，但我正在努力验证我的结果，因为还有其他因素也让我感到困惑，所以如果我完全走错了路，我真的很感激一些确认或指导！我不想走存储过程和 if 块或联合的路线，因为还有多个其他维度需要用类似的原则来覆盖，我最终会编写一个非常复杂的过程，这将是一场噩梦. 谢谢！！

```
SELECT     
    dbo.tblActionsRequired.ActionID, dbo.tblEquipment.EquipmentID
FROM
    dbo.tblEquipment 
INNER JOIN
    dbo.tblActionsRequired ON dbo.tblActionsRequired.AllSites = 'True' 
                           OR dbo.tblEquipment.AreaID IS NULL 
                           AND dbo.tblEquipment.BasedAtID = dbo.tblActionsRequired.BasedAtID 
                           OR dbo.tblEquipment.AreaID IS NOT NULL 
                           AND dbo.tblEquipment.AreaID = dbo.tblActionsRequired.AreaID 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T14:25:45.350

现有的查询对我来说看起来不错，尽管可以稍微简化一下：

```
SELECT dbo.tblActionsRequired.ActionID, dbo.tblEquipment.EquipmentID
FROM dbo.tblEquipment 
JOIN dbo.tblActionsRequired 
  ON dbo.tblActionsRequired.AllSites = 'True' OR 
     (dbo.tblEquipment.AreaID IS NULL AND 
      dbo.tblEquipment.BasedAtID = dbo.tblActionsRequired.BasedAtID) OR 
     dbo.tblEquipment.AreaID = dbo.tblActionsRequired.AreaID 
```

- 因为如果 a.AreaID 和 e.AreaID 都为空，则条件`dbo.tblEquipment.AreaID = dbo.tblActionsRequired.AreaID`不会评估为真。

（括号不是严格要求的，但为了清楚起见，包括在内。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:15:33.540

对我来说看起来是正确的；你的逻辑和方法看起来很合理。

虽然 AND/OR 的组合可能会被误解......也许考虑将您的 AND 表达式放在括号中（我知道这是多余的，但这样做可以澄清您的*意图*）。根据@MarkBannister 最近的回答，这可能会揭示布尔代数分解的机会:-)

我会亲自将任何“过滤”从内部连接的 ON 子句中移到 WHERE 子句中，只留下与连接本身相关的表达式，在只有一个连接并且这些过滤器与连接逻辑隔离的情况下本身。但这里不是这种情况。

索引可能会以一种或另一种方式影响这一点...检查您的执行计划，看看您是否会从在 FK 或文本字段中添加一些内容中受益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T14:24:49.020

我认为您不需要 not null
如果 AreaID 为 null 则 dbo.tblEquipment.AreaID = dbo.tblActionsRequired.AreaID 将评估为 null

```
SELECT     
    dbo.tblActionsRequired.ActionID, dbo.tblEquipment.EquipmentID
FROM
    dbo.tblEquipment 
INNER JOIN
    dbo.tblActionsRequired 
       ON dbo.tblActionsRequired.AllSites = 'True' 
       OR dbo.tblEquipment.AreaID IS NULL 
          AND dbo.tblEquipment.BasedAtID = dbo.tblActionsRequired.BasedAtID 
       OR dbo.tblEquipment.AreaID = dbo.tblActionsRequired.AreaID 
```

# php - PHP：连接到网络上的共享文件夹

> ID：15660775
> 
> 赞同：0
> 
> 时间：2013-03-27T14:01:05.123
> 
> 标签：php, mysql, windows, codeigniter, dbf

我正在codeignite中制作一个应用程序..我需要连接到网络上的一个共享文件夹......从那里打开一个dbf并获取数据并将它们包含在一个mysql db中......但是要连接到共享文件夹需要用户并通过.....所以我无法访问 dbf 这是代码：

公共函数 update_oferta() {

```
 $this->load->database(); 

   $db = dbase_open('//Ventas/ventas/2013/ODEMCVC12/OFERTA.DBF', 0);

    if ($db) :

          $numero_registros = dbase_numrecords($db);

      for ($i = 1; $i <= $numero_registros; $i++) :

         $value = dbase_get_record($db, $i);  

         $codOferta = $value[49].$value[4];
         $codProducto = $value[49];
         $codDerivado = $value[87];
         $cantidadOferta = $value[52];
         $codCentro = $value[40];
         $mesOferta = substr($value[6], 4, 2); 
         $annoOferta = substr($value[6], 0, 4); 

$query = $this->db->get_where('oferta_table',array('codOferta'=>$codOferta));
        $result = $query->result();

        if (empty($result)): 

            $insert = array("codOferta" => $codOferta, 
                            "codProducto" => $codProducto,
                "codDerivado" => $codDerivado, 
                            "cantidadOferta" => $cantidadOferta,
                "codCentro" => $codCentro,
                "mesOferta" => $mesOferta,
                "annoOferta" => $annoOferta);

            $this->db->set($insert);
            $this->db->insert("oferta_table");

        endif;

      endfor;   
    endif;
  $confirm = "The update was a success"; 
return $confirm; 
} 
```

这是错误：

遇到 PHP 错误

严重性：警告

消息：dbase_open() [function.dbase-open]: 无法打开数据库 z:/2013/ODEMCVC12/OFERTA.DBF

文件名：models/vpxp_model.php

行号：460

注意：我也尝试映射文件夹，但什么都没有......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:07:20.850

看起来您需要使用您的网络凭据映射您的网络路径。

这是[Windows的文件读取解决方案](http://www.codedwell.com/post/21/reading-file-list-from-a-mapped-windows-network-drive)

# drupal - Drupal 7 多语言视图

> ID：15660776
> 
> 赞同：1
> 
> 时间：2013-03-27T14:01:06.320
> 
> 标签：drupal, drupal-7, drupal-views

我正在用英语和法语建立一个网站。我正在使用现场翻译，因为我在文章中附有评论表，我希望人们评论并查看所有评论，无论他们使用哪种语言查看网站。

在站点内，我通过视图显示文章列表。有些文章只有英文。有没有办法阻止法国用户在他们的视图中看到只有英文的文章？目前，英语和法语的文章以其相关用户选择的语言显示预告片，但只有英语的文章以英语为法语用户显示，而不是简单地消失。

有谁知道解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:11:14.223

您只需要一个视图即可根据用户当前的语言过滤内容。

关于您的要求，一种简单的方法是设置分类法，例如
- 仅限英语
- 仅限法语
- 两种语言

并使用它来相应地过滤您的视图。

可能有一种更优雅的方式，请查看 drupal.org
[HowTo 上的以下文章：基本国际化设置](http://drupal.org/node/1268692)。多语言设置涉及许多不同的步骤和模块，也有许多可能的食谱。

# c# - 输入开始时间、结束时间和日期生成正确的开始日期时间和结束日期时间

> ID：15660777
> 
> 赞同：0
> 
> 时间：2013-03-27T14:01:07.337
> 
> 标签：c#, winforms

在我的 C# 应用程序中，要求功能之一是在某个用户界面（Windows 窗体）上，用户输入开始时间、结束时间和日期。然后应用程序将生成正确的开始日期时间和结束日期时间以保存回数据库。下面列出了详细信息/场景。

任何想法？先感谢您。

## 示例 1：

如果
输入日期：03/15/2013
输入开始时间：11:45 PM
输入结束时间：1:10 AM
那么，
输出开始日期时间：“03/15/2013 23:45:00”
输出结束-date-time: "03/16/2013 01:10:00" // 注意：输出 end-date-time 是 start-date-time 后 1 天

## 示例 2：

如果
输入日期：03/15/2013
输入开始时间：晚上 9:45
输入结束时间：晚上 10:30
那么，
输出开始日期时间：“03/15/2013 21:45:00”
输出结束-date-time: "03/15/2013 22:30:00" // 注意：start-date-time 和 end-date-time 具有相同的日期

## 示例 3：

如果
输入日期：10/25/2012
输入开始时间：上午 6:10
输入结束时间：晚上 8:15 那么，
输出开始日期时间：“10/25/2012 06:10:00”
输出结束-date-time: "10/25/2012 20:15:00" // 注意：start-date-time 和 end-date-time 具有相同的日期

## 示例 4：

如果
输入日期：07/12/2010
输入开始时间：上午 6:10
输入结束时间：上午 4:25 那么，
输出开始日期时间：“07/12/2010 06:10:00”
输出结束-date-time: "07/13/2010 04:25:00" // 注意：输出 end-date-time 是 start-date-time 后 1 天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:08:14.607

```
 string InputDate = "3/15/2013";
    string InputStartTime = "11:45 PM";
    string InputEndTime = "1:10 AM";
    DateTime StartTime, EndTime;
    StartTime = Convert.ToDateTime(InputDate + " " + InputStartTime);
    EndTime = Convert.ToDateTime(InputDate + " " + InputEndTime);
    if (EndTime < StartTime)
        EndTime.AddDays(1);
    string OutputStartTime = StartTime.ToString("MM/dd/yyyy HH:mm:ss");
    string OutputEndTime = EndTime.ToString("MM/dd/yyyy HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:06:37.070

```
var date = DateTime.ParseExact("03/15/2013 11:45 PM", "MM/dd/yyyy hh:mm tt", CultureInfo.InvariantCulture); 
```

我让您根据您的业务规则制定创建作为第一个参数传递给此函数的字符串所需的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:13:26.700

在伪代码中：

*   `D1`通过组合输入日期和输入开始时间创建开始日期
*   `D2`通过组合输入日期和输入结束时间创建结束日期
*   如果`D2`在之前，`D1`则添加 1 天`D2`

# microsoft-ui-automation - .net UIAutomation C++ 中的简单示例

> ID：15660778
> 
> 赞同：2
> 
> 时间：2013-03-27T14:01:10.090
> 
> 标签：microsoft-ui-automation

我正在通过.Net 中的[UIAuomation Clients API](http://msdn.microsoft.com/en-us/library/windows/desktop/ee671406%28v=vs.85%29.aspx)并且必须使用 C++ 而不是 C#。这是因为[SendInput](http://msdn.microsoft.com/en-us/library/ms646310%28VS.85%29.aspx)函数仅在 C++ 中可用，并且似乎是将鼠标点击发送到任何应用程序的最可靠方法（与此问题相同的问题：[如何在没有实现任何模式的情况下操作控件？](https://stackoverflow.com/questions/14230985/how-to-manipulate-a-control-without-any-pattern-implemented)）。

现在，由于缺少有关 msdn 的文档，我正在努力使用 UIAutomation API 的 C++ 版本。有人可以告诉如何使用[CreatePropertyCondition](http://msdn.microsoft.com/en-us/library/windows/desktop/ee671529%28v=vs.85%29.aspx)、 UIA_NamePropertyId 和“Windows Media Player”创建 PropertyCondition。

```
char *name = new char[30];
strcpy(name, "Windows Media Player");
VARIANT vt;
vt.vt = VT_CARRAY; // This is probably wrong
vt.pcVal = name;
hr = g_pAutomation->CreatePropertyCondition(UIA_NamePropertyId, vt, &condition);
if(!SUCCEEDED(hr)){
    printf("Cannot createpropertycondition in getWMP\n");
    return hr;
} 
```

我总是进入这种`if`状态。该`g_pAutomation`变量工作正常，我能够很好地获得 RootElement。

一个简单的教程/示例（在 C++ 中）的链接也将非常有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:49:29.813

你应该试试：

```
VARIANT vt;
vt.vt = VT_BSTR;
vt.bstrVal = SysAllocString(windowName); 
```

导航 MSDN 非常困难，但我设法找到了一个示例： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ff625913 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff625913(v=vs.85).aspx)

# powershell-2.0 - 发送邮件消息在脚本中不起作用

> ID：15660779
> 
> 赞同：0
> 
> 时间：2013-03-27T14:01:12.693
> 
> 标签：powershell-2.0

我对 cmdlet 发送邮件消息有一个奇怪的问题。在 powershell 上使用 direclty 时，它工作得很好，但是当我想在脚本上使用它来编辑不同的变量给邮件用户时，邮件无法正确发送。我有这段代码：

```
$userInfo = $fornamn+" "+$efternamn+" "+$usernm+" "+$pass  
$from = "administrator@"+$ADinfo.dnsroot  
$to = $fornamn+"."+$efternamn+"@cuebid.se"  
$smtpserver = "cb-dc02.cuebid.local"  
$subject = "sys-konto"  
Send-MailMessage $to $subject $userInfo $smtpserver -from $from 
```

$fornamn、$efternamn 和 $pass 是在脚本前面创建的变量，它们都是 String 类型。

使用脚本时，我没有收到任何邮件，但在交换日志中，我可以看到收到了邮件当直接在 powershell 中创建变量并运行 send-mailmessage 时，它​​可以完美运行任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:57:18.053

我这里没有这种行为。此外，您可以更优雅地组合字符串变量，因为在双引号中会发生变量替换（注意点前面的反引号）：

```
$userInfo = "$fornamn $efternamn $usernm $pass"
$from = "administrator@"+$ADinfo.dnsroot
$to = "$fornamn`.$efternamn@cuebid.se"
$smtpserver = "cb-dc02.cuebid.local"
$subject = "sys-konto"
Send-MailMessage $to $subject $userInfo $smtpserver -from $from 
```

您确定邮件最终没有被标记为垃圾邮件吗？我知道这似乎不合逻辑，因为从命令行执行时，您说它有效。不过，值得仔细检查。

我唯一能想到的另一件事是，在您的 .ps1 文件中，变量不包含完全相同的值（可能某处的空格太多）。

# c# - 在 MonoTouch 中获取没有 UI 的 iOS 屏幕分辨率

> ID：15660781
> 
> 赞同：3
> 
> 时间：2013-03-27T14:01:16.323
> 
> 标签：c#, ios, user-interface, xamarin.ios, uikit

问题是：如何在`UIScreen.MainScreen.Bounds`没有 UI 线程的情况下在 iOS MonoTouch（如）中获得屏幕分辨率？属性`.MainScreen`抛出异常

```
UIKit Consistency error: you are calling a UIKit method that can only be invoked from the UI thread. 
```

因此我需要一个 UI 线程。但由于在加载应用程序之前需要解析，因此在`UIApplication.Main()`调用之前`UIApplication.mainThread`（一个私有成员，由调试器显示）是`null`. 我假设根本没有 UI 线程，因为没有 UI。所以我在技术上不能调用`InvokeOnMainThread`任何对象。

没有其他方法可以获得屏幕分辨率`UIScreen.MainScreen`吗？如果没有，我将不得不将初始化移至从 UI 调用的一些代码。然后还有另一个问题：如何`InvokeOnMainThread`从任意线程获取任何 UI 对象（调用）？我无法控制 UI 代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:45:26.267

UI 线程检查是[可选](http://tirania.org/monomac/archive/2012/Sep-10.html)的，可以全局或本地禁用。后一个（本地）选项似乎适合您的需要。

以下代码将关闭检查，获取边界并重新启用检查（如果之前已启用）。

```
bool check_ui = UIApplication.CheckForIllegalCrossThreadCalls;
UIApplication.CheckForIllegalCrossThreadCall = false;
var screen_bounds = UIScreen.MainScreen.Bounds;
UIApplication.CheckForIllegalCrossThreadCalls = check_ui; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:31:43.513

我不知道第一个问题，但是对于第二个问题“如何从任意线程获取任何 UI 对象（调用 InvokeOnMainThread）？”，这个怎么样？

```
new NSObject().InvokeOnMainThread(() => {   
    //call UI specific stuff
}); 
```

# primefaces - 为 primefaces 组件更改 Condition 上的 styleClass

> ID：15660785
> 
> 赞同：3
> 
> 时间：2013-03-27T14:01:26.427
> 
> 标签：primefaces

有什么方法可以根据 primefaces 组件的条件更改 styleClass 吗？

如果有，请建议我。

我是这样写的。。

```
styleClass="#{(bean.comment==null) ? style1 : style2}" 
```

为styleClass赋予价值是正确的方法吗？

如果有的话，请给我建议更好的方法。

感谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T14:18:00.107

您可以这样做，但几乎不需要修改。您应该返回代表类名的字符串：

```
styleClass="#{(bean.comment==null) ? 'style1' : 'style2'}" 
```

另一种方法是在 backing bean 中计算这个条件，并使用更简单的 EL：

```
styleClass="#{bean.style}" 
```

在支持 bean 中：

```
public String getStyle() {
  return (comment == null) ? "style1" : "style2";
} 
```

# jquery - jQuery .on 函数的自定义事件

> ID：15660794
> 
> 赞同：1
> 
> 时间：2013-03-27T14:02:01.463
> 
> 标签：jquery

我想对`mousedown`（不是`click`）做一些动作，但前提是按下鼠标左键。

我是怎么做的：

```
$(document)
    .on('mousedown', '.object', function(e) {
        if (e.which == 1) { // check for left mouse button
             doSomeActions();
        }
    ); 
```

我希望它如何完成：

```
$(document)
    .on('leftClick', '.object', doSomeActions); 
```

有没有办法让它成为可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:06:38.273

```
function onLeftClick(fn){
    return function(e){
        if(e.which == 1)
            fn.call(this, e);
    };
} 
```

例子：

```
$(document).on('mousedown', '.object', onLeftClick(doSomeActions)); 
```

# mysql - 插入自定义表时我是否仍应转义数据？

> ID：15660795
> 
> 赞同：0
> 
> 时间：2013-03-27T14:02:06.440
> 
> 标签：mysql, wordpress, pdo, sanitization

我发现了一个[类似的问题](https://stackoverflow.com/questions/3143614/do-php-pdo-prepared-statments-need-to-be-escaped)，但它并没有真正给我想要的答案。[本教程](http://wp.tutsplus.com/tutorials/creative-coding/data-sanitization-and-validation-with-wordpress/)解释了 WordPress 使用的最重要的卫生功能。

我正在使用 PDO 将表单数据存储到自定义表中。许多此类数据包含名称，例如`l'this`和`Cotélac & Blancé`。

如果我将电子邮件和 url 字段放在一边，是否足以使用`esc_attr`并`esc_html`热衷于 SQL 注入和跨站点脚本？

我应该在数据保存到数据库之前使用它吗？或者就在我把它放到屏幕上之前？

```
//From Wordpress
esc_html -> Escaping for HTML blocks
esc_attr -> Encodes the <, >, &, " and ' 
```

这是我使用的典型查询：

```
$sql = " SELECT name
         FROM name
         WHERE user_name = :user_name
         AND fk_ID = :some_id ";

$stmt = $this->db->prepare($sql);
$stmt->bindParam(':user_name', $name, PDO::PARAM_STR);
$stmt->bindParam(':some_id', $some_id, PDO::PARAM_STR);
$stmt->execute();

$result = $stmt->fetchAll();
return $result;

// alternative (from another query)
$stmt = $this->db->prepare($sql);
$stmt->execute(array(':id'=> $id));
$result = $stmt->fetchAll(PDO::FETCH_ASSOC);

return $result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:11:44.920

既然你已经标记了[wordpress](https://stackoverflow.com/questions/tagged/wordpress)，我可能会补充一点，有一个处理所有这些的[$wpdb 类。](http://codex.wordpress.org/wpdb_Class)

是的，你应该使用[$wpdb->prepare](http://codex.wordpress.org/wpdb_Class#Protect_Queries_Against_SQL_Injection_Attacks)来帮助你。

以 Codex 为例：

```
$wpdb->query( $wpdb->prepare( 
    "
        INSERT INTO $wpdb->postmeta
        ( post_id, meta_key, meta_value )
        VALUES ( %d, %s, %s )
    ", 
        10, 
    $metakey, 
    $metavalue 
) ); 
```

# php - 如何用 PHP 制作金字塔程序？

> ID：15660797
> 
> 赞同：0
> 
> 时间：2013-03-27T14:02:10.203
> 
> 标签：php

我正在尝试`PHP`像这样制作一个金字塔计划：

```
 1
   21
  321
 4321
54321 
```

我试过这个：

```
for($i=1;$i<=5;$i++)
{
    for($j=1;$j<=$i;$j++)
    {
        echo $j;
    }
    echo "<br>";
} 
```

但它正在创建一个像这样的金字塔：

```
1
12
123
1234
12345 
```

我在过去的 6 个小时里都在尝试这个，但做不到。谁能帮我这样做。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:16:27.680

多一点创意：

```
$width = 9;

foreach (range(1, $width) as $i) {
    printf("%{$width}s\n", join(array_reverse(range(1, $i))));
} 
```

[http://3v4l.org/rFB0Y](http://3v4l.org/rFB0Y)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:05:25.143

```
for($i=1;$i<=5;$i++)
{
    for($j=5; $j>$i; $j--)
    {
        echo "&nbsp;";
    }
    for($j=$i; $j>0; $j--)
    {
        echo $j;
    }
    echo "<br>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:34:24.457

```
for($r=1; $s>=$r; r++)
 {
   for($p=$s-$r; $p>=1; $p--)
      echo(" ");

   for($c=1; c<=$r; c++)
      print_r($c);

   for($x=$r-1; $x>=1; x--)
     print_r($x);

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:16:47.987

尝试这个 ：

```
$cnt    = 5;
$array  = array_fill(0, ($cnt), '0');

for($i=1;$i<($cnt+1);$i++){
    array_shift($array);
    array_push($array, $i);
    echo implode(" ", $array);
    echo "<br>";
} 
```

为了获得更好的视图，我添加了`0`而不是`space`, 将 Space 更改`$array = array_fill(0, ($cnt-1), '0');`为`$array = array_fill(0, ($cnt-1), '&nbsp;');`

输出 ：

```
0 0 0 0 1
0 0 0 1 2
0 0 1 2 3
0 1 2 3 4
1 2 3 4 5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T14:09:05.683

这是你想要的吗 ：） ？

```
for($i=1;$i<=5;$i++)
{
    $string = null;
    for($j=1;$j<=$i;$j++)
    {
        $string .= $j;
    }
    echo strrev($string) . "<br>";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T14:09:15.137

这是我的贡献：

```
$o = '';
echo "<pre>";

for($i = 1; $i < 6; $i++)
{
    $o .= $i;
    for($x = 0; $x < 5-$i; $x++)
        echo " ";
    echo $o . "\n";
}

echo "</pre>"; 
```

[例子](http://codepad.viper-7.com/3yON52)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T14:09:16.357

```
for($i=1;$i!=6;$i++)
{
    for ($z = 5-$i; $z != 0; $z--) {
        echo "&nbsp;";
    }

    for ($z = $i; $z > 0; $z--) {
        echo $z;
    }
    echo "<br>";
} 
```

# javascript - 如何更新特定div的元素？

> ID：15660803
> 
> 赞同：0
> 
> 时间：2013-03-27T14:02:15.657
> 
> 标签：javascript, html, append, updates

我正在创建一个网页，用户可以在其中选择一个项目并显示信息。我有两个按钮（btnBuy0 和 btnBuy1）。单击 BtnBuy0 时，显示数量为 1 的项目的详细信息。同样，如果单击 btnBuy1，则该项目的详细信息应附加在 item0 的详细信息下方，但我无法使其正常工作。相反，item0 的详细信息被 item1 的详细信息替换。

```
$("#btnBuy0").click(function() {
    if (!sessionStorage['quantity0']) {
        sessionStorage['quantity0'] = 1;
        $("#dropbox").append('<div id = "0"><img class = "thumb" id = "t0" src="../images/21_metoyou.jpg" />'+ teddy[0].desc + ", Price £"
        + teddy[0].price + ", Quantity: " + sessionStorage.getItem('quantity0') + "<button id = 'btnRemove0'>Remove</button></div><br/>");
        updateBasket();
        sessionStorage["total0"] = parseInt(sessionStorage.getItem('quantity0')) * teddy[0].price;
        updateSubtotal();
    } else {
        sessionStorage['quantity0']++;
        $("#dropbox").html('<div id = "0"><img class = "thumb"  id = "t0" src="../images/21_metoyou.jpg" />' + teddy[0].desc + ", Price £"
        + teddy[0].price + ", Quantity: " + sessionStorage.getItem('quantity0') + "<button id = 'btnRemove0'>Remove</button></div><br/>");
        updateBasket();
        sessionStorage["total0"] = parseInt(sessionStorage.getItem('quantity0')) * teddy[0].price;
        updateSubtotal();

    }

    if (Modernizr.sessionstorage) {  // check if the browser supports sessionStorage
        myids.push(teddy[0].partnum); // add the current username to the myids array
        sessionStorage["ids"]=JSON.stringify(myids); // convert it to a string and put into sessionStorage
    } else {
     // use cookies instead of sessionStorage
    }
});

$("#btnBuy1").click(function() {
    if (!sessionStorage['quantity1']) {
        sessionStorage['quantity1']=1;
        $("#dropbox").append('<div id = "1"><img class = "thumb" id = "t1" src="../images/birthday_metoyou.jpg" />' + teddy[1].desc + ", Price £"
         + teddy[1].price + ", Quantity: " + sessionStorage.getItem('quantity1') + "<button id = 'btnRemove1'>Remove</button></div><br/>");
         updateBasket();
        sessionStorage["total1"] = parseInt(sessionStorage.getItem('quantity1')) * teddy[1].price;
        updateSubtotal();
    } else {
        sessionStorage['quantity1']++;
        $("#dropbox").html('<div id = "1"><img class = "thumb" id = "t1" src="../images/birthday_metoyou.jpg" />' + teddy[1].desc + ", Price £"
         + teddy[1].price + ", Quantity: " + sessionStorage.getItem('quantity1') + "<button id = 'btnRemove1'>Remove</button></div><br/>");
         updateBasket();
        sessionStorage["total1"] = parseInt(sessionStorage.getItem('quantity1')) * teddy[1].price;
        updateSubtotal();
    }

    if (Modernizr.sessionstorage) {  // check if the browser supports sessionStorage
        myids.push(teddy[1].partnum); // add the current username to the myids array
        sessionStorage["ids"]=JSON.stringify(myids); // convert it to a string and put into sessionStorage
    } else {
     // use cookies instead of sessionStorage
    }                
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:38:29.950

您的代码在这两种情况下几乎完全重复。您应该编写一次，将其放入一个命名函数，根据单击的按钮传入 1 或 0，然后使用内部变量来计算所有代码。像这样的东西：

```
function clicked(whichOne) {
    yolo = 'quantity' + whichOne; //Here I just declare your most used variable to make the code easier to read.

    if(!sessionStorage[yolo]) {
        sessionStorage[yolo] = 1;
    } else {
        sessionStorage[yolo]++;
    }

    //Notice that using .html() will always replace what's inside the #dropbox.
    //If you want to add to what is already inside, use .append() instead.
    $("#dropbox").html('<div id ="'+ whichOne +'"><img class = "thumb" id = "t' + whichOne +'" src="../images/21_metoyou.jpg" />'+ teddy[whichOne].desc + ", Price £" + teddy[whichOne].price + ", Quantity: " + sessionStorage.getItem(yolo) + "<button id = 'btnRemove"+ whichOne +"'>Remove</button></div><br/>");

    updateBasket();

    sessionStorage["total" + whichOne] = parseInt(sessionStorage.getItem(yolo)) * teddy[whichOne].price;

    updateSubtotal();
}

$("#btnBuy0").click(function() {
    clicked(0);
});

$("#btnBuy1").click(function() {
    clicked(1);
}); 
```

你可能会进一步减少这个。这只是一个示例，您需要对其进行调整以适应您的情况。顺便说一句，这是一个你可以玩弄的小提琴以获得更好的主意：http: [//jsfiddle.net/ArzSs/2/](http://jsfiddle.net/ArzSs/2/)

# android - 关于语音识别的 Android 附加功能不起作用

> ID：15660805
> 
> 赞同：10
> 
> 时间：2013-03-27T14:02:23.273
> 
> 标签：android, speech-recognition, speech-to-text

我目前正忙于语音识别，我希望语音识别器能够永远持续地听我说话。该应用程序的目的是等待特定关键字的语音：当用户说出此关键字时，服务准备好接收用户语音命令经过研究我发现我们可以操纵识别器收听的时间。通过这些常数：

顺便说一下，默认识别器服务会监听大约 10 秒。（谷歌API）

```
 String EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS   The amount of time that it should take after we stop hearing speech to consider the input complete.
     String EXTRA_SPEECH_INPUT_MINIMUM_LENGTH_MILLIS    The minimum length of an utterance.
     String EXTRA_SPEECH_INPUT_POSSIBLY_COMPLETE_SILENCE_LENGTH_MILLIS  The amount of time that it should take after we stop hearing speech to consider the input possibly complete. 
```

[http://java.llp2.dcc.ufmg.br/apiminer/docs/reference/android/speech/RecognizerIntent.html](http://java.llp2.dcc.ufmg.br/apiminer/docs/reference/android/speech/RecognizerIntent.html)

这些是 bundle 类的附加功能。

问题是，当我在代码中使用这些常量时，它不起作用。

这是我的代码：

```
 intent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_MINIMUM_LENGTH_MILLIS, 5000);
   intent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS, 5000);
   intent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_POSSIBLY_COMPLETE_SILENCE_LENGTH_MILLIS, 5000); 
```

如您所见，尽管我写了 5000 毫秒，但识别器仍然会听我大约 10 秒。

你能想到问题吗？也许我不知道如何使用附加功能，或者可能是关于权限，也许它跳过了我的代码，或者我应该添加一些其他代码。

任何帮助都将不胜感激。

**编辑：这是我的完整代码：**

**VoiceRecognitionActivity.java**

```
public class VoiceRecognitionActivity extends Activity implements
    TextToSpeech.OnInitListener {

private static final int REQUEST_CODE = 1234;
private Button mTalkButton;
private ListView wordsList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_voice_recognition);
    mTalkButton = (Button) findViewById(R.id.talk_button);
    wordsList = (ListView) findViewById(R.id.listView1);
    // Disable button if no recognition service is present
    PackageManager pm = getPackageManager();
    List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(
            RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
    if (activities.size() == 0) {
        mTalkButton.setEnabled(false);
        mTalkButton.setText("Recognizer not present");
    } else {
        mTalkButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(
                        RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
                intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
                        "Voice recognition Demo...");
                String defaultLanguage = Locale
                        .getDefault().toString();
                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale
                        .getDefault());

                intent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_MINIMUM_LENGTH_MILLIS, 5000);
                intent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS, 5000);
                intent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_POSSIBLY_COMPLETE_SILENCE_LENGTH_MILLIS, 5000);

                startActivityForResult(intent, REQUEST_CODE);

            }
        });
    }
}

/**
 * Handle the results from the voice recognition activity.
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
        // Populate the wordsList with the String values the recognition
        // engine thought it heard
        ArrayList<String> matches = data
                .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        wordsList.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, matches));
    }
    super.onActivityResult(requestCode, resultCode, data);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_voice_recognition, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.menu_settings:
        startActivity(new Intent(this, SettingsActivity.class));
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
public void onInit(int status) {
    // TODO Auto-generated method stub

} 
```

}

**TTSUtils.java**

公共类 TTSUtils 实现 TextToSpeech.OnInitListener {

```
private TextToSpeech mTts;
private static TTSUtils mInstance;
private Context mContext;

public static TTSUtils getInstance(Context c) {
    if (mInstance == null) {
        mInstance = new TTSUtils(c);
    }
    return mInstance;
}

private TTSUtils(Context c) {
    mContext = c;
    mTts = new TextToSpeech(mContext, this);
    mInstance = this;
}

@Override
public void onInit(int status) {
    // TODO Auto-generated method stub

}

public void destroyTTS() {
    if (mTts != null) {
        mTts.stop();
        mTts.shutdown();
    }
}

public int setLanguage(Locale l) {
    return mTts.setLanguage(l);
}

public int speak(String s, int i, HashMap<String, String> h) {
    return mTts.speak(s, i, h);
} 
```

}

**SettingsActivity.java**

公共类 SettingsActivity 扩展 PreferenceActivity {

```
/**
 * Determines whether to always show the simplified settings UI, where
 * settings are presented in a single list. When false, settings are shown
 * as a master/detail two-pane view on tablets. When true, a single pane is
 * shown on tablets.
 */

private static final boolean ALWAYS_SIMPLE_PREFS = false;

@Override
protected void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);

    setupSimplePreferencesScreen();
}

/**
 * Shows the simplified settings UI if the device configuration if the
 * device configuration dictates that a simplified, single-pane UI should be
 * shown.
 */
private void setupSimplePreferencesScreen() {
    if (!isSimplePreferences(this)) {
        return;
    }

    // In the simplified UI, fragments are not used at all and we instead
    // use the older PreferenceActivity APIs.

    // Add 'general' preferences.
    addPreferencesFromResource(R.xml.pref_general);

    // Add 'notifications' preferences, and a corresponding header.
    PreferenceCategory fakeHeader = new PreferenceCategory(this);
    fakeHeader.setTitle(R.string.pref_header_notifications);
    getPreferenceScreen().addPreference(fakeHeader);
    addPreferencesFromResource(R.xml.pref_notification);

    // Add 'data and sync' preferences, and a corresponding header.
    fakeHeader = new PreferenceCategory(this);
    fakeHeader.setTitle(R.string.pref_header_data_sync);
    getPreferenceScreen().addPreference(fakeHeader);
    addPreferencesFromResource(R.xml.pref_data_sync);

    // Bind the summaries of EditText/List/Dialog/Ringtone preferences to
    // their values. When their values change, their summaries are updated
    // to reflect the new value, per the Android Design guidelines.
    bindPreferenceSummaryToValue(findPreference("example_text"));
    bindPreferenceSummaryToValue(findPreference("example_list"));
    bindPreferenceSummaryToValue(findPreference("notifications_new_message_ringtone"));
    bindPreferenceSummaryToValue(findPreference("sync_frequency"));
}

/** {@inheritDoc} */
@Override
public boolean onIsMultiPane() {
    return isXLargeTablet(this) && !isSimplePreferences(this);
}

/**
 * Helper method to determine if the device has an extra-large screen. For
 * example, 10" tablets are extra-large.
 */
private static boolean isXLargeTablet(Context context) {
    return (context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_XLARGE;
}

/**
 * Determines whether the simplified settings UI should be shown. This is
 * true if this is forced via {@link #ALWAYS_SIMPLE_PREFS}, or the device
 * doesn't have newer APIs like {@link PreferenceFragment}, or the device
 * doesn't have an extra-large screen. In these cases, a single-pane
 * "simplified" settings UI should be shown.
 */
private static boolean isSimplePreferences(Context context) {
    return ALWAYS_SIMPLE_PREFS
            || Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB
            || !isXLargeTablet(context);
}

/** {@inheritDoc} */
@Override
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public void onBuildHeaders(List<Header> target) {
    if (!isSimplePreferences(this)) {
        loadHeadersFromResource(R.xml.pref_headers, target);
    }
}

/**
 * A preference value change listener that updates the preference's summary
 * to reflect its new value.
 */
private static Preference.OnPreferenceChangeListener sBindPreferenceSummaryToValueListener = new Preference.OnPreferenceChangeListener() {
    @Override
    public boolean onPreferenceChange(Preference preference, Object value) {
        String stringValue = value.toString();

        if (preference instanceof ListPreference) {
            // For list preferences, look up the correct display value in
            // the preference's 'entries' list.
            ListPreference listPreference = (ListPreference) preference;
            int index = listPreference.findIndexOfValue(stringValue);

            // Set the summary to reflect the new value.
            preference
                    .setSummary(index >= 0 ? listPreference.getEntries()[index]
                            : null);

        } else if (preference instanceof RingtonePreference) {
            // For ringtone preferences, look up the correct display value
            // using RingtoneManager.
            if (TextUtils.isEmpty(stringValue)) {
                // Empty values correspond to 'silent' (no ringtone).
                preference.setSummary(R.string.pref_ringtone_silent);

            } else {
                Ringtone ringtone = RingtoneManager.getRingtone(
                        preference.getContext(), Uri.parse(stringValue));

                if (ringtone == null) {
                    // Clear the summary if there was a lookup error.
                    preference.setSummary(null);
                } else {
                    // Set the summary to reflect the new ringtone display
                    // name.
                    String name = ringtone
                            .getTitle(preference.getContext());
                    preference.setSummary(name);
                }
            }

        } else {
            // For all other preferences, set the summary to the value's
            // simple string representation.
            preference.setSummary(stringValue);
        }
        return true;
    }
};

/**
 * Binds a preference's summary to its value. More specifically, when the
 * preference's value is changed, its summary (line of text below the
 * preference title) is updated to reflect the value. The summary is also
 * immediately updated upon calling this method. The exact display format is
 * dependent on the type of preference.
 * 
 * @see #sBindPreferenceSummaryToValueListener
 */
private static void bindPreferenceSummaryToValue(Preference preference) {
    // Set the listener to watch for value changes.
    preference
            .setOnPreferenceChangeListener(sBindPreferenceSummaryToValueListener);

    // Trigger the listener immediately with the preference's
    // current value.
    sBindPreferenceSummaryToValueListener.onPreferenceChange(
            preference,
            PreferenceManager.getDefaultSharedPreferences(
                    preference.getContext()).getString(preference.getKey(),
                    ""));
}

/**
 * This fragment shows general preferences only. It is used when the
 * activity is showing a two-pane settings UI.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public static class GeneralPreferenceFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.pref_general);

        // Bind the summaries of EditText/List/Dialog/Ringtone preferences
        // to their values. When their values change, their summaries are
        // updated to reflect the new value, per the Android Design
        // guidelines.
        bindPreferenceSummaryToValue(findPreference("example_text"));
        bindPreferenceSummaryToValue(findPreference("example_list"));
    }
}

/**
 * This fragment shows notification preferences only. It is used when the
 * activity is showing a two-pane settings UI.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public static class NotificationPreferenceFragment extends
        PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.pref_notification);

        // Bind the summaries of EditText/List/Dialog/Ringtone preferences
        // to their values. When their values change, their summaries are
        // updated to reflect the new value, per the Android Design
        // guidelines.
        bindPreferenceSummaryToValue(findPreference("notifications_new_message_ringtone"));
    }
}

/**
 * This fragment shows data and sync preferences only. It is used when the
 * activity is showing a two-pane settings UI.
 */
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public static class DataSyncPreferenceFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.pref_data_sync);

        // Bind the summaries of EditText/List/Dialog/Ringtone preferences
        // to their values. When their values change, their summaries are
        // updated to reflect the new value, per the Android Design
        // guidelines.
        bindPreferenceSummaryToValue(findPreference("sync_frequency"));
    }
} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-16T11:17:01.053

在最近的 Google 搜索更新中，这些参数不再适用于 Jelly Bean 设备。一段时间以来，我一直想提交一份关于 if 的错误报告。它们仍然适用于 ICS 设备及以下设备。

如果您想在不超时的情况下继续侦听关键字，则必须执行一个循环，从而检查[onPartialResults](http://developer.android.com/reference/android/speech/RecognitionService.Callback.html#partialResults%28android.os.Bundle%29)中的关键字。如果调用了[Results](http://developer.android.com/reference/android/speech/RecognitionService.Callback.html#results%28android.os.Bundle%29)，也没有检测到关键字，则需要立即重新开始识别。

您需要处理[静默死亡错误](https://code.google.com/p/android/issues/detail?id=37883)并将系统音频流静音以[防止 Jelly Bean 发出哔哔声](https://code.google.com/p/android/issues/detail?id=39486)。

这些问题使实施变得非常混乱和令人沮丧。整理一下谷歌......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:11:34.073

这仅适用于果冻豆

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
if (requestCode == REQUEST_CODE && resultCode == RESULT_OK) {
    // Populate the wordsList with the String values the recognition
    // engine thought it heard
    ArrayList<String> matches = data
            .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
    wordsList.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, matches));
}
else {
finishActivity(REQUEST_CODE);
          startAndroidVoiceRecognition();
}
super.onActivityResult(requestCode, resultCode, data);
}  

public startAndroidVoiceRecognition()
{
    Intent intent = new Intent(
                    RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                    RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
            intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
                    "Voice recognition Demo...");
            String defaultLanguage = Locale
                    .getDefault().toString();
            intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale
                    .getDefault());
    startActivityForResult(intent, REQUEST_CODE);
} 
```

# maven - junit 和 hamcrest 宣言

> ID：15660807
> 
> 赞同：8
> 
> 时间：2013-03-27T14:02:25.383
> 
> 标签：maven, junit, hamcrest

我在 4.10 使用 junit，在 1.3 声明 hamcrest-core，在 1.3 声明 hamcrest-library。我的问题是 hamcrest-library 和 hamcrest-core 嵌入在 junit 4.10 中。junit 4.11呢？

```
 <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hamcrest</groupId>
        <artifactId>hamcrest-core</artifactId>
        <version>1.3</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hamcrest</groupId>
        <artifactId>hamcrest-library</artifactId>
        <version>1.3</version>
        <scope>test</scope>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T14:14:00.730

如果您浏览到[search.maven.org](http://search.maven.org)，您可以搜索工件并查看它们的依赖关系。如果您正在使用带有 Maven 插件的 Eclipse，您还可以在 POM 编辑器中单击*Dependency Hierarchy 。*

查看[Maven 网站](http://search.maven.org/#artifactdetails%7Cjunit%7Cjunit%7C4.11%7Cjar)，您可以看到 JUnit 4.11 依赖于 Hamcrest 1.3：

```
<dependencies>
    <dependency>
      <groupId>org.hamcrest</groupId>
      <artifactId>hamcrest-core</artifactId>
      <version>1.3</version>
      <scope>compile</scope>
    </dependency>
</dependencies> 
```

Hamcrest 库你必须自己添加。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T18:21:59.347

JUnit 4.10 和 JUnit 4.11（如下图所示）：

```
 <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.11</version>
      <scope>test</scope>
    </dependency> 
```

... 分别随附 hamcrest-core 1.1 和 1.3。您可以通过利用依赖插件的树目标（运行*mvn dependency:tree*）亲自看到这一点：

```
$ mvn dependency:tree
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building testng 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ testng ---
[INFO] testng:testng:jar:1.0-SNAPSHOT
[INFO] \- junit:junit:jar:4.10:test
[INFO]    \- org.hamcrest:hamcrest-core:jar:1.1:test
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.483s
[INFO] Finished at: Fri Mar 29 12:07:22 MDT 2013
[INFO] Final Memory: 5M/81M
[INFO] ------------------------------------------------------------------------ 
```

这听起来很愚蠢，您需要包含适当的 hamcrest-library artefact 以利用 Hamcrest Matchers。希望这会有所帮助...

# c - ipcs 不显示我的共享内存和信号量

> ID：15660812
> 
> 赞同：4
> 
> 时间：2013-03-27T14:02:43.650
> 
> 标签：c, linux, shared-memory, ipcs

我使用适当的标志打开共享内存和信号量：

```
sem = sem_open("/some_name", O_CREAT | O_EXCL, S_IRWXU | S_IRWXG | S_IRWXO, 1);
shm = shm_open("/other_name", O_RDWR | O_CREAT | O_EXCL, S_IRWXU | S_IRWXG | S_IRWXO); 
```

调用不会失败（我检查它们），并且确实有一个进程由其他进程创建它们`fork`，`exec`而其他进程确实共享内存和信号量，并且有适当的同步。

但是，当我使用该`ipcs`命令时，我看不到共享内存和信号量。这是为什么？如果它们没有出现`ipcs`，我在哪里可以检查它们？

* * *

在我的`ipcs`输出中，信号量数组列表中没有任何条目，共享内存中的条目与 skype、firefox 和 plugin-container（firefox）相关。我检查了他们

```
grep shmid /proc/*/maps     # observe pid
readlink /proc/pid/exe 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:23:38.457

我刚刚发现的一个解决方案是共享内存和共享信号量列在下面：

```
/dev/shm 
```

那里的文件对于了解存在哪些共享对象以及可能对`unlink`它们有用，但它们不提供除此之外的任何有用信息（就像`ipcs`那样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-14T10:03:05.753

Ipcs 仅报告 System V 共享内存。您必须使用 Posix 共享内存。显然，这是两种完全不同的机制。Posix shm 显示在 /dev/shm 下。

我遇到了同样的问题，并且接受的答案不够令人满意，因为它没有解释为什么会发生这种情况。我在另一个类似的问题中找到了答案： [我看不到 boost::interprocess 通过 shell 命令 ipcs 创建的共享内存](https://stackoverflow.com/questions/56021045/i-cannot-see-the-shared-memory-created-by-the-boostinterprocess-via-shell-comm)

“据我所知，ipcs 只报告 System V 共享内存。POSIX 共享内存是一个单独的区域，必须单独查询。在 linux 系统上，检查 /dev/shm。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-13T20:56:10.127

就我而言，解决方案是使用**sudo**：

```
sudo ipcs -m 
```

# c++ - 向服务发送消息的方法？

> ID：15660814
> 
> 赞同：0
> 
> 时间：2013-03-27T14:02:44.937
> 
> 标签：c++, windows, service, udp, client-server

我有一个客户端服务器程序，我想将服务器更改为服务。[所以我从这里Svp.cpp](http://msdn.microsoft.com/en-us/library/windows/desktop/bb540475%28v=vs.85%29.aspx)拿了一些代码。它工作正常，但我使用 UDP 创建了客户端服务器，所以我想知道**是否有另一种方式将消息发送到服务**？客户端将消息发送到服务器（服务），服务器只是将它们回显。是否需要 UDP 或 TCP 连接来发送和接收消息？

这是从客户端接收消息的程序部分（其余代码取自Svp.cpp）

```
SOCKET socketS;

InitWinsock();
struct sockaddr_in local;
struct sockaddr_in from;
int fromlen = sizeof(from);
local.sin_family = AF_INET;
local.sin_port = htons(1234);
local.sin_addr.s_addr = INADDR_ANY;

socketS = socket(AF_INET,SOCK_DGRAM,0);
bind(socketS,(sockaddr*)&local,sizeof(local));
while (1)
{
    char buffer[1024];
    ZeroMemory(buffer, sizeof(buffer));
    if (recvfrom(socketS,buffer,sizeof(buffer),0,(sockaddr*)&from,&fromlen)!=SOCKET_ERROR)
    {
        sendto(socketS, buffer, sizeof(buffer), 0, (sockaddr*)&from, fromlen);
    }
}
closesocket(socketS); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:09:41.427

如果客户端和服务器应用程序在同一台机器上，您可以改用命名管道。

[命名管道](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365590%28v=vs.85%29.aspx)

我有一个系统服务，我必须删除 UI，我们没有创建一个套接字来在 UI 和服务之间进行通信，而是使用了命名管道。这很好，因为我们的一些客户担心机器上打开侦听 TCP 套接字的安全性。

如果你走这条路，你必须在两个应用程序之间建立某种信号，因为管道不会像套接字那样通知你读/写。但这是一个非常可行的解决方案。

# php - 通过 PHP API 在粉丝专页上传视频

> ID：15660817
> 
> 赞同：0
> 
> 时间：2013-03-27T14:02:52.097
> 
> 标签：php, facebook, facebook-opengraph

我的 FB 应用程序有一点问题。这是关于我总是得到错误：

> {"error":{"message":"(#353) 缺少视频文件","type":"OAuthException","code":353}}

使用此代码：

```
 $post_url      = "https://graph-video.facebook.com/xxx/videos?"
                    . "title=" . $video_title . "&description=" . $video_desc
                    . "&access_token=" . $access_token;
            $ch = curl_init();
            $data = array(
                'source' => 'http://x/upload/' . $name . '.' . $type,
                'file' => './upload/' . $name . '.' . $type,
                'type' => 'avi',
            );
            curl_setopt($ch, CURLOPT_URL, $post_url);
            curl_setopt($ch, CURLOPT_POST, 1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
            $response = curl_exec($ch);
            if (!$response)
            {
                print_r(Debug::vars(array(curl_error($ch), curl_errno($ch))));
            }
            curl_close($ch); 
```

文件存在，access_token 有效并记录为应用程序，在`$data`我尝试仅设置“文件”或“源”但效果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:48:28.047

为此，您最好使用 Facebook PHP SDK，但它可能就像删除文件参数并将“@”添加到源路径一样简单。这是一个使用 SDK 的工作示例（**假设您已请求适当的 FB 权限**）：

```
$this->facebook->setFileUploadSupport(true);

$upload = $this->facebook->api('/me/videos', 'POST', array(
    'source' => '@'.$file,
    'title' => $title,
    'description' => $description
)); 
```

# css - 在div中垂直居中图像，隐藏溢出

> ID：15660821
> 
> 赞同：0
> 
> 时间：2013-03-27T14:03:03.733
> 
> 标签：css, image, html, center

我认为这是一个经典的。我发现了很多类似的问题，但没有答案。

我想将任何未知高度的任何图像垂直居中到一个div中`overflow:hidden`

这就是我现在所拥有的：

```
.outer {
    padding-top:49px;
    height:49px;
    width:280px;
    overflow:hidden;
    background-color:yellow;
}
.outer .inner {
    float:left;
    position:relative;
    display:block;
    background-color:blue;
}
.outer .inner img {
    position:relative;
    top:-50%;
    width:280px;
    height:auto;
    border:0px; 
    display:block; 
} 
```

所以`.inner`被推到`.outer`by的中心`padding-top`，所以我得到一个 2 x 49px = 98px 高度的“窗口”。然后`img`我以为会从高度推出 50%，`.inner`但由于某种原因，我得到了不同的数字……</p>

有人知道我做错了什么吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:17:26.920

我遇到了类似的情况并用不同的方法解决了它。为此，我将图像用作 div 的背景图像。代码示例

```
<head>
    <style>
        div.imgbox1{
            width: 160px;
            height: 110px;
            overflow: hidden;
            background-position: 50% 50%; /* for vertical and horizontal center alignment*/
        }
    </style>
</head>

<body>
    <div class='imgbox1' style="background-image: url(http://photos-h.ak.fbcdn.net/hphotos-ak-snc6/399232_10151118743727680_899168759_a.jpg)" >
    </div>
</body> 
```

如果不是必须使用 img 标签，你可以试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:03:16.380

首先要做的事情......解释为什么你会得到你得到的结果。这很简单。设置`position: relative;`（或绝对值），然后设置`top: 50%;`将图像的最顶部对齐到 50%。如果将图像的高度设置为 1px，则可以看到 1px 居中。不幸的是，CSS 没有办法告诉它对齐图像的中心而不是顶部边缘。

现在......一个可能的解决方案......

假设这个`.inner`div 内没有其他内容，您是否考虑过允许图像通过边距确定内部 div 的高度？

以这个[JSFiddle 为例](http://jsfiddle.net/3NSP8/5/)。

您可以将图像“居中”在 .inner div 中，方法是将左右边距设置为自动，并将顶部和底部边距设置为某个 px 值……在我的示例中为 60px。

如果您想获得 600px 的总 div 高度，并且您的图像始终是 400px 高，那么 100px 的顶部和底部边距使总高度为 600px。(400+100+100=600)。

**HTML：**

```
<div class="outer">
    <div class="inner">
        <img src="http://farm9.staticflickr.com/8311/8023199579_f52f648727_m.jpg">
    </div>
</div> 
```

**CSS：**

```
.outer {
    height:520px;
    width:520px;
    overflow:hidden;
    background-color:yellow;
    border: 2px solid purple;
}
.outer .inner {
    width: 340px;
    display:block;
    background-color:blue;
    border: 1px solid red;
    padding: 10px;
    margin: 0 auto;
}
.outer .inner img {
    width:280px;
    height:auto;
    margin: 60px auto;
    border:0px; 
    display:block;
    border: 1px solid orange;
} 
```

* * *

第二种可能的解决方案...

假设`<img>`标签不必保留`<img>`标签，那么一个非常简单的方法是将图像本身移动到 CSS 中，作为`background-image`.

有关此解决方案的演示，请参阅此[JSFiddle](http://jsfiddle.net/3NSP8/4/)。

**HTML：**

```
<div class="inner">
</div> 
```

**CSS：**

```
.inner {
    width: 540px;
    height: 340px;
    display:block;
    background-color:blue;
    border: 1px solid red;
    margin: 0 auto;
    background: blue url('http://farm9.staticflickr.com/8311/8023199579_f52f648727_m.jpg') no-repeat 50% 50%;
} 
```

# java - 媒体：在 JAR 中播放 WAV 文件

> ID：15660824
> 
> 赞同：6
> 
> 时间：2013-03-27T14:03:16.613
> 
> 标签：java, javafx-2

`Media`-class只有一个构造函数：`public Media(java.lang.String source)`参见[http://docs.oracle.com/javafx/2/api/javafx/scene/media/Media.html#Media%28java.lang.String%29](http://docs.oracle.com/javafx/2/api/javafx/scene/media/Media.html#Media%28java.lang.String%29)

此构造函数获取 URI 作为字符串。我有一个 JavaFX 项目并将 WAV 文件放入该项目中。当我将项目部署为 JAR 时，我可以看到（例如，使用 7-Zip）WAV 文件也被导出。获取内容没有问题

```
MyApplicationClass.class.getResourceAsStream("/resources/test.wav"). 
```

但是，在已部署的 JAR 中为`Media`构造函数引用此 WAV 文件的正确 URI 是什么？URI

```
new Media("jar:.!/resources/test.wav") 
```

不工作。URI`"jar:resources/test.wav"`也会失败（因为没有对 JAR 文件的引用）。

有人知道正确的 URI 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T14:33:59.973

试试这个

```
new Media(MyApplicationClass.class.getResource("/resources/test.wav").toURI().toString()) 
```

媒体接受 jar uris 所以它应该可以正常工作

# r - 如何在 ggplot2 boxplot 中为每组添加多个观察值并使用组平均值？

> ID：15660829
> 
> 赞同：24
> 
> 时间：2013-03-27T14:03:31.130
> 
> 标签：r, ggplot2, boxplot

我正在做一个基本的箱线图，其中`y=age`和`x=Patient groups`

```
age <- ggplot(data, aes(factor(group2), age))  + ylim(15, 80) 
age + geom_boxplot(fill = "grey80", colour = "#3366FF") 
```

我希望你能帮助我做一些事情：

1）是否可以在每个组箱线图上方（但不在我的组标签所在的 X 轴上）包括每个组的多个观察值，而不必在绘画中这样做:)？我试过使用：

```
age + annotate("text", x = "CON", y = 60, label = "25") 
```

`CON`第 1 组在哪里，并且`y = 60`在该组的箱线图上方。但是，该命令不起作用。我认为它与它读`x`作连续变量而不是分类变量有关。

2）此外，虽然有很多关于使用箱线图的平均值而不是中位数的问题，但我仍然没有找到适合我的代码？

3）在同样的问题上，有没有一种方法可以将平均组统计数据包含在箱线图中？也许使用

```
age + stat_summary(fun.y=mean, colour="red", geom="point") 
```

然而，这仅包括平均值所在的一个点。或再次使用

```
age + annotate("text", x = "CON", y = 30, label = "30") 
```

哪里`CON`是第一组，`y = 30`是〜组年龄平均值。知道`ggplot2`语法是多么灵活和丰富，我希望有一种更优雅的方式来使用真实的统计输出而不是`annotate`.

任何建议/链接将不胜感激！

谢谢！！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-27T14:32:19.917

这和你追求的一样吗？与`stat_summary`，按要求：

```
# function for number of observations 
give.n <- function(x){
  return(c(y = median(x)*1.05, label = length(x))) 
  # experiment with the multiplier to find the perfect position
}

# function for mean labels
mean.n <- function(x){
  return(c(y = median(x)*0.97, label = round(mean(x),2))) 
  # experiment with the multiplier to find the perfect position
}

# plot
ggplot(mtcars, aes(factor(cyl), mpg, label=rownames(mtcars))) +
  geom_boxplot(fill = "grey80", colour = "#3366FF") +
  stat_summary(fun.data = give.n, geom = "text", fun.y = median) +
  stat_summary(fun.data = mean.n, geom = "text", fun.y = mean, colour = "red") 
```

黑色数字是观察次数，红色数字是平均值。joran 的回答向您展示了如何将数字放在框的顶部 ![在此处输入图像描述](../Images/d84d0e127b9f14806b302e1d9c460e21.png)

帽子提示：[https ://stackoverflow.com/a/3483657/1036500](https://stackoverflow.com/a/3483657/1036500)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-27T14:29:44.910

我想这也许就是你要找的东西？

```
myboxplot <- ddply(mtcars,
                    .(cyl),
                    summarise,
                    min = min(mpg),
                    q1 = quantile(mpg,0.25),
                    med = median(mpg),
                    q3 = quantile(mpg,0.75),
                    max= max(mpg),
                    lab = length(cyl))
ggplot(myboxplot, aes(x = factor(cyl))) + 
    geom_boxplot(aes(lower = q1, upper = q3, middle = med, ymin = min, ymax = max), stat = "identity") + 
    geom_text(aes(y = max,label = lab),vjust = 0) 
```

![在此处输入图像描述](../Images/eb71201bf2eaf709f15e5169da735fc4.png)

我刚刚意识到当您询问平均值时我错误地使用了中位数，但您显然可以使用任何`middle`您喜欢的美学功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T14:11:44.210

回答第一个问题。要在框上方显示值，您应该将`x`值提供为数字而不是级别名称。因此，要绘制高于第一个值的值，请给出`x=1`.

```
data(ToothGrowth)
ggplot(ToothGrowth,aes(supp,len))+geom_boxplot()+
   annotate("text",x=1,y=32,label=30) 
```

# node.js - 使用 Mongoose 在 MongoDB 中存储服务器端 javascript 函数

> ID：15660830
> 
> 赞同：3
> 
> 时间：2013-03-27T14:03:32.063
> 
> 标签：node.js, mongodb, mongoose

我一直在尝试将服务器端函数存储在 MongoDB 中（从客户端）

我正在尝试这个，来自示例：

```
db.system.js.save({_id: "sum",
              value: function (x, y) { return x + y; }}); 
```

但这不起作用。我正在使用 Mongoose，所以我不知道它是否有一个围绕普通 Mongo DB 对象的包装器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T20:03:08.560

使用[mongoose-function](https://github.com/aheckmann/mongoose-function)插件为 mongoose 添加功能支持。

然后创建一个模式并强制其集合名称：

```
new Schema({ value: Function }, { collection: 'system.js' }) 
```

# activerecord - Rails 3 - 如何按日期字段排序简单查询？

> ID：15660832
> 
> 赞同：0
> 
> 时间：2013-03-27T14:03:33.330
> 
> 标签：activerecord, ruby-on-rails-3.1

如何按日期字段进行简单的订单？

```
user.projects.order("quote_sheet_generated").each do |project| 
```

这行不通。它显示项目，但不按 quote_sheet_generated 字段排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:02:47.827

确实如此，请参阅有关此主题的指南：http: [//guides.rubyonrails.org/active_record_querying.html#ordering](http://guides.rubyonrails.org/active_record_querying.html#ordering)

# php - 在while循环中插入文本

> ID：15660836
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:03:36.330
> 
> 标签：php, mysql

我想发送一些包含一些宏的电子邮件，这些宏可以替换..

但问题是，当我想在文本中输入多个结果时：

您好 [name]，这些人给您写信：[personname][personimage]。

只要它只是一个结果就可以了..但是如何输入更多这样的结果：

你好 [name]，这些人给你写信：[personname][personimage],[personname][personimage] ...等。

这些结果我从一个while循环中得到，并尝试在它应该出现的地方插入一个宏，但没有运气..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:12:06.333

让您的 while 循环将数据存储到一个数组中，即：

```
$myArray = array();
while(.. your condition) {
    $myArray[] = $theName;
} 
```

生成一个字符串：

```
$myNameString = implode(',', $myArray); 
```

并在您的文本中替换它：

```
$myMessage = str_replace('[names]', $myNameString, $myMessage); 
```

**编辑：**如果您想要多个属性（在您的示例中：名称和图像），只需在将其放入数组时添加它。因此，不要使用 $myArray[] = $theName，而是将其更改为：

```
 $myArray[] = $theName . ' ' . $theImage; 
```

其余的保持不变。

# java - 在Java中将对象和对象分配给数组，它返回null

> ID：15660837
> 
> 赞同：1
> 
> 时间：2013-03-27T14:03:45.657
> 
> 标签：java

我创建了一个程序并将客户对象分配给客户数组，但是当我尝试获取数组中的对象时，它返回 null。我是Java新手，请帮我找出哪里出错了。

```
public class Customer {

    private String firstname,lastname;

    public Customer(String f,String l){
        this.firstname = f;
        this.lastname = l;
    }

    public String getFirstName(){
        return firstname;
    }

    public String getLastName(){
        return lastname;
    }   
}

public class Bank {

    private Customer [] customers;
    private int numberofCustomers;

    public Bank(){
        customers = new Customer [5];
        numberofCustomers = 0;

    }

    public void addCustomer(String f,String l){
        int i = numberofCustomers++;
        customers[i] = new Customer(f,l);
    }

    public int getNumberofCustomer(){
        return numberofCustomers;
    }

    public Customer getCustomerMethod(int index){
        return customers[index];
    }
}

public class TestAccount {

public static void main (String [] args){

        Bank b = new Bank();
        b.addCustomer("Test", "LastName");
        System.out.print(b.getNumberofCustomer());
        System.out.print(b.getCustomerMethod(1));

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:05:06.613

数组索引*从零开始*。您已在数组中索引 0 的第一个元素处添加了一个客户，您应该使用相同的索引来获取该元素。目前索引 1 处没有任何内容，因此您的代码返回`null`；

```
System.out.print(b.getCustomerMethod(0)); 
```

假设数组大小为 5，因此它的索引将是 0,1,2,3,4，其中 0 是第一个索引，4 是最后一个索引。

在此行之后，`b.addCustomer("Test", "LastName");`您的数组将是：

```
Array: [Customer("Test", "LastName") , null , null, null, null]
Index:                0             ,  1   ,  2  ,   3 ,  4 
```

当你尝试'System.out.print(b.getCustomerMethod(1));' 它返回空值。如您所见，您的数组在索引 1 处为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:05:03.607

您添加了一位客户，然后您要求第二位客户。数组索引是从零开始的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:12:48.857

您的代码存在三个问题：

*   索引从 0 开始
*   您正在使用*后增量运算符*将值分配给`i`. `int i = noOfCustomers++;`将导致值为`i`as `0`。所以你在索引 0 处添加客户并从索引 1 获取。所以你得到`null`
*   银行应该使用`ArrayList`

# c++ - 错误：在...中没有匹配到 'operator[]'

> ID：15660838
> 
> 赞同：7
> 
> 时间：2013-03-27T14:03:50.470
> 
> 标签：c++

这无法在 gcc 4.1.2 / RedHat 5 中编译：

```
#include <string>
#include <vector>
#include <map>

class Toto {
public:
    typedef std::string SegmentName;
};

class Titi {
public:
    typedef Toto::SegmentName SegmentName; // import this type in our name space
    typedef std::vector<SegmentName> SegmentNameList;
    SegmentNameList segmentNames_;
    typedef std::map<SegmentName, int> SegmentTypeContainer;
    SegmentTypeContainer segmentTypes_;

    int getNthSegmentType(unsigned int i) const {
        int result = -1;

       if(i < segmentNames_.size())
       {
           SegmentName name = segmentNames_[i];
           result = segmentTypes_[ name ];
       }
       return result;
    }
}; 
```

错误是：

```
error: no match for 'operator[]' in '(...)segmentTypes_[name]'
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_map.h:340:
note: candidates are: _Tp& std::map<_Key, _Tp, _Compare, _Alloc>::operator[](const _Key&)
[with _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Tp = int, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int> >] 
```

为什么 ？地图相当简单。我想这与 typedefs 有关，但有什么问题？

[编辑]即使我删除所有`typedefs`并`std::string`在任何地方使用，问题仍然存在......我是否滥用地图？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T14:07:02.857

`std::map::operator[]`是非常量的，你正试图从一个`const`方法中使用它。

您可以使用 来实现此目的`std::map::find`，它会返回`const_iterator`：

```
SegmentTypeContainer::const_iterator iter = segmentTypes_.find(name); 
```

如果您使用的是 C++11，您也可以使用`std::map::at`，如果在地图中找不到键，则会引发异常：

```
result = segmentTypes_.at(name); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-27T14:08:00.317

`std::map::operator[]`不是`const`方法，但您是从`const`类的方法中调用它。这样做的原因是，如果键不存在，它会添加一个元素。

您可以使用 C++11 `at()`：

```
result = segmentTypes_.at(name); // throws exception if key not present. 
```

或使用`std::map::find`.

```
SegmentTypeContainer::const_iterator it = segmentTypes_.find(name);
if (it != segmentTypes_.end())
{
  // OK, element with key name is present
  result = it->second;
} 
```

# c# - 如何增加具有不同基本 dB 级别的相同音量输出

> ID：15660839
> 
> 赞同：0
> 
> 时间：2013-03-27T14:03:55.220
> 
> 标签：c#, volume, decibel

假设我有一个 10 dB 的基数，然后我将此值增加到 16 dB，有 6 dB 的差异，所以我的音量发生了变化，但现在假设我想将相同的音量增加到不同的基本分贝的值，例如我现在有 50 分贝，我想添加与之前添加的相同数量的音量，当然这不是我最终会得到的 56 分贝，我知道这是一个对数方程。我的问题是是否有一个公式可以根据之前的音量变化量找出我必须随时增加多少音量？

笔记：1）我的音量控制从 0 到 1 2）我不只是增加音量而忘记其余的，因为我需要在播放时动态改变它的音量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:11:46.877

听起来您正在寻找“百分比变化”。

((y2 - y1) / y1) = 百分比变化

((16-10)/10) = 0.6

[http://www.percent-change.com/index.php?y1=10&y2=16](http://www.percent-change.com/index.php?y1=10&y2=16)

一开始：10dB

完成：16dB

Δ：6dB

百分比变化 = 0.6

B开始：50dB

B 完成：（（（A 完成 - A 开始）/ A 开始）* B 开始）+ B 开始

(((16-10)/10)*50)+50 = 80

在您的示例中，应将 50dB 增加到 80dB。

# silverlight - Silverlight5中的FrameworkElementFactory在哪里

> ID：15660843
> 
> 赞同：1
> 
> 时间：2013-03-27T14:04:02.490
> 
> 标签：silverlight

我已经在 Silverlight 中搜索了 FrameworkElementFactory，我们没有这个类，如果没有，我们还有其他选择，请帮助我。

```
 FrameworkElementFactory spFactory = new FrameworkElementFactory(typeof(Grid));
                spFactory.Name = "myComboFactory";
                spFactory.SetValue(Grid.WidthProperty, Convert.ToDouble(3));
                spFactory.SetValue(Grid.HeightProperty, Convert.ToDouble(3));
                spFactory.SetValue(Grid.RenderTransformProperty, new TranslateTransform(-6, -6));

                FrameworkElementFactory ec1 = new FrameworkElementFactory(typeof(Ellipse));
                ec1.SetValue(Ellipse.FillProperty, Brushes.Red);
                spFactory.AppendChild(ec1); 
```

上面的代码工作正常 WPF 应用程序，但现在我想在 Silverlight5 中做同样的事情我正在使用 VS 2010，Silverlight5 我想动态添加 DataTemplate

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:13:06.747

Silverlight 中不存在 FrameworkElementFactory。如果要在运行时生成 DataTemplate，则必须使用 XamlReader 类。

对于您的情况，您可能会执行以下操作：

```
ListBox listbox = new ListBox();
DataTemplate template = System.Windows.Markup.XamlReader.Load(
    @"<DataTemplate xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"">
        <Grid Width=""3"" Height=""3"">
            <Grid.RenderTransform>
                <TranslateTransform X=""6"" Y=""6"" />
            </Grid.RenderTransform>
            <Ellipse Fill=""Red"" />
        </Grid>
    </DataTemplate>") as DataTemplate;

listbox.ItemTemplate = template; 
```

请注意，您必须在根元素中定义默认命名空间 (xmlns=...)。

* * *

值得注意的是，您可以/必须使用此方法以编程方式设置 ItemsControl 的 ItemsPanel。

# c# - 添加对 Web 服务的引用

> ID：15660844
> 
> 赞同：2
> 
> 时间：2013-03-27T14:04:09.400
> 
> 标签：c#, visual-studio-2010, wcf, web-services

我正在从 wsdl 生成 Web 服务，并在其中包含一些带有属性的方法。

```
[System.ServiceModel.OperationContractAttribute(Action="http://link/update", ReplyAction="*")]
WebServices.updateResponse update(WebServices.updateRequest request); 
```

当我尝试在我的 VS2010 项目中添加对此服务的引用时，根本没有任何方法。

在我改变属性之后

```
[System.ServiceModel.OperationContract]
WebServices.updateResponse update(WebServices.updateRequest request); 
```

这些方法都是可用的。

第一种情况有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:28:59.490

System.ServiceModel.OperationContract - 是 System.ServiceModel.OperationContractAttribute 的简短版本。问题在于您的 ReplyAction="*" 会破坏您的元数据（意味着 WsdlExporter 将忽略该操作）。尝试将其设置为任何其他值。

来自 MSDN（[http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.replyaction.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.replyaction.aspx)）：

> 除了为回复消息的操作标头指定特定值外，您还可以指定字符串“*”（星号）。在服务中指定星号指示 WCF 不要向消息添加回复操作，这在您直接针对消息进行编程时很有用。在客户端应用程序中指定星号指示 WCF 不验证回复操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:25:09.447

根据[msdn](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/508e893d-f205-4ea5-b02f-3934b06ce9ca/)没有区别。C# 将 OperationContract 转换为 OperationContractAttribute

# sql - 对计算的 SUM 值执行 AVG

> ID：15660849
> 
> 赞同：-1
> 
> 时间：2013-03-27T14:04:26.657
> 
> 标签：sql, sql-server-2008, tsql, aggregate-functions

我想获得计算的 SUM 值的平均值，但我收到一条错误消息，指出我“无法对包含聚合或子查询的表达式执行聚合函数”。

示例代码：

```
SELECT 
T.ReferenceNo,
Parts = ROUND(SUM(
    CASE
        WHEN T.AccountCode in ('value1', 'value2') THEN
            T.Amount
    END),2)
Labor = ROUND(SUM(
    CASE
        WHEN T.AccountCode in ('value1', 'value2') THEN
            T.Amount
    END),2)
FROM Transactions T 
```

我想返回 Parts 和 Labor 的平均值，但是当我尝试将 AVG 函数包裹在它们周围时，我得到了前面描述的错误。

我应该如何正确返回所需的平均值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:19:05.643

如果您只想要平均值而不是总和，只需替换`SUM`为`AVG`：

```
SELECT 
T.ReferenceNo,
Parts = ROUND(AVG(
    CASE
        WHEN T.AccountCode in ('value1', 'value2') THEN
            T.Amount
    END),2)
Labor = ROUND(AVG(
    CASE
        WHEN T.AccountCode in ('value1', 'value2') THEN
            T.Amount
    END),2)
FROM Transactions T 
```

如果你想要两个值（两列）的平均值，那么你可以使用：

```
(VALUE1 + VALUE2) / 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:37:11.340

严格来说，要么为 NULL，`Parts`要么`Labor`为 NULL，这会混淆简单的平均计算。我会建议：

```
select t.ReferenceNo, t.Parts, t.Labor,
       (case when Parts is null then Labor
             when Labor is null then Parts
             else (Parts + Labor) / 2
        end) as AvgPartsLabor
from (SELECT T.ReferenceNo,
             Parts = ROUND(SUM(CASE WHEN T.AccountCode in ('value1', 'value2')
                                    THEN  T.Amount
                               END),2)
             Labor = ROUND(SUM(CASE WHEN T.AccountCode in ('value1', 'value2')
                                    THEN T.Amount
                               END),2)
      FROM Transactions T
      group by t.referenceNo
     ) t 
```

如果您想明确地将 NULL Parts 和 Labor 值视为 0，请使用：

```
select t.ReferenceNo, t.Parts, t.Labor,
       (coalesce(Parts, 0) + coalesce(Labor, 0)) / 2
. . . 
```

# javascript - 将二级 javascript 对象设置为变量

> ID：15660856
> 
> 赞同：1
> 
> 时间：2013-03-27T14:04:36.883
> 
> 标签：javascript, object, web-applications, multidimensional-array

尝试创建多级对象，但不确定为什么以下内容不起作用：

```
var a = {};
var b = 'Apples';
var c = 'Oranges';
a[b][c] = 'Test B';
alert(a[b][c]); 
```

我应该设置不同的方式`a[b][c]`吗？

[http://jsfiddle.net/zedsaid/acWNq/](http://jsfiddle.net/zedsaid/acWNq/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:06:19.580

在使用多级对象之前，您需要想象对象字面量的样子：

```
var a = {
    Apples : {
        Oranges : "Test B"
    }
} 
```

然后你会看到需要通过初始化新对象来“声明”一个新`{}`级别`a[b]`：

```
var a = {},
    b = "Apples",
    c = "Oranges";

a[b] = {};
a[b][c] = "Test B"; 
```

# shopify - Dwolla 自定义支付按钮：数据去哪儿了？

> ID：15660858
> 
> 赞同：0
> 
> 时间：2013-03-27T14:04:38.807
> 
> 标签：shopify, dwolla

我目前正在使用 Dwolla 按钮在 Shopify 商店中集成 Dwolla 付款方式。黑客的解释发布在 Shopify 论坛上：

[http://ecommerce.shopify.com/c/shopify-discussion/t/has-shopify-and-you-abandoned-dwolla-133714](http://ecommerce.shopify.com/c/shopify-discussion/t/has-shopify-and-you-abandoned-dwolla-133714)

（因为 Shopify 目前不支持可行的 Dwolla 网关选项，所以使用了 hack）

我终于在访客结账模式下进行了实时测试，并使用登录 Dwolla 的帐户进行了结账。

尽管包含以下按钮参数，但在我的 Dwolla 帐户中查看付款时（详细信息字段为空），我没有看到任何交易详细信息：

*   数据量
*   数据传送
*   数据税
*   数据名称（填充 Shopify 订单 #）
*   data-desc（使用 Checkout 中的 Shopify 客户名称填充）
*   data-orderid（使用 Shopify 订单号填充）
*   data-notes（填充来自 Shopify 结帐的客户结帐说明）
*   数据访客结帐（真）

我错误地假设`data-name`、`data-desc`和/或`data-orderid`会在我的 Dwolla 帐户的付款活动中的选项：交易详细信息下填充 Dwolla 交易信息中的信息。

我的问题是：`data-name`, `data-desc`,`data-orderid`信息会发生什么？它可以在 Dwolla 方面检索吗？是否有某种方法可以使用上述任何标识符填充交易详细信息？

澄清：当客户到达 Dwolla 安全支付页面时，标识符会正确填充字段。我担心的是，作为商家，当我在我的企业 Dwolla 帐户中查看交易时，没有任何信息可以通过订单号或匹配的客户名称（如果在 Dwolla 付款中输入的名称）将交易与 Shopify 订单相关联流程与在 Shopify 结账流程中输入的名称不同）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:23:45.097

Dwolla.com 的交易详情页面中唯一可见的字段是数据注释。因此，如果您希望能够关联交易，我建议将 Shopify 订单 ID 添加到数据注释中。data-orderId 字段可在[Transactions/ById()](http://developers.dwolla.com/dev/docs/transactions/byid) API 调用中查看。

正如您已经发现的，data-name 和 data-desc 仅在结帐时用于列出购买的产品。

# c# - Mono.TextEditor 高亮线

> ID：15660859
> 
> 赞同：1
> 
> 时间：2013-03-27T14:04:40.270
> 
> 标签：c#, mono, text-editor

我正在 MonoDevelop 中的 Mono 中制作帕斯卡代码编辑器。我`Mono.TextEditor`用作代码编辑器小部件。但是，我找不到如何突出显示小部件中的一行。编译后，我收集发生错误的行号，因此我想用红色突出显示它们。我发现

```
Mono.TextEditor.LineBackgroundMarker 
```

这似乎与我想做的事情有关，但我找不到在哪里以及如何使用它。

我正在研究的另一个选项是 ViBuilder，但我什至不知道如何使用它。我可以想到两种方法来解决这个问题：

1.  只需突出显示
2.  将一行标记为错误，因为默认样式包括：

    `{ "name": "Underline(Error)", "color":"invalid-red" }`

这似乎也是一个可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T21:08:29.247

您可以通过向基础文档添加标记来突出显示文本编辑器中的行。使用 TextDocument.AddMarker 方法，如下：

```
TextEditor textEditor;
var marker = new Mono.TextEditor.LineBackgroundMarker();     
int lineNumber = ...;
textEditor.Document.AddMarker(lineNumber, marker);
textEditor.QueueDraw(); 
```

还可以查看 Mono.TextEditor.StyleTextMarker 类。此类已经具有您正在寻找的属性“BackgroundColor”/“Color”。下划线可能必须手动完成（例如通过从 StyleTextMarker 继承并覆盖 Draw 方法）。

# jquery - Jquery Datatables - 即使不在当前页面上也获取所有行

> ID：15660862
> 
> 赞同：4
> 
> 时间：2013-03-27T14:04:44.113
> 
> 标签：jquery, jquery-datatables

我正在为 JQuery 使用 Datatables.net 插件。我正在尝试在页脚中创建一个“总计”行。我使用这个例子作为参考：[http ://datatables.net/release-datatables/examples/advanced_init/footer_callback.html](http://datatables.net/release-datatables/examples/advanced_init/footer_callback.html)

此示例中的数组是否`aiDisplay`提供了当前显示的所有 Rows 索引？还是所有满足当前过滤器的过滤器？

为了澄清这里的区别是满足过滤器但不在当前页面上的行。可能有 30 行满足筛选条件，但由于分页设置为 10，因此仅显示其中 10 行。

如果`aiDisplay`包含满足过滤器的所有行而不考虑分页，那就太好了！但是，如果它确实只包含当前页面上显示的行，有没有办法我可以获得满足过滤器的所有行的数组？

谢谢！

顺便说一句：这个数组似乎应该包含满足过滤器的所有索引，而不仅仅是页面上的索引。由于提供了`iStart`和`iEnd`值，因此可以派生页面上的行，并且仅提供页面上的值的数组不会提供额外的值，而不是提供满足过滤器的所有值。但是我找不到这方面的文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T14:39:19.383

我对该功能进行了检查，所以让我给你一个解释。 `nRow`其实并不重要。忽略它。包含表中的`aaData`所有数据，包括过滤器排除的数据。 `iStart`我`iEnd`想你知道。它们是要显示的行的索引。实际上包含所有（过滤的`aiDisplay`）数据，尽管其中一些可能由于分页而无法显示。您也可以使用此功能。它有自己的逻辑，你可以改变它来实现你想要的。

```
$('#example').dataTable({
    "fnFooterCallback": function ( nRow, aaData, iStart, iEnd, aiDisplay ) {
        /*
        * Calculate the total market share for all browsers in this table (ie inc. outside
        * the pagination)
        */
        var iTotalMarket = 0;
        for ( var i=0 ; i<aaData.length ; i++ ){
            iTotalMarket += aaData[i][4]*1;
        }

        /* Calculate the market share for browsers on this page */
        var iPageMarket = 0;
        for ( var i=iStart ; i<iEnd ; i++ ){
            iPageMarket += aaData[ aiDisplay[i] ][4]*1;
        }

        /* Modify the footer row to match what we want */
        var nCells = nRow.getElementsByTagName('th');
        nCells[1].innerHTML = parseInt(iPageMarket * 100)/100 +
                '% ('+ parseInt(iTotalMarket * 100)/100 +'% total)';
    }
}); 
```

# python - 添加围绕某些函数调用的代码行

> ID：15660865
> 
> 赞同：1
> 
> 时间：2013-03-27T14:04:53.557
> 
> 标签：python, pycparser

我不知道这是否可能，但我想在某个 .c 文件中的函数调用周围放置一些代码。假设我有一个 file1.c，我在其中执行以下操作：

```
#include "file2.h"
...
void fun(){
    <i want do add a line here>
    file2_fun();
    <..and here>
} 
```

是否可以添加这些行？你能给我一些使用 pycparser 或类似的用于 python 的 c 解析库的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:51:23.210

pycparser 没有为此提供特殊功能。您可以尝试通过 AST 并手动进行。

关于面向方面编程的想法？例如，使用方面 c++，您可以在不更改代码的情况下添加“方面”（或使用中间输出）。

[http://www.aspectc.org/](http://www.aspectc.org/)

# gwt - GWT 在事件触发后延迟操作

> ID：15660866
> 
> 赞同：0
> 
> 时间：2013-03-27T14:04:55.670
> 
> 标签：gwt

我想让用户点击一个按钮，然后他们会看到一个“Toast”消息弹出，它会消失，然后按钮点击执行的动作应该发生。做这个的最好方式是什么？我是否应该在捕获单击事件时触发 Timer 并让它超时（在显示 toast 时）然后调用处理代码，或者我可以使用事件处理中的任何内置延迟机制？我不希望我的 toast 参与事件处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:16:27.037

如果我真的按照你的要求，下面的代码应该做：

```
// interface of the "Toast" no matter what the implementation actually is
public interface Toast
{
    void open( String message );
    void closeFadingAway();
}

// calling code
public class ClientCode
{
    private static final int myDelay = 1000; // 1 second in millis
    private Toast myToast;

    void onMyAction()
    {
        myToast.open( "Your action is being handled..." );
        Scheduler.get().scheduleFixedDelay( new RepeatingCommand()
        {
            @Override
            public boolean execute()
            {
                myToast.closeFadingAway();
                performAction();
                return false; // return false to stop the "repeating" = executed only once
            }
        }, myDelay );
    }

    void performAction()
    {
        // do something interesting
    }
} 
```

现在，如果你真的想在用户按下 toast 中的某个按钮时中断操作，那就另当别论了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:18:13.537

如果您使用的是弹出式面板，您可以使用弹出式面板上的 addCloseHandler 并从此处调用本应由按钮调用的方法。

```
popUpPanel.addCloseHandler(new CloseHandler<PopupPanel>(){
@Override
public void onClose(CloseEvent<PopupPanel> event) {
    // TODO Do the closing stuff here

}
}); 
```

因此，当 PopupPanel 消失并触发关闭事件时，您可以在那里施展魔法。

# php - 使用 PHP 将 JSON 文本文件提取到表中

> ID：15660869
> 
> 赞同：1
> 
> 时间：2013-03-27T14:05:04.197
> 
> 标签：php, json, text

我有一个我想用 PHP 读取的 json 文件

[http://rh.ernestek.cz.cc/webeast/static.txt](http://rh.ernestek.cz.cc/webeast/static.txt)

我想提取“id”和“key”

我想循环遍历 id 和 key，以便生成这样的表：

```
身份证钥匙
1 9d07d681e0c1e294264724f7726e6f6f29
3 9cd1e3a4a04b5208862c3140046f73b515
...

```

我尝试使用以下代码提取第一个 id 并键入但没有运气：

```
 <?php
    $json = file_get_contents('static.txt');
    $json_decoded = json_decode($json);
    echo "ID: ".$json_decoded->static->1->id."<br />";
    echo "Key: ".$json_decoded->static->1->key."<br />";
    ?> 
```

我有什么不对吗？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:14:06.187

将 json 解码为数组（`true`作为第二个参数传递），然后像这样遍历数组

```
<?php
$json = file_get_contents('static.txt');
$json_decoded = json_decode($json, true);
foreach ($json_decoded['static'] as $item) {
     echo 'ID: ', $item['id'], '<br/>';
     echo 'Key: ', $item['key'], '<br/>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:17:34.877

通过使用`true`in`json_decode()`它将所有对象转换为数组：

```
$json = file_get_contents("http://rh.ernestek.cz.cc/webeast/static.txt");
$json_decoded = json_decode($json, true); // return array

$table = array();
foreach($json_decoded["static"] as $array){
    $table[$array["id"]] = $array["key"];
}

//creating the table for output
$output = '<table border="1"><tr><td>ID</td><td>Key</td></tr>';
foreach($table as $id => $key){
    $output .= "<tr><td>$id</td><td>$key</td></tr>";
}
$output .= '</table>';
echo $output; 
```

# extjs - ExtJS Grid 呈现的行数超过了 pagesize 中指定的行数

> ID：15660870
> 
> 赞同：3
> 
> 时间：2013-03-27T14:05:06.233
> 
> 标签：extjs, infinite-scroll, extjs4.2

我已经根据 Sencha 给出的示例实现了一个无限网格。基本上，代理使用 jsonp 获取 json 文件并填充网格。我希望网格大小为 10，并且我希望代理仅在用户向下滚动到第 10 条记录时才发出后续请求。每条记录在网格视图中垂直占用足够的空间，不滚动只能看到大约 5 条记录（在我的 14 英寸笔记本电脑上，分辨率为 1366 x 768）。我已将页面大小设置为 10，我的期望是只有当我向下滚动到可见记录之外时，网格才会刷新。但是，即使不滚动，网格也会通过发出 5 个单独的请求来加载所有数据（总共 50 条记录）。这是代码：

```
Ext.require([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.util.*',
    'Ext.grid.plugin.BufferedRenderer'
]);

Ext.onReady(function() {
    Ext.define('ContentModel', {
        extend : 'Ext.data.Model',
        fields : [ 'content_id', 'content' ],
        idProperty: 'content_id'
    });

    var store = Ext.create('Ext.data.Store', {
        id : 'store',
        model : 'ContentModel',
        buffered: true,
        pageSize: 10,
        proxy : {
            type : 'jsonp',
            url : 'http://website.com/Top1.json',
            reader: {
                root: 'contents',
                totalProperty: 'totalCount'
            }
        },
        autoLoad : true
    });

    var grid = Ext.create('Ext.grid.Panel', {
        renderTo : Ext.getBody(),
        width : '100%',
        height : '100%',
        title : 'Reader Panel',
        id : 'reader',
        store : store,
        columns : [ {
            id : 'content_id',
            text : 'Content ID',
            dataIndex : 'content_id',
            width : '10%'
        },
        {
            id : 'content',
            text : 'Content',
            dataIndex : 'content',
            width : '90%'
        } ]
    });

    Ext.define('JSONP Proxy', {
        override: 'Ext.data.proxy.JsonP',
        buildUrl: function(request) {
            var me = this, url = this.getUrl(request);
            console.log(url);
            request.url = 'http://website.com/Top' + request.params.page + '.json';
            return me.callParent([request]);
        }
    });

}); 
```

json文件的内容是：

Top1.json：

```
Ext.data.JsonP.callback1({"totalCount":"50", "contents":[{"content_id" : 1, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 2, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 3, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 4, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 5, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 6, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 7, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 8, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 9, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"},{"content_id" : 10, "content" : "<div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br><div> Hello World 1</div><br>"}]}); 
```

其他 json 文件遵循相同的格式，具有唯一的内容 ID，并具有正确的回调（callback2、callback3、callback4 和 callback5）。

有人能告诉我为什么所有 5 个 jsonp 请求都会立即被触发，而不是等待我滚动吗？

谢谢，普拉塔普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:20:44.703

感谢大家为我指出正确的方向。所以，这就是最终奏效的方法：

```
Ext.require([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.util.*',
    'Ext.grid.plugin.BufferedRenderer'
]);

Ext.onReady(function() {
    Ext.define('ContentModel', {
        extend : 'Ext.data.Model',
        fields : [ 'content_id', 'content' ],
        idProperty: 'content_id'
    });

    var store = Ext.create('Ext.data.Store', {
        id : 'store',
        model : 'ContentModel',
        buffered: true,
        pageSize: 10,
        trailingBufferZone: 5,
        leadingBufferZone: 5,
        purgePageCount: 0,
        scrollToLoadBuffer: 10,
        proxy : {
            type : 'jsonp',
            url : 'http://website.com/Top' + 0 + '.json',
            reader: {
                root: 'contents',
                totalProperty: 'totalCount'
            }
        },
        autoLoad : true
    });

    var grid = Ext.create('Ext.grid.Panel', {
        renderTo : Ext.getBody(),
        width : '100%',
        height : '100%',
        title : 'Reader Panel',
        id : 'reader',
        store : store,
        plugins : [{
            ptype: 'bufferedrenderer',
            trailingBufferZone: 5,
            leadingBufferZone: 5,
            scrollToLoadBuffer: 10,
            onViewResize: function(view, width, height, oldWidth, oldHeight) {
                // Only process first layout (the boxready event) or height resizes.
                if (!oldHeight || height !== oldHeight) {
                    var me = this,
                        newViewSize,
                        scrollRange;

                    // View has rows, delete the rowHeight property to trigger a recalculation when scrollRange is calculated
                    if (view.all.getCount()) {
                        // We need to calculate the table size based upon the new viewport size and current row height
                        delete me.rowHeight;
                    }
                    // If no rows, continue to use the same rowHeight, and the refresh handler will call this again.

                    // Calculates scroll range. Also calculates rowHeight if we do not have an own rowHeight property.
                    // That will be the case if the view contains some rows.
                    scrollRange = me.getScrollHeight();
                    //newViewSize = Math.ceil(height / me.rowHeight) + me.trailingBufferZone + me.leadingBufferZone;
                    newViewSize = 18;
                    me.viewSize = me.setViewSize(newViewSize);
                    me.stretchView(view, scrollRange);
                }
            }
        }],
        columns : [ {
            id : 'content_id',
            text : 'Content ID',
            dataIndex : 'content_id',
            width : '10%'
        },
        {
            id : 'content',
            text : 'Content',
            dataIndex : 'content',
            width : '90%'
        } ]
    });

    Ext.define('JSONP Proxy', {
        override: 'Ext.data.proxy.JsonP',
        buildUrl: function(request) {
            var me = this, url = this.getUrl(request);
            console.log(url);
            request.url = 'http://website.com/Top' + request.params.page + '.json';
            return me.callParent([request]);
        }
    });

}); 
```

诀窍是在 store 和 grid 的 bufferedrenderer 插件中正确设置缓冲区设置，并覆盖插件的 onViewResize 方法。bufferedrenderer 的 ViewSize 属性是根据 rowheight 计算的，由于某种原因，它始终是其默认值 21，因此导致 ViewSize 为 60，大于服务器中的记录总数 (50) . 这导致立即获取所有行。一旦我将 viewsize 属性覆盖为 18，viewsize 就会相应地发生变化，现在我第一次只获取了 30 条记录。按需加载在滚动时也能完美运行:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T08:07:51.170

您需要为[leadingBufferZone](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.Store-cfg-leadingBufferZone)和[trailingBufferZone](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.Store-cfg-trailingBufferZone)设置正确的值以获得正确的记录数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:52:34.423

您正在使用`buffered`配置。如果`buffered`启用，默认情况下，商店会再加载 5 个页面到预取缓存中。为了更改预选页面的数量，请使用[purgePageCount](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-purgePageCount)配置。

# javascript - 考虑到一个函数调用另一个函数，不同 JavaScript 函数中的变量名相同

> ID：15660876
> 
> 赞同：0
> 
> 时间：2013-03-27T14:05:19.307
> 
> 标签：javascript

我正在用**JavaScript**做一个小工作，我想避免出现问题，所以我事先询问。

考虑到其中一个函数调用另一个函数，我可以使用两个不同的变量并在不同的函数中将它们命名为相同吗？

那么，当我在第二个函数中定义变量时，它会解释为两个不同的变量，还是会重写第一个函数中原始变量的值？（或者，是否会因为同名的变量已经存在而引发错误？）

这是一个例子：

```
function first()
{
var a = somevalue;
second();
}

function second()
{
var a = differentvalue;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:16:38.907

在函数内声明的变量是该函数的本地变量，不会与其他任何地方的同名变量冲突。

你甚至可以拥有一个同名的全局变量，而函数内部的代码只会看到局部变量。

例子：

```
var a; // global variable

function first() {
  var a; // local variable in first
  second();
}

function second() {
  var a; // local variable in second
} 
```

（当然应该尽可能少地使用全局变量，但很高兴知道您可以拥有一个不受可能存在的任何全局变量影响的局部变量。）

函数内部的局部变量不仅是函数的局部变量，它实际上也是函数*执行*的局部变量。如果再次调用该函数，则会创建一个新变量，并且如果该函数调用自身（递归），则每个级别都会有自己的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:06:20.877

是的，你可以，只要你不忘记`var`关键字 ：变量的范围要么是声明它的函数，要么是全局范围。无法从函数外部访问它们声明的变量。

# php - 简单的 HTML DOM 获取 encore 不支持的 html 显示

> ID：15660877
> 
> 赞同：0
> 
> 时间：2013-03-27T14:05:19.717
> 
> 标签：php, simple-html-dom

我正在尝试使用简单的 HTML DOM。我`file_get_html`用来获取网站的内容。但是它显示消息：抱歉，Encore 当前不支持您的浏览器。

是那个网站的问题吗？怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:23:35.200

我不能说，还没有看到这种错误......也许它取决于网页的php版本，但我怀疑这些天有些服务器使用php < 5（嗯，这可能会发生......） . 也许您引用了错误的东西，调试它并查看它显示的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:09:57.047

CBroe 是对的，您需要为请求设置用户代理。此时我会考虑切换到 curl 进行下载并使用`str_get_html`结果。

# c++ - 如何在 C++ 中使用比较运算符比较日期和时间

> ID：15660881
> 
> 赞同：2
> 
> 时间：2013-03-27T14:05:29.240
> 
> 标签：c++, date, time

我读入了一个字符串，它被分隔为年、月、日、小时、分钟、秒、毫秒。我希望能够比较两个不同的日期/时间戳。前任。检查 lhs 上的小时是否大于 rhs 上的小时。然后继续检查月、日、小时、分钟、秒和毫秒。到目前为止，我已经知道我正在尝试做什么，只是很难把它放在一起。如果有人有任何想法，那就太棒了。附言。这不是家庭作业，我正在构建应用程序，同时学习 c++。

```
ClassName operator < (ClassName &lhs, ClassName &rhs); 
```

以上是功能。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:08:09.583

使其成为一个独立的功能：

```
friend bool operator < (const ClassName &lhs, const ClassName &rhs); 
```

注意变化：

*   独立的，因为这个函数平等地对待两个操作数，它也不修改。
*   `const`参数，因为一个理智的比较实现不应该修改它的操作数。
*   return `bool`，因为理想情况下比较应该返回 a `bool`，不是吗？
*   `friend`，因为一个设计良好的类通常会有这些数据成员`private`。

实现应该简单地根据您提到的算法对数据成员进行比较并返回`bool`结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:11:55.887

如果您使用的是 boost 库，请使用[日期/时间](http://www.boost.org/doc/libs/1_53_0/doc/html/date_time.html)库。

否则，您可以使用[ctime](http://www.cplusplus.com/reference/ctime/)并将时间转换为 UNIX 时间，然后比较只是两个数字的比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T14:10:19.240

在这种特殊情况下，您应该检查确定哪个对象“更大”的各个成员。比较时，`bool`返回类型应该更好，并使您的参数`const`不要在函数中更改它们：

```
bool operator < (const ClassName &lhs, const ClassName &rhs){
    if(lhs.hour > rhs.hour)
       return true;
    return false;
} 
```

请参阅[此处](http://en.wikibooks.org/wiki/C%2B%2B_Programming/Operators/Operator_Overloading)以获取一些输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T14:14:20.497

`operator <`应该返回一个`bool`值：

```
 bool operator < (const ClassName &l, const ClassName &r) 
 {
   return
     std::tie(l.year, l.month, l.day, l.hour, l.minute, l.second, l.millisecond)
     <
     std::tie(r.year, r.month, r.day, r.hour, r.minute, r.second, r.millisecond);
 } 
```

而且您可以使用[`std::tie`](http://en.cppreference.com/w/cpp/utility/tuple/tie)，它奇妙地减少了代码行数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T14:13:26.103

我会使用一堆 if 语句：

```
if(lhs.year > rhs.year)
else if(lhs.year < rhs.year)
else
{
    and check here for months etc.
} 
```

# css - 视网膜显示图像尺寸

> ID：15660882
> 
> 赞同：1
> 
> 时间：2013-03-27T14:05:29.630
> 
> 标签：css, retina-display

我分别为正常显示和视网膜显示创建了 2 个大小*为 40px X 40px*和*80px X 80px的图标。*

使用这两种尺寸的图标的正确方法是什么？

我的意思是我应该将视网膜版本的元素尺寸更改为 80px X 80px 还是使用 background-size 属性来适应 40px X 40px 大小的大图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:26:47.140

您应该遵循 Apple 的 Safari Web 内容指南。

[指定网页图标](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:36:08.210

这取决于您如何使用这些“图标”。它们是 Web 应用程序图标、网页中的图像还是背景图像？

首先应该用@x2.eg 命名视网膜图像

**标准**

> 样本.png

**视网膜**

> 样品@x2.png

对于 Web 应用程序图标，请参阅 cpattersonv1 的上一个答案

**背景图片**

这可以通过使用媒体查询来实现。针对支持 Retina 的设备的媒体查询看起来像这样。

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) {
} 
```

然后，您可以从媒体查询中为背景图像指定您的视网膜图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T09:45:27.930

我发现我需要在 CSS 中保持正常和 ratina 版本的尺寸相同，并使用`background-size`属性将大图像适合正常尺寸。

# visual-studio - 在 Visual Studio 2012 中加倍文件名

> ID：15660884
> 
> 赞同：1
> 
> 时间：2013-03-27T14:05:35.523
> 
> 标签：visual-studio, visual-studio-2012, tfs, solution-explorer

在解决方案资源管理器窗口中的 Visual Studio 2012 中，文件名翻了一番（抱歉没有截图 - 这是链接[http://floomby.ru/s1/uaxC8K](http://floomby.ru/s1/uaxC8K)）。同时在文件资源管理器和项目文件（[http://floomby.ru/s1/WaxCv8](http://floomby.ru/s1/WaxCv8)）中都可以。

这真的很烦人，找不到发生这种情况的原因。可以做些什么来防止这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:24:47.460

仍然无法描述如何预防，只是更准确地使用了 Visual Studio 2012 合并工具。但这是摆脱“解决方案”窗口中重复条目的解决方案。

1.  首先以某种方式记住所有重复文件的名称（PrtScr 或其他）

2.  **卸载项目**（调用项目名称的上下文菜单，项目“卸载项目”）

3.  **编辑“ProjectName.xxproj”**（调用项目名称的上下文菜单，项目“Edit Project.xxproj”）

4.  Ctrl+F，粘贴重复文件的名称，选择查找全部。在“查找结果”窗口中查找完全相同的项目文件条目并删除其中一个（[https://docs.google.com/file/d/0B0NKNNSBiGejeV8wZ3g0WEYzcTA/edit?usp=sharing](https://docs.google.com/file/d/0B0NKNNSBiGejeV8wZ3g0WEYzcTA/edit?usp=sharing)）。

5.  保存更改并重新加载项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T19:25:25.257

另一种方式是

1.  从项目中排除重复文件
2.  单击解决方案资源管理器顶部的“显示所有文件”按钮
3.  再次单击解决方案资源管理器顶部的“显示所有文件”按钮（这次您应该只看到一个排除的文件）
4.  再次包含文件

您也可以在文件夹上执行此操作

# python - 使用另一个索引数组正确索引多维 Numpy 数组

> ID：15660885
> 
> 赞同：4
> 
> 时间：2013-03-27T14:05:36.117
> 
> 标签：python, numpy

我正在尝试`P`用另一个数组索引一个多维数组`indices`。它指定了我想要的最后一个轴上的哪个元素，如下所示：

```
import numpy as np

M, N = 20, 10

P = np.random.rand(M,N,2,9)

# index into the last dimension of P
indices = np.random.randint(0,9,size=(M,N))

# I'm after an array of shape (20,10,2)
# but this has shape (20, 10, 2, 20, 10)
P[...,indices].shape 
```

如何正确索引`P`以`indices`获取形状数组`(20,10,2)`？

如果这不是太清楚：对于任何`i`和`j`（在界限内）我想`my_output[i,j,:]`等于`P[i,j,:,indices[i,j]]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:19:39.167

我认为这会起作用：

```
P[np.arange(M)[:, None, None], np.arange(N)[:, None], np.arange(2),
  indices[..., None]] 
```

不漂亮，我知道...

* * *

这可能看起来更好，但也可能不太清晰：

```
P[np.ogrid[0:M, 0:N, 0:2]+[indices[..., None]]] 
```

或者更好：

```
idx_tuple = tuple(np.ogrid[:M, :N, :2]) + (indices[..., None],)
P[idx_tuple] 
```

# linux - 在 chef-solo deploy bash 脚本中检测主机操作系统发行版

> ID：15660887
> 
> 赞同：9
> 
> 时间：2013-03-27T14:05:39.810
> 
> 标签：linux, bash, ubuntu, redhat, chef-solo

部署 chef-solo 设置时，您需要在使用 sudo 或不使用之间切换，例如：

```
 bash install.sh 
```

和

```
 sudo bash install.sh 
```

取决于主机服务器上的发行版。如何实现自动化？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-02T05:53:14.247

ohai 已经填充了这些属性，并且可以在您的食谱中轻松使用，例如，

```
"platform": "centos",
"platform_version": "6.4",
"platform_family": "rhel", 
```

您可以将这些引用为

```
 if node[:platform_family].include?("rhel")
    ...
 end 
```

要查看 ohai 设置的其他属性，只需键入

```
 ohai 
```

在命令行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:25:50.453

您可以检测远程主机上的发行版并进行相应的部署。在 deploy.sh 中：

```
DISTRO=`ssh -o 'StrictHostKeyChecking no' ${host} 'bash -s' < bootstrap.sh` 
```

DISTRO 变量由在主机上运行的 bootstrap.sh 脚本回显的任何内容填充。所以我们现在可以使用 bootstrap.sh 来检测发行版或我们需要的任何其他服务器设置并回显，这将冒泡到本地脚本，您可以做出相应的响应。

示例部署.sh：

```
#!/bin/bash

# Usage: ./deploy.sh [host]

host="${1}"

if [ -z "$host" ]; then
    echo "Please provide a host - eg: ./deploy root@my-server.com"
    exit 1
fi

echo "deploying to ${host}"

# The host key might change when we instantiate a new VM, so
# we remove (-R) the old host key from known_hosts
ssh-keygen -R "${host#*@}" 2> /dev/null

# rough test for what distro the server is on
DISTRO=`ssh -o 'StrictHostKeyChecking no' ${host} 'bash -s' < bootstrap.sh`

if [ "$DISTRO" == "FED" ]; then
    echo "Detected a Fedora, RHEL, CentOS distro on host"

    tar cjh . | ssh -o 'StrictHostKeyChecking no' "$host" '
    rm -rf /tmp/chef &&
    mkdir /tmp/chef &&
    cd /tmp/chef &&
    tar xj &&
    bash install.sh'

elif [ "$DISTRO" == "DEB" ]; then
    echo "Detected a Debian, Ubuntu distro on host"

    tar cj . | ssh -o 'StrictHostKeyChecking no' "$host" '
    sudo rm -rf ~/chef &&
    mkdir ~/chef &&
    cd ~/chef &&
    tar xj &&
    sudo bash install.sh'
fi 
```

例如 bootstrap.sh：

```
#!/bin/bash
# Fedora/RHEL/CentOS distro
 if [ -f /etc/redhat-release ]; then
    echo "FED"
# Debian/Ubuntu
elif [ -r /lib/lsb/init-functions ]; then
    echo "DEB"
fi 
```

这将允许您在部署过程的早期检测到平台。

# php - 这些 MYSQL/SQL 语句对 SQL 注入安全吗？

> ID：15660889
> 
> 赞同：-6
> 
> 时间：2013-03-27T14:05:47.140
> 
> 标签：php, mysql, sql, sql-server, sql-injection

```
////MYSQL Statement////
$sql = $mysql_conn->prepare("UPDATE table SET columnname = ? WHERE id = ?";
$sql->execute(array($new_value,$id));

////SQL Statment////
$client_select = array($select);
$tsql1 = "SELECT * FROM customertable where id = ?";
$result1 = sqlsrv_query($conn, $tsql1,$client_select);
$row1 = sqlsrv_fetch_array($result1, SQLSRV_FETCH_ASSOC); 
```

如果是这样，有人可以详细说明为什么 MYSQL 比以下更安全：

```
$sql = mysql_query("select * from customers where id='$id'");
$sql = mysql_fetch_assoc($sql); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:09:01.810

第二种选择

```
$sql = mysql_query("select * from customers where id='$id'"); 
```

不安全，因为`$id`可以是类似`' OR 1=1 OR id='`的东西，查询看起来像

```
"select * from customers where id='' OR 1=1 OR id='' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:10:30.527

第一组是安全的。第二组没有。例如，如果用户要在 $id 字段中提供数据，例如：'1; 从表 1 中删除'

那么你的 SQL 语句将变成：

“从 id=1 的客户中选择 *；从表 1 中删除”

如果您的 SQL 引擎可以执行多个语句，那么您将遇到麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:10:42.077

与您更安全的查询类似，这是我在一个类中使用的代码示例，但您应该明白：

```
$strSQL = "UPDATE user_table SET pname = ".$this->dbParam('a').", pname2 = ".$this->dbParam('b')."
            WHERE id = ".$this->pid;

$rs = parent::prepSQL($strSQL);
parent::doSQL($rs,array($a, $b)); 
```

这是课外的一个例子

```
$strSQL = "SELECT COUNT(*) FROM table_of_users WHERE login = ".$dbconn->Param('a')." AND guest_user = 0";
$rs = $dbconn->Prepare($strSQL);
$rs = $dbconn->Execute($rs,array($_POST["persnum_".$j])); 
```

它更安全，因为它可以阻止人们注入自己的答案；其他人回答。它也更容易阅读，因为您不必单引号。

# python - 在 python 中处理 telnetlib 超时错误

> ID：15660890
> 
> 赞同：1
> 
> 时间：2013-03-27T14:05:48.920
> 
> 标签：python, timeout, telnetlib

我正在尝试编写一个 python 脚本来建立与一系列主机的 telnet 连接（使用 telnetlib）：

```
for i in range(len(HOST)):
    print "scanning " + HOST[i] + " ...\n"
    tn = telnetlib.Telnet(HOST[i],23,3) 
```

问题是当其中一个连接超时时，脚本执行中断并返回以下错误：

```
Traceback (most recent call last):
  File "C:\Python27\telnet.py", line 24, in <module>
    tn = telnetlib.Telnet(HOST[i],23,3)
  File "C:\Python27\lib\telnetlib.py", line 209, in __init__
    self.open(host, port, timeout)
  File "C:\Python27\lib\telnetlib.py", line 225, in open
    self.sock = socket.create_connection((host, port), timeout)
  File "C:\Python27\lib\socket.py", line 571, in create_connection
    raise err
socket.timeout: timed out 
```

任何人都知道如何跳过此错误并继续脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:12:43.800

您需要使用`try...except`块来捕获异常并告诉解释器忽略它。例如：

```
import socket

for i in range(len(HOST)):
    print "scanning " + HOST[i] + " ...\n"
    try:
        tn = telnetlib.Telnet(HOST[i],23,3)
    except socket.timeout:
        pass 
```

在这种情况下，最好明确说明要捕获的异常 ( `socket.timeout`)。套接字可以抛出许多不同类型的异常，因此使用通用`except:`语句可能会掩盖打开、读取或写入套接字的问题。

# unit-testing - 对基于时区的逻辑进行单元测试

> ID：15660894
> 
> 赞同：4
> 
> 时间：2013-03-27T14:05:55.717
> 
> 标签：unit-testing, timezone

America/New_York 时区在冬季称为 EST，在夏季称为 EDT。现在我的 java 程序有一个页面显示当前时间，时区为 EDT。

为了测试冬季场景，有没有什么方法可以操纵电脑设置来模拟冬季场景？只是想看看冬天是否能正确显示 EST？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:12:43.727

依赖项通过将当前时间传递到您的显示中来注入当前时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:12:55.993

对于不建议操作系统日期时间的单元测试，有一些变通方法可以测试基于日期时间的逻辑部分。

看看这些线程：

*   [Java中基于时间的逻辑单元测试](https://stackoverflow.com/questions/9410046/unit-testing-time-based-logic-in-java)
*   [如何编写单元测试以确保我的基于日期/时间的代码适用于所有时区以及有/无 DST？](https://stackoverflow.com/questions/10846704/how-do-i-write-unit-tests-to-make-sure-my-date-time-based-code-works-for-all-tim)

# android - android 上 gstreamer 的简单替代方案

> ID：15660896
> 
> 赞同：0
> 
> 时间：2013-03-27T14:06:04.737
> 
> 标签：android, gstreamer

为了训练和娱乐，我想构建一个 android 应用程序，它能够将**音频从一台设备流式传输到另一台设备**。这将是一个简单的婴儿电话应用程序。
我尝试过使用 gstreamer，但在包括二进制文件和构建 eclipse 项目时遇到了一些麻烦。但是，现在我正在寻找替代方案。有没有人知道一个简单的？还是有一些我可以使用的 android api 东西？请注意：困难的事情不是接收流，而是提供一个......提前非常感谢！

# jquery - 以谷歌图片的风格显示表格内容

> ID：15660899
> 
> 赞同：1
> 
> 时间：2013-03-27T14:06:11.590
> 
> 标签：jquery, html-table, tooltip

我正在尝试在我的网站上使用自定义目录工具提示，我想让它的外观和操作方式与 Google 图片搜索相同，即您单击图片，然后有关图片的信息出现在下面的行中它，您单击其他内容，然后第一行消失，显示第二行。

我从来都不擅长 jQuery，但我设法得到它，以便它将我用 CSS 设置为隐藏的单元格内容拉入您单击的单元格下方的一行中，但我不知道当您单击某些内容时，一旦填充了该行，删除内容的去向。

我制作了一个[小提琴页面](http://jsfiddle.net/w3nHL/)，其中显示了我正在寻找的基本内容以及我在哪里，但我不确定从这里去哪里

HTML

```
<div class="container">
    <table class="catalogue">
        <tr>
            <td><a href="#">Click</a><div class="content">This is Cell 1 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 2 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 3 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 4 content</div></td>
        </tr>
        <tr>
            <td><a href="#">Click</a><div class="content">This is Cell 5 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 6 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 7 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 8 content</div></td>
        </tr>
        <tr>
            <td><a href="#">Click</a><div class="content">This is Cell 9 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 10 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 11 content</div></td>
            <td><a href="#">Click</a><div class="content">This is Cell 12 content</div></td>
        </tr>
    </table>
</div> 
```

CSS

```
.container {
    width:600px;
    margin:0 auto;
}

.catalogue {
    border-collapse:collapse;
    width:100%;
}

.catalogue td {
    height:80px;
    text-align:center;
    background:#e0e0e0;
}

.catalogue td a {
    display:inline-block;
    color:#fff;
    text-decoration:none;
    padding:5px 10px;
    background:#000;
}

.catalogue .tooltip td {
    width:100%;
    padding:1.5em;
    text-align:left;
}

.catalogue .content {
    display:none;
} 
```

jQuery

```
$('.container').delegate('a', 'click', function() {
    cell_content = $(this).parent().find('.content').text();
    button_row = $(this).closest('tr');
    button_row.after('<tr class="tooltip"><td colspan="4">' + cell_content + '</td></tr>');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:46:11.497

我最终将布局从表格更改为一系列对齐的 div，效果更好。我已经设法编写了 Javascript，以便它能够读取每行中有多少项目，然后将遍历这些项目，然后在其下方附加一个带有清除间隔的新 div。

这个更新的版本是从我正在使用的实时版本修改而来的，尽管我打算在未来对其进行更新，以便将工具提示信息作为 AJAX 查询拉入，因为它在当前方法中有点过时。如果有人想修改或改进此代码，请这样做:)

[更新的演示](http://jsfiddle.net/w3nHL/2/)

HTML

```
<div class="container">
    <div class="catalogue">
            <div class="catalogue-item"><a>Click</a><div class="content">This is Cell 1 content</div></div>
            <div class="catalogue-item"><a>Click</a><div class="content">This is Cell 2 content</div></div>
            <div class="catalogue-item"><a>Click</a><div class="content">This is Cell 3 content</div></div>
            <div class="catalogue-item"><a>Click</a><div class="content">This is Cell 4 content</div></div>
            <div class="catalogue-item"><a>Click</a><div class="content">This is Cell 5 content</div></div>
            <div class="catalogue-item"><a>Click</a><div class="content">This is Cell 6 content</div></div>
            <div class="catalogue-item"><a>Click</a><div class="content">This is Cell 7 content</div></div>
            <div class="catalogue-item"><a>Click</a><div class="content">This is Cell 8 content</div></div>
    </div>
</div> 
```

jQuery

```
$('.container').delegate('.catalogue-item a', 'click', function() {
    // Sets variables about the settings of the row and cell clicked
    catalogue_container = $('.container');
    catalogue_width = catalogue_container.width();
    cell = $(this).closest('div.catalogue-item');
    cell_width = cell.width();
    cell_content = cell.find('.content').html();
    cell_position = Math.floor(cell.position().left / cell_width);

    // Returns possible total cells available in container width
    row_cells = Math.floor(catalogue_width / cell_width);

    for (var i = cell_position; i < row_cells; i++) {
        cell = cell.next('.catalogue-item');
    }

    cell_prefix = '<div class="clearfix catalogue-tooltip">';
    cell_suffix = '</div>';

    // Checks to see if there are any tooltips already entered
    if (typeof old_content !== 'undefined') {
        // Checks to see if the tooltip is already out
        if ($('.catalogue-tooltip').length && cell_content != old_content) {
            old_tooltip = $('.catalogue-tooltip');
            $('.catalogue-tooltip').slideToggle(800, function() {
                old_tooltip.remove();
                cell.after(cell_prefix + cell_content + cell_suffix);
                old_content = cell_content;
                $('.catalogue-tooltip').slideToggle(800);
            });
        } 
    } else {
        cell.after(cell_prefix + cell_content + cell_suffix);
        old_content = cell_content;
        $('.catalogue-tooltip').slideToggle(800);
    }
}); 
```

# java - 在 Apache Wink 中声明可选命名路径参数的最佳方法是什么

> ID：15660916
> 
> 赞同：0
> 
> 时间：2013-03-27T14:06:57.103
> 
> 标签：java, rest, web, apache-wink

[使用Apache Wink](http://en.wikipedia.org/wiki/Apache_Wink)在 REST 路径中定义可选命名参数的最佳方法是什么？

现在我正在使用这样的东西：

```
/items{sep: (?)}{id: (.*)}") 
```

用于匹配请求，例如：

```
/items/123
/items/
/items 
```

这样我就可以拍干净了`{id}`。

另一种选择是：

```
/items{id: (/?/[^/]+?)} 
```

但随后`{id}`将包含该`/`字符，并且需要进行清理。

我在我的框架[(µ)Micro](https://github.com/florinpatrascu/micro)中使用 Wink，我打算坚持使用它，推荐其他/更好的（？）类似的框架目前不会回答这个问题。

谢谢！
-弗洛林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T12:27:06.360

这可能有点麻烦，不知道，也许这不是比你更好的解决方案（我不知道你的要求），但这就是我的做法。我的资源类有一个注释'@Path("/db")'，然后是每个受支持的目录级别的连续方法，即，因为 REST 基于 URL，这些 URL 必须将 '/' 字符视为目录分隔符。

```
@Path("{id}")
@GET
public Response getJson( @PathParam("id") String id )
{  
    String path = id;
    // TODO
} 
```

处理“db/items”，以及

```
@Path("{id1}/{id2}")
@GET
public Response getJson( 
        @PathParam("id1") String id,
        @PathParam("id2") String id2 )
{
    String path = id1 + '/' + id2;
    // TODO
} 
```

处理“db/items/123”，以及

```
@Path("{id1}/{id2}/{id3}")
@GET
public Response getJson( 
        @PathParam("id1") String id1, 
        @PathParam("id2") String id2, 
        @PathParam("id3") String id3 )
{ 
    String path = id1 + '/' + id2 + '/' + id3;
    // TODO
} 
```

处理“db/items/123/456”。

但是您可以看到这在较长的路径上很快变得很麻烦，而且我还没有弄清楚如何处理 n 深度路径（*有人吗？*）。希望这会有所帮助。

# hadoop - Pig 10.0 - 将元组分组并在 foreach 中合并包

> ID：15660920
> 
> 赞同：3
> 
> 时间：2013-03-27T14:07:13.263
> 
> 标签：hadoop, apache-pig

我正在使用`Pig 10.0`. 我想在 foreach 中合并包。假设我有以下`visitors`别名：

```
(a, b, {1, 2, 3, 4}),
(a, d, {1, 3, 6}),
(a, e, {7}),
(z, b, {1, 2, 3}) 
```

我想对第一个字段上的元组进行分组，并将包与一组语义合并以获得以下元组：

```
({1, 2, 3, 4, 6, 7}, a, 6) 
({1, 2, 3}, z, 3) 
```

第一个字段是具有集合语义的包的并集。元组的第二个字段是组字段。第三个字段是袋子里的物品数量。

我尝试了以下代码的几种变体（通过 Group/Distinct 等替换 SetUnion），但始终未能实现所需的行为：

```
DEFINE SetUnion        datafu.pig.bags.sets.SetUnion();

grouped = GROUP visitors by (FirstField);
merged = FOREACH grouped {
    VU = SetUnion(visitors.ThirdField);
    GENERATE 
        VU        as Vu,
        group     as FirstField,
        COUNT(VU) as Cnt;
    }
dump merged; 
```

你能解释我错在哪里以及如何实现所需的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:57:49.910

我终于设法实现了想要的行为。我的解决方案的一个自包含示例如下：

数据文件：

```
a       b       1
a       b       2
a       b       3
a       b       4
a       d       1
a       b       3
a       b       6
a       e       7
z       b       1
z       b       2
z       b       3 
```

代码：

```
-- Prepare data
in = LOAD 'data' USING PigStorage() 
        AS (One:chararray, Two:chararray, Id:long);

grp = GROUP in by (One, Two);
cnt = FOREACH grp {
        ids = DISTINCT in.Id;
        GENERATE
                ids        as Ids,
                group.One  as One,
                group.Two  as Two,
                COUNT(ids) as Count;
}       

-- Interesting code follows
grp2 = GROUP cnt by One;
cnt2 = FOREACH grp2 {
        ids = FOREACH cnt.Ids generate FLATTEN($0);
        GENERATE
                ids  as Ids,
                group      as One,
                COUNT(ids) as Count;
}               

describe cnt2;
dump grp2;
dump cnt2; 
```

描述：

```
Cnt: {Ids: {(Id: long)},One: chararray,Two: chararray,Count: long} 
```

grp2：

```
(a,{({(1),(2),(3),(4),(6)},a,b,5),({(1)},a,d,1),({(7)},a,e,1)})
(z,{({(1),(2),(3)},z,b,3)}) 
```

cnt2:

```
({(1),(2),(3),(4),(6),(1),(7)},a,7)
({(1),(2),(3)},z,3) 
```

由于代码使用嵌套在 FOREACH 中的 FOREACH，因此需要 Pig > 10.0。

因为可能存在更清洁的解决方案，所以我会让这个问题几天没有解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T07:28:59.360

为此找到了一个更简单的解决方案。

current_input = load '/idn/home/ksing143/tuple_related_data/tough_grouping.txt' 使用 PigStorage() AS (col1:chararray, col2:chararray, col3:int);

/**但我们不需要第 2 列。因此消除以避免混淆**/

相关输入 = foreach current_input 生成 col1，col3；

related_distinct = DISTINCT 相关输入；

related_grouped = 按 col1 分组相关的_distinct；

/**这将给出**/

(a,{(a,1),(a,2),(a,3),(a,4),(a,6),(a,7)})

(z,{(z,1),(z,2),(z,3)})

related_grouped_advance = foreach related_grouped generate (relevant_distinct.col3) as col3, group, COUNT(relevant_distinct.col3) as count_val;

/* 这将给出想要的结果 */

({(1),(2),(3),(4),(6),(7)},a,6)

({(1),(2),(3)},z,3)

# three.js - 在 Three.js 中沿其 LookAt 轴移动相机？

> ID：15660921
> 
> 赞同：3
> 
> 时间：2013-03-27T14:07:13.213
> 
> 标签：three.js

我是 Three.js 的新手，所以如果这很明显，那么请提前道歉。

我使用 LookAt 方法设置我的相机，并希望在按下键盘上的键时沿着该向量移动。

我尝试通过从我正在查看的点中减去相机矢量来模仿该特征 via `subVector`，对结果矢量进行归一化，然后按照以下方式进行操作：

```
camera.position.x += lookAtVector.x
camera.position.y += lookAtVector.y
camera.position.z += lookAtVector.z 
```

...但是当我这样做时，我似乎有点飘忽不定，并没有朝着观察点移动。如何在three.js 中沿着lookAt 向量移动？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T14:46:16.443

The camera is looking down it's *negative-Z axis*, so you want to do this:

```
camera.translateZ( - distance ); 
```

three.js r.57

# github - 为什么开户时readme保存为.md类型？

> ID：15660926
> 
> 赞同：1
> 
> 时间：2013-03-27T14:07:29.473
> 
> 标签：github

我期待.txt。

将其更改为 .txt 会有什么坏处吗？

我将其更改为 .txt。

看起来并没有什么坏处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:10:12.140

因为它应该是用[Markdown](http://en.wikipedia.org/wiki/Markdown)编写的（文件扩展名为 .md）

# django - Django：如何通过提供命名空间来获取模板的 url？

> ID：15660928
> 
> 赞同：0
> 
> 时间：2013-03-27T14:07:33.047
> 
> 标签：django, django-templates, render, reverse, django-context

在渲染模板时，我想通过提供命名空间值而不是路径来检索模板的 url。例如，而不是这个：

```
return render(request, 'base/index.html', {'user':name}) 
```

我希望能够做到以下几点：

```
from django.shortcuts import render
from django.core.urlresolvers import reverse

return render(request, reverse('base:index'), {'user':name}) 
```

但上面会产生错误。我该怎么做？有没有办法将命名空间赋予函数并获取实际路径？

扩展示例：

## - urls.py

```
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('',
    url(r'^', include('base.urls', namespace='base')),
) 
```

## - 应用程序库：urls.py

```
from django.conf.urls.defaults import patterns, url

urlpatterns = patterns('base.views',
   url(r'^/?$', 'index', name='index'),
) 
```

## - 应用程序库：views.py

```
from django.shortcuts import render
from django.core.urlresolvers import reverse

def homepage(request):
   '''
   Here instead of 'base_templates/index.html' i would like to pass
   something that can give me the same path but by giving the namespace
   '''
   return render(request, 'base_templates/index.html', {'username':'a_name'}) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:51:46.877

模板名称在视图中是硬编码的。您还可以做的是，您可以从 url 模式传递模板名称，有关更多详细信息，请参见[此处](https://docs.djangoproject.com/en/dev/topics/http/urls/#passing-extra-options-to-view-functions)：

```
from django.conf.urls.defaults import patterns, url

    urlpatterns = patterns('base.views',
       url(r'^/?$', 'index',
          {'template_name': 'base_templates/index.html'},
          name='index'),
       ) 
```

然后在视图中获取模板名称：

```
def index(request, **kwargs):
    template_name = kwargs['template_name'] 
```

# java - 从 baseActivity 类覆盖 onCreateOptionsMenu

> ID：15660934
> 
> 赞同：0
> 
> 时间：2013-03-27T14:07:54.580
> 
> 标签：java, android

我有一个名为的主类`BaseActivity`，它有一个方法

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

现在我像这样扩展这个类......

```
public class MainActivity extends BaseActivity {

      @Override
      public void onCreateOptionsMenu(Menu menu, MenuInflater menuInflater) {
        Log.d("Its called", "Kevin");
        menuInflater.inflate(R.menu.othermenu, menu);
      }       

} 
```

我将如何在这里覆盖此方法，如果它是 a`boolean`或`void`.

**更新：**

```
public class FragmentClass extends android.support.v4.app.Fragment {

      // How would i over-ride the onCreateOptionsMenu() here of BaseActivity.

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:10:41.363

任何覆盖方法都需要具有与其覆盖的方法相同的签名。不要忘记调用 super，如下所示：

```
public class MainActivity extends BaseActivity {

      @Override
      public boolean onCreateOptionsMenu( Menu menu ) {
        if( super.onCreateOptionsMenu( menu ) ) {
            Log.d("Its called", "Kevin");
            getSupportMenuInflater().inflate(R.menu.othermenu, menu);
            return true;
        } else {
            return false;
        }
      }       

} 
```

# php - Codeigniter 2：误解控制器中的 with_remap 方法

> ID：15660936
> 
> 赞同：1
> 
> 时间：2013-03-27T14:07:58.613
> 
> 标签：php, controller, codeigniter-2, before-filter, remap

```
public function _remap($method)
{
    if ($method == 'some_method')
    {
        $this->$method();
    }
    else
    {
        $this->default_method();
    }
} 
```

这是我从官方网站上看到的。据我了解 _remap 方法在所有操作之前被调用。但是这条指令`$this->$method();`意味着调用 $method 将再次调用 _remap 并且它类似于循环。不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:11:16.520

不，`_remap`是由框架调用的，在初始化的时候，但是当你直接调用某个方法时，你只执行函数内容……

希望它有帮助！

[在这里](http://ellislab.com/codeigniter/user-guide/general/controllers.html)找到一些解释：

```
Important:  If your controller contains a function named _remap(), it will always get called regardless of what your URI contains. It overrides the normal behavior in which the URI determines which function is called, allowing you to define your own function routing rules. 
```

# javascript - 在angularjs中的指令创建的postlink中找不到元素

> ID：15660940
> 
> 赞同：1
> 
> 时间：2013-03-27T14:08:09.363
> 
> 标签：javascript, angularjs, raphael, graphael, justgage

我正在尝试在 AngularJS 中为[JustGauge创建一个指令。](http://www.justgage.com)我的 html 视图是这样的：

```
 <div id="guageContainer" class="row" ng-controller="guageCtrl">
            <gauge ng-repeat="ind in indicators" model="ind"></gauge>
        </div> 
```

我的指令是：

```
angular.module("pgHome", [])
.directive("gauge", function ($compile) {
    return {
        restrict: "E",
        scope: { model: "=model" },
        compile: function (tElement, tAttrs, transclude) {
            tElement.append('<div id="{{model.Name}}"></div>');
            return {
                post: function (scope, iElement, iAttrs, controller) {
                    console.log(scope.model.Name);
                    console.log($("#" + scope.model.Name).length);
                    var g = new JustGage({
                        id: scope.model.Name,
                        value: 348,
                        min: 120,
                        max: 400,
                        title: "test",
                        label: ""
                    });
                }
            };
        }
    };
}); 
```

当我加载包含此指令的页面时，JustGauge 会引发一个错误，指出它找不到具有相应 id 的元素。只是提到第一个console.log运行良好，但第二个console.log返回0。另外我是angularjs的新手，我无法解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:17:19.500

将您的 JustGage() 调用包装在`$timeout`：

```
.directive("gauge", function ($compile, $timeout) {
   ...
   $timeout(function() {
     var g = new JustGage({...});
   }); 
```

这使浏览器有机会呈现您在编译函数中添加的附加 HTML。然后插件就可以找到新添加的`div`.

# c# - 具有 CancellationToken 的竞争条件，其中 CancellationTokenSource 仅在主线程上被取消

> ID：15660942
> 
> 赞同：4
> 
> 时间：2013-03-27T14:08:10.253
> 
> 标签：c#, task-parallel-library, cancellationtokensource

考虑一个 Winforms 应用程序，其中我们有一个生成一些结果的按钮。如果用户第二次按下按钮，它应该取消第一个生成结果的请求并开始一个新的请求。

我们正在使用以下模式，但我们不确定是否需要某些代码来防止竞争条件（请参阅注释掉的行）。

```
 private CancellationTokenSource m_cts;

    private void generateResultsButton_Click(object sender, EventArgs e)
    {
        // Cancel the current generation of results if necessary
        if (m_cts != null)
            m_cts.Cancel();
        m_cts = new CancellationTokenSource();
        CancellationToken ct = m_cts.Token;

        // **Edit** Clearing out the label
        m_label.Text = String.Empty;
        // **Edit**

        Task<int> task = Task.Run(() =>
        {
            // Code here to generate results.
            return 0;
        }, ct);

        task.ContinueWith(t =>
        {
            // Is this code necessary to prevent a race condition?
            // if (ct.IsCancellationRequested)
            //     return;

            int result = t.Result;
            m_label.Text = result.ToString();
        }, ct, TaskContinuationOptions.OnlyOnRanToCompletion, TaskScheduler.FromCurrentSynchronizationContext());
    } 
```

注意：

*   `CancellationTokenSource`我们只在主线程上取消。
*   我们`CancellationToken`在 continuation 中使用与在原始任务中相同的方法。

我们想知道以下事件序列是否可能：

1.  用户单击“生成结果”按钮。初始任务 t1 开始。
2.  用户再次单击“生成结果”按钮。Windows 消息已发布到队列，但尚未执行处理程序。
3.  任务 t1 完成。
4.  TPL~~开始~~ *准备开始*继续（因为`CancellationToken`尚未取消）。任务调度程序将工作发布到 Windows 消息队列（使其在主线程上运行）。
5.  第二次单击的 generateResultsButton_Click 开始执行并被`CancellationTokenSource`取消。
6.  延续工作开始，它就像令牌没有被取消一样运行（即它在 UI 中显示其结果）。

所以，我认为问题归结为：

当工作发布到主线程时（通过使用`TaskScheduler.FromCurrentSynchronizationContext()`），TPL`CancellationToken`在执行任务的操作之前检查主线程上的`SynchronizationContext`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T02:13:20.200

假设我正确阅读了这个问题，您会担心以下一系列事件：

1.  单击按钮，任务`T0`被安排在线程池中，continuation`C0`被安排为 的 continuation `T0`，在同步上下文的任务调度程序上运行
2.  再次单击该按钮。假设消息泵正忙于做其他事情，所以现在消息队列由一项组成，即点击处理程序。
3.  `T0`完成，这会导致`C0`被发布到消息队列。队列现在包含两个项目，点击处理程序和`C0`.
4.  点击处理程序消息被抽出，处理程序向驱动取消`T0`and的令牌发出信号`C0`。然后它以与 step 相同的方式`T1`在线程池上调度并`C1`作为延续`1`。
5.  'execute `C0`' 消息仍在队列中，因此它现在得到处理。它是否执行您打算取消的延续？

答案是不。[TryExecuteTask](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.tryexecutetask.aspx)不会执行已发出取消信号的任务。该文档暗示了这一点，但在[TaskStatus](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskstatus.aspx)页面上明确说明，该页面指定

> *Canceled* - 当令牌处于信号状态时，任务通过抛出带有自己的 CancellationToken 的 OperationCanceledException 来确认取消，**或者在任务开始执行之前任务的 CancellationToken 已经发出信号**。

所以在一天结束时`T0`将处于`RanToCompletion`状态并将`C0`处于`Canceled`状态。

这就是全部，当然，假设当前`SynchronizationContext`不允许任务同时运行（如您所知，Windows Forms 不允许 - 我只是注意到这不是同步上下文的要求）

此外，值得注意的是，关于是否在请求取消或执行任务的上下文中检查取消令牌的最后一个问题的确切答案，答案实际上是*两者*。除了最终签入之外`TryExecuteTask`，一旦请求取消，框架就会调用`TryDequeue`任务调度程序可以支持的可选操作。同步上下文调度程序不支持它。但如果它以某种方式发生，不同之处可能是“执行`C0`”消息将完全从线程的消息队列中取出，它甚至不会尝试执行任务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T15:55:35.230

The way I see it, regardless of which thread checks the CencellationToken, you have to consider the possibility that your continuation can get scheduled and the user can cancel the request while the continuation is being executed. So I think the check that was commented out should be checked and should probably be checked AGAIN after reading the result:

```
 task.ContinueWith(t =>
    {
        // Is this code necessary to prevent a race condition?
        if (ct.IsCancellationRequested)
            return;

        int result = t.Result;

        if (ct.IsCancellationRequested)
            return;

        m_label.Text = result.ToString();
    }, ct, TaskContinuationOptions.OnlyOnRanToCompletion, TaskScheduler.FromCurrentSynchronizationContext()); 
```

I would also add a continutation to handle the cancellation condition separately:

```
 task.ContinueWith(t =>
    {
        // Do whatever is appropriate here.

    }, ct, TaskContinuationOptions.OnlyOnCanceled, TaskScheduler.FromCurrentSynchronizationContext()); 
```

This way you have all possibilities covered.

# java - 为什么这段代码没有将数据输入 SQLite 数据库？

> ID：15660947
> 
> 赞同：-2
> 
> 时间：2013-03-27T14:08:18.413
> 
> 标签：java, android, sqlite

```
ContentValues values = new ContentValues();
values.put(KEY_NAME, firstNumber); // Contact Name
values.put(KEY_PH_NO, strfinal); // Contact Phone
// Inserting Row
dbs.insert(TABLE_CONTACTS, null, values); 
```

此代码无法将数据写入 SQLite 数据库。这段代码在 SQLite 数据库的 onCreate 函数中，所以我没有调用 getWritableDatabase() ，因为它给出了以下错误：“getDatabase called recursively.”。

出了什么问题？

编辑：这是LogCat：

```
 03-27 14:38:45.325: D/im invoked(2152): a!!
03-27 14:38:45.325: I/ActivityManager(323): START u0 {cmp=com.example.policeradioscanner/.ListViewA (has extras)} from pid 2152
03-27 14:38:45.336: W/WindowManager(323): Failure taking screenshot for (123x164) to layer 21020
03-27 14:38:45.356: I/Choreographer(2152): Skipped 51 frames!  The application may be doing too much work on its main thread.
03-27 14:38:45.546: I/Choreographer(323): Skipped 30 frames!  The application may be doing too much work on its main thread.
03-27 14:38:45.926: D/Listvewa main for a==3 invoked(2152): million
03-27 14:38:45.936: D/3(2152): value of a
03-27 14:38:45.936: D/in a==3(2152): twitch
03-27 14:38:45.966: D/above calculations(2152): hitler
03-27 14:38:46.675: D/fcked here8(2152): twitch1
03-27 14:38:47.755: I/Choreographer(323): Skipped 40 frames!  The application may be doing too much work on its main thread.
03-27 14:38:48.035: I/Choreographer(323): Skipped 41 frames!  The application may be doing too much work on its main thread.
03-27 14:38:49.295: I/Choreographer(323): Skipped 126 frames!  The application may be doing too much work on its main thread.
03-27 14:38:49.705: D/dalvikvm(2152): GC_CONCURRENT freed 301K, 12% free 3326K/3780K, paused 76ms+103ms, total 509ms
03-27 14:38:50.515: I/Choreographer(323): Skipped 126 frames!  The application may be doing too much work on its main thread.
03-27 14:38:50.985: I/Choreographer(323): Skipped 48 frames!  The application may be doing too much work on its main thread.
03-27 14:38:51.315: D/dalvikvm(2152): GC_CONCURRENT freed 501K, 17% free 3324K/3976K, paused 7ms+15ms, total 204ms
03-27 14:38:51.315: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 52ms
03-27 14:38:51.435: D/dalvikvm(323): GC_CONCURRENT freed 602K, 22% free 5765K/7328K, paused 36ms+73ms, total 471ms
03-27 14:38:51.596: D/dalvikvm(2152): GC_FOR_ALLOC freed 382K, 18% free 3284K/3976K, paused 74ms, total 75ms
03-27 14:38:52.005: D/dalvikvm(2152): GC_CONCURRENT freed 416K, 17% free 3301K/3976K, paused 77ms+15ms, total 280ms
03-27 14:38:52.005: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 127ms
03-27 14:38:52.265: D/dalvikvm(2152): GC_CONCURRENT freed 390K, 17% free 3304K/3976K, paused 8ms+14ms, total 124ms
03-27 14:38:52.265: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 102ms
03-27 14:38:52.885: D/dalvikvm(2152): GC_CONCURRENT freed 453K, 17% free 3300K/3976K, paused 12ms+11ms, total 247ms
03-27 14:38:52.885: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 40ms
03-27 14:38:53.636: D/dalvikvm(2152): GC_CONCURRENT freed 446K, 17% free 3309K/3976K, paused 8ms+31ms, total 173ms
03-27 14:38:53.636: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 125ms
03-27 14:38:53.826: D/dalvikvm(2152): GC_FOR_ALLOC freed 394K, 18% free 3281K/3976K, paused 93ms, total 95ms
03-27 14:38:54.366: D/dalvikvm(2152): GC_CONCURRENT freed 427K, 18% free 3292K/3976K, paused 78ms+31ms, total 296ms
03-27 14:38:54.366: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 73ms
03-27 14:38:55.026: D/ExchangeService(1159): Received deviceId from Email app: null
03-27 14:38:55.026: D/ExchangeService(1159): !!! deviceId unknown; stopping self and retrying
03-27 14:38:55.246: D/dalvikvm(2152): GC_CONCURRENT freed 404K, 16% free 3343K/3976K, paused 74ms+96ms, total 310ms
03-27 14:38:55.366: W/ActivityManager(323): Launch timeout has expired, giving up wake lock!
03-27 14:38:55.436: W/ActivityManager(323): Activity idle timeout for ActivityRecord{410490b8 u0 com.example.policeradioscanner/.ListViewA}
03-27 14:38:56.086: D/dalvikvm(2152): GC_CONCURRENT freed 433K, 17% free 3340K/3984K, paused 73ms+92ms, total 295ms
03-27 14:38:56.436: D/dalvikvm(2152): GC_FOR_ALLOC freed 421K, 18% free 3299K/3988K, paused 87ms, total 91ms
03-27 14:38:56.986: D/dalvikvm(2152): GC_CONCURRENT freed 444K, 17% free 3348K/3988K, paused 78ms+27ms, total 274ms
03-27 14:38:58.066: D/dalvikvm(2152): GC_CONCURRENT freed 468K, 17% free 3341K/4000K, paused 10ms+66ms, total 395ms
03-27 14:38:59.246: D/dalvikvm(2152): GC_CONCURRENT freed 451K, 17% free 3339K/4000K, paused 18ms+102ms, total 363ms
03-27 14:39:00.106: D/ExchangeService(1159): !!! EAS ExchangeService, onCreate
03-27 14:39:00.126: D/ExchangeService(1159): !!! EAS ExchangeService, onStartCommand, startingUp = false, running = false
03-27 14:39:00.146: W/ActivityManager(323): Unable to start service Intent { act=com.android.email.ACCOUNT_INTENT } U=0: not found
03-27 14:39:00.146: D/ExchangeService(1159): !!! Email application not found; stopping self
03-27 14:39:00.176: W/ActivityManager(323): Unable to start service Intent { act=com.android.email.ACCOUNT_INTENT } U=0: not found
03-27 14:39:00.196: D/ExchangeService(1159): !!! EAS ExchangeService, onStartCommand, startingUp = true, running = false
03-27 14:39:00.356: I/Choreographer(1404): Skipped 56 frames!  The application may be doing too much work on its main thread.
03-27 14:39:00.416: D/dalvikvm(2152): GC_CONCURRENT freed 445K, 17% free 3335K/4000K, paused 73ms+77ms, total 565ms
03-27 14:39:00.586: I/Choreographer(1404): Skipped 60 frames!  The application may be doing too much work on its main thread.
03-27 14:39:01.196: D/dalvikvm(2152): GC_CONCURRENT freed 467K, 17% free 3326K/4000K, paused 17ms+13ms, total 156ms
03-27 14:39:01.206: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 76ms
03-27 14:39:01.576: D/dalvikvm(2152): GC_CONCURRENT freed 450K, 18% free 3310K/4000K, paused 15ms+17ms, total 120ms
03-27 14:39:01.576: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 107ms
03-27 14:39:01.796: D/dalvikvm(2152): GC_CONCURRENT freed 387K, 18% free 3311K/4000K, paused 12ms+14ms, total 134ms
03-27 14:39:01.796: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 124ms
03-27 14:39:01.896: E/ActivityThread(1159): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cdbca8 that was originally bound here
03-27 14:39:01.896: E/ActivityThread(1159): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cdbca8 that was originally bound here
03-27 14:39:01.896: E/ActivityThread(1159):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-27 14:39:01.896: E/ActivityThread(1159):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-27 14:39:01.896: E/ActivityThread(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-27 14:39:01.896: E/ActivityThread(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-27 14:39:01.896: E/ActivityThread(1159):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-27 14:39:01.896: E/ActivityThread(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-27 14:39:01.896: E/ActivityThread(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-27 14:39:01.896: E/ActivityThread(1159):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-27 14:39:01.896: E/ActivityThread(1159):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-27 14:39:01.896: E/ActivityThread(1159):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-27 14:39:01.896: E/ActivityThread(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-27 14:39:01.896: E/ActivityThread(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-27 14:39:01.896: E/ActivityThread(1159):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-27 14:39:01.896: E/ActivityThread(1159):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-27 14:39:01.896: E/ActivityThread(1159):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-27 14:39:01.896: E/ActivityThread(1159):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-27 14:39:01.896: E/ActivityThread(1159):     at java.lang.Thread.run(Thread.java:856)
03-27 14:39:02.036: D/dalvikvm(2152): GC_FOR_ALLOC freed 371K, 18% free 3309K/4000K, paused 155ms, total 156ms
03-27 14:39:02.326: I/Choreographer(484): Skipped 1084 frames!  The application may be doing too much work on its main thread.
03-27 14:39:02.466: D/dalvikvm(2152): GC_CONCURRENT freed 369K, 17% free 3326K/4000K, paused 17ms+13ms, total 193ms
03-27 14:39:02.466: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 178ms
03-27 14:39:02.996: D/dalvikvm(2152): GC_CONCURRENT freed 453K, 18% free 3318K/4000K, paused 21ms+30ms, total 170ms
03-27 14:39:03.006: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 15ms
03-27 14:39:03.266: E/StrictMode(1159): null
03-27 14:39:03.266: E/StrictMode(1159): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cdbca8 that was originally bound here
03-27 14:39:03.266: E/StrictMode(1159):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-27 14:39:03.266: E/StrictMode(1159):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-27 14:39:03.266: E/StrictMode(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-27 14:39:03.266: E/StrictMode(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-27 14:39:03.266: E/StrictMode(1159):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-27 14:39:03.266: E/StrictMode(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-27 14:39:03.266: E/StrictMode(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-27 14:39:03.266: E/StrictMode(1159):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-27 14:39:03.266: E/StrictMode(1159):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-27 14:39:03.266: E/StrictMode(1159):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-27 14:39:03.266: E/StrictMode(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-27 14:39:03.266: E/StrictMode(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-27 14:39:03.266: E/StrictMode(1159):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-27 14:39:03.266: E/StrictMode(1159):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-27 14:39:03.266: E/StrictMode(1159):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-27 14:39:03.266: E/StrictMode(1159):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-27 14:39:03.266: E/StrictMode(1159):     at java.lang.Thread.run(Thread.java:856)
03-27 14:39:03.366: W/ActivityManager(323): Unbind failed: could not find connection for android.os.BinderProxy@41007aa0
03-27 14:39:03.466: E/ActivityThread(1159): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf19e0 that was originally bound here
03-27 14:39:03.466: E/ActivityThread(1159): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf19e0 that was originally bound here
03-27 14:39:03.466: E/ActivityThread(1159):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-27 14:39:03.466: E/ActivityThread(1159):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-27 14:39:03.466: E/ActivityThread(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-27 14:39:03.466: E/ActivityThread(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-27 14:39:03.466: E/ActivityThread(1159):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-27 14:39:03.466: E/ActivityThread(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-27 14:39:03.466: E/ActivityThread(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-27 14:39:03.466: E/ActivityThread(1159):     at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-27 14:39:03.466: E/ActivityThread(1159):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-27 14:39:03.466: E/ActivityThread(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-27 14:39:03.466: E/ActivityThread(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-27 14:39:03.466: E/ActivityThread(1159):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-27 14:39:03.466: E/ActivityThread(1159):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-27 14:39:03.466: E/ActivityThread(1159):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-27 14:39:03.466: E/ActivityThread(1159):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-27 14:39:03.466: E/ActivityThread(1159):     at java.lang.Thread.run(Thread.java:856)
03-27 14:39:03.646: E/StrictMode(1159): null
03-27 14:39:03.646: E/StrictMode(1159): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf19e0 that was originally bound here
03-27 14:39:03.646: E/StrictMode(1159):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-27 14:39:03.646: E/StrictMode(1159):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-27 14:39:03.646: E/StrictMode(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-27 14:39:03.646: E/StrictMode(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-27 14:39:03.646: E/StrictMode(1159):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-27 14:39:03.646: E/StrictMode(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-27 14:39:03.646: E/StrictMode(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-27 14:39:03.646: E/StrictMode(1159):     at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-27 14:39:03.646: E/StrictMode(1159):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-27 14:39:03.646: E/StrictMode(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-27 14:39:03.646: E/StrictMode(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-27 14:39:03.646: E/StrictMode(1159):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-27 14:39:03.646: E/StrictMode(1159):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-27 14:39:03.646: E/StrictMode(1159):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-27 14:39:03.646: E/StrictMode(1159):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-27 14:39:03.646: E/StrictMode(1159):     at java.lang.Thread.run(Thread.java:856)
03-27 14:39:03.686: D/dalvikvm(2152): GC_CONCURRENT freed 430K, 18% free 3313K/4000K, paused 15ms+51ms, total 258ms
03-27 14:39:04.006: W/ActivityManager(323): Unbind failed: could not find connection for android.os.BinderProxy@41018628
03-27 14:39:04.596: D/dalvikvm(2152): GC_CONCURRENT freed 431K, 17% free 3345K/4000K, paused 73ms+95ms, total 300ms
03-27 14:39:05.166: D/dalvikvm(2152): GC_CONCURRENT freed 483K, 17% free 3323K/4000K, paused 73ms+11ms, total 167ms
03-27 14:39:05.166: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 80ms
03-27 14:39:05.356: D/dalvikvm(2152): GC_FOR_ALLOC freed 382K, 18% free 3285K/4000K, paused 86ms, total 87ms
03-27 14:39:05.616: D/dalvikvm(2152): GC_CONCURRENT freed 412K, 18% free 3302K/4000K, paused 72ms+9ms, total 151ms
03-27 14:39:05.616: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 72ms
03-27 14:39:05.876: D/dalvikvm(2152): GC_CONCURRENT freed 388K, 17% free 3321K/4000K, paused 77ms+18ms, total 185ms
03-27 14:39:05.876: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 63ms
03-27 14:39:06.126: D/dalvikvm(2152): GC_CONCURRENT freed 401K, 18% free 3316K/4000K, paused 73ms+10ms, total 143ms
03-27 14:39:06.126: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 65ms
03-27 14:39:06.546: D/dalvikvm(2152): GC_CONCURRENT freed 474K, 18% free 3307K/4000K, paused 72ms+14ms, total 204ms
03-27 14:39:06.546: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 33ms
03-27 14:39:06.846: D/dalvikvm(2152): GC_CONCURRENT freed 397K, 18% free 3296K/4000K, paused 76ms+24ms, total 217ms
03-27 14:39:06.846: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 141ms
03-27 14:39:07.296: W/ProcessStats(323): Skipping unknown process pid 2534
03-27 14:39:07.336: W/ProcessStats(323): Skipping unknown process pid 2536
03-27 14:39:07.486: D/dalvikvm(2152): GC_CONCURRENT freed 434K, 18% free 3304K/4000K, paused 7ms+21ms, total 257ms
03-27 14:39:07.486: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 236ms
03-27 14:39:08.126: D/dalvikvm(2152): GC_CONCURRENT freed 452K, 18% free 3286K/4000K, paused 7ms+22ms, total 293ms
03-27 14:39:08.126: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 72ms
03-27 14:39:09.407: D/dalvikvm(2152): GC_CONCURRENT freed 396K, 17% free 3357K/4000K, paused 9ms+103ms, total 395ms
03-27 14:39:10.296: D/dalvikvm(2152): GC_CONCURRENT freed 492K, 18% free 3311K/4008K, paused 8ms+38ms, total 312ms
03-27 14:39:10.296: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 63ms
03-27 14:39:10.845: D/dalvikvm(2152): GC_CONCURRENT freed 433K, 18% free 3316K/4008K, paused 77ms+24ms, total 234ms
03-27 14:39:11.345: D/dalvikvm(2152): GC_CONCURRENT freed 480K, 18% free 3323K/4008K, paused 72ms+9ms, total 156ms
03-27 14:39:11.345: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 72ms
03-27 14:39:11.795: D/dalvikvm(2152): GC_CONCURRENT freed 471K, 18% free 3318K/4008K, paused 73ms+14ms, total 215ms
03-27 14:39:11.795: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 63ms
03-27 14:39:12.435: D/dalvikvm(2152): GC_CONCURRENT freed 477K, 18% free 3315K/4008K, paused 72ms+13ms, total 192ms
03-27 14:39:12.435: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 44ms
03-27 14:39:12.985: D/dalvikvm(2152): GC_CONCURRENT freed 441K, 18% free 3321K/4008K, paused 72ms+30ms, total 232ms
03-27 14:39:13.715: D/dalvikvm(2152): GC_CONCURRENT freed 432K, 17% free 3339K/4008K, paused 73ms+95ms, total 287ms
03-27 14:39:14.315: D/dalvikvm(2152): GC_CONCURRENT freed 472K, 18% free 3318K/4008K, paused 77ms+18ms, total 247ms
03-27 14:39:14.315: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 38ms
03-27 14:39:14.886: D/dalvikvm(2152): GC_CONCURRENT freed 447K, 18% free 3317K/4008K, paused 73ms+29ms, total 236ms
03-27 14:39:15.666: D/dalvikvm(2152): GC_CONCURRENT freed 472K, 17% free 3328K/4008K, paused 86ms+14ms, total 295ms
03-27 14:39:15.666: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 53ms
03-27 14:39:16.476: D/dalvikvm(2152): GC_CONCURRENT freed 444K, 17% free 3356K/4008K, paused 72ms+33ms, total 259ms
03-27 14:39:17.518: D/dalvikvm(2152): GC_CONCURRENT freed 473K, 17% free 3327K/4008K, paused 8ms+69ms, total 350ms
03-27 14:39:17.518: D/dalvikvm(2152): WAIT_FOR_CONCURRENT_GC blocked 183ms
03-27 14:39:19.266: D/dalvikvm(2152): GC_CONCURRENT freed 460K, 17% free 3338K/4008K, paused 8ms+88ms, total 556ms
03-27 14:39:19.626: I/SQLiteConnectionPool(2152): The connection pool for /data/data/com.example.policeradioscanner/databases/feedsmanager.sqlite has been closed but there are still 1 connections in use.  They will be closed as they are released back to the pool.
03-27 14:39:19.626: D/asdf is fcked,ctid is 96(2152): hitler
03-27 14:39:19.656: D/asdf is fcked(2152): hitler
03-27 14:39:19.656: D/asdf is(2152): twitchfinal
03-27 14:39:19.656: D/3(2152):  a!! before 
03-27 14:39:19.656: D/4(2152):  a!! after 
03-27 14:39:19.736: I/Choreographer(2152): Skipped 69 frames!  The application may be doing too much work on its main thread.
03-27 14:39:20.116: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
03-27 14:39:20.576: I/Choreographer(2152): Skipped 960 frames!  The application may be doing too much work on its main thread.
03-27 14:39:20.836: I/Choreographer(323): Skipped 90 frames!  The application may be doing too much work on its main thread.
03-27 14:39:20.916: I/Choreographer(323): Skipped 100 frames!  The application may be doing too much work on its main thread.
03-27 14:39:20.956: I/ActivityManager(323): Displayed com.example.policeradioscanner/.ListViewA: +35s541ms
03-27 14:39:20.966: I/Choreographer(2152): Skipped 233 frames!  The application may be doing too much work on its main thread.
03-27 14:39:21.276: I/Choreographer(2152): Skipped 58 frames!  The application may be doing too much work on its main thread.
03-27 14:39:21.336: I/Choreographer(2152): Skipped 31 frames!  The application may be doing too much work on its main thread.
03-27 14:39:21.436: I/Choreographer(2152): Skipped 44 frames!  The application may be doing too much work on its main thread.
03-27 14:39:38.186: I/Choreographer(323): Skipped 94 frames!  The application may be doing too much work on its main thread.
03-27 14:39:38.235: I/Choreographer(323): Skipped 35 frames!  The application may be doing too much work on its main thread.
03-27 14:39:38.295: I/Choreographer(323): Skipped 30 frames!  The application may be doing too much work on its main thread.
03-27 14:39:38.515: I/Choreographer(323): Skipped 31 frames!  The application may be doing too much work on its main thread.
03-27 14:39:45.749: D/ExchangeService(1159): Received deviceId from Email app: null
03-27 14:39:45.749: D/ExchangeService(1159): !!! deviceId unknown; stopping self and retrying
03-27 14:39:50.816: D/ExchangeService(1159): !!! EAS ExchangeService, onCreate
03-27 14:39:50.836: D/ExchangeService(1159): !!! EAS ExchangeService, onStartCommand, startingUp = false, running = false
03-27 14:39:50.846: D/ExchangeService(1159): !!! EAS ExchangeService, onStartCommand, startingUp = true, running = false
03-27 14:39:50.866: W/ActivityManager(323): Unable to start service Intent { act=com.android.email.ACCOUNT_INTENT } U=0: not found
03-27 14:39:50.866: D/ExchangeService(1159): !!! Email application not found; stopping self
03-27 14:39:50.886: W/ActivityManager(323): Unable to start service Intent { act=com.android.email.ACCOUNT_INTENT } U=0: not found
03-27 14:39:50.936: E/ActivityThread(1159): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d31658 that was originally bound here
03-27 14:39:50.936: E/ActivityThread(1159): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d31658 that was originally bound here
03-27 14:39:50.936: E/ActivityThread(1159):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-27 14:39:50.936: E/ActivityThread(1159):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-27 14:39:50.936: E/ActivityThread(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-27 14:39:50.936: E/ActivityThread(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-27 14:39:50.936: E/ActivityThread(1159):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-27 14:39:50.936: E/ActivityThread(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-27 14:39:50.936: E/ActivityThread(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-27 14:39:50.936: E/ActivityThread(1159):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-27 14:39:50.936: E/ActivityThread(1159):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-27 14:39:50.936: E/ActivityThread(1159):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-27 14:39:50.936: E/ActivityThread(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-27 14:39:50.936: E/ActivityThread(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-27 14:39:50.936: E/ActivityThread(1159):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-27 14:39:50.936: E/ActivityThread(1159):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-27 14:39:50.936: E/ActivityThread(1159):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-27 14:39:50.936: E/ActivityThread(1159):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-27 14:39:50.936: E/ActivityThread(1159):     at java.lang.Thread.run(Thread.java:856)
03-27 14:39:50.956: E/StrictMode(1159): null
03-27 14:39:50.956: E/StrictMode(1159): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d31658 that was originally bound here
03-27 14:39:50.956: E/StrictMode(1159):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-27 14:39:50.956: E/StrictMode(1159):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-27 14:39:50.956: E/StrictMode(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-27 14:39:50.956: E/StrictMode(1159):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-27 14:39:50.956: E/StrictMode(1159):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-27 14:39:50.956: E/StrictMode(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-27 14:39:50.956: E/StrictMode(1159):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-27 14:39:50.956: E/StrictMode(1159):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-27 14:39:50.956: E/StrictMode(1159):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-27 14:39:50.956: E/StrictMode(1159):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-27 14:39:50.956: E/StrictMode(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-27 14:39:50.956: E/StrictMode(1159):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-27 14:39:50.956: E/StrictMode(1159):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-27 14:39:50.956: E/StrictMode(1159):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-27 14:39:50.976: E/ActivityThread(1159): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce41a0 that was originally bound here
03-27 14:39:50.976: E/ActivityThread(1159): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce41a0 that was originally bound here
03-27 14:39:50.976: E/ActivityThread(1159):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-27 14:39:50.976: E/ActivityThread(1159):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:07:35.747

我不得不`db.close();`从代码中删除。无论出于何种原因，它都在阻止将任何内容写入数据库。删除它，数据完美输入。

# simulation - 获取列表模式的计数

> ID：15660949
> 
> 赞同：0
> 
> 时间：2013-03-27T14:08:21.697
> 
> 标签：simulation, netlogo

我正在尝试获取列表模式的值。我知道我可以通过使用模式运算符以某种方式获取列表的模式，例如“显示模式 [1 2 2 2 2 3 4]”，它将报告 2 作为模式，但我将如何获得该计数模式，在这种情况下为 4，因为它们是 4 个 2。我想我可以获取模式并遍历列表检查以查看每个数字是否等于模式，但我只是想知道是否有更简单的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:28:37.450

`length`和的组合`filter`应该可以得到你想要的：

```
let xs [1 2 2 3 3 4]
foreach modes xs [
  let mode ?
  let n length filter [ ? = mode ] xs
  print (word "mode: " mode ", occurrences: " n)
] 
```

将输出：

```
mode: 2, occurrences: 2
mode: 3, occurrences: 2 
```

（当然，根据定义，每种模式的出现次数都相同。）

# javascript - 保存（更新）现有模型时未触发验证

> ID：15660950
> 
> 赞同：0
> 
> 时间：2013-03-27T14:08:23.623
> 
> 标签：javascript, web-applications, backbone.js

我希望能帮助我理解为什么在backbone.js 1.0.0 版中保存（即更新）现有模型时不会触发验证方法。以下是简化的伪代码；“新”（模型）位置已验证，但“现有”（模型）位置在保存时未验证。

```
if (id) {

 // options contains places collection

 place = this.options.places.get(id);

 place.on('invalid', function(m,e) {...});

 place.save({...}, {wait: true, error: ..., success: ...})

} else {

 place = new App.Place()

 place.on('invalid', function(m,e) {...});

 place.save({...}, {wait: true, error: ..., success: ...})

} 
```

谢谢。

-阿里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:52:18.313

尝试通过传递强制验证`{ validate: true }`：

```
place.save({...}, {wait: true, error: ..., success: ..., validate: true }); 
```

# c++ - 抽象基类的构造函数和析构函数是否受保护？

> ID：15660953
> 
> 赞同：0
> 
> 时间：2013-03-27T14:08:26.300
> 
> 标签：c++, constructor, abstract-class

我在某处读到抽象基类的构造函数应该受到保护？为什么这是一种推荐的做法，如果不加以保护，怎么会被滥用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:19:00.897

如果您认为这是推荐的做法，您应该询问实际推荐此做法的人。C++中的抽象类是一个至少有一个纯虚函数的类。编译器无论如何都不会让您创建此类的实例，并且使用受保护的构造函数来帮助它没有多大意义。这是基于您提供的信息，作者可能有原因但您可能误解了这个概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:24:55.483

我相信该建议的重点是假设分析、核心可读性和维护性。

在 C++ 中，如果您的类中有任何纯虚方法，那么它被认为是*抽象*的并且自动不可实例化。为此不需要受保护的ctors/dtors。有一些功夫方法可以创建像抽象类对象这样的东西，但如果你知道如何做到这一点，那就是你的范式问题:)

然而，术语“抽象”也可以被认为只是对类目的的一般描述。*要求*每个这样的“抽象”类只需要一个纯虚方法是很奇怪的。如果它对该类没有任何意义怎么办？您必须引入一个完全不相关的 pv 方法才能将类标记为“抽象”。通过将 ctor 标记为受保护，您可以确保您的类没有纯虚拟也不能自由创建。

对维护的影响也很小：假设您有一个绝对抽象的类，其中包含一些虚拟方法和一个纯虚拟方法。您将 ctors/dtors 公开。然后，在半年之后，您修补/升级/修改该类，并将纯虚拟更改为非“纯”，并具有一些默认实现。哎呀。现在您的课程可以创建了。[为了人为的例子，我故意忽略了纯虚拟**可以**实现的事实]。

当然，完全另一个问题是 - 这种没有虚拟方法的抽象基础有什么用？除了构建基于标志的半多态性之外，我找不到使用示例：

```
struct Base { protected: base(){} public: int type; }
struct Derived1:Base { derived1(){type=1;} int shoesize; string codename; }
struct Derived2:Base { derived2(){type=2;} string name, family; } 
```

您可以通过基指针传递derived1/2 并通过'type'标志检测它们的类型，然后手动转换它们......没有RTTI，没有vtable，非常轻的对象。有时你需要它。

因此，使它们受到保护有一些好处，但这种好处是……嗯，很小。

# r - 拟合微分方程：如何将一组数据拟合到 R 中的微分方程

> ID：15660954
> 
> 赞同：0
> 
> 时间：2013-03-27T14:08:27.647
> 
> 标签：r, differential-equations

使用数据集：

```
conc <- data.frame(time = c(0.16, 0.5, 1.0, 1.5, 2.0, 2.5, 3), concentration = c(170, 122, 74, 45, 28, 17, 10)) 
```

我想将这些数据拟合到下面的微分方程中：

```
dC/dt= -kC 
```

其中 C 是数据集中的浓度和时间 t。这也将给出 k 的结果。谁能给我一个线索如何在 R 中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:42:54.650

首先使用变量分离来求解微分方程。这给出了 log(C)=-k*t+C0。

绘制数据：

```
plot(log(concentration) ~ time,data=conc) 
```

拟合线性模型：

```
fit <- lm(log(concentration) ~ time,data=conc)
summary(fit)

# Coefficients:
#               Estimate Std. Error t value Pr(>|t|)    
# (Intercept)   5.299355   0.009787   541.4 4.08e-13 ***
#   time       -0.992208   0.005426  -182.9 9.28e-11 ***
#   ---
#   Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
# 
# Residual standard error: 0.01388 on 5 degrees of freedom
# Multiple R-squared: 0.9999,  Adjusted R-squared: 0.9998 
# F-statistic: 3.344e+04 on 1 and 5 DF,  p-value: 9.281e-11 
```

绘制预测值：

```
lines(predict(fit)~conc$time) 
```

提取 k：

```
k <- -coef(fit)[2]
#0.9922081 
```

![在此处输入图像描述](../Images/e14c6678ea4fdaf817db31556547954e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:39:04.417

这可能是一个解决方案：

```
 require('deSolve')
conc <- data.frame(time <- c(0.16, 0.5, 1.0, 1.5, 2.0, 2.5, 3), concentration <- c(170, 122, 74, 45, 28, 17, 10))

##"Model" with differential equation
model <- function(t, C, k){
  list(-k * C)
}

##Cost function with sum of squared residuals:
cost <- function(k){
  c.start <- 170
  out <- lsoda(c(C=c.start), conc$time, model, k)
  c <- sum( (conc$concentration - out[,"C"])^2)       
  c
}

##Initial value for k
k <- 3
##  Use some optimization procedure
opt <- optim(k, cost, method="Brent", lower=0, upper=10)

k.fitted <- opt$par 
```

**也许这有点天真，因为使用 lsoda 对于仅使用一个**微分方程进行计算似乎有点矫枉过正......但它肯定会优化你的 k。您可能想检查集成的 C 的起始值，我在这里将其设置为 170，您没有 t=0 的值吗？

# css - 一个CSS中的多个超链接样式

> ID：15660955
> 
> 赞同：2
> 
> 时间：2013-03-27T14:08:28.467
> 
> 标签：css

我正在尝试实现每个 div 具有不同的超链接样式。我有一个整体的超链接样式，然后是一个 div，我希望该 div 中的所有超链接具有完全不同的样式。我只是不确定如何编写css。任何帮助都是极好的。

```
a {color:#d85d5d; font-weight:bold; text-decoration:none;}
a:hover {color:#222; text-decoration:underline;}

.SingleLink
{
    #a
    #a:{
        text-decoration: underline;
    }

    #a:link {
        color: #0000FF;
    }

    #a:visited {
        color: #660099;
    }

    #a:active {
        color #FF0000;
    }

    #a:hover {
        font-weight: bold;
    }

} 
```

所以基本上我页面中的所有内容都有第一个 a 然后 .SingleLink div 中的任何内容都有不同的超链接样式。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:10:13.857

您需要为每个规则指定 .SingleLink 选择器，如下所示：

```
.SingleLink a:link { color: #0000FF; }

.SingleLink a:visited { color: #660099; }

.SingleLink a:active { color #FF0000; }

.SingleLink a:hover { font-weight: bold; } 
```

使用 {} 在选择器下对规则进行分组仅对一些 CSS 预处理器（如[LESS](http://lesscss.org/)）有效，但作为“纯”CSS 无效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:10:00.753

您需要为每个类使用类名，不能像在示例中使用纯 CSS 那样包装它们。

使用下面的代码应该可以解决这个问题：

```
.SingleLink a {  text-decoration: underline; }

.SingleLink a:link { color: #0000FF; }

.SingleLink a:visited { color: #660099; }

.SingleLink a:active { color #FF0000; }

.SingleLink a:hover { font-weight: bold; } 
```

# jsf - 将 JSF dataTable 中组件的 id 设置为数组中当前项的值

> ID：15660969
> 
> 赞同：14
> 
> 时间：2013-03-27T14:09:20.807
> 
> 标签：jsf, jsf-2, datatable

我有一个数据表，我想将每一行的 id 设置为构建表的数组中当前项目（具有 id 字段的对象）的 id。

例子：

```
<h:dataTable
   value="#{bean.list}"
   var="item">
      <h:column>
         <h:outputText id="#{item.id}" .... />
      </h:column>
</h:dataTable> 
```

这不起作用，因为我得到：`javax.servlet.ServletException: Empty id attribute is not allowed`。

由于JSF如何构建其ID，是否无法以这种方式设置ID，还是我做错了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-27T14:18:17.307

从 JSF UI 组件中，`id`和`binding`属性在视图构建时进行评估，此时 XHTML/JSP 文件中的 XML 树结构将被解析并转换为可用的 JSF 组件树`FacesContext#getViewRoot()`。但是，`<h:dataTable>`在视图渲染期间进行迭代，此时 JSF 组件树需要通过`UIViewRoot#encodeAll()`. `id`因此，在评估属性的那一刻`#{item}`， EL 范围内无处可用，并且评估`null`最终打印一个空字符串。

基本上有3种解决方案：

1.  使用像 JSTL`<c:forEach>`这样的视图构建时间标记，以便`#{item}`在视图构建时也可用。

    ```
    <table>
        <c:forEach items="#{bean.list}" var="item">
            <tr><td><h:outputText id="#{item.id}" ... /> 
    ```

    另请参阅[JSF2 Facelets 中的 JSTL... 有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

2.  不要将其打印为 JSF 组件的 ID，而是作为纯 HTML 元素的 ID。

    ```
    <span id="#{item.id}"> 
    ```

    请注意，根据[HTML 规范第 6.2 章](http://www.w3.org/TR/html4/types.html#h-6.2)，以数字开头的 ID 在 HTML 中是[无效](http://validator.w3.org)的。您可能想用一些字符串作为前缀，如下所示：

    ```
    <span id="item_#{item.id}"> 
    ```

3.  不要使用动态 ID。只需使用固定 ID。无论如何，JSF 都会根据行索引自动生成一个唯一 ID。

    ```
    <h:outputText id="foo" ... /> 
    ```

    如果`<span id="formId:tableId:0:foo">`它在`<h:form id="formId"><h:dataTable id="tableId">`. 是基于 0的`0`行索引，每行递增。因此，这保证了每一行中的唯一 ID，而无需自己担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:14:35.447

您不能`id`以这种方式在属性中使用 EL。`id`属性应该在视图构建期间可用，但您的 EL 在视图渲染期间进行评估。这为时已晚，所以在`id`检查时它是空的。

# php - 从 PHP 获取数组到 AJAX

> ID：15660972
> 
> 赞同：0
> 
> 时间：2013-03-27T14:09:35.897
> 
> 标签：php, javascript, ajax, jquery

我想从 PHP 检索一组数组到 ajax。我的代码没有返回任何东西，有人可以帮助我如何将值从 PHP 检索到 ajax。如果我不在 mysql_fetch 中创建数组，它将从数据库中检索最后一个值并将其传递给 ajax 函数。我想获得全部价值。我怎样才能做到这一点？

阿贾克斯代码：

```
<script>
  //Global Variables
  var channel;
 function overall(){
    $(".one").show();
    $(".two").hide();
    $(".three").hide();
    $(".four").hide();
    window['channel']="overall";
     $.ajax({
             type:"GET",
             url:"dash2.php",
             data:{channel:channel},
             dataType:'json',
             success:function(data){
                    console.log(data.a);
                    console.log(data.b);
                    console.log(data.c);
                    }
            });
    }
</script> 
```

PHP代码：

```
<?php
   error_reporting(0);
   $channel=$_GET['channel'];
    $host="192.168.0.29";
    $username="root";
    $password="root";
    $dbname="realcl";
  mysql_connect($host,$username,$password)
    OR DIE ('Unable to connect to database! Please try again later.');
    mysql_select_db($dbname);
    $query = 'select * from '.$channel;
    $masterresult = mysql_query($query);
    $success[];
    $timeout[];
    $fail[];

    while($row1 = mysql_fetch_array($masterresult))
    {
        $success[]=$row1[1];
        $timeout[]=$row1[2];
        $fail[]=$row1[3]; 
    }

    echo json_encode(array("a"=>$success,"b"=>$timeout,"c"=>$fail));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:13:11.370

这将导致致命错误（因此，无效的 json ......）：

```
$success[];
$timeout[];
$fail[]; 
```

你可能想要：

```
$success = array();
// etc. 
```

而且你有一个巨大的 sql 注入问题，你应该根据允许的表名的白名单检查你的表名。您还应该切换到 PDO（或 mysqli），因为这些`mysql_*`功能已被弃用。

# jquery - 确认模态框出现两次

> ID：15660974
> 
> 赞同：0
> 
> 时间：2013-03-27T14:09:39.830
> 
> 标签：jquery, symfony

我对这个问题要疯了。这是我的代码

```
<form class="borrarGrupos" id="borrarGrupos" action="{{ path('grupo_delete_group', {'id_escuela': escuela.id }) }}" method="post">

....

<input class="btn btn-danger" type="submit" value="Borrar Grupos marcados" />
</form>

<script>
$(document).ready(function(){

    $(".borrarGrupos").click(function(ev) {
        $('body').append('<div id="dataConfirmModal" class="modal" role="dialog" aria-labelledby="dataConfirmLabel" aria-hidden="true"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h3 id="dataConfirmLabel">ATENCIÓN!! ¿Está seguro que quiere borrar el grupo?</h3></div><div class="modal-body"></div><div class="modal-footer"><button class="btn" data-dismiss="modal" aria-hidden="true">Cancelar</button><a class="btn btn-danger" id="dataConfirmOK">Quiero borrar el grupo</a></div></div>');
        $('#dataConfirmModal').find('.modal-body').text('¿Estás seguro de querer hacer esto?');
        $('#dataConfirmOK').click(function() {
            $(".borrarGrupos").submit();
        });
        $('#dataConfirmModal').modal({show:true});
        return false;
    });
}); 
```

如果我第一次提交表单并按下取消按钮，并且在我再次提交表单后，此模式框会出现两次。我不知道发生了什么。为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:12:06.363

这是因为您的点击功能是由表单触发的，并且因为您有多个“btn-danger”。将 id="submit" 添加到您的提交按钮并更改以下触发器：

```
$("#submit").click(function(ev) {

//...

}); 
```

# arrays - 如何将日期和数据附加到数组？

> ID：15660977
> 
> 赞同：0
> 
> 时间：2013-03-27T14:09:42.487
> 
> 标签：arrays, matlab, date, append

我有以下代码，并希望将输出逐行附加到数组中。每次循环迭代应将第一个日期放在第 1 行第 1 列中，并将 R 的第一个值放置在第 1 行第 2 列中。下一次迭代将在后续行中放置附加信息。列条目的数量将是预先确定的，但行条目的数量将是不确定的。请指教。

```
X = [41334:41340];
Y = [];
exceldate = X;
date = x2mdate(exceldate);

for i=1:1:7
    curDate  = datestr(date,26);
    %Write curDate value to Row i, column 1 of Y
    R(i) = i+1;
    %Write R(i) value to Row i, column 2 of Y
end 
```

我试图让 Y 看起来像：

```
2013/03/01 2
2013/03/02 3
2013/03/03 4
2013/03/04 5
2013/03/05 6
2013/03/06 7
2013/03/07 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:24:37.490

为此，您需要使用元胞数组。

```
Y = cell(7, 2); 
```

在循环中，您可以执行以下操作：

```
Y{i, 1} = curDate;
Y{i, 2} = R(i); 
```

请注意，您需要使用花括号来分配元胞数组中的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:27:26.563

您需要使用[元胞数组](http://www.mathworks.com/help/matlab/matlab_prog/access-data-in-a-cell-array.html)将文本（您的日期字符串）和数值组合到一个数组中。

```
%# initialize sample date cell array
dates = cellfun(@datestr,{now,now+1,now+2},'UniformOutput',false)';
%# intialize sample data array
numVals = [1:3]';
%# combine
out = [dates,num2cell(numVals)]; 
```

# mysql - 没有子查询的查询？SQL

> ID：15660978
> 
> 赞同：1
> 
> 时间：2013-03-27T14:09:42.950
> 
> 标签：mysql, sql, mysql-workbench

是否可以在没有任何子查询的情况下执行此查询？或者更少的代码？得到同样的结果。

```
SELECT person 
FROM tbla 
WHERE person IN 
(SELECT person 
FROM tblb 
WHERE age IN 
(SELECT age 
FROM tblc 
where age = '20')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:12:08.777

```
SELECT tbla.person 
FROM tbla 
inner join tblb on tblb.person = tbla.person
inner join tblc on tblc.age = tblb.age
WHERE tblc.age = '20' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:11:24.393

您可以使用连接，但需要一个`DISTINCT`关键字来消除重复的行。

```
SELECT  DISTINCT a.*
FROM    tbla a
        INNER JOIN tblb b
            ON a.person = b.person
        INNER JOIN tblc c
            ON b.age = c.age
WHERE   c.age = 20 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:14:26.840

只需将您的`tblc`and`tblb`作为`INNER JOIN`：

```
SELECT tbla.person 
FROM tbla 
INNER JOIN tblb 
  ON tblb.person = tbla.person 
INNER JOIN tblc 
  ON tblc.age = tblb.age 
WHERE tblc.age = 20; 
```

# javascript - 创建元素和事件（单击）

> ID：15660982
> 
> 赞同：1
> 
> 时间：2013-03-27T14:10:04.760
> 
> 标签：javascript, jquery, asp.net

我的代码：

```
<script>
        function abc(){
          for (var i = 0; i < 3; i ++)
          {
             var t = $('<li></li>').text(i);    
             $("ol").prepend(t);
          }
        }
        $(document).ready(function(){
          $("li").click(function(){
            $(this).hide();
          });
        });
</script> 
```

HTML：

```
<body> 
  <button onclick = "abc()">asdf</button> 
  <p>If you click on me, I will disappear.</p> 
  <ol> 
    <li>Click me away!</li> 
    <li>Click me too!</li> 
  </ol>
</body> 
```

为什么当我点击创建的 (li) - 它不隐藏？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:13:27.883

因为在加载 DOM 时还没有`<li>`添加任何元素。您仅在单击时添加它们。

这里有几种解决方案。一种是将事件直接绑定到创建的元素：

```
for (var i = 0; i < 3; i++) {
    $("<li></li>").text(i).on("click", function() {
        $(this).hide();
    }).prependTo("ol");
} 
```

**演示：http:** [//jsfiddle.net/Xgr22/](http://jsfiddle.net/Xgr22/)

另一种方法是使用事件委托：

```
$("ol").on("click", "li", function() {
    $(this).hide();
}); 
```

**演示：http:** [//jsfiddle.net/Xgr22/1/](http://jsfiddle.net/Xgr22/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:14:50.233

尝试这个：

```
$(document).ready(function(){
      $('ol').on('click','li',function(){
        $(this).hide();
      });
    }); 
```

这确保了所有 'li' 元素在单击时触发单击处理程序，无论它们是已创建的还是稍后创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:16:07.213

注意：直播是贬值的！！这是 jQuery 1.7 之前的方法

取决于您使用的 jQuery 版本，如果它在 1.7 之前，这将起作用

```
 <script>
    function abc(){
      for (var i = 0; i < 3; i ++)
      {
         var t = $('<li></li>').text(i);    
         $("ol").prepend(t);
      }
    }
    $(document).ready(function(){
      $("li").live(function(){
        $(this).hide();
      });
    });
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T14:12:33.330

尝试：

```
$('li').on('click', function () 
{
    $(this).hide();
}); 
```

# php - 分页中的重复元素

> ID：15660990
> 
> 赞同：0
> 
> 时间：2013-03-27T14:10:16.167
> 
> 标签：php, pagination, repeat

```
[...]
$count = count($array_sub);

$per_page = 12;

$numero_pagine = ceil($count / $per_page);

$separator = "?pos=" ;
$page_corrente = (isset($_GET["pos"]) AND intval($_GET["pos"])) ? min($numero_pagine, intval($_GET["pos"])) : 1;

$righi_da_visualizzare = array_slice($array_sub, ($page_corrente-1)*$per_page, $per_page);

/* -- Pagination -- */
$output_pagination = '<nav id="pagination">';
for($i=1; $i<=$numero_pagine; $i++ ) { 
    if($i!=$page_corrente) {
        $output_pagination .= '<a href="' . $_SERVER["PHP_SELF"] . $separator . $i . '">' .$i . '</a>';
    }
}
$output_pagination.= "</nav>"; 
```

总共有 27 个元素，所以我有 3 页；

第一页：12 个元素 | /page.php?pos=1

第二页：12 个元素 | /page.php?pos=2

第三页：3 个元素 | /page.php?pos=3

这是对的; 但是最后一页（第三页）中的元素在页面中重复（不能存在）......例如：

第四页：3 个元素 | /page.php?pos=4

第五页：3 个元素 | /page.php?pos=5

等等。

为什么还有其他带有元素的 ?pos？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:14:24.477

这是因为这条线

```
$page_corrente = (isset($_GET["pos"]) AND intval($_GET["pos"])) ? min($numero_pagine, intval($_GET["pos"])) : 1; 
```

在这里，当您的 $_GET 大于三时，您将其设置为三，因此您将获得三页。

# c# - 获取具有新分配 ID 的 asp.net 控件的值

> ID：15660992
> 
> 赞同：0
> 
> 时间：2013-03-27T14:10:27.807
> 
> 标签：c#, jquery, asp.net, controls

我有一个 ASP.NET Web 应用程序，每当用户从特定下拉列表中选择一个项目时，许多控件都会相应地更新，例如标签将被重命名，文本框的 ID 将被更改等。为此，我使用jQuery。

根据用户选择的内容为文本框赋予新的 id 后，我想将在这些文本框中输入的值传递给一个方法，我尝试这样做`Request.Form[controlid]`但是它返回`null`。我认为这是因为我使用的是 asp.net 控件而发生的，所以我决定使用 jquery 动态创建文本框。但是它仍然会返回 null。

我也尝试做类似的事情：

```
TextBox textBox = Page.FindControl(controlid) as TextBox

textBox.Text; 
```

但是它仍然会返回我`null`。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:21:43.177

You need to add the attribute

```
runat="server" 
```

on your control, on the .aspx page.

Then use [ControlName].Text on the CodeBehind to find the current text corresponding to your control.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:18:29.960

Page.FindControl 只在页面中直接查找控件，它不是递归的。如果您在面板或其他一些控件中有控件，它将不起作用。

看到这个帖子：

[在 ASP.NET 中查找控件的更好方法](https://stackoverflow.com/questions/4955769/better-way-to-find-control-in-asp-net/4955836#4955836)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:19:01.977

您需要使用 Request.Form[controlname] 而不是 controlid。

服务器端 FindControl 将不起作用，因为它只能识别服务器端已经存在的控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T14:20:03.057

提交表单时，它是`name`Request.Form 中的关键属性，像这样 Request.Form["controlname"] 因为您使用 javascript 在客户端动态更改文本框，所以 ASP.NET 不会能够使用 Page.FindControl() 找到它们。在客户端，您将拥有如下文本框：

```
<input type="textbox" id="t1" name="t1name" /> 
```

this 的值将作为`Request.Form["t1name"]`

# wcf-callbacks - WCF：使用异步方法在回调（同一客户端）上调用服务方法

> ID：15660997
> 
> 赞同：2
> 
> 时间：2013-03-27T14:10:37.137
> 
> 标签：wcf-callbacks, asynchronous-wcf-call

我正在做一些 WCF 实验，以了解我可以使用会话、回调和 TPL 运行多远。其中一个实验产生了奇怪的结果......服务是通过双向绑定 (NetTcpBinding) 实现的，并且通知是作为回调实现的。预期的行为应该是：

1.  客户端以同步方式调用服务（Do）上的方法
2.  服务以同步方式在客户端调用回调
3.  客户端（在回调中）以异步方式调用服务上的第二个 a 方法

该服务需要一个会话，InstanceContext 是 PerSession，并发模式是 Single。在这种情况下，我知道，在回调的上下文中，我不能以同步方式调用服务的任何方法（在同一客户端上），因此代码可以是：

```
[ServiceContract(SessionMode = SessionMode.Required, CallbackContract = typeof(INotificationCallback))]
public interface INotificationService
{
    [OperationContract]
    int Do(int value);

    [OperationContract]
    int ReDo(int value);
}

public interface INotificationCallback
{
    [OperationContract(IsOneWay = true)]
    void Notify(int value);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Single)]
public class NotificationService : INotificationService
{
        public int Do(int value)
        {
            var notificationCallback = OperationContext.Current.GetCallbackChannel<INotificationCallback>();
            //Task.Run(() => notificationCallback.Notify(value * 2));
            notificationCallback.Notify(value * 2);
            Thread.Sleep(1000);
            return value * 2;
        }

        public int ReDo(int value)
        {
            return value + 1;
        }
} 
```

客户端回调接口的实现：

```
class CallbackInstance : INotificationServiceCallback
{
    public NotificationServiceClient Client { get; set; }

    #region Implementation of INotificationServiceCallback

    public void Notify(int value)
    {
        Console.WriteLine("Notified: {0}", value);
        Task<int> task = Client.ReDoAsync(value);
        task.ContinueWith(t => Console.WriteLine("In Notify - ReDo({0}): {1}", value, t.Result));
    }

    #endregion
} 
```

运行所有代码的主要方法：

```
static void Main(string[] args)
{
    CallbackInstance callback = new CallbackInstance();
    NotificationServiceClient client = new NotificationServiceClient(new InstanceContext(callback));
    callback.Client = client;

    int result = client.Do(10);
    Console.WriteLine("Do({0}): {1}", 10, result);

    Console.ReadLine();
} 
```

在我的想法中，Notify 方法的实现中的行：

```
Task<int> task = Client.ReDoAsync(value);
task.ContinueWith(t => Console.WriteLine("In Notify - ReDo({0}): {1}", value, t.Result)); 
```

应该打破死锁但是......不，当调用 ReDoAsync 时会抛出一个异常，说“这个操作会死锁，因为在当前消息完成处理之前无法接收到回复......”。是的，亲爱的，我知道。事实上，我想以异步方式回调服务以绕过问题，但它不起作用。

但让我抓狂的是，稍微修改一下代码就能让它像魅力一样工作。而不是我尝试的 ReDoAsync 调用：

```
Task<int> task = Task.Run(() => Client.ReDo(value)); 
```

它有效！所以问题是：客户端方法的异步版本不应该进行与有效的调用相同或相似的调用吗？如果不是，那么客户端方法的异步版本到底是做什么的？

谢谢。

# css - Css没有正确对齐段落

> ID：15660998
> 
> 赞同：0
> 
> 时间：2013-03-27T14:10:37.500
> 
> 标签：css, margin, font-size

我有以下代码：

```
 <div class="copyright">
    <p>Copyright 2013 - All rights reserved</p></div> 
```

* * *

```
 .copyright {
         margin-left: auto;
         margin-right: auto;
         font-family: 'NeouBold';
         font-size: 13px;} 
```

* * *

由于某种原因，margin-left 和 margin-right 不会使段落居中。

像这样： [https ://dl.dropbox.com/u/94786808/error.png](https://dl.dropbox.com/u/94786808/error.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:12:02.577

您需要在使用自动边距居中之前给 div 一个宽度，因为默认情况下块级元素占用 100% 宽度

```
 .copyright {
 margin-left: auto;
 margin-right: auto;
 font-family: 'NeouBold';
 font-size: 13px;
 width: 300px;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:14:23.993

你可以试试 {margin:0 auto}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:14:30.513

尝试：

```
.copyright {
    text-align: center;
     font-family: 'NeouBold';
     font-size: 13px;} 
```