# StackOverflow 问答 15390000-15390999

# css - CSS | 横向拉伸固定到浏览器分辨率的包装器

> ID：15390000
> 
> 赞同：0
> 
> 时间：2013-03-13T15:47:16.563
> 
> 标签：css, fixed, alignment

[http://jsfiddle.net/aLmUy/1/](http://jsfiddle.net/aLmUy/1/)

^^^^ 看这里明白我的意思^^^

好吧，这有点难以解释......

基本上我想要的是**水平**（而不是垂直）有一个固定的布局，因此页面被拉伸并扩展包装器以填充并重新调整大小以适应个人浏览器。我要设置的唯一尺寸是包装纸相距很远的分隔。如果您要单击浏览器的边缘并更改大小，我希望页面可以使用浏览器重新调整大小。

我认为这样做的方法是，例如，假设我的布局由左侧的内容和右侧的导航菜单组成......

我只是将我的内容设置为 70% 宽度，我的菜单设置为 30% 对吗？但这不起作用，因为我的边距在那里占用了分隔空间。那么我该如何制作这个布局结构呢？这几乎是每个网站都使用的东西，我只是无法理解它是如何完成的。

**CSS：**

```
#wrapper {
position: relative;
float: left;
/* width: 70%; <--- THIS DOES NOT WORK WITH MARGINS /*
background: #ccc;
padding: 30px;
margin: 0 0 30px 20px;
border-radius: 4px 4px 4px 4px;
text-align: center;
}

#wrapper_right {
position: relative;
float: right;
/* width: 30%; <--- THIS DOES NOT WORK WITH MARGINS /*
background: #ccc;
padding: 30px;
margin: 0 20px 30px 0;
border-radius: 4px 4px 4px 4px;
text-align: center;
}

.fade {
opacity: 0.7;
transition: opacity .25s ease-in-out;
-moz-transition: opacity .25s ease-in-out;
-webkit-transition: opacity .25s ease-in-out;
}

.fade:hover {
opacity: 1;
} 
```

**HTML：**

```
 <!-- #mainwrap -->
    <div id="wrapper" class="fade">

        BLAH BLAH BLAH BLAH BLAH BLAH <br />
        BLAH BLAH BLAH BLAH BLAH BLAH <br />

    </div>
    <!-- /#mainpagewrap -->

    <!-- #wrapper_right -->
    <div id="wrapper_right" class="fade">
    BLAH<BR />
    BLAH<BR />
    BLAH<BR />
    BLAH<BR />
    BLAH<BR />
    BLAH<BR />
    BLAH<BR />
    BLAH<BR />
    </div>
    <!-- /#wrapper_right --> 
```

有人可以制作一个简单的布局，左边有一个包装器，中间有一个内容，另一个在右边，垂直尺寸为 25%、50%、25%，边距，并且还根据浏览器分辨率重新调整大小？

所以我可以看到它是如何完成的。还要提前感谢任何有帮助的人（：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:02:29.423

我实现了你想做的，但我不得不改变一些事情：

1.  添加了一个父`div`级来包装 2 个 div。
2.  删除边距并向父级添加填充。
3.  `inline-blocked`divs 并将右侧`div`从左侧移开

[http://jsfiddle.net/aLmUy/2/](http://jsfiddle.net/aLmUy/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:12:14.910

@ashley 再次感谢这比使用这样的东西要好得多：

```
#wrapper {
position: relative;
float: left;
width: 55%;
background: #fff;
padding: 3%;
margin: 0 0 5% 2%;
border-radius: 4px 4px 4px 4px;
text-align: center;
}

#wrapper_right {
position: relative;
float: right;
width: 28%;
background: #fff;
padding: 3%;
margin: 0 2% 5% 0;
border-radius: 4px 4px 4px 4px;
text-align: center;
} 
```

# c# - 更改文本编写器以写入控制台

> ID：15390005
> 
> 赞同：0
> 
> 时间：2013-03-13T15:47:27.300
> 
> 标签：c#, visual-studio-2010

我有这个想要转换的现有函数，因此它将 logMessage 打印到控制台。最初，这被用作我已转换为 C# 中的 Windows 窗体应用程序的 cmd 行应用程序。如何更改输出流以便写入文件或控制台？

```
 /// <summary>
    /// Prints a log message to stderr.
    /// </summary>

public static void logMessage(String format, params Object[] args)
    { //Change output stream if desired
        TextWriter logStream = Console.Error;
        Console.OutputEncoding = System.Text.Encoding.UTF8;
        logStream.WriteLine(logTime() + " " + format, args);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:52:31.693

要写入文件，您可以替换`Console.Error`为`StreamWriter`对象。您可能需要在此方法周围添加一些锁定，但我不确定这将如何处理来自多个线程写入文件的并发消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:08:37.913

我想我现在明白你所说的控制台是什么意思......你的意思是一些文本框？如果是，那么您可以执行以下操作：

```
public class TextBoxWriter : TextWriter
{
    TextBox _textBox = null;

    public TextBoxWriter(TextBox textBox)
    {
        _textBox = textBox;
    }

    private void AppendText(string message) 
    {
        _textBox.AppendText(message);
        _textBox.AppendText(Environment.NewLine);
    }

    public override void Write(string message)
    {
        base.Write(message);
        if (_textBox.InvokeRequired) 
            _textBox.Invoke(new Action<string>((msg) => AppendText(msg)), message);
        else 
            AppendText(message);
    }

    public override Encoding Encoding
    {
        get { return System.Text.Encoding.UTF8; }
    }
} 
```

接着

```
TextWriter logStream = new TextBoxWriter(yourTextBox); 
```

如果您想写入文件，那么可能像 Joe 建议的那样，但请记住同步该部分，除非您确定您将仅通过一个线程访问它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T15:49:12.400

替换此行

```
logStream.WriteLine(logTime() + " " + format, args); 
```

有了这条线

```
Console.WriteLine(logTime() + " " + format, args); 
```

我没有测试它，但它应该工作！

# html - 列表中第一个 li 的选择器

> ID：15390006
> 
> 赞同：0
> 
> 时间：2013-03-13T15:47:28.463
> 
> 标签：html, css, css-selectors, parent-child

我知道有一种方法可以选择每个级别的第一级或第二级等，但是如果 li 都在同一级别上，`li`有没有办法简单地选择第一级？`li`

不需要与 IE 兼容。

`li:first-child`是我一直在调查的，但我认为它的使用不正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:01:11.477

是什么让你认为`li:first-child`不正确？[w3schools](http://www.w3schools.com/cssref/sel_firstchild.asp)指出：

> :first-child 选择器用于选择指定的选择器，仅当它是其父项的第一个子项时。

在这种特殊情况下，“指定选择器”是列表元素 ( `li`)，其父项是列表本身 (`ul`或`ol`)，因此“其父项的第一个子项”将是列表的第一个元素。你可以在这里看到一个简单的例子：http: [//jsfiddle.net/mF4QV/](http://jsfiddle.net/mF4QV/)

# types - 数组通信：将 C 双精度转换为字符，然后将 Java 字节转换为双精度

> ID：15390007
> 
> 赞同：0
> 
> 时间：2013-03-13T15:47:32.263
> 
> 标签：types, interface

我在将一个双精度数组从 C 应用程序发送到 Java 应用程序（通过 UDP）时遇到问题。

目前我正在投射我的双重数据，就像这样

```
char* dataChars = (char*) dataDoubles;
int charsLen = sizeof(double)*doublesLen; 
```

并通过 UDP 将此数据发送到 java，后者会得到一个包含正确数量的 java 双条目的数据包（即双精度似乎在两者中的大小相同）。

在 java 端，我收到一个字节 []，然后我正在使用：

```
ByteArray b = ByteArray.wrap(byteData);
for(...){
   doubleData[i] = b.getDouble();
} 
```

当我发送一个包含在 C 中定义的数据的数据包时

```
double TEST_DATA[4] = {1.0, 2.0, 4.0, 8.0}; 
```

在java中我得到，可靠

```
 3.03865E-319 3.16E-322 2.0553E-320 4.079E-320 
```

看起来这些位被打乱了，但我不知道什么会纠正这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:09:12.523

正如 Miky Denescu 所建议的，以下修改解决了该问题：

```
doubleData[i] = b.order(ByteOrder.LITTLE_ENDIAN),getDouble(); 
```

# c++ - 编译器对 Boost.Build 重要吗？

> ID：15390015
> 
> 赞同：0
> 
> 时间：2013-03-13T15:47:55.473
> 
> 标签：c++, boost

我正在寻找在 Windows 上为 Android 构建 boost 的序列化库。我已经下载了 Android NDK r8d 和 boost 1.53。

此过程的第 1 步是安装 boost.build，为我获取可用于构建库的 bjam 或 b2 可执行文件。

所以我去 boost_1_53_0/tools/build/v2 并运行 boostrap.bat，按照这里的说明：http: [//www.boost.org/doc/libs/1_53_0/more/getting_started/windows.html](http://www.boost.org/doc/libs/1_53_0/more/getting_started/windows.html)

它失败了。

'cl' 未被识别为内部或外部命令

bootstrap.log 表明该脚本正在使用 msvc。谷歌搜索这个问题，我找到了建议我尝试将 GCC 添加到我的路径并将 GCC 附加到引导命令的解决方案。

现在，我还没有安装 minGW。但是，我不认为我想使用 minGW GCC，因为这不是我要构建 boost 库或我的代码的内容；我将使用 Android NDK 提供的 GCC。

我是否正确地假设编译器 Boost.Build 的构建很重要？如果是这样，我该如何解决这个问题？将 NDK 编译器位置添加到 Path 并尝试使用 arm-linux-androideabi-g++ 引导不起作用；引导日志说它不是受支持的工具集，我应该使用 mscv、gcc 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:03:54.427

您应该将 NDK 工具链添加到 user-config.jam 并选择此工具集`bjam`。请看[下面的问题](https://stackoverflow.com/questions/15376832/android-ndk-including-boost-c-library)。

更新：您可以`bjam`使用 MSVC 构建，然后使用它来调用 Android NDK 工具集。

# javascript - 移除显示效果

> ID：15390024
> 
> 赞同：0
> 
> 时间：2013-03-13T15:48:12.513
> 
> 标签：javascript, jquery

我正在尝试禁用某些对话框的显示效果。看来，如果我没有`show`在对话框的初始化中指定，对话框就会按预期显示。如果我指定`show`效果，它也可以正常工作。`show`使用不同的动画初始化后如何返回初始状态。我试过了

```
$dialog.dialog("option",'show',{effect:'none'});

$dialog.dialog("option",'show',{});

$dialog.dialog("option",'show',false); 
```

所有这些都给了我一种奇怪的盲目效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:54:10.833

正如文档中指出的那样：

```
$dialog.dialog('option', 'show', null); 
```

链接：[http ://api.jqueryui.com/dialog/#option-show](http://api.jqueryui.com/dialog/#option-show)

# cakephp - CakePHP 2.2.3 FormHelper 在使用分钟间隔和默认分钟值时无法设置默认子午线

> ID：15390026
> 
> 赞同：3
> 
> 时间：2013-03-13T15:48:13.557
> 
> 标签：cakephp, cakephp-2.2, formhelper

在我的应用程序中，预计以下内容将输出 12 小时时间的小时、分钟和子午线`<select>`，默认选择下午 4:30：

```
echo $this->Form->input('time_example', array(
    'interval' => 5,
    'timeFormat' => '12',
    'type' => 'time',
    'selected' => array(
        'hour' => '4',
        'min' => '30',
        'meridian' => 'pm'
    )
)); 
```

但默认选择的时间实际上显示为凌晨 4:30。

经过一番摆弄，我发现如果从选项中删除它将正确默认为下午 4:30，如果`interval`从选项中删除它将正确默认为下午 4:00 `min`。

我深入研究了 FormHelper.php 并在 FormHelper::dateTime() 中找到了这个，从第 2246 行开始（在 CakePHP 版本 2.2.3 中）：

```
if (!empty($interval) && $interval > 1 && !empty($min)) {
    $current = new DateTime();
    if ($year !== null) {
        $current->setDate($year, $month, $day);
    }
    if ($hour !== null) {
        $current->setTime($hour, $min);
    }
    $change = (round($min * (1 / $interval)) * $interval) - $min;
    $current->modify($change > 0 ? "+$change minutes" : "$change minutes");
    $newTime = explode(' ', $current->format('Y m d H i a'));
    list($year, $month, $day, $hour, $min, $meridian) = $newTime;
} 
```

这看起来如果同时设置`$interval`和`$min`，这可以防止`$min`与 冲突`$interval`，但会被24 小时格式[的假设](http://www.php.net/manual/en/datetime.settime.php)`$meridian`覆盖。这会强制任何小于 12 的值变为“am” ，从而无法默认选择下午 4:30。`$hour``$meridian``$hour`

我是否错误地使用了帮助程序，或者这是核心错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:55:07.477

此错误已在[此合并](https://github.com/cakephp/cakephp/commit/b8215050148565b7d8b412021403c8519ac71437)中得到纠正。

# android - 人脸识别安卓应用

> ID：15390033
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:48:28.677
> 
> 标签：android

我需要开发一个执行以下操作的 android 应用程序：

1.人脸检测（我按照[http://www.edumobile.org/android/android-programming-tutorials/face-detection-example-tutorials-in-android/](http://www.edumobile.org/android/android-programming-tutorials/face-detection-example-tutorials-in-android/)做了这个）

2.我需要识别步骤1中检测到的人脸

我已经浏览了opencv for android的链接（[http://opencv.org/android](http://opencv.org/android)），但我不清楚从哪里开始人脸识别......任何帮助..Thanx提前...... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:54:43.313

好吧，我强烈建议您使用`FaceDetector.Face`API 1 中包含在 Android 中的类。如果您只需要检测面部，这是迄今为止您可以做的最简单的事情（该类为您提供眼睛位置、眼睛中点和姿势）脸）请参阅[此处的文档](http://developer.android.com/reference/android/media/FaceDetector.Face.html)

如果你想使用 OpenCV，那就更复杂了，我看不出这样做的意义，因为你只需要人脸检测。如果你愿意，我也可以给你一些关于 OpenCV 的指导。

编辑 编辑 编辑

如果您需要人脸识别，则需要使用 OpenCV。祝你工作顺利！您需要使用要识别的人脸图片训练分类器，然后在要识别的人脸上运行分类器。这不是一件容易的事，但却是可行的，我建议你买一本关于 OpenCV 的书，并了解对象检测功能是如何工作的。

# facebook-graph-api - Facebook“空男人”头像的 URL

> ID：15390035
> 
> 赞同：1
> 
> 时间：2013-03-13T15:48:38.273
> 
> 标签：facebook-graph-api

“空男人”头像的图形 URL 是什么，即：

![在此处输入图像描述](../Images/ffa36b9f58a39e91203d4e4eb0d31519.png)

我一直以为是[https://graph.facebook.com/ **123** /picture](https://graph.facebook.com/123/picture)，直到最近它还在工作。但现在看起来这是一个真实的用户，他们上传了一张照片。

我想避免复制图像，我认为必须有一个图形 url。

# jquery - jQuery CLICK 事件未触发（切换到悬停时，它确实有效）

> ID：15390037
> 
> 赞同：6
> 
> 时间：2013-03-13T15:48:42.137
> 
> 标签：jquery, click

我有这个使用点击函数编写的 jQuery 代码。

代码必须使用 jQuery 1.7.2。

我在这里设置了一个 jsfiddle：http: [//jsfiddle.net/7MpTa/1/](http://jsfiddle.net/7MpTa/1/)

```
$(document).ready(
function () {
    $(".balloons a").hover(
        function() {
            $(this).next('.popups').addClass("shown");
        },
        function() {
            $(this).next('.popups').removeClass("shown");
        }
    );
} 
```

);

当我将点击功能切换为悬停时，它可以工作。只是单击功能本身不起作用。我尝试将其更改为绑定和生活，但没有成功。

这是悬停工作的演示：http: [//jsfiddle.net/8HL8k/1/](http://jsfiddle.net/8HL8k/1/)

有人知道为什么它不起作用吗？

**编辑** 感谢大家的回答。他们显然都工作得很好。但是，在网站上实施这些更改时，根本不会触发事件（在 FF、IE7+、Chrome、Opera、Safari 上测试）。类（气球和弹出窗口）绝对没有其他参考，所以我不确定是什么导致了干扰。由于严格的 NDA 政策，我无法发布该网站的链接。它们都在无序列表（ul）中。可能是由这种 HTML 语法引起的吗？如果是这样，有没有办法解决它？因为它必须保留在代码中，因为代码被用于整个站点的数百个幻灯片。

我还尝试让锚点在点击时发出警报，看看它是否会触发它，但它也没有触发它。

编写的脚本应该在头部内的 jQuery 1.7.2 引用之前或之后调用，还是在文档的完整底部、标记之前调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:49:58.883

您可以使用`toggle()`而不是`click()`：

```
$(".balloons a").toggle(
    function() {
        $(this).next('.popups').addClass("shown");
    },
    function() {
        $(this).next('.popups').removeClass("shown");
    }
); 
```

正如你在这里看到的：http: [//jsfiddle.net/darkajax/tmzt7/](http://jsfiddle.net/darkajax/tmzt7/)

**但是**请记住`toggle()`，自 jQuery 1.8 起已弃用，并已在 1.9 中删除，但由于您使用的是 1.7.2，所以无论如何它应该可以工作......

**但是**，更好的解决方案是使用`toggleClass()`：

```
$(".balloons a").click(
    function() {
        $(this).next('.popups').toggleClass("shown");
    }
); 
```

正如你在这里看到的：http: [//jsfiddle.net/darkajax/GeSmx/](http://jsfiddle.net/darkajax/GeSmx/)

编辑：回答你的第二个问题/问题的一部分，jQuery 参考应该在所有使用它的方法/函数之前......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:52:19.713

Hover 有一个 on 和一个 out 功能，而 click 只需要一个功能。

```
$(document).ready(function () {
    $(".balloons a").click(function() {
         $(this).next('.popups').toggleClass("shown");
    });
}); 
```

`toggleClass`将采取步骤添加和删除类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:51:45.230

`toggle()`不使用`click`

[**工作演示**](http://jsfiddle.net/7MpTa/2/)

# windows - 声明文件的 Makefile 是在未创建时创建的

> ID：15390039
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:48:45.477
> 
> 标签：windows, makefile, mingw

在过去的半小时里，我尝试寻找有类似问题的人，但是我找不到任何关于为什么这表明该文件是最新的，而它根本不存在。

这是现在的makefile：

```
SOURCES = \
Core\SnowApp.cpp \
Core\SnowApp_Render.cpp \
Core\SnowApp_Tick.cpp \
Core\InputState.cpp \
Graphics\RenderingScreen.cpp \
Graphics\SpriteSheet.cpp \
Maps\Map.cpp \
Entities\Entity.cpp \
Entities\MovingEntity.cpp \
Entities\Player.cpp \

_SOURCES = $(SOURCES:.cpp=.o)
OBJECTS = $(subst \,_,$(_SOURCES))
SRCDIR=src
OBJDIR=obj
BINDIR=bin
EXECUTABLE=snow.exe

CFLAGS= -c -Wall
LFLAGS= -o
LLIBS= -lmingw32 -lSDLmain -lSDL
CC=g++

COMPILE=$(CC) $(CFLAGS) $(LFLAGS) $@ $<
LINK=$(CC) $(LFLAGS) $@ $^ $(LLIBS)

$(BINDIR)\$(EXECUTABLE): $(addprefix $(OBJDIR)\,$(OBJECTS))
    $(LINK)

$(OBJDIR)\Core_SnowApp.o: \
$(SRCDIR)\Core\SnowApp.cpp $(SRCDIR)\Core\SnowApp.h \
$(SRCDIR)\Graphics\RenderingScreen.h $(SRCDIR)\Maps\Map.h \
$(SRCDIR)\Core\InputState.h
    $(COMPILE)

$(OBJDIR)\Core_SnowApp_Render.o: \
$(SRCDIR)\Core\SnowApp_Render.cpp $(SRCDIR)\Core\SnowApp.h \
$(SRCDIR)\Graphics\RenderingScreen.h
    $(COMPILE)

$(OBJDIR)\Core_SnowApp_Tick.o: \
$(SRCDIR)\Core\SnowApp_Tick.cpp $(SRCDIR)\Core\SnowApp.h
    $(COMPILE)

$(OBJDIR)\Core_InputState.o: \
$(SRCDIR)\Core\InputState.cpp $(SRCDIR)\Core\InputState.h
    $(COMPILE)

$(OBJDIR)\Graphics_SpriteSheet.o: \
$(SRCDIR)\Graphics\SpriteSheet.cpp $(SRCDIR)\Graphics\SpriteSheet.h
    $(COMPILE)

$(OBJDIR)\Graphics_RenderingScreen.o: \
$(SRCDIR)\Graphics\RenderingScreen.cpp $(SRCDIR)\Graphics\RenderingScreen.h \
$(SRCDIR)\Graphics\SpriteSheet.h
    $(COMPILE)

$(OBJDIR)\Maps_Map.o: \
$(SRCDIR)\Maps\Map.cpp $(SRCDIR)\Maps\Map.h \
$(SRCDIR)\Graphics\RenderingScreen.h $(SRCDIR)\Core\InputState.h
    $(COMPILE)

$(OBJDIR)\Entities_Entity.o: \
$(SRCDIR)\Entities\Entity.cpp $(SRCDIR)\Entities\Entity.h \
$(SRCDIR)\Graphics\RenderingScreen.h $(SRCDIR)\Core\InputState.h \
$(SRCDIR)\Maps\Map.h
    $(COMPILE)

$(OBJDIR)\Entities_Player.o: \
$(SRCDIR)\Entities\Player.cpp $(SRCDIR)\Entities\Player.h \
$(SRCDIR)\Maps\Map.h $(SRCDIR)\Graphics\RenderingScreen.h \
$(SRCDIR)\Core\InputState.h
    $(COMIPLE)

$(OBJDIR)\Entities_MovingEntity.o: \
$(SRCDIR)\Entities\MovingEntity.cpp $(SRCDIR)\Entities\MovingEntity.h \
$(SRCDIR)\Graphics\RenderingScreen.h $(SRCDIR)\Core\InputState.h \
$(SRCDIR)\Entities\Entity.h $(SRCDIR)\Maps\Map.h
    $(COMPILE)

clear:
    del /Q $(OBJDIR)\* $(BINDIR)\*

variables:
    echo $(SOURCES)
    echo $(OBJECTS)
    echo $(SRCDIR)
    echo $(OBJDIR)
    echo $(BINDIR)
    echo $(EXECUTABLE)
    echo $(COMPILE)
    echo $(LINK)

makefolders:
    if not exist $(SRCDIR) mkdir $(SRCDIR)
    if not exist $(OBJDIR) mkdir $(OBJDIR)
    if not exist $(BINDIR) mkdir $(BINDIR) 
```

我的问题是，当使用 mingw32-make 时，它​​将创建除 obj\Entities_Player.o 之外的所有文件，它说它始终是最新的。下面是一些命令行输出（为了便于使用，我重命名了 mingw32-make）：

```
C:\Users\Mike\Documents\CodeProjects\Snow\trunk>make clear
del /Q obj\* bin\*

C:\Users\Mike\Documents\CodeProjects\Snow\trunk>dir obj
 Volume in drive C has no label.
 Volume Serial Number is D29B-6E0B

 Directory of C:\Users\Mike\Documents\CodeProjects\Snow\trunk\obj

03/13/2013  11:33 AM    <DIR>          .
03/13/2013  11:33 AM    <DIR>          ..
               0 File(s)              0 bytes
               2 Dir(s)  80,363,814,912 bytes free

C:\Users\Mike\Documents\CodeProjects\Snow\trunk>make
g++ -c -Wall -o obj\Core_SnowApp.o src\Core\SnowApp.cpp
g++ -c -Wall -o obj\Core_SnowApp_Render.o src\Core\SnowApp_Render.cpp
g++ -c -Wall -o obj\Core_SnowApp_Tick.o src\Core\SnowApp_Tick.cpp
g++ -c -Wall -o obj\Core_InputState.o src\Core\InputState.cpp
g++ -c -Wall -o obj\Graphics_RenderingScreen.o src\Graphics\RenderingScreen.cpp
g++ -c -Wall -o obj\Graphics_SpriteSheet.o src\Graphics\SpriteSheet.cpp
g++ -c -Wall -o obj\Maps_Map.o src\Maps\Map.cpp
g++ -c -Wall -o obj\Entities_Entity.o src\Entities\Entity.cpp
g++ -c -Wall -o obj\Entities_MovingEntity.o src\Entities\MovingEntity.cpp
g++ -o bin\snow.exe obj\Core_SnowApp.o obj\Core_SnowApp_Render.o obj\Core_SnowAp
p_Tick.o obj\Core_InputState.o obj\Graphics_RenderingScreen.o obj\Graphics_Sprit
eSheet.o obj\Maps_Map.o obj\Entities_Entity.o obj\Entities_MovingEntity.o obj\En
tities_Player.o -lmingw32 -lSDLmain -lSDL
g++: error: obj\Entities_Player.o: No such file or directory
make: *** [bin\snow.exe] Error 1

C:\Users\Mike\Documents\CodeProjects\Snow\trunk>make obj\Entities_Player.o
make: `obj\Entities_Player.o' is up to date.

C:\Users\Mike\Documents\CodeProjects\Snow\trunk>dir obj\Entities_Player.o
 Volume in drive C has no label.
 Volume Serial Number is D29B-6E0B

 Directory of C:\Users\Mike\Documents\CodeProjects\Snow\trunk\obj

File Not Found

C:\Users\Mike\Documents\CodeProjects\Snow\trunk> 
```

首先，我清空我的 obj 目录并显示它是空的。然后我调用 make ，对于我过去在 SOURCES 变量中的文件，将所有 .cpp 文件构建为驻留在 obj 中的 .o 文件。这一步跳过了 obj\Entities_Player.o 所以，我们自己检查它，看看它是最新的，但是没有找到。我们再次检查 .o 文件是否在目录中，而实际上不在。对于它的价值，如果我使用 g++ 手动编译它并手动通过 $(COMPILE) 行，我最终能够编译文件，然后制作项目：

```
C:\Users\Mike\Documents\CodeProjects\Snow\trunk>g++ -c -Wall -o obj\Entities_Pla
yer.o src\Entities\Player.cpp

C:\Users\Mike\Documents\CodeProjects\Snow\trunk>make
g++ -o bin\snow.exe obj\Core_SnowApp.o obj\Core_SnowApp_Render.o obj\Core_SnowAp
p_Tick.o obj\Core_InputState.o obj\Graphics_RenderingScreen.o obj\Graphics_Sprit
eSheet.o obj\Maps_Map.o obj\Entities_Entity.o obj\Entities_MovingEntity.o obj\En
tities_Player.o -lmingw32 -lSDLmain -lSDL

C:\Users\Mike\Documents\CodeProjects\Snow\trunk> 
```

也许我只是需要用新的眼光看待它，也许还有一些我不知道的关于 make 的事情。如果您能想到任何事情，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:54:35.710

您的 make 文件中有错字。Player 的构建命令是：

```
 $(COMIPLE) 
```

什么时候应该：

```
$(COMPILE) 
```

`$(COMIPLE)`评估为空，因此不执行任何操作。

# c# - 无法在 Win CE 设备上设置时间

> ID：15390045
> 
> 赞同：0
> 
> 时间：2013-03-13T15:48:58.190
> 
> 标签：c#, time, windows-ce

我创建了一个软件，其中时间非常重要。因此，每次传输一些数据时，我都会在 win ce 设备上设置时间。我通过套接字 DateTime.Now.Ticks 传输并设置时间

> [DllImport("coredll.dll")] private extern static uint SetSystemTime(ref SYSTEMTIME lpSystemTime);

时区在 PC 上正确设置为 GMT+1，其中服务器应用程序正在运行，并且也在设备上。设备上的 HomeDST 为 0。

我的问题是，操作系统中的时间和我的软件中的时间总是有一个小时的差异。我检索时间使用

> [DllImport("coredll.dll")] private extern static void GetSystemTime(ref SYSTEMTIME lpSystemTime);

因此，例如在设备的右上角，我看到 9:12，而不是应用程序中的 8:12。

有人对此有解释/解决方案吗？这将非常有帮助，因为不幸的是，应用程序已经在实时系统中使用了，而这会带来很大的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:55:25.153

SetSystemTime 采用 UTC 时间（请参阅[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724942(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724942(v=vs.85).aspx)）

因此，如果您从服务器获取时间为 +1，则应在将其传递给 SetSystemTime() 之前对其调用 .ToUniversalTime()。

作为一般规则，为了让您的生活更简单，我建议您在任何地方都将所有时间都保持为 UTC，除非在 UI 中显示 - 这是将它们转换为本地时间的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:48:10.857

Do you use DST? If you do try disabling it and see if the problem persists. I had a problem where the clock could go several hours wrong after setting the system time with both SetSystemTime() and SetLocalTime().

It turned out the device manufacturer hadn't properly implemented DST in a driver because the real time clock could only handle local time. At least that was their explanation. Turning off DST fixed my problem except you have to manually adjust the clock two times a year for daylight saving time.

# php - 在php中自定义日期格式到mysql

> ID：15390047
> 
> 赞同：0
> 
> 时间：2013-03-13T15:48:59.950
> 
> 标签：php, mysql, date

从自定义实用程序类中，我得到以下格式的日期变量格式：`d-m-Y`. 我的计划是使用`Date('Y-m-d', strtotime($myCustomDate))`，但我不确定 PHP 每次都会返回正确的日期。我如何确定我的方法是安全的？

当我需要 2013 年 3 月 2 日时，我怎么知道 02-03-2013 不会转换为相当于 2013 年 2 月 3 日的 mysql。

你如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:52:42.077

最安全的方法（除了使用时间戳，这是一个完全不同的故事），将使用`YYYY-MM-DD`格式，因为不可能有相反的（即`YYYY-DD-MM`未定义），并且 MySQL 很好地理解它。

然后，您可以使用 PHP 将其转换为任何其他所需的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:58:45.327

如果格式始终为 dmY，则可以使用 preg_split 函数将日期分解为其组成部分，然后使用日期重新格式化

```
<?PHP 
  $date = "3-13-2013";
  $date_parts = preg_split("/-/",$date);
  $newDate = Date("Y-m-d",mktime(0, 0, 0, $date_parts[0], $date_parts[1], $date_parts[2]));
?> 
```

这将导致 $newDate 的值为 2013-03-13。

# django - 使用外键创建一个美味的资源而不将外键作为资源公开

> ID：15390051
> 
> 赞同：3
> 
> 时间：2013-03-13T15:49:13.870
> 
> 标签：django, tastypie

有许多问题看起来与我的相似，但似乎都没有涵盖我的特定表述。抱歉，如果我错过了涵盖此内容的内容。

我有一个美味的模型资源，它代表一个带有外键的模型。我希望能够创建该类型的新资源，但我不想将外键的模型暴露给 api。

为其添加资源会很好，但我不希望站点代码外部的任何内容能够读取/写入外键。不过，从我到目前为止的尝试来看，如果相应的外键模型也具有可以创建的资源，那么美味派似乎只能处理这种类型的外键。我只想能够创建引用现有外键对象的模型，不允许创建新的。

这是可以在美味派中完成的事情吗？如果是这样，我需要做什么才能做到这一点？如果没有，是否有某种解决方法/妥协？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:04:22.437

如果您不希望外键在 api 上可见，请不要在资源中为其创建字段。如果您需要在创建/更新时为其指定一些值，您可以覆盖此资源的 obj_create/obj_update 美味派方法。例如：

```
def obj_create(self, bundle, request=None, **kwargs):
    obj = super(YourResource, self).obj_create(bundle, request, **kwargs)
    obj.yourforeighnkey = somevalue
    obj.save()
    return obj 
```

# c# - C# 窗体，属性不起作用？

> ID：15390052
> 
> 赞同：2
> 
> 时间：2013-03-13T15:49:16.620
> 
> 标签：c#, winforms, properties, boolean

我正在尝试为 PC 制作流行的游戏“ **Ruzzle** ”请参阅：

![在此处输入图像描述](../Images/3fb9dc84d48ffd25b122f40b1933103a.png)

我认为我陷入了一个非常愚蠢的错误，但由于某种原因，它看起来像一个属性不起作用！

我有一个名为“check”的类，它有一个名为`Used`. 如果它设置为 true，背景将从白色变为橙色。这是通过以下方式实现的：

```
bool _used; 

public bool Used
{
    get { return _used; }
    set { _used = value; Invalidate(); }
}

void Check_Paint(object sender, PaintEventArgs e)
{
    Graphics area = e.Graphics;

    if (_used==false)
    {
        area.FillRectangle(Brushes.White, 0, 0, Width - 1, Height - 1);
        ...
    }
    else
    {
        area.FillRectangle(Brushes.Orange, 0, 0, Width - 1, Height - 1);
        ...
    }
} 
```

我已分配给`mouseClick`我将在课堂上定义的事件`Ruzzle`。该类`Ruzzle`处理游戏，基本上是一个二维数组`Check`。

```
public event EventHandler selected;

//in the constructor I've put this
this.MouseClick += new MouseEventHandler(Check_MouseClick); 
```

最后

```
void Check_MouseClick(object sender, MouseEventArgs e)
{
    if (selected != null)
    {
        selected(this, e);
    }                

    Invalidate();
} 
```

在课堂`Ruzzle`上，我尝试`Check`通过执行以下操作来更改对象的 bool 属性：

```
public Ruzzle(Control father)
{ 
    myGame = new Check[4, 4];

    for (int i = 0; i < 4; i++)
    {
        for(int j=0;j<4;j++)
        {          
            myGame[i, j] = new Check(50, father,i,j);
            myGame[i, j].Location = new Point((i * 50), (j * 50));
            father.Controls.Add(myGame[i, j]);
            myGame[i, j].selected += new EventHandler(Ruzzle_selected);
        }
    }       
}

void Ruzzle_selected(object sender, EventArgs e)
{
    int r = (sender as Check).Row;
    int c = (sender as Check).Column;
    myGame[r, c].Used = true;
} 
```

和属性工作正常`Row`，`Column`因为如果我执行 MessageBox.Show 我得到正确的值。**但是，当它在`Check`类中执行 Paint 方法时，`Used`布尔值不会改变！**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:21:24.430

我会把这个作为答案发布，尽管这个不会告诉你代码的确切问题是什么。代码本身看起来不错，因此您必须对其进行调试。让我给你一些关于如何调试这个问题的提示。

我可以看到两个明显的可能情况，为什么您的`Used`财产是`false`：

1.  它没有被`true`正确更改。

2.  `false`它在某个时间点被重置。

所以你必须检查这两种可能性。首先，我们应该忽略`Check`除被单击的实例之外的所有实例，否则其他实例可能会在调试时分散您的注意力。有两种简单的方法可以做到这一点：

1.  仅实例化一个实例。在这种情况下，您应该在游戏中创建一个 1x1 字段。

2.  调试时区分距离。VS 调试器中有一个很好的功能，叫做[Make object Id](http://blogs.msdn.com/b/zainnab/archive/2010/03/04/make-objectid-vstipdebug0015.aspx)。基本上，它允许您在调试时为某个对象分配一个数字唯一标识符。稍后您可以通过在调试器中观察其 Id 来确定特定实例是否是您之前标记的实例。如果您之前没有使用过此功能，请查看上面的链接。

好的，现在您正在调试类的唯一实例`Check`。让我们从检查属性是否设置正确开始。有几个地方你应该检查你的财产价值，例如：

1.  `Paint`您有条件的处理程序。

2.  `Used`调用`Invalidate`方法时的属性设置器。`_used`应该是肯定的`true`。

3.  在`Ruzzle_selected`处理程序结束时。`Used`财产应该在`true`这里，你应该检查一下。如果是，`true`那么我们可以得出结论，至少它设置正确。

现在让我们检查一下属性`Used`是否没有重置回`false`. 据我在您的代码中看到的，您应该没有可能真正想要重置它的地方。这意味着如果您发现这样的行为，那么它可能就是您正在寻找的错误。我假设您不会在除财产`_used`之外的任何地方访问您的字段。`Used`在这种情况下，调试这个可能的问题非常容易，您只需在属性的设置器中放置一个断点并查看它是否已设置`false`。为了避免在设置断点时遇到断点，`true`您可以使用[断点条件](http://blogs.msdn.com/b/zainnab/archive/2010/05/03/set-a-simple-breakpoint-condition-vstipdebug0021.aspx)功能。在您的情况下，条件应该类似于`value == false && _used == true`.

请尝试使用这些步骤进行调试，如果它对您有帮助，请告诉我们。否则它可能是我错过的东西，在这种情况下，我会扩展答案。

# python - 在类实例化期间干净地处理问题

> ID：15390055
> 
> 赞同：0
> 
> 时间：2013-03-13T15:49:24.913
> 
> 标签：python, class, error-handling, python-2.7

我正在编写一个 Python 类，它将被多个调用应用程序导入和使用。每个调用应用程序都将编写为在启动时将类实例化一次（并且仅一次），然后维护该实例直到应用程序关闭。

成功的实例化涉及相当长的依赖项和检查列表，例如给定文件夹中是否存在给定的 MS Access 文件、更新该数据库的能力、关闭另一个文件夹中日志文件的读/写权限、存在与调用应用程序相关的某些其他文件夹......你明白了。我想做的是在类实例化时检查所有这些依赖项。如果其中任何一个失败，类中的代码将为用户提供一个错误弹出窗口，然后避免实例化该类。然后调用应用程序将检测到该类没有被实例化并简单地退出。

我已经扎根于其他各种线程，我发现的选项要么是创建一个工厂（这似乎有点夸大了所需的东西），要么覆盖了`__new__`方法（根据其他讨论可能很棘手......几乎每个我发现的代码示例有很长的评论警告所有它不起作用的情况）。

那么从首选实践的角度来看，这两种方法中的任何一种都是可行的吗？还是有其他一些最适合我想要完成的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:58:57.263

标准做法是引发异常，使用实例化您的类的代码捕获并处理该异常：

```
class MyClass(object):
    def __init__(self, foo, bar, baz):
        if not self._database_exists(foo):
            raise ValueError('No valid database {}'.format(foo))

        # etc. 
```

然后：

```
try:
    theinstance = MyClass('foooption', barvalue, bazvalue)
except ValueError as e:
    # Oops, something went wrong
    showErrorToUser(e)
    theinstance = None 
```

# c# - 在知道 Type 的同时将 int 转换为 Enum

> ID：15390059
> 
> 赞同：1
> 
> 时间：2013-03-13T15:49:36.760
> 
> 标签：c#

我正在寻找一种将 int 转换为枚举的方法，例如

```
var result = (MyEnum)value; 
```

问题是我只有整数和 System.Type。

这不起作用：

```
var result = (type)value; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:55:29.517

您可以使用：

```
 Enum.ToObject(type, value); 
```

尽管如果您在编译时不知道类型是什么，我不知道您希望如何使用该结果。

# php - PDO 列排序未排序

> ID：15390065
> 
> 赞同：1
> 
> 时间：2013-03-13T15:49:54.730
> 
> 标签：php, sorting, pdo

当我单击下面的用户名链接时，它没有排序，我不知道为什么。

```
 if(isset($_GET['field'])) {

    $orderby = $_GET['field'];
$orderby2 = $_GET['sort'];

}else{
$orderby = "id";
$orderby2 = "ASC";
} if($_GET['sort'] == "ASC") {
    $sortby = "DESC";
}else{
    $sortby = "ASC";

} 
```

排序链接：

```
<th style="text-align: center;padding:10px;white-space: nowrap;" width="auto" class="rounded-company" scope="col"><a href="dash.php?field=user_name&sort=<?php echo $sortby;?>">Username</a></th>

if(isset($_REQUEST['txtKey'])) {

   $con = "%".$_REQUEST['txtKey']."%";
}

    $result = $db->dbh->prepare("SELECT * FROM ruj_users WHERE user_name like :textKey ORDER BY :order :order2");
    $result->bindValue(":textKey", isset($con) ? $con : null, PDO::PARAM_STR);
    $result->bindParam(":order", $orderby, PDO::PARAM_STR);
    $result->bindParam(":order2", $orderby2, PDO::PARAM_STR);
    $result->execute();
    $result = $result->fetchAll(PDO::FETCH_ASSOC);

    $result2 = $db->dbh->prepare("SELECT * FROM ruj_users WHERE user_name like :textKey ORDER BY :order :order2");
    $result->bindValue(":textKey", isset($con) ? $con : null, PDO::PARAM_STR);
    $result->bindParam(":order", $orderby, PDO::PARAM_STR);
    $result->bindParam(":order2", $orderby2, PDO::PARAM_STR);
    $result2->execute();
    $resultCount = $result2->rowCount();

    if(isset($_REQUEST['txtKey']))$str='&field='.$_GET['field'].'&sort='.$_GET['sort']."&txtKey=".$_REQUEST['txtKey']; 
```

请让我知道我在做什么，或者我是否遗漏了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:33:23.887

您不能使用`bindParam()`替换列名，只能替换表达式值。所以你必须使用字符串插值：

```
$result = $db->dbh->prepare("SELECT * FROM ruj_users WHERE user_name like :textKey ORDER BY $orderby $orderby2); 
```

不幸的是，这会使您面临 SQL 注入，因此您需要在执行此操作之前验证输入。例如

```
if (preg_match('/[^a-z0-1_]/i', $orderby)) {
    // report invalid sort field
}
if (!preg_match('/^(asc|desc)$/i', $orderby2)) {
    // report invalid sort direction
} 
```

# ruby - 为什么 shell 输出经常在其输出中使用 `mixed_characters'？

> ID：15390066
> 
> 赞同：6
> 
> 时间：2013-03-13T15:49:58.523
> 
> 标签：ruby, shell, command-line, manpage

我看到在各种命令行输出中一起使用的反引号 ( ` )（也称为重音）字符与撇号字符 ( ' ) 混合使用。当然，背后的原因/历史记录在网上某处，但我找不到在哪里。

以下是我所说的几个例子：

从`make`手册页：

> 如果 makefile 是 `-'，则读取标准输入。

一些`rake`输出：

> .../ruby_koans/koans/about_strings.rb:6:in `test_double_quoted_strings_are_strings'

为什么不一致？

* * *

我想这里更广泛的问题是“为什么不酌情使用'正确'的单引号或双引号？” 但我意识到撇号（和重音）在“标准”美国键盘上更容易使用。为什么*会这样*，虽然...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:28:15.143

这已经[在 Programmers 上被询问和回答](https://softwareengineering.stackexchange.com/questions/75349/why-do-nix-y-folks-single-quote-like-this-instead-of-like-this)（现已删除）。最佳答案是它来自 LaTeX 的最佳猜测。

[SE English Language & Usage](https://english.stackexchange.com/questions/17695/any-reference-on-the-usage-of-a-backtick-and-single-quotation-mark-like-this)也回答了类似的问题。最重要的答案是，它是为了解决有限的字符集，它缺少用于“这种引号风格”的单独字符。

# c# - 在运行时多次编译相同的 .dll

> ID：15390068
> 
> 赞同：0
> 
> 时间：2013-03-13T15:50:00.433
> 
> 标签：c#, serialization, compiler-construction

我正在开发一个简单的 2D 游戏编辑器，我希望能够从 .cs 文件中读取、编译然后将其附加到运行时的对象（如 Unity3D）并能够编辑其属性。

我现在正在将它们编译成 .dll 文件，问题是当我尝试再次重新编译它时，因为原始 .cs 文件也可以在运行时更新（它说该文件已被使用，因为 .dll我想已经加载到程序集中）

还有另一种方法可以做到这一点吗？

**流动：**

1 - 用户制作/编辑脚本（.cs 文件）
2 - 用户调用函数来编译脚本
3 - 程序编译所有 .cs 文件并更新 .DLL 文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:01:22.770

与其将 DLL 链接到您的项目，不如考虑使用 LoadLibrary() 或 LoadLibraryEx() 来加载它，然后再调用它的任何函数（以及在进行任何重新编译之后），然后在重新编译之前调用 FreeLibrary()编译。

# php - 如何在 PHP 上将字符串格式化为 XML

> ID：15390073
> 
> 赞同：0
> 
> 时间：2013-03-13T15:50:24.233
> 
> 标签：php, xml, xml-serialization

我制作了一个包含 XML 的字符串（带有标签等），但是没有 alinea 和换行符，所以我认为最好按照他必须的方式格式化 xml（带有 alinea 和换行符）

那么如何在 PHP 中将字符串转换为漂亮的 xml 呢？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:53:51.553

您可以使用`SimpleXML`. 在这里查看：[SimpleXML 用法](http://www.php.net/manual/en/simplexml.examples-basic.php)。
如果你想美化你的字符串，你可以使用[SimpleXMLElement::asXML()](http://www.php.net/manual/en/simplexmlelement.asxml.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:59:22.447

一个快速的谷歌搜索把我带到了这个 PEAR 包 [XML_Beautifier](http://pear.php.net/package/XML_Beautifier/redirected)，我认为这就是你想要的

# sql - 如何获取没有重复记录的列表？

> ID：15390081
> 
> 赞同：0
> 
> 时间：2013-03-13T15:50:39.437
> 
> 标签：sql, oracle, plsql, oracle10g, oracle11g

我需要得到一个没有一些重复记录值的列表。详情请查看查询列表。

第一个列表是从原始表中查询的，第二个列表是添加两个函数的中间结果，第三个列表是期望结果。

请帮助获得第三个列表结果，任何可以帮助的人将不胜感激。

顺便说一句，困难的部分是需要将 plsh.plsh_id 保留在最终结果中，因此不能在第二个列表中使用 distinct。current_smc_value 和 previous_smc_value 需要保持继续。

原始数据如下：

```
select plsh.plsh_id,
       plsh.patr_id,
       plsh.smc         CURRENT_SMC,
       plsh.create_date CURRENT_SMC_DATE
  from pat_liver_smc_his plsh
 where plsh.patr_id = 34461
 order by plsh.plsh_id desc; 
```

结果是

```
 PLSH_ID PATR_ID CURRENT_SMC CURRENT_SMC_DATE
1   10020   34461       22      2/19/2013 1:23:58 PM
2   10019   34461       22      2/19/2013 1:22:57 PM
3   10018   34461       27      2/19/2013 1:22:42 PM
4   10017   34461       27      2/19/2013 1:22:42 PM
5   10016   34461       27      2/19/2013 1:22:32 PM
6   10015   34461       27      2/19/2013 1:22:32 PM
7   10014   34461       27      2/19/2013 1:22:20 PM
8   10013   34461       27      2/19/2013 1:22:20 PM
9   10012   34461       27      2/19/2013 1:22:09 PM
10  10011   34461       27      2/19/2013 1:21:50 PM
11  10010   34461       24      2/19/2013 1:21:36 PM
12  10009   34461       22      2/19/2013 1:21:06 PM
13  10008   34461               2/19/2013 1:21:06 PM 
```

需求需要获取previous_smc、previous_smc_date 和trunc date，所以我创建了下面的查询语句和两个函数。

```
select plsh.plsh_id,
       plsh.patr_id,
       tttt_gen_pkg.get_previous_SMC(plsh.patr_id, plsh.plsh_id) PREVIOUS_SMC,
       trunc(tttt_gen_pkg.get_previous_SMC_Date(plsh.patr_id, plsh.plsh_id)) PREVIOUS_SMC_DATE,
       plsh.smc CURRENT_SMC,
       trunc(plsh.create_date) CURRENT_SMC_DATE
  from pat_liver_smc_his plsh
 where plsh.patr_id = 34461
 order by plsh.plsh_id desc;

function get_previous_SMC(p_patr_id varchar2, p_plsh_id varchar2)
  return number is
  cursor c_smc is
    select plsh.smc
      from pat_liver_smc_his plsh
     where plsh.patr_id = p_patr_id
       and plsh.plsh_id < p_plsh_id
     order by plsh.plsh_id desc;
  v_rst number;
begin
  open c_smc;
  fetch c_smc
    into v_rst;
  close c_smc;
  return v_rst;
end;

function get_previous_SMC_Date(p_patr_id varchar2, p_plsh_id varchar2)
  return date is
  cursor c_smc is
    select plsh.create_date
      from pat_liver_smc_his plsh
     where plsh.patr_id = p_patr_id
       and plsh.plsh_id < p_plsh_id
     order by plsh.plsh_id desc;
  v_rst date;
begin
  open c_smc;
  fetch c_smc
    into v_rst;
  close c_smc;
  return v_rst;
end; 
```

结果是

```
 PLSH_ID PATR_ID PREVIOUS_SMC    PREVIOUS_SMC_DATE   CURRENT_SMC     CURRENT_SMC_DATE
1   10020   34461       22          2/19/2013               22          2/19/2013
2   10019   34461       27          2/19/2013               22          2/19/2013
3   10018   34461       27          2/19/2013               27          2/19/2013
4   10017   34461       27          2/19/2013               27          2/19/2013
5   10016   34461       27          2/19/2013               27          2/19/2013
6   10015   34461       27          2/19/2013               27          2/19/2013
7   10014   34461       27          2/19/2013               27          2/19/2013
8   10013   34461       27          2/19/2013               27          2/19/2013
9   10012   34461       27          2/19/2013               27          2/19/2013
10  10011   34461       24          2/19/2013               27          2/19/2013
11  10010   34461       22          2/19/2013               24          2/19/2013
12  10009   34461                   2/19/2013               22          2/19/2013
13  10008   34461                                                       2/19/2013 
```

预期的最终结果如下：如何得到它？最终结果中需要 PLSH_ID，因此与上述查询语句不同的是不起作用。

```
 PLSH_ID PATR_ID PREVIOUS_SMC    PREVIOUS_SMC_DATE   CURRENT_SMC     CURRENT_SMC_DATE
1   10020   34461       22          2/19/2013               22          2/19/2013
2   10019   34461       27          2/19/2013               22          2/19/2013
3   10018   34461       27          2/19/2013               27          2/19/2013
10  10011   34461       24          2/19/2013               27          2/19/2013
11  10010   34461       22          2/19/2013               24          2/19/2013
12  10009   34461                   2/19/2013               22          2/19/2013
13  10008   34461                                                       2/19/2013 
```

* * *

```
Hi Egor,

Thank you very much for your effort. After a little bit modify your code I got below result,
it seems current_smc and current_smc_date order is correct but the previous_smc and previous_smc_date still not correct,
the result is like below:

    PLSH_ID PATR_ID PREVIOUS_SMC    PREVIOUS_SMC_DATE   CURRENT_SMC     CURRENT_SMC_DATE
1   10020   34461                                       22              2/19/2013
2   10019   34461   22              2/19/2013           22              2/19/2013
3   10018   34461   22              2/19/2013           27              2/19/2013
4   10017   34461   27              2/19/2013           27              2/19/2013
5   10010   34461   27              2/19/2013           24              2/19/2013
6   10009   34461   24              2/19/2013           22              2/19/2013
7   10008   34461   22              2/19/2013                           2/19/2013

A little bit modify of your code is like below:

select plsh_id,
       patr_id,
       PREVIOUS_SMC,
       PREVIOUS_SMC_DATE,
       CURRENT_SMC,
       CURRENT_SMC_DATE
  from (select plsh_id,
               patr_id,
               CURRENT_SMC,
               CURRENT_SMC_DATE,
               PREVIOUS_SMC,
               PREVIOUS_SMC_DATE,
               case
                 when decode(CURRENT_SMC,
                             lag(CURRENT_SMC) over(partition by t1.patr_id
                                  order by t1.plsh_id desc),
                             1) = 1 and decode(CURRENT_SMC_DATE,
                                               lag(CURRENT_SMC_DATE)
                                               over(partition by t1.patr_id
                                                    order by t1.plsh_id desc),
                                               1) = 1 and
                      decode(PREVIOUS_SMC,
                             lag(PREVIOUS_SMC)
                             over(partition by t1.patr_id order by
                                  t1.plsh_id desc),
                             1) = 1 and
                      decode(CURRENT_SMC,
                             lag(CURRENT_SMC) over(partition by t1.patr_id
                                  order by t1.plsh_id desc),
                             1) = 1 then
                  1
               end as the_same
          from (select plsh.plsh_id,
                       plsh.patr_id,
                       trunc(plsh.smc) CURRENT_SMC,
                       trunc(plsh.create_date) CURRENT_SMC_DATE,
                       lead(trunc(plsh.smc)) over(partition by plsh.patr_id order by plsh.plsh_id) PREVIOUS_SMC,
                       lead(trunc(plsh.create_date)) over(partition by plsh.patr_id order by plsh.plsh_id) PREVIOUS_SMC_DATE
                  from pat_liver_smc_his plsh
                 where plsh.patr_id = 34461) t1)
 where the_same is null
 order by patr_id, plsh_id desc;

Can you please help me to correct it? Some of you code I don't understand because you are more senior level than me. Thanks again!!! 
```

* * *

最终的完美作品版本来自 DazzaL。修改后的工作代码如下：

```
select plsh_id,
       patr_id,
       previous_smc,
       previous_smc_date,
       current_smc,
       current_smc_date
  from (select plsh_id,
               patr_id,
               previous_smc,
               previous_smc_date,
               current_smc,
               current_smc_date,
               row_number() over(partition by patr_id, current_smc, previous_smc order by plsh_id desc) rn
          from (select plsh_id,
                       patr_id,
                       plsh.smc current_smc,
                       plsh.create_date current_smc_date,
                       lag(plsh.smc) over(partition by patr_id order by plsh_id) previous_smc,
                       lag(plsh.create_date) over(partition by patr_id order by plsh_id) previous_smc_date
                  from pat_liver_smc_his plsh))
 where rn = 1 and patr_id = 34461
 order by patr_id, plsh_id desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:26:23.033

```
select plsh_id,
       patr_id,
       CURRENT_SMC,
       CURRENT_SMC_DATE,
       PREVIOUS_SMC,
       PREVIOUS_SMC_DATE
from (
    select plsh_id,
           patr_id,
           CURRENT_SMC,
           CURRENT_SMC_DATE,
           PREVIOUS_SMC,
           PREVIOUS_SMC_DATE,
           case when 
             decode(CURRENT_SMC, lag(CURRENT_SMC) over (partition by plsh.patr_id order by plsh.plsh_id desc), 1) = 1
             and   
             decode(CURRENT_SMC_DATE, lag(CURRENT_SMC_DATE) over (partition by plsh.patr_id order by plsh.plsh_id desc), 1) = 1
             and   
             decode(PREVIOUS_SMC, lag(PREVIOUS_SMC) over (partition by plsh.patr_id order by plsh.plsh_id desc), 1) = 1
             and   
             decode(CURRENT_SMC, lag(CURRENT_SMC) over (partition by plsh.patr_id order by plsh.plsh_id desc), 1) = 1
             then 1
           end as the_same
    from (
      select 
           plsh.plsh_id,
           plsh.patr_id,
           trunc(plsh.smc)         CURRENT_SMC,
           trunc(plsh.create_date) CURRENT_SMC_DATE,
           lead(trunc(plsh.smc)) over (partition by plsh.patr_id order by plsh.plsh_id) PREVIOUS_SMC,
           lead(trunc(plsh.create_date)) over (partition by plsh.patr_id order by plsh.plsh_id) PREVIOUS_SMC_DATE
      from pat_liver_smc_his plsh
      where plsh.patr_id = 34461
    )
)
where the_same is null
order by plsh.patr_id, plsh.plsh_id desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:46:47.373

就像是;

```
select plsh_id, patr_id, previous_smc, previous_smc_date, 
       current_smc, current_smc_date
  from (select plsh_id, patr_id, previous_smc, 
               previous_smc_date, current_smc,
               current_smc_date,
               row_number() over(partition by patr_id, current_smc, 
                                 current_smc_date, previous_smc, 
                                 previous_smc_date  
                                 order by plsh_id desc) rn          
          from (select plsh_id, patr_id, current_smc,
                       trunc(current_smc_date) current_smc_date,
                       lag(current_smc) over(partition by patr_id 
                                             order by plsh_id) previous_smc,
                       trunc(lag(current_smc_date)
                               over(partition by patr_id
                                    order by plsh_id)) previous_smc_date
                  from pat_liver_smc_his))
 where rn = 1
 order by patr_id, plsh_id desc 
```

# java - 从侧面包装中抛出异常是否正确？

> ID：15390086
> 
> 赞同：2
> 
> 时间：2013-03-13T15:50:55.543
> 
> 标签：java, exception, readability

我想抛出一个具有特定名称的异常，并且这样的异常已经存在于侧包中。

例如`UnexpectedException`在`java.rmi`. 我不使用 rmi packege 中的任何工具，但异常的名称*正是*我所需要的。

我可以在我自己的上下文中抛出该异常，也可以创建一个具有相同名称的新异常。哪种方式更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:53:30.807

仅仅因为*名字*是正确的并不意味着其他任何事情都是正确的。看描述，例如：

> 如果远程方法调用的客户端作为调用的结果接收到一个检查的异常，该检查的异常不在远程接口中方法的 throws 子句中声明的检查的异常类型中，则会引发 UnexpectedException。

这是否*真的*描述了您的异常试图代表什么？我怀疑不是。

想象一下你是一个客户——你会想知道为什么你必须*捕捉*（或声明）与 RMI 相关的东西，尽管你的代码库都与 RMI 无关。奇怪的东西会在整个代码中蔓延。伊克。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:54:09.903

当您查看 Exception 的完全限定名称时，`java.rmi`是其名称的一部分。考虑一个程序员使用你的代码阅读来期待一个异常`java.rmi`，这可能会引起人们的注意，因此是一个坏主意。

特别考虑到这个例外：*什么*是意外的？您可以`UnexpectedSomethingException`改为命名您的班级，以便更清楚地了解正在发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:57:53.553

[@Jon Skeet](https://stackoverflow.com/a/15390137/451518)和[@akaIDIOT](https://stackoverflow.com/a/15390153/451518)已经提供了很好的答案。我将添加几个与您的问题相关的示例：

*   Play[出现意外异常！](http://www.playframework.com/documentation/api/1.1/play/exceptions/UnexpectedException.html)框架
*   来自 Google Web Toolkit 的[UnexpectedException](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/requestfactory/server/UnexpectedException.html)

`java.rmi.UnexpectedException`从与 RMI 无关的方法处理会很奇怪和令人困惑。

另请注意，异常的主要目的是允许客户端代码处理您自己无法处理的情况。因此，方法抛出的事实`java.io.IOException`意味着客户端代码应该负责处理意外的文件输入输出错误（重新检查文件访问/存在，基本设置）。方法抛出`java.rmi.UnexpectedException`提示客户端代码检查 RMI 设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:02:26.137

我强烈建议不要仅仅基于它共享您想要的名称这一事实重用另一个异常。例如，在 RMI 上下文之外抛出 java.rmi.UnexpectedException 会非常混乱。

我不确定您打算如何使用您的异常，但对我来说，仅基于名称，听起来您可以只使用 java.lang.RuntimeException，因为它具有相同的一般含义。

所以我的建议是这样的：

1.  如果它确实是您的代码未准备好处理的意外预期异常，请使用 RuntimeException。如果您真的不需要 RuntimeException 已经提供的任何新功能，这是最合适的。
2.  创建您自己的自定义 UnexpectedException 类。真的没有理由仅仅因为其他一些库已经使用它而严格避免使用某个类名。这是包的要点之一 - 提供命名空间来消除相同名称的歧义。使用现代 IDE，真的没有理由担心。其他人可能不同意——这是一个品味问题——但我个人认为这没有问题。当然没有技术上的理由不这样做。

# c++ - C++虚方法混淆

> ID：15390090
> 
> 赞同：1
> 
> 时间：2013-03-13T15:51:23.320
> 
> 标签：c++, inheritance, methods, virtual

我有一个关于继承和虚拟方法的基本 C++ 问题。

请看这段代码：

```
#include <iostream>
#include <vector>
using namespace std;

class A {
public:
  virtual void f() {cout << "A\n";};
};

class B : public A {
public:
  void f() {cout << "B\n";};
};

int main() {
  A a;
  B b;
  vector<A> v;
  v.push_back(a);
  v.push_back(b);

  for (int i = 0; i < v.size(); ++i)
    v.at(i).f();
} 
```

如果我执行这段代码，它会打印出来

```
A
A 
```

我不明白为什么它不打印

```
A
B 
```

因为“f”方法被声明为虚拟的。我想知道为什么程序会以这种方式运行。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:54:23.377

您的向量包含`A`对象：

```
vector<A> v; 
```

当你 push_back 一个对象到其中时，向量会将它的一部分`B`复制到一个新对象中。这相当于这样做：`A``A`

```
A a;
B b;
a = b;
a.f(); 
```

这称为[*对象切片*](http://en.wikipedia.org/wiki/Object_slicing)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:53:51.030

您正在[切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)对象，您需要使用指针或[引用](https://stackoverflow.com/questions/7192069/polymorphic-c-references)才能使其正常运行。使用指针的示例：

```
int main()
{
  vector<A*> v;
  v.push_back(new A);
  v.push_back(new B );

  for (int i = 0; i < v.size(); ++i)
    v[i]->f();
} 
```

这将为您提供`polymorphic`您想要的行为，并将具有以下输出：

```
A
B 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T15:56:21.410

`b`被分割成一个实例，`A`当它被复制以插入 时`vector`，您必须使用`vector<A*>`它才能按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:54:15.250

你应该有指针向量才能有多态行为:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T15:58:26.890

在 C++ 中，只有指向对象的指针和引用具有多态性。您的向量包含 A 类型的非多态对象。

尝试

```
int main() {
  A a;
  B b;
  vector<A*> v;
  v.push_back(&a);
  v.push_back(&b);

  for (int i = 0; i < v.size(); ++i)
    v.at(i)->f(); 
```

尽管您需要注意，当 a 和 b 被销毁时（当它们超出范围时），这些指针将变得无效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T16:00:21.507

向量 v 包含 A 类型的对象。当您将对象推回 v 时，这些对象将使用 A 的复制构造函数进行实例化。就像您稍后在函数 f 上调用的每个对象实际上都是 A 类型并且永远不会执行B 的 f()。

# backbone.js - 使用 Backbone.Marionette 和 Backbone.Relational 渲染嵌套集合

> ID：15390093
> 
> 赞同：1
> 
> 时间：2013-03-13T15:51:27.083
> 
> 标签：backbone.js, marionette, backbone-relational

我正在尝试使用 Backbone.js 制作一个简单的日历/待办事项列表。

我有一个 Days 集合，每个 Days 可以有多个 Todos。我想将每个日期呈现为一个无序列表，其中包含一个无序列表的待办事项列表。这是我的 HTML：

```
<ul id="days-list">
    <!-- #day-tpl -->
</ul>

<script id="day-tpl" type="tpl">
    <h1>To-do for {{name}}</h1>
    <ul class="todos-list">
        <!-- todo-tpl -->
    </ul>
</script>

<script id="todo-tpl" type="tpl">
    {{title}}
</script> 
```

到目前为止，这是我的 JS（我在 HTML 中包含 Backbone、Backbone.Marionette 和 Backbone.Relational）。

```
Todo = Backbone.RelationalModel.extend({});

Todos = Backbone.Collection.extend({
    model: Todo,
    idAttribute: 'id_todo'
});

Day = Backbone.RelationalModel.extend({
    relations:[{
        type: Backbone.HasMany,
        key: 'todos',
        relatedModel: 'Todo',
        collectionType: 'Todos',
        reverseRelation:{
            key: 'day',
            includeInJSON: 'id'
        }
    }]
});

Days = Backbone.Collection.extend({
    model: Day
});

TodoView = Backbone.Marionette.ItemView.extend({
    tagName: 'li',
    template: '#todo-tpl'
});

TodosView = Backbone.Marionette.CollectionView.extend({
    itemView: TodoView
});

DayView = Backbone.Marionette.ItemView.extend({
    tagName: 'li',
    template: '#day-tpl'
});

DaysView = Backbone.Marionette.CollectionView.extend({
    el: $('#days-list'),
    itemView: DayView
});

$(document).ready(function(){
    var days = new Days([
        {
            "id": 1,
            "name": "Monday",
            "todos": [
                {
                    "id_todo": 1,
                    "title": "Learn Javascript"
                },
                {
                    "id_todo": 2,
                    "title": "Learn Node.js"
                }
            ]
        },
        {
            "id": 2,
            "name": "Tuesday",
            "todos": [
                {
                    "id_todo": 3,
                    "title": "Learn Backbone"
                },
                {
                    "id_todo": 4,
                    "title": "Learn Backbone.Marionette"
                }
            ]
        }
    ]);

    var daysView = new DaysView({collection: days});
    daysView.render();
}); 
```

Day 集合显示得很好（感谢 Marionette！），但我不知道我应该如何渲染每天的 Todo 集合。有任何想法吗 ？谢谢 ！

编辑：我找到了一种方法，但我不确定这是正确的方法。

我编辑了我的 DayView 如下：

```
DayView = Backbone.Marionette.ItemView.extend({
    tagName: 'li',
    template: '#day-tpl',
    onRender: function(){
        var $todosList = this.$el.find('.todos-list');
        var todos = new Todos(this.model.get('todos').toJSON());
        var todosView = new TodosView({collection: todos, el: $todosList});
        todosView.render();
    }
}); 
```

它确实在正确的日期正确地呈现每个待办事项，但是使用 jquery find 和 toJSON 是一种代码味道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:42:56.850

Marionette 有一个 CompositeView 最适合嵌套集合。我已经包含了文档和一篇讨论使用它的文章。

[Marionette Composite 查看文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md)

[木偶复合材料 查看文章](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

# installshield-le - InstallShield LE - 文件的相对路径

> ID：15390098
> 
> 赞同：7
> 
> 时间：2013-03-13T15:51:35.387
> 
> 标签：installshield-le

当我向我的安装程序添加依赖项时，我总是留下一个硬编码的文件路径。

根据[此博客](http://adriscoll86.wordpress.com/2010/06/24/working-with-installshield-limited-edition/)，解决此问题的唯一方法是使用 ISProjectFolder 变量手动更改 ISL 文件中的硬编码路径。这没有任何好处，因为每次我重建安装程序时文件都会被闪击。

我还看到提到的路径变量，但在 InstallShield LE 中似乎没有它们的功能。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-07T21:07:02.463

*   修复了 Install Shield Limited Edition 将文件内容复制到输出目录 (Visual Studio 2012) 的相对路径 步骤：
*   在解决方案资源管理器中展开您的安装项目，以便您看到 1、2、3、4、5、6 部分
*   展开“2”并双击“文件”您将看到一个四面板页面：带有“源计算机文件”和“目标计算机文件”
*   从“目标计算机的文件”中删除硬编码路径和文件
*   单击左上角面板，在您的文件为“内容文件”的项目上
*   右上角的面板将显示“来自 MyProject 的内容文件”
*   单击并将其拖动到右下面板（“目标计算机的文件”）

回到您的项目并确保您要复制的所有文件都具有属性： Build Action=Content and Copy to output directory=Copy Always

# css - Chrome 和 Firefox 的 CSS 动画

> ID：15390104
> 
> 赞同：0
> 
> 时间：2013-03-13T15:51:57.233
> 
> 标签：css, google-chrome, firefox, animation

我正在尝试在登陆页面上进行小幻灯片放映。它在 Firefox 中运行良好，但在 Chrome 中不行。 [示例页面](http://certs.vwsvandalia.com/test/html/test.html) 这是我的 CSS

```
/*
    ********* The Slide Show.  Weeeeeee! *********
*/

/* SLIDER STRUCTURE */

#slider {
   background: #000;
   border: 5px solid #eaeaea;
   box-shadow: 1px 1px 5px rgba(0,0,0,0.7);
   height: 320px;
   width: 680px;
   margin: 40px auto 0;
   overflow: visible;
   position: relative;
}

/* HIDE ALL OUTSIDE OF THE SLIDER */

#mask {
   overflow: hidden;
   height: 320px; 
}

/* IMAGE LIST */

#slider ul {
   margin: 0;
   padding: 0;
   position: relative;
}

#slider li { 
   width: 680px;  /* Width Image */
   height: 320px; /* Height Image */
   position: absolute;
   top: -325px; /* Original Position - Outside of the Slider */
   list-style: none;
}

#slider li.firstanimation {
   animation: cycle 25s linear infinite;
   -webkit-animation: cycle 25s linear infinite;   
}

#slider li.secondanimation {
   animation: cycletwo 25s linear infinite;
   -webkit-animation: cycle 25s linear infinite;
}

#slider li.thirdanimation {
   animation: cyclethree 25s linear infinite;
   -webkit-animation: cycle 25s linear infinite;       
}

#slider li.fourthanimation {
   animation: cyclefour 25s linear infinite;
   -webkit-animation: cycle 25s linear infinite;        
}

#slider li.fifthanimation {
   animation: cyclefive 25s linear infinite;
   -webkit-animation: cycle 25s linear infinite;        
}

/* ANIMATION */

@keyframes cycle {
   0%  { top: 0px; } /* When you start the slide, the first image is already visible */
   4%  { top: 0px; } /* Original Position */
   16% { top: 0px; opacity:1; z-index:0; } /* From 4% to 16 % = for 3 seconds the image is visible */
   20% { top: 325px; opacity: 0; z-index: 0; } /* From 16% to 20% = for 1 second exit image */
   21% { top: -325px; opacity: 0; z-index: -1; } /* Return to Original Position */
   92% { top: -325px; opacity: 0; z-index: 0; }
   96% { top: -325px; opacity: 0; } /* From 96% to 100% = for 1 second enter image*/
   100%{ top: 0px; opacity: 1; }
}

@keyframes cycletwo {
   0%  { top: -325px; opacity: 0; } /* Original Position */
   16% { top: -325px; opacity: 0; }/* Starts moving after 16% to this position */
   20% { top: 0px; opacity: 1; }
   24% { top: 0px; opacity: 1; }  /* From 20% to 24% = for 1 second enter image*/
   36% { top: 0px; opacity: 1; z-index: 0; }   /* From 24% to 36 % = for 3 seconds the image is visible */
   40% { top: 325px; opacity: 0; z-index: 0; } /* From 36% to 40% = for 1 second exit image */
   41% { top: -325px; opacity: 0; z-index: -1; }   /* Return to Original Position */
   100%{ top: -325px; opacity: 0; z-index: -1; }
}

@keyframes cyclethree {
   0%  { top: -325px; opacity: 0; }
   36% { top: -325px; opacity: 0; }
   40% { top: 0px; opacity: 1; }
   44% { top: 0px; opacity: 1; } 
   56% { top: 0px; opacity: 1; } 
   60% { top: 325px; opacity: 0; z-index: 0; }
   61% { top: -325px; opacity: 0; z-index: -1; } 
   100%{ top: -325px; opacity: 0; z-index: -1; }
}

@keyframes cyclefour {
   0%  { top: -325px; opacity: 0; }
   56% { top: -325px; opacity: 0; }
   60% { top: 0px; opacity: 1; }
   64% { top: 0px; opacity: 1; }
   76% { top: 0px; opacity: 1; z-index: 0; }
   80% { top: 325px; opacity: 0; z-index: 0; }
   81% { top: -325px; opacity: 0; z-index: -1; }
   100%{ top: -325px; opacity: 0; z-index: -1; }
}

@keyframes cyclefive {
   0%  { top: -325px; opacity: 0; }
   76% { top: -325px; opacity: 0; }
   80% { top: 0px; opacity: 1; }
   84% { top: 0px; opacity: 1; }
   96% { top: 0px; opacity: 1; z-index: 0; }
   100%{ top: 325px; opacity: 0; z-index: 0; }
}

/* For Chrome + Safari + Opera */
@-webkit-keyframes cycle {
   0%  { top: 0px; } /* When you start the slide, the first image is already visible */
   4%  { top: 0px; } /* Original Position */
   16% { top: 0px; opacity:1; z-index:0; } /* From 4% to 16 % = for 3 seconds the image is visible */
   20% { top: 325px; opacity: 0; z-index: 0; } /* From 16% to 20% = for 1 second exit image */
   21% { top: -325px; opacity: 0; z-index: -1; } /* Return to Original Position */
   92% { top: -325px; opacity: 0; z-index: 0; }
   96% { top: -325px; opacity: 0; } /* From 96% to 100% = for 1 second enter image*/
   100%{ top: 0px; opacity: 1; }
}

@-webkit-keyframes cycletwo {
   0%  { top: -325px; opacity: 0; } /* Original Position */
   16% { top: -325px; opacity: 0; }/* Starts moving after 16% to this position */
   20% { top: 0px; opacity: 1; }
   24% { top: 0px; opacity: 1; }  /* From 20% to 24% = for 1 second enter image*/
   36% { top: 0px; opacity: 1; z-index: 0; }   /* From 24% to 36 % = for 3 seconds the image is visible */
   40% { top: 325px; opacity: 0; z-index: 0; } /* From 36% to 40% = for 1 second exit image */
   41% { top: -325px; opacity: 0; z-index: -1; }   /* Return to Original Position */
   100%{ top: -325px; opacity: 0; z-index: -1; }
}

@-webkit-keyframes cyclethree {
   0%  { top: -325px; opacity: 0; }
   36% { top: -325px; opacity: 0; }
   40% { top: 0px; opacity: 1; }
   44% { top: 0px; opacity: 1; } 
   56% { top: 0px; opacity: 1; } 
   60% { top: 325px; opacity: 0; z-index: 0; }
   61% { top: -325px; opacity: 0; z-index: -1; } 
   100%{ top: -325px; opacity: 0; z-index: -1; }
}

@-webkit-keyframes cyclefour {
   0%  { top: -325px; opacity: 0; }
   56% { top: -325px; opacity: 0; }
   60% { top: 0px; opacity: 1; }
   64% { top: 0px; opacity: 1; }
   76% { top: 0px; opacity: 1; z-index: 0; }
   80% { top: 325px; opacity: 0; z-index: 0; }
   81% { top: -325px; opacity: 0; z-index: -1; }
   100%{ top: -325px; opacity: 0; z-index: -1; }
}

@-webkit-keyframes cyclefive {
   0%  { top: -325px; opacity: 0; }
   76% { top: -325px; opacity: 0; }
   80% { top: 0px; opacity: 1; }
   84% { top: 0px; opacity: 1; }
   96% { top: 0px; opacity: 1; z-index: 0; }
   100%{ top: 325px; opacity: 0; z-index: 0; }
}

/* Welcome Text-area formatting stuffs */
#welcome-text
{
    margin-top: 20px;
    margin-left: auto;
    margin-right: auto;
    width: 700px;
    text-align: left;
}

#small-print
{
    font-size: 12px;
} 
```

我已经用谷歌搜索了一段时间并尝试了一些东西，但我就是无法弄清楚。提前感谢您的帮助！

弥敦道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:00:47.290

您只是错过了周期名称：

```
#slider li.secondanimation {
   animation: cycletwo 25s linear infinite;
   -webkit-animation: ***cycle*** 25s linear infinite; // change to cycletwo
} 
```

等等。

# php - 将 Joomla 模板转换为普通的 HTML 模板

> ID：15390111
> 
> 赞同：-2
> 
> 时间：2013-03-13T15:52:20.127
> 
> 标签：php, html, joomla

我在问有关 Joomla 的问题。

我已经有了一个 Joomla 模板，我不打算将它用于 Joomla，

我想将它用作 HTML 模板，这样我就可以在不使用 joomla 的情况下轻松修改和编辑它。

所以我想将它转换为具有所有 CSS 样式、JavaScript 函数、扩展和 jquery 库的 HTML 模板，我不知道如何完成这个过程，任何想法都将不胜感激

是的，我将使用 php 来构建我的网站。

请在你的回答中具体。

我对 php、html 和 CSS 有很好的了解，所以请随时解释。:)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:01:34.227

我认为第一步必须是提取来自 Joomla 框架的所有生成的 HTML。为此，您必须在 Joomla 系统中安装此模板并将浏览器指向该 URL。我会使用 Firebug 检查正在运行的 Joomla 页面的源代码并将其保存到文本文件中。在第二步中，您可以将所需的所有 css 和 js 内容从 joomla 位置复制到新页面的位置。如果您使用文件菜单中的将页面另存为命令，也许浏览器也可以为您提供帮助——但到目前为止，如果结果令人满意，我还没有测试过。

# asp.net - 必应地图 AJAX 控件 7.0 连接到 SQL DB

> ID：15390122
> 
> 赞同：0
> 
> 时间：2013-03-13T15:52:49.680
> 
> 标签：asp.net, sql, ajax, asp.net-ajax, bing-maps

我正在尝试将 SQL 数据库链接到我网站上的 Bing 地图。我希望能够查询由用户搜索控制的数据库，以在地图上将搜索结果显示为带有简单信息框的图钉，其中包括数据库和查询中也可用的几个描述符。

我已经查看了 DataConnector ( [http://dataconnector.codeplex.com/](http://dataconnector.codeplex.com/) )，但是我想避免使用 Silverlight 并坚持使用 AJAX。如果可能的话，任何用 ASP 编写的连接器都会是一个加分项。我还看到了使用 GeoRSS 提要绘制数据的功能。也许这个解决方案在查询我的数据库时会起作用？

有没有人用最少的编码有一个很好的解决方案？我想保持它的美观和简单。

提前感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:53:35.947

[http://dataconnector.codeplex.com/](http://dataconnector.codeplex.com/)主页上列出的[http://ajaxmapdataconnector.codeplex.com/](http://ajaxmapdataconnector.codeplex.com/)将为您提供您想要的

# php - mysql(i)_real_escape_string，安全可靠吗？

> ID：15390125
> 
> 赞同：2
> 
> 时间：2013-03-13T15:52:54.313
> 
> 标签：php, mysql, mysqli, sql-injection

```
function Query()
{
    $args = func_get_args ();

    if (sizeof ($args) > 0)
    {
         $query = $args[0];

         for ($i = 1; $i < sizeof ($args); $i++)
                $query = preg_replace ("/\?/", "'" . mysql_real_escape_string ($args[$i]) . "'", $query, 1);
    }
    else
    {
          return FALSE;
    } 
```

我有这样的功能。基本上，我会这样查询：

```
$this->Query('SELECT * FROM USERS WHERE Username = ? AND Points < ?', $username, $points); 
```

它目前支持已弃用`mysql`的功能，但适应起来就像在我的班级中替换`mysqli`一样容易。`mysql``mysqli`

这是一种依靠 SQL 注入攻击的安全方法吗？每一个问号都会被自动清理`mysql_real_escape_string`，我以前从未遇到过问题，但我应该`mysqli_real_escape_string`用于清理吗？

我知道 mysqli 的准备好的语句，但`bindParam`对每个变量使用对我来说似乎有点矫枉过正。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:55:54.720

使用绑定参数*并不*过分，应该是必需的。它将更有效地转义并准备您的参数。

```
$stmt = mysqli_prepare($link, "INSERT INTO CountryLanguage VALUES (?, ?, ?, ?)");
mysqli_stmt_bind_param($stmt, 'sssd', $code, $language, $official, $percent);

$code = 'DEU';
$language = 'Bavarian';
$official = "F";
$percent = 11.2;

/* execute prepared statement */
mysqli_stmt_execute($stmt); 
```

这看起来*真的是矫枉过正吗？*

[文档](http://php.net/manual/en/mysqli-stmt.bind-param.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:33:40.587

今天真是美好的一天——连续第二次尝试创建一个合理的数据库抽象层。

> 我应该使用 mysqli_real_escape_string 进行消毒吗？

**没有。**
只是因为**这个功能不会清理任何东西。**

但是**要格式化**SQL 字符串文字，这个函数是必须的，不能避免或替换。
因此，您正在以正确的方式使用此函数，**仅格式化字符串并****无条件地**格式化它们。
因此，**只要**您可以使用 ? 标记以替换实际数据（并且 - 甚至让 nitpick 抱怨空闲 - 只要您使用`mysql(i)_set_charset()`函数设置 SQL 编码）。

如果有人称您的方法*被破坏*- 只需要求他们提供*完整*的证明代码片段以显示特定漏洞。

但是，让我提请您注意一些重要的事情。

1.  动态 SQL 查询部分**不仅**限于字符串。例如，这 2 个查询不适用于您的函数：

    ```
    SELECT * FROM table LIMIT ?,?
    SELECT * FROM table ORDER BY ? 
    ```

    只是因为数字和标识符需要不同的格式。
    所以，最好使用*类型提示的*占位符，告诉你的函数，应用哪种格式

2.  运行查询只是工作的一部分。你也需要得到结果。为什么不早点得到它们，而不用不必要的调用使你的代码变得臃肿呢？
3.  应该有一种插入文字的方法？在不解析它​​们的情况下标记到查询中。

请看一下[我的课程](https://github.com/colshrapnel/safemysql)，它建立在与您相同的原则上，但我在上面提到了一些改进。我希望您会发现借用一两个想法很有用或至少值得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:03:47.030

如果你现在使用 mysqli 而不是 mysql。最好使用mysqli_real_escape_string。请注意参数顺序已被修改。（% 和 _ 仍然没有转义）

# android - 如何停止其他应用程序播放我当前活动中的音乐？

> ID：15390126
> 
> 赞同：19
> 
> 时间：2013-03-13T15:52:57.637
> 
> 标签：android, android-music-player

在我的应用程序中，我试图制作一个按钮，单击该按钮会停止所有其他正在播放音乐的应用程序。我想要的类似于如果我通过一个音乐播放器播放音乐，如果我尝试通过第二个音乐播放器播放其他音乐，当前的音乐播放器停止，然后第二个开始。我们如何停止其他应用程序从当前活动/应用程序播放音乐？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-27T12:20:16.260

```
AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

// Request audio focus for playback
int result = am.requestAudioFocus(focusChangeListener,
// Use the music stream.
AudioManager.STREAM_MUSIC,
// Request permanent focus.
AudioManager.AUDIOFOCUS_GAIN);

if (result == AudioManager.AUDIOFOCUS_REQUEST_GRANTED) {
// other app had stopped playing song now , so u can do u stuff now .
} 
```

音频焦点依次分配给**请求它的每个应用程序**。这意味着**如果另一个应用程序请求音频焦点，您的应用程序将失去它**。您将通过您在请求音频焦点时注册的**音频焦点更改侦听器**的 onAudioFocusChange 处理程序通知您丢失音频焦点

```
 private OnAudioFocusChangeListener focusChangeListener =
          new OnAudioFocusChangeListener() {
                  public void onAudioFocusChange(int focusChange) {
                             AudioManager am =(AudioManager)getSystemService(Context.AUDIO_SERVICE);
                    switch (focusChange) {

                           case (AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK) :
                           // Lower the volume while ducking.
                           mediaPlayer.setVolume(0.2f, 0.2f);
                           break;
                           case (AudioManager.AUDIOFOCUS_LOSS_TRANSIENT) :
                           pause();
                           break;

                           case (AudioManager.AUDIOFOCUS_LOSS) :
                           stop();
                           ComponentName component =new ComponentName(AudioPlayerActivity.this,MediaControlReceiver.class);
                           am.unregisterMediaButtonEventReceiver(component);
                           break;

                           case (AudioManager.AUDIOFOCUS_GAIN) :
                           // Return the volume to normal and resume if paused.
                           mediaPlayer.setVolume(1f, 1f);
                           mediaPlayer.start();
                           break;
                           default: break;
}
}
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:56:21.397

您需要使用此处文档中的媒体播放器音频焦点实现：

[http://developer.android.com/guide/topics/media/mediaplayer.html#audiofocus](http://developer.android.com/guide/topics/media/mediaplayer.html#audiofocus)

# java - Java：按位与创建无符号字节

> ID：15390129
> 
> 赞同：1
> 
> 时间：2013-03-13T15:53:11.940
> 
> 标签：java, byte, bit-manipulation, unsigned

我想创建一个位数组，它将通过串行 RS232 发送到 Arduino 以控制输出引脚。

I'm doing this by creating checkboxes which when selected send a byte which each bit referring to a pin (on or off).

我已经使用按位与操作实现了前 8 个复选框的代码，并打印到系统输出以确认我得到了正确的位模式。

它适用于前 7 个复选框，但第 8 个复选框不起作用，因为 java 字节已签名并且不允许我将 '255' 分配给字节值。有没有解决的办法？

重要的代码是这一点：

```
 private void createOutputChars(){
    byte outputByte1 = 0;
    byte testByte = 1;
    for (int x = 0;x < 8;x++){
        if (digitalPinOutputArray[x].isSelected()) {
           outputByte1 += (byte) (testByte);
        }
        testByte = (byte) (testByte << 1);
    }

    printByteArray(outputByte1);

}

private void printByteArray(int inputByte) {
    // print out 1 or 0
    byte comparison = 0x1;
    for (int x = 0;x < 8;x++)
    {
        if ((inputByte & comparison) > 0) {
            System.out.print("1");
        }
        else {System.out.print("0");}
        comparison = (byte) (comparison << 1);
    }
    System.out.println();
} 
```

完整的可编译 Java 代码如下：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package my.ArduinoGUI;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class ArduinoGUI extends javax.swing.JFrame {

/**
 * Creates new form ArduinoGUI
 */
public ArduinoGUI() {
    initCustomComponents();
    initComponents();

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    buttonGroup1 = new javax.swing.ButtonGroup();
    jPanel1 = new javax.swing.JPanel();
    digitalPinPanel = new javax.swing.JPanel(new GridLayout(0, 3));
    jPanel3 = new javax.swing.JPanel(new GridLayout(0, 1));
    jPanel2 = new javax.swing.JPanel();
    jProgressBar1 = new javax.swing.JProgressBar();
    jProgressBar2 = new javax.swing.JProgressBar();
    jProgressBar3 = new javax.swing.JProgressBar();
    jProgressBar4 = new javax.swing.JProgressBar();
    jProgressBar5 = new javax.swing.JProgressBar();
    jProgressBar6 = new javax.swing.JProgressBar();
    jLabel1 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    jLabel5 = new javax.swing.JLabel();
    jLabel6 = new javax.swing.JLabel();
    jLabel7 = new javax.swing.JLabel();
    jLabel8 = new javax.swing.JLabel();
    jProgressBar7 = new javax.swing.JProgressBar();
    jProgressBar8 = new javax.swing.JProgressBar();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder("Outputs"));
    jPanel1.setName("Outputs"); // NOI18N

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 209, Short.MAX_VALUE)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 106, Short.MAX_VALUE)
    );

    digitalPinPanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Digital Pin State"));
    digitalPinPanel.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseReleased(java.awt.event.MouseEvent evt) {
            digitalPinPanelMouseReleased(evt);
        }
    });
    digitalPinLabelArray = new javax.swing.JLabel[digitalPinTotal];
    digitalPinRadioButtonArray = new javax.swing.JRadioButton[digitalPinTotal][2];
    digitalPinGroupArray = new javax.swing.ButtonGroup[digitalPinTotal];
    for(int x = 0; x < digitalPinTotal ; x++) {
        digitalPinGroupArray[x] = new javax.swing.ButtonGroup(); // populate button group
        digitalPinLabelArray[x] = new javax.swing.JLabel(); // populate label array
        digitalPinLabelArray[x].setText("Pin " + (x +2));
        digitalPinPanel.add(digitalPinLabelArray[x]); // add label to panel
        for(int y = 0; y < 2; y++){
            digitalPinRadioButtonArray[x][y] = new javax.swing.JRadioButton(); // populate radio button array
            digitalPinRadioButtonArray[x][y].addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent e)
                {
                    //Execute when button is pressed
                    System.out.println("You clicked the button");
                    checkOnOutputs();
                }
            }
        );

        if (y == 0) {digitalPinRadioButtonArray[x][y].setText("Input");}
        if (y == 1) {digitalPinRadioButtonArray[x][y].setText("Output"); digitalPinRadioButtonArray[x][y].setSelected(true);
        }

        digitalPinGroupArray[x].add(digitalPinRadioButtonArray[x][y]); // assign radio buttons to group
        digitalPinPanel.add(digitalPinRadioButtonArray[x][y]); // add buttons to panel
    }

}

jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder("Generated Boxes"));
digitalPinOutputArray = new javax.swing.JCheckBox[digitalPinTotal];

for(int x = 0; x < digitalPinTotal ; x++) {
    digitalPinOutputArray[x] = new javax.swing.JCheckBox();
    digitalPinOutputArray[x].setText("Output Pin " + (x+2));
    digitalPinOutputArray[x].addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e)
        {
            //Execute when button is pressed
            createOutputChars();
        }
    });
    jPanel3.add(digitalPinOutputArray[x]);

}

jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder("Analog Pin State"));

jProgressBar1.setMaximum(1024);
jProgressBar1.setToolTipText("");
jProgressBar1.setString(Integer.toString(jProgressBar1.getValue()));
jProgressBar1.setStringPainted(true);

jProgressBar2.setMaximum(1024);
jProgressBar2.setString(Integer.toString(jProgressBar2.getValue()));
jProgressBar2.setStringPainted(true);

jProgressBar3.setMaximum(1024);
jProgressBar3.setString(Integer.toString(jProgressBar3.getValue()));
jProgressBar3.setStringPainted(true);

jProgressBar4.setMaximum(1024);
jProgressBar4.setString(Integer.toString(jProgressBar4.getValue()));
jProgressBar4.setStringPainted(true);

jProgressBar5.setMaximum(1024);
jProgressBar5.setString(Integer.toString(jProgressBar5.getValue()));
jProgressBar5.setStringPainted(true);

jProgressBar6.setMaximum(1024);
jProgressBar6.setString(Integer.toString(jProgressBar6.getValue()));
jProgressBar6.setStringPainted(true);

jLabel1.setText("Pin A0");

jLabel2.setText("Pin A1");

jLabel3.setText("Pin A6");

jLabel4.setText("Pin A7");

jLabel5.setText("Pin A3");

jLabel6.setText("Pin A2");

jLabel7.setText("Pin A4");

jLabel8.setText("Pin A5");

jProgressBar7.setMaximum(1024);
jProgressBar7.setToolTipText("");
jProgressBar7.setString(Integer.toString(jProgressBar7.getValue()));
jProgressBar7.setStringPainted(true);

jProgressBar8.setMaximum(1024);
jProgressBar8.setToolTipText("");
jProgressBar8.setString(Integer.toString(jProgressBar8.getValue()));
jProgressBar8.setStringPainted(true);

javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
jPanel2.setLayout(jPanel2Layout);
jPanel2Layout.setHorizontalGroup(
    jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGroup(jPanel2Layout.createSequentialGroup()
        .addContainerGap()
        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel7)
                    .addComponent(jProgressBar1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jProgressBar5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jProgressBar6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel1)
                    .addComponent(jLabel2)
                    .addComponent(jProgressBar2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8)
                    .addComponent(jLabel5)
                    .addComponent(jLabel3)
                    .addComponent(jProgressBar7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jProgressBar3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(18, Short.MAX_VALUE))
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel6)
                    .addComponent(jProgressBar4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel4)
                    .addComponent(jProgressBar8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(0, 0, Short.MAX_VALUE))))
);
jPanel2Layout.setVerticalGroup(
    jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGroup(jPanel2Layout.createSequentialGroup()
        .addContainerGap()
        .addComponent(jLabel1)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jProgressBar1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addGap(4, 4, 4)
        .addComponent(jLabel2)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jProgressBar2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jLabel6)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
        .addComponent(jProgressBar3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jLabel5)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jProgressBar4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jLabel7)
        .addGap(9, 9, 9)
        .addComponent(jProgressBar5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jLabel8)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jProgressBar6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jLabel3)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jProgressBar7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jLabel4)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jProgressBar8, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addContainerGap(65, Short.MAX_VALUE))
);

javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
getContentPane().setLayout(layout);
layout.setHorizontalGroup(
    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGroup(layout.createSequentialGroup()
        .addContainerGap()
        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        .addGap(18, 18, 18)
        .addComponent(digitalPinPanel, javax.swing.GroupLayout.PREFERRED_SIZE, 159, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
        .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        .addContainerGap(306, Short.MAX_VALUE))
);
layout.setVerticalGroup(
    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
    .addGroup(layout.createSequentialGroup()
        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
            .addGroup(layout.createSequentialGroup()
                .addGap(23, 23, 23)
                .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(18, 18, 18)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(digitalPinPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
        .addContainerGap())
);

digitalPinPanel.getAccessibleContext().setAccessibleName("");

pack();
}// </editor-fold>

private void digitalPinPanelMouseReleased(java.awt.event.MouseEvent evt) {                                              

}                                             

private void checkOnOutputs() {
    // if output selected enable checkbox otherwise disable it
    for (int x = 0; x < digitalPinTotal; x++) {

        if (digitalPinRadioButtonArray[x][0].isSelected() == true) {
            digitalPinOutputArray[x].setEnabled(false);
        }

        if (digitalPinRadioButtonArray[x][1].isSelected() == true) {
            digitalPinOutputArray[x].setEnabled(true);
        }

    }
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Windows".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new ArduinoGUI().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.ButtonGroup buttonGroup1;
private javax.swing.JPanel digitalPinPanel;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel4;
private javax.swing.JLabel jLabel5;
private javax.swing.JLabel jLabel6;
private javax.swing.JLabel jLabel7;
private javax.swing.JLabel jLabel8;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JPanel jPanel3;
private javax.swing.JProgressBar jProgressBar1;
private javax.swing.JProgressBar jProgressBar2;
private javax.swing.JProgressBar jProgressBar3;
private javax.swing.JProgressBar jProgressBar4;
private javax.swing.JProgressBar jProgressBar5;
private javax.swing.JProgressBar jProgressBar6;
private javax.swing.JProgressBar jProgressBar7;
private javax.swing.JProgressBar jProgressBar8;
// End of variables declaration
private int digitalPinTotal = 12;
private int analogPinTotal = 8;
private javax.swing.JCheckBox[] digitalPinOutputArray;
private javax.swing.JRadioButton[][] digitalPinRadioButtonArray;
private javax.swing.ButtonGroup[] digitalPinGroupArray;
private javax.swing.JLabel[] digitalPinLabelArray;

private void initCustomComponents() {
    //throw new UnsupportedOperationException("Not yet implemented");
    // create checkbox array
}

private void createOutputChars(){
    byte outputByte1 = 0;
    byte testByte = 1;
    for (int x = 0;x < 8;x++){
        if (digitalPinOutputArray[x].isSelected()) {
           outputByte1 += (byte) (testByte);
        }
        testByte = (byte) (testByte << 1);
    }

    printByteArray(outputByte1);

}

private void printByteArray(int inputByte) {
    // print out 1 or 0
    byte comparison = 0x1;
    for (int x = 0;x < 8;x++)
    {
        if ((inputByte & comparison) > 0) {
            System.out.print("1");
        }
        else {System.out.print("0");}
        comparison = (byte) (comparison << 1);
    }
    System.out.println();
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:15:56.487

只需忽略 java 字节已签名的事实。它只对少数操作（最显着的关系运算符，如 >）产生影响。

位运算符 (|, & , ^) 提供与字节无符号时相同的位模式结果。

我只会将要控制的位数存储到组合框并像这样设置/读取位：

```
public static boolean isBitSet(byte b, int bitNo) {
    return (b & (1 << bitNo) != 0;
}

public static byte setBit(byte b, int bitNo) {
    return (byte) (b | (1 << bitNo));
}

public static byte clearBit(byte b, int bitNo) {
    return (byte) (b & (~(1 << bitNo)));
} 
```

虽然由于缺少无符号类型，直接将 C 代码移植到 java 通常会导致不同的行为，但差异并不是那么大。所有无符号类型*都*可以替换为有符号类型，它只需要一些注意力（和知识），因为某些操作需要以不同的方式表达。

顺便说一句：没有人会如此耐心地挖掘由 UI 构建器生成的代码墙。如果您有具体问题，请提供一个*简短*的示例，最好是可编译和可执行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:43:55.397

当您将字节用作 8 位值时，没有符号位。当您将字节用作数字时，它只是一个符号位。这是一个例子：

```
public class LearnByte
{
    public static void main(final String[] arguments)
    {
        byte hootBerry;

        hootBerry = 0x10;
        System.out.printf("0x%x\t%d\n", hootBerry, hootBerry);

        hootBerry |= 0x81;
        System.out.printf("0x%x\t%d\n", hootBerry, hootBerry);
    }
}
```

# wpf - 简单的 MahApps.Metro 应用程序未设置 GroupBox 样式

> ID：15390133
> 
> 赞同：0
> 
> 时间：2013-03-13T15:53:15.767
> 
> 标签：wpf, mahapps.metro

这是测试窗口的 XAML：

```
<controls:MetroWindow x:Class="MahGroupBoxTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
             Title="MainWindow" Height="350" Width="525">
    <controls:MetroWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>        
    </controls:MetroWindow.Resources>
    <Grid>
        <GroupBox Header="Test GroupBox" ></GroupBox>
    </Grid>
</controls:MetroWindow> 
```

结果如下：

![在此处输入图像描述](../Images/755c728505039a060835c942c9e0bb8d.png)

我期待演示中的风格`GroupBox`。我已经查看了项目中的问题，之前似乎没有人偶然发现过这一点。所以我认为问题可能出在我身上。有任何想法吗？

我正在使用 .Net 4.0 构建项目，MahApps 版本是 0.10.0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:43:22.643

我们在 GitHub 论坛上讨论过这个问题：

[https://github.com/MahApps/MahApps.Metro/issues/383](https://github.com/MahApps/MahApps.Metro/issues/383)

在我腾出时间发布另一个版本之前，您可以更新到预发布项目。

> 安装包 MahApps.Metro -Pre

# java - 搜索无序整数数组

> ID：15390136
> 
> 赞同：2
> 
> 时间：2013-03-13T15:53:28.350
> 
> 标签：java, arrays, search

搜索属于大型无序整数数组的整数元素的索引和值的最佳方法是什么？哪个是此过程的最佳搜索技术/算法？

```
int[] temp = new int[]{1,4,3,6,7,8,5,2,9,......} 
```

现在说，我想搜索元素“9”，我还需要获取该元素的索引。我的意思是，对数组元素进行排序并确定它在这里不起作用（因为我还需要跟踪元素的索引）。有什么建议么？顺便说一句，我正在研究java..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:57:31.200

如果您手动执行此操作，则可以迭代每个数组项：

```
public int indexOf(int search, int[] arr) {

    for(int i = 0; i < arr.length; i++) {
        if(arr[i] == search) {
            return i;
        }
    }

    return -1;

} 
```

如果你知道数组在多次搜索之间不会改变，你也可以使用 Map 缓存结果。只要你改变数组就清空缓存。

```
private Map<Integer, Integer> indexCache;

public int indexOf(int search, int[] arr) {

    Integer cachedIndex = indexCache.get(search);
    if(cachedIndex != null) return cachedIndex;

    for(int i = 0; i < arr.length; i++) {
        if(arr[i] == search) {
            indexCache.put(search, i);
            return i;
        }
    }

    return -1;

} 
```

实际上，您最好使用 Map 而不是完全使用数组来存储这些数据，因为它更适合键值查找。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:17:47.063

如果您需要多次搜索（同一个数组），您可能会创建一个临时结构，它结合了原始索引和值：

```
class Pair implements Comparable<Pair> {
    final int index;
    final int value;

    Pair(int index, int value) {
        this.index = index;
        this.value = value;
    }

    public int compareTo(Pair oth) {
        if (value < oth.value) return -1;
        else if (value > oth.value) return 1;
        else if (index < oth.index) return -1;
        else if (index > oth.index) return 1;
        else return 0;
    }
}

final ArrayList<Pair> list = new ArrayList<Pair>();

for (int k = 0; k < array.length; ++k) {
    list.add(new Pair(k, array[k]);
}

Arrays.sort(list); 
```

现在，`list`按值排序，然后按索引排序。我们现在可以使用二分搜索（例如）来查找元素。但是请注意，这仅是值得的，如果您搜索值的次数（现在`O(log n)`与 相对`O(n)`）支配了构建数组所需的时间（`(O(n log n)`由于排序）。

`HashMap`或者，您可以使用or构建一个类似索引的结构`TreeMap`，它将整数值映射到它在数组中的位置。在使用 的情况下`HashMap`，访问时间将在 左右`O(1)`，在使用的情况下，访问时间`TreeMap`将在 左右，`O(log n)`就像上面提出的二进制搜索方法一样。

如果您必须经常搜索数组，所有这些建议显然是值得的。

此外，您应该考虑，如果数组相当小，则使用简单的线性搜索（如其他人所建议的那样）实际上可能是最快的解决方案，因为所涉及的“常数”较低且数组组件的局部性很好。

因此，另一种方法可能是`Pair`在排序为两个整数数组（一个包含值，另一个包含索引）后再次解包结构：

```
int[] values = new int[list.size()];
int[] indices = new int[list.size()];
int pt = 0;

for (Pair p: list) {
    values[pt] = p.value;
    indices[pt] = p.index;
    pt += 1;
} 
```

现在您可以`values`使用二进制搜索来搜索数组：

```
int position = Arrays.binarySearch(values, valueToLookFor);
if (position >= 0) {

    // Found it!
    int index = indices[position];

    System.out.println("Value was originally stored in " + index);

} else {

    // Value not found
} 
```

请记住：最简单的解决方案（线性扫描）可能是最快的，具体取决于数组的大小和您需要搜索条目的次数。我实际上会先尝试一下，并且只使用一个更复杂的建议，如果它被证明是一个瓶颈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:00:43.530

增强：

```
 int[] temp = new int[]{1,4,3,6,7,8,5,2,9,......}
    for (int i : temp) {
      if (i == 9)
        // do something
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:57:04.147

[从头开始，一直持续到结束：然后停止。](http://www.quotationspage.com/quote/34976.html)

**刘易斯卡罗尔**

当然，除非你在到达终点之前找到你要找的东西。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-13T15:56:34.373

最少的编码是：

```
Arrays.asList(temp).indexOf(9) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-13T15:59:58.577

更好的方法是先对数组进行排序。

```
Arrays.sort(array);
Arrays.binarySearch(array, value); 
```

扫描未排序的数组需要线性时间“O(n)”。如果您不想对数组进行排序，可以试试这个：

```
public int find(int[] array, int value) {
        int index = -1;
        for (int i=0; i<array.length; i++) {
            if(array[i] == value) { index = i; }
        }
        return index;            
    } 
```

# java - 在范围内无法访问 MainActivity 类型的封闭实例

> ID：15390139
> 
> 赞同：2
> 
> 时间：2013-03-13T15:53:39.893
> 
> 标签：java, android, broadcastreceiver

我有这个代码，我想从类中获取**GPS**纬度和经度`GPSTracker`但是错误显示

```
 gps=new GPSTracker(MainActivity.this);
            gps.getLatitude(); 
```

**在范围内无法访问 MainActivity 类型的封闭实例**

完整代码 **BootComplete.java**

```
public class BootComplete extends BroadcastReceiver{

//private static final String PREFS_NAME = null;
public static final String PREFS_NAME = "MyPrefs";
String storedSimSerial;
String currentSimSerial;
String email;       //email address input by user, generate email and sent to this address
String mobileno;    //mobile number input by user, generate SMS and send to this address
String sms;         //generate sms to user
public GPSTracker gps;

@Override
public void onReceive(final Context context, Intent intent) {

    SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, 0);
    storedSimSerial = prefs.getString("storedSimSerial", "");
    mobileno = prefs.getString("trustedNum", "");
    email = prefs.getString("Email", "");
    TelephonyManager tm = (TelephonyManager) context.getSystemService(Service.TELEPHONY_SERVICE);
    currentSimSerial = tm.getSimSerialNumber();

    if(currentSimSerial != null){
        if(currentSimSerial.compareToIgnoreCase(storedSimSerial) == 0){

        }else{

            prefs = context.getApplicationContext().getSharedPreferences(PREFS_NAME, 0);
            SharedPreferences.Editor editor = prefs.edit();

            gps=new GPSTracker(MainActivity.this);
            gps.getLatitude();

            sms = "Alert!!!\nSim card changed.\nSim Serial Number:\n"+tm.getSimSerialNumber()+
                    "\nNetwork : "+ tm.getNetworkOperatorName()+"\nLatitude:\n" + gps.getLatitude();

            editor.putBoolean("SimChangeMail", true);
            editor.putString("subjectSimChange", "Your Sim card has changed.");
            editor.putString("bodySimChange","Sim Serial Number is :\n"+tm.getSimSerialNumber()+"\n" +
                    "This Sim serial number is unique and used to identify the owner.\nNetwork Operator is : "+
                    tm.getNetworkOperatorName()+
                    "\nThanks for using Mobile Security Application");
            editor.putString("SimChangeSms", sms);
            editor.commit();

            SmsManager sm = SmsManager.getDefault();
            String num = mobileno;
            sm.sendTextMessage(num, null, sms, null, null);
        }
    }else{

    }
}
} 
```

**GPSTracker.java**

```
public class GPSTracker extends Service implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                // First get location from Network Provider
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener
     * Calling this function will stop using GPS in your app
     * */
    public void stopUsingGPS(){
        if(locationManager != null){
            locationManager.removeUpdates(GPSTracker.this);
        }
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude(){
        if(location != null){
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude(){
        if(location != null){
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    /**
     * Function to show settings alert dialog
     * On pressing Settings button will lauch Settings Options
     * */
    public void showSettingsAlert(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int which) {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                mContext.startActivity(intent);
            }
        });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:01:20.460

`MainActivity.this`只有当 BootComplete 是 MainActivity 中的嵌套类时，您才能使用。

由于您的 GPSTracker 只需要一个上下文，您可以这样做

```
gps = new GPSTracker(context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T09:34:23.540

试试这个伙伴：

```
MainActivity mainAct = new MainActivity();

mainAct.YouClass = mainAct.new YourClass(); 
```

希望能帮助到你。

# ios - 数据总是空的......不知道为什么

> ID：15390142
> 
> 赞同：1
> 
> 时间：2013-03-13T15:53:41.270
> 
> 标签：ios, nsdata, nsurl, mp4

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"mp4"];

NSLog(@"Path: %@", path);

NSURL *url = [NSURL URLWithString:path];

NSLog(@"URL: %@", url);

NSData *data = [NSData dataWithContentsOfURL:url];

NSLog(@"Data exists? %@", data ? @"yes" : @"no"); 
```

test.mp4 在我的包中，但这始终是输出

```
2013-03-13 11:50:29.444 videoAppPrototype[28625:907] Path: /var/mobile/Applications/D66DD820-4DE1-4E45-9495-9BACF130E368/videoAppPrototype.app/test.mp4
2013-03-13 11:50:29.446 videoAppPrototype[28625:907] URL: /var/mobile/Applications/D66DD820-4DE1-4E45-9495-9BACF130E368/videoAppPrototype.app/test.mp4
2013-03-13 11:50:29.448 videoAppPrototype[28625:907] Data exists? no 
```

我不知道为什么，但数据永远不存在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T15:57:56.433

您正在检索文件路径，然后将其用于 URL。您要么想要检索 URL 并使用 URL：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"test" withExtension:@"mp4"];
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

或者您想检索路径并使用路径：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"mp4"];
NSData *data = [NSData dataWithContentsOfFile:path]; 
```

正如 bgoers 指出的那样，如果您有路径并且需要文件 URL，则可以使用`fileURLWithPath`，尽管我宁愿使用上述两种技术之一。无论如何，要使用`fileURLWithPath`它，如下所示：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"mp4"];
NSURL *url = [NSURL fileURLWithPath:path];
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

# java - 如何摆脱 Java Bean 对象列表中的重复值

> ID：15390147
> 
> 赞同：0
> 
> 时间：2013-03-13T15:53:53.017
> 
> 标签：java, database, jakarta-ee, javabeans

我正在使用 Java 和数据库查询开发基于 Web 的系统。

我有一个 bean 类，表示数据库中的一个表中的行 - RoadList。

这是类的结构：

```
public class RoadList 
{
  private String roadListNumber;
  private DateTime date;
  private String vehicleId;
  private Driver driver;
  private int startKm;
  private int probegKm;
  private int endKm;
  private int palenProbegKm;
  private DateTime startTime;
  private DateTime endTime;
  private BigDecimal driverWorkTime;
  private BigDecimal workTimeObekt;
  private BigDecimal chasoveRazhod;
  private int mcm;
  private BigDecimal tkm;
  private BigDecimal fualNalichnost;
  private int fuelFill;
  private int fuelGps;
  private int fuelOstatak;
  private String zabelejka;

  private List<CargoPlace> cargoPlaces;
} 
```

在我的案例中，最重要的部分是**RoadList 类的****Driver 驱动程序**属性

 **该系统的一项功能是为**特定驾驶员**制作月度报告，并在表格中显示每日结果。

所以我从数据库中查询，选择月份和驱动程序。然后我将结果填充到包含 RoadList 对象的 List 中，因为 RoadList 类映射了数据库中的表。

使用这种设计模式，我得到一个对象列表，其中属性驱动程序始终相同，因为报告仅适用于特定驱动程序。

**是否有更智能的方式来表示数据而无需重复驱动程序属性？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:57:49.767

这取决于您的代码，但如果您使用的是诸如 Hibernate 之类的 ORM 框架，则所有 bean 的驱动程序字段都将指向同一个 Driver 对象。所以你会有很多引用，但只有一个对象。

如果您自己滚动，请尝试创建一个 Driver 对象，并在您的 bean 中重用它。**

# oracle - 合并2个表忽略重复

> ID：15390149
> 
> 赞同：0
> 
> 时间：2013-03-13T15:54:03.800
> 
> 标签：oracle, merge, duplicates

我正在制作一个与性别相关的名字字典，所以我有一个主表可以说：

```
**name_dict a**
name   gender
=======================
jhon   male
jane   female
anna   female 
```

和一个源数据表，它有“重复”，我的意思是，同名，不同性别，如下所示：

```
**name_source b**
name      gender
=======================
cameron   male
cameron   female
anna      female
travis    male 
```

我想将这两个表与这个条件合并

1.  忽略 anna（在合并条件 a.name=b.name 中完成）
2.  忽略卡梅隆条目（这是我卡住的地方）

我将如何创建我的合并以便得到这个结果？

```
name      gender
----------------
jhon      male
jane      female
anna      female
travis    male 
```

我非常感谢您的所有帮助和建议！

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ----------------------- 所以，这是我用我的灵感创造的

```
merge into name_dictionary x using(
    select a.name,a.gender from name_source a, (select name,count(1) from name_source group by name having count(1)>1 order by count(1)) b
    where a.name=b.name
    ) y
    on (x.name=y.name)
    when not matched then
    insert (name,gender)
    values (y.name,y.gender) 
```

然后我说，让我们根据我们的朋友 Thomas Tschernich 的建议对其进行测试，因为我使用了：

```
insert into name_dictionary
    select name,gender
    from name_source t1
    where
        (t1.name, t1.gender) not in (
            select name, gender from name_dictionary
        )
        and
        (t1.name, t1.gender) not in (
            select t2.name, t2.gender
            from name_source t2
            join name_source t3 on (t2.name = t3.name and t2.gender != t3.gender)
        ); 
```

然后彼此对抗并得到：

```
QUERY      EXEC TIME    FINAL ROWS  PLAN DATA
merge      2 secs        96,070         MERGE STATEMENT ALL_ROWS Cost: 253 Bytes: 46,752 Cardinality: 974 
c-Insert    killed (31m)          ¿?            INSERT STATEMENT ALL_ROWS Cost: 24,656,135 Bytes: 1,051,700 Cardinality: 105,170 
```

这是我使用的表的信息：

```
Table          Initial Rows            Observations 
name_dictionary 3,097           The ones already inserted   
name_source     101,205         The ones i  want to filter and add to the name_dictionary 
```

（无法正确格式化，希望它可读）无论如何，我希望你能详细说明它是否正确或者我错过了什么，非常感谢！！！

---新发现如果我在合并中删除订单，成本会上升到 298；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:05:12.933

使用两个单独的插入可能比合并更容易。首先，插入表 a 中的所有条目，如下所示：

```
insert into name_new select * from name_dict 
```

然后，为您的第二个表执行条件插入，如下所示：

```
insert into name_new
    select *
    from name_source t1
    where
        (t1.name, t1.gender) not in (
            select name, gender from name_new
        )
        and
        (t1.name, t1.gender) not in (
            select t2.name, t2.gender
            from name_source t2
            join name_source t3 on (t2.name = t3.name and t2.gender != t3.gender)
        ) 
```

第一`where`部分整理了 anna-case，第二部分将整理出两个性别的重复项。

# arrays - 在 Excel 中多次计算多个项目

> ID：15390150
> 
> 赞同：0
> 
> 时间：2013-03-13T15:54:05.577
> 
> 标签：arrays, excel, sum, formula, countif

我正在尝试制作一小时内每分钟停止的车辆数量的条形图。我需要一张分钟（1 到 60）与车辆数量的表格来执行此操作。

但是，我的源数据采用以下形式：

```
Vehicle Arr. Min    Dep. Min    Duration
A       10          12             2
B       19          19             0
C       31          32             1    
D       41          44             3
E       42          42             0
F       54          55             1 
```

所以在上面的例子中：车辆 A 需要计入第 10、11 和 12 分钟。

车辆 D 和 E 都需要计算 42 分钟

我可以使用 COUNTIF 或 COUNTIFS 来计算单个实例，但我无法找到一种方法来计算几分钟内的车辆。

我不担心识别个别车辆。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:30:19.053

使用[countifs](http://office.microsoft.com/en-ca/excel-help/countifs-function-HA010047494.aspx)函数。

假设您正在检查第 3 分钟停止了多少，那么您可以使用

```
=COUNTIFS(A1:A7, "<=3", B1:B7, ">=3") 
```

并根据`A1:A7`您的 Arr 范围进行更改。最小值在`B1:B7`您的范围内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:01:17.243

在标题为 1 ... 60 的右侧添加 60 列，并在它们下方的行（列 E 和更多列）中有一个公式：

```
=IF(AND($B2<=E$1;$C2>=E$1);1;0) 
```

然后总结每一分钟列，你就有了你的计数。我不得不说 CAPSLOCKs 答案在较新的 Excel 版本中有效。我建议使用他的方法来寻找您正在寻找的更整洁的方式！

# php - pfsockopen 似乎不起作用？

> ID：15390159
> 
> 赞同：2
> 
> 时间：2013-03-13T15:54:17.573
> 
> 标签：php, persistence

**我的环境**

我正在尝试通过 CLI 在 Windows 7 中运行此 PHP 脚本。

**测试背景**

为了建立 SSH，必须发送和接收横幅消息。您将“SSH-2.0-whatever\r\n”发送到服务器，服务器将“SSH-2.0-whatever\r\n”发回给您（这也可以通过其他方式完成），然后您会收到一条消息包含服务器支持的算法。IE。

（脚本 1）

```
<?php
$fsock = fsockopen('shell.sourceforge.net', 22);
echo fgets($fsock, 1024);
fputs($fsock, "SSH-2.0-test\r\n");
echo fread($fsock, 1024); 
```

这是输出：

```
SSH-2.0-OpenSSH_5.3
  ♥♀
¶ólÆÆ§w↔F;ï÷╝ähºv   ~diffie-hellman-group-exchange-sha256,diffie-hellman-group-e
xchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1   ☼ssh-rsa,s
sh-dss   ¥aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des
-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysator
.liu.se   ¥aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3de
s-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour,rijndael-cbc@lysato
r.liu.se   ihmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-ripemd160
@openssh.com,hmac-sha1-96,hmac-md5-96   ihmac-md5,hmac-sha1,umac-64@openssh.com,
hmac-ripemd160,hmac-ripemd160@openssh.com,hmac-sha1-96,hmac-md5-96   §none,zlib@
openssh.com   §none,zlib@openssh.com 
```

**编码**

因此，鉴于上面的输出，这两个脚本似乎一个接一个地运行，应该给出相同的输出：

（脚本 2）

```
<?php
$fsock = pfsockopen('shell.sourceforge.net', 22);
echo fgets($fsock, 1024); 
```

（脚本 3）

```
<?php
$fsock = pfsockopen('shell.sourceforge.net', 22);
fputs($fsock, "SSH-2.0-test\r\n");
echo fread($fsock, 1024); 
```

不幸的是，脚本 1 不匹配脚本 2 和脚本 3 的组合。脚本 3 似乎正在运行，就好像脚本 2 从未运行过一样。输出：

```
SSH-2.0-OpenSSH_5.3

SSH-2.0-OpenSSH_5.3 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T22:03:42.433

该`pfsockopen()`功能是持久的`PHP process`。

**通过CLI SAPI** （如您的示例）每次执行脚本都会启动一个新的 PHP 进程。

当脚本 2 结束时，PHP 进程也结束并且**持久套接字关闭**。

当脚本 3 启动时，会创建一个新的 PHP 进程并初始化一个新的持久套接字。

因此，脚本 3 开始与远程服务器进行全新的“对话”，这就是您获得这些结果的原因。

有关持久性 php 套接字如何工作的非常好的描述：请参阅：[并发使用持久性 PHP 套接字](https://stackoverflow.com/questions/14268018/concurrent-use-of-a-persistent-php-socket)

# ios - 当 voip 应用程序在后台被 iOS 杀死时，有没有办法获得通知并做一些最后的工作？

> ID：15390165
> 
> 赞同：1
> 
> 时间：2013-03-13T15:54:26.810
> 
> 标签：ios, multithreading, voip

当 voip 应用程序（根据 Apple 的 voip 指南实施的应用程序）在后台被 iOS 杀死时，有没有办法获得通知并做一些最终（清理）工作？

我已经尝试过 UIApplicationDelegate 的方法，例如`applicationWillTerminate`： `applicationDidReceiveMemoryWarning:`和`dealloc`。似乎他们都没有被调用。所以我认为这是不可能的，苹果的文件似乎表明了这一点。

但后来我发现Skype似乎能够做到这一点。如果 iOS 全新启动 skype，它会显示 default.png 以及它的 logo png，但是当 skype 在后台时，被 ios 杀死并且您单击它再次启动它时，它只会显示 default.png。所以我认为Skype必须能够区分这2个杀戮之间的区别，并为后者做一些额外的工作，对吧？

更新：当您的内存不足时，voip 应用程序仍然会被杀死，只是比没有设置后台模式的应用程序更难。您需要启动一个使用大量内存的应用程序，例如“极品飞车”，播放一段时间，然后您的 voip 应用程序将被杀死。相信我，我已经尝试过很多次了。

谢谢！

秋浪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:09:42.663

被 iOS 杀死的应用程序不会被告知这一点。

甚至 VOIP 应用程序也只是从内存中提取出来的。

# ruby - 每当期望在块内失败时，是否可以在 RSpec 失败消息中附加一些文本？

> ID：15390167
> 
> 赞同：2
> 
> 时间：2013-03-13T15:54:28.837
> 
> 标签：ruby, rspec

说，我有一个像

```
(1..10).each do |number|
  c.should == d
  array1.empty? should_not be_false
  array2.empty? should be_true
  result.should eq(3)
end 
```

每当期望在此块内失败时，我想将文本附加`"failed at #{number}"`到失败消息中。

我可以这样做：

```
(1..10).each do |number|
  message = "failed at #{number}"
  c.should == d, message
  array1.empty? should_not be_false, message
  array2.empty? should be_true, message
  result.should eq(3), message
end 
```

但：

1.  它不干（我应该`, message`在每一行都写）
2.  此消息覆盖默认的 RSpec 消息。我想以某种方式将其附加到默认的 RSpec 消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:17:29.193

您可以使用另一条消息捕获并重新引发异常：

```
(1..10).each do |number|
  begin
    c.should == d
    array1.empty? should_not be_false
    array2.empty? should be_true
    result.should eq(3)
  rescue RSpec::Expectations::ExpectationNotMetError => e
    e.message << "failed at #{number}"
    raise e
  end
end 
```

# c# - C#类获取/设置IEnumerable变量语句错误

> ID：15390177
> 
> 赞同：0
> 
> 时间：2013-03-13T15:54:45.530
> 
> 标签：c#, getter-setter, ifnull

在获取和设置另一个类的枚举时，我在类属性中收到构建错误，该类具有自己的单独的 getter 和 setter。以下代码的 get {} 语句中有两个相同的错误。我不确定如何解决显示为的构建错误：“只有赋值、调用、递增、递减、等待和新对象表达式可以用作语句”。

```
 public class Data
    {

        private IEnumerable<Client> _clientData;

        private IEnumerable<Company> _companyData;

        public IEnumerable<Client> ClientData
        {
            get { _clientData ?? (_clientData = new List<Client>()); }
            set { _clientData = value; }
        }

        public IEnumerable<Company> CompanyData
        {
            get { _companyData ?? (_companyData = new List<Company>()); }
            set { _companyData = value; }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:55:46.910

您需要一个退货声明：

```
get { return _clientData ?? (_clientData = new List<Client>()); } 
```

即使您*没有*缺少 return 语句，您基本上也不能单独使用`??`（或实际上`? :`，或属性获取器）作为语句。这些是要在其他语句中使用的*表达式。*

例如：

```
String x = "Hello";

x.Length; // Invalid - just a property fetch can't be a statement
x.ToString(); // Pointless, but valid - method calls are statements
int y = x.Length; // Valid, assignment statement using property fetch 
```

# emacs - Emacs 和符号链接

> ID：15390178
> 
> 赞同：54
> 
> 时间：2013-03-13T15:54:47.020
> 
> 标签：emacs

假设我有一个符号链接`/home/.bashrc`指向其他地方的实际 .bashrc 文件：`/some/other/path/.bashrc`它位于 git 存储库下。

如果我`/home/.bashrc`在 Emacs 中打开，它会提示我：

```
Symbolic link to Git-controlled source file; follow link? (y or n) 
```

我通常输入`y`，因为我想编辑实际文件。但是，稍后，如果我执行`buffer-file-name`Emacs，则返回`/some/other/path/.bashrc`，而不是`/home/.bashrc`)。

我希望 Emacs**记住**我访问此文件的方式是通过符号链接。

换句话说，我希望我的符号链接对 Emacs 是透明的。部分原因是因为我有几个依赖于当前文件路径的 Emacs 宏，而这些宏认为我正在使用位于`/some/other/path`而不是`/home/`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-13T16:44:21.170

当它提示

```
Symbolic link to Git-controlled source file; follow link? (y or n) 
```

类型`n`。emacs 不会按照符号链接直接打开符号链接指向的文件，而是根据需要使用符号链接本身。

警告：这样做会阻止 emacs 的版本控制功能检测到目标的存储库并与之交互（如果有的话）。

如果您想更改默认行为，请查看`vc-follow-symlinks`自定义变量的文档。( `C-h v vc-follow-symlinks`)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2015-06-17T18:52:25.300

只是为了完整性，对于有疑问的人

`Symbolic link to Git-controlled source file; follow link? (y or n)`

但不一定想要 OP 想要的，这是来自的文档`C-h v vc-follow-symlinks`（从我的 Emacs 版本开始 - 查找您自己的 Emacs 以获取详细信息）：

> `vc-follow-symlinks`是 中定义的变量`vc-hooks.el`。它的价值是问
> 
> 文档：如果访问到受版本控制的文件的符号链接该怎么办。通过链接编辑这样的文件会绕过版本控制系统，这很危险并且可能不是您想要的。
> 
> 如果这个变量是 t，VC 会跟随链接访问真实文件，并在回显区告诉你。如果是 `ask'，VC 会要求确认是否应该点击链接。如果为零，则访问链接并显示警告。
> 
> 您可以自定义此变量。

结果是为了避免每次都被提示，你可以在你的`.emacs`集合中

```
(setq vc-follow-symlinks t) 
```

始终遵循符号链接（并直接编辑“实际”文件），或

```
(setq vc-follow-symlinks nil) 
```

始终像在符号链接本身一样编辑文件（这似乎工作正常——它不会删除符号链接或任何东西——但它不会让你在文件上使用与版本控制相关的东西）。我更喜欢前者（与OP不同）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-03T01:11:36.147

如果你不知道或不关心 Emacs 的`vc`包，那就去做吧

```
(setq vc-handled-backends nil) 
```

这完全禁用`vc`以及有关以下符号链接的烦人消息。

然后，您可能需要`find-file-visit-truename`根据是否要查找文件以遵循符号链接进行自定义。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-10T13:55:09.457

如果您有像我这样的用例，我只想使用热键访问某些文件而不询问，您可以使用`file-truename`解析文件中所有符号链接的功能，因此可以防止烦人的问题，而无需更改其他所有内容的默认值.

```
(global-set-key (kbd "<f7>") (lambda () (interactive)
  (find-file (file-truename user-init-file)))) 
```

# c - 如何在 Ubuntu 上安装 gtk 开发依赖项？

> ID：15390181
> 
> 赞同：38
> 
> 时间：2013-03-13T15:54:55.390
> 
> 标签：c, ubuntu, gtk

我有来自[GTK 教程](https://developer.gnome.org/gtk-tutorial/2.24/c39.html)的代码`base.c`。

我在**Ubuntu**上工作，当我使用

```
$ gcc base.c -o base `pkg-config --cflags --libs gtk+-2.0` 
```

我收到以下*错误*

```
Package gtk+-2.0 was not found in the pkg-config search path.
Perhaps you should add the directory containing `gtk+-2.0.pc' to the PKG_CONFIG_PATH environment variable
No package 'gtk+-2.0' found
base.c:1:20: fatal error: gtk/gtk.h: No such file or directory compilation terminated. 
```

作为*linux*新手，有人可以帮助我设置环境以便我可以成功*编译/运行*程序吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-13T15:57:20.693

```
$ sudo apt-get install libgtk2.0-dev 
```

一般来说，建立东西的基础`libfoo`，你需要`libfoo-dev`。

此外，要安装构建包所需的任何东西，例如`gedit`，您可以运行：

```
$ sudo apt-get build-dep gedit 
```

搜索[http://packages.ubuntu.com/](http://packages.ubuntu.com/)或 Synaptic 会有所帮助。

# php - 如何取较大的值并在 PHP 查询中使用

> ID：15390185
> 
> 赞同：0
> 
> 时间：2013-03-13T15:55:10.613
> 
> 标签：php

我在房地产搜索表单上有一个字段，要求提供从最小到最大卧室数量。返回搜索结果的 PHP 查询提取是；

```
//check bedrooms
if(!empty($_GET["room_no_min"]) && is_numeric($_GET["room_no_min"])){
     $query[] = "'No_Bedrooms' >= '".$_GET["room_no_min"]."'";
     $room_min_val = $_GET["room_no_min"];
}
if(!empty($_GET["room_no_max"])){
     $query[] = "'No_Bedrooms' <= '".$_GET["room_no_max"]."'";
     $room_max_val = $_GET["room_no_max"];
} 
```

这很好，但我希望它考虑到是否有人输入值 5（最小​​值）到 2（最大值），即与他们假设的相反。我不想使用验证我宁愿查询可能类似于`from =>min(room_no_min,room_no_max)`但`<= max(room_no_min,room_no_max)`不确定如何重新编写查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:00:01.063

为什么不使用 PHP 的 max() 和 min() 函数？

```
$room_min_val = min($_GET["room_no_min"], $_GET["room_no_max"]);
$room_max_val = max($_GET["room_no_min"], $_GET["room_no_max"]); 
```

* * *

更新代码：

```
if(!empty($_GET["room_no_min"]) && is_numeric($_GET["room_no_min"])){
     $room_min_val = $_GET["room_no_min"];
} // else throw an error maybe?
if(!empty($_GET["room_no_max"]) && is_numeric($_GET["room_no_max"])){
     $room_max_val = $_GET["room_no_max"];
} // else throw an error maybe?

$room_min_val = min($_GET["room_no_min"], $_GET["room_no_max"]);
$room_max_val = max($_GET["room_no_min"], $_GET["room_no_max"]);

$query[] = "'No_Bedrooms' >= '".$room_min_val."'";
$query[] = "'No_Bedrooms' <= '".$room_max_val."'"; 
```

# mysql - InnoDB 表批量插入

> ID：15390187
> 
> 赞同：0
> 
> 时间：2013-03-13T15:55:21.330
> 
> 标签：mysql, insert, innodb

我有一个 MySQL 数据表，其中包含大约 50 亿行。我们需要通过读取来对这些数据进行计算，计算出的数据（原始数据的标准化形式）需要写入另一个 InnoDB 表。

我们目前的设置是一个虚拟云，其中有一台机器和数据库，因此机器与数据库的连接非常快。

对数据进行的计算（以及读取）非常快，整个过程的瓶颈在于将标准化数据插入 InnoDB 表（标准化数据包含一些指标，虽然不长，但减慢插入）。

不幸的是，我们无法修改某些系统变量，例如 innodb_log_file_size（我们使用的是 Amazon AWS），这将有助于提高插入性能。

将所有这些数据推送到 MySQL 上最好的方法是什么？由于计算过程很简单，我几乎可以编写一个 Python 脚本来获取标准化数据并以任何格式输出。在计算发生时动态插入这些数据非常缓慢，并且随着时间的推移变得更慢。

我想问题是，将批量数据插入 InnoDB 表的最佳过程是什么（就输入格式和实际导入而言）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:37:16.423

我的第一直觉是要求您调整缓冲区变量。但是正如您所说，您不能更改很多服务器配置参数，这是另一种选择...

进行计算并将输出转储到 csv 中。为此，您将使用“SELECT ... INTO OUTFILE”命令。然后您将连接到目标 InnoDB，并执行 'set autocommit=0' ，然后执行 'load data local infile ' 将此 CSV 加载回目标表中。最后将自动提交转回 1。

我可以建议许多其他选项（例如正确的分区模式、主键顺序插入等），但我需要知道您的 DB 的结构、传入的数据集和索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:42:32.550

在这种情况下，由于您没有在基表上执行任何操作 - 并且最有可能仅在预定间隔基础上更新辅助 innodb 表中的数据，因此我将执行以下步骤

1.  使用**--where** (--where "id>91919" 或 --where "update_time > now() - interval 1 hour ") 选项进行 mysqldump。如果可能的话也避免锁定表
2.  将数据恢复到临时数据库表
3.  在临时数据库上进行计算并更新辅助表
4.  删除创建的临时数据库/表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T01:35:24.243

你的是时间序列数据吗？上周有类似的问题。加载分区，它变得更快。我还从[http://www.ajaydivakaran.com/2013/03/12/mysql-innodb-when-inserts-start-slowing-down/](http://www.ajaydivakaran.com/2013/03/12/mysql-innodb-when-inserts-start-slowing-down/)优化了我的设置 但是如果你不能优化，那么使用分区来更快地插入。

# python - SQL/Python 创建表错误

> ID：15390190
> 
> 赞同：0
> 
> 时间：2013-03-13T15:55:26.947
> 
> 标签：python, mysql, sql

当我试图创建这个表时，我遇到了一个奇怪的错误......当我回溯它时，我在第 5 行什么都没有？谁能帮助我如何跟踪此错误？

导入设置从数据库导入mysql.connector 导入login_info 导入日期时间作为dt

```
def main():
    db = mysql.connector.Connect(**login_info)
    cursor = db.cursor()
    sql =('DROP TABLE IF EXISTS messages')
    cursor.execute(sql)
    db.commit()

message_table = """\
    CREATE TABLE messages(
        msgID INTEGER AUTO_INCREMENT PRIMARY KEY,
        message VARCHAR(500) DEFAULT NULL,
        subject VARCHAR(500) DEFAULT NULL,
       )"""
cursor.execute(message_table)
db.commit() 
```

Error == mysql.connector.errors.ProgrammingError: 1064: 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 ')' 附近使用正确的语法

我可以在交互式窗口中连接 ot SQl 没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:56:56.380

尝试删除第`,`4 行末尾的 。

# facebook - Facebook 喜欢 og：带有 svg 的图像

> ID：15390201
> 
> 赞同：7
> 
> 时间：2013-03-13T15:55:50.530
> 
> 标签：facebook, facebook-like

我想用 facebook 上的like 按钮分享一个 svg 图像。这可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-19T17:24:44.113

不可以。图片必须是 jpg 或 png。

# jquery - 循环比较来自 2 列的元素

> ID：15390202
> 
> 赞同：0
> 
> 时间：2013-03-13T15:55:54.140
> 
> 标签：jquery, loops, compare

我有两列，其中一些包含“parentandsub”类的元素。

我想遍历 A 列中的每个 parentandsub 元素，并检查它是否在 B 列中。如果不是，那么我想在 A 列中突出显示该元素。

这是我的代码，但它不起作用：

```
$(".column2 .parentandsub").each(function(){

    if ($(".column1 .parentandsub:contains('" + $(this).html() + "')").length == 0) {
     $(this).wrap('<span class="parentandsubhilite" />');
    }

}); 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:02:24.020

尝试：

```
$(".column2 .parentandsub").each(function(index){
    if ($(".column1 .parentandsub:nth-child("+(index+1)+"):contains("+$(this).html()+")").length== 0) {
       $(this).wrap('<span class="parentandsubhilite" />');
    }
}); 
```

# sql - 从多个重复记录中检索单个唯一记录

> ID：15390204
> 
> 赞同：0
> 
> 时间：2013-03-13T15:55:55.800
> 
> 标签：sql, oracle, select, distinct

如果我有以下两个表

饭店桌

```
 HOTELID   HOTEL NAME
  1        PARK HOTEL
  2        PARK PLAZA
  3        HOLIDAY IN 
```

房间表

```
HOTELID    ROOMINUMBER  ROOMTYPE  FLOORNUMBER  ROOMRATE
1          111          SINGLE         1          100
1          111          DOUBLE         1          200
1          113          DOUBLE         2          200
2          111          FAMILY         2          300 
```

我想列出名称中包含单词的每家酒店的酒店名称、房间类型和房价`PARK`，如果同一酒店的房间类型和价格相同，我只想列出一次。以下是我的代码......我需要一个子查询，我该如何绕过这个查询？

```
SELECT DISTINCT HOTELNAME, 
       DISTINCT ROOMTYPE, 
       DISTINCT ROOMRATE
  FROM ROOM, 
       HOTEL
 WHERE HOTELNAME LIKE '%PARK%'
GROUP BY HOTEL.HOTELNAME, 
         ROOMTYPE; 
```

输出应该是

```
HOTEL NAME      ROOMTYPE   ROOMMATE
PARK HOTEL       SINGLE     100
PARK HOTEL       DOUBLE     200
PARK PLAZA       FAMILY     300 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:00:40.603

另外一个选项：

```
SELECT DISTINCT 
    HOTELNAME, 
    ROOMTYPE, 
    ROOMRATE
FROM 
    ROOM 
    JOIN HOTEL
       ON ROOM.HOTEL_ID = HOTEL.HOTEL_ID
WHERE 
    HOTELNAME LIKE '%PARK%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:59:13.063

您选择的所有项目都必须出现在分组依据中。

您需要根据酒店 ID 将两张表实际连接在一起。

```
SELECT H.HOTELNAME, R.ROOMTYPE, R.ROOMRATE
FROM HOTEL H INNER JOIN ROOM R ON H,HOTELID = R.HOTELID
WHERE H.HOTELNAME LIKE '%PARK%'
GROUP BY H.HOTELNAME, R.ROOMTYPE, R.ROOMRATE 
```

# mysql - 向查询中的变量添加 +5 天的日期范围

> ID：15390207
> 
> 赞同：0
> 
> 时间：2013-03-13T15:55:58.817
> 
> 标签：mysql, sql, database

这是我想要做的。

我想以我的约会为例。`2013-03-13`从那个日期开始，我想在我的表中搜索一列，但是..我只想搜索在我的变量（上图）和我正在搜索的日期之间有 5 天或更长时间的日期。

因此，如果我遇到`2013-03-10`，那将是无效的，但如果我遇到，那么它将在我的查询中有效，因为从我的变量中`2013-03-08`它是五天或更长时间。`$setupStart`我将如何将其放入查询中？我只是想确保在我搜索`ts_inventory`. `Date`列和数量列。

到目前为止，这是我的查询。

```
$setupStart = 2013-03-13;

SELECT * FROM `ts_inventory` WHERE `ts_inventory`.`Quantity` > 0 AND '$setupStart' 
```

编辑：我快接近了..这是我现在的查询，但由于某种原因，4 月的日期没有出现。它在它经过的列中的日期上增加了 5 天，然后检查它是否小于 setupStart。

编辑：

该查询确实有效。我将在下面发布完整的查询。

```
SELECT * FROM `ts_inventory` WHERE `ts_inventory`.`Quantity` > 0 AND `ts_inventory`.`LastDate` + INTERVAL 5 DAY <= '2013-03-13' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:58:25.373

```
SELECT * 
FROM `ts_inventory` 
WHERE `ts_inventory`.`Quantity` > 0 
AND datefield BETWEEN '$setupStart' AND '$setupStart' + INTERVAL 5 DAY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:12:59.710

我需要在这里做几个步骤。

1.  取表中的日期，每个日期加上 5 天。

2.  然后我接受了这个结果，并确保它小于或等于我的开始日期。

3.  终于让它工作了！代码如下。

    选择 * 从`ts_inventory`哪里`ts_inventory`。`Quantity`> 0 和`ts_inventory`. `LastDate`+ 间隔 5 天 <= '$setupStart'

# svn - 是否可以撤消“svn checkout”

> ID：15390208
> 
> 赞同：1
> 
> 时间：2013-03-13T15:55:59.423
> 
> 标签：svn

我已经搜索了有关我的问题的建议问题，但似乎没有什么可以回答我遇到的问题。

我（愚蠢地）运行了“svn checkout http_file_path_to_server”，它修改了我在本地处理的所有内容。

有没有办法恢复结帐并将我的文件恢复到以前的本地版本？我没有做出任何承诺。

# java - Android 无法将触摸事件分派给 Spinner

> ID：15390210
> 
> 赞同：0
> 
> 时间：2013-03-13T15:56:05.473
> 
> 标签：java, android, junit, spinner, motionevent

我正在编写一个 Android JUnit 测试，它遍历 MotionEvents 列表并将它们分派到被测活动。对于大多数事件，我可以只使用 activity.dispatchTouchEvent(MotionEvent) 方法。对于对话框，我必须在内存中获取对话框并直接调用dispatchTouchEvent。我在使用 android.widget.Spinner 对象时遇到问题。dispatchTouchEvent 方法似乎被忽略了。

例如，一个 Spinner (Mode = DIALOG) 出现在屏幕上，测试代码正在调度一个具有正确 (x, y) 坐标和动作（ACTION_DOWN 后跟 ACTION_UP）的 MotionEvent：

```
Spinner spinner = (Spinner) activity.findViewById(R.id.spinnerId);
spinner.dispatchTouchEvent(motionEvent); //returns true, but Spinner has not been touched

View v = spinner.getChildAt(0);
v.dispatchTouchEvent(motionEvent);  //returns false, Spinner has not been touched 
```

目前，我正在使用 Robotium 直接单击 Spinner，但这不是长期需要的。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:18:44.630

因此，也许您可​​以在 Activity 级别上执行调度事件，例如传递为 x,y 的微调器中心（Robotium 这样做，但通过 Instrumentation 而不是通过活动传递motionEvent）。

# mysql - mysql中的3个复合键

> ID：15390213
> 
> 赞同：1
> 
> 时间：2013-03-13T15:56:09.743
> 
> 标签：mysql

我想在 MySql 中使用 3 个复合键？这个可以吗？

```
create table lecturer(
  lec_id varchar(6) not null,
  lec_name varchar(18) 
  primary key(lec_id)
);

create table subject(
  sub_code varchar(6) not null,
  sub_name varchar(18) 
  primary key(sub_code)
);

create table lecDetails(
  lec_id varchar(6) not null,
  sub_code varchar(6) not null,
  sem varchar(6) not null, 
  primary key(lec_id,sub_code,sem)
  FOREIGN KEY (lec_id) REFERENCES lecturer(lec_id)
  ON UPDATE CASCADE ON DELETE CASCADE,
  FOREIGN KEY (sub_code) REFERENCES subject(sube_code)
  ON UPDATE CASCADE ON DELETE CASCADE
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:00:20.207

使用包含引用列的复合主键是完全**可以接受的。**如果有`SET NULL`操作或引用的列是是不可接受的`NULL`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:02:17.543

好吧，这取决于您的表的结构和将要存储的大约记录数，以及您的表将被访问的命中/事务的数量。

对于存储的讲座信息信息，我认为它不会导致性能下降，它可能会减慢`SELECT`命令速度但不会太多。

*   [在这里](https://stackoverflow.com/questions/1460465/composite-primary-key-performance-drawback-in-mysql)阅读的一个好问题

# css - 导航样式在 IE8 中不起作用

> ID：15390216
> 
> 赞同：1
> 
> 时间：2013-03-13T15:56:13.483
> 
> 标签：css, html, internet-explorer-8

的样式`<nav>`在内部页面上的 IE8 中不起作用。奇怪的是它在主页上几乎可以完美运行，除了它是向右而不是向下。

网站：searchtransparency(dot)net/trc/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:59:29.063

IE8[不理解](http://caniuse.com/#search=nav)HTML5 元素。您可以使用[html5shiv](https://github.com/aFarkas/html5shiv/)让 IE8 “看到”这些元素。Paul Irish 还写了一篇关于 html5shiv的[博客文章。](http://paulirish.com/2011/the-history-of-the-html5-shiv/)

要使用它，只需将以下内容添加到您的页面：

```
<!--[if lt IE 9]>
<script src="dist/html5shiv.js"></script>
<![endif]--> 
```

# java - 如果我的所有 3 个文本字段都有输入，我的 JButton 只会在我的文本字段上设置.Text

> ID：15390220
> 
> 赞同：0
> 
> 时间：2013-03-13T15:56:23.530
> 
> 标签：java, swing, user-interface, jbutton, textfield

每当我在计算器上单击 1 时，它应该执行 t1.setText("1"); 但它只有在我的 textfield1、textfield2、textfield3 上已经有文本时才会这样做，如果没有，它会产生错误，这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
public class Calculator extends JFrame implements ActionListener
{
GridLayout layout = new GridLayout(4, 2);
JLabel l1 = new JLabel("Number 1:");
JLabel l2 = new JLabel("Number 2:");
JLabel l3 = new JLabel("Answer:"); 
JTextField t1 = new JTextField(30);
JTextField t2 = new JTextField(30);
JTextField t3 = new JTextField(30);
JPanel botleft = new JPanel();
JPanel botright = new JPanel();
JButton clear = new JButton("Clear");
JButton n0 = new JButton("0");
JButton n1b = new JButton("1");
JButton n2 = new JButton("2");
JButton n3 = new JButton("3");
JButton n4 = new JButton("4");
JButton n5 = new JButton("5");
JButton n6 = new JButton("6");
JButton n7 = new JButton("7");
JButton n8 = new JButton("8");
JButton n9 = new JButton("9");
JButton add = new JButton("+");
JButton sub = new JButton("-");
JButton mul = new JButton("*");
JButton div = new JButton("/");
JButton equals = new JButton("="); 
Float ans;

{
botleft.setLayout(new GridLayout(4,2));
botright.setLayout(new GridLayout(4,2));
botleft.add(n1b);
botleft.add(n2);
botright.add(n3);
botright.add(add);
botleft.add(n4);
botleft.add(n5);
botright.add(n6);
botright.add(sub);
botleft.add(n7);
botleft.add(n8);
botright.add(n9);
botright.add(mul);
botleft.add(n0);
botleft.add(clear);
botright.add(equals);
botright.add(div);
}

public Calculator()
{
super("Calculator");
setSize(300, 300);
add(l1);
add(t1);
add(l2);
add(t2);
add(l3);
add(t3);
add(botleft);
add(botright);
setLayout(layout);
add.addActionListener(this);
sub.addActionListener(this);
mul.addActionListener(this);
div.addActionListener(this);
n1b.addActionListener(this);
setVisible(true);
}

public void actionPerformed(ActionEvent e)
{
String n1 = t1.getText();
String n2 = t2.getText();
Float num1 = Float.parseFloat(n1);
Float num2 = Float.parseFloat(n2); 
Object clicked = e.getSource();

if (n1b == clicked)
{
t1.setText("1");
}

else if(add == clicked)
{
t3.setText(String.valueOf(num1+num2));
}
else if(sub == clicked)
{
t3.setText(String.valueOf(num1-num2));
}
else if(mul == clicked)
{
t3.setText(String.valueOf(num1*num2));
}
else
{
if(num2 == 0)
t3.setText("Can't Divide By Zero");
else
t3.setText(String.valueOf(num1/num2));
}
}
} 
```

这是我的另一堂课：

```
public class CalcReader
{
public static void main(String[] args)
{
Calculator calc = new Calculator();
calc.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:05:36.817

在将源对象放入`JTextField` `t1` *.* `ActionListener`如果此字段为空（或包含无效号码），您将`NumberFormatException`在可以拨打电话之前得到一个`t1.setText("1")`。*首先*尝试这样做：

```
Object clicked = e.getSource();
if (n1b == clicked) {
   t1.setText("1");
} else if // handle all other conditions... 
```

*另外：*操作动作（ ， 等）的性质`+`是`-`完全不同的，每个动作`JButton`都有自己的`ActionListener`，而不是试图破译点击了哪个按钮。

# tsql - T-SQL：按类别过滤，包括 Subs

> ID：15390229
> 
> 赞同：0
> 
> 时间：2013-03-13T15:56:43.347
> 
> 标签：tsql, sql-server-2008-r2

我的数据库中有以下表格：

```
Categories:
- Id (PK)
- ParentId (FK to Categories.Id)
- Name

Products:
- Id (PK)
- CategoryId (FK to Categories.Id)
- Name 
```

我想编写一个查询来获取一个类别中的所有产品（给定一个类别 ID），包括它的子类别及其子类别等。请注意，我使用的是 SQL Server 2008 R2。

我相信很多人以前都遇到过这个问题，但我想不出要寻找什么来解决。感谢帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:08:52.620

您可以使用[Common Table Expressions](http://www.4guysfromrolla.com/webtech/071906-1.shtml)进行类似递归的查询。

```
WITH CategoryHierarchy (CategoryId, ParentId) AS
(
  SELECT Id, ParentId FROM Categories
  -- This is the categoryId:
  WHERE Id = 1

  UNION ALL

  SELECT c.Id as CategoryId, c.ParentId
  FROM Categories c
  INNER JOIN CategoryHierarchy cr ON cr.CategoryId = c.ParentId

)
SELECT * FROM Products p
WHERE p.CategoryId IN (SELECT c.CategoryID FROM CategoryHierarchy c) 
```

该解决方案的 SqlFiddle：[http ://sqlfiddle.com/#!6/a0910/1](http://sqlfiddle.com/#!6/a0910/1)

# spring - 在 WeblogicServer 中部署 Web 应用程序时出错

> ID：15390232
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:56:54.750
> 
> 标签：spring, weblogic11g

我正在将我的 Web 项目部署到 Weblogic Server。但应用程序状态始终是“准备好的”。我无法启动应用程序。日志文件说：

2013 年 3 月 13 日晚上 10:44:56 ICT 警告 Deployer admin-PC myserver [STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)' WLS Kernel 1363189496796 BEA-149004 检测到故障同时启动应用程序“public_html”的启动任务。

<>

2013 年 3 月 13 日晚上 10:44:56 ICT 警告 Deployer admin-PC myserver [STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)' WLS Kernel 1363189496797 BEA-149078 Stack trace for message 149004weblogic.application.ModuleException：

```
at weblogic.servlet.internal.WebAppModule.prepare(WebAppModule.java:393)
at weblogic.application.internal.flow.ScopedModuleDriver.prepare(ScopedModuleDriver.java:176)
at weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199)
at weblogic.application.internal.flow.DeploymentCallbackFlow$1.next(DeploymentCallbackFlow.java:517)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:159)
at weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:45)
at weblogic.application.internal.BaseDeployment$1.next(BaseDeployment.java:613)
at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
at weblogic.application.internal.BaseDeployment.prepare(BaseDeployment.java:184)
at weblogic.application.internal.SingleModuleDeployment.prepare(SingleModuleDeployment.java:43)
at weblogic.application.internal.DeploymentStateChecker.prepare(DeploymentStateChecker.java:154)
at weblogic.deploy.internal.targetserver.AppContainerInvoker.prepare(AppContainerInvoker.java:60)
at weblogic.deploy.internal.targetserver.operations.ActivateOperation.createAndPrepareContainer(ActivateOperation.java:207)
at weblogic.deploy.internal.targetserver.operations.StartOperation.createAndPrepareContainer(StartOperation.java:85)
at weblogic.deploy.internal.targetserver.operations.StartOperation.doPrepare(StartOperation.java:98)
at weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217)
at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747)
at weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216)
at weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250)
at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13)
at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46)
at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:176) 
```

引起：java.lang.ClassNotFoundException: org.springframework.web.util.IntrospectorCleanupListener 在 weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:297) 在 weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java: 270) 在 weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:64) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:307) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:248) 在weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:179) 在 weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:52) 在 weblogic.servlet.internal.EventsManager.registerEventListeners(EventsManager.java:123)在 weblogic.servlet.internal.EventsManager。registerPreparePhaseListeners(EventsManager.java:71) 在 weblogic.servlet.internal.WebAppServletContext.initContextListeners(WebAppServletContext.java:1852) 在 weblogic.servlet.internal.WebAppServletContext.prepare(WebAppServletContext.java:1196) 在 weblogic.servlet.internal.HttpServer .doPostContextInit(HttpServer.java:453) 在 weblogic.servlet.internal.HttpServer.loadWebApp(HttpServer.java:428) 在 weblogic.servlet.internal.WebAppModule.registerWebApp(WebAppModule.java:972) 在 weblogic.servlet.internal。 WebAppModule.prepare(WebAppModule.java:382) 在 weblogic.application.internal.flow.ScopedModuleDriver.prepare(ScopedModuleDriver.java:176) 在 weblogic.application.internal.flow.ModuleListenerInvoker.prepare(ModuleListenerInvoker.java:199) 在 weblogic .application.internal.flow.DeploymentCallbackFlow$1。next(DeploymentCallbackFlow.java:517) 在 weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) 在 weblogic.application.internal.flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:159) 在 weblogic.application.internal .flow.DeploymentCallbackFlow.prepare(DeploymentCallbackFlow.java:45) 在 weblogic.application.internal.BaseDeployment$1.next(BaseDeployment.java:613) 在 weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52) 在 weblogic .application.internal.BaseDeployment.prepare(BaseDeployment.java:184) 在 weblogic.application.internal.SingleModuleDeployment.prepare(SingleModuleDeployment.java:43) 在 weblogic.application.internal.DeploymentStateChecker.prepare(DeploymentStateChecker.java:154) 在weblogic.deploy.internal.targetserver。AppContainerInvoker.prepare(AppContainerInvoker.java:60) 在 weblogic.deploy.internal.targetserver.operations.ActivateOperation.createAndPrepareContainer(ActivateOperation.java:207) 在 weblogic.deploy.internal.targetserver.operations.StartOperation.createAndPrepareContainer(StartOperation.java: 85) 在 weblogic.deploy.internal.targetserver.operations.StartOperation.doPrepare(StartOperation.java:98) 在 weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217) 在 weblogic.deploy.internal .targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747) 在 weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216) 在 weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250) 在 weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171) 在 weblogic.deploy.service.internal .targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46) 在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java :528) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java :13) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46) 在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) 在 weblogic.work.ExecuteThread.execute (ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java :13) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46) 在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) 在 weblogic.work.ExecuteThread.execute (ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer. java:46) 在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176 )DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer. java:46) 在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) 在 weblogic.work.ExecuteThread.execute(ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176 )13) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46) 在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) 在 weblogic.work.ExecuteThread.execute( ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)13) 在 weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46) 在 weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528) 在 weblogic.work.ExecuteThread.execute( ExecuteThread.java:207) 在 weblogic.work.ExecuteThread.run(ExecuteThread.java:176)

请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:03:48.447

部署错误很明显

> 引起：java.lang.ClassNotFoundException:org.springframework.web.util.IntrospectorCleanupListener

请确保您的 Spring 框架相关 jar 文件位于该`WEB-INF/lib`文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:07:27.377

看起来 weblogic 服务器无法找到 Spring Web API。确保 spring APIs/jar 文件放在 WEB-INF/lib 文件夹下。

或者，您可以将所有依赖 jar 放在服务器上的单独目录中，并在 Weblogic 启动脚本中设置目录路径。

在我的项目中，我已将所有第三方依赖的 jar 放在服务器上的 /sns 文件夹中，并在启动脚本中设置了路径。

设置 JAR_CLASSPATH=/sns

设置 CLASSPATH = %CLASSPATH%:%JAR_CLASSPATH%

如果您在 Windows 上的 weblogic 服务器上进行部署，请在任何驱动器中创建一个目录 [比如 E] 并放置所有 jar 并更改启动脚本，如下所示。

设置 JAR_CLASSPATH=E:\sns

设置 CLASSPATH = %CLASSPATH%;%JAR_CLASSPATH%

注意：在 Windows 上，多个类路径由 ';' 分隔 在 Linux 上通过 ':'

# c++ - 不同大小的预期 malloc 函数

> ID：15390243
> 
> 赞同：0
> 
> 时间：2013-03-13T15:57:17.957
> 
> 标签：c++, size, malloc

解决方案可能是微不足道的，但我在 cpp 中并不生动。

在我执行代码后，值`function strlen((char*)buffer)`比我想象的要高。这是为什么？我该如何解决？（`if filesize=48, than strlen((char*)buffer)=64`它也应该是 48 ！）

```
 ifstream iffile;
    iffile.open(argv[1], ios::in | ios::binary | ios::ate);
    if (iffile.is_open())
    {
       long filesize = iffile.tellg();
       if (filesize > 0)
       {
           iffile.seekg(0, ios::beg);
           {
                 long pos = iffile.tellg();
                 if (pos != filesize)
                 {
                       char *buffer;
                       buffer = (char *)malloc(filesize * sizeof * buffer);
                       if (buffer != NULL)
                       {
                             memset(buffer, 0, filesize - pos);
                             iffile.read((char *)buffer, filesize); 
```

此外，我不得不提到，在我的文件中有很多不可打印的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:00:17.680

您的代码假定文件包含终止`'\0'`字符，以将字符数组转换为字符串。这个终结器是要`strlen()`寻找的，所以如果它不存在，你必须添加它。

可以确定的一种方法是`malloc()`（顺便说一下，在 C++ 中应该是`new[]`或者更高级的）1 个字符超过`file_size`，并`'\0'`在加载后将其设置为。

此外，您必须检查分配和 I/O 是否成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:01:48.150

永远不要`malloc`在 C++ 中使用；这是一个C主义。

### 选项1

改为使用`new`；

```
buffer = new char[filesize] 
```

完成后，您必须使用它`delete[]`来释放内存。

### 选项 2

您也不应该在 C++ 中使用原始指针（好吧，如果您知道自己在做什么并且 100% 感觉良好，喝了一杯好咖啡并且通常很勇敢，那么您可以使用）。

在这种情况下，我想我会使用`std::vector<char>`.

```
std::vector<char> buffer(filesize);
iffile.read(&buffer.front(), filesize); 
```

这样，`std`库会为您管理内存。

# java - 带有lowagie Document的RTF中的表格单元格字体

> ID：15390248
> 
> 赞同：4
> 
> 时间：2013-03-13T15:57:35.240
> 
> 标签：java, fonts, itext, cell, rtf

我正在尝试`RTF`使用带有空单元格的表格创建文档。

我`com.lowagie.text.rtf.*`在java中使用包。

空单元格的大小`font`均为`Times New Roman`12。

如何将空单元格的字体设置为不同的`Font`？

我用过`RtfCell cellSpacer = new RtfCell(new Phrase("", new RtfFont("Arial", 9, RtfFont.NORMAL)));`，但是因为字符串`""`是空的，所以字体没有生效。当`""`填充了除 a 之外的其他内容`space`时，字体确实生效。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:41:19.667

解决这个问题的方法是必须将空格作为非中断空格提供给 Phrase 构造函数！

`String nbs = "\u00A0";`

`RtfCell cellSpacer = new RtfCell(new Phrase(nbs, new RtfFont("Arial", 9, RtfFont.NORMAL)));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T16:03:27.993

我认为问题是[Phrase.java 上第 198 行的验证](http://www.docjar.org/html/api/com/lowagie/text/Phrase.java.html)，它是从构造函数调用的`Phrase(String string, Font font)`。基本上，它会检查字符串是否为空，否则它不会创建包含您指定的文本和字体的块。

看来您应该：

1.  向构造函数传递一个空格：

    new Phrase(" ", new RtfFont("Arial", 9, RtfFont.NORMAL))

2.  创建一个新的自定义类 ( `class AllowsEmptyPhrase extends Phrase`)，复制构造函数并删除不需要的行为。

# freebsd - 如何让ee编辑器语法高亮？

> ID：15390249
> 
> 赞同：1
> 
> 时间：2013-03-13T15:57:35.713
> 
> 标签：freebsd

有谁知道如何让 ee 编辑器可以语法高亮？

我看到设置好像没有语法高亮功能，但是vi或者vim对我来说太复杂了...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:13:05.257

ee 不支持语法高亮。你可能想看看 nano（来自 ports collection editors/nano），它是一个易于使用的带有语法高亮的编辑器。

有关纳米语法突出显示的更多信息，请参阅[https://askubuntu.com/questions/90013/syntax-highlighting-on-nano](https://askubuntu.com/questions/90013/syntax-highlighting-on-nano)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T08:34:45.580

您也可以使用 Emacs 作为控制台文本编辑器，您可以使用 Ports 安装它

编辑器/emacs 或没有 X11 接口（用于服务器），高度更轻，端口：editors/emacs-nox11

Emacs 使用与您首选的 shell、bash 或 ZSh 相同的绑定，实际上 shell 使用与 emacs 相同的绑定。

Emacs 更像 ee 或 nano，关于键盘快捷键，但功能更强大、可配置、可编写脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-29T12:48:50.550

如果您考虑使用 nano，您可能希望在您的用户目录或 /usr/local/etc/nanorc 中为包含此文件的所有用户创建一个文件 .nanorc：

```
 ## Nanorc files
include "/usr/local/share/nano/nanorc.nanorc"
## C/C++
include "/usr/local/share/nano/c.nanorc"
## HTML
include "/usr/local/share/nano/html.nanorc"
## TeX
include "/usr/local/share/nano/tex.nanorc"
## Quoted emails (under e.g. mutt)
include "/usr/local/share/nano/mutt.nanorc"
## Patch files
include "/usr/local/share/nano/patch.nanorc"
## Manpages
include "/usr/local/share/nano/man.nanorc"
## Groff
include "/usr/local/share/nano/groff.nanorc"
## Perl
include "/usr/local/share/nano/perl.nanorc"
## Python
include "/usr/local/share/nano/python.nanorc"
## Ruby
include "/usr/local/share/nano/ruby.nanorc"
## Java
include "/usr/local/share/nano/java.nanorc"
## Assembler
include "/usr/local/share/nano/asm.nanorc"
## Bourne shell scripts
include "/usr/local/share/nano/sh.nanorc"
## POV-Ray
include "/usr/local/share/nano/pov.nanorc" 
```

# javascript - 打开单个IE弹窗实例

> ID：15390250
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:57:40.710
> 
> 标签：javascript, internet-explorer, popup, window

现在我正在尝试使用 JavaScript 打开一个新的弹出窗口，但是如果您单击多次链接，我只想打开一个弹出窗口，但是如果我关闭该窗口，我希望它再次打开以弹出窗口。

到目前为止，我有以下内容：

.js

```
function open() {
    var popup = window.open("http://www.google.com/", "URL","left=0,top=0,width=800,height=600,status=no,resizable=no,scrollbars=no,toolbar=no,menubar=no");
} 
```

.html

```
<a onclick="javascript:open()">Click me</a> 
```

使用 Chrome 和 FF 效果很好，但是当我用 IE 测试它时，每次点击都会打开一个新窗口。

我想知道是否有办法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T13:23:46.023

@番茄

试试这个代码，

```
function Redirect (url, name, args)
 {
   if (typeof (popupWind) != "object" || popupWind.closed) 
   {
       popupWind= window.open(url, name, args); 
   }

   popupWind.focus(); 
   return popupWind;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:59:52.167

```
function open() {
    document.getElementById('link').onclick = '';
    // open popup
}

<a id="link" onclick="javascript:open()">Click me</a> 
```

请注意，这不是一个彻底的解决方案，并且不考虑弹出窗口被阻止的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:59:53.927

使用变量来检查它之前是否被打开过。

```
var opened = false;
function open() {
    if (!opened) {
        var popup = window.open("http://www.google.com/", "URL","left=0,top=0,width=800,height=600,status=no,resizable=no,scrollbars=no,toolbar=no,menubar=no");
        popup.onload = function() {
            popup.onunload = function() {
                opened = false;
            };
        };
        opened = true;
    }
} 
```

您可以阅读此内容以了解嵌套回调说明。

[为什么 window.open(...).onunload = function () { ... } 不能按我的预期工作？](https://stackoverflow.com/questions/7476660/why-does-window-open-onunload-function-not-work-as-i-expect)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-30T01:43:15.573

要在 HTML 页面中仅打开一个弹出窗口的实例，请使用 window.open 方法的“windowName”参数。例如： window.open(" [http://www.mywebsite.com](http://www.mywebsite.com) ") 将在用户每次单击包含 window.open 代码的链接时打开一个新窗口。要在同一窗口中打开，请使用 window.open(" [http://www.mywebsite.com](http://www.mywebsite.com) ","contacts") ，因此对于链接上的任何“N”次点击，只会打开一个窗口实例。

# grinder - Grinder - 录制脚本似乎没有效果

> ID：15390251
> 
> 赞同：0
> 
> 时间：2013-03-13T15:57:45.393
> 
> 标签：grinder

我正在尝试使用以下命令录制脚本。

```
java net.grinder.TCPProxy -console -http > grinderTest.py 
```

它似乎可以工作（就像在代理录制时我可以访问网页一样），但是当我停止它时，没有任何内容输出到`grinderTest.py`.

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:14:21.580

此外，如果其他人搜索此内容，则可能是因为您正在使用本地主机上的服务器进行测试。当您有代理和本地主机目标时，请确保代理设置不会绕过本地主机目标（FireFox 中的首选项\网络\设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T14:03:13.693

^(*从 OP 中提取的答案*)

类路径上的某些东西导致磨床在写入文件之前抛出错误。

将类路径减少为仅包含`grinder.jar`解决了该问题。

# ruby - 转换为日期时间

> ID：15390258
> 
> 赞同：0
> 
> 时间：2013-03-13T15:58:10.260
> 
> 标签：ruby, datetime, timezone

ruby 中是否有一种简单的内置方法可以将“20130313T113000Z”转换为 ruby​​ 日期格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:01:29.057

是的，[DateTime::parse](http://www.ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/DateTime.html#method-c-parse)：

```
DateTime.parse("20130313T113000Z")
  => #<DateTime: 2013-03-13T11:30:00+00:00 ((2456365j,41400s,0n),+0s,2299161j)> 
```

或者`Date.parse`，如果您不需要小时、分钟和秒，请使用。

# c# - 生成唯一密码

> ID：15390259
> 
> 赞同：3
> 
> 时间：2013-03-13T15:58:14.587
> 
> 标签：c#, unit-testing

我正在制作一个生成密码的应用程序，现在我已经编写了一个单元测试来测试你何时生成 2 个密码，它们是唯一的，但我遇到了问题，它们不是唯一的，而是相同的。

单元测试：

```
[TestMethod]
public void PasswordGeneratorShouldRenderUniqueNextPassword()
{
    // Create an instance, and generate two passwords
    var generator = new PasswordGenerator();
    var firstPassword = generator.Generate(8);
    var secondPassword = generator.Generate(8);

    // Verify that both passwords are unique
    Assert.AreNotEqual(firstPassword, secondPassword);
} 
```

我猜这里有些东西是错的：

```
 for (int i = 0; i < length; i++)
 {
     int x = random.Next(0, length);

     if (!password.Contains(chars.GetValue(x).ToString()))
         password += chars.GetValue(x);
     else
         i--;
 }
 if (length < password.Length) password = password.Substring(0, length);

 return password; 
```

随机的：

```
 Random random = new Random((int)DateTime.Now.Ticks); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:03:55.107

如果您非常快速地生成两个密码，它们将在同一个刻度上生成。

* * *

如果您只想生成一个随机的人类可读密码，请看[这里](https://stackoverflow.com/a/55447/659190)。如果您想知道为什么`Random`不适合此目的以及如何做更合适的事情，请继续阅读。

* * *

~~最快的做法是使用 的默认构造函数`Random()`，它会为你做种子。~~

检查[文档](http://msdn.microsoft.com/en-us/library/system.random.aspx)后，默认构造函数使用基于时间的种子，因此您在使用它时会遇到同样的问题。无论如何，`Random`该类太容易预测而无法用于安全密码生成。

如果你正在寻找更多的力量，你可以这样做，

```
using System.Security.Cryptography;

static string GetPassword(int length = 13)
{
   var rng = new RNGCryptoServiceProvider();
   var buffer = new byte[length * sizeof(char)];
   rng.GetNonZeroBytes(buffer);
   return new string(Encoding.Unicode.GetChars(buffer));
} 
```

* * *

但是，如果您希望人类能够阅读、记住和键入您生成的密码，您应该在可能的字符范围内更加有限。

* * *

**我已经更新了这部分，以给出一个详细、现代、公正的答案。**

如果您想将输出限制为一组特定的字符，您可以执行以下操作。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Security.Cryptography;

/// <summary>
/// Get a random password.
/// </summary>
/// <param name="valid">A list of valid password chars.</param>
/// <param name="length">The length of the password.</returns>
/// <returns>A random password.</returns>
public static string GetPassword(IList<char> valid, int length = 13)
{
    return new string(GetRandomSelection(valid, length).ToArray());
}

/// <summary>
/// Gets a random selection from <paramref name="valid"/>.
/// </summary>
/// <typeparam name="T">The item type.</typeparam>
/// <param name="valid">List of valid possibilities.</param>
/// <param name="length">The length of the result sequence.</param>
/// <returns>A random sequence</returns>
private static IEnumerable<T> GetRandomSelection<T>(
        IList<T> valid,
        int length)
{
    // The largest multiple of valid.Count less than ulong.MaxValue.
    // This upper limit prevents bias in the results.
    var max = ulong.MaxValue - (ulong.MaxValue % (ulong)valid.Count);

    // A finite sequence of random ulongs.
    var ulongs = RandomUInt64Sequence(max, length).Take(length);

    // A sequence of indecies.
    var indecies = ulongs.Select((u => (int)(u % (ulong)valid.Count)));

    return indecies.Select(i => valid[i]);
}

/// <summary>
/// An infinite sequence of random <see cref="ulong"/>s.
/// </summary>
/// <param name="max">
/// The maximum inclusive <see cref="ulong"/> to return.
/// </param>
/// <param name="poolSize">
/// The size, in <see cref="ulong"/>s, of the pool used to
/// optimize <see cref="RNGCryptoServiceProvider"/> calls.
/// </param>
/// <returns>A random <see cref="ulong"/> sequence.</returns>
private static IEnumerable<ulong RandomUInt64Sequence(
        ulong max = UInt64.MaxValue,
        int poolSize = 100)
{
    var rng = new RNGCryptoServiceProvider();
    var pool = new byte[poolSize * sizeof(ulong)];

    while (true)
    {
        rng.GetBytes(pool);
        for (var i = 0; i < poolSize; i++)
        {
            var candidate = BitConvertor.ToUInt64(pool, i * sizeof(ulong));
            if (candidate > max)
            {
                continue;
            }

            yield return candidate;
        }
    }
} 
```

* * *

您可以像这样使用此代码，首先您需要一组有效`char`的 a 可以在您的密码中，

```
var validChars = new[] { 'A', 'B', 'C' }; 
```

为了说明，我只包含了 3 个`char`s，实际上您希望`char`包含更多的 s。然后，要生成一个 8 秒长的随机密码`char`，您可以进行此调用。

```
var randomPassword = GetPassword(validChars, 8); 
```

在实践中，您可能希望您的密码至少为 13`char`秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:05:53.473

您的问题是您是您的问题是您使用的是默认的随机构造函数，它使用当前日期/时间作为种子。DateTime.Ticks 的分辨率为 100 纳秒。这很快，但对于您的单元测试来说还不够快，单元测试会在不到 100 ns 的时间内生成两个密码。

一种解决方案是在密码生成器中使用静态 Random 实例。

```
public class PasswordGenerator
{
    private static Random random = new Random();

    public string Generate()
    {
        for (int i = 0; i < length; i++)
        {
            int x = random.Next(0, length);

            if (!password.Contains(chars.GetValue(x).ToString()))
                password += chars.GetValue(x);
            else
                i--;
        }
        if (length < password.Length) password = password.Substring(0, length);

        return password;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:05:53.667

`DateTime.Now.Ticks`不是很准确，虽然它看起来代表了一个非常小的时间片，但它实际上代表了几毫秒。

由于您的密码算法可能需要十分之一毫秒，这导致`DateTime.Now.Ticks`具有相同的值。

两种选择是提供一种提供种子的方法（这将允许您使用第三个随机数生成器来创建种子）或传入一个随机对象（这将确保这两个对象是从同一个种子顺序创建的，创建不同的值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:06:04.073

我会`Random`在构造函数中创建对象`PasswordGenerator`，以确保每次调用该`Generate`方法时，都会得到一个（或多或少）随机的数字。

```
public PassworGenerator()
{
    random = new Random(/* seed */);
} 
```

# c# - 如何使用 xsd.exe 在 C# 中生成列表而不是数组

> ID：15390267
> 
> 赞同：14
> 
> 时间：2013-03-13T15:58:27.993
> 
> 标签：c#, xsd, xml-serialization, xsd.exe

我有一个 XML 模式 .xsd 文件，并使用**xsd.exe 工具**生成包含所有 C# 类的文件。如果我在 XML 标记中有一系列元素，那么它将在 C# 中用数组表示。**失败**是显而易见的。如何生成列表而不是数组？

我想使用列表而不是类中的固定大小的数组。

```
Book [] books = new Book[someFixSize];

List<Book> books =  new List<Book>(); 
```

我已经看到一些关于此的较旧（非常古老）的问题，但没有一个提供满意的解决方案：/

这是最新的有用提示： http: [//www.stefanbader.ch/xsdcsarr2l-exe-refactor-xsd-array-to-list/](http://www.stefanbader.ch/xsdcsarr2l-exe-refactor-xsd-array-to-list/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:31:56.803

我在没有合同的情况下尝试使用 svcutil 时遇到了同样的问题，因此我编写了[xsdcsarr2l](http://www.stefanbader.ch/xsdcsarr2l-exe-refactor-xsd-array-to-list)工具。如果您有兴趣，我会花时间上传一个更新的版本，其中至少列表变量会自动初始化。另一方面，该项目足够轻巧，您可以获取源代码并使用 NRefactory 类自行改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:24:57.737

尝试使用 svcutil.exe

```
svcutil /o:myFile.cs /ct:System.Collections.Generic.List myXsd.xsd 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-03T16:39:07.780

Dan Field 有[一个 PowerShell 脚本](https://blog.tallan.com/2016/03/10/xsd-exe-arrays-and-specified/)，它采用*xsd.exe*输出类并将其数组转换为通用列表。这对我来说很适合一个简单的类，但我不知道它的扩展性如何。我已经粘贴了下面的脚本。从命令提示符调用它，如下所示：

```
"$(TargetFrameworkSDKToolsDirectory)xsd.exe" /c "$(ProjectDir)ImportedPartCanonical.xsd" "$(ProjectDir)ProjectCanonical.xsd" /n:Tallan.BT.PipelineComponents

powershell.exe -ExecutionPolicy Unrestricted -file "$(solutiondir)\PowerShellScripts\PostProcessXsdExe.ps1" ProjectCanonical.cs "$(SolutionDir)Tallan.BT.PipelineComponents\SerializedClasses\ProjectCanonical.cs" 
```

有关完整说明，请参阅链接。

```
# Author: Dan Field (dan.field@tallan.com)
# posted on blog.tallan.com/2016/03/10/xsd-exe-arrays-and-specified
# Purpose: fix the 'specified' attribute and convert arrays to list from XSD.exe generated classes

[CmdletBinding()]
Param(
    [Parameter(Mandatory=$true, Position=1)]
    [string]$inputFile,
    [Parameter(Mandatory=$true, Position=2)]
    [string]$outputFile,
    [switch]$DeleteInputFile
)

# Much faster than using Get-Content and/or Out-File/Set-Content
$writer = [System.IO.StreamWriter] $outputFile
$reader = [System.IO.StreamReader] $inputFile

# Used to track Specified properties
$setterDict = @{}

while (($line = $reader.ReadLine()) -ne $null)
{
    $thisStart = $line.IndexOf("this.") # Will be used for
    $brackets = $line.IndexOf("[]") # Indicates an array that will be converted to a Generic List

    # Assume that any private field that contains "Specified" needs to be grabbed
    if (($line.IndexOf("private") -gt -1) -and ($line.IndexOf("Specified") -gt -1))
    {
        # Get the field name
        $varName = $line.Split("{' ', ';'}", [System.StringSplitOptions]::RemoveEmptyEntries)[-1]

        # Use the field name as a key, minus the ending "Specified" portion, e.g. fieldNameSpecified -> fieldName
        # The value in the dictionary will be added to setters on the main property, e.g. "this.fieldNameSpecified = true;"
        $setterDict.Add($varName.Substring(0, $varName.IndexOf("Specified")), "this." + $varName + " = true;")

        # Output the line as is
        $writer.WriteLine($line)
    }
    # Find property setters that aren't for the *Specified properties
    elseif (($thisStart -gt -1) -and ($line.IndexOf(" = value") -gt -1) -and ($line.IndexOf("Specified") -lt 0))
    {
        # Get the field name
        $thisStart += 5
        $varName = $line.Substring($thisStart, $line.IndexOf(' ', $thisStart) - $thisStart)
        # see if there's a "Specified" property for this one
        if ($setterDict.ContainsKey($varName) -eq $true)
        {
            # Set the Specified property whenever this property is set
            $writer.WriteLine((' ' * ($thisStart - 5)) + $setterDict[$varName])
        }
        # Output the line itself
        $writer.WriteLine($line)
    }
    elseif ($brackets -gt 0) # change to List<T>
    {
        $lineParts = $line.Split(' ')
        foreach ($linePart in $lineParts)
        {
            if ($linePart.Contains("[]") -eq $true)
            {
                $writer.Write("System.Collections.Generic.List<" + $linePart.Replace("[]", "> "))
            }
            else
            {
                $writer.Write($linePart + " ")
            }
        }
        $writer.WriteLine();
    }
    else # Just output the original line
    {
        $writer.WriteLine($line)
    }
}

if ($DeleteInputFile -eq $true)
{
    Remove-Item $inputFile
}

# Make sure the file gets fully written and clean up handles
$writer.Flush();
$writer.Dispose();
$reader.Dispose(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T16:48:53.730

试试[Xsd2Code](https://xsd2code.codeplex.com/)

它生成列表而不是数组。不幸的是，我无法让它反序列化我的代码，但将它与 xsd 生成的代码进行比较，它看起来非常相似。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-08T15:52:16.820

我最近遇到了同样的问题。我想要 List<T> 而不是 T[] 的唯一原因是因为我想在向 Web 服务发送请求之前*将项目添加到数组中。*

*我使用了xsd.exe*生成部分类的事实。您可以添加自己的部分类，添加构造函数和*ADDT*方法，该方法将在分配给（新）最后一个元素之前使用 Array.Resize<T>()。

无需更改生成的代码或使用其他工具。

# sql-server - 无法将环境变量值加载到 SSIS 包变量中 (Visual Studio 2008)

> ID：15390268
> 
> 赞同：0
> 
> 时间：2013-03-13T15:58:29.043
> 
> 标签：sql-server, visual-studio

我必须在流级别将环境变量（比如说计算机名称或其他变量）的值加载到 SSIS 包中使用的用户定义变量中。我去了SSIS菜单->包配置->选中“启用包配置”->单击“添加”->下一步->然后在“配置类型”选择“环境变量”->选择所需的环境变量->下一步-> 在“选择目标属性”中，我从对象中选择了我的变量和属性属性 - 值字段。因此，它应该使用与选择的环境变量（比如说“计算机名称”）完全相同的值加载我的变量。但它什么也没做！我做错了什么？有什么提示吗？

此致，

# c# - C# 中的类型转换，显式转换为 int 和 Convert.ToInt32

> ID：15390269
> 
> 赞同：4
> 
> 时间：2013-03-13T15:58:37.233
> 
> 标签：c#, types

在我的以下代码中

```
long Price = 148920000;
long PRICE = 1000000;
double Multiplier = 100.00;
int Value = (int)(((double)Price / PRICE) * Multiplier); 
```

我希望 Value 为 14892 但在 C# 中它即将到来 14891 ....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:01:32.890

浮点算术 id 总是近似的。使用 Math.Round()、Math.Floor() 或 Math.Ceiling() 之一来控制如何将双精度/浮点数转换为任何 int 类型。或者看看使用 Decimal 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:08:37.677

不在 mo 的开发机器上，但你可以试试这个吗？

```
long Price = 148920000;
long PRICE = 1000000;
double Multiplier = 100.00;
checked
{
int Value = (int)(((double)Price / PRICE) * Multiplier);
} 
```

如果溢出应该抛出错误

[http://msdn.microsoft.com/en-gb/library/74b4xzyw(v=vs.71).aspx](http://msdn.microsoft.com/en-gb/library/74b4xzyw(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:17:31.393

如果您不熟悉如何获取要转换的值，此答案将为您提供所需的内容

```
long Price = 148920000;
long PRICE = 1000000;
double Multiplier = 100.00;
var Value = (Convert.ToInt32(Math.Round((double)Price / (double)PRICE) * Multiplier)); 
```

或不使用`var`关键字的另一个版本会产生相同的结果

```
long Price = 148920000;
long PRICE = 1000000;
double Multiplier = 100.00;
int Value = (int)(Math.Round((double)Price / (double)PRICE) * Multiplier); 
```

`Answer = 14892`

# ios - 尺度变换如何影响边界和变换？

> ID：15390270
> 
> 赞同：1
> 
> 时间：2013-03-13T15:58:37.033
> 
> 标签：ios, objective-c

缩放视图的三种方法：

```
 UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
    [view setBackgroundColor:[UIColor redColor]];
    [self.view addSubview:view];
    view.transform = CGAffineTransformMakeScale(0.5, 0.5);
    view.layer.affineTransform = CGAffineTransformMakeScale(0.5, 0.5);
    view.layer.transform = CATransform3DMakeScale(0.5, 0.5, 0);
    NSLog(@"%@",NSStringFromCGRect(view.bounds));
    NSLog(@"%@",NSStringFromCGRect(view.frame)); 
```

输出是

```
2013-03-13 23:55:02.492 {{0, 0}, {1024, 768}}
2013-03-13 23:55:02.495 {{256, 192}, {512, 384}}

```

我不知道为什么在制作比例后边界没有改变，而只是框架改变了。

# internet-explorer - 无法使用 chrome 框架关闭 IE

> ID：15390271
> 
> 赞同：1
> 
> 时间：2013-03-13T15:58:42.120
> 
> 标签：internet-explorer, jquery-mobile, google-chrome-frame

我在使用 IE 和 Chrome Frame 时遇到了一个有趣的问题。

从我的站点注销时，会为 url 提供一个额外的“/#/”，从而导致“ [https://mysite.something.com/something/#/](https://mysite.something.com/something/#/) ”。令人难以置信的是，这似乎阻碍了 IE 在按下关闭按钮时关闭。

我的网站目前支持 chrome 框架，并希望继续这样做。有人知道解决方法吗？我网站上的任何可能相关的代码？

请帮忙。

编辑：测试了一些，注销似乎不是问题 - 手动添加“/#/”也让我无法关闭 IE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:25:00.157

我最终找到了在注销时删除井号的解决方法。不是最漂亮的，但至少现在可以关闭 IE。

```
if (window.externalHost) {
    window.location.href = window.location.href.replace(/#.*/, '');
} 
```

# python - 向 pandas DataFrame 添加维度

> ID：15390280
> 
> 赞同：1
> 
> 时间：2013-03-13T15:59:00.113
> 
> 标签：python, pandas

我有一个 pandas DataFrame，它在其中一个字段中包含一个管道分隔的字符串。我已将其拆分为一个列表`apply`并将其添加到 DataFrame 中。管道分隔字符串中值的数量和内容各不相同。

```
df = DataFrame([{'wibble': 'a', 'pipestring': 'aa|aaa|aaa'}, 
    {'wibble': 'b', 'pipestring': 'bb|bbbb|bbb|bbbbbb'}])

df['pipelist'] = df['pipestring'].map(lambda x: x.split('|')) 
```

我对 pandas 很陌生，所以对此可能完全错误，但我认为这可以通过具有多个索引级别的 DataFrame 更好地表示，这样我就可以利用 panda 的索引和其他（极好的）工具。但是我无法弄清楚如何做到这一点。任何关于我应该做什么的指示/建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:33:43.327

更具体地说，您的计算目标是什么？

这是一种拆分数据并创建组合框架的方法

```
In [44]: x = df['pipestring'].apply(lambda x: pd.Series(x.split('|')))

In [45]: x
Out[45]: 
    0     1    2       3
0  aa   aaa  aaa     NaN
1  bb  bbbb  bbb  bbbbbb

In [46]: df.join(x).set_index(['wibble'])
Out[46]: 
                pipestring                 pipelist   0     1    2       3
wibble                                                                    
a               aa|aaa|aaa           [aa, aaa, aaa]  aa   aaa  aaa     NaN
b       bb|bbbb|bbb|bbbbbb  [bb, bbbb, bbb, bbbbbb]  bb  bbbb  bbb  bbbbbb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:21:17.707

开始使用它的最快方法是使用`stack`您的数据框：

```
In [44]: df = df.stack()

In [45]: df.ix[0, 'pipelist']
Out[45]: ['aa', 'aaa', 'aaa']

In [46]: df
Out[46]: 
0  pipestring                 aa|aaa|aaa
   wibble                              a
   pipelist               [aa, aaa, aaa]
1  pipestring         bb|bbbb|bbb|bbbbbb
   wibble                              b
   pipelist      [bb, bbbb, bbb, bbbbbb] 
```

这能让你到达你想去的地方吗？

# javascript - JS：链接到跨度和背景颜色的复选框

> ID：15390291
> 
> 赞同：0
> 
> 时间：2013-03-13T15:59:18.110
> 
> 标签：javascript, jquery

我有两个复选框（见下文），单击它们时，激活跨度背景颜色的更改。问题是，我需要这样才能激活这些复选框中的一个，而取消激活另一个。我对单选按钮了如指掌，问题是即使单选按钮停用，它也不会删除跨度的背景颜色。我需要一个只允许选择一个，并在选择另一个选项时自动删除背景颜色的解决方案。

示例： [http ://eblacksmith.com/test/](http://eblacksmith.com/test/)

核心代码：

```
$(document).ready(function() {

$("span[class='checkbox']").addClass("unchecked");

    $(".checkbox").click(function(){

        if($(this).children("input").attr("checked")){  
            // uncheck
            $(this).children("input").attr("checked", false);
            $(this).removeClass("checked");
            $(this).addClass("unchecked");
        }else{
            // check
            $(this).children("input").attr("checked", true);
            $(this).removeClass("unchecked");
            $(this).addClass("checked");
        }

        //alert($(this).children("input").attr("checked"));
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:20:35.900

以下应该工作

```
 $(document).ready(function() {

   // get a list of all the checkboxes
   var $checkboxEls = $('input[type="checkbox"]');

   $(document).on('change', 'input[type="checkbox"]', function(event) {

     // highlight this check box
     $(this).parent('span').addClass('checked');

     // remove other classes
     $checkboxEls.not(this).removeAttr('checked').parent('span').removeClass('checked');

   });
 }); 
```

它利用[not()](http://api.jquery.com/not/)从我们之前存储的复选框列表中删除当前复选框。[这里的例子](http://cdpn.io/IgJwj)

# javascript - JW Player - 事件“onControlsShown”

> ID：15390293
> 
> 赞同：1
> 
> 时间：2013-03-13T15:59:20.953
> 
> 标签：javascript, jquery, jwplayer

我正在尝试构建一个位于 jwplayer 之上的小型 html 菜单，并且应该与 JW Player 的标准控件同步显示（mousemove => 淡入）。因此，我搜索了触发标准控件显示的事件，但到目前为止我还没有发现任何工作。

将自定义菜单绑定到像 onVolume() 这样的[事件很容易，例如只需添加](http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference/)

```
events: {
    onVolume: function (event) {
        showMenu();
    }
}, 
```

到您的嵌入线，但是......触发标准控件显示的事件是什么？

注意：我们使用 HDX 重定向，我无法使用 javascript 获取播放器区域中发生的任何鼠标事件。对于“普通”客户端，我只会对任何鼠标移动做出反应。谢谢你的帮助！

# android - Android URL 方案：intent.getData() == null (PhoneGap)

> ID：15390296
> 
> 赞同：5
> 
> 时间：2013-03-13T15:59:24.067
> 
> 标签：android, cordova, android-intent, url-scheme

所以我试图获取一个被调用到我的应用程序中的 URL，但是在它打开后，`null`我做什么似乎总是无关紧要。

这是我的清单的相关部分：

```
<activity android:name="myapp" android:label="@string/app_name"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
            android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
            <data android:scheme="myapp" />
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter>

    </activity> 
```

这是我的java：

```
@Override
public void onStart() {

    super.onStart();
    final Intent intent = getIntent();

    Uri url = intent.getData();

    Log.e("myLog", "Url = " + url);

} 
```

日志输出“Intent = null”，我没有错误。

我不是 java 开发人员，所以我可能有一个我不认识的简单问题。我将把它传递到我的 PhoneGap 应用程序中，`sendJavascript`但作为一个 PhoneGap 应用程序似乎与这个问题无关。

编辑：

我似乎只有在`<intent-filter>`登录时才获得第一个`intent`。这是日志：

```
03-13 12:36:18.593: E/MyAppLog(13793): Intent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.wd.myapp/.myapp (has extras) } 
```

* * *

解决方案：

在阅读了数十篇关于如何实现 URL 方案以打开 PhoneGap 应用程序的帖子后，没有一个非常强大或根本无法工作，我将发布我的完整解决方案，并希望有人觉得它有用。

第一步：AndroidManifest.xml - 将它添加`<intent-filter>`到你的`<activity>`，将 'urlScheme' 更改为你喜欢的任何内容。在这种情况下，您可以单击指向 urlScheme:///?key=val 的链接，它会打开应用程序。

```
<intent-filter>
    <data android:scheme="urlScheme" />
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
</intent-filter> 
```

第二步：myApp.java - 在下面添加以下内容`onCreate`。如果您正在使用`singleTask`，请务必将您的`intent`逻辑放在`onStart`函数中（而不是 in `onCreate`，正如其他人所宣传的那样），因为这将允许您链接到您的应用程序，无论它是否已经运行。

```
@Override
public void onStart() {

    super.onStart();
    final Intent intent = getIntent();

    String url = intent.getDataString();

    if(url != "" && url != null) {
        super.sendJavascript("setTimeout(function() { handleOpenURL('" + url + "'); },1);");
    }                

}

@Override
protected void onNewIntent(Intent intent) {
     super.onNewIntent(intent); setIntent(intent);
} 
```

`onNewIntent`有关覆盖的解释，请参阅接受的答案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-13T16:56:05.740

尝试覆盖`onNewIntent`. 问题是`getIntent`返回`Intent`开始的`Activity`，但不是最近的。但是您可以使用`setIntent`方法覆盖它。

```
@Override 
protected void onNewIntent(Intent intent) { 
    super.onNewIntent(intent); 
    setIntent(intent); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T11:37:17.133

扩展原始答案，以防您的主要活动启动另一个活动。然后，当您从已启动的活动返回到主要活动时，它可能会导致一次又一次地启动活动的无限循环。

这是代码

```
public void onStart(){
        super.onStart();
        Intent intent = getIntent();
        Uri data = intent.getData();
        if (data != null) {
            // explicitly set intent data to null
            // so on next launch, from same lifecycle of activity
            // it does not restart the Activity Z.
            intent.setData(null);
            Intent activityZ = new Intent(MyActivity.this, ActivityZ.class);
                businessViewActivity.putExtra("url", data.toString());
                startActivity(activityZ);
        }
    }

    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        setIntent(intent);
    } 
```

希望能帮助到你。

# sql - Sql 请求由于某种原因重复了所有内容

> ID：15390301
> 
> 赞同：0
> 
> 时间：2013-03-13T15:59:35.403
> 
> 标签：sql, session, joomla

我编写了 sql 请求来检索 joomla 文章以及作者：

```
static function getLists(&$params)
    {
        $db     = JFactory::getDbo();
        $lists  = null;
        $query = "SELECT cc.title AS category, a.id, a.title, a.created as created, av.add_image as imgthrumb, ua.avatar as avatar, ar.intotext as introtext, ss.userid as onlineid,
        u.id AS userlink, u.username as username, u.lastvisitDate as lastvisit, a.hits, cc.id as catid, a.state as state, a.created_by as authorid, mp.group_id as groupid, ug.title as ugtitle
        FROM #__content AS a
        LEFT JOIN #__categories AS cc ON a.catid = cc.id
        LEFT JOIN #__users AS u ON u.id = a.created_by
        LEFT JOIN #__cck_store_item_content AS av ON av.id = a.id
        LEFT JOIN #__comprofiler AS ua ON user_id = a.created_by
        LEFT JOIN #__cck_store_item_cck_store_item_content AS ar ON ar.id = a.id
        LEFT JOIN #__user_usergroup_map AS mp ON mp.user_id = a.created_by
        LEFT JOIN #__usergroups AS ug ON ug.id = mp.group_id
        LEFT JOIN #__session AS ss ON ss.userid = u.id AND ss.userid > 0 AND ss.guest = 0
        WHERE a.created_by = u.id  AND a.id >0
        AND DATE(a.created) >= DATE_SUB(CURRENT_DATE, INTERVAL ".(int)$safe_date." DAY) AND a.access = 1 AND a.state = 1 AND a.created > 0
        ORDER BY created desc";
        $db->setQuery($query,0,10);
        $lists = $db->loadObjectList();         

        return $lists;
    } 
```

它就像一个魅力，但这里有一些奇怪的部分，如果我从不同的浏览器登录同一个用户，它会复制我的所有内容两次，如果我第三次登录，它会复制所有内容 3 次，依此类推！据我所知，问题出在这一行：

```
LEFT JOIN #__session AS ss ON ss.userid = u.id AND ss.userid > 0 AND ss.guest = 0 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:15:22.813

你可能想给这个 user_id 添加一个别名，这样数据库就知道这个 user_id 指的是哪个表。

`LEFT JOIN #__comprofiler AS ua ON user_id = a.created_by`

我会运行较小版本的查询，看看何时开始引入重复项。从前 3 个表连接开始。如果您没有看到重复项，请再添加一个连接，因此您将连接查询中的前四个表。将有助于准确找到问题的出现位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:04:09.323

它重复是因为从另一个浏览器登录会为该用户创建一个新会话。试着做

```
SELECT DISTINCT
... 
```

# mysql - 如何按 DESC 顺序分组

> ID：15390303
> 
> 赞同：40
> 
> 时间：2013-03-13T15:59:44.897
> 
> 标签：mysql, sql, group-by

我有下表称为问题：

```
ID | asker 
1  | Bob
2  | Bob
3  | Marley 
```

我只想选择每个提问者一次，如果有多个同名提问者，请选择 ID 最高的一个。所以，预期的结果：

```
ID | asker 
3  | Marley
2  | Bob 
```

我使用以下查询：

```
SELECT * FROM questions GROUP by questions.asker ORDER by questions.id DESC 
```

我得到以下结果：

```
ID | asker 
3  | Marley
1  | Bob 
```

它选择它遇到的第一个“鲍勃”而不是最后一个。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-13T16:01:24.937

如果你想要`id`每个的最后一个`asker`，那么你应该使用一个聚合函数：

```
SELECT max(id) as id, 
   asker
FROM questions 
GROUP by asker 
ORDER by id DESC 
```

您得到不寻常结果的原因是因为 MySQL 使用了一个扩展`GROUP BY`，允许选择列表中的项目不聚合并且不包含在 GROUP BY 子句中。然而，这可能会导致意外的结果，因为 MySQL 可以选择返回的值。（参见[MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)）

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

现在，如果您需要从表中返回其他列，但由于可能获得的结果不一致而不想将它们添加到表中`GROUP BY`，那么您可以使用子查询来执行此操作。（[演示](http://sqlfiddle.com/#!9/a82d769/5/0)）

```
select 
  q.Id,
  q.asker,
  q.other -- add other columns here
from questions q
inner join
(
  -- get your values from the group by
  SELECT max(id) as id, 
    asker
  FROM questions 
  GROUP by asker 
) m
  on q.id = m.id
order by q.id desc 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-06-13T10:38:51.807

通常 MySQL 只允许按升序记录分组。所以我们可以在分组之前对记录进行排序。

```
选择 *
从 （
  选择 *
  来自问题
  ORDER BY id DESC
) 作为问题
GROUP BY questions.asker

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T16:01:20.103

需要使用`GROUP BY`和对记录进行分组，`MAX()`以获得每个 的最大 ID `asker`。

```
SELECT  asker, MAX(ID) ID
FROM    TableName
GROUP   BY asker 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3b1c5/1)

输出

```
╔════════╦════╗
║ ASKER  ║ ID ║
╠════════╬════╣
║ Bob    ║  2 ║
║ Marley ║  3 ║
╚════════╩════╝ 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-01T10:29:09.153

我写这个答案是因为@Taryn 在接受的答案中的第一个/更短的替代方案只有在您只选择 GROUP BY 和 MAX 中使用的列时才有效。用户提出的问题是选择表中的所有列（他使用了 SELECT *）。因此，当您向表中添加另一个第三列时，查询结果中的该列值将不正确。您将从不同的表行中获得混合值。@Taryn 的第二个/更长的替代方案（使用内部联接和子查询）有效，但查询是无用的复杂，在我的用例中比我下面的简单替代方案**慢 5 倍。**

* * *

考虑表`questions`：

```
id | asker 
-----------
1  | Bob
2  | Bob
3  | Marley 
```

查询`SELECT max(id) as id, asker FROM questions GROUP BY asker ORDER BY id DESC`返回**预期**：

```
id | asker 
-----------
3  | Marley
2  | Bob 
```

* * *

现在考虑另一个表`questions`：

```
id | asker  | other
-------------------
1  | Bob    | 1st
2  | Bob    | 2nd
3  | Marley | 3rd 
```

查询`SELECT max(id) as id, asker, other FROM questions GROUP BY asker ORDER BY id DESC`返回**意外**：

```
id | asker  | other
-------------------
3  | Marley | 3rd
2  | Bob    | 1st 
```

...请注意，`other`第二行结果的值不正确，因为`id=2`来自表格的第二行但`other=1st`来自表格的第一行！这就是许多用户在评论 Taryn 的答案时报告该解决方案不起作用的方式。

* * *

选择其他列时可能的简单解决方案是使用`GROUP BY`+ `DESC`：

`SELECT id, asker, other FROM questions GROUP BY asker DESC`

```
id | asker  | other
-------------------
3  | Marley | 3rd
2  | Bob    | 2nd 
```

（见演示：[https](https://www.db-fiddle.com/f/esww483qFQXbXzJmkHZ8VT/10) ://www.db-fiddle.com/f/esww483qFQXbXzJmkHZ8VT/10 ）

...但是这个简单的解决方案有一些限制：

*   表必须是 InnoDB（我认为这不是问题，因为您将获得更好的性能，而且 MySQL >= 5.5.5 默认/首选存储引擎已从 MyISAM 更改为 InnoDB）
*   您必须为 GROUP BY 中使用的列创建索引 - 所以`asker`在这种情况下（我认为这不是问题，因为索引适用于这种情况，因此您将获得更好的性能。GROUP BY 通常需要创建 tmp 表但是当索引可用的 tmp 表不会被创建，这样更快）
*   对于 MySQL 5.7 和 8.0，需要禁用 SQL 模式 ONLY_FULL_GROUP_BY（例如`SET SESSION sql_mode = '';`）或`ANY_VALUE()`在未聚合的选定列上使用以避免错误 ER_WRONG_FIELD_WITH_GROUP。
*   [不幸的是，自 MySQL 8.0 https://dev.mysql.com/worklog/task/?id=8693](https://dev.mysql.com/worklog/task/?id=8693)以来，MySQL 开发人员在 GROUP BY 中删除了对 ASC/DESC 的支持，但幸运的是还有其他选择`GROUP BY col1 ORDER BY col1 ASC/DESC`：

`SELECT id, asker, other FROM questions GROUP BY asker ORDER BY asker DESC`

```
id | asker  | other
-------------------
3  | Marley | 3rd
2  | Bob    | 2nd 
```

（见演示：[https](https://www.db-fiddle.com/f/esww483qFQXbXzJmkHZ8VT/11) ://www.db-fiddle.com/f/esww483qFQXbXzJmkHZ8VT/11 ）

...结果与上面相同`GROUP BY ... DESC`（不要忘记使用 InnoDB 并创建索引）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-14T04:08:17.383

其他人关于使用 MAX(ID) 来获得你想要的结果是正确的。如果您想知道为什么您的查询不起作用，那是因为`ORDER BY`发生*在*`GROUP BY`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-30T13:12:03.753

要获取每一列：

```
SELECT * FROM questions
WHERE id IN 
(SELECT max(id) as id, asker
FROM questions 
GROUP by asker 
ORDER by id DESC) 
```

@bluefeet 答案的改进版本。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-29T12:53:38.480

这是因为*AFTER*`ORDER BY`执行。 *`GROUP BY`*

 *试试这个：

```
SELECT * FROM questions
WHERE id IN 
(
    SELECT max(id) as id
    FROM questions 
    GROUP by asker 
    ORDER by id DESC
) 
```*

# javascript - 如何在javascript中获取某个类的所有静态成员的列表

> ID：15390307
> 
> 赞同：4
> 
> 时间：2013-03-13T15:59:51.753
> 
> 标签：javascript, oop, static

我想获取某个类的所有静态成员的列表。例如：我想获取所有的静态成员`Object`（比如`Object.create`if avalible 等等）。我怎样才能做到这一点？

例子：

```
var ClassA = function(){}
ClassA.prototype.getName = function(){return "ClassA";} //public method
ClassA.alertName = function(){ alert("ClassA");} //static method
ClassA.doSomething = function(){return "Do something";} //another static method 
```

所以，如果我有更多的静态成员，我想至少得到他们的名字。在这个例子中，我想得到`alertName`and `doSomething`。对于公共成员，您可以执行以下操作：

```
for (i in ClassA.prototype) {
    alert(i);
} 
```

静态成员怎么样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:59:29.890

你是如何检查它们的？

为什么你不能只使用相同的迭代器来完成你的实际课程？

```
var key = "";
for (key in MyClass) { console.log(key); } 
```

这不是你的日常语言。
实际上，JS 中的所有内容都是一个对象，包括函数/构造函数。

因此，在您看来，这里的“公共静态”实际上只是一个对象的方法，它可以像任何其他对象一样被迭代。

另外：原型设计是公共静态的。
如果您将属性原型化到您的实例中，那么所有实例都会引用该完全相同的属性，并且对该属性的修改将更改其他所有人的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-24T13:58:45.530

您可以使用[Object.keys](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)

```
Object.keys(MyClass); 
```

这将为您提供所需的所有静态属性。此外，您不需要检查继承的属性。

# c++ - 使用 C++ 字符串时内存泄漏

> ID：15390309
> 
> 赞同：1
> 
> 时间：2013-03-13T15:59:53.343
> 
> 标签：c++, valgrind

当我在下面的程序上运行 valgrind 时，它会报告内存泄漏。你能解释一下原因吗？

```
#include <string>
#include <iostream>

using namespace std;

int main()
{
    char * arr = (char *) ::operator new(sizeof(char));
    string s = arr;

    return 0;
} 
```

1.  行字符串 s = arr 上到底发生了什么？它会复制 arr 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:01:43.710

`valgrind`是正确的。你打电话`new`又不打电话`delete`，因此你有内存泄漏。

当您分配`arr`给 时`s`，后者不拥有前者的所有权；相反，它会复制。释放 仍然 是 你 的 责任`arr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:01:41.180

`delete arr`在您的代码末尾将处理内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:02:54.047

的所有权`arr`不会传递给`s`，它会复制`arr`到`s`的内部缓冲区。`delete`您应该使用运算符释放内存

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T16:03:39.433

我认为您假设`string`将`arr`拥有`delete`. `arr`但这是错误的。

```
string s = arr; 
```

只需复制字符，`arr`直到到达`\0`。所以，你应该`delete` `arr`自己。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T16:08:01.363

**`new[]`**C++ 中的运算符动态分配内存。所有这些内存都必须由程序员手动释放。这是由**`delete[]`**操作员完成的。如果您不删除使用 new 分配的内存，则会造成内存泄漏。

关于该主题的更多信息可以在这个[C++ FAQ](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html)中找到。

# asp.net - IIS 内存泄漏 - 会话大小

> ID：15390313
> 
> 赞同：3
> 
> 时间：2013-03-13T15:59:59.163
> 
> 标签：asp.net, session, iis-7, memory-leaks

我正在尝试解决我们的 Web 应用程序的内存问题。使用 SCOM 工具，我看到我们的应用程序正在使用 5.8 GIGS 的内存。这发生在我们无法访问的生产服务器上。它不会在 DEV 和 TEST 中发生（可能是由于使用）。

我怀疑这与会话中的对象有关。有没有办法知道我们的会话使用了多少总内存？

你能给我一些提示来确定内存泄漏的来源吗？

我没有使用 Interop 或任何非托管代码——据我所知。这是一个在 IIS7 上运行的 ASP.Net 4 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:39:12.597

看看这些链接：

[http://forums.asp.net/t/1776025.aspx/1](http://forums.asp.net/t/1776025.aspx/1)

[如何测量 Live ASP.NET MVC Web 应用程序的内存使用情况？](https://stackoverflow.com/questions/7681790/how-to-measure-memory-usage-for-a-live-asp-net-mvc-web-application)

以及您的应用程序可能使用大量内存的可能原因：

[ASP.NET 网站内存使用率相当高](https://stackoverflow.com/questions/3405557/asp-net-website-memory-usage-quite-high)

# javascript - javascript .apply 带有变量函数名

> ID：15390321
> 
> 赞同：0
> 
> 时间：2013-03-13T16:00:12.517
> 
> 标签：javascript, jquery, jquery-plugins

我在使用参数调用函数时遇到问题，其中函数的名称存储在变量中。我一直在使用`.call`并`.apply`尝试调用该函数，但并没有取得太大的成功。

这是我尝试过的：

```
function slideup(){
//exec animation

}

Screen.prototype.init = function() {
    //has access to `this`, Screen is instantiated via constructor and passed the calling element 
    var self = this;

    self.animation = 'slideup';//this is a switch in my code with default val of 'slideup'  

    function hashChange(){

        self.animation.apply(self, [arg1,arg2]);
    }
} 
```

如果我替换`self.animation.apply`为`slideup.apply`... 函数运行正常，但是当我运行`self.animation.apply`或`self[animation].apply` 得到`self.animation.apply is not a function`. 如何使用存储在变量中的字符串值来调用`slideup()`函数，并将正确的参数传递给它？这个想法是`self.animation`变量将存储自定义动画函数的名称，可以通过自定义插件的传递选项覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:01:54.503

你得到一个字符串。您必须访问以此字符串命名的属性： `this[this.animation]();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:12:27.050

所以 Screen.animation 是一个字符串，它是一个函数的名称。. . 在这种情况下，您需要使用方括号表示法来访问变量（在适当的范围内）。假设 slideup 是一种全局方法，您正在寻找的代码是

```
window[self.animation].apply(self, [args]); 
```

# regex - rsyslog - 如何将特定的日志文件转发到不同的目的地

> ID：15390322
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:00:15.387
> 
> 标签：regex, linux, rsyslog

我有一个 rsyslog 服务器和数百台 Linux、Windows、ESX 和 F5 主机，它们将向它发送 syslog 消息。有没有办法从每条消息中捕获主机名中的特定字符，并根据该字符将消息转发到适当的目录？

例如，对于来自 adm01lt 的消息，我想捕获第五个字符。L 用于 Linux，我有一个名为 /var/log/linux 的目录，我希望在日志进入时动态创建每个主机的子目录。

另一个例子，对于来自 adm21wp 的消息，我想捕获第五个字符。W 用于 Windows，我有一个名为 /var/log/windows 的目录，我希望在日志进入时动态创建每个主机的子目录。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:19:35.223

我会说 use `Rsyslog`which 具有非常好的过滤功能，您可以编写正则表达式来过滤特定关键字。

# c# - 从 SelectList 中获取 MultiSelectList 的 SelectListItems

> ID：15390327
> 
> 赞同：0
> 
> 时间：2013-03-13T16:00:24.857
> 
> 标签：c#, asp.net-mvc-2

我创建了一个 SelectList 并将其初始化如下：

```
SelectList _selectList = new SelectList(new List<SelectListItem>
{
    new SelectListItem{Text = "aa", Value="bb"},
    new SelectListItem{Text = "cc", Value = "dd"},
    new SelectListItem{Text = "gg", Value = "ff"}
}); 
```

（这是一个示例。通常，我添加 15 或 20 个 SelectListItems）

然后我尝试获取此`_selectList`实例的文本和值以设置实例：

```
foreach (var item in _selectList)
{
    var a = item.Text;
    var b = item.Value;
} 
```

此时，`item.Text`返回`System.Web.Mvc.SelectListItem`和`item.Value`返回`null`。

如果我`_selectList`在调试期间用光标检查，所有`SelectListItems`及其下的值`base{System.Web.Mvc.MultiSelectList}`，我无法获得这些值。问题是“我该怎么办？”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:42:20.547

如果你想使用 SelectList 你可以像这样使用它：

```
var model = new IndexModel()
{
    lista = new SelectList(new string[] { "BMW","Volvo" }),
    listb = new SelectListItem[]
        {
            new SelectListItem {Text = "aa", Value = "bb"},
            new SelectListItem {Text = "cc", Value = "dd"},
            new SelectListItem {Text = "gg", Value = "ff"}
        },
     listc = new SelectList(new SelectListItem[]
              {
                       new SelectListItem {Text = "aa", Value = "bb"},
                       new SelectListItem {Text = "cc", Value = "dd"},
                       new SelectListItem {Text = "gg", Value = "ff"}
              }, "Value", "Text")

}; 
```

它只是构建项目列表的帮手。您绝对可以直接在帮助程序中使用 IEnumerable：

```
@Html.DropDownList("dropdown", Model.lista)
@Html.DropDownList("dropdown2", Model.listb)
@Html.DropDownList("dropdown3", Model.listc) 
```

编辑：更新的代码。实际上，在查看 SelectList 源代码后，您会看到它源自 MultiSelectList -> [http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/4284ca5270b9#src/System.Web.Mvc/MultiSelectList.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/4284ca5270b9#src/System.Web.Mvc/MultiSelectList.cs)并且正在使用 DataBinder基于给定字段评估文本和值。因此，如果您明确给出字段名称（就像 listc 一样），您可以使用 SelectListItems 列表。

mz

# matlab - MATLAB - 周期函数的最大似然（角度）

> ID：15390328
> 
> 赞同：5
> 
> 时间：2013-03-13T16:00:28.600
> 
> 标签：matlab

在 MATLAB 统计教程中，有一节名为*“拟合更复杂的分布：两个正态的混合”* [http://www.mathworks.com/help/stats/examples/fitting-custom-univariate-distributions.html](http://www.mathworks.com/help/stats/examples/fitting-custom-univariate-distributions.html)

```
pdf_normmixture = @(x,p,mu1,mu2,sigma1,sigma2) ...
                     p*normpdf(x,mu1,sigma1) + (1-p)*normpdf(x,mu2,sigma2);
lb = [0 -Inf -Inf 0 0];
ub = [1 Inf Inf Inf Inf];
start = [pStart muStart sigmaStart sigmaStart];
paramEsts = mle(x, 'pdf',pdf_normmixture, 'start',start, 'lower',lb, 'upper',ub) 
```

我想应用相同的方法将两个或多个法线拟合到我拥有的一组单变量值，但**在周期域内**。也就是说，具有 0° 到 360° 值的角度链接在一起作为一个圆形范围。我不确定如何声明它以使 MATLAB 理解这种术语。

是否可以更改此实现以添加循环范围情况？

问候， 伊格纳西奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:14:18.463

我正在使用 von Mises 分布[http://en.wikipedia.org/wiki/Von_Mises_distribution](http://en.wikipedia.org/wiki/Von_Mises_distribution)，它被认为是包裹法线的近似值（请参阅“循环统计 S. Rao Jammalamadaka, A. SenGupta”中的主题中的条件'）。不幸的是，我没有 matlab 来测试它，但我认为代码正在运行。因此，如果近似值有效，则可以执行以下操作：

**主功能：**

% 你应该提供列向量 theta 0-2pi

```
n=size(theta,1);

mu=0;

k=1;

theParameters=[mu;k];
options = optimset('TolFun',0.01);
outputPar = fminsearch('ml',theParameters,options,n,theta); 
```

**机器学习功能**

```
function mLike=ml(theParameters,n,theta)

mu=theParameters(1,1);
k=theParameters(2,1);

theSum=0;
for i=1:n
   theSum=theSum+k*cos(theta(i,1)-mu);
end    
mLike=-n*log(2*pi*besselj(0,k)) + theSum;
mLike=-mLike; 
```

我希望它有帮助！R 中还有一个工具箱可以处理这种估计[http://cran.r-project.org/web/packages/circular/circular.pdf](http://cran.r-project.org/web/packages/circular/circular.pdf)。

如果您对 k 的积极性有疑问，为了避免处理约束优化，请执行 k=exp(kk) 并估计 kk。

# android - 计算所有密度的九个补丁大小

> ID：15390329
> 
> 赞同：0
> 
> 时间：2013-03-13T16:00:32.023
> 
> 标签：android, nine-patch, density-independent-pixel

我不知道如何计算所有文件夹（hdpi，mdpi ...）中九个补丁图像中圆角的像素大小的最佳方法，如果我想在所有设备上使用例如 5dp 圆角或接近这个大小的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:12:15.670

阅读此[链接](http://developer.android.com/guide/practices/screens_support.html)

一个快速的总结是

```
ldpi (0.75 x mdpi)
 |
mdpi (basline)
 |
hdpi (1.5 x mdpi)
 |
xhdpi (2.0 x mdpi) 
```

另外，请记住 Android 会缩放图像，因此如果您将角设置为 5dp。在所有设备*上*都是 5dp。使用不同的分辨率图像以确保它在更高密度的屏幕上看起来质量低。

因此，在您的情况下，创建一个 5px 图像（mdpi 图像），然后使用上面显示的指标将其缩放到其他密度。

# git - 只需给我状态 git

> ID：15390335
> 
> 赞同：1
> 
> 时间：2013-03-13T16:00:42.333
> 
> 标签：git, git-status

有时我打错了我真正的意思：

```
whunt$ git statsu
git: 'statsu' is not a git command. See 'git --help'.

Did you mean this?
    status 
```

[您可以通过更改git config](http://schacon.github.com/git/git-config.html)中的 help.autocorrect 来告诉 git 只做它建议的事情。但有时我打错了我不想让 git 自动为我运行的破坏性操作：

```
whunt$ git checkoot some/file
git: 'checkoot' is not a git command. See 'git --help'.

Did you mean this?
    checkout 
```

所以真的，与其运行它认为我想要的，我宁愿让 git 在它不理解命令时告诉我状态。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:49:16.527

使用别名。

我正在使用 zsh，只需将以下内容添加到 ~/.zshrc。或 ~/.bashrc 如果仅使用 Bash。

```
alias gs = 'git status' 
```

现在，如果仍然拼写错误，您可以责怪您的键盘。

### 添加

这是我所有的 git 别名，以避免你们更多的错字:)

```
alias gs="git status"
alias ga='git add '
alias gb='git branch '
alias gc='git commit'
alias gcm='git commit -m'
alias gd='git diff'
alias go='git checkout '
alias gh='git hist'
alias gk='gitk --all&'
alias gx='gitx --all' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:28:26.733

除了 Billy 的 shell 别名，如果您愿意，您还可以在 git 本身中创建别名。

```
git config --global alias.statsu status
git config --global alias.checkoot checkout 
```

你让它听起来像你倾向于犯同样的错别字，所以也许为它们详尽地创建别名并不是太不方便或不切实际。

# datetime - X 轴上的日期标签未针对每列显示

> ID：15390338
> 
> 赞同：0
> 
> 时间：2013-03-13T16:00:47.513
> 
> 标签：datetime, graph, highcharts, labels

我有一张我昨天和今天早上在 jsFiddle 上工作的图表：

[http://jsfiddle.net/XJES3/6/](http://jsfiddle.net/XJES3/6/)

如果您看一下，您会发现列的 xAxis 标签并不总是显示出来。我确信某处有一个设置迫使他们始终显示或可能设置间隔的方法，但到目前为止我在 API 文档中找不到它。如果有人能指出我正确的方向，我会很高兴。

谢谢一堆。

Highcharts代码如下：

```
var go_local_scriblio_authority_history = new Highcharts.Chart({
    chart: {
        renderTo: 'go-local-scriblio-authority-history',
        type: 'column'
    },
    credits: {
        enabled:false
    },
    title: {
        text: null
    },
    subtitle: {
        text: null
    },
    xAxis: {
        type: 'datetime',
        labels: {
            step: 1,
            rotation: -90,
            style: {
                fontSize: '10px',
                fontFamily: 'Helvetica, sans-serif',
                color: '#629bc0'
            },
            x: 3,
            formatter: function() {
                return Highcharts.dateFormat('%b', this.value).toUpperCase();
            }
        },
        reversed: false,
        lineColor: '#ffffff',
        tickColor: '#ffffff'
    },
    yAxis: {
        min: 0,
        labels: false,
        title: false,
        gridLineColor: '#ffffff',
    },
    legend: false,
    tooltip: {
        formatter: function() {
            return '<strong>' + Highcharts.dateFormat('%b %Y', this.x) + ':</strong> ' + this.y;
        }
    },
    series: [{
        name: 'Article Counts by Month',
        color: '#629bc0',
        data: [[Date.UTC(2013,  2, 1),2], [Date.UTC(2013,  1, 1),22], [Date.UTC(2012,  12, 1),11], [Date.UTC(2012,  11, 1),22], [Date.UTC(2012,  10, 1),28], [Date.UTC(2012,  9, 1),37], [Date.UTC(2012,  8, 1),38], [Date.UTC(2012,  7, 1),60], [Date.UTC(2012,  6, 1),87], [Date.UTC(2012,  5, 1),53], [Date.UTC(2012,  4, 1),62], [Date.UTC(2012,  3, 1),51], [Date.UTC(2012,  2, 1),29], [Date.UTC(2012,  1, 1),54], [Date.UTC(2011,  12, 1),50], [Date.UTC(2011,  11, 1),49], [Date.UTC(2011,  10, 1),45], [Date.UTC(2011,  9, 1),40], [Date.UTC(2011,  8, 1),42], [Date.UTC(2011,  7, 1),50], [Date.UTC(2011,  6, 1),48], [Date.UTC(2011,  5, 1),57], [Date.UTC(2011,  4, 1),44], [Date.UTC(2011,  3, 1),52]]
    }],
    plotOptions: {
        series: {
            borderWidth: 0,
            shadow: false,
            pointWidth: 10,
            pointPadding: 0,
            groupPadding: 0,
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:34:25.857

你需要设置一个tickInterval： [http ://api.highcharts.com/highcharts#xAxis.tickInterval](http://api.highcharts.com/highcharts#xAxis.tickInterval)

[http://jsfiddle.net/XJES3/7/](http://jsfiddle.net/XJES3/7/)

```
tickInterval:86400*30 * 1000, //30 days, in miliseconds 
```

# c# - 处理 Linq-to-Xml 中的空值和缺失列

> ID：15390341
> 
> 赞同：0
> 
> 时间：2013-03-13T16:00:55.663
> 
> 标签：c#, .net, linq, linq-to-xml

我有一个用户提供的 DataTable，其中包含以下信息：

```
| Name      | Alias        |
|---------------------------
| Batman    | Dark Knight  |
| Superman  | Man of Steel |
| Spiderman | null         | 
```

我需要将此表转换为 Xml 以发送到存储过程并获取类似于以下内容的 Xml：

```
<Superheroes>
    <Superhero Name="Batman" Alias="Dark Knight"/>
    <Superhero Name="Superman" Alias="Man of Steel"/>
    <Superhero Name="Spiderman"/>
</Superheroes> 
```

我想使用 Linq-to-Xml（用于学习目的）来解决这个问题。这是我到目前为止所拥有的：

```
XDocument doc;

doc = new XDocument(
        new XElement("Superheroes",
        from row in table.AsEnumerable()
            select new XElement("Superhero",
                new XAttribute("Name", row.Field<string>("Name")),
                new XAttribute("Alias", row.Field<string>("Alias"))
))); 
```

问题是蜘蛛侠行。由于为空，上面的查询不起作用。

**问题**

1.  如何处理 Linq-to-Xml 中的空蜘蛛侠行？

2.  如果用户忘记添加别名行，我需要能够处理该位置。在这种情况下，别名应该是 (a) 根本不在 Xml 中或 (b) 具有空值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:15:33.390

您可以为此编写一个辅助函数，该函数将返回`XAttribute`或`null`。Linq to XML 将忽略`null`.

```
private XAttribute GetAlias(DataRow row)
{
    if(row.Field<string>("Alias") != null)
    {
        return new XAttribute("Alias", row.Field<string>("Alias"));
    }
    return null;
} 
```

并像这样使用它。

```
doc = new XDocument(
    new XElement("Superheroes",
    from row in table.AsEnumerable()
        select new XElement("Superhero",
            new XAttribute("Name", row.Field<string>("Name")),
            GetAlias(row)
))); 
```

如果缺少 Alias 列，这也应该有效，因为如果缺少列，`Field<T>(string)`扩展方法应该返回`null`。

或者，如果您只想在缺少列或值为空字符串时让属性具有空字符串，`null`您可以执行以下操作。

```
doc = new XDocument(
    new XElement("Superheroes",
    from row in table.AsEnumerable()
        select new XElement("Superhero",
            new XAttribute("Name", row.Field<string>("Name")),
            new XAttribute("Alias", row.Field<string>("Alias") ?? string.Empty)
))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:30:00.057

如果属性名称应与列标题相同，则另一种解决方案。您只能添加那些不具有空值的属性：

```
doc = new XDocument(
         new XElement("Superheroes",
            from row in table.AsEnumerable()
            select new XElement("Superhero",
                from column in table.Columns.Cast<DataColumn>()
                let value = row.Field<string>(column)
                where value != null // just filter out nulls
                select new XAttribute(column.Caption, value)
        ))); 
```

顺便说一句，蜘蛛侠不如蝙蝠侠或超人好

* * *

实际上，您可以创建以下扩展，它将根据表名和列名从任何 DataTable 构建 xml（它需要 System.Data.Entity.Design 程序集中的 PluralizationService）：

```
public static class Extensions
{
    public static XDocument ToXml(this DataTable table)
    {
        if (String.IsNullOrEmpty(table.TableName))
           throw new ArgumentException("Table name is required");

        var pluralizationService = PluralizationService
                .CreateService(new CultureInfo("en-US"));
        string elementName = pluralizationService.Singularize(table.TableName);

        return new XDocument(
            new XElement(table.TableName,
                from row in table.AsEnumerable()
                select new XElement(elementName,
                    from column in table.Columns.Cast<DataColumn>()
                    let value = row.Field<string>(column)
                    where value != null
                    select new XAttribute(column.Caption, value)
                    )
                )
            );
    }
} 
```

用法很简单：

```
DataTable table = new DataTable("Superheroes"); // name is required
table.Columns.Add("Name");
table.Columns.Add("Alias");
table.Rows.Add("Batman", "Dark Knight");
table.Rows.Add("Superman", "Man Of Steel");
table.Rows.Add("Spiderman", null);
var doc = table.ToXml(); 
```

结果非常好

```
<Superheroes>
  <Superhero Name="Batman" Alias="Dark Knight" />
  <Superhero Name="Superman" Alias="Man Of Steel" />
  <Superhero Name="Spiderman" />
</Superheroes> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:06:40.567

您可以使用内联`if`语句（使用[`?:`operator](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)）扩展查询并检查是否`Alias`在当前行中设置：

```
doc = new XDocument(
        new XElement("Superheroes",
        from row in table.AsEnumerable()
        select new XElement("Superhero",
            new XAttribute("Name", row.Field<string>("Name")),
            (row.Field<string>("Alias") != null ? new XAttribute("Alias", row.Field<string>("Alias")) : null))
)); 
```

返回`null`根本不会更改生成的 XML，因此`doc`包含您希望它包含的内容：

```
<Superheroes>
  <Superhero Name="Batman" Alias="Dark Knight" />
  <Superhero Name="Superman" Alias="Man of Steel" />
  <Superhero Name="Spiderman" />
</Superheroes> 
```

# javascript - 如何加载文件并查看其内容？

> ID：15390342
> 
> 赞同：2
> 
> 时间：2013-03-13T16:00:55.820
> 
> 标签：javascript, jquery, html

我一直试图自己找到这个问题的答案，但没有找到答案。

在 html 文件中使用 JS/Jquery，我需要：

1.  按下链接时，它会加载位于服务器上的文件。
2.  在文件中搜索单词 x
3.  如果那个词没有出现或只出现一次，什么也不做。如果它出现 2 次或更多次打开 y url。

现在我什至不能正确地将文件加载为变量。

这是我到目前为止所尝试的：

```
var myvar = $.get("localhost/readme.txt").responseText; 
document.write(myvar); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:03:47.100

不再适用于编辑后的问题...

* * *

您无法通过 Javascript 访问客户端的文件系统 - 请参阅

[使用 javascript 访问本地文件](https://stackoverflow.com/questions/371875/local-file-access-with-javascript)

更多细节。

HTML 5 实现提供了一些有限的支持，但这可能不适合您的需求：

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:16:01.180

你很接近，你只是没有正确访问 responseText 。另外，不要`document.write()`用于输出测试数据，使用控制台。

```
$.get("localhost/readme.txt").done(function(filecontents) {
    console.log(filecontents);
    // now you can search through filecontents as plain text.
    if (filecontents.match(/myword/ig).length >= 2) {
        alert("DO STUFF!");
    }
}) 
```

# synchronization - Sync Framework 的文件同步在运行时工作

> ID：15390344
> 
> 赞同：0
> 
> 时间：2013-03-13T16:01:07.883
> 
> 标签：synchronization, sync, microsoft-sync-framework

我正在通过 Sync Framework 进行文件同步。我遵循了文件同步提供程序示例，但我的场景是 DetectChangesOnFileSystemReplica 将在运行时工作，而不是每次都检查 Sync Now。

我知道我们可以通过使用 Threading 和 Do-While 每秒检测源文件夹的更改来做到这一点，但这是个坏主意，对吧？

有没有办法在运行时检查源文件夹的更改（如创建、重命名、删除新文件）？

顺便说一句，我尝试使用 SyncToy，但它仍然使用“立即同步”而不是运行时同步。

DropBox/SkyDrive 是如何做到的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:59:31.447

you have to explicitly invoke the sync. it will not automatically fire based on some file event. as neverseenjack stated, you can listen for file events and run the sync. but even then, you still have to invoke the sync explicitly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:59:06.927

您可以为您的文件系统事件创建处理程序，这将允许您检测更改并运行同步。

[http://msdn.microsoft.com/en-ca/library/1e6szwcw%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-ca/library/1e6szwcw%28v=vs.90%29.aspx)

希望这可以帮助！

# c++ - 通过引用传递参数时，可以将“&”放在哪里？

> ID：15390345
> 
> 赞同：17
> 
> 时间：2013-03-13T16:01:10.820
> 
> 标签：c++, pointers, reference, declaration

在我看到的示例中，参数是通过以下方式通过引用传递的：

```
void AddOne(int &y) 
```

在我拥有的代码中，我看到以下语法：

```
void AddOne(int& y) 
```

我想知道它是否相同，或者第二种情况与第一种情况有所不同。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T16:03:01.217

两者*完全相同*。完全没有区别。

重要的是`&`应该在*类型*和*变量*名之间。空格无所谓。

所以

```
void AddOne(int&  y);
void AddOne(int  &y);
void AddOne(int & y)
void AddOne(int   &     y);
void AddOne(int&y); 
```

是一样的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:02:31.300

语言相同，只是代码约定不同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:32:46.570

之间没有区别

```
void AddOne(int &y); 
```

和

```
void AddOne(int& y); 
```

乃至

```
void AddOne(int&y); 
```

在 C++ 中，因为实际标记之间的空格被丢弃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-27T14:42:54.470

这是风格问题。两者都是正确和有效的。

然而，Bjarne Stroustrup 似乎更喜欢将`&`and `*`放在类型名称旁边，强调变量的类型：

```
int* i;   // i is a pointer to an int 
int& j;   // j is a reference to an int 
```

有关指针，请参见此处：[https ://www.stroustrup.com/bs_faq2.html#whitespace](https://www.stroustrup.com/bs_faq2.html#whitespace)

请参阅“使用 C++ 的编程原理和实践”一书中的示例，并在此处获取参考：[https ://stackoverflow.blog/2019/10/11/c-creator-bjarne-stroustrup-answers-our-top-five-c-questions /](https://stackoverflow.blog/2019/10/11/c-creator-bjarne-stroustrup-answers-our-top-five-c-questions/)

# multithreading - 如何从另一个线程中断 ReadLn

> ID：15390347
> 
> 赞同：2
> 
> 时间：2013-03-13T16:01:16.670
> 
> 标签：multithreading, console-application, pascal, freepascal

在 Free-Pascal 中，我将创建一个跨平台控制台程序，它将在一堆线程 (TThread) 中完成大部分工作。

主程序仅用于不时接收一些用户命令并执行这些命令（并保持整个程序运行）。

这个循环作为程序的主循环在 Windows 和 Linux 上都能完美运行，无需使用 cpu：

```
repeat
  Write('> ');
  ReadLn(s);
  // execute command
until s='exit'; 
```

但我需要线程来命令主程序做一些工作。这意味着我需要一种方法来阻止另一个线程的 ReadLn 继续并检查命令标志。如果我能以某种方式发送一个 Enter 键来欺骗 ReadLn 以结束它会很好。

是否有其他方法可以制作跨平台主循环，该循环侦听用户字符串或按键，同时可以从其他线程命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:33:48.010

Yes, use unit keyboard. This abstracted keyboard support allows to peek for events (keys) , and this means a boolean set in a thread could make it exit a loop.

See the keyboard unit in the (rtl) manual and textconsole games (fpctris, samegame) that come with a standard FPC install.

# jwplayer - jwplayer 6.1：尽管有控件，但 youtube 视频仍显示控件：false

> ID：15390358
> 
> 赞同：0
> 
> 时间：2013-03-13T16:01:35.923
> 
> 标签：jwplayer

我正在使用 jwplayer 6.1，在我设置的播放器设置中

```
controls: false 
```

但是，发生了一些奇怪的事情……

**youtube 视频：**我确实得到了一个控制栏，它会在一秒钟内消失（见截图）。 **mp4-videos：**我没有得到这个控制栏，一切都很好。

如何摆脱 youtube 视频的“闪烁”控制栏？

![我很快就捕捉到了这个奇怪的控制栏](../Images/08856845974f5098580ea019dc43f6d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T09:09:51.053

我已经检查了不同情况下的问题并看到了相同的问题并找到了解决此问题的方法，请参见下文

我在用`jwplayer.version="6.8.4616"`

## **问题**

> 没有 YouTube 链接的相同功能

主要：HTML5 =>[链接](http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/7/)

主要：闪光=>[链接](http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/8/)

> 与 YouTube 链接相同的功能

[在这里](http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/5/)检查

## **解决方案 ：**

与 YouTube 链接相同的功能

[http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/26/](http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/26/)

您可以尝试制作动画`onReady`而不是`onPlay` **解决您的问题。**

```
onReady: function(){
                      console.log('player: onReady');
                      player.animateResize(width, height);  
                   } 
```

> **但这只是对 youtube 视频的修复，但如果您尝试在没有 youtube 链接的情况下制作相同的动画，问题仍然存在。**

## **没有 YouTube 链接的相同功能**

主要：HTML5 [http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/14/](http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/14/)

主要：flash [http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/27/](http://jsfiddle.net/hiteshbhilai2010/QZ3Ye/27/)

希望这对您有所帮助。

# iphone - 如何在不允许旋转其界面的控制器中旋转视图？

> ID：15390359
> 
> 赞同：4
> 
> 时间：2013-03-13T16:01:37.687
> 
> 标签：iphone, ios, objective-c, ios6, uiinterfaceorientation

帮我解决任务 - 我有一个不允许旋转其界面的 viewController：

```
- (BOOL)shouldAutorotate {
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

但我需要旋转出现在这个控制器中的 alertView！因此，如果用户旋转设备，alertView 应该跟随旋转并且主界面保持静止。我尝试订阅通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceRotated:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

但在我`deviceRotated:`收到这样有效载荷的通知： `NSConcreteNotification 0x101dc50 {name = UIDeviceOrientationDidChangeNotification; object = <UIDevice: 0x103e640>; userInfo = { UIDeviceOrientationRotateAnimatedUserInfoKey = 1; }}`

是什么`UIDeviceOrientationRotateAnimatedUserInfoKey`？以及如何使用来知道当前的 interfaceOrientation？或者建议一种更好的方法来获取当前方向并旋转alertView。

我试着用

`(BOOL)shouldAutorotateToInterfaceOrientation:UIInterfaceOrientation)toInterfaceOrientation`

和

`- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration`但这些方法不会在 iOS6 上被调用 :(

另外，还有其他方法可以用来知道设备正在旋转到某个方向吗？提前致谢！PS 我知道这个任务看起来有点傻，但这是客户的要求。对不起 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T17:59:56.307

有一个包含**当前设备方向**`orientation`的变量。您可以使用它来代替界面方向（不会像您已经注意到的那样旋转）。`UIDevice`

 **首先，您订阅设备方向更改，一个好地方是 on`viewWillAppear`和 unsubscribe on `viewWillDisappear`：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(orientationChanged:)
                                                 name:UIDeviceOrientationDidChangeNotification
                                               object:nil];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

在这个例子中，我们表明我们想要`orientationChanged:`在设备旋转时被调用，所以让我们实现它：

```
#pragma mark - Orientation change events
- (void)orientationChanged:(NSNotification*)notification {
    UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice] orientation];

    // Calculate rotation angle
    CGFloat angle;
    switch (deviceOrientation) {
        case UIDeviceOrientationPortraitUpsideDown:
            angle = M_PI;
            break;
        case UIDeviceOrientationLandscapeLeft:
            angle = M_PI_2;
            break;
        case UIDeviceOrientationLandscapeRight:
            angle = - M_PI_2;
            break;
        default:
            angle = 0;
            break;
    }

    // Apply rotation
    static NSTimeInterval animationDuration = 0.3;
    [UIView animateWithDuration:animationDuration animations:^{
        _viewToRotate.transform = CGAffineTransformMakeRotation(angle);
    }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:29:41.220

我删除了之前的答案，因为我误解了这个问题（实际上这是一个非常奇怪的请求，但是......）。我建议您使用具有无限旋转掩码的 Container View Controller，然后将您的控制器添加为子级：CVC 根据以下方法将旋转事件转发给子级：

```
- (BOOL) automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers
{
    return NO;
} 
```

因此，它将获取所有事件并仅将您想要的事件转发给孩子。

最后，容器将管理警报并正确旋转它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:46:06.863

由于方向被锁定到特定位置，因此参考状态栏不会有太大帮助。我的建议是使用加速度计并根据收到的 XYZ 值相应地更改 alertView。您可以使用 CGAffineTransformMakeRotation 或 CGAffineTransformRotate 方法旋转 alertView。

使用加速度计的示例如下：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{
accelerationValue[0] = acceleration.x;
accelerationValue[1] = acceleration.y;
accelerationValue[2] = acceleration.z;
NSLog(@"Acceleration X-axis: %1.1f, Y-axis: %1.1f, Z-axis: %1.1f", acceleration.x, acceleration.y, acceleration.z);
} 
```

当然，加速度计需要在各自的 ViewController 中设置和创建，但我想你明白我的意思。**

# ruby - 在 buildr 发布过程中更新 pom.xml 版本

> ID：15390360
> 
> 赞同：0
> 
> 时间：2013-03-13T16:01:39.710
> 
> 标签：ruby, jruby, buildr

我有一个构建器项目，它还包含一个用于其他项目的 pom.xml。我希望能够在增加构建文件 VERSION_NUMBER = "13.3.1-SNAPSHOT" 的同时增加 pom.xml 中的 13.3.1-SNAPSHOT。

我的构建文件中的 VERSION_NUMBER

```
# Auto-incremented by "release" task.
VERSION_NUMBER = "13.3.1-SNAPSHOT" 
```

我的 Jenkins 作业为运行此版本而执行的命令：

```
buildr clean release NEXT_VERSION=$nextVersion --trace 
```

查看构建器站点后：[http](http://buildr.apache.org/releasing.html) ://buildr.apache.org/releasing.html 看来我可能需要做类似的事情

```
Release.next_version = lambda do |next_version| # 13.3.1-SNAPSHOT
    new_version = @NEXT_VERSION@.split(/\./)
    new_version[0] = new_version[0] + 1
    new_version

    ### Run task to update pom.xml <version>
    ### Run task commit pom.xml ???
end 
```

任何人都可以帮助我吗？如何在同一版本中编辑 pom？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:03:52.453

您可以在发布任务或 Release.next_version 调用期间编辑 pom 文件以增加版本。

```
# code is untested, should just provide an idea
def replace_version(content)
    content.gsub(...)
end
File.open("pom.xml", "r+") { |f| f.write(replace_version(f.read)) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T07:48:58.600

`Release.next_version`仅用于确定下一个版本号，如果您执行`buildr release`.

看看`Buildr::Release`中途的课程[`lib/buildr/core/build.rb`](http://svn.apache.org/repos/asf/buildr/trunk/lib/buildr/core/build.rb)。您可能应该扩展该方法`update_version_to_next`。查看发布类的各种扩展（就在它下面），了解如何进行扩展。

# java - 如何连接来自 Java 类对象的静态方法？

> ID：15390363
> 
> 赞同：0
> 
> 时间：2013-03-13T16:01:44.923
> 
> 标签：java, clojure

我正在尝试从此处找到的 Vec2D 类调用 randomVector 方法[http://toxiclibs.org/docs/core/](http://toxiclibs.org/docs/core/)

这是我的代码：

```
(def particles (new ArrayList))

(defn add-particle []
  (dotimes [i 100]
    (doto particles
      ;(.add (new Vec2D (random (width)) (random (height))))
      (.add (Vec2D/randomVector)))) 
```

到目前为止一切都很好，但我需要从同一个类中调用其他方法，如 scale 和 add，我不知道如何在 Clojure 中做到这一点

这是我在Java中的做法：

```
Vec2D position = Vec2D.randomVector().scale( 60 ).add( canvasCenter ); 
```

任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:20:46.437

试试下面的代码，java静态方法应该像这样调用`(ClassName/methodName arguments)`

```
(defn add-particle []
  (dotimes [i 100]
    (doto particles
      (.add (Vec2D/randomVector))))) 
```

对于您的第二个问题，您需要以任何方式定义`canvasCenter`一些位置。

```
(defn add-particle []
      (dotimes [i 100]
        (doto particles
          (.add (.scale (Vec2D/randomVector) (float 60)) canvasCenter))) 
```

# asp.net-mvc-4 - 带有时间戳错误的并发 MVC 4

> ID：15390365
> 
> 赞同：3
> 
> 时间：2013-03-13T16:01:47.560
> 
> 标签：asp.net-mvc-4, concurrency, entity-framework-5

我正在开发一个用于出租物业的 mvc 应用程序。

模型 Imovel（房地产）

```
namespace Imobiliario.Models
{
    [Table("Imoveis")]
    public class Imovel
    {
        [Key]
        public int ImovelID { get; set; }

        [DisplayName("Tipo Cômodo")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public int TipoComodoID { get; set; }
        public virtual TipoComodo TipoComodo { get; set; }

        [DisplayName("Endereço")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public int EnderecoID { get; set; }
        public virtual Endereco Endereco { get; set; }

        [DisplayName("Quantidade de cômodos")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public int QtdComodos { get; set; }

        [DisplayName("Quantidade de banheiros")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public int QtdBanheiros { get; set; }

        [DisplayName("Alugado")]
        public bool Alugado { get; set; }

        [DisplayName("Valor do aluguel")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public decimal ValorAluguel { get; set; }

        public virtual ICollection<DetalhesImovel> DetalhesImovel { get; set; }
        public virtual ICollection<Imagem> Imagens { get; set; } 
        public virtual ICollection<Taxa> TaxasList { get; set; }

        [ConcurrencyCheck]
        [Timestamp]
        public Byte[] Timestamp { get; set; }

    }
} 
```

模型 Endereço（地址）：

```
namespace Imobiliario.Models
{
    [Table("Enderecos")]
    public class Endereco
    {

        [Key]
        [ScaffoldColumn(false)]
        public int EnderecoID { get; set; }

        [DisplayName("Logradouro")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public string Logradouro { get; set; }

        [DisplayName("Número")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public int Numero { get; set; }

        [DisplayName("Complemento")]
        public string Complemento { get; set; }

        [DisplayName("Bairro")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public string Bairro { get; set; }

        [DisplayName("Cidade")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public string Cidade { get; set; }

        [DisplayName("Cep")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public string Cep { get; set; }

        [DisplayName("Estado")]
        [Required(ErrorMessage = "Campo obrigatório.")]
        public string Estado { get; set; }
    }
} 
```

模型DetalhesImovel（详情）：

```
namespace Imobiliario.Models
{
    [Table("DetalhesImovel")]
    public class DetalhesImovel
    {
        [Key]
        public int DetalhesImovelID { get; set; }

        [DisplayName("Descrição")]
        public string Descricao { get; set; }

        public string Grupo { get; set; }

        [ScaffoldColumn(false)]
        public DateTime DataCadastro { get; set; }

        public virtual ICollection<Imovel> Imovel { get; set; }

        public override bool Equals(object obj)
        {
            var param = (DetalhesImovel)obj;
            if (DetalhesImovelID == param.DetalhesImovelID || Descricao == param.Descricao)
                return true;
            return false;
        }

    }
} 
```

Imovel控制器：

```
namespace Imobiliario.Controllers
{
    public class ImoveisController : Controller
    {
        private ImobiliarioDbContext db = new ImobiliarioDbContext();

        //
        // GET: /Imoveis/

        public ActionResult Index(int? id, int? detalhesImovel, int? imagensImovel)
        {
            var viewModel = new IndexImovel();
            viewModel.Imovel =
                db.Imoveis.Include(i => i.DetalhesImovel.Select(d => d.Imovel))
                .Include(i => i.TaxasList.Select(im => im.Imovel))
                .Include(i => i.Imagens.Select(im => im.Imoveis))
                .Include(i => i.TipoComodo)
                .Include(i => i.Endereco)
                .OrderBy(i => i.ImovelID);

            return View(viewModel);
        }

        //
        // GET: /Imoveis/Details/5

        public ActionResult Details(int id = 0)
        {
            var imoveis = db.Imoveis.Include(i => i.DetalhesImovel.Select(d => d.Imovel))
                .Include(i => i.TaxasList.Select(im => im.Imovel))
                .Include(i => i.Imagens.Select(im => im.Imoveis))
                .Include(i => i.TipoComodo)
                .Include(i => i.Endereco)
                .Where(i => i.ImovelID == id)
                .OrderBy(i => i.ImovelID);

            return View(imoveis.ToList());

        }

        //
        // GET: /Imoveis/Create

        public ActionResult Create()
        {
            ViewBag.TipoComodoID = new SelectList(db.TipoComodo, "TipoComodoID", "Descricao");
            var todosDetalhes = db.DetalhesImoveis;
            var viewModel = new List<ImovelDetalhes>();
            foreach (var detalhe in todosDetalhes)
            {
                viewModel.Add(new ImovelDetalhes
                {
                    Descricao = detalhe.Descricao,
                    DetalhesImovelID = detalhe.DetalhesImovelID,
                });
            }
            ViewBag.Detalhes = viewModel;
            return View();
        }

        //
        // POST: /Imoveis/Create

        [HttpPost]
        public ActionResult Create(CreateImovel imo, string[] detalhesSelecionados, int tipoComodoID)
        {
            if (ModelState.IsValid)
            {
                imo.Imovel.TipoComodoID = tipoComodoID;

                db.Enderecos.Add(imo.Endereco);
                db.Imoveis.Add(imo.Imovel);
                foreach (var item in db.DetalhesImoveis)
                {
                    if (detalhesSelecionados.Contains(item.DetalhesImovelID.ToString()))
                    {
                        imo.Imovel.DetalhesImovel = new Collection<DetalhesImovel>();
                        imo.Imovel.DetalhesImovel.Add(item);
                    }
                }
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(imo);
        }

        //
        // GET: /Imoveis/Edit/5

        public ActionResult Edit(int id = 0)
        {
            Imovel imovel =
                db.Imoveis.Include(i => i.DetalhesImovel).Include(i => i.Endereco).Include(i => i.TipoComodo).Include(i => i.TaxasList).Single(
                    i => i.ImovelID == id);
            PopularSeletorDetalhes(imovel);
            PopularDropDownTipoComodo(imovel.TipoComodoID);
            return View(imovel);
        }

        //
        // POST: /Imoveis/Edit/5

        [HttpPost]
        public ActionResult Edit(string[] detalhesSelecionados, Imovel imovel, FormCollection formCollection)
        {
            imovel =
                db.Imoveis.Include(i => i.Endereco).Include(i => i.TipoComodo).Include(i => i.DetalhesImovel).Single(
                    i => i.ImovelID == imovel.ImovelID);
            try
            {

                if (ModelState.IsValid)
                {
                    if (TryUpdateModel(imovel, "", null, new string[] { "DetalhesImovel" }))
                    {

                        AtualizaDetalhesImovel(detalhesSelecionados, imovel);
                        db.Entry(imovel).State = EntityState.Modified;
                        db.SaveChanges();
                        return RedirectToAction("Index");
                    }
                }

            }
            catch (DbUpdateConcurrencyException ex)
            {
                var entry = ex.Entries.Single();
                var databaseValues = (Imovel)entry.GetDatabaseValues().ToObject();
                var clientValues = (Imovel)entry.Entity;
                if (databaseValues.TipoComodo.Descricao != clientValues.TipoComodo.Descricao)
                    ModelState.AddModelError("TipoComodo", "Valor atual: " + databaseValues.TipoComodo.Descricao);
                if (databaseValues.QtdComodos != clientValues.QtdComodos)
                    ModelState.AddModelError("QtdComodos", "Valor atual: " + String.Format("{0:n}", databaseValues.QtdComodos));
                if (databaseValues.QtdBanheiros != clientValues.QtdBanheiros)
                    ModelState.AddModelError("QtdBanheiros", "Valor atual: " + String.Format("{0:n}", databaseValues.QtdBanheiros));
                if (databaseValues.Alugado != clientValues.Alugado)
                    ModelState.AddModelError("Alugado", "Valor atual: " + databaseValues.Alugado);
                ModelState.AddModelError(string.Empty, "The record you attempted to edit "
                    + "was modified by another user after you got the original value. The "
                    + "edit operation was canceled and the current values in the database "
                    + "have been displayed. If you still want to edit this record, click "
                    + "the Save button again. Otherwise click the Back to List hyperlink.");
                imovel.Timestamp = databaseValues.Timestamp;
            }

            catch (DataException)
            {
                //Log the error (add a variable name after Exception)
                ModelState.AddModelError(string.Empty, "Unable to save changes. Try again, and if the problem persists contact your system administrator.");
            }
            return View(imovel);
        }

        //
        // GET: /Imoveis/Delete/5

        public ActionResult Delete(int id = 0)
        {
            Imovel imovel = db.Imoveis.Find(id);
            if (imovel == null)
            {
                return HttpNotFound();
            }
            return View(imovel);
        }

        //
        // POST: /Imoveis/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            Imovel imovel = db.Imoveis.Find(id);
            db.Imoveis.Remove(imovel);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        private void PopularDropDownTipoComodo(object tipoComodoSelecionado)
        {
            var tipoComodoQuery = from d in db.TipoComodo
                                  orderby d.Descricao
                                  select d
                                  ;
            ViewBag.TipoComodoId = new SelectList(tipoComodoQuery, "TipoComodoID", "Descricao", tipoComodoSelecionado);
        }

        private void PopularSeletorDetalhes(Imovel imovel)
        {
            var todosDetalhes = db.DetalhesImoveis;
            var detalhesImovel = new HashSet<int>(imovel.DetalhesImovel.Select(t => t.DetalhesImovelID));
            var viewModel = new List<ImovelDetalhes>();
            foreach (var detalhe in todosDetalhes)
            {
                viewModel.Add(new ImovelDetalhes
                                  {
                                      Descricao = detalhe.Descricao,
                                      DetalhesImovelID = detalhe.DetalhesImovelID, 
                                      Seletor = detalhesImovel.Contains(detalhe.DetalhesImovelID)
                                  });
            }
            ViewBag.Detalhes = viewModel;
        }

        private void AtualizaDetalhesImovel(IEnumerable<string> detalhesSelecionados, Imovel imovelAtualizar)
        {
            if (detalhesSelecionados == null)
            {
                imovelAtualizar.DetalhesImovel = new Collection<DetalhesImovel>();
                return;
            }
            var selecaoDetalhesHs = new HashSet<string>(detalhesSelecionados);
            var imovelDetalhes = new HashSet<int>(imovelAtualizar.DetalhesImovel.Select(d => d.DetalhesImovelID));
            foreach (var item in db.DetalhesImoveis)
            {
                if (selecaoDetalhesHs.Contains(item.DetalhesImovelID.ToString(CultureInfo.InvariantCulture)))
                {
                    if (!imovelDetalhes.Contains(item.DetalhesImovelID))
                    {
                        imovelAtualizar.DetalhesImovel.Add(item);
                    }
                }
                else
                {
                    if (imovelDetalhes.Contains(item.DetalhesImovelID))
                    {
                        imovelAtualizar.DetalhesImovel.Remove(item);
                    }
                }
            }
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }

    }
} 
```

编辑.cshtml：

```
@model Imobiliario.Models.Imovel

@{
    ViewBag.Title = "Editar";
}

<h2>Editar</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Imovel</legend>

        @Html.HiddenFor(model => model.ImovelID)
        @Html.HiddenFor(model => model.Timestamp)
        <div class="editor-label">
            @Html.LabelFor(model => model.TipoComodo)
        </div>
        <div class="editor-field">
            @Html.DropDownList("TipoComodoID", String.Empty)
            @Html.ValidationMessageFor(model => model.TipoComodoID)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.QtdComodos)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.QtdComodos)
            @Html.ValidationMessageFor(model => model.QtdComodos)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.QtdBanheiros)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.QtdBanheiros)
            @Html.ValidationMessageFor(model => model.QtdBanheiros)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Alugado)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Alugado)
            @Html.ValidationMessageFor(model => model.Alugado)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ValorAluguel)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ValorAluguel)
            @Html.ValidationMessageFor(model => model.ValorAluguel)
        </div>
        <div class="editor-label">
            @Html.Label("Detalhes Imóvel")
        </div>
        <div class="editor-field">
            <table>
                <tr>
                    @{
                        int cnt = 0;
                        List<Imobiliario.ViewModels.ImovelDetalhes> detalhes = ViewBag.Detalhes;
                        foreach (var imovelDetalhes in detalhes)
                        {
                            if (cnt++ % 4 == 0)
                            {
                                @: </tr> <tr>
                            }
                            @: <td>
                            <input 
                                type="checkbox" 
                                name="detalhesSelecionados" 
                                value="@imovelDetalhes.DetalhesImovelID"@(Html.Raw(imovelDetalhes.Seletor ? "checked=\"checked\"" : ""))/>
                                @imovelDetalhes.Descricao
                               @:</td>
                        }
                        @: </tr>       
                    }
            </table>
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

所有方法都运行良好，但我无法验证并发性。我正在使用 Timestamp，但进行了更改并且并发上没有显示警告消息。

> * *Q:* *问题是验证并发的timestamp的字节加载了不同的值（在浏览器A中，显示的字节为0,0,0,0,0,0,8,7和B浏览器显示的字节数是0,0,0,0,0,0,23,113）所以不处理并发因为值不同。有人可以在我的代码中看到我做错了什么？

我知道 Timestamp 必须携带相同的值才能检查并发性，有人可以帮我解决这个问题吗？

# ssl - 基于 SSL 的 CFHTTP

> ID：15390369
> 
> 赞同：2
> 
> 时间：2013-03-13T16:01:51.463
> 
> 标签：ssl, coldfusion, coldfusion-8, cfhttp

我正在尝试使用 ColdFusion`CFHTTP`标记通过 SSL 从服务器检索文件，但没有成功。我们的环境是使用服务器配置的 Linux。使用的密钥库位于`cf_root/runtime/jre/lib/security/cacerts`. 我从目标服务器检索了 X.509 证书（DER 格式）并将其导出到文件中。在我们的服务器上，在 cacerts 所在的文件夹中，我将此证书导入到我们的 cacerts 密钥库中：

keytool -import -alias certAlias -file pathToX509Cert -keystore cacerts -storepass blahPass

并重新启动 ColdFusion。然而，我们仍然收到“I/O Exception: peer not authenticated”错误。我什至尝试将相同的证书导入到 trustStore`cf_root/runtime/lib/trustStore`并重新启动 ColdFusion。结果相同。还有什么我想念的吗？我什至没有运气尝试过 Raymond Camden 的[解决方法。](http://www.raymondcamden.com/index.cfm/2011/1/12/Diagnosing-a-CFHTTP-issue--peer-not-authenticated)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T20:38:48.850

根据您运行的 CF 版本，Ray 发布的解决方法是唯一的解决方案。导入证书在某些情况下可以工作，但如果您访问的是通配符 SSL 证书，我永远无法让它在 CF8 或更低版本上工作。

作为参考，将解决此问题的代码是：

```
<cfset objSecurity = createObject("java", "java.security.Security") />
<cfset storeProvider = objSecurity.getProvider("JsafeJCE") />
<cfset objSecurity.removeProvider("JsafeJCE") /> 
```

如果这对您不起作用，您能否发布您尝试访问的 URL，以便我们检查证书？

FWIW，您通常可以使用“COM.Allaire.ColdFusion.HTTPFailure”类型在 cfcatch 中捕获此故障。

# python - Python 3：如何获得字节字符串的字符串文字表示？

> ID：15390374
> 
> 赞同：8
> 
> 时间：2013-03-13T16:02:01.860
> 
> 标签：python, python-3.x, escaping

在 Python 3 中，如何将字节字符串插入常规字符串并获得与 Python 2 相同的行为（即：仅获取不带`b`前缀或双反斜杠的转义码）？

例如：

蟒蛇 2.7：

```
>>> x = u'\u041c\u0438\u0440'.encode('utf-8')
>>> str(x)
'\xd0\x9c\xd0\xb8\xd1\x80'
>>> 'x = %s' % x
'x = \xd0\x9c\xd0\xb8\xd1\x80' 
```

蟒蛇 3.3：

```
>>> x = u'\u041c\u0438\u0440'.encode('utf-8')
>>> str(x)
"b'\\xd0\\x9c\\xd0\\xb8\\xd1\\x80'"
>>> 'x = %s' % x
"x = b'\\xd0\\x9c\\xd0\\xb8\\xd1\\x80'" 
```

注意使用 Python 3，我`b`在输出中得到前缀和双下划线。我想要得到的结果是我在 Python 2 中得到的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:08:33.537

在您的 Python 3 示例中，您插入的是 Unicode 字符串，而不是像在 Python 2 中那样的字节字符串。

在 Python 3 中，`bytes`不支持插值（字符串格式或你有什么）。

要么连接，要么全部使用 Unicode，并且仅在插入后才编码：

```
b'x = ' + x 
```

或者

```
'x = {}'.format(x.decode('utf8')).encode('utf8') 
```

或者

```
x = '\u041c\u0438\u0440'  # the u prefix is ignored in Python 3.3
'x = {}'.format(x).encode('utf8') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T16:12:06.923

在 Python 2 中，您有类型`str`和`unicode`. `str`表示一个简单的字节字符串，而`unicode`是一个 Unicode 字符串。

对于 Python 3，情况发生了变化：现在`str`是`unicode`Python 2`byte`中的内容，也是`str`Python 2 中的内容。

所以当你这样做时，`("x = %s" % '\u041c\u0438\u0440').encode("utf-8")`你实际上可以省略`u`前缀，因为它是隐式的。在 python 中未显式转换的所有内容都是 unicode。

这将产生您在 Python 3 中的最后一行：

```
 ("x = %s" % '\u041c\u0438\u0440').encode("utf-8") 
```

现在我如何在最终结果*之后*进行编码，这是您应该始终执行的操作：获取传入的对象，将其解码为 un​​icode（您是如何做到的），然后在进行输出时，以您选择的编码对其进行编码。不要尝试处理原始字节字符串。那只是丑陋和过时的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:12:21.340

在 Python 2 中，字节字符串和常规字符串是相同的，因此`str()`. 在 Python 3 中，字符串始终是 Unicode 字符串，因此`str()`对字节字符串进行转换。

您可以进行自己的转换，而不是做您想做的事情：

```
x2 = ''.join(chr(c) for c in x) 
```

# inno-setup - 是否可以在 inno 安装程序中从安全站点 (https) 下载文件？

> ID：15390375
> 
> 赞同：2
> 
> 时间：2013-03-13T16:02:02.783
> 
> 标签：inno-setup, inno-download-plugin, inno-tools-downloader

我正在开发一个 C# 项目并使用 Inno 安装程序。我需要在我的安装程序中检查自动更新，如果更新可用，那么安装程序应该使用用户身份验证（例如，从我们的构建服务器）从安全 (HTTPS) 网站下载较新的二进制文件。

我还检查了 InnoTools 下载器 ( [http://www.sherlocksoftware.org/page.php?id=50](http://www.sherlocksoftware.org/page.php?id=50) )。它支持从 HTTP 和 FTP 下载，但不支持从 HTTPS 下载。

是否可以在 C# 中使用 inno 安装文件或任何其他安装程序机制？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T11:31:39.307

使用Mitrich Software 的**[Inno 下载插件](http://mitrich.net23.net/?/inno-download-plugin.html)**。它支持 FTP、HTTP 和 HTTPS。

# asp.net - url 参数中使用的 TextBox 值

> ID：15390376
> 
> 赞同：2
> 
> 时间：2013-03-13T16:02:04.300
> 
> 标签：asp.net, html, postbackurl

我有一个 ASP.NET 站点，并且我有一个使用 url 查询字符串的页面：

> routeToScene.aspx?RunNumber=3253665

`RunNumber=XXXXXXX`当我在 URL 中传递参数时，这加载得很好。

我想要做的是通过`RunNumber=XXXXXXX`通过另一个页面上的文本框传递来加载此页面：`routToHospitalParam.aspx`使用一个简单的提交按钮，该按钮获取文本框中的值并将其传递给第二页的 URL。这应该很简单，我因为找不到答案而感到愚蠢。

这是`routeToHospitalParam.aspx`页面中的代码...

```
<asp:TextBox ID="TextBox1" Width="80px" MaxLength="7" runat="server"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Submit" PostBackUrl="~/MAP/routeToHospital.aspx" + TextBox1.text /> 
```

问题是当我尝试在加载其他页面时使用`TextBox1.value`（假设是正确的） 。`PostBackUrl`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:14:10.350

你可以这样做

在 aspx 中更改代码以处理 onclick 事件：

```
<asp:Button ID="Button1" runat="server" Text="Submit" 
OnClick="Button1_OnClick" /> 
```

在代码隐藏按钮单击事件重定向用户与查询参数：

```
protected void Button1_OnClick(object sender, EvenArgs e)
{
  Response.redirect("~/MAP/routeToHospital.aspx?RunNumber=" + HttpUtility.UrlEncode(TextBox1.text));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:06:41.827

你真的想看看[ASP.Net 中的跨页发帖](http://msdn.microsoft.com/en-gb/library/ms178139%28v=vs.100%29.aspx)

它使用对象的`PreviousPage`属性`Page`。那就是您可以避免尝试通过查询字符串传递值。

例如

**C＃**

```
TextBox textBox = (TextBox)Page.PreviousPage.FindControl("TextBox1"); 
```

**VB**

```
Dim textBox as TextBox = CType(Page.PreviousPage.FindControl("TextBox1"), TextBox) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:17:00.863

您可以尝试一些如下的 jQuery 函数来设置回发 url：

```
$(function(){
$('#Button1').click(function(){
    $('#Button1').attr("action", "/MAP/routeToHospital.aspx?RunNumber=" + $('#TextBox1').val());
   });
}); 
```

或将其添加到文本框的模糊事件中：

```
$(function(){
$('#TextBox1').blur(function(){
    $('#Button1').attr("action", "/MAP/routeToHospital.aspx?RunNumber=" + $('#TextBox1').val());
   });
}); 
```

# c# - 屏幕锁定时计时器停止 Windows Phone 8

> ID：15390377
> 
> 赞同：0
> 
> 时间：2013-03-13T16:02:07.327
> 
> 标签：c#, .net, windows-phone-8

我为具有计时器的 Windows Phone 8 制作了一个应用程序。我的问题是，一旦手机锁定屏幕，我的计时器（我猜我的应用程序）就会暂停。我不想阻止手机进入锁定屏幕，我希望我的应用程序在后台运行。我想不出一个“干净”的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:05:43.853

听起来您只需要正确启用您的应用程序即可在锁定屏幕下继续运行。看一眼：

[在锁定屏幕下运行 Windows Phone 应用程序](http://blogs.msdn.com/b/jaimer/archive/2010/11/01/running-a-windows-phone-application-under-the-lock-screen.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T11:02:50.197

```
 PhoneApplicationService.Current.ApplicationIdleDetectionMode = IdleDetectionMode.Disabled; 
```

将此行放在 App.xaml.cs 页面的 App() 构造函数下

# c++ - 常量声明 - 语言差异？

> ID：15390378
> 
> 赞同：2
> 
> 时间：2013-03-13T16:02:07.823
> 
> 标签：c++, c

以下代码片段在 C++ 中完全有效（至少已编译）：

**我的文件.cxx：**

```
static const int MY_CONST_ONE = 1;
static const int MY_CONST_TWO = MY_CONST_ONE; 
```

另一方面，在 C 中编译完全相同的代码会失败并显示错误消息 ( [http://ideone.com/erBkm9](http://ideone.com/erBkm9) )：

```
my_file.c:2:1: error: initializer element is not constant 
```

**我的文件.c：**

```
static const int MY_CONST_ONE = 1;
static const int MY_CONST_TWO = MY_CONST_ONE; 
```

是什么原因？它是编译器特定的还是一些已知的 C 与 C++ 的区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T16:03:05.730

基本上，`const`C 中的变量不被视为编译时常量。因此，需要编译时常量的地方不能*从*`const`变量中获取它们的值。

# xml - 在 VB.net 中读取 XML 文件列表数据

> ID：15390383
> 
> 赞同：0
> 
> 时间：2013-03-13T16:02:14.457
> 
> 标签：xml, vb.net

我有一个充满 xml 文件的文件夹，它们的格式都相同，但文件名不同且不断变化

我想知道是否有一种方法可以让 Visual Basic 浏览所有可用文件，以便从所有文件中提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:21:43.107

```
 Dim di As System.IO.DirectoryInfo = New System.IO.DirectoryInfo("C:\Some Directory")
    Dim xmlFiles As System.IO.FileInfo() = di.GetFiles("*.xml")
    For Each xmlFile As System.IO.FileInfo In xmlFiles
        ' do some data processing here
    Next 
```

# android - 如何在 Android 中调整 GIF 图像的大小？

> ID：15390388
> 
> 赞同：1
> 
> 时间：2013-03-13T16:02:20.517
> 
> 标签：android, bitmap, resize

我在 SD 卡上有 3 张图片（1 张 jpg 和 2 张 gif）。我想减少它们以节省内存。调整大小后 JPG 调整大小成功，但 GIF 图像具有原始大小。查看代码和日志：

```
public class BitmapHelper 
{
    private static int calculateInSampleSize(BitmapFactory.Options options, int imgHeigth, int imgWidth)
    {
        int inSampleSize = 1;

    if(imgHeigth > 80 || imgWidth > 120)
    {
        final int heightRatio = Math.round((float) imgHeigth / 80);
        final int widthRatio = Math.round((float) imgWidth / 120);

        if(heightRatio < widthRatio)
            return heightRatio;
        if(heightRatio > widthRatio)
            return widthRatio;
        if(heightRatio == widthRatio)
            return heightRatio;

    }

    return inSampleSize;
}

public Bitmap decodeBitmapFromFile(String imageUrl, Resources res)
{
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(imageUrl, options);
    if(options.outMimeType != null)
    {
        options.inSampleSize = calculateInSampleSize(options, options.outHeight, options.outWidth);
        options.inJustDecodeBounds = false;
        Bitmap bmp = BitmapFactory.decodeFile(imageUrl, options);
        Log.d("Debugger", "Height: " + options.outHeight + "; Width: " + options.outWidth);
        return bmp;

    }
    else
    {
        options.inSampleSize = 2;
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeResource(res, R.drawable.play, options);
    }           
}
} 
```

日志：

```
Height: 97; Width: 175
Height: 324; Width: 550
Height: 97; Width: 175
Height: 226; Width: 400
Height: 97; Width: 175
Height: 324; Width: 550
Height: 226; Width: 400

97x175 - JPEG - (Original size: 388x698)
324x550 - GIF - original size
226x400 - GIF - original size 
```

怎么了？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:32:05.077

试试这个代码来重新调整它的大小：

```
Display display = getWindow().getWindowManager().getDefaultDisplay();                    
                int hsize= (int) ((int)display.getHeight()-(display.getHeight()*(0.50)));
                int wsize= (int) ((int)display.getWidth()-(display.getWidth()*0.25));   

             Bitmap originalImage=decodeSampledBitmapFromResource(getResources(),imageId,wsize,hsize);             
             ImageView imageView = new ImageView(mContext);
             imageView.setImageBitmap(scaleBitmap(originalImage));
             imageView.setLayoutParams(new CoverFlow.LayoutParams(wsize,hsize));
             imageView.setScaleType(ScaleType.MATRIX);

public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId, int reqWidth, int reqHeight) 
    {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
}
public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) 
{
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) 
    {
        if (width > height) 
        {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
}

private Bitmap scaleBitmap(Bitmap bitmap) 
   {

            int iWidth=bitmap.getWidth() ;
            int iHeight=bitmap.getHeight();
            int newWidth=0,newHeight=0;

            float fFactor=(float)iHeight/(float)iWidth; 

            if(iWidth<=iHeight)
            {
                     newWidth = 300;                                    
                     newHeight =(int) (newWidth * fFactor) ;//370;
            }
            else
            {
                    newWidth = 400;                             
                    newHeight =(int) (newWidth * fFactor) ;//370;
            }
               float fScaleWidth = ((float) newWidth) / iWidth;
               float fScaleHeight = ((float) newHeight) / iHeight;

               Matrix matrix = new Matrix();
               // resize the bit map
               matrix.postScale(fScaleWidth, fScaleHeight);

            Bitmap resizedBitmappreview = Bitmap.createBitmap(bitmap, 0, 0,iWidth, iHeight, matrix, true);

            return resizedBitmappreview;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T10:53:15.220

恐怕这是一个android错误：

[https://code.google.com/p/android/issues/detail?id=3072](https://code.google.com/p/android/issues/detail?id=3072)

# javascript - 使用 angularjs 的两个嵌套点击事件

> ID：15390393
> 
> 赞同：63
> 
> 时间：2013-03-13T16:02:27.257
> 
> 标签：javascript, function, angularjs

我有一个这样的 HTML 结构：

```
<div ng-click="test()">
    <div id="myId" ng-click="test2()"></div>
    <div></div>
    ...
</div> 
```

目前，当我点击`div`带有 id 的 id时`myId`，两个函数都会被触发，但我希望只`test2`触发这个函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-03-13T16:17:06.447

您需要做的就是停止事件传播/冒泡。

此代码将帮助您：

```
<div ng-click="test()">ZZZZZ
    <div id="myId" ng-click="test2();$event.stopPropagation()">XXXXX</div>
    <div>YYYYYY</div>
    ...
</div> 
```

如果您的`test`和`test2`函数如下所示，`test2`则单击`myId`DIV 时您只会进入控制台。没有`$event.stopPropagation()`你会在控制台输出窗口中 被`test2`跟踪。`test`

```
$scope.test = function() {
    console.info('test');
}
$scope.test2 = function() {
    console.info('test2');
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-13T17:51:26.223

与汤姆的答案相同，但略有不同。

```
 <div ng-click="test()">
            <div id="myId" ng-click="test2($event)">child</div>
        </div>

        $scope.test2 =function($event){
            $event.stopPropagation();
            console.log("from test2")
        }
        $scope.test =function(){
            console.log("from test")
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-10T12:57:45.850

这是基于[另一个](https://stackoverflow.com/questions/14544741/how-can-i-make-an-angularjs-directive-to-stoppropagation)支持 ng-href 链接的问题的指令。

**指示**

```
'use strict';

var myApp = angular.module('myApp', [
    'ngAnimate'
  ]);

/**
 * @ngdoc directive
 * @name myMobileApp.directive:stopEvent
 * @description Allow normal ng-href links in a list where each list element itselve has an ng-click attached.
 */
angular.module('myApp')
  .directive('stopEvent', function($location, $rootScope) {
    return {
      restrict: 'A',
      link: function(scope, element) {
        element.bind('click', function(event) {

        // other ng-click handlers shouldn't be triggered
        event.stopPropagation(event);
        if(element && element[0] && element[0].href && element[0].pathname) {
          // don't normaly open links as it would create a reload.
          event.preventDefault(event);
          $rootScope.$apply(function() {
            $location.path( element[0].pathname );
          });
        }
      });
      }
    };
  })

.controller('TestCtrl', ['$rootScope', '$scope', 'Profile', '$location', '$http', '$log',
  function($rootScope, $scope, Profile, $location, $http, $log) {
    $scope.profiles = [{'a':1,'b':2},{'a':3,'b':3}];

    $scope.goToURL = function(path, $event) {
      $event.stopPropagation($event);
      $location.path(path);
    };

  }
]); 
```

```
 <div ng-repeat="x in profiles" 
     ng-click="goToURL('/profiles/' + x.a, $event)">

      <a stop-event ng-href="/profiles/{{x.b}}">{{x}}</a>

  </div> 
```

# android - 如何在 Android Gallery3D (cooliris) 中显示特定文件夹？

> ID：15390402
> 
> 赞同：4
> 
> 时间：2013-03-13T16:02:51.847
> 
> 标签：android, android-gallery, mediastore

我正在使用[Gallery3D（froyo-stable）](https://github.com/CyanogenMod/android_packages_apps_Gallery3D/tree/froyo-stable)

我正在尝试制作一个仅在图库视图中显示特定文件夹中的图像的小应用程序。

```
Uri targetUri = Media.EXTERNAL_CONTENT_URI;
String folderPath = Environment.getExternalStorageDirectory().toString() + "/DCIM/";
int folderBucketId = folderPath.toLowerCase().hashCode();
targetUri = targetUri.buildUpon().appendQueryParameter("bucketId", String.valueOf(folderBucketId)).build(); 
```

在`initializeDataSource()`

```
// Creating the DataSource objects.
final LocalDataSource localDataSource = new LocalDataSource(Gallery.this, targetUri.toString(), false); 
```

但我有错误

```
"Error finding album " + bucketId); 
```

在`CacheService.loadMediaSets.`：

```
 Log.e(TAG, "Error finding album " + bucketId); 
```

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:55:37.027

假设您需要在文件夹下找到文件的路径。

```
 private String[] mFileStrings;
private File[] listFile;

public void getFromSdcard()
{
    File file=  new File(android.os.Environment.getExternalStorageDirectory(),"Your Folder Name");

        if (file.isDirectory())
        {
            listFile = file.listFiles();
            mFileStrings = new String[listFile.length];

            for (int i = 0; i < listFile.length; i++)
            {
                mFileStrings[i] = listFile[i].getAbsolutePath();
                System.out.println("...................................."+mFileStrings[i]);
            }
        }
} 
```

在我的手机中，我的内部存储器被命名为 sdcard0。所以为了确保你得到正确的路径，你可以使用下面的代码。

```
 String externalpath = new String();
 String internalpath = new String();

public  void getExternalMounts() {
Runtime runtime = Runtime.getRuntime();
try
{
Process proc = runtime.exec("mount");
InputStream is = proc.getInputStream();
InputStreamReader isr = new InputStreamReader(is);
String line;

BufferedReader br = new BufferedReader(isr);
while ((line = br.readLine()) != null) {
    if (line.contains("secure")) continue;
    if (line.contains("asec")) continue;

    if (line.contains("fat")) {//external card
        String columns[] = line.split(" ");
        if (columns != null && columns.length > 1) {
            externalpath = externalpath.concat("*" + columns[1] + "\n");
        }
} 
        else if (line.contains("fuse")) {//internal storage
        String columns[] = line.split(" ");
        if (columns != null && columns.length > 1) {
            internalpath = internalpath.concat(columns[1] + "\n");
        }
    }
}
}
catch(Exception e)
{
    e.printStackTrace();
}
 System.out.println("Path  of sd card external............"+externalpath);
 System.out.println("Path  of internal memory............"+internalpath);
} 
```

替代：

您也可以使用 3d 轮播来显示图像，使用渲染脚本作为替代方案。

[http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip](http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip)。

结果快照。Carousel 3d 在 Jelly Bean 上进行了测试。

![在此处输入图像描述](../Images/a28855f2361261ccf6f2be2cbf102587.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:51:07.870

“查找专辑时出错”问题很可能是由于您`bucketId`在代码中获取的“DCIM”文件夹中没有直接包含任何图像的事实。例如，如果您改用“/DCIM/Camera”（假设那里有一些图像），则不应出现错误。

但是，如果我正确理解您想要什么，我相信您需要对 Gallery3D 代码进行其他修改，以便在您遵循这条路线时使其在启动时显示特定文件夹（因为代码并非旨在像这样使用）。

我相信您可以通过将意图设置为以下特定内容，而不是使用上面的代码，更轻松地实现您想要的目标`onCreate()`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setIntentToSpecificFolder();

    mApp = new App(Gallery.this);
    // :
    // the rest of onCreate() code
    // :
    Log.i(TAG, "onCreate");
}

private void setIntentToSpecificFolder() {
    String folderPath = Environment.getExternalStorageDirectory().toString() + "/DCIM/Camera";
    int folderBucketId = folderPath.toLowerCase().hashCode();
    Uri targetUri = Media.EXTERNAL_CONTENT_URI.buildUpon().appendQueryParameter("bucketId", String.valueOf(folderBucketId)).build();

    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(targetUri, "vnd.android.cursor.dir/image");
    setIntent(intent);
} 
```

基本上，我们在这里所做的是利用`ACTION_VIEW`应用程序在提供`vnd.android.cursor.dir/image`MIME 类型时的意图处理。

# paypal - 在 2013 年使用贝宝进行自定义结帐的正确方法？

> ID：15390403
> 
> 赞同：0
> 
> 时间：2013-03-13T16:02:52.217
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

就我个人而言，我认为贝宝开发者网站与它们一样令人困惑。

我有一个自定义的 php 购物车，一切正常——我现在需要的是向它添加贝宝付款。我有很多定制产品，所以使用贝宝的“添加到购物车”功能是不可接受的。

据我所知，我的两个选择是：仅将一个价格发送到贝宝，或者以定制形式将产品发送到贝宝（饼干很容易改变）。在这两种情况下，我都需要知道付款是否已经完成。

我已经查看了“标准付款”和“IPN”付款选项，但我仍然感到困惑。对于已经准备好要发送到贝宝的一堆自定义产品设置的结帐，我应该看什么？我试图在贝宝沙盒上创建一个帐户，但由于页面“不可用”而无法创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:28:50.597

如果您计划使用网站支付标准，您可能希望使用购物车上传方法，然后使用 IPN 来验证交易是否已完成。另一种选择是使用 Express Checkout 而不是网站付款标准。与使用网站付款标准相比，使用 Express Checkout 可以更好地控制结帐流程，并且买家将在您的网站上完成付款。然后，您还可以依赖从 DoExpressCheckoutPayment API 返回的 API 响应来验证付款是否通过，或者您也可以依赖 IPN，或者如果您愿意，甚至两者都依赖。下面的链接也可能有助于提供更好的理解，并消除一些混淆。如果您有任何其他问题，请告诉我。

[IPN 概述](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)

[代码示例](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

[IPN/PDT 变量参考](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables)

[购物车上传概述](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/cart_upload)

[快速结帐概述](https://www.x.com/developers/paypal/products/express-checkout)

# c# - 动态嵌套 XElement

> ID：15390404
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:02:53.643
> 
> 标签：c#, asp.net, xml, linq, xelement

我希望创建一个 XML，这将包括以下内容：-

```
<?xml version="1.0" encoding="utf-8"?>
<Groups>
    <Group>
        <Id>1</Id>
        <GroupName>Group1</CategoryId>
        <Products>
            <Product>
                <ProductId>1</ProductId>
                <ProductName>Apples</ProductName>
            </Product>
            <Product>
                <ProductId>2</ProductId>
                <ProductName>Oranges</ProductName>
            </Product>
            <Product>
                <ProductId>3</ProductId>
                <ProductName>Lemons</ProductName>
            </Product>
        </Products>
        <DateCreated></DateCreated>
        <DateModified></DateModified>
    </Group>
    <Group>
        <Id>2</Id>
        <GroupName>Group2</CategoryId>
        <Products>
            <Product>
                <ProductId>3</ProductId>
                <ProductName>Grapes</ProductName>
            </Product>
            <Product>
                <ProductId>4</ProductId>
                <ProductName>PineApple</ProductName>
            </Product>
        </Products>
        <DateCreated></DateCreated>
        <DateModified></DateModified>
    </Group>
</Groups> 
```

正如您从我的示例中看到的那样，数量`Product`可以从一组到另一组有所不同。

如何创建动态 XML 并在以后读取相同的 XML。

目前我创建 XML 的代码如下：

```
internal XElement ConstructGroupXML(int numberOfItems)
{
    XElement xmlList = new XElement("Groups",
        from a in dataModel.CreateGroupList(numberOfItems)
        select new XElement("Group",
            new XElement("Id", a.Id),
            new XElement("GroupName", a.GroupName),
            new XElement("Products",
                new XElement("ProductId", a.Products[i].Id),
                new XElement("ProductName", a.Products[i].ProductName),
                new XElement("CategoryId", a.Products[i].Category.Id),
                new XElement("CategoryName", a.Products[i].Category.CategoryName),
                new XElement("SubCategoryId", a.Products[i].SubCategory.Id),
                new XElement("SubCategoryName", a.Products[i].SubCategory.SubCategoryName),
            new XElement("DateCreated", a.DateCreated),
            new XElement("DateModified", a.DateModified)
        )
    );

    return xmlList;
} 
```

该`CreateGroupList`方法返回一个对象，其中包含组和嵌入在这些组中的产品列表，因此对于每个组，我希望在产品列表中循环并生成 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:31:59.473

好的，我设法找到了解决方案：

```
from o in a.Products
select new XElement("Products",
    new XAttribute("ProductId", o.Id),
    new XElement("ProductName", o.ProductName),
    new XElement("CategoryId", o.Category.Id),
    new XElement("CategoryName", o.Category.CategoryName),
    new XElement("SubCategoryId", o.SubCategory.Id),
    new XElement("SubCategoryName", o.SubCategory.SubCategoryName), 
```

现在我只需要找出如何阅读这个 XML

# markup - 忽略纺织文档中的换行符（在 Eclipse wikitext 下）

> ID：15390406
> 
> 赞同：1
> 
> 时间：2013-03-13T16:02:58.103
> 
> 标签：markup, textile, mylyn-wikitext

由于我们有一些旧的基于文本的项目（针对程序员）的文档，并且希望以一种很好的方式显示它，因此我为此安装了 Mylyn wikitext。我计划将文档转换为纺织品（或任何其他支持表格并具有易于安装的 eclipse 插件的标记）。但是，换行符保留在纺织品中。有没有办法告诉纺织品（特别是 mylyn wikitext）不要在每个 lineend 上断线？或者至少有一个续行字符？

这样做的目的不是要有一个行长很大的文本文件，如果你想用一个没有任何换行调整的普通旧文本编辑器来查看它（Eclipse 不能不换行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T12:31:41.163

在 redmine 它通过（丑陋的）语法工作

```
 this line won't&lt;notextile&gt;
 &lt;/textile&gt; be broken 
```

浏览互联网我发现了其他转义字符（==、\\），但没有人适用于我正在使用的 redmine 纺织品。

# twitter-bootstrap - 如何在使用引导响应调整大小期间将容器或主体填充保持在 5px？

> ID：15390409
> 
> 赞同：0
> 
> 时间：2013-03-13T16:03:05.503
> 
> 标签：twitter-bootstrap

我正在修改此布局[http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)并且似乎无法让容器间隙/填充到左侧、右侧和顶部以在调整大小期间保持在 5px。在任何屏幕尺寸下，当前的填充看起来都在 20 像素左右。

这给了我我需要的东西，直到我得到更小的尺寸。我不确定它会改变什么屏幕尺寸。它是 Chrome 的第二次过渡。在我达到那个小尺寸后，它会恢复到上面示例中的较大间隙。

```
body {
  padding-top: 45px;
  padding-bottom: 40px;
}
.cont-pad {
  padding-left:5px;
  padding-right:5px;
}
.container {
  padding-left:5px;
  padding-right:5px;
}
.container-fluid {
   padding-left:5px;
   padding-right:5px;
} 
```

我将其用作示例中的 html 布局。颜色是为了直观地看到容器在调整大小时是如何填充的。我从我所做的修改中注意到的一件事是，最外面的容器的宽度似乎从浏览器的一侧开始填充，而不是调整大小后 div 本身的填充。更改 body 标签上的左右填充也会更改我的导航栏的填充。这是我不想要的。

```
<div class="container-fluid cont-pad" style="background-color:Blue;">
  <div class="row-fluid">
    <div class="span12" style="background-color:Red;">this content should be 5px from left, top, and right</div>
  </div>
</div> 
```

我假设我需要以某种方式修改@media 标签。我尝试将 (max-width: 980px) 更改为 5px，但结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:22:16.153

我自己也在为此苦苦挣扎。Bootstrap 对最小尺寸的响应奇怪地[从容器流体本身中删除了填充](https://github.com/twitter/bootstrap/blob/master/less/responsive-767px-max.less#L21)，然后[将相同数量的填充添加到](https://github.com/twitter/bootstrap/blob/master/less/responsive-767px-max.less#L10)其他尺寸不存在的填充。

因此，您正在覆盖容器流体填充，但是在小尺寸时，引导程序将容器流体填充设置为 0，并在主体上设置其他填充（默认情况下，与容器上的大小完全相同-fluid，虽然它在一个地方表示为 20px，在另一个地方表示为 $gutterWidth 变量。）。

我不知道为什么引导程序会这样做。这是疯狂。然后，Bootstrap 本身需要它自己的其他解决方法来解决它自己的疯狂 - 例如，导航栏上的媒体查询以补偿并保持导航栏仍然全宽，即使在小尺寸下也是如此。

我不确定最好的方法来处理你想做的事情，最干净，最有效，最简单的方法。我正在尝试自己弄清楚。

您可以尝试将身体上的填充设置为您想要的小尺寸，而不是引导。

```
@media (max-width: 767px) {

// Padding to set content in a bit
body {
  padding-left: 5px;
  padding-right: 5px;
} 
```

当然，现在填充在主体上，而不是容器流体，这可能会对您的设计产生其他奇怪的影响。我也在为此苦苦挣扎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:13:32.507

我目前正在使用 bootstrap responsive 2.3 构建一个网站，我通过简单地将其添加到我的 CSS 中删除了页面的排水沟。

```
.container-fluid {
padding-right: 0;
padding-left: 0;
} 
```

而且我刚刚尝试了 padding-right 和 left 5px，它似乎工作正常。

您确定没有其他 CSS 影响您的容器吗？

# regex - 用于区分好词和坏词的正则表达式

> ID：15390414
> 
> 赞同：0
> 
> 时间：2013-03-13T16:03:29.867
> 
> 标签：regex, bash

我有一个坏词的黑名单，如果它们在任何网络搜索引擎上使用，它们就会被阻止。这些词的例子是：肛门，屁股，屁股胸罩，屁股，暨，迪克，欲望，山雀。相应地阻止包含任何这些先前单词作为其结构的一部分的正常单词。这些好词的例子有：类比、运河、分析、资产、指南针、专辑、品牌、按钮、环境、迪克森、插图、重复。我的问题：是否有一个正则表达式（或 bash shell 脚本）使我能够使用普通单词而不会因为它们被列入黑名单的部分而被阻止？感谢您有兴趣提供帮助。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:05:55.540

您可以使用`\b`，这意味着“单词边界”：

```
\bbutt\b 
```

会匹配`butt`但不匹配`button`。

# php - 仅从 /mypage 访问 mypage.php 而不是 /mypage.php

> ID：15390416
> 
> 赞同：0
> 
> 时间：2013-03-13T16:03:29.913
> 
> 标签：php, .htaccess, php-extension

iam 创建一个 php 网站并 iam 使用 htaccess 使用此脚本隐藏 php 扩展

```
 Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ /$1.php [L,QSA] 
```

因此，如果我访问`localhost/mypage.php`或`localhost/mypage`两者都将我重定向到`mypage.php` 我想要的，如果我从那里访问它，`/mypage.php`则将我重定向到我的页面未找到页面我的意思是用户`localhost/mypage`只能从任何想法访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:21:50.407

如果您想返回 404 错误代码并强制任何 PHP 请求到错误文档

```
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule \.php$ - [R=404,L]
ErrorDocument 404 /error_404.html 
```

这将为所有请求和显示返回一个`404`错误代码。这是为了防止已经重写的页面出现错误代码。`*.php``/error_404.html``RewriteCond`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:31:15.023

你有没有想过使用像 Zend 这样的框架？我知道我的建议更复杂，但是....

1）该框架将对您的开发有很大帮助。2）您将能够设置所有类型的路线。3) 不会有 .php 扩展名。4) .htaccess 将非常易于维护，您将使用标准的框架之一。

谢谢。

# php - 如何使用 php mysql 中的 select 或 view 函数将下一个空值设置为第一个值？

> ID：15390419
> 
> 赞同：0
> 
> 时间：2013-03-13T16:03:38.523
> 
> 标签：php, mysql, select

请帮我解决这个问题...我是新手...

```
SELECT idt, date_played, date_end, duration FROM `v_currentshow` 
```

其中 date_played、date_end 和 duration 字段是 DATETIME

```
idt date_played date_end 持续时间
1 2013-03-13 22:33:48 2013-03-13 21:58:20 00:35:28
2 NULL NULL 00:02:11
3 NULL NULL 00:00:32
4 NULL NULL 00:36:42
5 NULL NULL 00:01:30
6 NULL NULL 00:25:12
7 空空 00:01:37
.
.
.
n NULL NULL 00:02:32

```

问题是..

1.  我们如何设置下一个 date_played 空值，如 idt=2 和另一个 idt，从 idt=1 中的 date_end 值开始，然后仅使用 SELECT 并在 VIEW 上进行计数，以此类推？
2.  我们如何像在 idt=2 和另一个 idt 中一样设置下一个 date_end 空值，而 date_played 已经像问题 1 中那样设置，只需使用 SELECT 并在 VIEW 上进行设置？

请帮助...谢谢

结果示例如下表...如果不可能...如何通过更新获得它？

```
idt date_played date_end 持续时间
1 2013-03-13 22:33:48 2013-03-13 21:58:20 00:35:28
2 2013-03-13 21:58:20 2013-03-13 22:00:31 00:02:11
3 2013-03-13 22:00:31 2013-03-13 22:01:03 00:00:32
4 2013-03-13 22:01:03 2013-03-13 22:37:45 00:36:42
5 2013-03-13 22:37:45 2013-03-13 22:39:15 00:01:30
6 2013-03-13 22:39:15 2013-03-13 23:04:37 00:25:12
7 2013-03-13 23:04:37 2013-03-13 23:06:14 00:01:37
.
.
.
直至最后

```

谢谢你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:35:13.277

我会使用这样的解决方案，它利用 MySql 变量：

```
SELECT
  idt,
  date_played,
  date_end,
  duration
FROM (
  SELECT
    v_currentshow.idt,
    CASE WHEN date_played IS NULL THEN @start ELSE date_played END date_played,
    CASE WHEN date_end IS NULL THEN
           CASE WHEN date_played IS NULL THEN @start ELSE date_played END
           + INTERVAL TIME_TO_SEC(duration) SECOND
         ELSE date_end
    END date_end,
    @start :=
      CASE WHEN date_end IS NULL THEN
             CASE WHEN date_played IS NULL THEN @start ELSE date_played END
             + INTERVAL TIME_TO_SEC(duration) SECOND
           ELSE date_end
      END,
    duration
  FROM
   v_currentshow,
   (SELECT @start := null) r
) s 
```

请[在此处](http://sqlfiddle.com/#!2/71762/1)查看小提琴。如果您确定没有间隙，并且除第一行之外的每一行都有空值，则可以进一步简化此查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:28:14.457

您应该在 PHP 中进行处理，如果查询听起来很疯狂，您最好使用 PHP 进行后处理。

我的解决方案似乎有效，因为您使用`PHP`.

承认您的查询返回一个数组，您可以这样做：

```
$results = array(); // the array of results returned by the query
$previousEndDate = null; // default it to null to avoid weird situations

foreach ($results as &$row) { // you can replace the pointer (&) with a new array that gets the proper values injected into it ~ but it's more readable because it highlights the most important lines

    if ($row['date_played'] === null && $previousEndDate !== null) {
        $row['date_played'] = $previousEndDate;
    }

    if ($row['date_end'] === null) {
        $dateInterval = new DateInterval('P0000-00-00T'. $row['duration']); // we create a valid PHP interval to add on top of the date_played
        $datePlayed = new DateTime($row['date_played']); // create a valid DateTime object off the SQL value
        $row['date_end'] = $datePlayed->add($dateInterval); // and we add the interval to the datePlayed
    }

    $previousEndDate = $row['date_end'];
} 
```

[有关DateTime 对象](http://us.php.net/manual/en/class.datetime.php)和[DateInterval 对象](http://us.php.net/manual/en/class.dateinterval.php)的更多文档。作为奖励，上面的代码可以支持时区。

然后，您可以将这些值保存回数据库；我不会使用单查询解决方案，因为它可能需要更多时间并显着减慢您的数据库。

# java - 使用 Mockito 进行单元测试 - 忽略方法调用

> ID：15390422
> 
> 赞同：4
> 
> 时间：2013-03-13T16:03:41.363
> 
> 标签：java, unit-testing, mockito

我正在努力学习 Mockito 来对应用程序进行单元测试。以下是我当前尝试测试的方法示例

```
public boolean validateFormula(String formula) {

    boolean validFormula = true;
    double result = 0;

    try {
        result = methodThatCalculatAFormula(formula, 10, 10);
    } catch (Exception e) {
        validFormula = false;
    }

    if (result == 0)
        validFormula = false;
    return validFormula;
} 
```

这个方法调用同一个类中的另一个方法，`methodThatCalculatAFormula`我不想在我 unittest 时调用它`validateFormula`。

为了测试这一点，我想看看这个方法的行为取决于`methodThatCalculatAFormula`返回的内容。因为它`false`在为 0 时`result`返回，如果它是除 0 以外的任何数字，则返回有效，我想模拟这些返回值而不运行实际`methodThatCalculatAFormula`方法。

我写了以下内容：

```
public class FormlaServiceImplTest {
    @Mock
FormulaService formulaService;

@Before
public void beforeTest() {
   MockitoAnnotations.initMocks(this);
}

@Test
public void testValidateFormula() {                 

`//Valid since methodThatCalculatAFormula returns 3`    
when(formulaService.methodThatCalculatAFormula(anyString(),anyDouble(),anyDouble(),anyBoolean())).thenReturn((double)3);        
        assertTrue(formulaService.validateFormula("Valid"));    

//Not valid since methodThatCalculatAFormula returns 0
when(formulaService.methodThatCalculatAFormula(anyString(),anyDouble(),anyDouble(),anyBoolean())).thenReturn((double)0);
    assertFalse(formulaService.validateFormula("Not Valid"));
} 
```

但是，当我运行上面的代码时，我`assertTrue`是`false`. 我猜我在模拟设置中做错了什么。`methodThatCalculatAFormula`我将如何通过模拟返回值而不实际调用它来测试上述方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:21:26.187

您要做的不是模拟，而是间谍（部分模拟）。您不想模拟一个对象，而只想模拟一种方法。

这有效：

```
public class FormulaService {
    public boolean validateFormula(String formula) {

        boolean validFormula = true;
        double result = 0;

        try {
            result = methodThatCalculatAFormula(formula, 10, 10);
        } catch (Exception e) {
            validFormula = false;
        }

        if (result == 0)
            validFormula = false;
        return validFormula;
    }

    public  double methodThatCalculatAFormula(String formula, int i, int j){
        return 0;
    }
} 
```

和

```
public class FormulaServiceImplTest {

    FormulaService formulaService;

    @Test
    public void testValidateFormula() {

        formulaService = spy(new FormulaService());
        // Valid since methodThatCalculatAFormula returns 3`
        doReturn((double) 3).when(
                formulaService).methodThatCalculatAFormula(anyString(),
                        anyInt(), anyInt());
        assertTrue(formulaService.validateFormula("Valid"));

        // Not valid since methodThatCalculatAFormula returns 0
        doReturn((double)0).when(
                formulaService).methodThatCalculatAFormula(anyString(),
                        anyInt(), anyInt());
        assertFalse(formulaService.validateFormula("Not Valid"));
    }
} 
```

但是你不应该使用间谍。您应该将类​​重构为两个，以便您可以针对另一个模拟测试一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:16:46.943

您不能在 Mocked 类中测试代码。如果你只是模拟它，所有的方法都是存根。

您必须改为监视它。阅读有关如何使用 Spy 的 Mockito 文档。

# html - 子 div 将填充父 div

> ID：15390423
> 
> 赞同：0
> 
> 时间：2013-03-13T16:03:42.453
> 
> 标签：html, css

我有**N**块非固定宽度`div`的 child 。而且我有一个非固定宽度的 parent `div`。我想并排填充和对齐`div`父级中的子级，例如关系。我怎样才能做到这一点？`div``td - tr`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:14:54.550

对子元素使用 float:left，但不要使用 :first 和 clear:both;，而是使用带有“clearfix”类的 div -（见下文）并放置 clear:both; 在 CSS 中。

行间 div 的标记 -

```
<div class="clearfix"> 
```

与 div 相关的 CSS

```
.clearfix{

    clear:both;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:30:33.027

您说的是非固定宽度，而没有提到高度。tr-td 关系很特殊，如果这正是您想要的，您可以显示表格行/表格单元格等对象。

在这里你可以看到下面代码的区别，在行动：http: [//jsfiddle.net/zv5KF/](http://jsfiddle.net/zv5KF/)

```
body
{
font-size:10px;
}
.table
{
display:table;
border:1px solid black;
/*width:500px;*/
}
.tr
{
display:table-row;
}
.td
{
display:table-cell;
border:1px solid red;
<body>

<div class="table">
<div class="tr">
<div class="td" style="width:10px;height:10px;">They're</div>
<div class="td" style="width:50px;height:10px;">all</div>
<div class="td" style="width:100px;height:100px;">like</div>
<div class="td" style="width:25px;height:25px;">hello</div>
<div class="td">and</div>
<div class="td">hi</div>
</div>
</div>

<div style="border:1px solid black;">
<div style="float:left; border:1px solid red; width:10px;height:10px;">They're</div>
<div style="float:left; border:1px solid red; width:50px;height:10px;">all</div>
<div style="float:left; border:1px solid red;width:100px;height:100px;">like</div>
<div style="float:left; border:1px solid red;width:25px;height:25px;">hello</div>
<div style="float:left; border:1px solid red;width:25px;height:25px;">and</div>
<div style="float:left; border:1px solid red;">hi</div>
</div>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:07:10.783

用于`float:left`子元素。在新行的第一个元素处使用`clear:both`.

# php - PHP注册码

> ID：15390425
> 
> 赞同：0
> 
> 时间：2013-03-13T16:03:46.103
> 
> 标签：php, phpmyadmin, registration

我目前正在尝试创建一个注册脚本以将注册信息输入到我的 UserAccount 表中。以下是我的连接：

```
<?php
//database preparation
$usr = "username";
$pwd = "password"; //put your php password
$host = "computing";
$db = $usr;
$conn = mysqli_connect($host, $usr, $pwd, $db);
if (!$conn){
echo "<p>server connection error:
mysqli_connect_error()</p>";
}
$_SESSION['conn'] = $conn; //database connection status 
transfer;
?> 
```

这是我遇到困难的注册。

```
<?php
include "conn.php";

$email_address = $_POST['email_address'];
$password = md5($_POST['password']);
$f_name = $_POST['f_name'];
$s_name = $_POST['s_name'];

$insert = 'INSERT INTO UserAccount(email_address, password, f_name, s_name) 
VALUES("'.$email_address.'","'.$password.'","'.$f_name.'","'.$l_name.'")';

mysql_query($insert);

?> 
```

输入信息时，我得到一个空白页，并且表格中没有数据条目，我想知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:07:35.880

你有一个错字

`mysql_query($insert);`应该`mysqli_query($insert);`

您不能对 mysqli 连接进行 mysql 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:05:32.697

您必须查看您的查询是否正在执行？您的查询返回的错误是什么？尝试

```
mysqli_query($conn,$insert) or die(mysqli_error($conn)); 
```

这会告诉你为什么没有数据。迁移到 MYSQLI 或 PDO 的好时光

**编辑：**

此外，您正在使用`$l_name`之前未声明的变量。在您的查询中应该是`$s_name`. 很可能您的表设置为不接受 l_name 的空白值，这就是它失败的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:07:53.577

通过更改单引号和双引号来尝试以下操作：

```
$insert = "INSERT INTO UserAccount(email_address, password, f_name, s_name) 
VALUES('".$email_address."','".$password."','".$f_name."','".$l_name."')"; 
```

这是个好习惯！该页面将是空白的，但至少您应该在表格中获得条目。

还要检查数据库名称`$db`是否应该与`$usr`？这个对吗？

```
$db = $usr; 
```

这不应该是这样的吗

```
$db = "databaseName"; 
```

最后的想法：

有一个关键字变量`transfer;`看起来很有趣。由于设置了 php 错误报告/处理，它可能会导致错误但不会显示/报告它，因此是空白页。在代码中的特定位置使用`echo`以查看它停止的位置。

它应该`$transfer;`并且应该接收一个变量吗？

另一个想法是，如果你有`$_SESSION['conn']`，应该`session_start();`在开始`<?php`标签之后有一个。这都可能导致 conn.php 失败，从而破坏`INSERT`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:21:15.443

**永远不要以这种方式使用 mysql_ 函数！严重地！**

*   直接在查询中使用未经处理的数据 会冒**[SQL 注入的风险](http://en.wikipedia.org/wiki/SQL_injection)**
    *   有人可以制定可能暴露或破坏您的数据的恶意请求
*   **自 PHP 5.5 起，mysql_* 函数已被弃用！**
    *   他们不再受支持！

解决方案：

*   使用准备好的语句
*   使用 PDO
*   或在整个应用程序中始终使用 mysqli（如其他人所述）

在所有这些中，我建议采用 PDO 方式：

```
try {
    //open connection, this is different than in the old functions
    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);

    //***running query
    //**step1: create statement
    $stmt = $dbh->prepare('INSERT INTO UserAccount(email_address, password, f_name, s_name) 
    VALUES( :email, :password,:f_name,:l_name)'); //notice parameters prefixed with ':'

    //**step2: bind values (be sure to also check out the bindParameter() function too!)
    $stmt->bindValue(':email', $email_address);
    $stmt->bindValue(':password', $password);
    $stmt->bindValue(':f_name', $f_name);
    $stmt->bindValue(':l_name', $l_name);

    //**step3: exexcute statement
    $stmt->execute();

    $dbh = null;
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
} 
```

# javascript - 循环延迟 jquery / js

> ID：15390436
> 
> 赞同：5
> 
> 时间：2013-03-13T16:04:10.160
> 
> 标签：javascript, jquery, each, traffic, light

我有红绿灯 - 3 种颜色：

```
<div class="green" id="ready"></div>
<div class="orange" id="steady"></div>
<div class="red" id="go"></div> 
```

和数组：

```
var status = ["ready", "steady", "go"]; 
```

**我想在无限**循环中添加和删除类（模仿闪烁），但有一些延迟，但这段代码一次性完成。我该如何解决？

```
jQuery.each(status, function() {
    setTimeout(function() {
        $("#" + this).addClass('active');
    }, 3000);
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T16:06:59.783

[http://jsfiddle.net/9feh7/](http://jsfiddle.net/9feh7/)

您正在将所有内容设置为一次运行。每次乘以索引。

```
$('#ready, #steady, #go').each(function(i) { 
    var el=$(this);
    setTimeout(function() { 
        el.addClass('active');
    }, i * 3000); 
}); 
```

请注意，`i`在第一个实例中为 0，因此如果您希望 #ready 等待 3 秒，请使用`(i+1) * 3000`

此外，`$('#'+this)`它的语法不正确，`$(this)`但它在 setTimeout 内不起作用。

使用`setInterval`而不是`setTimeout`运行无限（除非清除）循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:10:54.973

尝试这个：

```
var status = ["ready", "steady", "go"];
var i=1;
jQuery(status).each(function(index,value) {
    var self=this;
    setTimeout(function() {
       $(self).addClass('active');
    }, 3000*i);
    i++;
}); 
```

**小提琴：http:** [//jsfiddle.net/M9NVy/](http://jsfiddle.net/M9NVy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:49:27.110

我会说你最好为你的最终目标链接。

1）设置红色功能。在红色功能调度黄色结束时设置超时 1000 毫秒。2）在黄色计划结束时，红色有 1000 毫秒超时

3) 在绿灯计划结束时，绿灯超时 1000 毫秒。

4) 通过调用 red() 开始你的代码

现在它将无限循环，而不会增加超时时间。

如果你讨厌这样，那么我会使用 setInterval 而不是 setTimeOut 但你可能需要更多的数学。

# arrays - 将元素存储回 shell 脚本中的数组

> ID：15390439
> 
> 赞同：0
> 
> 时间：2013-03-13T16:04:13.637
> 
> 标签：arrays, shell

你能帮我吗，但是我怎样才能通过迭代将我从数组中读取的每个元素放回另一个数组中？

就像在第一次迭代中我读到 11.11.11-1 并且我需要将它放入第一个索引中的另一个数组中

第二次迭代我读到 22.22.22-2 我需要把它放到第二个索引的另一个数组中

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:58:02.357

假设我正确阅读了您的问题，测试用例将是：

```
declare -a readarray
declare -a another
readarray=(11.11.11-1,22.22.22-2,33.33.33-3,44.44.44-4)
num=${#readarray[@]}

for ((i=0; i < num; i++))
do
    another[$i]=${readarray[$i]}
done

echo "${another[@]}" 
```

你没有说你使用的是哪个 shell，我假设`bash`.

# android - 无法恢复屏幕尺寸android

> ID：15390441
> 
> 赞同：0
> 
> 时间：2013-03-13T16:04:21.327
> 
> 标签：android, size, height, width

我有一个小问题，如图所示，我无法恢复我想要的屏幕尺寸，我有点迷茫......（我正在学习）

[http://imageshack.us/f/708/erreurtaillepong4.png/](http://imageshack.us/f/708/erreurtaillepong4.png/)

[http://imageshack.us/f/708/erreurtaillepong5.png/](http://imageshack.us/f/708/erreurtaillepong5.png/)

我需要有屏幕的宽度和高度

请帮忙

编辑 1

这是我的代码：

```
package com.salocincreations.pong;

import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;

public class GameState {

    //Largeur et hauteur de l'écran
    int _screenWidth = TailleEcran.Measuredwidth;
    int _screenHeight = TailleEcran.Measuredheight;

    //La balle
    final int _ballSize = 10;
    int _ballX = _screenWidth/2;    int _ballY = _screenHeight/2;
    int _ballVelocityX = 2;     int _ballVelocityY = 4;

    //Les barres
    final int _batLength = 75;  final int _batHeight = 10;
    int _topBatX = (_screenWidth/2) - (_batLength / 2);
    final int _topBatY = 10;
    int _bottomBatX = (_screenWidth/2) - (_batLength / 2);  
    final int _bottomBatY = _screenHeight - 20;

    public GameState()
    {
    }

    //The update method
    public void update() {

    _ballX += _ballVelocityX;
    _ballY += _ballVelocityY;

    //DEATH!
    if(_ballY > _bottomBatY + 10 || _ballY < 0)         
    {_ballX = 100;  _ballY = 100;}//Collisions with the goals

    if(_ballX > _screenWidth || _ballX < 0)
                _ballVelocityX *= -1;   //Collisions with the sides     

    if(_ballX > _topBatX && _ballX < _topBatX+_batLength && _ballY - 16 < _topBatY)         
                     _ballVelocityY *= -1;  //Collisions with the bats      

    if(_ballX > _bottomBatX && _ballX < _bottomBatX+_batLength 
                    && _ballY + 16 > _bottomBatY)
                           _ballVelocityY *= -1;
    }

    public boolean surfaceTouched(float posX, float posY) {
        _topBatX = (int) posX;
        _bottomBatX = (int) posX;

        return true;
        }

    //the draw method
    public void draw(Canvas canvas, Paint paint) {

    //Clear the screen
    canvas.drawRGB(0, 0, 0);

    //set the colour
    paint.setARGB(200, 0, 200, 700);

    //draw the ball
    canvas.drawRect(new Rect(_ballX,_ballY,_ballX + _ballSize,_ballY + _ballSize),
                                 paint);

    //draw the bats
    canvas.drawRect(new Rect(_topBatX, _topBatY, _topBatX + _batLength,
                                          _topBatY + _batHeight), paint); //top bat
    canvas.drawRect(new Rect(_bottomBatX, _bottomBatY, _bottomBatX + _batLength, 
                                          _bottomBatY + _batHeight), paint); //bottom bat

        // Nous allons dessiner nos points par rapport à la résolution de l'écran
        int iWidth = canvas.getWidth(); // Largeur
        int iHeight = canvas.getHeight(); // Hauteur

        // Affecter une couleur de manière aléatoire
            paint.setARGB(255, 500, 500, 500);
            // Définir l'épaisseur du segment
            paint.setStrokeWidth (2);
            // Puis dessiner nos points dans le cavenas
            canvas.drawLine(0, iHeight/2, iWidth, iHeight/2, paint);    
            canvas.drawCircle(iWidth/2, iHeight/2, 50, paint);
        }            
    } 
```

和

```
public class TailleEcran extends Activity {

    int Measuredwidth;
    int Measuredheight;
    Point size = new Point();
    WindowManager w = getWindowManager();{

      if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2){
            w.getDefaultDisplay().getSize(size);

            Measuredwidth = size.x;
            Measuredheight = size.y; 
          }else{
            Display d = w.getDefaultDisplay(); 
            Measuredwidth = d.getWidth(); 
            Measuredheight = d.getHeight(); 
          }}} 
```

在行

```
int _screenWidth = TailleEcran.Measuredwidth;
int _screenHeight = TailleEcran.Measuredheight; 
```

错误说：无法对非静态字段 TailleEcran.Measuredwidth 进行静态引用

和

无法对非静态字段 TailleEcran.Measuredheight 进行静态引用

编辑 2

那么，anthropomo，我需要写吗？

```
 public class GameState {
        // declare variables above here without assignments
        Display display = ((WindowManager)
            context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
        DisplayMetrics metrics = new DisplayMetrics();
        display.getMetrics(metrics);

        int pixHeight = metrics.heightPixels;
        int pixWidth = metrics.widthPixels;
    // dp numbers:
        float density  = context.getResources().getDisplayMetrics().density;
        float dpHeight = pixHeight / density;
        float dpWidth  = pixWidth / density;
public GameState(Context context){
//all the rest of my class
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:09:00.123

您可以像这样使用[Context.getResources()](http://developer.android.com/reference/android/content/Context.html#getResources%28%29)和[Resources.getDisplayMetrics](http://developer.android.com/reference/android/content/res/Resources.html#getDisplayMetrics%28%29)：

```
DisplayMetrics displayMetrics = getResources().getDisplayMetrics(); 
```

然后你会有

```
displayMetrics.widthPixels;  // width
displayMetrics.heightPixels; // height 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:17:42.790

为了在 <13 中兼容且未弃用：

```
 Display display = ((WindowManager)
        context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    DisplayMetrics metrics = new DisplayMetrics();
    display.getMetrics(metrics);

    int pixHeight = metrics.heightPixels;
    int pixWidth = metrics.widthPixels;
// dp numbers:
    float density  = context.getResources().getDisplayMetrics().density;
    float dpHeight = pixHeight / density;
    float dpWidth  = pixWidth / density; 
```

编辑：

您会遇到错误，`display.getMetrics(metrics);`因为只有声明才能发生在类中的方法之外。所有这些代码都应该在一个方法中，并且假设 GameState 不是真正的 Activity，这些东西应该在构造函数中。像这样的东西：

```
public class GameState {
    // declare variables above here without assignments

    public GameState(Context context){
        // everything above, but save the variables outside of the constructor
    }

} 
```

然后在使用GameState的Activity中，做`gameState = new GameState(this);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:06:34.103

尝试这个

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

在 13 之前的 API 上，您可以使用：

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth();  // deprecated
int height = display.getHeight();  // deprecated 
```

# java - 来自一个 ActiveMQ 队列的多个消费者

> ID：15390444
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:04:25.200
> 
> 标签：java, jms, activemq

假设我有几个连接到同一个队列的消费者。

我的业务逻辑是：从队列中获取一条消息，执行一些逻辑操作，如果该操作成功，则确认此消息（作为客户端确认）。

我的问题是，如果这些消费者逻辑之一失败并且它没有对该消息返回确认，会发生什么。

当消息仍在由消费者处理时，是否存在将消息发送给其他消费者的风险？

是否存在某种超时，然后线程将消息释放回队列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:41:23.043

消息以循环方式发送给消费者队列消费者。如果消费者失败并且它正在处理的消息在代理处没有得到确认，那么一旦代理检测到消费者连接失败，它将把消息放回队列中，使其可供另一个连接的消费者处理。

还可以为消息配置重新传递的最大数量，以便在某个点之后将其放置在死信队列中。

# smalltalk - 自引用 PetitParser 的 PPCompositeParsers

> ID：15390459
> 
> 赞同：4
> 
> 时间：2013-03-13T16:05:35.667
> 
> 标签：smalltalk, pharo, petitparser

我有一个编程语言语法我想在 PPCompositeParser 的几个子类中展开（例如，一个类将处理指令，另一个类将处理表达式，另一个类具有句柄程序结构）。我想这样做是为了避免获得一个包含数十个实例变量的大类。

我的问题是这些子语法有循环依赖：结构语法引用语句语法的'statement'规则，引用表达式语法的'expression'规则，引用结构语法的'subroutineName'（关闭依赖循环）。我尝试了一种简单的方法，例如，在表达式语法中使用 #subroutineName 方法，如下所示：

```
MyExpressionGrammar>>subroutineName
  ^ N2TJStructureParser newStartingAt: #subroutineName 
```

但由于无限递归（显然），初始化失败。

为了解决这个问题，我创建了一个 PPDeferedParser：

```
PPParser subclass: #PPDeferedParser
    instanceVariableNames: 'creationBlock'
    classVariableNames: ''
    poolDictionaries: ''
    category: 'PetitParser-Tools'

PPDeferedParser>>parseOn: aStream
    ^ creationBlock value parseOn: aStream 
```

这使得之前的 #subroutineName 看起来像：

```
MyExpressionGrammar>>subroutineName
  ^ PPDederedParser creationBlock: [N2TJStructureParser newStartingAt: #subroutineName] 
```

这似乎可行，但我想知道是否还有其他解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T23:56:15.833

`PPCompositeParser`目前，PetitParser 不直接支持将复合解析器拆分为多个子类。

请记住，如果您使用 PetitParser 浏览器，则无需担心实例变量，它们会自动为您管理。此外，您不一定需要为每个产品创建一个实例变量。例如，终端可以在您直接调用的方法中。

您的解决方案当然也有效，但它不是那么好，因为它需要您仔细注意您希望如何连接您的语法。同样在您的实现中，您应该延迟缓存结果，否则您的代码将在解析时创建新的复合解析器。这是非常昂贵的。

除此之外，当然可以改进`PPCompositeParser`以支持多个子类之间的依赖关系，例如通过声明构造函数将准备、初始化和最终解析的依赖的其他解析器。

# ruby - 使用 Ruby 通过网关连接到远程数据库

> ID：15390465
> 
> 赞同：3
> 
> 时间：2013-03-13T16:05:43.937
> 
> 标签：ruby, oracle, ssh

我的目标 Oracle 数据库服务器存在于防火墙之外。我使用 ssh 隧道连接到防火墙之外的服务器，称之为*friendly-server*。然后从我的本地主机，我使用 DBI 连接到另一台服务器上存在的目标数据库，称之为*target-dbserver*。[类似的问题](https://stackoverflow.com/questions/3653788/how-can-i-connect-to-oracle-db-through-ssh-tunnel-chain-double-tunnel-server-i?rq=1)建议使用下面的命令行。

这是我用来设置隧道的 ssh 命令：

```
ssh -nN -L 1520:target-dbserver:1520 friendly-server 
```

我想在 Ruby 中实现这个，所以我使用了[net-ssh-gateway](https://github.com/jamis/net-ssh-gateway) gem。我可能只是不了解 ssh 隧道是如何工作的，因为我看不到如何建立网关，然后建立随后的 ssh 到*友好服务器*，我看不到如何建立与目标数据库的 DBI 连接*-数据库服务器。*

```
# Set up the gateway. The gem will find an unused port.
gateway = Net::SSH::Gateway.new('friendly-server', 'user')
# Establish ssh connection
gateway.ssh('friendly-server', 'user') do |ssh|
# now how to make DBI connection to target-dbserver ?
end 
```

试过这个失败了，因为 DBI 调用如何知道使用隧道？

```
gateway = Net::SSH::Gateway.new('friendly-server', 'user')
gateway.ssh('friendly-server', 'user') do |ssh|
  db = DBI.connect('target server connection string', 'user','password')
end 
```

使用`gateway.open`方法。这对我来说似乎是合乎逻辑的，但是当我尝试通过本地主机（网关）通过 DBI 连接到目标数据库时它总是挂起。我认为可能是因为该`.open`方法建立了与我不想要的 targetdb 的 ssh 连接。我希望与 dbtarget 的唯一联系是 DBI 连接。

```
# open gateway from localhost to bastion
gateway = Net::SSH::Gateway.new('friendly-server', 'user')
# Opens a new port on the local host and forwards it to the given host/port
# via the gateway host.
gateway.open(targetdb, 1520) do |port|
  db = DBI.connect(localhost, port, sid)
end 
```

**更新**

无法让网关或 net-ssh forward_local 为我工作。沮丧的我选择`fork`了 ssh 隧道。不理想但暂时有效。如果使用本地端口，那么我想捕获该错误，但不知道如何使用此方法。

```
tunnel = fork do
  exec 'ssh -nN -L 1520:targetdb:1520 friendly-server'
end
Process.detach(tunnel)
#do stuff
Process.kill('HUP', tunnel) if tunnel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:24:29.360

我的解决方案是派生一个 ssh 命令，然后在我完成后终止该 ssh 进程。

```
# obj_hash contains remote db details and a flag for when a tunnel is needed
local_port = 3535
if obj_hash[:tunnel]
  tunnel = fork do
    exec "ssh -nN -L #{local_port}:#{obj_hash[:server]}:#{obj_hash[:port]} #{obj_hash[:tunnel]} 2> /dev/null; "
  end
  Process.detach(tunnel)
end
# do stuff
Process.kill('HUP', tunnel) if tunnel 
```

目前我不知道如何检查隧道是否已经在 local_port 上，所以不是一个完美的解决方案。

# java - 如何根据另一列值更改更改生成列中选择的选定值

> ID：15390472
> 
> 赞同：1
> 
> 时间：2013-03-13T16:06:05.980
> 
> 标签：java, select, listener, vaadin

在一个表中，有两列，每一列都有一个下拉列表。

```
final Table archivesTable = new Table();
archivesTable.setTableFieldFactory(new TableFieldFactory() {
    @Override
    public Field createField(Container container, Object itemId,
                             Object propertyId, Component uiContext) {
        Select sel = new Select();
        try (SSEConnector c = CisApplication
                              .generateSseConnector((SseConnection) sseSetupSelect
                              .getValue())) {
            for (String s : c.getListOfArchives())
                sel.addItem(s);
        } catch (Exception e) {
            e.printStackTrace();
        }
        System.out.println("yes 2");
        return sel;
    }
});

archivesTable.addGeneratedColumn("reportName",
    new Table.ColumnGenerator() {
        @Override
        public Object generateCell(Table source, final Object itemId, Object columnId) {
            reportSelect = new Select();
            try (SSEConnector c = CisApplication
                                  .generateSseConnector((SseConnection) sseSetupSelect
                                  .getValue())) {
                for (String s : c.getListOfArchives())
                    reportSelect.addItem(s);
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.out.println("yes 3");
            return reportSelect;
        }
    }
); 
```

正如我们所看到的，我希望表中第一列中第一个“选择”的任何值更改都会影响表中第二列中第二个“选择”中的值。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:40:39.733

生成的列不会影响 vaadin 表的基础数据容器。它们是即时生成的，不会为它们创建任何属性。因此，没有明显的方法可以直接访问它们。

实现此行为的丑陋方法是为两列预生成所有控件并将它们绑定在一起。将它们存储在绑定到的地图中`itemId`：

```
Collection itemIds = archivesTable.getItemIds();
final HashMap<Object,Select> firstColumnSelects = new HashMap<Object, Select>();
final HashMap<Object,Select> secondColumnSelects = new HashMap<Object, Select>();
for(Object itemId : itemIds) {
    final Select secondColumnSelect = new Select();
    //initialize select for the second column
    secondColumnSelect.setImmediate(true);
    Select firstColumnSelect = new Select();
    //initialize select for the first column
    firstColumnSelect.addListener(new ValueChangeListener() {

    @Override
    public void valueChange(ValueChangeEvent event) {
        //setting value to the list in second column
        secondColumnSelect.setValue(event.getProperty().getValue());
    }
    });
    firstColumnSelect.setImmediate(true);
    firstColumnSelects.put(itemId, firstColumnSelect);
    secondColumnSelects.put(itemId, secondColumnSelect);
} 
```

然后，无需即时生成控件，只需返回预先生成的列表：

```
//...
@Override
public Field createField(Container container, final Object itemId, Object propertyId, Component uiContext) {
    return firstColumnSelects.get(itemId);
}
//...
@Override
public Object generateCell(Table source, final Object itemId, Object columnId) {
    return secondColumnSelects.get(itemId);
} 
```

更清洁的方法是根本不使用生成的列。生成的列并不意味着大量参与数据操作。相反，您可以创建一个单独的类来表示表记录并在那里实现所有交互：

```
public class TableDisplayBean {
    private Select firstSelect;
    private Select secondSelect;

    public TableDisplayBean() {
        //initialization of controls, value change handling goes here
    }

    public Select getFirstColumn() {
        return firstSelect;
    }
    public Select getSecondColumn() {
        return secondSelect;
    }
} 
```

剩下的就是使用[BeanItemContainer](https://vaadin.com/api/com/vaadin/data/util/BeanItemContainer.html)将一组 bean 绑定到表。

# python - FeedParser.parse 正在提供一个字典，其中我找不到我需要的内容

> ID：15390476
> 
> 赞同：0
> 
> 时间：2013-03-13T16:06:18.500
> 
> 标签：python, feedparser

我一直在尝试提取在 XML 文件中看到的某些信息，但无法弄清楚如何从使用 FeedParser 提供的字典中提取它。这是原始 XML：

```
<SearchResults:searchresults xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:SearchResults="http://www.zillow.com/static/xsd/SearchResults.xsd"
xsi:schemaLocation="http://www.zillow.com/static/xsd/SearchResults.xsd http://www.zillowstatic.com/vstatic/15706ff87bd1719552647e4e6eb2b722/static/xsd/SearchResults.xsd">

  <request>
    <address>411 Aldrich Ave</address>
    <citystatezip>30079</citystatezip>
  </request>
  <message>
    <text>Request successfully processed</text>
    <code>0</code>
  </message>
  <response>
    <results>
      <result>
        <zpid>2115831629</zpid>
        <links>
          <homedetails>
          http://www.zillow.com/homedetails/411-Aldrich-Ave-Scottdale-GA-30079/2115831629_zpid/</homedetails>
          <mapthishome>
          http://www.zillow.com/homes/2115831629_zpid/</mapthishome>
          <comparables>
          http://www.zillow.com/homes/comps/2115831629_zpid/</comparables>
        </links>
        <address>
          <street>411 Aldrich Ave</street>
          <zipcode>30079</zipcode>
          <city>Scottdale</city>
          <state>GA</state>
          <latitude>33.787872</latitude>
          <longitude>-84.267332</longitude>
        </address>
        <FIPScounty>13089</FIPScounty>
        <useCode>SingleFamily</useCode>
        <yearBuilt>1915</yearBuilt>
        <zestimate>
          <amount currency="USD" />
          <last-updated>12/31/1969</last-updated>
          <oneWeekChange deprecated="true" />
          <valueChange />
          <valuationRange>
            <low currency="USD" />
            <high currency="USD" />
          </valuationRange>
          <percentile>0</percentile>
        </zestimate>
        <rentzestimate>
          <amount currency="USD">785</amount>
          <last-updated>03/11/2013</last-updated>
          <oneWeekChange deprecated="true" />
          <valueChange duration="30" currency="USD">7</valueChange>
          <valuationRange>
            <low currency="USD">589</low>
            <high currency="USD">950</high>
          </valuationRange>
        </rentzestimate>
        <localRealEstate>
          <region id="43068" type="city" name="Scottdale">
            <links>
              <overview>
              http://www.zillow.com/local-info/GA-Scottdale/r_43068/</overview>
              <forSaleByOwner>
              http://www.zillow.com/scottdale-ga/fsbo/</forSaleByOwner>
              <forSale>
              http://www.zillow.com/scottdale-ga/</forSale>
            </links>
          </region>
        </localRealEstate>
      </result>
    </results>
  </response>
</SearchResults:searchresults>
<!--
 H:004  T:21ms  S:1133  R:Wed Mar 13 08:51:11 PDT 2013  B:3.0.186358.20130311132712880-comp_rel_b.186358.20130311132846726-comp_rel_b 
--> 
```

这是我跑步时得到的字典`print feedparser.parse('zillow.xml')`：

```
{'bozo': 0,
 'encoding': u'utf-8',
 'entries': [],
 'feed': {u'SearchResults_searchresults': {'schemalocation': u'http://www.zillow.com/static/xsd/SearchResults.xsd http://www.zillowstatic.com/vstatic/15706ff87bd1719552647e4e6eb2b722/static/xsd/SearchResults.xsd',
                                           'xsi:schemalocation': u'http://www.zillow.com/static/xsd/SearchResults.xsd http://www.zillowstatic.com/vstatic/15706ff87bd1719552647e4e6eb2b722/static/xsd/SearchResults.xsd'},
          'amount': {'currency': u'USD'},
          'high': {'currency': u'USD'},
          'low': {'currency': u'USD'},
          'oneweekchange': {'deprecated': u'true'},
          'region': {'id': u'43068', 'name': u'Scottdale', 'type': u'city'},
          'valuechange': {'currency': u'USD', 'duration': u'30'}},
 'namespaces': {u'SearchResults': u'http://www.zillow.com/static/xsd/SearchResults.xsd',
                u'xsi': u'http://www.w3.org/2001/XMLSchema-instance'},
 'version': u''} 
```

在这个例子中，我试图退出：Rent Estimate/Amount

# android - Android AES 128 加密

> ID：15390479
> 
> 赞同：6
> 
> 时间：2013-03-13T16:06:30.333
> 
> 标签：android, iphone, encryption, aes

我正在尝试在 Android 上实现 AES128 加密。我有一个解决方案可以在带有 Objective C 的 iPhone 上运行，但在将其移植到 Android 时遇到了麻烦。我已经在 stackoverflow 上搜索了一个解决方案，但我似乎做错了什么。我对Java相当陌生，所以我认为我缺少与数据、字符串转换有关的东西。

这是我的 iPhone 加密：

```
char keyPtr[kCCKeySizeAES128+1];
[keyString getCString:keyPtr
            maxLength:sizeof(keyPtr)
             encoding:NSASCIIStringEncoding];

// CString for the plain text
char plainBytes[[plainString length]+1];
[plainString getCString:plainBytes
              maxLength:sizeof(plainBytes)
               encoding:NSASCIIStringEncoding];

size_t bytesEncrypted = 0;

// Allocate the space for encrypted data
NSUInteger dataLength = [plainString length];
size_t bufferSize = dataLength + kCCBlockSizeAES128;
void* buffer = malloc(bufferSize);

// Encrypt
CCCryptorStatus ret = CCCrypt(kCCEncrypt,
                              kCCAlgorithmAES128,
                              kCCOptionPKCS7Padding | kCCOptionECBMode,
                              keyPtr,
                              kCCKeySizeAES128,
                              NULL,
                              plainBytes, sizeof(plainBytes),
                              buffer, bufferSize,
                              &bytesEncrypted);
if (ret != kCCSuccess) {
    free(buffer);
}

encryptedData = [NSData dataWithBytes:buffer length:bytesEncrypted]; 
```

这是我的Java：

```
 SecretKeySpec skeySpec = new SecretKeySpec(key, "AES");
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS7Padding");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(plainText.getBytes("UTF-8")); 
```

在 iPhone 和 Java 中使用相同的密钥和明文会产生不同的结果。我的 iPhone 结果按我需要的方式工作，所以我试图让 java 给我 iPhone 结果。我肯定在 Java 中遗漏了一些东西，只是不确定它是什么。

***编辑***

根据下面的建议，我将我的 Java 修改为此

```
 byte[] keyBytes = plainTextKey.getBytes("US-ASCII");
    SecretKeySpec skeySpec = new SecretKeySpec(keyBytes, "AES");
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS7Padding");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(plainText.getBytes("US-ASCII")); 
```

但我仍然在 android 和 iPhone 之间得到不同的结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:07:21.503

除了纯文本编码困难（正如 vcsjones 在评论中指出的那样），请确保密钥字符串的编码相同（请注意，直接使用原始字符串，如密码，作为加密密钥是坏消息熊，在密码上使用像 PBKDF2 这样的密钥派生函数来获取密钥）。

此外，Java 的 ASCII 编码字符串`US-ASCII`不仅仅是`ASCII`，因此请确保在您的`getBytes`调用中使用它。

**编辑**：发现你的问题：iOS 字符串最后用一个额外的空字符（0x00）加密，而 java 没有。因此，在 java 中加密“hello world\0”会得到与 iOS 中“hello world”相同的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T19:04:00.390

互联网上的大多数示例都是 AES 的弱实现。为了实现强大，应始终使用随机 IV，并且应散列密钥。

对于 AES 的更安全（随机 IV + 散列密钥）跨平台（android、ios、c#）实现，请参见我的答案 - [https://stackoverflow.com/a/24561148/2480840](https://stackoverflow.com/a/24561148/2480840)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-17T23:31:36.693

我已经编写了这个管理器文件，它的功能对我来说非常好。这适用于 AES 128，不含任何盐。

```
public class CryptoManager {

private static CryptoManager shared;
private String privateKey = "your_private_key_here";
private String ivString = "your_iv_here";

private CryptoManager(){
}

public static CryptoManager getShared() {
    if (shared != null ){
        return shared;
    }else{
        shared = new CryptoManager();
        return shared;
    }
}

public String encrypt(String value) {
    try {
        IvParameterSpec iv = new IvParameterSpec(ivString.getBytes("UTF-8"));
        SecretKeySpec skeySpec = new SecretKeySpec(privateKey.getBytes("UTF-8"), "AES");

        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5PADDING");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec, iv);

        byte[] encrypted = cipher.doFinal(value.getBytes());
        return android.util.Base64.encodeToString(encrypted, android.util.Base64.DEFAULT);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return null;
}

public String decrypt(String encrypted) {
    try {
        IvParameterSpec iv = new IvParameterSpec(ivString.getBytes("UTF-8"));
        SecretKeySpec skeySpec = new SecretKeySpec(privateKey.getBytes("UTF-8"), "AES");

        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5PADDING");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec, iv);
        byte[] original = new byte[0];
        original = cipher.doFinal(android.util.Base64.decode(encrypted, android.util.Base64.DEFAULT));

        return new String(original);
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    return null;
}
} 
```

您需要像这样调用函数。

```
String dataToEncrypt = "I need to encrypt myself";
String encryptedData = CryptoManager.getShared().encrypt(data); 
```

您将使用以下行获得加密字符串

```
String decryptedString = CryptoManager.getShared().decrypt(encryptedData); 
```

# sql - 按 desc 排序 - 问题

> ID：15390482
> 
> 赞同：-2
> 
> 时间：2013-03-13T16:06:39.653
> 
> 标签：sql, sql-server, sql-server-2008

我在`order by desc`. 例如，我想按 desc 排序 id 的值，即 1-10。这是示例代码

```
select stu_ID from student order by stu_ID desc 
```

但从这里我会得到这个结果

```
9
8
7
6
5
4
3
2
10
1 
```

我希望结果是这样的

```
10
9
8
7
6
5
4
3
2
1 
```

请帮助谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T16:08:11.033

*原因是该**列是一个字符串***。正确的？

尝试将其转换为 int，

```
SELECT * FROM tableName ORDER BY CAST(colName AS INT) DESC 
```

或者不进行转换，将列的数据类型更改为`INT`，这样您就可以直接对记录进行排序而无需转换为其他数据类型，

```
SELECT * FROM tableName ORDER BY colName DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:08:45.337

我假设这些值不是`int`but `varchar`。因此，您应该将类​​型更改为`int`. 只要您可以使用`CAST`：

```
SELECT stu_id
FROM dbo.student
ORDER BY CAST(stu_id AS int) DESC 
```

[**这**](http://sqlfiddle.com/#!6/59a5d/2/1)是一个不正确（按字母顺序）+正确（数字）顺序的演示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:08:46.007

尝试

```
order by convert(int,id) desc 
```

应该这样做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:07:54.097

看起来您的列类型不是数字，而是字符串。

# visual-studio-2010 - 为 Visual Studio 2010 编译 qt 时出错

> ID：15390485
> 
> 赞同：0
> 
> 时间：2013-03-13T16:06:55.907
> 
> 标签：visual-studio-2010, qt

我想为 Visual Studio 2010 编译 qt 4.8 但有问题。我知道正在发布一个类似的问题，但在尝试了建议的解决方案后我仍然面临这个问题。我真的需要帮助。

1：我安装了visual studio插件

2：我创建了新文件夹 c:\Qt\4.8.0\ 并将 Qt 源代码提取到其中。

3：我设置环境变量：

QTDIR = C:\Qt\4.8.0-\

QMAKESPEC = win32-msvc2010

4：我添加到Path变量中：C:\Qt\4.8.0\bin

5：我创建了文件夹C:\Qt\4.8.0\jom 将最新版本的jom文件解压到里面

6：我重新启动 Windows，然后打开 VISUAL STUDIO 命令提示符并运行 cd C:\Qt\4.8.0 configure -debug-and-release -opensource -platform win32-msvc2010

但我收到以下错误：致命错误 C1083：无法打开包含文件：'windows.h'：没有这样的文件或目录。似乎找不到平台头文件，所以我下载并安装了 windows sdk，但我仍然遇到同样的错误。请问我接下来要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:09:05.363

安装 Windows SDK 后，转到开始菜单并在 Windows SDK 条目下找到 Visual Studio 注册工具。使用它将 SDK 链接到 VS2010 并重新编译。

**编辑**

按照[此链接](http://msdn.microsoft.com/en-us/library/ff660764%28v=vs.100%29.aspx)中 VS2010 的说明进行操作：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T11:42:25.350

使用 windows.h 的包含路径添加环境全局变量 INCLUDE

# permissions - 向现有模型权限添加操作键

> ID：15390493
> 
> 赞同：0
> 
> 时间：2013-03-13T16:07:17.317
> 
> 标签：permissions, liferay-6

我正在尝试添加自定义权限，即特定于我使用 ServiceBuilder 构建的自定义模型（请参阅下面的资源操作/default.xml 摘录）。我的 portlet 已经部署，并且正在使用中。

我对此有两个问题：

1.  我假设我必须在升级方法中重新创建适当的资源，以便考虑我的新操作键。是这样吗 ？
2.  如果我必须再次向我的所有模型实例添加资源，是否会保留之前分配的权限？

最好的问候， 阿兰

* * *

资源操作 default.xml 文件的提取：

```
 <permissions>
        <supports>
            <action-key>VIEW</action-key>
            <action-key>DELETE</action-key>
                            ...
            <action-key>NEW_CUSTOM_PERMISSION</action-key>
        </supports>
                     ...
    </permissions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:06:45.597

权限系统中的逻辑是 Roles -> Action-keys -> Resources

'Action-keys -> Resources' 在您的 portlet 的业务逻辑中定义，并将在其他页面或门户实例中携带。通过这种方式，您可以控制资源（页面、模型、服务构建器实体等）如何由公开的操作键控制，用于您的 portlet 的每个实例。

'Roles -> Action-keys' 关系对于同一个 portlet 的实例可以有两种不同的方式：

1.  通过将角色分配给操作键（从管理员的控制面板），您可以为部署 portlet 的特定门户使用完全不同的角色。这样，您还定义了一些将在该门户的每个页面中遵循的最小/默认权限。例如，在 Portal P1 中，角色 R1 中的所有用户都可以执行操作 A1，而在 Portal P2 中，根本没有角色 R1
2.  using the permissions table, you fine tune or override the above permissions, and give different permissions to instances that are placed in different pages of the same portal. e.g Users in role R1, in page p1 can perform an action, while on another page p2, they can't

You can imagine the action keys as an middle layer between the resources and the roles, giving you the abstraction create a great combination of role-to-resource bindings

# lucene - 使用 FTS / Lucene 对标签进行模糊搜索

> ID：15390500
> 
> 赞同：2
> 
> 时间：2013-03-13T16:07:36.983
> 
> 标签：lucene, full-text-search, alfresco

我想在 fts 搜索中执行以下查询：*TAG:(turte~0.5)* 但这不起作用。预期的结果将是带有“turtle”标签的文档

*TAG:(turte)~0.5*有效，但这显然不是同一个查询，结果完全关闭。

是否可以在标签上添加模糊？如何/为什么不？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:52:11.990

模糊查询适用于每个领域。当您不指定字段时，您只是使用默认字段。

TAG：turte~0.5 应该可以正常工作

# java - 获取 BitSet 中设置位的所有索引

> ID：15390503
> 
> 赞同：11
> 
> 时间：2013-03-13T16:07:46.537
> 
> 标签：java, bitset

我正在寻找一种快速算法，它可以为我提供 BitSet 对象中设置位的所有索引。这很慢：

```
BitSet bitSet = ...
Collection<Integer> indexes = new ArrayList<Integer>(bitSet.cardinality());
int nextSetBit = bitSet.nextSetBit(0);
for (int i = 0; i < bitSet.cardinality(); ++i ) {
    indexes.add(nextSetBit);
    nextSetBit = bitSet.nextSetBit(nextSetBit + 1);
}
... 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-13T18:05:21.350

完全不需要使用`bitSet.cardinality()`：

```
for (int i = bitSet.nextSetBit(0); i != -1; i = bitSet.nextSetBit(i + 1)) {
    indexes.add(i);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-05T20:17:35.120

在[BitSet#nextSetBit(int)](https://docs.oracle.com/javase/8/docs/api/java/util/BitSet.html#nextSetBit-int-) javadocs 中指定：

```
//To iterate over the true bits in a BitSet, use the following loop:
for (int i = bs.nextSetBit(0); i >= 0; i = bs.nextSetBit(i+1)) {
     // operate on index i here
     if (i == Integer.MAX_VALUE) {
         break; // or (i+1) would overflow
     }
 } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-05T22:09:20.253

从 Java 8 开始，您可以使用 BitSet 的`stream()`方法。

> **内部流流（）**
> 
> 返回此 BitSet 包含处于设置状态的位的索引流。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T16:24:14.337

更改循环（您将复杂性增加到 O(N^2)，因为您在每次循环迭代中调用 cardinality()）：

```
for (int e = bitSet.cardinality(), i = 0; i < e; ++i ) {
    indexes.add(nextSetBit);
    nextSetBit = bitSet.nextSetBit(nextSetBit + 1);
} 
```

# java - Java代码编辑

> ID：15390512
> 
> 赞同：0
> 
> 时间：2013-03-13T16:08:06.917
> 
> 标签：java, edit

帮助，我无法让我的程序成功运行。它给了我一个错误，其中有两个输入为期中分数和期末分数。我无法让它在适当的结束弹出时完全运行。我尝试编写一个程序，该程序接受用户的分数并为未知数量的学生显示适当的字母等级。我的代码如下。

```
 import javax.swing.*;
    public class StudentGrades_Hann{
        public static void main (String[] args) {
            String input ;
            input= JOptionPane.showInputDialog(" Enter Name, \n ID Number,\n Homework Mark, \n Assignment Mark, \n Midterm Mark, \n and Final Mark \n All Entrys Must Be Separated By Commas");

            int com;
            com= input.indexOf(",");

            String name ;
            name = input.substring(0,com);

            int com2;
    com2= input.indexOf(",", com+1);

    String idnumber ;
    idnumber = input.substring(com+1, com2);

    int com3;
    com3= input.indexOf(",", com2+1);

    String homeworkmark ; 
    homeworkmark = input.substring(com2+1, com3);

    int com4;
    com4= input.indexOf(",", com3+1);

        String assignmentmark ; 
        assignmentmark = input.substring(com3+1, com4);

        int com5;
        com5= input.indexOf(",", com4+1);

        String midtermmark ; 
        midtermmark = input.substring(com4+1, com5);

        int com6;
        com6= input.indexOf(",", com5+1);

        String finalmark ; 
        finalmark = input.substring(com4+1);

        double as ;
        as = Double.parseDouble (assignmentmark.trim());

        double hw ;
        hw = Double.parseDouble (homeworkmark.trim());

        double mm ;
        mm = Double.parseDouble (midtermmark.trim());

        double fm ;
        fm = Double.parseDouble (finalmark.trim());

        String grade ; 

        double totalmark ; 
        totalmark= 0.1*hw+0.1*as+0.3*mm+0.5*fm ;

        double mnf ;
        mnf= 0.5*fm+0.3*mm ;

        if(totalmark < 50 || mnf < 50) {
            JOptionPane.showMessageDialog(null,name + idnumber + "Fail") ;
        }
        else if (totalmark < 85) {
            JOptionPane.showMessageDialog(null, name + idnumber + "A") ;
        }

        else if (totalmark < 75) {
            JOptionPane.showMessageDialog(null,name + idnumber + "B") ;
        }

        else if (totalmark <65) {
            JOptionPane.showMessageDialog(null, name + idnumber + "C");
        }

        else if (totalmark <=50) {
            JOptionPane.showMessageDialog(null,name + idnumber + "D") ;
        }

        else {
            JOptionPane.showMessageDialog(null, "Invalid Entry") ;
        }

    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:19:51.080

您没有更新`,`下一个值的索引。

对于第二个值，如果输入是`name, 1, 1, 1, 1, 1`，它将尝试解析 `"1, 1"`。

使用`String.split(",")`，检查数组中的元素数量是否符合您的预期，然后解析它们，就像这样的伪代码：

```
String[] strings = input.split(",");
if (string.length == 6) { //name and 5 values
    name = strings[0];
    id = strings[1];
    ...
} else {
       //provided values are incorrect
} 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:23:16.953

> 我收到异常错误“线程“main”中的异常 java.lang.NumberFormatException：对于输入字符串：“80, 90”

您正在尝试在代码中无法解析的某处解析“80,90” double 。所以你得到了 NumberFormatException。

因此，与其在查找 indexOf 和 substring 操作上做这么多的工作。试试看嘛

```
String[] splitted = input.split(","); 
```

您在拆分给定字符串时犯了某个错误。我发现了错误。

```
String finalmark ; 
    finalmark = input.substring(com4+1); 
```

应该

```
String finalmark ; 
    finalmark = input.substring(com5+1); 
```

# javascript - 按钮单击未运行 javascript

> ID：15390517
> 
> 赞同：0
> 
> 时间：2013-03-13T16:08:21.300
> 
> 标签：javascript, jquery, button

我有一个按钮，我想隐藏/取消隐藏它下面的字段：

```
<button id="post1-new-comment-button" type="button">Click</button>
<input id="post1-new-comment" name="comment[body]" size="50" type="text" /> 
```

使用以下CSS

```
#post1-new-comment {
    display: none;
} 
```

和 javascript

```
$(function() {
    return $("#post1-new-comment-button").click(function() {
        return $("#post1-new-comment").val("").toggle();
    });
}); 
```

但是，单击按钮时没有任何反应。我在这里做错了什么？在这里的jsfiddle：http: [//jsfiddle.net/Z5hqZ/](http://jsfiddle.net/Z5hqZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:20:45.537

你的小提琴没有工作，因为你没有 jquery。我更新了它并删除了退货。

[http://jsfiddle.net/Z5hqZ/5/](http://jsfiddle.net/Z5hqZ/5/)

```
$(function() {
  $("#post1-new-comment-button").click(function() {
    $("#post1-new-comment").val("").toggle();
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:10:47.993

试试这个：

```
$(function() {
    $("#post1-new-comment-button").click(function() {
        $("#post1-new-comment").val("").toggle();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:11:59.760

请记住`jQuery`在您想要使用它时包含它，因为它不在您的小提琴上，而且您的 html 也是错误的，在您拥有的小提琴上：

```
<button id="post1-new-comment-button" type="button"> 
```

它应该是：

```
<button id="post1-new-comment-button"></button> 
```

否则，输入将在按钮内。在您的示例中，您没有关闭`<button>`标签，也无需添加`type="button"`，也不需要`return`在 JavaScript 上...

更新的工作示例：http: [//jsfiddle.net/darkajax/VKGdv/](http://jsfiddle.net/darkajax/VKGdv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:15:24.800

对于隐藏/取消隐藏-

```
$(function() {
    $("#post1-new-comment-button").click(function() {
        $("#post1-new-comment").toggle();
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T16:15:31.907

试试这个。并且不要忘记将 jsfiddle 的库设置为 jQuery，并在准备好的 DOM 上执行脚本

```
$(function() {
$("#post1-new-comment-button").click(function() {
    $("#post1-new-comment").toggle();
}); 
```

});

这是工作链接：http: [//jsfiddle.net/Z5hqZ/2/](http://jsfiddle.net/Z5hqZ/2/)

并且不要忘记按钮的结束标签

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T16:16:02.950

实际上所有以上/以下：

1.  你需要包括 jQuery
2.  你的按钮需要一个结束标签（最好是一些文本显示在中间的按钮上）
3.  仅使用以下内容：

    ```
    $(document).ready(function(){
      $("#post1-new-comment-button").click(function() {
        $("#post1-new-comment").toggle();
      });
    }); 
    ```

# arrays - MATLAB - 将数字字符数组转换为数字整数数组/矩阵？

> ID：15390519
> 
> 赞同：2
> 
> 时间：2013-03-13T16:08:31.013
> 
> 标签：arrays, matlab, char

**我的问题**：我有一个 char 类型的数组**A**，如下所示：

```
196800271010
902589451069
052068830384
901778191098 
```

我想把 A 变成一个数字矩阵，将字符分成单独的数字整数，就像这样

```
[1 9 6 8 0 0 2 7 1 0 1 0
 9 0 2 5 8 9 4 5 1 0 6 9
 0 5 2 0 6 8 8 3 0 3 8 4
 9 0 1 7 7 8 1 9 1 0 9 8] 
```

最好的方法是什么？ **我试过** str2num(A)，但将字符视为每行一个整数（即第一行是 1.9680）我也试过这个 for 循环

```
for i = 1:5 %the number of rows in the char array
    s = num2str(A(i,:));
    for t = length(s):-1:1
        result(t) = str2num(s(t));
    end
end 
```

但这只是返回数组的最后一行，我想拥有所有这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:13:18.397

如果将矩阵转换为列向量，每个字符将位于不同的行中，因此可以由`str2num`. 然后`reshape`回来：

```
result = reshape(str2num(A(:)), size(A)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:12:34.037

我不知道你为什么要转换两次。只需遍历两个索引并转换每个字符并将其放入新矩阵中。

```
for i = 1:size(A,1)
    for t = 1:size(A,2)
        result(i,t) = str2num(A(i,t));
    end
end 
```

PS：`result`在循环之前进行预分配会提高速度：

```
result = zeros(size(A)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T03:42:40.563

Eitan T 的回答可能是最好的。它更干净，可能更快。但是有一些相关的索引问题需要指出。

如果您知道输入字符都是数字，则可以使用 Unicode 字符值的技巧，利用字符 '0' 到 '9' 是连续的这一事实。

```
result = double(A) - double('0'); 
```

您的原始代码*几乎*可以正常工作，只是您没有使用`i`索引来索引结果，因此您每次通过该外部循环都重写一行。使用两个索引，结果将得到正确的形状。

```
for i = 1:5 %the number of rows in the char array
    s = num2str(A(i,:));
    for t = length(s):-1:1
        result(i,t) = str2num(s(t));
    end
end 
```

那会给你你想要的输出。但是有一些问题会在以后出现。调用是多余的`num2str()`，因为数据已经是 char；你可以删除它。您可以只使用`A(i,t)`而不是`s`. 并且`str2double`通常比幕后调用更快、`str2num`更安全`str2num`。`eval`

但是您也可以在一个循环中遍历多维数组的每个元素。这是一种更通用的方法。当您使用单个索引时，Matlab 会线性索引到数组中，而不管其维度如何。

```
result = NaN(size(s));
for i = 1:numel(s)
    result(i) = str2double(s(i));
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:46:04.997

矩阵**result1**是您想要的。

![在此处输入图像描述](../Images/19cba0206909276c2a71da467981fb21.png)

# sql - SQL - 多个选择语句，一列，一个查询

> ID：15390520
> 
> 赞同：0
> 
> 时间：2013-03-13T16:08:31.250
> 
> 标签：sql, select, join

我有一个名为 person 的表，它有一个名为 person_id 的主键。person 表包含有关患者和医生的信息（姓名首字母、姓氏等）。我还有另一个名为约会的表，其中包含医生 ID、患者 ID 和有关约会的信息。Doctor_id 和 Patient_id 链接到 person 表中的 person_id。

我需要进行一个查询，该查询将返回医生的姓名（使用带有首字母和姓氏的 concat）和患者的姓名。

我试过使用嵌套的选择语句，但没有得到任何地方..

任何信息都会很棒！

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:14:12.010

在 SQL Server 中，连接是通过使用`+`运算符完成的。所以连接运算符取决于您使用的 RDBMS。（*在`MYSQL`，使用`CONCAT`运算符*）

基本上，您需要在 table`person`上连接 table 两次，`appointment`因为有两列依赖于 table `person`。

```
SELECT  a.*
        doc.firstName + ' ' + doc.lastName as DoctorName,
        pat.firstName + ' ' + pat.lastName as PatientName
FROM    appointment a
        INNER JOIN person doc
            ON a.person_ID = doc.doctor_ID
        INNER JOIN person pat
            ON a.person_ID = pat.patient_ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:14:23.623

```
SELECT d.initials + ' ' + d.last_name AS 'doctor name', p. initials + ' ' + p.last_name AS 'patient name'
FROM Person p
INNER JOIN appointment a
ON p.person_id = a.patient_id
INNER JOIN Person d
ON d.person_id = a.doctor_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:15:15.610

从这里开始：

```
select 
  patient.person_id, 
  doctor.person_id
from person as patient
left join appointment 
    on appointment.patient_id = patient.person_id
left join person as doctor 
    on doctor.person_id = appointment.doctor_id 
   and doctor.person_id = patient.doctor_id 
```

# ember.js - 在 Ember.js 对象路由中无法访问动态段

> ID：15390536
> 
> 赞同：0
> 
> 时间：2013-03-13T16:09:10.603
> 
> 标签：ember.js

从路由访问动态段时，我遇到了一些奇怪的行为。

我有一个关键字模型。在显示关键字集合时，我想要读取的路径`/keywords`。访问单个关键字时，我希望读取路径`/keyword/:KEYWORD_ID`。按照惯例，Ember 希望您执行以下操作……</p>

```
this.resource('keywords', { path: '/keywords' }, function() {

    this.route('new', { path: '/new' });
    this.resource('keyword', { path: '/keyword/:keyword_id' }, function() {

        this.route('edit');

    });

}); 
```

为了实现上述行为，我正在执行以下操作...

```
this.resource('keywords', { path: '/keywords' }, function() {

    this.route('new', { path: '/new' });

});

this.resource('keyword', { path: '/keyword/:keyword_id' }, function() {

    this.route('edit');

}); 
```

但是，当使用第二种方法时，KeywordIndex 的路由（即单个关键字对象），`params`对象为空，屏幕上的内容为空白。

```
App.KeywordIndexRoute = Ember.Route.extend({

    model: function(params) {

            return App.Keyword.find(params.keyword_id);

    },

    renderTemplate: function(controller, model) {

        this.render({outlet: 'page'});

    }

}); 
```

有没有人遇到过这个问题？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:41:55.577

问题解决了。问题出在我们针对这个特定对象的 API 中。对于那些考虑这种路由模式的人来说，最好的方法如下......

```
this.resource('keywords', { path: '/keywords' }, function() {

    this.route('new', { path: '/new' });

});

this.resource('keyword', { path: '/keyword/:keyword_id' }, function() {

    this.route('edit');

}); 
```

然后，您将像这样访问控制器中的模型...

```
App.KeywordIndexRoute = Ember.Route.extend({

    model: function(params) {

        return this.modelFor("keyword");

    },

    renderTemplate: function(controller, model) {

        this.render({outlet: 'page'});

    }

}); 
```

# java - 从 Web 应用程序向移动设备（即 Android、Apple iPhone）推送通知的框架

> ID：15390542
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:09:33.547
> 
> 标签：java, android, web-applications, cloud

我被要求编写一个 Web 应用程序，该应用程序能够向使用移动设备的订阅用户推送通知（除其他事项外）。

我有一些计划在 Java 上编写自己的实现。但在我这样做之前，有没有人知道一个很好的基于 Java 的框架来完成这项工作，而无需从头开始编写代码。

主要目的是从 Web 应用程序开始向 Android 设备推送通知。

所有的想法都受到赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:12:26.440

你可以在这里找到你想要的一切：[谷歌云消息](http://developer.android.com/google/gcm/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:30:25.543

就完全开箱即用的解决方案而言，没有可用的解决方案（据我所知）。但是，Google Cloud Messaging ( [http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html) ) 与您将获得的开箱即用解决方案差不多。

客户端实现相当简单，您几乎可以从开发人员那里复制和粘贴示例代码。根据经验，服务器端实现是花费大部分时间的地方；但是，我在它的起步阶段就使用它，所以很可能有一个即插即用的 3rd 方库可用于您正在使用的任何 Web 框架，因为它已经过一段时间了。

# c# - ASP.net 菜单控件在鼠标单击时展开

> ID：15390543
> 
> 赞同：0
> 
> 时间：2013-03-13T16:09:36.957
> 
> 标签：c#, javascript, asp.net, menu

我有一个 ASP.NET 菜单控件，我遇到了一些以前从未被问过的问题。我希望有人可能知道。一些在线搜索对此并没有太多帮助，所以我想在这里向社区寻求帮助。

ASP.NET 菜单控件可以是代码，以便在多层菜单上，它只会在鼠标单击时展开，而不是在悬停时展开？

对我来说，这听起来像是 javascript 的工作，但我想在进一步解决这个问题之前征求意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:18:32.453

最终在我原来的问题的评论中遵循了建议。我没有看到将评论标记为答案的方法，所以我在这里回答。

Siz S 的建议是合理的（虽然我用 Bing 代替了谷歌搜索，哈哈）我选择 SuperFish 作为我的菜单并将我的 xml 数据转换为无序列表。到目前为止，这工作得很好，并且让用户得到了他们正在寻找的东西。此外，它似乎比 ASP.NET 菜单控件更快

# hibernate - 需要休眠事务回滚还是足够接近？

> ID：15390546
> 
> 赞同：0
> 
> 时间：2013-03-13T16:09:51.913
> 
> 标签：hibernate

考虑 Hibernate 中的以下（简化）场景：

```
Session session=sessionFactory.openSession();
Transaction tx=session.beginTransaction();
try {
    //Do something with session
    if (...) {
        return something;
    }
    tx.commit();
}
finally {
    session.close();
} 
```

在没有显式回滚的情况下返回是否是一种安全的做法，即在代码片段中调用没有显式回滚的 session.close() 语句是否会导致最终回滚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:20:29.490

Not knowing how complex your real code may be, nevertheless, it is not best practice to not rollback in catch/finally. Here's how my current code looks like :

```
try{ .....

transaction = session.beginTransaction();  .....
// Finally commit the changes...
        transaction.commit();
}catch (Exception ex) {
        LOG.error(blah);
        transaction.rollback();
        throw new STDException("An error occured ",
                ex);
    } finally {
        session.close();
    } 
```

# html - 只有导航栏上的文本链接

> ID：15390549
> 
> 赞同：0
> 
> 时间：2013-03-13T16:09:57.590
> 
> 标签：html, css

我看过其他类似的问题，但我无法将其应用于我的问题。我希望每个文本链接周围的框都是可点击的，而不仅仅是文本。

HTML

```
<div class="container">
    <ul class="nav">
        <li class="nav-home">
            <a href="index.html">Home</a>
        </li>
        <li class="nav-games"> 
            <a href="games.html">Games</a>
        </li>
        <li class="nav-chat">
            <a href="chat.html">Chat</a>
        </li>
        <li class="nav-suggestions">
            <a href="suggestions.html">Suggestions</a>
        </li>
    </ul>
</div> 
```

CSS

```
.nav {
width: 900;
clear: right;
height: 55px;
margin-left: 22px;
margin-right: 22px;
padding: 0;
z-index: 5;
overflow: visible;
background: #161616; 
background: -moz-linear-gradient(top,  #161616 0%, #282828 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#161616), color-stop(100%,#282828)); 
background: -webkit-linear-gradient(top,  #161616 0%,#282828 100%);
background: -o-linear-gradient(top,  #161616 0%,#282828 100%);
background: -ms-linear-gradient(top,  #161616 0%,#282828 100%); 
background: linear-gradient(to bottom,  #161616 0%,#282828 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#161616', endColorstr='#282828',GradientType=0 );
border: 1px solid #090909;
box-shadow: inset 0px 0px 1px rgba(255,255,255,.2), 0px 3px 5px rgba(0,0,0,.5);
}

.nav li {
list-style-type: none;
float: left;
display: inline-block;
padding: 0px 89px;
width: 55;
text-align: center;
height: 55px;
border-right: 1px solid #090909;
box-shadow: 1px 0px 0px rgba(255,255,255,.1);
-webkit-transition:all 0.2s linear; 
-moz-transition:all 0.2inear; 
-o-transition:all 1s linear; 
transition:all 0.2s linear; 
}

.nav li.logo:hover { opacity: 1; background-color: transparent;}

.nav li:last-child { border: none; box-shadow: none; } 
```

我`display: block;`在此处添加了可点击文本的上方和下方，但不能向左或向右。

```
.nav li a, nav ul li a:visited {
line-height: 55px;
text-decoration: none;
display: block;
color: #9c9c9c;
font-size: 15px;
font-family: "Droid Sans", Arial, sans-serif;
text-transform: uppercase;
text-shadow: 0px 1px 0px rgba(0,0,0,.9);
-webkit-transition:all 0.2s linear; 
-moz-transition:all 0.2s linear; 
-o-transition:all 0.2s linear; 
transition:all 0.2s linear;     
}

.nav li:hover { 
background-color: rgba(0,0,0,.2); 
background-color: #191919\9; 
-webkit-transition:all 0.2s linear; 
-moz-transition:all 0.2s linear; 
-o-transition:all 0.2s linear; 
transition:all 0.2s linear;
color: white;
}
.nav li:hover a { color: white; 
-webkit-transition:all 0.2s linear; 
-moz-transition:all 0.2s linear; 
-o-transition:all 0.2s linear; 
transition:all 0.2s linear;
}

#nav-home .nav li.nav-home a, #nav-games .nav li.nav-games a, #nav-chat .nav li.nav-chat a, 
#nav-comments .nav li.nav-comments a  { color: white; } 
```

这是 jsfiddle [http://jsfiddle.net/U2d9X/3/](http://jsfiddle.net/U2d9X/3/)的视觉效果。如果您能提供帮助，将不胜感激。如果需要更多信息或澄清，请询问而不是拒绝这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:13:08.547

1）从你的 LI 元素中删除左/右填充。

2) 调整 LI 元素的宽度。

3) `a { width: 100% !important; height: 100% !important; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:12:56.073

将`<li>`标签放在标签内`<a>`。例如：

```
<a href="index.html">
    <li class="nav-home">
        Home
    </li>
</a> 
```

然后，在 CSS 中，更改`.nav li a, nav ul li a:visited`为`.nav a, nav ul a:visited`, 因为`<a>`不再在`<li>`.

在 jsFiddle 上，我只对“主页”选项卡进行了 HTML 更改，以便您可以将其与其他标签进行比较。

[修改后的代码](http://jsfiddle.net/U2d9X/3/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T16:15:06.650

如果所有按钮的尺寸相同，则始终可以为链接元素本身分配大小，例如：

一种 {

宽度：100%；高度：100%；

}

只需调整它，直到事情很好地匹配。

# c# - 使用 OData 是不是一个好主意？

> ID：15390551
> 
> 赞同：9
> 
> 时间：2013-03-13T16:10:00.250
> 
> 标签：c#, asp.net, asp.net-web-api, odata

提前了解“仅仅因为提供了一项功能并不能使它成为一个好主意”的警告......

从外观上看，[**符合 OData 的签名要求您返回 IQueryable**](https://stackoverflow.com/questions/15295153/using-the-odata-queryable-with-a-repository)。

**例如：**

```
[Queryable]
public IQueryable<MyModel> Get()
{
    return _repo.GetAll().AsQueryable();
} 
```

但是，最近和最近的许多文章将 IQueryable 描述为：

*   [**泄漏**](http://www.infoq.com/news/2012/03/IQueryable-api)
*   ' [**Causing Heavy Lifting**](http://www.weirdlover.com/2010/05/11/iqueryable-can-kill-your-dog-steal-your-wife-kill-your-will-to-live-etc/) ' 示例：允许用户抓取整张桌子
*   存在安全和扩展问题，因为它[**允许对**](http://www.codethinked.com/Keep-Your-IQueryable-In-Check)查询本身进行大量修改
*   也可能导致延迟执行的问题（因为它的可查询性质）

**我的问题是**：
您是否觉得 IQueryable 和 OData 的功能超过了上述问题？

在回答时，我希望人们谈论：

*   为什么或者为什么不？
*   我应该什么时候使用它？
*   您只在某些 WebAPI 调用中使用...还是用于所有 WebAPI 调用？
*   那些不是 IEnumarable 对象的个别模型呢？

...像这样的东西。

**背景**：我问的不仅仅是因为上面列出的项目。还因为 OData 作为“行业标准”而不是您工具箱中的工具出售给我们。因此，实现这一点将从根本上改变我们的 WebAPI 调用（我目前工作的地方）的返回。我们必须从我们自己的 IResult 返回签名（这非常有用）转到似乎有问题的 IQueryable（但最终也可能有用）。

结果示例：
至少，我们的返回签名会发生巨大变化。而且，我被告知通过将“C Instance”更改为“IQueryable Instance”（这是有道理的）来实现 OData 的 WebAPI 调用不会起作用。

```
public interface IResult<C>
{
    [JsonProperty(PropertyName = "hasErrors")]
    bool HasErrors { get; }

    [JsonProperty(PropertyName = "errors")]
    IList<String> Errors { get; }

    [JsonProperty(PropertyName = "instance")]
    C Instance { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:47:55.837

使用 Web API 支持 OData 查询不需要您拥有`IQueryable<T>`. 拥有一个`IQueryable<T>`可以让你用更少的代码更快地到达那里。`IQueryable<T>`具有将传入的 OData 查询转换为 LINQ 查询所需的抽象。该框架已经定义了它，并且它在各种后端都有丰富的支持，例如 Entityframework、NHibernate、Linq2Objects、RavenDB、Linq2OData 等。因此，我们决定对`IQueryable<T>`Web API 提供丰富的支持。同意，`IQueryable<T>`是一个巨大的接口，并且比 OData 查询所需要的要多得多。但这是免费的:)。

也就是说，我们`ODataQueryOptions<T>`对非 IQueryable 案例有很好的支持。[在这里](http://blogs.msdn.com/b/webdev/archive/2013/02/25/translating-odata-queries-to-hql.aspx)查看我的博客文章

此外，您将 OData 查询语义与 OData 混淆了。丰富的查询支持只是 OData 的一部分。OData 建立在 HTTP 之上，并具有各种有用的功能，例如

*   REST 和 HTTP 最佳实践的深思熟虑的应用程序。
*   在 json 和 xml 中明确表示您的资源。
*   $元数据。
*   描述关系的标准方式。
*   支持投影、过滤、客户端驱动分页和服务器驱动分页（下一页链接）的丰富查询。
*   大[生态系统](http://www.odata.org/ecosystem)。

# sql - 调试计算两个日期之间的总时间减去周末的函数

> ID：15390552
> 
> 赞同：0
> 
> 时间：2013-03-13T16:10:00.777
> 
> 标签：sql, tsql, time

下面的函数计算两个日期之间的总时间减去周末，当两个日期相差超过一天时它工作正常，但在一天之内结果是负面的，我不太明白，任何人都可以解决它？

```
ALTER FUNCTION [dbo].[Gettotalhours]
(
    @startdate datetime2,@enddate datetime2 
)
RETURNS bigint
AS
BEGIN

declare @dateweekends int
declare @totaltime bigint

Set @Dateweekends = 
  (DATEDIFF(wk, @StartDate, @EndDate) * 2)
   +(CASE WHEN DATENAME(dw, @StartDate) = 'Sunday'   THEN 1 ELSE 0 END)
   +(CASE WHEN DATENAME(dw, @EndDate)   = 'Saturday' THEN 1 ELSE 0 END)

set @totaltime= DATEDIFF(second,@StartDate,@EndDate)-@dateweekends*24*60*60

return @totaltime

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:16:46.770

我稍微改变了我的功能，它对我有用，你们可以看看，如果它现在正确吗？

ALTER FUNCTION [dbo].[Gettotalhours] (@startdate datetime2,@enddate datetime2) 返回 bigint 作为开始

声明@dateweekends int 声明@totaltime bigint

if DATENAME(dw, @StartDate) in ('Sunday','Saturday') set @dateweekends=0 else Set @Dateweekends = (DATEDIFF(wk, @StartDate, @EndDate) * 2) +(CASE WHEN DATENAME(dw, @StartDate) = 'Sunday' THEN 1 ELSE 0 END) +(CASE WHEN DATENAME(dw, @EndDate) = 'Saturday' THEN 1 ELSE 0 END)

设置@totaltime= DATEDIFF(秒,@StartDate,@EndDate)-@dateweekends*24*60*60

返回@totaltime

结尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:54:04.473

**SELECT dbo.Gettotalhours('2012-01-01 22:09:45.000','2012-01-01 22:09:50.000')**在你的情况下不起作用，因为**2012-01-01** - Sunday 所以你不需要如果两个参数都出现一天，则完全计算@Dateweekends：

```
CREATE FUNCTION [dbo].[Gettotalhours]
(
    @startdate datetime2,@enddate datetime2 
)
RETURNS bigint
AS
BEGIN

declare @dateweekends int
declare @totaltime bigint

Set @Dateweekends = 
  (DATEDIFF(wk, @StartDate, @EndDate) * 2)
   +(CASE WHEN DATEDIFF(day, @StartDate, @EndDate) > 1 AND DATENAME(dw, @StartDate) = 'Sunday'   THEN 1 ELSE 0 END)
   +(CASE WHEN DATEDIFF(day, @StartDate, @EndDate) > 1 AND DATENAME(dw, @EndDate)   = 'Saturday' THEN 1 ELSE 0 END)

set @totaltime= DATEDIFF(second,@StartDate,@EndDate)-@dateweekends*24*60*60

return @totaltime

END

GO 
```

[SQL小提琴](http://sqlfiddle.com/#!6/1b148/1/0)

您可以使用如下测试用例集调试您的函数：

```
WITH t AS (
    SELECT 2 [sec] UNION ALL
    SELECT 20 UNION ALL
    SELECT 200 UNION ALL
    SELECT 2000 UNION ALL
    SELECT 20000 UNION ALL
    SELECT 200000),

[source] AS (
    SELECT DATEADD(second, -t.[sec], GETDATE()) [from], GETDATE() [to]
    FROM t)

SELECT *, [dbo].[Gettotalhours]([from], [to]) [result] from [source] 
```

# javascript - 如何在该div的子元素的焦点之外隐藏一个div（在java脚本中）

> ID：15390554
> 
> 赞同：0
> 
> 时间：2013-03-13T16:10:03.550
> 
> 标签：javascript

我想在其子元素的focusout上隐藏一个div。说，

让用户名和密码字段在 div 中，最初将被最小化，用户将单击打开 div，然后如果用户单击 div 外的任何位置应关闭`mydiv`

```
<body>

<div id="mydiv" onblur="alert('hi');" tabindex="1" style="border: 1px solid black;">click off me to activate onblur
    <br/>
    username: <input type="text" name="username" onblur="alert('hi');" tabindex="1" />
    <br/>
   Password: <input type="text" name="password" />

    </div>
</body> 
```

（见 JS 小提琴：http: [//jsfiddle.net/vC7Rb/1/](http://jsfiddle.net/vC7Rb/1/)）

我尝试为 div 和 text 字段设置 onblur 但这需要公共函数调用，我需要从中检查是否有任何元素仍然具有焦点，然后只隐藏 div.thats 似乎太多了，所以有什么简单的方法来做到这一点。

我想用纯 javascript 代码实现它，它应该在所有浏览器（IE、firefox、chrome）中兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:45:47.927

通常，您会询问如何检测元素外的点击。[这个问题在这里](https://stackoverflow.com/questions/152975/how-to-detect-a-click-outside-an-element)被问到并得到很好的回答。此外，这里是一个[小提琴](http://jsfiddle.net/7Rvd4/)，展示了如何使用您的用例很好地处理隐藏和重新显示。我真正添加的唯一一件事是显示您用于重新显示用户名/密码 div 的任何按钮/方法都需要使用相同类型的 event.stopPropagation() 以避免重新隐藏您要显示的内容。

HTML：

```
<button onclick="document.getElementById('loginContainer').style.display='block';event.stopPropagation();">Show Login</button>
<div id="loginContainer" onclick="containerClicked(event)" style="border:1px solid black">
    <div><span>User Name:</span><input id="username" /></div>
    <div><span>Password:</span><input id="password" type="password"/></div>
</div>
<div style="border:1px solid red">Some other div on document</div> 
```

JS：

```
document.onclick = function(){
    console.warn('doc clicked');
    document.getElementById('loginContainer').style.display = 'none';
}
function containerClicked(ev)
{
    console.warn('clicked');
    ev.stopPropagation();
} 
```

# php - 花式框变量

> ID：15390555
> 
> 赞同：0
> 
> 时间：2013-03-13T16:10:04.857
> 
> 标签：php, jquery, forms, variables, fancybox

好的，所以我有一个关于传递变量的问题。我想要做的是将一些变量从表单传递到一个正在加载确认表单数据等的 php 页面的fancybox。

```
<form action="bvd-email-opt-in.php" method="post">
<div style="width:125px; float:left;">
    <label style="font-size:12px" for="first_name">First Name:</label>
    <input style="width:110px" name="first_name" id="first_name" required="required" type="text">
</div>
<div style="width:125px; float:right;">
    <label style="font-size:12px" for="last_name">Last Name:</label>
    <input style="width:110px" name="last_name" id="last_name" required="required" type="text">
</div>
<div class="cle"></div>
<div id="email-container" style="width:180px; height:20px; float:left">
    <label style="font-size:12px; line-height:13px;" for="email">Email Address:</label>
    <br />
    <input style="width:175px;" name="email" id="email" required="required" type="text">
</div>
<div id="form-submit" style="float:right; padding-top:18px;">
    <input name="submit" type="button" value="Go" style="float:right;margin-right:12px" id="go" />
</div>
<div class="cle"></div> 
```

这是当前设置功能的方式：

```
$("#go").bind("click", function () {

  $.fancybox({

    'content': '<div id="commentForm"><h1>Join Our Email List</h1><iframe src="bvd-email-opt-in.php" width="500" frameborder="0" height="480"></iframe></div>'

  });

}); 
```

现在我知道它现在的加载方式，数据没有被传递给表单。我不知道最好的方法是什么。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:46:29.417

您可以在 click 函数中获取所需的值，并将它们作为 GET 请求传递。例如 ：

```
$("#go").bind("click", function () {
   var mail = $('#email').value();
$.fancybox({

'content': '<div id="commentForm"><h1>Join Our Email List</h1><iframe src="bvd-email-opt-in.php?mail='+mail+'" width="500" frameborder="0" height="480"></iframe></div>'

 });

}); 
```

# sql - RoR Active Record 中的复杂查询，包括 WHERE IN 和 AVG()

> ID：15390557
> 
> 赞同：0
> 
> 时间：2013-03-13T16:10:07.987
> 
> 标签：sql, ruby-on-rails, activerecord

我是 RoR 的新手，在编写我的 sql 查询时遇到了很多问题。我尝试在没有（或只有几个）sql 的情况下完成它们。

这是我要编写的查询。

```
select AVG(results.value)as 'avg', form_rows.id, form_rows.domtype 
from form_rows
join results on results.form_row_id = form_rows.id 
where form_rows.form_id = '9' and form_rows.domtype IN ('numfield', 'percentagefield')
group by results.form_row_id 
```

请注意，在第一个 where 条件 (form_rows.form_id = '9') 中，该值作为参数发送。

如果有人可以帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:16:02.610

我假设你有一个 FormRow 和结果模型

```
FormRow.joins(:results).where(:form_id => params[:form_id])
.where("form_rows.domtype IN(?)", ['numfield', 'percentagefield'])
.group("results.form_row_id")
.select("AVG(results.value) as 'avg', form_rows.id, form_rows.domtype") 
```

我没有测试它，但应该是它

顺便说一句：如果您在选择中使用它，也应该按 form_rows.domtype 分组。

# mysql - 用链接表中的值替换外键

> ID：15390558
> 
> 赞同：0
> 
> 时间：2013-03-13T16:10:08.980
> 
> 标签：mysql, foreign-keys

我有以下表格。

```
Table-A

id int(11)
table_b_id int(11)// foreign key to table_b
name varchar

Table-B

id int(11)
name varchar 
```

现在我重新设计了 db 架构，以便将`table_b_id`字段类型更改为`varchar`. 如何将`table_b_id`' 值替换为`name`on 上的相应值`Table-B`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:19:38.737

尝试以下

```
UPDATE TableA
    SET table_b_id =(
       SELECT name FROM TableB
       WHERE id = TableA.table_b_id
    ) 
```

# android - Android Fragments：如何循环通过片段控件

> ID：15390560
> 
> 赞同：1
> 
> 时间：2013-03-13T16:10:14.010
> 
> 标签：android, android-fragments, focus, android-spinner, children

如何使我的 Fragment 中的所有 Spinner 都可聚焦？

在我的布局的 XML 中设置`android:focusableInTouchMode`和`android:focusable`没有效果。

更一般地说，我在遍历 Fragment 的控件并查找特定类型的所有控件（例如所有 Spinners 或所有 EditTexts）时遇到了麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:10:14.010

这对我来说非常棘手，所以我想我会在这里发布我的解决方案。这解决了一个特定问题（如何使微调器可聚焦），但也解决了一个更普遍的问题（如何循环通过片段中的控件。

```
public class MyFragment extends Fragment {

    private static ArrayList<Spinner> spinners = new ArrayList<Spinner>();

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        // inflate the layout
        View layout = inflater.inflate(R.layout.my_fragment_xml, container, false);

        // cast our newly inflated layout to a ViewGroup so we can 
        // enable looping through its children
        set_spinners((ViewGroup)layout);

        // now we can make them focusable
        make_spinners_focusable();

        return layout;
    }

    //find all spinners and add them to our static array

    private void set_spinners(ViewGroup container) {
        int count = container.getChildCount();
        for (int i = 0; i < count; i++) {
            View v = container.getChildAt(i);
            if (v instanceof Spinner) {
                spinners.add((Spinner) v);
            } else if (v instanceof ViewGroup) {
                //recurse through children
                set_spinners((ViewGroup) v);
            }
        }
    }

    //make all spinners in this fragment focusable
    //we are forced to do this in code

    private void make_spinners_focusable() {            
        for (Spinner s : spinners) {
            s.setFocusable(true);
            s.setFocusableInTouchMode(true);
            s.setOnFocusChangeListener(new View.OnFocusChangeListener() {
                @Override
                public void onFocusChange(View v, boolean hasFocus) {
                    if (hasFocus) {
                        v.performClick();
                    }
                }
            });
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-26T16:42:13.460

如果活动中有嵌套布局，则选择的答案`set_spinners()`不起作用。`getChildCount()`只给第一级的孩子。最好`getAllChildrenBFS`从这个[答案](https://stackoverflow.com/a/18669307/3510400)中使用：

```
private List<View> getAllChildrenBFS(View v) {
    List<View> visited = new ArrayList<View>();
    List<View> unvisited = new ArrayList<View>();
    unvisited.add(v);

    while (!unvisited.isEmpty()) {
        View child = unvisited.remove(0);
        visited.add(child);
        if (!(child instanceof ViewGroup)) continue;
        ViewGroup group = (ViewGroup) child;
        final int childCount = group.getChildCount();
        for (int i=0; i<childCount; i++) unvisited.add(group.getChildAt(i));
    }

    return visited;
} 
```

# php - Pretty Links 中的撇号和冒号

> ID：15390562
> 
> 赞同：1
> 
> 时间：2013-03-13T16:10:16.873
> 
> 标签：php, mysql, apache, .htaccess, mod-rewrite

我正在寻求解决处理列出书籍标题的“漂亮链接”或“永久链接”的问题，例如：

```
http://www.example.com/title/The-Catcher-in-the-Rye/ 
```

当我处理具有简单单词或空格的常规书名时，没有问题，因为我可以简单地用破折号替换空格并`-`通过执行 reverse 来处理在数据库中查找书名`str_replace`。

但是，当我的书名中包含撇号`'`或冒号`:`或两者都有时，就会出现问题，如本例所示：

```
Why Can't I Be You: A Novel 
```

在我的sql数据库中，所有的单引号都被转义了，这样数据库中的条目如下：

```
+-----+-------------------------------+
| BID | book_title                    |
+-----+-------------------------------+
|   1 | Why Can\'t I Be You: A Novel  |
+-----+-------------------------------+ 
```

当我列出所有书名时，我再次取消转义字符串，因此它简单地列出为： `Why Can't I Be You: A Novel`

我的`<a>`链接显示了未转义的标题，通过用破折号替换空格并省略撇号和冒号创建了漂亮的链接，如下所示：

```
<a href="http://www.example.com/title/why-cant-i-be-you-a-novel" title="Why Can't I Be You: A Novel">Why Can't I Be You: A Novel</a> 
```

所以，解决我的问题。我希望能够列出格式化（未转义）的书籍的所有标题，并让带有连字符的“永久链接”/“漂亮链接”工作并将正确的标题返回给 GET 方法。

在我的`.htaccess`条目中，我有以下内容`RewriteRule`：

```
RewriteRule ^title/(.*[^/])/?$ viewbook.php?booktitle=$1 [NC,L] 
```

这样做是获取随后的“漂亮”链接部分`title/`并通过 GET 将其发送到`viewbook.php`. 例如，对于《麦田里的守望者》一书，以下内容是通过 GET 发送的：`The-Catcher-in-the-Rye`

那里没问题，因为在 php 中解决这个问题很简单：

```
$booktitle = $_GET['booktitle'];
$goodBookTitle = str_replace('-', ' ', $booktitle);

// or we can do it all at once

$booktitle = str_replace('-', ' ', $_GET['booktitle']);

// Send $booktitle to SQL query and find the book 
```

当没有找到撇号时，这很好用，但是，如果标题有撇号或冒号，则此方法无济于事，因为它不会在数据库中找到。我也不想使用`WHERE book_title LIKE '%$booktitle%'`因为`viewbook.php`必须完全匹配。

我正在寻找一个优雅或简单的解决方案，这将使我能够通过 a 解决这个问题，`RewriteRule`而不必为 say `slug`or向数据库添加额外的表`permalink`，并且我不想在 url 中使用撇号，例如 %27 用于单引用。这是一个大型数据库，数据输入在电子表格中完成，导出为 CSV 并上传到 SQL 数据库。单个条目没有前端以允许诸如`slug`或等效之类的事情。

我希望我的解释清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T19:53:55.887

首先，在数据库中存储转义字符串的想法看起来很奇怪。MySQL 能够存储任意字符串，甚至可以安全地存储二进制序列。

现在关于从真实标题到漂亮 URL 的映射以及返回。将标题转换为 URL 友好字符串然后返回的想法不是解决问题的常用方法，因为很难使这种转换可逆。解决此问题的通常方法是在数据库中将包含书名的单独列修改为对 URL 友好。此列中的值也应该是唯一的。该表可能如下所示：

```
+-----+-----------------------------+----------------------------+
| BID | book_title                  | book_title_url             |
+-----+-----------------------------+----------------------------+
|   1 | Why Can't I Be You: A Novel | why-can-t-i-be-you-a-novel |
+-----+-----------------------------+----------------------------+ 
```

您应该按此列索引您的表并使用它而不是在脚本`book_title`中的 SQL 查询中使用它，如下所示：`viewbook.php`

```
SELECT * FROM books WHERE book_title_url='$booktitle' 
```

其中包含通过接收并正确转义以防止 SQL 注入的`$booktitle`书名。`$_GET['booktitle']`

所以你漂亮的 URL 看起来像`http://www.example.com/title/why-can-t-i-be-you-a-novel`，它们会被 Apache 重写为`http://www.example.com/viewbook.php?booktitle=why-can-t-i-be-you-a-novel`.

同样，这是通常如何实现漂亮 URL 的常见方式。希望它也对你有用。

对于现有记录，您可以`book_title_url`通过以下方式填充列：

```
UPDATE books SET book_title_url=REPLACE(REPLACE(REPLACE(book_title, " ", "-"), ":", "-"), "'", "-"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:05:18.607

不要忘记通过 url 建立索引，否则它会运行缓慢，请转义来自请求的变量，除非你想要 SQL 注入:)

如果您可以选择在漂亮的 url 中嵌入整数 id，那么所有这些问题都可以克服，就像这样： http: [//www.whaaa.at/title/1/whatever-fancy-%34name%34-you-like](http://www.whaaa.at/title/1/whatever-fancy-%34name%34-you-like) 然后通过该 id 查找

无论如何，书名不是主键，因为可以有几本书具有相同的标题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T20:18:08.730

根据[STD 66](https://www.rfc-editor.org/rfc/rfc3986)，冒号和撇号在路径段中都是有效的：

```
段 = *pchar

pchar = unreserved / pct-encoded / sub-delims / ":" / "@"

子分隔符=“！” / "$" / "&" / "'" / "(" / ")"
           /“*”/“+”/“,”/“;” /“=”

```

因此，在这种情况下，您可以在未编码的 URI 中使用它们：

```
<a href="http://www.example.com/title/why-can't-i-be-you:-a-novel"
   title="Why Can't I Be You: A Novel">Why Can't I Be You: A Novel</a> 
```

这就是 Wikipedia 的做法：例如[http://en.wikipedia.org/wiki/Breakin'_2:_Electric_Boogaloo](http://en.wikipedia.org/wiki/Breakin%27_2:_Electric_Boogaloo)（可惜 StackOverflow 在创建超链接时正在对这些字符进行编码）。

真正*不能*使用的字符必须以某种方式编码（标准化方法是使用百分比编码，但如果由于某种原因您不能接受，您可以执行特定于应用程序的操作），或者省略（例如，通过查找辅助列，例如[@MikhailVladimirov 的回答](https://stackoverflow.com/a/15453981)中所述）。

# regex - 提取部分 URL

> ID：15390563
> 
> 赞同：0
> 
> 时间：2013-03-13T16:10:23.647
> 
> 标签：regex

基本上我希望提取一个 URL，直到它遇到一个可能存在也可能不存在的数字

例子：

```
http://www.test.com/products/cards/product_code/12345/something_else
http://www.test.com/products/cards/product_code2/ 
```

所需的输出 -

```
http://www.test.com/products/cards/product_code/
http://www.test.com/products/cards/product_code2/ 
```

附加信息 - 与此问题类似的语言不可知正则表达式 [Getting parts of a URL (Regex)](https://stackoverflow.com/questions/27745/getting-parts-of-a-url-regex)

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:12:32.007

**这可能不是正则表达式的工作，而是您选择的语言的现有工具。** 您使用什么语言？您可能不想使用正则表达式，而是使用已经编写、测试和调试过的现有模块。

如果您使用的是 PHP，则需要该[`parse_url`](http://php.net/manual/en/function.parse-url.php)功能。

如果您使用 Perl，则需要该[`URI`](http://search.cpan.org/dist/URI/)模块。

如果您使用的是 Ruby，请使用该[`URI`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:20:41.153

这是一个简单的正则表达式方法：

```
<?php

$url = "http://www.test.com/products/cards/product_code/1234";
$pattern = '/\/[0-9]/';

preg_match($pattern, $url, $matches);

if (count($matches) > 0) {
    echo substr($url, 0, strpos($url,$matches[0])+1);
} else {
    echo $url;
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:21:32.650

使用`sed`：

```
sed 's#\(http://.*/\)[0-9]\+.*#\1#' 
```

意思是 ：

*   捕获`http://`以（不包括）第一个遇到的数字开头的任何字符，前面有一个斜杠：`\(http://.*/\)[0-9]\+`
*   继续匹配任何字符直到行尾：`.*$`
*   将这些替换为之前捕获的内容：`\1`

我选择`#`作为`sed`分隔符而不是经典的，`/`因为否则你将不得不在你的正则表达式中转义这些字符。

# r - Rsqlite 需要数小时才能将表写入 sqlite 数据库

> ID：15390565
> 
> 赞同：1
> 
> 时间：2013-03-13T16:10:28.577
> 
> 标签：r, sqlite

我有这个简单的 R 程序，它从 sqlite 数据库中读取一个表（1000000 行，10 列）到一个 R data.table 中，然后我对数据进行一些操作并尝试将其写回同一个 sqlite 的新表中数据库。读取数据需要几秒钟，但将表写回 sqlite 数据库需要几个小时。我不知道到底有多长时间，因为它从未完成，我尝试过的最长的是8小时。

这是程序的简化版本：

```
 library(DBI)
  library(RSQLite)
  library(data.table)

  driver = dbDriver("SQLite")
  con = dbConnect(driver, dbname = "C:/Database/DB.db")

  DB <- data.table(dbGetQuery(con, "SELECT * from Table1"))  

  dbSendQuery(con, "DROP TABLE IF EXISTS Table2")
  dbWriteTable(con, "Table2", DB)
  dbDisconnect(con)
  dbUnloadDriver(driver) 
```

我使用 R 版本 2.15.2，包版本是：

data.table_1.8.6 RSQLite_0.11.2 DBI_0.2-5

我已经在多个系统和不同的 Windows 版本上进行了尝试，在所有情况下，将这个表写入 sqlite 数据库都需要花费大量时间。查看 sqlite 数据库的文件大小时，它以大约每分钟 50KB 的速度写入。

我的问题是有人知道是什么导致了这种缓慢的写入速度吗？

蒂姆有答案，但我不能这样标记它，因为它在评论中。

如： [在使用 dbWriteTable 将 R 数据表保存在 SQLite 数据库中时避免达到内存限制的想法](https://stackoverflow.com/questions/14246683/ideas-to-avoid-hitting-memory-limit-when-using-dbwritetable-to-save-an-r-data-ta) 我将数据分块写入数据库

```
 chunks <- 100

  starts.stops <- floor( seq( 1 , nrow( DB ) , length.out = chunks ) )

  system.time({
    for ( i in 2:( length( starts.stops ) )  ){

      if ( i == 2 ){
        rows.to.add <- ( starts.stops[ i - 1 ] ):( starts.stops[ i ] )
      } else {
        rows.to.add <- ( starts.stops[ i - 1 ] + 1 ):( starts.stops[ i ] )
      }

      dbWriteTable( con , 'Table2' , DB[ rows.to.add , ] , append = TRUE )
    }
  }) 
```

它需要：

```
 user  system elapsed 
   4.49    9.90  214.26 
```

是时候完成将数据写入数据库了。显然，我在不知不觉中达到了内存限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-22T07:09:42.510

对所有记录使用单个事务（提交）。添加一个

```
dbSendQuery(con, "BEGIN") 
```

在插入之前和一个

```
dbSendQuery(con, "END") 
```

去完成。快多了。

# javascript - javascript中的正则表达式解释

> ID：15390573
> 
> 赞同：0
> 
> 时间：2013-03-13T16:10:44.783
> 
> 标签：javascript, regex

有人可以解释这个正则表达式的作用吗？

```
document.cookie.match(/cookieInfo=([^;]*).*$/)[1] 
```

如果我能去掉我在 cookieInfo 值中看到的双引号，那就太好了。即当 cookieInfo="xyz+asd" - 我想用上面的正则表达式去掉双引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:19:09.950

它基本上说抓住尽可能多的不是分号的字符，并且在字符串'cookieInfo ='之后

试试这个来消除双引号：

```
document.cookie.match(/cookieInfo="([^;]*)".*$/)[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:17:15.340

正则表达式匹配以 'cookieInfo=' 开头的字符串，然后捕获 0 个或多个非半列字符，后跟 0 个或多个 'anythings'。

要去掉双引号，您可以使用正则表达式 /"/ 并将其替换为空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:28:18.683

它在 document.cookie 字符串中搜索`cookieInfo=`.
接下来它会抓取所有不存在的字符`;`（直到它碰到第一个分号）。
`[...]`包含在里面的所有字符的集合。
`[^...]`不匹配的所有字符的集合

然后它让 RegEx 搜索所有其他字符。
`.*`任何字符，0 次或多次。
`$`字符串结尾（或在某些特殊情况下，行尾）。

您可以替换`"`几种不同的方式，但我建议不要将其填充到正则表达式中，而是在事后对其进行替换：

```
var string = document.cookie.match(...)[1],
    cleaned_string = string.replace(/^"|"$/g, ""); 
```

第二个正则表达式说“查看字符串的开头，看看是否有 a `"`，或者查看字符串的结尾，看看是否有 a `"`。
通常，RegEx 会在它完成它找到的第一件事后停止。`g`在end 意味着继续寻找它可能在你给它的字符串中找到的每一个匹配。

我不会把它放在原始的 RegEx 中，因为使用可选引号可能很难看。
如果他们保证永远，永远在那里，那很好，但如果你假设他们是，并且你击中了一个没有他们的人，那么你就会得到一场`null`比赛。

# makefile - 如何将变量从 bitbake 配方传递到 makefile？

> ID：15390579
> 
> 赞同：4
> 
> 时间：2013-03-13T16:10:56.763
> 
> 标签：makefile, recipe, openembedded, bitbake

我正在尝试将我的 bitbake (.bb) 配方中的变量传递给我调用的 Makefile。

在我的食谱中，我有：

```
export FOO="bar" 
```

当它运行该`do_compile()`方法时，我让它调用我生成的 Makefile。在我测试的 Makefile 中，变量是通过以下方式正确设置的：

```
ifeq ($(FOO), "bar")
    echo $(FOO) >> ./test.txt
else
    echo "Didn't work" >> ./test.txt
endif 
```

当我烘烤食谱时，我只在日志中看到“不起作用”。我认为这很奇怪，因为如果我`FOO="bar"`在 Makefile 中并刚刚运行`make`，那么我会在测试文件中看到“bar”打印。那么为什么它没有正确“通过”呢？

我又运行了一个测试来验证，在我的 Makefile 中我只放了这一行：

```
echo $(FOO) >> ./always_print.txt 
```

然后在烘烤食谱后，我看到`bar`打印在我的“always_print.txt”文件中，但我看到“没有工作”打印在 test.txt 中......

有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-18T07:49:56.593

在定义你的 do_compile 方法之前，你必须定义变量 EXTRA_OEMAKE 其内容：

```
EXTRA_OEMAKE = "FOO=bar" 
```

之后，在您的 do_compile 方法中，您必须调用“oe_runmake”。该调用调用命令“make”，并且在 EXTRA_OEMAKE 变量中定义的所有内容都作为参数传递给“make”命令。希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T16:54:43.920

该`make`语言不用`"`作引用字符，因此您正在比较`$(FOO)`（`"bar"`包括引号）。只需省略引号：

```
ifeq ($(FOO),bar)
  ... 
```

# json - MVC4：带多个参数的存储过程

> ID：15390582
> 
> 赞同：1
> 
> 时间：2013-03-13T16:11:11.570
> 
> 标签：json, asp.net-mvc, entity-framework, stored-procedures

使用 Visual Studio Express 2012、MVC4 Web 应用程序和 SQL 2008 R2...

我曾经有一个只接受一个参数的存储过程，当我的 MVC 模型包含该存储过程时，我可以成功地从我的存储过程中调用它`Controller`并获得`Json`很好的结果。

现在我更新了存储过程以接受两个参数。我刷新了我的 MVC 模型，但在传递两个参数时无法从我的控制器正确调用存储过程。

**这是我使用一个参数的旧存储过程和控制器（这有效）：**

```
PROCEDURE [dbo].[GetDependencyNodes]     
@CISearchString nvarchar(100) 
```

**旧控制器：**

```
namespace CMDB.Controllers
{
public class GoJSDiagramNodesAndLinksController : Controller
{
   private CMDBEntities db = new CMDBEntities();
   public ActionResult GetDependencyNodes(string CISearchString)
    {
        return Json(db.GetDependencyNodes(CISearchString).ToList(), JsonRequestBehavior.AllowGet);
    }
}
} 
```

**这是我接受两个参数的新存储过程和控制器：**

```
PROCEDURE [dbo].[GetDependencyNodes]
@CISearchString nvarchar(100),
@ExcludeString nvarchar(100) 
```

**新控制器：**

```
namespace CMDB.Controllers
{
public class GoJSDiagramNodesAndLinksController : Controller
{
   private CMDBEntities db = new CMDBEntities();
   public ActionResult GetDependencyNodes(string CISearchString, string ExcludeString)
    {
   return Json(db.GetDependencyNodes(CISearchString, ExcludeString).ToList(), JsonRequestBehavior.AllowGet);
    }
}
} 
```

在 Visual Studio Express 2012 中，我的“return Json”行出现错误，说明：

“int”不包含“ToList”的定义，并且找不到接受“int”类型的第一个参数的扩展方法“ToList”。

如果我从以下位置更改行：

```
return Json(db.GetDependencyNodes(CISearchString, ExcludeString).ToList(), JsonRequestBehavior.AllowGet); 
```

至：

```
return Json(db.GetDependencyNodes(CISearchString, ExcludeString).ToString().ToList(), JsonRequestBehavior.AllowGet); 
```

错误消失但控制器返回 -1 而不是正确的 Json 结果。我已经在 SQL Manager 中测试了存储过程，可以看到预期的结果。

这是我的文件 CMDBModels.Desginer.cs 中带有 GetDependencyNodes 的部分代码：

```
 /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    /// <param name="cISearchString">No Metadata Documentation available.</param>
    /// <param name="excludeString">No Metadata Documentation available.</param>
    public int GetDependencyNodes(global::System.String cISearchString, global::System.String excludeString)
    {
        ObjectParameter cISearchStringParameter;
        if (cISearchString != null)
        {
            cISearchStringParameter = new ObjectParameter("CISearchString", cISearchString);
        }
        else
        {
            cISearchStringParameter = new ObjectParameter("CISearchString", typeof(global::System.String));
        }

        ObjectParameter excludeStringParameter;
        if (excludeString != null)
        {
            excludeStringParameter = new ObjectParameter("ExcludeString", excludeString);
        }
        else
        {
            excludeStringParameter = new ObjectParameter("ExcludeString", typeof(global::System.String));
        }

        return base.ExecuteFunction("GetDependencyNodes", cISearchStringParameter, excludeStringParameter);
    } 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:25:02.470

有几件事首先将您的数据访问移动到另一个类，使您的控制器尽可能轻。

接下来将存储的采购输出映射到具有与返回的列匹配的属性的基本类（实体类）

这应该让您在调试中更容易查看返回的数据，并且只是良好的编程习惯

# python - python从文件中的行创建列表

> ID：15390583
> 
> 赞同：0
> 
> 时间：2013-03-13T16:11:14.720
> 
> 标签：python

我需要为文件中的每一行创建一个字符串列表。

例子：

```
This is my file.
These are examples. 
```

将创建： ['This', 'is', 'my', 'file'] ['These', 'are', 'examples']

我需要这样做，因为我正在尝试将文件翻译成猪拉丁文文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:15:11.167

沿空格字符拆分文件中的每一行并将其作为列表检索。

```
f = open('filename.txt', 'r')
li = [line.split() for line in f] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:13:24.893

试试这个：

```
res = []
with open(filename, 'r') as f:
    for line in f:
         res.append(line.split()) 
```

或者：

```
map(str.split, open(filename, 'r')) 
```

如果您需要去除点：

```
res = []
with open(filename, 'r') as f:
    for line in f:
         res.append(line.strip('.').split()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:39:20.697

您还可以使用 readLines

```
f = open('file.txt', 'r')
lines = [line.split(' ') for line in f.readlines()] 
```

# c - 在 sendto() 之后释放缓冲区时出现分段错误

> ID：15390587
> 
> 赞同：1
> 
> 时间：2013-03-13T16:11:23.267
> 
> 标签：c, linux, segmentation-fault

`'pkt'`函数后释放缓冲区时出现分段错误`sendto()`

```
u_char* create_pkt(u_char* pkt)
{
  ....
  pkt = (u_char *)malloc(40);
  ...
  return pkt
}

int main()
{
 ....
 u_char* pkt;
 create_pkt(pkt);
 if (sendto(sd, pkt, 40, 0, (struct sockaddr *)&sin, sizeof(struct sockaddr)) < 0)
 free(pkt);
 } 
```

调试信息显示：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000003897482864 in __GI___libc_free (mem=0x7fffffffe010) at malloc.c:2986 
```

这有什么问题？谢谢！

```
2986      ar_ptr = arena_for_chunk(p);
2986      ar_ptr = arena_for_chunk(p); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:13:55.893

该`create_pkt`函数返回新分配的值，因此您需要在调用函数中使用它。

**`pkt =`**`create_pkt(pkt);`

否则程序将忽略指向已分配内存的指针并使用`pkt`.

编辑：如果你想使用参数作为赋值的东西，你可以写这样的东西

```
void create_pkt(u_char** pkt)
{
  ....
  *pkt = (u_char *)malloc(40);
  ...
} 
```

并调用它

```
create_pkt(&pkt); 
```

但我真的不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:14:23.380

`u_char* create_pkt(u_char* pkt)` 复制您的指针，然后在内部分配它，但只分配*副本*。当函数返回时，您的原始指针仍保持原样，未分配。

现在您可以从该函数返回一个指针，也可以传入一个双指针`u_char** pkt`并为其分配地址`pkt`。

`pkt = create_ptk(pkt);`现在你已经分配了pkt。

对于双指针版本，您可以这样称呼它：

`create_pkt(&pkt);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:16:23.157

您正在尝试分配内存并丢失分配的引用。所以垃圾被发送，然后尝试释放杀死它。

```
u_char* create_pkt()
{
   u_char* pkt;
   ....
   pkt = (u_char *)malloc(40);
  ...
   return pkt;
}

int main()
{
   ....
   u_char* pkt;
   pkt = create_pkt();
   if (sendto(sd, pkt, 40, 0, (struct sockaddr *)&sin, sizeof(struct sockaddr)) < 0)
   free(pkt);
} 
```

# java - Jquery在循环中的索引位置设置html标签的值

> ID：15390589
> 
> 赞同：0
> 
> 时间：2013-03-13T16:11:29.250
> 
> 标签：java, html, ajax, jquery

我有一个 ajax 调用，我希望在成功函数中循环遍历类中的每个标签，并将它们的值设置为从服务器响应返回的值。下面是代码，但是这会将所有标签设置为相同的值，这不是我想要的我想要访问该项目的索引并仅将该索引设置为响应值。我在哪里错了？：

**查询：**

```
 function GetCitizenTypeDescription(citizenTypeId){                 
        $.ajax({
        type:'GET',
        url:'getCitizenTypeDescription.htm',
        data:{citizenTypeId:citizenTypeId},
        dataType: 'text',
        success: function (data) {       
         $('.citizenTypeDesc').each(function(i){                
                 alert(data);
                 $('.citizenTypeDesc').text(data);      
        });
    }

    });

}

$(document).ready(function() {      

        $(".photos").each(function(i){                  

            if ($(this).val() != '') {
                   var image = new Image();                      
                    image.src =  $(this).val();

                    image.onload = function(){ 

                            var ctx = document.getElementsByClassName("canvas")[i].getContext('2d');
                            ctx.drawImage(image,0,0, 320, 240); 
                 }                      
        }     

    });

    $('.citizenTypeDesc').each(function(i){

          var citizenTypeId = document.getElementsByClassName("citizenTypeId")[i].value;
          GetCitizenTypeDescription(citizenTypeId);

    });

}); 
```

控制台返回正确的数据，我只需要将其写入标签

**安慰：**

```
GET http://localhost:8084/crimeTrack/getCitizenTypeDescription.htm?citizenTypeId=2 200 OK 174ms
Response
CRIMINAL

GET http://localhost:8084/crimeTrack/getCitizenTypeDescription.htm?citizenTypeId=3 200 OK 174ms
Response
VICTIM

GET http://localhost:8084/crimeTrack/getCitizenTypeDescription.htm?citizenTypeId=4 200 OK 174ms
Response
.... 
```

**html**

```
</head>
<body>
<div id ="content">
<c:forEach items="${citizens}" var="citizen">
<div id="table">    
    <div>
        <p><canvas class="canvas" height="240" width="320"></canvas>
    </div>
        <a href="citizen_registration.htm">Name:- ${citizen.fName}  ${citizen.lName}</a>
        <input type="hidden" id="photo" value="${citizen.photo}" class="photos"/>
        <input type="hidden" id="socialSecurityNumber" value="${citizen.socialSecurityNumber}" />
        <input type="text" class="citizenTypeId" value="${citizen.citizenTypeId}"/>
        <label class="citizenTypeDesc"></label>
</div>
</c:forEach>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:26:39.637

`.citizenTypeDesc`您可以遍历所有标签，而不是遍历所有标签`.citizenTypeId`。测试每个值是否与参数匹配，然后设置同一父元素内的标签。

```
function GetCitizenTypeDescription(citizenTypeId){                 
  $.ajax({
    type:'GET',
    url:'getCitizenTypeDescription.htm',
    data:{citizenTypeId:citizenTypeId},
    dataType: 'text',
    success: function (data) {       
       $('.citizenTypeId').each(function(i){                
             //does this value match the parameter
             if($(this).val() === citizenTypeId){ 
                 //find the parent div, in this case .table
                 var parent = $(this).parent();
                 //search for a child with class .citizenTypeDesc
                 var thisCitizenTypeDesc = parent.children('.citizenTypeDesc');

                 thisCitizenTypeDesc.text(data);
             }
       });
    }
  });
} 
```

# grails - 具有多个环境的 Grails 外部配置（数据源）

> ID：15390591
> 
> 赞同：4
> 
> 时间：2013-03-13T16:11:35.530
> 
> 标签：grails, configuration, external

在我的`Config.groovy`我放行：

```
grails.config.locations = [ "classpath:app-config.properties"] 
```

我在哪里设置数据源的定义。文件看起来像：

```
dataSource.url=jdbc:mysql://host/instance
dataSource.username=u
dataSource.password=p 
```

并且它正确地替换了`DataSource.groovy`.

问题是它替换了每个环境的配置，但我需要为开发、测试和生产单独配置。尝试将不同的条目放入文件中，例如：

```
environments.development.dataSource.url=jdbc:mysql://host/dev
...
environments.production.dataSource.url=jdbc:mysql://host/prod
... 
```

以定义的默认数据源属性结束`DataSource.groovy`。如何使一个属性文件适用于不同的环境？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T16:27:43.533

有几种可能的方法。这里有一对：

1.  在您的外部配置文件名中嵌入当前环境名称：

    `grails.config.locations = [ "classpath:app-${grails.util.Environment.current.name}-config.properties"]`

    这将导致`app-development-config.properties`在开发模式、`app-test-config.properties`测试等中加载。

2.  使用`.groovy`配置格式而不是`.properties`. 使用`.groovy`配置文件，您可以使用该`environment { ... }`块。

# c# - 数据网格上的 NullReferenceException

> ID：15390593
> 
> 赞同：0
> 
> 时间：2013-03-13T16:11:38.040
> 
> 标签：c#, wpf, exception, listbox

我在 WPF 用户控件中有一个数据网格（DevExpress）

dg_VQ 是数据网格名称

我有一个列表框 lst_REQ_LIST

在 SelectionChanged 我重新加载 2 个数据网格

_load_data 中的行 this.dg_VQ.ItemsSource = null;

是发生异常的地方。它发生的方式让我感到困惑如果我在列表中选择一个项目，无论我选择多少次，它都会起作用。但是，一旦我选择了一个在网格中包含数据的 iem，然后我在列表中选择了另一个项目，就会引发错误。

这是愚蠢的部分，如果我停止它的工作。这几乎就像是在等待某件事在不同的线程中完成，但没有已知的衍生线程。在例行程序中从不击中捕获。

它只是弹出一个消息框，但有例外

使用数据类

```
 private void lst_REQ_LIST_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (lst_REQ_LIST.SelectedValue == null) { return; }
        _selection_changed();
    }
    private void _selection_changed()
    {
        string sGUID = lst_REQ_LIST.SelectedValue.ToString().ToUpper();
        req_guid = new Guid(sGUID);
        quote_guid = new Guid("{00000000-0000-0000-0000-000000000000}");
        _load_data();
    }
    private void _load_data()
    {
        try
        {
            // Load the top grid
            this.dg_VQ.ItemsSource = null;
            this.dg_VQ.ItemsSource = dbP.tbl_vendor_quote_requests
                .Where(x => x.requisition_guid == req_guid);
            this.dg_VQ.RefreshData();

            // Load the bottom grid
            this.dg_VQ_DTL.ItemsSource = null;
            this.dg_VQ_DTL.ItemsSource = db.tbl_vendor_quote_request_dtls
                .Where(x => x.vendor_quote_request_guid == quote_guid)
                .OrderBy(x => x.item_number);
            this.dg_VQ_DTL.RefreshData();
        }
        catch (Exception e)
        {
            throw e;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:13:45.607

例外是告诉你`this.dg_VQ`是`null`. 确保您已将该字段设置为实际值，**或**使用

```
if (this.dg_VQ != null)
{
    ...
} 
```

这不会解决原始问题，但会阻止`NullReferenceException`代码中的 a 。

# python - 使用 BeautifulSoup 解析标签，无法提取值

> ID：15390596
> 
> 赞同：0
> 
> 时间：2013-03-13T16:11:42.377
> 
> 标签：python, beautifulsoup

我有一些看起来像这样的html：

```
<tr>
  <td>some text</td>
  <td>some other text</td>
  <td>some <b>problematic</b> other <br /> text</td>
</tr> 
```

和一些试图获取标签值并打印每个内部值的python：

```
soup = BeautifulSoup(data, convertEntities=BeautifulSoup.HTML_ENTITIES)
for row in soup.findAll('tr'):
    print repr(row) # this prints the whole 'tr' element text just fine.
    for col in row.contents:
        print col.string 
```

所以全文正确打印捕获的html，但'col'为最后一个元素打印None：

```
some text
some other text
None 
```

我不熟悉 BeatifulSoup 或 python，但似乎最后一个元素的内部标签导致解析问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:13:49.477

您可以升级到 BeautifulSoup 版本 4 并使用[`.stripped_strings`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)：

```
soup = BeautifulSoup(data)
for row in soup.find_all('tr'):
    print '\n'.join(row.stripped_strings) 
```

在 BeautifulSoup 3 中，您需要搜索所有包含的文本：

```
for row in soup.findAll('tr'):
    print '\n'.join(el.strip() for row.findAll(text=True) if el.strip()) 
```

# php - 任何想法为什么查询结果不显示为复选框？

> ID：15390597
> 
> 赞同：0
> 
> 时间：2013-03-13T16:11:46.690
> 
> 标签：php, javascript, html

在我们的数据库上，我们有一个名为 ResultType 的字段名称。

有多种类型的值与 ResultType 字段名相关联。

我们的要求是查询我们的数据库并使用复选框显示 ResultType 的值，以便用户可以选择检查一个或多个值。

用户可以单击 Check All 复选框来选择所有复选框值。

用户也可以选中 UnckAll 复选框以取消选择他们的选择。

一个简单的 JS(attach) 正在处理这个问题。

我遇到的问题是 ResultType 的值没有显示在复选框旁边。

我们有一个名为`dbConnect.php`where 连接到我们的 sql server db 的文件，以及定义的凭据。

我下面的代码有问题，我无法弄清楚。

```
<head>
     <script type="text/javascript">
      function checkAll(formName, status){
       for (i = 0; i < formName.length; i++)
       formName[i].checked = status.checked? true:false
       }
 </script>
</head>
<body>
<h3>Search Options</h3>

 <form name ="checkForm" method="post" action="Search.php">
  <input type="checkbox" name="srcoptions"
        onClick="checkAll(this.form,this)">Check/Uncheck All
<?php

   // Connect to SQL Server database
   include("../connections/dbConnect.php");

   // Construct query
     $sql = "SELECT * FROM Results";

// Execute query
$stmt = sqlsrv_query( $conn, $sql);
if( $stmt === false )
{
     echo "Error in executing query.</br>";
     die( print_r( sqlsrv_errors(), true));
}

// Retrieve and display the results of the query
  while($row=mysql_fetch_array($res)){
   echo '<input type="checkbox" name="chk[]"
       value =<font class=heading>'.$row["resultType"].'</font>><font class=heading>'.$row["resultType"].'</font><br>';
  }
  // Free statement and connection resources
  sqlsrv_free_stmt( $stmt);
  sqlsrv_close( $conn);

  ?>
  <P><input type="submit" value="Search">
  </form>
</body>
</html> 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:37:04.600

也许尝试：

```
// Retrieve and display the results of the query
while($row=mysql_fetch_array($res)){
$i=0;
$i++;
echo '<input type="checkbox" name="chk[$i]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:23:51.783

我不完全确定你想用这条线生产什么：

```
echo '<input type="checkbox" name="chk[]" value=<font class=heading>'.$row["resultType"].'</font>><font class=heading>'.$row["resultType"].'</font><br>'; 
```

但它不会是有效的。您没有引用该值，并且其中包含其他 HTML 标记（我已将其删除，但您可以在必要时阅读它们）。试试这个：

```
echo '<input type="checkbox" name="chk[]" value="'.$row["resultType"].'"><font class=heading>'.$row["resultType"].'</font><br>'; 
```

旁注：你真的不应该使用字体标签。

# java - 使用 XPath 获取 XML 节点的兄弟节点

> ID：15390602
> 
> 赞同：1
> 
> 时间：2013-03-13T16:12:04.637
> 
> 标签：java, xpath

我有以下 XML

```
 <field label="mapping">
       <tuple> <atom label="A"/> <atom label="X"/> </tuple>
       <tuple> <atom label="B"/> <atom label="Y"/> </tuple>
       <tuple> <atom label="C"/> <atom label="Z"/> </tuple>
    </field> 
```

当我知道另一个节点的标签时，我想从 a 中选择第二个`atom`节点的标签。`tuple``atom`

例如，如果我知道`atom`带有标签 A 的原子，我想得到带有标签 X 的原子。

我写了这个 XPath 表达式，但它没有解决问题：

```
//following-sibling::field[@label = 'mapping']/tuple/atom[@label = 'A'] 
```

如果我写

```
XPath expr = xpath.compile("//following-sibling::field[@label = 'mapping']/tuple/atom[@label = 'A']");
NodeList nodes = ((NodeList) expr.evaluate(doc, XPathConstants.NODESET));
for (int j=0;j<nodes.getLength();j++){
    String label = nodes.item(j).getAttributes().getNamedItem("label").getNodeValue();
} 
```

`label`当我期望它是 X 时，变量是 A。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:25:00.520

您将`following-sibling`轴放在错误的位置，但这很接近：

```
//field[@label = 'mapping']/tuple/atom[@label = 'A']/following-sibling::atom 
```

# java - Android：包含标题和副标题的列表项的默认布局

> ID：15390609
> 
> 赞同：16
> 
> 时间：2013-03-13T16:12:16.333
> 
> 标签：java, android, android-layout, android-listview, listitem

我做了一个列表项，包含一个标题和一个副标题。从结果来看，我认为它看起来并不专业。所以这就是我问的原因。

我正在寻找的列表项很常见（它在很多应用程序中使用，即 Android 的默认设置菜单，并且当您在 Eclipse 的图形布局编辑器选项卡中添加列表视图时也会显示它）。

所以我的问题是：在哪里可以找到带有标题和副标题的列表项的默认布局？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-13T16:14:29.837

资源 ID 是`android.R.layout.simple_list_item_2`

上面的文本行有 id`android.R.id.text1`和下面的一个 -`android.R.id.text2`

布局位于`<ANDROID_SDK_ROOT>/platforms/<any_api_level>/data/res/layout`文件夹中

**或者**

您可以`TwoLineListItem`从默认的 Android 控件列表中使用（它位于 Eclipse 布局编辑器的“高级”选项卡下）

**或者**

你可以用你喜欢的任何东西来构建你自己的布局（例如`LinearLayout`添加`orientation="vertical"`and 两个`TextEdit`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-14T04:57:11.057

所以最好的方法是：-我取出了简单的列表项 2 并在我的项目中做了一个布局，几乎没有编辑它采用了与你在 android.R.simple_list_item_2 中给出的相同的布局

所以代码是： -

```
 <?xml version="1.0" encoding="utf-8"?>

<TwoLineListItem xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:minHeight="?attr/listPreferredItemHeight"
android:mode="twoLine"
android:paddingStart="?attr/listPreferredItemPaddingLeft"
android:paddingLeft="?attr/listPreferredItemPaddingLeft"
android:paddingEnd="?attr/listPreferredItemPaddingRight"
android:paddingRight="?attr/listPreferredItemPaddingRight">

<TextView android:id="@+id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="8dp"
    android:textAppearance="?attr/textAppearanceListItem" />

<TextView android:id="@id/text2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/text1"
    android:layout_alignStart="@+id/text1"
    android:layout_alignLeft="@+id/text1"
    android:textAppearance="?attr/textAppearanceListItemSmall" /> 
```

# php - PHP中输入的初始值

> ID：15390610
> 
> 赞同：1
> 
> 时间：2013-03-13T16:12:20.057
> 
> 标签：php

这是一个快速的问题：像这样的代码

`<input type="hidden" name="HDN_FormClicked" value="WasClicked" />`

```
if (strlen($_POST["HDN_FormClicked"]) > 0){
  echo "You have clicked the button";
} 
```

如果每次都检查输入值吗？那么为什么第一次输入不大于0呢？它是一些初始设置吗？

感谢帮助：）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:14:55.653

该值只会（并且总是）在您`POST`的表单时设置，而不是在您第一次加载页面而不提交表单时设置。您可以对其进行一些修改以避免这种混淆

```
if(isset($_POST))
{
if (strlen($_POST["HDN_FormClicked"]) > 0){
  echo "You have clicked the button";
}
}
else
{
echo "Form was not submitted this time";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:15:03.747

不好的解决方案，但您的问题的答案是：因为表单值尚未发送到服务器。所以在第一次发送后，你就会把它填满。通过仅显示输入，不会发送数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T16:35:46.633

Pluto，也许我在这里遗漏了一些东西，或者对表单如何与 PHP 通信可能存在轻微的误解。

PHP 不知道您在页面上显示的表单数据，它只知道它正在输出文本。当您执行表单提交时，PHP 会识别出表单数据已传递给它。

设想我们的页面包含以下代码：

```
<?php
if($_POST['HDN_FormClicked']) {
  print 'You have clicked the button';
} else {
  print 'Form was not submitted this time';
}
?>
<form method="post">
  <input type="hidden" name="HDN_FormClicked" value="1" />
  <button type="submit">Click</button>
</form> 
```

默认情况下，表单上方的文本会显示“本次未提交表单”。

当您按下“单击”按钮时，表单将发布到脚本，PHP 将检测到表单元素已通过，并打印“您已单击按钮”。

# objective-c - 在 NSConnections 上调用 rootProxy 不会返回

> ID：15390616
> 
> 赞同：1
> 
> 时间：2013-03-13T16:12:31.580
> 
> 标签：objective-c, xcode, cocoa, distributed-objects

我有两个 Cocoa-GUI-Applications（用 ARC 编译，没有沙盒）。

应用程序一具有以下功能：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application

    CommController *cc = [CommController new];
    NSConnection *theConnection;
    theConnection = [NSConnection new];
    [theConnection setRootObject:cc];
    if ([theConnection registerName:@"MyServer"] == NO) {
        /* Handle error. */
        NSLog(@"Could not start server.");
    }

} 
```

应用二具有以下功能：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    id theProxy;
    NSConnection *theConnection;

    theConnection = [NSConnection
                     connectionWithRegisteredName:@"MyServer"
                     host:nil];
    theProxy = [theConnection rootProxy];
    [theProxy setProtocolForProxy:@protocol(NetProto)];

} 
```

`[theConnection rootProxy]`来自第二个应用程序的调用永远不会返回。如果我使用不推荐使用的`[NSConnection defaultConnection]`而不是`[NSConnection new]`它的工作原理。所以我正在寻找一种不被弃用的方法来获取 rootProxy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:28:30.317

`NSConnection`保持对Ken Thomases 提出的对象的强烈引用会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:39:43.903

```
CommController *cc = [CommController new];
    NSConnection *theConnection;
    theConnection = [NSConnection new];
    [theConnection setRootObject:cc];
    if ([theConnection registerName:@"MyServer"] == NO) {
        /* Handle error. */
        NSLog(@"Could not start server.");
    }
[[NSRunLoop currentRunLoop] run];//Start the current runloop 
```

# android - 编译后将Android应用设置为可调试

> ID：15390621
> 
> 赞同：2
> 
> 时间：2013-03-13T16:12:34.443
> 
> 标签：android, debugging

这可能是一个完全的“不可以”，但我想知道是否有可能在应用程序被签名并编译成 apk 后使其可调试。

我希望能够在我的服务器上生成一个随机密钥，然后使用该密钥将我发布的应用程序置于可调试状态。

```
//Build a hidden back door to request the randomly generated key on my server
//Input this key into an edittext box of some sort.
//Check this key against the server
//If key validates, put application in debuggable state. 
```

我意识到这样做存在潜在的安全风险，但我只是想知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:17:09.097

如果您愿意重新签名并重新安装，从不可调试的 APK 生成可调试的 APK 相当简单，但您不能对已安装的实例执行此操作。

实际代码中根据可调试/不可调试状态而表现不同的任何内容也可以像 Brent 建议的那样查看其他内容，但由于大多数调试功能都内置在 Android 中，而不是应用程序代码的一部分，因此用途有限。

不过，您也许可以为调试功能提供基于标志的替代方案。例如，您可以提供一些东西来将私人文件复制到公共存储中。如果你真的想要，你可以在一个服务器中烘焙，该服务器将提供一个作为应用程序 UID 运行的 shell。但是让一个真正的 JDWP 调试器运行可能需要极端的、依赖于 android-build 的hackery，因为您可能必须提供自己版本的许多系统代码。

在简单的一端，通过记录许多通常被抑制的内部细节来让您的程序改变其行为将非常简单。

请花一些时间考虑对用户的安全影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:03:22.230

`getApplicationInfo().flags;`浏览开发站点，我看到通过对给定上下文的调用来访问标志。`flags`不是`final`，所以它似乎`getApplicationInfo.flags |= FLAG_DEBUGGABLE;`允许您在运行时启用调试：参考`ApplicationInfo`文档：http: [//developer.android.com/reference/android/content/pm/ApplicationInfo.html](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html)。

请注意，我还没有测试过这个（不是在moemnt的android环境中）。

# css - 如何在 CSS 3 中选择兄弟元素？

> ID：15390622
> 
> 赞同：1
> 
> 时间：2013-03-13T16:12:35.593
> 
> 标签：css, css-selectors

我想在之前和之后选择元素兄弟`li.active`。

HTML：

```
<ul class="inline avancement">
  <li>Réception des réponses</li>
  <li class="active">Achat</li>
  <li>Evaluation</li>
</ul> 
```

CSS：

```
ul.avancement li{

padding-right:20px;
padding-left:10px;
margin-left:-4px;
height:37px;
line-height:37px;
}
 li.active ~ li{
    background:url(../img/delimiter_step_left.png) right top no-repeat;
    background-color:#ff0000;
}
 li.active + li{
    background:url(../img/delimiter_step_left.png) right top no-repeat;
    background-color:#999999;
}
 ul.avancement li{
    background:url(../img/delimiter_step.png) right top no-repeat;
    background-color:#999999;
    color:white;
}
ul.avancement li.active{
    background:url(../img/delimiter_step_actif.png) right top no-repeat;
    background-color:#ff0000;
}
ul.avancement li:last-child{
    background:none;
    background-color:#999999;
} 
```

但它不起作用！

结果 ：

![在此处输入图像描述](../Images/a13455b020e4acea3f971c3af6b0502f.png)

我在活动步骤之前等待红色步骤！怎么了 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:24:51.587

您不能使用纯 CSS 解决方案选择上一个元素！如果您不相信我，请阅读[Selectors Level 3 。](http://www.w3.org/TR/selectors/#sibling-combinators)

但是，下一部分可以很容易地完成。

```
.active + li {
    color: red;
} 
```

jsfiddle：http: [//jsfiddle.net/nkp8z/](http://jsfiddle.net/nkp8z/)

虽然，您的问题不是 100% 清楚 - 您是要选择所有未标记的`active`元素，还是只选择活动元素之前和旁边的 2 个元素？

# php - Wordpress 自定义帖子类型 - 编辑字段

> ID：15390624
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:12:45.440
> 
> 标签：php, wordpress, wordpress-theming

我们在 Wordpress 上构建了一个自定义帖子类型，其中包含许多自定义字段，用户可以在其中提交帖子，然后在类别和主页上查看它。

现在我们要启用用户我的帐户和编辑帖子页面，这不在标准的 Worpdress 仪表板内。

我设法找到了一些插件，但它们不能完全支持我的需求。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:43:05.993

您可以通过简单地使用 wordpress 函数 **wp_insert_post()**从前端手动创建帖子来做到这一点。

这是示例代码：

```
$my_post = array(
  'post_title'    => 'My post',
  'post_content'  => 'This is my post.',
  'post_status'   => 'publish',
  'post_author'   => 1,
  'post_category' => array(8,39)
);

wp_insert_post( $my_post ); 
```

希望这会帮助你。

# css - 使用关键帧的 CSS3 动画交替不触发

> ID：15390626
> 
> 赞同：1
> 
> 时间：2013-03-13T16:12:46.667
> 
> 标签：css, css-transitions, css-animations

我正在尝试使用旋转和关键帧来实现一个简单的动画，当用户悬停一个元素时会触发动画。

问题是当用户停止悬停元素时，动画不会向后触发我的问题的现场演示[http://jsfiddle.net/9eWhC/](http://jsfiddle.net/9eWhC/)

请记住，动画声明已添加到悬停事件中

```
.b:hover {
    z-index:900;
    -webkit-transform:rotateX(-180deg);
    -moz-transform:rotateX(-180deg);
    -webkit-animation-name: spinz;
    -moz-animation-name: spinz;
    -ms-animation-name: spinz;
    -o-animation-name: spinz;
    animation-name: spinz;
    animation-direction: alternate;
    -webkit-animation-direction: alternate;
    -webkit-animation-duration: 3s;
    -moz-animation-duration: 3s;
    -ms-animation-duration: 3s;
    -o-animation-duration: 3s;
    animation-duration: 3s;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:56:36.407

`alternate`在这里无法帮助您-您需要*为相同的状态*至少播放两次动画，无论是正常（`.b`）还是悬停（`.b:hover`），以注意效果`alternate`。为了在悬停时反转相同的动画，您需要做的是在正常状态 ( `.b`) 上设置相同的动画，但使用`animation-direction`of `reverse`。

[修改过的小提琴](http://jsfiddle.net/9eWhC/2/)

# java - Sitemesh 在运行时更改装饰器

> ID：15390628
> 
> 赞同：1
> 
> 时间：2013-03-13T16:13:00.850
> 
> 标签：java, sitemesh

我的问候！

问题很简短：有没有办法在运行时更改装饰器？例如，我有一个带有一些“装饰器样式”的下拉菜单，所以当用户选择不同的样式时，它会更改装饰器。

如果您对此主题有任何有用的链接，我将不胜感激。

找到这个线程 - [SiteMesh：改变响应的内容类型](https://stackoverflow.com/questions/2318165/sitemesh-changing-the-content-type-of-the-response)- 但仍然没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:09:28.770

我知道您可以使用`meta`HTML 标记来指定要与 JSP 文件一起使用的装饰器。例如在`login.jsp`我需要`login`装饰器的文件中：

```
<head>
    <meta name="decorator" content="login" />
    <!-- where "login" is the name of the decorator -->
</head> 
```

所以，我还没有尝试过，但您可能可以通过 POST 或 GET 参数给出装饰器的名称，并在`meta`标签中使用它：

```
<meta name="decorator" content="${decoratorName}" /> 
```

# macos - Cocoa Mac 开源控件，用于显示产品导览

> ID：15390629
> 
> 赞同：1
> 
> 时间：2013-03-13T16:13:01.540
> 
> 标签：macos, cocoa, controls

几个月前，我发现了一个开源可可控件，用于在网上显示可可应用程序的产品导览。它可用于通过显示包含说明性文本的浮动箭头来突出显示 Mac 应用程序的某些部分。

我在 cocoacontrols.com 和 cocoapods 上看过，但现在找不到了，也不记得名字了。

有没有人有这个链接？

# java - 工头找不到java

> ID：15390632
> 
> 赞同：1
> 
> 时间：2013-03-13T16:13:11.160
> 
> 标签：java, windows-7, environment-variables, mingw32, foreman

我正在尝试使用工头在本地运行一个 Java 应用程序，该应用程序可以很好地部署到 heroku。

我的 Procfile 看起来像这样

```
web: java $JAVA_OPTS -cp target/classes;target/dependency/* Start 
```

但是当我这样做`formeman start`时

```
15:51:21 web.1  | unknown command: java $JAVA_OPTS -cp target/classes;target/dependency/* Start 
```

如果我只是`java`在提示符下输入，我会得到 java 的帮助文本，所以它在我的路径上。如果我在 Procfile 中使用 java 可执行文件的完整路径，它可以工作，但如果我不需要两个版本的 Procfile，它会更干净

我的路径是否有一些时髦的东西，或者工头没有从我的环境中获取路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T11:27:35.500

会不会是环境变量的问题？

视窗：

```
 java %JAVA_OPTS% -cp target/classes;target/dependency/* Start 
```

Linux：

```
 java $JAVA_OPTS -cp target/classes:target/dependency/* Start 
```

看起来这个例子是两者的混合:-)

[环境变量](http://en.wikipedia.org/wiki/Environment_variable)

# capistrano - Webistrano - 如何在部署后清除全局 HTML 缓存

> ID：15390633
> 
> 赞同：0
> 
> 时间：2013-03-13T16:13:11.690
> 
> 标签：capistrano, varnish, webistrano

我是 webistrano 的新手，如果这是一件小事，我深表歉意......

我正在使用 webistrano 将 php 代码部署到多个生产服务器，这一切都很好。我的问题是我需要在代码更新后清除缓存服务器（清漆缓存）上的 HTML 缓存。我不知道如何构建将在 webistrano 机器上执行的配方（并将运行将清除缓存的相关 shell 脚本）而不是在每个部署目标机器上执行。

谢谢您的帮助，

亚里夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:50:59.800

感谢你的回答。实际上，除了清除缓存之外，我还需要做更多的事情，所以我将在本地执行一个 bash 脚本，如下所述： [如何在本地执行 Capistrano 任务？](https://stackoverflow.com/questions/8692664/how-do-i-execute-a-capistrano-task-locally)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:17:19.513

最简单的方法是在 deploy:restart 中使用适当的参数执行 varnishadm 工具

```
 set :varnish_ban_pattern, "req.url ~ ^/"
  set :varnish_terminal_address_port, "127.0.0.1:6082"
  set :varnish_varnishadm, "/usr/bin/varnishadm"

  task :restart, :roles => :web do
    run "#{varnish_varnishadm} -T #{varnish_terminal_address_port} ban \"#{varnish_ban_pattern}\"" 
  end 
```

# macos - NSTextView 复视

> ID：15390634
> 
> 赞同：1
> 
> 时间：2013-03-13T16:13:12.757
> 
> 标签：macos, cocoa, nstextview

我一定在这里做错了什么： ![文本视图与](../Images/bb1478892484863d9495de2c9510d13a.png)

我的 Cocoa 应用程序有一个围绕自定义视图的滚动视图，而该自定义视图又具有一个文本视图。我只希望看到一个“这是一个”字符串，但角落里还有一个额外的字符串。我已将代码减少到非常少的程度，但仍然不明白我的错误是什么，所以我在这里寻找线索。

自定义视图的视图控制器如下，但为简单起见，这里是[项目](https://www.dropbox.com/s/4k72s35u3480zcn/TextTest.zip)的链接。

```
#import "TTTSimpleCtrlView.h"

@interface TTTSimpleCtrlView ()

@property (strong,nonatomic) NSTextView *tv1;
@property (strong,nonatomic) NSTextStorage *ts;

@end

@implementation TTTSimpleCtrlView

- (void) awakeFromNib {
    NSFont *font = [NSFont fontWithName:@"Courier New Bold" size:20.0f];
    NSMutableParagraphStyle *styleModel = [[NSParagraphStyle  defaultParagraphStyle] mutableCopy];
    [styleModel setLineHeightMultiple:1.0];
    //    [styleModel setLineSpacing:fontRect.size.height * 2];
    NSDictionary *textAttrs = [NSDictionary dictionaryWithObjectsAndKeys: font, NSFontAttributeName,
                                     [NSColor blackColor] ,NSForegroundColorAttributeName,
                                     [NSColor whiteColor], NSBackgroundColorAttributeName,
                                     styleModel, NSParagraphStyleAttributeName,
                                     nil];
    NSString *pilcrowStr = @"This is a test.";
    NSAttributedString *s = [[NSAttributedString alloc] initWithString:pilcrowStr attributes:textAttrs];
    NSRect rect = [s boundingRectWithSize:NSMakeSize(INFINITY,INFINITY)options:0];
    NSLayoutManager *lm = [[NSLayoutManager alloc] init];
    NSTextContainer *tc = [NSTextContainer new];

    [tc setContainerSize:s.size];
    [lm addTextContainer:tc];

    _ts = [[NSTextStorage alloc] init];
    [_ts setAttributedString:s];

    [_ts addLayoutManager:lm];
    [lm replaceTextStorage:_ts];

    rect.origin.x = 10;
    rect.origin.y = rect.size.height;
    NSTextView *v = [[NSTextView alloc] initWithFrame:rect textContainer:tc];
    [v setDrawsBackground:YES];
    [self addSubview:v];
}

- (BOOL) isFlipped {
    return YES;
}

- (void)drawRect:(NSRect)rect
{
    NSLog(@"drawRect & %lu subviews",self.subviews.count);
    for (NSTextView *v in self.subviews) {
        if(CGRectIntersectsRect(v.frame, rect) || CGRectContainsRect(rect, v.frame)) {
            [v drawRect:rect];
            NSLog(@"frame = %@",NSStringFromRect(v.frame));
        }
    }
    [super drawRect:rect];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T11:30:13.593

您正在调用：

```
[super drawRect:rect]; 
```

并且您正在自己的绘图功能中绘制文本。实际上，您正在绘制文本，而可可也在为您绘制文本。所以不要叫超级。

# linux - Bash 脚本变量范围问题

> ID：15390635
> 
> 赞同：1
> 
> 时间：2013-03-13T16:13:12.410
> 
> 标签：linux, bash, variables, scope

```
username="hello"
password="3333"

function login {
    # 1 - Username
    # 2 - Password
    match=0
    cat LoginsMaintMenu.txt | while read line; do
            x=`echo $line | awk '{print $1}'`
            y=`echo $line | awk '{print $2}'`
            if [ "${x}" == "${1}" ] && [ "${y}" == "${2}" ]; then
                    echo "match"
                    match=1
                    echo $match
                    break
            fi
    done
    echo $match
    return $match
}

echo $username $password
login ${username} ${password}
if [ $? -eq 0 ]; then
echo "FAIL"
else
echo "success"
fi 
```

输出：

```
hello 3333
match
1
0
FAIL 
```

问题：我不明白为什么它在呼应“失败”。“match”变量在while循环中被设置为1，但由于某种原因，一旦我退出while循环，它仍然认为它是其声明中的初始零。

我尝试过做很多不同的事情，所以如果有人能给我一些具体的尝试，那就太好了！

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T16:17:45.103

这不起作用的原因实际上是[UUOC](http://catb.org/jargon/html/U/UUOC.html)。在 bash 中，管道的右侧在子外壳内运行。在子 shell 中设置的任何变量都不会在父 shell 中设置。要解决此问题，请使用重定向而不是管道：

```
username="hello"
password="3333"

function login {
    # 1 - Username
    # 2 - Password
    match=0
    while read x y _; do
        if [ "${x}" == "${1}" ] && [ "${y}" == "${2}" ]; then
            echo "match"
            match=1
            echo $match
            break
        fi
    done < LoginsMaintMenu.txt
    echo $match
    return $match
}

echo $username $password
if login "${username}" "${password}"; then
    echo "FAIL"
else
    echo "success"
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:17:16.167

您的`while read ...`代码部分（从管道获取其输入`cat`）在子外壳中运行。对内部变量的更改在该子外壳之外不可见。

要解决此问题，请将循环更改为：

```
while read ... ; do
  ...
done < LoginsMaintMenu.txt 
```

# java - 通过 SVN 将 IntelliJ 模块导入 Eclipse 项目

> ID：15390637
> 
> 赞同：1
> 
> 时间：2013-03-13T16:13:17.983
> 
> 标签：java, eclipse, svn, intellij-idea

我正在使用 Eclipse，而我们公司的另一位开发人员使用 IntelliJ 开发了一个大型项目。他在 IntelliJ 中使用了导出到 Eclipse 功能，我通过 SVN 签入。

但这似乎不起作用。整个目录结构仍然是 IntelliJ 的，Eclipse 项目不识别 JRE（我添加到构建路径中）或我添加的 jar，甚至包本身 - 正如我所提到的，它们位于IntelliJa 的结构（src > main > java > com.package_name）。

环顾四周，似乎每个人都在朝着另一个方向前进：从 Eclipse 到 IntelliJ。

所以我的问题是，是否有可能成功地将 IntelliJ 项目导入 Eclipse，同时保持目录结构以便 SVN 仍然可以工作？

# c++ - 单词的 SQL 哈希表

> ID：15390646
> 
> 赞同：0
> 
> 时间：2013-03-13T16:13:30.150
> 
> 标签：c++, ios, objective-c, sql, c

我正在尝试解决“为一组字母查找所有可能的单词”问题。那里有一些很好的答案，但我仍然无法弄清楚。

在我的第一个测试中，我将整个字典放在一个数组中，然后遍历每个字母。这是超快的，但是将字典加载到数组中需要很长时间，并且需要大量内存。

所以我需要存储字典（750,000）字母是一个sql数据库。

我想有两种解决方案可以找到所有可能的单词：

1.  进行预先查询，返回所有可能的单词
2.  做一个简单的查询，返回数据库中可能出现的单词的一部分，然后快速遍历该数组并验证单词。

**问题？：** 它必须超级快。iPhone 4 需要能够在 5-6 秒内获得所有可能的单词，这样才不会妨碍游戏。

这是一个类似的问题： [IOS：Sqlite。快速查找记录](https://stackoverflow.com/questions/14344300/ios-sqlite-find-record-fast)

Sulthans 的回答似乎是个好主意。创建一个哈希表，然后：

> ASCII 字母的位掩码（忽略任何非 ASCII 字母）。位置 0 的位表示单词包含“a”，位置 1 包含“b”等。如果我们为字母创建相同的位掩码，我们可以选择诸如 (wordMask & ~lettersMask) == 0 这样的单词

位掩码、哈希表如何制作，sql查询如何构造？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:05:58.230

sql 可能不是最好的选择。用于存储单词集合的传统数据结构称为[Trie](http://en.wikipedia.org/wiki/Trie)。我相信你可以找到那里的实现。其他人会有答案。

我设想的算法是对给定的字母进行排列，并检查每个排列以查看它是否在 Trie 中。

# php - PHP preg_replace 中的正则表达式：显示所有数字，直到任何其他字符

> ID：15390649
> 
> 赞同：0
> 
> 时间：2013-03-13T16:13:40.147
> 
> 标签：php, regex, pattern-matching

我需要在一个字符串中找到所有数字，直到（但不包括）任何不是数字的东西。如果稍后出现数字（在出现非数字字符之后），那么也不应该包含它。我正在尝试使用 PHP 的命令`preg_replace`。

[这个问题](https://stackoverflow.com/questions/7124778/how-to-match-anything-up-until-this-sequence-of-characters-in-a-regular-expres)帮助我编写了以下模式：

```
.+?(?=[^0-9]) 
```

虽然不起作用：

```
preg_replace("/.+?(?=[^0-9])/", "", $entry); 
```

`$entry`我要搜索的字符串在哪里。

例如，我可以有以下字符串：

*   001Aa.bc
*   002a
*   003a4/。
*   004a(4)
*   005(4).string-d
*   006-34

我想从中获得：

*   001
*   002
*   003
*   004
*   005
*   006

我的模式似乎适用于测试站点，例如[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)。我对 PHP 命令的使用是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:15:24.060

使用 preg_match()

```
preg_match(/^(\d)+/, $search_me, $save_string_to_me); 
```

虽然它是 rubular 而不是明确的 php，但我想这个简单的东西是一样的： [http ://rubular.com/r/aqZhNC4nJq](http://rubular.com/r/aqZhNC4nJq)

# c# - 正则表达式替换为正斜杠

> ID：15390655
> 
> 赞同：1
> 
> 时间：2013-03-13T16:13:55.907
> 
> 标签：c#, regex

有人可以解释如何让这个正则表达式工作吗？我正在尝试使用这个字符串：

```
"Test0/1" 
```

并将其变成：

```
"Test0\/1" 
```

我正在使用它，但它不起作用：

```
var test = Regex.Replace("Test0/1", @"/", @"\/"); 
```

它不断地给我

```
"Test0\\/1" 
```

然后我想获取字符串的结果并将其放入 Regex 语句中，如下所示：

```
var match  = new Regex(test).Match(myString); 
```

所以字符串'test'必须是一个有效的正则表达式。

基本上我想要做的是从设备中取出一个接口列表，从中创建一个正则表达式语句，然后使用该正则表达式来比较我的代码中其他内容的结果。例如，由于接口被格式化为“FastEthernet0/1”的方式，它导致我的正则表达式失败，因为您必须转义所有正斜杠。我必须即时构建这个正则表达式，因为每个设备都会有一组不同的接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:21:14.023

这是 Visual Studio 自动为`\`您转义的功能。请看以下问题：[C# 中变量名中@ 字符的用途/含义是什么？](https://stackoverflow.com/q/91817/299327). 删除`@`符号 from`@"\"`会将字符串转换为`"\\"`.

# visual-studio - 如何在 Visual Studio 2010 中打开无法识别的版本 .sln 文件？

> ID：15390658
> 
> 赞同：0
> 
> 时间：2013-03-13T16:13:58.493
> 
> 标签：visual-studio

我是 Web 开发的新手，在尝试使用 Visual Studio 2010 运行我的 asp.net 项目时遇到了很多麻烦。请帮助。

我正在开发一个使用 SQL 2008 R2 引用数据库的 Web 开发项目。我在打开/关闭计算机上的功能、asp.net 和 .net 功能等方面遇到问题。我会收到一条错误消息，内容为“发生错误。并非所有功能都已成功更改。” 我尝试了几种解决方案来解决这个问题，但都没有奏效。我最终使用了我在网上找到的清理工具，它说作为最后的手段使用，这就是我所在的地方。

这是链接： [http ://cid-27e6a35d1a492af7.skydrive.live.com/self.aspx/Blog_Tools/dotnetfx_cleanup_tool.zip](http://cid-27e6a35d1a492af7.skydrive.live.com/self.aspx/Blog_Tools/dotnetfx_cleanup_tool.zip)

这最终解决了我的功能问题，但后来我无法使用 Visual Studio 2010。我收到错误“无法创建窗口”。为了解决这个问题，我最终重新安装了 Visual Studio 2010。现在我再次遇到了无法打开 asp.net 和 .net 功能的问题，并且出现了与以前相同的错误。

现在这不是我唯一的问题，我无法打开我的项目解决方案文件。当我打开 .sln 文件时出现 2 个错误“所选文件是解决方案文件，但由较新版本的应用程序创建，无法打开。” 和“系统找不到指定的文件。” 以该顺序。.sln 文件说它是一个无法识别的版本。

在尝试解决功能问题之前，我曾使用 Visual Studio 2010 处理过这个项目。我仍然可以打开我之前处理过的其他 .sln 文件，但它们不引用外部资源。我尝试在记事本中打开 .sln 文件并将版本从 12.00 更改为 11.00（在第 1 行）并将 #Visual Studio 2012 更改为 #Visual Studio 2010（在第 2 行）。我需要尽快完成这个项目。任何帮助都会很棒。

有人会帮我找出问题吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:16:58.960

您不一定必须使用现有的解决方案。解决方案文件只是引用一堆项目并将它们组合在一起。

我建议您创建一个新的空白解决方案，然后将所有现有项目添加到该解决方案中，假设您在添加项目时也没有类似的问题。

# php - 如何使用 javascript/PHP/CURL 序列化 .change 事件中的表单输入？

> ID：15390661
> 
> 赞同：0
> 
> 时间：2013-03-13T16:14:03.690
> 
> 标签：php, javascript, jquery, ajax, curl

我正在开发一个需要 Ajax 从数据库中获取数据并更新页面的小项目。对数据库的查询由用户动态构建，查询字符串像链一样构建。例如，链的第一项影响下一项和下一项，依此类推。因此，它创建了一个我无法提前“知道”的帖子变量列表。我认为这将是一件非常简单的事情，但事实证明并非如此。这是我的问题。

当我使用 .changed 事件并尝试在发布表单之前对其进行序列化。我得到的只是空字符串。我注意到，如果我对 post 变量进行硬编码，一切都会正常工作。有什么我想念的吗？.changed 没有序列化方法吗？

我也在使用 CURL 桥，因为带有数据的服务器在另一个域上。我不认为这会引起任何问题。我相信这与我的活动选择有关。

这是代码：

```
 $('#selector').change(function() {
        $.ajax({
            type: "post",
            dataType: 'json',
            url: "/pages/curlbridge.php",
            data: $("#queryform").serialize(), //"select=all&date=2013"
            success: function(data)
            {
                console.log(data);
                var resultset = data;

            }
        }); 
```

被要求附加 HTML。这只是一个简单的形式

```
 <form id="selector">
        Select: <input type="text" id="select" />
        Date: <input type="text" id="date" />
    </form>
    <br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:53:28.457

我同意@m1ket #queryform 不存在，尽管您不能在单个输入元素上使用 serialize() ，因此以下行不正确：

```
 data: $(this).serialize(), //"select=all&date=2013" 
```

也许你可以做的是（它以#selector 的形式获取所有数据）：

```
 data: $(this).closest('form').serialize(), //"select=all&date=2013" 
```

**编辑**

我的不好，我没有注意原始问题中发布的HTML

范围问题可能吗？这是否有效：

```
$('#selector').change(function() {
    var formData = $(this).serialize();
    $.ajax({
        type: "post",
        dataType: 'json',
        url: "/pages/curlbridge.php",
        data: formData, //"select=all&date=2013"
        success: function(data)
        {
            console.log(data);
            var resultset = data;

        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:37:56.877

$("#queryform") 不存在。你的 jQuery 应该是这样的：

```
$('#selector').change(function() {
    $.ajax({
        type: "post",
        dataType: 'json',
        url: "/pages/curlbridge.php",
        data: $(this).serialize(), //"select=all&date=2013"
        success: function(data)
        {
            console.log(data);
            var resultset = data;

        }
    });
}); 
```

此外，您是否使用 .change() 是因为您想在每次用户输入密钥时提交 AJAX 请求？

# visual-c++ - 阻止 .lib 中的 dllexport 函数从 DLL 导出

> ID：15390663
> 
> 赞同：4
> 
> 时间：2013-03-13T16:14:06.950
> 
> 标签：visual-c++, dll, static-libraries, dllexport, declspec

我有一个已编译成静态库的 axtls 库的副本。我将它链接到我正在构建的 DLL 中，并且某些 axtls 函数（`_MD5_Final`和`_MD5_Init`）`_MD5_Update`似乎正在从我的 DLL 中导出。我试图弄清楚如何阻止这种情况发生。

我的 DLL 是用一个`.def`没有列出任何这些函数的文件构建的。但是，它们都被声明为`__declspec(dllexport)`在 axtls 本身中，所以我怀疑这就是它们被导出的原因。

我想知道是否有办法阻止这些函数的导出，使用`.def`文件或类似的？我的 DLL 将用作公共 SDK 的一部分，因此公开这样的内部函数并不是特别好。

我怀疑`__declspec(dllexport)`从 axtls 的定义中删除 可能会解决我的问题，但如果可以避免的话，我宁愿不去修改上游代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T23:33:15.413

每当您有一个静态 LIB 文件并在使用此 LIB 文件构建的 DLL 中查看它的所有导出函数时，解决方案很简单：

重新编译静态 LIB 项目`__declspec(dllexport)`，然后重新编译 DLL 项目。

使用 DEF 文件，您无法做到这一点。

# c# - 将数据表绑定到日历？

> ID：15390664
> 
> 赞同：0
> 
> 时间：2013-03-13T16:14:09.037
> 
> 标签：c#, asp.net, calendar

只是想问一下如何将dataTable绑定到asp.net日历我尝试但在页面加载时失败了我创建sude代码来explane我想要的

```
 private void populateCalendar(DataTable dt)
    {

        foreach (var row in dt.Rows)
        {    //if dates are in dt chage background color to red 
            if(Calendar1.date)
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:30:42.140

据我了解您的问题，我尝试将您的查询解决为

步骤 1：在标记中拖放日历控件

```
 <asp:Calendar ID="Calendar1"  runat="server" ondayrender="Calendar1_DayRender"></asp:Calendar> 
```

第 2 步：在 Calendar1_DayRender 上

```
 protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
    {
            DataTable dt = new DataTable();
            dt.Columns.Add("Date", typeof(DateTime));
            dt.Rows.Add(DateTime.Today);
            dt.Rows.Add(DateTime.Today.AddDays(10));
            dt.Rows.Add(DateTime.Today.AddDays(12));
            dt.Rows.Add(DateTime.Today.AddDays(8));
            dt.Rows.Add(DateTime.Today.AddDays(6));
            dt.Rows.Add(DateTime.Today.AddDays(9));
            dt.Rows.Add(DateTime.Today.AddDays(2));
            dt.Rows.Add(DateTime.Today.AddDays(1));
            dt.Rows.Add(DateTime.Today.AddDays(3));
            DateTime date = e.Day.Date;
            var query = from row in dt.AsEnumerable()
                    where row.Field<DateTime>("date") == date
                   select row;
            foreach (var d in query)
            {
                e.Cell.BackColor = System.Drawing.Color.Red;
            }

    } 
```

注意：我的示例中使用的 DataTable 是日期的集合

# php - 替代时间戳以与 PHP 和 MySQL 一起使用？

> ID：15390665
> 
> 赞同：0
> 
> 时间：2013-03-13T16:14:09.823
> 
> 标签：php, mysql, timestamp

我正在寻找用于 PHP 和 MySQL 的 UNIX Timestap 的替代方案，因为我想开始一个项目，但我不知道如何存储过去和未来的日期。是否有易于使用的替代方案（“时间戳”必须用 PHP 计算）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:19:34.417

datetime() 字段类型并使用 NOW() 等，然后您可以利用 mysql 内置的 datediff 函数等和 date_add date_sub

所有这些都比内置的愚蠢的 php 时间/日期函数等要好得多，后者有 9000 万种做事方式，但没有一种能可靠地返回相同的结果。

# c - 为什么gets() 比scanf() 更危险？

> ID：15390675
> 
> 赞同：6
> 
> 时间：2013-03-13T16:14:36.487
> 
> 标签：c

在我看来，两者都有可能溢出缓冲区。然而，我被建议永远不要使用gets()，但仍然鼓励使用scanf()。

仅仅是因为 scanf() 中允许的格式参数还是有其他原因？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T16:19:28.473

该`gets`函数不受缓冲区溢出保护。

使用`scanf`格式字符串，您可以定义要从标准输入读取并存储在给定内存缓冲区中的字符串的最大长度。例如，`scanf("%10s\n", str);`将读取最多 10 个字符。`str`缓冲区应该有 11 个字节来存储 NULL 终止字符。

性能方面，如果您仅用于`scanf`解决 的缓冲区溢出问题`gets`，则更喜欢使用该`fgets`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:19:30.917

因为您可以输入比缓冲区大小更多的字符，gets() 会很高兴地允许它。此外，gets() 已被弃用（在 C11 中）。所以与 scanf() 的比较不再有效。此外 scanf() 在处理未格式化的数据时也有其自身的问题。

因此，更好的选择是[fgets()](http://linux.die.net/man/3/fgets)，然后根据您的需要对其进行处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:27:09.347

get() 的名义任务是从流中读取字符串。调用者告诉它在哪里放置传入的字符。但是gets() 不检查缓冲区空间。如果调用者提供了一个指向堆栈的指针，并且输入多于缓冲区空间，gets() 将覆盖堆栈。大多数系统很容易用更大的东西覆盖堆栈中间的现有条目，这也会覆盖相邻的条目。作恶者可以通过在参数字符串中存储正确的二进制模式来修改堆栈上的过程激活记录中的返回地址。这将不会将执行流程转移到它的来源，而是转移到一个特殊的指令序列，该指令序列调用 execv() 以用 shell 替换正在运行的映像。该外壳可以发出命令将病毒的副本拖到系统中。所以 gets() 是不安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T16:20:35.943

在`gets`输入格式错误的情况下，无法防止缓冲区溢出。`scanf`允许控制读取的数据量。

[如何防止scanf在C中导致缓冲区溢出？](https://stackoverflow.com/questions/1621394/how-to-prevent-scanf-causing-a-buffer-overflow-in-c)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T16:22:13.123

> 仍然鼓励使用 scanf()。

在 Google 上快速搜索“scanf security”会得到大约 212k 的结果。第一个是[维基百科](http://en.wikipedia.org/wiki/Scanf_format_string#Security)，它指出

> 使用`%s`没有长度说明符的占位符本质上是不安全的，并且可用于缓冲区溢出。

所以有足够的关于`scanf`网络安全的信息。不同之`gets`处在于它`scanf`具有安全用途，而使用`gets`实际上总是一个坏主意。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T16:17:13.953

因为没有办法防止缓冲区溢出。fgets 更安全，因为指定了最大缓冲区长度。

# .net - 使用复合键在模型中创建关系会引发“属性是键的一部分并且无法修改”异常

> ID：15390679
> 
> 赞同：3
> 
> 时间：2013-03-13T16:14:48.277
> 
> 标签：.net, entity-framework, ef-code-first, entity-framework-5

我在使用 EF 4.2 的项目中遇到以下问题。我使用 EF 5.0（在 .NET 4.0 上）制作了一个小型测试项目，以检查新版本中的问题是否相同 - 确实如此。

样品型号：

```
public class Order
{
    public int TenantId { get; set; }
    public int OrderId { get; set; }
    public string Name { get; set; }

    public int? CustomerId { get; set; }
    public Customer Customer { get; set; }
}

public class Customer
{
    public int TenantId { get; set; }
    public int CustomerId { get; set; }
    public string Name { get; set; }
} 
```

使用 Fluent API 的上下文和映射：

```
public class MyContext : DbContext
{
    public DbSet<Order> Orders { get; set; }
    public DbSet<Customer> Customers { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Order>()
            .HasKey(o => new { o.TenantId, o.OrderId });

        modelBuilder.Entity<Customer>()
            .HasKey(c => new { c.TenantId, c.CustomerId });

        modelBuilder.Entity<Order>()
            .HasOptional(o => o.Customer)
            .WithMany()
            .HasForeignKey(o => new { o.TenantId, o.CustomerId });
    }
} 
```

这里的重要部分是使用复合外键`Order`引用（可选）a ，其中第一部分同时是主键的一部分。`Customer``(TenantId, CustomerId)``TenantId``(TenantId, OrderId)`

我创建数据库和一个`Order`...

```
Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());
using (var ctx = new MyContext())
{
    var order = new Order { TenantId = 1, OrderId = 500, Name = "Test Order" };
    ctx.Orders.Add(order);
    ctx.SaveChanges();
} 
```

......它的工作原理。数据库模式看起来符合预期（与 principal`Customer`和 principal key`(TenantId, CustomerId)`以及dependent `Order`and foreign key的外键关系`(TenantId, CustomerId)`）。

然后我加载`Order`，创建一个新的`Customer`，将它分配给它并保存更改以更新和`Order`之间的关系：`Customer``Order`

```
using (var ctx = new MyContext())
{
    var order = ctx.Orders.Find(1, 500);
    var customer = new Customer { TenantId = 1, CustomerId = 1000,
                                  Name = "Test Customer" };

    order.Customer = customer;
    // order.TenantId is 1 and customer.TenantId is 1

    try
    {
        ctx.SaveChanges();
    }
    catch (Exception e)
    {
        throw;
    }
} 
```

打电话时`SaveChanges`出现`InvalidOperationException`异常：

> 属性“TenantId”是对象的关键信息的一部分，不能修改。

堆栈跟踪是：

```
at System.Data.Objects.EntityEntry.VerifyEntityValueIsEditable(StateManagerTypeMetadata typeMetadata, Int32 ordinal, String memberName)
at System.Data.Objects.EntityEntry.GetAndValidateChangeMemberInfo(String entityMemberName, Object complexObject, String complexObjectMemberName, StateManagerTypeMetadata& typeMetadata, String& changingMemberName, Object& changingObject)
at System.Data.Objects.EntityEntry.EntityMemberChanging(String entityMemberName, Object complexObject, String complexObjectMemberName)
at System.Data.Objects.EntityEntry.EntityMemberChanging(String entityMemberName)
at System.Data.Objects.ObjectStateEntry.System.Data.Objects.DataClasses.IEntityChangeTracker.EntityMemberChanging(String entityMemberName)
at System.Data.Objects.Internal.SnapshotChangeTrackingStrategy.SetCurrentValue(EntityEntry entry, StateManagerMemberMetadata member, Int32 ordinal, Object target, Object value)
at System.Data.Objects.Internal.EntityWrapper`1.SetCurrentValue(EntityEntry entry, StateManagerMemberMetadata member, Int32 ordinal, Object target, Object value)
at System.Data.Objects.DataClasses.EntityReference.UpdateForeignKeyValues(IEntityWrapper dependentEntity, IEntityWrapper principalEntity, Dictionary`2 changedFKs, Boolean forceChange)
at System.Data.Objects.DataClasses.RelatedEnd.Add(IEntityWrapper wrappedTarget, Boolean applyConstraints, Boolean addRelationshipAsUnchanged, Boolean relationshipAlreadyExists, Boolean allowModifyingOtherEndOfRelationship, Boolean forceForeignKeyChanges)
at System.Data.Objects.ObjectStateManager.PerformAdd(IEntityWrapper wrappedOwner, RelatedEnd relatedEnd, IEntityWrapper entityToAdd, Boolean isForeignKeyChange)
at System.Data.Objects.ObjectStateManager.PerformAdd(IList`1 entries)
at System.Data.Objects.ObjectStateManager.DetectChanges()
at System.Data.Objects.ObjectContext.DetectChanges()
at System.Data.Entity.Internal.InternalContext.DetectChanges(Boolean force)
at System.Data.Entity.Internal.InternalContext.GetStateEntries(Func`2 predicate)
at System.Data.Entity.Internal.InternalContext.GetStateEntries()
at System.Data.Entity.Infrastructure.DbChangeTracker.Entries()
at System.Data.Entity.DbContext.GetValidationErrors()
at System.Data.Entity.Internal.InternalContext.SaveChanges()
at System.Data.Entity.Internal.LazyInternalContext.SaveChanges()
at System.Data.Entity.DbContext.SaveChanges() 
```

我看不出我会在哪里更改“钥匙的一部分” `TenantId`。它的值是`1`in`Order`并且是`1`in `Customer`。

**如何使用上面的代码修改此关键属性，如何使更新正常工作？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:31:33.003

According to @Pawel's suggestion I've reported the problem as possible bug at Codeplex:

[http://entityframework.codeplex.com/workitem/955](http://entityframework.codeplex.com/workitem/955)

At the moment for the model in the question setting the foreign key properties directly instead of setting the navigation property works and doesn't throw an exception:

```
using (var ctx = new MyContext())
{
    var order = ctx.Orders.Find(1, 500);
    var customer = new Customer { TenantId = 1, CustomerId = 1000,
                                  Name = "Test Customer" };

    ctx.Customers.Add(customer);
    order.CustomerId = customer.CustomerId;

    try
    {
        ctx.SaveChanges();
        // No exception here
    }
    catch (Exception e)
    {
        throw;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:57:44.977

我简要地看了一下它，似乎是一个错误，EF“认为”订单上的 TenantId 发生了变化，而实际上它没有（即值是相同的）。您介意在[http://entityframework.codeplex.com/](http://entityframework.codeplex.com/)上为此提交错误吗？

# php - 在 Symfony2 中，\DateTime 是什么意思？

> ID：15390681
> 
> 赞同：9
> 
> 时间：2013-03-13T16:14:49.770
> 
> 标签：php, symfony

在 Symfony 2 中，这条线是什么意思：

```
$task->setDueDate(new \DateTime('tomorrow')); 
```

是什么意思`\DateTime`？可以从任何地方访问吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-13T16:29:19.247

首先，一个小的 FYI，这与 Symfony 没有任何关系——只是碰巧 Symfony2 使用了[namespaces](http://www.php.net/manual/en/language.namespaces.global.php)。

当不使用命名空间时，[datetime 类](http://php.net/manual/en/class.datetime.php)始终可以通过`new DateTime()`- 这是因为您已经在“根”命名空间中。但是，当您使用命名空间时，简单地使用`new DateTime()`不会起作用，因为它会在当前命名空间中查找该类。例子：

```
<?php

namespace MyApp\Component;

class Something
{
   function __construct()
   {
      $dt = new DateTime(); 
   }
} 
```

这将导致错误（例如`Class 'MyApp\Component\DateTime' not found in ...`），因为`MyApp\Component`命名空间中没有名为 DateTime 的类。

这就是您发现的原因`\DateTime()`，它告诉解释器在类的“根”(?) 命名空间中查找`DateTime`。

您还可以使用[`use`](http://php.net/manual/en/language.namespaces.importing.php)关键字来导入`DateTime`类 - 脚本的顶部看起来像 - 这允许您调用`new DateTime()`：

```
<?php

namespace MyApp\Component;

use \DateTime; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:17:24.000

见[http://www.php.net/manual/en/language.namespaces.global.php](http://www.php.net/manual/en/language.namespaces.global.php)

您还应该`namespace X\Y;`在文件顶部看到 a，这`\DateTime`意味着该类`DateTime`将从全局命名空间中获取，而不是`X\Y`.

即[这个 DateTime](http://php.net/manual/en/class.datetime.php)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T16:30:33.857

正如其他所说，它引用了全局命名空间，并且 DateTime 集成在 php 中，请看这里： [http](http://www.php.net/manual/en/class.datetime.php) ://www.php.net/manual/en/class.datetime.php 所以你不仅可以在 symfony 中使用它；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T16:16:19.120

\DateTime 是一个命名空间的 DateTime 类。您正在查看的文件顶部可能有一个使用 \X\X 减速的地方。\DateTime 应该可以在您可以声明使用 \X\X 的任何地方访问

# velocity - 在 Velocity 模板中引用重定向 URL

> ID：15390687
> 
> 赞同：0
> 
> 时间：2013-03-13T16:15:04.327
> 
> 标签：velocity

所以我试图在文档的头部呈现一个页面的 URL，以便与 rel=canonical 一起使用。这是在一个使用 Velocity 模板的网站上。我所说的内容类型具体是一个测验——它有多个页面，每个问题一个页面，更不用说反映用户正确答案的不同 URL 参数了。

该站点已制定重定向规则以生成测验的 URL。它们看起来像这样：

```
<rule>
<from>^/([a-zA-Z_0-9\-]*)/(quiz_[a-zA-Z_0-9\-]*)/(\d*).htm$</from>
<to>/contentdata/quiz.htm?path=/$1/$2.xml&amp;qnum=$3</to>
</rule> 
```

所有这些都是为了解释我正在使用这个 Velocity 代码：

```
<link rel="canonical" href="$link.self" /> 
```

在此页面的模板上：

[http://example.com/fun/quiz_best_quiz_ever/1.htm](http://example.com/fun/quiz_best_quiz_ever/1.htm)

这会产生这个 HTML：

```
<link rel="canonical" href="/contentdata/quiz.htm" /> 
```

但我*想要*的是*这个*HTML：

```
<link rel="canonical" href="http://example.com/fun/quiz_best_quiz_ever/" /> 
```

够清楚吗？我知道这很复杂，但有人知道我如何能够完成它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T21:09:05.390

您的 Velocity 模板需要知道 URL 的其余部分是什么。你没有解释你是如何渲染速度的。是春天吗？速度 Servlet？其他系统？

基本思想是您需要另一个名为 $baseUrl 的引用。在合并 Velocity 模板之前在你的 java 代码中设置它

（在 Java 中）

```
context.put("baseUrl", "http://example.com/fun/quiz_best_quiz_ever"); 
```

（速度）

```
<link rel="canonical" href="$baseUrl/$link.self" /> 
```

# ios - iOS 显示带有运行时间的 UIAlertView

> ID：15390690
> 
> 赞同：0
> 
> 时间：2013-03-13T16:15:07.773
> 
> 标签：ios, uialertview, nstimer

我想在一段时间没有用户活动的情况下从我的应用程序中注销。我找到了一个如何做到这一点的例子。当不活动计时器用完时，我想显示一个弹出窗口，说“*在 XX 秒内注销*”，其中秒数将更新 - 正在运行：60、59、58 ...然后它们达到 0 我会注销用户（弹出窗口也有一个“取消注销”按钮，我认为这很容易实现。）我试图弄清楚是否有一种简单的方法可以创建这样一个弹出窗口 - 在我看来一个相当普遍的想法，但到目前为止我找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:46:06.110

将两个属性添加到您的私有接口：

```
@interface MyViewController ()
@property(nonatomic, strong) UIAlertView *logoutAlertView;
@property(nonatomic) NSUInteger logoutTimeRemaining;
@end 
```

现在，当您显示警报时，请执行以下操作：

```
self.logoutAlertView = [[UIAlertView alloc] initWithTitle:@"Title"
                                                  message:@"Logging out in 60 seconds"
                                                 delegate:self
                                        cancelButtonTitle:@"Dismiss"
                                        otherButtonTitles:nil];
[self.logoutAlertView show];

self.logoutTimeRemaining = 60;

[NSTimer scheduledTimerWithTimeInterval:1
                                 target:self
                               selector:@selector(updateAlert:)
                               userInfo:nil
                                repeats:YES]; 
```

您的`updateAlert:`方法如下所示：

```
- (void)updateAlert:(NSTimer *)timer {
    self.logoutTimeRemaining--;
    self.logoutAlertView.message = [NSString stringWithFormat:@"Logging out in %d seconds", self.logoutTimeRemaining];

    if (self.logoutTimeRemaining == 0) {
        // actually log out
        [timer invalidate];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:17:21.960

`UIAlertView`在这种情况下 实现自定义是个好主意，并`UILabel`在计时器更改其值的情况下添加

[按照我在此线程](https://stackoverflow.com/questions/15228088/customize-uialertbutton-through-layoutsubviews-uialertbutton-class-not-found/15228669#15228669)上的回答，只需添加`UILabel`而不是`UIButton`针对您的情况。

# ios - 单模型在 RestKit 和其他类之间通信，不使用单例时请求失败

> ID：15390693
> 
> 赞同：0
> 
> 时间：2013-03-13T16:15:12.457
> 
> 标签：ios, objective-c, singleton, restkit

在我的项目中，我有一个单例模型类，`APIModel`它处理对 API 的所有必要调用。我`RestKit`经常使用和设置 HTTP 标头。

这是我的问题：

```
AModel
- (void)makeRequest {
    [APIModel apiObject].getSpecificDataDelegate = self;
    [[APIModel apiObject] loadSpecificData];
}

BModel
- (void)makeRequest {
    [APIModel apiObject].getSpecificDataDelegate = self; // removes AModel as delegate so it ends up receiving both responses
    [[APIModel apiObject] loadSpecificData];
} 
```

`AModel`将自己设置为委托，然后`BModel`将自己设置为委托。`BModel`最终收到两个 API 响应。

我解决这个问题的解决方案是`APIModel`为每个需要它的类启动不同的实例。

```
- (void)makeRequest {
    self.apiObject.getSpecificDataDelegate = self;
    [self.apiObject loadSpecificData];
}

- (APIModel *)apiObject {
    if (!_apiObject) apiObject = [[APIModel alloc] init]; // classes own instance
    return _apiObject;
} 
```

出于某种原因，尽管所有这些`APIModel`实例都没有适当地将 HTTP 标头附加到请求中，所以它们在 API 端都失败了。任何仍在使用单例对象的模型仍然可以正常工作。

我认为这是 RKClient 的单例（sharedClient）的问题，但不确定。它不是 nil，我可以设置 HTTP 标头甚至将它们打印出来，但我的 API 不断抛出异常。当不使用单例时，HTTP 标头无法将自己附加到请求中是否有任何明显的原因？**我可以利用不同的或更好的设计模式吗？**

我发现[了这个问题](https://stackoverflow.com/questions/8193089/what-will-be-if-i-call-simultaneously-rkclient-sharedclient-getfoo-xml-del)，虽然很有见地，但它与我的问题并不完全相关，但有没有办法做类似的事情？

我考虑过使用`NSNotificationCenter`，但随后需要传递更多信息以允许`AModel`并`BModel`知道哪些数据适合他们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:39:47.120

具有单个代表的单身人士 = 糟糕的设计。

如您所见，您几乎立即遇到所有权问题。

NSNotificationCenter 允许您通过通知传递尽可能多的信息。拥有一个可以让多个对象触发请求的单例很好，但是您需要记住，与单例交互的任何一个对象都可能不是唯一的。

做这样的事情：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(requestSucceeded:) name:RequestSucceededNotification object:nil];

self.someID = @"Some_ID_You_Have";
//Doesn't have to be an ID, but you need a way to differentiate the notifications
[[APIModel apiObject] loadSpecificDataWithID:self.someID]; 
```

然后从您的 APIModel 类中，一旦您拥有数据，您就可以执行以下操作：

```
 [[NSNotificationCenter defaultCenter] postNotificationName:RequestSucceededNotification object:theID userInfo:@{@"data" : data}]; 
```

最后在 AModel 和 BModel 中

```
- (void)requestSucceeded:(NSNotification *)notification
{
    if ([self.someID isEqualToString:[notification object]] == YES) {

        //Grab your data and do what you need to with it here
        NSData *data = [[notification userInfo] objectForKey:@"data"];
   }
} 
```

# mysql - MySQL 中没有默认值 Vs NULL Vs 0 作为文本和整数字段的默认值

> ID：15390697
> 
> 赞同：2
> 
> 时间：2013-03-13T16:15:17.827
> 
> 标签：mysql, sql, database, database-design

VARCHAR/TEXT 的正确方法是什么？

在 Heidi SQL 和可能的 phpMyAdmin 中，提供了这些选项：

1.  无默认值
2.  自定义（预定义为零，如“0”）
3.  无效的

并且还有时间戳，自动增量。但现在这些都不重要了。

### 问题

*   在 MySQL 中应该从 VARCHAR 和 TEXT 列的这 3 个选项中选择哪一个？
*   INT 类型的列的哪个选项？

这是我的选项的屏幕截图：

![在此处输入图像描述](../Images/c3f8d847b5c5a2f3c9e7fbc39d7d90bd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:19:00.107

我使用这个简单的经验法则：

我`NOT NULL`用于任何表明系统中没有提供值的逻辑错误的字段。

如果要区分“未提供值”和“提供了值，但为空”，那么我使用的字段可能默认为`NULL`. 默认为`""`（或`0`对于整数字段）是不好的，因为它会阻止您进行区分。

# c++ - C++11 字符串初始化

> ID：15390699
> 
> 赞同：7
> 
> 时间：2013-03-13T16:15:21.327
> 
> 标签：c++, string, c++11

我需要创建一个 100 个*字符*的字符串。

为什么会出现以下

```
std::string myString = {100, 'A'}; 
```

给出不同的结果

```
std::string myString(100, 'A'); 
```

?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T16:19:29.253

```
std::string myString = {100, 'A'}; 
```

是使用初始化列表进行初始化。它创建一个包含 2 个字符的字符串：一个带有代码 100 和 'A'

```
std::string myString(100, 'A'); 
```

调用以下构造函数：

```
string (size_t n, char c); 
```

它创建了一个包含 100 个“A”的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:17:57.757

第一个将其初始化为 100 的值，`A`第二个调用构造函数重载`std::string`.

# angularjs - Object.observe 会显着提升 Angularjs 吗？

> ID：15390703
> 
> 赞同：9
> 
> 时间：2013-03-13T16:15:27.273
> 
> 标签：angularjs, object.observe

现在，Angular 在几千个对象之后速度变慢，这阻止了我们构建电子表格或康威生命游戏之类的东西。

一旦 Object.observe 实现（在很远很远的将来），Angular 会成为可能吗？还是 DOM 操作会成为瓶颈？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T15:25:30.933

答案是肯定的。在这里结帐 [https://mail.mozilla.org/pipermail/es-discuss/2012-September/024978.html](https://mail.mozilla.org/pipermail/es-discuss/2012-September/024978.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:25:29.290

如果您现在有兴趣尝试解决这样的问题，我建议您观看去年 AngularJS NYC Meetup 上的这段视频，该视频讨论了在尝试实现类似场景时遇到的性能问题。

[AngularJS NYC Meetup - dfa-stable-repeat 和原型设计 (2012-11-20)](http://www.youtube.com/watch?v=g8xkax9Z_sQ)

# liferay - 如何在 Liferay 中嵌入 WebContent

> ID：15390704
> 
> 赞同：0
> 
> 时间：2013-03-13T16:15:30.393
> 
> 标签：liferay, velocity

是否可以在模板速度中嵌入 Web 内容？我有两个网页内容，我想将两者合并为一个。

我试过这个：

```
#set ($webcontent-id = "13054")
#set ($webcontent=$journalContentUtil.getContent($group_id, $webcontent-id,null,"$locale",$theme_display))
<div> $webcontent </div>
#set ($webcontent-id = "13065")
#set ($webcontent=$journalContentUtil.getContent($group_id, $webcontent-id,null,"$locale",$theme_display)) 
<div> $webcontent </div> 
```

但是，它显示变量。我想我没有在网页内容中访问该服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:57:16.413

Web 内容模板无法直接访问 ThemeDisplay。他们可以通过 $request 映射访问请求信息，其中包含来自 ThemeDisplay 的变量等。[这个 wiki 页面](http://www.liferay.com/community/wiki/-/wiki/Main/CMS+Template+%28Velocity%29#section-CMS+Template+%28Velocity%29-Velocity+Variables)列出了可以从模板中使用的变量。

此外，当从速度模板调用 Liferay 服务时，您需要确保所有参数都具有正确的类型。您可以使用 $getterUtil 来完成此操作，例如将 String 转换为 Long。

这是您的示例的修订版：

```
#set ($group_id = $getterUtil.getLong($request.theme-display.scope-group-id))
#set ($webcontent-id = "58007")
#set ($webcontent=$journalContentUtil.getContent($group_id, $webcontent-id, "", "$locale", ""))
$webcontent 
```

# email - 在邮件中复制多行。VB中的正文

> ID：15390708
> 
> 赞同：1
> 
> 时间：2013-03-13T16:15:34.700
> 
> 标签：email, vba

我想使用 VB 在邮件正文中添加多行。在打开和格式化邮件的代码下方：

```
With Workbooks("HEelo world.xlsx").Worksheets("Hello")
    mail.To = .Range(.Range("F:F").Find("Address1").Address).Offset(0, 1)
    mail.Cc = .Range(.Range("F:F").Find("Address2").Address).Offset(0, 1)
    mail.Subject = .Range(.Range("F:F").Find("Object").Address).Offset(0, 1)
    mail.Body = .Range(.Range("F:F").Find("Body").Address).Offset(0, 1)
    mail.Body = ....
End With 
```

添加多行的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:40:44.820

[命名 Excel 范围的傻瓜指南](http://www.dummies.com/how-to/content/how-to-name-a-cell-or-range-in-excel-2010.html "命名 Excel 范围的傻瓜指南")

使用我提供的链接来了解如何将范围修改为具有*Name*。您可以将范围定位为 vba 中的命名引用。对于此示例，我们将包含邮件正文值的单元格区域（例如 B4:B8）称为“BodyValue”

```
Dim strBody As String
    strBody = ""
    For Each cl in Range("BodyValue").Cells
        strBody = cl.Value & vbCrLf
    Next
mail.Body = strBody 
```

您也可以对电子邮件中使用的所有部分执行此操作，因此不要使用偏移量，而是命名您的单元格或范围并引用 VBA 中的名称。如果您在工作表的任何部分添加行或列，这也将避免发生错误，因为命名单元格的名称与工作表中地址的更改无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:37:00.260

我发现这应该可行：

```
Dim strBody As String
        strBody = .Range(.Range("B:B").Find("text1").Address).Offset(0, 1) & vbCrLf _
        & .Range(.Range("B:B").Find("text2").Address).Offset(0, 1) & vbCrLf _
        & .Range(.Range("B:B").Find("text3").Address).Offset(0, 1) & vbCrLf _
        & .Range(.Range("B:B").Find("text4").Address).Offset(0, 1) & vbCrLf 
mail.Body = strBody 
```

# c# - 项目之间的 Type.GetType() 可见性问题 (Visual C#)

> ID：15390711
> 
> 赞同：1
> 
> 时间：2013-03-13T16:15:50.133
> 
> 标签：c#, reflection, null, project, gettype

我遇到了一个特殊的问题。我正在开发一个动态工厂项目，我的目的是能够基于 XML 文件创建新对象。我的问题是这样的：

1.  我有一个单独的项目，用于我所在工厂的基类

    ```
    public abstract class DynamicContentFactory<T, Params> where T: class where Params: DynamicParameters 
    ```

2.  在这个抽象类中，我有一个静态方法`Create`如下

    ```
    public static T Create(Params data) 
    ```

3.  `Params`仅包含一个字符串作为默认值，称为`Type`. 我想将对象的创建限制在与基类相同的命名空间中`T`，所以我执行以下操作：

    ```
    string namespaceStr = typeof(T).ToString();
    namespaceStr = namespaceStr.Substring(0, namespaceStr.LastIndexOf('.') + 1);

    Type type = Type.GetType(namespaceStr + data.Type); 
    ```

4.  在我的主要项目中，我有一个特定的工厂类

    ```
    public class ItemFactory : DynamicContent.DynamicContentFactory<ItemFactory, ItemParameters>
    {
    } 
    ```

5.  问题是当我打电话时`ItemFactory.Create`，`Type.GetType`回报`null`。`ItemFactory`与我希望它创建的 Items 位于同一命名空间中，但基类位于另一个命名空间中。有没有办法解决？

6.  我尝试将参数更改为`Type.GetType()`to`typeof(T).ToString()`以测试它是否可以找到它并且它也没有找到它。我无法创建从我的`DynamicContent`项目到我的主项目的链接，因为指向另一种方式的链接已经存在。我觉得它甚至找不到它初始化的类的类型是愚蠢的。

所以我的问题是：解决这个问题的最佳方法是什么？我宁愿将我`DynamicContent`的项目作为一个单独的库维护在一个单独的项目中，而不必将它包含在我的主项目中。有没有办法让它找到类，或者我必须为我想用它初始化的类型创建第三个项目，以便能够从主项目和`DynamicContent`项目中引用它？

BR,

-萨米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:34:02.970

您正在观察的行为是预期的 - [Type.GetType](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)

> typeName - 要获取的类型的**程序集限定名称**。请参阅 AssemblyQualifiedName。如果该类型在当前执行的程序集中或在 Mscorlib.dll 中，则提供由其命名空间限定的类型名称就足够了。

Note that your current code works because it falls under "currently executing assembly" portion of the specified behavior where just namespace+name is enough.

*   You should specify full name of the type when requesting it, but you can check what namespace the type will use.
*   You can switch to [Assembly.GetType](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettype%28v=vs.110%29.aspx) instead of `Type.GetType` and use `T`'s assembly to lookup types you want to create.
*   Alternative is to scan all loaded assemblies for type you want, but it may be not enough if the type is coming from not-yet-loaded assembly.

Remainder: namespace names in .Net don't mean much - they are convention to make code more readable, but there is no particular link between assembly and namespaces that are implemented in it.

# javascript - 多表查询结果为非数组数组

> ID：15390714
> 
> 赞同：0
> 
> 时间：2013-03-13T16:15:57.653
> 
> 标签：javascript, arrays, breeze

多表查询的结果数据（参见[http://www.breezejs.com/documentation/query-examples#Lookups](http://www.breezejs.com/documentation/query-examples#Lookups)）并不完全符合我的预期。我期望一个数组（每个表的项目）数组（实体字段）。但是，我得到的是一个排序数组。外部数组 - 正如预期的那样 - 为每个表填充了一个项目。但是，内部对象的类型不是数组。他们确实有成员命名为索引项 (0, 1, 2, ...)，但由于它不是数组，所以我不能使用 length 或 forEach。这是微风中的错误吗？

请注意，当我从一个表中查询项目时，结果被键入为数组（实体字段）。

这是我的服务器代码：

```
[HttpGet]
public object _Combo()
{
   return new IOrderedQueryable[] { _contextProvider.Context.Company, _contextProvider.Context.Project, _contextProvider.Context.ProjectArea };
} 
```

这是我的客户代码：

```
entityManager.executeQuery(breeze.EntityQuery.from("_Combo"))
    .then(function (data) {
        var companies = data.results[0];
        //companies is not an array, but does have numbered members!
    }).fail(queryFailed); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:37:58.310

我不完全确定您希望通过查看“_Combo”代码返回什么“形状”？但如果它是包含公司、项目和 ProjectAreas 的匿名类型，那么以下应该可以工作。除非您计划在服务器上应用客户端过滤器，否则您不需要返回 IQueryable。

```
[HttpGet]
public object _Combo()
{
    return new { Companies = ContextProvider.Context.Company.ToList(), 
                 Projects = ContextProvider.Context.Project.ToList(),  
                 ProjectAreas = ContextProvider.Context.ProjectAreas.ToList() } 

} 
```

这将返回一个单元素数组，其中一项包含具有三个属性的对象：“Companies”、“Projects”和“ProjectAreas”。每一个都是对应实体的数组。所有这些实体都将被添加到 entityManager。希望这可以帮助。

# c# - 具有动态列数的平面文件规范化

> ID：15390719
> 
> 赞同：4
> 
> 时间：2013-03-13T16:16:05.883
> 
> 标签：c#, parsing, text, formatting, flat-file

我有一个带有不幸动态列结构的平面文件。值层次结构中有一个值，层次结构中的每一层都有自己的列。例如，我的平面文件可能类似于：

```
StatisticID|FileId|Tier0ObjectId|Tier1ObjectId|Tier2ObjectId|Tier3ObjectId|Status
1234|7890|abcd|efgh|ijkl|mnop|Pending
... 
```

第二天相同的提要可能如下所示：

```
StatisticID|FileId|Tier0ObjectId|Tier1ObjectId|Tier2ObjectId|Status
1234|7890|abcd|efgh|ijkl|Complete
... 
```

问题是，我不太关心所有层级；我只关心最后（底部）层的 id，以及不属于层列的所有其他行数据。我需要将提要标准化为类似的东西以注入关系数据库：

```
StatisticID|FileId|ObjectId|Status
1234|7890|ijkl|Complete
... 
```

确定最后一层对象 id 并按描述组织数据的有效、易于阅读的机制是什么？我所做的每一次尝试都让我感觉很笨拙。

我做过的一些事情：

*   我试图检查正则表达式模式的列名，识别分层的列，按名称降序排列，然后选择第一条记录......但是我这样丢失了序号列号，所以看起来不像好的。
*   我已将我想要的列放入`IDictionary<string, int>`要引用的对象中，但是再次可靠地收集动态列的序号是一个问题，而且看起来这将是相当低效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:30:53.490

几年前我遇到了一个类似的问题。我使用字典来映射列，它并不漂亮，但它有效。

首先制作一个字典：

```
private Dictionary<int, int> GetColumnDictionary(string headerLine)
    {
        Dictionary<int, int> columnDictionary = new Dictionary<int, int>();
        List<string> columnNames = headerLine.Split('|').ToList();

        string maxTierObjectColumnName = GetMaxTierObjectColumnName(columnNames);
        for (int index = 0; index < columnNames.Count; index++)
        {
            if (columnNames[index] == "StatisticID")
            {
                columnDictionary.Add(0, index);
            }

            if (columnNames[index] == "FileId")
            {
                columnDictionary.Add(1, index);
            }

            if (columnNames[index] == maxTierObjectColumnName)
            {
                columnDictionary.Add(2, index);
            }

            if (columnNames[index] == "Status")
            {
                columnDictionary.Add(3, index);
            }
        }

        return columnDictionary;
    }

    private string GetMaxTierObjectColumnName(List<string> columnNames)
    {
        // Edit this function if Tier ObjectId is greater then 9
        var maxTierObjectColumnName = columnNames.Where(c => c.Contains("Tier") && c.Contains("Object")).OrderBy(c => c).Last();

        return maxTierObjectColumnName;
    } 
```

之后它只是通过文件运行：

```
private List<DataObject> ParseFile(string fileName)
    {
        StreamReader streamReader = new StreamReader(fileName);

        string headerLine = streamReader.ReadLine();
        Dictionary<int, int> columnDictionary = this.GetColumnDictionary(headerLine);

        string line;
        List<DataObject> dataObjects = new List<DataObject>();
        while ((line = streamReader.ReadLine()) != null)
        {
            var lineValues = line.Split('|');

            string statId = lineValues[columnDictionary[0]];
            dataObjects.Add(
                new DataObject()
                {
                    StatisticId = lineValues[columnDictionary[0]],
                    FileId = lineValues[columnDictionary[1]],
                    ObjectId = lineValues[columnDictionary[2]],
                    Status = lineValues[columnDictionary[3]]
                }
            );
        }

        return dataObjects;
    } 
```

我希望这会有所帮助（甚至一点点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:21:00.453

就个人而言，我不会尝试重新格式化您的文件。我认为最简单的方法是从前面*和*后面解析每一行。例如：

```
itemArray = getMyItems();
statisticId = itemArray[0];
fileId = itemArray[1];
//and so on for the rest of your pre-tier columns

//Then get the second to last column which will be the last tier
lastTierId = itemArray[itemArray.length -1]; 
```

由于您知道最后一层将始终排在最后，因此您可以从最后开始并继续前进。这似乎比尝试重新格式化数据文件要容易得多。

如果你真的想创建一个新文件，你可以使用这种方法来获取你想要写出的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:34:46.440

我不知道 C# 语法，但大致如下：

1.  用 | 分割线 作为分隔符
2.  获取部分 [0]、[1]、[length - 2] 和 [length - 1]
3.  将零件传递给数据库处理代码

# c# - Kinect：以毫米为单位转换 Joint.Position.Z

> ID：15390720
> 
> 赞同：4
> 
> 时间：2013-03-13T16:16:08.913
> 
> 标签：c#, kinect, kinect-sdk

我知道如何以像素为单位转换从`Joint.Position.X`和获得的值`Joint.Position.Y`。有一个我这样做的例子：

```
void kinectSensor_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
    {
        using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
        {
            if (skeletonFrame != null)
            {
                Skeleton[] skeletonData = new Skeleton[skeletonFrame.SkeletonArrayLength]; //conterrà tutti gli skeleton

                skeletonFrame.CopySkeletonDataTo(skeletonData);

                Skeleton playerSkeleton = (from s in skeletonData where s.TrackingState == SkeletonTrackingState.Tracked select s).FirstOrDefault();

                if (playerSkeleton != null)
                {
                    Joint rightHand = playerSkeleton.Joints[JointType.HandRight];
                    Joint leftHand = playerSkeleton.Joints[JointType.HandLeft];

                    //EDIT: The following formulas used to convert X and Y coordinates in pixels are wrong.
                    //Please, see the answer for details
                    rightHandPosition = new float[] { (((0.5f * rightHand.Position.X) + 0.5f) * (640)), (((-0.5f * rightHand.Position.Y) + 0.5f) * (480)) };
                    leftHandPosition = new float[] { (((0.5f * leftHand.Position.X) + 0.5f) * (640)), (((-0.5f * leftHand.Position.Y) + 0.5f) * (480)), leftHand.Position.Z };
                }
             }
         }
    } 
```

现在，我想做的是使用`Joint.Depth.Z`. 参考前面的例子，我想获得两个 3D 数组`rightHandPosition`和`leftHandPosition`，最后一个坐标代表深度。什么是正确的公式来转换从相应的值返回`rightHand.Position.Z`的`leftHand.Position.Z`值（以毫米为单位）？

**编辑：上面代码中用于以像素为单位转换 X 和 Y 坐标的公式是错误的。请阅读我的以下答案。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T20:16:37.813

我已经意识到`Joint.Position.X`并且`Joint.Position.Y`不限于-1和1之间。这个错误的信息在互联网上非常分散，这就是我回复自己的原因。

正如[Evil Closet Monkey](https://stackoverflow.com/users/411063/evil-closet-monkey)所提到的，在上面的评论中，[官方文档](http://msdn.microsoft.com/en-us/library/hh973078.aspx)说“**骨架空间坐标以米表示**”。Kinect for Windows 团队的成员也在[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/kinectsdknuiapi/thread/9725f685-5839-43db-b13d-aa9afcf1b7a5)中证实了这一点。

这意味着为了转换用 和 获得的 X、Y 和 Z 坐标，`Joint.Position.X`以`Joint.Position.Y`毫米`Joint.Position.Z`为单位，您只需将这些值除以 1000（或者您也可以以米为单位工作，无需转换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-25T04:55:19.063

如前所述，位置以米为单位。只需乘以 1000 即可将米换算为毫米。[![根据谷歌转换](../Images/14755f6596087c5d25a30f7253f589ed.png)](https://i.stack.imgur.com/oYKn0.png)

# wso2 - WSO2 CEP siddhi 过滤器问题

> ID：15390724
> 
> 赞同：0
> 
> 时间：2013-03-13T16:16:26.060
> 
> 标签：wso2, complex-event-processing, siddhi

我正在尝试使用 siddhi 查询语言，但似乎我在滥用它。

我有一些带有以下 streamdef 的事件：

```
{  'name':'eu.ima.stat.events',  'version':'1.1.0',  'nickName': 'Flux event Information',  'description': 'Details of Analytics Statistics',  'metaData':[          {name:'HostIP','type':'STRING'}  ],  'correlationData':[          {name:'ProcessType','type':'STRING'},          {name:'Flux','type':'STRING'},          {name:'ReferenceId','type':'STRING'}  ],  'payloadData':[          {'name':'Timestamp','type':'STRING'},          {'name':'EventCode','type':'STRING'},          {'name':'Type','type':'STRING'},          {'name':'EventInfo','type':'STRING'}  ]} 
```

我只是想使用这样的查询过滤具有相同进程值和相同通量值的事件：

```
from myEventStream[processus == 'SomeName' and flux == 'someOtherName' ]
insert into someStream
processus, flux, timestamp 
```

每当我尝试此操作时，都不会生成任何输出。当我摆脱过滤器

```
from myEventStream
insert into someStream
processus, flux, timestamp 
```

我所有的事件都在输出中。

我的查询有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:40:33.340

我可以在您的查询中看到一些拼写错误...在过滤器中，您使用了一个名为“processus”的变量名，它不在事件流中。这就是为什么这个查询没有给出任何输出。当您在 WSO2 CEP 中创建存储桶时，请确保存储桶在 CEP 服务器中正确部署并在管理控制台中检查。（CEP 存储桶 --> 列表）。

就你的情况。由于配置错误，bucket 将不会被部署，并且在 CEP 服务器运行的终端中也会打印错误消息。更正此错误后，您的查询将完美运行，没有任何问题...

问候，莫汉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T01:32:38.520

考虑到 Mohan 的回答，重命名“ProcessType”或像这样更改您的查询

```
from myEventStream[ ProcessType == 'SomeName' and flux == 'someOtherName' ]
insert into someStream
ProcessType, flux, timestamp 
```

# c# - PasswordBox 和 MVVM

> ID：15390727
> 
> 赞同：19
> 
> 时间：2013-03-13T16:16:45.450
> 
> 标签：c#, wpf, security, mvvm, passwordbox

我们有以下场景：

1.  用户可以在其中放置密码的 MVVM 用户界面（实际上是一个`PasswordBox`）
2.  应该做一些工作的服务器
3.  服务器连接到一些需要认证的数据库

我已经[在 MVVM 中的 PasswordBox 上阅读了这个问题](https://stackoverflow.com/questions/1483892/how-to-bind-to-a-passwordbox-in-mvvm)

但是怎么做没有答案！只是“永远不要那样做”。

传递密码的正确方法是什么？如何解决安全问题？

没有正确的方法，`Binding`并且`PasswordBox`密码不应存储在某个地方，好吧。

那么，做这些事情的 MVVM 方式是什么？

即使模式被打破，有没有什么好的方法可以实现这样的事情？

想过`Func<string>`要找回它，但是如果没有 Binding 这会变得一团糟......

**从（希望加密的）密码存储中初始化 PasswordBox 的更新** 相同。这不是打破 MVVM 模式吗？用户不想在每次启动应用程序或想使用我相信的数据库时输入密码。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-13T16:41:40.630

就我个人而言，我只是将整个`PasswordBox`控件传递给我的 LoginCommand

我知道它破坏了 MVVM，因为 ViewModel 层现在引用了一个特定于视图的对象，但我认为在这种特定情况下它是可以的。

所以我可能有如下所示的 XAML：

```
<Button Content="Login" 
        Command="{Binding LoginCommand}" 
        CommandParameter="{Binding ElementName=MyPasswordBox}" /> 
```

并且`LoginCommand`做这样的事情：

```
private void Login(object obj)
{
    PasswordBox pwBox = obj as PasswordBox;

    SomeBlackBoxClass.ValidatePassword(UserName, pwBox.Password);
} 
```

我想您也可以对该值运行某种加密算法，并将该值的哈希值与用户密码的哈希值进行比较

```
private void Login(object obj)
{
    PasswordBox pwBox = obj as PasswordBox;
    var encryptedPassword = SomeLibrary.EncryptValue(pwBox.Password, someKey);

    if (encryptedPassword == User.EncryptedPassword)
        // Success
} 
```

我不是`PasswordBox`控制或安全方面的专家，但我知道您不希望将用户密码以纯文本形式存储在应用程序内存中的任何位置

（从技术上讲，它以纯文本形式存储`PasswordBox.Password`- 如果需要，您可以使用[Snoop](http://snoopwpf.codeplex.com/)之类的东西来验证这一点 - 但通常 PasswordBox 存在的时间不会超过用户登录所需的时间，而实际的“密码”只是文本由用户输入，可能正确也可能不正确。键盘记录器可以为您提供相同的信息。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-23T23:32:53.900

我通过创建一个公开可以绑定的 SecureString 依赖属性的 UserControl 解决了这个问题。此方法始终将密码保存在 SecureString 中，并且不会“破坏” MVVM。

## 用户控制

XAML

```
<UserControl x:Class="Example.PasswordUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         mc:Ignorable="d"
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid>       
        <PasswordBox Name="PasswordBox" />
    </Grid>
</UserControl> 
```

CS

```
public partial class PasswordUserControl : UserControl
{
    public SecureString Password
    {
        get { return (SecureString) GetValue(PasswordProperty); }
        set { SetValue(PasswordProperty, value); }
    }
    public static readonly DependencyProperty PasswordProperty =
        DependencyProperty.Register("Password", typeof(SecureString), typeof(UserCredentialsInputControl),
            new PropertyMetadata(default(SecureString)));

    public PasswordUserControl()
    {
        InitializeComponent();

        // Update DependencyProperty whenever the password changes
        PasswordBox.PasswordChanged += (sender, args) => {
            Password = ((PasswordBox) sender).SecurePassword;
        };
    }
} 
```

## 示例用法

使用控件非常简单，只需将控件上的密码 DependencyProperty 绑定到 ViewModel 上的密码属性即可。ViewModel 的 Password 属性应该是 SecureString。

```
<controls:PasswordUserControl Password="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

将绑定上的 Mode 和 UpdateSource 触发器更改为最适合您的。

如果您需要纯文本密码，以下页面描述了在 SecureString 和字符串之间转换的正确方法：http: [//blogs.msdn.com/b/fpintos/archive/2009/06/12/how-to-properly -convert-securestring-to-string.aspx](http://blogs.msdn.com/b/fpintos/archive/2009/06/12/how-to-properly-convert-securestring-to-string.aspx)。当然你不应该存储纯文本字符串......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:03:10.153

取决于您对 mvvm 的理解（以我的方式，在某些情况下允许使用后面的代码）

所以我创建了一个 PasswordBox 和一个名为 TextBlock

Xaml

```
<PasswordBox Height="23" Width="156" PasswordChar="*" PasswordChanged="pwBoxUser_PasswordChanged"/>
<TextBlock Height="1" Width="1" Name="MD5pw" Text="{Binding Passwort, UpdateSourceTrigger=PropertyChanged, Mode=OneWayToSource}" VerticalAlignment="Top" /> 
```

代码隐藏

```
 private void pwBoxUser_PasswordChanged(object sender, RoutedEventArgs e)
    {
        var pBox =sender as PasswordBox;
        string blank=pBox.Password;

        //to crypt my blank Password
        var sMD5 = myMD5.toMD5(blank); //implement your crypt logic here
        blank ="";

        MD5pw.Text = sMD5;
    } 
```

就像您可以看到您的密码已保存并且您可以轻松绑定到它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:25:55.643

把那篇文章放在一边——还有一些与这个特定问题相关的其他帖子。您可以使用附加属性实现绑定。请参见：

1.  我相信这个问题与 [PasswordBox Binding重复](https://stackoverflow.com/questions/888466/passwordbox-binding)
2.  上面的帖子指向 - [http://www.wpftutorial.net/PasswordBox.html](http://www.wpftutorial.net/PasswordBox.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-23T14:40:31.200

IMO 上面 DinoM 提出的解决方案是更优雅的解决方案，比上面 Chandramouleswaran Ravichandra 提供的两个链接中使用的“Passwordhelper”类更容易理解（但所有归功于 Samuel Jack 在他的博客[http:/ /blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html](http://blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html) )

对于那些因为缺少 'UserCredentialsInputControl' 类型而无法使用 DinoM 解决方案的人，只需将此参数更改为 typeof(PasswordUserControl) 即可。

SingletonSean 在他的 Youtube 频道上有一段视频，标题为；

**绑定到 PasswordBox (MVVM) - EASY WPF (.NET CORE)** ( [https://www.youtube.com/watch?v=G9niOcc5ssw](https://www.youtube.com/watch?v=G9niOcc5ssw) )

这是我找到的作为完整示例的最佳来源，除了他使用字符串而不是 SecureString 作为 PasswordProperty 的基本类型，但这很容易修复。他还在他的 GitHub 存储库中提供了视频源代码的链接。

# python - wxPython SetLabel 在框架类之外？

> ID：15390728
> 
> 赞同：0
> 
> 时间：2013-03-13T16:16:45.853
> 
> 标签：python, wxpython

我试图`SetLabel()`在一个不是框架类的类中使用 wxPython。这基本上是我的框架：

```
class tradeWindow(wx.Frame):
    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id, "Exchange", size = (500, 190), pos = (390, 300), style = wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | wx.CLOSE_BOX | wx.CLIP_CHILDREN)
        panel = wx.Panel(self)
        self.priceLabel = wx.StaticText(self, -1, label = x, pos = (84, 10)) 
```

现在我想从课外设置 priceLabel 的标签。在课堂内，`self.priceLabel.SetLabel(x)`可以使用，但`tradeWindow.priceLabel.SetLabel(x)`不能在课堂外使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:11:38.273

要在类之外设置类属性，您必须传递一个引用或使用类似 pubsub 的东西。假设您有从第一帧 (tradeWindow) 生成的第二帧。创建第二个框架时，将“self”作为对原始框架的引用传递给它：

```
self.newFrame = NewFrame(self) 
```

然后在你的 NewFrame 的初始化中，你会有这样的东西：

```
def __init__(self, parentFrame):
    wx.Frame.__init__(self, None, title="New Frame")
    self.parentFrame = parentFrame 
```

然后你可以做**self.parentFrame.priceLabel.SetLabel**

另一种解决方案是在创建向其发布消息的侦听器时使用 pubsub 之类的东西。当侦听器收到消息时，它会触发一个事件，您可以使用该事件来设置标签。您可以在此处阅读有关 pubsub 的更多信息：http: [//www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)

# asp.net - 导入 System.Data.SqlClient .... 导入 System.Data ....？

> ID：15390730
> 
> 赞同：1
> 
> 时间：2013-03-13T16:16:48.710
> 
> 标签：asp.net, vb.net, import, system.data

我正在使用 VISUAL WEB DEVELOPER 2010 和 VISUAL STUDIO 2012 EXPRESS EDITION。在编写 WINDOWS 窗体应用程序时……我只使用了一条语句来处理 DataSet、DataTable 和 Datarow。它是，

```
Imports System.Data.SqlClient 
```

但是在使用 VISUAL WEB DEVELOPER 2010 在 ASP.NET 中开发 WEB 应用程序时，我不得不使用 2 个语句。它们是，

```
Imports System.Data.SqlClient
Imports System.Data 
```

如果我没有导入**System.Data**，则无法识别*DataSet、DataRow、DataTable 。*是什么原因..？？我听说 BASE CLASS LIBRARY ( BCL ) 对于 Windows 和 Web 应用程序都是一样的..??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-24T08:58:57.510

您应该添加对 System.Data 程序集的引用，该程序集包含 System.Data 命名空间，包括 System.Data.SqlClient。添加参考后，使用

```
Import System.Data.SqlClient 
```

对于 VB.NET 项目或

```
using System.Data.SqlClient; 
```

对于 C# 项目。

Import / Using 语句使 SqlClient 命名空间（位于 System.Data 程序集中）可用于您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T06:07:06.407

在 Visual Studio 2010 中

第 1 步 - 转到项目菜单下的项目属性。步骤 2 - 在项目的引用下单击添加步骤 3 - 选择 .Net 选项卡并选择 System.Data 和确定

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:24:50.310

转到项目的属性将 .net 客户端配置文件更改为 .net 配置文件现在检查它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-23T02:24:02.067

转到属性和服务检查“启用客户端应用程序服务”。

# jsf - JSF 表单提交在 FF 中有效，但在 IE 中无效

> ID：15390741
> 
> 赞同：4
> 
> 时间：2013-03-13T16:17:13.233
> 
> 标签：jsf, internet-explorer-8, form-submit

我有一个带有 inputText 和 commandButton 的简单表单。

```
<h:form>
    <h:inputText id="xyz" value="#{viewImpl.field}" onfocus="clearText(this)" onblur="setDefaultText(this)" />
    <h:commandButton action="#{viewImpl.method}"/>
</h:form> 
```

如果我按下命令按钮，则表单已正确提交。但是，如果我按 Enter 键，页面仍会在 inputText-Field 中重新加载，但不会调用该方法（服务器处于调试模式并激活断点）。

重要提示：这只发生在 IE 8 中。它在 Firefox 中运行良好。关于如何解决这个问题的任何线索？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:30:58.930

这是 IE 中单字段表单的一个已知问题。按下回车键不会触发表单的第一个-下一个按钮，因此它的名称=值对不会出现在请求参数映射中，因此 JSF 无法识别按钮以将操作事件排队。

解决此问题的方法之一是将第二个但不可见的输入字段添加到相同的表单中。

```
<input type="text" name="dummy" style="display: none;" /> 
```

这将导致 IE 也发送第一个到下一个按钮的名称=值对。

# html - CSS中导航的渐进式披露

> ID：15390745
> 
> 赞同：0
> 
> 时间：2013-03-13T16:17:19.433
> 
> 标签：html, css

我有这个布局，顶部有一个导航，然后是一个图像。英雄图像的上边距为负，以便导航工作中的透明度。

```
+----------------------------------------+
| a.logo Home Cat1 Cat2 Cat3 Cat4 Cat5   |
+----------------------------------------+
|                                        |
| Huge hero image here                   |
|                                        |
+----------------------------------------+ 
```

`a.logo`是网站的品牌，里面有一张图片。从`home`to 的项目`cat5`（实际上那里有更多类别，但你明白了）在`<ul>`with inline-blocked`<li>`中。问题是，当屏幕调整大小时，被剪裁的`<li>`项目只会付诸东流（如图 2 所示）。我希望它只是被剪裁，如图 3 所示。

图二：

```
+----------------------------------+
| a.logo Home Cat1 Cat2 Cat3 Cat4  |
|                  Cat5            |
+----------------------------------+
|                                  |
| Huge hero image here             |
|                                  |
+----------------------------------+ 
```

图 3：

```
+----------------------------------+
| a.logo Home Cat1 Cat2 Cat3 Cat4  |
+----------------------------------+
|                                  |
| Huge hero image here             |
|                                  |
+----------------------------------+ 
```

这是一个半实际的代码（实际内容被保留）：

```
<div id="nameplate" class="container">
    <div class="row">
        <div id="nav" class="twelvecol last">
            <a href="" class="logo"><img src="logo.png" alt="The Logo"></a></a>
            <ul id="nav_ul">
                <li><a href="">Cat 1</a></li>
                <li><a href="">Cat 2</a></li>
                <li><a href="">Cat 3</a></li>
                <li><a href="">Cat 4</a></li>
                <li>
                    <a href="">Cat 5</a>
                    <ul class="social-dropdown">
                        <li><a href="">Facebook</a></li>
                        <li><a href="">Twitter</a></li>
                        <li><a href="">YouTube</a></li>
                        <li><a href="">RSS Feed</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

CSS样式的东西：

```
.container#nameplate { margin: 0 auto; padding: 20px 0; position: relative; text-align: center; z-index: 3; }
.container#nameplate #nav .logo, .container#nameplate #nav > ul { display: inline; vertical-align: middle; }
.container#nameplate #nav .logo { display: inline-block; }
.container#nameplate #nav > ul { height: 32px; overflow: hidden; }
.container#nameplate #nav li { font: 300 1.25em 'Oswald', Helvetica, Arial, sans-serif; display: inline-block; line-height: 2.1em; list-style: none; margin-right: 5px; text-transform: uppercase; vertical-align: middle }
.container#nameplate #nav li a { color: #ccc; padding: 3px; }
.container#nameplate #nav li a:hover { color: #fbfbfb; text-decoration: none; }
.container#nameplate #nav ul.social-dropdown { position: absolute; }
.container#nameplate #nav ul.social-dropdown li { display: block; font-size: 80%; text-align: left; } 
```

我已经尝试过`overflow: hidden`了，加上一个固定的高度 on `div#nameplate`，但它会切断预计将显示在最后`<li>`一项上的下拉菜单。

关于如何在不切断下拉菜单的情况下执行此响应式操作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:23:45.350

Edit2：[这是关于 jsfiddle 的以下想法的示例](http://jsfiddle.net/zdeFF/)。

编辑：为您定义一个宽度`.logo`，并设置`#nav`为（即导航列表`position: relative`的父级）。`div`设置`position: absolute`在您的`#nav ul`, 并将其放置`left: XXpx; right: 0;`在“XX”等于您的徽标宽度以及您希望在它和导航之间放置的任何额外空间的位置。

* * *

`display: block`在 ul 上将允许它隐藏溢出。这将对您的布局产生连锁反应，但您只需要定义一个宽度来控制它。

# android - 如何将现有活动放入 PreferenceFragment

> ID：15390750
> 
> 赞同：0
> 
> 时间：2013-03-13T16:17:25.027
> 
> 标签：android, android-fragments

我有一个活动 activity1，我想在 PreferenceFragment 中使用它，结果 PreferenceFragment 将显示我的活动我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:29:37.697

您可以在您的偏好中添加一个意图来打开您的活动：

[来自官方文档](http://developer.android.com/guide/topics/ui/settings.html)：

例如，以下是使用首选项打开网页的方法：

```
<Preference android:title="@string/prefs_web_page" >
   <intent android:action="android.intent.action.VIEW"
           android:data="http://www.example.com" /> 
```

您可以使用以下属性创建隐式和显式意图：

```
android:action 
```

根据 setAction() 方法分配的操作。

```
android:data 
```

根据 setData() 方法分配的数据。

```
android:mimeType 
```

根据 setType() 方法分配的 MIME 类型。

```
android:targetClass 
```

组件名称的类部分，根据 setComponent() 方法。android:targetPackage 组件名称的包部分，根据 setComponent() 方法。

你会把你的班级名称放入

```
android:targetClass 
```

并将您的包名放入：

```
android:targetPackage 
```

请尝试让我知道情况如何

# javascript - 如何使用 jQuery 函数作为 .ready() 和 .change()

> ID：15390751
> 
> 赞同：1
> 
> 时间：2013-03-13T16:17:26.317
> 
> 标签：javascript, jquery, html

需要能够`SELECT`使用 javascript 和其他一些输入源（例如：下拉框）来更改语句。我花了一些时间在`removeOpt()`下面的代码上。但是，我很难让它作为一个函数工作并让它被调用`.ready()`并在`dropdown1`更改时运行。

该函数还需要保留变量的内存，特别是`all_Opt`变量，因为我需要能够重新填充其中的内容。我已经在下面发布了我尝试过的内容。`removeOpt`变量/函数直接`.ready()`用于.`.change()`

* * *

简而言之，这就是我正在尝试做的并且需要帮助：

*   找出函数removeOpt是否有效，或者找到一个有效的方法
*   两者都`removeOpt`运行过`.ready()`并且`dropdown1`（使用`.change()`？）
*   静态制作`all_Opt`（尝试*闭包*方法）`myFunc`

 *任何帮助表示赞赏！

* * *

**Java 脚本**

（*注意：* `//CODE IN QUESTION` *在测试和验证代码* `removeOpt()` *在* `.ready()`*.*

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
  //Create 'removeOpt' function
  var removeOpt = $(function() //CODE IN QUESTION
  {
    var regex_str = "^" + $("#prefix_select").val() + "-";
    var dd1 = $("#dropdown1 option");

    //Clone the 'None', Current, and All options into respective variables.
    //All options are stored in order to allow different selection criteria
    if(typeof all_Opt === 'undefined'){  //Used if all_Opt is a static variable
        alert("defining 'all_Opt'");
        var all_Opt  = dd1.clone(true);
    }
    else{alert("not defining 'all_Opt'");}
    var none_Opt = dd1.filter(":contains(None)").clone(true);
    var cur_Opt  = dd1.filter(function(){
        return $(this).text().match(regex_str);
    }).clone(true);

    //Remove all options and replace the 'None' and Current options
    dd1.remove();
    noneOpt.appendTo($("#dropdown1"));
    curOpt.appendTo($("#dropdown1"));
  })(); //CODE IN QUESTION

  //Setup .ready() and .change()
  $(document).ready(removeOpt());  //CODE IN QUESTION
  $("#dropdown1").change(removeOpt());  //CODE IN QUESTION
</script> 
```

**下拉菜单**

```
<!-- Used to limit options in "dropdown1" -->
<p>
<SELECT id="prefix_select">
  <OPTION VALUE="AB" >AB</OPTION>
  <OPTION VALUE="BB" >BB</OPTION>
  <OPTION VALUE="ABB">ABB</OPTION>
</SELECT>
</p>

<!-- Is produced SERVER side and cannot be changed -->
<p>
<SELECT ID="dropdown1">
  <OPTION VALUE=""    >None</OPTION>
  <OPTION VALUE="1000">AB-Item 1 Description</OPTION>
  <OPTION VALUE="2001">AB-Item 2 Description</OPTION>
  <OPTION VALUE="50"  >AB-Item 8 Description</OPTION>
  <OPTION VALUE="70"  >BB-Item 3 Description</OPTION>
  <OPTION VALUE="100" >BB-Item 5 Description</OPTION>
  <OPTION VALUE="2"   >ABB-Item 4 Description</OPTION>
</SELECT>
</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:20:46.757

交上来。不要调用它。

```
$(document).ready(removeOpt);
$("#dropdown1").change(removeOpt); 
```

* * *

并摆脱`$(...)()`语法。

```
// remove-----------vv
  var removeOpt = /*$(*/function()
  {
    var regex_str = "^" + $("#prefix_select").val() + "-";
    var dd1 = $("#dropdown1 option");

    if(typeof all_Opt === 'undefined') {
        alert("defining 'all_Opt'");
        var all_Opt  = dd1.clone(true);
    }
    else{alert("not defining 'all_Opt'");}
    var none_Opt = dd1.filter(":contains(None)").clone(true);
    var cur_Opt  = dd1.filter(function(){
        return $(this).text().match(regex_str);
    }).clone(true);

    dd1.remove();
    noneOpt.appendTo($("#dropdown1"));
    curOpt.appendTo($("#dropdown1"));
  }//)();
 //  ^^^--------remove 
```

您正在做的是将函数传递给函数，该`$`函数会将其传递给`.ready()`. 但是随后您尝试调用返回的 jQuery 对象，就好像它是一个函数一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:20:29.563

以下是不正确的。

```
 $(document).ready(removeOpt());  //CODE IN QUESTION
 $("#dropdown1").change(removeOpt());  //CODE IN QUESTION 
```

您无需在此处使用 调用该函数`()`。就这样做吧。

```
$(document).ready(removeOpt);
$("#dropdown1").change(removeOpt); 
```*

# java - 如何将泛型参数转换为类

> ID：15390756
> 
> 赞同：2
> 
> 时间：2013-03-13T16:17:39.583
> 
> 标签：java, generics

```
public abstract class BaseDaoImpl<E extends AbstractEntity> implements BaseDao<E> {

    .....

    public BaseDaoImpl() throws DataAccessException {
        logger = LoggerFactory.getLogger(E);  <<-- error here.
    } 
```

在上面的代码中，我在调用`getLogger(E)`.

> E 无法解析为变量

这是有道理的，但`getLogger(E.class)`（或其变体）也不起作用。

我不想在构造函数中传递文字类，所以像将构造函数头更改为：这样的解决方案
`public BaseDaoImpl(Class<E> clazz) ...`不是一个选项。

**我如何从中获取课程类型`E`？**

请注意以下问题的答案：[没有参数时如何获取泛型类型的类？](https://stackoverflow.com/questions/8436055/how-to-get-class-of-generic-type-when-there-is-no-parameter-of-it)
不帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:23:02.830

`E`如果不更改构造函数，您将无法在运行时静态地了解您尚未了解的任何内容。那是因为在 Java 中，泛型参数根本没有任何运行时影响——编译器从字面上删除`E`了它生成的代码中的所有引用。因此，如果您希望代码能够告诉其类型参数被实例化的类，您必须自己添加某种参数（例如`Class`对象）。只是没有办法解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:43:59.083

正如@CorayThan 所指出的，可以通过反射来实现。一个简单的方法是从方法签名

```
interface BaseDao<E>
    E find(long id);

class FooDao implements BaseDao<Foo>
    Foo find(long id) 
```

所以类型 E 可以通过

```
this.getClass().getDeclaredMethod("find", long.class).getReturnType(); 
```

* * *

但是，在构造函数中传递 a*是*一个很好的选择。`Class`因为构造函数不打算由用户代码调用，所以这里的冗长不是问题。

```
abstract class BaseDaoImpl<E>

    BaseDaoImpl(Class<E> clazz)

class FooDao extends BaseBaoImpl<Foo>

    FooDao()
        super(Foo.class);

// usages:

BaseDao<Foo> fooDao = new FooDao(); // clean & simple API 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:34:07.567

因为泛型是在 Java 语言中使用类型擦除实现的，所以您不能做任何需要运行时类型信息的事情。有关更多信息，请参阅[此页面](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T16:34:21.400

已经[回答](https://stackoverflow.com/questions/3403909/get-generic-type-of-class-at-runtime)了。

基本上，除非你使用反射，否则你不能。

我不建议使用反射，但如果你愿意，你应该能够使用：

```
GenericClass.class.getTypeParameters() 
```

# jquery - 有人可以帮我弄清楚如何将普通链接放入这个 Jquery 菜单吗？

> ID：15390768
> 
> 赞同：1
> 
> 时间：2013-03-13T16:18:02.937
> 
> 标签：jquery, css, menu, hyperlink

所以我在 codrops 上发现了这个非常棒的 jQuery 菜单

[http://tympanus.net/codrops/2010/05/18/little-boxes-menu-with-jquery/](http://tympanus.net/codrops/2010/05/18/little-boxes-menu-with-jquery/)

我已经为自己弄清楚了大部分如何修改。大部分都是有道理的，但我意识到当我想将普通链接放入“boxcontent”部分时，我做不到。CSS有这个-

```
.littleBoxes{
    width:350px;
    height:350px;
    margin:0 auto;
    position:relative;
}
.littleBoxes > div{
    position:absolute;
    width:90px;
    height:90px;
    text-align:center;
    border:2px solid white;
    overflow:hidden;
    background-color:#f7f7f7;
    -moz-box-shadow:0px 0px 3px #555;
    -webkit-box-shadow:0px 0px 3px #555;
    box-shadow:0px 0px 3px #555;
    background-position:center center;
    z-index:999;
}
.littleBoxes div a{
    text-transform:uppercase;
    font-size: 18px;
    font-weight:bold;
    letter-spacing:-1px;
    display:block;
    line-height:90px;
    text-decoration:none;
    color:#fff;
    background:#91EF4A url(../bgItem.png) repeat-x top left;
    outline:none;
    text-shadow:1px 1px 1px #888;
    -moz-box-shadow:1px 1px 3px #777;
    -webkit-box-shadow:1px 1px 3px #777;
    box-shadow:1px 1px 3px #777;
}
.littleBoxes div.boxcontent{
    width:334px;
    height:246px;
    text-align:left;
    padding:10px;
    font-size:16px;
    background-color:#f0f0f0;
    border:2px solid #fff;
    margin:10px 0px 0px 10px;
    text-shadow:1px 1px 1px #fff;
    -moz-box-shadow:1px 1px 3px #777;
    -webkit-box-shadow:1px 1px 3px #777;
    box-shadow:1px 1px 3px #777;
    opacity:0.8;
    display:none;
} 
```

我创建的任何链接都会有背景，并且会遵循脚本命令而不是访问网站。我查看了评论并找到了解决方案，但每次我这样做时，菜单都会停止运行。

它说我必须为框内的每个顶部链接元素添加一个类。然后，我所要做的就是将这个类添加到脚本内的绑定函数中，例如： $('#littleBoxes a.myClass').bind('click',function(e){ var $this = $(this ); var $currentBox = $this.parent();

我整个周末都在绞尽脑汁，遇到了伪类，并认为我会为每个链接放置一个特定的类，但主要的 CSS 用它的特性覆盖了它。

这是我第一次在这里提出问题，我希望有人可以帮助我了解如何正确解决这个问题。试图制作链接到其他网站的正常超链接时，我已经筋疲力尽了。:P

抱歉这个新手问题。

以为我会添加网站的一般小部分

```
<html>
<head>
    <title>Little Boxes Menu with jQuery</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="description" content="Little Boxes Menu or Navigation with jQuery - 
radnomly animate the menu items to show content, accodion like boxes menu" />
    <meta name="keywords" content="jquery, boxes, menu, navigation, animate"/>
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
    <style>
        *{
            margin:0;
            padding:0;
        }
        body{
            background:#E4FFCF url(on-music/wood.jpg) no-repeat top center;
            font-family:Futura, "Century Gothic", AppleGothic, sans-serif;
            overflow:hidden;
        }
        h1{
            color:#fff;
            margin:40px 0px 20px 40px;
            text-shadow:1px 1px 1px #555;
            font-weight:normal;
        }
        a.back{
            position:absolute;
            bottom:5px;
            right:5px;
        }
        .reference{
            position:absolute;
            bottom:5px;
            left:5px;
        }
        .reference p a, a.back{
            text-transform:uppercase;
            text-shadow:1px 1px 1px #fff;
            color:#666;
            text-decoration:none;
            font-size:16px;
            font-weight:bold;
        }
        .reference p a:hover, a.back:hover{
            color:#000;
        }
    </style>
</head>
<body>
    <div class="title">
        <h1>Little Boxes Menu with jQuery</h1>
    </div>
    <div id="content">
        <div class="reference">
            <p><a href="http://www.flickr.com/photos/adforce1/">Photos from 
williamcho's photostream on Flickr</a></p>
        </div>

        <a class="back" href="http://tympanus.net/codrops/2010/05/18/little-boxes-menu-
with-jquery">Back to Codrops</a>
        <div id="littleBoxes" class="littleBoxes">
            <div class="boxlink bg1" style="top:0px;left:0px;">
                <a href="">About click me to see how far</a>
                <div class="boxcontent">
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
                        sed do eiusmod tempor incididunt ut labore et dolore magna
                        aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                    ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>
                    </div>
            </div>
            <div class="bg5" style="background-position:-90px 0;top:0px;left:95px;"></
div>
            <div class="bg5" style="background-position:-180px 
0;top:0px;left:190px;"></div>
            <div class="bg5" style="background-position:-270px 
0;top:0px;left:285px;"></div>
    </div>
    <!-- The JavaScript -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/
jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.easing.1.3.js"></script>
   <script type="text/javascript">
        $(function() {
            /* object to save the initial positions of each box */
            var divinfo = {"initial": []};
            /* index of the selected / clicked box */
            var current = -1;

            /* we save the index,top and left of each one of the boxes */
            $('#littleBoxes > div').each(function(){
                var $this = $(this);
                var initial = {
                            'index' : $this.index(),
                            'top'     : $this.css('top'),
                            'left'     : $this.css('left')
                };
                divinfo.initial.push(initial);
            });

            /* clcik event for the anchors inside of the boxes */
            $('#littleBoxes a').bind('click',function(e){
                    var $this         = $(this);
                    var $currentBox    = $this.parent();
                    /* set a z-index lower than all the other boxes,
                    to see the other boxes animation on the top*/
                    $currentBox.css('z-index','1');

                    /* if we are clicking on a expanded box : */
                    if(current == $currentBox.index()){
                        /* put it back (decrease width,height, and set the top and 
left like it was before).
                        the previous positions are saved in the divinfo obj*/
                        $currentBox.stop().animate({
                                'top'         : divinfo.initial[$currentBox.inde
()].top,
                                'left'        : divinfo.initial[$currentBox.inde
()].left,
                                'width'     : '90px',
                                'height'    : '90px'
                        },800,'easeOutBack').find('.boxcontent').fadeOut();

                        $('#littleBoxes > div').not($currentBox).each(function(){
                            var $ele         = $(this);
                            var elemTop     = divinfo.initial[$ele.index()].top;
                            var elemLeft     = divinfo.initial[$ele.index()].left;
                            $ele.stop().show().animate({
                                'top'         : elemTop,
                                'left'        : elemLeft,
                                'opacity'    : 1
                            },800);
                        });
                        current = -1;
                    }
                    /* if we are clicking on a small box : */
                    else{
                        /* randomly animate all the other boxes.
                        Math.floor(Math.random()*601) - 150 gives a random number
between -150 and 450.
                        This range is considering the initial lefts/tops of the
elements. It's not the exact right
                        range, since we would have to calculate the range based on
each one of the boxes. Anyway, it
                        fits our needs...
                        */
                        $('#littleBoxes > div').not($currentBox).each(function(){
                            var $ele = $(this);
                            $ele.stop().animate({
                                'top' : (Math.floor(Math.random()*601) - 150) +'px',
                                'left': (Math.floor(Math.random()*601) - 150) +'px',
                                'opacity':0
                            },800,function(){
                                $(this).hide();
                            });
                        });

                        /* expand the clicked one. Also, fadeIn the content(boxcontent)
                        if you want it to fill the space of the littleBoxes container,
                        then these are the right values */
                        var newwidth     = 379;
                        var newheight     = 379;
                        $currentBox.stop().animate({
                            'top'     : '0px',
                            'left'    : '0px',
                            'width' : newwidth +'px',
                            'height': newheight+'px'
                        },800,'easeOutBack',function(){
                            current = $currentBox.index();
                            $(this).find('.boxcontent').fadeIn();
                        });

                    }
                    e.preventDefault();
            });
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:37:02.220

我认为问题出在这一点

```
e.preventDefault(); 
```

这会阻止浏览器跟踪该链接。

如果您删除它，链接将起作用，但您可能会强制浏览器刷新并且它不会动画。我无法尝试此操作，但您需要在阻止它工作之前检查它是否不是外部链接。

你需要这样的东西

```
if(e.href != e.baseURI) { e.preventDefault(); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T02:19:49.643

```
$('a').each(function() {
   var a = new RegExp('/' + window.location.host + '/');
   if(!a.test(this.href)) {
       $(this).click(function(event) {
           event.preventDefault();
           event.stopPropagation();
           window.open(this.href, '_self');
       });
   }
}); 
```

这似乎更顺畅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T21:18:14.350

```
<a href="#" onclick="javascript: location = 'http://www.google.com';" >Google</a> 
```

那行得通:) 另一个代码不起作用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T10:56:48.503

好的！我已经想通了。

改变

```
$('#littleBoxes > div').each(function(){ 
```

至

```
 $('#littleBoxes > div','myClass').each(function(){ 
```

要定位 DIV 的 CSS，请添加此

```
 $('myClass').removeClass('#littleBoxes a').addClass('#myClass a'); 
```

CSS 更改为

```
.myClass div a{
text-transform: none;
font-size: 16px;
font-weight: normal;
letter-spacing: normal;
display: inline;
line-height: normal;
text-decoration: underline;
color:#000000;
background: none;
outline: none;
text-shadow: none;
-moz-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
} 
```

它起作用了：D！

# php - 如何下载临时文件

> ID：15390769
> 
> 赞同：26
> 
> 时间：2013-03-13T16:18:02.873
> 
> 标签：php

我正在尝试创建一个简短的 PHP 脚本，该脚本采用 JSON 字符串，将其转换为 CSV 格式（使用`fputcsv`），并使该 CSV 可作为下载的 .csv 文件使用。我的想法是`tmpfile()`不用担心 cronjobs 或磁盘空间不足，但我似乎无法让魔法发生。

这是我的尝试，它是来自[PHP 文档的`readfile`](http://php.net/manual/en/function.readfile.php#refsect1-function.readfile-examples)转换示例：

```
$tmp = tmpfile();
$jsonArray = json_decode( $_POST['json'] );
fputcsv($tmp, $jsonArray);

header('Content-Description: File Transfer');
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename='.basename($tmp));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($tmp));

ob_clean();
flush();
readfile($tmp); 
```

我觉得`Content-Disposition`和`Content-Transfer-Encoding`标题是错误的，但我不知道如何修复它们。例如，`basename($tmp)`似乎没有返回任何东西，而且我不确定`text/csv`传输为二进制编码。同样，`echo filesize($tmp)`也是空白。有没有办法做我在这里尝试的事情？

**[编辑]**

**以下是我根据接受的答案编写的工作代码：*

```
$jsonArray = json_decode( $_POST['json'], true );
$tmpName = tempnam(sys_get_temp_dir(), 'data');
$file = fopen($tmpName, 'w');

fputcsv($file, $jsonArray);
fclose($file);

header('Content-Description: File Transfer');
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename=data.csv');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($tmpName));

ob_clean();
flush();
readfile($tmpName);

unlink($tmpName); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T16:25:38.570

请注意，它`tmpfile()`返回一个文件句柄，但您拥有的所有函数都需要一个文件*路径*（即字符串），而不是句柄 - 特别是`basename`、`filesize`和`readfile`. 所以这些函数调用都不能正常工作。也`basename`不会返回文件扩展名。随便叫什么，即

```
'Content-Disposition: attachment; filename=data.csv' 
```

正如@Joshua Burns 所说，确保您将数组传递给`fputcsv`或使用`assoc`参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:22:00.907

`json_decode()`默认情况下将元素转换为对象而不是数组。`fputcsv()`期望传递的数据是一个数组。

我建议更改：

```
$jsonArray = json_decode( $_POST['json'] ); 
```

到：

```
$jsonArray = json_decode( $_POST['json'], True ); 
```

看看这是否不能解决您的问题。

在尝试解决诸如此类的问题时，我强烈建议您启用`display_errors`并设置`error_reporting`以`E_ALL`查看您是否错过了某种错误：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

// Rest of your code here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:25:55.057

首先，检查此字符串，我将其更改为：

```
header('Content-Disposition: attachment; filename="'.basename($tmp).'"'); 
```

我曾经遇到过问题，浏览器兼容性:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:35:55.223

一个问题是[tmpfile()](http://php.net/tmpfile)返回文件句柄，而[filesize](http://php.net/filesize)将文件名作为参数。
以下行：

```
header('Content-Length: ' . filesize($tmp)); 
```

可能被评估为：

```
header('Content-Length: 0'); 
```

检查所有对 header() 的调用是否在任何输出发生之前执行。

# amazon-ec2 - 使用亚马逊 ec2 并将 IP 与实例绑定，但无法正常工作

> ID：15390780
> 
> 赞同：2
> 
> 时间：2013-03-13T16:18:26.317
> 
> 标签：amazon-ec2

我是亚马逊服务的新手，我已经在亚马逊EC2上安装了node.js和mongodb，它们都在服务器端工作，但是，当我想测试它时，我将服务器实例与IP地址绑定，但是访问服务器不成功，我想知道它出了什么问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T20:56:34.987

您需要确保您的安全组打开了正确的端口。

为此，请执行以下操作：

1.  在屏幕左侧的“网络和安全”部分中选择“安全组”。
2.  选择您已分配给 EC2 实例的安全组。
3.  选择底部面板中的“入站”选项卡。
4.  添加您要打开的端口以及可以访问它的地址范围。

例如添加这个：

```
Port range: 80
Source:     0.0.0.0/0 
```

为了从任何 IP 地址打开 HTTP 的标准端口。

如果您使用的是负载均衡器，您还需要在那里打开端口：

1.  在屏幕左侧的“网络和安全”部分中选择“负载均衡器”。
2.  选择指向您的 EC2 实例的负载均衡器。
3.  选择底部面板中的“侦听器”选项卡。
4.  添加您要打开的协议/端口以及将在服务器上应用的协议/端口。

例如添加这个：

```
Load Balancer Protocol: HTTP
Load Balancer Port:     80
Instance Protocol:      HTTP
Instance Port:          8080 
```

如果要将传入端口 80 请求重定向到实例上的端口 8080。

如果您这样做，则需要在 EC2 实例的安全组上制定一条规则，以允许从弹性负载均衡器到 8080 的传入连接，如下所示：

```
Port range: 8080
Source:     amazon-elb/amazon-elb-sg 
```

# javascript - Backbone.js 两个模型相互影响

> ID：15390789
> 
> 赞同：0
> 
> 时间：2013-03-13T16:19:18.157
> 
> 标签：javascript, jquery, model-view-controller, backbone.js, underscore.js

我有一个表，它的行是集合中的模型，每行有两列输入，每小时费率和小时数，模型也有属性`total`，基本上只是`rate_per_hour*hours`，并且随着用户更改小时数或每小时费率而更新。您也可以添加新行并删除它们。我相信，我设法做到了正确的主干方式。

现在第一部分我不确定，我需要一个包含小时和总和的 div，我也设法做到了这一点，使用一个函数（它基本上只是通过集合中的模型循环，总结它们的属性和然后使用 jquery 更新我的 div），更改模型上的事件，在设置新属性后，正在调用此函数。它在所有视图/集合/模型之外。不确定这是否是正确的方法，但它有效。

现在最糟糕的部分是我惨败，意识到我的代码可能从一开始就错了。在带有总计的 div 下是另一个输入，称为折扣，它应该做的是计算折扣百分比`((value of discount/my total sum)*100)`，然后更新表中的费率，以便显示旧的和应用了折扣的费率。

### 这里的实际问题：

我不明白的是，我应该如何将底部（总计和折扣 - 见截图）与上部连接起来，底部是否应该是另一个模型，具有总计、折扣和小时数的属性，并且有自己的视图而不是作为一个简单的div？但是它是如何工作的，一个模型（折扣）如何影响集合中的模型，反之亦然，添加一行需要影响总数和折扣百分比？

这是我尚未使用骨干网的仅工作 jquery 版本应该如何工作的屏幕截图。

![http://i.imgur.com/J3uyilH.png](../Images/d232e9fe8a6baa0287666e386580d498.png)

如果要求也将发布代码，但现在我尝试通过使用 jquery 事件来解决它有点臃肿，我自己的简单对象包含这些总数和 shizzle wizzle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:39:18.560

看来您遇到的是对*数据建模*的问题。有时退后一步问问自己“我正在处理的事情是什么？”会有所帮助。

您提到的每一行似乎都代表一个“活动”（每个都有一个名称和速率）。您还收集了这些活动，这很好。现在你可能会问，“这整个 ui（由整个屏幕截图表示）代表什么？”。如果我们将这段 ui 称为 ActivitiesView，它可以监听 UI 交互（更改字段），这将更新集合。一旦集合发生变化，它会触发视图以更新的总数重新呈现。

在此示例中，集合上的折扣字段只是一种方便，由集合用于更新其子项。

```
var Activity = Backbone.Model.extend({
    defaults: { discount: 0 }
});

var ActivityCollection = Backbone.Collection.extend({
    initialize: function () {
        this.on("change:discount", this.updateDiscounts, this);
    },
    model: activity,
    totalAmount: function () { /* ...iterate over items, return total amount, factoring in total */ },
    totalHours: function () { /* ...iterate over items, return total hours... */ },
    updateDiscounts: function (discount) { /* ...iterate over items, updating each item's discount */}
});

var ActivitiesView = Backbone.View.extend({

  events: {
    "change input.discount": "applyDicsounts"
  },

  initialize: function() {
    this.listenTo(this.collection, "change", this.render);
    this.listenTo(this.model, "change", this.render);
  }

  render: function() {
    this.$el.find('.totalAmount').text(this.collection.totalAmount());
    this.$el.find('.totalHours').text(this.collection.totalHours());  
  },

  applyDicsounts: function (e) {
    var new_discount = e.target.value; // should probably validate this
    this.collection.set({ discount: new_discount });
  }

});

var myCollection = new ActivityCollection();
var myActivitiesView = new ActivitiesView({ collection: myCollection }); 
```

# java - Java中的堆栈推送，弹出，窥视算法

> ID：15390790
> 
> 赞同：0
> 
> 时间：2013-03-13T16:19:20.247
> 
> 标签：java, algorithm, stack

我了解堆栈是如何工作的，但我必须编写 push、pop 和 peek 的方法，然后在驱动程序类中实现它们。这就是令人困惑的地方。这是我的`Stack`课：

```
public class Stack implements StackInterface
{
    private final int ARRAY_SIZE = 9;
    private String[] movies = new String[ARRAY_SIZE];   // Hold movie titles
    private int top = 0;

    /**
     * Constructor
     * @param moviesIn
     */

    public Stack(String[] moviesIn)
    {
        movies = moviesIn;
    }

    /**
     * Test for full stack
     */

    public void push(String moviesIn)
    {
        if (top >= movies.length)
            System.out.println("ERROR: Stack is full");

        top++;
        movies[top] = moviesIn;
    }

    /**
     * Test for empty stack
     */

    public String pop()
    {
        if (top == 0) {
                System.out.println("ERROR: Stack is empty");
                return " ";
        }

        top--;
        return movies[top];
    }

    public void peek()
    {
        // ???
    }
} 
```

`main()`到目前为止，这是我的方法中的内容：

```
public static void main(String[] args) 
{
    String[] movies = {"Amour", "*Argo", "Beasts of the Southern Wild", "Django Unchained", "Les Misérables", "Life of Pi", "Lincoln", "Silver Linings Playbook", "Zero Dark Thirty"};
    Stack oscarStack = new Stack(movies);

    oscarStack.push(movies);
} 
```

我以为我可以将一个对象传递给堆栈，但它似乎并没有那样工作。那么如何将`oscarStack`对象推入堆栈呢？还是我必须单独推动每个字符串？在继续我的在线研究中，似乎堆栈构造函数只能创建一个空堆栈。这就是我不能传递对象参数的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:21:33.073

您必须将数组的每个元素推入堆栈：

```
for (String movie : movies) {
    oscarStack.push(movie);
} 
```

或者，您可以在您的`Stack`类中编写一个“pushAll”方法，该方法接受一个字符串数组并且基本上做同样的事情。

但是，您似乎已经在构造函数中设置了 movies 数组，所以我看不到调用`push`. 也许你可以进一步解释。

PS您的推送方法似乎有一个错误：

```
public void push(String moviesIn)
{
    if (top >= movies.length)
        System.out.println("ERROR: Stack is full");

    top++;
    movies[top] = moviesIn;
} 
```

使用此代码，`movies[0]`将无法为它分配值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:30:25.413

主要是，您将所有元素隐式放入支持数组中，而无需任何推送操作。您可能想要做的是迭代您想要推送的电影，然后将它们推送进去。

应该做两处改变：

*   将您的 Stack 对象更改为不再接受字符串数组。这是令人困惑和不必要的，因为所有初始化都是在构造时完成的。
*   您的 有两个错误`push`：
    *   您没有考虑数组为空的情况。切换顶部的增量，或使用`movies[top++]`.
    *   如果数组已满，您实际上不会*阻止代码执行。*`ArrayIndexOutOfBoundsException`如果你尝试用你所拥有的东西奔跑，你就会得到。

```
public static void main(String[] args)  {
   String[] movies = {"Amour", "*Argo", "Beasts of the Southern Wild", "Django Unchained", "Les Misérables", "Life of Pi", "Lincoln", "Silver Linings Playbook", "Zero Dark Thirty"};
    Stack oscarStack = new Stack();

    for(String movie : movies) {
        oscarStack.push(movie);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:30:02.857

push 方法需要一个字符串作为参数，而不是字符串数组，因此您可以将 push 方法更改为接受字符串数组作为参数，或者一次将一个字符串传递给当前的 push 方法。此外，您没有推送 oscarStack 对象，如果您想再次推送任何对象，方法签名应该支持该对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:39:10.657

除了这里给出的答案，还记得将从堆栈中弹出的引用设为空。这是《Effective Java》一书中的引述

> 一般来说，每当一个类管理自己的内存时，程序员都应该警惕内存泄漏。每当一个元素被释放时，该元素中包含的任何对象引用都应该被清空。

从书中复制的示例：

```
public Object pop() {
       if (size==0) throw new EmptyStackException();
       Object result = elements[--size];
       elements[size] = null; // Eliminate obsolete reference
       return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-03T18:55:05.023

如果您想使用`Stack`数据结构并且不想承担成本，`Synchronization`那么您可以使用`Dequeue`. `Stack`Java 中可用的类扩展了`Vector`.

```
 Deque<Integer> q=new LinkedList<Integer>();
    q.offerFirst(Integer.SIZE);
    q.offerFirst(Integer.SIZE);
    q.pollFirst(); 
```

这是 Java 集合框架中可用的最有效的堆栈实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-05T12:48:09.403

您可能应该将变量初始化为 top=-1。请注意，我没有为此类 Stack 初始化构造函数，因为它不是强制性的。如果没有为类提供用户定义的构造函数，编译器会将成员变量初始化为其默认值。

1.numeric 数据类型设置为0。 2.char 数据类型设置为空字符('\0')。3.reference变量设置为null。以下是完整代码的实现方式：-

```
 public static void main(String[] args) 
 {

 String[] movies = {"Amour", "*Argo", "Beasts of the Southern Wild", "Django Unchained", "Les Misérables", "Life of Pi", "Lincoln", "Silver Linings Playbook", "Zero Dark Thirty"};
Stack oscarStack = new Stack();

 for (String movie:movies){
oscarStack.push(movie);
}
 }
public class Stack implements StackInterface
  {

    private final int ARRAY_SIZE = MAX_SIZE;
    private String[] movies = new String[ARRAY_SIZE];   // Hold movie titles
    private int top = -1;

/**
 * Test for full stack
 */

public void push(String moviesIn)
{
    if (top >= movies.length)
            System.out.println("ERROR: Stack is full");
             return;

    top++;
    movies[top] = moviesIn;
}

/**
 * Test for empty stack
 */

public String pop()
{
    if (top == -1) {
            System.out.println("ERROR: Stack is empty");
            return " ";
    }

    top--;
    return movies[top];
}

public void peek()
{
    if(top==-1){
       System.out.println("ERROR: Stack is empty");
            return " ";

    }
else{
  return(movies[top]);
    } }} 
```

# google-bigquery - 阻止查询 --destination_table 命令的输出

> ID：15390791
> 
> 赞同：2
> 
> 时间：2013-03-13T16:19:20.900
> 
> 标签：google-bigquery

有没有办法阻止查询 --destination_table 的屏幕输出？

我想通过工作流移动数据集，但不一定看到所有行

job_73d3dffab7974d9db360f5c31a3a9fa7 上的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:12:24.003

这是一个已知问题，我们将在下一个版本的 bq 中修复它。要解决此问题，您可以添加`--max_rows=0`. 这只会更改返回的行数，而不是查询返回的行数（您可以`LIMIT N`在查询中使用它）。

# java - 如何将约束设置为 GridBagLayout

> ID：15390794
> 
> 赞同：0
> 
> 时间：2013-03-13T16:19:26.360
> 
> 标签：java, swing, layout, gridbaglayout

我正在寻找一种在第一行添加 jlabel 和 jtextfield 并在第二行和 jpanel 中心添加 2 个 jbutton 的方法。但是如何使用 gridbaglayout 设置约束？

```
 selectionPanel.add(new JLabel("Department Name"));
    selectionPanel.add(new JTextField(deptName));
    selectionPanel.add(addBut);
    selectionPanel.add(deleteBut); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:31:28.833

首先，您需要将布局设置为`GridBagLayout`.

然后您需要`GridBagConstraints`为每个组件创建新的（这样，您将不会在下一次创建时从最后一个组件中获取值）。

在该`add()`方法中，您将传递组件和约束。

```
setLayout(new java.awt.GridBagLayout())
java.awt.GridBagConstraints constraints = new java.awt.GridBagConstraints();
constraints.anchor = java.awt.GridBagConstraints.LAST_LINE_END;
constraints.weighty = 0.1;
constraints.weightx = 0.3;
javax.swing.JButton unlockButton = new javax.swing.JButton("jbutton text");
add(unlockButton, constraints); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:34:08.080

您创建一个 GridBagContraints 对象，适当地设置其属性，并将约束对象作为第二个参数传递给面板的 add(...) 方法。

请参阅：[如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

# python - python中的整数平方根

> ID：15390807
> 
> 赞同：70
> 
> 时间：2013-03-13T16:19:55.190
> 
> 标签：python, math, integer, sqrt

python 或标准库中是否有整数平方根？我希望它是准确的（即返回一个整数），如果没有解决方案就吠叫。

此刻我推出了我自己的天真之一：

```
def isqrt(n):
    i = int(math.sqrt(n) + 0.5)
    if i**2 == n:
        return i
    raise ValueError('input was not a perfect square') 
```

但它很丑陋，我真的不相信它对于大整数。如果我超过了该值，我可以遍历方块并放弃，但我认为做这样的事情会有点慢。另外我想我可能会重新发明轮子，像这样的东西肯定已经存在于 python 中......

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-13T16:45:53.493

牛顿法对整数非常有效：

```
def isqrt(n):
    x = n
    y = (x + 1) // 2
    while y < x:
        x = y
        y = (x + n // x) // 2
    return x 
```

这将返回*x* * *x*不超过*n*的最大整数*x*。如果要检查结果是否正好是平方根，只需执行乘法以检查*n*是否为完美平方。

 ***[我在我的博客上](http://programmingpraxis.com/2012/06/01/square-roots/)讨论了这个算法，以及其他三种计算平方根的算法。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2018-12-31T04:45:22.597

**更新：** [Python 3.8`math.isqrt`](https://docs.python.org/3/library/math.html#math.isqrt)在标准库中有一个[函数！](https://docs.python.org/3/library/math.html#math.isqrt)

我在小 (0…2 ^(22) ) 和大 (2 ^(50001) ) 输入上对每个（正确的）函数进行了基准测试。在这两种情况下，最明显的赢家是[`gmpy2.isqrt`mathmandan 排名](https://stackoverflow.com/a/17495624/115030)第一，其次是 Python 3.8 [`math.isqrt`](https://docs.python.org/3.8/library/math.html#math.isqrt)，其次是[由 NPE 链接的 ActiveState recipe](https://stackoverflow.com/a/15391114/115030)排名第三。ActiveState 配方有一堆可以用班次代替的部门，这使它更快一点（但仍然落后于本机函数）：

```
def isqrt(n):
    if n > 0:
        x = 1 << (n.bit_length() + 1 >> 1)
        while True:
            y = (x + n // x) >> 1
            if y >= x:
                return x
            x = y
    elif n == 0:
        return 0
    else:
        raise ValueError("square root not defined for negative numbers") 
```

基准测试结果：

*   [`gmpy2.isqrt()`(mathmandan)](https://stackoverflow.com/a/17495624/115030)：小 0.08 µs，大 0.07 ms
*   `int(gmpy2.isqrt())`*：小 0.3 µs，大 0.07 ms
*   Python 3.8 [`math.isqrt`](https://docs.python.org/3.8/library/math.html#math.isqrt)：小 0.13 µs，大 0.9 ms
*   **ActiveState（如上优化）**：小 0.6 µs，大 17.0 ms
*   [ActiveState (NPE)](https://stackoverflow.com/a/15391114/115030)：小 1.0 µs，大 17.3 ms
*   [Castlebravo 长指针](https://stackoverflow.com/a/39708338/115030)：小 4 µs，大 80 ms
*   [mathmandan 改进](https://stackoverflow.com/a/31224469/115030)：小 2.7 µs，大 120 ms
*   [martineau](https://stackoverflow.com/a/15391068/115030)（经过[此修正](https://stackoverflow.com/questions/15390807/integer-square-root-in-python/23279113#comment94803887_15391068)）：小 2.3 µs，大 140 ms
*   [nibot](https://stackoverflow.com/a/23279113/115030)：小 8 µs，大 1000 ms
*   [mathmandan](https://stackoverflow.com/a/31224469/115030)：小 1.8 µs，大 2200 ms
*   [Castlebravo 牛顿法](https://stackoverflow.com/a/39708338/115030)：小 1.5 µs，大 19000 ms
*   [user448810](https://stackoverflow.com/a/15391420/115030)：小 1.4 µs，大 20000 ms

（* 由于`gmpy2.isqrt`返回一个`gmpy2.mpz`对象，它的行为主要但不完全像 an `int`，您可能需要将其转换回 an`int`以用于某些用途。）

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-07-05T19:23:47.877

很抱歉回复太晚了；我只是偶然发现了这个页面。如果将来有人访问此页面，python 模块 gmpy2 旨在处理非常大的输入，其中包括整数平方根函数。

例子：

```
>>> import gmpy2
>>> gmpy2.isqrt((10**100+1)**2)
mpz(10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001L)
>>> gmpy2.isqrt((10**100+1)**2 - 1)
mpz(10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000L) 
```

当然，一切都会有“mpz”标签，但 mpz 与 int 兼容：

```
>>> gmpy2.mpz(3)*4
mpz(12)

>>> int(gmpy2.mpz(12))
12 
```

有关此方法相对于该问题的其他一些答案的性能的讨论，请参阅[我的其他答案](https://stackoverflow.com/a/31224469/2554867)。

下载：[https ://code.google.com/p/gmpy/](https://code.google.com/p/gmpy/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-24T20:28:10.277

**长手平方根算法**

事实证明，有一种计算平方根的算法，你可以手动计算，比如长除法。算法的每次迭代都会产生结果平方根的一个数字，同时消耗您寻找平方根的数字的两个数字。虽然算法的“长手”版本以十进制指定，但它适用于任何基础，二进制最容易实现，也许执行速度最快（取决于底层的 bignum 表示）。

因为该算法对数字逐位进行运算，所以它可以为任意大的完全平方产生精确的结果，而对于非完全平方，它可以产生任意多的精度（小数点右侧）。

“Dr. Math”网站上有两篇很好的文章解释了该算法：

*   [二进制中的平方根](http://mathforum.org/library/drmath/view/52656.html)
*   [长手平方根](http://mathforum.org/library/drmath/view/52610.html)

这是 Python 中的一个实现：

```
def exact_sqrt(x):
    """Calculate the square root of an arbitrarily large integer. 

    The result of exact_sqrt(x) is a tuple (a, r) such that a**2 + r = x, where
    a is the largest integer such that a**2 <= x, and r is the "remainder".  If
    x is a perfect square, then r will be zero.

    The algorithm used is the "long-hand square root" algorithm, as described at
    http://mathforum.org/library/drmath/view/52656.html

    Tobin Fricke 2014-04-23
    Max Planck Institute for Gravitational Physics
    Hannover, Germany
    """

    N = 0   # Problem so far
    a = 0   # Solution so far

    # We'll process the number two bits at a time, starting at the MSB
    L = x.bit_length()
    L += (L % 2)          # Round up to the next even number

    for i in xrange(L, -1, -1):

        # Get the next group of two bits
        n = (x >> (2*i)) & 0b11

        # Check whether we can reduce the remainder
        if ((N - a*a) << 2) + n >= (a<<2) + 1:
            b = 1
        else:
            b = 0

        a = (a << 1) | b   # Concatenate the next bit of the solution
        N = (N << 2) | n   # Concatenate the next bit of the problem

    return (a, N-a*a) 
```

您可以轻松修改此函数以进行额外的迭代来计算平方根的小数部分。我最感兴趣的是计算大完全平方的根。

我不确定这与“整数牛顿法”算法相比如何。我怀疑牛顿的方法更快，因为它原则上可以在一次迭代中生成多位解，而“长手”算法每次迭代只生成一位解。

源码仓库：[https ://gist.github.com/tobin/11233492](https://gist.github.com/tobin/11233492)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-07-04T19:36:38.167

这是一个非常简单的实现：

```
def i_sqrt(n):
    i = n.bit_length() >> 1    # i = floor( (1 + floor(log_2(n))) / 2 )
    m = 1 << i    # m = 2^i
    #
    # Fact: (2^(i + 1))^2 > n, so m has at least as many bits 
    # as the floor of the square root of n.
    #
    # Proof: (2^(i+1))^2 = 2^(2i + 2) >= 2^(floor(log_2(n)) + 2)
    # >= 2^(ceil(log_2(n) + 1) >= 2^(log_2(n) + 1) > 2^(log_2(n)) = n. QED.
    #
    while m*m > n:
        m >>= 1
        i -= 1
    for k in xrange(i-1, -1, -1):
        x = m | (1 << k)
        if x*x <= n:
            m = x
    return m 
```

这只是一个二分搜索。将值初始化为`m`不超过平方根的 2 的最大幂，然后检查是否可以设置每个较小的位，同时保持结果不大于平方根。（按降序逐个检查位。）

对于相当大的值`n`（例如，大约`10**6000`或大约`20000`位），这似乎是：

*   [比user448810 描述](https://stackoverflow.com/a/15391420/2554867)的牛顿方法实现更快。
*   [比我其他答案](https://stackoverflow.com/a/17495624/2554867)`gmpy2`中的内置方法慢得多。
*   [与 nibot描述](https://stackoverflow.com/a/23279113/2554867)的 Longhand Square Root 相当，但速度稍慢。

所有这些方法都在这种大小的输入上成功，但在我的机器上，这个函数大约需要 1.5 秒，而 @Nibot 大约需要 0.9 秒，@user448810 大约需要 19 秒，而 gmpy2 内置方法需要不到一毫秒（！）。例子：

```
>>> import random
>>> import timeit
>>> import gmpy2
>>> r = random.getrandbits
>>> t = timeit.timeit
>>> t('i_sqrt(r(20000))', 'from __main__ import *', number = 5)/5\. # This function
1.5102493192883117
>>> t('exact_sqrt(r(20000))', 'from __main__ import *', number = 5)/5\. # Nibot
0.8952787937686366
>>> t('isqrt(r(20000))', 'from __main__ import *', number = 5)/5\. # user448810
19.326695976676184
>>> t('gmpy2.isqrt(r(20000))', 'from __main__ import *', number = 5)/5\. # gmpy2
0.0003599147067689046
>>> all(i_sqrt(n)==isqrt(n)==exact_sqrt(n)[0]==int(gmpy2.isqrt(n)) for n in (r(1500) for i in xrange(1500)))
True 
```

这个函数可以很容易地推广，虽然它不是很好，因为我没有对 的初始猜测非常精确`m`：

```
def i_root(num, root, report_exactness = True):
    i = num.bit_length() / root
    m = 1 << i
    while m ** root < num:
        m <<= 1
        i += 1
    while m ** root > num:
        m >>= 1
        i -= 1
    for k in xrange(i-1, -1, -1):
        x = m | (1 << k)
        if x ** root <= num:
            m = x
    if report_exactness:
        return m, m ** root == num
    return m 
```

但是，请注意，`gmpy2`也有一个`i_root`方法。

事实上，这种方法可以适用于任何（非负的、递增的）函数`f`来确定“整数倒数`f`”。但是，要选择一个有效的初始值，`m`您仍然需要了解有关`f`.

**编辑：感谢@Greggo 指出`i_sqrt`可以重写该函数以避免使用任何乘法。**这产生了令人印象深刻的性能提升！

```
def improved_i_sqrt(n):
    assert n >= 0
    if n == 0:
        return 0
    i = n.bit_length() >> 1    # i = floor( (1 + floor(log_2(n))) / 2 )
    m = 1 << i    # m = 2^i
    #
    # Fact: (2^(i + 1))^2 > n, so m has at least as many bits
    # as the floor of the square root of n.
    #
    # Proof: (2^(i+1))^2 = 2^(2i + 2) >= 2^(floor(log_2(n)) + 2)
    # >= 2^(ceil(log_2(n) + 1) >= 2^(log_2(n) + 1) > 2^(log_2(n)) = n. QED.
    #
    while (m << i) > n: # (m<<i) = m*(2^i) = m*m
        m >>= 1
        i -= 1
    d = n - (m << i) # d = n-m^2
    for k in xrange(i-1, -1, -1):
        j = 1 << k
        new_diff = d - (((m<<1) | j) << k) # n-(m+2^k)^2 = n-m^2-2*m*2^k-2^(2k)
        if new_diff >= 0:
            d = new_diff
            m |= j
    return m 
```

请注意，通过构造，未设置 的`k`第 位`m << 1`，因此可以使用按位或来实现 的加法`(m<<1) + (1<<k)`。最终我`(2*m*(2**k) + 2**(2*k))`写成`(((m<<1) | (1<<k)) << k)`，所以它是三个班次和一个按位或（然后是减法得到`new_diff`）。也许还有更有效的方法来获得这个？无论如何，这比乘法要好得多`m*m`！与上面的比较：

```
>>> t('improved_i_sqrt(r(20000))', 'from __main__ import *', number = 5)/5.
0.10908999762373242
>>> all(improved_i_sqrt(n) == i_sqrt(n) for n in xrange(10**6))
True 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-13T16:43:18.737

一种选择是使用该`decimal`模块，并以足够精确的浮点数进行：

```
import decimal

def isqrt(n):
    nd = decimal.Decimal(n)
    with decimal.localcontext() as ctx:
        ctx.prec = n.bit_length()
        i = int(nd.sqrt())
    if i**2 != n:
        raise ValueError('input was not a perfect square')
    return i 
```

我认为应该工作：

```
>>> isqrt(1)
1
>>> isqrt(7**14) == 7**7
True
>>> isqrt(11**1000) == 11**500
True
>>> isqrt(11**1000+1)
Traceback (most recent call last):
  File "<ipython-input-121-e80953fb4d8e>", line 1, in <module>
    isqrt(11**1000+1)
  File "<ipython-input-100-dd91f704e2bd>", line 10, in isqrt
    raise ValueError('input was not a perfect square')
ValueError: input was not a perfect square 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-13T16:30:53.323

好像你可以这样检查：

```
if int(math.sqrt(n))**2 == n:
    print n, 'is a perfect square' 
```

更新：

正如您所指出的，对于较大的`n`. [对于那些看起来很有希望的人，这是对示例 C 代码的改编，Martin Guy @ UKC，1985 年 6 月，用于维基百科文章计算平方根](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Binary_numeral_system_.28base_2.29)的方法中提到的相对简单的二进制数字逐位计算方法：

```
from math import ceil, log

def isqrt(n):
    res = 0
    bit = 4**int(ceil(log(n, 4))) if n else 0  # smallest power of 4 >= the argument
    while bit:
        if n >= res + bit:
            n -= res + bit
            res = (res >> 1) + bit
        else:
            res >>= 1
        bit >>= 2
    return res

if __name__ == '__main__':
    from math import sqrt  # for comparison purposes

    for i in range(17)+[2**53, (10**100+1)**2]:
        is_perfect_sq = isqrt(i)**2 == i
        print '{:21,d}:  math.sqrt={:12,.7G}, isqrt={:10,d} {}'.format(
            i, sqrt(i), isqrt(i), '(perfect square)' if is_perfect_sq else '') 
```

输出：

```
 0:  math.sqrt=           0, isqrt=         0 (perfect square)
                    1:  math.sqrt=           1, isqrt=         1 (perfect square)
                    2:  math.sqrt=    1.414214, isqrt=         1
                    3:  math.sqrt=    1.732051, isqrt=         1
                    4:  math.sqrt=           2, isqrt=         2 (perfect square)
                    5:  math.sqrt=    2.236068, isqrt=         2
                    6:  math.sqrt=     2.44949, isqrt=         2
                    7:  math.sqrt=    2.645751, isqrt=         2
                    8:  math.sqrt=    2.828427, isqrt=         2
                    9:  math.sqrt=           3, isqrt=         3 (perfect square)
                   10:  math.sqrt=    3.162278, isqrt=         3
                   11:  math.sqrt=    3.316625, isqrt=         3
                   12:  math.sqrt=    3.464102, isqrt=         3
                   13:  math.sqrt=    3.605551, isqrt=         3
                   14:  math.sqrt=    3.741657, isqrt=         3
                   15:  math.sqrt=    3.872983, isqrt=         3
                   16:  math.sqrt=           4, isqrt=         4 (perfect square)
9,007,199,254,740,992:  math.sqrt=9.490627E+07, isqrt=94,906,265
100,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,020,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,001:  math.sqrt=      1E+100, isqrt=10,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,001 (perfect square) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-03-29T13:34:03.860

Python 的默认`math`库有一个整数平方根函数：

> ### [`math.isqrt(n)`](https://docs.python.org/3/library/math.html#math.isqrt)
> 
> *返回非负整数n*的整数平方根。*这是n*的精确平方根的下限，或者等效地是满足*a² ≤ n*的最大整数 a 。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-24T23:47:32.567

下面的脚本提取整数平方根。它不使用除法，只使用位移，因此速度非常快。它在反平方根上使用[牛顿法](https://en.wikipedia.org/wiki/Newton%27s_method)，该技术由*Quake III Arena出名，在维基百科文章*[Fast inverse square root](https://en.wikipedia.org/wiki/Fast_inverse_square_root)中提到。

算法的计算策略`s = sqrt(Y)`如下。

1.  在 [1/4, 1) 范围内将参数 Y 减少到 y，即 y = Y/B，其中 1/4 <= y < 1，其中 B 是 2 的偶数幂，因此`B = 2**(2*k)`对于某个整数 k。我们想要找到 X，其中 x = X/B，并且 x = 1 / sqrt(y)。
2.  使用二次[极小极大多项式](https://en.wikipedia.org/wiki/Minimax_approximation_algorithm)确定 X 的第一近似值。
3.  使用牛顿法优化 X。
4.  计算`s = X*Y/(2**(3*k))`。

我们实际上不创建分数或执行任何除法。所有的算术都是用整数完成的，我们使用位移来除以 B 的各种幂。

范围缩减让我们找到了一个很好的初始近似值来提供给牛顿方法。这是区间 [1/4, 1) 中平方根反比的 2 次极小极大多项式逼近的一个版本：

[![1/sqrt(x) 的 Minimax 多边形](../Images/2b6ca23f2fa7711a57569f51ae835a48.png)](https://latex.codecogs.com/svg.image?y=(463x%5E2-896x+698)/256)

（对不起，我在这里颠倒了 x & y 的含义，以符合通常的约定）。该近似值的最大误差约为 0.0355 ~= 1/28。这是显示错误的图表：

[![Minimax 多边形误差图](../Images/a37f9839e7fc41de250b6ff53e52017a.png)](https://i.stack.imgur.com/1P3uy.png)

使用这个 poly，我们的初始 x 以至少 4 或 5 位的精度开始。牛顿方法的每一轮都将精度翻倍，因此如果我们想要的话，不需要很多轮就可以获得数千位。

* * *

```
""" Integer square root

    Uses no divisions, only shifts
    "Quake" style algorithm,
    i.e., Newton's method for 1 / sqrt(y)
    Uses a quadratic minimax polynomial for the first approximation

    Written by PM 2Ring 2022.01.23
"""

def int_sqrt(y):
    if y < 0:
        raise ValueError("int_sqrt arg must be >= 0, not %s" % y)
    if y < 2:
        return y

    # print("\n*", y, "*")
    # Range reduction.
    # Find k such that 1/4 <= y/b < 1, where b = 2 ** (k*2)
    j = y.bit_length()
    # Round k*2 up to the next even number
    k2 = j + (j & 1)
    # k and some useful multiples
    k = k2 >> 1
    k3 = k2 + k
    k6 = k3 << 1
    kd = k6 + 1
    # b cubed
    b3 = 1 << k6

    # Minimax approximation: x/b ~= 1 / sqrt(y/b)
    x = (((463 * y * y) >> k2) - (896 * y) + (698 << k2)) >> 8
    # print("   ", x, h)

    # Newton's method for 1 / sqrt(y/b)
    epsilon = 1 << k
    for i in range(1, 99):
        dx = x * (b3 - y * x * x) >> kd
        x += dx
        # print(f" {i}: {x} {dx}")
        if abs(dx) <= epsilon:
            break

    # s == sqrt(y)
    s = x * y >> k3
    # Adjust if too low
    ss = s + 1
    return ss if ss * ss <= y else s

def test(lo, hi, step=1):
    for y in range(lo, hi, step):
        s = int_sqrt(y)
        ss = s + 1
        s2, ss2 = s * s, ss * ss
        assert s2 <= y < ss2, (y, s2, ss2)
    print("ok")

test(0, 100000, 1) 
```

这段代码肯定比and*慢*。它的目的只是为了说明算法。看看如果用 C 实现它会有多快会很有趣......`math.isqrt``decimal.Decimal.sqrt`

* * *

这是一个[实时版本](https://sagecell.sagemath.org/?z=eJx9VE1v2zgQvftXPGjRruyojiUXRhJYQfewBXpo0Rbd7aVAQFm0xUgmtSTVSAjS394h9WFnUVSABMzozczjmxkGQYB30vID1zD_NUxzaKXsbAZ6_jHcQCrk4rswQkkTQcmqgynE3hoPCT41rOQBjO0qDlYdlBa2OEb-p1jyZYQP_MEq-afBkdtC5dgrjRiXVE7bsJufKjEQgVwzK3Y4CimOrEWtqk6qo2CVj7MFx15oY8HqWquWMJaI9XS_UmnLJbIOH98j-SzkAckqSZareJmsZ0EQzGY530NIezcUv-l57tFhi1VvuUczYTj-ZVXD_9Za6TAYg8D0AceGGGQctylWESlk8cIEeIHhNEO-5Cwft42W6Hqif6DWlC8MvslFEKGLECyC-fDrM5MHagLPm5072nJwvxUyRwnT7ApSgVnEl6-xTdFdZlQqjvBQcGpehhQJFguE5SLpU96Tq1tmwt5VXB5sEU6VVONyLhI0Nazy4kreWvDvpKJsjhnXHlomlOIeFwjv8RLxGF-CUbxRR47G8H1TkS6VFXXF-9koKYpCb28R9_a6d1yg7O2Ns9fYbkdA7hwbAsRDiQy7JuO5tzIXHjt0uRl1fD-MybNpuEFLovxIz6bsMutJt5QiDMPXmzUW1CN6545fmczxCuHV9aZ30Uk311e-VDL3iKvnjXOTH6GNUMxHKr8f85EAr42olJxO4p0OKmgsaeyo9yE18_p6fhqe3LFuiVlIErzytJ3V9tTzCdfiIiXwZI9s9wEexdMNHtsnPObt0zBqw6SyzIQ55aJZGsidKnvZNWfleEiDNH22uGag1nku6wH2V37vNoSyW6VQqYce68Bm6u6wE-QlHH0X7uMmGryi5TOz2RtizzXbWb-2lhsbViqljStEGq_cE9HFw-uUFGONVXdNnTPL07eMEpx2uxAu7dl2G7oZ6LZK8UU3fPISLCWuEz_H4hcxPvls6lt36lulHLOe0ln73KnPrpyT_7kc3pVQtEm8n-SIRlkmADOG0x1EEC_U1qEjhHSDDKF9-mFKVRkM4-kU9gc40eoxrkYy_7_T9Ll-AjbIm1w=&lang=python)，在 SageMathCell 服务器上运行。设置`hi`<= 0 以计算并显示 中设置的单个值的结果`lo`。您可以在输入框中输入表达式，例如设置为`hi`0 和`lo`获取。`2 * 10**100``sqrt(2) * 10**50`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-13T16:33:01.963

您的功能因大量输入而失败：

```
In [26]: isqrt((10**100+1)**2)

ValueError: input was not a perfect square 
```

[ActiveState 网站上](http://code.activestate.com/recipes/577821-integer-square-root-function/)有一个配方，希望它更可靠，因为它只使用整数数学。它基于早期的 StackOverflow 问题：[编写您自己的平方根函数](https://stackoverflow.com/questions/1623375/writing-your-own-square-root-function)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-03-13T16:45:17.247

浮点数不能在计算机上精确表示。您可以在 python 的浮点数精度范围内将所需的接近度设置 epsilon 测试为一个小值。

```
def isqrt(n):
    epsilon = .00000000001
    i = int(n**.5 + 0.5)
    if abs(i**2 - n) < epsilon:
        return i
    raise ValueError('input was not a perfect square') 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2016-12-13T16:01:22.070

我用循环比较了这里给出的不同方法：

```
for i in range (1000000): # 700 msec
    r=int(123456781234567**0.5+0.5)
    if r**2==123456781234567:rr=r
    else:rr=-1 
```

发现这个是最快的，不需要数学导入。很长可能会失败，但看看这个

```
15241576832799734552675677489**0.5 = 123456781234567.0 
```

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2013-03-13T16:24:42.457

试试这个条件（没有额外的计算）：

```
def isqrt(n):
  i = math.sqrt(n)
  if i != int(i):
    raise ValueError('input was not a perfect square')  
  return i 
```

如果您需要它返回一个`int`（不是`float`带有尾随零的 a），则分配第二个变量或计算`int(i)`两次。***

# javascript - 刷新后的JQuery倒计时

> ID：15390810
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:20:10.643
> 
> 标签：javascript, jquery, cookies, countdowntimer

大家好，我创建了一个 jQuery 倒计时，但即使我刷新页面，我也希望它保持计数，这里是源代码：

```
function JBCountDown(settings) {
var glob = settings;

function deg(deg) {
    return (Math.PI/180)*deg - (Math.PI/180)*90
}

glob.total   = Math.floor((glob.endDate - glob.startDate)/86400);
glob.days    = Math.floor((glob.endDate - glob.now ) / 5000);
glob.hours   = 24 - Math.floor(((glob.endDate - glob.now) % 86400) / 3600);
glob.minutes = 60 - Math.floor((((glob.endDate - glob.now) % 86400) % 3600) / 60) ;

if (glob.now >= glob.endDate) {
    return;
}

var clock = {
    set: {
        days: function(){
            var cdays = $("#canvas_days").get(0);
            var ctx = cdays.getContext("2d");
            ctx.clearRect(0, 0, cdays.width, cdays.height);
            ctx.beginPath();
            ctx.strokeStyle = glob.daysColor;

            ctx.shadowBlur    = 10;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            ctx.shadowColor = glob.daysGlow;

            ctx.arc(94,94,85, deg(0), deg((360/glob.total)*(glob.total - glob.days)));
            ctx.lineWidth = 17;
            ctx.stroke();
            $(".clock_days .val").text(glob.days);
        },

        hours: function(){
            var cHr = $("#canvas_hours").get(0);
            var ctx = cHr.getContext("2d");
            ctx.clearRect(0, 0, cHr.width, cHr.height);
            ctx.beginPath();
            ctx.strokeStyle = glob.hoursColor;

            ctx.shadowBlur    = 10;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            ctx.shadowColor = glob.hoursGlow;

            ctx.arc(94,94,85, deg(0), deg(15*glob.hours));
            ctx.lineWidth = 17;
            ctx.stroke();
            $(".clock_hours .val").text(24 - glob.hours);
        },

        minutes : function(){
            var cMin = $("#canvas_minutes").get(0);
            var ctx = cMin.getContext("2d");
            ctx.clearRect(0, 0, cMin.width, cMin.height);
            ctx.beginPath();
            ctx.strokeStyle = glob.minutesColor;

            ctx.shadowBlur    = 10;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            ctx.shadowColor = glob.minutesGlow;

            ctx.arc(94,94,85, deg(0), deg(6*glob.minutes));
            ctx.lineWidth = 17;
            ctx.stroke();
            $(".clock_minutes .val").text(60 - glob.minutes);
        },
        seconds: function(){
            var cSec = $("#canvas_seconds").get(0);
            var ctx = cSec.getContext("2d");
            ctx.clearRect(0, 0, cSec.width, cSec.height);
            ctx.beginPath();
            ctx.strokeStyle = glob.secondsColor;

            ctx.shadowBlur    = 10;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            ctx.shadowColor = glob.secondsGlow;

            ctx.arc(94,94,85, deg(0), deg(6*glob.seconds));
            ctx.lineWidth = 17;
            ctx.stroke();

            $(".clock_seconds .val").text(60 - glob.seconds);
        }
    },

    start: function(){
        /* Seconds */
        var cdown = setInterval(function(){
            if ( glob.seconds > 59 ) {
                if (60 - glob.minutes == 0 && 24 - glob.hours == 0 && glob.days == 0) {
                    clearInterval(cdown);

                    /* Countdown is complete */

                    return;
                }
                glob.seconds = 1;
                if (glob.minutes > 59) {
                    glob.minutes = 1;
                    clock.set.minutes();
                    if (glob.hours > 23) {
                        glob.hours = 1;
                        if (glob.days > 0) {
                            glob.days--;
                            clock.set.days();
                        }
                    } else {
                        glob.hours++;
                    }
                    clock.set.hours();
                } else {
                    glob.minutes++;
                }
                clock.set.minutes();
            } else {
                glob.seconds++;
            }
            clock.set.seconds();
        },1000);
    }
}
clock.set.seconds();
clock.set.minutes();
clock.set.hours();
clock.set.days();
clock.start(); 
```

}

我认为我需要创建一个 cookie 文件并从中获取数据，但是由于我是初学者，我不知道该怎么做，所以请有人可以帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T09:03:29.480

嘿，每次刷新页面时时间/日期都会重置的原因是因为当前时间，即 glob.now 不是动态的，所以我为

```
glob.startDate = sDate
glob.endDate = eDate
glob.now = nDate 
```

即还请注意，日期是从 1970 年开始的毫秒数（如果你没有得到这个[http://www.w3schools.com/jsref/jsref_gettime.asp](http://www.w3schools.com/jsref/jsref_gettime.asp) ，请查看这个）

```
 function JBCountDown(settings) {
        var glob = settings;
       // var glob.startDate = 18316800;
       //  var glob.endDate = 26179200;
        var nDate = (new Date().getTime())/1000;
        var eDate = ((new Date(2013, 9, 31, 09, 0, 0, 0)).getTime())/1000; 
        var sDate = ((new Date(2013, 7, 1, 09, 0, 0, 0)).getTime())/1000; 
        function deg(deg) {
            return (Math.PI/180)*deg - (Math.PI/180)*90
        }

        glob.total   = Math.floor((eDate - sDate)/86400);
        glob.days    = Math.floor((eDate - nDate ) / 86400);
        glob.hours   = 24 - Math.floor(((eDate - nDate) % 86400) / 3600);
        glob.minutes = 60 - Math.floor((((eDate - nDate) % 86400) % 3600) / 60) ;

        alert (eDate - sDate);
        if (nDate >= eDate) {
            return;
        }

        var clock = {
            set: {
                days: function(){
                    var cdays = $("#canvas_days").get(0);
                    var ctx = cdays.getContext("2d");
                    ctx.clearRect(0, 0, cdays.width, cdays.height);
                    ctx.beginPath();
                    ctx.strokeStyle = glob.daysColor;

                    ctx.shadowBlur    = 10;
                    ctx.shadowOffsetX = 0;
                    ctx.shadowOffsetY = 0;
                    ctx.shadowColor = glob.daysGlow;

                    ctx.arc(94,94,85, deg(0), deg((360/glob.total)*(glob.total - glob.days)));
                    ctx.lineWidth = 17;
                    ctx.stroke();
                    $(".clock_days .val").text(glob.days);
                },

                hours: function(){
                    var cHr = $("#canvas_hours").get(0);
                    var ctx = cHr.getContext("2d");
                    ctx.clearRect(0, 0, cHr.width, cHr.height);
                    ctx.beginPath();
                    ctx.strokeStyle = glob.hoursColor;

                    ctx.shadowBlur    = 10;
                    ctx.shadowOffsetX = 0;
                    ctx.shadowOffsetY = 0;
                    ctx.shadowColor = glob.hoursGlow;

                    ctx.arc(94,94,85, deg(0), deg(15*glob.hours));
                    ctx.lineWidth = 17;
                    ctx.stroke();
                    $(".clock_hours .val").text(24 - glob.hours);
                },

                minutes : function(){
                    var cMin = $("#canvas_minutes").get(0);
                    var ctx = cMin.getContext("2d");
                    ctx.clearRect(0, 0, cMin.width, cMin.height);
                    ctx.beginPath();
                    ctx.strokeStyle = glob.minutesColor;

                    ctx.shadowBlur    = 10;
                    ctx.shadowOffsetX = 0;
                    ctx.shadowOffsetY = 0;
                    ctx.shadowColor = glob.minutesGlow;

                    ctx.arc(94,94,85, deg(0), deg(6*glob.minutes));
                    ctx.lineWidth = 17;
                    ctx.stroke();
                    $(".clock_minutes .val").text(60 - glob.minutes);
                },
                seconds: function(){
                    var cSec = $("#canvas_seconds").get(0);
                    var ctx = cSec.getContext("2d");
                    ctx.clearRect(0, 0, cSec.width, cSec.height);
                    ctx.beginPath();
                    ctx.strokeStyle = glob.secondsColor;

                    ctx.shadowBlur    = 10;
                    ctx.shadowOffsetX = 0;
                    ctx.shadowOffsetY = 0;
                    ctx.shadowColor = glob.secondsGlow;

                    ctx.arc(94,94,85, deg(0), deg(6*glob.seconds));
                    ctx.lineWidth = 17;
                    ctx.stroke();

                    $(".clock_seconds .val").text(60 - glob.seconds);
                }
            },

            start: function(){
                /* Seconds */
                var cdown = setInterval(function(){
                    if ( glob.seconds > 59 ) {
                        if (60 - glob.minutes == 0 && 24 - glob.hours == 0 && glob.days == 0) {
                            clearInterval(cdown);

                            /* Countdown is complete */

                            return;
                        }
                        glob.seconds = 1;
                        if (glob.minutes > 59) {
                            glob.minutes = 1;
                            clock.set.minutes();
                            if (glob.hours > 23) {
                                glob.hours = 1;
                                if (glob.days > 0) {
                                    glob.days--;
                                    clock.set.days();
                                }
                            } else {
                                glob.hours++;
                            }
                            clock.set.hours();
                        } else {
                            glob.minutes++;
                        }
                        clock.set.minutes();
                    } else {
                        glob.seconds++;
                    }
                    clock.set.seconds();
                },1000);
            }
        }
        clock.set.seconds();
        clock.set.minutes();
        clock.set.hours();
        clock.set.days();
        clock.start();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:40:03.903

如果您不喜欢 cookie，可以将其存储在 localStorage 中：

```
$(window).unload(function() {
     if (typeof(Storage) !== "undefined") {
             localStorage.lastTime = countdown.currentTime;
     } else {
             // sorry, no localStorage available.
     }
}); 
```

然后，您可以使用从本地存储再次加载该值

```
$(doucment).ready(function() {
     if (typeof(Storage) !== "undefined") {
           if(localStorage.lastTime!=="undefined") {
                countdown.continueWith(localStorage.lastTime);
           } else {
                countdown.start();
           }
     } else {
            // sorry, no localStorage available.
     }
}); 
```

我无法理解您的代码，因此我无法走到最后一英里，并将我针对您的问题的方法与您的代码相结合。如果你愿意，你可以使用这个更容易掌握的倒计时示例：

```
function () {
                setInterval(function() {
                    var now = new Date().getTime(),
                        event = new Date("March 01, 2013 20:05:00").getTime();
                    var toGo = (event - now) / 1000;
                    if (toGo > 0) {
                        var days = Math.floor(toGo/3600/24);
                        var toGo = toGo - (days*24*3600);
                        var hours = Math.floor(toGo/3600);
                        var toGo = toGo - (hours*3600);
                        var minutes = Math.floor(toGo/60);
                        var seconds = Math.floor(toGo - (minutes*60));
                        $("#countdown-days").html(days);
                        $("#countdown-hours").html(hours);
                        $("#countdown-minutes").html(minutes);
                        $("#countdown-seconds").html(seconds);
                    } else {
                        $("#countdown-days").html(0);
                        $("#countdown-hours").html(0);
                        $("#countdown-minutes").html(0);
                        $("#countdown-seconds").html(0);
                        clearInterval();
                    }
                }, 1000);
            } 
```

# xml - xmllint 不能与 xpath 一起正常工作

> ID：15390813
> 
> 赞同：0
> 
> 时间：2013-03-13T16:20:17.593
> 
> 标签：xml, bash, xpath, xml-parsing, xmllint

这就是我所拥有的。它显然没有做它应该做的，甚至崩溃了。有什么问题还是有任何其他工具可以帮助我在 BASH 中解析 XML？

```
:~$ cat test.xml 
<project xmlns="http://www.netbeans.org/ns/project/1">
  <type>org.netbeans.modules.ant.freeform</type>
</project>

:~$ xmllint --xpath '//type/text()' test.xml 
Segmentation fault (core dumped)

:~$ xmllint --xpath '//type' test.xml 
XPath set is empty 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-27T21:54:05.537

要搜索命名空间元素，您可以测试本地名称，如下所示：

```
xmllint --xpath '//*[local-name()="type"]/text()' test.xml 
```

更精确的方法是

```
xmllint --xpath '//*[namespace-uri()="http://www.netbeans.org/ns/project/1" and local-name()="type"]/text()' test.xml 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T16:22:35.037

您的问题是您的 XML... 不是有效的 XML 文件。

之前试试这个：

```
sed -i '1i <?xml version="1.0" encoding="UTF-8"?>' test.xml 
```

在测试之后，你有一个*命名空间*问题，所以试试这个：

```
xmllint --shell test.xml
/ > setns x=http://www.netbeans.org/ns/project/1
/ > xpath /x://type/text() 
```

# jsf - 我的命令按钮不起作用，JSF + primefaces？

> ID：15390815
> 
> 赞同：0
> 
> 时间：2013-03-13T16:20:23.857
> 
> 标签：jsf, primefaces, invoke

从数据库（postgre）中挑选数据，

此页面首先列出列表中的数据，然后我有一个命令链接“modificar”，它携带来自在对话框中单击的元素的数据，但我不知道为什么此对话框中的命令按钮不调用方法“DAOEventos.modificarEvento”... . 最后，我有一个按钮，可以从对话框中将数据注册到数据库，这没问题

我唯一的问题是对话框来自commandlink！

我进行了调试，问题出在“p:calendar”，如果我踢它，该方法被调用，但我需要日历中的那个值！

```
<h:body>
    <h:form id="form">            
        <p:dataTable style="width:100%" value="#{DAOEventos.listaEventos()}" var="even" >

            <f:facet name="header">Listado de Eventos</f:facet>
            <p:column filterBy="#{even.descripcion}" filterMatchMode="contains">
                <f:facet name="header">
                    <h:outputLabel value="Evento"/>
                </f:facet>
                <h:outputText value="#{even.descripcion}"></h:outputText>

            </p:column>
            <p:column filterBy="#{even.fec}" filterMatchMode="contains">
                <f:facet name="header">

                    <h:outputLabel value="Fecha"/>
                </f:facet>
                <h:outputText value="#{even.fec}"></h:outputText>

            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputLabel value="Modificar"/>
                </f:facet>
                <p:commandLink value="Modificar" oncomplete="dlg2.show();" 
                               update="modalDialog2" action="#{beanEventos.traerDatos()}" style="color: black">
                    <f:setPropertyActionListener target="#{beanEventos.codEvento}" value="#{even.codEvento}" />
                    <f:setPropertyActionListener target="#{beanEventos.codSec}" value="#{even.codSec}" />
                </p:commandLink>

                <p:dialog id="modalDialog2" header="Modificar Eventos" widgetVar="dlg2" dynamic="true" resizable="false">  
                    <h:form>
                        <table>
                            <tr>
                                <td>
                                    <h:outputLabel value="Nombre Evento"/>
                                    <h:inputText id="nombre"  value="#{beanEventos.nombre}"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h:outputLabel value="Descripcion Evento"/>
                                    <h:inputText id="desc"  value="#{beanEventos.descripcion}"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h:outputLabel value="Fecha Evento"/>
                                    <p:calendar value="#{beanEventos.fec}" 
                                                showButtonPanel="true"/>                      
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h:selectBooleanCheckbox value="#{beanEventos.vigencia}"/> 
                                    <h:outputText value="Vigencia" style="font-weight:bold"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h:commandButton value="Modificar" action="#{DAOEventos.modificarEvento()}" />
                                </td>
                            </tr>
                        </table>
                    </h:form>
                </p:dialog>
            </p:column>
        </p:dataTable> 

        <p/>
        <p:commandButton id="showDialogButton"  value="Agregar" oncomplete="dlg.show()" /> 

        <p:dialog header="Enter FirstName" widgetVar="dlg" resizable="false" id="dialogo"  >  
            <h:form>

                <table>
                    <tr>
                        <td>
                            <h:outputLabel value="Nombre Evento "/>
                            <h:inputText id="nombre"  value="#{beanEventos.nombre}"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:outputLabel value="Descripcion Evento "/>
                            <h:inputText id="desc"  value="#{beanEventos.descripcion}"/>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <h:outputLabel value="Fecha de Evento"/>
                            <p:calendar value="#{beanEventos.fec}" id="cal" showButtonPanel="true"/>  
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <h:commandButton value="Registrar Evento"
                                             action="#{DAOEventos.insertarEvento()}"/>
                        </td>
                    </tr>
                </table>
            </h:form>
        </p:dialog>  

    </h:form>  
</h:body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:06:41.693

正如 SrinivasR 所说，您不应该（尽管这可能很好）嵌套表格。但我认为这里的问题在于你定义你的地方：

```
<p:dialog id="modalDialog2">...</p:dialog> 
```

你应该把它放在数据表之外。

```
<h:body>
<h:form id="form">            
    <p:dataTable style="width:100%" value="#{DAOEventos.listaEventos()}" var="even" >

        <f:facet name="header">Listado de Eventos</f:facet>
        <p:column filterBy="#{even.descripcion}" filterMatchMode="contains">
            <f:facet name="header">
                <h:outputLabel value="Evento"/>
            </f:facet>
            <h:outputText value="#{even.descripcion}"></h:outputText>

        </p:column>
        <p:column filterBy="#{even.fec}" filterMatchMode="contains">
            <f:facet name="header">

                <h:outputLabel value="Fecha"/>
            </f:facet>
            <h:outputText value="#{even.fec}"></h:outputText>

        </p:column>
        <p:column>
            <f:facet name="header">
                <h:outputLabel value="Modificar"/>
            </f:facet>
            <p:commandLink value="Modificar" oncomplete="dlg2.show();" 
                           update=":padding" actionListener="#{beanEventos.traerDatos()}" style="color: black">
                <f:setPropertyActionListener target="#{beanEventos.codEvento}" value="#{even.codEvento}" />
                <f:setPropertyActionListener target="#{beanEventos.codSec}" value="#{even.codSec}" />
            </p:commandLink>

        </p:column>
    </p:dataTable> 
</h:form> 
    <p/>
    <h:panelGroup id="padding" layout="block">
        <p:dialog id="modalDialog2" header="Modificar Eventos" widgetVar="dlg2" dynamic="true" resizable="false">  
            <h:form id="form2">     
                <table>
                    <tr>
                        <td>
                            <h:outputLabel value="Nombre Evento"/>
                            <h:inputText id="nombre"  value="#{beanEventos.nombre}"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:outputLabel value="Descripcion Evento"/>
                            <h:inputText id="desc"  value="#{beanEventos.descripcion}"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:outputLabel value="Fecha Evento"/>
                            <p:calendar value="#{beanEventos.fec}" 
                                        showButtonPanel="true"/>                      
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:selectBooleanCheckbox value="#{beanEventos.vigencia}"/> 
                            <h:outputText value="Vigencia" style="font-weight:bold"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:commandButton value="Modificar" action="#{DAOEventos.modificarEvento()}" />
                        </td>
                    </tr>
                </table>
            </h:form> 
        </p:dialog>
    </h:panelGroup>

    <h:form id="form3">     
    <p:commandButton id="showDialogButton"  value="Agregar" oncomplete="dlg.show()" /> 

    <p:dialog header="Enter FirstName" widgetVar="dlg" resizable="false" id="dialogo"  >  

            <table>
                <tr>
                    <td>
                        <h:outputLabel value="Nombre Evento "/>
                        <h:inputText id="nombre"  value="#{beanEventos.nombre}"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h:outputLabel value="Descripcion Evento "/>
                        <h:inputText id="desc"  value="#{beanEventos.descripcion}"/>
                    </td>
                </tr>

                <tr>
                    <td>
                        <h:outputLabel value="Fecha de Evento"/>
                        <p:calendar value="#{beanEventos.fec}" id="cal" showButtonPanel="true"/>  
                    </td>
                </tr>

                <tr>
                    <td>
                        <h:commandButton value="Registrar Evento"
                                         action="#{DAOEventos.insertarEvento()}"/>
                    </td>
                </tr>
            </table>

    </p:dialog>  

</h:form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:48:12.300

您将一个嵌套`HTML form`在另一个内部`HTML form`，这在 HTML 中不是一个有效的概念。即使您在 JSF 中执行此操作，最终渲染组件也只会是 HTML。因此， `<h:form id="form">`请从您的代码中删除或尝试将上述所有代码保留在单个表单中。

> 在这里查看： [如何在 JSF 页面中使用 <h:form>？单一形式？多种形式？嵌套表格？](https://stackoverflow.com/questions/7371903/multiple-hform-in-a-jsf-page)

# ios - XCode - CallStack 图标

> ID：15390819
> 
> 赞同：6
> 
> 时间：2013-03-13T16:20:30.277
> 
> 标签：ios, objective-c, xcode, callstack

调用堆栈符号表示什么？我对如何分析调用堆栈有所了解，但我从未理解这些符号的用途。

![](../Images/2a7c45ca1558d6996d04bc0f05d66ed4.png)

# parallel-processing - MPI_使用 FORTRAN 将来自所有处理器的二维数组收集到根上更大的二维数组中

> ID：15390823
> 
> 赞同：1
> 
> 时间：2013-03-13T16:20:38.987
> 
> 标签：parallel-processing, fortran, mpi, multidimensional-array

这是我试图用我的代码做的事情。

我必须在大小为 nx x nz 的二维网格上计算 Fw 和 Fi。我在所有处理器之间拆分 k 循环，以便每个处理器通过 (nz/p) 计算 nx，其中 p 是正在使用的处理器数量。在每个处理器完成后，我想收集所有块，即每个 nx by nz/p Fw 和 Fi 并将其放入根中的 Fw 和 Fi 中。我最终想使用 allgather，即将所有计算出的 Fw 和 Fi 收集到所有处理器中。

我附上了下面的代码。

我不确定我是否正确指定了 sendcount 和 recvcount，或者我的代码为什么会死锁。任何帮助表示赞赏。谢谢！

```
PROGRAM gridtestpar
  IMPLICIT NONE

  INTEGER :: nx, nz, i, k, t
  INTEGER :: order, mx, mz
  INTEGER :: count
  INTEGER :: ierror, comm, p, rank, npr, s, f, np(2)

  REAL(KIND = 8) :: dx, dz, startx, startz, finishx, finishz
  REAL(KIND = 8) :: dt
  REAL(KIND = 8) :: cx, cz
  REAL(KIND = 8) :: cbx, cbz
  REAL(KIND = 8), ALLOCATABLE ::X(:), Z(:), Fw(:,:), Fi(:,:)
  REAL(KIND = 8), ALLOCATABLE :: Fn(:,:), Fnp1(:,:)

  include 'mpif.h'

  !----------------------------------------------------------
  !Parameters that can be changed
  !---------------------------------------------------------

  !Time step
  dt = 0.000000001d0
  !Number of points in x and z direction(i.e. streamwise and
  !spanwise) directions respectively
  nx = (400*5)
  nz = (400*5)

  !First and last grid point locations in x and z directions
  startx = 0.d0
  finishx = 60.d0*5.d0
  startz = 0.d0
  finishz = 60.d0*5.d0
  !Distance between grid points
  dx = (finishx-startx)/REAL(nx-1)
  dz = (finishz-startz)/REAL(nz-1)

  !Allocate
  ALLOCATE(X(nx),  Z(nz))
  ALLOCATE(Fw(nx,nz), Fi(nx,nz))
  ALLOCATE(Fn(nx,nz), Fnp1(nx,nz))

  ! Make Grid
  !--------------------------------------------------------------
  DO i = 1, nx
     X(i) = (i-1)*dx
  END DO

  DO k = 1, nz
     Z(k) = (k-1)*dx
  END DO

  CALL MPI_INIT(ierror)
  comm = MPI_COMM_WORLD
  !Get rank
  CALL MPI_COMM_RANK(comm, rank, ierror)
  !Get number of processors
  CALL MPI_COMM_SIZE(comm, p, ierror)

  !split job between all processors
  npr = INT((nz-1)/p)
  DO k = rank*npr+1, (rank+1)*npr
     DO i = 1, nx
        cx = 50.d0
        Fi(i,k) = 0.d0
        DO mx = 1,30
           cz = 0.d0;
           DO mz = 1,13*5
              Fi(i,k) = Fi(i,k) + EXP(-0.9d0*((X(i)-cx)**2+(Z(k)-cz)**2))
              cz = cz + 5.d0
           END DO
          cx = cx + 5.d0
        END DO
        cbz = 0.d0
        cbx = 30.d0
        DO mx = 1,4*5
           Fw(i,k) = Fw(i,k) + 0.05d0 + 7.d0*EXP(-0.1*((X(i)-cbx)**2 &
                + (Z(k)-cbz)**2)) + 0.1d0*Fi(i,k) 
           cbz = cbz + 20.d0
        END DO
     END DO
  END DO

  s = rank*npr+1
  f = (rank+1)*npr
  np(1) = nx
  np(2) = npr

  CALL MPI_GATHER(Fw(:,s:f), np , MPI_DOUBLE_PRECISION, &
       Fw,np , MPI_DOUBLE_PRECISION, 0,  comm, ierror)
  CALL MPI_GATHER(Fi(:,s:f), np , MPI_DOUBLE_PRECISION, &
       Fi,np , MPI_DOUBLE_PRECISION, 0, comm, ierror)

  Fn(:,:) = Fw(:,:) - Fi(:,:)
  Fnp1 = Fn

  WRITE(*,*) "I'm here"

  IF(rank == 0) THEN
     !Output initial condition
     !----------------------------------------------------------------
     OPEN(unit = 11, file = "Fiinitial.dat")
     WRITE(11,*) 'Variables = "X", "Z", "Fi"'
     WRITE(11,*) 'Zone I = ', nx, 'J = ', nz, 'F = POINT'
     DO k = 1, nz
        DO i = 1, nx
           WRITE(11,*) X(i), Z(k), Fi(i,k)
        END DO
     END DO
     WRITE(11,*) 'Zone I = ', nx, 'J = ', nz, 'F = POINT'
     DO k = 1, nz
        DO i = 1, nx
           WRITE(11,*) X(i), Z(k), Fw(i,k)
        END DO
     END DO
     CLOSE(11)
  END IF

  CALL MPI_FINALIZE(ierror)

END PROGRAM gridtestpar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:36:57.710

您`mpi_gather()`错误地调用了子例程。你必须通过它的总数。应该作为发送缓冲区的一个整数和接收缓冲区的另一个整数进行通信的元素的数量。您传递的不是每个整数，而是一个包含两个整数的数组，其中包含沿每个维度的元素数。只需将数组中的数字相乘，然后将结果作为整数传递：

```
program gridtestpar
  use mpi
  implicit none

  integer, parameter :: dp = kind(1.0d0)
  integer :: nx, nz
  integer :: ierror, comm, p, rank, npr, s, f, np(2)
  real(dp), allocatable :: Fw(:,:), Fi(:,:)

  nx = (400*5)
  nz = (400*5)

  allocate(Fw(nx,nz))
  allocate(Fi(nx,nz))
  Fw(:,:) = 0.0_dp
  Fi(:,:) = 0.0_dp

  call mpi_init(ierror)
  comm = MPI_COMM_WORLD
  call mpi_comm_rank(comm, rank, ierror)
  call mpi_comm_size(comm, p, ierror)

  s = rank * npr + 1
  f = (rank + 1) * npr

  call mpi_gather(Fw(:,s:f), nx * (f - s + 1), MPI_DOUBLE_PRECISION, &
       Fw, nx * npr, MPI_DOUBLE_PRECISION, 0, comm, ierror)
  call mpi_gather(Fi(:,s:f), nx * (f - s + 1), MPI_DOUBLE_PRECISION, &
       Fi, nx * npr, MPI_DOUBLE_PRECISION, 0, comm, ierror)
  write(*,*) "I'm here"
  call mpi_finalize(ierror)

end program gridtestpar 
```

也许还有一些额外的评论：

*   请始终发布**最短的**自包含代码，以说明问题。没有人喜欢花时间阅读和尝试理解不相关的代码片段。抛弃所有对于重现问题不是必需的东西。也许，这样你甚至会自己找到解决方案。

*   `kind = 8`指定精度时不要使用。请参阅[此答案的最后一部分](https://stackoverflow.com/a/15227332/1859258)以及对其的一些评论以获取替代方案。

*   您应该使用 mpi*模块*而不是包含文件。

# magento - Magento 属性问题

> ID：15390826
> 
> 赞同：0
> 
> 时间：2013-03-13T16:20:41.390
> 
> 标签：magento, magento-1.7

我有一个网站，他们希望将产品标记为“趋势”并在产品页面和类别页面上显示星号。我一辈子都想不出最好的方法来做到这一点。没有隐藏属性可以关闭。

有没有人做过类似的事情或有一些指示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:45:37.383

对不起大家，

```
I was not thinking when I wrote this.  All I did was add a Yes/No Attribute in the set called trend_setter.  Then in the list.phtml I looked for 
```

$_product->_data['trend_setter'] == 1

在产品循环中，我根据此字段显示白色或黑色星形

# algorithm - 动态规划和矩阵的使用

> ID：15390832
> 
> 赞同：23
> 
> 时间：2013-03-13T16:20:58.760
> 
> 标签：algorithm, dynamic

我总是对动态编程如何使用矩阵来解决问题感到困惑。我大致了解该矩阵用于存储先前子问题的结果，以便在以后计算更大的问题时使用它。

但是，如何确定矩阵的维度，以及我们如何知道矩阵的每一行/列应该代表什么值？即，是否有构建矩阵的通用程序？

例如，如果我们有兴趣使用价值 c1,c2,..cn 的硬币来更改 S 金额，那么矩阵的维度应该是多少，每列/行应该代表什么？

任何方向性的指导都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2020-06-20T16:45:07.517

[**当一个问题同时表现出重叠子问题**](https://en.wikipedia.org/wiki/Overlapping_subproblems)和[**最优子结构**](https://en.wikipedia.org/wiki/Optimal_substructure)时，它就符合动态规划的条件。

其次，动态规划有两种变体：

*   制表法或自下而上法
*   记忆化或自上而下的方法（不是记忆~~化~~！）

动态规划源于这样一种思想，即一个大问题可以进一步分解为子问题。自下而上的版本只是首先解决这些子问题，然后逐步构建目标解决方案。自上而下的方法依赖于使用辅助存储来消除重新计算。

> 是否有构建矩阵的通用程序？

*这实际上取决于您要解决什么问题以及如何解决它！*矩阵通常用于制表，但它总是不必是矩阵。这里的主要目标是按需提供子问题的解决方案，它可以存储在数组、矩阵甚至哈希表中。

经典书籍[Introduction to Algorithms](https://en.wikipedia.org/wiki/Introduction_to_Algorithms)演示了使用一维数组作为辅助存储的两种方式来解决切杆问题。

> 例如，如果我们有兴趣使用价值 c1,c2,..cn 的硬币来更改 S 金额，那么矩阵的维度应该是多少，每列/行应该代表什么？

如果我没记错的话，您指的是硬币找零问题的“完全独特的找零方式”变体。您需要找到使用给定的一组硬币构建给定数量的总方法。有一个很棒的视频可以很好地分解它。它使用自下而上的方法：[https ://www.youtube.com/watch?v=DJ4a7cmjZY0](https://www.youtube.com/watch?v=DJ4a7cmjZY0)

假设您需要`n = 10`从给定的硬币子集构造数量`c = {1, 2, 10}` 取一个空集并继续从 中每行添加一个硬币`c`。对于下一行，从该组中添加一个硬币。列代表子问题。对于`i`in `n = 1 : 10`，第th 列表示可以使用该行中的硬币构建`i`的方式总数：`i`

```
--------------------------------------------------------
           |0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |
--------------------------------------------------------
|{}        |  |   |   |   |   |   |   |   |   |   |    |
--------------------------------------------------------
|{1}       |  | X |   |   |   |   |   |   |   |   |    |
--------------------------------------------------------
|{1, 2}    |  |   |   |   |   |   |   |   |   |   |    |
--------------------------------------------------------
|{1, 2, 10}|  |   |   | Y |   |   |   |   |   |   | Z  |
-------------------------------------------------------- 
```

在此表中，`X`表示金额 1 可以使用硬币构造的方式数量`{1}`，`Y`表示金额 3 可以使用硬币表示的方式数量，`{1, 2, 10}`以及`Z` 表示金额 10 可以使用硬币表示的方式数量`{1, 2, 10}`。

细胞是如何填充的？

最初，以 s 为标题的整个第一列`0`都是用 s 填充的，`1`因为无论你有多少硬币，对于金额 0，你只有一种方法来找零，那就是不找零。具有空子集的第一行的其余部分`{}`用 s 填充，`0`因为您无法在没有硬币的情况下对任何正数进行更改。现在矩阵看起来像这样：

```
--------------------------------------------------------
            0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |
--------------------------------------------------------
|{}        |1 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |  0 |
--------------------------------------------------------
|{1}       |1 | X |   |   |   |   |   |   |   |   |    |
--------------------------------------------------------
|{1, 2}    |1 |   |   |   |   |   |   |   |   |   |    |
--------------------------------------------------------
|{1, 2, 10}|1 |   |   | Y |   |   |   |   |   |   | Z  |
-------------------------------------------------------- 
```

现在，我们如何填充`X`？你有两种选择，要么使用`1`这个新超级套装中的硬币，要么不使用它。如果您没有使用硬币，方法与上一行相同`0`。但是由于`1`可以用来改变金额`1`，我们使用那个硬币，并从剩下`1`的金额中减去。现在在同一行中查找 ,的方式，即在其之前的列是。因此，将其添加到顶行的金额中，总计为. 因此，您将此单元格填充为.`1``0``0``X``1``1``1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-20T20:47:40.747

> 但是，如何确定矩阵的维度，以及我们如何知道矩阵的每一行/列应该代表什么值？即，是否有构建矩阵的通用程序？

您需要找到表示子问题所需的递归关系和状态（参数数量）。DP的整个想法是避免重新计算子问题。您只在第一次需要子问题时计算一次，将其存储在内存中，并在需要时引用存储的值。所以如果你以后想引用一个子问题的存储结果，你需要有一个唯一标识子问题的键。子问题的状态通常是这个键的好选择。如果一个子问题有 3 个参数`x`, `y`, `z`, 那么一个元组`(value of x, value of y, value of z)`例如，将子问题的结果存储在哈希表中是一个很好的键。如果这些值是正整数，您可以使用矩阵，即多维数组，而不是哈希表。让我们发展寻找递归关系和识别唯一表示子问题所需的状态的想法，以便消除您对矩阵维度的混淆。

* * *

能够解决 DP 问题（通常是任何递归问题）的最重要步骤是识别并能够写下递归关系。一旦确定了递归关系，我会说 90% 的工作已经完成。我们先来看看如何写出递推关系。

任何递归问题中的三个重要思想是

*   识别琐碎案例（答案已知的基本案例），
*   确定如何将问题划分为子问题
*   知道如何组合子问题的结果。

我们以归并排序为例。这不是 DP 问题，因为没有重叠的子问题，但是为了引入递归关系，它是一个很好的选择，因为它很有名且易于理解。您可能已经知道，归并排序中最简单的情况是大小为 0 或 1 的数组。递归步骤是将问题分成两个大小为当前问题一半大小的子问题，组合步骤是合并算法。最后我们可以写出归并排序的递归关系如下：

```
sort(0, n) = merge(sort(0, n/2), sort(n/2, n)) 
```

在上述`sort`算法的递推关系中，范围(0,n)的问题分为(0,n/2)和(n/2,0)两个子问题。组合步骤是合并算法。

现在让我们尝试推导一些 DP 问题的递归关系。您应该能够从递归关系中得出状态的维度（以及因此您对矩阵维度的混淆）。

请记住，要找到递归关系，我们需要识别子问题。识别子问题并不总是那么简单。只有实践更多的 DP 问题才能对这些问题有更好的直觉，并识别模式、反复试验等。

让我们确定两个看起来几乎相似但需要不同方法的问题的递归关系。我选择这个问题只是因为问题是关于矩阵维度的混淆。

* * *

> 1.  给定不同面额和数量的硬币，找出产生该数量所需的最小硬币数量。

让我们将寻找给定数量 n 所需的最小硬币数量的问题/算法表示为`F(n)`。如果面额是 p、q、r。

如果我们知道和的答案`F(n-p)`，即分别产生 np、nq 和 nr 所需的最小硬币数量，我们可以取这些和 1 中的最小值来获得产生数量所需的硬币数量。`F(n-q)``F(n-r)``n`

这里的子问题是和`F(n-p)`， 组合步骤是取这些值中的最小值并加一。`F(n-q)``F(n-r)`

所以递归关系为：

```
F(n) = min(F(n-p), F(n-q), F(n-r)) + 1

# Base conditions
F(0) = 0
F(n) = infinity if n < 0 
```

存在最优子结构，存在重复问题（如果不明显，就抽取一个样本问题绘制递归树），所以我们可以使用一些存储来避免重复计算。每个子问题都是递归树中的一个节点。

从递归关系可以看出，函数 F 只接受一个参数，即一个参数足以表示递归树中的子问题/节点，因此可以使用一维数组或由单个值键控的哈希表来存储子问题的结果。

* * *

> 2.  给定不同面额的硬币和数量，找出需要的硬币组合总数。

这个问题比较微妙。停下来想一想，试着找出递归关系。

让我们使用与上述问题相同的术语，即假设金额是 n，p、q、r 是面额。

与上述问题相同的重复是否有效？如果`F(n)`表示从给定面额中构成 n 的计数组合的总数，我们可以组合`F(n-p)`，`F(n-q)`并且`F(n-r)`有某种方法可以得到 F(n) 吗？添加它们怎么样？`F(n) = F(n-p) + F(n-q) + F(n-r)`持有吗？

取 n = 3 和两个面额 p, q = 1, 2

通过上面的递归关系，我们得到答案为 3，对应于拆分 [1, 1, 1], [1, 2], [2, 1] 这是不正确的，因为 [1, 2] 和 [2, 1] 是相同的教派组合。上面的递归是计算排列而不是组合的数量。为了避免重复的结果，我们需要整理硬币。我们可以通过强制 p 在 q 之前并且 q 在 r 之前来自己选择它。关注每个面额的组合数量。由于我们自己在可用面额 [p, q, r] 中执行订单。

让我们从 p 开始并解决以下递归。

```
F(n, only p allowed) = F(n-p, only p allowed) 

## Base condition
F(0) = 1   # There is only one way to select 0 coins which is not selecting any coinss 
```

现在让我们允许下一个面额 q，然后求解下面的递归。

```
F(n, p and q allowed) = F(n-q, p and q allowed) + F(n, only p allowed) 
```

最后，

```
F(n, p q and r allowed) = F(n-r, p q and r allowed) + F(n,  p and q allowed) 
```

上述三个递推关系一般可以写成如下形式，其中`i`是面额中的索引。

```
# F(n, i) = with denominations[i] + without denominations[i]
F(n, i) = F(n - denominations[i], i) + F(n, i-1)

## Base conditions
F(n, i) = 1 if n == 0
F(n, i) = 0 if n < 0 or i < 0 
```

从递归关系中，我们可以看到您需要两个状态变量来表示一个子问题，因此需要一个二维数组或一个以这两个值组合为键的哈希表（例如元组）来缓存子问题的结果。

另请参阅[获得硬币变化问题的动态规划解决方案的思考过程](https://stackoverflow.com/questions/59535474/thought-process-for-arriving-at-dynamic-programming-solution-of-coins-change-pro/59551834#59551834)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T21:20:47.280

本章很好地解释了它：[http](http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf) ://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf 在第 178 页，它提供了一些方法来识别允许您应用动态规划的子问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-13T20:11:40.907

DP 解决方案使用的数组几乎总是基于问题状态空间的维度——即每个参数的有效值

例如

```
fib[i+2] = fib[i+1] + fib[i] 
```

是相同的

```
def fib(i):
    return fib(i-1)+fib(i-2] 
```

您可以通过在递归函数中实现记忆化来使这一点更加明显

```
def fib(i): 
    if( memo[i] == null ) 
         memo[i] = fib(i-1)+fib(i-2)
    return memo[i] 
```

如果你的递归函数有 K 个参数，你可能需要一个 K 维矩阵。

# installation - 我可以在 Installshield 2011 的“文本文件更改”中设置替换条件吗？

> ID：15390838
> 
> 赞同：0
> 
> 时间：2013-03-13T16:21:24.507
> 
> 标签：installation, windows-installer, installshield, installshield-2011

我在 IS2011 中使用“文本文件更改”功能。我有一个文件，我想替换 2 个字符串：

1.  总是替换字符串
2.  仅当用户在安装对话框中选中复选框时才替换字符串

如何在 Installshield 2011 中设置更换条件？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T06:21:23.097

好吧，我意识到您不能在替换中设置条件，我不明白为什么 Flexera 没有在 Installshield 中实现它。
但是，对于一种解决方法，我将字符串替换为自身，以防替换它的 preoperty 没有改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T19:19:42.247

在 IS2010 中，我通过创建一个与 TextFileChange 项相关联的单独的空组件来完成条件化的“文本文件更改”操作。

然后，您可以在组件上放置一个条件。

# java - 如何关闭 ehcache 以进行测试

> ID：15390845
> 
> 赞同：3
> 
> 时间：2013-03-13T16:21:39.923
> 
> 标签：java, ehcache

我有一个 ehcache 的实现，它不使用 xml 中的任何配置，但如下所示：

```
private Ehcache cache;

constructor {
  cache = CacheManager.getInstance().addCacheIfAbsent("nameOfCache");
  CacheConfiguration config = cache.getCacheConfiguration();
  config.eternal("false")
  config.setTimeToLiveSeconds(<someTime>);
} 
```

现在，我以前使用过番石榴缓存，我知道通过将驱逐时间设置为`0`番石榴缓存，它会关闭缓存。但是通过阅读有关 ehcache 的文档，我了解到情况并非如此。有没有其他方法可以关闭缓存？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T16:31:36.180

从[Ehcache FAQ](http://ehcache.org/documentation/faq#is-there-a-simple-way-to-disable-ehcache-when-testing)中，您可以设置`net.sf.ehcache.disabled`系统属性以禁止 Ehcache 将元素添加到缓存。因为不会将任何元素添加到缓存中，所以每个缓存请求都会导致缓存未命中，从而提供您正在寻找的行为。

如果您从命令行启动 JVM，您可以像这样设置属性：

```
-Dnet.sf.ehcache.disabled=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:27:37.907

不知道如何为 Ehcache 执行此操作，但我们在我的项目中做了类似的事情。首先，我们为缓存编写了一个外观模式（以允许在其后面使用 Ehcache 或 Guava 缓存）。然后我实现了一个`OptionalCache`以`Nullable`缓存或缓存构建器作为构造函数的方法。如果缓存存在，则`OptionalCache`使用它，否则不存在（使用`CacheLoader`获取值或返回`null`）。这允许我们为缓存/缓存构建器传递 null 以进行测试。

# c - 逐字反转字符串

> ID：15390846
> 
> 赞同：2
> 
> 时间：2013-03-13T16:21:40.487
> 
> 标签：c, string

我能够反转一个字符串。例如，我可以将“reverse a string”反转为“esrever a gnirts”。但我无法像“string a reverse”那样逐字颠倒它。

```
void reverseString(char string[],char *start, char* end)
{

    char tmp; //temporary variable to swap values
    int count = 0;
    while(start<end)
    {
        if(*start==' ')
        {
            printf("found space count %d \n",count);
            reverseString(string,start-count,start);
        }
        tmp = *start;
        *start = *end;
        *end = tmp;
        *start++;
        *end--;
        count++; 
    }

    printf(" string %s \n", string); 
}

int main()
{
    char string[] = "reverse a string word by word";
    char *start =string;
    char *end =start+ strlen(string) -1;
    reverseString(string,start,end);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:26:25.370

做你已经做过的事情，然后反转整个结果（不特别处理空格）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:05:17.547

这就是方法。我能够逐字反转字符串以及整个字符串。只需浏览代码，看看逻辑是否有帮助。

```
#include <stdio.h>
#include <string.h>

void stringrev(char *);
void reverseWords(char *);
void reverseString(char* , int);

int main()
{

    char string[] = "reverse a string word by word";
    reverseWords(string);
    printf("\nWord-Wise Reversed String : %s\n",string);
    stringrev(string);
    return 0;

}

void reverseWords(char * str)
{
    int i = 0, j = 0;
    reverseString( str, strlen(str) ); 
    while( 1 ) // Loop forever
    {
        if( *(str+j) == ' ' || *(str+j) == '\0') // Found a word or reached the end of sentence
        {
            reverseString( str+i, j-i );
            i = j+1;
        }
        if( *(str+j) == '\0')
        {
            break;
        }
        j++;
    }
}

void reverseString(char* str, int len)
{
    int i, j;
    char temp;
    i=j=temp=0;

    j=len-1;
    for (i=0; i<j; i++, j--)
    {
        temp=str[i];
        str[i]=str[j];
        str[j]=temp;
    }
}

void stringrev(char *str)
{
    int i=-1,j=0;
    char rev[50];

    while(str[i++]!='\0');

        while(i>=0)
         rev[j++] = str[i--];

    rev[j]='\0';

    printf("\nComplete reverse of the string is : %s\n",rev);    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:55:50.057

使用堆栈实现来解决这个问题

Step1：将字符串写入文件

Step2：从文件中读取并推送到链表

Step3：在这个链表上使用栈实现

Step4：从头到尾弹出链表！！

就是那个反面……！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-30T10:45:18.163

**使用 C# 反转字符串中的单词**

```
public  string ReverseWordsInString(string inputString)
{
    string output = string.Empty;
    string[] splitStrings = inputString.Split(' ');
    for (int i = splitStrings.Length-1; i > -1 ; i--)
    {
        output = output + splitStrings[i]+ " ";
    }
    return output;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T17:09:50.440

效率不高，但应该可以：

```
void reverse_string_word(char *data)
{
    char *saveptr;
    char *word;
    char *tmp = malloc(strlen(data) + 1);
    char *tmp2 = malloc(strlen(data) + 1); 

    *tmp = 0;
    *tmp2 = 0;

    word = strtok_r(data, " ", &saveptr);
    if (word)
    {
        strcpy(tmp, word);
    }
    while (word)
    {
       word = strtok_r(NULL, " ", &saveptr);
       if (word)
       {
          sprintf(tmp2, "%s %s", word, tmp);
          strcpy(tmp, tmp2);
       }
    }
    strcpy(data, tmp);
    free(tmp);
    free(tmp2);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T17:27:25.160

将其拆分为单词数组（ char** ），将其反转，然后再次将其连接起来。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-21T06:34:56.880

这是一个不使用 Scanner 或 Stack 来解析单词的 Java 解决方案。从字符串的末尾开始并向后工作。可能更优雅但有效 - 如果有人有递归 java 解决方案，我想看看它。

```
"one two three four" is returned as "four three two one" 

private void reverseWordsNoStackNoScanner(String str) {
        System.out.println("reverseWordsNoStackNoScanner "+str);

        String[] buff = new String[str.length()];
        int end=str.length()-1;
        int j=end;
        int start=0;
        int ptr=0;
        for (int i=str.length()-1;i>=0;i--){
            boolean writeBuff=false;
            if (str.charAt(i)!=' ') { // have we backed up to a blank?
                j--; //no
            } else { //yes! write out this word
                writeBuff=true;
            }
            if (i==0) writeBuff=true; //are we done (position 0)?

            if (writeBuff) { //time to write a word?                
                //we've hit a delimiter (or we're done)     
                ptr=j;  //pointing at a blank or the beginning
                ptr++;  //bump past the blank or the beginning
                while(ptr<=end){ //write the word from beginning to finish
                    buff[start++]=String.valueOf(str.charAt(ptr++));
                }
                //don't write a blank when we are on the last word (past the end)
                if (i>0)buff[start++]=" "; 
                j--;
                //set pointers for next iteration
                end=j; //back up end ptr to new 'end' - to parse the next word
            } 
        }
            //print out our reversed word string
        for (String s: buff) {
            System.out.print(s);                        
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-23T13:54:11.747

从头开始读取字符串并将每个字符压入字符堆栈。一旦遇到空格或换行符或 eof，就开始弹出字符并在标准输出上一一打印，或根据需要将其存储在文件中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-08T12:40:32.467

```
'My name is' return as 'yM eman si'
     'My name is' return as 'yM      eman si'
 #include<stdio.h>
 #include<malloc.h>
 #include<string.h>
 void reve(char [],int,int);
 void main()
 {
   char *a;
   int i,j=-1;
   a=(char*)malloc(1000*sizeof(char));
   gets(a);
   for(i=0;a[i]!='\0';i++)
   {
      if(a[i]!=' '&&j==-1)
       j=i;
      if((a[i]==' '&&a[i+1]!=' '&&j>=0)||a[i+1]=='\0')
      {
        a[i]==' '?reve(a,j,i-1):reve(a,j,i);
        j=-1;                
      }
 } 
   for(i=0;a[i]!='\0';i++)
   printf("%c",a[i]); 
```

}

```
void reve(char a[],int j,int i)
{
   char temp;
   if(a[0]==' ')
   j=0;
  for(;i!=j&&j<i;i--,j++)
  {
      temp=a[j];
      a[j]=a[i];
      a[i]=temp;
   } 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-02T11:47:43.370

```
'i love india' return as  'india love i'
'     i love india' return as 'india love      i'
#include<stdio.h>
#include<malloc.h>
#include<string.h>
void reve(char [],int,int);
void main()
{
  char *a;
  int i,j=-1;
  a=(char*)malloc(1000*sizeof(char));
  gets(a);
  for(i=0;a[i]!='\0';i++)
  {
    if(a[i]!=' '&&j==-1)
     j=i;
     if((a[i]==' '&&a[i+1]!=' '&&j>=0)||a[i+1]=='\0')
     {
        a[i]==' '?reve(a,j,i-1):reve(a,j,i);
        j=-1;                
      }
 } 
  reve(a,0,i-1);
  for(i=0;a[i]!='\0';i++)
  printf("%c",a[i]); 
```

}

```
void reve(char a[],int j,int i)
{
  char temp;
  if(a[0]==' ')
  j=0;
 for(;i!=j&&j<i;i--,j++)
 {
     temp=a[j];
      a[j]=a[i];
      a[i]=temp;
  } 
```

}

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-11T04:29:39.830

它不应该像其他人发布的那样复杂，请参考并提供反馈，很高兴改进它。

```
#include <stdio.h>
#include <string.h>

void printWordsInReverse(char str[])
{
    int i;
    int length = strlen(str);

    for(i=length-1; i>=0; i--)
    {
        if(str[i] == ' ')
        {
            /* replace the space with null for the next word */
            str[i] = '\0';
            /* remove the white spaces */
            if(str[i+1] != '\0')
            {
            /* print a word till the null character */
                printf("%s ", &str[i+1]);
            }
        }
    }
    /* print the last word */
    printf("%s", str);
}

int main()
{
    char str[] = "reverse a string";
    printWordsInReverse(str);
    return 0;
} 
```

输出：“字符串反向”

# jquery - 滚动过去标题时无法显示导航 div

> ID：15390847
> 
> 赞同：0
> 
> 时间：2013-03-13T16:21:42.857
> 
> 标签：jquery, scroll

这是我已经得到的代码：

```
$(document).ready(function()
{
    /*Scrolls to whichever element is clicked if is has .scrollPage class */
    $('.scrollPage').click(function() {
        var elementClicked = $(this).attr("href");
        var destination = $(elementClicked).offset().top;
        $("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination-0}, 500 );
        return false;
    });

    $('#backToTop').hide();
    $('#sideNav').hide();

    var headerHeight = $('#header').height();   

    /* Detect when page is scrolled */
    $(document).scroll(function(){ 
        var scrolledpx = parseInt($(document).scrollTop()); 
        if (scrolledpx > headerHeight) {
            $("#backToTop").fadeIn(500);
            $("#sideNav").fadeIn(500);
        }
        else if (scrolledpx < headerHeight) {
            $("#backToTop").fadeOut(500);
            $("#sideNav").fadeOut(500);         
        }
    });

}); 
```

#backToTop 对应的 HTML 是：

```
<div id="backToTop">
Top
</div> 
```

和CSS：

```
.backToTop {
position: fixed;
top: 10px;
left: 10px;
} 
```

问题是当我在标题下方滚动时#backToTop 不显示，但是当我单击链接滚动到特定部分时（效果很好），它似乎为#backToTop 留下了空间（即它只是移动页向下一行），但不显示。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:28:52.270

对不起，很简单。我在 CSS 中使用 .backToTop 而不是 #backToTop。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:29:18.823

看到这个小提琴：http: [//jsfiddle.net/Fcden/](http://jsfiddle.net/Fcden/)

你的CSS应该是：

```
#backToTop {
position: fixed;
top: 10px;
left: 10px;
} 
```

因为`backToTop`是`id`（不是`class`）分配给 div，

# api - 是否有用于生成与 Google 兼容的站点地图的免费 API？

> ID：15390849
> 
> 赞同：0
> 
> 时间：2013-03-13T16:21:44.287
> 
> 标签：api, sitemap

有很多网站免费提供这项服务，比如[这个](http://www.xml-sitemaps.com/)。

服务的输入/输出是完美的。这是一个 url，它给了我一些 XML。

有谁知道可用作 API 的类似服务，所以我可以通过传递站点 url 来调用它，并返回一些 xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:50:04.627

不是免费的。但是您可以使用 A1 Sitemap Generator 的命令行版本。它可以做你想做的事，见： http: [//www.microsystools.com/products/sitemap-generator/help/automate-sitemap-build-upload/](http://www.microsystools.com/products/sitemap-generator/help/automate-sitemap-build-upload/)

否则，我相信您可以找到一些创建站点地图的旧 PHP 脚本，然后根据您的需要定制它们？一个例子可能是：[http ://enarion.net/tools/phpsitemapg/](http://enarion.net/tools/phpsitemapng/)

# ios6 - iOS 6 从 UIViewController 横向返回纵向

> ID：15390851
> 
> 赞同：1
> 
> 时间：2013-03-13T16:21:49.597
> 
> 标签：ios6, orientation, uiinterfaceorientation

所以我有一个带有导航控制器的应用程序，最后一个 viewcontoller 可以旋转到任何方向。其他人必须是纵向的。因此，当我们在横向旋转最后一个 viewController 然后按下导航控制器上的后退按钮时，我遇到了麻烦。我们转到上一个，看到布局被破坏了。我认为唯一的方法是使用这样的东西：

```
[[UIDevice currentDevice] performSelector:NSSelectorFromString(@"setOrientation:") withObject:(id)UIInterfaceOrientationPortrait] 
```

（我知道这是一个 hack，最好避免这样的事情）但是无论我在哪里尝试 - 它都给我带来了不同的布局问题。常用的方法如：

```
- (NSUInteger)supportedInterfaceOrientations
- (BOOL)shouldAutorotate 
```

在这种情况下，用于手柄方向的等等都是无用的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:43:48.780

我为那些必须是纵向的视图控制器的父级解决了这个问题：

```
-(NSUInteger)supportedInterfaceOrientations{
 return UIInterfaceOrientationMaskPortrait;
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
 return UIInterfaceOrientationPortrait;
}
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:YES];
} 
```

对于旋转视图控制器：

```
-(NSUInteger)supportedInterfaceOrientations{
 return UIInterfaceOrientationMaskAll;
} 
```

对于导航控制器：

```
- (BOOL)shouldAutorotate {

BOOL result = self.topViewController.shouldAutorotate;

 return result;
}

- (NSUInteger)supportedInterfaceOrientations {

NSUInteger result = self.topViewController.supportedInterfaceOrientations;

return result;
} 
```

并将其添加到 AppDelegate：

```
- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {

UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
if ([navigationController.topViewController isKindOfClass:[RotationViewController  class]])
    return UIInterfaceOrientationMaskAll;
else
    return UIInterfaceOrientationMaskPortrait;
} 
```

# c# - 在 C# 中使用模板进行分配

> ID：15390853
> 
> 赞同：0
> 
> 时间：2013-03-13T16:21:59.937
> 
> 标签：c#, templates, generics, covariance

```
public class Animal
{

}
public class Cat : Animal
{

}

public class AnimalBag<T> where T : Animal
{

} 

...
AnimalBag<Animal> bag = new AnimalBag<Cat>(); 
```

我收到此错误：

> 无法将类型隐式转换`AnimalBag<Cat>`为“AnimalBag”

如果我尝试这个：

```
AnimalBag<Animal> bag = (AnimalBag<Animal>) new AnimalBag<Cat>(); 
```

> 无法将类型转换`AnimalBag<Cat>`为`AnimalBag<Animal>`。

如何在 C# 中解决此类问题？这在 Java 中完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:27:37.530

声明`AnimalBag<Animal> bag`指出，bag 将能够存储任何类型的**Animal**。该作业`= new AnimalBag<Cat>();`与此相矛盾，说它实际上只能存储**Cats**。它是哪一个，因为它不能两者兼而有之？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:28:57.717

这种情况是 co-variant 发挥作用的地方，但 co-variant 不适用于*class*，仅适用于*interface*和*delegate*，因此您需要使用关键字定义`interface`co-variant ：`out`

```
public interface IAnimalBag<out T> where T : Animal
{
}

public class AnimalBag<T> : IAnimalBag<T> where T: Animal
{
} 
```

然后你可以分配：

```
IAnimalBag<Animal> bag = new AnimalBag<Cat>(); 
```

您可以在泛型中检查更多[协方差和逆变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)

# java - 谁负责 MySQL 和 Hibernate 之间主键的自动递增？

> ID：15390856
> 
> 赞同：5
> 
> 时间：2013-03-13T16:22:01.673
> 
> 标签：java, mysql, hibernate, auto-increment

*MySQL*

```
CREATE TABLE `role` (
  `id_role` INT(11) unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id_role`)
) AUTO_INCREMENT=1; 
```

*休眠*

```
@Entity
public class Role {

    private Integer idRole;

    @Column(name = "id_role", precision = 10)
    @GeneratedValue
    @Id
    public Integer getIdRole() {
        return idRole;
    }

    public void setIdRole(Integer idRole) {
        this.idRole = idRole;
    }

} 
```

鉴于上述背景，谁负责`id_role`在创建新列时自动增加列`role`？换句话说，Hibernate 是在运行`create`SQL 语句之前设置主键值，还是将其设置为`null`并让 MySQL 在取回所选主键时自动递增字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T17:11:10.767

要使用 MySQL`AUTO_INCREMENT`列，您应该使用以下`IDENTITY`策略：

```
@Id @GeneratedValue(strategy=GenerationType.IDENTITY)
private Long id; 
```

这是你在使用`AUTO`MySQL 时会得到的：

```
@Id @GeneratedValue(strategy=GenerationType.AUTO)
private Long id; 
```

这实际上相当于

```
@Id @GeneratedValue
private Long id; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:33:42.577

如果您指定`GenerationType.IDENTITY`，则数据库将负责分配初始标识符。所以，使用

```
@GeneratedValue(strategy=GenerationType.IDENTITY) 
```

会让数据库负责。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:27:08.983

绝对是数据库。每个 db 方言都有一种稍微不同的方式让 Hibernate 然后查询新分配的 ID 是什么，以便它可以在您的实体上设置它

# java - 通过 jaxb 和 ant 针对 xsd 生成 java 类

> ID：15390857
> 
> 赞同：2
> 
> 时间：2013-03-13T16:22:05.960
> 
> 标签：java, ant, jaxb

我有一个具有某种结构的模块（src/com/mycompany）。我需要使用 jaxb 从 xsd 生成部分代码。在构建阶段生成它们也很重要。我需要为它指定蚂蚁目标。

```
<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
<classpath path="${xjc.task.path}"/>
</taskdef>

<target name="schema-to-java">
<xjc destdir="./src/gen">
<schema dir="./META-INF/xsd" includes="**/*.xsd"/>
</xjc>
</target> 
```

xjc.task.path - jaxb-2.0 目录的路径。

src 和 META-INF 位于同一级别（项目目录）

项目构建成功，但没有生成类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T08:09:26.127

你没有生成类的原因是你没有**编译你的java源代码（即.java）**。

**xjc** ant ask 只会生成 java 源代码。您需要另一个 ant 任务来生成类，即**javac**

# python - 对于非常大的整数，np.sqrt 的奇怪行为

> ID：15390858
> 
> 赞同：9
> 
> 时间：2013-03-13T16:22:09.213
> 
> 标签：python, numpy, long-integer, sqrt

```
>>> np.__version__
'1.7.0'
>>> np.sqrt(10000000000000000000)
3162277660.1683793
>>> np.sqrt(100000000000000000000.)
10000000000.0
>>> np.sqrt(100000000000000000000)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: sqrt 
```

呃……`AttributeError: sqrt`那这里发生了什么事？ `math.sqrt`似乎没有同样的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T16:26:11.773

最后一个数字是一个`long`（Python 的任意精度整数的名称），NumPy 显然无法处理：

```
>>> type(100000000000000000000)
<type 'long'>
>>> type(np.int(100000000000000000000))
<type 'long'>
>>> np.int64(100000000000000000000)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: Python int too large to convert to C long 
```

发生这种`AttributeError`情况是因为 NumPy 看到它不知道如何处理的类型，默认调用`sqrt`对象上的方法；但这不存在。所以不是`numpy.sqrt`缺少那个，而是`long.sqrt`.

相比之下，`math.sqrt`知道`long`。如果您要在 NumPy 中处理非常大的数字，请尽可能使用浮点数。

**编辑**：好的，您使用的是 Python 3。虽然 和 之间的区别`int`在该版本`long` [中消失](http://www.python.org/dev/peps/pep-0237/)了，但 NumPy 仍然对[`PyLongObject`](http://hg.python.org/cpython/file/38e263d40d81/Objects/longobject.c)可以成功转换为 C `long`using[`PyLong_AsLong`](http://docs.python.org/3/c-api/long.html#PyLong_AsLong)和不能成功转换的 C 之间的区别很敏感。

# .net - MediaCapture Windows 8 桌面 - 照片变暗

> ID：15390861
> 
> 赞同：2
> 
> 时间：2013-03-13T16:22:15.270
> 
> 标签：.net, windows-8, .net-4.5

我正在尝试在 Windows 8 桌面应用程序 (WinForms .NET 4.5) 中使用 MediaCapture API。我可以使用 API 拍照，但照片显得很暗。此外，MediaCapture API 似乎没有按应有的方式自动触发相机闪光灯。

我已尝试根据 MSDN 文档将亮度、合同、白平衡和曝光设置为自动。这是相关的代码。

```
 _mediaCapture = new MediaCapture();

     // init the settings of the capture
     var settings = new MediaCaptureInitializationSettings();
     settings.AudioDeviceId = "";
     settings.VideoDeviceId = _currentDeviceId;
     settings.PhotoCaptureSource = Windows.Media.Capture.PhotoCaptureSource.Photo;
     settings.StreamingCaptureMode = Windows.Media.Capture.StreamingCaptureMode.Video;
     await _mediaCapture.InitializeAsync(settings);

     // Find the highest resolution available
     ImageEncodingProperties resolutionMax = null;
     int max = 0;
     var resolutions = _mediaCapture.VideoDeviceController.GetAvailableMediaStreamProperties(MediaStreamType.Photo);
     foreach (IMediaEncodingProperties t in resolutions)
     {
        var properties = t as ImageEncodingProperties;
        if (properties != null)
        {
           var res = properties;
           if (res.Width * res.Height > max)
           {
              max = (int)(res.Width * res.Height);
              resolutionMax = res;
           }
        }
     }
     await _mediaCapture.VideoDeviceController.SetMediaStreamPropertiesAsync(MediaStreamType.Photo, resolutionMax);

     _mediaCapture.VideoDeviceController.Focus.TrySetAuto(true);

     _mediaCapture.VideoDeviceController.Brightness.TrySetAuto(true);

     _mediaCapture.VideoDeviceController.Contrast.TrySetAuto(true);

     _mediaCapture.VideoDeviceController.Exposure.TrySetAuto(true);

     _mediaCapture.VideoDeviceController.WhiteBalance.TrySetAuto(true);

     var imageProperties = ImageEncodingProperties.CreateJpeg();
     using (var fPhotoStream = new InMemoryRandomAccessStream())
     {
        // Take the photo and show it on the screen
        await _mediaCapture.CapturePhotoToStreamAsync(imageProperties, fPhotoStream);
        await fPhotoStream.FlushAsync();

        fPhotoStream.Seek(0);

        var bytes = new byte[fPhotoStream.Size];
        await fPhotoStream.ReadAsync(bytes.AsBuffer(), (uint)fPhotoStream.Size, InputStreamOptions.None);

        using (var byteStream = new MemoryStream(bytes))
        {
           return new Bitmap(byteStream);
        }
     } 
```

任何指导将不胜感激。

**编辑：我将此代码移植到 Metro 应用程序中，并且相机运行良好。我开始认为底层框架（Metro vs. Desktop）是罪魁祸首。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-19T22:50:23.667

迟到的回复，但以防万一将来对人们有所帮助：深色图片通常是由于缺少视频预览。相机驱动程序使用预览流来运行他们的 3A 算法（自动白平衡/对焦/曝光）。目前，让 MediaCapture 在桌面应用程序中进行预览有点挑战。一种方法是创建一个 D3DImage 并依靠一些本机互操作来调用 Media Foundation 和 DirectX。它不是微不足道的，但可以封装，因此 C# API 表面保持简单。这是一些代码示例： [https ://github.com/mmaitre314/MediaCaptureWPF](https://github.com/mmaitre314/MediaCaptureWPF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T11:46:10.647

```
await mc.InitializeAsync(new MediaCaptureInitializationSettings {
    PhotoCaptureSource = PhotoCaptureSource.VideoPreview }
); 
```

是解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T09:43:00.927

您可以尝试如下更改您的媒体设置，应该会更好：

```
settings.StreamingCaptureMode = Windows.Media.Capture.StreamingCaptureMode.AudioAndVideo;
settings.PhotoCaptureSource = Windows.Media.Capture.PhotoCaptureSource.VideoPreview; 
```

# nhibernate - 使用 FluentNHibernate PersistenceSpecification 时单向一对多 NHibernate 映射失败

> ID：15390868
> 
> 赞同：2
> 
> 时间：2013-03-13T16:22:26.667
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我有一个域模型，其中 a`Order`有很多`LineItem`s。当我创建一个新的`Order`（使用 new `LineItems`）并用于`PersistenceSpecification`测试映射时，NHibernate 会抛出一个 PropertyValueException：

```
var order = new Order() { LineItems = new List<LineItem>() };
order.LineItems.Add(new LineItem());
new PersistenceSpecification<Order>(session)
    .CheckList(o => o.LineItems, order.LineItems) // PropertyValueException
    .VerifyTheMappings(); 
```

> NHibernate.PropertyValueException：非空属性引用空值或瞬态值 LineItem._Order.LineItemsBackref

## 领域模型

```
public class Order {
    public virtual Guid Id { get; set; }
    public virtual ICollection<LineItem> LineItems { get; set; }
    [...]
}
public class LineItem {
    public virtual Guid Id { get; set; }
    [...]
} 
```

A`LineItem`本身并不有趣，没有 a 就永远不会出现`Order`，所以关系是单向的。

## 流利的映射/架构

```
// OrderMap.cs
Id(x => x.Id).GeneratedBy.GuidComb();
HasMany(x => x.LineItems)
  .Not.Inverse()
  .Not.KeyNullable()
  .Not.KeyUpdate()
  .Cascade.AllDeleteOrphan();

// LineItemMap.cs
Id(x => x.Id).GeneratedBy.GuidComb();

// Schema
CREATE TABLE Orders    ( Id uniqueidentifier NOT NULL, /* ... */ )
CREATE TABLE LineItems ( Id uniqueidentifier NOT NULL, 
                         OrderId uniqueidentifier NOT NULL, /* ... */ ) 
```

LineItems 表中的外键列不可为空，因此根据我指定[的这个问题中的信息，](https://stackoverflow.com/a/7601312/4160)`Not.KeyNullable()`并`Not.Inverse()`防止 NHibernate 尝试插入`LineItem`带有 NULL的 a `Id`。

我正在使用 NHibernate 3.3.2.400 和 FluentNHibernate 1.3.0.733（来自 NuGet 的当前最新版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:03:35.507

发生这种情况是因为[该`CheckList()`](https://github.com/jagregory/fluent-nhibernate/blob/40d05ae2096811246719470a47d1d30d14c57147/src/FluentNHibernate/Testing/Values/ReferenceList.cs#L16)方法会在您调用它时[尝试将每个项目保存在列表中。](https://github.com/jagregory/fluent-nhibernate/blob/40d05ae2096811246719470a47d1d30d14c57147/src/FluentNHibernate/Testing/Values/ReferenceList.cs#L16)此时，父实体尚未保存——[直到您调用`VerifyTheMappings()`](https://github.com/jagregory/fluent-nhibernate/blob/40d05ae2096811246719470a47d1d30d14c57147/src/FluentNHibernate/Testing/PersistenceSpecification.cs#L50).

由于关系是单向的，因此子实体 ( `LineItem`) 不能持久化，除非它是父实体 ( ) 的一部分`Order`，并引发异常。（[GitHub问题](https://github.com/jagregory/fluent-nhibernate/issues/212)）

除了“不要费心测试列表映射”之外，我还没有解决方案。

# asp.net-mvc-4 - 如何在 IIS6 中使用 EmbeddedResourceVirtualPathPovider

> ID：15390873
> 
> 赞同：0
> 
> 时间：2013-03-13T16:22:42.467
> 
> 标签：asp.net-mvc-4, iis-6, virtualpathprovider

在使用 VS2010 使用 Mvc.JQuery.Datatables Nuget 开发 ASP.NET MVC4 Web 应用程序时，我发现引用的 EmbeddedResourceVirtualPathProvider NuGet 在我的开发盒上运行良好，但在我的生产盒上却惨遭失败。

生产盒是 Windows 2003，安装了 IIS6 和 .NET 4.0。

我在 SO 和谷歌上搜索了很多东西，但是在实施了建议的解决方法之后，它仍然失败：

这就是我所做的。

1.  [按照https://stackoverflow.com/a/5178993](https://stackoverflow.com/a/5178993)`AppInitialize`的建议实施
2.  [按照http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)的建议为 ASP.NET 实施通配符映射
3.  [按照https://stackoverflow.com/a/3144841](https://stackoverflow.com/a/3144841)的建议为静态文件实施 IgnoreRoute

但它仍然不能提供所有文件。我得到了嵌入的部分视图，但没有嵌入的 css、js 和 jpg 文件。

我的 web.config 有一个 StaticFileHandler 的条目，如下所示：

```
<system.webServer>
  <handlers>
    <add path="*.css" verb="GET" name="Static css" type="System.Web.StaticFileHandler" />
    <add path="*.js" verb="GET" name="Static js" type="System.Web.StaticFileHandler" />
    <add path="*.jpg" verb="GET" name="Static jpg" type="System.Web.StaticFileHandler" />
    <add path="*.gif" verb="GET" name="Static gif" type="System.Web.StaticFileHandler" />
  </handlers>
</system.WebServer> 
```

我似乎遗漏了一些关键的东西。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:22:42.467

使用 IIS6 时，#1-3 中列出的所有项目都是必需的，但另外，您需要认识到 IIS6 将其处理程序定义为`httpHandlers`在`system.web`部分中，而 IIS7 调用它们`handlers`并且它们在`system.webServer`配置文件的部分中。

因此，您需要添加以下内容才能使其在 IIS6 中工作

```
<system.web>
  ....
  <httpHandlers>
    <add path="*.css" verb="GET" type="System.Web.StaticFileHandler" />
    <add path="*.js" verb="GET" type="System.Web.StaticFileHandler" />
    <add path="*.jpg" verb="GET" type="System.Web.StaticFileHandler" />
    <add path="*.gif" verb="GET" type="System.Web.StaticFileHandler" />
  </httpHandlers>
</system.web> 
```

# asp.net - 从 MVC 应用程序自动化分步过程

> ID：15390876
> 
> 赞同：1
> 
> 时间：2013-03-13T16:22:55.240
> 
> 标签：asp.net, asp.net-mvc-4

我们在 Web 应用程序中使用 SOLR 进行自动完成搜索。我们有一个每晚的进程，将一堆数据添加到我们的数据库中，一旦该进程完成，我们需要将数据库中的数据导入我们的 SOLR 服务器。

目前，导入过程按以下顺序手动完成：

1.  检查 ondeck SOLR 服务器是否空闲
2.  告诉 ondeck 服务器做一个完整的数据导入，服务器状态是“忙碌”
3.  每隔一段时间轮询 ondeck 服务器，当它完成时，状态恢复为空闲。
4.  将 ondeck 服务器（带有新信息）与实时 SOLR 服务器交换。
5.  在我们的数据库上运行存储过程。

我们的网络应用程序上有一个管理工具页面。我想要做的是在该页面上放置一个按钮来启动该过程（通过对我们的 Web 应用程序的 AJAX 调用）并告诉用户该过程已被启动。整个过程大约需要一个小时，所以我不能让 AJAX 调用运行一个小时，然后返回页面告诉用户该过程已完成。

我需要它异步完成。该过程必须被启动，一旦它被启动，它就会通知用户它已经开始，然后应用程序继续等待该过程的每个步骤，然后调用下一步直到它完成。MVC 4 中的代码如何实现这一点？我一直在看 MSDN 上的教程`async`，`await`但我有点困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:35:05.743

我可能会建议您查看 Websokets（如果您必须支持旧浏览器，则可以使用长轮询）。有一个非常棒的库，叫做[SignalR](http://signalr.net/)，它会为你处理所有复杂的工作人员。如果客户端浏览器支持，它使用 websockets，如果不支持，它会自动切换到长轮询。它在 Internet 上有很好的[文档](https://github.com/SignalR/SignalR/wiki/QuickStart-Persistent-Connections)和大量的示例。

# .htaccess - 使用查询字符串去这里，没有去那里，.htaccess 重定向

> ID：15390877
> 
> 赞同：0
> 
> 时间：2013-03-13T16:22:55.337
> 
> 标签：.htaccess, mod-rewrite

我制作了一个网站的静态图像，并通过重写规则链接了 html 文件：

```
RewriteRule ^$ static/index.html [L]
RewriteRule ^stuff$ static/stuff.html [L] 
```

等等。我知道，这不是最聪明的方法，但它确实有效。现在的问题：我想要那个

```
domain.com/?format=feed&amp;type=rss 
```

由仍然存在于根目录中的 cms 的 index.php 再次处理。我的尝试喜欢

```
RewriteCond %{REQUEST_FILENAME} !feed= 
```

不成功 - 请求始终只附加在重定向的静态文件中。

### 我怎样才能实现 Feed 请求确实由 cms 处理？

我的背景是，尽管存在复杂的缓存机制，但它们都没有像共享主机的静态文件那样响应。提前致谢！

编辑：我来时最近的似乎

```
RewriteCond %{QUERY_STRING} !^(.*&)?format=feed
RewriteRule ^(.*)$ static/%{REQUEST_URI}.html [L,QSA,R=301] 
```

但是，当定向到静态版本时，这会导致尾部斜杠太多......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:17:17.920

你可以只测试`format=feed`. 无需进一步的上下文

```
RewriteCond %{QUERY_STRING} !format=feed 
```

或者你可以反过来做并明确重写为`index.php`

```
RewriteCond %{QUERY_STRING} format=feed
RewriteRule ^$ /index.php [L] 
```

# google-tv - Wowza 和 GoogleTV 的工件问题：PE 的结果检查指针为空

> ID：15390879
> 
> 赞同：1
> 
> 时间：2013-03-13T16:22:59.113
> 
> 标签：google-tv, wowza

我正在通过 HLS 将来自 Wowza 的实时信息流传输到 GoogleTV 盒子。我遇到了很多关于工件的问题，如果您丢失数据包，您会看到这种问题，其中部分屏幕滞后并且在下一个关键帧到达之前无法正确更新。在 Visio、HiSense 和 Sony 上也是如此，有最新更新（GoogleTV FW 3.2 和 Wowza 3.5.2）。在 VLC 或 Nexus 4/7 上观看相同的流效果很好。

这是我从 logcat 得到的：

```
[ 03-13 16:07:15.343   678:0xb3c W/MVBerlinVideoEngine36 ]
  ** empty vid_meta!!!

[ 03-13 16:07:15.423   678:0x2f1 E/MVBerlinVideoEngine36 ]
  !! PE's result check pointer is null line = 536 
```

媒体是由 VLC 编码的实时流。

```
vlc udp://@239.0.0.2:10021 --sout "#transcode{deinterlace,deinterlace-mode=linear,acodec=aac,ab=160,vcodec=h264,venc=x264{profile=high,level=4.1,preset=fast}}:rtp{mux=ts,dst=192.168.100.10,port=10021}" 
```

在这一点上，我不知道该从哪里继续。我能以某种方式获得更多信息吗？最有可能是解码问题、网络问题（尝试了有线 + 几个 wifi 网关）还是代码问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:36:06.093

这是设备上的固件错误。您现在将无法解决此问题。提交的内部错误 - 您需要等待更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:34:52.983

我们也经常会遇到画面底部卡顿的问题，尤其是在播放动态强烈、场景变化频繁的mp4文件时。您打算何时更新软件？是否有解决此问题的可下载的 GoogleTV 测试版？

# ios - 带有多行项目的 iOS 选择器控件

> ID：15390882
> 
> 赞同：1
> 
> 时间：2013-03-13T16:23:08.937
> 
> 标签：ios, user-interface, uipickerview

我需要向用户展示一个项目列表，允许他们选择其中一个项目。我已经尝试过 UIPickerView，但它相当有限，因为它为每个项目显示一行文本。

我需要为每个项目显示额外的文本，并且我认为每个项目的多行可能是一个好方法。

关于将为列表中的每个项目提供多行文本并可能为每行使用不同字体大小的控件的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:36:48.127

如果您的`UIPickerViewDelegate`实现`pickerView:viewForRow:forComponent:reusingView:`，那么您可以传递一个自定义视图以显示在 UIPickerView 中。使用它，您可以构建一个`UIView`包含`UILabel`您想要的自定义。

# c# - 创建 Twitter 之类的推文计数标注背景

> ID：15390885
> 
> 赞同：-5
> 
> 时间：2013-03-13T16:23:21.263
> 
> 标签：c#, asp.net, c#-4.0, css

我正在为我的网站创建一个“喜欢”按钮。它是我自己定制的类似按钮，它改变了我网站数据库中的一些值。我想显示带有标注背景的 LIKE 计数，例如 Twitter“关注”/“Tweet”和 Facebook“赞”/“分享”按钮。有些是这样的：

![在此处输入图像描述](../Images/8a7b86311d543121a6c27f1c1d7e6fa9.png)

我无法在 CSS 中形成任何关于如何做到这一点的逻辑，因为我在 CSS 方面并不那么专业。我还使用 Google Chrome 的 Inspect Element 功能检查了 Twitter 代码，但找不到任何 CSS 这样做。我想到的另一件事是，它只是一个与文本重叠的空标注图像。但是没有找到这样的图。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T17:37:37.323

试试这个最简单的实现：

CSS：

```
.callout {
    position: relative;
    margin: 18px 0;
    padding: 18px 20px;
    background-color: #eef4f9;
    /* easy rounded corners for modern browsers */
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    border-radius: 6px;
}
.callout .notch {
    position: absolute;
    top: -10px;
    left: 20px;
    margin: 0;
    border-top: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid #eef4f9;
    padding: 0;
    width: 0;
    height: 0;
    /* ie6 height fix */
    font-size: 0;
    line-height: 0;
     /* ie6 transparent fix */
    _border-right-color: pink;
    _border-left-color: pink;
    _filter: chroma(color=pink);
} 
```

HTML：

```
<div class="callout">
    This is a callout box!
    <b class="notch"></b>
</div> 
```

现场演示：http: [//jsfiddle.net/yCw3T/](http://jsfiddle.net/yCw3T/)

# lucene - Lucene：如何限制点击次数？

> ID：15390886
> 
> 赞同：0
> 
> 时间：2013-03-13T16:23:27.447
> 
> 标签：lucene, query-parser

我有一个网页表单，可以搜索用户上传到网站的所有照片。问题是 Lucene 搜索当前正在检索所有符合搜索条件的照片，尽管我们在页面上只显示了 21 张照片。这会导致严重的性能问题。是否可以将检索到的照片数量限制为 21，以提高性能？

就像我们可以通过使用 eg (Category: New) 将搜索限制在特定类别中一样，是否有类似的方法来限制点击次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:45:15.683

这就是我所做的：搜索方法将结果数量作为参数。我通过 pageSize*page。所以对于第 1 页，我只得到 pageSize 文档。

然后我只为我需要的页面加载文档（使用 searcher.doc()）。

```
TopDocs hits = searcher.search(lucene_query, pageSize*(page));

ScoreDoc[] scoreDocs = hits.scoreDocs;

int j = startIndex;
int rem = 0;

while (j < scoreDocs.length && (endIndex==0 || j<endIndex)) {

    ScoreDoc sd = scoreDocs[j];
    Document d = searcher.doc(sd.doc); 
```

}

# wcf - 无法让 Azure WCF 服务与客户端证书一起使用

> ID：15390887
> 
> 赞同：1
> 
> 时间：2013-03-13T16:23:28.983
> 
> 标签：wcf, azure, certificate, x509certificate

我有一个 WCF 服务，我想使用客户端证书来保护它，但我无法让它在 Azure 上运行。

我通过将服务托管在 Amazon 上的标准 Windows Server 上，将 Azure 从等式中移除。我将服务和客户端证书（没有一个是自签名的）安装到此服务器上的本地计算机“个人”存储中，包括链式证书，并且一切都按预期工作，从我的本地 PC 调用，客户端证书设置为绑定/行为。如果没有指定证书，它就**无法**工作，因此它肯定以这种方式正常工作。

然后我将该服务部署到 Azure。客户端和服务器证书被上传到门户并在“本地机器/我的”配置中设置，CA 和根证书被上传，我在包括“我的”、“受信任的”和“CA”在内的各种商店中尝试过它们。我尝试的每一个变体，我都会继续从本地完全相同的程序调用“ **HTTP请求被客户端身份验证方案'匿名'禁止”，唯一的变化是客户端端点地址。**

作为另一个细节，我可以让它在没有证书的情况下工作，因此 Web 服务没有问题，但我不确定如何弄清楚客户端和服务之间的证书握手实际发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T16:36:34.323

我终于让它工作了，并在这里写了一个指南：[Blogspot.co.uk](http://lukieb.blogspot.co.uk/2013/10/finally-azure-with-client-certificates.html)

我不确定我之前做错了什么，因为我没有做任何太奇怪的事情来让它发挥作用。我想也许我在配置的某个地方有一个小缺陷，我最终通过重新开始来修复。无论如何，它确实有效，并在 Azure 上提供了一些有用的安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:39:17.217

[请参阅我对此 SO 帖子](https://stackoverflow.com/questions/14448689/azure-autoscaling-works-locally-but-not-when-deployed/14468164#14468164)的回答- 底线，LocalMachine/My 中的证书并在 csdef 文件中以提升的权限运行添加：

```
<Runtime executionContext="elevated" /> 
```

# javascript - HighCharts 折线图 - 如何防止取消选择最后一个图例项？

> ID：15390888
> 
> 赞同：0
> 
> 时间：2013-03-13T16:23:28.693
> 
> 标签：javascript, svg, highcharts

有没有办法防止隐藏折线图中取消选择的最后一个图例项？

[我已经使用legendItemClick](http://api.highcharts.com/highcharts#plotOptions.area.events.legendItemClick)事件在柱形图/饼图上实现了它：

```
legendItemClick: function (e) {
    var self = this;
    var hiddenSeries = function () {
        var counter = 0;
        $.each(self.series.points, function (i, v) {
            if (!v.visible) {
                counter++;
            }
        });
        return counter;
    }

    if (self.series.points.length - 1 == hiddenSeries() && self.visible) {
        return false;
    } else {
        return true;
    }
} 
```

[正如您在下面的小提琴](http://jsfiddle.net/tFxZg/1/)中看到的那样，它工作得很好，但是，它不适用于折线图，因为“this”对象不包含“series.points”属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:17:52.373

您可以参考图表变量以获取系列信息。我是这样做的：

```
 legendItemClick: function (e) {
                var visibleSeries = function () {
                    var counter = 0;
                    $.each(chart.series, function (i, v) {
                        if (v.visible) {
                            counter++;
                        }
                    });
                    return counter;
                }
                if (visibleSeries() <= 1 && this.visible) {
                    return false;
                } else {
                    return true;
                }
            } 
```

[http://jsfiddle.net/4tpsG/](http://jsfiddle.net/4tpsG/)

# ios - UIViewController - 查看事件生命周期和注册 KVO / 通知

> ID：15390894
> 
> 赞同：4
> 
> 时间：2013-03-13T16:23:46.800
> 
> 标签：ios, uiviewcontroller, key-value-observing

我想知道是否有任何方法`-viewWillAppear:`会在没有匹配的情况下被调用`-viewDidAppear:`。`-viewWillDisappear`和同上`-viewDidDisappear`。

我的问题的根源是在哪里注册和取消注册 KVO 和/或对象的 NSNotifications 的更改通知将导致视图控制器更新视图。

例如，我有一个正在异步处理的模型对象，它的字符串属性可能会改变。我希望视图控制器对这些属性进行 KVO，并通过换出由所述视图控制器管理的标签的文本来反映任何更改。

*您在哪里注册和取消注册通知，为什么？*

**编辑：**

我遇到的一个问题是在应用程序状态更改（例如，等）的情况下该怎么`-applicationWillResignActive`做`-...didEnterBackground`。这些更改似乎不会触发视图控制器生命周期方法。这里有什么最佳实践吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-29T19:17:50.533

使用标准容器视图控制器，您将始终成对地收到 will/did 消息。如果您编写了自己的视图控制器容器，则可能不会，但这将是容器实现中的错误。

大多数时候，您会希望在“遗嘱”消息中进行设置和拆除。这使您的视图控制器可以在它变得“活跃”之前尽早完成它需要做的任何事情，并且在您不再需要它们时尽早关闭它们。

在导航堆栈中推送视图控制器时，完全有可能在推送动画期间发生通知。如果您在 viewDidAppear 中设置观察者，您将错过该通知。你想尽快听到。

同样，我认为 viewDidDisappear 为时已晚，无法删除回调。例如，可以在 viewDidDisappear 中停止位置管理器，但可以在消失动画期间传递另一个位置更新。这可能不会造成太大伤害，但是根据应用程序的不同，可能会发生一些奇怪的事情，例如在您已经离开视图控制器后出现的警报视图 - 这对用户来说看起来像是闪烁。

如上所述，任何与视图无关的内容都出现在“will”方法中。那么，will 与 did 的选择实际上是关于用户所看到的。动画应该从 viewDidAppear 开始，否则，用户将看不到在 will/did Appear 期间发生的帧。数据应该移动到 viewWillAppear 中的视图，否则，一个空白的视图会过渡进来，数据只会在过渡动画完成后出现。此外，可以在 viewWillAppear/viewDidAppear 之间调整视图框架，就像堆栈中的前一个视图控制器隐藏/显示导航栏的情况一样。

顺便说一句，我不会在这里详细介绍，但我会反对 KVO 用于将数据从模型移动到视图对象的控制器交互。难以测试且难以追踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:44:14.853

您可以将您的子类`UILabel`和在您的子类中覆盖 setText 方法：

```
-(void)setText:(NSString *)newText {

    //do your KVO updates here

    [super setText:newText];
} 
```

希望这可以帮助

# ios - 自动调整大小不起作用

> ID：15390897
> 
> 赞同：0
> 
> 时间：2013-03-13T16:23:52.233
> 
> 标签：ios, uiview, uibutton, retina-display, autoresize

![在此处输入图像描述](../Images/370cf139aa16b407abf461c8b0694916.png)

我将 Default-568h@2x.png 图像添加到 iphone5 的现有 iphone4 代码中，并且我使用了 autoresizingMask。但我使用 initWithFrame 为 iphone4 设置了 320,480 帧。我还为 navigationBarButton 设置了基于 iphone4 屏幕尺寸的框架。现在我将我的代码运行到 iphone5，iphone4 帧大小只显示所有子视图的帧。例如：我在 iphone4 中使用的按钮框架是 (280,5,30,30)。这个大小只在iphone5中显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:17:24.370

您永远不应该根据屏幕的硬编码大小手动设置帧。

看看使用`[UIScreen mainScreen].size`

# php - 如何从已经返回模板的库函数中获取变量以在 PHP/Codeigniter 中查看

> ID：15390899
> 
> 赞同：0
> 
> 时间：2013-03-13T16:24:00.073
> 
> 标签：php, mysql, codeigniter, web-scraping

我有一个库剥离其数据的网页以供查看，但无法将变量返回到我的模型/插入。到目前为止，我的

模型...

```
...
function update_related($related_array)
{
    $this->db->set($related_array);
    $this->db->insert('related_products');
} 
```

在我的

控制器...

```
...
public function index()
{
    $data = array();

    if(isset($_GET['url']))
    {
        $data['url'] = trim($_GET['url']);
        if(!empty( $data['url']))
        {
            $this->load->library('scraping');
            $data['page'] = $this->scraping->curlFunc($data['url']);
        }else{
            $data['notice'] = 'URL is empty!!!';
        }
    }

    $this->load->view('view_x', $data);

    $this->load->model('Model_x','', TRUE); 
    $related_array = array(
        'x_id' => $var0,
        'freq_together' => $var1,
        'also_bought' => $var2,
        'created_at' => $var3
    );
    $this->Model_x->update_related($related_array);

} 
```

图书馆（比这长得多，但你明白了）......

```
public function curlFunc($url)
{
...
$shdom = $shdom.'<p>Bought Together: ';
    foreach($shdom2->find('.class td a') as $e) {
        if (preg_match('/F00([^\/]*)/i', $e, $regs))
        {
            $r = $regs[0];
            $shdom = $shdom.$r.',';
            $Var1 = $r; //take note, this is a variable I need for Model insert
...
}
    return $shdom;
} 
```

我试图从这里返回数据，而不是多次重新运行这个抓取过程。更重要的是，我只想要一种干净、快速的方式将我的数据放入数据库并保持视图不变。Codeigniter/MVC 相当新（实际上选择这个项目是为了提高 MVC 知识），因此欢迎对我的流程进行任何更改。

看法...

```
<form action="" method="get">
    <span>URL: </span>&nbsp;<input type="text" name="url" id="url"/>&nbsp;&nbsp;&nbsp;<input type="submit" value="GO!">
</form><br />
<?php
if (isset($page)){
    echo'<hr />';
    echo $page;
}
if (isset($notice)){

    echo "<h3>$notice</h3>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:47:56.993

我想我知道您在这里缺少什么，在库级别 Codeigniter 实例中的 codeigniter 中不可用，因此您需要加载它

通过将其添加到您的库结构或任何适合您需要的内容中

`$this->ci =& get_instance();`

所以你可以访问 codeigniter 核心类，比如`load`

您现在可以通过以下方式轻松加载模型 `$this->ci->load->model('model_name');`

参考[创建库](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

# php - Codeigniter/OOP：加载自定义类后，我无法加载模型

> ID：15390900
> 
> 赞同：0
> 
> 时间：2013-03-13T16:24:05.853
> 
> 标签：php, oop, codeigniter

我正在学习来自非 MVC OOP 内部框架的 CI，所以我仍然对很多事情感到困惑，我并不总是了解什么是正常的 OO 编程 VS。完成代码点燃方式的事情。无论如何，我会尝试解释我的问题：

我有一个控制器，称为 Admin，它扩展了 CI_Controller。

我创建了一个类（假设自定义类的含义是我所做的不是 CI 的一部分）我将该类放在库文件夹中，该类也扩展了 CI_Controller（该扩展允许我拥有加载方法和其他一些 CI 方法）。

从我的管理控制器，我正在加载我的自定义类（命名为“ComponiPannell”，因为我是意大利人），这样：

```
$parameters = array('baseUrl' => $this->baseUrl);
$this->load->library('ComponiPannello', $parameters); 
```

一切正常，我的“ComponiPannillo”确实成功了，并返回了我的管理员视图所需的东西。

现在我想在该类之后加载一个模型，因为我需要将更多信息传递给管理视图，这些信息存储在数据库中，我有一个特定的模型来提取这些额外的信息，所以我添加了几行和代码如下所示：

```
$parameters = array('baseUrl' => $this->baseUrl);
$this->load->library('ComponiPannello', $parameters);
$setup = $this->componipannello->return_data();
$this->data = array_merge($this->data, $setup);

$this->load->model('categories_model');
$this->data['categories'] = $this->categories_model->get_categories(); 
```

$this->data 是我传递给管理员视图的内容。

更多信息：

*   正如我所说，管理控制器和我的自定义类 ComponiPannell 都扩展了 CI_Controller
*   在 ComponiPannello 我有这个构造函数：

    函数 _*构造（$params）{ 父级::* _construct(); $this->load->library('session'); $this->baseUrl = $params['baseUrl']; }

*   如果我在 $this->load->library 之前移动 $this->load->model 部分，我没有收到任何错误，一切正常并返回正确的数据，但我想了解我在做什么。

*   如果我保持原样，我得到的错误如下：

致命错误：在...中的非对象上调用成员函数 get_categories() 在线...

我希望我能够以一种足够清楚的方式解释我的问题，以便您帮助我，提前感谢您花费的时间。

卢克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:30:39.517

您的问题可能是因为您将另一个控制器作为库加载，而实际上它不是库。

您可以从这样的库中加载库、助手等：

`$CI =& get_instance();`

从您的库中，而不是`$this->load->helper()`加载您现在使用的帮助程序`$CI->load->helper()`。

CI 文档中提供了更多信息：http: [//ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:32:52.977

为什么你在你的库中使用数据库对象？

在您的库中使用 CodeIgniter 资源。要在您的库中访问 CodeIgniter 的本机资源，请使用 get_instance() 函数。该函数返回 CodeIgniter 超级对象。

通常在你的控制器函数中，你会使用 $this 结构调用任何可用的 CodeIgniter 函数：

```
$this->load->helper('url');
$this->load->library('session');
$this->config->item('base_url');
etc. 
```

然而，$this 只能直接在你的控制器、模型或视图中工作。如果你想在你自己的自定义类中使用 CodeIgniter 的类，你可以这样做：

首先，将 CodeIgniter 对象分配给一个变量：

```
$CI =& get_instance();

$CI->load->helper('url');
$CI->load->library('session');
$CI->config->item('base_url');
etc. 
```

# c# - 如何在选择期间计算实体类中的一个属性？

> ID：15390901
> 
> 赞同：0
> 
> 时间：2013-03-13T16:24:07.813
> 
> 标签：c#, linq, linq-to-sql

我的表`Persons`有一个名为的出生日期列`DOB`。

在我的 dbml 文件中，我添加了一个`single`名为`Age`.

在 Linq 查询中，如何返回`Age`从今天广告计算的年龄`DOB`？也就是说，我如何实现类似下面的虚构代码：

```
 DataClasses1 db = new DataClasses1();
 var pp = from p in db.Persons
       select new Person()
                   {  
                      Name = p.Name, // ... clone all the other properties ...
                      Age = (DateTime.Today-p.DOB).Days/365
                   } 
```

是否有另一种实现相同目标的方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:36:18.437

您可以将年龄计算逻辑放入`Age`属性中，并从数据库中仅下载出生日期：

```
public int Age 
{
   get { 
      DateTime today = DateTime.Today;
      int age = today.Year - DOB.Year;
      if (DOB > today.AddYears(-age)) age--;
      return age;
   }
} 
```

如果您想在服务器端计算年龄（根据问题标签，这是一个 LINQ to SQL 代码）：

```
from p in db.Persons
let age = SqlMethods.DateDiffYear(p.DOB, DateTime.Today)
select new Person {  
    Name = p.Name,
    Age = SqlMethods.DateDiffDay(DateTime.Today.AddYears(-age), p.DOB) > 0 ? 
              age - 1 : age
} 
```

# javascript - Jquery AJAX 类型属性

> ID：15390904
> 
> 赞同：0
> 
> 时间：2013-03-13T16:24:19.160
> 
> 标签：javascript, jquery, http, types, request

我第一次研究 couchdb 并想使用 jquery 制作一个界面。当尝试向 API 服务发送 AJAX 调用时（它会根据 http 请求的方法执行不同的操作），因此当我设置“类型”属性时，它总是执行 GET 请求，无论它是否设置为 POST 、放置、删除或获取。

```
$.ajax({
    url: "http://localhost:5984/newDBNAME",
    dataType: "jsonp",
    type: 'PUT',

    success:function(data){
        alert(data.db_name);
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:26:56.860

这是因为您将 dataType 设置为 jsonp，jsonp 只支持 GET。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:26:57.270

jsonp 请求将*始终*被获取。从技术上讲，jQuery 正在创建一个脚本标签，其中 src 设置为 url（成功函数链接到附加到 url 末尾的回调函数，jQuery 在幕后自动处理）。

# sql - 收集数据库表信息？

> ID：15390906
> 
> 赞同：-2
> 
> 时间：2013-03-13T16:24:23.090
> 
> 标签：sql, sql-server-2008

我正在尝试以表格格式从表格中查找以下信息。我可以得到`Rows Count`，`Column Name`并且`Attribute (DataType)`

```
No.Of columns
No.Of Rows Count
Column name
Attribute (DataType)
Min Value
Max Value
Non null count
Distinct count of the column 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:34:13.877

其中许多项目可以在 INFORMATION_SCHEMA.COLUMNS 视图中找到，其余的可以通过查询表本身来找到。您说您希望这些数据采用表格格式，但许多项目不“适合”在一起。你能提供一个结果集应该是什么样子的样本吗？

```
-- No.Of columns
SELECT COUNT(*)
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'your_table'

-- No.Of Rows Count
SELECT COUNT(*)
FROM your_table

--Column name
SELECT COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'your_table'

--Attribute (DataType)
SELECT DATA_TYPE, CHARACTER_MAXIMUM_LENGTH
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'your_table'

--Min Value
SELECT MIN(column_1)
FROM your_table

--Max Value
SELECT MAX(column_1)
FROM your_table

--Non null count
SELECT SUM(CASE WHEN column_1 IS NOT NULL THEN 1 ELSE 0 END) AS not_null_count
FROM your_table

--Distinct count of the column
SELECT COUNT(*)
FROM your_table
GROUP BY column_1 
```

# sql - 如何选择统计表计算两个日期之间的出现次数

> ID：15390913
> 
> 赞同：2
> 
> 时间：2013-03-13T16:24:36.103
> 
> 标签：sql, oracle, oracle11g

我需要从表中计算 2 个日期之间的协议违规事件和持续时间，以实现类似于统计表的效果，如下图所示：

## 预期效果：

![在此处输入图像描述](../Images/0e6c46cb2ec7a491b1f320c49f98e05e.png)

## 解释：

如您所见，我需要选择 Violations 表中存在的“Country”、“Site”以及：同一表“Violations”中数据库中存在的协议违规持续时间的“Numbers”、“Maximum”、“Minimum”和“Mean”**两个日期之间**。所以我们必须计算：

*   按国家和站点在 Violations 表中存在的协议违规**事件**
*   国家和站点违反协议的最小/最大/平均**持续时间**

在两种不同的条件下：

*   **从发现日期到报告日期**发生的事件
***   **从报告日期到确认日期**发生的事件**

 ****## 数据库结构：

可在 SQLFILDDLE：[看这里](http://www.sqlfiddle.com/#!4/46249/1/0)

我将在附加的 SQLFIDDLE 中添加该代码，该代码具有更多表和一个查询，但对于此问题，它们现在是不必要的。随意使用它。我没有删除旧查询，因为有很好的方法：

*   '- 全部 -' 和
*   '- 未知 -' 值。-

## 违规表：

```
create table violations (
  id long,
  country varchar(20),
  site varchar(20),
  status_id int,
  trial_id int,
  discovered_date date,
  reporded_date date,
  confirmed_date date
); 
```

## 场地表：

```
create table site (
  id long,
  site varchar(20)
); 
```

## 我的第一次尝试：

这是我的新[SQLFIDDLE](http://www.sqlfiddle.com/#!4/46249/6/0)，其中包含改进注释行所需的查询：

```
SELECT v.country as country, v.site as site,
  COUNT(*) as N --,
  --MAX(list of durations in days between discovered date to repored date on each violation by country and site) as "Maximum",
  --MIN(list of durations in days between discovered date to repored date on each violation by country and site) as "Minimum",
  --AVG(list of durations in days between discovered date to repored date on each violation by country and site) as "Mean"
FROM violations v
WHERE v.trial_id = 3
GROUP BY ROLLUP (v.country, v.site) 
```

我已经设法用我的想法创建了抽象查询。但是我在为 MAX、MIN 和 AVG 编写正确查询时遇到问题，我们必须从国家和站点的每次违规之间`discovered date`的天数列表中选择最大/最小/平均值。`reported date`

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:50:51.917

Please check this query. It is simplified and may give you an idea and direction. If you need more then this then let me know. Copy and paste to see results. This query will select and calc only the results between two dates in where clause. You need to run inner query first w/out where to see all dates etc... This query counts violations between 2 dates. Not sure what is the list of duration in days... See below for count of duration. You may add MAX/MIN etc...

```
-- Days between (duration) = (end_date-start_date) = number of days (number) --
SELECT (to_date('14-MAR-2013') - to_date('01-MAR-2013')) days_between
  FROM dual
/

SELECT country, site
 , Count(*) total_viol
 , MAX(susp_viol) max_susp_viol
 , MIN(susp_viol) min_susp_viol
FROM
(
 SELECT 'GERMANY' country, '12222' site, 1 susp_viol, 2 conf_viol, trunc(Sysdate-30) disc_date, trunc(Sysdate-25) conf_date
   FROM dual
  UNION
 SELECT 'GERMANY',  '12222'            , 3          , 14, trunc(Sysdate-20) , trunc(Sysdate-15)  FROM dual
  UNION
 SELECT 'GERMANY',  '12222'            , 6          , 25, trunc(Sysdate-20) , trunc(Sysdate-15)  FROM dual
  UNION
 SELECT 'GERMANY',  '12222'            , 2          , 1, trunc(Sysdate-20) , trunc(Sysdate-15)  FROM dual
  UNION
 SELECT 'GERMANY',  '13333'            , 10         , 5,  trunc(Sysdate-15) , trunc(Sysdate-10)  FROM dual
  UNION
 SELECT 'GERMANY',  '13333'            , 15         , 3,  trunc(Sysdate-15) , trunc(Sysdate-10)  FROM dual
  UNION
 SELECT 'GERMANY',  'Unknown Site'     , 0          , 7,  trunc(Sysdate-5) ,  trunc(Sysdate-2)  FROM dual
  UNION
 SELECT 'RUSSIA',  '12345'             , 1          , 5,  trunc(Sysdate-20) ,  trunc(Sysdate-15)  FROM dual
  UNION
 SELECT 'RUSSIA',  '12345'             , 2          , 10,  trunc(Sysdate-15) ,  trunc(Sysdate-12)  FROM dual
 UNION
SELECT 'RUSSIA',  'Unknown Site'      , 10          , 10,  trunc(Sysdate-3) ,  trunc(Sysdate-1)  FROM dual
 ) 
  -- replace sysdate with your_date-default format is to_date('14-MAR-2013') or give format mask
 WHERE conf_date BETWEEN trunc(Sysdate-20) AND trunc(Sysdate-10)
 GROUP BY ROLLUP (country, site)
 ORDER BY country, site
/ 
```

Count of duration:

```
SELECT country, site, (conf_date-disc_date) duration, count(*) total_durations 
  FROM
 (
 SELECT 'GERMANY' country, '12222' site, 1 susp_viol, 2 conf_viol, trunc(Sysdate-30) disc_date, trunc(Sysdate-20) conf_date
   FROM dual
  UNION
 SELECT 'GERMANY',  '12222'            , 3          , 14, trunc(Sysdate-20) , trunc(Sysdate-12)  FROM dual
  UNION
 SELECT 'GERMANY',  '12222'            , 6          , 25, trunc(Sysdate-20) , trunc(Sysdate-12)  FROM dual
  UNION
 SELECT 'GERMANY',  '12222'            , 2          , 1, trunc(Sysdate-20) , trunc(Sysdate-12)  FROM dual
  UNION
 SELECT 'GERMANY',  '13333'            , 10         , 5,  trunc(Sysdate-12) , trunc(Sysdate-6)  FROM dual
  UNION
 SELECT 'GERMANY',  '13333'            , 15         , 3,  trunc(Sysdate-17) , trunc(Sysdate-11)  FROM dual
  UNION
 SELECT 'GERMANY',  'Unknown Site'     , 0          , 7,  trunc(Sysdate-5) ,  trunc(Sysdate-2)  FROM dual
  UNION
 SELECT 'RUSSIA',  '12345'             , 1          , 5,  trunc(Sysdate-20) ,  trunc(Sysdate-15)  FROM dual
  UNION
 SELECT 'RUSSIA',  '12345'             , 2          , 10,  trunc(Sysdate-15) ,  trunc(Sysdate-12)  FROM dual
  UNION
 SELECT 'RUSSIA',  'Unknown Site'      , 10          , 10,  trunc(Sysdate-3) ,  trunc(Sysdate-1)  FROM dual
 ) 
 WHERE conf_date BETWEEN trunc(Sysdate-20) AND trunc(Sysdate-10) 
  GROUP BY ROLLUP (country, site, (conf_date-disc_date))
  ORDER BY country, site
 / 
```****

# javascript - 创建gmap标记时如何忽略lat&lon NULLS

> ID：15390925
> 
> 赞同：0
> 
> 时间：2013-03-13T16:24:57.227
> 
> 标签：javascript, jquery, json, google-maps, if-statement

我使用以下代码处理带有例如 20 个标记/地址的 json url：

```
$.getJSON( jsonurl, function(data) { 
    $.each( data.rows, function(i, m) {
            $('#map_canvas').gmap('addMarker',
            { 'icon': new google.maps.MarkerImage(m.a1_gifscan),
           'position': new google.maps.LatLng(m.a1_lat, m.a1_lng),
           'bounds':true }).click(function() 
```

当`a1_lat`和`a1_lng`对于 1 个或多个地址为空时，gmap 会在赤道位置放置一个标记，这会破坏我的缩放。

问题; 如何忽略我的代码中的空 lat lng 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:31:17.300

在迭代函数中添加`if (m.a1_lat && m.a1_lng)`为测试。如果 lat 或 lng 为空，这将阻止创建标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:09:11.580

最好的解决方案是从数据源（数据库？）中删除不良数据。

我通常会检查这样的东西（未测试），它会添加一个警报，以便可以解决不良数据：

```
var lat,lng;
if ((isNaN(lat=parseFloat(m.a1_lat))) ||
    (isNaN(lng=parseFloat(m.a1_lng)))) {
  alert("bad point:"+lat+","+lng);
} else {
  var point = new google.maps.LatLng(lat,lng);
  $('#map_canvas').gmap('addMarker',
      { 'icon': new google.maps.MarkerImage(m.a1_gifscan),
     'position': new google.maps.LatLng(m.a1_lat, m.a1_lng),
     'bounds':true }).click(function() {});     
} 
```

# surfaceview - 如何在表面视图中以不同的速度管理两个对象

> ID：15390931
> 
> 赞同：0
> 
> 时间：2013-03-13T16:25:00.180
> 
> 标签：surfaceview

如何处理在表面视图中绘制的两个不同对象的速度。我是否必须为它制作两个不同的线程并使用 sleep ？或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T07:37:40.790

我认为制作这样的东西不是一个好主意，如果你想以不同的速度更新两个对象，你可以伪造它，比如有一个计数器，每次更新对象时（或根据你想要的内容绘制）每 x 帧更改一次。例如，您希望 objectA 每 2 帧更新一次，请执行以下操作：

```
//Every frame
counter++;
if (counter >= 2)
{
    counter = 0;
    //Update or Draw
} 
```

如果需要，对 objectB 执行相同的操作。您对“不同速度”的含义不是很具体，所以这是我能想到的最好的，如果您的情况不同，请告诉我:)

# matlab - MATLAB：聚合和比较不同采样间隔的测量值

> ID：15390933
> 
> 赞同：0
> 
> 时间：2013-03-13T16:25:15.800
> 
> 标签：matlab, aggregation

我`x`以等距长间隔（每 10 分钟）测量了一个变量，并`y`以非等距短间隔（在每 30 秒到 90 秒之间）测量了一个变量。两者的时间戳 ( `datenum`)可用，但它们永远不相等，因此不起作用。我如何聚合（例如，在间隔中以便我可以比较两者（例如将它们相互绘制或用相同的时间向量绘制它们）？`x``y``intersect``y``mean(y(...))``x(i+1) - x(i))`

/edit 1：在我的最后一句话中`x`感到困惑。`y`

/edit 2：我觉得我在原始问题中没有给你足够的信息，很抱歉。你们中的许多人建议插值。`x`是 10 分钟内的平均风速，不是一个明确的测量值。因此，如果我说时间 = 07:10 和`x = 3`m/s，这意味着`mean(x) = 3`从 07:00 到 07:10 期间的 m/s。这就是为什么我认为插入它可能不是最好的主意。`y`是许多（非常嘈杂的）其他变量之一，我想找出 (mean)`x`对的影响`y`。因此，我想`y`为一个测量值`x`（在 10 分钟内）分配多个值，或者将`mean(y)`一个值分配给`x`. 我假设解决方案非常相似，代码明智。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:47:14.510

要聚合值，请使用[`accumarray`](http://www.mathworks.com/help/matlab/ref/accumarray.html)：

```
accumarray(fix(ty(:) / T) + 1, y, [], @mean) 
```

这`y`是采样信号，`ty`是时间戳数组，`T`是聚合值的时间间隔（例如，`T = 10 / (24 * 60) = 0.0069`10 分钟间隔）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:14:49.780

阅读已编辑的（2x）问题：

您正在尝试估计`x`您无法测量的某个点的值。你有之前和之后的测量。*你唯一*能做的就是插值。您选择哪种方法有点难以决定。

您的选择是：

*   [分段常数插值](http://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)（我认为你的建议）
*   [线性插值](http://en.wikipedia.org/wiki/Linear_interpolation)
*   [样条](http://en.wikipedia.org/wiki/Spline_interpolation)
*   其他

/edit：如果您只想获得`y`两次`x`测量之间的平均值，我建议如下：

```
new_y = zeros(size(x));
new_y(1) = mean(y(ty<=tx(1)));
for ii=2:length(x):
        new_y(ii) = mean(y(and(ty>tx(ii-1),ty<=tx(ii))));
end 
```

也许更好的解决方案是使用[hist](http://www.mathworks.com/help/matlab/ref/hist.html)：

```
n = hist(ty,tx) 
```

向量`n`包含`ty`最接近 中的值的值的数量`tx`。由于两者都是单调的，`n`告诉你如何在`y`. 然后您可以使用`mat2cell`放入`y`一个单元格数组，其中每个单元格对应于 的一个测量值`x`。第二个参数`n`现在指定在每个单元格中放置多少值。

```
new_y = mat2cell(y,n) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:38:08.653

您可以将数据从 x 插入到非等距时间戳（反之亦然）（参见 interp1 函数）并比较结果。

阴谋：

```
plot(Time_x, x, Time_y, y) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:43:06.453

这是一个使用一维插值的简单示例。

```
# make two example functions on different x bases.
x1 = [0:.023:10];
x2 = [0:1:10];
y1 = x1.^2/10;
y2 = 10 - x2.^1.3;

# convert both to a common x base (x1 in this case).
y2i = interp1(x2,y2,x1);
plot(x1,y1,x1,y2i) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T16:45:03.210

使用线性插值！

做自己很容易也很有趣。这个想法是：由于您知道 x 的时间戳、x 的值和 y 的值（但 y 的时间戳与 x 的时间戳不匹配），因此您可以使用线性插值（或者如果您使用更高阶的插值需要）为 y 插入/“更新”值，就好像它们发生在 x 的时间戳一样。之后，您可以针对相同的 x 时间戳矢量绘制 x 和插值 y 值。

见：[http ://en.wikipedia.org/wiki/Linear_interpolation](http://en.wikipedia.org/wiki/Linear_interpolation)

# javascript - Javascript 替换按钮点击

> ID：15390936
> 
> 赞同：0
> 
> 时间：2013-03-13T16:25:28.510
> 
> 标签：javascript

我正在运行一个小的 javascript 替换来替换按钮单击上的文本，但我看不出它为什么不起作用。谁能告诉我我做错了什么？

[http://jsfiddle.net/zg4VB/2/](http://jsfiddle.net/zg4VB/2/)

```
$("#button").click(function() {
    $("#editme").value = replaceLinks($("#editme").val());
})

function replaceLinks(text) {
    var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
    return text.replace(exp,"[url=$1]$1[/url]"); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:29:39.633

两个问题。首先`$("#editme").value = replaceLinks($("#editme").val());`应该是`$("#editme").val(replaceLinks($("#editme").val()));`

其次，您的按钮 ID 曾经`id="#button"`并且应该是`id="button"`

**[jsFiddle 示例](http://jsfiddle.net/j08691/zg4VB/3/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:28:01.003

`.value`通常是 DOM Input 元素的直接*属性*。访问或更改元素值的 jQuery 函数是`.val()`

有用的是，`.val()`允许您传递一个函数来改变当前值。该函数传递元素的索引和当前值，函数的返回值替换原始值。您需要做的就是更改`replaceLinks`函数的签名以允许`index`参数（然后您可以安全地忽略）。

```
$("#button").click(function() {
    $('#editme').val(replaceLinks);  // calls `replaceLinks` to mutate its value
});

function replaceLinks(index, text) {
    ...
} 
```

见[http://jsfiddle.net/alnitak/XzrHP/](http://jsfiddle.net/alnitak/XzrHP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:33:01.323

几个问题：`.value =`应该是`.val(`. 它用于设置和获取值。您也将按钮 ID 设置为`#button`，但它应该只是`button`。

如果您`$("#editme").val(replaceLinks);`将参数更改`replaceLinks`为`function replaceLinks(_, text) {`

[http://jsfiddle.net/ExplosionPIlls/zg4VB/5/](http://jsfiddle.net/ExplosionPIlls/zg4VB/5/)

```
$("#button").click(function() {
    $("#editme").val(replaceLinks);
})

function replaceLinks(_, text) {
    var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
    return text.replace(exp,"[url=$1]$1[/url]"); 
} 
```

如果您也想`replaceLinks`在字符串上使用，您也可以签`arguments`入`replaceLinks`：`text = arguments[arguments.length - 1]`

# django - django-grappelli 和块应用程序

> ID：15390947
> 
> 赞同：0
> 
> 时间：2013-03-13T16:25:55.527
> 
> 标签：django

如何将 TINY-MCE 添加到块中？我使用 django-grappelli

对于我使用的标准模型：

```
class DataAdmin(admin.ModelAdmin):
    pass

    class Media:
        js = [
        '/static/grappelli/tinymce/jscripts/tiny_mce/tiny_mce.js',
        '/static/tinymce_setup.js',
        ] 
```

它工作。

编辑：

@Timmy O'Mahony 解决方案工作正常或只是：

```
class CustomChunkAdmin(ChunkAdmin):
    class Media:
        js = [
        '/static/grappelli/tinymce/jscripts/tiny_mce/tiny_mce.js',
        '/static/tinymce_setup.js',
        ]
admin.site.unregister(Chunk)
admin.site.register(Chunk, CustomChunkAdmin) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:35:18.143

在现有的管理文件中：

```
from django.db import models
from tinymce.widgets import TinyMCE
from chunks.admin import ChunkAdmin
from chunks.models import Chunk

class CustomChunkAdmin(ChunkAdmin):
    formfield_overrides = {
        models.TextField: {'widget': TinyMCE() },
    }
admin.site.unregister(Chunk)
admin.site.register(Chunk, CustomChunkAdmin) 
```

# android - 无法在自定义 SurfaceView 类之上绘制

> ID：15390948
> 
> 赞同：2
> 
> 时间：2013-03-13T16:25:56.063
> 
> 标签：android, android-camera, surfaceview, android-view

我使用[示例指南](http://developer.android.com/guide/topics/media/camera.html)创建了一个名为 CameraPreview 的类，它继承自 SurfaceView 类，并显示相机预览。我还创建了另一个名为 DrawOnTop 的自定义视图类，它直接从 View 继承，我使用它在预览顶部绘制文本和其他项目。每个视图类都可以自己正常工作，但是当我将两个视图都加载到活动中时，CameraPreview 总是占主导地位，并且 DrawOnTop 类中的任何对象或文本都不会出现在相机预览的顶部。

因为我使用了两个自定义视图类，所以我不会费心在活动的 onCreate 中从 XML 中扩充任何视图类，因此 onCreate 不包含对 setContentView(...) 的任何调用。相反，我实例化每个视图类，并使用 addContentView(...) 将每个视图对象加载到活动的根视图中，即

```
CameraPreview preview = new CameraPreview(this); 
addContentView(preview, new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));

DrawOnTop drawontop = new DrawOnTop(this);       
addContentView(drawontop, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
drawontop.setVisibility(View.VISIBLE);
drawontop.bringToFront(); 
```

我查看了活动的根视图，结果是 FrameLayout 类型。正如我上面所说，这种方法对每个视图都适用。

为了让 DrawOnTop 类出现在相机预览的顶部，我尝试使用 bringToFront() 但它没有任何效果。我正在运行 Android 版本 4.1.1 的三星 Galaxy Note 2 LTE 上测试该应用程序。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:10:05.717

此链接可能会有所帮助：[如何在 Android 上的 Camera 使用的 SurfaceView 上绘制叠加层？](https://stackoverflow.com/questions/2933882/how-to-draw-an-overlay-on-a-surfaceview-used-by-camera-on-android)

您只需要将 CameraPreview 视图放入 FrameLayout 中，并将 DrawOnTop 视图与 FrameLayout 处于同一级别，即

```
FrameLayout frame = new FrameLayout(this);
addContentView(frame, new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
CameraPreview preview = new CameraPreview(this); 
frame.addView(mPreview);

DrawOnTop drawontop = new DrawOnTop(this);       
addContentView(drawontop, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
drawontop.setVisibility(View.VISIBLE);
drawontop.bringToFront(); 
```

那对你有用吗？

# c++ - 获取 Objective-C 方法的地址

> ID：15390949
> 
> 赞同：1
> 
> 时间：2013-03-13T16:25:58.360
> 
> 标签：c++, objective-c, class, function-pointers

我是 Objective-C 的新手，我需要克服以下问题。我正在尝试为 C 库开发前端，我需要以某种方式获取 Objective-C 成员函数的地址并将其传递给库。

例如：这就是我在 C++ 中所做的

```
class MyClass
{
    public:
    void my function();
    void some_other_function()
    { connect_signal(my_function); }
}; 
```

在这里，我只是将地址传递`my_function()`给connect_signal。这在 Objective-C 中可能吗？还有其他想法吗？

我的第二个选择是从调用 Objective-C 函数的类中简单地编写一个 C 函数。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:30:26.187

有一个`methodForSelector:`方法返回一个`IMP`，一个指向给定选择器的方法实现的指针（[相关问题](https://stackoverflow.com/questions/2650190/objective-c-and-use-of-sel-imp)）。这就是你所追求的吗？

作为更一般的评论，使用指向方法实现的指针通常太神奇了。您的用例是否有更高级别、更“普通”的解决方案？（我真的无法想象你在问题中写的细节。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:36:42.060

作为记录，您不能将信号连接到非静态 C++ 函数。至少不是信号的 *nix 含义。那些需要一个`this`调用指针。

现在，关于Objective C。取决于你想做什么——将指向Objective C方法的指针传递给纯C API，或者实现你自己的类似信号的回调机制。其他答案集中在前者；让我们谈谈后者。

很自然的做法是传递选择器和对象指针的组合。选择器具有数据类型`SEL`，并使用 @selector() 构造检索。选择器是一段数据（实际上是一个整数），它唯一地标识类层次结构中的方法。

假设您在`connect_signal`某处有一个需要回调的函数：

```
-(void)connect_signal:(SEL)callbackSelector forObject:(NSObject*)callbackObject; 
```

你这样称呼它（在回调对象中）：

```
[xx connect_signal:@selector(MyMethod:) forObject:self]; 
```

在函数中，您保存选择器和对象指针。当您需要调用回调时，您将发出以下调用：

```
[SavedCallbackObject performSelector:(SavedCallbackSelector) withObject: nil]; 
```

第二个参数用于向回调传递参数；如果您需要多个，请参阅 NSInvoke。

我的答案是假设可可。NSObject，例如是一个 Cocoa 类。考虑到这些天，对于 ObjC 问题来说，这是一个安全的选择。

或者您可以使用良好的旧函数指针。他们还在附近。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T16:34:32.930

Objective-C 方法实现 (IMP) 是一个 C 函数，它*至少*需要两个参数；方法调用的目标（self）和要调用的选择器（_cmd）。

因此，将 IMP 传递给您的 C API 是行不通的。

你最好的选择是传递一个 C 函数。假设您的 C API 是明智的并且具有“任意用户上下文指针”，例如：

```
void myfunc(void *context) {
    [(MyClass *)context callback];
} 
```

# vb.net - 找不到 VB .net 密钥。但它在字典中找到。我错过了什么？

> ID：15390952
> 
> 赞同：0
> 
> 时间：2013-03-13T16:25:59.900
> 
> 标签：vb.net, dictionary

![在此处输入图像描述](../Images/ef50d772a2b45dad72e619834ac9559e.png)

这几乎是不言自明的。但无论如何我会解释：

我创建了一个字典：

```
' import part
Imports System.Collections.Generic

'module declarations
Public Event_Conf As New Dictionary(Of String, Object)

'sub
Event_Conf("intro line") = ""

' here's the drama
WelcomeForm.Heading1.Text = Event_Conf("intro line")    'key not found. 
```

所以我在调试器中检查变量的内容，我看到了 3 个键，其中一个完全是一个名为“intro line”的字符串！哇！一切都是小写字母，没有有趣的字符。

我做错了什么（除了为这个项目选择 .NET，我的意思是）？

**编辑：** 有些事情搞砸了

```
WelcomeForm.Heading1.Text = "x" 
```

返回完全相同的错误。

*   heading1 是welcomeform 上的标签控件。
*   视觉基本速递 2008
*   视窗 7 64 位

我重新启动了视觉工作室（它在 90 年代创造了奇迹），但同样的错误又回来了。

**Edit2**：内部异常看起来一样 ![更多细节和内部异常](../Images/8c282cf3b59e184bb394ea12663234fd.png)

# python - 是否有一个库可以使用 Python 在 Pig 流中解析来自 Pig 输出的数据？

> ID：15390954
> 
> 赞同：1
> 
> 时间：2013-03-13T16:26:02.960
> 
> 标签：python, streaming, apache-pig

如果我有一个通过 Pig 流传递`aRelation`的类型的 Pig 关系，例如：`{A:chararray,B:double}`

```
C = STREAM aRelation THROUGH `python test.py`; 
```

数据将作为字符串逐行处理。是否有一个库可以在 Python 中解析序列化的 Pig 数据，它可以执行转换、转换为复杂类型等。

# django - 为 Django 身份验证设置 LDAP

> ID：15390955
> 
> 赞同：1
> 
> 时间：2013-03-13T16:26:04.100
> 
> 标签：django, active-directory, openldap

我正在开发一个基于 Django 的 Intranet 应用程序，该应用程序需要用户针对 Active Directory 进行身份验证。我找到了[django-auth-ldap](https://pypi.python.org/pypi/django-auth-ldap)，但我仍然完全不知道该怎么做才能设置我可以开发的本地 LDAP 服务器。

我安装了 AD LDS，但它需要一个域控制器，我读到的一些 SO 答案告诉我，我无法在 Windows 7 上设置它。所以我决定尝试使用 OpenLDAP，它看起来可以工作，但是教程我读到的并不是特别清楚*如何向其中添加数据？*

谁能向我解释一下我需要采取哪些步骤才能针对本地运行的 LDAP 服务添加和成功验证 Django 用户配置文件，无论是 OpenLDAP 还是 Active Directory（我需要知道如何成功设置稍后，如果可能的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-17T09:14:06.547

您现在可能已经解决了这个问题，但以防万一：

您需要设置 LDAP 存储库（完成）。您需要创建一些可以绑定的用户对象。这是通过使用 LDIF 文件或类似方法来完成的。一个非常有用的可视化 LDAP 数据库的工具是“Apache Directory Studio”。ldif 如何出现的示例：

```
dn:cn=myuser,cn=localhost
changetype: modify
add: cn=myuser
userPassword: password01 
```

它会因您的架构而异。我强烈建议您阅读 Django 文档以了解特定于您的实现：[https ://pythonhosted.org/django-auth-ldap/](https://pythonhosted.org/django-auth-ldap/)

这是一个很好的例子（来自文档）：

```
import ldap
from django_auth_ldap.config import LDAPSearch

AUTH_LDAP_BIND_DN = ""
AUTH_LDAP_BIND_PASSWORD = ""
AUTH_LDAP_USER_SEARCH = LDAPSearch("ou=users,dc=example,dc=com",
ldap.SCOPE_SUBTREE, "(uid=%(user)s)") 
```

但假设您已通过 ldif 将用户添加到“cn=localhost”，那么这就是您在搜索字段中使用的 dn。如文档所述，您可以根据需要搜索整个目录。

如果不清楚发生了什么：

1.  导入 Ldap 模块
2.  导入 LDAPSEARCH 函数？来自 django 模块
3.  设置一个空白的绑定 DN（这就像一个完全限定的用户名。例如 uid=myuser,dc=com）
4.  设置空白绑定密码
5.  执行搜索。格式如下： ("base",scope,searchfilter)

您可以在 python 中使用标准 ldap 模块进行测试：

```
import ldap
ld = ldap.initialize("ldaps://acme.com:636")
ld.bind_s("userDN","Password")
ld.search_s("cn=acme.com",ldap.SCOPE_SUBTREE,"uid=myuser") 
```

不是很重要，但“ldap.SCOPE_SUBTREE”、“ldap.SCOPE_BASE”等只是整数。所以你可以传入 0, 1, 2 来代替。

祝你好运，即使你很久以前就解决了这个问题。

# oracle - oracle中基于分隔符的字符串拆分

> ID：15390957
> 
> 赞同：0
> 
> 时间：2013-03-13T16:26:07.583
> 
> 标签：oracle, plsql, oracle10g

我在 oracle 表中有这样的字符串

```
VM4 SPLA - WI NS V R STD #P59- 9 9 99 QTY 2 : S P LA - W IN SV RENT #P39-9999 QTY 3 : SPL A - WIN S VR SMB # P 3 9- 999 99 QTY 5    1 
```

我需要拆分这个字符串并使用循环插入到表中

```
name description           partnumber   Qty  objectstate
-------------------------------------------------------
VM4  SPLA - WI NS V R STD  P59- 9 9 99   2    1
VM4  S P LA - W IN SV RENT P39-9999      3    1
VM4  SPL A - WIN S VR SMB  P 3 9- 999 99 5    1 
```

帮助我如何使用循环来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:04:14.813

```
declare
  string varchar2(4000);
  v_objstate number;
  v_name varchar2(100);
  v_description varchar2(100);
  v_partnumber varchar2(100);
  v_qty number;
  v_all_rows varchar2(4000);
  v_row varchar2(4000);
begin
  string := 'VM4 SPLA - WI NS V R STD #P59- 9 9 99 QTY 2 : S P LA - W IN SV RENT #P39-9999 QTY 3 : SPL A - WIN S VR SMB # P 3 9- 999 99 QTY 5    1';
  v_objstate := to_number(regexp_substr(string, '\d+$'));
  v_all_rows := regexp_replace(string, '\d+$');
  v_name := regexp_substr(v_all_rows, '\S+');
  v_all_rows := regexp_replace(v_all_rows, '^\s*\S+');
  for rec in (
    select regexp_substr(v_all_rows, '[^:]+', 1, level) as next_row 
    from dual connect by null is null
  ) loop
    v_row := trim(rec.next_row);
    exit when v_row is null;
    v_qty := to_number(trim(regexp_substr(v_row, '\d+\s*$')));
    v_row := regexp_replace(v_row, 'QTY\s*\d+\s*$');
    v_partnumber := trim(regexp_replace(v_row, '^.*#'));
    v_description := trim(regexp_replace(v_row, '#.*?$'));
    insert into your_table (name, description, partnumber, Qty, objectstate) 
      values (v_name, v_description, v_partnumber, v_qty, v_objstate);
  end loop;
end; 
```

# java - 如何将数据（字符串）写入文本文件

> ID：15390965
> 
> 赞同：0
> 
> 时间：2013-03-13T16:26:34.970
> 
> 标签：java, sql, io

我目前有以下代码行：

```
ResultSet RS = cs.executeQuery();
....
FileOutputStream outFile = new FileOutputStream(file, false);
while(RS.next()) {
    outFile.write(RS.getString(1));
} 
```

**结果集中只有一列。**我收到一个错误，即 RS.getString(1) 必须是 int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:28:30.183

[FileOutputStream#write](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#write%28int%29)需要一个`int`值。您可以简单地使用 a `PrintWriter`here 代替它具有用于写入[值的](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#write%28java.lang.String%29)[重载`write`方法`String`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#write%28java.lang.String%29)：

```
PrintWriter writer = new PrintWriter(new FileOutputStream(file, false));
writer.write(...); 
```

或将每个都写`String`在新行上，使用[println](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#println%28java.lang.String%29)

```
writer.println(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:36:50.017

请试一试。

```
 public static void main(String[] arg) throws IOException{
    File file=new File("C:\\file.txt");
    String text="myText";
    FileOutputStream fileOutputStream=new FileOutputStream(file);
    fileOutputStream.write(text.getBytes());
    fileOutputStream.close();

} 
```

# python - 如何使函数更改其他函数的 True/False 语句

> ID：15390966
> 
> 赞同：-1
> 
> 时间：2013-03-13T16:26:43.840
> 
> 标签：python

这是我遇到麻烦的基本想法：我正在尝试制作一个简单的游戏，您在一个房间中，并且您有 2 个房间从第一个房间开始分支，需要在继续之前“完成”。我希望第 2 和第 3 间房间将我原来`True`的陈述更改`False`为在进行游戏之前都需要切换的陈述。

从系统导入退出

```
def room_1():
    print "You're in room one, there are two doors to room 2 and 3."
    print "Where do you want to go?"

    done_2=True
    done_3=True

    while True:
        move=raw_input("'room 2' or 'room 3'? >")

        if move == 'room 2':
            room_2()
        elif move == 'room 3':
            room_3()
        else:
            print "not a valid answer"
    print "You Win!"
    exit(0)

def room_2():
    print "You finished room 2!"
    done_1=False
    raw_input('Press button')
    room_1()

def room_3():
    print "You finished room 3!"
    raw_input('press button')
    done_3=False
    room_1()

room_1() 
```

如何更改房间 2 和房间 3 中的 done_ 语句？~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:29:37.380

在 Python 中，您必须先声明全局变量，然后才能分配给它们；否则，任何赋值都会影响全局变量。

```
def room_2():
    global done_1  # <- right here
    print "You finished room 2!"
    done_1=False
    raw_input('Press button')
    room_1()

def room_3():
    global done_3 # <- right here
    print "You finished room 3!"
    raw_input('press button')
    done_3=False
    room_1() 
```

# 然而！

这通常是不好的风格，尤其是对于这样一个简单的情况。它使您更难以推理您的函数是如何工作的，它们改变了什么以及以什么顺序。

`True`根据需要返回或返回`False`函数会更容易、更易读、更简单。

如果您尝试将您的函数视为具有输入并保证某些输出的“黑匣子”，它通常有助于避免可能出现的许多令人困惑的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:29:57.360

您需要在函数 room_1() 之外将 done_1 和 done_2 声明为全局变量

# firefox-addon - Firefox 插件开发：将“面板”设置为页面底部

> ID：15390974
> 
> 赞同：1
> 
> 时间：2013-03-13T16:27:13.503
> 
> 标签：firefox-addon, firefox-addon-sdk

我想创建一个面板/框架，看起来像当您按下“Ctrl+H”时出现在 Firefox 左侧的“历史”面板。我希望我的面板位于底部。

我觉得我必须使用[面板](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/panel.html)，但没有功能告诉我如何将它设置到当前打开的网页的底部。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:56:16.403

目前尚不支持此功能，但很快就会支持。这里的建议：[https](https://github.com/mozilla/addon-sdk/wiki/JEP-Panel-positioning) ://github.com/mozilla/addon-sdk/wiki/JEP-Panel-positioning您可以在其中关注讨论和错误。我已经有了一个原型，希望很快就能落地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:01:15.173

Panel 对象上的`show()`方法允许您设置用于定位面板的锚点，``show(anchor)`. 它需要浏览器 DOM 中的一个对象，您可以很容易地获得它。

您可以使用它将面板锚定在浏览器中的任何元素上。找到要用于精确定位的元素可能很棘手，我只是选择了状态栏，因为您希望面板位于底部。

以下是将面板放置在页面底部（左侧）的 SDK 代码：

```
var wuntils = require('sdk/window/utils');
var panel = require("sdk/panel").Panel({
  contentURL: 'http://stackoverflow.com/questions/15390974/firefox-addon-development-setting-the-panel-to-the-bottom-of-the-page'
});

panel.show(wuntils.getMostRecentBrowserWindow().document.getElementById("statusbar-display")); 
```

# objective-c - 将 GLKViewController 添加到子视图 - GLKView 上下文导致崩溃

> ID：15390976
> 
> 赞同：3
> 
> 时间：2013-03-13T16:27:21.637
> 
> 标签：objective-c, opengl-es-2.0, glkit, glkview

我有一个非常简单的设置，有一个 mainViewController，上面有一个 GLKViewController。这个想法是将我的 GLKViewController 放在一个盒子里，占据屏幕的 1/3，在 mainViewController 上。这可以在下面看到：

![在此处输入图像描述](../Images/21a2d969b63c4da9d7a2fdf3480ca524.png)

那个白框是我自己的自定义 GLKViewController ，代码如下：

*boxViewController.h*

```
//boxViewController.h
#import <UIKit/UIKit.h>
#import <GLKit/GLKit.h>

@interface boxViewController : GLKViewController
@end 
```

*boxViewController.m*

```
//boxViewController.m
#import "boxViewController.m"

@interface boxViewController () { }
@property (strong, nonatomic) EAGLContext *context;
@end

@implementation boxViewController

-(void)viewDidLoad {
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
//    view.context = self.context;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;
}

@end 
```

在我`mainViewController`的中，`viewDidLoad`我只是像这样调用 boxViewController：

```
boxViewController* box = [[boxChartViewController alloc] init];
box.view.layer.frame = CGRectMake(10, 50, self.view.frame.size.width-20, self.view.frame.size.height/3);
[self.view addSubview:box.view]; 
```

效果很好。

请注意，在我的 boxViewController.m 中，我已经`view.context = self.context`注释掉了。如果您取消注释它，我的应用程序将崩溃而没有任何错误消息（它`EXC_BAD_ACCESS`在`objc_msgSend`汇编代码中以 a 中断 [具体为第 8 行]）。

当我设置应用程序崩溃的上下文时，我做错了什么？从所有教程中，我注意到它们具有相同的设置，除了没有将控制器设置在另一个控制器上。虽然我不明白为什么 GLKViewController 不能被框架在另一个控制器上，所以我认为这不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T02:42:55.290

经过几个小时的折腾，我发现将 viewController 添加为子项是可行的：

```
#import "mainViewController.h"

@implementation mainViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.layer.backgroundColor = [UIColor colorWithRed:242.0f/255.0f green:242.0f/255.0f blue:242.0f/255.0f alpha:1.0].CGColor;

    boxViewController* chart = [[boxViewController alloc] init];
    chart.view.layer.frame = CGRectMake(10, 50, self.view.frame.size.width-20, self.view.frame.size.height/3);
    chart.view.layer.borderColor = [UIColor blackColor].CGColor;
    chart.view.layer.borderWidth = 2.0f;
    [self addChildViewController:chart];
    [self.view addSubview:chart.view];

} 
```

# sql - 比较sql server数据库中的数据

> ID：15390977
> 
> 赞同：0
> 
> 时间：2013-03-13T16:27:25.390
> 
> 标签：sql, sql-server, sql-server-2012

我在 2 台服务器上有一个 sql server 数据库。两者的结构相同。我遇到的一个问题是我想在两个数据库之间复制数据 - 但问题是我需要先删除并重新创建所有约束。

任何快速简便的方法来编写两个数据库之间关于数据的差异的脚本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:30:15.843

是的，停止花费数小时尝试编写执行此操作的脚本。使用久经考验的真正工具，为您处理所有这些工作和调试：

[http://www.red-gate.com/products/sql-development/sql-data-compare/](http://www.red-gate.com/products/sql-development/sql-data-compare/)

有一个试用版，也有几个替代品。阅读本文以了解为什么您不应该重新发明轮子：

[http://madelinebertrand.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/](http://madelinebertrand.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T16:35:42.513

只需投入 2 美分。如果您拥有 Visual Studio 2010 Premium 或 Ultimate，您实际上可以使用名为“[数据比较](http://msdn.microsoft.com/en-us/library/aa833428%28v=vs.100%29.aspx)”的功能来比较两个数据库之间的数据。它还可以为目标数据库生成更新脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:34:13.317

我只能重复与 Aaron Bertrand 相同的观点，此外，我成功地使用[XSQL](http://www.xsql.com/products/sql_server_data_compare/)完成了此类任务。

据我记得，这是一个很好的、一致的工具，可以使用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T16:36:39.807

首先，您需要通过更改相关表来关闭约束，例如：alter table [table name] nocheck constraint all

然后您可以通过链接或直接使用以下格式从其他服务器查询：select [cols] from [local table], [remote server.remote DB.remote table]

# shell - shell 脚本 ssh 命令退出状态

> ID：15390978
> 
> 赞同：23
> 
> 时间：2013-03-13T16:27:25.860
> 
> 标签：shell, ssh

在 shell 脚本的循环中，我连接到各种服务器并运行一些命令。例如

```
#!/bin/bash
FILENAME=$1
cat $FILENAME | while read HOST
do
   0</dev/null ssh $HOST 'echo password| sudo -S 
   echo $HOST 
   echo $?      
   pwd
   echo $?'
done 
```

在这里，我正在运行“echo $HOST”和“pwd”命令，并且通过“echo $?”获得退出状态。

我的问题是我希望能够将远程运行的命令的退出状态存储在某个变量中，然后（基于命令是否成功）将日志写入本地文件。

任何帮助和代码表示赞赏。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-13T16:50:37.443

`ssh`将使用远程命令的退出代码退出。例如：

```
$ ssh localhost exit 10
$ echo $?
10 
```

因此，在您的`ssh`命令退出后，您可以简单地检查`$?`. 您需要确保不掩盖您的返回值。例如，您的 ssh 命令以以下方式结束：

```
echo $? 
```

这将始终返回 0。您可能想要的是更像这样的东西：

```
while read HOST; do
  echo $HOST
  if ssh $HOST 'somecommand' < /dev/null; then
    echo SUCCESS
  else
    echo FAIL
done 
```

你也可以这样写：

```
while read HOST; do
  echo $HOST
  if ssh $HOST 'somecommand' < /dev/null
  if [ $? -eq 0 ]; then
    echo SUCCESS
  else
    echo FAIL
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-02T18:14:34.883

您可以将退出状态分配给变量，如下所示：

```
variable=$? 
```

在您尝试检查的命令之后。不要`echo $?`之前或新的值`$?`将是退出代码`echo`（通常为0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:46:16.803

一种有趣的方法是使用反引号检索在局部变量中设置的每个 ssh 命令的全部输出，或者甚至使用特殊字符（为简单起见说“:”）分开，例如：

```
export MYVAR=`ssh $HOST 'echo -n ${HOSTNAME}\:;pwd'` 
```

在此之后，您可以使用`awk`拆分`MYVAR`为您的结果并继续 bash 测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-18T17:01:32.497

也许在另一边准备日志文件并将其通过管道传输到标准输出，如下所示：

```
ssh -n user@example.com 'x() { local ret; "$@" >&2; ret=$?; echo "[`date +%Y%m%d-%H%M%S` $ret] $*"; return $ret; };
x true
x false
x sh -c "exit 77";'  > local-logfile 
```

基本上，只需在要使用此`x`包装器调用的遥控器上添加所有内容的前缀即可。它也适用于条件，因为它不会改变命令的退出代码。

您可以轻松循环此命令。

此示例将类似以下内容写入日志：

```
[20141218-174611 0] true
[20141218-174611 1] false
[20141218-174611 77] sh -c exit 77 
```

当然，您可以使其更好地解析或根据您的喜好调整日志文件的外观。请注意，远程程序的未捕获法线`stdout`被写入`stderr`（请参阅 中的重定向`x()`）。

如果您需要一个配方来捕捉和准备日志文件的命令输出，这里是来自[https://gist.github.com/hilbix/c53d525f113df77e323d](https://gist.github.com/hilbix/c53d525f113df77e323d)的此类捕捉器的副本- 但是是的，这是一个更大的样板文件“在 shell 的当前上下文中运行某些东西，后处理 stdout+stderr 而不会干扰返回代码”：

```
# Redirect lines of stdin/stdout to some other function
# outfn and errfn get following arguments
# "cmd args.." "one line full of output"
: catch outfn errfn cmd args..
catch()
{
local ret o1 o2 tmp
tmp=$(mktemp "catch_XXXXXXX.tmp")
mkfifo "$tmp.out"
mkfifo "$tmp.err"
pipestdinto "$1" "${*:3}" <"$tmp.out" &
o1=$!
pipestdinto "$2" "${*:3}" <"$tmp.err" &
o2=$!
"${@:3}" >"$tmp.out" 2>"$tmp.err"
ret=$?
rm -f "$tmp.out" "$tmp.err" "$tmp"
wait $o1
wait $o2
return $ret
}

: pipestdinto cmd args..
pipestdinto()
{
local x
while read -r x; do "$@" "$x" </dev/null; done
}

STAMP()
{
date +%Y%m%d-%H%M%S
}

# example output function
NOTE()
{
echo "NOTE `STAMP`: $*"
}

ERR()
{
echo "ERR `STAMP`: $*" >&2
}

catch_example()
{
# Example use
catch NOTE ERR find /proc -ls
} 
```

有关示例，请参见倒数第二行（向下滚动）

# c++ - opengl平台反弹

> ID：15390986
> 
> 赞同：0
> 
> 时间：2013-03-13T16:27:38.573
> 
> 标签：c++

最近我在 C++ 中开始了一个关于 OpenGL 的项目，但我遇到了一个障碍。播放器是一个立方体，尺寸为 32x32，平台尺寸为 32x32。当重力到位时，玩家会按照应有的方式下落，撞击平台，并不断上下弹跳。

无论如何，这是我的 C++ 代码：

播放器.h：

```
typedef void *(*ccallbackv)(void);
typedef void *(*ccallbackc)(const std::string);

const float g_gravity = 0.52f;

class Player :
    public CBaseObject
{
    // Variables
    int m_health, m_stealth, m_maxHealth, m_maxStamina;
    float jumpForce;
    bool mEnabled;
    ccallbackv* c_damageCallback;
    ccallbackc* c_killedCallback;
    bool m_isOnGround;

    // Movement Variables
    Vector2f velocity;
    BoundingBox2D<float>* m_tilePosition, *m_oldTilePosition;
    GLuint m_texture;
    Level* level;

public:
    Player(void);
    virtual ~Player(void);
    virtual void SetDamageCallbackFunc(ccallbackv* func) { this->c_damageCallback = func; }
    virtual void SetKilledCallbackFunc(ccallbackc* func) { this->c_killedCallback = func; }
    virtual void Kill(CBaseObject* killer = NULL);
    virtual void Reset();
    virtual void Tick();
    virtual void Render();
    virtual void KeyPress(char);
    virtual void Enabled(bool v) { this->mEnabled = v; }
    virtual bool isEnabled() { return this->mEnabled; }
    virtual void Collision();
    virtual bool OnGround(bool r) { if(r != m_isOnGround) { m_isOnGround = r; } return m_isOnGround; }

    virtual void SetLevel(Level* level) { this->level = level; }
    virtual Level* GetLevel() { return level; }

    virtual Vector2f* getPosition(){
        return &this->m_tilePosition->getVector();
    }
    virtual BoundingBox2D<float>* getBoundries() { return this->m_tilePosition; }

    virtual void setPosition(const Vector2f position){
        return this->m_tilePosition->setVector(position);
    }
    virtual bool IsAlive(){
        return m_health > 0;
    }
    virtual bool HasStamina(){
        return m_stealth > 0;
    }
    virtual void SetJumpForce(float force){ this->jumpForce = force; } 
    virtual float getJumpForce() { return this->jumpForce; } 
}; 
```

播放器.cpp：

```
int movement_position = 0;
float old_y = 0;

Player::Player(void)
{
    this->SetTypeString("PLAYER_NON_NPC");
    m_texture = ImportTexture("Player.png");

    this->velocity = Vector2f(0,0);
    this->m_tilePosition = new BoundingBox2D<float>(64,0,32,32);
    this->mEnabled = true;
    this->OnGround(false);
    old_y = -5;

}

Player::~Player(void)
{
}
void Player::Kill(CBaseObject* killer){
    if( this->c_killedCallback != NULL )
        (*this->c_killedCallback)( std::string( "Player was killed by entity " + ( !killer->GetTypeString().empty() ) ? killer->GetTypeString()
        : "unknown."));

    this->m_health = 0;

}
void Player::Reset(){
    this->m_health = 100;
    this->m_stealth = 100;
}
void Player::Tick()
{
    if(!this->mEnabled) return;
    float ticks = std::toFloat(Time::getSystemTicksSeconds());

    m_oldTilePosition = this->m_tilePosition;

    if( GLOBALS::pressedKey == 'd' ){
        velocity.setX(clamp<float>(velocity.getX() + (1.0f / 10000) * ticks, -0.05f, 0.05f));
    }
    else if( GLOBALS::pressedKey == 'a' ){
        velocity.setX(clamp<float>(velocity.getX() - (1.0f / 10000) * ticks, -0.05f, 0.05f));
    }
    else {
        velocity.setX(0);
    }

    this->Collision();

    if( !m_isOnGround OR ( old_y != this->getBoundries()->getY() ) ){
        velocity.addY(clamp<float>(0.0001f * ticks, -0.005f, 0.005f));
    }

    if(m_oldTilePosition != this->m_tilePosition)
        glutPostRedisplay();

    if( ( old_y == this->getBoundries()->getY() ) ) {
        this->m_tilePosition->setY(old_y);
        velocity.setY(0);
    }
    this->m_tilePosition->addVector(this->velocity);
}

void Player::KeyPress(char i){

}
void Player::Collision(){
    if( this->level == NULL ) return;

    float old_yc = 0;

    std::vector<Tile*> mapData = this->level->GetMap();

    OnGround(false);

    for(unsigned int i = 0; i < mapData.size(); ++i){
        BoundingBox2D<float>* source = this->getBoundries();
        BoundingBox2D<float>* mapTile = mapData.at(i)->getBoundries();
        Vector2f mapTileVector = mapTile->getIntersectionDepth(source);
        Vector2f abs = mapTileVector.Absolute();

        if( mapTileVector != Vector2f(0,0) && mapTile->IntersectsWith(source)){

            if( abs.getX() > abs.getY() ){
                if( old_y <= mapTile->top() )
                    OnGround(true);

                if(m_isOnGround){
                    this->getBoundries()->setVector(Vector2f(this->m_tilePosition->getX(), this->m_tilePosition->getY() + mapTileVector.getY()));
                    old_yc = this->getBoundries()->getVector().getY();
                }
            }
        }   
    }

    old_y = old_yc;
}

void Player::Render()
{
    if( this->m_texture == 0x0 ) return;

    glEnable(GL_TEXTURE_2D);
        glBindTexture(GL_TEXTURE_2D, this->m_texture);
        glBegin(GL_QUADS);
        ::glTexCoord2f(0.0f, 0.0f); ::glVertex2f(this->m_tilePosition->getX(),this->m_tilePosition->getY());
        ::glTexCoord2f(0.0f, 1.0f); ::glVertex2f(this->m_tilePosition->getX(),this->m_tilePosition->getY() + this->m_tilePosition->getH());
        ::glTexCoord2f(1.0f, 1.0f); ::glVertex2f(this->m_tilePosition->getX() + this->m_tilePosition->getW(),this->m_tilePosition->getY() + this->m_tilePosition->getH());
        ::glTexCoord2f(1.0f, 0.0f); ::glVertex2f(this->m_tilePosition->getX() + this->m_tilePosition->getW(),this->m_tilePosition->getY());
        glEnd();
    glDisable(GL_TEXTURE_2D);

} 
```

# java - reRender rich:tabPanel 不丢失数据

> ID：15390991
> 
> 赞同：0
> 
> 时间：2013-03-13T16:27:57.427
> 
> 标签：java, jsf, richfaces, jsf-1.2, ajax4jsf

使用 JSF 1.2 和 Richfaces 3.3，我有这种形式：

```
<h:form>
    <rich:tabPanel switchType="client" id="tabPnl">
        <rich:tab label="MAIN_TAB">
            <h:outputText value="#{msg.date}"/>
            <rich:calendar value="#{MyBean.date}">
                <f:validator validatorId="CalendarValidator" />
            </rich:calendar>
            <h:message for="DataInici" errorClass="error" />

            <h:outputText value="#{msg.selector}"/>
            <h:selectOneMenu id="select_val" value="#{MyBean.selectedItem}">
                <f:selectItem itemLabel="#{msg.select_value}" itemValue="-1" />
                <f:selectItems value="#{MyBean.listOfItems}" />
                <f:validator validatorId="NumSelValidator" />
                <a4j:support event="onchange" reRender="tabPnl" ajaxSingle="true" />
            </h:selectOneMenu>
            <h:message for="select_val" errorClass="error" />
        </rich:tab>

        <rich:tab label="SUBTAB1" id="subtab1" rendered="#{MyBean.selectedItem == 1}">
            // form components such as inputText and/or SelectOneMenu.
        </rich:tab>

        <rich:tab label="SUBTAB2" id="subtab2" rendered="#{MyBean.selectedItem == 2}">
            // Other form components such as inputText and/or SelectOneMenu.
        </rich:tab>
    </rich:tabPanel>

    <h:commandButton value="#{msg.insert}" action="#{MyBean.insertData}">
</h:form> 
```

开始时，SUBTAB1 和 SUBTAB2 不呈现，因为默认值为`MyBean.selectedItem`-1。

首先，用户在`<rich:calendar>`组件中选择一个日期，然后在`<h:selectOneMenu>`. 之后，所需的行为（我想要实现的）是重新渲染 tabPanel 而不会丢失已经引入的数据。因此，我希望选项卡`SUBTAB1`或`SUBTAB2`根据在`<h:selectOneMenu>`.

**我得到**了什么： tabPanel 被重新渲染，适当的 SUBTAB 被渲染，但在第一个选项卡中引入的数据丢失了。

如何在不丢失已经引入的数据的情况下呈现这些选项卡？我试图重新渲染特定的选项卡，但它不会使它们变得渲染（我想它只会影响它们的内容）。

先感谢您。

注意：所有涉及的 bean 都是 Session 范围的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:04:13.550

问题是输入值没有在服务器上处理。`ajaxSingle="true"`从中删除`a4j:support`，因此当 selectOneMenu 值更改时会处理整个表单。您可以使用`process`属性来限制提交区域（以防您不想处理整个表单）。

> ajaxSingle
> 
> 将 JSF 树处理（解码、转换、验证和模型更新）仅限于发送请求的组件。布尔值。默认值为“假”。

# c - 检测哪个字母最常见的程序

> ID：15390996
> 
> 赞同：0
> 
> 时间：2013-03-13T16:28:08.707
> 
> 标签：c, variables, loops, optimization

我是 C 的初学者，我正在尝试制作一个程序来检测最多 10 个字母中哪个字母最常见。这是我到目前为止所得到的：

```
char one = 'a'; //0110 0001
char check[10];

scanf("%s", &check);
char *ptr;
int a = 0;int b = 0;int c = 0;int d = 0;int e = 0;int f = 0;int g = 0;int h = 0;int i = 0;int j = 0;int k = 0;int l = 0;int m = 0;int n = 0;int o = 0;int p = 0;int q = 0;int r = 0;int s = 0;int t = 0;int u = 0;int v = 0;int w = 0;int x = 0;int y = 0;int z = 0;

if (check[0]=='a'){
    a += 1;
    if (a> b && a> c && a> d && a> e && a> f && a> g && a> h && a> i && a> j && a> k && a> l && a> m && a> n && a> o && a> p && a> q && a> r && a> s && a> t && a> u && a> v && a> x && a> y ){
        printf("A is the most common letter);
    }
} 
```

'if' 语句仅适用于输入的第一个字母，并且仅检查字母 a。这是我需要帮助的地方，我该如何优化？我怎样才能创建一个循环而不是拥有所有 a>b && a>c ... 等等。此外，如果可以以更短的方式声明许多类似的变量？一般来说，我如何保持简短，我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:59:06.240

是的，你做错了很多事情。

**这部分代码**

`int a = 0;int b = 0;int c = 0;int d = 0;int e = 0;int f = 0;int g = 0;int h = 0;int i = 0;int j = 0;int k = 0;int l = 0;int m = 0;int n = 0;int o = 0;int p = 0;int q = 0;int r = 0;int s = 0;int t = 0;int u = 0;int v = 0;int w = 0;int x = 0;int y = 0;int z = 0;`

是可怕的东西。

*使用数组，如下所示：* `int letter[25];`

`letter[0]`将是你的`a`，`letter[1]`将是你的`b`……`letter[49]`将是你的`z`。

**这部分代码**

```
if (check[0]=='a'){
    a += 1; 
```

是做你想做的事的坏方法。

*你应该这样做：*

```
int i;

for(i = 0; i < 10; ++i)
{
    if(check[i] >= 'A' && check[i] <= 'Z') // Check if letter is uppercase.
        ++letter[check[i] - 'A']; // 'A' == 65, But our array is from 0 to 49.

    if(check[i] >= 'a' && check[i] <= 'z') // Check if letter is lowercase.
        ++letter[check[i] - 'a']; // 'a' == 97\. Note that 'A' is not 'a'.
} 
```

这将检查哪个字符最常见，并将其存储在`letter`数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:22:45.660

您当然可以按照自己的方式进行操作，并将每个字母相互比较。但通常你会分两个阶段进行

*   计算字母出现的频率

    ```
    int letters[26];
    int i, n = strlen(check), max;
    memset(letters, 0, sizeof(letters));
    for (i = 0; i < n; ++i) {
        char c = tolower(check[i]);
        letters[c - 'a']++;
    } 
    ```

*   选择最高的

    ```
    max = 0;
    for (i = 1; i < 26; ++i)
        if (letters[i] > letters[max])
            max = i;

    printf("%c is the most common letter\n", max + 'a'); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:39:45.530

令人印象深刻的工作:)

```
int counts[26]; // We are expecting 26 letters
char check[10];
char *ptr;
scanf("%s", check);

memset(counts, 0, sizeof(counts)); // zero all array values
for (ptr = check; *ptr; ptr++)
{
   char ch = *ptr;
   if (isalpha(ch)) // ignore non-alphas
   {
      ch = tolower(ch);
      counts[ch - 'a']++;
   }
} 
```

`dreamzor`您可以从答案中添加最佳索引查找代码

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T16:33:23.120

您需要使用循环和数组。只需将您收到的字母数量存储在一个数组中，然后将当前字母数量与最佳数量进行比较：

```
char check[10];
scanf("%s", &check);
const int checkSize = strlen(check);

int numberOfLetters[26]; 
for(int i = 0; i < 26; ++i) 
    numberOfLetters[i] = 0;

int bestLetterIndex = -1;

for(int i = 0; i < checkSize; ++i) {
    int letterIndex = check[i] - 'a'; // getting index from ASCII code
    numberOfLetters[letterIndex]++;

    if(i == 0 || // first letter, index not found yet 
       numberOfLetters[letterIndex] > numberOfLetters[bestLetterIndex]) {
        bestLetterIndex = letterIndex;
    }
}

printf("Most common letter is %c", (char)(bestLetterIndex + 'a')); 
```

# jquery - 使 Handlebars 与一组对象一起工作

> ID：15390997
> 
> 赞同：1
> 
> 时间：2013-03-13T16:28:13.460
> 
> 标签：jquery, handlebars.js

我有一个我希望车把处理的对象

```
stock= [
{
  trailer: "TT6565",
  usual  : "Jack",
  group  : "Mercs"

},
{
  trailer: "TT6589",
  usual  : "Paul",
  group  : "Mercs"
}
] 
```

这是一个示例，但在我的脚本中，该对象是从 ajax 请求创建的。

这是我的车把脚本

```
<script id="mwl707" type="text/x-handlebars-template">

<div id='vehicles' class='wrapper'>
<div class='divd spacer'>&nbsp</div>

    {{#each stock}}
        <div id='{{group}}' title='Driver Details' class='divd {{group}}' >
        {{trailer}} + "<br>" + {{usual}}
        </div>
    {{/each}}

</div>

</script>

 var source = $("#mwl707").html();
 var template = Handlebars.compile(source);

 $("#thisPage").append(template( stock )); 
```

问题是 iterate(each) 部分没有贯穿我的列表，我认为车把不喜欢对象，但有什么办法解决这个问题吗？还是我弄错了代码？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:47:16.020

尝试：

```
{{#each this}}
    <div id='{{group}}' title='Driver Details' class='divd {{group}}' >
        {{trailer}} + "<br>" + {{usual}}
    </div>
{{/each}} 
```

看我的例子：http: [//jsfiddle.net/svZws/](http://jsfiddle.net/svZws/)

您使用的原因`{{#each this}}`是因为您将`stock`对象传递给模板，因此在模板引擎的上下文中，`this`指的是您的`stock`对象。

如果使用`{{#each stock}}`，则表示*stock*`template()`是您传递给函数的对象内的属性名称。

# jquery - 获取元素的当前 HTML

> ID：15390999
> 
> 赞同：1
> 
> 时间：2013-03-13T16:28:14.350
> 
> 标签：jquery, html, text-capture

我有一个 id 为“stage”的 div。在这个 div 中，有文本输入和任何其他可能放入其中的内容。

当用户单击按钮时，我想在舞台 div 中获取 html 并将其保存在某处。我注意到的问题是在更改屏幕上的 TextInput 后​​，我​​没有得到当前的 HTML。

问题是我永远不知道这个阶段的 div 会是什么。它可以是任意数量的东西，大多数时候包含用户可以输入文本的表单元素。

例如，如果阶段包含

```
<input type='text' value="Test Content"> 
```

创建它时，然后用户将输入的值更改为“我的测试内容”，我希望 jQuery html() 得到

```
<input type='text' value="My Test Content"> 
```

点击按钮后。

如何才能做到这一点？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:32:12.917

***使用***only[`.html()`](http://api.jquery.com/html/)不会改变. 它将继续使用初始值：。我建议使用and 。*`input``<input type='text' value="Test Content">`[`.each()`](http://api.jquery.com/each/)[`.val()`](http://api.jquery.com/val/)*

 *JAVASCRIPT：

```
$(document).ready(function(){
    $('#b1').click(function(){
        $('#stage input').each(function(){
           $('#stage input').attr('value', $(this).val());
        });
        $('#results').html($('#stage').html());
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/Yctwk/5/](http://jsfiddle.net/dirtyd77/Yctwk/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:32:23.953

如果您知道 buttonID，则可以执行以下操作：

```
var divHtml; 

$("#buttonID").click(function() {
    divHtml = ("#stage").html();
}); 
```

当您单击 ID 为“buttonID”的按钮时，这会将 ID 为“stage”的 div 中的所有 HTML 分配给变量 divHtml*