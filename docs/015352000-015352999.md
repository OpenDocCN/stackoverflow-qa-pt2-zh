# StackOverflow 问答 15352000-15352999

# java - 使用 .apk 文件在任何手机上运行 Android 应用程序

> ID：15352001
> 
> 赞同：1
> 
> 时间：2013-03-12T01:59:56.890
> 
> 标签：java, android, android-emulator, apk, android-install-apk

我正在处理`Android Application`我`.apk file`的项目 bin 文件夹中的一个。现在我打算把这个`.apk file`送给我的几个朋友。这样他们就可以在模拟器和手机中运行我的应用程序，而无需对 Google Map API 密钥的 XML 文件进行任何更改。

`.apk file`那么在给他们之前我还需要做其他事情吗？

因为在我的情况下，当我在模拟器上运行我的项目时，`.apk file`是在 bin 目录中生成的。所以我想`.apk file`直接把这个给他们。

让我知道我是否需要在分发之前做任何其他事情。

我需要在分发之前签署 .apk 文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:03:42.663

不要给你的朋友调试 APK 文件。相反，请先创建一个发布密钥并[正确签署您的 APK](http://developer.android.com/tools/publishing/app-signing.html)。调试密钥是有时间限制的，如果您的朋友使用该密钥，那么当调试密钥到期时（通常在您首次启动 eclipse/ADT 一年后），他们将无法再升级应用程序，并且所有数据都将丢失。

签署您的应用程序是免费的，并且只需几分钟即可完成设置。你没有理由不签。

此外，您的朋友需要在他们的设备上启用“允许从未知来源安装”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:02:55.707

你可以直接给他们，你不需要签署 .apk 来让它工作。

# android - android 中是否使用 FragmentActivity 调用所有 Fragment onCreateView 方法？

> ID：15352004
> 
> 赞同：0
> 
> 时间：2013-03-12T02:00:15.760
> 
> 标签：android, fragment, android-fragmentactivity

我已经使用`FragmentActivity`,`ViewPagerAdapter`和`Fragment`来构建选项卡格式。我的有 3 个标签`FragmentActivity`。我很困惑`Fragment` `onCreateView`是在调用`FragmentActivity`方法时调用所有方法还是调用选项卡的 onCreateView 方法`onClick`？我已经`onCreateView`为所有 3 设置了 3 个断点方法`Fragments`。在调试期间，我发现只`onCreateView`调用了前 2 个方法。请解释为什么只调用 2 个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:25:36.990

ViewPagerAdapter 将根据用户需要管理创建片段和销毁片段。所以如果你不设置**mViewPager.setOffscreenPageLimit(NUM_TABS-1)**，默认是1（你可以参考[这里](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)）

这就是为什么它只创建前 2 个选项卡的原因，当您选择 tab3 时，它将破坏 tab1 的片段并创建 tab3 的片段。对于您的情况，如果您在调试时设置***mViewPager.setOffscreenPageLimit(2)***，您将看到它调用了 3 个 onCreateView 方法并且不会破坏任何片段的视图。希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:07:29.197

它们是根据用户需求创建和销毁的。如果您滚动到第二个片段，您会看到它已创建。这只是一个优化。您是否认为具有例如 8 个片段的应用程序需要将 8 个片段保留在内存中？这将是资源的浪费。

# jakarta-ee - 如何在不扩展 ActionSupport 的情况下使用 addActionMessage

> ID：15352007
> 
> 赞同：-1
> 
> 时间：2013-03-12T02:00:27.153
> 
> 标签：jakarta-ee, struts2, annotations

我正在使用@Action 来定义我的动作类，但要使用`addActionMessage`我必须扩展`ActionSupport`类。

由于我的控制器正在扩展一个抽象类，我无法扩展`ActionSupport`类。我应该怎么做才能使用`addActionMessage`而不扩展`ActionSupport`.

```
import org.apache.struts2.convention.annotation.Action;

@Action
public class MyClass extends AbstractOtherClass implements ModelDriven {
      ....
    public String Messages(){
       addActionMessage("g");  << cannot find symbol error 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:46:49.433

这暴露了继承的问题之一；您必须确保在层次结构中的正确位置扩展类。这里的评论是正确的（可能应该是一个答案）：它是应该扩展的抽象基类`ActionSupport`。

也就是说，这是否是*最好*的方法还有待商榷。S2 的类层次结构意味着它肯定是*最简单*的方法，但您也可以实现适当的接口并使用现有的 S2 功能来实现相同的结果，尽管需要付出更多的努力。

S2（正确地）声称动作可以是 POJO，但事实是，如果这样做，您将失去*很多S2 功能。*操作应该被视为客户端（通常是浏览器）和实际完成工作的代码之间的接口。将 web 层绑定到 web 框架并不是一个真正的问题：您可能会失去少量的灵活性，但这种灵活性应该在其他地方编码并由 web 层*使用。*

# matlab - 如何摆脱这个 MATLAB 错误？“在赋值 A(I) = B 中，B 和 I 中的元素数必须相同。”

> ID：15352009
> 
> 赞同：0
> 
> 时间：2013-03-12T02:00:31.213
> 
> 标签：matlab, struct, indexing

对于下面的 b 数组，我不断收到此错误

A = one(numTrials, 2*numDOFs);
b = 个(numTrials, 1);

```
k = 2;
for i = 2:numSubjects
    for j = 1:numTrials
        A(k,:) = cat(2,subject(i).trial(j).torque_integral, subject(i).trial(j).work_integral); 
        b(k) = [subject(i).trial(j).E - subject(i).trial(j).B - sum(subject(i).trial(j).work_integral)];        
        k = k + 1;
    end
end 
```

* * *

我测试了创建 b 数组的每个组件（subject(i).trial(j).E 等），它们都是标量值。所以我应该能够添加/减去它们，然后将它们分配给预分配的 b 数组中的索引。一个简单的虚拟版本如下所示：

> > c = 个（4,1）

c =

```
 1
 1
 1
 1 
```

> > c(3) = 3

c =

```
 1
 1
 3
 1 
```

* * *

那么我在这里错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:14:50.107

您可能应该打印出分配中每个元素的大小，您的问题将自行解决；

```
size(cat(2,subject(i).trial(j).torque_integral, subject(i).trial(j).work_integral))
size([subject(i).trial(j).E - subject(i).trial(j).B - sum(subject(i).trial(j).work_integral)]) 
```

注意 - 我`;`在上面省略了尾随，这会导致值输出到控制台；此外，您对 B 的分配也有`[]`它，就好像您正在尝试创建一个向量一样。如果它真的是一个单一的元素，那就没有必要了......

# java - 在读取文件之前检查文件是否打开？

> ID：15352010
> 
> 赞同：1
> 
> 时间：2013-03-12T02:00:31.250
> 
> 标签：java, applet

我正在尝试制作一个小程序，它以非常频繁的间隔（每秒几次）读取本地文件系统（用户计算机）上的文件，然后通过 javascript 将文件的内容提供给网页。

小程序需要读取的文件由用户计算机上的程序以高频率更新。我担心的是，如果小程序在文件处于更新过程中时从文件中读取数据，可能会发生什么情况。

我不知道这有多大可能，但如果这是一个有效的问题，有没有办法在读取文件之前确保文件当前没有被写入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:52:47.003

我对此并不肯定，但您可以尝试[`java.io.FileInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)，或该软件包中的其他选项。

此外，这个问题可能是重复的。这可能会回答您的问题：

1.  [如何使用 Java 从正在写入的文件中读取？](https://stackoverflow.com/questions/4149/how-do-i-use-java-to-read-from-a-file-that-is-actively-being-written)
2.  [在写入文件时读取文件](https://stackoverflow.com/questions/7537054/reading-a-file-while-its-being-written)
3.  [在写入文件时读取文件](https://stackoverflow.com/questions/4460221/read-a-file-while-its-being-written)
4.  [在写入文件时从文件中读取数据](https://stackoverflow.com/questions/7912307/reading-data-from-a-file-while-it-is-being-written-to)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:19:01.367

进行这样的磁盘访问是非常可怕的，如果可以的话，请尝试使用套接字，或者如果您再次坐下来，如果其中一个锁定失败，请尝试在两端锁定文件，然后确保另一个正在锁定，弥补这一点利用

```
File file = new File(fileName);
FileChannel channel = new RandomAccessFile(file, "rw").getChannel();
// Get an exclusive lock on the whole file
FileLock lock = channel.lock();
try {
    lock = channel.tryLock();
    // Ok. You get the lock
} catch (OverlappingFileLockException e) {
    // File is open by other end 
} finally {
    lock.release();
} 
```

# facebook - Facebook Graph 高分辨率照片

> ID：15352014
> 
> 赞同：9
> 
> 时间：2013-03-12T02:01:10.100
> 
> 标签：facebook, facebook-graph-api

我正在为“me/home”进行 Facebook Graph API 调用以获取用户的新闻提要。众所周知，您在“图片”字段中获得的 URL 是一张低分辨率的照片，在 100x100 以上的任何东西上都不好看。我知道您可以通过对“object_id”进行另一个图形调用并在该结果中使用“source”字段来获取高分辨率图片的 URL。

但我正在查看 URL，并认为可能有一种方法可以将一个转换为另一个，而无需进行另一个图形调用。要么，要么从其他领域的现有数据中构建高分辨率。例如，第一个 URL 是低分辨率的，第二个 URL 是源分辨率。

```
http://photos-d.ak.fbcdn.net/hphotos-ak-ash4/297313_10152643117455790_610095553_s.jpg
http://sphotos-b.xx.fbcdn.net/hphotos-ash4/297313_10152643117455790_610095553_n.jpg 
```

看起来数字是`(something I don't know)_("object_id")_(something else I don't know)`

有没有人尝试更改 URL，同时仍将数字部分保持在中间？通常是否存在可能导致正则表达式问题的变化？

编辑：这是我正在使用的代码。

```
String objectId = null;
if (jsonObject.has("object_id")) {
    objectId = jsonObject.getString("object_id");
}
String postPhoto = "http://graph.facebook.com/" + objectId + "/picture"; 
```

检查帖子是否为照片在代码中稍早一些，因此它将始终针对“照片”类型的帖子运行这些行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T02:40:56.840

`me/home`-graph api 有一个名为`"object_id" and "type"`. 如果类型是“照片”，那么您将拥有这个 object_id 值。通过使用此对象 id 并进行另一个图形 api 调用，您将获得一个名为`"images"`. 这个对象有几个选项（不同的大小）。

或者

使用像下面这样的对象 id 并获取相册大小的照片版本。此调用支持的类型为“缩略图、普通、相册”。

```
https://graph.facebook.com/{object-id-from-feed}/picture?type=normal 
```

并在[“支持的对象示例”](https://developers.facebook.com/docs/reference/api/using-pictures/)部分下查看此链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-26T12:07:28.830

您需要做的就是（图形 API）：

```
http://graph.facebook.com/me?fields=picture.height(961) 
// all any height which u want 
```

或（对于其他用户）

```
http://graph.facebook.com/{user_id}?fields=picture.height(961) 
// replace {user_id} with the user id you want 
```

更新 ：

由于 Facebook API 将不断更新，此解决方案可能已被弃用。此变通方法解决方案将来可能不起作用。

**您可能还需要访问令牌来执行此端点。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T15:52:45.653

这是一个迟到的回应，但我找到了更好的方法

如果您使用这样的图形 api 获得地址

```
https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-xaf1/t1.0-9/s130x130/10501892_701590943222768_782659935906208443_n.png 
```

然后只需将 130x130 替换为有效分辨率

```
https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-xaf1/t1.0-9/s480x480/10501892_701590943222768_782659935906208443_n.png 
```

您将能够获得高分辨率图像

可以从此示例调用中找到有效的图像分辨率

[http://graph.facebook.com/701586786556517](http://graph.facebook.com/701586786556517)

701586786556517 = 来自 Facebook 图形 API 调用的 object_id

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-02T18:43:07.250

用这个：

```
/user_id/?fields=picture.height(961) 
```

它将提供最大可能的分辨率图片。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-16T12:46:22.837

出于某种原因，这个问题的答案都没有奏效，但是，另一个论坛上的一个人发布在字段参数中使用“full_picture”，它就像一个魅力。我在任何文档中都没有找到这个……除非我忽略了它？

OP [https://www.quora.com/How-do-I-get-the-full-size-of-image-in-a-Facebook-post-using-Graph-API](https://www.quora.com/How-do-I-get-the-full-size-of-image-in-a-Facebook-post-using-Graph-API)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-19T12:43:16.813

graph api 返回包含**图像**和**webp_images**的响应，并且它具有所有可用分辨率的图像链接。

根据最新版本：**v2.12**

对于个人资料照片：

```
/me?fields=photos{picture,images,webp_images} 
```

具体专辑：

```
'album-id'?fields=photos{picture,images,webp_images} 
```

字段详情：

**photos** : 可用照片数组，这将返回 json，如下所示：

```
{
    data: [],
    pagin: []
} 
```

在**数据**对象中，我们将获得以下字段：

**图片**：低分辨率图像的链接可能用于缩略图的使用

**images** : 光栅格式不同分辨率的图片对象数组

**webp_images** : webp格式不同分辨率的图片对象数组

**图像**和**web_images**对象将具有如下数据：

```
{
    height: number, // 400
    source: 'link for the image with the resolution of height and width specified', //https:....
    width: number //496
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-11T10:01:59.560

以上都不适合我，要求现场附件解决了

```
&fields=picture.type(large),attachments 
```

# jfreechart - jfreechart 在客户端

> ID：15352015
> 
> 赞同：1
> 
> 时间：2013-03-12T02:01:11.070
> 
> 标签：jfreechart, gantt-chart

我已经使用 jfreechart 实现了甘特图。我想知道如何从客户端访问此图表。另外我不想要图表的图像，我还想要它旁边的缩放功能。如何做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:15:39.857

> 你能详细说明一下吗？

虽然在 servlet 上下文中可以实现最低限度的交互式图表，但可以通过[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从服务器获得完全交互式的桌面应用程序。在 JFreeChart[示例中](http://www.jfree.org/jfreechart/samples.html)，[JWS 演示](http://www.jfree.org/jfreechart/jfreechart-1.0.13-demo.jnlp)最能说明潜力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:22:17.487

我认为您必须捕获客户端事件并从服务器端处理它，当然还要重新加载带有更改的图像。

# python - 未使用回车时 HTML 电子邮件呈现不正确

> ID：15352020
> 
> 赞同：0
> 
> 时间：2013-03-12T02:02:06.697
> 
> 标签：python, html, email, html-email

以下 python 脚本生成一个电子邮件文件，该文件可以通过管道传送到 sendmail。当我将它发送到我的 gmail 帐户时，第 25、50 和 51 行并不是我所期望的。所有其他行都按预期显示。

```
import sys
print "From:test@test.com"
print "To:you@you.com"
print "Subject: test no carriage return"
print "MIME-Version: 1.0"
print "Content-Disposition: inline;"
print "Content-Type: text/html"
sys.stdout.write ("<html>" )
count = 1
while ( count < 55):
 # output without a carriage return 
 sys.stdout.write( "<tr><td>test" + str(count) + " no carriage returns!</td>")
 count = count + 1
sys.stdout.write ("</html>") 
```

在电子邮件中，我希望第 25、50、51 行是这样的：

```
 test25 no carriage returns!
 test50 no carriage returns!
 test51 no carriage returns! 
```

相反，这是呈现：

```
 test25 no carriage retur! ns!
 test50 no ca! rriage returns!
 test51 no carriage returns!        test52 no carriage returns! 
```

如果我将输出更改为使用`print`而不是`stdout`，则电子邮件将按预期显示。我也在 MS Outlook 中尝试过，效果相同。不使用回车时出现意外结果的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:22:18.870

不确定这是否是一个错字，但一方面你没有关闭你的行。您缺少一个：

```
</tr> 
```

以及打开和关闭表格标签。

# asp.net - 在不附加/分离实体的情况下构建存储库更新方法？

> ID：15352022
> 
> 赞同：1
> 
> 时间：2013-03-12T02:02:24.840
> 
> 标签：asp.net, asp.net-mvc-3, web-applications, asp.net-mvc-4

我有以下更新方法，似乎有效：

```
public Folder UpdateFolder(Folder folder)
        {
            Folder serverFolder = _db.Folders.FirstOrDefault(f => f.FolderId == folder.FolderId);
            if (serverFolder != null)
            {
                serverFolder.Title = folder.Title;
                serverFolder.Details = folder.Details;
            }
            SaveChanges();
            return serverFolder;
        } 
```

我刚刚注意到，我读过的大多数更新方法都调用了 Entry.StateDetached 和 StateAttached - 我在上面所做的一切正常，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:30:14.707

没关系。 `_db.Folders.FirstOrDefault`读取`Folder`并附加到上下文中。

如果您只是传入`Folder`（不读取）并尝试更新它，则需要检查实体是否已附加。

基本上，`Folder serverFolder = _db.Folders.FirstOrDefault(f => f.FolderId == folder.FolderId);`确保文件夹已附加，因此您不必担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:16:59.740

我认为你需要做`_db.SaveChanges();`而不是`SaveChanges();`

# apache - htaccess 斜杠扩展

> ID：15352025
> 
> 赞同：0
> 
> 时间：2013-03-12T02:02:33.253
> 
> 标签：apache, .htaccess

我想强制删除文件扩展名。

示例： domain.com/sub/index.html to 应该被自动重定向到 domain.com/sub/index [没有尾部斜杠]

我使用的 .htaccess 代码不是我真正想要的。它允许 index.html 存在，如果键入 domain.com/sub/index 它会自动重定向到 domain.com/index/ [它转到根目录并添加尾部斜杠]

请帮忙。这是我的 .htaccess 代码

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html 

# Forces a trailing slash to be added
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\im\.[a-zA-Z0-9]{1,5}|)$
RewriteRule (.*)$ /$1/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:04:32.507

在设置任何条件之前，您需要设置基本路径，如下所示：

```
RewriteBase /sub 
```

您还需要从规则中删除两个斜杠。所以，`/$1/`会变成`$1`

# javascript - 当通过回调异步检索某些值时如何构建数组？

> ID：15352032
> 
> 赞同：0
> 
> 时间：2013-03-12T02:02:58.230
> 
> 标签：javascript, jquery, asynchronous, callback

我正在尝试构建一个 JavaScript 函数，该函数将根据一些用户输入返回一个目的地数组。一些输入可以直接放入数组中（例如当用户输入地址时）。其他时候，我需要使用 Google Places API 将地点（即五金店）翻译成现实世界的目的地。问题是这些目的地是通过回调异步返回的。当我有这些位置通过回调在所有不同时间进入时，如何建立然后使用数组？

这是我到目前为止的代码：

```
function parseDestinations(){
    var listItems = $('#InputBoxesList').children();
    var destinations = [];
    for(var i=0; i< listItems.length;i++){
        var selector = $(listItems[i]).children('.locationTypeSelector')[0];
        var locationInputBox = $(listItems[i]).children('.locationInput')[0];
        var selectedValue = selector.options[selector.selectedIndex].value.replace('select_','');

        if(selectedValue == selectTypes.Address.value){
            destinations.push({
                location: locationInputBox.value,
                stopover: true
            });
            calcRouteFromCurrentLocation(destinations);
        }
        else if(selectedValue == selectTypes.GenericLocation.value){
            var type = [];
            type.push(locationInputBox.value);
            var request = {
                location: currentLocation,
                types: type,
                rankBy: google.maps.places.RankBy.DISTANCE 
            };
            placesService.nearbySearch(request, function(results, status){

                //I don't know what to do here...

            });
        }
        else if(selectedValue == selectTypes.Chain.value){
            alert('Searching by Chain not supported yet');
        }
        else if(selectedValue == selectTypes.Item.value){
            alert('Searching by Item not supported yet');
        }

    }
    return destinations;
} 
```

关于我应该如何处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:24:33.237

我推荐[异步流控制库](https://github.com/caolan/async)。如果你学会了它，你复杂的异步代码将变得更加干净和易于管理，并且更少的临时和牛仔编码。

```
async.parallel(destinations, function (destination, callback) {
    //if need an async call, do
    lookupDestination(destination, function (result) {
        //tell async this one is done
        callback(null, result);
    });
    //otherwise if you don't need a async call, just
    return callback(null, lookupSync(destination));
}, function (error, done) {
    //now `done` is a list of resolved destinations
    //go to town
}); 
```

# d3.js - d3 散点图中每个数据集的唯一符号

> ID：15352033
> 
> 赞同：1
> 
> 时间：2013-03-12T02:03:11.613
> 
> 标签：d3.js

我在使用 d3 的符号机制为每组数据指定唯一符号时遇到问题。数据是这样的： [[{x: 1, y:1},{x: 2, y:2},{x: 3, y:3}], [{x: 1, y:1},{ x: 2, y:4},{x: 3, y:9}] 等]

写出符号的代码部分如下所示：我为每个点向量创建一个系列组。然后：

```
series.selectAll("g.points") 
//this selects all <g> elements with class points (there aren't any yet)
.data(Object) //drill down into the nested Data
.enter() 
.append("g") //create groups then move them to the data location
.attr("transform", function(d, i) {
return "translate(" + xScale(d.x) + "," + yScale(d.y) + ")";
        })
.append("path")
.attr("d", function(d,i,j){
        return (d3.svg.symbol().type(d3.svg.symbolTypes[j]));
    }
 ); 
```

或者至少我希望它是这样工作的。问题是我不能从另一个函数返回函数 d3.svg.symbol() 。如果我尝试仅将函数放在“类型”参数中，则数据的范围不再正确，无法知道 j 是什么（系列的索引）。

对，但我不想要每个数据点都有一个唯一的符号，我想要每个*系列*都有一个唯一的符号。数据由多个数组（系列）组成，每个数组可以有任意数量的点 (x,y)。我想为每个数组使用不同的符号，这就是 j 应该给我的。我将数据（在示例中显示了两个数组，因此 i 为 0 然后为 1）与系列选择相关联。然后我将数据对象与点选择相关联，因此 i 成为每个数组中点的索引，而 j 成为原始数组/数据系列的索引。我实际上是从其他地方复制了这个语法，它适用于其他实例（例如，在分组条形图中着色一系列条形），但我无法确切告诉你它为什么起作用......

任何指导将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T01:10:01.257

究竟是什么问题？您提供的代码回答了您的问题。我的错， j 确实返回了对该系列的引用。更简单的例子。

```
 var data = [
        {id: 1, pts: [{x:50, y:10},{x:50, y:30},{x:50, y:20},{x:50, y:30},{x:50, y:40}]},
        {id: 2, pts: [{x:10, y:10},{x:10, y:30},{x:40, y:20},{x:30, y:30},{x:10, y:30}]}
    ];
    var vis = d3.select("svg");
    var series = vis.selectAll("g.series") 
        .data(data, function(d, i) { return d.id; })
        .enter() 
        .append("svg:g")
        .classed("series", true);

    series.selectAll("g.point")
        .data(function(d, i) { return d.pts })
        .enter()
        .append("svg:path")
        .attr("transform", function(d, i) { return "translate(" + d.x + "," + d.y + ")"; })
        .attr("d", function(d,i, j) { return d3.svg.symbol().type(d3.svg.symbolTypes[j])(); }) 
```

唯一的区别是我在 d3.svg.symbol().type(currentType)() 之后添加了括号来返回值而不是函数。D3js 使用链接，jquery 样式。这使您可以使用 symbol().type('circle') 来设置一个值，并使用 symbol().type() 来获取它。每当使用访问器时，返回的是对具有方法和属性的函数的引用。请记住，在 Javascript 中，函数是一流的对象—— [“一流的对象”是什么意思？](https://stackoverflow.com/questions/705173/what-is-meant-by-first-class-object). 在使用这种方法的库中，通常有一个明显的 getter 用于检索有意义的数据。使用符号，您必须使用符号（）（）。

超出符号功能的代码可见：[https ://github.com/mbostock/d3/blob/master/src/svg/symbol.js](https://github.com/mbostock/d3/blob/master/src/svg/symbol.js)

```
d3.svg.symbol = function() {
  var type = d3_svg_symbolType,
      size = d3_svg_symbolSize;

  function symbol(d, i) {
    return (d3_svg_symbols.get(type.call(this, d, i))
        || d3_svg_symbolCircle)
        (size.call(this, d, i));
  }

  ...

  symbol.type = function(x) {
    if (!arguments.length) return type;
    type = d3_functor(x);
    return symbol;
  };

  return symbol;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:59:45.647

以防万一你没有。你有没有尝试过？

```
.append("svg:path")
.attr("d", d3.svg.symbol()) 
```

根据[https://github.com/mbostock/d3/wiki/SVG-Shapes](https://github.com/mbostock/d3/wiki/SVG-Shapes)。

# c++ - 从 Makefile (Qt) 中删除标志 (-fpermissive)

> ID：15352035
> 
> 赞同：1
> 
> 时间：2013-03-12T02:03:28.250
> 
> 标签：c++, qt, makefile, project-files

我到处都用谷歌搜索过，但还没有弄清楚如何`-fpermissive`从我的 Qt 生成的 Makefile 中删除标志。该`-fpermissive`标志默认存在，即使我`QMAKE_CXXFLAGS -= -fpermissive`在我的 Qt 项目文件中尝试删除它。这是我的 Makefile 标志所在的位置：

```
CFLAGS        = -fpermissive -finline-functions -Wno-long-long -g -Wall $(DEFINES)
CXXFLAGS      = -fpermissive -finline-functions -Wno-long-long -g -fexceptions -mthreads -frtti -Wall $(DEFINES) 
```

我怎样才能删除这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:45:39.810

我的 QtCreator 生成的 makefile 在它们的任何地方都没有*-fpermissive*，至少在我可以 Ctrl+F 的范围内。检查项目的构建设置，并确保没有*-fpermissive*作为命令行参数。

![在此处输入图像描述](../Images/23d2da22517fe361d4ff525788648528.png)

这与我的 QMake 生成的 makefile 中的两行相同：

```
CFLAGS        = -pipe -fno-keep-inline-dllexport -O2 -Wall -Wextra $(DEFINES)
CXXFLAGS      = -pipe -fno-keep-inline-dllexport -O2 -std=c++11 -frtti -Wall -Wextra -fexceptions -mthreads $(DEFINES) 
```

我的 makefile 还引用了一个名为“qmake.conf”的文件，对我来说，该文件位于： **C:/Qt/Qt5.0.1/5.0.1/mingw47_32/mkspecs/win32-g++/qmake.conf**

看起来 qmake.conf 用于帮助为不同的编译器和平台生成 makefile，并且可以为你的 makefile 添加参数。

# ruby-on-rails - Mongoid：has_many 与别名的关系

> ID：15352046
> 
> 赞同：2
> 
> 时间：2013-03-12T02:05:04.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

**背景：**我有一个 Team 模型，它 has_many Players，它允许一个人打电话

```
@team.players 
```

并收到一个 Mongoid::Relations::Targets::Enumerable 玩家列表。

目标：我还希望能够检索球队特定位置的球员名单。例如，如果用户将投手添加到他的团队，我将能够调用 `@team.pitchers`以返回可枚举的投手列表。关于如何设置的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:15:49.900

不能将条件放入 mongoid 中的 has_many 中。

我能想到的两种方法是在玩家中设置范围并使用@team.players.pitchers 调用

```
Class Player
  scope :pitchers, where(:position => "pitcher")
end 
```

或在团队中定义一个方法

```
Class Team

  def pitchers
    self.players.where(:position => "pitcher")
  end
end 
```

# html - 我从堆叠概念中遗漏了什么？

> ID：15352053
> 
> 赞同：0
> 
> 时间：2013-03-12T02:05:56.340
> 
> 标签：html

我在试图弄清楚[HTML 堆叠概念](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)时遇到了困难。根据我的阅读，将 div 放在 z-index 2*应该*使它显示在 z-index 1 的 div 上方......但[它没有这样做](http://jsfiddle.net/qctH9/)。

这段代码...

```
 <style>
body > div { height: 100px; width: 100px; }

#blue {
    position: relative;
    top: 50px;
    left: 50px;
    z-index: 1;
    overflow: auto;
}
#red { z-index: 2; }
</style>

<div id="blue">
    <div>blue</div>
    <div>blue</div>
    <div>blue</div>
    <div>blue</div>
    <div>blue</div>
    <div>blue</div>
    <div>blue</div>
    <div>blue</div>
</div>
<div id="red">red</div> 
```

... 导致红色 div*上方*的蓝色 div。将蓝色的 z-index 更改为 -1 最终将其置于红色 div 后面，但随后滚动条停止工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:13:54.973

试试下面的小提琴：http: [//jsfiddle.net/mVZ9d/](http://jsfiddle.net/mVZ9d/)

两件事，你有`script`而不是`style`. 我认为这只是写你的问题时的一个错字。您应该`position:relative`在红色 div 中指定。

`z-index` only works with elements with position `fixed`, `absolute` or `relative`. Relative works just fine as shown in the fiddle.

# hadoop - 在 Hadoop 中建模数据

> ID：15352060
> 
> 赞同：1
> 
> 时间：2013-03-12T02:06:42.210
> 
> 标签：hadoop, data-modeling

目前，我从 EDW（企业数据仓库）中将大约 10 个表带入 Hadoop，这些表与星型模式模型密切相关。我使用 Sqoop 将所有这些表放在一起，从而产生 10 个包含 csv 文件的目录。

在取消 MR 工作之前，我正在研究有哪些更好的方法来存储这些文件。在从事 MR 工作之前，我应该遵循某种模型还是构建聚合？我基本上是在研究如何将相关数据存储在一起。

我通过搜索发现的大多数东西都是存储琐碎的 csv 文件并使用 opencsv 读取它们。我正在寻找更多涉及的东西，而不仅仅是 csv 文件。如果转向另一种格式比 csv 效果更好，那没问题。

归结为：如何最好地将一堆相关数据存储在 HDFS 中以获得良好的 MR 体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T04:22:09.580

我建议花一些时间使用 Apache Avro。

使用 Sqoop v1.3 及更高版本，您可以使用自己设计的模式将关系数据源中的数据作为 Avro 文件导入。Avro 的优点在于它除了作为序列化格式之外还提供了许多功能......

它在同一个文件中为您提供数据+模式，但紧凑且高效，可快速序列化。它为您提供了版本控制功能，在引入具有不同模式的更新数据时非常有用。Hive 在读写上都支持它，Map Reduce 可以无缝地使用它。

它可以用作应用程序之间的通用交换格式（不仅适用于 Hadoop），使其成为在更广泛架构中用于数据交换的标准、跨平台格式的有趣选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:30:36.750

将这些文件存储在 csv 中很好。因为您将能够使用文本输出格式处理这些文件，并且还可以使用特定分隔符通过配置单元读取它。如果您不喜欢逗号到管道（“|”），您可以更改分隔符，这是我大部分时间所做的。此外，您通常需要在 hadoop 中有大文件，但如果文件足够大，您可以对这些文件进行分区，并且每个文件分区的大小只有 100 gig，那么最好根据您的分区将这些文件分区到单独的目录中柱子。

此外，将大多数列放在单个表中比拥有许多规范化的小表更好。但这取决于您的数据大小。还要确保无论何时复制、移动或创建数据，都对应用程序进行所有约束检查，因为以后很难在表中进行小的更改，即使是很小的更改，您也需要修改完整的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T02:18:48.320

Hive Partitioning 和 Bucketing 概念可用于有效地将基于特定列的类似数据放在一起（不是在节点中，而是在文件和文件夹中）。这里有一些很好的[Partitioning](http://blog.safaribooksonline.com/2012/12/03/tip-partitioning-data-in-hive/)和[Bucketing](http://archive.cloudera.com/cdh/3/hive/language_manual/working_with_bucketed_tables.html)教程。

# java - 从头到尾删除元素

> ID：15352062
> 
> 赞同：1
> 
> 时间：2013-03-12T02:07:07.950
> 
> 标签：java, performance, list

在[List 接口](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html)的 Collection 框架教程中，有一句关于从 List 实现中删除元素的性能的有趣引用：

> 对于许多常见的 List 实现，例如 ArrayList，从列表末尾移除元素的性能*明显*优于从开头移除元素的性能。

教程没有进一步解释这一点，我试图确切地理解为什么会这样。

考虑`ArrayList<Integer> list`如下：

![列表](../Images/1bf6508e43811d9d3627ed8632a51783.png)

在第一种情况下，如果我们从 . 的末尾删除最后 4 个元素`list`，则这些值将设置为`null`（或等效）。我的理论是，当需要复制操作时，只会复制不需要的元素`null`。

在第二种情况下，如果我们删除前 4 个元素，它们将被`null`一次又一次地设置为，只有非`null`元素会被复制。

所以从这个角度来看，表现似乎差不多。如果从最后执行，是否还有其他原因可以使操作更快？

另一方面，对于`LinkedList`，倒数似乎为真；从头移除更快，而从尾移除需要几乎完全遍历，除非 a`tail-pointer` 被保留。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T02:10:50.737

据我了解，ArrayList 是列表的数组实现。因此，如果您从数组的开头删除元素，则需要移动所有剩余元素以填充您删除的元素。所以这本质上是一个 O(n-1) 操作。但是，当您从列表末尾删除元素时，情况并非如此。这将是 O(1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T02:11:24.730

从列表的开头删除元素不仅仅是将元素设置为`null`. 您还需要移动剩余的元素以填充空出的位置。

可以使用变量来跟踪列表的“开始”而不移动元素，但是由于数组中未使用的元素，您将牺牲内存效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:13:44.603

从`ArrayList<>`开始删除很慢，因为自从添加函数后，整个数组将不得不移动`add`元素，如果我们将开始留空，那么我们将浪费内存。

如果我们考虑到大`(O)`符号从 start 删除本质上是线性时间`O(n)`，而从 end 删除是恒定时间`O(1)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-01T10:48:01.130

虽然 Code-Apprentice 的回答是正确的，但我想详细说明如何通过进行基于索引的查找来验证每个条目向左移动的行为，即调用`list.get(index)`.

1.  添加两个条目
2.  删除第一个元素
3.  检查第一个元素的值：它现在是 null 还是之前的第二个元素？

要验证的代码：

```
List<String> list = new ArrayList<>();
list.add("0");
list.add("1");
list.remove(0);
String entry0 = list.get(0);
System.out.println(entry0); 
```

您怀疑`null`会打印，但打印了“1”。这证实了所有元素都向左移动。

注意。我使用字符串来避免由`remove(int index)`and引起的混淆`remove(Object o)`。

# entity-framework - 如何使用 Entity Framework 中的 SQL 多对多表？

> ID：15352063
> 
> 赞同：1
> 
> 时间：2013-03-12T02:07:20.173
> 
> 标签：entity-framework, linq-to-sql, many-to-many

我正在开发一个现有应用程序，该应用程序使用两个应用程序使用的 SQL 数据库。一种是使用实体框架连接到数据库。另一个使用 LINQ-to-SQL。SQL 数据库被设计成有一些表显示两个表中的行之间的多对多关系。Entity Framework 似乎没有导入这些表，显然是因为它有一些面向对象的想法来表示应该表示多少关系。到目前为止，Entity Framework 应用程序不需要知道这些表，但现在它应该知道。我不知道它是如何工作的，而且我担心即使我了解了 Entity Framework 令人兴奋的表示这些关系的新方法，它也不会与其他应用程序或旨在使用许多对多表。

即，有一个 Foos 表和一个 Bars 表，然后是一个带有 Foo 和 Bar Ids 的表，其中列出了哪些 Foos 与哪些 Bars 相关，我不想停止使用这个关系表，特别是因为有另一个大量使用此关系表的 LINQ 应用程序。

问题：

如果我学会使用 Entity Framework 的多对多系统，它会使用和更新其他应用程序使用的多对多表吗？

如果没有，什么是让实体框架不忽略多对多关系表的好方法，所以我可以编写代码来使用现有表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T04:24:00.917

是的，Entity Framework 将为您管理多对多表。EF 中的纯链接表（只有两个外键列）表示为关系，而不是 POCO 对象。这样做的方法是告诉 EF 你的两个对象之间存在关系，并且表 X 是存储该关系的位置。作为 EF 4.1 中的示例。这就是我目前正在使用的，它是这样完成的：

```
modelBuilder.Entity<Foo>() //Let me tell you about Foo...
            .HasMany(f => f.Bars)  //The property in the Foo class that links to Bar objects is Bars
            .WithMany(b => b.Foos)  //The property in the Bar class that links to Foo objects is Foos
            .Map(m => {
                m.MapLeftKey("FooID"); //Name of the foreign key column in the link table for Foo
                m.MapRightKey("BarID"); //Name of the foreign key column in the link table for Bar
                m.ToTable("FooBar"); //Name of the link table
            }); 
```

然后，您可以通过链接/取消链接代码中的对象来更改此表。你几乎做了类似的事情

```
myFoo.Bars.Add(myBar); //Add a row to the link table
myFoo.Bars.Remove(myBar) //Delete a row from the link table 
```

对于完整的实施，您应该搜索您的 EF 版本。

如果链接表包含额外的列（例如创建日期），它们就像所有其他表一样由 POCO 表示。如果您真的对 EF 管理链接表的能力感到偏执，您可以通过在纯链接表中添加唯一的 id 列来强制它走这条路，但我绝对不建议这样做。

可以这样想：EF 已经存在了一段时间，并且已经达到了一定的成熟度。将此与多对多关系在数据库中并不罕见的事实相结合。你真的认为 EF 的设计者没有处理过你的案子吗？

# ruby-on-rails-3 - 将 NestedSortable 与 Ancestry gem 和 Mongoid 一起使用

> ID：15352065
> 
> 赞同：1
> 
> 时间：2013-03-12T02:07:24.707
> 
> 标签：ruby-on-rails-3, mongoid, nested-sortable, ancestry

试图将嵌套的可排序合并到我的 Rails 应用程序中。我正在使用 Mongoid 和 Ancestry gem，并且我正在尝试创建一个页面，该页面`parent_id`使用 Nested-Sortable 在拖放时更新类别。

一直在尝试进行实验，但并不真正了解 NestedSortable 吐出什么来创建一个可以读取它的控制器。

我的控制器有：

```
def sort
  Category.update_all({parent_id: params[:parent_id].to_i})
  render nothing: true
end 
```

路线：

```
resources :symbols, :as => :categories, :controller => :categories do
  collection {post :sort}
end 
```

重新排序.js.coffee：

```
jQuery ->
  $('.reorder-tree').nestedSortable
    handle: '.handle'
    items: 'li'
    toleranceElement: '> div'
    update: ->
      $.post($(this).data('update-url'), $(this).nestedSortable('serialize')) 
```

我的重新排序视图吐出如下*内容*：

```
<ol class=reorder-tree>
<li id="category_513d372b10188f9b6b000014"><div>
  <i class="icon-move handle"></i>
  <a href="/symbols/chickne">Chickne</a>
  <span class="btn-group show-on-hover">
    <a href="/symbols/new?parent_id=chickne" class="btn btn-micro" data-remote="true" title="Add Sub-Category"><i class="icon-plus"></i>
    </a>
    <a href="/symbols/chickne/edit" class="btn btn-micro"><i class="icon-pencil"></i>
    </a>
    <a href="/symbols/chickne" class="btn btn-micro" data-method="delete" data-remote="true" rel="nofollow" title="Delete Category"><i class="icon-remove"></i>
    </a>
  </span>
</div>
<ol class="visible"><li id="category_513d373310188f9b6b000016"><div>
  <i class="icon-move handle"></i>
  <a href="/symbols/smoking-babies">Smoking Babies</a>
  <span class="btn-group show-on-hover">
    <a href="/symbols/new?parent_id=smoking-babies" class="btn btn-micro" data-remote="true" title="Add Sub-Category"><i class="icon-plus"></i>
    </a>
    <a href="/symbols/smoking-babies/edit" class="btn btn-micro"><i class="icon-pencil"></i>
    </a>
    <a href="/symbols/smoking-babies" class="btn btn-micro" data-method="delete" data-remote="true" rel="nofollow" title="Delete Category"><i class="icon-remove"></i>
    </a>
  </span>
</div>
<ol class="hide"></ol>
</li>
</ol></li>
</ol> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:00:14.273

在认真玩弄了我从 Nested Sortable 获得的数组之后，我能够通过在我的控制器中使用它来完成这项工作：

```
 def sort
    # html = "Env: #{Rails.env}. "
    # infor = params[:category]
    params[:category].each do |id, attr|
      thisCat = params[:category][id]
      @category = Category.where(:_id => id).first
      # html << "ID= #{id} , thisCat= #{thisCat} Name= #{@category.name} Parent= #{@category.parent_id} ; "
      unless thisCat == "null"

        @category.parent_id = thisCat.to_s
        @category.save
      end
    end
    # flash[:alert] = html
    # flash[:error] = infor
    # render nothing: true
  end 
```

你可以看到我让它工作后评论的内容；这就是我所有的调试闪存语句。

干杯!

# file - Powershell：复制子文件夹中的选定文件

> ID：15352068
> 
> 赞同：2
> 
> 时间：2013-03-12T02:07:30.960
> 
> 标签：file, powershell, directory, subdirectory

我有一个文件夹`c:\graphics`（根）和一个创建子文件夹的程序，例如`aa`, `bm`, `czx`, `mjpq`, `zz`（我有很多子文件夹，长度是可变的）。

在每个子文件夹中，我有 26 个文件和一个文件夹。例如，`aa`文件夹有：`aa_000.jpg`, `aa_001.jpg`, ..., `aa_023.jpg`; 其他两个文件`aa_360.jpg`和`aa.html`一个文件夹。完整路径是`C:\graphics\aa\aa_360`。

我需要在子文件夹中移动 24 个文件（`aa_000.jpg`, `aa_001.jpg`, ..., `aa_023.jpg`）`c:\graphics\aa\aa_360`并且也等于每个子文件夹。

另一个例子是`c:\graphics\mjpq\mjpq_360`，应该有`mjpq_000.jpg`，...，`mjpq_023.jpg`。

我启动了脚本，考虑将所有`.jpg`（25 个文件）移动到子文件夹中（后来，我不得不想提取`xxx_360.jpg`），但它不起作用：

```
Get-ChildItem c:\graphics -rec | where-object {$_.extension -match "jpg"} | ForEach-object {$newPath =(Get-Location).toString()+(Get-Location).ToString().SubString(10)+"_360"); Move-Item $_.FullName $newPath} 
```

但`Get-Location`找不到文件路径。

* * *

注意：我找到了一个可行的解决方案，但它在控制台中引发了一些错误：

```
Get-ChildItem c:\graphics -rec | where-object {$_.extension -match "jpg" -and (!($_.name -like "*360*"))} | ForEach-Object {$newPath =($_.DirectoryName).toString()+($_.DirectoryName).ToString().SubString(10)+"_360"; Move-Item $_.FullName $newPath} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T02:22:03.500

我认为您可以将其简化为：

```
Get-ChildItem c:\graphics -rec *.jpg | Move-Item -Dest {$_.Directory.FullName + "\" +
    $_.Directory.Name + "_360\" } -WhatIf 
```

`-whatif`如果建议的移动操作看起来正确，请删除。

# opencv - 对象跟踪openCV，问题，建议？

> ID：15352074
> 
> 赞同：1
> 
> 时间：2013-03-12T02:08:03.370
> 
> 标签：opencv, colors, tracking, face-detection

简介：增强现实项目

目标：在某人的头上加载 3D 发型模板。

所以我使用OpenCV来跟踪人的脸，然后我必须跟踪用户的帽子（我们假设用户有帽子，我们可以决定一个地标或者我们需要在帽子上检测它的所有东西） . 一旦检测到地标，我必须获取地标的坐标，然后将其发送到 3D 引擎以启动/更新 3D 对象。

因此，为了准确检测帽子的地标，我首先测试了几种方法：

*   cvFindChessBoardCorner ...在平面上非常有效，但不是上限（[http://dsynflo.blogspot.com/2010/06/simplar-augmented-reality-for-opencv.html](http://dsynflo.blogspot.com/2010/06/simplar-augmented-reality-for-opencv.html)）

*   颜色检测（[http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/](http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/)）......不是很有效。如果亮度改变，颜色就会改变......

我今天来找你，想和你一起考虑。帽子上需要特殊的地标吗？（如果是，是哪一个？如果不是，我该怎么办？）混合颜色检测​​和形式检测是个好主意吗？

....我走对了吗？^^ 我很欣赏关于使用帽子来瞄准用户头部的任何建议，以及我必须在 OpenCV 库中使用的不同功能。

如果我的英语不完美，对不起。

十分感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:54:27.153

我想到的一种快速方法是将两种方法结合起来。

**使用直方图和均值偏移进行颜色跟踪**

这是使用直方图的另一种颜色检测方法： [Robust Hand Detection via Computer Vision](https://stackoverflow.com/questions/8593091/robust-hand-detection-via-computer-vision/8598434#8598434)

这个想法是这样的：对于已知颜色的上限，比如亮绿色/蓝色（就像您在图像抠图屏幕上看到的那种颜色），您可以仅使用色调和饱和度颜色通道预先计算直方图。我们故意排除亮度通道，使其对光照变化更加稳健。现在，使用直方图，您可以创建一个反投影图，即一个蒙版，在图像中的每个像素处都有一个概率值，表明那里的颜色是帽子颜色的概率。

现在，在获得概率图之后，您可以在此概率图（不是图像）上运行[meanshift](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=meanshift#int%20meanShift%28InputArray%20probImage,%20Rect&%20window,%20TermCriteria%20criteria%29)或[camshift算法（在 OpenCV 中可用），将初始窗口放置在您使用 OpenCV 算法检测到的面部上方的某个位置。](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html?highlight=meanshift#camshift)这个窗口最终会以概率分布的模式结束，即上限。

详细信息在我上面给出的鲁棒手部检测的链接中。有关更多详细信息，您应该考虑获取官方 OpenCV 书籍或从当地图书馆借阅。关于使用 meanshift 和 camshift 跟踪对象有一个非常好的章节。或者，只需使用沿 meashift/camshift 的任何查询搜索 Web 以进行对象跟踪。

**检测正方形/圆形以获取头部方向**

此外，如果您希望进一步确认这个最终位置，您可以在帽的正面添加 4 个小方块/圆圈，并使用 OpenCV 的内置算法仅在此感兴趣区域 (ROI) 中检测它们。这有点像检测那些二维码中的方块。此步骤进一步为您提供有关帽子方向以及头部方向的信息，这在您渲染头发时可能很有用。例如，在定位 2 个相邻的正方形/圆形后，您可以计算它们与水平/垂直线之间的角度。

您可以使用 OpenCV 中的标准角检测器等检测正方形/角。对于圆圈，您可以尝试使用 HoughCircle 算法：[http ://docs.opencv.org/modules/imgproc/doc/feature_detection.html#houghcircles](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html#houghcircles)

**加快速度**

**广泛使用感兴趣区域 (ROI)**

为了加快速度，您应该尽可能多地在图像的小区域（ROI）（也是概率图）上运行您的算法。您可以从 OpenCV 图像中提取 ROI，这些图像本身就是图像，并在它们上运行 OpenCV 的算法，就像在整个图像上运行它们一样。例如，您可以计算检测到的面部周围 ROI 的概率图。同样，meanshift/camshift 算法应该只在这个较小的地图上运行。同样对于检测正方形或圆形的附加步骤。详细信息可以在 OpenCV 书籍以及在线快速搜索中找到。

**使用 TBB 和 CUDA 编译 OpenCV**

许多 OpenCV 的算法可以实现**显着**的速度提升，而程序员无需做任何额外的工作，只需在 TBB（线程构建块）和 CUDA 支持开启的情况下编译 OpenCV 库即可。特别是，OpenCV (Viola Jones) 中的人脸检测算法运行速度会快几倍。

只有在安装了 TBB 和 CUDA 的软件包后，才能打开这些选项。

待定：http : [//threadingbuildingblocks.org/download](http://threadingbuildingblocks.org/download)

CUDA：[https ://developer.nvidia.com/cuda-downloads](https://developer.nvidia.com/cuda-downloads)

然后从源代码编译 OpenCV：http: [//docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html#windows-installation](http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html#windows-installation)

最后，我不确定您是否使用的是 OpenCV 的“C 版本”。除非绝对必要（出于兼容性问题等），否则我建议使用 OpenCV 的 C++ 接口，因为它更方便（至少从我个人的经验来看）。现在让我先声明一下，我不打算在此声明中就 C 与 C++ 的优点展开一场激烈的战争。

希望这可以帮助。

# command-line - 从命令行向 GeoTiff 添加色阶

> ID：15352077
> 
> 赞同：1
> 
> 时间：2013-03-12T02:08:20.090
> 
> 标签：command-line, colors, raster, qgis, geotiff

我有数百个栅格 GeoTIFF 和一个色标，我需要将色标分配给每个栅格。在 QGIS 中将比例逐一添加到每个栅格是不可行的，因为此过程需要多次完成。

有没有办法从命令行执行此操作，以便我可以编写该过程的脚本？我被告知要考虑编写自定义 VRT（只是 XML），但这样做的文档很少，而且似乎面向 GIS 专家。我一直无法找到用于此任务的 GDAL 实用程序。

# ssl - Heroku：同时使用 herokuapp.com 和自定义域 SSL

> ID：15352078
> 
> 赞同：1
> 
> 时间：2013-03-12T02:08:21.213
> 
> 标签：ssl, heroku, dns

我现在使用 Piggyback SSL 以 herokuapp.com 域名管理 Web 服务站点。我计划使用自定义 SSL 从 herokuapp 域迁移到自定义域。

这里有一个问题，即使在我们设置自定义域 SSL 并将 SSL 端点作为 herokussl.com 域之后，是否可以使用 herokuapp.com 域名？有人有使用这两个域的经验吗？

谢谢，

正弘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:04:34.713

它应该可以正常工作。

因为您只是将自定义 DNS 条目指向 SSL 端点，例如 tokyo-2121.herokussl.com，所以如果您没有在代码中进行任何类型的域检查和重定向，那么原始的 herokuapp.com 和 ssl 仍然可以访问.

# mysql - 添加更多索引或添加更多表更好吗？

> ID：15352086
> 
> 赞同：2
> 
> 时间：2013-03-12T02:09:22.457
> 
> 标签：mysql, sql, database-design

这个在我脑海里已经有一段时间了。我有一个读取量很大的数据库，一个特定的表*几乎*每一列都有一个索引。这些索引并不浪费，我已尽力调整我的查询以使用现有索引，这样就不需要新的索引了。

但是，在我对查询和索引进行了最佳优化之后，我的桌子上似乎还有很多。

我想出的减少索引的唯一真正解决方案是将一些信息（其中很多是重复的或相似的）存储在具有自己索引的不同表中。

我会有*几个索引**很少*的表，而不是*一个*有多个*索引*的表。

问题是，我学到的两个 mysql 实践是相互冲突的：

*   您永远不应该在多个表中存储重复的信息。只存储一次的数据是干净和高效的。
*   您不应该在表的每一列上都有索引。这实际上会减慢查询速度，因为 mysql 引擎必须检查每个索引以查看是否可以使用。

以上两点不是“官方的”，我只是引用我过去学到的东西。

那么哪个“最佳实践”是“更好”的实践呢？哪个更重要？

* * *

编辑：希望一个例子能帮助说明我的意思。

假设我有两个用户 Bob (user_id 10) 和 jack (user_id 5)。用户想知道他们从支付表中“赚”了多少。

对于鲍勃：`SELECT SUM(amount) FROM payments WHERE user_id=10`

由于这个查询对每个用户都运行了很多，所以在`user_id`列上创建了一个索引，这使得这个查询闪电般快速。

用户还可以获得 5% 的推荐收入。Jack 是 Bob 的推荐人，因此他获得了 5% 的付款。

Bob的推荐收入：`SELECT (SUM(amount)*.05) FROM payments WHERE referral_id=10`

注意：由于多个用户可以是 Bob 的推荐人，我不能使用该`user_id`列。

所以，我有两个选择：我可以添加另一个索引，`referral_id`或者我可以创建另一个表“referral_payments”，该表将存储具有类似信息的另一行。该表将有一个索引`referral_id.`

将这个时间复制 10 次，您就会遇到这样的情况，即我需要开始创建新表，或者即使已经有很多索引，也需要继续创建新索引。

# go - 你如何在 go 中获得指向类型函数的函数指针？

> ID：15352089
> 
> 赞同：7
> 
> 时间：2013-03-12T02:09:30.367
> 
> 标签：go, function-pointers, member-function-pointers

以下代码获取指向函数的指针`hello`并打印它：

```
package main

import "fmt"

type x struct {}
func (self *x) hello2(a int) {}

func hello(a int) {}

func main() {
    f1 := hello
    fmt.Printf("%+v\n", f1)

    // f2 := hello2
    // fmt.Printf("%+v\n", f2)
} 
```

但是，如果我取消注释底部的部分，编译错误，说：

```
> ./junk.go:14: undefined: hello2 
```

所以我尝试了：

```
 i := &x{}
  f2 := &i.hello2
  fmt.Printf("%+v\n", f2) 
```

...但错误与：

```
> ./junk.go:15: method i.hello2 is not an expression, must be called 
```

好的，所以也许我必须直接引用原始类型：

```
 f2 := x.hello2
  fmt.Printf("%+v\n", f2) 
```

没有：

```
> ./junk.go:14: invalid method expression x.hello2 (needs pointer receiver: (*x).hello2)
> ./junk.go:14: x.hello2 undefined (type x has no method hello2) 
```

这类作品：

```
 i := &x{}
  f2 := reflect.TypeOf(i).Method(0)
  fmt.Printf("%+v\n", f2) 
```

然而，结果`f2`是一个`reflect.Method`，而不是一个函数指针。:(

这里的适当语法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T02:15:53.430

您可以使用方法表达式，它将返回一个将接收者作为第一个参数的函数。

```
f2 := (*x).hello2
fmt.Printf("%+v\n", f2)

f2(&x{}, 123) 
```

否则，您可以将函数调用包装在接受`x`作为参数的函数中。

```
f2 := func(val *x) {
    val.hello2(123)
} 
```

或者关闭现有`x`值。

```
val := &x{}

f2 := func() {
    val.hello2(123)
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T12:31:50.207

有关 Go 函数调用和闭包的相关阅读：Russ Cox 的“Go 1.1 Function Calls”（也详细介绍了 Go1）。

[https://docs.google.com/document/d/1bMwCey-gmqZVTpRax-ESeVuZGmjwbocYs1iHplK-cjo/pub](https://docs.google.com/document/d/1bMwCey-gmqZVTpRax-ESeVuZGmjwbocYs1iHplK-cjo/pub)

# css - Css 将类调用为其他样式

> ID：15352091
> 
> 赞同：0
> 
> 时间：2013-03-12T02:09:48.723
> 
> 标签：css

我不明白为什么这不起作用

```
.mix{
  -moz-border-radius: 5px 5px;
  border-radius: 5px 5px / 5px 5px;
  -moz-box-shadow: 2px 2px 2px #888;
  -webkit-box-shadow: 2px 2px 2px #888;
  box-shadow: 2px 2px 2px #888;
} 
#adm_content_login, .mix{
  top:100px;
  position:relative;
  width:450px;
  height:200px;
  margin:auto;
  background-color:#ccc;
  text-align:center;
  border:5px solid #111;
} 
```

当我尝试`adm_content_login, .mix`使用`.mix`. 我不明白这段代码有什么问题。如果我将 CSS 放入 中，CSS 就可以工作`adm_content_login`，但如果我尝试使用这种方法，它就不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:19:28.813

你正在**使用** `class`，但你**定义** `id`

习惯了**这样****_**

```
<div id="adm_content_login" class="mix"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:17:55.287

嗨，如果您尝试将 .mix 类与 #adm_content_login 一起使用，您可以将它们都设为类或 id。例如，如果他们都是班级，你可以这样

```
<div class="adm_content_login mix"></div> 
```

请注意，两个类之间有一个空格。

如果这不是您想要实现的目标，那么您可以使用 LESS(CSS FRAMEWORK) 实现类似的目标

# git - Git 子树合并删除正在合并到的分支中的更改

> ID：15352094
> 
> 赞同：3
> 
> 时间：2013-03-12T02:10:21.187
> 
> 标签：git, version-control, merge, repository, subtree

我使用 Git 书中描述的结构设置了两个存储库：http: [//git-scm.com/book/ch6-7.html](http://git-scm.com/book/ch6-7.html)。基本上，我想在一个 repo 的副本和它的 master 分支之间保持关系。我知道你可以用子模块做到这一点，但更新它们的过程似乎有点麻烦，我被告知（并阅读）子树更容易使用。无论如何，我将“RepoA”设置为其中包含“RepoB”的子树。我按照 T 恤链接中提供的步骤进行操作。

我对“RepoA”中的子树进行了重大修改。同时，我团队的其他人正在对“RepoB”上的master进行修改。当一切都说完了，我希望我可以从“RepoB”源/主节点中提取更改并将它们合并到 RepoA 中的子树中。但是，当我这样做时（使用带有 --squash 和 --no-commit 的 -s 子树合并选项），我对 RepoA 中的子树所做的所有更改都将被删除。甚至我添加到子树的新文件也会被删除！为什么是这样？我误解了子树的使用吗？我是否不正确地合并它？任何帮助将不胜感激！

此外，如果无法将这些与子树合并正确合并，那么我唯一的选择是手动、手动合并它们并创建新的项目结构吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:21:00.733

假设您已经将 RepoB 设置为遥控器，请尝试以下操作：

`git merge -s ours --no-commit RepoB/master`

更多信息在这里：[https ://help.github.com/articles/working-with-subtree-merge](https://help.github.com/articles/working-with-subtree-merge)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T16:58:12.490

如果存在 RepoB 子树，则将 RepoB 子树合并到 RepoA 的“git read-tree”步骤不起作用。跳过读取树会导致所有文件都被本地删除。（重来）

RepoB 子树必须从 git 本地删除。之后，git-read-tree 将起作用，并且合并对于文件和历史记录都是正确的。

从具有来自先前合并的 RepoB_subtree 的 RepoA 克隆开始。

```
git remote add -f RepoB <RepoB-url>
git merge -s ours  --no-commit RepoB/master
git rm -r RepoB_subtree
git read-tree --prefix=RepoB_subtree/ -u RepoB/master
git commit -m "Subtree merge of RepoB/master." 
```

RepoA 历史首先显示整个 RepoB 提交块。以前的子树合并提交显示在 RepoA 中，没有任何 RepoB 历史记录。

RepoA 中 RepoB 历史的组织并不像我预期的那样在时间上是线性的，但回想起来，RepoA 中 RepoB 子树的历史是完整且易于阅读的。

# c# - 从网站逐行正确解析字符串

> ID：15352097
> 
> 赞同：0
> 
> 时间：2013-03-12T02:10:48.180
> 
> 标签：c#, listview, split

我有这个回显到一个空白页：

```
echo "Testing|Testing1|Testing2|Testing3|Testing4<br/>";
echo "Something|Something1|Something2|Something3|Something4"; 
```

现在我有一个列表视图。在此示例中，它将创建 2 行 5 列。所以我的问题是，如何逐行阅读以正确创建网站上显示的行数？

到目前为止，这是我的代码：

```
WebClient client = new WebClient();
string downloadString = client.DownloadString("https://example.com/Testing.php");

string[] downloadString2 = downloadString.Split(
    new char[] 
    { 
        (char)'|' 
    }, System.StringSplitOptions.RemoveEmptyEntries);

ListViewItem item = new ListViewItem(
    new[] 
    { 
        downloadString2[0].ToString(), 
        downloadString2[1].ToString(), 
        downloadString2[2].ToString(), 
        downloadString2[3].ToString(), 
        downloadString2[4].ToString() 
    });
listView1.Items.Add(item); 
```

（列已在列表视图中创建）

- 编辑：这对我来说很好：

```
 WebClient client = new WebClient();
        string downloadString = client.DownloadString("https://example.com/Testing.php");

        string[] stringSeparators = new string[] { "<br/>" };
        string[] Lines = downloadString.Split(stringSeparators, StringSplitOptions.None);

        string[] things = new string[5]; // Fixed size. I might find a way later to make it dynamically
        int i = 0;

        foreach (string line in Lines)
        {
            string[] words = line.Split('|');
            i = 0;
            foreach (string word in words)
            {
                things[i] = word;
                i++;

            }

            ListViewItem item = new ListViewItem(
                new[] 
                { 
                    things[0], 
                    things[1], 
                    things[2], 
                    things[3], 
                    things[4] 
                });
            listView1.Items.Add(item);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:25:53.723

不完全是你想要的，但你可以试试这个

```
 WebClient client = new WebClient();
   string downloadString = client.DownloadString("https://example.com/Testing.php");

   string[] stringSeparators = new string[] {"<br/>"};
   string[] Lines = downloadString.Split(stringSeparators, StringSplitOptions.None);
   foreach (string line in Lines)
   {
        string[] words = line.Split('|');
        foreach (string word in words)
        {

                 ListViewItem item = new ListViewItem();
                 item.add(word);

        }
       listView1.Items.Add(item);
    } 
```

# perl - 使用 Perl 从 UNC 路径解析服务器名称

> ID：15352101
> 
> 赞同：0
> 
> 时间：2013-03-12T02:10:54.173
> 
> 标签：perl, samba

我正在寻找一种在 Perl 中从 UNC 路径获取服务器名称的方法，当它采用以下任一格式时：

`$unc = '//server.domain.com/share';`

`$unc = '\\\\server.domain.com\\share';`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:52:11.997

```
for my $unc ('//server.domain.com/share', '\\\\server.domain.com\\share') {
    my ($server) = $unc =~ m{([^/\\]+)};
    print $server, "\n";
} 
```

**输出**

```
server.domain.com
server.domain.com 
```

# android - Android：内容：//sms/“类型”值的文档？

> ID：15352103
> 
> 赞同：15
> 
> 时间：2013-03-12T02:11:02.937
> 
> 标签：android, types, sms, android-contentprovider

我知道Android 不正式支持**content://sms/提供程序。**尽管如此，我想知道对于出现在“类型”列中的值是否有一些常用的约定，可以从**content://sms/**查询返回。

例如，我知道类型“1”和“2”通常分别代表“传入”和“传出”。还有其他常用的类型值吗？例如，我有时会看到类型“20”。

提前感谢您提供有关此信息或讨论的任何指针。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-18T13:40:23.883

如果您正在处理 SMS，您将需要挖掘源代码，因为几乎没有可用的文档。

我想这就是你要找的：

```
public static final int MESSAGE_TYPE_ALL    = 0;
public static final int MESSAGE_TYPE_INBOX  = 1;
public static final int MESSAGE_TYPE_SENT   = 2;
public static final int MESSAGE_TYPE_DRAFT  = 3;
public static final int MESSAGE_TYPE_OUTBOX = 4;
public static final int MESSAGE_TYPE_FAILED = 5; // for failed outgoing messages
public static final int MESSAGE_TYPE_QUEUED = 6; // for messages to send later 
```

来自[android.provider.Telephony](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/android/provider/Telephony.java#Telephony.TextBasedSmsColumns.0MESSAGE_TYPE_ALL)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-27T06:26:44.330

不确定20型。

但我知道的是..

```
Inbox = "content://sms/inbox"
Failed = "content://sms/failed"
Queued = "content://sms/queued"
Sent = "content://sms/sent"
Draft = "content://sms/draft"
Outbox = "content://sms/outbox"
Undelivered = "content://sms/undelivered"
All = "content://sms/all"
Conversations = "content://sms/conversations". 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-08T13:50:13.150

搜索 SmsProvider.java

```
private static final int SMS_ALL = 0;
private static final int SMS_ALL_ID = 1;
private static final int SMS_INBOX = 2;
private static final int SMS_INBOX_ID = 3;
private static final int SMS_SENT = 4;
private static final int SMS_SENT_ID = 5;
private static final int SMS_DRAFT = 6;
private static final int SMS_DRAFT_ID = 7;
private static final int SMS_OUTBOX = 8;
private static final int SMS_OUTBOX_ID = 9;
private static final int SMS_CONVERSATIONS = 10;
private static final int SMS_CONVERSATIONS_ID = 11;
private static final int SMS_RAW_MESSAGE = 15;
private static final int SMS_ATTACHMENT = 16;
private static final int SMS_ATTACHMENT_ID = 17;
private static final int SMS_NEW_THREAD_ID = 18;
private static final int SMS_QUERY_THREAD_ID = 19;
private static final int SMS_STATUS_ID = 20;
private static final int SMS_STATUS_PENDING = 21;
private static final int SMS_ALL_ICC = 22;
private static final int SMS_ICC = 23;
private static final int SMS_FAILED = 24;
private static final int SMS_FAILED_ID = 25;
private static final int SMS_QUEUED = 26;
private static final int SMS_UNDELIVERED = 27; 
```

# python - 使用python下载时，我应该使用多线程还是多处理？

> ID：15352108
> 
> 赞同：5
> 
> 时间：2013-03-12T02:11:56.960
> 
> 标签：python, multithreading, networking, download, multiprocessing

最近我正在开发一个可以从在线漫画网站下载漫画的程序。它工作但有点慢。所以我决定使用多线程/处理来加快下载速度。这是我的问题：

1.  哪个更好？（这是一个python3程序）

2.  多处理，我想，肯定会工作。如果我使用多处理，合适的进程数量是多少？它与我的 CPU 中的内核数量有关吗？

3.  多线程可能会工作。这个下载工作显然需要很多时间来等待图片被下载，所以我认为当一个线程开始等待时，python会让另一个线程工作。我正确吗？
    我读过 David M.Beazley 的《<a href="http://www.dabeaz.com/python/NewGIL.pdf" rel="nofollow">Inside the New GIL》。使用多线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:08:59.470

您可能会受到服务器的上传管道（如果您的连接速度较快）或下载管道（如果您的连接速度较慢）的约束。

与 TCP 连接相关的启动延迟很长。为了避免这种情况，HTTP 服务器可以回收连接以请求多个资源。因此，您的客户有两种方法可以避免这种延迟影响：

(a) 通过单个 TCP 连接下载多个资源，因此您的程序在下载第一个文件时只遭受一次延迟

(b) 每个 TCP 连接下载一个资源，并使用多个连接，以便希望在每个时间点，至少有一个将全速下载

使用选项 (a)，您想了解如何使用您正在使用的任何 HTTP 库来回收请求。任何好的人都会有一种方法来回收连接。 [http://python-requests.org/](http://python-requests.org/)是一个很好的 Python HTTP 库。

对于选项 (b)，您可能确实需要多线程/多进程路由。我建议只同时使用 2-3 个线程，因为再多的线程可能只会导致连接之间共享带宽，并增加因多次下载而被禁止的风险。

GIL 对于这个用例并不重要，因为您的代码几乎不会进行任何处理，大部分时间都在等待字节通过网络到达。

The lazy way to do this is to avoid Python entirely because most UNIX-like environments have good building blocks for this. (If you're on Windows, your best choices for this approach would be msys, cygwin, or a VirtualBox running some flavor of Linux, I personally like Linux Mint.) If you have a list of URL's you want to download, one per line, in a text file, try this:

```
cat myfile.txt | xargs -n 1 --max-procs 3 --verbose wget 
```

The "xargs" command with these parameters will take a whitespace-delimited URL's on stdin (in this case coming from myfile.txt) and run "wget" on each of them. It will allow up to 3 "wget" subprocesses to run at a time, when one of them completes (or errors out), it will read another line and launch another subprocess, until all the input URL's are exhausted. If you need cookies or other complicated stuff, curl might be a better choice than wget.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:27:21.303

这并不重要。确实，等待 IO 的线程不会妨碍其他线程的运行，而且由于通过 Internet 下载是一项受 IO 限制的任务，因此没有真正的理由尝试将执行线程分散到多个 CPU 上。鉴于这一点以及线程比进程更轻量级的事实，使用线程可能会更好，但老实说，您不会注意到其中的区别。

您应该使用多少线程取决于您想要访问网站的难度。请保持礼貌并注意不要将您的抓取视为 DOS 攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:32:05.017

你真的不需要多线程来处理这类任务。你可以尝试使用[Twisted之类的单线程异步编程](http://twistedmatrix.com/trac/)

# javascript - 图像地图访问ID（区域）

> ID：15352110
> 
> 赞同：0
> 
> 时间：2013-03-12T02:11:59.207
> 
> 标签：javascript, jquery, image, map

我有一个图像映射，我希望在单击下一个多边形之前突出显示多边形。

喜欢：单击 plogone 1 - 突出显示

比：单击多边形 2 - 突出显示（多边形 1 未突出显示）

```
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="jquery.maphilight.js"></script>
<script>
$(function() {
 var nr = 0;
$('.map').maphilight({ strokeColor: 'ff0000', strokeWidth: 5});
$(polymap).click(function(e) {
            var data = $(high1).mouseout().data('maphilight') || {};
            data.alwaysOn = !data.alwaysOn;
            $(high1).data('maphilight', data).trigger('alwaysOn.maphilight');
            });
  }); 
```

```
</head>
  <body>
    <br>
    <img class="map" src="pb90%20%28150%29.html.png" ismap="ismap" usemap="#mapmap" alt="html imagemap created with QGIS" border="0">
    <map id="polymap" name="mapmap">
      <area id='high1'  shape="poly" href="PDF1.pdf" target="cont" coords="834,366,837,363,840" alt="">
      <area id='high2'  shape="poly" href="PDF2.pdf" target="cont" coords="940,236,941,236" alt="">
      <area id='high3'  shape="poly" href="PDF3.pdf" target="cont" coords="831,345,828,348,824" alt="">
.... 
```

我的问题是我无法访问这些区域的 ID。如果单击多边形，则只有带有“high1”的区域会被突出显示。所以代替那个

```
$(high1). 
```

我需要一种事件处理程序。

如果有人知道解决方案，那就太酷了:-)

欢呼伊曼纽尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:22:00.397

您的 jquery 选择器可以是 on `area`，然后在单击事件上运行的函数将取决于您单击的区域。在您的函数中，您可以使用`this`关键字来引用调用对象。

```
 $('area').click(function (e) {
        var data = $(this).mouseout().data('maphilight') || {};
        data.alwaysOn = !data.alwaysOn;
        $(this).data('maphilight', data).trigger('alwaysOn.maphilight');
    }); 
```

# javascript - 用css按钮替换单选按钮并将标签保留在div中

> ID：15352113
> 
> 赞同：0
> 
> 时间：2013-03-12T02:12:09.957
> 
> 标签：javascript, jquery, css, ajax

创建了一个小提琴[http://jsfiddle.net/4QZED/2/](http://jsfiddle.net/4QZED/2/)。（Explosion Pills 更新版本 - [http://jsfiddle.net/ExplosionPIlls/4QZED/4/](http://jsfiddle.net/ExplosionPIlls/4QZED/4/)）而不是显示普通收音机，或用图像替换收音机。我想用一个 div 替换它，我可以装扮成一个按钮，悬停类更改并单击类更改。而且点击隐藏的收音机也被选中。但还要求标签（标签参考文本显示，例如如下所示 .co.uk .com .net 等）位于 div/button 内。或者能够将文本添加到 div 按钮。这可能吗？

```
$(function() {
    $("input [name='domain_ext']").each(function() {
        if ($(this).prop('checked')) {
            $(this).hide();
            $(this).after($("<div class='radioButtonOff'> label </div>"));
        } else { 
            $(this).hide();
            $(this).after($("<div class='radioButtonOff'> label </div>"));
        }
    });

    $("input.radio").click(function() {
        if($(this).attr('src') == 'radiobuttonOn') {
            $(this).attr('src', 'radiobuttonOff');
            $(this).prev().attr('checked', 'false');
        } else { 
            $(this).attr('src', 'radioButtonOn');
            $(this).prev().attr('checked', 'true');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:20:20.160

我已尝试改进您的解决方案，以使其按您想要的方式工作。你有几个错误。`input[name=domain_ext]`最重要的是，和之间有一个非常重要的区别`input [name=domain_ext]`（空格是后代选择器）。您还在`$(this)`选中的事件中使用来明显更改 div，但该事件已绑定到输入。`input.radio`和之间也有区别`input[type=radio]`。

```
$("input[name='domain_ext']").each(function() {
    if ($(this).prop('checked')) {
        $(this).hide();
        $(this).after("<div class='radioButtonOff'> label </div>");
    } else { 
        $(this).hide();
        $(this).after("<div class='radioButtonOff'> label </div>");
    }
});

$("input[type=radio]").change(function() {
    $(this).siblings('.radioButtonOff').add('.radioButtonOn').toggleClass('radioButtonOff radioButtonOn');
}); 
```

[http://jsfiddle.net/ExplosionPIlls/4QZED/4/](http://jsfiddle.net/ExplosionPIlls/4QZED/4/)

# c# - 使用主表中的重命名字段和非主键创建实体关系

> ID：15352114
> 
> 赞同：11
> 
> 时间：2013-03-12T02:12:13.823
> 
> 标签：c#, entity-framework, foreign-keys, data-annotations

以下是我试图在其中定义外键关系的两个部分表。

```
public class Form
{
    [Key, Column("FormID")]
    public System.Guid FormGUID { get; set; }

    [Column("PatGUID")]
    public Nullable<System.Guid> PatientGUID { get; set; }
}

public class Patient
{
    [Column("PatGUID")]
    public System.Guid PatientGUID { get; set; }

    [Key, Column("PatID")]
    public int PatientID { get; set; } 
```

}

除了这个例子的相关信息、字段、导航等之外，我已经删除了所有内容；希望不要太多。

我们有一个表格表格，带有一个 FK`PatGUID`到一个带有字段的 Patient 表格`PatGUID`。Patient 表有一个`PatID`int KEY 字段。

我们需要为代码优先实体模型重命名字段；此示例中需要更改的相关字段`PatGUID`正在更改为`PatientGUID`.

我遇到的困难是尝试使用注释或流利的方式定义这个外键。

所以我需要的最终结果是：

*   **主键表**：患者，字段：（`PatGUID`重命名为 PatientGUID）

*   **外键表**：表单，字段：（`PatGUID`重命名为 PatientGUID）

这似乎不会造成大问题，但是由于`Patient.PatGUID`不是主键和`PatGUID`重命名为的字段的组合， `PatientGUID`WCF 数据服务无法正确创建具有正确引用的引用，因此是正确的选择/连接的：

```
SELECT … FROM  [dbo].[Form] AS [Extent1]
INNER JOIN [dbo].[Patient] AS [Extent2] ON [Extent1].[PatGUID] = [Extent2].[PatGUID] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T22:01:56.710

EF 还不支持主体的键不是主键而是具有唯一键约束的其他列的关系。它[在功能请求列表中](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1050579-unique-constraint-i-e-candidate-key-support)，但既没有实现，也没有出现在下一个版本（EF 6）的路线图上。如果它完全实现（可能在 EF 7 中），预计要等待一年或更长时间，直到它准备好投入生产。

`Form`在您的特定模型中，EF 根本无法识别and之间的任何关系，`Patient`因为`Patient.PatientID`标记为`[Key]`, not `Patient.PatientGUID`，并且 EF 将`Form.PatientGUID`其视为普通的标量属性，而不是 FK to `Patient`。

从理论上讲，如果您不从数据库创建模型或从代码优先模型创建数据库，那么尽管它不是数据库中的主键，但您可以假冒模型`Patient.PatientGUID`中的属性，也就是说，如果您在模型之间进行映射`[Key]`和（现有）数据库手动。但我不确定这是否不会在其他任何地方引起微妙的问题。

`join`如果你想获取`Patients`和相关的，另一种方法是在 LINQ 中编写手动语句`Forms`。然后，您可以使用任意属性连接两个实体，而不仅仅是关键属性。在我看来，这是一种更干净、更不“棘手”的方法。然而，缺点是你不会在`Patient`和之间有导航属性——引用或集合——`Form`你不能在你的LINQ 查询。`Include``Form.Patient.SomePatientProperty`

# web-services - 如何在 websphere 中为 webservice 客户端定义超时

> ID：15352116
> 
> 赞同：1
> 
> 时间：2013-03-12T02:12:48.497
> 
> 标签：web-services, timeout, websphere

我们的应用程序托管在 websphere 中，我的 web 服务客户端 (jax-ws) 正在对远程服务器进行 web 服务调用。我需要为此 Web 服务调用定义超时。我尝试了不同的方法来设置超时，但没有运气。这是我尝试过的：

```
 Map<String, Object> requestContext = ((BindingProvider) binding).getRequestContext();
    requestContext.put("com.ibm.websphere.webservices.jaxws.asynctimeout", 15000); 
```

或者

```
 Map<String, Object> requestContext = ((BindingProvider) binding).getRequestContext();
    requestContext.put(BindingProviderProperties.REQUEST_TIMEOUT, 15000);
    requestContext.put(BindingProviderProperties.CONNECT_TIMEOUT, 15000); 
```

它们都不起作用

任何人都可以给出提示，如何在 websphere 中为 webservice 客户端设置超时？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:10:53.997

因为 WAS 中的 Jax-WS 依赖于 Axis 2，我相信您可以使用标准的 Axis 2 方法来做到这一点，请尝试（来自 axis 2 文档）：

> 超时配置

传输层存在两个超时实例，Socket超时和连接超时。这些可以在部署或运行​​时进行配置。如果在部署时进行配置，用户必须在axis2.xml 中添加以下行。

对于套接字超时：

```
<parameter name="SO_TIMEOUT">some_integer_value</parameter>
For Connection timeout:

 <parameter name="CONNECTION_TIMEOUT">some_integer_value</parameter> 
```

对于运行时配置，可以在客户端存根中进行如下设置： ...

```
Options options = new Options();
options.setProperty(HTTPConstants.SO_TIMEOUT, new Integer(timeOutInMilliSeconds));
options.setProperty(HTTPConstants.CONNECTION_TIMEOUT, new Integer(timeOutInMilliSeconds));

// or
options.setTimeOutInMilliSeconds(timeOutInMilliSeconds);
... 
```

如果您想了解更多信息，请查看：[http ://axis.apache.org/axis2/java/core/docs/http-transport.html](http://axis.apache.org/axis2/java/core/docs/http-transport.html)

还：

[http://wso2.org/library/209](http://wso2.org/library/209)

[http://singztechmusings.wordpress.com/2011/05/07/how-to-configure-timeout-duration-at-client-side-for-axis2-web-services/](http://singztechmusings.wordpress.com/2011/05/07/how-to-configure-timeout-duration-at-client-side-for-axis2-web-services/)

如果您使用 ServiceClient，请检查此线程：[Axis2 ServiceClient 选项忽略超时](https://stackoverflow.com/questions/13522686/axis2-serviceclient-options-ignore-timeout)

请让我知道它是否有效；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T21:36:43.487

您应该设置以下链接中提到的 JVM 属性 -

[https://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/rwbs_jaxwstimeouts.html](https://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/rwbs_jaxwstimeouts.html)

```
bindingProvider.getRequestContext().put(com.ibm.wsspi.webservices.Constants.CONNECTION_TIMEOUT_PROPERTY, timeout);
bindingProvider.getRequestContext().put(com.ibm.wsspi.webservices.Constants.RESPONSE_TIMEOUT_PROPERTY, timeout); 
```

以秒为单位将超时设置为字符串。

# asp.net - 没有显示错误时无法构建解决方案

> ID：15352118
> 
> 赞同：0
> 
> 时间：2013-03-12T02:12:57.457
> 
> 标签：asp.net

我有一个问题，我尝试构建我的项目，但每次构建时，它都说有错误，但在错误框中没有显示错误。我可以知道是什么原因造成的吗？这是我的编码

```
Dim sTmp As String
        Dim aTmp(), bTmp() As String
        Dim MRWS As New MobileReload_WS.MobileReload_WS
        Dim aTelco(12, 3) As String
        Dim aProduct(12, 3) As String
        Label1.Text = "0.0"
        sTmp = MRWS.LoadTelco_WS()
        If sTmp = "" Then
            Exit Sub
        Else
            aTmp = Split(sTmp, "|", )
            For i = 0 To UBound(aTmp)
                bTmp = Split(aTmp(i), ";")
                For j = 0 To UBound(bTmp)
                    aTelco(i + 1, j) = bTmp(j)
                Next
            Next
        End If

        If aTelco(1, 0) <> Nothing Then
            If aTelco(1, 3) = "0" Then
                imgMaxis.Enabled = False
                imgMaxis.ImageUrl = "~/Graphic/MaxisGry.png"
            Else
                imgMaxis.Enabled = True
                imgMaxis.Visible = True
            End If
        End If
        If aTelco(2, 0) <> Nothing Then
            If aTelco(2, 3) = "0" Then
                imgDigi.Enabled = False
                imgDigi.ImageUrl = "~/Graphic/DIgiGry.png"
            Else
                imgDigi.Enabled = True
                imgDigi.Visible = True
            End If
        End If
        If aTelco(3, 0) <> Nothing Then
            If aTelco(3, 3) = "0" Then
                imgXPax.Enabled = False
                imgXPax.ImageUrl = "~/Graphic/XpaxGry.png"
            Else
                imgXPax.Enabled = True
                imgXPax.Visible = True
            End If
        End If
        If aTelco(4, 0) <> Nothing Then
            If aTelco(4, 3) = "0" Then
                imgiTalk.Enabled = False
                imgiTalk.ImageUrl = "~/Graphic/iTalkGry.png"
            Else
                imgiTalk.Enabled = True
                imgiTalk.Visible = True
            End If
        End If
        If aTelco(5, 0) <> Nothing Then
            If aTelco(5, 3) = "0" Then
                imgUMobile.Enabled = False
                imgUMobile.ImageUrl = "~/Graphic/UMobileGry.png"
            Else
                imgUMobile.Enabled = True
                imgUMobile.Visible = True
            End If
        End If
        If aTelco(6, 0) <> Nothing Then
            If aTelco(6, 3) = "0" Then
                imgMerchant.Enabled = False
                imgMerchant.ImageUrl = "~/Graphic/MerchantGry.png"
            Else
                imgMerchant.Enabled = True
                imgMerchant.Visible = True
            End If
        End If
        If aTelco(7, 0) <> Nothing Then
            If aTelco(7, 3) = "0" Then
                imgTuneTalk.Enabled = False
                imgTuneTalk.ImageUrl = "~/Graphic/TuneGry.png"
            Else
                imgTuneTalk.Enabled = True
                imgTuneTalk.Visible = True
            End If
        End If
        If aTelco(8, 0) <> Nothing Then
            If aTelco(8, 3) = "0" Then
                imgXOX.Enabled = False
                imgXOX.ImageUrl = "~/Graphic/XOXGry.png"
            Else
                imgXOX.Enabled = True
                imgXOX.Visible = True
            End If
        End If
        If aTelco(9, 0) <> Nothing Then
            If aTelco(9, 3) = "0" Then
                imgRedTone.Enabled = False
                imgRedTone.ImageUrl = "~/Graphic/RedToneGry.png"
            Else
                imgRedTone.Enabled = True
                imgRedTone.Visible = True
            End If
        End If
    End Sub 
```

在代码中，当我开始比较数组列表时，出现错误。

# python - 如何打印只有 1 个元音的单词？

> ID：15352119
> 
> 赞同：2
> 
> 时间：2013-03-12T02:13:23.343
> 
> 标签：python, python-3.x

到目前为止我的代码，但由于我迷路了，它并没有做任何接近我想要它做的事情：

```
vowels = 'a','e','i','o','u','y'
#Consider 'y' as a vowel

input = input("Enter a sentence: ")

words = input.split()
if vowels == words[0]:
    print(words) 
```

所以对于这样的输入：

```
"this is a really weird test" 
```

我希望它只打印：

```
this, is, a, test 
```

因为它们只包含 1 个元音。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:21:02.863

尝试这个：

```
vowels = set(('a','e','i','o','u','y'))

def count_vowels(word):
    return sum(letter in vowels for letter in word)

my_string = "this is a really weird test"

def get_words(my_string):
    for word in my_string.split():
        if count_vowels(word) == 1:
            print word 
```

结果：

```
>>> get_words(my_string)
this
is
a
test 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T02:32:01.100

这是另一种选择：

```
import re

words = 'This sentence contains a bunch of cool words'

for word in words.split():
    if len(re.findall('[aeiouy]', word)) == 1:
        print word 
```

输出：

```
This
a
bunch
of
words 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T02:20:50.087

您可以将所有元音转换为单个元音并计算该元音：

```
import string
trans = string.maketrans('aeiouy','aaaaaa')
strs = 'this is a really weird test'
print [word for word in strs.split() if word.translate(trans).count('a') == 1] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-12T02:41:44.397

```
>>> s = "this is a really weird test"
>>> [w for w in s.split() if len(w) - len(w.translate(None, "aeiouy")) == 1]
['this', 'is', 'a', 'test'] 
```

不确定是否需要没有元音的单词。如果是这样，只需替换`== 1`为`< 2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T03:44:25.890

尝试这个：

```
vowels = ('a','e','i','o','u','y')
words = [i for i in input('Enter a sentence ').split() if i != '']
interesting = [word for word in words if sum(1 for char in word if char in vowel) == 1] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T23:14:38.763

^(*我发现您缺少正则表达式令人不安。*)

这是一个纯正则表达式的解决方案[（ideone）](http://ideone.com/t6yL6a)：

```
import re

str = "this is a really weird test"

words = re.findall(r"\b[^aeiouy\W]*[aeiouy][^aeiouy\W]*\b", str)

print(words) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T02:18:21.600

如果您检查了下一个字符是空格，则可以使用一个 for 循环将子字符串保存到字符串数组中。它们对于每个子字符串，检查是否只有一个 a,e,i,o,u (vowels) ，如果是，则添加到另一个数组中

之后，从另一个数组中，用空格和逗号连接所有字符串

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-14T07:07:02.390

我在这里找到了很多不错的代码，我想展示我丑陋的代码：

```
v = 'aoeuiy'
o = 'oooooo'

sentence = 'i found so much nice code here'

words = sentence.split()

trans = str.maketrans(v,o)

for word in words:
    if not word.translate(trans).count('o') >1:
        print(word) 
```

# python - 用matplotlib绘制虚线二维向量？

> ID：15352129
> 
> 赞同：7
> 
> 时间：2013-03-12T02:14:24.497
> 
> 标签：python, matplotlib

我`quiver`用来在 matplotlib 中绘制向量：

```
from itertools import chain
import matplotlib.pyplot as pyplot
pyplot.figure()
pyplot.axis('equal')
axis = pyplot.gca()
axis.quiver(*zip(*map(lambda l: chain(*l), [
    ((0, 0), (3, 1)),
    ((0, 0), (1, 0)),
])), angles='xy', scale_units='xy', scale=1)

axis.set_xlim([-4, 4])
axis.set_ylim([-4, 4])
pyplot.draw()
pyplot.show() 
```

这给了我很好的箭头，但是我怎样才能将它们的线条样式更改为虚线、虚线等？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T03:42:40.750

啊! 实际上，`linestyle='dashed'`确实有效，只是默认情况下仅填充箭袋箭头并且没有设置线宽。它们是补丁而不是路径。

如果你做这样的事情：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.axis('equal')

ax.quiver((0,0), (0,0), (3,1), (1,0), angles='xy', scale_units='xy', scale=1,
          linestyle='dashed', facecolor='none', linewidth=1)

ax.axis([-4, 4, -4, 4])
plt.show() 
```

![在此处输入图像描述](../Images/e7ee74052135b485c36be2ea7ebafaee.png)

您会看到虚线箭头，但可能与您的想法不太一样。

您可以使用一些参数来更接近一点，但它仍然看起来不太好：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.axis('equal')

ax.quiver((0,0), (0,0), (3,1), (1,0), angles='xy', scale_units='xy', scale=1,
          linestyle='dashed', facecolor='none', linewidth=2,
          width=0.0001, headwidth=300, headlength=500)

ax.axis([-4, 4, -4, 4])
plt.show() 
```

![在此处输入图像描述](../Images/de8e3f03a796953ee1a0cede2e96bd44.png)

因此，另一种解决方法是使用影线：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.axis('equal')

ax.quiver((0,0), (0,0), (3,1), (1,0), angles='xy', scale_units='xy', scale=1,
        hatch='ooo', facecolor='none')

ax.axis([-4, 4, -4, 4])
plt.show() 
```

![在此处输入图像描述](../Images/614afc984121ff55f85b15918e158538.png)

# go - 是否有必要将模板放入地图中以便在 Go 中重用？

> ID：15352130
> 
> 赞同：7
> 
> 时间：2013-03-12T02:14:28.643
> 
> 标签：go

为了处理 Web 应用程序中的每个请求，关于模板的正常代码是这样的：

```
t:= template.New("welcome")
t, _ = t.ParseFiles("welcome.tpl")
t.Execute(w, data) 
```

估计`ParseFiles`每次都要花很多钱。是否可以重复使用模板？所以我像这样改进它：

```
//templateMap := make(map[string][template])
//...
tplName :="welcome"
t := templateMap[tplName]
if t=nil{
    t:= template.New(tplName )
    t, _ = t.ParseFiles("welcome.tpl")
    templateMap[tplName] = t
}

t.Execute(w, data) 
```

我想知道通过将模板放入地图或缓存来提高效率是否可行或可行？我也想知道这个函数 `Execute`是否是线程安全的？

`func (t *Template) Execute(wr io.Writer, data interface{}) (err error)`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T03:18:30.803

模板本身实际上可以充当模板的映射。这就是我所做的：

我声明了一个全局模板变量：

```
var t = template.New("master") 
```

我实际上并没有使用“主”模板，除了作为其他模板的容器。

然后，我在我的应用程序启动时加载所有模板：

```
func init() {
    _, err := t.ParseGlob("templates/*.html")
    if err != nil {
        log.Fatalln("Error loading templates:", err)
    }
} 
```

然后，当我想使用其中一个模板时，我会按名称要求它：

```
t.ExecuteTemplate(w, "user.html", data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:04:52.250

从template.go的源码来看，Execute函数使用了Lock，我是新手，看起来是线程安全的，但是如果需要的话，如果把模板实例放到一个map中尝试重用它可能效率不高服务大量并发请求：

```
func (t *Template) Execute(wr io.Writer, data interface{}) (err error) {
        t.nameSpace.mu.Lock()
        if !t.escaped {
                if err = escapeTemplates(t, t.Name()); err != nil {
                        t.escaped = true
                }
        }
        t.nameSpace.mu.Unlock()
        if err != nil {
                return
        }
        return t.text.Execute(wr, data)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-11T12:14:58.350

如果模板与处理程序具有一对一的关系，另一种方法是使用闭包。好处是模板只执行一次并且不需要全局变量，但缺点是模板只能在声明它的处理程序中使用。

```
func templateHandler() http.HandlerFunc {

    // template is executed once
    tmp := template.Must(template.ParseFiles("welcome.html"))

    // return our handler with the template available through the closure
    return func(w http.ResponseWriter, r *http.Request) {
        // ...perform other handler work ...
        // execute template against data
        tmp.Execute(w, myData)
    }
}

func main() {
    http.HandleFunc("/gopher", templateHandler())
    http.ListenAndServe(":8080", nil)
} 
```

# meteor - Ubuntu流星错误

> ID：15352138
> 
> 赞同：0
> 
> 时间：2013-03-12T02:15:07.340
> 
> 标签：meteor

不知道为什么，但是当我尝试在我的桌面上运行任何流星应用程序（示例、新应用程序、当前正在开发的应用程序）时，我得到了这个：

```
meteor
[[[[[ ~/tmp/lol ]]]]]

Initializing mongo database... this may take a moment.
Running on: http://localhost:3000/

/usr/lib/meteor/app/lib/fiber-helpers.js:23
    }).run();
       ^
Error: watch ENOSPC
    at errnoException (fs.js:806:11)
    at FSWatcher.start (fs.js:837:11)
    at Object.fs.watch (fs.js:861:11)
    at _.extend._scan (/usr/lib/meteor/app/meteor/run.js:424:24)
    at Array.forEach (native)
    at Function._.each._.forEach (/usr/lib/meteor/lib/node_modules/underscore/underscore.js:79:11)
    at new DependencyWatcher (/usr/lib/meteor/app/meteor/run.js:360:5)
    at exports.run.start_watching (/usr/lib/meteor/app/meteor/run.js:593:17)
    at /usr/lib/meteor/app/meteor/run.js:651:5
    at exports.inFiber (/usr/lib/meteor/app/lib/fiber-helpers.js:22:12) 
```

我的办公室桌面有相同的版本（ubuntu、node、meteor）并且像一个魅力一样工作，已经尝试卸载流星和节点并且问题仍然存在。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:27:44.000

嗯...发现了问题，Dropbox 正在观看太多文件，如果我停止 Dropbox 流星照常工作，为了保持两者正常工作，我必须编辑 /proc/sys/fs/inotify/max_user_watches 并将那里的数字设置为 100000 , 之后两个都ok

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T03:14:35.633

运行以下命令。这可能会有所帮助

```
echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p 
```

# solr - 根据文档的年龄更改 solr 中的字段值

> ID：15352143
> 
> 赞同：0
> 
> 时间：2013-03-12T02:15:16.393
> 
> 标签：solr

在我的 solr 架构（Solr4.1）中，我有 2 个字段

```
<timestamp>
<status> 
```

我想更新/更改超过 14 天的文档状态，但不从索引中删除它们。

我现在像这样删除它们

```
curl http://localhost/solr/update?commit=true -H "Content-Type: text/xml" --data-binary '<delete><query>timestamp:[* TO NOW-14DAYS] </query></delete>' 
```

我想知道我是否可以根据时间戳值确定的文档年龄将状态字段更改为一些名义文本值“过期”或“存档”等。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:15:11.477

我能够通过以下方式解决此问题。似乎 Solr 可以通过查询等方式删除，但不能通过查询进行更新。在我的情况下，我只是想更新文档的一个字段，而不是重新索引文档，不删除它，只是根据它的年龄更新它（例如，使文档过期但仍将其保存在索引中，以便在需要时找到它） .

我所做的是使用 csv 响应编写器，我将查询时间戳：[* TO NOW-14DAYS] 保存到 csv 文件中。现在我有一个 csv 文件，其中包含上述查询中的所有文档（或您需要的任何查询）

然后，您可以快速查找/替换要更改的值，例如“已发布”更改为“未发布”或其他内容。保存 .csv。重新索引/提交。

总共花了大约5分钟。

Solr4.x 确实需要通过查询来更新字段，但这对我来说是一个非常简单的工作。

# android - 使用greendao for android的多对多编译错误

> ID：15352144
> 
> 赞同：6
> 
> 时间：2013-03-12T02:15:19.390
> 
> 标签：android, orm, many-to-many, entities, greendao

**问题解决了！**- 我在底部添加了我的解决方案。

我认为这是一个相当简单的问题，但我似乎无法在文档中找到答案。

我正在尝试使用 greendao for android 对多对多关系进行建模，但是在运行生成器项目后，在主项目中出现编译错误。

**我指定关系和实体的代码：**

```
 Entity customer = schema.addEntity("Customer");
    customer.addIdProperty();
    customer.addStringProperty("firstName").notNull();
    customer.addStringProperty("lastName").notNull();
    customer.addDateProperty("birthDate");
    customer.addStringProperty("phoneNumber");
    customer.addStringProperty("address");
    customer.addStringProperty("email");

    // Product
    Entity product= schema.addEntity("Product");
    product.addIdProperty();
    product.addIntProperty("colour").notNull();
    product.addIntProperty("weight").notNull();

    // CustomerProduct
    Entity customerProduct = schema.addEntity("CustomerProduct");
    customerProduct.addIdProperty();

    Property customerId = customerProduct.addLongProperty("customerId").notNull().getProperty();
    customer.addToOne(customerProduct , customerId);
    ToMany customerProductToCustomers = customerProduct.addToMany(customer, customerId);
    customerProductToCustomers.setName("customers");        

    Property productId = customerProduct.addLongProperty("productId").notNull().getProperty();
    product.addToOne(customerProduct , productId);
    ToMany customerProductToProducts = customerProduct.addToMany(product, productId);
    customerProductToProducts.setName("products");  

    customerProduct.addStringProperty("something"); 
```

错误：在 Customer.java 中：customerId 无法解析为变量在 Product.java 中：productId 无法解析为变量

请帮忙，谢谢。

编辑：

这是来自 Customer.java 的问题代码摘录（**自动生成**）：

/** 一对一的关系，在第一次访问时解决。*/

```
public CustomerProduct getCustomerProduct() {
    if (customerProduct__resolvedKey == null || !customerProduct__resolvedKey.equals(customerId)) {
        if (daoSession == null) {
            throw new DaoException("Entity is detached from DAO context");
        }
        CustomerProductDao targetDao = daoSession.getCustomerProductDao();
        customerProduct = targetDao.load(customerId);
        customerProduct__resolvedKey = customerId;
    }
    return customerProduct ;
}

public void setCustomerProduct(CustomerProduct customerProduct ) {
    if (customerProduct == null) {
        throw new DaoException("To-one property 'customerId' has not-null constraint; cannot set to-one to null");
    }
    this.customerProduct = customerProduct;
    customerId= customerProduct.getId();
    customerProduct__resolvedKey = customerId;
} 
```

问题：此生成的代码试图引用 customerId，但 customerId 不作为该类的成员之一存在：

公共类客户{

```
private Long id;
/** Not-null value. */
private String firstName;
/** Not-null value. */
private String lastName;
private java.util.Date birthDate;
private String phoneNumber;
private String address;
private String email;

/** Used to resolve relations */
private transient DaoSession daoSession;

/** Used for active entity operations. */
private transient CustomerDao myDao;

private CustomerProduct customerProduct;
private Long customerProduct__resolvedKey; 
```

**解决方案**：

所以我一直试图做的是建立多对多关系的模型。我在做什么：客户 (M:1) CustomerProduct (1:M) 产品

但是我应该做的是：客户（1：M）客户产品（M：1）产品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:04:45.793

更改`customerId= customerProduct.getId();`为`int customerId= customerProduct.getId();`。或者更好的是，只需`customerProduct__resolvedKey = customerProduct.getId();`假设`customerProduct__resolvedKey`正确声明即可。

# android - ActionBarSherlock 和自定义文本框（扩展 AutoCompleteTextView）

> ID：15352148
> 
> 赞同：3
> 
> 时间：2013-03-12T02:16:47.657
> 
> 标签：android, actionbarsherlock

好的，我为此发疯了——我已经在我的应用程序中集成了 ActionBarSherlock 并且正在使用 Theme.Sherlock。现在，我似乎无法让我的自定义文本框正常工作 - 每当我离开文本框时，文本都会变成白色。这是更好地解释问题的图像（我使用了库附带的示例中的叠加布局）：

打字：

![第 1 步 - 打字](../Images/95541047754e8f9364ea4f58e31db21d.png)

回到EditText：

![第 2 步 - 返回 EditText](../Images/773133c40935c68e067966234cdf6a9b.png)

有谁知道为什么会这样？

**编辑：**要重现此错误，只需下载 ActionBar zip 并提取示例项目。然后在第一个 LinearLayout 的 Overlay 布局 (res/layout/overlay.xml) 中的那个项目中添加：

```
<EditText 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:imeOptions="actionNext" />
<AutoCompleteTextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

并在具有旧版本 Android 操作系统的设备上运行示例项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:53:51.987

好的，现在我明白为什么没有人能够回答这个问题了——它似乎只发生在特定的设备上！所以，就我而言，我是在旧的 Amazon Kindle 上复制它。

我最终找到的当前解决方法对我有用，是通过获取默认 EditText 的 textColor 来设置我的控件的 textColor （是的，非常难看）。

如果有人有更好的主意 - 请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:14:42.960

*   最低和目标 SDK 版本是多少？
*   您在应用程序/活动中使用哪个主题？

扩展您正在使用的默认主题并在那里定义文本颜色。见[继承](http://developer.android.com/guide/topics/ui/themes.html#Inheritance)

# paypal - 在新的 Paypal 沙盒中找不到身份验证详细信息

> ID：15352149
> 
> 赞同：0
> 
> 时间：2013-03-12T02:17:05.110
> 
> 标签：paypal, sandbox

我是 Magneto Enterprise 1.12 的用户。我们通过 PayPal 沙箱将结帐连接到 PayPal Express。我转储了我的 cookie 以解决一个不相关的问题，并且在结帐时我现在被重定向到 PayPal 沙箱。我才意识到 PayPal 现在已经彻底检查了他们的沙箱，我的旧身份验证详细信息不再有效，并且我用来创建帐户的电子邮件地址无法识别。耶贝宝....干得好！

我已经使用我的个人帐户 (????) 登录并迁移了测试沙盒帐户，但我现在只能获得 REST API 凭据。Magento 需要以下内容进行测试转...

1.  与 PayPal 商家帐户关联的电子邮件
2.  API 身份验证方法
3.  API 用户名
4.  API 密码
5.  API签名

新的沙盒站点没有指向此旧 API 信用信息的链接……只有其余的 API 信用。

有人找到此信息的链接吗？

干杯

卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:00:10.220

在应用程序 > 沙盒帐户中，单击与测试帐户关联的电子邮件地址，然后单击配置文件链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:12:29.160

我也有同样的情况。这样做了，但旧帐户不再有签名。但是，有一个“默认”创建的具有签名的新帐户，但是当我尝试使用此帐户时，问题仍然存在，因为在付款时我被重定向到沙盒页面，要求我登录到我的沙盒帐户。真的很奇怪！

无论如何谢谢埃利奥特

# sql - 查询返回太多结果？

> ID：15352152
> 
> 赞同：1
> 
> 时间：2013-03-12T02:17:17.703
> 
> 标签：sql, postgresql, max

我试图在查询中获得每个国家/地区任何城市中最大的人口。我需要加入城市和国家表，因为它们位于两个表上，并通过国家代码加入它们。

我有以下查询：

```
SELECT country.name         AS country, 
       city.name            AS city, 
       Max(city.population) AS max_pop 
FROM   country 
       INNER JOIN city 
               ON( country.country_code = city.country_code ) 
GROUP  BY country.name, 
          city.name 
ORDER  BY country.name ASC; 
```

我的想法是从连接表中获取我的国家名称、城市名称和最大值。我假设并测试过，最大值只会给我一个结果，但是在这种情况下它会给我几个！为了让它运行，我在我的组中同时拥有城市和国家名称。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:21:05.727

```
SELECT co.name         AS country,
       ct.name         AS city, 
       t.pop AS max_pop 
FROM country AS co
      INNER JOIN (
               SELECT country_code, Max(population) AS pop FROM city GROUP BY country_code
             ) t ON co.country_code = t.country_code 
      INNER JOIN city AS ct ON ct.population = t.pop AND co.country_code = ct.country_code 
ORDER  BY country.name ASC; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T03:37:21.873

*[**`DISTINCT ON`**](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-DISTINCT)使用（SQL 标准的 PostgreSQL 扩展）*更*短、更快：*

 *```
SELECT DISTINCT ON (1)
       co.name       AS country
      ,ci.name       AS city
      ,ci.population AS max_pop
       -- add more columns as you please
FROM   country co
JOIN   city    ci USING (country_code)
ORDER  BY 1, 3 DESC, 2; 
```

如果两个城市在一个国家/地区拥有同样多的人口，在这种情况下，我会先按字母顺序选择。这就是为什么我在子句中添加*位置参数 2* (for `ci.name`) 。`ORDER BY`

我还使用表别名和`USING`equi-join 进行了简化。

关于`DISTINCT ON`：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)*

# objective-c - CoreData 乱序获取

> ID：15352159
> 
> 赞同：0
> 
> 时间：2013-03-12T02:17:54.660
> 
> 标签：objective-c, core-data, nsfetchrequest

这似乎非常微不足道，我不应该问，但我还没有看到任何东西。如果我将一组对象（或“集合”）保存到 CoreData，为什么它总是乱序返回？每个数组没有特定的顺序（用户创建一个列表），所以我不相信有任何正则表达式或排序描述符可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:24:20.890

`NSSet`没有保证的顺序。您需要`NSArray`能够找到特定元素或控制返回集的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T03:23:26.243

要保持用户定义的排序，您可以将整数属性（例如“sortOrder”）添加到数据模型中的相应实体。当用户更改列表中的顺序时，您可以使用此属性通过更新托管对象中的属性来手动跟踪排序顺序。然后，您将能够执行提取请求并根据“sortOrder”属性指定排序描述符，以按照原始用户定义的顺序获取从提取返回的结果。

如果您使用的是 iOS 5 或 10.7+，您可以创建模型，使其具有有序对多的关系。请参阅[iOS 5.0/OS X 10.7 发行说明](http://developer.apple.com/library/ios/releasenotes/DataManagement/RN-CoreData/index.html#//apple_ref/doc/uid/TP40010637-CH1-DontLinkElementID_3)。在 Interface Builder 中，选择相关关系并选中“ordered”复选框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T02:24:50.730

因为 an`NSSet` *是*一个无序集合。您可以通过将任何排序描述符`sortedArrayUsingDescriptors:`应用于 your `NSSet`，这将返回一个`NSArray`有序的结果。

参考苹果的文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html)

# php - 致命错误：允许的内存大小为 268435456 字节已用尽（尝试分配 41420841 字节）

> ID：15352165
> 
> 赞同：0
> 
> 时间：2013-03-12T02:19:10.323
> 
> 标签：php, cakephp, memory, upload

我正在开发的 CakePHP 应用程序允许上传 PDF 文件，并使用 FPDF 将这些 PDF 合并在一起。这是我第一次看到这个问题，但似乎真的很大的 PDF 正在破坏它们的系统：

`Fatal error: Allowed memory size of 268435456 bytes exhausted (tried to allocate 41420841 bytes)`

我已经更改了**php.ini**以允许 512M 和 used `ini_set('memory_limit','512M');`，但似乎都没有什么不同。

关于如何追踪内存限制的任何想法？

# javascript - 外部函数的局部变量

> ID：15352167
> 
> 赞同：2
> 
> 时间：2013-03-12T02:19:34.313
> 
> 标签：javascript, eval, scope, dynamic-scope

我正在尝试将外部函数中函数的局部变量作为自由变量访问。

这就是我想要实现的目标：

```
function try_evaluate() {
    var i = 0;
    show_r("i <= 10");
}

function show_r(expression) {
    if (eval(expression)) {
        i++;
        show_r(expression);
    } else alert(eval(expression));
} 
```

我收到一个错误，因为该变量`i`未在`show_r`. 制作`i`一个全局变量是可行的，但我需要`i`成为一个局部变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:23:56.020

使用`var i`，该变量只能在定义它的函数范围内访问。同一范围内的匿名函数确实可以访问它，但对外部定义的函数的调用没有访问权限。相反，您需要传递变量或在两个上下文都可用的范围内定义它（例如，全局范围，但我不建议您使用它）。

我也会对您具体尝试做的事情非常谨慎。如果你*必须*使用`eval`来做某事，那可能是错误的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:28:20.807

```
function try_evaluate(){
    var i = 0;
    show_r(i);
}
function show_r(x){
    //console.log(eval.expression);
    if (x<=10){
       x++;
        console.log(x);
        show_r(x);
    } else {
        console.log(false);
    }       
}` 
```

你为什么要评估？我认为你可以用上面的代码实现你想要做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T03:42:02.903

这似乎是 JavaScript 中动态作用域的有用之处。请参阅此 StackOverflow 线程：[是否可以在不借助 eval 的情况下在 JavaScript 中实现动态范围？](https://stackoverflow.com/q/10060857/783743)

这就是我要做的：

```
function try_evaluate() {
    var i = 0;
    var show_r_dynamic = eval("(" + show_r + ")");
    show_r_dynamic("i <= 10");
} 
```

其他一切都保持不变：

```
function show_r(expression) {
    if (eval(expression)) {
        i++;
        show_r(expression);
    } else alert(eval(expression));
} 
```

你可以在这里看到演示：http: [//jsfiddle.net/53Qsu/](http://jsfiddle.net/53Qsu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T02:31:48.840

这将更好地工作：

```
function try_evaluate(){
    var i = 0;
    show_r('$ <= 10', i);
    show_r('false', i);
}

function show_r(expression, i){
    if (eval(expression.replace('$', i))){
        i += 1
        show_r(expression, i);
    } else {
        alert(eval(expression.replace('$', i)));
    }       
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-21T23:00:53.707

您应该将其添加到字符串中，但就像这样。将其作为参数传递并将其集成到表达式中。

```
function try_evaluate() {
   var i = 0;
   show_r(i," <= 10");
}

function show_r(i,expression) {
    if (eval(i+expression)) {
        i++;
        show_r(i+expression);
    } else alert(eval(i+expression));
 } 
```

或者您可以尝试在表达式中替换它以允许 && 表达式与多个 i

```
function try_evaluate() {
   var i = 0;
   show_r(i,"i <= 10");
}

function show_r(i,expression) {
    if (eval(expression.replace("i",i)) {
        i++;
        show_r(expression.replace("i",i));
    } else alert(eval(expression.replace("i",i)));
 } 
```

# ios - iOS - 在标签栏中初始化视图控制器

> ID：15352169
> 
> 赞同：3
> 
> 时间：2013-03-12T02:19:35.960
> 
> 标签：ios, uitabbarcontroller, uilabel

我正在开发一个带有两个选项卡的项目。在我的第一个视图控制器上，我试图调用位于我的第二个视图控制器中的方法。第二个视图控制器上的方法更新这个第二个视图控制器上的 UILabel。问题是第二个视图控制器在启动时没有初始化，因此没有正确调用该方法。我可以使用以下手动初始化第二个视图控制器

```
 if (secondView==nil) {
        secondView = [[SecondView alloc]init];
    } 
```

然后启动该方法（通过在所述方法上放置断点进行测试并验证它确实触发），但我的 UILabel 没有更新，这让我相信第二个视图控制器是在不同的线程上初始化的。

我的问题是：如何在同一个线程上初始化第二个视图控制器，以便当我单击该选项卡时 UI 会更新？有没有办法在 appDelegate 中做到这一点？

我已验证 IBOutlet 已正确连接到标签，.h 文件已正确导入，并且 SecondViewController 的方法在 .H 文件中说明。

代码如下：

```
FirstViewController.m

-(void)myMethod
{
     [secondView updateLabel];
}

SecondViewController.m
-(void)updateLabel
{
    myLabel.text = myString;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T04:18:40.580

“我的问题是：如何在同一个线程上初始化第二个视图控制器..”

你不需要。如果您的控制器位于选项卡栏控制器中，则每个选项卡的根控制器在启动时都会被实例化。如果您需要参考它，请使用 self.tabBarController.viewControllers[1] 之类的东西。这将是第二个选项卡中的控制器。您不想分配初始化一个，这将创建一个不同的 SecondView 实例。

但是，即使您获得了对 secondView 的正确引用，您尝试执行的操作也不起作用，因为 secondView 的视图尚未加载，因此尝试更新标签将不起作用。从您的问题中不清楚为什么您要从第一个控制器执行此操作，因为您没有从中传递任何内容。如果这就是你想要做的，那么只需更新 secondController 的 viewDidAppear 方法中的标签。如果你确实想从第一个视图控制器传递一个字符串，那么你应该在 secondView 中有一个字符串属性，并从第一个控制器设置它的值。然后，让 secondView 在 vi​​ewDidAppear 中将其标签的文本设置为该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:37:24.357

`AppDelegate`不应从主线程以外的不同线程执行，除非您正在创建自己的线程、使用操作或尝试从异步回调调用 UI（即异步 url 请求？）。

只是好奇......你能检查一下是否`myLabel`为 nil 吗？另一个快速检查是`myLabel`在目标视图控制器的 init 方法上设置一个值，而不是等待函数调用。

如果您确实有其他线程并且正在执行对 UI 的调用，那么切换到主线程的一个好方法是使用`NSThread`该类，如下所示：

```
- (void) doSomethingOnUI:(NSString*) label{
   // if the calling thread is not the main thread
   if( ![NSThread isMainThread] )
   {
        // switch to the main thread
        [self performSelectorOnMainThread:@selector(doSomethingOnUI:) 
                               withObject:label 
                            waitUntilDone:YES];
        return;
   }

   [self.myLabel setText: label];
} 
```

# android - 将对象添加到数组对象在android中不起作用

> ID：15352177
> 
> 赞同：1
> 
> 时间：2013-03-12T02:20:30.100
> 
> 标签：android, arrays, nullpointerexception

我是Android的新体验。谁能帮我解决我的问题？我想创建一个老虎与牛打架的游戏（它是棋盘游戏）。我有一个类 Piece 可以设置为 Tiger 或 Cow，我想创建一个此类的数组，如下所示。

*注意：Piece 是 ImageView 的扩展

```
Piece[] tigers = new Piece[4];
for(int i = 0; i < tigers.length; i++) {
    tigers[i] = new Piece(context);
    tigers[i].setType(R.drawable.tiger);
} 
```

这是我的 Piece 课程：

```
package com.camitss.klasikou;

import android.content.Context;
import android.util.Log;
import android.widget.ImageView;

public class Piece extends ImageView{
    private int type;

    public Piece(Context context){
        super(context);
        super.setScaleType(ImageView.ScaleType.CENTER_CROP);
        super.setPadding(4, 4, 4, 4);
    }

    public int getType() {
        return this.type;
    }

    public void setType(int type) {
        this.type = type;
    }
} 
```

这是我的 MainActivity.java

```
package com.camitss.klasikou;
import com.camitss.klasikou.R;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.Gravity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.GridView;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;

public class MainActivity extends Activity implements OnClickListener{

private LinearLayout llNewGame;
private LinearLayout llInstruction;
private LinearLayout llOption;
private LinearLayout llAbout;
private LinearLayout llCow;
private LinearLayout llTiger;

private RelativeLayout p_new_game;
private RelativeLayout p_instruction;
private GridView p_fighting;
public static ImageAdapter imgAdt;
Context context;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main);

    llNewGame = (LinearLayout) findViewById(R.id.l_new_game);
    llNewGame.setOnClickListener(this);

    llInstruction = (LinearLayout) findViewById(R.id.l_instruction);
    llInstruction.setOnClickListener(this);

    llOption = (LinearLayout) findViewById(R.id.l_option);
    llOption.setOnClickListener(this);

    llAbout = (LinearLayout) findViewById(R.id.l_about);
    llAbout.setOnClickListener(this);

    llCow = (LinearLayout) findViewById(R.id.l_cow);
    llCow.setOnClickListener(this);

    llTiger = (LinearLayout) findViewById(R.id.l_tiger);
    llTiger.setOnClickListener(this);

    p_new_game = (RelativeLayout) findViewById(R.id.page_new_game);
    p_instruction = (RelativeLayout) findViewById(R.id.page_instruction);
    p_fighting = (GridView) findViewById(R.id.page_fighting);

    imgAdt = new ImageAdapter(this);

    boardInit();

    p_fighting.setAdapter(imgAdt);
    p_fighting.setGravity(Gravity.CENTER);
}

private void llOff(LinearLayout llNewGame, LinearLayout llInstruction,
        LinearLayout llOption, LinearLayout llAbout) {
    llNewGame.setBackgroundResource(R.drawable.menu_newgame);
    llInstruction.setBackgroundResource(R.drawable.menu_instructions);
    llOption.setBackgroundResource(R.drawable.menu_options);
    llAbout.setBackgroundResource(R.drawable.menu_about);
}

private void wrapInvisible(RelativeLayout p_new_game,
        RelativeLayout p_instruction) {
    p_new_game.setVisibility(View.GONE);
    p_instruction.setVisibility(View.GONE);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v.getId() == R.id.page_fighting) {

    }
    if (v.getId() == R.id.l_cow) {
        p_new_game.setVisibility(View.GONE);
        p_fighting.setVisibility(View.VISIBLE);

    }
    if (v.getId() == R.id.l_tiger) {
        p_new_game.setVisibility(View.GONE);
        p_fighting.setVisibility(View.VISIBLE);
    }
    if (v.getId() == R.id.l_new_game) {
        llOff(llNewGame, llInstruction, llOption, llAbout);
        wrapInvisible(p_new_game, p_instruction);
        llNewGame.setBackgroundResource(R.drawable.menu_newgame_on);
        p_new_game.setVisibility(View.VISIBLE);
    }
    if (v.getId() == R.id.l_instruction) {
        llOff(llNewGame, llInstruction, llOption, llAbout);
        wrapInvisible(p_new_game, p_instruction);

        llInstruction.setBackgroundResource(R.drawable.menu_instructions_on);
        p_instruction.setVisibility(View.VISIBLE);
    }
    if (v.getId() == R.id.l_option) {
        llOff(llNewGame, llInstruction, llOption, llAbout);
        llOption.setBackgroundResource(R.drawable.menu_options_on);
    }
    if (v.getId() == R.id.l_about) {
        llOff(llNewGame, llInstruction, llOption, llAbout);
        llAbout.setBackgroundResource(R.drawable.menu_about_on);
    }
}

public void boardInit(){
    Piece[] tigers = new Piece[4];
    for(int i = 0; i < tigers.length; i++) {
        tigers[i] = new Piece(context);
        tigers[i].setType(R.drawable.tiger);
    }
}
} 
```

这是我的 ImageAdapter.java

```
package com.camitss.klasikou;

import android.content.Context;
import android.database.DataSetObserver;
import android.view.View;
import android.view.ViewGroup;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.ListAdapter;

public class ImageAdapter implements ListAdapter {
private Context mContext;
public Integer[] board = {0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0};

public ImageAdapter(Context c) {
    mContext = c;
}

public void setObjectToBoard(int type, int position) {
    board[position] = type;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return this.board.length;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return this.board[position];
//      return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public int getItemViewType(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;

    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(57, 58));
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(board[position]);
    return imageView;
}

@Override
public int getViewTypeCount() {
    // TODO Auto-generated method stub
    return 1;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean isEmpty() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void registerDataSetObserver(DataSetObserver observer) {
    // TODO Auto-generated method stub

}

@Override
public void unregisterDataSetObserver(DataSetObserver observer) {
    // TODO Auto-generated method stub

}

@Override
public boolean areAllItemsEnabled() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean isEnabled(int position) {
    // TODO Auto-generated method stub
    return false;
}

} 
```

问题是无法向该数组添加新对象。这有什么问题，我该怎么办？

错误：

```
03-12 10:36:17.376: E/AndroidRuntime(1331): FATAL EXCEPTION: main
03-12 10:36:17.376: E/AndroidRuntime(1331): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.camitss.klasikou/com.camitss.klasikou.MainActivity}: java.lang.NullPointerException
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.os.Looper.loop(Looper.java:137)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at java.lang.reflect.Method.invoke(Method.java:511)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at dalvik.system.NativeStart.main(Native Method)
03-12 10:36:17.376: E/AndroidRuntime(1331): Caused by: java.lang.NullPointerException
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.view.ViewConfiguration.get(ViewConfiguration.java:314)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.view.View.<init>(View.java:2693)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.widget.ImageView.<init>(ImageView.java:104)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at com.camitss.klasikou.Piece.<init>(Piece.java:9)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at com.camitss.klasikou.MainActivity.boardInit(MainActivity.java:134)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at com.camitss.klasikou.MainActivity.onCreate(MainActivity.java:66)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.app.Activity.performCreate(Activity.java:4465)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-12 10:36:17.376: E/AndroidRuntime(1331):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
03-12 10:36:17.376: E/AndroidRuntime(1331):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:23:58.297

而不是`Piece.length`在你的循环中，它应该是`tigers.length()`和`cows.length()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:39:26.430

您忘记提供`context`非`null`引用，并且由于`Context`finally 在您的类的超类中使用`Piece`，因此 NPE 一直被扔到那里。由于您正在使用 Activity 更改代码，因此它使用`this`关键字：

```
public void boardInit(){
    Piece[] tigers = new Piece[4];
    for(int i = 0; i < tigers.length; i++) {
        tigers[i] = new Piece(this);
        tigers[i].setType(R.drawable.tiger);
    } 
```

或者，如果您真的热衷于使用`context`，请在调用后给它一个值`super.onCreate()`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    context = this; //add this line 
```

# python - 在单独的类中更新 tkinter 画布

> ID：15352182
> 
> 赞同：0
> 
> 时间：2013-03-12T02:21:06.373
> 
> 标签：python, tkinter

现在我在土地类中有下面的代码来打印游戏板。有一个单独的类来保存游戏动作，因此每次游戏中发生某些事情时都会调用此函数。在这一点上，该类构建了一个新的画布，并且每次都一遍又一遍地破坏旧的画布。有没有办法让它简单地更新画布而不是破坏它。

```
def printBoard(self):
        master = Tk()

        w = Canvas(master, width=503, height=503)
        w.pack()
        for x, row in enumerate(self.a):
            for y, cell in enumerate(row):
                if self.a[x][y][1] == 'C':
                    w.create_rectangle([3 + 50 * y, 3 + 50 * x, 53 + 50 * y, 53 + 50 * x ], fill="black")
                    w.create_text(3 + 50 * y, 3 + 50 * x, anchor=NW, fill="white", text=self.a[x][y][0][1])
                else:
                    if self.a[x][y][0][0] == 'f':     
                        w.create_rectangle([3 + 50 * y, 3 + 50 * x, 53 + 50 * y, 53 + 50 * x ], fill="green")
                        w.create_text(3 + 50 * y, 3 + 50 * x, anchor=NW, fill="white", text=self.a[x][y][0][1])
                    elif self.a[x][y][0][0] == 'w':
                        w.create_rectangle([3 + 50 * y, 3 + 50 * x, 53 + 50 * y, 53 + 50 * x ], fill="blue")
                        w.create_text(3 + 50 * y, 3 + 50 * x, anchor=NW, fill="white", text=self.a[x][y][0][1])
                    elif self.a[x][y][0][0] == 'X':
                        w.create_rectangle([3 + 50 * y, 3 + 50 * x, 53 + 50 * y, 53 + 50 * x ], fill="brown")
                        w.create_text(3 + 50 * y, 3 + 50 * x, anchor=NW, fill="white", text=self.a[x][y][0][1])
                    elif self.a[x][y][0][0] == 's':
                        w.create_rectangle([3 + 50 * y, 3 + 50 * x, 53 + 50 * y, 53 + 50 * x ], fill="gray")
                        w.create_text(3 + 50 * y, 3 + 50 * x, anchor=NW, fill="white", text=self.a[x][y][0][1])
        master.after(1000, lambda: master.destroy())
        master.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:45:04.813

是的，您可以在创建画布项目时存储它们的 ID，因此它们可用于通过[`coords`](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.coords-method)方法更新其位置并[`itemconfig`](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.itemconfig-method)更改选项（如填充颜色）。

```
# Create
self.ids[x][y] = w.create_rectangle([3 + 50 * y, ...)

# Update
fillcolors = {'f':'green', 'w':'blue', 'X':'brown', 's':'gray'}
fill = "black" if self.a[x][y][1] == 'C' else fillcolors[self.a[x][y][0][0]]
w.coords(self.ids[x][y], [3 + 50 * y, ...)
w.itemconfig(self.ids[x][y], fill=fill) 
```

请注意，有很多重复的代码，因此您可以使用已经映射颜色的辅助字典，然后避免嵌套条件。

# python - 使用 rml 更改 openerp 7 页眉/页脚

> ID：15352183
> 
> 赞同：3
> 
> 时间：2013-03-12T02:21:13.737
> 
> 标签：python, header, report, footer, openerp

我目前正在搜索在 openerp 7 中生成标头的 rml 文件是什么。我找不到它...我找到了 server/openerp/addons/base/report/corporate_defaults.xml 但没有...或者可能在那里是在报告生成之前缓存 rml 的缓存吗？

提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:46:09.603

您可以在 res_company_view.xml 文件服务器端找到 rml 报告的页眉/页脚。

文件路径是：`server/openerp/addons/base/res/res_company_view.xml`

并且此页眉页脚的值设置为默认值：
`server/openerp/addons/base/res/res_company.py`

问候

# css - 容器 div 不扩展到内部 div 内容

> ID：15352193
> 
> 赞同：1
> 
> 时间：2013-03-12T02:22:11.067
> 
> 标签：css, html, height

我整晚都在寻找，我必须做错事，因为我已经看到这个问题或类似的问题之前已经发布过。我很抱歉需要再次询问。

我有一个包含其他 div 的容器 div，它不会随内部 div 内容扩展。代码可以在这里找到：http: [//jsfiddle.net/pR7bq/](http://jsfiddle.net/pR7bq/)

我无法移除高度：100%；来自#container，因为它也需要容纳更少的内容。我已经看到提到使用

```
<br style="clear:both" /> 
```

但我要么使用不正确，要么无法正常工作。我在这里找到了对相同或类似问题的写得很好的答案：[我可以使用哪些“clearfix”方法？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)，但是，我不知道将代码放在哪里。我最好的尝试都失败了。我也尝试过使用溢出属性，但我不希望滚动条出现在 div 而不是页面上，如果这有意义的话。

感谢所有帮助，并提前感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:25:33.667

将此用于您的容器样式：

```
#container{
    width:80%;
    background:#f6f6f6;
    height:auto;
    margin: 0 auto;
} 
```

通过使用自动高度，浏览器尝试确定将覆盖其所有子元素的元素的高度。

当您使用 height: 100% 时，它根据元素容器的父高度确定高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:16:09.270

现在习惯了`min-height`不**身高**

**像这样**

```
#container{
height:100%; // remove this line
min-height:100%; // add this line 
} 
```

**[现场演示](http://jsfiddle.net/pR7bq/2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:26:29.330

我通常只是在我的 css 中抛出一个这样的类

```
.iefix{ clear: both;font-size: 1px;} 
```

然后我把它放在一个 div 下的 div 下，这些 div 在 IE 中没有表现

```
<div class="wrap">
    <div class="left">
    </div>
    <div class="right">
    </div>
    <div class="iefix"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T06:38:54.863

使用高度自动或不定义高度来解决您的问题

# rename - Stata：重命名变量

> ID：15352196
> 
> 赞同：2
> 
> 时间：2013-03-12T02:22:26.760
> 
> 标签：rename, stata

我有很多变量，例如：

```
slsoke slsoke_g jfue jfue_g iii iii_g bsueo bsueo_g ... 
```

还有其他变量没有这对，例如hid，pid，...

我必须删除不以_g结尾的变量，并将“_g”变量重命名为不带_g的变量。因此，例如，“slsoke”的值应该是过时的，“slsoke”应该是“slsoke_g”的精确副本。我如何编写代码来进行 Stata 中的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:46:05.523

你可能可以这样写：

```
// example

clear
set obs 50
gen hid = _n
gen pid = floor(_n/5)
local y = "slsoke jfue iii bsueo"
foreach x of local y {
    gen `x' = runiform()
    gen `x'_g = int(10 * `x')
}

// the code

local k ""

qui d, varl
local l = r(varlist)
foreach x of local l {
    cap qui replace `x' = `x'_g
    if !_rc local k = "`k' `x'"
}

di as err "`k'"
keep `k'

// bye 
```

智能正则表达式可能有一个更短的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:34:58.457

这里最困难的事情是为所有以 . 结尾的变量名获取前缀`_g`。可以这样做：

```
unab which : *_g 
local which : subinstr local which "_g " " ", all 
```

细节至关重要。您正在寻找`_g`名称的末尾，因此需要额外的空间，但您也需要替换空间。现在您可以循环访问该组前缀：

```
foreach w of local which { 
     drop `w'_g 
     rename `w' `w'_g 
} 
```

（稍后编辑）也许你想要更像这样的东西。

```
foreach w of local which { 
    replace `w' = `w'_g 
    drop `w'_g 
    rename `w' `w'_g 
} 
```

无论你想要什么，如前所述，获取前缀似乎是最困难的一点，剩下的就是对前缀的循环。

# recursion - 我是否正确地跟踪了这个递归代码？

> ID：15352199
> 
> 赞同：0
> 
> 时间：2013-03-12T02:22:46.043
> 
> 标签：recursion

```
public static void main( String[] args)
{
     down_up( 3 );
}

public static void down_up( int n )
{
    System.out.println(" Level: " + n);

    if( n > 1 )
    down_up(n - 1);
    System.out.println(" LEVEL: " + n);
 } 
```

}

我是递归的新手，我只想确保我正确地跟踪它。

我得到了什么：

```
Level: 3
Level: 2
Level: 1
LEVEL: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:25:12.060

几乎。你必须记住你的调用堆栈：

```
Level: 3
Level: 2
Level: 1
LEVEL: 1
LEVEL: 2
LEVEL: 3 
```

# javascript - 单击并重绘条形图时 D3 更新数据集

> ID：15352201
> 
> 赞同：6
> 
> 时间：2013-03-12T02:22:54.500
> 
> 标签：javascript, d3.js, redraw, mouseclick-event

我是 d3 和 javascript 的新手，我在更新数据集以及重绘条形时遇到了麻烦。这是到目前为止我一直在查看的代码。

[http://jsfiddle.net/TwEhT/2/](http://jsfiddle.net/TwEhT/2/)

我有一个函数 clickEvent，它是在点击任何栏时触发的。此函数提示输入值。

```
function clickEvent() 
{
    var op = prompt("Please enter the value", "");
}; 
```

我需要做的是更新点击索引处的数据集，并重新绘制矩形，以便它们反映对数据集的更改。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T03:23:09.673

对于一个非常简单的示例，您可以直接更新数据集，并将条形绘制代码放在一个 render() 函数中，您可以调用该函数来重新渲染更改。

```
var dataset = [...];

function render() {
    // bind dataset to rects and draw here
}

function clickEvent(d, i) {
    var op = prompt("Please enter the value", d);
    dataset[i] = parseInt(op, 10);
    render();
}; 
```

这是您的代码中的一个运行示例：http: [//jsfiddle.net/findango/TwEhT/4/](http://jsfiddle.net/findango/TwEhT/4/)

# java - 我可以出于测试目的修改字段的值吗？

> ID：15352202
> 
> 赞同：0
> 
> 时间：2013-03-12T02:22:57.090
> 
> 标签：java, reflection, singleton, junit4, java-7

我在更改字段值以进行测试时遇到问题。

尽管单例存在问题，但我想将它用于我的日志文件管理器。我实际上考虑过是否应该重新设计我的设计，但很高兴[我](http://www.ibm.com/developerworks/webservices/library/co-single/index.html#h4)的决定可能是好的。

不过我想测试一下。特别是如果代码在 Windows 和 linux 上运行，也许是我现在想不到的其他地方。

这个想法是在当前目录中创建一个名为“testlogs”的测试目录，删除它并使用它。所以我可以确定我至少在当前目录中具有写入权限，或者我可以通知用户不会写入任何日志文件，或者我可以提示他选择另一个位置等。

在以下代码中，我不断获取我的“日志”目录。我希望能够保留真正的“日志”（如果它们存在）。

为什么我不能更改 的值`dirname`？

```
package com.home.app.logger.LogsMngr;
public class LogsMngr {
    private static class Holder {
        public static String dirname = "logs";
        public static final LogsMngr INSTANCE = new LogsMngr(dirname);
    }

    private LogsMngr(String dirname){
         createDirectory(dirname);
    }

    private createDirectory(String dirname) {
         // logic to create a directory on the filesystem
    }

    public static LogsMngr getInstance() {
        return Holder.INSTANCE;
    }
}

@RunWith(SeparateClassLoaderRunner.class)
public class Test {

    LogsMngr lmngr;

    @Test
    public void test() {
        try {
            // Remove existing directory
            TUtils.rmfDirectory("testlogs");

            // Set directory name
            String className = "com.home.app.logger.LogsMngr$Holder";
            Class[] memberClasses = LogsMngr.class.getDeclaredClasses();

            Field dirnamefield = null;

            for(int i=0; i<memberClasses.length; i++) {

                if(memberClasses[i].getName().equals(className)) {

                    dirnamefield = memberClasses[i].getField("dirname");
                }
            }
            //TODO catch NullPointerException because of dirname?

            // To prevent from IllegalAccessException:
            dirnamefield.setAccessible(true);

            // Set test directory
            dirnamefield.set(null, "testlogs");

            // Create
            lmngr = LogsMngr.getInstance();
        }
        catch(Exception e) {

            e.printStackTrace();
        }
    }
} 
```

参考：

[单独的ClassLoaderRunner.class](https://stackoverflow.com/questions/42102/using-different-classloaders-for-different-junit-tests)

[Java 语言文档](http://docs.oracle.com/javase/7/docs/api/index.html)

[使用 JUnit 测试具有私有方法的类的正确方法是什么？](https://stackoverflow.com/questions/34571/whats-the-proper-way-to-test-a-class-with-private-methods-using-junit)

[我可以使用反射发现 Java 类的声明内部类吗？](https://stackoverflow.com/questions/471749/can-i-discover-a-java-class-declared-inner-classes-using-reflection)

[The_solution_of_Bill_Pugh](http://en.wikipedia.org/wiki/Singleton_pattern#The_solution_of_Bill_Pugh)

**解决方案：**

```
package com.home.app.logger.LogsMngr;
public class LogsMngr {
    private static String dirname = "logs"; <-- moved out of Holder

    private static class Holder {
        public static final LogsMngr INSTANCE = new LogsMngr(dirname);
    }

    private LogsMngr(String dirname){
         createDirectory(dirname);
    }

    private createDirectory(String dirname) {
         // logic to create a directory on the filesystem
    }

    public static LogsMngr getInstance() {
        return Holder.INSTANCE;
    }
}

@RunWith(SeparateClassLoaderRunner.class)
public class Test {

    LogsMngr lmngr;

    @Test
    public void test() {
        try {
            // Remove existing directory
            TUtils.rmfDirectory("testlogs");

            Field dirnamefield = LogsMngr.class.getDeclaredField("dirname");

            // To prevent from IllegalAccessException:
            dirnamefield.setAccessible(true);

            // Set test directory
            dirnamefield.set(null, "testlogs");

            // Create
            lmngr = LogsMngr.getInstance();
        }
        catch(Exception e) {

            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:23:54.457

这一行：

```
Class[] memberClasses = LogsMngr.class.getDeclaredClasses(); 
```

将导致`LogsMngr.Holder`被初始化，导致该字段也被初始化，因此之后的任何时间`INSTANCE`更改都没有效果。`dirname`

要完成您想要完成的工作，您必须能够在`dirname`不首先初始化包含它的类的情况下设置该字段，我认为这在 Java 中是不可能的，尽管我有兴趣在这一点上得到纠正。但是，我相信您只需`dirname`移出`Holder`和移入`LogsMngr`. 然后`LogsMngr.dirname`在使用任何东西之前简单地设置为你想要的任何值`LogsMngr.Holder`。

# asp.net-mvc-4 - MVC4使用ActionLink和TempData将数据从Controller中的文本框发送到View

> ID：15352206
> 
> 赞同：1
> 
> 时间：2013-03-12T02:23:24.173
> 
> 标签：asp.net-mvc-4, actionlink, tempdata

有没有办法利用 TempData 和 ActionLink 将数据从视图传递到控制器。我有一个具有客户端验证的视图，我需要在不使用提交按钮的情况下从页面上的文本框中更新下拉列表。当使用两个提交类型按钮时，客户端验证会标记所有尚未填写的字段。本质上，我希望能够将用户定义的类别添加到下拉列表中，而不必只为文本框跳转到不同的视图和提交按钮。

我不确定我是否可以做这样的事情：

```
<input type="text" name="NewCat" value="@TempData["newCat"]" placeholder="New Catagory"/> 
```

虽然我无法让它工作......

**风景：**

```
@model Exercise4.Models.Quote

@{
    ViewBag.Title = "Create";
}

<h2>Create New Quote</h2>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Quotation Creation</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.CatagoryID, "Catagory")
    </div>
    <div class="editor-field">
        @Html.DropDownList("CatagoryID", String.Empty)
        @Html.ValidationMessageFor(model => model.CatagoryID)
    </div>

    <aside>
        @using (Html.BeginForm("NewCatagory","Quote"))
        {
            <input type="text" name="NewCat" value="@TempData["newCat"]" placeholder="New Catagory"/>
            @Html.ActionLink("Add Catagory","NewCatagory","Quote")

        }
    </aside>

    <div class="editor-label">
        @Html.LabelFor(model => model.QName)
    </div>
    <div class="editor-field">

        @Html.TextBoxFor(model => model.QName)
        @Html.ValidationMessageFor(model => model.QName)

    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.QAuthor)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.QAuthor)
        @Html.ValidationMessageFor(model => model.QAuthor)
    </div>
    <p>
        <input type="submit" value="Create" />

    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

**控制器部分：**

```
//
// Create New Catagory
public ActionResult NewCatagory()
{
    string value = TempData["newCat"] as string;
    if(!String.IsNullOrWhiteSpace(value))
    {
        Catagory cat = new Catagory();
        cat.CatName = value;
        db.Catagories.Add(cat);
        db.SaveChanges();
    }

    ViewBag.CatagoryID = new SelectList(db.Catagories, "CatagoryID", "CatName");
    return RedirectToAction("Create");
} 
```

任何建议将不胜感激，无论是如何使这项工作或更优雅一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:35:35.443

如果您想在客户端更新数据，请使用 jQuery - 特别是如果您不需要返回服务器来获取数据。使用元素的单击事件来处理和操作您的数据客户端。就像是

```
$("#addmore").on('click', function() {
    $("#someSelect").append('<option value="someoption">Some Option</option>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T18:55:29.867

这是我的解决办法。

我渲染了一个局部视图

主视图

```
<div class="asideRight">
    <fieldset>
        <legend></legend>
        @Html.Partial("_AddCat", new Exercise4.Models.Category())
    </fieldset>
</div> 
```

局部视图

```
@model Exercise4.Models.Category

<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

@using (Html.BeginForm("addCat", "Quote")) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend class="myLegend">Create New Category</legend>

        <div class="editor-field">
            @Html.EditorFor(model => model.CatName)
        </div>

        <p>
            <input class="mySubmit" type="submit" value="Create" />
        </p>
    </fieldset>
    <div class="myValidation">
        @Html.ValidationMessageFor(model => model.CatName)
        @Html.ValidationMessage("")
    </div>
} 
```

这允许我在返回创建视图之前回发到控制器并添加新类别

控制器方法

```
 [HttpPost]
    [Authorize]
    public ActionResult addCat(Category cat)
    {
        if (cat.CatName != null)
        {
            bool exists = db.Categories.Any(n => n.CatName.ToLower() == cat.CatName.ToLower());
            if (!exists)
            {
                db.Categories.Add(cat);
                db.SaveChanges();
            }
            else
            {
                ModelState.AddModelError("", "You entered a duplicate Category Name");
            }
        }

        ViewBag.CategoryID = new SelectList(db.Categories.OrderBy(n => n.CatName), "CategoryID", "CatName");
        return RedirectToAction("Create");
    } 
```

# apache-flex - 第二次重新加载 swf 会慢 2 秒

> ID：15352209
> 
> 赞同：0
> 
> 时间：2013-03-12T02:23:36.437
> 
> 标签：apache-flex

启动浏览器时第一次加载 SWF 需要 5 秒。然后，当我在浏览器中重新加载时，需要 7 秒（以及所有后续加载）需要 7 秒。

当我重新启动浏览器时，又需要 5 秒钟。（并且重新加载需要 7 秒）。

它具有非常一致的可复制性。

关于这可能是什么的任何想法？这很常见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:26:46.373

我将从上面的评论中回答我自己的问题：

我能够弄清楚。我试图嵌入我的 Flash 的 div 组件不可见，因此（我猜）Flash 决定给它一个较低的渲染优先级。一旦我使 div 可见，一切都很好。

# 32bit-64bit - uname 输出显示 64 位硬件上的 32 位内核

> ID：15352210
> 
> 赞同：0
> 
> 时间：2013-03-12T02:23:46.463
> 
> 标签：32bit-64bit

我没有这个配置，所以想向您了解一下。

如果您在 64 位硬件（例如 Core 2 Duo、i3、i5、i7）上有一个 32 位 Linux 内核，那么您会得到`uname -i`和`uname -m`的哪些输出`uname -p`？**请在此处粘贴此内容。**

三者中哪一个可以果断地告诉我我的内核类型？

我计划从此或`getconf LONG_BIT`bash 脚本中获取输出，并确定是使用 CMake 仅为 32 位还是为 32 位和 64 位构建我的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:59:17.750

我觉得你的想法有问题。

我有一台 CPU 是 Intel(R) Core(TM)2 Duo CPU 的 PC，所以硬件肯定支持 64 位，但我安装的是 32 位 Linux 系统（RedHat Enterprise Linux Server 5.4，Tikanga）。以下是 uname -i、uname -m、uname -p 的输出：

```
[root@build-server-for-9K proc]# uname -i
i386
[root@build-server-for-9K proc]# uname -m
i686
[root@build-server-for-9K proc]# uname -p
i686
[root@build-server-for-9K proc]# getconf LONG_BIT
32 
```

所有输出显示 Linux 内核构建为 32 位。输出不显示硬件功能。

所以我认为“getconf”和“uname”都不能给你指导是构建32位内核还是64位内核。

但是 /proc/cpuinfo 可以为您提供有关 CPU 硬件能力的信息，例如是否支持 64 位。

获得硬件能力后，您可以决定只构建 32 位或 32 位和 64 位内核。

希望上面的解释能给你一些帮助。

我还附上了“cat /proc/cpuinfo”的部分结果：

```
model name      : Intel(R) Core(TM)2 Duo CPU     E6550  @ 2.33GHz

flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc pni monitor ds_cpl vmx smx est tm2 cx16 xtpr lahf_lm 
```

# java - 是否可以重复倒计时？

> ID：15352211
> 
> 赞同：6
> 
> 时间：2013-03-12T02:23:54.600
> 
> 标签：java, android, timer

我想知道是否可以`CountDownTimer`无限重复？

我想做一个盲测，当计时器结束时改变歌曲并用另一首歌重新开始。

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jeu);

    int timeinminutes=1;

    new CountDownTimer(timeinminutes*21000, 1000) 
    {

        TextView jeutimer = (TextView) findViewById(R.id.jeu_timer);

         public void onTick(long millisUntilFinished) 
         {
             long scnds=0;
             scnds=(millisUntilFinished/1000);
             jeutimer.setText( "" + scnds);
         }

         public void onFinish() 
         {

         }
  }.start(); 
```

我的问题是没有“重启”功能，想无限重启倒计时

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-25T08:33:59.030

你可以重新启动它-

```
 timer =new CountDownTimer(360000,3000) {

        @Override
        public void onTick(long millisUntilFinished) {

            //Some work

        }

        @Override
        public void onFinish() {
            timer.start(); // start it again after it finishes

        }
    }.start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-23T07:35:45.763

在 onFinish() 方法中调用“this.start”也可以正常工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T02:59:45.080

只需为计时器保存一个参考：

```
CountDownTimer timer;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jeu);

    int timeinminutes=1;

    timer = new CountDownTimer(timeinminutes*21000, 1000) 
    {

        TextView jeutimer = (TextView) findViewById(R.id.jeu_timer);

         public void onTick(long millisUntilFinished) 
         {
             long scnds=0;
             scnds=(millisUntilFinished/1000);
             jeutimer.setText( "" + scnds);
         }

         public void onFinish() 
         {

         }
  }.start(); 
```

现在，您可以随时使用以下命令重新启动它：

```
timer.start(); 
```

并停止它：

```
timer.cancel(); 
```

# javascript - 两种构建 html 的方式——.html() 和 .append()

> ID：15352215
> 
> 赞同：1
> 
> 时间：2013-03-12T02:24:05.857
> 
> 标签：javascript, jquery

在 jQuery 中，我知道我们可以使用 替换对象的 HTML `.html(html code here)`，也可以使用其中一种方法（`append`、`appendTo`、`prepend`等）来实现`.html(...)`.

但是这两种方式有什么区别呢？

**更新**

我想我应该发布我的代码以使我的问题更清楚，请查看它。

```
$('<a>close</a>').click(function() {
            alert("test");
        }).appendTo($('.widget-head'));

var sHtml = $('.widget-head').wrap('<p>').parent().html();
$(currentTmpContainer).html(resultHtml); 
```

（这只是一个代码片段。我认为您会理解它。谢谢。）
最后，我发现这`.click`在我的示例中不起作用。我想原因是因为我使用的是`.html()`而不是`.append()`. 这是对的吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:27:06.973

1.  随着`.html`您覆盖内容，同时`.append`您将内容添加到标签的末尾。
2.  `html`仅接受原始字符串，`append`您也可以使用 jQuery 对象。

例子：

```
$('#foo').html($('<input>')); //invalid!
$('#foo').append($('<input>')); //Valid! 
```

有事件：

```
var $input = $('<input>').click(function(){
    alert('foo');
});

$('#foo').append($input); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:36:18.637

我倾向于使用 .html() 来更改元素的文本。例如

```
$('.myElement').html('Hello, World!'); 
```

这会导致类似

```
<p class='myElement'>Hello, World!</p> 
```

我使用 .append() 将新元素添加到现有元素。例如

```
$('.myElement').append($('<span>Inner Element!</span>')); 
```

这导致

```
<p class='myElement'><span>Inner Element!</span></p> 
```

我使用 .append() 的原因是它允许我使用 jQuery 来构建新元素。例如

```
var newElement = $('<span>Inner Element!</span>').click(function(e){ alert("Hello!"); });
$('.myElement').append(newElement); 
```

# python - 根据单独文件中的条目从 FASTA 文件中提取序列

> ID：15352219
> 
> 赞同：1
> 
> 时间：2013-03-12T02:24:32.530
> 
> 标签：python, biopython

我有两个文件。

文件 1：包含基因序列的 FASTA 文件，格式如下：

```
>PITG_00002 | Phytophthora infestans T30-4 conserved hypothetical protein (426 nt)
ATGCATCGCTCGGGTTCCGCACGGAAAGCCCAAGGTCTGGGATTACGGGGTGGTGGTCGG
TTACACTTGGAATAACCTCGCAAATTCAGAATCTCTACAGGCTACGTTCGCGGATGGAAC
>PITG_00003 | Phytophthora infestans T30-4 protein kinase (297 nt)
ATGACGGCTGGGGTCGGTACGCCCTACTGGATCGCACCGGAGATTCTTGAAGGCAAACGG
TACACTGAGCAAGCGGATATTTACTCGTTCGGAGTGGTTTTATCCGAGCTGGACACGTGC
AAGATGCCGTTCTCTGACGTCGTTACGGCAGAGGGAAAGAAACCCAAACCAGTTCAGATC
>PITG_00004 | Phytophthora infestans T30-4 protein kinase, putative (1969 nt)
ATGCGCGTGTCTGGTCTCCTTTCAATTCTTGCAGCCACTTTGACCACGGCCCAAGACTAC 
```

文件 2：一个简单的文本文件，仅包含基因的登录标识。像这样。

```
PITG_00003
PITG_00005
PITG_00023 
```

文件 2 中的每个条目都在文件 1 中的某个位置，但并非文件 1 中的每个条目都在文件 2 中。我需要从文件 1 中删除不在文件 2 中的所有条目。我觉得 biopython 中必须有一些东西可以帮助我的模块，我只是不知道是什么。例如，我最初认为我可以使用该`SeqIO.parse`函数从我的 FASTA 文件中仅提取入藏，但这实际上只是让我得到两个入藏号文件。我不知道如何有选择地提取另一个文件中的加入。也许就像将文件 2 中的所有条目读入字典，然后将该条目与其在文件 1 中的匹配条目相关联，并用于`SeqIO.parse`提取整个序列......但我真的不知道......任何人都可以提供的帮助我非常感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T02:48:22.450

尝试这个：

```
f2 = open('accessionids.txt','r')
f1 = open('fasta.txt','r')
f3 = open('fasta_parsed.txt','w')

AI_DICT = {}
for line in f2:
    AI_DICT[line[:-1]] = 1

skip = 0
for line in f1:
    if line[0] == '>':
        _splitline = line.split('|')
        accessorIDWithArrow = _splitline[0]
        accessorID = accessorIDWithArrow[1:-1]
        # print accessorID
        if accessorID in AI_DICT:
            f3.write(line)
            skip = 0
        else:
            skip = 1
    else:
        if not skip:
            f3.write(line)

f1.close()
f2.close()
f3.close() 
```

简要解释这里发生了什么......`accessionids.txt`是你的**File 2**，而`fasta.txt`你的**File 1**。显然，您需要用代码中的实际文件名替换这些文件名。

首先，我们创建一个字典（有时称为散列或关联数组），并为**文件 2**中的每个登录 ID创建一个条目，其中*键*是登录 ID，*值*设置为 1（不是该值真正重要在这种情况下）。

接下来我们查看**文件 1**并再次查看该文件中的每一行。如果文件中的行以开头，`>`那么我们知道它包含一个登录 ID。我们取那行并将其沿 拆分，`|`因为每个带有登录 ID 的行在`|`字符串中都有一个。接下来，按照 指定的分割的第一部分`_splitline[0]`。我们`accessorIDWithArrow[1:-1]`用来切掉字符串中的第一个和最后一个字符，`>`即前面的符号和后面的空格。

此时，`accessorID`现在包含我们期望从**文件 2**获得的格式的加入 ID 。

接下来，我们检查我们之前创建和填充的字典是否将此 Accession ID 定义为键。如果是这样，我们立即将带有 Accession ID 的行写入新文件，`fasta_parsed.txt`并将`skip`“标志”变量设置/重置为`0`. 然后，包含该段的`else`语句`if not skip`将允许将与我们发现的加入 ID 关联的后续行打印到`fasta_parsed.txt`文件中。

对于未在字典中找到的**文件 1**中的登录 ID （不在**文件 2**中），我们不写入行`fasta_parsed.txt`并将`skip`标志设置为 0。因此，直到在**文件 1中找到文件****2**中存在的另一个登录 ID ，将跳过所有后续行。

# java - Java 中使用 BigDecimal 的舍入模式

> ID：15352229
> 
> 赞同：6
> 
> 时间：2013-03-12T02:25:34.247
> 
> 标签：java, rounding, bigdecimal

以下代码使用`RoundingMode.HALF_EVEN`,

```
BigDecimal value1 = new BigDecimal("4.5");
value1=value1.setScale(0, RoundingMode.HALF_EVEN);

BigDecimal value2 = new BigDecimal("6.5");
value2=value2.setScale(0, RoundingMode.HALF_EVEN);

System.out.println(value1+"\n"+value2); 
```

分别显示`4`和`6`。在我看来，它应该分别显示`5`和，`7`因为丢弃的小数部分（在这种情况下为 5）左侧的数字是**奇数**。在这种情况下，它执行`RoundingMode.HALF_UP`

在 的情况下`RoundingMode.HALF_UP`， `RoundingMode.UP`当丢弃的小数部分 >=0.5（这是真的）时执行，否则`RoundingMode.DOWN`执行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T02:28:12.573

该行为在[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/math/RoundingMode.html#HALF_EVEN)中有很好的描述：

> 舍入模式向“最近的邻居”舍入，**除非两个邻居是等距的，在这种情况下，向偶数邻居舍入**。

因此，给定数字 4.5，它正好位于 4 到 5 之间的数字范围的中间，当您调用时：

```
BigDecimal value1 = new BigDecimal("4.5").setScale(RoundingMode.ROUND_HALF_EVEN); 
```

运行时也需要确定要舍入哪个邻居，也就是应该舍入到 4 还是 5？通常它会根据 4.5 更接近哪个值进行舍入，但在这种情况下它接近***两个***邻居。它不是随意选择最终结果，而是选择偶数。这是 的行为`ROUND_HALF_EVEN`。如果您愿意，您可以指定`ROUND_HALF_UP`最终结果是 5，而不是 4。另外，请记住，关于如何舍入的决定取决于最终结果（而不是小数部分）正如您所假设的那样，大十进制数）。

# python - 三元搜索就像二分搜索一样，但将项目除以 3

> ID：15352236
> 
> 赞同：0
> 
> 时间：2013-03-12T02:26:01.173
> 
> 标签：python, python-3.x, binary-search, ternary-search

下面有一个名为“test”的函数。我的程序无法通过测试功能。

这是我的三元搜索代码。三元搜索类似于二分搜索，但不是将所有元素除以二，而是将它们除以三。

为了使用三元搜索，我使用 index2 作为 1/3 项目的分隔符。index1 是 2/3 项的分隔符。

您只需将“高”和“低”分配给 index1 或 index2。这使您可以将列表分为三个部分。High 和 Low 用于查找您应该搜索的划分列表的哪一部分。然后这个过程不断重复，直到高和低的值彼此接近。

seq 是列表中的项目，即。[1,2,3,4,5...] 列表中的项目是按顺序排列的。

关键是我正在寻找的价值

并且 ternary_search 返回键的索引或接近键的数字的索引

玩得开心！干杯!

```
def ternary_search(seq,key):
    length = len(seq)
    left = 0
    right = length
    index = 0
    x = True
    while x and left <= right:
        #focal = (high + low) //3

        if left == right:
            #check similarity between values and key
            return index
        else:
            if right - left > 0:
                index1 = ((right+2*(left))//3)
                index2 = ((2*(right)+left)//3)
                if left == right:
                    x = False
                    return (index1+index2)
                if seq[index1] == key:
                    x = False
                    return index1
                if seq[index2]== key:
                    x = False
                    return index2
                if key<seq[index1]:
                        right = index1 - 1
                else:
                    if key > seq[index1] and key <seq[index2]:
                        right = index2 - 1
                        left = index1 - 1
                    if key > seq[index2]:
                        left = index2+1

    return index

def test():
    seq = []
    for i in range(1,1001):
        seq.append(i)
    for j in range(1,1001):
        is_pass = (ternary_search(seq,j)==j-1)
        assert is_pass == True, "fail the test when key is %d"%j
    if is_pass == True:
        print("=========== Congratulations! Your have finished exercise 2! ============")
if __name__ == '__main__':
    test() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:17:58.040

```
def ternary_search(seq,key):
  length = len(seq)
  left = 0
  right = length
  index = 0
  x = True
  while x and left <= right:
    #focal = (high + low) //3
    if left == right:
        #check similarity between values and key
        return left 

    elif right - left > 0:
        index1 = ((right+2*(left))//3)
        index2 = ((2*(right)+left)//3)
        if seq[index1] == key:
            return index1
        elif seq[index2] == key:
            return index2
        else:
            if key<seq[index1]:
                    right = index1 - 1
            elif key > seq[index1] and key <seq[index2]:
                    right = index2 - 1
                    left = index1 - 1
            elif key > seq[index2]:
                    left = index2+1

return index 
```

顺便说一句，实验室 8 祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:30:39.067

您的错误在该行中：

```
if left == right:
#check similarity between values and key
return index 
```

基本上现在当你的上下值（右和左）相遇时，它们将返回存储在变量索引中的值，但是在你的函数体中你永远不会改变索引的值，所以它总是返回 0。一种方法您的代码工作将是一旦您知道 left==right 检查并查看 value==key 是否存在，如果是，则返回左侧或右侧，因为两者都必须是该值的索引。我用你的代码做了这个，它通过了测试功能。顺便说一句，实验室 8 祝你好运。

# javascript - Phonegap 是否支持 WebRTC？

> ID：15352237
> 
> 赞同：4
> 
> 时间：2013-03-12T02:26:02.430
> 
> 标签：javascript, cordova, webrtc, augmented-reality

我想构建一个增强现实应用程序。[我正在考虑在http://www.wikitude.com/developer](http://www.wikitude.com/developer)使用类似 Wikitude SDK 之类的东西，或者使用我更喜欢的这个 javascript 库[https://github.com/mtschirs/js-objectdetect](https://github.com/mtschirs/js-objectdetect) js-objectdetect，但它依赖于 webRTC 支持，使用现代浏览器当然可以，但我不太确定 PhoneGap 是否也支持它。此外，如果有人知道我如何将我的 3d 模型叠加在一个对象上，那就太好了。我不知道我的 3d 模型需要采用什么文件格式才能与这些增强现实解决方案一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:08:18.083

正如 techfoobar 所说，WebRTC 支持是在**浏览器级别**确定的。
WebRTC 规范**远未完成**。您可以查看草案规范的[当前支持矩阵](http://caniuse.com/#feat=stream)。最新版本的 Firefox、Chrome 和 Opera 支持当前实现。

所有移动浏览器都不会很快支持它。到目前为止，它可以在带有 Chrome 的 Android 上运行，但在 Windows IE 上仍然缺少它。
您唯一可以期待的是一个模拟 WebRTC 界面的**phonegap 插件。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:21:59.710

查看 OpenTok PhoneGap 插件。它不做 WebRTC，但它做视频通信。目前仅适用于 iOS。

[https://github.com/opentok/PhoneGap-Plugin](https://github.com/opentok/PhoneGap-Plugin)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T09:50:59.350

这是 android (chromium) 混合应用程序的完整库[https://crosswalk-project.org/](https://crosswalk-project.org/)

# jquery - 使用 jQuery 进行跨域访问：在 Internet Explorer 中访问子域中的帧失败

> ID：15352240
> 
> 赞同：0
> 
> 时间：2013-03-12T02:26:29.700
> 
> 标签：jquery, internet-explorer, iframe, cross-domain

如果加载时带有源子域的iframe标签已经在文档中，IE9可以访问它，但是如果在文档中插入相同的iframe，IE9就无法访问它（所有其他浏览器都可以）。请参阅下面的代码片段。

这是正常的 IE9 行为还是可以以某种方式修复？谷歌这次没有帮助，所以我非常感谢你在这里的帮助。

**这适用于 Internet Explorer 9 和所有其他浏览器**

example.com 中的主要文件：

```
<div class="container">
    <iframe src="sub.example.com/index.html"></iframe>
</div>
<script>
    document.domain = 'example.com';
    var frame = $('iframe', 'container')
        , el = frame.contents().find('div.hello'); // usually returns 1 element
    if (el.length > 0)
        el.html('Hello'); // sets div content in iframe
    else // sometimes it gets here, if script runs before iframe loads
        frame.on('load', function(){
            el = frame.contents().find('div.hello'); // works if the 1st one fails
            el.html('Hello');
        });
</script> 
```

子域中的文档 (sub.example.com/index.html)：

```
<script>document.domain = 'example.com'</script>
<div class="hello"></div> 
```

**这适用于所有浏览器，但不适用于 IE9（错误：访问被拒绝）**

example.com 中的主要文件：

```
<div class="container"></div>
<script>
    $('div.container').html('<iframe src="sub.example.com/index.html"></iframe>');
    document.domain = 'example.com';
    var frame = $('iframe', 'container')
        , el = frame.contents().find('div.hello'); // throws error

    // ...
</script> 
```

子域中的文档是相同的。

在实际代码中，.container 的内容是由模板函数生成的，因此使用 .html() 将其作为简单文本插入，如示例中所示。

感谢您为使第二个案例在 IE 中工作的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:16:57.337

发生错误是因为在第二种情况下，设置框架的 document.domain 的脚本在框架的加载事件触发后执行。将代码放在 frame.ready() 中并没有帮助 - 在脚本执行之前框架就准备好了。它在所有浏览器中都会发生这种情况，但由于某种原因只会在 IE 中导致错误。

因此，当前的解决方案实际上是一种 hack - 帧准备就绪后 100 毫秒超时，以便帧内的脚本在访问帧之前执行。

# java - 复杂应用中的 Mybatis 注解

> ID：15352242
> 
> 赞同：2
> 
> 时间：2013-03-12T02:26:39.313
> 
> 标签：java, spring, mybatis

我目前正在开发一个在映射器接口中使用 MyBatis 注释的项目，因为我更喜欢 XML 文件，但一直遇到映射关联的问题。

即为使用连接表的一对多关联加载集合。

我知道注释不支持某些关联映射。考虑到限制，是否仍然可以在任何中等复杂的应用程序中将 MyBatis 与 Java 中的映射器接口一起使用，而无需借助 xml 映射文件？

将映射器接口与 xml 映射文件结合起来是否有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:48:18.583

[用户指南](https://mybatis.github.io/mybatis-3/getting-started.html)承认注释格式对于复杂的查询变得笨拙。但是，您可以将注解和 XML 查询定义结合起来，最终的要求是不能有多个同名的定义，无论它是如何定义的。

我目前正在通过[MyBatis Koans](http://thornydev.blogspot.com/2012/05/mybatis-koans-path-to-enlightenment.html)工作——我发现它非常有用。第[8 个练习](https://github.com/midpeter444/mybatis-koans/tree/master/src/test/java/net/thornydev/mybatis/test/koan08)包括一个带有删除方法注释的映射器接口，以及一个用于更新、插入和选择的映射器 XML 文件。一旦我完成了练习，它对我来说没有任何问题。

# jquery - ajax 调用具有唯一 ID 的 jquery 对话框

> ID：15352245
> 
> 赞同：0
> 
> 时间：2013-03-12T02:26:56.490
> 
> 标签：jquery, ajax, dialog

任何人都可以帮忙，...我有一个评论页面，其中包含我想用 ajax 调用对话框的报告/垃圾邮件链接，...我该怎么做，..？在此先感谢，...这是我的代码：

```
<script>

$(function() {
 $('#photo_comments_opener_<?php echo $photo_comment['PhotoComment']['id'] ?>').dialog({
 autoOpen: false,
 width: 500,
 modal: true,
 title: 'Report Photo Comment',

    open: function ()
    {
        $.ajax(function(){
            url: "<?php echo $html->url("/report/photo_comment/" . $photo_comment['PhotoComment']['id']) ?>",
            data: data, 
            type: "post",
            sucess:function(msg){
                $('#photo_comments_opener_<?php echo $photo_comment['PhotoComment']['id'] ?>').html(msg)
            }
        });
   }       

});

  });
</script> 
```

这是链接：

```
<?php echo $html->link(ucfirst(__('report', true)), 'javascript:void(0)', array('id' => "photo_comments_opener_".$photo_comment['PhotoComment']['id'], 'class' => 'report')) ?> 
```

* * *

感谢您的回复 Chintana，...但是我无法成功，...我有一个打开对话框的代码，...但我无法将 ajax 调用放入：

```
<script>
$(function() {
$( "#photo_comments_dialog_<?php echo $photo_comment['PhotoComment']['id'] ?>" ).dialog({
autoOpen: false,
width: 500,
modal: true,
title: 'Report Photo Comment'

});

$( "#photo_comments_opener_<?php echo $photo_comment['PhotoComment']['id'] ?>" ).click(function() {
  $( "#photo_comments_dialog_<?php echo $photo_comment['PhotoComment']['id'] ?>" ).dialog( "open" );
});

});
</script> 
```

这是链接：

```
<?php echo $html->link(ucfirst(__('report', true)), 'javascript:void(0)', array('id' => "photo_comments_opener_".$photo_comment['PhotoComment']['id'], 'class' => 'report')) ?> 
```

这是 ID div：

```
<div id="photo_comments_dialog_<?php echo $photo_comment['PhotoComment']['id'] ?>"></div> 
```

请帮我完成这个，...提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:30:10.547

我的 PHP 不是很好，所以我会尝试围绕 javascript/jquery 构建我的想法

我假设您通过单击按钮或链接来调用显示对话框部分。为什么不像您所做的那样使用 $.ajax 的成功回调更进一步，并在其中显示对话框

类似的东西

```
function displayCommentDialog(){
    $.ajax(function(){
        url: "<?php echo $html->url("/report/photo_comment/" . $photo_comment['PhotoComment']['id']) ?>",
        data: data, 
        type: "post",
        sucess:function(msg){
            $('#photo_comments_opener_<?php echo $photo_comment['PhotoComment']['id'] ?>').html(msg);

            var d = $('#photo_comments_opener_<?php echo $photo_comment['PhotoComment']['id'] ?>').dialog(
                {
                    // all your dialog options
                });

                d.dialog("open");
        }
    });
} 
```

# java - Spring Data JPA 存储库多租户单模式技术

> ID：15352248
> 
> 赞同：1
> 
> 时间：2013-03-12T02:27:20.420
> 
> 标签：java, hibernate, jpa, multi-tenant, spring-data

我刚刚开始使用当前正在使用带有 jpa 存储库的 spring 数据的 spring 应用程序。我计划将该应用程序作为使用单个数据库模式的多租户应用程序。我想弄清楚的是将租户 ID 附加到每个查询的最佳方法。当然，我可以在存储库中编写每个查询以期望租户 id 参数并从本地线程或类似线程中获取租户 id，但我想知道在这种情况下是否有更好的技术？也许有一种我还没有遇到过的更具声明性的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:18:21.630

您正在使用 Spring JPA 而不是一些 JPA 实现（Hibernate、EclipseLink 等）。因此，您需要在 JPA 提供者级别配置多租户。对于休眠 -[见这里](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch16.html)

您也可以检查替代方式 -[这个](http://habrahabr.ru/post/113721/)（警告：里面的俄语）

# socket.io - 使用 Firebase 为 Unity3D 提供后端以创建 MMO

> ID：15352252
> 
> 赞同：3
> 
> 时间：2013-03-12T02:27:38.650
> 
> 标签：socket.io, unity3d, firebase, mmo

Firebase 能否为基于 Unity 的 MMO 实施提供必要的后端？我看到有一个[Unity-socket.io 集成](https://github.com/jouz/socket.io-unity-client/blob/master/ExampleSocketIO.cs)。有人试过 Firebase 吗？MuchDifferent.com 确实提供了支持 Unity MMO 的完整套件。Firebase 可以用来简化架构吗？在什么情况下会建议尝试？不建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T04:42:06.880

Firebase 可用于为 MMO 提供动力，但需要做一些工作才能与 Unity 集成。Unity 为 Unity 播放器和在浏览器中运行的 javascript 之间的通信提供了有限的接口：http: [//docs.unity3d.com/Documentation/Manual/UnityWebPlayerandbrowsercommunication.html](http://docs.unity3d.com/Documentation/Manual/UnityWebPlayerandbrowsercommunication.html)

您可以使用 Application.ExternalCall() 函数调用浏览器并执行 Firebase 操作。回调 Unity 播放器会受到一些限制。您需要在 Firebase 回调中获取信息并将其编组为字符串，因为 Unity 接口仅允许传递单个字符串参数（请参阅上述文档中的 SendMessage）。JSON.stringify() 在这里应该非常有用，然后您将需要一个 JSON 库，无论您在游戏中使用哪种语言。此外，由于 Unity 与其主机平台的集成方式，您需要确保不会在每一帧中来回传递消息（即不要在每一帧中将玩家的位置设置到 Firebase 中）。但是，定期更新不应该造成问题。

好消息是，将这种行为抽象到库中应该不会太难。如果您决定试一试，请告诉我们进展情况，如果遇到任何问题，请随时与我们联系。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-03T19:54:12.190

现在似乎有一个官方的 firebase unity 插件。[github 上的 Firebase-Unity](https://github.com/firebase/Firebase-Unity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T15:39:50.140

您可以使用 IKVM 将 Firebase Java 库转换为 C# 库。只需使用以下命令：

```
ikvmc -out:Firebase.dll Firebase.jar 
```

然后，您可以将刚刚创建的库与所有 IKVM DLL 一起导入 Unity（复制 Assets 文件夹根目录中的所有内容）。

导入所有内容后，启用 Mono SSL 存储和证书（在 Unity 上默认关闭）[http://www.mono-project.com/FAQ:_Security](http://www.mono-project.com/FAQ%3a_Security)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-28T11:50:28.993

我为基于 Rest 的 Unity 创建了一个 Lib，它正在启动，但是可以工作。

如果想查看它的帮助，[FBaseUnity的链接](https://github.com/Tavernari/FbaseUnity)

# c - 如何在 C 中制作自己的头文件？

> ID：15352253
> 
> 赞同：3
> 
> 时间：2013-03-12T02:27:41.513
> 
> 标签：c, file, header, wget

我试图制作自己的头文件，但它不起作用`vim`说

```
wget.h:2:2: error: invalid preprocessing directive #ifndef__WGET_H__
wget.h:3:2: error: invalid preprocessing directive #define__WGET_H__
wget.h:7:2: error: #endif without #if 
```

我的代码是这样的：

```
//wget header file
#ifndef__WGET_H__
#define__WGET_H__

int my_wget (char web_address[]);

#endif /*__WGET_H__*/ 
```

对我来说似乎很好（我读过的例子和我的很相似），我不知道出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:29:41.993

您必须在预处理器关键字和标签之间留一个空格：

```
#ifndef __WGET_H__
#define __WGET_H__ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:30:05.167

改变：

```
#ifndef__WGET_H__
#define__WGET_H__ 
```

到

```
#ifndef __WGET_H__
#define __WGET_H__ 
```

（注意和之间的`#ifndef`空格`__WGET_H__`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T02:37:05.953

一切都很好，只是缺少空间。

```
#ifndef __WGET_H__
#define __WGET_H__

int my_wget (char web_address[]);

#endif __WGET_H__ 
```

您通常会在头文件中使用上述内容，因为在您的项目中，如果您碰巧（不小心）多次包含相同的头文件，那么像这样编写头文件将确保它只包含头文件一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T03:05:44.673

`#define`您需要在预处理器关键字（例如）和标签（即）之间留一个空格`__WGET_H__`。换句话说：

```
#ifndef __WGET_H__
#define __WGET_H__ 
```

将工作。

# html - Firefox 向 CSS 菜单添加额外的填充

> ID：15352257
> 
> 赞同：0
> 
> 时间：2013-03-12T02:28:19.310
> 
> 标签：html, css

我有一个在 IE 8 和 Chrome 中都正确显示的 CSS 菜单。然而，在 Firefox 中，似乎添加了额外的填充并将最后一个菜单项推到下一行。

任何人都可以看看下面的内容并告诉我如何解决它。

下面的CSS：

```
#wrap {
    width: 920px;
    margin: 0 auto;
}

#cssmenu{
    border:none;
    border:0px;
    margin:0px;
    padding:0px;
    font: 67.5% 'Lucida Sans Unicode', 'Bitstream Vera Sans', 'Trebuchet Unicode MS', 'Lucida Grande', Verdana, Helvetica, sans-serif;
    font-size:10px;
    font-weight:bold;   
    }
#cssmenu ul{
    background:#333333;
    height:37px;
    list-style:none;
    margin:0;
    padding:0;
    border-bottom: 3px solid #2580a2;
    }
#cssmenu li{
    float:left;
    padding:0px;

    }
#cssmenu li a{
    background:#333333 url('images/seperator.gif') bottom right no-repeat;
    color:#cccccc;
    display:block;
    font-weight:normal;
    line-height:37px;
    margin:0px;
    padding:0px 22px;
    text-align:center;
    text-decoration:none;
    }

#cssmenu li a:hover, #cssmenu ul li:hover a{
    background: #2580a2;
    color:#FFFFFF;
    text-decoration:none;
    }
#cssmenu li ul{
    background:#333333;
    display:none;
    height:auto;
    padding:0px;
    margin:0px;
    border:0px;
    position:absolute;
    width:225px;
    z-index:200;
    /*top:1em;
    /*left:0;*/
    }
#cssmenu li:hover ul{
    display:block;

    }
#cssmenu li li {
    background:url('images/sub_sep.gif') bottom left no-repeat;
    display:block;
    float:none;
    margin:0px;
    padding:0px;
    width:225px;
    }
#cssmenu li:hover li a{
    background:none;

    }
#cssmenu li ul a{
    display:block;
    height:35px;
    font-size:10px;
    font-style:normal;
    margin:0px;
    padding:0px 10px 0px 15px;
    text-align:left;
    }
#cssmenu li ul a:hover, #cssmenu li ul li:hover a{
    background:#2580a2 url('images/hover_sub.gif') center left no-repeat;
    border:0px;
    color:#ffffff;
    text-decoration:none;
    }
#cssmenu p{
    clear:left;
    } 
```

下面的 HTML：

```
<html>
<head>
<link href="menu_assets/styles.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="wrap">
<div id='cssmenu'>
<ul>
   <li><a href='index.html'><span>HOME</span></a></li>
   <li class='has-sub'><a href='#'><span>OPERATIONS</span></a>
      <ul>
         <li><a href='#'><span>Product 1</span></a></li>
         <li class='last'><a href='#'><span>Product 2</span></a></li>
      </ul>
   </li>
   <li><a href='#'><span>AIRWORTHINESS</span></a></li>
   <li><a href='#'><span>REGULATIONS AND POLICY</span></a></li>
   <li><a href='#'><span>MANUALS AND FORMS</span></a></li>
   <li><a href='#'><span>EDUCATION</span></a></li>
   <li><a href='#'><span>ABOUT CASA</span></a></li>
   <li id='cssmenulast'><a href='#'><span>SERVICES</span></a></li>
</ul>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:08:04.957

现在习惯`display:inline-block;`并在你的**li****中删除** `float left`

 ****像这样**

```
#cssmenu ul{
white-space:nowrap;  // add this line
font-size:0;   // add this line
}

#cssmenu li{
float:left; // remove this line
display:inline-block; // add this line
vertical-align:top; // add this line
font-size:10px;
padding:0px;
} 
```

**[现场演示](http://jsfiddle.net/EHcZb/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:51:37.560

你可以用`display: table`这个。具有 100% 宽度的优势，并且可以按比例缩小以获得更小的分辨率。

```
#cssmenu ul
{
    display: table;
    width: 100%;
}

#cssmenu li
{
    display: table-cell;
    float: none;
}

#cssmenu li a
{
    padding: 0; /* use something like "0 10px" for more homogenous widths */
} 
```

`padding`现在您可以通过使用of来调节项目宽度`#cssmenu li a`。有关示例，请参见此[Fiddle](http://jsfiddle.net/XzgZZ/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:05:51.443

你试过设置`padding-start:0px`

```
#container {
 -moz-padding-start: 0px;    // firefox
 -webkit-padding-start: 0px; // safari
 padding-left: 0px;          // chrome
} 
```

`padding-start`自动应用于`<li>`元素。

Mozilla 文档`padding-start`：[https ://developer.mozilla.org/en-US/docs/CSS/-moz-padding-start](https://developer.mozilla.org/en-US/docs/CSS/-moz-padding-start)

更多关于 webkit-padding 的资源（*也包括 webkit-margin 不包括 FF*）：[http ://www.css-101.org/articles/base-styles-sheet-for-webkit-based-browsers/index.php](http://www.css-101.org/articles/base-styles-sheet-for-webkit-based-browsers/index.php)**

# wro4j - WRO4J：Spring 映射 WRO4J 资源面临的问题

> ID：15352259
> 
> 赞同：1
> 
> 时间：2013-03-12T02:28:21.797
> 
> 标签：wro4j

我们正在为我们的应用程序使用 WRO4J 来生成优化的 Web 资源。我需要使用 spring mvc:resources 来解决这个问题。现在，如果进行配置，则无法加载资源。

我的配置如下。

这里 /img/、/admin/img/ 是 Web 资源中的物理位置，其映射适合于逻辑版本 url。

但是 /wro/ 是根据 WRO4J 要求配置的逻辑位置。有任何方法可以映射 mvc:resources 以映射这样的逻辑位置。

如果你们有什么想法，请在这里分享。

非常感谢你！

-极客-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:18:04.223

wro4j 使用的默认映射`/wro/*`不是必需的。您可以将 WroFilter 映射到任何合适的位置，例如：`*.js`或`*.css`. 当它映射到类似的东西`*.js`时，它将处理所有具有 js 扩展名的请求，如果无法处理，过滤器将链接请求处理。

# android - 如何在不长按主页键的情况下获取最近活动的列表视图

> ID：15352261
> 
> 赞同：0
> 
> 时间：2013-03-12T02:28:32.093
> 
> 标签：android, android-launcher

最近，我正在编写 android 启动器。

我在 Nova Launcher 和 Apex Launcher 中发现了一个功能，它可以通过触摸一个按钮来显示最近任务的视图，而无需长按 home 键。

我也想买，谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:15:07.823

看一眼

```
performGlobalAction(int Action)
GLOBAL_ACTION_RECENTS 
```

在android API文档[这里]： http: [//developer.android.com/reference/android/accessibilityservice/AccessibilityService.html#performGlobalAction(int)](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html#performGlobalAction(int))

好吧，我想我这次找到了真正的解决方案，在 [这里] 检查这个线程： [Android：以编程方式打开“最近的应用程序”对话框](https://stackoverflow.com/questions/14267482/android-programmatically-open-recent-apps-dialog)

# windows - 如何在 Windows 批处理文件中拆分字符串？

> ID：15352263
> 
> 赞同：0
> 
> 时间：2013-03-12T02:28:40.700
> 
> 标签：windows, string, batch-file, split

我正在尝试在 Windows 批处理文件中拆分并创建一个新字符串，但我不知道该怎么做。

我正在尝试将其转换为：

```
Crysis3_2560x1440 
```

对此：

```
Crysis 3 - 2560x1440 
```

接着：

```
HD7970CrossFire 
```

对此：

```
HD 7970 CrossFire 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:56:50.423

**编辑**：这是管理评论中提到的特殊情况的新版本：

```
@echo off
setlocal EnableDelayedExpansion

for /F %%a in (inputFile.txt) do (
   set string=%%a
   echo Original: !string!
   call :Splint string
   echo Modified: !string!
)
goto :EOF

:Splint string
set string=!%1!
rem Change underscore by space-dash-space
set string=%string:_= - %
rem Separate the string at first group of digits or space
for /F "tokens=1* delims=0123456789 " %%a in ("%string%") do (
   set first=%%a
   set last=%%b
)
rem Eliminate first part from middle
set middle=!string:%first%=!
rem Eliminate last part from middle, if exists
if defined last set middle=!middle:%last%=!
rem Eliminate spaces from middle
set middle=%middle: =%
rem Assemble the result
if defined middle (
   set %1=%first% %middle% %last%
) else (
   set %1=%first% %last%
)
exit /B 
```

输出：

```
Original: Crysis3_2560x1440
Modified: Crysis 3 - 2560x1440
Original: HD7970CrossFire
Modified: HD 7970 CrossFire
Original: Skyrim_2560x1440
Modified: Skyrim - 2560x1440
Original: SleepingDogs_2560x1440
Modified: SleepingDogs - 2560x1440
Original: GTX680
Modified: GTX 680 
```

安东尼奥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:26:27.310

您可以使用这些片段作为基础...

```
set in=Crysis3_2560x1440
set out=!in:_= - !
set in
set out 
```

和...

```
set in=HD7970CrossFire
set out=!in:HD7970CrossFire=HD 7970 CrossFire!
set in
set out 
```

虽然我只是不明白你为什么不去

```
set str=HD 7970 CrossFire 
```

# objective-c - 为什么在我的纸牌游戏中删除卡片的setter方法不影响运行它？

> ID：15352265
> 
> 赞同：0
> 
> 时间：2013-03-12T02:28:54.490
> 
> 标签：objective-c, cocoa-touch

我正在学习斯坦福的课程，我们为游戏创建了第一个视图控制器，并创建了一个`IBOutletCollection`类型`UIButton`来表示卡片。

现在，在讲座中，他创建了一个 setter 方法：

```
-(void) setCardButtons:(NSArray *)cardButtons {

    _cardButtons = cardButtons;
   [self updateUI];
} 
```

当我评论这种方法并尝试添加更多卡片时，它工作正常。你能解释一下为什么会这样吗？

这是我的 CardGameViewController.m：

```
#import "CardGameViewController.h"
#import "PlayingCardsDeck.h"
#import "CardMatchingGame.h"

@interface CardGameViewController ()

@property (weak, nonatomic) IBOutlet UILabel *flipsLabel;
@property (weak, nonatomic) IBOutlet UILabel *notificationLabel;
@property (weak, nonatomic) IBOutlet UILabel *scoreCounter;
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *cardButtons;

@property (strong, nonatomic) CardMatchingGame *game;
@property (nonatomic) int flipsCount;

@end

@implementation CardGameViewController

//creating the getter method that creates a new card game.
-(CardMatchingGame *) game {

    if (!_game) _game = [[CardMatchingGame alloc] initWithCardCount:self.cardButtons.count usingDeck:[[PlayingCardsDeck alloc] init]];
    return _game;
}

//creating a setter for the IBOutletCollection cardButtons
-(void) setCardButtons:(NSArray *)cardButtons {

    _cardButtons = cardButtons;
   [self updateUI];
}

//creating the setter for the flipCount property. Whick is setting the flipsLabel to the right text and adding the number of counts.
-(void) setFlipsCount:(int)flipsCount {

    _flipsCount = flipsCount;
    self.flipsLabel.text = [NSString stringWithFormat:@"Flips: %d", self.flipsCount];

}

-(void) updateUI {

    for (UIButton *cardButton in self.cardButtons) {
        Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];
        [cardButton setTitle:card.contents forState:UIControlStateSelected];
        [cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];
        cardButton.selected = card.isFaceUp;
        cardButton.enabled = !card.unplayble;
        if (card.unplayble) {
            cardButton.alpha = 0.1;
        }
        self.scoreCounter.text = [NSString stringWithFormat:@"Score: %d", self.game.score];

        if (self.game.notification) {

        self.notificationLabel.text = self.game.notification;

        }

    }
}

//Here I created a method to flipCards when the card is selected, and give the user a random card from the deck each time he flips the card. After each flip i'm incrementing the flipCount setter by one.
- (IBAction)flipCard:(UIButton *)sender {

    [self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender]];
    self.flipsCount++;
    [self updateUI];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:32:05.120

属性获取默认的 setter 和 getter 方法。您可以自己覆盖这些方法以添加功能（`[self updateUI];`就是这样一个示例）。

当您不指定 setter 或 getter 时，将调用默认的 setter。

# arrays - Matlab中大数组元素到小数组的全权限制

> ID：15352266
> 
> 赞同：0
> 
> 时间：2013-03-12T02:28:58.900
> 
> 标签：arrays, matlab

我有一个 Matlab 数组，其中包含 Ns 个元素。对于该数组中的每个元素，我想计算该元素及其相邻元素的加权平均值（平均总共 n 个值）。元素来自周期性数据，因此可以将数组视为循环。

然后我想存储加权平均值代替该元素并将数组下采样为 Nd = Ns/n 长数组。

理想情况下，我想使用类似于完全加权限制的东西——我对元素的加权比平均加权它的邻居要多。例如，对于 n=3，我会用 0.5 为元素加权，而它的邻居每个用 0.25 加权。

在 Matlab 中是否有一种简单有效的方法可以做到这一点而无需使用下采样函数？我的代码必须与远程服务器上的旧版 Matlab 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:39:14.197

您正在寻找的是[移动平均](http://en.wikipedia.org/wiki/Moving_average)线，可以通过[FIR 滤波器](http://en.wikipedia.org/wiki/Finite_impulse_response)获得。假设这`x`是您的数组并且它是一维的，您可以使用以下[`filter`](http://www.mathworks.com/help/matlab/ref/filter.html)命令：

```
y = filter(ones(1, n), 1, x); 
```

要对结果进行下采样，请使用索引：

```
y_downsampled = y(1:n:Ns); 
```

简单来说，`ones(1, n)`表示权重。如果您想让一个元素比其他元素重，请根据自己的喜好对其进行修改。在您的示例中，您会将其更改为`[0.25, 0.5, 0.25]`.

如果您的数组是二维的，您应该使用另一个合适的过滤命令，例如[`filter2`](http://www.mathworks.com/help/matlab/ref/filter2.html).

# oop - 多类设计，实现多类

> ID：15352271
> 
> 赞同：0
> 
> 时间：2013-03-12T02:29:26.723
> 
> 标签：oop

我正在寻找一种模式来设计我的应用程序。我有固定数量的实体类。例如 PostEntity、ArticleEntity、DocumentEntity。它们都是抽象类“实体”的子类。到目前为止，它看起来很简单。今天我有一个新的需求：实体类的实现会因系统而异，也就是说，我们会有几个系统：SystemA、SystemB、SystemC。每个系统都应该实现自己的 PostEntity、ArticleEntity、DocumentEntity 类。

您将如何以合理的方式创建类？

简单的方法是为每个系统创建一个文件夹并以这种方式放置类：SystemAPostEntity、SystemAArticleEntity、SystemADocumentEntity。等等。然后，也许使用工厂方法来创建对象。例如，要获取“SystemA”的“PostEntity”对象，工厂应使用实体类型的开关/案例，并在此开关/案例中使用系统的另一个开关/案例。这种方式对我来说似乎不正确。我希望你有另一个想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:00:16.500

如果您必须处理多个实体，并且每个实体在每个系统中都有不同的行为集，那么您很可能会出现指数级的爆炸式增长。而且我不认为那部分是错误的，它只是代表了事物的本来面目。恕我直言，在这里寻找的唯一警告是如果您开始复制代码。

一开始采用子类化方法对我来说似乎没问题（即具有`Entity`>> `PostEntity`>> `SystemAPostEntity`）。然后你可以实现一个[抽象工厂](http://www.oodesign.com/abstract-factory-pattern.html)，为每个系统创建一个具体的工厂。你最终会得到类似的东西：

```
abstract class SystemFactory
{
public createPost(params);
...
}

class SystemAFactory extends SystemFactory
{
public createPost(params) 
  {
      return new SystemAPostEntity(params);
  }
} 
```

这样，每个系统都会有一个为其创建对象的工厂。

需要考虑的一件事是给定系统的所有实体是否共享一些共同的行为（例如，它们必须携带时间戳以及与之相关的行为）。在这种情况下，您应该尝试将常见行为归为一个类并使用委托，而不是在每个`SystemX*`类中复制代码。某些语言具有[Trait](http://en.wikipedia.org/wiki/Trait_%28computer_programming%29)支持，这可以帮助您避免对委托进行编码。

高温高压

# android - 如何确定apk是在模拟器还是真机上运行？

> ID：15352272
> 
> 赞同：3
> 
> 时间：2013-03-12T02:29:29.830
> 
> 标签：android, android-emulator

我想阻止用户在模拟器上注册，那么如何确定apk是在模拟器上运行还是在真实设备上运行？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:40:47.190

您可以检查硬编码到模拟器中的设备 ID。检查：

```
TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
Log.e("id", telephonyManager.getDeviceId()); 
```

结果应该是这样的：

```
03-12 09:50:08.043: E/id(447): 000000000000000 
```

经许可

```
 <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:57:32.863

尝试这个

```
if (Build.BRAND.equalsIgnoreCase("generic")) {
                 Toast.makeText(getBaseContext(), "YES, I am an emulator", Toast.LENGTH_LONG).show();
           } else {
               Toast.makeText(getBaseContext(), "NO, I am NOT an emulator", Toast.LENGTH_LONG).show();
              } 
```

# php - 从动态表单中检索 $_POST 数据

> ID：15352274
> 
> 赞同：0
> 
> 时间：2013-03-12T02:29:40.763
> 
> 标签：php, mysql

我有这个页面：

![http://i.stack.imgur.com/W2Aan.png](../Images/d6d7a113f28c8c47eac0e9b94246a4b4.png)

当我单击`Enregistrer`按钮时，我想保存对`Note`文本字段所做的所有修改。

这些文本字段是使用 select 语句生成的：

```
for($i=0; $i<$rows_number; $i++)
{
    echo '<tr>';
    echo '<td>' . mysql_result($students, $i, 'num_insc') . '</td>';
    echo '<td>' . mysql_result($students, $i, 'nom') . '</td>';
    echo '<td> <input style="text-align:center" type="number" name=note_"' 
        . mysql_result($students, $i, 'num_insc') . '" id="note" value="'
        .mysql_result($students, $i, 'note').'"> </td>';
    echo '</tr>';
} 
```

所以一些`note`文本字段的名称是 'num_' +`N° Inscription`对应于该文本字段的。例如，在图像中，您可以看到`N° Inscription`第一行的 是`1`，因此与该行对应的注释文本字段的名称是“num_1”。

当我单击`Enregistrer`按钮时，表单数据将被发送到同一页面，我正在使用 $_POST 来获取这些信息。

但问题是如何检索每个文本字段的值并更新数据库中与该文本字段对应的行？因为文本字段的数量会有所不同，并且会根据数据库中的记录数量而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:32:53.893

我看到至少两个选项：

1.  隐藏字段中的原始值`hidden` `input`；然后在提交时进行比较。这将减少从数据库调用原始值所需的开销。但是，这不太安全。
2.  获取原始值，然后比较相应的`$_POST`值。

# javascript - 学习 Vanilla JavaScript，for 循环

> ID：15352276
> 
> 赞同：2
> 
> 时间：2013-03-12T02:29:53.980
> 
> 标签：javascript, for-loop, innerhtml, createelement

我正在尝试学习 Vanilla JavaScript 或纯 JS，但是你看它。我开始学习 jQuery，现在我正在尝试在没有框架的情况下提高我的速度。我通常只用 jQuery 就可以做到这一点，但用纯 JS 很难做到这一点。

```
var a = $('.entry-content'),i;

for (i=0;i<a.length; i++) {
   var b = a[i].innerHTML;
   var c = document.createElement('div');
   var d = c.id = 'reply_bb';
   var e = d.innerHTML = 'Reply';
   a[i].innerHTML = a[i].appendChild(c);
 } 
```

基本上我想做的是向 var a 元素添加一个元素。

```
 <div class="entry-content">
     <div>
         Words from a poster or whatever would be in side here
     </div>
   </div> 
```

在 javascript =

```
 <div class="entry-content">
     <div>
         Words from a poster or whatever would be in side here
     </div>
      <div id="reply_bb">Reply</div>
   </div> 
```

也因为这是相关的。当动态创建一个元素时，我会使用`.click`或者`.on('click',function() {`我将如何去做？我想要它，所以当用户单击reply_bb 时，它会附加另一个已经在刚刚隐藏的页面上的元素。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T02:34:22.290

这里开始出错了：

```
var d = c.id = 'reply_bb';
var e = d.innerHTML = 'Reply'; 
```

`d`此时是字符串`'reply_bb'`。

所以`d`没有财产`.innerHTML`。

* * *

然后，我不知道你想用这个做什么：

```
a[i].innerHTML = a[i].appendChild(c); 
```

您要么设置，`innerHTML`要么附加一个孩子。`innerHTML`尝试将 设置为附加子项（即附加的 DOM 元素）的结果是没有意义的。

* * *

在我看来，您想要的可能是这样的：

```
var items = $('.entry-content'), replyDiv;

for (var i = 0; i < items.length; i++) {
   replyDiv = document.createElement('div');
   replyDiv.className = 'replyButton';
   replyDiv.innerHTML = 'Reply';
   items[i].appendChild(replyDiv);
} 
```

* * *

而且，如果你真的想在没有 jQuery 的情况下这样做，你可以这样做：

```
var items = document.getElementsByClassName('entry-content'), replyDiv;

for (var i = 0; i < items.length; i++) {
   replyDiv = document.createElement('div');
   replyDiv.className = 'replyButton';
   replyDiv.innerHTML = 'Reply';
   items[i].appendChild(replyDiv);
} 
```

* * *

在回答您关于`.on()`vs的问题`.click()`时，这取决于。这两个是等价的：

```
$(item selector).click(fn) 
$(item selector).on('click', fn) 
```

两者都可以在您安装事件处理程序时存在的项目上正常工作。我`.click()`在这里使用只是因为它更简洁。

但是，如果您想要事件处理程序的项目尚不存在或将在未来创建，那么您必须使用委托事件处理，您将事件处理程序安装在已经存在的父级上，您不能这样做`.click()`所以你会这样使用`.on()`：

```
$(static parent selector).on('click', '.replyButton', function() {
    // event handler code here
})' 
```

* * *

其他一些建议：

1.  使用有意义的变量名称，例如`replyDiv`and `items`、 not `a`、`b`、`c`和`d`。
2.  不需要时不要创建中间变量。
3.  id 值必须是唯一的，因此要么生成唯一的 id 名称，要么改用类名（我的代码切换到类名）。

# c++ - GLKits 等效于 CreateFromVectors()

> ID：15352278
> 
> 赞同：0
> 
> 时间：2013-03-12T02:29:56.720
> 
> 标签：c++, ios, objective-c, glkit, quaternions

我想知道什么（如果有的话）相当于 GLKit 的 CreateFromVectors() 。我看不出这个想法被遗漏了，因为它在 3D 图形编程中发挥了如此重要的功能。我正在尝试将以下内容从 C++ 转换为 Objective-C，并且无法为此触及 C++。有没有人有什么建议？

```
m_animation.End = Quaternion::CreateFromVectors(vec3(0, 1, 0), direction); 
```

又名：

```
inline QuaternionT<T> QuaternionT<T>::CreateFromVectors(const Vector3<T>& v0, const Vector3<T>& v1)
{
    if (v0 == -v1)
        return QuaternionT<T>::CreateFromAxisAngle(vec3(1, 0, 0), Pi);

    Vector3<T> c = v0.Cross(v1);
    T d = v0.Dot(v1);
    T s = std::sqrt((1 + d) * 2);

    QuaternionT<T> q;
    q.x = c.x / s;
    q.y = c.y / s;
    q.z = c.z / s;
    q.w = s / 2.0f;
    return q;
} 
```

我也想知道怎么翻译：

```
mat4 rotation(m_animation.Current.ToMatrix());
glMultMatrixf(rotation.Pointer()); 
```

ToMatrix() 是：

```
inline Matrix3<T> QuaternionT<T>::ToMatrix() const
{
    const T s = 2;
    T xs, ys, zs;
    T wx, wy, wz;
    T xx, xy, xz;
    T yy, yz, zz;
    xs = x * s;  ys = y * s;  zs = z * s;
    wx = w * xs; wy = w * ys; wz = w * zs;
    xx = x * xs; xy = x * ys; xz = x * zs;
    yy = y * ys; yz = y * zs; zz = z * zs;
    Matrix3<T> m;
    m.x.x = 1 - (yy + zz); m.y.x = xy - wz;  m.z.x = xz + wy;
    m.x.y = xy + wz; m.y.y = 1 - (xx + zz); m.z.y = yz - wx;
    m.x.z = xz - wy; m.y.z = yz + wx;  m.z.z = 1 - (xx + yy);
    return m;
} 
```

不幸的是，我对后端的 C++ 类不熟悉，并且不确定它们将如何翻译。

# javascript - 如何获取可用的最新 Java 更新的版本号？

> ID：15352281
> 
> 赞同：-1
> 
> 时间：2013-03-12T02:30:16.833
> 
> 标签：javascript, java

如果当前安装的 jre 是最新版本，如何确定使用 javascript。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:59:16.817

对 SO 的快速搜索产生了您正在寻找的答案的一半。

[使用 JavaScript 获取 JRE 版本](https://stackoverflow.com/questions/1873342/how-to-write-javascript-function-to-check-jre-version)

能够获得可用更新的版本号将很棘手。我找不到任何已经这样做的东西。我想如果你确实想出了一种方法来做到这一点，它必须是跨浏览器兼容的，除非你当然能够使用 Java 小程序来做到这一点。

# php - 如果验证失败，则在输入框中显示值

> ID：15352282
> 
> 赞同：0
> 
> 时间：2013-03-12T02:30:19.067
> 
> 标签：php, html, forms, validation

当验证失败时，我已经重新填充了表单。我使用 php POST 在同一页面中进行验证。所以我使用了

```
<input type="text" name="Name" value="<?php echo $_POST['Name']; ?>"/> 
```

当我打开一个新表单时，它会在输入框中显示一些 html 标签作为值，并且还会说`SCREAM: Error suppression ignored for`

谁能帮我解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:33:28.837

我相信一目了然的问题是您没有关闭输入元素：

```
<input type="text" name="Name" value="<?php echo $_POST['Name']; ?>"/> 
```

# android - JSOUP 未使用 Android ASYNCTASK 正确设置 .timeout

> ID：15352283
> 
> 赞同：0
> 
> 时间：2013-03-12T02:30:36.827
> 
> 标签：android, android-asynctask, jsoup

我目前的问题是我正在尝试`.post()`使用慢速服务器的用户名和密码。当我绕过在主线程上运行我的网络代码时，我的方法工作正常。我决定停止偷懒并将我的代码移动到 AsyncTask 线程，但是 JSOUP 开始忽略`.timeout()`我设置的时间，这导致了 408 错误。

这是我的代码。用户名和密码被审查。网址也被审查。Logcat 显示代码工作正常。

```
package com.example.androidgenparsetest;

import org.jsoup.Connection;
import org.jsoup.Connection.Method;
import org.jsoup.Connection.Response;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import java.io.IOException;
import java.util.Map;

    import android.os.AsyncTask;

    import android.widget.TextView;

    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;

    public class MainActivity extends Activity 
    {

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        //StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        //StrictMode.setThreadPolicy(policy); 
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        new GetGenesis().execute("ca.com","ca3");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    private class GetGenesis extends AsyncTask<String, Void, Document> 
    {
        protected Document doInBackground(String... UserPass) 
        {
            Document doc2 = null;
              try 
              {
                Connection.Response res = Jsoup
                        .connect("http://j_security_check")
                        .data("j_username",UserPass[0],"j_password",UserPass[1])
                        .method(Method.POST)
                        .userAgent("Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5")
                        .timeout(2*1000)
                        .ignoreHttpErrors(true) 
                        .execute();
                Map<String, String> cookies = res.cookies();

                doc2 = Jsoup
                        .connect("/j_security_check")
                        .data("j_username",UserPass[0],"j_password",UserPass[1])
                        .method(Method.POST)
                        .userAgent("Mozilla/5.0 (Windows NT 6.0) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5")
                        .timeout(2*1000)
                        .ignoreHttpErrors(true) 
                        .cookies(cookies)
                        .get();

              }
              catch (IOException e) 
              {
                e.printStackTrace();

              }
              return doc2;
        }

        protected void onPostExecute(Document doc) 
        {
          Document doc2=doc;
          TextView htmltext=(TextView)findViewById(R.id.htmltext);
          htmltext.setText(doc2.text());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:10:58.980

```
HttpURLConnection urlConnection = null;
HttpURLConnection connection = null;
try {
    URL url = new URL(Your_Url_asString);
    urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.connect();

    // Get cookies
    List cookieList = urlConnection.getHeaderFields().get("Set-Cookie");
    String cookie = "";
    if (cookieList != null) {
        for (String cookieTemp : cookieList) {
            cookie = cookieTemp;
        }
    }

    //second connection
    String query = "j_username="+UserPass[0]+"&j_password="+UserPass[1];
    URL url = new URL(Your_Url2_asString);    
    connection = (HttpURLConnection) url.openConnection();
    connection.setRequestProperty("Cookie", cookie);
    connection.setDoOutput(true);
    connection.setRequestMethod("POST");
    connection.setReadTimeout(10000);
    Writer writer = new OutputStreamWriter(connection.getOutputStream());
    writer.write(query);
    writer.flush();
    writer.close();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    if (urlConnection != null) {
        urlConnection.disconnect();
    }
} 
```

**注意：**对于较低版本（小于 froyo）使用“set-cookie”而不是“Set-Cookie”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T06:44:31.107

确保`Jsoup.jar`在 libs 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T13:04:39.667

像这样修改onCreate

```
 Context mContext;
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    //StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    //StrictMode.setThreadPolicy(policy); 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     mContext = this;

     final GetGenesis tsk = new  GetGenesis();
     tsk .execute("ca.com","ca3");

     //setting timeout thread for async task
            Thread thread1 = new Thread(){
            public void run(){
                try {
                    tsk.get(30000, TimeUnit.MILLISECONDS);  //set time in milisecond(in this timeout is 30 seconds

                } catch (Exception e) {
                    tsk.cancel(true);                           
                    ((Activity) mContext).runOnUiThread(new Runnable()
                    {
                         @SuppressLint("ShowToast")
                        public void run()
                         {
                            Toast.makeText(mContext, "Time Out.", Toast.LENGTH_LONG).show();
                            finish(); //will close the current activity comment if you don't want to cose current activity.                             
                         }
                    });
                }
            }
        };
        thread1.start();

                               }
} 
```

# node.js - 嵌入模式时猫鼬分离文档？

> ID：15352286
> 
> 赞同：1
> 
> 时间：2013-03-12T02:31:08.667
> 
> 标签：node.js, mongodb, express, mongoose

在用户创建新文档后，我想将文档 _id 保存到另一个模式的数组中。简而言之：用户保存了一个视频 URL，我想将视频的文档 _id 保存到用户架构中的一个数组中。我无法弄清楚如何做到这一点。这是我的模型文件：

视频.js：

```
// Video Model
// -------------

var mongoose = require('mongoose');
var Schema = mongoose.Schema;

// Embedded document schema
var NotesSchema = new Schema({
    timecode  : String,
    text      : String
});

// Main schema
var VideoSchema = new Schema({
    title   : String,
    url_id  : String,
    notes   : [NotesSchema]
});

module.exports = mongoose.model('Note', NotesSchema);
module.exports = mongoose.model('Video', VideoSchema); 
```

帐户.js：

```
// Account Model
// -------------

var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var Video = require('../models/videos.js');
var passportLocalMongoose = require('../node_modules/passport-local-mongoose/lib/passport-local-mongoose.js');

var AccountSchema = new Schema({
    username: String,
    salt: { type: String, required: true },
    hash: { type: String, required: true },
    videos: [VideoSchema]  // <- need to save here
});

AccountSchema.plugin(passportLocalMongoose);

module.exports = mongoose.model('Account', AccountSchema); 
```

这是我目前如何设置代码来创建文档并保存到 MongoDB。

```
var video = new Video({
    title   : req.body.title,
    url_id  : req.body.url_id
});

video.save(function(err) {
    if (err) {
        console.log(err);
    } else {
        res.redirect('videos/' + video._id);
        console.log('video saved.');
        console.log('video information: ' + video);
    }
}); 
```

基本上我不明白如何保存到视频*，*只将视频文档 _id 发送到帐户架构中的数组。我该怎么做呢？

编辑：

尽管实施了建议的修复程序，`data._id`但并未保存到 Account 架构内的数组中。没有错误被抛出。当我使用 mongo CLI 检查帐户时，数组为空。

以下是我目前的更改：

视频.js

```
// Video Model
// -------------

var mongoose = require('mongoose');
var Schema = mongoose.Schema;

var NotesSchema = new Schema({
  timecode  : String,
  text      : String
});

var VideoSchema = new Schema({
  title   : String,
  url_id  : String,
  notes   : [NotesSchema]
});

module.exports = mongoose.model('Note', NotesSchema);
module.exports = mongoose.model('Video', VideoSchema); 
```

account.js

```
// Account Model
// -------------

var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var Video = require('../models/videos');
var passportLocalMongoose = require('../node_modules/passport-local-mongoose/lib/passport-local-mongoose.js');

var AccountSchema = new Schema({
    nickname: String,
    birthday: Date,
    videos: [{ type: Schema.Types.ObjectId, ref: 'Video' }]
});

AccountSchema.plugin(passportLocalMongoose);

module.exports = mongoose.model('Account', AccountSchema); 
```

视频路由.js

```
var util = require('util');
var mongoose = require('mongoose');
var Video = require('../models/videos');
var Account = require('../models/account');

var video = new Video({
  title   : req.body.title,
  url_id  : goodVimeoId
});

video.save(function(err, data) {
  if (err) {
    console.log(err);
  } else {
    Account.findOne({username : req.user.username}, function(err, result) {
      result.videos.push(video._id);
      res.redirect('videos/' + video._id);
    });

  }
}); 
```

关于为什么视频数据没有保存到帐户的任何建议？再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:21:34.950

刚刚注意到关于 ObjectId 的评论。已根据需要更新了答案：

```
 var ObjectId = Schema.ObjectId;

  var AccountSchema = new Schema({
        username: String,
        salt: { type: String, required: true },
        hash: { type: String, required: true },
        videos: [{type: ObjectId, ref: 'Video'}]  // <- need to save here
  });
 ....
 ....

  video.save(function(err, data)    {
     Account.findOne({username:req.body.username}, function(err, result)    {
         result.videos.push(data._id);
     });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:11:10.827

问题解决了：

我需要在`result.save();`之后添加`result.videos.push(video._id);`，如下所示：

```
 Account.findOne({username : req.user.username}, function(err, result) {
      result.videos.push(video._id);
      result.save();
      res.redirect('videos/' + video._id);
    }); 
```

# android - 输入变量超过 50 个的方法？

> ID：15352287
> 
> 赞同：0
> 
> 时间：2013-03-12T02:31:15.160
> 
> 标签：android, database, variables, methods, input

我正在开发一个应用程序，现在有一个小问题。让我解释一下这个应用程序的目的是什么：
- 有一个带有不同按钮的主菜单（比如说 16 个按钮）。- 每次用户单击按钮时，它都会向数据库发送一个请求，并根据您单击的按钮显示具有不同结果的结果列表视图。
- 在数据库中，有一列带有“类别号”。（实际上有 3 列带有 CatNumbers，但让我们保持简单）。
- 请求要求显示此类别编号等于某些值的所有元素（这些是我的方法的输入，称为“myVariableN”，通过 putExtra/getExtra 从 MainActivity 发送到 ListView 活动）。在我的 ListViewActivity 中显示结果：

```
private void displayListView() {
    Bundle bundle = getIntent().getExtras();
    String title = bundle.getString("title", "Choose here :");
    int myVariable1 = bundle.getInt("myVariable1", 500);
    int myVariable2 = bundle.getInt("myVariable2", 500);
    int myVariable3 = bundle.getInt("myVariable3", 500);
    int myVariable4 = bundle.getInt("myVariable4", 500);
    int myVariable5 = bundle.getInt("myVariable5", 500);
    int myVariable6 = bundle.getInt("myVariable6", 500); 
```

所以我到目前为止是这样的：例如，如果您单击按钮 1，它会发送 6 个变量（myVariable1、2、3 ... 6）并要求显示所有元素“WHERE CatNumber IN (myVariable1, myVariable2, .. .myVariable6)。

```
public Cursor findPoiInTable(int myVariable1, int myVariable2,
        int myVariable3, int myVariable4, int myVariable5, int myVariable6) 
{
    String inInterval = "(?,?,?,?,?,?)";
    String where = COL_CAT1 + " IN " + inInterval + " OR " + COL_CAT2
            + " IN " + inInterval + " OR " + COL_CAT3 + " IN " + inInterval;
    String[] whereArgs = new String[3 * 6];

    for (int i = 0; i < 3; i++) 
    {
        whereArgs[6 * i] = Integer.toString(myVariable1);
        whereArgs[6 * i + 1] = Integer.toString(myVariable2);
        whereArgs[6 * i + 2] = Integer.toString(myVariable3);
        whereArgs[6 * i + 3] = Integer.toString(myVariable4);
        whereArgs[6 * i + 4] = Integer.toString(myVariable5);
        whereArgs[6 * i + 5] = Integer.toString(myVariable6);
    }
    Cursor c = myDatabase.query(DATABASE_TABLE, new String[] { KEY_ROWID,
            COL_NAME, COL_STREET}, where, whereArgs, null, null, null);
   return c; 
} 
```

问题是，在主菜单的这 16 个按钮中，有几个按钮需要从数据库中获取具有更大范围类别编号的数据。例如，诸如“SELECT .... FROM.... WHERE CatNumber IN (myVariable1, myVariable2, ..... myVariable* *50* *) 之类的内容。
不幸的是，无论怎样，每个按钮的方法都必须相同如果有 2 或 50 个输入变量。

我觉得如果我这样做，我的方法会太重并且会减慢我的整个应用程序，因为在大多数情况下，即使请求应该找到 2 或 3 个 CatNumber，该方法也会被定义为50 个或更多输入，因此每次都必须进行整个计算。

我在想的是：
**a/**用 IF 语句修改我的方法，例如，如果少于...假设发送了 6 个变量，它将使轻方法只有 6 个 myVariable 输入，否则，它是将使用 50 个输入运行繁重的方法。所以heavy方法只会在少数情况下使用，错误的是即使只有7个输入，它也会运行heavy方法。或者以同样的想法，我可以发送一个通过 putExtra 发送的布尔值，并设置为 TRUE（用于使用 light 方法）和 FALSE（然后它将使用 heavy 方法）。
**b/**将默认值设置为 500（如我的代码中所做的那样），因此只有特定的 myVariables 的值不同于 500。然后我的问题是：**是否可以定义一个具有 50 个输入的方法并使其仅使用其值与某个数字不同的输入，因此该方法并不总是太重而无法运行？** 例如，在上面带有方法的代码中，是否可以说如果其他四个变量等于 500（myVariable1 和 myVariable2 而不是所有变量，即使整个方法都是为其余定义的，则只查找两个变量？ ）。
提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:44:12.023

你要这个 -

```
void myVariableMethod( int... catIds ) {
    for( int catId : catIds ) {
        Log.d( "Output", "catId: " + catId );
    }
} 
```

在方法声明中的类型之后添加省略号将允许您将任意数量的相同类型的参数传递给方法。`catIds`那么实际上是`int[]`方法体内的一个数组。

您可以按如下方式调用此方法：

```
myVariableMethod( 1, 2, 3, 4 );
myVariableMethod( 1 );
myVariableMethod( 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 );
myVariableMethod( 1, 2, 3, 4, 100, 101, 102 ); 
```

解决问题的更优雅的方法是使用`List<Integer>`, 或`Set<Integer>`在评估按钮时添加这些 id。最后，您会将列表传递给方法并正确评估它。

我的直觉说您可以改进您的数据库设计以`WHERE ... IN`完全避免该构造，但是如果没有看到 ERD，这很难确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:11:44.180

当然，您可以将定义您的方法与 Vararg 一起使用：

```
 public Cursor findPoiInTable(int ... myVariable) 
{

    //construct String from myVariable array
    StringBuffer sb = new StringBuffer("(");
    for (int i : myVariable)
    {
        sb.append(",?");
    }
    sb.append(")");

    String inInterval = sb.toString();

    String where = COL_CAT1 + " IN " + inInterval + " OR " + COL_CAT2
            + " IN " + inInterval + " OR " + COL_CAT3 + " IN " + inInterval;

    String[] whereArgs = new String[3 * myVariable.length];

 int j = 0
    for (int i = 0; i < 3; i++) 
    {
        whereArgs[6 * i + j] = Integer.toString(myVariable[j++]);
        whereArgs[6 * i + j] = Integer.toString(myVariable[j++]);
        whereArgs[6 * i + j] = Integer.toString(myVariable[j++]);
        whereArgs[6 * i + j] = Integer.toString(myVariable[j++]);
        whereArgs[6 * i + j] = Integer.toString(myVariable[j++]);
        whereArgs[6 * i + j] = Integer.toString(myVariable[j++]);
    }
    Cursor c = myDatabase.query(DATABASE_TABLE, new String[] { KEY_ROWID,
            COL_NAME, COL_STREET}, where, whereArgs, null, null, null);
   return c; 
} 
```

# java - 切换帧时如何删除文本字段中的当前文本

> ID：15352288
> 
> 赞同：-2
> 
> 时间：2013-03-12T02:31:19.083
> 
> 标签：java, text, field, textfield

我有 2 个框架，一个有一个按钮可以通向第二个框架。第二个框架有一个文本字段。我所做的是在我的按钮上添加了一个动作监听器，这将使其可见为假，并使第二帧可见为真。但我的问题是我只是让它们可见/不可见，所以如果我在第二帧的文本字段上输入任何内容然后单击返回到第一帧按钮，如果我单击转到第二帧按钮，文本仍然在那里第一帧。是否有任何代码可以完全终止框架而不是 set.Visible(false) 以便当我返回我的文本字段时它是干净的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:07:39.533

> 我有2帧，

一个应用程序应该只有一个主 JFrame

> 第二个框架有一个文本字段。

第二个窗口应该是 JDialog，而不是 JFrame。

> 是否有任何代码可以完全终止框架而不是 set.Visible(false) 以便当我返回我的文本字段时它是干净的

不，您有两个选择：

1.  每次单击按钮时只需重新创建 JDialog，组件将显示其默认值。
2.  添加代码以将所有组件重置为其初始状态。

# openstack-swift - 是否有任何桌面工具可以访问 Swift Storage？

> ID：15352291
> 
> 赞同：0
> 
> 时间：2013-03-12T02:31:27.967
> 
> 标签：openstack-swift

我在一个使用 Swift Storage 的项目中，我想找到一些可以很好地与 Swift Storage 配合使用的桌面工具。'Gladinet Destop' 可能是一个不错的选择，但它似乎不太适合 Swift Storage。（它很好地满足了其他一些云文件存储。）有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T06:55:26.150

[Cyber​​duck](http://cyberduck.ch/)可用于访问 Swift Storage。它提供了一个类似 ftp 的接口。

[s3ql](https://code.google.com/p/s3ql/)是一个使用存储服务在线存储数据的文件系统。它与 Swift 沟通得很好。

# php - 使用 PHPDoc 的智能路由不适用于 Restler v3

> ID：15352295
> 
> 赞同：0
> 
> 时间：2013-03-12T02:31:53.447
> 
> 标签：php, api, rest, routes, restler

我在 Restler PHP REST Framework v3 中实现智能 url 路由时遇到了一些问题。基本上看起来 Restler 似乎忽略了我的评论。我在这里附上了我的 index.php 和 tests.inc.php 文件。正在发生的事情，即使是 PHPDoc 注释，似乎restler 忽略它们并且只响应默认的“测试”调用而不是“some/new/route”，正如我所期望的那样，基于提供的路由示例框架。

**索引.php**

```
<?php

$root_dir = $_SERVER['DOCUMENT_ROOT'];
$base_dir = getcwd();
$include = "{$base_dir}/include";
require_once("{$include}/config.inc.php");
require_once("{$include}/library-general.inc.php");

//include restler library
$restler_dir = "{$root_dir}/restler/{$settings['restler_version_string']}";
require_once("{$restler_dir}/restler.php");

//restler configuration
use Luracast\Restler\Restler;
use Luracast\Restler\Defaults;

//include database connector class
require_once("{$include}/db_connector_mysql.inc.php");

//include api handler classes
require_once('test.inc.php');
require_once('accounts.inc.php');

//instantiate our restler object; call with argument "true" to run in production mode
$r = new Restler();

//bind api classes
$r->addAPIClass('Tests');
$r->addAPIClass('Accounts');

//set supported formats: JSON ONLY!
$r->setSupportedFormats('JsonFormat');

//handle the request
$r->handle(); 
```

**测试.inc.php**

```
<?php

class Tests {

    private $dbc;
    private $function_log_tag;

    public function __construct () {
        $this->dbc = DB_Connector_MySQL::getConnection();
        $this->response = new stdClass();
    }

    /*
    ** @url GET /some/new/route
    */
    public function get () {
        //load required global variables
        global $settings;

        //set logging tag
        $this->function_log_tag = '[' . __CLASS__ . '::' . __FUNCTION__ . '][v' . $settings['version'] . ']';

        return $this->function_log_tag;
    }
} 
```

我一直在尝试许多不同的方法来试图找到根本问题。值得注意的是，我似乎无法找到“routes.php”文件，所以我可能认为这可能是服务器上的写权限问题。无论如何，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:51:23.620

您的评论不是有效的 PHPDoc 评论，它只是一个普通的评论，仅此而已

查看以下内容以了解正确的语法

```
<?php

class Tests {

    private $dbc;
    private $function_log_tag;

    public function __construct () {
        $this->dbc = DB_Connector_MySQL::getConnection();
        $this->response = new stdClass();
    }

    /**
    * @url GET /some/new/route
    */
    public function get () {
        //load required global variables
        global $settings;

        //set logging tag
        $this->function_log_tag = '[' . __CLASS__ . '::' . __FUNCTION__ . '][v' . $settings['version'] . ']';

        return $this->function_log_tag;
    }
} 
```

文档注释以`/**`代替开头`/*`

# php - php空白$_GET[]检测

> ID：15352296
> 
> 赞同：3
> 
> 时间：2013-03-12T02:31:54.730
> 
> 标签：php, url, variables, parameters

我正在寻找检测`$_GET`变量名。我要检测的是：

index.php?login（检测登录）
index.php?news（检测新闻）

我已经翻遍了，我似乎找不到任何人要求这个。我不想检测变量的值，只是特定变量存在没有值，如果有值，那就是错误。我真的很感激任何帮助。

**编辑**：感谢在 zerkms 的帮助下进行的一些侦探工作，我能够确定它正在通过，`QUERY_STRING`所以我通过它将它发送到一个变量`$_SERVER['QUERY_STRING'];`

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:34:54.687

尝试这个

```
if (isset($_GET['yourvar']) && !strlen($_GET['yourvar']))
    echo "param is set with no value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:41:25.590

如果请求的 URL 类似于“/test.php?login”

```
 if(!empty($_SERVER['QUERY_STRING'])) {
    if($_SERVER['QUERY_STRING'] == "login"){
       //do some login thing
    }
 } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-12T02:38:20.377

要获取变量并打印它们，您可以使用以下代码：

```
echo '<pre>';    
print_r($_GET);
echo '</pre>'; 
```

# ios - NSTimer 无法在 NSThread 函数中启动或运行？

> ID：15352301
> 
> 赞同：0
> 
> 时间：2013-03-12T02:32:17.667
> 
> 标签：ios, objective-c, cocoa

我想用`NSTimer`每 20 秒运行一个函数，但我把它`NSTimer`放在一个`NSThread`函数中。代码是这样的：

```
-(void)func1
{
   [NSThread detachNewThreadSelector:@selector(func2)   
                         toTarget:self withObject:nil];
}
-(void)func2
{
   [NSTimer scheduledTimerWithTimeInterval:3 target:self          
    selector:@selector(func3) userInfo:nil repeats:YES];
}
-(void)func3
{
  //do something,but the function seems never be executed
} 
```

所以问题是func3永远不会被`NSTimer`in func2执行。有人说`NSTimer`只有run in .`main thread`是真的吗？？所以不能`NSTimer`在`NSThread`函数中启动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:46:13.563

在我看来，您的线程没有做任何事情。计时器被安排作为线程运行循环的一部分进行检查。如果线程没有运行任何代码，那么它将不会通过它的运行循环。

这样想：

*   启动线程
*   开始线程运行循环
*   `-func2`
*   结束运行循环
*   睡眠线程

您已在设置计时器后立即进入睡眠状态的线程上安排了计时器。没有运行循环；没有计时器触发。

* * *

**更新**

我的回答回答了这个问题，但没有给出解决方案。您希望达到的最终效果是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:42:25.473

您可以通过以下方式将计时器添加到当前线程的运行循环

```
(void)addTimer:(NSTimer*)aTimer forMode:(NSString*)mode 
```

编辑：

对您有用的链接：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW25](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW25)

# wordpress - 我的 WordPress 插件适用于本地服务器，而不是生产环境

> ID：15352302
> 
> 赞同：0
> 
> 时间：2013-03-12T02:32:19.320
> 
> 标签：wordpress

我的基本 WordPress 插件检查引荐来源网址并设置会话数据（例如与引荐来源网址域关联的电话号码）。它在我的本地服务器上运行良好，但甚至没有在生产服务器上被调用（我无权访问并且安装了许多其他插件）

这是我所拥有的：

```
// loads config and sets session vars depending on referrer domain
// do I use"init" or "wp" ?
add_action("init", "aw_refer_init", 1);

// used in templates to grab session a session var
add_action("aw_refer_get", "aw_refer_get", 5, 2); 
```

我已经检查了基础知识（[http://yoast.com/plugin-not-working/](http://yoast.com/plugin-not-working/)），但一切都检查了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T12:27:21.323

代替...

wp-config.php 文件的定义('WP_DEBUG', false);

与

// 打开 WordPress 调试

定义（'WP_DEBUG'，真）；

// 告诉 WordPress 将所有内容记录到 /wp-content/debug.log 文件中

定义（'WP_DEBUG_LOG'，真）；

// 不强制 PHP 'display_errors' 变量打开

定义（'WP_DEBUG_DISPLAY'，假）；

// 隐藏错误不显示在屏幕上

@ini_set('display_errors', 0);

* * *

然后在实时服务器中运行项目，它会在日志文件中给你错误检查它在 wp-content/debug.log 文件中并做适当的

# ios - 在 iOS 中使用 JSON 发送 HTTP POST 请求

> ID：15352304
> 
> 赞同：7
> 
> 时间：2013-03-12T02:33:00.107
> 
> 标签：ios, json, facebook, http, post

所以我目前正在使用 Facebook 登录到我的 iOS 应用程序，服务器管理员最近通过要求 Facebook 访问令牌以及通过 https 进行所有连接来添加安全身份验证。这是我尝试运行的代码，但无论我做什么，我都会收到 500 的服务器响应错误（内部服务器错误）。有任何想法吗？

```
NSMutableURLRequest *request = [NSMutableURLRequest
                                requestWithURL:[NSURL URLWithString:@"https://XXXXXXXXXXXXXXXX/users.json"]];

NSDictionary *requestData = [[NSDictionary alloc] initWithObjectsAndKeys:
                     userID, @"facebook_id",
                     FBAccessToken, @"fb_token",
                     userName, @"name",
                     nil];
NSError *error;
NSData *postData = [NSJSONSerialization dataWithJSONObject:requestData options:0 error:&error];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:postData];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:58:52.203

这是您记录响应正文的方式。

```
@property (strong, nonatomic) NSMutableData *responseData;

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    self.responseData = [NSMutableData data];
    …
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.responseData appendData:data];
    …
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"response data - %@", [[NSString alloc] initWithData:self.responseData encoding:NSUTF8StringEncoding]);
    …
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-28T22:11:48.137

您还需要遵守 NSURLConnectionDelagate 协议。

# haskell - 在windows上的haskell中调整png的大小

> ID：15352306
> 
> 赞同：0
> 
> 时间：2013-03-12T02:33:04.160
> 
> 标签：haskell, imagemagick, png, mingw, gd

我需要[http://hackage.haskell.org/package/imagemagick](http://hackage.haskell.org/package/imagemagick)或[http://hackage.haskell.org/package/gd-3000.7.3](http://hackage.haskell.org/package/gd-3000.7.3)或 windows/mingw（64 位，但 32 位）上的类似内容来调整 png 的大小. 我找不到安装它们的分步说明。

我尝试了 mingw-get，但它似乎没有 imagemagick 或 gd。我不清楚仅仅安装 c 库是否足以让 cabal 链接到它们，它说：“pkg-config 包 ImageMagick 是必需的，但找不到它。” 而且我不确定 pkg-config 如何工作或与 mingw-get 相关。无论如何，imagemagick 的配置脚本在 mingw 中失败：“无法计算 sizeof (long double)”

config.log 充满了错误，但这似乎是这个：“ld.exe：无法打开输出文件 conftest.exe：权限被拒绝”

虽然它似乎早一百万次写入那个文件就好了......

[http://hackage.haskell.org/package/JuicyPixels-3.0](http://hackage.haskell.org/package/JuicyPixels-3.0)可以加载/保存 png，但没有很好的调整大小算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T21:00:38.837

这里有一个很好的 JuicyPixels 调整大小算法：[https ://gist.github.com/eflister/5456125](https://gist.github.com/eflister/5456125)

这应该足以实现这一点。

# objective-c - NSOutlineView SourceList 视图上的边距不正确

> ID：15352308
> 
> 赞同：1
> 
> 时间：2013-03-12T02:33:26.530
> 
> 标签：objective-c, cocoa, nsoutlineview

自从 Lion 发布以来一直困扰我的一个问题是预格式化的 NSOutlineView 基于视图的“SourceList”控件的行项目的边距/缩进。尽管我尽了最大努力来纠正页边距，但不管我指定了什么（无论是通过缩进设置还是手动移动视图），Apple 的内置格式都会接管并定位视图。

这是一张图片来演示：

![在此处输入图像描述](../Images/6ce6eb658e4154bd18293bd941007737.png)

如果不求助于手动执行所有操作，我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:49:49.283

子类 NSOutlineView 并覆盖`-frameOfOutlineCellAtRow:`并`frameOfCellAtColumn:row:`分别调整显示三角形、文本和图像。调用 super 以获取实际单元格的框架，并在两种情况下将单元格的 x 原点向右分配 3 个像素。

# python - Django 模拟补丁无法按我的预期工作

> ID：15352315
> 
> 赞同：3
> 
> 时间：2013-03-12T02:34:23.837
> 
> 标签：python, django, unit-testing, mocking, redis

摘要：我正在做一个实验，试图创建一个简单的mock来替换redis。我正在尝试做的事情应该从代码中显而易见。简短的版本是，模拟不起作用 - 它仍然会 redis 并创建密钥。

测试.py：

```
 ```
from django.test import TestCase
import mock
from redis_mock.simple_redis_mock import redisMockGetRedis, redisMockFlushDB
from account.util import get_redis

class SimpleTest(TestCase):

    def setUp(self):
        redisMockFlushDB()

    @mock.patch("account.util.get_redis", redisMockGetRedis)
    def test_redis(self):
        key = "hello123"
        value = "world123"
        r = get_redis()
        r.set(key, value)
        value2 = r.get(key)
        self.assertEqual(value, value2) 
``` 实用程序.py：

```
import redis

REDIS_HOST = 'localhost'
REDIS_PORT = 6379
REDIS_DEFAULT_DB = 0

def get_redis():
    print "account.util.get_redis"
    return redis.StrictRedis(
        REDIS_HOST, 
        REDIS_PORT, 
        REDIS_DEFAULT_DB
    ) 
```

simple_redis_mock.py：

```
"""
A simple mock for Redis. Just mocks set, get and expire commands.
"""

class SimpleRedisMockDB:
    db = {}

def redisMockFlushDB():
    """
    Helper function to flush the RedisMock db between test runs
    """
    print "redisMockFlushDB"
    SimpleRedisMock.db = {}

class SimpleRedisMock:
    def get(self, key):
        val = None
        try:
            val = SimpleRedisMockDB.db[key]
        except:
            pass
        print "SimpleRedisMock get(" + str(key) + "):" + str(val)
        return val

    def set(self, key, val):
        print "SimpleRedisMock set(" + str(key) + "," + str(val) +")"
        SimpleRedisMockDB.db[key] = val

    def expire(self, key):
        pass

def redisMockGetRedis():
    print "redisMockGetRedis"
    return SimpleRedisMock() 
```

现在，我期望的是，当我运行测试时，没有设置 redis 键。以下是实际发生的情况：

```
twang$ redis-cli
redis 127.0.0.1:6379> del hello123
(integer) 1
redis 127.0.0.1:6379> exit
twang$ ./manage.py test account
Creating test database for alias 'default'...
redisMockFlushDB
account.util.get_redis
.
----------------------------------------------------------------------
Ran 1 test in 0.001s

OK
Destroying test database for alias 'default'...
twang$ redis-cli
redis 127.0.0.1:6379> get hello123
"world123" 
```

简单的问题：为什么 mock.patch 不符合我的预期？

            回答 #1

赞同：12

时间：2014-09-29T10:15:12.000

链接

[http://www.voidspace.org.uk/python/mock/patch.html#where-to-patch](http://www.voidspace.org.uk/python/mock/patch.html#where-to-patch)

帮助我更好地理解如何在 python 中修补函数调用。

            回答 #2

赞同：8

时间：2013-03-12T08:26:42.513

Patch 仅在您修补它的位置模拟对象。一些示例代码应该有助于解释发生了什么。

```
from mock import Mock, patch
import unittest

from patch_code import anotherfunc, thefunc

print 'Function imported', thefunc

class SomeTest(unittest.TestCase):

    @patch('patch_code.thefunc', Mock())
    def test_method(self):
        anotherfunc()
        print 'Inside test method', thefunc

if __name__ == '__main__':
    unittest.main() 
```

而被测代码只是两个函数：

```
def thefunc():
    pass

def anotherfunc():
    print 'Inside code under test', thefunc 
```

运行该测试会给出以下输出

```
Function imported <function thefunc at 0xb740e614>
Inside code under test <Mock id='3071597132'>
Inside test method <function thefunc at 0xb740e614> 
```

您可以清楚地看到，补丁唯一模拟了“thefunc”的地方是在测试代码中。

如果您想在`get_redis`不引起任何副作用的情况下测试该函数，那么您应该模拟`account.util.redis.StrictRedis`并断言它是使用正确的参数调用的。

如果要测试使用的函数，**则应** `get_redis`模拟`get_redis`并导入使用 get_redis 的函数，并在测试中调用**该**函数。

            回答 #3

赞同：3

时间：2019-12-09T16:24:04.347

而不是导入`get_redis`，尝试`import util and call util.get_redis()`。

```

# maven - 在我的战争中，tomcat 如何无法在库中找到类？

> ID：15352316
> 
> 赞同：0
> 
> 时间：2013-03-12T02:34:28.483
> 
> 标签：maven, tomcat, ant

在我部署到 Tomcat 的 .war 文件中，我在构建期间存在的库上收到 NoClassDefFoundError。

我的 .war 是使用 Ant 构建脚本创建的。在脚本中，我认为是一个自定义目标（由 office New Project 工具自动创建），它从我的 .m2 存储库中的 .pom 获取我的依赖项，并将它们放在我的 WEB-INF/lib 文件夹中。其中一个库是我帮助编程的，并使用 Maven 在我的机器上构建。由于历史原因，这个新项目需要使用Ant，这也是我这样做的原因。

.war 构建良好。找到所有类。我将它部署到 tomcat，当我运行唯一的 servlet 命令时，该命令目前执行的操作很少，但在我之前构建的 .jar 中调用了一些类，我得到了这个：

```
exception
javax.servlet.ServletException: Servlet.init() for servlet InitLDAP threw exception
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:619)

root cause
java.lang.NoClassDefFoundError: Could not initialize class com.myjarlibrary.ConnectionAgent
com.mywarservice.MyServlet.init(MyServlet.java:45)
javax.servlet.GenericServlet.init(GenericServlet.java:212)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:619) 
```

我不知道为什么。

我正在使用 Java 6 构建 .jar 和 .war。Tomcat 版本 6.0.29。这`MyServlet.java:45`是第一次调用 .jar 库，但首先调用了另一个库（只是 log4j）。检查`webapps`文件夹，我看到图书馆就在它应该在的地方。其他人非常相似的 .war （相同的依赖项，类似的代码稀疏）在同一个 Tomcat 上运行得很好，但我一直无法找到相关的区别，除非它是用 Maven 而不是 Ant 构建的，就像库一样曾是。

可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:20:04.760

> java.lang.NoClassDefFoundError：无法初始化类 com.myjarlibrary.ConnectionAgent

这并不表示找不到该类本身。它以自己令人困惑的方式说初始化类时出错。您应该查看`com.myjarlibrary.ConnectionAgent`并查看其超类或任何静态字段或静态初始化程序是否有任何问题。很可能缺少其中一个引用的类或接口。您也可以通过查看日志找到更多详细信息。检查 catalina.out 和 localhost.* 日志是否有其他错误，更不用说您的应用程序可能写入的任何日志。

# google-app-engine - 谷歌应用引擎：ndb 查询变得更干净

> ID：15352318
> 
> 赞同：0
> 
> 时间：2013-03-12T02:34:40.597
> 
> 标签：google-app-engine

在 Google App Engine 上，我想知道是否可以按如下所述的方式构造 ndb 查询中的条件。假设我有以下代码：

```
if bidded == '':
    productRanks = Product.query(Product.bidTime>=startDate,
                                 Product.bidTime<endDate).fetch()         
elif bidded == 'yes':
    productRanks = Product.query(Product.bidTime>=startDate
                                 Product.bidTime<endDate,
                                 Product.bidded=='yes').fetch()
else:
    productRanks = Product.query(Product.bidTime>=startDate
                                 Product.bidTime<endDate,
                                 Product.bidded=='no').fetch() 
```

看起来真的很乱。假设，我希望能够做到以下几点。可能吗？如果是，如何？

```
condition = 'Product.bidTime>=startDate, Product.bidTime<endDate'
if bidded = 'yes':
    condition = condition + ', Product.bidded=='yes'
elif bidded == 'no':
    condition = condition + ', Product.bidded=='no'
productRanks = Product.query(condition).fetch() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:16:14.350

你真的应该花一些时间阅读文档，它会为你节省很多时间。

请参阅 [https://developers.google.com/appengine/docs/python/ndb/queries#filter_by_prop](https://developers.google.com/appengine/docs/python/ndb/queries#filter_by_prop) 如果您阅读此部分，它清楚地表明您可以继续添加过滤器。从文档来看，这个例子很清楚。

```
qry1 = Account.query() # Retrieve all Account entitites
qry2 = qry1.filter(Account.userid >= 40) # Filter on userid >= 40
qry3 = qry2.filter(Account.userid < 50) # Filter on userid < 50 as well 
```

而且您不必继续创建新查询，只需重新绑定相同的变量即可。

# javascript - 在 Angular 中更改外部模板

> ID：15352323
> 
> 赞同：0
> 
> 时间：2013-03-12T02:35:19.553
> 
> 标签：javascript, angularjs

我正在将产品管理管理站点转换为使用 Angular - 我的所有视图（产品列表、详细视图、编辑等）都显示在我的管理页面上的 ng-view 中。那里一切都好。但是，我对每个产品都有一个链接，可以让我打印它的信息——它目前使用与其他产品不同的外部模板。

处理这个的角度方式是什么？

应用程序：

```
angular.module('myApp', []).
  config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {

    // all routes but print use an index.html template
    $routeProvider.
      when('/', {
        templateUrl: '/partials/order/manage.html',
        controller: ManageOrderCtrl
      }).
      when('/order/:id', {
       templateUrl: '/partials/order/_view.html',
        controller: ViewOrderCtrl
      }).
      when('/order/edit/:id', {
       templateUrl: '/partials/order/_edit.html',
        controller: ViewOrderCtrl
      }).
      // I want this link to not use the same outer template (i.e. something like printer.html as well as use custom headers)
      when('/order/print/:id', {
       templateUrl: '/partials/order/_print.html',
        controller: PrintOrderCtrl
      }).
      otherwise({
        redirectTo: '/'
      });
    $locationProvider.html5Mode(true);
  }]); 
```

在我的管理列表中：

```
<div ng-repeat="order in orders">
  <a title="Print product sheet" href="/order/print/{{ order._id }}"></a>
</div> 
```

现在这会导致 _print.html 被放置在与另一个相同的 ng-view 中。我确实希望它在新窗口中打开 - 我只是制作一个新应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:36:47.480

您可以编写一个服务并在该服务内部执行 ajax 调用来获取 html。现在您的 html 将包含占位符，即 {{}}，因此您需要一个模板库（例如 mustache）来用真实数据替换那些 {{}}

```
factory('print', ["$window", function($window) {
/* service in charge of printing */
return function(templateUrl, context) {
    /* send a GET request to templateUrl for template, render the template with context
     * and open the content in a new window.
     */
    $.ajax({
        url: templateUrl,
        async: false,   //otherwise the popup will be blocked
        success: function(html) {
            var template = html.replace('<!DOCTYPE html>\n<html lang="en">\n', '').replace("</html>", ''),
                output = Mustache.render(template, context);
            $window.open().document.documentElement.innerHTML = output;
        }
    });
}; 
```

}]);

# php - 跨域查看网站图标

> ID：15352327
> 
> 赞同：-1
> 
> 时间：2013-03-12T02:35:59.277
> 
> 标签：php, gd, favicon

我有一个希望非常快速的帮助请求，我希望它甚至会起作用。如果需要，我很乐意使用 GD。

我有用户将使用他们在内部 Intranet 中的帐户登录作为他们的主页，我们将允许他们自定义一些收藏夹，以便无论他们使用什么站点都可以更轻松地访问他们的页面。

这样做不是问题，但是我有兴趣为每个按钮生成一个按钮，该按钮将显示图标（使用每个网站的图标）以及每个按钮的自定义文本。

我用过谷歌，甚至没有发现有人要求在 Firefox 和 Internet Explorer 故障排除的选项卡之外执行此操作。我希望它很容易，更不用说可能了。如果没有，我为浪费您的时间而道歉。

一如既往地感谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:24:43.993

Favicon 被定义为两种方式之一，favicon.ico 的存在或索引页面上元标记内的规范。

首先，只需获取 favicon.ico：

```
$icon = file_get_contents('http://www.google.com/favicon.ico');
file_put_contents('/some/local/path/google-favicon.ico',$icon); 
```

如果这显示 404（file_get_contents 返回 false，或者 $icon 为 false），那么您可以执行以下操作：

```
$content = file_get_contents('http://www.quotes.uk.com/');
preg_match_all('/<link.*rel="icon".*href="([^"]+)"/i',$content,$out);
$icon = file_get_contents($out[1][0]);
file_put_contents('/some/local/path/quotesuk-favicon.png',$icon); 
```

所以我的例子是简化的方法。更进一步：

*   验证结果是否正常（逻辑）
*   利用 mime-type，一些 favicon 是 PNG；您可以使用 cURL 来捕获标题，或者[`mime_content_type`](http://php.net/mime_content_type)如果启用了 mime 魔法来猜测（[`fileinfo`](http://www.php.net/manual/en/function.finfo-file.php)如果可用，则错误）
*   在此处查看更多包含网站图标的方法：[http](http://www.quotes.uk.com/web-design/meta-tags.php) : //www.quotes.uk.com/web-design/meta-tags.php（“网站图标元标记”部分）
*   考虑加强我的正则表达式，或完全使用另一种方法（SimpleXML？），因为它没有考虑属性的顺序（可能会有所不同）
*   不要像我的那样写你的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:06:39.210

进一步看，它似乎不像我想要的那么简单，尽管我宁愿在本地缓存它。到目前为止，我找到的解决方案是使用谷歌的以下服务，如果有人有更好的解决方案，请告诉我，因为这不是我想要解决问题的方式。谢谢！

[http://www.google.com/s2/u/0/favicons?domain=www.stackoverflow.com](http://www.google.com/s2/u/0/favicons?domain=www.stackoverflow.com)

# d3.js - 使用 JOINS 是否也有性能提升

> ID：15352330
> 
> 赞同：0
> 
> 时间：2013-03-12T02:36:49.107
> 
> 标签：d3.js

我正在考虑散点图……上面有很多圆圈的图。假设它有5000个圆圈。然后我看到一些代码说 Ok here is you how you draw "one" circle with D3,现在我想要其中的 5000 个，每个都是一个 DOM，对吗？那么浏览器会崩溃还是可以处理呢？然后我来到了这篇博文 [http://bost.ocks.org/mike/join/](http://bost.ocks.org/mike/join/) 这解释了 JONIS.... 那么这是否意味着如果我使用 JOINS 那么我不需要创建 5000 个单独的圈子和性能会大幅度改善吗？或者它只是一个很好的语法并且性能仍然是一样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:32:56.653

加入只是意味着如果您加载一些新数据，那么您将能够轻松分离：新圈子（`selection.enter()`），删除圈子（`selection.exit()`）和所有圈子（`selection`）。！

在下图中，元素对应于已加载的数据，数据对应于您将用于创建新圆圈的新数据。

[元素与数据](http://i.stack.imgur.com/8zMAA.png)

因此，您仍将加载 5000 个单独的圈子。但是，如果您只更新一个圆圈，那么您将不会使用 重绘 5000 个圆圈`selection.enter()`。因此，通过明智地使用此工具，您可以提高动态可视化的性能。

# java - 坚持比较字符串

> ID：15352331
> 
> 赞同：0
> 
> 时间：2013-03-12T02:36:49.227
> 
> 标签：java

我必须创建一个应用程序来提示用户输入他或她的名字，包括标题。*如果字符串以Mr.*开头，则应用程序应显示“Hello,sir” ，如果字符串以*Ms.,Mrs. 或 Miss*开头，则显示“Hello,ma'am”，否则应显示“Hello , *name* ”，其中*name*是用户的姓名。

到目前为止，这就是我所拥有的，当用户输入 Mrs 时，应用程序会阻塞，因为它首先找到*Mr* s，我无法弄清楚我可以做些什么来让它工作。让我知道，先谢谢大家的回答！初学者Java所以请保持简单！

```
package chapter6java;
import java.util.Scanner;
import java.lang.String;

public class FormalGreeting {

    public static void main (String [] args) {
        String name, mr = "Mr", mrs = "Mrs", ms = "Ms", miss = "Miss";
        Scanner input = new Scanner(System.in);

        System.out.print("Enter your name including title (ie. Mr, Mrs): ");
        name = input.nextLine();

        if (name.startsWith(mr)) {
            System.out.println("Hello,sir");
        } else if (name.startsWith(mrs)) {
            System.out.println("Hello,ma'am");
        } else if (name.startsWith(ms)) {
            System.out.println("Hello,ma'am");
        } else if (name.startsWith(miss)) {
            System.out.println("Hello,ma'am");
        } else {
            System.out.println("Hello," +name);
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:41:58.553

```
String.split("\\."); 
```

如果您的字符串有一个点，它将被拆分。然后你可以比较“夫人”和“先生”。

或者你可以用空格分割（如果有的话，删除字符串末尾的点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:46:39.913

如果其他情况，请尝试交换“先生”和“夫人”

```
if (name.startsWith(mrs)) {
    System.out.println("Hello,ma'am");
} else if (name.startsWith(mr)) {
    System.out.println("Hello,sir");
}else ...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:40:52.207

将您的比较更改为首先比较`mrs`：

```
 if (name.startsWith(mrs)) {
        System.out.println("Hello,ma'am");
    }else if (name.startsWith(ms)) {
        System.out.println("Hello,ma'am");
    }else if (name.startsWith(miss)) {
        System.out.println("Hello,ma'am");
    }else if (name.startsWith(mr)) {
        System.out.println("Hello,sir");
    }else{
        System.out.println("Hello," +name);
    } 
```

解释：

在您的解决方案中，程序流将进入第一个`if`分支（即名称以 开头的分支`mr`）。由于`mrs`也以 开头`mr`，因此您需要更改比较顺序以比较`mrs`之前`mr`

# asp.net - 限制 ADFS 2.0 使用特定 OU 而不是域级别访问

> ID：15352332
> 
> 赞同：3
> 
> 时间：2013-03-12T02:36:50.713
> 
> 标签：asp.net, wif, adfs2.0, adfs, claims

考虑以下示例场景：

*   我有一个用于生产、测试​​和开发的单一 Active Directory 域（每个域在 OU 级别分开）。
*   我想在测试 OU 级别安装 ADFS，并且我不希望在测试 OU ADFS 中经过身份验证的用户能够访问（读取和写入）其他 OU。

这可能吗？我们能否限制 ADFS 2.0 仅在特定 OU 下工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:57:59.100

虽然限制 ADFS 2.0 在特定 OU 下工作是不可行的（根据我阅读的资源和恕我直言），但我们可以限制特定 OU 内的用户访问。

这可以分两步完成：

1.  添加声明规则以提取 AD 对象 DN。

    • 要提取此声明，请从 ADFS 管理控制台转到 ADFS 2.0 -> 信任关系 -> 声明提供者信任 -> 单击 Active Directory -> 编辑声明规则。

    • 在接受转换规则下，添加新规则

    ```
     Claim rule name – DN (can be anything)
           LDAP Attribute – distinguishedname 
           Outgoing claim type – http://temp.org/claims/DistinguishedName 
    ```

    • 这将提取 AD 中每个对象的 DN

2.  添加新的授权规则（在所需应用程序的信赖方信任中）以允许来自特定 OU 的用户访问应用程序。

    • 转到 ADFS 管理控制台 -> 信任关系 -> 信赖方信任 -> 选择应用程序 -> 编辑声明规则

    • 在颁发授权规则（第二个选项卡）下，删除现有规则“允许所有用户”（如果有）并在 - 使用自定义规则发送声明下添加新规则：名称：XXX（任何值）

    ```
    Custome rule: 

    c:[Type == "http://temp.org/claims/DistinguishedName", Value =~"^.*    (OU=EMPLOYEES,OU=Org-Users,DC=ADCORP,DC=LAB)$"] => issue(Type = "http://schemas.microsoft.com/authorization/claims/permit", Value = "PermitUsersWithClaim"); 
    ```

    例如：OU=Users,OU=EMPLOYEES,OU=Org-users,DC=ADCORP,DC=LAB 中的用户将有权访问

    OU=Admins,OU=EMPLOYEES,OU=Org-Users,DC=ADCORP,DC=LAB 中的用户将有权访问

    OU=Users,OU=CONTRACTORS,OU=Org-Users,DC=ADCORP,DC=LAB 中的用户将无权访问

有关添加 DN 的更多详细信息，请参阅此[链接](https://stackoverflow.com/questions/11968455/send-distinguished-name-adfs-2-0)，有关添加自定义规则的详细信息，请参阅[msdn 帖子。](http://social.technet.microsoft.com/Forums/hu/winserverDS/thread/762a4ab1-1649-442c-91a4-654ee7b3664f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T18:43:49.413

是否有可能扭转限制？因此，除了一次只允许 1 个 OU 之外，您可以允许所有人吗？

所以字符串可能是

C:[Type == " [http://temp.org/claims/DistinguishedName](http://temp.org/claims/DistinguishedName) ", Value =~"^.* (OU=EMPLOYEES,OU=Org-Users,DC=ADCORP,DC=LAB)$"] = >问题（类型=“ [http://schemas.microsoft.com/authorization/claims/deny](http://schemas.microsoft.com/authorization/claims/deny) ”，值=“PermitUsersWithClaim”）；

这样，除员工 OU 之外的每个人都可以访问。

# database - joomla 2.5中的会话表太大

> ID：15352333
> 
> 赞同：4
> 
> 时间：2013-03-12T02:37:03.000
> 
> 标签：database, joomla2.5

我有一个使用 joomla 2.5 的新闻网站。昨天我注意到数据库的大小。它超过 800 MB。然后我查看了数据库，发现有一个表（会话表）真的很大。我通过谷歌搜索了一个解决方案，发现 Joomla 会自动创建和销毁会话。我将会话处理程序更改为“无”，但 joomla 仍在数据库中创建会话。它不会自动从会话表中删除记录。数据库的这种大小每天都在增加。我该如何解决？

# java - Java servlet 类需要什么动作变量？

> ID：15352338
> 
> 赞同：-1
> 
> 时间：2013-03-12T02:37:46.153
> 
> 标签：java, tomcat, servlets

我在根 /Reverse 目录中有这个 reverse.html

```
<!DOCTYPE html>
<html>
  <body>
    <h1>Assignment Servlets-2 - Reverse</h1>

    <form method='post' action='ReverseServlet'>
      Text: <input type='text' name='text' size='50'><br><br>
      <input type='submit' value='submit'>
    </form>
  </body>
</html> 
```

这是/WEB-INF目录下的web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
version="2.5">
  <servlet> <servlet-name>ReverseServlet</servlet-name> 
  <servlet-class>ReverseServlet</servlet-class> </servlet> 

  <servlet-mapping> <servlet-name>ReverseServlet</servlet-name> 
    <url-pattern>/reverse</url-pattern> 
  </servlet-mapping>
</web-app> 
```

这是 ReverseServlet.java 源，它被编译成 /classes 目录中的类文件

```
import java.io.* ;
import javax.servlet.http.* ;

public class ReverseServlet extends HttpServlet {
    public void doGet( HttpServletRequest request, HttpServletResponse response ) {
        String text = request.getParameter("text");

        response.setContentType("text/html");
        try {
            PrintWriter out = response.getWriter();
            out.println( new StringBuffer( text ).reverse().toString() );
            out.close();
        } catch( Exception e ) {
            System.out.println( "cannot get writer: " + e );
        }
    }
} 
```

它们都在正确的目录中，我可以加载 reverse.html，但该操作不会与 ReverseServlet 类相关联。我正在使用 Tomcat 7.0，并且我已经得到了一个简单的 servlet 来工作，所以我知道它安装正确。它只是不会在点击提交时进入 servlet 代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:25:34.437

问题是您正在使用**post**方法发送请求并尝试使用**get**方法捕获它。

1种方式：

尝试从表单中`post`更改`get`或删除方法属性：
`<form method='get' action='/reverse'>`

或者

2 方式：在您的 ReverseServlet 中实现 doPost 方法以捕获来自 post 方法的请求：

```
public void doPost( HttpServletRequest request, HttpServletResponse response ){...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:40:55.873

表单的操作应该是 servlet 的 URL，而不是它的名称：

```
<form method='post' action='/reverse'> 
```

# .net - 无法连接到快速书

> ID：15352340
> 
> 赞同：1
> 
> 时间：2013-03-12T02:38:01.033
> 
> 标签：.net, vb.net, quickbooks, qbxml

我正在尝试构建一个可以将发票添加到 QuickBooks 的 vb 应用程序。但是我在开始时开始连接到 QB 时遇到了麻烦。

我下载并安装了 QuickBooks Premier 2012-13，但使用的是试用版。我还下载了 QuickBooks SDK 12.0。

但是，当我开始在 QuickBooks 打开的情况下测试与 QuickBooks 的连接时。我收到此错误消息： COMException is unhandled 找不到请求的连接类型。

这是我在代码中得到的：

> 暗淡 strTicket 作为字符串
> 
> 将 qbxmlcom 调暗为新的 QBXMLRP2Lib.RequestProcessor2
> 
> qbxmlcom.OpenConnection2("", "测试应用", QBXMLRP2Lib.QBXMLRPConnectionType.localQBD)
> 
> strTicket = qbxmlcom.BeginSession("", QBXMLRP2Lib.QBFileMode.qbFileOpenDoNotCare)

我不知道我做错了什么。有没有我错过的设置？我什至尝试使用 SDKTestPlus3 来测试连接，它得到了同样的错误信息。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T20:20:00.970

您需要在打开公司文件的情况下启动 Quickbooks，否则您需要在 qbxmlcom.BeginSession("{Company File Here}", QBXMLRP2Lib.QBFileMode.qbFileOpenDoNotCare) 中提供文件的路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:14:47.450

虽然[本文](http://www.rfcons.com/index.php?id=70&tx_knowledgebase_pi1%5Bcmd%5D=kb_viewOneArticle&tx_knowledgebase_pi1%5Buid%5D=51&cHash=98016056a3)提到了时间跟踪器，但我相信它可能会支持您的问题。

请特别注意以下词语（强调我的）：

> QuickBooks 免费版、QuickBooks Simple Start***和类似***产品可能无法正常工作。***这是 Intuit***对其产品套件施加的技术限制，完全独立于 TimeTTracker MX2、QBE。请联系 Intuit 以确认您的特定 QuickBooks 版本是否***应该包含第三方应用程序集成 (qbXML) 功能***

听起来 Intuit 有一个政策来代替基于特定版本启用/禁用集成功能。如果他们以这种方式削弱了 Premier Trial，这将解释您的 COMException。

# authentication - Auth::attempt 不起作用 [Laravel]

> ID：15352348
> 
> 赞同：0
> 
> 时间：2013-03-12T02:38:30.243
> 
> 标签：authentication, laravel

这是我的问题：

我有一个表 users 是：

id 用户名 邮箱 密码

另外，一个模型用户，在注册时，一切都很好。

现在，当我想登录时，这是我的**观点**：

```
@layout('main')

@section('content')

@if(Session::has('login_errors'))

<div class='alert alert-error'>Wrong ID</div>

@endif

{{Form::open('user/login', 'POST', array('class' => 'well inline-form'))}}

{{Form::token()}}

{{Form::text('username', Input::old('username'), array('class' => 'input-large', 'placeholder' => 'email'))}}
{{Form::password('password', array('class' => 'input-large', 'placeholder' => 'Mot de passe'))}}

{{Form::submit('Login', array('class'=>'btn btn-primary'))}}

{{Form::close()}}

@endsection 
```

这是我在**控制器中所做的**

```
public function action_login()
{
    if(Auth::check()){return Redirect::to('user');}

    if(Request::method() == 'POST')
    {

        $credentials = array('username' => Input::get('username'), 'password' => Input::get('password'));

        if(Auth::attempt($credentials))
        {
            return Redirect::to('user');
        }

        else
        {

            return Redirect::to('user/login')->with_input()->with('login_errors', true);

        }
    }

    Section::inject('title', 'Login');

    return View::make('user.login');

} 
```

它应该工作，但它没有。

错误如下：当我单击登录按钮时，我的表单传递给我的控制器并被读取。我知道我的 Input::get('username'), Input::get('password') 是正确的，并且在 db 中注册。

问题是：即使我的电子邮件/密码是正确的，我也无法获得身份验证，并且我收到了**错误 ID**的消息。我希望我很清楚...

你应该知道的事情：

我没有更改配置中的 Auth.php，所以用户名是电子邮件

我在注册时对密码进行哈希处理：'password' => Hash::make(Input::get('password'))

**编辑和解决方案**

好的，我想通了！

首先 ：

*   我使用了 Php 5.3.6 和 Hash 至少需要 5.3.7
*   之后，我意识到在我的数据库中，密码最多为 40 个字符。我觉得我好笨

希望它会帮助某人/线程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:55:29.917

一方面，Controller::detect() 是一种有缺陷的方法 - 在许多地方都提倡不要走捷径并使用该方法。指定您需要的每条路线 - 它不仅更具可读性，而且更容易理解请求的情况。

如果您没有更改 auth 配置，那么这应该意味着从表单提供的用户名应该是某人的 EMAIL，因为这就是 Auth 将检查的内容。因此，请确保是这种情况。如果您想与用户名匹配，请务必同时设置。

此外，还需要更多信息——你还没有真正开始什么不起作用，只是它不起作用。究竟是什么，不起作用？确保您遵循我上面的观点，但它仍然无法正常工作，我们需要更多信息/代码。Atm，您的错误报告相当有缺陷。

# php - 为什么我提交表单时 cookie 值没有立即更新？

> ID：15352349
> 
> 赞同：1
> 
> 时间：2013-03-12T02:38:30.837
> 
> 标签：php, cookies

为什么我提交表单时 cookie 值没有立即更新？
当我提交表单时，输出的refer_id仍然是旧的，但是当我刷新浏览器时，它改变了，为什么不能立即改变？

```
<?php 
if(isset($_GET['refer_id'])){
    setcookie('refer_id',$_GET['refer_id'],time()+3600);
}
print_r($_COOKIE);
 ?>
<p>cookie refer_id:<?php echo $_COOKIE['refer_id'];?></p>
<form method="get">
    <input type="text" name="refer_id" />
    <input type="submit" value="submit" />
</form> 
```

![在此处输入图像描述](../Images/fdb1297d14ffa6b1c0608f5ba24264e4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:47:27.960

想象它是这样的：

1.  一些客户要求您的页面。您`setcookie()`并将其发送到标题中。
2.  该客户端接收该 cookie 标头，将其放入它的 cookie 存储中。
3.  当发出下一个请求时，该 cookie 将与标头一起发送回服务器。
4.  服务器看到*该*cookie，将其设置为 superglobal `$_COOKIE`。
5.  您的服务器使用新指令“更新”*客户端*的cookie 值。`setcookie()`
6.  在响应之前，您读取以输出*仍然是最后一个 cookie 值的*`$_COOKIE`值。
**   浏览器接收新标头，更新该 cookie 的值，并显示内容，并从服务器读取*旧值。**

 *`setcookie()`不影响`$_COOKIE`，除非您计算往返。

冲洗，重复。*

# html - Html 正文背景图像在 ios 5 中不起作用

> ID：15352350
> 
> 赞同：0
> 
> 时间：2013-03-12T02:38:32.847
> 
> 标签：html, ios, css, ipad, background

此代码在 ios 6 中有效，但在 ios 5 中无效。知道吗？

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"bg10.jpg"];
NSURL *url = [[NSURL alloc] initFileURLWithPath:path isDirectory:NO];

NSString *htmlString = [[NSString alloc] initWithFormat: @"<html><body background=\"%@\"></body></html>",url];

[self.WebView setOpaque:NO];
self.WebView.backgroundColor = [UIColor clearColor];
[WebView loadHTMLString:htmlString baseURL:baseURL]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:15:20.217

你可以做一件事。
放在`imageview`后面`webview`并使其`webview`透明：

```
WebView.backgroundColor = [UIColor clearColor];
WebView.opaque = NO; 
```

我认为您也可以在 UIWebViews 属性中的 Interface Builder 中进行这些更改。

现在使用您的图像设置图像视图。它将作为背景工作，`webview`因为它现在是透明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:44:44.920

`background`不支持body属性`HTML5`。相反，您应该调整它并使用 CSS，以保证它可以移植到不同的 iOS 版本。

这应该可以解决问题：

```
NSString *htmlString = 
 [[NSString alloc] initWithFormat: 
    @"<html><body style=\"background-image:url(%@)\"></body></html>",url]; 
```

# selenium - Selenium WebDriver - 能够在 IFrame 中定位对象但 Click() 不准确

> ID：15352351
> 
> 赞同：3
> 
> 时间：2013-03-12T02:38:36.043
> 
> 标签：selenium, webdriver, selenium-webdriver

被测应用程序为功能生成一个 IFrame。我可以使用以下任何定位器策略 XPATH、CSS 或 LinkText 在 IFrame 上完美定位元素。但是，当我执行 a 时`Click()`，代码会单击不同的位置。例如，屏幕上有一个包含 4 个答案的多项选择题，脚本应该单击第 3 个选项，但最终单击第 1 个选项。如果按钮根本无法单击该按钮，则问题会更加严重。该`Click()`事件不会引发任何错误。我曾尝试使用该`Action()`界面，但没有运气。会`Action.Perform()`引发屏幕元素在 HTML 之外的错误。有人可以帮忙吗？

我正在使用 Selenium WebDriver (.NET) 版本 2.31 和 Firefox 19.0.2 与 .NET 框架 4.0。

```
driver.SwitchTo().Frame(2);
System.Threading.Thread.Sleep(20000);
IWebElement Answer1 = driver.FindElement(By.XPath(".//*[@id='question-reload']/div[3]/div[2]/ul/li[1]/a"));
Answer1.Click();
driver.FindElement(By.LinkText("Find the embassy")).Click();
IWebElement Next = driver.FindElement(By.XPath(".//*[@id='next']/b/i"));
int X = Next.Location.X;
int Y = Next.Location.Y;
Next.Click();

    for (int i = 0; i < 59; i++)
    {
        System.Threading.Thread.Sleep(3000);        
        IWebElement newNext = driver.FindElement(By.XPath(".//*[@id='next']/b/i"));
        newNext.Click();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:08:49.857

嗯...我能够通过注入 JavaScript 来单击“下一步”按钮来解决这个问题。代码如下：

```
System.Threading.Thread.Sleep(1000);               
IJavaScriptExecutor exec = (IJavaScriptExecutor)driver;
StringBuilder locator = new StringBuilder();
locator.Append("document.getElementById('next').click();");
exec.ExecuteScript(locator.ToString()); 
```

非常感谢[这篇文章](https://stackoverflow.com/questions/13040719/click-on-css-selector-not-working-in-selenium-webdriver)和所有参与的人！！

# python - 如何将单词中的一个字母转换为大写。像维基到维基

> ID：15352355
> 
> 赞同：-3
> 
> 时间：2013-03-12T02:39:19.137
> 
> 标签：python

如何将单词中的一个字母转换为大写。例如wiki到wIkI，我知道如何大写它我只能将整个单词大写或者我只能将一个字母大写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:45:26.977

为什么不直接使用`str.replace`？

```
word = 'wiki'
letter = 'i'
print word.replace(letter,letter.upper()) 
```

你可以用稍微多一点的努力做同样的`string.maketrans`事情`str.translate`

```
import string
trans = string.maketrans(letter,letter.upper())
print word.translate(trans) 
```

如果您重复使用同一个转换表，后一种形式*可能会更有效，但除非这是一个非常紧密的循环，否则您不太可能注意到运行时的差异。*后一种形式也非常适合进行一些替换。例如，要使所有元音大写，您可以使用：

```
trans = string.maketrans('aeiou','AEIOU') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:45:17.950

如果它只是“我”，你可以做

```
string = string.replace('i','I') 
```

或者，如果有更多字母，请尝试以下操作：

```
letters = ['a','b','c','d','e','f']
string = 'acgfdb'
for l in letters:
    string = string.replace(l.lower(),l.upper()) 
```

好的，根据您的评论，您还想从用户那里获得输入，然后试试这个......

```
string = raw_input('Enter a word: ')
letter = raw_input('Enter the letter to change to capital: ')
while len(letter) != 1:
    print 'enter a single letter'
    letter = raw_input('Enter the letter to change: ')
string = string.replace(l.lower(),l.upper())
print string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:44:17.543

也许：

```
a = 'text'
b = ('t', 'x')
print ''.join(x.upper() if x in b else x for x in a) 
```

# android - 在android上编译avahi时如何获取Android.mk，

> ID：15352357
> 
> 赞同：0
> 
> 时间：2013-03-12T02:39:30.890
> 
> 标签：android, avahi

我被分配了使用 android 补丁[http://avahi.org/ticket/354](http://avahi.org/ticket/354)将 avahi 核心编译为 android 的任务。使用补丁后，任何 Avahi 子目录（如 \avahi-core 等）中都没有 Android.mk 文件。我怎样才能得到它们。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:13:53.763

1.tar avahi-0.6.31 2.patch -p1 < 0001-Add-Android-support.patch 补丁 -p1 < 0002-Add-uninstalled.pc.in-files.patch 3.cd avahi-0.6.31 ./ configure --sysconfdir=/etc --localstatedir=/var make 4.cd 子目录 make Android.mk 然后你会在所有子目录中看到Android.mk。ndk-build V=1 NDK_LOG=2 APP_ABI="armeabi armeabi-v7a"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T10:19:00.310

你应该去**avahi-core**并执行 command `make Android.mk`，然后你会找到**Android.mk**。

# c# - 汇总和修剪 DataGridView

> ID：15352359
> 
> 赞同：0
> 
> 时间：2013-03-12T02:39:54.000
> 
> 标签：c#, datagridview, sum, mschart, delete-row

我有一个如下所示的 datagridview：

```
Day          Duration (mins)

Monday        2

Monday        3

Monday        4

Tuesday       3 

Tuesday       5

Tuesday       2 
```

我是否有可能对持续时间进行求和，然后将类似的日期缩减为一行，如下所示？

```
Day          Duration (mins)

Monday        9

Tuesday       10 
```

这样做的原因是因为我想将结果绘制到 Duration vs Day of Week 的图表上。您可能会质疑我收集的奇怪数据，但我还有另一列填充了一天中的时间，在这种情况下不需要它，所以我省略了它。

我只想在将它们绘制到图表中之前将一天的总持续时间加起来。可能会朝着错误的方向前进，但任何指针都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:59:32.097

您可以使用[ReportViewer](http://www.gotreportviewer.com/)控件。

> ReportViewer 是一个可自由再分发的控件，可以将报表嵌入到使用 .NET Framework 开发的应用程序中。

或者您可以使用[DataGridView.DataSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)属性并将任何集合用作 DataGridView 的数据源。

# asp.net-mvc - ASP.NET MVC DDD 应用程序中的组合根

> ID：15352363
> 
> 赞同：5
> 
> 时间：2013-03-12T02:40:31.653
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, domain-driven-design

我目前正在阅读 Mark Seemann 的“.NET 中的依赖注入”。我想知道编写 DDD ASP.NET MVC 应用程序的最佳方法是什么。

在简化的场景中，一般的经验法则是拥有作为应用程序核心的域模型，并且对数据层或表示没有任何依赖关系。它将暴露 Presentation 将使用的某些接口（因此依赖）和 Data Layer 将实现（因此依赖）。所以一切都很好，很清楚。

![DDD 应用程序中的依赖项](../Images/f8b7be43fe9a5581f3a18a4d4f727efa.png)

但是，现在，当我们编写应用程序时。对于 ASP.NET MVC 应用程序，我们将在 global.asax ( [http://blog.ploeh.dk/2011/07/28/CompositionRoot](http://blog.ploeh.dk/2011/07/28/CompositionRoot) ) 中执行此操作。我们的组合根需要依赖于所有层，因为它需要注册所有适用的类型。

![DDD 应用程序中的组合根](../Images/08559285bed3d08fcb0a622fb4c0bc85.png)

这使得所有依赖项看起来都很混乱，现在表示层有一个对数据访问层的项目引用（在 VS 术语中）。开发人员很容易犯错误并直接使用数据访问层的类型，这将有效地耦合这些层。

有没有一种干净的方法来解决这个难题？将合成根放在表示层之外几乎会很好，但在 MVC 中这是不可能的。

**更新**

在问了这个问题后，我找到了一个相关的问题： [DAL -> BLL <- GUI + composition root。如何设置 DI 绑定？](https://stackoverflow.com/questions/5267525/dal-bll-gui-composition-root-how-to-setup-di-bindings) 它有一些有趣的解决方案。公认的解决方案几乎是完美的，但是我希望组合根位于表示层之外，并参考表示层而不是其他方式。

这样做的一个原因是，对我来说，它在概念上更加清晰——构图应该放在最重要的位置。另一个原因是，在我的情况下，表示层中已经有许多 DI 对象（主要是用于查看模型映射器的域对象），我也希望将它们组合在一个位置。

不过，这个帖子给了我一些想法，我认为我想做的事情可能是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:41:32.210

> 开发人员很容易犯错误并直接使用数据访问层的类型，这将有效地耦合这些层。

无论您如何尝试阻止它，都很容易做很多愚蠢的事情。不要按照开发人员可能不会做的事情来为您的应用程序建模。对其进行建模，以便正确地做事。

> 他接受的解决方案几乎是完美的，但是我希望组合根位于表示层之外，并参考表示层而不是其他方式。

我的容器支持您的要求。在每个项目中创建一个单独的模块来注册其他所有内容：

```
public class CompositionRoot : IContainerModule
{
    public void Register(IContainerRegistrar registrar)
    {
        registrar.RegisterType<ISomeType, SomeType>();
    }
} 
```

在您的 UI 项目中，您只需加载所有 dll：

```
registrar.RegisterModules(Lifetime.Scoped, 
                          Environment.CurrentDirectory, 
                          "myproject.*.dll"); 
```

`[Component]`就是这样（如果你用属性标记你的实现，你也可以用一行替换大多数手动 RegisterType 等）。

[https://github.com/jgauffin/griffin.container](https://github.com/jgauffin/griffin.container)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:31:38.333

大多数 IoC 容器都公开了将绑定逻辑分组到一个模块中的概念。

*   Ninject 调用这些[模块](http://ninject.codeplex.com/wikipage?title=Modules%20and%20the%20Kernel)
*   Structuremap 调用这些[注册表](http://docs.structuremap.net/RegistryDSL.htm)
*   温莎称这些[安装人员](http://docs.castleproject.org/Default.aspx?Page=Installers&NS=Windsor&AspxAutoDetectCookieSupport=1)
*   ETC

效果是只有包含模块的程序集需要知道具体的实现，而组合根只需要访问模块。

示例（伪）：

```
// In data access assembly
namespace MyProject.DataAccessLayer
{
    internal class MyRepository : IMyRepository
    {
        // ...
    }

    public class DataAccessModule : IModule
    {
        void Configure(container)
        {
            container.ForInterface<IMyRepository>()
                     .UseType<MyReposutiry>()
                     .Singleton();
        }
    }
}

// In presentation layer assembly
namespace MyWebApp
{
    void Booptstrap()
    {
        var iocContainer = /* ... */

        iocContainer.AddModule(new RepositoryModule());
    }
} 
```

请注意，MyRepository 的具体实现类是**internal**。只有模块需要看到它。

这种模式的自然扩展是每个程序集**只**公开一个 IoC 模块，所有其他具体类都是内部实现细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T03:33:58.357

获得更大程度封装的一种方法是将域公开为 HTTP 服务，例如 ASP.NET WebAPI。然后，ASP.NET MVC 解决方案将引用此 API。不会有数据访问依赖，只有对服务的引用。为简单起见，可以将 API 的已发布语言提取到 MVC 表示解决方案可以引用的程序集中。这种方法的权衡是添加了移动部件以及创建和管理服务所涉及的步骤。

此外，拥有您描述的配置是完全可以接受的。通过提取服务获得的封装可能不值这个价。开发人员应该有纪律来防止您描述的那种泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:16:33.833

我正在研究以 eulerfx 上述方式构建的解决方案（这是系统要求，而不是我自己的设计选择）。它将解决您的问题，尽管您可能需要考虑将您的域模型类与您的域分开。此外，您将需要另一个用于 web api 服务的组合根，正如他所指出的，从 webcontroller 视图模型（必须在服务和网站之间共享）到域模型的进一步映射层。

我现在使用 .NET 中的依赖注入一书中描述的方法创建了一些解决方案，我可以说使用其中描述的方法肯定意味着更好的质量、松散耦合的代码。

祝你好运！

# html - 画布元素上的预格式化文本

> ID：15352364
> 
> 赞同：0
> 
> 时间：2013-03-12T02:40:36.277
> 
> 标签：html, text, canvas, html5-canvas, pre

我在将用户在文本区域中输入的新行和多个空格反映到画布元素上时遇到问题。我似乎找不到将文本转换为预格式化的方法。

基本上我的网站的工作方式是我有一个文本框，用户可以在其中输入文本区域内的文本。然后将此文本传递给 canvas 元素。

我提供了我的代码示例。本质上，当用户在文本区域内键入时，它会传递给一个名为 inputtextgo1 的函数。输入文本 1 从文本区域获取文本并将文本复制到画布元素（Section1 画布）上。

HTML：

```
 <canvas id="Section1Canvas" width="500" height="95" >Your browser does not support the HTML5 canvas tag.</canvas>
    <textarea class="bags"  id="bag1areatext" onkeyup="inputtextgo1()" name="Text">Sample Text</textarea> <br/> 
```

Javascript：

```
var canvas = document.getElementById('Section1Canvas'),
context = canvas.getContext('2d');

section1backgroundimage.onload = function(){
    context.drawImage(section1backgroundimage, 0, 0);
    context.fillText("Sample Text",250,50);
    }

section1backgroundimage.src = 'images/Selection/Bag/Section1/LightBlue.jpg';

context.font="34px " + selfonttype;
context.textAlign="center";
context.fillStyle = seltextcolor;

    function inputtextgo1() {
    var y = document.getElementById("bag1areatext").value;
    context.clearRect(0, 0, 500, 95)
    context.font="34px " + selfonttype;
    context.fillStyle = seltextcolor;
    context.fillText(y,250,50);

} 
```

selfontype 是用户选择的字体，section1backgroundimage 是用于画布背景的图像文件，seltextcolor 是用户选择的字体颜色。

我希望我创建的画布元素能够反映用户在文本区域中输入的新行和空格。此外，我希望将文本换行（如果文本接触画布边缘以进入下一行）。

这只是我用来更新函数的代码片段。如果您需要其他代码来帮助解决问题，请告诉我。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:24:35.723

**如果您还想处理新行等，则必须手动转换它们。**

Canvas 本身不会接受它们。我更新了 MarkE 的代码来管理它们：

```
function wrapText(context, text, x, y, maxWidth, lineHeight) {
    //manage carriage return
    text = text.replace(/(\r\n|\n\r|\r|\n)/g, "\n");
    //manage tabulation
    text = text.replace(/(\t)/g, "    "); // I use 4 spaces for tabulation, but you can use anything you want
    //array of lines
    var sections = text.split("\n"); 

     for (s = 0, len = sections.length; s < len; s++) {
          var words = sections[s].split(' ');
          var line = '';

          for (var n = 0; n < words.length; n++) {
              var testLine = line + words[n] + ' ';
              var metrics = context.measureText(testLine);
              var testWidth = metrics.width;
              if (testWidth > maxWidth) {
                  context.fillText(line, x, y);
                  line = words[n] + ' ';
                  y += lineHeight;
              } else {
                  line = testLine;
              }
          }
          context.fillText(line, x, y);

         //new line for new section of the text
         y += lineHeight;
      }
}

      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');
      var maxWidth = 350;
      var lineHeight = 25;
      var x = (canvas.width - maxWidth) / 2;
      var y = 60;
      var text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. \nLorem Ipsum has been the industry's standard dummy text ever since the 1500s.";

      context.font = '14pt Verdana';
      context.fillStyle = '#000';

      wrapText(context, text, x, y, maxWidth, lineHeight); 
```

我已经更新了小提琴：http: [//jsfiddle.net/PFBXM/4/](http://jsfiddle.net/PFBXM/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:32:39.097

**这是在画布上绘制环绕文本的方法。**

代码的重点是使用 context.measureText() 来测试每个新词是否会超出画布的右边框。

如果要直接绘制到边框，可以将 maxWidth 设置为画布宽度。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/PFBXM/](http://jsfiddle.net/m1erickson/PFBXM/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="200"></canvas>
    <script>
      function wrapText(context, text, x, y, maxWidth, lineHeight) {
        var words = text.split(' ');
        var line = '';

        for(var n = 0; n < words.length; n++) {
          var testLine = line + words[n] + ' ';
          var metrics = context.measureText(testLine);
          var testWidth = metrics.width;
          if(testWidth > maxWidth) {
            context.fillText(line, x, y);
            line = words[n] + ' ';
            y += lineHeight;
          }
          else {
            line = testLine;
          }
        }
        context.fillText(line, x, y);
      }

      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');
      var maxWidth = 400;
      var lineHeight = 25;
      var x = (canvas.width - maxWidth) / 2;
      var y = 60;
      var text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.";

      context.font = '14pt Verdana';
      context.fillStyle = '#000';

      wrapText(context, text, x, y, maxWidth, lineHeight);
    </script>
  </body>
</html> 
```

# linux - 自定义别名的 Bash cd 命令自动完成

> ID：15352374
> 
> 赞同：3
> 
> 时间：2013-03-12T02:41:30.990
> 
> 标签：linux, bash, autocomplete, alias, cd

假设我有一个简单的函数作为`cd`.

`c(){ cd "$@"; }`

**如何获得** `cd` **新功能的原始自动完成工作？**请注意，`cd`仅自动完成目录名称，而不是简单的文件名。

我知道该`complete`命令，但是`cd`定位使用的自动完成功能到底在哪里？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:55:16.770

查找`/etc/bash_completion`或查找`/etc/bash_completion.d`系统范围的默认值。

# java - 线程 run() 函数调用

> ID：15352379
> 
> 赞同：0
> 
> 时间：2013-03-12T02:41:51.893
> 
> 标签：java, multithreading

对不起，如果重复，（如果重复，请引导我到正确的位置）

在线程机制中，

不直接调用 run() 函数 -> 因为如果调用它会直接调用函数。因此建议调用 start。

但是如果我们可以.run，会发生什么？是否调用 run() 和 .run 相同

如果我们多次调用 .run() （3-4 次），会不会像普通的函数调用一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:43:19.863

如果`run()`直接调用，它将在同一个线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:19:59.147

如果您`run()`直接调用，则与进行普通方法调用没有什么不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:22:02.077

`run()`只要不打算启动新线程，调用就完全有效。

事实上，线程池和调度程序就是这样做的。预先生成的线程调用或`run()`代替要求被调用者实现新接口。`Thread``Runnable`

实际上，调用 run() 将在同一个线程中执行其代码。我无法想象如果在单线程中执行会破坏任何多线程语义。

# java - 嵌套列表结构管理

> ID：15352380
> 
> 赞同：0
> 
> 时间：2013-03-12T02:41:52.753
> 
> 标签：java

我被困在试图管理列表列表的列表中。我已经声明并初始化了我的数据结构：

```
List<Vector<ArrayDeque<Vector_t>>> mData = new ArrayList<Vector<ArrayDeque<Vector_t>>>(
        6);

for (int i = 0; i < 6; ++i) {
    mData.add(i, new Vector<ArrayDeque<Vector_t>>());
    // mData.get(i).setSize(200);
}

for (int i = 0; i < 6; i++) {
    for (int k = 0; k < 200; k++) {
        mData.get(i).add(new ArrayDeque<Vector_t>());
        mData.get(i).get(k).add(new Vector_t());
    }
} 
```

其中 Vector_t 是：

```
class Vector_t {
    float x;
    float y;
    float z;
} 
```

这个初始化正确吗？在最后一个位置向数组 deque 添加值时，它会用最后一个元素替换整个 arraydeque，我不知道为什么。

此外，当我使用代码更改值时`mdata.get(1).get(42)`，元素所在的`mdata.get(0).get(40)`位置也会受到影响。再说一次，我不知道为什么？

例如，我给出了硬编码的值。这是我添加的方式

```
if (mData.get(dir.value).get(slice).size() >= sMaxNum_c)
     {
                 mData.get(dir.value).get(slice).removeFirst();
     }
              mData.get(dir.value).get(slice).addLast(result.acc); 
```

当向一个方向添加值时，其他方向值正在改变......:(

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:19:56.457

我不确定你想要实现什么，但对于初学者来说，你应该考虑使用除 Vector 之外的另一种数据结构，因为它已经过时了。

```
import java.util.ArrayDeque;
import java.util.ArrayList;
import java.util.List;
// Consider using another DataStructure such as Arraylist, as Vector<> is obsolete.
import java.util.Vector;

public class main {

    public static void main(String[] args) {

        // Use diamond inference.
        List<Vector<ArrayDeque<Vector_t>>> mData = new ArrayList<>(6);

            for (int i = 0; i < 6; i++) {
                Vector<ArrayDeque<Vector_t>> vav = new Vector<>();
                ArrayDeque<Vector_t> av = new ArrayDeque<>();

                for (int k = 0; k < 200; k++) {
                    av.add(new Vector_t(2.0f, 2.0f, 2.0f));
                }

                vav.add(av);
            }
        }
    } 
```

使用变量而不是调用 get() 这么多。

```
public class Vector_t {
private float x;
private float y;
private float z;

public Vector_t() {
    x = 0.0f;
    y = 0.0f;
    z = 0.0f;
}

public Vector_t(float x, float y, float z) {
    this.x = x;
    this.y = y;
    this.z = z;
}

public float GetX() {
    return x;
}

public float GetY() {
    return y;
}

public float GetZ() {
    return z;
}

public void SetX(float x) {
    this.x = x;
}

public void SetY(float y) {
    this.y = y;
}

public void SetZ(float z) {
    this.z = z;
} 
```

}

为您的课程使用 setter 和 getter，这完全是关于使用 OOP 编程概念 :)

如果您更具体地了解您要完成的工作，我相信我们可以提供帮助。

-弗朗西斯科

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:04:07.123

我的建议是按照 Amir 的建议引入一些类，或者至少通过引入一些命名良好的临时局部变量来使您的代码更易于理解。我不知道您要达到什么目的，但是使用一些局部变量进行重写可能会让您发现问题：

```
List<Vector<ArrayDeque<Vector_t>>> mData = new ArrayList<Vector<ArrayDeque<Vector_t>>>(
        6);

for (int i = 0; i < 6; ++i) {
    mData.add(i, new Vector<ArrayDeque<Vector_t>>());
}

for (Vector nextVector : mData) {

    for (int k = 0; k < 200; k++) {
        ArrayDeque<Vector_t> tempArray = new ArrayDeque<Vector_t>());
        tempArray.add(new Vector_t());
        nextVector add(tempArray);
    }
} 
```

# oauth - AggCat Java 框架无法读取证书文件

> ID：15352386
> 
> 赞同：0
> 
> 时间：2013-03-12T02:42:38.603
> 
> 标签：oauth, intuit-partner-platform, intuit, customer-account-data-api

我正在将 AggCat Java API 集成到我的网络服务器中。不幸的是，当我在 Tomcat（或 GlassFish）Web 服务器上运行 AggCat 1.0 Java 框架时，它无法正确读取我的 Java 密钥库 (.jks) 文件。

我通过一个独立的 Java 程序（它运行良好）运行以下相同的代码来验证这一点，然后尝试在 Tomcat Servlet 的方法中调用它：

```
public static void main(String[] args){
     AggCatTester aggcat = new AggCatTester();
     aggcat.testAggcat();
}

public void testAggcat() {
    Config.setProperty(Config.KEY_STORE_FILE, "./keystore.jks");
    Config.setProperty(Config.KEY_STORE_PASSWORD, "XXXXXXXX");
    Config.setProperty(Config.OAUTH_URL,
            "https://oauth.intuit.com/oauth/v1/get_access_token_by_saml");
    Config.setProperty(Config.CERT_ALIAS, "XXX");
    Config.setProperty(Config.KEY_PASSWORD, "XXXXXXXXX");

    OAuthAuthorizer oauth = new OAuthAuthorizer(consumerKey,
            consumerSecret, samlProviderId, userId);
    er.service = new AggCatService(new com.intuit.ipp.aggcat.core.Context(oauth));

    InstitutionDetail details = er.service.getInstitutionDetails(455);
    System.out.println(details.getInstitutionName());
} 
```

当我从独立的命令行 java 程序调用 testAggcat() 方法时，它没有问题并打印 ID 455 定义的机构。当我从 servlet 调用 testAggCat() 方法时，我得到一个“UnrecoverableKeyException”这表示我的密钥库密码对以下堆栈跟踪无效：

```
 SEVERE: com.intuit.ipp.aggcat.exception.OAuthException: com.intuit.ipp.aggcat.exception.AggCatException: Exception while reading the certificate file
    at com.intuit.ipp.aggcat.util.OAuthUtil.getOAuthTokens(OAuthUtil.java:82)
    at com.intuit.ipp.aggcat.util.OAuthUtil.getOAuthTokens(OAuthUtil.java:57)
    at com.intuit.ipp.aggcat.core.OAuthAuthorizer.<init>(OAuthAuthorizer.java:85)
    at com.astar.zloty.webservice.rest.impl.EmployeeResource.initialize(EmployeeResource.java:97)
    at com.astar.zloty.webservice.rest.impl.EmployeeResource.testApi(EmployeeResource.java:72)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680)
    Caused by: com.intuit.ipp.aggcat.exception.SamlAssertionException: com.intuit.ipp.aggcat.exception.AggCatException: Exception while reading the certificate file
    at com.intuit.ipp.aggcat.util.SamlUtil.createSignedSAMLPayload(SamlUtil.java:159)
    at com.intuit.ipp.aggcat.util.OAuthUtil.getOAuthTokens(OAuthUtil.java:72)
    ... 48 more
    Caused by: com.intuit.ipp.aggcat.exception.AggCatException: Exception while reading the certificate file
    at com.intuit.ipp.aggcat.util.SAMLCredentials.<init>(SAMLCredentials.java:60)
    at com.intuit.ipp.aggcat.util.SamlUtil.createSignedSAMLPayload(SamlUtil.java:155)
    ... 49 more
    Caused by: com.intuit.ipp.aggcat.exception.AggCatException: Exception when loading the cert.
    at com.intuit.ipp.aggcat.util.SAMLCredentials.loadCredential(SAMLCredentials.java:118)
    at com.intuit.ipp.aggcat.util.SAMLCredentials.<init>(SAMLCredentials.java:58)
    ... 50 more
    Caused by: java.io.IOException: Keystore was tampered with, or password was incorrect
    at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:771)
    at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:38)
    at java.security.KeyStore.load(KeyStore.java:1185)
    at com.intuit.ipp.aggcat.util.SAMLCredentials.loadCredential(SAMLCredentials.java:94)
    ... 51 more
    Caused by: java.security.UnrecoverableKeyException: Password verification failed
    at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:769)
    ... 54 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:25:49.480

您能否提交一份带有 war 文件的支持票 ( [http://developer.intuit.com/Support.html )，以便我可以验证应用程序的结构和配置的内容？](http://developer.intuit.com/Support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T18:34:14.397

我正面临这个问题。我的问题通过将 keystore.jks 文件直接放在类路径的根目录而不是放在类路径中的某个文件夹中而消失了。

密钥库.jks

# mysql - 加入超过 4 张桌子

> ID：15352390
> 
> 赞同：1
> 
> 时间：2013-03-12T02:43:22.850
> 
> 标签：mysql

这是架构和示例查询的小提琴：[http ://sqlfiddle.com/#!2/573ec4/9](http://sqlfiddle.com/#!2/573ec4/9)

我希望使用通过其他连接获得的 I.section 和 L.level 返回 C.price。当使用带有成本的内部连接时，我没有结果：[http ://sqlfiddle.com/#!2/573ec4/2](http://sqlfiddle.com/#!2/573ec4/2)

由于成本是将部分和级别映射到价格的表，因此我希望能够计算查询中所有放映的价格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:47:53.827

当您加入`Cost`表时，您不包括正确的连接条件：

```
INNER JOIN `cost` `C` 
  ON `I`.`Section` = c.section  -- = c.section is missing
  AND `L`.`level` = c.level;  -- = c.level is missing 
```

因此，您的完整查询将是：

```
SELECT  `F`.`date`,
  `F`.`time`,
  `F`.`tname`,
  `I`.`section`,
  `L`.`level`,
  c.price
FROM `booking_for_schedule` `F`
INNER JOIN `booking_in_seats` `I` 
  on `F`.`tname`=`I`.`tname` 
  AND `F`.`booking_num` = `I`.`booking_num`
INNER JOIN `level` `L` 
  on `F`.`date`=`L`.`date` 
  AND `F`.`time`=`L`.`time` 
  AND `F`.`tname`=`L`.`tname`
INNER JOIN `cost` `C` 
  ON `I`.`Section` = c.section
  AND `L`.`level` = c.level; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/573ec4/20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:46:51.020

看起来您缺少一些子句`INNER JOIN cost C`（当您加入`Cost`表格时）。

它应该如下所示：

```
INNER JOIN `cost` `C` ON `I`.`Section`=`C`.`Section` AND `L`.`level`=`C`.`level` 
```

代替：

```
INNER JOIN `cost` `C` ON `I`.`Section` AND `L`.`level` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:48:23.570

你错过了加入专栏。你没有结果的原因是因为`I.Section AND L.level`总是会返回false。

```
SELECT  F.date,
        F.time,
        F.tname,
        I.section,
        L.level,
        c.*
FROM    booking_for_schedule F
        INNER JOIN booking_in_seats I 
            ON  F.tname = I.tname AND 
                F.booking_num = I.booking_num
        INNER JOIN level L 
            ON  F.date = L.date AND 
                F.time = L.time AND 
                F.tname = L.tname
        INNER JOIN cost C 
            ON  I.Section = C.Section AND  -- <<== HERE
                L.level = C.level          -- <<== HERE 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/573ec4/18)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T02:55:05.880

你的最后一行是问题：

```
INNER JOIN `cost` `C` ON `I`.`Section` AND `L`.`level` 
```

应该是这样的：

```
INNER JOIN `cost` `C` ON `I`.`Section` = `C`.`Section` AND `L`.`level` = `C`.`Level` 
```

# linux - linux grep/sed 某些行 - 空间删除

> ID：15352392
> 
> 赞同：0
> 
> 时间：2013-03-12T02:43:36.737
> 
> 标签：linux, sed, grep

我有一个 file.dat 我需要`sed`通过。我试过这段代码，但它是字符之间的空格，我无法使用 xsl 执行任何统计（例如 3.5 看起来像 3 . 5）。有没有办法修改代码以删除空格？

```
sed -ne 's#^\(2012Sep[^ ]*\).*\(FD12P.*\)PARS.*#\1,\2#p' file.dat | sed -e 's#  *# #g' 
```

以下是原始文件的示例：

```
2012Sep212357 23:56:03.06250, AAA_YMDHMS, 2012, 9, 21, 23, 56, 4, POSS_71,      OK  ,  15.0,   73.2,   0.0,   0.0,   C,   0.0,   0.3,   0.6,PS711 78:218:17:41 189.9 205.5  112        1.7        7.3 60  15  51  73.2   0.0     2080,PS712,PS713,PS714,PS715,PS716 F# 51 2.03 7.39 54.98 2.06 0.89 681.1  0.3 11.0 112  14.6 C    376 0.00 0.00 0  0  2  1  112  1.7 189.8 205.4 157.1 192.0 78.5 32.0 928.0 2.0 0.0 -99.0 0.0 10.7 10.7 10000000.0 376 T 4 I 0 ,dia  2 6, 28 22 4,dia  3 5, 26 34 4,dia  4 3 18 17, 3,dia  5 4 25 13 4 1,,dia  6 5 12 7 1,dia  7 6 10 6,dia  8 5 12 4,dia  9 1 3 1,dia  10 2 3 1,dia  11 2 4,dia  12 0 0 1,dia  13 1 1,dia  14 1,dia  15 1 1,dia  16 1 1 1,dia  17 1,dia  18 1 3,dia  22 0 1,dia  23 1,dia  24 1 1,dia  25 1,dia  26 1,dia  29 1,dia  30 1,dia  31 2 2,dia  32 0 3,dia  33 1 2,dia  34 0 1 1,dia  35 1,dia  36 0 3,dia  37 0 2,dia  38 1 2,dia  39 1 2,dia  40 0 2,dia  41 2,dia  42 1 4 1,dia  43 2,dia  44 1 2,dia  45 1 2,dia  47 0 3,dia  49 2,dia  52 2,dia  59 1,dia  60 1,dia  61 1,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia , YANKEE_S/N_0706011,      OK  ,  46.9,  48.2,  -1.3,  17.0,   2.5, 1.000,  -0.8,   0.0,  -0.1,  -0.1,  -1.5,  -3.5,   0.0,   0.0,   0.0,   0.0, CT25K_S/N_A42101,      OK  ,CT0,20,2,3,00, /////, /////, /////,00000300,100,N,100,25,82,206,-4,7,LF7HN1,6,-2,6,5,5,4,4,4,3,4,3,2,2,3,3,2,2,2,3,2,2,2,3,3,2,2,3,3,3,3,3,3,3,3,4,4,4,3,4,4,5,3,4,5,4,3,5,3,6,4,1,5,3,3,4,5,3,3,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, FD12P_S/N ,      OK  ,  FD, 102, 26578, 16081, C,   0,   0,   0,     0.00,    41.18,    0.0,  0.000,  0.000,  0.000,  0.000,  0.000,  0.000, 15.20,      4, BEL_RAIN,      OK  ,  0.00, -0.20, -1.40, -1.80, -1.40, -1.40, -1.40, 311.0, ,          ,      0,0.0000000,0.0000000, Snow11_Icing ,   OK  , 33, 0909, 190, 17.03, 11111, FD, WS425_SN_,      OK  , 208, 210, 5, 5,  11.4,  11.4,  11.7,   5.9,   6.0,   4.9, 196.3,   6.4, 172.0,   3.5, 194.0,   6.4, 172.0,   1.8, 178.0,   4.6,   6.0,  0,   0.0,   1.6, CR3000_SN_,      OK  , "2012-09-21 20:01:30", "SN_1838", 12.90, 16.47, 17.06, 50.22,1001.1,  0.00,  0.00,2419.6, 432.1,   -4.6,   3.1, 188.5, S78D_SN_,      OK  ,64403.0,64841.0,  10.0, 211.5,   5.4, 206.5,   4.3,   5.4, 209.8,   3.2, 190.3,   5.4, 214.3,   1.6, 191.1,   3.8,  23.2,  0,   0.0,   1.1, PARS_SN ,      OK  ,  0.00, 147.7,    C,   -10.0,   9999,  19.0, 10057,     0,   0.0,   0.0,   0.0,   0.0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, TB_SN_ ,      OK  ,   0.0,   0.0,   0.0,   0.0, GEONOR_SN_,      OK  ,   1.1,  -0.1,   0.0,  -0.5, MP3000_SN_3031,      OK  , 13611, 09/21/12 23:52:03,   201, 290.8410,  54.5700, 992.6000, 224.9700,   0.0000, 13616, 09/21/12 23:52:52,   301,   2.006,   0.000,  -1.000, 13629, 09/21/12 23:53:40,   301,   2.153,   0.000,  -1.000, 13612, 09/21/12 23:52:49,   401, Zenith33, 290.841, 290.619, 290.324, 289.965, 289.594, 289.315, 289.019, 288.657, 288.252, 287.874, 287.473, 286.550, 285.484, 284.489, 283.557, 282.448, 281.549, 280.729, 279.510, 278.444, 277.386, 276.560, 275.714, 275.025, 274.243, 273.660, 272.269, 270.575, 269.615, 268.371, 267.229, 265.628, 264.201, 262.967, 261.651, 259.787, 258.405, 256.936, 255.301, 253.573, 251.715, 249.948, 248.309, 246.431, 244.513, 242.739, 240.876, 238.979, 237.113, 235.236, 233.310, 231.360, 229.586, 227.806, 226.248, 224.444, 222.997, 221.686, 13613, 09/21/12 23:52:50,   402, Zenith33,   8.112,   7.620,   7.356,   7.167,   7.001,   6.926,   6.905,   6.821,   6.749,   6.753,   6.634,   6.261,   5.949,   5.797,   5.612,   5.539,   5.345,   5.309,   5.308,   5.128,   4.854,   4.559,   4.412,   4.302,   4.119,   3.899,   3.280,   2.939,   2.634,   2.426,   2.251,   2.077,   1.768,   1.456,   1.191,   1.016,   0.836,   0.688,   0.572,   0.498,   0.420,   0.342,   0.315,   0.268,   0.247,   0.216,   0.169,   0.151,   0.117,   0.086,   0.079,   0.057,   0.043,   0.034,   0.027,   0.029,   0.025,   0.023, 13614, 09/21/12 23:52:50,   403, Zenith33,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.001,   0.002,   0.003,   0.004,   0.004,   0.005,   0.006,   0.006,   0.006,   0.005,   0.005,   0.006,   0.006,   0.006,   0.005,   0.004,   0.005,   0.007,   0.001,   0.001,   0.001,   0.001,   0.001,   0.001,   0.000,   0.001,   0.003,   0.001,   0.001,   0.002,   0.004,   0.001,   0.001,   0.004,   0.002,   0.002,   0.001,   0.000,   0.002,   0.000,   0.000,   0.002,   0.001, 13615, 09/21/12 23:52:51,   404, Zenith33,  56.270,  53.729,  53.026,  52.810,  52.940,  53.694,  54.346,  54.964,  55.335,  56.838,  57.384,  58.904,  60.251,  62.294,  63.354,  65.906,  66.386,  69.111,  73.093,  75.221,  75.959,  76.108,  77.720,  79.306,  80.117,  79.051,  73.398,  70.405,  73.031,  72.626,  69.891,  68.496,  69.016,  64.496,  60.284,  56.164,  50.403,  46.814,  43.598,  40.230,  38.220,  36.595,  37.270,  35.931,  35.872,  34.573,  34.382,  31.848,  30.184,  28.592,  27.367,  26.572,  25.385,  24.167,  22.947,  22.196,  20.102,  17.273, 13617, 09/21/12 23:53:37,   401, Angle Scan32(N), 290.841, 290.341, 290.135, 289.888, 289.601, 289.359, 289.063, 288.816, 288.596, 288.292, 287.907, 286.989, 286.151, 285.159, 283.948, 282.604, 281.604, 280.663, 279.693, 278.789, 278.079, 277.346, 276.519, 275.626, 274.793, 274.033, 272.555, 271.680, 270.758, 269.641, 268.433, 266.921, 265.443, 264.229, 263.036, 261.562, 260.179, 258.611, 257.035, 255.240, 253.437, 251.850, 250.007, 248.111, 246.297, 244.386, 242.365, 240.776, 239.021, 237.268, 235.613, 233.999, 232.464, 230.806, 229.090, 227.562, 226.043, 224.730, 13620, 09/21/12 23:53:38,   402, Angle Scan32(N),   8.160,   7.857,   7.577,   7.363,   7.180,   7.123,   7.047,   7.133,   7.134,   7.075,   7.083,   6.916,   6.715,   6.682,   6.530,   6.323,   5.999,   5.897,   5.845,   5.772,   5.604,   5.312,   5.007,   4.764,   4.590,   4.224,   3.621,   3.104,   2.680,   2.432,   2.241,   2.012,   1.820,   1.490,   1.207,   1.003,   0.830,   0.694,   0.557,   0.489,   0.417,   0.340,   0.290,   0.240,   0.203,   0.165,   0.148,   0.128,   0.105,   0.104,   0.077,   0.066,   0.051,   0.031,   0.026,   0.032,   0.027,   0.023, 13623, 09/21/12 23:53:39,   403, Angle Scan32(N),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.001,   0.002,   0.003,   0.003,   0.003,   0.004,   0.005,   0.007,   0.006,   0.005,   0.005,   0.008,   0.007,   0.004,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13626, 09/21/12 23:53:40,   404, Angle Scan32(N),  57.019,  55.193,  53.564,  53.315,  53.339,  53.281,  53.637,  55.162,  56.061,  56.732,  57.804,  59.747,  61.663,  65.110,  66.650,  67.988,  67.915,  70.569,  73.641,  75.918,  76.393,  76.266,  74.408,  74.010,  74.288,  73.384,  70.577,  66.022,  65.699,  65.979,  65.527,  66.482,  68.845,  60.866,  56.617,  53.351,  47.036,  41.541,  38.110,  35.401,  34.460,  33.999,  33.480,  31.319,  31.345,  31.507,  30.179,  28.661,  26.417,  26.580,  26.578,  27.422,  26.442,  25.451,  24.835,  25.084,  22.074,  20.811, 13618, 09/21/12 23:53:37,   401, Angle Scan32(S), 290.841, 290.626, 290.240, 289.821, 289.469, 289.065, 288.771, 288.341, 288.121, 288.010, 287.614, 286.667, 285.864, 284.613, 283.457, 282.245, 281.322, 280.393, 279.502, 278.463, 277.581, 276.853, 275.805, 274.735, 273.891, 273.092, 271.414, 270.019, 269.101, 267.951, 266.361, 264.487, 262.818, 261.826, 260.810, 259.275, 257.892, 256.162, 254.619, 252.395, 250.385, 248.765, 246.572, 244.208, 241.912, 239.723, 237.677, 235.897, 233.725, 231.819, 229.917, 228.090, 226.747, 225.073, 223.535, 222.356, 221.359, 220.467, 13621, 09/21/12 23:53:38,   402, Angle Scan32(S),   7.814,   6.994,   6.357,   5.945,   5.634,   5.442,   5.438,   5.371,   5.350,   5.230,   5.403,   4.970,   4.875,   4.949,   5.079,   5.089,   4.678,   4.723,   4.734,   4.826,   4.625,   4.731,   5.251,   5.544,   5.911,   6.282,   7.083,   7.490,   7.369,   6.637,   5.359,   3.880,   2.902,   1.757,   1.279,   1.035,   0.725,   0.560,   0.455,   0.361,   0.275,   0.255,   0.190,   0.162,   0.130,   0.122,   0.103,   0.103,   0.080,   0.080,   0.062,   0.061,   0.056,   0.033,   0.026,   0.032,   0.025,   0.020, 13624, 09/21/12 23:53:39,   403, Angle Scan32(S),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.003,   0.002,   0.003,   0.003,   0.004,   0.006,   0.006,   0.005,   0.005,   0.007,   0.006,   0.003,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13627, 09/21/12 23:53:40,   404, Angle Scan32(S),  56.426,  52.621,  49.854,  47.596,  47.538,  48.077,  50.507,  49.331,  49.623,  49.122,  51.626,  50.226,  51.898,  55.446,  57.410,  61.732,  58.361,  60.002,  61.793,  65.138,  68.036,  74.196,  82.373,  85.787, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000,  85.190,  66.155,  53.728,  37.351,  23.545,  17.741,  14.367,  12.172,  13.330,  10.572,  10.516,   9.346,   8.075,   6.828,   5.445,   5.651,   5.252,   5.502,   6.274,   6.017,   6.092,   6.767,   6.991,   5.608,   4.837, 13619, 09/21/12 23:53:37,   401, Angle Scan32(A), 290.841, 290.480, 290.186, 289.854, 289.535, 289.214, 288.917, 288.581, 288.361, 288.152, 287.764, 286.828, 286.006, 284.883, 283.694, 282.416, 281.453, 280.518, 279.586, 278.614, 277.817, 277.085, 276.148, 275.167, 274.327, 273.550, 271.972, 270.837, 269.920, 268.786, 267.391, 265.698, 264.125, 263.022, 261.916, 260.413, 259.030, 257.379, 255.820, 253.810, 251.899, 250.295, 248.273, 246.140, 244.078, 242.025, 239.986, 238.294, 236.323, 234.485, 232.698, 230.971, 229.531, 227.863, 226.234, 224.886, 223.635, 222.540, 13622, 09/21/12 23:53:38,   402, Angle Scan32(A),   7.987,   7.424,   6.955,   6.634,   6.380,   6.247,   6.209,   6.208,   6.193,   6.097,   6.195,   5.877,   5.729,   5.754,   5.761,   5.682,   5.312,   5.292,   5.284,   5.308,   5.132,   5.058,   5.182,   5.206,   5.294,   5.250,   5.203,   4.958,   4.590,   4.145,   3.543,   2.837,   2.317,   1.620,   1.235,   1.011,   0.768,   0.615,   0.497,   0.416,   0.336,   0.293,   0.233,   0.196,   0.162,   0.141,   0.123,   0.115,   0.092,   0.091,   0.069,   0.064,   0.054,   0.033,   0.026,   0.032,   0.026,   0.021, 13625, 09/21/12 23:53:39,   403, Angle Scan32(A),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.000,   0.000,   0.002,   0.003,   0.003,   0.003,   0.004,   0.005,   0.007,   0.006,   0.005,   0.005,   0.008,   0.006,   0.003,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13628, 09/21/12 23:53:40,   404, Angle Scan32(A),  56.682,  53.972,  51.892,  50.578,  50.563,  50.727,  52.154,  52.163,  52.709,  52.844,  54.714,  54.856,  56.689,  60.229,  62.028,  64.870,  63.262,  65.752,  68.310,  71.277,  73.323,  76.555,  79.852,  81.290,  88.961,  92.860, 100.000, 100.000, 100.000, 100.000, 100.000,  99.377,  92.961,  72.472,  62.030,  54.508,  43.265,  32.818,  27.337,  23.694,  21.524,  22.368,  19.811,  19.031,  18.017,  16.873,  15.321,  13.403,  13.020,  12.580,  12.825,  13.851,  13.301,  13.059,  13.511,  13.757,  11.592,  10.430, 290.841,  54.570, 992.600, 224.970,   0.000, BACIC_, No ,belraw3110.0,belsum  -1.8,fdsum   0.0,fdsnow   0.0,yksum  -3.5,ykcsum   0.0,S78D-  OK  ,PARtotal 147.7,ParCnt   0.0,Counter 594.0,Max_ws   6.4,Dir 172.0,Delta_ws   4.6,gust   0.0
2012Sep212358 23:57:03.06250, AAA_YMDHMS, 2012, 9, 21, 23, 57, 4, POSS_71,      OK  ,  15.0,   73.2,   0.0,   0.0,   C,   0.0,   0.3,   0.6,PS711 78:218:17:42 390.3 297.2   64         .1        2.1 60  15  49  73.2   0.0     2080,PS712,PS713,PS714,PS715,PS716 F# 49 2.03 2.14 1.03 2.01 1.07 19.2  0.2 12.4 64  14.7 C    376 0.00 0.00 0  0  3  1  64  0.1 390.3 297.2 149.0 176.3 83.8 32.0 944.0 2.3 0.0 -99.0 0.0 10.7 10.7 10000000.0 376 T 1 I 0 ,dia  2 5, 26 20 3,dia  3 4, 26 20 3,dia  4 6 22 18, 1 0 0 1 0 1,dia  5 4 15 20 3 0, 1,dia  6 4 15 8 4,dia  7 8 14 7,dia  8 4 7 6 0 0 1,dia  9 4 9 4,dia  10 3 7,dia  11 3 1 1,dia  12 1 3,dia  14 2 2,dia  15 1 3,dia  16 1 2 1,dia  17 4 2,dia  21 1,dia  22 0 1,dia  23 2 1,dia  25 0 1,dia  26 1,dia  27 1,dia  29 1,dia  30 1 1,dia  31 1,dia  32 2,dia  33 1 1,dia  34 0 2,dia  36 0 1,dia  37 1 2,dia  38 1 1,dia  39 0 2,dia  40 0 0 1,dia  41 3 3 1,dia  42 1,dia  43 2 0 1,dia  45 1 1,dia  47 0 1,dia  48 1 1,dia  55 1,dia  59 1,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia ,dia , YANKEE_S/N_0706011,      OK  ,  55.7,  56.8,  -1.2,  17.0,   3.2, 1.000,  -0.9,   0.0,   0.0,  -0.1,  -1.5,  -3.5,   0.0,   0.0,   0.0,   0.0, CT25K_S/N_A42101,      OK  ,CT0,20,2,3,00, /////, /////, /////,00000300,100,N,100,25,82,206,-4,7,LF7HN1,6,-2,6,5,5,4,4,4,3,4,3,2,2,3,3,2,2,2,3,2,2,2,2,3,2,2,3,3,3,3,3,3,3,3,4,4,4,3,4,5,6,2,5,4,5,3,3,4,5,4,2,4,3,2,4,5,3,4,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, FD12P_S/N ,      OK  ,  FD, 102, 20517, 16565, C,   0,   0,   0,     0.00,    41.18,    0.0,  0.000,  0.000,  0.000,  0.000,  0.000,  0.000, 15.20,      4, BEL_RAIN,      OK  ,  0.00, -0.20, -1.40, -1.80, -1.40, -1.40, -1.40, 311.0, ,          ,      0,0.0000000,0.0000000, Snow11_Icing ,   OK  , 33, 0909, 182, 17.07, 11111, F8, WS425_SN_,      OK  , 202, 197, 5, 5,   8.5,   8.5,   8.9,   4.4,   4.6,   5.2, 196.6,   6.4, 172.0,   3.6, 198.0,   6.4, 172.0,   2.0, 178.0,   4.4,   6.0,  0,   0.0,   1.2, CR3000_SN_,      OK  , "2012-09-21 20:02:30", "SN_1838", 12.91, 16.45, 17.06, 49.96,1001.1,  0.00,  0.00,2419.4, 432.0,   -4.4,   3.2, 206.6, S78D_SN_,      OK  ,64628.0,64977.0,   8.0, 211.6,   4.3, 207.1,   4.6,   5.4, 209.8,   3.2, 190.3,   5.4, 214.3,   1.6, 191.1,   3.8,  23.2,  0,   0.0,   0.8, PARS_SN ,      OK  ,  0.00, 147.7,    C,   -10.0,   9999,  19.0, 10059,     0,   0.0,   0.0,   0.0,   0.0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, TB_SN_ ,      OK  ,   0.0,   0.0,   0.0,   0.0, GEONOR_SN_,      OK  ,  -0.2,  -0.2,   0.0,  -0.5, MP3000_SN_3031,      OK  , 13611, 09/21/12 23:52:03,   201, 290.8410,  54.5700, 992.6000, 224.9700,   0.0000, 13616, 09/21/12 23:52:52,   301,   2.006,   0.000,  -1.000, 13629, 09/21/12 23:53:40,   301,   2.153,   0.000,  -1.000, 13612, 09/21/12 23:52:49,   401, Zenith33, 290.841, 290.619, 290.324, 289.965, 289.594, 289.315, 289.019, 288.657, 288.252, 287.874, 287.473, 286.550, 285.484, 284.489, 283.557, 282.448, 281.549, 280.729, 279.510, 278.444, 277.386, 276.560, 275.714, 275.025, 274.243, 273.660, 272.269, 270.575, 269.615, 268.371, 267.229, 265.628, 264.201, 262.967, 261.651, 259.787, 258.405, 256.936, 255.301, 253.573, 251.715, 249.948, 248.309, 246.431, 244.513, 242.739, 240.876, 238.979, 237.113, 235.236, 233.310, 231.360, 229.586, 227.806, 226.248, 224.444, 222.997, 221.686, 13613, 09/21/12 23:52:50,   402, Zenith33,   8.112,   7.620,   7.356,   7.167,   7.001,   6.926,   6.905,   6.821,   6.749,   6.753,   6.634,   6.261,   5.949,   5.797,   5.612,   5.539,   5.345,   5.309,   5.308,   5.128,   4.854,   4.559,   4.412,   4.302,   4.119,   3.899,   3.280,   2.939,   2.634,   2.426,   2.251,   2.077,   1.768,   1.456,   1.191,   1.016,   0.836,   0.688,   0.572,   0.498,   0.420,   0.342,   0.315,   0.268,   0.247,   0.216,   0.169,   0.151,   0.117,   0.086,   0.079,   0.057,   0.043,   0.034,   0.027,   0.029,   0.025,   0.023, 13614, 09/21/12 23:52:50,   403, Zenith33,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.001,   0.002,   0.003,   0.004,   0.004,   0.005,   0.006,   0.006,   0.006,   0.005,   0.005,   0.006,   0.006,   0.006,   0.005,   0.004,   0.005,   0.007,   0.001,   0.001,   0.001,   0.001,   0.001,   0.001,   0.000,   0.001,   0.003,   0.001,   0.001,   0.002,   0.004,   0.001,   0.001,   0.004,   0.002,   0.002,   0.001,   0.000,   0.002,   0.000,   0.000,   0.002,   0.001, 13615, 09/21/12 23:52:51,   404, Zenith33,  56.270,  53.729,  53.026,  52.810,  52.940,  53.694,  54.346,  54.964,  55.335,  56.838,  57.384,  58.904,  60.251,  62.294,  63.354,  65.906,  66.386,  69.111,  73.093,  75.221,  75.959,  76.108,  77.720,  79.306,  80.117,  79.051,  73.398,  70.405,  73.031,  72.626,  69.891,  68.496,  69.016,  64.496,  60.284,  56.164,  50.403,  46.814,  43.598,  40.230,  38.220,  36.595,  37.270,  35.931,  35.872,  34.573,  34.382,  31.848,  30.184,  28.592,  27.367,  26.572,  25.385,  24.167,  22.947,  22.196,  20.102,  17.273, 13617, 09/21/12 23:53:37,   401, Angle Scan32(N), 290.841, 290.341, 290.135, 289.888, 289.601, 289.359, 289.063, 288.816, 288.596, 288.292, 287.907, 286.989, 286.151, 285.159, 283.948, 282.604, 281.604, 280.663, 279.693, 278.789, 278.079, 277.346, 276.519, 275.626, 274.793, 274.033, 272.555, 271.680, 270.758, 269.641, 268.433, 266.921, 265.443, 264.229, 263.036, 261.562, 260.179, 258.611, 257.035, 255.240, 253.437, 251.850, 250.007, 248.111, 246.297, 244.386, 242.365, 240.776, 239.021, 237.268, 235.613, 233.999, 232.464, 230.806, 229.090, 227.562, 226.043, 224.730, 13620, 09/21/12 23:53:38,   402, Angle Scan32(N),   8.160,   7.857,   7.577,   7.363,   7.180,   7.123,   7.047,   7.133,   7.134,   7.075,   7.083,   6.916,   6.715,   6.682,   6.530,   6.323,   5.999,   5.897,   5.845,   5.772,   5.604,   5.312,   5.007,   4.764,   4.590,   4.224,   3.621,   3.104,   2.680,   2.432,   2.241,   2.012,   1.820,   1.490,   1.207,   1.003,   0.830,   0.694,   0.557,   0.489,   0.417,   0.340,   0.290,   0.240,   0.203,   0.165,   0.148,   0.128,   0.105,   0.104,   0.077,   0.066,   0.051,   0.031,   0.026,   0.032,   0.027,   0.023, 13623, 09/21/12 23:53:39,   403, Angle Scan32(N),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.001,   0.002,   0.003,   0.003,   0.003,   0.004,   0.005,   0.007,   0.006,   0.005,   0.005,   0.008,   0.007,   0.004,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13626, 09/21/12 23:53:40,   404, Angle Scan32(N),  57.019,  55.193,  53.564,  53.315,  53.339,  53.281,  53.637,  55.162,  56.061,  56.732,  57.804,  59.747,  61.663,  65.110,  66.650,  67.988,  67.915,  70.569,  73.641,  75.918,  76.393,  76.266,  74.408,  74.010,  74.288,  73.384,  70.577,  66.022,  65.699,  65.979,  65.527,  66.482,  68.845,  60.866,  56.617,  53.351,  47.036,  41.541,  38.110,  35.401,  34.460,  33.999,  33.480,  31.319,  31.345,  31.507,  30.179,  28.661,  26.417,  26.580,  26.578,  27.422,  26.442,  25.451,  24.835,  25.084,  22.074,  20.811, 13618, 09/21/12 23:53:37,   401, Angle Scan32(S), 290.841, 290.626, 290.240, 289.821, 289.469, 289.065, 288.771, 288.341, 288.121, 288.010, 287.614, 286.667, 285.864, 284.613, 283.457, 282.245, 281.322, 280.393, 279.502, 278.463, 277.581, 276.853, 275.805, 274.735, 273.891, 273.092, 271.414, 270.019, 269.101, 267.951, 266.361, 264.487, 262.818, 261.826, 260.810, 259.275, 257.892, 256.162, 254.619, 252.395, 250.385, 248.765, 246.572, 244.208, 241.912, 239.723, 237.677, 235.897, 233.725, 231.819, 229.917, 228.090, 226.747, 225.073, 223.535, 222.356, 221.359, 220.467, 13621, 09/21/12 23:53:38,   402, Angle Scan32(S),   7.814,   6.994,   6.357,   5.945,   5.634,   5.442,   5.438,   5.371,   5.350,   5.230,   5.403,   4.970,   4.875,   4.949,   5.079,   5.089,   4.678,   4.723,   4.734,   4.826,   4.625,   4.731,   5.251,   5.544,   5.911,   6.282,   7.083,   7.490,   7.369,   6.637,   5.359,   3.880,   2.902,   1.757,   1.279,   1.035,   0.725,   0.560,   0.455,   0.361,   0.275,   0.255,   0.190,   0.162,   0.130,   0.122,   0.103,   0.103,   0.080,   0.080,   0.062,   0.061,   0.056,   0.033,   0.026,   0.032,   0.025,   0.020, 13624, 09/21/12 23:53:39,   403, Angle Scan32(S),   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.003,   0.002,   0.003,   0.003,   0.004,   0.006,   0.006,   0.005,   0.005,   0.007,   0.006,   0.003,   0.003,   0.002,   0.004,   0.003,   0.001,   0.001,   0.001,   0.000,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.000,   0.000,   0.000,   0.000,   0.001,   0.001,   0.000,   0.001,   0.002,   0.003,   0.000, 13627, 09/21/12 23:53:40,   404, Angle Scan32(S),  56.426,  52.621,  49.854,  47.596,  47.538,  48.077,  50.507,  49.331,  49.623,  49.122,  51.626,  50.226,  51.898,  55.446,  57.410,  61.732,  58.361,  60.002,  61.793,  65.138,  68.036,  74.196,  82.373,  85.787, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000, 100.000,  85.190,  66.155,  53.728,  37.351,  23.545,  17.741,  14.367,  12.172,  13.330,  10.572,  10.516,   9.346,   8.075,   6.828,   5.445,   5.651,   5.252,   5.502,   6.274,   6.017,   6.092,   6.767,   6.991,   5.608,   4.837, 13619, 09/21/12 23:53:37,   401, Angle Scan32(A), 290.841, 290.480, 290.186, 289.854, 289.535, 289.214, 288.917, 288.581, 288.361, 288.152, 287.764, 286.828, 286.006, 284.883, 283.694, 282.416, 281.453, 280.518, 
```

这是输出（差异文件六月而不是九月）只放了一行，因为它太长了。

```
 2 0 1 2 J u n 2 0 2 3 5 8 , F D 1 2 P _ S / N , O K ,  F D , 1  0 2 , 2 4 1 1 6 , 3 2 6 3 0 , C , 0 , 0 , 0 , 0 . 0 0 , 7 2 . 1 9 , 1 9 . 0 , 0 . 0 0 0 , 0 . 0 0 0 , 0 . 0 0 0 , 0 . 0 0 0 , 0 . 0 0 0 , 0 . 0 0 0 , 3 1 . 2 0 , 5 0 1 4 , B E L _ R A I N , O K , - 0 . 7 0 , - 0 . 1 9 , - 0 . 1 9 , - 0 . 0 8 , - 0 . 1 9 , - 0 . 1 9 , - 0 . 1 9 , 1 2 6 . 2 , , , 0 , 0 . 0 0 0 0 0 0 0 , 0 . 0 0 0 0 0 0 0 , S n o w 1 1 _ I c i n g , O K ,  3 3 , 0 8 3 0 , 2 6 9 , 3 0 . 5 6 , 1 1 1 1 1 , F A , W S 4 2 5 _ S N _ , O K , 2 3 4 , 2 3 4 , 5 , 5 , 1 5 . 2 , 1 5 . 2 , 1 5 . 4 , 7 . 8 , 7 . 9 , 7 . 7 , 2 3 8 . 0 , 9 . 6 , 2 4 2 . 0 , 6 . 1 , 2 3 7 . 0 , 1 0 . 5 , 2 3 4 . 0 , 4 . 9 , 2 1 3 . 0 , 5 . 6 , 2 1 . 0 , 1 , 1 0 . 5 , 2 . 8 , C R 3 0 0 0 _ S N _ , O K , " 2 0 1 2 - 0 6 - 2 0 2 0 : 0 1 : 3 0 " , " S N _ 1 8 3 8 " , 1 2 . 7 7 , 3 2 . 7 7 , 3 0 . 7 2 , 4 3 . 4 6 , 1 0 0 5 . 2 , 0 . 0 0 , 0 . 0 0 , 1 6 0 2 . 5 , 1 1 7 . 6 , 9 5 . 1 , 5 . 3 , 2 4 9 . 1 , S 7 8 D _ S N _ , O K , 6 4 6 4 6 . 0 , 6 4 0 6 3 . 0 , 1 3 . 0 , 2 3 8 . 9 , 7 . 0 , 2 4 4 . 8 , 7 . 5 , 9 . 1 , 2 4 9 . 5 , 5 . 9 , 2 4 4 . 9 , 9 . 7 , 2 2 2 . 9 , 4 . 3 , 2 3 6 . 2 , 5 . 4 , 1 3 . 4 , 0 , 0 . 0 , 2 . 2 , 
```

我怎样才能消除空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:13:45.447

我认为您的问题在于`sed`字符串不正确。根据以下记录，此命令可以正常工作：

```
pax> cat file.dat 
2012Sep212357 23:56:03.06250, AAA_YMDHMS, FD12P_S/N , blah blah PARS_SN , BLAH

pax> sed -ne 's#^\(2012Sep[^ ]*\).*\(FD12P.*\)PARS.*#\1,\2#p' file.dat
...>   | sed -e 's#  *# #'
2012Sep212357,FD12P_S/N , blah blah 
```

但是，如果您随后通过：

```
sed 's# *# #'
#      ^
#      +- Note ONE space 
```

你得到你似乎正在经历的间距：

```
pax> sed -n 's#^\(2012Sep[^ ]*\).*\(FD12P.*\)PARS.*#\1,\2#p' file.dat
...>   | sed 's# *# #g'
 2 0 1 2 S e p 2 1 2 3 5 7 , F D 1 2 P _ S / N , b l a h b l a h 
```

你会注意到我`sed`上面的字符串在星号之前有*一个*空格，这意味着用一个空格替换任何出现的零个或多个空格。*每个*字符之间都会出现零个或多个空格，这就是显示空格的原因。

如果您使用更正确的两个空格版本：

```
sed 's#  *# #'
#      ^^
#      ++- Note TWO spaces 
```

它会正确地将多个空格合并为一个，而不会在每个字符之间放置一个空格。

# android - 如何在 onSavedInstanceState() 中将 Handler 保存在 Bundle 中？

> ID：15352399
> 
> 赞同：1
> 
> 时间：2013-03-12T02:44:24.457
> 
> 标签：android, bundle, android-handler

我必须将`String`s 和`Integer`s 保存到 a `Bundle`in 中，`onSavedInstanceState()`因此当屏幕方向发生变化时，它将继续在另一个方向停止。

是否可以将更复杂的对象（例如 的实例）存储`Handler`到 中`Bundle`？如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:20:23.807

您可以查看文档[`Bundle`](http://developer.android.com/reference/android/os/Bundle.html)以查看可以放入的数据类型。通常，您可以放入的对象`Bundle`必须是原始数据类型，例如`int`, `float`, `double`...; 或必须实施[`Serializable`](http://developer.android.com/reference/java/io/Serializable.html)/ [`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)。[`Handler`](http://developer.android.com/reference/android/os/Handler.html)只是扩展`Object`，所以你不能把它放到一个`Bundle`.

您可以搜索其他解决方案，例如：

*   [方向改变时不要重新加载应用程序](https://stackoverflow.com/questions/5913130/dont-reload-application-when-orientation-changes)
*   …</li>

# visual-studio-2010 - 将一个集合中的现有项目添加到另一个集合中的另一个项目

> ID：15352401
> 
> 赞同：1
> 
> 时间：2013-03-12T02:44:33.007
> 
> 标签：visual-studio-2010, version-control, tfs

我需要能够将一个集合中的现有项目添加到另一个集合中的另一个项目

但是当我在 Visual Studio 中执行此操作时（通过单击 Add->Existing Project 然后选择已签入另一个集合并位于我的本地驱动器上的项目）我收到错误消息：

“相关的源代码管理插件未安装或无法初始化。此错误的常见原因包括服务器不可用和/或工作区映射不正确”

当我独立打开位于不同集合中的项目时，它工作正常（并且已映射源代码控制）

不确定这是否可行，但应该可以（似乎有点傻，不支持）

# html - 为什么 `'` 在 html 库中转义？

> ID：15352407
> 
> 赞同：0
> 
> 时间：2013-03-12T02:44:56.353
> 
> 标签：html

使用 HTML 我注意到一些库逃逸`'`。我的问题是为什么？第一次我想也许他们这样做只是因为但我看到的不止一个人这样做，但不是全部。我不记得我从头顶看到的东西，但我记得的其他人是`&`，，，，。`<``>``"`

我知道 & 用于转义字符（例如 make `&amp;`which is `&`）。`<`并且`>`被转义以免与开始/结束标签混淆，并且已经完成，因此如果出于某种原因需要，`"`您可以放入标签属性。`"`但是为什么`'`？我是否还缺少任何其他应该转义的字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:48:55.323

因为在 HTML 下，可以使用单引号字符`'`而不是双引号来分隔元素属性，如下所示：

```
<p class='something'></p> 
```

但是角色不需要正常转义，但最好是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T02:49:14.623

在 HTML 中，" 和 ' 是可以互换的。两者都可以用于设置元素的属性，也可以用于在 JavaScript 中表示字符串：

```
<img src="bob.png" />

<img src='bob.png' /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T02:49:28.830

单引号被转义，因为它只能在某些上下文中按原样使用。在编写转义函数时，总是将其转义会更容易、更快捷，因此您不必考虑上下文。

例如，如果您使用双引号`"`来表示属性值，则可以安全地在其中使用单引号`'`。但是，如果您使用单引号来表示属性值，则不能。

# ruby - 匹配 ':' 之后的所有内容，直到第一个非空行，然后只匹配除空行之外的所有内容

> ID：15352408
> 
> 赞同：-2
> 
> 时间：2013-03-12T02:45:04.967
> 
> 标签：ruby, regex

使用 Ruby，所以我认为那是 Perl 正则表达式。例子：

```
电子邮件地址：user123@gmail.com
帐单地址：

哈里·史密斯
3423我的车道
某些城市，CA 94105
美国

```

我要匹配

```
E-mail Address: user123@gmail.com 
```

和

```
Billing Address:

Harry Smith
3423 My Lane
SOME CITY, CA 94105
United States 
```

有任何想法吗？

这是我现在所拥有的（由 ka 提供）：

```
/(.+?):(?:\s+)?([\s\S]+?)\r?\n(?=\r?\n)/g 
```

现在唯一的问题是它不会在该换行符处停止匹配 user123@gmail.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:54:25.003

带有基本正则表达式的地址模式：`:\s+([a-zA-Z\d'-,\s]*?)\s\s+`
在此处解释演示：[http ://regex101.com/r/pU8rY3](http://regex101.com/r/pU8rY3)

带有 LookArounds 的地址模式：`(?<=Address:\n\n)[a-zA-Z\d'-,\s]*(?=\n\n)`
在此处解释演示：[http ://regex101.com/r/zE7nP6](http://regex101.com/r/zE7nP6)

要匹配`:`直到第一个非空白行之后的所有内容，然后匹配所有内容直到空白行：
RegEx with capture：`(?<=:)([\S\s]*)\n\n([\s\S]*)(?=\n\n)`
解释演示：[http ://regex101.com/r/yN5kM2](http://regex101.com/r/yN5kM2)

匹配以字符结尾的第一行，`:`然后匹配所有内容，直到 2 个换行符：
RegExp：`^(.+?):(?:\s+)?([\s\S]+?)\r?\n(?=\r?\n)`
演示：[http ://regex101.com/r/jW2hR8](http://regex101.com/r/jW2hR8)

第 5 次更新：匹配**`name: value`或`name: multiline_value`**
正则表达式：`^(.+?):(?:[ \t]*(.+)|\s+([\s\S]+?)\r?\n)\r?\n`
此处演示：[http ://regex101.com/r/jR1iK6](http://regex101.com/r/jR1iK6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:54:09.367

```
/^.*:\n\n([\w\W]*?)\n(?=\n)/ 
```

[http://rubular.com/r/BHEDW4sElE](http://rubular.com/r/BHEDW4sElE)

基本上，这匹配行的开头，然后是冒号之前的所有内容，然后是两个换行符（一个空行），然后是一个以换行符结尾的文本块，然后是一个空行。

# python - 重置 csv.DictReader(StringIO.StringIO(some_string))

> ID：15352417
> 
> 赞同：1
> 
> 时间：2013-03-12T02:46:08.910
> 
> 标签：python, csv

我正在使用 python 的 csv.DictReader 但我用这样的字符串初始化它：

```
dict_reader = csv.DictReader(StringIO.StringIO(some_string)) 
```

有没有办法重置 DictReader 的迭代器，以便我可以多次使用它？我宁愿不重新解析 some_string 因为它可能是一项昂贵的操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T04:53:50.490

您可能已经知道，初始化：

```
dict_reader = csv.DictReader(StringIO.StringIO(some_string)) 
```

实际上并没有从`StringIO.StringIO`实例中读取任何内容。仅当`dict_reader`您开始从中获取行并逐行读取输入时才开始读取。换句话说，它只会读取与您要求的行数一样多的行数。这是一个例子：

```
#! /usr/bin/env python
import csv
try:
    from StringIO import StringIO   # Python 2.x
except ImportError:
    from io import StringIO         # Python 3.x

test_string = """name,value
foo,1
bar,2
"""

string_io = StringIO(test_string)
# 
# Position is 0 i.e. the beginning of the string.
# 
print("Position: {}".format(string_io.tell()))

dict_reader = csv.DictReader(string_io)
#
# Position is still 0\. Nothing has been read.
#
print("Position: {}".format(string_io.tell()))
#
# Now we start reading from string_io
#
for row in dict_reader:
    print(row)
    #
    # Position increases every time you read 
    # a row using dict_reader.
    #
    print("Position: {}".format(string_io.tell())) 
```

这将打印：

```
Position: 0
Position: 0
{'name': 'foo', 'value': '1'}
Position: 17
{'name': 'bar', 'value': '2'}
Position: 23 
```

在所有这些结束时，当前位置`string_io`将指向字符串的末尾。因此，即使您可以重复使用`dict_reader`，您也必须`string_io`先从头开始，然后重新开始扫描。其实，在上面的代码之后，你可以做以下事情：

```
string_io.seek(0)
for row in dict_reader:
    print(row)
    print("Position: {}".format(string_io.tell())) 
```

此`for`循环将打印以下内容：

```
{'name': 'name', 'value': 'value'}
Position: 11
{'name': 'foo', 'value': '1'}
Position: 17
{'name': 'bar', 'value': '2'}
Position: 23 
```

请注意，`dict_reader`现在将第一行`string_io`视为数据，而不是使用它来决定字段的名称。此外，`dict_reader`它本身不会保留它扫描的所有行。一旦将一行传递给您，它就不再可以通过`dict_reader`. 您可以从[csv.py](http://svn.python.org/view/python/trunk/Lib/csv.py?view=markup)和[_csv.c](http://svn.python.org/view/python/trunk/Modules/_csv.c?view=markup)的定义`csv.DictReader.next()`中看到这一点。因此，您最好按照评论中的建议将行存储在自己的某个地方。`Reader_iternext()`

# excel - 尝试从 IE 中的表中提取数据时权限被拒绝

> ID：15352420
> 
> 赞同：0
> 
> 时间：2013-03-12T02:46:35.983
> 
> 标签：excel, internet-explorer, download, vba

最近刚开始看VBA在Excel中通过IE访问网页的应用，对html编码没有经验，所以解决这个问题可能真的很简单...

我有一段代码（如下）应该导航到网站、访问表格并将数据提取到 Excel 中。但是，在看似随机的时间，我无法确定对象变量“TDelement”以某种方式被锁定，当我尝试通过循环访问下一个单元格时，Excel 会抛出错误 70：权限被拒绝。它不会一直发生，也不会发生在同一个表格单元格上。

```
Dim IE As Object
Dim TDElements As Object
Dim TDelement As Object
Dim Web_Address As String
Dim DteTm As Date

Web_Address = "http://www.bom.gov.au/fwo/IDQ65388/IDQ65388.040762.tbl.shtml"

' Access the Webpage
    IE.Navigate Web_Address
' Wait while IE loading...
    Do While IE.Busy
       Application.Wait DateAdd("s", 1, Now)
    Loop
' Find and Set Data Table Cells/object within webpage
     Set TDElements = IE.document.GetElementsByTagName("td")
' Pull each TDElement (table cell) from TDElements
     Rw = 1
     Col = 2
     For Each TDelement In TDElements
        If Col = 1 Then
           Col = 2
        ElseIf Col = 2 Then
           Col = 1
        End If
        If Col = 1 Then
           DteTm = TDelement.innerText
           Worksheets(1).Cells(Rw, Col).Value = DteTm
        ElseIf Col = 2 Then
           Worksheets(1).Cells(Rw, Col).Value = TDelement.innerText
        End If
        If Col = 2 Then
           Rw = Rw + 1
        End If
     Next 
```

如果错误将在循环的一个周期内发生，则它发生在任一

`DteTm = TDelement.innerText`或者

`Worksheets(1).Cells(Rw, Col).Value = TDelement.innerText`,

`If...Then`显然，取决于陈述的结果。

经过一番谷歌搜索，普遍的共识似乎是错误 70 与变量的命名冲突有关（即尝试使用相同的变量名两次）。因此，我尝试在每个循环结束时添加`Set TDelement = Nothing`before`Next`以清除变量，但它并没有解决问题（并不那么令人惊讶；我以前从未遇到过像这样的循环中的变量问题）。

会不会有什么关系`.innerText`？尽管在我看到的关于从 IE 中提取数据的几乎所有论坛帖子中都提到了它，但 Excel 帮助文件中根本没有提到它......

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:57:33.713

试试下面的代码：

```
Sub sample()

    Dim IE As Object
    Dim Web_Address As String

    Dim tblTR As Object
    Dim tblTD As Object

    Set IE = CreateObject("internetexplorer.application")
    Web_Address = "http://www.bom.gov.au/fwo/IDQ65388/IDQ65388.040762.tbl.shtml"

    ' Access the Webpage
    IE.Navigate Web_Address
    IE.Visible = True

Start:

    ' Wait while IE loading...
    Do While IE.Busy
        Application.Wait DateAdd("s", 5, Now)
    Loop
    ' Find and Set Data Table Cells/object within webpage
    Set tblTR = IE.document.GetElementsByTagName("tr")

    If tblTR Is Nothing Then GoTo Start

    Dim i As Integer
    i = 1

    For Each tblTD In tblTR
        If Not tblTD Is Nothing Then
            Worksheets(1).Cells(i, 1).Value = tblTD.all(0).innerText
            Worksheets(1).Cells(i, 2).Value = tblTD.all(1).innerText
        End If
        i = i + 1
    Next
End Sub 
```

# signal-processing - 试图在回调中实现 FIR 数字滤波器系数，得到失真

> ID：15352425
> 
> 赞同：1
> 
> 时间：2013-03-12T02:47:28.363
> 
> 标签：signal-processing, core-audio

当我实现使用 FIR 数字滤波器设计器创建的系数时，我得到了失真/奇怪的噪音。我将每个系数相乘，然后将下一个系数添加到每个样本中。我究竟做错了什么？

这是我的回调代码。

```
 #define FILTER_LEN 80
double coeffs[FILTER_LEN] = {
    0.4125 ,
    0.30599221057325454 ,
    0.08276044954686006 ,
    -0.0712490359027435 ,
    -0.06955311277904458 ,
    0.012051224652113425 ,
    0.05063742923584152 ,
    0.014831744868668527 ,
    -0.029779626539569115 ,
    -0.025159694030674883 ,
    0.010775174598886429 ,
    0.024755079985752222 ,
    0.0034713457185069014 ,
    -0.01801104775186626 ,
    -0.011545826635692912 ,
    0.008870916828741674 ,
    0.013655646830993191 ,
    -5.071102664251368E-4 ,
    -0.011300641103149761 ,
    -0.00510565075476355 ,
    0.006635644627205735 ,
    0.007342041186401136 ,
    -0.0017580021987183615 ,
    -0.006718478769227455 ,
    -0.001849971567154631 ,
    0.004418212284366871 ,
    0.003574469697178196 ,
    -0.0017346630584036216 ,
    -0.0035938670191588205 ,
    -3.7421959758368194E-4 ,
    0.0025646904655304632 ,
    0.0014944285606302294 ,
    -0.0012317293951690197 ,
    -0.0017072619265551775 ,
    1.2436035789109519E-4 ,
    0.0013643560681614716 ,
    5.61402657685598E-4 ,
    -8.232131487266428E-4 ,
    -8.902383271571432E-4 ,
    2.7287466296042835E-4
};

OSStatus MusicPlayerCallback (
                          void *                            inRefCon,
                          AudioUnitRenderActionFlags *  ioActionFlags,
                          const AudioTimeStamp *            inTimeStamp,
                          UInt32                            inBusNumber,
                          UInt32                            inNumberFrames,
                          AudioBufferList *             ioData) {

MusicPlaybackState *musicPlaybackState = (MusicPlaybackState*) inRefCon;

double sampleinp;

double acc = 0;

    for (int i = 0 ; i < ioData->mNumberBuffers; i++){

        AudioBuffer buffer = ioData->mBuffers[i];
        SInt16 *outSampleBuffer = buffer.mData;

        for (int j = 0; j < inNumberFrames*2; j++){

            //Left Channel
            sampleinp = musicPlaybackState->samplePtr[packetIndex++];

            //For each sample add filter
            for (int k=0; k < FILTER_LEN ; k++) {
                acc += coeffs[k] * sampleinp;

            }

            outSampleBuffer[j]  = MAX(MIN(acc,32767.0),-32768.0);

            j++;

            //Right Channel
            sampleinp = musicPlaybackState->samplePtr[packetIndex++];

            //For each sample add filter
            for (int k=0; k < FILTER_LEN ; k++) {
                acc += coeffs[k] * sampleinp;

            }

             outSampleBuffer[j]=MAX(MIN(acc,32767.0),-32768.0);

        }} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:53:32.373

我可能误读了您的代码，因此我将对其进行简化。如我错了请纠正我：

```
//  incorrect
double out = 0;
double in = ....
for( int i=0; i<FILTER_LEN; ++i ) {
   out += in * coeff[i];
}
//bound out 
```

这根本不对——如果你做一点因式分解，你会发现这相当于乘以一个常数（你的系数的总和）。FIR 滤波器实际上是卷积运算。要执行此操作，您需要存储旧输入。

```
//  correct (or close to it)
double out = 0;
double in = ....
//shift stored inputs
for( int i=FILTER_LEN-2; i>=0; --i ) {
   inarr[i+1] = inarr[i];
}
// add new input to the mix
inarr[0] = in;
// perform convolution
for( int i=0; i<FILTER_LEN; ++i ) {
   out += inarr[i] * coeff[i];
}
//bound out 
```

该代码未经测试，我可能在这里或那里颠倒了一些索引，但你明白了。

# android - 我想在没有谷歌播放服务的所有版本的操作系统中使用谷歌地图 v2，我该怎么做

> ID：15352433
> 
> 赞同：0
> 
> 时间：2013-03-12T02:48:47.427
> 
> 标签：android, google-maps

为了使谷歌地图 v2 在所有版本的操作系统中工作，我使用下面的布局：

该项目可以真正启动，但视图中有一个按钮可以获取 google play 服务：

问题：

1.  有没有什么方法可以让谷歌地图 V2 在任何类型的终端上工作而不获取谷歌播放服务
2.  如果问题 1 的答案是否定的，我可以无声地获取 google play 服务吗（我不喜欢这个按钮，但我认为只有一张地图出现在我的视野中，这对用户不利）。
3.  如果上述问题无法解决，我该怎么做才能使地理点出现在谷歌地图上。

# javascript - 如何在 Javascript 中转义单引号？

> ID：15352441
> 
> 赞同：0
> 
> 时间：2013-03-12T02:49:40.253
> 
> 标签：javascript

我在我的网站 ( [http://www.xeasycorex.net](http://www.xeasycorex.net) ) 上使用以下脚本作为每个帖子中的 Tumblr 按钮。该`strPostTitle.replace`行转义任何双引号，但我需要对单引号做同样的事情，因为它在帖子标题中出现并且不显示按钮时终止字符串，我只是不知道该怎么做

谢谢！

```
<script>
var strPostUrl = "<data:post.url/>";
var strPostTitle = '<data:post.title/>';
var strNewUrl = strPostUrl.replace("http://","");
var strNewTitle = strPostTitle.replace(/"/g, '"');
document.write("<a href='http://www.tumblr.com/share/link?url="+strNewUrl+"&amp;name="+strNewTitle+"'><img src='https://lh4.googleusercontent.com/-Vw74mICSigg/USjO29GAujI/AAAAAAAARHE/dY0nzXtwTVU/s81/tumblr-share.png'/></a>");
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:21:59.577

使用`encodeURIComponent`JavaScript 函数：

```
var strPostUrl   = encodeUIRComponent("<data:post.url/>");
var strPostTitle = encodeURIComponent("<data:post.title/>"); 
```

下面是函数的解释：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:54:39.147

因为单引号在 javascript 中似乎是特殊字符，所以您应该使用反斜杠来传输它。 `\'` 请点击此链接了解更多信息：[http](http://www.w3schools.com/js/js_obj_string.asp) ://www.w3schools.com/js/js_obj_string.asp 。我改变了你的代码，所以现在它不需要转义任何东西。

```
 <script>
        var strPostUrl = escape('<data:post.url/>');
    var strPostTitle = escape('<data:post.title/>');
    var strNewUrl = strPostUrl.replace("http://","");
    document.write('<a href="http://www.tumblr.com/share/link?url='+strNewUrl+'name="'+strPostTitle+'"><img src="https://lh4.googleusercontent.com/-Vw74mICSigg/USjO29GAujI/AAAAAAAARHE/dY0nzXtwTVU/s81/tumblr-share.png"/></a>');
        </script> 
```

# java - 如何从 GpsDirectory 获取经纬度的实际值？

> ID：15352446
> 
> 赞同：4
> 
> 时间：2013-03-12T02:50:20.410
> 
> 标签：java, geocoding

我正在编写一个 Java 程序，它实际上读取图像的所有元数据（例如纬度、经度和日期时间）。以下是我正在运行的示例代码。

```
public static void findLatLong(File jpg){
    try {
        Metadata metadata = ImageMetadataReader.readMetadata(jpg);    
        if (metadata.containsDirectory(GpsDirectory.class)) {
            GpsDirectory gpsDir =(GpsDirectory)metadata.getDirectory(GpsDirectory.class);
            GpsDescriptor gpsDesc = new GpsDescriptor(gpsDir);
            System.out.println("Latitude: " + gpsDesc.getGpsLatitudeDescription());
            System.out.println("Longitude : " + gpsDesc.getGpsLongitudeDescription());
            System.out.println("Date : " + gpsDesc.getGpsTimeStampDescription());
            System.out.println("Minute  : " + gpsDesc.getDegreesMinutesSecondsDescription());
        }else{
        //  System.out.println("----- Did not find GPS Information-------------for file " + jpg.getName() );
        }

    } catch (ImageProcessingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

输出： - 纬度：21.0°8.0'22.99999999998693“经度：79.0°3.0”12.999999999994998“日期：14:16:30 UTC分钟：21.0°8.0'22.99999999998693”，79.0°3.0'12.99999999994998“

我想这都是学位格式。谁能指出我如何获得纬度和经度的真正价值。并获得适当的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:27:57.933

如果使用 metadata-extractor >= 2.6.0，您可以使用新[`com.drew.lang.GeoLocation`](http://javadoc.metadata-extractor.googlecode.com/git/2.7.0/com/drew/lang/GeoLocation.html)类（[changelog](https://code.google.com/p/metadata-extractor/wiki/ChangeLog#2.6.0)）。

```
GpsDirectory gpsDirectory = metadata.getDirectory(GpsDirectory.class);
GeoLocation location = gpsDirectory.getGeoLocation();
double lat = location.getLatitude();
double lng = location.getLongitude(); 
```

如果没有，这就是[新类源](https://code.google.com/p/metadata-extractor/source/browse/Source/com/drew/lang/GeoLocation.java)中正在做的事情：

```
 /**
     * Converts DMS (degrees-minutes-seconds) rational values, as given 
     * in {@link com.drew.metadata.exif.GpsDirectory},
     * into a single value in degrees, as a double.
     */
    @Nullable
    public static Double degreesMinutesSecondsToDecimal(
            @NotNull final Rational degs, @NotNull final Rational mins, 
            @NotNull final Rational secs, final boolean isNegative)  {

        double decimal = Math.abs(degs.doubleValue())
                + mins.doubleValue() / 60.0d
                + secs.doubleValue() / 3600.0d;

        if (Double.isNaN(decimal))
            return null;

        if (isNegative)
            decimal *= -1;

        return decimal;
    } 
```

方法参数来自哪里：

```
Rational[] latitudes = getRationalArray(GpsDirectory.TAG_LATITUDE);
Rational[] longitudes = getRationalArray(GpsDirectory.TAG_LONGITUDE);
String latitudeRef = getString(GpsDirectory.TAG_LATITUDE_REF);
String longitudeRef = getString(GpsDirectory.TAG_LONGITUDE_REF); 
```

# java - 有效的 Java 项目 17：重写 removeRange() 如何提高性能？

> ID：15352448
> 
> 赞同：12
> 
> 时间：2013-03-12T02:50:50.983
> 
> 标签：java, list, data-structures, overriding, effective-java

在 Joshua Bloch 的《Effective Java》一书中，讨论了一个类如何提供“明智选择的受保护方法”作为其内部工作的挂钩。
然后作者引用了以下文档[`AbstractList.removeRange()`](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#removeRange%28int,%20int%29)：

> 此方法由`clear`对该列表及其子列表的操作调用。重写此方法以利用列表实现的内部结构可以显着提高`clear`对该列表及其子列表的操作性能。

我的问题是，重写此方法如何提高性能（不仅仅是不重写它）？谁能举个例子？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-12T02:57:42.973

让我们举一个具体的例子 - 假设您的实现由动态数组支持（`ArrayList`例如，这是如何工作的）。现在，假设您要删除范围 [start, end) 中的元素。默认实现`removeRange`通过获取一个迭代器到 position `start`，然后调用`remove()`适当的次数来工作。

每次`remove()`调用时，动态数组实现都必须打乱位置处的所有元素，`start + 1`并向后移动一个点，以填补移除元素中留下的空白。这可能需要时间 O(n)，因为可能所有数组元素都可能需要重新排序。这意味着，如果您`k`要从列表中删除全部元素，那么天真的方法将花费时间 O(kn)，因为您正在做 O(n) 次工作 k 次。

现在考虑一种更好的方法：将位置的元素复制`end`到位置`start`，然后将元素复制`end + 1`到位置`start + 1`，等等，直到所有元素都被复制。这要求您总共只做 O(n) 的工作，因为每个元素最多移动一次。与朴素算法给出的 O(kn) 方法相比，这是一个巨大的性能提升。因此，重写`removeRange`以使用这种更有效的算法可以显着提高性能。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-12T03:00:37.157

如方法的 javadocs 中所述：

> 此实现获取一个位于 fromIndex 之前的列表迭代器，并重复调用 ListIterator.next 后跟 ListIterator.remove，直到整个范围都被删除。

由于这个抽象类不知道其子类的内部结构，因此它依赖于这种通用算法，该算法的运行时间与被删除的项目数量成正比。

例如，如果您实现了一个将元素存储为链表的子类。然后您可以利用这一事实并覆盖此方法以使用在恒定时间内运行的特定于链表的算法（将指针移动`fromIndex`到指向）。`toIndex`您因此提高了性能，因为您利用了内部结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:49:50.143

只需覆盖此方法，您就可以根据您的要求使用此通用算法作为索引问题。因为它是 AbstractList 以及 ArrayList 及其实现中的受保护方法，所以它作为对 remove() 的迭代调用，需要每次将已删除元素右侧的所有可用元素移动一个索引。显然它没有效果，所以你可以让它更好地工作。

# bison - 动态解析器 - 从单独的文件中读取令牌

> ID：15352451
> 
> 赞同：0
> 
> 时间：2013-03-12T02:51:06.210
> 
> 标签：bison, yacc, context-free-grammar, bnf, jison

假设我想解析我的新语言，如下所示：

**主.mylang**

```
import "tags.mylang"
cat dog bacon 
```

还有另一个文件`tags.mylang`看起来像这样：

```
cat "meow"
dog "woof"
bacon "sizzle" 
```

运行`main.mylang`会输出

```
meow woof sizzle 
```

我遇到的问题是“猫”、“狗”和“培根”是在一个单独的文件中定义的，正如我的`mylang`开发人员所实现的那样；即，我不能事先让它们成为语法的一部分。

是否可以在解析时将这些标签动态添加到语法中？我不想添加通配符`\w+`或其他东西，因为我希望它在无法识别的标签上出错。

**编辑：**我正在使用[`jison`](http://zaach.github.com/jison/)基于[`bison`](http://dinosaur.compilertools.net/bison/bison_4.html#SEC7).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:54:23.503

我会假设标签都与变量的模式匹配，无论可能是什么模式。（`\a\w*`，也许）。定义一个以标签为键的字典；该值可以是您想要与标签关联的任何值。据我了解，您可以通过将它放在 object 中来使解析器和词法分析器都可以使用该字典`parser.yy`。

变量的词法分析器规则是这样的（我对jison不太了解，所以这是基于bison+flex的）：

```
{variable}    if (yytext in yy.tags) { return TAG; } else { return VARIABLE; } 
```

如果您想为不同的标签使用不同的标记类型（可能是因为标签是语法概念的别名，或类似的东西），您可以将标记类型存储在标记字典中，以便您可以从词法分析器中返回它。

在标签定义文件的语法中，您可以通过将键和适当的值添加到`yy.tags`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:32:54.807

您可以使用`\w+`您建议的通配符匹配，然后在解析器的语义逻辑检测到无法识别/未定义的标记时使用[YYERROR 宏](http://www.gnu.org/software/bison/manual/html_node/Action-Features.html#Action-Features)来引发您自己的语法错误。

# java - 有人可以帮我弄清楚为什么我的一种方法根本没有运行吗？

> ID：15352452
> 
> 赞同：-1
> 
> 时间：2013-03-12T02:51:11.923
> 
> 标签：java, infinite-loop

为什么当我运行我的程序并输入 5 时，它允许我输入我的记录，但是当主菜单再次运行并输入 6 时，changePhoneNumber 方法没有运行并返回到主菜单。while(true) 循环是否以某种方式把事情搞砸了？我有一个名为 Record 的类，它看起来像：

```
public static void main(String[] args) {
    BankMethods method = new BankMethods();
    Scanner input = new Scanner(System.in);
    int optionSelected = 0;

    while(true){

    System.out.println("5\. Add a New Record");
    System.out.println("6\. Change the Phone Number in the Current Record");

    optionSelected = input.nextInt();

if (optionSelected == 5){
        Scanner getRecord = new Scanner(System.in);
        System.out.println("Enter First Name: ");
        String firstName = getRecord.nextLine();
        System.out.println("Enter Last Name: ");
        String lastName = getRecord.nextLine();
        System.out.println("Enter Phone Number: ");
        String phoneNumber = getRecord.nextLine();

        method.addNewRecord(firstName, lastName, phoneNumber);

    }
    if (optionSelected == 6){
        System.out.println("What would you like to change your phone "
                + "number to? ");
        String newNumber = input.nextLine();
        method.changePhoneNumber(newNumber);

    } 
```

和其他类...BankMethods：

```
public class BankMethods {
LinkedList recordInformation = new LinkedList();
Bankdata mainMenu = new Bankdata();

public void addNewRecord(String firstName, String lastName, 
        String phoneNumber){
    recordInformation.add(firstName); recordInformation.add(lastName);
    recordInformation.add(phoneNumber);
}

public void changePhoneNumber(String newNumber){
    recordInformation.set(2, newNumber);
    System.out.println(recordInformation);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T03:06:50.520

问题是您使用 2`Scanners`来读取 1 `InputStream`。当您打开第二个时，`Scanner`您将无法使用原始的阅读，因为第二个将拥有对它的独占访问权限。

对于此应用程序，您可以轻松使用单个`Scanner`.

请参阅：[不要在单个 InputStream 上创建多个缓冲包装器](https://www.securecoding.cert.org/confluence/display/java/FIO06-J.+Do+not+create+multiple+buffered+wrappers+on+a+single+InputStream)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:06:28.717

正确的方法是对输入流使用一个读取（扫描器）。编辑了以前的答案以使用单读选项下面给出了完整的程序

```
package com.stackoverflow.framework;

import java.util.LinkedList;
import java.util.Scanner;

public class Record {

    static Scanner input = new Scanner(System.in);

    public static String readData() {
        return (input.nextLine());
    }

    public static void main(String[] args) {
        BankMethods method = new BankMethods();

        int optionSelected = 0;

        while (true) {

            System.out.println("5\. Add a New Record");
            System.out
                    .println("6\. Change the Phone Number in the Current Record");

            optionSelected = Integer.parseInt(readData());

            if (optionSelected == 5) {
                // Scanner getRecord = new Scanner(System.in);
                System.out.println("Enter First Name: ");
                String firstName = readData();
                System.out.println("Enter Last Name: ");
                String lastName = readData();
                System.out.println("Enter Phone Number: ");
                String phoneNumber = readData();
                method.addNewRecord(firstName, lastName, phoneNumber);

            }
            if (optionSelected == 6) {
                System.out.println("What would you like to change your phone "
                        + "number to? ");
                // Scanner getRecord = new Scanner(System.in);
                String newNumber = readData();
                method.changePhoneNumber(newNumber);

            }
        }
    }
}

class BankMethods {
    LinkedList recordInformation = new LinkedList();

    public void addNewRecord(String firstName, String lastName,
            String phoneNumber) {
        recordInformation.add(firstName);
        recordInformation.add(lastName);
        recordInformation.add(phoneNumber);
    }

    public void changePhoneNumber(String newNumber) {
        recordInformation.set(2, newNumber);
        System.out.println(recordInformation);
    }
} 
```

# python - 如何对列表的一列求和？

> ID：15352457
> 
> 赞同：17
> 
> 时间：2013-03-12T02:51:43.400
> 
> 标签：python, for-loop

我有一个 Python 数组，如下所示：

```
[[1,2,3],
 [1,2,3]] 
```

我可以通过执行添加行`sum(array[i])`，如何使用双 for 循环对列求和？

IE 对于第一列，我可以得到 2，然后是 4，然后是 6。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-12T02:56:24.597

使用`for`循环（在[生成器表达式](https://docs.python.org/3/howto/functional.html#generator-expressions-and-list-comprehensions)中）：

```
data = [[1,2,3],
        [1,2,3]]

column = 1
print(sum(row[column] for row in data))  # -> 4 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T02:54:54.410

试试这个：

```
a = [[1,2,3],
     [1,2,3]]

print [sum(x) for x in zip(*a)] 
```

[压缩功能说明](http://docs.python.org/2/library/functions.html#zip)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-12T02:53:07.767

您不需要循环，用于[`zip()`](http://docs.python.org/3.3/library/functions.html#zip)转置列表，然后获取所需的列：

```
sum(list(zip(*data)[i])) 
```

（注意在 2.x 中，`zip()`返回一个列表，所以你不需要`list()`调用）。

编辑：这个问题最简单的解决方案，不使用`zip()`，可能是：

```
column_sum = 0
for row in data:
    column_sum += row[i] 
```

我们只是遍历行，获取元素并将其添加到我们的总数中。

然而，鉴于我们有内置函数可以为我们执行此操作，因此效率较低且毫无意义。一般来说，使用`zip()`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-12T02:53:45.183

```
[sum(row[i] for row in array) for i in range(len(array[0]))] 
```

那应该这样做。`len(array[0])`是列数，所以`i`遍历那些。生成器表达式`row[i] for row in array`遍历所有行并为每个列号选择一个列。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-06T16:27:44.557

我认为最简单的方法是这样的：

```
sumcolumn=data.sum(axis=0)

print (sumcolumn) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T02:53:34.600

你可以使用`zip()`：

```
In [16]: lis=[[1,2,3],
   ....:  [1,2,3]]

In [17]: map(sum,zip(*lis))
Out[17]: [2, 4, 6] 
```

或使用简单的 for 循环：

```
In [25]: for i in xrange(len(lis[0])):
    summ=0
    for x in lis:
        summ+=x[i]
    print summ
   ....:     
2
4
6 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T03:12:14.870

您可能对[numpy](http://www.numpy.org/)感兴趣，它具有更高级的数组功能。其中之一是轻松总结一列：

```
from numpy import array

a = array([[1,2,3],
 [1,2,3]])

column_idx = 1
a[:, column_idx].sum() # ":" here refers to the whole array, no filtering. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-11T06:07:53.737

您可以使用 numpy：

```
import numpy as np
a = np.array([[1,2,3],[1,2,3]])
a.sum(0) 
```

# django - 使用 AUTH_USER_MODEL 对 Django 1.5 进行测试

> ID：15352458
> 
> 赞同：4
> 
> 时间：2013-03-12T02:51:46.130
> 
> 标签：django, django-testing, django-1.5

我将我的 django 应用程序迁移到 Django 1.5。我进行了配置`AUTH_USER_MODEL`，一切看起来都很好，但是当我尝试创建一些测试时，出现以下错误：

```
DatabaseError: (1146, "Table 'test_X.auth_user' doesn't exist") 
```

**测试.py**

```
class XXTest(unittest.TestCase):

    def setUp(self):
        self.data= {
            'password1':'aaaaa',
            'password2':'aaaaa',                
            'city':'NY', (....)

        }
        self.client = Client()

    def test_register(self):
        c = Client()
        resp = self.client.post('/register/user/', self.data)
        self.assertEqual(resp.status_code, 200) 
```

**设置.py**

```
 INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
  ...
    'myuser',
)
AUTH_USER_MODEL = 'myuser.MyUser' 
```

我正在使用 MySQL，实际上表*myuser*并没有在测试数据库中创建。如果我运行，`python manage.py migrate`我不会出错。但是如果我运行：

```
python manage.py syncdb

Syncing...
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)

Synced:
 > django.contrib.auth
 > django.contrib.contenttypes
 > django.contrib.sessions
 > django.contrib.sites
 > django.contrib.messages
 > django.contrib.staticfiles
 > django.contrib.admin
 > django.contrib.flatpages
 > django.contrib.sitemaps 
```

...未同步（使用迁移）：...

```
- myuser
(use ./manage.py migrate to migrate these) 
```

我怎样才能使我的测试正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T03:40:08.993

您必须在 myuser/models.py 上创建自定义用户

就像[https://docs.djangoproject.com/en/dev/topics/auth/customizing/#a-full-example](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#a-full-example)

# ruby-on-rails - 如何使用在##_helper 文件中声明的变量？

> ID：15352460
> 
> 赞同：1
> 
> 时间：2013-03-12T02:51:59.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在我的`Route.rb`文件中执行之前的保存定义。（@current_user.email 导致错误）

```
 class Route < ActiveRecord::Base

  before_save { |route| route.created_by = @current_user.email }

end 
```

但我得到这个错误，

```
undefined method `email' for nil:NilClass 
```

`_header.html.erb`但我可以在我的Like so中很好地使用它：

```
<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
    <%= @current_user.email %>
    <span class="caret"></span> 
```

`@current_user`在我的描述中`sessions_helper`是这样的：

```
module SessionsHelper

    def sign_in(user)
        cookies.permanent[:remember_token] = user.remember_token
        current_user = user
    end

    def signed_in?
        !current_user.nil?
    end

    def current_user=(user)
        @current_user
    end

    def current_user
        @current_user ||= User.find_by_remember_token(cookies[:remember_token])
    end

    def current_user?(user)
        user == current_user
    end

    def sign_out
        current_user = nil
        cookies.delete(:remember_token)
    end
end 
```

为什么我无法在`before_save`没有出现该错误的情况下执行此操作？多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:08:06.267

根据我的评论，您的`SessionsHelper`外观类似于[The Rails Tutorial](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/app/helpers/sessions_helper.rb)。鉴于此，我认为您的方法`current_user`和`current_user=`方法存在一些问题，因为它们似乎在做相反的事情。他们可能应该是：

```
def current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end

def current_user=(user)
  @current_user = user
end 
```

**编辑**

[模型不应该知道控制器或辅助方法](https://stackoverflow.com/q/10190995/567863)，因此您可能希望`@route.created_by = current_user.email`在保存对象之前在相关控制器中的某个位置进行设置。

# sql - 通过使用不同的模式，表/视图不存在

> ID：15352461
> 
> 赞同：1
> 
> 时间：2013-03-12T02:52:02.793
> 
> 标签：sql, database-schema

1）在模式A下创建一个表。

```
create table test_PK (
     stdid INT NOT NULL,
     stdname VARCHAR(10),
     PRIMARY KEY(stdid)
     );

insert into test_pk values (10,'Bob');  //Here works fine 
```

2) 执行：

```
GRANT SELECT,INSERT,DELETE ON TEST_PK TO B;  //works fine 
```

3）使用模式B登录数据库，同时执行`select * from test_pk;` 它抱怨：

> ORA-00942：表或视图不存在
> 00942\. 00000 - “表或视图不存在”
> *原因：
> *操作：
> 行错误：12 列：14

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:22:11.890

我的猜测是您需要在使用其他用户登录时指定架构：

```
select * from A.test_pk 
```

这篇文章也可能有帮助：[ORA-00942: Can select from "schema.table" but not "table"?](https://stackoverflow.com/questions/7591569/ora-00942-can-select-from-schema-table-but-not-table) -- 你可以创建一个同义词来绕过必须在你的 SELECT 中指定模式。

# php - 使用 ID 的 PHP 链接表单

> ID：15352466
> 
> 赞同：0
> 
> 时间：2013-03-12T02:52:19.780
> 
> 标签：php

我有一个数据库，其中有一个主表单，列出所有使用此代码的人员

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("datatest", $con);
$result = mysql_query("SELECT * FROM Personnel");
echo "<TABLE BORDER=2>";
echo"<TR><TD><B>Name</B><TD><B>Number</B><TD><B>View</B><TD></TR>";
while ($myrow = mysql_fetch_array($result))
{
echo "<TR><TD>".$myrow["Surname"]." ".$myrow["First Names"]."<TD>".$myrow["Number"];
echo "<TD><a href=\"childdetails.php?EmployeeID=".$myrow["EmployeeID"]."\">View</a>";
}
echo "</TABLE>";
?>
</HTML> 
```

如您所见，我有一个查看此人详细信息的链接，但是当我单击查看链接时，我收到以下错误

解析错误：语法错误，第 6 行 C:\Program Files\EasyPHP-12.1\www\my便携式文件\dss4\childdetails.php 中的意外 'EmployeeID' (T_STRING) childdetails.php 具有以下代码

```
<HTML>
<?php
$db = mysql_connect("localhost", "root", "");
mysql_select_db("datatest",$db);
$result = mysql_query("SELECT * FROM children; 
WHERE "EmployeeID="["$EmployeeID"],$db);
$myrow = mysql_fetch_array($result);
echo "Child Name: ".$myrow["ChildName"];
echo "<br>Mother: ".$myrow["Mother"];
echo "<br>Date of Birth: ".$myrow["DateOfBirth"];
?>
</HTML> 
```

由于列出人员的第一个表格有效，我相信问题出在服务器返回的第 6 行的 childdetails.php 中，但我根本不知道如何解决它。

注意：一个人可以有多个孩子也可以有多个妻子 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:23:32.967

首先，你的查询是错误的，你告诉 sql 你的脚本已经结束，它应该开始执行新的东西。我将在下面向您展示如何正确执行此操作。

另外，不要使用 mysql 特定的语法，它已经过时了，以后会给你带来真正的麻烦，特别是如果你决定使用 sqlite 或 postgresql。

此外，学习使用准备好的语句来避免 sql 注入，您希望将变量用作准备好的查询中的字符串，而不是作为 sql 的可能执行脚本。

使用 PDO 连接，您可以像这样初始化一个：

```
// Usage:   $db = connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword);
// Pre:     $dbHost is the database hostname, 
//          $dbName is the name of the database itself,
//          $dbUsername is the username to access the database,
//          $dbPassword is the password for the user of the database.
// Post:    $db is an PDO connection to the database, based on the input parameters.
function connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword)
{
    try
    {
         return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=UTF-8", $dbUsername, $dbPassword);
    }
    catch(PDOException $PDOexception)
    {
        exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
    }
} 
```

然后初始化变量：

```
$host = 'localhost';
$user = 'root';
$dataBaseName = 'databaseName';
$pass = ''; 
```

现在您可以通过以下方式访问您的数据库

```
$db = connectToDatabase($host , $databaseName, $user, $pass); // You can make it be a global variable if you want to access it from somewhere else. 
```

现在您应该构造一个可以用作准备好的查询的查询，也就是说，它接受准备好的语句，以便您准备查询，然后执行一个变量数组，这些变量将被放入查询中，并且将避免 sql同时注入：

```
$query = "SELECT * FROM children WHERE EmployeeID = :employeeID;"; // Construct the query, making it accept a prepared variable.
$statement = $db->prepare($query); // Prepare the query.
$statement->execute(array(':employeeID' => $EmployeeID)); // Here you insert the variable, by executing it 'into' the prepared query.
$statement->setFetchMode(PDO::FETCH_ASSOC); // Set the fetch mode.

while ($row = $statement->fetch())
{
    $ChildName = $row['ChildName'];
    $Mother = $row['Mother'];
    $DateOfBirth = $row['DateOfBirth'];
    echo "Child Name: $ChildName";
    echo "<br />Mother: $Mother";
    echo "<br />Date of Birth: $DateOfBirth";
} 
```

您应该使用类似的方法来接收 $EmployeeID 但这应该对您有很大帮助。

顺便说一句：记得用空格 ' ' 和正斜杠来关闭你的中断标签，就像我向你展示的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:05:54.590

你需要改变你的查询是这样的

```
<HTML>
<?php
$db = mysql_connect("localhost", "root", "");
mysql_select_db("datatest",$db);
$result = mysql_query("SELECT * FROM children WHERE EmployeeID=" . $EmployeeID, $db);
$myrow = mysql_fetch_array($result);
echo "Child Name: ".$myrow["ChildName"];
echo "<br>Mother: ".$myrow["Mother"];
echo "<br>Date of Birth: ".$myrow["DateOfBirth"];
?>
</HTML> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:14:00.487

我会说更像。

```
$result = mysql_query("SELECT * FROM children WHERE EmployeeID='$EmployeeID'");
// as far $EmployeeID is actualy set before running a query
//but as comment says don't use mysql better something like this

<?php
$mysqli = new mysqli('localhost', 'root', 'my_password', 'my_db');
if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') '
        . $mysqli->connect_error);
}
/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT * FROM children WHERE EmployeeID=?")) {

/* bind parameters for markers */
$stmt->bind_param("s", $EmployeeID);

/* execute query */
$stmt->execute();

/* bind result variables */
$stmt->bind_result($Employee);

/* fetch value */
$stmt->fetch();

printf($Employee);

/* close statement */
$stmt->close();
}
/* close connection */
$mysqli->close(); 
```

# php - 提交表单后访问使用 PHP 创建的文件

> ID：15352467
> 
> 赞同：0
> 
> 时间：2013-03-12T02:52:25.980
> 
> 标签：php, javascript, html, forms, page-refresh

我正在构建一个允许用户查询表/数据库的表单。用户通过 HTML 下拉菜单从目录中选择要加载的表。这个下拉菜单由一个 PHP 循环提供支持，该循环读取并显示目录中的文件（或表）。为了实现同一张表的多次查询，用户首先选择一个复选框将他们查询的表下载到同一个目录中，然后从同一个下拉菜单中选择他们的查询文件。有道理？

但是，点击提交后，下拉菜单中没有新创建的文件。该文件在页面刷新后出现。

现在的问题是：显示新下载的表格的最佳方式是什么，以便在按下提交按钮后立即被下拉框（和 PHP 循环）识别。我玩过 javascript location.reload(); 但无济于事。请参阅下面的简化代码：

```
<html>
<form action = "" method = "post"> 

Table File: <select name="hfile">

<?php
$dir = "/Director/to/table/files";
$table_files = scandir($dir, 1); 

//This is going to create the drop-down menu displaying all files in directory $dir.
$i = 0; 
while($i <= count($table_files)) { 
   echo "<option value = $table_files[$i]> $table_file[$i] </option>";
   $i = $i + 1;
}
?>
</select>

<!-- Below are just two of the form elements --> 
<input type ="checkbox" name="download_table" value="download"> Download Queried Table
<input type = "submit" value="Submit" name="submit_query">

//Variables are set once the submit button is pressed
if(isset($_POST["submit_query"])) 
  {
    $download_table = $_POST['download_table']; 
  }

//Download the table (if the download checkbox is on) 
if(isset($download_table)) {
  $file = "query.txt";
  mysql_query("SELECT * FROM table INTO OUTFILE \"$file\" FIELDS TERMINATED BY ','") or die(mysql_error());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:13:35.153

问完这个问题后，我意识到我的错误并想详细说明以避免一个未回答的问题。存在几个 PHP if 语句来确定如何查询表。在每个 if 语句中都有一个嵌入式语句，用于下载原始问题中描述的查询表。但是，如果没有任何查询，则如果用户请求，则没有处理下载的语句。在检查整个应用程序的功能时，这会引起头痛。

如果有人感兴趣，这是完整的代码。

```
<form action = "" method = "post"> 

Hypo File: <select name="hfile">

<?php
$dir = "/Applications/MAMP/db/mysql/IESE";
$hypo_files = scandir($dir, 1); 

$i = 0; 
while($i <= count($hypo_files) - 4) { 
  echo "<option value = $hypo_files[$i]> $hypo_files[$i] </option>";
  $i = $i + 1;
}

?>
</select>
<br><br>

<fieldset>
<legend>Hypo Query:</legend>
<br>

Min Value: <input type = "text" name = "min_value">
<!-- NOTE the names are named in relation to the col_name fields i.e. col names is greater than the field to the left and less than field to the right. -->  
<input type="radio" name="greater_than" value= ">="> <=  
<input type="radio" name="greater_than" value= ">"> <    

<!-- THIS IS THE DROP DOWN BOX FORM! (and an html comment) -->
<select name="hypo_cols">
<option value="latitude_deg">latitude deg</option>
<option value="longitude">longitude</option>
<option value="depth">depth</option>
<option value="origin_time">origin time</option>
<option value="magnitude">magnitude</option>
<option value="maximum_azimuthal_gap">max azimuthal gap</option>
<option value="distance_to_nearest_station_km">distance to nearest station km</option>
<option value="rms_travel_time_residual">rms travel time residual</option>
<option value="version">version</option>
<option value="auxiliary_remark_from_program">auxiliary remark from program</option>
</select>

<input type="radio" name="less_than" value = "="> ==
<input type="radio" name="less_than" value= "<="> <= 
<input type="radio" name="less_than" value= "<"> <

Max/Equal to Value: <input type = "text" name = "max_value"> <br> <br>
</fieldset>

<div id="forum_options">
      <!-- THIS IS THE CHECKBOX TO DISPLAY HYPO TABLE -->
<input type ="checkbox" name="display_table" value="display"> Print Queried Table
<input type ="checkbox" name="display_map" value="map"> Print Map from Query  
  <input type ="checkbox" name="download_table" value="download"> Download Queried Table <br> <br>
  <div id="submit">
  <input type = "submit" value="Submit" name="submit_query">
  <input type=button value="Refresh" onClick="window.location.reload()">
  </div>
  </div>
  </form> 

<?php

// What are we going to do once the submit button is pressed? 
if(isset($_POST["submit_query"])) 
  {
    //Lets define all the form values as $ without GET/POST.  Seems to read better in the query further below.  
    $hfile = $_POST['hfile'];
    $min_value = $_POST['min_value'];
    $greater_than = $_POST['greater_than'];
    $hypo_cols = $_POST['hypo_cols'];
    $less_than = $_POST['less_than'];
    $max_value = $_POST['max_value'];
    $display_table = $_POST['display_table'];
    $display_map = $_POST['display_map'];
    $download_table = $_POST['download_table']; 

    //DEFINE and POPULATE the TABLE with $hfile.  This is the only bit that is done no matter what else the form says!
    $load_hypo_param = "LOAD DATA INFILE '/Applications/MAMP/db/mysql/IESE/$hfile' INTO TABLE hypo FIELDS TERMINATED BY ','";
    mysql_query($load_hypo_param ) or die(mysql_error());  

  }

//a
if($less_than == "=") 
  {
    //echo "part a successful. <br>";  
    $result1 = mysql_query("SELECT * FROM hypo WHERE $hypo_cols $less_than $max_value") or die(mysql_error());

    //Lets download(?) the table (if the download checkbox is on) 
    if(isset($download_table)) {
      $file = "query.txt";
      unlink("/Applications/MAMP/db/mysql/IESE/query.txt");
      mysql_query("SELECT * FROM hypo WHERE $hypo_cols $less_than $max_value INTO OUTFILE \"$file\" FIELDS TERMINATED BY ','") or die(mysql_error());
    }

  }

//b
else if($min_value != NULL and $max_value != NULL) //isset($min_value) and isset($max_value)) 
  {
    //echo "part b successful" . "<br>" ;
    $result1 = mysql_query("SELECT * FROM hypo WHERE $hypo_cols BETWEEN $min_value AND $max_value") or die(mysql_error());

    if(isset($download_table)) {
      $file = "query.txt";
      unlink("/Applications/MAMP/db/mysql/IESE/query.txt");
      mysql_query("SELECT * FROM hypo WHERE $hypo_cols $less_than $max_value INTO OUTFILE \"$file\" FIELDS TERMINATED BY ','") or die(mysql_error());
    }

  }

//c
else if($min_value != NULL) 
  {
    //echo "part c successful" . "<br>";
    $result1 = mysql_query("SELECT * FROM hypo WHERE $hypo_cols $greater_than $min_value") or die(mysql_error());

    if($download_table != NULL) {
      $file = "query.txt";
      unlink("/Applications/MAMP/db/mysql/IESE/query.txt");
      mysql_query("SELECT * FROM hypo WHERE $hypo_cols $greater_than $min_value INTO OUTFILE '$file' FIELDS TERMINATED BY ','") or die(mysql_error());
    }
  }

//d
else if($max_value != NULL)
  {
    //echo "part d successful" . "<br>";
  $result1 = mysql_query("SELECT * FROM hypo WHERE $hypo_cols $less_than $max_value") or die(mysql_error());

  if(isset($download_table)) {
    $file = "query.txt";
    unlink("/Applications/MAMP/db/mysql/IESE/query.txt");
    mysql_query("SELECT * FROM hypo WHERE $hypo_cols $less_than $max_value INTO OUTFILE \"$file\" FIELDS TERMINATED BY ','") or die(mysql_error());
  }

  }

else
  {  
  echo "Nothing seems to be set. <br>";
  $file = "query.txt";
  unlink("/Applications/MAMP/db/mysql/IESE/query.txt");
  mysql_query("SELECT * FROM hypo INTO OUTFILE \"$file\" FIELDS TERMINATED BY ','") or die(mysql_error());

  $result1 = mysql_query("SELECT * FROM hypo");
  $nothing_set=TRUE;
  }

//echo all results.

if(!isset($nothing_set)) { 
echo "<h4>" . "Query successful and involves:" . "<br>" . "$hypo_cols " . "$greater_than " . "$min_value " . "<br>" . "$hypo_cols " . "$less_than " . "$max_value" . "<br>" . "</h4>";
}

  //Lets print the map (if the print map checkbox is on) 
  if(isset($display_map)) {
    //lets create a string of lat long values from the result1 queried table.  

    ?> 
```

# multithreading - 使用 boost 的 SSL asio 代码，async_write_some 挂起

> ID：15352472
> 
> 赞同：3
> 
> 时间：2013-03-12T02:53:09.000
> 
> 标签：multithreading, ssl, boost-asio

我有一些使用 Boost 的 SSL ASIO 库的多线程代码。该代码是多线程的，但每个 SSL 连接都有一个互斥锁，并且对`async_*`函数的调用是在持有互斥锁的情况下完成的。

我有时会看到我的代码停止运行。有一个卡住的线程。线程卡在`bio_write`. 堆栈跟踪如下所示：

```
#0  0x00000000010a974f in bio_write ()   

#1  0x00000000010a3529 in BIO_write ()

#2  0x000000000105fe72 in ssl3_write_pending ()

#3  0x0000000001060b02 in ssl3_write_bytes ()

#4  0x0000000000cce43a in boost::asio::ssl::detail::engine::do_write
(this=0x1e618a0, data=0x234c7b0, length=189) at
/usr/include/boost/asio/ssl/detail/impl/engine.ipp:294

#5  0x0000000000cce109 in boost::asio::ssl::detail::engine::perform(this=0x1e618a0, op=(int
(boost::asio::ssl::detail::engine::*)(boost::asio::ssl::detail::engine *
const, void *, std::size_t)) 0xcce3fc<boost::asio::ssl::detail::engine::do_write(void*, unsigned long)>,
data=0x234c7b0, length=189, ec=..., bytes_transferred=0x7fff8ad74d48) at
/usr/include/boost/asio/ssl/detail/impl/engine.ipp:219

#6  0x0000000000ccdd23 in boost::asio::ssl::detail::engine::write
(this=0x1e618a0, data=..., ec=..., bytes_transferred=@0x7fff8ad74d48: 0) at
/usr/include/boost/asio/ssl/detail/impl/engine.ipp:137

#7  0x0000000000dac504 in boost::asio::ssl::detail::write_op<boost::asio::mutable_buffers_1>::operator()
(this=0x7fff8ad74d20, eng=..., ec=..., bytes_transferred=@0x7fff8ad74d48: 0)
at /usr/include/boost/asio/ssl/detail/write_op.hpp:51

#8  0x0000000000da9d8a in boost::asio::ssl::detail::io_op<boost::asio::basic_stream_socket<boost::asio::ip::tcp,
boost::asio::stream_socket_service<boost::asio::ip::tcp> >,
boost::asio::ssl::detail::write_op<boost::asio::mutable_buffers_1>,
boost::asio::detail::write_op<boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp,
boost::asio::stream_socket_service<boost::asio::ip::tcp> > >,
boost::asio::mutable_buffers_1, boost::asio::detail::transfer_all_t,
boost::_bi::bind_t<void, boost::_mfi::mf2<void, Peer,
boost::system::error_code const&, unsigned long>,
boost::_bi::list3<boost::_bi::value<boost::shared_ptr<Peer> >, boost::arg<1>
(*)(), boost::arg<2> (*)()> > > >::operator() (this=0x7fff8ad74d10, ec=..., 
bytes_transferred=0, start=1) at /usr/include/boost/asio/ssl/detail/io.hpp:136

#9  0x0000000000da7f42 in boost::asio::ssl::detail::async_io<boost::asio::basic_stream_socket<boost::asio::ip::tcp,
boost::asio::stream_socket_service<boost::asio::ip::tcp> >,
boost::asio::ssl::detail::write_op<boost::asio::mutable_buffers_1>,
boost::asio::detail::write_op<boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp,
boost::asio::stream_socket_service<boost::asio::ip::tcp> > >,
boost::asio::mutable_buffers_1, boost::asio::detail::transfer_all_t,
boost::_bi::bind_t<void, boost::_mfi::mf2<void, Peer,
boost::system::error_code const&, unsigned long>,
boost::_bi::list3<boost::_bi::value<boost::shared_ptr<Peer> >, boost::arg<1> (*)(),
boost::arg<2> (*)()> > > > (next_layer=..., core=..., op=...,
handler=...) at /usr/include/boost/asio/ssl/detail/io.hpp:322

#10 0x0000000000da634d in
boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp,
boost::asio::stream_socket_service<boost::asio::ip::tcp> >
>::async_write_some<boost::asio::mutable_buffers_1,
boost::asio::detail::write_op<boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp,
boost::asio::stream_socket_service<boost::asio::ip::tcp> > >,
boost::asio::mutable_buffers_1, boost::asio::detail::transfer_all_t,
boost::_bi::bind_t<void, boost::_mfi::mf2<void, Peer,
boost::system::error_code const&, unsigned long>,
boost::_bi::list3<boost::_bi::value<boost::shared_ptr<Peer> >, boost::arg<1>
(*)(), boost::arg<2> (*)()> > > > (this=0x1e61880, buffers=..., handler=...)
at /usr/include/boost/asio/ssl/stream.hpp:502

#11 0x0000000000da3032 in
boost::asio::detail::write_op<boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp,
boost::asio::stream_socket_service<boost::asio::ip::tcp> > >,
boost::asio::mutable_buffers_1, boost::asio::detail::transfer_all_t,
boost::_bi::bind_t<void, boost::_mfi::mf2<void, Peer,
boost::system::error_code const&, unsigned long>,
boost::_bi::list3<boost::_bi::value<boost::shared_ptr<Peer> >, boost::arg<1>
(*)(), boost::arg<2> (*)()> > >::operator() (this=0x7fff8ad74f00, ec=...,   
bytes_transferred=0, start=1) at /usr/include/boost/asio/impl/write.hpp:250 

#12 0x0000000000d9ffbb in
boost::asio::async_write<boost::asio::ssl::stream<boost::asio::basic_stream_socket<boost::asio::ip::tcp,
boost::asio::stream_socket_service<boost::asio::ip::tcp> > >,
boost::asio::mutable_buffers_1, boost::_bi::bind_t<void,
boost::_mfi::mf2<void, Peer, boost::system::error_code const&, unsigned
long>, boost::_bi::list3<boost::_bi::value<boost::shared_ptr<Peer> >,  
boost::arg<1> (*)(), boost::arg<2> (*)()> > > (s=..., buffers=...,     
handler=...) at /usr/include/boost/asio/impl/write.hpp:585 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:48:41.073

这是多线程问题的结果。

对于大多数 Boost.Asio 对象，在一个对象上挂起多个异步操作是安全的；它只是指定对对象的并发调用是不安全的。尽管如此，它*通常*不会在某些类型上出现问题，例如[`ip::tcp::socket`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/ip__tcp/socket.html). 但是，[`ssl::stream`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/ssl__stream.html)强调：

> 应用程序还必须确保所有异步操作都在相同的隐式或显式链中执行。

在您的情况下，解决方案是[`wrap()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service__strand/wrap.html)每个组合操作的完成处理程序由同一条链完成。这将导致在链中调用所有[中间操作。](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/core/strands.html)有关线程安全性和股线细微差别的更多详细信息，请考虑阅读[此](https://stackoverflow.com/a/12801042/1053968)答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:17:09.740

如果您可以提供代码，它可能会有所帮助。仅从堆栈跟踪中很难分析它。如果由于某种原因您无法提供代码，那么这里有一些想法：

bio_write 是调用以将数据写入套接字的开放 SSL 方法。如果您尝试直接调用它，可能会出现一些问题。 几个月前，[有人在尝试使用它时寻求帮助，但得到的答案为零。](https://stackoverflow.com/questions/14285671/c-how-to-use-openssls-bio-write-correctly)

我也在使用带有 SSL 的 ASIO。我的代码使用一个线程将消息写入套接字，并使用另一个线程处理从套接字读取消息。我的客户端正在与多台服务器通信，但总共有 2 个线程来处理所有服务器上的所有套接字 I/O。这是我写出套接字的代码，到目前为止在 Windows 下没有问题：

```
void SSLSocket::SendWorkerThread(SSLSocket* psSLS)
{
   // This thread method that gets called to process the messages to be sent to the server.
   //
   // Since this has to be a static method, call a method on the class to handle server requests.
   psSLS->ProcessSendRequests();
}

void SSLSocket::ProcessSendRequests()
{
   // This method handles sending msgs to the server.
   //
   std::stringstream ss;
   DWORD WaitResult;
   Log.LogString("SSLSocket::ProcessSendRequests: Worker thread " + Logger::NumberToString(boost::this_thread::get_id()) + " started.\n", LogInfo);
   // Loop until the user quits, or an error of some sort is thrown.
   try
   {
      do
      {
         // If there are one or more msgs that need to be sent to a server, then send them out.
         if (SendMsgQ.Count() > 0)
         {
            Message* pMsg = SendMsgQ.Front();
            SSLSocket* pSSL = pMsg->pSSL;
            SendMsgQ.Pop();
            const Byte* pBuf = pMsg->pBuf;
            const int BytesInMsg = pMsg->BytesInMsg;
            boost::system::error_code Error;
            {
               Locking CodeLock(SocketLock); // Single thread the code.
               // unsigned int BytesTransferred = boost::asio::write(*pSSL->pSocket, boost::asio::buffer(pBuf, BytesInMsg), Error);
               boost::asio::async_write(*pSSL->pSocket, boost::asio::buffer(pBuf, BytesInMsg), boost::bind(&SSLSocket::HandleWrite, this,
                  boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
            }
            ss << "SSLSocket::ProcessSendRequests: # bytes sent = " << BytesInMsg << "\n";
            Log.LogString(ss.str(), LogDebug2);
            Log.LogBuf(pBuf, BytesInMsg, DisplayInHex, LogDebug3);
         }
         else
         {
            // Nothing to send, so go into a wait state.
            WaitResult = WaitForSingleObject(hEvent, INFINITE);
            if (WaitResult != 0L)
            {
               Log.LogString("SSLSocket::ProcessSendRequests: WaitForSingleObject event error.  Code = " + Logger::NumberToString(GetLastError()) + ". \n", LogError);
            }
         }
      } while (ReqAlive);
      Log.LogString("SSLSocket::ProcessSendRequests: Worker thread " + Logger::NumberToString(boost::this_thread::get_id()) + " done.\n", LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::ProcessSendRequests: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
} 
```

请注意，握手必须在尝试写入套接字之前完成。学到了一个艰难的方式。

如果这没有帮助，请尝试打印出它试图写出的字节数。如果它试图写出大量字节，那么也许值得研究。ASIO 可以接受大量数字，但 SSL 可能不行。您也可以尝试将程序置于调试状态，并在调用 write 语句时设置断点。尝试查看缓冲区结构以确保它以及其他对象（如 io_service 对象和套接字对象）完好无损，以查看是否有任何东西被踩到或可能被无意破坏。

我正在使用 SSL 库的版本 c，因为 OpenSSL 网站声称这是最稳定的版本。因此，如果您使用的是比该版本更新的版本并且所有其他方法都失败了，您可以尝试使用版本 c 来代替。

# android - android - 循环通过动态添加的表单输入

> ID：15352474
> 
> 赞同：1
> 
> 时间：2013-03-12T02:53:26.210
> 
> 标签：android, android-edittext, spinner

我在我的活动中动态添加了编辑文本和微调器。遍历所有动态添加的输入以验证并获取其文本值的最佳方法是什么？

我应该使用输入的 id 作为键和字符串元素类型（eddittext，spinner）创建并添加到哈希图中，然后遍历它还是有更标准的方法来做到这一点？

# c++ - 检查向量中的向量“空间”是否 >> 为空

> ID：15352477
> 
> 赞同：1
> 
> 时间：2013-03-12T02:53:39.153
> 
> 标签：c++, vector, stl, queue, containers

我正在玩容器，目前正在尝试使用`vector<vector<queue<int>>>`. 这个容器的形式是这样的，“第一个”向量的索引是客户端 ID，“第二个”向量的索引是优先级。即类型的消息`int`被推送到`queue`某个优先级，属于某个客户端。

我试图找到一种简单的方法来确定客户端是否有任何消息，即它的任何优先级是否有一个非空队列。我用这段简单的代码来说明我想要做什么：

```
#include "stdafx.h"
#include <iostream>
#include <vector>
#include <queue>

using namespace std;

int main()
{

    vector<vector<queue<int>>> node_pri_msg;
    queue<int> pri_msg;

    node_pri_msg.resize(2);
    node_pri_msg[1].resize(2);
    node_pri_msg[0].resize(2);

    for (int i=0; i<2; i++)
    {
        node_pri_msg[i].push_back(pri_msg);
    }

    node_pri_msg[0][1].push(3);

    if (node_pri_msg[1].empty())
    {
        cout << "empty-check succeeded" << endl;
    }
} 
```

但它不起作用，即它似乎认为它`node_pri_msg[1]`是非空的，尽管在任何“属于”它的队列中都没有消息。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:13:50.270

我认为你会得到更好的服务：

```
#include <iostream>
#include <queue>
#include <map>

using namespace std;

int main()
{
    typedef std::queue<int> MessageQueue;
    typedef std::map<int, MessageQueue> PriorityMap;
    typedef std::map<int, PriorityMap> ClientMap;

    ClientMap clients;

    clients[10][1].push(1);
    clients[10][1].push(2);
    clients[11][2].push(3);

    cout << boolalpha;
    cout << clients[1].empty() << endl;
    cout << clients[10].empty() << endl;
    cout << clients[10][0].empty() << endl;
    cout << clients[10][1].empty() << endl;
    cout << clients[10][1].size() << endl;

    return 0;
} 
```

**输出**

```
true
false
true
false
2 
```

# linux - BASH - 如何将输出 1 和 2 重定向到文件和屏幕？

> ID：15352480
> 
> 赞同：0
> 
> 时间：2013-03-12T02:53:53.210
> 
> 标签：linux, bash

如何将输出 1 和 2 重定向到文件和屏幕？

```
command 2 1 > /tmp/log and 2 1 screen 
```

所有输出到文件和屏幕

谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T02:55:29.603

tee 命令将输出定向到文件和 tty。

```
echo 'hi there'  2>&1 | tee outputfile 
```

向输出文件和 tty 写入相同的“hi there”。这会重定向 1 和 2。

根据您的描述尝试脚本：

```
Linux / Unix Command: script

 Command Library
NAME

script - make typescript of terminal session  
SYNOPSIS

script [-a ] [-f ] [-q ] [-t ] [file ]  
DESCRIPTION

Script makes a typescript of everything printed on your terminal. It is useful for students who need a hardcopy record of an interactive session as proof of an assignment, as the typescript file can be printed out later with lpr(1).
If the argument file is given, script saves all dialogue in file If no file name is given, the typescript is saved in the file typescript 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:44:00.323

我有 1000 个命令

例子

```
apt-get install;
mc;
apt-get update;
echo "foo";
..
..
..
nano /etc/passwd;
ls /tmp/log;
mc;
screen 
```

我需要将结果发送到屏幕并保存到文件中。

没有人知道什么会运行该命令。

谢谢

# c# - MVC 4 动态操作方法参数

> ID：15352481
> 
> 赞同：2
> 
> 时间：2013-03-12T02:53:57.360
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, knockout.js

我有以下类定义：

```
public class CallGroupViewModel
    {
        public string Name { get; set; }
        public string BulkEmails { get; set; }
        public List<dynamic> Members {get;set;}

    } 
```

成员属性是一些动态淘汰代码，内容会根据 UI 内容而变化。我想走捷径，因为 UI 现在还悬而未决。

我的问题是，当它到达我的操作方法时，一切都会被填充，包括成员，但它是一个数组，`objects`我无法获得它们的各个属性。

```
public ActionResult SaveGroup(CallGroupViewModel group)

group.Members //this has a count
group.Members[0].email //this pukes as 'email' is not valid for 'object' 
```

我可能只是错过了一些东西，任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:19:57.177

要从对象访问动态属性，在您的情况下，您可以使用：

```
var email = group.Members[0].GetType()
                            .GetProperty("Email")
                            .GetValue(group.Members[0], null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:48:27.717

填充 MVC 操作方法参数的模型绑定系统不适用于动态对象。系统需要类型信息才能知道要绑定哪些信息。考虑将模型更改为使用强类型。

# android - 无法使用自定义适配器单击 ListView 中的项目

> ID：15352486
> 
> 赞同：20
> 
> 时间：2013-03-12T02:54:21.557
> 
> 标签：android, listview

我正在尝试编写一个应用程序，它从数据库中获取项目并在 ListView 中填充行。点击行后我无法点击这些项目，并且 dpad 也不会转到任何行。我正在使用自定义适配器。

**推文.xml**

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:padding="6dip" 
        android:orientation="vertical">

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textUser"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textStyle="bold" 
                android:text="NAME"/>

            <TextView
                android:id="@+id/textDate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#333333"
                android:text="DATE" />

        </LinearLayout>

        <TextView
            android:id="@+id/textTweet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TWEET" />

    </LinearLayout> 
```

**Activity_main.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/listView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    tools:context=".MainActivity" >

</ListView> 
```

**Oncreate 方法**

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            ListView view = (ListView) findViewById(R.id.listView);     
        MyArrayAdapter theAdapter = new MyArrayAdapter(tweetDb,this);

        //setContentView(theAdapter.getView(0, null, null));
        view.setAdapter(theAdapter);
        view.setOnItemClickListener( new OnItemClickListener()
        {

            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position,
                    long id) 
            {
                //Tweet theTweet = (Tweet)parent.getAdapter().getItem(position);
                //saved.insert(theTweet);
                Toast.makeText(getApplicationContext(), "Saved", Toast.LENGTH_LONG).show();
                Log.v("SCHEMA", "onItemClick fired!");
            }
        } );
    } 
```

**适配器类 getView**

```
@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    LayoutInflater inflater = (LayoutInflater)context.getSystemService(
    Context.LAYOUT_INFLATER_SERVICE
    );

    View tweetView = inflater.inflate(R.layout.tweet, null);

    TextView textTweet = (TextView)  tweetView.findViewById(R.id.textTweet);    
    textTweet.setText(items.get(position).getTweet());

    textTweet = (TextView)tweetView.findViewById(R.id.textUser);
    textTweet.setText(items.get(position).getName());

    textTweet = (TextView)tweetView.findViewById(R.id.textDate);
    textTweet.setText(textFormat.format(items.get(position).getCreated()));

    return tweetView;
} 
```

**MyArrayAdapter 类**

```
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import android.content.Context;
import android.database.Cursor;
import android.database.DataSetObserver;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ListAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class MyArrayAdapter implements ListAdapter
{

    private ArrayList<Tweet> items;
    private Context context;
    private SimpleDateFormat textFormat = new SimpleDateFormat("E MMM dd HH:mm:ss z yyyy");

    public MyArrayAdapter(TweetDbSource db, Context context)
    {
        items = new ArrayList<Tweet>();
        this.context = context;
        Cursor cursor = db.getReadableDatabase().query("Tweet", null, null, null, null, null, null);

        while (!cursor.isLast())
        {
                cursor.moveToNext();
                items.add(new Tweet(cursor.getLong(0),cursor.getLong(1),cursor.getString(2),cursor.getString(3),
                                cursor.getString(4),new Date(),cursor.getInt(6)));
        }
    }

    @Override
    public int getCount()
    {
        return items.size();
    }

    @Override
    public Object getItem(int position) 
    {
        return items.get(position);
    }

    @Override
    public long getItemId(int position) 
    {
        return position;
    }

    @Override
    public int getItemViewType(int arg0) 
    {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(
        Context.LAYOUT_INFLATER_SERVICE
        );

        OnClickListener saveTweet = new OnClickListener() 
        {
              public void onClick(View v) 
              {
                  Toast.makeText(v.getContext(), "Saved", Toast.LENGTH_LONG).show();
              }
        };
        View tweetView = inflater.inflate(R.layout.tweet, null);

        TextView textTweet = (TextView)  tweetView.findViewById(R.id.textTweet);    
        textTweet.setText(items.get(position).getTweet());

        textTweet = (TextView)tweetView.findViewById(R.id.textUser);
        textTweet.setText(items.get(position).getName());

        textTweet = (TextView)tweetView.findViewById(R.id.textDate);
        textTweet.setText(textFormat.format(items.get(position).getCreated()));

        return tweetView;
    }

    @Override
    public int getViewTypeCount() 
    {
        // TODO Auto-generated method stub
        return 1;
    }

    @Override
    public boolean hasStableIds() 
    {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isEmpty() 
    {
        // TODO Auto-generated method stub
        return items.size() == 0;
    }

    @Override
    public void registerDataSetObserver(DataSetObserver arg0) 
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void unregisterDataSetObserver(DataSetObserver arg0) 
    {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean areAllItemsEnabled() 
    {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isEnabled(int arg0) 
    {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

Toast 或 log 不起作用，这就是我可以判断它不起作用的方式

**更新了 getView 方法**

```
public View getView(int position, View convertView, ViewGroup parent) 
    {
             OnClickListener SaveView = new OnClickListener() {
             @SuppressLint("NewApi")
            public void onClick(View v) 
             {
               Toast.makeText(v.getContext(), "Saved", Toast.LENGTH_LONG).show();
               v.callOnClick();
             }
         };
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(
            Context.LAYOUT_INFLATER_SERVICE
            );
            View tweetView = inflater.inflate(R.layout.tweet, null);

            TextView textTweet = (TextView)  tweetView.findViewById(R.id.textTweet);    
            textTweet.setText(items.get(position).getTweet());

            textTweet = (TextView)tweetView.findViewById(R.id.textUser);
            textTweet.setText(items.get(position).getName());

            textTweet = (TextView)tweetView.findViewById(R.id.textDate);
            textTweet.setText(textFormat.format(items.get(position).getCreated()));
            tweetView.setOnClickListener(SaveView);
            return tweetView;
    } 
```

**更新**

问题已解决，我想通了：DI 必须在我的适配器类中的这两种方法中返回 true 而不是 false！

```
@Override
    public boolean areAllItemsEnabled() 
    {
        return true;
    }

    @Override
    public boolean isEnabled(int arg0) 
    {
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-14T13:25:20.620

通常会发生这种情况，因为您的列表视图中的项目是焦点。尝试添加

```
android:descendantFocusability="blocksDescendants" 
```

在您的自定义列表视图行中

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:padding="6dip" 
    android:orientation="vertical"
    android:descendantFocusability="blocksDescendants"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:09:44.047

我通常将点击监听器放在适配器本身：

```
@Override
      public View getView(int position, View convertView, ViewGroup parent) {

        OnClickListener yourClickListener = new OnClickListener() {
              public void onClick(View v) {
                //put your desired action here
                v.callOnClick();
              }
          };

    ...

    // then add the listener to your view
    tweetView.setOnClickListener(yourClickListener); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:27:19.423

在 onItemClick 方法中添加：

```
v.setSelected(true); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T03:24:31.850

将下面的行添加到您的 ListView xml

```
android:choiceMode="singleChoice" 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-05-06T08:06:19.183

试过这个？

```
 @Override
    public boolean isEnabled(int position) {
        //Set a Toast or Log over here to check.
        return true;
    } 
```

# java - 如何在 TextView 文本中添加图像？

> ID：15352496
> 
> 赞同：93
> 
> 时间：2013-03-12T02:55:28.840
> 
> 标签：java, android, xml, image, textview

我在 Google 上四处搜索，发现了一个与我的问题类似的问题，即如何在`TextView`文本中包含图像，例如*"hello my name is [image]"*，答案是这样的：

```
ImageSpan is = new ImageSpan(context, resId);
text.setSpan(is, index, index + strLength, 0); 
```

我想在这段代码中知道，

1.  我应该在上下文中输入或做什么？
2.  我应该对`text.setSpan()`类似的导入或引用做一些事情还是留下文本？

如果有人可以为我打破这一点，那将不胜感激。

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-03-12T03:19:02.267

试试这个 ..

```
 txtview.setCompoundDrawablesWithIntrinsicBounds(
                    R.drawable.image, 0, 0, 0); 
```

也看到这个.. [http://developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)

在 xml 文件中试试这个

```
 <TextView
        android:id="@+id/txtStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:drawableLeft="@drawable/image"
        android:drawablePadding="5dp"
        android:maxLines="1"
        android:text="@string/name"/> 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2014-01-21T06:27:38.860

**com/ xyz* */customandroid/* ***TextViewWithImages.java*** ：*

 **```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import android.content.Context;
import android.text.Spannable;
import android.text.style.ImageSpan;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.TextView;

public class TextViewWithImages extends TextView {

    public TextViewWithImages(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    public TextViewWithImages(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public TextViewWithImages(Context context) {
        super(context);
    }
    @Override
    public void setText(CharSequence text, BufferType type) {
        Spannable s = getTextWithImages(getContext(), text);
        super.setText(s, BufferType.SPANNABLE);
    }

    private static final Spannable.Factory spannableFactory = Spannable.Factory.getInstance();

    private static boolean addImages(Context context, Spannable spannable) {
        Pattern refImg = Pattern.compile("\\Q[img src=\\E([a-zA-Z0-9_]+?)\\Q/]\\E");
        boolean hasChanges = false;

        Matcher matcher = refImg.matcher(spannable);
    while (matcher.find()) {
        boolean set = true;
        for (ImageSpan span : spannable.getSpans(matcher.start(), matcher.end(), ImageSpan.class)) {
            if (spannable.getSpanStart(span) >= matcher.start()
             && spannable.getSpanEnd(span) <= matcher.end()
               ) {
                spannable.removeSpan(span);
            } else {
                set = false;
                break;
            }
        }
        String resname = spannable.subSequence(matcher.start(1), matcher.end(1)).toString().trim();
        int id = context.getResources().getIdentifier(resname, "drawable", context.getPackageName());
        if (set) {
            hasChanges = true;
            spannable.setSpan(  new ImageSpan(context, id),
                                matcher.start(),
                                matcher.end(),
                                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE
                             );
        }
    }

        return hasChanges;
    }
    private static Spannable getTextWithImages(Context context, CharSequence text) {
        Spannable spannable = spannableFactory.newSpannable(text);
        addImages(context, spannable);
        return spannable;
    }
} 
```

**采用：**

在*res/layout/mylayout.xml*：

```
 <com.xyz.customandroid.TextViewWithImages
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#FFFFFF00"
                android:text="@string/can_try_again"
                android:textSize="12dip"
                style=...
                /> 
```

请注意，如果将*TextViewWithImages.java放置在**com/xyz/customandroid/*以外的某个位置，则还必须更改上面的包名称`com.xyz.customandroid`。

在*res/values/strings.xml*中：

```
<string name="can_try_again">Press [img src=ok16/] to accept or [img src=retry16/] to retry</string> 
```

其中*ok16.png*和*retry16.png*是*res/drawable/*文件夹中的图标

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-06-28T10:19:12.400

我尝试了许多不同的解决方案，这对我来说是最好的：

```
SpannableStringBuilder ssb = new SpannableStringBuilder(" Hello world!");
ssb.setSpan(new ImageSpan(context, R.drawable.image), 0, 1, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
tv_text.setText(ssb, TextView.BufferType.SPANNABLE); 
```

此代码使用最少的内存。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2021-01-14T07:02:30.810

```
fun TextView.addImage(atText: String, @DrawableRes imgSrc: Int, imgWidth: Int, imgHeight: Int) {
    val ssb = SpannableStringBuilder(this.text)

    val drawable = ContextCompat.getDrawable(this.context, imgSrc) ?: return
    drawable.mutate()
    drawable.setBounds(0, 0,
            imgWidth,
            imgHeight)
    val start = text.indexOf(atText)
    ssb.setSpan(VerticalImageSpan(drawable), start, start + atText.length, Spannable.SPAN_INCLUSIVE_EXCLUSIVE)
    this.setText(ssb, TextView.BufferType.SPANNABLE)
} 
```

**`VerticalImageSpan`**来自很好的答案的课程 [https://stackoverflow.com/a/38788432/5381331](https://stackoverflow.com/a/38788432/5381331)

**使用**

```
val textView = findViewById<TextView>(R.id.textview)
textView.setText("Send an [email-icon] to example@email.com.")
textView.addImage("[email-icon]", R.drawable.ic_email,
        resources.getDimensionPixelOffset(R.dimen.dp_30),
        resources.getDimensionPixelOffset(R.dimen.dp_30)) 
```

**结果**

![](../Images/9186910f48cdc6d87bf0c75ed689e56e.png)

**注意**
为什么要`VerticalImageSpan`上课？
`ImageSpan.ALIGN_CENTER`属性需要API 29。
另外，经过测试，我发现`ImageSpan.ALIGN_CENTER`只有图像小于文本才有效，如果图像大于文本，则只有图像在中心，文本不在中心，它在图像底部对齐

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-08-16T14:19:28.790

该答案基于[18446744073709551615](https://stackoverflow.com/users/755804/18446744073709551615)的[出色答案](https://stackoverflow.com/a/21250752/3230218)。他们的解决方案虽然很有帮助，但不会使用周围的文本调整图像图标的大小。它也不会将图标颜色设置为周围文本的颜色。

下面的解决方案采用白色方形图标，使其适合周围文本的大小和颜色。

```
public class TextViewWithImages extends TextView {

    private static final String DRAWABLE = "drawable";
    /**
     * Regex pattern that looks for embedded images of the format: [img src=imageName/]
     */
    public static final String PATTERN = "\\Q[img src=\\E([a-zA-Z0-9_]+?)\\Q/]\\E";

    public TextViewWithImages(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public TextViewWithImages(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public TextViewWithImages(Context context) {
        super(context);
    }

    @Override
    public void setText(CharSequence text, BufferType type) {
        final Spannable spannable = getTextWithImages(getContext(), text, getLineHeight(), getCurrentTextColor());
        super.setText(spannable, BufferType.SPANNABLE);
    }

    private static Spannable getTextWithImages(Context context, CharSequence text, int lineHeight, int colour) {
        final Spannable spannable = Spannable.Factory.getInstance().newSpannable(text);
        addImages(context, spannable, lineHeight, colour);
        return spannable;
    }

    private static boolean addImages(Context context, Spannable spannable, int lineHeight, int colour) {
        final Pattern refImg = Pattern.compile(PATTERN);
        boolean hasChanges = false;

        final Matcher matcher = refImg.matcher(spannable);
        while (matcher.find()) {
            boolean set = true;
            for (ImageSpan span : spannable.getSpans(matcher.start(), matcher.end(), ImageSpan.class)) {
                if (spannable.getSpanStart(span) >= matcher.start()
                        && spannable.getSpanEnd(span) <= matcher.end()) {
                    spannable.removeSpan(span);
                } else {
                    set = false;
                    break;
                }
            }
            final String resName = spannable.subSequence(matcher.start(1), matcher.end(1)).toString().trim();
            final int id = context.getResources().getIdentifier(resName, DRAWABLE, context.getPackageName());
            if (set) {
                hasChanges = true;
                spannable.setSpan(makeImageSpan(context, id, lineHeight, colour),
                        matcher.start(),
                        matcher.end(),
                        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE
                );
            }
        }
        return hasChanges;
    }

    /**
     * Create an ImageSpan for the given icon drawable. This also sets the image size and colour.
     * Works best with a white, square icon because of the colouring and resizing.
     *
     * @param context       The Android Context.
     * @param drawableResId A drawable resource Id.
     * @param size          The desired size (i.e. width and height) of the image icon in pixels.
     *                      Use the lineHeight of the TextView to make the image inline with the
     *                      surrounding text.
     * @param colour        The colour (careful: NOT a resource Id) to apply to the image.
     * @return An ImageSpan, aligned with the bottom of the text.
     */
    private static ImageSpan makeImageSpan(Context context, int drawableResId, int size, int colour) {
        final Drawable drawable = context.getResources().getDrawable(drawableResId);
        drawable.mutate();
        drawable.setColorFilter(colour, PorterDuff.Mode.MULTIPLY);
        drawable.setBounds(0, 0, size, size);
        return new ImageSpan(drawable, ImageSpan.ALIGN_BOTTOM);
    }

} 
```

**如何使用：**

只需在文本中嵌入对所需图标的引用。`textView.setText(R.string.string_resource);`文本是通过编程方式设置还是在 xml 中设置都没有关系。

要嵌入名为 example.png 的可绘制图标，请在文本中包含以下字符串：`[img src=example/]`.

例如，字符串资源可能如下所示：

```
<string name="string_resource">This [img src=example/] is an icon.</string> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-12T13:25:33.060

这部分基于[@A Boschman 上面的早期答案](https://stackoverflow.com/a/38977396/1145905)。在那个解决方案中，我发现图像的输入大小极大地影响了`makeImageSpan()`正确居中对齐图像的能力。此外，我发现该解决方案通过创建不必要的行间距来影响文本间距。

我发现[BaseImageSpan](http://frescolib.org/javadoc/reference/com/facebook/widget/text/span/BetterImageSpan.html)（来自 Facebook 的 Fresco 库）做得特别好：

```
 /**
 * Create an ImageSpan for the given icon drawable. This also sets the image size. Works best
 * with a square icon because of the sizing
 *
 * @param context       The Android Context.
 * @param drawableResId A drawable resource Id.
 * @param size          The desired size (i.e. width and height) of the image icon in pixels.
 *                      Use the lineHeight of the TextView to make the image inline with the
 *                      surrounding text.
 * @return An ImageSpan, aligned with the bottom of the text.
 */
private static BetterImageSpan makeImageSpan(Context context, int drawableResId, int size) {
    final Drawable drawable = context.getResources().getDrawable(drawableResId);
    drawable.mutate();
    drawable.setBounds(0, 0, size, size);
    return new BetterImageSpan(drawable, BetterImageSpan.ALIGN_CENTER);
} 
```

`spannable.setSpan()`然后像往常一样提供你的 betterImageSpan 实例

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-15T11:30:15.440

假设它是我们的 TextView

```
<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:drawablePadding="4dp"
    android:drawableRight="@drawable/edit"
    android:text="Hello world"
    android:textSize="18dp" /> 
```

现在我们可以根据我们的要求添加以下任何一行

```
android:drawableLeft="@drawable/filename"
android:drawableRight="@drawable/filename"
android:drawableTop="@drawable/filename"
android:drawableBottom="@drawable/filename" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-25T09:46:59.303

这可能会帮助你

```
 SpannableStringBuilder ssBuilder;

        ssBuilder = new SpannableStringBuilder(" ");
        // working code ImageSpan image = new ImageSpan(textView.getContext(), R.drawable.image);
        Drawable image = ContextCompat.getDrawable(textView.getContext(), R.drawable.image);
        float scale = textView.getContext().getResources().getDisplayMetrics().density;
        int width = (int) (12 * scale + 0.5f);
        int height = (int) (18 * scale + 0.5f);
        image.setBounds(0, 0, width, height);
        ImageSpan imageSpan = new ImageSpan(image, ImageSpan.ALIGN_BASELINE);
        ssBuilder.setSpan(
                imageSpan, // Span to add
                0, // Start of the span (inclusive)
                1, // End of the span (exclusive)
                Spanned.SPAN_INCLUSIVE_EXCLUSIVE);// Do not extend the span when text add later

        ssBuilder.append(" " + text);
        ssBuilder = new SpannableStringBuilder(text);
        textView.setText(ssBuilder); 
```**

# c# - C# 中的 MySqlConnection 不起作用

> ID：15352499
> 
> 赞同：1
> 
> 时间：2013-03-12T02:55:43.270
> 
> 标签：c#, mysql, .net

我与数据库的连接无法正常工作。它尝试加载很长时间然后说连接失败。我要做的就是访问数据库并打印出一个名字。我对此很陌生，但这是我到目前为止所拥有的：

```
 string connectionstring = "uid=user;server=it.et.byu.edu;port=xxxxx;database=database;password=password;";
    MySqlConnection connection = new MySqlConnection(connectionstring);
    connection.Open(); 
    MySqlCommand cmd = new MySqlCommand("SELECT username FROM Users WHERE username='george'", connection);
    try
    {
        MySqlDataReader rdr = cmd.ExecuteReader();

        while (rdr.Read())
        {
            Console.WriteLine(rdr.GetString(0));
        }
        rdr.Close();
    }

       connection.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:04:04.730

如果您使用 XAMPP 或其他使用您的凭据（uid、密码）的 Mysql 工具，请检查您的连接字符串并确保您可以连接/操作您的 MYSQL 数据库。

对于介绍，这可能会对您有所帮助：

[带有 MySQL 和 MSDE 的 ADO.NET](http://www.functionx.com/mysqlnet/csharp/Lesson01.htm)

[MySQL 的连接字符串](http://www.connectionstrings.com/mysql)

最好的祝福

# java - NPE 在行中调用 equals()

> ID：15352500
> 
> 赞同：0
> 
> 时间：2013-03-12T02:55:44.177
> 
> 标签：java, class, methods, equals

对不起，如果这一切似乎很难理解，但我是编程新手，我看过几本书和网站，根据我的理解，我想做的应该是可行的。我正在做的任务是类调用类。在不将我所有的代码放在这里的情况下，我将尝试在不清楚的区域尽可能具体。空指针异常适用于以下特定代码行：

```
 if(CDList[i].getArtist().equals(artist) == true) 
```

//CDList 是一个 CD 对象数组（在另一个类中创建）

//getArtist() 是 CD 类的一个方法，它返回一个字符串

//equals()中的艺术家是用户输入的Scanner对象，也是一个String

这个特定方法的重点是搜索数组 CDList 并将存储的艺术家字符串与扫描的艺术家字符串进行比较，然后对标题进行比较。如果找到，则将删除该数组部分的内容。如果有帮助，这是该方法的其余部分：

```
void delete()
{
   Scanner input = new Scanner(System.in);
   System.out.println("Enter artist and title to be deleted: ");
   String artist = input.nextLine();
   String title = input.nextLine();

for(int i = 0; i <= numOfCDs; i++)
{
   if(CDList[i].getArtist().equals(artist) == true)
   {
      for(int j = 0; j <= numOfCDs; j++)
      {
         if(CDList[j].getTitle().equals(title) == true)
         {
            System.out.println("Found CD: " + CDList[j].getArtist() + " " +                 
               CDList[j].getTitle());
            System.out.println("Would you like to delete it? Y/1 N/0 ");

        if(input.nextInt() == 1)
            {
               CDList[j] = null;
               numOfCDs--;
            }
         }
         else
            System.out.println("CD not found.");
      }
    }
    else
       System.out.println("CD not found.");
 }
} 
```

对不起，这是其余的代码。只是觉得它太多了，我会忽略它。

光盘类：

```
package assignment3;
public class CD 
{
    public String artist;
    public String title;
    private tracklist listOfTracks = new tracklist();

CD(String artistName, String titleName)
{
    artist = artistName;
    title = titleName;
}

public String getArtist()
{
    return artist;
}

public String getTitle()
{
     return title;
}

public boolean addTrack(String trackInfo)
{
     boolean result = false;
     if(listOfTracks.add(trackInfo) == true)
         result = true;
     return result;
}

public int numTracks()
{
    int count = listOfTracks.count();
    return count;
}

public void display()
{
    System.out.println(" ");
    System.out.println(getArtist() + " : " + getTitle());
    listOfTracks.display(7);
}
} 
```

轨道列表类：

```
package assignment3;
public class tracklist 
{
    public String[] tracks;
    public int numElements;

    tracklist()
    {
        tracks = new String[99];
        numElements = 0;
    }

    public boolean add(String track)
    {
        boolean result = true;
        int index = 0;

        while(tracks[index] != null)
        {
           index++;
        }    

        tracks[index] = track;
        numElements++;
        if(numElements > 99)
            result = false;
        return result;
    }

    public int count()
    {
        return numElements;
    }

    public void display(int indent)
    {
        for(int i = 1; i < numElements; i++)
        {
            System.out.print(i);
            if(i >= 10)
            {
                 for(int j = 0; j < (indent - 1); j++)
                 {
                     System.out.print(" ");
                 }
            } 
            else
            {
                 for(int j = 0; j < indent; j++)
                 {
                     System.out.print(" ");
                 }
            }
            System.out.println(tracks[i]);
         }
    }    
   } 
```

CDList 类：

```
package assignment3;
import java.util.Scanner;
public class CDList 
{
   public int numOfCDs;
   private CD[] CDList;
   private int front,rear;

   CDList(int size)
   {
       CDList = new CD[size];
       numOfCDs = 0;
       front = 0;
       rear = size - 1;
   } 

   boolean add()
   {
       boolean result;
       Scanner input = new Scanner(System.in);
       System.out.println("Enter the Artist Name and CD Title: ");
       CD userCD = new CD(input.nextLine(), input.nextLine());
       System.out.println("Enter the number of tracks: ");
       int trackNumber = input.nextInt();
       System.out.println("Enter your track titles: ");

       for(int i = 0; i <= trackNumber; i++)
       {
           userCD.addTrack(input.nextLine());
       }

       if(rear == front)
           result = false;
       else
       {
           if(CDList[rear] != null)
           rear--;
           else
               CDList[rear] = userCD;
           result = true;
       }
       return result;
   }

   void delete()
   {
       Scanner input = new Scanner(System.in);
       System.out.println("Enter artist and title to be deleted: ");
       String artist = input.nextLine();
       String title = input.nextLine();

       for(int i = 0; i <= CDList.length - 1; i++)
       {
           if((CDList[i].getArtist().equals(artist)) &&    
             (CDList[i].getTitle().equals(title)))
           {
               System.out.println("Found CD of: " + CDList[i].getArtist() + " " +                 
                 CDList[i].getTitle());
               System.out.println("Would you like to delete it? Y/1 N/0 ");
               if(input.nextInt() == 1)
               {
                   CDList[i] = null;
                   numOfCDs--;
               }
           }
           else
               System.out.println("CD not found.");
       }
   }

   void SortArtist()
   {
       CD temp = new CD(" ", " ");
       for(int i = 0; i < numOfCDs; i++)
           if(CDList[i].getArtist().compareTo(CDList[i + 1].getArtist()) < 0)
           {
               temp = CDList[i];
               CDList[i] = CDList[i + 1];
               CDList[i + 1] = temp;
           }
   }

   void SortTitle()
   {
       CD temp = new CD(" ", " ");
       for(int i = numOfCDs; i > 0; i--)
       {
           int x = 0;
           for(int j = 1; j <= i; j++)
           {
               if(CDList[i].getTitle().compareTo(CDList[i + 1].getTitle()) < 0)
                   x = j;
           }
           temp = CDList[x];
           CDList[x] = CDList[i];
           CDList[i] = temp;
       }
   }

   void Display()
   {
      for(int i = 0; i <= numOfCDs; i++)
      {
          while(CDList[i] == null)
              i++;
          CDList[i].display();
      }
   }

   int size()
   {
       return numOfCDs;
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T03:01:30.610

```
if(CDList[i].getArtist().equals(artist) == true) 
```

如果您获得 NPE，以下是可能性：

1.  `CDList`一片空白
2.  `CDList[i]`一片空白
3.  `CDLIst[i].getArtist()`返回空
4.  类`Artist`覆盖`equals()`并具有导致 NPE 的错误，但在这种情况下，NPE 将指向`equals()`.

您没有显示该类`Artist`，因此我们可以查看它是否会覆盖`equals()`，并且还没有发布堆栈跟踪，因此我们可以确切地看到抛出异常的位置。

正如其他人评论的那样，这`== true`是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:38:45.107

这里有很多问题。

您的 NPE 的直接原因是内部循环通过将 CD 分配给 来从列表中“删除”CD `null`，然后外部循环尝试在您刚刚删除的位置测试 CD。既然是`null`，那么您将尝试调用`null.getArtist()`哪些 NPE。

首先要注意的是，您只需要一个循环。循环体应该测试您正在查看的 CD 是否具有相同的标题和艺术家...

接下来要注意的是，摆脱额外的循环是不够的。如果`delete()`多次调用该方法，则第二次调用可能会遇到`null`第一次调用产生的条目......并且您将像以前一样获得 NPE。`null`测试应在尝试获取标题/艺术家信息之前检查 a ；例如

```
CD cd = cdList[i];
if (cd != null && 
    cd.getArtist().equals(artist) &&
    cd.getTitle().equals(title)) {
    // ...
} 
```

在这一点上，一个设计问题变得明显。`null`数组中的这些值是个**坏主意**。有三个修复：

*   您可以通过创建一个小一个元素的新数组来删除 CD... 并复制到所有 CD 上，除了您要删除的那张。

*   您可以添加一个`cdListSize`字段，并安排它为您提供列表中有效条目的数量。然后（这是重要的一点），当您从列表中删除一个条目时，将当前最后一个条目移动到已删除条目所在的位置并减少`cdListSize`. 如果您始终如一地这样做，`null`条目将全部位于末尾，您可以从零迭代`cdListSize - 1`以获取非空条目。

*   最重要的是，使用 a`List`而不是数组来表示 CD 列表。API 提供了一种在给定位置删除条目的`List`方法。该方法*确实*将其删除...它不只是将其设置为`null`.

最后，您可能需要退后一步，看看更大的应用程序。是否应该保留 CD 列表？例如，当您的应用程序重新启动时它仍然可用？它可能很大吗？例如太大而无法放入内存？您可能想要对 CD 列表进行复杂的查询吗？所有这些都表明您应该使用数据库而不是内存数据结构。

（但是，对于您刚刚添加的额外代码，很明显这超出了您的分配范围。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:01:46.083

我建议使用`LinkedList<CD>`or`ArrayList<CD>`代替`CD[]`.

这将允许您轻松删除项目，如下所示：

```
LinkedList<CD> cdList = new LinkedList<CD>();
// add items with cdList.add(...);
Iterator<CD> cdListIterator = cdList.iterator();

// Loop while the list still contains elements.
while (cdListIterator.hasNext()) {
    CD thisCd = iterator.next();
    // do some operation on the cd to tell whether you want to delete it
    // for example:
    if (thisCd.getArtist().equals(artist) && thisCd.getTitle().equals(title)) {
        iterator.remove(); // it's that simple
        // Don't have to mess with `cdCount--` or anything.
    }
} 
```

而且，正如一些人所评论的，您不需要`a.equals(b) == true`; 你可以使用`a.equals(b)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T03:05:16.803

if 条件没有任何问题。它是你的循环有问题。使用单个 for 循环：

```
for(int i = 0; i <= numOfCDs; i++)
{
   if(CDList[i].getArtist().equals(artist) && CDList[i].getTitle().equals(title))
   {
       System.out.println("Found CD: " + CDList[j].getArtist() + " " + CDList[j].getTitle());
       System.out.println("Would you like to delete it? Y/1 N/0 ");
       if(input.nextInt() == 1)
            {
               CDList[i] = null;
               // do not do numOfCDs-- here
            }
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T14:48:56.073

找到了！谢谢你们的评论，我确实做了一些你们会推荐的改变。问题在于 CDList[i] 为空。刚刚实现了一个 if(CDList[i] == null) 然后继续；谢谢你的意见。——</p>

# facebook - Facebook FQL 遇到问题 - 空退货

> ID：15352501
> 
> 赞同：2
> 
> 时间：2013-03-12T02:56:09.993
> 
> 标签：facebook, perl, facebook-fql, facebook-opengraph

我正在尝试制作一个 Facebook 应用程序，该应用程序将从我管理的页面中查询洞察指标。我不确定是否有更好的方法，但我在尝试构建我的查询后遇到了问题。

例如，[此处](https://developers.facebook.com/docs/reference/fql/insights)列出的许多“指标”字段返回空数据对象。在 Graph API Explorer 上测试以下 FQL 查询是一个示例（替换为您的页面 ID）：

```
fql?q=SELECT metric, value FROM insights WHERE object_id=<USER_ID> AND metric='post_storytellers' AND period=0 
```

我已授予自己“read_insights”权限。

我想知道这是否是一个常见问题，如果我做错了，是否有更好的方法（即 FQL 有问题，坚持使用 Graph API）。我使用 Perl 开始了这个项目，打算简单地将返回数据解析到数据库中。也许我会更好地用 PHP 编写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:49:10.960

post_storytellers 指标只有 3 个可用时段：day、week 和 days_28。当您输入 period=0 时，您要求的是生命周期。您的查询应该是这样的：

```
SELECT metric, value FROM insights WHERE object_id=<PAGE_ID> AND metric='page_storytellers' AND end_time=1334905200 AND period=period('week') 
```

我希望它会有所帮助！

# php - PHP：在 2 个巨大的数组中获取公共值

> ID：15352507
> 
> 赞同：1
> 
> 时间：2013-03-12T02:56:37.653
> 
> 标签：php, array-intersect

我有 2 个数组，分别是 Array **A**和**B。**数组**A**包含约 300,000 条字符串记录，例如

```
[0] => 'apple',
[1] => 'pineapple',
[2] => 'orange',
...
[299,999] => 'banana' 
```

而数组 B 包含 100,000 个字符串值，例如

```
[0] => 'bamboo',
[1] => 'banana',
[2] => 'boy',
[3] => 'ball',
[4] => 'balloon',
[5] => 'bazooka', 
```

问题是，如何找出两个数组之间的共同值？

[array_intersect()](http://php.net/manual/en/function.array-intersect.php)似乎是一个很有前途的功能，但我担心性能。将 2 个数组转换为文本文件并进行基于文件的比较会更好吗？还是我太担心了？

使用代码`array_intersect()`：

```
$result_array = array_intersect($arrayA, $arrayB); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:13:10.197

结果基于我自己的测试，`array_intersect()`是选择。它可以在不到 1 秒的时间内产生结果，因为它的效率是`O(n·log n)`.

参考：[https ://stackoverflow.com/a/6329494/188331](https://stackoverflow.com/a/6329494/188331)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T03:02:52.213

array_intersect 函数将用于跨数组检索公共值

但是由于数组大小很大，您需要在脚本中指定配置以执行考虑性能

```
 set_time_limit(0);
    ini_set('memory_limit','128M'); 
```

上面的代码片段将分别设置执行时间限制为无穷大，增加内存限制将分配更多内存来保存大型数组

# python - 将列表字符串转换为 int 列表

> ID：15352509
> 
> 赞同：1
> 
> 时间：2013-03-12T02:56:43.130
> 
> 标签：python, list

如何将一串整数列表转换为整数列表？

示例输入：（类型：字符串）

```
"[156, 100, 713]" 
```

转换示例：（类型：int 列表）

```
[156, 100, 713] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:59:22.390

试试这个：

```
import ast
res = ast.literal_eval('[156, 100, 713]') 
```

[在 python 文档中阅读有关 ast.literal_eval 的更多信息。](http://docs.python.org/2/library/ast.html#module-ast)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T02:59:24.797

使用`ast.literal_eval`它，你就完成了。在这里你没有常规的所有安全问题，`eval`你不需要担心确保你的字符串格式正确等。当然，如果你真的想自己解析这个东西，你可以用非常简单的列表理解：

```
s = "[156, 100, 713]"
print [ int(x) for x in s.translate(None,'[]').split(',') ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T03:25:42.930

```
>>> import json
>>> a = "[156, 100, 713]"
>>> json.loads(a)
[156, 100, 713] 
```

# eclipse - 无法在 Tomcat 和 Workspace 中找到或加载主类

> ID：15352511
> 
> 赞同：1
> 
> 时间：2013-03-12T02:57:02.833
> 
> 标签：eclipse, tomcat, struts, metadata

我的任务是在我不久前从事的一个项目中添加一些新功能。自从我上次开发以来，它被赋予了一些新功能，并且开发环境也发生了变化。我在使我的环境与所有依赖项和外部文件夹保持同步时遇到了很多麻烦。

在解决了许多问题之后，在**Eclipse中运行****Tomcat 7 服务器**时，我遇到了一条消息：

 **```
Error: Could not find or load main class Path\To\Workspace\.metadata\plugins\cont 
```

我尝试删除**Tomcat 服务器**，然后使用相同的设置重新创建它，以及`.metadata`从工作区中删除我的文件夹。现在我什至无法让 Tomcat 正确配置：

```
Error: Could not find or load main class Files\ApacheSoftwareFoundation\apache-tomcat-7.0.26. 
```

为什么这不起作用？在我添加了几个需要的子目录之前它工作了，但我现在很难过。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T23:34:09.807

只是在 Eclipse 中搜索相同的问题（“找不到或加载主类”）。

在我的情况下，启动配置参数选项卡中有一个额外的空间。（在 Java EE 透视图中，转到服务器，单击 Tomcat 服务器，在概览窗口中选择“打开启动配置”，然后转到参数选项卡）。参数被列为

```
-Dx.y.z=1 -Da.b.c=2 ... 
```

依此类推，但是由于对话框本身很小并且参数跨越多行，因此并不总是清楚哪里有空格和哪里有新行。就我而言，它是

```
-Dx.y.z =1 -Da.b.c=2 ... 
```

（=1 之前有一个空格）这使 Tomcat 感到困惑，我得到“找不到或加载主类”错误。

不一定是您的情况，但其他人可能会遇到此问题并找到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:53:30.730

在 .metadata 文件夹中，eclipse 保存了它的内部配置，所以你不应该手动影响它。这些错误为您提供了获取它正在寻找的资源的线索，无论它是否存在，都无法访问。尝试手动查找它以检查它是否存在，然后尝试使其可访问，修复路径，更改权限等。可能是你有类路径问题，谁知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-10T03:56:53.983

在 Eclipse 中，我添加了一个 Tomcat 服务器，它运行良好。我停止了服务器以更改设置。具体来说，我选中了“启用安全性”框。当我尝试启动时，我得到了这个错误。所以我取消选中该框并尝试重新启动服务器 - 同样的错误。该线程引导我检查启动配置 VM 参数。果然，Eclipse 没有正确处理复选框（并取消选中它）。VM 参数有两个地方重复不带引号的字符串。检查那里，看看它是否格式错误。**

# jquery - 在 div 外部单击时折叠 jquery 选项卡

> ID：15352515
> 
> 赞同：2
> 
> 时间：2013-03-12T02:57:43.250
> 
> 标签：jquery, tabs

我有一组 jQuery 选项卡，默认情况下我将它们折叠起来。我想做的是让它们在单击 div 外部时折叠。到目前为止，这是我的代码：

```
 <div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
  </ul>
  <div id="tabs-1">
    <p><strong>Click this tab again to close the content pane.</strong></p>
    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
  </div>
  <div id="tabs-2">
    <p><strong>Click this tab again to close the content pane.</strong></p>
    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellenter code hereentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
  </div>
  <div id="tabs-3">
    <p><strong>Click this tab again to close the content pane.</strong></p>
    <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
  </div>
</div> 
```

这是我的jQuery：

```
$(function() {
$( "#tabs" ).tabs({
        selected: -1,
        collapsible: true,
});
}) 
```

我是一个 jQuery 菜鸟，所以我相信这会有点简单。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:11:13.820

试试这个

```
$(function() {
    $( "#tabs" ).tabs({
            selected: -1,
            collapsible: true,
    });
});

$('body').on('click', function(e){
    var target = $(e.target);
    if(!target.parents('#tabs').length){
        $( "#tabs" ).tabs('option', 'selected', -1);
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qB32x/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T03:09:33.450

您可以通过绑定到`document`的`click`事件并通过模拟单击活动选项卡来折叠活动选项卡来做到这一点。

```
$(document).click(function(e) {
    // make sure the click is outside the tabs
    if($(e.target).parents('#tabs').length == 0) {
        $('#tabs ul li.ui-state-active a').trigger('click');
    }
}); 
```

检查这个演示：http: [//jsfiddle.net/SdfkD/](http://jsfiddle.net/SdfkD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:03:28.773

试试这个`jQuery UI`而不是创建自定义 Accordian ：

[http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T03:38:11.460

它并不像你想象的那么简单。在 jQuery 中，您检测 DOM 的单个元素的点击，因此要确定是否有人在给定区域*之外*点击，您必须将点击事件绑定到整个主体，然后单独处理单独的可点击区域。

（将单击绑定到整个主体可能不是最好的主意，因此您可能需要重新设计选项卡的功能。当用户单击其外部的任何位置时，选项卡是否真的需要折叠？或者只是单击在同一标题上折叠选项卡工作？如果是这样，请使用@Dead Man 对 jQuery 手风琴的建议。）假设您确实需要以您描述的方式实现选项卡，您可以尝试以下操作：

使用 HTML 的修改版本：

```
<div id="tabs" >
  <div class"expander">Click to expand Tab1</div>
  <div class="tab-text">Here is the text that appears when Tab1 is expanded</div>
  <div class"expander">Click to expand Tab2</div>
  <div class="tab-text">Here is the text that appears when the Tab2 is expanded</div>
</div> 
```

你需要一些像这样的jQuery：

```
$( 'body' ).click( function( e ) {
  var $target = e.target;
  if( $target.is( '#tabs > .expander' ) ) {
    // We show a given tab when the user clicks on the heading to reveal it.
    $target.next().show();

    // You'll also need to decide what to do with the .expander itself.  
    // (You could change its text using .text( 'Click to hide' ) or you 
    // could just hide it until the user clicks outside all the tabs.

  } else if ( !( $target.is( '#tabs' ) || $target.is( '#tabs > div' ) ) ) {
    // If the user clicks outside of all the tabs, we hide them.
    $( '#tabs > .tab-text' ).hide();
  }

  // Add all other click event handlers for the page here.  
  if( $target.is( ...... ) ) {

  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-02T05:05:35.017

您可以创建自己的自定义手风琴：

```
 $('.accordionOm').next().hide();
	$(".opened").next().show();
	$('.accordionOm').click(function()
	{
		if($(this).hasClass("opened") == true)
		{
			$(this).next().slideUp("slow");
			$(this).removeClass('opened');
		}
		else
		{
			$(".opened").next().slideUp("slow");
			$(".opened").removeClass("opened");
			$(this).addClass('opened');
			$(this).next().slideDown("slow");
		}
	});
```

```
.accordionOm { position:relative; padding:10px 0 10px 30px; margin:0; font:300 18px 'Oswald', Arial, Helvetica, sans-serif; cursor:pointer;}
.accordionOm:hover { color:#000;}
.accordionOm:before,.accordionOm:after { content:""; position:absolute; background:#333; display:inline-block;}
.accordionOm:before { width:20px; height:2px; left:0; top:22px;}
.accordionOm:after { width:2px; height:20px; left:9px; top:13px; transition:transform .5s; transform:rotate(0);}
.accordionOm.opened:after { transform:rotate(90deg);}
.accordionOm + div { border-left:4px solid #999; padding:0 15px; margin-left:8px; font:13px 'Open Sans', Arial, Helvetica, sans-serif; color:#666;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<h4 class="accordionOm opened">Accordian heading</h4>
<div>
	<p>Lorem ipsum dolor sit amet, adipiscing elit. Nullam dignissim convallis est. Quisque aliquam. Donec faucibus. Nunc iaculis suscipit dui. Nam sit amet sem. Aliquam libero nisi, imperdiet at, tincidunt nec, gravida vehicula, nisl. Praesent mattis, massa quis luctus fermentum, turpis mi volutpat justo, eu volutpat enim diam eget metus.</p>
</div>

<h4 class="accordionOm">Accordian heading</h4>
<div>
	<p>Lorem ipsum dolor sit amet, adipiscing elit. Nullam dignissim convallis est. Quisque aliquam. Donec faucibus. Nunc iaculis suscipit dui. Nam sit amet sem. Aliquam libero nisi, imperdiet at, tincidunt nec, gravida vehicula, nisl. Praesent mattis, massa quis luctus fermentum, turpis mi volutpat justo, eu volutpat enim diam eget metus.</p>
</div>

<h4 class="accordionOm">Accordian heading</h4>
<div>
	<p>Lorem ipsum dolor sit amet, adipiscing elit. Nullam dignissim convallis est. Quisque aliquam. Donec faucibus. Nunc iaculis suscipit dui. Nam sit amet sem. Aliquam libero nisi, imperdiet at, tincidunt nec, gravida vehicula, nisl. Praesent mattis, massa quis luctus fermentum, turpis mi volutpat justo, eu volutpat enim diam eget metus.</p>
</div>

<h4 class="accordionOm">Accordian heading</h4>
<div>
	<p>Lorem ipsum dolor sit amet, adipiscing elit. Nullam dignissim convallis est. Quisque aliquam. Donec faucibus. Nunc iaculis suscipit dui. Nam sit amet sem. Aliquam libero nisi, imperdiet at, tincidunt nec, gravida vehicula, nisl. Praesent mattis, massa quis luctus fermentum, turpis mi volutpat justo, eu volutpat enim diam eget metus.</p>
</div>
```

# amazon-s3 - s3的getBucket api是如何实现的？

> ID：15352520
> 
> 赞同：1
> 
> 时间：2013-03-12T02:58:02.820
> 
> 标签：amazon-s3

您可以在 Amazon s3 存储桶中拥有无限的对象，并使用[getBucket API 调用](https://docs.aws.amazon.com/AmazonS3/latest/dev/ListingKeysHierarchy.html?r=6295)列出您的对象。有趣的是，您可以使用任何字符作为分隔符（如 Linux 文件系统中的“/”）。面对大量对象，S3 API 如何实时响应？你不能指望全面扫描，对吧？s3存储架构背后的技术是什么？

这是我到目前为止的一些搜索工作结果。有谁知道更详细的吗？

1.  [s3架构](https://stackoverflow.com/questions/564223/amazon-s3-architecture/727976)
2.  [亚马逊架构](https://stackoverflow.com/questions/415360/what-types-of-technologies-does-amazon-com-use-internally/415365)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:37:35.683

我添加作为答案是因为评论部分没有足够的空间：

有几个设计决策可以避免使用完整扫描，例如索引或简单的前缀树。

尽管一些 S3 客户端应用程序会将前缀列为文件夹，但 S3 中没有这样的概念。在一个存储桶中，所有文件都分层地处于同一级别。文件的组织方式是键/值方式，而不是树方式（就像人们期望在类似“文件夹”的系统中所期望的那样）。请参阅[此相关问题](https://stackoverflow.com/questions/9329234/amazon-aws-ios-sdk-how-to-list-all-file-names-in-a-folder/9330600#9330600)以获取更多信息。因此，如果您想列出您的“文件夹”，是的，您可能需要列出您的前缀，即根据前缀获取对象并跳过具有附加信息的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T09:01:06.327

您可以避免使用存储桶名称上的索引进行完整搜索。我在 MySQL 中做了一个关于这个的实验。MySQL 只真正支持此应用程序的 B-Trees，这不是一个完美的解决方案，但应该会显着加快速度。我创建了下表并用我系统上 /usr/ 下的所有文件（446594 个文件）填充它：

```
CREATE TABLE `files` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `filename` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `dirname` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `filename` (`filename`)
) ENGINE=InnoDB AUTO_INCREMENT=446722 DEFAULT CHARSET=utf8 \ 
COLLATE=utf8_unicode_ci; 
```

结果意义重大。

```
mysql> select count(*) from files where filename like "/usr/lib/%" \ 
and filename regexp "^/usr/lib/[^/]*";
+----------+
| count(*) |
+----------+
|    68678 |
+----------+
1 row in set (0.21 sec)

mysql> select count(*) from files where filename regexp "^/usr/lib/[^/]*";
+----------+
| count(*) |
+----------+
|    68678 |
+----------+
1 row in set (3.06 sec) 
```

# html - 没有css的文本在顶部或底部对齐

> ID：15352521
> 
> 赞同：-3
> 
> 时间：2013-03-12T02:58:05.797
> 
> 标签：html, button, ckeditor

是否可以在不使用 css 或填充的情况下将按钮的文本 (html) 与顶部/底部对齐？我正在 ckeditor 中制作一个自定义插件，我希望用户能够对齐对话中的文本。这是我想避免使用 CSS 的主要原因。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T06:16:17.403

我在您的小提琴中进行了以下更改，并且文本与中心对齐

```
<button bean="a" property="a" style="width: 100px; height: 100px; padding-top: 8px; tabindex: ">1234567890<br /> 
```

1234567890

# android - 如何将选定的搜索建议数据发送到自定义活动

> ID：15352522
> 
> 赞同：1
> 
> 时间：2013-03-12T02:58:10.260
> 
> 标签：android, search, android-actionbar, autosuggest

我已经能够成功实现搜索小部件体验，以使用返回带有行数据的游标的内容提供程序。自定义搜索建议按预期很好地显示在 ActionBar 搜索框下的列表中。

我需要做的是将选定的搜索建议发送到自定义活动（大概在捆绑中？）它看起来很简单，但我无法弄清楚。

目前，此代码将询问我想使用什么应用程序来打开意图。我想将选定的建议数据发送到下面列出的清单中的“MainActivity”。

提前致谢！

**可搜索的.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/search_hint"
    android:searchSuggestAuthority="com.myapp.SearchProvider"
    android:searchSuggestIntentAction="android.intent.action.VIEW"
    android:searchSuggestThreshold="2"
    android:searchMode="queryRewriteFromText" >

</searchable> 
```

搜索活动

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        Intent intent = getIntent();
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
            // Handle the normal search query case
            android.util.Log.w("****", "in ACTION_SEARCH");
            String query = intent.getStringExtra(SearchManager.QUERY);
            doSearch(query);
        } else if (Intent.ACTION_VIEW.equals(intent.getAction())) {
            // Handle a suggestions click (because the suggestions all use ACTION_VIEW)
            android.util.Log.w("****", "in ACTION_VIEW");
            doView(intent);
        }
    }

    private void doSearch(String query) {

        android.util.Log.w("search query:", query);

    }

    private void doView(final Intent queryIntent) {
        Uri uri = queryIntent.getData();
        String action = queryIntent.getAction();
        Intent i = new Intent(action);
        i.setData(uri);
        startActivity(i);
        this.finish();
    }
} 
```

清单的搜索部分：

```
 <activity
        android:name="com.myapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

        <activity android:name="com.myapp.SearchableActivity" >
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>
            <meta-data android:name="android.app.searchable"
                       android:resource="@xml/searchable"/>
        </activity>

        <provider android:authorities="com.myapp.SearchProvider" 
            android:name="com.myapp.SearchProvider" />

         <meta-data android:name="android.app.default_searchable" 
             android:value="com.myapp.SearchableActivity" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:02:08.447

呸，我想通了。

在我的内容提供程序中，我必须在 Matrix 光标中添加一个名为：的列，`SearchManager.SUGGEST_COLUMN_INTENT_EXTRA_DATA` 并输入建议的值。

在我的搜索活动 doView() 方法中，我可以使用以下方法提取它：

```
Bundle extras = queryIntent.getExtras();
String data = extras.getString(SearchManager.EXTRA_DATA_KEY);
android.util.Log.w("keySet =", extras.keySet().toString()); // this showed me the keys available
android.util.Log.w(SearchManager.EXTRA_DATA_KEY, data); 
```

从这里，我可以将其传递给我的自定义活动/意图。可能有更好的方法，但这有效！

# spring-data-neo4j - 不给定时获取用户节点时出错。使用带有 neo4j 查询的 spring 作为输入的跳数

> ID：15352524
> 
> 赞同：0
> 
> 时间：2013-03-12T02:58:21.210
> 
> 标签：spring-data-neo4j

我正在使用带有 neo4j 的 spring 执行查询。

```
@Query(value = "START me=node({0}) MATCH me-[:ACTIVEFRIEND*1..{1}]->friend RETURN friend")
public Iterable<User> searchUserInNHops(User a, int hops); 
```

其中搜索应该去的深度阈值作为输入跳数给出。

它不工作并给出错误。服务器遇到内部错误，阻止它完成此请求请求处理失败；嵌套异常是 org.neo4j.rest.graphdb.RestResultException：MATCH 中不允许模式元素的属性

Neo4j 版本：1.9.0

如果有人可以帮助我，我将不胜感激。

谢谢赫曼特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:57:40.777

您不能将深度指定为参数。如果您希望这是动态的，您可能需要考虑其他方法。他们之中有一些是：

*   让您的存储库类从 CypherDslRepository 扩展。使用应该使用 neo4j-cypher-dsl 模块来构建查询对象。
*   使用 Neo4jTemplate 类。您可以向查询方法提供组合查询字符串。
*   使用 Neo4j 核心的遍历 API，比如

遍历：

```
 for (final Path position : Traversal.description().depthFirst()                    .relationships(RelationType.ACTIVE_FRIEND, Direction.OUTGOING),
       Direction.INCOMING).evaluator(Evaluators.fromDepth(1))
       .evaluator(Evaluators.toDepth(yourDynamicValue))
       .evaluator(Evaluators.excludeStartPosition()).traverse(node)) {
       position.endNode();
} 
```

# c# - 无法加载文件或程序集“SharpSvn”或其依赖项之一。试图加载格式不正确的程序

> ID：15352528
> 
> 赞同：9
> 
> 时间：2013-03-12T02:58:53.537
> 
> 标签：c#, asp.net-mvc-3, svn, sharpsvn

我刚刚下载了 SharpSVN 的 64 位版本，这[是链接](http://sharpsvn.open.collab.net/files/documents/180/5570/SSvn-1.7002.1998-x64.zip)！

当我运行我的应用程序时，显示错误消息。我已经在网上搜索了如何解决这个问题，但我失败了。我尝试了以下解决方案：

1.  [按照这篇文章](https://stackoverflow.com/a/2999157/1378857)的建议将配置管理器设置为 x64
2.  [在此响应](https://stackoverflow.com/a/3479411/1378857)上设置启动配置
3.  还尝试下载 x86 并将配置管理器设置为 x86。
4.  也试过这个，添加组装[链接](https://stackoverflow.com/questions/7474236/sharpsvn-error-in-vs2010)

我正在使用 Win7、64 位、.net 4.0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T08:17:15.097

解决这个问题。

1.  将我的平台更改为 x86
2.  “bin\”的输出路径
3.  下载了 SharpSVN 的 x86 (1.7008.2243.14245)
4.  在 GAC 中添加 SharpSVN.dll。
5.  删除bin文件夹并重建解决方案

这是解释的[链接](http://sharpsvn.open.collab.net/ds/viewMessage.do?dsForumId=728&dsMessageId=484817)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-13T14:39:50.450

如果您在尝试访问 IIS 中托管的网站时遇到此错误，您可能需要调整应用程序池中的“启用 32 位应用程序”设置。看到这个答案：[https ://stackoverflow.com/a/20525314/12484](https://stackoverflow.com/a/20525314/12484)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-31T10:22:30.200

这也可能归结为 Microsoft Visual C++ Redistributable Package 的版本不匹配，具体取决于 SharpSvn 的版本和 Windows/Visual Studio 的版本。

较新版本的 SharpSvn 依赖于“Microsoft Visual C++ 2010 SP1 Redistributable Package”。

x64 - [https://www.microsoft.com/en-us/download/details.aspx?id=13523](https://www.microsoft.com/en-us/download/details.aspx?id=13523)

x86 - [https://www.microsoft.com/en-us/download/details.aspx?id=8328](https://www.microsoft.com/en-us/download/details.aspx?id=8328)

# r - 如何获取列表中不同长度的项目的频率

> ID：15352531
> 
> 赞同：4
> 
> 时间：2013-03-12T02:58:56.783
> 
> 标签：r, list

假设我有以下列表：

```
test<-list(c("a","b","c"),c("a"),c("c"))
>test
[[1]]
[1] "a" "b" "c"

[[2]]
[1] "a"

[[3]]
[1] "c" 
```

我该怎么做（或使用函数）来获取列表中唯一项目的频率，如下所示：？

```
a 2
b 1
c 2 
```

我尝试使用表（测试），但出现以下错误

```
> table(test)
Error in table(test) : all arguments must have the same length 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T03:02:52.650

```
test <- list(c("a", "b", "c"), c("a"), c("c"))
# If you want count accross all elements
table(unlist(test))
## 
## a b c 
## 2 1 2 

# If you want seperate counts in each item of list
lapply(test, table)
## [[1]]
## 
## a b c 
## 1 1 1 
## 
## [[2]]
## 
## a 
## 1 
## 
## [[3]]
## 
## c 
## 1 
## 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T03:01:40.940

`unlist`先用

```
table(unlist(test)) 
```

# smtp - 来自 dotcloud 邮件的 smtp 错误

> ID：15352536
> 
> 赞同：0
> 
> 时间：2013-03-12T02:59:25.840
> 
> 标签：smtp, postfix-mta, dotcloud

我正在尝试通过 django 通过 dotcloud mailer 服务发送邮件。我从我的 smtp 主机收到此错误：

`Helo command rejected: need fully-qualified hostname (in reply to RCPT TO command`

我相信这是因为我的服务器上的主机名不完全合格。这是可以更改的还是我需要更改 smtp 主机？

我目前在沙盒服务器上。一旦我使用真实域运行，这是否会改变 dotcloud 端的主机名设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:37:21.800

**helo**命令后面需要跟你的域名。

**例如：**

> helo yahoo.com

# c# - 如何为不在更新方法中的游戏手柄按钮按下创建事件处理程序

> ID：15352541
> 
> 赞同：1
> 
> 时间：2013-03-12T03:00:06.260
> 
> 标签：c#, event-handling, xna, gamepad

我正在尝试使用 Microsoft Visual c# 将事件处理程序添加到 XNA 游戏手柄的按钮按下。我已经尝试在更新方法中对要按下的按钮状态进行测试，但由于更新方法每秒调用 60 次，它会检查按钮是否按下并注册了很多次。有没有办法让事件监听器按下按钮并调用事件一次而不是多次？这是我在更新方法中不起作用的代码：

```
 protected override void Update(GameTime gameTime)
    {
          if(GamePad.GetState(PlayerIndex.One).Buttons.Y == ButtonState.Pressed)
    {
              //do some code
          }
    } 
```

这不符合我的需要，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:11:17.183

通常单按的逻辑是这样的：

```
if (button_is_pressed_now && button_was_not_pressed_last_frame)
{ /* there was a single press */ } 
```

这转化为您的情况：

```
if(currentGamepadState(PlayerIndex.One).Buttons.Y == ButtonState.Pressed &&
  previousGamepadState(PlayerIndex.One).Buttons.Y != ButtonState.Pressed)
{
          //do some code
} 
```

这意味着您需要跟踪以前的游戏手柄状态。微软的官方教程对此有更多说明：http: [//xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started](http://xbox.create.msdn.com/en-US/education/tutorial/2dgame/getting_started)

也就是说，您实际上并不需要事件处理程序。

# python - 在字典中查找 X 和 Y 的最大和最小坐标

> ID：15352542
> 
> 赞同：1
> 
> 时间：2013-03-12T03:00:06.483
> 
> 标签：python, dictionary, max, min

使用 {name: (x, y)} 形式的字典，我需要返回 x 和 y 坐标的最大值和最小值，因此总共有 4 个值。

我尝试使用的代码是我发现并尝试适应的类似问题的解决方案（它似乎适用于 X 值，但不适用于 Y）：

```
maxY = particleCoords[max(particleCoords.iteritems(), key=operator.itemgetter(0))[0]][1]
minY = particleCoords[min(particleCoords.iteritems(), key=operator.itemgetter(0))[0]][1] 
```

（字典的名称是particleCoords）

数字是浮点数，可以是负数。

我知道有很多类似的问题，但我确实发现的问题似乎是我无法适应的同一件事。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-11T20:39:40.943

这是另一个使用 zip 和列表理解的解决方案，只要您不需要将值映射到键。但是，我不确定它是否会比前面提到的方法更快或更慢。

```
(x_max, x_min),  (y_max, y_min) = [(max(x), min(x)) for x in zip(*my_dict.values())] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:04:49.177

在我看来像：

```
min_x = min(particleCoords.iteritems(),key = lambda item: item[1][0])
max_x = max(particleCoords.iteritems(),key = lambda item: item[1][0])

min_y = min(particleCoords.iteritems(),key = lambda item: item[1][1])
max_y = max(particleCoords.iteritems(),key = lambda item: item[1][1]) 
```

应该管用...

每个项目的比较基于每个项目的*值*( `item[1]`) 部分。然后取决于我们是否想要`x`或者我们比较*value*`y`中的第一个或第二个元素。

 *这将为您提供最小/最大的键值对，具体取决于特定的键功能。如果您不关心获取名称，则可以更干净地执行此操作：

```
min_x = min(particleCoords.itervalues(),key = itemgetter(0))
max_x = max(particleCoords.itervalues(),key = itemgetter(0))

min_y = min(particleCoords.itervalues(),key = itemgetter(1))
max_y = max(particleCoords.itervalues(),key = itemgetter(1)) 
```

同样`min_x`和`max_x`实际上是`(x,y)`分别持有最小值和最大值的对`x`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T03:10:04.570

这也可以：

```
>>> d = {'name1': (1, 6), 'name2': (7, 4), 'name3': (10, 1)}
>>> v = d.values()
>>> zipped = zip(*v)
>>> print min(zipped[0]), max(zipped[0]), min(zipped[1]), max(zipped[1])
1 10 1 6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T03:39:26.437

不确定我是否正确解释了您的问题，但如果您想从字典/元组关联数组中的所有元组中获取极值`{<key>: (x, y)}`，那么这可能会为您提供所需的东西：

```
my_dict = {
           "bananas": (3, 5),
           "apples": (2, 5),
           "oranges": (4, 7)
           }

x_min = None
x_max = None
y_min = None
y_max = None

for x in my_dict:
    try:
        if my_dict[x][0] < x_min: x_min = my_dict[x][0]
        elif my_dict[x][0] > x_min: x_max = my_dict[x][0]
        if my_dict[x][1] < y_min: y_min = my_dict[x][1]
        elif my_dict[x][1] > y_max: y_max = my_dict[x][1]
    except:
        x_min = my_dict[x][0]
        x_max = my_dict[x][0]
        y_min = my_dict[x][1]
        y_max = my_dict[x][1]

print("Extremes (min, max) for position (x, y) are: ((%s, %s), (%s, %s))" \
      % (x_min, x_max, y_min, y_max)) 
```

那是你所追求的吗？*

# algorithm - 算法运行时间

> ID：15352543
> 
> 赞同：0
> 
> 时间：2013-03-12T03:00:18.057
> 
> 标签：algorithm, big-o

嗨，这是一个来自考试复习的问题。我必须找到以下代码片段的运行时间（以 Big-O 为单位）。

```
sum = 0; 
for( i = 0; i < n; i++ ) 
 for( j = 0; j < i * i; j++ ) 
  for ( k = 0; k < j; k++ ) 
    ++sum; 
```

我认为它是O（n ^ 4）。最里面的循环执行到 n 次，第二个循环执行到 n^2，最外面的循环执行 n 次。谢谢大家的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:10:31.727

不，它不是 O(4)。

了解这一点的更好方法是计算循环执行的次数（事实上，这就是代码正在做的事情）。

总和（总和（总和（1，k=0..j），j=0..i*i），i=0..n）

= sum(sum(j,j=0..i*i),i=0..n) = sum(i*i*(i*i+1)/2,i=0..n) 这是在 sum(i^4, i=0..n) 的数量级上，它在 n^5 的数量级上。

本质上是因为中间循环是 i*i 并且正在为每个最里面的循环执行，因此需要计算额外的时间。

在 C++ 中

[http://codepad.org/nKJ9IUnt](http://codepad.org/nKJ9IUnt)

```
1 0
2 0
3 6
4 42
5 162
6 462
7 1092
8 2268
9 4284
10 7524
11 12474
12 19734
13 30030
14 44226
15 63336
16 88536
17 121176
18 162792
19 215118 
```

您可以使用此表并计算有限差分（取导数），直到结果为常数或 0。您会发现需要 5 个导数才能得到一个常数列表。这意味着它的列表是 n^5 的顺序。

例如，如果我们有一个列表，其中两个元素之间的每个差异都是一个常数，那么该列表可以用线性函数表示。如果差异的差异是恒定的，那么它将是二次方等（低阶项无关紧要，因为它们被导数/差异转换）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T12:30:54.427

形式上，使用 Sigma 表示法将有助于以非常精确的方式推断增长顺序。

![在此处输入图像描述](../Images/0935cf80ebde21961628ce91e50c6777.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T03:46:36.453

你可以简单的想：

```
In the first loop: i = n
second loop: j = i*i => j = n^2
third loop: k = j => k = n^2
So, the bigO = n * n^2 * n^2 = n^5 
```

# azure - 关闭 Windows Azure 中的特定实例

> ID：15352544
> 
> 赞同：0
> 
> 时间：2013-03-12T03:00:27.210
> 
> 标签：azure, amazon, scaling, instances, reducing

我想缩减部署。通常 Fabric 会关闭具有更高实例 ID 的实例，但我想控制它关闭哪个实例。
因此，如果我捕获 InfrastructureChange 并返回 true 更改实例计数，这会阻止实例关闭吗？到目前为止，我的测试结果好坏参半。

另外，有人知道 Windows Azure 是否允许关闭特定实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:27:48.310

您无法控制在 Windows Azure 中关闭哪个实例，正如您所提到的，通常要创建的最后一个实例是要删除的第一个实例。您能做的最好的事情是在 Stopping 事件期间运行清理代码并将未完成的代码委托给不同的实例。

总体而言，Azure 希望您的实例做一小部分高度分布式的工作，而不是长时间运行的工作。

# c - 获取精灵部分偏移量

> ID：15352547
> 
> 赞同：5
> 
> 时间：2013-03-12T03:01:00.320
> 
> 标签：c, unix, elf

我正在尝试获取 elf 文件每个部分的偏移量和数据。我已经有了这段代码的部分名称：

```
#include <elf.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>

int filesize(int fd)
{
  return (lseek(fd, 0, SEEK_END));
}

void    print_section(Elf64_Shdr *shdr, char *strTab, int shNum)
{
  int   i;

  for(i = 0; i < shNum; i++)
     printf("%02d: %s\n", i, &strTab[shdr[i].sh_name]);
}

int main(int ac, char **av)
{
  void  *data;
  Elf64_Ehdr    *elf;
  Elf64_Shdr    *shdr;
  int       fd;
  char      *strtab;

  fd = open(av[1], O_RDONLY);
  data = mmap(NULL, filesize(fd), PROT_READ, MAP_SHARED, fd, 0);
  elf = (Elf64_Ehdr *) data;
  shdr = (Elf64_Shdr *) (data + elf->e_shoff);
  strtab = (char *)(data + shdr[elf->e_shstrndx].sh_offset);
  print_section(shdr, strtab, elf->e_shnum);
  close(fd);
  return 0;
} 
```

但是我找不到获取每个部分的数据或其起始偏移量的方法。谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T03:30:17.563

我认为您可以使用`sh_offset`and `shdr[i].sh_size`：

```
void    print_section(Elf64_Shdr *shdr, char *strTab, int shNum, uint8_t *data)
{
  int   i;  

  for(i = 0; i < shNum; i++) {
    size_t k;
     printf("%02d: %s Offset %lx\n", i, &strTab[shdr[i].sh_name], 
        shdr[i].sh_offset);
     for (k = shdr[i].sh_offset; k < shdr[i].sh_offset + shdr[i].sh_size; k++) {
       printf("%x", data[k]);
     }   
     printf("\n");
     for (k = shdr[i].sh_offset; k < shdr[i].sh_offset + shdr[i].sh_size; k++) {
       printf("%c", data[k]);
     }   
     printf("\n");
  }
} 
```

并这样称呼它：

```
print_section(shdr, strtab, elf->e_shnum, (uint8_t*)data); 
```

获取虚拟地址（偏移量）的一种方法：

```
Elf64_Phdr *ph = (Elf64_Phdr *) ((uint8_t *) data + elf->e_phoff);
printf("Virtual address offset: %lx\n", ph->p_vaddr - elf->e_phoff); 
```

# windows-phone-7 - 如何绑定到字典

> ID：15352552
> 
> 赞同：0
> 
> 时间：2013-03-12T03:01:41.300
> 
> 标签：windows-phone-7, xaml, data-binding, binding

通常，对于 XAML 中的绑定，我们需要提供 FIELDNAME，但在这种情况下，我们有类似的值

```
Dictionary["xyz"]["abc"] 
```

那么有没有办法`Dictionary["xyz"]["abc"]`在 XAML 中添加呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:41:54.947

假设您已`ItemsSource`设置为`Dictionary<string, Dictionary<string, SOME_TYPE>>`. 在这种情况下，您可以绑定到`Key`and `Value`， where `Value`will be `Dictionary<string, SOME_TYPE>`。

然后，您可以做的是将`DataContext`DataTemplate 中的元素的 （假设这是您正在使用的）绑定到 that `Value`，并将属性绑定设置为子字典的`Key`or `Value`。

# php - Facebook PHP SDK 未获得有效的访问令牌

> ID：15352553
> 
> 赞同：0
> 
> 时间：2013-03-12T03:01:44.177
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我一直按照开发人员文档中的说明进行操作，并且在使用 PHP-SDK 教程时遇到了问题。

[https://developers.facebook.com/docs/reference/php/facebook-api/](https://developers.facebook.com/docs/reference/php/facebook-api/)

上面 URL 中的“通过 Graph API 获取用户的个人资料并打印他们的姓名”示例在尝试期间似乎中断了，据我所知，它收到了错误的访问令牌。

错误消息：致命错误：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。在第 1254 行抛出 myURL/sdk/base_facebook.php

我可以通过 FQL 查询成功获得有效的访问令牌，但仅在使用 PHP SDK 命令 $facebook->api('/me','GET') 时收到错误消息（如文档和教程所示）以及从什么我可以告诉它应该即时获得有效的访问令牌，但不是。

在这个例子中我打算在其他地方使用什么东西吗？我不确定我做错了什么。

[编辑显示代码]

```
<?php
  // Remember to copy files from the SDK's src/ directory to a
  // directory in your application on the server, such as php-sdk/
  require_once('php-sdk/facebook.php');

  $config = array(
    'appId' => 'MY_APP_ID',
    'secret' => 'MY_APP_SECRET',
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();
?>
<html>
  <head></head>
  <body>

  <?php
    if($user_id) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {

        $user_profile = $facebook->api('/me','GET');
        echo "Name: " . $user_profile['name'];

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl(); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   
    } else {

      // No user, print a link for the user to login
      $login_url = $facebook->getLoginUrl();
      echo 'Please <a href="' . $login_url . '">login.</a>';

    }

  ?>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:31:09.050

好吧，没关系，出于某种奇怪的原因，在 24 小时没有更改之后，这个脚本正在运行。感谢大家的所有帮助:)

# c# - AppFabric DataCache 通过键获取值？

> ID：15352554
> 
> 赞同：1
> 
> 时间：2013-03-12T03:01:44.583
> 
> 标签：c#, caching, redis, appfabric, azure-appfabric

如何使用 AppFabric DataCache 并通过键**获取值？**

例如。我想要做：

```
string[] keys = new []{"key1","key2", ...,"keyLast" }
object[] values = factory.GetCache("MyCache").Get(keys); 
```

这似乎是一个非常基本的操作，我希望有一种方法可以做到这一点，而无需往返后备存储。

Ps 我知道 redis ServiceStack 实现支持开箱即用，对于我的用例，这是决定我的公司采用哪种技术的强制性功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:32:17.070

该`BulkGet`方法（[MSDN](http://msdn.microsoft.com/en-us/library/ff424905.aspx)）可以做到这一点。它接受一个`IEnumerable<string>`键和一个要查询的区域的名称（可以是系统区域，您可以使用该`GetSystemRegionName`方法获取），并返回一个`IEnumerable<KeyValue<string, object>>`键和值（因此您知道哪个值与哪个键对应） . 或者，如果您使用区域，则可以使用 GetObjectsInRegion 方法，该方法将返回`IEnumerable<KeyValuePair<string, object>>`包含该区域中缓存的所有对象的相同结构 ( )。

# javascript - 链接在 js-mindmap 上不起作用

> ID：15352556
> 
> 赞同：1
> 
> 时间：2013-03-12T03:02:23.160
> 
> 标签：javascript, jquery, html

我刚刚找到了这个用于创建思维导图的 js，唯一不起作用的是链接。我正在链接到 github，因为这里放置的代码太多：[https ://github.com/kennethkufluk/js-mindmap](https://github.com/kennethkufluk/js-mindmap)

到目前为止我已经尝试过了..

```
$('.node.active').mousedown( function(){
    var url = $(this).attr('href');
    window.location(url, '_blank');
}); 
```

还在学习 javascript/jquery :)

谢谢你的一切！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T19:41:11.193

对于任何寻求解决方案的人，我为此做了一个小解决方法。

由于我的主要“气泡”只是容器，它们的 href 值为 #，而每个气泡上的最后一项是真实链接。

因此，在 script.js 中以

```
var addLI = function() { 
```

将 onlick 函数更改为此

```
 onclick:function(node) {
    var thelink = $(this).attr('href');
    if ( thelink != '#' ) {
        window.open(thelink, '_blank');
    }
    else {
        $(node.obj.activeNode.content).each(function() {
          this.hide();
        });
        $(node.content).each(function() {
          this.show();
        });
    } 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:16:14.517

每次需要使用[window.open时打开一个新窗口](http://www.w3schools.com/jsref/met_win_open.asp)

```
window.open(url, '_blank'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T06:10:43.363

你可以试试这个，它会在新窗口中打开

```
var a=$(this).attr('href').attr('target','_blank'); 
```

# java - 在新 Activity 中单击 Spinner 时强制关闭。

> ID：15352557
> 
> 赞同：0
> 
> 时间：2013-03-12T03:02:44.657
> 
> 标签：java, android, android-activity, android-tabhost, forceclose

我在其中创建了一个`TabHost`包含三个选项卡的选项卡。如果我单击其中一个选项卡，将打开一个`Activity`带有 a的选项卡。`Spinner`如果我单击它`Spinner`，我的应用程序将关闭。

我的活动：

```
setContentView(R.layout.employeepayslip);
    btn=(Button)findViewById(R.id.button1);  //Submit

    Bundle extras = getIntent().getExtras();
    idviewslip = extras.getString("idviewslip");

     empid=(TextView)findViewById(R.id.empid1);
     empname=(TextView)findViewById(R.id.empname1);
     empdesignation=(TextView)findViewById(R.id.empdesignation);

    sp1=(Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<String>Adapter=new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,months);
    sp1.setAdapter(Adapter);
    sp1.setOnItemSelectedListener(this);

    sp2=(Spinner) findViewById(R.id.spinner2);
    ArrayAdapter<String>Adapter1=new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,years);
    sp2.setAdapter(Adapter1);
    sp2.setOnItemSelectedListener(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:27:51.453

我刚刚替换了以下

```
setContentView(R.layout.employeepayslip); 
```

至

```
View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.employeepayslip, null);
    this.setContentView(viewToLoad); 
```

# mysql - SQL 查询除了

> ID：15352564
> 
> 赞同：0
> 
> 时间：2013-03-12T03:03:35.953
> 
> 标签：mysql, sql, group-by

如果我有一个表设置如下：

```
╔══════╦══════╗
║  A   ║  B   ║
╠══════╬══════╣
║ Sam  ║ sec2 ║
║ Sam  ║ sec2 ║
║ Sam  ║ sec2 ║
║ Fred ║ sec1 ║
║ Fred ║ sec2 ║
║ Fred ║ sec1 ║
║ Joe  ║ sec1 ║
║ Joe  ║ sec1 ║
╚══════╩══════╝ 
```

我希望结果是

```
╔═════╦══════╗
║  A  ║  B   ║
╠═════╬══════╣
║ Sam ║ sec2 ║
║ Sam ║ sec2 ║
║ Sam ║ sec2 ║
║ Joe ║ sec1 ║
║ Joe ║ sec1 ║
╚═════╩══════╝ 
```

所以基本上我想查询在 sec1 或 sec2 但不是两者的人，我想留下重复项。

我的尝试：

```
SELECT A, B
FROM TABLE
WHERE (A = 'SAM' OR A = 'FRED' OR A = 'JOE') AND NOT (B = 'sec1' AND B = 'sec2') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:05:48.330

好的，如果表上还有其他列，则此查询很有用。子查询的作用是单独获取`A`仅具有唯一性的`B`. `MAX(B) = MIN(B)`是一样的`COUNT(DISTINCT B) = 1`。然后通过 column 将子查询的结果连接回表本身`A`。

```
SELECT  y.*
FROM    tableName y
        INNER JOIN
        (
            SELECT  A
            FROM    tableName
            GROUP   BY A
            HAVING  MAX(B) = MIN(B) 
                    AND MAX(B) IN ('sec1', 'sec2')
        ) x ON y.A = x.A 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/491d1/1)

或者

```
SELECT  y.*
FROM    tableName y
        INNER JOIN
        (
            SELECT  A
            FROM    tableName
            GROUP   BY A
            HAVING  COUNT(DISTINCT B) = 1 
                    AND MAX(B) IN ('sec1', 'sec2')
        ) x ON y.A = x.A 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/491d1/2)

# ios - 在 tableView 中覆盖 UIBarButtons 的函数

> ID：15352565
> 
> 赞同：0
> 
> 时间：2013-03-12T03:03:49.817
> 
> 标签：ios

有没有办法在 tableView 中覆盖 UIBarButtons 的功能？

```
- (IBAction)addNewBook:(UIBarButtonItem *)sender {

    [self performSegueWithIdentifier:@"addNewBook" sender:self];

}

- (IBAction)myBooks:(UIBarButtonItem *)sender {
    [self performSegueWithIdentifier:@"myBooks" sender:self];
} 
```

我为这两个`UIBarButtons`（在表格视图中）做了新的操作，并且还尝试在按下这些按钮时添加 segues 以转到新的 viewController，但是这些`UIBarButtons`已经具有预先确定的功能 - 右侧的功能是添加，左侧是删除。有没有办法覆盖这些功能 - 所以我可以得到我想要发生的转场，而不是在列表中删除和添加东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:33:21.117

只需将 barItem 拖动到 storyBoard 中的 NavigationBar 并拖动 segue。然后删除这些代码，Edit 和 Add 不是默认按钮，它们是在 viewDidLoad 中设置的。

```
self.navigationItem.leftBarButtonItem = self.editButtonItem;

UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
self.navigationItem.rightBarButtonItem = addButton; 
```

# string - 在 req 查询中查找字符串的批处理文件

> ID：15352570
> 
> 赞同：0
> 
> 时间：2013-03-12T03:04:56.183
> 
> 标签：string, cmd, registry

这是我迄今为止所拥有的：

```
set bit=reg query HKLM\HARDWARE\DESCRIPTION\System\CentralProcessor\0 /v Identifier
%bit%
    Identifier    REG_SZ    x86 Family 6 Model 23 Stepping 10 
```

我想搜索`%bit%`以将 x86 显示为，如果 x86 存在则运行`test.exe`.

我知道`%processor_architecture%`我可能会使用哪种格式，但我确实需要知道其他注册表查询的这种格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:44:26.933

不确定我是否正确理解了您的问题，但如果您只想知道您的`reg query`退货是否为“x86”，那么您可以这样做：

```
%bit%|findstr "x86" >NUL
If %errorlevel% equ 0 (echo x86) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:09:55.577

我这样做是为了为未来的用户简化它，但非常感谢 mrt 帮助我。

```
set bit=reg query HKLM\HARDWARE\DESCRIPTION\System\CentralProcessor\0 /v Identifier
    %bit%|findstr "x86" >NUL
If %errorlevel% equ 0 (set type=x86)
IF %type% equ x86 (winver.exe) 
```

# python - 在 Python 中创建列出给定目录中所有文件的 xml 文件

> ID：15352571
> 
> 赞同：0
> 
> 时间：2013-03-12T03:04:59.257
> 
> 标签：python, xml, directory-listing

我得到了一个目录，我必须编写一个 python 脚本来创建一个包含该目录中所有 .xml 文件的 xml 文件。

例如，假设 /tmp/ 包含以下 xml 文件：

```
beans.xml
cakes.xml
donuts.xml 
```

我试图弄清楚如何编写一个创建以下 xml 的脚本：

```
<root>
   <include file="/tmp/beans.xml"/>
   <include file="/tmp/cakes.xml"/>
   <include file="/tmp/donuts.xml/>
</root> 
```

到目前为止，这是我拼凑起来的，但它每次都会覆盖文件标签，所以只包含 donuts.xml

```
import lxml.etree
import lxml.builder
import glob
import os

E = lxml.builder.ElementMaker()
ROOT = E.root
DOC = E.include

os.chdir("/tmp/")
for f in glob.glob("*.xml"):
    the_doc = ROOT(

    DOC(file=f)

)

print lxml.etree.tostring(the_doc, pretty_print=True) 
```

这是我的脚本现在的输出：

```
<root>
    <include file="/tmp/donuts.xml"/>
</root> 
```

如何保持 beans.xml 和 cakes.xml 表单被覆盖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:26:42.980

`the_doc`您在每次迭代中都覆盖。这就是为什么你的输出只有一个元素。试试这个：

```
os.chdir("/tmp/")
files = [DOC(file=f) for f in glob.glob("*.xml")]
the_doc = ROOT(*files)
print lxml.etree.tostring(the_doc, pretty_print=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:27:41.527

我对lxml不太了解，但是阅读文档会导致这个解决方案：

```
import os
import glob
from lxml import etree

if __name__ == '__main__':
    root = etree.Element('root')
    os.chdir('/tmp')
    for filename in glob.glob('*.xml'):
        root.append(etree.Element('include', file=filename))

    print etree.tostring(root, pretty_print=True) # Or, print to a file if you wish 
```

# git - 在多台机器上处理 git repo 中的代码最轻松的方法是什么？

> ID：15352575
> 
> 赞同：1
> 
> 时间：2013-03-12T03:05:35.493
> 
> 标签：git, synchronization

假设我在 github/bitbucket 有一个集中的 git 存储库，我在笔记本电脑或大学的工作站上编写代码。在这两台机器上同步我当前的代码工作副本最轻松的方法是什么，以便我总是可以选择从我离开的地方继续？

我已经阅读了 SO 上的其他线程，它们主要涉及提交新分支和拉/使用 USB 密钥/保管箱。但是由于 Dropbox 可能会破坏 git repo，有没有一种方法可以让我始终无缝地从中断的地方恢复？（两台机器都可以访问互联网）。

这是我能想到的选项，请随时添加。

1.  在集中式 repo 上有一个正在进行中的分支，并在您想要合并时进行 rebase。

    优点：

    *   吉特
    *   大多数冲突将由 git 自动处理。

        缺点：

    *   不是自动的。有时您可能会忘记执行此操作，并且无法访问您的最新更改
    *   如果许多开发人员都遵循这种做法，分支列表将过于混乱。
2.  对于每个项目，都有一个私有 repo 来同步进行中的工作分支。也许设置 vim 挂钩以自动提交到该分支

    优点：

    *   吉特
    *   公共回购中没有混乱
    *   可以在每次保存时设置自动提交和推送，因为它是私有的并且没有人看到它。

    缺点：

    *   您最终将获得每个项目的一个私人仓库。（如果你有自己的 git 主机可能不是问题）
    *   如果您没有互联网并编辑文件，Dropbox 将创建两个副本，您必须手动解决冲突
3.  为每个项目创建一个包，使用 Dropbox 同步包文件夹

    优点：

    *   可以设置自动提交 wip 分支，dropbox 同步捆绑文件夹。

    缺点：

    *   如果您没有互联网并编辑文件，请推送到捆绑包，保管箱将创建捆绑包的两个副本，您必须手动解决冲突
4.  在 Dropbox 上存储项目文件夹

    优点：

    *   在最好的情况下，它是真正无缝的。
    *   只要您有互联网，您就可以开始以与您离开时相同的状态开始编辑您的代码。

    缺点：

    *   Dropbox 可能会损坏 git 数据库。
    *   如果您没有互联网并编辑文件，Dropbox 将创建两个副本，您必须手动解决冲突
5.  找到一种将多个存储库存储在 bitbucket 上的单个私有存储库中的方法，并具有类似于选项 2 的设置。

我认为这可能是最好的解决方案，有人对我如何做到这一点有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:55:47.830

[是的，就是这么简单...] GitHub 上的共享位置将是您所有本地开发机器的“起源”。设置原点后，您的日常机器对机器工作流程基本上是：

== 机器-1

```
# edit
$ git commit ...
$ git push origin <branch> 
```

== 机器 2

```
$ git pull origin <branch>
# edit
$ git commit ...
$ git push origin <branch> 
```

== 机器-1

```
... 
```

如果您在当天的机器上开始工作时忘记了“git pull origin”，那么当您推送时，您可能会看到您将解决的冲突。

如果您希望历史记录干净，则为每个功能创建一个分支，在您每天更换机器时在该功能分支上频繁更新，然后，当您将功能合并到主（或任何地方）rebase 以获得清白的历史。请注意，无论如何，您通常会在合并功能时重新设置基准；您只需处理“额外的”日常提交即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:55:06.193

您可能可以编写一个为您调用 git 命令的脚本（可能是您选择的节点或脚本语言）。您可能想要使用的命令（我将其用于与您类似的工作流程）@see[如何从远程 git 存储库中提取并覆盖本地存储库中的更改](https://stackoverflow.com/questions/6284809/how-to-pull-from-remote-git-repository-and-override-the-changes-in-my-local-repo)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T03:48:58.570

我赞成其他线程的建议：git 能够很好地做到这一点，所以请使用它提供的设施。它可以非常轻量级：在分支上完成工作，并在需要切换机器时提交/推送到中央仓库。如果您在这些提交消息前加上“squash！”，那么您以后可以使用`git rebase -i --autosquash`将您的分支重新定位到其父级（也许是`master`），并且这些提交将自动标记为 squash（即消失），因此您不会有任何噪音。当然，如果您已经在使用 rebase 工作流程，这将最有效。

# arrays - 指向数组的指针，GCC

> ID：15352581
> 
> 赞同：0
> 
> 时间：2013-03-12T03:05:55.600
> 
> 标签：arrays, pointers

ggc 给了我这个错误，我无法相信这个错误是正确的，因为输入和预期参数都是 [8][8] 指向数组的指针，知道这里有什么问题！

```
main.c: In function ‘main’:main.c:24:3: warning: passing argument 1 of ‘DRESC_Transform’ from incompatible pointer type [enabled by default]
In file included from main.c:1:0:
global.h:13:6: note: expected ‘short int * (*)[8]’ but argument is of type ‘short int (*)[8][8]’ 
```

这是 global.h

```
#include <math.h>
#include <stdio.h>

# define ROW 8
# define COL 8
# define SHIFT_AMOUNT 16
# define SHIFT_MASKT ( 1<<SHIFT_AMOUNT )-1

void DRESC_Transform( short *matrix [ROW][COL]);

void DRESC_Transform( short *matrix [ROW][COL]){

  int _tmp_matrix [ROW*COL]; // 2KB REGISTER 

  for ( unsigned i = 0; i <ROW; i++){ 

    int _tmp0, _tmp1, _tmp2, _tmp3, _tmp4, _tmp5, _tmp6, _tmp7;

    _tmp0 = *matrix [i][0];
    _tmp1 = *matrix [i][1];
    _tmp2 = *matrix [i][2];
    _tmp3 = *matrix [i][3];
    _tmp4 = *matrix [i][4];
    _tmp5 = *matrix [i][5];
    _tmp6 = *matrix [i][6];
    _tmp7 = *matrix [i][7];

    _tmp_matrix [    (i<<3)] = _tmp0 <<SHIFT_AMOUNT;
    _tmp_matrix [1 + (i<<3)] = _tmp1 <<SHIFT_AMOUNT;
    _tmp_matrix [2 + (i<<3)] = _tmp2 <<SHIFT_AMOUNT;
    _tmp_matrix [3 + (i<<3)] = _tmp3 <<SHIFT_AMOUNT;
    _tmp_matrix [4 + (i<<3)] = _tmp4 <<SHIFT_AMOUNT;
    _tmp_matrix [5 + (i<<3)] = _tmp5 <<SHIFT_AMOUNT;
    _tmp_matrix [6 + (i<<3)] = _tmp6 <<SHIFT_AMOUNT;
    _tmp_matrix [7 + (i<<3)] = _tmp7 <<SHIFT_AMOUNT;

  }

  for ( unsigned i = 0; i < ROW; i++){ // a row calculation

    int _tmp;

    _tmp_matrix[    (i<<3)] = ( _tmp_matrix[    (i<<3)] + _tmp_matrix[1 + (i<<3)] ) >>1;
    _tmp                    = ( _tmp_matrix[    (i<<3)] - _tmp_matrix[1 + (i<<3)] );
    _tmp_matrix[1 + (i<<3)] = ( _tmp_matrix[2 + (i<<3)] + _tmp_matrix[3 + (i<<3)] ) >>1;
    _tmp_matrix[2 + (i<<3)] = ( _tmp_matrix[4 + (i<<3)] + _tmp_matrix[5 + (i<<3)] ) >>1;
    _tmp_matrix[4 + (i<<3)] =   _tmp;
    _tmp                    = ( _tmp_matrix[6 + (i<<3)] + _tmp_matrix[7 + (i<<3)] ) >>1;
    _tmp_matrix[6 + (i<<3)] = ( _tmp_matrix[2 + (i<<3)] - _tmp_matrix[5 + (i<<3)] );
    _tmp_matrix[5 + (i<<3)] = ( _tmp_matrix[1 + (i<<3)] - _tmp_matrix[3 + (i<<3)] );
    _tmp_matrix[3 + (i<<3)] =   _tmp;
    _tmp_matrix[7 + (i<<3)] = ( _tmp_matrix[3 + (i<<3)] - _tmp_matrix[7 + (i<<3)] );
  }

  for ( unsigned i = 0; i <ROW; i++){

    int _tmp0, _tmp1, _tmp2, _tmp3, _tmp4, _tmp5, _tmp6, _tmp7;

    _tmp0 = _tmp_matrix [    (i<<3)] >>SHIFT_AMOUNT;
    _tmp1 = _tmp_matrix [1 + (i<<3)] >>SHIFT_AMOUNT;
    _tmp2 = _tmp_matrix [2 + (i<<3)] >>SHIFT_AMOUNT;
    _tmp3 = _tmp_matrix [3 + (i<<3)] >>SHIFT_AMOUNT;
    _tmp4 = _tmp_matrix [4 + (i<<3)] >>SHIFT_AMOUNT;
    _tmp5 = _tmp_matrix [5 + (i<<3)] >>SHIFT_AMOUNT;
    _tmp6 = _tmp_matrix [6 + (i<<3)] >>SHIFT_AMOUNT;
    _tmp7 = _tmp_matrix [7 + (i<<3)] >>SHIFT_AMOUNT;

    *matrix [i][0] = _tmp0;
    *matrix [i][1] = _tmp1;
    *matrix [i][2] = _tmp2;
    *matrix [i][3] = _tmp3;
    *matrix [i][4] = _tmp4;
    *matrix [i][5] = _tmp5;
    *matrix [i][6] = _tmp6;
    *matrix [i][7] = _tmp7;

  } 

} 
```

这是主要的：

```
#include "global.h"

void main (){

  short matrix [ROW][COL] = {{7, 1, 6, 6, 3, -5, 4, 2}, // <<<<---
                 {7, 1, 6, 6, 3, -5, 4, 2},
                 {7, 1, 6, 6, 3, -5, 4, 2},
                 {7, 1, 6, 6, 3, -5, 4, 2},
                 {7, 1, 6, 6, 3, -5, 4, 2},
                 {7, 1, 6, 6, 3, -5, 4, 2},
                 {7, 1, 6, 6, 3, -5, 4, 2},
                 {7, 1, 6, 6, 3, -5, 4, 2}};

  DRESC_Transform(&matrix); // <<<---

  printf("the transformed matrix is \n");
  printf("{");
  for ( unsigned i; i <ROW; i++){
    for ( unsigned j = 0; j <COL; j++){
      printf( "%d,", matrix[i][j]);
    }
    printf("\b}, \n");
  }
  printf("\b} \n");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:03:01.100

一般来说，对于任何维度的数组：

```
T array[S1][S2][...][SN] 
```

当你将它传递给一个函数时，衰减到

```
T array[][S2][...][SN] 
```

这只不过是一种不同的语法

```
T (*array)[S2][...][SN] 
```

因此，如果要将数组传递`short matrix[ROW][COL]`给函数，函数应该接受`short matrix[][COL]`。

从语法中可以看出`T (*array)[S2][...][SN]`，数组作为指针传递。所以不要害怕；如果您在函数内部修改数组的元素，则当该函数返回时，结果将在原始数组中可见。

唯一一次看不到赋值的情况是，如果修改指针`matrix`（函数中的局部变量），然后直接将其赋值为指向新数组，例如`matrix = ...`.

* * *

至于其他注释，`void main`不是`main`. 应该是`int main`，如果你使用的是 C，你应该`return 0`在最后。

# android - Why my ADT is always showing Reindexing Repository?

> ID：15352582
> 
> 赞同：0
> 
> 时间：2013-03-12T03:05:57.790
> 
> 标签：android, eclipse, git, adt

I am using ADT (eclipse) to develop my android app. Maintaining repository in git. But always it shows re-indexing repository. What does it mean? Can I stop this process and make it manual?

Another problem is it always shows 700+M of 742M. I assume it's virtual memory usage. As long as I am adding more codes ADT becomes slow. What can I do for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:41:35.710

Try unchecking `Prefereces->Team->Git->Automatic refresh->Refresh resources when index changes`

# css - 如何在引导程序中使用图标字体？

> ID：15352587
> 
> 赞同：1
> 
> 时间：2013-03-12T03:07:10.370
> 
> 标签：css, twitter-bootstrap, icon-fonts

我使用在线工具 icomoon 生成了一些基于字体的图标，并尝试将它与我拥有的引导模板一起使用。

**问题**是bootstrap的css使用了“icon-”前缀，而我的icon-font使用了相同的，比如css类名的“icon-puzzle”。

这是正在发生的事情的图片（我的自定义字体（蓝色拼图）与引导图标 spritesheet 的一部分一起呈现） ![在此处输入图像描述](../Images/662475a813e3073c4abc6ef7e8b5295a.png)

所以，我当然可以更改我的图标字体以使用不同的 css 类前缀，例如“font-icon-puzzle”， **但我想与引导程序正确集成，而不是为我的字体图标创建一次性异常。**

有人可以推荐一个更好地与引导程序集成的替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:37:40.107

我在 Bootstrap 中使用的 Font Awesome 非常好用：

[http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/)

为了让您的自定义字体与 Bootstrap 一起使用，请确保您在 Boostrap css 之后加载 css，并确保 css 在其中声明“background-image:none”。

# python - 如何检查一个数字是否是底数 b 的幂？

> ID：15352593
> 
> 赞同：5
> 
> 时间：2013-03-12T03:08:22.803
> 
> 标签：python, logarithm

在 python 中，如何检查数字 n 是否是底数 b 的精确幂？

注意：它需要推广到作为参数给出的任何基础。

这是我得到的：

假设 n 和 base 是 > 0 的整数。

```
import math
def is_power(n,base):
    return math.log(n,base) == base**n 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T03:12:27.840

首先，假设您有一个特定的对数运算符（许多语言仅提供对数`10`或基数`e`），可以计算为（显然是您的语言提供的基数）。`log[a]b``log[x]b / log[x]a``x`

Python 做得更好，因为它可以计算出*任意*基数的对数，而无需上面那个棘手的等式。

因此，通过一种或另一种方式，您有一种方法可以对特定的基数进行取数。从那里开始，如果`b`in 基数`a`的对数是整数^(（注 1）)，则`b`是 的幂`a`。

所以我将从以下代码开始，现在添加边缘情况检测：

```
# Don't even think about using this for negative powers :-)

def isPower (num, base):
    if base in {0, 1}:
        return num == base
    power = int (math.log (num, base) + 0.5)
    return base ** power == num 
```

例如，请参见以下完整程序，该程序显示了这一点：

```
import math

def isPower (num, base):
    if base in {0, 1}:
        return num == base
    power = int (math.log (num, base) + 0.5)
    return base ** power == num

print isPower (127,2)       # false
print isPower (128,2)       # true
print isPower (129,2)       # false
print

print isPower (26,3)        # false
print isPower (27,3)        # true
print isPower (28,3)        # false
print isPower (3**10,3)     # true
print isPower (3**129,3)    # true
print

print isPower (5,5)         # true
print isPower (1,1)         # true
print isPower (10,1)        # false 
```

* * *

如果你是那种担心浮点运算的人，你*可以*通过重复乘法来做到这一点，但你应该测试这种解决方案的性能，因为它在软件中可能比在硬件中慢得多。这对于诸如此类的事情并不重要，`isPower(128,2)`但它可能会成为`isPower(verybignum,2)`.

对于上述代码的非浮点变体：

```
def isPower (num, base):
    if base in {0, 1}:
        return num == base
    testnum = base
    while testnum < num:
        testnum = testnum * base
    return testnum == num 
```

但请确保它已针对您的最大数量和最小基数进行测试，以确保您不会受到任何性能冲击。

* * *

^(（注 1）)请记住，浮点不精确可能意味着它不*完全*是整数。您可能不得不使用“足够接近”的比较。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T03:20:00.150

一个非常简单的解决方案可能是这样的：

```
def ispower(n, base): 

    if n == base:
        return True

    if base == 1:
        return False

    temp = base

    while (temp <= n):
        if temp == n:
            return True
        temp *= base

    return False 
```

结果：

```
>>> ispower(32, 2)
True
>>> ispower(81, 3)
True
>>> ispower(625, 5)
True
>>> ispower(50, 5)
False
>>> ispower(32, 4)
False
>>> ispower(2,1)
False
>>> ispower(1,1)
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:16:40.410

```
>>> def isPower(n, b):
...   return b**int(math.log(n, b)+.5)==n
... 
>>> isPower(128, 2)
True
>>> isPower(129, 2)
False
>>> isPower(3**10, 3)
True
>>> isPower(3**129, 3)
True
>>> isPower(10**500, 10)
True
>>> isPower(10**(10**6), 10)
True 
```

* * *

**编辑**：此代码确实失败`1,1`：

```
>>> isPower(1,1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in isPower
ZeroDivisionError: float division by zero 
```

我将把它留给 OP 来决定他是要应用微不足道的修复还是重写他的要求。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-18T20:24:13.907

`>>>(math.log(int(num),int(base))).is_integer()`

这将返回一个布尔值 true 或 false。这应该可以正常工作。希望能帮助到你

# javascript - 我可以将链接的文本作为变量传递吗？

> ID：15352594
> 
> 赞同：0
> 
> 时间：2013-03-12T03:08:27.520
> 
> 标签：javascript, variables

我有一个简单的 html 链接。

```
<a onmouseover="myfunction(this.SOMETHING??);">The String I Want</a> 
```

有没有办法将文本“我想要的字符串”作为变量传递给 myfunction()？我在想我也许可以使用“this”关键字，所以我[在这里](https://stackoverflow.com/questions/3127429/javascript-this-keyword)检查了，但它并没有真正解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:09:44.543

您可以使用 this.textContentText：

```
<a onmouseover="myfunction(this.textContent);">The String I Want</a> 
```

但它适用于除 IE 之外的所有应用程序。

innerText 仅适用于 IE：

```
<a onmouseover="myfunction(this.innerText);">The String I Want</a> 
```

按照其他人的建议，试试这个：

```
<a onmouseover="myfunction(this.innerText || this.textContent || '');">The String I Want</a> 
```

这将使用任何一个工作，但如果 innerText 为空且 textContent 不受支持，它仍将传递一个空字符串而不是未定义。

# jquery - 预加载图像的最佳方式

> ID：15352599
> 
> 赞同：1
> 
> 时间：2013-03-12T03:09:01.850
> 
> 标签：jquery, css, preload

我刚刚为艺术建立了一个 jquery 和 css 网站，新访问者的加载时间非常长，在访问（缓存）之后加载速度相当快。

我的问题是，预加载大量图像的最佳方法是什么。

如果有人有兴趣查看加载时间，可以在这里查看：

[http://zabetpucket.com/](http://zabetpucket.com/)

我很想反馈加载需要多长时间，当然还有优化加载时间的最佳方法。提前致谢。

如果有人觉得他们更容易给出明确的答案，我很乐意分享代码。

=]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:30:27.853

我会选择只加载可见的部分。执行 Instagram 或 Wordpress 之类的操作（我认为 Apple 也在这样做）并在滚动条上设置一个事件侦听器，以便加载下一部分，而不是整个页面。正如@DigitalDesignDj 在评论中建议的那样，优化您的图像也是必须的。

我看到你已经有一个滚动事件处理程序来使部分标题加粗，但是你应该查看 jQuery [.load()](http://api.jquery.com/load/)来加载可见的部分（或下一个即将到来的部分）。使用优化的图像，在动画滚动之后或期间加载图像不会有什么大不了的。

您也可以获得加载动画，这对[用户体验](https://ux.stackexchange.com/)有好处。

# ruby-on-rails - Refinery CMS - 它创建一个空的 Rails 应用程序

> ID：15352608
> 
> 赞同：0
> 
> 时间：2013-03-12T03:09:49.803
> 
> 标签：ruby-on-rails, ruby, content-management-system, refinerycms, ruby-2.0

我正在尝试使用 Refinery CMS 创建一个应用程序。我所做的正是来自教程：

```
refinerycms rickrockstar
cd rickrockstar
rails s 
```

它创建了一个空的 Rails 应用程序，我可以通过说`rails new my_new_app`

我做错了什么？

**更新：**

如果我运行为“rails new -m [http://refinerycms.com/t/2.0.0](http://refinerycms.com/t/2.0.0) ”，我还会说“ `run bundler`”，然后是“ ”`Bundler::GemfileNotFound`

# google-apps-script - 使用 Apps 脚本问题提交表单

> ID：15352615
> 
> 赞同：0
> 
> 时间：2013-03-12T03:11:08.100
> 
> 标签：google-apps-script

我正在尝试获取以下页面

[http://www.stluciesheriff.com/inmate_list.php](http://www.stluciesheriff.com/inmate_list.php)

在 UrlFetchApp 类中使用 fetch() 方法

要让上述页面显示结果，您必须在以下位置提交表单

[http://www.stluciesheriff.com/inmate_search.php](http://www.stluciesheriff.com/inmate_search.php)

我尝试使用 fetch(url,payload) 方法复制表单数据和标题，但对于我的生活，我无法弄清楚如何让它返回我想要的实际数据

这是我的尝试

```
function grabdata() {
  //var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Data");

  var postdata = {
    "First":"",
    "Last":"",
    "When":2,
    "Submit":"Search"
  };

  var payload = {
    "method":"POST",
    "payload":postdata
  };

  var data = UrlFetchApp.fetch("http://www.stluciesheriff.com/inmate_list.php",payload);
  Logger.clear();
  Logger.log(data.getContentText());
  return e; // intentional error thrown for debugger
} 
```

我有一种感觉，我错过了一些明显的东西，因为我从来没有真正体验过从需要 POST 数据的网站获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:18:14.900

您可以使用Google 提供的[Xml 服务。](https://developers.google.com/apps-script/service_xml)Xml 库可以将 html 一直解析到您需要的特定元素。我使用 Chrome 检查器来确定我需要哪个元素。

我写了一些示例脚本来帮助你。

```
 var data = UrlFetchApp.fetch("http://www.stluciesheriff.com/inmate_list.php",payload);
  var entries = [];
  var xml = Xml.parse(data.getContentText(), true);
  var resultTable = xml.getElement().getElement("body").getElement("table").getElements("tr")[2]
        .getElements("td")[1].getElement("table").getElements("tr")[4].getElement("td").getElement("table");
  var tableRows = resultTable.getElements("tr");
  for (var i=1; i<tableRows.length; i++) {
    entries.push(extractDataFromRow(tableRows[i]));
  }

  Logger.log(Utilities.jsonStringify(entries));
  return entries;
}

function extractDataFromRow(row) {
  var obj = {};
  var tds = row.getElements("td");
  obj.name = tds[0].getElement("a").getText();
  obj.dob = tds[1].getText();
  obj.age = tds[2].getText();
  obj.inmate_id = tds[3].getText();
  obj.booking = tds[4].getText();
  return obj;
} 
```

# vb.net - 按最大计数的 LINQ 组

> ID：15352619
> 
> 赞同：0
> 
> 时间：2013-03-12T03:11:26.527
> 
> 标签：vb.net, linq

我有这张名为 Projects 的表。

```
Name            Date           Hours
p1                  1/1/13         1
p1                  1/8/13         2
p1                  1/9/13         1
p2                  1/3/13         5
p2                  1/4/13         3 
```

我想把这些聚合成这样的东西

```
p1    Tue    4
p2    Thu    8 
```

我不知道如何获得 Date.Weekday 部分的最大计数。到目前为止，我已经尝试过这样的事情。

```
Dim qry = From er in Projects 
          Group er by er.Name Into Max(er.Date.Value.Weekday), Sum(er.Hours) 
```

但这会给我 p1 上的“星期三”，因为它高于“星期二”。我真正想要的是“Tue”，因为它比“Wed”有更多的记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:22:56.923

找到条目最多的一天的技巧是按天分组，然后按每个组中的条目数对组进行排序，然后抓住第一个。

```
Dim query = Projects.GroupBy(Function(e) e.Name, Function(name, groupedEntries) New With { _
    .Name = name, _
    .TopDay = groupedEntries.GroupBy(Function(e) e.[Date].DayOfWeek).OrderByDescending(Function(g) g.Count()).First().Key, _
    .TotalHours = groupedEntries.Sum(Function(e) e.Hours) _
}) 
```

# c - 和 C 预处理器中的按位运算符

> ID：15352626
> 
> 赞同：5
> 
> 时间：2013-03-12T03:12:22.697
> 
> 标签：c, c-preprocessor

当我尝试以下代码时：

```
#if 11 & 10 == 10
#endif 
```

表达式的评估是正确的，但是当我将其更改为以下内容时：

```
#if 10 & 10 == 10
#endif 
```

评估返回 false，而根据 & 运算符的定义，它仍应返回 true（当我尝试使用正确的预处理器时）。通常，无论我尝试什么，在第一个操作数中有 0 都会返回 false，而忽略结果是什么。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T03:17:58.577

[操作顺序](http://en.wikipedia.org/wiki/Order_of_operations#Programming_languages)似乎是罪魁祸首，因为`==`之前进行了评估`&`。括号对我有用：

```
#if (10 & 10) == 10 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T03:21:08.257

`==`优先级高于`&`

`if 11 & 10 == 10`评估为`if 11 & 1`评估为`if 1`

`if 10 & 10 == 10`评估为`if 10 & 1`评估为`if 0`

# java - 读取由逗号和空格分隔的一行 - java

> ID：15352627
> 
> 赞同：4
> 
> 时间：2013-03-12T03:12:23.383
> 
> 标签：java, java.util.scanner

我愿意在 Java 中从一行中读取一系列数字，如下所示：

```
1   80,982  163,8164                    170,2620 
```

所以最终我想要结果数组`[1, 80, 982, 163, 8164, 170, 2620]`

我正在考虑使用扫描仪，但不清楚如何以一种简洁的方式实现它，我可以请教一些技巧吗？

谢谢阅读！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T03:15:38.493

如果是我，我会读一行`BufferedReader`，然后简单地使用

```
String[] values = line.split("[, ]"); 
```

我通常觉得`Scanner`不整洁和矫枉过正。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T03:15:50.353

是的，Scanner 类可以很好地处理这个问题。

```
public static void main(String[] args) throws Exception {
    Scanner s = new Scanner(strOrFile).useDelimiter(",| ");
    List<Integer> myList = new ArrayList<Integer>();
    while (s.hasNext()) {
       myList.add(s.nextInt());
    }
} 
```

如果您从文件中读取，它会特别有效。（为您减少工作量。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T03:15:04.337

扫描仪很好，只需设置所需的分隔符模式，请参阅[this](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#useDelimiter%28java.util.regex.Pattern%29)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T03:18:08.843

试试这个：

```
public static void main(String[] args) {
    String str = "1 80,982 163,8164 170,2620";
    String[] s = str.split(" |,");
    for(String ss:s)
        System.out.println(ss);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T04:07:25.583

既然你想要 String[] 最好的解决方案是 String.split

```
String[] s = str.split("[ ,]+"); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-12T04:21:49.553

使用以下正则表达式拆分您的字符串。

```
 String input = "1   80,982  163,8164                    170,2620 "; 
        String[] values = input.split("\\s*(,|\\s)\\s*");
        for(String val: values)
        {
            System.out.println(val);

        } 
```

我符合以下条件。

1.  零个或多个空格`(,|\\s)`。如果您有多个分隔符，则可以将其包含在括号中，例如`(&|,|@|\\s)`.
2.  逗号和空格。

在这里检查小提琴。

[Java程序](http://ideone.com/6ifrcC)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-12T03:19:36.057

```
 String ss = "1 80,982 163,8164 170,2620";
    ss = ss.replaceAll(" ", ",");
    String arr[] = ss.split(",");
    for (int i=0;i<arr.length;i++) {
        System.out.println("line "+arr[i]);
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-06T21:36:23.960

对于带有一些逗号、空格和带有空格的逗号的简单输入文件，Rais 的正则表达式和 Evgeniy 的正则表达式都适用于 split。在后一种情况下，+ 号很关键。其他选项均不适用于此数据：1.0 2.0 3.0 4.0 5.0,6.0 7.0 8.0 9.0 10.0, 11.0 12.0

# php - dompdf中的图像

> ID：15352629
> 
> 赞同：2
> 
> 时间：2013-03-12T03:12:27.887
> 
> 标签：php, dompdf

我使用 dompdf 生成 pdf 报告。我的报告要求每一页都有背景图片。它有效，但不是那么好。Dompdf 只需要 2 分钟或更长时间才能生成 2 个带有背景图像的页面。有没有办法优化这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-20T17:05:31.060

我知道这是一个老问题，但我已经用 DOMPDF 测试了很多东西，我已经阅读了很多关于图像处理速度慢的帖子，我发现在 Dompdf 中使用 png 或 gif 图像会使文件的处理非常慢。

如果您不需要在图像上设置透明度 (alpha)，则**仅使用 jpg 图像**，您会发现生成 PDF 会快得多。

检查这个[github 问题](https://github.com/dompdf/dompdf/issues/730)，这让我测试了 jpg 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:13:41.127

将一些监控/分析代码和输出结果插入到生成的文件中，以查看哪个部分花费的时间最长。图像不应该是问题，我敢打赌，在某些时候它是一个疯狂的循环。

# java - 在android（java）中在运行时获取函数名

> ID：15352637
> 
> 赞同：0
> 
> 时间：2013-03-12T03:13:25.627
> 
> 标签：java, android, runtime

我想要一个 android: 中的方法`getCallerName()`。它将打印使用它的方法的名称。示例：如果我有一个方法：

```
void doSomething(){
    getCallerName(); // This line will print "doSomething"
} 
//or another example
void foo(){
   getCallerName(); // this line will print "foo"
} 
```

谁能告诉我我可以在运行时做到这一点？我该怎么做？提前致谢！

# java - 使用 apache poi 3.9 的 Java 程序在 XML 构建文件中遇到错误

> ID：15352638
> 
> 赞同：0
> 
> 时间：2013-03-12T03:13:34.157
> 
> 标签：java, build, apache-poi

您好在构建 xml 中遇到错误。从日志中我认为错误与 apache poi 库“poi-ooxml-3.9-20121203”和 Java 版本有关。我目前正在使用 JDK 4 和 apache poi 3.9。

```
Buildfile: C:\POITest\build.xml
    init:
    clean:
       [delete] Deleting directory C:\POITest\build
       [delete] Deleting directory C:\POITest\dist
    init:
        [mkdir] Created dir: C:\POITest\dist
        [mkdir] Created dir: C:\POITest\build
        [mkdir] Created dir: C:\POITest\dist\lib
    compile:
        [javac] C:\POITest\build.xml:38: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
        [javac] Compiling 1 source file to C:\POITest\build
        [javac] C:\POITest\src\poi\test\TestMain.java:8: cannot access org.apache.poi.openxml4j.exceptions.InvalidFormatException
        [javac] bad class file: C:\POITest\lib\poi3-9\poi-ooxml-3.9-20121203.jar(org/apache/poi/openxml4j/exceptions/InvalidFormatException.class)
        [javac] class file has wrong version 49.0, should be 48.0
        [javac] Please remove or make sure it appears in the correct subdirectory of the classpath.
        [javac] import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
        [javac]                                            ^
        [javac] 1 error 
```

POI 罐子列表

```
/POITest/lib/poi3-9/commons-codec-1.5.jar
/POITest/lib/poi3-9/commons-logging-1.1.jar
/POITest/lib/poi3-9/dom4j-1.6.1.jar
/POITest/lib/poi3-9/junit-3.8.1.jar
/POITest/lib/poi3-9/log4j-1.2.13.jar
/POITest/lib/poi3-9/poi-3.9-20121203.jar
/POITest/lib/poi3-9/poi-examples-3.9-20121203.jar
/POITest/lib/poi3-9/poi-excelant-3.9-20121203.jar
/POITest/lib/poi3-9/poi-ooxml-3.9-20121203.jar
/POITest/lib/poi3-9/poi-ooxml-schemas-3.9-20121203.jar
/POITest/lib/poi3-9/poi-scratchpad-3.9-20121203.jar
/POITest/lib/poi3-9/stax-api-1.0.1.jar
/POITest/lib/poi3-9/xmlbeans-2.3.0.jar 
```

如果您需要查看构建文件，请告诉我。谁能告诉我我需要做什么来解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T03:39:38.897

49.0 和 48.0 是类文件格式的版本号。该错误信息表示 POI-3.9 被编译为 JDK 5 类文件格式，您尝试将其与 JDK 4 一起使用。当然，JDK 4 不支持 JDK 5 类文件格式。我认为您可以尝试旧版本的 POI。或者只使用 JDK 5。

1、从POI 3.5开始，需要JDK 1.5。所以你可以使用 POI 3.4。请参考这篇文章：[Apache POI JDK 版本](https://stackoverflow.com/questions/14927463/apache-poi-jdk-version)。

2、有人已经将POI 3.8迁移到JDK 1.4。检查[Apache POI (3.8 final) migrated to JDK 1.4](http://en.sourceforge.jp/projects/poi-jdk14/)。谨慎使用非官方二进制文件。它可能无法完全测试。

正在使用的类文件格式的主要版本号：

*   J2SE 7 = 51（0x33 十六进制）
*   J2SE 6.0 = 50（0x32 十六进制）
*   J2SE 5.0 = 49（0x31 十六进制）
*   JDK 1.4 = 48（0x30 十六进制）
*   JDK 1.3 = 47（0x2F 十六进制）
*   JDK 1.2 = 46（0x2E 十六进制）
*   JDK 1.1 = 45（0x2D 十六进制）

参考资料：[Java类文件](http://en.wikipedia.org/wiki/Java_class_file#General_layout)

# javascript - 桌面浏览器上的水平 iScroll 问题

> ID：15352639
> 
> 赞同：3
> 
> 时间：2013-03-12T03:13:39.550
> 
> 标签：javascript, horizontal-scrolling, iscroll, iscroll4

我正在尝试使用 iScroll.js 为桌面网站实现水平滚动。拖动工作正常，样式应用正常，但我发现滚动问题。

最初我使用 iScroll 4.1.7 鼠标滚轮在 PC 上无法正常工作 在 Mac 上 Chrome 和 Safari 存在阻止本机滚动的问题，特别是，如果您的用户已激活触控板首选项：在页面之间滑动，如果您向左滚动（返回），它会打开上一页。Firefox 正在滚动 OK 拖动工作正常。

随后尝试了 v4.2.5： [https](https://github.com/cubiq/iscroll) ://github.com/cubiq/iscroll 这在桌面浏览器上似乎根本没有滚动或鼠标滚轮。拖动工作正常。

这就是我尝试初始化 iScroll 的方式：（如此处的文档中所定义：http: [//cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)）

```
<script type="application/javascript" src="iscroll.js"></script>
<script type="text/javascript">
var myScroll;
function loaded() {
myScroll = new iScroll('wrapper');
}
document.addEventListener('DOMContentLoaded', loaded, false);
</script>` 
```

下面是一个演示：

iScroll 4.1.7 [http://anything.is/iscroll4-1-7](http://anything.is/iscroll4-1-7)

iScroll 4.2.5 [http://anything.is/iscroll4-2-5](http://anything.is/iscroll4-2-5)

如果我做错了什么，或者这些是真正的问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T15:42:20.367

我真的不知道是否应该默认设置鼠标滚轮选项，但您可以尝试像这样添加它：

```
function loaded() {
    myScroll = new iScroll('wrapper', {
        wheelHorizontal: true
    });
} 
```

这是在 Chrome 上使用 iscroll 4.2.2 测试的，这意味着它可能不是完美的解决方案，但看起来确实是一个快速修复。4.2.5 应该可以了！

在这里找到了答案：[iScroll 4 水平鼠标滚轮滚动](https://stackoverflow.com/questions/12760519/iscroll-4-horizontal-mousewheel-scroll) 页面中有一个 jsFiddle 你可以看看！希望这有帮助。

# elmah - AppHarbor、Elmah 和 SendGrid

> ID：15352642
> 
> 赞同：1
> 
> 时间：2013-03-12T03:13:52.320
> 
> 标签：elmah, appharbor, sendgrid

AppHarbor 对 Elmah 和 SendGrid 有什么魔力吗？

我从这个问题[Trouble using SendGrid with appharbor](https://stackoverflow.com/questions/8968518/trouble-using-sendgrid-with-appharbor)看到 AppHarbor 做了一些配置，因此可以在没有参数的情况下初始化 SMTP 客户端。我不确定执行了什么配置以及它是否适用于 Elmah。

Elmah 在 web.config 中有一个自定义标签，但它会读取 AppHarbor 默认配置的设置吗？

编辑：如果 Elmah 默认无法读取这些设置，有没有办法在 appharbor 部署过程中使用令牌来替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:33:00.430

多亏了一些测试和这两个链接，我把所有的胶水放在一起：

[http://support.appharbor.com/kb/getting-started/managing-environments](http://support.appharbor.com/kb/getting-started/managing-environments) [http://scottonwriting.net/sowblog/archive/2009/05/21/163350.aspx](http://scottonwriting.net/sowblog/archive/2009/05/21/163350.aspx)

AppHarbor（我假设）正在将 SendGrid 变量添加到 web.config 中的 <system.net> mailSettings，Elmah 将遵循这些设置。为了更安全的配置，您可以将 useSsl="true" 标志添加到 <errorMail>

我只需要添加以下内容：

```
<elmah>
    <!-- AppHarbor clears App_Data on each deploy -->
    <errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/App_Data" />
    <errorMail from="error@a.com"
      to="admin@a.com"
      subject="Application Exception"
      async="false"
      smtpPort="0"
      useSsl="true"
    >
    </errorMail>
    <security allowRemoteAccess="true" />
</elmah> 
```

AppHarbor 和 Elmah 负责其余的工作。

# c# - windows 8 应用程序后退按钮导致导航失败

> ID：15352645
> 
> 赞同：1
> 
> 时间：2013-03-12T03:14:01.957
> 
> 标签：c#, xaml, microsoft-metro

我对开发 Windows 8 应用程序完全陌生，这将是我正在从事的第一个项目，所以请耐心等待。我从一个 gridview 模板开始，并尝试创建一个存储卡片和卡片组的类。因此，每个卡片组都是网格视图中的一个项目，通过单击卡片组，它将变为显示卡片组内容的详细视图。我的问题就在这里。当我导航到我的详细视图时，（到目前为止只显示一个标题）显示一个后退按钮，据我所知是自动处理的。但是，每当我按下后退按钮转到我的网格视图时，我都会遇到未处理的异常

```
Exception = {"Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))"} 
```

`Message = "Windows.UI.Xaml.Controls.Frame.NavigationFailed was unhandled."`

我的详细视图xaml和cs如下：

DetailPage.xaml.cs 使用 FlashcardBuddy.Data；使用系统；使用 System.Collections.Generic；使用 System.IO；使用 System.Linq；使用 Windows.Foundation；使用 Windows.Foundation.Collections；使用 Windows.UI.Xaml；使用 Windows.UI.Xaml.Controls；使用 Windows.UI.Xaml.Controls.Primitives；使用 Windows.UI.Xaml.Data；使用 Windows.UI.Xaml.Input；使用 Windows.UI.Xaml.Media；使用 Windows.UI.Xaml.Navigation；

```
// The Item Detail Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=234232

namespace FlashcardBuddy
{

    public sealed partial class ItemDetailPage : FlashcardBuddy.Common.LayoutAwarePage
    {
        public ItemDetailPage()
        {
            this.InitializeComponent();
        }

        protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
        {
            // Allow saved page state to override the initial item to display
            if (pageState != null && pageState.ContainsKey("SelectedItem"))
            {
                navigationParameter = pageState["SelectedItem"];
            }

            // TODO: Create an appropriate data model for your problem domain to replace the sample data
            var item = SampleDataSource.GetItem((String)navigationParameter);

            this.DefaultViewModel["Group"] = item;
            this.DefaultViewModel["Items"] = item.Items;
            //this.flipView.SelectedItem = item.Items[0];
        }

        protected override void SaveState(Dictionary<String, Object> pageState)
        {
            var selectedItem = (Card)this.flipView.SelectedItem;
            pageState["SelectedItem"] = selectedItem.id;
        }
    }
} 
```

DetailPage.xaml：

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    x:Class="FlashcardBuddy.ItemDetailPage"
    DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FlashcardBuddy"
    xmlns:data="using:FlashcardBuddy.Data"
    xmlns:common="using:FlashcardBuddy.Common"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>

        <!-- Collection of items displayed by this page -->
        <CollectionViewSource
            x:Name="itemsViewSource"
            Source="{Binding Items}"
            d:Source="{Binding AllGroups[0].Items[0].Items, Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}"/>
    </Page.Resources>

    <!--
        This grid acts as a root panel for the page that defines two rows:
        * Row 0 contains the back button and page title
        * Row 1 contains the rest of the page layout
    -->
    <Grid
        Style="{StaticResource LayoutRootStyle}"
        DataContext="{Binding Group}"
        d:DataContext="{Binding AllGroups[0], Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}">

        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--
            The remainder of the page is one large FlipView that displays details for
            one item at a time, allowing the user to flip through all items in the chosen
            group
        -->

        <!-- Back button and page title -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
            <TextBlock x:Name="pageTitle" Text="{Binding frontText}" Style="{StaticResource PageHeaderTextStyle}" Grid.Column="1" IsHitTestVisible="false"/>
        </Grid>
        <FlipView x:Name="flipView" HorizontalAlignment="Left" Margin="0,0,0,0" Grid.Row="1" VerticalAlignment="Top" Width="1356"/>

        <VisualStateManager.VisualStateGroups>

            <!-- Visual states reflect the application's view state -->
            <VisualStateGroup x:Name="ApplicationViewStates">
                <VisualState x:Name="FullScreenLandscape"/>
                <VisualState x:Name="Filled"/>

                <!-- The back button respects the narrower 100-pixel margin convention for portrait -->
                <VisualState x:Name="FullScreenPortrait">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!-- The back button and title have different styles when snapped -->
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</common:LayoutAwarePage> 
```

我的主页的xaml和cs如下：

GroupedItemPage.xaml.cs 使用 FlashcardBuddy.Data；

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;

// The Grouped Items Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=234231

namespace FlashcardBuddy
{
    /// <summary>
    /// A page that displays a grouped collection of items.
    /// </summary>
    public sealed partial class GroupedItemsPage : FlashcardBuddy.Common.LayoutAwarePage
    {
        public GroupedItemsPage()
        {
            this.InitializeComponent();
        }

        /// <summary>
        /// Populates the page with content passed during navigation.  Any saved state is also
        /// provided when recreating a page from a prior session.
        /// </summary>
        /// <param name="navigationParameter">The parameter value passed to
        /// <see cref="Frame.Navigate(Type, Object)"/> when this page was initially requested.
        /// </param>
        /// <param name="pageState">A dictionary of state preserved by this page during an earlier
        /// session.  This will be null the first time a page is visited.</param>
        protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
        {
            // TODO: Create an appropriate data model for your problem domain to replace the sample data
            var sampleDataGroups = SampleDataSource.GetGroups((String)navigationParameter);
            this.DefaultViewModel["Groups"] = sampleDataGroups;
        }

        /// <summary>
        /// Invoked when an item within a group is clicked.
        /// </summary>
        /// <param name="sender">The GridView (or ListView when the application is snapped)
        /// displaying the item clicked.</param>
        /// <param name="e">Event data that describes the item clicked.</param>
        void ItemView_ItemClick(object sender, ItemClickEventArgs e)
        {
            // Navigate to the appropriate destination page, configuring the new page
            // by passing required information as a navigation parameter
            var itemId = ((Deck)e.ClickedItem).id;
            this.Frame.Navigate(typeof(ItemDetailPage), itemId);
        }

        private void itemGridView_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {

        }
    }
} 
```

GroupedItemPage.xaml

```
 <Page.Resources>

        <!--
            Collection of grouped items displayed by this page, bound to a subset
            of the complete item list because items in groups cannot be virtualized
        -->
        <CollectionViewSource
            x:Name="groupedItemsViewSource"
            Source="{Binding Groups}"
            IsSourceGrouped="true"
            ItemsPath="TopItems"
            d:Source="{Binding AllGroups, Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}"/>
    </Page.Resources>

    <!--
        This grid acts as a root panel for the page that defines two rows:
        * Row 0 contains the back button and page title
        * Row 1 contains the rest of the page layout
    -->
    <Grid Style="{StaticResource LayoutRootStyle}">
        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Horizontal scrolling grid used in most view states -->
        <GridView
            x:Name="itemGridView"
            AutomationProperties.AutomationId="ItemGridView"
            AutomationProperties.Name="Grouped Items"
            Grid.RowSpan="2"
            Padding="116,137,40,46"
            ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
            ItemTemplate="{StaticResource CustomDeckTempate}"
            SelectionMode="None"
            IsSwipeEnabled="false"
            IsItemClickEnabled="True"
            ItemClick="ItemView_ItemClick" SelectionChanged="itemGridView_SelectionChanged" Margin="0,10,0,-10">

            <GridView.ItemsPanel>
                <ItemsPanelTemplate>                        
                    <VirtualizingStackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
            <GridView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid Margin="1,0,0,6">
                                <TextBlock
                                    AutomationProperties.Name="Group Title"
                                    Style="{StaticResource TextPrimaryGroupStyle}" 
                                    Text="{Binding frontText}" FontFamily="Global User Interface" FontSize="30"/>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                </GroupStyle>
            </GridView.GroupStyle>
        </GridView>

        <!-- Vertical scrolling list only used when snapped -->
        <ListView
            x:Name="itemListView"
            AutomationProperties.AutomationId="ItemListView"
            AutomationProperties.Name="Grouped Items"
            Grid.Row="1"
            Visibility="Collapsed"
            Margin="0,-10,0,0"
            Padding="10,0,0,60"
            ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
            ItemTemplate="{StaticResource Standard80ItemTemplate}"
            SelectionMode="None"
            IsSwipeEnabled="false"
            IsItemClickEnabled="True"
            ItemClick="ItemView_ItemClick">

            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid Margin="7,7,0,0">
                                <Button
                                    AutomationProperties.Name="Group Title"
                                    Style="{StaticResource TextPrimaryButtonStyle}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding frontText}" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                                        <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                </GroupStyle>
            </ListView.GroupStyle>
        </ListView>

        <!-- Back button and page title -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
            <TextBlock x:Name="pageTitle" Text="{StaticResource AppName}" Grid.Column="1" IsHitTestVisible="false" Style="{StaticResource PageHeaderTextStyle}"/>
        </Grid>

        <VisualStateManager.VisualStateGroups>

            <!-- Visual states reflect the application's view state -->
            <VisualStateGroup x:Name="ApplicationViewStates">
                <VisualState x:Name="FullScreenLandscape"/>
                <VisualState x:Name="Filled"/>

                <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
                <VisualState x:Name="FullScreenPortrait">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemGridView" Storyboard.TargetProperty="Padding">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="96,137,10,56"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>

                <!--
                    The back button and title have different styles when snapped, and the list representation is substituted
                    for the grid displayed in all other view states
                -->
                <VisualState x:Name="Snapped">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible"/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemGridView" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</common:LayoutAwarePage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T10:59:11.720

我有一个类似的问题，我意识到覆盖`OnNavigatedTo(NavigationEventArgs e)`, 而不调用基本实现是我做错了。在`LayoutAwarePage`那里做了一些重要的计算，所以错过它们会导致返回导航出现未处理的异常。

我想同样的事情也适用于`protected override void OnNavigatedFrom(NavigationEventArgs e)`.

我知道我的解决方案并不直接适用于您，但这可能会作为其他人的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:24:12.983

我想我只是不知道我在做什么。在玩了几天之后，我最终从头开始构建我的面板，而不是使用模板生成面板，并且效果很好。

# html - 中继器项目模板中的html表格宽度无法设置

> ID：15352646
> 
> 赞同：1
> 
> 时间：2013-03-12T03:14:05.970
> 
> 标签：html, asp.net, html-table, repeater

我正在尝试调整 HTML 表中作为 ASP 转发器项目持有者的列的宽度。

```
<asp:Repeater id="viewproduct" runat="server"> 
 <HeaderTemplate>
  <table id="grid">
    <thead >
       <tr>
         <th width="20px" data-field="check"></th>
         <th data-field="level">Status</th>
         <th data-field="Class">Username</th>
       </tr>
    </thead>
    <tbody>``
  </HeaderTemplate>
  <ItemTemplate>
      <tr>
      <td width="20px"><asp:CheckBox ID="CheckApprove" runat="server" Width="20px" /></td>                   
      <td><asp:Label ID="status" runat="server"
            Text='<%#DataBinder.Eval(Container.DataItem, "Status")%>'></asp:Label></td> 
      <td><asp:Label ID="name" runat="server"
            Text='<%#DataBinder.Eval(Container.DataItem, "name")%>'></asp:Label></td>
      </tr>
    </ItemTemplate>
  <FooterTemplate>
    </tbody>
    </table>
  </FooterTemplate>
</asp:Repeater> 
```

请注意，标题跟随宽度，但内容没有。为什么？这是我的桌子目前的样子：

![](../Images/f90972fbf37d26d94bceaa8b30200331.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T05:10:15.287

```
Use style tag in th and td
<asp:Repeater id="viewproduct" runat="server"> 
 <HeaderTemplate>
  <table id="grid">
    <thead >
       <tr>
         <th style="width:20px;" data-field="check"></th>
         <th data-field="level">Status</th>
         <th data-field="Class">Username</th>
       </tr>
    </thead>
    <tbody>``
  </HeaderTemplate>
  <ItemTemplate>
      <tr>
      <td style="width:20px;" ><asp:CheckBox ID="CheckApprove" runat="server" Width="20px" /></td>                   
      <td><asp:Label ID="status" runat="server"
            Text='<%#DataBinder.Eval(Container.DataItem, "Status")%>'></asp:Label></td> 
      <td><asp:Label ID="name" runat="server"
            Text='<%#DataBinder.Eval(Container.DataItem, "name")%>'></asp:Label></td>
      </tr>
    </ItemTemplate>
  <FooterTemplate>
    </tbody>
    </table>
  </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:03:07.683

把`style="width:20px;"`代替 `width="20px"`

# c++ - 重载“<<”运算符的问题

> ID：15352656
> 
> 赞同：2
> 
> 时间：2013-03-12T03:15:44.720
> 
> 标签：c++, string, class, operators, operator-overloading

创建一个自定义 String 类，我在重载 '<<' 运算符以进行输出时遇到问题。我尝试了几种不同的编写方式（在下面的代码中注释掉，以供参考，因为它们不起作用），并得到各种错误。对于初学者，我从下面的代码中得到的错误是：

错误 1：错误 C2804：二进制 'operator <<' 参数过多 第 53 行

错误 2: 错误 C2333: 'String::operator <<' : 函数声明错误；跳过函数体第 53 行

错误 3：错误 C2679：二进制“<<”：未找到采用“字符串”类型右侧操作数的运算符（或没有可接受的转换）第 180 行（有一堆）

由于该文件超过 300 行，而且我怀疑你们是否需要通读它，我会--snip-- 其中一些，但如果您想要 300 行，我一定会编辑它。

另外，我知道标头中的“使用命名空间标准”是不好的做法。抱歉，这是我正在使用的旧文件，我保证不会将它包含在以后的头文件中。

也就是说，这是代码（非常感谢您的帮助）：

正如我之前所说，非常感谢下面阅读和回复的人。我花了将近两个小时试图找到一个可行的解决方案，而我搜索的帖子要么太复杂，我无法理解，要么不适用于我的案例。通过查看 cplusplus 网站，我看到 << 运算符函数只接受一个参数，但是在使其工作时遇到了问题。如果你们发布您认为可行的内容，我会尝试并回复。

谢谢大家！如果我遗漏任何重要信息，请告诉我。

```
#pragma once

#include <iostream>
#include <sstream>
using namespace std;

#define NOT_FOUND -1

//ostream& operator << (ostream& out, const String& myString);

// C++ String class that encapsulates an ASCII C-string
class String
{
public:
    // Default constructor
    String()
    {
        Text = NULL;
    }

    // MUST HAVE: Copy-constructor that performs deep copy
    String(const String& source)
    {
        Text = NULL;
        // Call the assignment operator to perform deep copy
        *this = source;
    }

    // Init-constructor to initialize this String with a C-string
    String(const char* text)
    {
        Text = NULL;
        // Call the assignment operator to perform deep copy
        *this = text;
    }

    // Init constructor, allocates this String to hold the size characters
    String(int size)
    {
        Text = new char[size];
    }

    // Destructor
    ~String()
    {
        delete[] Text;
    }

    // This is what I would love to have work.
    ostream& operator << (ostream& out, const String& myString)
    {
        return out << myString.GetText();
    }
    // Returns a new string that corresponds to a substring of this String
// beginning at startPosition and length chars long;
// if length = 0 (not specified) then the substring spans from
// startPosition until the end of this String
// throws an exception when startPosition is out of bounds
String Substring(int startPosition, int length) const
{
    char * str = this->GetText();
    String returnString;
    int strLength = length;
    int x = 0;

    if(length == 0)
        strLength = GetLength(str)-startPosition;

    char* substring = new char[strLength];

    // Makes sure the starting position is within the bounds of the String 'this'
    try
    {
        CheckBounds(startPosition, str);
    }
    catch(char * error)
    {
        cout << error << endl << endl;
    }

    // In case the substring length is too long, it cuts short once it reaches the end of the original string. Yu-San, this is #2 on the three options you said I could implement, FYI.
    while(x < strLength && str[x+startPosition]!='\0')
    {
        substring[x] = str[x + startPosition];
        x++;
    }
    substring[x]='\0';
    //for(int x = 0; x<strLength; x++)
    //{
    //returnString = str + startPosition;
    returnString = substring;
    //}

    return returnString;    
}
    // Assignment operator to perform deep copy
    String& operator = (const char* text)
    {
        // Ddispose of old Text
        delete[] Text;

        // +1 accounts for NULL-terminator
        int trueLength = GetLength(text) + 1;

        // Dynamically allocate characters on heap
        Text = new char[trueLength];

        // Copy all characters from source to Text; +1 accounts for NULL-terminator
        for ( int i = 0; i < trueLength; i++ )
            Text[i] = text[i];

        return *this;
    }

    // Returns the count of characters in a C-string text; NULL-terminator is not counted
    // static means that the member function neither reads nor
    // writes any of the class' data members
    // String::GetLength("blah");
    static int GetLength(const char* text)
    {
        int x = 0;
        while(text[x] != '\0')
            x++;

        return x;
    }

    // Returns a reference to a single character from this String
    char& operator [] (int index) const
    {
        int length = GetLength();

        // Check for valid index
        if ( (index < 0) || (index > length) )
        {
            stringstream error;
            error << "operator[] - index " << index << " is out of bounds (0.." << (length - 1) << ")";
            throw String(error.str().c_str());
        }

        return Text[index];
    }
// Returns the count of characters in the String; NULL-terminator is not counted
int GetLength() const
{
    return GetLength(Text);
}

char* GetText() const
{
    return Text;
}

// Finds first index of a symbol not found in "text" in string *this
int FindFirstNotOf(char * text)
{
    String objectString(*this);
    int x = 0; // loop counter
    int firstIndex = 0; // index to return

    while(text[x]!='\0')
    {
        // runs each character in 'text' against each character in the object.
        for(int y = 0; y<objectString.GetLength(); y++)
        {
            if(objectString[x] == text[x])
                objectString[x] = '\0';
        }

        x++;
    }

    while(objectString[firstIndex]=='\0' && (firstIndex<objectString.GetLength()))
    {
        firstIndex++; //keeps running until it Finds a character that wasn't changed to \0
    }

    if(firstIndex == objectString.GetLength())
        firstIndex = -1; // means it wasn't found.

    return firstIndex;
}

int FindFirstOf(char iWantThis)
{
    String objectString(*this);
    int firstIndex = 0; // index to return

    while(objectString[firstIndex]!=iWantThis && (firstIndex<objectString.GetLength()))
    {
        firstIndex++; //keeps running until it Finds a character that wasn't changed to \0
    }

    if(firstIndex == objectString.GetLength())
        firstIndex = -1; // means it wasn't found.

    return firstIndex;
}

int FindLastOf(char iWantThis)
{
    String objectString(*this);
    int index = 0;
    int lastIndex = -1;

    while(objectString[index]!='\0')
    {
        if(objectString[index] == iWantThis)
            lastIndex = index;
    }

    return lastIndex;
}

// finds a desired char in String object, with default start index of 0
int Find (char iWantThis, int startIndex = 0)
{
    int index = -1;
    int ctr = startIndex;

    String objectString(*this);

    while(objectString[ctr]!='\0' && index == -1) // runs until it reaches end, or the return index is changed
    {
        if(objectString[ctr] == iWantThis)
            index = ctr;
        else
            ctr++;
    }

    return index;
}

private:

// Throws an String-type exception when index is out of bounds
void CheckBounds(int index, const char* source) const
{
    int size = GetLength(source);

    if(index < 0 && index >=size)
        throw "Selected Starting Index is Out of Bounds.";  
}

// The encapsulated C-string
char* Text;
};

// Stream output operator to print String to output stream
/* ostream& operator << (ostream& out, const String& myString)
 * {
 *  return out << myString.GetText();
 * };
 */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:25:40.500

您需要一个插入运算符才能成为自由函数：

***在***您的班级内部：

```
class String
{
   friend std::stream& operator <<(std::ostream&, const String&);
   ...
}; 
```

***在您的班级之外***：

```
inline std::ostream& operator << (std::ostream& os, const String& myString)
{
    os << myString.GetText();
    return os;
} 
```

这假设`GetText()`是一个可行的成员函数，在您当前的代码片段中找不到它。我假设你在某个地方有一个。如果是，`public`则无需在类体中声明友元关系，只需使用自由函数插入操作符即可。

最后，这假设运算符是在头文件中实现的（因此是内联的）。如果将实现移至 .cpp 文件，请务必在标头中将其声明为全局原型，*并*删除`inline`.cpp 实现中的前导。

旁注：打破立即放入`using namespace std;`头文件*的*习惯。这是一种不好的做法，并且可能会对源文件（包括您的标头）产生不必要的副作用，而这些副作用不会被命名空间暴露。

# grails - 在 Groovy 中，如何从嵌套 Map 中删除属性？

> ID：15352658
> 
> 赞同：2
> 
> 时间：2013-03-12T03:15:52.863
> 
> 标签：grails, map, groovy

我正在 Grails 中编写一个测试，以确保来自客户端的传入 JSON 包含所有必需的字段。地图看起来像：

```
def map = [
    customer: [
        firstName: 'John',
        lastName: 'Doe',
        id: '123',
    ],
    orderNumber: '123456',
    paymentInfo: [
        type: 'paypal',
        amount: '1200',
        currency: 'USD'
    ]
] 
```

所以换句话说，`customer`和`paymentInfo`键是映射本身与子键。

在我的测试中，我想删除每个键和子键以确保输入验证正常工作。我做了这样的事情：

```
// test 1
map.remove('orderNumber')
def result = service.performAction(map)
assert result == ServiceCall.ValidationError

// test 2
map.remove('customer.firstName')
def result = service.performAction(map)
assert result == ServiceCall.ValidationError 
```

测试 1 正常工作并正确删除了`orderNumber`密钥，但测试 2 没有删除`firstName`子密钥。我知道我可以使用`map.customer.remove(firstName)`它并且它会正确删除子键，但是我试图使测试足够通用，以便我只需要传入一个字符串数组，它们的键和子键将被正确删除，例如：

```
def array = ['orderNumber', 'customer.firstName', 'customer.lastName', etc...]

array.each {
    map.remove(it)
    def result = service.performAction(map)
    assert result == ServiceCall.ValidationError
} 
```

是否可以通过这种方式删除子项，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:22:20.337

不幸的是，'customer.firstName' 不是顶级地图的键，所以它不起作用。相反，您可以做一些事情来解析您传入的键。

试试这个？

```
array.each {
   def levels = it.tokenize('.')
   if ( levels.size() == 1 ) {
      map.remove(levels[0])
   } else if ( level.size() == 2 ) {
      map.get(levels[0]).remove(levels[1])
   } // else etc.
   def result = service.performAction(map)
   assert result == ServiceCall.ValidationError
} 
```

请注意，我在深度方面做了这个非常非通用的......您可以轻松编写一个通用函数来删除第 n 级地图属性。但是如果你知道你只需要深入 2 甚至 3 层，那么这样的事情应该可以正常工作，而无需一堆难以阅读的通用代码。

如果您绝对想让它适用于任意深度的子地图，请执行以下操作：

```
array.each {
   def levels = it.tokenize('.')
   if ( levels.size() == 1 ) {
      map.remove(levels[0])
   } else  {
      def ref = map
      levels[0..-2].each {
          ref = ref[it]
      }
      ref.remove(levels[-1])
   }
   def result = service.performAction(map)
   assert result == ServiceCall.ValidationError
} 
```

我确实注意到您的“地图”在测试之间没有恢复......您的原始测试也没有这样做，所以我的代码表现相同。

# python - 下载并解压内存中的gzip压缩文件？

> ID：15352668
> 
> 赞同：40
> 
> 时间：2013-03-12T03:16:58.933
> 
> 标签：python, file, gzip, urllib2, stringio

我想使用 urllib 下载一个文件并在保存之前解压缩内存中的文件。

这就是我现在所拥有的：

```
response = urllib2.urlopen(baseURL + filename)
compressedFile = StringIO.StringIO()
compressedFile.write(response.read())
decompressedFile = gzip.GzipFile(fileobj=compressedFile, mode='rb')
outfile = open(outFilePath, 'w')
outfile.write(decompressedFile.read()) 
```

这最终会写入空文件。我怎样才能实现我所追求的？

**更新答案：**

```
#! /usr/bin/env python2
import urllib2
import StringIO
import gzip

baseURL = "https://www.kernel.org/pub/linux/docs/man-pages/"        
# check filename: it may change over time, due to new updates
filename = "man-pages-5.00.tar.gz" 
outFilePath = filename[:-3]

response = urllib2.urlopen(baseURL + filename)
compressedFile = StringIO.StringIO(response.read())
decompressedFile = gzip.GzipFile(fileobj=compressedFile)

with open(outFilePath, 'w') as outfile:
    outfile.write(decompressedFile.read()) 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-12T04:25:24.957

您需要`compressedFile`在写入之后但在将其传递给`gzip.GzipFile()`. 否则它将被`gzip`模块从末尾读取，并显示为一个空文件。见下文：

```
#! /usr/bin/env python
import urllib2
import StringIO
import gzip

baseURL = "https://www.kernel.org/pub/linux/docs/man-pages/"
filename = "man-pages-3.34.tar.gz"
outFilePath = "man-pages-3.34.tar"

response = urllib2.urlopen(baseURL + filename)
compressedFile = StringIO.StringIO()
compressedFile.write(response.read())
#
# Set the file's current position to the beginning
# of the file so that gzip.GzipFile can read
# its contents from the top.
#
compressedFile.seek(0)

decompressedFile = gzip.GzipFile(fileobj=compressedFile, mode='rb')

with open(outFilePath, 'w') as outfile:
    outfile.write(decompressedFile.read()) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-09T15:03:14.883

对于那些使用 Python 3 的人来说，等价的答案是：

```
import urllib.request
import io
import gzip

response = urllib.request.urlopen(FILE_URL)
compressed_file = io.BytesIO(response.read())
decompressed_file = gzip.GzipFile(fileobj=compressed_file)

with open(OUTFILE_PATH, 'wb') as outfile:
    outfile.write(decompressed_file.read()) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-05T18:41:33.753

如果你有 Python 3.2 或更高版本，生活会容易得多：

```
#!/usr/bin/env python3
import gzip
import urllib.request

baseURL = "https://www.kernel.org/pub/linux/docs/man-pages/"
filename = "man-pages-4.03.tar.gz"
outFilePath = filename[:-3]

response = urllib.request.urlopen(baseURL + filename)
with open(outFilePath, 'wb') as outfile:
    outfile.write(gzip.decompress(response.read())) 
```

对于那些对历史感兴趣的人，请参阅[https://bugs.python.org/issue3488](https://bugs.python.org/issue3488)和[https://hg.python.org/cpython/rev/3fa0a9553402](https://hg.python.org/cpython/rev/3fa0a9553402)。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-03-02T11:54:54.727

**一行代码打印解压后的文件内容：**

```
print gzip.GzipFile(fileobj=StringIO.StringIO(urllib2.urlopen(DOWNLOAD_LINK).read()), mode='rb').read() 
```

# linux-kernel - 在 LKML 中，tipbot 是什么意思？

> ID：15352669
> 
> 赞同：5
> 
> 时间：2013-03-12T03:17:03.817
> 
> 标签：linux-kernel

我经常`tip-bot for XXX`在 LKML（Linux Kernel Mail List）中看到。此类邮件通常由 commit 组成。

我四处搜寻，仍然找不到“tip-bot”的含义。谁能帮忙解释一下？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T03:36:13.547

`tip-bot``LKML`是一个自动脚本，当某个代码或补丁进入由 Peter Anvin、Thomas Gleixner 和 Ingo Molnar 维护的少数分支时，它会通知（linux 内核邮件列表）。我认为 是`tip`指`tip trees`.

# ios6 - 用于 Objective-C 自动引用计数 (ARC) 的 vuforia

> ID：15352670
> 
> 赞同：0
> 
> 时间：2013-03-12T03:17:06.403
> 
> 标签：ios6

我有一个关于 iOS 生成 vuforia sdk 的特定问题，因为这个 sdk 有示例应用程序，我想将其示例应用程序集成到我现有的基于 ARC 开发的应用程序中，自动引用计数 (ARC) 引起了问题。

和 vuforia sdk 及其示例应用程序是基于非 ARC 开发的。

您能给我任何建议或解决方案，将您的示例应用程序转换为 ARC 的一个版本吗？

我试图修改并保持声明摆脱“释放”或“自动释放”术语，问题仍未解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T09:41:52.130

你必须：

将 Vuforia SDK 添加到现有应用程序。

将 ARCommon 文件夹添加到您的源。

链接到包含标头（例如 ../vuforia/build/include）

链接到库路径（例如 ../vuforia/build/lib/arm）

在目标的构建阶段将 libQcar 添加到链接库。

**在包含的文件上禁用 ARC**，以便他们可以使用保留/释放。（项目：转到构建阶段>编译源并设置编译器标志“-fno-objc-arc”）

将引用 QcarUtils.h 的文件更改为 .mm 文件。

# python - django南迁移问题

> ID：15352674
> 
> 赞同：0
> 
> 时间：2013-03-12T03:17:18.053
> 
> 标签：python, django, migration, django-south

我真的被困在这里。我有一个模型，直到现在我都可以很好地迁移。但是今天我添加了新字段，然后我做了`schemamigration app --auto`，然后它找到了新添加的字段，但是当我运行时`migrate app`，它说该字段`newfield`不存在。我不明白为什么。我取消注释并尝试架构迁移并再次迁移，它现在吐出同样的错误。我做错了什么，我现在该怎么办？我想对这种情况有一个固定的步骤:(

感谢帮助

编辑：

```
class User(models.Model):
  registerdate = models.CharField(max_length=400,default='')
  vorname = models.CharField(max_length=100,default='')
  nachname = models.CharField(max_length=100,default='')
  plz = models.CharField(max_length=10,default='')  <------------- this field i added
  land = models.CharField(max_length=100,default='') 
```

错误说：

`the following sql statement failed: ALTER TABLE home_user DROP COLUMN plz CASCADE;`

但是现在，我没有注释这个字段，如果我尝试迁移，它会说：`PLZ`关`USER`系列不存在。为什么是这样？:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:47:04.833

> 我取消注释并尝试架构迁移并再次迁移，它现在吐出同样的错误。

您是否在添加新字段后删除了您创建的迁移？如果不是，则运行 migrate 将继续尝试运行此迁移。既然你说它第一次运行失败，除非它被更正或删除，否则它将一直运行失败。

如果第一次迁移确实无法运行，您可以尝试删除它（以及您可能创建的任何后续迁移），然后重新创建它。

不过，在尝试之前，发布运行 migrate 时遇到的错误的更完整的回溯会很有帮助。您可能在南认为的数据库状态与实际情况之间存在不匹配，但如果没有更多信息，很难确定。

# javascript - JavaScript 中的属性名称

> ID：15352678
> 
> 赞同：0
> 
> 时间：2013-03-12T03:17:50.103
> 
> 标签：javascript, object, literals, string-literals

我有一个问题一直困扰着我很长一段时间，我似乎找不到任何涵盖该主题的资源。JavaScript 中的属性名称如何是字符串文字或数字文字？

```
var obj = {
    "bar": "foobar",
    "foo": function() { return bar; }
} 
```

自从我几年前了解这个话题以来，这个话题就一直困扰着我。我不知道在哪里可以获得更深入的信息，或者这甚至叫什么。我不知道这是如何设置的，因为我知道正在使用成员 bar 和 foo 创建一个新对象，然后将其分配给 obj 变量。

您不能创建像 var "bar" = "foobar"; 这样的变量。因为你会得到一个语法错误。它对对象字面量如何有效？对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T03:22:21.017

在 JavaScript 中，属性名称是*字符串*值 - 任何*字符串*值。这就是指定语言的方式。

相关制作：

```
PropertyName :  
    IdentifierName
    StringLiteral
    NumericLiteral 
```

如果提供了标识符或数字文字，则将其转换为字符串值 (SV)。

见：[http ://ecma-international.org/ecma-262/5.1/#sec-11.1.5](http://ecma-international.org/ecma-262/5.1/#sec-11.1.5)

因此，例如：

```
var obj = {
    foo: true, // the name of this property becomes 'foo'
    'bar': true, // the name of this property becomes 'bar'
    123: true // the name of this property becomes '123'
}; 
```

* * *

您甚至可以使用空字符串作为属性名称：

```
var obj = {
    '': 'foo'
};

obj[''] // 'foo' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T03:21:39.713

JavaScript 对象字面量是 hashmap 实现：即键值对。键可以用引号或不带引号表示。

也就是说，如果您想以字符串的形式访问属性，请使用以下语法：

`obj[str]`

但是如果你想通过它的名字访问一个属性，你可以使用

`obj.name`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T03:35:07.370

您使用的对象文字语法[只是 JavaScript 语法的一部分](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)。您可以使用数字或字符串文字作为属性名称，也可以使用任何有效的变量名称作为属性名称。请注意，无效的变量名称必须用引号括起来，但仍然可以是属性名称（数字文字除外）。

也就是说，您可以将`obj = {'"': value}`（即引号）作为有效的对象属性名称。但是，如果您在此处省略撇号，则会出现语法错误。

`{nameWithoutQuotes: "value"}`为方便起见，据我所知，允许使用例如变量名语法。它没有特殊含义，并被视为字符串文字属性名称。在对象字面量定义中到处都有看起来很奇怪`"`，并且在使用类似的访问器语法时也很有意义。例如：

```
obj = {"with quotes": "q", withoutQuotes: "x"};
obj["with quotes"];
obj.withoutQuotes; 
```

请注意，使用需要引号的属性名称的访问方法也需要引号，而当不需要引号时，可以在没有它们的情况下进行访问。

至于为什么`"obj" = "string"`不允许，除了它是无效的语法之外，那是因为`"obj"`字面量没有在内存中创建可以分配的引用。该`obj = {}`符号创建一个存储在其中的引用，`obj`并为其每个属性分配内存，如字面语法所述。你可以就`obj = "string";`

* * *

不能从属性名称的[JSON](http://json.org/)字符串中省略引号也可能一文不值。许多解析器不允许这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T03:22:53.867

为了看到它是绝对有效的，你只需要记住对象是关联数组，即

```
 foo.bar === foo['bar'] 
```

在这种情况下，关联数组的键是任何字符串。

# matlab - 在 Matlab 中解释 1 - 3*(4/3 - 1) = 2.2204e-16

> ID：15352699
> 
> 赞同：0
> 
> 时间：2013-03-12T03:20:18.053
> 
> 标签：matlab, floating-point, floating-accuracy, ieee-754, double-precision

我试图理解[Matlab](http://www.mathworks.se/help/matlab/matlab_prog/floating-point-numbers.html)中的双精度数。为什么这个 1 - 3*(4/3 - 1) 不等于零？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:59:23.550

实数 4/3 不能以双精度（或任何其他二进制浮点格式）表示，因为它不是二元有理数。因此，当您`4/3`在 MATLAB 中进行计算时，您得到的值会*四舍五入*为最接近的可表示双精度数，即：

```
1.3333333333333332593184650249895639717578887939453125 
```

从这个值中减去 1 是精确的（众所周知的 FP 误差分析定理，即在一个因子为 2 的范围内的数字相减是精确的），所以结果`4/3 - 1`是：

```
0.3333333333333332593184650249895639717578887939453125 
```

碰巧这个数字乘以三的结果也可以精确表示：

```
0.9999999999999997779553950749686919152736663818359375 
```

最后，从 1.0 中减去也是准确的（根据我之前引用的定理）：

```
0.0000000000000002220446049250313080847263336181640625 
```

因此，您的计算中只有一个舍入误差源，因为 4/3 不能表示为双精度数，并且计算的最终结果只是初始误差结转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:36:25.127

在科学计算器上运行它 - log [2] (2.2204e-16) - 产生（几乎）正好 -52。换句话说，Matlab 将 52 位精度存储在 a`double`中，另外 5 位用于指数（4 + 符号），1 位用于有效数的符号。这符合 IEEE 754 实现：53 位用于有效位（52 + 符号），5 位用于指数。一切都很好！与往常一样，您应该测试两个浮点数是否足够接近，而不是它们是否完全相等。Matlab 中的一个适当示例如下所示：

```
if abs(x - y) < 1e-15
      % Some code to execute when x and y are approximately equal
else
      % Some other code
end 
```

遵守 IEEE 754 的声明来自[维基百科文章](http://en.wikipedia.org/wiki/Floating_point)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:53:26.367

麻烦从计算开始`4/3`。确切的答案既不能用有限的十进制数字表示，也不能用有限的位数表示。结果将存储为`4/3+r`其中 r 是一个小的绝对值有符号数，表示 4/3 的实际值与最接近 4/3 的 IEEE 754 64 位二进制浮点数之间的差异，即舍入误差。

减去 1 的结果`1/3+r`。乘以 3 得到`1+3r`。从 1 中减去它得到`-3r`.

最终结果是 4/3 的原始表示中舍入误差的 -3 倍。

# session - linux-PAM 会话是否与 linux 进程会话相同？

> ID：15352700
> 
> 赞同：2
> 
> 时间：2013-03-12T03:20:25.893
> 
> 标签：session, pam

我们都知道 linux 系统调用 setsid() 允许我们在任何时候创建一个新的会话，虽然典型的做法是当我们登录或者当我们想要启动一个新的守护进程时。而且我注意到linux-PAM（可插入身份验证模块）也有“会话管理”的概念，所以我的问题是：Linux PAM中的会话与setsid（）创建的会话相同吗？在 linux PAM 会话中通常可以做什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T06:24:22.137

简短的回答是否定的，它们是不同的东西，但是处理登录会话的进程应该同时处理它们。

PAM 会话是 libpam 内部的一个概念。简而言之，当使用 PAM 的应用程序启动时，它会调用`pam_start`然后调用一个或多个 PAM 函数，这些函数又由 libpam 分派到 PAM 模块。其中两个调用是`pam_open_session`和`pam_close_session`。

PAM 会话的目标是处理（通常是交互式的，但不一定是）登录会话的设置和拆卸。因此，会话组中配置的 PAM 模块通常会执行以下操作，例如将用户添加到 utmp、设置任何每次登录环境（例如，如果配置了这样的东西，则为本地 tmpdir）、存储 Kerberos 凭据等。在会话关闭时，他们将撤消这些更改。

请注意，这意味着调用的进程必须`pam_open_session`保留登录会话的长度，以便它可以`pam_close_session`在结束时调用。没有什么魔法可以让这一切发生。

`setsid`是低得多的东西。 `setsid`与进程组大致处于同一级别，进程组是通常连接到 tty（控制终端）的相关进程组。这样做的目的主要是用于 shell 会话管理：您的会话是在您关闭 shell 时通常应该接收 SIGHUP 的所有进程，您可能希望通过进程管理（例如挂起和继续）进行管理，等等。您的 shell 会话组中的所有进程都有一个设置为伪 tty 的控制终端，这对进程控制和信号处理具有各种低级含义。

# python - Argparse：如何接受具有不同“类型”的参数

> ID：15352701
> 
> 赞同：7
> 
> 时间：2013-03-12T03:20:41.673
> 
> 标签：python, argparse, python-3.3

我想接受以下风格的参数：

```
python3 test.py -r SERVICE=100,101,102 -r SERVICE2=1,2,3,4,5 
(-r REPO=REV#,REV#,etc... -r etc...) 
```

到目前为止，我已经完成了以下操作（添加了参数 -r 并定义了类型 revs）。它应该传回两个列表，这可能有问题。

```
import argparse

def revs(s):
    try:            
        REPO, REVISIONS = map(str, s.split('='))
        REVISIONS = map(int, REVISIONS.split(','))
        return REPO, REVISIONS
    except:
        raise argparse.ArgumentTypeError("Must be format -r REPO=REV,REV,etc.. e.g. SERVICES=181449,181447") 

parser.add_argument('-r', type='revs', nargs='*', action='append', help='Revisions to update. The list is prefixed with the name of the source repository and a "=" sign. This parameter can be used multiple times.', required=True) 
```

使用上述运行时出现以下错误：

```
Traceback (most recent call last):
File "test.py", line 11, in <module>
parser.add_argument('-r', type='revs', nargs='*', action='append', help='Revisions to update. The list is prefixed with the name of the source repository and a "=" sign. This parameter can be used multiple times.', required=True)
File "/usr/local/lib/python3.3/argparse.py", line 1317, in add_argument
raise ValueError('%r is not callable' % (type_func,)) 
```

ValueError：“revs”不可调用

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-12T03:22:57.037

你要

```
parser.add_argument('-r', type=revs, ...) 
```

不是

```
parser.add_argument('-r', type='revs', ...) 
```

参数必须是可`type`调用对象——因为字符串不可调用，它们不能用作`type`.

# php - 对从多个表中提取多行感到困惑

> ID：15352702
> 
> 赞同：0
> 
> 时间：2013-03-12T03:20:50.750
> 
> 标签：php

我正在尝试为每个班级注册的学生创建可打印的考勤表，但由于变量太多，我遇到了问题。

当父母为孩子注册时：父母信息存储在表中：parents2 学生信息存储在表中：students2 注册信息存储在表中：enrollment2 并且班级信息在表中：courses2 （仅供参考：我必须命名所有表最后加上“2”，这样我就不会与当前站点数据冲突。我正在重写站点。）

每个课程都可以在 4 个不同的时间段进行，s1_AM（会话 1：AM）、s1_PM、s2_AM 和 s2_PM

我无法发布布局链接，因为该网站受密码保护，但基本上我想要的是 4 列，学生姓名如下：

```
<h1>'.$title.'</h1>
<ul>
    <li class="row"><p>S1 - AM</p>'.$s1_AM.'</li>
    <li class="row"><p>S1 - PM</p>'.$s1_PM.'</li>
    <li class="row"><p>S2 - AM</p>'.$s2_AM.'</li>
    <li class="row"><p>S2 - PM</p>'.$s2_PM.'</li>
</ul> 
```

这是我的想法，它没有正确显示学生的行：

```
$id = $_GET['id'];
$query = 'SELECT * FROM enrollment2 where s1_AM = '.$id.' or s1_PM = '.$id.' or s2_AM = '.$id.' or s2_PM = '.$id;
$result = mysql_query($query);
$numrows = mysql_num_rows($result);
for($x = 0; $row = mysql_fetch_array($result); $x++) {

    $s1_AM .= $row['s1_AM'];
    $s1_PM .= $row['s1_PM'];
    $s2_AM .= $row['s2_AM'];
    $s2_PM .= $row['s2_PM'];

    $query2 = 'SELECT title FROM courses2 where id = '.$id;
    $result2 = mysql_query($query2); 
    $numrows2 = mysql_num_rows($result2); 
    for($x = 0; $row2 = mysql_fetch_array($result2); $x++) {

          $title = $row2['title'];

}} 
```

# c++ - 将二维字符串数组传递给c ++中的函数

> ID：15352703
> 
> 赞同：1
> 
> 时间：2013-03-12T03:21:02.787
> 
> 标签：c++, c, string, multidimensional-array

我正在尝试将二维和单维字符串数组传递给函数，但它不起作用。

我的数组是：

```
 string 2Darray[100][100];
    String 1Darray[100]; 
```

现在的功能：

```
 void check(string temp2D[100][100], string temp1D[100]); 
```

当我调用它时：

```
 check(2Darray,1Darray); 
```

我已经尝试过其他方式，但它们都不起作用。提前感谢您的任何答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:29:00.847

您可以更改为接受引用：

```
void check(string (&temp2D)[100][100], string (&temp1D)[100]); 
```

或指针：

```
void check(std::string temp2D[][100], std::string temp1D[]){} 
```

这与以下相同，只是语法不同：

```
void check(std::string (*temp2D)[100], std::string* temp1D){} 
```

此外，您不能以数字、`2Darray`等开头变量名是编译器错误。

这是一个完整的工作示例：

```
#include <string>

void check(std::string (&temp2D)[100][100], std::string (&temp1D)[100]){}

int main()
{
    std::string twoDarray[100][100];
    std::string oneDarray[100];
    check(twoDarray,oneDarray);
} 
```

# java - Java hibernate 从表中选择多行并将结果分配到列表中

> ID：15352706
> 
> 赞同：3
> 
> 时间：2013-03-12T03:21:32.547
> 
> 标签：java, hibernate, row

我想从表中选择多行/记录，然后将结果放入“变量”中。然后我想打印每一行的内容。

如果我在 Java 中使用休眠，我该怎么做？

例如，我有一个学生表，我想获取表的所有行。我知道每一行都是表/实体类/bean的一个实例。（假设我有一个实体 class-student ）

该表就像（假设我在数据库中有一个包含数据的表）：

表名： sutdent

有四列

id、lname、fname、性别

我记得我可以做类似的事情：

```
List<student> stlist=HibernateUtil.getSession().createQuery("select*from student").list();

//here I want to print the lname of the first row/object
System.out.println(stlist.get(0).getLname();); 
```

为什么我收到错误消息“unexpectesd token *”？

我不能使用 * ？如果我不能使用 *，如果我想获取记录的所有内容（所有属性/列），我该怎么办？

还是有其他错误？我该做什么？谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T03:44:51.683

```
You can do it by two ways.

1\. HQL query
2\. SQL query

1\. HQL Query

- you are using hibernate that means you have done mapping to Student table and Student class.
 you just need to change following line.

List<student> stlist=HibernateUtil.getSession().createQuery("from student").list();

and you will get all records from Student table.

2\. SQL Query

- you can do by providing SQL query

     List<Object> stlist=HibernateUtil.getSession().createSQLQuery("select * from student").list();

you will get all records as Object so you need to manually cast to Student. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T03:41:28.387

在 HQL 中，这是您编写查询以获取所有对象列表的方式：-

```
List<student> stlist = HibernateUtil.getSession().createQuery("select s from student s").list(); 
```

如果您想获取所有列，甚至允许这样做。

```
List<student> stlist = HibernateUtil.getSession().createQuery("from student s").list(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:57:19.227

上面放了很多例子。这是一些正确的，只是你可以遵循这个。我认为这对您的要求有好处。

首先你可以打开会话：

`Session session = HibernateUtil.getSessionFactory().openSession();`

如果您已经在 util 中打开了会话，则可以按照以下步骤操作：

`Session session = HibernateUtil.getCurrentSession();`

如果您想从数据库表中获取记录，请尝试以下简单查询：

`List<Object> slist = session.createQuery("from Student").list();`

在这里，Hibernate Query Language (HQL) 消除了程序员的负担。无需在此处编写整个查询。

在这里你可以记住一件事。表名的第一个字母必须是大写字母，否则有时会引发异常。

# ruby-on-rails - Destroy_all 方法使用混乱

> ID：15352707
> 
> 赞同：0
> 
> 时间：2013-03-12T03:21:33.733
> 
> 标签：ruby-on-rails, ruby

我正在学习 ruby​​，并且正在研究在 ruby​​ 脚本中使用活动记录的代码库。我不明白在 puts 命令之后的 .collect 语句中使用“&”：“删除已终止的员工”。Terminated_ids 是什么样的数据结构？

destroy_all 方法可以采用这种数据结构吗？不知道那个奇怪的＆符号的收集命令是什么？

我想也使用 destory_all 终止员工 ID 列表。但我的数据结构是如下哈希：`[{:emp_id=> "2637"},{:emp_id=> "2637"},{:emp_id=> "2637"},{:emp_id=> "2637"}]`

请指教一个ruby noob..谢谢！

```
class  Maker < ActiveRecord::Base
  host = 'superman.com'
  port = 2000
  sid  = 'ASID'

Maker.establish_connection(
    :adapter  => 'oracle_enhanced',
    :database => "someDB",
    :username => 'user',
    :password => 'passer'
  )
  set_table_name 'WORK.EMPS'
end

puts 'removing terminated employees'
Terminated_ids = Maker.where('term_date IS NOT NULL').collect(&:emp_id) # ???
OtherModel.destroy_all(:emp_id => Terminated_ids)

puts 'removing employees who have been deleted'
OtherModel.find_each do |othermodel|
  if othermodel.email[-12,12] != '@ahsmsweh.com' #do not remove employees with an @ahsmsweh.com email
    pbx_record = Maker.find_by_emp_id(othermodel.emp_id)
    if pbx_record.nil?
      puts "destroying missing record for #{othermodel.email}"
      othermodel.destroy
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:31:22.307

这是一条捷径：

```
enumerable.collect(symbol.to_proc) 
```

其行为与以下内容相同：

```
enumerable.collect {|element| element.send(symbol)} 
```

或者，在您的具体情况下：

```
Maker.where('term_date IS NOT NULL').collect {|m| m.emp_id} 
```

这会产生一个`emp_id`s 数组（我假设是整数）。

当`destroy_all`传递一个包含`:emp_id =>`（整数数组）的映射时，它基本上使用结果集上的`where`then 调用来搜索所有记录：`destroy_all`

```
where(:emp_id => [...]).destroy_all 
```

对于包含 的哈希数组`[{:emp_id=> "123"},{:emp_id=> "456"}, ...]`，您可以使用相同的技术来“折叠”它们：

```
a = [{:emp_id=> "123"},{:emp_id=> "456"}, ...]

OtherModel.destroy_all(:emp_id => a.map(&:values).(&:first)) 
```

当然，虽然可读，但我更喜欢更直接的：

```
OtherModel.destroy_all(:emp_id => a.map {|h| h[:emp_id]}) 
```

# matlab - 在 Matlab 中，如何在不创建任何新变量的情况下捕获数组子集的特定列的平均值作为输出？

> ID：15352714
> 
> 赞同：0
> 
> 时间：2013-03-12T03:22:08.363
> 
> 标签：matlab

所以我想找到这个数组第三列的平均值，而不必创建一个全新的变量。

我可以试试`mean(seals(seals(:,3,1) < 10,:,1))`，它输出一个`1X5`向量。但是有没有一种方法可以捕获向量的第三列`1X5`而无需创建一个全新的变量？

![在此处输入图像描述](../Images/d0e132f033b4f87e04a5c1fca05459aa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:54:08.693

如果我正确理解你想要什么，下面的代码应该可以完成这项工作

```
mean(seals(seals(:,3,1) < 10,3,1)) 
```

在我看来，创建一个新变量并没有错。上面的代码不是那么可读...

# java - spring social facebook 更新过期令牌

> ID：15352715
> 
> 赞同：0
> 
> 时间：2013-03-12T03:22:11.587
> 
> 标签：java, facebook, spring, facebook-graph-api, spring-social

我正在使用 Spring Social 和 Java。

当用户的 facebook access_token 过期时，我可以通过编程方式更新 access_token 而无需用户登录我的网络应用程序吗？

我的 Web 应用程序需要 offline_access，如果用户的 access_token 已过期，我想更新它。是否可以 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:52:04.243

> 当用户的 facebook access_token 过期时，我可以通过编程方式更新 access_token 而无需用户登录我的网络应用程序吗？

不。

> 我的 Web 应用程序需要 offline_access

这已经被弃用了很长一段时间。

> 如果这可能吗？

做一些你自己的研究可能吗？

这个话题已经在这里以史诗般的深度进行了讨论。

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

# javascript - 将收音机标签保留在 div 和 mouseoverstate 中以用于收音机

> ID：15352718
> 
> 赞同：0
> 
> 时间：2013-03-12T03:22:20.487
> 
> 标签：javascript, jquery, css, ajax, radio-button

[http://jsfiddle.net/4QZED/6/](http://jsfiddle.net/4QZED/6/)。尝试为选中的未选中和悬停/鼠标悬停的收音机创建 3 种状态。每个关闭状态都是 css/div/button。但试图使标签成为按钮，以将标签文本保留在按钮中。

更喜欢 css 而不是 jpg 以避免页面缩放时图像降级。

```
$(function() {
    $("input[name='domain_ext']").each(function() {
        if ($(this).prop('checked')) {
            $(this).hide();
            $(this).after("<div class='radioButtonOff'> label </div>");
        } else { 
            $(this).hide();
            $(this).after("<div class='radioButtonOff'> label </div>");
        }
    });

    $("input[type=radio]").change(function() {
        $(this).siblings('.radioButtonOff').add('.radioButtonOn').toggleClass('radioButtonOff radioButtonOn');
    });

        /*  
 $(".radioButtonOff").mouseover(function() {
       if ($(this)toggle('.radioButtonHover');
    });

  $("input[type=label]").change(function() {
         if($(this).find('#radiolabel');
            $(this).hide();
            $(this).after("input[type=label]").add(span);
         });
*/

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:39:05.010

更改 jQuery 以简单地从标签中提取文本并将其添加到动态附加的 div 中。

**编辑：**我意识到您对已检查状态的 if/else 语句毫无意义，因为它根本没有根据条件改变任何内容。您可能有其他计划，但根据发布的示例，您可以完全取消 jQuery 的第一部分。我对下面的 jquery 代码做了一个小的编辑。

```
 $("input[name='domain_ext']").each(function() {
    var lbl = $(this).parent("label").text();
    if ($(this).prop('checked')) {
        $(this).hide();
        $(this).after("<div class='radioButtonOn'>" + lbl + "</div>");
        // something else here if radio is checked??
    } else { 
        $(this).hide();
        $(this).after("<div class='radioButtonOff'>" + lbl + "</div>");
    }
}); 
```

向标签 HTML 添加了一个跨度以隐藏文本。

```
<label>
  <input type="radio" name="domain_ext" value="all"  />
    <span>All</span></label> 
```

更改了 CSS 以允许悬停状态工作并隐藏标签文本。

```
.radioButtonOff { width: 60px; height: 20px; color: #fff; background: #333333;}
.radioButtonOff:hover, .radiobuttonOn:hover { width: 60px; color: #fff;height: 20px; background: #00a;}
.radioButtonOn { width: 60px; height: 20px; color: #fff;background: #a00;}
label span { display: none;} 
```

[**在这里更新小提琴**](http://jsfiddle.net/NotInUse/4QZED/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T03:51:00.990

能够让这个 css 在 Chrome 中工作。没有在其他浏览器中测试，但应该不错。

```
label {position:relative; width:60px; height:20px; display:inline-block; line-height:20px; text-align:center;}
.radioButtonOff,.radioButtonHover,.radioButtonOn { width:100%; height:100%; position:absolute; z-index:-1; }
.radioButtonOff { background: #333333;}
.radioButtonHover { background: #666666;}
.radioButtonOn { background: #999999;} 
```

示例：http: [//jsfiddle.net/P9m7q/](http://jsfiddle.net/P9m7q/)

# python - 如何在 django 中序列化模型中的所有模型字段

> ID：15352721
> 
> 赞同：0
> 
> 时间：2013-03-12T03:22:48.800
> 
> 标签：python, django

我在 django 模板中有可用的模型对象作为`Obj`.

现在我想要一个通用函数，它可以像这样显示所有字段和值

```
{% for instance in data %}
    {% for field, value in instance.fields.items %}
        {{ field }}: {{ value }}
    {% endfor %}
{% endfor %} 
```

我在模型中试过这个

```
def objectdata(self):
        return serializers.serialize( "python", self.objects.all() ) 
```

然后我得到最大的递归错误，因为它正在循环我的这个函数。

我无法编辑视图。有什么方法可以让我在模型中添加一些东西只是为了让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:47:48.360

一些提示：如果`instance`是 django Model 实例，则字段列表在`instance._meta.fields`. 您可以使用它遍历实例并获取所需的列表：

```
def objectdata(self):
    k_w = {}
    for field in self._meta.fields :
        k_w[field.name] = self.__getattr__(field.name)

    return k_w 
```

小心一些字段，如 ForeignKey，......

# php - 使用 jquery mobile 和模数构建动态网格

> ID：15352722
> 
> 赞同：0
> 
> 时间：2013-03-12T03:22:52.350
> 
> 标签：php, jquery, mobile, blade

我正在尝试使用 php 和 jquery mobile 构建动态网格。我想知道是否有人可以帮助我使用模数来确定 ui-block- 是否需要根据迭代的键值进行广告。

```
 <div class="ui-grid-c">
        @forelse($photos as $key=>$photo)

            @if($key == 1)
                <div class="ui-block-a">                                
                    <img src="{{ $photo['file'] }}" width="60" />
                </div>
            @elseif($key == 2)
                <div class="ui-block-b">                                
                    <img src="{{ $photo['file'] }}" width="60" />
                </div>
            @elseif($key == 3)
                <div class="ui-block-c">                                
                    <img src="{{ $photo['file'] }}" width="60" />
                </div>
            @elseif($key == 4)
                <div class="ui-block-d">                                
                    <img src="{{ $photo['file'] }}" width="60" />
                </div>  
            @endif

        @empty

            Nothing Found

        @endforelse
    </div> 
```

我尝试了几种不同的模数变化，但没有任何效果。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:50:45.247

您需要根据列数将 ui-grid-c 类修改为动态的。

*   ui-grid-a = 2 列
*   ui-grid-b = 3 列
*   ui-grid-c = 4 列
*   等等。

为您的专栏..

*   ui-block-a - 是您的第一列
*   ui-block-b - 是你的第二个列
*   等等。

因此，您需要跟踪在列中添加的次数，然后添加字母。

Using 会给你字符 a ，然后在你添加列时为其他字符增加 86 。

# php - 从 MYSQL 表中删除

> ID：15352723
> 
> 赞同：1
> 
> 时间：2013-03-12T03:22:52.700
> 
> 标签：php, mysql

我有几个表单可以从用户正在查看的表中删除各种行。我正在使用 MYSQL 和 PHP。我在另一个页面上有相同的代码（据我所知），它工作正常。由于某种原因，我无法让我的代码执行。它给出了更新失败的错误。

```
try 
{
    $db = new PDO('mysql:host=$hname;dbname=' . $DBname, $DBusername, $DBpassword, array(PDO::ATTR_PERSISTENT => true));
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
}

catch ( Exception $ex ) 
{
    die ( 'Cannot Connect to the Database.' );
}

$delete_equipment_single = "DELETE FROM EquipmentItem 
                              WHERE equipmentID = :equipmentID";    

equipment_delete.php
<?php require_once('php/security.php'); ?>
<?php

// Get the ID Tag
if( !isset($_GET['equipmentID'] ))
{
    echo "You Didn't Supply a equipmentID - (equipmentID) [ERROR x1]";
    exit();
}

require_once('php/database.php');

$equipmentID = htmlspecialchars($_GET['equipmentID']);

// Delete the Equipment
$statement = $db->prepare($delete_equipment_single);
$result = $statement -> execute(array(
    ':equipmentID' => $equipmentID
));

// Make Sure Everything Worked
    if( $result == false )
    {
        die('Update Failed, Please Check Your Database. [ERROR x2]');
    }

echo '<meta http-equiv="Refresh" Content="0; url=display_equipment.php?a=1" />'; 

?> 
```

**致命错误：**未捕获的异常“PDOException”和消息“SQLSTATE [42000]：语法错误或访问冲突：delete_equipment.php:16 中的 1065 查询为空”堆栈跟踪：#0 delete_equipment.php（16）：PDO->prepare（ '') #1 {main} 在第 16 行抛出 indelete_equipment.php

**设备ID**字符串（8）“E1202612”的 VarDump

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:04:21.003

改变

```
$result = $statement -> execute(array('equipmentID' => $equipmentID)); 
```

到

```
$result = $statement -> execute(array(':equipmentID' => $equipmentID));
                                       ^ 
```

更新：打开异常抛出并禁用准备模拟。

```
$db = new PDO('mysql:host=localhost;dbname=mydb;charset=UTF-8', 'user', 'password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

更新2：改变

```
$statement = $db->prepare($delete_equipment_single); 
```

到

```
$statement = $db->prepare("DELETE FROM EquipmentItem WHERE equipmentID = :equipmentID"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:22:59.700

```
1065 Query was empty' in delete_equipment.php:16 
Stack trace: #0 delete_equipment.php(16): PDO->prepare('') 
  #1 {main} thrown indelete_equipment.php on line 16 
```

这意味着您尝试准备的查询是空的。您可以通过运行来验证：

`var_dump($delete_equipment_single)`就在之前`$db->prepare()`

从您的代码来看，它看起来像是`$delete_equipment_single`在不同的文件中定义的？

# javascript - Phonegap - 如何将 $1,743 插入 sql 事务数据库？

> ID：15352731
> 
> 赞同：0
> 
> 时间：2013-03-12T03:23:28.100
> 
> 标签：javascript, sql, cordova

如何从我的内容中转义 $？不断收到同样的错误。请帮忙。

TypeError: 'undefined' 不是一个对象（评估 'x[i].getElementsByTagName("line4")[0].childNodes[0].nodeValue'）

```
// Populate the database 
//
function populateDB(tx) {
    alert("Populate!");
    tx.executeSql('DROP TABLE IF EXISTS news');
    tx.executeSql('CREATE TABLE IF NOT EXISTS news (id, title, line1, line2 TEXT, line3 TEXT, line4 TEXT, line5 TEXT)');

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else{// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","news.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;

    var x=xmlDoc.getElementsByTagName("news");
    for (i=0;i<x.length;i++)
    {
        p_id = x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue;
        p_title = x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue;
        p_line1 = x[i].getElementsByTagName("line1")[0].childNodes[0].nodeValue;
        p_line2 = x[i].getElementsByTagName("line2")[0].childNodes[0].nodeValue;
        p_line3 = x[i].getElementsByTagName("line3")[0].childNodes[0].nodeValue;
        p_line4 = x[i].getElementsByTagName("line4")[0].childNodes[0].nodeValue;
        p_line5 = x[i].getElementsByTagName("line5")[0].childNodes[0].nodeValue;

        tx.executeSql('INSERT INTO news (id,title,line1,line2,line3,line4,line5) VALUES (?,?,?,?,?,?,?)',[p_id,p_title,p_line1,p_line2,p_line3,p_line4,p_line5]);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:17:17.570

也许你应该试试。

```
if((y = x[i].getElementsByTagName("line4")[0].childNodes[0]) == '[object Text]')        
  p_line4 =y.nodeValue;
else
  p_line4 = null; //or assign empty string 
```

编辑。

# javascript - 数组索引 NO + 值

> ID：15352734
> 
> 赞同：1
> 
> 时间：2013-03-12T03:23:35.447
> 
> 标签：javascript, arrays, indexing

嗨，我在这里有一个帖子[http://jsfiddle.net/7ztEf/9/](http://jsfiddle.net/7ztEf/9/)解释了我想要实现的目标。

我会分解它，我需要根据数组索引的值填充一个 div bg，这些是 1-40 之间的 4 个随机数，比如返回的数字是 5、15、25、35。逻辑是如果数字范围为 1-10 则 div bg 为红色，如果 11-20 则为蓝色等

我一直在为此自杀，真的需要一些建议以最好的方式这样做，非常感谢P

```
function myNumbers(numbers, type) {
for (var x in numbers) {
   document.getElementById(type + x).innerHTML = numbers[x];

    /*
    here I need to query each index value and apply to ball div, ie:

    if index 0 numbers > 0) && numbers <= 10 than ball-0 div bg is red
    if index 0 numbers > 11) && numbers <= 20 than ball-0 div bg is blue
    if index 0 numbers > 21) && numbers <= 30 than ball-0 div bg is orange
    if index 0 numbers > 31) && numbers <= 40 than ball-0 div bg is green

    repeating for eack index value. 

    if index 1 numbers > 0) && numbers <= 10 than ball-1 div bg is red

    etc       

    */

} 
```

}

myNumbers([5, 15, 25, 35], 'test-')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:34:22.410

对于几种颜色，我会这样写：

```
for (var x = 0, n = numbers.length; x != n; ++x) {
    var nr = numbers[x], 
        el = document.getElementById(type + x),
        color;

   el.innerHTML = nr;

    if (nr > 0) {
        if (nr <= 10) {
            color = 'red';
        } else if (nr <= 20) {
            color = 'blue';
        } else if (nr <= 30) {
            color = 'orange';
        } else if (nr <= 40) {
            color = 'green';
        }
    }
    if (color) {
        el.style.color = color;
    }
} 
```

[**演示**](http://jsfiddle.net/7ztEf/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:38:11.517

试试这个..

```
for (var x = 0;x<numbers.length;x++) {

    el = document.getElementById(type + x);

el.innerHTML = nr;

if (nr > 0) {
    if (nr <= 10) {
        color = 'red';
    } else if (nr <= 20) {
        color = 'blue';
    } else if (nr <= 30) {
        color = 'orange';
    } else if (nr <= 40) {
        color = 'green';
    }
}
if (color) {
    document.getElementById('ball-' + x).style.backgroundColor = color;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:27:45.370

我会做这样的事情：

```
var colors = ['red', 'blue', 'orange', 'green'];

function myNumbers(numbers, type) {
    for (var i = 0; i < numbers.length; i++) {
        var number = numbers[i];
        var color = colors[Math.floor(number / colors.length)];

        document.getElementById(type + i).innerHTML = number;
        document.getElementById('ball-' + i).style.backgroundColor = color;
    }
} 
```

不要使用`for...in`语法迭代数组。迭代对象的属性。

# ruby-on-rails - Rails/Sprockets 的仅资产 gem 中的任意 Sprockets 资产路径

> ID：15352736
> 
> 赞同：0
> 
> 时间：2013-03-12T03:23:51.203
> 
> 标签：ruby-on-rails, rubygems, asset-pipeline, sprockets

我正在尝试制作和分发一个 Ruby Gem，我在其中打包 CoffeeScript 文件以用于其他应用程序。

它在大多数 Sprockets 应用程序中运行良好，但是当我尝试将它包含在 Rails 应用程序中时，我得到：

```
undefined method `append_path' for Sprockets:Module 
```

错误来自这一行：

```
::Sprockets.append_path File.join(root_dir, "source") 
```

为什么在 Rails 应用程序 Sprockets 中使用 gem 时没有 append_path 方法？有没有办法让 Rails 应用程序在特定目录中查找资产文件？

我不想将我的文件放在 app/assets/javascripts 中，因为这是一个仅限资产的应用程序，并且为了容纳 Rails 而像这样埋葬它们在美学上令人不快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:08:34.647

```
class Engine < ::Rails::Engine
  config.paths['app/assets'] = "source"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:34:41.977

您使用的是哪个版本的导轨。链轮已包含在导轨中。

查看 [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# html - 如何使用 GET 方法和使用 URI 模板提交表单？

> ID：15352739
> 
> 赞同：7
> 
> 时间：2013-03-12T03:23:58.903
> 
> 标签：html, forms, rest

我读了这篇关于 URI 模板的文章[http://blog.welldesignurls.org/2007/01/11/proposing-uri-templates-for-webforms-2/](http://blog.welldesignedurls.org/2007/01/11/proposing-uri-templates-for-webforms-2/)但它似乎是一个死项目。

那么有什么办法可以提交这样的表格吗？

```
<form action="/orders/{id}" method="get">
    <input type="text" name="id"/>
    <input type="submit" value="Submit"/>
</form> 
```

提交后的表单转发到奇数url：***/orders/%7Bid%7D?id=1***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T04:06:40.593

您可以使用 GET 方法，但您将在 URL 中获取名称-值对，并且它不会拾取模板。如果您在此表格中键入“5”：

```
<form action="/orders" method="get">
    <input type="text" name="id"/>
    <input type="submit" value="Submit"/>
</form> 
```

提交时，您将获得 URL /orders?id=5，而不是 /orders/5。

如果您正在寻找 /orders/5，可以使用一些 jquery 轻松完成：

```
<script type="text/javascript" language="javascript">
$("form").submit(function () {
    // prevent the default GET form behavior (name-value pairs)
    event.preventDefault();

    // Get the action attribute
    var action = $("form").attr("action").toLowerCase();

    // For each form element found, replace {elementName} in the action attribute to build a URL from template
    var values = $("form").serialize().split("&");
    for (var i = 0; i < values.length; i++) {
        var tokens = values[i].split("=");
        action = action.replace("{" + tokens[0].toLowerCase() + "}", tokens[1]);
    }

    // Send the user off to the URL w/ template elements replaced
    window.location.href = action;
});
</script> 
```

您可能必须添加一些转义，并在模板输入不可用时处理条件，并且可能测试一些其他边缘情况，但上面的代码适用于具有任意数量模板元素的基本情况，并且会让你到上面的 /orders/5 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:33:45.130

您忘记关闭该`action`属性。

```
<form action="/orders/{id}" method="get">
    <input type="text" name="id"/>
    <input type="submit" value="Submit"/>
</form> 
```

并用于传递`{}`使用该`escape()`功能。

**例子**

```
$queryString = "/orders/{id}";
$safeQueryString = escape( $queryString );

<form action="<?=$safeQueryString?>" method="get"> 
```

**通过表格 ID**

```
$('input[type="submit"]').on('click',function(e)
{
    e.preventDefault();
    var forms = $(this).parents('form');
    var formID = forms.attr('id');

    //appending form id to form action
    var dataString = forms.serialize()+'&formID='+formID;

    forms.submit();

}); 
```

# c++ - 将 C++ 从 Oreilly 书籍翻译为 Objective-C 的问题（iOS 的 3D 编程）

> ID：15352741
> 
> 赞同：2
> 
> 时间：2013-03-12T03:24:08.127
> 
> 标签：c++, objective-c, render, glkit

我目前正在阅读 Oreilly 的 3D Programming for iOS 一书，并将所有内容从 C++ 转换为 Objective-C，用于多种目的，包括后期优化以及对函数和 API 的深入理解。我更愿意学习利用新的 GLKit，而不是依赖 C++ 目前专门用于 iOS 开发的语言。以下是我迄今为止用于创建本书提供的 3D 圆锥模型的翻译代码。不幸的是，底部圆盘和锥体本身只出现了一小块，我不知道为什么。任何人都可以在这方面帮助我。拜托，如果您看到任何优化（我还没有完成，因为我还在翻译）或关于做任何事情的更好方法的建议，我很想听听一些反馈。我真的很想帮助找到问题。一世' 找了几天没有结果。下面附上我正在输出的图像（它应该是一个完整的 3D 圆锥体）。

![在此处输入图像描述](../Images/88e99b763dc729b0edfd031e684bf537.png)

```
 //
//  IRenderingEngine2.m
//  HelloArrow
//
//  Created by TheGamingArt on 3/4/13.
//  Copyright (c) 2013 Brandon Levasseur. All rights reserved.
//

#import "IRenderingEngine2.h"

#define STRINGIFY(A) #A
#import "Simple.frag"
#import "Simple.vert"

static const float RevolutionsPerSecond = 1;
static const float AnimationDuration = 0.25f;
static const float coneSlices = 40.f;
static const int numberOfConeVerticies = ((coneSlices/*number of coneSlices*/ +1) *2);
static const int numberOfDiskVerticies = (coneSlices + 2);

typedef struct{
    GLKVector3 Position;
    GLKVector4 Color;
}Vertex;

typedef struct{
    GLKQuaternion Start; //starting orientation
    GLKQuaternion End; //ending orientation
    GLKQuaternion Current; //current interpolated orientation
    float Elapsed; //time span in seconds for a slerp fraction between 0 and 1
    float Duration; //time span in seconds for a slerp fraction between 0 and 1
}Animation; //enables smooth 3D transitions

@interface IRenderingEngine2(){

    GLuint framebuffer;
    GLuint colorRenderbuffer;
    GLuint depthRenderbuffer; //Because of this being 3D, need depthRender. If only 2d, only need colorRender
    float currentAngle; //angles in degrees
    float desiredAngle; //added for smooth rotation transition

    Vertex cone[numberOfConeVerticies];
    Vertex disk[numberOfDiskVerticies];
    Animation animation;

    GLuint simpleProgram;
}

-(float) getRotationDirection;
-(void)applyRotation:(float)degrees;
-(GLuint)buildProgramWithVertex:(const char *)vShaderSource andFragment:(const char *)fShaderSource;
-(void)applyOrthoWithMaxX:(float)maxX andMaxY:(float)maxY;
-(GLuint)buildShaderWithSource:(const char *)source shaderType:(GLenum)type;
-(GLKQuaternion) quaternionCreateFromVectors:(GLKVector3)v0 :(GLKVector3)v1;

@end

@implementation IRenderingEngine2
-(id)init{
    self = [super init];
    if (self) {

        glGenRenderbuffers(1, &colorRenderbuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, colorRenderbuffer);
    }
    return self;
}

-(void)setRenderWidth:(int)width andHeight:(int)height{

    const float coneRadius = 0.5f;
    const float coneHeight = 1.866f;
    //    const int coneSlices = 40;

    {
        //Generate vertices for the disk....
        //Uses triangle fan so the total number of vertices is n+2: one exxtra vertex for the center and another for closing the loop

        //Allocate space for the disk vertices.
        //m_disk.resize(coneSlices + 2)
        int vertexIterator = 0;
        disk[vertexIterator].Color = GLKVector4Make(0.75f, 0.75f, 0.75f, 1.0f);
        disk[vertexIterator].Position.x = 0.0f;
        disk[vertexIterator].Position.y = 1.0f - coneHeight;
        disk[vertexIterator].Position.z = 0.0f;
        vertexIterator++;

        //Initialize the rim vertices of the triangle fan
        const float dtheta = M_2_PI / coneSlices;
        for (float theta = 0.0f; vertexIterator != numberOfDiskVerticies; theta += dtheta) {
            disk[vertexIterator].Color = GLKVector4Make(0.75f, 0.75f, 0.75f, 1.0f);
            disk[vertexIterator].Position.x = coneRadius * cosf(theta);
            disk[vertexIterator].Position.y = 1 - coneHeight;
            disk[vertexIterator].Position.z = coneRadius * sinf(theta);
            vertexIterator++;

        }
    }

    {
        //Generate vertices for body of cone

        int vertexIterator = 0;
        //Initialize the vertices of the triangle strip.
        const float dtheta = M_2_PI /coneSlices;
        for (float theta = 0; vertexIterator != numberOfConeVerticies ; theta += dtheta) {
            //Grayscale gradient
            float brightness = abs(sinf(theta)); // creates a grayscale gradient as a cheap way to simulate lighting.. aka baked lighting hack
            GLKVector4 color = GLKVector4Make(brightness, brightness, brightness, 1);

            //Apex vertex
            cone[vertexIterator].Position = GLKVector3Make(0.0f, 1.0f, 0.0f);
            cone[vertexIterator].Color = color;
            vertexIterator++;

            //Rim vertex
            cone[vertexIterator].Position.x = coneRadius * cosf(theta);
            cone[vertexIterator].Position.y = 1 - coneHeight;
            cone[vertexIterator].Position.z = coneRadius * sinf(theta);
            cone[vertexIterator].Color = color;
            vertexIterator++;

        }
    }

    //Create the depth buffer
    glGenRenderbuffers(1, &depthRenderbuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, depthRenderbuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, width * [[UIScreen mainScreen] scale], height * [[UIScreen mainScreen] scale]);

    //Create the framebuffer object and attach the color buffer.
    glGenFramebuffers(1, &framebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, colorRenderbuffer);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthRenderbuffer);

    //Bind the color buffer for rendering
    glBindRenderbuffer(GL_RENDERBUFFER, colorRenderbuffer);

    glViewport(0, 0, width * [[UIScreen mainScreen] scale], height * [[UIScreen mainScreen] scale]);

    glEnable(GL_DEPTH_TEST);

    simpleProgram = [self buildProgramWithVertex:SimpleVertexShader andFragment:SimpleFragmentShader];
    glUseProgram(simpleProgram);

    //Set the Projection Matrix
    GLint projectionUniform = glGetUniformLocation(simpleProgram, "Projection");
    GLKMatrix4 projectionMatrix = GLKMatrix4MakeFrustum(-1.6f, 1.6f, -2.4f, 2.4f, 5.0f, 10.0f);
    glUniformMatrix4fv(projectionUniform, 1.0f, 0.0f, &projectionMatrix.m00);

}

-(void)render{
    GLuint positionSlot = glGetAttribLocation(simpleProgram, "Position");
    GLuint colorSlot = glGetAttribLocation(simpleProgram, "SourceColor");

    glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glEnableVertexAttribArray(positionSlot);
    glEnableVertexAttribArray(colorSlot);

//    animation.Current.w = 1.0f;
//    animation.End.w = 1.0f;
//    animation.Start.w = 1.0f;

    GLKMatrix4 rotation = GLKMatrix4MakeWithQuaternion(animation.Current);

    //Set the model-view matrix
    GLint modelviewUniform = glGetUniformLocation(simpleProgram, "Modelview");

    GLKMatrix4 modelviewMatrix = GLKMatrix4Translate(rotation, 0.0f, 0.0f, -7.0f);
    glUniformMatrix4fv(modelviewUniform, 1.0f, 0.0f, &modelviewMatrix.m00);

    //Draw the cone
    {
    GLsizei stride = sizeof(Vertex);
    const GLvoid *pCoords = &cone[0].Position.x;
    const GLvoid *pColors = &cone[0].Color.r; //changed here to r from x for Red

    glVertexAttribPointer(positionSlot, 3, GL_FLOAT, GL_FALSE, stride, pCoords);
    glVertexAttribPointer(colorSlot, 4, GL_FLOAT, GL_FALSE, stride, pColors);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, sizeof(cone)/sizeof(Vertex));
    }

    //Draw the disk that caps off the base of the cone
    {
        GLsizei stride = sizeof(Vertex);
        const GLvoid *pCoords = &disk[0].Position.x;
        const GLvoid *pColors = &disk[0].Color.r; //changed from x to r
        glVertexAttribPointer(positionSlot, 3, GL_FLOAT, GL_FALSE, stride, pCoords);
        glVertexAttribPointer(colorSlot, 4, GL_FLOAT, GL_FALSE, stride, pColors);

        glDrawArrays(GL_TRIANGLE_FAN, 0, sizeof(disk)/sizeof(Vertex));

    }

    glDisableVertexAttribArray(positionSlot);
    glDisableVertexAttribArray(colorSlot);

}
-(void)updateAnimationForTime:(float)timeStep{
    NSString *currentQuaternion = NSStringFromGLKQuaternion(animation.Current);
    NSString *endQuaternion = NSStringFromGLKQuaternion(animation.End);

    if ([currentQuaternion isEqualToString:endQuaternion]) {
        return;
    }

    animation.Elapsed += timeStep;

    if (animation.Elapsed >= AnimationDuration) {
        animation.Current = animation.End;
    }
    else{
        float mu = animation.Elapsed / AnimationDuration;
        animation.Current = GLKQuaternionSlerp(animation.Start, animation.End, mu);
    }

}
-(void)onRotate:(enum DeviceOrientation) orientation{

    GLKVector3 direction;

    switch (orientation) {
        case DeviceOrientationUnknown:
        case DeviceOrientationPortrait:
            direction = GLKVector3Make(0.0f, 1.0f, 0.0f);
            break;

        case DeviceOrientationPortraitUpsideDown:
            direction = GLKVector3Make(0.0f, -1.0f, 0.0f);
            break;

        case DeviceOrientationFaceDown:
            direction = GLKVector3Make(0.0f, 0.0f, -1.0f);
            break;

        case DeviceOrientationFaceUp:
            direction = GLKVector3Make(0.0f, 0.0f, 1.0f);
            break;

        case DeviceOrientationLandscapeLeft:
            direction = GLKVector3Make(+1.0f, 0.0f, 0.0f);
            break;

        case DeviceOrientationLandscapeRight:
            direction = GLKVector3Make(-1.0f, 0.0f, 0.0f);
            break;
    }

    animation.Elapsed = 0;
    animation.Start = animation.Current = animation.End;
    //   animation.End = GLKQuaternionMakeWi
    GLKVector3 vector = GLKVector3Make(0.0f, 1.0f, 0.0f);
    animation.End = [self quaternionCreateFromVectors:vector :direction];
    // (GLKVector3Make(0.0f, 1.0f, 0.0f), direction);

}

-(float)getRotationDirection{
    float delta = desiredAngle - currentAngle;
    // NSLog(@"delta: %f", delta);

    if (delta == 0) {
        return 0;
    }

    bool counterclockwise = ((delta > 0 && delta <= 180) || (delta < -180));

    float test = counterclockwise ? +1.0 : -1.0;
    NSLog(@"Return Value: %f",test );
    return counterclockwise ? +1 : -1; //problem

}

-(void)applyRotation:(float)degrees{

}

-(void)applyOrthoWithMaxX
:(float)maxX andMaxY:(float)maxY{

}

-(GLuint)buildProgramWithVertex:(const char *)vShaderSource andFragment:(const char *)fShaderSource{
    GLuint vertexShader = [self buildShaderWithSource:vShaderSource shaderType:GL_VERTEX_SHADER];
    GLuint fragmentShader = [self buildShaderWithSource:fShaderSource shaderType:GL_FRAGMENT_SHADER];

    GLuint programHandle = glCreateProgram();
    glAttachShader(programHandle, vertexShader);
    glAttachShader(programHandle, fragmentShader);
    glLinkProgram(programHandle);

    GLint linkSuccess;
    glGetProgramiv(programHandle, GL_LINK_STATUS, &linkSuccess);
    if (linkSuccess == GL_FALSE) {
        GLchar messages[256];
        glGetProgramInfoLog(programHandle, sizeof(messages), 0, &messages[0]);
        NSLog(@"%s", messages);
        exit(1);
    }

    return programHandle;

}

-(GLuint)buildShaderWithSource:(const char *)source shaderType:(GLenum)type{
    GLuint shaderHandle = glCreateShader(type);
    glShaderSource(shaderHandle, 1, &source, 0);
    glCompileShader(shaderHandle);

    GLint compileSuccess;
    glGetShaderiv(shaderHandle, GL_COMPILE_STATUS, &compileSuccess);

    if (compileSuccess == GL_FALSE) {
        GLchar messages[256];
        glGetShaderInfoLog(shaderHandle, sizeof(messages), 0, &messages[0]);
        NSLog(@"%s", messages);
        exit(1);
    }
    return shaderHandle;
}

-(GLKQuaternion) createFromAxis:(GLKVector3)axis withAngle:(float)radians //Minor calculating issues
{
    GLKQuaternion q;
    q.w = cosf(radians / 2);
    q.x = q.y = q.z = sinf(radians / 2);
    q.x *= axis.x;
    q.y *= axis.y;
    q.z *= axis.z;
    return q;
}

-(GLKQuaternion) quaternionCreateFromVectors:(GLKVector3)v0 :(GLKVector3)v1 // Minor calculating issues
{

    GLKVector3 v1Negative = GLKVector3Negate(v1);

    NSLog(@"strings: v0: %@ v1:%@", NSStringFromGLKVector3(v0), NSStringFromGLKVector3(v1Negative));
    if (/*NSStringFromGLKVector3(v0) == NSStringFromGLKVector3(v1Negative)*/ v0.g == v1Negative.g)
        return [self createFromAxis:GLKVector3Make(1.0f, 0.0f, 0.0f) withAngle:M_1_PI];

    GLKVector3 c =  GLKVector3CrossProduct(v0, v1);//  v0.Cross(v1);
    int d = GLKVector3DotProduct(v0, v1); // v0.Dot(v1);
    int s = sqrt((1 + d) *2);

    GLKQuaternion q;
    q.x = c.x / s;
    q.y = c.y / s;
    q.z = c.z / s;
    q.w = s / 2.0f;
    return q;
}

@end 
```

在大多数情况下，我想让它运行，然后需要学习如何实现 GLKQuanternions 以添加诸如

```
m_animation.End = Quaternion::CreateFromVectors(vec3(0, 1, 0), direction); 
```

又名：

```
inline QuaternionT<T> QuaternionT<T>::CreateFromVectors(const Vector3<T>& v0, const Vector3<T>& v1)
{
    if (v0 == -v1)
        return QuaternionT<T>::CreateFromAxisAngle(vec3(1, 0, 0), Pi);

    Vector3<T> c = v0.Cross(v1);
    T d = v0.Dot(v1);
    T s = std::sqrt((1 + d) * 2);

    QuaternionT<T> q;
    q.x = c.x / s;
    q.y = c.y / s;
    q.z = c.z / s;
    q.w = s / 2.0f;
    return q;
} 
```

作为一个临时插件，我在 Objective-C 中为四元数创建了相同的方法

```
-(GLKQuaternion) createFromAxis:(GLKVector3)axis withAngle:(float)radians //Minor calculating issues
{
    GLKQuaternion q;
    q.w = cosf(radians / 2);
    q.x = q.y = q.z = sinf(radians / 2);
    q.x *= axis.x;
    q.y *= axis.y;
    q.z *= axis.z;
    return q;
}

-(GLKQuaternion) quaternionCreateFromVectors:(GLKVector3)v0 :(GLKVector3)v1 // Minor calculating issues
{

    GLKVector3 v1Negative = GLKVector3Negate(v1);

    NSLog(@"strings: v0: %@ v1:%@", NSStringFromGLKVector3(v0), NSStringFromGLKVector3(v1Negative));
    if (/*NSStringFromGLKVector3(v0) == NSStringFromGLKVector3(v1Negative)*/ v0.g == v1Negative.g)
        return [self createFromAxis:GLKVector3Make(1.0f, 0.0f, 0.0f) withAngle:M_1_PI];

    GLKVector3 c =  GLKVector3CrossProduct(v0, v1);//  v0.Cross(v1);
    int d = GLKVector3DotProduct(v0, v1); // v0.Dot(v1);
    int s = sqrt((1 + d) *2);

    GLKQuaternion q;
    q.x = c.x / s;
    q.y = c.y / s;
    q.z = c.z / s;
    q.w = s / 2.0f;
    return q;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:27:43.657

似乎我没有意识到 cmath 中的 Pi 函数是 const float Pi = 4 * std::stan(1.0f)。我所要做的就是重新计算为 const float dtheta = (M_PI * 2) / coneSlices; 瞧。我想要任何关于改进的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:07:53.107

除了之前，我还将我的四元数代码简化为以下内容：

```
-(GLKQuaternion) createQuaternionFromAnchor:(GLKVector3)anchor direction:(GLKVector3)direction
{

    GLKVector3 axis = GLKVector3CrossProduct(anchor, direction);

    if (GLKVector3Negate(direction).g == anchor.g) {
        axis = GLKVector3Make(1.0f, 0.0f, 0.0f);
    }

    float dot = GLKVector3DotProduct(anchor, direction);
        float angle = acosf(dot);
        GLKQuaternion Q_rot = GLKQuaternionMakeWithAngleAndVector3Axis(angle, axis);
        Q_rot = GLKQuaternionNormalize(Q_rot);
        return Q_rot;
} 
```

我对 GLKit 源代码进行了一些研究，最终能够看到后端的一切工作方式。数学方面，考虑到一切都不像看起来那样，他们真的应该记录向量和矩阵之间的数据处理方式。

# r - 时间序列预测函数

> ID：15352748
> 
> 赞同：1
> 
> 时间：2013-03-12T03:24:49.597
> 
> 标签：r, function, loops, time-series, modeling

在 R 工作。我想使用初始值和一组转换参数来预测流行的时间序列。对于以下结构的数据

```
 cohort <- c(1980,1981,1982)
 A00 <- c(.15, .2,.4)
 B00 <- c(.25, .3, .4) 
 C00 <-c(.6, .5,.2)
 Tab<-c(.6,.5,.4)
 Tac<-c(.2,.25,.35)
 ds <- data.frame(cohort,A00,B00,C00,Tab,Tac)
 print (ds)

  cohort  A00  B00 C00 Tab  Tac
1   1980 0.15 0.25 0.6 0.6 0.20
2   1981 0.20 0.30 0.5 0.5 0.25
3   1982 0.40 0.40 0.2 0.4 0.35 
```

A00、B00 和 C00 列中的初始值表示在时间 t=00 时每个组 (A,B,C) 的相关大小。它们在整行中加起来为 1 (A00+B00+C00=1)。参数 Tab 和 Tac 用于使用一些数学模型预测时间 t+1 的流行率，例如

```
A01   = df$A00 -df$Tab +df$Tac. 
```

在时间 t+1 计算预测值的函数是

```
 forecast<- function( df ) {
  dsResult <- data.frame(
    cohort= df$cohort,
    A01   = df$A00 -df$Tab +df$Tac ,    
    B01   = df$B00 -df$Tab +df$Tac,    
    C01  =  df$C00 -df$Tab +df$Tac    

  )
  dsResult<- merge(df,dsResult,by="cohort")
  return( dsResult)
}
new<-forecast(ds) 
```

并产生以下结果

```
 cohort  A00  B00 C00 Tab  Tac   A01   B01  C01
1   1980 0.15 0.25 0.6 0.6 0.20 -0.25 -0.15 0.20
2   1981 0.20 0.30 0.5 0.5 0.25 -0.05  0.05 0.25
3   1982 0.40 0.40 0.2 0.4 0.35  0.35  0.35 0.15 
```

我非常感谢您帮助我学习如何编写一个循环来循环预测所需的年数（例如，对于 1:7 中的 t）。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:58:57.180

Initially I'd like to make two suggestions that might make the problem easier to code. First, revise the data schema so that each year is a unique row, and each group is a unique column. Second, since the cohorts are treated mathematically independent of each other, keep them separate for now, at least until the code's kernel is built. Put a loop around this later that cycles through them. In the first block of code, there are two matrices, one with observed data, and one that will collect the predicted data.

```
yearCount <- 7 #Declare the number of time points.
groupCount <- 3 #Declare the number of groups.

#Create fake data that sum to 1 across rows/times.
ob <- matrix(runif(yearCount*groupCount), ncol=groupCount)
ob <- ob / apply(ob, 1, function( x ){ return( sum(x) )})

#Establish a container to old the predicted values.
pred <- matrix(NA_real_, ncol=groupCount, nrow=yearCount)

t12<-.5; t13<-.2; t11<-1-t12-t13 #Transition parameters from group 1
t21<-.2; t23<-.4; t22<-1-t21-t23 #Transition parameters from group 2
t31<-.3; t32<-.1; t33<-1-t31-t32 #Transition parameters from group 3

for( i in 2:yearCount ) {
  pred[i, 1] <- ob[i-1, 1]*t11 + ob[i-1, 2]*t21 + ob[i-1, 3]*t31
  pred[i, 2] <- ob[i-1, 1]*t12 + ob[i-1, 2]*t22 + ob[i-1, 3]*t32
  pred[i, 3] <- ob[i-1, 1]*t13 + ob[i-1, 2]*t23 + ob[i-1, 3]*t33
}

#Calculate the squared errors
ss <- (pred[-1, ] - ob[-1, ])^2 #Ignore the first year of data 
```

Inside the loop, you probably notice the familiar structure of matrix multiplication. Each row can be slightly condensed using inner products (ie, one row of the `ob` matrix is multiplied, then summed with a one "column" of the `t`s. I'm using `t12` slightly differently than the `Tab` in your post; this is the probability of transitioning from group 1 to group 2 at a given time point.

```
#Create transition parameters that sum to 1 across rows/groups.
tt <-  matrix(runif(groupCount*groupCount), ncol=groupCount)
tt <- tt / apply(tt, 1, function( x ){ return( sum(x) )}) 
```

Pretend the `tt` matrix was defined earlier, instead of the separate variables of `t11`,...,`t33`.

```
for( i in 2:yearCount ) {
  pred[i, 1] <- ob[i-1, ] %*% tt[, 1] 
  pred[i, 2] <- ob[i-1, ] %*% tt[, 2]
  pred[i, 3] <- ob[i-1, ] %*% tt[, 3]
} 
```

The loop's contents are slightly cleaner than when each element pair was explicitly multiplied and summed. But we don't have to treat each row/column pair individually. All three columns of the `ob` matrix can be operated on by all three columns of the `tt` matrix simultaneously:

```
for( i in 2:yearCount ) {
  pred[i, ] <- ob[i-1, ] %*% tt
} 
```

This should be much quicker than even the previous version, because R's internal memory system isn't recreating the matrix three times for each row -only once per row. To reduce this to once per matrix, use the `apply` function, and then transpose the matrix if that suits your purpose. Finally, notice that the rows represent different years than `pred` (ie, row i-1 here is the same as row i in `pred`).

```
predictionWIthExtraYear <- t(apply(ob, 1, FUN=function(row){row %*% tt})) 
```

To accommodate cohorts, perhaps you could declare a list with three elements (for the 1980, 1981, and 1982 cohorts). Each element would be a unique `ob` matrix. And create a second list for a unique `pred` matrix. Or maybe use three dimensional matrices (but that may be more taxing when R recreates the memory with the replacement function).

# fluent-nhibernate - 如何在 Fluent NHibernate 中使用非 ID 字段进行引用？

> ID：15352751
> 
> 赞同：0
> 
> 时间：2013-03-12T03:25:02.730
> 
> 标签：fluent-nhibernate

忍受我，这是一个遗留系统，所以表关系不是想法。

Dog 具有字段 ID、所有者和名称

DogHouse 有 ID、所有者和名称。它没有对 Dog 的外键引用。相反，它与所有者和名称相关。

在我的 DogMap 中，我需要能够告诉它如何引用它的 Doghouse。我怎么做？当我尝试

```
 Reference(x=>x.DogHouse). 
```

我在点后面放什么？它不是 ID，应该是 Owner 和 Name。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:12:16.280

非 id 字段必须是一个属性

```
Reference(x=> x.DogHouse, "Owner").PropertyRef(house => house.Owner).Readonly(); 
```

因为两者都需要我们必须使用一些技巧

```
DogHouse FakeReferenceProp { get; set; }
public DogHouseMap()
{
    Component(x => FakeReferenceProp, c =>
    {
        c.Map(x => x.Owner, "Owner").Readonly();
        c.Map(x => x.Name, "Name").Readonly();
    });
}

// in DogMap
Reference(x=> x.DogHouse).Columns.Add("Owner", "Name").PropertyRef(house => FakeReferenceProp).Readonly(); 
```

# python - 如何打破遍历 Subprocess.Popen 标准输出的循环？

> ID：15352753
> 
> 赞同：0
> 
> 时间：2013-03-12T03:25:28.413
> 
> 标签：python

我正在使用以下子进程从一个非常大的文件（arnd 4 GB）中读取行

```
p1=subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE)
p=subprocess.Popen(gawk_exp, shell=True, stdin=p1.stdout, stdout=subprocess.PIPE) 
```

其中 cmd = zgrep “要搜索的文本” filename.gz

gawk_exp 只是另一个从 grepped 行中过滤的 gawk 表达式。

然后在 p 上迭代如下：

```
for line in iter(p.stdout.readline, ''):
   ..
   ..
   ..
   if(success):
      break 
```

这会导致“grep：写入输出：管道损坏”错误。

但是如果它满足某些条件，我想提前退出 for 循环。

我尝试了很多途径，例如，

```
if(success):
    os.kill(p.pid, signal.SIGKILL)
    os.kill(p1.pid, signal.SIGKILL)
    OR
    subprocess.Popen.kill(p1.pid, p.pid)
    subprocess.Popen.kill(p.pid)
    OR
    p1.stdout.close()
    p.stdout.close() 
```

以不同的顺序，但无济于事。

关于如何优雅地摆脱循环的任何提示？

版本详细信息：Linux2 上的 Python 2.4.3 (#1, Jun 11 2009, 14:09:37) [GCC 4.1.2 20080704 (Red Hat 4.1.2-44)]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:32:43.490

您可以设置`stderr`作业`zgrep`，捕获它，并且仅在您在其他地方检测到错误时打印它在那里写的内容（例如，如果您从未在循环中提前退出）。

或者，停止使用`Popen`来运行并直接在 Python 中`zgrep`开始使用：http: [//docs.python.org/2/library/zlib.html](http://docs.python.org/2/library/zlib.html) - 我个人会尝试一下，然后可能会在 Python 中实现整个事情的使用。`zlib``gawk`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:06:44.090

我不会在这里直接回答你的问题，但我只想指出，对于这类任务，[铅](http://plumbum.readthedocs.org/en/latest/)非常有用。使用它代替`popen`等，将使您的生活变得更加轻松。

# java - Spring中的线程范围与请求范围

> ID：15352760
> 
> 赞同：0
> 
> 时间：2013-03-12T03:26:13.900
> 
> 标签：java, multithreading, spring

我可以用线程范围替换spring的请求范围吗？至于在多线程中操作时的非http请求，对bean服务的访问不受当前线程的约束。线程范围允许每个线程访问 bean 服务。如果线程正在访问具有 http 之外的请求范围的 bean（比如拦截器有时在 http 中调用，有时在 serviceImpl 中调用到 http 之外的 serviceImpl ）。对于 http 它很好请求范围，但是当在多线程环境中从 http 外部调用时，线程无法获取 bean 服务，因为请求不在 http 中，并且在创建当前线程尝试使用请求获取 bean 服务范围的 bean 时出错。如果我改为使用范围如果我必须在 Web 请求之外同时在 http 和非 http 中操作，是否会产生问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:05:37.700

是的，当然您可以将bean的请求范围替换为线程范围

但是您需要在http和非http中操作意味着最好为bean添加自定义范围

请参阅[此](https://stackoverflow.com/questions/450557/custom-spring-scopes)自定义范围

# ruby-on-rails - Rails 中公共活动 gem 的未定义方法错误

> ID：15352764
> 
> 赞同：0
> 
> 时间：2013-03-12T03:27:04.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试将公共活动 gem 实现到我的 Rails 应用程序中。我正在关注优秀的 Railscast 剧集（[http://railscasts.com/episodes/406-public-activity](http://railscasts.com/episodes/406-public-activity)），但是当我运行 localhost:3000/activities 时遇到以下错误：

活动中的 NoMethodError#index 未定义的方法“内容”#

该错误表明问题出在 views/activities/index.html.erb 文件中：

```
<% @activities.each do |activity| %>
    <div class ="activity">
         <%= link_to activity.owner.content, activity.owner if activity.owner %>
          <%= render_activity activity %>
        </div>
        <% end %> 
```

它似乎不喜欢第三行的“link_to activity.owner.content”位。

活动控制器：

```
class ActivitiesController < ApplicationController
  def index
   @activities = PublicActivity::Activity.order("created_at desc").where(owner_id: current_user.followed_users.all, owner_type: "User")
  end
end 
```

内容是我的帖子表中的一列。我正在尝试跟踪/显示特定用户可能关注的用户活动。我的问题是存在于上述文件之一还是其​​他地方的问题？

如果有帮助，如果我将 index.html.erb 视图替换为

```
<% @activities.each do |activity| %>
  <%= activity.inspect %>
<% end %> 
```

我可以看到页面上显示的原始数据没有错误。一旦我用前面提到的新代码替换了检查代码，就会出现错误。任何帮助将不胜感激。

附加信息：我正在使用 Devise 进行用户身份验证，并且我正在使用 Michael Hartl 的 Railstutorial 示例应用程序中所见的跟随系统。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:50:28.630

您的所有者模型是否具有内容属性？

铁路广播说

```
<%= link_to activity.owner**.name**, activity.owner if activity.owner %> 
```

代替

```
<%= link_to activity.owner.content, activity.owner if activity.owner %> 
```

# c - 当索引不连续时，设置查找表的最佳方法是什么？

> ID：15352771
> 
> 赞同：3
> 
> 时间：2013-03-12T03:27:49.830
> 
> 标签：c

我有两个这样定义的枚举

```
enum foo {
    foo_a = 0x1,
    foo_b = 0x2,
    foo_c = 0x4,
    foo_d = 0x8,
    foo_e = 0x10,
    ..etc..
} 
```

和

```
enum bar {
    bar_a = 0x1,
    bar_b = 0x2,
    bar_c = 0x4,
    bar_d = 0x8,
    bar_e = 0x10,
    ..etc..
} 
```

现在，foo_[az] 和 bar_[az] 之间存在 1 对 1 的映射关系，我想快速查找一下。这样做的明显方法是做一些声明像

```
int table[][] = {
    [foo_a] = bar_c,
    [foo_b] = bar_a,
    [foo_c] = bar_b,
    ..etc..
} 
```

并使用`result = table[(enum foo)temp]`. 但是由于这些枚举是按位声明的，所以 的大小`table`呈指数增长。

有没有更简单的方法可以在编译时进行设置？

我考虑过的一件事是

```
int table[][] = {
    [LOG(foo_a)] = bar_c,
    [LOG(foo_b)] = bar_a,
    [LOG(foo_c)] = bar_b,
    ..etc..
} 
```

这将减少内存占用，但我不知道无论如何要在编译时计算 LOG。

还有其他建议吗？

我唯一的限制如下，无论如何我都不能修改枚举，因为更改它们会导致二进制不兼容。

编辑：首选编译时解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T04:07:03.037

是的，只要参数是 2 的幂，您就可以“在编译时计算日志”：

```
#define LOG2P2(m) (((m)-1)/(((m)-1)%255+1) / 255%255*8 + 7-86/(((m)-1)%255+12)) 
```

这适用于`m`高达 2**2040 左右的值（比实际 C 实现中的任何类型都大得多），并且在以下问题的答案中，有一个版本适用于更大的值，我从中得到了这个值：

[https://stackoverflow.com/a/4589384/379897](https://stackoverflow.com/a/4589384/379897)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:37:55.277

只需制作一个配对表：

```
int table[2][] = {
  { foo_a, bar_c },
  { foo_b, bar_a },
  /* ... */
}; 
```

现在对其进行排序，如果需要，将其复制到按第二个值排序的第二个表中以进行反向查找。如果表只有十几个元素，则进行线性搜索，或者`bsearch()`如果它很大，则使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:47:59.830

如果您知道所有枚举的值，那么您可以计算所有枚举的日志并将它们存储在缓冲区中。或者，您可以写入所有日志。文件中的值（您将要使用）并读取该文件以生成表；这样，您将计算对数。值仅是第一次。

# ruby-on-rails - 尝试安装 cms 时 Bundler::GemfileNotFound

> ID：15352773
> 
> 赞同：5
> 
> 时间：2013-03-12T03:27:56.313
> 
> 标签：ruby-on-rails, ruby, gem, bundler

尝试安装 CMS 时出错。它说`Bundler::GemfileNotFound`

此外，当我运行`bundle`它还说`Bundler::GemfileNotFound`

我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T03:36:55.110

我认为您收到此错误*是因为*您没有进入目录。

即，rails new project_example

然后你做

cd project_example（cd 代表更改目录）

这会让你进入项目......

然后你运行那个命令

# unix - 为什么 UNIX time(2) 系统调用是这样设计的？

> ID：15352775
> 
> 赞同：1
> 
> 时间：2013-03-12T03:28:22.573
> 
> 标签：unix, pass-by-reference, system-calls

UNIX time(2) 系统调用`time_t time(time_t *t);`以两种方式返回当前时间：返回值和按引用返回。这种冗余的原因是什么？为什么不直接定义呢`time_t time(void);`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:46:50.773

古老的历史，但它可能与一个 long 由两个 16 位`int`值串联模拟的时间有关。否则，没有真正明显的原因。有趣的是，UNIX™ 第 7 版手册文档`time`已过时：

> **姓名**
> 
> time, ftime – 获取日期和时间
> 
> **概要**
> 
> `long time(0)`
> `long time(tloc)`
> `long *tloc;`
> 
> `#include <sys/types.h>`
> `#include <sys/timeb.h>`
> `ftime(tp)`
> `struct timeb *tp;`
> 
> **描述**
> 
> Time 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来的时间，以秒为单位。如果*tloc 为非*空，则返回值也存储在*tloc*指向的位置。ftime 条目填充其参数指向的结构，定义如下`<sys/timeb.h>`：
> 
> ```
> /*
> * Structure returned by ftime system call
> */
> struct timeb
> {
> time_t time;
> unsigned short millitm;
> short timezone;
> short dstflag;
> }; 
> ```
> 
> 该结构包含自纪元以来的时间（以秒为单位）、最多 1000 毫秒的更精确间隔、本地时区（以格林威治向西的时间分钟数衡量）和一个标志，如果非零，则表明夏令时在本地应用在一年中的适当部分。
> 
> **也可以看看**
> 
> 日期（1），时间（2），时间（3）
> 
> **汇编器**
> 
> ```
> (ftime = 35.)
> sys ftime; bufptr
> 
> (time = 13.; obsolete call)
> sys time
> (time since 1970 in r0-r1) 
> ```

请注意名称“过时调用”，并注意返回值在两个（16 位）寄存器中，*r0*和*r1*。

# java - Java：基本问题

> ID：15352776
> 
> 赞同：-1
> 
> 时间：2013-03-12T03:28:37.693
> 
> 标签：java, string, double, main

我是 Java 新手，有一些非常基本的问题：

为什么该`main`方法必须始终采用 a `String[]`？-->`public static void main(String[] args)`

`float`关于原语， a和 a 有什么区别`double`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:30:51.607

main 方法将 String[] 作为参数，因为它保存程序的命令行参数。

```
$ javac Args.java
$ java Args hello goodbye
hello
goodbye

public class Args {
  public static void main(String[] args) {
    for (String s : args) {
      System.out.println(s);
    }
  }
} 
```

对于浮点数和双精度数的区别，[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:30:50.510

字符串数组表示从系统传递到程序中的任何命令行参数。

float 和 double 是相似的，除了 double 使用更多的内存并且具有更高的精度（对于加、减、乘、除等，它也可能比 float 慢）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T03:31:51.307

> 为什么 main 方法必须始终采用 String[]？--> 公共静态 void main(String[] args)

从命令行（终端）运行 Java 程序时，语法为

```
java SomeClass [list of arguments, space-separated] 
```

这意味着您可以使用不同的选项调用您的程序。该`args`变量包含命令行参数。如果您不关心它们（通常您不会），请不要使用该变量。

*以下是您可以*对参数执行的一些操作：

1.  将它们视为文件的路径并加载它
2.  将它们视为选项（例如，详细、静默、日志错误等）
3.  以其他方式将它们视为程序的输入（例如，用户的姓名和生日）

如果你想使用参数，你可以这样做。

```
public static void main(String[] args) {
    String first, last;
    if (args.length >= 2) {
        // The user provided a first and last name.
        first = args[0];
        last = args[1];
    } else {
        // [ prompt user for name ]
    }
} 
```

* * *

> 关于原语，浮点数和双精度数有什么区别？

A`double`的精度是 a 的两倍（两倍）`float`。因此，它也占用了两倍的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T03:31:25.457

String[] 因为您的程序的参数将始终被读取为字符串。

Float 是一个 32 位浮点数。Double 是双精度：64 位。（这与您的系统架构无关。在 Java 中 Float 将始终为 32 位，而 Double 将始终为 64 位）。

# java - 在java中为图像添加像素边框

> ID：15352781
> 
> 赞同：0
> 
> 时间：2013-03-12T03:29:19.163
> 
> 标签：java

我正在尝试创建一个图像，通过将像素从旧位置复制到新坐标来为 Java 上的现有图像添加边框。到目前为止，这就是我所做的：

```
 public static NewPic border(NewPic p, int borderWidth, Pixel borderColor) {
    int w = 2 * borderWidth;
    int h = 2 * borderWidth;

    Pixel[][] src = p.getBitmap();
    Pixel[][] tgt = new Pixel[w][h];

    for (int x = 0; x < w; x++) {
        for (int y = 0; y < h; y++) {
            if (x < borderWidth || x >= (w - borderWidth) ||
                    y < borderWidth)
                tgt[x][y] = borderColor;
            else
                tgt[x][y] = src[x - borderWidth][y - borderWidth]; 

        }
    }

return new NewPic(tgt);    

} 
```

不知道为什么这没有通过我的测试用例。任何人都可以为我提供任何指导吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:35:30.920

w 和 h 不应该是 src 的宽度和高度*加上*边框宽度的两倍吗？您正在创建足够大的 tgt 以容纳边框颜色。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:34:08.530

您可以使用[图形](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html)和画线。

# cloud-foundry - 多次部署同一个应用

> ID：15352782
> 
> 赞同：2
> 
> 时间：2013-03-12T03:29:19.803
> 
> 标签：cloud-foundry

我正在尝试多次部署相同的应用程序（相同的 WAR 文件）（作为多个 CloudFoundry 应用程序）。我只想添加实例，但我想为两个不同的应用程序提供不同的环境变量。我能够很好地 vmc 推送第一个副本。它按预期启动并运行。但是，我第二次尝试部署应用程序时，收到以下错误：

```
Uploading app_name... FAILED
Upload failed. Try again with 'vmc push'.
TypeError: can't convert nil into String
For more information, see ~/.vmc/crash 
```

当我按照指定查看崩溃文件时，它提供了以下堆栈跟踪：

```
Time of crash:
  2013-03-11 22:19:41 -0500

TypeError: can't convert nil into String

multipart-post-1.1.5/lib/composite_io.rb:84:in `initialize'
multipart-post-1.1.5/lib/composite_io.rb:84:in `open'
multipart-post-1.1.5/lib/composite_io.rb:84:in `initialize'
cfoundry-0.5.2/lib/cfoundry/v1/base.rb:57:in `new'
cfoundry-0.5.2/lib/cfoundry/v1/base.rb:57:in `upload_app'
cfoundry-0.5.2/lib/cfoundry/upload_helpers.rb:48:in `upload'
vmc-0.5.0/lib/vmc/cli/app/push.rb:86:in `block in upload_app'
interact-0.5.2/lib/interact/progress.rb:98:in `with_progress'
vmc-0.5.0/lib/vmc/cli/app/push.rb:85:in `upload_app'
vmc-0.5.0/lib/vmc/cli/app/push.rb:53:in `sync_app'
vmc-0.5.0/lib/vmc/cli/app/push.rb:46:in `push'
mothership-0.5.1/lib/mothership/base.rb:66:in `run'
... 
```

我错过了什么？任何帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T03:22:31.917

这是一个 vmc 问题，最近已修复。详细信息可以在[https://github.com/cloudfoundry/vmc/issues/65](https://github.com/cloudfoundry/vmc/issues/65)找到。

# java - 使用 Java 中的 Scanner 导入将扫描的单词读入数组

> ID：15352783
> 
> 赞同：2
> 
> 时间：2013-03-12T03:29:50.287
> 
> 标签：java, arrays, java.util.scanner

我有这个代码：

```
 Scanner input = new Scanner(System.in);
        System.out.println("Enter file name: ");
        File file = new File(input.nextLine());
        if (file.length() == 0) {
            System.out.println("The input file is empty.");
            System.exit(1);
        } 
```

它读取用户输入的文件，然后检查它是否为空，非常简单。

我想要做的是将这个文件中的每个单词放入一个字符串数组中，该数组将包含每个单词、标点符号和所有（撇号或破折号将作为单词包含在内）。我该怎么做呢？

我们假设文件内容可能如下所示：

```
it's
Stop

the

malformed yes-man 
```

只是由回车或空格分隔的随机单词。

您的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:48:14.973

检查这个（使用 BufferedReader 而不是 Scanner 的示例）这会给你一个想法，然后你可以使用 Scanner 实现你自己的:)

```
import java.io.*;
import java.util.*;

public class ReadFile
{
    public static void main(String[] args) throws Exception
    {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter file name");
        String fileName = br.readLine();
        File file = new File(fileName);
        if(file.length() == 0)
        {
            System.out.println("File is empty");
        }
        else
        {
            BufferedReader fr = new BufferedReader(new FileReader(file));
            ArrayList<String> words = new ArrayList<String>();
            String[] line;
            String str;
            while((str=fr.readLine()) != null)
            {
                line = str.split(" ");
                for(String word : line)
                    words.add(word);
            }

            // Printing the content of words
            for(String word : words)
                System.out.println(word);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:33:23.823

```
String[] words = input.split("(?s)\\s+"); 
```

# report - RDLC 根据字段值显示/隐藏控件

> ID：15352790
> 
> 赞同：1
> 
> 时间：2013-03-12T03:30:49.217
> 
> 标签：report, rdlc

我有矩形 rdlc 控件，里面有几个文本框。矩形可见性取决于“兴趣”数据集字段。如果兴趣值大于 0，则显示该矩形，否则隐藏。

我试图像这样设置矩形的可见性表达式

```
=Sum(Fields!Interest.Value, "BasePayment")>0 
```

但这行不通。即使兴趣值大于零，矩形也根本不显示。

请帮忙。我是 RDLC 新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T03:44:19.653

尝试将您的可见性表达式更改为：

```
=Sum(Fields!Interest.Value, "BasePayment")<=0 
```

# php - 系统捕获电子邮件

> ID：15352793
> 
> 赞同：5
> 
> 时间：2013-03-12T03:31:04.017
> 
> 标签：php, cloud, laravel, email

目前我正在构建一个系统（自定义CMS），要求是捕获所有公众发送到注册电子邮件地址的电子邮件，并通过系统通过注册电子邮件通过电子邮件地址回复。

例如：

1.  我将其设置为 info@st​​ackoverflow.com，然后当 slim@slim.com 向 info@st​​ackoverflow.com 发送电子邮件时
2.  我的系统将捕获它并显示带有该组附件的电子邮件
3.  谁处理电子邮件将生成一个“randomHashTemp”@stackoverflow.com 以确定谁处理该案例
4.  系统将通过“randomHashTemp”@stackoverflow.com（如 google group）回复
5.  通过“randomHashTemp”@stackoverflow.com 继续沟通

但

1.  如果用户发送到 else@stackoverflow.com 那么将被他们当前的电子邮件服务器（如交换）捕获

我不知道这个叫什么。我可以知道如何实施吗？请提供一些链接或关键字的建议。我知道很多知识库解决方案，CRM，通过 CNAME 集成的项目管理软件，更改 DNS 那些东西，但我不知道如何。谢谢。

**更新**

该示例类似于[http://www.cloudmailin.com](http://www.cloudmailin.com) 但我想要的是从我的应用程序生成并为我的客户接收来自公众的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:00:34.637

有两种主要方法可以实现这一点

**从邮箱中获取电子邮件**

在这种方法中，电子邮件会发送到邮箱，您会定期检查此邮箱中的内容以处理电子邮件。虽然这通常会导致延迟，但您可以通过定期运行程序并让它一直轮询邮箱来减少这种情况。

[相关问题](https://stackoverflow.com/questions/3971423/processing-incoming-e-mail-with-php-script)

**将邮件处理重定向到程序**

如果您的邮件服务器在 unix 上，您可以将电子邮件处理重定向到一个脚本，您可以在其中根据需要处理电子邮件

[SO之外的相关问题](http://www.unix.com/unix-dummies-questions-answers/7997-email-process.html)

具体来说，找到支持 procmail 脚本的网络主机可能是最容易的。这些配置脚本允许您将电子邮件重定向到 PHP 程序，您可以将其作为域中所有电子邮件的总称。请参阅此[示例答案](https://stackoverflow.com/questions/13752809/how-do-i-use-procmail-with-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T23:31:59.950

我已经用[cloudmailin](http://cloudmailin.com/)做到了这一点——您只需为您的所有公共地址设置邮件转发到您的 cloudmailin 地址。所以：

1.  用户电子邮件随机散列地址，例如`info+dfj28d@example.com`

2.  example.com 上的邮件服务器将所有邮件转发`info`到`youraccount@cloudmailin.com`。

3.  Cloudmailin 在您的网站上发布电子邮件`http://example.com/yourwebhook.php`。

4.  即使所有邮件都通过单个 cloudmailin 地址进行过滤，cloudmailin 也会在其发布的字段中包含原始散列到地址，因此您的网站可以提取散列并确定哪个用户正在回复。伪PHP给你一个思路：

    ```
    <?php /* webhooks.php */
    $address = $_POST['to']; // 'info+dfj28d@example.com'
    $addressParts = explode('@', $address); // array('info+dfj28d', 'example.com')
    $userParts = explode('+', $addressParts[0]); // array('info', 'dfj28d');
    $hash = $userParts[0]; // 'dfj28d'
    ?> 
    ```

在这个例子中，我使用了哈希，`info+dfj28d`因为我们的邮件域托管在 gmail 上，所以 gmail 的`username+alias`语法是一种将所有随机哈希发送到同一个邮箱的简单方法。其他邮件主机也有类似的创建通配符别名的方法。

关键是地址中需要一个随机组件`dfj28d`（`info``info``else@example.com`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:51:52.173

我们使用 Google Apps 进行类似的设置。[http://www.google.com/apps/](http://www.google.com/apps/)

我们创建了一个单一的“app@”帐户来接收所有邮件作为一个包罗万象。该应用程序会为像您这样的传入电子邮件生成自己的电子邮件地址。该应用程序被编写 (php) 以通过 IMAP 读取传入的电子邮件。

*[顺便说一句，我建议使用专门为您的应用程序设置的单独域，它将邮件服务器和责任分开，并允许客户端更改/升级/重新配置邮件服务器而不会破坏应用程序。]*

您保留将“真实”用户添加到应用程序后端的能力，这意味着如果邮件被意外发送到它，您可以转发“else@”。

额外的好处包括：

*   你得到谷歌垃圾邮件过滤器。
*   你会得到一个网络邮件界面（基本上是gmail）。
*   您可以将域添加为别名，因此可以轻松设置多个域。（**带有警告：您必须将域添加为别名，只有主应用程序域支持包罗万象**）

* * *

涉及的步骤：

1.  在域上设置 google Apps。对于电子邮件，它涉及 DNS 条目，因此最好是在您的控制服务器下的域。
2.  为您的应用添加一个帐户，并设置总括。
3.  构建所说的应用程序；）生成特殊的电子邮件地址应该不是问题——我们使用像 operation.000345@ 这样的格式
4.  构建读取传入邮件的部分。[http://php.net/manual/en/book.imap.php](http://php.net/manual/en/book.imap.php)我们的应用程序将邮件从收件箱移动到“AppArchive”或“AppInvalid”，具体取决于我们是否可以在应用程序中找到与邮件相关的内容。（另外：通过将 AppInvalid 拖回收件箱来轻松调试）。
5.  在 webmail 客户端上使用您的 App 帐户登录，然后观看奇迹发生...

我可以详细说明 IMAP 代码，但这个想法应该很清楚。

* * *

（不过，我们也将 Mandrill 用于不同的项目 - 他们的 API 似乎也是一个不错的方法）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:42:27.177

谢谢大家回答我的问题！！经过几天的研究，我终于得到了一些线索。这是对该问题的编译答案。

首先，在系统中实现[fMailbox](http://flourishlib.com/docs/fMailbox)。[感谢@Nytram，请作为一个问题回答我给你 50 名声望。这个链接意义重大！] 实现它的邮件接收功能。此方法无需接触邮件服务器，无需接触系统环境本身，纯PHP即可！它不是一个框架，所以它只能自由提取部分功能。这是这种情况下最好的工具（如果您知道更好的东西，请提出建议！谢谢）

*   设置 FMailbox

其次，实现 [@Ramon de la Fuente] 的概念。（感谢@Ramon de la Fuente，谷歌应用程序很好，但它已成为历史：P 当它仍然免费时很好，虽然现在很难说服所有客户使用谷歌应用程序。他们可能在现场安装了自己的交换服务器，谁知道 ：））

*   设置客户端单个电子邮件以捕获所有 (*@email.com)

第三，实现[@Nick]的代码。（感谢@Nick，由于隐私和机密问题。客户电子邮件对他们自己也很重要，我们必须尽量减少第三方插件的使用。虽然我喜欢 cloudmailin 的想法）

*   实施 Explode 捕获电子邮件地址部分。

对于发送，自系统定义为捕获所有。只需预定义字段回复，FMailbox 也会捕获它；）

非常感谢所有资源！！

# symfony1 - Symfony1 学说：迁移 - 应用程序“缓存”不存在

> ID：15352794
> 
> 赞同：0
> 
> 时间：2013-03-12T03:31:03.633
> 
> 标签：symfony1, doctrine, migration

我有一个 Symfony1 应用程序，我有一段时间没有碰过它。我已经创建了一些数据库更改作为迁移，并希望将它们应用于

```
./symfony doctrine:migrate 
```

在我的服务器环境中，我收到一条错误消息

```
The application "cache" does not exist. 
```

我以前从未见过这种情况。我还查看了学说插件中的迁移任务，但在任何地方都找不到。我也无法在我的开发系统上重现它。

知道如何诊断这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T00:35:54.227

应用程序目录下有一个文件夹“缓存”。删除它解决了这个问题。

# jquery - Perl 使用 Jquery 显示 html onclick 循环数据库插入

> ID：15352796
> 
> 赞同：0
> 
> 时间：2013-03-12T03:31:14.023
> 
> 标签：jquery, mysql, perl

已编辑** 成为 Perl 新手很难，哈哈。我只是使用了正则表达式和我的哈希，我将我的 cgi 参数读入了。

```
my $regex = qr/tierrate/;
my $count = 0;

foreach (grep { /$regex/ } keys %form) {
$count++;
} 
```

然后我可以使用该计数来确定我的插入循环。

* * *

再一次，我是编程新手。我的 Jquery 和 Perl 技能充其量只是初学者。

我希望能够根据用户添加的表行数将多条记录插入到数据库表中。我不确定如何处理这个问题，因为这是我的第一次非静态尝试。我正在使用 cgi.pm 和 dbi.pm。

我正在显示一些基于按钮单击的 HTML。每次用户选择“添加层”按钮时，我都会显示并尝试插入“层率”“层范围最小值”和“层范围最大值”。用户可以根据需要多次单击该按钮，每次单击他们都会获得一个额外的表格行，我不确定如何循环遍历动态数量的行。

基于用户单击“添加层”按钮，我显示 HTML。

```
\$('#addnewtier').click(function() {

\$('<tr id="inctier'+ (raisetierid++) +'"><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rateplus++) +' Rate</TD><TD ALIGN=left><input type="text" name="tierrate'+ (tierrate++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rangeplus++) +' Range</TD><TD ALIGN=left><font color="#ADD8E6">Minimum&nbsp;<input type="text" name="rangemin'+ (rangemin++) +'" size=10 value="" ><font color="#ADD8E6">&nbsp;Maximum&nbsp;<input type="text" name="rangemax'+ (rangemax++) +'" size=10 value="" ></TD>').appendTo("#inctier1");

}) 
```

用户可以根据需要多次单击该按钮。我很熟悉能够在一定数量的东西上抓取输入，但对于动态数量的东西却不是那么熟悉。我在我发布的代码上方声明了我正在递增的变量。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:20:09.067

当你的 jQuery 添加一个新行时，在你的表单中增加一个计数器变量，然后在你的 perl 代码中使用它来循环你的 vars（这将作为一个帖子最有效，但如果你需要，你可以使用 get ）并阅读您需要的每一行。

换句话说，在您的 HTML 表单中创建一个名为 tierCount 的隐藏输入字段然后在您的 jQuery 中添加一个新行，将其更新为适当的数字
您还需要在添加新行时只使用 1 个增量变量

然后在您的 perl 脚本中，您读取 tierCount 的表单值并循环遍历表单变量，一次读取一组

```
<input type="hidden" name="tierCount" value="1" />  
\$('<tr id="inctier'+ (raisetierid++) +'"><TD ALIGN=left><font color="#ADD8E6">Tier '+ (raisetierid) +' Rate</TD><TD ALIGN=left><input type="text" name="tierrate'+ (raisetierid) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Tier '+ (raisetierid) +' Range</TD><TD ALIGN=left><font color="#ADD8E6">Minimum&nbsp;<input type="text" name="rangemin'+ (raisetierid) +'" size=10 value="" ><font color="#ADD8E6">&nbsp;Maximum&nbsp;<input type="text" name="rangemax'+ (raisetierid) +'" size=10 value="" ></TD>').appendTo("#inctier1");  

$('#tierCount').val(raisetierid);

my $tierCount = $form{"tierCount"}
# Since we start with tier 1 start at 1 instead of the usual 0
for (my $i = 1; $i <= $tierCount; $i++)
{
    my $rate = $form{"rateField" . $i};
    my $range = $form{"rangeField" . $i};
    # Etc, etc
    # then do your insert here for that row
} 
```

请注意，上面的代码没有任何错误检查

# android - 使用 ViewPager 滑动不是很流畅

> ID：15352797
> 
> 赞同：0
> 
> 时间：2013-03-12T03:31:20.797
> 
> 标签：android, performance, android-viewpager

当页面发生变化时，我将动态调整`LinearLayout`用作页面指示器的视图的内容。

具体代码如下：

```
public void onPageSelected(int index) {
    // ...  
    adjustPagerTab(index);
    //...
} 
```

`adjustPagerTab()`是动态更改某些视图的功能。最终切换页面并不顺利。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:34:28.977

如果您自己的方法中的某些内容影响了 ViewPager 滑动的平滑度，那么您很可能在您的 adjustPagerTab 方法中的 UI 线程上做了太多的工作。

你检查过 ViewPagerIndicator 库吗？与 ViewPager 配合得很好，我已经在几个项目中使用了它，没有看到任何像你描述的那样的副作用。

[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

# jquery - 为什么jquery-easyui网格不显示列数据？

> ID：15352801
> 
> 赞同：0
> 
> 时间：2013-03-12T03:31:30.813
> 
> 标签：jquery, json, datagrid, jquery-easyui

我一直在尝试使用`jquery-easyui datagrid`来自[http://www.jeasyui.com/documentation/index.php](http://www.jeasyui.com/documentation/index.php)的。文档声明网格将接受 json 数据，我试图实现这一点，但是这些列永远不会在网格中呈现。

网格显示了适当的行数，每行都有一个行 ID，但是所有其他数据都被省略了。不知何故，网格正在读取 json 数据并知道正确的行数，但不会呈现列数据。

我的json看起来像这样......

```
{"total":2,
 "rows":[
     {"id":"1",
      "name":"Employee One",
      "number":"1",
      "description":"This is the first Employee"
     },
     {"id":"2",
      "name":"Employee Two",
      "number":"2",
      "description":"This is the Second Employee"
     }
     ]
} 
```

我的html看起来像这样......

```
 <table id="dg" title="Surveys" class="easyui-datagrid" style="width:550px;height:250px"  
    url="listJson2"  
    toolbar="#toolbar"  
    rownumbers="true" fitColumns="true" singleSelect="true">  
  <thead>  
    <tr>  
        <th field="id" width="20">Id</th>  
        <th field="name" width="50">Name</th>  
        <th field="number" width="50">Number</th>  
        <th field="description" width="50">Description</th>  
    </tr>  
  </thead>  
 </table> 
```

我相信所有对 js 和 css 文件的引用都是正确的。网格在浏览器中渲染得很好。所有的按钮都在那里，我什至有正确的行数……只是单元格中没有数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-21T12:49:01.400

我遇到了同样的问题，我发现如果表格的宽度通过css默认设置为100%，那么它就不起作用了，

我知道它有点老问题，但可能对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:19:44.733

尝试加载数据，

```
var list=[
            {"id":"1",
                "name":"Employee One",
                "number":"1",
                "description":"This is the first Employee"
               },
               {"id":"2",
                "name":"Employee Two",
                "number":"2",
                "description":"This is the Second Employee"
               }
               ];

$('#dg').datagrid('loadData', list); 
```

# php - 在函数调用中强制转换 var

> ID：15352802
> 
> 赞同：0
> 
> 时间：2013-03-12T03:31:32.833
> 
> 标签：php, scalar, type-hinting

所以如果我建立一个类...

```
class Foo {
    public $_string;
    public function($sString = 'new string') {
        $this->_string = $sString;
    }
} 
```

我想在我的函数参数中强行说 $​​sString 是字符串类型，就像这样......

```
class Foo {
    public $_string;
    public function(string $sString = 'new string') {
        $this->_string = $sString;
    }
} 
```

但是我的IDE说“未定义的类'String'”并且php会抛出错误，所以有没有办法强制说明将什么类型的变量传递给类中的函数，或者我必须像这样在函数中声明它...

```
class Foo {
    public $_string;
    public function($sString = 'new string') {
        $this->_string = (string)$sString;
    }
} 
```

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:33:57.453

今天不行。PHP 5.4 可能有一个`scalar`类型提示，但是这已经被提议随后被丢弃。

您所能做的就是在正文中进行 is_string() 检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:34:28.593

您所描述的是“类型提示”并且 PHP 支持它，但是（出于某种原因）它不允许它用于任何内置的内在类型或`string`（[http://php.net/manual/en/language .oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)），它解释了你遇到的问题。

您可以通过在函数内部手动调用来解决此`is_string`问题，但如果您控制上游调用者，则不需要这样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:35:46.387

你可以使用`is_string`函数来检查它。

```
if (is_bool($message)) {
  $result = 'It is a boolean';
}
if (is_int($message)) {
  $result = 'It is a integer';
}
if (is_float($message)) {
  $result = 'It is a float';
}
if (is_string($message)) {
  $result = 'It is a string';
}
if (is_array($message)) {
  $result = 'It is an array';
}
if (is_object($message)) {
  $result = 'It is an object';
} 
```

检查这个。

```
class Foo {
    public $_string;
    public function($sString = 'new string') {
        if (is_string($sString)) {
           $this->_string = $sString;
        }
    }
} 
```

# javascript - 如何检查图像是否缓存在js中？

> ID：15352803
> 
> 赞同：12
> 
> 时间：2013-03-12T03:31:34.803
> 
> 标签：javascript, image, browser-cache

当我参加面试时，被问到这个问题，我不知道如何回答。

你知道问题的关键吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-12T03:35:21.567

检查对象的`complete`属性是否为：`Image``true`

```
function is_cached(src) {
    var image = new Image();
    image.src = src;

    return image.complete;
} 
```

它似乎有效（尽管如果图像不在缓存中，它会加载图像，这可能不是您想要的）：

```
> is_cached('http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3')
false
> is_cached('http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3')
true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T03:37:25.780

你可以检查：

```
function is_cached(img_url){
    var imgEle = document.createElement("img");
    imgEle.src = img_url;
    return imgEle.complete || (imgEle.width+imgEle.height) > 0;
}

//and check, returns true or false depending on cached or not
is_cached("http://www.somesite.com/some_image.jpg"); 
```

# java - 谷歌应用商店数据存储数据在静态文件中

> ID：15352805
> 
> 赞同：0
> 
> 时间：2013-03-12T03:31:39.677
> 
> 标签：java, javascript, python, html, google-app-engine

所以这就是我想要做的。我想在 Google App Engine 中有一个静态 HTML 和 javascript 文件（顺便说一下，我可以用 Java 或 Python 编写它）。所以我希望用户访问我的`index.html`文件并从数据存储中获取信息，但我该怎么做呢？

我知道您必须从 Java 或 Python 访问数据存储，但是一旦我使用这些语言获取数据，我如何让它出现在我的`index.html`页面上（最好不刷新）。我试图在任何地方找到这些信息，但我能找到的只是如何使用这两种语言访问数据存储，而不是如何获取该数据并将其放入我的 HTML 页面。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:49:44.660

您可以使用[GqlQuery](https://developers.google.com/appengine/docs/python/datastore/gqlqueryclass)将数据作为 python 对象获取。使用[GqlEncoder](https://gist.github.com/mentat/1334268)将 GQL 转换为 JSON。self.response.write() 将数据写入 url。然后，使用 javascript，您可以创建一个[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)以从该 url 获取数据，并将 javascript 包含到 html 中。

[在XHR](https://stackoverflow.com/a/15270604/1126809)上执行类似任务的 stackoverflow 问题/答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:15:30.143

我假设您可以访问数据存储中的数据，并且希望在 index.jsp 上显示它。假设您的数据是带有属性 "user" 和 "content" 的问候语。然后你可以在你的jsp文件中这样写。

```
if (greetings.isEmpty()) {
%>
<p>Guestbook '<%= guestbookName %>' has no messages.</p>
<%
} else {
%>
<p>Messages in Guestbook '<%= guestbookName %>'.</p>
<%
for (Entity greeting : greetings) {
   if (greeting.getProperty("user") == null) {
%>
   <p>An anonymous person wrote:</p>
<% 
} else {
%>
<p><b><%= ((User) greeting.getProperty("user")).getNickname()
%></b> wrote:</p>
<%
}
%>
    <blockquote><%= greeting.getProperty("content") %></blockquote>
<%
}
}
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:49:39.250

Python 或 Java 应用程序在服务器上运行，而您拥有的任何 Javascript 功能都在客户端（在 Web 浏览器中）运行。[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)通常是两者之间通信的最佳方式。

# php - CKeditor 更改按钮文本

> ID：15352812
> 
> 赞同：2
> 
> 时间：2013-03-12T03:32:41.167
> 
> 标签：php, javascript, ckeditor

嗨，我需要更改“发送到服务器”按钮内的文本，但我找不到包含该类的文件。有人知道那个文本在哪里吗？我正在使用 CKeditor 插件 ![在此处输入图像描述](../Images/ca0c57a937169859ae2b61f50e979807.png)

# c# - 将对象转换为列表 I've looked at similar questions but nothing quite fits. I have an object which happens to contain a List. I'd like to get it into something I can enumerate. For example: object listObject; 问问题 问问题 2013-03-12T03:33:13.160 153 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I've looked at similar questions but nothing quite fits. I have an object which happens to contain a List. I'd like to get it into something I can enumerate. For example: object listObject; // contains a List <something>List list; list = listObject as List; // list contains null after foreach ( object o in list ) { // do stuff } The conversion from object to List is the problem. EDIT: What I finished with: object listObject; // contains a List <something>List list; IEnumerable enumerable = listObject as IEnumerable; if ( enumerable != null ) { list = enumerable.Cast().ToList(); foreach ( object o in list ) { // do stuff } } Try This: list = (listObject as IEnumerable).Cast().ToList() c#listobject 4 1 回答 1 This answer is useful 7 尝试这个： list = (listObject as IEnumerable).Cast().ToList() 于 2013-03-12T03:35:30.087 回答 Related 0 python - 如何杀死/重新加载/自动重新加载具有 SSE 等持久连接的 django 服务器？ 0 facebook - Facebook iOS 应用有时在授权后不会切换回我的应用 2 linux - 在 Linux 文件权限上使用布尔 AND 1 nginx - 定位路线不匹配 6 javascript - 'this' 关键字并不总是指定义方法的对象，而是可以根据特定上下文进行更改。如何？ 0 javascript - 带有元素数组的node.js玉+快递表 1 java - 在 RHS 的 Spring XML 中引用属性的属性？ 2 java - JOptionPane 上的 ActionListener 2 java - 以编程方式生成 python 源代码的库？ 5 javascript - 使用大量术语，搜索页面文本并用链接替换单词 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15352815
> 
> 赞同：3
> 
> 时间：
> 
> 标签：c#, list, object

I've looked at similar questions but nothing quite fits. I have an object which happens to contain a List. I'd like to get it into something I can enumerate.

For example:

```
object listObject;          // contains a List<Something>
List<object> list;

list = listObject as List<object>;   // list contains null after

foreach ( object o in list )
{
    // do stuff
} 
```

The conversion from object to List<object> is the problem.

**EDIT:**

What I finished with:

```
object listObject;          // contains a List<Something>
List<object> list;

IEnumerable enumerable = listObject as IEnumerable;

if ( enumerable != null )
{
    list = enumerable.Cast<object>().ToList();

    foreach ( object o in list )
    {
         // do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T03:35:30.087

尝试这个：

```
list = (listObject as IEnumerable).Cast<object>().ToList() 
```</something></something>

# java - 条件变量？

> ID：15352819
> 
> 赞同：0
> 
> 时间：2013-03-12T03:33:24.757
> 
> 标签：java

我不太确定这叫什么，所以很难查找，最好向您展示我正在尝试做的事情。

我想创建一个条件变量

```
String fileName = (if (this.filename != null) { return this.filename; } 
                   else { return "default value"; }); 
```

这应该很清楚我要做什么。我想使用某种条件来根据另一个变量输入来设置这个变量，在这种情况下它是否等于 null 。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T03:35:20.163

使用三元运算符。在我看来，这是[防御性编程](http://en.wikipedia.org/wiki/Defensive_programming)中的一种策略。

```
String fileName = (this.filename != null? this.filename : "default value"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T03:35:13.777

```
String fileName = this.filename != null ? this.filename : "default value"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T03:37:25.900

或者，更冗长但（也许）更容易理解

```
String aFilename;
if (this.filename != null)
  aFilename = this.filename;
else
  aFilename = "Default Value";
return aFilename; 
```

我更喜欢 Careal 的代码，但更喜欢 YMMV。有些人发现 ? 运算符复杂（尤其是在杂乱的情况下）

此外，当使用调试器单步执行时，此代码将更容易查看发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T03:36:33.530

您可以使用[三元运算符](http://java.about.com/b/2009/06/06/java-term-of-the-week-ternary-operator.htm)：`boolean expression ? value1 : value2`

```
String fileName = fileName == null ? "Default value" : this.filename; 
```

# r - 重新排序数据并在 r 中重新排序列表

> ID：15352826
> 
> 赞同：0
> 
> 时间：2013-03-12T03:34:13.430
> 
> 标签：r, sorting, levels

我之前问过这个问题：”

如何在 r 中重新排序具有多个物种的数据框。每个物种都有不同数量的观察结果，我需要按降序排列最终数据框，其中观察结果最多的物种首先列出。在这个例子中，最终的数据帧应该首先查看列表物种 B，然后是物种 C，最后是物种 A。”

```
colA= c("C","C","C","B","B","B","B","A","A")
colB= c(1.1,2.1,3.1,4.1,5.1,6.1,7.1,8.1,9.1)
colC= c(-1.2,-2.1,-3.1,-4.1,-5.1,-6.1,-7.1,-8.1,-9.1)
df= data.frame (spp=colA, latitude=colB, longitude=colC)
df 
```

我收到了一个很好的答案，效果很好：

```
# add a column counting the number of rows in each species
df <- transform(df, n  = ave(latitude ,spp, FUN = length))
# order by this new column
dfordered <- df[order(df$n),decreasing = TRUE] 
```

但现在我又陷入了制作一个包含有序物种名称的对象“物种”中。现在我有：

```
species <- levels(df$spp) 
```

此命令按字母顺序将所有内容放回原处，但我需要按“n”（记录数）对对象进行排序。有什么建议么。提前致谢！

干杯，以色列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:53:14.843

如果您主要对相对丰度感兴趣，您可能还希望您的`spp`因子按频率排序。在这种情况下，使用`reorder()`来根据需要排列其级别，然后对 data.frame 进行排序，以便观察最多的物种排在第一位。

```
df <- transform(df, spp = reorder(spp, spp, length))
df[order(df$spp, decreasing=TRUE),]
#   spp latitude longitude
# 4   B      4.1      -4.1
# 5   B      5.1      -5.1
# 6   B      6.1      -6.1
# 7   B      7.1      -7.1
# 1   C      1.1      -1.2
# 2   C      2.1      -2.1
# 3   C      3.1      -3.1
# 8   A      8.1      -8.1
# 9   A      9.1      -9.1

## To see one advantage of reordering the factor levels
barplot(table(df$spp)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:40:42.863

这就像使用`unique`. 我强制`character`这样做，以免混淆级别和实际值。

```
 unique(as.character(dfordered$spp)) 
```

要从原始数据到这里，请使用`table`

```
table(df$spp)

##  A B C 
##  2 4 3 
```

你可以排序这个

```
sppCount <- table(df$spp)

names(sort(sppCount, decreasing = TRUE))

# [1] "B" "C" "A" 
```

# android - 无法让安卓闪光灯小部件打开闪光灯

> ID：15352827
> 
> 赞同：1
> 
> 时间：2013-03-12T03:34:13.667
> 
> 标签：android, flash, widget, galaxy, light

我正在尝试为galaxy nexus 制作一个闪光灯小部件，并且已经被这个问题困扰了好几天。我有一个小部件，它由一个功能类似于切换的按钮组成。但我无法获得打开闪光灯的按钮。该小部件用作使用 toast 的切换，但是一旦我添加了与 flash 通信的代码行，它就会崩溃。因此，如果您只在每个 if 语句中留下 toast 代码，那么 toast 就可以工作。我知道我应该使用 SurfaceHolder.Callback，但我不知道如何在扩展 AppWidgetProvider 的类上实现它。如果有人可以查看我的代码并尝试帮助我制作这个小部件，我将不胜感激。我只是不知道如何使用 appwidgetprovider 类来实现这一点。

仅当我有以下情况时才会出现此错误：

```
//TURN FLASH OFF
Parameters p = cam.getParameters();
p.setFlashMode(Parameters.FLASH_MODE_OFF);
cam.setParameters(p);
cam.stopPreview(); 
```

和：

```
//TURN FLASH ON
Parameters p = cam.getParameters();
p.setFlashMode(Parameters.FLASH_MODE_TORCH);                    
cam.setParameters(p);
cam.startPreview(); 
```

如果我不把这些代码行放进去，小部件运行没有错误，只显示祝酒词。这意味着它访问 onReceive() 方法。

我正在使用银河系。

```
public class FlashWidget extends AppWidgetProvider {

Camera cam;
RemoteViews view;
private static final String ACTION_WIDGET_RECEIVER = "Action";
private static boolean isLightOn = false;

 @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        final int n = appWidgetIds.length;
        view = new RemoteViews(context.getPackageName(), R.layout.widget_lay);

        for (int i = 0; i < n; i++) {  
               int appWidgetId = appWidgetIds[i];  

               Intent intent = new Intent(context, FlashWidget.class);
               intent.setAction(ACTION_WIDGET_RECEIVER);

               PendingIntent pend = PendingIntent.getBroadcast(context, 0, intent, 0);

               view.setOnClickPendingIntent(R.id.button1, pend);

               appWidgetManager.updateAppWidget(appWidgetId, view);
        }

    }

    @Override
    public void onReceive(Context context, Intent intent) {

        String action =intent.getAction();

        if(intent.getAction().equals(action)) {

            //YES ITS ON, so turn it OFF
            if(isLightOn) {

                isLightOn = false;
                //TURN FLASH OFF
                Parameters p = cam.getParameters();
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                cam.setParameters(p);
                cam.stopPreview();
                Toast.makeText(context, "Flash OFF", Toast.LENGTH_SHORT).show();

            //NO ITS OFF, SO LETS TURN IT ON
            } else {

                isLightOn = true;
                //TURN FLASH ON
                Parameters p = cam.getParameters();
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);

                cam.setParameters(p);
                cam.startPreview();
                Toast.makeText(context, "Flash ON", Toast.LENGTH_SHORT).show();

            }

            super.onReceive(context, intent);

        }

    } 
} 
```

AndroidManifest.xml

```
<uses-sdk
android:minSdkVersion="14"
android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.CAMERA"/>
<uses-feature android:name="android.hardware.camera"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.flash.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver 
        android:name=".FlashWidget"
        android:label="Flash">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
            <action android:name="com.example.flash.ACTION_WIDGET_RECEIVER"/>
            <action android:name="android.appwidget.action.APPWIDGET_ENABLED"/>
        </intent-filter>
        <meta-data 
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_in"/>
   </receiver>
</application>

</manifest> 
```

这是我尝试将小部件放在主屏幕上时遇到的错误

```
E/AndroidRuntime(10346): FATAL EXCEPTION: main
E/AndroidRuntime(10346): java.lang.RuntimeException: Unable to start receiver com.example.flash.FlashWidget: java.lang.NullPointerException
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2236)
E/AndroidRuntime(10346): at android.app.ActivityThread.access$1500(ActivityThread.java:130)
E/AndroidRuntime(10346): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T07:26:19.283

```
Add camera.open();
if(isLightOn){           
        Log.i("info", "torch is turned off!");
        parameter.setFlashMode(Parameters.FLASH_MODE_OFF);
        Global.camera.setParameters(parameter);
        ibtnSwith.setBackgroundResource(R.drawable.switch_off);
        isLightOn = false;

    } else {
        parameter.setFlashMode(Parameters.FLASH_MODE_TORCH);
        Global.camera.setParameters(parameter);                 
        isLightOn = true;
        ibtnSwith.setBackgroundResource(R.drawable.switch_on);
        playsound();
        Log.i("Home.java", "Torch is turned on!");  
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T14:31:45.207

在nexus设备中，它应该添加一个转储表面以使闪存工作，我搜索了很长时间，我尝试了互联网上的每个代码，但闪存没有打开，最后我找到了如下解决方案：

```
private void turnLEDOn() 
{
    // In order to work, the camera needs a surface to turn on.
    // Here I pass it a dummy Surface Texture to make it happy.
    camera = Camera.open();
    camera.setPreviewTexture(new SurfaceTexture(0));
    camera.startPreview();
    Parameters p = camera.getParameters();
    p.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
    camera.setParameters(p);`enter code here`
}

private void turnLEDOff()
{
    if (camera != null)
    {
        // Stopping the camera is enough to turn off the LED
        camera.stopPreview();
        camera.release();
        camera = null;
    } else
        throw new NullPointerException("Camera doesn't exist to turn off.");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:34:04.597

您必须在 manifest.xml 文件中添加一些条件

```
<receiver
        android:name=".FlashWidget "
        android:label="FlashLight">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>            
        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/your xml file" />
    </receiver> 
```

如果您发现任何问题，请告诉我。

# javascript - ASP .NET 更改中继器内的链接颜色 - 单击

> ID：15352828
> 
> 赞同：0
> 
> 时间：2013-03-12T03:34:16.737
> 
> 标签：javascript, jquery, iphone, asp.net, repeater

我有以下标记，我们在 iphone 4 上运行它，所以像 Hover 这样的一些 CSS 元素不起作用。

```
<asp:Repeater ID="rpt" runat="server">
    <HeaderTemplate>
        <div class="table withshadow">
    </HeaderTemplate>
    <ItemTemplate>
         <a href='<%#Eval("HistoryTeacherURL")%>' class="tablerow list navigate">
            <div class="tablecell listitem left">
                <asp:Label ID="lblDesc" Text='<%#Eval("Name")%>' runat="server" CssClass="item" /><br />                    
            </div>                            
            <div class="tablecell listitem right">
                <touch:TutorialSheets ID="lblBal" Text='<%#Eval("Tutorial")%>' runat="server" CssClass="amount item" />
            </div>
            <div  class="tablecell listitem witharrow">                        
            </div>
         </a>
    </ItemTemplate>
    <FooterTemplate>
        </div>
    </FooterTemplate>
</asp:Repeater> 
```

我们想要的是，当我们点击链接时，颜色应该变为红色！问题是这种类型的 CSS 可以在 Firefox 上运行，但不能在 iphone 4 上运行。

```
a:active
{    
    background-color: #31ac48;
    font-color: #ffffff;
} 
```

看到这个问题的替代解决方案（javascript、jquery 等）也很棒，这样至少其中一个可以在 iphone 4 上运行 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:42:17.147

您可以使用 jQuery。

```
$("a").click(function() {
    if $(this).is(":active") {
        (this).css("font-color", "red");
    }
}); 
```

见小提琴：http: [//jsfiddle.net/bMyMd/](http://jsfiddle.net/bMyMd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:32:23.593

你是使用所有的伪类还是只使用一个？
如果您至少使用两个，请确保它们的顺序正确，否则它们都会中断：

```
a:link
a:visited
a:hover
a:active 
```

以该顺序。此外，如果您只是使用`:active`，请添加`a:link`，即使您没有对其进行样式设置。

# c - 变量在输入之前随机变为空

> ID：15352833
> 
> 赞同：0
> 
> 时间：2013-03-12T03:34:33.317
> 
> 标签：c, ncurses

所以，这是我的问题。我正在使用 ncurses，当我按下向上或向下按钮时，它会显示向上箭头，所以我希望继续我的 while 循环，并接受进一步的输入。问题是，在这个过程中输入的变量以某种方式变为 NULL 并且它存在。这是为什么？我想要的是它打印向上或向下箭头，并且程序正常进行。

```
int ch;
char input[100];
initscr();
raw();
keypad(stdscr, TRUE);
noecho();
ch = getch();
if(ch== KEY_UP)
    printf("\nUp Arrow"); fflush(stdout);

if(ch== KEY_DOWN)
    printf("\ndown Arrow");fflush(stdout);

endwin(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:34:59.003

这是一个基于您的代码的 SSCCE（[简短、独立、完整的示例）：](http://sscce.org/)

```
#include <stdio.h>
#include <stdlib.h>
#include <curses.h>

int main(void)
{
    int ch;
    char input[100];

    initscr();
    raw();
    keypad(stdscr, TRUE);
    noecho();
    ch = getch();
    endwin();

    if (ch== KEY_UP)
        printf("\nUp Arrow\n");

    if (ch== KEY_DOWN)
        printf("\ndown Arrow\n");

    fflush(stdout);

    while(1)
    {
        if (fgets(input, sizeof (input), stdin) == NULL) 
        {
            printf("Early exit\n");
            exit(0);
        }
        printf("Read: %s", input);
        fflush(stdout);
    }

    printf("Late exit\n");
    return 0;
} 
```

当我运行它时，它会正确检测我是否使用向上或向下箭头键，并在我调用之后`endwin()`而不是之前报告它。通常`fflush()`不需要调用，但似乎标准输出是完全缓冲的，而不是在你完成后缓冲的行`curses`，这有点令人惊讶。（我在 Mac OS X 10.8.2 上进行测试。）

我使用的另一个技巧是诊断打印，所以我知道发生了什么。我调用了程序`curses`，当我运行它时，屏幕清除了；然后我输入了一个向上箭头（在这种情况下），然后`sssddd`返回，然后`Control-D`表示输入结束（EOF），其余的输出是：

```
$ ./curses

Up Arrow
sssddd
Read: sssddd
Early exit
$ 
```

除了标准输出的缓冲之外，它的行为都符合我的预期。在这个程序中没有办法进入`Late exit`print 语句。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-12T03:45:35.130

如前所述，输入未定义。此外， fgets 用于文件输入流，而不是用于读取 std 输入流。（改用gets）

# php - 为什么这个 php 函数会导致服务器 500 错误？

> ID：15352845
> 
> 赞同：0
> 
> 时间：2013-03-12T03:35:44.800
> 
> 标签：php, mysql, function

我试图在一个单独的文件中实现这两个函数`functions.php`并调用它`index.php`

```
function is_field($column, $table, $requested) {

    $is_field_query = "SELECT ".$column." FROM ".$table." WHERE ".$column."='".$requested."'";
    $is_field_result = $mysqli->query($is_field_query);

    $is_true = $is_field_result->num_rows;

    $is_field_result->close();

    return $is_true;

}

function get_content($column, $table, $requested) {

    $get_content_query = "SELECT ".$column." FROM ".$table." WHERE ".$column."='".$requested."'";
    $get_content_result = $mysqli->query($get_content_query);

    $get_content_row = $get_content_result->fetch_array(MYSQLI_ASSOC);
    $get_content_content = $get_content_row["content"];

    $get_content_result->close();

    return $content;

} 
```

我一遍又一遍地尝试过，我不知道为什么它不起作用。第一个返回 1 表示有效或 0 表示无效。第二个从 MySQL 表中的特定单元格检索内容。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:45:53.597

您在`$mysqli`函数内部使用，但您从未传递 MySQLi 资源本身。考虑像这样编写你的函数：

```
function is_field($mysqli, $column, $table, $requested) { 
```

或者，创建一个获取 MySQLi 资源的类，并`$this->mysqli`在您的函数中引用它。

此外，这样的代码可能是另一个问题：

```
$is_field_result = $mysqli->query($is_field_query);

$is_true = $is_field_result->num_rows; 
```

你不是在检查是否`$is_field_result`是`false`; 因此，下一条语句会导致致命错误，因为无法从不是对象的东西中获取属性。

```
if (($is_field_result = $mysqli->query($is_field_query)) === false) {
    die($mysqli->error);
}
$is_true = $is_field_result->num_rows; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:55:10.580

事实证明它不起作用的原因是我需要在函数中添加一个额外的字段来接受来自连接的 $mysqli 传递。

```
function is_field($mysqli, $column, $table, $requested) {

$is_field_query = "SELECT * FROM $table WHERE $column='$requested'";
if (($is_field_result = $mysqli->query($is_field_query)) == false) {        
    die($mysqli->error);        
}   
$is_true = $is_field_result->num_rows;
$is_field_result->close();
return $is_true;

}

function get_content($mysqli, $column, $table, $requested) {

$get_content_query = "SELECT * FROM $table WHERE $column='$requested'";
if (($get_content_result = $mysqli->query($get_content_query)) == false) {
    die($mysqli->error);
}
$get_content_row = $get_content_result->fetch_array(MYSQLI_ASSOC);
$get_content = $get_content_row["content"];
$get_content_result->close();
return $get_content;

} 
```

# ruby-on-rails - 无法设置 ActiveRecord 属性 - 卡住为 Fixnum

> ID：15352847
> 
> 赞同：0
> 
> 时间：2013-03-12T03:35:49.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我将记录的时间戳属性（`datetime`类型）设置为`0`. 我保存了它（或没有保存）。我试图重新设置它`0`。

```
a = MyModel.last # => #<MyModel id:...
a.updated_at     # => Tue, 12 Mar 2013 01:36:17 UTC +00:00
a.updated_at = 0 # => 0
a.updated_at = 0 
```

我有：

```
NoMethodError: undefined method `change' for 0:Fixnum 
```

即使在重新启动 rails 并从数据库（本地 sqlite3）重新加载记录之后也会发生这种情况。帮助！

编辑：rails 控制台堆栈跟踪比我从服务器获得的更有启发性：

```
NoMethodError: undefined method `change' for 0:Fixnum
       from /Users/nolan/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.11/lib/active_record/attribute_methods/time_zone_conversion.rb:69:in `round_usec'
       from /Users/nolan/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.11/lib/active_record/attribute_methods/time_zone_conversion.rb:46:in `fields_updasqliteted_at='
       from (irb):23
       from /Users/nolan/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
       from /Users/nolan/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
       from /Users/nolan/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
       from script/rails:8:in `require'
       from script/rails:8:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:36:57.680

您可以使用[update_column](http://apidock.com/rails/ActiveRecord/Persistence/update_column)绕过 Rails 回调和验证。

对于这种特殊情况，使用 update_column 将绕过 RoR 使用的时区和其他方法回调，这些回调将失败，因为它不期望 FixNum。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:15:16.720

由于魔术列的类型为日期时间，因此您不能为其分配整数。如果您愿意，可以使用以下链接：

[Ruby / Rails：将int转换为时间或从整数获取时间？](https://stackoverflow.com/questions/2871402/ruby-convert-int-to-time)

# javascript - epub阅读器ios中的文本突出显示和添加注释功能

> ID：15352852
> 
> 赞同：2
> 
> 时间：2013-03-12T03:36:29.903
> 
> 标签：javascript, ios, epub

我正在为 ios 和 android 开发 epub 阅读器。我想实现文本突出显示并向我的 epub 阅读器添加注释功能。我想知道如何将这些功能用于固定布局 epub。我可以通过`javascript:window.getSelection()`. 我想保存和检索这些对象以供将来使用。这是我用于突出显示和保存文本的代码：

```
var selection;
var storedSelections[];

function highlightText() {
if (window.getSelection) {
    selection = window.getSelection();
}
 if (selection.rangeCount > 0) {
    var range = selection.getRangeAt(0);
    var selectedText = range.toString();
    var span = document.createElement("span");
    span.id = "span_" + range.startOffset + "_" + range.endOffset ;
     alert(span.id);
    span.onclick = function() {
    myOnclikFunction(selectedText);};
span.setAttribute("class","uiWebviewHighlight");
    span.style.backgroundColor  = "skyblue";
    range.surroundContents(span);

    selection.removeAllRanges();
    selection.addRange(range);

    for (var i = 0; i < selection.rangeCount; i++) {
        storedSelections.push (selection.getRangeAt (i));
    }
    selection.removeAllRanges();
    localStorage.setItem('storedSelections',storedSelections);
}} 
```

我使用此代码检索突出显示的文本：

```
function ShowStoredSelections () {
storedSelections.length=0;
var retrieved= localStorage.getItem('storedSelections');
storedSelections.push (retrieved);
var selection = window.getSelection ();
for (var i = 0; i < storedSelections.length; i++) {
    selection.removeAllRanges ();
    selection.addRange (storedSelections[i]);
    if (selection.rangeCount > 0) {
        var range = selection.getRangeAt(0);
        var selectedText = range.toString();

        var span = document.createElement("span");
        span.id = "span_" + range.startOffset + "_" + range.endOffset ;
        span.onclick = function() {
            myOnclikFunction(selectedText);
        };
        span.setAttribute("class","uiWebviewHighlight");
        span.style.backgroundColor  = "red";
        range.surroundContents(span);
        selection.removeAllRanges();
        selection.addRange(range);
    }
}} 
```

我无法将检索到的文本添加到`selection.addRange`. 我在这做错了什么？

请给我一些想法或建议来克服这个问题。

提前感谢您的任何回复或回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-07T14:40:52.467

我已经为 androd 和 iOS 的本地 epub 播放器实现了所有这些 - 它是一个组织的产品研发

而不是使用 getSelection 遵循以下步骤。它的乏味但功能将完全在您的控制之下

-> 将 url 提供给 UIWebView (iOS) 或 WebView (android)

-> 在 webview didload 的回调中 - 将所有文本单词包装到具有唯一 ID的 span 中

-> 将触摸事件传播到 webview- javascript 将使用这些触摸处理`function onTouchMove(e)`

-> 被触摸跨度使用`document.elementFromPoint`

-> 突出显示这些跨度（单词） -> 您将获得每个跨度的位置 `$('#wordID-'+sWordID).position()`，您可以将这些值从 javascript 传递到本机代码

-> 将便签视图添加到 webview 的超级视图

注意：更好地在运行时将 jQuery 注入到 webview 中，以便将单词包装成 span

# jquery - 将多个 jquery 小部件附加到容器

> ID：15352866
> 
> 赞同：0
> 
> 时间：2013-03-12T03:38:23.520
> 
> 标签：jquery, jquery-ui, jquery-widgets

我目前正在尝试将多个小部件附加到容器中。

```
$( "#addbutton" ).click( function() {  
    newid++;
    $("#designspace").append($("<div></div>").mywigdet({id:newid,top:100,left:100,width:100,height:100,color:"blue",text:"Hello"}));        
}); 
```

通过这种方式，我需要创建一个 div，然后将小部件添加到该 div 中。小部件本身在 _create 中执行以下操作

```
 ...
 this._container = $('<div class="label-container" id="' + newid +'" style="position:relative; border:1px solid black;"></div>').appendTo(this.element);
 this._setOptions({
      'top': this.options.top,
      'left': this.options.left,
      'width': this.options.width,
      'height': this.options.height,
      'color': this.options.color,
      'text': this.options.text
 });
 ... 
```

虽然它起作用，但它会在另一个容器中创建一个容器。

但是因为我的小部件中有相对定位代码，所以这个方法阻止它工作，因为空白容器 DIV 的位置是父级。

我可以将位置内容移动到容器 DIV 中，但这会带走使用小部件的一些灵活性。

有没有更好的方法来完成向一个容器添加多个小部件而不创建子容器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:50:10.130

我以前没有真正玩过 jquery-widgets。我认为你的问题是：

```
this._container = $('<div class="label-container" id="' + newid +'" style="position:relative; border:1px solid black;"></div>').appendTo(this.element); 
```

而是使用以下方法修改 this.element 本身：

```
$(this.element).attr('id',newid);

$(this.element).addClass('label-container');
... 
```

**编辑：**我建议用另一个 CSS 类替换样式属性。

[jQuery CSS](http://api.jquery.com/css/)

[jQuery addClass](http://api.jquery.com/addClass/)

# ios - iOS：如何防止应用程序进入后台拨打电话时显示启动画面？

> ID：15352868
> 
> 赞同：3
> 
> 时间：2013-03-12T03:38:26.123
> 
> 标签：ios, objective-c, memory-management, splash-screen

我正在开发的应用程序只有在进入后台拨打电话时才会自动显示启动画面。

退出应用程序并再次激活的其他功能不会“激活”启动画面。例如，离开应用程序进入外部网站、手机地图或其他应用程序并返回应用程序将向用户显示之前的状态，并且不会显示启动画面。

这是可以由应用程序端控制的东西，还是苹果在拨打电话时自动处理的 iOS 功能？

我已经管理了应用程序端的泄漏，现在一切都很好，所以它与应用程序端的内存管理没有任何关系。还有什么可以间接完成的，这样启动画面就不会显示了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:58:58.463

启动图像不是“启动画面”。启动图像用于防止在加载应用程序时显示黑屏，**您应该将其与应用程序内屏幕一起使用，以**提供快速启动的感觉。如果不显示启动图像，则会出现黑屏。

## 解决方法

因此，作为解决方法，我的建议是您拍摄应用程序的静态快照，一些通用的东西（如背景和工具栏）并将其用作启动图像。这将使应用程序立即启动，没有“启动图像”。这就是 Apple 应用程序所做的事情，您可以在股票或设置等应用程序中看到这一点。

![在此处输入图像描述](../Images/75274ba3b5f140d4236c035334f2df68.png)

你看？。左侧屏幕是您的启动图像的外观。

查看此 Apple 文档[iOS 人机界面指南](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5)以了解此主题。

祝你好运！

# regex - 正则表达式：如何匹配没有最后一位数字的字符串？

> ID：15352871
> 
> 赞同：1
> 
> 时间：2013-03-12T03:38:46.123
> 
> 标签：regex, preg-match

这是我的字符串：`left_image_12`。

我想省略`_12`，只显示`left_image`。我无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:43:22.087

您可以使用捕获组来做到这一点：

```
^(.*?)_\d+$ 
```

$1（或 \1，取决于您的语言）将包含名称，但最后没有数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:46:04.130

试试这个：

```
preg_match($string, "/^([A-Za-z_]+)_\d+$/", $match);
$output = $match[1]; 
```

# java - 如何向对象添加或减去字符串值，并在对象为空时将值设置为“无”？

> ID：15352880
> 
> 赞同：1
> 
> 时间：2013-03-12T03:39:36.287
> 
> 标签：java

我有一个类`Passengers`，它有成员属性`String name`, `int health`, 和`String disease`setter 和 getter 方法。该`disease`变量最初将保持`null`. 这是那节课

```
public class Passengers
{
    private String name;
    private int health;
    private String disease;

    public Passengers(String _name, int _health, String _disease)
    {
        name = _name;
        health = _health;
        disease = _disease;
    }

    public void setHealth(int _health)
    {
        health = _health;
    }
    public void setDisease(String _disease)
    {
        disease = _disease;
    }

    public String getName()
    {
        return name;
    }
    public int getHealth()
    {
        return health;
    }
    public String getDisease()
    {
        return disease;
    }
} 
```

我想知道的是如何将新字符串添加到此变量中，然后如何删除。例如，一位乘客比尔从`null`他的疾病开始，然后感染了疟疾和感冒。比尔的`disease`变量现在应该保持`malaria, cold`。现在假设用户选择治疗比尔的疟疾。我将如何
1）添加疟疾和感冒
2）从中减去疟疾`disease`？

每当我试图用

```
passengers[index].setDisease() = null; 
```

它说“错误：类Passengers中的方法setDisease不能应用于给定类型：
必需：
找到字符串：无参数”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:40:55.047

我建议将疾病[设为](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)一组字符串。

```
Set<String> diseases = new HashSet<String>();

void addDisease(String disease) {
    diseases.add(disease);
}

void removeDisease(String deisease) {
    diseases.remove(disease);
} 
```

`Set`在这种情况下， s 比其他“更好”，`Collections`因为它们不能保存重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:40:44.057

你应该给一个类`List<String>`如 an`ArrayList<String>`并将疾病放在这个列表中。

更好的是，创建一个疾病类或枚举，让您的乘客类使用 a`List<Disease>`并避免过度使用字符串。然后，您可以为该类提供公共`addDisease(Disease disease)`和`removeDisease(Disease disease)`方法。

顺便说一句，上面的类应该命名为单数Passenger，而不是复数Passengers，因为它代表单个Passenger 的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:14:28.980

对于您的要求，如果您使用`List`like`ArrayList`您可以通过 访问您的元素（疾病名称）`index`，但它会允许插入重复数据（可能会多次添加相同的疾病，这将不必要地增加疾病的数量并且可能会出现一些问题）。如果您使用`Set`like`HashSet`它将仅允许唯一元素，因此不会出现与重复条目相关的问题，但同时您无法访问 a `particular disease by index`（如果您需要，截至目前我不知道您的进一步要求）。因此，据我所知，我建议您使用`LinkedHashSet(HashSet with Linked approach)`它将为您提供 FIFO 订单，而不会出现重复插入问题。

# google-maps-api-3 - Google Maps API Marker Clusterer 和 Ajax

> ID：15352883
> 
> 赞同：0
> 
> 时间：2013-03-12T03:39:50.160
> 
> 标签：google-maps-api-3, markerclusterer

我正在运行多个 ajax 调用来下载大量谷歌地图图标。但是，当我尝试增加 Marker Clusterer 时，地图会清除所有标记。我相信这是因为我`var markerCluster = new MarkerCluster(map);`在每个 AJAX 调用中都进行了调用。

谁能告诉我如何正确实现这一点？

```
var populateMapByIncident = function(incident, page) {
  var run_again = false;
  $.getJSON(
    "/public_map_ajax_handler",
    {"shortname" : incident, "page": page},
    function(sites_list) {
    if (sites_list.length > 2) {
      run_again = true;
    }
          var mapOptions = {
    zoom: 8,
    center: new google.maps.LatLng(40.6501038, -73.8495823),
    mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
       var markers = [];
       var i = 0;

   for (var i = 0; i < sites_list.length; i++) {
 var latLng = new google.maps.LatLng(sites_list[i].latitude, sites_list[i].longitude);
 var marker = new google.maps.Marker({'position': latLng, 
                     'icon': getMarkerIcon(sites_list[i]), 
                     'site_id': sites_list[i].id, 
                      'case_number': sites_list[i].case_number, 
                      'work_type': sites_list[i].work_type, 
                      'floors_affected': sites_list[i].floors_affected, 
                      'status': sites_list[i].status});
 markers.push(marker);
 var site_id = sites_list[i].id;
google.maps.event.addListener(marker, "click", function() {
  new Messi('<p>Name, Address, Phone Number are removed from the public map</p><p>Details: work type: '
  + this.work_type+ ', floors affected: ' + this.floors_affected + '</p>' + '<p>Status: ' + this.status + '</p>',
  {title: 'Case Number: ' + this.case_number, titleClass: 'info', 
  buttons: [
  {id: 0, label: 'Printer Friendly', val: "On the live version, this would send all of this site's data to a printer friendly page." }, 
  {id: 1, label: 'Change Status', val: "On the live version, you would be able to change the site's status here."}, 
  {id: 2, label: 'Edit', val: "On the live version, you would be able to edit the site's info, as new details come in."}, 
  {id: 3, label: 'Claim', val: "On the live version, clicking this button would 'Claim' the site for your organization, letting other organizations know that you intend to work on that site"},
  {id: 4, label: 'Close', val: 'None'}], callback: function(val) { if (val != "None") {Messi.alert(val);} }});

});
   }

   var markerCluster = new MarkerClusterer(map);
   markerCluster.addMarkers(markers);

    if (run_again == true) {
  populateMapByIncident(incident, page + 1, markers);
} else {
      markerCluster.addMarkers(markers);
}

}

  );

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:59:25.723

> 我正在运行多个 ajax 调用来下载大量谷歌地图图标。但是，当我尝试增加 Marker Clusterer 时，地图会清除所有标记。我相信这是因为我正在调用 var markerCluster = new MarkerCluster(map); 在每个 AJAX 调用中。
> 
> 谁能告诉我如何正确实现这一点？

不要那样做。在全局范围内（在任何函数之外）创建一次 MarkerClusterer，并在从服务器接收到标记时向其中添加标记（假设您没有发送任何重复项）。

请参阅[文档](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)

看起来您已经向 MarkerClusterer 添加了标记数组：

> addMarkers(markers:Array., opt_nodraw:boolean) | 无 | 将一组标记添加到聚类器。

您真正需要做的就是将创建 MarkerClusterer 的位置移动到全局范围。下面的一个建议。

```
var markerCluster = new MarkerClusterer(map);  // <------------- add this
var populateMapByIncident = function(incident, page) {
  var run_again = false;
  $.getJSON(
// ----- existing code ------- //
// leave as is
// ----- modification -------- //
// var markerCluster = new MarkerClusterer(map); <----------- remove this
   markerCluster.addMarkers(markers);

   if (run_again == true) {
    populateMapByIncident(incident, page + 1, markers);
   } else {
    markerCluster.addMarkers(markers);
   } 
```

# excel - INDEX() 的 Excel 数组公式的最小值

> ID：15352884
> 
> 赞同：1
> 
> 时间：2013-03-12T03:40:20.227
> 
> 标签：excel, excel-formula

我在 Excel 中的这个数组公式有点麻烦。

我有两个范围（数据列），它们对应于行号和列号到一个包含要应用于非相关函数的乘数的整体数组。我想找到从列/行引用中找到的*最小乘数。*

假设列号范围为`A1:A10`，行号范围为`A15:A24`，乘数数组为`K4:M23`。一种低效的方法是：

```
=MIN(INDEX(K4:M23,A15,A1),INDEX(K4:M23,A16,A2),etc...) 
```

...但这会变得很麻烦，尤其是在检查错误等时。更不用说如果这个函数被调用数千次（它恰好是这样）的内存使用量。

所以我想到了一个数组函数：

```
{=MIN(INDEX(K4:M23,A15:A24,A1:A10))} 
```

...但这仅返回数组中的第一个元素。如果此函数作为多单元格数组公式输入，它会正确处理它，但似乎按原样`MIN`应用于每个奇异元素，并且函数返回原始数组大小，而不是最小值的单个值。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:38:33.497

如果我正确理解您的问题，以下 VBA 函数应该会产生您想要的内容。

该函数接受三个参数：对数组范围的引用；对行号范围的引用；以及对列号范围的引用。它返回与行号和列号对应的单元格中的最小值。

```
 Function ArrayMin(MatrixRange As Range, RowRange As Range, ColRange As Range) As Double
      Application.Volatile
      Dim colNum As Long
      Dim rowNum As Long
      Dim cellVal As Double
      Dim MinVal As Double
      Dim i As Long
      MinVal = 1000000                               'a number >= than max array range value
      For i = 0 To ColRange.Rows.Count - 1
          rowNum = RowRange(1, 1).Offset(i, 0).Value
          colNum = ColRange(1, 1).Offset(i, 0).Value
          cellVal = MatrixRange(rowNum, colNum).Value
          If cellVal < MinVal Then
              MinVal = cellVal
          End If
      Next
      ArrayMin = MinVal
  End Function 
```

它可以通过在您的工作簿中插入一个新的标准 VBA 模块并粘贴代码以标准方式安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-30T22:26:30.733

我从来没有能够像操作数组一样对 index 的输出进行操作。相反，可以做的是过滤原始乘数表。为了避免辅助单元格，这可以在定义的名称内完成

```
rowFilter:      = SIGN( MATCH(rowIndex, selectedRows, 0))       
columnFilter:   = SIGN( MATCH(columnIndex, selectedColumns, 0 ) )       
filteredMultipliers:= multipliers * rowFilter * columnFilter 
```

工作表公式

```
= AGGREGATE( 15, 6, filteredMultipliers, 1 ) 
```

将确定忽略故意 #N/A 错误的最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-06T22:04:49.510

感谢 pbart 的一点启发，这就是我最终正确完成它的方式......（在我问这个问题一年半之后。）

我基本上创建了一个参考数组，其尺寸与列和行数组交叉处的尺寸相同`K4:M23`，并将它们相乘。

```
=AGGREGATE(15,6,(IF(MMULT(TRANSPOSE(IFERROR(IF(A15:A24=COLUMN(1:20),1,0),0)),IFERROR(IF(A1:A10={1,2,3},1,0),0))=0,#N/A,1)*K4:M23),1) 
```

不确定它是最有效的，但在不使用`Match`or的情况下进行数组查找也不错`Index`。

# ios - iOS - 带有触摸事件的自定义视图

> ID：15352889
> 
> 赞同：0
> 
> 时间：2013-03-12T03:40:50.547
> 
> 标签：ios, delegates, touch-event, custom-view

我正在尝试创建一个自定义 UIView，我们称之为**FooView**。

**FooView.h**

```
#import <UIKit/UIKit.h>

@interface FooView : UIView

@property (nonatomic, strong) UITextField *barTextField;
@property (nonatomic, strong) UIButton *submitButton;

@end 
```

**FooView.m**

```
#import "FooView.h"

@implementation FooView

@synthesize barTextField = _barTextField;
@synthesize submitButton = _submitButton;

...

@end 
```

**FooViewController.h**

```
#import <UIKit/UIKit.h>
#import "FooView.h"

@interface FooViewController : UIViewController

@property (nonatomic, strong) FooView *fooView;

@end 
```

**FooViewController.m**

```
#import "SearchViewController.h"

@interface SearchViewController ()
@end

@implementation SearchViewController
@synthesize fooView = _fooView;

@end 
```

我想在**FooViewController**中实现按钮触摸事件，`delegate`可以实现吗？如果**是**，如何？

目前，我正在以这种方式添加触摸事件

**FooViewController.m**

```
- (void)viewDidLoad
{
    [self.fooView.submitButton addTarget:self action:@selector(submitTapped:) forControlEvents:UIControlEventTouchUpInside];
}

...
- (IBAction)submitTapped
{
    ...
} 
```

但我认为这不是一个好的解决方案，因此需要一些专家建议。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:55:27.437

是的，您可以使用委托来实现

**FooView.h**

```
#import <UIKit/UIKit.h>

@protocol FooViewDelegate
    -(void)submitButtonClicked:(id)sender;
@end

@interface FooView : UIView

@property (nonatomic, strong) UITextField *barTextField;
@property (nonatomic, strong) UIButton *submitButton;
@property (nonatomic, assign) id<FooViewDelegate> delegate;

@end 
```

**FooView.m**

```
#import "FooView.h"

@implementation FooView

@synthesize barTextField = _barTextField;
@synthesize submitButton = _submitButton;
@synthesize delegate;
...

-(IBAction)buttonClicked:(id)sender // connect this method with your button
{
    [self.delegate submitButtonClicked:sender];
}

@end 
```

**FooViewController.h**

```
#import <UIKit/UIKit.h>
#import "FooView.h"

@interface FooViewController : UIViewController <FooViewDelegate>

@property (nonatomic, strong) FooView *fooView;

@end 
```

**FooViewController.m**

```
#import "FooViewController.h"

@interface FooViewController ()
@end

@implementation FooViewController
@synthesize fooView = _fooView;

- (void)viewDidLoad
{
    _fooView = [[UIView alloc] init];
    _fooView.delegate = self;
}

-(void)submitButtonClicked:(id)sender //delegate method implementation
{
    NSLog(@"%@",[sender tag]);
}

@end 
```

# stata - Stata 歧义缩写 r(111)

> ID：15352892
> 
> 赞同：1
> 
> 时间：2013-03-12T03:41:17.083
> 
> 标签：stata

我正在尝试使用 stata12 绘制边距图。我正在运行以下代码：

```
margins, at(FuncVariant =(0(0.2) 1)) over(Platform) 
```

以下是错误：

> FuncVariant 歧义缩写 r(111)；

我有以下变量，例如

```
FuncVariant :
FuncVariant 
FuncVariant_mean
FuncVariant_W 
```

这会造成问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:24:38.163

发布以下命令的确切结果以诊断数据中的问题：

```
d FuncVariant* 
```

要解决此问题，请永久关闭 Stata 变量缩写设置：

```
set varabbrev off, perm 
```

**tl; dr：**您的数据中可能没有`FuncVariant`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:16:14.483

d FuncVariant*

```
 storage  display     value

variable name   type   format      label      variable label
--------------------------------------------------------------------------------
FuncVariant     byte   %8.0g                  
FuncVariant_m~n float  %9.0g                  
FuncVariant_W   float  %9.0g 
```

我知道 FuncVariant 是虚拟变量，所以我使用了 FuncVariant_W，但它会引发错误

```
margins, at( FuncVariant_W =-1(0.2)1) over(Platform)
'FuncVariant_W' not found in list of covariates 
```

对于数据集中的许多其他变量，它显示相同的错误，尽管变量存在于数据集中。

# git - git索引在哪里？

> ID：15352894
> 
> 赞同：4
> 
> 时间：2013-03-12T03:41:34.677
> 
> 标签：git

在 Git 中，暂存区也称为索引。似乎要说的是，当您在工作目录中进行更改并将这些更改添加到“暂存”时，git 会将这些文件添加到索引文件中。打开项目 /.git/index 文件时，我看到一个文件，其中包含在我键入时显示的文本：

```
git status 
```

我可能会得到如下所示的输出：

```
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   Gemfile
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

但在[Git Index Contents](https://stackoverflow.com/questions/4084921/what-does-the-git-index-exactly-contains "Git 索引目录")等其他地方，他们通过键入以下内容来表示：

```
git ls-files --stage 
```

您可以看到索引的内容.. 虽然这显然不是 /.git/index 中的内容。.git 目录中的哪个文件实际上包含该索引？我怀疑，我可能错了.. .git/index 将更改信息存储在“已修改”行中，然后在输入 git ls-files --stage 时，它​​正在建立一个文件列表根据工作目录中的文件以及在此索引文件中列为已修改的文件进行暂存及其哈希值。这是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T03:52:17.917

位于的索引文件`.git/index`不是文本文件，而是一个二进制文件，其中包含有关索引的必要信息，并且*是*索引。

我不明白你想用`git status`输出说什么。`git status`甚至输出未跟踪的文件。您是说索引中还包含未跟踪文件的知识吗？当然不是。

# android - 你怎么能淡出并在两个图像之间？

> ID：15352895
> 
> 赞同：-1
> 
> 时间：2013-03-12T03:41:41.957
> 
> 标签：android, transition, splash-screen

我的启动画面中有两个图像加载。第一个图像打开（启动初始屏幕），然后第二个图像打开。一旦第二个图像淡出，MainActivity 就会启动。现在我的问题是如何让我的第一张图像淡出，然后用我的第二张图像淡入？

我也不想在两者之间交叉淡入淡出。我正在尝试完全淡出然后淡入过渡。

飞溅.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:id="@+id/lin_lay"
    android:gravity="center" >

    <ImageView
        android:contentDescription="@string/desc"
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/spinning_wheel_image"
        android:background="@drawable/splashscreen1" />

</LinearLayout> 
```

mainanim.xml

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false">
    <item android:drawable="@drawable/splashscreen1" android:duration="2500" />
    <item android:drawable="@drawable/splashscreen2" android:duration="4000" />
</animation-list> 
```

Splash.java

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    ourSong = MediaPlayer.create(Splash.this, R.raw.splashsound);
    ourSong.start();
    Thread timer = new Thread(){
        public void run(){
            try{
                sleep(10500);
            } catch (InterruptedException e){
                e.printStackTrace();
            }finally{
                Intent openStartingPoint = new Intent("com.theapplication.app.STARTINGPOINT");
                startActivity(openStartingPoint);

            }
        }
    };
    timer.start();
}

@Override
public void setRequestedOrientation(int requestedOrientation) {
    super.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
}

@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    ImageView mainimage = (ImageView)findViewById(R.id.spinning_wheel_image);
    mainimage.setBackgroundResource(R.anim.mainamin);
    mainanimation = (AnimationDrawable) mainimage.getBackground();
    mainanimation.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:52:53.890

你可以试试这个[演示。](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)

可能对你有帮助。

# c# - 我需要帮助了解 Visual Studio 2010 的一些细节

> ID：15352896
> 
> 赞同：0
> 
> 时间：2013-03-12T03:41:49.737
> 
> 标签：c#, visual-studio-2010, ide, organization

这个问题是根据答案中提供的链接对 MSDN 研究提出[的早期问题和后续问题的后续问题。](https://stackoverflow.com/questions/14663260/i-need-help-understanding-how-c-sharp-projects-are-organized-in-visual-studio)

这是我到目前为止设置的解决方案资源管理器的图像，我想确保我在组织上处于正确的轨道上。

![在此处输入图像描述](../Images/0caaf8905304af67cd0fcbf1a318c6c8.png)

首先，因为 VS2010 是针对我正在学习的 C# 课程的，所以我在该解决方案中组织了 ProgrammingClass 解决方案 ( `ITDEV110`) 和作业项目 ( `ASSN3a`, `ASSN3b`)。我在某处读到，解决方案就像房子，项目就像房间……所以这对我来说很有组织意义。

鉴于该组织策略，我找不到将 Assignment1 的副本保存为 Assignment2 的基础的最佳方法。有时我在 proj2 路径中得到 proj2 的 *csproj 文件，但在 proj1 路径中得到 *cs 文件。其他时候，我的 *cs 文件在解决方案资源管理器中显示为虚线轮廓图标（不是图片中的 *._cs）。我仍然可以单击、编辑和保存，但它们仍然看起来像资源管理器中的幽灵类——我不确定虚线幽灵对编译和运行意味着什么。

那么如何在一个解决方案中在项目之间移动 *cs 文件而不

1.  让 VS2010 误以为它有两个电源，并且
2.  确保调用正确版本的类和方法？

只是“另存为...”一个新项目名称的问题吗？或者我应该从现有代码创建一个新项目？这是命名空间的工作吗？如果我希望 #1 中的一些代码可以从 #2 访问，这有什么不同？

我一直在通过从记事本中剪切粘贴来为我的程序创建新的类......但我知道必须有更好的方法。

任何资源或提示都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:44:46.677

为您获得的每个编程任务创建一个新的不同 C# 项目。随意使用相同的解决方案，但最好将项目分开。可以在项目之间共享文件（使用链接文件），或者使用项目引用从其他项目中引用类型和类，但是将学校工作代码放入同一个 C# 项目是一个痛苦的教训。

# c# - 舍入构造中点的 X 值和 Y 值

> ID：15352897
> 
> 赞同：2
> 
> 时间：2013-03-12T03:41:50.200
> 
> 标签：c#, point, rounding

公共价值与私人价值有何不同？

![私有 X 和 Y 值与公共值不同](../Images/301e4f6c6e90d248ce3028635888dbdc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:25:36.020

虽然我们不知道`_x`和之间的关系是什么`X`，但`_x`似乎是 的舍入近似值`X`。

顺便说一句，最好指定您使用的点。有不同的类称为 Point，例如`System.Drawing.Point`和`System.Windows.Point`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:35:33.027

要点是您的课程之一吗？作为正常的 System.Drawing。Point 不允许传递除整数以外的任何内容。您能否发布您的积分等级代码。

# android-fragments - 为创建 MapFragment 的 Activity 实现操作栏选项卡

> ID：15352899
> 
> 赞同：0
> 
> 时间：2013-03-12T03:42:00.540
> 
> 标签：android-fragments, android-tabs, android-maps-v2

这是一个类似的问题：[MapFragment in Action Bar Tabs](https://stackoverflow.com/questions/14074625/mapfragment-in-action-bar-tabs)，但我没有明确的答案。我是 Android 新手，这是我正在开发的第一个应用程序。

我目前有一个`MapFragment`为 Google Maps v2 创建的 MainActivity。并在 ActionBar 下显示地图[，如此屏幕截图所示](https://www.sugarsync.com/piv/D7069015_857_054709503)

我的目标是为 Eclipse 中的 MainActivity 实现选项卡（不使用`FragmentActivity`s 或我的应用程序的支持库），它当前为 Google Maps v2`minSdkVersion=11`创建了一个。`MapFragment`

**MainActivity.java 片段**

```
public class MainActivityextends Activity 
implements LocationListener, LocationSource, OnMarkerClickListener, OnInfoWindowClickListener {
    private static GoogleMap googleMap;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map); 
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD); //Change to Tab mode 
        ....
        googleMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

**地图.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <include 
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    layout="@layout/map_fragment" />
</LinearLayout> 
```

**map_fragment.xml**

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:map="http://schemas.android.com/apk/res-auto"
android:id="@+id/map"
android:name="com.google.android.gms.maps.MapFragment"
android:layout_width="match_parent"
android:layout_height="match_parent"
map:cameraTargetLat="53.78513542767"
map:cameraTargetLng="-3.14948167651"
map:cameraZoom="14" /> 
```

Eclipse 使用支持库为您设置了一个 Activity 选项卡，因此在使用 a 时它给了我一个错误（如下），`MapFragment`而我又恢复为不使用选项卡。我认为原因[在这里](https://stackoverflow.com/a/15318619/2121630)

```
Caused by: java.lang.ClassCastException: com.google.android.gms.maps.MapFragment cannot be cast to android.support.v4.app.Fragment 
```

我需要使用标签，因为目前只开发了一个页面/活动，我需要一种向用户和地图显示过滤器的方法。用户将切换到相邻的选项卡以编辑过滤器，并能够切换回地图选项卡，然后将在其中拾取过滤器并更改地图上的标记。

这么短的问题是否有一种简单的方法可以为我的[MainActivity.java](https://www.sugarsync.com/pf/D7069015_60758007_6881715)实现选项卡？如果不清楚，请询问我的具体情况，但这对我来说非常先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T21:24:29.573

尝试使用 SupportMapFragment 而不是 MapFragment：

**地图.xml**

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:map="http://schemas.android.com/apk/res-auto"
android:id="@+id/map"
android:name="com.google.android.gms.maps.SupportMapFragment"
android:layout_width="match_parent"
android:layout_height="match_parent"
map:cameraTargetLat="53.78513542767"
map:cameraTargetLng="-3.14948167651"
map:cameraZoom="14" /> 
```

# ruby-on-rails - Heroku上的Rails 4应用程序，工作但日志错误

> ID：15352901
> 
> 赞同：0
> 
> 时间：2013-03-12T03:42:16.720
> 
> 标签：ruby-on-rails, heroku, asset-pipeline, thin, ruby-on-rails-4

该应用程序似乎正在运行，但我的日志中出现了这些错误。此问题显示在每个页面加载时的“/favicon.ico”、“/assets/application-34baf7d108c7408a8c110454dc57e8f6.js”和“/assets/application-e6b66fbbea8acd5eddb9fada1fa91c36.css”的日志中。

此外，这个问题不会在开发中发生，只会在 heroku 上发生。

而且，即使它说的是 ruby​​/1.9.1，我也只是检查了“heroku run ruby​​ -v”并确认我正在运行“ruby 1.9.3p392（2013-02-22 修订版 39386）[x86_64-linux]”

```
2013-03-12T03:34:50+00:00 app[web.1]: I, [2013-03-12T03:34:50.307770 #2]  INFO -- : Started GET "/favicon.ico" for 99.104.137.64 at 2013-03-12 03:34:50 +0000
2013-03-12T03:34:50+00:00 app[web.1]: F, [2013-03-12T03:34:50.322285 #2] FATAL -- : 
2013-03-12T03:34:50+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/rack/logger.rb:38:in `call_app'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/rack/logger.rb:21:in `block in call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/activesupport/lib/active_support/tagged_logging.rb:67:in `block in tagged'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/activesupport/lib/active_support/tagged_logging.rb:25:in `tagged'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/activesupport/lib/active_support/tagged_logging.rb:67:in `tagged'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/rack/logger.rb:21:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/actionpack/lib/action_dispatch/middleware/request_id.rb:21:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/runtime.rb:17:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/engine.rb:511:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/application.rb:96:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/content_length.rb:14:in `call'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:81:in `block in pre_process'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:79:in `catch'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:79:in `pre_process'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:54:in `process'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:39:in `receive_data'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.3/lib/eventmachine.rb:187:in `run_machine'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.3/lib/eventmachine.rb:187:in `run'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/backends/base.rb:63:in `start'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/server.rb:159:in `start'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/handler/thin.rb:16:in `run'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.5.2/lib/rack/server.rb:264:in `start'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/commands/server.rb:80:in `start'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/commands.rb:80:in `block in <top (required)>'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/commands.rb:75:in `tap'
2013-03-12T03:34:50+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bundler/gems/rails-f278deb712b1/railties/lib/rails/commands.rb:75:in `<top (required)>'
2013-03-12T03:34:50+00:00 app[web.1]:   bin/rails:4:in `require'
2013-03-12T03:34:50+00:00 app[web.1]:   bin/rails:4:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:03:42.907

我摆脱了错误，我在我的 config/enviroments/production.rb 中做了这个

```
-  config.assets.compile = false
+  config.assets.compile = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:10:55.023

作为解决方案的替代方案，您可以在本地编译资产，然后将它们发送到 heroku...

```
$ rake assets:precompile
$ git add -A
$ git commit -m 'compiled assets'
$ git push heroku master 
```

我这样做是 CI 步骤的一部分

# asp.net - ASP.NET MVC - 在生产中更新预编译的 Razor 视图文件

> ID：15352905
> 
> 赞同：5
> 
> 时间：2013-03-12T03:42:25.290
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, razor

我想知道以下是否可能：

1.  通过在 Visual Studio 中打开项目设置，使用我们的 MVC 应用程序预编译 Razor 视图。
2.  将应用程序部署到生产环境。
3.  然后在稍后阶段，通过覆盖生产中现有的 *.cshtml 文件来更新视图，而无需回收应用程序池或重新编译项目并重新部署构建。？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T03:00:51.077

是的，你可以这样做。视图引擎会将每个目录下的所有文件重新编译成单独的DLL成这样的文件

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\micropedi_mvc\d3b5b4cd\eb219373\App_global.asax.ihdiifed.DLL

您可以使用`ILSpy`或`Reflector`打开此文件并准确查看哪些文件已编译到该文件中。如果你有很多目录，你会看到生成了几个 DLL。

`Note that all that`MvcBuildViews 确实运行这个构建后事件，它的作用与您要点击应用程序所需的每个文件一样。

```
<Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
   <AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
</Target> 
```

为了获得最佳性能，我推荐[RazorGenerator 预编译器](http://stacktoheap.com/blog/2013/01/19/precompiling-razor-views-in-asp-dot-net-mvc-3/)。这实际上将 cshtml 文件嵌入到您的主 DLL 中，这根本不是 MvcBuildViews 所做的。加上它的速度要快得多。

如果您想在生产中使用它，您需要将其更改`UsePhysicalViewsIfNewer`为`RazorGeneratorMvcStart.cs`true 以便在您更新视图时重新编译。

* * *

提示：如果您想准确找到 cshtml 文件编译的 DLL，只需将其添加到您的页面

```
 <div>This file is compiled to  @this.GetType().Assembly.CodeBase</div> 
```

然后，您无需查找即可获得完整路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T03:49:44.770

是的你可以。

cshtml 文件不会像项目的其他部分那样被编译。因此，您可以在项目之外更改它们。

# kinect - 检查 Kinect 相机是否仍然可用 (OpenNI 1.5.4)

> ID：15352909
> 
> 赞同：2
> 
> 时间：2013-03-12T03:42:53.027
> 
> 标签：kinect, openni

我尝试检测相机是否仍然可用，这样如果用户拔下相机，我的代码就不会崩溃。我也知道 OpenNI 版本 2 支持连接/断开事件。但是我使用的是OpenNi 1.5.4，由于某些原因，我无法升级到版本2。那么，无论如何要在1.5.4版本上实现这种功能

谢谢

# php - 在文本区域中输入数字或字符时如何减少计数

> ID：15352911
> 
> 赞同：1
> 
> 时间：2013-03-12T03:43:02.137
> 
> 标签：php, javascript, jquery

```
<script>
function textCounter(field,field2,maxlimit)
{
  var countfield = document.getElementById(field2);
  if( field.value.length > maxlimit ) 
  {
    field.value = field.value.substring( 0, maxlimit );
    return false;
  } 
  else 
  {
    countfield.value = maxlimit - field.value.length;
  }
}
</script>
<textarea onkeyup="textCounter(this,'counter',50);"  id="message"></textarea>
<input disabled maxlength="3" size="3" value="50" id="counter"> 
```

在文本区域中输入数字或字符时，如何减少计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:11:52.763

尝试这个 ...

```
function textCounter(field,field2,maxlimit)
{
  var countfield = document.getElementById(field2);
  var textfield = document.getElementById(field);
  countfield.value = maxlimit - textfield.value.length;
  if(countfield.value < 0)
  {
    textfield.value = textfield.value.substring(0,maxlimit);
    countfield.value = 0;
  }
}

<textarea onkeyup="textCounter('message','counter',50);"  id="message"></textarea>
<input disabled maxlength="3" size="3" value="50" id="counter"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:34:17.357

```
function textCounter(field,field2,maxlimit)
{
  var countfield = document.getElementById(field2); 
```

如果控件采用某种形式（并且很可能是），您可以使用：

```
 var countfield = field.form[field2]; 
```

.

```
 if( field.value.length > maxlimit ) 
  {
    field.value = field.value.substring( 0, maxlimit ); 
```

哎呀，有点恶心。为什么不让用户知道有太多字符并让他们来编辑值呢？

```
 return false; 
```

那根本没有任何作用。

```
 } 
  else 
  {
    countfield.value = maxlimit - field.value.length;
  }
} 
```

不应该有“else”，只写值，如果是负数，用户就会知道要修剪字符数。所以你的功能可以是：

```
function textCounter(field,field2,maxlimit)
{
    field.form[field2].value = maxlimit - field.value.length;
} 
```

还有一个[maxlength](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-maxlength-attribute)属性，它根本不需要脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:47:07.423

由于您标记了 jQuery，我将假设您已加载它...使用 on change 事件监视 textarea：http: [//api.jquery.com/change/](http://api.jquery.com/change/)

```
$('#message').change(function() {
  // do stuff to counter
}); 
```

# c# - 将 ListView ItemTemplate 绑定到 Dictionary 的 Key 和 Value

> ID：15352914
> 
> 赞同：2
> 
> 时间：2013-03-12T03:43:49.730
> 
> 标签：c#, data-binding, windows-store-apps, winrt-xaml, windows-store

我有一个`Dictionary<string,string>`包含一些我想在`ListView`. 绝对“`ListView`看到”正确数量的项目（因为我从第二个中看到了适当数量的冒号`TextBlock`），但它不显示 the`Key`或`Value`绑定。

我需要一个`Converter`或什么？

我是否需要更改并改用 an `ObservableCollection<KeyValuePair<string,string>>`？

```
<ListView Grid.Row="1" IsItemClickEnabled="False" 
          SelectionMode="None" IsHitTestVisible="False"
          IsSwipeEnabled="False"
          ItemsSource="{Binding SymbolInfoText}">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Key}"/>
                <TextBlock Text=": "/>
                <TextBlock Text="{Binding Value}"/>
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView>

public Dictionary<string, string> SymbolInfoText
{
    get
    {
        if (selectedItem == null)
        {
            return new Dictionary<string, string> { { "Error", "No Item Selected" } };
        }
        return selectedItem.GenerateObjectProperties(CurrentLocation, LocalMapManager.Map.Heading);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:19:23.487

试试这个，它会告诉你你想要什么，但你使用它的方式不是在 WPF 中使用集合的正常方式

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        this.DataContext = this;
        InitializeComponent();

    }

    public Dictionary<string, string> SymbolInfoText
    {
        get
        {
            return new Dictionary<string, string> { { "Error", "No Item Selected" }, { "Error1", "No Item Selected" } };

        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:47:53.677

如果您在事后添加项目（在启动应用程序并建立绑定链接之后），那么`Dictionary<string,string>`将不是最佳选择，因为它没有实现`INotifyCollectionChanged`. 将元素添加到字典后尝试设置`ItemsSource`正确，您会看到项目实际上出现在列表中，您只需要更新绑定即可。

所以是的，`ObservableCollection<T>`这将是一个更优化的解决方案，因为它会在核心集合发生更改时发送通知。

# c++ - 使用向量和队列在 C++ 中构建通用树

> ID：15352923
> 
> 赞同：1
> 
> 时间：2013-03-12T03:45:01.323
> 
> 标签：c++, tree, queue

对于我的一个类的项目，我需要使用 xml 文件中的 RapidXML 解析数据并从该数据创建一棵树。几天来我一直在思考如何做到这一点，并且一直在兜圈子。如果有人能帮助我从概念上理解这一点，我将不胜感激。

每个 xml 节点都有一个 name 属性和子节点，我希望能够访问任何给定节点的沿袭，所以我认为 treeNode 类将有一个 name 变量和一个指向其子节点的指针向量。到目前为止这听起来正确吗？

一旦我将节点添加到队列中，以及如何使用这些节点构建树，我对如何创建节点感到非常困惑。我不确定如何区分哪个节点是哪个节点的子节点。这是我解析xml文件的方法。它正确解析和输出，我只是不知道如何将这些节点存储在树数据结构中。

```
void oneQueue(xml_node<> *xml)
{
    //Initialize queue
    queue<xml_node<>* > q;

    int nodesInCurrentLevel =1;
    int nodesInNextLevel =0;
    //push the first xml node onto the queue
    q.push(xml);

    while(!q.empty())
    {
        //grab the xml node at the front of the queue
        xml_node<> *currNode = q.front();
        xml_node<> *name = currNode->first_node("name");

        //make a node from the xml node
        Node *node = new Node();
        //IF the name has a value, set the name
        if(name != 0) node->setName(name->value());
        q.pop();
        nodesInCurrentLevel--;

        if(node)
        {
            cout << node->getName() << endl;
            //loop through the children of the node and add to the queue
            for(xml_node<> * species = currNode->first_node("species"); species; species = species->next_sibling())
            {
                q.push(species);
                nodesInNextLevel++;
            }
        }
        if (nodesInCurrentLevel == 0) {
            nodesInCurrentLevel = nodesInNextLevel;
            nodesInNextLevel = 0;
        }
    }
} 
```

树木对我来说是一个新概念，任何指导将不胜感激。谢谢！

# ruby-on-rails - 您可以使用 DFP 启用占位符广告吗

> ID：15352924
> 
> 赞同：0
> 
> 时间：2013-03-12T03:45:18.033
> 
> 标签：ruby-on-rails, ads, google-dfp

在开发和登台环境中是否有办法显示广告或至少是某种占位符？

目前我已经添加了一个条件 css 文件来设置广告占位符的样式

```
if Rails.env.staging? || Rails.env.development?
  stylesheet_link_tag "google_dfp_placeholder"
end 
```

但是有没有办法让 DFP 使用 javascript 方法来提供占位符？

必须开发并且不知道广告在网站上的外观会非常烦人。肯定有一些功能可以让您获取广告，使它们无法点击并且不让它们跟踪展示次数..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:14:08.953

我创建了一个[jQuery DFP 插件](https://github.com/coop182/jquery.dfp.js)来帮助我解决这个问题。

使用此插件，我可以将广告定位到特定域，因此我的所有真实广告都针对 www.example.com，然后我可以在 dfp 中制作一些针对 stg.example.com 和 dev.example.com 的测试广告...真的让生活变得轻松！

# jquery - 画廊上一个和下一个按钮不起作用

> ID：15352925
> 
> 赞同：0
> 
> 时间：2013-03-12T03:45:18.700
> 
> 标签：jquery, gallery, image-gallery

我有一个图片库，由两行 5 张图片组成，总共 10 张图片。我将有 20 张图像，当用户按下下一个按钮时，我试图让画廊移动到下一个 10 个图像，之前用户被带到前 10 个图像。对于我的生活，我无法弄清楚为什么我的上一个和下一个按钮不起作用。

jQuery：

```
var $item = $('div.folder'), //Cache your DOM selector
       visible = 5, //Set the number of items that will be visible
       index = 0, //Starting index
       endIndex = ($item.length / visible) - 1; //End index

   $('div#arrowR-spring').click(function () {
       if (index < endIndex) {
           index++;
           $item.animate({
               'left': '-=315px'
           });
       } else {
           index = 0;
           $item.animate({
               'left': '+=' + (315 * endIndex) + 'px'
           });
       }
   });

   $('div#arrowL-spring').click(function () {
       if (index > 0) {
           index--;
           $item.animate({
               'left': '+=315px'
           });
       } else {
           index = endIndex;
           $item.animate({
               'left': '-=' + (315 * endIndex) + 'px'
           });
       }
   }); 
```

这是我目前拥有的：[链接到我的小提琴](http://jsfiddle.net/jsavage/YRTzG/16/)。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:16:42.970

我不确定你的计算，但你的动画有一些错误。尝试如下更正：

```
 $('#arrowR').click(function(){
        if(index < endIndex ){
          index++;
          $item.animate({'margin-left':'-=315'});
        } else {
          index = 0;
          $item.animate({'margin-left':'+='+(315*endIndex)});  
        }
    });

    $('#arrowL').click(function(){
        if(index > 0){
          index--;            
          $item.animate({'margin-left':'+=315'});
        } else {
          index = endIndex;
          $item.animate({'margin-left':'-='+(315*endIndex)});
        }
    }); 
```

在这里尝试演示：http: [//jsfiddle.net/YRTzG/23/](http://jsfiddle.net/YRTzG/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:07:32.037

我只能看到您的 HTML 代码中有 10 个项目是 jsfiddle。但是您正在尝试更改 HTML 中不存在的剩余 10 个项目的索引。再次查看 HTML 代码并确保那里有 20 个项目。

# java - 另一个类的数组中的对象

> ID：15352933
> 
> 赞同：-1
> 
> 时间：2013-03-12T03:45:54.753
> 
> 标签：java, constructor

我该怎么做：例如当我在主类中创建一个对象时

```
public class Blabla {
    public static void main(String[] args) {
        Whatever w = new Whatever(100, 200, 400);
        Whatever w2 = new Whatever(500, 600, 700);
    }
} 
```

它将自动添加到另一个类的数组中，例如

```
public class Pilipili {
    private Whatever[] tabW = new Whatever[20];
} 
```

我希望我的问题足够清楚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:18:18.893

根据我对您的问题的理解，您想要实现的是，每当您在方法中创建`WhatEver`类的实例时`main`，您都希望将新实例*自动*添加到类中的数组中`Pilipili`；您不想显式调用一个方法`main`来添加这个新实例。

为此，我将向您提供该方法的整体结构以及可以用代码替换的注释。你需要在课堂上有一个`addWhateverObject`方法。`Pilipili`

```
public void addWhateverObject(WhatEver w){   
  // Add the object w to the array tabW 
} 
```

然后在`WhatEver`类中，在构造函数中，您需要调用该`addWhateverObject`方法并将`this`引用传递给它。

```
public WhatEver(int arg0, int arg1, int arg2){
  // Initialize the instance
  // Create an instance of Pilipili class
  // Call "addWhateverObject" method with "this" as the argument
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T03:48:46.183

您可以将 X 值传递给其他类的构造函数或在其他类中创建方法，例如：

```
class AnotherClass {

    X[] xArray = new X[20]

    void setXArrayItem(X x, int index) {
       xArray[index] = x;
    } 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T03:51:52.870

我认为你不能以这种方式绑定一个类，只要它的对象创建它就会自动传递给一个数组或你正在使用的任何数据结构。您必须编写一个可以显式调用创建对象的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T04:11:18.390

你想要这样的东西吗...

```
public class Blabla {
    public static void main(String[] args) {
        Whatever w = new Whatever(100, 200, 400);
        Whatever w2 = new Whatever(500, 600, 700);
    }
}

public class Whatever{
    public Whatever(){int i, int j, int k){
        // some code
        Pilipili.addTabW(this);
    }
}

public class Pilipili {
    private static List<Whatever> tabW = new ArrayList<Whatever>();
    public static void addTabW(Whatever w){
        tabW.add(w);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T04:28:45.807

唯一的方法是，Whatever 有一个引用 Pilipili 的类变量，并在构造函数的末尾调用它来注册新对象。

```
public class Blabla {
    public static void main(String[] args) {
        Whatever.registry = new Pilipili();

        Whatever w1 = new Whatever(100, 200, 400);
        Whatever w2 = new Whatever(500, 600, 700);
    }
}

public class Whatever {
    public static Pilipili registry;

    private final int alpha, bravo, charlie;

    public Whatever(int a, int b, int c) {
        this.alpha = a;
        this.bravo = b;
        this.charlie = c;

        if (registry != null) {
            registry.register(this);
        }
    }
}

public class Pilipili {
    private int next = 0;
    private Whatever[] tabW = new Whatever[20];

    public void register(Whatever w) {
        tabW[next++] = w;
    }
} 
```

但是，这被认为是不安全的。在构造完成之前，Whatever 构造函数不应允许对对象的引用转义。在像这样的简单情况下，这无关紧要，但如果字段是 final 并且对象是从多个线程中使用的，则无法保证所有线程都会看到设置为 final 字段的值。只有在构造函数完成后才能保证。由于其他类能够在构造完成之前看到该对象，因此它可能会看到它处于不一致的状态。

解决这个问题的最好方法是重组你的代码，这样就没有必要了，但下一个最好的方法是使构造函数私有并使用工厂方法创建对象。这样，工厂方法就可以调用构造函数，然后，构造函数完成后，可以将对象注册到监听器或你有什么，然后它可以将构造和注册的对象返回给调用者。

```
public class Blabla {
    public static void main(String[] args) {
        Whatever.registry = new Pilipili();

        Whatever w1 = Whatever.newInstance(100, 200, 400);
        Whatever w2 = Whatever.newInstance(500, 600, 700);
    }
}

public class Whatever {
    public static Pilipili registry;

    private final int alpha, bravo, charlie;

    private Whatever(int a, int b, int c) {
        this.alpha = a;
        this.bravo = b;
        this.charlie = c;
    }

    public static Whatever newInstance(int a, int b, int c) {
        Whatever whatever = new Whatever(a, b, c);

        if (registry != null) {
            registry.register(whatever);
        }

        return whatever;
    }
} 
```

同样，这是安全的，因为当静态工厂方法向 Pilipili 注册实例时，构造函数已经返回。然后，对新建对象的引用可以安全地逃逸到外部世界。

# r - 编码：knitr 和子文件

> ID：15352935
> 
> 赞同：5
> 
> 时间：2013-03-12T03:46:14.767
> 
> 标签：r, utf-8, knitr, pandoc

我正在使用带有 knitr 1.1 的 Windows 7、R2.15.3 和 RStudio 0.97.320。不知道我的`pandoc`版本是什么，但我几天前下载了它。

> sessionInfo()
> R 版本 2.15.3 (2013-03-01) 平台：x86_64-w64-mingw32/x64 (64-bit)

```
locale:
[1] LC_COLLATE=Spanish_Argentina.1252  LC_CTYPE=Spanish_Argentina.1252    LC_MONETARY=Spanish_Argentina.1252
[4] LC_NUMERIC=C                       LC_TIME=Spanish_Argentina.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.15.3 
```

我想在`html`Word 和 Word 中获取我的报告，所以我使用 markdown 和 pandoc。我用西班牙语写作，在 n:`á-ú`和`ñ`.

我已经阅读了很多帖子，并且看到了与我使用新版本解决的问题类似的问题`knitr`。但是有一个问题我还没有找到解决方案。

当我开始时，我使用了`'system default'`出现在`RStudio`对话框中的编码，即`ISO 8859-1`，`RStudio`预览效果很好。但是，当我尝试获取 Word 文档时，`pandoc`被重读的元音卡住了。我发现一篇文章展示了如何使用以下方法解决这个问题`iconv`：

> iconv -t utf-8 "myfile.md" | pandoc -o "我的文件.docx"| iconv -f utf-8

虽然这确实解决了`pandoc's`无法识别`utf-8`的角色投诉，但由于某种原因`pandoc`停止找到我的情节，出现这样的错误：

> pandoc：找不到图像“figure/Parent.png”，正在跳过...

如果我只使用非重音字符，pandoc 会找到没有问题的图像。`.md`我用编辑器查看了这两个文件，`hex`当我比较处理数字的部分时，我看不出有任何区别：
`![plot of chunk Parent](figure/Parent.png)`
虽然很明显，强调的字符完全不同......我已经验证了图像文件确实存在于图文件夹

无论如何，在阅读了很多帖子后，我决定设置`RStudio`使用`UTF-8`编码。只有一个级别的文件，事情就很好。例如，我可以独立地将以下 2 个 Rmd 文件编织然后 pandoc 到 Word 中：

```
Parent   -   SAVED WITH utf-8 encoding in RStudio
========================================================

u with an accent: "ú"  SAVED WITH utf-8 encoding in RStudio

```{r fig.width=7, fig.height=6}
plot(cars, main='Parent ú')
``` 
```

并分别：

```
Child   -   SAVED WITH utf-8 encoding in RStudio
========================================================

u with an accent: "ú"  Child file

```{r fig.width=7, fig.height=6}
plot(cars, main='One File Child ú')
``` 
```

我得到了 2 个完美的预告片`RStudio`和 2 个完美的 Word 文档`pandoc`。

当我尝试从父部分调用子部分时，就会出现问题。换句话说，如果我在第一个文件中添加以下行：

```
```{r CallChild, child='TestUTFChild.Rmd'}

``` 
```

然后子文件中的所有重音都变成乱码，就好像`UTF-8`被解释为`ISO 8859-1`. `Pandoc`也停止读取文件，抱怨它不是`utf-8`.

如果有人能指出我正确的方向，要么：

**1.**如果我留下来，`pandoc`找不到情节`ISO 8859-1`。我也尝试过`Windows-1252`，因为这是我在 中看到的`sessionInfo`，但结果是一样的。

**或者**

**2.**调用子文件，如果`UTF-8`是要走的路。我一直在寻找一种方法来设置一些选项来强制子调用中的编码，但我还没有找到它。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:17:12.267

我认为这个问题应该在最新的开发版本中修复。请参阅[开发存储库](https://github.com/yihui/knitr#readme)中有关如何安装开发版本的说明。然后你应该可以在 RStudio 中选择 UTF-8，并得到一个 UTF-8 编码的输出文件。

以防万一有人对血腥细节感兴趣：之前失败的原因是我使用您提供的编码编写了子输出，但没有使用相同的编码读取它。现在我只是避免为[子文档](https://github.com/yihui/knitr/commit/7d741e76dc6b3b58308c0bc6215091daf39cbae1)编写输出文件。

# java - 如何从服务器下载文件并在视图中显示它们？

> ID：15352936
> 
> 赞同：0
> 
> 时间：2013-03-12T03:46:15.157
> 
> 标签：java, android, android-layout

我正在尝试在我的 Android 应用程序中完成两件事：

*   从服务器下载文件（pdf、图像和 html）
*   下载文件后，保存服务器中的所有文件并显示在 Android 选项卡视图中

我的问题是，如何从服务器下载文件并将其显示在我的应用程序中？

我的下载代码如下所示：

```
public void downloadFiles () {

        try {

            URL url = new URL ("http://google.com/nexuspads.png");
            HttpURLConnection c = (HttpURLConnection) url.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            String PATH = Environment.getExternalStorageDirectory() + "/download/" ;

            Log.v ("LOG_TAG" , "PATH: " + PATH);
            File file = new File (PATH);
            file.mkdirs();

            String fileName = "image.png";

            File outputFile = new File (file, fileName);
            FileOutputStream fos = new FileOutputStream(outputFile);

            InputStream is = c.getInputStream();

            byte[] buffer = new byte [1024];

            int len1 = 0 ;

            while ((len1 = is.read(buffer)) != -1){

                fos.write (buffer, 0, len1);
            }

            fos .close();
            is.close();

        }catch (IOException e) {
            Log.d ("LOG_TAG2 ", "Error " + e );
//          Toast.makeText(,"error " +e.toString(), Toast.LENGTH_LONG).show();      
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:55:23.537

要列出文件夹中的文件，可以按如下方式完成..

```
String path = Environment.getExternalStorageDirectory().toString()+"/YOUR folder here/";
            File f = new File(path);        
            final File listfile[] = f.listFiles();      
            String[] fileList = new String[listfile.length];
            for (int i=0; i < listfile.length; i++)     
            {
                fileList[i] =  listfile[i].getName();
                Log.v("Files", "FileName:" + listfile[i].getName());  
            } 
```

然后您可以在警报对话框或 ListView 中显示结果。

# java - Spring MVC 和 Ajax 框架使用

> ID：15352939
> 
> 赞同：1
> 
> 时间：2013-03-12T03:47:00.513
> 
> 标签：java, ajax, jsp, spring-mvc

我想在 Web 应用程序中将 Spring MVC 与 AJAX 功能结合起来。我知道，例如，DWR 通过允许您公开 Spring bean 以进行远程调用来支持 Spring。

当您使用 Spring MVC 作为 Java Web 框架时，是否有更合适的 javascript 框架可供使用？

# android - 如何在Android的textview中对电话号码进行其他操作

> ID：15352963
> 
> 赞同：1
> 
> 时间：2013-03-12T03:49:22.970
> 
> 标签：android

我将此行添加到我的文本视图中：

```
setAutoLinkMask(Linkify.ALL); 
```

它工作正常。
但是，我想检查这是否是电话号码，当用户单击此链接时，它会弹出一个对话框而不仅仅是拨打电话。
怎么办，求大神帮忙。

# c - C：如果仅修复某些字段，则读取输入文件的最佳方式

> ID：15352964
> 
> 赞同：2
> 
> 时间：2013-03-12T03:49:23.027
> 
> 标签：c, fgets, scanf

考虑给定的输入：

```
ID    Name             Num
--------------------------

213DA Andrews, Dennis; 6.9      // <--- cursor initially located on 2
283JB Brown, Joanne; 2.6
420JB Brown, Joanne; 0.0
339VL Lee, Victor; 3.6
126RW White, D. Robert; 3.5
150JM Marcus, John; 4.0
// more data with same format as above
// EOF 
```

我想将每个存储在并行数组中：

```
char *id[];
char *name[];
double num[]; 
```

以下哪一项更好？

1.  循环（直到 EOF）{

    `fgets`读取单行

    解析每个字段。

    }

2.  循环（直到 EOF）{

    `fscanf`读书`id[i]`

    `fscanf`读书`name[i]`

    `fscanf`读书`num[i]`

    我++

    }

或者，我们是否有更高效（内存方面和/或处理速度方面）的方式来编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:45:14.080

我认为后者更好。因为它更容易阅读，更直接。至于效率，我觉得这两种方法差别不大，因为操作系统为我们做了很多。顺便说一句，我建议你使用 struct 类型来使代码更具可读性。

# .net - 发送手动命令代码时从打印机弹出纸张

> ID：15352965
> 
> 赞同：1
> 
> 时间：2013-03-12T03:49:27.067
> 
> 标签：.net, printing, epson

我正在为打印机 Epson TM-H5000II 编程。

我在调用函数 ESC c 0 4 时尝试打印便条纸。

我正在使用的基本步骤：

1.  手动插入纸张
2.  调用 ESC c 0 4（选择隔页纸）

问题是在调用 ESC c 0 4 后，纸张将从打印机中弹出。

如何告诉打印机停止从打印机中弹出我的纸张？

可以这样做还是打印机的限制？

* * *

更新 2013-03-16

我找到了另一个爱普生文件。我正在尝试禁用 TOF 和 BOF 传感器。但我不确定我的代码是正确还是错误。希望有人能给我一些提示来解决问题。谢谢你

这是文件。第 1 页[http://postimage.org/image/i0mffniv9](http://postimage.org/image/i0mffniv9) 第 2 页 [http://postimage.org/image/ev1tpg091](http://postimage.org/image/ev1tpg091/)

下面是我的代码

```
Dim SerialPort1 As New SerialPort("COM1")
SerialPort1.BaudRate = 9600
SerialPort1.Parity = IO.Ports.Parity.None
SerialPort1.StopBits = 1
SerialPort1.DataBits = 8
SerialPort1.WriteBufferSize = 4096
If SerialPort1.IsOpen = False Then SerialPort1.Open()
If SerialPort1.IsOpen Then
    'SerialPort1.DiscardInBuffer()
    'SerialPort1.DiscardOutBuffer()
        'Initialize Printer 
    Dim BufferInitialize() As Byte = {&H1B, &H40}
    SerialPort1.Write(BufferInitialize, 0, BufferInitialize.Length)
    ''Enable(SLip) ESC c 1 4
            Dim Buffer5() As Byte = {&H1B, &H63, &H31, &H4}
    SerialPort1.Write(Buffer5, 0, Buffer5.Length)
    'Disable sensor
    Dim BufferTOF() As Byte = {&H1B, &H63, &H34, &H10}
    SerialPort1.Write(BufferTOF, 0, BufferTOF.Length)
    'Disable sensor
    Dim BufferBOF() As Byte = {&H1B, &H63, &H34, &H20}
    SerialPort1.Write(BufferBOF, 0, BufferBOF.Length)
    'Enable(SLip) ESC c 0 4
    Dim Buffer2() As Byte = {&H1B, &H63, &H30, &H4}
    SerialPort1.Write(Buffer2, 0, Buffer2.Length) 

    SerialPort1.WriteLine("WHY")
    'Release
    Dim BufferEnd() As Byte = {&H1B, &H71}
    SerialPort1.Write(BufferEnd, 0, BufferEnd.Length) 
End If
If SerialPort1.IsOpen = True Then SerialPort1.Close() 
```

# java - 在 Java 上绘制 2 个球以不同的方向移动，但一个球消失了

> ID：15352969
> 
> 赞同：-3
> 
> 时间：2013-03-12T03:50:05.973
> 
> 标签：java, multithreading, swing, jpanel

我正在尝试创建一个程序，该程序将绘制 2 个球，一个在北中心，另一个在南中心。我需要将球向不同方向移动，北方的第一个球随机向南移动，而南方中心的另一个球向北移动。我可以让北中心的球向下移动，但南边的第二个球在被抽出后立即消失。

PS：我需要有 2 个内部类，即`Ball1`和`Ball2`. 请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:58:20.513

问题...

1.  `while-loop`在调整图形对象位置的事件调度线程中
2.  `Thread.sleep`在`paint`方法中。
3.  不打电话`super.paintComponent`
4.  在方法中更新对象的状态`paintComponent`。

Swing 使用单线程模型，除其他外，该模型负责将重绘请求分派给所有组件。

在 EDT 中执行任何停止处理这些事件的操作都会阻止 Swing 重新绘制 UI。这将使您的动画看起来像是突然从头到尾一步到位。

查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多详细信息。特别是，看看[Initial Threads](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)和[How to use Swing Timers](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

我应该强调第4点-

您无法控制重绘周期。重绘请求可能会因多种原因而被提出，您没有要求，这些将导致您的对象更新超出您的控制或当您不希望它们更新时。`paint`你永远不应该在任何方法中更改 UI 任何部分的状态。

**简单示例**

这是一个非常简单的示例，但它演示了在 Swing 中制作任何动画所需了解的基本概念

```
public class SimpleBouncyBall {

    public static void main(String[] args) {
        new SimpleBouncyBall();
    }

    public SimpleBouncyBall() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new CourtPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class CourtPane extends JPanel {

        private Ball ball;
        private int speed = 5;

        public CourtPane() {
            Timer timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    Rectangle bounds = new Rectangle(new Point(0, 0), getSize());
                    if (ball == null) {
                        ball = new Ball(bounds);
                    }
                    speed = ball.move(speed, bounds);
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 
            if (ball != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                Point p = ball.getPoint();
                g2d.translate(p.x, p.y);
                ball.paint(g2d);
                g2d.dispose();
            }
        }

    }

    public class Ball {

        private Point p;
        private int radius = 12;

        public Ball(Rectangle bounds) {

            p = new Point();
            p.x = 0;
            p.y = bounds.y + (bounds.height - radius) / 2;

        }

        public Point getPoint() {
            return p;
        }

        public int move(int speed, Rectangle bounds) {

            p.x += speed;
            if (p.x + radius >= (bounds.x + bounds.width)) {

                speed *= -1;
                p.x = ((bounds.x + bounds.width) - radius) + speed;

            } else if (p.x <= bounds.x) {

                speed *= -1;
                p.x = bounds.x + speed;

            }

            p.y = bounds.y + (bounds.height - radius) / 2;

            return speed;

        }

        public void paint(Graphics2D g) {
            g.setColor(Color.RED);
            g.fillOval(0, 0, radius, radius);
        }

    }

} 
```

# java - Slick2D AppGameContainer 到 AppletGameContainer

> ID：15352972
> 
> 赞同：0
> 
> 时间：2013-03-12T03:50:25.200
> 
> 标签：java, applet, main, slick2d

好吧，我已经制作了这个游戏一段时间了，我最近决定把它放到我的网站上！简而言之，我不知道如何将我的游戏从 AppGameContainer 转换为 AppletGameContainer。我已经在互联网上查看了无数时间并按照教程进行操作，但似乎无法使其正常工作！

这是我的主要课程的代码。

公共类主要{

```
public static void main(String[] args) {

    AppGameContainer game;

    try {
        game = new AppGameContainer(new Engine("Galactic Warrior"));
        game.setIcon("resources/images/ico3.png");
        game.setDisplayMode(640, 480, false); //640, 360 = 1080p ratio
        game.setMaximumLogicUpdateInterval(60);
        game.setTargetFrameRate(60);
        game.setAlwaysRender(true);
        game.setVSync(true);
        game.setShowFPS(false);
        game.start();
    } catch (SlickException e) {
        e.printStackTrace();
    }
} 
```

}

那么我究竟如何才能将其转换为 AppletGameContainer 呢？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T00:28:26.720

我一开始也有这个问题。

您需要做的就是将其视为普通应用程序。不要为此开设另一个课程。另请注意，`main`加载或加载小程序时不会调用该方法。

相反，小程序由`Init()`. 您将需要这样做：

```
private GameContainer container;

@Override
public void init(GameContainer gc) throws SlickException {
    container = gc;

    gc.setShowFPS(false);
    gc.setTargetFrameRate(60);
    gc.setSmoothDeltas(true);
    gc.setAlwaysRender(true);
    gc.setVerbose(true);
} 
```

现在容器将保存有关它是哪种容器的所有信息。你也可以这样做来调试和惊奇自己：

```
 if(container instanceof AppletGameContainer.Container){
        //This is an Applet
    } 
```

如果您还在 HTML 代码中添加自定义参数，您可以这样做：

```
((AppletGameContainer.Container) container).getParameter("HTMLParamKey"); 
```

使用 HTML 代码：

```
<param name="HTMLParamKey" value="some value here"> 
```

# windows-8 - 类库中的 UI 页面

> ID：15352974
> 
> 赞同：0
> 
> 时间：2013-03-12T03:50:51.960
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我正在 Windows 8 (C#) 中开发一个类库，我需要在其中显示一个 UI 以获取用户输入。如何在类库中创建 UI 并调用它。请帮忙。

现在我从类库调用弹出窗口以显示所需的 UI，但我发现弹出窗口正在从库中打开，但它隐藏在另一个 UI 元素（在我的例子中为 Webview）下方。请参阅下面的代码片段。

类库代码

```
namespace PopUpLibrary
{
    public class PopupDialog
    {
        public void ShowPopup()
        {
            Popup popup = new Popup();
            popup.HorizontalAlignment = HorizontalAlignment.Center;
            popup.VerticalAlignment = VerticalAlignment.Center;          
            popup.Height = 500;
            popup.Width = 700;
            Button button = new Button();
            button.Content = "adfadfad";
            button.Width = 200;
            button.Height = 100;
            popup.Child = button;
            popup.IsOpen = true;

        }
    }
} 
```

申请代码：

主页.xaml

```
 <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
            <WebView Name="webview" ></WebView>
     </Grid> 
```

MainPage.xaml.cs

```
public MainPage()
{
     this.InitializeComponent();
     webview.Navigate(new Uri("http://www.google.com"));
     PopupDialog popupdialog = new PopupDialog();
     popupdialog.ShowPopup();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:54:03.090

什么样的输入？是/否或字符串输入？

对于是/否，您可以使用标准[MessageDialog](http://msdn.microsoft.com/library/windows/apps/BR208674)。如果您需要接收自定义输入，例如文本，您可以使用[Callisto工具包中提供的](https://github.com/timheuer/callisto)[CustomDialog](https://github.com/timheuer/callisto/wiki/CustomDialog)控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:27:33.377

您不能在 WebView 之上显示其他控件。但是，您可以通过暂时隐藏 WebView 并显示 WebViewBrush 来解决此问题。

从[WebView 文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.webview.aspx)：

> WebView 具有不能在 WebView 之上渲染其他 UI 区域（例如控件）的特点。这是因为窗口区域是如何在内部处理的，特别是如何处理输入事件以及如何绘制屏幕。如果你想渲染 HTML 内容并且在 HTML 内容之上放置其他 UI 元素，你应该使用 WebViewBrush 作为渲染区域。WebView 仍然提供 HTML 源信息，您可以通过 SourceName 属性引用该 WebView。WebViewBrush 没有此覆盖限制。
> 
> 如果要显示一个仅偶尔有重叠内容的交互式 WebView（例如下拉列表或应用栏），可以在必要时暂时隐藏 WebView 控件，将其替换为使用 WebViewBrush 填充的元素。然后，当重叠内容不再存在时，您可以再次显示原始 WebView。有关详细信息，请参阅[WebView 控件示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)。

# digital-signature - 在共享主机上签署 PHP 电子邮件

> ID：15352978
> 
> 赞同：0
> 
> 时间：2013-03-12T03:51:08.317
> 
> 标签：digital-signature, php, dkim, spf

我正在使用共享托管计划，当我使用 PHP 发送电子邮件时，电子邮件客户端（如[Gmail](http://support.google.com/mail/answer/1311182?hl=en&ctx=mail)）将`via`在我的`from`字段中添加一点内容，其中包含我的主机域。

因此，而不是我的电子邮件仅来自我的域：

```
From: me@mydomain.com 
```

它来自两个域：

```
From: me@mydomain.com via host13.myhost.com 
```

显然，这会让接收电子邮件的人感到困惑，并且品牌形象不佳。由于我使用的是共享主机计划，我认为我无法访问 PHP 的配置设置或它用于邮件的任何内容。我是否可以对我的 PHP 电子邮件进行数字签名，或者这在共享主机上是不可能的？

这是我现在正在做的事情：

```
$header = "From: me@mydomain.com";
mail("you@yourdomain.com", "subject", "body", $header); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:59:10.840

你可以试试这个，你需要从[这里](http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php4/0.90/)下载 PHP Mailer 类，你的代码会是这样的：

```
 <?php
include "PHP MAILER CLASS";
    $mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch
    $mail->IsSMTP(); // telling the class to use SMTP
    try {
        //$mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing)
        $mail->SMTPAuth   = true;                  // enable SMTP authentication
        $mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
        $mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
        $mail->Port       = 465;                   // set the SMTP port for the GMAIL server
        $mail->Username   = "example@gmail.com";  // GMAIL username
        $mail->Password   = "password";            // GMAIL password
        $mail->AddAddress("Reciever Email", "Reciever Name");
        $mail->SetFrom('Sender Email', 'Sender Name');
        $mail->Subject = "Subject";
        $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!'; // optional - MsgHTML will create an alternate automatically
        $mail->MsgHTML("Message Body");
        $mail->Send();
    } catch (phpmailerException $e) {
        $e->errorMessage(); //Pretty error messages from PHPMailer
    } catch (Exception $e) {
        $e->getMessage(); //Boring error messages from anything else!
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:03:37.830

默认邮件功能取决于您的服务器设置，并且在收件人看来很少像普通邮件。您应该使用[SwitfMailer](http://swiftmailer.org/)或[pear MAIL](http://pear.php.net/package/Mail)库，它可以通过您自己的邮件服务器通过 SMTP 发送邮件。您可以使用您的普通电子邮件帐户或为您的网络服务设置一个新帐户。

# sql - ORACLE SQL 和 COMMENT ON TABLE 多次返回的限制

> ID：15352980
> 
> 赞同：1
> 
> 时间：2013-03-12T03:51:21.100
> 
> 标签：sql, oracle, comments

我怎样才能得到

```
COMMENT ON TABLE  Table.ABC IS 'Blah 1';
COMMENT ON TABLE  Table.ABC IS 'Blah 2'; 
```

返回

```
Table.ABC Blah 1

Table.ABC Blah 2 
```

而不是只返回一条评论（最后一条）

```
Table.ABC Blah 2 
```

通过调用以下查询

```
 SELECT table_name, comments

 FROM user_tab_comments

 WHERE comments IS NOT NULL

 ORDER BY 1, 2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:16:42.250

1.  你不能。每个对象只能有一个评论。
2.  如果出于某种原因您需要，您可以随时创建自己的表格并拥有尽可能多的评论。

# python - Hadoop：如何在 Python MapReduce 中包含第三方库

> ID：15352981
> 
> 赞同：1
> 
> 时间：2013-03-12T03:51:34.797
> 
> 标签：python, hadoop, mapreduce

我正在用 Python 编写 MapReduce 作业，并且想使用一些第三个库，例如`chardet`.

我知道我们可以使用选项`-libjars=...`将它们包含在 java MapReduce 中。

但是如何在 Python MapReduce Job 中包含第三方库？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:01:23.330

问题已经解决了`zipimport`。

然后我 zip`chardet`到 file `module.mod`，并像这样使用：

```
importer = zipimport.zipimporter('module.mod')
chardet = importer.load_module('chardet') 
```

添加`-file module.mod`hadoop 流命令。

现在`chardet`可以在脚本中使用。

更多详细信息见：[如何在 Hadoop 流式作业中包含 python 包？](https://stackoverflow.com/questions/6811549/how-can-i-include-a-python-package-with-hadoop-streaming-job/6811772#6811772)

# node.js - 如何阻止nodejs查询结果

> ID：15352982
> 
> 赞同：0
> 
> 时间：2013-03-12T03:51:36.603
> 
> 标签：node.js

我对nodejs很陌生。

我希望我的代码可以多次查询数据库，从一个变量中的所有查询中收集数据，然后在某处使用它。

但我猜 nodejs 不是等待查询的结果，而是在不阻塞的情况下执行。这就是我认为正在发生的事情。对不起，如果我错了。

```
for (var i = step_min; i < (step_max); i += step) {
    query = 'select count(' + colName + ') as num_count from ' +
        rows[0].tablename + ' where ' + 'dictionaryid=' +
        rows[0].dictionaryid + ' and ' + colName + ' between ' + i +
        ' and ' + (i + step);

    connection.query(query, function(err, rows1, fields) {
        if (err) {
            console.log(err);
            throw err;
        }

        try {
            console.log("$$$$$$$$$$$$$$$ pushed : "+ rows1[0].num_count);
            contents.push(rows1[0].num_count);  
            console.log('contents : '+ contents+'\n');                        

        } catch (e) {
            if (e instanceof SyntaxError) {
                console.log("Syntax Error for input function");
            }
        }

    });

    console.log("##################### " + query + "\n");

    console.log('contents : '+ contents+'\n');
} 
```

关于如何阻止nodejs直到获得查询结果或以其他方式重组我的代码的任何建议？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:04:55.553

您是正确的，它在执行之前没有等待您的查询。您可以查看可用于对查询进行排队的[node-mysql-queues](https://github.com/bminer/node-mysql-queues)模块，并在全部执行后执行给定的回调（它还允许您执行事务）

另一种（hack）方法是设置您正在执行的查询数量的计数器。在每个事务的回调中，将结果保存到您的返回对象中并递减计数器。如果它是 <= 0，那么您的所有查询都已完成，您可以使用返回对象执行主回调。

另外，请注意 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T14:37:30.680

试试这个： [https ://github.com/luciotato/waitfor](https://github.com/luciotato/waitfor)

您的代码带有wait.for：

```
for (var i = step_min; i < (step_max); i += step) {
    query = 'select count(' + colName + ') as num_count from ' +
        rows[0].tablename + ' where ' + 'dictionaryid=' +
        rows[0].dictionaryid + ' and ' + colName + ' between ' + i +
        ' and ' + (i + step);

    var rows1 = wait.forMethod(connection,"query",query); //waits until callback
    console.log("$$$$$$$$$$$$$$$ pushed : "+ rows1[0].num_count);
    contents.push(rows1[0].num_count);  
}
console.log("##################### " + query + "\n");
console.log('contents : '+ contents+'\n');

} catch (e) {
            if (e instanceof SyntaxError) {
                console.log("Syntax Error for input function");
            }
            ....
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:08:31.740

做类似下面的事情可能是一种解决方法。

//它只是一个测试代码，无论首先想到什么，所以我稍后会调整它......

```
 var contents = [];

        var lock = 0;

        for (var i = step_min; i < (step_max + step); i += step) {
            lock++;
        }

        for (var i = step_min; i < (step_max + step); i += step) {
            query = 'select count(' + colName + ') as num_count from ' + rows[0].tablename + ' where ' + 'dictionaryid=' + rows[0].dictionaryid + ' and ' + colName + ' between ' + i + ' and ' + (i + step);

            connection.query(query, function(err, rows1, fields) {
                if (err) {
                    console.log(err);
                    throw err;
                }

                try {
                    console.log("$$$$$$$$$$$$$$$ pushed : " + rows1[0].num_count);
                    contents.push(rows1[0].num_count);
                    console.log('contents : ' + contents + '\n');

                } catch (e) {
                    if (e instanceof SyntaxError) {
                        console.log("Syntax Error for input function");
                    }
                }

                lock--;

                if (lock == 0) {
                    queryDone();
                }

            });

        }

        function queryDone() {

            console.log("##################### " + query + "\n");

            console.log('contents : ' + contents + '\n');

            var id = obj.exptID + '.' + obj.exptITR + '.' + obj.nodeID + '.' + obj.resourceName + '.' + colName;
            serie = {
                name: colName,
                data: contents,
                id: id
            };

            console.log("--------------------\n " + step_max + "\n" + step_min + "\n------------------------\n");
        } 
```

方法是在尼克说的所有查询都完成后触发一个函数......

# java - 骆驼文件单元测试

> ID：15352984
> 
> 赞同：3
> 
> 时间：2013-03-12T03:51:47.557
> 
> 标签：java, apache-camel

我是 Apache Camel 的新手，我编写了一个简单的路径来扫描目录（/test），文件将在复制到目录时进行处理。任何人都知道如何编写骆驼单元测试来测试以下路线？有没有办法模拟将文件复制到 /test 目录的过程，以便触发路由。

```
public void configure() {
    from( "file:/test?preMove=IN_PROGRESS" + 
          "&move=completed/${date:now:yyyyMMdd}/${file:name}" + 
          "&moveFailed=FAILED/${file:name.noext}-${date:now:yyyyMMddHHmmssSSS}.${file:ext}" )
    .process(new Processor() {
          public void process(Exchange exchange) throws IOException {
              File file = (File) exchange.getIn().getBody();
              // read file content ......                 
          }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:43:48.463

您已经通过许多正确方法之一完成了路由。但是还有一些更重要的部分可以让你的代码运行——你应该创建一个上下文，用这个 your 创建一个路由器`configure()`，将它添加到一个上下文中，然后运行这个上下文。

抱歉，比起处理器，我更喜欢 bean，所以你还必须注册一个 bean。并让您在命名类中处理普通的命名方法。

我认为，最紧凑的信息在[这里](http://camel.apache.org/running-camel-standalone-and-have-it-keep-running.html)。JUnit 测试是一个独立的应用程序，您需要将 Camel 作为独立应用程序运行以进行 JUnit 测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T09:46:25.453

我认为基本的想法是你模拟最终端点，这样你就可以检查你的路线是什么。有几种不同的方法，但您可以按如下方式测试您的路线：

```
public class MyRouteTest extends CamelSpringTestSupport {

    private static final String INPUT_FILE = "myInputFile.xml";

    private static final String URI_START = "direct:start";

    private static final String URI_END = "mock:end";

    @Override
    public boolean isUseAdviceWith() {
        return true;
    }

    @Override
    protected AbstractApplicationContext createApplicationContext() {
        return new AnnotationConfigApplicationContext(CamelTestConfig.class); // this is my Spring test config, where you wire beans
    }

    @Override
    protected RouteBuilder createRouteBuilder() {
        MyRoute route = new MyRoute();
        route.setFrom(URI_START); // I have added getter and setters to MyRoute so I can mock 'start' and 'end'
        route.setTo(URI_END);
        return route;
    }

    @Test
    public void testMyRoute() throws Exception {

        MockEndpoint result = getMockEndpoint(URI_END);
        context.start();

        // I am just checking I receive 5 messages, but you should actually check the content with expectedBodiesReceived() depending on what your processor does to the those files.

        result.expectedMessageCount(5);

        // I am just sending the same file 5 times
        for (int i = 0; i < 5; i++) {
            template.sendBody(URI_START, getInputFile(INPUT_FILE));
        }        

        result.assertIsSatisfied();
        context.stop();
    }

    private File getInputFile(String name) throws URISyntaxException, IOException {
        return FileUtils.getFile("src", "test", "resources", name);
    } 
```

我相信你已经解决了你的问题是 2013 年，但这就是我在 2017 年将如何解决它。问候

# javascript - javascript拼接的问题

> ID：15352989
> 
> 赞同：2
> 
> 时间：2013-03-12T03:52:16.087
> 
> 标签：javascript

我有一小段代码试图从数组中拼接一个项目。在下面的代码中，它应该删除具有“Javascript”的项目，并且结果数组应该只包含“Java”。我在这里做错了什么？

```
var autoCompleteArray = new Array();

var item = new Array();
item.push("1");
item.push("Java");
autoCompleteArray.push(item);

var item2 = new Array();
item2.push("2");
item2.push("Javascript");
autoCompleteArray.push(item2);

var val = "Javascript";

for(var i=0;i<autoCompleteArray.length;i++){

  if(autoCompleteArray[i][1] == val) {

    autoCompleteArray.splice(autoCompleteArray[i],1);

  }
}

console.log(autoCompleteArray);  //Should show Java in the array since Javascript item has been removed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:00:49.880

你在拼接错误的东西；这应该工作：

```
 if(autoCompleteArray[i][1] == val) {
    autoCompleteArray.splice(i,1);
  } 
```

的第一个参数`.splice()`是索引，而不是该索引处的值。

请注意，当您在 index 处拼接时`i`，对于该迭代，您不应增加`i`：

```
var i = 0;
while (i < autoCompleteArray.length) {
  if(autoCompleteArray[i][1] == val) {
    autoCompleteArray.splice(i, 1);
    continue;
  }
  ++i;
} 
```

当然，如果只能有一场比赛，这很好，在这种情况下，您也可以`break;`跳出循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:06:24.340

正如@Jack 提到的，您需要将索引（而不是值）传递给拼接。我会将您的循环重写为：

```
for (var i = 0; i < autoCompleteArray.length; i++) {
    if (autoCompleteArray[i][1] === val) {
        autoCompleteArray.splice(i--, 1);
    }
} 
```

那应该可以解决您的问题。在此处查看演示：http: [//jsfiddle.net/7PM94/](http://jsfiddle.net/7PM94/)

另请注意，您可以使用文字语法而不是推送元素来创建数组。你可以定义`autoCompleteArray`如下：

```
var autoCompleteArray = [
    ["1", "Java"],
    ["2", "JavaScript"]
]; 
```

希望有帮助。

# sql - 使用 SQL 获取列的字数

> ID：15352990
> 
> 赞同：1
> 
> 时间：2013-03-12T03:52:17.283
> 
> 标签：sql, sql-server-2008, word-count

我有一个表，其中有一列名为`Description`. 该列填充有文本数据。我想创建一个查询，返回每个描述中的字数。

我的想法是创建一个函数，该函数接受一个值，并返回在输入文本中找到的单词数量。

```
SELECT dbo.GetWordCount(Description) FROM TABLE 
```

例如，如果描述是“Hello World！祝你有美好的一天。”，查询应该返回 6。

如何获取描述列的字数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:55:00.500

请参阅此建议的解决方案：[http ://www.sql-server-helper.com/functions/count-words.aspx](http://www.sql-server-helper.com/functions/count-words.aspx)

```
CREATE FUNCTION [dbo].[WordCount] ( @InputString VARCHAR(4000) ) 
RETURNS INT
AS
BEGIN

DECLARE @Index          INT
DECLARE @Char           CHAR(1)
DECLARE @PrevChar       CHAR(1)
DECLARE @WordCount      INT

SET @Index = 1
SET @WordCount = 0

WHILE @Index <= LEN(@InputString)
BEGIN
    SET @Char     = SUBSTRING(@InputString, @Index, 1)
    SET @PrevChar = CASE WHEN @Index = 1 THEN ' '
                         ELSE SUBSTRING(@InputString, @Index - 1, 1)
                    END

    IF @PrevChar = ' ' AND @Char != ' '
        SET @WordCount = @WordCount + 1

    SET @Index = @Index + 1
END

RETURN @WordCount

END
GO 
```

使用示例：

```
DECLARE @String VARCHAR(4000)
SET @String = 'Health Insurance is an insurance against expenses incurred through illness of the insured.'

SELECT [dbo].[WordCount] ( @String ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-31T01:28:36.403

这有点麻烦，但它很好地处理了空白问题，它快速且内联，没有 udf。

```
DECLARE @Term VARCHAR(100) = '  this   is   pretty fast '

SELECT @Term, LEN(REPLACE(REPLACE(REPLACE(' '+@Term,'  ',' '+CHAR(1)) ,CHAR(1)+' ',''),CHAR(1),'')) -  LEN(REPLACE(REPLACE(REPLACE(REPLACE(' '+@Term,'  ',' '+CHAR(1)) ,CHAR(1)+' ',''),CHAR(1),''),' ','')) [Word Count] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-20T06:23:07.757

除了[Mortalus](https://stackoverflow.com/users/605129/mortalus)的回答之外，对于 SQL Server 的早期版本，我会使用**内联函数**而不是标量（*注意 - 此函数适用于 SQL Server 2012 及更高版本） ***，请参见下文：***

```
 /*SQL Server 2012 and up*/
    CREATE FUNCTION dbo.udf_WordCount 
    (

    @str VARCHAR(8000) 

    )
    RETURNS TABLE AS RETURN

    WITH Tally (n) AS
    (
        SELECT TOP (LEN(@str)) ROW_NUMBER()  OVER (ORDER BY (SELECT NULL)) 
        FROM (VALUES (0),(0),(0),(0),(0),(0),(0),(0)) a(n)
        CROSS JOIN (VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0)) b(n)
        CROSS JOIN (VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0)) c(n)
        CROSS JOIN (VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0)) d(n)
    )
    , BreakChar as
    (
        SELECT  SUBSTRING(@str , n , 1) [Char] , N
        FROM Tally

    )
    , Analize as 
    (
        SELECT * , lag([Char],1) OVER (ORDER BY N) PrevChar
        FROM BreakChar
    )

        SELECT WordCount = COUNT(1) + 1 
        FROM Analize
        WHERE [Char] != PrevChar
        AND PrevChar = ' ' 
```

如何使用：

```
 DECLARE @str varchar(1000) = 'It''s now or never I ain''t gonna live forever'
    SELECT * FROM dbo.udf_WordCount(@str) --> 9 
```

**SQL Server 2008 及更低版本：

```
 /*SQL Server 2008 and down*/
    CREATE FUNCTION dbo.udf_WordCount_2008 
    (
    --declare
    @str VARCHAR(8000) 
    --= 'It''s now or never I ain''t gonna live forever'
    )
    RETURNS TABLE AS RETURN

    WITH Tally (n) AS
    (
        SELECT TOP (LEN(@str)) ROW_NUMBER()  OVER (ORDER BY (SELECT NULL)) 
        FROM (VALUES (0),(0),(0),(0),(0),(0),(0),(0)) a(n)
        CROSS JOIN (VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0)) b(n)
        CROSS JOIN (VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0)) c(n)
        CROSS JOIN (VALUES(0),(0),(0),(0),(0),(0),(0),(0),(0),(0)) d(n)
    )
    , BreakChar as
    (
        SELECT  SUBSTRING(@str , n , 1) [Char] , N
        FROM Tally

    )
    , Analize as 
    (
        SELECT a.* , b.Char PrevChar
        FROM BreakChar a
        JOIN BreakChar b
        on a.n = b.n+1

    )

        SELECT WordCount = COUNT(1) + 1 
        FROM Analize
        WHERE [Char] != PrevChar
        AND PrevChar = ' ' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T05:57:12.977

通用语法：

```
SELECT (LENGTH(column_name) - LENGTH(REPLACE(column_name, ' ', ''))),column_name1,column_name2 FROM table_name; 
```

如果要计算名为“employeeDetails”的表的单个“地址”列中有多少个单词，则：

```
SELECT (LENGTH(address) - LENGTH(REPLACE(address, ' ', ''))),address,employee_name FROM employeeDetails ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-25T21:02:50.447

此答案基于我最初在[此处找到的](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=129034)[Mortalus 答案](https://stackoverflow.com/a/15353017/4660897)中使用的相同代码。

此解决方案是该代码的更高效、更简洁的版本。我还为代码添加了一些解释，希望能让未来的读者更清楚地回答这个问题。

* * *

下面的[用户定义函数](https://docs.microsoft.com/en-us/sql/relational-databases/user-defined-functions/user-defined-functions)接受一个文本字符串，然后循环输入文本的每个字符。如果前一个字符是空格，则字数加一。

由于字数是通过计算单词之间的空格来计算的，因此空格总是比实际单词少 1。为了解决这个问题，从`@PrevChar`的值开始`' '`。然后，当第一次运行循环时，当代码到达时`IF @PrevChar = ' '`，它将返回true，并且字数将增加一。即使文本的长度为 0，这也有效，因为在这种情况下，它不会通过`@Index <= LEN(@InputString)`检查，并且字数永远不会增加。（这替换了`CASE`链接答案中使用的语句。）

`AND @CurrentChar != ' '`用于解决双倍行距被计为多字的问题。如果前一个字符是空格，但当前字符也是空格，则在不增加字数的情况下继续下一个索引。下一次迭代将只`@PrevChar`设置为`' '`，因此双倍空格的字数只会增加一次。

```
CREATE FUNCTION [dbo].[WordCount] (@InputString VARCHAR(MAX))
RETURNS INT
AS
BEGIN
    DECLARE @Index INT = 1
    DECLARE @CurrentChar CHAR(1)

    --Initialize the previous character as a space.
    DECLARE @PrevChar CHAR(1) = ' '

    DECLARE @WordCount INT = 0

    WHILE @Index <= LEN(@InputString)
    BEGIN
        --Set the current character to equal the character in the index 
        --position of the inputted text.
        SET @CurrentChar= SUBSTRING(@InputString, @Index, 1)

        --If the previous character was a space and the current character
        --is not a space, increase the wordcount by 1.
        IF @PrevChar = ' ' AND @CurrentChar != ' '
            SET @WordCount = @WordCount + 1

        --Increase the index counter by 1.
        SET @Index = @Index + 1

        --Now that we are done with the current character, set the previous
        --character to equal the current character.
        SET @PrevChar = @CurrentChar
    END

    RETURN @WordCount
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-04T20:10:49.883

必备条件：SQL Server 2016 及更高版本

我在我的 sp 中使用它，我收到一个句子，所以我可以处理内部空间。

[![在此处输入图像描述](../Images/d102c597301a6da5a702377c638a555a.png)](https://i.stack.imgur.com/CBnXV.png)

```
SELECT value from STRING_SPLIT(@oracion1,' ') 
```

现在我用文本过滤值并计算它们以实现此目的：

[![在此处输入图像描述](../Images/ec7ac8faaf2c14763cd6b26be008d29d.png)](https://i.stack.imgur.com/KKiJD.png)

```
SELECT count(value) from STRING_SPLIT(@str,' ') where len(value)>0 
```

@oracion1 可能是 N"JUAN ES CARPINTERO" 或 @oracion1 可能是 N"JUAN ES CARPINTERO"

# java - Android - Java：如何慢慢画一条直线

> ID：15352992
> 
> 赞同：0
> 
> 时间：2013-03-12T03:52:19.080
> 
> 标签：java, android, draw, gesture

我不能慢慢画一条直线！当我慢慢滑动时，我有一条波浪线而不是一条直线。

我尝试使用“指针位置”工具来检查点，我得到了相同的结果。但是当我快速、垂直或水平滑动时，我得到了直线......

这是我的代码

```
public boolean onTouchEvent(MotionEvent event) {
    // TODO Auto-generated method stub
    String ms;
    switch (event.getAction()){
    case MotionEvent.ACTION_DOWN:
        int xDown = (int)event.getX();
        int yDown =  (int)event.getY();

        ms = "down";
        out.println(xDown);
        out.println(yDown);
        out.println(ms);

        break;
    case MotionEvent.ACTION_MOVE:
        ms = "move";

        int hsize = event.getHistorySize(); 
        for(int i=0;i<hsize;i++)
        {
            int x = (int)event.getHistoricalX(i);
            int y = (int)event.getHistoricalY(i);
            int hx = x;
            int hy = y;
            out.println(hx);
            out.println(hy);
            out.println(ms);
        }

        /*
        int xMove =  (int)event.getX();
        int yMove =  (int)event.getY();
        out.println(xMove);
        out.println(yMove);
        ms = "move";
        out.println(ms);
        */
        break;
    case MotionEvent.ACTION_UP:
        int xUp = (int)event.getX();
        int yUp =  (int)event.getY();
        out.println(xUp);
        out.println(yUp);
        ms = "up";
        out.println(ms);
        break;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:20:36.927

我可以建议您保存起始位置并每次从起点到您触摸屏幕的点重绘线。

如果您不想要由直线组成的多边形，您可以通过点击屏幕上要放置下一个点的位置来绘制它。

# javascript - 拖动时可拖动的 jQuery UI 无法正确更新背景颜色

> ID：15352993
> 
> 赞同：0
> 
> 时间：2013-03-12T03:52:24.073
> 
> 标签：javascript, jquery-ui

我正在开发一种可以从图像中选择颜色的工具，并且我正在尝试使用可拖动的 div 来突出显示图像中的颜色以添加到调色板中。我的代码在espresso的预览功能中工作，但是一旦部署到网站上，背景颜色就不会实时更新。相反，当我向下滚动窗口或有时延迟后它会更新。以下是相关代码：

```
for (i=0; i<maxPaletteSize; i++)
{
    circleDiv[i] = document.getElementById('circle' + i);
    $("#circle" + i).draggable({
        drag: function(event, ui) {
            // find current x,y of div
            var circleX = ui.position.left;
            var circleY = ui.position.top;

            // figure out what color pixel the circle is over
            var pixelNum = Math.round(circleY * img.width + circleX) * 4;
            var color = "rgba(" + imgData.data[pixelNum] + "," + imgData.data[pixelNum+1] + "," + imgData.data[pixelNum+2] + ")";

            // change div background to the appropriate color
            $(ui.helper).css({backgroundColor: color});   
        }
    }); 
```

}

当我单步执行代码时，颜色设置正确，只是 backgroundColor 不会实时更新（尽管当我单步执行代码时响应更快）。我尝试过使用动画以及将显示更改为无然后内联（我在此处发布的其他问题的建议），但没有任何东西可以使其实时响应。

任何帮助，将不胜感激。

编辑以添加最初设置 div 的代码。我将所有 div 存储在一个数组中，以便在代码的其他部分中更轻松地访问。

```
// draw the circles
for (i=0; i<paletteSize; i++)
{
    // get the color from the palette
    var paletteColorIdx = paletteCircles[i].palette;
    // show the div
    circleDiv[i].style.display = 'inline';
    // calculate the absolute x,y coords
    circleDiv[i].style.left = (uiFrame.offsetLeft + paletteCircles[i].x - circleDiv[i].offsetWidth/2) + "px";
    circleDiv[i].style.top = (uiFrame.offsetTop + paletteCircles[i].y - circleDiv[i].offsetHeight/2) + "px";
    // set the color
    circleDiv[i].style.backgroundColor = "rgb(" + palette[paletteColorIdx][0] + "," + palette[paletteColorIdx][1] + ","  + palette[paletteColorIdx][2] + ")";
} 
```

jsfiddle 链接：http: [//jsfiddle.net/FzxNk/6/](http://jsfiddle.net/FzxNk/6/)

查看行为：

1.  加载图像。

2.  将其中一个圆圈移动到不同颜色的区域（它应该在您移动时更新颜色，但它不会。）

3.  将另一个圆圈从图像上移开，然后再移回图像上。

4.  当您将圆圈移动到图像上时，前一个圆圈将“弹出”为正确的颜色，而您刚刚移动的圆圈将为黑色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:44:56.077

混合 div 和画布层看起来像一个问题。您需要定位图层。您可能还需要管理您的 z 索引。我添加了一些 console.log() 语句，这些语句使我确信您的 div 的背景颜色正在更新，但是直到您将其移出活动画布区域后您才看到它。因此，更新 DOM 不是问题，而是 canvas/div 交互的显示问题。老实说，这是一个浏览器错误，但您可以解决它。

更多信息：[Placeing a <div> within a <canvas>](https://stackoverflow.com/questions/5763911/placing-a-div-within-a-canvas)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:55:30.673

## **试试这个： -**

[http://jsfiddle.net/FzxNk/1/](http://jsfiddle.net/FzxNk/1/)

利用

```
$(ui.helper).css("background",color); 
```

# python - 从元组列表中删除排列

> ID：15352995
> 
> 赞同：7
> 
> 时间：2013-03-12T03:52:30.937
> 
> 标签：python, python-2.7

对此问题的任何帮助表示赞赏。

我有一个元组列表

```
a = [(1,2), (2,1), (1,3), (1,4), (4,1)] 
```

我需要删除某种类型的重复项：根据我的定义，（1,2）和（2,1）被认为是重复项。所需输出

```
a = [(1,2), (1,3), (1,4)] 
```

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T03:56:54.560

您可以对它们进行排序，然后使用以下命令删除重复项`set()`：

```
>>> set(tuple(sorted(l)) for l in a)
    set([(1, 2), (1, 3), (1, 4)]) 
```

# javascript - 有没有办法在不使用 obj.key 或 obj['key'] 的情况下访问 JavaScript 对象值？

> ID：15352999
> 
> 赞同：0
> 
> 时间：2013-03-12T03:52:49.720
> 
> 标签：javascript

```
var obj = {a:5}; 
```

`5`有没有一种方法可以在不使用源代码中的括号语法`obj["a"]`或点语法的情况下访问该值？`obj.a`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:59:33.647

这非常难看，但我认为这就是您要的：http: [//jsfiddle.net/q4egt/](http://jsfiddle.net/q4egt/)

```
var obj = {a: 5};
alert(Object.getOwnPropertyDescriptor(obj, 'a').value); 
```

我猜有“解决方法”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:16:49.863

既然你没有提供你想要这样做的理由，那么一切都会发生，对吧？因此，尽管它很丑，但请考虑：

```
var o = {a:5};
alert(
  JSON.stringify(o).replace(/^.*\"a\":([^,\"}]*).*$/,'$1') // 5
); 
```

它需要修改为通用解决方案，但您应该明白这一点。仅使用该语言提供的属性访问方法要简单得多。