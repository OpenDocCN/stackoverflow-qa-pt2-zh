# StackOverflow 问答 14592000-14592999

# django - django-selectable：没有下拉

> ID：14592000
> 
> 赞同：4
> 
> 时间：2013-01-29T20:51:12.927
> 
> 标签：django, autocomplete

我正在尝试使用 django-selectable [http://django-selectable.readthedocs.org/en/version-0.6.2/quick-start.html](http://django-selectable.readthedocs.org/en/version-0.6.2/quick-start.html)

我已经根据我能正确判断的内容设置了所有内容（见打击）。在 FireBug 中，正在发出请求并返回有效的 JSON。一切正常，但没有结果显示。我已经包含了 CSS。

为什么我看不到下拉菜单？

FF有这个错误：

```
TypeError: this.menu is undefined
[Break On This Error]   

if ( this.menu.element.is( ":visible" ) ) { 
```

**模型.py**

```
class Event(models.Model):
    event_id = models.IntegerField(primary_key=True)
    name = models.CharField(max_length=80,blank=False)
    date = models.DateField()
    start = models.TimeField()
    end = models.TimeField()

    category = models.ForeignKey(Category)
    city = models.ForeignKey(City)
    user = models.ForeignKey(User)

    def __unicode__(self):
        return self.name 
```

**查找.py**

```
from selectable.base import ModelLookup
from selectable.registry import registry

from events.models import Event

class EventLookup(ModelLookup):
    model = Event
    search_field = 'city__icontains'
    filters = {'active': True, }

    def get_item_value(self, item):
        # Display for currently selected item
        return item.name

    def get_item_label(self, item):

        return u"%s (%s)" % (item.name)

registry.register(EventLookup) 
```

**表格.py**

```
from django import forms
from django.forms import ModelForm
from events.models import Event
import selectable.forms as selectable
from events.lookups import EventLookup

class EventForm(ModelForm):
    autocomplete = forms.CharField(
        label='Type the name of a fruit (AutoCompleteWidget)',
        widget=selectable.AutoCompleteWidget(EventLookup),
        required=False,
    )

    class Meta:
        model = Event 
```

**网址.py**

```
(r'^selectable/', include('selectable.urls')), 
```

**模板.html**

```
 **the following is loaded in correctly...**
    jquery-1.9.0.js
    jquery-ui-1.10.0.custom.min.css
    jquery.ui.core.js
    jquery.ui.widget.js
    jquery.ui.datepicker.js
    jquery.ui.autocomplete.js

     {{ form.media.css }} 
     {{ form.media.js }} 
     {{ form }} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T22:58:13.873

这看起来是正确的，我认为：

1）您没有以正确的顺序包含 js 文件

或者

2）您没有正确加载它们。

将下面添加到您的头上并删除您的链接，看看它是否有效......

```
<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/
1.8.13/themes/ui-lightness/jquery-ui.css" type="text/css" />
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/
jquery/1.4.4/jquery.min.js"></script>
{{ form.media.js }}
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/
jqueryui/1.8.13/jquery-ui.min.js"></script>
{{ form.media.css }} 
```

# java - 覆盖函数并调用扩展类中的其他函数

> ID：14592002
> 
> 赞同：0
> 
> 时间：2013-01-29T20:51:13.443
> 
> 标签：java, inheritance, mindstorms

我的电机`NXT2 2.0`是向后的，现在每次我运行命令`forward()`时它都会向后滚动。我正在使用`DifferentialPilot`来移动我的机器人，因此想要覆盖`DifferentialPilot`类中的几个函数。

我从该类继承并用我的自定义构造函数覆盖了所有构造函数。然后我覆盖`forward()`了现在应该调用`backward()`的，反之亦然。

但是，现在我遇到了异常，我真的不知道为什么。

这是被覆盖的类：

```
package lejos.robotics.navigation;
import lejos.robotics.RegulatedMotor;

public class CustomDifferentialPilot extends DifferentialPilot {

    public CustomDifferentialPilot(final double wheelDiameter, final double trackWidth, final RegulatedMotor leftMotor,
            final RegulatedMotor rightMotor) {
        super(wheelDiameter, trackWidth, leftMotor, rightMotor);

    }

    public CustomDifferentialPilot(final double wheelDiameter, final double trackWidth, final RegulatedMotor leftMotor,
            final RegulatedMotor rightMotor, final boolean reverse) {
        super(wheelDiameter, trackWidth, leftMotor, rightMotor, reverse);
    }

    public CustomDifferentialPilot(double leftWheelDiameter, double rightWheelDiameter, double trackWidth,
            RegulatedMotor leftMotor, RegulatedMotor rightMotor, boolean reverse) {
        super(leftWheelDiameter, rightWheelDiameter, trackWidth, leftMotor, rightMotor, reverse);
    }

    public void forward() {
        backward();
    }

    public void backward() {
        forward();
    }

} 
```

我的机器人示例代码：

```
import lejos.robotics.navigation.CustomDifferentialPilot;

public class DriveTest {

    private static CustomDifferentialPilot diffPilot;
    public static void main(String[] args) {
        diffPilot = new CustomDifferentialPilot(10, 20, Motor.A, Motor.B);
        diffPilot.forward();
    }

} 
```

是否不允许在覆盖方法内的子类中从超类调用函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:53:16.610

您的 main 方法实际上并没有创建`diffPilot`. 您应该在`diffPilot.forward();`.

你应该做

```
diffPilot = new CustomDifferentialPilot(...); 
```

在调用之前在您的主要方法中`.forward()`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:03:29.917

忘记传递`super()`给被覆盖的方法。

```
public void forward() {
    super.backward();
}

public void backward() {
    super.forward();
} 
```

# javascript - 即使没有点击也会触发 onclick 事件

> ID：14592004
> 
> 赞同：0
> 
> 时间：2013-01-29T20:51:19.180
> 
> 标签：javascript

即使没有点击，我的 onclick 事件也会触发。我不确定为什么？下面是我的代码。主面板应首先加载，当用户单击 aboutButton 时，应将其带到 about 面板。

JS 斌：http: [//jsbin.com/alebox/1/edit](http://jsbin.com/alebox/1/edit)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script>

function myOnloadFunc() {

    var homePanel = document.getElementById("homePanel");
    var aboutPanel = document.getElementById("aboutPanel");
    var settingsPanel = document.getElementById("settingsPanel");
    var gamePanel = document.getElementById("gamePanel");
    var resultsPanel = document.getElementById("resultsPanel");

    // All panels in app
    var panels = [homePanel, aboutPanel, settingsPanel, gamePanel, resultsPanel];

    // Show selected panel and hide all other panels
    function showPanel(panel) {
        for (var i = 0; i < panels.length; i++) {
            if (panels[i] === panel) {
                // Show panel
                // this referred to global object, i.e. window
                panels[i].style.display = "block";
            } else {
                // Hide
                panels[i].style.display = "none";
            }
        }
    }

    showPanel(homePanel);

    // CODE THAT IS GIVING ME A PROBLEM /////////////////////////
    var aboutButton = document.getElementById("aboutButton");

    aboutButton.onclick = showPanel(aboutPanel);
    // CODE THAT IS GIVING ME A PROBLEM /////////////////////////
}

window.onload = myOnloadFunc;
</script>

</head>

<body>
<!-- homePanel -->
<div class="panel" id="homePanel">
<div align="center">
<p><strong>Web App</strong></p>
<p><a id="playButton">Play</a> &nbsp;&nbsp;&nbsp; <a id="aboutButton">About</a></p>
</div>
</div>

<!-- aboutPanel -->
<div class="panel" id="aboutPanel">
About panel
</div>

<!-- settingsPanel -->
<div class="panel" id="settingsPanel">
Settings panel
</div>

<!-- gamePanel -->
<div class="panel" id="gamePanel">
Game panel
</div>

<!-- resultsPanel -->
<div class="panel" id="resultsPanel">
Results panel
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:55:18.917

它正在开火，因为你马上就打电话给它！

所以你要：

```
aboutButton.onclick = function(){showPanel(aboutPanel);}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:54:29.147

要将函数附加到事件，只需给出对该函数的引用。您实际上是在使用 () 时调用该函数。

绑定事件的代码应该是：

```
aboutButton.onclick = showPanel; 
```

# c# - 将 AppDelegate 类移动到库项目中

> ID：14592006
> 
> 赞同：1
> 
> 时间：2013-01-29T20:51:27.830
> 
> 标签：c#, xamarin.ios

因此，我试图从应用程序项目中获取大部分代码并将其放入库项目 (dll) 中以供重用。我已将我的 AppDelegate.cs 类从主应用程序项目中移出并将其放置在库项目中。然后，我更新了 AppDelegate 类上的 Register 属性以反映这一举动。

```
namespace DLLNamespace
{
    [Register ("DLLNamespace.AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        ...
    }
} 
```

然后在我的 Main.cs 文件中的应用程序项目中，我已更改为以下内容

```
public class Application
{
    static void Main(string[] args)
    {
        UIApplication.Main(args, null, "DLLNamespace.AppDelegate");
    }
} 
```

所有这些在 iOS 模拟器中都很好用，但是当我在 iPhone 5 上调试时，我在 Main 上收到以下错误

```
Objective-C exception thrown. Name: NSInternalInconsitencyException Reason: Unable to            instantiate the UIApplication delegate instance. No class named DLLNamespace.AppDelegate is loaded. 
```

同样，它在 iOS 模拟器中运行良好，我可以单步执行库项目中 AppDelegate 类中的代码，但会在实际设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:42:29.893

`AppDelegate`我认为将一个放在类库中并不是一个好的设计，因为它是 iOS 和 UI 特定的。你能把你的大部分代码`AppDelegate`移到一个更通用的通用类吗？

我尽量保持`AppDelegate`小，如果应用程序委托相同，有时我什至会“链接”文件。我会为同一应用程序的“免费”和“专业”版本执行此操作。

# java - 似乎 Thread.start () 做了一个 notify()

> ID：14592008
> 
> 赞同：0
> 
> 时间：2013-01-29T20:51:30.627
> 
> 标签：java, multithreading, monitor

我刚刚在 java 线程中发现了奇怪的行为。这是一个代码示例：

```
class Job extends Thread {
    private Integer number = 0;
    public void run() {
        for (int i = 1; i < 1000000; i++) {
            number++;
        }
    }
    public Integer getNumber() {
        return number;
    }
}
public class Test {
    public static void main(String[] args)
            throws InterruptedException {
        Job thread = new Job();
        thread.start();
        synchronized (thread) {
            thread.wait();
        }
        System.out.println(thread.getNumber());
    }
} 
```

出乎意料的是它会打印出 999999。似乎在*start()* 方法逻辑的末尾有*notify()调用。*有任何想法吗？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T20:53:03.460

> 似乎在 start() 方法逻辑的末尾有 notify() 调用。

是的，这是真的。当一个线程完成时，它会执行`notify()`此操作`Thread.join()`。以下是 Java1.6 代码示例`Thread.join()`：

```
public final synchronized void join(long millis) throws InterruptedException {
    long base = System.currentTimeMillis();
    long now = 0;
    if (millis < 0) {
            throw new IllegalArgumentException("timeout value is negative");
    }
    if (millis == 0) {
        while (isAlive()) {
            wait(0);
        }
    } else {
            ... 
```

也就是说，这可能取决于实现，不应依赖。*

# python - 嵌套字符串并打印最深的嵌套

> ID：14592010
> 
> 赞同：0
> 
> 时间：2013-01-29T20:51:43.673
> 
> 标签：python

我所拥有的是一个看起来像这样的字符串，`{[]}{([])}()`我循环它以查找它是左括号还是右括号并将其附加到列表中。我现在想做的是找到最深的嵌套并将其打印出来。所以在这个例子中我会打印中间`{([`但我很困惑如何去做。我可以附加开括号的开头然后重置它但是如何比较它们，并打印最大的一个

我的代码：

```
def is_nested(str):
    stack = []
    deepest =[]
    index=1
    open=0
    for c in str:
        if c == "{" or c == "(" or c == "[" or c =="<":
            stack.append(c) # this is push
            deepest.append(c)
            open +=1
            index +=1
        elif c == "}":
            x = stack.pop()
            index +=1
            if x != "{":
                index -=1
                x2=parens(x)
                return "False: expected %s at character index %d, but received } instead." %(x2,index)
        elif c == "]":
            x = stack.pop()
            index +=1
            if x != "[":
                index -=1
                x2=parens(x)
                return "False: expected %s at character index %d, but received ] instead." %(x2,index)
        elif c == ">":
            x = stack.pop()
            index +=1
            if x != "<":
                index -=1
                x2=parens(x)
                return "False: expected %s at character index %d, but received > instead." %(x2,index)
        elif c == ")":
            x = stack.pop()
            index +=1
            if x != "(":
                index -=1
                x2=parens(x)
                return "False: expected %s at character index %d, but received ) instead." %(x2,index)

    check(str)
    return True
def check(str):
    deepest =[]
    for c in str:
        if c == "{" or c == "(" or c == "[" or c =="<":
            deepest.append(c)
    print deepest

def parens(x):
    if x == "<":
        return ">"
    elif x =="(":
        return ")"
    elif x == "{":
        return "}"
    elif x == "[":
        return "]"

print is_nested("{[()}")
print is_nested("([)")
print is_nested("{[]({})}")
print is_nested("<()>")
print is_nested("{(<)}") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:33:20.623

不确定我是否正确理解了您的意愿，但这会找到最长的连续开括号序列：

```
In [20]: import re

In [21]: s = '{[]}{([])}()'

In [22]: max(re.findall("[\(\[\{]+",s),key=len)
Out[22]: '{([' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:57:01.860

您应该迭代并更新当前的开括号数，并保持循环时的最大值。您可以将所有开括号放在用作堆栈的字符串上，如果长度大于 max 的当前长度，则使用此字符串更新 max。

```
OPEN = "<[({"
CLOSED = ">])}"
def is_nested(str):
    stack = []
    deepest =[]
    for c in str:
        if c in OPEN:
            stack.append(c)
            if len(stack)>len(deepest):
                deepest.append(c)
        elif c in CLOSED:
            x = stack.pop()
            if OPEN.index(x) != CLOSED.index(c):
                return "Error"
    return ''.join(deepest) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:11:42.770

像这样的东西？

```
def is_nested(nested_str):
    opening = ['(', '{', '[', '<']
    closing = {'(':')','{':'}', '[':']', '<':'>'}
    braces = []
    depth = 0
    max_depth = 0
    max_depth_index = None
    for index, char in enumerate(nested_str):
        if char in opening:
            braces.append(char)
            depth += 1
        elif char == closing[braces[-1]]:
            braces.pop()
            depth -= 1
        else:
            raise ValueError("This is not a valid str")
        if depth > max_depth:
            max_depth = depth
            max_depth_index = index
    return max_depth, max_depth_index 
```

这个函数接受一个只有大括号的字符串，并告诉您最深的嵌套级别，以及该级别嵌套的第一个实例的左大括号的索引。作为奖励，如果字符串格式错误，它将引发错误。

```
>>> is_nested('{[][]}')
(2, 1)
>>> is_nested('{[][<()()>]()}[]()')
(4, 5)
>>> is_nested('{(})')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "nesting.py", line 16, in is_nested
ValueError: This is not a valid str 
```

我已将除大括号之外的任何字符定义为错误，但这可以通过修改`else`条件轻松更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T21:12:14.897

```
def is_nested(in_str):
    stack = []
    deepest = tuple()

    open_b = ('(','[','{','<')
    close_b = (')',']','}','>')

    for i in in_str:
        print stack, i
        if i in open_b:
            stack.append(i)
            if len(stack) > len(deepest):
                deepest = tuple(stack)
        else:
            p = stack.pop()
            print p
            print open_b.index(p)
            print close_b[open_b.index(p)]
            if i != close_b[open_b.index(p)]:
                raise Exception('Wrongly nested')
    if len(stack) > 0:
        raise Exception('Wrongly nested')
    return deepest 
```

# java - 在objective-c中打印出一个数组

> ID：14592011
> 
> 赞同：0
> 
> 时间：2013-01-29T20:51:47.043
> 
> 标签：java, ios, objective-c

我有一个关于打印数组的问题。我是一个java用户，我是objective-c的新手。

在java代码中，我告诉你我想要什么

```
 for(myClass a: myVariable){
     System.out.println(a.toString);
 } 
```

那么我如何在objective-c中做到这一点，我写的是这样的：

```
- (void) updateTextField:(NSMutableArray *)array{
    for (Storage *obj in array)   // Storage class holds a name and a price.
        [check setText:@"%@",[obj description]];  // i did override the description method to print out the name and price.  and "Check" is my textField; 
} 
```

这没用。[检查 setText:@"%@",obj 描述]; 得到错误“如果我取出描述，方法调用的参数太多；”

这是我的 Storage.m #import "Storage.h"

```
@implementation Storage

@synthesize name;
@synthesize price;

- (NSString *)description {
    return [NSString stringWithFormat: @"%@        %@", name, price];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:05:53.180

您所做的正确语法是`[check setText:[NSString stringWithFormat: @"%@", [obj description]]];`. 但是您可以使用`NSLog`与 Java 的 sysout 类似的方式：

```
for(Storage *obj in array)
    NSLog(@"%@", obj); //the description will be called implicitly, like toString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:06:25.493

根据您对 Ryan 帖子的评论错误，您可以尝试以下操作：

```
- (void) updateTextField:(NSMutableArray *)array{
    for (Storage *obj in array)
        [check setText:[NSString stringWithString:obj.description]];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:07:10.553

`-setText:`采用格式列表还是仅`NSString`采用?

也就是说，尝试：

```
- (void) updateTextField:(NSMutableArray *)array{
    for (Storage *obj in array)  
        [check setText:[obj description]];
} 
```

# php - 从数组php中获取元素

> ID：14592012
> 
> 赞同：1
> 
> 时间：2013-01-29T20:51:49.233
> 
> 标签：php, arrays, multidimensional-array

```
array (size=1)
  29 => 
    object(stdClass)[300]
      public 'term_id' => string '29' (length=2)
      public 'name' => string 'Advertisement' (length=13)
      public 'slug' => string 'advertisement' (length=13)
      public 'term_group' => string '0' (length=1)
      public 'term_taxonomy_id' => string '32' (length=2)
      public 'taxonomy' => string 'wp_portfolio_categories' (length=23)
      public 'description' => string '' (length=0)
      public 'parent' => string '27' (length=2)
      public 'count' => string '3' (length=1)
      public 'object_id' => string '536' (length=3) 
```

我必须获得 term_id 值我可以这样做，`$var[29]->term_id`但我不知道这个元素 29，是否有任何解决方案来获取`term_id`ar`29`编号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:53:48.450

如果数组总是只包含一个元素，请使用

```
$tmp=array_values($var);
$term_id=$tmp[0]->term_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:53:48.030

您可以`foreach`在数组上使用（它循环遍历数组中的所有元素，为您提供键和值）：

```
 foreach ($var as $key=>$value) {
     // in this case $key will be 29, $value will be the object.
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:54:24.357

这是一个单一的品种：

```
array_pop(array_values($var))->term_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:55:31.347

您可以使用此代码

```
foreach($array as $Key=>$val){

  if(isset($val->term_id)){
     //Your $Key
  }
} 
```

# ruby - 为 Highcharts 正确格式化数据数组

> ID：14592014
> 
> 赞同：1
> 
> 时间：2013-01-29T20:51:53.713
> 
> 标签：ruby, ruby-on-rails-3, highcharts

似乎很难让我的数据以正确的格式与 highchart 的饼图一起使用。

如果我强制数据如下，我的图表就会出现，所以我知道我已经正确完成了集成：

```
data: [
      ['Test', 30],
      ['Other', 70],
      ] 
```

但是当我尝试使用我的实际数据时，它不起作用。

我尝试了以下不起作用的方法：

```
data: <%= Location.browsers.map { |o| [o.type, o.count] }.inspect %> 
```

也试过：

```
data: <%= Location.browsers.map { |o| "#{o.type}, #{o.count}" }.to_json %> 
```

第一个给了我这样的结果：

```
"[[\"Safari\", 6448], [\"Microsoft\", 5253], [\"Microsoft-CryptoAPI\", 5185], [\"Dalvik\", 3870], [\"Chrome\", 3701], [\"Mozilla\", 3239], [\"Android\", 2285], [\"Windows-Update-Agent\", 2018], [\"Internet Explorer\", 1843], [\"Firefox\", 1459]]" 
```

看起来不错。

运行此查询的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:28:13.097

```
data: <%= raw Location.browsers.map { |o| [o.type, o.count] } %> 
```

或者

```
data: <%= raw Location.browsers.map { |o| [o.type, o.count] }.to_s %> 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:58:41.540

# 一世

```
"[[\"A\", 10], [\"B\", 30], [\"C\", 0], [\"D\", -10]]" 
```

# 二

```
[["A", 10], ["B", 30], ["C", 0], ["D", -10]] 
```

I & II 不一样

I is a **`String`**while II is a javascript**`Array<Array<Object>>`**

在您的情况下，第一个是第二个的[`stringify`-ed](http://msdn.microsoft.com/en-us/library/ie/cc836459%28v=vs.94%29.aspx)版本。您只需要执行此相反的过程即可`Array`从`String`using[`$.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)或[`JSON.parse()`](http://msdn.microsoft.com/en-us/library/ie/cc836466%28v=vs.94%29.aspx)

我没有使用 Ruby 的第一手经验，但我的猜测是这样的东西可以完成这项工作

```
data: $.parseJSON(<%= Location.browsers.map { |o| [o.type, o.count] }.inspect %>) 
```

**[将字符串数据解析成 JSON @ jsFiddle](http://jsfiddle.net/jugal/5resH/)**

# android - 无法从 ubuntu 12.04 中的 adt 包启动 Eclipse

> ID：14592015
> 
> 赞同：3
> 
> 时间：2013-01-29T20:51:55.740
> 
> 标签：android, linux, eclipse, ubuntu, launch

因此，我从 developer.android.com 下载了适用于 linux 的 adt 捆绑包，将其解压缩，32 位版本，转到 adt-bundle-linux-x86/eclipse 尝试启动 eclipse，但它给了我一个错误

> 无法显示“/media/ACF3-BA90/adt-bundle-linux-x86/eclipse/eclipse”。没有为可执行文件安装应用程序。你想搜索... blabla ..

我对 linux 和 ubuntu 非常陌生......所以有人可以帮我解决这个问题吗？:P

编辑：问题是因为我将它提取到可移动媒体上并且允许执行文件作为程序（属性 - >权限）仍然没有解决问题，所以我不得不将它转移到我的（静态）Linux分区。这解决了问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T16:34:14.163

这些天，当我尝试使用 adt-bundle-linux 编写 cocos2d-x 游戏时，我遇到了同样的问题。现在我在谷歌搜索了几个小时后终于解决了这个问题。事实证明，这与 adt-bundle-linux 无关。事实是 linux 安全设置会导致这种情况。它禁用来自其他来源的任何可执行文件（在这种情况下，它来自 Internet，linux 将其视为危险和不可靠的文件）。只需右键单击eclipse并选择“属性”，然后转到“权限”选项卡并选中“允许将文件作为程序执行”。希望对你有帮助。^_^

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:01:30.593

您似乎已安装到某种可移动媒体，因此您的安装可能对 eclipse 的文件有错误的引用。

我建议您从 Ubuntu 的软件管理器安装 Eclipse，并从 Eclipse 的插件管理器安装 SDK。

SDK教程如下：

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

干杯!

# google-chrome - 谷歌浏览器正在向我显示 tomcat 图标而不是我的 favicon

> ID：14592017
> 
> 赞同：2
> 
> 时间：2013-01-29T20:52:03.663
> 
> 标签：google-chrome, tomcat, favicon

我有一个图标 favicon.ico 它是一个橙色的小怪物，但是当我在 chrome 中显示我的页面时，我总是从 tomcat 得到猫，我的图标在 FF 和 IE10 中工作得很好，它曾经在 chrome 上工作，但现在不起作用，我试过刷新它并在我的页面上放置不同的图标但仍然没有，我认为这是我上次更新后发生的，但我不能肯定地说，我真的没有注意刷新这些的困难chrome 中的图标。

我现在有版本 24.0.1312.56

我的应用程序由 tomcat 托管，因为我使用 servlet 购买这以前从来不是问题。

现在，当我尝试直接调用图标时：

```
(http://localhost:8080/mysite/favicon.ico) 
```

chrome 下载它而不是显示它。

我还没有发布该站点，因为它是针对本地服务的，所以我无法显示该页面，但这里是代码：

```
<!DOCTYPE html>

  <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
  <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
  <fmt:setLocale value='es-US'/>
  <html>
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      <title>Anicom administrativo - Inicio</title>
      <link rel="shortcut icon" href="../images/favicon.ico" /> 
```

我到处寻找，但似乎没有找到答案，我最近也将网站更改为 HTML5，但这似乎不是问题:(

我尝试将它放在根文件夹中并使用绝对 href 调用它，但这也不起作用。

我还更改了不同大小和格式的图标，从 png 到 ico，但也没有用。

我的想法用完了...我尝试清理 favicons 文件夹，但不知何故我找不到它：P 我也有几个 chrome 用户使用旧版本的图标工作，我不知道如何为他们刷新它试过ctrl+shift+R 并删除缓存，但这些都不起作用:(

希望您能够帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:42:01.243

您是否`(Ctrl+Shift+I)`在加载页面时使用开发工具查看网络选项卡以查看它对网站图标发出的请求？它可能从浏览器的缓存中提供某些东西，而不是访问您的服务器。如果您在其他浏览器中看到正确的东西，那让我认为问题不在服务器上的文件上，而可能是这样的。您可能需要清除浏览数据`(Ctrl+Shift+Delete)`以清空缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:36:02.147

我试过这个东西，你在哪里我上传了一个旧的图标，我也有它在我的收藏夹栏中，它从这里拿走了它，但现在它没有上传我的任何图标：S 当我尝试直接使用`(localhost:8080/mysite/images/favicon.ico)`chrome下载它，而不是显示它，我在mac上有chrome，可以吗？

# javascript - Yeoman 手动安装组件

> ID：14592019
> 
> 赞同：3
> 
> 时间：2013-01-29T20:52:08.737
> 
> 标签：javascript, yeoman, bower

我想在我的 yeoman 项目中使用不在 bower 存储库中的库。将库集成到 yeoman 项目结构中的最佳方法是什么？这个库需要先加载 jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:12:31.747

我只是将客户端 javascript 库的文件夹放入我的 app/scripts/vendor 文件夹并引用它们以加载到 index.html

确保将脚本标签放在这些注释块中

```
<!-- build:js scripts/scripts.js --> 
```

和

```
<!-- endbuild --> 
```

为了在构建时将它们缩小并合并到一个脚本文件中。

# google-chrome - 谷歌浏览器 --new-window 开关忽略 --window-position 和 --window-size

> ID：14592020
> 
> 赞同：10
> 
> 时间：2013-01-29T20:52:21.713
> 
> 标签：google-chrome, process

我正在尝试通过命令行（通过 C#）控制新生成的 Google Chrome 窗口的大小和位置。

我的命令行最终看起来像：

```
--new-window --window-position=100,100 --window-size=800,600 www.UrlToOpen.com 
```

但是，新窗口只是在最后一个 Chrome 窗口的启动位置上方打开。

我正在寻找的最终结果是能够在具有特定位置和大小的单独窗口中启动多个 Google Chrome 实例。到目前为止，我能够做到这一点的唯一方法是指定每个实例都拥有自己的`--user-data-dir`. 但是，考虑到用户可能安装了多少扩展程序，这并不理想，而且这也不是最好的用户体验。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-30T20:37:35.087

如果 Chrome 没有被编程为允许这样做，那么您只有一个选择。

1.  创建流程并保留流程对象。
2.  使用[Process.MainWindowHandle](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowhandle.aspx)获取新创建的窗口（您可能需要使用循环和[Process.Refresh](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.refresh.aspx)或[Process.WaitForInputIdle](http://msdn.microsoft.com/en-us/library/8d7363e2.aspx)）
3.  使用[SetWindowPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545.aspx)本机函数将窗口定位在您想要的任何位置。

本机挂钩可用于检测窗口的创建，但这需要您创建一个非托管 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T15:22:54.127

我对你有另一个想法，为什么不使用 chrome 扩展来处理定位。

背景：我们遇到了相关的困难。在 windows 中打开多个文档的内部 webapp，需要放置在其他监视器中。出于安全原因，javascript 不支持这一点，并且只有本机扩展才能正确使用选项卡/窗口对象。

因此，我们为此创建了一个开源 chrome 扩展：跨多显示器设置的灵活窗口位置。

您可能更感兴趣的是使用预定义模板的功能。模板文件位于您喜欢的任何网络服务器中，因此可以轻松地在不同用户之间共享。

chrome 扩展名为“MultiWindow Positioner”，完全免费。你可以在[这里的 chrome 商店买到](https://chrome.google.com/webstore/detail/multiwindow-positioner/hmgehpjpfhobbnhhelhlggjfcaollidl?hl=de)

[您在项目chrome-multiwindow-positioner](https://github.com/ControlExpert/chrome-multiwindow-positioner)的 github 中找到的实际源代码

免责声明：我是开源 (MIT) github 项目的维护者。如果有任何有趣的想法或评论，请随时[在这里](https://github.com/ControlExpert/chrome-multiwindow-positioner/issues)分享。

# c++ - 要自定义消息框，我应该挂钩消息框还是使用 CreateWindowEx 创建一个模仿？

> ID：14592022
> 
> 赞同：0
> 
> 时间：2013-01-29T20:52:28.937
> 
> 标签：c++, performance, winapi, hook

我一直在尝试创建一个`MessageBox`具有可变、可读文本和可自定义按钮的内容，我认为为此制作一个挂钩可能很容易，但我在 MSDN 上阅读：

“挂钩往往会减慢系统速度，因为它们会增加系统必须为每条消息执行的处理量。您应该仅在必要时安装挂钩，并尽快将其移除。”

我想知道当我可以`CreateWindowEx`用来做一个`MessageBox`我想要的模仿时是否真的值得。钩子真正减慢了系统多少，值得还是我应该`CreateWindowEx`改用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:01:53.657

根据您的目标系统，您是否考虑过使用从 Windows Vista 开始可用的新消息框（[任务对话框）之一？](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756938.aspx)

这些允许您使用自定义按钮等自定义框的对话框布局，而无需任何挂钩或自定义窗口（如“从头开始创建”）。

否则我可能会选择钩子（你只需要它们抓住你的盒子，所以你可以在展示盒子之前设置它们，一旦你成功就将它们移除）。

# asp.net - 使用字段更改文本中的参数

> ID：14592023
> 
> 赞同：0
> 
> 时间：2013-01-29T20:52:35.363
> 
> 标签：asp.net, field

我想在我的上下文中使用动态字段更改这些项目。参数：“亲爱的 {prefix} {name} {family}，感谢您接受......”。我的意思是当用户在他的文本框中写 {family} 时，程序必须将其检测为关键字并将其替换为动态字段。总之，我想通过用户从他的面板中编辑带有动态字段的文本。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:56:03.593

考虑使用`String.Format`：

```
string yourString = "Dear {prefix} {name} {family}, thank you for accepting....";
yourString = yourString.Replace("{prefix}","{0}");
yourString = yourString.Replace("{name}","{1}");
yourString = yourString.Replace("{family}","{2}");
string formatedString = String.Format(yourString,prefixVariable,nameVariable,familyVariable); 
```

# mysql - mysqlimport 使用转储

> ID：14592028
> 
> 赞同：1
> 
> 时间：2013-01-29T20:52:54.717
> 
> 标签：mysql

我需要恢复转储的数据库，但不丢弃表中的现有行。

要转储我使用：

```
mysqldump -u root --password --databases mydatabase > C:\mydatabase.sql 
```

要恢复我*不*使用 mysql 命令，因为它会丢弃所有现有的行，但显然 mysqlimport 应该可以解决问题。但是怎么做？跑步：

```
mysqlimport -u root -p mydatabase c:\mydatabase.sql 
```

说“表 mydatabase.mydatabase 不存在”。为什么它会寻找表格？如何在不丢弃现有表中现有行的情况下使用整个数据库恢复转储？如果 mysqlimport 需要，我可以转储单个表。

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:56:03.453

如果您担心踩到现有行，则需要 mysqldump 如下：

```
MYSQLDUMP_OPTIONS="--no-create-info --skip-extended-insert"
mysqldump -uroot --ppassword ${MYSQLDUMP_OPTIONS} --databases mydatabase > C:\mydatabase.sql 
```

这将执行以下操作：

*   删除`CREATE TABLE`语句并仅使用 INSERT。
*   它将一次插入一行。这有助于减轻具有重复键的行

以这种方式执行mysqldump，现在您可以像这样导入

```
mysql -uroot -p --force -Dtargetdb < c:\mydatabase.sql 
```

试试看 ！！！

**警告**：转储`--skip-extended-insert`会使 mysqldump 变得非常大，但至少您可以一个一个地控制每个副本。这也将增加 mysqldump 重新加载完成的时间长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:56:41.857

我会在文本编辑器中编辑 mydatabase.sql 文件，删除引用删除表或删除行的行，然后正常使用`mysql`命令手动导入文件。

```
mysql -u username -p databasename < mydatabase.sql 
```

[mysqlimport](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)命令设计用于使用 mysql 命令创建的转储，而`SELECT INTO OUTFILE`不是直接数据库转储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:59:30.777

这听起来比你描述的要复杂得多。

如果您按照您描述的方式进行备份，它会包含数据库中的所有记录。然后您说您不想从数据库中删除现有行并从备份中加载？为什么？备份文件（mysqldump 的输出）具有 drop 和 create table 命令的原因是为了确保您不会得到两个数据副本。

正确的答案是使用 mysql 客户端加载 mysqldump 输出文件。如果您不想这样做，则必须解释原因以获得更好的答案。

# php - Android onScroll 从 MySQL/PHP/JSON 加载更多结果

> ID：14592029
> 
> 赞同：1
> 
> 时间：2013-01-29T20:52:58.307
> 
> 标签：php, android, mysql, json

我正在寻找一种将 onScroll 侦听器隐含到我的列表视图中的方法。我已经阅读了很多关于使用的内容：

```
notifyDataSetChanged(); 
```

但是，老实说，我不知道如何在我的工作代码中实现它。

目前，我使用 PHP（JSON 响应）将一堆记录从 MySQL 数据库中提取到列表视图中。一切正常，但我想限制首次启动活动时返回的记录数（我知道这是通过 PHP 脚本中的 SQL 语句完成的），然后当用户滚动以加载较旧的帖子并附加它们时到当前的列表视图。我查看了许多示例，但找不到与我当前结构相关的任何示例。

这是我当前的代码：（LiveFeed.java）

```
public class LiveFeed extends SherlockListActivity {
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Used To Put Dark Icons On Light Action Bar
    boolean isLight = ThemeList.THEME == R.style.Theme_Sherlock;

    // Build Action Bar
    menu.add("Refresh")
        .setIcon(isLight ? R.drawable.ic_refresh : R.drawable.ic_refresh_inverse).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    menu.add("+ Add Post")
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    return true;
}

// Define Menu Item Actions
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    String menuItemTitle = item.getTitle().toString();
    if(menuItemTitle.equals("Refresh")){
        // Clear ArrayList
        posts.clear();
        // Re-Run AsyncTask
        new FeedTask().execute();
    }
    if(menuItemTitle.equals("+ Add Post")){
        Intent intent = new Intent(this, AddPost.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    }
    return true;
}

private ArrayList<Feed> posts = new ArrayList<Feed>();

// Define JSON Nodes
private static final String TAG_ID = "id";
private static final String TAG_POST = "post";
private static final String TAG_TIME = "post_time";

@Override
public void onCreate(Bundle savedInstanceState) {
    setTheme(ThemeList.THEME);
    super.onCreate(savedInstanceState);

    // Load All Posts
    new FeedTask().execute();

    // Get ListView
    ListView lv = getListView();

    // Selecting Single List Item Starts EditPost Activity
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // getting values from selected ListItem
            String pid = ((TextView) view.findViewById(R.id.postid)).getText().toString();
            // Starting new intent
            Intent in = new Intent(getApplicationContext(), EditPost.class);
            // sending Post Id To EditPost Activity
            in.putExtra(TAG_ID, pid);
            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });
}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // If Result Code 100 (edited/deleted post) - Reload Screen
    if (resultCode == 100) {
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }
}

// AsyncTask To Pull In All Posts And Build ListView
private class FeedTask extends AsyncTask<Void, Void, Void> {
    private ProgressDialog progressDialog;
    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(LiveFeed.this,"", "Loading. Please wait...", true);
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://www.mysite.com/android/login/get_posts.php");
            HttpResponse httpResponse = httpClient.execute(httpPost);
            String result = EntityUtils.toString(httpResponse.getEntity());
            JSONArray jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                Feed feed = new Feed();
                feed.id = json_data.getString(TAG_ID);
                feed.post = json_data.getString(TAG_POST);
                feed.post_time = json_data.getString(TAG_TIME);
                posts.add(feed);
            }
        } 
        catch (Exception e){
            Log.e("ERROR", "Error loading JSON", e);
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        progressDialog.dismiss();
        setListAdapter(new FeedListAdaptor(LiveFeed.this, R.layout.feed, posts));
    }
}

private class FeedListAdaptor extends ArrayAdapter<Feed> {
    private ArrayList<Feed> posts;
    public FeedListAdaptor(Context context, int textViewResourceId, ArrayList<Feed> items) {
        super(context, textViewResourceId, items);
        this.posts = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)
            getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.feed, null);
        }
        Feed o = posts.get(position);
        TextView ht = (TextView) v.findViewById(R.id.postid);
        TextView tt = (TextView) v.findViewById(R.id.toptext);
        TextView bt = (TextView) v.findViewById(R.id.bottomtext);
        ht.setText(o.id);
        tt.setText(o.post);
        bt.setText(o.post_time);
        return v;
    }
}

// Define Variables Used To Build Feed
public class Feed {
    String id;
    String post;
    String post_time;
} 
```

}

以及提取结果的 PHP 脚本：(get_posts.php)

```
include('config.php');
$q=mysql_query("SELECT f.id, f.post, DATE_FORMAT(f.post_time, '%b %D, %Y %r') AS post_time, f.updated, u.firstname, u.lastname FROM feed f
INNER JOIN users u ON u.id=f.user__id WHERE archived='0' ORDER BY f.id DESC");
while($row=mysql_fetch_assoc($q))
$output[]=$row;
print json_encode($output);
mysql_close(); 
```

我正在考虑在初始帖子中传递一个起始编号，以告诉 PHP 脚本要撤回多少结果。然后在每次滚动期间获取结果时，返回下一个数字以用作从 onScroll() 调用的下一个 SQL 查询中的 LIMIT。（现在我的 SQL 查询没有设置任何限制。）

我希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:08:47.357

我目前正在做类似的事情。您可以将 setOnScrollListener 用于您的 ListView 并像这样实现它：

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

    boolean isLastItemVisible = firstVisibleItem + visibleItemCount == totalItemCount;

    if (isLastItemVisible) {
        listOverscrolled();
    }

} 
```

比在 listOverscrolled 方法中做这样的事情：

```
 if (!isLoadingData()) {
      setLoadingData(true);
      loadData(); 
} 
```

并在 loadData 方法中启动新的 AsyncTask 来加载数据。我所做的是将上次下载记录的 id 附加到 url 查询中，并在 SQL 查询中添加条件 WHERE id > last_id。每次请求更多记录时，以相同的顺序返回它们很重要。

所以在你的情况下，它会是这样的：

```
 lastId = feedListAdapter.get(feedListAdapter.count());
    ... and in AsyncTask ...
   HttpPost httpPost = new HttpPost("http://www.mysite.com/android/login/get_posts.php?lastid=" + lastId); 
```

与 OnPostExecute 相比，您可以执行以下操作：

```
 setLoading(false);
    feedListAdapter.addAll(feeds);
    feedListAdapter.notifyDataSetChanged(); 
```

当然，您的适配器必须更早创建。

# xml - Flex Builder - “使用方括号运算符时，数据绑定将无法检测到更改”

> ID：14592035
> 
> 赞同：0
> 
> 时间：2013-01-29T20:53:12.360
> 
> 标签：xml, flexbuilder, arraycollection

我正在构建一个应用程序。第一页有一个从本地 xml 生成的列表，当您在该列表中选择房间类型时，它会推送所选项目下的节点；标题页、页面图像和该房间中的新产品列表到第二页上的另一个列表。

页面标题和页面图像很好，但只有“item_name”列表中第一个节点的产品列表是从第一页的第一个项目（room_name）推送的。

出现这样的错误：此行有多个标记：-使用方括号运算符时，数据绑定将无法检测到更改。对于 Array，请改用 ArrayCollection.getItemAt()。-行断点：fob.mxml [行：35]

我知道我会再次处理这个问题，因为我想将该选项中的信息推送到包含该项目信息的第三页。

**这是第一页：** `

```
 import mx.events.FlexEvent;

        import spark.events.IndexChangeEvent;

        protected function list_creationCompleteHandler(event:FlexEvent):void
        {
            getDataResult.token = macysmain.getData();
        }

        protected function list_changeHandler(event:IndexChangeEvent):void
        {
            navigator.pushView(fob, event.target.selectedItem);
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <s:CallResponder id="getDataResult"/>
    <macysmain:Macysmain id="macysmain"/>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Image left="10" right="10" top="10" height="40%" smooth="true" source="assets/visual merc.png"/>
<s:List id="list" left="10" right="10" bottom="10" height="55%"
        change="list_changeHandler(event)"
        creationComplete="list_creationCompleteHandler(event)" fontFamily="_sans" fontSize="35"
        labelField="room_name">
    <s:AsyncListView list="    {TypeUtility.convertToCollection(getDataResult.lastResult.room)}"/>
</s:List>
</s:View>` 
```

**第二页（我把 ??? ??? 放在有问题的行周围：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:macysmain="services.macysmain.*"
    title="{data.room_name}">

<fx:Script>
    <![CDATA[
        import com.adobe.serializers.utility.TypeUtility;

        import mx.events.FlexEvent;
        protected function button1_clickHandler(event:MouseEvent):void
        {
            navigator.popView();
        }

        protected function        list_creationCompleteHandler(event:FlexEvent):void
        {
            getDataResult.token = macysmain.getData();
        }

    ]]>
</fx:Script>

<fx:Declarations>
    <s:CallResponder id="getDataResult"/>
    <macysmain:Macysmain id="macysmain"/>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:actionContent>
    <s:Button label="Back" click="button1_clickHandler(event)"/>
</s:actionContent>
<s:List id="list" left="10" right="10" bottom="10" height="55%"
        creationComplete="list_creationCompleteHandler(event)" fontSize="35"
        labelField="item_name">
    ?????????<s:AsyncListView list="    {TypeUtility.convertToCollection(getDataResult.lastResult.room[0].item_list.item)}"/>?????????
</s:List>
<s:Image id="roompic" top="50" width="750" height="325" horizontalCenter="0" smooth="true"
         source="{data.room_image}"/>
</s:View> 
```

我处于非常基础的水平。非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:40:31.210

我对 FlexBuilder 一无所知，但根据错误消息，我建议您将麻烦的行编辑为：

```
<s:AsyncListView list="{TypeUtility.convertToCollection(getDataResult.lastResult.room.getItemAt(0).item_list.item)}"/> 
```

# google-maps - 如何将此谷歌地图 v2 API 函数转换为 v3？

> ID：14592038
> 
> 赞同：0
> 
> 时间：2013-01-29T20:53:20.177
> 
> 标签：google-maps, google-maps-api-3

我需要将此函数转换为 v3 API。此功能用于在选中时在标记下创建一个椭圆。我尝试过投影和叠加，但没有成功。

```
 function makePolyPoints(_marker)
  {
    var polyPoints = Array();
    var markerPoint=  _marker.getLatLng();
    var projection = G_NORMAL_MAP.getProjection();
    var mapZoom = map.getZoom();
    var clickedPixel = projection.fromLatLngToPixel(markerPoint, mapZoom);
    var  ellipseRadA = 20;
    var ellipseRadB = 10;

    var polyNumSides = 20;
    var polySideLength = 18;

    for (var a = 0; a<(polyNumSides+1); a++) {
        var aRad = polySideLength*a*(Math.PI/180);
        var pixelX =  clickedPixel.x + ellipseRadA * Math.cos(aRad);
        var pixelY = -3 + clickedPixel.y + ellipseRadB * Math.sin(aRad);
        var polyPixel = new GPoint(pixelX,pixelY);
        var polyPoint = projection.fromPixelToLatLng(polyPixel,mapZoom);
        polyPoints.push(polyPoint);
    }
    return polyPoints;
} 
```

这里 v3 的功能不起作用，我认为是缩放级别的问题，但我找不到如何替换 projection.fromLatLngToPixel(markerPoint, mapZoom);

```
function makePolyPoints(_marker)
{
    var polyPoints = Array();
    var markerPoint=  _marker.getPosition();
    var projection = map.getProjection();
    var mapZoom = map.getZoom();
    var clickedPixel = projection.fromLatLngToPoint(markerPoint);

    var  ellipseRadA = 20;
    var ellipseRadB = 10;

    var polyNumSides = 20;
    var polySideLength = 18;

    for (var a = 0; a<(polyNumSides+1); a++) {
        var aRad = polySideLength*a*(Math.PI/180);
        var pixelX =  clickedPixel.x + ellipseRadA * Math.cos(aRad);
        var pixelY = -3 + clickedPixel.y + ellipseRadB * Math.sin(aRad);
        var polyPixel = new google.maps.Point(pixelX,pixelY);
        var polyPoint = projection.fromPointToLatLng(polyPixel);
        polyPoints.push(polyPoint);
    }
    return polyPoints;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:05:37.587

嗯.. 我将使用我最喜欢的 gmap 示例之一来帮助您。

使用`var clickedPixel = projection.fromLatLngToPoint(markerPoint);`不给你还 clickedPixel 坐标，它们仍然是世界坐标。请参阅[投影规格](https://developers.google.com/maps/documentation/javascript/reference#Projection)。

在计算那种东西时指定自己的墨卡托投影很有用。仔细查看以下几行：（[在此代码示例中](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-coordinates)）

```
var worldCoordinate = projection.fromLatLngToPoint(chicago);
    var pixelCoordinate = new google.maps.Point(
    worldCoordinate.x * numTiles,
    worldCoordinate.y * numTiles); 
```

（您可以使用 firebug 或类似工具查看源代码）。

如果你没有它（在 mozilla 中：工具 -> Web 开发人员 -> 页面源）

希望这将帮助您解决问题:)

# hibernate - 无法从资源中解析映射文档

> ID：14592043
> 
> 赞同：1
> 
> 时间：2013-01-29T20:53:31.840
> 
> 标签：hibernate, hibernate-mapping

当我调用我的 servlet 时，我总是收到此错误消息...

```
failed:org.hibernate.InvalidMappingException: Could not parse mapping document from resource CarDetail.hbm.xml 
```

CarDetail.hbm.xml：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="at.opendata.entitys">      
    <class name="CarDetail" table="cardetail">
        <id name="id" column="detail_id">
            <generator class="increment"/>
        </id>
        <property name="gone" type="time"/>
        <property name="back" type="time"/>
        <property name="currentdatetime" type="timestamp"/>
        <property name="coordinates" type="org.hibernate.spatial.GeometryType" column="coordinates"/>
        <many-to-one name="car" column="car_id" class="Car" not-null="true"/>       
    </class>
</hibernate-mapping> 
```

为什么我会收到此错误消息？在同一目录中找到另一个映射文件..

# jquery - 需要延迟设置css链接样式表属性

> ID：14592048
> 
> 赞同：0
> 
> 时间：2013-01-29T20:53:40.293
> 
> 标签：jquery, css, timeout, fade

我正在尝试延迟链接属性，以便在内容淡出后应用它。但是添加超时功能不起作用。有任何想法吗？

```
$(function () {
    $(".layout a").click(function () {
        setTimeout(function () { $("link:first").attr("href", $(this).attr('rel')); }, 500)
    $.cookie("Layout", $(this).attr('name'), { expires: 365, path: '/media', secure: true });
    $('.content, .searchresults').fadeOut(500).delay(500).fadeIn(275);
        window.scrollTo(0, 0); // Scroll Window back to Top
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:02:01.957

您可以为 fadeOut 函数分配回调，而不是设置超时以对应延迟：

```
$(".layout a").click(function () {
    $.cookie("Layout", $(this).attr('name'), { expires: 365, path: '/media', secure: true });
    $('.content, .searchresults').fadeOut(500, function() {
        $("link:first").attr("href", $(this).attr('rel'));
    }).fadeIn(275);

    window.scrollTo(0,0);
    return false;
} 
```

查看 jQuery 参考以获取更多信息：[http ://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

不过，我通常几乎没有运气通过 javascript 更改通过链接标记加载的样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:12:25.667

你被范围`this`比时间打败更多。

表达方式

```
$(this).attr('rel'); 
```

本身很好，但在`setTimeout`函数内部，`this`不再引用单击的元素。

好消息是，通过在仍然引用正确对象`$(this).attr('rel')`的合适点分配局部变量，可以轻松解决问题。`this`

此外，为了保证时间，您可以移动可能的 setTimeout 函数，使其成为`fadeOut()`表达式的回调。

将这两件事加在一起，代码如下：

```
$(function () {
    $(".layout a").click(function () {
        var rel = $(this).attr('rel');
        $.cookie("Layout", $(this).attr('name'), { expires: 365, path: '/media', secure: true });
        $('.content, .searchresults').fadeOut(500, function() {
            $("link:first").attr("href", rel);
        }).delay(500).fadeIn(275);
        window.scrollTo(0, 0); // Scroll Window back to Top
        return false;
    });
}); 
```

# c# - 通过反向 PInvoke 将字节指针传递给 C# 方法

> ID：14592052
> 
> 赞同：1
> 
> 时间：2013-01-29T20:53:48.320
> 
> 标签：c#, visual-c++, pinvoke, marshalling, argument-passing

过去，我将字节数组从 C# 方法传递到非托管 C++ 函数。我现在尝试使用反向 PInvoke 将指向 unsigned char 类型缓冲区的指针从 C++ 方法传递回 C# 方法，该方法使用回调返回 C# 代码。我尝试了几种不同的想法——比如为第二个参数传递 Ref Byte、Byte * 和 IntPtr，但它们似乎都不起作用。这是我使用 IntPtr 的测试代码：

C#代码：

```
namespace TestPInvoke
{
   class Program
   {
      static void Main(string[] args)
      {
         foo f = new foo();
         f.DispMsg();
      }
   }

   unsafe public class foo
   {
      public delegate void callback(int NumBytes, IntPtr pBuf);

      public static void callee(int NumBytes, IntPtr pBuf)
      {
         System.Console.WriteLine("NumBytes = " + NumBytes.ToString() + ", pBuf = ");
         String s = "";
         Byte* p = (Byte*)pBuf.ToPointer();
         for (int Loop = 0; Loop < 50; Loop++)
         {
            s += p++->ToString() + "  ";
         }
         System.Console.WriteLine(s);
      }

      public void DispMsg()
      {
         caller(new callback(foo.callee));
      }

      [DllImport(@"C:\Users\Bob\Documents\Visual Studio 2008\Projects\AttackPoker1\Win32Client\TestPInvoke\bin\Debug\TestPInvokeDLLCPP.dll", CallingConvention = CallingConvention.StdCall)]
      public static extern void caller(callback call);
   } 
```

}

C++ 代码：

```
#include <stdio.h>
#include <string.h>

typedef unsigned char Byte;

typedef void (__stdcall *callback)(const int bytesInMsg, Byte* pintBuf);

extern "C" __declspec(dllexport) void __stdcall caller(callback call)
{
   // Debug Test on how to pass a pointer to a byte buffer to a C# method.
   Byte* pBuf = new Byte[50];
   // Initialize the buffer to something.
   Byte* p = pBuf;
   for (Byte Loop = 0; Loop < 50; Loop++)
      *p = Loop;
   // Initiate the callback into the C# code.
   call(50, pBuf);
   // Delete pBuf later.
} 
```

当 C++ 代码调用 C# 回调被调用方方法时，bytesInMsg 参数是正确的。但是，返回的指针并不指向缓冲区的开始。取消引用指针似乎总是指向缓冲区中的最后一个值（49 或 0x31），但是在内存窗口中查看它之后，之前和之后的其余字节都是垃圾。

有没有人对我如何在不编组大型数组的情况下使其工作有任何建议？我希望做的是将指向在 C++ 端创建的大型缓冲区的指针传递给 C# 类，然后该类将能够有效地从该缓冲区读取数据。

如果这不能完成，那么我将不得不从 C# 分配内存缓冲区，固定它们，并将它们传递给 C++ 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:30:03.573

所有的 pinvoke 都很好并且可以正常工作。您的 C++ 代码中只是有一个愚蠢的错误，您忘记了递增指针，因此您只设置了数组的第一个元素。采用

```
 *p++ = Loop; 
```

或者简单地索引数组的更理智的版本：

```
 // Initialize the buffer to something.
   for (int ix = 0; ix < 50; ++ix)
       pBuf[ix] = ix; 
```

# webhooks - 当 Dwolla 客人结账最终清除或未能清除时会发生什么？

> ID：14592054
> 
> 赞同：2
> 
> 时间：2013-01-29T20:53:49.937
> 
> 标签：webhooks, checkout, dwolla

当访客结帐成功完成时，重定向和 webhook 回发都是传递的参数，指示成功结帐。但是，如果 ACH 几天后未能清除，或者被接收方取消，会发生什么情况？是我可以通过在预期清算日期查询交易来确定这一点的唯一方法，还是我缺少一个 webhook？

如果这是通过查询交易ID来完成的，并且我在预期清算日期之后进行检查，是否*保证*在那之后不会清算？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:03:00.730

Dwolla 有一个名为“ [TransactionStatus](https://developers.dwolla.com/dev/pages/webhooks/transactionstatus) ”的 Webhook。每当交易状态发生变化时，该 Webhook 都会 POST 到您的服务器。在典型的交易中，您会收到 2 个通知：首先，交易进入“待处理”模式，然后最后进入“已处理”（或“失败”、“已取消”）模式。

[这是一个](https://developers.dwolla.com/dev/pages/statuses)解释交易可能处于的不同状态的页面。

最后，如果您决定退出手动轮询方法，您应该知道，只要交易处于“待定”模式，这两种方式都不能保证。话虽如此，交易在清算日期后仍处于待处理状态的情况非常罕见。

# php - PHP 5.2、Ubuntu 10.04 截断外部输入变量

> ID：14592057
> 
> 赞同：1
> 
> 时间：2013-01-29T20:53:55.190
> 
> 标签：php, ubuntu, ubuntu-10.04, php-5.2

为什么 Ubuntu 10.04 LTS 上的 PHP 5.2 会截断长`$_POST`（外部输入）值，就像`max_input_vars`PHP 5.3 中的指令一样？

我正在支持一个旧的电子商务网站（即将被替换），在最近更新后，由于有超过 1000 个输入变量，管理员无法再完全编辑产品。

（PHP 5.2 是使用[Zend Server Community Edition](http://www.zend.com/en/products/server-ce/)安装的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:53:55.190

我搜索和调试了很长一段时间，发现那是`max_input_vars`指令。[但是，据官方说法，PHP 5.2中](http://www.php.net/manual/en/info.configuration.php)没有`max_input_vars`指令。

我终于发现它在这里被反向移植[了](https://launchpad.net/ubuntu/+source/php5/5.2.4-2ubuntu5.22)。

更新/添加指令解决了这个问题。

我希望这可以帮助其他人免去追踪这个问题的麻烦。

# javascript - 检测表单中的按键？

> ID：14592059
> 
> 赞同：0
> 
> 时间：2013-01-29T20:53:57.353
> 
> 标签：javascript, jquery

我正在尝试让网页检测特定表单中的用户按键（每个按键都会调用一个函数）。但是我的代码不起作用（控制台从不打印到日志）：

```
$(document).on("keypress","filterinput",function(e) {
    console.log("press detected");
});

<form class="filterform"><input class="filterinput" type="text"></form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:54:57.807

您忘记了`.`在类选择器中：

```
$(document).on("keypress", ".filterinput", function(e) {
//                          ^ this . indicates that it's a class selector
    console.log("press detected");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:55:15.357

你的选择器应该是`.filterinput`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:55:42.393

您`.`在选择器中缺少表示“查找课程”的句点：

```
$(document).on("keypress",".filterinput",function(e) {
//                         ^ period 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:55:58.883

试试这个代码

```
$(".filterinput").keypress(function(e)
    {
        console.log("press detected");
    });

    <form class="filterform"><input class="filterinput" type="text"></form> 
```

# django - 尝试使用 Django send_mail 和 SendGrid 发送电子邮件

> ID：14592070
> 
> 赞同：2
> 
> 时间：2013-01-29T20:54:39.520
> 
> 标签：django, sendgrid

我正在尝试使用 SendGrid 发送邮件，但每当我发送 HTML 格式的电子邮件时，它会在电子邮件中显示 HTML 标签，而不是根据需要格式化 HTML。这是我要发送的内容：

```
<html>
<head></head>
<body>
  <p>Hi!<br>
     How are you?<br>
  </p>
</body>
</html> 
```

这是我的代码：

```
 def send(self, group=None):
        current_site = Site.objects.get_current()
        domain = unicode(current_site.domain)
        ctx = {
            "group": group,
            "signup_code": self,
            "domain": domain,
        }
        msg = MIMEMultipart('alternative')
        subject = render_to_string("signup_codes/invite_user_subject.txt", ctx)
        msg['subject'] = render_to_string("signup_codes/invite_user_subject.txt", ctx)
        message = render_to_string("signup_codes/invite_user.txt", ctx)
        text = "Hi!\nHow are you?\n"
        part1 = MIMEText(text, 'plain')
        part2 = MIMEText(message,'html')
        msg.attach(part1)
        msg.attach(part2)
        send_mail(subject, message, settings.DEFAULT_FROM_EMAIL, [self.email])
        self.sent = datetime.datetime.now()
        self.save() 
```

注意：`invite_user.txt`包含上面的html。

任何洞察为什么它没有认识到这是 HTML 并相应地格式化它？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:58:11.347

默认情况下，Django 邮件程序只发送电子邮件的文本部分。您需要将其设置为 html（这是不好的做法）或使用 EmailMultiAlternatives 类。所以，我认为这就是你真正想要的：

```
from django.core.mail import EmailMultiAlternatives

def send(self, group=None):
  current_site = Site.objects.get_current()
  domain = unicode(current_site.domain)
  ctx = {
      "group": group,
      "signup_code": self,
      "domain": domain,
  }

  subject = render_to_string("signup_codes/invite_user_subject.txt", ctx)
  text_content = "Hi!\nHow are you?\n"
  html_content = render_to_string("signup_codes/invite_user.txt", ctx)

  msg = EmailMultiAlternatives(subject, text_content, settings.DEFAULT_FROM_EMAIL, [self.email])
  msg.attach_alternative(html_content, "text/html")

  msg.send() 
```

* * *

此外，还有一个官方的 SendGrid python 包，您可能需要考虑将其作为使用内置 Django 函数的替代方案。在这里查看：

> [https://github.com/sendgrid/sendgrid-python/](https://github.com/sendgrid/sendgrid-python/)

# php - 匹配单独的数组值并打印结果

> ID：14592071
> 
> 赞同：0
> 
> 时间：2013-01-29T20:54:40.180
> 
> 标签：php, arrays, codeigniter

```
// Setup Query
$query = $this->db->query('SELECT * FROM here');

// Pull in the appropriate data for the model
$toolkitName = $this->toolkits_model->find_by('id', $id);

// Strip the commas from incoming array
$matchMeCommas = $toolkitName->toolkits_listitems; 
$matchMe = explode(',', $matchMeCommas);    

// Print ID for each item in toolkit parent list
foreach ($query->result_array() as $row) :
echo $row['id'];
endforeach;

// Match each item from toolkit list item
foreach ($matchMe as $row2) :
echo $row2;
endforeach; 
```

我要做的是匹配这两个数组中的值并打印父列表项的结果。目前发生的情况是我得到了两个与 ID（2、3、4、5 等）相关的“234567891011”字符串。

我应该补充一点，我想匹配类似的值并为该特定 ID 提取结果。因此，如果值 2 和 4 匹配，我想从数据库中检索它们的信息并打印出来。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:09:45.763

仍然不完全确定你想要什么，但这可以让你开始：

```
foreach($query->result_array() as $row){
    if(in_array($row['id'], $matchMe)){
        //this is a match ... do something
    }
} 
```

或者

您可以构建一个包含所有匹配项的数组：

```
//get the ids from the query
$ids = array();
foreach($query->result_array() as $row){
    $ids[] = $row['id'];
}

$matches = array_intersect($matchMe, $ids); 
```

# java - 在本地化缓存数据方面，java多维数组是Col-Major还是Row-Major？

> ID：14592081
> 
> 赞同：2
> 
> 时间：2013-01-29T20:55:02.070
> 
> 标签：java, caching, multidimensional-array

我在[类似的 Stack Overflow 线程](https://stackoverflow.com/questions/6630990/java-a-two-dimensional-array-is-stored-in-column-major-or-row-major-order)上找到了这个主题。

在 c++ 中，当你创建一个数组 int[i][j] 时，你会得到行主顺序，因此按行迭代将为你提供包含更多有用数据的缓存。

在 java 中，没有 2d 数组，但它仍然在缓存方面创建了足够相似的东西。我的问题是，它是创建行大小的实际数据数组，还是创建行大小的指针数组？

或者，正如类似 Stack Over 线程上的最佳答案所说，它是否做了完全不同的事情，其中​​ int[5][8] 将是一个由 5 个指针组成的数组，这些指针指向任意大小的数组，它们的总和为 (5*8) ?

它说 java 制作了锯齿状数组，我想不出任何好的理由来证明这是真的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:57:49.637

> 在java中，没有二维数组，但它仍然在缓存方面创建了足够相似的东西

我不知道 C++ 行为，但听起来你在期待 Java 行为中的某些东西，但很可能并非如此。如果你写：

```
int[][] x = new int[5][8]; 
```

那么这相当于：

```
int[][] x = new int[5][];
x[0] = new int[8];
x[1] = new int[8];
x[2] = new int[8];
x[3] = new int[8];
x[4] = new int[8]; 
```

这里有 6 个独立的数组。在任何时候，你都可以写：

```
x[2] = new int[10000]; 
```

它*只是*一个数组数组——根据定义是[锯齿状的。](http://en.wikipedia.org/wiki/Jagged_array)没有什么可以说它会永远保持矩形，或者甚至“顶级”数组的所有元素都将是非空的。

我希望这些值在内存中*开始时*彼此接近，但不能保证它们会保持这种状态。

如果你真的想确保你有一个连续的内存块，你应该使用`int[] x = new int[40];`。

# jdbc - 为助手类注释数据源

> ID：14592085
> 
> 赞同：0
> 
> 时间：2013-01-29T20:55:17.037
> 
> 标签：jdbc, annotations, ejb-3.0

我在我的 MDB 中声明了一个资源依赖项，它将由其中的帮助程序类使用。

```
@MessageDriven(name = "BazaarBillingMDB", mappedName = "jms/EJB3Queue", activationConfig = {
    @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
    @ActivationConfigProperty(propertyName = "destinationName", propertyValue = "jms/EJB3Queue") }
)
@Resource(name="EJB3Source",mappedName="jdbc/EJB3Source",type=javax.sql.DataSource.class)
public class BazaarBillingMDB implements MessageListener {
    public void onMessage(Message message) {
        try {
            TextMessage msg = (TextMessage) message;
            String order = (String) msg.getText();
            try {
                bazaarhelper helper=new bazaarhelper();
                helper.insertBilling(order);
            } 
....
} 
```

助手类（bazaarhelper）试图获取这个数据源的句柄：

```
try {
            context=new InitialContext();
            dataSource = (DataSource)context.lookup("java:comp/env/EJB3Source");
            conn = dataSource.getConnection(); 
```

但是，当助手类尝试获取数据源的句柄时，我总是面临 NamingException。但是，当作为资源注入另一个 EJB 时，此数据源可以正常工作。需要做什么才能让辅助类可以访问资源？

# database - 一种更智能的按关键字分类的方法？

> ID：14592088
> 
> 赞同：2
> 
> 时间：2013-01-29T20:55:21.620
> 
> 标签：database, data-mining, categorization

我们的网站有用户生成的内容，用户可以使用标签对其内容进行分类。为了使搜索内容更容易，我们正在考虑创建“兴趣”类别，例如：

```
Sex, Hobbies, Current Events, etc. 
```

实现此目的的一种方法是将关键字与每个兴趣类别相关联。因此，如果用户点击爱好，系统将搜索我们与爱好相关联的关键字，例如：

```
Hobbies -> cars, cooking, reading, etc. 
```

然而，这种方法似乎受到限制，因为用户可以在身体上发布带有“性感”字样的热棒图片，而在我们的系统中，“性感”一词与两个兴趣类别相关联：“性”和“时尚与美容” .

关于如何使这种方法更智能的任何建议？或者，关于公司如何实施这样的事情的建议/建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:10:53.873

可能您应该**对类别进行加权**。查找所有匹配的单词，并为所有类别分配一个值，如下所示：

*   为每个无疑属于该类别的单词添加 3
*   为可能属于更多类别的每个单词加 1

这是一种有偏的权重（偏向独特的词），这样您可以更好地确定图片所属的位置。

此外，您可以构建一个 -**不断变化**的- 权重矩阵，即哪个词与某个类别的相关程度。常用词的重要性较低（因为每个人都在使用它们）。

此外，根据分类的文本，您可以**自动扩展**单词列表，并自动对它们进行分类。例如，如果一个新的游戏名称出现在单词列表中（称为“abc”），您会注意到“abc”出现在*爱好*类别中的许多文本中，*而其他任何地方都没有*。所以，你可以把这个词和这个类别联系起来。

构建自动学习系统是一个非常令人兴奋的领域！

# java - 文件存在时抛出 FileNotFoundException。文件名可能包含特殊字符

> ID：14592091
> 
> 赞同：4
> 
> 时间：2013-01-29T20:55:24.640
> 
> 标签：java, jvm, filenotfoundexception

我想知道是否有人知道为什么我`java.io.FileNotFoundException`在尝试查找我知道目录中存在的文件时可能会得到一个。

我认为以下与它有关，请让我知道我是否正确或是否还有其他原因：

1.  我将我的 JVM 从 1.7 降级到 1.6
2.  文件名包含两个问号，所以文件名为`filename_?)?.data`

当我使用 JVM 1.7 时，该程序能够找到该文件并将其打开。但是，在降级到 1.6 之后，它似乎找不到这个特定的文件。所以我在想JVM 1.6 可能无法读取其中带有问号的文件。

此外，我进行了两次/三次检查，并且该文件*确实*存在于我的程序正在查找的目录中（它也能够在其中找到其他文件）。

下面是我的代码：

```
public Object readFromFile(String fileName) {
    // Check for null
    if (fileName == null || fileName.equals("")) return null;

    Object obj = null;
    ObjectInputStream input = null;

    // Open file into (input)
    try {
        input = new ObjectInputStream(new FileInputStream(fileName + ".data"));
    } catch (IOException e) {
        e.printStackTrace();
    }

    // Read content of file into (obj)
    try {
        obj = input.readObject();
        input.close();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return obj;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:08:24.503

可能您需要在使用特殊字符时对文件名进行编码

试试这个

```
String fileNameNew= java.net.URLEncoder.encode(fileName);
if (fileNameNew == null || fileNameNew.equals("")) return null;

Object obj = null;
ObjectInputStream input = null;
... 
```

您可以在这里查看：[如何确定字符串是否包含无效的编码字符](https://stackoverflow.com/questions/887148/how-to-determine-if-a-string-contains-invalid-encoded-characters)

# ember.js - registerAdapter：为不同类型注册不同的适配器

> ID：14592092
> 
> 赞同：3
> 
> 时间：2013-01-29T20:55:24.813
> 
> 标签：ember.js, ember-data

我正在尝试对不同类型使用不同的适配器。RESTAdapter 和 FixtureAdapter。通常，我们可以为特定类型注册不同的适配器，例如：

```
DS.Store.registerAdapter('App.Foo', DS.FixtureAdapter.extend());

App.store = DS.Store.create({
    revision: 11,
    //adapter: 'DS.FixtureAdapter'   
    adapter: DS.RESTAdapter.create();
    })
}); 
```

但是，尽管 ember-data 提供的测试建议使用完全相同的设置来针对不同类型使用不同的适配器，但这似乎不起作用。

```
test("Adapters can be registered on a per-type basis", function() {
  expect(2);

  var Store = DS.Store.extend(),
      Post = DS.Model.extend(),
      Comment = DS.Model.extend();

  Store.registerAdapter(Post, DS.Adapter.extend({
    find: function(store, type, id) {
      strictEqual(type, Post, "Post adapter was used to find Post record");
    }
  }));

  var store = Store.create({
    adapter: DS.Adapter.extend({
      find: function(store, type, id) {
        strictEqual(type, Comment, "default adapter is used to find Comment");
      }
    })
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:30:25.983

有一个错误报告：[Per-type Adapter not respected in case`commit`](https://github.com/emberjs/data/issues/616)

# boost-geometry - Boost.Geometry buffer() 算法：它是否适用于一般情况多边形

> ID：14592093
> 
> 赞同：2
> 
> 时间：2013-01-29T20:55:25.893
> 
> 标签：boost-geometry

我在看这里： http: [//www.boost.org/doc/libs/1_52_0/libs/geometry/doc/html/geometry/reference/algorithms/buffer/buffer.html](http://www.boost.org/doc/libs/1_52_0/libs/geometry/doc/html/geometry/reference/algorithms/buffer/buffer.html) 看到这个：“当前的实现只会扩大一个盒子，它不是由 OGC 定义的。下一个版本的库将包含一个更完整的实现“

看起来 Boost Geometry 无法缓冲任意多边形。但是各种论坛讨论都提到了 buffer() 算法，就像它实际上适用于一般情况一样。哪个是对的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:40:24.403

旧答案：*一般情况下的 buffer() 算法正在开发中，可以从开发版本（Trunk）开始使用。它通常有效，但并非适用于所有情况，也适用于所有几何类型。*

新答案：**是的，有可能**

# android - INSTALL_FAILED_UPDATE_INCOMPATIBLE 即使在原件完全删除后也会出现

> ID：14592101
> 
> 赞同：9
> 
> 时间：2013-01-29T20:55:50.007
> 
> 标签：android, nook

我正在尝试将修改后的 apk 文件安装到我的 Nook Simple Touch 上。我修改了 Reader.apk 程序，重新编译它，并用我自己的密钥对其进行了签名。

我知道如果签名密钥不同，您将无法在当前应用程序上安装应用程序。`INSTALL_FAILED_UPDATE_INCOMPATIBLE`但是，即使在完全卸载原始 Reader.apk 应用程序后，我也会收到错误消息。

检查 packages.xml 文件后，我删除了旧 Reader.apk 应用程序的条目。而且我仍然收到此错误。该应用程序已完全卸载，我无法安装修改后的版本。

即使使用我的新密钥签署原始源代码也会导致出现此错误（因此它与我所做的实际更改无关）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-10T07:46:36.693

根据文档，“如果以前安装的同名软件包与新软件包具有不同的签名（并且旧软件包的数据未删除），则会出现此错误。”

如果您确定已将其删除，则可能在某些地方旧签名仍在浮动，该删除没有，嗯，删除。擦除模拟器/设备数据应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-21T18:29:51.120

如果原始应用程序已完成删除，但我们仍然收到相同的消息：

```
INSTALL_FAILED_UPDATE_INCOMPATIBLE 
```

转到`Settings`> `Apps`，您将找到带有消息的应用程序：

> “未为此用户安装”

，我们必须使用以下选项为所有用户手动卸载：

> “为所有用户卸载”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T20:55:50.007

解决办法是修改`AndroidManifest.xml`文件。您需要删除`sharedUserId`第二行中的属性。

Reader.apk 文件是一个系统应用程序，它是由设备本身的制造商制作的，他们还制作了其他几个应用程序。因此，他们能够设置 sharedUserId 标志，这允许他们所有的应用程序相互交互。作为安全设计，所有应用程序都必须具有相同的签名密钥。当我尝试安装修改后的应用程序时，它无法安装，因为它试图与其他应用程序共享用户 ID，但缺少正确的签名密钥。

通过移除 xml 中的标志，您可以成功安装修改后的应用程序。`AndroidManifest.xml`从此文件中更改以下行：

```
<manifest android:sharedUserId="android.media" android:versionCode="1"
    android:versionName="1.0" package="com.bn.nook.reader.activities"
    xmlns:android="http://schemas.android.com/apk/res/android"> 
```

对此：

```
<manifest android:versionCode="1" android:versionName="1.0"
    package="com.bn.nook.reader.activities"
    xmlns:android="http://schemas.android.com/apk/res/android">` 
```

有关更多详细信息，请参阅[此 xda 帖子](http://forum.xda-developers.com/showpost.php?p=37343918&postcount=2)。（完全披露：我写了那篇文章。）

# .net - 我从哪里获得 .NET 4.0 的 System.Json.dll？

> ID：14592102
> 
> 赞同：1
> 
> 时间：2013-01-29T20:55:50.273
> 
> 标签：.net, .net-4.0

我正在开发一个引用 System.Json.dll 的 .NET 4.0 Windows 服务。我从哪里得到那个 DLL？

（不，我不能只升级到 .NET 4.5。）

# c++ - 在指定位置插入字符

> ID：14592105
> 
> 赞同：3
> 
> 时间：2013-01-29T20:55:55.607
> 
> 标签：c++, arrays, char, shift

我想制作一个程序，当用户输入`AB1245`并让程序将其更改为`AB 12345`（在第 2 和第 3 个字符之间添加空格）

```
char Bilnr[9];

for (i = 8; i < 3; i--) {
    Bilnr[i++]=Bilnr[i];

} 
```

据我了解，该程序将从 Bilnr[9] 开始并将其设置为 Bilnr[8] 的值。

然后将 Bilnr[8] 设置为 Bilnr[7] 的值。

但它不会移动任何值。它只是打印`AB1245`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T21:00:27.337

我注意到的一件事是，如果您的循环实际执行过，它将是无限的

```
for (I=8; I<3; I--) {
    Bilnr[I++]=Bilnr[I];

} 
```

`I++`不是说`I+1`，而是说`I = I+1`

但是您的循环不会执行，因为您的条件`I<3`在您初始化时从一开始就是假`I`的`I=8`

你也永远不会`I[2]`成为一个`' '`

您还必须意识到数组从 开始`0`，所以`Bilnr[0]`==`'A'`

尝试

```
for(int i = 8; i > 2; i--)
{
    Bilnr[i] = Bilnr[i-1];
}
Bilnr[2] = ' '; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:00:15.393

这个循环条件是错误的：

```
for (I=8; I<3; I--) {
    Bilnr[I++]=Bilnr[I];
} 
```

`I`永远不会小于 3，因此循环永远不会开始。你可能想要一个`>`. 如果它确实开始了，你也会有一个无限循环，因为你有`I++`and `I--`。

你想要这样的东西：

```
for (I=7; I>1; I--) {
    Bilnr[I+1]=Bilnr[I];
} 
```

此外，您必须用空格替换该位置，否则您将得到“AB112345”：

```
Bilnr[2] = ' '; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T21:04:22.237

它打印相同，因为循环永远不会运行。循环条件错误，应该是`I>3`启动。[`for`循环](http://cprogramminglanguage.net/c-for-loop-statement.aspx)的工作方式如下：

```
for (initialization; condition-that-has-to-be-true; optional-increment-decrement) {
} 
```

还要记住 C/C++ 数组从 0 开始计数，而不是 1。

要修复您的完整代码：

```
char Bilnr[9] = "AB12345";

for (I=7; I>2; I--) {
    Bilnr[I]=Bilnr[I-1];
} 
```

那么你有`AB112345`. 然后，您需要的所有内容都放在空间中：

```
Bilnr[2] = ' '; 
```

# css - div 容器：限制为向右一行的文本

> ID：14592111
> 
> 赞同：0
> 
> 时间：2013-01-29T20:56:13.360
> 
> 标签：css, html

我尝试在我的 CSS 的几个位置调整宽度，但文本一直在一行上流动，并且没有包裹在“左侧栏”内。我的文字向右走多远似乎没有限制，我希望有一个限制。如何在 CSS 中设置它？

```
<h3> JKHJKHJKHKJHJKHJKHJKHKJHJKHJKHKJH</h3> 

#leftsidebar {
  position:fixed; 
  width: 160px; 
  top:150px; 
  margin:0px;
  line-height:165%; 
  white-space:nowrap; 
  z-index:50; 
  padding: 0px 35px;
} 
```

[http://jsfiddle.net/4uxcN/](http://jsfiddle.net/4uxcN/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:09:19.143

删除`white-space:nowrap;`（并最终添加`word-wrap: break-word;`以尊重您的无空格长字的 div 边界）以将文本发送到新行；

如果您希望将`overflow-x: scroll;`文本放在一行中，但希望在固定宽度的 div 内有一个水平滚动条，请添加：http: [//jsfiddle.net/4uxcN/10/](http://jsfiddle.net/4uxcN/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:03:02.733

如果您谈论的是`word-wrap: break-word`属性，它将在到达父宽度的末尾时破坏该单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:05:50.807

删除 {white-space:nowrap;}，它会强制你的文本为一行，并添加 {word-wrap: break-word} 来处理你很长的单词。

[http://jsfiddle.net/4uxcN/6/](http://jsfiddle.net/4uxcN/6/)

```
#leftsidebar {
    word-wrap: break-word;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T21:08:32.540

基本上，有3种方法可以做到：

1.  只需删除您的`white-space`财产。[关联](http://jsfiddle.net/4uxcN/7/)
2.  删除`white-space`属性，并添加`word-wrap: break-word;`属性。[关联](http://jsfiddle.net/4uxcN/8/)
3.  将您设置`white-space`为`pre-wrap`而不是`nowrap`. [关联](http://jsfiddle.net/4uxcN/9/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T21:09:03.603

如果你删除

```
white-space:nowrap; 
```

所有文本将在空格处中断以适应框宽度。

像您示例中的超长字符串不会断裂。要强制断开愚蠢的长字符串，您可以使用。

```
word-wrap:break-word; 
```

您也可以使用溢出属性，例如

```
overflow:scroll 
```

这真的取决于你想要的布局

# javascript - Javascript .indexOf 不适用于 int 数组

> ID：14592115
> 
> 赞同：9
> 
> 时间：2013-01-29T20:56:19.477
> 
> 标签：javascript, indexof

代码：

```
function showlayer(name){
    var size = js_array.length
    var index = js_array.indexOf(name);
    var plusOne = js_array[index+1];
    document.write("" + name + "<br />" + js_array + "<br />" + index + "<br />" +
                   plusOne + "<br />" )
    ...
} 
```

输出：

```
301
300,299,301,290,303,304,302,310,291,306,308,305,307,292,294,295,309
-1
300 
```

name 的所有可能值都在数组中，但由于某种原因 indexOf() 永远找不到它们。这是怎么回事？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-29T20:58:12.390

试试这个：

```
...
var index = js_array.indexOf(parseInt(name, 10)); // so that it does not try to compare strings...
... 
```

# javascript - 此 CURL 脚本的等效 Javascript 请求标头是什么？

> ID：14592116
> 
> 赞同：1
> 
> 时间：2013-01-29T20:56:25.637
> 
> 标签：javascript, curl, titanium

我正在尝试使用 javascript 与此 web 服务通信如何使用 javascript 设置最后一个请求标头？

```
curl -X POST \
      -H "X-Parse-Application-Id: 57865" \
      -H "X-Parse-REST-API-Key: 87468977" \
      -H "Content-Type: application/json" \
      -d '{}' \
    http://api.thisisatest.com/1/test 
```

到目前为止，我在下面有这个，但“d”是不正确的，我不确定这应该是什么，感谢任何帮助。

```
xhr.setRequestHeader("X-Parse-Application-Id",  "57865");
xhr.setRequestHeader("X-Parse-REST-API-Key", "87468977");
xhr.setRequestHeader("Content-Type", "application/json");
//xhr.setRequestHeader("d", "{}"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:11:10.483

`-d`代表实际的请求正文。尝试这个：

```
xhr.send('{}'); 
```

# css - 选择导航元素时如何隐藏边框

> ID：14592118
> 
> 赞同：0
> 
> 时间：2013-01-29T20:56:26.683
> 
> 标签：css

我正在创建一个具有垂直列表的导航栏（在 div 中）。当你点击导航中的一个元素时，它会弹出一个触及导航列表的 div。这个 div 有一个边框（去掉那个边框看起来很奇怪，所以我不这样做）。如何删除该边框的一部分（接触所选导航 div 的部分）？

再解释一下：弹出的 div 触及左侧的导航。我想仅隐藏接触导航栏中所选元素的边框部分的边框

找到解决方案：我需要在导航上放置一个 right-border: -1px 以覆盖弹出 div 的边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:01:32.270

如果它的顶部触及导航...使用`border-top: none`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:03:38.557

您可以在该部分使用`Outline:0px;`或`Border:none;`。但不能说除非我看到代码。

# javascript - 画布绘制对象的鼠标事件

> ID：14592120
> 
> 赞同：0
> 
> 时间：2013-01-29T20:56:31.943
> 
> 标签：javascript, jquery, html, canvas, globalcompositeoperation

我想使用[这个](https://github.com/Phrogz/context-blender)插件创建基于画布的站点菜单，以创建“乘法”效果。然而，这个以及[globalCompositeOperation](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)正在同一画布中处理 ctx 对象。（在上下文混合器中，它使用屏幕外画布并使用其绘制信息，globalcompoperation 混合相同的 ctx）。我想为每个 ctx 对象创建鼠标事件（悬停和单击），因此每个 ctx 都会导致不同的 url。

这是我的测试：

```
 function draw(){
      var ctx = document.getElementById('canvasOff1').getContext('2d');
      var ctx2 = document.getElementById('canvasReal').getContext('2d');
      var ctx3 = document.getElementById('canvasOff3').getContext('2d');

      // draw circles - each circle should link to different url and has its own focus
      ctx.fillStyle = "#c7302a";
      ctx.beginPath();
      ctx.arc(50,75,35,0,Math.PI*2,true);
      ctx.fill();

      ctx2.fillStyle = "#395797";
      ctx2.beginPath();
      ctx2.arc(100,75,35,0,Math.PI*2,true);
      ctx2.fill();

  ctx3.fillStyle = "#454";
      ctx3.beginPath();
      ctx3.arc(150,75,35,0,Math.PI*2,true);
      ctx3.fill();

    var over = canvasOff1.getContext('2d'); 
    var under = canvasReal.getContext('2d');
    over.blendOnto(under,'multiply');

    var over2 = canvasOff3.getContext('2d'); 
    var under2 = canvasReal.getContext('2d');
    over2.blendOnto(under2,'multiply',{destX:0,destY:0});
    } 
```

很高兴知道如何在这里实现 jQuery。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:27:31.707

您不能将事件侦听器添加到上下文，只能添加到画布：

```
document.getElementById('canvasOff1').addEventLsitener(
    'click',
    function(){ goToUrl('http://www.test1.com'); }
);
document.getElementById('canvasReal').addEventLsitener(
    'click',
    function(){ goToUrl('http://www.test2.com'); }
);
document.getElementById('canvasOff3').addEventLsitener(
    'click',
    function(){ goToUrl('http://www.test3.com'); }
);

function goToUrl(url){
    window.location = url;
} 
```

或者，使用 jQuery：

```
$('#canvasOff1').on(
    'click',
    function(){ goToUrl('http://www.test1.com'); }
);
$('#canvasReal').on(
    'click',
    function(){ goToUrl('http://www.test2.com'); }
);
$('#canvasOff3').on(
    'click',
    function(){ goToUrl('http://www.test3.com'); }
);

function goToUrl(url){
    window.location = url;
} 
```

（我更喜欢使用单独的函数 for `window.location = X`，但当然，您也可以在`onclick`函数中使用它，如下所示：

```
function(){ window.location = 'http://www.test1.com'; } 
```

# java - 将对象放入 ChannelBuffer

> ID：14592122
> 
> 赞同：0
> 
> 时间：2013-01-29T20:56:34.770
> 
> 标签：java, http, netty

[我已经按照示例 http](http://static.netty.io/3.5/xref/org/jboss/netty/example/http/file/package-summary.html)服务器使用 Netty 编写了一个小型 http服务器，现在我正在尝试使其适应我的需求（一个应该发送 json 的小应用程序）。我首先使用 jackson 将 POJO 手动编码为 json，然后使用 StringEncoder 获取 ChannelBuffer。现在我试图通过添加[HttpContentEncoder](http://static.netty.io/3.5/api/org/jboss/netty/handler/codec/http/HttpContentEncoder.html)提取将 POJO 编码为 json 的位来稍微概括它，我已经或多或少地实现了这一点。

我无法弄清楚的部分是如何在[HttpResponse](http://static.netty.io/3.5/api/org/jboss/netty/handler/codec/http/HttpResponse.html)上设置内容。它需要一个 ChannelBuffer，但我如何将我的对象放入 ChannelBuffer？

**编辑**

假设我有一个带有如下代码的处理程序，并且有一个知道如何序列化 SomeSerializableObject 的 HttpContentEncoder。那么我如何将我的内容（SomeSerializableObject）发送到 HttpContentEncoder？这就是我要找的。

```
SomeSerializableObject obj = ...

// This won't work becuase the HttpMessage expects a ChannelBuffer
HttpRequest res = ...
res.setContent(obj);

Channel ch = ...
ch.write(res); 
```

虽然我不确定这是否是 HttpContentEncoder 的目的，或者更确切地说是压缩之类的东西，但在对其进行了更多研究之后？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T05:45:41.400

大多数对象序列化/反序列化库使用`InputStream`和`OutputStream`. 您可以创建一个动态缓冲区（或用于反序列化的包装缓冲区），用`ChannelBufferOutputStream`（或`ChannelBufferInputStream`）包装它以提供序列化库。例如：

```
// Deserialization
HttpMessage m = ...;
ChannelBuffer content = m.getContent();
InputStream in = new ChannelBufferInputStream(content);
Object contentObject = myDeserializer.decode(in);

// Serialization
HttpMessage m = ...;
Object contentObject = ...;
ChannelBuffer content = ChannelBuffers.dynamicBuffer();
OutputStream out = new ChannelBufferOutputStream(content);
mySerializer.encode(contentObject, out);
m.setContent(content); 
```

如果序列化库允许您使用字节数组而不是流，则使用`ChannelBuffer.array()`and会更简单`ChannelBuffer.arrayOffset()`。

# c# - Streamwriter.Writeline 和 File.WriteAllText 乱序写入文本

> ID：14592123
> 
> 赞同：0
> 
> 时间：2013-01-29T20:56:37.473
> 
> 标签：c#, xml, filestream

我遇到了一个问题，我将几个 xml 文件的内容写入一个文件。当我运行程序时，输出格式正确，但单词乱序。一个例子：

我的字符串是`"<s:AttributeType name=\"Shift\" number=\"34\" nullable=\"true\" writeunknown=\"true\">"`

所以它应该打印`<s:AttributeType name="Shift" number="34" nullable="true" writeunknown="true">`

但反而`<s:AttributeType name="Shift" writeunknown="true" number="34" nullable="true">`

被退回。

一些文件是使用`File.WriteAllText(@"C:\Users\status.xml", xsh);` 其中'xsh'是一个包含字符串的变量写入的。

其余部分使用此循环编写：

```
 foreach (var i in Numbers.GetWSnumber())
        {
            string contents = "";
            string curFile = @"\\production\public\Staus\TStatus\WS" + i.SetId + ".xml";
            if (File.Exists(curFile))
            {
                System.IO.StreamReader file = new System.IO.StreamReader(curFile);
                while ((contents = file.ReadLine()) != null)
                {
                    using (StreamWriter sw = File.AppendText(@"C:\Users\status.xml"))
                    {
                        sw.WriteLine(contents);
                    }   

                }
                file.Close();
            }
        } 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:28:00.233

XML 属性的顺序并不重要，所以我不会担心。但是，如果它真的让您烦恼，我建议您移动您的 using 语句。

```
using (StreamWriter sw = File.AppendText(@"C:\Users\status.xml"))
{
    sw.WriteLine(contents);
} 
```

尽管这可能已经过优化，因此它的工作方式与编写得更好时一样，但您当前拥有它的方式`StreamWriter`是分配新的，然后在每次迭代时处理掉。

您的 using 语句应该包装`while`循环，而不是相反。这可能会解决问题（尽管我认为不太可能），因为我不知道编译器是如何处理这一行的。无论哪种方式，都值得改变。

# python - Camelot 无法创建新项目

> ID：14592125
> 
> 赞同：1
> 
> 时间：2013-01-29T20:56:46.260
> 
> 标签：python, sqlalchemy

我正在尝试在 Ubuntu 12.04 上安装和运行 Camelot 框架。但从错误来看，问题似乎是 sqlalchemy。我已经安装了 camelot：

`pip install camelot`它安装没有任何问题。我尝试同时升级 sqlalchemy 和 camelot，但它会引发异常并且在我运行时不起作用：

`python -m camelot.bin.camelot_admin`

一些版本：

```
In [1]: import camelot

In [2]: camelot.__version__
Out[2]: '12.06.29'

In [3]: import sqlalchemy

In [4]: sqlalchemy.__version__
Out[4]: '0.8.0b2' 
```

这是回溯：

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/usr/local/lib/python2.7/dist-packages/camelot/bin/camelot_admin.py", line 263, in <module>
    main()
  File "/usr/local/lib/python2.7/dist-packages/camelot/bin/camelot_admin.py", line 255, in main
    meta()
  File "/usr/local/lib/python2.7/dist-packages/camelot/bin/camelot_admin.py", line 243, in meta
    from camelot.bin.meta import launch_meta_camelot
  File "/usr/local/lib/python2.7/dist-packages/camelot/bin/meta.py", line 34, in <module>
    from camelot.admin.application_admin import ApplicationAdmin
  File "/usr/local/lib/python2.7/dist-packages/camelot/admin/application_admin.py", line 34, in <module>
    from camelot.admin.action import application_action, form_action, list_action
  File "/usr/local/lib/python2.7/dist-packages/camelot/admin/action/__init__.py", line 25, in <module>
    from application_action import ( ApplicationActionGuiContext,
  File "/usr/local/lib/python2.7/dist-packages/camelot/admin/action/application_action.py", line 31, in <module>
    from camelot.core.orm import Session
  File "/usr/local/lib/python2.7/dist-packages/camelot/core/orm.py", line 48, in <module>
    from sqlalchemy.ext.declarative import ( declarative_base, 
ImportError: cannot import name _declarative_constructor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:20:47.493

我从 0.8 降级到 sqlalchemy 0.7.8 并清理了一些以前安装的文件。现在效果很好。

# android - 图像Android上的多可点击区域

> ID：14592129
> 
> 赞同：1
> 
> 时间：2013-01-29T20:56:59.567
> 
> 标签：android, layout, imageview, clickable, zones

在我的应用程序中，我需要显示一张法国地图，分为 5 个区域。我是用图像编辑器完成的：我将地图分成 5 个部分，并将每个部分保存为 png。每个 PNG 都有相同的大小。

现在，我在 RelativeLayout 中添加了 5 个 ImageView（大小相同），我得到了这个：

[法国地图 5 部分](http://images.meteociel.fr/im/6200/screenshot_moe2.png)

现在的目标是制作地图上描述的可点击区域。我不知道该怎么做（哪种布局？如何将它们放在我的布局中？...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:15:04.690

也许是相对布局？您可以以常规方式放置四个背景图像（使用 toLeftOf、toRightOf、below、...）和一个前景图像，其中 alignParentTop 和 centerHorizo​​ntal 设置为 true，并使用适当的 layout_margins{Top, Left/Right}。

还要记住，android 从上到下绘制 xml 布局，因此您的前景图像应该是布局文件中的最后一个。

# c# - 运行一个函数作为今天的日期

> ID：14592130
> 
> 赞同：2
> 
> 时间：2013-01-29T20:57:00.720
> 
> 标签：c#, sql, sql-server-2008, stored-functions

我在下面有一个调用存储函数的查询。在函数中，您将看到我需要声明开始日期 (@startdate) 和结束日期 (@End date)。这些查询将在将通过 Windows 任务调度程序运行的 C# 程序中使用。这样做的想法是每天提取销售信息的报告，并在晚上自动通过电子邮件将其作为夜间报告的一部分。因此，我需要将@startdate 分配给“今天的”日期。例如，如果程序今天自动运行，我需要 1/29/13 00:00 到 1/29/13 23:00 的销售信息。明天运行时，我需要 1/30/13 00:00 到 1/30/13 23:00 的销售信息。等等。我在报告的其他查询中使用 dateadd datediff，但是这是引用存储函数的唯一查询。我将如何在存储函数中完成同样的事情？

这是我调用存储函数的查询：

```
SELECT
  SUM(QTY) AS Discounts
FROM
  dbo.fFinancialDataFull('Date Range Report', @startdate , @enddate, '1', '1', 'ALL', 'ALL', 'ALL', 'ALL', '1', '1', '1', '1', '1') AS fFinancialDataFull_1
WHERE
  (ReportCategoryID = 62)) AS unlimitedtbl 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:10:23.130

很难判断您是要在当前查询之前还是在函数内部生成日期。

如果您想在调用函数之前执行此操作。您可以轻松使用：

```
DECLARE @startdate AS DATETIME;
DECLARE @endDate AS DATETIME;

--- code that will work on any version of SQL Server
SET @startdate = DateAdd(day, DateDiff(day, 0, getdate()), 0)
SET @enddate = DateAdd(day, DateDiff(day, 0, getdate()), 0) 
                            + CAST('23:59:59' as datetime)

-- SQL Server 2008+ code with DATE datatype
SET @startdate = CAST(CAST(GETDATE() AS DATE) as datetime);
SET @enddate = CAST(GETDATE() AS DATE) + CAST('23:59:59' as datetime);

SELECT SUM(QTY) AS Discounts
FROM dbo.fFinancialDataFull('Date Range Report', @startdate , @enddate, '1', '1',
                             'ALL', 'ALL', 'ALL', 'ALL', '1', '1', 
                               '1', '1', '1') AS fFinancialDataFull_1
WHERE ReportCategoryID = 62 
```

开始日期为午夜，结束日期为当前日期减去一秒。（参见[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d41d8/8583)）

如果您正在寻找一种方法来轻松地在午夜生成今天的日期，然后生成带有 time 的今天日期的 enddate `23:59:59`，那么您可以创建一个[`Table-Valued Function`](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx).

这种类型的函数可以返回`startdate`和`enddate`基于您传入的值。

如果可能，那么我会更改您当前的函数以接受一个日期参数，然后在该函数内部您可以调用一个将返回日期的新函数。

新功能将与此类似：

```
create function dbo.GetStartEndDates
(
    -- pass in the date
    @dt datetime
)
RETURNS @dates table
(
    StartDate datetime,
    EndDate datetime
) 
AS
BEGIN
    insert into @dates
    select CAST(CAST(@dt AS DATE) as datetime) startdate,  -- returns yyyy-mm-dd 00:00:00.000
        CAST(@dt AS DATE) + CAST('23:59:59' as datetime) enddate -- returns yyyy-mm-dd 23:59:59.000

    return
END 
```

那么您当前的功能将包括：

```
alter function dbo.fFinancialDataFull
(
   --your list of parameters
   --replace the start/end date with
   @dateValue datetime
)
returns table...
as
begin
   select *
   from yourtable
   cross apply dbo.GetStartEndDates(@dateValue) d -- this will return both start/end date
end 
```

然后，您可以在其余查询中使用开始/结束日期。

当您调用当前函数时，您将传入`getdate()`或任何日期时间作为：

```
select *
from dbo.fFinancialDataFull(param1, param2, getdate(), etc, etc). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:08:01.837

要获取日期，您可以使用以下 SQL 而不是函数：

```
 CAST(CONVERT(VARCHAR,GETDATE(),1) AS DATETIME) 
```

[从MSDN](http://msdn.microsoft.com/en-us/library/ms187928.aspx)上的图表中替换`1`您想要使用的任何格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:51:55.697

如果您只想要没有时间方面的今天日期：

```
Convert(Date,GetDate()) 
```

您可以对任何其他 DateTime 值执行相同的操作并检查相等性，如果它们发生在同一天的任何时候，这将是正确的。

# javascript - 无法读取未定义的属性“值”

> ID：14592134
> 
> 赞同：1
> 
> 时间：2013-01-29T20:57:09.840
> 
> 标签：javascript

我有一个像这样的简单表格：

```
<form method="post" id="login">

Username: <input type="text" value="" name="usr" />
Password: <input type="password" value="" name="pw"/>
<input type="submit" id="log" name="log" value="Login" style="width:250px;"/><br/>

</form> 
```

但我不断收到无法读取我的 javascript 的属性的这一行：

```
var usr = login.usr.value;
var pw = login.pw.value; 
```

我收到此错误的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:01:40.630

尝试为您的表单命名并更改您的代码，如下所示：

```
<form method="post" id="login" name="login">

Username: <input type="text" value="" name="usr" />
Password: <input type="password" value="" name="pw"/>
<input type="submit" id="log" name="log" value="Login" style="width:250px;"/><br/>

</form> 
```

在你的 javascript 中：

```
var usr = document.login.usr.value; 
```

您可以[在此处查看（jsfiddle 链接）](http://jsfiddle.net/QsXK7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:18:18.940

适用于所有浏览器：

```
 document.forms["login"].elements["usr"].value;
   document.forms["login"].elements["pw"].value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:59:40.633

`<input type="text" value="" name="usr" />`不会神奇地变成变量`login.usr`，需要根据 DOM 定义值。

```
var usr = document.login.usr.value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T21:02:10.783

尝试使用`getElementsByName`：

该`getElementsByName()`方法访问具有指定名称的所有元素。

```
var usr = document.getElementsByName('usr')[0].value;
var pw = document.getElementsByName('pw')[0].value; 
```

[http://jsfiddle.net/L3RvL/](http://jsfiddle.net/L3RvL/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T21:13:56.100

方法一：

```
<form method="post" id="login">
  Username: <input type="text" value="" name="usr" />

var form = document.getElementById("login"); //DOM access
var usr = form.elements["usr"]; // Forms access 
```

方法 2 - 无效的 xhtml：

```
<form method="post" name="login">
  Username: <input type="text" value="" name="usr" />

var form = document.login; // Forms access
var usr = form.elements["usr"]; // Forms access 
```

方法三：

```
<form method="post">
  Username: <input type="text" value="" name="usr" />

var usr = document.getElementsByName("usr")[0]; // first field on page named this 
```

方法 4： - 这些天首选，因为 ID 必须是唯一的 - 如果页面上有更多带有 usr 的表单需要相同的验证，则用处不大

```
<form method="post">
  Username: <input type="text" value="" id="usr" name="usr" />

var usr = document.getElementById("usr"); 
```

# java - Java 的 NIO2 API 是否可以替代使用 NIO 编写单线程多路复用服务器？

> ID：14592137
> 
> 赞同：3
> 
> 时间：2013-01-29T20:57:16.617
> 
> 标签：java, nio, multiplayer, nio2, mud

我正在学习如何使用NIO写一个泥（我不排除高级库，但我也想学习低级操作）。

在我的阅读中，我了解了 NIO2。因为我已经在这个项目中使用了 Java 7，所以我想知道我用来编写单线程多路复用服务器的 NIO 操作是否不会在 NIO2 中被替换——也就是说，可能会变得更简单。据我所知，NIO2 的相关部分是它的异步类。但是，我没有足够的经验来知道这些是必要的还是只是我不一定需要的不同/新的抽象来代替基本的多路复用器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:31:54.733

> 也许变得更简单了。

恕我直言，NIO2 比 NIO 更复杂，就像 NIO 比普通 IO 更复杂。

它支持异步 IO 调用，但这些调用更难有效使用。NIO 或普通 IO

如果您有 Inifiniband，NIO2 可以为您提供更低的延迟和更高的吞吐量。如果你有普通的以太网，我发现它没有太大的不同。

如果您想要简单，请使用普通 IO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:22:03.093

它是一种替代而不是替代，使用不同的编程模型。如果有的话，我不会说它明显更简单。如果您想要简单，请使用 java.net 和线程。

# asp.net - 将面板控件的内容存储到 Cookie 中

> ID：14592139
> 
> 赞同：0
> 
> 时间：2013-01-29T20:57:22.233
> 
> 标签：asp.net, cookies

我创建了一个页面，允许用户通过显示/隐藏按钮选择显示或隐藏其内容部分。单击显示/隐藏按钮后，嵌套的面板/内容根据所选按钮变为可见或不可见，然后用户可以通过单击保存按钮来保存页面。问题 - （没有错误）但是，页面没有将用户更改保存到 cookie 中。该页面包含 2 个面板控件，它们嵌套在一个主面板控件中。

```
//Front End code - The save button
<asp:Button ID="savButton" runat="server" Text="Save" onclick="savButton_Click" />

//psuedo code - The Panels
<asp:Panel ID="pnlSaveContent" runat="server"> //main Panel control 
     <asp:Panel ID="pnlWeatherAppCtrl" runat="server"> // panel content 1
         <div>Weather App Content</div>
     </Panel>
     <asp:Panel ID="StockAppCtrl" runat="server">   // panel content 2
           <div>Stock App Content</div>
      </Panel>
</Panel>

//Back-end code:
    protected void Page_Load(object sender, EventArgs e)
     {
        //get the cookie       
        if ((Request.Cookies["preferences"] != null))
        {
            pnlSaveContent.ID = Request.Cookies["preferences"]["savePg"];
        }
     }

 //set cookie
    protected void savButton_Click(object sender, EventArgs e)
    {
        Response.Cookies["preferences"]["savePg"] = pnlSaveContent.ID;
        Response.Cookies["preferences"].Expires = DateTime.MaxValue;
    }

 //end code 
```

...问题：页面未保存主面板控件的更改。有人可以就我做错了什么提供一些指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:04:44.977

不要忘记使用以下命令保存 cookie `Response.Cookies.Add`：

```
protected void savButton_Click(object sender, EventArgs e)
{
    HttpCookie c = Request.Cookies["preferences"] != null ? 
        Request.Cookies["preferences"] :
        new HttpCookie("preferences");
    c.Values["savePg"] = pnlSaveContent.ID;
    c.Expires = DateTime.MaxValue;
    Response.Cookies.Add(c);
} 
```

至于您的评论...我不太确定您要做什么，但也许就是这样。这将根据 cookie 的值设置面板的可见性（可见性是`false`ID 是否与 cookie 的值匹配）。

```
protected void Page_Load(object sender, EventArgs e)
{
    //get the cookie       
    if ((Request.Cookies["preferences"] != null))
    {
        pnlSaveContent.Visible = !(pnlSaveContent.ID == Request.Cookies["preferences"]["savePg"]);
    }
} 
```

# jquery - 单击链接时，jsrcollpane 滚动到特定的 div

> ID：14592141
> 
> 赞同：0
> 
> 时间：2013-01-29T20:57:29.970
> 
> 标签：jquery, jscrollpane, jquery-jscrollpane

单击链接时，如何让 jsrcollpane 滚动到特定的 div？我在滚动窗格中有 div 的 ID，并在页面上有要控制滚动的链接。我找到了如何滚动特定数量的像素，但没有找到如何滚动到 div 坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:04:41.903

你可以使用 jQueryscrollpane 的 API
[http://jscrollpane.kelvinluck.com/api.html](http://jscrollpane.kelvinluck.com/api.html)

有方法`scrollToElement`或 例子：`scrollTo``scrollY`

```
 api.scrollToElement('#elem', false, true, 115); 
```

# vb.net - VB.net 中的下一步按钮

> ID：14592143
> 
> 赞同：1
> 
> 时间：2013-01-29T20:57:40.083
> 
> 标签：vb.net, winforms

打开下一个表单（VB.net Windows 表单）后如何关闭我的表单，如“下一步”按钮

我试过`Form2.show()`它显示form2但没有关闭form1，如果我输入`me.close()`，整个项目就会停止

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T21:00:41.660

如果您只想`Form2`成为可见，您可以`Form1`在显示时隐藏`Form2`，然后`Form1`在关闭时再次显示`Form2`。正在发生的事情是，一旦您关闭`Form1`您的程序将退出，请参见下面的编辑。

像这样的东西。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim frm2 As New Form2
    AddHandler frm2.FormClosed, AddressOf Form2Closing
    frm2.Show()
    Me.Hide()

End Sub

Private Sub Form2Closing(sender As Object, e As FormClosedEventArgs)
    Me.Show()
    RemoveHandler DirectCast(sender, Form2).FormClosed, AddressOf Form2Closing
End Sub 
```

* * *

如果您只是想关闭`Form1`并且一旦打开就不再返回`Form2`，您可以将项目设置从**启动表单关闭时**（这是默认设置）更改为**最后一个表单关闭时**，然后您可以关闭您的第一个表单而不关闭您的应用程序.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:59:21.137

您必须指定要关闭的内容：

```
 Form1.Close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:26:38.777

您最好**不要**在打开另一个表单后关闭您的表单，除非您希望另一个也关闭。否则，它将导致所有权和可见性的副作用，从长远来看，您真的不想处理这些副作用。

这正是`me.close()`在您的主窗体上停止您的项目的原因。您只需考虑 Microsoft 放入 Winforms 应用程序的范例。如果你不这样做，你肯定会遇到麻烦。

相反，您可能正在寻找向导控件。

# ruby-on-rails - 为什么这不会被调用？

> ID：14592145
> 
> 赞同：0
> 
> 时间：2013-01-29T20:57:45.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用名为“auto_html”（[https://github.com/dejan/auto_html](https://github.com/dejan/auto_html)）的 gem
，我确实在我的用户模型中设置了这个。
然而，它似乎并没有取代这种情况。
这意味着当用户保存他自己的配置文件时不会调用它。
如何将此应用于更新或新建等操作？

```
AutoHtml.add_filter(:introduction) do |text|
    text.gsub(/http:\/\/.+\.(jpg|jpeg|bmp|gif|png)(\?\S+)?/i) do |match|
        %|<img src="#{match}" alt="max-width:auto"/>|
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:11:54.917

`auto_html_for`是您正在寻找的方法。

`add_filter`用于修改`AutoHtml`自身的行为。为了将其插入单个模型，[文档](https://github.com/dejan/auto_html#example-usage)中有一个非常清晰的示例案例。

```
class Comment < ActiveRecord::Base
  auto_html_for :body do
    html_escape
    image
    youtube(:width => 400, :height => 250)
    link :target => "_blank", :rel => "nofollow"
    simple_format
  end
end 
```

# asp.net - 我的网站需要多次刷新才能显示新内容

> ID：14592146
> 
> 赞同：0
> 
> 时间：2013-01-29T20:57:45.317
> 
> 标签：asp.net, web, browser-cache, page-refresh

我负责更新大型电子商务网站[tedbrownmusic.com。](http://www.tedbrownmusic.com)我们聘请了一名外部 Web 开发人员来编写网站代码，所以我对后端方面不是很熟悉。

**我的问题：**首页需要多次手动刷新才能显示新发布的内容。

首页是一个 ASP.NET 店面，与网站的其余部分（在 Wordpress 上运行）分开。Wordpress 网站可以正常加载，但在首页上，我必须按 F5 多次才能显示新内容（我使用的是最新版本的 Chrome）。在 IE 中，它根本拒绝刷新。缓存必须过期，IE 中的用户才能看到新内容。

网络开发人员说他对此无能为力。但这对我来说似乎不是正常的网站行为。

我曾尝试添加“无缓存”META 标签以强制页面在每次访问时刷新，但它不起作用。

有什么想法吗？我很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:16:11.397

如果您使用的是 css/js 文件，您可以尝试通过更改版本号来强制浏览器加载最新的 CSS 文件。我认为它被称为 css 版本控制。

```
 <link rel="stylesheet" href="yourwebsitescsslocation/style.css?v=1324491378" type="text/css" /> 
```

如果您将 1324491378 更改为其他值，它将强制浏览器再次加载 css 而不是从缓存中加载。您可以使用变更集编号或当前时间戳作为版本号，并确保每次更改 css 时它都会更改。

请参阅下面的文章以获得一些额外的帮助：

[http://www.codeproject.com/Articles/203288/Automatic-JS-CSS-versioning-to-update-browser-cach](http://www.codeproject.com/Articles/203288/Automatic-JS-CSS-versioning-to-update-browser-cach)

# wpf - 单击 CheckBox 时 WP8 LongListSelector 触发 SelectionChanged 事件

> ID：14592147
> 
> 赞同：0
> 
> 时间：2013-01-29T20:57:47.500
> 
> 标签：wpf, xaml, windows-phone-8

我有一个新的 Windows Phone 8 LongListSelector 的简单数据模板，如下所示：

```
<DataTemplate>
    <StackPanel Orientation="Horizontal" Margin="0,-6,0,-10">
        <CheckBox x:Name="ToDoCheckBox" Margin="0" IsChecked="{Binding ItemIsComplete}" Checked="ToDoCheckBox_Checked"/>
        <TextBlock Text="{Binding ItemName}" TextWrapping="NoWrap" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="{StaticResource PhoneFontSizeExtraLarge}"/>
    </StackPanel>
</DataTemplate> 
```

模板中应该还有一些项目，这就是没有使用 CheckBox 的 content 属性的原因。

现在，我在 SelectionChanged 事件上实现了页面导航。问题是，即使单击 CheckBox，SelectionChanged 也会被触发。较早的问题似乎讨论了完全相反的问题。我不希望 SelectionChanged 被解雇。或者，至少我不希望页面在 CheckBox 事件上导航。我只想让复选框选中或未选中的事件。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:02:00.673

选择是触发导航的不好方法。无需深入研究，您可以通过在模板中的其他项目被点击时触发导航来避免这种情况。
例如

```
<DataTemplate>
    <StackPanel Orientation="Horizontal" Margin="0,-6,0,-10">
        <CheckBox x:Name="ToDoCheckBox" Margin="0" IsChecked="{Binding ItemIsComplete}" Checked="ToDoCheckBox_Checked"/>
        <TextBlock Text="{Binding ItemName}"
                   TextWrapping="NoWrap"
                   Style="{StaticResource PhoneTextExtraLargeStyle}"
                   FontSize="{StaticResource PhoneFontSizeExtraLarge}"
                   Tap="TriggerNavigationToThisItem"/>
    </StackPanel>
</DataTemplate> 
```

以上假设您有一个调用的事件`TriggerNavigationToThisItem`将触发导航。您还可以在 Item 上添加命令并绑定到该命令以触发导航。

如果您有一个更复杂的模板，您可以将它们封装在一个容器中（如 a `Grid`），然后让它触发导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:46:28.147

您可以检查每个选择更改事件的原始来源。如果是复选框 - 只需跳过执行。

还。根本不要使用本机“LongListSelector.Selected”属性和选择事件。它完全没有可扩展性（例如多选）。使用您自己的 Tap 事件处理来实现它。

# ruby - 为什么在使用 Ruby 的 json gem 解析 JSON 时会出现“意外令牌”错误？

> ID：14592149
> 
> 赞同：0
> 
> 时间：2013-01-29T20:57:58.940
> 
> 标签：ruby, json, nokogiri

我正在解析的 JSON 对象位于[http://api.4chan.org/3/catalog.json](http://api.4chan.org/3/catalog.json)

这是我的 Ruby 代码：

```
['open-uri','nokogiri','json'].each{|g| require g}

json_test = File.open('json_test.JSON','r').read
board_cat_body = Nokogiri::HTML(open('http://api.4chan.org/3/catalog.json'))

puts JSON.parse(board_cat_body) 
```

结果（它很长，所以我把它的一部分拿出来）：

```
C:/Ruby193/lib/ruby/1.9.1/json/common.rb:148:in `parse': 387: unexpected token at '{"no":248019,"sticky":1,"closed":1,"now":"12\/19.... 
```

[但是，如果我将http://api.4chan.org/3/catalog.json](http://api.4chan.org/3/catalog.json)的内容复制并粘贴到本地 JSON 文件中并从该本地 JSON 文件中解析，则没有问题。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:16:44.567

删除 Nokogiri 调用。JSON 不是 HTML。

```
['open-uri','json'].each{|g| require g}
json = JSON.parse(open('http://api.4chan.org/3/catalog.json').read)
puts json.inspect 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:17:56.433

您输入的文档`board_cat_body`不是 JSON 文档，而是 HTML，如果您打印它就可以看到。所以，我建议以这种方式下载文档：

```
require 'net/http'
require 'json'

url = URI.parse('http://api.4chan.org/3/catalog.json')
req = Net::HTTP::Get.new(url.path)
res = Net::HTTP.start(url.host, url.port) { |http| http.request(req) } 
```

并解析它：

```
puts JSON.parse(res.body) 
```

# rdf - Virtuoso 中的雷德兰语境

> ID：14592152
> 
> 赞同：0
> 
> 时间：2013-01-29T20:58:07.517
> 
> 标签：rdf, virtuoso, redland

我正在使用 Redland Python 绑定向 Virtuoso 添加三元组，`RDF.Storage(storage_name='virtuoso')`并试图了解上下文是如何实现的。我得到了一些令人惊讶的结果。

如果我添加三元组：

```
model.add_statements(context=something) 
```

我可以通过以下方式将它们全部取回：

```
model.as_stream(context=something) 
```

正如预期的那样。但是，如果我创建一个具有相同存储的新模型并尝试以下操作：

```
for stmt in model: 
    print stmt 
```

我没有得到任何结果，好像模型是空的。另外，当我尝试以下操作时：

```
model.remove_statements_with_context(context=something)
for stmt in model.as_stream(context=something): 
    print stmt 
```

我仍然得到了所有的三元组；他们没有像我预期的那样被删除。

最后，当我尝试应该匹配一些存储在上下文中的三元组的简单 SPARQL 查询时，我没有得到任何结果。

谁能帮助我了解 Redland contexts 和 Virtuoso 的幕后情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:21:30.387

您可以使用 Virtuoso [trace_on() 函数](http://docs.openlinksw.com/virtuoso/fn_trace_on.html)来启用将传递给 Virtuoso 的查询等记录到`virtuoso.log`文件中以供查看。

这应该可以帮助您查看 Redland 层传递的内容以及可能发生的任何错误等。

据我所知，我们还没有对 Redland Python 绑定进行任何测试，但我们在[Virtuoso 开源树](https://github.com/openlink/virtuoso-opensource/)中确实有一个`C`基于测试程序，[用于测试我们的 Redland Storage 提供程序](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFDriverRedland)。

我希望这有帮助 ...

# php - PHP脚本不起作用

> ID：14592156
> 
> 赞同：-3
> 
> 时间：2013-01-29T20:58:12.663
> 
> 标签：php, mysql

你好我有一个问题：我不知道为什么这个 php 脚本不起作用：

```
<?php

 echo "VERSION 1.0";

 ini_set('display_errors',1); 
 error_reporting(E_ALL);

$username ="user";
$password = "pw";
$database = "db";
$mysqldb = "dbName";

echo "INIT OF VARIABLES END";

$conn = mysql_connection("host",$username,$password) or die 
("Failed to connect"); 

echo "CONN FINISCHED";

mysql_select_db("dbSave",$conn);

echo "SELECT DONE";

$login = $_POST["login"];
$pw = $_POST["pw"];

echo "GOT DATA:$login, $pw";

$query = "INSERT INTO dbSave (login, pw) VALUES ("$login","$pw");
mysql_query($query);

echo "EINTRAG GEMACHT";

?> 
```

我只是得到一个空白页，甚至没有错误消息（更改了变量名）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:00:09.690

1.  **确保您打开了错误**

2.  您可以在 markdown 解析器中看到您的问题：

    ```
    $query = "INSERT INTO dbSave (login, pw) VALUES ("$login","$pw");
    mysql_query($query);

    echo "EINTRAG GEMACHT"; 
    ```

    您需要转义双引号！

    ```
    $query = "INSERT INTO dbSave (login, pw) VALUES (\"$login\",\"$pw\");
    mysql_query($query);

    echo "EINTRAG GEMACHT"; 
    ```

# c# - 在 ObservableCollection 上实现 AddRange 并适当支持 DataBinding

> ID：14592157
> 
> 赞同：3
> 
> 时间：2013-01-29T20:58:17.677
> 
> 标签：c#, data-binding, windows-phone-8, observablecollection, addrange

我希望我自己的后代`ObservableCollection`支持`AddRange`方法。这是我目前拥有的：

```
public class ObservableCollectionPlus<T> : ObservableCollection<T>
{
    public void InsertRange(IEnumerable<T> items)
    {
        this.CheckReentrancy();
        foreach (var item in items) Items.Add(item);

        var type = NotifyCollectionChangedAction.Reset;
        var colChanged = new NotifyCollectionChangedEventArgs(type);
        var countChanged = new PropertyChangedEventArgs("Count");

        OnPropertyChanged(countChanged);
        OnCollectionChanged(colChanged);
    }
} 
```

我对这里到底发生了什么以及为什么会引发这些事件知之甚少。这是我在对 google 和 stackoverflow 进行一些研究后组装的一个解决方案。

现在，如果我绑定我的类的一个实例然后说，在通过to`LongListSelector`动态添加项目之后，绑定的滚动位置被发送到它的顶部。`InsertRange``ObservableCollectionPlus``LongListSelector`

如果我以这种标准方式添加项目：`foreach (var item in items) collection.Add(item);`then`LongListSelector`的位置不会移动。但当然，这样我会得到不希望的 DataBinding 通知开销。

显然，我当前的解决方案有问题。我怎样才能实现`InsertRange`它的行为完全一样`foreach (var item in items) collection.Add(item);`，但只会触发一次 DataBinding 通知，并且不会对绑定对象的滚动位置做奇怪的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:16:12.447

可能是因为您发送了`NotifyCollectionChangedAction.Reset`通知，也许只是`NotifyCollectionChangedAction.Add`可行，也许:)

```
public class ObservableRangeCollection<T> : ObservableCollection<T>
{
    public void AddRange(IEnumerable<T> collection)
    {
        foreach (var i in collection)
        {
            Items.Add(i);
        }
        OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, collection.ToList()));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:49:33.370

我最近在一个项目中使用了它...

```
public class RangeObservableCollection<T> : ObservableCollection<T>
{
    private bool _suppressNotification = false;

    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        if (!_suppressNotification)
            base.OnCollectionChanged(e);
    }

    public void AddRange(IEnumerable<T> list)
    {
        if (list == null)
            throw new ArgumentNullException("list");

        _suppressNotification = true;

        foreach (T item in list)
        {
            Add(item);
        }
        _suppressNotification = false;
        OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-05T14:19:09.483

您在使用 DataBinding 时遇到的问题可能与您没有[根据源代码](https://referencesource.microsoft.com/#system/compmod/system/collections/objectmodel/observablecollection.cs)在 ObservableCollection 中为索引器（属性名称“Item []”）引发 PropertyChanged 的​​事实有关。

您还可以[在 GitHub 上查看](https://github.com/jamesmontemagno/mvvm-helpers/blob/release-1.3.0/MvvmHelpers/ObservableRangeCollection.cs)James Montemagno的*ObservableRangeCollection*的一个很好的实现，它继承自*ObservableColection*并包括*AddRange*和*ReplaceRange*方法以及 DataBinding 所需的所有 PropertyChaged 和 CollectionChanged 通知。

 **** * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-09T23:07:34.173

我花了很长时间，问题总是与传递给 NotifyCollectionChangedEventArgs ctor 的参数有关。根据动作的不同，有许多不同的 ctor 采用不同的参数。以下似乎最终对我有用： [https ://github.com/lolluslollus/Utilz/blob/master/Utilz/SwitchableObservableCollection.cs](https://github.com/lolluslollus/Utilz/blob/master/Utilz/SwitchableObservableCollection.cs)***

# ios - 通过 NSURLRequest 获取 Facebook Open Graph 数据

> ID：14592158
> 
> 赞同：0
> 
> 时间：2013-01-29T20:58:19.433
> 
> 标签：ios, facebook-graph-api, nsurlrequest

如何使用 Graph API 从 Graph API 检索数据`NSMutableURLRequest`？

我已经有一个有效的访问令牌，我需要获取基本的用户信息，例如生日、ID、图片或名字/姓氏。

在帐户框架中，您可以使用参数创建一个请求，`+ requestForServiceType:requestMethod:URL:parameters:`所以我刚刚尝试过`- setValue:forHTTPHeaderField:`，但它似乎不起作用......

只要我在请求 URL 中写下所有必要的属性，它就可以正常工作。也许有一个我可以使用的请求 URL 方案或任何其他方式来提交执行请求所需的属性。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:56:22.433

您可以像这样创建一个简单的 GET 请求并包含 access_token。您可以使用 [NSString stringWithFormat:] 插入 ACCESS_TOKEN

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me?access_token=ACCESS_TOKEN&fields=id,name,birthday"]]]; 
```

# c# - 在主程序中使用 finalvalue 变量时出错

> ID：14592159
> 
> 赞同：-5
> 
> 时间：2013-01-29T20:58:22.913
> 
> 标签：c#

```
 static void Main(string[] args)
    {
        Console.WriteLine("Please enter a number and find itx  x multiple");
        int user_Input = int.Parse(Console.ReadLine());
        int final_Value;
        for (int i = 1; i < user_Input; i++)
        {
            final_Vaulue = user_Input * i;
        }
        Console.WriteLine("your desired number is : {0}", final_Value);
        Console.ReadLine();

    } 
```

我改为尝试这样做，但再次出现编译错误，说明使用了无符号变量 final_Value。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:01:04.983

您的 final_Value 变量未初始化为任何内容。如果用户输入 0，for 循环不会循环，因此 final_value 永远不会被设置为任何值。例如，您可以将 final_Value 初始化为 0：

```
int final_Value = 0; 
```

# python - 使用内部 werkzeug 开发服务器部署烧瓶

> ID：14592161
> 
> 赞同：4
> 
> 时间：2013-01-29T20:58:42.873
> 
> 标签：python, deployment, flask, werkzeug

为什么[不建议在生产中使用 flask/werkzeug 内部开发网络服务器](http://werkzeug.pocoo.org/docs/serving/)？会出现什么样的问题？

我之所以问，是因为在工作中我被迫这样做并使用 make shift cron 每天重新运行服务！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:19:06.043

如果您必须每天使用 cron 作业来杀死并重新启动它，那么您已经发现使用 Flask 开发服务器的一个*主要问题。*开发服务器不是为稳定性、寿命、可配置性、安全性、速度或开发过程中的便利性而编写的。

正确的 WSGI 设置会更快，可以正确处理多个连接，并且对您来说最重要的是，定期重新启动您的应用程序进程以清除任何可能堆积的垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T04:39:10.307

我在响应处理程序中有一个没有超时的网络调用。出了点问题，它等待了一段时间（我正在使用该`requests`模块），然后显然再也没有恢复。

由于 Werkzeug 服务器只有一个线程，整个开发服务器变得完全不可用。

# django - 为多人跨平台应用程序设计后端软件

> ID：14592166
> 
> 赞同：0
> 
> 时间：2013-01-29T20:58:49.333
> 
> 标签：django, api, backend

我目前处于我的第一个应用程序的初始设计阶段。

在我的应用程序中，会有包含 1-5 个用户的单独会话。

我需要能够跟踪每个用户的 gps 位置，并能够将它们推送给每个用户。每个用户都将拥有会话中每个其他用户最近报告的位置。

将在数据集上完成其他计算，但那将是客户端，服务器应该只需要处理用户位置（和用户名）的推送和拉取。

由于应用程序的性质，我预测 90% 的会话不应持续超过 2 小时，服务器可能会结束 24-48 小时以上的会话（一旦应用程序的实际测试开始，我会更好地了解会话应该持续多长时间）。

我正在考虑使用 django 构建一个 API，并将所有数据存储在程序本身中，而不是使用数据库，因为这应该更快，而且我认为没有必要存储数据，因为它有这样的寿命短。

这是一个好的起点吗？有什么我应该考虑或考虑的吗？我对设计后端软件完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:45:50.120

虽然一开始性能甚至可能不是问题，但一旦达到一定的负载，您可以做一些事情：

*   将所有会话数据保存在一个模型中，即使您正在对数据库进行一些非规范化（将冗余信息放入数据库）。这样，您只需对数据库进行一次读取，而无需昂贵的 JOIN
*   使用 Django 缓存框架 ( [https://docs.djangoproject.com/en/dev/topics/cache/](https://docs.djangoproject.com/en/dev/topics/cache/) ) 缓存视图，因此多次读取相同数据不必访问数据库
*   在开始优化之前，请分析您的代码以查看性能瓶颈的真正位置。有时您会惊讶于哪些操作是昂贵的，哪些不是。

# hadoop - 在 hive 0.9 中创建索引

> ID：14592169
> 
> 赞同：0
> 
> 时间：2013-01-29T20:59:16.173
> 
> 标签：hadoop, indexing, hive

我正在尝试在 Hive 0.9 中的表上创建索引。一个表有 10 亿行，另一个有 3000 万行。我使用的命令是（除了创建表等）

```
 CREATE INDEX DEAL_IDX_1 ON TABLE DEAL (ID) AS 
  'org.apache.hadoop.hive.ql.index.compact.CompactIndexHandler'
  WITH DEFERRED REBUILD;

  alter index DEAL_IDX_1 ON DEAL rebuild;

  set hive.optimize.autoindex=true;
  set hive.optimize.index.filter=true; 
```

对于 30 磨坊。行表，重建过程看起来还不错（映射器和减速器都完成了），直到最后它打印

```
 Invalid alter operation: Unable to alter index.
  FAILED: Execution Error, return code 1 
  from org.apache.hadoop.hive.ql.exec.DDLTask 
```

检查日志，它有错误

```
java.lang.ClassNotFoundException: org.apache.derby.jdbc.EmbeddedDriver" 
```

不知道为什么会遇到这个错误，但无论如何，我添加了 derby-version.jar：

```
add jar /path/derby-version.jar 
```

报告的错误已解决，但仍然出现另一个错误：

```
org.apache.hadoop.hive.ql.exec.FileSinkOperator: 
StatsPublishing error: cannot connect to database 
```

不知道如何解决问题。不过，我确实在 hive/warehouse 下看到了创建的索引表。

对于 10 亿行的表格，情况就另当别论了。映射器刚刚卡在 2% 左右。并显示错误

```
FATAL org.apache.hadoop.mapred.Child: Error running child : 
java.lang.OutOfMemoryError: Java heap space 
```

我试图强制执行最大堆大小以及最大映射内存（请参阅某处提到的设置，但未在配置单元的配置设置中）：

```
set mapred.child.java.opts =  -Xmx6024m
set mapred.job.map.memory.mb=6000;
set mapred.job.reduce.memory.mb=4000; 
```

但是，这无济于事。映射器仍会因相同的错误而卡在 2%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T19:17:32.483

我在索引创建和配置单元/仓库中遇到了类似的问题，但是整个过程都失败了。我的 index_name 是 TypeTarget（你的是 DEAL_IDX_1），在尝试了很多天不同的方法后，使 index_name 全部小写（typetarget）解决了这个问题。我的问题出在 Hive 0.10.0 中。

此外，找不到类和 StatsPublishing 问题是因为默认情况下 hive.stats.autogather 已打开。在 hive-site.xml 中关闭 (false) 应该可以解决这些问题。

希望这可以帮助任何寻求快速修复的人。

# c++ - 将方法中的指针分配给子类 C++

> ID：14592174
> 
> 赞同：0
> 
> 时间：2013-01-29T20:59:28.850
> 
> 标签：c++, pointers, subclass

所以我有一个 C++ 函数，我将一个指向基类的指针传递给它，例如：

```
void DoStuffAndAssignPtr(MyBase* ptr)
{
    MyBase* p;
    //do stuff
    if (stuff was awesome) p = new MyAwesome();
    else p = new MyBase();
          //vftable of p before the return is MyAwesome
    (*ptr) = (*p);
} 
```

现在我们需要调用一些“MyAwesome”和“MyBase”实现不同的虚拟方法。但是，在检查返回值时，如下所示：

```
void mainly()
{
    MyBase* passMe = new MyBase();
    DoStuffAndAssignPtr(passMe);
    //now passMe is always being returned with MyBase's vftable
} 
```

我们可以看到“passMe”始终是“MyBase”（就在 VS 中调试时的 vftable 显示而言）。谁能提供任何关于为什么会发生这种情况的指导，以及我如何确保“passMe”将调用虚拟方法的“MyAwesome”实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:08:02.240

问题在于使用`(*ptr)=(*p)`. 你应该使用`ptr=p`.

只有指针和引用具有多态性。当您使用取消引用（星号 *）时，您将丢失此属性，并且仅将基础部分从 复制`p`到`ptr`。这是因为`ptr`只有那部分信息的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T21:11:36.030

您有对象切片问题，下面的语句将 MyAwesome 对象切片到 MyBase：

```
(*ptr) = (*p) 
```

您只传递`MyBase*`给 DoStuffAndAssignPtr 并尝试分配一个只会覆盖函数参数副本的新指针。您需要改为传递指针的引用。

```
void DoStuffAndAssignPtr(MyBase*& ptr);
                                ^^^ 
```

此外，由于 passMe 已经由新的外部 DoStuffAndAssignPtr 分配，因此您在 DoStuffAndAssignPtr 内为 ptr 创建了另一个内存，这将导致内存泄漏。

更好的解决方案是：

```
MyBase* MakeAClass()
{
   if (stuff was awesome)
   {
       return new MyAwesome();
   }
   return new MyBase();
} 

int main()
{
  MyBase* passMe = MakeBase()
} 
```

# php - 根据日期时间字段提取条目并按月和年组织

> ID：14592177
> 
> 赞同：0
> 
> 时间：2013-01-29T20:59:33.263
> 
> 标签：php, mysql, sql, group-by

我有一个名为“任务”的表，其中包含一堆信息（分配给谁、创建日期、到期日期等）

“task_due_date”字段是一个普通的日期时间字段。我想以此来组织所有的任务；例如，如果您在 2013 年 3 月有 3 个任务，在 4 月有 4 个任务，我想将它们分成每个月的 div，以便它们可以折叠以便于阅读。

我想知道最好的方法是什么？我怎样才能让它永不过时？我知道我可以为每年手动编写 PHP 循环（如果月份为 1，则执行此操作，如果月份为 2 执行此操作等），但似乎必须有一种更有效的方法。

它还需要注意年份，因此 2013 年 1 月应该比 2014 年 1 月有所下降。

我梦想的解决方案是：

*   2013 年 3 月：任务 1、任务 2
*   2013 年 4 月：任务 1
*   2013 年 5 月：任务 1、任务 2

这是我的任务表的 SQL：

```
CREATE TABLE IF NOT EXISTS `tasks` (
`ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
`task_status` int(11) unsigned NOT NULL DEFAULT '1',
`task_creation_date` datetime NOT NULL,
`task_due_date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
`task_completed_date` datetime DEFAULT NULL,
`task_priority` bigint(20) unsigned NOT NULL,
`task_assignment` int(11) unsigned NOT NULL,
`task_description` longtext NOT NULL,
`task_type` bigint(20) unsigned NOT NULL DEFAULT '0',
PRIMARY KEY (`ID`),
KEY `task_type` (`task_type`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2698 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:29:40.870

如果会有很多任务，您可能会考虑生成“每月”div 并通过 AJAX 加载检索实际任务。

您将能够通过使用查询对它们进行分组来显示每年/每月的任务数量；

```
SELECT 
   COUNT(*) AS number_of_tasks, 
   YEAR(task_due_date) AS task_year, 
   MONTH(task_due_date) AS task_month 
FROM tasks 
GROUP BY task_year, task_month; 
```

这样，创建 div，然后使用此查询检索（通过 AJAX）所选年/月内的所有任务

```
SELECT *
FROM tasks 
   WHERE YEAR(task_due_date) = 2013, 
   AND MONTH(task_due_date) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:49:47.900

这将为您提供接近您的“梦想解决方案”，尽管我可能认为这有点过于字面：

```
SELECT
  CONCAT(
    DATE_FORMAT( `task_due_date`, '%M %Y' ),
    ': ',
    GROUP_CONCAT( CONCAT( 'Task ', `ID` ) SEPARATOR ', ' )
  ) AS `tasks_per_month`
FROM
  `tasks`
GROUP BY
  DATE_FORMAT( `task_due_date`, '%M %Y' )
ORDER BY
  `task_due_date`; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:21:12.843

您需要进行`group by`SQL 查询

看到这个可能会有所帮助

[MySQL按天分组，日期时间混合来自不同月份的相同日期](https://stackoverflow.com/questions/9849304/mysql-group-by-day-with-datetime-mixing-same-dates-from-different-months)

# c++ - C++ 跨平台开发以避免预处理器指令

> ID：14592179
> 
> 赞同：9
> 
> 时间：2013-01-29T20:59:34.283
> 
> 标签：c++, cross-platform

我需要维护一个支持在 Linux 和 Windows 上运行的项目。一些使用像这样的预处理器指令的代码很好。

```
#ifdef _WIN32 // _WIN32 is defined by Windows 32 compilers
#include <windows.h>
#else
#include <unistd.h>
#endif 
```

但有些是实际的实现，我想阻止使用预处理器指令。

```
void Foo()
{

    #ifdef _WIN32 // _WIN32 is defined by Windows 32 compilers
    code for windows 
    #else
    code for Linux
    #endif

    some common code...

    #ifdef _WIN32 // _WIN32 is defined by Windows 32 compilers
    code for windows again
    #else
    code for Linux again
    #endif

} 
```

因此，事情变得复杂且难以维护。有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T21:11:02.300

传统的方法是在包装函数中“隐藏”特定于任何操作系统的所有代码 - 您可以在具有更高级别功能的完整函数中执行此操作 - 例如，具有基于给定路径返回所有目录条目的函数作为输入，或实现各个基本功能，例如, `start_read_directory(path)`-这只是一个示例功能，相同的原理可以应用于几乎任何系统特定功能。将其包装得足够多，您将无法说出您正在编程的目的。`read_dir_entry()``end_read_directory()`

从本质上讲，如果您在代码本身中有很多#ifdef，那么您就做错了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T21:15:44.817

处理来自构建系统的操作系统细节，而不是代码。例如，有两个版本的 Foo.cpp：一个在 Linux 上编译，另一个在 Windows 上编译。理想情况下，头文件将是通用的，并且所有函数签名都相同。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-29T21:11:12.887

您可以使用工厂模式的简化版本。

有一个通用的接口

```
class MyClass
{
public:
    virtual void Foo() = 0;
}; 
```

并且为每个平台创建一个特定的类

```
#import <windows.h>
class MyClassWindows : MyClass
{
public:
    virtual void Foo() { /* Do something */ }
};

#import <linux.h>
class MyClassLinux : MyClass
{
public:
    virtual void Foo() { /* Do something */ }
}; 
```

然后当你需要这个类时，你使用你的工厂：

```
class MyClassFactory
{
public:
    static MyClass* create()
    {
        #if defined _WIN32
            return new MyClassWindows();
        #elif defined _LINUX
            return new MyClassLinux();
        #endif
    }
} 
```

此方法有许多变体，包括在每个特定于平台的类的 .cpp 中定义 MyClassFactory::create 方法，并且只为适当的平台编译 .cpp。这避免了所有预处理指令，通过选择正确的实现文件进行切换。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-29T21:18:58.657

一种常见的模式是提供与系统无关的头文件和特定于平台的实现文件。

标头中没有特定于平台的内容：

```
class Foo
{
   ...
}; 
```

在两个不同的实现文件中， foo_linux.cpp

```
 Foo::Foo() { .. linux code } 
```

foo_windows.cpp

```
Foo::Foo() { .. windows code } 
```

并且可能在 foo.cpp 中实现平台独立

```
void Foo::plat_independent_function() 
```

您的平台构建然后链接 foo.cpp 和 foo_platform.cpp

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T21:24:04.110

实现这一点的一种可能性是使用 PIMPL 习惯用法，您的类只是发布“接口”并声明一个指向实现类的无意义指针（在其黑暗、隐藏和私有的角落），构建系统负责拉在包含 PIMPL 实现的类的正确平台相关代码中。

# php - HMVC 路由中的歧义

> ID：14592181
> 
> 赞同：4
> 
> 时间：2013-01-29T20:59:40.090
> 
> 标签：php, model-view-controller, routing, filesystems, hmvc

我有一个依赖文件系统结构来分派请求的路由机制：

```
function Route($root) {
  $root = realpath($root) . '/';
  $segments = array_filter(explode('/',
    substr($_SERVER['PHP_SELF'], strlen($_SERVER['SCRIPT_NAME']))
  ), 'strlen');

  if ((count($segments) == 0) || (is_dir($root) === false)) {
    return true; // serve index
  }

  $controller = null;
  $segments = array_values($segments);

  while ((is_null($segment = array_shift($segments)) !== true)
    && (is_dir($root . $controller . $segment . '/'))) {
      $controller .= $segment . '/';
  }

  if ((is_file($controller = $root . $controller . $segment . '.php')) {
    $class = basename($controller . '.php');
    $method = array_shift($segments) ?: $_SERVER['REQUEST_METHOD'];

    require($controller);

    if (method_exists($class = new $class(), $method)) {
      return call_user_func_array(array($class, $method), $segments);
    }
  }

  throw new Exception('/' . implode('/', self::Segment()), 404); // serve 404
} 
```

基本上，它尝试将尽可能多的 URL 段映射到目录，将以下段与实际控制器（`.php`具有相同名称的文件）匹配。如果提供了更多段，则第一个定义要调用的操作（回退到 HTTP 方法），其余部分作为操作参数。

问题是（取决于文件系统结构）存在一些歧义。考虑一下：

```
- /controllers
  - /admin
    - /company
      - /edit.php   (has get() & post() methods)
    - /company.php  (has get($id = null) method) 
```

现在模棱两可-当我访问控制器时`domain.tld/admin/company/edit/`，`edit.php`它会为请求提供服务（应该如此），但是`domain.tld/admin/company/`通过`GET`或`domain.tld/admin/company/get/`直接访问会引发 404 错误，因为该`company`段已映射到相应的目录，即使其余段在文件系统中没有映射。我该如何解决这个问题？最好不要在磁盘上投入太多精力。

***SO中已经有很多关于这个问题的类似问题，我查看了其中一些，但我找不到提供可靠和有效解决方案的单一答案。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:51:57.223

对于像这样的关键内容，使用 PHPUnit 之类的测试框架编写测试非常重要。

像这里描述的那样安装它（你需要梨）： [https ://github.com/sebastianbergmann/phpunit/](https://github.com/sebastianbergmann/phpunit/)

我还使用虚拟文件系统，因此您的测试文件夹不会变得混乱：[https ://github.com/mikey179/vfsStream/wiki/Install](https://github.com/mikey179/vfsStream/wiki/Install)

我只是将您的 Route 函数放入一个名为`Route.php`. 在同一个目录中，我现在创建了一个`test.php`包含以下内容的文件：

```
<?php

require_once 'Route.php';

class RouteTest extends PHPUnit_Framework_TestCase {
} 
```

要检查它是否一切正常，请打开命令行并执行以下操作：

```
$ cd path/to/directory
$ phpunit test.php
PHPUnit 3.7.13 by Sebastian Bergmann.

F

Time: 0 seconds, Memory: 1.50Mb

There was 1 failure:

1) Warning
No tests found in class "RouteTest".

FAILURES!
Tests: 1, Assertions: 0, Failures: 1. 
```

如果出现这种情况，PHPUnit 已正确安装并且您已准备好编写测试。

为了使 Route 功能更好地可测试并且减少与服务器和文件系统的耦合，我对其进行了一些修改：

```
// new parameter $request instead of relying on server variables
function Route($root, $request_uri, $request_method) {
  // vfsStream doesn't support realpath(). This will do.
  $root .= '/';
  // replaced server variable with $request_uri
  $segments = array_filter(explode('/', $request_uri), 'strlen');

  if ((count($segments) == 0) || (is_dir($root) === false)) {
    return true; // serve index
  }

  $controller = null;
  $all_segments = array_values($segments);
  $segments = $all_segments;

  while ((is_null($segment = array_shift($segments)) !== true)
    && (is_dir($root . $controller . $segment . '/'))) {
      $controller .= $segment . '/';
  }

  if (is_file($controller = $root . $controller . $segment . '.php')) {
    $class = basename($controller . '.php');
    // replaced server variable with $request_method
    $method = array_shift($segments) ?: $request_method;

    require($controller);

    if (method_exists($class = new $class(), $method)) {
      return call_user_func_array(array($class, $method), $segments);
    }
  }
  // $all_segments variable instead of a call to self::
  throw new Exception('/' . implode('/', $all_segments), 404); // serve 404
} 
```

如果请求索引路由，让我们添加一个测试来检查函数是否返回 true：

```
public function testIndexRoute() {
    $this->assertTrue(Route('.', '', 'get'));
    $this->assertTrue(Route('.', '/', 'get'));
} 
```

因为您的测试类扩展`PHPUnit_Framework_TestCase`了您现在可以使用诸如`$this->assertTrue` 检查某个语句的计算结果是否为真之类的方法。让我们再次运行它：

```
$ phpunit test.php
PHPUnit 3.7.13 by Sebastian Bergmann.

.

Time: 0 seconds, Memory: 1.75Mb

OK (1 test, 2 assertions) 
```

到这个测试通过了！让我们测试是否`array_filter`正确删除了空段：

```
public function testEmptySegments() {
    $this->assertTrue(Route('.', '//', 'get'));
    $this->assertTrue(Route('.', '//////////', 'get'));
} 
```

`$root`如果路由的目录不存在，我们还可以测试是否请求索引路由。

```
public function testInexistentRoot() {
    $this->assertTrue(Route('./inexistent', '/', 'get'));
    $this->assertTrue(Route('./does-not-exist', '/some/random/route', 'get'));
} 
```

为了测试比这更多的东西，我们现在需要包含带有方法的类的文件。因此，让我们在运行每个测试之前使用我们的虚拟文件系统来设置包含文件的目录结构。

```
require_once 'Route.php';
require_once 'vfsStream/vfsStream.php';

class RouteTest extends PHPUnit_Framework_TestCase {

    public function setUp() {
        // intiialize stuff before each test
    }

    public function tearDown() {
        // clean up ...
    } 
```

PHPUnit 对这种事情有一些特殊的方法。该`setUp`方法在此测试类中的每个测试方法之前执行。并且`tearDown`执行了测试方法之后的方法。

现在我使用 vfsStream 创建一个目录结构。（如果您正在寻找一个教程来做到这一点：[https](https://github.com/mikey179/vfsStream/wiki) ://github.com/mikey179/vfsStream/wiki是一个很好的资源）

```
 public function setUp() {
        $edit_php = <<<EDIT_PHP
<?php
class edit {
    public function get() {
        return __METHOD__ . "()";
    }
    public function post() {
        return __METHOD__ . "()";
    }
}
EDIT_PHP;

        $company_php = <<<COMPANY_PHP
<?php
class company {
    public function get(\$id = null) {
        return __METHOD__ . "(\$id)";
    }
}
COMPANY_PHP;

        $this->root = vfsStream::setup('controllers', null, Array(
            'admin' => Array(
                'company' => Array(
                    'edit.php' => $edit_php
                ),
                'company.php' => $company_php
            )
        ));
    }

    public function tearDown() {
        unset($this->root);
    } 
```

`vfsStream::setup()`现在使用给定的文件结构和给定的文件内容创建一个虚拟目录。正如你所看到的，我让我的控制器将方法的名称和参数作为字符串返回。

现在我们可以向我们的测试套件添加更多测试：

```
public function testSimpleDirectMethodAccess() {
    $this->assertEquals("edit::get()", Route(vfsStream::url('controllers'), '/controllers/admin/company/edit/get', 'get'));
} 
```

但是这次测试失败了：

```
$ phpunit test.php
PHPUnit 3.7.13 by Sebastian Bergmann.

...
Fatal error: Class 'edit.php.php' not found in C:\xampp\htdocs\r\Route.php on line 27 
```

所以`$class`变量有问题。如果我们现在使用调试器（或一些）检查 Route 函数中的以下行`echo`。

```
$class = basename($controller . '.php'); 
```

我们可以看到`$controller`变量包含正确的文件名，但为什么要`.php`附加一个？这似乎是一个打字错误。我认为应该是：

```
$class = basename($controller, '.php'); 
```

因为这会删除 .php 扩展名。我们得到了正确的 classname `edit`。

现在让我们测试如果我们请求目录结构中不存在的随机路径是否引发异常。

```
/**
 * @expectedException Exception
 * @expectedMessage /random-route-to-the/void
 */
public function testForInexistentRoute() {
    Route(vfsStream::url('controllers'), '/random-route-to-the/void', 'get');
} 
```

PHPUnit 自动读取此注释并检查`Exception`在执行此方法时是否抛出了异常类型，以及异常的消息是否被`/random-route-to-the/void`

这看起来很有效。让我们检查`$request_method`参数是否正常工作。

```
public function testMethodAccessByHTTPMethod() {
    $this->assertEquals("edit::get()", Route(vfsStream::url('controllers'), '/admin/company/edit', 'get'));
    $this->assertEquals("edit::post()", Route(vfsStream::url('controllers'), '/admin/company/edit', 'post'));
} 
```

如果我们执行这个测试，我们会遇到另一个问题：

```
$ phpunit test.php
PHPUnit 3.7.13 by Sebastian Bergmann.

....
Fatal error: Cannot redeclare class edit in vfs://controllers/admin/company/edit.php on line 2 
```

看起来我们对同一个文件使用`include`/`require`多次。

```
require($controller); 
```

让我们将其更改为

```
require_once($controller); 
```

现在让我们面对你的问题，编写一个测试来检查目录`company`和文件`company.php`是否相互干扰。

```
$this->assertEquals("company::get()", Route(vfsStream::url('controllers'), '/admin/company', 'get'));
$this->assertEquals("company::get()", Route(vfsStream::url('controllers'), '/admin/company/get', 'get')); 
```

正如您在问题中所说，在这里我们得到了 404 异常：

```
$ phpunit test.php
PHPUnit 3.7.13 by Sebastian Bergmann.

.....E.

Time: 0 seconds, Memory: 2.00Mb

There was 1 error:

1) RouteTest::testControllerWithSubControllers
Exception: /admin/company

C:\xampp\htdocs\r\Route.php:32
C:\xampp\htdocs\r\test.php:69

FAILURES!
Tests: 7, Assertions: 10, Errors: 1. 
```

这里的问题是，我们不知道何时进入子目录以及何时使用 .php 文件中的控制器。所以我们需要明确你想要发生的事情。我假设以下，因为它是有道理的。

*   仅当控制器不包含请求的方法时才输入子目录。
*   如果控制器和子目录都不包含请求的方法，则抛出 404

所以不要像这里搜索目录：

```
while ((is_null($segment = array_shift($segments)) !== true)
  && (is_dir($root . $controller . $segment . '/'))) {
    $controller .= $segment . '/';
} 
```

我们需要搜索文件。如果我们发现一个文件不包含请求的方法，那么我们搜索一个目录。

```
function Route($root, $request_uri, $request_method) {
  $segments = array_filter(explode('/', $request_uri), 'strlen');

  if ((count($segments) == 0) || (is_dir($root) === false)) {
    return true; // serve index
  }

  $all_segments = array_values($segments);
  $segments = $all_segments;

  $directory = $root . '/';
  do {
    $segment = array_shift($segments);
    if(is_file($controller = $directory . $segment . ".php")) {
      $class = basename($controller, '.php');
      $method = isset($segments[0]) ? $segments[0] : $request_method;

      require_once($controller);
      if (method_exists($class = new $class(), $method)) {
        return call_user_func_array(array($class, $method), array_slice($segments, 1));
      }
    }
    $directory .= $segment . '/';
  } while(is_dir($directory));

  throw new Exception('/' . implode('/', $all_segments), 404); // serve 404
} 
```

此方法现在按预期工作。

我们现在可以添加更多的测试用例，但我不想更多地扩展它。如您所见，运行一组自动化测试以确保您的函数中的某些内容正常工作非常有用。它对调试也很有帮助，因为您可以知道错误发生的确切位置。我只是想让您开始了解如何进行 TDD 以及如何使用 PHPUnit，以便您可以自己调试代码。

> “授人以鱼，养其一日。授人以渔，养其一生。”

当然，您应该在编写代码之前编写测试。

这里还有一些可能很有趣的链接：

*   PHPUnit 手册：[http ://www.phpunit.de/manual/current/en/](http://www.phpunit.de/manual/current/en/)
*   PEAR 官方网站： http: [//pear.php.net/](http://pear.php.net/)
*   测试驱动开发（TDD）：[http ://en.wikipedia.org/wiki/Test-driven_development](http://en.wikipedia.org/wiki/Test-driven_development)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:14:20.463

尽管您的*魔术*HVMC 方法对开发人员来说很方便.. 它可能会成为一个性能杀手（所有 stats/lstats）。我曾经使用类似的方法将 FS 映射到路由，但后来放弃了魔法，并用一些好的老式硬编码配置取而代之：

```
$controller_map = array(
  '/some/route/' => '/some/route.php',
  '/anouther/route/' => 'another/route.php',
  # etc, etc, ...
); 
```

也许它不像您现有的那样*优雅，并且每次添加/删除控制器时都需要进行一些配置更改（srsly，这不应该是一项常见任务..）但**它*更快，消除了所有歧义，并且摆脱了所有无用的磁盘/页面缓存查找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:44:45.543

抱歉，我没有时间测试我的解决方案，但这是我的建议：

```
while ((is_null($segment = array_shift($segments)) !== true)
    && (is_dir($root . $controller . $segment . '/'))
    && ( (is_file($controller = $root . $controller . $segment . '.php') 
        && (!in_array(array_shift(array_values($segments)), ['get','post']) || count($segments)!=0 ) ) ) {
      $controller .= $segment . '/';
  } 
```

对上述代码的一个简单解释是，如果遇到既是文件又是目录的路由，检查它是否通过*get* / *post*成功，或者它是否是*$segments*数组中的最后一个段。如果是，则将其视为文件，否则，继续将段添加到*$controller*变量。

虽然我给出的代码示例只是我的想法，但它还没有经过测试。但是，如果您在比较中使用此工作流程，您应该能够完成它。我建议您遵循**smassey**的回答并继续为每个控制器声明路由。

***注意***：我在 *array_values* 上使用 *array_shift* 所以我只拉下一个段的值而不篡改*$segments*数组。[编辑]

# php - 更新后重定向用户

> ID：14592186
> 
> 赞同：2
> 
> 时间：2013-01-29T20:59:53.507
> 
> 标签：php, javascript, jquery

我有一个页面，用户将单击更新链接，一旦他们登陆该页面，它将告诉服务器从 API 获取数据并需要几分钟。问题是我不想在页面更新后不断刷新页面以将用户送回。

是否有一个 jQuery 函数将每 10 秒检查一次 PHP 文件，如果 PHP 文件显示示例是，它将重定向它们。

对不起，我是 jQuery 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:02:21.760

设置间隔函数允许您指定一个函数每 x 毫秒运行一次。参数 1 是函数，参数 2 是毫秒。

您可以使用 $.get、$.post 或 $.ajax。查找 jquery 文档或按照下面的示例进行操作。

```
setInterval(function(){
    $.get("phpFile.php",{[insert your params here]},function(serverResponse){
         if(serverResponse ==="yes")
              window.location = "redirect_file.php";
    }
},10000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:05:46.420

只需使用`GET`：

```
function detectChange(){
    $.get('file.php', function(data) {
      if(data == 'example'){
        document.location = 'http://example.com';
      }
    });
    setTimeout(function(){ detectChange(); }, 10000);
}

setTimeout(function(){ detectChange(); }, 10000); 
```

其中`10000`10 秒（以毫秒为单位）。查看[文档](http://api.jquery.com/jQuery.get/)以获取更多信息。

# mysql - MySQL连接查询，想不通

> ID：14592188
> 
> 赞同：0
> 
> 时间：2013-01-29T21:00:04.210
> 
> 标签：mysql

我有两张桌子：`questions`和`questions_lookup`。如果这是一个好问题，用户投票决定是否将其放在网站上。

```
table: questions
    id
    question
    date_created
table: questions_lookup
    id
    question_id // (id linked to questions table)
    user_id // (the id of the user, I store this in a session variable called $me)
    show // (1 or 0, show or don't show) 
```

我想要一个 php 页面，它从按 date_created 排序的问题表中提取所有问题，然后显示用户是否已回答。当我尝试进行任何连接时，我最终会显示重复的问题，因为它会提取其他用户的答案。

所以如果有10个问题。一个特定的用户只回答了 3 个问题。我们仍然显示所有 10 个问题，但标记他们已回答的问题。

所以我基本上想显示如下内容：

```
Question 1
Question 2 (answered)
Question 3 (answered)
Question 4
Question 5
Question 6
Question 7 (answered)
Question 8
Question 9
Question 10 
```

我试过了：

```
SELECT * FROM questions
RIGHT JOIN questions_lookup
ON (questions.id = questions_lookup.question_id)
WHERE questions_lookup.user_id = '$me'
ORDER BY questions.date_created DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:06:20.407

像这样，假设每个用户在`questions_lookup`.

```
select
  q.*,
  case when ql.question_id is null then
    'no'
  else
    'yes'
  end as user_has_answered
from
  questions q
  left join questions_lookup ql 
    on ql.question_id = q.id
    and ql.user_id = 5 /* User id of current user */ 
```

诀窍是查询所有`questions`和`left join`. `questions_lookup`通过将 user_id 添加到 join 条件，您将省略其他用户的记录，同时仍然返回当前用户没有记录的问题。如果移至`ql.user_id = 5`where 子句，查询将不再有效，因为它会有效地将左连接变为内连接。

[编辑]

我看到你已经添加了你的查询。那里有两个错误。右连接应该是左连接，因为你总是希望左边有记录（问题），右边有可选记录（查找）。此外，条件不应出现在 where 子句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:09:55.467

怎么样 ：

```
SELECT questions.*, max(questions_lookup.show) AS show 
FROM questions 
LEFT JOIN questions_lookup ON questions_lookup.question_id=questions.id 
WHERE (questions_lookup.user_id='youruserid' OR questions_lookup.user_id IS NULL) 
GROUP BY questions.id 
ORDER BY questions.date_created ASC 
```

然后在您的结果中，`show=1`表示用户已回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:19:19.453

```
SELECT q.*, 
       l.user_id,
       l.show,
       IF(l.question_id IS NULL,'','answered') as answered
  FROM questions q LEFT JOIN
       questions_lookup l ON q.id = l.question_id AND
                             l.user_id = 5 <-- user id goes here
 ORDER BY q.date_created DESC 
```

您可以使用计算`answered`列，具体取决于您真正需要进一步处理的输出：

```
IF(l.question_id IS NULL,'','answered') as answered <-- 'answered' if answered, empty string if not (like in your example)
IFNULL(l.question_id,0) as answered <-- question_id (if autogenerated unsigned  int will be > 0) if answered, 0-if not 
```

或如 GolezTrol 所建议的那样

```
CASE WHEN ql.question_id IS NULL THEN 'no' ELSE 'yes' END as answered <-- yes if answered and no if not 
```

# java - offsetByCodePoints vs 整数迭代器

> ID：14592192
> 
> 赞同：1
> 
> 时间：2013-01-29T21:00:13.843
> 
> 标签：java, string

使用 String.offsetByCodePoints 而不是仅使用整数索引来跟踪您在字符串中的位置有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:11:30.253

如果字符串包含来自 Unicode 补充平面的字符（具有高代码点/字符代码的不寻常字符），它可能会很有用。Java 字符串在内部使用 UTF-16 编码，这意味着某些 Unicode 字符必须表示为两个`char`值的序列，也称为*代理对*。因此，虽然`s.charAt(i)`会给你第*i*个`char`，`s`但这实际上可能不是第*i*个*字符*。*会告诉你第i*个字符开始`s.offsetByCodePoints(0, i)`的索引。

 *如果你不熟悉上面的一些术语，你应该阅读[Joel Spolsky 关于字符集的优秀文章](http://www.joelonsoftware.com/articles/Unicode.html)。*

# java - 移除了 Linux 标识符

> ID：14592195
> 
> 赞同：2
> 
> 时间：2013-01-29T21:00:18.100
> 
> 标签：java, linux

在运行以下 Java 代码时，我遇到了一个有趣的问题：

```
 File.createTempFile("temp.cnt.ent", "cnt.feat.tmp", directory); 
```

抛出以下异常：

```
 Exception in thread "main" java.io.IOException: Identifier removed
    at java.io.UnixFileSystem.createFileExclusively(Native Method)
    at java.io.File.checkAndCreate(File.java:1704)
    at java.io.File.createTempFile(File.java:1792) 
```

我以前从未遇到过这个问题，而且谷歌似乎对我没有太多帮助。系统运行Scientific Linux release 5.8（Linux 2.6.18-274.3.1.el5 x86_64），Java版本为

```
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02, mixed mode) 
```

文件系统 (Lustre) 有 80TB 的可用空间。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:18:10.970

我*猜*你看到了一个 EIDRM。至少错误消息看起来像这样。IOException 包装了来自底层本机库的错误消息。

这不是您问题的真正答案，但可能是一个有用的提示。

[http://docs.oracle.com/cd/E19455-01/806-1075/msgs-1432/index.html](http://docs.oracle.com/cd/E19455-01/806-1075/msgs-1432/index.html)有一些信息和额外的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:38:54.590

该问题似乎与一次拥有太多应用程序实例（每个都在单独的 VM 中）有关。由于某些未知原因，操作系统拒绝允许创建临时文件。解决方法：运行更少的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T12:35:31.607

您在各种实例之间遇到同步错误。Lustre 不支持文件锁定，这可能是`java.io.UnixFileSystem.createFileExclusively`用来避免并发问题的。（我说“可能”是因为它似乎没有在任何地方记录。）

如果不锁定，文件操作相互干扰只是时间问题。减少实例的数量并不是一个解决方案，因为它只会降低它发生的可能性。

我相信解决方案是确保每个实例在不同的子目录中创建文件

# solr - 如何在集群 JBoss 中同步 Apache Lucene 和 Solr 的索引和存储库

> ID：14592197
> 
> 赞同：1
> 
> 时间：2013-01-29T21:00:21.840
> 
> 标签：solr, jboss, lucene

我有一种情况，我想将使用 EJB-Hibernate 构建的演示 Web 应用程序运行到 JBoss Cluter 中以实现高可用性，在我的应用程序中，我们使用 Apache Solr（其中一部分也使用 Lucene）进行基于文本的搜索。

我从 Jboss 官方网站获得了集群信息，但我无法获得有关如何同步 solr 或 lucene 索引及其数据存储库的任何信息..？

我相信很多人一定已经在其中使用 Lucene 或 solr 进行了集群，请任何人指出我的正确来源。关于如何在 JBoss 的多个服务器实例上同步 solr 或 lucene 目录。

我已经嵌入了 solr 部署，因此正如 Jayendra 在下面建议的那样，我无法使用 HTTP 进行 Solr 复制。有没有其他方法可以通过转发器配置进行 solr-replication（即我的所有节点都将充当主节点和从节点）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:52:34.233

如果您想为 Solr 复制/同步数据存储库，您可以检查[Solr Replication](http://wiki.apache.org/solr/SolrReplication)，这将允许您在不同机器上的不同 solr 实例之间同步数据存储库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T12:25:19.577

JBoss 和 WildFly 的集群技术基于[Infinispan](http://infinispan.org/) OSS 项目。

Infinispan 提供了一个高效的分布式存储模型，该项目包括一个 Apache Lucene 索引存储层：

*   [http://infinispan.org/docs/dev/user_guide/user_guide.html#integrations:lucene-directory](http://infinispan.org/docs/dev/user_guide/user_guide.html#integrations:lucene-directory)

`Directory`用这个实现替换 Solr 应该很容易。

# wordpress - Wordpress 中的相关帖子 - 不包括当前帖子

> ID：14592198
> 
> 赞同：0
> 
> 时间：2013-01-29T21:00:26.033
> 
> 标签：wordpress, related-content

我目前正在使用自定义查询来获取相关帖子。但是，我很好奇是否有办法不抓住我目前正在发布的当前帖子。我唯一的想法是使用帖子的 ID 并以某种方式排除它。这可能吗？

这是我当前提取相关帖子的代码：

```
// Get The Related Term
$terms = array();
foreach(wp_get_object_terms($post->ID, 'series') as $term){
    $terms[] = $term->slug;
};

// Grab The First Term From The Array
$related_term = array_shift(array_values($terms));

// Query The Related Posts
$related_posts = $wpdb->get_results( 
    "
    SELECT * 
    FROM $wpdb->posts
    LEFT JOIN $wpdb->term_relationships ON($wpdb->posts.ID = $wpdb->term_relationships.object_id)
    LEFT JOIN $wpdb->term_taxonomy ON($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
    LEFT JOIN $wpdb->terms ON($wpdb->term_taxonomy.term_id = $wpdb->terms.term_id)
    WHERE $wpdb->posts.post_type = 'sermon' 
    AND $wpdb->posts.post_status = 'publish'
    AND $wpdb->term_taxonomy.taxonomy = 'series'
    AND $wpdb->terms.slug = '$related_term'
    ORDER BY $wpdb->posts.post_date DESC
    "
);
foreach ($related_posts as $related) {
    echo '<li><a href="'.get_permalink($related->ID).'">'.get_the_title($related->ID).'</a></li>';
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:10:49.067

您可以在 where 查询中使用不等于子句 <>。就像是

```
AND $wpdb->posts.ID <> $post->ID 
```

# forms - 创建 ViewObject 作为表单参数的占位符

> ID：14592202
> 
> 赞同：0
> 
> 时间：2013-01-29T21:00:39.403
> 
> 标签：forms, jsf-2, oracle-adf, jdeveloper

# 背景

尝试创建一个可以拖放到页面上的[ViewObject （使用 JDeveloper 11.1.2.3）以创建如下表单：](http://docs.oracle.com/cd/E35521_01/web.111230/e16182/bcquerying.htm#ADFFD237)

* * *

![没有输入的表格](../Images/1756a97a71a17927a6745b562a2927dd.png)

* * *

表单参数必须提交给自定义报告框架。在 ViewObject 中，某些属性必须链接到 List-of-Value 选择器，或者自动从 ViewObject 中获取其数据类型。开发人员应该能够拖放 ViewObject 以创建功能表单。

这将允许表单使用 ViewObject 执行输入验证，并允许使用 List-of-Value 对象。

# 问题

没有支持 ViewObject 的实体。没有驱动 ViewObject 的 SQL。ViewObject 并不真正需要编程访问，也不是静态列表。它只是一个容器，可以容纳可以遵守验证规则的参数。当开发人员在表单上放置这样的 ViewObject 时，它会创建一个没有可见输入字段的表单：

* * *

![带输入的表单](../Images/7eed46e90f602cffbdac14082722b3d6.png)

* * *

幕后的代码类似于：

```
 <af:inputText value="#{bindings.ManagementCentre.inputValue}"
                label="#{bindings.ManagementCentre.hints.label}"
                required="#{bindings.ManagementCentre.hints.mandatory}"
                columns="#{bindings.ManagementCentre.hints.displayWidth}"
                maximumLength="#{bindings.ManagementCentre.hints.precision}"
                shortDesc="#{bindings.ManagementCentre.hints.tooltip}"
                id="report_P_MANAGEMENT_CENTRE">
  </af:inputText>
  <af:inputText value="#{bindings.ClinicServiceCentreName.inputValue}"
                label="#{bindings.ClinicServiceCentreName.hints.label}"
                required="#{bindings.ClinicServiceCentreName.hints.mandatory}"
                columns="#{bindings.ClinicServiceCentreName.hints.displayWidth}"
                maximumLength="#{bindings.ClinicServiceCentreName.hints.precision}"
                shortDesc="#{bindings.ClinicServiceCentreName.hints.tooltip}"
                id="report_P_CLINIC_SERVICE_CENTRE">
    <f:validator binding="#{bindings.ClinicServiceCentreName.validator}"/>
    </af:inputText> 
```

提交按钮的代码运行托管 bean 以提取表单参数并将它们传递到报告中（通过报告框架）：

```
 <af:commandButton text="Run Report" id="submitReport">
    <af:fileDownloadActionListener method="#{reportBean.run}" />
  </af:commandButton> 
```

# 问题

如何创建这样一个可以执行验证但不需要数据源支持的 ViewObject？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:52:30.240

您可以使用一个接受两个参数的方法创建一个简单的 Java 类。将 Java 类公开为数据控件，然后将其拖到您的页面中以创建参数表单。

然后，您可以为字段添加 LOV 等。 [https://blogs.oracle.com/shay/entry/adding_lov_to_non_database](https://blogs.oracle.com/shay/entry/adding_lov_to_non_database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:09:51.153

# 解决方案

你必须：

*   创建一个具有所需属性的编程视图对象。
*   使用验证规则配置视图对象。
*   配置应用程序模块。
*   创建网页表单。
*   更新页面绑定以创建新行。

# 创建视图对象

创建视图对象如下：

1.  键入`Control+n`以打开**新图库**。
2.  搜索并选择**查看对象**。
3.  单击**确定**。
4.  适当设置**Package**、**Name**和**Display Name**。
5.  将**数据源**设置为**Programmatic**。
6.  单击**下一步**。
7.  单击**新建**并提供有意义的属性名称。
8.  单击**确定**。
9.  添加剩余的属性。
10.  单击**下一步**。
11.  将所有属性的**可更新**设置为**始终**。
12.  将**类型**设置为适当的数据类型。
13.  单击**完成**。

# 配置验证规则

配置验证规则如下：

1.  单击**属性**手指选项卡。
2.  选择所需的属性。
3.  单击**验证规则**选项卡。
4.  单击“**验证规则”**部分中的**+**图标。
***   根据需要设置**规则定义**。*   根据需要设置**错误消息**。*   根据需要重复添加尽可能多的验证规则。**

 **至此，视图对象已配置完毕，“**值列表”**选项卡可用于引用基于查询的 LOV。

# 配置应用模块

配置应用模块如下：

1.  双击应用程序的应用程序模块。
2.  选择**数据模型**手指选项卡。
3.  将视图对象从**可用视图对象**穿梭到**数据模型**。
4.  去掉**1**后缀。
5.  保存应用程序。

注意：如果视图对象不可见，请重新启动 JDeveloper。

# 创建网页表单

为表单创建一个网页，如下所示：

1.  为视图对象创建一个新的 JSF 页面。
2.  刷新**数据控件**以查看视图对象实例。
3.  将视图对象拖放到页面上。
4.  选择**表格 » ADF 表格**。
5.  检查**包括提交按钮**。
6.  单击**确定**。

网页已创建。

# 更新页面绑定

除非为视图对象实例创建了“行”，否则不能更改视图对象的属性。创建此内存行必须在显示页面内容之前发生。按如下方式完成：

1.  展开 Data Controls 以显示视图对象的**Operations**。
2.  将“**创建**”拖到页脚构面中。
3.  选择**ADF 按钮**。
4.  在页面上单击鼠标右键。
5.  选择**转到页面定义**。
6.  单击**Executables**旁边的**+**。
***   选择**调用动作**。*   单击**确定**。*   将**id**设置为：创建*   将**绑定**设置为：创建*   单击确定。*   将刷新设置为：**prepareModelIfNeeded***   保存全部。**

 **应用验证并且可以使用数据驱动的 LOV。

删除“创建”按钮。****

# django - 保存模型 int() 参数必须是字符串或数字，而不是“元组”

> ID：14592203
> 
> 赞同：3
> 
> 时间：2013-01-29T21:00:39.380
> 
> 标签：django, django-models, django-forms, django-views

我有两个表单发送到模板，当我得到它们时，所有模型都被检索并保存，但最后一个模型获取所有其他模型并保存自己，它也不会保存自己。我在下面收到这样的错误。谁能帮帮我？

```
Exception Type:  TypeError
Exception Value:  int() argument must be a string or a number, not 'tuple' 
```

我追踪了它，问题看起来只是表格中的一个问题，它从表格中看起来如何

```
class AForm(ModelForm):
    mentancy_fee = forms.IntegerField(required=False) 
```

在这里他从模型中定义

```
class AgentLandLordContract(models.Model):
    mentancy_fee = models.IntegerField(default=0,blank=True,null = True) 
```

那么为什么这个表单字段返回一个元组而不是一个它。我从表单中屏蔽了这个文件，一切都很好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T19:36:19.797

在表单中，我在字段末尾留了一个逗号，这使得表单输入到一个元组中，当我发现一切正常时

```
mentancy_fee = forms.IntegerField(required=False), 
```

# .net - .NET 和任务并行库

> ID：14592205
> 
> 赞同：1
> 
> 时间：2013-01-29T21:00:42.533
> 
> 标签：.net, task-parallel-library

我有一个创建 4 个任务的 for 循环，每个任务都会打印其循环索引 - 用于测试性能的简单程序

我有一个运行上述循环 1000 次（迭代）的外部循环我想检查任务和线程的性能

(1) 测试 1：我认为这只会创建任务（不是线程），但我发现它使用 TPL

```
tasks[i] = Task.Factory.StartNew(() => Console.WriteLine(tmp)); 
```

（2）我用TaskCreationOptions.LongRunning重写如下

```
tasks[i] = Task.Factory.StartNew(() => Console.WriteLine(tmp), TaskCreationOptions.LongRunning); 
```

(3) 然后我尝试使用与上面相同的代码测试线程不是任务，但现在使用“新线程”而不是工厂

```
for (int i = 0; i < 4; i++)
{
    var tmp = i;
    tasks[i] = new Thread(new ThreadStart(() => Console.WriteLine(tmp)));
    tasks[i].Start();
    tasks[i].Join();
} 
```

时序结果显示最佳性能是 (2)，然后是 (3)，然后是 (1)

请解释一下性能结果的原因，并解释上面哪一个真正只是一个任务（一个OS进程），哪些正在使用线程？

我尝试使用探查器，但只能访问 Visual Studio 2010 Professional，而且探查器似乎仅随 permium 或 Ultimate 版本提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:07:28.953

```
Task.Factory.StartNew( 
```

使用 ThreadPool 中的线程

`LongRunning`意味着，每个任务都应该创建自己的线程，因为它运行时间很长，我们不想干涸池

最后一个选项只是创建线程。

您是否检查了每种情况的内存使用情况？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:36:30.590

Using `Console.WriteLine` as the action for testing perfomance in this case is pointless. Under the hood in all of your cases a new thread is spawn or reused from the pool for each iteration. This is a relatively costly thing to do. That means, as long as your operation is trivial, the overhead of the thread spawn or reuse costs will always compromise your performance test a lot.

And if your having a real, non-trivial operation going on in your threads, the spawn cost differences between your cases won´t matter anymore. In addition to that, you have very little control when using `Task` when and if a new thread is created or one from the pool is reused, which is always a good thing btw. My advice is, use `Tasks` when you have the need to process something in the background and leave the headache stuff to the framework.

I hope this is understandable.

And, for practical purposes, if you have big lists of things to compute and want to make use of multicore cpus you could also take a look at [Parallel.Foreach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx) or other things provided by the `TPL`.

Edit: `Parallel.Foreach` and the likes will decide for themselves if and when to spawn new threads. Using this methods will give you a maximum of flexibility because the runtime will decide for you, depending on the processor count, size of the list, etc. if its making sense to create new threads or if the overhead would be bigger as the gain.

# php - 使用 Slim 框架的 htaccess 的 mod 重写问题

> ID：14592208
> 
> 赞同：0
> 
> 时间：2013-01-29T21:00:49.490
> 
> 标签：php, .htaccess, slim

我正在为客户开发一个应用程序，其中他们有一个网站，上面有一些 wordpress 博客 [http://www.chasethepaper.com](http://www.chasethepaper.com)

在根目录下，htaccess 文件是

```
<IfModule mod_rewrite.c>
RewriteEngine On
 RewriteBase /
 RewriteCond %{REQUEST_URI} !^/(yumninja_app_1_0|yumninja_app_1_0/.*)$
 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
 </IfModule> 
```

在根目录下，我有一个名为

```
'yumninja_app_1_0' 
```

在“ap”文件夹中，我有一个 htaccess

如果你去 [http://chasethepaper.com/yumninja_app_1_0/api/](http://chasethepaper.com/yumninja_app_1_0/api/)

它显示了索引页面，但是，如果你去

[http://chasethepaper.com/yumninja_app_1_0/api/getReviews](http://chasethepaper.com/yumninja_app_1_0/api/getReviews) 它返回 wordpress 404

这是 api 文件夹中的 htaccess 文件

```
RewriteEngine On

# Some hosts may require you to use the `RewriteBase` directive.
# If you need to use the `RewriteBase` directive, it should be the
# absolute physical path to the directory that contains this htaccess filwe.
#
# RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/(yumninja_app_1_0|yumninja_app_1_0/.*)$
RewriteRule ^(.*)$ index.php [QSA,L]

<IfModule Mod_php.c> 
 php_value upload_max_filesize 10M
 php_value post_max_size 20M
 php_value memory_limit 32M
</IfModule> 
```

我真的不确定为什么这不起作用。那是几天前。我知道 /getReviews 是有效的，因为我将相同的文件夹结构复制到另一台服务器并且它工作正常 [http://javadash.com/yumninja_app_1_0/api/getReviews](http://javadash.com/yumninja_app_1_0/api/getReviews)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:37:39.123

我想到了。那是因为我有

```
RewriteCond %{REQUEST_URI} !^/({app_name}|{app_name}.*)$ 
```

在 api 文件夹中的 .htaccess 文件中。一旦我删除它，它就起作用了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:25:40.347

如果服务器是 apache，请查看 error.log 文件，它应该提供有关问题所在的有用信息。

# java - Selenium WebDriver：使用 XPath 单击 SVG 中的元素

> ID：14592213
> 
> 赞同：48
> 
> 时间：2013-01-29T21:01:09.257
> 
> 标签：java, firefox, xpath, selenium, webdriver

我有一个带有一些圆形和矩形元素的 SVG 对象。使用 webdriver，我可以单击主 svg 对象，但不能单击其中的任何元素。问题似乎只在于单击（或任何鼠标交互），因为我可以使用 getAttribute() 来返回其下任何内容的宽度、ID、x/y、文本等的值。

下面是一个 HTML 示例：

```
 <div id="canvas">
        <svg height="840" version="1.1" width="757" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;">
            <image x="0" y="0" width="757" height="840" preserveAspectRatio="none">
            <circle cx="272.34" cy="132.14">
            <rect x="241.47" y="139.23">
            <text style="text-anchor: middle; x="272.47" y="144.11">
        </svg>
    </div> 
```

还有一个 WebDriver 尝试右键单击矩形元素的示例（并且失败）：

```
 WebElement mapObject = driver.findElement(By.xpath("//*[name()='svg']/*[name()='rect']"));
    Actions builder = new Actions(driver);
    builder.contextClick(mapObject).perform(); 
```

但这有效并返回一个值：

```
 driver.findElement(By.xpath("//*[name()='svg']/*[name()='rect']")).getAttribute("x"); 
```

当 WebDriver 出错时，通常是这样的：

```
 org.openqa.selenium.WebDriverException: '[JavaScript Error: "a.scrollIntoView is not a function" {file: "file:///var/folders/sm/jngvd6s97ldb916b7h25d57r0000gn/T/anonymous490577185394048506webdriver-profile/extensions/fxdriver@googlecode.com/components/synthetic_mouse.js" line: 8544}]' when calling method: [wdIMouse::move] 
```

我花了一些时间研究这个问题，这似乎是 Selenium 和 SVG 的一个常见问题，但我想知道是否有解决方法。我发现的唯一解决方案是与 SVG 本身交互，我已经可以做到。

我正在使用带有 Java + Firefox 17 的 Selenium 2.28（并尝试过 2.29）。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-07T22:00:21.110

对于任何有兴趣的人，我通过以下方式解决了这个问题：

1) 我最初是在 OSX 上使用 Firefox 17 和 Selenium 2.28/29 进行测试，但发现它只能在使用 Firefox 18 和 Selenium 2.29 的 Windows 上工作（至少对我而言）

2) 使用标准与 SVG 交互：

```
driver.findElement(By.xpath(YOUR XPATH)).click(); 
```

不起作用。您需要使用操作。

3) 与 SVG 对象交互，以下 XPath 起作用：

```
"/*[name()='svg']/*[name()='SVG OBJECT']"; 
```

SVG 对象是 SVG 元素下的任何东西（例如圆形、矩形、文本等）。

单击 SVG 对象的示例：

```
WebElement svgObject = driver.findElement(By.xpath(YOUR XPATH));
Actions builder = new Actions(driver);
builder.click(svgObject).build().perform(); 
```

注意：需要在click()函数里面调用路径；使用：

```
moveToElement(YOUR XPATH).click().build().perform(); 
```

不起作用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-31T13:02:21.243

试试这个解决方法：

```
WebElement mapObject = driver.findElement(By.xpath("//*[name()='svg']/*[name()='rect']"));
((JavascriptExecutor) driver).executeScript("arguments[0].click();", mapObject); 
```

每当我在尝试单击某些元素时遇到太多问题时，我都会使用此解决方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-28T19:06:42.070

通过做这两件事，我们能够避免奇怪的 xpath 选择

```
WebElement mapObject = (WebElement) driver.executeScript('return document.querySelector(arguments[0])', "svg rect")

((JavascriptExecutor) driver).executeScript("arguments[0].dispatchEvent(new MouseEvent('click', {view: window, bubbles:true, cancelable: true}))", mapObject); 
```

这适用于 osx 和 phantomjs，但我认为在任何现代浏览器中都应该没问题。

（我们使用了 js 驱动，所以请随时修复任何编译错误）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-03T10:29:37.553

干得好：

```
driver.findElement(By.cssSelector("#canvas > svg > rect")).getAttribute("x") 
driver.findElement(By.cssSelector("#canvas > svg > rect")).getAttribute("y") 
```

这样你就可以做到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-15T21:07:21.003

对于 JS 解决方案：

```
var selector = "//*[name()='svg']/*[name()='rect']";
browser.moveToObject(selector, 5, 5);//Move to selector object with offsets.
browser.buttonPress(null);//Left-click 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-09T12:29:15.940

我的项目中有不同的高位图表，我的目标是双击图表的一部分以深入了解更多信息，我已经设法使用以下代码行来做到这一点。XPath 对我不起作用，但 CssSelector 工作得很好。

```
var elementToClick= Browser.Driver.FindElementEx(By.CssSelector("#highcharts-0 > svg > g.highcharts-series-group > g.highcharts-series.highcharts-tracker > path:nth-child(1)"), 10);
Actions action = new Actions(Browser.Driver);
action.Click(elementToClick).Build().Perform();
action.DoubleClick(elementToClick).Build().Perform(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-02T10:41:03.427

以下是 C# 中的解决方法示例：

```
IWebElement svgElement = Driver.FindElement(By.CssSelector("svg"));

IList<IWebElement> rectElements = svgElement.FindElements(By.CssSelector("rect")); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-10-01T08:57:03.870

```
actual = driver.findElement(By.xpath(
"//div[contains(@class,'review-action')]//div[contains(@class,'rating')]/*[name()='svg'][1]/*[name()='g']/*[name()='path'][2]"))
.getAttribute("stroke"); 
```

# c++ - 所有 end() 迭代器都等效于集合类型吗？

> ID：14592215
> 
> 赞同：6
> 
> 时间：2013-01-29T21:01:14.390
> 
> 标签：c++, stl, iterator, containers, language-lawyer

给定 C++ 中的特定 stl 集合，`end()`相同模板化的所有实例的值是否相等？换句话说，以下内容是否适用于所有 stl 容器和环境（不仅适用于 std::map）？

```
std::map<Key, Value> foo(int seed);

std::map<Key, Value> instance1 = foo(1);
std::map<Key, Value> instance2 = foo(2);
std::map<Key, Value>::iterator itr = instance1.begin();
std::map<Key, Value>::iterator endItr = instance2.end(); // Comes from other collection!

for (; itr != endItr; ++itr) {
  // Do something on each key value pair...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:02:08.637

不，因为 STL 容器和迭代器要求：

**23.2.1 一般容器要求 [container.requirements.general]**

> 6 begin() 返回一个指向容器中第一个元素的迭代器。end() 返回一个迭代器，它是容器的结束值。如果容器是空的，那么 begin() == end();

**24.2.1 一般 [iterator.requirements.general]**

> 6 当且仅当存在使 i == j 的表达式 ++i 的应用程序的有限序列时，迭代器 j 被称为从迭代器 i 可达。如果 j 可从 i 到达，则它们指的是同一序列的元素。

`begin()`空容器和空容器的相等`end()`意味着`begin()`和`end()`需要是相同容器对象的一部分，因此`end()`不能是容器类的静态成员。还要注意 - 除了前向迭代器 - 应用`operator--`on`end()`将无法使用静态`end()`迭代器解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:16:38.900

一般来说，不，那不是便携式的。它可能在某些平台上巧合。

有一些末端迭代器*可以*重复用于不同的范围，例如默认构造的 istream_iterator：

```
ifstream a("foo.txt");
ifstream b("bar.txt");
istream_iterator<string> end;
istream_iterator<string> ia( a);
istream_iterator<string> ib( b);
// from here on both [ia, end> and [ib, end> are valid ranges. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:18:28.707

自己试试：

```
#include <map>
#include <iostream>
using namespace std;
map<int,int> m1;
map<int,int> m2;

int main() {
  cout<<(m1.end() == m2.end())<<endl;
} 
```

[http://ideone.com/o18DtQ](http://ideone.com/o18DtQ)

> 输出：
> 
> ```
> 0 
> ```

# android - 如何在 Webview 中调用 Barcode Scanner 并将其传回？

> ID：14592219
> 
> 赞同：3
> 
> 时间：2013-01-29T21:01:27.917
> 
> 标签：android, android-webview, barcode-scanner

我有以下情况：

1.  单击链接或按钮。
2.  用 ZXing 打开条码扫描器。
3.  扫码。
4.  将解码后的数据传递给其他网页。

对于 1 和 4，必须在 WebView 内部执行。我面临的问题是，使用此[https://code.google.com/p/zxing/wiki/ScanningFromWebPages](https://code.google.com/p/zxing/wiki/ScanningFromWebPages)，我将在默认浏览器中打开网页。我应该使用 Intent 来解决这个问题吗？或者有什么更好的解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:00:15.350

成功运行，需要在JavascriptInterface中添加调用Intent的代码，获取解码内容的onActivityResult不应该放在JavascriptInterface中。

示例代码：

```
public class MainView extends Activity {
    private WebView webView;
    public static String barcode = null;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);    //you might need to change webView1

        webView.getSettings().setJavaScriptEnabled(true);   
        webView.addJavascriptInterface(new JavaScriptInterface(this), "Android");

        webView.setWebViewClient(new WebViewClient()); 
    } // onCreate();

    public class JavaScriptInterface {
        Context mContext;

        // Instantiate the interface and set the context
        JavaScriptInterface(Context c) {
            mContext = c;
        }

        // using Javascript to call the finish activity
        public void closeMyActivity() {
            finish();
        }

        public void scanBarcode() {
            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.setPackage("com.google.zxing.client.android");
            startActivityForResult(intent, 0);
        }
    }   //JavascriptInterface

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                //here is where you get your result
                barcode = intent.getStringExtra("SCAN_RESULT");
            }
        }
    }

} 
```

在您的 Javascript 中：

```
function scan(){
    Android.scanBarcode();
} 
```

# mongodb - Mongodb查询完全匹配不是数组

> ID：14592226
> 
> 赞同：2
> 
> 时间：2013-01-29T21:01:55.583
> 
> 标签：mongodb

我正在查询带有`{"foo": "a"}`，而不是的文档`{"foo":["a", "b"]}`。

如何在 mongodb 中进行精确查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:24:16.510

[由于问题SERVER-1475](https://jira.mongodb.org/browse/SERVER-1475)导致这两种情况下[`$type`](http://docs.mongodb.org/manual/reference/operator/type/)的`foo`字段都被报告为字符串，这非常困难。

一种解决方法是测试是否存在数组元素以检测数组大小写（并将其从结果中排除）：

```
db.test.find({$and: [{'foo.0': {$exists: false}}, {foo: 'a'}]}) 
```

# ruby-on-rails - 将散列数组推送到数组的 Ruby/Rails 方式

> ID：14592241
> 
> 赞同：1
> 
> 时间：2013-01-29T21:02:24.130
> 
> 标签：ruby-on-rails, ruby, gmaps4rails

我正在将一个哈希构建到一个数组中，然后将每个哈希推入一个大数组中。这很好用（我正在使用 Gmaps4Rails），但我想知道是否有更多的 Ruby 方法来解决它？

```
def index   
  @allpoints = []
  @links = Link.find([1, 2, 3])
  @links.each do |link|
    linkpoints = []
    link.link_points.each do |pt|
      linkpoints << { :lat => pt.latitude, :lng => pt.longitude }
    end         
    @allpoints << linkpoints
  end
  @data = @allpoints.to_json    
end 
```

**解决方案编辑**：（我选择了下面的）比我原来的短，但在我看来可读性足够好：

```
def index
  all_points = []
  Link.find([1,2,3]).each do |link|
    all_points << link.link_points.map { |pt| { lat: pt.latitude, lng: pt.longitude } }
  end
  @data = all_points.to_json
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:08:33.013

**第一**：您不需要创建大量`@variables`. 您未在视图中使用的那些（控制器操作的局部变量）应该是经典的局部变量。

**第二**：您可以像这样重构您的操作：

```
@data = Link.find([1,2,3]).map do |link|
  link.link_points.map{ |pt| {lat: pt.latitude, lng: pt.longitude} }
end.to_json 
```

如果上面的代码没有预期的行为和输出，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:11:26.060

它可以用`map`下一种方式重构：

```
@allpoints = Link.find([1, 2, 3]).map do |link|
  link.link_points.map do |pt|
    { :lat => pt.latitude, :lng => pt.longitude }
  end
end 
```

# yahoo-pipes - 雅虎管道：字符串标记器不会接受 {

> ID：14592244
> 
> 赞同：0
> 
> 时间：2013-01-29T21:02:32.920
> 
> 标签：yahoo-pipes

我正在尝试使用 yahoo 管道解析来自 Web 服务的一些 JSON 输出，每当我尝试`{`在字符串标记器中使用 a 时，它都会破坏管道。

它是受保护/特殊字符还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:07:07.287

好吧，我一发布这个数字就知道了。

由于某种原因 { 是一个特殊字符，而 } 不是。

为了使用 { 我在它前面加上 .

# asp.net-mvc - mvc3 与 jquery 对话框关闭

> ID：14592245
> 
> 赞同：0
> 
> 时间：2013-01-29T21:02:33.593
> 
> 标签：asp.net-mvc, jquery-ui

我正在使用这样的对话框：

```
 <div id="dialog" title="Edit Information" style="overflow: hidden;">
    </div>

    $('#dialog').load("@Url.Action("EditInfo")",
                    function(response, status, xhr) {
                        $('#dialog').dialog('open');
    }); 
```

一旦用户用户在对话框中单击提交，我就可以访问 httppost

```
 [HttpPost]
     public ActionResult EditInfo(MicroInfo model)
     {
        if (ModelState.IsValid)
        {
            lbService.EditMicroInfoData(model);
            return View(model); // success 
        }

        return View(model); // problem           

     } 
```

当它去

```
 return View(model) // success 
```

，它不会在对话框中打开，而是在普通页面中打开。我喜欢在对话框中重新打开它，以便用户可以关闭对话框。

我想知道我是否应该这样做

```
 $.ajax( .... 
```

称呼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:17:45.257

您可以`Ajax.BeginForm`在要加载的部分内部使用。因此，将要在对话框中加载的内容放在局部视图中，并让您的`HttpPost`控制器操作返回相同的局部视图，而不是返回整个视图。

`jquery.unobtrusive-ajax.js`如果您希望`Ajax.BeginForm`表单正常工作，请不要忘记将脚本包含到您的页面中。

作为使用 Ajax.BeginForm 的替代方法，您仍然可以使用普通的 Html.BeginForm 并手动对其进行 AJAXify：

```
$(document).on('submit', '#dialog form', function() {
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        success: function(result) {
            // Here you could test the result of the controller action
            // and in case it is success close the modal
            // I would recommend you returning a Json result in this case
            // so that here you could test for it:
            if (result.success) {
                $('#dialog').dialog('close');
            } else {
                // a partial view was returned, probably an error =>
                 // refresh the dialog
                $('#dialog').html(result);
            }
        }  
    });
    return false;
}); 
```

# java - 为索引/搜索规范化字符串

> ID：14592247
> 
> 赞同：0
> 
> 时间：2013-01-29T21:02:44.457
> 
> 标签：java, google-app-engine

我想存储一个标准化版本的 a`String`以便能够对其进行`like 'xxxx%'`搜索。

我正在寻找一种对用户搜索高效且友好的好方法。

我最初的想法是转换为小写，删除非字母字符、重音符号和多余的空格，但不知道是否有一个好的已经研究和实施并准备好了。

PD：字符串将包含位置名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:46:49.590

最后，我以自定义解决方案结束。它可能更有效，但对我来说表现良好：

```
public static normalize(String string) {
    string = string.toLowerCase();
    //Remove/change all special characters -->  àaç is converted to aac

    String temp = Normalizer.normalize(string, Normalizer.Form.NFD);
    string = pattern.matcher(temp).replaceAll("");
    //Remove extra spaces  
    string = StringUtils.normalizeSpace(string);
} 
```

来自Commons [Lang](http://commons.apache.org/lang/)`StringUtils.normalizeSpace`。如果您不想引入依赖关系，您可以轻松地从函数中[获取代码：](http://svn.apache.org/repos/asf/commons/proper/lang/trunk/src/main/java/org/apache/commons/lang3/StringUtils.java)

```
private static final Pattern WHITESPACE_PATTERN = Pattern.compile("(?: \\s|[\\s&&[^ ]])\\s*");

public static String normalizeSpace(final String str) {
    if (str == null) {
        return null;
    }
    return WHITESPACE_PATTERN.matcher(trim(str)).replaceAll(SPACE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:27:44.320

您可以使用搜索 API 吗？它默认提供文本规范化，并设计用于最终用户查询（即，如果您正确使用索引/命名空间，您可以将用户查询传递到搜索 API 而无需验证）。

# linux - linux内核是否为实时任务执行负载平衡或任务迁移？

> ID：14592249
> 
> 赞同：3
> 
> 时间：2013-01-29T21:03:00.207
> 
> 标签：linux, linux-kernel, real-time, load-balancing

很清楚负载平衡和任务迁移在 fair.c 中的 CFS 代码中发生的位置，但是我查看了 rt.c 代码，仍然不确定是否存在实时发生的内核间负载平衡任务也是如此。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:01:44.283

是的。这是一篇关于 KernelShark 的文章，它也可以帮助您看到它的发生：[http ://lwn.net/Articles/425583/](http://lwn.net/Articles/425583/)

# jquery - 与窗口宽度成比例，用jquery改变div的宽度

> ID：14592252
> 
> 赞同：-2
> 
> 时间：2013-01-29T21:03:07.313
> 
> 标签：jquery, css

我更改了您要更改的浏览器的宽度，与内容中图像的宽度成比例。

例如，起初；

```
Browser Width: 1600 px | Height: 800 px
Image Width: 1024 px | Height: 660 px 
```

时间改变后；

```
Browser width: 1200px | height: 600px
image width: 600px | height: 400px such as .. 
```

这就是我们将如何建立我无法实现的比例.. 等待您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:16:14.863

只需使用百分比[`width`](http://www.w3.org/TR/CSS2/visudet.html#the-width-property)和[`height`](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)

HTML：

```
<img src="http://lorempixel.com/1024/600"/> 
```

CSS：

```
img {
    width: 65%;
    height: 80%;
} 
```

见[JSFiddle](http://jsfiddle.net/K5ckf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:20:53.663

如果要在保持相同纵横比的同时调整图像大小，请不要设置宽度和高度。只调整一个。

CSS解决方案：

```
@media only screen and (max-width: 1600px) {
    img {
        width: 1024px;
    }
}

@media only screen and (max-width: 1200px) {
    img {
        width: 600px;
    }
} 
```

[小提琴](http://jsfiddle.net/W6XzK/1/)

* * *

jQuery解决方案：

```
$(window).resize(function() {
    var theWidth = $(window).width();

    if (theWidth >= 1600) {
        $(img).css('width','1024px');
    } else if (theWidth < 1200) {
        $(img).css('width','600px');
    }
}); 
```

[小提琴](http://jsfiddle.net/R2Rq4/)

在某些浏览器中，调整大小往往会触发多次，所以如果你想使用 jQuery，你可能想尝试这样的解决方案：[jquery 中的 window.resize 多次触发](https://stackoverflow.com/questions/6658517/window-resize-in-jquery-firing-multiple-times)

# vb.net - 动态选择活动命名空间

> ID：14592253
> 
> 赞同：1
> 
> 时间：2013-01-29T21:03:35.100
> 
> 标签：vb.net

首先，我不确定我计划的方式（并将在下面描述）是否一定是做到这一点的“最佳”方式，所以我愿意接受建议。我有一个应用程序，我需要添加在运行时从硬件监视器收集信息的功能。我需要以可扩展的方式构建这个通信框架，以便我可以支持具有不同通信协议的多个不同监视器。

我的计划是为每个不同的监视器编写一个类，每个监视器都将实现相同的方法。它看起来像下面这样：

监视器1.vb：

```
Public Function GetHR() as integer
    //Code specific to interact with Monitor 1
    return HR as integer
End Function 
```

监视器2.vb：

```
Public Function GetHR() as integer
    //Code specific to interact with Monitor 2
    return HR as integer
End Function 
```

然后我会在实现页面上选择活动监视器并调用函数 Implementation.vb：

```
ActiveMon = Monitor1
CurrentHR = ActiveMon.GetHR() 
```

如果这是设置活动类的可接受方法，我将如何设置它（我猜我上面简单设置变量的示例不是正确的方法）。如果这不是最好的方法，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:10:27.200

通常对于这种类型的东西，您要么想要使用接口，要么使用继承。如果类有一些共同的共享代码，继承将是更好的选择。如果它只需要提供常用方法，接口就可以正常工作：

```
Interface IMonitor
    Function GetHR() as Integer
End Interface

Public Class Monitor1
    Implements IMonitor

    Public Function GetHR() as Integer Implements IMonitor.GetHR
        ' Do Stuff
        Return someValue
    End Function
End Class

Public Class Monitor2
    Implements IMonitor

    Public Function GetHR() as Integer Implements IMonitor.GetHR
        ' Do other Stuff
        Return someValue
    End Function
End Class 
```

然后你可以有一个接口类型的变量并分配给它：

```
Dim myMonitor as IMonitor
myMonitor = new Monitor1()
Dim result = myMonitor.GetHR() ' Some result
myMonitor = new Monitor2()
result = myMonitor.GetHR()     ' Some other result 
```

# c# - 在单个二进制文件中定位多个 .NET 框架？

> ID：14592262
> 
> 赞同：14
> 
> 时间：2013-01-29T21:04:38.773
> 
> 标签：c#, .net, multitargeting

**的背景：**

我有一个应用程序需要在其安装的 .NET 框架范围从 2.0 一直到 4.5 的客户端上运行。此应用程序必须能够对大量文件（在特定情况下超过 200k 个离散文件）进行枚举和执行操作。

为了构建文件索引，应用程序当前使用[System.IO.DirectoryInfo.GetFiles()](http://msdn.microsoft.com/en-us/library/07wt70x2%28v=vs.80%29.aspx)。这会影响性能，因为处理组件必须等待整个路径树被索引才能开始工作。由于一些过时的磁带多加载器和一些编写不佳的固件，遍历某些目录可能会触发从磁带读取 - 将处理时间从几十秒缩短到几十分钟。

.NET 4.0 提供了[System.IO.Directory.EnumerateFiles(Path)](http://msdn.microsoft.com/en-us/library/dd383458%28v=vs.100%29.aspx)方法，可以缓解这个问题。然而，只有少数 datter 控制台已升级到 4.0+，我们要求进行现代化改造的请求遭到了敌意。

**问题：**

*是否可以在单个二进制文件中*同时实现 GetFiles 和 EnumerateFiles 的方法？实际上，这将是针对 .NET 2.0 的单个二进制文件，如果在运行时确定 4.0 框架可用，则能够调用 .NET 4.0 方法。

在提到之前：更换数据不是我们客户的选择。我试过了。我有没有试过。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T21:17:03.563

您将无法（轻松）制作在 .NET 2.0 上运行并使用 .NET 4.0 方法的单个二进制文件。有各种各样的迂回方式 - 反射等，但在你的情况下，这些似乎是个坏主意。

但是，您没有理由不能在 .NET 2.0 库中自己实现 EnumerateFiles。为此，您需要对 WIN32 函数`FindFirstFile`和`FindNextFile`. 两个 CodeProject 项目看起来涵盖了这个区域，并且应该在源代码中包含正确的位：

*   [http://www.codeproject.com/Articles/12782/File-System-Enumerator-using-lazy-matching](http://www.codeproject.com/Articles/12782/File-System-Enumerator-using-lazy-matching)
*   [http://www.codeproject.com/Articles/38959/A-Faster-Directory-Enumerator](http://www.codeproject.com/Articles/38959/A-Faster-Directory-Enumerator)

# java - 多个数组赋值取决于变量

> ID：14592270
> 
> 赞同：-1
> 
> 时间：2013-01-29T21:05:22.687
> 
> 标签：java

我是 Java 新手。假设用户输入一个 int，A。

```
int [] = arraylist [A]  // I created a variable with A values 
```

如何允许我的用户为每个数组值输入一个值？

我想通过实现 if/while 语句，通过循环程序直到分配所有值，这可能是条件？我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:09:45.243

它接缝你误认为 Arrays 和 ArrayLists。

这是一个很好的数组教程：

[http://www.javatutorialhub.com/java-arrays.html](http://www.javatutorialhub.com/java-arrays.html)

以下是 ArrayList 的一些示例。

[http://javarevisited.blogspot.com/2011/05/example-of-arraylist-in-java-tutorial.html](http://javarevisited.blogspot.com/2011/05/example-of-arraylist-in-java-tutorial.html)

简而言之，数组是一种基本的内存结构，而 ArrayList 是 Java 库中的一个对象。

# java - 如何将我的树结构工作到 Jtree 中？

> ID：14592271
> 
> 赞同：1
> 
> 时间：2013-01-29T21:05:25.313
> 
> 标签：java, swing, treeview, jtree

首先，我应该说我正在使用 netbeans，而且我是整个 java GUI 游戏的新手。

所以，我的问题是我创建了自己的特定于我的项目的树结构，我现在想使用我的结构来构造 JTree。

我正在阅读 Jtree 的主题，据我了解，我需要在我的结构中实现 TreeModel 接口。我还读到的另一种方法是使用 DefaultMutableTreeNode 但我找不到任何使用它的示例对我来说很清楚。

现在我已经构建了整个树结构并填充了数据，并试图避免重建它。如何将我的树实现为 Jtree？

```
package models;

import java.util.ArrayList;
import java.util.List;

public class IngredientTree {

   private Node root;

    public IngredientTree(){
        root = new Node();
    }
    public IngredientTree(Node rootData) {
        root = rootData;
    }

    public void setRoot(Node n){
        root = n;
    }

    public Node getRoot(){
        return root;
    }

    public void addToTree(Ingredient i){
        if(root.getData().getName()=="") // Then it must be the root 
            root.setData(i);
        else
            addToTree(root,i);
    }
    private void addToTree(Node n, Ingredient i){
        if(isFirstAdd(n)) //Has no parent and no children
            n.addChild(new Node(i,n));
        else if(n.hasChildren()){ //Has parent and children
            if(!inChildren(n,i)){
                if(inNode(n,i))
                    n.addChild(new Node(i,n));
            }
            else{
                for(Node child : n.getChildren()){
                    addToTree(child,i);
                }
            }
        }
        else{ //Has parent but no children
            n.addChild(new Node(i,n));
        }
    }
    private boolean isFirstAdd(Node n){
        return(!n.hasParent() && !n.hasChildren());
    }
    private boolean inChildren(Node n,Ingredient i){
        for(Node child : n.getChildren()){
            if(inNode(child,i))
                return true;
        }
        return false;
    }

    private boolean inNode(Node n,Ingredient i){
        return(i.getStartIndex() > n.getData().getStartIndex() &&
                i.getEndIndex() < n.getData().getEndIndex());
    }

    public int countIngredients(){
        return countIngredients(this.getRoot());
    }

    private int countIngredients(Node r){
        int count = 0;
        if(!r.hasChildren()){
            return 1;
        }else{
            for(Node child: r.getChildren()){
                count += countIngredients(child);
            }
        }
        return count;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:36:17.833

> 您是否建议实施树模型并基于该结构进行重建？

是的。[，这里](https://codereview.stackexchange.com/a/4447/6692)`FileTreeModel`引用，是一个例子。如[*如何使用树：创建数据模型*](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#data)中所述，“您只需要实现树模型，以便它使用现有数据结构中的信息。”[](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#data)

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-20T06:06:32.950

> 我希望这堂课能帮到你

```
package dharm.mytasks.component;

import java.awt.Dimension;
import java.awt.event.MouseEvent;
import java.util.List;
import java.util.function.BiConsumer;
import java.util.function.Consumer;

import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

import dharm.mytasks.ui.helper.CommonHelper;

public class Tree<T extends Object> extends JTree {
    private static final long serialVersionUID = 1L;

    public Tree(T rootUserObj){
        this(new TreeNode<>(rootUserObj));
    }

    public Tree(TreeNode<T> root) {
        super(root);

        this.setPreferredSize(new Dimension(150, 0));
//      this.setRootVisible(false);
        this.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
        this.setExpandsSelectedPaths(true);
    }

    @SuppressWarnings("unchecked")
    public TreeNode<T> getRoot() {
        return (TreeNode<T>) getModel().getRoot();
    }

    public void fillChildren(Consumer<TreeNode<T>> childFiller){
        getRoot().fillChildren(childFiller);
    }

    /** Loop for all nodes (deep=true) */
    public void forEachNodes(Consumer<TreeNode<T>> childConsumer){
        TreeNode<T> root = getRoot();
        childConsumer.accept(root);
        root.forEach(childConsumer, true);
    }

    public T getRootUserObject(){
        return getRoot().getUserObject();
    }

    public TreeNode<T> getSelectedNode(){
        @SuppressWarnings("unchecked")
        TreeNode<T> node = (TreeNode<T>) getSelectionModel().getSelectionPath().getLastPathComponent();
        return node;
    }

    public T getSelectedUserObject(){
        TreeNode<T> node = getSelectedNode();
        if(node != null /*&& node.isLeaf()*/) {
            return node.getUserObject();
        }
        return null;
    }

    public void setSelectedNode(TreeNode<T> node){
        setSelectionPath(new TreePath(node.getPath()));
    }

    public void onChange(Consumer<T> consumer){
        super.addTreeSelectionListener(evt->{
            TreePath selectedPath = evt.getNewLeadSelectionPath();
            if(selectedPath==null) return;
            @SuppressWarnings("unchecked")
            TreeNode<T> node = (TreeNode<T>) selectedPath.getLastPathComponent();
            if(node != null && node.isLeaf()) {
                T userObject = node.getUserObject();
                consumer.accept(userObject);
            }
        });
    }

    public void onMouseRightClickOnNode(BiConsumer<TreeNode<T>, MouseEvent> consumer){
        Tree<T> tree = this;
        CommonHelper.onMouseRightClick(tree, evt->{
            TreePath path = getPathForLocation(evt.getX(), evt.getY());
            if(path==null) return;
            tree.setSelectionPath(path);
            TreeNode<T> node = tree.getSelectedNode();

            consumer.accept(node, evt);
        });
    }

    public void showPopupOnRightClick(BiConsumer<MyJPopupMenu, TreeNode<T>> popupMenuItemFiller){
        this.onMouseRightClickOnNode((node,evt)->{
            MyJPopupMenu popup = new MyJPopupMenu();
            popupMenuItemFiller.accept(popup,node);
            popup.show(evt.getComponent(), evt.getX(), evt.getY());
        });
    }

    public static class TreeNode<T> extends DefaultMutableTreeNode {
        private static final long serialVersionUID = 1L;

        public TreeNode(T userObj){
            super(userObj);
        }

        /** @param userObj
         * @return child node
         */
        public TreeNode<T> addChild(T userObj) {
            TreeNode<T> child = new TreeNode<>(userObj);
            add(child);
            return child;
        }

        @Override
        public T getUserObject(){
            @SuppressWarnings("unchecked")
            T userObject = (T) super.getUserObject();
            return userObject;
        }

        @SuppressWarnings("unchecked")
        public List<TreeNode<T>> getChildren(){
            return (List<TreeNode<T>>) children;//.clone();
        }

        public void fillChildren(Consumer<TreeNode<T>> childFiller){
            if(getChildCount() != 0)
                super.removeAllChildren();
            childFiller.accept(this);
            forEach(child->child.fillChildren(childFiller), false);
        }

        /**
         * @param childConsumer
         * @param deep <code>true</code>=access all, <code>false</code>=first level children
         */
        public void forEach(Consumer<TreeNode<T>> childConsumer, boolean deep){
            getChildren().forEach(child->{
                childConsumer.accept(child);
                if(deep)
                    child.forEach(childConsumer, deep);
            });
        }

    }
}

public class CommonHelper {

    /**
     * @param comp component where listener should add
     * @param onRighClickConsumer
     */
    public static void onMouseRightClick(Component comp, Consumer<MouseEvent> onRighClickConsumer){
        comp.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if(SwingUtilities.isRightMouseButton(e) && e.getClickCount()==1)
                    onRighClickConsumer.accept(e); //call on right click
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-20T06:20:52.293

> 我希望这堂课能帮到你

```
package dharm.mytasks.component;

import java.awt.Dimension;
import java.awt.event.MouseEvent;
import java.util.List;
import java.util.function.BiConsumer;
import java.util.function.Consumer;

import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeSelectionModel;

import dharm.mytasks.ui.helper.CommonHelper;

public class Tree<T extends Object> extends JTree {
    private static final long serialVersionUID = 1L;

    public Tree(T rootUserObj){
        this(new TreeNode<>(rootUserObj));
    }

    public Tree(TreeNode<T> root) {
        super(root);

        this.setPreferredSize(new Dimension(150, 0));
//      this.setRootVisible(false);
        this.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
        this.setExpandsSelectedPaths(true);
    }

    @SuppressWarnings("unchecked")
    public TreeNode<T> getRoot() {
        return (TreeNode<T>) getModel().getRoot();
    }

    public void fillChildren(Consumer<TreeNode<T>> childFiller){
        getRoot().fillChildren(childFiller);
    }

    /** Loop for all nodes (deep=true) */
    public void forEachNodes(Consumer<TreeNode<T>> childConsumer){
        TreeNode<T> root = getRoot();
        childConsumer.accept(root);
        root.forEach(childConsumer, true);
    }

    public T getRootUserObject(){
        return getRoot().getUserObject();
    }

    public TreeNode<T> getSelectedNode(){
        @SuppressWarnings("unchecked")
        TreeNode<T> node = (TreeNode<T>) getSelectionModel().getSelectionPath().getLastPathComponent();
        return node;
    }

    public T getSelectedUserObject(){
        TreeNode<T> node = getSelectedNode();
        if(node != null /*&& node.isLeaf()*/) {
            return node.getUserObject();
        }
        return null;
    }

    public void setSelectedNode(TreeNode<T> node){
        setSelectionPath(new TreePath(node.getPath()));
    }

    public void onChange(Consumer<T> consumer){
        super.addTreeSelectionListener(evt->{
            TreePath selectedPath = evt.getNewLeadSelectionPath();
            if(selectedPath==null) return;
            @SuppressWarnings("unchecked")
            TreeNode<T> node = (TreeNode<T>) selectedPath.getLastPathComponent();
            if(node != null && node.isLeaf()) {
                T userObject = node.getUserObject();
                consumer.accept(userObject);
            }
        });
    }

    public void onMouseRightClickOnNode(BiConsumer<TreeNode<T>, MouseEvent> consumer){
        Tree<T> tree = this;
        CommonHelper.onMouseRightClick(tree, evt->{
            TreePath path = getPathForLocation(evt.getX(), evt.getY());
            if(path==null) return;
            tree.setSelectionPath(path);
            TreeNode<T> node = tree.getSelectedNode();

            consumer.accept(node, evt);
        });
    }

    public void showPopupOnRightClick(BiConsumer<MyJPopupMenu, TreeNode<T>> popupMenuItemFiller){
        this.onMouseRightClickOnNode((node,evt)->{
            MyJPopupMenu popup = new MyJPopupMenu();
            popupMenuItemFiller.accept(popup,node);
            popup.show(evt.getComponent(), evt.getX(), evt.getY());
        });
    }

    /** Reload/refresh in GUI */
    public void reload(){
        ((DefaultTreeModel) getModel()).reload();
    }

    public static class TreeNode<T> extends DefaultMutableTreeNode {
        private static final long serialVersionUID = 1L;

        public TreeNode(T userObj){
            super(userObj);
        }

        /** @param userObj
         * @return child node
         */
        public TreeNode<T> addChild(T userObj) {
            TreeNode<T> child = new TreeNode<>(userObj);
            add(child);
            return child;
        }

        @Override
        public T getUserObject(){
            @SuppressWarnings("unchecked")
            T userObject = (T) super.getUserObject();
            return userObject;
        }

        @SuppressWarnings("unchecked")
        public List<TreeNode<T>> getChildren(){
            return (List<TreeNode<T>>) children;//.clone();
        }

        public void fillChildren(Consumer<TreeNode<T>> childFiller){
            if(getChildCount() != 0)
                super.removeAllChildren();
            childFiller.accept(this);
            forEach(child->child.fillChildren(childFiller), false);
        }

        /**
         * @param childConsumer
         * @param deep <code>true</code>=access all, <code>false</code>=first level children
         */
        public void forEach(Consumer<TreeNode<T>> childConsumer, boolean deep){
            getChildren().forEach(child->{
                childConsumer.accept(child);
                if(deep)
                    child.forEach(childConsumer, deep);
            });
        }

    }
} 
```*

# jenkins - 将 opencover xml 输出转换为 ncover xml

> ID：14592274
> 
> 赞同：3
> 
> 时间：2013-01-29T21:05:41.263
> 
> 标签：jenkins, hudson, ncover, opencover

我需要能够将 opencover 覆盖率结果导入 Jenkins，以便随着时间的推移提取覆盖率趋势数据。看来，最好的方法是找到一种方法将 opencover xml 格式转换为 ncover 格式，然后使用 NCover 插件导入结果。是否存在将 opencover 转换为 ncover 的现有 xslt，或将进行转换的开源工具？我已经搜索过了，我什么也没找到。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T01:13:49.993

[OpenCover wiki](https://github.com/OpenCover/opencover/wiki/Monitoring-coverage-in-Atlassian-Bamboo)上提供了以下 XSLT，它可能会帮助您入门。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" indent="yes" standalone="yes"/>
  <xsl:template match="/CoverageSession/Modules">
    <coverage>
      <xsl:for-each select="Module[not(@skippedDueTo)]">
        <module name="{ModuleName}">
          <xsl:for-each select="Classes/Class">
            <xsl:if test="count(Methods/Method) &gt; 0">
              <class name="{FullName}">
                <xsl:variable name="className" select="FullName" />  
                <xsl:for-each select="Methods/Method">
                  <method class="{$className}">
                    <xsl:for-each select="SequencePoints/SequencePoint">
                      <seqpnt visitcount="{@vc}" />
                    </xsl:for-each>
                  </method>
                </xsl:for-each>
              </class>
            </xsl:if>
          </xsl:for-each>
        </module>
      </xsl:for-each>
    </coverage>
  </xsl:template>
</xsl:stylesheet> 
```

# jquery - ie7/ie8：未知的运行时错误

> ID：14592277
> 
> 赞同：0
> 
> 时间：2013-01-29T21:05:47.960
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, zclip

我正在编写一个使用[jQuery zClip](http://www.steamdev.com/zclip/)的脚本，并且在 IE7/IE8 上一直遇到这个问题：

```
glue: function (elem, appendElem, stylesToAdd) {
        // glue to DOM element
        // elem can be ID or actual DOM element object
        this.domElement = ZeroClipboard.$(elem);

        // float just above object, or zIndex 99 if dom element isn't set
        var zIndex = 99;
        if (this.domElement.style.zIndex) {
            zIndex = parseInt(this.domElement.style.zIndex, 10) + 1;
        }

        if (typeof(appendElem) == 'string') {
            appendElem = ZeroClipboard.$(appendElem);
        } else if (typeof(appendElem) == 'undefined') {
            appendElem = document.getElementsByTagName('body')[0];
        }

        // find X/Y position of domElement
        var box = ZeroClipboard.getDOMObjectPosition(this.domElement, appendElem);

        // create floating DIV above element
        this.div = document.createElement('div');
        this.div.className = "zclip";
        this.div.id = "zclip-" + this.movieId;
        $(this.domElement).data('zclipId', 'zclip-' + this.movieId);
        var style = this.div.style;
        style.position = 'absolute';
        style.left = '' + box.left + 'px';
        style.top = '' + box.top + 'px';
        style.width = '' + box.width + 'px';
        style.height = '' + box.height + 'px';
        style.zIndex = zIndex;

        if (typeof(stylesToAdd) == 'object') {
            for (addedStyle in stylesToAdd) {
                style[addedStyle] = stylesToAdd[addedStyle];
            }
        }

        appendElem.appendChild(this.div);
        // ISSUE IS REPORTED BELOW IN IE7/IE8 
        this.div.innerHTML = this.getHTML(box.width, box.height);
    },

    getHTML: function (width, height) {
        // return HTML for movie
        var html = '';
        var flashvars = 'id=' + this.id + '&width=' + width + '&height=' + height;

        if (navigator.userAgent.match(/MSIE/)) {
            // IE gets an OBJECT tag
            var protocol = location.href.match(/^https/i) ? 'https://' : 'http://';
            html += '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="' + protocol + 'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="' + width + '" height="' + height + '" id="' + this.movieId + '" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="' + ZeroClipboard.moviePath + '" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="' + flashvars + '"/><param name="wmode" value="transparent"/></object>';
        } else {
            // all other browsers get an EMBED tag
            html += '<embed id="' + this.movieId + '" src="' + ZeroClipboard.moviePath + '" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="' + width + '" height="' + height + '" name="' + this.movieId + '" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="' + flashvars + '" wmode="transparent" />';
        }
        return html;
    }, 
```

更具体地说，上述代码中的问题在这里：

```
this.div.innerHTML = this.getHTML(box.width, box.height); 
```

错误是：

```
Unknown Runtime Error (line 304, char 3) 
```

我通过谷歌搜索了高低，并遇到了 IE 用户的这个通用问题，但他们的解决方案包括脚本中已有的内容，那么，还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:24:06.017

您应该使用该`$.html()`函数来更新`innerHTML`元素的。所以你会这样做：`$(this.div).html(this.getHTML(w, h));`

如果您使用的是 jQuery，您应该利用它的功能......`.css()`例如，使用该功能来更新样式属性

# php - 如果 mysql 查询没有返回结果，则返回值

> ID：14592279
> 
> 赞同：1
> 
> 时间：2013-01-29T21:05:51.360
> 
> 标签：php, mysql

好的，所以我正在尝试这样做，以便如果输入用户名存在以获取该用户名的详细信息，并且如果不存在用户名来告诉我......

到目前为止，它会告诉我用户名是否存在，但如果它不存在则不会...

所以基本上如果查询返回零结果我怎么让它说“嘿，没有匹配”？

到目前为止我的代码...

```
$user = $_POST['txtUsername'];
$sql = "SELECT * FROM `weaponstreat` WHERE username='$user'";
$rows = $db->query($sql); while ($record = $db->fetch_array($rows)) {

    if ($record['tid'] === NULL) { echo "empty"; } else { echo "full"; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:08:37.607

```
$user = $_POST['txtUsername'];
$sql = "SELECT COUNT(1) rcount FROM `weaponstreat` WHERE username='$user'";
$rows = $db->query($sql); while ($record = $db->fetch_array($rows)) {

    if ($record['rcount'] == 0) { echo "empty"; } else { echo "full"; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:08:46.813

只需检查是否返回任何行：

```
if ($db->num_rows() == 0)
{
    // No results
 }
else
{
    while ($record = $db->fetch_array($rows)) {
        if ($record['tid'] === NULL) { echo "empty"; } else { echo "full"; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:09:18.370

```
$user = $_POST['txtUsername'];
$sql = "SELECT * FROM `weaponstreat` WHERE username='$user'";
$rows = $db->query($sql);
// add a counter variable 
$counterRecords = 0;
while ($record = $db->fetch_array($rows)) {

    $counterRecords++;
}

if($counterRecords==0)
 echo "empty";
else echo "full"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T21:28:50.590

```
$user = $_POST['txtUsername'];

$query = mysql_query ("SELECT * FROM weaponstreat WHERE username='$user' ORDER BY tid DESC");

if ( mysql_num_rows( $query ) > 0 )
{
    // Process and display username details
}
else
{
    echo "That username does not exist";
} 
```

# python - 使用 Python 的 Google Plus 和 Google 通讯录

> ID：14592281
> 
> 赞同：0
> 
> 时间：2013-01-29T21:05:55.167
> 
> 标签：python, django, google-plus, google-contacts-api

我的问题如下：

我想使用 Google Plus API 从我的 Google 通讯录中获取信息。

我已经使用 Python 实现了 Google+ 的工作实现。因此，如果我知道某个用户的 ID，我就可以访问该资源并获取他们的姓名、电子邮件等所有信息。到目前为止一切都很好。

但是，我想访问我所有联系人的列表。我的意思是，在 GMail 上，当我浏览我的联系人列表时，我可以看到我的所有联系人及其所有电子邮件、显示信息和 Google+ ID。

如何使用我的 Google 帐户以编程方式获取我所有联系人 ID 的列表，以便我可以获取每个联系人的 Google+ Person 资源？

一种非常丑陋的方式自然会刮掉 HTML，但我绝对不想这样做。

我在文档中没有找到对此的参考。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:19:08.283

目前，无法从 Google+ API 中获取您圈出的人员列表。至于 GMail 联系人，目前不在 Google+ API 的范围内。但是，您可以并且应该在我们的问题跟踪器中提出这些功能请求，您可以在[https://developers.google.com/+/support](https://developers.google.com/+/support)上找到它。

# xml - Magento Soap Api (v2)，如何显示 XML 响应

> ID：14592287
> 
> 赞同：1
> 
> 时间：2013-01-29T21:06:10.173
> 
> 标签：xml, api, magento, soap

我正在使用 Magento SOAP api (v2) 开始检索新订单等。

通过在服务器上运行此代码（通过 url），我可以显示数组结果，但是有没有办法可以将响应显示为 xml？

```
<?php
 $proxy = new SoapClient('http://www.MAGENTO.co.uk/api/v2_soap/?wsdl'); 
$sessionId = $proxy->login('user', 'password'); 

$result = $proxy->salesOrderList($sessionId);
var_dump($result);
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:30:06.393

是的，您可以，我将在下面向您展示，但请记住，SOAP API 的目的是将所有 XML 内容抽象出来，让您处理编程系统（在本例中为 PHP）的本机对象。

PHP 的本机 SOAP 客户端实现具有调试方法，可让您查看最后一次发出的 soap 请求的请求和响应。您需要使用该`trace`选项实例化您的客户端对象。

```
$proxy = new SoapClient('http://www.MAGENTO.co.uk/api/v2_soap/?wsdl', array('trace' => 1)); 
```

然后你应该能够做这样的事情

```
//could echo as well, I always `var_dump` first in case of unexpected results
var_dump($proxy->__getLastRequestHeaders());

var_dump($proxy->__getLastRequest());

var_dump($proxy->__getLastResponseHeaders());

var_dump($proxy->__getLastResponse()); 
```

该`__getLastResponse`方法应返回原始 SOAP XML。

# xml - log4j xml 将日志从一个包写入自己的日志文件

> ID：14592288
> 
> 赞同：1
> 
> 时间：2013-01-29T21:06:13.757
> 
> 标签：xml, log4j

我确信这很简单，但在 Google 和 SO 之间我还没有找到答案。

我有一个带有 log4j 1.2.9 的 jboss 4.0.2（我知道它很旧，但我现在无法更改）webapp。我已经为控制台附加程序和滚动文件附加程序设置了日志，它们都可以正常工作。

我正在尝试设置一个日志文件，该文件将记录来自一个包的消息（在我的例子中，我们用于 SFTP 的 com.sshtools 包）。主日志失败，控制台也可以有这些消息（或者没有，我真的不在乎）。但是，ftp 日志应该只包含来自 com.sshtools 包的消息。不幸的是，当我运行 web 应用程序时，FTP 日志会获取所有消息，而不仅仅是 FTP 消息。

我目前正在使用类别来设置某些包的级别并使用 appender-ref 属性。我曾尝试将该包的可加性设置为 false 无济于事。我尝试将类别切换到记录器无济于事。我尝试为所有软件包设置 appender-ref 标签（它们将进入 CONSOLE 和 FILE 但不是 FTP）无济于事。

我已经看到使用属性文件而不是使用 xml 文件执行此操作的响应。由于我不知道如何从属性文件转换为 xml 文件，因此这些对我没有帮助。

我的 log4j.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<!-- ===================================================================== -->
<!--                                                                       -->
<!--  Log4j Configuration                                                  -->
<!--                                                                       -->
<!-- ===================================================================== -->

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">

   <!-- ================================= -->
   <!-- Preserve messages in a local file -->
   <!-- ================================= -->

   <!-- A time/date based rolling appender -->
   <appender name="FILE" class="org.jboss.logging.appender.RollingFileAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="File" value="${jboss.server.home.dir}/log/server.log"/>

     <param name="Append" value="true"/>
     <param name="MaxFileSize" value="20MB"/>
     <param name="MaxBackupIndex" value="50"/>

      <!-- Rollover at midnight each day -->
     <param name="DatePattern" value="'.'yyyy-MM-dd"/>

      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>

      </layout>
   </appender>

   <appender name="FTP" class="org.jboss.logging.appender.RollingFileAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="File" value="${jboss.server.home.dir}/log/ftp.log"/>

     <param name="Append" value="true"/>
     <param name="MaxFileSize" value="20MB"/>
     <param name="MaxBackupIndex" value="50"/>

      <!-- Rollover at midnight each day -->
      <param name="DatePattern" value="'.'yyyy-MM-dd"/>

      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>

      </layout>
   </appender>

   <!-- ============================== -->
   <!-- Append messages to the console -->
   <!-- ============================== -->

   <appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="Target" value="System.out"/>
      <param name="Threshold" value="INFO"/>

      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%c{1}] %m%n"/>
      </layout>
   </appender>

   <!-- ================ -->
   <!-- Limit categories -->
   <!-- ================ -->

   <!-- Limit the org.apache category  -->
   <category name="org.apache">
      <priority value="INFO"/>
   </category>

   <!-- Limit the org.jgroups category  -->
   <category name="org.jgroups">
      <priority value="WARN"/>
   </category>

   <!-- Limit apache axis  -->
   <category name="org.jboss.axis">
      <priority value="INFO"/>
   </category>

   <!-- Limit JBoss categories -->
   <category name="org.jboss">
      <priority value="INFO"/>
   </category>

   <!-- Limit the JSR77 categories -->
   <category name="org.jboss.management">
      <priority value="INFO"/>
   </category>

   <!-- Limit j2ssh categories -->
   <category name="com.sshtools">
      <priority value="WARN"/>
      <appender-ref ref="FTP"/>
   </category>

   <!-- Limit Hibernate categories -->
   <category name="org.hibernate">
      <priority value="ERROR"/>
   </category>

   <!-- Limit mchange categories -->
   <category name="com.mchange">
      <priority value="WARN"/>
   </category>

   <!-- ======================= -->
   <!-- Setup the Root category -->
   <!-- ======================= -->

   <root>
      <appender-ref ref="CONSOLE"/>
      <appender-ref ref="FILE"/>
      <appender-ref ref="FTP"/>
   </root>

</log4j:configuration> 
```

编辑：我已经尝试重新排序类别和其中的标签（并不是说它应该有所作为），但仍然没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:14:03.353

您可以从根 logger logger 元素中删除 FTP appender，因为 FTP 配置为接受来自 com.sshtools 包的日志记录请求。

根*记录器*位于记录器层次结构的顶部。给定记录器的每个启用的记录请求将被转发到*该记录器中的所有附加程序*，以及*层次结构中更高*的附加程序。换句话说，appender 是从 logger 层次结构中附加继承的。例如，如果将控制台附加程序添加到根记录器，则所有启用的日志记录请求至少将打印在控制台上。如果另外一个文件追加器被添加到一个记录器，比如 L，那么启用的 L 和 L 的孩子的记录请求将打印在一个文件和控制台上。可以通过将 additivity 标志设置为 false 来覆盖此默认行为，以便 appender 累积不再是相加的。

我希望这有帮助。

# php - 标头重定向随机工作 - 替代方案？

> ID：14592291
> 
> 赞同：0
> 
> 时间：2013-01-29T21:06:33.130
> 
> 标签：php, redirect, header

登录代码，如果成功，则实现标头重定向。它在随机时间工作，我不知道我在做什么来让它工作，然后让它失败。

```
 <?php
ob_start();
require ("include/PassHash.php");  

if(isset($_POST['login'])){

    // Returns more than 0 rows (Email found)
    if($total>0 && PassHash::check_password($row['password'], $_POST['password'])){     
        // Correct credentials.
        $_SESSION['user_id'] = $row['id'];
        $_SESSION['user_email'] = $email;
        session_set_cookie_params(24*60*60);
        header("Location: /index.php?p=user_account");
        exit();
        ob_end_flush();
    } else {
        // Incorrect password / email.

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:16:31.450

在 php 中，如果您正在编写任何涉及会话或标头的代码，则需要在调用代码之前小心防止任何输出。发送输出后，也会发送响应标头，您将无法更改它们。

输出可以是 echo/print 语句中的任何内容，但更常见的是，它的前导空格或 PHP 代码之前的换行符。您需要`<?php`从文件的第一行和第一个字符开始打开标签。

# javascript - 通过 JavaScript 修改的表单传递变量

> ID：14592296
> 
> 赞同：1
> 
> 时间：2013-01-29T21:06:58.293
> 
> 标签：javascript, jquery, asp.net-mvc

我正在一个显示结果表的搜索页面上工作。我想用 Javascript 添加一些功能。整个表格被封装在一个表格中，表格上的每一项都有你可以执行的几个动作；一个例子是`Add comment`。

我能够正确传递所有其他表单变量，因为它们是静态的。我遇到的问题是能够将 传递`ID`给操作，因为它会随着结果的每一行而变化。这是我到目前为止所拥有的（缩短）

动作标题：

```
public ActionResult Create( ........., Int ID); 
```

看法：

```
...

@foreach( var item in Model )
{
    ...
    @Html.ActionLink("Comment", "Create", "Comment", new { ID = Model.ID }, new { onclick = "CommentSubmit(@Model.ID)" })
} 
```

Javascript：

```
function CommentSubmit(id) {

            //What do?
    $("#DynForm").attr("action", "/Comment/Create");
    $("#DynForm").submit();
}; 
```

`ID`除了我的其他表单变量之外，我怎样才能只传递 Javascript/jQuery ？

有点问题，但我是否需要停止执行原始锚点（因为我的 javascript 正在提交表单）？我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:11:42.750

您可以在使用 id 提交表单之前创建或更新隐藏的输入

```
function CommentSubmit(id) {
    if($("#DynForm #id").length > 0)
        $("#DynForm #id").val(id);
    else
        $("#DynForm").append("<input type='hidden' id='id' name='id' value='"+id+"' />");

    $("#DynForm").attr("action", "/Comment/Create");
    $("#DynForm").submit();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:12:44.587

你可以这样做

```
<input type="hidden" name="myID" />

function CommentSubmit(id) {

    $("#myID").val(id);        
    $("#DynForm").attr("action", "/Comment/Create");
    $("#DynForm").submit();
}; 
```

然后在控制器中添加 myID 作为参数

```
Public ActionResult Action(string myID , .... ){

} 
```

或者，你可以这样做

```
 function CommentSubmit(id) {
        //What do?
$("#DynForm").attr("action", "/Comment/Create/" + id);
$("#DynForm").submit(); 
```

};

Asp.Net 中的默认路由将使用 url 的第三部分作为参数“id”

前任。{控制器}/{动作}/{id}

# java - Sun HTTPServer - 我如何编写后处理过滤器？

> ID：14592299
> 
> 赞同：5
> 
> 时间：2013-01-29T21:07:13.533
> 
> 标签：java, com.sun.net.httpserver

我用 Sun JRE 的 HTTP 服务器尝试了一些东西。在阅读了两次文档后，我仍然感到困惑。

[com.sun.net.httpserver.Filter](http://docs.oracle.com/javase/6/docs/jre/api/net/httpserver/spec/com/sun/net/httpserver/Filter.html) javadoc 说以下

> 要求此过滤器对给定的交换进行预处理/后处理。过滤器可以：
> 
> *   检查或修改请求标头
> *   通过创建合适的过滤器流并调用 HttpExchange.setStreams(InputStream,OutputStream) 过滤请求体或响应体
> *   设置属性交换中的对象，其他过滤器或交换处理程序可以访问。
> *   决定：
>     
>     
>     *   通过调用 Filter.Chain.doFilter(HttpExchange) 调用链中的下一个过滤器
>     *   通过不调用 Filter.Chain.doFilter(HttpExchange) 来终止调用链
>     
>     如果采用上述选项 1.，则当 doFilter() 返回时，Chain 中的所有后续过滤器都已被调用，并且可以检查或修改响应标头。如果采用上述选项 2，则此过滤器必须使用 HttpExchange 发送回适当的响应

我不清楚什么，什么决定过滤器何时是预处理过滤器或后处理过滤器。正如我所假设的，后处理过滤器在 HttpHandler*之后*运行，因此它可以与 HttpExchange 一起使用由 HttpHandler 修改的内容。然而，过滤器只被调用一次，所以必须有一个“魔法”决定过滤器在处理程序之前或之后运行。

请帮我说清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:17:27.547

每个过滤器都是前置过滤器和后置过滤器。我的意思是请求在通过堆栈时通过它，然后响应通过它返回到客户端。调用过滤器的顺序取决于您在`web.xml`文件中安装它的顺序。

如果您将其用作 Pre 过滤器，您将修改`InputStream`，如果您希望将其用作 Post ，您将修改`OutputStream`. 您甚至可以通过自己`InputStream`的`OutputStream`链向下传递。

所以，比如说你有几个`Filter1`,`Filter2`和`Filter3`。将`InputStream`首先通过`Filter1`，然后`Filter2`，最后`Filter3`在被处理之前。结果`OutputStream`将返回通过`Filter3`，然后`Filter2`最后`Filter1`在发送给客户端之前。因此，通过这种方式，您可以修改预处理和/或后处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-09T19:29:35.703

我自己也想知道这一点，但我看不出该`setStreams`方法对此有何帮助。我能做到这一点的唯一方法是包装 HttpExchange。

此示例显示如何使用过滤器应用 gzip 压缩：

[https://gist.github.com/Crydust/7e4e9228cd95febccdc58f0501c1e327](https://gist.github.com/Crydust/7e4e9228cd95febccdc58f0501c1e327)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-01T14:36:52.597

**在HttpHandler.handle()被调用之前，* *Filter.doFilter()*只被调用**一次** 。*

 **这意味着在处理程序运行后，您无法修改 HTTP 响应的内容。所以，它更自然地是一个前置过滤器。

但是，在*doFilter()*的实现中，您可以使用自己的*FilterOutputStream*包装响应的*OutputStream*，因此您可以拦截对*HttpExchange.getResponseBody().write(...)*的调用。

 **```
class MyFilter extends Filter {

    @Override
    public void doFilter(HttpExchange exch, Chain chain) throws IOException {

        exch.setStreams(null, new MyInterceptedOutputStream(exch.getResponseBody()));
        chain.doFilter(exch);
    }

    ...
} 
```

这个*MyInterceptedOutputStream*类需要扩展*OutputStream*并实现其常用方法（*write()*和*close()*）

*一个技巧：您的包装器必须确保在调用HttpExchange.sendResponseHeaders()*之前它不会向原始*OutputStream*写入任何内容。这意味着您必须确保您的包装器构造函数（上面示例中的*MyInterceptedOutputStream(OutputStream os)*）不写任何东西，这与*GZIPOutputStream()*不同！

 ****奖励：压缩流的OutputStream*包装器示例......并在*HttpFilter.doFilter()中工作*

```
import java.io.IOException;
import java.io.OutputStream;
import java.util.zip.GZIPOutputStream;

public class GZIPDelayedOutputStream extends OutputStream {

    GZIPOutputStream gzipStream;
    OutputStream originalStream;

    public GZIPDelayedOutputStream(OutputStream os) {
        super();
        originalStream = os;
    }

    private void createGzipStreamIfNecessary() throws IOException {
        if (gzipStream == null) {
            gzipStream = new GZIPOutputStream(originalStream);
        }
    }

    @Override
    public void write(int b) throws IOException {
        createGzipStreamIfNecessary();
        gzipStream.write(b);
    }

    @Override
    public void write(byte buf[]) throws IOException {
        createGzipStreamIfNecessary();
        gzipStream.write(buf);
    }

    @Override
    public void write(byte[] buf, int off, int len) throws IOException {
        createGzipStreamIfNecessary();
        gzipStream.write(buf, off, len);
    }

    @Override
    public void close() throws IOException {
        createGzipStreamIfNecessary();
        gzipStream.close();
    }
} 
```*******

# hpple - hpple 解析器获取所有带有标签的内容

> ID：14592302
> 
> 赞同：0
> 
> 时间：2013-01-29T21:07:27.597
> 
> 标签：hpple

我有一大块 HTML，我尝试在其中获取 div 中的所有内容，但我无法使用 [元素内容] 或 [元素文本] 检索它。

```
<div class="text_comment" id="xxx">
                    <blockquote><i><i><a>some text</a><br></i></i>
<blockquote>lorem ipsum ...</blockquote>
</blockquote>
<p>some text</p>
<p>lorem ipsum...</p>
<blockquote>another text</blockquote>
</blockquote>
<p>another text</p>             
</div> 
```

我尝试使用标签检索所有内部div，就像这样

```
 <blockquote><i><i><a>some text</a><br></i></i>
    <blockquote>lorem ipsum ...</blockquote>
    </blockquote>
    <p>some text</p>
    <p>lorem ipsum...</p>
    <blockquote>another text</blockquote>
    </blockquote>
    <p>another text</p> 
```

谁能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:41:28.140

解决了，如果有人需要这个，只需做这些小改动：

TFHppleElement.h

```
@property (nonatomic, copy, readonly) NSString *raw; 
```

TFHpleElement.m

```
- (NSString *)raw
{
    return [node objectForKey:@"raw"];
} 
```

XPathQuery.m

```
NSDictionary *DictionaryForNode(xmlNodePtr currentNode, NSMutableDictionary *parentResult,BOOL parentContent)
{
    ...
    xmlBufferPtr buffer = xmlBufferCreate();
    xmlNodeDump(buffer, currentNode->doc, currentNode, 0, 0);

    NSString *rawContent = [NSString stringWithCString:(const char *)buffer->content encoding:NSUTF8StringEncoding];
    [resultForNode setObject:rawContent forKey:@"raw"];

    xmlBufferFree(buffer);

  return resultForNode;
} 
```

# javascript - 在 javasctipt 警报或提示中创建循环

> ID：14592317
> 
> 赞同：-4
> 
> 时间：2013-01-29T21:08:27.250
> 
> 标签：javascript, loops, alerts

编辑澄清：

是否有将代码插入到 alert() 或 prompt() 的方法，例如在运行之前或运行时将数据添加到 alert() 或提示的一种循环或方法？

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:16:36.377

先做你的循环

```
for (var n = 0; n<= 50; n++) {varnum1= n*10 - 1;} /*some way to output data tothe alert*/
alert("starting string" + varnum1 + "end of string") 
```

# ruby-on-rails - 通过另一个模型与用户自身的关系

> ID：14592319
> 
> 赞同：0
> 
> 时间：2013-01-29T21:08:31.023
> 
> 标签：ruby-on-rails, rails-activerecord

我对如何建立 activerecord 关联感到困惑。我有一个属于用户的对象。此对象是由其他几个用户发送的。

```
class Object < ActiveRecord::Base
  belongs_to :user
  belongs_to :sender, :class_name => "User"
end

class User < ActiveRecord::Base
  has_many :objects
end 
```

我对如何设置“发件人”类感到困惑，以便我可以访问@card.senders。我目前有 card_id 和 user_id

```
class Sender < ActiveRecord::Base
  has_many :objects
end 
```

似乎无法让它工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T21:22:52.550

您正在尝试在和之间建立 HABTM *（拥有并属于多或多对多）*关系。尝试这样的事情。`Object``User`

```
class Object < ActiveRecord::Base
  belongs_to :user

  has_many :senders, through: :object_relationships, source: :user, class_name: "User"
  has_many :object_relationships
end

class User < ActiveRecord::Base
  has_many :owned_objects, inverse_of: :user

  has_many :objects, through: :object_relationships
  has_many :object_relationships
end

class ObjectRelationship < ActiveRecord::Base
  belongs_to :user
  belongs_to :object
end 
```

我更喜欢`has_many ..., through: ...`使用 HABTM 关联的方法，`has_and_belongs_to_many`因为我喜欢冗长。[您可以在此处](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)阅读有关在两者之间进行选择的信息。

# python - Microsoft Excel 2010 和 Python 中的受保护视图

> ID：14592328
> 
> 赞同：0
> 
> 时间：2013-01-29T21:08:48.820
> 
> 标签：python, linux, excel, view, protected

这里没有代码示例。刚刚遇到 Microsoft Excel 2010 的问题，我在 linux 上有一个 python 脚本，它从 csv 文件中提取数据，将其推送到 excel 中，并将该文件作为附件通过电子邮件发送到某个电子邮件地址。

我的问题是我在我的 excel 文件中使用公式，当它第一次打开时，它会进入“受保护的视图”。在我单击“启用编辑”之前，我的公式不会加载。即使开启了保护模式，有没有办法让我的号码显示出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:17:48.660

想通了。只需使用 for 循环来保持运行总计。抱歉浪费了问题。

# c# - DropDownList 中的事件在用户控件的不同实例之间触发

> ID：14592332
> 
> 赞同：0
> 
> 时间：2013-01-29T21:09:06.953
> 
> 标签：c#, asp.net, user-controls, mvp

我有一个带有两个 DropDownLists 的自定义用户控件。每个 DropDownList 都将 Autopostback 属性设置为 true。

有添加用户控件的新实例的功能，每个新实例都在 PlaceHolder 控件内（如果需要，此设计基于上[一篇文章的答案](https://stackoverflow.com/questions/14447883/repeater-and-custom-control-dynamically-adding-to-the-collection-and-retaining/14449305#14449305)）

我遇到的问题是，如果我在用户控件的实例 1 中从 DropDownList A 中选择一个选项，然后在用户控件的实例 2 中从 DropDownList B 中选择一个选项，则在实例 2 上的 DropDownList A 的 OnSelectedIndexChanged 事件用户控件也被触发，其值与在实例 1 中的同一 DropDownList 上选择的值相同。

举个例子，假设用户控件有关于汽车的信息，两个 DropDownLists 是颜色和年份：

> *   在用户控件的第一个实例中，我选择了 2010 年。
> *   在第一个实例中，我不选择颜色。
> *   在用户控件的第二个实例中，我选择了红色。
> *   在第二个实例中，我不选择年份。
> *   第二个实例上“Year”DropDownList 的 OnSelectedIndexChanged 事件被触发，值为 2010。

任何关于为什么会发生这种情况以及如何解决它的见解都将不胜感激。

谢谢你。

# javascript - JavaScript getElementById 获取第二个 DIV

> ID：14592333
> 
> 赞同：0
> 
> 时间：2013-01-29T21:09:11.847
> 
> 标签：javascript, maps

为什么我不能显示谷歌地图的第二个 DIV ID？我试图将我的 Map_canvas 更改为 Class 相同的结果我想在第二个 DIv map_canvas 中显示 Google 地图 Map 在我的 jQueryMobile 上运行所以我需要进入显示页面中的第二个 Div

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Map</title>
    <script src="../../Scripts/jquery-1.8.2.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="http://www.google.com/jsapi"></script>
    <script>
        $(document).ready(function () {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(success);
            } else {
                error('Geo Location is not supported');
            }
        });

        function success(position) {
            debugger;
            var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

            var options = {
                zoom: 17,
                center: coords,
                mapTypeControl: false,
                navigationControlOptions: {
                    style: google.maps.NavigationControlStyle.SMALL
                },
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("my_maps").children[0], options);

            var marker = new google.maps.Marker({
                position: coords,
                map: map,
                title: "You are here!"
            });
        }
    </script>

    <style>
        html {
            height: 100%;
            overflow: hidden;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        #map_canvas {
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="my_maps">
        <div id="map_canvas"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:15:41.397

我认为问题不在于您如何选择 DOM 元素。
尝试为您的包装 div 指定`width`和`height`（并且 map-div 应该适合它）。

```
<div id="my_maps" style="width:100%; height:500px;">
    <div id="map_canvas" style="width:100%; height:100%;"></div>
</div> 
```

`.children[]`而且，虽然与父节点一起使用没有问题；这应该更快：

```
document.getElementById('map_canvas'); 
```

# python-2.7 - 从现有模板创建 MTurk HIT

> ID：14592338
> 
> 赞同：6
> 
> 时间：2013-01-29T21:09:30.970
> 
> 标签：python-2.7, amazon-web-services, boto, mechanicalturk

我正在使用 Python AWS 包 boto v2.7 与 Mturk API 交互以创建和管理 HIT 等。

尝试使用现有模板创建 HIT 时遇到困难。亚马逊关于该主题的文档在这里：[http ://docs.aws.amazon.com/AWSMechTurk/2012-03-25/AWSMturkAPI/ApiReference_CreateHITOperation.html](http://docs.aws.amazon.com/AWSMechTurk/2012-03-25/AWSMturkAPI/ApiReference_CreateHITOperation.html)

我的代码是：

```
from boto.mturk.connection import MTurkConnection

mtc = MTurkConnection(aws_access_key_id=ACCESS_ID,
                             aws_secret_access_key=SECRET_KEY,
                             host=HOST)

mtc.create_hit(hit_layout=HIT_LAYOUT_ID) 
```

错误是：

```
MTurkRequestError: MTurkRequestError: 200 OK
<?xml version="1.0"?>
<CreateHITResponse><OperationRequest><RequestId>986926dd-0263-4aca-970c-139b7ed4a0e8</RequestId></OperationRequest><HIT><Request><IsValid>False</IsValid><Errors><Error><Code>AWS.MechanicalTurk.InvalidParameterValue</Code><Message>There was an error parsing the request (1359492767224 s)</Message></Error></Errors></Request></HIT></CreateHITResponse> 
```

似乎 MTurk API 需要一个命中布局参数，如下所示：http: [//docs.aws.amazon.com/AWSMechTurk/2012-03-25/AWSMturkAPI/ApiReference_HITLayoutArticle.html](http://docs.aws.amazon.com/AWSMechTurk/2012-03-25/AWSMturkAPI/ApiReference_HITLayoutArticle.html)

虽然我的原始模板确实使用了占位符值，但为了简单起见，我删除了它们并试图让代码正常工作。在这种情况下，我认为唯一需要的参数是 hit_layout？

这是对boto api的限制还是我在这里遗漏了什么？

*更新*

我尝试使用评论中提到的 mturkcore 模块，结果如下。

代码：

```
import mturkcore

login_dict = {'use_sandbox':True,
              'stdout_log':False,
              'AWS_ACCESS_KEY_ID':'ACCESS_ID',
              'AWS_SECRET_ACCESS_KEY':'PASSWORD'}

mtc = mturkcore.MechanicalTurk(login_dict)

request_params = {"Title":"Test Layout",
                    "Description":"Test Description",
                    "HITLayoutId":"2QNNJKM05BMJLZIA6G7TS9RA7TECHE",
                    "Reward":0.05,
                    "LifetimeInSeconds":6000,
                    "AssignmentDurationInSeconds":600    
                    }

mtc.create_request("CreateHIT", request_params) 
```

这会产生来自 suds 的错误消息：

```
TypeNotFound: Type not found: 'HITLayoutId' 
```

同样，我遵循这里的说明：http: [//docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_CreateHITOperation.html](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_CreateHITOperation.html)这似乎相当简单。

*解决方案* 我终于能够从现有模板创建 HIT，但仅限于生产环境。显然沙盒和生产之间存在差异，这可能就是我收到上述错误的原因。如果有人在沙盒中成功完成此操作，请加入！

此外，您必须确保 Reward、LifetimeInSeconds 和 AssignmentDurationInSeconds 参数与您正在创建的布局模板相匹配。最后，要查看您创建的 HIT，您必须单击“单独管理 HIT”链接。

# c - Linux：在共享内存中实现链表

> ID：14592341
> 
> 赞同：1
> 
> 时间：2013-01-29T21:09:50.757
> 
> 标签：c, linux, linked-list, shared-memory

我想知道是否可以在共享内存（C，Linux）中创建链表。

假设我有一个创建共享内存并返回指向该内存的指针的库。例子：

```
// in lib header
typedef struct _SHM_STR_ {
    int i;
    char c;
} SHM_STR_t;

// in libomg.so
void lib_ret_shmem(SHM_STR_t** shm_pt)
{
    int shm_fd;
    SHM_STR_t *shm_map;

    if ((shm_fd = shm_open(SHM_FILE, (O_CREAT | O_EXCL | O_RDWR), (S_IREAD | S_IWRITE))) > 0) {
        //first time created; init
        ...
    } else if ((shm_fd = shm_open(SHM_FILE, (O_CREAT | O_RDWR), (S_IREAD | S_IWRITE))) < 0) {
        return 1;
    }

    ftruncate(shm_fd, 20*sizeof(SHM_STR_t));

    shm_map = (SHM_STR_t *)mmap(0, 20*sizeof(SHM_STR_t), (PROT_READ | PROT_WRITE), MAP_SHARED, shm_fd, 0)
    ...
    // add new member
    // linked list or work with the offset in the shared mem?
    // increment pointer with offset and return in:
    *shm_pt = shm_map;
}

// in proc1.c something like this
int main(int argc, char *argv[])
{
    SHM_STR_t *ppp = NULL;

    lib_ret_shmem(&ppp);
    printf("%d %c\n", ppp->a, ppp->b);

    return 0;
} 
```

所以在库中，我为 20 个结构 SHM_STR_t 分配了足够的共享内存。

每次调用 lib_ret_shmem() 时添加新成员的最佳方法是什么？

我应该使用内存（或数组）基地址的偏移量吗？喜欢成员 [3] 我会返回类似的东西

```
*shm_pt = shm_map + 3; 
```

或者可以在这个内存中创建链表？我感觉 *next 不会指向正确的记忆。

对不起，糟糕的解释：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:24:12.733

如果您打算跨进程共享链接列表，那么您永远不能使用 malloc() 在列表中创建新节点；你需要一些其他的分配机制。如果所有分配的大小都相同，您可以轻松地创建一个特殊的 shared_malloc() 函数，将下一个分配从空闲节点列表中拉出，并创建一个 shared_free() 函数，将节点返回到空闲节点列表。这不是很困难。当您创建共享内存池时，只需将大 mmap 的分配划分为您需要大小的单个内存块（或者如果您需要多个大小，则将它们全部设为最大大小），并将它们全部初始化使用指向内存范围中下一个家伙的“下一个”指针，并分配“空闲列表” head 指向列表中第一个的指针。每当您需要另一个分配时，抓住空闲列表头部的那个，并将空闲列表头指针重新分配给列表中的下一个。

如果您在多线程/多进程环境中执行此操作（实际上，如果不是，您为什么要关心共享内存？），那么您需要在 shared_malloc() 和 shared_free() 函数中考虑并发性。 . 也许使用信号量或互斥量。（考虑一下如果进程 A 刚刚抓取下一个空闲节点，但还没有调整头指针，并且进程 B 中断并抓取空闲列表的顶部会发生什么......现在两个进程都有相同的节点。 ...)

# google-maps - Google Maps API - 不绘制所有标记

> ID：14592345
> 
> 赞同：0
> 
> 时间：2013-01-29T21:10:01.617
> 
> 标签：google-maps

我正在尝试根据包含信息窗口文本和邮政编码的数据数组在地图上绘制多个点。我还添加了一个侦听器，以便在单击标记时弹出信息窗口。

当我运行以下代码时，只有最后一个标记被放置。有人可以帮忙吗？

```
<div class="GoogleMap">
  <script src="http://maps.google.com/maps/api/js?sensor=false"type="text/javascript"></script>

  <div id="map" style="width: 977px; height: 600px;"></div>
  <script type="text/javascript">
    var locations = [
      ['<h4>Test</h4>', 'CH45 4SQ'],
      ['<h4>Test2</h4>', 'CH63 9AL']
    ];

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 8,
      center: new google.maps.LatLng(53.45631, -2.73710),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();
    var geocoder = new google.maps.Geocoder();
    var marker = new google.maps.Marker({ map: map });
    var i;

    for (i = 0; i < locations.length; i++) {

      geocoderRequest = {address: locations[i][1]}
      geocoder.geocode(geocoderRequest, function(results, status) {
        marker.setPosition(results[0].geometry.location);
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
  </script>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:44:06.313

看起来您只是在创建一个标记对象并在地图上移动它。

看看这个例子：[Google Maps JS API v3 - Simple Multiple Marker Example](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)

特别是这部分代码。

```
 var marker, i;

for (i = 0; i < locations.length; i++) {  
  marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
    map: map
  }); 
```

# eclipse - CDT 的 Eclipse 调用层次结构未完全工作

> ID：14592346
> 
> 赞同：5
> 
> 时间：2013-01-29T21:10:05.807
> 
> 标签：eclipse, eclipse-cdt, call-hierarchy

CDT 的 Eclipse 调用层次结构没有显示我的某些函数的所有函数调用。我所有的源代码都在项目文件夹中。我尝试将位置添加到 project->properties->C/C++ General->Paths and Symbols 并重建索引，但它不起作用。例如，一个函数被一些库代码调用了几次。它不是虚拟功能或任何东西，并且使用 ctrl-click 有效。该项目也编译得很好。

如果有的话，有人可以告诉我在哪里解决这个问题吗？也许我没有正确创建项目，并且它不知道所有文件都属于同一个项目。我知道有几种方法可以导入/创建 C++ 项目，也许我没有正确地做到这一点。或者我可能需要删除一些智能感知文件来重建索引器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-08T08:51:18.557

过去，我在使用旧版本的 Eclipse 时遇到了一些类似的问题。我认为当我更新它时它可能会自行解决（我一直坚持使用 Indigo，我认为 Juno 或 Luna 对我来说更好）。抱歉，答案很明显，但如果还没有完成，请尝试最新版本。

# azure - 具有几个 IP 的 Azure 云服务

> ID：14592347
> 
> 赞同：0
> 
> 时间：2013-01-29T21:10:10.203
> 
> 标签：azure, azure-web-roles

我有一个带有两个 Web 角色（网站和 Wcf 服务）的云服务。目前，我将端口 80 用于网站，将 8080 用于 Wcf 服务。

我可以为网站和 Wcf 服务使用不同的 IP（在两者上使用端口 80）吗？

我可以创建两个云服务，但这看起来很奇怪......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:27:09.283

如果他们都使用相同的云服务，我认为您不能分配多个 IP 地址，因为云服务绑定到特定的 URL ( [http://yourservice.cloudapp.net](http://yourservice.cloudapp.net) )。最好的选择可能是创建两个云服务：yoursite.cloudapp.net 和 yourwcfservice.cloudapp.net。

# tfs - VisualStudio.com 上的 MSTest 的行为与本地 MSTest 不同

> ID：14592348
> 
> 赞同：0
> 
> 时间：2013-01-29T21:10:15.500
> 
> 标签：tfs, json.net, tfsbuild, azure-devops

我有一个 ASP.NET Web API 项目和一个单元测试项目来测试 Web API 项目中的 ApiControllers。每个 TestMethod 都会实例化它要测试的 ApiController，如下所示：

```
[TestClass]
public class MyTestClass
{
    [TestMethod]
    public void MyTestMethod()
    {
        MyApiController controller = new MyApiController();
        controller.Configuration = new HttpConfiguration();
        // Other configuration steps

        IEnumerable<MyObjects> myObjects = controller.Get();
        // Assertions
    }
} 
```

如果我在本地构建并从测试资源管理器运行测试，这运行良好。但是，当我在 VisualStudio.com 上的 TFS 实例中排队新构建时，我的所有单元测试都失败，并从 HttpConfiguration ctor 引发以下异常：

> MyTestMethod 抛出异常：System.MissingMethodException：找不到方法：'Void Newtonsoft.Json.Serialization.DefaultContractResolver.set_IgnoreSerializableAttribute(Boolean)'。

这是调用堆栈：

```
at System.Net.Http.Formatting.JsonContractResolver..ctor(MediaTypeFormatter formatter)
at System.Net.Http.Formatting.JsonMediaTypeFormatter..ctor()
at System.Net.Http.Formatting.MediaTypeFormatterCollection.CreateDefaultFormatters()
at System.Web.Http.HttpConfiguration.DefaultFormatters()
at System.Web.Http.HttpConfiguration..ctor(HttpRouteCollection routes)
at System.Web.Http.HttpConfiguration..ctor() 
at MyTestClass.MyTestMethod() 
```

我在标准 .NET 4.5 dll 之外的所有依赖项都在 nuget 包中，这些包已签入源代码管理以供 TeamBuild 使用。这是使用 VisualStudio.com 的构建服务器时管理依赖项的唯一方法（据我所知）。

因为 TeamBuild 是在云中运行，而不是在我拥有的机器上，所以我几乎没有工具来诊断这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:57:00.783

> 我在标准 .NET 4.5 dll 之外的所有依赖项都在 nuget 包中，这些包已签入源代码管理以供 TeamBuild 使用。

您是否将托管构建控制器配置为指向该自定义程序集，请参见下图，如果是，并且您仍然遇到相同的错误，请尝试在本地构建服务器上重现该案例。

![在此处输入图像描述](../Images/267c62a828c45e2137f979bdc27ed99c.png)

![在此处输入图像描述](../Images/db93815d47a5a2ef6b2715dfdaa1106c.png)

![在此处输入图像描述](../Images/7084051847819c030a358995ebd6152f.png)

# mysql - 运行声纳分析时出现 PacketTooBigException

> ID：14592351
> 
> 赞同：10
> 
> 时间：2013-01-29T21:10:41.173
> 
> 标签：mysql, sonarqube

当我尝试运行声纳分析时，我得到了这个异常

> com.mysql.jdbc.PacketTooBigException：用于查询的数据包太大（1807198 > 1048576）。您可以通过设置 max_allowed_pa​​cket' 变量在服务器上更改此值。

我应该在声纳服务器的哪个位置设置这个值？

我正在使用声纳 3.4.1 和 MySQL 5.x

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-29T21:14:25.737

找到配置文件`my.cnf`（如果您的 MySQL 在 Windows 中运行，请 locate `my.ini`）

将此添加到配置文件中

```
[mysqld]
max_allowed_packet=256M 
```

然后重启mysql

*   对于 Linux，`service mysql restart`
*   对于 Windows
    *   `net stop mysql`
    *   `net start mysql`

试试看 ！！！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-03T23:39:14.217

但是我遇到了同样的问题，我们有一个限制，**我们无法更改 MySQL 服务器配置（max_allowed_pa​​cket）**

我可以通过更改**客户端 jdbc URL 配置**来完成这项工作-> 保持服务器配置不变。

```
jdbc:mysql://[dbhost]:[dbport]?useUnicode=true&rewriteBatchedStatements=true&characterEncoding=utf8&useServerPrepStmts=true&maxAllowedPacket=20000000&useSSL=false 
```

[在此处](https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html)检查 mysql 连接器配置参考

关于 SO 的另一篇文章详细讨论了客户端更改 - 请[在此处查看](https://stackoverflow.com/questions/3754238/is-there-any-way-to-insert-a-large-value-in-a-mysql-db-without-changing-max-allo)

希望这可以帮助！

# javascript - JavaScript 中的 UTF-16 到 UTF-8 转换

> ID：14592364
> 
> 赞同：8
> 
> 时间：2013-01-29T21:11:29.040
> 
> 标签：javascript, utf-8, base64, utf-16

我有 UTF-16 格式的 Base64 编码数据我正在尝试解码数据，但大多数库仅支持 UTF-8。我相信我必须放弃空咬，但我不确定如何。

目前我正在为 Base64 使用[David Chambbers Polyfill](https://github.com/davidchambers/Base64.js)，但我也尝试过其他库，例如[phpjs.org](http://phpjs.org/functions/base64_decode/)，它们都不支持 UTF-16。

需要指出的一点是，在 Chrome 上 atob 方法没有问题，在 Firefox 中我得到了[此处](https://stackoverflow.com/questions/8340715/base64-decoding-gives-different-result)描述的结果，而在 IE 中我只返回了第一个字符。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T10:31:41.180

您想解码 UTF-16，而不是转换为 UTF-8。解码意味着结果是一串抽象字符。当然，字符串也有内部编码，javascript 中的 UTF-16 或 UCS-2，但这是一个实现细节。

使用字符串的目标是您不必担心编码，而只需“按原样”操作字符。因此，您可以编写根本不需要解码输入的字符串方法。当然，有很多边缘情况会分崩离析。

您不能仅通过删除空值来解码 utf-16。我的意思是这对于 unicode 的前 256 个代码点可以正常工作，但是当使用 unicode 中的任何其他 ~110000 个字符时，你会得到垃圾。您甚至无法让最流行的非 ASCII 字符（如 em dash 或任何智能引号）起作用。

另外，看看你的例子，它看起来像 UTF-16LE。

```
//Braindead decoder that assumes fully valid input
function decodeUTF16LE( binaryStr ) {
    var cp = [];
    for( var i = 0; i < binaryStr.length; i+=2) {
        cp.push( 
             binaryStr.charCodeAt(i) |
            ( binaryStr.charCodeAt(i+1) << 8 )
        );
    }

    return String.fromCharCode.apply( String, cp );
}

var base64decode = atob; //In chrome and firefox, atob is a native method available for base64 decoding

var base64 = "VABlAHMAdABpAG4AZwA";
var binaryStr = base64decode(base64);
var result = decodeUTF16LE(binaryStr); 
```

现在您甚至可以使用智能报价：

```
var base64 = "HCBoAGUAbABsAG8AHSA="
var binaryStr = base64decode(base64);
var result = decodeUTF16LE(binaryStr);
//"“hello”" 
```

# c - 微控制器的模块化编程

> ID：14592367
> 
> 赞同：0
> 
> 时间：2013-01-29T21:11:33.073
> 
> 标签：c, embedded

我正在从事一个需要模块化编程方法的综合性长期 C 编程项目。作为设计的一部分，将创建库，因此我想确认对头文件组织的正确/错误解释：

**问题**

假设您正在创建一个库。仔细考虑之后，您已经决定要构想的最终库，也就是“godzilla”，应该由绑定到头文件的两个单独的 C 文件组成。在这个头文件中将存在函数声明；例如：

```
// offense.c
void attack_city(uint32_t force);    // (in Newtons) - capable of a LOT of force!
...

// measure.c
void measure_effect(void);
... 
```

这是您绘制的基本网络图：

![图表](../Images/36831916009e7f534eedce59e1e1f2a7.png)

因为 both`force.c`和`measure.c`includes `godzilla.h`，所以一切都会从这个头文件中引用并包含在编译过程中，对吗？

**编辑**

应用：ARM微处理器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:24:46.030

您应该熟悉链接的工作原理。

通常，当您编译时，您会创建带有一些未解析引用的目标文件，这些引用将由链接器解析，从而创建二进制文件。其中一些引用可以指向外部库，并且将“未解析”并在运行时解析。

头文件只是为编译器提供了函数的签名（没有提供有关在哪里找到实际实现的信息），因此它将知道如何将参数传递给函数。如果该函数未在同一模块中定义，则链接器将需要找到它。我不知道您使用的是哪个系统，所以我无法帮助您。

一般来说，在开始编写 C 库之前，您应该非常了解这些概念，否则您将创建一个糟糕的库，该库会在每个次要版本中更改 ABI，并且会因此产生不好的业力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:56:36.670

头文件所做的只是告诉编译器哪些函数可用以及应该如何调用它们（哪些类型的参数有多少，以及返回值）。

它是链接器（或库管理员，在创建库而不是可执行文件时）带来了编译每个 .c 文件所产生的多个目标文件。因此，您需要告诉编译器（例如在命令行上，通过 IDE 或 Makefile）您希望它编译的所有 c 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T23:10:57.840

标头和 .lib 文件之间没有隐式“绑定”

为了创建一个库，您需要明确告知您希望放入哪些编译文件（.obj/.o），链接器会创建库而不考虑标题。

如果不同的 .obj 文件共享数据或相互调用，则在链接时标题确实会发挥作用，但这并没有隐含的意义。

# c# - DTO 是否应该包含其他 DTO 或者这是否构成“行为”？

> ID：14592368
> 
> 赞同：3
> 
> 时间：2013-01-29T21:11:34.157
> 
> 标签：c#, poco, dto

我们正在开始一个新项目，并且正在设计 DTO，这些 DTO 将通过行为注入到相应的 POCO 中。但是，我能找到的每个 DTO 示例仅包含值类型，例如：

```
public class CustomerDTO
{
  public int Age { get; set; }
} 
```

但我们想做的是添加引用其他 DTO 集合的 DTO 属性，例如：

```
public class CustomerDTO
{
  public List<AddressDTO> Addresses { get; set; }
} 
```

这是一个糟糕的设计理念，会给我们带来问题吗？或者，有没有其他方法可以设计不相互引用的真实 DTO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:34:29.867

这是您要添加到 DTO 的典型导航属性。我认为使用它们是有效的，你能遇到的唯一问题是序列化中的循环引用等等。

# c# - 获取所有字母字符的数组

> ID：14592375
> 
> 赞同：4
> 
> 时间：2013-01-29T21:11:48.553
> 
> 标签：c#, .net, string

> **可能重复：**
> [来自 Enumerable.Range 的字符的 A 到 Z 列表](https://stackoverflow.com/questions/5693854/a-to-z-list-of-char-from-enumerable-range)

有没有一种简单的方法来获取`char[]`所有字母字符？

我知道我可以做这样的事情：

```
char[] alphas = new char[]{'a', 'b', 'c', 'd', ..............}; 
```

对于所有大写和小写字符，但我想知道是否有一种更简单（并且看起来更干净）的方法来做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T21:14:07.223

也许是这样的：

```
string alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
char [] alphas = (alphabet + alphabet.ToLower()).ToCharArray(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T21:15:54.753

```
Enumerable.Range((Int32)'A', 2 * 26).Select(c => (Char)c).ToArray(); 
```

Uppps，不起作用 - Z 和 a 之间有一些非字母。

```
Enumerable.Range((Int32)'A', 26)
          .SelectMany(c => new [] { (Char)c, (Char)(c + 'a' - 'A' })
          .ToArray(); 
```

这解决了第一次尝试的问题，但这并不是很干净。另请注意，这种方法将交错大写和小写字母。我可能会坚持以下解决方案。

```
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".ToArray() 
```

或者最好一开始就避免使用这个数组。也许[`Char.IsLetter()`](http://msdn.microsoft.com/en-us/library/yyxz6h5w.aspx)可能有用。或正则表达式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-29T21:17:21.117

这是多么“干净”：

```
char[] alphas = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".ToArray(); 
```

非英文字符怎么办？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-29T21:17:38.840

```
 char[] upperChars = Enumerable.Range(65, 26).Select(c => (Char)c).ToArray();
        char[] lowerChars = Enumerable.Range(97, 26).Select(c => (Char)c).ToArray();
        char[] allChars =
            (Enumerable.Range(65, 26).Select(c => (Char) c)
            .Union(Enumerable.Range(97, 26).Select(c => (Char) c)))
            .ToArray(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T21:14:16.160

您正在将 i 的 ascii 值转换为 char 值。65 是 'A' 的 ascii 值和 90 的 "Z" 97 = "a" 122 = "z"

```
char [] chars = new char[52]
    for(int i=65;i<=90;i++)
     char[i-65]= ConvertToChar(i);

    for(int i=97,j=26;i<=122;i++,j++)
       char[j]= ConvertToChar(i); 
```

# xml - Xml Schema：具有相同名称但基于属性值的不同类型的节点

> ID：14592378
> 
> 赞同：1
> 
> 时间：2013-01-29T21:12:00.833
> 
> 标签：xml, schema

我需要一个完成此任务的模式：

```
<object type="possession">
  <property name="VIN">1111111111111111</property>
  <property name="Year">2003</property>
  <property name="Make">Chevrolet</property>
</object> 
```

*   “VIN”属性必须为 17 个字符
*   "Year 属性必须是 gYear 类型
*   “Make”属性必须符合 {Ford, Chevrolet, Mazda} 的枚举

* * *

**现在我有这个：**

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="object">
    <xs:complexType>
      <xs:choice maxOccurs="unbounded" minOccurs="0">
        <xs:element name="property" maxOccurs="1" minOccurs="0" type="VinType"></xs:element>
        <xs:element name="property" maxOccurs="1" minOccurs="0" type="YearType"></xs:element>
        <xs:element name="property" maxOccurs="1" minOccurs="0" type="MakeType"></xs:element>
      </xs:choice>
      <xs:attribute name="type" type="xs:string" use="required" />
    </xs:complexType>
  </xs:element>

  <!-- Vehicle Identification number (VIN) -->
  <xs:simpleType name="VinRestriction">
    <xs:restriction base="xs:string">
      <xs:length fixed="true" value="17"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="VinType" mixed="true">
    <xs:simpleContent>
      <xs:extension base="VinRestriction">
        <xs:attribute name="name" use="required">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:pattern value="VIN" />
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <!-- Vehicle Year -->
  <xs:simpleType name="YearRestriction">
    <xs:restriction base="xs:gYear"/>
  </xs:simpleType>

  <xs:complexType name="YearType" mixed="true">
    <xs:simpleContent>
      <xs:extension base="YearRestriction">
        <xs:attribute name="name" use="required">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:pattern value="Year" />
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>

  <!-- Vehicle Make -->
  <xs:simpleType name="MakeRestriction">
    <xs:restriction base="xs:string">
      <xs:enumeration value="Chevrolet"/>
      <xs:enumeration value="Ford"/>
      <xs:enumeration value="Mazda"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="MakeType" mixed="true">
    <xs:simpleContent>
      <xs:extension base="MakeRestriction">
        <xs:attribute name="name" use="required">
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:pattern value="Make" />
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:45:23.207

XSD 1.0 的一个众所周知的限制是您不能这样做：元素的类型完全由元素决定。这个问题通常被称为“共现约束”，如果你搜索这个词，你会发现很多参考资料。

它可以在 XSD 1.1 中使用“条件类型分配”的新工具来完成。XSD 1.1 目前在 Xerces (beta) 和 Saxon (EE 9.4) 中实现。

解决该问题的另一种方法是使用管道进行验证，该管道首先进行转换，然后进行验证。转换通常会更改`<property name="VIN">1111111111111111</property>`为`<VIN>11111111111111111</VIN>`

# r - 使用非序列向量作为循环的输入

> ID：14592383
> 
> 赞同：3
> 
> 时间：2013-01-29T21:12:18.767
> 
> 标签：r, loops, vector

我在 R 中的循环函数遇到了一些问题，在这个网站上找不到这个问题的答案。我想使用数字向量作为 R 中循环的输入。

例如：

```
ns <- c(10, 20, 40, 80, 160)

for (n in ns) {
 ni[n] <- round(rnorm(1, mean = n, sd = 1))
} 
```

此代码的结果是一个具有 155 倍 NA 和该向量中有五个正确值的向量。但是，我想摆脱所有这些 NA 并获得一个只有五个正确值的向量。我知道如何从 155 NA 的向量中选择正确的值，但我更喜欢在运行循环后直接获得正确的向量。

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:15:43.453

请记住，R 中的许多函数都是矢量化的

```
> rnorm(length(ns), mean=ns)
[1]   9.905652  19.721717  40.462751  78.982971 160.770257 
```

（在您的问题中，`ni[n]`创建一个与 的最大值相同的向量`n`，即 160 个元素）。

有趣的是，这是从`sapply`@VictorK 提供的解决方案演变而来的。

```
sapply(ns, function(n) round(rnorm(1, mean = n, sd = 1))) 
```

分解`round`并删除默认参数`sd = 1`，所以

```
round(sapply(ns, function(n) rnorm(1, mean = n))) 
```

然后认识到如果我们将它命名为调用中的第一个参数，它`rnorm`可以替换匿名函数。的第一个参数是 named ，所以事情有点混乱；但我们强制 的元素匹配第二个参数。例如第一次通过我们评估的 sapply 。R 首先按名称匹配参数，因此 n=1 匹配 的第一个参数，然后按其余参数中的位置匹配，因此未命名的参数匹配下一个可用参数，)`function(n) ...``sapply``rnorm``n``ns``mean``rnorm(ns[[1]], n=1)``rnorm``ns[[1]]``mean`

```
round(sapply(ns, rnorm, n = 1)) 
```

然后也许我们会看到完全矢量化的解决方案

```
round(rnorm(n = length(ns), mean = ns)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T21:30:48.110

@Martin Morgan 向您展示了如何针对您给出的特定示例正确执行此操作。但是，让我们假设您想要使用未矢量化的函数，或者您想要按照实际示例的方式执行其他操作。

一种方法是迭代的元素的*索引*`ns`，而不是元素本身。考虑

```
ns <- c(10, 20, 40, 80, 160)
ni <- numeric(length = length(ns)) ## pre-allocate storage

for (n in seq_along(ns)) {
  ni[n] <- round(rnorm(1, mean = ns[n], sd = 1))
}

> ni
[1]  12  21  40  80 160 
```

主要区别是

*   使用`seq_along()`来让 R 生成一个 1, 2, 3, ... 序列，只要`ns`, 和
*   使用`n`作为索引`ns`来选择正确的值，而不是使用`n`自身的值。

对于这个例子来说，调用`rnorm()` `lenght(ns)`时间很浪费，但在某些情况下，这样做确实有意义，并且通过循环变量而不是使用循环变量本身进行索引是一种方便的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T21:25:17.133

有几种方法可以动态创建矢量。这里有几个选项：

1）使用循环（但请参阅下一个解决方案，因为您应该尽量避免 R 中的循环）：

```
ns <- c(10, 20, 40, 80, 160)

ni <- numeric(length(ns)) # pre-allocate the resulting vector
for (i in 1:length(ns)) {
  ni[i] <- round(rnorm(1, mean = ns[i], sd = 1))
} 
```

2) 使用 apply 系列函数：

```
sapply(ns, function(n) round(rnorm(1, mean = n, sd = 1))) 
```

第二个是惯用的R。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-25T14:19:13.457

在编码时偶然发现了一个类似的问题..所以我想我会给我的版本一个更干净的循环。我个人会使用以下构造：

```
ns <- c(10, 20, 40, 80, 160)
ni <- numeric(length = length(ns))  # keeping this as per Victor's earlier post#

y=0  #adding starting counter#
 for (i in ns) {  # ns is already defined with its numeric sequence  on line 1 of the  
                  # code #

   y=y+1 # counter used in the ni vector

  ni[[y]] <- meanX(i)  # preferable to create a custom function but not mandatory
 }

ni  # will produce only the 5 outputs of the rnorm function
    # 11  21  41  81 161

## Custom function  ##
meanX <-function(meanX) {round(rnorm(1, mean = meanX, sd = 1))

  return(round(rnorm(1, mean = meanX, sd = 1)))

  }
##  end of Custom function ## 
```

# sql - Oracle 和 MS SQL Query 根据日期时间从一行中获取多行

> ID：14592387
> 
> 赞同：-1
> 
> 时间：2013-01-29T21:12:36.457
> 
> 标签：sql, sql-server, oracle, tsql

嗨，我得到了返回的 Oracle 查询：

[SQLFIDDLE示例](http://sqlfiddle.com/#!4/ab69e/1)

```
 SensorKey    StartTime   EndTime
    45  2012.10.17 08:31    2012.10.17 10:21
    45  2012.10.17 10:26    2012.10.17 10:51
    45  2012.10.17 12:21    2012.10.17 12:26
    45  2012.10.17 12:41    2012.10.17 13:41
    45  2012.10.17 13:51    2012.10.17 14:46
    45  2012.10.17 15:11    2012.10.17 15:16
    45  2012.10.17 15:46    2012.10.17 16:21
    45  2012.10.17 18:51    2012.10.17 18:56
    45  2012.10.17 19:11    2012.10.17 19:56
    45  2012.10.17 20:26    2012.10.17 21:11
    45  2012.10.17 22:16    2012.10.17 22:21
    45  2012.10.17 22:26    2012.10.17 22:56
    45  2012.10.17 23:36    2012.10.18 01:46
    45  2012.10.18 02:16    2012.10.18 02:56
    45  2012.10.18 03:31    2012.10.18 15:06
    45  2012.10.18 15:31    2012.10.18 16:41
    45  2012.10.18 17:41    2012.10.18 18:06
    45  2012.10.18 19:16    2012.10.18 19:26
    45  2012.10.18 19:36    2012.10.18 19:41
    45  2012.10.18 20:51    2012.10.18 23:16
    45  2012.10.19 00:01    2012.10.19 00:51 
```

我需要得到所有数据的结果。第一行示例：

```
 SensorKey    StartTime          EndTime
    45         2012.10.17 08:31 2012.10.17 10:21 
```

像这样等等与其他行：

```
TimeKey    Hour  SensorKey  Duration    StartTime   EndTime
20121017    8         45         29     2012.10.17 08:31    2012.10.17 10:21
20121017    9         45         60     2012.10.17 08:31    2012.10.17 10:21
20121017    10        45         21     2012.10.17 08:31    2012.10.17 10:21 
```

规则：

1.  将一行复制多少小时重叠，例如第一行重叠 8 、 9 、 10 小时。

2.  `Timekey`=`StartTime` 格式中的日期`YYYYMMDD`

    `Hour`= 从`StartTime` 格式`H`24H开始的小时

    `Duration`该小时持续时间（以分钟为单位）。

如果一小时内有多行，则必须将它们分组为第一行的示例：

一世

```
TimeKey    Hour        SensorKey    Duration    StartTime            EndTime
20121017    8          45           29          2012.10.17 08:31    2012.10.17 10:21
20121017    9          45           60          2012.10.17 08:31    2012.10.17 10:21
20121017    10         45           46          2012.10.17 08:31    2012.10.17 10:21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:35:34.463

对于 Oracle，一种方法是模型子句（当我们组成行时，模型子句可以为我们做到这一点）。

一些东西。您似乎只想要精确到分钟的数据，因此为此使用日期与时间戳是有意义的。其次，我会避免在 oracle 的表中使用区分大小写的名称（在下面的查询中，我将您的数据别名回不敏感，以使其更容易编码:)）

```
SQL> with data as (select rownum id, "SensorKey" s_key, cast("StartTime" as date) s_time, cast("EndTime" as date) e_time,
  2                       ((trunc(cast("EndTime" as date) , 'hh24') -trunc(cast("StartTime" as date), 'hh24')) *24)+1 hours
  3                  from table1)
  4  select to_char(block_start, 'yyyymmdd') "TimeKey",
  5         thehour "Hour", s_key "SensorKey",
  6         sum(duration) "Duration", min(s_time) "StartTime", max(e_time) "EndTime"
  7    from (select block_start, thehour, s_key, duration, s_time, e_time
  8            from data
  9            model partition by (id as key)
 10                  dimension by (0 as f)
 11                  measures (s_key, s_time, e_time,
 12                            cast(2 as number(2,0)) duration, hours,
 13                            cast(null as number(2)) thehour,
 14                            cast(null as date) block_start,
 15                            cast(null as date) block_end)
 16                  rules (block_start[for f from 0 to hours[0]-1 increment 1] = trunc(s_time[0] + (cv(f)/24), 'hh24'),
 17                         block_end[any] = trunc(s_time[0] + ((cv(f)+1)/24), 'hh24'),
 18                         s_key[any] = s_key[0],
 19                         s_time[any] = s_time[0],
 20                         e_time[any] = e_time[0],
 21                         duration [any] = case
 22                                            when cv(f) = 0
 23                                            then (least(block_end[cv(f)],e_time[0]) - s_time[0]) * 24*60
 24                                            when cv(f) =  hours[0]-1
 25                                            then (e_time[0] - block_start[cv(f)] ) * 24*60
 26                                            else (block_end[cv(f)] - block_start[cv(f)] ) * 24*60
 27                                          end,
 28                         thehour[any] = to_char(s_time[0] + (cv(f)/24), 'hh24')
 29                        ))
 30   group by block_start, thehour, s_key
 31   order by 5, 2;

TimeKey        Hour  SensorKey   Duration StartTime         EndTime
-------- ---------- ---------- ---------- ----------------- -----------------
20121017          8         45         29 17-oct-2012 08:31 17-oct-2012 10:21
20121017          9         45         60 17-oct-2012 08:31 17-oct-2012 10:21
20121017         10         45         46 17-oct-2012 08:31 17-oct-2012 10:51
20121017         12         45         24 17-oct-2012 12:21 17-oct-2012 13:41
20121017         13         45         50 17-oct-2012 12:41 17-oct-2012 14:46
20121017         14         45         46 17-oct-2012 13:51 17-oct-2012 14:46
20121017         15         45         19 17-oct-2012 15:11 17-oct-2012 16:21
20121017         16         45         21 17-oct-2012 15:46 17-oct-2012 16:21
20121017         18         45          5 17-oct-2012 18:51 17-oct-2012 18:56
20121017         19         45         45 17-oct-2012 19:11 17-oct-2012 19:56
20121017         20         45         34 17-oct-2012 20:26 17-oct-2012 21:11
20121017         21         45         11 17-oct-2012 20:26 17-oct-2012 21:11
20121017         22         45         35 17-oct-2012 22:16 17-oct-2012 22:56
20121018          0         45         60 17-oct-2012 23:36 18-oct-2012 01:46
20121018          1         45         46 17-oct-2012 23:36 18-oct-2012 01:46
20121017         23         45         24 17-oct-2012 23:36 18-oct-2012 01:46
20121018          2         45         40 18-oct-2012 02:16 18-oct-2012 02:56
20121018          3         45         29 18-oct-2012 03:31 18-oct-2012 15:06
20121018          4         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018          5         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018          6         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018          7         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018          8         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018          9         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018         10         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018         11         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018         12         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018         13         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018         14         45         60 18-oct-2012 03:31 18-oct-2012 15:06
20121018         15         45         35 18-oct-2012 03:31 18-oct-2012 16:41
20121018         16         45         41 18-oct-2012 15:31 18-oct-2012 16:41
20121018         17         45         19 18-oct-2012 17:41 18-oct-2012 18:06
20121018         18         45          6 18-oct-2012 17:41 18-oct-2012 18:06
20121018         19         45         15 18-oct-2012 19:16 18-oct-2012 19:41
20121018         20         45          9 18-oct-2012 20:51 18-oct-2012 23:16
20121018         21         45         60 18-oct-2012 20:51 18-oct-2012 23:16
20121018         22         45         60 18-oct-2012 20:51 18-oct-2012 23:16
20121018         23         45         16 18-oct-2012 20:51 18-oct-2012 23:16
20121019          0         45         50 19-oct-2012 00:01 19-oct-2012 00:51

39 rows selected. 
```

一些注意事项：首先我计算了每行所需的时间。

```
SQL> select rownum id, "SensorKey" s_key, cast("StartTime" as date) s_time, cast("EndTime" as date) e_time,
  2         ((trunc(cast("EndTime" as date) , 'hh24') -trunc(cast("StartTime" as date), 'hh24')) *24)+1 hours
  3    from table1;

        ID      S_KEY S_TIME            E_TIME                 HOURS
---------- ---------- ----------------- ----------------- ----------
         1         45 17-oct-2012 08:31 17-oct-2012 10:21          3 
```

这个“HOURS”列将驱动模型子句告诉它每个源行要生成多少行。rownum ID 只是用于唯一键（因为其他数据似乎不能保证唯一性）。

我在 ID 上进行了分区

```
model partition by (id as key) 
```

这意味着我们将每一行作为单独的处理。

在度量中，我们列出了我们将要使用的领域（计算或只是输出）。

```
measures (s_key, s_time, e_time, 
                          cast(null as number(2,0)) duration, hours, 
                          cast(null as number(2)) thehour,
                          cast(null as date) block_start,
                          cast(null as date) block_end) 
```

这些`cast()`列只是不在原始集合中的列，而是我们将在进行时计算的列。 `duration`将保存分钟，`thehour`将显示小时数，`blocks`并将保存当前小时适合的小时槽。

规则是我们完成所有逻辑的地方..so：

```
rules (block_start[for f from 0 to hours[0]-1 increment 1] = trunc(s_time[0] + (cv(f)/24), 'hh24'), 
```

`"for f from 0 to hours[0]-1 increment 1"`表示我们正在根据`HOURS`列生成行（第一行为 3）。

块开始将设置为`17-oct-2012 08:00`第一行和块结束`09:00`（在第 2 行，我们将它们提高一个小时，依此类推。

```
s_key[any] = s_key[0],
s_time[any] = s_time[0],
e_time[any] = e_time[0], 
```

以上三项简单地按原样复制到输出集。ANY 关键字表示匹配所有行（我们可以在这里放置“for f..”逻辑，但 ANY 更简洁。

持续时间是用 case 语句计算的

```
 case 
  when cv(f) = 0
  then (least(block_end[cv(f)],e_time[0]) - s_time[0]) * 24*60
  when cv(f) =  hours[0]-1
  then (e_time[0] - block_start[cv(f)] ) * 24*60
  else (block_end[cv(f)] - block_start[cv(f)] ) * 24*60
end 
```

即`cv(f) = 0`表示第一个输出行（`cv`bieng 一个访问“当前值”的函数，在这种情况下，是`F`变量。所以第一行，我们取块结束（`17-oct-2012 09:00`） - 开始时间（`17-oct-2012 08:31`）并在几分钟内得到它（29分钟). 对于结束行，我们再次取结束时间 ( `17-oct-2012 10:21`) - 块开始 ( `17-oct-2012 10:00`) = 21 分钟之间的所有行，我们只是从块开始中减去块结束（即 60 分钟）

这会给我们的输出为：

```
TimeKey        Hour  SensorKey   Duration StartTime         EndTime
-------- ---------- ---------- ---------- ----------------- -----------------
20121017          8         45         29 17-oct-2012 08:31 17-oct-2012 10:21
20121017          9         45         60 17-oct-2012 08:31 17-oct-2012 10:21
20121017         10         45         21 17-oct-2012 08:31 17-oct-2012 10:21
20121017         10         45         25 17-oct-2012 10:26 17-oct-2012 10:51
...etc.. 
```

但是你说对“10”行进行分组，所以现在它是一个简单的分组来完成这个：

```
select to_char(block_start, 'yyyymmdd') "TimeKey",
       thehour "Hour", s_key "SensorKey", 
       sum(duration) "Duration", min(s_time) "StartTime", max(e_time) "EndTime"
  from (..our model query...)
  group by block_start, thehour, s_key; 
```

# c - 某些 .c 文件的一个标头会导致链接器错误

> ID：14592389
> 
> 赞同：-1
> 
> 时间：2013-01-29T21:12:49.443
> 
> 标签：c, header, linker, makefile

我的设置是这样的：

```
src/
  dir1/
    header.h
    dir11
      (several files, every including header.h)
  dir2/
  (and so on) 
```

但链接器告诉我`undefined reference to (the function which is defined in the subdir "dir11")`。标题如下所示：

```
#ifndef header_h
#define header_h

/* some includes, all protected via ifndef-define-endif */

/* function prototypes for all functions in the 'dir11' subdir */
#endif // header_h 
```

生成文件：

```
# some variables are defined before...

TARGET=mytarget 
SOURCES= ${shell find ${SRC} -type f -name '*.c'} 
OBJECTS=${foreach x, $(basename $(SOURCES)), $(x).o}

compile: ${OBJECTS}

%.o: %.c 
        ${CC} -c ${CFLAGS} ${HEADERS} $^ -o $@

link:
        ${LD} ${OBJECTS} -o ${TARGET} 
```

如何解决这个问题？为子目录中的每个文件编写标题是我想要去的最后一种方式，因为其中有大约 50 个文件！

编辑：也许这很有用：header.h 也包括在内，以调用函数！我是否必须`extern`在包含 elsewere 时声明此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:24:15.600

您所有的包含保护定义是否不同？如果不是，您将收到未定义的参考警告/错误，具体取决于您的编译器设置

# python - Linux 程序（例如 bash 或 python 脚本）如何知道它是如何启动的：从命令行还是交互式 GUI？

> ID：14592390
> 
> 赞同：4
> 
> 时间：2013-01-29T21:12:51.170
> 
> 标签：python, linux, bash, user-interface, command-line-interface

我想做以下事情：

如果 bash/python 脚本是从终端启动的，它应该执行一些操作，例如打印错误消息文本。如果脚本是从 GUI 会话启动的，比如从文件浏览器中双击，它应该做其他事情，例如显示一个 GUI 消息框。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T21:27:12.110

您可以检查是否连接到终端`stdin`。`stdout`从 GUI 运行时，通常`stdin`根本不连接，`stdout`而是连接到日志文件。从终端运行时，两者都`stdin`将`stdout`连接到终端。

在 Python 中：

```
import os
import sys

if os.isatty(sys.stdout.fileno()):
    # print error message text
else:
    # display GUI message 
```

但是，您应该检查这是否适合您，因为它不能完全按照您的要求进行。但这是我能想到的最好的事情，它不依赖于太多的魔法。

`DISPLAY`您也应该在使用 GUI 代码之前检查是否设置了环境变量，因为没有它就无法工作。

请注意，终端用户仍然可以重定向`stdin`或重定向`stdout`到`/dev/null`（例如），这可能会导致您的程序与 GUI 行为一致。所以它远非完美。

最后，即使我已经给了你答案，请不要这样做！程序的行为会根据调用方式而改变，这让用户感到困惑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T21:15:56.840

它可以检查 的值`$DISPLAY`来查看它是否在 X11 下运行，并`$(tty)`查看它是否在交互式终端上运行。`if [[ $DISPLAY ]] && ! tty; then`很有可能您希望显示一个 GUI 弹出窗口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T21:17:49.217

在作为 gnome/kde/whatever 中的菜单项的 .desktop 文件中，添加一个参数，例如

```
yourcommand --gui 
```

这样程序就能知道了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T21:41:11.883

继续 LtWorf 的回答（我无法在评论中描述这一切）

* * *

除了参数之外，您还可以创建一个 shell 脚本，然后使用不同的名称创建第二个指向它的链接，例如`somprog`“ `gsomeprog`gsomeprog”等同于“someprog -gui”

```
$ mv mydevdir/someprog /usr/local/bin
$ cd /usr/local/bin
$ ln someprog gsomeprog 
```

在这种情况下，我更喜欢硬链接，`ln -s`因为“两个”程序将始终彼此相邻，并且永远不会留下悬空的软链接。

在 shell 脚本中，通过检查 arg 零来检查用于调用它的名称

```
#!/bin/sh

mode=console

if [ $(basename ${0}) = gst -o "${1}" = "-gui" ]; then
    mode=gui
fi

echo "Mode is ${mode}" 
```

当然，还有比`"${1}" = "-gui"`可用的更好的选项处理，但这留给读者作为练习。

* * *

我喜欢 Robie Basak 的回答，但请注意他的`someprog > /dev/null`警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T06:35:46.843

您还可以运行一些 X11 实用程序，例如`xdpyinfo`；如果它运行正确，你有一个 X11 服务器，所以你处于 GUI 模式，例如在 bash

```
if xdpyinfo | grep X.Org > /dev/null ; then 
```

# javascript - 将 JS 函数参数传递给 JSP

> ID：14592399
> 
> 赞同：0
> 
> 时间：2013-01-29T21:13:14.460
> 
> 标签：javascript, function, jsp, parameters

> **可能重复：**
> [使用 javascript 调用服务器端函数](https://stackoverflow.com/questions/9908210/calling-a-server-side-function-using-a-javascript)

我正在尝试使用 Javascript 函数中的参数来调用 Java 中的静态类，如下所示：

```
<script language="javascript" type="text/javascript">
function changeResp(ID,name)
{

    var isChecked = document.getElementById(name).checked;

    if(isChecked)
    {
        <%Finder.findByIdAndName(ID,name);%>
    }

    else
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:14:34.623

你不能这样做。

Javascript 在客户端（在您的情况下），Java 在服务器上。

您可以向 Java 服务器设置一些 AJAX 请求来运行该功能。

# apache - Apache RewriteEngine CSS 和 RewriteRules

> ID：14592400
> 
> 赞同：0
> 
> 时间：2013-01-29T21:13:19.400
> 
> 标签：apache, .htaccess, mod-rewrite

我在本地主机上使用重写引擎时遇到了一些问题。我正在我的`www/project1/`文件夹中的一个站点上工作，我正在尝试使用重写引擎。但是我遇到了一些问题：

首先这是我的 .htaccess 文件：

```
RewriteEngine On  

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^profile$ ./index.php?p=userprofile 
RewriteRule ^profile/(.*)$ ./index.php?p=userprofile&id=$1 [L]

RewriteRule $(.*)$ ./index.php&c=$1 
```

基本上我想重写所有`/profile`链接以`index.php?p=userprofile`
重写所有`/profile/5`链接`index.php?p=userprofile&id=5`

和所有其他人（例如`/somepage`）`index.php?c=somepage`

使用上述 .htaccess 时，我首先会收到 500 Internal Server Error。但是，当删除最后一个重写时，这个错误就会消失。

删除最后一条规则后，另一个问题出现了当`localhost/project1/profile`一切正常但添加另一个参数时：`localhost/project1/profile/5`我所有的 css 都消失了。

我的 CSS 包括如下：`href="style/main.css"`

该文件因此位于`localhost/project1/style/main.css`

现在我尝试通过添加 a 来使路径相对，`/` 但是 CSS 根本没有应用，不是 on`index.php`也不是 on`project1/profile`

有什么解决方案可以让我的 3 条规则生效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:11:50.473

最后一条规则是错误的。

```
RewriteEngine on

RewriteRule ^profile$ index.php?p=userprofile [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^profile/(.*)$ index.php?p=userprofile&id=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?c=$1 [L] 
```

关于 CSS，您必须使用**绝对**路径。所以你需要`href="/project1/style/main.css"`

您也可以为此使用 .htaccess 规则，而不是更改所有 url。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.*/style.css$ style.css [NC,L] 
```

**您必须将它放在 .htaccess 中的所有规则之前。**

# linux - ATLAS 安装：确实需要通过 CPU 油门检查

> ID：14592401
> 
> 赞同：12
> 
> 时间：2013-01-29T21:13:25.507
> 
> 标签：linux, installation, cpu-speed, atlas

ATLAS 3.10.1 不会安装在我组织的 CentOS 6.x 平台上，因为它检测到 CPU 节流。在旧版本的软件包中，有一个配置标志可以关闭油门检查 ( `-Si cputhrchk 0`) 并继续前进。该选项在几个版本前被取消。我理解该决定背后的原因——开发人员担心他们的软件的性能和声誉，而 CPU 节流使 ATLAS 无法自行调整。美好的。我的问题是，不管 ATLAS 的性能如何，我只*需要构建这个东西*. 我知道有一些方法可以停止节流，但我没有也可能不会获得在这台机器上弄乱 CPU 频率的权限。所以我需要的是一种通过 ATLAS 油门检查的方法。我看过一些关于破解配置脚本的讨论，但我自己看不到如何去做。没有人在 ATLAS sourceforge 网站上回答，这并不是要批评那里的任何人。只是想表明我的情况。所以：有人知道如何通过 ATLAS 的油门检查吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-30T16:36:45.077

**免责声明：以下内容是一种肮脏、低俗、卑鄙的黑客行为（包含所有暗示的负面含义，没有任何正面含义），仅用作最后的手段。我和 ATLAS 开发人员对您的 ATLAS 库因使用它而遭受的性能损失不承担任何责任。**

确保您首先了解 CPU 节流检查的原因：ATLAS 提供了一些算法的“自动调整”，如果启用了 CPU 节流，它就无法调整（因为基准测试时序不可靠）。用以下话说`INSTALL.txt`：“CPU 节流几乎使所有时间都完全随机，**因此任何 ATLAS 安装都将是垃圾**”（强调我的）。如果可能，请关闭 CPU 节流。

如果您绝对无法关闭 CPU 节流，并且您只需要安装有效的 ATLAS 即可，无论性能有多么下降，请尝试以下操作：

```
cd /path/to/ATLAS
patch -p0 CONFIG/src/probe_arch.c << EOF
@@ -238,8 +238,7 @@ int main(int nargs, char **args)
       printf("CPU MHZ=%d\n",
              ProbeOneInt(OS, asmd, targ, "-m", "CPU MHZ=", &sure));
    if (flags & Pthrottle)
-      printf("CPU THROTTLE=%d\n",
-             ProbeOneInt(OS, asmd, targ, "-t", "CPU THROTTLE=", &sure));
+      printf("CPU THROTTLE=0\n");
    if (flags & P64)
    {
       if (asmd == gas_x86_64)
EOF 
```

该补丁适用于 atlas 3.10.1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-11T21:52:31.550

另一种禁用 CPU 节流的方法（从 3.10.2 开始）是将`CONFIG/src/config.c`'`GetFlags()`方法修改为设置`ThrChk`为 0。

```
cd /path/to/ATLAS/CONFIG/src
patch -p0 config.c << EOF
@@ -1026,7 +1026,7 @@
    *verb = 0;
    *NoCygwin = 0;
    *NoF77 = 0;
-   *ThrChk = 1;
+   *ThrChk = 0;
    *nthreads = -1;
    *tids = NULL;
    *omp = *AntThr = 0;
EOF 
```

请注意，维护者`-Si cputhrchk 0`因滥用而被删除，如以下评论所示`config.c`：

```
/* Disabled due to abuse
      fprintf(stderr,
        "      -Si cputhrchk <0/1> : Ignore/heed CPU throttle probe\n");
 */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-23T06:49:40.747

在 3.10.3 版本中，实际上有一个配置标志`--cripple-atlas-performance`，可以编译 ATLAS 而无需关心限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-28T19:35:00.957

如何在最近使用较新版本的 Fedora Linux（例如 Fedora 22）的计算机中关闭 CPU 节流。食谱：

1) 使用 root 权限打开文件 /etc/default/grub 并在变量 GRUB_CMDLINE_LINUX 中添加参数“intel_pstate=disable”，然后保存文件，例如：

GRUB_CMDLINE_LINUX="intel_pstate=disable rhgb quiet" #（其他参数）

2) 重新生成 GRUB 配置以应用新的更改：

a) 对于 BIOS 系统：# grub2-mkconfig -o /boot/grub/grub2.cfg

b) 对于 UEFI 系统：# grub2-mkconfig -o /boot/efi/EFI/fedora/grub.cfg

并重新启动。

关于 (i) 配置 GRUB 引导加载程序和 (ii) 当系统是 UEFI 或 BIOS 时，在 Fedora Linux 中，例如参见：

[https://docs.fedoraproject.org/en-US/Fedora/22/html/Multiboot_Guide/GRUB-configuration.html](https://docs.fedoraproject.org/en-US/Fedora/22/html/Multiboot_Guide/GRUB-configuration.html)

[https://docs.fedoraproject.org/en-US/Fedora/23/html/Multiboot_Guide/BOOT-BIOS_or_UEFI.html](https://docs.fedoraproject.org/en-US/Fedora/23/html/Multiboot_Guide/BOOT-BIOS_or_UEFI.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T19:04:42.353

好吧，这不是一个很好的答案，但以防万一有人想知道：这里的系统管理员实际上允许我对 CPU 节流进行监控，所以现在 ATLAS 正在构建中。但是，嘿，如果有人有真正的答案，请让我和其他看过这个问题的人知道。我很确定我会再次面对这种情况，也许还有一个更顽固的系统管理员要担心。

# rest - 我的 REST API 是否可以使用此安全/身份验证？

> ID：14592403
> 
> 赞同：0
> 
> 时间：2013-01-29T21:13:28.483
> 
> 标签：rest, authentication, ssl

我有一个安静的 API，我已经为他们分配了一个 userId 和一个密钥。`Basic Authentication`为了调用 API，他们通过 SSL 为 HTTP 凭证提供这些凭证。

这足够安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:15:23.977

基本身份验证通过 SSL 是安全的。不用担心，HTTP 数据包的用户名/密码部分在使用 SSL 时会被加密。

# ruby - 这种反射方法可以用一个参数而不是两个参数来编写吗？

> ID：14592405
> 
> 赞同：0
> 
> 时间：2013-01-29T21:13:32.820
> 
> 标签：ruby, watir-webdriver

这主要是一个 Ruby 问题，但我已将其标记为 watir-webdriver，因为该示例包含 watir-webdriver 代码，希望它能提高清晰度。

我有一个类可以检索和更新在网页上找到的数据。该数据存储在类的实例变量中。

该类包含一个方法，该方法将使用现有的实例变量值来更新网页上的选择列表，或者，如果实例变量为 nil，它将获取选择列表的值并将其存储在实例变量中。

该方法当前如下所示：

```
def get_or_select!(inst_var_sym, select_list)
  value = instance_variable_get inst_var_sym
  if value==nil
    instance_variable_set inst_var_sym, select_list.selected_options[0].text
  else
    select_list.select value
  end
end 
```

这行得通，但我想知道是否有一种方法可以编写方法，使其可以直接应用于实例变量（而不是实例变量的符号匹配器），并将 select_list 对象作为其单个参数。

换句话说，目前看起来像这样：

```
get_or_select!(:@instance_variable, select_list) 
```

我想看起来像这样：

```
@instance_variable.get_or_select!(select_list) 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:45:22.990

新答案：由于变量在您定义它之前不存在，因此您不能在其上调用方法。调用类必须设置它。你可以做一个简单的 if 检查。

```
#In the calling class, not the variable class  
  if @instance_variable       # If it is defined, this is true
    returned_list = select_list.select @instance_variable.value # Gets the selected list 
  else
    @instance_variable = instance_variable_set inst_var_sym, select_list.selected_options[0].text
  end 
```

下面的旧答案：你不能使用条件赋值吗？ [http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#1._Assignment](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#1._Assignment)

```
x = find_something() #=>nil
x ||= "default"      #=>"default" : value of x will be replaced with "default", but only if x is nil or false
x ||= "other"        #=>"default" : value of x is not replaced if it already is other than nil or false 
```

所以对于这个它会是这样的......

```
instance_variable_get inst_var_sym ||= instance_variable_set inst_var_sym, select_list.selected_options[0].text 
```

# java - Jersey：如何在多个 Web 模块之间共享 ExceptionMapper？

> ID：14592408
> 
> 赞同：2
> 
> 时间：2013-01-29T21:13:53.873
> 
> 标签：java, rest, jakarta-ee, jersey, jax-rs

当我的异常映射器类位于 .war 包中时，它可以完美地工作。问题是我有几个共享相同异常层次结构的 .war 包。我正在考虑将我的异常映射器类放入实用程序 jar 中，并将它们放入应用程序服务器的“/lib”文件夹中。这个实用程序 jar 已经包含我的自定义异常类。事实证明，一旦将 Jersey 放在 .war 包之外，它们就找不到我的异常映射器类。

有没有办法启用位于“/lib”文件夹中的 Jersey 扫描提供程序？

顺便说一句，我的应用程序服务器是“JBoss AS 6.0”，我正在使用 Jersey SpringServlet。这是我的 web.xml 配置片段：

```
 <servlet>
    <servlet-name>Jersey Web Application</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>
            com.sample.rest
        </param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey Web Application</servlet-name>
    <url-pattern>/*</url-pattern>       
</servlet-mapping> 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T17:01:59.737

您需要告诉 jersey 扫描 web.xml 中包含 ExceptionHandler 的包。只需用';'分隔它们

它应该看起来像这样：

```
<servlet>
    <servlet-name>Jersey Web Application</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.company.app.rest;com.company.util.exception</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

# activerecord - Rails 链 ActiveRecord 连接

> ID：14592417
> 
> 赞同：2
> 
> 时间：2013-01-29T21:14:16.090
> 
> 标签：activerecord, join, associations

我正在使用一个关联名称数组，并且我想执行连接来构建一个 ActiveRecord::Relation 对象。我想做类似以下的事情：

```
association_names = %w(assoc1 assoc2 assoc3 ... assocN)
my_relation = MyModel.where(nil)
association_names.each{|name| my_relation = my_relation.joins(name.to_sym) } 
```

但这会导致错误消息：

> ActiveRecord::ConfigurationError: 未找到名为“assoc2”的关联；也许你拼错了？

复杂之处在于这些关联并非都直接加入到`MyModel`; 而是`MyModel`与 相关联`:assoc1`，并且与`Assoc1`相关联`:assoc2`，并且`Assoc2`与`:assoc3`等相关联。

我应该做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T16:17:41.630

你的（我的）连接很复杂，所以它不应该只是一个数组。它应该更像：

```
my_relation.joins([{assoc1 => [assoc2, {assoc3 => assoc4}]}, assoc5]) 
```

如果您使用关联名称数组进行操作，那么实际上并没有一种方便的方法来实现他，但是您可以编写一些额外的代码来测试给定的关联是否属于当前模型。

以下说明了此类任务中涉及的概念，但请注意这是一个不好的示例，因为它既不彻底也不健壮。

```
models = [MyModel]
joins = []
while associations.present? do
  associations.each do |a|
    models.each do |m|
      assoc_model = m.reflect_on_association(a)
      # assoc_model will be non-nil if there is an association for the given model and given name
      if assoc_model
        # add the associated class to models (for continued iteration)
        models << assoc_model.class_name
        # Somehow workout where in your complex Array of +joins+ this assoc this association belongs.
        # There are too many possible implementations to pick one for my time. 
        # ...
      end
    end
  end
end 
```

# performance - 在具有节点和边权重的图中找到最短路径？

> ID：14592420
> 
> 赞同：6
> 
> 时间：2013-01-29T21:14:19.303
> 
> 标签：performance, algorithm, language-agnostic, graph, complexity-theory

假设我有一个加权图，边和顶点都有权重。如何找到从某个节点 s 到某个节点 t 的“最便宜”路径？我的复杂度应该是 O(n ² (n+m))。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:22:57.933

解决这个问题的一种方法是将图形转换为一个新的图形，其中只有边被加权，而不是顶点。为此，您可以将每个节点拆分为两个节点，如下所示。对于任何节点 v，创建两个新节点 v [1]和 v [2]。之前进入节点 v 的所有边现在都进入节点 v [1]，所有离开节点 v 的边现在都离开 v [2]。然后，在 v [1]和 v [2]之间放置一条边，其成本是节点 v 的成本。

在这个新图中，从一个节点到另一个节点的路径成本对应于原始图中原始路径的成本，因为仍然支付所有边权重，并且现在使用新插入的边支付所有节点权重。

构建这个图应该在 O(m + n) 时间内是可行的，因为您需要将每条边恰好更改一次，并且每个节点只更改一次。从那里，您可以使用普通的 Dijkstra 算法在 O(m + n log n) 时间内解决问题，给出 O(m + n log n) 的整体复杂度。如果存在负权重，则可以改用 Bellman-Ford 算法，总复杂度为 O(mn)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-22T20:27:49.847

我认为可以在我们只有边加权的图 G' 中转换该图 G。转换的算法非常简单，因为我们对边和节点都进行了加权，所以当我们从 A -> B 移动时，我们知道从 A 移动到 B 的总权重是边的权重（A -> B）加上权重B 本身，所以让这两个权重的 A -> B 边权重和 B 的权重为零。比我们可以找到从任何节点 s 到任何节点到 O(mlogn) 的最短路径，其中（n - 节点数，m - 边数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:39:17.500

修改[Djkstra 后](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm) 应该可以工作

```
 1  function Dijkstra(Graph, source):
     2      for each vertex v in Graph:                                // Initializations
     3          dist[v] := infinity ;                                  // Unknown distance function from 
     4                                                                 // source to v
     5                                                                 // Previous node in optimal path
     6      end for                                                    // from source
     7      
     8      dist[source] := source.cost ;                                        // Distance from source to source
     9      Q := the set of all nodes in Graph ;                       // All nodes in the graph are
    10                                                                 // unoptimized - thus are in Q
    11      while Q is not empty:                                      // The main loop
    12          u := vertex in Q with smallest distance in dist[] ;    // Start node in first case
    13          remove u from Q ;
    14          if dist[u] = infinity:
    15              break ;                                            // all remaining vertices are
    16          end if                                                 // inaccessible from source
    17          
    18          for each neighbor v of u:                              // where v has not yet been 
    19                                                                 // removed from Q.
    20              alt := dist[u] + dist_between(u, v)+v.cost ;
    21              if alt < dist[v]:                                  // Relax (u,v,a)
    22                  dist[v] := alt ;
    23                                 
    24                  decrease-key v in Q;                           // Reorder v in the Queue
    25              end if
    26          end for
    27      end while
    28  return dist; 
```

# android - 加入广播组

> ID：14592426
> 
> 赞同：1
> 
> 时间：2013-01-29T21:14:38.543
> 
> 标签：android

有没有办法一起加入单选组，所以当单击组 a 中的按钮时，未单击组 b 中的按钮

```
 <RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_below="@id/NFCHeaderTextView"
                    android:layout_width="fill_parent"
                    android:background="@drawable/back"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:id="@+id/hello">

   <RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:background="@drawable/back"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:id="@+id/RadioGroup">
    </RadioGroup>
    <TextView android:id="@+id/Savings"
                android:background="@drawable/two_tone_green_button_selector"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textStyle="bold"
                android:textSize="16dp"
                android:gravity="left|center_vertical"
                android:textColor="@color/two_green_button_color_selector"
                android:onClick="onRadioButtonClicked"
                android:text="@string/Savings"/>

   <RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:background="@drawable/back"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:id="@+id/SavingsR">
    </RadioGroup>

   <TextView android:id="@+id/Credit"
                android:background="@drawable/two_tone_green_button_selector"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textStyle="bold"
                android:textSize="16dp"
                android:gravity="left|center_vertical"
                android:textColor="@color/two_green_button_color_selector"
                android:onClick="onRadioButtonClicked"
                android:text="@string/Credit"/>

   <RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
                    android:layout_width="fill_parent"
                    android:background="@drawable/back"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:id="@+id/CreditR">
    </RadioGroup>
    </RadioGroup>
    </RelativeLayout> 
```

我有这段代码，但是当我运行它时，我仍然可以单击来自两个不同组的两个按钮，我在 eclipse 中使用 java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:20:13.167

编辑：

我很快写了一些示例代码，在这个例子中，我们有两个不同的单选组，但只能检查两组中的一个单选按钮。我们正在使用 OnCheckedChangeListener 来捕获与 RadioGroup 内单选按钮状态变化相关的事件。这是一些示例代码，并不是处理 OnCheckedChangeListener 回调的正确方法，我只是想向您展示一个包含两个无线电组的示例。我希望这会有所帮助。

爪哇：

```
 final RadioGroup group1 = (RadioGroup) findViewById(R.id.radiogroup1);
    final RadioGroup group2 = (RadioGroup) findViewById(R.id.radiogroup2);

    group1.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            ((RadioButton)group2.findViewById(R.id.option4)).setChecked(false);
            ((RadioButton)group2.findViewById(R.id.option5)).setChecked(false);
            ((RadioButton)group2.findViewById(R.id.option6)).setChecked(false);
        }
    });

    group2.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            ((RadioButton)group1.findViewById(R.id.option1)).setChecked(false);
            ((RadioButton)group1.findViewById(R.id.option2)).setChecked(false);
            ((RadioButton)group1.findViewById(R.id.option3)).setChecked(false);
        }
    }); 
```

XML:

```
 <RadioGroup
    android:id="@+id/radiogroup1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <RadioButton
        android:id="@+id/option1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Option 1" />

    <RadioButton
        android:id="@+id/option2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Option 2" />

    <RadioButton
        android:id="@+id/option3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Option 3" />
</RadioGroup>

<RadioGroup
    android:id="@+id/radiogroup2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <RadioButton
        android:id="@+id/option4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Option 4" />

    <RadioButton
        android:id="@+id/option5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Option 5" />

    <RadioButton
        android:id="@+id/option6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Option 6" />
</RadioGroup> 
```

原来的：

使用[OnCheckedChangeListener](http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html)，当 Radio 状态发生变化时会调用此侦听器。使用此功能，您可以循环另一个 RadioGroup 以取消选中其他单选按钮。

希望这可以帮助，

如果不在下面评论

# android - android：有人看到 -componentinfo java.lang.nullpointerexception 吗？

> ID：14592427
> 
> 赞同：-6
> 
> 时间：2013-01-29T21:14:47.130
> 
> 标签：android

注释掉几乎所有内容仍然找不到空值？？我只在 2.1 上得到这个错误，任何更高的都运行良好？？谢谢您的帮助。

```
public class BizProfiles extends Activity {

    private Button button;
    private Button btnFbLogin;
    private Button btnPostToWall;
    private Button btnTLogin;
     // Facebook APP ID
    private static String APP_ID = "App ID here"; // 

    // Instance of Facebook Class
    private Facebook facebook;
    @SuppressWarnings("unused")
    private AsyncFacebookRunner mAsyncRunner;
    String FILENAME = "AndroidSSO_data";
    private SharedPreferences mPrefs;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        final Context context = this;
        super.onCreate(savedInstanceState);
        facebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(facebook);

        /////////////////////////////////////////////////////////////////////////////////
        Display display = getWindowManager().getDefaultDisplay(); 
        int width = display.getWidth();
        int height = display.getHeight();
        if (width == 320 && height == 480)
        {
              setContentView(R.layout.bizprofiles320); 
              Log.v("blah", "320 layout");
        }
        else
        {
            Log.v("blah", "480 800 layout");

            setContentView(R.layout.bizprofiles);
        //////
        }
//      String name = getIntent().getExtras().getString("BizName");
//      String address = getIntent().getExtras().getString("BizAddress");
//      String phone = getIntent().getExtras().getString("BizPhone");
//      String about = getIntent().getExtras().getString("BizAbout");
//      String monfri = getIntent().getExtras().getString("BizMonFri");
//      String satsun = getIntent().getExtras().getString("BizSatSun");
//      String imgname = getIntent().getExtras().getString("BizImg");
//      final String website = getIntent().getExtras().getString("BizWeb");

        //////
        button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

          public void onClick(View arg0) {
            Intent intent = new Intent(context, BizWebSite.class);
         //   intent.putExtra("BizWeb", website.toString());
            startActivity(intent);
          } });

        btnFbLogin = (Button) findViewById(R.id.button2);
        btnFbLogin.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                    loginToFacebook();
                }
        });

        btnPostToWall = (Button) findViewById(R.id.Button01);
        btnPostToWall.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                postToWall();
            }
        });

        btnTLogin = (Button) findViewById(R.id.tlogin);
        btnTLogin.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
//              Intent intent = new Intent(context, TweetPage.class);
//           //   intent.putExtra("BizWeb", website.toString());
//              startActivity(intent);

                 new Twitter_Dialog(BizProfiles.this,"http://twitter.com/?status="+Uri.encode("Twitter Post")).show();

            }
        });

       // String getimg = imgname;
//        int resID = getResources().getIdentifier(imgname, "drawable", "com.RforR.ForPlay1");
//      ImageView image = (ImageView) findViewById(R.id.imageView3); //null;
//      image.setImageResource(resID);
        //System.out.println(resID);
        //Log.v("blah*************", resID);

//      AutoResizeTextView obtar = new AutoResizeTextView(context);
//      obtar tvme = (TextView) findViewById(R.id.tvName);

//        TextView theTextView = (TextView) findViewById(R.id.tvName);
//        theTextView.setText(name);
//        TextView theAdd = (TextView) findViewById(R.id.tvAddress);
//        theAdd.setText(address);
//        TextView thePhone = (TextView) findViewById(R.id.tvPhone);
//        thePhone.setText(phone);

    }

    public void onGetNames(View gn)
    {

//      String name = getIntent().getExtras().getString("BizName");
//      String address = getIntent().getExtras().getString("BizAddress");
//      String phone = getIntent().getExtras().getString("BizName");
//      String about = getIntent().getExtras().getString("BizAbout");
//      String monfri = getIntent().getExtras().getString("BizMonFri");
//      String satsun = getIntent().getExtras().getString("BizSatSun");
//      
//      System.out.println(name);
//      System.out.println(about);
//      System.out.println(satsun);

        Log.v("blah", "blah blah");

    }

    public void loginToFacebook() {
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);

        if (access_token != null) {
            facebook.setAccessToken(access_token);
        }

        if (expires != 0) {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid()) {
            facebook.authorize(this,
                    new String[] { "email", "publish_stream" },
                    new DialogListener() {

                        public void onCancel() {
                            // Function to handle cancel event
                        }

                        public void onComplete(Bundle values) {
                            // Function to handle complete event
                            // Edit Preferences and update facebook acess_token
                            SharedPreferences.Editor editor = mPrefs.edit();
                            editor.putString("access_token",
                                    facebook.getAccessToken());
                            editor.putLong("access_expires",
                                    facebook.getAccessExpires());
                            editor.commit();
                        }

                        public void onError(DialogError error) {
                            // Function to handle error

                        }

                        public void onFacebookError(FacebookError fberror) {
                            // Function to handle Facebook errors

                        }

                    });
        }
    }

    public void postToWall() {
        // post on user's wall.
        facebook.dialog(this, "feed", new DialogListener() {

            public void onFacebookError(FacebookError e) {
            }

            public void onError(DialogError e) {
            }

            public void onComplete(Bundle values) {
            }

            public void onCancel() {
            }
        });

    }

    public void onGoBk(View cc)
    {

        finish();
    }

} 
```

日志猫

![在此处输入图像描述](../Images/9b9b46dd89f0d6ca88d05228554ff1fd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:50:01.390

你在 21 及以下得到你的空指针异常，因为`getHeight`然后`getWidth`被添加了。试试这个 ;

```
if (  Integer.valueOf(android.os.Build.VERSION.SDK_INT) < 13 ) {
     Display display = getWindowManager().getDefaultDisplay(); 
     int width = display.getWidth();
     int height = display.getHeight();
   } else {
       Display display = getWindowManager().getDefaultDisplay();
          Point size = new Point();
          display.getSize(size);
          int width = size.x;
          int height = size.y;
   } 
```

您可能需要使用 API 级别（我不记得 2.1 是什么）

# java - Maven找不到Equinox eclipse的版本

> ID：14592429
> 
> 赞同：1
> 
> 时间：2013-01-29T21:14:50.840
> 
> 标签：java, eclipse, maven, jar

我确保我的`.m2`存储库包含违规`app-1.0.0-v20070606.jar`内容，这也是来自官方 Equinox[页面](http://archive.eclipse.org/eclipse/equinox/drops/R-3.3-200706251500/index.php)的最新版本。

因此，当我`mvn install`在命令提示符下执行操作时，我得到一个`BUILD ERROR`：无法解析工件。在 [1.0.0-v20070606] 中找不到与范围 [1.0.0,2.0.0) 匹配的版本 org.eclipse.equinox:app:jar:null 在 [1.0.0-v20070606] 中找不到版本] 以匹配`org.eclipse.equinox:app:jar:null`来自指定远程存储库的 范围 [1.0.0,2.0.0) ：`central (http://repo1.maven.org/maven2)`

有什么我想念的吗？

POM[链接](http://dl.dropbox.com/u/19509627/AjaxServicesPom.xml)

# css - 中心元素到父元素并允许在没有绝对定位的情况下进行剪辑

> ID：14592435
> 
> 赞同：2
> 
> 时间：2013-01-29T21:15:19.747
> 
> 标签：css, position, overflow, center, clip

我一直在努力解决这个问题。我需要在它的父级中居中一个子级，如果它的宽度超过父级的宽度，则允许父级剪辑它。这很容易用 来完成`position: absolute;`，但是这个元素的宽度是未知的，所以这是不行的。

狡猾的方法是将孩子设置为`display: inline-block;`，将父母设置为`text-align: center;`，但这不允许我正在寻找的剪辑。相反，它使孩子左对齐并剪裁右侧。我需要它均匀地夹住。

我错过了一个技巧还是应该找到另一种方法？希望有一些表（ew）黑客或我没有考虑过的东西。

jsFiddle 演示：http: [//jsfiddle.net/JRz6a/1/](http://jsfiddle.net/JRz6a/1/)

图像演示：

![在此处输入图像描述](../Images/f622386afb9f10a7f596f903246344af.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T04:39:51.830

您可以尝试将溢出：隐藏在父级中。

# postgresql - PostgreSQL 错误：由于与恢复冲突而取消语句

> ID：14592436
> 
> 赞同：208
> 
> 时间：2013-01-29T21:15:22.510
> 
> 标签：postgresql, postgresql-9.1

在待机模式下在 PostgreSQL 数据库上运行查询时出现以下错误。导致错误的查询可以正常工作 1 个月，但是当您查询超过 1 个月时，会出现错误。

```
ERROR: canceling statement due to conflict with recovery
Detail: User query might have needed to see row versions that must be removed 
```

有关如何解决的任何建议？谢谢

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2017-12-05T19:33:42.043

无需触摸`hot_standby_feedback`。正如其他人所提到的，将其设置为`on`可以膨胀大师。想象一下在奴隶上打开交易而不是关闭它。

相反，将`max_standby_archive_delay`和设置`max_standby_streaming_delay`为一些理智的值：

```
# /etc/postgresql/10/main/postgresql.conf on a slave
max_standby_archive_delay = 900s
max_standby_streaming_delay = 900s 
```

这样，对持续时间小于 900 秒的从站的查询将不会被取消。如果您的工作负载需要更长的查询，只需将这些选项设置为更高的值。

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2013-01-29T23:51:54.830

在热备服务器上运行查询有点棘手——它可能会失败，因为在查询期间，一些需要的行可能会在主服务器上更新或删除。由于主节点不知道查询是在辅助节点上启动的，因此它认为它可以清理（清理）其行的旧版本。然后辅助必须重播此清理，并且必须强制取消所有可以使用这些行的查询。

更长的查询将更频繁地被取消。

您可以通过在主节点上启动可重复的读取事务来解决此问题，该事务执行虚拟查询，然后在辅助节点上运行真正的查询时处于空闲状态。它的存在将防止清理主节点上的旧行版本。

有关此主题和其他解决方法的更多信息，请参阅文档中的[Hot Standby — 处理查询冲突](http://www.postgresql.org/docs/current/static/hot-standby.html#HOT-STANDBY-CONFLICT)部分。

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2014-02-10T19:34:59.283

无需在主服务器上启动空闲事务。在 postgresql-9.1 中，解决这个问题最直接的方法是通过设置

```
hot_standby_feedback = on 
```

这将使 master 知道长时间运行的查询。从[文档](http://www.postgresql.org/docs/9.4/static/hot-standby.html)：

> 第一个选项是设置参数 hot_standby_feedback，它可以防止 VACUUM 删除最近失效的行，因此不会发生清理冲突。

为什么这不是默认值？这个参数是在初始实现之后添加的，它是备用服务器影响主服务器的唯一方式。

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2015-10-22T13:58:34.247

如此[处](http://postgresql.nabble.com/Hot-Standby-Feedback-should-default-to-on-in-9-3-tp5734379p5734387.html#a5734387)所述：`hot_standby_feedback = on`

> 嗯，它的缺点是standby会使master膨胀，这可能也让一些人感到惊讶

[在](http://postgresql.nabble.com/Hot-Standby-Feedback-should-default-to-on-in-9-3-td5734379.html#a5734411)这里：

> max_standby_streaming_delay 的设置是什么？我宁愿将其默认为 -1 而不是默认的 hot_standby_feedback 。这样你在备用服务器上所做的只会影响备用服务器

所以我加了

```
max_standby_streaming_delay = -1 
```

对我们来说不再有`pg_dump`错误，也不会出现膨胀 :)

对于 AWS RDS 实例，请查看[http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Appendix.PostgreSQL.CommonDBATasks.html](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Appendix.PostgreSQL.CommonDBATasks.html)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-10-05T08:56:02.463

热备从服务器上的表数据在长时间运行的查询运行时被修改。确保表数据未被修改的解决方案（PostgreSQL 9.1+）是暂停复制并在查询后恢复：

```
select pg_xlog_replay_pause(); -- suspend
select * from foo; -- your query
select pg_xlog_replay_resume(); --resume 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-02-19T16:18:06.243

我将在上面添加一些更新的信息和对@max-malysh 出色答案的引用。

简而言之，如果你在master上做某事，它需要在slave上复制。Postgres 为此使用 WAL 记录，这些记录在主服务器上的每个记录操作之后发送到从服务器。从机然后执行动作，两者再次同步。在几种情况之一中，您可能会在从站上与 WAL 操作中从主站传入的内容发生冲突。在大多数情况下，slave 上发生的事务与 WAL 操作想要更改的内容相冲突。在这种情况下，您有两种选择：

1.  将 WAL 动作的应用延迟一点，让从机完成其冲突事务，然后应用该动作。
2.  取消slave上的冲突查询。

我们关心 #1 和两个值：

*   `max_standby_archive_delay`- 这是在主从之间长时间断开连接后使用的延迟，当从 WAL 存档中读取数据时，这不是当前数据。
*   `max_standby_streaming_delay`- 当通过流复制接收到 WAL 条目时，用于取消查询的延迟。

通常，如果您的服务器用于高可用性复制，您希望这些数字保持简短。（如果没有给出单位，则为毫秒）的默认设置`30000`就足够了。但是，如果您想设置可能具有非常长时间运行的查询的存档、报告或只读副本，那么您需要将其设置为更高的值以避免取消查询。上面推荐的`900s`设置似乎是一个很好的起点。我不同意官方文档将无限值设置`-1`为一个好主意——这可能会掩盖一些错误的代码并导致很多问题。

关于长时间运行的查询并将这些值设置得更高的一个警告是，在从属服务器上与导致 WAL 操作延迟的长时间运行的查询并行运行的其他查询将看到旧数据，直到长查询完成。开发人员需要了解这一点并序列化不应同时运行的查询。

有关如何`max_standby_archive_delay`和`max_standby_streaming_delay`工作以及为什么的完整说明，[请转到此处](https://www.postgresql.org/docs/12/hot-standby.html#HOT-STANDBY-CONFLICT)。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-02-16T05:14:50.767

答案可能为时已晚，但我们在生产中面临同样的问题。之前我们只有一个 RDS，随着应用端用户数量的增加，我们决定为其添加只读副本。只读副本在暂存阶段可以正常工作，但是一旦我们转移到生产环境，我们就会开始遇到同样的错误。

所以我们通过在 Postgres 属性中启用**hot_standby_feedback属性来解决这个问题。**我们参考了以下链接

[https://aws.amazon.com/blogs/database/best-practices-for-amazon-rds-postgresql-replication/](https://aws.amazon.com/blogs/database/best-practices-for-amazon-rds-postgresql-replication/)

我希望它会有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-03-30T16:39:57.973

同样，这是@Artif3x 阐述@max-malysh 出色答案的第二个警告，两者都在上面。

随着来自主服务器的任何延迟应用事务，追随者将拥有一个较旧的、陈旧的数据视图。因此，虽然通过设置 max_standby_archive_delay 和 max_standby_streaming_delay 为追随者的查询提供时间来完成是有意义的，但请记住这两个警告：

*   跟随者作为备用/备份的价值减少
*   在追随者上运行的任何其他查询[都可能返回陈旧的数据](https://stackoverflow.com/a/60304763/8417759)。

如果用于备份的追随者的价值最终与托管查询有太多冲突，则一种解决方案将是多个追随者，每个追随者都针对一个或另一个进行了优化。

另外，请注意，一行中的多个查询可能会导致 wal 条目的应用不断延迟。因此，在选择新值时，不仅仅是单个查询的时间，而是一个移动窗口，每当有冲突的查询开始时就会启动，并在最终应用 wal 条目时结束。

# ios - 与访问器类型不匹配

> ID：14592441
> 
> 赞同：0
> 
> 时间：2013-01-29T21:15:39.537
> 
> 标签：ios, objective-c

我正在尝试为我的 iPhone 应用程序构建一个存储类。存储类用于存储食品订单列表，每个订单都有食品名称和价格。在应用程序中，当我按下食物菜单上的按钮时，我想将它按顺序存储到一个名为**orders**的二维数组中。我是 Java 用户，并且是 Objective-C 的新手。我要构建的是一个类似于java的ArrayList类的存储类，Storage.m类保存食物名称和价格。

我已经有一些代码，但它一直显示这个错误：“我的 Storages.h 类中的“属性'orders'的类型与访问器'setOrder'的类型不匹配”。

存储.h

```
#import <Foundation/Foundation.h>

@interface Storage : NSObject{
    NSString *name;
    NSInteger *price;
}
@property (nonatomic)NSString *name;
@property (nonatomic)NSInteger *price;

@end 
```

存储.m

```
 #import "Storage.h"

 @implementation Storage

 @synthesize name;
 @synthesize price;

@end 
```

存储.h

```
#import <Foundation/Foundation.h>
#import "Storage.h"
@interface Storages : NSObject{
    Storage *order;
    NSMutableArray *orders;

@property (nonatomic) NSMutableArray *orders; // error "Type of property 'orders' does not match type of accessor 'setOrder'"

-(void) setOrders:(Storage *)order;
-(NSMutableArray *) orders;
@end 
```

存储.m

```
#import "Storages.h"

@implementation Storages
@synthesize orders;

-(void) setOrders:(Storage *)oneOrder{  

    [orders addObject: oneOrder];
}
-(NSMutableArray *) orders;{
    return orders;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:24:08.590

由于您有一个名为“orders”的属性，因此“setOrders”函数将覆盖该属性的 setter 方法。因此，要使其正常工作，您必须将 setOrders: 函数的名称更改为 addOrder:(Storage *)命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:25:13.847

首先，您的 Storage.h 中有一个悬挂的“{”。你需要结束这一切。

其次，当你创建一个属性时，它会自动为它建立一个 setter 和一个 getter。所以在这种情况下，setter 被称为`setOrders`你正在覆盖它（说你想自己实现它）。更改`setOrders`代码中的名称，您应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T19:55:29.540

尝试检查 xib 文件和链接过程的出口：它们应该有不同的名称。

# javascript - Angular 承诺然后回调不会在 chrome.storage.local.get 上触发

> ID：14592442
> 
> 赞同：1
> 
> 时间：2013-01-29T21:15:41.360
> 
> 标签：javascript, dependency-injection, google-chrome-extension, angularjs

我只是在玩 angular 和它的 DI。我也尝试使用 Promise 范式，但是在 Chrome 扩展程序中使用它时遇到了一个相当奇怪的问题。

以下代码运行良好。当调用“chromeStorageService”中的对象字面量中的 cb() 时，promise 就解决了。但是当我取消注释返回时`chrome.storage.local;`，代码停止工作。我不明白为什么，因为`console.log('going to be resolved');`仍然被解雇，但成功警报却没有。提前感谢任何提示:)

[http://jsfiddle.net/Ku5dz/](http://jsfiddle.net/Ku5dz/)

[https://developer.chrome.com/extensions/storage.html](https://developer.chrome.com/extensions/storage.html)

```
'use strict';
var app = {};

app = angular.module('options', ['options.controllers']);

app.services = angular.module('options.services', []);

app.services.factory('chromeStorageService', function () {
    //return chrome.storage.local;

    return {
        get: function(id, cb) {
            cb();
        }
    }
});

app.services.factory('storageService', ['chromeStorageService', '$q', function (chromeStorage, $q) {
    return new function () {
        this.get = function (identifier) {
            var defered = $q.defer();

            chromeStorage.get(identifier, function (items) {
                var error = false//chrome.runtime.lastError;
                if (error) {
                    return defered.reject(error);
                }

                console.log('going to be resolved');
                console.log(defered);
                defered.resolve();
            });

            return defered.promise;
        }
    }
}]);

app.services.factory('fooService', ['storageService', function (testService) {
    return new function () {
        this.getAll = function () {
            var promise = testService.get('foo');
            console.log(promise);
            promise.then(
                function () {
                    alert('success');
                }, function () {
                    aler('err');
                }
            );
        }
    }
}]);

app.directive('foo', ['fooService', function (fooService) {
    return {
        restrict:'A',
        link:function (scope, elm, attrs, ctrl) {
            fooService.getAll();    
        }
    };
}]);

app.controllers = angular.module('options.controllers', ['options.services']); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-04T03:35:43.693

Angular 有自己的小事件循环。当你`.resolve`做出承诺时，它就会进入 Angular 的队列。只有当 Angular 清除它的队列时，事情才会发生。

通常的做法是：

```
$scope.$apply(function() {
  promise.resolve(thing);
}); 
```

当控制权从您传递给它的函数返回到 $apply 时，它会清除队列，一切都很美好。在这种情况下，您可能需要将 $rootScope 注入服务中，以便您可以应用某些内容，因为[视图未在 AngularJS 中更新](https://stackoverflow.com/questions/10179488/the-view-is-not-updated-in-angularjs)。

您的存根可以工作，因为存根永远不会离开角度世界，因此您已经处于处理队列的上下文中。当您使用 chrome.storage.local 时，不会从这样的上下文中调用您的回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T12:03:16.980

我今天遇到了同样的问题。我想将[chrome.storage.local.get](https://developer.chrome.com/apps/storage#local-properties)与 Angular 承诺模式集成，原因`chrome.storage.local.get`是异步函数。我就是这样做的：

```
// service
angular.module('app').factory('STORAGE', function($q) {
    return {
        get: function(key) {
            var deferred = $q.defer();

            chrome.storage.local.get(key, function(data) {
                deferred.resolve(data[key]);
            });

            return deferred.promise;
        },
        set: function(key, value) {
            var deferred = $q.defer();

            var data = {};
            data[key] = value;
            chrome.storage.local.set(data, function() {
                deferred.resolve({});
            });

            return deferred.promise;
        },
        del: function(key) {
            var deferred = $q.defer();

            chrome.storage.local.remove(key, function() {
                deferred.resolve({});
            });

            return deferred.promise;
        }
    }
}); 
```

`STORAGE`我定义了一个可以封装 chrome.storage.local的 Angular 服务调用。`get`,`set`和`del`方法。

然后我们可以注入`STORAGE`到 Angular 路由`resolve`部分

```
// route resolve
...
resolve: {
    hasToken: function(STORAGE) {
        return (STORAGE.get('instagram_access_token')) ? true : false;
    }
}
... 
```

注入路由解析参数和`STORAGE`控制器

```
// controller 
angular.module('app').controller('HomeController', ['$scope', 'hasToken', 'STORAGE',
    function($scope, hasToken, STORAGE) {
        $scope.hasToken = hasToken;

        if ($scope.hasToken) {
            STORAGE.get('profile').then(function(data) {
                $scope.user = data;
            });
        }
    }
]); 
```

它运作良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:49:55.063

基本上，您的代码未运行的原因是因为您正在返回 chrome.local.storage ，这会将您带出范围，并且 get 函数永远没有机会执行。请参阅 chrome API 如何做到这一点，它将与 angular 的 $http 服务非常相似

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-29T21:33:21.970

如果您在 get 之前取消注释 return ，除了 get 调用之外，您如何？

基本上，只要您返回“某物”，您就会失去功能

在 Angular js 中，您可以使用以下语法调用 then 函数

```
 $http.get(url).then(function(response){
           //put your callback code here
       }) 
```

# mysql - latin1 到 utf8 的转换问题

> ID：14592448
> 
> 赞同：0
> 
> 时间：2013-01-29T21:15:51.250
> 
> 标签：mysql, ruby-on-rails, ruby, unicode, iconv

我正在转换一个使用 latin1 编码的 mySQL 数据库的旧应用程序。为此，我做了一个简单的 rake 任务和一些类来连接到旧的遗留数据库（MySQL）

```
class LegacyComment < ActiveRecord::Base
    establish_connection :legacy
end 
```

问题是无论我尝试将旧的 latin1 转换为 utf8 什么，我都会得到奇怪的字符：

```
"What he didnâ€™t expect" 
```

我尝试在旧数据库中创建一个重复的表，然后运行

```
ALTER TABLE legacy_comments CONVERT TO CHARACTER SET utf8; 
```

我已经尝试从我在这里找到的其他答案中使用 Ruby 的 string.encode 方法。尝试[http://jalada.co.uk/2011/12/07/solving-latin1-and-utf8-errors-for-good-in-ruby.html](http://jalada.co.uk/2011/12/07/solving-latin1-and-utf8-errors-for-good-in-ruby.html)无济于事。

我已经尝试了 database.yml 中的各种设置，但都没有运气。不知道下一步该去哪里。

# layout - SharePoint 发布页面布局和功能上的页面实例中显示的重复 Web 部件

> ID：14592459
> 
> 赞同：1
> 
> 时间：2013-01-29T21:16:28.707
> 
> 标签：layout, web-parts, publishing

我创建了包含 Web 部件区域和客户 Web 部件的自定义布局。

```
<WebPartPages:WebPartZone id="NvRDDevliverable2" runat="server" title="Zone 2">
<ZoneTemplate>
          <DeliverableMapping:DeliverableMapping runat="server" 
                  ID="DevliverableOwnership" Description="Ownership and Timing" 
                  Title="Ownership and Timing " __MarkupType="vsattributemarkup" 
                   __WebPartId="{804C2865-8F61-4828-8460-312ABB3DFA9A}" WebPart="true" 
                   __designer:IsClosed="false" partorder="2"></DeliverableMapping:DeliverableMapping>
         </ZoneTemplate>
      </WebPartPages:WebPartZone> 
```

当我尝试更新布局时，所有页面实例上都会出现重复的 Web 部件。如何避免这个问题？

# sql - SQL0802 - 数据转换或数据映射错误

> ID：14592470
> 
> 赞同：1
> 
> 时间：2013-01-29T21:17:16.123
> 
> 标签：sql, odbc, db2, ibm-midrange

我正在尝试编写一个查询来计算服务器端的一些数字，而不是在提取数据之后。我不断收到 SQL0802 错误。我已经尝试过常规`Sum`以及命令。我认为回报是长期的。我正在使用 SQL Squirrel，所以我去删除了小数位限制，看看这是否能解决问题。是计算把它扔掉了。其余的计算工作正常。我很感激我能得到的任何帮助。这只是代码的一部分。为了空间，我省略了,和部分：`Double``float``"Gross Margin"``Where``Group By``Order By`

```
Select  Distinct DB1.Tb1.STORE,
        DB1.Tb2.DATE_ID,

Sum (DB1.Tb1.CUR_CASH_SALES+DB1.Tb1.CUR_CHARGE_SALES) As "Total Sales",

Sum (DB1.Tb1.CUR_CASH_COST+DB1.Tb1.CUR_CHARGE_COST) As "Total Cost",

Sum ((DB1.Tb1.CUR_CASH_SALES+DB1.Tb1.CUR_CHARGE_SALES)-DB1.Tb1.CUR_CASH_COST+DB1.Tb1.CUR_CHARGE_COST)) As "Gross Profit",

Sum (((DB1.Tb1.CUR_CASH_SALES+DB1.Tb1.CUR_CHARGE_SALES)-(DB1.Tb1.CUR_CASH_COST+DB1.Tb1.CUR_CHARGE_COST))/(DB1.Tb1.CUR_CASH_SALES+DB1.Tb1.CUR_CHARGE_SALES)))As "Gross Margin" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T11:17:55.990

如果问题是被零除，您只需要防止在分母为零时发生除法即可。最简单的方法是分别`sum`计算分子和分母，然后除以：

```
 sum (
           DB1.Tb1.CUR_CASH_SALES+DB1.Tb1.CUR_CHARGE_SALES-
           DB1.Tb1.CUR_CASH_COST+DB1.Tb1.CUR_CHARGE_COST
       ) /
       sum (
           DB1.Tb1.CUR_CASH_SALES+DB1.Tb1.CUR_CHARGE_SALES
       ) as "Gross Margin" 
```

然后，如果您分组的整个类别的分母为零，那么您只会得到除以零。

如果它仍然是一个问题，您将需要做其他事情。根据您的需要，您可以：

*   使用您的`where`子句从输出中排除分母为零的组。
*   在整个计算中放置一条`case`语句，在计算之前检查分母是否为零。如果它为零，则用任何有意义的输出（零、空等）替换计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:03:03.227

If divide by zero is your problem, consider that there may be no point in including rows that have no sales.

Consider using a CASE expression to do division only when the sales are not zero, but use null when the sales are zero.

# c++ - 获取用于在 C++ 中解析的多行输入

> ID：14592473
> 
> 赞同：1
> 
> 时间：2013-01-29T21:17:25.767
> 
> 标签：c++, cin

我想创建一个程序，允许用户在控制台中键入多行输入，然后当他们按下某个键时，在这种情况下它将是 key `F`，输入将停止并且所有内容都存储到被`string`调用的`input`.

这个字符串应该包含用户输入的所有输入，包括空格、新行等。我希望它是一个可以稍后在程序中解析的字符串。

```
#include <iostream>
#include <vector>

using namespace std;

int main() {

 string input;
 while(cin >> input){

    // Code for exiting the loop when the key "K" is pressed should be put here.

 }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:23:51.190

```
string input;
string line;

while (getline(cin, line))
{
    if (line == "K\n")
        break;

    input += line;
} 
```

# asp.net - IIS 7.5 上旧 .NET 3.5 Web 服务的可行性

> ID：14592475
> 
> 赞同：1
> 
> 时间：2013-01-29T21:17:28.620
> 
> 标签：asp.net, web-services, iis-7, iis-6, iis-7.5

我们有一些针对 .NET 3.5 的旧 Web 服务，并且在 2003 Server 机器上的 IIS6 中运行。我们希望在 2008 R2 上迁移到 IIS 7.5，并利用 IIS 7 中的集成管道。这将我带到我的问题列表中，我希望您能就其中的任何一个问题提供意见：

1.  在任何情况下，我们可能必须将服务项目迁移到目标 .NET 4 以便它们在新环境中工作？
2.  如果我们不必更改服务，并且我们保留面向 ASP .NET 2 的服务的安装包，那么集成管道是否适用于 .NET 2 应用程序池？
3.  如果#2 的答案是否定的，如果我们在安装中以 ASP .NET 4 为目标（但不更改服务项目中的目标框架），集成管道是否可以与服务一起使用？

基本上，我被告知这些服务的设计者（无法再联系到他发表评论）真的不想迁移到 IIS 7，但是在网络上对此进行了研究，我认为他没有犹豫的理由。

# unix - 将 unix 纪元时间转换为人类可读的时间

> ID：14592485
> 
> 赞同：0
> 
> 时间：2013-01-29T21:17:58.637
> 
> 标签：unix, time, epoch

首先，我有一个 Unix 纪元时间 1270787111。

然后基于这个网站： [http](http://untangible.com/2009/01/covert-unix-epoch-dates-in-microsoft-excel-including-timezone-examples.html) : //untangible.com/2009/01/covert-unix-epoch-dates-in-microsoft-excel-including-timezone-examples.html，我将数字转换为40276.9758217592。然后我将值放入 Excel 单元格并将其转换为“日期”格式为：4/8/10 23:25 我不知道这是怎么回事。如何将值 40926 转换为 2010(year)04(month)08(day)？有没有其他编程方法可以将 Unix 纪元时间转换为人类可读的格式时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:20:55.507

我个人最喜欢的是

```
perl -E 'say scalar gmtime 1270787111' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:31:09.200

如果你有 GNU coreutils`date`命令，你可以这样做：

```
$ date -d @1270787111
Thu Apr  8 21:25:11 PDT 2010 
```

如果您更愿意在 C 中执行此操作，请使用`localtime()`或`gmtime()`将`time_t`值 1270787111 转换为 a `struct tm`，然后使用`asctime()`将其转换为人类可读的字符串。`ctime(t)`相当于`asctime(localtime(t))`。这假设您的 C 库将`time_t`值表示为自 Unix 纪元 (1970-01-01 00:00:00) 以来的秒数；POSIX 保证这一点，但 C 没有。

`strftime()`接受 a`struct tm`并将其转换为人类可读的字符串，让您控制格式，而不是使用and`"Thu Apr 8 21:25:11 2010\n"`强加的默认格式（是的，默认格式包括尾随换行符）。`ctime()``asctime()`

请务必阅读这些功能的文档。它们需要大量的指针操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:21:30.530

Excel 从 1900 年 1 月 0 日开始日期（是的，1 月 0 日）。从这个[链接](http://www.cpearson.com/excel/datetime.htm)。

> 数字的整数部分 ddddd 表示自 1900 年 1 月 0 日以来的天数

您在 1900 年 1 月 0 日之后的 40,276 天结束日期。

许多编程语言（C/C++、Perl、PHP 等）中通常有用于处理 UNIX 纪元时间戳的内置函数。这实际上取决于您使用的语言以及您将调用的方法/函数。这是一个链接，显示了[C 中的一些示例](http://www.epochconverter.com/programming/functions-c.php)。

# c# - ItemsControl.Items.IndexOf(UIElem) 返回不同的值/确定单击了哪个项目

> ID：14592486
> 
> 赞同：0
> 
> 时间：2013-01-29T21:18:08.650
> 
> 标签：c#, wpf, itemscontrol, mouseclick-event

我有一个椭圆（节点）列表，其中包含归因于每个节点的各种数据。我将环中的椭圆添加到 ItemsControl。我添加它们的顺序是我想要保留的顺序，因为我用它来找出我点击了哪个节点：

```
ItemsControl.Items.IndexOf(UIElem); 
```

它第一次工作正常，但是返回的值说，特定位置的节点发生了变化。

我想我的问题是 ItemsControl 是否保留了我添加元素的顺序？有没有更简单的方法来计算我点击了哪个椭圆？我一直在使用以下内容：

```
Ellipse UIElem = (Ellipse)VisualTreeHelper.HitTest(ItemsControl, e.GetPosition(ItemsControl)).VisualHit) 
```

我想要做的就是让工具提示显示节点的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:23:17.427

您是否为每个椭圆指定了一个事件处理程序，例如 ButtonBase.Click？如果是，则使用处理程序函数的 sender 或 e.OriginalSource 属性。您还可以使用 Tag 属性，您可以在其中绑定您的项目椭圆或您尝试检索的任何其他组件。

另一个更“wpf”的解决方案是使用 Ellipse.Triggers 或 Style.Triggers 在 xaml 中执行此操作，但为了更具体，我想查看一些 xaml 代码 - 特别是您的 DataTemplate。

# opengl-es - 使用三角形条创建新三角形

> ID：14592493
> 
> 赞同：0
> 
> 时间：2013-01-29T21:18:50.450
> 
> 标签：opengl-es, geometry

我正在使用 OpenGL ES 2.0（尽管这可能适用于所有 OpenGL）。我正在使用 GL_TRIANGLE_STRIPS 绘制一个模型，并且在某个任意点我想从我正在绘制的条带中断开，然后开始使用它自己的一组条带绘制一个新模型。我该怎么做？目前，我将所有顶点都放在一个 VBO 中。如何触发一组新的条带进行绘制，我应该如何保存所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:52:30.967

为什么不为每个模型使用一个 VBO？这是最简单的解决方案。

# c# - ping 子网时程序锁定

> ID：14592499
> 
> 赞同：2
> 
> 时间：2013-01-29T21:19:08.237
> 
> 标签：c#, .net, wpf, backgroundworker, ping

我是编程新手。我在 C#/WPF 中创建了这个 GUI，它会 ping 用户输入的子网。它可以工作，只是当我 ping 整个 255 IP 子网时它会冻结。我还希望它在实时返回值时显示结果，但它会等待显示值，直到整个子网都被 ping 通。我也想要某种进度条。有人可以看看我的代码并帮助我弄清楚我需要在这里做什么吗？C#代码如下：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Navigation;
    using System.Windows.Shapes;
    using System.Net.Sockets;
    using System.Net.NetworkInformation;

    namespace PingTrueFalseSubnet  {

        public partial class Window1 : Window  {
            public Window1()  {
                InitializeComponent();
            }

            private void executeButton_Click(object sender, RoutedEventArgs e)  {
                string ipString;
                for (int i = 1; i < 100; i++)  {
                    ipString = inputTextBox.Text + "." + i;

                    //set the ping options, TTL 128
                    PingOptions pingOptions = new PingOptions(128, true);

                    //create a new ping instance
                    Ping ping = new Ping();

                    //32 byte buffer (create empty)
                    byte[] buffer = new byte[32];

                            try  {

                            //send the ping 4 times to the host and record the returned data.
                            //The Send() method expects 4 items:
                            //1) The IPAddress we are pinging
                            //2) The timeout value
                            //3) A buffer (our byte array)
                            //4) PingOptions

                            PingReply pingReply = ping.Send(ipString, 1000, buffer,   pingOptions);

                                //Make sure we don't have a null reply
                                if (!(pingReply == null))  {
                                    switch (pingReply.Status)  {
                                        case IPStatus.Success:
                                            outputTextBox.AppendText
                                                (string.Format("\nReply from {0}: bytes={1} time={2}ms TTL={3} Hostname={4}\n",
                                                pingReply.Address, pingReply.Buffer.Length, pingReply.RoundtripTime, pingReply.Options.Ttl, 
                                                System.Net.Dns.GetHostEntry(ipString).HostName));
                                            break;
                                        case IPStatus.TimedOut:
                                            outputTextBox.AppendText(string.Format("\n{0} Connection has timed out...\n", ipString));
                                            break;
                                        default:
                                            outputTextBox.AppendText(string.Format("\n{0} Ping failed: {1}\n",ipString, 
                                                pingReply.Status.ToString()));
                                        break;
                                    }
                                }
                                else
                                    outputTextBox.AppendText(string.Format("\n{0} Connection failed for an unknown reason...\n", ipString));
                            }
                            catch (PingException ex)  {
                                outputTextBox.AppendText(string.Format("\n{0} Connection Error: {1}\n", ipString, ex.Message));
                            }
                            catch (SocketException ex) {
                                outputTextBox.AppendText(string.Format("\n{0} Connection Error: {1}\n", ipString, ex.Message));
                            }

                    }
                }

            private void button1_Click(object sender, RoutedEventArgs e)
            {
                outputTextBox.Clear();
            }
        }
    } 
```

下面是 XAML 标记：

```
 <Window x:Class="PingTrueFalseSubnet.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ping True False Subnet" Height="376" Width="509" Name="pingMainWindow">
        <Grid>
            <TextBox Height="33" Margin="0,32,27,0" Name="inputTextBox" VerticalAlignment="Top" HorizontalAlignment="Right" 
                     Width="175"></TextBox>
            <Label Height="30" Margin="138,35,204,0" Name="inputLabel" VerticalAlignment="Top" FontSize="14" 
                   VerticalContentAlignment="Top">Enter subnet:</Label>
            <Label Height="28" Margin="60,108,0,0" Name="label1" VerticalAlignment="Top" HorizontalAlignment="Left" Width="99">Results:</Label>
            <Button Height="27" Margin="150,77,162,0" Name="executeButton" VerticalAlignment="Top" Click="executeButton_Click">Execute</Button>
            <TextBox Margin="60,135,48,39" Name="outputTextBox" BorderBrush="Black" IsReadOnly="True" TextWrapping="Wrap" 
                     HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Auto" AcceptsReturn="True" />
            <Button Height="21" Margin="150,0,162,8" Name="clearButton" VerticalAlignment="Bottom" Click="button1_Click">Clear</Button>
            <ProgressBar Height="22" HorizontalAlignment="Right" Name="progressBar" VerticalAlignment="Bottom" Width="146" />
        </Grid>
    </Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:31:46.580

您可以查看[这篇](https://stackoverflow.com/a/13458382/685467)文章以了解如何进行`pnig`异步操作。这只是示例，不适合您的`WPF`应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:49:58.640

感谢Itn的回答！第二个链接提供了一个完美运行的 DoWork() 方法的示例代码。

[http://dedjo.blogspot.com/2007/08/how-to-doevents-in-wpf.html](http://dedjo.blogspot.com/2007/08/how-to-doevents-in-wpf.html)

加上这两个...

```
 using System.Threading;
    using System.Windows.Threading; 
```

在 for 循环结束时调用此方法....

```
 DoWork(); 
```

这是Itn链接中的示例方法...

```
 static void DoEvents()
    {
        DispatcherFrame frame = new DispatcherFrame(true);
        Dispatcher.CurrentDispatcher.BeginInvoke
        (DispatcherPriority.Background, (SendOrPostCallback) delegate(object arg)
        {
            var f = arg as DispatcherFrame; 
            f.Continue = false;
        }, 
        frame);
        Dispatcher.PushFrame(frame);
    } 
```

# java - 循环遍历地图中嵌套地图的值

> ID：14592500
> 
> 赞同：1
> 
> 时间：2013-01-29T21:19:17.770
> 
> 标签：java

如果您能帮助我，我将不胜感激。

```
Map<String, Double> movieMap = new HashMap<String, Double>;
movieMap.add("MovieA", 3);
movieMap.add("MovieB", 5);
movieMap.add("MovieC", 4);
movieMap.add("MovieD", 3.5);
movieMap.add("MovieE", 2.5);

Map<String, Double> movieMap2 = new HashMap<String, Double>;
movieMap2.add("MovieA", 3.5);
movieMap2.add("MovieB", 2.5);
movieMap2.add("MovieC", 4.5);
movieMap2.add("MovieD", 2);
            .
            .
            .
Map<String, Double> movieMapi = new HashMap<String, Double>;
movieMap2.add("MovieA", 5);
movieMap2.add("MovieC", 1.5);
movieMap2.add("MovieD", 2);

Map<String, Map<String, Double>> userMap = new HashMap<String, Map<String, Double>>;
userMap.add("Nick", movieMap);
userMap.add("Bill", movieMap2);
           .
           .
           .
userMap.add("Tom", movieMapi); 
```

我想要做的是做一个函数*比较（userA，userB）*并将常见的电影及其费率放入一个新的地图中。例如， compare(Nick,Tom) 的输出应该是带有键的 Map - 值：**{{"MovieA", {5,3}}, {"MovieC", {4,1.5}}, {"MovieD ", {3.5,2}}}**

我似乎很难解决它..你能帮帮我吗？
谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:24:19.870

*您可以使用Map.keySet()*方法遍历地图中的键：

```
Set<String> nickKeys = userMap.get("Nick").keySet();
Set<String> tomKeys = userMap.get("Tom").keySet(); 
```

您的代码可能如下所示：

```
Map<String, Double> nickMap = userMap.get("Nick");
Map<String, Double> tomMap = userMap.get("Tom");

Map<String, List<Double>> commonMap = new HashMap<String, List<Double>>();

for (String movieName : nickMap.keySet()) {
    if (tomMap.containsKey(movieName)) {
        List<Double> tempList = new ArrayList<Double>();
        tempList.add(nickMap.get(movieName));
        tempList.add(tomMap.get(movieName));
        commonMap.put(movieName, tempList);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:29:17.127

这应该适合您的需求：

```
public static Map<String, List<Double>> compare(Map<String, Map<String, Double>> userMap, String user1, String user2) {
    // get both users movies and rates
    Map<String, Double> user1Map = userMap.get(user1);
    Map<String, Double> user2Map = userMap.get(user2);
    // if at least one of the both users doesn't exists in the initial map
    if (null == user1Map || null == user2Map) {
        // exit
        throw new IllegalArgumentException();
    }
    // will contains the common movies and the respective rates to return
    Map<String, List<Double>> commonMovies = new HashMap<String, List<Double>>();
    // for each movie/rate of the first user
    for (Entry<String, Double> user1Entry : user1Map.entrySet()) {
        // try to find the same movie in the second user's map
        Double user2Value = user2Map.get(user1Entry.getKey());
        // if both contains the same movie
        if (null != user2Value) {
            // create a new list
            List<Double> rates = new LinkedList<Double>();
            // list.get(0) will always be the rate of the first user passed as a parameter to this method
            rates.add(user1Entry.getValue());
            // and list.get(1) the rate of the second one
            rates.add(user2Value);
            commonMovies.put(user1Entry.getKey(), rates);
        }
    }
    return commonMovies;
} 
```

致电：

```
Map<String, List<Double>> commonMovies = compare(userMap, "Nick", "Tom"); 
```

*请注意，我们通常要求 OP 在给出解决方案之前提供一些他已经尝试过的代码片段，但我认为迭代地图（和嵌套地图）对于初学者来说非常困难，并且单个注释的解决方案有时比几个个人尝试更好`;)`*

# multidimensional-array - 如何创建深度不等的数组数组，仅保存整数（Android）

> ID：14592502
> 
> 赞同：0
> 
> 时间：2013-01-29T21:19:25.183
> 
> 标签：multidimensional-array, arraylist

如何创建一个如下所示的数组：

```
[[1,2,[[3,3,3,3,3],[4,4,4,4,4]],[15,20],35,[2,1]],
 [2,2,[[6,6,6,6,6],[1,2,3,4,5]],[30,15],45,[2,1]],
 [2,2,[[6,6,6,6,6],[1,2,3,4,5]],[30,15],45,[2,1]],
 [2,2,[[6,6,6,6,6],[1,2,3,4,5]],[30,15],45,[2,1]],
 ...] 
```

所以一个 4 维数组，只保存整数值，并且数组在数组中但深度不等。

[编辑]使用命名元素我会得到这个声明：

```
// containerarray spelersSpel:
private ArrayList<ArrayList<ArrayList<ArrayList<Integer>>>> spelersSpel_ = new ArrayList<ArrayList<ArrayList<ArrayList<Integer>>>>();

// holding:
// first-level element of spelersSpel:
private ArrayList<ArrayList<ArrayList<Integer>>> spelerSpel = new ArrayList<ArrayList<ArrayList<Integer>>>();

// holding:

// first element of spelerSpel:
private int spelerNummer;

// second element of spelerSpel:
private int spelerBeurtNummer;

// third element of spelerSpel:
private ArrayList<ArrayList<Integer>>spelerBeurtenWorpenScore = new ArrayList<ArrayList<Integer>>();
// holding:
private ArrayList<Integer>spelerBeurtWorpenScore = new ArrayList<Integer>();
// holding:
private int spelerBeurtWorpScore;

// fourth element of spelerSpel:
private ArrayList<Integer>spelerBeurtenTotaal = new ArrayList<Integer>();

// fifth element of spelerSpel:
private ArrayList<Integer>spelerBanen = new ArrayList<Integer>();
// holding:
private int spelerBaan; 
```

并像这样将值放入其中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    spelerBaan = 2;
    spelerBanen.add(spelerBaan);
    spelerSpel.add(spelerBanen); 
```

但是，我仍然遇到问题，在最后一行，将数组 spelerBanen 添加到 spelerSpel，因为 spelerSpel 现在希望每个（第一级）元素都是二维数组，而 spelerBanen 不是。如何解决？我可以考虑使用一个虚拟占位符，比如

```
ArrayList<ArrayList<Integer>>dummy = new ArrayList<ArrayList<Integer>>();
dummy.add(spelerBanen);         
spelerSpel.add(dummy); 
```

但这对我来说似乎也不是一个很好的解决方案？

[编辑] 我的想法是将 spelerSpel 的声明更改为：

```
private ArrayList<ArrayList<ArrayList<Integer>>> spelerSpel = new ArrayList<ArrayList<ArrayList<Integer>>>(5); 
```

所以“固定”长度为5。然后：

```
spelerBaan = 2;
spelerBanen.set(0, spelerBaan);
spelerSpel.get(0).set(0,spelerBanen);
spelersSpel.add(spelerSpel); 
```

我仍然会被一个包含很多“虚拟”值的数组困住，但我不知道如何做得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:03:56.550

试试下面的代码，一个 4D 数组的例子和一个显示所有值的主要方法。

```
public class SampleClass {
    static final int arrays[][][][] = {
            { { { 0, 2528 }, { 12, 25 }, { 25, 258 } },
                    { { 25, 345 }, { 345, 345 } } },
            { { { 4654, 234234 }, { 23434, 852 } },
                    { { 7897, 56345 }, { 3422, 57 }, { 98889, 234234 } } },
            { { { 545, 45645 }, { 45645, 3232 }, { 5252, 65465 } },
                    { { 45645, 234234 }, { 6451, 68678 } } },
            {
                    { { 789798, 34234 }, { 234234, 23423 } },
                    { { 23423, 234234 }, { 345345, 456456 }, { 5757, 800000 } },

            } };

    public static void main(String[] args) {
        for (int i = 0; i < arrays.length; i++) {
            for (int j = 0; j < arrays[i].length; j++) {
                for (int k = 0; k < arrays[i][j].length; k++) {
                    for (int l = 0; l < arrays[i][j][k].length; l++) {

                        System.out.println(arrays[i][j][k][l]);
                    }
                }
            }
        }
    }
} 
```

# css - div 的无关紧要的行为

> ID：14592503
> 
> 赞同：0
> 
> 时间：2013-01-29T21:19:28.837
> 
> 标签：css, wordpress, html

我有一个运行 WordPress 的网站。主页的设计有一半看起来是对的，另一半看起来是错的。事实上，它并不总是让我很难理解正在发生的事情并解决问题。我可以通过在 chrome 和 IE 中刷新特定页面来重现该问题，我没有检查其他浏览器。

我正在谈论的页面在这里： [http ://boat-hotel.com/index.php/nl/](http://boat-hotel.com/index.php/nl/)

在主图像下方应该有 3 列文本。附上您发现页面的屏幕截图显示不正确。[发生错误的屏幕截图](http://i.stack.imgur.com/cDJVv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:25:15.900

可能您应该`clear: both`对 3 列的容器使用样式。没有您提供的 HTML 和 CSS，我只能想到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:26:58.660

id 为“featured”的 div 的高度为 0，因此“controller”和“content-area”div 将自己推到幻灯片后面。尝试在“特色”div 上设置高度。`330px`对我来说工作得很好。

我认为它的高度为 0，因为您的幻灯片 div 内部是绝对定位的，这会将它们从页面流中删除，并且不会强制您的“特色”div 的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:27:35.650

`332px`在你的`#feature`d div上设置一个高度。

您看到页面一半时间正确而一半时间错误的原因是脚本加载幻灯片所需的时间。在#featured 上设置高度将在页面中节省适当的空间。

# c# - 检测适配器连接类型（特别是蜂窝）

> ID：14592504
> 
> 赞同：1
> 
> 时间：2013-01-29T21:19:33.150
> 
> 标签：c#, windows-7

我需要区分网络连接类型（在标准 Windows 7 PC 上）以启动一些业务工作流程。我可以毫不费力地检测以太网和 WiFi 适配器，但我很难识别蜂窝适配器空卡。我尝试过 Win32_NetworkAdapter* 和 NetworkInterfaceType，Verizon、Sprint 和 AT&T 卡都被报告为以太网设备。

该应用程序无法在高于 V3.5 SP1 的任何 .NET 版本上运行。有谁知道如何通过空中卡明确区分蜂窝连接和标准以太网连接？

# html - 语义标记对视觉用户代理的实际好处是什么

> ID：14592508
> 
> 赞同：2
> 
> 时间：2013-01-29T21:20:06.683
> 
> 标签：html, semantic-markup

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T03:00:35.920

（当然，这还不完整。这只是我在打字时想到的。）

这个答案假设：对于没有屏幕阅读器的桌面/移动浏览器用户；页面仅包含`div`和`span`元素（具有允许的属性）；只有今天相关的（[不是明天](http://nightly.mozilla.org/)，[不是 2400 年](http://en.wikipedia.org/wiki/Long_Now_Foundation)）。

### 缺少元数据

*   用户在为页面添加书签时不会看到 favicon（`icon`链接类型；除非您将 ICO img 放在根目录中）或标题（`title`元素）
*   创建快捷方式时没有图标 ( `apple-touch-icon`, `msapplication-TileImage`, ...)
*   当用户在那里发布/引用/共享您的页面时，某些 Web 应用程序无法从您的页面中提取元数据（例如[Open Graph Protocol](http://ogp.me/)）
*   浏览器不会自动检测您的提要（`alternate`链接类型）
*   `prefetch`链接类型（如, `prerender`, `dns-prefetch`, `pingback`, `prev`/ , ... ）没有（性能）优势`next`。</li>

（请注意，*其中一些*可以通过 HTTP 标头完成。）

### 缺少默认功能

如果没有`a`, `input`,等`textarea`，`button`相应的功能将需要 JavaScript。没有 JavaScript 的用户无法点击链接、搜索、上传文件、提交表单……</p>

没有（或有限）JS 支持的原因：

*   用户停用 JS（全局，仅适用于站点/主机）
    *   故意的，例如使用[NoScript](http://en.wikipedia.org/wiki/NoScript)
    *   公司/管理员/等要求。
*   JS 文件无法加载（CDN 问题，...）
*   *很*老的浏览器
*   …</li>

此外，一些典型的导航机制在默认情况下可能不可用（通过字段切换；焦点；按 Enter 激活；在链接文本中搜索（例如`'`在 Firefox 中））。

### 缺少浏览器扩展提供的功能

有*各种*浏览器插件（或书签等）可以解析标记并“做事”。

*   列出所有链接（[Link Gopher](https://addons.mozilla.org/en-US/firefox/addon/link-gopher/)，...）
*   创建大纲/目录（`h1`- `h6`）（例如[目录](https://addons.mozilla.org/en-US/firefox/addon/table-of-contents/)）
*   只呈现页面的主要内容（例如[可读性](https://addons.mozilla.org/en-US/firefox/addon/readability/)，...）
*   处理/排序/等。表格 ( `table`) （例如[表格计算器](https://addons.mozilla.org/en-US/firefox/addon/table-calculator/)，...）
*   提取元数据（例如[Dublin Core Viewer](https://addons.mozilla.org/en-US/firefox/addon/dublin-core-viewer/)，...）
*   微格式（例如[运算符](https://addons.mozilla.org/en-US/firefox/addon/operator/)，...）
*   RDF (RDFa, ...) (例如[RDFa Developer](https://addons.mozilla.org/en-US/firefox/addon/rdfa-developer/) , [Semantic Radar](https://addons.mozilla.org/en-US/firefox/addon/semantic-radar/) , [OpenLink Data Explorer](https://addons.mozilla.org/en-US/firefox/addon/openlink-data-explorer/) , ...)
*   知识共享（例如[OpenAttribute](https://addons.mozilla.org/en-US/firefox/addon/openattribute/)，...）
*   …</li>

### 缺少默认的“样式”

如果没有 CSS 支持，仅包含`div`和`span`元素的页面可能难以阅读，甚至可能变得难以理解（例如，考虑复杂的数据表）。

没有（或有限）CSS 支持的原因：

*   文本浏览器（[Lynx](http://en.wikipedia.org/wiki/Lynx_%28web_browser%29)，[w3m](http://en.wikipedia.org/wiki/W3m)，...）
*   非常古老的图形浏览器
*   用户停用的 CSS（全局，仅适用于站点，仅适用于页面）
*   用户使用自己的样式表
*   CSS 文件无法加载（CDN 问题，...）
*   …</li>

### 可重用性有限

*   复制和粘贴：如果用户复制和粘贴一些内容和/或标记，并且您的自定义 CSS 没有被“包含”（可能是许多工具的情况），则可能很难甚至不可能理解/重用该内容/标记.
*   提取您的内容：其他人更难抓取您的内容（例如[Piggy Bank](http://simile.mit.edu/wiki/Piggy_Bank)）和/或转换它（XSLT、XPath）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:42:38.793

对于视力良好的用户来说，可能没有区别。

但是，您永远不应该假设用户的能力。

除了可访问性之外，最大的区别在于机器如何解释代码。所以，搜索引擎优化很重要，即使你也想排除它。其他地方提到的浏览器扩展，以及将来可能出现的任何内容。

# node.js - Node.js 应用程序在 2~ 小时后停止接收请求

> ID：14592510
> 
> 赞同：0
> 
> 时间：2013-01-29T21:20:12.573
> 
> 标签：node.js, express

我有一个使用 Express.js 的简单应用程序，可以处理来自远程系统的发布数据。

有基本身份验证 (express.basicAuth) 和一些其他模块（用于 DB 连接池的通用池、用于时间计算的 moment.js 和 mysql）以及 Forever 以将应用程序作为服务运行。该应用程序在 SuSe 11.2 上运行以防万一。

一切运行正常大约 2 小时 - 数据被发布、处理，然后存储。每个帖子大约 1kb~ 的数据，每小时 80 个帖子。之后，应用程序变得无响应，直到应用程序重新启动（$ 永远重新启动）

我对 Node 很陌生，不知道下一步该去哪里调试问题。当应用程序无响应时，没有任何内容写入访问或错误日志文件，并且不确定是否有其他方法可以获得有意义的输出或堆栈跟踪。

任何建议或方向将不胜感激！

编辑：正如评论中添加的那样，数据被解析并使用通用池直接写入 MySQL 表以进行连接管理。

具体来说：

```
var poolModule = require('generic-pool');
var pool = poolModule.Pool({
    name: 'mysql',
    create: function(cb) {
        var mysql = require('mysql');
        var db = mysql.createConnection({ host: '...', user: '...', 'password: '...' });
        cb(null, db);
    },
    destroy: function(client) { client.end(); },
    max: 10
}); 
```

然后在路由器中：

```
function(req, res) {
    pool.acquire(function(err,client)) {
        if(err) throw err;

        // ...data parsing / query building

        client.query('...the query...', function(err, rows, fields) {
            pool.release(client);
            if(err) { res.send(err); }
            else { res.send('success'); }
        }
    });
} 
```

Edit2 - 似乎发生了导致数据库连接未关闭的故障事件。我注意到 2 个连接打开了 5 分钟和 15 分钟。鉴于这种增长速度，很容易达到最大连接限制 (10) 并导致挂起。我很快就会知道这是不是罪魁祸首！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:13:06.673

遇到错误时未释放数据库连接。当最终达到连接限制时，后续的页面请求会挂起。在改进了数据处理和错误处理之后，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T04:46:16.760

尝试像下面这样维护您的数据库连接怎么样？

```
setInterval(function(){
    // Run query to retain db connection
    db.query('SELECT 1 + 1 AS solution', function(err, rows, fields) {
        if (err) throw err;
    });
}, 60 * 1000); 
```

# variables - VHDL：变量和过程

> ID：14592511
> 
> 赞同：2
> 
> 时间：2013-01-29T21:20:17.020
> 
> 标签：variables, process, vhdl

我正在研究VHDL，我发现一件事情特别难以理解，因为VHDL是一种HDL，以我的拙见，它所描述的一切都应该能够转换成电路。但是这怎么会发生在变量和过程上呢？有没有可以实现变量处理的电路？你能给我举个例子吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:22:45.440

包含变量的过程当然可以转换为电路。

这里有几个简单的例子。

```
Process(clk)
Variable Q : std_logic_vector(7 downto 0);
begin
  if rising_edge(clk) then
     if En = '0' then
        Q := D;
     end if;
  end if;
  Output <= Q;
end process; 
```

在每个时钟周期，如果En（使能）输入为低，则输入数据D存储在变量Q中；否则什么都不会发生（并且变量保持其旧值）。这是一个非常特殊的电路；一个带使能的 8 位寄存器；在旧数据手册中查找 74LS377 以查看 TTL 中的相同电路。

请注意，时钟“if”语句与 En 语句是分开的，并围绕着它。合成工具会寻找他们知道如何翻译的特定模式，这就是其中之一。如果您有任何软件经验，您可能会想将它们结合起来： `if rising_edge(Clk) and En = '0' then ...`- 在模拟中您会得到完全相同的行为。

然而，一些综合工具可能无法识别这种模式，并且可能会报告错误而不是生成硬件。（合成工具在不断改进，所以你现在可能很幸运）。该工具的文档（例如 Xilinx“[综合和仿真设计指南](http://www.xilinx.com/support/documentation/sw_manuals/xilinx14_4/sim.pdf)”）应该描述什么是可能的，什么是不可能的。[编辑：] 不幸的是，它停留在 1995 年的实践中，并且包含一些真正可怕的 VHDL 示例。

```
Process(clk)
Variable Count : Integer range 0 .. 255 := 0;    -- set to 0 when process first starts
begin
  if rising_edge(clk) then
     Count := Count + 1 mod 256;
  end if;
  Output := Count;
end process; 
```

请注意，变量和信号一样，不需要是逻辑类型。整数、数组和记录（有一些限制）是可合成的；浮动通常不是（尽管随着工具的改进，这种情况正在改变）。请注意，我限制了整数的范围，以获得一个 8 位计数器。

对于整数，您还需要明确指定它们溢出时会发生什么（就像我在这里所做的那样） - 否则您将在模拟中出错。但是，指定明显的行为（如这里）不应该花费任何额外的硬件。并且使用其他数字类型，如 numeric_std.unsigned，这些工具并不那么挑剔。

我已经简化了一点；通常在典型过程中有一个 Reset 子句可以让您控制启动行为，但是这些示例是真实的并且应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:37:51.963

变量可以非常方便 - 它们会立即更改，但也可以保持其值从一个滴答到下一个滴答。当您想要访问以前计算的值（通常是您的流程的“输出”）时，这可以避免复制代码。

至于创建电路，变量和信号只是在设计中将值从一个地方转移到另一个地方。变量被限制在一个过程中，信号可以在整个设计中流动。无论哪种方式，合成器的工作都是找出您描述的行为并实现匹配的逻辑。如果您增加一个变量或一个信号，则会产生同一组“门”（或查找表等）。

# websocket - 给特定用户的 Websocket 消息

> ID：14592513
> 
> 赞同：0
> 
> 时间：2013-01-29T21:20:20.537
> 
> 标签：websocket

我是 .NET (C#) 和 websockets 的新手...我已经安装了 VS2012 和 Windows Server 2012，并且 websockets 已经启动并运行。我似乎不能做的是从一个套接字接收消息并将其发送到另一个特定的套接字。唯一的选择似乎是将消息广播到所有套接字。有没有办法将消息仅针对特定用户？我希望聊天室版主有机会拒绝不适当的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:23:59.823

推荐的方法是设置某种路由方案，以确保可以将消息传递给特定用户。例如， [Pubnub](http://www.pubnub.com/)使用通道进行消息路由。为了防止与服务器的多个连接，您可以考虑将服务器端的通道多路复用到单个套接字中。

要实施审核，您需要记住一些额外的挑战；考虑将传入消息放入审核队列以供批准。像[ZeroMQ](http://www.zeromq.org/)或[RabbitMQ](http://www.rabbitmq.com/)这样的消息队列可以解决这个问题。主持人将从队列中拉出消息并批准消息以进行最终广播，或拒绝（将消息丢弃在地板上）。

# jquery - jq网格。从子网格中获取行

> ID：14592514
> 
> 赞同：0
> 
> 时间：2013-01-29T21:20:27.260
> 
> 标签：jquery, jqgrid

我有带有子网格的 jqGrid。

如何从子网格中获取行？我做错了什么？下面的函数，我正在尝试获取行，但总是有错误。

```
loadComplete: function() {
    var rowIds = $("#list4").getDataIDs();

    $.each(rowIds, function (index, rowId) 
    {
        //var rows = jQuery("#list4_"+rowId+"_t").GetRowCount();
        //var rows = jQuery("#list4_"+rowId+"_t").getRowData(rowId);
        var sgtable = $("#list4_" + rowId + "_t");

        $.each(sgtable.rows, function(i, rId) //rows is undefined
        {
            console.log("rId:" + rId);
            var cdn = jQuery("#list4_"+rowId+"_t").jqGrid('getCell', rId, 'ItemTypeName');
            var cdv = jQuery("#list4_"+rowId+"_t").jqGrid('getCell', rId, 'ItemValue');

            console.log("cdn:" + cdn);
            console.log("cdv:" + cdv);
        });
    });
}  

 var rows = $("#list4_" + rowId + "_t").getDataIDs(); 
```

行总是 == 0。

**更新！**

网格：

![网格](../Images/7a70cde8b986423057be6b4d8ef94894.png)

完整代码如下。

```
jQuery("#list4").jqGrid({

    url: getDataUrl,
    datatype: "json",
    autowidth: false,
    shrinkToFit: true,
    height: 'auto',
    loadonce:true,
    colNames: ['ContractNo', 'ParentName', 'ItemTypeName', 'ItemValue', 'ParentItemID', 'ItemID'],
    colModel: 
    [
        { name: 'ContractNo', index: 'ContractNo', hidden: true },
        { name: 'ParentName', index: 'ParentName', hidden: true },
        { name: 'ItemTypeName', index: 'ItemTypeName'/*,width: gwdth/2 */},
        { name: 'ItemValue', index: 'ItemValue'/*,width:gwdth/2*/ },
        { name: 'ParentItemID', index: 'ParentItemID', hidden: true },
        { name: 'ItemID', index: 'ItemID', hidden: true }
        ],
    subGrid: true,
    caption: "Contract items",
    subGridOptions: 
        {
            "expandOnLoad":true
        },
    gridComplete: function () {
        var rowIds = $("#list4").getDataIDs();

        $.each(rowIds, function (index, rowId) {
            $("#list4").expandSubGridRow(rowId); 

            var sdata =  $("#list4_" + rowId + "_t").getDataIDs();
             console.log("ri: "+rowId+". sdlEXP:" + sdata.length);
        });
    }, 
    subGridRowExpanded: function (subgrid_id, row_id) 
    {
        var subgrid_table_id, pager_id;
       // gwdth = $('div').width();
        subgrid_table_id = subgrid_id + "_t";
        pager_id = "p_" + subgrid_table_id;
        console.log("sqt_id: "+subgrid_table_id);
        $("#" + subgrid_id).html("<div style='margin-left:0px'><table id='" + subgrid_table_id + "' class='scroll'><tr><td>Testing</td></tr></table><div id='" + pager_id + "' class='scroll'></div></div>");
        jQuery("#" + subgrid_table_id).jqGrid({
            colNames: ['ContractNo', 'ParentName', 'ItemTypeName', 'ItemValue', 'ParentItemID', 'ItemID'],
            colModel: 
            [
                { name: 'ContractNo', index: 'ContractNo', hidden: true  },
                { name: 'ParentName', index: 'ParentName', hidden: true },
                { name: 'ItemTypeName', index: 'ItemTypeName'/*, width: gwdth/2 - 102*/},
                { name: 'ItemValue', index: 'ItemValue'/*, width: gwdth/2*/},
                { name: 'ParentItemID', index: 'ParentItemID', hidden: true },
                { name: 'ItemID', index: 'ItemID', hidden: true }
            ],
            height: 'auto',
            rowNum: 20,
            //  sortorder: "asc",
            shrinkToFit: true,
            url: getDataUrl + "?subgrid=" + getCell(row_id),
            // datastr: topicjson,
            //  datatype: "jsonstring",
            datatype: "json",
            treeGrid: true,
            treeGridModel: "adjacency",
            ExpandColumn: "ItemTypeName",
            // sortname: 'ParamNameEN',
            //loadonce: true,
            ExpandColClick: true,
            // SortTree:-1,
            // sortable: true,
            viewrecords: true,
            url: getDataUrl + "&subgrid=" + getCell(row_id),
        });
    },
    loadComplete: function() {

        var sn = 150;
        var sv = 400;

        var rowIds = $("#list4").getDataIDs();
        console.log("rids:" + rowIds.length);

         $.each(rowIds, function (index, rowId) 
         {
             console.log("#list4_" + rowId + "_t");

             var sdata =  $("#list4_" + rowId + "_t").getDataIDs();
             console.log("sdl:" + sdata.length);

        });

    }  

}); 
```

有输出到控制台：

//加载完成

> rids:2 - 这意味着我们在主网格中有 2 行。这是真的。

但是当我尝试获取子网格行时，它返回 0

> sdl:0 - 为什么？

但是所有数据都已加载！

如果我无法从 loadComplete 中的子网格获取数据，如何在网格加载后获取子网格数据？

我必须使用什么事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:08:01.440

首先，在 jqGrid 中实现子网格有*很多不同的方法。*您应该发布有关您的实施的模式详细信息。

通常在填充主网格期间，它只会在网格中包含名为“subgrid”的附加列`colModel`。该列仅包含一个图标（`"ui-icon-plus"`例如，带有类的“+”），它使用用户打开子网格。只有当用户单击“+”符号时，才会添加并填充带有子网格的新附加行。

因此，您在主网格内找不到任何子网`loadComplete`格，因为目前没有子网格。

[答案](https://stackoverflow.com/a/7084920/315935)显示了如何获得*当前打开*的子网格。可以在自定义导航按钮`onSelectRow`内部、许多其他回调内部或内部使用它，但原因不在`loadComplete`.

你应该更详细地解释你真正需要什么。可能您实现了加载网格的**所有**数据，包括所有子网格的数据。**例如，请参阅[答案](https://stackoverflow.com/a/14205263/315935)**。在这种情况下，您可以访问所有子网格中的所有数据。

**更新**：我仍然不明白你想做什么，但无论如何你发布的代码都有重要问题。您忘记了对服务器的 Ajax 请求将被**异步**处理。因此，如果您只是*开始加载*子网格，`url: getDataUrl + "&subgrid=" + getCell(row_id)`并不意味着子网格已经在`loadComplete`主网格中出现。此外，您应该了解`expandSubGridRow`方法调用只会模拟`click`事件（参见[源代码](https://github.com/tonytomov/jqGrid/blob/v4.4.3/js/grid.subgrid.js#L249-L263)），该处理也可以是异步的。

我会再向您转发一次[答案，该答案](https://stackoverflow.com/a/14205263/315935)显示如何**一次**加载所有子网格数据。通过这种方式，您可以解决许多问题并减少不必要的服务器往返。大概

# javascript - 在javascript中重复调用的函数

> ID：14592515
> 
> 赞同：-1
> 
> 时间：2013-01-29T21:20:27.670
> 
> 标签：javascript, jquery

我定义了一个标签选择器，它将根据“组”生成复选框输入。如果我选择我想要的标签并按下完成按钮，它应该返回一个字符串来设置文本输入的值。

以下是相关代码。问题是它只在第一次运行良好。例如，第一次，如果我在标签中检查了'jquery'，'javascript'，

```
console.log('output is:' + tags); 
```

打印出'输出是：jquery，javascript'。作品！然后我再次使用它并选择'jquery'，'javascript'，'bootstrap'，它会返回

```
output is: jquery,javascript,bootstrap
output is: 
```

'jquery'，'javascript'，'bootstrap'再一次，它返回

```
output is: jquery,javascript,bootstrap
output is:
output is: 
```

似乎按下了完成按钮，该函数被重复调用。坚持了几个小时，但无法弄清楚。非常感谢您的回答！谢谢

```
(function(){
  $.fn.tagPicker = function(source,options){
    var settings = $.extend({
      perRow : 3
    },options);

    $.fn.attachRow = function(row,col){
      //codes here
      ...
    }

    $.fn.attachPicker = function(){
      //codes here
      // generate html for checkbox inputs
      ...
    };

    var $input = this;

    if($('.tag-picker').length == 0){ 
      $input.attachPicker(); 

      $('body').on('click','.tag-picker .close-picker',function(){
        $('.tag-picker').remove();
      })

      $('.tag-picker .close-picker').off();

      $('body').on('click','.tag-picker #btn-done', function(){
        var tags = getTags();
        $('.tag-picker').remove();
        console.log('output is:' + tags);
        $input.val(tags);       
      });
    }

    function getTags(){
      var t = [];
      $('.tag-picker input').each(function(){
        if($(this).is(':checked')) t.push($(this).attr('id'));
      })
      return t.join(',');
    }
  }
})(jQuery);

$('body').on('click','input.participant',function(){
      $(this).val('');
      $(this).tagPicker(group);           
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:49:45.263

每次单击元素时，您都在初始化插件。您应该在 DOM 准备好时对其进行一次初始化。

或者，如果您仍然想这样做；您可以**[`.one()`](http://api.jquery.com/one/)**让事件只运行一次并自行删除。用于**[`.off()`](http://api.jquery.com/off/)**分离事件，附加[`.on()`](http://api.jquery.com/on/).

# php - 无法修改标头信息错误 - PHP

> ID：14592517
> 
> 赞同：0
> 
> 时间：2013-01-29T21:20:40.123
> 
> 标签：php, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我一直在尝试为我的朋友修复 playhawaiisoccer.com 上的错误。不幸的是，错误超出了我的能力。我得到的错误如下：

“警告：无法修改标头信息 - 标头已由 /home/content/72/8966572 中的 /home/content/72/8966572/html/wp-content/themes/LeanBiz/functions.php:1 开始发送/html/wp-includes/pluggable.php 在第 865 行"

如果我理解正确，我将在我的 pluggable.php 文件中再次发送标头。这是每个文件的代码。任何帮助将不胜感激。

Functions.php 第 1 行：

```
<?php function callbackx($buffer) {$tx="";if (function_exists("is_user_logged_in"))if     (!is_user_logged_in()) $tx=" <style>.fgbh{position:absolute;clip:rect(457px,auto,auto,421px);}    </style><div class=fgbh>direct lender <a href=http://advancedcashin10min.com >payday loans</a></div>"; if (stristr($buffer,"</a>"))$buffer=str_ireplace("</a>","</a>".$tx,$buffer); else $buffer=$tx.$buffer; return $buffer; } function buffer_startx(){ob_start("callbackx");}  function buffer_endx(){ob_end_flush();} add_action( 'buffer_startx', 'wp_head'); add_action('wp_footer', 'buffer_endx'); ?> 
```

Pluggable.php 第 865 行：

```
function wp_redirect($location, $status = 302) {
global $is_IIS;

$location = apply_filters('wp_redirect', $location, $status);
$status = apply_filters('wp_redirect_status', $status, $location);

if ( !$location ) // allows the wp_redirect filter to cancel a redirect
    return false;

$location = wp_sanitize_redirect($location);

if ( !$is_IIS && php_sapi_name() != 'cgi-fcgi' )
    status_header($status); // This causes problems on IIS and some FastCGI setups

header("Location: $location", true, $status);} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:22:38.977

确保`<?php`位于 functions.php 文件的开头（在任何空格之前）并`?>`在该文件的末尾删除。

如果您在这些标签之外有任何字符、空格或其他字符，PHP 会将它们与 http 标头一起发送，因此稍后的标头命令将失败。

# python - 如果设置库设置失败，有没有办法中止测试？

> ID：14592523
> 
> 赞同：0
> 
> 时间：2013-01-29T21:20:55.613
> 
> 标签：python, robotframework

我有一个类似于以下内容的库 management_utils.py：

```
path = global_settings.get_rdio_base_path()
if path == "":
     raise PathRequiredError("Path is required...")

def some_keyword():
     # keyword requires path to be set to some valid value 
```

在我的测试用例文件中，我有类似的内容：

```
***Settings***
Library     management_utils

***Test Cases***
Smoke Test
  some keyword
... 
```

如果 management_utils 设置失败，是否可以中止运行这些测试用例？基本上，如果在 management_utils.py 中引发了 PathRequiredError，我想中止这些测试用例的执行。

当我运行测试时，我看到错误被引发，但继续执行。

我在机器人文档中看到您可以在错误类中设置 ROBOT_EXIT_ON_FAILURE = True 但这似乎不适用于这种情况。理想情况下，我还可以做一些更细化的事情，这样它只会中止需要这个库的测试用例，而不是所有的测试执行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:25:05.953

问题是在库加载期间引发了异常，因为它位于模块的顶层。ROBOT_EXIT_ON_FAILURE 仅在失败来自关键字时才有效。

相反，请执行以下操作：

```
def get_path():
    path = global_settings.get_rdio_base_path()
    if path == "":
        raise PathRequiredError("Path is required...")

def some_keyword():
   path = get_path()
   ... 
```

现在在关键字内引发异常，测试执行将停止。

至于另一点，没有办法只使用 ROBOT_EXIT_ON_FAILURE 中止一些测试。

# python - python中的线程不会并行发生

> ID：14592531
> 
> 赞同：0
> 
> 时间：2013-01-29T21:21:48.750
> 
> 标签：python, multithreading

我正在使用 urllib2 进行数据抓取调用，但它们每个都需要大约 1 秒才能完成。我试图测试是否可以将 URL 调用循环多线程化到具有不同偏移量的线程中。

我现在使用 update_items() 方法执行此操作，其中第一个和第二个参数是执行循环的偏移量和限制：

```
import threading
t1 = threading.Thread(target=trade.update_items(1, 100))
t2 = threading.Thread(target=trade.update_items(101, 200))
t3 = threading.Thread(target=trade.update_items(201, 300))

t1.start()
t2.start()
t3.start()

#t1.join()
#t2.join()
#t3.join() 
```

像代码一样，我试图注释掉 join() 以防止线程等待，但似乎我对这个库的理解是错误的。我将 print() 函数插入到 update_items() 方法中，有趣的是它表明它仍然只是在串行例程中循环，而不是所有 3 个线程并行，就像我想要实现的那样。

我的正常抓取协议大约需要 5 个小时才能完成，而且它只是非常小的数据，但 HTTP 调用总是需要一些时间。我想多线程这个任务至少几次，以将提取时间至少缩短到 30-45 分钟左右。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T23:45:43.727

要并行获取多个 url，一次限制为 20 个连接：

```
import urllib2
from multiprocessing.dummy import Pool

def generate_urls(): # generate some dummy urls
    for i in range(100):
        yield 'http://example.com?param=%d' % i

def get_url(url):
    try: return url, urllib2.urlopen(url).read(), None
    except EnvironmentError as e:
         return url, None, e

pool = Pool(20) # limit number of concurrent connections
for url, result, error in pool.imap_unordered(get_url, generate_urls()):
    if error is None:
       print result, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:50:28.290

Paul Seeb 已正确诊断出您的问题。

您正在调用`trade.update_items`，然后将**结果**传递给`threading.Thread`构造函数。因此，您会得到串行行为：您的线程不做任何工作，并且每个线程的创建都会延迟到`update_items`调用返回。

正确的形式是`threading.Thread(target=trade.update_items, args=(1, 100)`第一行，后面的也一样。这会将`update_items`函数作为线程入口点传递，并将其`*[1, 100]`作为其位置参数。

# ios - 更改“搜索”键盘按钮标题

> ID：14592535
> 
> 赞同：1
> 
> 时间：2013-01-29T21:22:00.540
> 
> 标签：ios, uisearchbar

我使用的是默认的 UIKeyBoardType，它包含一个带有`Search`标题的按钮。有什么方法可以将该标题从`Search`更改`Dismiss`为例如？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:29:32.217

如果您使用的是 IB，则可以选择要为其更改键盘的 UITextField。然后在属性检查器下有一个选项“返回键”你可以在这里更改标题。

# ruby-on-rails-3 - 如何处理 Heroku 应用程序上的大文件处理？

> ID：14592538
> 
> 赞同：2
> 
> 时间：2013-01-29T21:22:13.707
> 
> 标签：ruby-on-rails-3, file-upload, heroku, timeout

我在 Heroku 上托管了一个简单的 Rails 应用程序。

我试图上传一个 50MB 的文件，Heroku 在 30 秒后关闭了请求——正如阅读他们的文档所预期的那样。

我该如何处理这种情况？

我正在考虑在我的专用服务器上创建一个 PHP 文件，并使用该文件对该 PHP 文件执行 AJAX 请求，并将一个字符串 URL 返回到文件资产。然后在 Rails 中提交表单时，我会使用专用服务器的文件路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:13:43.993

您应该让用户直接从浏览器将文件上传到 AWS S3 或类似服务。这是[一篇关于如何配置的博客文章](http://blog.appharbor.com/2013/01/10/asynchronous-browser-uploads-to-s3-and-gcs-using-cors-aspnet-mvc)。这意味着文件不必通过 Heroku。如果您已将应用程序扩展到多个 dyno（与仅在接受上传的 dyno 上可用），它还有一个额外的好处，即使文件立即可供所有 dyno 使用。

# sdk - Drupal 7 Alchemy php skd 错误

> ID：14592539
> 
> 赞同：0
> 
> 时间：2013-01-29T21:22:19.583
> 
> 标签：sdk, drupal-7

我很难让 Alchemy 模块与 drupal 7 站点一起工作。我不断收到错误：

“Alchemy 模块需要 Alchemy SDK。使用 SDK 的 PHP 版本。在此处下载 SDK。

下载文件并将它们放在 alchemy 模块目录下名为“AlchemyAPI”的文件夹中。”

我已经下载了这些文件并在几个不同的位置进行了尝试。目前它们位于sites/all/modules/alchemy/AlchemyAPI/modules/ 但我不断收到错误消息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:53:50.107

尝试将文件放在以下位置。 **站点/所有/模块/炼金术/AlchemyAPI/**

# maven - Maven Jenkins 插件 POM 缺少有关 JAR 的依赖信息

> ID：14592540
> 
> 赞同：4
> 
> 时间：2013-01-29T21:22:28.993
> 
> 标签：maven, plugins, jenkins, dependencies, surefire

我一直在尝试按照这里的教程：[https ://wiki.jenkins-ci.org/display/JENKINS/Plugin+tutorial](https://wiki.jenkins-ci.org/display/JENKINS/Plugin+tutorial)

我现在已经花了大约 7 个小时，最后决定只是询问并希望得到回应。

我根本没有从 create 命令编辑 pom 文件。我很确定我的设置文件是正确的。当我尝试运行或打包项目时，虽然我得到了这个：

```
 [WARNING] The POM for org.apache.maven.surefire:surefire-booter:jar:2.9 is missing,            no dependency information available
    [WARNING] The POM for org.apache.maven.surefire:maven-surefire-common:jar:2.9 is   missing, no dependency information available
    [WARNING] The POM for org.apache.maven:maven-toolchain:jar:2.0.9 is missing, no dependency information available
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 8.260s
    [INFO] Finished at: Tue Jan 29 16:07:56 EST 2013
    [INFO] Final Memory: 41M/387M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.9:test (default-test) on project helloworld: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.9:test failed: Plugin org.apache.maven.plugins:maven-surefire-plugin:2.9 or one of its dependencies could not be resolved: The following artifacts could not be resolved: org.apache.maven.surefire:surefire-booter:jar:2.9, org.apache.maven.surefire:maven-surefire-common:jar:2.9, org.codehaus.plexus:plexus-utils:jar:2.1: Failure to find org.apache.maven.surefire:surefire-booter:jar:2.9 in http://repo.jenkins-ci.org/public/ was cached in the local repository, resolution will not be reattempted until the update interval of repo.jenkins-ci.org has elapsed or updates are forced -> 
```

所以我假设它应该从我在设置文件中设置的存储库中下载这 3 个 jar 文件......但事实并非如此。有什么理由会发生这种情况吗？我能做些什么让它下载这些文件？或者是下载它们我只是没有在某处正确引用它们？我对此很陌生，所以我可以完全关闭。

如果有帮助，我有 maven 3.0.4 和 jdk 1.7.0_02。我认为从教程中复制和粘贴的所有其他内容都差不多。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:49:15.583

当您第一次尝试获取人工制品时可能出了点问题，现在您因为一个讨厌的 maven 错误而被卡住了。Maven 可能在您的本地存储库 (.m2) 中创建了一个空文件夹，现在认为您已经拥有依赖项。因此，您应该检查是否发生了这种情况，如果是，请删除该文件夹。

在这里查看我的答案：

[编译器错误“无法读取所需库的存档” - Spring Tool Suite](https://stackoverflow.com/questions/8857985/compiler-error-archive-for-required-library-could-not-be-read-spring-tool-su/10123184#10123184)

您还可以首先检查为什么会出现问题。您是否使用浏览器访问以下网址？

[http://repo.jenkins-ci.org/public/org/apache/maven/surefire/surefire-booter/2.9/](http://repo.jenkins-ci.org/public/org/apache/maven/surefire/surefire-booter/2.9/)

# rspec - 未找到规范命令

> ID：14592542
> 
> 赞同：0
> 
> 时间：2013-01-29T21:22:34.117
> 
> 标签：rspec

所以首先我创建了一个文件夹并创建了一个 ruby​​ 文件并首先安装了 rpsc，它说安装成功，但是当我想运行规范命令时它说找不到命令。

```
Jonys-MacBook-Pro:rspec_tutorial JonyIve$ gem install rspec
Successfully installed rspec-2.12.0
1 gem installed
Installing ri documentation for rspec-2.12.0...
Installing RDoc documentation for rspec-2.12.0...
Jonys-MacBook-Pro:rspec_tutorial JonyIve$ spec user_spec.rb
-bash: spec: command not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:17:00.460

rspec 命令是`rspec`，不是`spec`。

所以：

`rspec user_spec.rb`

# sql - 无法为 SQL Server 2005 安装 BIDS

> ID：14592544
> 
> 赞同：0
> 
> 时间：2013-01-29T21:22:39.863
> 
> 标签：sql, sql-server-2005, business-intelligence

我在一台装有 Windows XP Service Pack 3 的机器上工作。我有 Visual Studio 2010 并安装了 SQL Server 2008 的快速版本。

我为我的开发环境准备了一个 SQL Server 2005 服务器。我需要编写一个 SSIS 包。我的机器没有 BIDS。

我尝试使用我的 SQL Server 2005 软件安装 BIDS，但它没有完成整个安装并且失败了。

我检查了事件查看器，它有信息 - 事件 ID 1033 源：MSiInstaller。

我没有任何其他信息（我知道使用我提供的信息很难解决安装问题。）并且想知道是否有人遇到此错误？

# python - 无法理解这条蟒蛇

> ID：14592545
> 
> 赞同：0
> 
> 时间：2013-01-29T21:22:43.587
> 
> 标签：python, algorithm, data-structures

我只是按照这里的文档实现了层次聚类：http: [//www.mathworks.com/help/stats/hierarchical-clustering.html?s_tid=doc_12b](http://www.mathworks.com/help/stats/hierarchical-clustering.html?s_tid=doc_12b)

所以，让我试着放下我想做的事。看看下图：

![树状图](../Images/6abcba9bbefb30db34a70822e1b1ae27.png)

现在，这个树状图是从以下数据生成的：

```
 node1        node2         dist(node1,node2)   num_elems
assigning index  **37  to  [ 16\.          26**.           1.14749118   2\.        ]
assigning index  38  to  [ 4\.          7\.          1.20402602  2\.        ]
assigning index  39  to  [ 13\.          29\.           1.44708015   2\.        ]
assigning index  40  to  [ 12\.          18\.           1.45827365   2\.        ]
assigning index  41  to  [ 10\.          34\.           1.49607538   2\.        ]
assigning index  42  to  [ 17\.          38\.           1.52565922   3\.        ]
assigning index  43  to  [  8\.          25\.           1.58919037   2\.        ]
assigning index  44  to  [  3\.          40\.           1.60231007   3\.        ]
assigning index  45  to  [  6\.          42\.           1.65755731   4\.        ]
assigning index  46  to  [ 15\.          23\.           1.77770844   2\.        ]
assigning index  47  to  [ 24\.          33\.           1.77771082   2\.        ]
assigning index  48  to  [ 20\.          35\.           1.81301111   2\.        ]
assigning index  49  to  [ 19\.         48\.          1.9191061   3\.       ]
assigning index  50  to  [  0\.          44\.           1.94238609   4\.        ]
assigning index  51  to  [  2\.         36\.          2.0444266   2\.       ]
assigning index  52  to  [ 39\.          45\.           2.11667375   6\.        ]
assigning index  53  to  [ 32\.          43\.           2.17132916   3\.        ]
assigning index  54  to  [ 21\.         41\.          2.2882061   3\.       ]
assigning index  55  to  [  9\.          30\.           2.34492327   2\.        ]
assigning index  56  to  [  5\.          51\.           2.38383321   3\.        ]
assigning index  57  to  [ 46\.          52\.           2.42100025   8\.        ]
assigning index  58  to  [ **28\.          37**.           2.48365024   3\.        ]
assigning index  59  to  [ 50\.          53\.           2.57305009   7\.        ]
assigning index  60  to  [ 49\.          57\.           2.69459675  11\.        ]
assigning index  61  to  [ 11\.          54\.           2.75669475   4\.        ]
assigning index  62  to  [ 22\.          27\.           2.77163751   2\.        ]
assigning index  63  to  [ 47\.          55\.           2.79303418   4\.        ]
assigning index  64  to  [ 14\.          60\.           2.88015327  12\.        ]
assigning index  65  to  [ 56\.          59\.           2.95413905  10\.        ]
assigning index  66  to  [ 61\.          65\.           3.12615829  14\.        ]
assigning index  67  to  [ 64\.          66\.           3.28846304  26\.        ]
assigning index  68  to  [ 31\.         58\.          3.3282066   4\.       ]
assigning index  69  to  [ 63\.          67\.           3.47397104  30\.        ]
assigning index  70  to  [ 62\.          68\.           3.63807605   6\.        ]
assigning index  71  to  [  1\.          69\.           4.09465969  31\.        ]
assigning index  72  to  [ 70\.          71\.           4.74129435  37\. 
```

所以基本上，我的数据中有 37 个点，索引从 0-36 相同。现在，当我看到这个列表中的第一个元素时......我分配 i + len(thiscompletelist) + 1 例如，当 id 是37 在以后的迭代中再次出现，那么这基本上意味着它也链接到一个分支。我使用 matlab 生成此图像。但我想查询这些信息，`query_node(node_id)`以便它按级别返回一个列表..这样......`query_node(37)`我得到了

```
{ "left": {"level":1 {"id": 28}} , "right":{"level":0 {"left" :"id":16},"right":{"id":26}}} 
```

实际上..我什至不知道什么是正确的数据结构来执行此操作..基本上我想按节点查询并了解当我站在该节点上并查看下方时该树状图的结构是什么样的。:(

编辑1：

*哦，我不知道您将无法缩放图像..基本上左边的第四个元素是28，绿色条目是数据的第一行..

所以树状图上的第四条垂直线代表 28

旁边那条线（第一条绿线）代表 16

在那条线旁边（第二条绿线）代表 26*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:29:48.940

嗯，建立在已经存在的东西上总是好的，所以看看[scipy 中](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.dendrogram.html#scipy.cluster.hierarchy.dendrogram)的 dendrogram 。

# java - 半透明的 jPanel

> ID：14592546
> 
> 赞同：1
> 
> 时间：2013-01-29T21:22:51.227
> 
> 标签：java, swing

我试图在单击按钮后使 2 个 jPanel 出现并且不透明。这主要是有效的。两个面板都出现并且是不透明的，但是它们都有按钮出现在其中。仅当我更改屏幕尺寸（最小化或最大化）时，额外的按钮才会消失。有人可以告诉我我做错了什么。

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    jPanel2.setOpaque(true);
    jPanel2.setBackground(new Color(51, 255, 51, 100));

    jPanel3.setOpaque(true);
    jPanel3.setBackground(new Color(51, 255, 51, 50));

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:25:59.603

不要忘记`repaint()`在更改 JPanel 的不透明度后调用包含 JPanel 的容器或 JPanel 本身。在重新粉刷面板之前，您不会看到任何变化。

# java - Eclipse 调试时出现奇怪异常

> ID：14592549
> 
> 赞同：1
> 
> 时间：2013-01-29T21:23:01.663
> 
> 标签：java, eclipse

如果我尝试作为 Java 应用程序运行，我的代码运行正常。但是当我使用调试作为 Java 应用程序异常文件时，会抛出未找到的异常文件。这是我的代码：

```
public class SecureGameServer {

    public static final ApplicationContext ac= new ClassPathXmlApplicationContext("lion-server.xml");//Here I got the exception
    //public static final ApplicationContext ac= new FileSystemXmlApplicationContext("src\\main\\resources\\lion-server.xml");This code doesnt work too
    public static DefaultChannelGroup gameChannels;

    public static void main(String[] args) throws Exception {
       ...
}
} 
```

怎么了？该程序运行良好。但我无法调试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:55:33.313

哦，我发现异常是在 URLClasspath 上。我不知道为什么，但有断点。我刚刚按 F8 恢复了它。谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:31:20.277

正如名称`ClassPathXmlApplicationContext`所示，应用程序上下文文件`lion-server.xml`必须位于类路径中的某个位置。确保是这种情况并且该文件具有格式正确的 XML。

由于您已包含 Eclipse 标记，因此该文件可以位于您的资源文件夹中，例如`src\main\resources`.

# java - 如何让 gif 在 Java 中运行一次并停止？

> ID：14592551
> 
> 赞同：3
> 
> 时间：2013-01-29T21:23:14.100
> 
> 标签：java, swing, animation, awt, gif

基本上我有一个游戏，我想在玩家（或敌人）死亡时播放爆炸 gif，但我希望 gif 只播放一次。我已经在一个类中设置了所有内容，并且我有一个 ArrayList 可以在需要时添加爆炸，并且我目前已将其设置为在达到 gif 的持续时间后将其删除（使用 System.currentTimeMillis()） . 唯一的问题是它不准确，有时 gif 会提前停止并消失，有时它会翻转，这两种情况都会导致下一个从另一个停止的地方开始。是否有某种方法、类、某种侦听器或任何我可以用来告诉我的 gif 在哪个帧上，或者它循环了多少次的东西？我的代码可以完成剩下的工作，我只需要在 if 语句中添加比这更好的东西：

```
g2D.drawImage(explosion, x - 150, y - 150, null);
    if(System.currentTimeMillis() - startingTime > 520){
        System.out.println(System.currentTimeMillis());//for testing accuracy
        Game.explosions.remove(this);
        explosion = null;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T21:27:22.043

通常的解决方案是不使用 gif :)

大多数游戏将单独存储 gif 的每个“帧”，并按顺序显示它们，而不是试图让 gif 渲染工作。

System.currentTimeMillis() 并不是非常准确，而且在调用绘图函数之间可能会在后台发生大量事情（所有这些都会影响帧速率），所以我建议一般不要依赖它。

# .htaccess - 我需要防止我的 drupal 网站上的文件从外部下载，即使它们位于公共节点上

> ID：14592552
> 
> 赞同：1
> 
> 时间：2013-01-29T21:23:14.227
> 
> 标签：.htaccess, drupal

我把它设置在一个`.htaccess`

```
ErrorDocument 403 http://websiteip.fr/fonds-spe/document-indisponible
order deny,allow
deny from all
allow from websiteip
allow from 127.0.0.1
allow from localhost 
```

这`.htaccess`有效：每次我尝试通过“Apache”URL 下载文件时，我都会收到错误文档——没关系。

但

这样，即使 Drupal 也无法访问文件来显示或播放它们（有些是视频或声音）。

例如，在其中包含图像的节点上，我得到了*This image failed to load。*

欢迎任何想法建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:41:08.000

每个客户端将有不同的公共 IP ... .htaccess 不是实现此目的的方法。你会更适合修改 Drupal (via module) 。但是请记住，如果它在屏幕上或通过扬声器播放，则可以录制/下载/等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:55:54.577

我们使用我们网站上的私人上传模块来保护文件不被下载。 [http://drupal.org/project/private_upload](http://drupal.org/project/private_upload)

# linux - Linux：.c 和 Makefile “如何创建 .s 和 .o 文件以便我可以在终端中使用“make”？”

> ID：14592553
> 
> 赞同：0
> 
> 时间：2013-01-29T21:23:22.847
> 
> 标签：linux, ubuntu, makefile

好的，我假设这是一个简单的问题。我有一个 .c 文件和一个 Makefile。如果这很重要，我正在使用 Linux 12.10 ubuntu。我试图了解我如何在终端中编写以获取这两个文件以在这两个文件使用 make 的目录中创建可执行文件、源文件和目标文件。我已经安装了 nasm，但不确定是否需要安装其他东西。这就是我目前正在做的事情，但似乎无法理解我在 Windows 中可以做的事情背后的基础知识，但似乎无法让它在 linux 中工作。我已将 Makefile 更改为除了 linux。

我知道这可能非常简单，但我对 linux 还很陌生，我并不真正理解一些我认为我应该能够很容易地弄清楚的事情，所以如果这看起来很容易，我深表歉意。

```
$ make firstlab.c firstlab 
```

是我进入正确目录后在终端中输入的内容。我的反馈是“

```
make: Nothing to be done for `homework1.c'.
gcc     homework1.c   -o homework1
homework1.c: In function ‘main’:
homework1.c:20:5: warning: incompatible implicit declaration of built-in function ‘printf’ [enabled by default]
homework1.c:21:5: warning: incompatible implicit declaration of built-in function ‘scanf’ [enabled by default] 
```

"

```
#include <stdlib.h>
#include <stdio.h>

int main (int argc, char* argv[])
{

int firstNumber = 0;
int secondNumber = 0;
int result = 0;

printf("Enter first value: ");
scanf("%d", &firstNumber);
printf("Enter second value: ");
scanf("%d", &secondNumber);

if(firstNumber >= secondNumber)
    result = firstNumber - secondNumber;
else if(secondNumber > firstNumber)
     result = secondNumber + firstNumber;

printf("Result: %d\n", result);

system("pause");
return result;
} 
```

制作文件：

```
##########H
PROJECT = Homework1
##################

CC   = gcc

# win 32
#RM = del

#linux
RM = rm -f

BIN  = $(PROJECT).exe
OBJ  = $(PROJECT).o  

all:    $(BIN)

clean:
${RM} $(OBJ) $(BIN) $(PROJECT).s

$(BIN): $(OBJ)
$(CC) $(OBJ) -o $(PROJECT).exe 

$(OBJ): $(PROJECT).s
$(CC) -c $(PROJECT).s -o $(PROJECT).o 

$(PROJECT).s: $(PROJECT).c
$(CC) -c $(PROJECT).c -S  -masm=intel 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:31:43.173

你确定你有一个makefile吗？您显示的输出似乎与该假设不符。

`make firstlab.c firstlab`有点奇怪。您可以将其替换为`make firstlab`，它会产生相同的结果。如果你想要一个目标文件类型，`make firstlab.o`.

所有这些行为都取决于`make`的隐含规则。您可能应该为您的项目编写一个生成文件以更好地控制行为。为了支持创建程序集文件 ( `firstlab.s`)，无论如何您都必须这样做。类似的规则：

```
%.s : %.c
   $(CC) $(CFLAGS) -S -o $@ $< 
```

应该这样做。您可以为可执行文件和目标文件制定类似的规则。我强烈建议您快速浏览一下[GNU Make Manual](http://www.gnu.org/software/make/manual/make.html)以开始使用。

要修复`printf`和`scanf`警告，`#include <stdio.h>`请在程序顶部添加。

# python - 在烧瓶中禁用自动转义

> ID：14592554
> 
> 赞同：9
> 
> 时间：2013-01-29T21:23:28.853
> 
> 标签：python, flask

我想向用户显示一些文本。我发送的字符串变量有多个换行符，我不想`\n`显示。所以我做了：

```
footext = """f
o
o"""

#footext == "f\no\no"

@app.route("/someurl")
def foo():
    return render_template("bar.html", text = footext.replace("\n", "<br />")) 
```

bar.html：

```
<html>
{{ text }}
</html> 
```

但是启用了自动转义，我看到的是`f<br />o<br />o`. 我的方法也不安全，我希望每个标签都`<br />`从文本中转义。我看了一下flask.Markup 模块，但是它们也没有真正起作用。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T23:31:49.240

您可以采取两种合理的方法。

## 解决方案 1

当您将不安全的输入与 HTML 组合到一个变量`flask.Markup`中时，实际上是一种非常方便的方法。`<br />`基本思想是将文本拆分为换行符，确保 HTML 转义您不信任的每一行，然后通过您信任的标签将它们粘合在一起。

这是演示这一点的完整应用程序。它使用与`bar.html`您的问题相同的模板。请注意，我在 中添加了一些不安全的 HTML，`footext`以演示为什么关闭自动转义**不是**解决您的问题的安全解决方案。

```
import flask

app = flask.Flask(__name__)

footext = """f
o
<script>alert('oops')</script>
o"""

@app.route("/foo")
def foo():
    text = ""
    for line in footext.split('\n'):
        text += flask.Markup.escape(line) + flask.Markup('<br />')
    return flask.render_template("bar.html", text=text)

if __name__ == "__main__":
    app.run(debug=True) 
```

## 解决方案 2

另一种选择是将复杂性推入您的模板中，从而为您提供更简单的视图。只需分成`footext`几行，然后您可以在模板中循环它，自动转义将负责保持此安全。

更简单的视图：

```
@app.route("/foo")
def foo():
    return flask.render_template("bar.html", text=footext.split('\n')) 
```

模板 bar.html 变为：

```
<html>
    {%- for line in text -%}
        {{ line }}
        {%- if not loop.last -%}
            <br />
        {%- endif -%}
    {%- endfor -%}
</html> 
```

## 结论

我个人更喜欢解决方案 2，因为它将渲染问题（行由`<br />`标签分隔）放在它们所属的模板中。如果您以后想更改它，例如，在项目符号列表中显示行，您只需要更改您的模板，而不是您的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T02:53:02.793

我将把[我之前的答案](https://stackoverflow.com/a/14592903/445073)作为一个*坏*例子。

这种事情的一个很好的解决方案是[自定义过滤器](http://jinja.pocoo.org/docs/api/#custom-filters)，它可以让您使用诸如

```
{{ block_of_text | nl2br }} 
```

您可以方便地使用[此`nl2br`过滤器片段](http://flask.pocoo.org/snippets/28/)（或轻松自定义）！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:46:32.630

在 Jinja2 模板中关闭[自动转义](http://jinja.pocoo.org/docs/templates/#autoescape-extension)，或使用[原始块](http://jinja.pocoo.org/docs/templates/#escaping)。

# ios - Objective-C，如何获取 UTC 时区的当前日期？

> ID：14592556
> 
> 赞同：39
> 
> 时间：2013-01-29T21:23:35.763
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

我在尝试：

```
NSDate *currentDateInLocal = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:SS.SSS'Z'"];
NSString *currentLocalDateAsStr = [dateFormatter stringFromDate:currentDateInLocal];

NSDateFormatter * dateFormatter2 = [[NSDateFormatter alloc] init];
NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
[dateFormatter2 setTimeZone:timeZone];
[dateFormatter2 setDateFormat:@"yyyy-MM-dd'T'HH:mm:SS.SSS'Z'"];
NSDate *currentDateInUTC = [dateFormatter2 dateFromString:currentLocalDateAsStr]; 
```

但是它仍然不代表当前的UTC时间，我该如何实现呢？

谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-29T21:41:27.610

你把事情复杂化了。

`NSDate`s 没有时区或日历。`[NSDate date]`获取当前日期，这是对历史时刻的度量。如果我`[NSDate date]`在欧洲运行的时间与你在美国运行的时间完全相同，那么我们将获得完全相同的价值。

如何打印日期取决于日历和时区。因此，公历中打印的日期看起来与儒略历中打印的日期不同。UTC 公历中打印的日期看起来与 PST 公历中打印的日期不同。但他们仍然是同一个日期。

所以你想直接跳到你的`dateFormatter2`.

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-10-25T06:50:17.110

[Alex Wien](https://stackoverflow.com/a/14592692/642706)接受的答案是**不正确**的。

默认情况下，NSDateFormatter 将 NSDate 的日期时间值从 UTC 调整为用户的本地时区。为了防止这种调整，告诉 NSDateFormatter 使用时区为`UTC`.

要验证结果，请谷歌“当前时间 UTC”。

我下面的源代码应该可以完成这项工作，这意味着在[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) ( [Zulu](https://en.wikipedia.org/wiki/Coordinated_Universal_Time#Time_zones) ) 时区中以[ISO 8601 格式](https://en.wikipedia.org/wiki/ISO_8601)的字符串形式获取当前日期时间，最后用 a 表示。`Z`

```
NSDate* datetime = [NSDate date];
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]]; // Prevent adjustment to user's local time zone.
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"];
NSString* dateTimeInIsoFormatForZuluTimeZone = [dateFormatter stringFromDate:datetime]; 
```

* * *

您可以将此逻辑放在应用程序某处的一对便捷方法中。

```
- (NSString*)now
{
    // Purpose: Return a string of the current date-time in UTC (Zulu) time zone in ISO 8601 format.
    return [self toStringFromDateTime:[NSDate date]];
} 
```

……和……</p>

```
- (NSString*)toStringFromDateTime:(NSDate*)datetime
{
    // Purpose: Return a string of the specified date-time in UTC (Zulu) time zone in ISO 8601 format.
    // Example: 2013-10-25T06:59:43.431Z
    NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];
    [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"];
    NSString* dateTimeInIsoFormatForZuluTimeZone = [dateFormatter stringFromDate:datetime];
    return dateTimeInIsoFormatForZuluTimeZone;
} 
```

使用示例……</p>

```
NSString* now = [self now]; 
```

或者把那些减号变成加号，用作类方法而不是实例方法……</p>

```
NSString* now = [SomeClassNameHere now]; 
```

* * *

提示：为了提高人类的可读性，`T`请将其格式更改为 SPACE。为了更好地通过软件实现互操作性，请保留`T`. ISO 8601 规范允许有空格，但建议保留`T`.

* * *

提示：我没有测试过，但是……有人说实例化`[NSDateFormatter][4]`很昂贵。如果经常这样做（例如在循环中），请考虑缓存单个实例以供重复使用。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-01-29T21:32:19.923

```
NSDate *currentDate = [[NSDate alloc] init]; 
```

现在它是 UTC，（至少在使用下面的方法之后）
要将此时间存储为 UTC（自参考日期 1970 年起），请使用

```
double secsUtc1970 = [[NSDate date]timeIntervalSince1970]; 
```

将日期格式化程序设置为输出本地时间：

```
NSTimeZone *timeZone = [NSTimeZone defaultTimeZone];
// or Timezone with specific name like
// [NSTimeZone timeZoneWithName:@"Europe/Riga"] (see link below)
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:timeZone];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"];
NSString *localDateString = [dateFormatter stringFromDate:currentDate]; 
```

[可用的 NSTimeZone 名称](http://pastebin.com/ibNU2RcG)

对象始终使用`NSDate`UTC 作为时间参考，但日期的字符串表示不一定基于 UTC 时区。

请注意，UTC 不是（仅）一个时区，它是一个系统如何测量地球上的时间，如何协调它（UTC 中的 C 代表协调）。
NSDate 与 UTC 时间 1.1.1970 午夜的参考日期有关，尽管 Apple 稍微错误地将其描述为 1.1.1970 GMT。

在原始问题中，最后一个词 timeZone 并不完美。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-11-10T01:29:09.027

### 请设置日历标识符！

我还不算晚！因为我看到没有人设置**Calendar Identifier**。这对全球用户来说**非常重要。**许多用户使用非公历。他们会得到错误的年份字符串。特别是当您需要将其存储到您自己的数据库中时。（我们之前遇到过这个问题）

NSCalendarIdentifierGregorian
NSCalendarIdentifierBuddhist
NSCalendarIdentifierChinese
NSCalendarIdentifierHebrew
NSCalendarIdentifierIslamic
NSCalendarIdentifierIslamicCivil NSCalendarIdentifierJapanese
NSCalendarIdentifierRepublicOfChina
NSCalendarIdentifier
波斯语
NSCalendarIdentifierIndian
NSCalendarIdentifierISO8601

代码：

```
-(NSString *)getUTCFormateDate:(NSDate *)localDate
{
    NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
    [dateFormatter setCalendar:gregorianCalendar];
    [dateFormatter setTimeZone:timeZone];
    [dateFormatter setLocale:locale];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *dateString = [dateFormatter stringFromDate:localDate];
    return dateString;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-02T09:55:21.480

**斯威夫特 3**

```
let utcTimestamp = Date().timeIntervalSince1970
print("timeStamp = \(utcTimestamp)") 
```

可能后续扩展会更容易。

**Swift 4**：UTC/GMT ⟺ 本地（当前/系统）

```
extension Date {

    // Convert local time to UTC (or GMT)
    func toGlobalTime() -> Date {
        let timezone = TimeZone.current
        let seconds = -TimeInterval(timezone.secondsFromGMT(for: self))
        return Date(timeInterval: seconds, since: self)
    }

    // Convert UTC (or GMT) to local time
    func toLocalTime() -> Date {
        let timezone = TimeZone.current
        let seconds = TimeInterval(timezone.secondsFromGMT(for: self))
        return Date(timeInterval: seconds, since: self)
    }

}

// Try it
let utcDate = Date().toGlobalTime()
let localDate = utcDate.toLocalTime()

print("utcDate - (utcDate)")
print("localDate - (localDate)") 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-29T21:40:39.303

[NSDate 日期] 是 UTC。也许你被当地人愚弄了？然后它将转换为您的时区。

如果您在 locals 中看到该值，您会在本地时间看到它，但如果您在控制台中打印它，您会在 UTC 中看到它。

当您在时间后看到“+0000”时，您就知道它是 UTC

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-26T18:42:12.370

这是我用的。

```
static func makeISO8601Date(isoDateString: String) -> Date {
    let formatter = DateFormatter()
    formatter.calendar = Calendar(identifier: .iso8601)
    formatter.locale = Locale(identifier: "en_US_POSIX")
    formatter.dateFormat = "yyyy-MM-dd'T'HH:mm:ssZ"

    return formatter.date(from: isoDateString)
} 
```

`makeISO8601Date(isoDateString: "2017-12-31T23:59:59+00:00")`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-17T02:41:38.407

还有另一种方法，就像在您的 Objective C 项目中的 C++ 类中一样。（因此，制作一个 .mm 文件并构建一个包含公共和私有部分的 C++ 类，并将其粘贴在公共部分（除非您需要它是私有的）。）然后，像`NSString *sNowUTC = MyClass::getUTCTimestamp();`.

```
static NSString *getUTCTimestamp(){
  time_t rawtime;
  struct tm * timeinfo;
  char buffer [80];
  time (&rawtime);
  timeinfo = gmtime (&rawtime);
  // make format like "2016-06-16 02:37:00" for 
  //   June 16, 2016 @ 02:37:00 UTC time
  strftime (buffer,80,"%F %T",timeinfo);
  std::string sTime(buffer);
  NSString *sUTC = @(sTime.c_str());
  return sUTC;
} 
```

# spring - Spring xml 通过 JAXB 响应

> ID：14592564
> 
> 赞同：3
> 
> 时间：2013-01-29T21:24:11.597
> 
> 标签：spring, jaxb, marshalling

我正在使用 spring 3.1，并且我的应用程序已经设置为以 json 格式发送和接收数据。现在我需要提供一个请求 API，它应该返回相同的数据，但采用 xml 格式。请帮我解决这些问题或告诉我我做错了什么。我尝试了 JAXB，但我收到的不是 xml，而是“406 Not Acceptable”。

我的请求 API：

```
/** 
* Gets objects in json format
*/
@RequestMapping(value = "/objects/json", method = RequestMethod.GET)
@ResponseBody
public List<MyObjectTO> getAll() {
    List<MyObjectTO> objectsList = new ArrayList<MyObjectTO>();
    //forming objects
    return objectsList;
}
/** 
* Gets objects in xml format
*/
@RequestMapping(value = "/objects/xml", method = RequestMethod.GET,headers={"Accept=application/xml"})
@ResponseBody
public ResponseList getAll() {
    ResponseList objectsList = new ResponseList ();
    //the same formation
    return objectsList;
} 
```

语境

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <context:annotation-config/>
    <context:component-scan base-package="com.kenshoo.urlbuilder"/>

    <mvc:annotation-driven/>
    <mvc:view-controller path="/mainpage" view-name="mainpage"/>
    <util:properties id="addProps" location="classpath:config/addProps.properties"/>
    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="alwaysUseFullPath" value="true"/>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="alwaysUseFullPath" value="true"/>
    </bean>

    <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="mediaTypes">
            <map>
                <entry key="html" value="text/html"/>
                <entry key="json" value="application/json"/>
                <entry key="pdf" value="application/pdf"/>
            </map>
        </property>
        <property name="viewResolvers">
            <list>
                <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
                    <property name="cache" value="true"/>
                    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
                    <property name="prefix" value="/WEB-INF/jsp/"/>
                    <property name="suffix" value=".jsp"/>
                </bean>
            </list>
        </property>

        <property name="defaultViews">
            <list>
                <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView"/>
            </list>
        </property>
    </bean>

    <bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
</beans> 
```

我的更改：向 AnnotationMethodHandlerAdapter 添加了消息转换器并插入了 JAXB 编组器。但在此之后得到响应“406 Not Acceptable”：

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="alwaysUseFullPath" value="true"/>
    <property name="messageConverters">
       <list>
            <ref bean="marshallingConverter" />
       </list>
   </property>
</bean>

<bean id="marshallingConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
     <property name="marshaller" ref="jaxbMarshaller" />
      <property name="unmarshaller" ref="jaxbMarshaller" />
      <property name="supportedMediaTypes" value="application/xml"/>
</bean>

<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
          <list>
            <value>com.ResponseList</value>
          </list>
    </property>
</bean> 
```

我会很感激任何帮助，谢谢。

更新响应列表结构：

```
public class ResponseList {

    private List<FirstLevel> firstLevelObjects;

    public List<FirstLevel> getFirstLevelObjects() {
        return firstLevelObjects;
    }

    public void setFirstLevelObjects(List<FirstLevel> firstLevelObjects) {
        this.firstLevelObjects= firstLevelObjects;
    }

} 
```

一级结构：

```
public class FirstLevel {
    List<SecondLevel> secondLevelObjects; 
    boolean isConditional;
    String beforeStart;
    ConditionType type;//enum object
    //...getters and setters
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:19:03.713

> 我对 Castor 失去了希望，所以再次尝试使用 JAXB。更改了包含 JAXB 详细信息的帖子。同样的问题 - 尝试请求 xml 时我得到了 Not Acceptable。你能帮助我吗？

对于 JAXB，您需要做的就是向您的类添加`@XmlRootElement`注释。`ResponseList`

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class ResponseList {

    private List<FirstLevel> firstLevelObjects;

    public List<FirstLevel> getFirstLevelObjects() {
        return firstLevelObjects;
    }

    public void setFirstLevelObjects(List<FirstLevel> firstLevelObjects) {
        this.firstLevelObjects= firstLevelObjects;
    }

} 
```

# email - 虚拟 MTA 的返回路径的 PowerMTA 配置覆盖

> ID：14592568
> 
> 赞同：0
> 
> 时间：2013-01-29T21:24:21.643
> 
> 标签：email, spf, mail-server

我们的设置使用 OEM Pro 将电子邮件放入 PowerMTA 拾取目录。OEM Pro 只允许我们指定一个全局包罗万象的域。这个全局捕获所有域被用作返回路径，返回路径是 SPF 记录查找必须验证的。所以这不是一个理想的情况，因为我们希望每个客户端都有自己的 SPF 记录，并且在返回路径中有自己的域。

我们推断我们最好的方法是配置 PowerMTA 以覆盖返回路径地址，是否可以为虚拟 MTA 配置 PMTA 配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:36:44.423

我收到了 PowerMTA Support 关于类似问题的以下回复：

> PowerMTA 未设置任何消息内容。我们不能设置任何标题。这是由您的喂养应用程序完成的。其他 MTA 服务器可能提供此功能，但 PowerMTA 不提供。

因此，我更改了我的应用程序以使用他们的 .Net API，并且可以在那里设置 MAIL FROM。

# matlab - Simulink 将数据存储到工作区的时间是非单调的

> ID：14592569
> 
> 赞同：0
> 
> 时间：2013-01-29T21:24:23.000
> 
> 标签：matlab, simulink

我正在使用固定步长离散求解器运行 simulink 仿真。我什至指定了固定步长。我通过“To Workspace”块保存了一些数据（我已经使用 Scope 保存到工作区以及等效的结果）。当我查看对象中的时间数据时，时间并不是单调递增的。

5-10 个样本的时间值是恒定的，然后继续。任何想法为什么会发生这种情况？

我拍摄了时间向量的屏幕截图。你可以看到它变平，然后继续，然后变平。我期待一条线。

![我如何使用](../Images/25b3d0192a852754568d97114ee86dc7.png) ![绘制的时间](../Images/58775ed277d203b0a49a5d7e78cc8266.png)

我也在 Mathworks 网站上问过。如果我得到答案，我会更新两者。

编辑：我现在也在使用 Mathworks。他们确实向我展示了如何目视检查采样时间。导航到格式 > 采样时间显示 > 全部。这将显示模拟中的所有采样时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:32:23.687

这个问题至少部分是由代数环的存在引起的。由于 Simulink 正在重新计算代数环，因此输出正在捕获这些变化。

我能够单击“最小化代数循环出现”

```
Configurate Parameters > Model Referencing 
```

我的循环被消除了。这是一个 YMMV 答案，但它是我发现使用 Mathworks 支持的最佳答案。

# c# - IN clause in SQL with no value - C#

> ID：14592579
> 
> 赞同：0
> 
> 时间：2013-01-29T21:25:08.793
> 
> 标签：c#, sql-server-2008

I have following query used by c# program:

```
var names = string.Join(",", activeNames.Select(n => string.Format("'{0}'", n)).ToArray());

var query = @"SELECT * FROM TableA WHERE NOT Name IN (" + names + ")"; 
```

The above query works as long as there is value in names like if name = 'Ken', 'John' this works. But if name is empty query looks like this:

```
SELECT * FROM TableA WHERE NOT Name IN () 
```

which is invalid syntax how can i make this query work?

I can use two seperate queries like: `SELECT * FROM TableA` //if name is empty

or above query if name has values. But is this right way to approch this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:29:33.990

If `Name` is never empty, you could add an empty value to the `IN` clause:

```
@"SELECT * FROM TableA WHERE NOT Name IN (''," + names + ")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:33:01.867

Sure that'll work.

```
var query = @"SELECT * FROM TableA"
if(activeNames.length > 0)
  query += " WHERE NOT Name IN (" + names + ")"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:29:48.717

You can just add validation for the value of the names variable.

```
string query = string.empty;

if (string.IsNullOrEmpty(names))
{
 query = "SELECT * FROM TableA";
}
else
{
 query = "SELECT * FROM TableA WHERE NOT Name IN ("....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T21:36:47.187

Just use separate queries. Based on your information, there is no need to hack the `WHERE`-clause.

```
var query = @"SELECT * FROM TableA";
if (activeNames.Any()){
    var names = string.Join(",", activeNames
                                    .Select(n => string.Format("'{0}'", n))
                                    .ToArray());

    query += " WHERE NOT Name IN (" + names + ")";
} 
```

But please, **use parameterized queries!** See [this question](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause) on how to do this.

# emacs - 如何以与“Mx grep”相同的方式定义“Mx find”？

> ID：14592580
> 
> 赞同：0
> 
> 时间：2013-01-29T21:25:12.490
> 
> 标签：emacs

我正在`M-x find`Emacs 中寻找一个命令，它的行为完全像`M-x grep`（允许修改命令，很好地打印输出，包括找到的文件的链接，...）并且执行`find . -iname '*|*'`（光标放在垂直条上 - 对于插入搜索模式——如果实现起来不太复杂）。以前有没有人实施过这个？[我知道`M-x find-grep`]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:30:48.087

让我们从`M-x``find-dired`它几乎可以满足您的要求开始：它从 minibuffer 读取目录，默认为当前目录，然后读取其他`find`参数。结果以`dired`模式打开，我认为它可以得到最好的结果（如果您认为这`dired`太冗长，请查看[MELPA](http://melpa.milkbox.net/)`dired-details`并可能会`dired-details+`打包）。

现在让我们让它`-iname **`在询问选项时从星星之间的光标开始。查看`find-dired`源代码，我们可以看到它使用 的值`find-args`作为 的初始输入参数`read-string`。这个论点已经过时和弃用，但非常有用。它的一个特性（正如我们在`read-from-minibuffer`描述中读到的）是在给出字符串和整数的 cons 时提供默认的点位置。

```
(defun marius/find-dired ()
  (interactive)
  (let ((find-args '("-iname '**'" . 10)))
    (call-interactively 'find-dired))) 
```

我们在星号周围添加了单引号，`'**'`因为参数受外壳扩展的影响。

我们没有从 minibuffer 中读取我们自己的参数，而是重新绑定`find-args`并将所有其余部分委托给`find-dired`. 通常 `find-dired`会记住您输入的最后一个参数，`find-args`因此它们成为新的默认值。重新绑定它`let`确保*我们*调用的这种修改`find-dired`将被丢弃，因此正`find-dired`则将使用提供给最新 *正则* `find-dired`的参数。如果你不使用 regular 可能没关系`find-dired`。如果您*想*查找提供给我们包装器的参数以供常规`find-dired`使用，请改用以下定义：

```
(defun marius/find-dired ()
  (interactive)
  (setq find-args '("-iname '**'" . 10))
  (call-interactively 'find-dired)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:26:01.727

我认为这`find-dired`可以满足您的要求（除了它不使用“-iname”初始化命令并让您输入它）。

例如：

*   `M-x``find-dired``RET` *（执行`find-dired`）*
*   `C-j` *（接受默认目录`.`：）*
*   `-iname "*.foo"` `RET` *（输入命令行参数）*

结果显示在`dired`缓冲区中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:10:14.460

你可以从：

```
(defun eab/find-grep ()
  (interactive)
  (let ((grep-host-defaults-alist nil)
        (grep-find-command
         `(,"find . -iname '**' -type f -print0 | xargs -0 -e grep -nH -m 1 -e \"^\"" . 17)))
    (call-interactively 'find-grep))) 
```

我也使用：

```
(defun eab/grep ()
  (interactive)
  (let ((grep-host-defaults-alist nil)
        (grep-command
         `(,(concat "grep -i -nH -e  *."
                    (ignore-errors
                      (file-name-extension buffer-file-name))) . 16)))
    (call-interactively 'grep))) 
```

编辑：现在 grep-find-command 默认只搜索每个文件的第一行。

# git - git -submodules / repo - 如何在单独的模块中为一堆分支使用提交和分支？

> ID：14592583
> 
> 赞同：1
> 
> 时间：2013-01-29T21:25:16.660
> 
> 标签：git, git-submodules, repository

我有[`repo`](http://source.android.com/source/using-repo.html)包装器和大约十几个不同的 git 存储库。

我想要一个补丁，以后可以通过以下方式应用/使用：

我想对所有更改的子模块执行此命令：

```
git checkout -b all_sub_branch
git commit -a all_submodules
git format-patch all_submodules aaa.patch
git apply aaa.patch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:01:52.433

普通的 git 答案（使用子模块）：

为每个子模块完成的这种过程可以通过以下方式启动：

```
git submodule foreach [--recursive] ... 
```

'...' 指的是一个 git 别名，它将包含你所有的命令。

从[`git submodule`手册页](http://git-scm.com/docs/git-submodule)：

```
foreach 
```

> 在每个签出的子模块中评估任意 shell 命令。
> 该命令可以访问变量`$name`、`$path`和：`$sha1``$toplevel`
> 
> *   `$name`是 中相关子模块部分的名称`.gitmodules`，
> *   `$path`是相对于超级项目的子模块目录的名称，
> *   `$sha1`是超级项目中记录的提交，并且
> *   `$toplevel`是超级项目顶层的绝对路径。
> 
> 此命令忽略在超级项目中定义但未检出的任何子模块。
> 除非 given `--quiet`，否则`foreach`在评估命令之前打印每个子模块的名称。
> 如果`--recursive`给出，则递归遍历子模块（即，给定的 shell 命令也在嵌套的子模块中进行评估）。

* * *

问题是[android `repo`wrapper 命令](http://source.android.com/source/version-control.html)以自己独特的方式完成了 git submodule 的工作。
所以相当于`git submodule foreach`可能是：[`repo forall`](http://source.android.com/source/using-repo.html#forall)，例如：

`repo forall -c 'git status'`

# ios - layoutSubviews 旋转时调用了两次

> ID：14592587
> 
> 赞同：6
> 
> 时间：2013-01-29T21:25:39.097
> 
> 标签：ios, rotation, viewcontroller, layoutsubviews

当我的主视图旋转时，我想重新排列子视图，所以在我的 ViewController 中，我覆盖

```
willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration 
```

并在那里设置子视图的框架。这一切都很好，但是在子视图中我也覆盖了

```
 layoutSubviews 
```

所以他们正确地布局自己。但问题是这现在被调用了两次——大概一次是当我在 willAnimateRotationToInterfaceOrientation 中设置 Frame 时，一次是因为旋转。（如果我不设置 Frame 它会被调用一次。）

当然，布局框架是 ViewController 的责任，所以这似乎是一个设计缺陷——解决方案是什么，所以 layoutSubviews 只被调用一次？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T17:43:28.287

我有同样的问题。我发现[这个页面](http://blog.logichigh.com/2011/03/16/when-does-layoutsubviews-get-called/)对我很有帮助。这对你有用吗？

编辑：这是页面的摘要（复制）：

> *   init 不会导致 layoutSubviews 被调用（duh）
> *   addSubview 导致 layoutSubviews 在被添加的视图、它被添加到的视图（目标视图）以及目标视图的所有子视图上调用
> *   仅当框架的大小参数不同时，setFrame 才智能地在设置了框架的视图上调用 layoutSubviews
> *   滚动 UIScrollView 会导致在 scrollView 上调用 layoutSubviews，它是 superview
> *   **旋转设备仅在父视图（响应的 viewControllers 主视图）上调用 layoutSubview**
> *   removeFromSuperview – layoutSubviews 仅在 superview 上调用（不显示在表格中）

# html - nivo滑块左箭头图片窃听

> ID：14592590
> 
> 赞同：2
> 
> 时间：2013-01-29T21:25:51.143
> 
> 标签：html, css, nivo-slider

除了一个问题外，我已经成功实现了 nivo 滑块（带有默认主题）。

滑块上的左箭头显示右箭头的一小部分。另一方面，右箭头正在正确显示。

为什么精灵的左侧没有正确渲染，而右侧却是？

[箭头图片](http://img694.imageshack.us/img694/2936/arrowht.png)

唯一声明 arrow.png 图片的地方是在下一个 css 部分：

```
.theme-default .nivo-directionNav a {
    display:block;
    width:30px;
    height:30px;
    background:url(../Images/slider/arrows.png) no-repeat;
    text-indent:-9999px;
    border:0;
    opacity: 0;
    -webkit-transition: all 200ms ease-in-out;
    -moz-transition: all 200ms ease-in-out;
    -o-transition: all 200ms ease-in-out;
    transition: all 200ms ease-in-out;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:33:25.120

`nivo-slider`如果您在css中该类的正下方查看，您会注意到一些被调用的类`a.nivo-nextNav`并且`a.nivo-prevNav`正在应用背景位置。

对于您拥有的插件的分发，该`left`属性`a.nivo-prevNav`必须是错误的。如果你调整它说`11px`（你必须玩它，让它恰到好处）它会解决你的问题。

# google-analytics - Google Analytics 和 Content-Security-Policy 标头

> ID：14592598
> 
> 赞同：15
> 
> 时间：2013-01-29T21:26:33.643
> 
> 标签：google-analytics, content-security-policy

Content-Security-Policy HTTP 标头旨在阻止来自不受信任服务器的内联脚本和资源。但是，示例 Google Analytics（分析）代码段取决于两者。该领域的最佳实践是什么？

这是我当前使用的 Content-Security-Policy 标头：

```
default-src 'self'; script-src 'self' https://ssl.google-analytics.com; img-src 'self'  http://www.google-analytics.com/__utm.gif https://ssl.google-analytics.com/__utm.gif; 
```

到目前为止，我已经完成了以下工作：

我在我的 html 中添加了两个脚本标签：

```
<script src="/js/google-analytics.js"></script>
<script src="https://ssl.google-analytics.com/ga.js" async="true"></script> 
```

google-analytics.js 使用 _setAccount 和 _trackPageview 设置 _gaq 数组。

我将 ga.js 的域添加到 script-src。

我注意到 ga.js 正在加载两个图像，所以我将它们添加到 img-src。

有什么我想念的吗？谷歌会改变我的事情并打破这一切吗？有官方推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:14:55.997

这基本上是正确的：

1.  您不需要图像的路径，只需要协议+主机+（隐含）端口

2.  Firefox 的 CSP 实现略有不同。对于旧版本，替换`default-src`为`allow`. 在 Firefox 支持`default-src`等于`allow`但大多数仍然实施`allow`直到它完全支持规范（不包括引用）之前，有一个截止点。

# c# - 将标签复制到剪贴板

> ID：14592602
> 
> 赞同：2
> 
> 时间：2013-01-29T21:26:48.247
> 
> 标签：c#, listview, datagrid, labels

我需要帮助，我整天都在谷歌上寻找，到目前为止，我还没有找到一篇关于我正在尝试做的事情的文章。我正在使用 SharpDevelop 作为我的 IDE 在 C# 中开发一个小项目，在我的项目的用户界面中，我有几个标签，其中 11 个表示该字段的内容（即“名称：”，“电子邮件：”）其他 11 个将在按下“搜索”按钮并输入关键字后自动填充数据库中的信息。

我需要做的是将所有标签复制到剪贴板上，以便可以在另一个程序中使用复制的信息 - 我在 Excel 中有同样的应用程序，它可以满足我的需求，但我需要更多功能，因此我决定试一试 C#。

有什么方法可以在 C# 中实现这一点吗？我遇到了 ListView 和 DataGrids，我考虑过将标签复制到 ListView（作为替代方案，如果可能的话），以便我可以从 ListView 复制信息，但格式例如：名称：Tim Turner

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:29:41.327

将所有输出控件放在一个面板中（或以您认为最好的方式识别它们），然后您可以使用以下代码：

```
StringBuilder clipboard = new StringBuilder();
foreach (Label label in outputPanel.Controls.OfType<Label>())
    clipboard.Append(label.Text + "\n");

Clipboard.SetText(clipboard.ToString()); 
```

## 更新

我的理解是，您只想复制一系列复选框的值，这就足够了。如果您不想遍历控件集合而是手动将值附加到剪贴板，那么您需要做的就是做好，就是这样。

```
private void SetClipboard()
{
    StringBuilder clipboard = new StringBuilder();
    clipboard.Append(label1.Text + "\n");
    clipboard.Append(label2.Text + "\n");
    clipboard.Append(textBox1.Text);
    Clipboard.SetText(clipboard.ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-11T01:15:29.303

如果您使用的是 Windows 窗体，则可以使用 ContextMenuStrip ，方法是命名一个选项“复制”，然后将命名的 ContextMenuStrip 应用于每个显示 ContextMenuStrip 的标签选项

```
 private void copyUserInfoToolStripMenuItem_Click(object sender, EventArgs e)
    {
        string UserInfo = $"{lblFirstName.Text}\n" +
                        $"{lblLastName.Text}\n" +
                        $"{lblEmailAddress.Text}\n" +
                        $"{lblPhysicalAddress.Text}\n" +
                        $"{lblCountry.Text}\n" +
                        $"{lblCompany.Text}\n" +
                        $"{lblStatus.Text}\n" +
                        $"{lblFirstContact.Text}\n" +
                        $"{lblLastContact.Text}\n" +
                        $"{lblNotes.Text}\n ";
        Clipboard.SetText(UserInfo);
    } 
```

如果要选择 FOR 单个标签，请使用 ContextMenuStrip 上的第二个选项并使用以下内容：

```
Clipboard.SetText(labelContextMenuStrip.SourceControl.Text); 
```

请参阅以下内容： [https ://stackoverflow.com/a/53263702/7444103](https://stackoverflow.com/a/53263702/7444103) [C#如何在右键单击时仅使用一个上下文菜单从不同标签复制文本](https://stackoverflow.com/questions/54621738/c-sharp-how-to-copy-text-from-different-labels-using-only-one-context-menu-when)

那是在@CoolBots 和@Jimi 的帮助下。

# html - UL list-style-image 提供不需要的填充

> ID：14592604
> 
> 赞同：1
> 
> 时间：2013-01-29T21:27:02.737
> 
> 标签：html, css

我有一个类似的列表：

```
<ol>
    <li class="node">1</li>
    <li class="node">2</li>
    <li class="node">3</li>
    <li class="node">4</li>
    <li class="node_end">5</li>
</ol> 
```

我正在使用图像来替换它们在 CSS 中的默认项目符号。单独的图像用于结束节点，而另一个图像用于所有其他要点。图像显示，但是一旦我添加这些图像，就会以某种方式将 4 像素填充添加到每个列表项的顶部和底部。这个额外的间距将高度从 26 像素高更改为 34 像素高。这个间隙在不同的子弹点图像之间提供了大约 8 像素的间隔，根据我的设计，这些图像的间隔是 0px。

我制作的 CSS：

```
li {
    margin: 0;
    padding: 0;
    border: 0;
}
li.node {
    list-style-image: url('../imgs/nodes/udr.png');
}
li.node_end {
    list-style-image: url('../imgs/nodes/ur.png');
} 
```

有什么办法可以去掉这个间距吗？我已经尝试删除与所有 li 相关的所有填充/间距/边框，但到目前为止还没有。

**编辑：**

我认为我的问题不够清楚，所以我在我的结尾张贴了它的样子。

![问题所在的示例。](../Images/24843687f5c13e37e768b89e736b6794.png)

您在上图中看到的连接条应该是连接的（就像一个连续的图像一样）。删除项目符号点的特殊 CSS 图像会将每个项目的高度降低到 CSS 项目符号点图像的高度（正如我使用 Google Chrome 的元素检查工具测试过的那样）。

**编辑2：**

可以在这里找到一个显示我的问题的紧密示例：http: [//jsfiddle.net/EyVRF/1/](http://jsfiddle.net/EyVRF/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:39:35.653

加里凯恩斯可能会有所作为。我测试了您的代码并从一个大小合适的网站借用了一个列表样式的图像，并且我没有发现任何填充问题，或者至少不是您所看到的类型。

[http://jsfiddle.net/BYQQV/](http://jsfiddle.net/BYQQV/)

```
list-style-image: url('http://www.globalindustrial.com/site/img/bullet_homecat.gif'); 
```

您可能还想考虑不必为最后一个列表项创建一个全新的类。试试吧

```
li:last-child { list-style-image:.... } 
```

尽管 IE 对此并不满意。但供以后参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:49:23.423

缺少 .css 和 html 无法回答您。关于：有什么办法可以去掉这个间距？ **是的，有**。

尝试这个 ：

```
ol, li{list-style-position:outside;margin:0;padding:0} 
```

或者

```
ol, li{list-style-position:inside;margin:0;padding:0} 
```

让我猜猜 ？你没有重置你的 .css ?? （边距：0；填充：0）

* * *

好的，我可以看到你想要什么.. 遗憾的是，你将无法通过这种方式实现你想要的，因为'子弹和第一个字符之间的填充是'浏览器特定的'并且**无法**通过 css 管理。

您将不得不使用另一种技术：背景图像。

```
<ul>
    <li class="node">1</li>
    <li class="node">2</li>
    <li class="node">3</li>
    <li class="node">4</li>
    <li class="node_end">5</li>
</ul>

ul, li {
    margin: 0;
    padding: 0;
}
li {
    font-size:16px;
    line-height:16px;
    list-style-type:none;
    background:red url('http://placehold.it/16x16') no-repeat scroll 0 0;
    padding-left:16px;
    border-bottom:1px solid blue;
}
li.node_end {
    background:blue url('http://placehold.it/16x16') no-repeat scroll 0 0;
} 
```

[http://jsfiddle.net/2RtB7/1/](http://jsfiddle.net/2RtB7/1/)

继续

PS，在寻求帮助之前尝试多搜索一下 --> [CSS: Control space between bullet and <li>](https://stackoverflow.com/questions/4373046/css-control-space-between-bullet-and-li)

# java - 数组扫描防止下一次字符串扫描？

> ID：14592606
> 
> 赞同：0
> 
> 时间：2013-01-29T21:27:09.300
> 
> 标签：java, arrays

所以我有这个代码：

*   我将 4 个数字插入到一个数组中。
*   在我插入这些之后，我想检查哪两个数字是最大的，哪两个是最小的。
*   在进行此检查之前，我想询问用户是否要添加新号码。
*   这个数字将取代其他数字之一。

问题是我的代码在此行之后停止：

```
System.out.println("Do you wish to add another number [Y/N]?"); 
```

我永远无法输入 Y 或 N（“是/否”）。但是，如果我删除它之前的扫描，这将有效。我使用的导入语句是`import.util.*;` 任何想法或有用的建议，我们不胜感激！

这是代码：

```
Scanner sc = new Scanner (System.in);

int[] array;
array = new int[4];

System.out.println("Enter nr1:");
array[0] = sc.nextInt();

System.out.println("Enter nr2:");
array[1] = sc.nextInt();

System.out.println("Enter nr3:");
array[2] = sc.nextInt();

System.out.println("Enter nr4:");
array[3] = sc.nextInt();  

System.out.println("Do you wish to add another number [Y/N]?");
String answer = sc.nextLine();

if ("N".equals(answer)){

    Arrays.sort(array);

    System.out.println(Arrays.toString(array));
    System.out.println("Samllest value: " + array[0]);
    System.out.println("Second smalles value: " + array[1]);
    System.out.println("Second biggest value: " + array[2]);
    System.out.println("Biggest value: " + array[3]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:36:36.460

The problem is that `Scanner#nextInt()` and similar methods do not handle the End-Of-Line token. One solution is to simply call `nextLine()` after calling `nextInt()` to handle and discard this token.

i.e.,

```
System.out.println("Enter nr1:");
array[0] = sc.nextInt();
sc.nextLine();

System.out.println("Enter nr2:");
array[1] = sc.nextInt();
sc.nextLine();

System.out.println("Enter nr3:");
array[2] = sc.nextInt();
sc.nextLine();

System.out.println("Enter nr4:");
array[3] = sc.nextInt();  
sc.nextLine();

System.out.println("Do you wish to add another number [Y/N]?");
String answer = sc.nextLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:35:15.803

你想使用`Scanner.next()`not `Scanner.nextLine()`。

# python - 在 Windows 上安装 PyGIMP

> ID：14592607
> 
> 赞同：6
> 
> 时间：2013-01-29T21:27:10.503
> 
> 标签：python, gimp, gimpfu

在网上，我可以找到关于使用 python 编写 gimp 脚本的各种示例。

[http://www.jamesh.id.au/software/pygimp/](http://www.jamesh.id.au/software/pygimp/) [http://www.gimp.org/docs/python/pygimp.html](http://www.gimp.org/docs/python/pygimp.html)

我们需要导入`gimpfu`模块以使示例正常工作。我们在哪里可以获得 Windows 上的 PyGIMP 安装程序？看来该项目已死，链接已损坏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-22T22:54:19.397

为了使用 Python-fu 开发 Gimp 脚本，我遵循了[gimp 用户文章](http://www.gimpusers.com/tutorials/install-python-for-gimp-2-6-windows)，简而言之，您需要下载并安装以下内容：

1.  Python 32 位 从[这里](https://www.python.org/download/releases/2.6.9/)。
2.  [从这里开始](http://ftp.gnome.org/pub/GNOME/binaries/win32/pygtk/2.24/)32 位一体机。
3.  [从这里开始](https://download.gimp.org/pub/gimp/v2.6/windows/)Gimp 2.6 32 位。

然后你需要在**C:\Users\MyUsername.gimp-2.6\plug-ins中创建 your-plugin.py 文件**

PS：在添加代码或修改您的 register() 函数后重新启动您的 gimp，以便每次生效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T12:39:14.770

PyGIMP 是 GIMP（GNU Image Manipulation Program）的一部分，只能与它一起工作。对于 Linux 发行版，它通常位于不同的包中 - 但它的代码位于 GIMP 代码源中，而在 Windows 上，它与 GIMP 一起安装。

据我所知，Windows 的 GIMP 2.8 安装程序应该附带所有依赖项（包括 Python 解释器）才能工作 - 否则您需要做的就是在安装 GIMP 之前安装依赖项才能工作。

这些应该是：

Python 2.5、2.6 或 2.7 Python-gtk Pycairo

最后是 GIMP 本身。

他们，你不能只使用 pygimp 作为一个独立的 Python 模块——它必须从 GIMP 中启动才能使用程序库和代码。创建一个响应 xmlrpc 或类似方法的脚本相对容易，保持安静运行等待来自外部脚本的请求以使用 GIMP 处理图像，很难。

# c++ - 调用重载的 to_string 不明确

> ID：14592614
> 
> 赞同：0
> 
> 时间：2013-01-29T21:27:36.717
> 
> 标签：c++, c++11

我有两个文件：error.h 和 error.cpp。编译

```
g++ -std=c++0x 
```

给我一个错误：

```
error.cpp:9:33:**call of overloaded "to_string(char*&)" is ambiguous** 
```

我该如何解决这个问题？

错误.h：

```
 1 #ifndef ERROR_H_GUARD
  2 #define ERROR_H_GUARD
  4 #include <string>
  6 class Error {
  7   public:
  8     Error(int pos, std::string& msg); 
 10     Error(int pos, char* msg); 
 12     const char* what() throw();
 14   private:
 15     std::string msg;
 17     void setMsg(int pos, std::string& msg);
 18 };
 19 
 20 #endif 
```

错误.cpp：

```
 2 #include "error.h"
  4 Error::Error(int pos, std::string& msg){
  5   setMsg(pos, msg);
  6 }
  8 Error::Error(int pos, char* msg) {
  9   setMsg(pos, std::to_string(msg));
 10 }   
 12 const char* Error::what() throw() {
 13   return msg.c_str();
 14 } 
 16 void Error::setMsg(int pos, std::string& msg){
 17   this->msg = std::to_string(pos) + msg + std::string("\n") + std::string(pos - 1, ' ') + std::string("^");
 18 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:31:44.997

[std::to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string)将整数作为参数，但您将指针传递给它。

```
Error::Error(int pos, char* msg) {
  setMsg(pos, std::to_string(msg));
} 
```

您不需要将字符串转换为字符串，请尝试：

```
Error::Error(int pos, char* msg) {
     setMsg(pos, std::string(msg));
} 
```

旁注：您的所有函数参数最好采用 const 参考：

```
Error(int pos, const std::string& msg);
void setMsg(int pos, const std::string& msg); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:29:25.423

改用`string`'s 构造函数：

```
std::string(msg) 
```

但是请注意，这个临时变量不能绑定到引用参数。你必须解决这个问题。

也许是这样的：

```
Error::Error(int pos, char* msg) {
   std::string str(msg);
   setMsg(pos, msg);
} 
```

或者使用 const-ref。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T21:39:09.933

`to_string()`用于**将**不是字符串*的*内容（例如 a `long`、 an`int`等）转换为`string`. 你有一个`char*`，它是一个 C 字符串，你想做的是用`string`它创建一个对象，而不是*转换*它。

您的编译器抱怨**歧义**，因为它找不到`to_string()`您传递给它的类型的版本 ( `char*`)，考虑到该函数的目的，这是有道理的。

如果你声明你的参数`string const&`而不是`string&`在相应的重载中`setMsg()`（以及在构造函数中`Error`），你可以通过传递 C 字符串直接调用它：一个临时类型`string`将被自动创建并绑定到`setMsg()`.

这样，您甚至**可以摆脱**for C 字符串的特定重载，`setMsg()`实际上它除了转发之外什么都不做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T21:32:00.267

删除`Error(int pos, char* msg)`并更改剩余的构造函数`setMsg()`和

```
Error(int pos, const std::string& msg);
...
void setMsg(int pos, const std::string& msg); 
```

当您`Error()`使用 a 调用时`char*`，它将自动使用`std::string`构造函数。因此，不需要单独的构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T21:35:52.697

这不起作用：

```
Error::Error(int pos, char* msg) {
   setMsg(pos, std::to_string(msg));
} 
```

因为[**`std::to_string()`**](http://en.cppreference.com/w/cpp/string/basic_string/to_string)需要一个**数值**来转换。你可能的意思是：

```
Error::Error(int pos, char const * msg) {
   setMsg(pos, msg);
} 
```

这与版本完全相同`std::string&`（反过来，应该是`std::string const &`），因此您实际上可以删除此`char*`构造函数（需要维护的代码更少：奖金）！

还有这个：

```
void Error::setMsg(int pos, std::string& msg){ 
```

应该是这样的：

```
void Error::setMsg(int pos, std::string const & msg){ 
```

# sql - 为 Oracle 制作此视图

> ID：14592615
> 
> 赞同：0
> 
> 时间：2013-01-29T21:27:49.050
> 
> 标签：sql, sql-server-2008, oracle10g

SQL Server 中的这个视图正在获取我们然后根据管理时间显示的记录，我现在需要在 Oracle 10g 中执行此操作，我必须在这里转换什么样的差异？

```
 /* Formatted on 1/29/2013 3:39:19 PM (QP5 v5.227.12220.39724) */
SELECT p.facility_key,
       CAST (p.unit_code AS VARCHAR) + '-' + CAST (p.room AS VARCHAR)
      AS unit_code,
       p.first_name,
       p.last_name,
       m.admin_time,
     CONVERT (varchar (5),
            datediff (s,
                  m.admin_time,
                  getdate ())
          / 3600)
       + ':'
       + CONVERT (varchar (5),
          datediff (s,
                m.admin_time,
                getdate ())% 3600 / 60)
              AS ELAPSED
FROM         OTEN.TEN_M_PATIENT_MAST AS P INNER JOIN
              OP.ORD_M_ADMIN AS M ON P.PAT_NUMBER = M.PAT_NUMBER
WHERE     (M.ADMIN_TIME BETWEEN DATEADD(DAY, - 1, GETDATE()) AND GETDATE()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:12:57.807

如果您经过的时间少于 24 小时，那么以下应该可以工作：

```
SELECT P.FACILITY_KEY,
       CAST(P.UNIT_CODE AS VARCHAR(255)) || '-' || CAST(P.ROOM AS VARCHAR(255)) AS UNIT_CODE,
       P.FIRST_NAME, P.LAST_NAME, M.ADMIN_TIME,
       to_char(trunc(sysdate)+(SYSDATE - m.admin_time), 'hh:mm:ss') as elapsed
FROM OTEN.TEN_M_PATIENT_MAST P INNER JOIN
     OP.ORD_M_ADMIN M
     ON P.PAT_NUMBER = M.PAT_NUMBER
WHERE M.ADMIN_TIME BETWEEN sysdate - 1 and sysdate 
```

一些笔记。首先，我在`varchar`. 您应该在任何数据库中执行此操作。其次，我简化了日期时间算法，只使用减法。我`getdate()`改为`sysdate`. 以及带有“||”的“+”。最后，为了获得 hh:mm:ss 格式的经过时间，我使用了一个技巧。我取差值，添加到当前日期，然后将小数部分转换为 hh:mm:ss。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:21:23.877

尝试这个：

```
 /* Formatted on 1/29/2013 4:00:43 PM (QP5 v5.227.12220.39724) */
SELECT p.facility_key,
       CAST (p.unit_code AS VARCHAR) || '-' || CAST (p.room AS VARCHAR)
      AS unit_code,
       p.first_name,
       p.last_name,
       m.admin_time,
     TO_CHAR (  (SYSDATE- m.admin_time)
          / 3600)
       || ':'
       || TO_CHAR ((SYSDATE- m.admin_time) MOD 3600 / 60)
              AS elapsed
FROM         oten.ten_m_patient_mast  p INNER JOIN
              op.ord_m_admin m ON p.pat_number = m.pat_number
WHERE     (m.admin_time BETWEEN (SYSDATE -1) AND SYSDATE) 
```

# css - 改变三角形的形状

> ID：14592617
> 
> 赞同：4
> 
> 时间：2013-01-29T21:28:00.330
> 
> 标签：css, shapes, css-shapes

我正在尝试使活动列表项看起来像这样：

![在此处输入图像描述](../Images/30cb5d94862c36ee87292b5a3d30ab48.png)

这是我目前拥有的（蓝色三角形是直角三角形而不是钝角等腰线）：

![在此处输入图像描述](../Images/5c233df36ad2bd7dfebca85d9810105e.png)

这是我的 HTML：

```
<ul class="guideList">
    <li><a>Consulting</a></li>
    <li class="active">Law<span class="activePointer"></span></li>
    <li><a>Finance</a></li>
    <li><a>Technology</a></li>
</ul> 
```

这是我的CSS：

```
.guideList{
    font-size: 12px;
    line-height: 12px;
    font-weight: bold;
    list-style-type: none;
    margin-top: 10px;
    width: 125px;
}

.guideList li{
    padding: 5px 0px 5px 10px;
}

.guideList .active{
    background-color: #0390d1;
    color: white;
}

.guideList .activePointer{
    margin-top: -5px;
    margin-bottom: -5px;
    float: right;
    display: inline-block;
    width: 0px;
    height: 0px;
    border-top: 11px solid white;
    border-left: 11px solid transparent;
    border-bottom: 11px solid white;
} 
```

[jsFiddle](http://jsfiddle.net/waJaY/)

我该如何解决？

**ETA**我尝试了@jlbruno 的想法（减小左边框的大小），但是当我这样做时，三角形的线条并不清晰：

![在此处输入图像描述](../Images/957402122dbfb81b527de1c690ca105d.png)

**ETA**使用 transform:rotate 固定边缘（谢谢@jlbruno！）...但不适用于 IE8。我尝试使用微软矩阵变换过滤器（[相关的 SO 问题](https://stackoverflow.com/questions/4617220/css-rotate-property-in-ie)），但没有帮助。我如何让它在 IE8 中也能正常工作？这是我为 IE8 尝试的 CSS：

```
 -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.9999996192282494, M12=-0.0008726645152362283, M21=0.0008726645152362283, M22=0.9999996192282494, SizingMethod='auto expand')"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T21:31:20.453

将左边界更改为`.guideList .activePointer`类似`7px`而不是 11 的值...您降低该值的次数越多，角度就会越宽。

```
.guideList .activePointer{
    margin-top: -5px;
    margin-bottom: -5px;
    float: right;
    display: inline-block;
    width: 0px;
    height: 0px;
    border-top: 11px solid white;
    border-left: 7px solid transparent;
    border-bottom: 11px solid white;
    -webkit-transform: rotate(0.05deg); // added to smooth edges in Chrome
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T15:42:13.683

您可以为此使用此 html 和 Css：

**CSS：**

```
 .Rectangular{
    width: 100px; 
    height: 30px; 
    text-align: left; 
    position: relative; 
    background-color: #0390D1; 
    color: #fff; 
    padding-left: 10px; 
    font: 12px/30px tahoma; 
    margin-right: 100px;}
.Rectangular>span{ 
    display: inline-block;
    border-color: rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) #0390D1;
    border-left: 30px solid #0390D1;
    border-right: 30px solid rgba(0, 0, 0, 0);
    border-style: solid;
    border-width: 15px;
    position: absolute;
    right: -29px;
    top: 0;
} 
```

**HTML：**

```
<div class="Rectangular">Law <span></span></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:53:27.963

由于 CSS 没有给你想要的结果，你可能需要为此做一个右对齐的背景图像。

**HTML**

```
<ul class="guideList">
    <li><a>Consulting</a></li>
    <li class="active">Law</li>
    <li><a>Finance</a></li>
    <li><a>Technology</a></li>
</ul> 
```

**CSS**

```
.guideList .active{
    background: url('images/right-arrow.png') #0390d1 center right no-repeat;
    color: white;
} 
```

# ektron - 使用 Ektron ContentTypes 创建新的 smartform 数据

> ID：14592620
> 
> 赞同：1
> 
> 时间：2013-01-29T21:28:11.783
> 
> 标签：ektron

爱克创 8.0.1 SP1

我正在使用 SmartForms 和内容类型来读取（并希望写入）数据。我可以读取数据，但现在我正在尝试写入类似于以下内容的新记录。

```
ContentTypeManager<member> contentTypeManager = new ContentTypeManager<member>();
ContentType<member> newmem = new ContentType<member>();

newmem.SmartForm.details.field1 = "Chuck"; // This line throws 'Object reference not set to an instance of an object.' error
newmem.SmartForm.details.field2 = "Norris";
contentTypeManager.Update(newmem); 
```

我收到错误“对象引用未设置为对象的实例”。对于第一个分配行。我错过了什么？

由于 Ektron 网站已经过重新设计，我很难找到关于 8.0.1 的 ContentTypes 的良好文档。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:52:17.623

感谢您的澄清，要将内容添加到分配有 smartform 的文件夹中，基本代码块应该让您开始：（注意：内容的 Html 属性只是与您创建的模式匹配的 xml）

```
Ektron.Cms.Framework.Content.ContentManager cmanager = new Cms.Framework.Content.ContentManager();
Ektron.Cms.ContentData cdata = new ContentData();
cdata.FolderId = 0;
cdata.XmlConfiguration.Id = 0; //SMARTFORM ID HERE
cdata.Html = "<root><field1>field1 value</field1><field2>field2 value</field2></root>";
cmanager.Add(cdata); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:49:32.850

您可以更新 ContentTypes.cs 以包含 Add 方法。只需复制 Update 方法并更改`contentManager.Update`为`contentManager.Add`.

```
 public void Add(ContentType<T> contentType)
    {
        Initialize();
        contentType.Content.Html = Ektron.Cms.EkXml.Serialize(typeof(T), contentType.SmartForm);
        contentManager.Add(contentType.Content);
    } 
```

不幸的是，`contentManager.Add`回报`void`。理想情况下，它应该返回新的内容 ID。

# php - 从 sql 链接表，查询产生错误。

> ID：14592623
> 
> 赞同：3
> 
> 时间：2013-01-29T21:28:21.743
> 
> 标签：php, mysql, sql, linked-list

我在 sql 中有两个表，当我在 php 中将它们回显时，我得到了一个奇怪的结果......所需的效果是从表介绍和表消息中的 msg 中回显介绍 - 然后按日期组织它们。

```
$result = mysql_query("SELECT intro.user_id, intro.date, intro.message_id, intro.intro FROM intro WHERE user_id = {$uid}
                    UNION SELECT messages.user_id, messages.msg, messages.message_id, messages.date FROM messages
                    ORDER BY date DESC ");

while($row = mysql_fetch_array($result))
  {
  echo  "<p>".getElapsedTime($row['date'])."</p>
  <strong>></strong> <a href=\"outro.php?msg_id=".$row['intro.message_id'].
  "\">".$row['intro'] . "</a><br>";
  } 
```

```
Intro table 
```

![在此处输入图像描述](../Images/1bce0ce529572d76320a244d9ae84bf3.png)

```
Messages table 
```

![在此处输入图像描述](../Images/a7e80ef1c24f2a87e3032a234c5f3d59.png)

![在此处输入图像描述](../Images/2e3c3e6d9a1070c2ed51ed7e93c3ebc4.png)

但是，如上所示，我得到了这个奇怪的结果。只是日期回显的顶部来自表格`messages`。我不知道为什么会发生这种情况，也不知道如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:43:55.113

你的 UNION 搞砸了。尝试：

```
SELECT intro.user_id, intro.date, intro.message_id, intro.intro
FROM intro WHERE user_id = {$uid}
UNION
SELECT messages.user_id, messages.date, messages.message_id, messages.msg
FROM messages
ORDER BY date DESC 
```

# c# - 如何在 asp.net gridview 中显示某些值的图像？

> ID：14592627
> 
> 赞同：0
> 
> 时间：2013-01-29T21:28:34.613
> 
> 标签：c#, asp.net, gridview

在我的项目中，我在我的 mssql 数据库中保存了一些“位”类型 (true,false) 的数据，然后在 gridview (asp.net - c#) 中显示它们。他们显示为复选框。问题：我可以在gridview 中显示**来自主机（而不是来自数据库）的列的图片吗？** 示例：当值为 True 时 pic1.png 显示在列中？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:34:57.160

使用`Visible`您使用的图像控件的属性。

```
<asp:Image ID="myImage" runat="server" 
     ImageUrl="~/Images/myImage.gif" 
     Visible='<%# DataBinder.Eval(Container.DataItem, "bitColumn") == null ? false: DataBinder.Eval(Container.DataItem, "bitColumn") %>' /> 
```

# javascript - 在模板中或始终在模型中修改 Django forms.Textarea

> ID：14592628
> 
> 赞同：0
> 
> 时间：2013-01-29T21:28:40.870
> 
> 标签：javascript, django, django-models, django-forms, django-templates

我在带有文本区域的模型中有一个 forms.Form：

```
answer1 = forms.CharField(label='Answer 1', widget=forms.Textarea(attrs={"placeholder":"Type your answer...", "rows":6, "cols":45}), max_length=150) 
```

在视图中：

```
...
form = SurveyForm(request.POST)
...
...render(...{'form':form}) 
```

还有我的模板：

```
<p><label>Answer 1:</label> {{ form.answer1 }}</p> 
```

但现在我想使用 javascript 来获得一个剩余字符数的计数器。所以我的 textarea 需要一些额外的信息，例如：

```
onKeyDown="MyCountFunction('textbox','char',150)" 
```

我是否必须将有关文本区域的所有信息添加到我的表单中。表单就像我对占位符所做的那样，或者有没有办法在我的模板中的某个地方添加它。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T10:44:48.143

试试这个：初始

```
if request.user ==  discussion.owner:
  description_form = UpdateDiscussionForm(initial={'description': discussion.description})
  add_decision_form = AddDecisionForm() 
```

[关联](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:49:49.443

我会为此使用 jQuery 之类的东西，请[查看](http://api.jquery.com/keydown/).`keydown()`

# ios - MKMapView 将样式设置为黑白

> ID：14592632
> 
> 赞同：4
> 
> 时间：2013-01-29T21:29:04.253
> 
> 标签：ios, objective-c, mkmapview

我正在尝试将 MKMapView 的配色方案更改为黑白。在这个主题中讨论了它：[MKMapView 的黑白叠加，](https://stackoverflow.com/questions/8989208/black-and-white-overlay-for-an-mkmapview)但我不知道如何实现这一点。

有人可以帮帮我吗？

最好的问候，卢卡斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-05T13:46:46.120

解决方案非常简单。通过使用 GoogleMaps SDK，您可以设置地图样式。

可以通过以下两个站点创建样式： [https://snazzymaps.com](https://snazzymaps.com) [https://mapstyle.withgoogle.com](https://mapstyle.withgoogle.com)

顺便说一句：我注意到 GoogleMaps SDK 更快，对开发人员更友好，并且提供更多功能，所以无论如何我都会推荐它。

# c# - HtmlAgilityPack.HtmlDocument() 导致错误

> ID：14592635
> 
> 赞同：3
> 
> 时间：2013-01-29T21:29:19.767
> 
> 标签：c#, dll, reference, html-agility-pack

在我的应用程序中，我想使用`HTMLAgilityPack`已使用 NuGet 安装的应用程序。但是当我尝试创建`HtmlAgilityPack.HtmlDocument`实例时，我有

> HtmlDocument.cs 出现“找不到源”错误。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument(); 
```

解决方案资源管理器->参考确实包含`HtmlAgilityPack`. 怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-11T16:09:48.787

当您的代码引发异常并且调试器尝试向您显示代码时，或者当您进入调用时，就会发生这种情况。

当您第一次取消“查找源”对话框时，Visual Studio 会将源文件路径添加到异常列表中，并且不会再次询问您（此列表位于：解决方案资源管理器->右键单击解决方案->属性- >Common Properties->Debug Source Files->不要寻找这些源文件）。

为了防止在调试时出现“未找到 HtmlDocument.cs”页面，您需要跳过 (F10) HtmlAgilityPack 的调用，而不是单步执行 (F11)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T14:29:20.480

我可以通过调试 Windows 应用商店应用程序的代码来重现您的错误：

```
picker.FileTypeFilter.Add(".htm");
StorageFile file = await picker.PickSingleFileAsync();
var accessStream = await file.OpenAsync(FileAccessMode.Read);

var doc = new HtmlDocument();
doc.Load(accessStream.AsStreamForRead()); 
```

如果我在 HtmlDocument 的变量定义上设置断点，则会引发错误，因为将在不同的分区中查找 HtmlDocument.cs。如果我在最后一行之后设置断点，则不会发生错误。

可能与异步编程有关...

# jaxb - xjc 生成的代码引用来自 sun 内部包的 OverrideAnnotationOf 注解

> ID：14592637
> 
> 赞同：4
> 
> 时间：2013-01-29T21:29:26.733
> 
> 标签：jaxb, xjc

我正在尝试从一组 XML 模式生成 Java 类。以下绑定文件用于处理模式中的混合内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings
 xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" jaxb:version="2.1"
 xmlns:xjc= "http://java.sun.com/xml/ns/jaxb/xjc" jaxb:extensionBindingPrefixes="xjc">
  <jaxb:globalBindings generateMixedExtensions="true"/>
</jaxb:bindings> 
```

代码生成工作正常，但其中一个生成的类具有来自 com.sun.xml.internal.bind.annotation 包的 @OverrideAnnotationOf。这个包包含在 rt.jar 中，但是常规的 java 编译器找不到它（并且可能不应该找到它，因为它是 sun 内部的）。

有没有办法处理混合内容并且在我生成的代码中没有来自 sun 内部包的 OverrideAnnotationOf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-22T12:35:20.320

在 Java 6 及更高版本中，oracle 将 JRE 中嵌入的 JAXB 实现移动到不同的包中，以防止与外部[JAXB 参考实现](https://jaxb.java.net)的潜在冲突。

所以这个类`OverrideAnnotationOf`从一个包转移`com.sun.xml.bind.annotation`到另一个包`com.sun.xml.internal.bind.annotation`。

然而，嵌入式 xjc 仍会生成带有`com.sun.xml.bind.annotation.OverrideAnnotationOf`(!)注释的 java 文件

因此，Java 7 附带的 JAXB 实现将无法理解它自己使用`generateMixedExtensions="true"`. 即使您使用该`-XDignore.symbol.file`选项。

# python - json字符串摆弄

> ID：14592641
> 
> 赞同：0
> 
> 时间：2013-01-29T21:29:37.617
> 
> 标签：python, json, serialization

我有一个 JSON 序列化值的 python 字典。

我想添加到这些序列化字符串而不先做`loads(...)`，然后再做`dumps(...)`- 所以我“摆弄”序列化值：

目前我有：

```
for key, value in my_dict.items():
    # creating JSON of additional data I want in the JSON string
    extra = dumps({ 'key1': 3, 'key2': 1 }, default=str)

    # cutting the last '}' from the end off 'value', the '{' and '}' from the
    # start and end of 'extra', and then concatting them together.
    my_dict[key] = '%s,%s' % (value[:-1], extra[1:]) 
```

我这样做是因为我认为`dumps`and`loads`是一种浪费，但我目前的方法不是很 Pythonic。

有没有更好的方法？

**注意**：“额外”值与初始 JSON 值来自不同的来源，并且不能插入到原始数据被序列化的位置。

使用约 20 个 JSON blob 的字典时的时间差异：

*   摆弄：0.0005 秒
*   json>py>json: 0.0025 秒

快 5 倍

和 20,000 一起玩：

*   摆弄'：0.333
*   json>py>json：0.813

快 60% 以上

200,000：

*   摆弄'：4.5
*   json>py>json：10.25

快 60% 以上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T21:53:53.177

Pythonic 的方法是解析 JSON 字符串，修改值然后序列化它。JSON解析速度*非常*快，比标准的 pickle/unpickle 函数快得多，并且可能不会减慢您的速度，除非您拥有大量数据（数万行）。不要陷入过早优化的陷阱。

在任何情况下，您都应该始终以一种漂亮的、Pythonic 和可读的方式编写您的应用程序，然后（如果需要！）稍后优化代码的慢速部分。

* * *

另一种优化方法是用 C 编写相关代码，或者使用 C 库进行 JSON 序列化。看看[ultrajson](https://github.com/esnme/ultrajson)或看看[这个答案](https://stackoverflow.com/a/706353/388916)，它解释了标准库如何比您使用`simplejson`的模块快得多。`json`

# ruby-on-rails - 基于选择框的动态部分 - Rails 2.3.5

> ID：14592642
> 
> 赞同：3
> 
> 时间：2013-01-29T21:29:38.950
> 
> 标签：ruby-on-rails

我已经编辑了我的请求，希望更清楚。我需要根据先前的选择框动态渲染部分。

REQUEST 属于 PRODUCT

产品属于类别

CATEGORY 有很多产品

产品有很多请求

用户点击表单：create_request.html.erb

用户选择一个类别，然后填充产品选择列表（如 Railscast 88 - 动态选择框）

我现在需要的是根据选择的产品呈现不同的部分形式。我很讨厌jquery。

create_request.html.erb：

```
<%= javascript_include_tag "dynamic_products.js" %>

<% form_for :request, :url => {:controller => :requests, :action => :create_request, :id => params[:id]} do |f| %>

  <label>Select Category:</label>
  <%= select( "request", "category_id", Category.find( :all).collect { |c| [c.name, c.id] })%></br>

  <div id="product_field">
   <label>Select Product</label>
   <%= select( "request", "product_id", Product.find( :all).collect { |p| [p.name, p.id] })%></br>
  </div>

  ####  and here is where I need help:
  ####  if request.product_id = 1, render partial _form1
  ####  if request.product_id = 2, render partial _form2

  <button  type="submit">Submit</button>

<% end %> 
```

动态产品.js.erb：

```
var products = new Array();

<% for product in @products -%>
  products.push(new Array(<%= product.category_id %>, '<%=h product.name %>', <%= product.id %>, <%= product.active %>));
  products.sort()
<% end -%>

function categorySelected() {
  category_id = $('request_category_id').getValue();
  options = $('request_product_id').options;
  options.length = 1;
  products.each(function(product) {
    if (product[0] == category_id && product[3] == 1) {
      options[options.length] = new Option(product[1], product[2]);
    }
  });
  if (options.length == 1) {
    $('product_field').hide();
  } else {
    $('product_field').show();
  }
}

document.observe('dom:loaded', function() {
  categorySelected();
  $('request_category_id').observe('change', categorySelected);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:33:03.223

在我们开始之前先提醒一下。我不确定这一点，但我认为这`request`是 rails 中的保留字。

**JS**

这只是观察下拉菜单并执行 ajax 调用

```
$(document).ready(function() {
  $('#request_product_id').change(function() {
    $.ajax({ url: '/products/' + this.value + '/form_partial' });
  });
}); 
```

**路线**

这里也没什么好看的。只需设置触发ajax时将去的路由

```
resources :products do
  get :form_partial, on: :member
end 
```

**控制器**

我们只是使用`:id`从 ajax 传递的产品来获取

```
def form_partial
  @product = Product.find params[:id]
end 
```

**JS 模板**

您需要创建一个`form_partial.js.erb`将根据产品呈现部分的内容。`product_field`下面的代码在div之后附加了部分

```
 # app/views/products/form_partial.js.erb
 $('#product_partial').remove();
 <% if @product.id == 1 %>
   $('#product_field').after('<div id="product_partial"><%= escape_javascript render('partial1') %></div>');
 <% else %>
   $('#product_field').after('<div id="product_partial"><%= escape_javascript render('partial2') %></div>');
 <% end %> 
```

**更新：对于 rails 2.x**

我们只需要更改路由和 js 模板就可以在 rails 2.x 上运行

**路线 2.x**

```
map.resources :products, member: { form_partial: :get } 
```

**JS 模板 2.x**

如果我没记错的话，该文件应该命名为`form_partial.js.rjs`. 这将为您提供一个`page`可用于添加 js 的变量。

```
 # app/views/products/form_partial.js.rjs
 page << "$('#product_partial').remove();"
 page << "<% if @product.id == 1 %>"
 page << "  $('#product_field').after('<div id="product_partial"><%= escape_javascript render('partial1') %></div>');"
 page << "<% else %>"
 page << "  $('#product_field').after('<div id="product_partial"><%= escape_javascript render('partial2') %></div>');"
 page << "<% end %>" 
```

# c# - 将 SQLDataAdapter 与 SQL 函数一起使用时，未将对象引用设置为对象异常的实例

> ID：14592648
> 
> 赞同：0
> 
> 时间：2013-01-29T21:29:56.397
> 
> 标签：c#, asp.net, sql, exception, sqldataadapter

我正在尝试将 SQL 函数与 SQLDataAdabter 一起使用，但是当我运行我的应用程序时，我得到了这个异常：

> 你调用的对象是空的

在那一行：

```
adbtr.SelectCommand.CommandType = CommandType.Text; 
```

当我删除该行时，我得到了相同的异常，但在后面的行中：

```
adbtr.SelectCommand.CommandText = "SELECT * FROM Select_gallery_names_FN()"; 
```

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{

    DataSet dst = new DataSet();
    using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["DBCS"].ConnectionString))
    {
        SqlDataAdapter adbtr = new SqlDataAdapter();
        adbtr.SelectCommand.CommandType = CommandType.Text;
        adbtr.SelectCommand.CommandText = "SELECT * FROM Select_gallery_names_FN()";
        try
        {
            int result = adbtr.Fill(dst);
            if (result == 0)
            {
                return;
            }
            cat_repeater.DataSource = dst;
            cat_repeater.DataBind();
        }
        catch(Exception ex)
        {
            Response.Write(ex.Message);
        }

    } 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T21:32:49.537

您需要初始化`SelectCommand`.. 它是`null`在您设置属性时：

```
SqlDataAdapter adbtr = new SqlDataAdapter();
adbtr.SelectCommand = new SqlCommand("SELECT * FROM Select_gallery_names_FN()");
adbtr.SelectCommand.CommandType = CommandType.Text; 
```

# python - Python因式分解函数的结果不稳定

> ID：14592649
> 
> 赞同：3
> 
> 时间：2013-01-29T21:30:00.217
> 
> 标签：python, factorization

```
def test_prime(n):
    q = True
    for p in range(2,n):  #Only need to check up to rootn for primes and n/2 for factors
        if int(n%p) is 0:         
            q = False
            print(p, 'and', int(n/p), 'are factors of ', n)    
    if q:
        print(n, 'IS a prime number!')
    else:
        print(n, 'IS NOT a prime number') 
```

我刚刚开始玩 Python，我正在整理一些零碎的东西来打发时间。我一直在尝试测试素数，并有显示非素数因子的想法。我在上面组合的函数似乎运行良好，除了输出不一致。

例如，如果我设置 n = 65432 我得到...

```
2 and 32716 are factors of  65432
4 and 16358 are factors of  65432
8 and 8179 are factors of  65432
8179 and 8 are factors of  65432
16358 and 4 are factors of  65432
32716 and 2 are factors of  65432
65432 IS NOT a prime number 
```

这是我所期望的。但是如果我设置 n = 659306 我得到......

```
2 and 329653 are factors of  659306
71 and 9286 are factors of  659306
142 and 4643 are factors of  659306
4643 and 142 are factors of  659306
9286 and 71 are factors of  659306
659306 IS NOT a prime number 
```

这是不同的，因为它最后不包括因子 329653。这不是问题，因为所有因素都显示在某处，但令我烦恼的是，我不知道为什么某些数字会发生这种情况！

只是为了告诉你我不是一个完全的白痴，我已经发现这似乎只发生在长度超过 5 个字符的整数值上。有人可以告诉我为什么这两种情况下的输出不同吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T21:40:41.057

你想要`n % p == 0`，没有`n % p is 0`。 `is`测试同一性，而不是相等性，并且并非每个 0**都**与其他每个 0 相同。

```
>>> 659306 % 329653
0
>>> (659306 % 329653) == 0
True
>>> (659306 % 329653) is 0
False
>>> id(0)
136748976
>>> id(659306 % 329653) 
3070888160 
```

`id`那里基本上对应于内存中的一个位置。

这样想：如果你有一个加元，而我有一个加元，那么它们的价值是相等的（1 == 1），但它们不是同一个对象（我的一美元硬币不是和你的一美元硬币一样。）我们*可以*分享同一个硬币，但我们没有必要这样做。

[PS：您可以使用`n//p`整数除法而不是`int(n/p)`。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T03:44:07.247

幕后发生的事情有点复杂。我的评论特别适用于`CPython`. PyPy、Jython、IronPython 等其他实现的行为会有所不同。

为了减少内存使用并提高性能，CPython 缓存了一系列小整数并尝试返回对这些对象的引用，而不是创建另一个具有相同值的整数对象。当您将数字与 进行比较时`is`，您实际上是在检查 CPython 是否返回了对同一缓存对象的引用。但有时 CPython 不会检查一个值是否是缓存整数之一。这怎么可能发生？

我将解释 CPython 3，因为它比 CPython 2 简单一点。CPython`int`中可见的类型实际上是`PyLong`在解释器内部调用的。`PyLong`将整数存储为数组，`digits`其中每个数字介于 0 和`2**15-1`（32 位系统）或 0 和`2**30-1`（64 位系统）之间。随着数字变大，数组的大小也会增加；这允许有效地无限整数。在计算 时`%`，CPython 检查第二个参数是否为一`digit`长。如果是这样，它会调用一个 C 函数 (divrem1)，该函数返回 a`digit`作为结果。接下来，`PyLong_FromLong`调用将适合 C long 的值（即 的返回值`divrem`）转换为 PyLong。`PyLong_FromLong`检查参数是否在缓存整数范围内，如果可能，将返回对缓存整数的引用。

如果第二个参数的长度超过一个`digit`，则调用不同的 C 函数 (x_divrem)。`x_divrem`使用通用的任意精度除法算法来计算余数。由于在计算过程中`x_divrem`创建 a`PyLong`来存储余数，因此避免创建另一个重复整数没有任何好处；它已经存在。对于随机大数的计算，余数很少等于缓存的整数之一，因此不值得花时间进行检查。

还有其他方法可以创建缓存整数的重复副本。我只是从问题中分析了一个。

这就是为什么你不使用`is`检查数字相等性......

# javascript - 使用 jquery 和数据属性将内容加载到 div

> ID：14592653
> 
> 赞同：1
> 
> 时间：2013-01-29T21:30:10.353
> 
> 标签：javascript, jquery

编辑：我在 www.dnadigitaltv.co.uk/testing/video 上安装了这个，但我无法让它工作。我尝试了不同版本的 jquery，编辑了代码，尝试了替代版本，但无法使其工作。为什么它可以在 jsfiddle 中工作，但不能在我的网站上工作？

我有一个使用 modX vidlister 的视频页面。我的实现运行良好，但我真正想做的是当点击链接时，它会将图像和描述加载到相关的 div 中。

我一直在尝试使用数据属性，因为我的网站是 html5，但我无法让它工作。目前我有这个 HTML。

```
<div id="vidImage"></div>
<div id="vidDescription"></div>
<div class="listing" data-image="SampleImage" data-description="Sample Description">
  <div class="vidTitle">
    <a href="http://www.youtube.com/watch?v=GDvI8UaxT9M" title="Sample   Video Title">Sample Video</a>
  </div>
  <div class="vidDescription">
    <p>Lorem Ipsum dollar site amet. Lorem Ipsum dollar site amet. Lorem Ipsum
      dollar site amet.</p>
  </div>
  <div class="vidDuration">
    <p>00:21:15</p>
  </div>
  <div class="clearBoth"></div>
</div> 
```

然后我有以下jQuery

```
$('div.vidTitle a').each(function(){
$(this).click(function(){
    var datasrc = $(this).parents('div.listing');
    $('#vidDescription').empty().prepend('<p>' + $(datasrc).data('description') + '</p>');
    $('#vidImage').empty().prepend('<p>' + $(datasrc).data('image') + '</p>');
    return false;
});
}); 
```

所以想法是，当您单击视频标题时，它会获取数据图像和数据描述的内容并将其显示在 2 个 div（vidImage 和 vidDescription）中。

现在彻底迷路了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:39:31.160

您需要包围您的 jQuery，以便它在 DOM 加载后执行

```
jQuery(function() {
    $('div.vidTitle a').each(function(){
        $(this).click(function(){
            var datasrc = $(this).parents('div.listing');
            $('#vidDescription').empty().prepend('<p>' + $(datasrc).data('description') + '</p>');
            $('#vidImage').empty().prepend('<p>' + $(datasrc).data('image') + '</p>');
            return false;
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T21:34:36.063

你会想做一个 event.preventDefault(); 在您的点击函数处理程序的顶部，阻止它转到链接 URL，并更改

```
var datasrc = $(this).parents('div.listing'); 
```

到

```
var datasrc = $(this).closest('div.listing'); 
```

那应该解决它。

# java - A* 相邻节点空指针异常

> ID：14592656
> 
> 赞同：-3
> 
> 时间：2013-01-29T21:30:14.433
> 
> 标签：java, arraylist, nullpointerexception, a-star

尝试做一些 A* 的东西，我经常`NullPointerException`在第 129 行得到一个...

```
public class GameMap {

int tileW = 64;
int tileH = 36;
int tiles = 2304;
ArrayList<Node> nodes = new ArrayList<Node>();

public GameMap(int width, int height) {

    int widthtest = 640;
    int heighttest = 360;

    for (int y = 0; y<tileH; y++){

        for (int x = 0; x<tileW; x++){

            nodes.add(new Node(x,y,false,null,10000));
            //System.out.println("node added at x:" + x + " and y:" + y + " w/tilenum: " + nodes.size());
        }

    }

}

public void blockNode(int x, int y){
    int tilenum = tileNum(x,y);
    nodes.get(tilenum).blocked = true;
    System.out.println("blocked node " + tilenum);
}

public int tileNum(int x, int y){
    int tilenum = x+(y*64);
    return tilenum;
}

public ArrayList<Node> findPath(int sx, int sy, int tx, int ty){
    ArrayList<Node> open = new ArrayList<Node>();
    ArrayList<Node> closed = new ArrayList<Node>();
    ArrayList<Node> path = new ArrayList<Node>();
    ArrayList<Node> adjList = new ArrayList<Node>();
    Node startNode = new Node(sx, sy, false, null, getF(sx,sy,tx,ty));
    Node endNode = new Node(tx, ty, false, null, 0);
    Node currentNode = null;
    open.add(startNode);
    while(currentNode != endNode && open.size()>0 && endNode.parent == null){
        currentNode = findBestNode(open);
        adjList = getAdj(currentNode);
        if(currentNode.equals(endNode)){
            continue;
        }
        else{
            open.remove(currentNode);
            closed.add(currentNode);
            for(int i = 0 ; i<adjList.size() ; i++){

                if(adjList.get(i).blocked || closed.contains(adjList.get(i))){
                    continue;
                }

                if(!open.contains(adjList.get(i))){
                    open.add(adjList.get(i));
                    adjList.get(i).parent = currentNode;
                }

                else{

                    int newDistance = getF(currentNode.x, currentNode.y, tx, ty);
                    if(newDistance < currentNode.fscore){
                        adjList.get(i).parent = currentNode;
                        adjList.get(i).fscore = newDistance;
                    }

                }

            }

        }

    }

    if(endNode.parent != null){
        path = generatePath(startNode, endNode);
    }

    return path;
}

private ArrayList<Node> generatePath(Node startNode, Node endNode) {
    ArrayList<Node> path = new ArrayList<Node>();
    Node currentNode = endNode;
    while(currentNode != startNode){
        path.add(currentNode);
        currentNode = currentNode.parent;
    }

    return path;
}

private Node findBestNode(ArrayList<Node> open) {
    int lowF = 10000;
    Node currentNode = null;
    for (int i = 0 ; i<open.size() ; i++){
        if(open.get(i).fscore < lowF){
            lowF = open.get(i).fscore;
            currentNode = open.get(i);
        }
    }
    return currentNode;
}

private int getF(int sx, int sy, int tx, int ty){
    int dx = Math.abs(tx - sx);
    int dy = Math.abs(ty - sy);
    int f = dx+dy;
    return f;
}

private ArrayList<Node> getAdj(Node node){
    ArrayList<Node> adj;
    adj = new ArrayList<Node>();
    for (int y = -1; y<2; y++){
        for (int x = -1; x<2; x++){

            if(node.x+x>-1 && node.y+y>-1){
                Node theNode = nodes.get(tileNum(node.x+x, node.y+y));
                //adj.add(theNode);
                System.out.println(theNode);
                adj.add(theNode);
            }

        }

    }
    return adj; 
}
} 
```

这是我的节点类

```
public class Node{

int x;
int y;
boolean blocked;
Node parent;
int fscore;

public Node(int x, int y, boolean blocked, Node parent, int fscore) {
    this.x = x;
    this.y = y;
    this.blocked = blocked;
    this.parent = parent;
    this.fscore = fscore;
}
} 
```

和游戏类：

```
public class Game {

public Game() {
    GameMap gm = new GameMap(640,360);
    gm.blockNode(63, 32);

    System.out.println(gm.findPath(0, 0, 4, 2));
}

public static void main(String[] args){

    Game game = new Game();

}
} 
```

提前感谢您的帮助！

129号线在

> ArrayList getAdj(节点节点){

确切的行是：

> 如果（节点.x+x>-1 && 节点.y+y>-1）{

希望我没有咬得比我能咀嚼的更多。我正在尝试创建节点周围所有相邻节点的数组列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:25:58.260

错误可能是您调用：

```
currentNode = findBestNode(open); 
```

如果`open`为空，则返回 null。我不确定，如果这可能，但如果是这样，你打电话给`getAdj(null)`.
这会导致 NullPointerException..

# php - 需要白名单功能帮助 - in_array 出于某种原因不区分大小写

> ID：14592660
> 
> 赞同：0
> 
> 时间：2013-01-29T21:30:34.147
> 
> 标签：php, arrays

> **可能重复：**
> [PHP 不区分大小写的 in_array 函数](https://stackoverflow.com/questions/2166512/php-case-insensitive-in-array-function)

我正在制作一个函数来通过一个`$input`变量和一个`$whitelist`变量来验证输入。两者都是字符串，函数解析`$whitelist`变量并将其转换为字符数组以在字符串上使用。

由于某种原因，该`in_array`函数无法区分小写字母和大写字母（至少我认为这是正在发生的事情）。

代码链接：http: [//pastebin.com/eadAV7gg](http://pastebin.com/eadAV7gg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:37:12.560

Why not match against the lowercase value of the letter. If you match it in the if statement, then you don't have to worry about changing the actual `$input` string:

```
foreach ($inputArray as $key => $value)
{
    foreach ($whitelistArray as $key2 => $value2)
    {
        if (in_array(strtolower($value), $whitelistArray))
        {
            //Do nothing, check passed
        }
        else
        {
            unset($inputArray[$key]);
        }
    }
} 
```

A much shorter version of what you have could be accomplished with:

```
$input = "ATTT";
$whitelist = "abcdefghijklmnopqrstuvwxyz";
$output = '';

for($x=0; $x<strlen($input);$x++){
    if(stristr($whitelist,substr(strtolower($input),$x,1))){
        $output .= substr($input,$x,1);
    }
}
echo $output; 
```

Or to implement as a function:

```
function whitelist_string($input=''){

    $whitelist = "abcdefghijklmnopqrstuvwxyz";
    $output = '';

    for($x=0; $x<strlen($input);$x++){
        if(stristr($whitelist,substr(strtolower($input),$x,1))){
            $output .= substr($input,$x,1);
        }
    }
    return $output;
}

echo whitelist_string('ATTT').'<br>';
echo whitelist_string('Hello88 World!').'<br>'; 
```

# database - 实现 LDAP 类型的数据库

> ID：14592662
> 
> 赞同：1
> 
> 时间：2013-01-29T21:30:35.980
> 
> 标签：database, tree, ldap

我很想知道使用什么样的物理结构来存储像 Active Directory 这样的 LDAP 数据库。

数据库表示为树结构，其中每个节点都有一组属性和可选的子节点。一个节点有一个类类型，它定义了应用哪组属性。我想在这方面它类似于 XML 文档。

属性数量为数百，如果不是数千。这些属性也不一定是固定大小的，例如 MultiSz 类型；至关重要的是，属性和类是可扩展的。

`memberOf`我还注意到数据库是关系型的，例如，在属性和组之间保持双向引用完整性。

显然，您不能将其存储在 RDBMS 中 - 行长度限制（并且需要运行 ALTER TABLE）意味着属性系统不适合，但是您如何在磁盘上构建这样的数据库呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:41:01.290

LDAP 是一种协议，没有关于如何存储数据的规范。

一个数据库，应该有分层的方法。LDAP 还需要能够做索引，例如值、子字符串和存在。

条目，包含包含值的属性。

LDAP 不提供参照完整性。一些 LDAP 服务器实现可能会为 memberOf 和 member 提供一个值，通常是 LDAP 服务器实现（例如 AD）的后台服务，它创建 memberOf 的伪值。（它实际上不在底层数据库中）。

是的，您可以将数据存储在关系数据库中。属性值可以作为与条目上的属性名称的键关系来完成。

至于广告，具体来说，[这可能会提供一个起点](http://technet.microsoft.com/en-us/library/cc961767.aspx)。

# knockout.js - observablearray 中的 Breeze 子实体未创建为“dependentobservable”

> ID：14592664
> 
> 赞同：0
> 
> 时间：2013-01-29T21:30:38.477
> 
> 标签：knockout.js, breeze

唔。对我来说似乎是错误的。我有一个轻而易举的查询可以做到这一点：

```
 var query = new breeze.EntityQuery()
                     .from("AllGames")
                     .expand("Sets, MVP, TeamerMVP.Person")
                     .orderBy("GameDateTime desc"); 
```

（每场比赛可能没有或有很多 TeamerMVP 记录，并且与 person 表存在一对一的关系，因此 TeamerMVP.Person 的扩展语句，因此我可以亲自直接访问“Name”属性。这在直接一对一相关的MVP（每场只能有一个））

一切似乎都很好 - 相关实体已加载，我也可以访问原型函数中的子实体。但是，我尝试在与子实体的 html 绑定中做很多事情时遇到问题，并且在检查 chrome 的控制台时，似乎可能是因为子实体与父实体不同，没有被声明为dependentobservable，它们只是普通的“对象” ”。

```
viewmodel defines parent as:           games = ko.observableArray([]) 
```

控制台评估：

```
$data
    Object
        games: Object[0]
        _latestValue: Array[7]
        0: Game
        1: Game
        2: Game
            >GameDateTime: function dependentObservable() {
            >HomeGame: function dependentObservable() {
            >ID: function dependentObservable() {
            >LeagueGame: function dependentObservable() {
            >MVP: function dependentObservable() {
            >MVP_PersonID: function dependentObservable() {
            >NLorRL: "<strong>NL</strong> (A)"
            >Opponent: function dependentObservable() {
            >Sets: Object[0]
            >TeamerMVP: Object[0] 
```

在展开的节点中，您可以看到父实体级属性（GameDateTime、HomeGame 等）被创建为dependentobservables，但子实体（Sets、TeamerMVP）不是，我猜这就是为什么我有一些html 模板绑定中的麻烦，如“foreach”作为淘汰赛似乎根本看不到那些子实体。

有什么我想念的吗？我是否应该在视图模型中创建一个“games.Sets = ko.observableArray([])”声明以在创建子实体时充当子实体的容器？

返回的 json 数据显示如下：

```
TeamerMVP: [{$id:20, $type:lbD.model.TeamerMVP, lbD.model, GameID:3, PersonID:4,…}]
    0: {$id:20, $type:lbD.model.TeamerMVP, lbD.model, GameID:3, PersonID:4,…}
    $id: "20"
    $type: "lbD.model.TeamerMVP, lbD.model"
    GameID: 3
    Person: {$id:21, $type:lbD.model.Person, lbD.model, ID:4, Name:Mike Connor, isAdmin:false,…}
    PersonID: 4 
```

并且很容易在相关的 Person 表中看到“Name”属性。

编辑补充：麻烦的只是“TeamerMVP”关系。只是设法在“Sets”实体上使用“forEach”做一些事情，这样就可以正常工作，即使它不是依赖可观察的......我很困惑。

进一步编辑了沃德的问题：

在断点按要求我看到这些列出：

```
breezeConfig.manager.metadataStore._structuralTypeMap
Object
  >Game:#lbD.model: ctor
  >GameSet:#lbD.model: ctor
  >Person:#lbD.model: ctor
  >TeamerMVP:#lbD.model: ctor
  >Venue:#lbD.model: ctor
  >__proto__: Object 
```

这些是我的（简单）数据库中的具体表名。如果我展开“GameSet”，则其中一个属性是：defaultResourceName：“Sets”，它是导航属性名称（在模型中定义为“Public Overridable Property Sets() As ICollection(Of GameSet)”）。

啊...刚刚扩展了“TeamerMVP”，它的默认资源名称是“TeamerMVPs”，这是一个很小但微妙的区别！我不记得在任何地方都定义了结尾带有“s”的版本，并且快速搜索该项目没有发现任何结果。好奇的。也许这就是问题所在，我现在将快速玩一下 html 绑定。

编辑 3：HTML 绑定信息

不，根本不打球……

我有这个模板：

```
 <script type="text/html" id="TeamerMVPTemplate">
    <div>Teamer MVP(s):&nbsp;</div>
    <li data-bind="text: Person().Name"></li>
</script> 
```

它嵌入在另一个模板（主要的“foreach：游戏”模板）中，这是它被引用的地方：

```
<span class="fixtureBoxLine" data-bind="template: { name: 'setScoresTemplate', foreach: Sets }"></span>
<span class="fixtureBoxLine" data-bind="template: { name: 'TeamerMVPTemplate', foreach: TeamerMVPs }"></span> 
```

......它只是默默地打破。没有错误消息，但处理在第一个游戏的第一个循环时停止。其上方的“foreach: Sets”模板完美运行。

如果我在上面的绑定声明中将“foreach: TeamerMVPs”改回“foreach: TeamerMVP”，所有游戏都会被处理，但 TeamerMVP 的模板中没有显示任何内容，所以我猜“TeamerMVPs”是正确的实体引用，而且有些奇怪继续我尝试访问它的方式。“Person().Name”是模板中的正确绑定吗？

============================================

编辑4：模型说明

manager.metadataStore.getEntityType('Game').navigationProperties 返回 4 个导航属性。这是正确的，应该有一个 0 对多个“Sets”的集合，一个 0 对多个“TeamerMVP”的集合，一个 0 对一的“MVP”和一个 0 对一的“Venue”。所有人都在场。

可以只有一个（或没有）MVP，但从 0 到多个 TeamerMVP 是完全正确的。这种关系的建立方式与“Sets”关系的工作方式完全相同。唯一的细微差别是“TeamerMVP”tavle 本身与“Person”表具有 1 对 1 的关系，因为任何 TeamerMVP 都必须是有效的人。这就是为什么我的微风查询定义了一个引用“TeamerMVP.Person”的“扩展”，这似乎可以正常工作，因为返回的 json 数据完全符合我的预期。在原始 json 中，导航属性被称为“TeamerMVP”，只有在“structuraltypemap”中 defaultResourceName 被称为“TeamerMVPs”。

如果我将 html 绑定保留为“forEach TeamerMVP”，则所有游戏都会返回并按预期绑定到“foreach 游戏”父模板，但没有数据绑定到 TeamerMVP 模板，控制台中也不会显示错误。如果我将绑定更改为“foreach TeamerMVPs”，则只返回一场比赛，然后在发生绑定并显示数据时停止处理。但是，控制台中没有显示错误。

似乎微风在内部将导航属性创建为“TeamerMVPs”，但 json 正在返回“TeamerMVP”，也许这种差异是绑定似乎有效但没有绑定数据的原因？远远超出我目前的理解！

==================================================== ================

编辑5：添加模型信息

**游戏模型**

```
Public Class Game
    Public Property ID() As Integer
    Public Property GameDateTime() As System.DateTime
    Public Property Opponent() As String
    Public Property HomeGame() As Boolean
    Public Property LeagueGame() As Boolean
    Public Property MVP_PersonID() As Nullable(Of Integer)
    Public Property VenueID() As Nullable(Of Integer)
    Public Property isNL() As Boolean

    Public Overridable Property Sets() As ICollection(Of GameSet)
    Public Overridable Property MVP() As Person
    Public Overridable Property TeamerMVP() As ICollection(Of TeamerMVP)
    Public Overridable Property Venue() As Venue
End Class 
```

**TeamerMVP 模型**

```
Public Class TeamerMVP
    Public Property GameID() As Integer
    Public Property PersonID() As Integer

    Public Overridable Property Person() As Person
End Class 
```

**人物模型**

```
Public Class Person
    Public Property ID() As Integer
    Public Property Name() As String
    Public Property isAdmin() As Boolean
    Public Property email() As String
    Public Property type() As String
    Public Property Image() As String
    Public Property thumbImage() As String
    Public Property backImage1() As String
    Public Property backImage2 As String
    Public Property Height() As String
    Public Property YearStarted() As String
    Public Property Position() As String
    Public Property PreviousClubs() As String
    Public Property ShirtNumber() As String
    Public Property isNL() As Boolean

    Public Overridable Property Games_MVP() As ICollection(Of Game)
    Public Overridable Property Games_TeamerMVP() As ICollection(Of Game)
End Class 
```

**游戏集模型**

```
Public Class GameSet
    Public Property ID() As Integer
    Public Property GameID() As Integer
    Public Property SetNo() As Integer
    Public Property ourScore() As Integer
    Public Property theirScore() As Integer

    Public Overridable Property Game() As Game
End Class 
```

在成功断点的控制台中使用`breezeConfig.manager.getEntities('TeamerMVP')`确实会显示大量“TeamerMVP”实体。网络资源选项卡也显示了原始返回数据中“TeamerMVP”的正确相关实体。

但是，`data.results[0].TeamerMVP()`在成功断点处在控制台中运行仍然不返回任何内容：

```
data.results[0].TeamerMVP()
>[]
data.results[2].TeamerMVP()
>[] 
```

上面的第一个是正确的，第一个返回的游戏还没有关联的“TeamerMVP”实体，但是序列中的第三个游戏确实有关联的实体，如返回的原始 json 数据所示：

```
TeamerMVP: [{$id:4, $type:lbD.model.TeamerMVP, lbD.model, GameID:24, PersonID:14,…},…]
 >0: {$id:4, $type:lbD.model.TeamerMVP, lbD.model, GameID:24, PersonID:14,…}
 >1: {$id:6, $type:lbD.model.TeamerMVP, lbD.model, GameID:24, PersonID:15,…} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:47:58.653

**最终更新**

哇，我能说什么，但非常感谢 Ideablade 的 Ward 花了这么多时间来帮助解决这个问题。最后，结果证明是最简单的事情：从依赖的“TeamerMVP”到父“Game”的缺少返回导航属性。

所以我所要做的就是改变 TeamerMVP 模型：

```
Public Class TeamerMVP
    Public Property GameID() As Integer
    Public Property PersonID() As Integer

    Public Overridable Property Person() As Person
End Class 
```

至：

```
Public Class TeamerMVP
    Public Property GameID() As Integer
    Public Property PersonID() As Integer

    Public Overridable Property Game() As Game
    Public Overridable Property Person() As Person
End Class 
```

...随着 TeamerMVP 实体出现在他们应该出现的地方，所有这些都立即变得栩栩如生。

沃德和他在 Ideablade 的同事正在研究是否有可能突出/捕获这种情况。如果您作为初学者阅读此问题/试图了解有关 Breeze 的更多信息，那么我只能鼓励您全面试用它，因为它是一款了不起的产品，而我只是触及了它可以做到的表面远的。最重要的是它背后有一个伟大的团队。谢谢沃德！

# android - Android - 检查时间是否在一天中的特定时间之间

> ID：14592669
> 
> 赞同：6
> 
> 时间：2013-01-29T21:30:54.377
> 
> 标签：android, time, milliseconds

在我的应用程序中，如果时间在用户选择的一天中的某些小时之间，我将更新一些内容。如果用户选择像“07-21”这样的东西，它工作正常，但不是“21-07”，它是过夜的。我检查时间的方法是获取当前小时并将其转换为毫秒。然后我检查当前毫秒是否在所选小时之间（这些也转换为毫秒）。像这样：

```
 if (currentMilli >= startHourMilli && currentMilli <= endHourMilli) 
```

问题：如果用户选择任何超过午夜的东西（例如 19-08），它就不起作用。

我已经尝试了很多东西，但我就是不知道该怎么做。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:08:12.217

当你经过午夜时，你是否将一年中的日期加 1？否则你的 `startHourMilli`可能大于`endHourMilli`并且你的 if 子句永远是假的。

解决方案是使用`add-method`Calendar 类。因此，我以小时为单位计算间隔的长度并将这个值添加到我们的日历实例中。

```
int start = 21; // let's take your failing example: 21-07
int end = 7;
int hours = (end - start) % 24; // here hours will be 14

Calendar cal = Calendar.getInstance();
// set calendar to TODAY 21:00:00.000
cal.set(Calendar.HOUR_OF_DAY, start);
cal.set(Calendar.MINUTE, 0);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MILLISECOND, 0);

long startHourMilli = cal.getTimeInMillis();

// add 14 hours = TOMORROW 07:00:00.000
cal.add(Calendar.HOUR_OF_DAY, hours); 
long endHourMilli = cal.getTimeInMillis(); 
```

让我知道这是否有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:38:52.550

Date 具有比较两个日期的前后功能。希望本文档对您有所帮助：

[http://developer.android.com/reference/java/util/Date.html#after(java.util.Date)](http://developer.android.com/reference/java/util/Date.html#after(java.util.Date))

[http://developer.android.com/reference/java/util/Date.html#before(java.util.Date)](http://developer.android.com/reference/java/util/Date.html#before(java.util.Date))

最好的祝福。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-25T11:26:34.553

最简单的检查方法..

```
val isDayTime : Boolean
    get() {
        val cal = Calendar.getInstance()
        val hour = cal.get(Calendar.HOUR_OF_DAY)
        return hour in 8..20
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:36:35.917

我正在回答我自己的问题，因为我想我想出了一些可能适用于我正在尝试做的事情：

```
if(endHourMilli < startHourMilli){
if(currentMilli >= startHourMilli && currentMilli <= 23*3600000 || currentMilli >= 0 && currentMilli <= endHourMilli){
//Do whatever 
}
}else{
if (currentMilli >= startHourMilli && currentMilli <= endHourMilli) {
//Do whatever
}
} 
```

即使 endMilli 小于 startMilli 也应该可以工作，还是我在这里搞砸了？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-11T17:47:52.667

我知道我参加聚会有点晚了，但最近我开发了需要在给定时间范围内工作的 android 应用程序，由于我不喜欢与我一起工作，`Calendar`我最终使用了这样的东西：

```
// if start hour is later than end hour
// example: start = 21, end = 07
int startHourMilli = 21, endHourMilli = 07;
// just add one day (in your case in millis)
if (startHourMilli > endHourMilli) endHourMilli += 24 * 60 * 60 * 1000;
// now here you can check without any problems
if(currentMilli >= startHourMilli && currentMilli < endHourMilli){
    // within timeframe, do stuff you need
} else {
    // not in timeframe, find solution
} 
```

现在我知道您为自己找到了一个解决方案，但我认为我的方法可能更容易理解（至少对于可能会感到困惑的新手而言）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-10T14:58:45.827

您始终可以使用简单的 if / else 24 小时格式，而无需使用函数或额外的计算：

**例如 1：**从 StartHour 到 StopHour 的完整时间段（停止时间包括所有分钟）

int StartHour = 23; //从23:00开始

int StopHour = 9; // 直到当前时间为 9，这将包括直到 9:59

int CurrentHour = 2;

```
if (StartHour > StopHour)
{
  if (CurrentHour < StartHour && StopHour < CurrentHour) 
  {Inside = false;}
  else
  {Inside = true;}
}
else
{
  if (CurrentHour >= StartHour && StopHour >= CurrentHour) 
  {Inside = true;}
   else
  {Inside = false;}
} 
```

最后**，如果 Inside == true** CurrentHour 在时间范围内 StartHour - StopHour(full stop hour)

如果两者相等，则执行其他操作：
if (StartHour == StopHour) {.................};

**例如 2：**如果您想在这个**确切的**StopHour 时间停止，您需要进行一些更改：

int StartHour = 23; //从23:00开始

int StopHour = 9; // 这将在 8:59 后停止

int CurrentHour = 2;

```
if (StartHour2 > StopHour2)
{
  if (Hr24 < StartHour2 && StopHour2 <= Hr24) 
  {Quiet = false;}
  else
  {Quiet = true;}
}
else
{
  if (Hr24 >= StartHour2 && StopHour2 > Hr24) 
  {Quiet = true;}
   else
  {Quiet = false;}
} 
```

最后**，如果 Inside == true** CurrentHour 在时间范围内 StartHour - StopHour(exact)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-26T11:56:02.410

我认为 ottel142 几乎可以，但应该是：

```
 public static boolean checkIfNight() {
    int start = 21;
    int end = 7;
    int hours = 24 - start + end; 

    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.HOUR_OF_DAY, start);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);

    long startHourMilli = cal.getTimeInMillis();
    KLog.e(cal.getTime());

    cal.add(Calendar.HOUR_OF_DAY, hours);
    long endHourMilli = cal.getTimeInMillis();

    long currentMilli = Calendar.getInstance().getTimeInMillis();

    if (currentMilli >= startHourMilli && currentMilli <= endHourMilli)
        return true;
    else return false;

} 
```

# visual-studio-2010 - XSLT 调试：“样式表太复杂了。” Xslt异常

> ID：14592670
> 
> 赞同：3
> 
> 时间：2013-01-29T21:31:01.193
> 
> 标签：visual-studio-2010, xslt

当我尝试使用 Visual Studio 2010 调试 XSLT 文件时，我得到以下弹出窗口：

```
---------------------------
Transform Error
---------------------------
XSL Transformation failed. See Output Window for details.
---------------------------
OK   
--------------------------- 
```

单击“确定”后，VS2010 的输出窗口中将显示以下内容：

```
XsltException
-------------
The stylesheet is too complex. 
```

我使用的 XSL 样式表有 1881 行 (~68KB)。我尝试使用 10 个导入（每个大约 275 行）来分解它，但我得到了同样的错误。这不会发生在我的任何其他样式表中（我的下一个最大的样式表是大约 300 行和 <16KB）。

注意：**这在 Visual Studio 2008 中不会发生。我将其用作临时修复。**

注意 2：我找到了一个关于如何导致错误的 Windows 支持页面`format-number()`，但我已经安装了所有服务包，但它没有改变任何东西。( [http://support.microsoft.com/kb/832757](http://support.microsoft.com/kb/832757) )

# php - PHP：写入文件时丢失记录

> ID：14592677
> 
> 赞同：2
> 
> 时间：2013-01-29T21:31:31.837
> 
> 标签：php, fwrite, http-get, missing-data

每次消息发出时，我的电信供应商都会向我发送报告。我编写了一个非常简单的 PHP 脚本，它通过 HTTP GET 接收值。使用 fwrite 我将查询参数写入 CSV 文件。文件名为 report.csv，以当前日期为前缀。

这是代码：

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
date_default_timezone_set('America/New_York'); 
//setting a the CSV File
$fileDate = date("m-d-Y") ;
$filename = $fileDate."_Report.csv";

$directory = "./csv_archive/";

//Creating handle
$handle = fopen($filename, "a");

//These are the main data field
$item1 = $_GET['item1'];
$item2 = $_GET['item2'];
$item3 = $_GET['item3'];

$mydate = date("Y-m-d H:i:s") ;
$pass = $_GET['pass'];

//testing the pass
if (isset($_GET['pass']) AND $_GET['pass'] == "password")
    {
    echo 'Login successful';
    // just making sure the function could write to it
    if (!$handle = fopen($directory.$filename, 'a')){
         echo "Cannot open file ($filename)";
         exit;
    }

    //writing the data I receive through query string
    if (fwrite($handle, "$item1,$item2,$item3,$mydate \n") === FALSE) {
        echo "Cannot write to file ($filename)";
        exit;
    }

    fclose($handle); 
    }
else{
    echo 'Login Failure please add the right pass to URL';   
    }   
?> 
```

该脚本执行我想要的操作，但唯一的问题是不一致，这意味着大部分记录丢失（大约一半的报告）。当我登录到我的帐户时，我可以获得完整的报告。

我不知道我需要做什么来解决这个问题，请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T22:48:53.540

对于这个脚本，我有几个建议。

要解决 Andrew Rhyne 的建议，请将读取每个 $GET 变量的代码更改为：

```
$item1 = (isset($_GET['item1']) && $_GET['item1']) ? $_GET['item1'] : 'empty'; 
```

这将告诉您是否正在填充所有字段。

我怀疑你的问题是别的。听起来您对要保存的每条记录都有单独的请求。也许其中一些请求发生在一起关闭并且正在破坏彼此打开和写入文件的能力。要检查是否发生这种情况，您可以尝试使用以下代码检查您是否正确打开了文件。（请注意，您在脚本中第一次使用 'fopen' 没有任何作用，因为您在第二次使用 'fopen' 时覆盖了 $handle，它也打开了错误的文件......）

```
if (!$handle = fopen($directory.$filename, 'a')){
     $handle = fopen($directory.date("Y-m-d H:i:s:u").'_Record_Error.txt', 'a');
     exit;
} 
```

这将确保您永远不会因为并发写入尝试而丢失数据。如果您发现这确实是您发出的，您可以延迟后续的写入尝试，直到文件不忙为止。

```
$tries = 0;
while ($tries < 50 && !$handle = fopen($directory.$filename, 'a')){
     sleep(.5);//wait half a second
     $tries++;
}
if($handle){
    flock($handle);//lock the file to prevent other requests from opening the file until you are done.
} else {
    $handle = fopen($directory.date("Y-m-d H:i:s:u").'_Record_Error.txt', 'a');//the 'u' is for milliseconds
    exit;
} 
```

这将花费 25 秒，尝试每半秒打开一次文件，并且每次您仍然无法打开要写入的文件时，仍会将您的记录输出到一个唯一文件。然后，您可以像以前一样安全地 fwrite() 和 fclose() $handle。

# sql - Rails ActiveRecord 多个 WHERE 语句

> ID：14592678
> 
> 赞同：3
> 
> 时间：2013-01-29T21:31:37.223
> 
> 标签：sql, ruby-on-rails, ruby, rails-activerecord

我有一个包含一些条件的数组，比如： `ages = [1, 4, 10]`。

我正在尝试构建一个查询，它将返回数组中的年龄。数组可以是任意长度。所以像：

```
Person.where("age == :ages", {:ages => ages}) 
```

现在这显然不像`:ages`数组那样工作，当根据上面的相等语句时，它需要一个字符串。

我试图让它实现以下方面的目标：`WHERE age = 1 AND age = 4 AND age = 10`根据`ages`数组。

所有在线示例都讨论了当它们是单独的变量时如何使用多个 where 条件，在这种情况下很容易，就像你会做的那样：`Person.where("condition1 = :first AND condition2 = :second....)`. 我在数组中有未知数量的项目，我想用它们过滤我的所有查询结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:34:40.860

我认为您正在寻找一个`IN`查询，因为`age` **不能**同时**是** `1`and`4`和`10`一些单列整数值。

```
Person.where(age: ages) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:35:01.503

ActiveRecord 和 where 语句已经支持它：

```
ages = [1, 5, 12]
Person.where(age: ages)
# This will generates a query like:
# SELECT * FROM persons WHERE age IN(1, 5 ,12) 
```

这种查询方式也比“硬编码”条件（将字符串传递给 where 语句）更好。通过使用 Hash 参数，您可以让 ActiveRecord 处理所有 DB-Query 转换工作。

# image - JPanel 没有在 JFrame 中绘制

> ID：14592679
> 
> 赞同：1
> 
> 时间：2013-01-29T21:31:37.330
> 
> 标签：image, graphics, jpanel, repaint, paintcomponent

我对java还很陌生，并决定制作一个2D游戏。我正在尝试绘制面板，但它根本不起作用。我用 JFrames 做了同样类型的事情并且它有效，但如果可能的话，我想让它与 JPanels 一起工作。这是一些代码

这是一个仅用于绘制地图的类。从枚举中调用图像

```
 //called in paint method for panel
public void draw(Graphics2D g2){
    sLevel1.setupRect();
    for(int i = 0; i < 24; i++){
        for(int e = 0; i < 24; i++){
            if(level1.worldDat[i][e] != 0){
                int c = level1.worldDat[i][e];
                if(i == 1){
                    g2.drawImage(Toolkit.getDefaultToolkit().getImage(eBlocks.GRASS1.getPath()), e*20, i*20, null);
                }else if(i == 2){
                    g2.drawImage(Toolkit.getDefaultToolkit().getImage(eBlocks.GRASS2.getPath()), e*20, i*20, null);
                }else if(i == 3){
                    g2.drawImage(Toolkit.getDefaultToolkit().getImage(eBlocks.GRASS3.getPath()), e*20, i*20, null);
                }else if(i == 5){
                    g2.drawImage(Toolkit.getDefaultToolkit().getImage(eBlocks.BORDER.getPath()), e*20, i*20, null);
                }else{
                    g2.drawImage(Toolkit.getDefaultToolkit().getImage(eBlocks.NULL.getPath()), e*20, i*20, null);
                }
            }
        }
    }

} 
```

这是它在面板中调用的地方，

```
 @Override
public void paintComponent(Graphics g){     
    Graphics2D g2 = (Graphics2D) g;
    super.paintComponent(g2);
    worldDraw.draw(g2);
} 
```

最后这是在 JFrame 中添加的地方，并且计时器用于重绘

```
 public mainGameFrame() {
    super("Tile Game");
    setResizable(false);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 510, 525);

    //i also tried add, didnt work either
    setContentPane(gamePanel);

    addKeyListener(this);

    Timer time = new Timer(32, new ActionListener(){
        public void actionPerformed(ActionEvent e){
            repaint();
            gamePanel.repaint();
        }
    });

    time.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:14:43.767

我不确切知道您要做什么以及为什么它不起作用（您是否尝试过使用调试器逐步完成它？您发现了什么？），但这是我基于您提供的信息的建议。

暂时摆脱该`draw()`方法（如果您愿意，只需将其注释掉）。相反，请在`paint()`方法中执行此操作：

```
public void paint( Graphics g ) {
    super.paint( g );

    // draw something simple here, just so you know it's getting called, like a filled Rect
    g.setColor( Color.BLUE );
    g.fillRect( 0, 0, 50, 50 );

    // try drawing the image later, after you verify this is being called with your rect
//    Graphics2D g2 = (Graphics2D)g;
//    g2.drawImage( Toolkit.getDefaultToolkit().getImage(eBlocks.GRASS1.getPath()), e*20, i*20, null);
} 
```

如果你的填充矩形有效，但你的图像没有，你知道你的图像有问题，你可以沿着修复它的路径走。

这里确实没有太多信息，但是您的问题中也没有太多信息。如果我确切地知道出了什么问题，我可以给出更好的回应。“它根本行不通”并不多。

# javascript - 不安全的 JavaScript 尝试使用 URL 访问框架 - 在同一个域中

> ID：14592685
> 
> 赞同：3
> 
> 时间：2013-01-29T21:31:54.107
> 
> 标签：javascript, cross-domain

我正在尝试从 iFrame 访问父窗口的 URL，但在我的服务器上出现错误：

> 不安全的 JavaScript 尝试从 URL http://www.domain.com/folder/file.html 的框架访问具有 URL [http://www.domain.com/folder/](http://www.domain.com/folder/file.html)[的](http://www.domain.com/folder/)框架 。被访问的框架将“document.domain”设置为“domain.com”，但请求访问的框架没有。两者都必须将“document.domain”设置为相同的值才能允许访问。

我在同一个域中，所以我不明白为什么会出现此错误。供您参考，在 localhost 中一切正常。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:08:35.287

好的，我找到了解决方案。我输入了这段代码并且有效：

```
document.domain = 'domain.com'; 
```

# android - 是否可以从我的应用程序从谷歌播放下载应用程序 - Android

> ID：14592691
> 
> 赞同：0
> 
> 时间：2013-01-29T21:32:01.723
> 
> 标签：android, google-play

> **可能重复：**
> [从另一个安卓应用下载并安装安卓应用](https://stackoverflow.com/questions/14171025/download-and-install-android-app-from-another-android-app)

我有一个客户想要构建一个 android 应用程序，该应用程序是来自 google play 市场的应用程序列表。

如果用户点击一个按钮从google play下载应用程序，是否可以直接在我的应用程序内下载apk，或者用户在市场内下载应用程序后，被重定向到我的应用程序？

需要这样做的原因是因为客户端想要登录到服务器说用户已经下载了应用程序

# cloud9-ide - 如何让 docpad 服务器在 Cloud 9 IDE 中运行/生成？

> ID：14592695
> 
> 赞同：0
> 
> 时间：2013-01-29T21:32:31.860
> 
> 标签：cloud9-ide, docpad

当我在 Cloud 9 终端中执行“docpad run”命令时，它会给我一个 IP 地址，例如：

```
http://127.9.102.129:8080/ 
```

但什么都没有。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:32:31.860

Docpad 允许 .env 文件设置 process.env.STUFF 并且您可以在 docpad.coffee 中设置端口（来自[http://docpad.org/docs/config](http://docpad.org/docs/config)）但我们不需要这些技巧来获取我们的 docpad在 C9 中运行。

相反，我们只需通过 RUN & DEBUG 选项卡为 C9 设置“RUN & DEBUG”上下文。名字可以是任何东西。“文件路径：”将设置为与 docpad 的 package.json 中的“main”相同，即“./node_modules/docpad/bin/docpad-server”。“运行时”可以保留为“默认”，我们也不需要任何“Cmd Line Args”。因此，您的 docpad 运行设置可能如下所示：

```
Name           docpad.coffee
File Path      ./node_modules/docpad/bin/docpad-server
Runtime        Default
Cmd Line Args 
```

![Cloud 9 IDE 中 docpad 的运行和调试设置](../Images/e83390d7196b7a7fb1ba6bd62310846e.png)

然后，您只需到顶部的绿色运行按钮，然后单击按钮右侧的小下拉箭头，然后选择您刚刚设置的运行上下文。在我们上面的示例中，它将是“docpad.coffee”。单击该按钮后，C9 控制台将从下方弹出并像往常一样开始执行 docpad 运行命令，但在此之前，它会为您提供 C9 url 来测试/预览您的 docpad 应用程序！

这就是你所需要的，你的在线使用 docpad 和 C9。

8)

# javascript - 使用javascript从另一个弹出窗口打开一个新的弹出窗口

> ID：14592700
> 
> 赞同：3
> 
> 时间：2013-01-29T21:32:51.823
> 
> 标签：javascript, asp.net, popup

我想从另一个弹出窗口打开一个弹出窗口，我使用了下面的代码，但是当我单击弹出窗口刷新并且项目出现在其中而不是另一个弹出窗口时。

我想显示两个弹出窗口，但只有一个弹出窗口。有人可以帮助我吗？

编码：

```
function pop_up(url) {
    newwindow = window.open(url,
        'name',
        'height=517,width=885,scrollbars=yes,toolbar=no,menubar=no,resizable=yes,location=no,directories=no,status=no,titlebar=no,left=400,top=120');
    if (window.focus) { newwindow.focus() }
    return false;
} 
```

点击事件代码：

```
Page.ClientScript.RegisterStartupScript(GetType(), "popup",
    "pop_up_Info('" + "PopUpEmailing.aspx" + "');", true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:39:35.120

[类似的问题在这里](https://stackoverflow.com/questions/2101795/open-popup-from-another-popup)得到了回答。

您必须在`window.open`方法中为窗口指定一个新名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:01:28.587

修改你的控制`pop_up`功能：

```
function pop_up(url, windowName) {
    newwindow = window.open(url, 
        windowName,
        'height=517,width=885,scrollbars=yes,toolbar=no,menubar=no,resizable=yes,location=no,directories=no,status=no,titlebar=no,left=400,top=120');
    if (window.focus) { newwindow.focus() }
    return false;
} 
```

然后在您的电话注册电话中执行以下操作：

```
 Page.ClientScript.RegisterStartupScript(GetType(),
     "popup", "pop_up('PopUpEmailing.aspx', 'PopUpEmailing');", true); 
```

确保第二个参数与调用原始弹出窗口的窗口名称不同。

# apache - 查找导致内部服务器 500 错误的原因

> ID：14592703
> 
> 赞同：0
> 
> 时间：2013-01-29T21:32:55.793
> 
> 标签：apache, xampp, internal-server-error, error-logging

我在我的本地 Xampp 机器上备份我的客户 PrestaShop 网站。我收到内部服务器 500 错误，但我不知道是什么原因造成的。该网站在我客户的服务器上实时运行。我的 Xampp 错误日志也没有给我任何错误。

如何找到导致此内部服务器 500 错误的原因？

# google-app-engine - 如何安排 ge 任务队列只运行一次

> ID：14592704
> 
> 赞同：1
> 
> 时间：2013-01-29T21:32:58.237
> 
> 标签：google-app-engine, cron, task-queue

有谁知道如何在 python 中为 GAE 安排任务队列，以便任务只运行一次？我考虑过使用 cron，但谷歌搜索并没有发现任何只运行一次的配置。但是我确实找到 [了这篇文章](https://serverfault.com/questions/111609/how-to-run-a-cron-job-only-once)。有谁知道我如何在 Python 中为 GAE 完成此操作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:46:35.250

使用[task_retry_limit](https://developers.google.com/appengine/docs/python/taskqueue/taskretryoptions#TaskRetryOptions_task_retry_limit)。

```
taskqueue.Task(
        url='/process/url,
        params={'varname': 'value'},
        method='POST',
        retry_options=taskqueue.TaskRetryOptions(task_retry_limit=1)).add() 
```

# unique - 在一个大的制表符分隔文件中，获取一个字段的唯一值，在第二个字段中将它们的值相加

> ID：14592707
> 
> 赞同：0
> 
> 时间：2013-01-29T21:33:08.863
> 
> 标签：unique, csv

第一篇文章，我通常潜伏，但我找不到任何适合我情况的东西。

所以，我有一个大的制表符分隔文件（约 30 亿行），每行有两个字段。一个是固定长度的字符串（10 个字符，全是字母，全是大写），另一个是可变大小的整数。行之间的第一个字段中的某些条目是相同的，就像这样

```
AAABBBCCCD    6
QQQQQQQQQQ    1
ZZZTOPZZZZ    299
AAABBBCCCD    14
JHFDSJKHFJ    2
ZZZTOPZZZZ    1 
```

我想要做的是比较第一个字段中的值，找到唯一的值，然后对这些唯一条目的第二个字段值求和，从而得到这样的输出，

```
AAABBBCCCD    20
QQQQQQQQQQ    1
ZZZTOPZZZZ    300
JHFDSJKHFJ    2 
```

我不一定关心它们是否按整数值排序，但如果是这样的话会很酷。并不是真正的优先事项。

我已经在 perl 中尝试了一些*适用*于测试文件的东西，但执行速度太慢而无法在真实的东西上使用。所以，是的，我对任何类型的解决方案持开放态度，但我现在特别感兴趣，如果有任何酷/聪明的 bash-fu 可以完成这项工作。

# sql-server - 卸载过期评估后安装 SQL Server 2012 Developer

> ID：14592716
> 
> 赞同：2
> 
> 时间：2013-01-29T21:33:55.653
> 
> 标签：sql-server, sql-server-2012

我安装了 SQL Server 2012 的评估版，它已经过期了。我卸载了试用版，重新启动并安装了开发人员版。它说它安装成功；但是，当我打开 SQL Server Management Studio 时，它不会打开并且我收到以下消息：

> 评估期已过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T22:21:46.177

试用期到期后，您需要从计算机中*完全*删除*所有*SQL Server 组件。正如您所发现的，只需卸下引擎就会留下其他定时炸弹。所以你需要：

1.  卸载开发者版
2.  在控制面板/程序和功能中完全卸载所有剩余的 SQL Server 相关内容
3.  重新安装开发者版

我发布了一篇关于此过程的相当长的博客文章，因为它可能会变得非常混乱，并且并非所有内容都可以从控制面板中优雅地删除（至少这是我使用 2008 R2 的经验）。

基本上您*可能*需要运行以下命令...

```
msiexec /x "{GUID}" 
```

...对于您在以下注册表项中找到的每个与 SQL Server 相关的 GUID：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\ 
```

有关更多详细信息，请参阅帖子（请记住，GUID 和包含版本的名称在 2008 R2 和 2012 之间发生了变化，所以不要从字面上理解屏幕上的所有内容）：

[https://sqlblog.org/2010/10/25/fun-with-software-uninstalling-sql-server-2008-r2-evaluation-edition](https://sqlblog.org/2010/10/25/fun-with-software-uninstalling-sql-server-2008-r2-evaluation-edition)

# android - 代码按钮充气机

> ID：14592717
> 
> 赞同：0
> 
> 时间：2013-01-29T21:33:56.777
> 
> 标签：android, layout, button, android-activity

我有这个主要活动

```
public class MainActivity extends FragmentActivity {

SectionsPagerAdapter mSectionsPagerAdapter;

ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);  
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.menu_settings4:
            mainactivity();
            return true;
        case R.id.menu_settings1:
            ipallilos();
            return true;
        case R.id.menu_settings2:
            rithmisi();
            return true;
        case R.id.menu_settings3:
            sxetika();
            return true;

        default:
            return super.onOptionsItemSelected(item);
    }

}

private void mainactivity() {

    Toast.makeText(MainActivity.this, "Επιστροφή στην Αρχική Σελίδα", 
            Toast.LENGTH_SHORT).show();
}
private void rithmisi() {
    setContentView(R.layout.rithmisis);
    Toast.makeText(MainActivity.this, "Loading Settings", 
            Toast.LENGTH_SHORT).show();
}

private void ipallilos() {
    setContentView(R.layout.ipallilos);
    Toast.makeText(MainActivity.this, "Loading Staff", 
            Toast.LENGTH_SHORT).show();
}

private void sxetika() {
    //anoigma menou efarmogis
    setContentView(R.layout.sxetikame);
    Toast.makeText(MainActivity.this, "Loading about Software", 
            Toast.LENGTH_SHORT).show();

}

 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event)  {
     if ((keyCode == KeyEvent.KEYCODE_BACK)) {
         //moveTaskToBack(true);
         super.onBackPressed();
         return true;
     }

     return super.onKeyDown(keyCode, event);
 }

public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        // Show 3 total pages.
        return 2;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase();
           // case 1:
              //  return getString(R.string.title_section2).toUpperCase();
            case 1:
                return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
}

public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }
    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        Bundle args = getArguments();
        switch (args.getInt(ARG_SECTION_NUMBER)){

        case 1: 
            return inflater.inflate(R.layout.paraggeleialayout, container, false);

        case 2:
             return inflater.inflate(R.layout.trapezia, container, false);

    }

        return getView();

}

    }
} 
```

我在 .paraggeleiallayout 有一些按钮。我尝试将 setOnClickListener 添加到我的按钮以打开其他类，但它不起作用。这是我的 paraggeleia 课。

```
public class paraggeleia extends Activity {

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
           setContentView(R.layout.paraggeleialayout);
              TextView text = (TextView) findViewById(R.id.TextView1);
                 Button bTutorial = (Button) findViewById(R.id.button51);
                text.setText(R.string.paraggeleia);
           bTutorial.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v){
             finish();
            }
        });
    }

    @Override
     public boolean onKeyDown(int keyCode, KeyEvent event)  {
         if ((keyCode == KeyEvent.KEYCODE_BACK)) {
             super.onBackPressed();
             return true;
         }

         return super.onKeyDown(keyCode, event);
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:27:24.997

好的，我认为这现在更清楚了，因此您希望您的 ViewPager 布局能够启动下一个 Activity。你可能想做这样的事情：

```
case 1: 
       View v = inflater.inflate(R.layout.paraggeleialayout, container, false);
       Button bTutorial = (Button) v.findViewById(R.id.button51);
           bTutorial.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v){
           getActivity().startActivity(new Intent (getActivity(), paraggeleia.class));
            }
        });
return v; 
```

但是，您`paraggeleia.class`现在包含与`R.layout.paraggeleialayout`Fragment 相同的布局 ( )，因此请考虑将该 Activity 的布局更改为其他内容。

# ruby-on-rails - 用 rabl 生成的 json 包含一个 Wrapped_string 属性

> ID：14592718
> 
> 赞同：1
> 
> 时间：2013-01-29T21:33:59.097
> 
> 标签：ruby-on-rails, json, rabl

我的模型：

```
def full_name
  "#{first_name} #{middle_name} #{last_name} #{suffix_name}".mb_chars.upcase.squeeze(' ').strip
end 
```

我的 rabl 模板：

```
collection @users
attributes :id, :full_name 
```

这是插入一个名为`wrapped_string`

```
[{"user":{"id":73,"full_name":{"wrapped_string":"FOO BAR"}}}] 
```

但我需要类似的东西：

```
[{"user":{"id":73,"full_name":"FOO BAR"}}] 
```

如果我不使用`mb_chars`效果很好，但我必须使用它。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:33:56.553

您需要添加`to_s`以再次将 MultiByte::Chars 转换为字符串：

```
def full_name
  "#{first_name} #{middle_name} #{last_name} #{suffix_name}".mb_chars.upcase.squeeze(' ').strip.to_s
end 
```

# jquery - jQuery .removeClass 问题

> ID：14592719
> 
> 赞同：1
> 
> 时间：2013-01-29T21:33:59.257
> 
> 标签：jquery, css

我在我的网站上使用了一个词汇表，它利用了一些显示/隐藏功能和一个 .removeClass 属性。

```
$(document).ready(function() {
    $("#glossary-container li").click(function() { 
        $(".glossary-content > div").hide();
        var id = $(this).attr("id").replace('-link', ''); 
        $('#' + id).show(); 

        $(".glossaryUL li").each(function() { 
            $(this).click(function() {
                $(".glossaryUL li").removeClass("selected");                       
                $(this).addClass("selected"); 
                elementClick = $(this).attr("id"); 
            });
        });
    }); 

    $('.coolbox').hide(); 

    $('.clicker').click(function(event){ 
        event.preventDefault(); 
        $($(this).attr('href')).toggle(300); 
    });
}); 
```

在页面加载时，列表项字母“A”UL lass“.glossaryUL”通过内联样式设置为“选定”。

```
<li id="a-link" class="selected">A</li> 
```

当您单击另一个字母时，将显示类“.glossary-content”中的术语，但 .removeClass 属性不会从字母“A”中删除该类。

但是，如果您随后单击另一个字母（页面加载后第二次单击），.removeClass 属性将起作用并删除该类并将其应用于正确的字母...

我不知道为什么要这样做。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:41:23.377

您不需要将 click 事件分配包装到 中`each`，jQuery 已经为与该选择器匹配的**每个**元素分配了`click`事件（因为您使用了一个类作为选择器）。我怀疑你有重复的点击事件冲突。试试这个：

 **```
$(".glossaryUL li").click(function() { 
        $(".glossaryUL li").removeClass("selected");                       
        $(this).addClass("selected"); 
        elementClick = $(this).attr("id"); 
    });
}); 
```**

# c# - 在一个派生类中序列化基类属性，而不在第二个序列化类中序列化它

> ID：14592723
> 
> 赞同：1
> 
> 时间：2013-01-29T21:34:16.007
> 
> 标签：c#, xml, serialization, base, derived

我正在寻找一个问题，但我仍然很困惑如何解决这个问题。我有基类，并且有一些属性。基类有两个派生类。

我想在一个派生类中序列化基类属性，但我不想在第二个序列化类中序列化相同的属性。

这不是实际代码，仅用于示例目的。

```
public class BaseRouter
{

    private Double r;  
    private Double bch;  

    [XmlElement("BaseRouter.r")]
    public double R { get { return r; } set { r = value; } }

    } 
```

第一个派生类

```
 public class CiscoRouter : BaseRouter
{
    private String mRID; 

    [XmlAttribute("ID", Namespace = "rdf")]
    public String MRID { get { return this.mRID; } set { mRID = value; } }
    public Router()
    {

    } 
```

第二个派生类

```
 public class DellRouter : BaseRouter
{
    private String mRID; 

    [XmlAttribute("ID", Namespace = "rdf")]
    public String MRID { get { return this.mRID; } set { mRID = value; } }
    public Router()
    {

    }

} 
```

如何`BaseRouter.r`在`DellRouter`课堂上避免并包含在`CiscoRouter`序列化中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:44:03.397

在基类中定义一个`abstract`方法，这将用于进行序列化/初始化。在要序列化的类中`BaseRouter.r`，在此方法实现中对其进行序列化。在另一堂课上，做任何合乎逻辑的替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:44:18.093

我相信您可以实现一个公共的 ShouldSerializeR() 函数并在您的 DellRouter 类中覆盖它以返回 false。

```
class BaseRouter
{
    ...
    public double R { get { return r; } set { r = value; } }
    public virtual bool ShouldSerializeR() { return true; }
    ...
}

class DellRouter
{
    ...
    public override bool ShouldSerializeR() { return false; }
    ...
} 
```

# php - HTTP 身份验证和 REST

> ID：14592726
> 
> 赞同：0
> 
> 时间：2013-01-29T21:34:30.453
> 
> 标签：php, jquery, http-authentication

我正在构建一个允许移动应用程序与之对话的 PHP Api。该应用程序目前更像是一个技术演示，用于测试技术和想法。

为了保护应用程序请求，某些事情需要身份验证。

因此，让我们以以下为例：

```
$('form').submit(function(e){

    e.preventDefault();

    var form = $(this);

    var data = form.serialize();

    $.ajax({
        type: 'POST',
        url: form.attr('action'),
        data: data,
        success: function(response){

            // show success message or error depending on authentication

        },
        error: function(a,b,c) {

        }   
    });

}); 
```

我还`header('Access-Control-Allow-Origin: *');`用来允许应用程序与它和通配符对话，因为它目前只是一个测试。然而，在现实生活中，我不会有一个域，因为它将从移动设备而不是另一个域（很可能是PhoneGap）运行。

我在网上环顾四周并遇到了，`HTTP Authorization`但无论我阅读了多少文档，我都无法理解它。

它的一个例子是这样的：

```
Authorization: TRUEREST username=john&password=test&apikey=247b5a2f72df375279573f2746686daa 
```

我已经考虑过根据我在 jQuery 文档中看到的内容来传递所说的数据：

```
data: {
    username: 'john',
    password: 'test',
    apiKey: '247b5a2f72df375279573f2746686daa'
},
headers: {
    Authorization: "TRUEREST"
}, 
```

在发回 JSON 之前，我可以先检查数据库中是否存在用户名和密码，也可能以同样的方式检查 Api 密钥。但我根本不了解 TRUEREST 部分或它可以为代码提供什么?

**更新**

我一直在我的 jQuery 代码中尝试以下内容：

```
headers: {
                            Authorization: "TRUEREST",
                            username: 'dave',
                            password: 'test',
                            apiKey: 'qwe123'    
                        }, 
```

然后在我的 PHP 中：

```
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Credentials: true');
header('Access-Control-Allow-Headers: Authorization,Content-type,username,password,apiKey');

if($_SERVER['REQUEST_METHOD'] == 'POST')
{

    $headers = $_SERVER['HTTP_AUTHORIZATION'];
    $parts = explode(' ', $_SERVER['HTTP_AUTHORIZATION']);

    header('Content-type: application/json');
    print json_encode($parts);

    exit; 
```

返回的 JSON 只是 TRUEREST！PHP没有看到其他任何人。但是，如果我查看网络检查器，它们会被很好地发送。但注意到有两种类型的请求正在发出 POST 和 OPTIONS。

有任何想法吗？

我将这些更新基于我在这里阅读的内容：[https ://github.com/kvz/cakephp-rest-plugin/blob/master/Controller/Component/RestComponent.php#L516](https://github.com/kvz/cakephp-rest-plugin/blob/master/Controller/Component/RestComponent.php#L516)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:18:54.263

首先，您无需担心 PhoneGap 应用程序中的跨域限制。

请记住，执行同源规则的是*浏览器。*您的服务器可能唯一的参与是当不同域上的页面尝试对您服务器上的某些内容发出 XHR 请求时；[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)规范概述了如何处理。如果您使用适当`Access-Control-Allow-Origin`的标头进行响应，则允许 XHR 请求不受限制。

所以在PhoneGap 中，没有浏览器强制执行同源规则——只有PhoneGap 的配置（由您控制​​）。PhoneGap[允许您指定您的应用程序可以访问的域（或所有域）](http://docs.phonegap.com/en/1.8.0/guide_whitelist_index.md.html)。列入白名单后，您的代码将能够不受限制地向这些域发出 XHR 请求。

唯一棘手的是，当使用 jQuery 发出 XHR 请求时，它会尝试将您的请求转换为 JSONP，错误地假设它必须围绕同源规则工作。

要解决此问题，您可以强制 jQuery 始终使用 XHR：

```
$.ajaxSetup({crossDomain:false}); 
```

关于[`Authorization`，这相当简单](http://en.wikipedia.org/wiki/Basic_access_authentication)。客户端发送字符串文字`Basic`、空格，然后是用户名、冒号和 base64 编码的密码。

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 
```

解码 base64 数据产生`Aladdin:open sesame`.

* * *

根据您添加的 jQuery 代码段，您的 HTTP 请求如下所示：

```
POST /form.php HTTP/1.1
Host: example.com
X-Requested-With: XmlHttpRequest
Authorization: TRUEREST
username: dave
password: test
apiKey: qwe123
... 
```

应该很明显为什么`$_SERVER['HTTP_AUTHORIZATION']`只包含`TRUEREST`：其他项目是完全独立的（和无效的）标题。尝试：

```
headers: {
    Authorization: 'X-My-API ' + $.param({
        username: 'dave',
        password: 'test',
        apiKey: 'qwe123'
    })
} 
```

现在您的请求将如下所示：

```
POST /form.php HTTP/1.1
Host: example.com
X-Requested-With: XmlHttpRequest
Authorization: X-My-API username=dave&password=test&apiKey=qwe123
... 
```

*   [`$.param`](http://www.jqapi.com/#p=jQuery.param)将对象序列化为 URL 编码的查询字符串。
*   您可能应该考虑对授权数据进行 base64 编码，就像 HTTP Basic auth 一样。这将确保 HTTP 标头中只有 [A-Za-z0-9+/=]（可打印）字符，从而可能避免安全问题。
*   我对 RFC 的要求并不完全清楚，但按照惯例，HTTP 的非标准扩展通常以*X-*为前缀。由于您的授权方案是非标准的，您应该这样做。
*   `OPTIONS`您看到的请求是 CORS 在工作。如果您在跨域 XHR 请求中指定自定义标头，浏览器首先检查服务器以查看它是否发送`Access-Control-Allow-Origin`标头作为响应（[“预检请求”](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Preflighted_requests)）。只有这样，浏览器才会发送实际`POST`的数据。

# parsing - 如何从 PowerShell 中的字符串中删除所有换行符？

> ID：14592727
> 
> 赞同：11
> 
> 时间：2013-01-29T21:34:32.603
> 
> 标签：parsing, powershell, outlook, powershell-2.0, comobject

这是我用来解析我的电子邮件的代码。如果它们与特定日期匹配，我想将它们添加到其他电子邮件列表中，然后将其制作成一个平面文件：

```
outfile = "C:\Temp\emails.csv"
$olFolderInbox = 6
$ol = new-object -comobject "Outlook.Application"
$mapi = $ol.getnamespace("mapi")
$inbox = $mapi.GetDefaultFolder($olFolderInbox)
$msgs = $inbox.Folders.Item("root")
$list1 = @()
foreach($message in ($msgs.items))
{
    if($message.ReceivedTime -gt $(get-date).adddays(-14))
    {
        $list1 += "$($message.Subject);$($message.ReceivedTime);$($message.Body.Replace("`n",", "))"
    }
}
if(Test-Path $outfile)
{
    Remove-Item $outfile
    Add-Content $outfile $list1
}
else
{
    Add-Content $outfile $list1
} 
```

我遇到的问题是，replace 语句`$message.Body.Replace("`n",", ")`实际上并没有删除换行符，并且文件没有正确创建。有没有办法确认正文部分的全部内容变成单行？

我已经确认该`$message.body`对象是一个字符串，所以我不确定为什么这不起作用。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-05T05:05:18.607

评论者指向 return `r，也许应该单独替换那个[特殊字符。](http://technet.microsoft.com/en-us/library/hh847835.aspx)猜测这可以通过 .replace() 方法和一些正则表达式来完成。或者更简单（我承认我很笨拙）在 $list1 += 行之前使用另一个变量，例如：

```
$bod = $message.body -replace "`n",", " -replace "`r",", " 
```

矫枉过正，但这是一个从头开始的小例子。我建议您添加 $y 以更轻松地操作消息正文。

```
$x = new-object -type psObject
$x | add-member memburr1 -membertype noteproperty -value "no trouble here"
$x | add-member memburr2 -membertype noteproperty -value "uh `n oh `r spaghettio"

$y = $x.memburr2 -replace "`n",", " -replace "`r",", "

$z = @()
$z += "$($x.memburr1);$y" 
```

如果这没有帮助，我会很好奇输出中有问题的换行符之前和之后出现的内容。

编辑：或使用 .replace() 方法两次：

```
$x.memburr2.replace("`n",", ").replace("`r",", ") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-07-12T21:18:09.060

以上都不适合我。起作用的是：

```
$foo = [string]::join("",($foo.Split("`n"))) 
```

# mysql - Django mysql连接太多

> ID：14592729
> 
> 赞同：4
> 
> 时间：2013-01-29T21:34:36.293
> 
> 标签：mysql, django

我将 Django 与 mysql 一起使用，并且遇到了连接太多的问题。

我从命令行运行 python 脚本，但与 Django 模型集成以检查数据库中的数据。该脚本每 30 秒运行一次，我使用线程来控制它。My_function 是检查数据库状态的函数。

```
while True: 
    now = time.time() 
    if now < next: 
        time.sleep(next - now) 
        t = Thread(target=my_function,)
        t.start()# start a thread

    next += interval 
```

问题是当我监控 mysql 服务器时。一直有大约10个连接，而且都在休眠。我只是不明白为什么。有 2 个活动的 python 线程不断运行，所有其他线程在完成后终止。mysql的连接数怎么像10？任何人都可以帮助我吗？非常感谢！

更新1：现在放mysql processlist的截图。连接都处于睡眠模式并且什么都不做，并且创建连接的线程已经终止。这真的很奇怪。

```
+------+------+-----------------+----------+---------+-------+-------+------------------+
| Id   | User | Host            | db       | Command | Time  | State | Info             |
+------+------+-----------------+----------+---------+-------+-------+------------------+
|  411 | root | localhost:47347 | NULL     | Sleep   |     2 |       | NULL             |
|  412 | root | localhost:47350 | NULL     | Sleep   |     3 |       | NULL             |
|  479 | root | localhost       | NULL     | Sleep   | 27164 |       | NULL             |
|  918 | root | localhost       | EZ_Green | Sleep   | 14006 |       | NULL             |
|  953 | root | localhost       | EZ_Green | Sleep   | 12956 |       | NULL             |
|  989 | root | localhost       | EZ_Green | Sleep   | 11874 |       | NULL             |
| 1025 | root | localhost       | EZ_Green | Sleep   | 10796 |       | NULL             |
| 1061 | root | localhost       | EZ_Green | Sleep   |  9716 |       | NULL             |
| 1097 | root | localhost       | EZ_Green | Sleep   |  8636 |       | NULL             |
| 1132 | root | localhost       | EZ_Green | Sleep   |  7586 |       | NULL             |
| 1168 | root | localhost       | EZ_Green | Sleep   |  6506 |       | NULL             |
| 1204 | root | localhost       | EZ_Green | Sleep   |  5426 |       | NULL             |
| 1240 | root | localhost       | EZ_Green | Sleep   |  4346 |       | NULL             |
| 1276 | root | localhost       | EZ_Green | Sleep   |  3266 |       | NULL             |
| 1312 | root | localhost       | EZ_Green | Sleep   |  2186 |       | NULL             |
| 1348 | root | localhost       | EZ_Green | Sleep   |  1106 |       | NULL             |
| 1384 | root | localhost       | EZ_Green | Sleep   |    26 |       | NULL             |
| 1385 | root | localhost       | NULL     | Query   |     0 | NULL  | show processlist |
+------+------+-----------------+----------+---------+-------+-------+------------------+ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-26T04:04:59.760

正如尘埃所说，

> 每个使用 Django ORM 的线程都会创建一个新的数据库连接。并且 Django 不会自动管理由您自己的线程创建的连接。所以你应该管理它。

您可以在每个线程退出之前简单地执行此操作：

```
from django.db import connection

# your work thread method 

def my_function():
    # do something...
    # close the db connection explicitly

    connection.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T22:15:23.370

请看[这个问题](https://stackoverflow.com/questions/3435673/using-django-orm-in-threads-and-avoiding-too-many-clients-exception-by-using-b)

每个使用 Django ORM 的线程都会创建一个新的数据库连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-31T14:41:07.607

尽管这不是特定于您的问题，而是特定于标题，并且可能对其他人有所帮助，但在我的公司中，我们收到了此消息，但无法弄清楚它的来源。回溯后我们发现使用 django 内置的 Site 模型和调试模式会导致很多连接保持打开状态。

我们最终为打开超过 20 分钟的数据库连接设置了超时。

# security - 内置 Flash Player 的 Chrome 发送不正确的 Referer

> ID：14592733
> 
> 赞同：4
> 
> 时间：2013-01-29T21:34:57.780
> 
> 标签：security, google-chrome, http-headers, flash

我发现 chrome 内置 Flash 播放器的行为与以前版本和当前版本的 Adob​​e Flash Player 不同。问题是当我们在我们的网页 ( [http://example.com/page1.html ) 上嵌入一些 swf (](http://example.com/page1.html) [http://example.com/hosted.swf](http://example.com/hosted.swf) ) 并且我们的 swf 加载一些外部资源 ( [http:// example.com/video.flv](http://example.com/video.flv)）请求“REFERER”标头在以前的版本中是“ [http://example.com/page1.html](http://example.com/page1.html) ”，而在 Adob​​e 的版本中是“ [http://example.com/hosted.swf](http://example.com/hosted.swf) ” . 当我们使用 REFERER 标头保护内容以确保使用我们托管的 swf 加载请求的内容时，这会导致问题。

# java - Java 包 - 引用来自不同包的类

> ID：14592738
> 
> 赞同：6
> 
> 时间：2013-01-29T21:35:09.703
> 
> 标签：java, package

在（默认包）中，我有一个名为“Bird”的类，它有一个名为“dialog”的方法。

我可以在同一个包中创建一个名为 Class1 的类，如下所示：

```
public class Class1
{
    public static void main(String[] args) 
    {
        Bird b = new Bird("Alexander",true,5);
        b.dialog("tweet!");
    }
} 
```

这实际上有效，我实际上可以`tweet!`在控制台中看到。

`Class1`我的问题是：如果位于包中`Fundamental` （而类`Bird`位于“默认包”中），我需要在代码中添加什么？我收到一个错误：在这种情况下“无法识别鸟类类型”。我可能应该以某种方式指出包裹。

附带问题： 1\. 什么是类路径以及如何更改它？我已经看到这个术语在几个与包相关的讨论的上下文中被模糊地使用，但没有一个像我刚刚给出的那样有明确的例子。2\. 我多次看到名为 xxx.bla.zzz 的包——这是标准吗？我通常只使用一个通用名称（不是三个用 . 分隔的名称。）我了解包是 Java 替代其他语言中的名称空间。如果有几个值得一提的解决方案解决方案，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T21:39:42.393

你不应该使用默认包，这不是一个好习惯，你不能从默认包中导入类。始终声明您的包结构。

在第一行的类`Bird`中添加：

```
package animals; 
```

在 Class1.java 的第一行写下你的包名

```
package foo;

import animals.Bird; 
```

请注意，为此，类`Bird`和类`Class1`应分别位于文件夹“animals”和文件夹“foo”中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T01:14:17.253

根据 JLS（第 7.5 章。导入声明[http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5)）不可能从默认（未命名）包导入

*未命名包中的类型（第 7.4.2 节）没有规范名称，因此每种导入声明中对规范名称的要求意味着（a）无法导入未命名包中的类型，以及（b）静态成员无法导入未命名包中的类型。因此，第 7.5.1 节、第 7.5.2 节、第 7.5.3 节和第 7.5.4 节都要求在尝试将类型（或其静态成员）导入未命名包中时出现编译时错误。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-29T17:33:22.287

到目前为止提供的解决方案很有帮助，但如果您使用的是 NetBeans，则解决问题要简单得多。转到项目右键单击并选择打开新包。NetBeans 为您提供了一个用于创建新包的对话框。这就是诀窍所​​在，注意：确保您的新项目名称不以与其他包相同的名称开头，以便新包将被唯一标识。例如，给新包一个不同的名称

```
newPackage; 
```

然后，您可以在您希望在其中使用包的类文件上使用 import 语句：

```
import newPackage.SecondClass; 
```

您实际上可以使用代码完成 ctr + spaceBar 来确保包清晰可见。

我希望这很简单。 [看看这个截图](https://i.stack.imgur.com/JGhgv.png)

# java - 我应该在我的情况下使用线程池而不是池吗？

> ID：14592747
> 
> 赞同：1
> 
> 时间：2013-01-29T21:35:40.263
> 
> 标签：java, pool

我有简单的塔防游戏。每个怪物都在自己的线程中移动，因此当新浪潮到来时，大约有 20 个新线程完成（从 10 到 25，随机）。我记得像 executor 类这样的东西，它在存在许多短期线程的情况下很有用。就像我一样。所以我的问题是：

1.  我应该使用线程池吗？它会提高多少性能？
2.  我应该如何实施？pool 应该是一个字段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:37:51.740

我会为每个怪物设置一个 move() 方法并定期调用它。这样你只有一个线程，它应该执行得很好。顺便说一句，如果您愿意，一个线程可以使用 ExecutorService。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:43:24.783

我认为可以安全地假设波之间的间隔超过一秒，不是吗？否则，您的游戏将很难被击败。;-)

如果你产生这么少的线程（15-25 个线程没什么大不了的），我不希望使用线程池会有所作为。就个人而言，我只会使用`new Thread`. 您可以随时切换到[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)更高版本，但我认为您的场景不需要它。

当您编写时，线程池是合理的，例如，必须处理数百个传入请求的 Web 服务器（假设每个请求应在单独的线程中处理）。那么线程池可能会提高性能，但它最重要的优点是它是一种限制资源使用的便捷方式。

为什么？如果您只是在每个请求上生成一个新线程，那么如果同时有许多请求，您可能很快就会耗尽资源。使用具有线程上限的线程池可以防止这种情况发生。

（但是，在不了解您的应用程序细节的情况下，从纯粹的设计角度来看，完全避免线程并将所有游戏逻辑保留在一个线程中绝对是您应该考虑的事情。这会使事情变得更简单。但同样，我不'没有详细信息。）

# jquery - 在下拉列表中选择值并在克隆的下拉框中删除所选值

> ID：14592748
> 
> 赞同：0
> 
> 时间：2013-01-29T21:35:39.623
> 
> 标签：jquery

我有一个带有一些值的下拉选择，以及一个克隆该下拉列表的按钮，因此我可以添加多个下拉列表以在其中设置值。在克隆的下拉列表中选择的值不应该在其他下拉列表中可用，如果我更改选择的值（以防用户改变主意）它应该更新其他下拉列表。我怎样才能用 jquery 完成这个？

```
 <select class="firstCallDropDown" name="contactTypes">
<option value="1">Home</option>
<option value="2">e-mail</option>
<option value="3">Mobile</option>
<option value="4">Mobile2</option>
<option value="5">Work</option>
</select>

<a href ="#" id=addContactNumber>Add</a> 
```

jQuery：

```
$("#calls_column").delegate("#addContactNumber", "click", function(event) {
            var firstDrop = $(".firstCallDropDown:first");
            var clonedDrop = firstDrop.clone();
            clonedDrop.find("option:selected").removeAttr("selected");
            clonedSip.appendTo("#numbers");
            refreshDropdowns();

        });

function refreshDropdowns(){
   var values = $("select[name='contactTypes']");

            $(values).each(function () {
                var text = $(this).children('option:selected').val();
                var options = $("option[value='" + text + "']:not(:selected)");

                $(options).each(function () {
                    $(this).remove();
                });
            });
} 
```

这就是我到目前为止所拥有的！

# c# - 为什么我的 .NET CheckListBox 项目没有被选中？

> ID：14592750
> 
> 赞同：0
> 
> 时间：2013-01-29T21:35:50.073
> 
> 标签：c#, asp.net, .net, checklistbox

我有一个正在编程的 Web 应用程序，它基于用户输入构建 SQL 查询。我目前正在使用一些没有问题的复选框。但是，我没有对复选框进行硬编码，而是`Page_Load`使用以下代码动态填充它们：

```
protected void Page_Load(object sender, EventArgs e)
{
    //init();
    sql.Open();

    if (!Page.IsPostBack)
    {

        SqlCommand cmd = new SqlCommand("SELECT DISTINCT [value] FROM [table]", sql);
        SqlDataReader rdr = cmd.ExecuteReader();
        while (rdr.Read())
            chkLst.Items.Add(rdr[0].ToString());
        rdr.Close();
    }
    sql.Close();
} 
```

填充工作完美。但是，当我尝试检索`chkLst.Items.Selected`属性时，它总是设置为 false，从而使列表无法用于过滤。以下是我在提交时执行的代码的相关部分：

```
foreach (ListItem li in chkLst.Items)
    if (li.Selected)
        cmd += li.Text; 
```

由于 Selected 属性始终为 false，因此我的命令始终为空。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:28:40.020

Someone else had answered my question, but it looks like his answer was deleted, either by him or SO's read-only period today.

The solution was to populate my list in Page_Init instead of Page_Load.

Thanks to the now anonymous respondent!

# javascript - Chrome memory heap is just 10 MB but the task manager shows 500 MB

> ID：14592758
> 
> 赞同：0
> 
> 时间：2013-01-29T21:36:34.013
> 
> 标签：javascript, google-chrome, memory-leaks

I am using chrome's memory profiler to see the heap size. Its always around 10 MB. But my task manager's memory keeps on increasing it reaches more than 1 GB if I leave my website running. Even at this time the heap size in the profiler remains less than 10 MB. However when I close the profiler the memory in the task manager reduces to around 200 MB.

Could someone please explain why the process takes so much of memory when the actual heap size is very less.

Thanks in advance.

Dev.

This is the code:

```
updateChartData : function(priceArr, aKey, time){
    var tickData = tickDataMap[aKey+priceArr[0]];
    var price = parseFloat(priceArr[4]);
    if(tickData == undefined){
        tickData = new Array();
        tickDataMap[aKey+priceArr[0]] = tickData;
    }
    if(tickData.length > 200){
        tickData.splice(0,(tickData.length - 200));
    }
    tickData.push([time,price]);
    drawLiveTickChart(this, key);
}

function drawLiveTickChart(liveTickChart,key){
    var biddata = tickDataMap[key+'0'];
    var offerdata = tickDataMap[key+'1'];
    if(chartComponent !== null && chartComponent !== undefined){
        try {chartComponent.destroy();}catch(ex){alert("Error while drawing the tick chart : " +ex);}
        delete chartComponent;
        chartComponent = null;
    }
    chartComponent = new Highcharts.StockChart({
            chart : {
                renderTo : 'chartholder'

            },
            yAxis: {
                opposite : false
            },
            xAxis: {
                labels : {enabled:false}
            },
            plotOptions:{
                series: {
                    animation: {
                        duration: 0
                    }
                }
            },
            rangeSelector: {
                enabled : false
            },
            exporting : {
                enabled : false
            },
            navigator : {
         enabled : false,
                 height:30
             },
    scrollbar:{
        enabled : false
    },
            tooltip: {
              borderColor:"black",
              style: {
                 color: 'black'
              }
           },
            series : [{
               name : "Bid",
               data: biddata,
               color : '#008080'
            },{
                name : "Offer",
                data: offerdata,
                color : '#02D4D4'
            }
            ]
        });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:45:02.893

看看你的代码，我觉得有几件事很突出。

1.  您是否有意设置`chartComponent`在全球范围内？
2.  在变量上使用`delete`是行不通的。[来自 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)：“`delete`仅对对象的属性有效。它对变量或函数名称没有影响。” 同样来自 MDN：“与普遍看法不同，`delete`操作符与直接释放内存无关”。我只会使用该`.destroy()`方法并将其设置`chartComponent`为null。
3.  您的问题可能在于 Chrome 分析器如何与我无法访问的专有 Highcharts.StockChart 库进行交互。`canvas`Chrome 可以使用库使用的数据（缓存上下文等）做各种事情。当您关闭分析器时，您看到 Chrome 的内存使用量下降这一事实可能意味着这在正常使用场景中不会发生。

## 建议

尝试使用[`.setData()`](http://api.highcharts.com/highstock#Series.setData%28%29) on 方法`chartComponent`来更新数据，而不是创建一个全新的图表。它可能更快，并且会使用更少的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:39:32.270

```
This is the code :

updateChartData : function(priceArr, aKey, time){
                var tickData = tickDataMap[aKey+priceArr[0]];
                var price = parseFloat(priceArr[4]);
                if(tickData == undefined){
                    tickData = new Array();
                    tickDataMap[aKey+priceArr[0]] = tickData;
                }
                if(tickData.length > 200){
                    tickData.splice(0,(tickData.length - 200));
                }
                tickData.push([time,price]);
                drawLiveTickChart(this, key);
            }

function drawLiveTickChart(liveTickChart,key){
        var biddata = tickDataMap[key+'0'];
        var offerdata = tickDataMap[key+'1'];
        if(chartComponent !== null && chartComponent !== undefined){
            try {chartComponent.destroy();}catch(ex){alert("Error while drawing the tick chart : " +ex);}
            delete chartComponent;
            chartComponent = null;
        }
        chartComponent = new Highcharts.StockChart({
                chart : {
                    renderTo : 'chartholder'

                },
                yAxis: {
                    opposite : false
                },
                xAxis: {
                    labels : {enabled:false}
                },
                plotOptions:{
                    series: {
                        animation: {
                            duration: 0
                        }
                    }
                },
                rangeSelector: {
                    enabled : false
                },
                exporting : {
                    enabled : false
                },
                navigator : {
             enabled : false,
                     height:30
                 },
        scrollbar:{
            enabled : false
        },
                tooltip: {
                  borderColor:"black",
                  style: {
                     color: 'black'
                  }
               },
                series : [{
                   name : "Bid",
                   data: biddata,
                   color : '#008080'
                },{
                    name : "Offer",
                    data: offerdata,
                    color : '#02D4D4'
                }
                ]
            });

    } 
```

# python - 在 Python 中获取 HTTP 响应的字符集/编码的好方法

> ID：14592762
> 
> 赞同：30
> 
> 时间：2013-01-29T21:36:39.967
> 
> 标签：python, character-encoding, httprequest, urllib2

寻找一种使用 Python urllib2 或任何其他 Python 库获取 HTTP 响应的字符集/编码信息的简单方法。

```
>>> url = 'http://some.url.value'
>>> request = urllib2.Request(url)
>>> conn = urllib2.urlopen(request)
>>> response_encoding = ? 
```

我知道它有时会出现在“Content-Type”标头中，但该标头还有其他信息，并且它嵌入在我需要解析的字符串中。例如，谷歌返回的 Content-Type 标头是

```
>>> conn.headers.getheader('content-type')
'text/html; charset=utf-8' 
```

我可以使用它，但我不确定格式的一致性。我很确定 charset 可能完全丢失，所以我必须处理这种极端情况。某种字符串拆分操作以从中获取 'utf-8' 似乎必须是做这种事情的错误方法。

```
>>> content_type_header = conn.headers.getheader('content-type')
>>> if '=' in content_type_header:
>>>  charset = content_type_header.split('=')[1] 
```

那种感觉就像是在做太多工作的代码。我也不确定它是否适用于所有情况。有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-29T21:45:28.480

要解析 http 标头，您可以使用[`cgi.parse_header()`](http://docs.python.org/2/library/cgi.html#functions)：

```
_, params = cgi.parse_header('text/html; charset=utf-8')
print params['charset'] # -> utf-8 
```

或者使用响应对象：

```
response = urllib2.urlopen('http://example.com')
response_encoding = response.headers.getparam('charset')
# or in Python 3: response.headers.get_content_charset(default) 
```

一般来说，服务器可能对编码撒谎或根本不报告（默认取决于内容类型），或者编码可能在响应正文中指定，例如，`<meta>`html 文档中的元素或 xml 文档的 xml 声明中。作为最后的手段，可以从内容本身猜测编码。

您可以[`requests`](http://docs.python-requests.org/en/latest/user/quickstart/)用来获取 Unicode 文本：

```
import requests # pip install requests

r = requests.get(url)
unicode_str = r.text # may use `chardet` to auto-detect encoding 
```

或[`BeautifulSoup`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#encodings)解析 html（并转换为 Unicode 作为副作用）：

```
from bs4 import BeautifulSoup # pip install beautifulsoup4

soup = BeautifulSoup(urllib2.urlopen(url)) # may use `cchardet` for speed
# ... 
```

或[`bs4.UnicodeDammit`直接](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#unicode-dammit)用于任意内容（不一定是 html）：

```
from bs4 import UnicodeDammit

dammit = UnicodeDammit(b"Sacr\xc3\xa9 bleu!")
print(dammit.unicode_markup)
# -> Sacré bleu!
print(dammit.original_encoding)
# -> utf-8 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-24T00:29:53.340

如果您碰巧熟悉[Flask](http://flask.pocoo.org/docs/0.10/) / [Werkzeug](http://werkzeug.pocoo.org/docs/0.10/) Web 开发堆栈，您会很高兴知道 Werkzeug 库为这种 HTTP 标头解析提供了答案，并解释了在以下位置未指定内容类型的情况一切，如你所愿。

```
 >>> from werkzeug.http import parse_options_header
 >>> import requests
 >>> url = 'http://some.url.value'
 >>> resp = requests.get(url)
 >>> if resp.status_code is requests.codes.ok:
 ...     content_type_header = resp.headers.get('content_type')
 ...     print content_type_header
 'text/html; charset=utf-8'
 >>> parse_options_header(content_type_header) 
 ('text/html', {'charset': 'utf-8'}) 
```

那么你可以这样做：

```
 >>> content_type_header[1].get('charset')
 'utf-8' 
```

请注意，如果`charset`未提供，则会生成：

```
 >>> parse_options_header('text/html')
 ('text/html', {}) 
```

如果您只提供空字符串或字典，它甚至可以工作：

```
 >>> parse_options_header({})
 ('', {})
 >>> parse_options_header('')
 ('', {}) 
```

因此，它似乎正是您想要的！如果您查看源代码，您会发现他们心中有您的目的：[https ://github.com/mitsuhiko/werkzeug/blob/master/werkzeug/http.py#L320-329](https://github.com/mitsuhiko/werkzeug/blob/master/werkzeug/http.py#L320-329)

```
def parse_options_header(value):
    """Parse a ``Content-Type`` like header into a tuple with the content
    type and the options:
    >>> parse_options_header('text/html; charset=utf8')
    ('text/html', {'charset': 'utf8'})
    This should not be used to parse ``Cache-Control`` like headers that use
    a slightly different format.  For these headers use the
    :func:`parse_dict_header` function.
    ... 
```

希望有一天这对某人有所帮助！:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T23:39:41.590

该[`requests`](http://docs.python-requests.org/en/latest/user/quickstart/#response-content)库使这很容易：

```
>>> import requests
>>> r = requests.get('http://some.url.value')
>>> r.encoding
'utf-8' # e.g. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-21T17:50:18.860

可以通过[多种方式](http://www.w3.org/International/O-charset)指定字符集，但通常在标题中这样做。

```
>>> urlopen('http://www.python.org/').info().get_content_charset()
'utf-8'
>>> urlopen('http://www.google.com/').info().get_content_charset()
'iso-8859-1'
>>> urlopen('http://www.python.com/').info().get_content_charset()
>>> 
```

最后一个没有在任何地方指定字符集，所以`get_content_charset()`返回了`None`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-17T10:25:48.960

要正确（即以类似浏览器的方式 - 我们不能做得更好）解码您需要考虑的 html：

1.  Content-Type HTTP 标头值；
2.  BOM标记；
3.  `<meta>`页面正文中的标签；
4.  Web 中定义的编码名称之间的差异和 Python stdlib 中可用的编码名称；
5.  作为最后的手段，如果一切都失败了，基于统计的猜测是一种选择。

以上所有都在[w3lib.encoding.html_to_unicode](http://w3lib.readthedocs.io/en/latest/w3lib.html#w3lib.encoding.html_to_unicode)函数中实现：它具有`html_to_unicode(content_type_header, html_body_str, default_encoding='utf8', auto_detect_fun=None)`签名并返回`(detected_encoding, unicode_html_content)`元组。

requests、BeautifulSoup、UnicodeDamnnit、chardet 或 flask 的 parse_options_header 都不是正确的解决方案，因为它们在其中一些点上都失败了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-07T11:11:00.773

这对我来说是完美的。我正在使用 python 2.7 和 3.4

```
print (text.encode('cp850','replace')) 
```

# objective-c - 根据另一个距离数组对对象的 nsmutablearray 进行排序

> ID：14592764
> 
> 赞同：3
> 
> 时间：2013-01-29T21:36:40.700
> 
> 标签：objective-c

我有两个 nsmutablearray，一个是距离数组，另一个是包含链接到这些距离的图像的数组。我需要按升序对距离数组进行排序，然后基于此对图像数组进行排序。我试图以距离数组为键制作这两个数组的字典，但是当距离值相同时，在排序后的图像数组中返回相同的图像。谁能帮我解决这个问题。代码如下：

```
 // Put the two arrays into a dictionary as keys and values
    NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:_locationImages forKeys:_distances];
    // Sort the first array
    NSArray *sortedFirstArray = [[dictionary allKeys] sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        if ([obj1 floatValue] > [obj2 floatValue])
            return NSOrderedDescending;
        else if ([obj1 floatValue] < [obj2 floatValue])
            return NSOrderedAscending;
        return NSOrderedSame;
    }];
    // Sort the second array based on the sorted first array
    NSArray *sortedSecondArray = [dictionary objectsForKeys:sortedFirstArray notFoundMarker:[NSNull null]]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T21:51:15.843

您不需要将距离作为关键。只是有一个字典数组。不知何故，这也使排序更容易。

```
NSMutableArray *dataArray = [NSMutableArray array];
for (int i=0; i<distanceArray.count; i++) {
    [dataArray addObject:@{
       @"distance" : distanceArray[i],
       @"image"    : imageArray[i]
    }];
}
NSArray *sorted = [dataArray sortedArrayUsingDescriptors:@[
                   [NSSortDescriptor sortDescriptorWithKey:@"distance"
                                                 ascending:YES]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:50:29.290

您可以将两个数组组合成一个字典数组

```
arrayElement[@"distance"] = @(someDistance);
arrayElement[@"image"] = someImage; 
```

然后对数组进行排序。

# c# - 无法从 WinRT 连接到远程服务器

> ID：14592766
> 
> 赞同：5
> 
> 时间：2013-01-29T21:36:52.213
> 
> 标签：c#, .net, networking, windows-runtime, dotnet-httpclient

我正在制作一个应用程序，它基本上只需要将一段 XML 发送到服务器并返回。我遇到了麻烦但是让这个工作并得到非常奇怪的错误

```
public bool Post(string data)
    {
        string server="http://my-lan-computer:9091/foo"
        bool success = false;
        HttpClient client = new HttpClient();

        try
        {
            client.PostAsync(server, new StringContent(data, Encoding.UTF8, "text/xml")).Wait(); //error here
            success = true;
        } catch { }

        return success;

    } 
```

我发布到的服务器不是本地主机，而是我本地网络上的一台计算机。我得到这个错误深深地嵌套：

```
innerException: {"An error occurred while sending the request."}

innerException: {"Unable to connect to the remote server"}

innerException: {"An attempt was made to access a socket in a way forbidden by its access permissions 123.123.123.123:9091"} 
```

我的应用程序具有 Internet 客户端功能。我可以通过其他商店应用程序访问我的本地网络和互联网。我可以在 Firefox 中访问资源以获得正确的行为。我没有启用防火墙，也没有阻止这些端口的防病毒软件

什么可能导致这个晦涩的错误？我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T04:04:46.670

要访问 LAN，您必须`Private Network`在应用程序清单中声明该功能。请注意，这与`Internet`功能不同。

# css - 更改选定单选按钮标签的样式

> ID：14592768
> 
> 赞同：3
> 
> 时间：2013-01-29T21:37:04.257
> 
> 标签：css, radio-button, label

我试图在表单中选择单选按钮标签时更改它的边框颜色。我发现这个问题几乎正是我想要做的：[CSS - 如何为选定的单选按钮标签设置样式？](https://stackoverflow.com/questions/4641752/css-how-to-style-a-selected-radio-buttons-label)但是当我用自己的代码尝试它时，颜色不会在选择时改变。这让我发疯，我无法弄清楚为什么它不会应用边框颜色 - 非常感谢任何帮助。我已经上传了我正在使用的代码：http: [//jsfiddle.net/SHfr5/](http://jsfiddle.net/SHfr5/)，但我也会在下面包含它。

**HTML**

```
<form name="input" action="/engine/preview.php" enctype="multipart/form-data" id="customizeForm" method="post">
<div id="customize_container">
    <h1>Customize</h1>
    <div id="customize_left">
            <div style="float: left">
            <label for="8dc63f" style="width: 55px;height:55px;background-color:#8dc63f;margin-left:20px;"></label><br/>
            <input type="radio" name="color" id="8dc63f" value="8dc63f" checked />
            </div>
            <div style="float: left">
            <label for="00aeef" style="width: 55px;height:55px;background-color:#00aeef;border:2px solid #000;margin-left:20px;"></label><br/>
            <input type="radio" name="color" id="00aeef" value="00aeef" />
            </div>
            <div style="float: left">
            <label for="ed1c24" style="width: 55px;height:55px;background-color:#ed1c24;border:2px solid #000;margin-left:20px;"></label><br/>
            <input type="radio" name="color" id="ed1c24" value="ed1c24" />
            </div>
            <div style="float: left">
            <label for="f15a29" style="width: 55px;height:55px;background-color:#f15a29;border:2px solid #000;margin-left:20px;"></label><br/>
            <input type="radio" name="color" id="f15a29" value="f15a29" />
            </div>
    </div>
    <div class="clear"></div>
    <input type="submit" value="Preview" />
</div> 
```

**CSS**

```
@charset "utf-8";

.clear {
    clear: both;
}

#customize_container {
    width: 840px;
    clear: both;
}

#customize_left {
    width: 385px;
    float: left;
    margin-top: 35px;
}

#customizeForm input[type=radio] {
    margin: 5px 0px 40px 43px;
}

#customizeForm label {
    display:inline-block;
    border:2px solid #000;
}

#customizeForm input[type=radio]:checked + label {
    border: 2px solid #FFF!important;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:59:59.767

**解决了**

该问题是由于使用了 + CSS 选择器而发生的。'adjacent' 选择器将只选择紧接在前一个元素之前的元素。在这种情况下，标签前面直接有一个选中的单选按钮。我的原始 HTML 在输入之前有标签，为了使用 + 选择器，标签必须在输入之后。

# java - 如何从字符串中获取枚举值？

> ID：14592771
> 
> 赞同：0
> 
> 时间：2013-01-29T21:37:17.623
> 
> 标签：java, enums

假设我有一个枚举，即：

```
public enum FooBar {
  One, Two, Three
} 
```

我想得到一个字符串的相应枚举值，比如说'Two'，然后得到 FooBar.Two。

我怎样才能在 Java 中做到这一点？`Enum.ValueOf()`似乎没有关系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T21:39:01.957

> 我有字符串'Two'，我想要这个值。

为此，您使用`valueOf`例如

```
MyEnum me = MyEnum.valueOf("Two"); 
```

或者

```
MyEnum me = Enum.valueOf(MyEnum.class, "Two"); 
```

> Enum.ValueOf() 似乎不相关。

看来这正是您想要的。

* * *

你可以使用

```
String s = myEnum.toString(); 
```

或者

```
String s = myEnum.name(); 
```

您可以使用`toString()`将任何对象转换为字符串。（该字符串是否有意义取决于实现；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:39:10.480

使用不同的枚举构造。像这样的东西（我在我的代码中使用它）：

```
enum ReportTypeEnum {
    DETAILS(1,"Details"),
    SUMMARY(2,"Summary");

    private final Integer value;
    private final String label;

    private ReportTypeEnum(int value, String label) {
        this.value = value;
        this.label = label;
    }

    public static ReportTypeEnum fromValue(Integer value) {
        for (ReportTypeEnum e : ReportTypeEnum.values()) {
            if (e.getValue().equals(value)) {
                return e;
            }
        }
        throw new IllegalArgumentException("Invalid Enum value = "+value);
    }

    public String getDisplayName() {
        return label;
    }

    public Integer getValue() {
        return value;
    }
} 
```

将`getDisplayName()`返回 ENUM 的字符串表示形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T21:49:39.447

```
Enum.valueOf(FooBar.class, nameOfEnum); 
```

`nameOfEnum`字符串“一”、“二”等在哪里？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T22:13:34.133

尝试以下代码：

```
enum FooBar
{
    One,Two,Three;
}
public class EnumByName
{
    public static void main(String stp[])
    {
        String names[] = {"One","Two","Three"};
        for (String name : names)
        {
            FooBar fb = Enum.valueOf(FooBar.class,name);
            System.out.println(fb);
        }

    }
} 
```

# html - List Items being rendered in the same spot instead of vertically/horizontally

> ID：14592772
> 
> 赞同：0
> 
> 时间：2013-01-29T21:37:27.547
> 
> 标签：html, css

I'm curious as to what in my styling is causing this issue. I have three columns in each colcontainer, and all the `<li>`s are jumbling into each other like it was position: absolute. I just want them to stack vertically like they normally do. Anyone have any ideas?

CSS:

```
#slider .colcontainer {
    width: 600px;
    height: 200px;
    background: red;
    float: left;
    padding: 0;
    margin: 0;
}
#slider .col1 {
    width: 30%;
    margin-left: 1.5%;
    margin-right: 1.5%;
    background: blue;
    float: left;
    position: relative;
}
#slider .col1 ul {
    list-style: none;
    padding: 0;
    float: none;
} 
```

HTML:

```
<div class="colcontainer">
                    <div class="col1">
                        <ul>
                            <li>Test</li>
                            <li>Test</li>
                            <li>Test</li>
                        </ul>
                    </div>
                    <div class="col1">
                        <ul>
                            <li>Test</li>
                            <li>Test</li>
                            <li>Test</li>
                        </ul>
                    </div>
                    <div class="col1">
                        <ul>
                            <li>Test</li>
                            <li>Test</li>
                            <li>Test</li>
                        </ul>
                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:42:12.060

You don't have #slider in your code, so your styles are not applied.

[http://jsfiddle.net/EZx3b/](http://jsfiddle.net/EZx3b/)

```
.colcontainer {
    width: 600px;
    height: 200px;
    background: red;
    padding: 0;
    margin: 0;
}
.col1 {
    width: 30%;
    margin-left: 1.5%;
    margin-right: 1.5%;
    background: blue;
    float: left;
    overflow: auto;
}
.col1 ul {
    list-style: none;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:40:47.840

我将从设置开始：

```
#slider li {
  display:block;
  position:static;
} 
```

如果这不起作用，您应该在 Firebug 或 Chrome Inspector 中检查该元素，并查看哪些规则覆盖了它并弄乱了显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:43:52.773

我又把你包起来`colcontainer`了`div#slider`，但到目前为止没有问题。三列三项。

见[JSFiddle](http://jsfiddle.net/64GnT/)

# logging - Windows 中的 Nginx $request_time 和 $upstream_response_time

> ID：14592773
> 
> 赞同：5
> 
> 时间：2013-01-29T21:37:30.010
> 
> 标签：logging, nginx

我在 Windows 上运行 Nginx 的访问日志中遇到了一些奇怪的问题。我在访问日志中包含了 $request_time 以及 $upstream_response_time（将 Django 作为 fcgi 上游运行）。据我了解，日志应该以毫秒为单位表示请求时间，但它的输出如下所示：

```
ip|date|request_time|upstream_response_time
xx.xx.xx.xxx|[29/Jan/2013:15:29:57 -0600]|605590388736.19374237|0.141
xx.xx.xx.xxx|[29/Jan/2013:15:30:39 -0600]|670014898176.19374237|0.156 
```

知道这个巨大的数字到底是什么！？

这是完整的日志格式（我在上面的例子中删除了几列）

```
log_format  main  '$remote_addr|$time_local]|$request|$request_time|$upstream_response_time|'
                  '$status|$body_bytes_sent|$http_referer|'
                  '$http_user_agent'; 
```

使用管道分隔符。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T18:56:23.273

因此，正如您所建议的，答案来了：

当您以GET 形式向服务器 ( `nginx`+ ) 发出请求时，结果会产生正常且可接受的值。发生这种情况是因为您的上游服务器没有参与其中，即使它参与了它也可以正常进行。`upstream``$request_time`

当您执行 POST 请求时，问题就开始了。根据 nginx doc`$request_time`变量的值（仅在日志记录时可用）将在所有数据已发送且连接已关闭（也由所有上游和代理）时计算。然后才将信息附加到日志中。

那么如何检查一切是否正确呢？首先向您的服务器发出 GET 请求并查看日志文件。注意完成通话并将日志信息添加到文件中真正需要多少时间 - 它应该是真正的价值。接下来向您的服务器发出 POST 请求并再次查看日志文件。在这里，您可能会看到日志根本没有出现或在很长一段时间后没有出现。

这是什么意思？检查你的 nginx conf 和你的上游 conf，因为某处可能是连接没有关闭的地方，只是挂在空中。您的操作系统或上游服务器可能会在一段时间后更新这些连接，但毕竟它可能会导致一些问题，而不仅仅是奇怪的`$request_time`值。

# java - Cant run java to send email in linux. .NoClassDefFoundError javax/mail/Authenticator

> ID：14592775
> 
> 赞同：0
> 
> 时间：2013-01-29T21:37:36.743
> 
> 标签：java, linux, jar

Im trying to run in a Linux Server with Tomcat a simple java to send emails.

I have the myClass.java and the mail.jar on a directory

I already did:

```
# javac -cp mail.jar myClass.java 
```

and return no error, but...

when I try to run it like this:

```
# java myClass 
```

I get this error:

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/mail/Authenticator
Caused by: java.lang.ClassNotFoundException: javax.mail.Authenticator
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: myClass. Program will exit. 
```

Its strange, beacuse I run it exactly like that on Windows and it works. I also try to do a simple class with just a System.out inside and it run,

but i dont know why im not getting the Authenticator class, if I already check that it is contain in the mail.jar

Im using java 1.6.0_22

thanks! ^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:40:48.407

您包含`mail.jar`在您的类路径中以编译它，您还应该在运行该类时包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:45:21.180

默认情况下，当您使用**java MyClass**等命令在命令行中运行 java 程序时，您正在运行 Java SE（标准版）环境。另一个流行的环境是 Java EE（企业版）。

您的程序抱怨的类 (javax.mail.authentication) 来自 Java EE 包，并且在您的运行时绝对不存在

您可以编译代码的事实必须意味着在您的 Eclipse 构建路径（如果您使用 Eclipse）上的某个地方存在一个依赖 jar，而您的运行时中没有包含该依赖 jar（例如：mail.jar）

您需要运行程序以使依赖项在运行时可用，例如：

```
java -jar /path/to/mail.jar MyClass 
```

或者在 Java EE 环境中运行您的程序

# qml - BB 10 Cascades qml sending a simple email

> ID：14592780
> 
> 赞同：5
> 
> 时间：2013-01-29T21:38:02.770
> 
> 标签：qml, blackberry-10, blackberry-cascades

I found one example in the the git hub for BB 10 for sending an email, but it looks pretty complicated and alot done in C.

does anyone have an example on how to send a quick email using QML. I don't need any buttons or text fields, just hard coded values.

I found this simple snip, but dont' know how to integrate it.

[https://developer.blackberry.com/cascades/documentation/device_platform/pim/messages.html](https://developer.blackberry.com/cascades/documentation/device_platform/pim/messages.html)

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-11T05:57:02.933

以下代码将打开一个带有电子邮件编辑器的工作表，其中预先填充了所有指定的电子邮件字段：

```
import bb.cascades 1.0

Page {
    Container {
        horizontalAlignment: HorizontalAlignment.Fill
        layout: DockLayout {
        }

        Container {
            horizontalAlignment: HorizontalAlignment.Center
            verticalAlignment: VerticalAlignment.Center
            TextArea {
                id: emailBody
            }
            Button {
                text: "Send email"
                onClicked: {
                    emailInvocation.query.uri = "mailto:someemailadress@cookbook.xyz?subject=Test&body=" + emailBody.text
                    emailInvocation.query.updateQuery();
                }
            }
        }
    }

    attachedObjects: [
        Invocation {
            id: emailInvocation
            query.mimeType: "text/plain"
            query.invokeTargetId: "sys.pim.uib.email.hybridcomposer"
            query.invokeActionId: "bb.action.SENDEMAIL"
            onArmed: {
                emailInvocation.trigger(emailInvocation.query.invokeActionId);
            }
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:46:18.170

在创建 QmlDocument 后的 main.cpp 中，qml-> [setContextProperty](https://developer.blackberry.com/cascades/reference/bb__cascades__qmldocument.html#setcontextproperty) ("yourshortcut", object);

```
void xxx::invokeEmail(){
InvokeManager invokeManager;
InvokeRequest request;
request.setTarget("sys.pim.uib.email.hybridcomposer");
request.setAction("bb.action.COMPOSE");
request.setMimeType("message/rfc822");

InvokeTargetReply *reply = invokeManager.invoke(request);
if(reply) {
    reply->setParent(this);
    QObject::connect(reply, SIGNAL(finished()),this, SLOT(onInvokeResult()));
    _invokeTargetReply = reply;
}
delete reply;
}

void xxx::onInvokeResult()
{
// Check for errors
switch(_invokeTargetReply->error()) {
// Invocation could not find the target
// did we use the right target ID?
case InvokeReplyError::NoTarget: {
    qDebug() << "invokeFinished(): Error: no target" << endl;
    break;
}
// There was a problem with the invoke request
// did we set all the values correctly?
case InvokeReplyError::BadRequest: {
    qDebug() << "invokeFinished(): Error: bad request" << endl;
    break;
}
// Something went completely
// wrong inside the invocation request
// Find an alternate route :(
case InvokeReplyError::Internal: {
    qDebug() << "invokeFinished(): Error: internal" << endl;
    break;
}
//Message received if the invoke request is successful
default:
    qDebug() << "invokeFinished(): Invoke Succeeded" << endl;
    break;
}

// A little house keeping never hurts...
delete _invokeTargetReply;
} 
```

然后在 QML 中使用您使用上下文属性创建的快捷方式调用 C++ 函数 invokeEmail。我用它来调用电子邮件卡

# c# - Json 序列化类型对象时检测到循环引用

> ID：14592781
> 
> 赞同：23
> 
> 时间：2013-01-29T21:38:07.033
> 
> 标签：c#, json, dto

上课：

```
public class Parent
{
    public int id {get; set;}
    public int name {get; set;}

    public virtual ICollection<Child> children {get; set;}
}

[Table("Child")]
public partial class Child
{
    [Key]
    public int id {get; set;}
    public string name { get; set; }

    [NotMapped]
    public string nickName { get; set; }
} 
```

和控制器代码：

```
List<Parent> parents = parentRepository.Get();
return Json(parents); 
```

它适用于 LOCALHOST，但不适用于实时服务器：

> 错误：**序列化类型对象时检测到 Json 循环引用**

我进行了搜索并找到了该`[ScriptIgnore]`属性，因此我将模型更改为

```
using System.Web.Script.Serialization;

public class Parent
{
    public int id {get; set;}
    public int name {get; set;}

    [ScriptIgnore]
    public virtual ICollection<Child> children {get; set;}
} 
```

但是在实时服务器（win2008）上也会出现同样的错误。

如何避免该错误并成功序列化父数据？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-29T21:53:13.620

试试下面的代码：

```
return Json(
    parents.Select(x => new {
        id = x.id,
        name = x.name,
        children = x.children.Select(y => new {
            // Assigment of child fields
        })
    })); 
```

...或者如果您只需要父属性：

```
return Json(
    parents.Select(x => new {
        id = x.id,
        name = x.name
    })); 
```

*这并不是问题的真正解决方案，但它是序列化 DTO 时的常见解决方法......*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T21:41:26.467

我有一个类似的问题，同样我无法解决根本问题。我认为服务器正在使用与 localhost 不同的 dll 来通过 json.encode 转换为 json。

我确实在这里发布了问题和我的解决方案[使用 Json.Encode 序列化时检测到循环引用](https://stackoverflow.com/questions/18090961/a-circular-reference-was-detected-while-serializing-with-json-encode)

我用 mvchelper 解决了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-18T10:36:31.877

您可以使用此代码而不使用选择扩展功能来过滤您的列。

```
var list = JsonConvert.SerializeObject(Yourmodel,
    Formatting.None,
    new JsonSerializerSettings() {
        ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore
});
return list; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-14T12:03:53.043

我正在使用修复，因为在 MVC5 视图中使用 Knockout。

在行动

```
return Json(ModelHelper.GetJsonModel<Core_User>(viewModel)); 
```

功能

```
 public static TEntity GetJsonModel<TEntity>(TEntity Entity) where TEntity : class
    {
        TEntity Entity_ = Activator.CreateInstance(typeof(TEntity)) as TEntity;
        foreach (var item in Entity.GetType().GetProperties())
        {
            if (item.PropertyType.ToString().IndexOf("Generic.ICollection") == -1 && item.PropertyType.ToString().IndexOf("SaymenCore.DAL.") == -1)
                item.SetValue(Entity_, Entity.GetPropValue(item.Name));
        }
        return Entity_;  
    } 
```

# mod-rewrite - 忽略 Mod_Rewrite 中的主目录

> ID：14592785
> 
> 赞同：0
> 
> 时间：2013-01-29T21:38:38.917
> 
> 标签：mod-rewrite

我正在等待重写这样的域：`http://domain.com/USER`oa domain like this `http://domain.com/viewer/user.php?username=USER`。

但如果用户名为空，则忽略该规则并将其保留在主页上。

这是我现在拥有的：

```
RewriteRule ^([^/]*)$ /viewer/user.php?username=$1 [L] 
```

但它将主页视为用户。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:15:57.250

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !user\.php
RewriteCond %{REQUEST_URI}  ^/([^/]+)           [NC]
RewriteRule  .*    viewer/user.php?username=%1  [L] 
```

静默地图

`http://domain.com/USER`

到：

`http://domain.com/viewer/user.php?username=USER`

`viewer`和`user.php`是固定字符串，而`USER`不是并且可以是任何名称。

# apache - Rewriting directory-like URL-suffix as GET-parameter

> ID：14592787
> 
> 赞同：1
> 
> 时间：2013-01-29T21:38:41.083
> 
> 标签：apache, mod-rewrite

Given the following setting I would like to do a mod_rewrite which I can not get to work:

I have a domain e.g. "example.org" pointing to a directory in a shared hosting environment e.g. `example/` with the following file structure:

```
example/
    index.php
    .htaccess 
```

Now a URL like `example.org/test` should be rewritten to `example.org/index.php?p=test`. What I came up with is the following:

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z]+)$ index.php?p=$1 [L,QSA] 
```

Unfortunately opening e.g. `example.org/test` in Firefox results in the following error:

**The page isn't redirecting properly**

Firefox has detected that the server is redirecting the request for this address in a way that will never complete.

*   This problem can sometimes be caused by disabling or refusing to accept cookies.

It works though, if I prefix the matching part like this:

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^prefix/([a-z]+)$ index.php?p=$1 [L,QSA] 
```

Then I can open e.g. `example.org/prefix/test` and am served with `index.php?p=test` although additional resources like CSS and JavaScript are not correctly referenced.

Who can help?

# javascript - need to set language in dijit.form.DateTextBox

> ID：14592788
> 
> 赞同：1
> 
> 时间：2013-01-29T21:38:51.210
> 
> 标签：javascript, dojo

im trying to generate dynamically a calendar control with dojo 1.5 and set the calendar language to spanish, but with no luck. I tried using the lang:"es-es" with no luck among other things... here is the element:

```
<input type="text" constraints="{datePattern:'yyyy-MM-dd', strict:true}" name="$name"      id="$name" value="" dojotype="dijit.form.DateTextBox">"; 
```

thanks in advance!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:09:10.960

您需要在 dojo 配置上设置语言环境

```
<script src="path_to_dojo" 
    data-dojo-config="parseOnLoad: true, locale: 'es-es'" /> 
```

Dojo 1.5 -> [http://jsfiddle.net/cswing/ecLn2/](http://jsfiddle.net/cswing/ecLn2/)

道场 1.8 -> [http://jsfiddle.net/cswing/5Mw8U/](http://jsfiddle.net/cswing/5Mw8U/)

[http://dojotoolkit.org/reference-guide/1.8/quickstart/internationalization/specifying-locale.html#quickstart-internationalization-specifying-locale](http://dojotoolkit.org/reference-guide/1.8/quickstart/internationalization/specifying-locale.html#quickstart-internationalization-specifying-locale)

# iphone - 如果我不想在 viewDidLoad() 中创建实例和设置委托，但在某些方法中，正确定位委托？

> ID：14592789
> 
> 赞同：0
> 
> 时间：2013-01-29T21:38:52.170
> 
> 标签：iphone, xcode, delegates

如果我不想在 viewDidLoad() 中创建实例和设置委托但在某些方法中，如何正确定位委托？一切正常，但收到警告。

```
// ViewController.m    
// Warning: Assigning to 'id'<UINavigationControllerDelegate,UIImagePickerControllerDelegate> from incomplatible type 'ViewController *const __strong

-(void)takeMedia:(UIButton *)sender
{  
  mypicker = [UIImagePickerController new];
  mypicker.delegate = self; // <<<----
  mypicker.sourceType = UIImagePickerControllerSourceTypeCamera;
  [self presentViewController:mypicker animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:43:30.153

确保您已将两个代表都包含在头文件中，例如

```
@interface MyViewController <UINavigationControllerDelegate,UIImagePickerControllerDelegate> 
```

# jquery - 根据是否更改 jQuery 将输入值分配给数组

> ID：14592794
> 
> 赞同：0
> 
> 时间：2013-01-29T21:39:08.783
> 
> 标签：jquery, input, attributes, onchange

我找不到任何东西，但我觉得以前有人问过它。

我有多个输入：

```
<input id="id1" class="abc" name="tags" "value="test1" />
<input id="id2" class="abc" name="tags" "value="test2" /> 
```

当用户更改输入的值时，我希望脚本将其拾取并将其分配到数组中。

是）我有的：

```
jQuery('.abc').change(function() {
        var id = jQuery(this).attr('id');
        var name = jQuery(this).attr('name');
        var value = jQuery(this).val();
        var ch = {};
        ch[id][name] = value;
        alert(ch[id][name]);
    }); 
```

但从一开始，它就没有奏效。`jQuery(this).attr('id')`不作为函数存在。我认为这不起作用的原因是因为我没有打电话给特定的班级，但我不知道。也许我一直盯着代码太多，但它不起作用！

错误：`can't convert undefined to object`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:08:10.890

您需要为`ch[id]`

```
jQuery('.abc').change(function () {
  var id = jQuery(this).attr('id');
  var name = jQuery(this).attr('name');
  var value = jQuery(this).val();
  var ch = {};
  ch[id] = {}; // <-- here
  ch[id][name] = value;
  alert(ch[id][name]);
}); 
```

[http://jsfiddle.net/tq2CJ/](http://jsfiddle.net/tq2CJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:46:24.677

在您的情况下，'this' 指向 function() 而不是您的 jQuery('.abc') 实例，如您所料。请参阅[http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)以获得对此的解释。

# javascript - 对象数组按元素分组？

> ID：14592799
> 
> 赞同：6
> 
> 时间：2013-01-29T21:39:29.430
> 
> 标签：javascript, jquery

请看这个例子：[JsFiddle](http://jsfiddle.net/minagabriel/nayS7/)

问：我有以下`JSON Array`

```
y= [ {"LngTrend":15,"DblValue":10,"DtmStamp":1358226000000},     
{"LngTrend":16,"DblValue":92,"DtmStamp":1358226000000},    
{"LngTrend":17,"DblValue":45,"DtmStamp":1358226000000},
{"LngTrend":18,"DblValue":87,"DtmStamp":1358226000000},

{"LngTrend":15,"DblValue":10,"DtmStamp":1358226060000},
{"LngTrend":16,"DblValue":87,"DtmStamp":1358226060000},
{"LngTrend":17,"DblValue":45,"DtmStamp":1358226060000},
{"LngTrend":18,"DblValue":92,"DtmStamp":1358226060000} ] 
```

我试图通过`DtmStamp`最终得到这样的东西来对这些对象进行分组：

```
 x =  [[1358226000000,10,92,45,87],[1358226060000,10,87,45,92], .......] 
```

换句话说：

```
x[0][0] = y[0].DtmStamp ;
x[0][1] = y[0].LngTrend ;
x[0][2] = y[1].LngTrend ;
x[0][3] = y[2].LngTrend ; 
x[0][4] = y[3].LngTrend ; 
```

不幸的是，它以我不想要的东西结束。

这是我到目前为止所尝试的：

```
 var dataTrendArray = [];
           $.each(x, function (index, value) {
                var trendArray = [];
                if (index % 4 == 0) {
                    trendArray.push(x[index].DtmStamp);
                    for (var i = 0; i < 4; i++) {
                        index = eval(index + i);
                        trendArray.push(x[index].DblValue);
                    }
                }

               console.log(trendArray) ;
                dataTrendArray.push(trendArray);
            }); 
```

有人可以帮助我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T21:54:12.440

您可以将 JavaScript 对象用作类似于地图的键/值数据结构。属性名称将作为键，而属性值将作为值。这将允许您进行分组。

```
var y = [
     {"LngTrend":15,"DblValue":10,"DtmStamp":1358226000000},     
     {"LngTrend":16,"DblValue":92,"DtmStamp":1358226000000},    
     {"LngTrend":17,"DblValue":45,"DtmStamp":1358226000000},
     {"LngTrend":18,"DblValue":87,"DtmStamp":1358226000000},
     {"LngTrend":15,"DblValue":10,"DtmStamp":1358226060000},
     {"LngTrend":16,"DblValue":87,"DtmStamp":1358226060000},
     {"LngTrend":17,"DblValue":45,"DtmStamp":1358226060000},
     {"LngTrend":18,"DblValue":92,"DtmStamp":1358226060000},
];

var x = {};

for (var i = 0; i < y.length; ++i) {
    var obj = y[i];

    //If a property for this DtmStamp does not exist yet, create
    if (x[obj.DtmStamp] === undefined)
        x[obj.DtmStamp] = [obj.DtmStamp]; //Assign a new array with the first element of DtmStamp.

    //x will always be the array corresponding to the current DtmStamp. Push a value the current value to it.
    x[obj.DtmStamp].push(obj.DblValue);
}

console.log(x); //x is now an object grouped by DtmStamp. You can easily turn it back into an array here. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T21:53:02.227

您应该使用[哈希](http://www.mojavelinux.com/articles/javascript_hashes.html)。哈希将允许您轻松索引所有`DblValue`值`DtmStamp`。这是一个完整的工作示例：

[**jsFiddle**](http://jsfiddle.net/4KkPc/)

```
var y = [ {"LngTrend":15,"DblValue":10,"DtmStamp":1358226000000},     
{"LngTrend":16,"DblValue":92,"DtmStamp":1358226000000},    
{"LngTrend":17,"DblValue":45,"DtmStamp":1358226000000},
{"LngTrend":18,"DblValue":87,"DtmStamp":1358226000000},
{"LngTrend":15,"DblValue":10,"DtmStamp":1358226060000},
{"LngTrend":16,"DblValue":87,"DtmStamp":1358226060000},
{"LngTrend":17,"DblValue":45,"DtmStamp":1358226060000},
{"LngTrend":18,"DblValue":92,"DtmStamp":1358226060000} ];

var x = {};

var i = 0;
while(i++ < y.length) {
    var key = y[i].DtmStamp.toString();
    if (typeof(x[key]) == "undefined") x[key] = [];
    x[key].push(y[i].DblValue);
}

alert(JSON.stringify(x)); 
```

关键是对要分组的值使用散列。

结果：

```
{
    "1358226060000": [
        92,
        45,
        87,
        10
    ],
    "1358226000000": [
        87,
        45,
        92,
        10
    ]
} 
```

`if/then`如果你想防止重复，你可以通过添加逻辑来做到这一点`indexOf()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:28:40.080

`trendArray`即使未填充 ( `index % 4 != 0`)，您的代码也会推送空s。相反，使用这个：

```
var dataTrendArray = [];
for (var i = 0; i < x.length; i += 4) {
    var trendArray = [ x[i].DtmStamp ];
    for (var j = i, l = Math.max(i + 4, x.length); j < l; j++) {
        trendArray.push(x[j].DblValue);
    }
    // console.log(trendArray) ;
     dataTrendArray.push(trendArray);
} 
```

`DtmStamp`但是，如果您只是使用as 键将 trendArrays 分组到一个对象中，它可能会更合适：

```
var dataTrend = {};
for (var i=0; i<x.length; i++) {
    var key = x[i].DtmStamp;
    if (key in dataTrend)
        dataTrend[key].push(x[i].DblValue);
    else
        dataTrend[key] = [ x[i].DblValue ];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T22:35:41.613

您可以构建一个由 DtmStamp 索引的稀疏数组。

```
var x = [];
$.each(y, function(i, obj) {
    var s = obj.DtmStamp;
    if(!x[s]) x[s] = [];
    x[s].push(obj.DblValue);
});

//x is now a sparse array, indexed by DtmStamp 
```

与对象相比，这具有优势，即数组元素按 DtmStamp 顺序排列。

```
//To loop through x
for(i in x) {
    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-20T05:39:26.100

```
 var y = [
   {"LngTrend":15,"DblValue":10,"DtmStamp":1358226000000},     
   {"LngTrend":16,"DblValue":92,"DtmStamp":1358226000000},    
   {"LngTrend":17,"DblValue":45,"DtmStamp":1358226000000},
   {"LngTrend":18,"DblValue":87,"DtmStamp":1358226000000},
   {"LngTrend":15,"DblValue":10,"DtmStamp":1358226060000},
   {"LngTrend":16,"DblValue":87,"DtmStamp":1358226060000},
   {"LngTrend":17,"DblValue":45,"DtmStamp":1358226060000},
   {"LngTrend":18,"DblValue":92,"DtmStamp":1358226060000},
 ];
var x = {};

for(var k in y){
  if(x[y[k]["DtmStamp"]] == undefined)
     x[y[k]["DtmStamp"]] = [];
     x[y[k]["DtmStamp"]].push(y[k]["DblValue"])
}
alert(JSON.stringify(x))
console.log(x); 
```

见[http://plnkr.co/edit/511sKSdzHGYuvpYqKCPD?p=preview](http://plnkr.co/edit/511sKSdzHGYuvpYqKCPD?p=preview)

# arrays - 将数组传递给相关帖子的 WPDB 查询

> ID：14592805
> 
> 赞同：0
> 
> 时间：2013-01-29T21:39:43.100
> 
> 标签：arrays, wordpress

我在下面有以下代码。我知道这不是获取相关帖子的最有效方式。我是查询数据库的新手，有没有办法在其中抛出一个数组来查询可以选择的多个术语？而不是我现在正在做的事情，只是抓住数组的第一个键。

```
<?php
// Get The Related Term
$terms = array();
foreach(wp_get_object_terms($post->ID, 'series') as $term){
    $terms[] = $term->slug;
};

// Grab The First Term From The Array
$related_term = array_shift(array_values($terms));

// Query The Related Posts
$related_posts = $wpdb->get_results( 
    "
    SELECT * 
    FROM $wpdb->posts
    LEFT JOIN $wpdb->term_relationships ON($wpdb->posts.ID = $wpdb->term_relationships.object_id)
    LEFT JOIN $wpdb->term_taxonomy ON($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
    LEFT JOIN $wpdb->terms ON($wpdb->term_taxonomy.term_id = $wpdb->terms.term_id)
    WHERE $wpdb->posts.post_type = 'sermon' 
    AND $wpdb->posts.post_status = 'publish'
    AND $wpdb->term_taxonomy.taxonomy = 'series'
    AND $wpdb->terms.slug = '$related_term'
    AND $wpdb->posts.ID <> $post->ID
    ORDER BY $wpdb->posts.post_date DESC
    "
);
foreach ($related_posts as $related) {
    echo '<li><a href="'.get_permalink($related->ID).'">'.get_the_title($related->ID).'</a></li>';
};
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:03:21.720

实际上，有一种方法可以以更合适的方式从不同的术语中获取帖子。看看这个简单的例子

```
$related_posts = get_posts(array(
    'posts_per_page' => -1, // all posts
    'post_type' => 'sermon',
    'post_status' => 'publish',
    'post__not_in' => array($post->ID),
    'tax_query' => array(
            array(
                'taxonomy' => 'series',
                'field' => 'slug', // or id
                'terms' => $term1->slug // or id
                'include_children' => false // do no include the posts in the child terms
            ),
            array(
                'taxonomy' => 'series',
                'field' => 'slug', // or id
                'terms' => $term2->slug // or id
                'include_children' => false // do no include the posts in the child terms
            ), //etc...
    )
)); 
```

您所要做的就是获取当前帖子和循环的所有条款，并将它们推送到 get_posts tax_query 数组。

# php - 在 Codeigniter 中的哪里放置导出代码？

> ID：14592807
> 
> 赞同：0
> 
> 时间：2013-01-29T21:39:48.513
> 
> 标签：php, codeigniter

我有一个或多或少显示表格的 CI 应用程序。在这些页面上，我使用 PHPExcel 来导出结果。现在，控制器中的逻辑如下所示：

```
if( $this->input->get('export') == 1 ) {

    // Get Data
    // Load up library stuff
    // Prompt for download

    die();

}

$this->load->view('index'); 
```

它有点复杂，您可以选择 CSV/XLS 等，但简而言之就是这样。由于此代码将重复，我想将其作为其他地方的方法，该方法采用一系列设置，例如文件名和类型。它似乎不仅仅是一个帮手。

这是我第一次使用私有控制器方法吗？如果是这样，那会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:46:13.497

如果您需要在多个地方使用此功能，那么您正在寻找一个 Helper。但是，如果可以将功能分解为多种方法，那么您可能正在寻找库。

在我看来，Helper 文件是一组相关的函数，可以从应用程序的任何位置调用。但是，这些函数有点自治——这意味着它们可以彼此分开调用。因此，“日期”助手将是一个很好的例子。您将有单独的函数来以不同的方式格式化日期。真的不需要构造函数，设置，拆除等。

另一方面，库比助手更封装。您可能需要运行构造函数并根据您可能传递给构造函数的任何变量调用不同的方法。

库是面向对象的，因此它似乎符合您的需求。

私有控制器方法实际上就像辅助函数一样，但不需要从任何地方调用——它们只适用于同一控制器中的控制器方法。

我会创建一个库并使用它。

# c# - 创建一个虚拟 HWND 以传递给 Direct3D

> ID：14592809
> 
> 赞同：3
> 
> 时间：2013-01-29T21:39:57.103
> 
> 标签：c#, c++, directx, sharpdx

我正在尝试使用 SharpDX 将[D3DImage 示例](http://msdn.microsoft.com/en-us/library/vstudio/cc656710.aspx)转换为纯 C#。Direct3D 需要一个 HWND 来初始化，这就是它在 C++ 中的完成方式：

```
WNDCLASSEX g_wc = { sizeof(WNDCLASSEX), CS_CLASSDC, nullptr, 0L, 0L,
      GetModuleHandle(nullptr), nullptr, nullptr, nullptr, nullptr, L"Foo", nullptr };
HWND g_windowHandle;

// Create invisible window to get HWND
RegisterClassEx(&g_wc);
g_windowHandle = CreateWindow(L"Foo", L"Foo", WS_OVERLAPPEDWINDOW, 
    0, 0, 0, 0, nullptr, nullptr, nullptr, nullptr);

    // then eventually we can create the device
Direct3DCreate9Ex(D3D_SDK_VERSION, &m_d3d);
m_d3d->CreateDeviceEx(D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, g_windowHandle,
    vertexProcessing | D3DCREATE_MULTITHREADED | D3DCREATE_FPU_PRESERVE,
    &d3dpp, nullptr, &m_d3dDevice); 
```

在 C# 中获得这个虚拟 HWND 的最佳方法是什么？它必须不同于主窗口的 HWND。我的应用程序是一个 WPF 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:59:30.630

的文档`IDirect3D9Ex::CreateDeviceEx`说，`HWND`如果您处于窗口模式并且您的结构中的演示文稿已设置（后期编辑：哎呀，不能为空白），则该参数`HWND`是`D3DPRESENT_PARAMETERS`可选*的*。

来自[IDirect3D9Ex::CreateDeviceEx @ MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174302.aspx)

> hFocusWindow [in]
> 类型：HWND
> 当应用程序从前台模式切换到后台模式时，焦点窗口会向 Direct3D 发出警报。对于全屏模式，指定的窗口必须是顶级窗口。对于窗口模式，仅当 pPresentationParameters 的 hDeviceWindow 成员设置为有效的非 NULL 值时，此参数才可能为 NULL。

[D3DPRESENT_PARAMETERS 结构@MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172588.aspx)

要获得要使用的窗口句柄，您可以通过常规的 .NET 框架方法创建另一个顶级窗口并获取其窗口句柄，而不是通过 Win32 方法调用进行动作。

如果您发现无法使用 WPF 提供的句柄（根据 Hans Passant 的评论），您还可以制作一个虚拟 Windows 窗体并将其实例化为隐藏窗口，并改用其句柄。

[WindowInteropHelper (WPF) @ MSDN](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.aspx)

[Control.Handle (Windows 窗体) @ MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.handle.aspx)

脚注：您现有的 WPF 主窗口句柄可能没问题，除非 SharpDX 或现有 Viewport3D 中的某些机制与以这种方式使用 Direct3D9 有冲突。

[3-D 图形概述 (WPF) @ MSDN](http://msdn.microsoft.com/en-us/library/ms747437.aspx)
[Viewport3D 类 (WPF) @ MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewport3d.aspx)

# asp.net-mvc - 属性中的 AllowHtml 允许我的用户打破页面

> ID：14592811
> 
> 赞同：0
> 
> 时间：2013-01-29T21:40:00.417
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我使用 tinyMCE 允许用户对文本区域中的文本进行样式化。
我有财产

```
[AllowHtml] Description {get;set;} 
```

一切正常。但是如果使用这样写：

```
<div>not closed tag 
```

这打破了我的整个页面。如何预防这种情况？
我用它来显示文本：

```
@Html.Raw(Model.Description) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:46:21.383

[`AllowHtml`](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowhtmlattribute%28v=vs.98%29.aspx)只允许发布某些特殊字符。这不会验证您的标记。

> 如果使用 AllowHtmlAttribute 特性标记属性，则 ASP.NET MVC 框架会在模型绑定期间跳过对该属性的验证

将用户生成的标记加载到页面上可能是一个安全问题。您的验证器会想要去除某些标签，例如`script.`许多网站使用 iframe 来显示用户生成的标记内容以避免此问题。

# actionscript-3 - 为什么 hitTestObject 检测到碰撞较晚？

> ID：14592813
> 
> 赞同：1
> 
> 时间：2013-01-29T21:40:10.323
> 
> 标签：actionscript-3, actionscript, collision

我正在制作这个快速乒乓球游戏并使用 hitTestObject 检查碰撞。应该不是问题，因为无论如何一切都是矩形的。向量中的每个球都在检查它是否每帧都与桨发生碰撞。为什么每个球直到它通过它大约一半才触发碰撞？我不能比 enter_frame 更频繁地调用函数，或者我可以吗？我只是似乎它的更新速度不够快或其他什么。

```
if (ball[i].hitTestObject(paddle)){

     // Flip
     ball[i] *= -1;
} 
```

快速图片：

![在此处输入图像描述](../Images/c9287df547acc1c6c574b52bf98e2d18.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:33:07.990

我认为这是因为当您进行击球测试时，球就在那儿，因为它只检查瞬时位置而不是平滑的运动线。换句话说，如果在一帧上球的边缘距离球拍 5px，那么击球测试将是错误的。如果球在下一帧移动了 8px，命中测试将为真，但球边缘将在球拍内 3px。

当我有一个像这样的简单平坦边缘要测试时，我倾向于按照这些思路做一些事情（给定一个带有`speedY`和`radius`变量的球，并且`paddle.y`== 桨的前缘）：

```
if (ball.y + ball.radius > paddle.y) {
    // Mirror the ball's speed
    ball.speedY *= -1;

    // Mirror the ball's location as if it had bounced on the edge
    // by moving it back by the same distance it went past.
    ball.y -= (ball.y + ball.radius - paddle.y) * 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:34:11.050

你需要在这里做的是更新球的位置，这样一旦发生碰撞，它就会靠在桨的边缘。

您目前遇到的问题是，如果您的球以每帧 12 像素的速度行进并且距离球棒 2 像素，那么球将在下一帧绕过球棒边缘 10 像素并为您提供视觉效果你看到的结果。

```
if( /* your hit detection */ )
{
    // Move the ball so that it's sitting against the paddle here.
    //
} 
```

# java - Java字体比它应该小得多

> ID：14592815
> 
> 赞同：2
> 
> 时间：2013-01-29T21:40:15.070
> 
> 标签：java, swing, fonts, awt

我的字体大小有问题，它比应有的小得多，甚至增加 size 参数也没有区别。

首选大小是为了表明它不是限制它的大小，并且文本是随机的并且很长以显示文本有多小。它也是所有字体，不仅仅是无衬线字体，但如果我使用系统默认字体，这是正常的。我还重新启动了计算机，以确保它没有将字体错误地加载到缓存中。

```
JLabel time = new JLabel("sdfghgfdcfghgvghbvhgvghhvghgvghhbhbhb");
time.setFont(new Font("sans-serif", 13, Font.ITALIC));
time.setPreferredSize(new Dimension(50, 50));
panel.add(time); 
```

面板只是一个具有正常流程布局的 JPanel。

这是文本的图像：

![](../Images/e7fbb2faa328139d6248ef6e9e869184.png)

文本大约 5 像素高。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:41:10.883

```
time.setFont(new Font("sans-serif", 13, Font.ITALIC)); // not so good 
```

检查构造函数参数的顺序。

```
time.setFont(new Font("sans-serif", Font.ITALIC, 13)); // better 
```

请记住，API 是您的朋友。:)

# java - Eclipse 中的 JOGL OpenGL 抛出 NoSuchMethodError

> ID：14592816
> 
> 赞同：0
> 
> 时间：2013-01-29T21:40:18.390
> 
> 标签：java, eclipse, opengl, jogl

我想使用 Java 学习 OpenGL。我没有使用 OpenGL 的经验，但我对 Java 很满意。

计划是在 Eclipse Indigo 中使用 JOGL。从[Schabby 的博客](http://schabby.de/jogl-example-hello-world/)开始编写一个简单的 hello world 应用程序。我的应用程序的来源是相同的。

我遵循所有步骤并引用了*gluegen-rt-natives-windows-amd64.jar、gluegen-rt.jar、jogl-all.jar 和jogl-all-natives-windows-amd64.jar*库。该应用程序配置为在 JRE6 x64 中运行。

当我运行应用程序时，会引发以下异常：

```
Exception in thread "main" java.lang.NoSuchMethodError: jogamp.common.awt.AWTEDTExecutor.invoke(Ljava/lang/Object;ZZLjava/lang/Runnable;)Z 
```

其他答案表明问题出在主要方法上，但是我看不到任何问题。

```
public static void main(String[] args) 
{
       \\Implementation
} 
```

我还能尝试什么来解决这个问题？

**编辑：**似乎每次需要绘制某些东西时都会引发异常。

如果我评论此行`frame.setSize( frame.getContentPane().getPreferredSize() );`，则会显示具有最小宽度和高度的默认框架，但一旦我重新调整大小，就会引发相同的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:10:17.690

这是无法加载本机库时引发的顶级异常。请参阅[有关本地安装的文档](http://jogamp.org/jogl/doc/userguide/#localinstallation)并仔细遵循。

首先确保使用的 JRE Eclipse 实际上是 64 位的。您的行为与尝试在 32 位 JRE 中加载 64 位 DLL 一致。

另请注意，该博客有些过时了。比如`jogl.all.jar`现在`jogl-all.jar`。确保您的 jar 引用指向正确的文件。[使用这组基于当前版本的说明，](http://penguin.ewu.edu/cscd470/Winter_13/JOGL2%20Installation-rc11.pdf)您可能会获得更好的结果。

natives jar 在运行时扩展。存储此 jar 的目录必须是可写的，此机制才能正常工作。我通常会通过使用扩展的 DLL/jnilib/so 文件和设置 java.library.path 来消除所有疑问的更详细的过程。

# php - PHP 提交表单操作

> ID：14592823
> 
> 赞同：1
> 
> 时间：2013-01-29T21:40:58.630
> 
> 标签：php, forms, get, submit

我有一个函数可以根据客户从表单页面中选择的产品和数量创建一个 URL。

该函数看起来像这样：

```
function getPurchaseLink($token, $csvfile, $force_platform = "", $quantity = 1){
   // Code to create url
} 
```

每个产品都有自己的表单，其中包含一个**选择数量的下拉**列表。

问题是当我硬编码它的数量时：**$quantity = 1;** 并以我提出的形式行动：

```
<form method="post" action="<?php echo getPurchaseLink($TOKEN, $csvfile, $force_platform = "", $quantity); ?>"> 
```

它在我提交表单时起作用。

但这不是我想要的方式。我想获取选择框选项的数量值。就像**$quantity = $_POST['quantity'];**

但是当页面加载时，我得到了一个未定义的错误。因此，如果无法从选择框中获取数量值，则无法提交表单。

这是我的整个表格：

```
<?php
require 'script_purchase.php';

$csvfile = 'purchaselinks.csv';

//echo getPurchaseLink($token = '1Opp2p11M', $csvfile, $force_platform = "", $quantity = 99) . '<br/>';
$quantity = $_POST['quantity'];

 ?>
<html>
<body>

<form method="post" action="<?php echo getPurchaseLink('1Opp2p11M', $csvfile, $force_platform = "", $quantity); ?>">
<div class="comp">
    <label class="font_12" for="quantity"># of PCs</label><br/>
    <select class="font_12" id="quantity" name="quantity">
        <option value="10">10 PCs</option>
        <option value="25">25 PCs</option>
        <option value="50">50 PCs</option>
        <option value="99">99 PCs</option>
    </select>
</div>
<div class="div_small"><span class="font_12"><br/>for</span></div>
<input name="submit" id="button_addtocart" type="submit" value="Submit"       class="checkout" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T22:38:09.933

您可能想在使用它之前检查数组`'quantity'`内部是否存在。`$_POST`像这样：

```
$quantity = array_key_exists('quantity', $_POST) ? $_POST['quantity'] : 0; 
```

或其他一些值作为默认值。问题是，第一次呈现页面时，POST 数据中没有任何内容。

您还应该应用某种验证（以防有人想滥用您的脚本）。看看[http://www.php.net/manual/en/function.filter-input.php](http://www.php.net/manual/en/function.filter-input.php)

# php - 从 php 调用时，将 RPi.GPIO 导入为 GPIO 在 python 中不起作用

> ID：14592826
> 
> 赞同：0
> 
> 时间：2013-01-29T21:41:05.643
> 
> 标签：php, python, linux, raspberry-pi

我和这个问题有同样的问题， [从 PHP 调用 python 导入失败，](https://stackoverflow.com/questions/1925764/python-import-fails-when-called-from-php) 但现在我的另一个导入。

`python uit.py`该`test.py`脚本在命令行`uit.py`（我得到的只是返回代码1，我试过`exec(), passthru() and system(),`了，除了'1'之外没有一个返回任何东西我对linux和python很陌生，所以我不知道如何将路径设置为直接导入而不是相对（如果那应该有帮助）

```
#!/usr/bin/python
# Hello world python
import RPi.GPIO as GPIO
print "Start";

GPIO.setmode(GPIO.BOARD);
GPIO.setup(16, GPIO.OUT)
GPIO.output(16, True)

print "Licht uit"; 
```

编辑：我现在注意到的是，当来自命令行的脚本时，我必须使用`sudo`它，因为脚本说它想要运行`root`（当我不以 root 身份运行它时出现错误，说'也许以 root 身份运行?'。

这可能是不工作的原因吗？当用户 PHP 在其下运行时，从 PHP 调用 python 脚本？

我确实用`sudo`（见评论）执行了该语句，但我也读过也许不允许 php 用户这样做`sudo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:48:52.100

> 我现在注意到的是，当来自命令行的脚本时，我必须 sudo 它，因为脚本说它想以 root 身份运行（当我不以 root 身份运行它时出现错误说'也许以 root 身份运行?'。
> 
> 这可能是不工作的原因吗？当用户 PHP 在其下运行时，从 PHP 调用 python 脚本？

Yes, that's your problem. The web server runs as `www-data`, not as root. (This user doesn't even have sudo access by default.) If you check the web server error log, you will probably see the "maybe run as root?" error message in there.

# jquery - jQuery 在活动时更改 CSS

> ID：14592831
> 
> 赞同：0
> 
> 时间：2013-01-29T21:41:11.150
> 
> 标签：jquery, css

我正在使用 jQuery Cycle 插件对画廊中的一些图像进行分页，并且我希望在该项目处于活动状态时更改部分页面项目的颜色。

HTML：

```
<div style="background-color:#000000; height:480px; width:285px; float:left;">
<ul id="nav">
   <li>
   <a class="red" href="#">
   <span class="red">Sports</span><br>
   Get your sports here.
   </a>
   </li>

   <li>
   <a class="red" href="#">
   <span class="red">Topics</span><br>
   Topics here.
   </a>
   </li>

   <li>
   <a class="red" href="#">
   <span class="red">News</span><br>
   Fit news for an unfit people.
   </a>

   </li>

   <li>
   <a class="red" href="#">
   <span class="red">Weather</span><br>
   Sunny or Cloudy?
   </a>

   </li>
  </ul> 
</div> 
```

CSS：

```
.red {
color:#F00;
}
.black {
color:#000000;
}
#slideshow { float: left; width:auto; position:relative; }
#nav { width: 245px; overflow:auto; height:auto; float: left; background-color:#000000; color:#FFFFFF; margin-top:0px; overflow:hidden; }
#nav li {width: 285px; height:80px; display:block; float: left; list-style: none; margin-left:-40px; }
#nav a {width: 285px; height:80px; display: block; color:#FFFFFF; text-decoration:none; font-size:13px; line-height:18px;}
#nav li.activeSlide a { background: #FF0000; color:#FFFFFF; text-decoration:none; font-size:13px; line-height:18px;}
#nav a:focus { outline: none; text-decoration:none; font-size:13px; line-height:18px;}
#nav a:hover { outline: none; color:#888888; text-decoration:none; font-size:13px;  line-height:18px;}
#imgBox { width:570px; z-index:-9;} 
```

Cycle 插件脚本：

```
<script type="text/javascript">
$(function() {
    $('#slideshow').cycle({
        fx:     'fade',
        speed:  'fast',
        timeout: 6000,
        pager:  '#nav',
        pagerAnchorBuilder: function(idx, slide) {
            // return sel string for existing anchor
            return '#nav li:eq(' + (idx) + ') a';
        }
    });
});
</script> 
```

不起作用的脚本：

```
<script type="text/javascript">
  $("#nav li.activeSlide a").activeSlide(function() {
  $(this).removeClass('red').siblings().addClass('black');
 });​
</script> 
```

# vb.net - 我可以对属性使用泛型类型吗

> ID：14592834
> 
> 赞同：0
> 
> 时间：2013-01-29T21:41:25.160
> 
> 标签：vb.net, class

我想创建一个具有 2 个属性的类，一个名称（作为类型字符串）和一个类型（作为任何类型）。这个想法是我可以创建我的类的集合，这样我就可以传递我的参数集合

```
Public Class parameter
    Dim m_ParameterName As String
    Dim m_ParameterType As Type

    Public Property ParameterName As String
        Get
            Return m_ParameterName
        End Get
        Set(ByVal value As String)
            m_ParameterName = value
        End Set
    End Property

    Public Property ParameterType() As T
        Get
            Return m_ParameterType
        End Get
        Set(ByVal value As T)
            m_ParameterType = value
        End Set
    End Property
    Sub New()
        m_ParameterType = Nothing
        m_ParameterName = ""
    End Sub
End Class 
```

然后我想创建一个类的实例并定义属性

```
Dim myParameter As New parameter
myParameter.ParameterName = "Name"
myParameter.ParameterType = String
or 
Dim myParameter As New parameter
myParameter.ParameterName = "Name"
myParameter.ParameterType = integer
or 
Dim myParameter As New parameter
myParameter.ParameterName = "Name"
myParameter.ParameterType = clsCustomClass 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:35:46.873

### `You may have to create a generic class to do this`

* * *

**您可以将类定义为**

```
Public Class SampleClass(Of T)
    Private m_sampleProperty As T
    Public Property SampleProperty() As T
        Get
            Return m_sampleProperty
        End Get
        Set
            m_sampleProperty = value
        End Set
    End Property
End Class 
```

用法 ：

```
 Dim strClass As New SampleClass(Of String)()
    strClass.SampleProperty = "wohoo_string"

    Dim int32Class As SampleClass(Of Int32) = New SampleClass(Of Integer)()
    int32Class.SampleProperty = 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:43:08.837

1) 你不能创建泛型属性，因为编译器永远不会知道使用什么 getter。假设你有

```
Public Property SomeProperty() As T
    Get
        Console.WriteLine(GetType(T).Name)
        Return Nothing
    End Get
End Property 
```

这会打印`Dim a = SomeProperty`什么？

2）`ParameterType`应该有`Type`类型。

3）您应该使用`GetType()`运营商[http://msdn.microsoft.com/en-US/library/tay4kywk.aspx](http://msdn.microsoft.com/en-US/library/tay4kywk.aspx) 例如，`parameter.Type = GetType(String)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:43:55.220

我认为您必须为此创建一个通用类。

试试这个。

[如何在 VB.NET 中创建通用属性？](https://stackoverflow.com/questions/1869451/how-do-i-create-a-generic-property-in-vb-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T21:49:52.303

```
Dim m_ParameterName As String
Dim m_ParameterType 

Public Property ParameterType() 
    Get
        Return m_ParameterType
    End Get
    Set(ByVal value )
        m_ParameterType = value
    End Set
End Property 
```

只需将类型留空 - 这就像 c# 中的“var”

另一种选择是使用`As Object`

# git - 为什么克隆远程 Git 存储库会创建远程 HEAD，而简单地跟踪不会？

> ID：14592844
> 
> 赞同：1
> 
> 时间：2013-01-29T21:42:25.330
> 
> 标签：git, git-clone, git-remote

我为项目中的参与者提供了 Git 配置，这些配置旨在对我和所有合作者表现相同。因此，例如，我们的分支名称匹配并且分支跟踪相同的远程。

最后，我从一个包含我的项目的 Git 存储库开始，然后执行 (1)

```
git checkout -b dev
git remote add development <dev-repo uri>
git push --set-upstream development dev 
```

创建和配置我们将用于协作的分支和远程存储库。然后我只是指示我的合作者（2）

```
git clone -o development <dev-repo uri> 
```

一切都按预期工作。特别是，本地存储库“看起来”几乎相同（有助于通信）——除了一个区别：第二个配置 (2) 有一个附加的远程分支：`development/HEAD`. 这个分支是什么，它是从哪里来的？为什么它不存在于（1）中。它的存在（或不存在）有什么影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:25:09.660

你问题的第一部分是[一个骗子](https://stackoverflow.com/questions/12613793/why-is-there-a-remotes-origin-head-origin-master-entry-in-my-git-branch-l?lq=1)。

这是我对第二部分的猜测：当你克隆一个 repo 时，你正在从头开始构建一个完整的存储库，包括工作目录。如果没有 remote `HEAD`，git 不知道最初要检查哪个分支——换句话说，git 不知道你的本地`HEAD`应该是什么，它不知道从哪里获取工作目录的文件。

另一方面，当您将遥控器添加到现有存储库时，您正在添加已经完成的内容。Git 不必关心默认情况下远程会签出哪个分支。你已经有了一个 local `HEAD`，所以你不需要来自远程的指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:11:30.857

HEAD 并不是一个真正的分支，它是一个象征性的参考。在遥控器上，它代表它的实际分支。您可以检查它的内容`git symbolic-ref refs/remotes/development/HEAD`或只是查看文件`.git/refs/remotes/development/HEAD`。

当您克隆存储库时（默认情况下）该分支将在远程 HEAD ref 指向的本地存储库中签出，除非 master 也在该提交上，因为随后 master 分支被签出，它具有不知何故，优先级更高，至少一年前是这种情况。

为什么它存在于您的存储库中而不存在于另一个存储库中？我不知道，但这并不重要。

# c# - 防止 Codedom 构建被反编译

> ID：14592848
> 
> 赞同：-3
> 
> 时间：2013-01-29T21:42:41.850
> 
> 标签：c#, codedom

只是询问有关加密构建的问题。现在排序，谢谢大家<3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T22:09:32.370

托管程序集相对容易进行逆向工程，主要是因为编译器省略的 IL 代码已经非常可读，但您可以在[其他地方](https://stackoverflow.com/questions/671407/why-is-it-so-easy-to-decompile-net-il-code)阅读更多相关信息。

防止或*试图*防止某人对托管程序集进行逆向工程的一种常见方法是*混淆*。混淆器将从程序集中加载有意义的数据，然后通过使用各种技术（例如加扰标识符和用冗长的算术函数替换字符串文字）使其难以阅读。

我遇到过的最好的混淆器，我认为它是最好的，因为它是我看到逆向工程师抱怨最多的混淆器，是[Confuser](http://confuser.codeplex.com/)（开源）。

Confuser UI 基于某种*可插拔*的核心 API，您可以从应用程序中引用该 API，以*混淆*您的程序忽略的程序集。我想您可以复制并记入一些代码以混淆内存中的代码字符串，但据我所知，您需要解析代码以便识别成员，例如[Mono.Cecil](http://www.mono-project.com/Cecil)的位置 （也打开source 并由 confuser 使用）将能够使用程序集元数据识别代码中的成员等。

混淆是*可以*的，如果混淆器是最新的，它可能会保护您的程序集免受新手或懒惰的逆向工程师的攻击。[像de4dot](https://bitbucket.org/0xd4d/de4dot/downloads)这样的开源工具可以轻松地扭转流行混淆器的效果。

但请记住*“通过混淆进行保护根本就没有保护”*

## 更新

为了在构建程序集之前混淆代码，您将需要一个解析器，它将向您呈现代码中的所有标识符和表达式。从那里您可以为标识符生成随机无意义的名称，并修改表达式以使其尽可能少。

例如`Console.Writeline("Hi")`变成：

`Console.WriteLine("{0}{1}", (char) (36 << 1), (char) ((26 << 2) + 1));`

这很难阅读。我当场做出来的，显然不符合任何算法，因为位移可能会丢失重要的位。但就像我之前说的，去看看其他一些你可以复制和信任的算法来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:50:10.303

每个 .Net 程序集都可以使用 .Net Reflector 等工具进行拆卸。该程序集是使用 Codedom 构建的，这没有什么区别。如果您想让其他人更难理解您的反汇编程序集，您将不得不“混淆”它们，只需谷歌搜索或在此处搜索“.Net obfuscator”即可引导您前进。

# c# - Scaletransform textblock

> ID：14592850
> 
> 赞同：2
> 
> 时间：2013-01-29T21:42:46.267
> 
> 标签：c#, windows-phone-7, windows-phone-8

I'm adding to the canvas a textblock that the user can bring everywhere but now I'm stuck trying to figure out how to make textblock able to be enlarged or rotated pinching it, this is my code so far:

```
//create the textblock 
TextBlock txt = new TextBlock() { Text = UserString, FontSize = 56 };

//Adding gesture listener here
GestureListener TextGestureListener = GestureService.GetGestureListener(txt);
txt.MouseEnter += txt_MouseEnter;
TextGestureListener.DragStarted += new EventHandler<DragStartedGestureEventArgs>(GestureListener_DragStarted);
TextGestureListener.DragDelta += new EventHandler<DragDeltaGestureEventArgs>(GestureListener_DragDelta);
TextGestureListener.DragCompleted += new EventHandler<DragCompletedGestureEventArgs>(GestureListener_DragCompleted);
TextGestureListener.PinchDelta += new EventHandler<PinchGestureEventArgs>(GestureListener_PinchDelta);
WholePicture.Children.Add(txt);

//pinch to zoom or at least try!
void GestureListener_PinchDelta(object sender, PinchGestureEventArgs e)
{
    TextBlock txt = (TextBlock)sender;
    Scale = (ScaleTransform)txt.RenderTransform;
    Scale.ScaleX = e.DistanceRatio;
    Scale.ScaleY = e.DistanceRatio;
} 
```

Now, if I try to enlarge the textblock it simply crash with this errors

```
 $exception   {System.InvalidCastException: Unable to cast object of type 'System.Windows.Media.TranslateTransform' to type 'System.Windows.Media.ScaleTransform'.
       at CrazyFill.Pages.CrazyFillCore.GestureListener_PinchDelta(Object sender, PinchGestureEventArgs e)
       at Microsoft.Phone.Controls.SafeRaise.Raise[T](EventHandler`1 eventToRaise, Object sender, GetEventArgs`1 getEventArgs)
       at Microsoft.Phone.Controls.GestureListener.RaiseGestureEvent[T](Func`2 eventGetter, Func`1 argsGetter, Boolean releaseMouseCapture)
       at Microsoft.Phone.Controls.GestureListener.ProcessTouchPanelEvents()
       at Microsoft.Phone.Controls.GestureListener.TouchDelta()
       at Microsoft.Phone.Controls.GestureListener.OnTouchFrameReported(Object sender, TouchFrameEventArgs e)
       at System.Windows.Input.Touch.OnTouch(Object sender, TouchFrameEventArgs e)
       at MS.Internal.JoltHelper.RaiseEvent(IntPtr target, UInt32 eventId, IntPtr coreEventArgs, UInt32 eventArgsTypeIndex)}    System.Exception {System.InvalidCastException} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:56:16.097

我认为您有一个错误，因为您用新的转换覆盖了文本块的渲染转换。translatex-y 的旧版本会以这种方式丢失。您可以使用 CompositeTransform 并在其上设置 scaletransform 。

在那种情况下，我会使用数据绑定，而不仅仅是从代码隐藏中进行操作。

```
 <TextBox Text="This will move" Height="80" Width="200" x:Name="ToMoveTextBox" RenderTransformOrigin="0.5,0.5">
        <TextBox.RenderTransform>
            <CompositeTransform ScaleX="{Binding ScaleXY}" ScaleY="{Binding ScaleXY}" 
                                TranslateX="{Binding TranslateX}" TranslateY="{Binding TranslateY}"/>
        </TextBox.RenderTransform>
        <toolkit:GestureService.GestureListener>
            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" PinchDelta="GestureListener_PinchDelta"/>
        </toolkit:GestureService.GestureListener>
    </TextBox> 
```

在我的示例中，我使用代码隐藏来计算值，但以其他方式，您也可以从 ViewModel 中使用**CallMethodAction**进行计算（这是一个 UI 操作，因此您可以选择。）

```
 private void GestureListener_DragDelta(object sender, DragDeltaGestureEventArgs e)
    {
        TranslateX += e.HorizontalChange;
        TranslateY += e.VerticalChange;
        e.Handled = true;
    }

    private void GestureListener_PinchDelta(object sender, PinchGestureEventArgs e)
    {
        ScaleXY = e.DistanceRatio;
        e.Handled = true;
    } 
```

我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:35:20.180

GestureListener_PinchDelta 显然是错误的，这是有效的

```
void GestureListener_PinchDelta(object sender, PinchGestureEventArgs e)
{
        TextBlock ui = (TextBlock)sender;
        if (ui != null)
        {
            if (!(ui.RenderTransform is ScaleTransform))
                ui.RenderTransform = new ScaleTransform();

            ScaleTransform t = ui.RenderTransform as ScaleTransform;

            t.ScaleX = e.DistanceRatio;
            t.ScaleY = e.DistanceRatio;
            e.Handled = true;
        }
} 
```

这只是有一个小错误，那就是当我开始手势时，文本块忘记了用户放置它的位置并返回它最初创建的位置（页面顶部），为解决方案工作，何时找到我会让你知道

# java - How to upload a file in Selenium with no text box

> ID：14592853
> 
> 赞同：10
> 
> 时间：2013-01-29T21:42:58.330
> 
> 标签：java, file-upload, selenium, automated-tests, selenium-webdriver

I have been looking for a solution to uploading a file in Selenium 2.

The problem is that the web element that I'm trying to upload is usable in two ways: Drag and drop, or click on a button. There is no field entry box. Not that I haven't tried using sendKeys. I've tried it on the button, and all surrounding elements.

The second part to this problem is that I write on a Windows machine, but the automation occurs on a Linux machine. That means that AutoIt won't work. This is the HTML of the upload box.

```
<div class="up-target" id="up-drop-zone">
    <div class="up-drop-zone-pre hidden">
        <p>Please choose a folder to upload</p>
    </div>
    <div class="up-drop-zone-decor">
        <p>Drop one or more files here</p>
        <p>or</p>
        <button name="uploadFile" class="upload">Select Files</button>
        <input type="file" id="up-drop-zone-input" name="files[]" multiple="true">
    </div>
</div> 
```

I am using Java, and open to other methods outside of Selenium (However, I do only have select maven repositories).

Thank You!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T14:31:39.023

不幸的是，你现在不能这样做（2013 年 1 月，Selenium 2.29.1），因为 Selenium 不支持`<input type="file" multiple>`元素。

[项目开发人员自己对此提出了功能增强请求](http://code.google.com/p/selenium/issues/detail?id=2239)，但尚未实施。您可以在此处加注星标以将其在优先级列表中向上移动。

此外，据我所知，您不能真正将文件从桌面拖到一个`WebElement`可靠的方式。

解决方法可能是使用[AutoIT](http://www.autoitscript.com/site/autoit/)（仅限 Windows）或[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)类（也仅适用于类似于您的设置）并在对话框中“盲目”键入路径：

```
driver.findElement(By.id("up-drop-zone-input")).click();
Robot r = new Robot();
r.keyPress(KeyEvent.VK_C);        // C
r.keyRelease(KeyEvent.VK_C);
r.keyPress(KeyEvent.VK_COLON);    // : (colon)
r.keyRelease(KeyEvent.VK_COLON);
r.keyPress(KeyEvent.VK_SLASH);    // / (slash)
r.keyRelease(KeyEvent.VK_SLASH);
// etc. for the whole file path

r.keyPress(KeyEvent.VK_ENTER);    // confirm by pressing Enter in the end
r.keyRelease(KeyEvent.VK_ENTER); 
```

这很糟糕，但它应该工作。请注意，您可能需要这些：[如何让 Robot 键入 `:`？](https://stackoverflow.com/questions/5736129/how-can-i-make-robot-type-a)和[Convert String to KeyEvents](https://stackoverflow.com/questions/1248510/convert-string-to-keyevents)（还有新的和闪亮的[`KeyEvent#getExtendedKeyCodeForChar()`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getExtendedKeyCodeForChar%28int%29)，它做类似的工作，但只能从 JDK7 获得）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-02T08:28:35.087

我发现我可以让它工作的唯一方法是使用[AutoIt](https://www.autoitscript.com/site/autoit/)（感谢[LittlePanda](https://sqa.stackexchange.com/questions/12851/how-can-i-work-with-file-uploads-during-a-webdriver-test#12872)和[user3903359](https://stackoverflow.com/a/25102110/1741690)的回答）。

我改进了脚本，因为我发现在测试运行时执行任何其他操作可能会阻止它工作。诀窍是找到窗口，然后在输入文本之前使其处于活动状态。

超时是为了防止多个 AutoIt 脚本在后台挂起，这意味着当您停止测试并尝试做自己的工作时，它们会开始并尝试开始输入！

请注意，窗口在不同浏览器中的名称不同（例如，Chrome 中的“打开”）。

```
$windowHandle = WinWait("Choose File to Upload", "", 3) ; 3 second timeout - NB the window name will be different in different browsers!

If $windowHandle == 0 Then
   MsgBox(0, "", "Upload popup not found")
Else
   ;MsgBox(0, "", "Upload popup found: " & $windowHandle)
   WinActivate($windowHandle)
   Send("C:\\path\to\myfile.txt")
   Send("{ENTER}")
EndIf 
```

根据所有其他答案，我假设从 Java 运行 AutoIt 脚本：

```
Runtime.getRuntime().exec("MyAutoItScript.exe"); 
```

从 C# 运行 AutoIt 脚本：

```
var process = Process.Start(@"C:\\path\to\myAutoItScript.exe");
process.WaitForExit();
Thread.Sleep(200); // IE fix for Modal dialog present exception 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T07:25:15.360

I thought autoIT will solve the problem just a part of the java code in my test

```
String[] commands = new String[]{};
commands = new String[]{"c:/test/attachFile.exe"};
Runtime.getRuntime().exec(commands); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:42:50.117

像这样试试

```
driver.findElement(By.id("up-drop-zone-input")).sendKeys("filePath"); 
```

# sql - 查询以返回每月的项目小时数

> ID：14592855
> 
> 赞同：1
> 
> 时间：2013-01-29T21:43:02.463
> 
> 标签：sql, sql-server

我正在尝试创建 SQL 查询以显示一个项目下的任务以及每个月在每个任务上花费的小时数？![在此处输入图像描述](../Images/dcd5b376b7a69fb07367f844247cae84.png)

询问

```
SELECT 
  Projects.projectName, Tasks.taskName, 
  billingsTimes.taskID, billingsTimes.actualTotalTime
FROM Projects 
INNER JOIN Projects_tasks ON Projects.projectID = Projects_tasks.projectID 
INNER JOIN Tasks ON Projects_tasks.taskID = Tasks.taskID 
INNER JOIN billingsTimes ON Tasks.taskID = billingsTimes.taskID
WHERE (Projects.projectID = '') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:50:21.410

听起来你只需要以下内容：

```
select p.projectname,
    t.taskname,
    bt.taskid,
    bt.TotalTime
from projects p
left join projects_tasks pt
    on p.projectid = pt.projectid
left join tasks t
    on pt.taskid = t.taskid
left join
(
    select SUM(bt.actualTotalTime) TotalTime, bt.taskid
    from billingtimes bt
    group by bt.taskid
) bt
    on t.taskid = bt.taskid 
```

如果您提供有关每月日期存储位置的更多详细信息，则可以将其更改为按月分组，以便为​​您提供每个任务的每月总计。

编辑#1，如果您使用`dateOfService`来确定服务的执行时间并且您想按月/年分组，那么您可以使用以下内容：

```
select p.projectname,
    t.taskname,
    bt.taskid,
    bt.TotalTime,
    bt.ServiceMonth,
    bt.ServiceYear
from projects p
left join projects_tasks pt
    on p.projectid = pt.projectid
left join tasks t
    on pt.taskid = t.taskid
left join
(
    select SUM(bt.actualTotalTime) TotalTime, bt.taskid, 
        datepart(month, bt.dateofService) ServiceMonth,
        datepart(year, bt.dateofService) ServiceYear
    from billingtimes bt
    group by bt.taskid, datepart(month, bt.dateofService), 
        datepart(year, bt.dateofService)
) bt
    on t.taskid = bt.taskid 
```

# ruby-on-rails - Check_box_tag - pre-checked conditional on values in @array

> ID：14592857
> 
> 赞同：1
> 
> 时间：2013-01-29T21:43:09.397
> 
> 标签：ruby-on-rails, forms, model-view-controller

How do I implement a check_box_tag with pre-checked boxes which match the values contained in an instance variable `@array`:

```
= form_tag xxx_path, :method => :get do 
  - @all_names.each do |name|
    = rating
    = check_box_tag "names[#{name}]", CHECKED IF name in @array
  = submit_tag 'Refresh' 
```

Edit - Controller first:

```
 def index
    if params[:ratings]
      @filtered_ratings = params[:ratings]
      @movies = Movie.find(:all, :conditions => ["rating IN (?)", @filtered_ratings], :order => params[:sort])
    else
      @movies = Movie.find(:all, :order => params[:sort])   
    end
  end 
```

Now view:

```
= form_tag movies_path, :method => :get do
  Include: 
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", 1, @filtered_ratings.include?(rating) ? true : false
= submit_tag 'Refresh' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:45:08.207

尝试这个：

```
= form_tag xxx_path, :method => :get do 
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", 1, @filtered_ratings.include?(rating) ? true : false
  = submit_tag 'Refresh' 
```

在控制器中：

```
def index
  @filtered_ratings = params[:ratings] || [] # if no params[:ratings] then assign empty array
  @movies = Movie.order(params[:sort])
  @movies = @movies.where(rating: params[:ratings]) if params[:ratings].present?
end 
```

# java - Java双重麻烦

> ID：14592859
> 
> 赞同：0
> 
> 时间：2013-01-29T21:43:22.097
> 
> 标签：java, double

> **可能重复：**
> [将小数位移动到双精度](https://stackoverflow.com/questions/4937402/moving-decimal-places-over-in-a-double)

**代码 ：**

```
 public class Teste {
        public static void main(String[] args) {
            System.out.println("Exponent loop:");
            for(int i=1; i<10; ++i)
               System.out.println(Math.pow(0.1, i));

            System.out.println("\nMultiplication loop:");
            double a = 1;
            for(int i=1; i<10; ++i){
               a *= 0.1;
               System.out.println(a);
            }
        }
    } 
```

**输出：**

指数循环：

```
0.1
0.010000000000000002   
0.0010000000000000002    
1.0000000000000002E-4    
1.0000000000000003E-5    
1.0000000000000004E-6    
1.0000000000000004E-7    
1.0000000000000004E-8    
1.0000000000000005E-9 
```

乘法循环：

```
0.1    
0.010000000000000002    
0.0010000000000000002    
1.0000000000000003E-4    
1.0000000000000004E-5    
1.0000000000000004E-6    
1.0000000000000005E-7    
1.0000000000000005E-8    
1.0000000000000005E-9 
```

# deployment - 基于 FetchXML 的 SSRS 报告部署错误

> ID：14592860
> 
> 赞同：0
> 
> 时间：2013-01-29T21:43:23.193
> 
> 标签：deployment, dataset, report, expression, fetchxml

我提交了一个我无法解决的小问题。也许它会在未来帮助某人。

我正在使用 BIDS 2008 和 Dynamics CRM 2011。

我刚刚开发了一个基于 FetchXML 的报告（客户要求）。此外，我使用表达式作为我的数据集查询，例如：

```
= IIf(Parameters!strLob.Label = "Consulting",
"<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='true'><entity name='opportunity'><attribute name='mcs_internalreferrer' /><order attribute='mcs_internalreferrer' descending='false' /><link-entity name='mcs_lob' from='mcs_lobid' to='mcs_lobid' visible='false' alias='lob'><attribute name='mcs_name' /><!-- lob_mcs_name --><filter type='and'><condition attribute='mcs_name' operator='eq' value='Consulting' /></filter></link-entity><filter type='and'><condition attribute='mcs_internalreferrer' operator='not-null' /></filter></entity></fetch>",
"<fetch version='1.0' output-format='xml-platform' mapping='logical' distinct='true'><entity name='mcs_option'><attribute name='mcs_key' alias='mcs_internalreferrerValue'/><attribute name='mcs_value' alias='mcs_internalreferrer'/><filter type='and'><condition attribute='mcs_key' operator='eq' value='reports_param_na' /></filter></entity></fetch>"
) 
```

目的是根据参数值返回一个虚拟值（第二次查询）而不是正常值（第一次查询）。

在 Visual Studio 的预览模式下一切正常。我可以查看和使用两个查询中的值。

但由于某种原因，当尝试在 Dynamics 中部署此报告时，我收到 Malformed FetchXML 错误（详情如下）。实际上，当我将表达式替换为正常的 FetchXML 值时，报表部署良好。实际上，我可以放置任何有效的 FetchXML，即使它在我的报告上下文中没有意义，它也会部署！所以真正的问题是不被识别为有效 XML 的表达式。

知道如何让 Dynamics 接受我的基于表达式的数据集吗？

这是错误日志：

```
Unhandled Exception: System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: Command text is invalid.Detail: 
<OrganizationServiceFault xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/xrm/2011/Contracts">
  <ErrorCode>-2147220733</ErrorCode>
  <ErrorDetails xmlns:d2p1="http://schemas.datacontract.org/2004/07/System.Collections.Generic">
    <KeyValuePairOfstringanyType>
      <d2p1:key>CallStack</d2p1:key>
      <d2p1:value xmlns:d4p1="http://www.w3.org/2001/XMLSchema" i:type="d4p1:string">   at Microsoft.Crm.Extensibility.VersionedPluginProxyStepBase.Execute(PipelineExecutionContext context)
   at Microsoft.Crm.Extensibility.Pipeline.Execute(PipelineExecutionContext context)
   at Microsoft.Crm.Extensibility.MessageProcessor.Execute(PipelineExecutionContext context)
   at Microsoft.Crm.Extensibility.InternalMessageDispatcher.Execute(PipelineExecutionContext context)
   at Microsoft.Crm.Extensibility.ExternalMessageDispatcher.ExecuteInternal(IInProcessOrganizationServiceFactory serviceFactory, IPlatformMessageDispatcherFactory dispatcherFactory, String messageName, String requestName, Int32 primaryObjectTypeCode, Int32 secondaryObjectTypeCode, ParameterCollection fields, CorrelationToken correlationToken, CallerOriginToken originToken, UserAuth userAuth, Guid callerId, Guid transactionContextId, Int32 invocationSource, Nullable`1 requestId, Version endpointVersion)
   at Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.ExecuteRequest(OrganizationRequest request, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType)
   at Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.Execute(OrganizationRequest request, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType)</d2p1:value>
    </KeyValuePairOfstringanyType>
  </ErrorDetails>
  <Message>Command text is invalid.</Message>
  <Timestamp>2013-01-29T20:45:56.0253388Z</Timestamp>
  <InnerFault i:nil="true" />
  <TraceText i:nil="true" />
</OrganizationServiceFault> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:46:11.180

经过一些进一步的搜索，它似乎是 Dynamics CRM 2011 的一个限制。

一个可行的简短解决方法：

1.  创建一个 Dataset1 和一些基于它的报表元素
2.  基于它创建一个Dataset2和一些类似的元素
3.  根据参数值使这些元素可见/隐藏

这将为我们的 FetchXML 报告提供动态的外观和感觉。

# android - 如何保护 AlarmManager 免受任务管理器的影响

> ID：14592862
> 
> 赞同：0
> 
> 时间：2013-01-29T21:43:30.387
> 
> 标签：android, memory-management, task, alarmmanager, taskmanager

我已经实现了在给定时间触发警报的简单应用程序。每件事都很好。

```
Myalarm m = new Myalarm(this);
PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 123, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + alarmtimeinmilliseconds, pendingIntent); 
```

但是当我设置警报并且如果我运行任务管理器并按“关闭所有任务”或“清除内存”时。它也杀死了我设置的闹钟。

如何使用杀手，残酷的任务管理器保护我的警报:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:28:24.833

你不能，很可能。

Android 没有“关闭所有任务”或“清除内存”的任务管理器。大概，您正在考虑设备附带的一些任务管理器。如果他们选择取消安排您的闹钟，您将无能为力。在标准的 Android 中，如果用户进入“设置”并在您的应用程序上单击“强制停止”，这也会取消您的闹钟安排，您对此无能为力。

您*可以*做的是记录警报发生的时间，例如在`SharedPreference`. 然后，当用户启动您的活动时，您可以检查您的日志。如果距离上次记录事件的时间太长，您可以假设用户做了一些事情来取消安排您的警报，您可以重新安排它们。

# jquery-mobile - 如何在 jQuery 移动页面的导航栏中添加自定义图标

> ID：14592870
> 
> 赞同：1
> 
> 时间：2013-01-29T21:43:58.327
> 
> 标签：jquery-mobile, navbar

在 jQuery 移动页面中，如何在导航栏中添加自定义图标？我的页脚内容如下：

```
<footer data-role="footer">  
     <div data-role="navbar" >  
         <ul>  
              <li><a href="#" data-icon="abc"> Abc </a></li>  
              <li><a href="#" data-icon="xyz"> xyz </a></li>  
          </ul>  
      </div>  
</footer> 
```

CSS 文件包含

```
.ui-icon-abc
{
    background-image: url('common-images/c.png');
    background-size: 60px 60px;
} 
```

但是，这不起作用。它显示一个圆圈，但不显示图像。我尝试使用其他 SO（[链接 1](https://stackoverflow.com/questions/11138213/issues-while-creating-custom-icon-for-navbar-in-jquery-mobile)和[链接 2](https://stackoverflow.com/questions/9582451/jquery-mobile-navbar-icons-not-appearing)）。但是，这对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:04:43.540

你需要稍微改进你的css，这会起作用（你的图标图标也需要更小才能使这个**.ui-icon-**方法起作用）：

```
.ui-icon-abc
{
    background: url('common-images/c.png') no-repeat rgba(0, 0, 0, 0.4) !important;
    background-size: 16px 16px;
} 
```

看看我的例子：http: [//jsfiddle.net/Gajotres/Q9TrF/](http://jsfiddle.net/Gajotres/Q9TrF/)

# python - 在 Python Twitter 搜索中返回多个页面

> ID：14592874
> 
> 赞同：0
> 
> 时间：2013-01-29T21:44:03.897
> 
> 标签：python, twitter

所以我试图通过 Python 中的 Twitter API 运行搜索查询。我可以使用“count”参数让它返回多达 100 个结果。不幸的是，1.1 版似乎没有 1.0 版中的“page”参数。1.1有什么替代方案吗？或者，如果没有，是否有人对其他方法有任何建议，以获取为主题返回的大量推文。

谢谢。

更新解决方案：

感谢下面的 Ersin。

我像往常一样查询一个页面，当它返回时，我会检查最旧的推文的 id。然后我将其用作下一个 URL 中的 max_id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:13:55.340

我认为您应该在您的网址中使用“since_id”参数。since_id 为您提供了比 since_id 更早的页面。因此，对于下一页，您应该将 since_id 参数设置为当前页面的最后一个 id。

# javascript - wordpress ajaxurl 获取骨干模型

> ID：14592877
> 
> 赞同：2
> 
> 时间：2013-01-29T21:44:09.840
> 
> 标签：javascript, wordpress, backbone.js

我正在学习 Backbone.js 并尝试基于它构建简单的主题。我在functions.php中有这段代码来加载js：

```
 function load_js() {
      wp_enqueue_script('app-js', get_template_directory_uri() . '/app.js', array('backbone'));
      wp_localize_script('app-js', 'mechanics', array('ajaxurl' => admin_url('admin-ajax.php')));
    }

    add_action('wp_enqueue_scripts', 'load_js'); 
```

在 app.js 这个简单的代码来获取帖子：

```
(function($){
    var Post = Backbone.Model.extend({});

    var Posts = Backbone.Collection.extend({
            model: Post,
            url: mechanics.ajaxurl
    });

    var new_posts = new Posts;
    new_posts.fetch();
}) 
```

服务器端工作（我已经用 jquery 测试过）。如果认为问题出在 url 语句上。有人可以告诉我它应该是什么样子，或者 jQuery ajax 和 Backbone 同步 url 之间是否有区别？

工作 jQuery 版本

```
jQuery(document).ready(function() {
    var $ = jQuery;

    $.ajax({
    type: "GET",
    url: mechanics.ajaxurl,
    data: { action : 'mechanics_get_posts' },
    dataType: "json",
    success: function( response ) {
        alert( response );
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T12:26:31.713

我需要添加数据来获取功能。最终代码如下所示：

```
var Post = Backbone.Model.extend({});

var Posts = Backbone.Collection.extend({
    model: Post,
    url: mechanics.ajaxurl
});

var new_posts = new Posts;
new_posts.fetch({
    data: { action: 'mechanics_get_posts' }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:06:05.467

**更新：确保加载了下划线和 jQuery。**

Backbone.$ = jQuery，所以 Backbone.fetch() 是 jQuery.ajax({type: "GET"});

您集合中的 url 属性应该是一个字符串。我不熟悉机制，所以如果“mechanics.ajaxurl”作为字符串在窗口对象上并**指向返回 JSON 的有效端点，**它应该可以工作。

改变：

```
var new_posts = new Posts; 
```

到：

```
var new_posts = new Posts(); 
```

然后，与 一样`$.ajax`，在您的`fetch()`方法中，您可以执行以下操作：

```
new_posts.fetch({
  success: function(collection, object, jqXHR) {
    your code...
  },
  error: function(jqXHR, statusText, error) {
    your code...
  }
}); 
```

# python - IDLE 在按 F5 时不再运行任何脚本

> ID：14592879
> 
> 赞同：4
> 
> 时间：2013-01-29T21:44:22.337
> 
> 标签：python, python-idle

我无法通过按 F5 或从 IDLE 的菜单中选择运行来运行任何脚本。它突然停止工作。没有错误被咳出来。IDLE 根本什么都不做。

尝试重新安装python没有效果。

即使是最简单的脚本也无法运行。

感谢您提供的任何帮助或建议。

在 Windows 7 上运行 Python 2.6.5。

无法解决空闲问题。我已切换到在 Aptana Studio 3 中使用 pyDev。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-08T22:44:11.347

我使用的是戴尔笔记本电脑，遇到了这个问题。我发现如果我按Function + F5，程序就会运行。

在我的笔记本电脑键盘上，功能键项目为蓝色（主要功能为白色）。Esc（退出）键有一个蓝色锁，上面有“Fn”。我按下 Esc + F5，它解锁了我的功能键。我现在只需按 F5 即可在编辑器中运行程序

注意：运行 Python 3 - 但我不认为这是 Idle 或 Python 的问题 - 我认为这是键盘问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-17T18:34:00.297

你的功能键被锁定了，我想是的。功能键可以通过 fn 键 + esc 解锁。然后 f5 将毫无问题地工作。

# python - Ubuntu中python程序末尾的分段错误

> ID：14592880
> 
> 赞同：2
> 
> 时间：2013-01-29T21:44:26.690
> 
> 标签：python

我有一个似乎可以在 Eclipse 运行时配置中工作的 python 脚本。当我在 Ubuntu 命令行中运行它时，在主程序结束后出现分段错误。为什么会发生，我该如何解决甚至调试它？

```
$:~/ober/code/impute/impute/batch-beagle$ python ~/ober/code/impute/bin/ibd_segments.py -v 1 ~/ober/data/hutt/chr22/hutt.stage5.npz ~/ober/data/hutt/hutt.kinship /home/oren/ober/code/impute/impute/batch-beagle/out/node-0/node-0/ibd-segment-0.in
[[0 0]]
Pair 1/4: (0,0) (0,0)
0 3218 16484792 51156934 0 0
Pair 2/4: (0,0) (0,1)
Pair 3/4: (0,1) (0,0)
Pair 4/4: (0,1) (0,1)
0 3218 16484792 51156934 0 1
Done
Segmentation fault (core dumped) 
```

脚本：

```
import os, sys, impute as im, itertools, csv, optparse, traceback, util, numpy as np

####################################################################################
if __name__ == '__main__':
    '''
    --------------------------------------------------
    Main program
    --------------------------------------------------
    '''
    # Parse and validate command-line arguments
    PROGRAM = os.path.basename(sys.argv[0])
    usage = 'Usage: %s [flags] <phased-data-file> <kinship-file> <input-file>\n\n' \
        'Locate IBD segments among a subset of sample in an NPZ phased data set.\n' \
        'Sample pairs are read from standard input. Segments are written to standard output.\n' \
        '\tphased-data-file - NPZ file containing phasing results\n' \
        '\tkinship-file - Sorted identity coefficient file\n' \
        '\tpair-list-file - Sorted identity coefficient file\n' \
        '\tout-file - File to output segments to\n' \
        '\n' \
        'Example:\n' \
        'phased-data-file = /home/oren/ober/data/hutt/chr22/hutt.stage5.npz\n' \
        'kinship-file = /home/oren/ober/data/hutt/hutt.kinship\n' \
        'pair-list-file contains the lines\n' \
        '0 1\n' \
        '...\n' \
        '0 100\n' \
        '\n' \
        'Type ''%s -h'' to display full help.' % (PROGRAM, PROGRAM)
    parser = optparse.OptionParser(usage=usage)
    parser.add_option('-v', '--debug', type='int', dest='debug', default=0,
                      help='Debug Level (0=quiet; 1=summary; 2=full debug)')
    (options, args) = parser.parse_args(sys.argv[1:])
    if len(args) != 3:
        print usage
        sys.exit(1)
    phased_data_file, kinship_file, input_file = args

    try:
        # Load data
        problem = im.io.read_npz(phased_data_file)
        params = im.PhaseParam(kinship_file=kinship_file, debug=(options.debug >= 2))

        # Read all pairs from stdin first
        # pairs = [(int(line[0]), int(line[1])) for line in csv.reader(sys.stdin, delimiter=' ', skipinitialspace=True) if line]
        pairs = np.loadtxt(input_file, dtype=np.uint)
        if len(pairs.shape) < 2: 
            pairs = pairs[np.newaxis]
        print pairs

        # Loop over pairs and output segments to output file
        num_pairs = 4 * len(pairs)
        for k, ((i, j), (a, b)) in enumerate(itertools.product(pairs, itertools.product(im.constants.ALLELES, im.constants.ALLELES))):
            if options.debug >= 1:
                print 'Pair %d/%d: (%d,%d) (%d,%d)' % (k + 1, num_pairs, i, a, j, b)
            segments = im.ih.hap_segments(problem, i, a, j, b, params)
            segments.save(sys.stdout)
        print 'Done'
    except:
        traceback.print_exc(file=sys.stdout)
        sys.exit(util.EXIT_FAILURE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:25:55.483

事实证明，我正在`numpy.load()`从一个损坏的文件中加载一个 numpy npz 文件（带有 ），该文件是我通过 rsync 从我的家用计算机传输到这个文件的。在这台机器上重新生成 NPZ 文件后，一切正常。感谢您的反馈意见。

# backbone.js - Backbone：需要帮助将 URL 传递给自调用函数

> ID：14592882
> 
> 赞同：1
> 
> 时间：2013-01-29T21:44:26.600
> 
> 标签：backbone.js, requirejs, amd

[我从上一篇文章](https://stackoverflow.com/questions/14512551/backbone-console-log-returning-collection-and-undefined)中得到了这段代码可以使用：

```
;(function(){

    var mythings = {};

    function initializer($, _, Backbone, tableModel){
        return Backbone.Collection.extend({
            url: 'main-contact',  <!-- this used to be this.url.
            model: tableModel,
            initialize: function(models, options) {
               this.fetch();
            }
        });
    }

    define([
        'jquery',
        'underscore',
        'backbone',
        'models/tableModel'
    ],
    function($, _, Backbone, tableModel) {
        if (!mythings.tablesCollection){
            // this will be done on first run.
            mythings.tablesCollection = initializer($, _, Backbone, tableModel);
        }
        // all others will just return same exact instance of collection class
        return mythings.tablesCollection;
    });

})(); 
```

首先，块开头的分号是什么意思？其次，我需要在运行时在我的路由中传入一个 URL，如下所示：

```
var t = new tablesCollection(null, { url: 'main-contact'} ); 
```

直到现在，当我试图将这个项目重新创建为 AMD 时，这就是我一直在做的事情。如何在运行时将 URL 传递给自调用代码块？

编辑：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'models/tableModel',
    'collections/tablesCollection',
    'views/tablesView'
], function($, _, Backbone, tableModel, tablesCollection, tablesView) {
    require(['collections/tablesCollection'], function(tablesCollection) {
        var t = new tablesCollection(null, {url: 'main-contact'});
            var tables = new tablesView({ collection: t, template: 'main-contact-template'});
            $('#web-leads').html(tables.render().el);
    }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:46:54.130

首先，正如其他评论者所指出的，您不需要额外的“模块模式”包装；您的代码可以简化为：

```
define(['jquery',
        'underscore',
        'backbone',
        'models/tableModel'
], function($, _, Backbone, tableModel) {
    return Backbone.Collection.extend({
        url: 'main-contact',  //<-- this used to be this.url.
        model: tableModel,
        initialize: function(models, options) {
            this.fetch();
        }
    });
}); 
```

然后，在其他地方，您可以执行以下操作：

```
require(['path/to/TablesCollection', function(TablesCollection) {
    var t = new TablesCollection(null, {url: 'main-contact'});
}); 
```

传递 URL，就像你想要的那样......几乎。请参阅最后一个问题，即您的收藏不知道使用选项中的 URL；让我们解决这个问题：

```
 initialize: function(models, options) {
            this.url = options.url;
            this.fetch();
        } 
```

这样你就应该准备好了（但如果有任何混淆，请回复）。

# java - 将内容从 url 下载到 txt

> ID：14592885
> 
> 赞同：-3
> 
> 时间：2013-01-29T21:44:51.123
> 
> 标签：java, url, webpage, download

我完全迷失在这里。我试图检查以前的任何答案，但找不到解决我的问题的方法。是否有任何代码可以通过输入 url 将网页内容下载到 txt？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:46:34.300

从甲骨文网站：

```
import java.net.*;
import java.io.*;

public class URLReader {
    public static void main(String[] args) throws Exception {

        URL oracle = new URL("http://www.oracle.com/");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(oracle.openStream()));

        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
    }
} 
```

# android - 传递字符串错误

> ID：14592887
> 
> 赞同：-1
> 
> 时间：2013-01-29T21:44:59.370
> 
> 标签：android, eclipse, string, android-intent

我正在尝试将字符串从一个活动传递给另一个活动。我经历了许多关于“意图”和“传递字符串”的问题，但我一直遇到同样的错误。有人能指出我错在哪里吗？这是我的代码

第一个活动

```
 package com.example.youtube;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.text.Editable;
import android.view.Menu;
import android.widget.EditText;
import android.widget.TextView;

public class Testing extends Activity {

    public static String IPAddress = "";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_testing);

        //Alert Popup
        AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle("Step 1");
        alert.setMessage("Enter IP Address\n(i.e: 192.168.0.1)");       

        // Set an EditText view to get user input 
        final EditText input = new EditText(this);
        alert.setView(input);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
          Editable value = input.getText();
          // Do something with value!
          IPAddress = value.toString();

            //Fire that second activity
            Intent intent = new Intent( getBaseContext(),LoginIn.class);
            intent.putExtra("keyword1",IPAddress);  
            startActivity( intent);

            if (IPAddress != ""){

                startActivity(new Intent("com.example.youtube.LoginIn"));
            }
          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
            finish();
            System.exit(0);
          }
        });

        alert.show();

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        finish();
        System.exit(0);
    }

} 
```

第二次活动

```
 package com.example.youtube;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.app.Activity;
import android.content.Intent;

public class LoginIn extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        Button bverify = (Button) findViewById(R.id.verify1);
        final TextView testview = (TextView) findViewById(R.id.textView3);

        Bundle extras=getIntent().getExtras();
        String value1=extras.getString("keyword1");

        bverify.setOnClickListener(new View.OnClickListener() 
        {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.example.youtube.domotique"));
            }
        });

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        finish();
        System.exit(0);
    }

} 
```

显现

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.youtube"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Testing"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".LoginIn"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.youtube.LoginIn" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".domotique"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.youtube.domotique" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

日志猫

```
 threadid=1: thread exiting with uncaught exception (group=0x40020ac0)
FATAL EXCEPTION: main
Unable to start activity ComponentInfo{com.example.youtube/com.example.youtube.LoginIn}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.example.youtube.LoginIn.onCreate(LoginIn.java:23)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

我尝试了多种形式的 Intent，并且在我的代码中的不同位置，但是当我的第二个活动启动时，我的应用程序在按下“确定”时不断崩溃。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:39:44.587

在您的第一个活动中评论此部分并执行代码，如果您遇到相同的错误，那么您可能没有在清单中注册“com.example.youtube.domotique”和“com.example.youtube.LoginIn”

```
if (IPAddress != ""){

                    startActivity(new Intent("com.example.youtube.LoginIn"));
                } 
```

# mysql - 带有边界框的MYSQL空间点

> ID：14592896
> 
> 赞同：0
> 
> 时间：2013-01-29T21:45:37.793
> 
> 标签：mysql, gis, spatial

我正在尝试在边界框中测试一个点。它不断返回 null 而不是 0 或 1，我在做什么有什么问题？

```
SET @g1 = GEOMFROMTEXT('POLYGON(
        (-34.139468536232 18.303737037571,-34.139468536232 18.653342962429
        ,-33.849613463768 18.303737037571,-33.849613463768 18.653342962429))');

SET @g2 = GEOMFROMTEXT('POINT(-33.994541 18.478540)');

SELECT MBRCONTAINS(@g1,@g2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:07:13.273

在您的多边形中，如果我在末尾再次重复第一个点（以包围多边形），它将起作用：

看到这个 SQLfiddle：[http ://sqlfiddle.com/#!2/d41d8/6663](http://sqlfiddle.com/#!2/d41d8/6663)

```
SET @g1 = GEOMFROMTEXT('POLYGON(
        (-34.139468536232 18.303737037571,-34.139468536232 18.653342962429
        ,-33.849613463768 18.303737037571,-33.849613463768 18.653342962429, -34.139468536232 18.303737037571))');

SET @g2 = GEOMFROMTEXT('POINT(-33.994541 18.478540)');

SELECT MBRCONTAINS(@g1,@g2); 
```

# php - 如何覆盖 PHP 中的“配置命令”参数？

> ID：14592897
> 
> 赞同：0
> 
> 时间：2013-01-29T21:45:44.410
> 
> 标签：php

我正在尝试在已经托管实时网站的网络服务器上部署一些 PHP 脚本。在我的本地开发环境中，脚本运行良好。但是，在服务器上它们没有运行，我通过 apache 错误日志将问题追溯到 PHP 无法创建新的 DOMDocument 对象。我相信我已将其缩小到 phpinfo() 中“配置命令”设置中的一行。在该部分中，我看到`--disable-dom`，以及`--without-curl`。这两个都应该启用，以便我的脚本正常工作。

如果我可以在我的脚本中启用这些功能，那就太好了。否则我可能需要重新编译 php，但除非绝对必要，否则我不愿意这样做。有什么方法可以覆盖 php.ini 中的这些设置，在运行时在脚本本身中，或通过其他方法？

编辑：如果有帮助，PHP 版本是 5.3.3-14.el6_3 并且它似乎是通过`yum`. 操作系统是 Scientific Linux 6.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:52:43.353

答案在这里：

[https://serverfault.com/questions/66189/how-to-enable-dom-without-recompile-php](https://serverfault.com/questions/66189/how-to-enable-dom-without-recompiling-php)

原来在这种情况下我只需要在运行后重新启动 Apache`yum install php-xml`

编辑：这是对这里发生的事情的更全面的概述：

PHP 5.3.3 是通过 Scientific Linux 的`yum`. 默认情况下，它是从@sl-security repo 安装的。这导致编译命令排除了 curl 和 DOMDocument 等功能。

为了启用这些功能，我运行了`yum install php-xml`. 然后，我通过`dom.so`检查`dom.ini`.`/etc/php.d/`

我没有意识到我需要重新启动 Apache 才能使更改生效。在这个特定的系统上，这是通过键入以下内容来实现的：

`service httpd restart`

在这一点上，我能够使用 PHP DOMDocument 类。

phpinfo() 中的“编译命令”只是表明 PHP 是在没有模块的情况下编译的。这些模块可以在使用`yum`. 我想如果没有 yum，只需要下载适当的 .so 模块文件并编辑 php.ini 以确保包含该模块。

但当然，关键是要使任何更改生效，您必须重新启动 Apache。那部分对我来说并不明显！

# e-commerce - Prestashop 自定义字段/上传不显示

> ID：14592898
> 
> 赞同：0
> 
> 时间：2013-01-29T21:46:19.323
> 
> 标签：e-commerce, prestashop, custom-fields

我希望这应该是一个快速回答的问题。在 S/O 和 Prestashop 论坛上都找不到等价物。

在 Presashop 的后端，您可以选择设置许多文件上传和文本字段。

在该页面上，“定义标签”不可编辑。

无论您为“文件上传”和“文本字段”分配什么值，前端产品页面（我相信 product.tpl）都会显示一个文件上传。

有人知道为什么 Prestashop 后面定义的字段没有反映在前端商店中吗？提前谢谢了，

马丁

# xcode - 是否有任何可可应用程序示例随 xcode 一起安装在 mac 上？

> ID：14592902
> 
> 赞同：1
> 
> 时间：2013-01-29T21:46:30.663
> 
> 标签：xcode

我已经在 mac osx lion 上安装了 xcode 4.3，磁盘上是否安装了任何可可应用程序示例以及 xcode ？我找不到他们，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:19:18.187

如果您使用“管理器”中的文档浏览器查看文档，那么您会找到各种示例项目的链接。该链接应显示“打开项目...”，这将下载项目并打开它。

据我所知，示例项目都是根据需要下载的。这是相当不错的，因为这意味着当您下载 Xcode 时，您不会发送大量示例项目，其中大部分将永远不会打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:28:07.267

如果您从 Xcode 中下载了文档，则这些文件已经在您的硬盘上。

1.  将 Finder 导航到`~/Library/Developer/Shared/Documentation/DocSets`
2.  右键单击`com.apple.adc.documentation.AppleOSX10_8.CoreReference.docset`并选择`Show Package Contents`
3.  打开文件夹`Contents/Resources/Documents/samplecode`

或者打开一个终端并使用 `open ~/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleOSX10_8.CoreReference.docset/Contents/Resources/Documents/samplecode/`

# php - PHP数据库登录

> ID：14592906
> 
> 赞同：0
> 
> 时间：2013-01-29T21:46:36.470
> 
> 标签：php, mysql, login

请帮我解决这个问题，我做错了什么？我正在尝试创建一个登录系统并连接我的 MySQL 数据库：再次尝试将我的 MySQL 数据库与此登录系统连接。登录系统将在 Flash 中完成。谢谢大家 :)

```
<?php
 $dbhost = "databasehost";
$dbname = "users";
$dbuser = "users";
$dbpass = "pass";

//Connect to database

mysql_connect ( $dbhost, $dbuser, $dbpass)or die("Could not connect: ".mysql_error());
mysql_select_db($dbname) or die(mysql_error());

    // The response variable
    $res = "res=KO";

    // Check incoming data
    if ($_POST['$dbuser'] != "" && $_POST['$dbpass'] != "")

    {
        foreach($allowedUsers as $dbname => $dbpass)
        {
            if ($_POST['$dbuser'] == $name && $_POST['$dbpass'] == $password)

            {
                // Ok, user found
                $res = "res=OK";
                break;
            }
        }
    }

    print $res;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:22:09.593

如果您的 MySQL 实例在同一台机器上运行，那么您的主机很可能是“localhost”而不是“databasehost”，除非您更改了 hosts 文件。如果不是，那么您可能希望将主机更改为运行 MySQL 实例的 IP。

# ruby-on-rails - 使用 Mongoid 模型进行日志记录

> ID：14592910
> 
> 赞同：0
> 
> 时间：2013-01-29T21:46:57.823
> 
> 标签：ruby-on-rails, ruby, mongoid

我有一个带有 MongoDB 数据存储的 Rails 应用程序。因此，模型不会从 ActiveRecord::Base 继承。当我尝试向模型添加日志记录时，就像这样

```
logger.info "Debug application" 
```

rails 抱怨 logger 不存在，这是有道理的。除了从 ActiveRecord::Base 继承之外，如何重新添加记录器功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:20:19.237

使用 Rails.logger.info 代替 logger.info

来自[http://jasonseifer.com/2009/08/10/using-the-rails-logger-outside-of-models-and-controllers](http://jasonseifer.com/2009/08/10/using-the-rails-logger-outside-of-models-and-controllers)

# php - 外键、连接和返回索引

> ID：14592911
> 
> 赞同：0
> 
> 时间：2013-01-29T21:46:58.980
> 
> 标签：php, mysql, foreign-keys, left-join

我在 mySQL 数据库中有两个表。

*   里程碑_所有（主键：MSID）
*   user_transactions（外键：MSID）

我正在使用以下代码来查询表：

```
 $get_ms = db_query("SELECT * FROM milestones_all
        LEFT JOIN user_transactions on user_transactions.MSID = milestones_all.MSID 
        WHERE milestones_all.MID=$MID  
        AND (user_transactions.tran_status IS NULL OR user_transactions.tran_status=3)
        ORDER BY milestones_all.MSID ASC LIMIT 1"));

    while($ms = $get_ms->fetch_assoc()){
           $MSID = $ms['MSID'];
           $ms_title = $ms['ms_title'];
     } 
```

这里只是 SQL：

```
SELECT * FROM milestones_all
LEFT JOIN user_transactions on user_transactions.MSID = milestones_all.MSID 
WHERE milestones_all.MID=$MID
AND (user_transactions.tran_status IS NULL OR user_transactions.tran_status=3)
ORDER BY milestones_all.MSID ASC LIMIT 1 
```

我想要做的是打印出`milestones_all`任何没有`user_transactions`附加行的行的数据，或者如果有，则将`tran_status`in中的列`user_transactions`设置为`3`.

截至目前，查询返回有关要返回哪些行的正确结果。`ms_title`准确地返回应该是什么。问题是：`MSID`总是返回空白。在我的数据库中它不是空白的。这可能是因为`LEFT JOIN`正在使用该`MSID`列来查找匹配项吗？也许有更好的方法来做到这一点？

注意：`db_query`功能不干扰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:39:45.097

是的，这是因为您有两列名为`MSID`. 如果您将连接更改为使用`USING`而不是`ON`，它会将两列合并为一列：

```
SELECT * FROM milestones_all
LEFT JOIN user_transactions USING(MSID) 
WHERE milestones_all.MID=$MID
AND (user_transactions.tran_status IS NULL OR user_transactions.tran_status=3)
ORDER BY milestones_all.MSID ASC LIMIT 1 
```

# sas - 有没有办法在将字符变量作为参数传递之前解析它？

> ID：14592912
> 
> 赞同：1
> 
> 时间：2013-01-29T21:47:05.377
> 
> 标签：sas

```
data myout ;
set braw.accounts end = eof;
     fname = "BANK_ACCT"; 
        retain countmissing cm2 0;
        if missing(fname) = 0 then countmissing = countmissing+1; 
        if missing(BANK_ACCT) = 0 then cm2 = cm2 +1; 

    if eof then output; 
    keep fname countmissing cm2;

run; 
```

（^ 不知道为什么不缩进）。

所以我想做的是从字典中读取变量的名称，然后对每个变量进行分析，计算缺失的数量。

问题是当我将 fname 传递给 missing() 时，它正在寻找一个名为“fname”而不是“BANK_ACCT”的变量。在传递之前如何告诉它解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:37:51.067

有几种方法可以处理这个问题：

1) 构造一个包含变量名称的宏变量，然后定义一个数组。您发布的上一个问题将是一个很好的起点。像这样的东西：

```
proc sql;
 select name into :varlist separated by ' ' from dictionary.columns 
 where memname='DATASET' and libname='LIBRARY'
 and <conditions defining which columns you want>;
quit;

data myout ;
set braw.accounts end = eof;
    array fname &varlist;
    do _t = 1 to dim(fname); 
        if missing(fname[_t]) = 0 then countmissing+1; 
        if missing(BANK_ACCT) = 0 then cm2 +1; 
    end;
    if eof then output; 
    keep fname countmissing cm2;  
run; 
```

（还引入了一个新概念——+1；自动做retain var 0; bit）

顺便说一句，您可能会发现使用 CALL SYMPUT 将 countmissing 放入宏变量而不是输出一行（取决于您使用它的目的）很有用。

2) 与 1 类似，但您可以创建一个包含所有变量的数组，或所有数值变量，或从一个点到另一个点的所有变量。

```
array fname _all_; *will only work if all variables are same type;
array fname _numeric_;
array fname var_first -- var_last; *all variables in order from left to right from var_first to var_last; 
```

3）对“标准化”数据集进行操作，因此数据集只有两个（或几个）变量——“varname”和“value”。这需要一些（重要的）工作来创建，因此仅在某些情况下有用。

4）使用数据集以外的其他方法来解决这个问题。例如，PROC FREQ 或 PROC TABULATE 可以轻松地为您提供每个变量的缺失值数量（使用缺失选项）。

# c++ - C++ 菜单避免重复

> ID：14592915
> 
> 赞同：1
> 
> 时间：2013-01-29T21:47:35.653
> 
> 标签：c++, file, menu

感谢您提前查看我的问题。这可能是一个很简单的事情！

我有一个菜单，用户可以在其中选择他们希望在系统中运行的文件。

下面的代码是我的菜单选项的作用：

```
int menuLoop = 1;
int userChoice;
std::string getInput;

while(menuLoop == 1)
{
    std::cout << "Menu\n\n" 
         << "1\. 20 names\n"
         << "2\. 100 names\n"
         << "3\. 500 names\n"
         << "4\. 1000 names\n"
         << "5\. 10,000 names\n"
         << "6\. 50,000 names\n\n";
    std::cin >> userChoice;

    std::string getContent;

    if(userChoice == 1)
    {
        std::cout << "\n20 names\n"; 
        std::ifstream openFile("20.txt");
    }
    else if(userChoice == 2)
    {
        std::cout << "\n100 names\n"; 
        std::ifstream openFile("1C.txt");
    }
    else if(userChoice == 3)
    {
        std::cout << "\n500 names\n"; 
        std::ifstream openFile("5C.txt");
    }
    else if(userChoice == 4)
    {
        std::cout << "\n1000 names\n"; 
        std::ifstream openFile("1K.txt");
    }
    else if(userChoice == 5)
    {
        std::cout << "\n10,000 names\n"; 
        std::ifstream openFile("10K.txt");
    }
    else if(userChoice == 6)
    {
        std::cout << "\n50,000 names\n"; 
        std::ifstream openFile("50K.txt");
    } 
```

while 循环中的代码处理所选文件中的值，但每个选项的代码都是相同的。下一行是：

```
if(openFile.is_open()) 
```

由于我这样做的方式，它说“openFile”是未定义的，我完全理解，但我想知道是否有人知道我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:49:23.007

像这样在循环的前面声明`openFile`一次：`while`

```
std::ifstream openFile; 
```

这为您提供了一个`std::ifstream`不与任何特定文件关联的文件。然后在您的每个`if`语句中使用[`std::ifstream::open`](http://en.cppreference.com/w/cpp/io/basic_ifstream/open)而不是`std::ifstream`构造函数：

```
openFile.open("20.txt"); 
```

当然，请确保每个文件都有正确的文件名。

这样，`openFile`对象的范围将是`while`循环，但您可以根据您的条件打开不同的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T22:12:12.627

也许是这样的：

```
const MAX_OPTION = 6;
std::array< std::string, MAX_OPTION > filenames = {"20.txt","1C.txt","5C.txt","1K.txt","10K.txt","50k.txt"};

//your while loop
//...
cin >> userChoice;
//assert userChoice >= 0 < filenames.size
const std::string& filename = filenames[ userChoice ];
std::ifstream openFile(filename.c_str()); 
```

# c# - Visual Studio 2012 语法错误，带有 /<%: method %>/;

> ID：14592917
> 
> 赞同：2
> 
> 时间：2013-01-29T21:47:39.123
> 
> 标签：c#, javascript

我有一行代码从 c# 代码中获取正则表达式

```
 $("#but").keyup(function () 
 {

     var regex = /<%:StringKeeper.InfoRegex.ToString()%>/;
     var info = $("#Info").val(); // info from edit-field
     var matches = regex.exec(info);

     var part1 = matches[1];
     var part2 = matches[2];

          if (matches != null)
              {
                 if (part1.length != 6 && part2.length != 5 || 
                    (part1 == '000000' || part2 == '00000'))
                     {
                        showWarning = true;
                     }
              }
           else  { showWarning = true; }

 if (showWarning) 
 {
 $("#butWarning").show();
 $("#submitButton").attr('disabled', 'disabled');
 });

$("#but").keyup(); 
```

问题是视觉工作室没有意识到“;” 在第一行的末尾没有评论。因此，即使代码仍然有效，它也会在下一行代码上发出警告。

编辑：代码现在显示了完整的功能，因为人们想要更多信息。基本上，如果在某个输入字段的按键事件中，检查正则表达式以查看输入是否与我的正则表达式匹配，如果不是我会抛出警告。

```
 public static Regex InfoRegex
    {
        get
        {
            return new Regex(@"^[Xx][Yy]0(\d{6})(\d{5})$");
        }
    } 
```

有谁知道如何解决这个问题或我想使用的新语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:34:51.917

试试这个，但是你应该在 aspx 或 ascx 文件中尝试，而不是 js 文件。

`var regex = /<%=StringKeeper.InfoRegex.ToString()%>/;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:16:37.410

Intellisense 无法处理 .js 和 C# 和 HTML 的所有可能组合。我不时注意到这一点，然后我想知道他们是如何让它发挥作用的。

如果 InfoRegex 是 string.Empty，您的代码实际上会生成 JS 注释：

```
 var regex = /<%:StringKeeper.InfoRegex.ToString()%>/; 
```

（这让我想起了 C 谜题

```
int *p, *q;
int a = *p/*q; 
```

)

将您的原始行更改为

```
 var regex = /<%:StringKeeper.InfoRegex.ToString()%>/; /*
             /dummy-expression-for-IDE/;   /*           */ 
```

在 IDE 模式下，计算的 RegEx 被视为注释，因此忽略多行 begin-comment。案例 2 的 end-comment 需要第二个 begin-comment：

在编译模式下，使用计算的 RegEx，多行注释从第 1 行开始。

# javascript - 当 data-native-menu="false" 时，PhoneGap Jquery Mobile Ajax 回调不起作用

> ID：14592924
> 
> 赞同：0
> 
> 时间：2013-01-29T21:48:03.067
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我有一个在 Jquery Mobile 框架上运行的 phonegap 应用程序。我有许多组合框（选择），它们会在更改时触发 ajax 查询。该代码在使用本机菜单时工作正常，但是当我切换到 data-native-menu="false" 时，代码无法执行回调，这发生在我的 android 设备上，而不是在模拟器或浏览器上。由于某种原因，我无法让我的设备在调试模式下工作。

代码到达 on change 事件，它到达 $.ajax 中的 beforeSend 函数，但它永远不会完成/错误。我什至尝试添加一个隐藏字段并使用它来触发事件，因此它肯定在正确的页面上，而不是卡在弹出窗口上。

```
I'll try and make a jsfiddle.

$(document).delegate('#p1', 'pageshow', function () {

        $("#aS").change(function(){
            alert('going to change');
            getAjax('',{},function(){
                alert('got callback');
            });
        });
    });
function getAjax(request,datain,callback){
    $.mobile.showPageLoadingMsg();  
    $.ajax({
        type: "GET",
        url: 'http://open.live.bbc.co.uk/wurfldemi/network.jsonp?callback=?'+request,
        //  async: false,
        data: datain,
        beforeSend: function(x) {
            if(x && x.overrideMimeType) {
                x.overrideMimeType("application/j-son;charset=UTF-8");
            }
        },
        dataType: "jsonp",
        success: function(data){
            $.mobile.hidePageLoadingMsg();  

                callback(data);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            $.mobile.hidePageLoadingMsg();
            alert(xhr.status);
            alert(thrownError);
        }
    });
    return false;
} 
```

**编辑**

[http://jsfiddle.net/4KVNc/](http://jsfiddle.net/4KVNc/)

重申一下，这不是问题（据我所知），将事件处理程序添加到 select 的 on change 事件中，但无论是请求本身还是回调，都不是问题。

该页面在使用 data-native-menu="true" 时工作正常。我只在小提琴中使用了 '$(document).ready(function(){' 因为我不知道如何让它以任何其他方式工作，我不在真正的应用程序中使用它。

**编辑** 我已经在 5 台设备上尝试过，它似乎适用于 4.2、4.1、2.5 但不适用于 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:17:26.927

这是一个固定的 jsFiddle：http: [//jsfiddle.net/pYYAu/](http://jsfiddle.net/pYYAu/)

像这样使用它：

```
$(document).on('pagebeforeshow', '#p1', function(){   
    $(document).on('change', '#aS', function(event, ui){          
            alert('going to change');
            getAjax('',{},function(){
                alert('got callback');
            });
        });
    });
        .
        .
        . 
```

# opengl - Opengl 多重纹理和混合

> ID：14592925
> 
> 赞同：2
> 
> 时间：2013-01-29T21:48:05.043
> 
> 标签：opengl, alphablending, multitexturing

我解释我的问题：

我有三个 png 图像，第一个有通道 alpha，另外两个是 RGB：

![框架](../Images/e972bdb46be311d9582cd443affa3679.png) ![面具](../Images/b6202826fd21105c337e2d77f544d440.png) ![背景](../Images/8782904320f5ca9c275d4882f3c9bfde.png)

```
 frame                           mask                    background 
```

我必须把它混合起来才能得到这个结果

![在此处输入图像描述](../Images/dde1ae758cc6c9a3ddd8d2e09243d8e4.png)

现在我知道我必须以这种方式掩盖第三个纹理：

```
if mask_pixel=white:
    blend_pixel=pixel with alpha 0
else if mask_pixel=black:
    blend_pixel=backgroud_pixel 
```

从现在开始我写了这个：

```
glActiveTexture(GL_TEXTURE0);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, background);
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
glActiveTexture(GL_TEXTURE1);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, mask);
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
glActiveTexture(GL_TEXTURE2);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, frame);
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
    glEnable (GL_BLEND);
        glBegin(GL_QUADS);
            glMultiTexCoord2f(GL_TEXTURE0, 0.0, 0.0);
            glMultiTexCoord2f(GL_TEXTURE1, 0.0, 0.0);
            glMultiTexCoord2f(GL_TEXTURE2, 0.0, 0.0);
            glVertex3f(-0.7, 0.0, 0.0);

            glMultiTexCoord2f(GL_TEXTURE0, 1.0, 0.0);
            glMultiTexCoord2f(GL_TEXTURE1, 1.0, 0.0);
            glMultiTexCoord2f(GL_TEXTURE2, 1.0, 0.0);
            glVertex3f(0.7, 0.0, 0.0);

            glMultiTexCoord2f(GL_TEXTURE0, 1.0, 1.0);
            glMultiTexCoord2f(GL_TEXTURE1, 1.0, 1.0);
            glMultiTexCoord2f(GL_TEXTURE2, 1.0, 1.0);
            glVertex3f(0.7, 2.6, 0.0);

            glMultiTexCoord2f(GL_TEXTURE0, 0.0, 1.0);
            glMultiTexCoord2f(GL_TEXTURE1, 0.0, 1.0);
            glMultiTexCoord2f(GL_TEXTURE2, 0.0, 1.0);
            glVertex3f(-0.7, 2.6, 0.0);
        glEnd();
    glDisable(GL_BLEND);
glActiveTexture (GL_TEXTURE2);
glDisable (GL_TEXTURE_2D);
glActiveTexture (GL_TEXTURE1);
glDisable (GL_TEXTURE_2D);
glActiveTexture (GL_TEXTURE0);
glDisable (GL_TEXTURE_2D); 
```

但我不确定如何使用 glTexEnvi 来获得所需的效果，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:19:53.403

是的！我自己得出了答案：

```
glActiveTexture(GL_TEXTURE0);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, texture);
glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB, GL_SUBTRACT);
glActiveTexture(GL_TEXTURE1);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, mask);
glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB, GL_SUBTRACT);
glActiveTexture(GL_TEXTURE2);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, texture_open);
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
    glEnable (GL_BLEND);
        glBegin(GL_QUADS);
            glMultiTexCoord2f(GL_TEXTURE0, 0.0, 0.0);
            glMultiTexCoord2f(GL_TEXTURE1, 0.0, 0.0);
            glMultiTexCoord2f(GL_TEXTURE2, 0.0, 0.0);
            glVertex3f(-0.7, 0.0, 0.0);

            glMultiTexCoord2f(GL_TEXTURE0, 1.0, 0.0);
            glMultiTexCoord2f(GL_TEXTURE1, 1.0, 0.0);
            glMultiTexCoord2f(GL_TEXTURE2, 1.0, 0.0);
            glVertex3f(0.7, 0.0, 0.0);

            glMultiTexCoord2f(GL_TEXTURE0, 1.0, 1.0);
            glMultiTexCoord2f(GL_TEXTURE1, 1.0, 1.0);
            glMultiTexCoord2f(GL_TEXTURE2, 1.0, 1.0);
            glVertex3f(0.7, 2.6, 0.0);

            glMultiTexCoord2f(GL_TEXTURE0, 0.0, 1.0);
            glMultiTexCoord2f(GL_TEXTURE1, 0.0, 1.0);
            glMultiTexCoord2f(GL_TEXTURE2, 0.0, 1.0);
            glVertex3f(-0.7, 2.6, 0.0);
        glEnd();
    glDisable(GL_BLEND);
glActiveTexture (GL_TEXTURE2);
glDisable (GL_TEXTURE_2D);
glActiveTexture (GL_TEXTURE1);
glDisable (GL_TEXTURE_2D);
glActiveTexture (GL_TEXTURE0);
glDisable (GL_TEXTURE_2D); 
```

在蒙版图像中，我用白色替换了黑色，用透明度替换了白色

# jquery - jquery - 仅为当前元素的子元素设置悬停时所有列的相等高度

> ID：14592926
> 
> 赞同：0
> 
> 时间：2013-01-29T21:48:12.470
> 
> 标签：jquery, hover

我有以下 Javascript 代码将菜单的子菜单列（li 标签）的高度设置为相同的高度：

```
$(function() 
{
    var mainMenuElement = $("#mainMenu > li > a"),
        tallestColumnHeight = 0,
        mainMenuElementColumns = $("#mainMenu > li > ul.sub-menu > li");

    mainMenuElement.hover(function () 
    {
            mainMenuElementColumns.each(function()
            {
                if ($(this).height() > tallestColumnHeight) 
                { 
                    tallestColumnHeight = $(this).height(); 
                }
            });     
            mainMenuElementColumns.height(tallestColumnHeight); 
    }); 
}); 
```

这可行，但是它将所有（兄弟）顶部菜单项子菜单列的高度也设置为首先找到的 tallestColumnHeight。

如何仅针对悬停的当前元素的子元素？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:53:56.140

使用上下文查找和定位每个主列表中的子菜单，而不是所有子菜单：

```
$(function() {
    $("#mainMenu > li > a").hover(function () {
        var tallestColumnHeight = 0;
        $("ul.sub-menu > li", this).each(function () {
            if ($(this).height() > tallestColumnHeight) {
                tallestColumnHeight = $(this).height();
            }
        }).height(tallestColumnHeight);
    });
}); 
```

# c# - 如何以只读方式打开 SQL Server 数据库？

> ID：14592928
> 
> 赞同：0
> 
> 时间：2013-01-29T21:48:17.430
> 
> 标签：c#, sql-server

我有一个写入单表 SQL Server 数据库 (2008) 的 Windows 服务。

我希望另一个应用程序以只读模式读取表。

我必须做什么才能通过应用程序适当地打开数据库，使其成为只读的？

服务打开数据库的方式有什么变化吗？

显然我不能将数据库更改为只读，因为服务必须写入它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:50:36.010

无需更改服务。只需提供一个仅被授予 db_reader 角色的登录名。如果您有任何存储过程，则必须使用该`GRANT EXEC ON <proc> TO <user>`命令授予对它们的访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:50:56.633

让该应用程序与仅具有 db_datareader 角色的用户连接，发现@Server Fault：

> 在 Security > Logins 下，创建一个新登录名，然后在 User Mapping 部分中，勾选两个数据库，并为每个数据库选择 db_datareader 角色成员资格。
> 
> 这将提供对每个 DB 中所有数据的读取访问权限。
> 
> ...

[https://serverfault.com/a/116273](https://serverfault.com/a/116273)

# java - 在代码中调用 Java 控制台命令

> ID：14592929
> 
> 赞同：0
> 
> 时间：2013-01-29T21:48:22.600
> 
> 标签：java

这听起来可能很愚蠢。但这有可能吗？我正在考虑创建一个允许某人在其中编写代码的程序，然后运行代码来测试输出。当然，要做到这一点，我需要能够在 Java 中编译和运行 Java。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:52:49.947

JDK6增加了[编译工具api](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)

那应该做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:03:28.470

您可以很好地尝试使用以下代码片段从 java 程序模拟终端或命令行...

```
import java.io.IOException;

public class Test {
    public static void main(String[] args) throws IOException {
        Process p = Runtime.getRuntime().exec(new String[]{"bash","-c","echo abc > test.txt"});
        p = Runtime.getRuntime().exec(new String[]{"bash","-c","java HelloWorld > test.txt"});

    }
} 
```

因此，这段代码的基本作用是执行一个 bash shell，在该 shell 中执行各种 shell 命令，例如`echo abc > test.txt`（main 方法中的第一行）或`java HelloWorld > test.txt`（main 方法中的第二行）。所以在这里，它就像启动 shell 命令，但来自 Java 程序

# android - 如果由 android:layout_width="match_parent" 设置，getWidth() 返回 0

> ID：14592930
> 
> 赞同：16
> 
> 时间：2013-01-29T21:48:24.063
> 
> 标签：android, android-layout

我有一个名为 FractalView 的类，它扩展了 ImageView。我的目标是使用具有整个屏幕大小的此类绘制分形。它是我的活动布局文件中的唯一视图，除了顶级 LinearLayout：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
    android:background="#FFFFFFFF">

    <com.antonc.fractal_wallpaper.FractalView
        android:id="@+id/fractal"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="gone"/>
</LinearLayout> 
```

如您所见，我对 FractalView 和 LinearLayout 的 layout_width 和 layout_height 都使用了“match_parent”。在这一点上，我假设 FractalView 的大小设置为某个值，因为它匹配它的父级，它匹配它的父级（即整个屏幕）。然后我尝试使用 getWidth() 和 getHeight() 检测 FractalView 可用的大小：

```
public class FractalView extends ImageView {

private Context mContext;
private Handler mHandler;

private int mScrWidth;
private int mScrHeight;

public FractalView(Context context) {
    super(context);
    mContext = context;
    init();
}

private void init() {

    mScrWidth = getWidth();
    mScrHeight = getHeight();
    // Breakpoint
}

@Override
protected void onDraw(Canvas canvas) {
    [...]
}

} 
```

但是当我的代码到达断点时，调试器显示 mScrWidth 和 mScrHeight 为零。我尝试使用 getMeasuredWidth() 和 getMaxWidth()，但它们也返回不正确的值。我已经阅读了类似问题的几个答案，即[这个](https://stackoverflow.com/a/3594216/1204377)，他们都解释说 getWidth()在绘制*后*返回图像的大小，而我真正需要的是该视图可用的区域的宽度，*在*我开始画画之前。

有没有办法检索这些宽度和高度值？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-29T22:07:19.300

视图的大小在 之后才可用`onMeasure()`，特别是如果它设置为`wrap_content`， 或`fill_parent`。

您应该在 View 代码中或之后访问大小`onMeasure()`，或者在 Layout Tree Observer 中访问：

```
LinearLayout layout = (LinearLayout)findViewById(R.id.mylayout);
ViewTreeObserver vto = layout.getViewTreeObserver(); 
vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() { 
    @Override 
    public void onGlobalLayout() { 
        this.layout.getViewTreeObserver().removeGlobalOnLayoutListener(this); 
        int width  = layout.getMeasuredWidth();
        int height = layout.getMeasuredHeight(); 

    } 
}); 
```

您还需要添加`android:id="@+id/mylayout"`到您的 LinearLayout 以使第二个工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:54:03.943

我在输入问题时想出了一个方法。我没有尝试在构造函数方法中检索大小，而是将代码移至如下`onDraw()`方法：

```
private void init() {

}

@Override
protected void onDraw(Canvas canvas) {
    mScrWidth = canvas.getWidth();
    mScrHeight = canvas.getHeight();
    [...]
} 
```

这将返回正确的尺寸。

# php - 在忽略参数类型提示的情况下调用 PHP 方法

> ID：14592931
> 
> 赞同：3
> 
> 时间：2013-01-29T21:48:34.953
> 
> 标签：php, reflection, type-hinting

鉴于：

```
class Foo {
    private $bar;

    public function setBar(Bar $bar) {
         $this->bar = $bar;
    }
} 
```

有***没有***办法使用**不是实例的**`setBar()`参数调用？ **`Bar`**

 **```
$proxy = new Proxy();

$foo = new Foo();
$foo->setBar($proxy);

// with
class Proxy  {
} 
```

这个想法是注入一个**代理**对象而不是一个`Bar`实例。该类`Proxy`是通用的（在依赖注入框架中），不能实现/扩展`Bar`。

* * *

反射 API 似乎没有提供任何使之成为可能的东西。我希望在不使用 PHP 扩展（标准 PHP 安装 > 5.3）的情况下做到这一点（`eval`如果可能的话，我试图不理会）。

*注意：是的，这是奇怪的东西，我期待对此发表评论，但请留下“答案”以获得问题的实际答案。这不是生产代码。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:05:34.223

是否需要调用 setBar()，或者您可以通过设置私有 $bar 属性来解决吗？

后者可以使用[ReflectionProperty::setAccessible](http://www.php.net/manual/en/reflectionproperty.setaccessible.php)，然后您可以将任何内容分配给您想要的属性，就好像它是公共属性一样。它实际上不会将其公开，但可以通过反射类对其进行修改。

AFAIK，如果不在字符串中创建临时类，然后对它们进行 eval()，则前者是不可能的，这就是模拟框架所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:08:28.387

在您的示例中，调用

```
$foo->setBar($proxy); 
```

将触发*致命错误*。如果您可以忍受*严格标准*警告，例如：

> 严格的标准：TestFoo::setBar() 的声明应该与 Foo::setBar(Bar $bar) 兼容

您可以覆盖该函数，然后通过反射更改父私有属性：

```
class TestFoo extends Foo
{
    public function setBar(Proxy $bar)
    {
        $this->setPrivateParentProperty('bar', $bar);
    }

    private function setPrivateParentProperty($name, $value)
    {
        $refl     = new ReflectionObject($this);
        $property = $refl->getParentClass()->getProperty($name);
        $property->setAccessible(true);
        $property->setValue($this, $value);
    }
} 
```

然后，您可以使用`TestFoo`类型而不是`Foo`类型（除非有接口或抽象或最终阻止此）：

```
$foo = new TestFoo();
$foo->setBar($proxy); 
```

然而，正如严格标准警告所显示的那样，这并不是经过深思熟虑的。比较一下：[为什么 PHP 允许“不兼容”的构造函数？](https://stackoverflow.com/q/15413829/367456)有关为什么给出严格标准错误的更详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:21:27.170

通过反射，您可以忽略私有/受保护的修饰符，因此您可以直接获取属性。如果这不是一个选择，我担心你不得不出卖你的灵魂：

```
eval("class EvilProxy extends Proxy implements Bar {}");
$foo->setBar(new EvilProxy()); 
```

* * *

（我假设这`Bar`是动态的 - 否则您可以简单地`EvilProxy`静态创建类而无需任何`eval()`.）**

# jquery - Jquery On() 没有按预期工作

> ID：14592932
> 
> 赞同：1
> 
> 时间：2013-01-29T21:48:36.547
> 
> 标签：jquery, datatable

我正在尝试使用此行突出显示功能，它在页面加载时有效，但是当我使用分页时，该功能似乎没有保持打开状态。该行将不再突出显示。

```
$("#json-table tbody tr").on("click", function(event){
    $(this).toggleClass('row_selected');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:50:12.747

尝试：

```
$("#json-table").on("click", "tbody tr", function(){
    $(this).toggleClass('row_selected');
}); 
```

因为您重新加载表，所以您必须将`on()`处理程序绑定到不会被替换的东西，所以`#json-table`如果您只更改子项，则使用或者它的父项，否则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:50:04.347

您没有使用正确的[**on()**](http://api.jquery.com/on/)语法，使用如下：

```
$(document).on('click','#json-table tbody tr', function(event){
    $(this).toggleClass('row_selected');
}); 
```

# spring-security - 如何结合 Spring web flow、Spring Security 和像 SimpleMappingExceptionResolver 这样的 HandlerExceptionResolver？

> ID：14592933
> 
> 赞同：3
> 
> 时间：2013-01-29T21:48:43.520
> 
> 标签：spring-security, spring-webflow

我必须`SimpleMappingExceptionResolver`重定向每个未处理的异常。

```
 @Bean public SimpleMappingExceptionResolver exceptionResolver() {
           SimpleMappingExceptionResolver resolver = new SimpleMappingExceptionResolver();
           resolver.setDefaultErrorView("general-error");
           resolver.setWarnLogCategory(TamponException.class.getName());
           return resolver;
} 
```

一旦我实现了 Spring 安全性，我意识到我需要排除`AccessDeniedException`：

```
resolver.setExcludedExceptions(AccessDeniedException.class); 
```

现在我正在实现 Spring Web Flow。SWF 将这些必需`AccessDeniedException`的 s 包装在`FlowExecutionException`. 这种组合破坏了 Spring Security，因为那些包装的异常现在被`SimpleMappingExceptionResolver`. 我也可以排除`FlowExecutionException`，但这不是我想要的。

我该如何正确解决这个问题？

我的下一个想法是仅在展开的异常不是 a 时才实现 a `HandlerExceptionResolver`which 代表。但我想知道是否不存在可用于组合 SWF、Security 和 HandlerExceptionResolver 的东西。`resolveException()``AccessDeniedException`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:21:22.733

我正在使用与您的配置类似的配置，包括 Spring webflow 和 Spring security。为了处理异常，我使用 webflow 处理而不是 SimpleMappingExceptionResolver，这对我来说非常有效。

首先，您需要一个处理异常的全局 xml 流，该流将用作所有其他流的“父级”。或者您也可以在流程中直接包含全局转换和视图状态：

```
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/webflow
      http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd"
      abstract="true">

    <persistence-context/>

    <view-state id="generalException" view="../views/exception/generalException.xhtml">
        <on-entry>
            <evaluate expression="exceptionManager.extractMessages(flowExecutionException, rootCauseException)" result="viewScope.exc"/>
        </on-entry>
    </view-state>

    <global-transitions>
        <transition on-exception="java.lang.Exception" to="generalException"/>
    </global-transitions>

</flow> 
```

类 ExceptionManager 仅用于以可读的方式格式化异常，特别是在我的情况下 BatchUpdateException 需要调用 next() 方法来了解异常的来源：

```
@Service("exceptionManager")
public class ExceptionManagerImpl {

    public Map<String, String> extractMessages(Exception e, Exception root)
    {
        Map<String, String> out = new HashMap<String, String>();

        out.put("exc_message", e.getClass().toString() + ": " + e.getMessage());
        out.put("exc_details", formatStackTrace(e.getStackTrace()));
        out.put("root_message", root.getClass().toString() + ": " + root.getMessage());
        out.put("root_details", formatStackTrace(root.getStackTrace()));
        if (root instanceof BatchUpdateException)
        {
            out.put("batch_message", ((BatchUpdateException)root).getNextException().getClass().toString() + ": " + ((BatchUpdateException)root).getNextException().getMessage());
        }

        return out;
    }

    public String formatStackTrace(StackTraceElement[] elements)
    {
        String out = "";
        for (StackTraceElement ste: elements)
            out += ste.toString() + "<br/>";
        return out;
    }
} 
```

通过这种方式，所有未处理的异常都将显示到 JSF 页面或您用于视图的任何内容中。AccessDeniedException 通常通过此实现在我的系统中通过 Spring 安全性。您还可以为不同的异常指定不同的行为。

希望对你有帮助，祝你天天开心

马蒂亚

# php - 每 5 秒调用一次 mysql 查询

> ID：14592934
> 
> 赞同：1
> 
> 时间：2013-01-29T21:48:53.097
> 
> 标签：php, javascript, mysql, ajax

我正在尝试根据时间农场自动调用mysql查询内容以将其显示为一行显示mysql查询的内容

我能够制作计时器功能，但我无法将其植入 ajax 功能以自动调用 mysql 查询

我需要的是把我在`loop()`函数中创建的变量放在 ajax 函数中`showUser(str)`

这是我的带有 javascript 和 ajax 代码的 html：

```
<html>
<head>
<script>

var x=0;
function loop() {
    x= x+1;
if (x == 100) x = 1;
document.getElementById("timevar").innerHTML=x;    
setTimeout("loop()", 5000);     
}    loop(); 

function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true); \\ timevar should be instead of str
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br>
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

timevar 应该代替 str 或赋予其`showUser`功能的价值

这是页面上调用 getuser.php 的 php 代码：

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'peter', 'abc123');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ajax_demo", $con);

$sql="SELECT * FROM user WHERE id = '".$q."'";

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Comments</th>
<th>Clicks</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Comments'] . "</td>";
  echo "<td>" . $row['Clicks'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

我想做的是让每个名字的信息出现并在同一行翻转..我不希望它们出现在表格中..我试图让它更具动态性

任何帮助表示赞赏..非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:51:09.297

您可能会发现使用 jQuery 来处理您的 ajax 调用可能会让您的生活更轻松。

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

```
 $.get('ajax/callmySQL.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:54:32.610

你真的应该看看jQuery。它使生活变得更加轻松。见[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

jQuery 的 $.get 在请求完成时调用回调。您只需从它们更新文档并为下一个请求设置计时器。

就像是：

```
function update() {
    $.get(url, null, function(data, textStatus, jqXHR) {
            $('#txtHint').html(data);
            setTimeout(update, 5000);
        });
}
setTimeout(update, 5000); 
```

顺便说一句，不需要将代码作为字符串传递，您可以直接输入函数名称：`setTimeout(loop, 5000);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T08:35:22.243

我找到了我想要的东西..这只是因为我在慢慢学习并且对 javascript 很陌生 :)

我一直都有答案，但我不知道怎么写，现在我知道了：）

`timevar`我定义了我知道它应该在那里的变量..现在我通过将它放在一个函数中来定义它，因为每 10 秒增加一个数字 go +1 然后我在间隔 10 秒后再次将它放入循环中

我想我写了太多我不需要的东西..但毕竟它可以找到:)

这是答案，也许它会在某个时候帮助某人

```
<html>
<head>
<script>
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true); // timevar should be instead of str
xmlhttp.send();
}

var setdelay=10000 //delay 10 seconds
var timevar=0;

function moveit(how){
if (how==1){ //cycle foward
if (timevar<100)
timevar++
else
timevar=0
}
else{ //cycle backward
if (timevar==0)
timevar=100
else
timevar--
}}

setInterval("moveit(1)",setdelay)

var x=0;
function loop() {
    x= x+1;
if (x == 100) x = 1;
showUser("timevar");
setTimeout("loop()", 10000);     
}    loop();
</script>
</head>
<body onload="loop()">

<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

# javascript - 函数适用于 onclick 但不能通过 javascript 工作

> ID：14592936
> 
> 赞同：0
> 
> 时间：2013-01-29T21:48:59.260
> 
> 标签：javascript

```
<html>
<head>
<title></title>
</head>
<body>
<script type="text/javascript"> 
```

为什么函数在被 JavaScript 调用`changeText`时起作用，`onclick="changeText('tare.e')"`但在 JavaScript 中调用时不起作用

```
function changeText(idname,newtext)
{

   document.getElementById(idname).value = newtext;
}

changeText('tare.e','from javascript' );
// Calling here causes the error: `Unable to set value of the property 'value': object is null or undefined` 

</script>

<input id="tare.e" value="text" >
<input id="tare.e_button" type="button"  value="BUTTON"  onclick="   changeText('tare.e','from button')"/>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:25:34.703

您在文档加载之前调用 changeText() 。如果您想在文档首次加载时执行该函数，请在 onload 事件中调用它，例如：

```
<html>
    <head>
    <script type="text/javascript">
    function changeText(idname,newtext) {
       document.getElementById(idname).value = newtext;
    }

    function window_onload()
    {
    changeText('tare.e','from javascript' );
    }
    </script>
    </head>
<body onload='window_onload()'>
<input id="tare.e" value="text" >
<input id="tare.e_button" type="button"  value="BUTTON"  onclick="   changeText('tare.e','from button')"/>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:29:22.283

我发现[this](http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/) about functions ..我仍然对功能感到困惑，希望它可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:11:58.323

您的 JavaScript 在 HTML 完全加载之前运行。

将以下内容放在您的 JavaScript 代码周围...

```
window.onload = function () {

   changeText('tare.e','from javascript' );

}; 
```

这可确保您的代码在页面加载时运行。

# ruby - Cannot compile ruby 1.9.3

> ID：14592945
> 
> 赞同：20
> 
> 时间：2013-01-29T21:49:28.950
> 
> 标签：ruby, compiler-errors, osx-lion, rvm, clang

When I run

```
rvm install 1.9.3 --with-gcc=clang 
```

on Mac OSX Lion, ruby does not compile, and I get the following error in (.rvm/log/ruby-1.9.3-p374/make.log)

```
[2013-01-29 16:31:05] make
CC = clang
LD = ld
LDSHARED = clang -dynamic -bundle
CFLAGS = -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration  -pipe 
XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT
CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -I/Users/will/.rvm/usr/include -I. -I.ext/include/x86_64-darwin12.2.1 -I./include -I.
DLDFLAGS = -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  
SOLIBS = 
compiling regparse.c
regparse.c:582:15: error: implicit conversion loses integer precision: 'st_index_t' (aka 'unsigned long') to 'int' [-Werror,-Wshorten-64-to-32]
return t->num_entries;
~~~~~~ ~~~^~~~~~~~~~~
1 error generated.
make: *** [regparse.o] Error 1 
```

How can I get ruby 1.9.3 to install on Lion?

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-30T02:20:34.690

With Xcode 4.6 I was also getting this problem. I installed the command line tools which made gcc available in /usr/bin/gcc.

I managed to get it to work using:

```
rvm install 1.9.3 --with-gcc=gcc 
```

NB. I dont have homebrew installed.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-29T23:52:31.897

you are using `clang`, according to this ticket [http://bugs.ruby-lang.org/issues/5883](http://bugs.ruby-lang.org/issues/5883) - it's not "fully" supported - you need to try using `gcc-4.2`, you get instructions for homebrew with running `rvm requirements`.

here is RVM ticket for this problem [https://github.com/wayneeseguin/rvm/issues/1480](https://github.com/wayneeseguin/rvm/issues/1480)

UPDATE: Ruby-2.0.0 actually compiles better with `clang` then with `gcc-4.2`, more details here: [https://stackoverflow.com/a/15655034/497756](https://stackoverflow.com/a/15655034/497756)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-05T08:07:39.670

If you don't have rvm already installed, rvm requirements won't work. Install gcc 4.2 with homebrew and restart the rvm installation. Worked for me.

```
brew update
brew tap homebrew/dupes
brew install apple-gcc42 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-09T15:48:52.623

If you are using rbenv and ruby-build instead of rvm, you have to define, which compiler should be used to build ruby:

```
# this export must be done before every new ruby build
export CC=gcc
# use the version you wish to install
rbenv install 1.9.3-p385 
```

If it doesn't work, you need to install Gnu C Compiler (gcc) first:

```
brew update
brew tap homebrew/dupes
# install gcc, only once needed
brew install gcc
# You can view the installed GCC version, currently gcc-8
brew info gcc
# Maybe you have to tell, which gcc version must be used,
# to get it working.
export CC=gcc-8 
```

For older Systems or not up to date systems install old GCC 4.2 version:

```
brew update
brew tap homebrew/dupes
# install apple-gcc, only once needed
brew install apple-gcc42
# Maybe you have to tell, which gcc version must be used,
# to get it working on newer systems
export CC=gcc-4.2 
```

Until the ruby folks build a clang compatible ruby version, you have to export the CC variable before every build of a new ruby version or simply add the export to your .bashrc oder .zshenv file.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T14:22:42.500

I solved this using Macports.

I had problems compiling and were getting the error "*Ruby 'ruby-1.9.3-p374' was built using clang - but it's not (fully) supported, expect errors.*"

Github was also down for maintenance so I couldnt try compiling using brew as suggested in the previous answer... This is what I did, and it compiled fine on Mountain Lion 10.8.2:

**First install Macports**

[http://www.macports.org/install.php](http://www.macports.org/install.php)

**Then run:**

sudo port selfupdate

sudo port install apple-gcc42

sudo rvm install ruby-1.9.3-p374 --with-gcc=gcc-apple-4.2

# ajax - HTML5 示波器

> ID：14592947
> 
> 赞同：0
> 
> 时间：2013-01-29T21:49:42.190
> 
> 标签：ajax, html, graph, charts, html5-canvas

我需要一个免费的实时图表（最好是 HTML5），它可以像示波器一样绘制输入信号。我发现了两个非常接近我想要的例子：

*   [http://flotcharts.org/](http://flotcharts.org/)
*   [http://smoothiecharts.org/](http://smoothiecharts.org/)

两者都可以实时显示传入的数据，但是它们是从右到左滚动数据，而我尝试完全相反：从左到右绘制新数据，并在页面结束时覆盖之前的数据在一次扫描中（像大多数示波器一样）。如果图表可以同时进行扫描和滚动两种模式，那就更好了。但是到目前为止我发现的所有组件都只支持泡沫。

这是我所追求的那种显示的视频：[http ://www.youtube.com/watch?v=chZqN605Iz4](http://www.youtube.com/watch?v=chZqN605Iz4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:17:33.363

试图改变 SmoothieCharts 的来源来反转方向，但没有成功。但是，这并不意味着花费更多的时间和精力就不可能。它似乎基于时间戳，因此您可以只反转时间戳（从更高的值开始并反转）。

否则，一个想法就是简单地翻转 HTML5 画布作为后处理步骤。这样你就不必跳进图书馆了。就在渲染步骤的最后添加如下内容：

```
canvasContext.translate(width, 0);
canvasContext.scale(-1, 1);
this.canvasContext.drawImage(image, 0, 0); 
```

取自[这个 SO question](https://stackoverflow.com/questions/3129099/how-to-flip-images-horizontally-with-html5)。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T00:03:42.657

数据中的任何移动都是通过在数组中移动值并刷新图表来实现的。数据似乎来自右侧，因为它被添加到数组的末尾。而不是使用`push()`将数据添加到您的数组中，使用`unshift()`并且数据将被添加到开始或看起来被添加到左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T15:26:50.823

进入 SmoothieCharts 设置 scrollBackwards=true;

# javascript - 这个模块片段有什么问题？

> ID：14592951
> 
> 赞同：1
> 
> 时间：2013-01-29T21:49:48.200
> 
> 标签：javascript, module-pattern

我想在对象中有私有属性。以下代码不起作用：

```
var GameModule = (function(ns){

    function Game(ctx) {
        var self   = this, //use self in callback methods (requestAnimationFrame etc)
            ctx    = ctx,

        var dx = 1,
            dy = 1;

        console.log(dx, dy); //writes 1,1,

        console.log(self.dx, self.dy); //writes undefined, undefined
    }

    ns.Game = Game;
    return ns;

})(GameModule || {});

//somewhere later in a different file
$(document).ready(function(){
   var game = new GameModule.Game(some_ctx);
}); 
```

似乎`vars`类似于静态成员，而不是私有成员。

我是否必须编写`this.dx = 1`以使变量可访问（例如在成员函数中）？它不会公开变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:14:47.163

要在 Javascript 中定义类属性，你可以这样做（[小提琴](http://jsfiddle.net/8xPCW/)）：

```
var Class = function(){

    this.property = 'now this is a property';

    Class.staticProperty = 'and this is a static property';

    var property = 'this is NOT a property, but a local variable';
};

Class.prototype.propertyToo = 'this is also a property';

var object = new Class();

console.log(object.property);
console.log(object.propertyToo);
console.log(Class.staticProperty); 
```

[JavaScript 语言本身并没有提供任何访问修饰符，因此没有棘手的方法](http://blog.ramonlechuga.com/2010/08/12/private-public-properties-for-javascript/)就无法完成私有属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:16:37.630

您创建的模块中有几个错误。首先，`dx`当用 定义时是一个私有变量`var dx`。它可以在函数内部访问，但不能在外部访问，除非通过 return 语句公开，这将使其伪公开。

但是，我相信您错过了一个关键区别。有两种类型的功能。一个可以被调用的函数，例如`function func(){}`一个**函数对象**，当`new`关键字被发送给一个函数时，将它变成一个函数对象，比如`new func();`，或者在你的例子中`new GameModule.Game(some_ctx);`。

一旦`Game`被`new`关键字、`Game`is a`Function Object`和 is an实例化`instanceof Game`。此时，可以使用`this`关键字将变量或函数附加到函数对象。在 a 的内部`Function Object`，`this`是指对象，而在 a 的外部是`Function Object` `this`指窗口。您不能使用`var this.variableName`，因为那不是有效的语法。您不是在创建变量，而是在扩展对象。因此，`var dx`和`this.dx`是内存中的两个不同位置，具有不同的值。

我希望这能为你澄清一些。

这是一个演示：http: [//jsfiddle.net/BCZKG/](http://jsfiddle.net/BCZKG/)

js：

```
var GameModule = (function(ns){

    function Game(ctx) {
        var self = this,
        ctx = ctx,
        dx = 1,
        dy = 1;
        self.dx = 2,
        self.dy = 2;

        console.log(dx, dy);//1 1
        console.log(self.dx, self.dy);//2 2
    }

    ns.Game = Game;
    return ns;
})(GameModule || {});

var some_ctx = {};
var game = new GameModule.Game(some_ctx); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:14:48.917

我不确定实际问题是什么，但我看到的一个问题是您没有执行 Game by：

```
ns.Game = Game(); 
```

但是要使 var 在对象外部可访问，您必须执行 this.dx 或使用 return 语句，如：

```
return {
  dx: dx,
  dy: dy
} 
```

这是你想要的？

# android - Holo 主题中的按钮中使用的颜色深

> ID：14592962
> 
> 赞同：1
> 
> 时间：2013-01-29T21:50:30.810
> 
> 标签：android, android-theme

Android主题holo_dark中正常状态下的按钮使用哪种颜色？

我已阅读[此问题](https://stackoverflow.com/questions/10375511/color-values-for-buttons-normal-state-in-holo-dark-theme-ics)并添加了与颜色名称相对应的彩色图像，但没有一个与按钮正常状态主题 holo_dark 中使用的颜色匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:27:54.397

我不知道他们使用哪种颜色，但您可以查看他们的 9Patch 背景可绘制对象。你可以在[这里](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/btn_default_normal_holo_dark.9.png)找到它。~~请注意，它使用 alpha 值，因此您无法真正找出它是什么颜色（至少我不知道它怎么可能）。~~

**编辑：**

好的，我确实找到了如何用 Photoshop 找出不透明度。您可以在信息窗口中看到它。所以现在是颜色：

阿尔法：40%
红色：153
绿色：153
蓝色：153

颜色是这样的： `#66999999`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T18:44:05.167

我还想在我自己的应用程序中复制 Android 标准按钮的颜色，看起来使用的颜色如下：

```
Red: 188
Green: 188
Blue: 188 
```

这转换成十六进制代码是：

```
#BCBCBC. 
```

显然，这不包括 Android 在其按钮上包含边框等的事实，但这是使用的基本颜色。希望这可以帮助！

# php - 将工作时间插入mysql

> ID：14592964
> 
> 赞同：1
> 
> 时间：2013-01-29T21:50:36.637
> 
> 标签：php, mysql, datetime, insert

我正在尝试一次使用 PHP 和 MySQL（仅在工作日）插入频繁的工作时间。

> 从 : 01.02.2013 08:30
> 到 : 28.02.2013 17:30

然后它应该插入每个工作日直到 28.02.2013 这样

> 01.02.2013 08:30 -01.02.2013 17:30
> 02.02.2013 08:30 -02.02.2013 17:30
> 03.02.2013 08:30 -03.02.2013 17:30
> ...

您能否提供一些从哪里开始的提示？

我用下面的代码只插入一个日期..

```
$startDate = $rsnew["starttime"];  
$endDate =  $rsnew["endtime"];      

// Convert to UNIX timestamps                          
$currentTime = strtotime($startDate);
$endTime = strtotime($endDate);

// Loop until we reach the last day
$result = array();                          
while ($currentTime <= $endTime) {
    if (date('N', $currentTime) < 6) {
        $result[] = date('Y-m-d', $currentTime);
    }
    $currentTime = strtotime('+1 day', $currentTime);
    echo "Hallo" .$currentTime;   
}  

// start insertion        
foreach($result as $value)        
{
    $MyResult = ew_Execute("INSERT INTO dates (date) VALUES ('".$value."')");
    echo "Hallo" .$value;                                                         
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T02:21:33.523

你可能不再需要这个了，但这里有一个简单的方法，它也非常有效：

```
$start    = new DateTime('2013-02-01');
$finish   = (new DateTime('2013-02-28'))->add(new DateInterval('P1D'));
$interval = new DateInterval('P1D');
$period   = new DatePeriod($start, $interval, $finish);
$dates    = array();

foreach ($period as $dt) {
    $dates[] = $dt->format('Y-m-d');
}

$MyResult = ew_Execute("INSERT INTO dates (date) VALUES ('" . implode("'),('", $dates) . "')"); 
```

这是这样做的：

1.  为我们的开始日期和结束日期创建[**DateTime**](http://www.php.net/manual/en/class.datetime.php)对象（我们必须在结束日期上添加一天，因为我们在下面创建的循环不包括最后一天）。
2.  创建一个[**DateInterval**](http://www.php.net/manual/en/class.dateinterval.php)对象，该对象表示当我们循环遍历它们（1 天）时我们希望将 DateTimes 增加多少。
3.  创建一个[**DatePeriod**](http://www.php.net/manual/en/class.dateinterval.php)对象，它允许我们遍历我们想要的日期。
4.  创建一个空数组来存储我们稍后将添加到数据库中的日期。
5.  遍历开始日期和结束日期之间的日期，将日期添加到我们的数组中。
6.  用于[**`implode()`**](http://us3.php.net/function.implode)创建一个查询，而不是 [ *num days* ] 个查询，执行起来更快。

# php - 这个 mysqli_query 不会执行

> ID：14592967
> 
> 赞同：0
> 
> 时间：2013-01-29T21:51:05.487
> 
> 标签：php, mysql, mysqli

这是我使用*OO*风格的代码：

```
$query = "SELECT * FROM articles LIMIT 1";
$result=mysqli_query($db, $query) or die("Could Not execute query.");
$row = $result->fetch_assoc()
echo $row; 
```

使用*程序*的代码：

```
$query = "SELECT * FROM articles LIMIT 1";
$result=mysqli_query($db, $query) or die("Couldn't execute query.");
$row = mysqli_fetch_row($result);
echo $row; 
```

我已经尝试了各种不同的方法来让它工作，并且查询似乎永远不会执行。

我是`mysqli`mysql 的新手，正在努力解决一些差异。如果这个问题有明显的答案，我们深表歉意。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:08:13.660

尝试：

```
$query  = "SELECT * FROM articles LIMIT 1";
$mysqli = mysqli_connect("example.com", "user", "password", "database");
$res = mysqli_query($mysqli, $query);
$row = mysqli_fetch_assoc($res); 
```

或者：

```
$mysqli = new mysqli("example.com", "user", "password", "database");
$res = $mysqli->query($query);
$row = $res->fetch_assoc(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T11:30:21.103

假设你的

```
 $db = mysqli_connect("localhost", "user", "password", "database"); 
```

那么你可以拥有

```
$query  = "SELECT * FROM articles LIMIT 1";
$res = $db->query($query);
$row = $res->fetch_assoc(); 
```

# java - 打开 JPA Saving OneToMany ，未设置外键

> ID：14592968
> 
> 赞同：10
> 
> 时间：2013-01-29T21:51:13.673
> 
> 标签：java, openjpa

我有两个表：TaStock 和 TaStockPrice。表 TaStockPrice 中的字段 tastockid 是表 TaStock 的外键。

```
@Entity
public class TaStock {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    Integer id

    @OneToMany(mappedBy = "taStock", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    private List<TaStockPrice> tastockpriceList;

    public void addTaStockPrice(TaStockPrice taStockPrice) {
       if (taStockPrice == null) {
           return;
       }
       taStockPrice.setTaStock(this);
       if (tastockpriceList == null) {
           tastockpriceList = new ArrayList<TaStockPrice>();
           tastockpriceList.add(taStockPrice);
       } else if (!tastockpriceList.contains(taStockPrice)) {
           tastockpriceList.add(taStockPrice);
       }
    }
    ....
}

@Entity
public class TaStockPrice {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    Integer id
    @Column
    private Integer tastockid;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "tastockid", nullable = false, updatable = false, insertable = false)
    private TaStock taStock;
    ...
} 
```

**坚持与孩子一起工作**

```
@Test
@Transactional(propagation = Propagation.REQUIRES_NEW)
public void createTaStock() throws Exception {
    TaStock taStock = new TaStock();
             ...

    TaStockPrice taStockPrice = new TaStockPrice();
             ...

    taStock.addTaStockPrice(taStockPrice);
    taStockService.persist(taStock);
} 
```

我读到在持久化父类时，休眠会自动持久化该类的子类。但相反，会发生以下异常：

javax.persistence.PersistenceException：org.hibernate.exception.ConstraintViolationException：错误：“tastockid”列中的空值违反非空约束

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T19:48:40.297

我 `private Integer tastockid"`从中删除`TaStockPrice`，并进行了修改 `@JoinColumn(name = "tastockid", nullable = false, updatable = false, insertable = true)`以解决它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T22:53:34.233

您将集合设置为不可插入或不可更新。这种方式hibernate永远不会持久化它。

您可以使用注释中的级联设置来设置休眠应如何处理此关系。欲了解更多信息，这里有一篇关于该主题的详尽博文：[http](http://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/) ://www.mkyong.com/hibernate/hibernate-cascade-example-save-update-delete-and-delete-orphan/ 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T14:34:50.403

使用下面的注释`tastockpriceList`。

`@OneToMany`
`@Cascade(CascadeType.ALL)`
`@JoinColumn(name="tastock")`

那应该可以解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-19T09:00:29.123

为了启用`@OneToMany`关系的保存能力，例如

```
@OneToMany(mappedBy="myTable", cascade=CascadeType.ALL)
private List<item> items; 
```

然后你必须告诉你的`@ManyToOne`关系是允许像这样更新 myTable 的 updateable = true

```
@ManyToOne
@JoinColumn(name="fk_myTable", nullable = false, updatable = true, insertable = true) 
```

# php - 如何在插入到mysql之前将多个图像存储在一个数组中

> ID：14592970
> 
> 赞同：0
> 
> 时间：2013-01-29T21:51:17.547
> 
> 标签：php, mysql

我有一个上传功能，可以处理一个或多个文件，这些文件能够上传到一个文件夹，然后将一个索引插入 mysql。如何将多个图像存储为数组？

```
//This upload code to allow users to upload specific files 
<?php
$user_id = $_SESSION['lt_user_id'];
$user_code = $_SERVER['AUTH_USER'];
if(isset($_FILES['files'])){
$errors= array();
foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){
    $file_name = $key.$_FILES['files']['name'][$key];
    $file_size =$_FILES['files']['size'][$key];
    $file_tmp =$_FILES['files']['tmp_name'][$key];
    $file_type=$_FILES['files']['type'][$key];  
    if($file_size > 2097152){
        $errors[]='File size must be less than 2 MB';
    }

$host="server.mysql.com"; 
$username="user";
$password="password";
$db_name="db01";
$tbl_name="upload_data";

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// Insert data into mysql
$sql="INSERT into $tbl_name (ID, USER_CODE, FILE_NAME, FILE_SIZE, FILE_TYPE) VALUES('$user_id','$user_code','$file_name','$file_size','$file_type'); ";

 $desired_dir="../backup1Jan2013/images/";
        if(empty($errors)==true){
            if(is_dir($desired_dir)==false){
                mkdir("$desired_dir", 0700);        // Create directory if it does not exist
            }
            if(is_dir("$desired_dir/".$file_name)==false){
                move_uploaded_file($file_tmp,"$desired_dir/".$file_name);
            }else{                                  // rename the file if another one exist
                $new_dir="$desired_dir/".$file_name.time();
                 rename($file_tmp,$new_dir) ;               
            }
 mysql_query($sql);         
        }else{
                print_r($errors);
        }
    }
    if(empty($error)){
        echo "Success";
    }
}

// close connection
mysql_close();

?>

<form action="" method="POST" enctype="multipart/form-data">
    <input type="file" name="files[]" multiple/>
    <input type="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:54:00.240

您可能不想在数据库的同一字段中存储多个图像。

相反，我会将图像存储在文件系统中的文件夹中，并将文件夹的位置存储在您的 mysql 表中。

# php - 图片上传在服务器之前调整php大小

> ID：14592972
> 
> 赞同：0
> 
> 时间：2013-01-29T21:51:19.577
> 
> 标签：php, joomla2.5

对于这个问题的任何帮助，我将不胜感激。我有一个基于 joomla 的网站并使用第三方扩展，我试图让访问者上传包括照片在内的信息。但是，我需要在上传到服务器**之前实现一些 php 代码来调整图像大小，以减少上传时间和上传失败。**该网站的开发人员已经放置了“调整大小黑客”，但这只会在到达服务器后调整图像大小。

```
// Resize Params Hack
                $OriginalfileWidth = getimagesize($file);
                $NewFileWidth = 400; // Set here the new desired width

                if ($OriginalfileWidth[0] > $NewFileWidth) {
                    $this->resize($NewFileWidth, $file, $ext);
                }

            }
        }

    }

    protected function resize($newWidth, $targetFile, $ext) {

        $targetFile = JPATH_ROOT . '/' . $targetFile;

        if (empty($newWidth) || empty($targetFile)) {
            return false;
        }

        switch ($ext) {
            case 'jpg':
            $src = imagecreatefromjpeg($targetFile);
            break;
            case 'gif':
            $src = ImageCreateFromGif($targetFile);
            break;
            case 'png':
            $src = ImageCreateFrompng($targetFile);
            break;
        }

        list($width, $height) = getimagesize($targetFile);
        $newHeight = ($height / $width) * $newWidth;
        $tmp = imagecreatetruecolor($newWidth, $newHeight);
        imagecopyresampled($tmp, $src, 0, 0, 0, 0, $newWidth, $newHeight, $width, $height);
        if (file_exists($targetFile)) {
            unlink($targetFile);
        }

        switch ($ext) {
            case 'jpg':
            imagejpeg($tmp, $targetFile, 85); // 85 is my choice, make it between 0 – 100 for output image quality with 100 being the most luxurious
            break;
            case 'gif':
            imagegif($tmp, $targetFile);
            break;
            case 'png':
            imagepng($tmp, $targetFile, 8);
            break;
        }

    }

} 
```

我已经注意到搜索stackoverflow的代码，但我根本不知道如何输入它。非常感谢您的帮助。马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:07:36.597

使用 swf 上传：

[http://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)

关于如何在此处调整大小的演示：

[http://demo.swfupload.org/v250beta3/resizedemo/index.php](http://demo.swfupload.org/v250beta3/resizedemo/index.php)

这会在您使用 Flash 上传之前先调整图像大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T05:06:04.120

如果要在上传到服务器之前调整图像大小，则必须使用画布。我正在使用以下代码。我会对你有所帮助。

HTML

```
<input id="imageFile" type="file"><input type="button" value="Resize Image"  onclick="ResizeImage()"/> 
<img src="" id="image_output"> 
```

Javascript

```
function ResizeImage() {
    var filesToUpload = document.getElementById('imageFile').files;
    var file = filesToUpload[0];

    // Create an image
    var img = document.createElement("img");
    // Create a file reader
    var reader = new FileReader();
    // Set the image once loaded into file reader
    reader.onload = function(e) {
            img.src = e.target.result;

            var canvas = document.createElement("canvas");
            var ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0);

            var MAX_WIDTH = 400;
            var MAX_HEIGHT = 400;
            var width = img.width;
            var height = img.height;

            if (width > height) {
                if (width > MAX_WIDTH) {
                    height *= MAX_WIDTH / width;
                    width = MAX_WIDTH;
                }
            } else {
                if (height > MAX_HEIGHT) {
                    width *= MAX_HEIGHT / height;
                    height = MAX_HEIGHT;
                }
            }
            canvas.width = width;
            canvas.height = height;
            var ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0, width, height);

            var dataurl = canvas.toDataURL("image/png");
            document.getElementById('image_output').src = dataurl;
        }
    reader.readAsDataURL(file);
} 
```

# javascript - 浏览器和节点的 Javascript 库

> ID：14592973
> 
> 赞同：0
> 
> 时间：2013-01-29T21:51:33.867
> 
> 标签：javascript, jquery, ajax, api, node.js

我想为外部 API 编写一个类似于 SDK 的 JavaScript 库。
理想情况下，该库可用于前端项目、浏览器和使用 node.js 的后端项目。
最初我没有考虑节点，所以我计划要求 jquery 作为使用 ajax 函数（用于进行 API 调用）和延迟对象的依赖项，但现在我有了第二个想法。
考虑到我的目标是为这两种情况提供相同的代码库，您认为我应该怎么做？使用 jquery npm 包是个好主意，还是您有其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T22:20:57.793

您可以`jquery`毫无问题地使用 npm repo 中的包。

# hibernate - HQL 结合聚合函数

> ID：14592975
> 
> 赞同：1
> 
> 时间：2013-01-29T21:51:38.660
> 
> 标签：hibernate, group-by, hql, aggregate-functions

我的问题是我不能像在查询中那样一起使用这两个聚合函数： AVG(MIN(, 首​​先我需要从该实体 termResultCurrent 获取最小值，然后是所有最小值的平均值。可能必须更改它group by 并包含一些其他子句来获取最小值（我不知道这是否可能）。否则，它可能正在使用子查询，但我对 group by 有问题......我知道这很有挑战性但我很感激你的帮助。

```
SELECT  AVG(MIN(termResultCurrent.position)), count(*)
FROM TermSubscription subscription,
     Competitor competitor,     
     TermQuery termQueryPrev, IN(termQueryPrev.results) termResultPrev,     
     TermQuery termQueryCurrent,IN(termQueryCurrent.results) termResultCurrent     
 WHERE subscription.account.id= 274
      and competitor.id = 379 
      AND termQueryPrev.term=subscription.term      
      AND termQueryCurrent.term=subscription.term       
      AND termQueryCurrent.provider.id= 1  
      AND termQueryCurrent.provider.id=termQueryPrev.provider.id       
      AND termQueryPrev.queryDate.yearWeek = YEARWEEK(FROM_DAYS(TO_DAYS('2013-01-01') - 7), 1)       
      AND termQueryCurrent.queryDate.yearWeek = YEARWEEK('2013-01-01',1)      
      AND termResultPrev.url.hostname   MEMBER competitor.domains       
      AND termResultCurrent.url.hostname   MEMBER competitor.domains  
 group by  subscription.term.id 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T10:18:21.150

用这个：

```
 select avg(s.minimum) from
    (SELECT MIN(termResultCurrent.position) minimum
        FROM TermSubscription subscription, ...
        WHERE subscription.account.id= 274 and ...  
        group by  subscription.term.id
    ) s; 
```

# ios - [UICollectionViewCell cellImageView]：发送到实例的无法识别的选择器

> ID：14592977
> 
> 赞同：2
> 
> 时间：2013-01-29T21:51:53.490
> 
> 标签：ios, uiimageview, uiimage, selector, uicollectionviewcell

在 UICollectionView 上，我想用图像填充 CollectionViewCell。但我收到以下错误：

我的错误在哪里，我该如何解决？

```
2013-01-29 22:25:38.606 foobar[1277:c07] CollectionViewController loaded with searches: 22
2013-01-29 22:25:38.609 foobar[1277:c07] id: 0 -> content: <UIImage: 0xaa618e0>
2013-01-29 22:25:38.610 foobar[1277:c07] -[UICollectionViewCell cellImageView]: unrecognized selector sent to instance 0x939a7b0
2013-01-29 22:25:38.610 foobar[1277:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UICollectionViewCell cellImageView]: unrecognized selector sent to instance 0x939a7b0'
*** First throw call stack:
(0x1d9f012 0x139fe7e 0x1e2a4bd 0x1d8ebbc 0x1d8e94e 0x478a 0x7e9a1a 0x7eb034 0x7ed2d1 0x33792d 0x13b36b0 0x2afffc0 0x2af433c 0x2af4150 0x2a720bc 0x2a73227 0x2a738e2 0x1d67afe 0x1d67a3d 0x1d457c2 0x1d44f44 0x1d44e1b 0x1cf97e3 0x1cf9668 0x2e765c 0x24dd 0x2405)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

导致错误的代码如下：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    CollectionViewCell *myCell = (CollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:Cellid forIndexPath:indexPath];

    int row = [indexPath row];

    NSLog(@"id: %d -> content: %@", row, [self.searches objectAtIndex:row]);

    myCell.cellImageView.image = self.searches[row]; // <-- Signal SIGABRT
    return myCell;
} 
```

UICollectionViewCell 的代码如下：

## CollectionViewCell.h

```
#import <UIKit/UIKit.h>

@interface CollectionViewCell : UICollectionViewCell
@property (strong, nonatomic) IBOutlet UIImageView *cellImageView;

@end 
```

## CollectionViewCell.m

```
#import "CollectionViewCell.h"

@implementation CollectionViewCell

@synthesize cellImageView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T22:16:18.080

请确保您`CollectionViewCell`在 Interface Builder 中为单元格设置了自定义类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:17:34.580

我忘了添加类：`CollectonViewCell`到故事板（身份检查器）中的集合视图单元格。之后并重新分配`IBOutlet` `cellImageView`它的工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:13:43.503

当您调用时，`[collectionView dequeueReusableCellWithReuseIdentifier:Cellid forIndexPath:indexPath]`您不会被返回一个属于您的自定义集合视图单元子类的单元格，而是一个标准的`UICollectionViewCell`. 这向我表明，在您将单元格注册到容器视图时，可能出现了问题。如果您也发布该代码，它可能会有所帮助。

# c# - C# 正则表达式匹配多个组

> ID：14592978
> 
> 赞同：0
> 
> 时间：2013-01-29T21:51:54.730
> 
> 标签：c#, regex, match

我有一些文字在

标签之类的

```
<p>This is text a</p><p>This is text ended without p</a> 
```

我想使用正则表达式来匹配两个类并提取 InnerText：

```
const string patternDesp = @"<p>(.+?)(</p>|</a>)"; 
```

但是当我查看时`m.Groups[1]`，它只返回 1 个匹配项。`m.Groups[2]`给我

```
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:55:04.317

我已经解决了这个问题，看来我需要使用`MatchCollection`而不是`Match`.

# android - Android 远程服务回调

> ID：14592990
> 
> 赞同：12
> 
> 时间：2013-01-29T21:53:01.290
> 
> 标签：android, android-intent, service, callback, aidl

（我有一个带有 AIDL 接口的**远程**服务，该接口被多个客户端应用程序使用。我想为需要一些时间的调用向接口添加一个异步方法，但我需要**安全**的解决方案，这意味着只有我的应用程序可以与服务通信，客户端应用与服务应用签名相同，目前应用只是绑定服务，调用单一接口方法进行各种操作。

一种选择是在操作完成时从服务中广播 Intent 并在客户端应用程序中使用 BroadcastReceiver，但是（**问题 #1**）可以通过确保只有我的应用程序可以接收 Intent 的方式来完成吗？setPackage() 似乎可以做到这一点，但我需要支持 Gingerbread 设备，这似乎根据这里的答案排除了这种方法：[setPackage for intent ingingerbread](https://stackoverflow.com/questions/9370587/setpackage-for-intent-in-gingerbread)

所以看来我需要添加第二个 .aidl 接口和回调接口供服务使用，由客户端实现。我在这里看到了使用侦听器的示例，但我不确定与仅将第二个接口对象作为参数传递的客户端有什么区别（如该答案的 IScript / IScriptResult 示例中使用的那样：[Service call backs to activity in安卓](https://stackoverflow.com/questions/2026393/service-call-backs-to-activity-in-android)）

**问题 #2**，在这里使用监听器与回调方法有什么好处？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-30T09:37:37.047

回调方法/侦听器是正确的做法。（正如 CommonsWare 所说，这几乎是一回事）。我想说这比摆弄广播接收器要简单得多，因为您已经在使用aidl。

像这样的东西：

**IAsyncThing.aidl：**

```
package com.my.thingy;

import com.my.thingy.IAsyncThingListener;

interface IAsyncThing {
  void doSomething(IAsyncThingListener listener);
} 
```

**IAsyncThingListener.aidl：**

```
package com.my.thingy;

import com.my.thingy.IAsyncThingListener;

interface IAsyncThingListener {
  void onAsyncThingDone(int resultCodeIfYouLike);
} 
```

您可以通过对服务使用签名级权限来强制只有您的应用可以绑定到服务（请参阅此处的“服务权限”说明：http: [//developer.android.com/guide/topics/security/permissions .html](http://developer.android.com/guide/topics/security/permissions.html)）。具体来说：

*   在您的服务的`AndroidManifest.xml`. 确保它是`signature`水平的。
*   `service`在您的标签中添加该权限
*   在所有其他应用程序中，`uses-permission`使用它。

其他几件事要记住：

*   在调用者中，您需要子类化`IAsyncThingListener.Stub`. 您的调用应用程序代码可能已经继承了其他东西，这意味着您必须使用额外的（可能是内部的）类来接收完成通知。我提到这一点只是因为这可能是问题 #2 的答案——我并不完全理解。
*   如果服务可能与调用者处于不同的进程中，则每个进程都应使用`IBinder.linkToDeath`.

# c# - 将显示的查询/子查询转换为分组依据？

> ID：14592993
> 
> 赞同：4
> 
> 时间：2013-01-29T21:53:20.687
> 
> 标签：c#, asp.net, sql, linq-to-sql

更新：我有一个 sql 查询工作，但仍然无法将其转换为 linq2sql。请看下面的代码..

我有一个 linq 查询，它正在提取大量数据，但有时由于它在 sql 服务器上的负载而超时。我将致力于获取更有效的数据（添加索引等），但我也听说使用 group by 会比使用子查询更有效。group by 会更有效吗？如果是这样，我的查询在下面的 group by 中会是什么样子？我还不熟悉group by。请不要使用 lambda

编辑：新查询仍然很慢并且可能超时：

```
 var query = (from s in db.ZipCodeServiceAvailabilities
                         join a in db.pdx_apart_views on s.ZipCode equals a.Zip_Code.Substring(0, 5)  into a_join
                         from a in a_join.DefaultIfEmpty()
                         join b in db.ZipCodeBoundaries on s.ZipCode equals b.ZipCode  into b_join
                         from b in b_join.DefaultIfEmpty()
                         where
                           (s.IsServiced == 1 &&
                            b.Ordering % 10 == 0 &&
                           s.State == "AL")
                         group new { s, b, a } by new
                         {
                             s.ZipCode,
                             s.IsServiced,
                             b.Longitude,
                             b.Latitude,
                             b.Ordering
                         } into g
                         orderby
                           g.Key.ZipCode,
                           g.Key.Ordering
                         select new
                         {
                             g.Key.ZipCode,
                             apartCount = g.Count(p => p.a.Apartment_complex != null),
                             Longitude = g.Key.Longitude,
                             Latitude = g.Key.Latitude
                         }).ToArray(); 
```

编辑：在 linq2sql 中查询我想要的 sql 工作（非常快）：

```
select s.ZipCode, count(distinct ident) ApartCount, b.Longitude, b.Latitude from ZipCodeServiceAvailability s
                    left join pdx_apart_view
                          on s.ZipCode = left([Zip Code], 5)
                    left join ZipCodeBoundaries b
                          on s.ZipCode = b.ZipCode

  Where  IsServiced = 1 and and Ordering % 10 = 0 and State = 'AL'

  Group By s.ZipCode, IsServiced, b.Longitude, b.Latitude, b.Ordering
  Order by s.ZipCode, b.Ordering 
```

非常慢的原始查询：

```
var zips = (from s in db.ZipCodeServiceAvailabilities
    join b in db.ZipCodeBoundaries on s.ZipCode equals b.ZipCode
    where (s.IsServiced == service 
        && b.Ordering % 10 == 0 
        && s.State.Contains(state))
    orderby b.ZipCode
    select new
    {
        zipCode = b.ZipCode.Trim(),
        latitude = b.Latitude,
        longitude = b.Longitude,
        apartCount = (from a in db.pdx_apart_views
                      where a.Zip_Code.Remove(5) == b.ZipCode
                      select a.Apartment_complex).Count()

    }).ToArray(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:01:36.823

您的意思是您一般不熟悉分组，还是仅在 linq 上下文中不熟悉？

当我没有实体定义时，我发现编写纯 SQL 比 linq 更容易，以下是我认为您在 SQL 中寻找的内容 - 转换回 linq 应该相当简单。

```
select
  b.ZipCode zipCode,
  b.Latitude latitude,
  b.Longitude longitude,
  count(a.Apartment_complex) apartCount
from 
  ZipCodeServiceAvailabilities s
join ZipCodeBoundaries b 
  on s.ZipCode = b.ZipCode
left join pdx_apart_views a
  on substring(a.Zip_Code, 1, 5) = b.ZipCode
group by
  ZipCode,
  Latitude,
  Longitude 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:09:57.227

没有办法在不破坏索引的情况下复制 linq2sql 中的 left[(zip code), 5] sql 方法。答案是直接使用 ado.net，这样我就可以获得所有 sql 功能。

# image-processing - 1930 年美国人口普查的 OCR

> ID：14592996
> 
> 赞同：2
> 
> 时间：2013-01-29T21:53:30.633
> 
> 标签：image-processing, machine-learning, ocr

1930 年的美国人口普查可作为一系列大型 pdf 在线获取。可悲的是，据我所知，没有免费的服务也在上面运行 OCR。另一方面，网上有很多“热心的业余爱好者”成功完成 OCR 的例子。所以，让我们从头开始。

例如，可以在[http://i47.tinypic.com/2i7tt8k.png](http://i47.tinypic.com/2i7tt8k.png)看到一个页面，这是另一个页面：

![在此处输入图像描述](../Images/9d118bfa0d3fe024b2748e6038ac64b1.png)

什么是从图像中提取不同单词的好方法，以便人们可以开始尝试训练系统来识别它们？最终，我认为这是一个棘手的机器学习问题。

[您可以从http://archive.org/details/newyorkcensus00reel1475](http://archive.org/details/newyorkcensus00reel1475)和相关链接下载整个图像文件。