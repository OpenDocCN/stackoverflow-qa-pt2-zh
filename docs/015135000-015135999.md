# StackOverflow 问答 15135000-15135999

# uitableview - 如何从 rss 条目中检索图像？

> ID：15135001
> 
> 赞同：0
> 
> 时间：2013-02-28T11:59:39.167
> 
> 标签：uitableview, ios5, xcode4.2, tablerow

我目前正在开发一个新闻应用程序，并且非常想将图像添加到新闻文章图像的表格行中。

我设法解析了其他所有内容，只是我无法解析图像网址。

这是我用于从提要中剥离 HTML 的代码。

.M 文件

```
- (NSString *)stringByStrippingHTML:(NSString *)inputString 
{
NSMutableString *outString;

if (inputString)
{
    outString = [[NSMutableString alloc] initWithString:inputString];

    if ([inputString length] > 0)
    {
        NSRange r;

        while ((r = [outString rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
        {
            [outString deleteCharactersInRange:r];
        }      
    }
}

return outString; 
```

}

.H 文件

```
- (NSString *)stringByStrippingHTML:(NSString *)inputString; 
```

一般来说，我对 xcode 和代码都很陌生，所以我对这些东西并不熟悉。

我只是无法弄清楚解析图像的网址。

这是表格外观的代码。

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

cell.textLabel.numberOfLines=3;
cell.detailTextLabel.numberOfLines=4;

RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];

NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setTimeStyle:NSDateFormatterMediumStyle];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate];

NSString * articleDescrptionString = [[[NSString alloc] init] autorelease];
articleDescrptionString = entry.articleDescription;

cell.textLabel.text = entry.articleTitle; 

NSString *plainString = [self stringByStrippingHTML:entry.articleDescription ];

cell.imageView.image = [UIImage imageNamed: entry.articleImageUrl];

//NSString *rangedString = [plainString substringToIndex:249];  //0 to 249 makes it 250 characters

//cell.detailTextLabel.text = articleDescrptionString;
cell.detailTextLabel.text = [NSString stringWithFormat:@"%@ - %@", articleDateString, plainString];

//UIImage *theImage = [UIImage imageWithContentsOfFile:entry.articleImageUrl];
//cell.imageView.image = theImage;

return cell;
} 
```

我注释掉的任何代码目前都没有使用，因为它没有被使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:50:22.457

您需要先将图像加载到 NSData 对象中...

```
NSURL *imgURL = [NSURL URLWithString:entry.articleImageUrl];
NSData *imgData = [NSData dataWithContentsOfURL:imgURL];
cell.imageView.image = [UIImage imageWithData:imgData]; 
```

但是您必须异步执行此操作，因为如果您在没有延迟图像加载的情况下执行此操作，您的 TableView 将在滚动时存储...

# sql - 如何将普通表更改为物联网？

> ID：15135002
> 
> 赞同：1
> 
> 时间：2013-02-28T11:59:39.423
> 
> 标签：sql, oracle11g

实际上我已经创建了一张表

```
CREATE TABLE "ATR"."S_JOURNEY"
  (
    "TIMETABLE_ID"            NUMBER(*,0) primary key,
    "STATION_ID"              NUMBER(*,0),
    "SCHEDULE_ARRIVAL_TIME"   VARCHAR2(8 BYTE),
    "SCHEDULE_DEPARTURE_TIME" VARCHAR2(8 BYTE),
    "OTHER_DETAILS"           VARCHAR2(25 BYTE)
  ); 
```

现在我只想创建一个像上面一样的索引组织表。我可以通过使用

```
CREATE TABLE "ATR"."iot_S_JOURNEY"   organization index as select * from ATR.s_journey; 
```

无论如何使用`alter`命令将普通表更改为物联网。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:24:29.747

无法使用 an`alter table`将堆表转换为 IOT。

您对 CATS 语句所做的操作可能是最简单的方法。另外两种常用的方法是：

*   导出表数据，将结构重新创建为 IOT，然后导入数据

*   使用在线表重新定义。[Redefining Tables Online](http://docs.oracle.com/cd/E14072_01/server.112/e10595/tables007.htm)文档明确声明使`RDBMS_REDEFINITION`您能够：

    > 将普通表（堆组织）的组织更改为索引组织表，或执行相反的操作。

第二种选择更复杂，但据我所知，这是在线进行的唯一方法。请确保您首先在非关键系统上对其进行测试，包括生成并发修改，如果这是您实时执行时会发生的情况。

# github - 创建 Github 钩子以触发 Bamboo 构建

> ID：15135003
> 
> 赞同：2
> 
> 时间：2013-02-28T11:59:40.967
> 
> 标签：github, githooks, bamboo

我创建了一个*Github 服务挂钩*来触发*Bamboo*中的构建。这是我在 Github 中输入的*Build Key*

```
master:GAUTR-UNIT 
```

这只会触发主分支。如何在*Github中不手动输入每个分支的名称和**Bamboo Build Key的情况下触发其他分支*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T05:07:33.720

您应该能够（在 Bamboo 5 中）勾选计划配置下的“自动管理分支”设置，Bamboo 将自动拉取并使用正则表达式构建您指定的分支：

[![示例截图](../Images/b557aee59fc07eb664f957c8dd49023e.png)](https://i.stack.imgur.com/cxR94.png)
[（来源：[gyazo.com](http://gyazo.com/26306e8536b52fa5c77a00a975fc798b.png)）]

在这里你可以看到我正在构建 master 和 development 分支。

Hth，
亚伦*

# java - 从 Java 中的 servlet 读取传感器数据

> ID：15135009
> 
> 赞同：1
> 
> 时间：2013-02-28T11:59:50.950
> 
> 标签：java, servlets

我正在用 Java 编写一个读取传感器数据的应用程序，我想将这些数据实时显示给许多客户端（在他们的浏览器中）。为了实现这一点，我已经有了一个使用大气框架的 servlet，如果可能的话，可以使用 web-socket 进行通信（如果没有，则回退到长轮询）。另一方面，我有一个 Java 类，它不断读取并解释传感器数据。

然而这个问题不是关于 web socket 而是如何合并这两个程序？我对 servlet 的经验很少。据我所知，每次客户端连接时都会调度 servlet 的新实例，但我不想要数据收集程序的新实例；我希望这个数据收集程序能够与所有客户端（及其 servlet）进行通信。这可能吗？

编辑：数据收集程序实际上是从串口读取数据并解码它的数据（串口上的数据使用特殊协议加密）。

# c# - C# 将 Excel 图表作为对象（不是图片）导出到 Word

> ID：15135014
> 
> 赞同：4
> 
> 时间：2013-02-28T12:00:03.047
> 
> 标签：c#, excel, ms-word, office-interop, export-to-word

我想将 Excel 图表作为对象（Excel 图表）导出到 Word，而不是作为图片。因为使用 Chart.CopyPicture 图片很容易

我正在使用 AddOleObject，但它给出了一个关于无法链接文件的错误。这是代码：

```
Document doc; // Existing document
string chartSheet = xlsFilePath + "!" + chartSheetName;
string type = "Excel.Chart.8";
InlineShape shape = doc.Content.InlineShapes.AddOLEObject(ClassType: type, FileName: chartSheet, LinkToFile: false, DisplayAsIcon: false); 
```

我看过很多关于将 excel 导入 word 的帖子，但没有最新的或有效的。

例如：

[这](https://stackoverflow.com/questions/1658935/c-create-insert-excel-2007-charts-into-word-2007 "这在")就是我想要做的，虽然不是一张带图表的工作簿，我有一本书有很多图表，所以我插入了像 file.xls!chartSheetname 这样的图表

[这个其他](https://stackoverflow.com/questions/2672032/how-to-copy-a-formatted-cell-in-excel-to-a-table-cell-in-word-using-net)使用复制和粘贴，只是它插入单元格，而不是图表。使用图表，复制方法将图表复制到工作簿中的另一个位置...

有了[这个](http://vscontrols.blogspot.co.uk/2010/09/inline-chart-in-word-using-c-40.html)，它将一个 ole 对象添加到 word，将该对象转换为工作簿，创建一个工作表并将数据添加到该工作表。但我已经有了图表...我只想插入现有图表...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:50:11.170

问题是我使用的是 Office 2010，当您打开 .doc 时，它会以**兼容模式**打开，并且您似乎无法在兼容模式下将 .xlsx 中的对象插入 .doc 中。因此，我将 .doc 转换为 .docx，将其打开为 .docx，然后将其插入：

```
Word.Application wordAPP = new Word.Application();
Word.Document docx = wordAPP.Documents.Open(docFile, false, true, false, Format:Word.WdOpenFormat.wdOpenFormatXMLDocument);
Chart chart = xlsx.Charts[chartSheetName];
chart.ChartArea.Select();
chart.ChartArea.Copy();
docx.Application.Selection.PasteAndFormat(Word.WdRecoveryType.wdFormatOriginalFormatting); 
```

# asp.net - ASP.net DropDownList 不适用于 WebBrowser OCX 控件

> ID：15135016
> 
> 赞同：1
> 
> 时间：2013-02-28T12:00:07.450
> 
> 标签：asp.net, webbrowser-control

由于某种原因，ASP.NET DropDownList 控件无法与 Microsoft WebBrowser OCX 控件一起正常工作。单击下拉列表中的任何选项均无效。但是，当使用常规浏览器浏览页面时，它会按预期工作。

我已经录制了该行为的 GIF（“未注册”文本是我使用的软件的水印）：

![在此处输入图像描述](../Images/383e3ee7e9d64f38c5a7cf2c8eedfea4.png)

选择不同选项的唯一方法是使用键盘，但这对我们来说是不可接受的。

此处发布了此问题的可能解决方案：

[http://scn.sap.com/message/13775661](http://scn.sap.com/message/13775661)

不幸的是，我们无法修改所有客户端的注册表设置。是否可以从 ASP.NET 应用程序或托管 OCX 控件的应用程序中解决此问题？

# ruby-on-rails - Rails - 为用户帐户创建密钥持有者 - 访问限制问题

> ID：15135018
> 
> 赞同：0
> 
> 时间：2013-02-28T12:00:11.660
> 
> 标签：ruby-on-rails, permissions

我想创建一个应用程序，用户可以在其中提名一个可以对其帐户具有只读访问权限的“密钥持有人”。我正在使用设计进行用户身份验证。此外，我在数据库中有布尔字段来确定登录的用户是否是密钥持有者，并且还有一个“access_id”整数字段，该字段等于允许他们访问的用户的用户 ID。

我正在尝试创建访问限制，以便只有用户或他们的密钥持有者才能访问他们的帐户（而不仅仅是在地址栏中输入其用户号码的任何人）。稍后我将根据用户角色进一步限制访问，但是我目前收到以下错误：

```
ActiveRecord::RecordNotFound in UsersController#myaccount 
Couldn't find User without an ID 
```

它指的是我添加到 application_controller.rb 的这段代码：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :correct_user

    private

      def correct_user
        @user = User.find(params[:id])
        @keyholder = User.find(params[:access_id])

        redirect_to(root_path) unless current_user==@user||@keyholder
      end
end 
```

它给出了这一行的错误：

```
@keyholder = User.find(params[:access_id]) 
```

此外，这里是用户控制器中#myaccount 操作的代码：

```
def myaccount
    if user_signed_in?
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
    else
      redirect_to root_path, notice: 'Please login to view your account'
    end
  end 
```

我将数据库中所有记录的 access_id 设置为 0，除了密钥持有者，其中访问 id 等于允许他们访问的 user_id。

谁能帮我这个？在我进一步限制权限之前，我只希望合适的人能够访问这些帐户。谢谢！！

更新：

如果我将代码更改为：

```
def correct_user
        @user = User.find(params[:id])

        redirect_to(root_path) unless current_user==@user
      end 
```

那么用户只能访问他们自己的帐户，这很好，但我需要一种密钥持有者能够访问该帐户的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:42:03.873

此行`@keyholder = User.find(params[:access_id])`会导致错误，因为您使用的是`find`. 您可以将其更改为

```
@keyholder = User.find_by_id(params[:access_id])
#or
@keyholder = User.where(id: params[:access_id]).first 
```

`nil`当他们找不到钥匙扣时，它们都会返回。

更新：

假设`access_id`包含可以访问@user的用户的id，您可以使用以下命令进行检查

```
if @user && current_user.id == @user.id
  # don't redirect
elsif @keyholder && current_user.id == @keyholder.access_id
  # don't redirect
else
  # redirect
end 
```

简化，我们有

```
unless (@user && current_user.id == @user.id) || (@keyholder && current_user.id == @keyholder.access_id)
  # redirect
end 
```

# c# - 一个用于多个菜单项的命令处理程序

> ID：15135025
> 
> 赞同：1
> 
> 时间：2013-02-28T12:00:31.980
> 
> 标签：c#, wpf, mvvm

在我的 xaml 代码中，我有一个包含以下项目的菜单：

```
<Menu x:Name="menu" Grid.Row="0" Background="Transparent" HorizontalAlignment="Right">
        <MenuItem Header="Root">
            <MenuItem Header="Sub1" Command="{Binding Command}" CommandParameter="{Binding ???}"></MenuItem>
            <MenuItem Header="Sub2" Command="{Binding Command}" CommandParameter="{Binding ???}"></MenuItem>
            <MenuItem Header="Sub3" Command="{Binding Command}" CommandParameter="{Binding ???}"></MenuItem>
            <MenuItem Header="Sub4" Command="{Binding Command}" CommandParameter="{Binding ???}"></MenuItem>
            <MenuItem Header="Sub5" Command="{Binding Command}" CommandParameter="{Binding ???}"></MenuItem>
            <MenuItem Header="Sub6" Command="{Binding Command}" CommandParameter="{Binding ???}"></MenuItem>
        </MenuItem>
</Menu> 
```

Command 是 ICommand 类型的属性。实现是

```
 public class RelayCommand : ICommand
{
    private readonly Action<object> execute;
    private readonly Predicate<object> canExecute;

    public RelayCommand(Action<object> execute, Predicate<object> canExecute = null)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");
        this.execute = execute;
        this.canExecute = canExecute;
    }

    public void Execute(object parameter)
    {
        this.execute(parameter);
    }

    public bool CanExecute(object parameter)
    {
        return this.canExecute == null || this.canExecute(parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }
} 
```

在我的视图模型的构造函数中，我有一行：

```
this.Command = new RelayCommand(OnMenuItemExecute); 
```

OnMenuItemExecute 的方法是：

```
private void OnMenuItemExecute(object parameter)
{
   // Here i want to know which menuitem executed the command
} 
```

我只是不知道我应该作为命令参数传递什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:02:51.587

如果您想要对菜单项的引用，您可以使用 self 的相对来源。

```
<MenuItem Header="Sub1" Command="{Binding Command}" CommandParameter="{Binding RelativeSource={RelativeSource Self}}"></MenuItem> 
```

# eclipse - AppEngine 不断写入 appengine-web.xml 会导致 Eclipse 构建循环。我该如何阻止它？

> ID：15135027
> 
> 赞同：0
> 
> 时间：2013-02-28T12:00:34.857
> 
> 标签：eclipse, google-app-engine, jetty

我正在使用 Jetty 作为我项目的本地服务器的 Google AppEngine 项目。到目前为止，这一直运行良好，我突然发现，每当服务器运行时，Eclipse 都会自动构建循环。使用 SysInternals Process Monitor，我检测到原因可能是 AppEngine SDK 中的一些代码（通过 Jetty 进程）正在写入我的一个项目文件 -`war/WEB-INF/appengine-web.xml`每隔几秒钟。

这发生在我对任何类型的服务进行任何查询之前。

有人对为什么有任何想法吗？我怎样才能停止它写入这个文件？或者是否可以在写入此特定文件时使 Eclipse*不构建？*

**编辑：**这不是 Jetty，但可能是 AppEngine SDK 中的东西，但我仍然在寻求答案。

# selenium-webdriver - 查找 Execute Javascript $( ) 的状态

> ID：15135030
> 
> 赞同：1
> 
> 时间：2013-02-28T12:00:38.400
> 
> 标签：selenium-webdriver, robotframework

```
Execute Javascript  $('*:contains("Success")) 
```

有没有办法知道这个声明是否成功？我们可以将一些东西返回到变量中并检查变量的值吗？

比如像

```
${var1} = Execute Javascript  $( )
if ${var1} = "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:14:04.923

如果您使用的是 SeleniumLibrary，那么[它使用 Selenium RC](http://robotframework-seleniumlibrary.googlecode.com/hg/doc/SeleniumLibrary.html?r=2.9.1)，而不是 Selenium WebDriver （正如您最初标记您的问题）。

因此，是的，[Selenium RC 的`getEval()`方法返回 a`String`](http://code.google.com/searchframe#RBBeHyUmsSg/src/SeleniumLibrary/javascript.py&q=execute%20javascript%20package%3arobotframework-seleniumlibrary.googlecode.com&l=22)，因此您[将能够`String`从脚本返回值](http://selenium.googlecode.com/git/docs/api/py/selenium/selenium.selenium.html#selenium.selenium.selenium.get_eval)，但仅此而已：

> 获取评估指定 JavaScript 片段的结果。片段可能有多行，但只会返回最后一行的结果。

无需`return`在 JavaScript 片段中声明，始终返回最后一行。

* * *

如果您使用的是 Selenium2Library，那么是的，当然，即使[是文档也这么说](http://rtomac.github.com/robotframework-selenium2library/doc/Selenium2Library.html#Execute%20Javascript)！

它在内部使用了 WebDriver，它是[`executeScript()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/JavascriptExecutor.html#executeScript%28java.lang.String,%20java.lang.Object...%29)这样说的：

> 如果脚本有返回值（即如果脚本包含return语句），那么将采取以下步骤：
> 
> *   对于 HTML 元素，此方法返回一个`WebElement`
> *   对于小数，`Double`返回a
> *   对于非十进制数，`Long`返回a
> *   对于布尔值，`Boolean`返回a
> *   对于所有其他情况，`String`返回 a。
> *   对于数组，`List<Object>`按照上述规则返回每个对象的 a。我们支持嵌套列表。
> *   除非值是`null`或没有返回值，在其中`null`返回

# jquery-mobile - 即使禁用 ajax，jQuery UI 表单也不会在 F5 上重新提交

> ID：15135031
> 
> 赞同：0
> 
> 时间：2013-02-28T12:00:39.197
> 
> 标签：jquery-mobile

所以，我有一个表单，它的标记与下面的表单类似：

```
<form name="form1" id="form1" action="/send/confirm-and-pay" method="POST" data-ajax="false"> 
```

问题是提交表单后，我会显示一个下一页，如果用户通过按 F5 刷新页面，它不会要求再次重新提交表单，并且之前的“发布”请求现在显示为“获取”请求在萤火虫中。

萤火虫输出是：

```
1) On clicking on submit: "Post confirm-and-pay 200OK"
2) Now, on pressing F5: "Get confirm-and-pay 200OK" 
```

现在提到表单发送到“确认并付款”操作的所有值都丢失了，所以在页面上，它什么也不显示。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-24T10:24:15.880

我添加了这段代码来更改一些设置，如下所示：

```
$.mobile.ajaxEnabled = false;
$.mobile.hashListeningEnabled = false; 
```

现在，当您按“F5”时，请求已发布。你可以试试这个。

# performance - Oracle Exalogic/Exadata 性能跟踪器

> ID：15135033
> 
> 赞同：1
> 
> 时间：2013-02-28T12:00:43.887
> 
> 标签：performance, weblogic-10.x, weblogic11g, exadata

最近，我们已将我们的应用程序迁移到 Oracle Engineered Systems - EXALOGIC 和 EXADATA。从那时起，我们的应用程序的性能是可观的。

但是，我们希望在 Exalogic 堆栈上对我们的应用程序的性能进行基准测试。如果有人能告诉我们有效衡量应用程序性能需要考虑的因素，那将会很有帮助。

我能想到的几件事如下，如果您可以添加到列表中，我将不胜感激。

1.  请求/响应时间
2.  交易时间
3.  并发用户数

是否有任何开源工具可以对应用程序性能进行基准测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T17:56:47.817

最佳基准测试工具的选择取决于您进行基准测试的应用程序。当您甚至没有提供有关该应用程序的任何详细信息时，很难推荐任何东西。

例如，您可以使用[Faban](http://faban.org/) - 它是一个免费和开源的性能工作负载创建和执行框架。

# annotations - 在 JavaFX 中一次注释多个字段

> ID：15135038
> 
> 赞同：1
> 
> 时间：2013-02-28T12:00:53.127
> 
> 标签：annotations, javafx

是否可以用一个注释来注释多个字段？就像是：

```
@FXML(
private TextField tf1;
private TextField tf2;
private TextField tf3;) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:43:37.640

不，您不能用一个注释来注释多个字段。

# opengl - 用鼠标 JOGL 选择顶点

> ID：15135041
> 
> 赞同：2
> 
> 时间：2013-02-28T12:01:15.137
> 
> 标签：opengl, mouse, jogl

我使用 JOGL 并试图确保当您单击顶点时，该顶点已被选中。我正在尝试选择颜色的顶部，但不明白如何获得光标下的颜色。我在 mousePressed 中找到了这个[glReadPixels](https://stackoverflow.com/questions/8329663/glreadpixels-in-mousepressed)，但它只适用于 GLEventListener 的线程。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:30:08.137

> 我使用 JOGL 并试图确保当您单击顶点时，**该顶点已被选中。**

OpenGL 不是这样工作的。它画了一些东西，然后就忘记了。你在屏幕上看到的图片就是：一张图片。已经画了一个东西，OpenGL 没有任何记忆，它实际上画的是什么。

你想选择顶点吗？好吧，那么您必须将一条射线投影到*您*必须编写的数据结构中维护的场景*中*，以测试哪个顶点最接近该射线。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T10:10:14.093

可能这个答案为时已晚，但我会发布它。我不确定您的目的，如果您想在场景中选择对象，为什么不使用 OpenGL 选择。[你可以在](http://www.youtube.com/watch?v=ZJJQ-7R7w_s)[这里](http://www.glprogramming.com/red/chapter13.html)找到教程和演示视频（来自嘻哈人；）我认为）*

# ruby - 使用指定的环境变量执行非阻塞 shell 命令

> ID：15135046
> 
> 赞同：0
> 
> 时间：2013-02-28T12:01:29.913
> 
> 标签：ruby, cucumber, popen

我尝试使用设置的指定环境变量调用 shell 命令，并将命令的 STDOUT 重定向到我的程序的 STDOUT。

我试过：

```
IO.popen({'DISPLAY' => ':0.0'}, "cucumber"){ |f| STDOUT.puts f.gets } 
```

但我得到`Broken pipe`错误。如果没有块，则不会出现此错误`{ |f| STDOUT.puts f.gets }`

如何将命令的输出重定向到 STDOUT？

注意：我试过了：

```
IO.popen({'DISPLAY' => ':0.0'}, "cucumber", out: STDOUT) 
```

但它不会向 STDOUT 打印任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:46:59.423

我是这样做的：

```
IO.popen([{'DISPLAY' => ':0.0'}, 'cucumber']) { |f| f.each { |line| print line } } 
```

# google-chrome - 保存 JavaScript CPU Profiler 数据

> ID：15135050
> 
> 赞同：1
> 
> 时间：2013-02-28T12:01:35.950
> 
> 标签：google-chrome, google-chrome-devtools

简单的。如何保存/导出我在 Chrome 开发人员工具中看到的 Javascript CPU 配置文件数据。我正在调试我的网站并且可以保存时间轴数据，但没有找到保存配置文件数据的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:02:44.033

目前还没有这样的功能。我已经为此创建了一个错误。[https://bugs.webkit.org/show_bug.cgi?id=111198](https://bugs.webkit.org/show_bug.cgi?id=111198)

# java - Vaadin 7 Refresher 插件不起作用

> ID：15135051
> 
> 赞同：1
> 
> 时间：2013-02-28T12:01:36.597
> 
> 标签：java, vaadin

我正在从 Vaadin 6 迁移到 Vaadin 7。
在将 Vaadin 6 的 Refresher 更改为 Vaadin 7 的 Refresher 之后，似乎我应该将 addComponent(refresher) 更改为 addExtension(refresher)。但不幸的是，当我这样做时，我收到了一个空页面而不是我的组件。有人可以帮忙吗？我不完全明白我应该做什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:38:32.863

这是我使用的示例代码：

```
public class RefresherDemo extends UI  {
    Refresher refresher;
    Label timeLabel;    

    protected void init(VaadinRequest request) {
        final VerticalLayout layout = new VerticalLayout();
        layout.setMargin(true);
        setContent(layout);

        timeLabel = new Label(getTime());

        refresher = new Refresher();
        refresher.setRefreshInterval(500);
        refresher.addListener(new RefreshListener(){
            @Override
            public void refresh(Refresher source) {
                timeLabel.setValue(getTime());
            }
        });
        addExtension(refresher);        

        layout.addComponent(timeLabel);

    }

    public String getTime(){
        DateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
        Date date = new Date();
        String d = dateFormat.format(date);
        return d;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T11:38:20.497

我有同样的问题，我发现了如何解决它。我不知道自定义小部件集。有必要像这样添加对 web.xml 的引用：

```
<init-param>
    <param-name>widgetset</param-name>
    <param-value>com.mypackage.AppWidgetSet</param-value>
</init-param> 
```

希望能帮助某人

# php - 访问 Amazon EC2 根

> ID：15135054
> 
> 赞同：0
> 
> 时间：2013-02-28T12:01:43.703
> 
> 标签：php, mysql, amazon-web-services, amazon-ec2

我想安装`ZPanel`在我的上，`AMAZON EC2`但它需要 root 访问权限。

我是 Amazon EC2 的新手，我最近通过 配置了 PHP-MySQL `ec2-user`，但是当我要使用`root`而不是时`ec2-user`，它不起作用。

有什么想法可以访问root吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:34:27.310

使用 sudo 获取 root 访问权限。命令采用这种形式`sudo <command>`，或者您可以使用提升的 shell 访问`sudo su`

# php - WAMP 不显示我的文件

> ID：15135056
> 
> 赞同：0
> 
> 时间：2013-02-28T12:01:45.000
> 
> 标签：php, wampserver

我启动了 wamp 服务器，但我的浏览器没有在本地主机中显示我的文件，我不确定我应该怎么做？

一个月前我在我的系统中安装了 IIS。我在 IIS 管理器中停止了 IIS。我可以在浏览器中查看 phpmyadmin 页面。当我浏览时`localhost`，会显示带有 IIS 图像的页面。如果我浏览`localhost/my_file`它表明`You don't have permission to access /my_file on this server.`我已经完成了有[问题的描述](https://stackoverflow.com/questions/8366976/wamp-error-forbidden-you-dont-have-permission-to-access-phpmyadmin-on-this-s)

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:21:16.303

在记事本中编辑 http.conf 文件，通常位于 C:\wamp\Apache2\conf 。然后执行 CTL+F 或从记事本菜单栏中转到 EDIT/FIND。这将打开查找窗口。在“查找内容”框中键入 80，然后单击下一步查找。将 80 替换为希望 apache 侦听的任何端口。根据您的配置，您可能需要更改为两个或更多位置。然后重新启动您的 apache 服务器。Apache 应该监听您在 http.conf 文件中设置的端口。希望这可以帮助。

# mysql - eclipse mysql连接

> ID：15135062
> 
> 赞同：1
> 
> 时间：2013-02-28T12:01:53.470
> 
> 标签：mysql, eclipse, jdbc, connection, classnotfoundexception

我正在做一个项目，我们需要从 mysql 数据库中访问表。但是，我在 Eclipse 中不断收到以下异常。

```
java.lang.classnotfoundexception com.mysql.jdbc.driver 
```

我已经下载`mysql-connector-java-5.1.23`并尝试将 jar 文件放在项目的 lib 文件中，由于它不起作用，我将它放在 Apache 的 lib 中。但又遇到了同样的问题。我也尝试将环境类路径变量设置为指向..但`jar file`它仍然没有工作..

我正在使用 eclipse juno 和 MySQL Server 5.0 和 apache tomcat 7.0

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:03:31.633

尝试这个

右键单击项目

```
-->buildpath
 -->configure build path
-->add external jar files
and then select your jar file 
```

您需要添加到项目的构建路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:08:59.790

如果您正在创建 JPA 项目，那么您必须添加 .jar 文件。

右键单击项目->构建路径->配置构建路径。在那单击顶部的“库”。现在单击添加外部罐子并浏览您下载并添加的罐子。

希望它会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:10:06.390

右键单击您的项目选择 Propertys 然后选择 Java Build Path 并将您的文件添加为外部 JAR

# forms - 如何使用 Symfony 2 预先选择表单单选项目？

> ID：15135067
> 
> 赞同：6
> 
> 时间：2013-02-28T12:02:13.203
> 
> 标签：forms, symfony, checkbox, radio-button

我正在研究一种语言选择表：

```
 $currentLocale = "en_US"; // This is indeed sent to the formType

    $langs = array(
        'fr_FR' => 'fr',
        'en_US' => 'en'
        );

    $builder->add('language', 'language', array(
        'choices' => $langs,
        'expanded' => true,
        'multiple' => false,
        'required' => false,
        'label' => false,
    )); 
```

HTML 代码如下所示（简化）：

```
<div id="languageForm_language">
    <input type="radio" value="fr_FR">
    <input type="radio" value="en_US">
</div> 
```

根据价值，我怎样才能预先选择第二个项目`$currentLocale`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T12:08:43.253

在您的`$langs`数组中，您可以像这样指定键值对：

```
array(
  0 => 'value1',
  1 => 'value2'
) 
```

现在，例如您要预选`value2`，您可以将`data`属性设置为来自的键`value2`：

```
$builder->add('language', 'choice', array(
    'choices' => $langs,
    'expanded' => true,
    'multiple' => false,
    'required' => false,
    'label' => false,

    'data' => 1
)); 
```

据此，您可以将`data`属性设置为`$currentLocale`变量以预选它。**您的代码应如下所示：**

```
$currentLocale = "en_US"; // This is indeed sent to the formType

$langs = array(
    'fr_FR' => 'fr',
    'en_US' => 'en'
);

$builder->add('language', 'choice', array(
    'choices' => $langs,
    'expanded' => true,
    'multiple' => false,
    'required' => false,
    'label' => false,
    'data' => $currentLocale
)); 
```

**注意：**方法中的第二个参数不`add()`应该是.`choice``language`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T12:09:06.487

如果表单与模型对象一起使用，只需在对象本身上设置语言，然后再将其传递给表单：

```
$object->setLanguage($currentLocale);
$form = $this->createForm('some_form_type', $object); 
```

否则，将[`data`选项](http://symfony.com/doc/master/reference/forms/types/form.html#data)设置为默认语言键：

```
$builder->add('language', 'language', array(
    'choices' => $langs,
    'data'    => $currentLocale,
    // ...
)); 
```

# shell - 将列添加到 shell 脚本中的字段

> ID：15135068
> 
> 赞同：0
> 
> 时间：2013-02-28T12:02:16.087
> 
> 标签：shell, awk

如何在文件中再添加 6 个以空格分隔的列。

输入文件如下所示：

```
-11.160574
...
-11.549076
-12.020907
...
-12.126601
...
-11.93235
...
-8.297653 
```

其中`...`代表 50 多行数字。

我想要的输出是这样的：

```
-11.160574 1  1  1 1 1 14
...
-11.549076 51 51 1 1 1 14
-12.020907 1  1  2 2 1 14
...
-12.126601 51 51 2 2 1 14
...
-11.93235 1  1  51 51 1 14
...
-8.297653  51 51 51 51 1 14 
```

第 2 列和第 3 列是 1 到 51 的循环。

第 4 列和第 5 列也是 1 到 51 的循环，但从上面看是在上层。

最后两个常量列 1 和 14。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:13:07.953

使用循环逐行读取文件并维护计数器以跟踪字段编号，如下所示：

```
#!/bin/bash
field1=1
field2=1
while read line
do
    echo "$line $field1 $field1 $field2 $field2 1 14"
    (( field1++ ))
    if (( $field1 == 52 )); then
        field1=1
        (( field2++ ))
    fi
done < file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:15:23.027

给你，一个 awk 脚本：

```
{
    mod = 51
    a = (NR - 1) % mod + 1
    b = int((NR - 1) / mod) + 1
    c = 1
    d = 14
    print $0,a,a,b,b,c,d
} 
```

用类似的东西运行它`awk -f the-script.awk in-file.txt`。或者使其可执行并`#!/usr/bin/awk -f`在顶部添加，您可以直接运行它而无需键入`awk -f`.

# php - 中文提供 php preg_match_all

> ID：15135083
> 
> 赞同：2
> 
> 时间：2013-02-28T12:03:12.097
> 
> 标签：php, preg-match-all, bibtex

我有一个带有 Bibtex 导出的文本文件。文本文件有许多遵循以下模式的条目。

```
@article{ls_leimeister,
  added-at = {2013-01-18T11:14:11.000+0100},
  author = {Wegener, R. and Leimeister, J. M.},
  biburl = {http://www.bibsonomy.org/bibtex/27bb26b4b4858439f81aa0ec777944ac5/ls_leimeister},
  journal = {International Journal of Technology Enhanced Learning (to appear)},
  keywords = {Challenges Communities: Factors Learning Success VirtualCommunity and itegpub pub_jml pub_rwe},
  note = {JML_390},
  title = {Virtual Learning Communities: Success Factors and Challenges},
  year = 2013
} 
```

我想使用 php 并考虑 preg_match_all

以下没有让我到任何地方：

```
preg_match_all('/@^.*}$/', file_get_contents($file_path),$results); 
```

我想从简单的开始，但这并没有真正奏效。我对 php RegEx 有点陌生。

完美的最终输出将是：

```
Array
    (
        [0] => Array
            (
                ['type'] => article
                ['unique_name'] => ls_leimeister
                ['added-at'] => 2013-01-18T11:14:11.000+0100
                ['author'] => Wegener, R. and Leimeister, J. M.
                ['biburl'] => http://www.bibsonomy.org/bibtex/27bb26b4b4858439f81aa0ec777944ac5/ls_leimeister
                ['journal'] => International Journal of Technology Enhanced Learning (to appear)
                ['keywords'] => Challenges Communities: Factors Learning Success VirtualCommunity and itegpub pub_jml pub_rwe
                ['note'] => JML_390
                ['title'] => Virtual Learning Communities: Success Factors and Challenges
                ['year'] => 2013
            )

        [1] => Array
            (
                [...] => …
            )

    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:13:14.747

试试这个：这里我只提取了`type`，`unique_name`通过查看它，你可以提取所有其他的。

```
$str = '@article{ls_leimeister,
  added-at = {2013-01-18T11:14:11.000+0100},
  author = {Wegener, R. and Leimeister, J. M.},
  biburl = {http://www.bibsonomy.org/bibtex/27bb26b4b4858439f81aa0ec777944ac5/ls_leimeister},
  journal = {International Journal of Technology Enhanced Learning (to appear)},
  keywords = {Challenges Communities: Factors Learning Success VirtualCommunity and itegpub pub_jml pub_rwe},
  note = {JML_390},
  title = {Virtual Learning Communities: Success Factors and Challenges},
  year = 2013
}';

preg_match_all('/@(?P<type>\w+){(?P<unique_name>\w+),(.*)/',$str,$matches);

echo $matches['type'][0];
echo "<br>";
echo $matches['unique_name'][0];
echo "<br>";

echo "<pre>";
print_r($matches); 
```

输出数组格式与您的略有不同，但您可以将此格式更改为您的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T14:32:32.900

图案`/^@([^{]+)\{([^,]+),\s*$|^\s*([^\R@=]+) = \{(.*?)}/ms`：（[演示](https://regex101.com/r/Gu4Vx7/1)）

这种模式有两种选择；每个包含两个捕获组。

*   `type`并被`unique_name`捕获并存储在元素`[1]`和中`[2]`。
*   所有其他键值对都存储在元素`[3]`和`[4]`.

这种分离的数组存储允许在构建所需的输出数组结构时进行可靠的处理。

输入：

```
$bibtex='@BOOK{ko,
   title = {Wissenschaftlich schreiben leicht gemacht},
   publisher = {Haupt},
   year = {2011},
   author = {Kornmeier, M.},
   number = {3154},
   series = {UTB},
   address = {Bern},
   edition = {4},
   subtitle = {für Bachelor, Master und Dissertation}
}

@BOOK{nial,
   title = {Wissenschaftliche Arbeiten schreiben mit Word 2010},
   publisher = {Addison Wesley},
   year = {2011},
   author = {Nicol, N. and Albrecht, R.},
   address = {München},
   edition = {7}
}

@ARTICLE{shome,
   author = {Scholz, S. and Menzl, S.},
   title = {Alle Wege führen nach Rom},
   journal = {Medizin Produkte Journal},
   year = {2011},
   volume = {18},
   pages = {243-254},
   subtitle = {ein Vergleich der regulatorischen Anforderungen und Medizinprodukte
   in Europa und den USA},
   issue = {4}
}

@INBOOK{shu,
   author = {Schulz, C.},
   title = {Corporate Finance für den Mittelstand},
   booktitle = {Praxishandbuch Firmenkundengeschäft},
   year = {2010},
   editor = {Hilse, J. and Netzel, W and Simmert, D.B.},
   booksubtitle = {Geschäftsfelder Risikomanagement Marketing},
   publisher = {Gabler},
   pages = {97-107},
   location = {Wiesbaden}
}'; 
```

方法：（[演示](http://sandbox.onlinephpfunctions.com/code/c716eb02b3aeba873537d830880483916b09ad36)）

```
$pattern='/^@([^{]+)\{([^,]+),\s*$|^\s*([^\R@=]+) = \{(.*?)}/ms';
if(preg_match_all($pattern,$bibtex,$out,PREG_SET_ORDER)){
    foreach($out as $line){
        if(isset($line[1])){
            if(!isset($line[3])){  // this is the starting line of a new set
                if(isset($temp)){
                    $result[]=$temp;  // send $temp data to permanent storage
                }
                $temp=['type'=>$line[1],'unique_name'=>$line[2]];  // declare fresh new $temp
            }else{
                $temp[$line[3]]=$line[4];  // continue to store the $temp data
            }
        }
    }
    $result[]=$temp;  // store the final $temp data
}
var_export($result); 
```

输出：

```
array (
  0 => 
  array (
    'type' => 'BOOK',
    'unique_name' => 'ko',
    'title' => 'Wissenschaftlich schreiben leicht gemacht',
    'publisher' => 'Haupt',
    'year' => '2011',
    'author' => 'Kornmeier, M.',
    'number' => '3154',
    'series' => 'UTB',
    'address' => 'Bern',
    'edition' => '4',
    'subtitle' => 'für Bachelor, Master und Dissertation',
  ),
  1 => 
  array (
    'type' => 'BOOK',
    'unique_name' => 'nial',
    'title' => 'Wissenschaftliche Arbeiten schreiben mit Word 2010',
    'publisher' => 'Addison Wesley',
    'year' => '2011',
    'author' => 'Nicol, N. and Albrecht, R.',
    'address' => 'München',
    'edition' => '7',
  ),
  2 => 
  array (
    'type' => 'ARTICLE',
    'unique_name' => 'shome',
    'author' => 'Scholz, S. and Menzl, S.',
    'title' => 'Alle Wege führen nach Rom',
    'journal' => 'Medizin Produkte Journal',
    'year' => '2011',
    'volume' => '18',
    'pages' => '243-254',
    'subtitle' => 'ein Vergleich der regulatorischen Anforderungen und Medizinprodukte
   in Europa und den USA',
    'issue' => '4',
  ),
  3 => 
  array (
    'type' => 'INBOOK',
    'unique_name' => 'shu',
    'author' => 'Schulz, C.',
    'title' => 'Corporate Finance für den Mittelstand',
    'booktitle' => 'Praxishandbuch Firmenkundengeschäft',
    'year' => '2010',
    'editor' => 'Hilse, J. and Netzel, W and Simmert, D.B.',
    'booksubtitle' => 'Geschäftsfelder Risikomanagement Marketing',
    'publisher' => 'Gabler',
    'pages' => '97-107',
    'location' => 'Wiesbaden',
  ),
) 
```

这是我从中提取新示例输入字符串[的站点。](https://nzhagen.github.io/bibulous/)

# azure - 如何从 azure 网站访问托管为 azure blob 的 XML

> ID：15135089
> 
> 赞同：0
> 
> 时间：2013-02-28T12:03:29.330
> 
> 标签：azure, cross-domain, azure-blob-storage, azure-web-app-service

我目前正在研究问题：我们有一个后端应用程序，它创建包含内容的 XML 文件并将它们存储为 Azure Blob（我们无法更改此设置）。

Blob 示例网址： http: [//mytestaccount.blob.core.windows.net](http://mytestaccount.blob.core.windows.net)

我们正在实现一个使用这些 XML 文件的网页。

我们当前的解决方案是托管在与上述 XML 文件相同的 blob 上的静态网页（不需要 iis 或任何其他服务器）。

问题 1：有没有办法将域名重定向到我们当前作为 blob 托管的网页？

我们考虑过不将我们的 Web 应用程序托管为 Blob，而是使用 Azure 网站。这会产生跨域请求的问题（我们必须获取那些 XML 文件）。

网站示例网址： http: [//mytestpage.azurewebsites.net](http://mytestpage.azurewebsites.net)

问题 2：有没有办法通过 jquery ajax 调用从这样的网页（托管为 Azure 网页）下载 XML 到存储为 Blob 的 xml？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:52:31.450

> 问题 1：有没有办法将域名重定向到我们当前作为 blob 托管的网页？

是的，当然可以这样做，但是目前存在一些限制。请参阅有关配置指向 blob 存储的子域的链接：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee795179.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee795179.aspx)。请注意，目前您无法使用此方法为您的网站指定默认文档。

> 问题 2：有没有办法通过 jquery ajax 调用从这样的网页（托管为 Azure 网页）下载 XML 到存储为 Blob 的 xml？

~~读取 blob 不会导致跨域请求问题。当您尝试在 Blob 存储中发布/放置一些内容时，会出现跨域问题。~~

~~只要您的 blob 容器是公共的，您就应该能够毫无问题地访问 blob。这是一个简单的 GET。但是，如果您的 blob 容器是私有的，那么您需要在具有“读取”权限的 blob 上创建一个共享访问签名 URI，并在您的 jQuery AJAX 调用中使用该 URI。~~

更新：通过 jQuery AJAX 调用读取 blob 会出现“跨域”错误。

# sql - 来自几个表的几个 SUM

> ID：15135091
> 
> 赞同：1
> 
> 时间：2013-02-28T12:03:33.077
> 
> 标签：sql, oracle, plsql

我想我无法正确地提出我的问题，所以我的 SQL 问题出现了。我运行以下查询：

```
SELECT P.ORDER_NO, P.LINE_NO, P.RELEASE_NO, SUM(P.BUY_QTY_DUE) 
FROM PURCHASE_ORDER_LINE_ALL P
WHERE P.CONTRACT='APC32' AND P.PART_NO='900-0089' AND ORDER_NO='38288'
GROUP BY P.ORDER_NO, P.LINE_NO, P.RELEASE_NO; 
```

结果变为：

```
ORDER_NO LINE_NO RELEASE_NO SUM(P.BUY_QTY_DUE)
38288    1       1          140 
```

第二个查询是：

```
SELECT R.ORDER_NO, R.LINE_NO, R.RELEASE_NO, SUM(R.INV_QTY_ARRIVED)
FROM PURCHASE_RECEIPT_NEW R
WHERE R.ORDER_NO='38288' AND R.LINE_NO='1' AND R.RELEASE_NO='1' 
GROUP BY R.ORDER_NO, R.LINE_NO, R.RELEASE_NO; 
```

结果：

```
ORDER_NO LINE_NO RELEASE_NO SUM(R.INV_QTY_ARRIVED)
38288    1       1          140 
```

如果我使用以下结果显然是错误的。我怎样才能得到这样的结果：

```
ORDER_NO LINE_NO RELEASE_NO SUM(P.BUY_QTY_DUE) SUM(R.INV_QTY_ARRIVED)
38288    1       1          140                140 
```

```
SELECT P.ORDER_NO, P.LINE_NO, P.RELEASE_NO, SUM(P.BUY_QTY_DUE), SUM(R.INV_QTY_ARRIVED)
FROM 
PURCHASE_ORDER_LINE_ALL P
LEFT JOIN PURCHASE_RECEIPT_NEW R
ON P.ORDER_NO=R.ORDER_NO AND P.LINE_NO=R.LINE_NO AND P.RELEASE_NO=R.RELEASE_NO
WHERE P.CONTRACT='APC32' AND P.PART_NO='900-0089' AND R.ORDER_NO='38288' AND R.LINE_NO='1' AND R.RELEASE_NO='1' 
GROUP BY P.ORDER_NO, P.LINE_NO, P.RELEASE_NO; 
```

错误的结果，排序：

```
ORDER_NO LINE_NO RELEASE_NO SUM(P.BUY_QTY_DUE) SUM(R.INV_QTY_ARRIVED)
38288    1       1          420                140 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:47:54.813

将两者分组，然后加入他们。

```
select pal.order_no,pal.line_no,pal.release_no,pal.sum_buy_qty_due,prn.sum_inv_qty_arrived
  from (select P.order_no,P.line_no,P.release_no,
               sum(P.buy_qty_due) sum_buy_qty_due
          from purchase_order_line_all P
         where P.contract = 'APC32'
           and P.part_no = '900-0089'
           and order_no = '38288'
         group by P.order_no,P.line_no,P.release_no) pal
       inner join (select R.order_no,R.line_no,R.release_no,
                          sum(R.inv_qty_arrived) sum_inv_qty_arrived
                     from purchase_receipt_new R
                    where R.order_no = '38288'
                      and R.line_no = '1'
                      and R.release_no = '1'
                    group by R.order_no,R.line_no,R.release_no) prn
               on prn.order_no = pal.order_no 
                  and prn.line_no = pal.line_no 
                  and prn.release_no = pal.release_no 
```

例如：[http ://sqlfiddle.com/#!4/87d9b/1](http://sqlfiddle.com/#!4/87d9b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:09:16.840

```
SELECT P.ORDER_NO, P.LINE_NO, P.RELEASE_NO, SUM(P.BUY_QTY_DUE) 
FROM PURCHASE_ORDER_LINE_ALL P
WHERE P.CONTRACT='APC32' AND P.PART_NO='900-0089' AND ORDER_NO='38288'
GROUP BY P.ORDER_NO, P.LINE_NO, P.RELEASE_NO;
UNION/UNION ALL
SELECT 0, 0, 0,0, SUM(R.INV_QTY_ARRIVED)
FROM PURCHASE_RECEIPT_NEW R
WHERE R.ORDER_NO='38288' AND R.LINE_NO='1' AND R.RELEASE_NO='1' 
GROUP BY R.ORDER_NO, R.LINE_NO, R.RELEASE_NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:55:33.187

Query:

```
SELECT P.ORDER_NO,
       P.LINE_NO,
       P.RELEASE_NO,
       SUM(P.BUY_QTY_DUE) AS  SUMBUY_QTY_DUE,
       (SELECT SUM(R.INV_QTY_ARRIVED)
        FROM PURCHASE_RECEIPT_NEW R
        WHERE R.ORDER_NO=P.ORDER_NO
          AND R.LINE_NO=P.LINE_NO
          AND R.RELEASE_NO=P.RELEASE_NO) AS SUMINV_QTY_ARRIVED
FROM PURCHASE_ORDER_LINE_ALL P
WHERE P.CONTRACT='APC32'
  AND P.PART_NO='900-0089'
  AND ORDER_NO='38288'
GROUP BY P.ORDER_NO,
         P.LINE_NO,
         P.RELEASE_NO 
```

# php - 图片未保存在上传文件夹中

> ID：15135092
> 
> 赞同：1
> 
> 时间：2013-02-28T12:03:33.553
> 
> 标签：php, image-uploading, watermark

我正在尝试将不同类别的图像保存在一个文件夹中并检索它们..当我保存图像时，水印会自动应用于图像..为此我正在使用。

```
 <?php
    if(isset($_POST['submit'])){
     $cat=$_POST['cat'];

    $fname= $_FILES["file"]["name"];
    "Type: " . $_FILES["file"]["type"] . "<br />";
    "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    "stored in: " . $_FILES["file"]["tmp_name"] . "<br />";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
       "Stored in: " . "upload/" . $_FILES["file"]["name"];
     echo 'image Save Successfully' ;   

    require_once( "watermark.php" );

    $original_directory = "upload/";
    $watermarked_images = "temp/";

    if ($handle = opendir($original_directory)) 
    {
        while (false !== ($file = readdir($handle))) 
        {

            if(!is_file($original_directory.$file))
                continue;
            if(exif_imagetype($original_directory.$file)==2)
            {
                watermark($original_directory.$file,"watermark.png",$watermarked_images.$file);
                //echo "Done watermarking <b>".$file."</b><br>\n";
            }
        }
        closedir($handle);
    }
    }
   }
   ?> 
```

和 watermark.php 是

```
 <?php
     function watermark($original_image,$original_watermark,$destination="")
        {
            $image=imagecreatefromjpeg($original_image);
            list($imagewidth,$imageheight)=getimagesize($original_image);

            $watermark  =   imagecreatefrompng($original_watermark);            
            list($watermarkwidth,$watermarkheight)=getimagesize($original_watermark);

            if($watermarkwidth>$imagewidth || $watermarkheight>$imageheight)
            {
                $water_resize_factor = $imagewidth / $watermarkwidth;
                $new_watermarkwidth  = $watermarkwidth * $water_resize_factor;
                $new_watermarkheight = $watermarkheight * $water_resize_factor;

                $new_watermark = imagecreatetruecolor($new_watermarkwidth , $new_watermarkheight);

                imagealphablending($new_watermark , false);
                imagecopyresampled($new_watermark , $watermark, 0, 0, 0, 0, $new_watermarkwidth, $new_watermarkheight, $watermarkwidth, $watermarkheight);

                $watermarkwidth  = $new_watermarkwidth; 
                $watermarkheight = $new_watermarkheight; 
                $watermark       = $new_watermark;
            }
            $startwidth     =   ($imagewidth    -   $watermarkwidth)  / 2; 
            $startheight    =   ($imageheight   -   $watermarkheight) / 2;

            imagecopy($image, $watermark, $startwidth, $startheight, 0, 0, $watermarkwidth, $watermarkheight); 
            if(!empty($destination))
                imagejpeg($image,$destination);
            else 
                imagejpeg($image);
        }   
?> 
```

一些图像保存在上传文件夹和临时文件夹和数据库中，并且在它们上应用了水印..但是现在当我尝试上传图像时..它只在上传文件夹中并且显示致命错误：-

```
Fatal error: Allowed memory size of 33554432 bytes exhausted (tried to allocate 15000 bytes) in D:\xampp\htdocs\looks\admin\watermark.php on line 28 
```

我该如何解决这个问题..而且.PNG图像也没有保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:06:25.203

这意味着当前的 RAM 限制对于生成水印的 PHP 脚本来说是不够的。

转到您的 php.ini，找到“memory_limit”并将该行更改为类似内容：

```
memory_limit = 256M; 
```

之后，重新启动您的 Apache。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:08:11.870

在服务器中上传时可能会产生问题。您可以使用

```
 <?php
function watermarkImage ($SourceFile, $WaterMarkText, $DestinationFile) { 
   list($width, $height) = getimagesize($SourceFile);
   $image_p = imagecreatetruecolor($width, $height);
   $image = imagecreatefromjpeg($SourceFile);
   imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height, $width, $height); 
   $black = imagecolorallocate($image_p, 0, 0, 0);
   $font = 'arial.ttf';
   $font_size = 10; 
   imagettftext($image_p, $font_size, 0, 10, 20, $black, $font, $WaterMarkText);
   if ($DestinationFile<>'') {
      imagejpeg ($image_p, $DestinationFile, 100); 
   } else {
      header('Content-Type: image/jpeg');
      imagejpeg($image_p, null, 100);
   };
   imagedestroy($image); 
   imagedestroy($image_p); 
};
?> 
```

您需要下载 arial.ttf 文件并将其上传到您的服务器上。然后创建一个新的 PHP 文件并将上面的函数复制并粘贴到其中。接下来的 4 行用于设置源文件、水印文本消息和目标文件。如果您只想显示带水印的图像，则需要将 $DestinationFile 变量留空（$DestinationFile=''; ）。另外请确保源文件和目标文件包含完整的服务器路径和图像文件名。如果要更改图像上水印消息的位置，可以更改该行 imagettftext($image_p, $font_size, 0, 10, 20, $black, $font, $WaterMarkText);

```
 <?php
$SourceFile = '/home/user/www/images/image1.jpg';
$DestinationFile = '/home/user/www/images/image1-watermark.jpg'; 
$WaterMarkText = 'Copyright phpJabbers.com';
watermarkImage ($SourceFile, $WaterMarkText, $DestinationFile);
?> 
```

# c# - Asp.Net MVC4 + Web API 控制器删除请求 >> 404 错误

> ID：15135100
> 
> 赞同：15
> 
> 时间：2013-02-28T12:03:57.987
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api, asp.net-web-api-routing

我有一个 VS2012 MVC4 解决方案，我在其中测试 Web API 控制器。

我成功测试了 GET、POST、PUT，但 DELETE 仍然给我一个 http 404 错误。当我在我的 api 控制器中的“删除电影”操作中设置断点时，断点永远不会到达。

我阅读了很多关于这个问题的帖子，但没有人帮助我。

这是我的 DELETE API 控制器：

```
 [HttpDelete]
    public HttpResponseMessage DeleteMovie(int id)
    {    
        // Delete the movie from the database     
        // Return status code    
        return new HttpResponseMessage(HttpStatusCode.NoContent);

    } 
```

这是我的html页面：

```
<script type="text/javascript">

    deleteMovie(1, function ()
    {
        alert("Movie deleted!");
    });

    function deleteMovie(id, callback) {
        $.ajax({
            url: "/api/Movie",
            data: JSON.stringify({ id: id }),
            type: "DELETE",
            contentType: "application/json;charset=utf-8",
            statusCode: {
                204: function () {
                    callback();
                }
            }
        });
    }

</script> 
```

我的经典路线如下：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

我的 API 路由如下：

```
 public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "ActionApi", 
            routeTemplate: "api/{controller}/{action}/{id}", 
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    } 
```

在我的解决方案属性中，我配置了“使用本地 IIS Web 服务器”并选中了“使用 IIS Express”

我也尝试使用“使用 Visual Studio 开发服务器”但同样的问题。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-26T17:01:37.540

如果您收到的错误是来自 IIS 的 html 内容类型，则错误 404.0

确保您的 web.config 中有由 Web Api 模板添加的部分。默认情况下，IIS 不会提供 DELETE 动词，并且此配置会覆盖该行为。

```
 <system.webServer>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-28T12:28:34.823

HTTP DELETE 没有正文。您需要将 id 作为查询字符串参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T19:34:04.963

根据 Russell 的回答，我查看了 web config 并在 handlers 方法中找到了两行

```
....
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
<remove name="ExtensionlessUrlHandler-Integrated-4.0" /> 
```

我已经删除了最后一个并且它有效。

只是客户端上的使用示例（打字稿）

```
 public deleteComment(commentId: number) {
        var url = 'api/comments/' + commentId;
        return this.$http.delete(url);
    } 
```

和服务器端

```
 [Route("{id:int}")]
    public async Task<IHttpActionResult> Delete(int id){
        await _snippetService.DeleteComment(id);
        return Ok();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-30T06:40:12.270

使用 Dotnet Core 在 Mac 上运行 404。

就我而言，我将属性注释从更改`HttpDelete`为`HttpDelete("{id}")`

# java - System.arrayCopy() 复制对象或对对象的引用？

> ID：15135104
> 
> 赞同：11
> 
> 时间：2013-02-28T12:04:12.717
> 
> 标签：java, arrays, object, copy, deep-copy

我要上最后一节课`NameAndValue`。我`NameAndValue`使用复制了一个对象数组，`System.arrayCopy()`当我更改`NameAndValue`复制数组中的对象时，它会反映在原始数组中。

```
public final class NameAndValue {
    public String name;
    public String value;

    public NameAndValue() { }

    public NameAndValue(String name, String value) {
        this.name = name;
        this.value = value;
    }
} 
```

```
public class Main {
    public static void main(String[] args) {
        NameAndValue[] nv = new NameAndValue[4];
        nv[0] = new NameAndValue("A", "1");
        nv[1] = new NameAndValue("B", "2");
        nv[2] = new NameAndValue("C", "3");
        nv[3] = new NameAndValue("D", "4");

        NameAndValue[] nv2 = new NameAndValue[4];
        System.arraycopy(nv, 0, nv2, 0, 2);
        nv2[2] = new NameAndValue("Y", "25");
        nv2[3] = new NameAndValue("Z", "26");

        for (int i = 0; i < 2; i++) {
            NameAndValue[] nv3 = new NameAndValue[4];
            System.arraycopy(nv2, 0, nv3, 0, 4);
            nv3[2].value = String.valueOf(i);
            nv3[3].value = String.valueOf(i + 1);

            System.out.println(nv2[2].value);
            System.out.println(nv2[3].value);
            System.out.println("-----------------------");
        }
    }
} 
```

我得到的输出为：

```
0
1
-----------------------
1
2
----------------------- 
```

在所有情况下，我都应该得到 25 和 26 的输出，对吗？为什么会变？？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-28T12:06:00.667

> System.arrayCopy() 复制对象或对对象的引用？

参考，是*浅*拷贝。令人惊讶的是，[文档并没有明确地说](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)，只是隐含地说，因为他们*只*谈论复制数组元素，而不是递归地复制他们引用的东西。

就像你有这个一样：

```
NameAndValue nv1 = new NameAndValue("A", "1");
NameAndValue nv2 = nv1;
nv2.value = "4";
System.out.println(nv1.value); // 4 
```

每个数组元素就像上面的`nv1`and `nv2`vars。正如`nv1`和`nv2`引用（指向）相同的底层对象一样，数组条目也是如此，包括这些条目从一个数组复制到另一个数组时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:05:13.040

它会发生变化，因为两个数组仍然引用相同的底层对象。您可以将一个新对象分配给数组中的某个位置，并且它不会反映在另一个数组中，但是如果您对两个数组都指向的对象进行修改，那么两者都会以不同的方式看到它。

从这个意义上说，它是“按值引用”传递，而不是严格按引用传递 - 但您看到的效果是因为引用保持不变。

除非另有明确说明，否则像这样的副本在 Java 中几乎总是浅副本。这也不例外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:09:00.677

据我所知`arraycopy`是浅拷贝。这意味着新数组将引用旧数组中元素的地址。因此，如果您在其中一个中调整一个值，它将反映在两者中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-03T20:31:40.937

System.arraycopy 是一个浅拷贝。原因如下：

它使用 JNI 来使用类似 memcpy() 的东西，它只是复制内存中的指针。这是一个非常快速的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-12T02:44:29.477

```
int[] a = {1, 2, 3};
int[] b = new int[3];
System.arraycopy(a, 0, b, 0, 3);
b[1] = 0;
System.out.println(Arrays.toString(b));
System.out.println(Arrays.toString(a)); 
```

输出是这样的：

```
[1, 0, 3]
[1, 2, 3] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-01T05:23:38.547

Method[`System.arraycopy`](https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy(java.lang.Object,%20int,%20java.lang.Object,%20int,%20int))不执行数组的*深拷贝*[`Arrays.copyOf`](https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOf(T%5B%5D,%20int))， method 也不执行。它复制对对象的*引用*并且不创建新实例。如果您修改其中一个数组中的任何对象，它会影响两个数组：

```
public static void main(String[] args) {
    NameAndValue[] arr1 = new NameAndValue[2];
    arr1[0] = new NameAndValue("A", "1");
    arr1[1] = new NameAndValue("B", "2");

    NameAndValue[] arr2 = new NameAndValue[2];
    System.arraycopy(arr1, 0, arr2, 0, 2);
    arr2[0].value = "3";                       // modify existing object

    NameAndValue[] arr3 = new NameAndValue[2];
    System.arraycopy(arr1, 0, arr3, 0, 2);
    arr3[1] = new NameAndValue("Y", "5");      // create new instance

    System.out.println(Arrays.toString(arr1)); // [A:3, B:2]
    System.out.println(Arrays.toString(arr2)); // [A:3, B:2]
    System.out.println(Arrays.toString(arr3)); // [A:3, Y:5]
} 
```

```
public static final class NameAndValue {
    public String name;
    public String value;

    public NameAndValue(String name, String value) {
        this.name = name;
        this.value = value;
    }

    @Override
    public String toString() {
        return name + ":" + value;
    }
} 
```

* * *

^(另请参阅：
•[为什么 Array.copyOf() 在 2D 数组的情况下会改变原始数组？](https://stackoverflow.com/a/65523469/14838237)
•[如何在Java 中进行二维数组的深拷贝？](https://stackoverflow.com/a/65525791/14838237))

# ruby - Buildr - 编译时排除源文件

> ID：15135107
> 
> 赞同：1
> 
> 时间：2013-02-28T12:04:25.237
> 
> 标签：ruby, rake, buildr

在 buildr 中编译时有没有办法排除某些包或源文件？编译任务中没有排除项，因为它在 src 目录中查找。我们正在为多个环境构建，并且对于其中一个环境，我们需要排除一些源文件，否则它将无法编译。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T09:10:18.680

`compile.sources`仅包含源目录，无法告诉 buildr 直接从中排除子目录。但是，在编译之前，buildr 会列出这些目录中的所有文件以将它们传递给编译器（您可以使用 来查看`buildr --trace compile`）。你可以用猴子补丁`Buildr::Compiler::Base::files_from_sources`来排除一些东西，但这似乎太侵入了。

* * *

我会把问题颠倒过来：不是将所有代码放在一个源目录中，而是将特定于环境的东西放在它自己的目录中，如下所示：

```
src/main/java
src/other-env/java 
```

大多数（如果不是全部）IDE 都支持多个源目录，所以这应该不是问题。

然后通过使用将适当的源目录添加到编译路径来为每个环境定义构建器项目`compile.from`（对于资源也是如此）。如果`src/main/java`自己编译，您还可以将其分离到自己的项目中并让其他项目依赖它，从而避免一遍又一遍地重新编译它。

为了使构建脚本更简单，请考虑使各种环境成为适当[的子项目](https://buildr.apache.org/projects.html#dir_structure)。

# c# - 比较 1000 万个实体

> ID：15135109
> 
> 赞同：9
> 
> 时间：2013-02-28T12:04:30.873
> 
> 标签：c#, algorithm, matching

我必须编写一个程序，将 10'000'000+ 个实体相互比较。实体基本上是数据库/csv 文件中的扁平行。

比较算法必须非常灵活，它基于最终用户输入规则的规则引擎，每个实体都与其他实体匹配。

我正在考虑如何将这项任务拆分为更小的工作量，但我还没有找到任何东西。由于规则是由最终用户输入的，因此对 DataSet 进行预排序似乎是不可能的。

我现在要做的是将整个 DataSet 放入内存并处理每个项目。但这效率不高，需要大约。20 GB 内存（压缩）。

您知道如何拆分工作负载或减小其大小吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-28T12:40:08.120

如果您的规则处于最高抽象级别（例如任何未知的比较函数），您就无法实现您的目标。10^14 次比较操作将运行很长时间。

如果规则不完全通用，我会看到 3 种优化不同情况的解决方案：

*   **如果比较是可传递的并且你可以计算哈希**（有人已经推荐过），那就去做吧。哈希也可能很复杂，不仅是您的规则 =)。找到好的散列函数，它在许多情况下可能会有所帮助。

*   **如果实体是可排序的**，则对它们进行排序。为此，我建议不要就地排序，而是构建项目的索引（或 ID）数组。如果您的比较可以转换为 SQL（据我了解您的数据在数据库中），您可以在 DBMS 端更有效地执行此操作并读取排序索引（例如 3,1,2 这意味着 ID=3 的项目最低，ID=1 居中，ID=2 最大）。然后你只需要比较相邻的元素。

*   **如果事情值得**，我会尝试使用一些启发式排序或散列。我的意思是我会创建不一定唯一标识相等元素的哈希，但可以将您的数据集分成组，在这些组之间肯定没有一对相等的元素。然后所有相等的对将在内部组中，您可以逐个读取组并在不是 10 000 000，而是例如 100 个元素的组中进行手动复杂函数计算。另一种子方法是启发式排序，目的相同，以确保相同的元素不在数据集的不同结尾。之后，您可以逐个读取元素并与之前的 1000 个元素进行比较（例如，已读取并保存在内存中）。例如，我会在内存中保留 1100 个元素，并在每次新的 100 个出现时释放最旧的 100 个。这将优化您的数据库读取。如果您的规则包含 (Attribute1=Value1) AND (...) 之类的规则，或 (Attribute1 < Value2) AND (...) 之类的规则或任何其他简单规则，则此方法的其他实现也是可能的。然后您可以先按此标准进行聚类，然后比较创建的聚类中的项目。

顺便说一句，如果您的规则认为所有 10 000 000 个元素都相等怎么办？您想获得 10^14 个结果对吗？这个案例证明在一般情况下你无法解决这个任务。尝试做一些限制和假设。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T12:22:29.213

我会尝试考虑规则层次结构。例如，假设规则 A 是“颜色”，规则 B 是“形状”。

如果您首先按颜色划分对象，则无需将红色圆圈与蓝色三角形进行比较。

这将减少您需要进行的比较次数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:10:12.620

我会从每个实体创建一个哈希码。您可能必须从哈希生成中排除 id，然后测试是否相等。如果你有散列，你可以按字母顺序排列所有的散列码。将所有实体按顺序排列意味着很容易检查双精度数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T12:48:46.050

如果您想将每个实体与所有实体进行有效比较，那么您需要对数据进行聚类，比较完全不相关的事物的理由非常少（比较 Clothes 和 Human 没有意义），我认为您的规则会尝试对数据进行聚类.

所以你需要对数据进行聚类，尝试一些聚类算法，比如[K-Means](http://en.wikipedia.org/wiki/K-means_clustering)。

另请参阅 [Apache Mahout](http://mahout.apache.org/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-28T12:12:56.790

您是否正在为此寻找最合适的排序算法？我认为分而治之似乎不错。如果算法看起来不错，您可以有很多其他方法来进行计算。使用 MPICH 或其他东西的特别并行处理可能会给你一个最终目的地。

但在决定如何执行之前，您必须先考虑算法是否适合。

# java - Spring @Transactional 注释中 readOnly 属性的正确位置

> ID：15135110
> 
> 赞同：2
> 
> 时间：2013-02-28T12:04:40.137
> 
> 标签：java, spring

如果服务层的方法在同一个事务中调用存储层的方法，那么将 readOnly 属性放入服务方法或存储库方法是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:09:42.870

注释的典型位置`@Transactional`是在服务层中。您的服务可能会调用许多存储库方法，因此跨单个服务调用的事务比为单个存储库/DAO 调用处理更多事务更有效。

如果您将多个 DAO 注入到需要在单个事务中协同工作的服务中，那么这是正确的方法。

# c++ - 锁定 wxframe 位置

> ID：15135111
> 
> 赞同：0
> 
> 时间：2013-02-28T12:04:45.100
> 
> 标签：c++, wxwidgets

我希望我的应用程序被锁定在显示的一个位置并且不允许它移动。该应用程序是用 WxWidgets 编写的。

我在 Windows 7 上使用 wxwidgets 2.8.12 和 gcc4.7 mingw。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:38:10.880

您需要处理移动和大小事件。

像这样的东西：

```
void MyFrame::OnMove(wxMoveEvent&  )
{
  // set position back to where you want to keep it
    SetSize(x, y, wxDefaultCoord, wxDefaultCoord, wxSIZE_USE_EXISTING);
}
void MyFrame::OnSize(wxSizeEvent&  )
{
  // set position back to where you want to keep it
    SetSize(x, y, wxDefaultCoord, wxDefaultCoord, wxSIZE_USE_EXISTING);
} 
```

# python - 我怎么知道在opencv中轮廓是打开还是关闭？

> ID：15135128
> 
> 赞同：2
> 
> 时间：2013-02-28T12:05:27.837
> 
> 标签：python, opencv, contour

我如何知道从“查找轮廓”功能获取的轮廓在 opencv 中是打开还是关闭？

**更新**

我尝试将 isContourConvex 应用于此图像：[https ://docs.google.com/file/d/0ByS6Z5WRz-h2RXdzVGtXUTlPSGc/edit?usp=sharing](https://docs.google.com/file/d/0ByS6Z5WRz-h2RXdzVGtXUTlPSGc/edit?usp=sharing)

i 提取面积最大的轮廓并返回 false。我改变，也许，轮廓提取，扩张？

```
nomeimg = 'Riscalate2/JPEG/e (5).jpg'

img = cv2.imread(nomeimg)

gray = cv2.imread(nomeimg,0)#convert grayscale adn binarize

element = cv2.getStructuringElement(cv2.MORPH_CROSS,(6,6)) 
graydilate = cv2.erode(gray, element) #imgbnbin

cv2.imshow('image',graydilate)
cv2.waitKey(0)

ret,thresh = cv2.threshold(graydilate,127,255,cv2.THRESH_BINARY_INV)   # binarize

imgbnbin = thresh
cv2.imshow('bn',thresh)
cv2.waitKey()

#element = cv2.getStructuringElement(cv2.MORPH_CROSS,(2,2))
#element = np.ones((11,11),'uint8')

contours, hierarchy = cv2.findContours(imgbnbin, cv2.RETR_TREE ,cv2.CHAIN_APPROX_SIMPLE)
print(len(contours))

# Take only biggest contour basing on area
Areacontours = list()
calcarea = 0.0
unicocnt = 0.0
for i in range (0, len(contours)):
    area = cv2.contourArea(contours[i])
    #print("area")
    #print(area)
    if (area > 90 ):  #con 90 trova i segni e togli puntini
        if (calcarea<area):
            calcarea = area
            unicocnt = contours[i]

convex = cv2.isContourConvex(unicocnt)
print("convex")
print(convex) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:52:53.597

您正在寻找术语[凹](http://en.wikipedia.org/wiki/Concave)（如 C）与[凸](http://en.wikipedia.org/wiki/Convex)（如 O）轮廓。

猜猜看，有一种方法可以检查凸性：

[`cv2.isContourConvex(contour)`](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#cv2.isContourConvex)

# javascript - 如果孩子有班级，则选择孩子的父母

> ID：15135129
> 
> 赞同：0
> 
> 时间：2013-02-28T12:05:29.987
> 
> 标签：javascript, jquery, html, css, flexslider

我一直在尝试使用 Flexslider v2 来改变一些东西以满足我的需求。我一直在尝试使用 jQuery 来定位 的父`li`级，`img class="active"`因为我想给它一个类`selected`但我不是很成功

```
<ol class="foo">
  <li>
    <img src="bar.png" class="active">  <-- This class changes img elements depending on the active slide
  </li>
  <li>
    <img src="bar.png">
  </li>
  <li>
    <img src="bar.png">
  </li>
</ol> 
```

我想出了这样的事情：

```
$(document).ready(function() {
   $('.foo li').children().each(function(index, value) {
     if($(value).hasClass('active')) {
         $(this).parent('li').addClass('selected');
     } else {
         $(this).parent('li').removeClass('selected');
     }
  });
}); 
```

它在控制台中工作，但在我的 main.js 文件中没有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:07:08.017

`**[LIVE DEMO](http://jsbin.com/akirij/4/edit)**`

像一行一样简单：

```
$('.foo li').find('img.active').closest('li').addClass('selected'); 
```

或者如果你真的需要它：

`**[LIVE DEMO](http://jsbin.com/akirij/2/edit)**`

```
$('.foo li').find('img').each(function(index, el) {
    if($(el).hasClass('active')) {
        $(el).closest('li').addClass('selected');
    } else {
        $(el).closest('li').removeClass('selected');
    }
}); 
```

`**[jQuery API Documentation - Closest](http://api.jquery.com/closest/)**`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:08:00.263

像这样在 main.js 中将它包裹起来 i document.ready ，然后它应该可以按预期工作。您可以在控制台中使用它，因为在运行脚本时会加载所有元素。

```
$(function(){
    $('.foo li').children().each(function(index, value) {
      if($(value).hasClass('active')) {
          $(this).parent('li').addClass('selected');
      } else {
         $(this).parent('li').removeClass('selected');
      }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:07:19.347

使用最近（）：

```
$(this).closest('li'),addClass('selected'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:09:49.887

添加`$(document).ready(function(){`

```
$(document).ready(function(){
$('.foo li').children().each(function(index, value) {
    if($(value).hasClass('active')) {
        $(this).parent('li').addClass('selected');
    } else {
        $(this).parent('li').removeClass('selected');
    }
});
    }); 
```

在此处检查[类似的问题](https://stackoverflow.com/questions/10680156/jquery-click-function-is-not-working)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T12:12:19.443

```
$('.foo > li').removeClass('selected').each(function() {
    if($(this).find('img').hasClass('active')) {
        $(this).addClass('selected');
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T12:13:02.837

为什么使用`.each()`？什么时候我们可以在没有它的情况下实现我们的目标。

```
$(".foo li img.active").parent().addClass("selected"); 
```

# iphone - 图像方向在启动时扭曲到错误的方向 (iOS)

> ID：15135134
> 
> 赞同：1
> 
> 时间：2013-02-28T12:05:44.263
> 
> 标签：iphone, ios, xcode, cocoa-touch

我有一个应用程序，自从 6 个月前就没有修改过它，无论如何我决定在模拟器中打开它。但是在启动画面之后显示的第一个视图控制器被卷起并通过错误的方向显示。当它应该以横向显示时，它以纵向显示。

![](../Images/faa670e1218fd339fb698ede6abe1bb4.png)

这是它的代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

然而，

当我点击转到另一个视图，然后返回主视图控制器时，问题自行解决并且方向正确。

![正确显示](../Images/701bee660d2f2c62a05e576fe74b4902.png)

所以它只发生在初始屏幕显示后的初始启动中。

请加入链接以查看屏幕截图，因为我还没有 10 个代表，所以我无法发布图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:21:20.230

![在此处输入图像描述](../Images/409d4684f424e728d929422312d95c62.png) 这将确保应用程序以横向模式打开。

在 AppDelegate 中，您可能正在使用这个

```
[self.window addSubView:viewControllerObj] 
```

问题出在上面的行上。在 iOS 5 中，方向将与上述行正常工作，但在 iOS 6 中，为了使方向正常工作，请将上述行更改为

```
[self.window setRootViewController:viewControllerObj] 
```

然后当方向改变时应用程序会旋转

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:48:22.880

打开您的 plist 文件->addRow-> 添加“初始界面方向”并赋予值横向（左主页按钮）。

希望这会帮助你。

# sql - PostgreSQL - 使用 to_tsvector 和 SELECT

> ID：15135144
> 
> 赞同：0
> 
> 时间：2013-02-28T12:06:01.573
> 
> 标签：sql, postgresql, full-text-search, tsvector

我一直在阅读 PSQL 文档，也困扰着 Google——虽然我不确定要寻找什么——但看起来不可能从选择中创建一个 tsvector。

让我解释一下。我有表**用户**，我在其中添加了一个名为 tsv 的 tsvector 列。

```
 Column       |            Type             |                     Modifiers
-------------------+-----------------------------+---------------------------------------------------
 id                | integer                     | not null default nextval('jobs_id_seq'::regclass)
 username          | character varying(255)      | not null
 tsv               | tsvector                    | 
```

现在每个用户都有很多**文章**。

我现在想要的是将文章标题作为 tsvector 存储在 tsv 列中。像这样的东西：

```
UPDATE users SET tsv = to_tsvector(
  SELECT string_agg(title) 
  FROM users INNER JOIN books 
  ON user.id = articles.user_id 
  GROUP BY user.id
) 
```

所以很明显，即使不尝试从 SELECT 中创建一个 tsvector，查询也不会工作。它基本上有2个“问题”

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:37:30.907

```
UPDATE users
SET tsv = to_tsvector(s.tsv)
from
    (  
        SELECT id, string_agg(title) tsv
        FROM
            users
            INNER JOIN
            articles ON user.id = articles.user_id 
        GROUP BY user.id
    ) s
where users.id = s.id 
```

# jquery - 易分页错误，它不起作用

> ID：15135145
> 
> 赞同：0
> 
> 时间：2013-02-28T12:06:02.773
> 
> 标签：jquery, html, pagination

当我尝试在我的代码中实现 easypaginate 时，firebug 用这个错误提醒我：“ReferenceError: jQuery is not defined [Parar en este error]

slice.call(docElem.childNodes, 0)[0].nodeType;"

HTML：

```
 <html>
  <head>
    <title>CURSOS</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="treeview.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="easypaginate.js"></script>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="treeview.js"></script>
    <script src="jquery-1.9.0.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

  </head>

  <body>
        <div id="JQTreeview">
        </div>
        <ul id ="output">
            This is the default output
        </ul>
        <div class="pages"></div>
        <input type='button' id='corregir' value='Corregir' />
        <input type='button' id='corregir1' value='Corregir' />

  </body> 
```

JS：

```
function muestraArray(x){
    $("#output").text("");  
    $("#output").easyPaginate({step:2});

    var i=0;
    // se conocen el numero de propiedades y el nombre de cada objeto
    for(p in preguntas){ //Cada elemento p de cada preguntas
        test = preguntas[p]; //test contiene las claves
        //$("#output").append("<h3>" + petPos + "</h3>");
            $("#output").append('<div id="preg'+i+'"><br><h3>'+test.pregunta + "</h3><br>");    //tes.pregunta, test.resp1, ... contiene los valores    
            //$("#output").append(pet["nombre"] + "<br>");  
            $("#output").append('<input type="radio" name="resp'+i+'" value="'+test.resp1+'">'+test.resp1 + '<span class="'+test.resp1+'"></span><br>');
            $("#output").append('<input type="radio" name="resp'+i+'" value="'+test.resp2+'">'+test.resp2 + '<span class="'+test.resp2+'"></span><br>');
            $("#output").append('<input type="radio" name="resp'+i+'" value="'+test.resp3+'">'+test.resp3 + '<span class="'+test.resp3+'"></span><br></li>');
            i++;
    }// end for

    if(x==1){
    $(init);
    }
    if(x==2){
    $(init2);
    }
    if(x==3){
    $(init3);
    }
    if(x==4){
    $(init4);

    }
} // end processResults 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:09:56.737

更改加载脚本文件的顺序，

```
<script type="text/javascript" src="easypaginate.js"></script>
<script type="text/javascript" src="jquery.min.js"></script> 
```

到

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="easypaginate.js"></script> 
```

# c# - 如何将数据读取器或数据表反序列化为 c# 类

> ID：15135150
> 
> 赞同：0
> 
> 时间：2013-02-28T12:06:07.160
> 
> 标签：c#

我已经从 db 表中填充了数据读取器，并且我有类似的类

```
public class CandidateApplication
{
                public string EmailID { get; set; }
                public string Name { get; set; }
                public string PhoneNo { get; set; }
                public string CurrentLocation { get; set; }
                public string PreferredWorkLocation { get; set; }
                public int RoleApplingFor { get; set; }
                public string CurrentJobTitle { get; set; }
                public int EducationLevel { get; set; }
                public decimal SalaryExpected { get; set; }
                public string AvailableTime { get; set; }
                public int AdvertID { get; set; }
                public bool SignForAlert { get; set; }
                public string CVInText { get; set; }
                public string CVFileName { get; set; }
                public bool IsDownloaded { get; set; }
                public string specialization { get; set; }
                public bool isallocated { get; set; }
                public int id { get; set; }
                public string AdvertAdditionalInfo { get; set; }
} 
```

我可以循环填充上面的类。我们可以在数据阅读器中迭代并填充类，但我想知道是否有任何捷径可以从数据阅读器中填充类。

如果从数据读取器到类可以进行数据反序列化，那么还要告诉我类中是否有少数字段在数据读取器中不存在，那么如何处理这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:53:46.460

虽然不是您问题的答案，但我建议您考虑以下解决方法，它使用 a`SqlDataAdapter`而不是数据读取器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.IO;
using System.Xml.Serialization;

class Program
{
    static void Main(string[] args)
    {

        var cs = "YourConnectionString";
        var xml = "";
        using (var con = new SqlConnection(cs))
        using (var c = new SqlCommand("SELECT * FROM CandidateApplication", con))
        {
            con.Open();
            using (var adapter = new SqlDataAdapter(c))
            {
                var ds = new DataSet("CandidateApplications");
                ds.Tables.Add("CandidateApplication");
                adapter.Fill(ds, ds.Tables[0].TableName);
                xml = ds.GetXml();
            }
        }

        // We need to specify the root element
        var rootAttribute = new XmlRootAttribute();

        // The class to use as the XML root element (should match the name of 
        // the DataTable in the DataSet above)
        rootAttribute.ElementName = "CandidateApplications";

        // Initializes a new instance of the XmlSerializer class that can 
        // serialize objects of the specified type into XML documents, and 
        // deserialize an XML document into object of the specified type. 
        // It also specifies the class to use as the XML root element.
        // I chose List<CandidateApplication> as the type because I find it
        // easier to work with (but CandidateApplication[] will also work)
        var xs = new XmlSerializer(typeof(List<CandidateApplication>), rootAttribute);

        // Deserialize the XML document contained by the specified TextReader, 
        // in our case, a StringReader instance constructed with xml as a parameter.
        List<CandidateApplication> results = xs.Deserialize(new StringReader(xml));
    }
} 
```

对于检索到的数据中缺少的那些属性，您可以声明一个具有默认值的私有字段：

```
string _advertAdditionalInfo = "default";
public string AdvertAdditionalInfo
{
    get
    {
        return _advertAdditionalInfo;
    }
    set
    {
        _advertAdditionalInfo = value;
    }
} 
```

如果您想强制检索到的数据不会填写特定属性，请使用：

```
[XmlIgnoreAttribute]
public string AdvertAdditionalInfo { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:44:27.163

您不需要使用数据阅读器，您只需将数据填充到数据表中，然后使用以下方法创建您的 CandidateApplication 类的列表。

电话：-

```
List<CandidateApplication> CandidateList = GetCandidateInformation(); 
```

生成列表的方法：-

```
public List<CandidateApplication> GetCandidateInformation()
        {
            DataTable dt = new DataTable();

            using (OleDbConnection con = new OleDbConnection(ConfigurationManager.AppSettings["con"]))
            {
                using (OleDbCommand cmd = new OleDbCommand("SELECT * FROM [TableName]", con))
                {
                    var adapter = new OleDbDataAdapter();
                    adapter.SelectCommand = cmd;

                    con.Open();
                    adapter.Fill(dt);

                    var CandApp = (from row in dt.AsEnumerable()

                    select new CandidateApplication
                    {

                    EmailID = row.Field<string>("EmailID"),
                    Name  = row.Field<string>("Name"),
                    PhoneNo = row.Field<string>("PhoneNo"),
                    CurrentLocation = row.Field<string>("CurrentLocation"),
                    PreferredWorkLocation = row.Field<string>("PreferredWorkLocation"),
                    RoleApplingFor = row.Field<int>("RoleApplingFor"),
                    CurrentJobTitle = row.Field<string>("CurrentJobTitle"),
                    EducationLevel = row.Field<int>("EducationLevel "),
                    SalaryExpected = row.Field<decimal>("SalaryExpected"),
                    AvailableTime = row.Field<string>("AvailableTime"),
                    AdvertID = row.Field<int>("AdvertID"),
                    SignForAlert = row.Field<bool>("SignForAlert"),
                    CVInText = row.Field<string>("CVInText"),
                    CVFileName = row.Field<string>("CVFileName"),
                    IsDownloaded = row.Field<bool>("IsDownloaded"),
                    Specialization = row.Field<string>("Specialization"),
                    Isallocated = row.Field<bool>("Isallocated"),
                    Id = row.Field<int>("Id"),
                    AdvertAdditionalInfo = row.Field<string>("AdvertAdditionalInfo")

                    }).ToList();

                    return CandApp;
                }
            }
        } 
```

# java - 如何使用 Java 解压缩包含不同文件格式的 zip 文件夹

> ID：15135153
> 
> 赞同：0
> 
> 时间：2013-02-28T12:06:16.820
> 
> 标签：java, xml, unzip

我需要解压缩一个包含不同文件格式的压缩目录，例如`.txt, .xml, .xls`等。

`.txt files`如果目录仅包含但它会因其他文件格式而失败，我可以解压缩。下面是我正在使用的程序，经过一番谷歌搜索，我看到的都是类似的方法 -

```
import java.io.*;
import java.util.Enumeration;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;

public class ZipUtils {
  public static void extractFile(InputStream inStream, OutputStream outStream) throws IOException {
      byte[] buf = new byte[1024];
      int l;
      while ((l = inStream.read(buf)) >= 0) {
           outStream.write(buf, 0, l);
      }
      inStream.close();
      outStream.close();
  }

  public static void main(String[] args) {
      Enumeration enumEntries;
      ZipFile zip;

      try {
          zip = new ZipFile("myzip.zip");
          enumEntries = zip.entries();
          while (enumEntries.hasMoreElements()) {
              ZipEntry zipentry = (ZipEntry) enumEntries.nextElement();
              if (zipentry.isDirectory()) {
                  System.out.println("Name of Extract directory : " + zipentry.getName());
                  (new File(zipentry.getName())).mkdir();
                  continue;
              }
              System.out.println("Name of Extract fille : " + zipentry.getName());

              extractFile(zip.getInputStream(zipentry), new FileOutputStream(zipentry.getName()));
          }
          zip.close();
     } catch (IOException ioe) {
         System.out.println("There is an IoException Occured :" + ioe);
         ioe.printStackTrace();
     }
  }
} 
```

引发以下异常 -

```
There is an IoException Occured :java.io.FileNotFoundException: myzip\abc.xml (The system cannot find the path specified)
java.io.FileNotFoundException: myzip\abc.xml (The system cannot find the path specified)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
    at updaterunresults.ZipUtils.main(ZipUtils.java:43) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:12:06.893

当您尝试打开将包含提取内容的文件时，会发生错误。这是因为该`myzip`文件夹不可用。

因此，请检查它是否确实不可用并在提取 zip 之前创建它：

```
File outputDirectory = new File("myzip");
if(!outputDirectory.exists()){
    outputDirectory.mkdir();
} 
```

* * *

正如[@Perception](https://stackoverflow.com/users/680925/perception)在评论中指出的那样：输出位置是相对于活动/工作目录的。这可能不是很方便，因此您可能希望将提取位置添加到提取文件的位置：

```
File outputLocation = new File(outputDirectory, zipentry.getName());
extractFile(zip.getInputStream(zipentry), new FileOutputStream(outputLocation)); 
```

（当然你还需要添加`outputLocation`到目录创建代码）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:09:14.550

[这是一个很好的例子](http://www.mkyong.com/java/how-to-decompress-files-from-a-zip-file/)，他展示了解压缩所有格式（pdf、txt 等）看起来很

或者您可以使用此代码可能有效（我还没有尝试过）

```
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;

public class ZipUtils
{
  private static final int  BUFFER_SIZE = 4096;

  private static void extractFile(ZipInputStream in, File outdir, String name) throws IOException
  {
    byte[] buffer = new byte[BUFFER_SIZE];
    BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(new File(outdir,name)));
    int count = -1;
    while ((count = in.read(buffer)) != -1)
      out.write(buffer, 0, count);
    out.close();
  }

  private static void mkdirs(File outdir,String path)
  {
    File d = new File(outdir, path);
    if( !d.exists() )
      d.mkdirs();
  }

  private static String dirpart(String name)
  {
    int s = name.lastIndexOf( File.separatorChar );
    return s == -1 ? null : name.substring( 0, s );
  }

  /***
   * Extract zipfile to outdir with complete directory structure
   * @param zipfile Input .zip file
   * @param outdir Output directory
   */
  public static void extract(File zipfile, File outdir)
  {
    try
    {
      ZipInputStream zin = new ZipInputStream(new FileInputStream(zipfile));
      ZipEntry entry;
      String name, dir;
      while ((entry = zin.getNextEntry()) != null)
      {
        name = entry.getName();
        if( entry.isDirectory() )
        {
          mkdirs(outdir,name);
          continue;
        }
        /* this part is necessary because file entry can come before
         * directory entry where is file located
         * i.e.:
         *   /foo/foo.txt
         *   /foo/
         */
        dir = dirpart(name);
        if( dir != null )
          mkdirs(outdir,dir);

        extractFile(zin, outdir, name);
      }
      zin.close();
    } 
    catch (IOException e)
    {
      e.printStackTrace();
    }
  }
} 
```

问候

# api - 使用什么来生成 OAuth 2 访问令牌

> ID：15135157
> 
> 赞同：1
> 
> 时间：2013-02-28T12:06:20.143
> 
> 标签：api, security, oauth-2.0

因此，我正在尝试为我正在构建的这个 API 尽可能接近地实现 OAuth 2。我正处于需要生成 access_token 的地步，但是我正在尝试找出执行此操作的最佳方法。我读过一个地方，人们正在加密 revenant 信息和 access_token（如过期日期、客户端 ID 等），以防止在每个 API 调用上查找数据库。

我在想这个并想，生成 access_token 的方式如何处理撤销访问？我的意思是使用 OAuth 的优点之一是能够撤销对应用程序数据的访问，如果我只是使用加密数据而不在数据库中查找，如果我撤销应用程序，它仍然可以访问到我的数据，直到至少那个 access_token 过期。

我认为防止在关系数据库中查找的更好方法是将 access_token 存储在键/值数据库（如 redis）中，因为这样会更快一些。这样，如果有人撤销对应用程序的访问权限，它可以删除关系数据库中的记录和键/值数据中的记录。

我是否遗漏了什么，有没有办法对 access_token 使用加密数据，防止数据库查找每个 API 调用，并且可以随时撤销访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:03:56.860

您已经知道这两种方法（数据库中的令牌与自包含令牌）的优缺点，这是您必须做出的选择。大多数提供商都选择自包含令牌，我建议将其作为起点，例如 JWS/JWE。

但是，我认为您可以对其进行一些调整，并通过一个简单的技巧将两个世界中最好的部分结合起来，而不是简单的自包含令牌（我猜大多数提供商可能会这样做）。考虑到令牌撤销是一种例外情况（至少发生的次数比正常令牌操作少得多），您可以**只在数据库中保留已撤销令牌的列表**. 验证令牌，您可以在已撤销令牌列表中搜索它：如果没有找到，则可以正常使用其签名或加密的内容。这样你仍然有一个数据库，但记录明显更少，查找速度更快。例如，您可以只使用您的键/值数据库，而不是同时使用键/值和关系数据库。如果您预计 API 的流量不会很大，您甚至可以通过将已撤销令牌列表保存在内存中来保存整个数据库查找，例如，在它们过期后定期从列表中清除它们。

# algorithm - 无回溯的皇后

> ID：15135176
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:07:16.107
> 
> 标签：algorithm

可以不回溯解决**n皇后问题吗？**

我遇到了许多关于**n 皇后**问题的答案，但它们都需要回溯。有没有不回溯的解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:10:45.803

是的。您可以通过生成所有可能的板，然后测试每个板来强制它。

这种方法虽然不能很好地扩展；）

另请注意，[维基百科文章](http://en.wikipedia.org/wiki/Eight_queens_puzzle#Exercise_in_algorithm_design)列出了许多解决方案，包括“迭代修复”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:15:19.300

进化出最佳解决方案的遗传算法不需要回溯，但这是解决问题的另一种方法，而不是遍历您的问题似乎暗示的状态空间图的算法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:12:36.397

是的。维基百科提到了一些，包括一个基于决定因素的（我现在很好奇，但还没有找到）。[让我逐字](http://en.wikipedia.org/wiki/Eight_queens_puzzle#Explicit_solutions)复制粘贴：

> 上面的例子可以用下面的公式得到。令 (i, j) 为 n × n 棋盘上 i 列和 j 行的正方形，k 为整数。

1.  如果 n 是偶数且 n ≠ 6k + 2，则将皇后放置在 (i, 2i) 和 (n/2 + i, 2i - 1) 处，因为 i = 1,2,...,n/2。
2.  如果 n 是偶数且 n ≠ 6k，则将皇后放置在 (i, 1 + (2i + n/2 - 3 (mod n))) 和 (n + 1 - i, n - (2i + n/2 - 3) (mod n))) 对于 i = 1,2,...,n/2。
3.  如果 n 是奇数，则对 (n - 1) 使用上述模式之一，并在 (n, n) 处添加一个皇后。

# jquery - 选择 chrome 的滚动问题

> ID：15135184
> 
> 赞同：1
> 
> 时间：2013-02-28T12:07:40.620
> 
> 标签：jquery, google-chrome, jquery-chosen

我在 chrome 中选择时遇到问题。我正在移动选择的选定选项，但它不会滚动选择。

在其他浏览器 ff 中工作正常，即 safari 等

在此处观看视频：http: [//screencast.com/t/tS5T4D4Vb](http://screencast.com/t/tS5T4D4Vb)

在这个视频中，我首先在 Firefox 中移动选定的选项，然后对 chrome 执行相同的操作。我想我错过了一些东西。我的铬是 25.0.1364.97

# c# - mvc 中的自定义错误处理不起作用

> ID：15135186
> 
> 赞同：2
> 
> 时间：2013-02-28T12:07:43.383
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在处理我的控制器中的错误，并且我`[CustomErrorHandleAttribute]`已经写了当我的操作出现异常时该怎么做。即使我的代码中没有错误，它也会重定向到 customerrorhandle 并抛出错误。我无法找到它为什么这样做的错误。

这是我的代码：

```
 namespace ExceptionHandlingInMVC.Controllers
    {
    [CustomHandleError]
    public class HomeController : Controller
    {
        //
        // GET: /Home/

        public object Index()
        {
            try
            {
                ViewData["Title"] = "Home Page";
                ViewData["Message"] = "Current time is:" + DateTime.Now.ToLongTimeString();
                var x = 10;
                var y = 10;
                var result = x / y;
                ViewData["Result"] = result;
                return View();
            }
            catch (Exception e)
            {

                throw e;
            }

        }

        [CustomHandleError]
        public object About()
        {
            ViewData["Title"] = "About Page";
            return View();
        }
    }

    public class ErrorPresentation
    {
        public String ErrorMessage { get; set; }
        public Exception TheException { get; set; }
        public Boolean ShowMessage { get; set; }
        public Boolean ShowLink { get; set; }

    }

  } 
```

我写的CustomHandleErrorAttribute：

```
 namespace ExceptionHandlingInMVC
   {

    /// <summary>
    /// This attribute (AOP) filter is used to override the Error handling and make sure that all erros are recorded in the event logs, so that they can in turn be picked up by 
    /// our SIEM tool  so that we a) stop customers seing a bad error message and b) we are capturing all the events that happen and c) improives security for 
    /// by preventing a hacker from seing s=details of how our application is put together
    /// </summary>
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
    public sealed class CustomHandleErrorAttribute : ActionFilterAttribute
    {
        /// <summary>
        /// This event is called when the action is called i.e. an error has just occured
        /// </summary>
        /// <param name="filterContext"></param>
        public override void OnActionExecuted(ActionExecutedContext filterContext)
        {
            try
            {
                // Bail if we can't do anything; app will crash.
                if (filterContext == null)
                    return;

                // since we're handling this, log to ELMAH(Error logging modules and handler)
                var ex = filterContext.Exception ?? new Exception("No further information exists.");
                WriteToEventLog(ex);

                filterContext.ExceptionHandled = true;
                var data = new ErrorPresentation
                {
                    ErrorMessage = HttpUtility.HtmlEncode(ex.Message),
                    TheException = ex,
                    ShowMessage = filterContext.Exception != null,
                    ShowLink = false
                };

                filterContext.Result = new ViewResult
                {
                    ViewName = "~/Views/Home/ErrorPage.aspx"
                };
            }
            catch (Exception exception)
            {

                throw;
            }

        }

        /// <summary>
        /// This method writes the exception to the event log we have specified in the web.config or the app.config
        /// </summary>
        /// <param name="exception"></param>
        public void WriteToEventLog(Exception exception)
        {
            // pick up which machine we are on, this will already be set for all websites
            var machineName = ConfigurationManager.AppSettings["MachineName"];

            // PIck up the eventlog we are going to write to
            var eventLogName = ConfigurationManager.AppSettings["EventLogName"];

            EventLog.WriteEntry("abc", exception.Message, EventLogEntryType.Error);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:53:00.850

试试这个：

```
public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        try
        {
            // Bail if we can't do anything; app will crash.
            if (filterContext == null)
                return;

            // since we're handling this, log to ELMAH(Error logging modules and handler)
            if (filterContext.Exception == null || filterContext.ExceptionHandled)
            {
                var ex = filterContext.Exception ?? new Exception("No further information exists.");
                this.WriteToEventLog(ex);
                return;
            };

            filterContext.ExceptionHandled = true;
            var data = new ErrorPresentation
            {
                ErrorMessage = HttpUtility.HtmlEncode(ex.Message),
                TheException = ex,
                ShowMessage = filterContext.Exception != null,
                ShowLink = false
            };

            filterContext.Result = new ViewResult
            {
                ViewName = "~/Views/Home/ErrorPage.aspx"
            };
        }
        catch (Exception exception)
        {

            throw;
        }

    } 
```

如果没有异常，则需要返回，因为此属性每次都会触发，而不仅仅是在出现错误时触发。

更新：我建议您在 global.asax 中编写以下代码：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new CustomErrorHandle());
    } 
```

为所有操作触发此属性。所以你不需要为任何动作写属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:02:31.717

你真的应该通过覆盖`Application_Error`global.asax 来执行你的错误处理。这样您就可以确定您的代码只会**在发生错误时**执行。Using`OnActionExecuted`意味着**无论是否抛出错误**，您的代码都将执行。

这是功能：

```
void Application_Error(object sender, EventArgs e)
{
    //do your stuff here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T15:57:22.743

仅在出现错误并且我正在写入事件日志时才应触发事件：

在我的 global.asax 中，我添加了以下代码：

```
 /// <summary>
    /// Managing errors from a single location 
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void Application_Error(object sender, EventArgs e)
    {
        // 1\. Get the last error raised
        var error = Server.GetLastError();

        //2\. Get the error code to respond with
        var code = (error is HttpException) ? (error as HttpException).GetHttpCode() : 500;

        //3.. Log the error ( I am ignoring 404 error)
        if (code != 404)
        {
            // Write error details to eventlog
            WriteToEventLog(error);
        }

        //4\. Clear the response stream
        Response.Clear();

        //5\. Clear the server error
        Server.ClearError();

        //6\. Render the Error handling controller without a redirect
        string path = Request.Path;
        Context.RewritePath(string.Format("~/Home/Error",code),false);
        IHttpHandler httpHandler = new MvcHttpHandler();
        httpHandler.ProcessRequest(Context);
        Context.RewritePath(path,false);
    }

     /// <summary>
    /// This method writes the exception to the event log we have specified in the web.config or the app.config
    /// </summary>
    /// <param name="exception"></param>
    public void WriteToEventLog(Exception exception)
    {
        EventLog.WriteEntry("abc", exception.Message, EventLogEntryType.Error);
    } 
```

# android - 微调器在 android 中的附加值？

> ID：15135190
> 
> 赞同：2
> 
> 时间：2013-02-28T12:08:01.587
> 
> 标签：android, android-spinner

我想在微调器中添加本地密码。

例如：600000 到 600113

如何在微调器中添加这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:15:51.470

SO已经有很多关于解决这类问题的问题。请看看他们。

您可以查看之前的 SO 问题：**[如何在 Android 中向微调器添加项目？](https://stackoverflow.com/questions/5241660/how-can-i-add-items-to-a-spinner-in-android)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:17:10.383

创建一个要在微调器中填充的值数组，如下所示：

```
 String []Pin = {"600000","600113"}; 
```

初始化，然后将其绑定到微调器，如下所示：

```
 Spinner spinner = (Spinner) findViewById(R.id.YourSpinner); //From XML
      ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this,     android.R.layout.simple_spinner_item, Pin);
      spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_list_item_1); // The drop down vieww
      YourSpinner.setAdapter(spinnerArrayAdapter);
      YourSpinner.setOnItemSelectedListener(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:14:44.873

您应该创建一个适配器，然后将项目添加到适配器。

你是初学者，我发布完整代码

```
public class MainActivity extends Activity {

Spinner addnum_spinner;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    addnum_spinner=(Spinner) findViewById(R.id.spinner1);
    String[] myarray=new String[113];// create an array
    long a=600000;
    String v;
    for(int i=0;i<=113;i++)
    {
    v=String.valueOf(a);
    myarray[i]=v;
    a=a+1;
    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_spinner_dropdown_item,myarray);
    addnum_spinner.setAdapter(adapter);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:20:18.217

它更简单：

```
long int start=600000;
String myarray[]=new String[113];
for(int i=0;i<=113;i++)
{
myarray[i++]=a+"";
a++;
} 
```

接着

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
myarray, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

# c++ - 为什么没有隐式类型转换的警告？

> ID：15135196
> 
> 赞同：4
> 
> 时间：2013-02-28T12:08:42.023
> 
> 标签：c++, gcc, type-conversion

我终于在我的程序中发现了一个错误，这是由返回类型的隐式类型转换引起的。即使`g++ -Wall`没有警告。

我想知道是否有某种方法可以快速找出这种盲目的错误？

```
#include <iostream>

// return type should be int, but I wrote bool by mistake
bool foo(int x) {
  return x;
}

int main() {
  for (int i = 0; i < 100; ++i) {
    std::cout << foo(i) << std::endl;
    // 0 1 1 1 1 1  ..
    // should be 0 1 2 3 4 ...
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:13:33.160

这是正确的代码。if (i) where `i`has type`int`也是正确的。

n3376 4.12/1

> 算术、无范围枚举、指针或指向成员类型的指针的纯右值可以转换为 bool 类型的纯右值。将零值、空指针值或空成员指针值转换为 false；任何其他值都将转换为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:17:01.023

这是正常类型的促销。从 C++ 标准：

> `bool`, `char`, `wchar_t`, 有符号和无符号整数类型统称为整数类型

和：

> type 的右值`bool`可以转换为 type 的右值 `int`，`false`变为零和`true`变一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:26:25.573

确实，大多数（所有？）编译器在通常警告可能丢失有效数字或精度时（例如 int 到 char 转换或类似情况），但在转换为 bool 时例外。

我想这只有历史原因。

许多遗留代码使用类似的结构

如果（数字）...或如果（指针）...

代替

if(number!=0)... 或 if(pointer!=NULL) ...

而且，后一种风格通常被认为过于冗长。

传统很方便，允许编写简洁的代码，但确实容易出错。在某些其他语言（例如Java）中（有意识地）不支持它。

# javascript - 附加文本区域上的 CKEditor

> ID：15135198
> 
> 赞同：0
> 
> 时间：2013-02-28T12:08:43.100
> 
> 标签：javascript, jquery, ckeditor

我需要用 CKEditor 初始化一个新的 textarea，我已经阅读了 4 版本的文档，但我不明白该怎么做......

```
var form='<form id="editel_form" method="post" action="function.php" enctype="multipart/form-data" target="hidden_upload" onsubmit="javascript:upload_started()" class="formcor"><ul class="formconte">';                               
form+="<li class='cont'>Element Category: <br/><select id='de_cat' name='de_cat'></select>";                                
form+="<li class='cont'>Element New Name:<br/> "+data['id']+"<input type='text' id='de_name' name='de_name' value='"+data['title']+"'/></li>";                          
form+="<li class='cont'>Element Current Image:<br/><img src='"+data['image']+"' /></li>";                           
form+="<li class='cont'>Element New Image:<br/><input id='de_image' name='de_image' type='file' /></li>";
form+="<li class='cont'>Element New Price:<br/> <input type='text' id='de_price' name='de_price' value='"+data['price']+"' /></li>";
form+="<li class='cont'>Element New Position:<br/> <input type='text' id='de_pos' name='de_pos' value='"+data['position']+"' /></li></ul>";
form+="<ul class='textar'><li>Description:<br/><textarea id='de_desc' name='de_desc' class='ckeditor'>"+data['description']+"</textarea></li></ul>";
form+="<img src='css/loader.gif' class='loadingimg' /><input type='submit' id='sub_edit' name='sub_edit' value='Submit Changes' class='sendval' submit='return false;'/></form>";
$('#elementstable').after($('#elementstable')).append(form);$('#d_cat > option').clone().appendTo('#de_cat');
$("#d_cat option:selected").attr('selected','');
$("#d_cat option[value='"+data['category']+"']").attr('selected','selected');
new CKEDITOR.dom.node($('#de_desc')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:11:54.420

基本上`CKEDITOR.replace( 'de_desc' )`用JS调用。[请参阅文档](http://docs.ckeditor.com/#!/guide/dev_framed)。

# c++ - 在带有 Visual Studio 的 Windows 上使用 swig -go

> ID：15135201
> 
> 赞同：1
> 
> 时间：2013-02-28T12:08:54.537
> 
> 标签：c++, dll, go, swig, cgo

我想在 Windows 上使用 golang call c++ dll with swig。（gc编译，在Linux上是成功的。）但是有一些问题。这是示例。

```
//sampel.h
int compute(int a, int b);

//sample.cpp
#include <iostream>
#include "sample.h"

int compute(int a, int b){
    int temp = (a+b)*(a-b);
    return temp;
}

//sample.i
%module sample

%inline %{
    #include "sample.h"
%}
int compute(int a,int b); 
```

现在，我使用这个 cmd 来生成包装文件：

```
swig -c++ -go -soname sample.dll -intgosize 64 sample.i 
```

然后在VS中创建一个空的dll项目，将sample.h也添加到Header Files，将sample.cpp和sample_wrap.cxx添加到Source Files，将sample.i添加到项目中。

构建解决方案，生成 sample.dll

如下使用 cmd 生成 sample.a：

```
go tool 6g sample.go
go tool 6c -I C:\Go\pkg\windows_amd64 sample_gc.c
go tool pack grc sample.a sample.6 sample_gc.6 
```

接下来，安装 sample.a（以避免一些问题），然后运行 ​​test.go：

```
package main

import (
    "fmt"
    "sample"
)

func main() {
    fmt.Println(sample.Compute(3, 4))
} 
```

问题就在这里，当我运行 test.go 时，得到了错误：

```
adddynlib: unsupported binary format 
```

如何解决问题（dll 和 test.go 在同一目录中）？谢谢！如果您需要我错过的额外信息，请询问。

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T15:28:08.680

根据[SWIG Tutorial](http://www.swig.org/tutorial.html)和[SWIG Comparability](http://www.swig.org/compat.html)，它仅适用于 32 位版本的 Windows：

**SWIG 在包括 95/98/NT/2000/XP 在内的所有已知 32 位版本的 Windows 下也能完美运行。**

# sql - Sql 服务器。为什么 [几乎] 任何类型的字段值都可能被视为 Query/DML 中的引号字符串？

> ID：15135204
> 
> 赞同：1
> 
> 时间：2013-02-28T12:08:57.750
> 
> 标签：sql, sql-server, database, casting, sql-server-2000

我突然发现，在 SQL Server (2000) 中，任何字段类型值都可能被视为带引号的字符串（在查询或 DML 中）。

问题：这是正常行为还是意外成功的结果？

```
Example: 
CREATE TABLE [Test_table] (
    [int_field] [int] NULL ,
    [float_field] [float] NULL ,
    [date_field] [datetime] NULL ,
    [id] [int] NOT NULL 
) ON [PRIMARY]
GO

update test_table set int_field = 100, float_field = 10.01, date_field = CAST('2013-11-10' AS DATETIME) where id = 1

update test_table set int_field = '200', float_field = '20.02', date_field = '2014-12-10' where id = '2'

select * from test_table where id in ('1', 2) -- WHY '1' DOES WORK!??? 
```

为什么我需要这个？存在将超过 270 个参数作为完整文本（XML 或通过分隔符自定义序列化或类似 Len1+value1+len2+value2+..）发送到一个存储过程的想法，然后解析并提取所有所需值并在`UPDATE`语句中使用它们。这个[SO 问题](https://stackoverflow.com/questions/15123613/update-big-table-a-lot-of-columns-c-sharp-net)。

Q2：某些类型有限制吗？Q3：这是可靠的方式还是`CAST`推荐的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:18:21.483

SQL Server 与大多数（所有？）品牌的 SQL 一样，会自动尝试将事物转换为正确的类型。这是非常标准的行为。

在上述情况下应该是可靠的。在`update`and`select`语句中，必须转换为的类型是已知的（根据表的列定义）。

但是，当它是更复杂查询的一部分时，自动转换可能会引入一些微妙的问题。某些类型的 SQL 会出现这样的语句问题：

```
select case when foo=1 then 0 else 'a' end from table 
```

在这种情况下，结果类型不一定可以接受所有类型的结果，因此在尝试分配“a”时可能会失败。在复杂语句中依赖自动转换时要小心。在这种情况下，最好明确说明。

将所有内容作为字符串传入的另一个潜在问题是，如果您不小心传入了非数字值，则会出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:34:09.423

如果您检查[`CAST`and`CONVERT`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)主题，您会发现一个方便的表格：

![在此处输入图像描述](../Images/b1ae597e51f7ba59ca7ada883a8205cc.png)

您会注意到，所有其他类型都支持*从* `char`and进行转换`varchar`，并且其中只有少数需要显式强制转换。对于某些类型，没有明显的方法来键入该类型的文字，因此允许从字符串进行隐式转换是有意义的。

（但是，哦，我多么*希望*转换为`datetime`需要一个带有格式代码的显式案例......）

# php - 将逗号分隔的整数分解为整数？

> ID：15135205
> 
> 赞同：16
> 
> 时间：2013-02-28T12:08:58.183
> 
> 标签：php, integer, explode

假设我有一个这样的字符串`$thestring = "1,2,3,8,2"`。

如果`explode(',', $thestring)`是这样，我会得到一个字符串数组。如何将其分解为整数数组？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-28T12:14:47.067

[`array_map`](http://php.net/manual/en/function.array-map.php)也可以使用：

```
$s = "1,2,3,8,2";
$ints = array_map('intval', explode(',', $s ));
var_dump( $ints ); 
```

输出：

```
array(5) {
  [0]=>      int(1)
  [1]=>      int(2)
  [2]=>      int(3)
  [3]=>      int(8)
  [4]=>      int(2)
} 
```

示例[键盘](http://codepad.org/b4uEhB5r)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-28T12:11:58.443

使用这样的东西：

```
$data = explode( ',', $thestring );
array_walk( $data, 'intval' ); 
```

[http://php.net/manual/en/function.array-walk.php](http://php.net/manual/en/function.array-walk.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:13:27.823

在大多数情况下，您实际上并不需要（PHP 通常擅长处理强制转换字符串和浮点数/整数），但如果绝对必要，您可以[`array_walk`](http://php.net/manual/en/function.array-walk.php)使用[`intval`](http://php.net/manual/en/function.intval.php)or [`floatval`](http://www.php.net/manual/en/function.floatval.php)：

```
$arr = explode(',','1,2,3'); 
// use floatval if you think you are going to have decimals
array_walk($arr,'intval'); 
print_r($arr);

Array
(
    [0] => 1
    [1] => 2
    [2] => 3
) 
```

如果您需要更详细的内容，还可以查看[`settype`](http://www.php.net/manual/en/function.settype.php)：

```
$arr = explode(",","1,2,3");
function fn(&$a){settype($a,"int");}
array_walk($f,"fn");
print_r($f);

Array
(
    [0] => 1
    [1] => 2
    [2] => 3
) 
```

如果您尝试动态投射，这可能特别有用：

```
class Converter {
    public $type = 'int';
    public function cast(&$val){ settype($val, $this->type); }
}
$c = new Converter();

$arr = explode(",","1,2,3,0");
array_walk($arr,array($c, 'cast'));
print_r($arr);

Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 0
)

// now using a bool
$c->type = 'bool';
$arr = explode(",","1,2,3,0");
array_walk($arr,array($c, 'cast'));
var_dump($arr); // using var_dump because the output is clearer.

array(4) {
  [0]=>
  bool(true)
  [1]=>
  bool(true)
  [2]=>
  bool(true)
  [3]=>
  bool(false)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:12:46.387

因为 $thestring 是一个字符串，所以你会得到一个字符串数组。

只需在爆炸值前面添加 (int) 即可。

或者使用 array_walk 函数：

```
$arr = explode(',', $thestring);
array_walk($arr, 'intval'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T12:14:18.480

```
$thestring = "1,2,3,8,a,b,2";

$newArray = array();
$theArray = explode(",", $thestring);

print_r($theArray);

foreach ($theArray as $theData) {
  if (is_numeric($theData)) {
    $newArray[] = $theData;
  }
}

print_r($newArray); 
```

// 输出

原始数组

```
Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 8 [4] => a [5] => b [6] => 2 ) 
```

仅数字数组

```
 Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 8 [4] => 2 ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T12:15:05.003

```
$arr=explode(',', $thestring);
$newstr   = '';
foreach($arr as $key=>$val){
  $newstr .= $val; 
} 
```

# ios - Objective c renderInContext 在后台线程崩溃

> ID：15135208
> 
> 赞同：5
> 
> 时间：2013-02-28T12:09:03.290
> 
> 标签：ios, cocoa-touch, cgcontext, screen-capture, mainwindow

我有一个应用程序，其中屏幕在后台线程中连续捕获。这是代码

```
- (UIImage *) captureScreen {

    UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
    CGRect rect = [keyWindow bounds];
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [[keyWindow layer] renderInContext:context];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    UIDeviceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if ((orientation == UIInterfaceOrientationLandscapeLeft) || (orientation == UIInterfaceOrientationLandscapeRight) || (orientation==UIInterfaceOrientationPortraitUpsideDown)) {
        img=[self rotatedImage:img];
    }
    return img;
} 
```

它适用于捕获一次或两次。但过了一会儿，应用程序总是在同一行崩溃`[[keyWindow layer] renderInContext:context];`并给出`EXC_BAD_ACCESS (code=1, address=0x8)`消息。我到处搜索，没有任何用处。仅发现 renderInContext 在后台线程中工作时存在内存泄漏问题。但正如你所理解的那样，这并不能解决我的问题:)。所以有3个问题：-

1.  这次崩溃（问题）的原因是什么？

2.  我能用这个做什么？

3.  有没有其他方法来捕获屏幕（除了Apple建议的方法，因为还使用了renderInContext）。没有渲染的东西......？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T12:19:10.930

`-renderInContext:`不是线程安全的，您不能从后台线程调用它。您必须在主线程上进行绘图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T09:11:40.740

除了在主线程上执行此方法外，我无事可做。我重新组织了我的线程管理，这样做可以得到很好的结果：

`[self performSelectorOnMainThread:@selector(captureScreenOnMainThread) withObject:nil waitUntilDone: YES];`在某些情况下，最后一个参数可以设置为 no...

感谢所有回复。

# azure - 为什么我收到 watk 网站和 sql server 的服务器错误“/”应用程序？

> ID：15135209
> 
> 赞同：1
> 
> 时间：2013-02-28T12:09:04.047
> 
> 标签：azure, azure-sql-server

我正在使用 WATK 来学习`VS2010`和`Windows Azure`. 我目前正在从事的培训实验室是“Windows Azure 网站和虚拟机使用`ASP.NET`和`SQL Server`（来自文件夹 ASPNETAzureWebSitesVMSQL）。我已经在 Azure 等中创建了我的 VM，我正在使用“结束”Visual Studio 解决方案。因此，我唯一的改变对项目所做的是指定数据库的 DNS URL、端口号、用户名和密码。当我尝试在本地运行应用程序（使用 VS 2010）时，出现以下错误：

> “/”应用程序中的服务器错误。
> 
> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的网址：/
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

我不知道问题是什么。有什么建议么？

# jenkins - 持续集成说明

> ID：15135215
> 
> 赞同：0
> 
> 时间：2013-02-28T12:09:25.450
> 
> 标签：jenkins, continuous-integration, hudson

我在一个维护 Java 网站以及后端 Java 作业和 shell 脚本作业的团队中工作。

在所有开发人员完成更新后，只有相关的开发人员才致力于源代码控制系统。

稍后运行 ant 构建脚本并生成 war 文件。

除了这些战争文件之外，通常还有要复制到 QA/PROD 的 shell 脚本等。

然后有一天，有一个团队打电话给发布管理团队，他们会将代码从我们的开发环境转移到 QA/PROD。

最近我遇到了像 Jenkins/Hudson 这样的持续集成系统。

这些工具能否构建所有已提交的更改并自动将我的代码传输到 QA/PROD。

顺便说一句，我在 AIX 服务器环境中工作并使用 Tomcat 作为容器。

我更好奇该工具是否能够将我的代码复制到 QA/PROD。

请说清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:28:46.593

答案几乎肯定是肯定的，具体取决于您复制代码的特定设置。[在相应的Jenkins wiki 页面上](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Artifactuploaders)有大量用于此目的的插件。您应该能够在那里找到满足您需求的东西。

# jquery - 我可以检查 CSS 属性是否对 jQuery 有效吗？

> ID：15135216
> 
> 赞同：5
> 
> 时间：2013-02-28T12:09:33.620
> 
> 标签：jquery, css

我正在构建一个简单的 CSS 编辑器，我想让用户编辑元素的 CSS 属性或添加一个新的。

在将新的 CSS 属性应用于元素之前，我想检查该属性是否有效。

你知道用 jQuery 检查 CSS 属性/值是否有效的简单方法吗？

更新：

例子：

```
$('#some-element').css('margin','10px'); //this is valid and it will be applied
$('#some-element').css('margin','asds'); //this is not valid and it will not be applied 
```

在申请房产之前如何检查`margin: asds;`无效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:55:49.203

您可以创建一个新元素并将您的 CSS 应用到它。您读取初始值，将您的 css 应用于此元素并立即再次读取该值。如果新值*不*等于初始值，则您的 css 有效（因为它已成功应用于元素）。

```
var div = $("<div>");
var _old = div.css(property);
div.css(property,value);
var _new = div.css(property);
var valid = _old!=_new;
// if (_old != _new), the rule has been successfully applied
console[valid?"log":"warn"]( `${property}:${value} is ${valid?"":"not"} valid!` ); 
```

**[示例小提琴](http://jsfiddle.net/j9sbt/6/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-10-27T08:17:32.670

我可能想到的最快解决方案是使用 CSS.supports 函数。也可以与香草 js 一起使用。事情是这样的：

```
CSS.supports(propertyName, propertyValue)

CSS.supports('color','red') 
//True.
CSS.supports('color', '#007')
//True. 

CSS.supports('color', 'random')
//False. 
CSS.supports('colours', 'red')
//False. 
```

我认为不需要生成辅助函数，因为它非常简单。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T13:44:11.197

从克里斯托夫的回答中我得到了这个：

```
function validCSS(property,value){
    var div = $("<div>");
    var _old = div.css(property);
    div.css(property,value);
    var _new = div.css(property);
    return (_old!=_new);
} 
```

像这样使用：

```
if (validCSS(property, value)) {
    $('#some-element').css(property, value);
} else {
    alert ('Invalid CSS');
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T12:17:47.687

您可以读取任何元素的 CSS 属性并检查结果是否已定义。大多数（全部？）CSS 属性都有一个默认值。

```
$("body").css("border");  // "0px none rgb(0, 0, 0)"
$("body").css("borderx"); // undefined 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-21T15:05:54.107

## 回答

你可以使用我创建的这个函数

```
function validCSS(property, value){
  var $el = $("<div></div>");
  $el.css(property, value);
  return ($el.css(property) == value);
} 
```

[https://gist.github.com/dustinpoissant/7828a80d2899c57d92472b59675fc3fa](https://gist.github.com/dustinpoissant/7828a80d2899c57d92472b59675fc3fa)

## 测试

```
console.log(validCSS("width", "FooBar")); // false
console.log(validCSS("width", "100px")); // true 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-28T12:15:09.343

[您可以使用普通的 javascript 和 regex 来检查 css 是否“有效”，您可以在w3schools](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)了解有关 javascript 的 regex 实现的更多信息。

[这里](https://stackoverflow.com/questions/236979/parsing-css-by-regex)还有一个 SO 帖子，讨论了创建一个查找 CSS 的正则表达式。

# php - PDO PostgreSQL 绑定错误

> ID：15135217
> 
> 赞同：4
> 
> 时间：2013-02-28T12:09:35.450
> 
> 标签：php, postgresql, pdo

我发现当我尝试使用参数运行更新查询时，出现错误

> 参数推导的类型不一致

也许那是因为目标字段的类型（*字符变化*），一切都适用于*文本*列类型。但我不想仅仅因为这个而改变列类型。然后我被告知我应该直接传递params（使用bindValue或bindParam，确定每个值的类型）而不是发送params数组来*执行*方法。

但是当我这样做时，我得到了错误

> 错误：绑定消息提供 0 个参数，但准备好的语句“pdo_stmt_00000001”需要 1

测试代码是

```
$Stmt = $DB->prepare("SELECT * FROM test_table WHERE test_field=:test_field");
$Stmt->bindValue(':test_field', 'test', PDO::PARAM_STR);
$Stmt->execute();
var_dump($DB->errorInfo()); 
```

因此，据了解，绑定根本不起作用。或者我做错了。但也许有办法解决它？

我正在使用 PostgreSQL 9.2.3、libpq 8.4.16 运行 PHP 5.4.12。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:08:04.483

好吧，似乎唯一的解决方案是将所有文本值转换为如下文本：

```
update test_table set test_field = :test_field::text 
```

否则会发生关于不一致类型的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:17:00.420

我这样做：

```
$stmt = $DB->prepare("SELECT * FROM test_table WHERE test_field=:test_field");
$stmt->execute(array(":test_field" => 'test'));
$result = $stmt->fetch(PDO::FETCH_ASSOC);
if($result)
{
    return $result['id'];
    // Or whatever you're trying to get.
}
return null; 
```

您只需在执行函数中输入一组参数，无需为绑定添加特殊行。

告诉我它是否适合您（或不适合）。

# wpf - WPF 菜单样式列表框 (MVVM)

> ID：15135219
> 
> 赞同：0
> 
> 时间：2013-02-28T12:09:46.340
> 
> 标签：wpf, xaml, drop-down-menu, datatemplate

我想创建一个跟踪所选项目的菜单，所以我使用嵌套的 ListBoxes（因为 Selectors 的选项[非常有限](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector%28v=vs.100%29.aspx#inheritanceContinued)。主 ListBox 水平排列，每个 ListBoxItem 包含一个 TextBlock 和一个 StackPanel 以及另一个 ListBox（这个一个垂直显示）以显示“MenuItems”（我还需要跟踪所选项目）。像这样：

```
 <ListBox DockPanel.Dock="Top" Grid.Column="0" ItemsSource="{Binding DashBoards}" 
                     IsSynchronizedWithCurrentItem="True" SelectedItem="{Binding SelectedDashBoard}">

        <ListBox.Template>
            <ControlTemplate TargetType="{x:Type ListBox}">
                <DockPanel>
                    <ScrollViewer x:Name="scrollviewer" HorizontalScrollBarVisibility="Hidden" CanContentScroll="False">
                        <StackPanel IsItemsHost="True" Orientation="Horizontal" />
                    </ScrollViewer>
                </DockPanel>
            </ControlTemplate>
        </ListBox.Template>

        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="{Binding Name}" />
                    <dx:DXExpander IsExpanded="{Binding IsSelected}">
                        <ListBox ItemsSource="{Binding Sections}" 
                     IsSynchronizedWithCurrentItem="True" SelectedItem="{Binding SelectedSection}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Metadata.Name}" />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </dx:DXExpander>
                </StackPanel> 
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我设法将这个 ListBox 显示在其他控件之上，所以它看起来像一个菜单。

现在有问题了……当我在水平列表框中选择一个项目时，扩展器可以正常展开，但列表框的高度会增加，因此所有其他项目看起来也像展开了一样。

如何在不更改 ListBox 高度的情况下仅扩展所选项目？

换句话说，我怎样才能让垂直列表框之一溢出其父容器（又名水平列表框）？

我想我需要重新构建一切，但我不知道如何开始。我找到了一些使用 Canvas 的解决方案，但在这种情况下它们似乎不起作用。

欢迎任何帮助，并将努力支持 ;-)

（注意：以防之前不清楚，我需要知道在水平 ListBox 中选择了哪个元素，以及在每个单独的垂直 ListBox 中选择了哪个元素。这将绑定到跟踪选择的相应 ViewModel，并且两者水平和垂直列表框是动态填充的，因此无法在 XAML 中定义它们）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:35:59.033

您可以将所选样式移出数据模板，使其不会应用于所有项目。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="ListViewItem">
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Height" Value="90"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <ListView>
            <ListView.Items>
                <sys:String>a</sys:String>
                <sys:String>b</sys:String>
                <sys:String>c</sys:String>
                <sys:String>d</sys:String>
                <sys:String>e</sys:String>                
            </ListView.Items>
        </ListView>
    </Grid>
</Window> 
```

编辑：在正确阅读您所追求的内容后，我没有您的扩展器类或您要绑定的项目，所以我使用的是 Expander 和 MenuItem 但这给出了一个使用列表视图作为带有可选项目的菜单的示例，也许它会帮助解决您的问题，我假设您的扩展器控件隐藏了实际的扩展器按钮。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ListView Height="16" VerticalAlignment="Top">
            <ListView.Resources>
                <Style TargetType="ListViewItem">
                    <Setter Property="Margin" Value="0,0,10,0"/>
                </Style>
            </ListView.Resources>
            <ListView.Template>
                <ControlTemplate TargetType="{x:Type ListBox}">
                    <StackPanel Background="LightGray" IsItemsHost="True" Orientation="Horizontal" />
                </ControlTemplate>
            </ListView.Template>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical"  ClipToBounds="False">
                        <TextBlock Text="{Binding Header}" />
                        <Canvas>
                            <Expander IsExpanded="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListViewItem}}">
                                <Expander.Style>
                                    <Style TargetType="{x:Type Expander}">
                                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="1"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type Expander}">
                                                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="3" SnapsToDevicePixels="true">
                                                        <DockPanel>

                                                            <ContentPresenter x:Name="ExpandSite" DockPanel.Dock="Bottom" Focusable="false" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" Visibility="Collapsed" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                                        </DockPanel>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsExpanded" Value="true">
                                                            <Setter Property="Visibility" TargetName="ExpandSite" Value="Visible"/>
                                                        </Trigger>
                                                        <Trigger Property="ExpandDirection" Value="Right">
                                                            <Setter Property="DockPanel.Dock" TargetName="ExpandSite" Value="Right"/>
                                                        </Trigger>
                                                        <Trigger Property="ExpandDirection" Value="Up">
                                                            <Setter Property="DockPanel.Dock" TargetName="ExpandSite" Value="Top"/>
                                                        </Trigger>
                                                        <Trigger Property="ExpandDirection" Value="Left">
                                                            <Setter Property="DockPanel.Dock" TargetName="ExpandSite" Value="Left"/>
                                                        </Trigger>
                                                        <Trigger Property="IsEnabled" Value="false">
                                                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Expander.Style>
                                <ListView ItemsSource="{Binding Items}" IsSynchronizedWithCurrentItem="True" />
                            </Expander>
                        </Canvas>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>

            <ListView.Items>
                <MenuItem Header="File">
                    <MenuItem.Items>
                        <MenuItem Header="Open" IsHitTestVisible="False"/>
                        <MenuItem Header="Exit"  IsHitTestVisible="False"/>
                    </MenuItem.Items>
                </MenuItem>
                <MenuItem Header="Edit">
                    <MenuItem.Items>
                        <MenuItem Header="Cut" IsHitTestVisible="False"/>
                        <MenuItem Header="Copy" IsHitTestVisible="False"/>
                        <MenuItem Header="Paste" IsHitTestVisible="False"/>
                    </MenuItem.Items>
                </MenuItem>
            </ListView.Items>

        </ListView>
    </Grid>
</Window> 
```

# android - 服务使 UI 冻结

> ID：15135225
> 
> 赞同：0
> 
> 时间：2013-02-28T12:09:59.657
> 
> 标签：android

我的应用程序有一个数据库，如果它没有注意到与 Wifi 或移动网络的任何连接，例如 3G og 4G，它将存储排队的项目。我的问题是：

我有一个`BroadcastReciever`以这种方式注册的：

```
@Override
public void onResume() {
  super.onResume();
  if(networkMonitor == null)
     networkMonitor = new CaseQueueReceiver();      
  IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);        
  registerReceiver(networkMonitor, filter);
} 
```

我`BroadcastReciever`正在开始`Service`从该数据库中挑选项目并通过网络服务或邮件发送它们。我的 BrodcastReciever 是这样的：

```
public class CaseQueueReceiver extends BroadcastReceiver {

    boolean available;
    QueueDB queueDB;
    int count;

    public CaseQueueReceiver() {
        queueDB = new QueueDB(ContextHelper.context());
        count = queueDB.countUnsentCases();
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
            NetworkInfo info = intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            String typeName = info.getTypeName();
            String subtypeName = info.getSubtypeName();
            available = info.isAvailable();

            Log.i("Network Monitor", "Network Type: " + typeName + ", subtype: " + subtypeName + ", available: " + available);

            if (available && count > 0) {
                Intent service = new Intent(context, SendQueuedCasesService.class); 
                context.startService(service);
            }
        }
    }
} 
```

如您所见，如果互联网连接可用并且数据库包含某些内容，我将启动一个服务以将这些项目发送到数据库中。

我的服务如下所示：

```
public class SendQueuedCasesService extends Service {

    boolean available;
    DatabaseHandler db;
    QueueDB queueDB;
    HashMap<String, String> queueHashMap;
    CreateTransaction transaction;
    String pcn, file;
    int sent;

    @Override
    public IBinder onBind(Intent intent) {

        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();   

        db = new DatabaseHandler(ContextHelper.context());
        queueDB = new QueueDB(ContextHelper.context());
        queueHashMap = new HashMap<String, String>();
        transaction = new CreateTransaction(ContextHelper.context());

        queueDB = new QueueDB(this);
        int count = queueDB.countUnsentCases();
        Log.w("Unsent cases count: ", Integer.toString(count)); 

        if (count > 0) {

            queueHashMap = queueDB.getUnsetCases(); 
            Iterator<Entry<String, String>> it = queueHashMap.entrySet().iterator(); 

            while(it.hasNext()) {

                Map.Entry pairs = it.next(); 
                pcn = pairs.getKey().toString();
                Log.w("PCN in Queued Cases: ", pcn); 

                file = pairs.getKey().toString();
                Log.w("Nist File Path: ", file); 

                try 
                {
                    sent = transaction.createTransaction(pcn, file);

                    if(sent == -2) 
                    {
                        queueDB.deleteUnSentCase(pcn);
                        db.updateDB(pcn, ""); 
                    }
                    else 
                        break; 

                } catch(MailException e) {
                    Log.e("MailException: ", e.getMessage());
                }
            }

            Intent i = new Intent(this, WorkflowChooser.getCurrentWorkflow());
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(i);
        }
    }
} 
```

我的问题是，当我启动应用程序时，这会阻止 UI 一段时间，然后显示 UI。另一个问题是，如果我关闭并再次打开 WiFi，则不会触发此服务。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:12:39.820

> 我的问题是，当我启动应用程序时，这会阻止 UI 一段时间，然后显示 UI。

服务在 UI 线程中运行。那就是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:31:39.817

您可以尝试使用`IntentService`. 它将自动为您处理所有线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:12:30.113

您应该创建一个[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html "异步任务")或一个新线程来处理服务。

# r - 带有错误栏的ggplot barplot

> ID：15135232
> 
> 赞同：0
> 
> 时间：2013-02-28T12:10:17.087
> 
> 标签：r, ggplot2

嗨，我尝试了你们中的一个人的代码来绘制带有错误栏的条形图。

但它不起作用，我确信提供的代码应该可以工作（产生的数字正是我想要的）

这是代码，我错过了什么吗？

```
> my.df <- read.table(text = "group N        val         sd         se         ci
 206 3 37.2269533  7.9688645  4.6008261 19.7957568
 207 3  2.0731505  2.2843009  1.3188417  5.6745180
 208 3  2.2965978  1.4120606  0.8152536  3.5077531
 209 3  3.1085132  1.1986664  0.6920504  2.9776525
 210 3  3.3735251  1.9226134  1.1100214  4.7760365
 211 3  4.0477951  2.9410503  1.6980162  7.3059739
 212 3  1.2391158  1.2345554  0.7127709  3.0668055
 213 2  1.3082374  1.1234220  0.7943793 10.0935460", header = TRUE)
> 
> ggplot(my.df, aes(x = factor(group), y = val)) +  
   geom_bar(position = position_dodge()) + 
   geom_errorbar(aes(ymin=val-se, ymax=val+se)) 
```

我收到了这样的信息：

```
Error in rename(x, .base_to_ggplot, warn_missing = FALSE) : 
  could not find function "revalue" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:31:38.563

`revalue`是`plyr`5 个月前推出的功能。可能您正在运行比这更旧的版本。更新`plyr`并`ggplot2`应该解决该问题。

# android - SimpleCursorAdapter 与 BaseAdapter

> ID：15135237
> 
> 赞同：0
> 
> 时间：2013-02-28T12:10:41.320
> 
> 标签：android, adapter

使用 SimpleCursorAdapter 而不是 BaseAdapter 有什么好处？BaseAdapter 更适合哪些场景，SimpleCursorAdapter 更适合哪些场景？

同样在 SimpleCursorAdapter 的文档中，它写道

> 此构造函数在 API 级别 11 中已弃用。不鼓励使用此选项，因为它会导致在应用程序的 UI 线程上执行游标查询，从而可能导致响应速度不佳甚至应用程序无响应错误。作为替代方案，将 LoaderManager 与 CursorLoader 一起使用。

这是否意味着即使在较低的 API 版本上也不应该使用 SimpleCursorAdapter，例如。API 级别 10（姜饼）？

建议的替代方案 - LoadManager 和 CursorLoader 仅适用于 API 级别 11 及更高级别。那么在 API 级别 10 上工作的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:23:22.893

> 使用 SimpleCursorAdapter 而不是 BaseAdapter 有什么好处？

`SimpleCursorAdapter`封装了将值从 a 绑定`Cursor`到项目的子视图的逻辑`ListView's`。`BaseAdapter`只是一个抽象类，可以继承它以提供初始化您的自定义逻辑`ListView`。

> BaseAdapter 更适合哪些场景，SimpleCursorAdapter 更适合哪些场景？

如果您所需要的只是将值从`Cursor`to `Views`-go 与`SimpleCursorAdapter`.

> 这是否意味着即使在较低的 API 版本上也不应该使用 SimpleCursorAdapter，例如。API 级别 10（姜饼）？

不，这不是真的，您可以将它用于任何版本的 Android。

> 建议的替代方案 - LoadManager 和 CursorLoader 仅适用于 API 级别 11 及更高级别。那么在 API 级别 10 上工作的解决方案是什么？

`LoaderManager`并且`CursorLoader`都在兼容性库中可用，因此您可以在 Android v4 及更高版本上使用它们。希望这可以帮助。

# asp.net-mvc - 实体框架 - 选择数据

> ID：15135238
> 
> 赞同：1
> 
> 时间：2013-02-28T12:10:45.507
> 
> 标签：asp.net-mvc, linq

我没有可见的领域你知道为什么（在我的 LINQ 中）吗？

例子

```
 var student = (from s in ctx.Students
                where s.StudentName == "Student1"
                select s).FirstOrDefault<Student>(); 
```

数据库（表区域）：

![在此处输入图像描述](../Images/f6c26016a8c6fbeeaeb32726f80ba522.png)

LINQ

![在此处输入图像描述](../Images/086a6de28c256f25f1b262f771fdcdee.png)

带有ctx的LINQ也有问题

![在此处输入图像描述](../Images/43e26b337ef63c577fb0d191e09788aa.png)

区域 ID

![在此处输入图像描述](../Images/7b43da8db6eaac959e46be4b7dd5e5a5.png)

正确的：

```
public ActionResult Index()
        {

            using (var ctx = new NORTHWNDEntities())
            {

                var Territory = (from s in ctx.Territories
                                 where s.TerritoryDescription
                                       == "Student1"
                                 select s).FirstOrDefault<Territories>();
            }

            return View();
        } 
```

谢谢大家的时间！和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:31:10.520

在您进行查询的上下文中是否可见 ctx ？
问题看起来像您没有很好地创建数据上下文 (ctx) 的实例，或者可能是该变量 (ctx) 在该上下文中不可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:12:50.473

检查类以查看属性是否标记为私有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T12:37:38.243

不应该是：

```
(from s in Territories where s.TerritoryID == "Student1" select s).FirstOrDefault<Territories>(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T12:51:20.580

`ctx`不是在创建上下文图时神奇地出现的东西。要使用您的上下文，您必须像这样实例化它：

```
using(var ctx = new MyContext())
{
    var territory = ....
} 
```

where`MyContext`应替换为您的上下文类的名称。

# excel - 在 Mac 上创建的 Excel 的 Excel 连接字符串

> ID：15135244
> 
> 赞同：2
> 
> 时间：2013-02-28T12:11:04.533
> 
> 标签：excel, connection-string

我一直在到处寻找这个问题的答案。我有一个使用 Microsoft.Jet.OleDB 导入 Excel 文件的工作应用程序。

现在看来，当 Mac 上的用户上传 Excel 文件时，所有特殊字符（ë、é、ç、...）在导入后都会被其他字符替换。这与字符编码有关，但我还没有发现 Excel 在 Mac 上保存时似乎以什么格式存储。

现在，我有这个连接字符串：

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;"" 
```

我尝试将 CharacterSet 添加到我的连接字符串中，但始终是同样的问题。我试过添加：

```
CharacterSet=1200
CharacterSet=65001 
```

但问题总是一样。Excel 在 Mac 上以什么格式保存？有什么我可以尝试的吗？

# php - PHP 引用 URL 和重定向

> ID：15135246
> 
> 赞同：1
> 
> 时间：2013-02-28T12:11:11.477
> 
> 标签：php

我似乎无法弄清楚为什么以下内容会将所有流量发送到未找到页面的页面，即使是由 Paypal 推荐的。有任何想法吗？

```
$refererUrl = $_SERVER['HTTP_REFERER'];
$Exploded = explode("/",$refererUrl);
$urlToCheck = $Exploded[3];
$findURL = strpos($urlToCheck,'paypal.com');
if($findURL === false){
    header('location:/page-not-found');
} else  {
/* Do something if page referred to by Paypal */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:16:32.343

您正在检查是否`'paypal.com'`存在于`$Exploded[3]`. 为什么您希望引用 url 的那部分是主机名？数组索引从 0 开始，因此从左到右计数将为您提供以下信息，表明 2 将是正确的索引。

```
$Exploded = explode('http://www.google.com/?q=foobar', '/');

// $Exploded now contains:
0: http:
1: 
2: www.google.com
3: ?q=foobar 
```

但是，使用一些可以解析任意 URL 并从解释的 url 读取主机名的实用程序会更安全。你可以做这样的事情（未经测试）：

```
$referer = parse_url($_SERVER['HTTP_REFERER']);
if($referer['host'] != 'paypal.com')
    header('location:/page-not-found');
else
    /* Do something if page referred to by Paypal */ 
```

parse_url 文档： http: [//php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:14:02.297

你确定`HTTP_REFERER`是这样设置的？如果您查看它说的[文档](http://php.net/manual/en/reserved.variables.server.php)

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:15:08.543

这是对的吗？

```
$urlToCheck = $Exploded[3]; 
```

如果您的推荐人看起来像[http://www.example.com/](http://www.example.com/) .... 通过“/”爆炸，您将永远不会在第三个索引中获得域。应该是2。

尝试使用

```
$urlToCheck = $Exploded[2]; 
```

# asp.net - 仅将样式应用于一个元素

> ID：15135248
> 
> 赞同：1
> 
> 时间：2013-02-28T12:11:21.633
> 
> 标签：asp.net, html, css

我以正常方式包含样式，如下所示：

```
<link rel="stylesheet" href="/css/boostrap.css" type="text/css" /> 
```

这种样式有很多样式破坏了我的主视图，它适用于 body 元素，是否可以仅将样式应用于一个特定的 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:14:41.540

将其`<div>`放入单独的页面并仅在该页面中包含引导 CSS。

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/css/boostrap.css" type="text/css" />
    </head>
    <body>
        <div>This is your DIV</div>
    </body>
</html> 
```

您的主页不会被它触及，您只需使用`iframe`, 更改（例如）以下内容即可在主页内显示该 div：

```
<div>This is your DIV</div> 
```

对此：

```
<iframe src="url of the other page"></iframe> 
```

当然，您可能需要稍微更改页面的逻辑以适应这一点（我猜主要是因为服务器端 C# 代码，对于客户端 JavaScript 代码应该更容易，因为它们来自同一个域）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T12:58:55.130

您尝试使用 javascript 代码删除所有样式的正文，然后在正确的 css 中为正文样式添加名称/ID 后，将其设置为正文的类属性。（文档完全加载后的js代码）

另一个（愚蠢的）解决方案取决于您在 css 文件中的内容。您是否可以编辑 /css/boostrap.css，只需将所有正文单词替换为“.body1”（fe => 从中创建一个类）？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T12:13:11.263

是的，您可以通过 ID 执行此操作：

```
<div id="myDiv"></div> 
```

然后CSS将是：

```
#myDiv { ... } 
```

这将把这种风格应用到**任何**名为`myDiv`. 您还可以使用类：

```
<div class="someClass"></div> 
```

然后CSS将是：

```
.someClass { ... } 
```

这将把这种风格应用到**任何**附有该类的东西上。

* * *

根据您所描述的，围绕破坏已定义 CSS 的 CSS 的一般性，您将想要摆脱那些通用元素样式并使用 ID，因为听起来您正在尝试合并一些 CSS .

# android - adb ：无法从命令行向我的设备发送命令

> ID：15135249
> 
> 赞同：0
> 
> 时间：2013-02-28T12:11:26.910
> 
> 标签：android, galaxy

我正在尝试启用 CheckJNI 以调试我的本机代码（请参阅[http://android-developers.blogspot.ch/2011/07/debugging-android-jni-with-checkjni.html](http://android-developers.blogspot.ch/2011/07/debugging-android-jni-with-checkjni.html)）。

我有一个安装了谷歌 USB 驱动程序的 Galaxy S3。当我使用 eclipse 时，我可以安装应用程序并查看我的设备。

我的问题是我无法从 cmd.exe 向我的设备发送任何命令（它显示“错误：找不到设备”）。我试图发送`adb shell setprop debug.checkjni 1`，但我总是遇到同样的错误。

我尝试了不同的 USB 端口、不同的 USB 电缆，并尝试以管理员身份启动 cmd.exe，但我总是得到相同的结果。有人遇到过同样的问题吗？知道我能做什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:25:38.273

在尝试使用 Windows 7 向 2 台不同计算机上的 2 台不同设备发送命令后，我终于用 Ubuntu 安装了一个虚拟机，在那里我可以使用命令行访问我的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:20:52.960

尝试重新启动您的设备和计算机，然后执行以下命令：

```
 adb kill-server
   adb start-server 
```

然后看看它是否显示设备使用

```
 adb devices 
```

对于可用设备

然后您可以使用在您的设备中运行命令

```
 adb shell ...... 
```

# php - cURL 和 Apache 的问题

> ID：15135253
> 
> 赞同：0
> 
> 时间：2013-02-28T12:11:43.490
> 
> 标签：php, apache, curl

我正在使用 cURL 从外部域成功导入一些数据，直到我尝试使用此 URI：[http](http://www.airbnb.com/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06) ://www.airbnb.com/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06 ，这是一个 ics 日历。我可以在命令行上成功运行它（自己试试）： shell>> curl [https://www.airbnb.com/calendar/ical/760660.ics?s=593cc556438a8f0919beb6107b6f508d](https://www.airbnb.com/calendar/ical/760660.ics?s=593cc556438a8f0919beb6107b6f508d)，所以这不是网络问题。

但我的 php 脚本（确实返回其他 URI）不返回这个。或者更好的是它返回false。

这是小php

```
function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, FALSE);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);

    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$ical1= "http://www.airbnb.com/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06";
echo file_get_contents_curl($ical1); 
```

我确实认为这与我的 apache 或 php 配置有关，因为它在 appfog 上运行，并且与我的旧 xampp 安装一起运行。恢复：所有 URI 都使用旧的 xampp 安装，现在只有示例中的一个失败。

在我的 phpinfo() 上，我可以阅读：

```
cURL support enabled
cURL Information 7.24.0
Age 3
Features
AsynchDNS Yes
Debug No
GSS-Negotiate Yes
IDN No
IPv6 Yes
Largefile Yes
NTLM Yes
SPNEGO No
SSL Yes
SSPI Yes
krb4 No
libz Yes
CharConv No
Protocols dict, file, ftp, ftps, gopher, http, https, imap, imaps, ldap, pop3, pop3s, rtsp, scp, sftp, smtp, smtps, telnet, tftp
Host i386-pc-win32
SSL Version OpenSSL/1.0.1c
ZLib Version 1.2.5
libSSH Version libssh2/1.3.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T13:59:09.040

尝试这个 ：

```
function get_remoteDATA($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    //If POST METHOD IS NEEDED
    //curl_setopt($ch, CURLOPT_POST, TRUE);
    //curl_setopt($ch, CURLOPT_POSTFIELDS, "var1=1&var2=2&var3=3");
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)");
        //curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1C25 Safari/419.3");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,false);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 9);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$cntn= get_remoteDATA('http://www.airbnb.com/calendar/ical/760186.ics?s=29623a93eb0e693c77591a711f082f06');
print_r($cntn); 
```

# java - 在 Java 中使用线程时，我是否需要一个可运行的替代方案

> ID：15135254
> 
> 赞同：1
> 
> 时间：2013-02-28T12:11:45.113
> 
> 标签：java, multithreading, runnable

`thread.start()`从我的主程序调用时，该方法`run()`在线程中调用，如下所示：

```
public class ServerThread implements Runnable {

        public void run() {
        //executable code
        }

        public void myMethod() {
        //code to hopefully respond to a button press in main class.
        }
} 
```

我需要`myMethod`从我的主类中调用现有线程。但据我了解，这是不可能使用`Runnable`. 还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:27:32.927

这应该有效：

```
ServerThread st = new ServerThread();
new Thread(st).start();
st.myMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:25:52.663

修改你的类：

```
public class ServerThread implements Runnable, ActionListener {

        public void run() {
        //executable code

        }

        void buttonPressed(ActionEvent ae){

      // your event handling code
    }

} 
```

更改，`ActionListener`以及`buttonPressed()`您的框架特定的侦听器类和事件处理程序。

# drupal - 使用新字段上传时出现drupal 7错误

> ID：15135261
> 
> 赞同：0
> 
> 时间：2013-02-28T12:12:04.927
> 
> 标签：drupal

我在使用 drupal 7 时遇到了一个非常奇怪的问题。我有一个正在运行的 wbesite 并使用视图和内容类型，我已经能够构建很多功能。现在发生以下情况：

当我向类型文件或图像的内容类型（新的或现有的）添加新字段时，我在表单中有此字段，但是当我尝试使用此表单上传文件或图像时，它会给出错误“文件无法上传”或完整错误（来自最近的日志消息）：“文件字段 field_katapult_voorpagina 的上传目录 public:// 无法创建或无法访问。新上传的文件无法保存在此目录中结果，上传被取消了。”

奇怪的是，当我使用较旧的现有字段（指向同一目录：public://）上传文件或图像时，它不会出错并且文件上传没有问题。所以这让我认为服务器设置实际上设置正确。

谁能帮我解决这个问题？如果没有，谁能指出我在哪里可以找到处理drupal 7中上传过程的文件的正确方向？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:15:45.003

您需要检查几件事：

*   您的公共文件夹在哪里，如果它可以由网络服务器写入（在 /admin/config/media/file-system 中）
*   您的工作字段将文件发送到哪里（可能是不同的目录），如果是，也将其用于新字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T14:04:00.463

I think you should check the files folder permission.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:01:13.510

检查新图像字段的文件目标目录设置。不要包括前面或后面的斜杠。该字段支持令牌。您还可以检查最大、最小分辨率、文件上传限制、图像样式（如果是缩略图/或现有以外的新图像样式）和值的数量（如果设置为 1，则不能上传 2 个或更多）。最后，您必须将其设置为公共文件类型。

# jquery - 服务调用栈

> ID：15135283
> 
> 赞同：0
> 
> 时间：2013-02-28T12:12:57.790
> 
> 标签：jquery, node.js, backbone.js, underscore.js

我已经编写了大量的backbone.js 模型、集合，其中大部分都是使用URL 的RESTful 服务调用。

我怎样才能将这些 URL 服务调用作为中央集线器，在其中添加所有 url，并且所有模型/集合都引用该中央集线器进行 RESTful 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:21:02.070

我在最近的一个项目中使用了特定模型进行设置，并将数据存储在外部 json 文件中。

**JSON：**

```
{
    "service-1": "http://url.to.service-1",
    "service-2": "http://url.to.service-2"
} 
```

**设置型号：**

```
var SettingsModel = Backbone.Model.extend({
    url: 'scripts/data/settings.json'
}); 
```

**用法：**

```
var settings = new SettingsModel();
settings.fetch({
    success: function() { 
        var model = new MyModel({ url: this.get('service-1') });
    }
}); 
```

# eclipse - Red5 和 Eclipse

> ID：15135285
> 
> 赞同：0
> 
> 时间：2013-02-28T12:13:02.667
> 
> 标签：eclipse, red5

我想设置 red5chatv2.1 但 Eclipse(juno) Java 编译器说错误。

导入`org.red5.server.api.ScopeUtils`无法解决！

我有red5 1.0.0，java 7.0

```
package chat;

import org.red5.server.adapter.ApplicationAdapter;
import org.red5.server.api.IConnection;
import org.red5.server.api.IClient;
import org.red5.server.api.scope.IScope;
import org.red5.server.api.Red5;
import org.red5.server.api.service.IServiceCapableConnection;
import org.red5.server.api.so.ISharedObject;
import org.red5.server.api.ScopeUtils;
import org.red5.server.api.so.ISharedObjectService;
import org.red5.server.api.*;
import org.red5.server.api.scheduling.*;
import org.red5.samples.components.ClientManager;
import org.red5.server.api.service.ServiceUtils;
import org.red5.server.api.service.*;
import org.red5.server.api.service.IPendingServiceCallback; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:10:29.090

Red5 可以作为独立服务器或战争部署安装。

过程是创建red5版本0.8（旧版本）的war部署。（冗长，请多多包涵）。

在 linux 上下载并安装 jdk1.6、glassfish2.1 和 netbeans 6.5。

下载“Red5War_0.8.0.war”。

我分享希望以下内容可以帮助社区按照 Netbeans 6.5 中使用的步骤在 glassfish2.1 上创建可部署的 war red5 版本 0.8：

第 1 步：解压缩 Red5War_0.8.0.war

第 2 步：在 Netbeans 中创建一个名为“red5”的 Web 项目

第三步：复制膨胀的war文件夹“/WEB-INF/classes”的内容，粘贴到Netbeans项目的“Source Packages”中。

第4步：右键单击“库”，添加“JAR/Folder”，导航到膨胀的war文件夹的“/WEB-INF/lib”，选择所有依赖jar，然后单击Netbeans项目的“打开”。

第 5 步：删除 Netbeans 项目的 WEB-INF（注意：忽略警告/错误）。

第6步：删除膨胀文件夹的META-INF。

第7步：将膨胀文件夹的剩余内容（“/WEB-INF/classes”和“/WEB-INF/lib”）复制到Netbeans项目的“Web Pages”中。

第八步：在防火墙中打开以下端口 TCP/843,TCP/1935,TCP/5229,TCP/5080

第 9 步：运行项目

第 10 步：在 Netbeans 项目文件夹 (../NetBeansProjects/red5/dist/) 中创建可部署的 war 文件“red.war”

当我遇到错误时，我请求您使用新版本的 netbeans、jdk 为新版本的 glassfish 服务器（3.x）创建新版本（1.0、1.0.1、1.02）战争部署。

阿鲁姆甘 AV

# facebook - http 和 https - 社交计数器是否将它们分开？

> ID：15135289
> 
> 赞同：0
> 
> 时间：2013-02-28T12:13:14.177
> 
> 标签：facebook, plugins, twitter, social, pinterest

谈论社交计数器（FB、Twitter、Pinterest、SU、LinkedIn）——它们是否分别计算 http 和 https 的点赞/分享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:46:02.770

`http`我知道 FB、Twitter和Linkedin .. 他们很重要`https`。没有单独的计数。我将 http 或 https 保留为`data-url`，这三个我得到相同的计数。

虽然我相信 google plus 分别计算它们，因为它为 http 和 https url 提供了不同的计数。

不知道 pinterest 和 SU。

# bash - Bash Ctrl-r 使用当前文本

> ID：15135292
> 
> 赞同：4
> 
> 时间：2013-02-28T12:13:17.290
> 
> 标签：bash

我在 bash 中经常使用 reverse-i-search。但是我总是在我意识到我需要搜索它之前输入我将要使用的命令的开头。

有没有办法让 Crtl+R 使用输入文本，这样我就不用再输入了？

编辑：输入文本是指我在按 Enter 之前输入到终端的文本。

一个例子：

```
~/some/folder/ cd some/subfolder/ 
```

我准备用cd进入一个子文件夹，在回车之前，我会输入“cd some/subfolder”，即输入文本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-03T15:01:20.613

您可以使用`CTRL`-`aryr`命令。

它看起来比实际更糟糕：对于半输入的复杂命令，它非常有帮助。

这是一个复合命令：

*   `CTRL`- `a`: 家
*   - `r`: 打开反向增量历史搜索并复制光标位置后的文本
*   - `y`：粘贴文本
*   - `r`: 寻找匹配的命令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:50:05.163

看来你不能这样做。那就是 CTRL-R 直接从键盘读取（至少在 Linux 上），所以你甚至不能粘贴到缓冲区中。

我可以推荐的最佳解决方案是您考虑使用[Emacs Shell 模式](http://emacswiki.org/emacs/ShellMode)，它将用 Emacs 缓冲区替换 Bash 的输入。

# c# - 只有在上次触发后经过一段时间后，处理事件的最简单方法是什么？

> ID：15135295
> 
> 赞同：2
> 
> 时间：2013-02-28T12:13:30.247
> 
> 标签：c#, .net, c#-4.0

我有事件处理程序：

```
 private void Control_Scroll(object sender, ScrollEventArgs e)
 {
     UpdateAnnotations();
 } 
```

现在我希望仅在用户停止滚动时才更新注释，例如自从上次滚动事件经过 100 毫秒后，然后执行操作，否则丢弃它，因为无论如何它都无关紧要。

什么是最简单/可重用的方法，最好是一些静态方法，如`public static void DelayedAction(Action action, TimeSpan delay)`.

使用 .NET 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:21:40.530

请参阅此对 Rx（反应式扩展）问题的[答案。](https://stackoverflow.com/a/3211545/83264)（您可以使用[Observable.FromEvent](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.fromevent(v=vs.103).aspx)从事件中创建可观察对象。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:22:13.430

我会选择这样的东西

```
class MyClass
{
   private System.Timers.Timer _ScrollTimer;
   public MyClass()
   {
       _ScrollTimer= new System.Timers.Timer(100);
       _ScrollTimer.Elapsed += new ElapsedEventHandler(ScrollTimerElapsed);
   }

   private void ResetTimer()
   {
        _ScrollTimer.Stop();
        _ScrollTimer.Start();
   }

   private void Control_Scroll(object sender, ScrollEventArgs e, TimeSpan delay)
    {
        ResetTimer();
    }    

    private void ScrollTimerElapsed(object sender, ElapsedEventArgs e)
    {
        _ScrollTimer.Stop();
        UpdateAnnotations();           
    }
} 
```

每次用户滚动时，计时器都会重置，并且只有在滚动停止 100 毫秒时才会触发 TimerElapsed 并且您可以更新注释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T12:36:47.640

我在表单上同时尝试了几个控件，并且它可以被外部重用。

```
private void vScrollBar1_Scroll(object sender, ScrollEventArgs e)
{
    if (DelayedAction(100, sender))
        UpdateAnnotations();
}

Dictionary<object, Timer> timers = new Dictionary<object, Timer>();
bool DelayedAction(int delay, object o)
{
    if (timers.ContainsKey(o))
        return false;

    var timer = new Timer();
    timer.Interval = delay;
    timer.Tick += (s, e) =>
        {
            timer.Stop();
            timer.Dispose();
            lock(timers)
                timers.Remove(o);
        };

    lock(timers)
        timers.Add(o, timer);

    timer.Start();
    return true;
} 
```

字典被锁定，因为如果用户不能同时点击两个控件，则可能会在删除另一个控件的同时插入一个计时器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T12:17:43.193

您能否存储事件触发的时间（DateTime.Now）以及何时调用它检查自上次以来的时间（例如 DateTime.Now - lastExecutionTime > minTime）

** 更新 **

或者基于您的静态助手想法的更通用的方式：

```
public static void DelayedAction(Action action, TimeSpan delay)
{
    var delayedActionTimer = new Timer(x => action(), null, delay, TimeSpan.FromMilliseconds(-1));
} 
```

显然需要工作......例如，您可以将计时器存储在一个字段中并在每次用户滚动时重置（更改）延迟

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T13:23:18.327

试试这个类：

```
public class ActionHelper
{
    private static Dictionary<Delegate, System.Threading.Timer> timers =
        new Dictionary<Delegate, System.Threading.Timer>();

    private static object lockObject = new object();

    public static void DelayAction(Action action, TimeSpan delay)
    {
        lock (lockObject)
        {
            System.Threading.Timer timer;
            if (!timers.TryGetValue(action, out timer))
            {
                timer = new System.Threading.Timer(EventTimerCallback, action,
                    System.Threading.Timeout.Infinite,
                    System.Threading.Timeout.Infinite);
                timers.Add(action, timer);
            }
            timer.Change(delay, TimeSpan.FromMilliseconds(-1));
        }
    }

    public static void EventTimerCallback(object state)
    {
        var action = (Action)state;
        lock (lockObject)
        {
            var timer = timers[action];
            timers.Remove(action);
            timer.Dispose();
        }
        action();
    }
} 
```

## 特征：

*   安全头
*   支持多个并发操作

## 用法：

```
private void Control_Scroll(object sender, ScrollEventArgs e)
{
    ActionHelper.DelayAction(UpdateAnnotations, TimeSpan.FromSeconds(1));
} 
```

请注意，该方法是在单独的线程中调用的。如果需要做UI工作，需要使用[`Control.Invoke`](http://msdn.microsoft.com/en-us/library/30s4t80c.aspx)（WinForms）或[`Dispatcher.Invoke`](http://msdn.microsoft.com/en-us/library/ms604732.aspx)（WPF）：

```
// The method is contained in a Form (winforms)
private void UpdateAnnotations()
{
    if (this.InvokeRequired)
        this.Invoke(new Action(UpdateAnnotations));
    else
    {
        MessageBox.Show("Method is called");
    }
} 
```

# django - Django，对来自 forms.py 的模型对象的引用

> ID：15135296
> 
> 赞同：0
> 
> 时间：2013-02-28T12:13:30.377
> 
> 标签：django, validation, django-models, django-forms

我想自定义验证一个`Page`对象。A`Project`有很多`Page`'s。要验证`Page`对象，我需要`Project`通过它的`pk`in获取对该对象的引用`Page`。

需要将`start_date`字段`Project`与`start_date`字段进行比较`Page`：

```
class PageForm(ModelForm):
    class Meta:
        model = Page

    def clean_start_date(self):
        # need to get "page.project.start_date" somehow. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:23:12.110

使用`instance`属性：

```
class PageForm(ModelForm):
    class Meta:
        model = Page

    def clean_start_date(self):
        project_start_date = self.instance.project.start_date 
```

# regex - 使用正则表达式获取特定 div 内的所有锚点

> ID：15135298
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:13:37.893
> 
> 标签：regex

我正在使用[80legs](http://80legs.com/)来抓取网络以获取某些信息。所需信息在 80legs 中使用正则表达式指定。例如，如果我只需要解析我的 url 列表中的图像，我指定`<img.*?>`.

现在，我还需要在具有类 "rellink relarticle mainarticle" 的 div 中抓取任何锚点。例如：

```
<div class="rellink relarticle mainarticle">Main articles: <a href="/wiki/Theophrastus"   title="Theophrastus">Theophrastus</a> and <a href="/wiki/Historia_Plantarum" title="Historia Plantarum">Historia Plantarum</a></div> 
```

我尝试添加

```
<div class="rellink relarticle mainarticle">.*?<a.*?> 
```

但这只会抓住 div 内的第一个锚点，即使有多个锚点也是如此。是否可以更改此代码以获取 div 内的所有锚点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:30:36.200

`<div class="rellink relarticle mainarticle">.*?<a.*?>`匹配 div 的开始标签，后跟任意数量的字符，后跟**一个**锚点。所以使用

```
<div class="rellink relarticle mainarticle">.*?(<a.*?>)+ 
```

反而。

# c# - 找不到名为 ' 的入口点 '在 DLL 中' '

> ID：15135309
> 
> 赞同：1
> 
> 时间：2013-02-28T12:14:22.867
> 
> 标签：c#, interop, pinvoke

我想从 C# 调用方法“Talk”。我浏览了其他相关帖子，但对我没有帮助。

> 托管程序.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Runtime.InteropServices;

namespace Managed
{
    class Program
    {
        [DllImport("Unmanaged.exe", CallingConvention=CallingConvention.Cdecl,EntryPoint="Talk",CharSet=CharSet.Ansi)]
        public static extern int Talk();
        static void Main(string[] args)
        {
            int value=Talk();
        }
    }
} 
```

> 非托管.h

```
#ifndef UNMANAGED_H
#define UNMANAGED_H
extern "C"
{
__declspec(dllexport) int Talk();
}
#endif 
```

> 非托管.cpp

```
#include "stdafx.h"
#include "conio.h"
#include "Unmanaged.h"

int Talk()
{
    int x=10,y=5;
    return (x+y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:24:11.270

您需要将库部署为`DLL`. `DllImport`仅适用于使用 P/Ivoke 的 .dll 库。

在 VS 中创建 DLL 时，选择 Win32 下的**Console Application**并将单选按钮设置为“Dynamic-Link-Library (DLL)”。

然后照你做的。有关一些信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms235636%28v=vs.100%29.aspx)。

# scala - 从 Catch 中返回值

> ID：15135310
> 
> 赞同：2
> 
> 时间：2013-02-28T12:14:22.983
> 
> 标签：scala, try-catch

我的应用程序从文件中读取一些配置值。如果过程中有任何错误，我想为这些配置参数设置默认值。我正在做的是：

```
val (param1, param2) = {
  try{
    val props = new java.util.Properties
    props.load(getClass.getResource("/myapp.properties").openStream)
    (
      props.getProperty("param1", "default1"),
      props.getProperty("param2", "default2")
    )
  }
  catch{
    case _ => ("default1", "default2")
  }
} 
```

我知道如果出现异常，我在 catch 块中所做的将无法按预期工作。有没有办法解决它？我正在使用 Scala 2.9

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:31:27.010

这将起作用，但它打开了运行时错误的可能性，因为

```
val (a,b) = whatever 
```

只要`whatever`是的超类型，就可以调用`Tuple2`-- 特别是，它可以是`AnyRef`or `Any`，如果您有足够不匹配的类型，这确实是 try/catch 返回值将扩大到的值。您可以通过添加类型归属来确保它是正确的类型：

```
val (a,b): (A, B) = whatever 
```

然后类型检查器将在整个 try/catch 过程中如果右侧不是正确的类型就会抱怨。

例如：

```
val (a,b): (String, String) = try {
  ("perch", if (scala.util.Random.nextBoolean) throw new Exception else "halibut")
} catch {
  case e: Exception => ("salmon", "herring")
} 
```

如果您在收到编译时错误`, "cod"`后尝试添加。`"herring"`如果重复输入此作业，则一半时间为 a=perch 和 b=halibut，另一半时间为 a=salmon 和 b=herring。

* * *

附录：在 2.9（或更低版本，我想，虽然我还没有检查过），你必须将类型属性放在 try/catch 语句中，如下所示：

```
val (a,b) = (try {
  ("perch", if (scala.util.Random.nextBoolean) throw new Exception else "halibut")
} catch {
  case e: Exception => ("salmon", "herring")
}): (String, String) 
```

获得捕获的类型检查。

# python - 在 python 脚本关闭时执行操作

> ID：15135311
> 
> 赞同：0
> 
> 时间：2013-02-28T12:14:25.380
> 
> 标签：python

我想知道是否可以在基本 python 脚本中的任何给定点执行操作，所以说它何时关闭。我有以下代码来查找素数（只是为了好玩）

```
number = 1
primelist = []
nonprime = []

while number < 1000:

    number += 1

    for i in range(number):
        if i != 1 and i != number and i !=0:
            if number%i == 0:
                nonprime.append(number)
            else:
                primelist.append(number)

nonprimes = open("nonprimes.txt", "w")

for nonprime in set(primelist) & set(nonprime):
    nonprimes.write(str(nonprime) + ", ")

nonprimes.close() 
```

所以基本上我想在脚本停止时运行最后一部分。如果这是不可能的，有没有办法说我在程序运行时按“空格”然后保存列表？

提前干杯:)

编辑：

我已按照建议修改了代码以包含 atexit 模块，但它似乎不起作用。这里是：

进口时间，atexit

```
class primes():

    def __init__(self):

        self.work(1)

    def work(self, number):

        number = 1
        self.primelist = []
        self.nonprime = []

        while number < 20:
            time.sleep(0.1)
            print "Done"

            number += 1

            for i in range(number):
                if i != 1 and i != number and i !=0:
                    if number%i == 0:
                        self.nonprime.append(number)
                    else:
                        self.primelist.append(number)

        nonprimes = open("nonprimes.txt", "w")

        for nonprime in set(self.primelist) & set(self.nonprime):
            nonprimes.write(str(nonprime) + ", ")

        nonprimes.close()

    def exiting(self, primelist, nonprimelist):
        primelist = self.primelist
        nonprimelist = self.nonprime

        nonprimes = open("nonprimes.txt", "w")

        for nonprime in set(self.primelist) & set(self.nonprime):
            nonprimes.write(str(nonprime) + ", ")

        nonprimes.close()

atexit.register(exiting)

if __name__ == "__main__":
    primes() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:36:29.427

Python 有一个 atexit 模块，允许您注册要在脚本退出时执行的代码：

```
import atexit, sys

def doSomethingAtExit():
    print "Doing something on exit"

atexit.register(doSomethingAtExit)

if __name__ == "__main__":
    sys.exit(1)
    print "This won't get called" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:19:05.133

虽然我很确定文件对象会在回收时进行清理并将内容刷新到文件中。解决这个问题的最好方法是使用 with 语句。

```
with open("nonprimes.txt", "w") as nonprimes:
    for nonprime in set(primelist) & set(nonprime):
        nonprimes.write(str(nonprime) + ", ") 
```

关闭文件等的样板代码在语句结束时自动执行。

# javascript - 变量作为循环中方法调用的元素

> ID：15135314
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:14:37.113
> 
> 标签：javascript

我正在尝试从 CKEDITOR 获取每个具有 id 更改（change1，change2，...）的 div 的内容

```
var data2= CKEDITOR.instances.change1.getData();
for (var i = 2; i <= 30; i++){
if (typeof([\"CKEDITOR.instances.change\"+i]) != 'undefined') {
    var edit = CKEDITOR.instances.change[i].getData();
    data2 = data2 + '</div><div class=\"d W1 h1\">' + edit;
}} 
```

我已经尝试过这样但收到错误：TypeError: CKEDITOR.instances.change is undefined at

```
var edit = CKEDITOR.instances.change[i].getData(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:21:05.280

不要使用 typeof('...') 因为它总是会返回该对象的类型，在你的情况下它是一个对象，然后 != from undefined...

试试这个： if (CKEDITOR.instances['change' + i]) { // 把你的代码放在这里 }

# ibm-mobilefirst - 有没有办法向“Worklight 设置”添加更多属性？

> ID：15135322
> 
> 赞同：-2
> 
> 时间：2013-02-28T12:14:49.613
> 
> 标签：ibm-mobilefirst

有没有办法向“Worklight 设置”添加更多属性？我想存储一些值，以便客户可以更改它，并且在代码中我们可以在客户端读取这些值。

或者是否有可能建立一个类似的用户界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:11:59.403

您应该自己编写 UI，在用户首选项中编写客户设置（请参阅`WL.Client.setUserPref`和`WL.Client.getUserInfo`其他 API 或使用 JSONStore 在本地存储中）。

# python - 选择和平均熊猫数据框中的值

> ID：15135323
> 
> 赞同：0
> 
> 时间：2013-02-28T12:14:55.710
> 
> 标签：python, dataframe, pandas, data-analysis

我是[熊猫](http://pandas.pydata.org/)数据分析库的新手。我需要完成的任务如下：

给定具有一组列的数据框（表）`C`，选择列子集中的值`A`相同的所有行，并将它们组合成单行，其中其他行的值`C \ A`是平均的。

（目标是测试程序的多次运行，并在参数相同的情况下平均运行时间等值。）

例如：

```
a       b       c       d
eggs    ham     1.0     0.0
eggs    ham     0.0     0.5
spam    eggs    0.0     1.0
spam    eggs    0.0     1.0 
```

应合并为：

```
a       b       c       d
eggs    ham     0.5     0.25
spam    eggs    0.0     1.0 
```

选择列时和`a`（`b`这意味着应该平均）。`c``d`

我有哪些选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:26:18.243

这就是 groupby 所做的

[http://pandas.pydata.org/pandas-docs/stable/groupby.html](http://pandas.pydata.org/pandas-docs/stable/groupby.html)

```
from StringIO import StringIO

txt = """a       b       c       d
eggs    ham     1.0     0.0
eggs    ham     0.0     0.5
spam    eggs    0.0     1.0
spam    eggs    0.0     1.0"""

df = pd.read_csv(StringIO(txt), sep="\\s+")
df.groupby(["a","b"], as_index=False).mean() 
```

# google-trends - 谷歌趋势：获取绝对值

> ID：15135334
> 
> 赞同：11
> 
> 时间：2013-02-28T12:15:19.527
> 
> 标签：google-trends

谷歌趋势[探索](http://www.google.com/trends/explore)返回上升主题的相对价值。以及每个类别中的热门查询。它们并不是很能说明问题，因为 +2,400% 可能发生在从 10 到 240 次查询上升的趋势中，而更重要的趋势则缺失，例如从 100K 上升到 200K 查询的趋势。这可能是一个很好的研究工具，但是如何从 Google 趋势中提取（重新计算等）这些项目的绝对查询数？它不在其基本界面中；只有找到一些提取方法并可能与其他来源混合。

PS：有 Google AdWords [Keyword Tool](https://adwords.google.com/o/Targeting/Explorer?__c=1000000000&__u=1000000000&__o=cues&ideaRequestType=KEYWORD_IDEAS)，它返回绝对值。尽管它的界面使用起来不太舒服。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-19T16:18:16.200

好吧，您可以通过提交成对的关键字并查看相对值来游戏系统，从而创建一个绝对规模。

例如，将 term1 与橙色进行比较，将橙色与桃子进行比较，将桃子与第 2 项进行比较。

获得数量级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-26T13:57:30.240

您可以在关键字工具中检查根关键字，在趋势中检查其他关键字与根关键字的比较情况，然后您可以即时估计它们的搜索量。

如果 Trends 有数字搜索值会很好，但我相信他们不提供它。

# javascript - 无法传递动态创建的图像 ID 并警告它

> ID：15135342
> 
> 赞同：0
> 
> 时间：2013-02-28T12:15:38.770
> 
> 标签：javascript, jquery

我在 Jquery 中动态创建图像并尝试向其添加控件当用户单击图像时，我想弹出带有图像 ID 的 alert()。但我无法成功在警报框中显示图像的 ID。请帮我在警报框中显示图像的 ID。

这是显示警报框的代码

```
function category_follow(search_txt) {
    alert(this.Attr('name'));
} 
```

这是我动态创建图像的代码

```
$.ajax({
url: 'HoverCard_WebService.aspx?q=' + encodeURIComponent(span_text),
type: 'GET',
dataType: 'json',

beforeSend: function () {
    $(".hovercard").prepend('<p class="loading-text">Yükleniyor...</p>');
},
success: function (data) {
    $(".hovercard").empty();
    $.each(data, function (index, value) {
        var search_txt = 'TestArif4';
        result += '<div><button class=\'takibe_al\' name=\'test_name\' id=\'btn_test_id\' onClick=category_follow(\'' + value.id + '\')><img id=\'img_category_follow\' src=\'images/hover_card_plus_icon.png\' class=\'hover_cursor_hand\' /></button></div>';
    });
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:29:35.977

你在用你的“结果”变量做什么？

```
function category_follow(search_txt) {
    alert(this.Attr('name'));
} 
```

`this`指 DOM 元素，如果您使用 jQuery ，“Attr”可能应该是“ [attr ”。](http://api.jquery.com/attr/)

我建议您使用 jQuery 来绑定您的事件，而不是使用元素属性`onClick`；

```
$(document).on('click', '.takibe_al', function(event) {
  var $this = $(this);
  alert('Clicked on element with name = ' + $this.attr('name'));
}); 
```

见上。[_](http://api.jquery.com/on/)

# unit-testing - 测试 - 生成不符合架构的 xml 文件

> ID：15135343
> 
> 赞同：2
> 
> 时间：2013-02-28T12:15:42.840
> 
> 标签：unit-testing, xsd, code-generation

出于测试目的，我想生成不符合现有模式的 xml 示例。我希望这些文件用于单元测试。

我认为他们会允许：

*   检测架构允许的结构，尽管作者并不打算这样做。
*   尽管作者希望启用它们，但模式拒绝检测结构。
*   如果将来要稍微修改架构，则需要测试样本。

我找到了有效样本的生成器，但并非相反......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:14:51.173

我不明白第一个要点。

但是您是否正在寻找将生成不符合架构的 xml 的 xml 生成器？我不认为你会找到一个。

只需生成好的 xml，然后将其破坏并保存并将其用作错误 xml 的示例。

# selenium-webdriver - reportTestCaseResult() 给出 testlink.api.java.client.TestLinkAPIException

> ID：15135345
> 
> 赞同：3
> 
> 时间：2013-02-28T12:15:44.837
> 
> 标签：selenium-webdriver, testlink

我正在尝试将 selenium 与 Testlink 测试管理工具集成，我已经使用 wampserver 在本地机器上成功安装了 testlink。请参考我在以下谷歌文档链接中编写的硒脚本：[https ://docs.google.com/document/d/1jyUBqJ9cx5496GiCTC5ktuXSXAYfhHmr7HLr6liTpbQ/edit](https://docs.google.com/document/d/1jyUBqJ9cx5496GiCTC5ktuXSXAYfhHmr7HLr6liTpbQ/edit)

当我使用 Testng 运行脚本时，出现以下异常：

```
[Fatal Error] :3:6: The processing instruction target matching "[xX][mM][lL]" is not allowed.
[Fatal Error] :3:6: The processing instruction target matching "[xX][mM][lL]" is not allowed.
[Fatal Error] :3:6: The processing instruction target matching "[xX][mM][lL]" is not allowed.
[Fatal Error] :3:6: The processing instruction target matching "[xX][mM][lL]" is not allowed.
FAILED: f
testlink.api.java.client.TestLinkAPIException: The call to the xml-rpc client failed.
    at testlink.api.java.client.TestLinkAPIClient.executeXmlRpcMethod(TestLinkAPIClient.java:1266)
    at testlink.api.java.client.TestLinkAPIClient.execXmlRpcMethodWithCache(TestLinkAPIClient.java:1195)
    at testlink.api.java.client.TestLinkAPIClient.getProjects(TestLinkAPIClient.java:726)
    at testlink.api.java.client.TestLinkAPIHelper.getProjectInfo(TestLinkAPIHelper.java:64)
    at testlink.api.java.client.TestLinkAPIHelper.getProjectID(TestLinkAPIHelper.java:48)
    at testlink.api.java.client.TestLinkAPIClient.reportTestCaseResult(TestLinkAPIClient.java:184)
    at Pack3.ResultTestlink.reportTestCaseResult1(ResultTestlink.java:11)
    at Pack3.TestlinkExcecution.f(TestlinkExcecution.java:62)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)
Caused by: org.apache.xmlrpc.client.XmlRpcClientException: Failed to parse servers response: The processing instruction target matching "[xX][mM][lL]" is not allowed.
    at org.apache.xmlrpc.client.XmlRpcStreamTransport.readResponse(XmlRpcStreamTransport.java:177)
    at org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:145)
    at org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:94)
    at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:44)
    at org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:53)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:166)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:157)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:146)
    at testlink.api.java.client.TestLinkAPIClient.executeXmlRpcMethod(TestLinkAPIClient.java:1232)
    ... 31 more
Caused by: org.xml.sax.SAXParseException; lineNumber: 3; columnNumber: 6; The processing instruction target matching "[xX][mM][lL]" is not allowed.
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.apache.xmlrpc.client.XmlRpcStreamTransport.readResponse(XmlRpcStreamTransport.java:175)
    ... 39 more 
```

请让我知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:34:52.060

`XML-RPC`通过编辑**config.inc**启用，位于 TestLink 根文件夹

```
$tlCfg->api->enabled = TRUE;
$g_attachments->order_by = " ORDER BY id ASC "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-29T10:29:53.813

以这种方式提供 URL 以避免 API 异常：
`String URL = "http://localhost/testlink/lib/api/xmlrpc/v1/xmlrpc.php";`

# c# - 在 WPF 桌面应用程序中为 ListView 创建样式

> ID：15135348
> 
> 赞同：0
> 
> 时间：2013-02-28T12:15:53.760
> 
> 标签：c#, .net, wpf, xaml

我有一些 Metro/win8 应用程序的样式：

```
 <Style TargetType="ListViewItem">
        <Setter Property="Background" >
            <Setter.Value>
                <SolidColorBrush Color="#FF171717" Opacity="0.70"/>
            </Setter.Value>
        </Setter>
        <Setter Property="BorderBrush" Value="#FFEAF32C" />
        <Setter Property="BorderThickness" Value="2, 0, 0, 0" />

        <Setter Property="Padding" Value="5" />
        <Setter Property="Opacity" Value="40" />
    </Style> 
```

但是现在我正在 wpf (.net 4.5) 中制作桌面应用程序，并且无法在 xaml 中将这样的样式应用于 ListView 控件。我们如何在 xaml 中为桌面 ListView 控件定义我们自己的自定义样式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:26:06.543

这是一个将样式放入 Windows 资源字典的示例。

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="ListViewItem">
            <Setter Property="Background" >
                <Setter.Value>
                    <SolidColorBrush Color="#FF171717" Opacity="0.70"/>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" Value="#FFEAF32C" />
            <Setter Property="BorderThickness" Value="2, 0, 0, 0" />

            <Setter Property="Padding" Value="5" />
            <Setter Property="Opacity" Value="40" />
        </Style>
    </Window.Resources>
    <Grid>
        <ScrollViewer HorizontalContentAlignment="Stretch" VerticalAlignment="Stretch">
            <ListView>
                <ListView.Items>
                    <Button>a</Button>
                    <Button>b</Button>
                    <Button>c</Button>
                    <Button>d</Button>
                    <Button>e</Button>
                </ListView.Items>
            </ListView>
        </ScrollViewer>
    </Grid>
</Window> 
```

如果您希望将样式放在它自己的文件中，那么您可以像这样引用该文件（我的资源文件只是调用 Dictionary1.xaml）

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Dictionary1.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <ScrollViewer HorizontalContentAlignment="Stretch" VerticalAlignment="Stretch">
            <ListView>
                <ListView.Items>
                    <Button>a</Button>
                    <Button>b</Button>
                    <Button>c</Button>
                    <Button>d</Button>
                    <Button>e</Button>
                </ListView.Items>
            </ListView>
        </ScrollViewer>
    </Grid>
</Window> 
```

# linux-device-driver - 面向命令的linux驱动程序

> ID：15135350
> 
> 赞同：1
> 
> 时间：2013-02-28T12:16:07.177
> 
> 标签：linux-device-driver

我怎样才能让我的驱动程序执行以下命令 cat & echo。

cat 是否调用设备驱动程序的 read() 系统调用？
echo call write() 设备驱动程序的系统调用吗？

我想为控制 8 个 LED 的驱动程序实现这两个命令 cat & echo。

如果我回显它会发出发光的 LED 3 :-----

```
echo "3=1" > /dev/led_node 
```

如果我 cat 它给出以下输出状态：-----

```
cat /dev/led_node
0 0
1 0
2 0
3 1
4 0
5 0
6 0
7 0 
```

请建议驱动程序的哪些部分或系统调用与 cat & echo 系统调用交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T18:18:29.360

您可以`cat`使用例如`strace`. 这是一个例子：

```
$ echo '123' >/tmp/test.txt
$ strace cat /tmp/test.txt 
```

在输出中，您可以发现`open()`调用：

```
open("/tmp/test.txt", O_RDONLY)         = 3 
```

它返回`3`- 与`/tmp/test.txt`. 进一步向下输出，您可以看到：

```
read(3, "123\n", 65536)                 = 4 
```

它获取文件描述符`3`并从中读取（使用`65536`字节缓冲区大小并取回 4 个字节）。基本上回答了你的第一个问题——`cat`确实打电话`read()`。您可以为它做同样的事情`echo`并找出它调用`write()`.

在您的字符设备驱动程序中，您必须实现这些调用。有关它如何与有用示例一起工作的很好解释，请查看[Linux 设备驱动程序，第 3 章](http://www.xml.com/ldd/chapter/book/ch03.html)。

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:19:24.633

**cat：**系统调用与驱动程序的读取功能交互。**echo：**系统调用与驱动程序的写入函数交互。事情是，如果你在 /dev/led_node 上运行，设备文件/节点被打开，即调用 open 系统调用，然后调用 read 系统调用，在读取中保持循环，除非返回**零**（没有要读取的数据）并且最后关闭系统call 被调用，它关闭设备节点/文件。

# wpf - ScrollViewer 中的用户控件在 WPF 中不滚动

> ID：15135354
> 
> 赞同：4
> 
> 时间：2013-02-28T12:16:17.427
> 
> 标签：wpf, xaml, user-controls, scrollviewer

我的主窗口中有以下代码（缩写）：

虽然我设置了滚动条可见性和`CanContentScroll`属性，但它不会滚动。我认为这与我的用户控制有关。

```
<Window>
   <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
       <TabControl  Grid.Column="0" Grid.Row="0"  HorizontalAlignment="Stretch" Margin="0" VerticalAlignment="Stretch" Height="Auto" Width="Auto">
          <TabItem Header="TEST">
            <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
            <my:MY_USER_CONTROL  x:Name="myUserControl"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  ScrollViewer.CanContentScroll="True" />
            </ScrollViewer>
        </TabItem>
      </TabControl>
      <Button Grid.Column="0"  Grid.Row="2" >a button</Button>
      <WrapPanel Grid.Column="0" Grid.Row="3" >
      </WrapPanel>
    </Grid>
  </Window> 
```

我的用户控件的缩写结构：

```
<UserControl>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="183*" />
            <ColumnDefinition Width="117*" />
        </Grid.ColumnDefinitions>
        <TreeView ItemsSource="{Binding Children}" Grid.ColumnSpan="2">
            <TreeView.ItemContainerStyle>
                <Style TargetType="{x:Type TreeViewItem}">

                    <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />

                    <Setter Property="FontWeight" Value="Normal" />
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="FontWeight" Value="Bold" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TreeView.ItemContainerStyle>

            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}" >
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.Children>
                            <TextBlock Background="LightGray"  Padding="2" Margin="2" Grid.Row="0" Grid.Column="0" Text="{Binding Name}" />
                            <TextBlock Padding="2" Margin="2" Grid.Row="0" Grid.Column="1" Text="{Binding Content}" />
                        </Grid.Children>
                    </Grid>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T13:07:34.750

你需要像这样设置它。我将 Row0 的 RowDefinition 更改为**Height="*"**所以它将使用尽可能多的空间。然后在 ScrollViewer 和 TabControl 之间更改位置。所以 TabControl 是 ScrollViewer 的一个内容。

```
<Window>
 <Grid>
  <Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="*" />
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
  </Grid.RowDefinitions>
  <Grid.ColumnDefinitions>
    <ColumnDefinition/>
  </Grid.ColumnDefinitions>
  <ScrollViewer HorizontalScrollBarVisibility="Auto"
              VerticalScrollBarVisibility="Auto"
              Grid.Column="0" Grid.Row="0"> 
   <TabControl  HorizontalAlignment="Stretch" Margin="0" VerticalAlignment="Stretch"
               Height="Auto" Width="Auto">
      <TabItem Header="TEST">
        <my:MY_USER_CONTROL x:Name="myUserControl"  
                            HorizontalAlignment="Stretch"              
                            VerticalAlignment="Stretch" 
                            ScrollViewer.CanContentScroll="True" />          
     </TabItem>
  </TabControl>
 </ScrollViewer>
 <Button Grid.Column="0"  Grid.Row="2" >a button</Button>
 <WrapPanel Grid.Column="0" Grid.Row="3" >
 </WrapPanel>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:38:09.860

当您将*CanContentScroll*设置为*True*时，ScrollViewer 假定您的内容实现了 IScrollInfo （我猜没有）。

尝试将ScrollViewer 上的*CanContentScroll*设置为 false，这允许内容使用尽可能多的空间，并且 ScrollViewer 负责滚动。

但是，根据控件的大小、视觉效果的数量等，这可能会成为性能问题（例如，当*CanContentScroll*设置为*False*时没有 UI 虚拟化）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:24:53.300

看起来您的滚动查看器中的内容与查看器的大小相同，因此没有可滚动的内容？

如果你做类似的事情

```
<ScrollViewer HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
    <Grid Background="Red">

    </Grid>
</ScrollViewer> 
```

然后网格与滚动查看器的大小相同，并且永远不允许滚动，如果您将网格的高度设置为超过查看器可以显示的高度，您将获得一个滚动条。

```
<ScrollViewer HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
    <Grid Background="Red" Height="500">

    </Grid>
</ScrollViewer> 
```

# javascript - 在 ExpressJS 中将 socket.io 实现为子模块的最佳方法是什么？

> ID：15135358
> 
> 赞同：1
> 
> 时间：2013-02-28T12:16:32.200
> 
> 标签：javascript, node.js, websocket, socket.io, express

我正在尝试使用 tjholowaychuk 建议的子模块架构构建基于 ExpressJs 的应用程序。

我还想有一些实时套接字交互，所以我正在尝试集成 socket.io。我正在努力寻找作为子应用程序执行此操作的最佳方法，并允许 Express 和 socket.io 一起收听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:40:32.327

您可以将所有`socket.io`相关代码放在一个单独的文件中：

```
// socketio.js
var sio = require('socket.io');
module.exports = function(server) {
  var io = sio.listen(server);
  io.sockets.on('connection', ...);
  return io;
};

// app.js
var app    = require('express')(), 
    server = require('http').createServer(app),
    io     = require('./socketio')(server); 
```

# java - 解决遗留 junit 测试套件中的 java 类路径地狱

> ID：15135363
> 
> 赞同：8
> 
> 时间：2013-02-28T12:16:36.827
> 
> 标签：java, junit, dependencies, classpath

假设我有一个包含以下测试的旧版 JUnit 测试套件：

```
public class AwesomeTest {
     public void testBusinessLogic() {
     ...
     [awesome mocking library]
     ...
     }
}

public class AmazingTest {
    public void testBusinessProcess() {
    ...
    [amazing xml operation]
    ...
    }
} 
```

现在假设 Awesome Mocking 库依赖于包含该类的 Awesome BCEL 字节码生成库，`org.useful.XMLClass`并且该库具有 XMLClass 的版本 1。

现在假设 Amazing Xml 操作依赖于包含该类的 Amazing Xml 库，`org.useful.XMLClass`并且该库具有 XML 类的版本 2。

还假设该类的第 2 版与第 1 版不向后兼容——因此哪个版本在类路径中具有更高的优先级——它会破坏另一个版本的依赖关系。

还假设有 400 个测试依赖于很棒的模拟库——所以重写不是一个理想的选择。

还假设一些关键的业务特性是用令人惊叹的 xml 库构建的——强烈建议不要重写它。

您如何解决这种类路径地狱的情况 - 除了使用两个手动排序的类路径和手动确定的测试子集两次运行 ant 测试（假设您使用 Ant 运行它们）之外？（我对自定义类加载器的想法持开放态度 - 但这似乎与具有 ant 解决方案的双自定义类路径的可维护性水平相同）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:48:00.913

我相信使用 java 代理和自定义类加载器可以实现非常透明的解决方案。思路如下：

1.  使用[Instrumentation Framework](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)（java 代理）在加载类时拦截它们。当您检测到 Awesome Mocking Library 中的类时，请将所有引用替换为`org.useful.XMLClass`对，例如`intercepted.org.useful.XMLClass`.
2.  创建一个自定义类加载器，在其中检查请求的类是否为`intercepted.org.useful.XMLClass`. 如果是，请加载`XMLClass`Mocking Library 使用的版本。默认情况下可以处理所有其他请求。

运行测试时使用自定义类加载器并附加 java 代理，一切都应该正确运行，就好像没有依赖冲突一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:19:02.177

我认为史蒂文的回答很棒——为了完整起见，因为这个问题得到了很多选票——我想分享我们想到的所有替代方案（包括坏的）

1.  将测试（或某些测试）划分为不同的类路径顺序（缺点 - 可能会导致您错过测试中的其他重要问题 - 这不是一个可行的选择）
2.  回滚惊人的 xml 操作并以另一种方式实现（考虑到使用 this 的投资，以及其他操作已用尽的事实 - 这被驳回了）
3.  使用新的模拟库重写测试（从长远来看这很好 - 在短期内这比我们当前的项目要大，因为有成百上千的项目）
4.  构建一个使用更新版本的令人惊叹的模拟库的定制版本`org.useful.XMLClass`（这比我们当前的项目更大）
5.  从源代码中提取有问题的类，并将旧版本放在覆盖源库的测试类路径中（结果证明这与其他几个类纠缠在一起 - 所以这很重要）
6.  使用上面史蒂文的绝妙想法 - 再次证明这不是微不足道的
7.  使用@Ignore 设置测试 - 并将它们放入队列中以便在未来的项目中重写。

# mysql - Redis v/s php mysql

> ID：15135364
> 
> 赞同：0
> 
> 时间：2013-02-28T12:16:42.260
> 
> 标签：mysql, nosql, redis

我是 redis 的新手，从以下链接开始
[http://www.aspieschool.com/wiki/index.php?title=Redis_vs_MySQL_(Benchmarks)](http://www.aspieschool.com/wiki/index.php?title=Redis_vs_MySQL_(Benchmarks))
这表明`My sql write`花费的时间比`redis write`redis 读取的时间短`mysql read`。但就我而言，情况正好相反。
我正在使用以下代码写入 mysql ：

```
<?php
$con=mysql_connect("localhost","root","");
if(!$con)
{
    die('unable to connect ');
}
mysql_select_db("redistest",$con);
for($i=0;$i<100000;$i++){
    $query = "insert into `test`(`name`) values ('Rohit')";
    mysql_query($query);
}
?> 
```

这大约需要 3 分钟，在 redis 中我使用的代码如下：

```
require 'predis-0.8/autoload.php';

$single_server = array(
    'host'     => '127.0.0.1',
    'port'     => 6379,
    'database' => 15
);

$multiple_servers = array(
    array(
       'host'     => '127.0.0.1',
       'port'     => 6379,
       'database' => 15,
       'alias'    => 'first',
    ),
    array(
       'host'     => '127.0.0.1',
       'port'     => 6380,
       'database' => 15,
       'alias'    => 'second',
    ),
);

// simple set and get scenario
$time_start = microtime(true);
$client = new Predis\Client($single_server);
$client->flushall();
for($i=0;$i<5000;$i++){
echo $client->lPush('key8', 'C');
echo "<br>";
}
//$retval = $client->get('rohit');
//$ass = array();
//$ass = $client->lrange('key8',0,-1);
//foreach($ass as $ass)
//echo "<br/>$ass";
$time_end = microtime(true);

$diff = $time_end - $time_start;
echo "<br/>".$diff;
//var_dump($retval); 
```

它大约需要 1.292163848877 秒：

从 mysql 读取：

```
<?php
$time_start = microtime(true);
$con=mysql_connect("localhost","root","");
if(!$con)
{
    die('unable to connect ');
}
mysql_select_db("redistest",$con);
$sql="select * from `test`";
$result = mysql_query($sql);
while($results = mysql_fetch_array($result))
{
    foreach($results as $results)
        $results."<br/>";
}
$time_end = microtime(true);

$diff = $time_end - $time_start;
echo "<br/>".$diff;
?> 
```

大约需要 0.040173053741455 秒

并使用 redis ：

```
$time_start = microtime(true);
$client = new Predis\Client($single_server);
//$client->flushall();
//for($i=0;$i<5000;$i++){
//echo $client->lPush('key8', 'C');
//echo "<br>";
//}
//$retval = $client->get('rohit');
$ass = array();
$ass = $client->lrange('key8',0,-1);
foreach($ass as $ass)
//echo "<br/>$ass";
$time_end = microtime(true);

$diff = $time_end - $time_start;
echo "<br/>".$diff; 
```

大约需要 0.13404297828674 秒。谁能建议我哪里出错了，？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:52:08.650

**TL;DR：**这个基准不值得一看。没有考虑这么多变量（网络延迟，针对非本地扩展的本地扩展，ACID ...），并且将 MySQL 与 Redis 进行比较没有任何意义。

* * *

首先，我怀疑您的 MySQL 数据库是 InnoDB 数据库，这就是插入需要这么多时间的原因。

你的结果对我来说比基准更正确。Redis 是一个内存数据库（具有可选的持久性），它的写入操作应该总是比 MySQL 等 ACID 数据库更快。太糟糕了，我找不到使用的 Redis 和 MySQL 版本。

MySQL 比 PHP 中的 Redis 更快的另一种解释是 PHP 的 MySQL 驱动程序是本机驱动程序，而 Predis 是用纯 PHP 编写的。但这仍然很奇怪，因为我从未听说有人抱怨 Predis 速度慢。

简而言之，不要[在*高流量的*生产站点](http://www.quora.com/Redis/How-does-PRedis-compare-with-phpredis)中使用[predis](https://github.com/nrk/phpiredis)，而是使用 PhpIRedis。

* * *

全面披露：我是**[Redis 的 GUI 客户端：Redsmin](http://redsmin.com)**的创始人。

# actionscript-3 - 在 flex/AS3.0 中使用调度事件、状态和标题窗口创建自定义对话框

> ID：15135368
> 
> 赞同：0
> 
> 时间：2013-02-28T12:16:52.720
> 
> 标签：actionscript-3, apache-flex, flex3

一个月以来，我一直致力于创建一个自定义对话框，具有消息、状态和模态（true/false）等参数

例如：

```
showAlert("Hi, how are you doing","Goodmorning", true); 
```

我已经学会了如何调度事件。但无法使用状态调度 alertevent/popupManager。下面是代码，我正在努力。

主.mxml

```
<?xml version="1.0" encoding="utf-8"?>
 <mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
 <mx:Script>
<![CDATA[

    public function onclick(event:MouseEvent):void
    {
    this.dispatchEvent("Hi, How are you?", "Morning", true);
    }
     public function dispatchEvent(arg1:String, arg2:String, arg3:Boolean):void
    {
        var str:*=null;
        str.message = arg1;
        str.stateName = arg2;
        str.modal = arg3;
        this.dispatchEvent(new ShowAlert(ShowAlert.SHOW, true));
    }

]]>
  </mx:Script>  
  <mx:Button id="click" click="onclick(event)"/>
  </mx:Application> 
```

ShowAlert.as

```
package 
{
import flash.events.*;

public class ShowAlert extends Event
{

    public var _stateName:String;

    public var _closable:Boolean;

    public var _message:String;

    public var _isModal:Boolean;
    public static const SHOW:String="show";

    public function flash.events.(arg1:String, arg2:Boolean=false, arg3:Boolean=false)
    {
        super(arg1, arg2, arg3);
        trace("arg1: "+arg1+"\t arg2: "+arg2+"\t arg3: "+arg3);

    }

    public function set message(arg1:String):void
    {
        this._message = arg1;

    }

    public function get message():String
    {
        return _message;
    }

    public function get modal():Boolean
    {
        return _isModal;
    }

    public function get stateName():String
    {
        return _stateName;
    }

    public function set stateName(arg1:String):void
    {
        this._stateName = arg1;

    }

          public function set modal(arg1:Boolean):void
    {
        this._isModal = arg1;

    }

    public override function clone():flash.events.Event
    {
        return new ShowAlert(type);
    }

 }
 } 
```

我无法使用状态编写自定义标题窗口，所以我尽力发布。

## 请让我知道，如何做到这一点。

下面是示例代码，指定我的问题

主.mxml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
 <mx:Script>
<![CDATA[
import mx.controls.Alert;
public var info:IModuleInfo;
public var loadalert:DisplayObject;
import mx.modules.ModuleManager;
    import mx.modules.IModuleInfo;
    import mx.events.ModuleEvent;
    public function init():void
    {
        Alert.show("This is forst alert.");

    }
    public function Loadalerrt():void
    {
        trace("loadalertmodule");
        info = ModuleManager.getModule("../bin-debug/alerrtmod.swf");
        info.addEventListener(ModuleEvent.READY, modEventHandler); 
        info.load();

    }
    public function modEventHandler(event:ModuleEvent):void
    {
        trace("modeventHandler");
    loadalert=info.factory.create() as DisplayObject;
    can1.addChild(loadalert);

    }
]]>
 </mx:Script>
<mx:Button label="Alert in Application" id="b1" click="init()" x="29" y="21"/>
<mx:Button label="Load Module" id="b2" click="Loadalerrt();" x="10" y="92"/>
<mx:Canvas id="can1"  x="409" y="57" backgroundColor="cyan"/>
</mx:Application> 
```

alerttmod.mxml

```
 <?xml version="1.0" encoding="utf-8"?>
<mx:Module xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="400"   height="300">
<mx:Script>
<![CDATA[
import mx.controls.Alert;
    public function alertshow():void
    {
        Alert.show("This is second alert, You Can see it covers whole   application, What I want is its scope should be limited to this specific module, not to whole application ");
    }
]]>
</mx:Script>
<mx:Button label="Alert in Module" id="b1" click="alertshow()" x="163" y="100"/>
</mx:Module> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:06:13.573

现在我看到了你的问题。我认为不可能限制警报的模态区域。我可以建议您通过在显示对话框时禁用模块元素来伪造模态行为。

也许它可以帮助你...

这里有两个组件来演示它：

//你的模块有另一个警报

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Module xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="400"   height="300">
<mx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.managers.PopUpManager;

        public function alertshow():void
        {
            Alert.show("This is second alert...");
        }

        public function alertshow2():void
        {
            var customAlert:CustomAlert = new CustomAlert();
            customAlert.addEventListener("CLOSED", onCustomAlertClosed);
            this.enabled = false;

            PopUpManager.addPopUp(customAlert, this, false);
            PopUpManager.centerPopUp(customAlert);
        }

        private function onCustomAlertClosed(evt:Event):void
        {
            this.enabled = true;
        }
    ]]>
</mx:Script>
<mx:Button label="Alert in Module" id="b1" click="alertshow()" x="163" y="100"/>

<mx:Button label="CustomAlert in Module" id="b2" click="alertshow2()" x="163" y="150"/>

<mx:Canvas width="100%" height="100%" backgroundColor="0xbbbbbb" alpha="0.8" visible="{!this.enabled}"/>

</mx:Module> 
```

//简单的CustomAlert作为面板

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Panel xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="300" height="200">
<mx:Script>
    <![CDATA[
        import mx.managers.PopUpManager;

        protected function button1_clickHandler(event:MouseEvent):void
        {
            PopUpManager.removePopUp(this);
            this.dispatchEvent(new Event("CLOSED"));
        }
    ]]>
</mx:Script>
<mx:Button x="112" y="128" label="Close" click="button1_clickHandler(event)"/>
</mx:Panel> 
```

# android - Android - Strings.xml 与文本文件。哪个更快？

> ID：15135371
> 
> 赞同：0
> 
> 时间：2013-02-28T12:16:58.847
> 
> 标签：android, text-files, arrays, notepad

我有一个字典数据库，它总共包含 99,833 个单词，但每个字母分开。我正在测试包含 3922 个单词的 dictionaryA.txt。

情况1：

当我输入一个我想查找的单词时，让我们说“算盘”，使用缓冲阅读器，我的应用程序说“论文没有响应。等待 - 退出”。如果我选择等待，它将返回单词 abacus 及其定义。

代码：

```
InputStream inputStream = getResources().openRawResource(R.raw.definitiona); 
                    try {
                        BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));
                        String s = in.readLine();
                        String delimiter = " - ";
                        String del[];
                        while(s != null)
                        {
                            s = in.readLine().replaceAll("\\s+", " ");
                            del = s.split(delimiter);
                            if (enhancedStem.equals(del[0]))
                            {
                                in.close();
                                databaseOutput.setText(s);
                                break;
                            }                        
                        }
                        in.close();
                        }
                    catch (FileNotFoundException e) {
                        databaseOutput.setText("" + e);
                    }
                    catch (IOException e1) {
                        databaseOutput.setText("" + e1);
                    } 
```

案例二：

当我输入一个我想查找的单词时，让我们说“算盘”，使用 strings.xml（我将整个 3922 个单词转移到一个字符串数组中），它说的也是一样的。我必须在它响应之前单击等待。

代码：

```
String[] wordA = getResources().getStringArray(R.array.DictionaryA);
                String delimiter = " - ";
                String[] del;
                for (int wordActr = 0; wordActr <= wordA.length - 1; wordActr++)
                {
                    String wordString = wordA[wordActr].toString();
                    del = wordString.split(delimiter);

                    if (enhancedStem.equals(del[0]))
                    {
                        databaseOutput.setText(wordA[wordActr]);
                        break;
                    }
                    else
                        databaseOutput.setText("Word not found!");

                } 
```

你能告诉我哪个更好吗？我应该继续使用我的文本文件吗？或者将它们转移到strings.xml，因为它们都响应缓慢？您知道如何消除“无响应”问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:23:13.047

与文本文件相比，使用 Xml 的主要优点是

1.  如果具有明确定义的结构，那么解析它是一件容易的事。
2.  您还可以为 xml 定义模式，这样您就可以很容易地遍历 xml，并且它变得类型安全。
3.  更好的性能。
4.  更可靠。

所以最好使用xml ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:21:09.507

如果你显示一些代码，这会更容易。我的第一个猜测是，由于您的 UI 没有响应，因此您正在 UI 线程上执行“搜索任务”。在 UI 线程上执行繁重的任务通常不是一个好主意，相反，您应该查看 AsyncTasks、Threads 或其他任何最适合的东西。通过在后台执行任务，用户仍然可以与您的应用程序交互 - 例如，如果他在搜索中出现拼写错误或根本不再关心，则停止搜索任务。在搜索完成并获取结果之前，您可以简单地显示某种等待对话框。

我不知道你的两个建议中哪一个更快。您可以创建两个线程，都以一种方式进行并测量时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:20:44.003

您遇到等待消息是因为您在主线程中执行了繁重的操作。您可以使用[Threads](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask消除等待消息](http://developer.android.com/reference/android/os/AsyncTask.html)

Google 建议将 strings.xml 用于与您类似的用例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:22:12.180

99,833 个字可以存储在不到 2 MB 的空间中

在那种情况下，最快的就是保存在内存中，所以情况 3 :)

# class - Excel VBA：从字典中提取自定义类

> ID：15135379
> 
> 赞同：3
> 
> 时间：2013-02-28T12:17:31.680
> 
> 标签：class, vba, object, dictionary, casting

我在使用 VBA Excel 2010 时遇到问题。我创建了一个名为“Enclosure”的自定义类，创建了一个实例并将其添加到字典中。
然后我**可以**遍历这些键以确保它已被添加。
我在提取我的附件类时遇到了麻烦。这是我的提取子代码：

```
Sub AddEnclosureItem(sItemToAdd As String, ByRef rdEnclosures As Scripting.Dictionary, dDebug As Boolean)

Dim TempEnclosure As Enclosure ' hold enclosure we pull

TempEnclosure = rdEnclosures(1)

End Sub 
```

当我尝试编译时，我得到“对象变量或未设置块变量”

关于如何进行的任何想法？我在某处读过你可以声明一个字典，说明这些项目是某个对象的，但我无法让它在 2010 年工作。这就是我能猜到的。或者一种在外壳物品出现时铸造它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:49:16.770

将对象分配给变量时，必须使用`Set`关键字。`Set`与is相反`Let`，它用于将值（不是对象）分配给变量。该`Let`关键字是可选的，几乎没有人再使用它了。

之所以有一个`Set`and`Let`是因为大多数对象都有一个默认属性——这意味着如果你引用一个没有属性的选项，它将返回存储在默认属性中的值。该`Value`属性是常见的默认属性。这

```
x = Range("A1") 
```

和这个一样

```
x = Range("A1").Value 
```

和这个一样

```
Let x = Range("A1").Value 
```

任何都是可以接受的（尽管我更喜欢第二个）。`x`如果是 Double 或 String，那就太好了，但如果`x`是 Range 对象变量，则需要使用 Set

```
Set x = Range("A1") 
```

如果您省略`Set`关键字，VBA 会假定您想要`Let`并尝试将（默认）`Value`属性分配给`x`. 这给出了“对象变量或未设置块”错误，因为它试图将 Double 或 String 分配给 Range 对象变量。

您的自定义类模块可能没有默认值，因此这些都不重要。但确实如此。即使没有默认值，也必须使用 Set 来引用对象。

# visual-studio - PDB：什么是 C:\Windows\Symbols\dll 目录？

> ID：15135380
> 
> 赞同：1
> 
> 时间：2013-02-28T12:17:37.583
> 
> 标签：visual-studio, visual-c++, debug-symbols, pdb-files

我了解调试符号 (PDB)、[MS 符号服务器](http://support.microsoft.com/kb/311503/en-us)和符号缓存。

我没有得到的是哪些符号（由谁）进入`C:\Windows\Symbols\dll`目录。它似乎`C:\Windows\Symbols\dll`与 MSSS 缓存无关。

例如，我的这个目录的版本包含：

```
C:\Windows\Symbols\dll>dir

21.02.2013  16:47    <DIR>          .
21.02.2013  16:47    <DIR>          ..
18.02.2011  16:18         3.854.336 atl100.i386.pdb
18.02.2011  18:23        25.300.992 mfc100.i386.pdb
18.02.2011  18:22        28.938.240 mfc100d.i386.pdb
18.02.2011  18:23        25.473.024 mfc100u.i386.pdb
18.02.2011  18:23        29.241.344 mfc100ud.i386.pdb
18.02.2011  18:26         4.386.816 mfcm100.i386.pdb
18.02.2011  18:26         4.452.352 mfcm100d.i386.pdb
18.02.2011  18:26         4.403.200 mfcm100u.i386.pdb
18.02.2011  18:26         4.468.736 mfcm100ud.i386.pdb
18.02.2011  18:05            13.824 Microsoft.Workflow.ExpressionEvaluation.pdb
18.02.2011  16:18         3.755.008 msvcp100.i386.pdb
18.02.2011  16:18         4.377.600 msvcp100d.i386.pdb
18.02.2011  16:17         8.875.008 msvcr100.i386.pdb
18.02.2011  16:18         7.900.160 msvcr100d.i386.pdb
18.02.2011  18:26         1.699.840 vcomp100.i386.pdb
18.02.2011  18:26         1.798.144 vcomp100d.i386.pdb 
```

但是没有其他文件，虽然这台机器上同时安装了VS2005和VS2010。我一直认为文件是由 VS 放在那里的，但是由于`...80...`缺少版本（我在其他机器上都有），看来 VS2005 并没有把它们放在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:32:44.847

这些是帮助您逐步完成 MFC 代码的 pdb。这是由 VS 放在这里的，更具体地说是 VC++ 安装，它将成为您的 VS 安装的一部分。

# jquery - 整页叠加拖放jQuery

> ID：15135389
> 
> 赞同：4
> 
> 时间：2013-02-28T12:17:57.987
> 
> 标签：jquery, drag-and-drop, overlay

当有人进入带有文件的窗口时，我正在尝试添加整页覆盖。这是可行的，但是当我添加叠加层时，它会立即触发`'dragleave'`事件，因为叠加层会阻止拖动。这导致闪烁效果。

浏览器兼容性：
- Chrome 和 Safari 似乎有这个问题
- Firefox 在您保持光标不动时会出现这个问题，当您移动时：没问题。- IE9 似乎可以工作

我想和[imgur.com](http://www.imgur.com)上的一样。如果您将文件拖到他们的页面上，它会显示一个叠加层，而不会闪烁等。

**第一个解决方案**

```
$(window).bind('dragover', dragover);
$(window).bind('drop', drop);
$(window).bind('dragleave', dragleave); 
```

[jsFiddle 上的完整示例](http://jsfiddle.net/tdhulster/sQ6Es/)

**第二种解决方案**

我还尝试将 'dragleave' 事件设置为 '.overlay' 类，如您在此处看到的：

```
$('.overlay').bind('dragleave', dragleave); 
```

[jsFiddle 上的完整示例](http://jsfiddle.net/tdhulster/ksmhr/)

但是，如果您将鼠标悬停在 div 中的段落上，它也会发送一个“dragleave”事件。

有人知道如何防止这种情况吗？或者如何仅在您离开浏览器窗口时“拖动”？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-23T16:17:33.827

我在我的选择中遇到了一个更好的解决方案，不需要使用我不喜欢的超时。

如果您将叠加层设置为具有 CSS 属性

```
pointer-events:none 
```

显示时不会影响窗口上的拖动事件，您可以达到相同的效果

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T13:12:45.493

在隐藏上添加超时有助于防止闪烁！

```
function dragover(event) {
    clearTimeout(tid);
    event.stopPropagation();
    event.preventDefault();
    $('.overlay').show();
}

function dragleave(event) {
    tid = setTimeout(function(){
        event.stopPropagation();
        $('.overlay').hide();
    }, 300);
} 
```

我编辑了你的小提琴[http://jsfiddle.net/yApUZ/](http://jsfiddle.net/yApUZ/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T13:45:28.830

感谢 Nikolaj，我得到了正确的答案：

```
function dragover(event) {
 clearTimeout(tid);
 event.stopPropagation();
 event.preventDefault();
 $('.overlay').show();}

function dragleave(event) {
 tid = setTimeout(function(){
 event.stopPropagation();
 $('.overlay').hide();
}, 0);} 
```

将超时设置为 300，离开浏览器窗口时保持延迟，设置为 0 时：延迟和问题消失了。

我还使用了窗口上的绑定，因为在 Firefox 中，.overlay 类上的绑定似乎并非每次都有效。

```
$(window).bind('dragover', dragover);
$(window).bind('drop', drop);
$(window).bind('dragleave', dragleave); 
```

[“这是 Fiddle 中的完整工作示例”](http://jsfiddle.net/tdhulster/yApUZ/4/)

# php - 在 Twig 模板中包含控制器，而不是其他模板

> ID：15135390
> 
> 赞同：1
> 
> 时间：2013-02-28T12:17:59.220
> 
> 标签：php, templates, twig

据我了解，像 Twig 这样的模板引擎的主要设计思想是从视图中删除所有 PHP 代码，并让呈现视图的控制器设置该视图中所需的所有参数。

然而，想象一个视图由不同的“块”组成：页眉、页脚、购物车和产品列表。您可以让 order_controller.php 检查客户是否登录（因为如果没有，标题不包含“注销”链接），以及获取所有可用产品的列表（以显示它们在产品块），以及在 $_SESSION 中获取购物车的内容（以在购物车块中显示它们）。

然而，让 order_controller 只获取一件事可能更有趣：产品列表。然后，将由控制器呈现的视图将包含其他块（页眉、页脚和购物车）的不同包含，但它们不会包含它们的视图。它们将包括其他控制器（showheader_controller、showfooter_controller 和 showcart_controller），这些控制器反过来会渲染自己的单个块（showheader_controller 只会渲染标题视图等）。简而言之：您将包括在主视图中呈现视图的控制器。然后检查客户是否登录的逻辑将是 showheader_controller，原因很简单，标题视图是唯一需要知道这一点的视图。

这样，您可以拥有大量显示标题的控制器，但不是让每个控制器重复逻辑来检查客户是否登录，而是只将它放在一个地方（呈现标题视图）。如果有一个 Twig 函数可以在视图中的该位置包含任何外部源，那么问题将得到解决（因为我可以只包含其他控制器），但它只允许包含其他模板（不能在其中包含 PHP 逻辑，否则会有点失败）。

我现在解决这个问题的方法是让 order_controller 有这个逻辑：

*   获取产品列表
*   启动输出流的缓冲 (ob_start())
*   包括呈现标题的控制器 (showheader_controller)
*   将缓冲区的内容存储在变量 $headerView 中。
*   清理缓冲区
*   启动输出流的缓冲 (ob_start())
*   包括呈现购物车的控制器 (showcart_controller)
*   将缓冲区的内容存储在变量 $cartView 中。
*   清理缓冲区
*   冲洗并重复...

在视图中，我打印设置变量的内容：

```
{{ headerView | raw }} 
```

必须添加原始过滤器，因为 headerView 变量包含 html-tags。

它工作得很好，但并不完全“整洁”。

我的问题：是否有更好的方法来实现这一战略？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:48:00.243

首先，这可以通过更好地实现 MVC 分离来简化。控制器的工作几乎完全是对*事件*做出反应，并促使模型对这个事件做出适当的反应。与视图牵手不是控制器的工作，视图也不完全依赖于控制器。

模型是您的核心应用程序，对您的应用程序应该做的所有事情*进行建模。*视图的工作是可视化应用程序中正在发生的事情，为用户提供与之交互的东西。控制器只是用户和应用程序之间的一点粘合剂，让用户可以*控制*应用程序。

因此，控制器对诸如*“用户访问主页”*之类的事件做出反应，触发模型中的必要事件，这会导致视图更新以表示应用程序的新状态。视图可以做它需要做的任何事情。该视图不仅仅是一个 Twig 模板。视图可以与模型对话以获取更多信息。最后，需要向 Twig 模板发送必要数据的不是控制器，而是需要在渲染模板之前为模板设置必要数据的视图。控制器中的代码更少，视图中的代码更多。

如果你想让它更加模块化，你可以定义自定义的 Twig 标签或函数，它们可以从需要获取的任何地方获取必要的数据。例如：

```
<div class="head">{{ user_login_status() }}</div> 
```

`user_login_status`是一个 Twig 扩展函数，它可以与模型对话以获取显示状态所需的数据。

希望你能明白。

# android - 在android中更改列表视图子行的颜色

> ID：15135393
> 
> 赞同：0
> 
> 时间：2013-02-28T12:18:10.930
> 
> 标签：android, listview

我一直在尝试根据从我的数据库的解析字符串中满足的条件来更改列表视图中行的颜色。我无法理解如何实现这一目标。

我知道似乎有关于如何做到这一点的例子，但我真的很茫然。

我试过这个：

```
Calms info = new Calms(this);

info.open();
String data = info.getFlareData();
info.close();

String arr[] = data.split("..\n\n");
System.out.println(arr);

ListView listView = getListView();

System.out.println("$$$$$$$$$$$$$$$"+listView.getChildCount()+"$$$$$$$$$$$$$$");
setListAdapter(new ArrayAdapter<String>(this, R.layout.simple_list_item_1, arr));

//System.out.println("****************"+getListView().getChildCount()+"**************");

for(int i = 0; i < arr.length; i++){
    System.out.println("arr["+i+"] = " + arr[i].trim());

    if(arr[i].contains("High Severity"))
    {
        // String highArr = arr[i];
        listView.getChildAt(i).setBackgroundColor(Color.RED);
    }
    else if(arr[i].contains("Low Severity"))
    {
        listView.getChildAt(i).setBackgroundColor(Color.GREEN);
    }
    else if(arr[i].contains("Medium Severity"))
    {
        listView.getChildAt(i).setBackgroundColor(Color.rgb(255, 136, 0));
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:09:21.547

您需要扩展 ArrayAdapter。在方法：

```
public View getView(int position, View convertView, ViewGroup parent) 
```

您可以更改行的颜色。一些例子：

```
public class OneRecordAdapter extends ArrayAdapter<String> {

private ArrayList&lt;String&gt; arhmAllForList;
    private Context context;
public OneRecordCursorAdapter(Context context, ArrayList&lt;String&gt; hm) {
        super(context, R.layout.raw_checking_knowledge, hm);
        arhmAllForList = hm;
        this.context = context;
    }
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(
                R.layout.row, parent, false);
        ...
        if ( /*some condition*/ ) {
            rowView.setBackgroundColor(Color.RED);
        } else {
            rowView.setBackgroundColor(Color.GREEN);
        }
        ...
        return rowView;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:30:27.763

你应该`Adapter`为你的`ListView`. 在您的适配器中，您可以毫无问题地为每个项目设置背景颜色。

在 Web 上有几个编写自定义适配器的教程：

*   [http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)
*   [http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:53:01.753

试试这个：

```
ArrayAdapter<String> ad = new ArrayAdapter<String>(this, R.layout.simple_list_item_1, arr){
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {

                TextView tv =  (TextView) super.getView(position, convertView, parent);
                String str = tv.getText().toString();

                if(str.contains("High Severity"))
                {
                    // String highArr = arr[i];
                    tv.setBackgroundColor(Color.RED);
                }
                else if(str.contains("Low Severity"))
                {
                    tv.setBackgroundColor(Color.GREEN);
                }
                else if(str.contains("Medium Severity"))
                {
                    tv.setBackgroundColor(Color.rgb(255, 136, 0));
                }
                return tv;
            }
        };

        setListAdapter(ad); 
```

# sql - SQL 选择唯一字符

> ID：15135398
> 
> 赞同：1
> 
> 时间：2013-02-28T12:18:25.580
> 
> 标签：sql, select

在 sql 中，我想获取所有行，其中斜杠“/”作为字符只存在一次。

例如：

```
[table1]
id | path_name  |
 1 | "/abc/def/"|
 2 | "/abc"     |
 3 | "/a/b/cdfe"|
 4 | "/hello"   |

select * from table1 where path_name=.... ; 
```

所以在这个例子中，我只想有第二行和第四行......

我该如何形成这个声明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:21:45.087

```
where path_name like '%/%' and path_name not like '%/%/%' 
```

或者

```
where len(path_name) = len(replace(path_name,'/','')) + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:22:12.870

要查找正好有一个斜线的表达式：

```
where path_name like '%/%' and not path_name like '%/%/%' 
```

解释：第一个检查斜线是否至少出现一次。第二个检查它没有出现两次。

至少一次，但少于两次，就是一次。

如果你只想要那些以斜线开头的，你应该将第一个模式更改为`'/%'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:27:26.413

或将 / 替换为空后计算长度。
`WHERE ( LENGTH(col) - LENGTH(REPLACE(col, '/', '')) )=1`

（感谢[如何计算 SQL 列中的字符实例](https://stackoverflow.com/questions/1860457/how-to-count-instances-of-character-in-sql-column)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:23:46.727

```
select * from table1 where path_name not like '/%/%' and path_name not like '/%/'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-17T07:11:44.783

```
1.select * from Table1 where len(path_name)-len(replace(path_name,'/',''))= 1

2.select * from table1 where len(path_name)= len(replace(path_name,'/',''))+1

3.select * from table1 where path_name like '%/%' and path_name not like'%/%/%' 
```

# groovy - 从范围列表中删除重叠范围 Groovy

> ID：15135399
> 
> 赞同：3
> 
> 时间：2013-02-28T12:18:28.787
> 
> 标签：groovy, overlapping

我需要编写一个代码，其中我有一个 Groovy 中的范围列表。我需要从所有范围不重叠的列表中创建一个新列表。

例如，如果输入是： [13..15 , 14..16]

我应该能够创建一个包含 [13..16] 或 [13..14, 14..16] 的列表

我真的很感激任何帮助。我现在已经编写了以下代码，但它一点也不工作：

```
def removeOverlapInRanges(ranges)
{
    def cleanedRanges = []
    def overLapFound = false
    def rangeIsClean = true
    def test = "ranges"
    ranges.each 
    {
        range->

        def index = ranges.indexOf(range)
        while (index < ranges.size() -1)
        {
            if (ranges.get(index + 1).disjoint(range) == false)
            {
                overLapFound = true
                rangeIsClean = false
                def nextRange = ranges.get(index + 1)
                if (range.from > nextRange.from && range.to < nextRange.to)
                    cleanedRanges.add(range.from..range.to)
                else if (range.from < nextRange.from && range.to < nextRange.to)
                    cleanedRanges.add(range.from..nextRange.to)
                else if (range.from > nextRange.from && range.to > nextRange.to)
                    cleanedRanges.add(nextRange.from..range.to)
            }
            index = index + 1
        }
        if (rangeIsClean)
            cleanedRanges.add(range)

        rangeIsClean = true

        test = test + cleanedRanges
    }
    cleanedRanges.add(0, cleanedRanges.get(cleanedRanges.size()-1))
    cleanedRanges.remove(cleanedRanges.size() - 1)
    if (overLapFound)
        return removeOverlapInRanges(cleanedRanges)
    else
        return cleanedRanges
} 
```

我通过了 [12..13, 17..19, 18..22,17..19, 22..23,19..20 ]

作为回报，我得到 [12..13]

提前感谢您的任何输入！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:28:21.397

我懂了：

```
List<Range> simplify( List<Range> ranges ) {
  ranges.drop( 1 ).inject( ranges.take( 1 ) ) { r, curr ->
    // Find an overlapping range
    def ov = r.find { curr.from <= it.to && curr.to >= it.from }
    if( ov ) {
      ov.from = [ curr.from, ov.from ].min()
      ov.to   = [ curr.to, ov.to ].max()
      simplify( r )
    }
    else {
      r << curr
    }
  }
}

def ranges = [ 12..13, 17..19, 18..22, 17..19, 22..23, 19..20 ]
assert simplify( ranges ) == [ 12..13, 17..23 ]

ranges = [ -2..3, -5..-2 ]
assert simplify( ranges ) == [ -5..3 ]

ranges = [ 3..1, 1..5 ]
assert simplify( ranges ) == [ 5..1 ] // reversed as first range is reversed

ranges = [ 1..5, 3..1 ]
assert simplify( ranges ) == [ 1..5 ]

ranges = [ 1..5, 3..1, -1..-4 ]
assert simplify( ranges ) == [ 1..5, -1..-4 ]

ranges = [ 1..5, -6..-4, 3..1, -1..-4 ]
assert simplify( ranges ) == [ 1..5, -6..-1 ]

ranges = [ 1..3, 5..6, 3..5 ]
assert simplify( ranges ) == [ 1..6 ] 
```

虽然可能有边缘情况......所以我会做更多的测试......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:47:50.003

以下内容创建了您的唯一号码的简单列表：

```
def ranges =  [12..13, 17..19, 18..22,17..19, 22..23,19..20 ];
def range = ranges.flatten().unique().sort() 
```

这是一种稍微不同的方法，它产生了一些很好的辅助方法：

```
def parseToRangeString(range)
{
    String result = "";
    range.eachWithIndex{cur,i->
        def nex = range[i+1]
        def start = !result || result.endsWith(",")
        def cont = cur == nex?.minus(1)
        if (start && cont) //starting a new section and the next item continues this seq (starting a range = 1,10)
            result += "$cur-"
        else if (!cont && nex) //not continuing the seq and there are more nums to process (end with more = 6,8)
             result += "$cur,"
        else if (!cont && !nex) //not continuing the seq but there are no more nums to process (very end = 11)
            result += cur   
    }
    return result
}
def toRange(rangeStr)
{
    def ranges = rangeStr.split(",").collect{
        def range = it.split("-");
        new IntRange(range[0] as int, range[-1] as int)
    }
}
List.metaClass.toRangeString = {
    parseToRangeString(delegate)
}
List.metaClass.toRange = {
    def rangeStr = parseToRangeString(delegate)
    toRange(rangeStr)
}

def ranges =  [12..13, 17..19, 18..22,17..19, 22..23,19..20 ];
def list = ranges.flatten().unique().sort()
assert "12-13,17-23" == list.toRangeString()
assert [12..13,17..23] == list.toRange(); 
```

# regex - 正则表达式范围问题

> ID：15135401
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:18:30.293
> 
> 标签：regex

与正则表达式范围模式略有混淆，以匹配范围内的任何值`0.000000`（`1.000000`包括边界），例如：

```
0.000000 is valid
0.000001 is valid
0.999999 is valid
1.000000 is valid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:20:59.637

这将是必需的：

```
^(0\.\d{6}|1\.0{6})$ 
```

`^`并`$`匹配开始和结束

`0`匹配一个`0`

`\.`匹配一个`.`. `\`是为了逃避`.`in regex的特殊含义

`\d{6}`匹配 6 位数字

`1\.0{6}`火柴`1.000000`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:22:16.467

正则表达式不是检查数字范围的合适工具，但您的情况很简单

```
\b(?:1\.0{6}|0\.\d{6})\b 
```

[在 Regexr 上](http://regexr.com?33uq5)查看

如果完整的字符串只包含这些数字，您可以将单词边界更改为`\b`字符串的`^`开头和字符串`$`的结尾

```
^(?:1\.0{6}|0\.\d{6})$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:24:28.370

使用这个正则表达式`0\.\d{6}|1\.0{6}`

> 0\. 常量 0。
> 
> \d{6} 任意 6 位数字
> 
> | 或者
> 
> 1\. 常量 1。
> 
> 0{6} 常量 000000

如果您的范围不包含其他符号而只有这个数字，您可以使用锚点，正则表达式是`^0\.\d{6}|1\.0{6}$`

> ^ 字符串开头
> 
> $ 字符串结尾

# javascript - JavaScript '使用严格'; 内部函数

> ID：15135405
> 
> 赞同：6
> 
> 时间：2013-02-28T12:18:42.887
> 
> 标签：javascript, ecmascript-5, strict

**在Chrome Dev Console**中测试了一些 js 代码，我有点困惑。

我知道在**严格模式下**，当引用**这个**关键字时，不是对象的方法的函数应该接收**undefined**而不是全局对象。

```
function test(){
    "use strict";
    return this===undefined;}
test(); 
```

输出**false**。

```
"use strict";
function test(){
    return this===undefined;}
test(); 
```

还是**假**的。

```
(function test(){
    "use strict";
    return this===undefined;}()); 
```

输出**true**。

只是想澄清一下。ʕ •ᴥ•ʔ 我是 js 新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:38:40.933

您注意到的只是开发人员控制台工作方式的副作用。当您在此处输入代码时，实际上会发生这种情况（有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/3976785/790695)）：

```
eval.call(null, "with (window) { \
                     function test() { \
                         'use strict'; \
                         console.log(this); \
                     } test(); \
                 }"); 
```

这是对 的*间接*调用`eval`，这意味着它将始终在全局执行上下文中执行（在浏览器中，即`window`）。

实际上，该函数绑定到全局对象，因此`this`持有对全局对象的引用，就像您在网页中（而不是在控制台中）执行此操作一样：

```
function test(){
    "use strict";
    return this === undefined;
}

test(); // true
test.call(window); // false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:33:00.220

一切安好。如果您通过某个 HTML 页面（不是开发控制台）运行代码，结果会符合预期（总是`this===undefined`）。

此外在最新的 Firefox (Firebug) 中：

```
function test(){
    "use strict";
    return this===undefined;}
test(); 
>> true 
```

所以这似乎只是另一个 Chrome 的错误（功能？）。感觉它对通过开发控制台传递的代码的方法略有不同。

另请注意，顺序很重要：

```
<script>
    console.log( 'Me First!' );

    "use strict";

    function test(){
        console.log( this );
    }
    test();

</script>

>>> "Me First!"
>>> Window {top: Window, window: Window, location: Location, external: Object, chrome: Object…} 
```

但：

```
<script>
    "use strict";

    console.log( 'Me later!' );

    function test(){
        console.log( this );
    }
    test();

</script>

>>> undefined
>>> "Me later!" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:39:54.090

这是 Chromium 开发人员控制台中的一个错误，导致`this`仍然引用全局对象。`javascript:`与在地址栏和文档中指定的代码相同。

您可以这样测试（2 个控制台输入）：

```
var global = (function () { return this; }());

"use strict";
function test () { return this === global; }
test(); 
```

和（一个或多个控制台输入）

```
var script = document.createElement("script");
script.type = "text/javascript";
script.appendChild(document.createTextNode(
  'function test () { "use strict"; return this === undefined; }; console.log(test());'
));
document.body.appendChild(script); 
```

在 Chromium 版本 25.0.1364.97 Debian 7.0 (183676) 中测试。

# java - Spring中同一个jms容器中的多个OracleAQ侦听器？

> ID：15135410
> 
> 赞同：0
> 
> 时间：2013-02-28T12:19:06.847
> 
> 标签：java, spring, spring-integration, spring-jms, oracle-aq

是否可以在春季定义的 jms 容器中创建多个侦听器（针对不同的主题）？

假设以下配置...

```
<bean id="jmsContainer" class="{container class here}">
...
</bean> 
```

和

```
<bean id="messageListener" class="org.springframework.jms.listener.adapter.MessageListenerAdapter">
...
</bean> 
```

jmsContainer 中是否可以有多个 messageListener*？

如果是...这样做是好的模式还是使用尽可能多的容器作为您需要的侦听器更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:48:17.857

不; 每个侦听器都需要一个容器。即使为了方便而使用命名空间......

```
<jms:listener-container ...>
   <jms:listener .../>
   <jms:listener .../>
</jms:listener-container /> 
```

...您为每个侦听器获得一个单独的容器。命名空间只是为每个容器设置公共属性的一种便捷方式。

# android - 设计多级列表视图

> ID：15135414
> 
> 赞同：0
> 
> 时间：2013-02-28T12:19:25.487
> 
> 标签：android, android-layout, android-listview, android-listfragment

我想为多级列表视图制作一个通用解决方案。我有一个 8 列的数据行。

我的列表视图的第一级：当我单击一个列表项时应该只有三列，另一个列表视图应该出现（第二级）所有列。

这不应仅限于 2 个级别，可能有数百个。

我现在的解决方案是多次启动相同的活动并将列传递给新活动。对我来说，这似乎不是正确的方法。

这个解决方案的问题是，当我返回（操作栏 - 向上导航）时，会出现第一级而不是最后一个。

我想要多个级别，每个级别都有之前级别的更详细信息。当我向上或单击硬件返回按钮时，我想进入上一级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:21:58.337

对每个级别使用片段（检查 ListFragment），在向上/向下移动级别时，您只需用新片段替换旧片段，将旧片段添加到后台堆栈。

[http://developer.android.com/reference/android/app/ListFragment.html](http://developer.android.com/reference/android/app/ListFragment.html) [http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

# javascript - 密码的正则表达式帮助

> ID：15135417
> 
> 赞同：0
> 
> 时间：2013-02-28T12:19:32.270
> 
> 标签：javascript, regex, passwords

我想使用以下规则强制执行强密码：
- 一个小写字符
- 一个大写字符
- 一个数字
- 一个特殊字符

通过互联网搜索，我想出了这个：

`^(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$&*])(?=.*[1-9])[a-zA-Z1-9]{8,}$`

但它对 rubular.com 有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:22:03.137

尝试这个：

```
^(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$&*])(?=.*[0-9]).{8,}$ 
```

**解释：**

`(?=.*[a-z])`密码必须在某处包含小写字母。

`(?=.*[A-Z])`密码必须在某处包含一个大写字母。

`(?=.*[!@#$&*])`密码必须在某处包含一个符号。

`(?=.*[0-9])`密码必须在某处包含一个数字。

所有这些都是前瞻，这意味着每个测试都没有实际将其包含在匹配中或向前移动匹配位置。因此，在所有这些测试之后，就匹配而言，我们仍然处于字符串的开头。

`.{8,}`整个密码必须包含 8 个或更多字符。（`^`and`$`锚定到字符串的开头和结尾，因此它们确保匹配包含整个字符串）。

原来的问题是`[a-zA-Z1-9]{8,}`。这部分意味着整个密码必须由八个或更多的字母和数字组成。这与之前对出现特殊字符的要求相冲突。另外，原版没有把零算作一个数字，我觉得这很愚蠢。

# python - Tornadio2 + Socket.io 负载测试

> ID：15135420
> 
> 赞同：1
> 
> 时间：2013-02-28T12:19:46.813
> 
> 标签：python, websocket, redis, socket.io, tornado

我正在使用 redis、tornadio2 和 socket.io 构建一个实时应用程序。它在我的本地机器上运行良好，但在投入生产之前，我想做一些压力测试。这样我就可以知道一个tornadio2 websocket连接实例可以处理多少个客户端。

我在谷歌上搜索过，我还没有找到任何现成的工具来测试它。

我应该自己编写这个脚本还是我错过了一些东西，是否有用于此目的的工具？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T17:12:25.000

您可以使用我用来测试 node.js socket.io 服务器（和 SockJS 服务器）的基准测试工具。

TornadIO2 将比 sockjs-tornado 慢约 15-20%。

基准在这里： http: [//mrjoes.github.com/2011/12/15/sockjs-bench.html](http://mrjoes.github.com/2011/12/15/sockjs-bench.html)

工具在这里：[https ://github.com/mrjoes/sock-benchmarking](https://github.com/mrjoes/sock-benchmarking)

忘了提 - 它只检查 websocket 性能。如果您计划让大量用户使用轮询传输，那么最好也测试这些协议。

# ruby-on-rails - 使用 gherkin 编写功能的原因

> ID：15135422
> 
> 赞同：2
> 
> 时间：2013-02-28T12:19:52.077
> 
> 标签：ruby-on-rails, cucumber, integration-testing, bdd, gherkin

我将黄瓜与小黄瓜一起使用，因为它是 Rails 社区中集成测试的主流。但现在我怀疑它是否是灵丹妙药。

我看到了几种应该使用 Cucumber 的情况：

1.  有必要向没有任何编程知识的人展示功能。以客户为例。
2.  一个人想要即时创建文档并且不为此付费，就像黄瓜本身[在 Relish 的帮助下所做的那样](https://www.relishapp.com/cucumber/cucumber/docs/doc-strings)。这对于公共文档中需要的开源项目来说非常酷，但对于封闭的小型项目来说就不是那么酷了。

如果您是程序员并且只想通过集成测试覆盖您的产品，是否存在使用 cucumber 的其他原因？或者如果您想使用 BDD 但又不想用小黄瓜语言写一首关于您未来应用的诗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:08:16.533

我能想到的两个原因：

*   我觉得它很有用，即使是一个单独的项目，因为它可以帮助您从远处思考问题，而不必担心类名、语法、断言等。简单地写下您认为需要构建的内容的过程，用简单的语言，可能非常有用。

*   Cucumber 经常用于集成测试，所以如果你不使用它，你最好有一些替代品。单独的单元测试通常是不够的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:25:26.857

[这是使用 Gherkin](http://www.softwaretestingclub.com/forum/topics/to-gherkin-or-not-to-gherkin)的不错的技术讲座

也检查一下这个=> [要小黄瓜还是不要小黄瓜](http://www.softwaretestingclub.com/forum/topics/to-gherkin-or-not-to-gherkin)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T18:20:47.027

Cucumber 和 Gherkin 是测试和开发理念的旗杆。当您使用 Gherkin 编写场景时，这应该是一个信号，表明您已决定*软件*的功能（其行为）优先于*它*的功能。Gherkin 让您有机会完全从用户的角度描述您的测试，避免提及任何实现细节。

# ios - GCD dispatch_apply 共享只读资源减慢执行速度

> ID：15135423
> 
> 赞同：0
> 
> 时间：2013-02-28T12:19:52.510
> 
> 标签：ios, grand-central-dispatch, shared-memory, readonly

我正在尝试通过使用 Grand Central Dispatch 的 dispatch_apply 方法来并行执行多个独立任务来加速我的 iOS 应用程序。但是，这些任务共享一个只读资源（一个大的 uint8_t 数组），该资源通过只读的非原子对象属性进行访问。由于它是只读资源，因此不需要同步访问。然而，共享只读数组使执行变得非常缓慢。它甚至比所有任务的串行执行还要慢。但是，如果我为每个线程制作一个数组的本地副本，则任务执行得非常快。

我不明白为什么我必须为每个线程创建一个副本以在只读资源的情况下从 GCD 中受益。是否有任何自动内部同步会减慢执行时间，因为 GCD 不知道它是只读资源？是否可以在不为每个线程创建资源的本地副本的情况下以某种方式防止速度变慢？

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T14:21:16.923

您可能会看到处理器之间的缓存行争用。您没有展示您的使用方式，但您可以尝试按照手册页`dispatch_apply`中的说明实施跨步策略。`dispatch_apply`消除任何缓存行争用的关键是确保调度工作线程不会尝试访问共享数组中占用同一缓存行的元素。

如果数组是动态分配的，它将从一个适当对齐的地址开始，因此您可以简单地选择一个跨度宽度，它是缓存行大小的倍数。您可以放心地假设处理器的缓存线大小是 64 字节的小倍数，因此 128、256、512 或 1024 的步幅宽度是合理的。

# ios - 将新对象添加到视图时，IB 中的自动布局约束发生变化

> ID：15135426
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:20:14.287
> 
> 标签：ios, xcode

在我开始之前，我只想说我理解自动布局约束到我很乐意在 IB 和代码中使用它们来创建我想要的东西的程度。

我遇到的问题是，我觉得非常令人沮丧的是，在 IB 中，我设置了一个视图，其中包含一些标签、图像和按钮，这些标签、图像和按钮使用自动布局定位，就像我想要的那样，太好了。

然后我意识到我需要向视图添加一个标签......如果我将标签拖到该视图中，IB 将在该视图中自由添加和删除约束以适应这个新对象。然后我必须再次添加所有自定义约束并删除自动添加的约束。

我只是想知道我是否遗漏了什么。有没有办法在不破坏现有约束的情况下将新对象拖到视图中，或者这只是我们都必须处理的事情？

谢谢斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:07:10.257

很不幸的是，不行。IB 认为它通过设置约束来帮您一个忙。你必须按照你说的去做。是不是很郁闷！

# bash - 仅显示 grep 的第 n 个匹配项

> ID：15135430
> 
> 赞同：40
> 
> 时间：2013-02-28T12:20:24.287
> 
> 标签：bash, grep, pattern-matching, match

```
onefish
onechicken
twofish
twochicken
twocows
threechicken 
```

如果我想对包含“两个”的行进行 grep，但我只想要第二个匹配项。所以我想要结果“twochicken”。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-28T12:23:55.190

```
grep -m2 "two" in-file.txt | tail -n1 
```

在第二场比赛后停止，然后打印第二行。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-28T12:24:28.203

试试这个：

```
awk '/two/{i++}i==2' file 
```

使用您的数据：

```
kent$  echo "onefish
onechicken
twofish
twochicken
twocows
threechicken"|awk '/two/{i++}i==2'
twochicken 
```

**注意**：如果您的文件很大，请执行以下操作：

```
awk '/two/{i++}i==2{print; exit}' file 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-01-12T00:02:46.103

grep 和 sed 可用于过滤行号。

**测试文件**：

```
onefish
onechicken
twofish
twochicken
threechicken
twocows 
```

**获取所需的行：**

```
grep "two" testfile | sed -n 2p
prints "twochicken"

grep "two" testfile | sed -n 1p
prints "twofish" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T15:04:47.617

如果单词（此处为 word==two）在一行中重复多次，并且您想打印该行，请使用以下命令：

```
word=two
n=2
line=`grep -m$n $word -o -n MyFile | sed -n $n's/:.*//p'`
awk 'FNR=='$line'{print; exit}' MyFile 
```

例如对于以下输入：

```
onefish
onechicken
twotwofish
twochicken
twocows
threechicken 
```

它将打印`twotwofish`，而不是`twochicken`.

这可能不是 user1787038 想要的，但添加以回答我自己的评论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-24T20:36:54.440

应该注意的是，如果交换了`threechicken`和行，也就是：`twocows`

```
onefish
onechicken
twofish
twochicken
threechicken
twocows 
```

然后 Kent 的第一个响应 ( `awk '/two/{i++}i==2' file`) 将产生输出：

```
twochicken
threechicken 
```

因为它需要再次出现匹配来增加计数器。他最后的回应：`awk '/two/{i++}i==2{print; exit}' file`回避这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-20T15:55:00.197

要使用`grep`命令进行第 n_th 匹配，我们可以使用`head`和`tail`命令的组合，如下所示：

```
grep two file.txt | head -n1 | tail -1 
```

`n1`我们需要的第 n 个匹配在哪里。

# css - 容器 div 高度不缩放以匹配 IE 中子 SVG 的高度

> ID：15135432
> 
> 赞同：4
> 
> 时间：2013-02-28T12:20:28.013
> 
> 标签：css, internet-explorer, svg

我有一个容器 div，里面有一个 SVG：

```
<!DOCTYPE html>
<body>
    <div class="container">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50" height="200">
    <rect x="0" y="0" width="50" height="200" />
    </svg>
    </div>
</body> 
```

以及以下 CSS：

```
svg
{
    width: 100%;
    height: 100%;
}
div.container
{
    width: 100%;
    background-color: red;
} 
```

在 firefox、chrome 等中，容器 div 将匹配 svg 的高度。然而，这不是 IE 的情况（我在 IE9 中测试过）。从 svg 样式块中删除 width/height: 100% 将解决此问题，但是我需要这些样式来缩放我的 SVG（在本示例 jsfiddle 中，我在 SVG 元素中省略了 preserveAspectRatio）。

这是jsfiddle：http: [//jsfiddle.net/Cx5jR/](http://jsfiddle.net/Cx5jR/)

我在想我可以使用 zoom:1 来强制 IE 识别 div 元素上的 hasLayout ，但这不起作用。

有任何想法吗？

这是 IE9 中渲染外观的屏幕截图 - 请注意 div（红色背景）不会缩放到 SVG（黑色矩形）高度以下。

![IE9 错误 svg 缩放 bg](../Images/6863e5c32c4436e1594fa4112e57aa0d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T12:32:13.280

SVG 当前缺少`viewBox`一致的跨浏览器渲染所需的属性。缺少`viewBox`, 加上在 CSS 中将 SVG 的`width`and设置`height`为 100% 似乎是问题的根源。

这是一个在 Chrome 和 IE9 上具有一致渲染的 jsfiddle：http: [//jsfiddle.net/Cx5jR/3/](http://jsfiddle.net/Cx5jR/3/)。

将以下内容添加到`<svg>`标签中：（ `viewBox="0 0 50 200"` 起始 X 坐标，起始 Y，结束 X，结束 Y）

并在 CSS`height`中删除了。`width``<svg>`

# mysql - 回声后如何更新

> ID：15135433
> 
> 赞同：0
> 
> 时间：2013-02-28T12:20:34.220
> 
> 标签：mysql, checkbox, textbox, echo

我有一个简单的页面，用户可以在其中输入他们的信息以获取某种类型的请求，然后我有一个单独的页面来回显用户输入的信息。如何在回显信息的每一行中输入复选框和文本框？该复选框用于请求完成时以及输入谁完成请求的文本框，一切正常，但我想知道这是否可能？我真的只是想指出正确的方向，因为我似乎无法找到我正在寻找的东西。感谢任何帮助，感谢，我会添加我所拥有的。谢谢

```
mysql_select_db('mydb');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
die('Could not get data: ' . mysql_error());
}
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
{
echo "First Name:{$row['firstname']}  <br> ".
     "Last Name: {$row['lastname']} <br> ".
     "Model ID: {$row['modelid']} <br> ".
     "System: {$row['system']} <br> ".
     "Department:{$row['department']}  <br> ".
     "Shift: {$row['shift']} <br> ".
     "Comm: {$row['comm']} <br> ".
     "Other: {$row['other']} <br> ".
     "Comments: {$row['comments']} <br> ".
     "Timestamp: {$row['timestamp']} <br> ".
     "TickeID: {$row['TicketID']} <br> ".
     "-----------------------------------------------------------<br>";
} 
echo "Fetched data successfully\n";
mysql_close($conn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:30:38.290

“如何在回显信息的每一行中输入复选框和文本框？”

```
mysql_select_db('mydb');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
    die('Could not get data: ' . mysql_error());
}
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
{
    echo "First Name:{$row['firstname']}  <br> ".
    "Last Name: {$row['lastname']} <br> ".
    "Model ID: {$row['modelid']} <br> ".
    "System: {$row['system']} <br> ".
    "Department:{$row['department']}  <br> ".
    "Shift: {$row['shift']} <br> ".
    "Comm: {$row['comm']} <br> ".
    "Other: {$row['other']} <br> ".
    "Comments: {$row['comments']} <br> ".
    "Timestamp: {$row['timestamp']} <br> ".
    "TickeID: {$row['TicketID']} <br> ".
    "-----------------------------------------------------------<br>".
    "<form action='target.php' method='POST'>"
        "<input type='checkbox' id='1' value='Option 1'>Option 1<br />".
        "<input type='checkbox' id='2' value='Option 2'>Option 2".
        "<input type='text' id='textBox1' value='' />".
    "</form>";
} 
echo "Fetched data successfully\n";
mysql_close($conn); 
```

您应该养成将字符串绑定到变量并使用变量而不是普通字符串的习惯，这只是一种更好的做法。

# php - 如果我知道始发地和目的地邮政编码，如何获取 FedEx 区号？

> ID：15135435
> 
> 赞同：2
> 
> 时间：2013-02-28T12:20:40.723
> 
> 标签：php, fedex

任何人都可以告诉我如何从 php 代码中获取原始和目标邮政编码的区域，就像我们可以从这个[http://www.fedex.com/ratetools/RateToolsMain.do?method=SetupFindZones获取区域一样](http://www.fedex.com/ratetools/RateToolsMain.do?method=SetupFindZones)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:51:26.243

```
$orig_zip = '32819';
$dest_zip = '90210';

$request = 'http://www.fedex.com/ratetools/RateToolsMain.do?method=FindZones&origPostalCd=' 
    . $orig_zip . '&destCountryCd=us&destPostalCd=' . $dest_zip;

$data = file_get_contents($request);

preg_match_all('/>(\d+) </', $data, $match);

print_r($match[1]); 
```

输出：

```
Array
(
    [0] => 8 // Express Zone
    [1] => 8 // Ground Zone
) 
```

但是，您仍应使用 API 来检索此信息。显然他们提供了他们区域数据的下载，所以你应该能够将它插入到你的数据库中直接查找。参见： ftp: [//ftp.fedex.com/pub/us/rates/downloads/documents2/92600-92899.pdf](ftp://ftp.fedex.com/pub/us/rates/downloads/documents2/92600-92899.pdf)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T12:47:04.783

FedEx 为定价和其他信息提供网络服务。查看他们关于[Web 服务](http://www.fedex.com/us/web-services/index.html)和[FedEx 开发人员资源中心](http://www.fedex.com/us/developer/index.html)的页面。

# perl - Net::SSH::Perl 返回特定服务器的错误

> ID：15135437
> 
> 赞同：2
> 
> 时间：2013-02-28T12:20:47.640
> 
> 标签：perl, ssh

该脚本应该在我的服务器上运行并在客户服务器上远程（通过 ssh）执行命令。问题是我没有与客户服务器完全相同的平台来测试通过 ssh 的连接性。它可以在我的测试服务器上正常工作，但是在客户服务器前面工作时，它会以以下方式退出：

> “收到断开连接消息：没有分配 pty，在 /usr/cti/apps/CSPbase/Perl/lib/perl5/site_perl/5.8.8/Net/SSH/Perl/SSH2.pm 第 300 行使用 Telnet SSH 需要 pty”

在此服务器前面的命令行上执行 ssh 时，它的工作...

```
$ssh = Net::SSH::Perl->new($ip);
$ssh->login($remoteUser, $remotePass) ;
($stdout, $stderr, $exit) = $ssh->cmd($cmd); 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:45:38.420

也许在您的测试期间，您被直接使用，现在它正在从某种守护进程运行（因此没有找到 pty）。

也许某些 Perl 模块缺少/错误版本（Pty.pm）？

在两台机器上转储 @INC 并检查差异。

问候，

# php - Symfony2 资产未显示

> ID：15135439
> 
> 赞同：0
> 
> 时间：2013-02-28T12:20:56.997
> 
> 标签：php, symfony, assets

我正在研究 Symfony2。pq 有人知道我的网站没有正确使用资产吗？

`$ kernel = new AppKernel ('prod', false);` 当我将网站上传到 Web 服务器时，我正在处理 app.php，但我看到了资产。我试图这样做：

```
assets: installl - symlink web
assets: install web 
```

安装但还是一样。

我也尝试清除缓存但无法正常工作。

```
aradasymfony@ssh:~/www/pfc$ app/console assets:install web
Installing assets for Symfony\Bundle\FrameworkBundle into web/bundles/framework
Installing assets for mio\mioBundle into web/bundles/miomio
Installing assets for FOS\JsRoutingBundle into web/bundles/fosjsrouting
Installing assets for Acme\DemoBundle into web/bundles/acmedemo
Installing assets for Symfony\Bundle\WebProfilerBundle into web/bundles/webprofiler
Installing assets for Sensio\Bundle\DistributionBundle into web/bundles/sensiodistribution
paradasymfony@ssh:~/www/pfc$ app/console --env=prod cache:clear
Clearing the cache for the prod environment with debug true 
```

网站： http: [//paradasymfony.alwaysdata.net/pfc/web/login](http://paradasymfony.alwaysdata.net/pfc/web/login)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:23:40.280

部署后最常见的问题是您的`app/cache`和`app/logs`文件夹没有适当的权限。作为快速修复尝试将它们更改为`777`（或者如果它们都不存在则创建）。

有关正确的权限配置，请阅读[本章](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)（权限部分）。

如果它没有帮助 - 您可以读取`app/logs`文件夹或 Web 服务器日志中的日志并告诉我们什么是错误，或者您可以将`app_dev.php`文件公开并检查它给出的异常。

# spring - 无法使用 CATALINA_HOME/lib 文件夹中的 Spring 和 Spring Security jar

> ID：15135440
> 
> 赞同：1
> 
> 时间：2013-02-28T12:20:57.703
> 
> 标签：spring, maven, tomcat, jar, spring-security

我正在开发一个 java web 应用程序，它部署在`tomcat 7`. 我`Maven, Spring, spring security 3.0.5.RELEASE and JSF`在这个应用程序中使用。

我想将 spring 和 jsf jar 文件放入`CATALINA_HOME/lib`，因为我也在其他应用程序中使用它们。现在我的战争文件中有大部分这些罐子。

我为从战争文件中分离罐子所做的步骤如下：

1.  在中添加`<scope>provided</scope> tag`依赖项`pom.xml`
2.  将jar文件放入`CATALINA_HOME/lib`

当我为 JSF jar 执行这些步骤时，一切正常。 **但是当我对 spring 和 spring security jars 执行相同操作时，应用程序没有启动并抛出错误。**

例如：如果我将`<scope>provided</scope>`标签添加到以下依赖项，我的应用程序将停止工作并引发`Caused by: java.lang.ClassNotFoundException: org.springframework.core.io.Resource`异常：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>${spring.version}</version>
</dependency> 
```

请在此处查看完整的**堆栈跟踪**，并在[此处](http://jsfiddle.net/PNV5f/)[查看](http://jsfiddle.net/mBTdZ/)**pom.xml**

如何使我的 webapp 与 CATALINA_HOME/lib 中的 spring jars 位置一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:29:09.397

将应用程序 jar 放在您的 tomcat lib 目录中通常是个坏主意。将它们全部保留在您的战争中，以便它们仅限于该应用程序。如果你搜索，你会发现这个异常重复了很多次。

人们犯的另一个常见错误（并且不明显）是，从 JVM 的角度来看，类*的标识既是类名，又是加载它的类加载器的标识*。因此，如果两个类加载器加载同一个类，则不能将一个的实例强制转换为另一个。

类加载器经常令人困惑，你最好坚持人们使用的标准方法。将所有应用程序 jar 放入您的应用程序中，`WEB-INF/lib`以便它们与其他应用程序隔离，并确保您在公共 lib 目录中没有任何重复的 jars。还要检查您的应用程序以确保您只有一个版本的每个 jar。

您通常需要`provided`在 Web 应用程序中标记为的唯一东西是`servlet-api`jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:20:59.563

您遇到了类加载器问题。

您的某些类需要使用另一个类加载器加载的其他类。

有关详细信息，请参阅[http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)。

尝试将 Spring 排除在您的战争之外（分享它，或最小化战争的规模）似乎是个好主意，但它会导致麻烦。

即使你设法让它工作，你最终也会把日志 API 弄得一团糟......

# javascript - 在淘汰赛中预选下拉列表项

> ID：15135447
> 
> 赞同：1
> 
> 时间：2013-02-28T12:21:14.727
> 
> 标签：javascript, html, knockout.js, knockout-mapping-plugin

我正在尝试通过下拉列表更新对象上预先存在的属性。该解决方案使用了 knockout 和 ko.mapping 框架来获取其数据。我遇到的问题是在列表中选择现有对象已经设置的项目。

例如：如果下拉列表包含 2 个选项，假设第一个男性和第二个女性，并且它所代表的属性已经设置为女性，我希望下拉列表选择女性。但下拉列表默认为列表中的第一项（男性）并将基础对象更新为男性。

我已经完成了上面的一个简单示例，我已经模拟了数据以匹配我正在处理的内容，即来自服务器的 json 使用 ko.mapping 框架进行映射。

**视图模型**

```
var listItems = '[{"id": "1","name": "male"},{"id": "2","name": "female"}]';
var savedRecord = '{"gender": {"id": "2","name": "female"}}';

ViewModel = function () {
    mappedListItems = ko.mapping.fromJSON(listItems);
    mappedSavedRecord = ko.mapping.fromJSON(savedRecord);
}

ko.applyBindings(new ViewModel()); 
```

**html**

```
<select data-bind="options: mappedListItems, 
               optionsText: 'name',                    
               value: mappedSavedRecord.gender"></select>
<p>mappedSavedRecord.gender.name = <span data-bind="text: mappedSavedRecord.gender.name"></span> 
```

**提琴手**

[http://jsfiddle.net/tgriley1/tLHhE/](http://jsfiddle.net/tgriley1/tLHhE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:34:35.323

您没有告诉 Knockout 将哪个字段用于下拉列表中的 value 属性，也没有告诉它保存记录中的哪个字段用于预选选项：

```
<select data-bind="options: mappedListItems, 
                   optionsText: 'name',
                   optionsValue: 'id',                                      
                   value: mappedSavedRecord.gender.id"></select> 
```

# jsf-2 - oracle weblogic 10.3 无法识别代码

> ID：15135455
> 
> 赞同：0
> 
> 时间：2013-02-28T12:21:26.827
> 
> 标签：jsf-2, weblogic-10.x

我是 JSF 2.1 的新手，我在 oracle weblogic 10.3 中导入了一个基于 JSF 2.1 构建的项目。我已经删除了所有错误并且构建成功，但是代码在这个工具中没有得到识别。

我想知道是否需要任何**JAR**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:11:40.080

JSF 2.1 需要 Servlet 3.0，而 WebLogic 10.3 支持 Servlet 2.5。您可能还会遇到 JPA 版本的问题，具体取决于您的项目配置。查看您的托管服务器日志，看看是否是这种情况。另外，请参阅此相关问题：[将 JSF 2.1 应用程序从 Glassfish 3 迁移到 Weblogic 10.x 或 11](https://stackoverflow.com/q/8397767/347777)

# maven - 阴影 .jar 已安装

> ID：15135473
> 
> 赞同：1
> 
> 时间：2013-02-28T12:22:19.137
> 
> 标签：maven, maven-plugin, maven-shade-plugin

在 maven 中安装时有什么方法可以禁用阴影 jar 的创建？

我试过了

```
<shadedArtifactAttached>false</shadedArtifactAttached> 
```

但它仍然存在。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:57:11.050

除了编写自己的插件以将工件与项目分离之外，我想不出办法来做到这一点。

应该有一种方法可以将工件从构建中分离出来，但这肯定会涉及黑客攻击......

也许您应该尝试将工件输出到不同的目录`${project.build.directory}`，而不是使用`<outputDirectory>${project.build.directory}/shaded-jar</outputDirectory>`，或类似的东西。如果这不这样做并且 Maven 仍然安装和部署它，那么您可以调用`maven-antrun-plugin`并将工件从`${project.build.directory}`目录移动到`${project.build.directory}/shaded-jar`，或其他东西。

# javascript - 显示 UL 中的所有 LI，而不是仅显示单击的 LI。

> ID：15135475
> 
> 赞同：2
> 
> 时间：2013-02-28T12:22:25.713
> 
> 标签：javascript, jquery, html, css

我对 javascript / jquery 很陌生 - 我在嵌套的 ul 中有一个库存商列表，我想显示/隐藏该区域（显示该区域中的所有库存商）。它确实显示和隐藏，但所有区域而不是我想要的区域 - 任何帮助一如既往地非常感激

我的标记

```
{foreach $regions index region}

<ul class="stockists">

    <li>
        <div class="regionHeader">

            <span class="regionTitle">{$region.label}</span><span class="regionView">View</span>

        </div>

        <ul class="region">
            <li>

            {$stockists = $region.stockists}

            {foreach $stockists index stockist}

                        <ul>
                        <li class="stockistName">{$stockist.name}</li>
                        <li>{$stockist.address1}</li>
                        <li>{$stockist.address2},{$stockist.city}</li>
                        <li>T : {$stockist.telephone}</li>
                        <li>W : {$stockist.website}</li>
                        <li><span class="productsButton">Products Stocked</span><span class="mapButton">View on Map</span></li>
                        </ul>

            {/foreach}

            </li>

        </ul>           

    </li>

</ul>                  

{/foreach} 
```

我的 javascript

```
var stockists = {

start: function() {

    $('.region').hide();
            $('.regionTitle').click(function(e) {
                e.preventDefault();
                $('.region').slideToggle(200);
            })

}

};

$(stockists.start); 
```

感谢您的关注，丰富 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:34:49.463

尝试：

```
var stockists = {
start: function() {

$('.region').hide();
        $('.regionTitle').each(function(){
        $(this).click(function(e) {
            e.preventDefault();
            $(this).next('.region').slideToggle(200);//here is the change basically it will show/hide only the region next to the clicked regionTitle.
        });
        });

}
};
$(stockists.start); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:34:02.227

编码：

```
$('.region').slideToggle(200); 
```

使用类“区域”切换所有元素。 `$('.region')`如果您只想切换一个元素，请选择所有具有“区域”类的元素，您应该选择他只添加使用该功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:51:08.167

我已经对其进行了排序，我需要先上一个元素，然后才能下一个……更正了这一行

```
$(this).parent().next('.region').slideToggle(300); // where .parent is the containing element of .regionTitle, which is div with class regionHeader. 
```

感谢大家的帮助，@gaurav 让我找到了正确的地方:)

# javascript - 使用 jQuery 选择器作为字符串文字

> ID：15135477
> 
> 赞同：0
> 
> 时间：2013-02-28T12:22:29.403
> 
> 标签：javascript, jquery, string

我想将 jQuery 选择器用作字符串文字而不是 ojbect。

JS可以做到这一点吗？

**标记**

```
 <levelTwo>
        <head0>
            <something></something>
        </head0>
    </levelTwo> 
```

**JS**

```
 var jamie = $('something').parent();

 //Desired useage
 typeOf(jamie) 
 // String
 console.info(jamie); 
 //"head0" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:24:02.307

```
$('something').parent().prop("tagName").toLowerCase() 
```

您还可以定义一个`.toString()`：

[http://jsfiddle.net/Rq6Kz/](http://jsfiddle.net/Rq6Kz/)

```
$.fn.toString = function() {
      return this[0] ? this[0].nodeName.toLowerCase() : "";
};

console.info($("div").toString()); //"div" 
```

这在某些上下文中被隐式调用，例如警报：

```
alert($("div")); //alerts "div" 
```

[http://jsfiddle.net/Rq6Kz/1/](http://jsfiddle.net/Rq6Kz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:39:37.883

你尝试在 XML 上使用 jQuery，有点棘手。要从 jQuery 选择器访问 DOM 元素，您可以使用“[0]”。

```
//<head0 name="head1">text</head0>
$(element)[0].getAttribute('name');
//result head1
$(element)[0].innerHTML();
//result "text"
$(element)[0].valueOf();
//results <head0 name="head1">
$(element)[0].nodeName.toLowerCase();
//results head0 
```

[您可能还需要来自 jQuery http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)的 parseXML

# assembly - 端口未显示输出

> ID：15135480
> 
> 赞同：0
> 
> 时间：2013-02-28T12:22:42.573
> 
> 标签：assembly, intel, 8051

我在汇编中为英特尔 8051 编写了一个程序。该程序编译良好，在模拟器中执行良好，但在端口上没有显示任何输出。输出端口只是空的。

这是代码：

```
ORG 00H

MOV P1, #00H
MOV P2, #00H
MOV P3, #00H
mov R4, #00h

TakeInput:

MOV R3,#0H

JB P3.4, TakeOperation   
DJNZ R3,TakeInput

MOV R0, P1

MOV R1, P2

MOV P2, #00H 
```

采取行动：

```
mov p2,#00h

jb p3.5,CheckFunction

sjmp TakeOperation

CheckFunction:

mov P3,#00h
Mov R5,P2
CJNE R5,#02H,ADDT

ajmp end

ADDT:

MOV A,R0

ADD A, R1

MOV P3, A    
SJMP CheckFunction 
```

我做错了什么输出没有显示在端口上？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:12:50.733

比较两个`Rx`寄存器：

```
MOV A,R0
CJNE A,01h,r0_r1_not_equal  ; Assumes that you're using register bank 0
; take action based on R0==R1
; ...
SJMP done
r0_r1_not_equal:
; take action based on R0!=R1  
; ...
done: 
```

# ehcache - 为什么 jboss 选择 infinispan 缓存而不是 Ehcache

> ID：15135481
> 
> 赞同：0
> 
> 时间：2013-02-28T12:22:43.623
> 
> 标签：ehcache, jboss6.x, infinispan

我已将我的项目从 glassfish2.2.1 迁移到 JBoss eap-6.0。迁移到 Jboss 后，我遇到了以下问题

> 17:38:45,581 错误 [org.jboss.msc.service.fail]（ServerService 线程池 -- 62）MSC000001：无法启动服务 jboss.persistenceunit。“unbrand.ear#entityManager”：org.jboss.msc.service .StartException in service jboss.persistenceunit."unbrand.ear#entityManager": javax.persistence.PersistenceException: [PersistenceUnit: entityManager] Unable to build EntityManagerFactory at org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1.run(PersistenceUnitServiceImpl.java :100) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 的 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_23] [rt.jar:1.6.0_23] 在 java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_23] 在 org.jboss.threads.JBossThread.run(JBossThread.爪哇：122）
> 
> 原因：javax.persistence.PersistenceException: [PersistenceUnit: entityManager] 无法在 org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915) 在 org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java: 890) 在 org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:197) 在 org.jboss.as.jpa.service .PersistenceUnitServiceImpl.access$500(PersistenceUnitServiceImpl.java:57) at org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1.run(PersistenceUnitServiceImpl.java:96) ... 还有 4 个
> 
> 原因： org.hibernate.cache.CacheException： 在 org.hibernate.internal.SessionFactoryImpl 的 org.hibernate.cache.infinispan.entity.EntityRegionImpl.buildAccessStrategy **(EntityRegionImpl.java:33)****不支持访问类型 [nonstrict-read-write]** .(SessionFactoryImpl.java:345) 在 org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1746) 在 org.hibernate.ejb.EntityManagerFactoryImpl.(EntityManagerFactoryImpl.java:94) 在 org.hibernate.ejb.Ejb3Configuration。 buildEntityManagerFactory(Ejb3Configuration.java:905) ... 还有 9 个

 **如果您以粗体检查日志，它正在使用 infinispan 缓存，这就是它导致问题 Unsupported access type [nonstrict-read-write] 的原因，因为 infinispan 不支持这个。

但是我的persistence.xml 我已经配置了ehcache。下面是我的persistence.xml

> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xsi:schemaLocation="http://java.sun.com/xml/ns/persistence [http://java.sun.com /xml/ns/persistence/persistence](http://java.sun.com/xml/ns/persistence/persistence) _1_0.xsd"
> version="1.0"> org.hibernate.ejb.HibernatePersistence jdbc/ejb/unbrand Casinomodule.core.audit.AuditTrail
> 
> ```
>  <!-- <property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.CMTTransactionFactory"/> -->
>      <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.SunONETransactionManagerLookup"/>
>      <property name="hibernate.cache.use_query_cache" value="true"/>
>      <property name="hibernate.query.jpaql_strict_compliance" value="false"/>
>      <property name="hibernate.session_factory_name" value="HibernateSession"/>
>      <property name="hibernate.bytecode.use_reflection_optimizer" value="true"/>
> 
>      <property name="hibernate.cache.provider_class" value="net.sf.ehcache.hibernate.SingletonEhCacheProvider"/>
>      <property name="hibernate.cache.use_second_level_cache" value="true"/>
> 
>   </properties>    </persistence-unit> </persistence> 
> ```

不知道为什么 jboss 采用 infinispan 而不是 Ehcache。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T07:41:59.377

好的，我找出问题所在。

这是由于旧的 Maven 依赖和我在我的 persistence.xml 文件中添加的属性引起的。

下面是maven依赖：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-ehcache</artifactId>
        <version>4.1.9.Final</version>
      </dependency> 
```

下面是我的 persistence.xml 文件中添加的新属性。

```
<property name="hibernate.cache.region.factory_class" value="net.sf.ehcache.hibernate.EhCacheRegionFactory"/> 
```

发生这种情况是因为我使用的是 JBoss eap-6.0。它也使用休眠作为 JPA 提供程序，它使用休眠 4.1.9.Final 版本。之前在我的 Maven 中，我将休眠的依赖项设置为 3.4.6**

# javascript - css('background-position') 的 jQuery IE10 行为

> ID：15135482
> 
> 赞同：3
> 
> 时间：2013-02-28T12:22:48.727
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-10, background-position

我有简单的代码片段：

```
$('div').css('background-position', '0px 0px');
alert( $('div').css('background-position') ); 
```

我希望我会收到'0px 0px'，但我在 IE10 中收到了“0% 0%”。我还注意到，jquery`.css`总是在等于 0px 时返回百分比结果，例如 IE10 中的“0px 50px”=>“0% 50px”。

是 jQuery 错误吗？还是IE10的错误？

你可以[在jsbin上试试](http://jsbin.com/emacow/1/edit)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:36:05.617

你不能依赖与你所给予的价值观相同的价值观。浏览器可以并且经常对你给它们的值进行规范化。

例如，如果您提供 color `#ffffff`，浏览器可能会在`rgb(255,255,255)`内部将其更改为。类似地，长度`0px`可以转换为`0`。

永远不要依赖 style 属性正是你告诉它的。如果您需要知道，可以使用变量来跟踪它，或者使用类之类的东西来根据需要更改样式。

# erlang - 在 Windows 环境中使用 Rebar 构建版本

> ID：15135483
> 
> 赞同：2
> 
> 时间：2013-02-28T12:22:49.290
> 
> 标签：erlang, rebar

我尝试使用 Rebar 构建 Erlang 应用程序版本。

[我按照http://alancastro.org/2010/05/01/erlang-application-management-with-rebar.html](http://alancastro.org/2010/05/01/erlang-application-management-with-rebar.html)的教程进行操作。

我在 WindowsXP 环境中工作，使用 MINGW32 来支持 git、shell 脚本、make 等...

创建应用程序、节点和版本没有问题；但是当我想使用命令启动应用程序时

> “我的应用程序控制台”

它失败了，因为它找不到命令 erlexec。

我在“myapp 脚本”中将 $CMD 变量从“.../erlexec”更改为“.../erl.exe”，这是 Windows 中 VM 程序的全名，它可以工作。

我想避免修改所有脚本的所有条目 - 有很多具有多个入口点的脚本，我担心当我构建下一个版本时它会被重写。

是否有要修改的配置文件，或者我在生成过程中缺少一个步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:41:25.570

很简单...

只需从dos环境启动命令，它就可以工作。

另外我首先从dos重建了rebar脚本，但我不知道是否有必要。

# javascript - 如何在活动/悬停 li 项下添加块元素（位置：绝对）？

> ID：15135484
> 
> 赞同：1
> 
> 时间：2013-02-28T12:22:50.173
> 
> 标签：javascript, jquery, html, css

我的 HTML 代码如下所示：

```
<ul>
    <li><a href="#link1">Link 1</a></li>
    <li ><a class="active" href="http://google.com">Link 2</a></li>
    <li><a href="asdasdasd">Link 3</a></li>
</ul> 
```

我需要**在悬停**和**a.class="active"上添加一个块元素**

该元素应该是一个跨度，例如：

```
<ul>
    <li><a href="#link1"><span class="arrow"></span>Link 1</a></li><!-- hovering this link -->
    <li ><a class="active" href="http://google.com"><span class="arrow"></span>Link 2</a></li>
    <li><a href="asdasdasd">Link 3</a></li>
</ul> 
```

如何通过 jQuery 完成这样的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:26:08.243

`<span>`如果你创建了元素，比如说，并最初制作了它会更好`display:none`，然后使用 jQuery，你可以简单地使用`show()`and `hide()`，如下所示：

```
if specific element is being hovered over:
   $("#insertedSpan").show();
   $(this).find('a').html('<span class="arrow"></span>');
else
   $("#insertedSpan").hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:25:09.960

看看`.wrapInner()`会有所帮助的 jQuery 方法。

**或者**

```
<script type="text/javascript">

    $(function()
    {
        $('ul li').each(function(){
            var text = $(this).find('a').text();
            $(this).find('a').html('<span class="arrow"></span>'+text);
        });     
    });

</script>

<ul>
    <li><a href="#link1">Link 1</a></li>
    <li ><a class="active" href="http://google.com">Link 2</a></li>
    <li><a href="asdasdasd">Link 3</a></li>
</ul> 
```

和`hover`使用

```
$('ul li a').hover(function()
{
   $('ul li').find('a').removeClass('active');
   $(this).addClass('active');
}); 
```

上面的代码所做的是删除`active class`on`hove`并将其添加到 hovered `DOM`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:31:14.070

首先，您应该将“li”位置设置为“relative”。然后添加隐藏显示。然后在 a 元素悬停时，使用 jquery 将显示设置为阻止。并且不要忘记您的跨度位置应该是“绝对的”；

# sql - 表中第一次出现的条目（访问）

> ID：15135489
> 
> 赞同：0
> 
> 时间：2013-02-28T12:23:31.233
> 
> 标签：sql, ms-access

这是我的桌子：

```
ID      NAME        FAMILY_ID       HASKIDS     ISPARENT
--------------------------------------------------------
1       John        1               1           1
2       Bill        1               1           0
3       Dick        1               1           0
4       Jane        2               1           1
5       Mary        2               1           0
6       Pete        3               0           1
7       Jess        3               0           1 
```

我希望结果是

```
NAME        FAMILY_ID
---------------------
Bill        1
Mary        2 
```

逻辑是：从每个有孩子的家庭中，显示他们的第一个孩子的名字（每个非父母成员的最高 ID）和相应的家庭 ID。

所以这是我的第一个查询**query1**：

```
SELECT DISTINCT family_id
FROM families
WHERE (haskids=1)
ORDER BY family_id; 
```

这带来了结果（正确）：

```
1
2 
```

我的第二个查询是**query2**：

```
SELECT TOP 1 name, family_id
FROM families
WHERE family_id IN (SELECT family_id FROM query1) AND isparent=0
ORDER BY id; 
```

产生了不希望的结果：

```
NAME        FAMILY_ID
---------------------
Bill        1 
```

因为 top 1 并没有从每个子结果中带来前 1，而是整体较小的条目 id。

我确定我错过了一些东西，并且有一种简单的方法可以实现这一点，但我不知道如何。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:31:43.497

```
select  *
from    YourTable
where   id in
        (
        select  min(id)
        from    YourTable
        where   isparent = 0
        group by
                family_id
        ) 
```

# javascript - HTML5 Web Workers - 如何在线程之间共享工作

> ID：15135491
> 
> 赞同：1
> 
> 时间：2013-02-28T12:23:40.003
> 
> 标签：javascript, html, web-worker

我对 JS 很陌生，但在研究了 Web Worker API 之后，我对一些基本的多线程有所了解。我在下面的尝试是抽象用于确定下一个工作单元的逻辑，即 sendWorkUnit()，然后在启动工作人员和消息处理程序期间使用它，以确保他们继续工作直到工作完成。

我认为这种方法是合理的，但我怀疑我的设计错误。为什么？因为我很快意识到一旦工作完成我并没有关闭每个工人，所以我尝试修改 sendWorkUni() 如下：

```
function sendWorkUnit(worker) {
  if (workCount < testData.length) {
    worker.postMessage(testData[workCount++]);
  } else {
    worker.terminate();
  }
} 
```

但是，当我进行此更改时，整个事情都会爆炸，我只能取回数组的前 4 个元素。任何解释或指示将不胜感激！

管理器.js

```
window.onload = function() {
  var numWorkers = 5,
      workers = [],
  testData = ['f', 'o', 'o', 'b', 'a', 'h'],
  workCount = 0,
  ol = document.querySelector('#output');

//Spawn some workers
for (var i = 0; i < numWorkers; i++) {
  var worker = new Worker('worker.js');
  worker.addEventListener('message', function(e) {
    displayWorkUnit(e);
    sendWorkUnit(worker);
  }, false);
  workers.push(worker);
}

//Start the workers
for (var i = 0, l = workers.length; i < l; i++) {
  sendWorkUnit(workers[i]);
}  

//Send next unit
function sendWorkUnit(worker) {
  if (workCount < testData.length) {
    worker.postMessage(testData[workCount++]);
  } 
}

//Display each worker's output
function displayWorkUnit(e) {
  var li = document.createElement('li');
  li.innerHTML = e.data;
  ol.appendChild(li);
} 
```

}

工人.js

```
self.addEventListener('message', function(e) {
  postMessage(e.data.toUpperCase());
}, false); 
```

# javascript - 打开 DIV 关闭其他

> ID：15135496
> 
> 赞同：1
> 
> 时间：2013-02-28T12:23:51.530
> 
> 标签：javascript, css, prototypejs

有一个小问题，我有一个模块，它是一个过滤的左侧导航，用于过滤电子商务网站上的产品。

```
 function amshopby_filter_show(evt) {
  var dt = Event.findElement(evt, 'dt');

  dt.next('dd').down('ol').toggle();
  dt.toggleClassName('amshopby-collapsed');

  Event.stop(evt);
  return false;
} 
```

[http://jsfiddle.net/6Tn3D/6/](http://jsfiddle.net/6Tn3D/6/)

我需要 DROPDOWN1 来切换“ol”，以便它打开和关闭，但我还需要一次只打开一个 DROPDOWN。因此，如果您随后打开 DROPDOWN2，它会打开 DROPDOWN2 但也会关闭 DROPDOWN1。

真的希望这是有道理的，并希望有人能指出我正确的方向。

多谢你们。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:04:36.740

我总是关闭/隐藏所有下拉菜单，*然后*打开一个新的下拉菜单。

# objective-c - 使用 SUN RPC 将文件从客户端传输到服务器

> ID：15135497
> 
> 赞同：1
> 
> 时间：2013-02-28T12:23:51.393
> 
> 标签：objective-c, c, operating-system, rpc, sunrpc

我正在尝试将文本文件从客户端传输到使用 SunRPC 实现的服务器。我能够传输数据，但只能传输前四个字符。最初我只能得到一个字符，因为我定义的变量的数据类型是字符指针。

添加.x 文件

```
struct file_details {
    unsigned int file_len; 
    int *file_val;
};

struct add_in {
    int *author;
    int *title;
    struct file_details *file;
};

struct node {
    int id;
    int *author;
    int *title;
    struct file_details *f;
    struct node *next;
};

struct info_out {
    int *author;
    int *title;
};

typedef struct node* add_out;
typedef struct node* list_out;
typedef struct node* list_in;
typedef int info_in;
typedef int fetch_in;
typedef char* fetch_out; 
```

这是客户端代码

```
int * read_file(char* path){
    FILE *file;
    int *buffer;
    long file_length;

    file = fopen(path, "rb");
    if(file == NULL){
        perror("Unable to open file");
        exit(1);
    }

    file_length = f_length(path);
    printf("%ld", file_length);
    buffer=(int *)malloc(file_length*4);
    if(buffer == NULL){
       perror("Memory Allocation failed");
       exit(1);
    }

    fread(buffer, file_length, 1, file);
    fclose(file);

    return buffer;
}

int f_length(char* path) {
    FILE *fp;
    long file_len; 
    fp = fopen(path, "rb");
    fseek(fp, 0, SEEK_END);
    file_len = ftell(fp);
    fseek(fp, 0, SEEK_SET);
    return file_len;
}

int main(int argc, char** argv){
    CLIENT *cl;
    add_in in;
    add_out *out;
    list_out *l;
    list_out *temp;

    if(argc > 2) {
        cl = clnt_create(argv[1], FILE_TRANSFER, FILE_VERS, "udp");
        in.author = (int *)malloc(strlen(argv[3])*4);
        in.title = (int *)malloc(strlen(argv[4])*4);
        in.author = argv[3];
        in.title = argv[4];
        in.file = (struct file_details *)malloc(sizeof(struct file_details));
        in.file->file_val = (int *)malloc(f_length(argv[5])*4);
        in.file->file_val = read_file(argv[5]); 
        in.file->file_len = f_length(argv[5]);
        if (strcmp(argv[2],"add") == 0){
            out = add_proc_1(&in, cl);
            if(out == NULL) {
                fprintf(stderr,"Error: %s\n", clnt_sperror(cl,argv[1]));
            }
            else {
                printf("%s added", (*out)->title);
            }
        }

    }

    exit(0);

} 
```

我的服务器代码：

```
add_out * 
add_proc_1_svc(add_in *in, struct svc_req *rqstp)
{
    int file_length = in->file->file_len;
    static add_out  result;    
    char *a = (char *)malloc(file_length*4);
    char *b = (char *)malloc(file_length*4);
    a = in->author;
    node *temp, *newfile; 
    static node *start = NULL;
    newfile = (node *)malloc(sizeof(node));
    newfile->f = (file_details *)malloc(sizeof(file_details));
    newfile->author = (int *)malloc(sizeof(int));
    newfile->title = (int *)malloc(sizeof(int));
    newfile->author = in->author;
    newfile->title = in->title;
    newfile->f->file_val = in->file->file_val;
    b = in->file->file_val;
    newfile->f->file_len = file_length;
    newfile->id = rand();
    newfile->next = NULL;    
    if(start == NULL){
       start = newfile;
    }
    else {
        for(temp = start; temp->next != NULL; temp = temp->next);
        temp->next = newfile;
    }
    result = newfile;
    return &result;
} 
```

为什么当我定义 int * 时我在服务器端得到 4 个字符，而当我使用 char * 时得到 1 个字符。是我定义的数据类型的问题吗？谁能建议我另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:34:47.960

我可以设法解决它，

我们可以使用 SunRPC 中的字符串数据类型，所以修改了我的 add.x 代码，

```
struct file_details {
    unsigned int file_len; 
    string file_val<>;
};

struct add_in {
    string author<>;
    string title<>;
    struct file_details *file;
};

struct node {
    int id;
    string author<>;
    string title<>;
    struct file_details *f;
    struct node *next;
};

struct info_out {
    string author<>;
    string title<>;
};

typedef struct node* add_out;
typedef struct node* list_out;
typedef struct node* list_in;
typedef int info_in;
typedef int fetch_in;
typedef char* fetch_out; 
```

# c++ - 打印输入文件流缓冲区的内容

> ID：15135499
> 
> 赞同：0
> 
> 时间：2013-02-28T12:23:52.800
> 
> 标签：c++, memory, buffer

首先，如果我错误地使用了“流”和“缓冲”这两个词，我想道歉。

回答这个问题 - >[如何从文件中读取数据块然后从该块读取到向量中？](https://stackoverflow.com/questions/15128383/how-to-read-blocks-of-data-from-a-file-and-then-read-from-that-block-into-a-vect)

有人告诉我，从文件中逐条读取记录或逐块读取不会有太大影响，因为标准库在从文件读取数据时已经进行了缓冲。此外，由于可以调整缓冲区的大小，因此无需逐块读取。因此，为了测试这一点，我决定自己做一个小实验。

```
FILE *file;
file=fopen("out","r");
setvbuf(file,NULL,_IOFBF,1024);
char c=fgetc(file); 
```

我有一个包含 2048 个字符的文件“out”。我通过 setvbuf 关联了一个 1024 字节的缓冲区。根据[http://www.cplusplus.com/reference/cstdio/setvbuf/](http://www.cplusplus.com/reference/cstdio/setvbuf/)，当请求输入操作时（使用模式_IOFBF），缓冲区被完全填满。所以当我要求通过

```
char c=file.get() 
```

缓冲区应该被完全填满，即文件的前半部分应该“out”。

现在我的问题是如何显示缓冲区的内容以便我可以验证我的实验（如果我的理解完全正确的话）？

谢谢。

# jboss - JBOSS 战争部署无法使用 mysqlds.xml

> ID：15135501
> 
> 赞同：0
> 
> 时间：2013-02-28T12:23:59.057
> 
> 标签：jboss, war

我在 jboss/server/default/deploy 文件夹中部署了一个战争应用程序。这里的问题是我的应用程序无法访问 mysqlds.xml。当我尝试使用 jboss/server/default/jboss-web.deployer 时，它会抛出一个异常，如“myDataSource 未绑定”。

这是我的 mysql-ds.xml（在 server/default/deploy 中）

`

```
<jndi-name>MySqlDS1</jndi-name>

<use-java-context>true</use-java-context>

<connection-url>jdbc:mysql://127.0.0.1:3306/test</connection-url>

<url-delimiter>|</url-delimiter>

<driver-class>com.mysql.jdbc.Driver</driver-class>

<user-name>test</user-name>

<password>test</password> 
```

`

当我将 jboss-all-client 和 mysql 连接器 jar 删除到 jboss/server/default/lib jboss-common.jar 到 jboss/lib 时，似乎我的问题得到了解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:29:43.063

你能粘贴你的xml吗？此外，您可以在 jboss 中找到示例“mysql-ds.xml”；

jboss\docs\examples\jca\mysql-ds.xml

文件名是否正确？JBoss 是否遵循命名约定？

在你的 jboss-web.xml 中；jndi 名称

```
<jndi-name>java:**/**MySqlDS1</jndi-name> 
```

你能去掉“/”，看看是否有效吗？

如果仍然出现错误，请同时粘贴您的错误日志

# javascript - 在 Lync 通信器中使用的 ActiveX

> ID：15135502
> 
> 赞同：1
> 
> 时间：2013-02-28T12:24:02.497
> 
> 标签：javascript, asp.net, activex

假设我有一个应用程序，如果我点击我的名字，它应该会打开我的通讯器。

为此，我使用`< sip:mymailid >`了这个开放的通信器以及我的 Outlook 邮箱，因为我只想打开“lync”而不是邮箱。为了制作这种类型的应用程序，我`activeX`应该使用什么（我知道名称控件 ActiveX）或名称控件 ActiveX 的哪个属性仅调用通信器。

# node.js - Websocket 连接设置需要相对较长的时间 - 这正常吗？

> ID：15135506
> 
> 赞同：12
> 
> 时间：2013-02-28T12:24:12.327
> 
> 标签：node.js, express, websocket

当客户端和服务器都在我的机器上本地运行时，设置 websocket 连接似乎需要大约 1 秒。这对我来说似乎很长一段时间 - 是吗？谁能将这与他们自己的经历进行比较？

* * *

*细节：*

我在客户端（Chrome 25，Windows7 64）上有一个这样的 websocket 请求：

`this.ws = new WebSocket('ws://' + host + ':' + port);`

在服务器端，我有运行[ExpressJS](https://github.com/visionmedia/express)的 Node 和处理升级和 WS 连接的[einaros/ws 。](https://github.com/einaros/ws)

我在客户端上计时，从新`WebSocket()`到`ws.onopen`事件之前。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-28T19:39:39.783

我找到了这个问题的明确答案。显然，使用`localhost`会导致浏览器首先尝试连接，然后在 1 秒超时后`ipv6`回退。`ipv4`问题通过使用解决，`127.0.0.1`因为它首先会尝试使用连接`ipv4`。

[资源](https://code.google.com/p/chromium/issues/detail?id=175237)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:13:40.510

这是不正常的。

我在 Ubuntu 上使用 Chrome 24 并带有以下测试代码（只需启动 Chrome 开发控制台并将其粘贴）：

```
function test_ws(uri){
    start = new Date().getTime(); 
    ws = new WebSocket(uri);
    ws.onopen = function(){
        console.log("onopen of", uri, "in", (new Date().getTime() - start), "ms");
    };
} 
```

以下是我针对**uri**的各种值得到的一些平均结果：

*   `ws://localhost:6080`: 20 毫秒（基于 Python 的自定义 WebSocket 服务器）
*   `ws://localhost:6090`: 3 ms (自定义 node.js + einaros/ws 基于 WebSocket 服务器)
*   `ws://echo.websocket.org`: 130 毫秒
*   `wss://echo.websocket.org`: 190 毫秒

因此，即使使用与公共远程 Websocket 服务器的加密连接，在打开事件之前平均仍不到五分之一秒。我看到的最长时间是250毫秒。对于本地连接，延迟实际上应该只有几毫秒。

我的猜测是您的服务器设置在接受连接之前正在进行大量处理。也许您正在新的连接处理程序中初始化一堆客户端数据？

**更新**：

这是一个简单的基于 einaros/ws 的 WebSocket 服务器，它使用上面的客户端测试代码提供 3 毫秒的 onopen 响应：

```
var WebSocketServer = require('ws').Server
  , wss = new WebSocketServer({port: 6090});
wss.on('connection', function(ws) {
    console.log("got connection");
}); 
```

# java - 黑莓自定义 ListField 没有以正确的方式重绘

> ID：15135507
> 
> 赞同：2
> 
> 时间：2013-02-28T12:24:13.190
> 
> 标签：java, blackberry, listfield, blackberry-5

每次我使用自定义 ListField 推送我的新屏幕时，行的大小都不是必须的。我尝试使用无效，但它什么也不做。

我不明白为什么，当我用焦点导航或屏幕变得不活动并返回时，列表以正确的方式显示。

![尺寸不好](../Images/ebf35bb2dd90045c19142f94486b8f36.png)

```
public class AboutListField extends ListField implements ListFieldCallback {

    private Vector rows;

    EncodedImage _rateIcon = EncodedImage
            .getEncodedImageResource("icon_rate.png");
    EncodedImage _privacyIcon = EncodedImage
            .getEncodedImageResource("icon_info.png");
    EncodedImage _legalIcon = EncodedImage
            .getEncodedImageResource("icon_ad.png");
    EncodedImage _facebookIcon = EncodedImage
            .getEncodedImageResource("icon_facebook.png");
    EncodedImage _twitterIcon = EncodedImage
            .getEncodedImageResource("icon_twitter.png");

    private LabelField nameLabel;

    public AboutListField() {
        super(0, ListField.USE_ALL_WIDTH);
        setRowHeight(60);
        setCallback(this);

        Font fontName = Font.getDefault().derive(Font.SERIF_STYLE, 8,
                Ui.UNITS_pt);

        rows = new Vector();

        for (int i = 0; i < 5; i++) {
            HorizontalManager row = new HorizontalManager();
            switch (i) {
            case 0:
                row.add(new BitmapField(_rateIcon.getBitmap()));
                nameLabel = new CustomLabelField("Valorar app", NON_FOCUSABLE,
                        Color.WHITE);
                nameLabel.setFont(fontName);
                row.add(nameLabel);
                break;
            case 1:
                row.add(new BitmapField(_privacyIcon.getBitmap()));
                nameLabel = new CustomLabelField("Política de privacidad",
                        NON_FOCUSABLE, Color.WHITE);
                nameLabel.setFont(fontName);
                row.add(nameLabel);
                break;
            case 2:
                row.add(new BitmapField(_legalIcon.getBitmap()));
                nameLabel = new CustomLabelField("Aviso Legal", NON_FOCUSABLE,
                        Color.WHITE);
                nameLabel.setFont(fontName);
                row.add(nameLabel);
                break;
            case 3:
                row.add(new BitmapField(_facebookIcon.getBitmap()));
                nameLabel = new CustomLabelField("Síguenos en Facebook",
                        NON_FOCUSABLE, Color.WHITE);
                nameLabel.setFont(fontName);
                row.add(nameLabel);
                break;
            case 4:
                row.add(new BitmapField(_twitterIcon.getBitmap()));
                nameLabel = new CustomLabelField("Síguenos en Twitter",
                        NON_FOCUSABLE, Color.WHITE);
                nameLabel.setFont(fontName);
                row.add(nameLabel);
                break;

            default:
                break;
            }
            rows.addElement(row);
        }
        setSize(rows.size());
    }

    protected void drawFocus(Graphics graphics, boolean on) {
        XYRect focusRect = new XYRect();
        getFocusRect(focusRect);

        boolean oldDrawStyleFocus = graphics
                .isDrawingStyleSet(Graphics.DRAWSTYLE_FOCUS);
        try {
            if (on) {
                // set the style so the fields in the row will update its color
                // accordingly
                graphics.setDrawingStyle(Graphics.DRAWSTYLE_FOCUS, true);
                int oldColour = graphics.getColor();
                try {
                    graphics.setColor(Constants.Colors.ORANGE_SELECTED);
                    graphics.fillRect(focusRect.x, focusRect.y,
                            focusRect.width, focusRect.height);
                } finally {
                    graphics.setColor(oldColour);
                }
                // to draw the row again
                drawListRow(this, graphics, getSelectedIndex(), focusRect.y,
                        focusRect.width);
            }

        } finally {
            graphics.setDrawingStyle(Graphics.DRAWSTYLE_FOCUS,
                    oldDrawStyleFocus);
        }
    }

    public void drawListRow(ListField listField, Graphics graphics, int index,
            int y, int width) {
        AboutListField aboutList = (AboutListField) listField;
        HorizontalManager rowManager = (HorizontalManager) aboutList.rows
                .elementAt(index);
        rowManager.drawRow(graphics, 0, y, width, getRowHeight());

    }

    public Object get(ListField listField, int index) {
        // TODO Auto-generated method stub
        return null;
    }

    public int getPreferredWidth(ListField listField) {
        // TODO Auto-generated method stub
        return 0;
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        // TODO Auto-generated method stub
        return 0;
    }

    public boolean navigationClick(int status, int time) {

        switch (this.getSelectedIndex()) {
        case 0:
            //Valorar App

            this.setSelectedIndex(0);
            break;
        case 1:
            // Política de privacidad
            InfosScreen policyScreen = new InfosScreen(InfosScreen.TYPE_PRIVACY);
            UiApplication.getUiApplication().pushScreen(policyScreen);
            this.setSelectedIndex(1);
            break;
        case 2:
            // Aviso Legal
            InfosScreen legalScreen = new InfosScreen(InfosScreen.TYPE_LEGAL);
            UiApplication.getUiApplication().pushScreen(legalScreen);
            this.setSelectedIndex(2);
            break;
        case 3:
            // Facebook
            this.setSelectedIndex(3);
            break;
        case 4:
            // Twitter
            this.setSelectedIndex(4);
            break;
        default:
            break;
        }

        return super.navigationClick(status, time);
    }

    public class HorizontalManager extends Manager {

        public HorizontalManager() {
            super(0);
        }

        public void drawRow(Graphics g, int x, int y, int width, int height) {
            // Arrange the cell fields within this row manager.
            layout(width, height);

            // Place this row manager within its enclosing list.
            setPosition(x, y);

            // Apply a translating/clipping transformation to the graphics
            // context so that this row paints in the right area.
            g.pushRegion(getExtent());

            // Paint this manager's controlled fields.
            subpaint(g);

            g.setColor(0x00CACACA);
            g.drawLine(0, 0, getPreferredWidth(), 0);

            // Restore the graphics context.
            g.popContext();
        }

        protected void sublayout(int width, int height) {
            // set the size and position of each field.
            int fontHeight = Font.getDefault().getHeight();
            int preferredWidth = getPreferredWidth();

            // start with the Bitmap Field of the Radio icon
            Field field = getField(0);
            layoutChild(field, _rateIcon.getWidth(), getRowHeight());
            setPositionChild(field, 20,
                    (getHeight() / 2 - _rateIcon.getHeight() / 2));

            // set the radio name label field
            field = getField(1);
            layoutChild(field, preferredWidth - 16, getRowHeight());
            setPositionChild(field, _rateIcon.getWidth() + 40,
                    (getHeight() / 2 - fontHeight / 2));

            setExtent(preferredWidth, getPreferredHeight());
        }

        // The preferred width of a row is defined by the list renderer.
        public int getPreferredWidth() {
            return Display.getWidth();
        }

        // The preferred height of a row is the "row height" as defined in the
        // enclosing list.
        public int getPreferredHeight() {
            return getRowHeight();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:03:13.397

我不能给你细节，但这给我敲响了警钟。

看起来您已经在列表中设置了行高，但没有在每一行上设置正确的行高。

尝试专门设置每个行管理器的实际高度，并告诉列表正确的行高。使这些相等，我认为它会起作用。

如果这个周末我能找到代码，我会弹出更多信息。

* * *

## 更新

尝试覆盖`height`in`drawRow()`以使用您喜欢的行高。它是我能看到您允许系统为您选择高度的唯一地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:19:30.827

在将 Web 位图加载到列表行时，我遇到了类似的情况。仅使行无效似乎不起作用，必须使行的 parent 无效`ListField`。所以要做到这一点，我用父列表的句柄构造我的列表行管理器。

你如何设置行的高度？当我调用我`CustomListField`的 set 方法时，我调用`super.setRowHeight(CUSTOM_ROW_HEIGHT)`. 这也可以解决问题。

# arrays - 如何在没有 LINQ 的情况下按降序对 FileInfo 对象数组进行排序

> ID：15135508
> 
> 赞同：3
> 
> 时间：2013-02-28T12:24:17.647
> 
> 标签：arrays, vb.net, sorting, .net-2.0

我必须降级我的代码才能在不支持 LINQ 的 NET 2.0 上工作。目前，代码使用 LINQ`FileInfo`按属性对对象数组进行排序，如下所示：`FullName`

```
 Dim files As FileInfo() = ' ...
    files = files.OrderByDescending(Function(x) x.FullName).ToArray() 
```

如何在不使用`OrderByDescending`LINQ 扩展方法的情况下在 2.0 .NET Framework 中执行相同类型的排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T14:23:14.770

要在没有 LINQ 的情况下对数组进行排序，可以使用`Array.Sort`shared 方法。If 有许多重载允许您自定义数组的排序方式。在这种情况下，我推荐的两个重载将是一个接受`IComparer(Of T)`对象的重载，或者一个接受`Comparison(Of T)`委托的重载。

## 排序使用`IComparer(Of T)`

该`IComparer(Of T)`接口可用于创建包装排序逻辑的可重用类。您可以使用相同的类轻松地对任何数组或列表进行排序`IComparer(Of T)`，因此在您需要在代码中的多个位置重复使用相同的排序逻辑的情况下，它通常更方便。首先，您需要创建实现接口的类，如下所示：

```
Public Class FileInfoDescendingByNameComparer
    Implements IComparer(Of FileInfo)

    Public Function Compare(x As FileInfo, y As FileInfo) As Integer Implements IComparer(Of FileInfo).Compare
        Return y.FullName.CompareTo(x.FullName)
    End Function
End Class 
```

如您所见，我使用`String`类（`FullName`属性）中内置的默认比较逻辑来执行比较。它将按降序排序的原因是因为我是在比较`y.FullName`而`x.FullName`不是`x.FullName`比较`y.FullName`。

`FileInfo`然后，您可以使用该类对对象数组进行排序，如下所示：

```
Array.Sort(Of FileInfo)(files, New FileInfoDescendingByNameComparer()) 
```

## 排序使用`Comparison(Of T)`

如果您不需要在多个地方重复使用排序逻辑，或者像这种情况下比较逻辑非常简单，创建一个`Comparison(Of T)`委托来指向一个内联匿名函数会更容易，就像这样：

```
Array.Sort(Of FileInfo) _
    ( 
    files, 
    New Comparison(Of FileInfo) _
        ( 
        Function(f1 As FileInfo, f2 As FileInfo) f2.FullName.CompareTo(f1.FullName)
        )
    ) 
```

# python - 是否可以判断 NDB 游标是否已反转？

> ID：15135515
> 
> 赞同：3
> 
> 时间：2013-02-28T12:24:35.020
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

从 GAE 文档中，可以通过以下方式制作反向光标：

`rev_cursor = cursor.reversed()`

我正在寻找类似的东西`cursor.is_reversed()`，无论光标是否被反转，它都会返回。

那存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:06:05.163

不，不会保留此类信息。该`.reversed()`调用只返回一个位置相反的新游标：

```
def reversed(self):
    """Creates a cursor for use in a query with a reversed sort order."""
    for pos in self.__compiled_cursor.position_list():
        if pos.has_start_key():
            raise datastore_errors.BadRequestError('Cursor cannot be reversed.')

    rev_pb = datastore_pb.CompiledCursor()
    rev_pb.CopyFrom(self.__compiled_cursor)
    for pos in rev_pb.position_list():
        pos.set_start_inclusive(not pos.start_inclusive())
    return Cursor(_cursor_pb=rev_pb) 
```

（为了便于阅读，源代码重新缩进了 4 个空格）。

# drupal - 单击菜单项的子（子）链接（如菜单链接/子链接）时，将活动/活动跟踪类添加到主链接

> ID：15135518
> 
> 赞同：1
> 
> 时间：2013-02-28T12:24:46.040
> 
> 标签：drupal, drupal-7

我对 Drupal 7 菜单项有疑问。在标题的主菜单中，我有不同的菜单项：Home、link1、link2、link3 等。

在侧边栏中，我在页眉中的一个链接下有一个用于不同链接的菜单 所以对于一个页面链接 1/链接 1、链接 1/链接 2。

当我单击标题主菜单中的这些链接之一时，不再有活动/活动跟踪类。

单击基础链接时，如何将这些类重新分配回标题菜单项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:01:01.303

最简单的解决方案是将每个页面分配为主页的子页面。

简单来说，在保存页面时，在底部：创建一个菜单并使其成为菜单层次结构中的子页面。

这样当你在二级页面时，Drupal 就知道哪个是父页面。

# ssh - 在 while 循环中使用 SSH

> ID：15135521
> 
> 赞同：1
> 
> 时间：2013-02-28T12:24:56.597
> 
> 标签：ssh, wait, ksh

我有一个简单的脚本来使用 SSH 在远程服务器上创建目录：

```
 while read memberName; do
        ssh ${serverPath} "mkdir -p ${filePath}"
        wait
    done < sqlRes.txt 
```

（我已经简化了一点——这些变量确实存在并且很好）。

如果我让每个 SSH 调用都成为后台作业（使用 &），它会更好但不完全（它应该创建 200 个目录，例如，只做 170 个）。

事实上，它在 sqlRes.txt 中的第一个条目后退出循环，没有错误消息和成功返回状态。

我试过 sleep 和 wait 命令，但都没有帮助。

我猜可能有子壳的限制，但我认为“等待”应该确保在我尝试下一个之前关闭每个子壳？

请问有什么想法吗？

仅供参考 - Linux RedHat 中的 ksh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:00:22.853

抱歉 - 经过更多搜索后找到了答案（ssh 是交互式的并接受所有输入。更改为 'ssh -n' 并且一切正常）。

# css - chrome悬停不下拉菜单

> ID：15135522
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:24:58.650
> 
> 标签：css, google-chrome

我无法弄清楚为什么这仅在 Chrome 上不起作用，但悬停不显示`span.sub-menu-response`

```
.navbar .navbar-inner  .nav-collapse > ul > li > span.sub-menu-response {
display: none;
background: #F8F8F8;
position: absolute;
z-index: 5;
border: 1px solid #9da3a7;
margin-top: 6px;
margin-left: 0px !important; 
left:-92px;

}

.navbar .navbar-inner  .nav-collapse > ul > li:hover > span.sub-menu-response {
display: block;
background: #F8F8F8;
position: absolute;
z-index: 5;
border: 1px solid #9da3a7;
margin-top: 6px;
margin-left: 0px !important; 
left:-92px;
} 
```

输出的html

```
<div class="navbar">
<div class="navbar-inner">

 <a data-target=".nav-collapse" data-toggle="collapse" class="brand visible-phone">
     Categories
</a>
    <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </a>
  <div class="nav-collapse collapse">
    <ul class="nav">
        <li>*content*</li>

        <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><span>
        Start Shopping</span><span class="active_downarrow"></span></a>
            <span class="sub-menu-response"></span>
        </li>

        <li> *content*  </li>

        <li> *content*   </li>

        <li>*content*</li>
    </ul>
</div>

</div>

</div> 
```

编辑：奇怪的是，如果我把它放在`:hover`后面`ul`而不是`li`它的工作原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:40:08.197

```
 .navbar .navbar-inner  .nav-collapse > ul > li:hover > span.sub-menu-response {
display: block;
background: #F8F8F8;
position: absolute;
z-index: 5;
border: 1px solid #9da3a7;
margin-top: 6px;
margin-left: 0px !important; 
left:-92px;
} 
```

这是因为你的左边是-92px。改变左边：-92x 到 100px，你明白我在说什么。

# c# - 将对象转换为自定义列表

> ID：15135525
> 
> 赞同：3
> 
> 时间：2013-02-28T12:25:10.287
> 
> 标签：c#

我从 a 获得了一个自定义列表`webservice`，我需要将自定义列表转换​​为在客户端创建的自定义列表中。

我得到这样的网络服务的价值：

```
List<object> list = ((IList<object>)service.EventosDoDia()).ToList(); 
```

现在我需要将列表的值放入我的自定义列表中，

```
List<Evento> 
```

如何转换此列表中的对象？

班级`Eventos`

```
public class Eventos
{
    public string id { get; set; }
    public string logo { get; set; }
    public string data { get; set; }
    public string texto { get; set; }
    public string comentarios { get; set; }
} 
```

查看打印调试，查看我列表中的值 [http://i50.tinypic.com/14mt1ti.png](http://i50.tinypic.com/14mt1ti.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:27:33.563

```
using System.Linq;

var eventList = list.Cast<Evento>().ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:30:39.803

好像

```
var list = service.EventosDoDia.ToList();

var event = new List<Evento>();
list.ForEech(c => 
               {
                 event.Add(new Evento()
                           {
                             id = c.SomeIdFromService,
                             logo = c.SomeForLogoService
                             //TOPO: Some Properties
                           };
               }); 
```

# ruby-on-rails - 获取 RoR 3 中具有关联的所有记录

> ID：15135527
> 
> 赞同：0
> 
> 时间：2013-02-28T12:25:12.873
> 
> 标签：ruby-on-rails

我是 RoR 3 的新手，我遇到了问题。我有这样的`User`课

```
class User < ActiveRecord::Base
  attr_accessible :firstname, :lastname, :login, :password, :rank, :sa_id, 
  belongs_to :role
  belongs_to :company
end 
```

在我的控制器中，我得到第一个用户（例如）`User.first`我可以访问`User.first.role`

是否可以获取包括 belongs_to 对象在内的所有用户？就像结果将是所有用户和每个用户中的角色类型对象和公司类型对象？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:35:32.590

我不确定这是否是您要查找的内容，但您可以急切加载关联，因此只有 1 个请求被发送到数据库（实际上是 3 个，一个用于用户，一个用于角色，一个用于公司）

```
>> users = User.includes(:role, :company)
>> users.each do |user|
     puts user.role
     puts user.company
   end 
```

更新：渲染 json，使用

```
respond_with(@user) do |format|
  format.json { render json: @user.to_json(methods: [:company, :role] }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:38:35.490

`index`如果你使用了脚手架，那么你的 UsersController中也应该有一个生成的方法。

在那里你应该看到这样的东西：

```
@users = User.all 
```

This fetches all User objects from database.

Now you can iterate over those Users and access the `role` field like you did before.

But: This uses lazy loading. Means: For every accessed `role` it will execute a separate query. To fix this use "eager loading" ([http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)):

```
@users = User.includes(:role) 
```

This will fetch all Users with it's associated role in one query

# javascript - 使用节点 js 和套接字 io 处理响应

> ID：15135534
> 
> 赞同：1
> 
> 时间：2013-02-28T12:25:45.877
> 
> 标签：javascript, node.js, websocket, dom-events

我有一个网页最初由 HTTP 提供服务的场景。单击提交后，它将向服务器发送一些数据并执行一些需要很长时间的 Web 服务。我需要快速显示响应页面，并且在 Web 服务作业完成后必须在之前加载的同一页面中显示结果。

这是否可能通过 http 处理程序处理所有请求然后通过套接字 io 传递结果来实现。

我希望写一些类似的代码。

```
var httpd = require('http').createServer(handler);
var io = require('socket.io').listen(httpd);
var fs = require('fs');
httpd.listen(4000);
function handler(req, res) {
    fs.readFile(__dirname + '/index.html',
        function(err, data) {
            if (err) {
                res.writeHead(500);
                return res.end('Error loading index.html');
            }
            res.writeHead(200);

            res.end(data);
        }
        );

}
io.sockets.on('connection', function (socket) {
    socket.on('clientMessage', function(content) {
       setTimeout(function () {
           socket.emit('serverMessage', "web service complete");
       }, 5000);

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:09:43.177

是的。只需查看一个[socket.io 网页](http://socket.io/)即可了解如何使用它的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T13:05:43.920

我为我的问题找到了解决方案，所以我将其添加为我自己问题的答案。我提到了 socket.io 聊天应用程序，它很有用，但没有完整的文档。对于某些功能，我们需要通过源代码。我使用会话来识别套接字和 http 请求以及每个客户端。我将粘贴我发现可行的代码。

```
 var io = require('socket.io');
    var express = require('express');
    var http = require('http');
    var fs = require('fs');
    var connect = require('connect');
    var cookie = require("cookie");
    var app = express();
    var server = http.createServer(app)
    var parseCookie = connect.utils.parseCookie;
    var parseSignedCookie = connect.utils.parseSignedCookie;
    var MemoryStore = connect.session.MemoryStore; 
    var sessionStore = new MemoryStore();

    app.configure(function () {
        app.use(express.bodyParser());
        app.use(express.cookieParser('somesuperspecialsecrethere'));
        app.use(express.session({
            key: 'express.sid',
            store: sessionStore
        }));

    });

    app.get('/', function(req, res){
        fs.readFile(__dirname + '/index.html',
            function(err, data) {
                if (err) {
                    res.writeHead(500);
                    return res.end('Error loading index.html');
                }

                res.writeHead(200);
                res.end(data);
                console.log("SessionID from http: "+req.sessionID);

    setTimeout(function () { //this is for simulating a time taking task
               var sock_id = io.sockets.sockets[req.sessionID];

            io.sockets.sockets[sock_id].emit("getmessage","my mmmmmmmmmmmmmessssssage");

        }, 5000);

            });
    });

    GLOBAL.sio = io.listen(server);
    server.listen(3000);

    sio.sockets.on('connection', function (socket) {

        var hs = socket.handshake;

        socket.on('clientMessage', function(data) {
        console.log("Message from client: "+ data.message);

        io.sockets.sockets[hs.sessionID] = socket.id;
      });

    });

    sio.set('authorization', function (data, accept) {
        if (!data.headers.cookie) {
            return accept('Session cookie required.', false);
        }

        data.cookie = cookie.parse(data.headers.cookie);

        data.cookie = parseSignedCookie(data.cookie['express.sid'], 'somesuperspecialsecrethere');

        data.sessionID = data.cookie;

        console.log('Session Id from socket: ' + data.sessionID);

        sessionStore.get(data.sessionID, function(err, session){
            if (err) {
                return accept('Error in session store.', false);
            } else if (!session) {
                return accept('Session not found.', false);
            }
            // success! we're authenticated with a known session.
            data.session = session;
            return accept(null, true);
        });

        <html>
            <head>
                <title>express WebSocket chat</title>
                <script src="http://10.3.0.52:3000/socket.io/socket.io.js"></script>
                <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>

            </head>
            <body>

                <script src="http://10.3.0.52:3000/socket.io/socket.io.js"></script>
                <script type="text/javascript">

                    var sio = io.connect('http://10.3.0.52:3000');

                    sio.socket.on('error', function (reason){
                        console.error('Unable to connect Socket.IO', reason);
                    });

                    sio.on('connect', function (){
                        console.info('successfully established a working connection ');
                    });

 sio.on('getmessage', function(data) {
        console.log(data);

        });
                </script>

                <input type="text" name="message" id="message">
                <input type="button" name="send" id="send" value="Send">
            </body>
        </html> 
```

# javascript - Jquery mobile结束当前（持久）触摸事件

> ID：15135535
> 
> 赞同：0
> 
> 时间：2013-02-28T12:25:47.257
> 
> 标签：javascript, jquery, events, jquery-mobile

我需要确保在`pageRemove`事件启动时。如果用户当前触摸屏幕，则触摸将结束。

由于我不知道是否以及触摸了哪些元素以触发其上的`touchend`事件，因此我尝试了::

```
 $('*').trigger('touchend'); 
```

然而它似乎并没有真正做任何事情，并且触摸事件持续到下一页。

有没有办法确保所有当前的触摸（通常是长触摸）都在`pageRemove`事件中结束？

# android - 每秒检索帧数 - Android / MediaMetadataRetriever

> ID：15135537
> 
> 赞同：2
> 
> 时间：2013-02-28T12:25:49.820
> 
> 标签：android, video, bitmap, metadata, media

我希望使用 MediaMetadataRetriever 在 5 秒视频上每秒检索 10 帧并将它们存储到 Arraylist 中。我对使用 ffmpeg 不感兴趣。

目前我的应用程序正在创建 50 个静止图像 - 每秒间隔 10 个相同的帧，而不是每秒 10 个不同的帧。

```
public class FrameCollector {

MediaMetadataRetriever mmr;

double fps;
double duration;
long counter = 0;
long incrementer;

public FrameCollector(String path, Context context) 
{
    try
    {
    mmr = new MediaMetadataRetriever();
    mmr.setDataSource(path);

    SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(context);
    String fpsString = pref.getString("prefFPS", "10");
    fps = Double.parseDouble(fpsString);
    incrementer = (long) (1000000 / fps);

    String stringDuration = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
    duration = Double.parseDouble(stringDuration) * 1000;
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
}

public ArrayList<Bitmap> getBitmaps() 
{
    try 
    {
        ArrayList<Bitmap> bitFrames = new ArrayList<Bitmap>();

        Bitmap b = mmr.getFrameAtTime(counter);

        while (counter < duration && b != null) 
        {
            bitFrames.add(b);
            counter += incrementer;
            b = mmr.getFrameAtTime(counter);
        }
        return bitFrames;   
    }
    catch (Exception ex) 
    {
        ex.printStackTrace();
        return null;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:38:58.673

根据@Michael的评论

“getFrameAtTime(counter) 是 getFrameAtTime(counter, OPTION_CLOSEST_SYNC) 的包装，这意味着它只会读取关键帧。请尝试改用 getFrameAtTime(counter, OPTION_CLOSEST)”

# php - 保护ajax处理文件。有必要吗？

> ID：15135547
> 
> 赞同：1
> 
> 时间：2013-02-28T12:26:19.253
> 
> 标签：php, ajax

在 register.php 文件中包含用于用户名（电子邮件、密码等）验证的 javascript 代码。

例如，Javascript 包含这样的代码 var url = "_password_confirmation_validator.php";

_password_confirmation_validator.php 从输入表单 (register.php) 中获取值并验证输入。

查看 register.php 源代码的任何人都可以看到服务器上存在文件 _password_confirmation_validator.php

当我直接导航到 _password_confirmation_validator.php 时，我可以看到类似密码为空的消息。

如果在 _password_confirmation_validator.php 我放置标头重定向（如果有人直接导航到文件进行重定向，则 ajax 不起作用）。

如果在 _password_confirmation_validator.php 中放置条件，ajax 也不起作用

```
if ($_POST['register'] ){ 
```

表单输入字段就像输入 onkeyup= （所以 onkeyup ajax 开始验证）。

问题是

1）如果有人直接导航，如何为 _password_confirmation_validator.php 编写一些条件以不显示任何内容？

2）如果有人可以在视图源中看到文件名，是否存在任何安全问题？如果是，有什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:28:49.007

检测 Ajax 标头：

```
if(empty($_SERVER['HTTP_X_REQUESTED_WITH'])) {
  die("");
} 
```

但请注意，专家级的黑客会简单地将此类标头添加到请求中。

另一种方法是在您的页面中放置一个随机代码并将其与请求一起发送，并且每次都重置代码，然后生成一个新代码。

**更新**

最合适的方法是在页面中添加一个额外的随机（基于时间的）参数。或简单地使用验证码/重新验证码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:32:40.130

如果有人直接导航，则无法更改页面，因为服务器无法区分正常请求和 AJAX 请求。黑客可以轻松地操纵请求的标头。

关于您的第二个问题，一个好的规则是永远不要通过 AJAX 发送可能未发布的信息。如果这样做，请考虑使用密码系统和 HTTPS。

# php - 一个 foreach 循环中的两个 PHPSimpleHtmlDom 条件

> ID：15135553
> 
> 赞同：0
> 
> 时间：2013-02-28T12:26:52.187
> 
> 标签：php, parsing, foreach, simple-html-dom

我正在使用 PHPSimpleHTMLDOM 解析器，我想以某种方式实现一个具有两个条件的 foreach 循环。我得到了我想要的标题，但我也想得到适用于那个特定标题的 href。如果我只为 href 编写一个嵌套的 foreach 循环，它会循环太多次并输出许多重复项。这是我的代码：

```
include_once ('simple_html_dom.php');
$html = file_get_html('somehtml.com');

  foreach ($html->find('ul[class=headlines] li') as $return){
    //if I put another foreach here, too many duplicates
    echo $return;
  } 
```

另一个 foreach 循环如下所示：

```
foreach ($html->find('ul[class=headlines] li a') as $href){
  $link = $href->href;
  echo $link;
} 
```

如何将这两个条件放入一个 foreach 循环中，以便链接对应于正确的文章，并且我可以将其传递给另一个 php 文件以对其进行处理？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:15:46.790

假设您有以下 HTML 结构：

```
<ul class="headlines">
    <li><a href="http://google.com">Google</a></li> 
    <li><a href="http://yahoo.com">Yahoo</a></li>   
    <li><a href="http://bing.com">Bing</a></li>
</ul> 
```

然后您必须遍历所有`li`项目并获取与标签对应的第 n 个孩子`a`（在本例中是第一个），如下所示：

```
foreach ($html->find('ul[class=headlines] li') as $return){
    $a = $return->children(0);
    echo 'Link: ' . $a->href . '<br />';
    echo 'Headline: ' . $a->plaintext . '<br />';
} 
```

请注意，您可以在`$a`此处简单地打印出来，而无需单独获取链接和标题。

我建议您使用一些基于[libxml](http://www.xmlsoft.org/)的本机扩展以获得更好的性能，例如[DOM](http://php.net/manual/en/book.dom.php)。您还可以将它与 XPath 结合使用以使事情变得更简单。

# ember.js - 如何在 Ember.js 中访问 find() 结果的长度

> ID：15135556
> 
> 赞同：8
> 
> 时间：2013-02-28T12:27:01.470
> 
> 标签：ember.js, ember-data

# 这个问题和整个问题的答案已经过时了。EMBER 数据发生了很大变化。阅读：http: [//guides.emberjs.com/v1.11.0/models/](http://guides.emberjs.com/v1.11.0/models/)

我有这个小的 Ember 应用程序：

```
window.App = Ember.Application.create();

App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.FixtureAdapter({
    simulateRemoteResponse: false
  })
});

App.Model = DS.Model.extend({
  title: DS.attr('string')
});
App.Model.FIXTURES = [];

App.ready = function() {
  console.dir(App.Model.find().get('length'));
  App.Model.createRecord({id: 1, title: "TEST"});
  console.dir(App.Model.find().get('length'));
  console.dir(App.Model.find(1).get('title'));
}; 
```

我得到了正确的标题，`console.dir(App.Model.find(1).get('title')`但是两个`get('length')`调用都返回 0。我错过了什么？

这是一个（非）工作的 jsbin：http: [//jsbin.com/uxalap/6/edit](http://jsbin.com/uxalap/6/edit)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T13:50:54.187

原因可能是您`get("length")`甚至在加载数据之前就调用了，

基本上，当你这样做时，`App.Model.find()`它会返回一个实例，`RecordArray`但它不会有数据，在后台它会查询数据库并获取数据，现在一旦加载数据，你就会找到实际长度

您可以尝试在属性上添加观察者，`isLoaded`如下所示

```
record = App.store.findQuery(App.Model);
alertCount = function(){
  if(record.isLoaded){
    alert(record.get("length"));
  }
};
Ember.addObserver("isLoaded", record, alertCount); 
```

# sql - SQL中不同计数的乘积之和？

> ID：15135557
> 
> 赞同：1
> 
> 时间：2013-02-28T12:27:04.587
> 
> 标签：sql, sum

假设您有以下两个表 A 和 B：

（注意：我无法进入表格，所以请转置逗号分隔的表格。）

**表 A**

```
pid   cost
1     2
1     2 
2     1 
3     5 
3     5 
3     5
4     10
4     10
5     7 
```

**表 B**

```
pid   perid
1     3
2     3 
3     6 
4     5 
5     1 
```

其中 pid 在两个表中匹配。这是我需要在 SQL 中完成的任务。我需要找到每个 pid 的总成本，这需要关联并按 perid 分组。它可能需要对每个不同的 pid 进行计数。所以得到的答案应该是这样的：

```
perid   cost
1       7
3       5
5       20 
6       15 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:39:50.363

这是东西：

```
select
  b.period,
  sum(cost)
from b
inner join a
  on b.pid = a.pid
group by b.period 
```

和[sqlfiddle](http://sqlfiddle.com/#!3/17b57/7)

# java - vbscript 中 Chr(34) 的 Groovy 等效项

> ID：15135559
> 
> 赞同：1
> 
> 时间：2013-02-28T12:27:06.980
> 
> 标签：java, groovy, casting

如何像在 Java 中使用 (char)34 一样在 groovy 中表示双引号字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:31:25.070

你可以做

```
char c = (char)34 
```

就像使用 Java 一样

# android - 如何将双精度转换为字符串？

> ID：15135560
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:27:12.197
> 
> 标签：android

我有代码：

```
double total = 36183063.0;
String val = String.valueOf(total); 
```

为什么它来了`val="3.6183063E7"`？

而不是`val="36183063"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:33:16.903

试试这个，

```
double total = 36183063.0;
String val = String.valueOf((long)total); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:37:55.730

使用 Double 类提供的 toString(Double d) 方法

如下所示，

```
double total = 36183063.0;
String val = Double.toString(total); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:30:58.630

试试这个 ：

```
Double.toString(val); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:31:54.573

试试这个

```
String str = Double.toString(total); 
```

或者，

```
String str = String.valueOf((long)total); 
```

# android - SlidingMenu 在显示活动之前创建延迟

> ID：15135561
> 
> 赞同：1
> 
> 时间：2013-02-28T12:27:26.010
> 
> 标签：android, performance, slidingmenu

我正在尝试将 SlidingMenu 添加到我的活动中。我的代码如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    informationMenu = new SlidingMenu(this);
    informationMenu.setMode(SlidingMenu.LEFT);
    informationMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
    informationMenu.setTouchModeBehind(SlidingMenu.TOUCHMODE_MARGIN);
    informationMenu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    informationMenu.attachToActivity(this, SlidingMenu.SLIDING_WINDOW);
    informationMenu.setMenu(R.layout.main_info);
    informationMenu.setTouchModeBehind(SlidingMenu.TOUCHMODE_MARGIN);

    informationMenu.setOnOpenListener(new SlidingMenu.OnOpenListener() {
        @Override
        public void onOpen() {
            helpMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE);
        }
    });

    informationMenu.setOnClosedListener(new SlidingMenu.OnClosedListener() {
        @Override
        public void onClosed() {
            helpMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
        }
    });
} 
```

但是在添加这个之后，我经常会在我的活动开始之前看到黑屏 1 或 2 秒。我尝试使用 AsyncTask 来创建菜单，但我没有得到很大的改进。有可能修复它吗？

PS我正在使用这个库：[https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:47:05.990

您是否在每个活动或某些基础/父活动中都有这个？

在我自己的项目中，这种代码只有一次，在 BaseActivity 中。

此外，我只使用这个；

```
 // set the Behind View
            setBehindContentView(R.layout.menu_frame);
            FragmentTransaction t = this.getSupportFragmentManager().beginTransaction();
            mFrag = new MenuListFragment();
            t.replace(R.id.menu_frame, mFrag);
            t.commit();

            // Customize the SlidingMenu
            SlidingMenu sm = getSlidingMenu();
            sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
            sm.setShadowWidthRes(R.dimen.shadow_width);
            sm.setShadowDrawable(R.drawable.shadow);
            sm.setBehindScrollScale(0.25f);
            sm.setFadeDegree(0.25f); 
```

您可以在[https://code.google.com/p/my-curriculum-vitae/source/checkout](https://code.google.com/p/my-curriculum-vitae/source/checkout)看到我是如何做到的，自从我从事此工作以来已经有一段时间了，所以不再 100% 确定了。

# ios - IPA 文件未在 iOS 中获取设备令牌

> ID：15135563
> 
> 赞同：0
> 
> 时间：2013-02-28T12:27:31.923
> 
> 标签：ios, xcode, devicetoken

我创建了启用推送通知的配置文件。在设备中安装 IPA 文件后，应用程序未获取设备令牌。有谁知道为什么这个问题出现在我的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:23:05.860

在您的应用委托的 didFinishLaunchingWithOptions 添加以下行

```
[[UIApplication sharedApplication] 

   registerForRemoteNotificationTypes:UIRemoteNotificationTypeAlert]; 
```

然后将委托功能实现为

```
 - (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
  {
       NSString *str = [[NSString stringWithFormat:@"%@",deviceToken] stringByReplacingOccurrencesOfString:@"<" withString:@""];
       str=[str stringByReplacingOccurrencesOfString:@">" withString:@""];
       str=[str stringByReplacingOccurrencesOfString:@" " withString:@""];

    //str is your device token and can used now.
   } 
```

# hibernate - 空闲事务 Hibernate / PostgreSQL

> ID：15135564
> 
> 赞同：2
> 
> 时间：2013-02-28T12:27:32.450
> 
> 标签：hibernate, jsp, postgresql, session

我使用 Hibernate 3 和 postgres 开发的 Web 应用程序出现问题。问题是执行和提交的每个信号查询都不会释放池中的连接（限制 = 100）。在一个操作（SELECT、INSERT 等）之后，我对 DB 做了一些查询，得到了结果：

询问：

```
SELECT pid, query, state FROM pg_stat_activity; 
```

```
5436;"SELECT...";"idle" <- 没关系
6776;"SELECT..." ;active" <- 没关系
5324;“提交”;“空闲”    
6840;“提交”;“空闲”    
6276;“提交”;“空闲”    
4804;“提交”;“空闲”    
5812;“提交”;“空闲”    
2608;“提交”;“空闲”    
2576;“提交”;“空闲”    
3896;“提交”;“空闲”    
4660;“提交”;“空闲”    
692;“提交”;“空闲”

```

如您所见，问题是提交的事务，它们留在连接池中并阻止它。接下来的操作会导致它不断增长，当池过量时我无法连接到数据库。我知道有一种方法可以手动删除它们（SELECT pg_terminate_backend()），但我更喜欢 Hibernate 中的解决方案。现在放开我的代码，也许它会清除。

这是我的 DBManager（执行查询和管理 DB 的类）中的方法示例：

```
public List getGroups()
{
    Session session = sessionFactory.openSession();
    List<Group> groups = new ArrayList<Group>();

    try
    {
        session.beginTransaction();
        groups = session.createQuery( "from Group WHERE locked='FALSE' ORDER BY startHours" ).list();
        session.getTransaction().commit();

    }
    catch ( Exception e )
    {
        // logs
    }
    finally
    {
        try
        {
            session.close();
        }
        catch ( Exception e )
        {
        }
    }

    return groups;
} 
```

任何其他方法都以相同的方式完成。我的会话工厂是在类级别定义的：

```
 public class DBManager
  {

   SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();

    public DBManager()
    {

    }

     // METHODS HERE
  } 
```

请告诉我我做错了什么...会话是通过打开和关闭的`try{}catch{}finally{}`。似乎在提交事务之后没有正确关闭。

这是我的hibernate.cfg：

```
 <!-- Database connection settings -->
    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/szkola_plywania_test</property>
    <property name="hibernate.connection.username">postgres</property>
    <property name="hibernate.connection.password">postgres</property>

    <!-- JDBC connection pool(use the built-in) -->
    <property name="hibernate.connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>

    <property name="hibernate.connection.release_mode">after_statement</property>    

    <!-- Disable the second-level cache -->
    <property name="hibernate.cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

    <!-- Echo all executed SQL to stdout -->
    <property name="hibernate.show_sql">true</property> <!-- wynik pokazywany w konsoli -->

    <!-- Drop and re-create the database schema on startup -->
    <property name="hibernate.hbm2ddl.auto">update</property> <!-- create - nadpisywanie, update - dopisywanie -->

    <property name="hibernate.show_sql">true</property>

 <property name="hibernate.c3p0.acquire_increment">1</property>
    <property name="hibernate.c3p0.idle_test_period">100</property> <!-- seconds --> 
    <property name="hibernate.c3p0.max_size">100</property> 
    <property name="hibernate.c3p0.max_statements">0</property> 
    <property name="hibernate.c3p0.min_size">10</property> 
    <property name="hibernate.c3p0.timeout">100</property> <!-- seconds -->

    <!-- Names the annotated entity class -->
    <mapping class="com.school.hibernate.dto.User" />
    <mapping class="com.school.hibernate.dto.MailConfig" />
    <mapping class="com.school.hibernate.dto.Group" />
    <mapping class="com.school.hibernate.dto.Child" />
    <mapping class="com.school.hibernate.dto.Term" />
    <mapping class="com.school.hibernate.dto.Counter" />
    <mapping class="com.school.hibernate.dto.Invoice" />
    <mapping class="com.school.hibernate.dto.AgeGroup" />
    <mapping class="com.school.hibernate.dto.GroupTerm" />
    <mapping class="com.school.hibernate.dto.Instructor" />
    <mapping class="com.school.hibernate.dto.PassInstance" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:41:36.467

`idle`不是问题。它只是一个什么都不做的开放连接。

`idle in transaction`将是一个问题，因为这些连接正在积极地保持对数据的“锁定”（例如，这可能会阻止 auto-vacuum 正常工作）。

您显示的 pg_stat_activity 的结果并不表明有任何问题。

> *如您所见，问题是提交的事务，它们留在连接池中并阻止它*

不，他们不会“阻止它”（至少你没有表现出任何迹象）。池只是让它们保持打开状态——这就是连接池的作用。

打开与 DBMS 的连接是一项非常昂贵的操作，因此最好将它们保持打开以供重复使用。

如果您想减少打开连接的数量（无论出于何种原因），那么您需要配置您的连接池来这样做（例如通过降低“空闲”超时）。您应该向我们展示您的连接池的配置，以确定一切是否正常。

# c# - 如何检查另一个文件c#中的文件内容？

> ID：15135568
> 
> 赞同：2
> 
> 时间：2013-02-28T12:27:33.807
> 
> 标签：c#, .net, visual-studio-2010, file, io

我知道使用 StreamReader 读写文件的基础知识不知道比较！

![在此处输入图像描述](../Images/6918f6c095516dca9eeb00b9dad39a19.png)

正如您在上面的图片中看到的那样，我有两个文件错误文件和存档文件。我需要根据从（9 到 11）的位置比较第二列，例如（111）在文本文件中的 9 位置与第二存档文件中的列在文本文件中的相同位置（9 到 11）。

如果错误文件中的代码存在于存档文件中，则将整个记录复制到新文件。

我需要使用 C# 执行此活动吗？

> 编辑：文件是 .txt 但分隔符不一样。标签的数量有时是 2 或 3 但现在位置固定为 9 到 11，但将来可能会像 14 到 16 一样改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:47:33.790

如果格式严格，一种有效且简洁的方法应该有效：

```
var positions1 = new[] { 9, 10, 11 };
var positions2 = new[] { 14, 15, 16 };
var f1Lines = File.ReadLines(path1)
    .Select((l, i) => new { Line = l, Cols = l.Split('\t'), Num = i + 1 })
    .Where(x => x.Cols.Length >= 2);
var f2Lines = File.ReadLines(path2)
    .Select((l, i) => new { Line = l, Cols = l.Split('\t'), Num = i + 1 })
    .Where(x => x.Cols.Length >= 2);
var toBeArchived = from i in positions1
                   join f1 in f1Lines on i equals f1.Num
                   join f2 in f2Lines on f1.Cols[1] equals f2.Cols[1]
                   where positions2.Contains(f2.Num)
                   select new { f1, f2 };
foreach (var toArchive in toBeArchived)
{ 
    // i'm not sure what you want to do with it finally
    // use File.WriteAllLines if you want to create the merged files
} 
```

当第二列相等时，LINQ 查询将连接行上的两个文件，并且仅连接第 9、10 和 11 行。请注意，您需要添加`using System.IO`和`using System.Linq;`。

# ios - iPhone 文件浏览器如何查看我的应用程序文件，以及如何停止它

> ID：15135571
> 
> 赞同：2
> 
> 时间：2013-02-28T12:27:57.607
> 
> 标签：ios, cocoa

我知道在非越狱设备上，iPhone 应用程序是沙盒的。我认为这意味着它的文件将被隐藏。那么诸如 iExplorer ( [http://www.macroplant.com/iexplorer/](http://www.macroplant.com/iexplorer/) ) 之类的应用程序是如何查看我的应用程序文件的呢？有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:31:00.883

沙盒仅意味着您的应用程序无法访问其“沙盒”之外的任何文件，因此您的应用程序无法访问其他应用程序的文件，但您的应用程序的文件并未隐藏。

你没有办法阻止这种情况。如果您有存储在设备上的敏感数据，则需要对其进行加密。

**更新：**
如果你需要保护自定义字体或类似的东西，你应该看看这个关于加密资源文件的指南：http: [//aptogo.co.uk/2010/07/protecting-resources/](http://aptogo.co.uk/2010/07/protecting-resources/)

# java - 是否可以在不生成查询类型的情况下使用 Querydsl？

> ID：15135572
> 
> 赞同：6
> 
> 时间：2013-02-28T12:27:58.540
> 
> 标签：java, nosql, persistence, jpa-2.0, querydsl

例如，无需生成元模型即可使用 JPA Criteria API。类型安全丢失了，但我可以在没有数据模型的先验知识的情况下仅在运行时使用反射来创建查询。我想以同样的方式使用 Querydsl。我不关心类型安全，因为无论如何我都不知道数据模型。

在我最近的项目中，我想使用 Querydsl 主要是因为它构成了持久性的另一层。所以我希望可以在*JPA、JDO、JDBC、Lucene、Hibernate Search、MongoDB、Collections 和 RDFBean*上使用相同的查询。

或者是否有任何可以以所述方式使用的 Querydsl 替代方案？

由于 NoSQL 数据库正在兴起。是否有任何其他框架在各种持久性提供程序上构成类似的抽象层？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T15:34:31.997

有两种方法可以在没有生成元模型的情况下使用 Querydsl。

第一种方法是手动构建表达式 [http://www.querydsl.com/static/querydsl/2.9.0/reference/html/ch03.html#d0e1379](http://www.querydsl.com/static/querydsl/2.9.0/reference/html/ch03.html#d0e1379)

第二个是使用Querydsl的别名功能 [http://www.querydsl.com/static/querydsl/2.9.0/reference/html/ch02s07.html](http://www.querydsl.com/static/querydsl/2.9.0/reference/html/ch02s07.html)

Querydsl 查询共享通用接口并且看起来很相似，但是您不能直接在不同的持久性类型上使用相同的查询，因为 Querydsl 不提供跨模块的任何查询抽象。

查询的各个部分可以共享，例如谓词或预测，但查询与某个模块相关联。

您可以做的是坚持使用常见的持久性抽象 JPA 或 JDO 之一，并通过它们使用 RDBMS、OODB 和 NoSQL 引擎。

# javascript - Jsp 测验保存响应临时

> ID：15135576
> 
> 赞同：2
> 
> 时间：2013-02-28T12:28:11.640
> 
> 标签：javascript, jsp, servlets

我正在开发 jsp 中的测验评估系统。我想存储用户响应临时。（将响应保存为他/她单击特定单选按钮）。我如何存储这些响应。n 什么是安全且易于使用的？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:34:02.073

当然可以保留在数据库中。将意味着很多数据库更新，但如果同时使用的用户数量不是很大，那就没问题了。在后端使用 ejb 或其他 txn mgt 和 db 池。

优点是即使用户没有完成您也有部分响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:53:17.113

您可以使用本地 cookie。使用 html JavaScript。然后在您的标题页中添加一个功能（我希望您有一个标题包括 jsp 或一个显示每个问题的主 jsp）

无论哪种方式->每个页面上都会有通用的java脚本来保存、删除和获取cookie，然后初始化控件。

另一种方法是使用会话，但这会增加服务器上的 RAM 使用量，但它更安全。但是在这种情况下，当您只想保存多页表单的状态时，我会在客户端上使用 cookie，然后在最终提交表单时销毁它们（cookie 的生命周期可以是这个会话，您可以在最后提交）。

你需要 cookie 的代码吗？可以通过搜索[示例得到](https://www.google.co.in/search?q=html+javascript+cookie+read+write+delete&)

一旦用户导航回页面，该问题的 cookie 将告诉您选择哪个单选按钮。要选择一个特定的按钮，这个[搜索将有助于](https://www.google.co.in/search?q=html+javascript+set+radio+button)它的行：document.getElementById('q1ans1').checked = false; document.getElementById('q1ans2').checked = true;

如果您想要一个循环/数据驱动的方法，可以使用 java 脚本 eval 来获取每个单选按钮，如下所示：obj1 = eval("q" + questionNumber + "ans" + ansLoop) obj1.checked = cookieValueWithDefault;

# java - JavaFX 2.2：缩小舞台时按钮脱离 Vbox 布局

> ID：15135589
> 
> 赞同：1
> 
> 时间：2013-02-28T12:28:42.913
> 
> 标签：java, javafx-2, javafx

我正在用 javafx 构建一个示例 CRUD 应用程序，这是我的 FXML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<BorderPane fx:id="root" depthTest="ENABLE"  maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity"
                        xmlns:fx="http://javafx.com/fxml" fx:controller="org.tarrsalah.persona.gui.MainViewPresenter">

    <center>
        <TableView fx:id="table" minHeight="500.0" minWidth="600.0" prefHeight="-1.0" prefWidth="-1.0">
            <columns>
                <TableColumn prefWidth="75.0" text="name" fx:id="name" />
                <TableColumn prefWidth="75.0" text="last name" fx:id="lastname" />
            </columns>
            <BorderPane.margin>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </BorderPane.margin>
        </TableView>
    </center>

    <right>
        <VBox VBox.vgrow="ALWAYS" fillWidth="true"   spacing="10.0" BorderPane.alignment="TOP_LEFT" minWidth="200" >
            <children >
                <Button fx:id="newP"  prefWidth="100.0" minWidth="80"  text="New" VBox.vgrow="NEVER" />
                <Button fx:id="alter"  prefWidth="100.0" minWidth="80" text="Alter" VBox.vgrow="NEVER" />
                <Button fx:id="remove" prefWidth="100.0" minWidth="80" text="remove" VBox.vgrow="NEVER" />
            </children>
            <padding>
                <Insets left="20.0" right="20.0" top="10.0" />
            </padding>      
        </VBox>
    </right>
</BorderPane> 
```

如您所见，当尝试调整舞台大小时，所有按钮都超出了 Vbox 布局

![收缩前](../Images/102ee460aaccaffd0c20ec475b1085cd.png) ![收缩后](../Images/a10b96897cee6c518983e80fd2933057.png)

如何防止 Vbox 窗格缩小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:33:23.367

此行为是由 TableView 上的最小宽度约束引起的。

```
<TableView fx:id="table" minHeight="500.0" minWidth="600.0" prefHeight="-1.0" prefWidth="-1.0"> 
```

您应该删除该属性`minWidth="600.0"`以允许将`TableView`其宽度减小到 600 像素以下。

# ios - SQLCipher BLOB 性能

> ID：15135595
> 
> 赞同：0
> 
> 时间：2013-02-28T12:29:09.943
> 
> 标签：ios, sqlite, blob

我目前正在使用 SQLCipher 作为加密在 iOS 6 下运行数据库。不幸的是，我必须在数据库中存储一些二进制数据（电影、大型 PDF ......）。现在我创建了一个只有两列的表：id 和 blob 来存储这些数据。但是添加到这个表中的条目越多，查询就会变得越慢。有没有办法提高速度？每个文件创建一个表可能会提高性能吗？

提前致谢

# java - 将 Java 转换为 Perl (BigInteger)

> ID：15135603
> 
> 赞同：1
> 
> 时间：2013-02-28T12:30:00.660
> 
> 标签：java, perl, biginteger

我正在尝试将 java 代码转换为 perl 代码。

```
BigInteger(byte[] val) 
```

[BigInteger](https://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#BigInteger(byte[])%22%20target=%22_blank)
这是Java BigInteger 构造函数。

Perl Math::BigInt 没有相同的构造函数。
但我应该让它和相同的 Java BigInteger 构造函数。

我该怎么做以下两个代码相同的输出。
简单吗？还是很困难？
我不知道..

**爪哇**

```
import java.security.MessageDigest; 
import java.math.BigInteger; 

public class Hash 
{ 
    public static void main( String[] args ) throws Exception 
    { 
        MessageDigest md5 = MessageDigest.getInstance("MD5"); 
        String plain = "abcd1234"; 
        BigInteger digest = new BigInteger(md5.digest(plain.getBytes("UTF-8"))); 

        System.out.println( digest.abs() ); 
    } 
} 
```

**Perl**

```
use Digest::MD5 'md5_hex'; 
use Math::BigInt; 

my $plain = "abcd1234"; 
my $digest = Math::BigInt::->from_hex(md5_hex $plain); 
print $digest, "\n"; 
```

# matlab - 使用 str2num 提供表示时间的单独文件

> ID：15135604
> 
> 赞同：0
> 
> 时间：2013-02-28T12:30:03.897
> 
> 标签：matlab

我的数据标题为 ABCDE_D20110507T11522323 这表示数据是在 2011 年 5 月 7 日 ta 时间（T 之后）11:52:23:23 收集的。使用这个脚本我应该能够提取这些信息

```
fnames=dir('ABCDE*.mat') 
hour=str2num(fnames(1).data(11:18)) 
```

`(11:18)`代表字符号我做错了什么？我应该在脚本中指定我想要的格式，例如 (HH,MM,SS) 吗？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T14:57:49.097

您可以从文件名中获取完整日期，然后提取小时数。

```
fnames = dir('ABCDE*.mat');
for idx = 1:size(fnames, 1)
    str(idx,:) = fnames(idx).name(8:22)
    dateVector(idx,:) = datevec(str(idx,:), 'yyyymmddTHHMMSS') % Convert the string to date vector
    hrs(idx,:) = dateVector(idx,4:6)
end 
```

假设您的目录中有两个文件。您的变量将如下所示：

```
str =

20130228T171052
20130228T143122

dateVector =

        2013           2          28          17          10          52
        2013           2          28          14          31          22

hrs =

    17    10    52
    14    31    22 
```

`hrs`将是小时、分钟和秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:59:20.913

正如丹所指出的，您需要引用`name`结构数组的字段`fnames`（而不是`data`无效的）。

```
hour = str2double( fname(1).name(17:18) ); 
```

# android - 如何使用“android update”命令添加“android.library=true”

> ID：15135605
> 
> 赞同：5
> 
> 时间：2013-02-28T12:30:04.077
> 
> 标签：android, project, build-automation, android-build

我想从命令行构建一个 Android 项目，并希望将`android.library=true`标志添加到 project.properties。我也想用`android`来自 sdk 的命令来做这件事，而不是手动将它添加到文件中，因为文件名和属性名可能会改变。

该命令`android update lib-project -p PATH`不再添加此标志。

该命令`android create lib-project ...`确实“添加”了这个标志，但会覆盖一些文件，如字符串资源

所以我的问题是：有可能使用该`android`工具制作一个将这个 android.library 标志设置为 true 的 project.properties，并且不做更多事情吗？

我不能在 lib-project 中使用某些标志`android update project`和旁边有什么区别？`android update lib-project`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:31:50.797

来自[http://developer.android.com/tools/projects/projects-cmdline.html#UpdatingLibraryProject](http://developer.android.com/tools/projects/projects-cmdline.html#UpdatingLibraryProject)

使用 android update lib-project 您只能更新构建目标和路径。检查您的命令这是更新 lib-project 的语法

android update lib-project \ --target \ --path path/to/your/project

您正在尝试仅使用 -p 进行更新

回答您的第二个问题，命令名称本身告诉答案“android update project”用于更新不是库项目而是普通项目的项目。而“android update lib-project”用于更新库项目。

# c++ - Qt Painter 不更新

> ID：15135608
> 
> 赞同：0
> 
> 时间：2013-02-28T12:30:08.187
> 
> 标签：c++, qt

我需要绘制简单的矩形，但是当我调用 update() 函数时它什么也没做。这是我的代码：

```
...//this is called when button is pressed, when application loads nothing should be drawn.

    draw = true;
    update();
}

void MainWindow::paintEvent(QPaintEvent *e){
    QPainter painter(this);
    QLinearGradient lg(QPoint(20, 80), QPoint(215, 390));
    lg.setColorAt(0, Qt::white);
    lg.setColorAt(1, Qt::blue);
    QBrush brush(lg);
    painter.setPen(Qt::black);
    painter.setBrush(brush);
    if(draw == true){
    painter.drawRect(20, 80, 195, 300);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:37:17.717

你应该尝试添加

```
e->accept() 
```

在paintEvent 函数的末尾。

# android - 有没有办法在 Android 中收听音频播放的速度/bpm？

> ID：15135612
> 
> 赞同：3
> 
> 时间：2013-02-28T12:30:35.507
> 
> 标签：android, media-player, audiotrack, audio-capture

我正在构建的 Android 应用程序必须**听音乐**（在手机上播放或由设备的麦克风拾取），然后**根据音乐做一些事情**。

所以我想做的是**听音乐播放的速度/bpm，**然后用我得到的影响应用程序背景颜色的东西做一些**数学运算。**

我需要类似于[Malcolm McRoberts 在这里要求的东西](https://stackoverflow.com/questions/4575357/need-android-equivalent-of-audioinputstream)——分析音乐，然后做点什么。他说他能够使用[Echo Nest](http://developer.echonest.com/docs/v4/)来实现他的目标，但他还没有解释是如何实现的。

[我需要与elucid135 在这里要求的](https://stackoverflow.com/questions/8235575/get-music-tempo-or-bpm)非常相似的东西——听每分钟的节拍（bpm），然后根据它做动画。但我的平台非常不同。

任何**安卓**的想法？

也许了解 Android [AudioTrack](http://developer.android.com/reference/android/media/AudioTrack.html#getPlaybackRate%28%29)、[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)或[Audio Capture](http://developer.android.com/guide/topics/media/audio-capture.html)的人可以提供一些意见。

**编辑：**

似乎没有人明白我的要求，所以我将尝试改写：

使用 Android，我想通过设备的麦克风录制音乐。然后我想分析已经录制的内容以找到录制的音乐的节拍。基于那个节拍，我希望在应用程序中发生一些事情。

我知道如何录制音乐。我正在寻找的是关于如何识别音乐节拍的建议。

希望清除它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:38:12.317

*“必须听音乐”*
... *“在手机上播放”*
不行，Android 不支持。

... *“或被设备的麦克风拾取”*
在某些情况下会起作用（即在低噪音环境中使用扬声器时），但质量会很差。

另一种选择是使用[Visualizer](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)类从会话 0（全局输出混合）中获取音频数据。音频的质量会很差，但对于 BPM 计算来说可能已经足够了，即使将音乐路由到耳机也能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-21T16:14:22.753

我正在研究类似的问题。尝试查看 TarsosDSP[链接](https://github.com/JorenSix/TarsosDSP)。它是一个基于 java 的音频信号处理库，它提供了可以识别节拍的类，然后可以用来确定节奏，它适用于 Android。

# android - 如何获取Gallery2的专辑宽度和高度

> ID：15135616
> 
> 赞同：1
> 
> 时间：2013-02-28T12:30:44.633
> 
> 标签：android, gallery

如下图。

*   点击**Gallery2**，然后显示相册。如下图

![图片](../Images/e04076b39183311c4390906520e3cf63.png)

我怎样才能得到这张专辑的**宽度**和**高度** （这个的中心）？

*   点击**相册**，然后显示详细信息，如下图

![图片2](../Images/62aa586aefe4346193367d748f13ef4e.png)

问题：

我怎样才能得到那些专辑的**宽度**和**高度**（每个 7 图像）。

# php - phpMyAdmin 截断错误消息

> ID：15135618
> 
> 赞同：2
> 
> 时间：2013-02-28T12:30:52.080
> 
> 标签：php, mysql, phpmyadmin

当我使用 phpMyAdmin 执行查询时，返回的任何错误都缺少错误描述。返回的错误只是：

```
#1064 - 
```

![phpMyAdmin 缺少错误描述](../Images/9365f102962e2dd1e556779cdb4199fb.png)

...而不是预期的：

```
#1064 - You have an error in your SQL syntax; check the manual... 
```

我的 PHP 代码使用`mysql_error()`.

[我花了 2 天时间在 Google 和 SO 上寻找解决方案的答案，但找不到。因此，以供我自己和其他任何寻找此问题答案的人将来参考，我将在这里回答。如果您有更好的解决方案，请添加您的答案。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:30:52.080

我最终发现了一个相关的问题[PHPMyadmin does not show mysql error messages](https://stackoverflow.com/questions/4735924/phpmyadmin-does-not-show-mysql-error-messages)。我会说我不明白如何用这个答案解决问题。我确实注意到@anomie 指出：

> 如果 mysql_error 有效，那么问题似乎更可能出`PMA_DBI_convert_message`在 library/database_interface.lib.php中 phpMyAdmin 的字符集转换函数中

我在 libraries/database_interface.lib.php 中找到了这部分，它设置了编码：

```
function PMA_DBI_convert_message($message)
{
    // latin always last!
    $encodings = array(
        'japanese'      => 'EUC-JP', //'ujis',
        'japanese-sjis' => 'Shift-JIS', //'sjis',
        'korean'        => 'EUC-KR', //'euckr',
        'russian'       => 'KOI8-R', //'koi8r',
        'ukrainian'     => 'KOI8-U', //'koi8u',
        'greek'         => 'ISO-8859-7', //'greek',
        'serbian'       => 'CP1250', //'cp1250',
        'estonian'      => 'ISO-8859-13', //'latin7',
        'slovak'        => 'ISO-8859-2', //'latin2',
        'czech'         => 'ISO-8859-2', //'latin2',
        'hungarian'     => 'ISO-8859-2', //'latin2',
        'polish'        => 'ISO-8859-2', //'latin2',
        'romanian'      => 'ISO-8859-2', //'latin2',
        'spanish'       => 'CP1252', //'latin1',
        'swedish'       => 'CP1252', //'latin1',
        'italian'       => 'CP1252', //'latin1',
        'norwegian-ny'  => 'CP1252', //'latin1',
        'norwegian'     => 'CP1252', //'latin1',
        'portuguese'    => 'CP1252', //'latin1',
        'danish'        => 'CP1252', //'latin1',
        'dutch'         => 'CP1252', //'latin1',
        'english'       => 'CP1252', //'latin1',
        'french'        => 'CP1252', //'latin1',
        'german'        => 'CP1252', //'latin1',
    ); 
```

我将英语行更改为`'english' => 'UTF-8',`现在可以正确显示完整的错误描述。

我不确定是否还有其他编码问题可能导致其他功能丢失文本，但这至少解决了我的问题。

# vba - 打开文件夹中的每个文件并使用 VBA 分隔数据

> ID：15135637
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:31:47.413
> 
> 标签：vba, excel

我正在寻找一个 excel 代码，它可以将文件夹中的每个文件（扩展名不同 - 它们具有日期扩展名）作为文本打开并分隔它。在我想使用这些表之后。

我实际上试图从这里获取一些代码，但其中大多数是用于 xls 或没有分隔符的。

谁能给我一个骨架代码我怎么能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:47:43.670

此代码将遍历指定文件夹中的文件（它会打开一个对话框来选择文件夹）

```
Dim sPath As String
Dim sFil As String
Dim FolderPath As String
   Dim diaFolder As FileDialog

   ' Open the file dialog
   Set diaFolder = Application.FileDialog(msoFileDialogFolderPicker)
    diaFolder.AllowMultiSelect = False
    diaFolder.Show
    FolderPath = diaFolder.SelectedItems(1)

     ' Cycle through spreadsheets in selected folder

sPath = FolderPath & "\" 'location of files

sFil = Dir(sPath & "*.xls") 'change or add formats
Do While sFil <> "" 'will start LOOP until all files in folder sPath have been looped            through

Set oWbk = Workbooks.Open(sPath & "\" & sFil) 'opens the file
' do something

oWbk.Close True
sFil = Dir

Loop 
```

希望这能让你开始。

# c++ - 命令行参数

> ID：15135641
> 
> 赞同：1
> 
> 时间：2013-02-28T12:32:02.513
> 
> 标签：c++, arguments, main, argv, argc

我知道该`main`函数可以接受两个参数：`int argc`和`char* argv[]`. 这是有据可查的。然而，该`main`函数也可以接受第三个参数。有谁知道这个论点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:33:23.203

它是环境变量，与 normal 具有相同的类型`argv`。虽然它不是 C++ 标准的一部分，但可能仍然适用于某些系统。

它来自较旧的 UNIX 系统，环境变量通常是这样传递的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T12:37:33.990

该函数`main`在 Mac OS 上也可能有第四个参数，其形式`char **apple`为“包含任意 OS 提供的信息”。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Main_function#C_and_C.2B.2B](http://en.wikipedia.org/wiki/Main_function#C_and_C.2B.2B)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T13:02:28.873

只有两种形式`main`需要支持，并且可以移植到所有平台。但是实现可以添加它想要的任何其他形式：`int main( double )`例如（尽管我从未听说过使用它的实现）是合法的，就像`int main( char const* arg0... )`. 在实践中，“经典”Unix 将支持 `int main( int argc, char** argv, char** environ )`; 这 *不是*Posix 所要求的，并且可能有一些 Unix 不支持它。在 Unix 世界之外，许多早期的 C 实现试图看起来像 Unix，因此也可能支持这一点（今天更多是出于向后兼容性的原因，而不是看起来像 Unix）。

然而，这不是你可以指望的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:35:15.213

您可以通过`char *env[]`，但不必像这样命名它，以便传递一组不同的环境变量。您可以更改执行特定进程的环境。

看[这篇](http://en.wikipedia.org/wiki/Main_function)文章，有解释。

# javascript - 使用 onblur/onfocus 创建字段占位符

> ID：15135645
> 
> 赞同：0
> 
> 时间：2013-02-28T12:32:32.827
> 
> 标签：javascript, forms

我正在尝试编写一个小脚本来充当表单字段占位符，以覆盖通常缺少的 IE。新的 javascript 所以我真的很感激一点帮助。我不确定我要去哪里错了......

```
function replacer(){

    var infoDef = document.getElementById("info").defaultValue;
    var info = document.getElementById("info");

    info.onblur = changevalue;
    info.onfocus = changevalue;

        function changevalue()
            if (info.value = infoDef) {
                info.value = '';
            }

            else {
                info.value = infoDef;
            }
        }
} 
```

和 HTML：

```
<textarea name="info" id="info">Default text...</textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:44:17.897

找到 defaultValue 是一个好的开始，但代码确实需要一些更改才能正常工作。尝试这样的事情：

**HTML：**

```
<textarea id="txtarea">Default value...</textarea> 
```

**JavaScript：**

```
var txtarea=document.getElementById("txtarea");
txtarea.onfocus=function() {
    if (txtarea.value==txtarea.defaultValue) txtarea.value="";
}
txtarea.onblur=function() {
    if (txtarea.value=="") txtarea.value=txtarea.defaultValue;
} 
```

这是一个经过测试和工作的[jsFiddle](http://jsfiddle.net/Hv5FG/)。不得不说，如果不是IE，`placeholder`会容易得多。

# c# - C# 等待回调的句柄

> ID：15135653
> 
> 赞同：0
> 
> 时间：2013-02-28T12:33:02.983
> 
> 标签：c#, asp.net, methods, callback, waithandle

我的一些方法有问题，我认为 WaitHandle 是解决方案。

我通过 API 到 Ticketsystem 创建一个事件。

```
private void create_Incident(string computer_idn, string swidn_choice, 
string swName_choice, string CI_Number, String windows_user)
{
    string msg_id = "" + computer_idn + "_" + swidn_choice + "";
    string username = "BISS";

    hajas211ilt3.ILTISAPI api = new hajas211ilt3.ILTISAPI();
    api.BeginInsertIncident(username, "", msg_id, "", "", "2857", 
    "BISS - Software Deployment", "", "", "NOT DETERMINED",
    "", "", "", "", "", "", "5 - BAU", "3 - BAU", "", 
    "Interface", "", "", "", "", "", "", 
    delegate(IAsyncResult r) 
    { InsertIncidentCallback(api, r, username, msg_id); }, null);

} 
```

此方法在 create_Incident 方法中作为回调调用。

```
private void InsertIncidentCallback(server3.ILTISAPI api, IAsyncResult result,
 string username, string msg_id)
{
    api.EndInsertIncident(result, out message);
} 
```

我需要 if 中的消息，但我需要安全性，即有消息。所以我必须等待 InsertIncidentCallback 和消息。

在另一种方法中，我问，如果消息正常：

```
private void checkIncident(string omputer_idn, string swidn_choice, 
                           string swName_choice, string CI_Number, 
string windows_user)
    {
        if (message == null)
        {
            string responseXML;
            api.REMEDY_ReadResponseXML(username, out responseXML, out msg_id);
            XDocument doc = XDocument.Parse(responseXML);
            inquiryId = (string)doc.Root.Element("inquiry_id");

            if (inquiryId == null || inquiryId == "")
            {
                information_text.Text = ".....";
            }
            else
            {
                information_remedyID.Visible = true;
                information_remedyID.Text = inquiryId;
                create_LanDesk(computer_idn, swidn_choice, 
                swName_choice, inquiryId);
            }
        }
        else
        {
            information_text.Visible = true;
            information_text.Text = "....";
        }
    } 
```

如何实现回调的 WaitHandle？在这种情况下，WaitHandle 是正确的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:41:30.680

在您的 AppPool 线程上使用 WaitHandle，从而导致它们无限期地等待将很快使您的服务器瘫痪。

不要这样做。

您可以在网络上使用多种替代方法来解决此问题。

当您发送此回复时，您可以向用户显示一条消息“处理中”。

当您收到响应存储该异步调用的结果时，您可以使用[SignalR](http://signalr.net/)之类的框架将其推送给用户。

或者，您可以将结果存储在 Session 变量中，并使用 UpdatePanel 在间隔后刷新和显示状态。

# android - 难倒的 Android 通知不是唯一的

> ID：15135654
> 
> 赞同：0
> 
> 时间：2013-02-28T12:33:05.877
> 
> 标签：android, android-intent, handler, android-notifications

因此，我已经尝试了所有我知道的如何在 Android 中制作独特通知的方法，并且我在另一个应用程序中使用了它，但在处理程序中却没有。我基本上有这个：

```
NotificationManager nManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
Notification n = new Notification();

// Create the notification
Notification notification = new Notification(R.drawable.ic_launcher, "No GPS!", System.currentTimeMillis());
Intent intent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
intent.setAction("actionstring" + System.currentTimeMillis());
PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), msg.arg1, intent,0);

notification.setLatestEventInfo(getApplicationContext(),
Integer.toString(msg.arg1), mString, pendingIntent);

notification.flags = Notification.FLAG_AUTO_CANCEL;
((NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE)).notify(0, notification);

// Give it an ID
nManager.notify(msg.arg1, n); 
```

但它不会生成唯一的通知，它们会一直被覆盖。我尝试使用 msg.arg1 来控制唯一性，但这似乎没有任何想法？

# java - 混合类型的数学计算

> ID：15135655
> 
> 赞同：0
> 
> 时间：2013-02-28T12:33:07.583
> 
> 标签：java, math, casting

我发现自己经常写这样的东西：

```
int part = 7;
int whole = 10;
...

int percentage = (int) (100.0 * (double) part/ (double) whole); 
```

有没有办法将强制转换的数量减少到最低限度（而不实际修改变量的原始类型......）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T12:34:57.060

有问题的代码相当于：

```
int percentage = (int) (100.0 * part/ whole); 
```

对双参数的算术运算给出双精度结果，因此`part`并`whole`自动转换为双精度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:57:46.457

有问题的代码相当于：

```
int percentage = 100 * part / whole; 
```

*由于 double 到 int 的强制转换和整数除法的工作原理*，没有任何浮点运算。*（如果最终你还是把小数部分扔掉了，为什么还要计算它。）*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:36:09.770

您不需要强制转换，它会在您的操作中自动强制转换`100.0*part/whole`给您一个双精度值，只需在整数中强制转换一次，这将是最终值

```
int percentage = (int) (100.0 * part/ whole); 
```*

# magento - magento 管理部分添加类别中的致命错误

> ID：15135659
> 
> 赞同：3
> 
> 时间：2013-02-28T12:33:21.510
> 
> 标签：magento

我在 Magento Admin 部分面临一个错误，当我尝试创建一个类别时，它显示以下致命错误：

> 致命错误：在第 331 行的 C:\wamp\www\magento\lib\Varien\Data\Tree\Dbp.php 中的非对象上调用成员函数 getId()

```
 public function loadEnsuredNodes($category, $rootNode)
 {
    $pathIds = $category->getPathIds();
    $rootNodeId = $rootNode->getId();
    $rootNodePath = $rootNode->getData($this->_pathField);

    $select = clone $this->_select;
    $select->order($this->_table.'.'.$this->_orderField . ' ASC'); 
```

那么任何人都可以帮助我吗？如何解决这个问题？谁能建议我解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-13T00:30:18.533

运行此 SQL 查询，它应该立即清理它:)

插入 `catalog_category_entity`( `entity_id`, `entity_type_id`, `attribute_set_id`, `parent_id`, `created_at`, `updated_at`, `path`, `POSITION`, `level`, `children_count`) 值 (1,3,0,0,'0000-00-00 00:00:00','2009-02-20 00:25:34',' 1',1,0,1),(2,3,3,0,'2009-02-20 00:25:34','2009-02-20 00:25:34','1/2' ,1,1,0); 插入`catalog_category_entity_int`( `value_id`, `entity_type_id`, `attribute_id`, `store_id`, `entity_id`, `value`) 值 (1,3,32,0,2,1),(2,3,32,1,2,1); INSERT INTO `catalog_category_entity_varchar`( `value_id`, `entity_type_id`, `attribute_id`, `store_id`, `entity_id`, `value`) 值 (1,3,31,0,1,'Root Catalog'),(2,3,33,0,1,'root-catalog'),(3,3, 31,0,2,'Default Category'),(4,3,39,0,2,'PRODUCTS'),(5,3,33,0,2,'default-category');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:30:47.097

啊。核心代码调试。我必须一直这样做。

对该代码进行尝试捕获并错误记录结果。它会让您更好地了解哪条线路有问题。检查您的 php 日志以获取结果

```
public function loadEnsuredNodes($category, $rootNode)
 {
    try {
       $pathIds = $category->getPathIds();
       $rootNodeId = $rootNode->getId();
       $rootNodePath = $rootNode->getData($this->_pathField);

       $select = clone $this->_select;
       $select->order($this->_table.'.'.$this->_orderField . ' ASC');

    } catch (Exception $e) {
        error_log($e);
    } 
```

如果错误仍然存​​在，则尝试在隔离环境中使用代码。创建一个文件 test.php 并将其放在 magento 根目录下。

```
<?php
   umask(0);
   require_once 'app/Mage.php';
   Mage::app('admin');
   echo "<PRE>";

   $category_id = 12;
   $rootNode = ??? load a root node what is this?

   $category = Mage::getModel('catalog/category')->load($category_id);
   var_dump($category->debug());

   $pathIds = $category->getPathIds();
   var_dump($pathIds);

   $rootNodeId = $rootNode->getId();
   var_dump($rootNodeId); 
```

ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-11T00:35:03.013

这个答案

```
INSERT INTO catalog_category_entity(entity_id,entity_type_id,attribute_set_id,parent_id,created_at,updated_at,path,POSITION,level,children_count) VALUES (1,3,0,0,'0000-00-00 00:00:00','2009-02-20 00:25:34','1',1,0,1),(2,3,3,0,'2009-02-20 00:25:34','2009-02-20 00:25:34','1/2',1,1,0);
INSERT INTO catalog_category_entity_int(value_id,entity_type_id,attribute_id,store_id,entity_id,value) VALUES (1,3,32,0,2,1),(2,3,32,1,2,1); 
INSERT INTO catalog_category_entity_varchar(value_id,entity_type_id,attribute_id,store_id,entity_id,value) VALUES (1,3,31,0,1,'Root Catalog'),(2,3,33,0,1,'root-catalog'),(3,3,31,0,2,'Default Category'),(4,3,39,0,2,'PRODUCTS'),(5,3,33,0,2,'default-category'); 
```

* * *

帮助了我，thanx 拯救了我的一天！...但是我的数据库中有一个表前缀，所以它不适合任何人更改...我相信 3“INSERT INTO catalog_category_entity”`"INSERT INTO _add_your_database prefix here_catalog_category_entity`

它应该可以工作......无论如何，感谢您的帮助！

# java - GIT 分支可以有数据子集吗？

> ID：15135662
> 
> 赞同：5
> 
> 时间：2013-02-28T12:33:30.597
> 
> 标签：java, spring, git, github

我试图找出 GIT 分支是否可以包含项目数据的子集，如下例所示。

我正在开发一个 java、spring、maven 项目，我的来源是

```
src/main/java 
```

我的 JSP 页面位于：

```
src/main/webapp 
```

我们正在考虑将 JSP 页面外包给 diff 组，但我们不希望他们更改 Java 代码，因此我们正在尝试考虑是否可以仅使用

```
src/main/webapp 
```

然后将其合并回

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T12:38:43.933

一种方法是将该`webapp`目录的历史记录导出为一个独立的 git 存储库，在当前（父）存储库中作为**[子模块](http://git-scm.com/docs/git-submodule)**使用。
这样，您*可以确定*外部贡献者不会修改任何源，除了您想要的源。

另一种（更简单）的方法是创建一个专用于其他贡献者组的分支，并仅通过[拉取请求](http://git-scm.com/book/en/Distributed-Git-Contributing-to-a-Project)接受合并（如果修改了外部的任何文件，您将拒绝该合并`webapp`）

# php - 如何通过 foreach 循环发送多个字段值？

> ID：15135665
> 
> 赞同：0
> 
> 时间：2013-02-28T12:33:42.083
> 
> 标签：php, html

如何使用相同的方法通过 foreach 循环发送多个字段值`ID`？

这段 HTML 代码有什么问题？

```
<input type="text" size="3" name="new_quantity[<?php echo $product_id; ?>]" value="<?php echo $product_quantity; ?>" />
<input type="text" name="totalcost[<?php echo $product_id; ?>]" value="<?php $total_cost; ?>"  /> 
```

现在`PHP`代码

```
foreach($_REQUEST['new_quantity'] as  $key => $quantity) {
    foreach($_REQUEST['totalcost'] as $key => $total) {
        $sql=mysql_query("UPDATE `categories`.`carts` SET `product_quantity` = '$quantity',                `product_totalcost` = '$total' WHERE `carts`.`product_id` ='$key' AND  cart_session='$sessionID'");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:35:41.163

循环内的循环将为您提供 n*n 次更新查询

但你实际上需要更新查询 n 次

所以这样做：

```
$pids     = array_keys($_REQUEST['new_quantity']); /// here you will get all product_ids

for($i=0; $i<count($_REQUEST['new_quantity']);$i++){
   echo $_REQUEST['new_quantity'][$pids[$i]]; // this quantity
   echo $_REQUEST['totalcost'][$pids[$i]]; // total cost
   echo $pids[$i]; // product id

   /// add your update query here all details you need in query are echoed above.
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T12:40:37.507

尝试做一件事为**数量**制作一个数组，为**成本制作一个数组**

喜欢

```
$qt=array();
foreach($_REQUEST['new_quantity'] as  $key => $quantity) {
$qt[].=$quantity;
}

$ct=array();
foreach($_REQUEST['totalcost'] as $key => $total) {
$ct[].=$total;
} 
```

然后在 for 循环中触发更新查询

# tidesdk - 在不集中的 TideSDK 应用程序中跟踪鼠标活动

> ID：15135666
> 
> 赞同：1
> 
> 时间：2013-02-28T12:33:43.063
> 
> 标签：tidesdk

我想知道是否可以在 TideSDK 应用程序中跟踪鼠标移动，即使应用程序没有聚焦/处于活动状态。

我目前正在使用：

```
 $(window).on("mousemove",function(e){
       console.log(new Date().getTime());
   }); 
```

但是当其他应用程序处于活动状态时，这显然不会跟踪任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:32:08.097

您能否在上述请求的上下文中澄清您所指的操作系统（win/linux/osx）。

AFRIK 该功能需要底层操作系统支持。通常，如果它们处于焦点状态，操作系统只会将事件发送到应用程序窗口。所以我们不会将事件传递给我们的进程，因此无法在没有焦点的情况下跟踪鼠标移动。

如果您知道任何方法可以做到这一点，请告诉我.. 我将尝试在 TideSDK 中提供相同的功能。如果您对要使用的任何特定技术有任何建议，请在以下位置提交功能请求：[https ://github.com/TideSDK/TideSDK/issues](https://github.com/TideSDK/TideSDK/issues)

谢谢

# java - 鉴于整数是从数据流中读取的。以有效的方式查找读取的元素的中位数

> ID：15135668
> 
> 赞同：-7
> 
> 时间：2013-02-28T12:33:50.817
> 
> 标签：java, c, algorithm, data-structures, median

我们可以为此使用 AVL 树吗，以便根元素是任意点的中位数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:37:34.057

不，AVL 树是高度平衡的，你需要一个重量平衡的树。

# android - 如何在 webview 中提供放大/缩小功能

> ID：15135669
> 
> 赞同：0
> 
> 时间：2013-02-28T12:33:52.107
> 
> 标签：android, android-webview

我到处都能找到更合适的方法

`setBuiltInZoomControls(true)`

但似乎它不再起作用了，现在正确的方法是什么？除了从页面的元头获取它？

这是我的代码

```
 mywebview = (WebView) findViewById(R.id.webview);
    mywebview.getSettings().setJavaScriptEnabled(true);
    mywebview.getSettings().setSupportZoom(true);
    mywebview.setWebViewClient(new WebViewClient()); 
```

但我仍然不能用手指放大/缩小页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:44:10.747

尝试这个：

尝试使用 webView 设置

使用 webSettings 类

```
webview.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR); 
```

查看[为 Webview 设置缩放](https://stackoverflow.com/questions/2505393/set-zoom-for-webview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:52:59.713

尝试[setDisplayZoomControls(boolean enabled);](http://developer.android.com/reference/android/webkit/WebSettings.html#setDisplayZoomControls%28boolean%29) 与[setBuiltInZoomControls 结合使用（启用布尔值）；](http://developer.android.com/reference/android/webkit/WebSettings.html#setBuiltInZoomControls%28boolean%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:40:16.197

您需要调用[`mywebview.getSettings().setBuiltInZoomControls(true);`](https://developer.android.com/reference/android/webkit/WebSettings.html#setBuiltInZoomControls%28boolean%29)以显示内置的缩放控件。

# wpf - 在后面的代码中使用依赖属性

> ID：15135671
> 
> 赞同：1
> 
> 时间：2013-02-28T12:34:00.877
> 
> 标签：wpf, dependency-properties

如何在我的 CodeBehind 中使用定义的 DependencyProperty？

这是我的依赖属性：

```
 ItemContainerProperty = DependencyProperty.Register("ItemContainer",
                      typeof(ObservableCollection<Item>), typeof(Manager));
    }

    public ObservableCollection<Item> ItemContainer
    {
        get { return (ObservableCollection<Item>)GetValue(ItemContainerProperty); }
        set { SetValue(ItemContainerProperty, value); }
    } 
```

当我这样做时：

```
for (int i = 0; i <= ItemContainer.Count - 1; i++)
{
} 
```

我收到以下错误消息：内部异常：对象引用未设置为对象的实例。

如何在我的代码中使用该属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:43:01.417

如果您不打算为 DependencyProperty 定义默认值，那么您需要在某个时候设置它，它的默认值为 null。

```
 public partial class MainWindow : Window
    {
        public ObservableCollection<string> Items
        {
            get { return (ObservableCollection<string>)GetValue(ItemsProperty); }
            set { SetValue(ItemsProperty, value); }
        }
        public static readonly DependencyProperty ItemsProperty =
            DependencyProperty.Register("Items", typeof(ObservableCollection<string>), typeof(MainWindow));

        public MainWindow()
        {
            InitializeComponent();

            Items = new ObservableCollection<string>();
        }
    } 
```

如果您不想这样做，那么您可以在依赖属性声明中定义默认值。

```
 public partial class MainWindow : Window
    {
        public ObservableCollection<string> Items
        {
            get { return (ObservableCollection<string>)GetValue(ItemsProperty); }
            set { SetValue(ItemsProperty, value); }
        }
        public static readonly DependencyProperty ItemsProperty =
            DependencyProperty.Register("Items", typeof(ObservableCollection<string>), typeof(MainWindow), new PropertyMetadata(new ObservableCollection<string>()));

        public MainWindow()
        {
            InitializeComponent();
        }
    } 
```

# python - 用于提取轮廓的骨架化图像过程中的问题

> ID：15135676
> 
> 赞同：3
> 
> 时间：2013-02-28T12:34:14.730
> 
> 标签：python, opencv, computer-vision, contour, feature-extraction

我发现这段代码可以获得骨架化图像。我有一个圆形图像（[https://docs.google.com/file/d/0ByS6Z5WRz-h2RXdzVGtXUTlPSGc/edit?usp=sharing](https://docs.google.com/file/d/0ByS6Z5WRz-h2RXdzVGtXUTlPSGc/edit?usp=sharing)）。

```
img = cv2.imread(nomeimg,0)
size = np.size(img)
skel = np.zeros(img.shape,np.uint8)

ret,img = cv2.threshold(img,127,255,0)
element = cv2.getStructuringElement(cv2.MORPH_CROSS,(3,3))
done = False

while( not done):
    eroded = cv2.erode(img,element)
    temp = cv2.dilate(eroded,element)
    temp = cv2.subtract(img,temp)
    skel = cv2.bitwise_or(skel,temp)
    img = eroded.copy()

    zeros = size - cv2.countNonZero(img)
    if zeros==size:
        done = True

print("skel")
print(skel)

cv2.imshow("skel",skel)
cv2.waitKey(0) 
```

问题是图像结果不是“骨架”而是一组点！我的目的是在对图像进行骨架化后提取轮廓周长。如何编辑我的代码来解决它？使用 cv2.findContours 查找骨架圆是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:05:43.280

您需要反转白色和黑色，并`cv2.dilate`首先通过调用填充所有孔：

```
import numpy as np
import cv2

img = cv2.imread("e_5.jpg",0)
size = np.size(img)
skel = np.zeros(img.shape,np.uint8)

ret,img = cv2.threshold(img,127,255,0)
element = cv2.getStructuringElement(cv2.MORPH_CROSS,(3,3))
img = 255 - img
img = cv2.dilate(img, element, iterations=3)

done = False

while( not done):
    eroded = cv2.erode(img,element)
    temp = cv2.dilate(eroded,element)
    temp = cv2.subtract(img,temp)
    skel = cv2.bitwise_or(skel,temp)
    img = eroded.copy()

    zeros = size - cv2.countNonZero(img)
    if zeros==size:
        done = True 
```

结果如下：

![在此处输入图像描述](../Images/4e82c1ed56613bd7d64574da642480ba.png)

但是，结果并不好，因为有很多差距。以下算法更好，它使用以下函数`scipy.ndimage.morphology`：

```
import scipy.ndimage.morphology as m
import numpy as np
import cv2

def skeletonize(img):
    h1 = np.array([[0, 0, 0],[0, 1, 0],[1, 1, 1]]) 
    m1 = np.array([[1, 1, 1],[0, 0, 0],[0, 0, 0]]) 
    h2 = np.array([[0, 0, 0],[1, 1, 0],[0, 1, 0]]) 
    m2 = np.array([[0, 1, 1],[0, 0, 1],[0, 0, 0]])    
    hit_list = [] 
    miss_list = []
    for k in range(4): 
        hit_list.append(np.rot90(h1, k))
        hit_list.append(np.rot90(h2, k))
        miss_list.append(np.rot90(m1, k))
        miss_list.append(np.rot90(m2, k))    
    img = img.copy()
    while True:
        last = img
        for hit, miss in zip(hit_list, miss_list): 
            hm = m.binary_hit_or_miss(img, hit, miss) 
            img = np.logical_and(img, np.logical_not(hm)) 
        if np.all(img == last):  
            break
    return img

img = cv2.imread("e_5.jpg",0)
ret,img = cv2.threshold(img,127,255,0)
element = cv2.getStructuringElement(cv2.MORPH_CROSS,(3,3))
img = 255 - img
img = cv2.dilate(img, element, iterations=3)

skel = skeletonize(img)
imshow(skel, cmap="gray", interpolation="nearest") 
```

结果是：

![在此处输入图像描述](../Images/90e0bf8d8413005550f3069ada785e19.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:55:05.427

您的骨架化算法计算白色区域的骨架：

*   Erode：将“被测像素”设置为结构元素内所有像素中的最小值，黑色 < 白色
*   Dilate：与erode相反，将“被测像素”设置为结构元素内所有像素的最大值，白色>黑色

要修复您的代码，您可以更改阈值函数的参数：

```
ret,img = cv2.threshold(img,240,255,1) 
```

参数在[此处](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#threshold)描述。

# javascript - 跨站脚本注入

> ID：15135678
> 
> 赞同：6
> 
> 时间：2013-02-28T12:34:33.287
> 
> 标签：javascript, xss

我正在测试一个 Web 应用程序。我想编写一个`XSS`显示警报的脚本`"Hello"`。

我写的第一个脚本是：

```
<script >alert("Hello");</script > 
```

但没有显示警报`"Hello"`。我发现`XSS`有效的脚本是

```
<SCRIPT >alert(String.fromCharCode(72,101,108,108,111,33))</SCRIPT > 
```

***我想知道为什么第一个脚本不起作用。***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T12:36:16.590

该站点很可能会用 HTML 实体替换双引号，或者尝试以其他方式将它们转义，从而使它们不适用于 JavaScript。使用时，`String.fromCharCode(...)`您不必使用任何引号，因此它会起作用。它获取字符串字符的 ASCII 代码列表，并在运行时从它们中创建一个字符串。所以不需要任何引用。

避免这种 XSS 的正确方法是替换`<`为`&lt;`- 这样根本无法创建脚本标记。

请注意，在清理包含 HTML 的数据时`>`，`"`也`&`应将 和 替换为各自的 HTML 实体！但是，只有在 HTML 属性中不能使用不受信任的数据（这是需要清理`<`的地方）的情况下，才绝对需要击败 XSS 攻击`"`

# html - 如何让 100% 高度的浮动 div 始终保持 100%

> ID：15135688
> 
> 赞同：4
> 
> 时间：2013-02-28T12:35:05.730
> 
> 标签：html, css, css-float

我有一个 100% 高度的左浮动和 100% 的右浮动。一切正常，直到我用文本填充一侧而另一侧将停止。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T04:44:29.520

试试下面的代码。

在 HTML 中

```
<div class="content">
<!-- Start UI Leftside -->
    <div class="ui-leftside">
        <div class="ui-cont">
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing</p>
        </div>
    </div>
<!-- End UI Leftside -->
<!-- Start UI Rightside -->
    <div class="ui-rightside">
        <div class="ui-cont">
            <p>Add Text here how long you want</p>
        </div>
    </div>
    <div class="clear"></div>
<!-- End UI Rightside -->
</div> 
```

在 CSS 中，

```
.content {
    position: absolute;
}

.ui-leftside {
    background: none repeat scroll 0 0 #F7F7F7;
    float: left;
    height: 100%;
    margin: 0;
    min-height: 100%;
    padding: 0;
    position: absolute;
    width: 25%;
}

.ui-cont {
    margin: 0;
    padding: 60px 0 10px;
}

p {
    margin: 0;
    padding: 0;
}

.ui-rightside {
    background: none repeat scroll 0 0 #999999;
    float: right;
    height: 100%;
    margin: 0;
    min-height: 100%;
    padding: 0;
    width: 75%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:41:24.803

您可以在为两列`css`插入父级后使用表。`div`例如：

您的 HTML：

```
<div id="parent">
    <div id="leftcolumn"></div>
    <div id="rightcolumn"></div>
</div> 
```

你的 CSS：

```
#parent{display:table-row}
#leftcolumn{display:table-cell}
#rightcolumn{display:table-cell} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:55:13.747

Wrap the floating divs in an enclosing div with `position: relative`, then give the left float with `position: absolute` to make sure it goes to the bottom.

The left floating div needs a reference height to start with. The outer enclosing div allows a 100% height div to take the full height of the container.

I have changed the right float to `float: right` and given the header with a `z-index: 2`.

[View on jsFiddle](http://jsfiddle.net/RsjDr/embedded/result/)

# php - 在 php 中处理多个会话

> ID：15135689
> 
> 赞同：0
> 
> 时间：2013-02-28T12:35:14.353
> 
> 标签：php, session

我对网站编程有基本的了解。我想创建一个在同一个域上有两个应用程序的网站。第一个是给用户的，第二个是给我的管理员的。这将有利于我在不登录数据库的情况下做事和管理网站。问题是如何处理这两个会话。我尝试在 session_start 之前使用 session_name 但它不起作用。我需要帮助以使每个会话都独立存在，因此它们不会相互混淆。还有一个问题。当您有多个会话时，这是设置会话的正确方法吗？

> $_SESSION[$变量] = $变量。

编辑：仍然无法正常工作。这是我的代码：

```
<?php
@$admin = $_POST['admin'];
@$password = $_POST['password'];

if(empty($admin) OR empty($password)) {
echo 'You need to fill all the spaces.';
}

if (!empty($admin) AND !empty($password)) {
    mysql_connect('localhost','root','');
    mysql_select_db('job');
    $tip0 = mysql_query("SELECT admin, password FROM admin WHERE admin = '".mysql_real_escape_string($admin)."' AND password = '".md5($password)."'");
    if(mysql_num_rows($tip0)==TRUE) {
    $_SESSION['admin']['login'] = $admin;
    header('location:administrator.php');
    echo 'Session has been created';
    }
    elseif(mysql_num_rows($tip0)==FALSE) {
    echo 'There is no admin.';
    }

}

?>

<html>
<body>

<form action="admin_login.php" method="POST"></input><br />
Admin: <input type="text" name="admin"></input><br />
Password: <input type="password" name="password"></input><br />
<input type="submit"></input>

</form>
</body>
</html> 
```

这是重定向页面：

```
 <?php
session_start();

if (isset($_SESSION['admin']['login'])) {
echo 'Here we go.';
}
elseif(!isset($SESSION['admin']['login'])) {
echo 'Not found';
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:39:28.900

会话只能在 session_start() 之后使用；您可以在数组中创建一个数组以使其正常工作。你可以尝试这样的事情：

```
$_SESSION['user']['name'] = 'Something';
$_SESSION['user']['email'] = 'Something'; 
```

对于管理员：

```
$_SESSION['admin']['something'] = 'Something'; 
```

编辑：记住你使用 session_start(); 在您使用会话的每个页面上。看起来你在第一页上忘记了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:37:19.547

为什么不使用 $_SESSION['admin'][] 来存储与管理员相关的变量？

例如，$_SESSION['admin']['login'] = 'Mansour Fahad';

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:46:18.527

我更喜欢这个：

**网站：**

```
define('SES_PREFIX' , 'website-');
$_SESSION[ SES_PREFIX . 'user'] = 'waqar'; 
```

**行政：**

```
define('SES_PREFIX' , 'admin-');
$_SESSION[ SES_PREFIX . 'user'] = 'admin'; 
```

这将允许您在同一域上部署同一应用程序的多个副本。

# .net - WPF 应用程序在任务管理器中启动后立即退出

> ID：15135695
> 
> 赞同：0
> 
> 时间：2013-02-28T12:35:29.053
> 
> 标签：.net, wpf, debugging, crash

我在安装了 Visual Studio 的计算机上运行了一个 wpf 应用程序。

当我只获取 .exe 文件并将其复制到另一台装有 Visual Studio 的计算机时，它可以工作，但如果我将它复制到没有安装 Visual Studio 的计算机，应用程序会在任务管理器中启动，但随后会立即关闭，没有错误。

两台计算机都安装了 .net 框架 4.5。

**编辑** 应用程序正在使用；

```
Microsoft.CSharp
Phidget21.NET
PresentationCore
PresentationFramework
System
System.Core
System.Data
System.Data.DataSetExtensions
System.Xaml
System.Xml
System.Xml.Linq
WindowsBase 
```

所有 Phidg​​ets 驱动程序和 dll 都安装在每台计算机上。

这是错误日志： ![错误](../Images/094800b6d4310310584a914755a64df0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:12:54.497

尝试查看事件查看器，它应该为您提供程序崩溃的方向

![事件查看器](../Images/884e2ad09ad24cd514eb174481b9221c.png)

# python - Python urllib2：数据一来就读取

> ID：15135698
> 
> 赞同：0
> 
> 时间：2013-02-28T12:35:33.003
> 
> 标签：python, http

我有一个特定的 HTTP 服务器，它接受传入连接并保持打开状态，不时发送数据，比如聊天消息。

我尝试使用以下代码：

```
#!/usr/bin/env python2.6
# -*- coding: utf-8 -*-

import urllib2

url = "http://localhost/chat"

if __name__ == "__main__":
    for line in urllib2.urlopen(url):
        print line 
```

这应该在聊天消息到达后立即打印，直到用户终止脚本。事实上，这个脚本会等待 1 分钟，然后打印在这一分钟内到达的每条消息，然后退出。

有没有办法强制 python 保持连接打开并立即打印接收到的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:49:07.357

据我所知`urllib2`，它维护着它的缓冲区，你不能做你想做的事情`urllib2`（至少以记录的方式）。你最好直接使用`httplib`.

# javascript - javascript不适用于动态添加的标签

> ID：15135701
> 
> 赞同：0
> 
> 时间：2013-02-28T12:35:34.900
> 
> 标签：javascript, jquery, html, css, jquery-ui

我目前面临一个奇怪的错误，涉及 javascript。我使用 jquery ui 选项卡在我的网站中动态添加和删除选项卡，选项卡的内容包含两个按钮，当鼠标悬停时它们会消失并在底部相关链接的鼠标离开时可见。此鼠标悬停适用于第一个默认选项卡，但不适用于动态添加的选项卡。当我将鼠标悬停在新标签的内容上时，效果不会发生。这是一个小提琴

[http://jsfiddle.net/Hunain/E2nJa/](http://jsfiddle.net/Hunain/E2nJa/) 这个小提琴与我的结果不完全一样，不包含我的问题，所以请正确阅读我的上述声明，因为我已经解释了我使用以下代码进行鼠标悬停的问题

```
$("#butt").mouseenter(function () {
            $("#butt").css("visibility","hidden");
          })
          $("#info").mouseleave(function () {
            $("#butt").css("visibility","visible");
          }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:41:25.587

您正在绑定文档加载事件并在绑定事件后添加按钮。所以事件不会与后来添加的元素绑定。
您应该在添加按钮后绑定事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:40:59.643

这是因为`mouseenter`并且`mouseleave`仅适用**于页面加载时 DOM 中存在的项目**

您需要使用委托事件：`on`对于 jQuery 1.7+，或`delegate`更早版本。

试试这个（`on`）：

```
$("body").on("mouseenter", "#butt", function () {
    $(this).css("visibility","hidden");
});

$("body").on("mouseleave", "#butt", function () {
    $(this).css("visibility","visible");
}); 
```

或者对于 1.7 之前的版本（`delegate`）：

```
$("body").delegate("#butt", "mouseenter", function () {
    $(this).css("visibility","hidden");
});

$("body").delegate("#butt", "mouseleave", function () {
    $(this).css("visibility","visible");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:41:42.130

参考你的小提琴......

```
$("#butt").mouseenter(function () {
     $("#butt").css("visibility", "hidden");
 }) 
```

应该是这样的

```
$jQuery.on("mouseenter","#butt",function () {
     $("#butt").css("visibility", "hidden");
 }); 
```

对于您知道将在运行时添加的其他元素也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T12:42:31.317

使用`on`委托事件...

```
$(document).on("mouseenter", "#butt", function () {
  $(this).css("visibility","hidden");
});

$(document).on("mouseleave", "#butt", function () {
  $(this).css("visibility","visible");
}); 
```

如果您想了解有关直接和委托事件的更多信息，可以阅读这篇[文章](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)`on`

最好将其委托给文档中存在的最接近的静态元素，而不是委托给`document`更好`body`的性能

# .net - 使用 x64 开发机器在 x86 设备上远程调试 x86 项目（VS 2005）

> ID：15135702
> 
> 赞同：1
> 
> 时间：2013-02-28T12:35:40.047
> 
> 标签：.net, x86, 64-bit, device, remote-debugging

我正在尝试通过 USB 电缆并使用 Visual Studio 2005 在远程设备（Windows CE）上调试 .NET 2 Windows 窗体应用程序。远程设备是 x86，我的开发机器是 x64，它似乎可以正常工作工人开发机器，但它们都在运行 x86。

项目构建但不会启动，vs 给了我以下错误。

“32 位版本的 Visual Studio 无法调试 64 位进程或 64 位转储。请改用 64 位版本的 Visual Studio 远程调试监视器 (MSVSMON.EXE) 进行远程调试。”

我将平台目标设置为 x86，构建配置只会让我设置“任何 CPU”（没有其他选项）。尽管我确实尝试过手动破解 .csproj 文件，但这也不起作用。

我整个早上都在网上搜索试图找到解决方案，我怎样才能让它工作？

谢谢。

# android - Android 动画 + 移动布局

> ID：15135703
> 
> 赞同：1
> 
> 时间：2013-02-28T12:35:40.867
> 
> 标签：android, android-animation

我想在单击布局中的按钮时将 LinearLayout 一半移出屏幕，当在移出布局的一半上单击按钮时，它会返回到其原始位置。

我知道这可以简单地通过使用翻译布局和将布局的 x 位置从 0% 移动到 -50% 并做相反的事情来完成。

我面临的问题是：

*   尽管布局被绘制了一半，但实际上并没有移动，即布局被绘制了，但其子项的坐标（用于接受点击）并未相应地移动到新位置。

有什么方法可以移动布局属性。我希望当第二次单击最初单击以将其移出一半的按钮时，将布局向后滑动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:49:34.753

This should give you a go:

```
@SuppressWarnings("unused")
private void setLeftMargin(int value) {
    ((LinearLayout.LayoutParams)myLinearLayout.getLayoutParams()).leftMargin = value;
    myLinearLayout.requestLayout();
} 
```

Usage:

```
ObjectAnimator.ofInt(this, "leftMargin",
            0, -1 * halfWidth).setDuration(ANIM_DURATION).start(); 
```

and

```
ObjectAnimator.ofInt(this, "leftMargin",
            -1 * halfWidth, 0).setDuration(ANIM_DURATION).start(); 
```

Read @damian's comment for animation libraries.

# android - 如何通知用户有可用的更新？

> ID：15135706
> 
> 赞同：1
> 
> 时间：2013-02-28T12:35:45.803
> 
> 标签：android, android-notifications

我在 android 中开发了一个应用程序，不想在 Google Play 商店上发布，但它会在我们的网站上提供。用户只能从网站下载。现在我的问题是，如果我正在更新应用程序构建，我将如何通知已下载该应用程序的用户。Google Play 商店负责处理这件事，但如何在我们的服务器端进行处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:38:35.657

两种选择：

1.  让应用程序每 x 天检查一次服务器是否有更新（REST 等）。
2.  使用 GCM

您的应用程序必须通知用户有更新，他可以下载它。例如，创建一个对话框，如果用户单击“确定”，则打开带有下载站点的浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:39:16.557

在我看来，您可以采取两种方式；

1.  在应用程序启动时（或在应用程序甚至不可见时在后台服务中），您可以检查您的站点。您可以在每个示例中放置一些带有版本信息的小 xml/json，并将其与当前安装的版本进行比较。

2.  使用推送通知。（[UrbanAirship](http://www.UrbanAirship.com)是一种让您免费发送这些通知的简便方法。

# solr - 请求的资源（/solr/update）不可用

> ID：15135712
> 
> 赞同：1
> 
> 时间：2013-02-28T12:36:19.947
> 
> 标签：solr

我在 Centos 中部署了 solr 3.6.1。现在我可以搜索文档，但是我无法删除 solr 中的文档。

solrconfig.xml 的相关部分如下：

```
 <requestHandler name="/update" class="solr.UpdateRequestHandler">
  </requestHandler>
  <requestHandler name="/update/csv" class="solr.CSVRequestHandler" >
     <lst name="defaults">
      <str name="seperator">,</str>
      <str name="header">true</str>
      <str name="encapsulator">"</str>
     </lst>
  </requestHandler> 
```

当我输入这个网址

```
http://localhost:8080/solr/update/?stream.body=<delete><id>123</id></delete>&stream.contentType=text/xml;charset=utf-8&commit=true 
```

在我的浏览器中，结果是：

```
type Status report

message: /solr/update

description: The requested resource is not available 
```

但是，update/csv 处理程序工作正常。

我想知道 solrconfig.xml 中的配置有问题吗？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T01:57:09.260

终于，我找到了答案！当我将更新处理程序配置更改为：

```
<requestHandler name="/update" class="solr.XmlUpdateRequestHandler"> 
```

有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:45:33.443

Solr Wiki 上通过 GET状态[更新XmlMessages的示例](http://wiki.apache.org/solr/UpdateXmlMessages#Updating_via_GET)

> 也可以使用 GET 请求发送简短的更新请求（需要进行 url 编码）

所以我会尝试以下，就像这个例子

```
 http://localhost:8080/solr/update/?stream.body=%3Cdelete%3E%3Cid%3E123%3C/id%3E%3C/delete%3E
 http://localhost:8080/solr/update/?stream.body=%3Ccommit/%3E 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-28T07:38:44.060

也许你可以尝试更新为 json；

```
curl 'http://<your_url>/solr/<yourcorename>/update?commit=true' -H 'Content-type:application/json' -d '[{"id":"123","field_1":{"set":899.99}, "field_2":{"set":123}}]' 
```

id 是更新的必填字段。

# ruby-on-rails-3.2 - 如何修复 SMTP-AuthentificationError

> ID：15135713
> 
> 赞同：0
> 
> 时间：2013-02-28T12:36:24.983
> 
> 标签：ruby-on-rails-3.2, gmail, actionmailer

我构建了一个小型联系表单来使用 Rails 传递消息。我密切关注 ActionMailer 上的 Rails-Guides ( [http://guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html) ) - 特别是 Point `5.2 Action Mailer Configuration for GMail`，因为我想为此目的使用 Gmail。

我在开发环境中。

问题：特定电子邮件地址没有消息。

检查时`development.log`我发现：

```
Sent mail to // the specific email-address appears
Date: Thu, 28 Feb 2013 13:26:37 +0100
From: // my gmail account 
To: rt@netlogix.de
Message-ID: <512f4cfdc419c_1b2020e4ab495633@PC-MYNAME.mail>
Subject: The Subject
Mime-Version: 1.0
Content-Type: text/plain;
charset=UTF-8
Content-Transfer-Encoding: 7bit 
```

我错过了什么，还是因为我正在开发中？先感谢您！

**编辑：**

继承人中的配置`development.rb`：

```
# Configuring GMAIL
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.default_url_options = { :host => 'localhost:3000'}
  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = true
  config.action_mailer.smtp_settings = {
    :address              => "smtp.gmail.com",
    :port                 => 587,
    :domain               => "localhost:3000",
    :user_name            => "myemailaddress@gmail.com",
    :password             => "myPW",
    :authentication       => "plain",
    :enable_starttls_auto => true
  } 
```

**编辑2：**

我想可能是我们的防火墙出了问题，所以我将项目推送到 heroku：Delivering 仍然失败，但这里是日志：

```
Processing by MessagesController#create as HTML
Sent mail to (email-adress) (690ms)
Completed 500 Internal Server Error in 712ms
Net::SMTPAuthenticationError (535-5.7.1 Please log in with your web browser and then try again.) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:20:30.707

看来我解决了。

首先，在内部，我认为我们的防火墙限制了从我的 localhost 到 googles smtp-server 的访问。

在生产中（在 heroku 上），谷歌似乎在第一封电子邮件后关闭了对我帐户的访问。我必须登录我的帐户，并通过短信确认这是我的帐户，现在一切正常！

# c# - 如何在 C# 中审核 Windows 安全事件日志的失败事件

> ID：15135717
> 
> 赞同：0
> 
> 时间：2013-02-28T12:36:32.197
> 
> 标签：c#, winapi, event-viewer

我需要`Audit Failure`在记录时立即访问`Window log`->`Security` 事件，有什么方法可以在记录时立即捕获它。我需要访问实时尝试。
目前我正在从`EventLogEntry`c# 中的类中阅读此内容，但我需要一个我的应用程序在`Audit Failure`发生时运行。

```
 foreach (EventLogEntry entry in log.Entries)
   {
     if (entry.EntryType==EventLogEntryType.FailureAudit)
       {
          ///
       }
   } 
```

一些类似于：

```
 EventLog myNewLog = new EventLog();
    myNewLog.Log = "MyCustomLog";                      

    myNewLog.EntryWritten += new EntryWrittenEventHandler(MyOnEntryWritten);
    myNewLog.EnableRaisingEvents = true; 
```

[事件日志事件](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entrywritten%28v=vs.71%29.aspx)，有些像这样我也想触发 windows 日志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:10:08.980

您可以使用[EventLog.GetEventLogs()](http://msdn.microsoft.com/en-us/library/74e2ybbs.aspx)方法获取 EventLogs：

```
class Program
{
    static void Main(string[] args)
    {
        EventLog log = EventLog.GetEventLogs().First(o => o.Log == "Security");
        log.EnableRaisingEvents = true;
        log.EntryWritten += (s, e) => { Console.WriteLine(e.Entry.EntryType); };
        Console.WriteLine(log.LogDisplayName);
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-26T22:50:15.153

```
void Main()
{
    var eventLog = new EventLog();
    eventLog.Log = "Security";

    eventLog.Entries.Cast<EventLogEntry>()
    .OrderByDescending(e => e.TimeGenerated);
} 
```

# javascript - 将一个 javascript 文件“包含”到另一个文件中

> ID：15135718
> 
> 赞同：37
> 
> 时间：2013-02-28T12:36:34.813
> 
> 标签：javascript

我有 2 个单独的 javascript 文件

```
#1.js
String.prototype.format = ....
String.prototype.capitalize = ....

#2.js

//................
var text = "some text{0}".format(var1)
//................ 
```

我如何在第二个文件中制作`string#format`和使用？`string#capitalize`

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-28T12:37:59.513

JavaScript 全局执行。在页面上添加这两个脚本可以使它们彼此可用，就好像它们在一个文件中一样。

```
<script src="1.js"></script>
<script src="2.js"></script> 
```

但是，您应该注意 JavaScript 是“线性”解析的，因此是“先解析，先服务”。如果第一个脚本需要第二个脚本中的某些内容，但第二个脚本尚未解析，则会导致错误。

如果发生这种情况，您应该重新考虑您的脚本结构。

# apache-flex - 在 AdvancedDataGrid 中设置一列的标题颜色不起作用

> ID：15135721
> 
> 赞同：2
> 
> 时间：2013-02-28T12:36:49.830
> 
> 标签：apache-flex, advanceddatagrid

在这个问题上需要帮助。我需要更改标题颜色。以下不起作用：

```
column.setStyle(StyleNames.HEADER_COLORS, "#FF7F00"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T21:28:21.357

没有简单的方法可以在`AdvancedDataGrid`. 您需要为标题使用自定义渲染器。

**用法**

```
<fx:Style>
    .yellowHeaderStyle {
        backgroundColor: yellow;
        backgroundAlpha: 1.0;
    }
</fx:Style>

<mx:AdvancedDataGrid dataProvider="{dataProvider}">
    <mx:columns>
        <mx:AdvancedDataGridColumn dataField="firstname" headerText="Firstname" />
        <mx:AdvancedDataGridColumn dataField="lastname" headerText="Lastname"
            headerRenderer="com.example.ColoredHeaderRenderer" headerStyleName="yellowHeaderStyle" />
    </mx:columns>
</mx:AdvancedDataGrid> 
```

**ColoredHeaderRenderer**

```
package com.example
{
    import mx.controls.AdvancedDataGrid;
    import mx.controls.advancedDataGridClasses.AdvancedDataGridHeaderRenderer;
    import mx.controls.listClasses.BaseListData;

    [Style(name="backgroundColor", type="uint", format="Color")]
    [Style(name="backgroundAlpha", type="Number")]

    /**
     * The ColoredHeaderRenderer extends the default header renderer for a AdvancedDataGrid
     * control and adds styles for chaning the backgroundColor and backgroundAlpha.
     * 
     * <p>Both styles (backgroundColor and backgroundAlpha) must me set.</p>  
     */
    public class ColoredHeaderRenderer extends AdvancedDataGridHeaderRenderer
    {
        private var grid:AdvancedDataGrid;

        override public function set listData(value:BaseListData):void
        {
            super.listData = value;
            grid = AdvancedDataGrid(value.owner);
        }

        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
        {
            super.updateDisplayList(unscaledWidth, unscaledHeight);

            if (background)
            {
                background.graphics.clear();
                background.graphics.beginFill(getStyle("backgroundColor"), getStyle("backgroundAlpha"));

                // The function AdvancedDataGridBase.createHeaders() adds a padding to the top
                // and bottom of the HeaderRenderer. Let's undo this...
                background.graphics.drawRect(0, 0 - grid.getStyle("paddingTop"), unscaledWidth,
                    unscaledHeight + grid.getStyle("paddingTop") + grid.getStyle("paddingBottom") - 1);
                background.graphics.endFill();
            }
        }
    }
} 
```

# linux - 连接到主机并重放输出

> ID：15135725
> 
> 赞同：0
> 
> 时间：2013-02-28T12:37:15.213
> 
> 标签：linux, perl, io, netcat

我正在尝试解决以下问题：使用 Netcat 连接到给定的 IP 地址和端口号。在“输入密码：”提示时输入密码。然后远程机器回显 2 行文本（1 行随机）。我的任务是在超时之前将这些消息发送回主机并终止。

似乎我应该能够使用一个简单的脚本来执行此操作，该脚本从命令行（本地）读取并将这些行的数据发送回远程机器。我尝试过一个看起来像这样的 perl 脚本：

```
#!/bin/perl -w;

use strict;
use warnings;

my $PASSWORD = "password";

my $timeout = 20;
my $timenow = time;

while (time - $timenow < $timeout) { 
    while (my $input = <STDIN> ) {
        if ($input =~ "password") {
            print $PASSWORD . "\n";
        } else {
            print $input;
        }
    }
} 
```

然后运行：

```
nc <address> <port> | ./perlscript.pl 
```

这可以将密码打印到我的终端，但随后失败。经过一番摸索后，似乎密码实际上并没有被发送到远程机器：

```
echo "PASSWORD" | nc <address> <port> | ./perlscript.pl 
```

让我通过密码提示，打印出远程机器发送的消息，但似乎它们实际上并没有被发回。

有谁知道我如何实现这个目标？似乎使用某种 mknode 管道可能有助于将 I/O 重放回远程机器，但不知道该怎么做？

这种方法也可能存在根本缺陷，因此对如何解决此问题的任何其他建议持开放态度？

谢谢，

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:00:01.070

将 Expect 用于交互式命令：[http ://search.cpan.org/~rgiersig/Expect-1.20/Expect.pod](http://search.cpan.org/~rgiersig/Expect-1.20/Expect.pod)

```
use Expect;
my $command="nc";
my @params="ipaddress port";
my $exp = Expect->spawn($command, @params);
$exp->expect(10,'-re', "Enter password:");
$exp->send("your_password\n");
my $output = $expect->after() 
# you may need some more code based on the output from nc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:09:05.517

您应该使用 perl 套接字库来做您需要的事情。由于您的示例是 perl 代码，我想我会为您推荐这种方法。

[http://www.thegeekstuff.com/2010/07/perl-tcp-udp-socket-programming/](http://www.thegeekstuff.com/2010/07/perl-tcp-udp-socket-programming/)

我链接的 URL 中的示例显示了 UDP 和 TCP，而 TCP 示例应该适合您。使用 netcat 重定向标准输入/标准输出可能会在发送/预期场景中出现问题。

# spring - 如何验证查询参数计数？

> ID：15135731
> 
> 赞同：0
> 
> 时间：2013-02-28T12:37:33.500
> 
> 标签：spring, spring-mvc

我对 spring 如何绑定参数有一些问题。

在我的场景中，我想要一个只接受一个查询参数“q”的控制器方法：

```
@Controller
@RequestMapping("/home")
public class HomeController {

   @RequestMapping
   public void test(@RequestParam(value = "q") final String q) {
        System.out.println("> " + q);
   }

} 
```

现在，如果我根据我的规范发送有效请求：

```
GET /home?q=cat 
```

我得到预期的输出：

```
> cat 
```

如果我发送的请求根据我的规范无效，但作为 http 请求仍然有效：

```
GET /home?q=cat&q=black 
```

我得到了模棱两可和意想不到的结果（*我知道为什么 spring 会这样做......数组绑定等 :) 但这仍然是一个惊喜。*):

```
> cat,black 
```

我不能使用这些参数，它们可能是无效的。但我没有简单的方法来验证请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:43:21.820

将参数定义为`List<String>`并断言它只有一项。

```
@RequestMapping
public void test(@RequestParam(value = "q") final List<String> q) {

    if (q.size() > 1) {
        throw new IllegalArgumentException("Multiple 'q' parameters are not allowed.");
    }

    System.out.println("> " + q);
} 
```

# jquery - 如何使用 URL 发送 POST JSON 对象？

> ID：15135734
> 
> 赞同：1
> 
> 时间：2013-02-28T12:37:35.500
> 
> 标签：jquery, ajax, json, url, post

我正在尝试使用 URL 发送 POST JSON 对象。

假设端点中的 URL 有三个必需参数。这三个参数是：firstName、lastName 和email。

我构造的URL地址是：

> 块引用[http://url.com/firstName=John&lastName=Doe&email=johndoe@widget.com](http://url.com/firstName=John&lastName=Doe&email=johndoe@widget.com)

现在我构建一个 JSON 对象。

```
var myObj = {"yadayada": "cool story bro"} 
```

我将带有 ajax 帖子的 JSON 对象发送到 Web 服务。

```
$.ajax({ 
    url: "http://url.com/firstName=John&lastName=Doe&email=johndoe@widget.com", 
    type: "POST", 
    dataType: "json", 
    contentType: "application/json; charset=utf-8", 
    data: JSON.stringify(myObject), 
    success: function(){}, 
 }); 
```

带参数的url是正确的，但我`501 error`没有实现。如何解决此问题以将带有 URL 参数的 JSON 对象传递给 Web 服务。

非常感谢您提前提供帮助。对于 ajax 调用格式不正确，我深表歉意，我不知道如何使用此网站表单。

# xml - 使用 XSD 自动转换 XML 文件

> ID：15135736
> 
> 赞同：1
> 
> 时间：2013-02-28T12:37:40.647
> 
> 标签：xml, xml-serialization

我将对象序列化为 XML。在软件更新的情况下，这些序列化对象可能与新软件版本不一致（例如，我的对象获得了新属性）。

假设这是我的 XML：

```
<Object>
  <Property1>prop1</Property1>
  <Property2>prop2</Property2>
</Object> 
```

我的新版本以以下格式显示对象：

```
<Object>
  <Property1>...</Property1>
  <Property3>...</Property3>
</Object> 
```

如果我有数千个，我不想手动删除 Property2 并添加 Property 3。有没有办法自动将我的旧 XML 转换为新的 XSD 架构？

# android - 在不破坏已放置的小部件的情况下更改接收器命名空间

> ID：15135737
> 
> 赞同：0
> 
> 时间：2013-02-28T12:37:45.263
> 
> 标签：android, namespaces, widget

当我更改我的小部件提供程序的命名空间时，小部件变为空白并且在我删除它并再次添加之前不起作用。

如何在不破坏已放置的小部件的情况下更改小部件的名称空间和接收器名称。

改名前：

```
 <receiver android:name="com.creativitality.labs.timezoneswidget.WidgetProvider" android:label="@string/widget" >
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>

    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/widget_info_large" />
</receiver> 
```

移动和重命名提供程序后：

```
 <receiver android:name="com.creativitality.labs.timezoneswidget.widget.WidgetLarge" android:label="@string/widget_4x1" >
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>

    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/widget_info_large" />
</receiver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T09:16:18.410

对于活动，您可以在清单中创建一个`<activity-alias>`指向新名称的元素`<activity>`。

没有针对接收器的解决方案。`<receiver-alias>`不存在。您的接收器必须永远保留其原始名称，否则它将损坏。

# html - 如何使用struts2 UI标签使用html5表单验证属性

> ID：15135743
> 
> 赞同：1
> 
> 时间：2013-02-28T12:38:04.340
> 
> 标签：html, forms, struts2

我想在 struts2 UI tag 中使用 HTML5 表单验证，如“必需”。我还检查了 struts2 核心 jar 文件，该文件显示 s:textbox 的动态属性为真。但如果我使用 like `<S:textbox name="username" required>`，它会抛出错误。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:11:02.833

试试这样：

```
<s:textbox name="username" required="required" /> 
```

在我的情况下完美运行。

您也可以以类似的方式使用其他 html5 属性。例如。placeholder="占位符值" 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T14:23:23.917

这是我让它在 IE FF 和 Chrome 中工作的唯一方法

```
<input type="text" name="u.lName" required value='<s:property value="u.lName"'/>'/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:53:53.007

属性必须具有值。所以 required 将不起作用，但 required="" 不会引起问题。

# forms - Symfony2 Form Builder -> 访问实体属性/后缀的表单值

> ID：15135744
> 
> 赞同：1
> 
> 时间：2013-02-28T12:38:06.887
> 
> 标签：forms, symfony

处理 Symfony 2 项目表单。

我希望能够在另一个字段的后缀中插入一个字段的值。有什么好的方法可以做到这一点吗？如果在第一个字段更改时可以通过 javascript 更新值会更好，但我会满足于拥有数据库值。

编码：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
   $builder
    ->add('lessons',null, array('label' => _('Lessen')))           
    ->add('contribution', 'money', array('label' => _('Bijdrage'),
            'widget_suffix' => 'per xx lessen'
     ))                              
....
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'MyBundle\Entity\Course'
    ));
} 
```

其中后缀中的**xx**应该是**课程**字段的值。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:25:43.723

由于我还没有找到一个好的方法来做到这一点，并且也希望改变后缀的值，我决定使用 jquery 来获取字段并将其设置在后缀中，其中 xx 现在位于带有 id 的跨度内“课号”。

```
var lessonsField = $('#mybundle_coursetype_lessons');

        function setLessonsSuffix(lessonsField) {
            var lessons = lessonsField.val();
            if(lessons) {
            $("#lessonNumber").html(lessons);
            }
        }

        lessonsField.change(setLessonsSuffix(lessonsField));

        $(document).ready(function() {
            setLessonsSuffix(lessonsField);

        }); 
```

# jquery - jQuery 加载本地文件在 Phonegap/Cordova 中不起作用

> ID：15135748
> 
> 赞同：2
> 
> 时间：2013-02-28T12:38:29.503
> 
> 标签：jquery, cordova

我正在尝试通过 jQuery 加载本地文件。我的文件夹结构如下所示：

```
- index.html
- js
---- jquery.js
---- index.js
- views
---- view1.html 
```

然后我做了一个这样的函数：

```
function loadPage(file){
    $('#page-wrapper').load(file);
} 
```

并像这样从 index.js 调用它：

```
loadPage('./views/view1.html'); 
```

这在 Chrome 中效果很好（禁用网络安全时），但它不会在我的 iPad 上使用 Phonegap 加载文件。在 config.xml 我已经设置`<access origin="*" />`了，所以它*应该可以*工作，但它没有？？？

有任何想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-28T14:47:19.737

尝试

```
$.mobile.changePage('./views/view1.html'); 
```

# android - 如何从片段布局内的列表视图中调用按钮

> ID：15135750
> 
> 赞同：0
> 
> 时间：2013-02-28T12:38:34.607
> 
> 标签：android

您好，我有按钮不更新的问题，

当用户搜索任何单词时，我使用了示例搜索，

我已将星形按钮右对齐

我的意思是说假设我搜索某些内容并打开列表视图，并且在右侧星标书签那里，所以点击它必须显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:56:03.893

如果不发布源代码，您将无法获得任何有用的回复。

# javascript - http请求失败

> ID：15135755
> 
> 赞同：0
> 
> 时间：2013-02-28T12:38:36.153
> 
> 标签：javascript, jquery, ajax, httprequest

我有一个繁重的应用程序，其中所有内容都在 ajax 中。

现在有时在页面加载时有 10+ ajax 请求，其中一些随机失败，原因不明。

无论如何都知道为什么这些请求失败了？

我可以在 error: {} case 中捕获错误，如果发生故障，我应该再次调用 Ajax 函数还是它不是一个好主意（避免循环）？

这是我用来处理所有请求的 Ajax 函数：

```
function ajax(aurl,dataType,requestData,successListener,compelteListener,errorListener,async) {

var $xhr=null;
async = typeof async !== 'undefined' ? async : true;

if($.ajax) {
    $xhr=$.ajax({
        type: 'post',
        url : aurl,
        async : async,
        dataType : dataType,
        data:requestData,
        success: function(response){
            checkAjaxResponse(null,response,successListener,errorListener);
        },
        complete:compelteListener,
        error:function(response){
            checkAjaxResponse(null,response,errorListener);
        }
    });
}else {
    alert("jquery not found ..");
}
return $xhr; 
```

}

**更新 1：**

如果我在错误内做一个 console.log 响应，我会得到以下信息：

```
 {"readyState":0,"responseText":"","status":0,"statusText":"error"} 
```

**更新 2：**

查看 apache 日志，我看到了很多：

```
[notice] Parent: child process exited with status 255 -- Restarting. 
```

我还将我的 ajax 请求修改为：

```
error:function(response){
 ajax(aurl,dataType,requestData,successListener,compelteListener,errorListener,async); 
} 
```

但是如果 Ajax 总是失败，那可能会导致系统崩溃......

**更新#3**

我认为这更像是一个 WAMP 问题，因为我在生产中没有这些错误。

无论如何感谢大家的努力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:35:15.673

问题与 Windows 上的 Apache 有关，原因不明，服务器随机崩溃。

我在 httpd 上找到了一些与堆栈相关的信息（1mb windows 默认 vs 8mb default on linux）

我们的产品是 linux 和 dev on windows 。

将函数修改为以下内容：

```
error:function(response){
                counter++;
                checkAjaxResponse(null,response,errorListener);
                if(counter > 5) {
                    jAlert(get_label('technical_error') + '<br><br>' + get_label('function_called')+ aurl,get_label('attention_loading')); 
                    setLoading(false);  
                } else {
                   return ajax(aurl,dataType,requestData,successListener,compelteListener,errorListener,async,counter);
                }
            } 
```

# sql - 通过从日期和到日期选择sql中特定列的总和

> ID：15135762
> 
> 赞同：-2
> 
> 时间：2013-02-28T12:38:51.503
> 
> 标签：sql, windows

我目前的表结构是这样的：

```
Category   Date        GrandTotal
-----------------------------------    
Cat1       26/2/2013      900
Cat1       26/2/2013      200
Cat2       26/2/2013      100
Cat2       27/2/2013      150
Cat2       28/2/2013      200 
```

但我希望这样得到它：

如果我选择从`26/2/2013`到的交易`26/2/2013`

我应该只得到总金额`26th February`，所以结果应该是 1200。

谁能告诉我这个的SQL查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:42:30.657

```
SELECT sum(GrandTotal) FROM table WHERE Date = '26/2/2013' 
```

或者，如果你想做一个范围，你可以做`> '25/2/2013' and < '27/2/2013'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:43:29.593

你能试试这个代码吗

```
SELECT DATE,SUM(GRANDTOTAL) FROM TABLE_NAME
GROUP BY DATE
HAVING DATE BETWEEN 26/2/2013 AND 26/2/2013 
```

# c - char数组到十六进制转换

> ID：15135763
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:38:51.567
> 
> 标签：c

我有一个问题，希望你们能帮助我。我正在为我的项目使用 32 位 uC。我通过 Uart 接收从键盘到 uC 的字符（通过超级终端）。因为我只使用 C，所以我将这些字符存储到 char 类型的缓冲区中。例如，我需要发送一个十六进制地址作为输入，例如 0xff502035。我用超级终端通过 Uart 发送它，并将它一个字符一个字符地存储在我的缓冲区中。然后我想将它转换为一个整数（来自char），以便将它进一步传递给我的函数，该函数将读取存储在该位置的值。

所以我需要的是：将 char[] 转换为 int。所以如果我的缓冲区包含 "0xff502035" ，我需要它作为 0xff502035 整数类型。提前感谢你们帮助我。

最好的问候，劳伦蒂乌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:41:53.607

我不会提供“如何将字符串转换为数字”的完整示例，但请看一下该[`strtol`](http://www.cplusplus.com/reference/cstdlib/strtol/)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:54:43.333

这个论坛已经回答了，上面的链接。

但是，完成帖子后，虽然地址已以十六进制格式记录并作为字符串传输，但它实际上是最终以二进制格式解释的地址。strtoul 函数可以在 32 位和 64 位系统上安全地使用，以将十六进制格式的地址转换回原始格式。

字符 *buf; // 包含字符串格式的地址

字符 *endptr;

诠释*ptr；

ptr = (int*)strtoul(buf, &endptr, 16);

# actionscript-3 - AS3 如何使用大量数据制作单独的菜单/窗口？

> ID：15135767
> 
> 赞同：-3
> 
> 时间：2013-02-28T12:38:56.427
> 
> 标签：actionscript-3

在游戏中，通常能够访问某种菜单。

带有描述的列表、升级菜单、任何带有图片、文字等的内容。

**那么有什么方便的方式来组织这一切呢？**

当我尝试类时，似乎它们之间不共享变量。
我需要一种在这些窗口/菜单之间共享数据的方法。并且它不应该被数据过度加权，这意味着每次我关闭一个菜单时，它的部分都会消失，以不让 Flash 计算我不需要的 MovieClip 位置、alpha、效果和其他值，使用另一个菜单。

作为一个更好理解的示例，如果我将 5 个游戏合二为一，并且需要在它们之间共享变量怎么办？
说，首先我玩 Arcanoid，然后切换到俄罗斯方块并使用 Arcanoid 分数作为我可以获得的块数，然后切换到弹球并使用俄罗斯方块中得分的线数作为球数，然后切换到 Gradius 和我的船攻击力是弹球分数除以1000，然后我看到一个带有重度胜利烟花效果的总分数窗口。

我需要每个游戏单独工作，否则它们会因为图形和代码长度而变得非常缓慢以查找功能。

**这是如何实现的？**

谢谢moskito，我有点乱^_^'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:15:09.350

> 这是如何实现的？

您创建架构以实现它。您的特定示例可以这样处理：

首先，您要定义这些迷你游戏或单独批次的内容将运行的基础。该基础将处理运行迷你游戏，以及跟踪它们的状态和与它们相关的信息，您希望将这些信息传递给后续的迷你游戏。

其次，您要定义代表这些迷你游戏之一的基类。此类将针对您想要创建并在平台上运行的每个新游戏进行扩展。这个基类将处理通知平台的变化。

最后，您想创建一些模型来表示迷你游戏中的变化状态。内置[`Event`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html)系统是解决此问题的好方法，但您可以在此实例中轻松创建自己的数据模型，然后将其直接传递给平台。

* * *

代码示例。

您的平台的基础可能类似于：

```
public class Platform
{

    private var _game:MiniGame;
    private var _recentGameStateData:GameStateData;

    public function loadGame(game:MiniGame):void
    {
        if(_game != null) game.unload();

        _game = game;
        _game.start(this, _recentGameStateData);
    }

    public function update():void
    {
        if(_game != null) _game.update();
    }

    internal function manageStateChange(gameStateData:GameStateData):void
    {
        _recentGameStateData = gameStateData;

        // Do stuff with the new game state data, like save the current score
        // to use in your next game.
        //
    }

} 
```

你的小游戏：

```
public class MiniGame
{

    private var _platform:Platorm;
    private var _score:int = 0;

    public function start(platform:Platform, previousGameStateData:GameStateData):void
    {
        _platform = platform;

        // Use previous GameStateData here.
        //
    }

    public function update():void{}
    public function unload():void{}

    public function notifyPlatform(gameStateData:GameStateData):void
    {
        _platform.manageStateChange(gameStateData);
    }

    protected function get score():int{ return _score; }

} 
```

供平台管理的游戏状态数据：

```
public class GameStateData
{

    private var _game:MiniGame;
    private var _score:int;

    public function GameStateData(game:MiniGame, score:int)
    {
        _game = game;
        _score = score;
    }

    public function get game():MiniGame{ return _game; }
    public function get score():int{ return _score; }

} 
```

然后是在您自己的小游戏中将该信息发送到平台的示例：

```
public class TetrisGame extends MiniGame
{

    override public function unload():void
    {
        // Let the Platform know about the current score when this game is
        // being unloaded.
        var state:GameStateData = new GameStateData(this, _score);
        notifyPlatform(state);
    }

} 
```

# html - 如何通过 HTML 代码编写双引号

> ID：15135769
> 
> 赞同：42
> 
> 时间：2013-02-28T12:39:07.043
> 
> 标签：html, ascii, html-entities

在 HTML 中，指定 html 代码的首选方式是`"`什么，主要区别是什么？例如：

```
&quot;    <!-- friendly code -->
&#34;     <!-- numerical code -->
&#x22;    <!-- hex code --> 
```

我应该使用哪一个，如果其中一个被弃用，它会成为一个问题吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-28T12:45:55.020

真的没有任何区别。

`&quot;`被处理为which 是ISO 8859-1 等效项`&#34;`的十进制等效项。`&x22;``"`

您反对使用的唯一原因`&quot;`是它被[错误地从 HTML 3.2 规范中省略了](http://www.utexas.edu/learn/html/spchar.html#quot)。

否则，这一切都归结为个人喜好。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-28T12:42:56.263

谷歌建议你不要使用它们中的任何一个，[来源。](https://github.com/google/styleguide/blob/gh-pages/htmlcssguide.xml#L402)

> 假设文件和编辑器以及团队之间使用相同的编码 (UTF-8)，则无需使用 、 或 等实体`&mdash`引用`&rdquo`。 `&#x263a`

您是否有理由不能简单地使用`"`？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-28T13:47:43.180

没有什么区别，在你现在可以在野外找到的浏览器中（也就是说，不包括你可能在博物馆里找到的像 Netscape 1 这样的东西）。没有理由怀疑它们中的任何一个都会被弃用，特别是因为它们在 XML、HTML 4.01 和 HTML5 CR 中都是有效的。

没有理由使用它们中的任何一个，与直接使用 Ascii 引号 (") 相反，除非在非常特殊的情况下，您有一个包含在此类标记中的属性值并且您希望在值内使用该标记（例如，`title="Hello &quot;world&quot;"`），即使那样，几乎总是有更好的选择（例如`title='Hello "word"'`或`title="Hello “word”"`.

如果您想改用“智能”引号，那么这是一个不同的问题，并且没有任何构造与它们有任何关系。有些人期望符号`&quot;`会产生“智能”引号，但很容易看出它们不会。这些符号明确表示计算机语言中使用的 Ascii 引号 (")。

# javascript - 仅在 JQuery Mobile 中禁用放大页眉和页脚

> ID：15135770
> 
> 赞同：1
> 
> 时间：2013-02-28T12:39:12.593
> 
> 标签：javascript, jquery, jquery-mobile

我想在我的 JQuery Mobile 应用程序中将页眉和页脚都放在固定位置，当用户捏合或缩放前端时，只有内容区域会变大或变小，而页眉和页脚将保持相同大小。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:38:06.733

我想在某些情况下这会很酷，但是移动浏览器不喜欢在屏幕上修复东西，也不真正支持它。JQM 做了一些技巧，但不是缩放。

如果您愿意，您可以禁用元视口中的缩放（设置最大值和最小值），但这在某些应用程序中可能不是最好的做法。

# windows - Windows 上的 Hudson - 错误：java.io.IOException：无法运行程序“sh”

> ID：15135771
> 
> 赞同：41
> 
> 时间：2013-02-28T12:39:12.767
> 
> 标签：windows, jenkins, continuous-integration, hudson

我正在尝试与 Hudson 和 MSTest 进行持续集成。

当我尝试运行此作业时，出现以下错误：

```
1 Warnung(en)
    0 Fehler

Verstrichene Zeit 00:00:00.13
[workspace] $ sh -xe C:\Windows\TEMP\hudson4419897732634199534.sh
The system cannot find the file specified
FATAL: Befehlsausführung fehlgeschlagen
java.io.IOException: Cannot run program "sh" (in directory "C:\Users\Markus\.hudson\jobs\Test1 Unit TEst\workspace"): CreateProcess error=2, Das System kann die angegebene Datei nicht finden
    at java.lang.ProcessBuilder.start(Unknown Source)
    at hudson.Proc$LocalProc.<init>(Proc.java:187)
    at hudson.Proc$LocalProc.<init>(Proc.java:157)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:649)
    at hudson.Launcher$ProcStarter.start(Launcher.java:266)
    at hudson.Launcher$ProcStarter.join(Launcher.java:273)
    at hudson.tasks.CommandInterpreter.perform(CommandInterpreter.java:79)
    at hudson.tasks.CommandInterpreter.perform(CommandInterpreter.java:54)
    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:34)
    at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:646)
    at hudson.model.Build$RunnerImpl.build(Build.java:181)
    at hudson.model.Build$RunnerImpl.doRun(Build.java:136)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:434)
    at hudson.model.Run.run(Run.java:1390)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:40)
    at hudson.model.ResourceController.execute(ResourceController.java:81)
    at hudson.model.Executor.run(Executor.java:137)
Caused by: java.io.IOException: CreateProcess error=2, Das System kann die angegebene Datei nicht finden
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 17 more
Processing tests results in file results.trx
FATAL: No MSTest TRX test report files were found. Configuration error?
[DEBUG] Skipping watched dependency update for build: Test1 Unit TEst #5 due to result: FAILURE
Finished: FAILURE 
```

我的配置如下所示：

```
Buildverfahren
Build a Visual Studio project or solution using MSBuild
    MSBuild Version MS Build .NET 4 
    MSBuild Build File  trunk\UnitTestWithNHibernate\UnitTestWithNHibernate.sln 
    Command Line Arguments  /p:Configuration=Release 
```

我的命令行如下所示：

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe"
/runconfig: trunk\UnitTestWithNHibernate\UnitTest\LocalTestRun.testrunconfig  /testcontainer: trunk\UnitTestWithNHibernate\UnitTest\bin\Debug\UnitTest.dll /resultsfile:results.trx 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-08-28T09:53:08.507

如果您将 Windows 命令指定为“执行 shell”而不是“执行 Windows 批处理命令”，则会发生这种情况。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-05-13T14:38:37.077

发生这种情况是因为 Jenkins 不知道 shell 路径。
在 Manage Jenkins -> Configure System -> Shell 中，将 shell 路径设置为

> C:\Windows\system32\cmd.exe

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-07-15T15:15:31.430

在我的情况下，在进行系统重新启动和迁移之前，构建使用“执行 shell”工作并给出了`Cannot run program "sh"`之后。问题是系统路径意外变短。目前尚不清楚为什么，但是路径丢失`C:\Program Files (x86)\Git\bin`并且我使用的 Git 版本带有`sh.exe`.

当然，您可以按照@funkybro 的建议在所有作业中将所有“执行 shell”构建步骤更改为“执行 Windows 批处理命令”。如果您的工作可以在 Windows 系统或 Linux 上运行，并且出于其他原因同时拥有这两个系统，这并不能解决您的问题。

或者，您可以更改此设置以`cmd.exe`按照@ajith 的建议使用：Manage Jenkins -> Configure System -> Shell -> Shell executable =`C:\Windows\system32\cmd.exe`

*但是*，我喜欢使用 linux 命令并使用更类似于 Bash 的东西。这是我自己的偏好，但我认为这也可能会有所帮助。从头开始，我使用[Chocolatey NuGet](https://chocolatey.org/)安装 Git。我还推荐 GnuWin 为您提供一些非常有用的 Unix 命令。

*   安装[Chocolatey NuGet](https://chocolatey.org/)
*   在 CMD 或 PowerShell 中：`cinst gnuwin git`

然后，您可以使用 Windows UI 通过添加`C:\Program Files (x86)\Git\bin\`到系统路径来解决此问题。

或者您可以在 Jenkins 全局配置中修复它：管理 Jenkins -> 配置系统 -> 外壳 -> 外壳可执行文件 =`C:\Program Files (x86)\Git\bin\sh.exe`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-24T07:57:12.660

解决问题的方法是将 的值`C:\Windows\system32\cmd.exe` 放入 Hudson 系统配置中的“Shell 可执行文件”配置中。

在您的工作的构建部分，您可以在编译项目 EX 后执行 windows 命令：

```
copy target\pmd-rules-extensions-0.0.1-SNAPSHOT.jar D:\projects\sonar\sonar-3.4.1\extensions\rules\pmd\ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-02T16:12:31.210

这个问题将通过尝试这个命令让 jenkins 作业运行来解决对我来说它工作，只需尝试在管理 jenkins --> 配置系统 --> 搜索 shell --> 和 shell 可执行文件中更新它，给出以下命令. 它有助于！！！

C:\Program Files\Git\bin\sh.exe

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-06T10:06:01.843

只需使用“windows 批处理命令”并输入 windows 命令，就像在命令行上键入它们一样。

# c# - 通过 Visual Studio for SharePoint 2013 创建文档库

> ID：15135774
> 
> 赞同：0
> 
> 时间：2013-02-28T12:39:19.087
> 
> 标签：c#, visual-studio-2010, sharepoint

我正在尝试在 Visual Studio 中为 SharePoint 2013 使用 C# 创建文档库。但在运行我的应用程序时，我收到此错误“ **Microsoft SharePoint 在 32 位进程中不受支持。请验证您是否在 64 位可执行文件中运行。”** 在这部分代码**使用 (SPSite site = new SPSite(siteUrl))**。有什么可能的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:41:06.520

您似乎有一台 32 位机器。SharePoint 需要 64 位环境。见[这里](http://technet.microsoft.com/en-us/library/cc262485.aspx)。

# android - android.media.audiofx.Equalizer 方法不能实时工作

> ID：15135776
> 
> 赞同：2
> 
> 时间：2013-02-28T12:39:23.250
> 
> 标签：android, android-mediaplayer

我有一个必须在`MediaPlayer`课堂上播放的媒体文件。

所以，首先我初始化一个 MediaPlayer 变量：

```
mediaPlayer = new MediaPlayer();
mediaPlayer = MediaPlayer.create(this, R.raw.queen); 
```

然后我正在创建一个均衡器：

```
eq = new Equalizer(0, mediaPlayer.getAudioSessionId());
eq.setEnabled(true); 
```

之后，在演奏过程中，我想移动搜索条来实时改变我的乐队水平。例如这样：

```
public void onStopTrackingTouch(SeekBar seekBar) {
    switch (seekBar.getId()){
    case R.id.eqBar1:
        eq.setBandLevel((short) 0, (short)(eq1Seek.getProgress() - minRange));
        break; 
```

...等等所有乐队。应用程序正常工作，没有发生错误，但使用 Seek Bars 操作时没有效果。

那么，为什么它不起作用？如何在播放期间应用均衡器参数更改？

提前致谢！

在这部分代码中：

```
 case R.id.eqBar1:
        eq.setBandLevel((short) 0, (short)(eq1Seek.getProgress() - minRange));
        bndText.setText(String.valueOf(eq.hasControl()));
        bndText.setText(bndText.getText() + " " + String.valueOf(eq.setEnabled(true)));
        break; 
```

`hasControl()`返回`true`并`setEnabled`返回`0`（成功），但似乎没有应用均衡器 - 移动时我没有听到任何区别`seekbars`（（（

# php - 为我的音乐播放器重复和更改 php 值

> ID：15135778
> 
> 赞同：-2
> 
> 时间：2013-02-28T12:39:26.700
> 
> 标签：php, javascript, jquery, timer, repeat

我想知道如何更改或重复 php 中的某些元素。现在，我正在使用脚本从喊话信息页面获取正在播放的歌曲。

在 JQuery 中，我有一个播放器，其播放列表可以切换流。

现在它现在唯一要做的就是切换到流而不显示任何内容。那么我将如何在 jQuery 中调用 php 部分呢？

天哪，我真的希望我的解释足够清楚。

对于那些能够帮助我

**的人，您希望我显示我的代码的哪些部分？**

然后我会立即为您粘贴！:)

问候，

库斯。

Arjan 的代码：JQUery

```
$(document).ready(function(){   
    var myPlaylist = new jPlayerPlaylist({
        jPlayer: "#jquery_jplayer",
        cssSelectorAncestor: "#jp_container"
    }, [
        {
        title: "test",
        mp3: "http://178.156.201.212:8018/;stream/1",
        <?php
        $host = "178.156.201.212"; // ip or url of shoutcast server
        $port = "8018";
        ?>
        },
        {
        title: "test2",
        mp3: "http://stream1.slowradio.com/;stream/1",
        <?php
        $host = "http://stream1.slowradio.com"; // ip or url of shoutcast server
        $port = "8008";
        ?>
        },
        {
        title: "test3",
        mp3: "http://108.61.73.119:8022/;stream/1",
        <?php
        $host = "108.61.73.119"; // ip or url of shoutcast server
        $port = "8022";
        ?>
        },
    ], {
        swfPath: "js",
        supplied: "oga, mp3",
        wmode: "window"
    });

    $("#jquery_jplayer").bind($.jPlayer.event.play, function(event) {       
        //$('#fetch').html(jPlayerPlaylist.playlist[jPlayerPlaylist.current].title);
        $('#fetch').empty();
        $('#fetch').append(myPlaylist.playlist[myPlaylist.current].title);  
    });

}); 
```

PHP

```
<?php

$host = "178.156.201.212"; // ip or url of shoutcast server
$port = "8000";          // port of shoutcast server 

$fp = @fsockopen("$host", $port, $errno, $errstr, 30);

if($fp)
{
  fputs($fp,"GET /7.html HTTP/1.0\r\nUser-Agent: GET SEVEN (Mozilla Compatible)\r\n\r\n");

  while(!feof($fp))
  {
    $data .= fgets($fp, 1000);
  }

  fclose($fp);

  $data              = ereg_replace(".*<body>", "", $data);
  $data              = ereg_replace("</body>.*", ",", $data);
  $data_array        = explode(",",$data);
  $listeners         = $data_array[0];
  $status            = $data_array[1];
  $peak_listeners    = $data_array[2];
  $maximum_listeners = $data_array[3];
  $unique_listeners  = $data_array[4];
  $bitrate           = $data_array[5];
  $track             = $data_array[6];
}

$title  = chop($track);
$select = explode(" - ",$title);
$artist = chop($select[0]);
$title  = chop($select[1]);

?> 

<?php
if($status == 1)
{
    echo $artist. " - " .$title;
}
else
{
  print 'document.getElementById("title").innerHTML = "Offline";';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:47:42.087

在 jquery 中调用 PHP 是通过以下代码完成的：

```
$.ajax({
type: "GET",
url: 'this_file.php',
success: function(html) {   
   var data = html.split(' ');
   var host = data[0];
   var port = data[1];
}
}); 
```

您的 PHP 将是：

```
if ( isset($_GET['update']) ) {
  die($host.' '.$port);
} 
```

此代码从 php 文件加载 html 并将其放在 HTML body 标记中。当然，您可以将 body 更改为任何元素。

如需更具体的帮助，请发布您的一些 PHP 和 jQuery 代码。

编辑：完整文档：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:20:08.153

也许这有效：

```
<?php
    $host = "http://stream1.slowradio.com"; // ip or url of shoutcast server
    $port = "8008";
?> 
```

必须

```
<?php
    $host = "http://stream1.slowradio.com"; // ip or url of shoutcast server
    $port = "8008";
    echo 'host: '.$host;
    echo 'port: '.$port;
?> 
```

下次，请确保您立即提供代码。我猜这节省了很多时间和否决票。

# mysql - 查询以查找我的表中缺少的间隔内的所有日期

> ID：15135781
> 
> 赞同：1
> 
> 时间：2013-02-28T12:39:30.280
> 
> 标签：mysql, date

我需要在给定的时间间隔内提取所有不在表格中的日期。

示例表日期有

```
2012-09-24
2012-09-26 
```

我给定的日期间隔`2012-09-23`是`2012-09-27`

我的查询应该返回

```
2012-09-23
2012-09-25
2012-09-27 
```

谁能给我一些关于如何去做的提示？我已经搜索了很多，但没有找到关于这个问题的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:52:46.250

最简单的解决方案是构建一个存储所有可能日期的日历表，然后与之进行比较。

# ios - 如何在点击文本字段时禁用键盘出现，iOS？

> ID：15135784
> 
> 赞同：13
> 
> 时间：2013-02-28T12:39:39.540
> 
> 标签：ios, keyboard, uitextfield, dismiss

我有一个文本字段，当用户按下它以显示自定义选择器时我需要。

选择器显示正常，但问题是键盘出现在底部，我不希望这样。

这是一个 iPad 项目，我正在尝试从我的 iphone 转换。在 iPhone 上，这很好用，键盘总是隐藏的。

我可以在这里错过/忘记做什么？

## 编辑

* * *

为了将来参考这里实际发生的事情，实际上两次（iphone和ipad）键盘都**没有**隐藏。我只是认为它隐藏在 iphone 中，因为从底部弹出的选择器隐藏了键盘，因为它在它的顶部。但在 ipad 上，情况并非如此。

无论如何，我使用下面建议的委托方法修复了它。

注意，我接受了这个答案，因为它是***专门***回答我想要的答案的。其余的答案是正确的，我认为其他实现更好。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-28T14:20:15.150

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    // Here You can do additional code or task instead of writing with keyboard
    return NO;
} 
```

当您点击文本字段时，此委托方法将首先被调用，如果您将 NO 写为布尔值，则意味着您不想开始编辑，因此它不会显示键盘。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-28T12:48:12.113

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if(textfield == yourtextField)
    {
        [textfield resignFirstResponder];
        // Show you custom picker here....
        return NO;
    }     
} 
```

你需要`uitextfielddelegate`在控制器中实现。

并将委托分配给`yourtextField`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-04T05:52:54.103

使用文本字段委托。

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{        
    return NO;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-18T04:02:47.273

看起来所有这些答案都采用一种方法，在键盘出现之前简单地拒绝它。这可以防止具有许多优点的第一响应者状态。

允许您保持第一响应者状态的一种简单方法是创建一个空视图并将其分配给输入字段上的 inputView 属性。如果您使用的是 iOS 9（或更高版本？），您还必须摆脱 inputAssistantItem 对象。

```
UITextField *field = [[UITextField alloc] init];
field.inputView = self.emptyKeyboard.view;

UITextInputAssistantItem *aItem = [field inputAssistantItem];
aItem.leadingBarButtonGroups = @[];
aItem.trailingBarButtonGroups = @[]; 
```

然后，如果您想从备用视图控制器控制该字段，您可以通过添加目标来实现：

```
[field addTarget:self.numberPad action:@selector(editingBegan:) forControlEvents:UIControlEventEditingDidBegin];
[field addTarget:self.numberPad action:@selector(editingEnded:) forControlEvents:UIControlEventEditingDidEnd];
[field addTarget:self.numberPad action:@selector(fieldChanged:) forControlEvents:UIControlEventEditingChanged]; 
```

通过子类化 UITextField 也可以更干净地做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-28T12:45:13.743

使用 textField 委托，

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
 textField=nil;
 return NO;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-07T15:53:01.197

**迅捷3.0版**

首先为文本字段设置委托

```
self.textfield.delegate = self 
```

然后在扩展中

```
extension ViewController: UITextFieldDelegate {
    func textFieldShouldBeginEditing(_ textField: UITextField) -> Bool {
        return false
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-24T09:31:20.107

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    // Here you can do for Specific text Field by 
    if (textField==(the text field you don't want to show keyboard)) {
        NSLog(@"don't show keyboard");
        return NO;
    }
    else {
        return YES;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-02T08:14:06.257

**斯威夫特 3/4**

1.  在您的班级中添加：- **UITextFieldDelegate 。**

2.  添加：- **self.textField.delegate = self** 在 ViewDidLoad

3.  最后一个只是添加这个功能 -

    ```
    func textFieldShouldBeginEditing(_ textField: UITextField) -> Bool {
        return false
    } 
    ```

# java - Spring、Hibernate 和 .xml 错误

> ID：15135785
> 
> 赞同：0
> 
> 时间：2013-02-28T12:39:40.323
> 
> 标签：java, xml, spring, hibernate, red5

**错误**

```
[INFO] [Launcher:/hibernate] org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7d1050be: defining beans [placeholderConfig,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,web.context,web.scope,dataSource,sessionFactory,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,transactionManager,applicationRepository,applicationService,web.handler,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@1fb88122
    Exception in thread "Launcher:/hibernate" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in ServletContext resource [/WEB-INF/red5-web.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/red5-web.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
        at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:728)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)
        at org.red5.server.tomcat.TomcatLoader$1.run(TomcatLoader.java:593)
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/red5-web.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:400)
        at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:275)
        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:122)
        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:78)
        at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
        at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:97)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
        ... 8 more
    Caused by: java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/MetadataProvider
        at org.hibernate.search.event.FullTextIndexEventListener.initialize(FullTextIndexEventListener.java:151)
        at org.hibernate.event.EventListeners$1.processListener(EventListeners.java:198)
        at org.hibernate.event.EventListeners.processListeners(EventListeners.java:181)
        at org.hibernate.event.EventListeners.initializeListeners(EventListeners.java:194)
        at org.hibernate.cfg.Configuration.getInitializedEventListeners(Configuration.java:1338)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1327)
        at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:867)
        at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:814)
        at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:732)
        at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
        ... 23 more
    Caused by: java.lang.ClassNotFoundException: org.hibernate.annotations.common.reflection.MetadataProvider
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
        ... 35 more 
```

------------------------------------- 和 red5-web.xml 关注这个错误..

**代码**

```
<!-- Wrapper to translate database exceptions into something more friendly -->
<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

<!-- Hibernate transaction management -->
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="applicationRepository" class="net.sziebert.tutorials.dao.hibernate.HibernateApplicationRepository">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="applicationService" class="net.sziebert.tutorials.service.impl.ApplicationServiceImpl">
    <property name="applicationRepository" ref="applicationRepository"/>
</bean>

<bean id="web.handler" class="net.sziebert.tutorials.Application">
    <property name="applicationService" ref="applicationService"/>
</bean> 
```

我没有使用 Spring 和 Hibernate 的经验。仅用于执行开源示例。

我该如何纠正这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:46:11.777

你似乎不见了

```
org/hibernate/annotations/common/reflection/MetadataProvider 
```

尝试将以下工件添加到您的 POM：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-commons-annotations</artifactId>
    <version>3.3.0.ga</version>
</dependency> 
```

# android - 是否有任何选项可以检查 android 手机是否在特定时间空闲？

> ID：15135791
> 
> 赞同：1
> 
> 时间：2013-02-28T12:39:48.177
> 
> 标签：android, android-intent

我有一个要求，为此，我必须检查安卓手机是否空闲，即用户没有解锁手机，也没有在特定时间内接听任何电话。有没有办法检查这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:44:18.603

监视`SCREEN_ON`和`SCREEN_OFF`广播。如果在`SCREEN_ON`广播后没有在您想要的时间内发送`SCREEN_OFF`广播，则用户在这段时间内没有使用他的手机。

# python - AttributeError：“str”对象没有属性“insert”

> ID：15135794
> 
> 赞同：1
> 
> 时间：2013-02-28T12:39:53.377
> 
> 标签：python, tkinter, twisted

我是一个相当新的程序员，如果你能帮助我，我将不胜感激。我看过谷歌，但有一些“Twisted+Tkinter”的例子。当我单击窗口上的“发送”按钮时，我收到此错误：

错误是 e.insert(0,m) AttributeError: 'str' object has no attribute 'insert'

和代码：

```
from Tkinter import *
from twisted.internet import reactor, tksupport

class App(object):
    def onQuit(self):
        print "Quit!"
        reactor.stop()

    def onButton(self):
        m=self.entryvar.get()
        e=self.labeltext.get()
        e.insert(0,m)

def __init__(self, master):
    frame = Frame(master)
    frame.pack()

    self.entryvar=StringVar()
    self.mes=Entry(frame,textvariable=self.entryvar)
    self.mes.pack()

    self.labeltext=StringVar()
    self.label=Label(frame,textvariable=self.labeltext)
    self.label.pack()

    q = Button(frame, text="Quit!", command=self.onQuit)
    b = Button(frame, text="Send", command=self.onButton)
    q.pack(side=LEFT)
    b.pack(side=LEFT)

if __name__ == '__main__':
    root = Tk()
    tksupport.install(root)
    app = App(root)
    reactor.run() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:43:42.783

如果要更新`labeltext` `StringVar`，则需要为其构造一个*新*的字符串值。`str`是*不可变*的序列类型，并且`list`无法就地修改不像。

在这种情况下，也许您打算使用字符串连接？以下代码将设置`labeltext`为`m + e`，其中`e`的先前内容`labeltext`，有效地前置`m`：

```
def onButton(self):
    m=self.entryvar.get()
    e=self.labeltext.get()
    self.labeltext.set(m + e) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:48:59.277

如果要将标签文本替换为条目文本

```
 def onButton(self):
    entry_text = self.entryvar.get()
    self.labeltext.set(entry_text) 
```

或者，如果您想在标签文本之前添加条目文本

```
 def onButton(self):
    entry_text = self.entryvar.get()
    label_text = self.labeltext.get()
    self.labeltext.set(entry_text + " " + label_text) 
```

# java - JBoss 的关机超时？

> ID：15135797
> 
> 赞同：2
> 
> 时间：2013-02-28T12:39:56.323
> 
> 标签：java, singleton, jboss7.x

我使用 JBoss 7.1.1.Final。在这里，我有一个启动单例。在启动时我初始化一些东西，在关闭时我终止/清理我的东西。但现在我发现，终止我可以在 1 秒内为所欲为！一秒钟后，应用程序就消失了，有时 1 秒钟不足以进行真正的清理。

代码：

```
@Singleton
@Startup
public class ShutdownTest {

  @PostConstruct
  public void initialize() {
    LOG.info("Initialization");
  }

  @PreDestroy
  public void terminate() {
    for(;;) {
      LOG.info("loop in terminate...");
      Tools.sleepQuietly(100); // just sleeps for 100 milliseconds
    }
  }

} 
```

此类确实在启动时报告了初始化，但在终止时我得到了 10 倍的输出，在此之后，JBoss 死了。

即使某些 PreDestroy 方法仍在运行，我该如何配置这个时间，直到 JBoss 杀死自己？

目前我从 Eclipse 启动和停止 JBoss（轮询器设置为 Web 端口）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T09:30:30.997

在关闭事件中，无法在 JBoss 7 上执行此操作（基于JBoss / WildFly 团队的[Tomaz Cerar的](https://developer.jboss.org/people/ctomc)[回答）。](https://developer.jboss.org/message/917305#917648)

在 Windows 上，我可以确认没有办法做到这一点（我假设对于 Linux 也是如此）。

我发现如果您在关闭服务器之前停止应用程序，它会起作用。即：登录到 web 控制台，导航到运行时（右上角的选项卡）-> 管理部署（菜单）-> 应用程序的“禁用”按钮。

在 WildFly 8 中，您可以获得关闭的“超时”选项。请参阅[这篇文章](https://issues.jboss.org/browse/WFLY-2591)了解如何使用它。

# sql - 避免sql中的代码重复

> ID：15135798
> 
> 赞同：0
> 
> 时间：2013-02-28T12:40:00.437
> 
> 标签：sql, sql-server, tsql, t4

我将通过说我的 sql 不是很好来作为这个问题的序言 :)

我们试图通过拥有 2 个冗余表在 sql 中构建双缓冲实现。在任何时候，一张表处于活动状态，另一张处于非活动状态。这些表由我们在重新加载数据后切换的视图访问。当我们重新加载时，我们希望对非活动表执行操作，然后在完成时切换活动缓存。

我们有很多看起来有点像的代码：

```
IF @activeCache = 0
   BEGIN WORK ON TABLE 1 AS IT IS INACTIVE
ELSE
   BEGIN WORK ON TABLE 0 AS IT IS INACTIVE 
```

问题是括号之间的代码不是微不足道的，所以我们最终复制了代码，唯一的区别是正在操作的表。我们认为表参数可能会有所帮助，但您无法插入其中（我们需要这样做）。我现在唯一的想法是使用 T4 模板为我们生成 crud，但我似乎无法让它们在数据库项目中工作。

有什么 sql 结构可以帮助我们吗？如果可能，我们宁愿不使用动态 sql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:29:00.270

您可以使用[`CREATE SYNONYM`](http://msdn.microsoft.com/en-us/library/ms177544.aspx)有效地为对象创建永久别名（或“同义词”，如果您愿意的话）。您可以运行一次逻辑来决定要定位哪个表，然后运行：

```
CREATE SYNONYM WorkingTable FOR Table1
CREATE SYNONYM MainTable FOR Table2 
```

然后切换：

```
DROP SYNONYM WorkingTable
DROP SYNONYM MainTable
CREATE SYNONYM WorkingTable FOR Table2
CREATE SYNONYM MainTable FOR Table1 
```

在您的脚本中的其他任何地方，您都可以参考`WorkingTable`更新和`MainTable`阅读。

话虽如此，我同意其他关于这是否是最佳工作方式的评论/答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:44:57.483

不要使用两个表并切换视图，而是使用一个主表和一个临时表。

当您准备好将数据迁移到主表时，您可以像这样在原子事务中执行此操作。

```
begin try
 begin tran
 delete * from MainTable with (tablockx)
 insert MainTable
 select * from StagingTable with (tablockx)
 commit

end try
begin catch
 rollback
 raiserror('An error occurred swapping staging data', 16,16)
end catch 
```

这样一来，您始终在临时表上工作，因此识别要使用的正确表没有困难。

根据数据，您可能希望对主表进行增量更新：

```
-- delete rows which no longer exist
delete MainTable 
from MainTable
where not exists (select 1 from StagingTable where StagingTable.primaryKey = MainTable.primaryKey)

-- Insert new rows
insert MainTable 
select * 
from StagingTable
where not exists (select 1 from MainTable where StagingTable.primaryKey = MainTable.primaryKey)

-- update rows which have changed
update MainTable 
set  
   col1 = stagingTable.col1,
   col2 = stagingTable.col2
from MainTable inner join StagingTable on  StagingTable.primaryKey = MainTable.primaryKey
where 1=2
   -- Need to compare every column, only update if one is different
   -- Both null counts as the same - compare nullity 
   OR case when MainTable.col1 is null then 0 else 1 end <> case when StagingTable.col1 is null then 0 else 1 end
   OR MainTable.col1 <> StagingTable.col1
   OR case when MainTable.col2 is null then 0 else 1 end <> case when StagingTable.col2 is null then 0 else 1 end
   OR MainTable.col2 <> StagingTable.col2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:07:26.593

您可以创建以@activeCache 作为参数的内联表值函数。根据该函数中的参数从适当的表中选择所有数据。TI 不确定性能。

# c# - 用于删除字符串的所有重复并分配给数组的正则表达式

> ID：15135799
> 
> 赞同：3
> 
> 时间：2013-02-28T12:40:03.787
> 
> 标签：c#, .net, regex, arrays

我在文件中有以下文本：

> "SHOP_ORDER001","SHOP_ORDER002","SHOP_ORDER003","SHOP_ORDER004","SHOP_ORDER005"

现在我通过读取文件并通过 spilt 分配给数组来获取值：

```
 String orderValue = "";
 string[] orderArray;
 orderValue = File.ReadAllText(@"C:\File.txt");
 orderArray = orderValue.Split(','); 
```

但我得到的值为： ![在此处输入图像描述](../Images/79645afa45fad2d44b3521caa3781c23.png)

我需要数组中的值为“ORDER001”、“ORDER002”、“ORDER003”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:45:28.767

您看到的`\"`只是由调试器可视化器添加的字符串（因为引号是一个特殊字符，需要转义以免混淆），不要担心它们不在您的`orderArray`.

如果您也想删除引号，那么您的数组将是：

```
SHOP_ORDER001
SHOP_ORDER002
...

```

只需使用它（使用 LINQ）：

```
var orderArray = orderValue.Split(',').Select(x => x.Trim('"')); 
```

顺便说一句`String.Split`，除非您**确定**每个字段永远不会包含逗号，否则它不是很健壮。

**编辑**
要回答您在评论中添加的观点，如果您需要删除`SHOP_`，只需写下：

```
var orderArray = orderValue.Split(',')
    .Select(x => x.Trim('"').Substring("SHOP_".Length)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T12:49:44.207

使用这个正则表达式

```
var res = Regex.Matches(orderValue, @"(?<=""SHOP_)[^""]+?(?="")"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:24:11.473

你可以使用这个：

```
string[] result = Regex.Split(orderValue, "(?:^\"SHOP_)|(?:\",\"SHOP_)|(?:\"$)"); 
```

但是，您将不得不跳过结果数组中的第一项和最后一项，因为它们始终是空字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-28T12:55:34.380

愚蠢的问题，但你为什么不做

```
.Replace("SHOP_", ""); 
```

# javascript - Firefox 中的光标位置问题

> ID：15135804
> 
> 赞同：2
> 
> 时间：2013-02-28T12:40:09.937
> 
> 标签：javascript, jquery, tinymce, signalr

我在我的 ASP.NET MVC4 Web 应用程序中使用 tinyMCE 作为插件。我还使用 SignalR 在服务器和客户端之间建立开放连接。我想做的是一个类似于 Google Docs 的实时编辑器。

到目前为止，我设法找到了一种方法，可以在一个浏览器的编辑器中进行编写，并将其显示在另一个浏览器的另一个打开的文档中。我之前在使用 tinyMCE 中的 setContent() 方法时遇到了光标位置的问题，光标被放在了前面，因此输出被反转了。

这通过以下两条语句解决：

```
ed.selection.select(ed.getBody(), true); 
ed.selection.collapse(false); 
```

但是现在我遇到的问题是，使用 Chrome 时，输出就像我希望的那样，即用光标在后面写，但是当我从 Firefox 浏览器写时，空格按钮被忽略，当我按下空格时，光标回去。

发生这种情况有什么特别的原因吗？此外，连接似乎存在速度问题，即当我快速键入最新内容（1 或 2 个字母）时，未提交。

这是我关于这个问题的所有代码：

```
@{
    ViewBag.Title = "- Editor";
    ViewBag.ContentStyle = "/Content/CSS/editor.css";
}

<script src="/Scripts/jquery-1.6.4.min.js" ></script>
<script src="/Scripts/jquery.signalR-1.0.0.js"></script>
<script src="/signalr/hubs"></script>
<script type="text/javascript" src="~/Content/tinyMCE/tiny_mce.js" ></script>
<script type="text/javascript" src="~/Scripts/EditorHandler.js"></script>
<script type="text/javascript">
    $(function () {
        tinyMCE.init({
            mode: "textareas",
            theme: "advanced",
            plugins: "emotions,spellchecker,advhr,insertdatetime,preview",

            // Theme options - button# indicated the row# only
            theme_advanced_buttons1: "newdocument,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,fontselect,fontsizeselect,formatselect",
            theme_advanced_buttons2: "cut,copy,paste,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,|,code,preview,|,forecolor,backcolor",
            theme_advanced_buttons3: "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_statusbar_location: "bottom",
            theme_advanced_resizing: false,

            setup: function (ed) {
                ed.onKeyUp.add(function (ed, e) {
                    var chat = $.connection.editorHub;

                    chat.client.broadcastMessage = function (message) {
                        tinyMCE.activeEditor.setContent(message);
                        ed.selection.select(ed.getBody(), true); 
                        ed.selection.collapse(false);
                        tinyMCE.activeEditor.focus();
                    };

                    $.connection.hub.start().done(function () {
                        var text = tinyMCE.activeEditor.getContent();
                        chat.server.send(text);
                    });
                });
            }
        });
    });
</script>

<form method="post" action="somepage">
        <textarea id="editor" name="content" cols="100" rows="30"></textarea>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:50:30.567

Looks like you might want to check out the possibility to get a tinymce bookmark. There are html bookmarks which are implemented using hidden spans with a certain class. And there are non-html bookmarks - i would use those.

```
// gets you a non-html bookmark which you can transfer to another server if need be
var bookmark = editor.selection.getBookmark(2, true);
editor.setContent(content);
editor.selection.moveToBookmark(bookmark); 
```

# html - Mozilla Firefox 中的 -webkit-transform 等价物

> ID：15135805
> 
> 赞同：1
> 
> 时间：2013-02-28T12:40:09.610
> 
> 标签：html, firefox, css, browser

我可以在 Chrome 中移动图像，但不能在 Firefox 中移动。我使用了以下代码：

```
var s= $("#body").scrollTop();
$("#logo").css("-webkit-transform","translateY("+(s/3)+"px)"); 
```

对于 Firefox，我尝试了以下代码：

```
$("#logo").css("-mozkit-transform","translateY("+(s/3)+"px)"); 
```

但它不起作用。

Firefox 的等价物是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T12:42:06.180

[https://developer.mozilla.org/pl/docs/CSS/transform](https://developer.mozilla.org/pl/docs/CSS/transform)

```
$("#logo").css("-moz-transform","translateY("+(s/3)+"px)"); 
```

对于其他浏览器：

```
transform:rotate(7deg);
-ms-transform:rotate(7deg); /* IE 9 */
-moz-transform:rotate(7deg); /* Firefox */
-webkit-transform:rotate(7deg); /* Safari and Chrome */
-o-transform:rotate(7deg); /* Opera */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T16:59:13.247

“Mozilla”版本是：

```
$("#logo").css("transform","translateY("+(s/3)+"px)"); 
```

没有前缀。事实上，所有非 WebKit 浏览器的当前版本都支持这一点。

# gdata-api - 来自 Google Gdata Contacts API 的公共图片网址

> ID：15135816
> 
> 赞同：2
> 
> 时间：2013-02-28T12:40:49.487
> 
> 标签：gdata-api

我正在尝试通过 Google GData Contacts API 显示相关用户。

```
URL feedUrl = new URL("https://www.google.com/m8/feeds/contacts/default/full");
Query q = new Query(feedUrl);
q.setMaxResults(max);
q.setUpdatedMin(q.getUpdatedMin());

ContactFeed feed = client.query(q, ContactFeed.class);

for(ContactEntry item : feed.getEntries()){
  [...]
} 
```

我知道 Google 上有个人资料的公共图片网址。

```
https://www.google.com/s2/photos/profile/{user_id}
https://plus.google.com/s2/photos/profile/{user_id}
https://profiles.google.com/s2/photos/profile/{user_id} 
```

但是，当我检索用户的联系人时，似乎没有可用于引用该 user_id 的字段。

# jsf-2 - 为什么richfaces 会访问execute 属性中没有指定的节点？

> ID：15135820
> 
> 赞同：0
> 
> 时间：2013-02-28T12:41:00.350
> 
> 标签：jsf-2, richfaces, ajax4jsf, seam2

我在这里工作的设置是 JBoss AS7 中的 JSF2 和 Seam-2.3。

我有一个管理器 bean，它在一个大模板中通过`<a4j:commandButton>`如下方式调用：

```
<rich:dataTable value="#{listFactory.getMyList()}" var="ll">
...
</rich:dataTable>

...
<a4j:repeat id="jobs" value="#{person.jobs}" var="job">
  <h:outputText value="#{job.name}" />
</a4j:repeat>
<a4j:commandButton value="more" immediate="true" 
  action="#{personManager.addJob}" render="jobs" limitRender="true" /> 
```

对应的代码来自`personManager`：

```
@Name("personManager")
@Scope(ScopeType.CONVERSATION)
public class PersonMgr {
  private Person person;

  @Begin(flushMode = FlushModeType.MANUAL)
  public void selectObjects() {
    // grab the person from the request if there's one
  }

  @End
  public void saveChanges() {
    em.flush();
  }

  public void addJob() {
    person.getJobs().add(new Job());
  }
} 
```

现在要做`personManager`的是调用`person.jobs.add(new Job())`私有的、仍然是瞬态的实体 bean `person`。在它执行此操作之前，请求会因以下堆栈跟踪而终止：

```
javax.el.ELException: /person.xhtml @412,95 value="#{listFactory.getMyList()}": org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: Person
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114) [jsf-impl-2.1.7-jbossorg-2.jar:]
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.richfaces.component.UISequence.getValue(UISequence.java:175) [richfaces-components-ui.jar:4.3.0.Final]
at org.richfaces.component.UISequence.createExtendedDataModel(UISequence.java:109) [richfaces-components-ui.jar:4.3.0.Final]
at org.richfaces.component.UIDataTableBase.createExtendedDataModel(UIDataTableBase.java:252) [richfaces-components-ui.jar:4.3.0.Final]
at org.richfaces.component.UIDataAdaptor.getExtendedDataModel(UIDataAdaptor.java:459) [richfaces-components-ui.jar:4.3.0.Final]
at org.richfaces.component.UIDataAdaptor.setRowKey(UIDataAdaptor.java:272) [richfaces-components-ui.jar:4.3.0.Final]
at org.richfaces.component.UIDataAdaptor.visitTree(UIDataAdaptor.java:1312) [richfaces-components-ui.jar:4.3.0.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIForm.visitTree(UIForm.java:371) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.richfaces.context.ExtendedPartialViewContextImpl.visitActivatorComponent(ExtendedPartialViewContextImpl.java:448) [richfaces-core-impl.jar:4.3.0.Final]
at org.richfaces.context.ExtendedPartialViewContextImpl.visitActivatorAtExecute(ExtendedPartialViewContextImpl.java:309) [richfaces-core-impl.jar:4.3.0.Final]
at org.richfaces.context.ExtendedPartialViewContextImpl.getExecuteIds(ExtendedPartialViewContextImpl.java:98) [richfaces-core-impl.jar:4.3.0.Final]
at org.richfaces.context.ExtendedPartialViewContextImpl.isExecuteAll(ExtendedPartialViewContextImpl.java:148) [richfaces-core-impl.jar:4.3.0.Final]
at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:929) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:] 
```

对此进行调试，ExtendedPartialViewContext 确实“得到”它应该只执行 commandButton 组件但随后似乎继续~~渲染~~遍历完整的 JSF 树？我的意思是，为什么还要评估该列表值？它甚至在一个应该在回发时评估的 div 中`rendered=false`。我一定在这里遗漏了一些明显的东西吗？

我首先想到的是可能 pages.xml 正在干扰（调用`selectObjects`，但操作具有属性`on-postback="false"`集）或者我需要添加`<a4j:keepAlive>`- 但由于 Richfaces4 中已经消失了，我不能真正做到这一点，不应该对话范围跨越AJAX 请求也是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:45:16.743

RichFaces 中存在一个错误，即扩展 UIDataAdaptor 的组件的 value 属性在“树访问”时进行评估，即使 render=false： [https ://issues.jboss.org/browse/RF-11382](https://issues.jboss.org/browse/RF-11382)

尝试更新到修复 bug 的 RichFaces 4.3.0.Final，或应用解决方法（应对每个扩展 UIDataAdaptor 的组件重复解决方法）：

```
public class UIDataTableWorkaround extends UIDataTable {
  @Override
  public void setRowKey(FacesContext facesContext, Object rowKey) {
    if (rowKey == null && getRowKey() == null) {
      return;
    }
    super.setRowKey(facesContext, rowKey);
  }
} 
```

在 faces-config 中：

```
 <component>
    <component-type>org.richfaces.DataTable</component-type>
    <component-class>com.example.UIDataTableWorkaround</component-class>
  </component> 
```

*   查看更多信息：[https ://community.jboss.org/message/741373#741373](https://community.jboss.org/message/741373#741373)

# jquery - JQuery 隐藏 UL 并且只扩展一次特定的类集（有点像手风琴）

> ID：15135822
> 
> 赞同：0
> 
> 时间：2013-02-28T12:41:10.987
> 
> 标签：jquery, menu, html-lists, accordion, slidedown

对的人，

在与 JQuery Accordion 尝试做我想做的事情之后，我认为隐藏所有辅助 UL 并仅在我的 CMS 在 lis 上自动设置的类后才扩展它们将是最简单的事情。我想拥有手风琴类型的功能，但是当特定的 ul 处于活动状态时，它必须展开/向下滑动。我已经意识到典型的 JQuery 手风琴不适合，因为我不会在 CMS 菜单输出中显示切换 li。

菜单代码在这里：

```
<ul id="amenu">
  <li><a href="anotherpage.html">Home</a></li><li><span class="currentbranch0">
      <a href="anotherpage2.html">Content</a></span>
        <ul class="multilevel-linkul-0" title="">
           <li><a href="subpage.html">Content 2</a></li>
           <li><span class="currentbranch1"><a href="subpage.html">Content 3</a></span></li>
       </ul>
  </li> 
```

```
//How to target this command to multilevel-linkul-0 class?
$(function(){
      $('ul li ul').slideDown();
}); 
```

（小提琴：http: [//jsfiddle.net/Dmhcq/5/](http://jsfiddle.net/Dmhcq/5/)）

-- 更新了 Fiddle 以准确显示我的意思，我只希望带有 currentbranch1 的辅助 UL 滑下

使用这段代码，基本上任何具有跨度类“currentbranch1”的东西都应该向下滑动，其余的应该保持隐藏。我一直在查看示例 JQuery 代码，甚至完全不知从何开始，我不是 JS 程序员 :)。所以不幸的是，上面是我最好的尝试。如果有人有任何建议，将不胜感激。:)

干杯

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:00:27.400

这很简单。你需要反过来做。找到具有类“currentbranch1”的元素并向上遍历到“multilevel-linkul-0”父级并告诉它向下滑动。

代码

```
//How to target this command to multilevel-linkul-0 class?
$(function(){
      $('.currentbranch1').parents('ul.multilevel-linkul-0').slideDown();
}); 
```

这是[Fiddle 的一个例子](http://jsfiddle.net/Fw5xX/)。

# java - 配置 Web 应用程序以在 JBoss 7 中显示索引页面（使用 Maven）

> ID：15135823
> 
> 赞同：0
> 
> 时间：2013-02-28T12:41:15.617
> 
> 标签：java, jakarta-ee, maven, jboss7.x

我试图让我的 JBoss Web 应用程序项目登陆一个简单的索引页面。这是一个 Maven 管理的项目。

索引页由客户可以输入名称的表单组成。然后 JAX RS 将客户端名称返回到屏幕。

我不确定我的配置是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:12:24.493

将您的索引页放入`src/main/webapp`，例如`index.html`，并将以下内容添加到您的`web.xml`：

```
<welcome-file-list>
  <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

# php - PHP CURL CURLOPT_SSL_VERIFYPEER 被忽略

> ID：15135834
> 
> 赞同：140
> 
> 时间：2013-02-28T12:41:50.517
> 
> 标签：php, ssl, curl, https

出于某种原因，我无法将 CURL 与 HTTPS 一起使用。在我升级 curl 库之前，一切正常。现在我在尝试执行 CURL 请求时遇到此响应： **SSL CA 证书问题（路径？访问权限？）**

按照此处发布的有关相关问题的建议，我尝试执行以下操作：

*   禁用主机和对等方的验证

    ```
    curl_setopt($cHandler, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($cHandler, CURLOPT_SSL_VERIFYPEER, true); 
    ```

*   启用`CURLOPT_SSL_VERIFYPEER`并指向从[http://curl.haxx.se/docs/caextract.html下载的 cacert.pem](http://curl.haxx.se/docs/caextract.html)

    ```
    curl_setopt($cHandler, CURLOPT_SSL_VERIFYPEER, true);  
    curl_setopt($cHandler, CURLOPT_CAINFO, getcwd() . "/positiveSSL.ca-bundle"); 
    ```

*   我还尝试对作为我尝试连接的服务器的捆绑 CA 证书提供的 positiveSSL.ca-bundle 做同样的事情。

*   编辑 php ini 设置`curl.cainfo=cacert.pem`（文件在同一目录中，可被 apache 访问）

*   重命名`/etc/pki/nssdb`为`/etc/pki/nssdb.old`

不幸的是，以上都无法解决我的问题，并且我不断收到 SSL CA 证书问题（路径？访问权限？）消息。

而且我首先不需要此验证（我知道安全问题）。

有人有其他建议吗？

**更新**

在更新到最新的库并重新启动整个机器之后，不仅仅是我正在做的 apache 现在似乎又可以工作了！！！

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2013-03-06T01:10:35.090

根据文档：要验证主机或对等证书，您需要使用该选项指定备用证书，`CURLOPT_CAINFO`或者可以使用该`CURLOPT_CAPATH`选项指定证书目录。

也看看`CURLOPT_SSL_VERIFYHOST:`

*   1 检查 SSL 对等证书中是否存在通用名称。
*   2 检查公用名是否存在，并验证它是否与提供的主机名匹配。

* * *

```
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-08T10:54:00.370

我们在 CentOS7 机器上遇到了同样的问题。禁用`VERIFYHOST` `VERIFYPEER`并没有解决问题，我们不再出现 cURL 错误，但响应仍然无效。对与 cURL 相同的链接执行`wget`操作也会导致证书错误。

-> 我们的解决方案也是重新启动 VPS，这解决了它，我们能够再次完成请求。

对我们来说，这似乎是一个内存损坏问题。重新启动 VPS 重新加载了内存中的库，现在它可以工作了。因此，如果上述解决方案`@clover`不起作用，请尝试重新启动您的机器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-23T04:01:47.147

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // Return data inplace of echoing on screen
curl_setopt($ch, CURLOPT_URL, $strURL);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); // Skip SSL Verification
$rsData = curl_exec($ch);
curl_close($ch);
return $rsData; 
```

# oracle - 用下一列值替换该列

> ID：15135840
> 
> 赞同：-2
> 
> 时间：2013-02-28T12:42:04.620
> 
> 标签：oracle, plsql, oracle10g, oracle11g

```
ADRLN1                                   ADRLN2                                   ADRLN3                                   ADRLN4                                   ADRCIT                    ADRSTA                    ADRCNY                    ADDRESS
---------------------------------------- ---------------------------------------- ---------------------------------------- ---------------------------------------- ------------------------- ------------------------- ------------------------- ----------
Tsrdl                                    address1                                 address2                                  dfdfdfdfdfdfdfdfdfdfdfdfdf              Alibaug                   Maharashtra               India                     412001
aaa aa Ltd.                              Mahalaxmi                                                                                                                  Mumbai                    Maharashtra                                         400011
190, SANDESH VIHAR (P&T)                 DELHI                                                                                                                                                                                                    110034
6/2/A LLOYDS GARDEN                      APPASAHEB MARATHE MARG                   PRABHADEVI                               MUMBAI                                                                                                                 400025 
```

以上数据是使用select查询从数据库中反映出来的

输出：

```
ADRLN1                                   ADRLN2                                   ADRLN3                                   ADRLN4                                   ADRCIT                    ADRSTA                    ADRCNY                    ADDRESS
---------------------------------------- ---------------------------------------- ---------------------------------------- ---------------------------------------- ------------------------- ------------------------- ------------------------- ----------
Tsrdl                                    address1                                 address2                                  dfdfdfdfdfdfdfdfdfdfdfdfdf              Alibaug                   Maharashtra               India                     412001
aaa aa Ltd.                              Mahalaxmi                                Mumbai                                    Maharashtra                             400011
190, SANDESH VIHAR (P&T)                 DELHI                                    110034
6/2/A LLOYDS GARDEN                      APPASAHEB MARATHE MARG                   PRABHADEVI                               MUMBAI                                   400025 
```

我需要以下方式的输出。假设如果任何一列是空白的，那么它应该被下一列值替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:53:37.827

你应该使用合并。例如，

```
select coalesce (ADRLN1, ADRLN2, ADRLN3, ADRLN4 ) as ADRLN1 
  coalesce (ADRLN2, ADRLN3, ADRLN4 ) as ADRLN2,
  coalesce (ADRLN3, ADRLN4 ) as ADRLN3,
  ADRLN2 as ADRLN2
from table; 
```

但是您应该继续使用逻辑来真正改变您的专栏。

**编辑**：似乎您想消除地址中的“空白”。

您可以做的一个技巧是选择列的串联：

```
select decode(ADRLN3, null, null, ADRLN3||',')||
   decode(ADRLN4, null, null, ADRLN4||',')||
   decode(ADRCIT, null, null, ADRCIT||',')||
   decode(ADRSTA, null, null, ADRSTA||',')||
   decode(ADRCNY, null, null, ADRCNY||',')||
   ADDRESS  as ADDRESS
from table; 
```

# ios - 将 self.managedObjectModel 连接到一个类

> ID：15135842
> 
> 赞同：0
> 
> 时间：2013-02-28T12:42:07.433
> 
> 标签：ios, objective-c, xcode

我正在使用核心数据和导航控制器。我的故事板由以下部分组成：（-> 表示已连接） UINavigationController -> UIViewController -> UITableViewController（主视图控制器）-> UITableViewController（详细视图控制器）Apple 的 Master-Detail 模板在 appDelegate 方法应用程序中提供以下内容：didFinishLoadingWithOptions 其中仅当情节提要包含 UINavigationController -> UITableViewController 时才真正起作用

`UINavigationController *navigationController = (UINavigationController *) self.window.rootViewController;`

`SSViewController *controller = (SSViewController *)navigationController.topViewController;`

`controller.managedObjectContext = self.managedObjectContext;`

这在我的情况下不起作用，因为 navigation.topViewController 将返回 UIView 控制器。那么我怎样才能从 application:didFinishLoadingMethod 到达第三个视图 UITableViewController 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:46:09.013

如果“连接”是指情节提要上的转接（这是我能看到的解释您的问题的唯一合乎逻辑的方式），那么答案是您不能直接。

相反，您在`UIViewController`子类上设置属性（无论默认的主 VC 和/或细节 VC 是什么，视情况而定），并将其传递给方法`UIViewController`链中的子类`prepareForSegue`。

通过适当的 VC 采用的协议来实现这一点通常很有用：

```
@protocol ContextHolder <NSObject>

@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;

@end 
```

在`prepareForSegue`中，您可以执行以下操作：

```
((id<ContextHolder>)segue.destinationViewController).managedObjectContext = self.managedObjectContext; 
```

# adobe - Adobe Content Server 的浏览器内阅读器

> ID：15135844
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:42:16.663
> 
> 标签：adobe, drm

是否有浏览器内、无 Flash 的方法来查看来自 Adob​​e Content Server 的电子书？

目前，我们通过功能丰富的“电子阅读器”网络应用程序（基于 HTML5/JS 的各种回退到 IE7）提供了一个 c.50k 专业电子书库。

However, management want to be able to offer "downloadable" ebooks for "mobile devices". By this they mean a file that the user can download and read offline. Adobe Content Server is fine for this (if a little expensive, and a little hated by the users, but unfortunately it's becoming an industry standard...)

OK so if we adopt ACS, making downloadable-for-offline-reading a possibility, what are the options for online reading, assuming we want to use ACS for everything and not just offline? In other words ... is there an in-browser reader for Adobe Content Server?

Flash is not a possibility as a) a lot of the users us iPads (yes for online reading too) and b) a lot of the users have to use IE7 with no Flash installed (the NHS is a major customer).

我意识到我可能会要求不可能的事情，但我认为值得倾听人们的想法。

请不要建议我不要使用 DRM，这不是我的选择，我已经建议不要使用它。但是，我们的供应商根据合同规定我们有义务为离线阅读提供“DRM 解决方案”。

如果有广泛可用的 Adob​​e Content Server 替代解决方案，我很想知道它。我已经集成了一次 ACS（第 3 版），并不太期待重复体验......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:07:34.510

有许多支持 ACS 的阅读器应用程序，例如 Sony Reader。您的读者可以使用这些应用程序（在“旁加载”您的书籍之后，这个过程因读者而异）来阅读 ACS 书籍。我不知道任何基于浏览器的阅读器，但在我看来，这些应用程序（适用于所有主要平台）应该可以为您完成工作。这些应用程序都保留了书籍的本地副本，并且可以在离线时正常工作。

# asp.net - 在 IIS 7 中将 asp.net 站点托管为 HTTPS

> ID：15135845
> 
> 赞同：1
> 
> 时间：2013-02-28T12:42:17.153
> 
> 标签：asp.net, iis, ssl, iis-7, hosting

我已经在 IIS 7 中开发和部署了 ASP.Net 站点。它运行良好。现在我的客户要求我仅使用 https 运行应用程序。所以我决定在 SSL 下运行主机。

但我是 SSL 或 https 的新手。在许多地方它要求我安装证书。

> 如何在 IIS 7 中不使用 X509 证书而仅启用 SSL？

是否有任何步骤/文章解释了没有 X509 证书的简单 SSL 以使用 https 运行站点？或者使用开发证书会带来什么问题？

# playframework-2.0 - 玩！2.1 Java完整的基本文件上传解决方案？

> ID：15135850
> 
> 赞同：2
> 
> 时间：2013-02-28T12:42:36.837
> 
> 标签：playframework-2.0

我的控制器中有以下基本操作（用于说明目的），它传递了一个 MultipartFormData 对象并检索图像和文件名。如果不为空，则将文件名打印到 sbt 控制台（它确实如此），然后根据播放[http://www.playframework.com/documentation/2.1.0/JavaFileUpload](http://www.playframework.com/documentation/2.1.0/JavaFileUpload)文档希望将其保存到文件中指定的目录。 renameTo（女巫不是）。

```
public static Result uploadProductImage(
        Http.MultipartFormData body
) {
    Http.MultipartFormData.FilePart image = body.getFile("image");

    if (image != null) {
        String fileName = image.getFilename();
        System.out.println(fileName);
        File file = image.getFile();
        file.renameTo(new File("/public/images/products", fileName));
    }
    return products();
} 
```

我找不到任何文档的部分是您如何将此文件实际移动到播放项目的公共文件夹中。我注意到斯卡拉家伙有这个功能

```
ref.moveTo() 
```

我知道至少有 2 到 3 个其他类似的问题，但它们没有描述如何将文件移动到项目目录。我在这里遗漏了一些基本上非常简单的东西，但我在网上的任何地方都找不到它的记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T05:12:53.487

经过进一步检查，事实证明 play 首先将上传的图像保存到系统特定的临时目录中，在我的情况下是`/tmp/`.

我的 linux 系统设置了三个分区：-

```
/boot
/
/home 
```

play 安装位于分区上，逻辑上与所在位置`/home`分开。在这种情况下，分区被视为单独的文件系统。`/``tmp`

javadoc 状态：-

> *重命名操作可能无法将文件从一个文件系统移动到另一个文件系统*

这意味着根据系统的不同，`File.renameTo()`可能无法跨两个不同的分区、磁盘或文件系统运行。这就是`.renameTo()`失败的原因。

解决方案：-

使用 apache commons io`FileUtils.moveFile()`

在`Build.scala`添加`"org.apache.directory.studio" % "org.apache.commons.io" % "2.4"`

```
val appDependencies = Seq(
    javaCore, jdbc, javaJdbc, javaEbean,
    "org.apache.directory.studio" % "org.apache.commons.io" % "2.4"
) 
```

在游戏控制台中使用`play clean compile`.

如果使用 IDEA`play idea`

```
public static Result uploadProductImage(
        Http.MultipartFormData body
) {
    Http.MultipartFormData.FilePart image = body.getFile("image");

    if (image != null) {
        String fileName = image.getFilename();
        File file = image.getFile();
        try {
            FileUtils.moveFile(file, new File("public/images/products", fileName));
        } catch (IOException ioe) {
            System.out.println("Problem operating on filesystem");
        }
    }
    return products();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:17:53.887

使用相对路径而不是绝对路径（到文件系统）

```
file.renameTo(new File("public/images/products", fileName)); 
```

# css - 如何设置边距：自动到无序列表？

> ID：15135851
> 
> 赞同：1
> 
> 时间：2013-02-28T12:42:41.177
> 
> 标签：css

我需要`<ul>`使用`margin: 0 auto;`

如果我为 ul 元素 ( ) 设置宽度，`width:300px`那么它可以正常工作。但我不能这样做，因为它是一个动态列表，所以宽度一直在变化。

**HTML：**

```
<div>
<ul>
<li>hello</li>
<li>bye</li>
</ul>
</div> 
```

**CSS：**

`ul{margin:0 auto;}`但它不起作用。

`ul{margin:0 auto;width:300px;}`有效，但我不能以这种方式设置宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:46:03.347

然后这样写：

```
div{
 text-align:center;
}

ul{
 display:inline-block;
 *display:inline; /* For IE7 */
 *zoom:1; /* For IE7 */
 vertical-align:top;
} 
```

检查这个[http://jsfiddle.net/Wg9Dz/](http://jsfiddle.net/Wg9Dz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:44:58.890

而不是你可以使用

html

```
<div class = "margin-me">
<ul>
<li>hello</li>
<li>bye</li>
</ul>
</div> 
```

css

```
.margin-me, margin-me ul{margin:0 auto;} 
```

# asp.net-mvc - ASP.NET MVC 4 路由用户名/操作问题

> ID：15135854
> 
> 赞同：5
> 
> 时间：2013-02-28T12:42:55.147
> 
> 标签：asp.net-mvc, asp.net-mvc-4, routes, asp.net-mvc-routing

我目前正在开发一个 asp.net mvc 4 应用程序，我需要以下类型的 url：

**需要路由的url**

> 1.  [http://www.mysite.com/foo/user1](http://www.mysite.com/foo/user1) <------- {用户名}
> 2.  [http://www.mysite.com/foo/edit](http://www.mysite.com/foo/edit)
> 3.  [http://www.mysite.com/foo/delete/1](http://www.mysite.com/foo/delete/1)
> 4.  [http://www.mysite.com/bar/user1](http://www.mysite.com/bar/user1) <-------- {用户名}
> 5.  [http://www.mysite.com/bar/edit](http://www.mysite.com/bar/edit)
> 6.  [http://www.mysite.com/bar/delete/1](http://www.mysite.com/bar/delete/1)

我遇到的问题是当前 {username} 被视为一项操作，因此为了解决我实现了以下路由的问题，但这意味着每次我想实现一个新操作，或者有一个需要的控制器{username}，我必须更新我的路线：

**仅显示 Foo 路线**

```
routes.MapRoute("FooSomeAction", "foo/someaction", new { controller = "Food", action = "SomeAction" });            
routes.MapRoute("FooDelete", "foo/delete/{id}", new { controller = "Food", action = "Delete" });            

routes.MapRoute(
    "FooProfile",
    "foo/{username}",
    new { controller = "Foo", action = "Index", username = "" }
);

// Default route
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

**2 个问题**

1) 有什么方法可以在不对所有路由进行硬编码的情况下实现上述网址？

2) 处理某人使用的用户名恰好与控制器或操作名称相同的情况的最佳方法是什么？

点网阴影

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:59:39.293

您可以创建一个自定义路由约束来检查用户名是否存在于控制器的可能操作中。如果它找到一个动作匹配，它会失败并使用你的默认路由（例如编辑）。出于性能原因，您可能希望缓存该列表，但我将其留给您。

```
 private static List<Type> GetSubClasses<T>()
    {
        return Assembly.GetCallingAssembly().GetTypes().Where(
            type => type.IsSubclassOf(typeof(T))).ToList();
    }

    public static  List<string> GetActionNames(string controllerName)
    {
        controllerName = controllerName + "Controller";
        var controller = GetSubClasses<Controller>().FirstOrDefault(c => c.Name == controllerName);

        var names = new List<string>();
        if (controller != null)
        {
            var methods = controller.GetMethods(BindingFlags.Public | BindingFlags.Instance);
            foreach (var info in methods)
            {
                if (info.ReturnType == typeof(ActionResult))
                {
                    names.Add(info.Name);
                }
            }

        }
        return names;
    }

    public class UsernameNotAction : IRouteConstraint
    {
        public bool Match
            (
                HttpContextBase httpContext,
                Route route,
                string parameterName,
                RouteValueDictionary values,
                RouteDirection routeDirection
            )
        {
            int i = 0;
            var username = values["username"];
            var actionList =  GetActionNames(values["controller"].ToString());

            return !actionList.Any(a => a.ToUpper() == username.ToString().ToUpper());
        }
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "FooProfile",
            "{controller}/{username}",
            new { controller = "Home", action = "Index2", username = "" },
            new { IsParameterAction = new UsernameNotAction() }
        );
        // Default route
        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:06:15.737

这不是您真正想要的答案，抱歉。

1）没有办法那样路由。除了您所做的之外，没有什么可以将这些路线彼此区分开来。我不得不质疑为什么这甚至是必要的，我相信你有充分的理由，但这对我来说毫无意义。您仍在使用 Index 操作，所以为什么不直接使用 /foo/index/username。我所能想到的，是您出于某种原因无法控制网址。

2）如果你使用默认路由，没有问题。用你的路由，有问题。您唯一真正的选择是使您的控制器和操作名称保留字（防止用户在数据库中使用这些用户名创建）。

对不起，我真的帮不了你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:05:46.367

你不能那样做，除非你路由每条路线，这不是最好的方法。

在其中包含 Action 名称有什么问题？

# c++ - 来自模板类型的临时常量以及为什么使用 std::add_const？

> ID：15135859
> 
> 赞同：9
> 
> 时间：2013-02-28T12:43:03.810
> 
> 标签：c++, visual-c++, c++11, overloading, typetraits

以下代码摘自[cppreference.com](http://en.cppreference.com/w/cpp/types/add_cv)。

```
#include <iostream>
#include <type_traits>

struct foo
{
    void m() { std::cout << "Non-cv\n"; }
    void m() const { std::cout << "Const\n"; }
};

template <class T>
void call_m()
{
    T().m();
}

int main()
{
    call_m<foo>();
    call_m<std::add_const<foo>::type>();
} 
```

但是，当使用 VC++ Nov 2012 CTP 编译时，输出为

> 非简历
> 
> 非简历

而不是预期的：

> 非简历
> 
> 常量

此外，以下两个语句之间有什么区别：

`call_m<const foo>();`

和

`call_m<std::add_const<foo>::type>();`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T13:09:00.890

这似乎是 MSVC 的一个错误。使用形式的表达式`T()`（就标准而言，这是一种显式类型转换）会产生指定类型的纯右值。

> 表达式`T()`，其中是非数组完整对象类型或（可能是 cv 限定的）类型`T`的*简单类型说明符*或类型名称说明*符*`void`，创建指定类型的纯右值，它是值初始化的

`const`由于非类纯右值不能具有 cv 限定类型的规则，只有非类类型才会被忽略：

> 类纯右值可以有 cv 限定类型；非类纯右值始终具有 cv 非限定类型。

所以`T()`这里创建的临时对象应该`const`也应该调用`const`成员函数。

至于你什么时候用，为什么用`std::add_const`，我们可以看一下它被列入[提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1424.htm)的原因。它指出 , `add_const`, `add_volatile`,`add_cv`和`add_pointer`type`add_reference`特征已从提案中删除，但在 Boost 用户投诉后又恢复了。

> 理由是这些模板都用作编译时函子，将一种类型转换为另一种类型 [...]

给出的例子是：

```
// transforms 'tuple<T1,T2,..,Tn>'
// to 'tuple<T1 const&,T2 const&,..,Tn const&>'
template< typename Tuple >
struct tuple_of_refs
{
   // transform tuple element types
   typedef typename mpl::transform<
      typename Tuple::elements,
      add_reference< add_const<_1> > // here!
   >::type refs;
   typedef typename tuple_from_sequence<refs>::type type;
};

template< typename Tuple >
typename tuple_of_refs<Tuple>::type
tuple_ref(Tuple const& t)
{
    return typename tuple_of_refs<Tuple>::type(t);
} 
```

您可以认为`mpl::transform`将编译时元编程等同于函数指针作为其第二个模板参数 -`add_reference<add_const<...>>`应用于`Tuple::elements`. 这根本无法用`const`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T13:19:16.233

根据我的记忆，您可以在函数声明中编写 3 个 consts（3 是目的数）。

在返回类型之前，函数及其参数之后，以及参数本身。

函数签名末尾的 const 意味着该函数应该假定它作为成员的对象是 const。实际上，这意味着您要求编译器检查成员函数是否不会以任何方式更改对象数据。这意味着要求编译器检查它是否没有直接更改任何成员数据，并且它不会调用任何本身不保证不会更改对象的函数。

在返回类型之前意味着函数要返回的东西应该是一个常量。

const 参数表示该参数不能更改。

所以这里的区别是，第一个调用不是 const 所以它转到“非 cv”，第二个调用是一个 const，所以转到“const”。

我认为为什么 VC++ 两次都使用同一个函数是 call_m 显式调用 T().m() 认为它不应该使用 const 函数。

# opengl - openGL 转换和 gluLookAt()

> ID：15135861
> 
> 赞同：1
> 
> 时间：2013-02-28T12:43:10.447
> 
> 标签：opengl

我有一个代表简单 3D 场景的学习项目。我想在某个非原点绘制球体。稍后我将把它实现为单独的函数或方法。

我正在使用设置观点，`gluLookAt()`然后我正在使用`glTranslatef()`很少的偏移量和绘图球体来转换模型视图矩阵。不幸的是，没有显示球体。我对模型视图矩阵的接近是否正确？

```
void display(void){    
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity();
    gluLookAt(1, 0 ,1, 0, 0, 0, 0, 1, 0);    
    glColor3b(197, 96, 63);    
    glPushMatrix(); 
    glLoadIdentity();
    glTranslatef(0.1, 0, 0);
    glutWireSphere(0.2, 20, 10);
    glPopMatrix();     
    glFlush();
}

void reshape(int w, int h){
    glViewport(0, 0, (GLsizei) w, (GLsizei) h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho ((float)w/(float)h, (float)-w/(float)h, -1, 1, 0.8, 100);
    glMatrixMode(GL_MODELVIEW);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:02:16.020

不，你不是。

```
gluLookAt(1, 0 ,1, 0, 0, 0, 0, 1, 0); 
glColor3b(197, 96, 63);    
glPushMatrix(); 
glLoadIdentity(); // why it should be there? 
```

通过将视图矩阵归零，您将相对于原点坐标绘制对象，**而不考虑您的 glLookAt**。对它的调用实际上被忽略了。它应该被编码为：

1.  设置“相机矩阵”
2.  将矩阵推入堆栈
3.  平移到对象的位置
4.  绘制对象
5.  弹出并返回 2。

因此，如果要设置假设的“相机”，则必须*将*对象的位置与相机矩阵本身结合起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:06:57.787

你的方法看起来并没有那么不合理。问题在这里：

```
glPushMatrix(); 
glLoadIdentity();
glTranslatef(0.1, 0, 0); 
```

推送（以及后来的弹出）是一个好主意，但是通过在转换之前将矩阵设置为恒等式，您会丢失之前完成的任何转换，特别是使用`gluLookAt`. 因此，只需删除它`glLoadIdentity`即可正确连接各个转换。

始终牢记所有矩阵变换函数，例如`glTranslate`, `glOrtho`，或`gluLookat`始终修改当前选择的 (with `glMatrixMode`) 矩阵，而不仅仅是替换它。`glLoadIdentity`这也是您在调用`glOrtho`and之前执行 a 的原因`gluLookAt`。

# sql-server-2008 - SSRS 中的自定义 tablix 过滤器

> ID：15135862
> 
> 赞同：0
> 
> 时间：2013-02-28T12:43:12.737
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我有一份报告，其中显示了一个完整的原始数据表。在输入此报告之前，父报告会要求您选择“服务”和“部门” 根据您从父报告中选择的服务/部门，此 RAW 数据将被过滤以显示相关数据。

直截了当，而且效果很好，很棒。

我现在有一个新要求。如果选择的服务等于“服务 X”，我需要在该服务、部门再次过滤数据，还需要在他们的“团队”上添加额外的过滤器。

这样数据也将在团队与运行报告团队的用户匹配的地方被过滤。

我已经创建了一个数据集，它返回运行报告“团队”的用户以及一个名为“团队”的新参数，默认为运行报告的用户 AD 编号

新的要求是，如果是`Service = X`，则过滤部门和用户“团队”上的数据，如果服务不等于 X，则什么也不做。

我想我需要更改 Tablix 属性的过滤器部分，但不确定我需要在表达式、运算符、值中添加什么

到目前为止，我已经尝试`=IIf(Fields!Service.Value = "Service X", Fields!Team.Value, nothing)`在表达式中，将运算符设置为`In`并尝试从存储当前用户“团队”的新数据集中过滤“团队”，但它不起作用。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:15:10.423

For these sorts of conditional filters I've had best results with using the `IIf` statement (or whatever) to return a string and filtering based on that, e.g. something like:

```
=IIf(Parameters!Service.Value <> "Service X" or Parameters!Team.Value = Fields!Team.Value
    , "Include"
    , "Exclude") 
```

Then you can set the Operator to `=` and the filter value to `Include`. Just seems to a bit more robust in my experience.

Reading over this, you could even set the `IIf` statement up as a Calculated Column in the dataset and filter on that.

# javascript - Web Audio Api 问题（DOM Exception 12）

> ID：15135868
> 
> 赞同：2
> 
> 时间：2013-02-28T12:43:32.050
> 
> 标签：javascript, api, google-chrome, web, html5-audio

我在带有音频 API 的 Chrome 上发出了奇怪的错误（SYNTAX_ERR: DOM Exception 12）。我第一次尝试了 Audio Api 并做了 Kyle Nau 的教程（几次）（[http://www.youtube.com/watch?v=1wYTkZVQKzs](http://www.youtube.com/watch?v=1wYTkZVQKzs)）。当我使用简单的 mp3 运行代码时，所有声音都可以正常播放，但是当我尝试从同一个教程中添加音量控制块时，只会播放新对象创建列表中的最后一个声音。两个首先在播放中显示“SYNTAX_ERR: DOM Exception 12”。我检查了 mp3 并更改了声明的位置 = 同样的不良影响。删除音量控制，一切都会再次正常播放。在本教程中一切都很好。

测试表明，取消注释此部分时会出现问题：

```
 playSound.connect(this.gainNode);
        this.gainNode.connect(audioContext.destination); 
```

我不明白为什么会出现此错误。

这里代码。这是很好的工作变体（我用评论标记了问题的地方）：

```
 function Sound(source, level) {
    if (!window.audioContex) {
        audioContext = new webkitAudioContext;
    };
    var that = this;
    that.source = source;
    that.buffer = null;
    that.isLoaded = false; 
```

// that.gainNode = audioContext.createGain();

// if (!level) {

// that.gainNode.gain.value = 1;

// } 别的 {

// that.gainNode.gain.value = level;

// };

```
 var getSound = new XMLHttpRequest();
    getSound.open("GET",that.source,true);
    getSound.responseType = "arraybuffer";
    getSound.onload = function() {
        audioContext.decodeAudioData(getSound.response,function(buffer) {
            that.buffer = buffer;
            that.isLoaded = true;               
        });
    };
    getSound.send();
};

Sound.prototype.play = function(){
    if(this.isLoaded === true) {
        var playSound = audioContext.createBufferSource();
        playSound.buffer = this.buffer; 
```

// playSound.connect(this.gainNode);

// this.gainNode.connect(audioContext.destination);

```
 playSound.connect(audioContext.destination);
        playSound.noteOn(0);
    };
}; 
```

// Sound.prototype.setVolume = function(level) {

// this.gainNode.gain.value = level;

// };

```
var laserSound = new Sound("sound/laser.mp3");
var dropSound = new Sound("sound/drop.mp3");
var pickupSound = new Sound("sound/pickup.mp3"); 
```

//laserSound.setVolume(.1);

```
window.addEventListener("keydown", onKeyDown);

function onKeyDown(event) {
    switch (event.keyCode) {
        //Z
        case 90: 
            laserSound.play();
        break;
        //X
        case 88:
            dropSound.play();
        break;
        //C
        case 67:
            pickupSound.play();
        break;
    };

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:44:18.270

在注释掉的第一行中创建增益节点时，它必须是 audioContext.createGainNode(); 而不是 audioContext.createGain();

看起来您缺少节点。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T15:04:51.423

您在某处有语法错误。您不需要在函数声明之后放置分号。在这种情况下，您只能使用分号：

```
var myFunction = function(){

}; 
```

# date - 日期值作为浮点数 - Apple 的 iWork Numbers 09 - 内部 XML

> ID：15135871
> 
> 赞同：1
> 
> 时间：2013-02-28T12:43:46.553
> 
> 标签：date, datetime, date-format, iwork

我正在用 PHP 编写一个脚本，它将 Numbers 文件转换为 HTML 表，但我无法弄清楚日期存储使用哪种格式。日期单元格标记看起来像

```
<sf:d 
    sf:s="SFTCellStyle-128" 
    sf:w="84.074219" 
    sf:h="14" 
    sf:cell-date="371397519.99999952" /> 
```

所以日期必须在 sf:cell-date 属性中，但我不知道如何将其转换为人类可读的格式。有任何想法吗？我从未将日期值视为浮点数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:21:57.557

正如评论中所写，它是自 01/01/2001 00:00:00 以来的秒数。具备了这些知识，因为这与[UNIX Epoch 密切](http://en.wikipedia.org/wiki/Unix_time)相关，所以您需要做的就是定义和使用偏移量。它应该与几乎所有现有的 PHP 日期函数和对象兼容，例如[`date`](http://php.net/date)：

```
define('CELL_DATE_EPOCH_OFFSET', 978307200);

$sf_cell_date = 371397519.99999952;

echo date('r', CELL_DATE_EPOCH_OFFSET + $sf_cell_date); 
```

这个小脚本的输出是（在我的时区）：

```
Mon, 08 Oct 2012 15:58:39 +0200 
```

我希望这是有帮助的。*`978307200`*是 的 unix 时间戳`01/01/2001 00:00:00 UTC`，您可以使用 PHP 例如以下代码示例：

```
$base = new DateTime('01/01/2001 00:00:00 UTC');

echo $base->getTimestamp(), "\n"; 
```

如果那是你的问题。

# lucene - 相似度计算和查询时间值之间的 Lucene fieldNorm 差异

> ID：15135872
> 
> 赞同：4
> 
> 时间：2013-02-28T12:43:56.020
> 
> 标签：lucene, indexing, metrics

我试图了解如何`fieldNorm`计算（在索引时）然后在查询时使用（并且显然是重新计算）。

在所有示例中，我都使用没有停用词的 StandardAnalyzer。

在索引内容时调试`DefaultSimilarity`'`computeNorm`方法，我注意到对于 2 个特定文档，它返回：

*   文档 A 为 0.5（其字段中有 4 个标记）
*   文档 B 为 0.70710677（其字段中有 2 个标记）

它通过使用以下公式来做到这一点：

```
state.getBoost() * ((float) (1.0 / Math.sqrt(numTerms))); 
```

boost 始终为 1

之后，当我查询这些文档时，我看到在查询说明中我得到

*   `0.5 = fieldNorm(field=titre, doc=0)`对于文件 A
*   `0.625 = fieldNorm(field=titre, doc=1)`对于文件 B

这已经很奇怪了（对我来说，我敢肯定是我错过了一些东西）。为什么我得到的字段规范值与索引时计算的值不同？这是正在实施的“查询规范化”吗？如果是这样，它是如何工作的？

然而，这或多或少是可以的，因为两个查询时 fieldNorm 给出的顺序与索引时计算的顺序相同（在这两种情况下，值较短的字段具有较高的 fieldNorm）

然后，我创建了自己的 Similarity 类，在其中实现了 computeNorms 方法，如下所示：

```
public float computeNorm(String pField, FieldInvertState state) {
    norm = (float) (state.getBoost() + (1.0d / Math.sqrt(state.getLength())));
    return norm;
} 
```

在索引时间，我现在得到：

*   1.5 用于文档 A（其字段中有 4 个标记）
*   1.7071068 用于文档 B（其字段中有 2 个标记）

但是现在，当我查询这些文档时，我可以看到它们都具有与 explain 函数报告的相同的字段规范：

*   `1.5 = fieldNorm(field=titre, doc=0)`对于文件 A
*   `1.5 = fieldNorm(field=titre, doc=1)`对于文件 B

对我来说，这现在真的很奇怪，如果我在索引时使用一个明显很好的相似性来计算 fieldNorm，这给了我与令牌数量成正比的适当值，后来，在查询时，所有这些都丢失了，怎么办？查询说两个文档具有相同的字段规范？

所以我的问题是：

*   为什么Similarity的computeNorm方法报告的索引时间fieldNorm与查询解释报告的索引时间不一样？
*   为什么，对于在索引时获得的两个不同的 fieldNorm 值（通过相似性 computeNorm），我在查询时得到相同的 fieldNorm 值？

== 更新

好的，我在[Lucene 的文档](http://lucene.apache.org/core/3_6_2/api/core/org/apache/lucene/search/Similarity.html#formula_norm)中找到了一些东西，它澄清了我的一些问题，但不是全部：

*然而，结果规范值在存储之前被编码为单个字节。在搜索时，从索引目录中读取标准字节值并将其解码回浮点标准值。这种编码/解码虽然减少了索引大小，但也带来了精度损失——不能保证 decode(encode(x)) = x。例如，decode(encode(0.89)) = 0.75。*

有多少精度损失？我们应该在不同的值之间设置一个最小差距，以便即使在重新计算精度损失之后它们仍然保持不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T19:24:47.667

[encodeNormValue](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html#encodeNormValue(float))的文档描述了编码步骤（这是丢失精度的地方），特别是值的最终表示：

> 编码使用 3 位尾数、5 位指数和 15 处的零指数点，因此表示从大约 7x10^9 到 2x10^-9 的值，具有大约一位有效十进制数字的精度。零也被表示。负数四舍五入为零。太大而无法表示的值会向下舍入到最大的可表示值。太小而无法表示的正值被四舍五入到可表示的最小正值。

了解尾数只有 3 位的最相关部分，这意味着精度大约是一个有效的十进制数字。

关于基本原理的重要说明是在您的报价结束后的几句话，Lucene 文档说：

> 支持对规范值进行这种有损压缩的基本原理是，考虑到用户通过查询表达其真实信息需求的困难（和不准确性），**只有大的差异才重要**。

# java - 将 int 转换为位数组并对这些位进行旋转操作

> ID：15135881
> 
> 赞同：-1
> 
> 时间：2013-02-28T12:44:25.987
> 
> 标签：java, type-conversion, bit-manipulation

有没有一种方法可以将 int 值转换为它的位表示，然后旋转这些位并将它们转换回 JAVA 中的 int，例如

考虑到每个 int 是 4 个字节

```
17 = 0000 0000 0000 0000 0000 0000 0001 0001 
```

在旋转或向右循环之后让我们说 20 位

```
0000 0000 0000 0001 0001 0000 0000 0000  = 69632 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:52:20.410

看看方法[`Integer.rotateLeft`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#rotateLeft%28int,%20int%29)，，，[`Integer.rotateRight`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#rotateRight%28int,%20int%29)。[`Integer.toBinaryString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toBinaryString%28int%29)Java API 中已经提供了您所需的一切。

# javascript - 如何访问 http 响应标头

> ID：15135883
> 
> 赞同：0
> 
> 时间：2013-02-28T12:44:38.393
> 
> 标签：javascript

```
<html>
<body>

<script src="something"></script>

<img src="something">

<script>
window.onload = function () {

//code logic here

}
</script>
</body>
</html>

I want to access the http response headers for all the http requests of this page so that I can determine their status. 
```

例如第一个脚本请求的响应头和随后的其他请求。

换句话说，我想数数。响应状态为错误的请求数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:47:34.753

尝试这个：

```
var req = new XMLHttpRequest();
req.open('GET', document.location, false);
req.send(null);
var headers = req.getAllResponseHeaders().toLowerCase();
alert(headers); 
```

# appfabric-cache - 命名缓存与区域

> ID：15135890
> 
> 赞同：1
> 
> 时间：2013-02-28T12:44:54.410
> 
> 标签：appfabric-cache

我有以下要求：

1）我的缓存框架应该支持全局缓存和应用程序明智（基于应用程序部署的国家）缓存。

2) 全局缓存将包含所有应用程序的共享对象

3) 对于应用程序缓存，我应该使用命名缓存还是区域？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:36:47.037

区域提供搜索功能，但通过将缓存对象限制为单个缓存主机，区域的使用在功能和可伸缩性之间进行了权衡。

命名缓存，也称为缓存，是默认容器，跨越集群中的所有缓存主机。即使有 128 个命名缓存的限制，我们也可以通过在缓存键中使用前缀来找到绕过此限制的方法。

# c# - 如何在路径的给定部分下面找到文件夹？

> ID：15135896
> 
> 赞同：0
> 
> 时间：2013-02-28T12:45:12.133
> 
> 标签：c#, .net, directory-traversal

给定路径和某个部分，我如何才能找到该部分正下方的文件夹名称？

这很难解释，让我举几个例子。假设我正在寻找“Dev/Branches”下面的文件夹名称。以下是示例输入，预期结果以粗体显示

*   C:\Code\Dev\Branches\**最新**\bin\abc.dll
*   C:\开发\分支\ **5.1**
*   D:\My Documents\Branches\ **7.0** \Source\Tests\test.cs

我正在使用 C#

编辑：我想我可以使用正则表达式`/Dev/Branches/(.*?)/`捕获第一组，但是没有正则表达式有没有更简洁的解决方案？无论如何，那个正则表达式在第二种情况下会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:28:11.817

这是完全符合您期望的代码：

```
public static string GetSubdirectoryFromPath(string path, string parentDirectory, bool ignoreCase = true)
{
    // 1\. Standarize the path separators.
    string safePath = path.Replace("/", @"\");
    string safeParentDirectory = parentDirectory.Replace("/", @"\").TrimEnd('\\');

    // 2\. Prepare parentDirectory to use in Regex.
    string directory = Regex.Escape(safeParentDirectory);

    // 3\. Find the immediate subdirectory to parentDirectory.
    Regex match = new Regex(@"(?:|.+)" + directory + @"\\([^\\]+)(?:|.+)", ignoreCase ? RegexOptions.IgnoreCase : RegexOptions.None);

    // 4\. Return the match. If not found, it returns null.
    string subDirectory = match.Match(safePath).Groups[1].ToString();
    return subDirectory == "" ? null : subDirectory;
} 
```

一个测试代码：

```
void Test()
{
    string path1 = @"C:\Code\Dev\Branches\Latest\bin\abc.dll";
    string path2 = @"C:\Dev\Branches\5.1";
    string path3 = @"D:\My Documents\Branches\7.0\Source\test.cs";

    Console.WriteLine("Matches:");
    Console.WriteLine(GetSubdirectoryFromPath(path1, "dev/branches/") ?? "Not found");
    Console.WriteLine(GetSubdirectoryFromPath(path1, @"Dev\Branches") ?? "Not found");
    Console.WriteLine(GetSubdirectoryFromPath(path3, "D:/My Documents/Branches") ?? "Not found");
    // Incorrect parent directory.
    Console.WriteLine(GetSubdirectoryFromPath(path2, "My Documents") ?? "Not found");
    // Case sensitive checks.
    Console.WriteLine(GetSubdirectoryFromPath(path3, @"My Documents\Branches", false) ?? "Not found");
    Console.WriteLine(GetSubdirectoryFromPath(path3, @"my Documents\Branches", false) ?? "Not found");

    // Output:
    //
    // Matches:
    // Latest
    // Latest
    // 7.0
    // Not found
    // 7.0
    // Not found
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:19:36.570

```
// starting path
string path = @"C:\Code\Dev\Branches\Latest\bin\abc.dll";

// search path
string search = @"Dev\Branches";

// find the index of the search criteria
int idx = path.IndexOf(search);

// determine whether to exit or not
if (idx == -1 || idx + search.Length >= path.Length) return;

// get the substring AFTER the search criteria, split it and take the first item
string found = path.Substring(idx + search.Length).Split("\\".ToCharArray(), StringSplitOptions.RemoveEmptyEntries).First();

Console.WriteLine(found); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T11:24:06.117

我和这个一起去了

```
public static string GetBranchName(string path, string prefix)
{
    string folder = Path.GetDirectoryName(path);

    // Walk up the path until it ends with Dev\Branches
    while (!String.IsNullOrEmpty(folder) && folder.Contains(prefix))
    {
        string parent = Path.GetDirectoryName(folder);
        if (parent != null && parent.EndsWith(prefix))
            return Path.GetFileName(folder);

        folder = parent;
    }

    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:49:29.993

Break it down into smaller steps and you can solve this yourself:

1.  (Optional, depending on further requirements): Get the directory name (file is irrelevant): [`Path.GetDirectoryName(string)`](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)
2.  Get its parent directory [`Directory.GetParent(string)`](http://msdn.microsoft.com/en-us/library/system.io.directory.getparent%28v=vs.110%29.aspx).

This comes down to;

```
 var directory = Path.GetDirectoryName(input);
 var parentDirectory = Directory.GetParent(directory); 
```

The supplied `C:\Dev\Branches\5.1` -> `5.1` does not conform to your specification, that is the directory name of the input path itself. This will output `Branches`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T12:50:17.780

```
new Regex("\\?" + PathToMatchEscaped + "\\(\w+)\\?").Match()... 
```

# c++ - 如何通过地图 使用 Rcpp 从 C++ 到 R

> ID：15135900
> 
> 赞同：2
> 
> 时间：2013-02-28T12:45:27.060
> 
> 标签：c++, r, map, stl, rcpp

查看 Rcpp 作者的[论文](http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-introduction.pdf)，我在第 6 页和第 7 页看到，只要是“可包装的” `map<T>`，就可以从 C++ 传递到 R。我有一个我想传递给 R 的东西。我希望可以将钥匙投射到或其他东西中，但我知道这不是魔术。`map<string,T>``T``map<double,vector<double> >``double``string``wrap`

你有什么建议可以让我在不将整个地图复制到另一个地图的情况下输出这样的地图`map<string, vector<double>>`（毕竟这很可能是一个 C++ 问题）？

在下面找到一个`map<double,string>`可复制示例的示例。

```
cCode <- '
    map<double,string> myMap;
    myMap[10.01] = "A1";
    myMap[14.62] = "B1";
    myMap[16.33] = "C1";

    return wrap(myMap); //this failed
';
mapRet <- cxxfunction(signature(), includes='using namespace std;', plugin="Rcpp", body=cCode) 
```

PS：我知道`rcpp-devel`列表，但我的东西看起来像菜鸟问题，所以我不想发垃圾邮件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:09:18.177

您甚至无法测试双精度的相等性（请参阅[R FAQ 7.31](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)），因此我看不出如何索引映射或双精度的哈希。

通常，“自动”转换发生在 C++ 和 R 的隐式形式`as<>()`和`wrap()`在两边都有相应的类型（即向量、列表、... of double、int、...）和显式*的地方，您创建自己的转换器*。您仍然可以为您的容器执行此操作，只是不能自动执行，因为我们不提供魔杖。

*编辑：*好的，只是在火车上用这个面条。您可以在 C++ 中以两种方式构建它，但您只能（自动）将其映射回 R，因为只有可能的表示形式：带有字符串标签的双精度值。见证：

```
#include <Rcpp.h>

// [[Rcpp::export]]
std::map<std::string, double> bar() {
  std::map<std::string, double> s;
  s["quick"]  = 3.14;
  s["brown"] = 2.22;
  s["fox"]    = 1.11;
  return s;
}

// [[Rcpp::export]]
std::map<double, std::string> foo() {
  std::map<double, std::string> s;
  s[3.14] = "quick";
  s[2.22] = "brown";
  s[1.11] = "fox";
  return s;
} 
```

并且这两个函数都可以编译，但只有第一个函数可以从 R/exportable 访问。它甚至可以工作：

```
R> Rcpp::sourceCpp('/tmp/maptest.cpp')
R> bar()
brown   fox quick 
 2.22  1.11  3.14 
R> 
```

# sql - 如何使用 SQL 将非标准 Unicode 替换为空格或制表符

> ID：15135902
> 
> 赞同：2
> 
> 时间：2013-02-28T12:45:35.193
> 
> 标签：sql, eclipse, birt

我有一个 SQL2008 R2 数据库，其中有几个数据类型为 [IMAGE] 的字段，该字段中的值实际上是代表各种格式的主要是文本的 BLOB。二进制数据由 HP 的服务管理器创建，它们在内部用于填充 GUI 中的表和数组。我正在使用基于 Eclipse 的报告工具 BIRT (4.2) 来收集数据并创建报告。

虽然可以将 IMAGE 转换为表数组，但在许多情况下，性能问题排除了这一点。我正在尝试创建一个完全基于 SQL 的解决方案，以将 IMAGE 翻译和剖析为可读、可用的文本。我关心的二进制字符大多在前 127 个 Unicode 集中，而且都在前 255 个 Unicode 中。在这个范围之外有一堆垃圾可能用于在 GUI 中进行格式化。

我正在寻找一种 SQL 解决方案，用空格或制表符替换基本 Unicode（127 或 255）之外的值。我尝试使用 replace() 失败了，因为它似乎只识别基本的 Unicode 字符。我最好的解决方案是用单个选项卡替换给定 Unicode 范围之外的垃圾块（并且像下面的现有解决方案一样简单）。

我有一个解决方案，将其转换为字符串，其中留下一些垃圾。

```
select
-- Raw is an image, limited options for cast, so cast it as varbinary
-- Default characters converted is 30 so set to (8000) 
-- then cast varbinary to varchar (so a person can read it)
-- substring ignores the first 9 characters after casting
substring (cast (cast (Table.a as varbinary (8000))as varchar(8000)), 9, 7991)as 'SubstringCastCast'

from dbo.Table 
```

*我有数据预览的屏幕截图，但发布它的声誉不足，通过复制和粘贴无法很好地传输。*

我有另一种解决方案，我可以在其中找到并提取我需要的一块（即 IM0012001234）

```
select 
-- Extract the 12 digit ticket number
  substring (CastCast,
-- Find start of Ticket number
    charindex('IM',CastCast)
    , 12) as 'ETicket'

 --Create data set with string that contains ticket, so I can extract it above
from(
select
-- use cast to get a small data set with the ticket number in it
cast (cast (Table.a as varbinary (200))as varchar(200)) as 'CastCast'

from dbo.Table
)InnerQ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:52:22.553

我编写了一个函数，可以去除除 AZ az 0-9 以外的任何内容......也许这会有所帮助（根据您的需要进行调整，您可以放入`ELSE ' '`字符无法识别的空间）：

```
CREATE FUNCTION [dbo].[StripPunctuation]
(
@String VARCHAR(255)
)

RETURNS VARCHAR(255) AS

/*
$   Description: Strips out all non alpha-numeric
$             characters from a string
$
*/

BEGIN

DECLARE @i INT
DECLARE @Char CHAR(1)
DECLARE @Wk VARCHAR(255)

-- Only copy 0-9, a-z, A-Z.

SET @Wk = ''
SET @i = 1
WHILE @i <= LEN(@String)
BEGIN
   SET @Char = SUBSTRING(@String, @i, 1)
   IF (ASCII(@Char)  > 47) AND (ASCII(@Char)  < 58)
      SET @Wk = @Wk + @Char
   IF (ASCII(@Char)  > 64) AND (ASCII(@Char)  < 91) 
      SET @Wk = @Wk + @Char
   IF (ASCII(@Char)  > 96) AND (ASCII(@Char)  < 123) 
      SET @Wk = @Wk + @Char
   SET @i = @i +1
END

RETURN @Wk

END 
```

# java - 恢复上一个会话的属性

> ID：15135903
> 
> 赞同：2
> 
> 时间：2013-02-28T12:45:48.120
> 
> 标签：java, spring, jakarta-ee, web, session-timeout

假设，使用用户名=“ABC”的登录，

在会话中设置一些数据如下： session.setAttribute("mydata", mydata);

如果当前会话过期，用户将被重定向到登录页面。

现在，如果用户再次使用相同的用户名（“ABC”）登录，

我们可以检索上一个会话的属性，以便用户可以继续他的工作吗？

请建议我检索上一届会议数据的可能解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:48:45.720

我不相信这是可能的。但是，您始终可以创建一个信号量，您的应用程序可以在用户登录时对其进行检查，如果已经有一个现有的用户会话正在运行，则使会话无效。

如果您在非集群环境中运行，此信号量可以像 Java 静态变量一样简单，或者更好的方法是在数据库表中设置标志，尤其是在集群环境中运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:05:00.613

您可以在会话属性过期之前将它们保存到数据库，然后在用户再次登录时将它们添加回新会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:00:49.937

不可能，当会话到期时，它包含的所有内容都已失效。这是由容器控制的。

# java - columnDefinition = "TEXT" 适用于所有类型的数据库

> ID：15135905
> 
> 赞同：11
> 
> 时间：2013-02-28T12:45:53.907
> 
> 标签：java, jpa

在本地我使用mysql，所以当我使用

```
 @Column(columnDefinition = "TEXT") 
```

不幸的是，应用程序也必须在不同的数据库上运行，我还没有被告知哪些只是“根本”。

是否可以制作具有类似效果但适用于大多数数据库的东西？我怎样才能实现它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T13:32:40.553

像这样的东西怎么样：

```
@Lob
private String someString; 
```

我认为它更便携，应该有效地生成 TEXT 或 LONGTEXT 数据类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T10:37:35.947

如果您使用@LOB，您将遇到包含 DISTINCT 的 SQL 的 ORA-00932 异常（[http://ora-00932.ora-code.com/](http://ora-00932.ora-code.com/)）

我认为解决方案取决于字符串的字节大小。如果它 < 4000 字节，您可以尝试使用 @Column(name = "...", length = 4000)

出于数据库兼容性的原因，我建议使用 4000 字节：

*   在 oracle Oracle 8 到 Oracle 11g 中，类型 VARCHAR2 最大大小为 4000（A4 页面格式）
*   在 DB2 10 for z/OS 中，类型 VARCHAR 的最大大小为 32704
*   在 SQL Server 2012 中，类型 TEXT 最大大小为 2,147,483,647 字节

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-09T08:13:22.267

我遇到了同样的问题，仅在 application.properties 上向 MySQL Url 添加一个参数即可解决：

```
spring.datasource.url=jdbc:mysql://localhost:3306/database?jdbcCompliantTruncation=false 
```

参数为 jdbcCompliantTruncation=false

看起来像一个解决方法，但只有它有效......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-10T20:02:42.437

类似的问题 我在将图像上传到 mysql 数据库时遇到错误，**@Column(columnDefinition = “TEXT”)。**
您可以在 postgresql 和 mysql 数据库中使用。

只是我已经改为

```
@Lob
@Column(name=imageFiie)
private String image; 
```

**注意：** 使用 PostgresSQL 时，我们可能需要定期存储任意长度的字符串。

为此，PostgreSQL 提供了三种字符类型：

1.  字符(n)
2.  VARCHAR(n)
3.  文本。不幸的是，TEXT 类型不是 SQL 标准管理的类型的一部分。这意味着如果我们想在我们的持久化实体中使用 JPA 注释，我们可能会遇到问题。

这是因为 JPA 规范使用了 SQL 标准。因此，它没有定义一种简单的方法来处理这种类型的对象，例如使用 @Text 注释。

幸运的是，我们有几种方法可以管理 PostgreSQL 数据库的 TEXT 数据类型：

我们可以使用@Lob注解或者，我们也可以使用@Column注解，结合columnDefinition属性

# amazon - 如何自动化 Amazon Associates 收益报告下载？

> ID：15135907
> 
> 赞同：10
> 
> 时间：2013-02-28T12:45:56.720
> 
> 标签：amazon

现在，我们按照手动流程以 XML 格式下载 Amazon Associates 收益报告 ( [https://affiliate-program.amazon.com/gp/associates/network/reports/report.html](https://affiliate-program.amazon.com/gp/associates/network/reports/report.html) )，然后将该数据导入我们的应用程序.

如果可能，我们正在寻找可以自动下载该报告的解决方案，这样我们就不必手动单击“下载”按钮。

你能提出一些解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-26T17:40:24.560

我知道这是一个迟到的答案，但我问的是同样的问题。谷歌在第一页结果中提出了这个答案，也为 Node.js 开发人员提供了一个可以在这里工作的解决方案：

[https://github.com/snd/amazon-associate](https://github.com/snd/amazon-associate)

虽然我还没用过，但界面看起来超级干净简洁，看起来正是我想要的。希望它可以帮助其他人在 Node.js 上寻找解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-15T09:50:16.170

我之所以遇到这个问题，是因为我正在寻找一个解决方案并使用 Selenium、Python 和 Firefox 构建它。

[https://github.com/sundios/Amazon-Affiliate-report](https://github.com/sundios/Amazon-Affiliate-report)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T04:02:50.377

我已经使用[Selenium WebDriver](http://docs.seleniumhq.org/projects/webdriver/)来解决自动化任务的不足`curl`或`wget`不足。它处理 cookie、JavaScript 执行以及抓取现代网页所需的所有其他小事情。它有用于从页面中提取信息的 CSS 选择器方法。

[出于您的目的，只需使用Selenium IDE](http://docs.seleniumhq.org/projects/ide/)在浏览器中记录和回放下载，您可能会获得更快的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-07T22:29:57.123

我正在使用[https://datagummy.com](https://datagummy.com)让我的会员报告可以通过 API 访问。

似乎他们正在处理所有抓取问题，包括验证码解决和电子邮件验证。

到目前为止，我还没有看到任何问题，并且服务按预期工作。

# java - “是素数”算法运行时

> ID：15135908
> 
> 赞同：2
> 
> 时间：2013-02-28T12:46:00.867
> 
> 标签：java, algorithm

我正在尝试制作最快的算法来确定一个数字是否为素数。我正在为从 3 到 100,000 的每个数字执行此操作。

```
 for(int i = 3; i < 100000; i += 1)
        if(isPrime(i))
            System.out.println(i); 
```

它需要0.52秒。我的朋友建议不要迭代偶数：

```
for(int i = 3; i < 100000; i += 2)
        if(isPrime(i))
            System.out.println(i); 
```

它需要 0.53 秒（可能是随机差异）。

为什么他的建议不减少运行时间？如果我遍历更少的数字，我希望程序运行得更快。

isPrime() 的代码：

```
public static boolean isPrime(int n)
{
    if((n % 2 == 0 && n != 2) || (n % 3 == 0  && n != 3)|| (n % 5 == 0 && n != 5))
        return false;
    for(int i = 5; i < n / 5; i += 2)
    {
        if(n % i == 0)
            return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T12:50:11.773

Most probably the bulk of the time is needed for printing out the primes to the console. Thus reducing the numbers tested won't notably affect the speed of the program, if the number of primes is not reduced as well.

Try to collect the primes into a string and print that out once, like this:

```
StringBuilder b = new StringBuilder();
for(int i = 3; i < 100000; i += 1)
    if(isPrime(i))
      b.append(i).append("\n");

System.out.println(b.toString()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T12:48:45.187

除了算法问题之外，您的瓶颈很可能是写入`System.out`流。这是一项耗时的任务，我认为您应该将该部分排除在基准循环之外。要快速测试这一点，只需将其注释掉（使用相应的`if`语句）：

```
int iterations=100000;
long time = System.nanoTime();
for(int i = 3; i < 100000; i += 2) { //notice: always use curly brackets!!!
    isPrime(i);
}
long endTime = System.nanoTime();
System.out.println("Time to go through " + iterations + " iterations: " + (endTime>time?endTime-time:endTime+time));
//notice: nanoTime might turn around, resulting in smaller (negative) endTime value 
```

此外，Thomas 的回答对这个问题更加详细`System.out.print`，并且还提供了连接大量字符串的适当方法。

算法问题：

如果您使用 Erastothenes 筛法，那么在搜索下一个质数时，您已经找到了所有较小的质数。所以你应该存储它们，而不是检查每个大于 5 的奇数，你只需要检查你已经拥有的那些。

此外，同时，您不必检查所有这些，只需检查小于或等于您的数字平方根的那些：

```
//suppose we have a List<Integer> primeList (populated by previous execution loops)
// and Integer numberTested as the number under testing

for(int i=0; i<primeList.size();i++) {
    if(numberTested%primeList.get(i)==0) {
        //divider found, not prime
        break;
    }        

    if(primeList.get(i)>Math.sqrt(numberTested)) {
        //still not found a divider -- we found a prime
        primeList.add(numberTested);
        break;
    }
} 
```

这有什么问题？`Math.sqrt`是一项昂贵的操作。比乘法成本高得多...因此，如果数字范围允许（您必须始终牢记这一点！），我们可以使用乘法来更快地进行比较：

`sqrt(a)>b === a*a>b`假设 a 和 b 都是正整数。

```
 Integer currentPrimeSquare = primeList.get(i)*primeList.get(i);
    if(currentPrimeSquare>numberTested) {
        //still not found a divider -- we found a prime
        primeList.add(numberTested);
        break;
    } 
```

为了进一步调整这个，你也可以存储素数的平方——假设你有足够的内存......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:52:32.983

在比较 java 运行时时，需要担心 VM 本身的开销（例如，println 在每次执行时可能需要不同的时间）。要获得正确的运行时间比较，请将每个运行时间运行一千次并获取平均值以获得更准确的结果。

此外，在 Java 中实现[Erastothenes 筛法](http://en.wikipedia.org/wiki/Sieve_of_Erastosthenes)并不难，而且会很快得到结果，尽管它会使用更多内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T13:21:15.377

1）您是否考虑过使用埃拉托色尼筛法来寻找素数？

2）你不应该用运行时间来衡量效率

3）您的 if 语句是素数，如果您正在检查`n = {2,3,5}`使用它来返回结果，这将阻止您执行其余代码（在这种情况下不会节省太多时间）

4）你的for循环，你可以从7（你已经检查过5的条件，6不是素数）到sqrt（n）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T12:59:34.430

如果您对迄今为止已知的最有效算法感兴趣，那么您应该考虑阅读[AKS primality test](http://www-ti.informatik.uni-tuebingen.de/~reinhard/krypto/AKSTest/AKSeng.html)，它在多对数时间内运行。

（这个答案基本上是对有关素性检验的问题的[另一个答案的重申。）](https://stackoverflow.com/a/2385973/1086871)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-28T12:50:22.803

Maybe [this](http://www.mkyong.com/java/how-to-determine-a-prime-number-in-java/) article can help you:

```
boolean isPrime(int n) {
//check if n is a multiple of 2
if (n%2==0) return false;
//if not, then just check the odds
for(int i=3;i*i<=n;i+=2) {
    if(n%i==0)
        return false;
}
return true;
} 
```

# java - Java代码速度提升

> ID：15135918
> 
> 赞同：1
> 
> 时间：2013-02-28T12:46:31.370
> 
> 标签：java, android, performance, cpu-usage, cpu-speed

大家好，这样的代码可能会导致流程滞后吗？

```
while(true)
if(!connected) break; 
```

正如我们所见，它一直在检查条件。如果我在每次迭代中设置小睡眠会更快吗？

该代码在*Android GingerBread*上运行。

编辑：

它等待其他线程完成并将变量 Connected 设置为 false。变量连接就像锁一样使用。线程通常发现它为真并等待为假。然后设置为 true 并且只在最后更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:48:35.543

我相信它可能是这样的：

```
while(connected) {
// do stuff... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:13:04.213

我认为在循环中添加小睡眠会更好，以便为其他进程释放处理器资源，尤其是在单核处理器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:18:37.500

尝试这样的事情：

```
private Integer connected;
private ConnectedListener connectedListener;

public interface ConnectedListener {
    public void onDisconnected();
}

private void startThreads() {
    for (int i = 0; i < 10; i++) {
        new Thread(new Runnable() {

            @Override
            public void run() {
                synchronized (connected) {
                    connected++;
                }

                // do some random long work

                synchronized (connected) {
                    connected--;
                    if (connected == 0 && connectedListener != null) {
                        //let the listener know that we are completely disconnected
                        connectedListener.onDisconnected();
                    }
                }
            }
        }).start();
    }
} 
```

# xml - 如果标签属性不固定，如何找到xpath

> ID：15135919
> 
> 赞同：0
> 
> 时间：2013-02-28T12:46:33.517
> 
> 标签：xml, xpath

我需要检查以下 xml 代码的 xpath，但我的标签一直在变化。例如，在下面的响应中，标签 ns2:Response 不固定，有时它是 ns1:Response 或 ns3:Response 任何东西......请帮忙。

```
<ns2:Response>
    <ns2:ResponseCode>00</ns2:ResponseCode>
    <ns2:ResponseMessage>Success</ns2:ResponseMessage>
</ns2:Response> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:09:38.233

正如我在评论中提到的，您可以使用 *[local-names()='ResponseCode'] 来访问您的元素，而不必担心它的命名空间。

而且我的第一个解决方案也可以，你不能像这样混合它`ns*:ResponseCode`，`*:ResponseCode`应该可以

要了解更多信息，请访问[这里](http://developer.marklogic.com/blog/namespace-wildcards-in-xpath)

# windows - 使用 cmd 删除文件名前缀

> ID：15135920
> 
> 赞同：1
> 
> 时间：2013-02-28T12:46:38.103
> 
> 标签：windows, file, batch-file, cmd, file-rename

我在一个文件夹中有数千个文件，其中大多数文件的名称前缀如下：NNNN_*.jpg

例如**3453_dfgdhfdgh.jpg**、**1000_dfgdhfdgh.jpg**、**5463_dfgdhfdgh.jpg**等。

如何使用 CMD 通过删除文件中的前缀来重命名所有文件，其中存在此​​类前缀？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:54:51.077

如果前面总是一个四位数字，那就很简单了：

```
setlocal enabledelayedexpansion
for %%F in (*) do (
  set "FN=%%F"
  set "FN=!FN:~5!"
  ren "%%F" "!FN!"
)
goto :eof 
```

但也许您需要先检查这是否真的如此，在这种情况下，我们需要两个辅助函数（将它们添加到上面的部分下方）：

```
:IsDigit
set Digit=
if "%~1" GEQ "0" if "%~1" LEQ "9" set Digit=1
goto :eof

:IsNumber
setlocal
set "File=%~1"
set Number=
call :IsDigit "%File:~0,1%"
set Digit1=%Digit%
call :IsDigit "%File:~1,1%"
set Digit2=%Digit%
call :IsDigit "%File:~2,1%"
set Digit3=%Digit%
call :IsDigit "%File:~3,1%"
set Digit4=%Digit%
if "%Digit1%%Digit2%%Digit3%%Digit4%"=="1111" set Number=1
endlocal & set Number=%Number%
goto :eof 
```

然后适应如下：

```
setlocal enabledelayedexpansion
for %%F in (*) do (
  set "FN=%%F"
  call :IsNumber "!FN!"
  if defined Number if "!FN:~4,1!"=="_" (
    set "FN=!FN:~5!"
    ren "%%F" "!FN!"
  )
)
goto :eof 
```

# iphone - 如何裁剪具有固定尺寸的 UIImage？

> ID：15135922
> 
> 赞同：4
> 
> 时间：2013-02-28T12:46:42.627
> 
> 标签：iphone, ios, uiimageview, uiimage, crop

我有一个尺寸为 (0,0,320,460) 的 uiimage 如何将此图像裁剪为尺寸 (10,30,300,300)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:49:26.280

Target size in my code is always set to the full screen size of the device (so you have to change it).

```
@implementation UIImage (Extras)

    #pragma mark -
    #pragma mark Scale and crop image

    - (UIImage*)imageByScalingAndCroppingForSize:(CGSize)targetSize
    {
        UIImage *sourceImage = self;
        UIImage *newImage = nil;    
        CGSize imageSize = sourceImage.size;
        CGFloat width = imageSize.width;
        CGFloat height = imageSize.height;
        CGFloat targetWidth = targetSize.width;
        CGFloat targetHeight = targetSize.height;
        CGFloat scaleFactor = 0.0;
        CGFloat scaledWidth = targetWidth;
        CGFloat scaledHeight = targetHeight;
        CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

        if (CGSizeEqualToSize(imageSize, targetSize) == NO) 
        {
            CGFloat widthFactor = targetWidth / width;
            CGFloat heightFactor = targetHeight / height;

            if (widthFactor > heightFactor) 
            {
                scaleFactor = widthFactor; // scale to fit height
            }
            else
            {
                scaleFactor = heightFactor; // scale to fit width
            }

            scaledWidth  = width * scaleFactor;
            scaledHeight = height * scaleFactor;

            // center the image
            if (widthFactor > heightFactor)
            {
                thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5; 
            }
            else
            {
                if (widthFactor < heightFactor)
                {
                    thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
                }
            }
        }   

        UIGraphicsBeginImageContext(targetSize); // this will crop

        CGRect thumbnailRect = CGRectZero;
        thumbnailRect.origin = thumbnailPoint;
        thumbnailRect.size.width  = scaledWidth;
        thumbnailRect.size.height = scaledHeight;

        [sourceImage drawInRect:thumbnailRect];

        newImage = UIGraphicsGetImageFromCurrentImageContext();

        if(newImage == nil)
        {
            NSLog(@"could not scale image");
        }

        //pop the context to get back to the default
        UIGraphicsEndImageContext();

        return newImage;
    } 
```

# excel - 调整模块以仅粘贴值，而不是公式

> ID：15135926
> 
> 赞同：1
> 
> 时间：2013-02-28T12:47:05.457
> 
> 标签：excel, vb.net, copy-paste

有人可以帮助我吗？我运行下面的模块，它工作正常，但它粘贴单元格（公式）的内容而不是值。我知道这是值的特殊粘贴，但不确定在哪里调整。另外，我想将行从跨越 A:K 的变量表中复制出来，然后粘贴到 identicle 表中。抱歉，如果不清楚，不知道为什么代码在下面显示很有趣。从子开始：

```
Sub armine_profitTEST()
    Dim r As Long, endRow As Long, pasteRowIndex As Long

    endRow = 500 ' of course it's best to retrieve the last used row number via a function
    pasteRowIndex = 5

    For r = 1 To endRow 'Loop through sheet1 and search for your criteria

        If Cells(r, Columns("F").Column).Value = "Armine" Then 'Found
            'Copy the current row
            Rows(r).Select
            Selection.Copy

            'Switch to the sheet where you want to paste it & paste
            Sheets("Armine").Select
            Rows(pasteRowIndex).Select
            ActiveSheet.Paste

           'Next time you find a match, it will be pasted in a new row
            pasteRowIndex = pasteRowIndex + 1

           'Switch back to your table & continue to search for your criteria
            Sheets("Summary").Select
        End If
    Next r
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:58:59.270

只需使用`pasteSpecial`：

```
Dim xRng As Microsoft.Office.Interop.Excel.Range

xRng.PasteSpecial(Microsoft.Office.Interop.Excel.XlPasteType.xlPasteFormulas) 
```

# css - 如何在 CSS 中模仿 Photoshop“颜色叠加”

> ID：15135929
> 
> 赞同：1
> 
> 时间：2013-02-28T12:47:18.560
> 
> 标签：css, gradient, photoshop

我有一个用 Photoshop 设计的按钮。该按钮定义了一个渐变，我知道如何使用[Ultimate CSS Gradients Tool](http://www.colorzilla.com/gradient-editor/)生成它。

问题是按钮也有一个“颜色叠加”，我不知道如何将它转换为 css 术语？！

**更新：**

好的，澄清一下，我非常了解 CSS，并且我知道如何为元素设置样式。

我有这个渐变：

```
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2IzYjdiZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9Ijg1JSIgc3RvcC1jb2xvcj0iIzZhNzI3ZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
        background: -moz-linear-gradient(top,  rgba(179,183,189,1) 0%, rgba(106,114,125,1) 85%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(179,183,189,1)), color-stop(85%,rgba(106,114,125,1))); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  rgba(179,183,189,1) 0%,rgba(106,114,125,1) 85%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  rgba(179,183,189,1) 0%,rgba(106,114,125,1) 85%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  rgba(179,183,189,1) 0%,rgba(106,114,125,1) 85%); /* IE10+ */
        background: linear-gradient(to bottom,  rgba(179,183,189,1) 0%,rgba(106,114,125,1) 85%); /* W3C */ 
```

但是就像我提到的那样，在 Photoshop 中还定义了一个颜色叠加层，它使按钮更暗，所以在 Photoshop 中，按钮看起来比在浏览器中更暗，所以我的问题是如何将渐变和颜色叠加组合在一起使按钮看起来与 Photoshop 中完全相同的 CSS 规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:51:19.007

更新：

[**演示**](http://jsfiddle.net/x9L9B/)

更好的按钮[**演示**](http://jsfiddle.net/x9L9B/1/)

[](http://jsfiddle.net/x9L9B/2/)**带覆盖的[**演示**](http://jsfiddle.net/x9L9B/2/)**

 **只需声明一个按钮类说`.design`

```
.design {
   /* Gradient code goes here */
} 
```

现在您可以按如下方式使用此类

```
<button class="design">Designed Button</button> 
```

或者

```
<input type="button" class="design" value="Designed Button" /> 
```

> 对于COLOR OVERLAY，您可以使用and 将按钮包裹在一个div 中 `display: inline-block`，`position: relative`这样它将适当地包裹按钮并使用另一个div，该div 中`positioned absolute`的`wrapper div`高度和宽度定义为 ，并根据需要使用和定义不透明度`100%`来分配不透明的背景颜色`rgba()`

此外，如果你想精确地使用你的 CSS 声明，你可以特别定义`.design`class as`input[type=button].design`或`button.design`任何你使用的东西，这样`.design`就不会应用于任何其他元素**

# django - Django 应用显示无结果

> ID：15135935
> 
> 赞同：0
> 
> 时间：2013-02-28T12:47:29.620
> 
> 标签：django

我正在从教程 django 从头开始​​开发一个名为 Start the dark 的应用程序。我刚刚开始学习本教程，我很难在 html 上显示结果。

该应用程序应该显示事件的描述。活动的创建者和发布时间以及我键入链接的时间。它什么都不显示。

我花了几个小时进行故障排除，到目前为止，我了解到问题不是我的 html 表单，也不是我的 URL，因为我做了一些测试。我认为它是从 models.py 中获取结果到我的 views.py 中并执行它

我的models.py是：

```
from django.db import models
from datetime import datetime, timedelta
from django.contrib.auth.models import User
from django.db.models.query import QuerySet

 class Event(models.Model):
    description = models.TextField()
    creation_date = models.DateTimeField(default = datetime.now)
    start_date = models.DateTimeField(null=True, blank= True)
    creator = models.ForeignKey(User , related_name = 'event_creator_set')
    attendees = models.ManyToManyField(User , through = "Attendance")
    latest = models.BooleanField(default=True)
    def __unicode__(self):
        return self.description
    def save(self, **kwargs):
        now = datetime.now()
        start = datetime.min.replace(year = now.year , month=now.month,day=now.day)
        end = (start + timedelta(days=1)) - timedelta.resolution
        Event.objects.filter(latest=True, creator=self.creator).filter(creation_date__range=(start,end)).update(latest=False)
    super(Event,self).save(**kwargs)

class Attendance(models.Model):
    user = models.ForeignKey(User)
    event = models.ForeignKey(Event)
    registration_date = models.DateTimeField(default=datetime.now)

    def __unicode__(self):
        return "%s is attending %s" %(self.user.username,self.event) 
```

我的观点.py

```
 from events.models import Event
from django.shortcuts import render_to_response
from django.template import RequestContext

def tonight(request):
    events = Event.objects.filter(latest=True)
    return render_to_response('events/tonight.html',{'events':events},context_instance = RequestContext(request)) 
```

我的今晚.html

```
 {% if events %}
 <ul>
{{events.description}}
{{events.start_date}}
{{events.creator}}
 </ul>
 {% endif %} 
```

我的活动 URL.CONF

```
 from django.conf.urls.defaults import *
 from django.contrib import admin
 from events import views
 urlpatterns = patterns('events.views',
         url(r'^tonight/$','tonight',name='ev_tonight')
 ) 
```

我的主要 URLconf

```
 from django.conf.urls import patterns, include, url
  from django.contrib import admin
  from django.conf import settings
  from django.contrib.staticfiles.urls import staticfiles_urlpatterns
  from django.conf.urls.static import static
  # Uncomment the next two lines to enable the admin:
  # from django.contrib import admin
  admin.autodiscover()
  urlpatterns = patterns('',

      url(r'^events/',include('events.urls')),

  ) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

  urlpatterns += staticfiles_urlpatterns() 
```

其他一些型号。

```
 from django.db import models
 from django.contrib import admin
 class student(models.Model):
         First_name = models.CharField(max_length=30)
         Last_name = models.CharField(max_length=30)
     Age = models.BigIntegerField()
     Body = models.TextField()

     def __unicode__(self):
        return self.First_name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:50:28.430

这里的事件是一个查询集。请参阅[有关查询集的 django 文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)。您需要遍历其中的对象。像这样编辑您的模板代码；

```
{% if events %}
    {% for each_event in events %}
        <ul>
            {{each_event.description}}
            {{each_event.start_date}}
            {{each_event.creator}}
        </ul>
    {% endfor %}
{% endif %} 
```

# c++ - 文件读取停止

> ID：15135941
> 
> 赞同：0
> 
> 时间：2013-02-28T12:47:41.427
> 
> 标签：c++, memory-management, buffer, readfile

当我尝试读取大文件（~412 MB）时，文件突然停止读取。该程序运行了一个月，但现在我出错了。我不知道为什么。你能帮忙吗？当我使用 Purify 检查它时，它说程序的内存分配失败

```
 s.write(block, f.gcount()); 
```

我正在将一个大文件写入缓冲区（我正在读取大块文件）。然后我解析这个缓冲区并读取文件的下一部分。我试图用更少的文件读取文件，但结果是一样的：程序刚刚停止读取，然后什么也不做。没有任何异常（我试图捕捉std::exception）是什么原因？你能帮忙吗？

该文件非常简单：

```
p edge 45 45

e 4 1 

e 5 6 
```

等等

这是代码：

```
 readFile(char name[]) {
       ifstream f;
       f.open(name,ifstream::binary);
       char buffer[256], token[20];
       int i, j, k, tmp;
       int vi = 0, vj = 0;
       int num_edges = 0;

       if (! f.is_open()) 
       { 
            cout << "Error opening file: " << name << endl; 
            //_getch();
        exit(1); 
       }

       strstream s;
       static const int N = 1024*1024;
       char block[N];

    while (! f.eof() ) 
    {
        s.clear();
        f.read(block, N);
        s.write(block, f.gcount());

        while (! s.eof())
        {
            s.getline(buffer, 250);
            if (s.eof())
            {
                s.write(buffer, s.gcount());
                break;
            }

            if (buffer[0] == 'c')
            {
                continue;
            }

            if (buffer[0] == 'p') 
            {
                cout << buffer << endl;
                sscanf(&buffer[7], "%d", &globalColouredVertices.size);

                if(globalColouredVertices.size > MAX_VERTICES) {
                    cout << "Too many vertices (> " << MAX_VERTICES << ")"<< endl;
                    exit(2);
                }

                //e.resize(globalColouredVertices.size);
                for (i = 0; i < globalColouredVertices.size; i++)
                {
                    globalColouredVertices.ele[i].point = i;
                }
            }
            if (buffer[0] == 'e') 
            {
                num_edges++;
                i = 2;
                j = 0;
                while ((buffer[i] >= '0') && (buffer[i] <= '9')) 
                { 
                    token[j++] = buffer[i];
                    i++; 
                }
                token[j] = '\0';
                vi = atoi(token);
                i++;
                j = 0;
                while ((buffer[i] >= '0') && (buffer[i] <= '9')) 
                { 
                    token[j++] = buffer[i];
                    i++; 
                }
                token[j] = '\0';
                vj = atoi(token);
                vi--;
                vj--;
                e[vi][vj] = 1;
                e[vj][vi] = 1;
            }

            if (num_edges % 10000 == 0)
                cout << num_edges << endl;
            else if (num_edges %  24380000 == 0) {
                cout << endl;
            }
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:45:01.773

您使用 a`strstream`作为缓冲区已被破坏，几乎可以肯定是不必要的。

此代码将在您的 strstream 中放置部分行。因此，当您稍后逐行阅读时，您可能会在每个缓冲区的末尾得到一个不完整的行，然后在下一个缓冲区的开头得到另一个不完整的行。

```
 f.read(block, N);
    s.write(block, f.gcount()); 
```

那，再加上您的代码中没有*任何*数组绑定检查（特别是这个片段，以及其他人提到的那些），这意味着这是一场等待发生的车祸。

```
 e[vi][vj] = 1;
            e[vj][vi] = 1; 
```

我*强烈*推荐你

*   a: 完全删除 strstream 缓冲区。
*   b: 考虑使用 std::vector 而不是手动分配缓冲区。
*   c：然后您可以使用该`at()`函数进行边界检查访问，这将引发异常。

在完成之前不要担心优化或性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:54:22.543

这可能不是您看到的问题，但您的代码中有几个潜在的缓冲区溢出。例如：

```
while ((buffer[i] >= '0') && (buffer[i] <= '9')) 
{ 
    token[j++] = buffer[i];
    i++; 
} 
```

你真的应该检查索引没有超过缓冲区大小。

# asp.net-mvc-3 - ASP.Net MVC 在控制器中执行代码之前检查 Facebook 登录状态

> ID：15135942
> 
> 赞同：0
> 
> 时间：2013-02-28T12:47:42.350
> 
> 标签：asp.net-mvc-3, facebook-javascript-sdk

我正在使用 Facebook JavaScript SDK 登录 Facebook，唯一的问题是 JavaScript 代码在控制器之后执行。

我想要的只是在进入控制器之前检查用户是否登录。

有什么帮助吗？

这是java脚本代码

```
<script type="text/javascript">
window.fbAsyncInit = function () {
    FB.init({ appId: '@Facebook.FacebookApplication.Current.AppId', channelURL: '@Request.Url.Scheme://@Request.Url.Authority@Url.Content("~/fbchannel.ashx")', cookie: true, xfbml: true, oauth: true });
    FB.Event.subscribe('auth.login', function (response) { window.location.reload(); });
    FB.Event.subscribe('auth.logout', function (response) { window.location.reload(); });
    FB.Event.subscribe('auth.authResponseChange', function (response) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
            $.ajax({
                url: '/Home/SaveAccess',
                type: 'POST',
                data: { A: accessToken },
                success: function (data) {
                },
                error: function() {}
            });
            var field = document.createElement("input");
            field.setAttribute("type", "hidden");
            field.setAttribute("name", 'accessToken');
            field.setAttribute("value", accessToken);
            form.appendChild(field);

            document.body.appendChild(form);
            form.submit();

        } else if (response.status === 'not_authorized') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
            $.ajax({
                url: '/Home/SaveAccess',
                type: 'POST',
                data: { A: accessToken },
                success: function () {
                }
            });
        } else {
        }
    });
(function(d){
    var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    d.getElementsByTagName('head')[0].appendChild(js);
}(document)); 
```

我将访问令牌保存在会话中，问题是此代码在控制器代码之后执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:50:01.617

不明白你到底想要什么。这是我所做的解决方案。

您可以`FB.getLoginStatus`随时致电以检查用户是否已连接。

```
 FB.getLoginStatus(function (response) {
        if (response.status === 'connected') {
              // user logged in and connected        
       }
    }); 
```

您还可以将其添加`fbAsyncInit`到每次页面加载时检查用户状态。

# c# - 当类在单独的 AppDomain 中运行其方法时，单元测试无法提供情况

> ID：15135947
> 
> 赞同：0
> 
> 时间：2013-02-28T12:47:52.740
> 
> 标签：c#, multithreading, nunit, appdomain

我有一些在另一个 AppDomain 中运行其方法（WorkFunction）的类。当我在控制台应用程序中使用它时，好的。但是当我尝试在单元测试框架（MSTest，Nunit）中运行相同的代码时，我得到以下错误：

> System.IO.FileNotFoundException 未处理 HResult = -2147024894 消息 = 无法加载文件或程序集“FMEngine.Common.Tests，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = null”或其依赖项之一。找不到指定的文件。源 = mscorlib 文件名 = FMEngine.Common.Tests，版本 = 1.0.0.0，文化 = 中性 ...

错误在哪里？

在控制台中正常工作但在测试中出错的代码

```
ThreadWorkerTemplateWrapper twt = new ThreadWorkerTemplateWrapper(-1, new TimeSpan(0, 0, 1));
twt.Start();
Console.ReadLine();
twt.Stop(); 
```

源代码：

```
[Serializable] 
public class ThreadWorkerTemplate 
{
    #region non important code for question

                    private int _threadFlag;
    [NonSerialized] private readonly Thread _thread;
    [NonSerialized] private AppDomain _threadDomain;

    public ThreadWorkerTemplate(int timeout, TimeSpan joinTimeout)
    {
        IterationTimespan = timeout;
        JoinTimeout = joinTimeout;

        _threadFlag = 0;
        _thread = new Thread(ThreadHandler);
    }

    private bool IsDelaySpended(DateTime now, DateTime lastExecuted)
    {
        return (now > lastExecuted) 
               &&
               (now - lastExecuted).TotalMilliseconds > IterationTimespan;
    }

    private bool IsNothingDelay()
    {
        return IterationTimespan == -1;
    }

    public void Start()
    {
        if (null == _threadDomain)
            _threadDomain = AppDomain.CreateDomain(Guid.NewGuid().ToString());

        if (Interlocked.CompareExchange(ref _threadFlag, 1, 0) == 0)
            _thread.Start();
    }

    public void Stop()
    {
        bool exitByTimeout = false;

        // стопаем с одновременным измененем флага
        if (Interlocked.CompareExchange(ref _threadFlag, 0, 1) == 1)
            exitByTimeout = !_thread.Join(JoinTimeout);

        if (exitByTimeout)
        {
            AppDomain.Unload(_threadDomain);
            _threadDomain = null;
        }
    }

    public bool IsStarted { get { return Interlocked.CompareExchange(ref _threadFlag, 0, 0) == 1; } }
    public TimeSpan JoinTimeout { get; private set; }
    public int IterationTimespan { get; private set; }

    #endregion

    private void ThreadHandler()
    {
        DateTime lastExecuted = DateTime.MinValue;
        Func<bool> isAllowed =
            () =>
                {
                    DateTime now = DateTime.Now;
                    bool result = IsNothingDelay() || IsDelaySpended(now, lastExecuted);

                    if (result)
                        lastExecuted = now;

                    if (IterationTimespan != -1)
                        Thread.Sleep(1);

                    return result;
                };

        while (Interlocked.CompareExchange(ref _threadFlag, 0, 0) == 1)
        {
            if (isAllowed())
                _threadDomain.DoCallBack(new CrossAppDomainDelegate(WorkFunction));
        }
    }

    public void WorkFunction()
    {
        Thread.Sleep(60000);
    } 
} 
```

# reverse-engineering - 转储浏览器的插件内存

> ID：15135953
> 
> 赞同：1
> 
> 时间：2013-02-28T12:48:02.150
> 
> 标签：reverse-engineering

如何转储在浏览器中运行的插件的内存。例如，我想分析在 chrome 中运行的 acrobat reader 的内存。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T19:41:14.087

通常，在大多数常见浏览器的情况下，插件都是加载到浏览器进程中的动态库。因此，您需要使用调试器附加到该进程，然后转到作为插件的模块。

对于 chrome 和 pdf 阅读器：Chrome 为几乎所有内容生成了一个新进程，因此首先您需要在浏览器中加载任何 pdf，以便加载插件。然后，您可以通过 chrome 中的集成任务管理器找到该选项卡的匹配 PID。当您使用调试器附加到此进程时，您应该看到模块“pdf”，它是位于 chrome 安装目录中的 dll，我相信它是 acrobat reader 的修改版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:36:24.053

取决于您所说的内存转储是什么意思，以及您希望用它做什么。有诸如[Memoryze](http://www.mandiant.com/resources/download/memoryze)之类的工具，您可以转储正在运行的进程的内存。我已经在法医上使用过它，但我从来没有尝试过把所说的转储扔到 IDA 中。

您还可以附加一个调试器并以这种方式获取内存。这完全取决于您要分析/反转的内容。

# jakarta-mail - 如何使用 mbeans 在同一个实例中访问多个属性？

> ID：15135957
> 
> 赞同：0
> 
> 时间：2013-02-28T12:48:14.610
> 
> 标签：jakarta-mail, mbeans

我有 javamail 程序，它可以获取我的 gmail 收件箱中每封邮件的大小。我在客户端程序中使用 mbeans 访问大小。我如何知道它在客户端程序中显示的邮件大小？

我需要**在同一实例中在客户端程序中获取超过 1 个值**，即邮件大小和邮件编号。应该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:14:29.917

我不明白这个问题。你是什​​么意思**的**邮件大小？你的意思是“哪个消息的大小”？无论您将大小传达给客户端程序，您还必须传达有关消息的某些内容，例如消息编号。有关您正在做的事情的更多详细信息可能会帮助我们提供更好的答案。

# xml - XML 不会引发模式错误

> ID：15135960
> 
> 赞同：1
> 
> 时间：2013-02-28T12:48:20.090
> 
> 标签：xml, xsd

我很难理解为什么我的 xml 和架构不起作用。

架构：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.w3schools.com"
xmlns="http://www.w3schools.com"
elementFormDefault="qualified">

<xs:element name="animals">
    <xs:element name="animal">
        <xs:complexType>
            <xs:element name="species"/>
            <xs:element name="name"/>
            <xs:element name="population" minOccurs="1"/>
        </xs:complexType>

    </xs:element>
</xs:element> 
```

XML:

```
<?xml version="1.0"?>

<animals xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="animals.xsd">
    <animal>
        <species>reptile</species>
        <name>cobra</name>

    </animal>
</animals> 
```

它不应该抛出错误，因为当 min 发生为 1 时，xml 文件中缺少人口。

我做的一切正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:55:50.820

你做对了几件事。以下是您可能想要添加到该列表的更多内容：

*   您创建和定义的命名空间应使用您有权控制的域名。除非您拥有 w3schools.com 域，否则最好不要在其空间中定义新的命名空间。如果您不拥有任何域，而只是想要一个示例，那么域 example.com 就是为此目的而保留的。或者您可以编写没有目标名称空间的模式。

*   xsi:schemaLocation 属性的值不是单个 URI，而是一系列 URI 对。在每一对中，第一项命名一个命名空间，第二项指定 XSD 验证器可以在哪里找到该命名空间的架构文档。因此，您希望该属性在您的 XML 文档实例中看起来像这样：

    ```
    xsi:schemaLocation="http://www.w3schools.com animals.xsd" 
    ```

    或者，如果您重写架构文档以省略目标命名空间，请改用 xsi:noNamespaceSchemaLocation：

    ```
    xsi:noNamespaceSchemaLocation="animals.xsd" 
    ```

*   您的架构文档当前指定其目标命名空间是`http://www.w3schools.com`并且本地元素是完全限定的。因此，如果您希望架构处理器识别您显示的声明旨在应用于这些 XML 元素实例，那么您的 XML 中的所有元素都应该位于该名称空间中。所以在你的 XML 中，开始标签`animals`应该是这样的

    ```
    <animals xmlns="http://www.w3schools.com"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="
            http://www.w3schools.com animals.xsd
            "> 
    ```

*   正如您所展示的那样，我希望 XSD 验证器会反对 xsi:schemaLocation 的值没有偶数个令牌的事实。如果没有，那么您调用它的方式可能出现问题；但是，如果没有有关您正在使用的验证器以及如何调用它的更多信息，则很难确定。

*   大多数 XSD 验证器以所谓的宽松验证模式开始工作：当他们在文档中看到具有元素声明的元素时，他们验证它，否则他们跳过它（或者在某些实现中，他们然后检查它的子元素对于他们可以验证的元素）。

    给定一个描述特定命名空间中元素的模式，以及一个使用不在该命名空间中的元素的 XML 文档，在宽松验证模式下启动的 XSD 验证器将无法判断文档实例中的元素是否有效。XSD 规范说，在这种情况下，`validity`文档元素的属性值为`notKnown`。大多数 XSD 验证器仅在遇到无效元素时才发出错误消息，因此大多数 XSD 验证器在没有与架构匹配的文档上以松散模式启动，不会发出任何错误消息。重要的是不要将此与文档对模式有效的判断混淆。它仅意味着该文档对架构*无效。*

    如果您发现这种行为不方便或令人困惑，就像许多人一样，您将需要检查您使用的验证器是否允许调用时间标志发出错误，或者至少发出警告，如果无法确认文档有效。（需要符合 XSD 1.1 的验证器才能做到这一点；XSD 1.0 在一致性要求方面有点模糊。）或者验证器可能允许您说文档必须`animals`在命名空间中有一个元素，`http://www.w3schools.com`并且错误应该如果有其他问题，请提出。如果您的验证器无法让您控制它如何开始工作，请让供应商知道您希望拥有一些控制权，同时寻找不同的验证器。

[PS 另请参阅 Michael Kay 对此答案的评论，以了解另一个需要考虑的重点。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:58:13.007

您的架构看起来不对 - 您不能`xs:element`直接放在里面`xs:element`（也不能直接放在里面`xs:complexType`）。

我认为你想要的是

```
<xs:schema 
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  targetNamespace="http://www.w3schools.com"
  xmlns="http://www.w3schools.com"
  elementFormDefault="qualified">

  <xs:element name="animals">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="animal" maxOccurs="unbounded">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="species"/>
              <xs:element name="name"/>
              <xs:element name="population" minOccurs="1"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

然后您的 XML 文件应使用架构命名空间：

```
<animals 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xsi:schemaLocation="animals.xsd" 
   xmlns="http://www.w3schools.com">
  <animal>
    <species>reptile</species>
    <name>cobra</name>
  </animal>
</animals> 
```

# python - 检测一个字符串是否在另一个字符串中

> ID：15135962
> 
> 赞同：1
> 
> 时间：2013-02-28T12:48:36.053
> 
> 标签：python, python-3.x

我正在尝试检测软件版本是否是最新的，并且我正在使用 Python 3.3 中的以下代码来执行此操作：

```
if str(version) in str(buildno):
    print("Your software version is up to date. \n")
else:
    print("Your software is out of date. Updating your software. \n") 
```

但是，即使它是最新的，它也会不断更新软件。我还尝试了代码变体：

```
if str(version) in str(buildno) == True:
    print("Your software version is up to date. \n")
else:
    print("Your software is out of date. Updating your software. \n")
    if os == "Windows":
        subprocess.call("windowsUpgrade.sh", shell=True) 
```

这也不起作用。我正在使用的方法是否可行，或者我应该采取另一种方法来解决这个问题？

```
>>> print(version)
4.3.0-18107
>>> print(buildno)
('4.3.0-18107', 1) 
```

感谢您提供的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T13:11:20.707

您的第二个变体将不起作用。如果您交换`buildno`and ，第一个变体应该可以工作`version`：

```
buildno = '4.3.0-18107'
version = ('4.3.0-18107', 1)

if str(buildno) in str(version):
    print("Your software version is up to date. \n") 
```

我假设一个是字符串，另一个是元组，但它们可以是任何东西，因为我们只看到它们被打印出来，而不是你如何得到它们。

从它们的内容来看，这些变量名称有些误导，无论是否交换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:25:24.127

你`buildno`是一个元组。您只需要第一项。那是：

```
if str(buildno[0]) in str(version): 
```

甚至：

```
if str(buildno[0]) == str(version): 
```

正如 Pavel Anossov 在评论中建议的那样。

在旁注中，您的第二种方法：

```
if str(buildno) in str(version) == True: 
```

可以使用[dis](http://docs.python.org/3.3/library/dis.html?highlight=dis#dis.dis)粗略翻译为：

```
if str(buildno) in str(version) and str(version) == True: 
```

另外，请查看 DSM 对您的问题的评论。

> 使用这样的字符串包含可能会导致麻烦：“4.3.0-1”在“4.3.0-11”中，但可能不是最新的。根据您的版本编号策略，您可能需要创建一个整数元组进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T13:35:18.160

好吧，这里使用的数据类型似乎有些混乱

元组到字符串：

```
str(('4.3.0-18107', 1)) = "('4.3.0-18107', 1)" 
```

元组不在字符串中：

```
if "('4.3.0-18107', 1)" in '4.3.0-18107' # False 
```

元组中的字符串

```
if '4.3.0-18107' in "('4.3.0-18107', 1)" # True 
```

输入字符串（第一个索引元组 = 字符串）

```
if '4.3.0-18107' in ('4.3.0-18107', 1)[0] # True 
```

如果顺序无关紧要，您需要在转换为字符串之前索引元组 str(('4.3.0-18107', 1)[0]) 。您在上面的代码中所做的是将元组转换为字符串而不是版本。因此，Pavel Anossov 认为交换应该在这里起作用是正确的——至少它对我有用。

所以这最终奏效了（错过了一个空格）：

```
buildno=buildno[0] 
version=str(version.strip()) 
buildno=str(buildno.strip()) 
if version == buildno 
```

或更短：

```
if str(version).strip() == str(buildno[0]).strip():
if str(version).strip() in str(buildno[0]).strip(): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T13:36:23.747

由于您使用的是 Python 3，因此您可以使用[PEP386](http://www.python.org/dev/peps/pep-0386/)`distutils.version`中描述的比较模块：

```
from distutils.version import LooseVersion as V

minimum_version = V(version)
current_version = V(buildno)

if current_version >= minimum_version:
    print("Your software version is up to date. \n")
else:
    print("Your software is out of date. Updating your software. \n") 
```

还有一个`StrictVersion`类，但它似乎不适用于您的版本编号。

# php - 如何根据值是否存在于mysql中来获取记录？

> ID：15135965
> 
> 赞同：0
> 
> 时间：2013-02-28T12:48:39.247
> 
> 标签：php, mysql, mysqli

此数据是从某个 emp 表中获取的：--->" `php,codeigniter,seo,html,javascript,techsupport,html,hr,finance`"

这是我基于上述数据的问题

下表如果任何字符串与上述数据中的技能匹配，则显示该 id

桌子：

```
id      skill
---------------------
1      php
2      php,hr
3      javascript,html,seo
4      sap
5      oracleapps 
```

结果应该只显示 1,2,3 行才可能获取该数据？

我正在使用此查询，但它仅获取完全匹配记录

```
select * from seekerdetails jsd
where find_in_set(  jsd.key_skills,( select lower( GROUP_CONCAT(key_skills))
  from 
empjobs)) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T12:56:46.340

首先，展开您的`$table`列表，然后将其一一添加到`FIND_IN_SET`调用中：

```
 $t = explode(",",$table);
 $q = "SELECT * FROM seekerdetails WHERE ".
       "FIND_IN_SET(".implode("', key_skills) OR FIND_IN_SET('", $t).", key_skills)"; 
```

# django - i18n 翻译如何在 Django/GAE 中工作 - 波兰语的奇怪行为？

> ID：15135971
> 
> 赞同：1
> 
> 时间：2013-02-28T12:48:50.683
> 
> 标签：django, google-app-engine, internationalization, globalization, django-i18n

我使用 Django 1.3/Google App Engine 编写程序，发现缺乏支持和奇怪的行为。

## Prapration - 波兰语翻译（可能很重要）

首先，**ungettext 不支持波兰语直接**看到，但 django 1.3 支持 PO 文件标签 Plural-Forms（许多非英语语言有多个复数形式） - 我为波兰语这样做 - 也许同样适用于俄语：

复数形式：nplurals=3；复数=(n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);

我在 ungettext 没用之前举了一些例子，因为波兰语的复数形式比英语多，我用它来提取 msgId 仅此而已

```
# should be 0 kóz
ungettext(u'%s kóz', u'%s kozy', 0) % 0
# should be 1 koza
ungettext(u'%s kóz', u'%s kozy', 1) % 1
# should be 2 kozy
ungettext(u'%s kóz', u'%s kozy', 2) % 2
# should be 5 kóz
ungettext(u'%s kóz', u'%s kozy', 5) % 5 
```

我使用 makemessages.py 并用**技巧**翻译它以获得 3 种复数形式，而不是像英语中的 2 种（波兰语需要 2-3 种形式）：

```
msgid "%s kóz"
msgid_plural "%s kozy"
msgstr[0] "%s 1 koza"
msgstr[1] "%s 2 kozy"
msgstr[2] "%s 5 kóz" 
```

## Django 的奇怪行为（主要问题）

现在我做了更多但不了解行为的技巧：

我为 DJANGO 正确设置了所有变量，包括（希望如此）和：

LANGUAGE_CODE = 'pl' - 所有翻译作品但不是波兰语我有两种形式不是 3\. msgid "%s kóz" msgid_plural "%s kozy" msgstr[0] "%s 1 koza" msgstr[1] "%s 2 kozy" msgstr[2] "%s 5 kóz"

LANGUAGE_CODE = 'en' - 所有翻译作品 (pl, en-us, en-gb, de-de, ...)

LANGUAGE_CODE = 'xx' - 所有翻译作品 (pl, en-us, en-gb, de-de, ...)

LANGUAGE_CODE = 'en-us' - 所有翻译作品 (pl, en-us, en-gb, de-de, ...) 但不是 en-us 翻译

为什么我应该将我的语言设置为 INVALID 'xx' 或其他不存在的翻译以使其在 django 中工作这对我来说很奇怪？你能帮我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:09:44.250

这是一个小错误：

```
# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'pl'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# Valid languages
LANGUAGES = (
  (u'pl', _('Polski')),
  (u'en-us', _('angielski - Stany Zjednoczone')),
  (u'en-gb', _('angielski - Wielka Brytania')),
  (u'de-de', _('niemiecki - Niemcy')),
)

LOCALE_PATHS = (
  os.path.join(__ROOT_PATH, 'conf', 'locale'),
) 
```

路径是在首次使用后定义的，因此 django 无法构建默认翻译 - 这里修复非常简单。

```
# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'pl'

LOCALE_PATHS = (
  os.path.join(__ROOT_PATH, 'conf', 'locale'),
)

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# Valid languages
LANGUAGES = (
  (u'pl', _('Polski')),
  (u'en-us', _('angielski - Stany Zjednoczone')),
  (u'en-gb', _('angielski - Wielka Brytania')),
  (u'de-de', _('niemiecki - Niemcy')),
) 
```

LANGUAGE_CODE = 'xx' 正在创建永远不会使用的无效翻译容器，并且第一次使用其他语言（如 pl）的有效设置会产生很好的副作用 :)

# ios - 覆盖 Tableview 数据源/委托方法

> ID：15135972
> 
> 赞同：1
> 
> 时间：2013-02-28T12:48:53.293
> 
> 标签：ios, objective-c, uitableview, overriding

我有一个带有一个表视图的父类。

该类也是该表视图的委托和数据源。

现在我对那个类进行了子类化（派生）并创建了一个子类。

我在子班也有一个表格视图。

然后我在该子类中定义了委托和数据源函数，但它覆盖了父类 tableview 数据源/委托方法。

但我希望他们两个分开。

但是我的要求如下：

我想在搜索栏包含的所有视图控制器的顶部保留一个搜索栏和侧面按钮，在其下方有一个最近的搜索词表。

所以我想为它定义父类，并从该类中子类化其他视图控制器。

我做对了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:05:52.473

我假设您在谈论视图控制器类。如果我理解你的话，那你就要搞砸了。委托是一种避免子类化的方法。当然，您可以将委托子类化 - 没问题。但是您希望超类中的表视图在其视图中拥有一个表。并且您想要一个在其视图中具有另一个表以及超类拥有的表的子类。

这并非不可能。但是从您的子类的角度来看，您的子类拥有两个表视图。即使这样也是可能的。您的视图控制器是两个表的代表（无论它们在视图层次结构中的哪个位置被声明和实例化）。当您现在覆盖委托和数据源方法时，您的子类必须：

1.  确定它正在处理/被调用的表。然后适当地为两张桌子服务。
2.  确定它正在处理/被调用的那个表。然后适当地服务“它自己的”表并调用 [super sameMehtod:withSamePamaters] 以确保超类仍然可以作为委托提供数据和服务器。

两者中哪一个更聪明取决于上下文以及您将要详细实现的目标。

确定调用哪个表的委托的方法可以通过标记表视图（不要使用 0 作为标记）或通过将委托方法的 tableView 参数与相应的属性（在本例中为 IBOutlets）进行比较来完成。（在其他情况下，您可以将 sender 参数与 IBOutlets 进行比较。但是稍后阅读代码时标记可能更容易理解。）

让我们看一个 UITableViewDataSourceDelegate 的例子：

您的超类实现：

```
@interface MySuperTableViewController:UITableViewController <UITableViewDelegate>

// There will be something in here.
// But it inherits self.tableView from UITableViewController anyway. We leave it with that. 

@end

@implementation MySuperTableViewController

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  // This method creates or re-uses a cell object and sets its properties accordingly.

}

@end 
```

还有你的子类：

```
@interface MySubTableViewController : MySuperTableViewController // no need to declare the delegate here, it is inherited anyway

@property (weak, nonatomic) IBOutlet UITableView  *mySecondTableView;  // self.table will be used by the superclass already. 

@end

@implementation MySubTableViewController

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

if (tableView == self.table) { // This call refers to the one talbe that is managed by super
     return [super tableView:tableView cellForRowAtIndexPath:indexPath];
}

   // This method now creates or re-uses a cell object and sets its properties accordingly.
   // You may want to check wether tableView == self.mySecondTableView etc.
}

@end 
```

（这是从头开始的，没有经过语法检查等。不要指望它会立即正常运行 :)

但是...请重新考虑您的班级结构。恐怕您会迷失在一些相当不合逻辑的类层次结构中。即使没有这个子类化的东西，由一个公共视图控制器管理两个 talbe 也没有错。在每个表都有自己的委托（可以是视图控制器）的视图中使用多个表并没有错。由于 iOS 5（或者它是在 6 中引入的）我们可以为此目的使用 UIContainerView 并在 IB/storyboard 中很好地构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:01:27.937

试试这个，

```
ViewController.h

    IBOutlet UITableView *firstTable;
    IBOutlet UITableView *secondTable; 
```

视图控制器.m

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
   if (tableView == firstTable) {
       return 1;
    } 
   else if(tableView == secondTable)
   {
      return 1;
   }
return 0;
 }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
// Return the number of rows in the section.
if (tableView == firstTable) {
    return [arrItems count];
} else if(tableView == secondTable)
{
    return [arrData count];
}
 return 0;
} 
```

等等等等……

# java - 二叉搜索树现实世界应用

> ID：15135980
> 
> 赞同：0
> 
> 时间：2013-02-28T12:49:09.690
> 
> 标签：java, tree, binary-search-tree

我在大学学习 Java 数据结构和算法，我们遇到了二叉搜索树和树横向的主题，但我没有看到这些主题在我的编程中的目的。我知道它们可以被修改，以便你可以控制搜索路径和搜索次数可以提高。我的问题如下：

1.什么时候在程序中使用二叉搜索树？（示例）

2.在实际应用中使用二叉搜索树的一些例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:04:31.790

CouchDB 与大多数其他数据库一样使用二叉搜索树。这是[一篇](http://guide.couchdb.org/draft/btree.html)描述它如何使用它的文章。你可能会觉得很有趣。

# opencv - 创建opencv窗口的问题

> ID：15135981
> 
> 赞同：1
> 
> 时间：2013-02-28T12:49:10.323
> 
> 标签：opencv, xcode4.6

我有 Mac OS Lion 10.7.5 和 xCode 4.6。我已经下载了一个[opencv 模板](https://github.com/foundry)。然后检索一个框架并想创建我自己的项目。首先我安装 cmake 2.8.10，添加一个框架，就是这样。在 main.mi 中尝试创建一个窗口：

```
 #import <UIKit/UIKit.h>
   #include "opencv2/highgui/highgui_c.h"
   #import "AppDelegate.h"

int main(int argc, char *argv[])
{
    IplImage* img = cvLoadImage("1.png", 8);
   cvNamedWindow("Example",CV_WINDOW_AUTOSIZE); //Thread 1: signal SIGANRT

    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

在调试区域中，我得到了以下信息：

```
OpenCV Error: Unspecified error (The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script) in cvNamedWindow, file /Volumes/minijHome/Documents/xcode_mini/hillegass/advancedIOS/postCourse/openCV/clean-downloads/openCVgitClone/opencv/modules/highgui/src/window.cpp, line 652
libc++abi.dylib: terminate called throwing an exception 
```

我必须做什么？

# linux - 向现有 PDF 文件添加裁剪标记

> ID：15135983
> 
> 赞同：2
> 
> 时间：2013-02-28T12:49:12.050
> 
> 标签：linux, windows, pdf, printing

我对所有 PDF 裁剪/出血/修剪技术都很陌生……但我拥有的是大约 9 x 5 厘米的 PDF 格式的名片。我只想添加出血和裁剪标记，或者如果没有出血边距，那么至少只是裁剪标记，距离边缘指定的毫米。

1.  无论如何我可以在linux中以编程方式做到这一点吗？就像使用 pdftk 或 ghostscript 或 imagemagick 或一些 php 库一样？裁剪标记是指文档每个角落的小线条。如果没有可用的直接功能，是否可以使用 imagemagick 在 PDF 上画线？请记住，我想将裁剪标记添加到*现有*卡片上，所以我不是从头开始制作卡片。我不确定，但这可能被称为“强加”。
2.  可以通过桌面应用程序轻松完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:44:04.310

试试乳胶

创建文件 foobar-crop.tex

```
\documentclass{article}
\usepackage{pdfpages}
\usepackage[paperwidth=9cm,paperheight=5cm]{geometry}
\usepackage[cam,a4,center,pdftex]{crop}

\begin{document}

\includepdf[pages=-]{foobar.pdf}

\end{document} 
```

编译

```
$ pdflatex foobar-crop.tex 
```

会给你 foobar-crop.pdf。

来自：[http ://www.thbimage.com/pdf/adding_crop_marks_to_pdf_pan_2008_10_08_21_47_33_lutrina_.html](http://www.thbimage.com/pdf/adding_crop_marks_to_pdf_pan_2008_10_08_21_47_33_lutrina_.html)

# php - 使用 isset 验证选项 []

> ID：15135985
> 
> 赞同：1
> 
> 时间：2013-02-28T12:49:13.980
> 
> 标签：php, arrays, validation, isset

嘿，我在让 options[] 数组工作时遇到了一些麻烦，如果有人能提供帮助，那将是很棒的表格

```
<form method="post" action="array2.php">
<select name="options[]">
<option value=""></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
<input name="submit" type="submit" value="submit">
</form> 
```

array2.php

```
<?php
session_start();
if(isset($_POST['submit'])){
    if($_POST['options[]'] == "" ){
        header("Location: error.html");
        exit; 
    }else{
        $checked = $_POST['options'];
        $_SESSION['checked'] = $checked;
    }
}
?> 
```

任何帮助都会很棒，即使它是一个空的领域，也会发生什么，事情进展到脚本的其余部分

脚本的其余部分

```
 <?php
    for($i=0; $i < count($checked); $i++){
        echo "You have selected to recive " . $checked[$i] . " tickets<br/>";
    }
    for($i=0; $i < count($checked2); $i++){
        echo "And you have selected to recive " . $checked2[$i] . " for accommodation are you sure? <br/>";
    }
?> 
```

抱歉，我现在无法回复人们，因为我发布了一个班级来到空房间，所以需要等待一个小时：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:57:33.427

您需要将您的更改`options[]`为，`option`因为这意味着您要提交具有相同名称的多个选择

```
<form method="post" action="array2.php">
<select name="options">
<option value=""></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
<input name="submit" type="submit" value="submit">
</form> 
```

在你的`array2.php`文件中

```
<?php
session_start();
if(isset($_POST['submit'])){
    if($_POST['options'] == "" ){
        header("Location: error.html");
        exit; 
    }else{
        $checked = $_POST['options'];
        $_SESSION['checked'] = $checked;
    }
}
?> 
```

如果你真的需要发送`options[]`

```
<?php
session_start();
if(isset($_POST['submit'])){
  if(is_array($_POST['options']){
    if($_POST['options'][0] == "" ){
        header("Location: error.html");
        exit; 
    }else{
        $checked = $_POST['options'][0];
        $_SESSION['checked'] = $checked;
    }
  }else{
    if($_POST['options'] == "" ){
        header("Location: error.html");
        exit; 
    }else{
        $checked = $_POST['options'];
        $_SESSION['checked'] = $checked;
    }
  }
}
?> 
```

如果你愿意，你可以清理这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:52:29.113

您可以使用此示例代码

```
<?php 
    if($_POST) { 
        if(isset($_POST['state'])) { 
            if($_POST['state'] == 'NULL') { 
                echo '<p>Please select an option from the select box.</p>'; 
            } 
            else { 
                echo '<p>You have selected: <strong>', $_POST['state'], '</strong>.</p>'; 
            } 
        } 
    } 
?> 
```

和你的html代码

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
    <fieldset> 
        <legend>Please select a state</legend> 
        <select name="state"> 
            <option value="NULL">-- Please select a state --</option> 
            <option value="AK">AK - Alaska</option> 
            <option value="AL">AL - Alabama</option> 
            <option value="WY">WY - Wyoming</option> 
        </select> 
        <input type="submit" name="submit"> 
    </fieldset> 
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T12:56:51.880

在您的情况下 options[] 可用于将多个字段作为数组发送，索引以 0 开头，例如：

```
<input name="test[]"> : index 0

<input name="test[]"> : index 1 
```

然后，您可以像这样在 $_POST['test'] 中获取这些值：

```
$input_one = $_POST['test'][0];
$input_one = $_POST['test'][1]; 
```

如果你在 $_POST 里面看这个，它会是这样的：

```
$_POST = array (
...,
'test' => array(0=> ..., 1 => ...)
) 
```

对于您的表单，如果您只有一个选项 []，则值为 $_POST 将是

```
if(isset($_POST['options'][0])){

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T12:53:24.553

所以让我们把它清理干净

```
<select name="options"> 
```

您不需要选项[]。

然后的结果`$_POST['options']`将是选项的值。并在那里添加`<option value="0">Select</option>`，然后检查 POSTed 数据是否高于 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T12:56:21.147

在 HTML 中

```
<select name="options">
<option value="0"></option>
<option value="1">1</option>
.
. 
```

在php中

```
 if(isset($_POST['options']) && !empty($_POST['options'])) {
      $checked = $_POST['options'];
    } 
```

# grails - Grails first object in a collection not updating whilst in an each loop

> ID：15135988
> 
> 赞同：1
> 
> 时间：2013-02-28T12:49:20.730
> 
> 标签：grails, collections, grails-orm

I am implementing a simple chat system in Grails as part of an existing application.

The main classes to consider are:

User.groovy

```
class User {

    ...

static hasMany = [
    ...
    chatMessages : ChatMessage,
    conversationParticipations:ConversationParticipation
    ]

static constraints = {
    ...     
}

} 
```

ChatConversation.groovy

```
class ChatConversation {

static hasMany = [
    conversationParticipations:ConversationParticipation,
    chatMessages:ChatMessage
    ]

static constraints = {
}
} 
```

ConversationParticipation.groovy - the intermediate class to remove the many-many between User and ChatConversation

```
class ConversationParticipation {

ChatMessageBuffer chatMessageBuffer

static constraints = {
    chatMessageBuffer nullable : true
}

static belongsTo = [
    user:User,
    chatConversation:ChatConversation       
    ]

} 
```

ChatMessageBuffer.groovy - used to hold chat messages, not yet read by a Conversation Participant

```
class ChatMessageBuffer {

static hasMany = [
    chatMessages : ChatMessage
    ]

static belongsTo = [
    conversationParticipation:ConversationParticipation
    ]

static constraints = {
    chatMessages nullable : true
    conversationParticipation nullable : true
}

} 
```

In a service I am calling methods to create a conversation and then to send any sent messages to the ChatMessageBuffers for that conversation like this

```
def createChatConversation(chatDetails)
{
    def chatConversation = new ChatConversation()

    chatConversation.save(flush:true, failOnError:true)

    new ConversationParticipation(
        user:getCurrentUser(),
        chatConversation:chatConversation,
        chatMessageBuffer:new ChatMessageBuffer()
    ).save(flush:true, failOnError:true)

    new ConversationParticipation(
        user:User.get(chatDetails.id),
        chatConversation:chatConversation,
        chatMessageBuffer: new ChatMessageBuffer()
    ).save(flush:true, failOnError:true)

    return chatConversation     
}

def sendMessage(chatMessageDetails)
{
    //save the message
    def chatMessage = new ChatMessage(
            body:chatMessageDetails.chatMessage,
            dateSent: new Date(),
            user:getCurrentUser(),
            chatConversation:ChatConversation.get(chatMessageDetails.chatConversationId)
        ).save(flush:true,failOnError : true)   

    //add the message to the message buffer for each participant of the conversation.   
    ConversationParticipation.findAllByChatConversation(            
        ChatConversation.get(chatMessageDetails.chatConversationId)
        ).each {                
            if(it.chatMessageBuffer.addToChatMessages(chatMessage).save(flush:true, failOnError:true))
            {
                println"adding to ${it.chatMessageBuffer.id}"
                println"added to : ${it.chatMessageBuffer.dump()}"                  
            }               
        }

        def chatMessageBuffer = ChatMessageBuffer.get(1)

        println"service : message buffer ${chatMessageBuffer.id}: ${chatMessageBuffer.dump()}"

    return chatMessage
} 
```

As you can see on creating a `ConversationParticipation` object, I am also creating a `ChatMessageBuffer`, which is cascading save when I call save on the `new ConversationParticipation`.

My problem is when I am adding the `ChatMessage`s to the two `ChatMessageBuffer`s, the first `ChatMessageBuffer` is not saving, but the second is. So when I go to add another `ChatMessage` to the same buffers, the first buffer is empty, but the second buffer contains the previously added ChatMessage(s).

Does anybody have any idea where I am going wrong? Why the first one will not save/update?

# javascript - append with jquery

> ID：15135999
> 
> 赞同：0
> 
> 时间：2013-02-28T12:50:00.837
> 
> 标签：javascript, jquery, ruby, ruby-on-rails-3

I'm having issue, when jquery appending string instead of tags. Here is my code:

```
$('.nested_comments_'+<%= @comment.parent.id %>).append("<div class='<%= 'nested_comments nested_comments_'+ @comment.id.to_s%>'></div>") 
```

ANd this results in

```
"<div class='nested_comments nested_comments_584'></div>" 
```

instead of html tag. WHat am i doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:53:23.660

~~你确定你不只是想念最后的父母吗：~~

 ~~```
$('.nested_comments_'+<%= @comment.parent.id %>).append("<div class='<%= 'nested_comments nested_comments_'+ @comment.id.to_s%>'></div>"); 
```~~  ~~您可以使用反转样式，使用[appendTo](http://api.jquery.com/appendTo/)：

```
$("<div class='<%= 'nested_comments nested_comments_'+ @comment.id.to_s%>'></div>").appendTo('.nested_comments_'+<%= @comment.parent.id %>); 
```~~