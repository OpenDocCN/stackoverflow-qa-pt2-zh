# StackOverflow 问答 14661000-14661999

# plot - 将多个数据文件合并到一个图中

> ID：14661002
> 
> 赞同：0
> 
> 时间：2013-02-02T10:36:30.067
> 
> 标签：plot, fortran, gnuplot

我有几个由 Fortran 代码生成的数据文件。所有数据文件的名称都遵循相同的样式，即：data###.out，其中### 从 001 开始，到 500 结束。我知道，为了读取和绘制几个数据文件，`gnuplot`我必须利用

```
plot for [i=1:500] sprintf('data00%i.out', i) u 1:2 w d lc rgb 'black' 
```

但是，这仅在 data009.out 之前有效。对于 010 到 099，它应该跳过一个零，从 100 到 999 应该跳过两个零。我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:11:22.083

要用零填充一个印有三位数字的整数，正确的格式是`%03i`. 尝试：

```
plot for [i=1:500] sprintf('data%03i.out', i) u 1:2 w d lc rgb 'black' 
```

# xslt - 基于 XSLT 的客户端应用程序的服务器端架构的最佳实践

> ID：14661004
> 
> 赞同：2
> 
> 时间：2013-02-02T10:36:40.677
> 
> 标签：xslt, saxon

我正在考虑将 Saxon CE 用于 Web 应用程序来编辑电子书（元数据和内容）。考虑到重要的电子书组件（例如 content.opf）本身就是 XML，这似乎是一个很好的匹配。我了解如何从服务器获取 XML 数据，对其进行转换，将结果插入 HTML DOM，并处理事件以更改显示的内容和方式。

我遇到困难的地方是如何最好地将更改同步回服务器。在服务器上使用 XML 数据库是最佳实践吗？将服务器上的 XML 维护为文本文件并用帖子覆盖它们是否合理，这是否可以/应该通过具有远程 URI 的结果文档来完成？

我意识到这个问题可能看起来有点开放，但我没有找到任何实际允许修改服务器上的数据的客户端 XSLT 应用程序示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:22:02.197

实际上，我不认为这个问题特定于在客户端上使用 Saxon-CE。如果您使用 XForms，或者实际上如果客户端代码是用 Javascript 编写的，那么问题将完全相同。我认为答案取决于容量、可用性和并发要求等等。

如果您正在对共享的 XML 数据集合进行严重级别的并发更新，那么使用 XML 数据库可能是一个好主意。另一方面，可能存在不需要这样做的场景，例如 XML 数据是用户特定应用程序上下文的一部分，或者从客户端接收的 XML 文档只需要“按原样”保存在某个地方，或者可能只需要将它附加到某种 XML 日志文件。

我认为在几乎所有情况下，您都需要应用程序的服务器端组件来响应 HTTP put/post 请求并决定如何处理它们。

# sql-server - windows升级后应用程序显示错误

> ID：14661005
> 
> 赞同：1
> 
> 时间：2013-02-02T10:36:45.250
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-express

嗨，我最近从 Windows 7 升级到了 Windows 8。并在我的 PC 上安装了 Visual Studio 2010 和 2012。我有两个在 Windows 7 下运行良好的个人应用程序，但在尝试在 Windows 8 上运行它们后，我收到以下错误.

第一个应用程序显示以下错误：

```
The database 'E:\PROJECTS IDE\VISUAL STUDIO\2010\WEBAPPLICATIONS\FORUM\APP_DATA\ASPNETDB.MDF' cannot be opened because it is version 706\. This server supports version 655 and earlier. A downgrade path is not supported.
Could not open new database 'E:\PROJECTS IDE\VISUAL STUDIO\2010\WEBAPPLICATIONS\FORUM\APP_DATA\ASPNETDB.MDF'. CREATE DATABASE is aborted.
An attempt to attach an auto-named database for file E:\Projects IDE\Visual Studio\2010\WebApplications\Forum\App_Data\ASPNETDB.MDF failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share. 
```

这似乎与两个应用程序上的 ASPNETB.MDF 数据库有关。

第二个应用程序起初运行良好，但我只是因为我已经创建了两个数据库并且为了运行应用程序访问 ASPNETDB.MDF 不是必需的。但是在我尝试登录到应用程序后，我得到了这个错误：

```
An attempt to attach an auto-named database for file D:\Projects IDE\Visual Studio\MyWork\Websites\e-commerce\e-commerce\App_Data\ASPNETDB.MDF failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share. 
```

我发布这两个应用程序问题的原因是因为我认为这是阻止我的应用程序运行的同一个问题。

我能做些什么来解决这个问题？

# associations - UML 和约束以及关联/聚合

> ID：14661012
> 
> 赞同：1
> 
> 时间：2013-02-02T10:38:16.673
> 
> 标签：associations, uml, constraints, aggregation

我想问你以下情况：

有一个名为 A 的类。它包含（聚合）两个类（B 和 C），但它们不是从同一个基类继承的。是否可以将 B 和 C 关联到 A 并使用带有 {or} 的约束，但在 A 侧只有一个引用？另一个解决方案可以是使用接口（Iface），所以我可以将A与Iface关联起来，B和C可以实现Iface。但问题是我可以为此使用约束吗？（正如我发现的，将 B 和 C 关联到 A 意味着 A 将包含 B 的引用和 C 的其他引用）。

谢谢，

费伦茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:34:04.710

我想您要问的是您是否可以对 A 建模，使其与另一个对象具有单一关联，该对象可以是 B 或 C 类型。对吗？

在这种情况下，您不需要约束，只需从 A 到新类（称为“D”）的关联，然后 B 和 C 将从 D 继承，如下所示：

![在此处输入图像描述](../Images/c12eb52354259858b5f9c34456df49ca.png)

这当然意味着您必须确定 B 和 C 的共同特征才能将其分解为 D 以允许可替代性。而 A 只能依赖 B 和 C 的那些特性。

如果您需要 A 与 B 或 C 具有常规关联并且不能使用继承，那么您需要与 {or} 约束的单独关联，因为您已正确识别。

# c# - 使用 FubuMvc 进行集成测试

> ID：14661014
> 
> 赞同：1
> 
> 时间：2013-02-02T10:38:25.737
> 
> 标签：c#, asp.net, integration-testing, fubumvc

我在想拥有这样的东西会很棒：

```
var mvc = new MyFullyConfiguredFubuMvc();
var response1 = mvc.Request("http://myawesomewebsite.com/page1");
var response2 = mvc.Request(new StringRequest { 
    Url="http://myawesomewebsite.com/page1?q=asylum", 
    CookieName=".aspauth",CookieBody="x=5;y=9",
    Method="get",
    Headers="y:6; z:qwerty"
}); 
```

所以问题是：用 FubuMvc 做这个有多容易？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T15:48:35.193

这是一个简单的例子： [https ://gist.github.com/4697920](https://gist.github.com/4697920)

# jquery - jquery UI 可拖动不适用于 AJAX

> ID：14661019
> 
> 赞同：5
> 
> 时间：2013-02-02T10:39:27.000
> 
> 标签：jquery, ajax, jquery-ui

我有一个简单的 D&D 脚本，你可以在这里看到：

[http://demo.superdit.com/jquery/dragdrop_cart/](http://demo.superdit.com/jquery/dragdrop_cart/)

现在它工作得很好，直到我尝试使用 AJAX 添加产品（加载页面后）

这是 AJAX 调用（常规 AJAX）

```
$.ajax({
              url: "Search.php",
              dataType: 'json',
              type: 'GET',
              data: "ebayq="+value,
              success: function(data){
                globalRequest = 0;
                resultContainer2.fadeOut('fast', function() {
                    resultContainer2.html('');

              var html2 = [];

    for (var i = 0; i < items.length; ++i)  
  {

html2 += '<label class="title"><a href="'+viewitem+'" target="_blank">'+title+'</a></label>';html2 += '<img src="'+pic+'">';
        html2 += ' <label class="price">New Price: '+myprice+'</label>';
        html2 += '</div>';
        resultContainer2.append(html2);

  } 
```

我猜是因为这些元素是在页面加载后加载的，并且它不会将它们识别为可拖动的项目..

有没有办法让这个 AJAX 项目可拖动？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:48:33.393

再次运行`$('your-selector').draggable()`，在您的 AJAX 成功方法中。

除非你能找到一种方法来制作`Jquery.on`或`Jquery.live`使用`JqueryUI.Draggable`.

# jquery - IE7手风琴菜单不起作用

> ID：14661020
> 
> 赞同：0
> 
> 时间：2013-02-02T10:39:30.630
> 
> 标签：jquery, css, internet-explorer-7

我有一个在 chrome、IE8、firefox 中运行良好的手风琴菜单，但是事实证明 IE7 有点困难。

你可以在这里看到所有的代码：http: [//jsfiddle.net/Y5pmV/](http://jsfiddle.net/Y5pmV/)

非常感谢您的帮助，因为我的截止日期非常紧迫！

提前谢谢了。

代码也在这里....

CSS

```
#navbar {
list-style: none;
padding: 0 0 0 0;
width: 233px;
}
#navbar li {
text-align:center;
font-weight: bold;
margin-bottom: 2px;
cursor: pointer;
list-style: circle;
height:29px;
line-height:normal;
display: table;
width: 100%;
}
#navbar ul {
list-style: none;
padding: 0 0 0 0;
display: none;
}
#navbar ul li {
font-weight: normal;
cursor: auto;
background-color: #fff;
padding: 0 0 0 7px;
line-height:normal;
}
#navbar a {
padding-top:5px;
text-decoration: none;
font-size: 19px;
}
#navbar a:hover {
}
#navbar li:first-child {
margin:2px 0 2px 0;
background:url(images/menuBG.png) 0px -90px;
}

#navbar li#menu-item-12 a, #navbar li#menu-item-13 a, #navbar li#menu-item-14 a, #navbar    li#menu-item-29 a {
color:#76a443
} 
```

Javascript...

```
$("#navbar > li").click(function () {
var child = '#' + $(this).attr('id') + ' > ul';
$(child).slideToggle();
});
$('#navbar > ul:eq(0)').show(); 
```

HTML...

```
<ul id="navbar" class="menu">
<li id="menu-item-29" class="menu-item menu-item-type-custom
 menu-item-object-custom firstmenuitem"><a href="http://#" class="item"> Pests </a>

    <ul class="sub-menu">
        <li id="menu-item-22" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">Product 1</a>

        </li>
        <li id="menu-item-23" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">Product 2</a>

        </li>
        <li id="menu-item-24" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">product 3</a>

        </li>
        <li id="menu-item-25" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">Product 4</a>

        </li>
        <li id="menu-item-52" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="http://product-5" class="item">product 5</a>

        </li>
    </ul>
</li>
<li id="menu-item-51" class="menu-item menu-item-type-custom menu-item-object-custom">
<a> Products </a>

    <ul class="sub-menu">
        <li id="menu-item-22" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">Product 1</a>

        </li>
        <li id="menu-item-23" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">product 2</a>

        </li>
        <li id="menu-item-24" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">product 3</a>

        </li>
        <li id="menu-item-25" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">Product 4</a>

        </li>
        <li id="menu-item-52" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="http://product 5" class="item">product 5</a>

        </li>
    </ul>
</li>
<li id="menu-item-13" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> decs 1 </a>

</li>
<li id="menu-item-14" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> desc2 </a>

</li>
<li id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> desc 3 </a>

</li>
<li id="menu-item-16" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item">desc4 </a>

</li>
<li id="menu-item-17" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> desc 5 </a>

</li>
<li id="menu-item-18" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="#" class="item"> desk 6 </a>

</li>
<li id="menu-item-30" class="menu-item menu-item-type-custom menu-item-object-custom">
<a href="http://#" class="item"> desk 7 </a>

</li>
<li id="menu-item-19" class="menu-item menu-item-type-custom menu-item-object-custom
lastmenuitem"><a href="#" class="item"> Links </a>

</li>
</ul>
<!-- Navbar ends here -->
</div>
<!-- Menu ends here --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:28:59.990

尝试这个：

```
$("#navbar > li").click(function () {
$("#navbar > li").css({height:'29px'});
$(this).css({height:'auto'});
var child = '#' + $(this).attr('id') + ' > ul';
$(child).slideToggle();
});
$('#navbar > ul:eq(0)').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:02:52.353

`29px`你在这个类中有一个固定的高度：http `#navbar li`: [//jsfiddle.net/Y5pmV/2/](http://jsfiddle.net/Y5pmV/2/)

你的问题在这里：

```
#navbar li {
  text-align:center;
  font-weight: bold;
  margin-bottom: 2px;
  cursor: pointer;
  list-style: circle;
  height:auto;   //<-------------you have fixed the height here make it auto;
  line-height:normal;
  display: table;
  width: 100%;
} 
```

## 更新：

您在小提琴中有一个这样的链接，试图导航。

```
<a href="http://#"></a> 
```

也改变这个：

```
<a href="#"></a> 
```

# c# - 使用 linq 按日期查询分组填充数据表中的缺失日期

> ID：14661026
> 
> 赞同：0
> 
> 时间：2013-02-02T10:40:08.470
> 
> 标签：c#, asp.net

我正在尝试在数据表中填写缺失的日期以进行报告。例如：

数据表集合：

```
2010-01-01 : 5
2010-01-02 : 4
2010-01-03 : 2
2010-01-05 : 6 
```

但我想要这样的结果：

```
2010-01-01 : 5
2010-01-02 : 4
2010-01-03 : 2
2010-01-04 : 0
2010-01-05 : 6

var total = from row in dt2.AsEnumerable() 
            where row.Field<UInt32>("Super Category") == j 
            group row by row.Field<string>("Activation Date") into sales 
            orderby sales.Key 
            select new 
                   { 
                       Name = sales.Key, 
                       CountOfClients = sales.Count() 
                   }; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:18:19.370

这有效：

```
 DataTable dt = new DataTable();
        dt.Columns.Add(new DataColumn("dt", typeof(DateTime)));
        dt.Columns.Add(new DataColumn("num", typeof(int)));
        dt.Rows.Add(new DateTime(2010, 1, 1), 5);
        dt.Rows.Add(new DateTime(2010, 1, 2), 4);
        dt.Rows.Add(new DateTime(2010, 1, 3), 2);
        dt.Rows.Add(new DateTime(2010, 1, 5), 6);
        dt.Rows.Add(new DateTime(2010, 1, 8), 6);
        dt.Rows.Add(new DateTime(2010, 1, 9), 6);
        dt.Rows.Add(new DateTime(2010, 1, 12), 6);

        DateTime minDT = dt.Rows.Cast<DataRow>().Min(row => (DateTime)row["dt"]);
        DateTime maxDT = dt.Rows.Cast<DataRow>().Max(row => (DateTime)row["dt"]);

        // Create all the dates that should be in table
        List<DateTime> dts = new List<DateTime>();
        DateTime DT = minDT;
        while (DT <= maxDT)
        {
            dts.Add(DT);
            DT = DT.AddDays(1);
        }

        // Find the dates that should be in table but aren't
        var DTsNotInTable = dts.Except(dt.Rows.Cast<DataRow>().Select(row => (DateTime)row["dt"]));

        foreach (DateTime dateTime in DTsNotInTable)
            dt.Rows.Add(dateTime, 0);

        // Order the results collection
        var ordered = dt.Rows.Cast<DataRow>().OrderBy(row => (DateTime)row["dt"]);

        // Create a DataTable object
        DataTable dt2 = ordered.CopyToDataTable(); 
```

`dt2`表将包含按列`DateTime`排序的没有间隙的结果。`DateTime`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:01:55.760

尝试这样的事情。

```
DateTime startDate = collection.first().date;
DateTime endDate = collection.last().date;

While(startDate < endDate)
{
    // compare if collection date is valid
    startDate.AddDays(1);
} 
```

# vb.net - Visual Basic 2010 中的 SQL 注入

> ID：14661027
> 
> 赞同：0
> 
> 时间：2013-02-02T10:40:22.787
> 
> 标签：vb.net, sql-server-2008, sql-server-2005, sql-injection

我不知道如何避免 SQL 注入，有人可以帮我解决我的问题吗？

这是我当前的代码：

```
Private Function INSERT() As String
        Dim SQLcon As New SqlConnection
        Dim SQLdr As SqlDataReader
        Try
            SQLcon.ConnectionString = "Data Source=#####;Initial Catalog=OJT;Persist Security Info=True;User ID=####;Password=#####"
            Dim SQLcmd As New SqlCommand("INSERT INTO dbo.Patients(pIDNo,pLName,pFName,pMI,pSex,pStatus,pTelNo,pDocID,pAddr,pStreet,pBarangay,pCity,pProvince,pLNameKIN,pFNameKIN,pMIKIN,pRelationKIN) VALUES('" & LabelPNumber.Text & "','" & txtLname.Text & "','" & txtFname.Text & "','" & txtMI.Text & "','" & txtPatientSex.Text & "','" & txtPatientSex.Text & "','" & txtPatientTelNo.Text & "','" & txtPatientDoctor.Text & "','" & txtStreetNumber.Text & "','" & txtStreetName.Text & "','" & txtBarangay.Text & "','" & txtCity.Text & "','" & txtProvince.Text & "','" & txtKinLname.Text & "','" & txtKinFname.Text & "','" & txtKinMI.Text & "','" & txtRelationToPatient.Text & "') ", SQLcon)
            SQLcon.Open()
            MsgBox("Patient Added!", MsgBoxStyle.Information)
            SQLdr = SQLcmd.ExecuteReader()
        Catch ex As Exception
            MessageBox.Show("Error Occured, Can't Add Patient!" & ex.Message)
        Finally
            SQLcon.Close()
        End Try
        Return "done"
    End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:45:03.863

基本上，任何将字符串连接在一起以创建 SQL 语句的地方，尤其是来自用户输入的语句，都是易受攻击的。

不用这样做，而是使用 SQL 参数，可以将其添加到 SQL 命令的 Parameters 属性中（`SQLcmd`此处）。

我将向您展示一个带有您的参数之一的示例 - 将您的 SQLCommand 文本更改为：

```
INSERT INTO dbo.Patients(pIDNo, ...)
VALUES(@pIDNo, ...) 
```

where是参数值字符串中的“占位符”，它与[SQLParameters 集合](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx?cs-save-lang=1&cs-lang=vb)`@pIDNo`中的命令分开发送。

然后，您可以添加一个与此“占位符”同名的参数和值（它将根据为您提供的值派生类型）。

这是之前的示例：

```
SQLcmd.Parameters.AddWithValue("@pIDNo", LabelPNumber.Text) 
```

# python - 将查找由特定字母组成的单词的 Python 代码。可以使用字母的任何子集

> ID：14661032
> 
> 赞同：0
> 
> 时间：2013-02-02T10:41:03.417
> 
> 标签：python

如果我有一个可变单词中的单词列表和可变字母中的字母列表，我怎样才能找到可以由字母中的字母组成的所有单词。可以使用变量 letters 中的任何字母子集，并且可以多次使用字母。我想在 Python 中做到这一点。

例如：

```
letters = ['a', 'b', 'i', 'l', 'r', 's', 't', 'u']
words = ['dummy', 'australia'] 
```

应该返回：

```
'australia' 
```

即使有一个额外的'b'，但不是：

```
'dummy' 
```

因为 d、m 和 y 不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:46:22.487

使用正则表达式：

```
>>> import re
>>> m = re.compile('^[abilrstu]+$')
>>> m.match('australia') is not None
True
>>> m.match('dummy') is not None
False
>>> m.match('australian') is not None
False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:44:39.330

您可以`all()`与 一起使用`sets`，因为它们允许`O(1)`会员检查：

```
In [9]: words = ['dummy', 'australia']

In [10]: letters = ['a', 'b', 'i', 'l', 'r', 's', 't', 'u']

In [11]: let_set=set(letters)

In [12]: for word in words:
    if all(x in let_set for x in set(word)):
        print word
   ....:         
australia 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:45:02.477

这可能是最简单的方法：

```
result = [w for w in words if all(i in letters for i in w)] 
```

这返回`['australia']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T11:12:08.223

这采用了设置交集，这*可能*会更快。另一方面，它需要额外的内存。

```
letters = ['a', 'b', 'i', 'l', 'r', 's', 't', 'u']
words = ['dummy', 'australia', 'australians' ]

f = set(letters)
c = [ (word, set(word)) for word in words ]
# changing to s & f == f makes condition "must use ALL letters"
s = [ w for (w, s) in c if s & f == s ] 
```

s 现在`['australia']`

（但我很好奇这种解决方案的使用。一个拼字游戏机器人？对字典密码的*灰尘键盘攻击？）*

# bash - rsync ：递归同步所有文件，同时忽略目录结构

> ID：14661033
> 
> 赞同：21
> 
> 时间：2013-02-02T10:41:05.320
> 
> 标签：bash, rsync

我正在尝试创建一个 bash 脚本，用于将音乐从我的桌面同步到移动设备。桌面是源。

有没有办法让 rsync 递归同步文件但忽略目录结构？如果从桌面删除了文件，我希望它也可以在设备上删除。

我桌面上的目录结构是这样的。

```
 Artist1/
        Artist1/art1_track1.mp3
        Artist1/art1_track2.mp3
        Artist1/art1_track3.mp3
    Artist2/
        Artist2/art2_track1.mp3
        Artist2/art2_track2.mp3
        Artist2/art2_track3.mp3
    ... 
```

我想要在设备上的目录结构是：

```
 Music/
        art1_track1.mp3
        art1_track2.mp3
        art1_track3.mp3
        art2_track1.mp3
        art2_track2.mp3
        art2_track3.mp3
    ... 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-02T14:47:24.210

简单地：

```
rsync -a --delete --include=*.mp3 --exclude=* \
    pathToSongs/Theme*/Artist*/. destuser@desthost:Music/. 
```

如果您的路径层次结构具有固定数量的级别，则可以完成这项工作。

警告：如果两个歌曲文件的名称完全相同，而在同一目标目录中，您的备份将丢失其中一个！

如果是这样，并且为了严格回答您的问题*而忽略目录结构*，您可以使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")的`shopt -s globstar`功能：

```
shopt -s globstar
rsync -a --delete --include=*.mp3 --exclude=* \
    pathToSongsRoot/**/. destuser@desthost:Music/. 
```

根本不需要 fork 来`find`指挥。

### 递归同步所有文件，同时忽略目录结构

为了严格回答问题，不得仅限于扩展：

```
shopt -s globstar
rsync -d --delete sourceRoot/**/. destuser@desthost:destRoot/. 
```

这样，目录也将被复制，但没有内容。所有文件**和**目录都将存储在同一级别`destRoot/`。

警告：如果在不同的目录中存在一些具有相同名称的不同文件，它们将在 rsync 期间被简单地覆盖在目标上，最终只随机存储一个。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-01-27T15:36:16.697

可能这是一个最近的选项，但我看到`--no-relative`文档中提到的选项`--files-from`并且效果很好。

```
find SourceDir -name \*.mp3 | rsync -av --files-from - --no-relative . DestinationDir/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T16:08:31.070

您的问题的答案：不，`rsync`不能单独做到这一点。但是在其他工具的帮助下，我们可以到达那里......经过几次尝试，我想出了这个：

```
rsync -d --delete $(find . -type d|while read d ; do echo $d/ ; done) /targetDirectory && rmdir /targetDirectory/* 2>&- 
```

困难在于：要启用删除目标位置的文件，您需要：

1.  指定目录作为 rsync 的源（如果源是文件列表，它不会删除）。
2.  一次给它完整的源列表（`rsync`在循环内只会给你最后一个目录的内容在目标）。
3.  用斜杠结束目录名称（否则它会在目标目录中创建目录）

所以命令替换（用 . 括起来的东西`$(` `)`）是这样做的：它找到所有目录并在目录名称的末尾添加一个斜杠 (/)。现在 rsync 看到一个源目录列表，所有目录都以斜线结尾，因此将它们的内容复制到目标目录。该选项`-d`告诉它，不要递归复制。

第二个技巧是`rmdir /targetDirectory/*`删除创建的空目录`rsync`（尽管我们没有要求它这样做）。

我在这里进行了测试，删除源树中删除的文件效果很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-24T18:26:55.007

如果您可以列出文件，那么您已经解决了问题。尝试：

```
find /path/to/src/ -name \*.mp3 > list.txt
rsync -avi --no-relative --progress --files-from=list.txt / user@server:/path/to/dest 
```

如果您再次为新文件运行脚本，它只会复制丢失的文件。

如果您不喜欢该列表，请尝试单句（但这是另一种逻辑）

```
find /path/to/src/ -name \*.mp3 -type f \
  -exec rsync -avi --progress {} user@server:/path/to/dest/  \; 
```

在这种情况下，您将每次都询问每个文件，因为根据句子的类型，您以前无法构建文件列表。

# php - 我想在我的网络应用程序中提供像 tumblr 这样的模板编辑；我的安全考虑是什么？

> ID：14661034
> 
> 赞同：1
> 
> 时间：2013-02-02T10:41:11.397
> 
> 标签：php, security, xss, twig, tumblr

我正在使用 php 和 twig 模板引擎，我希望我的用户能够设计将输出的完整 html 文档。我需要它们能够包含脚本和来自外部来源的 css。

为了安全起见，我需要做什么才能完全锁定我的应用程序？

tumblr 采取了哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:53:17.393

没有任何解决方案可以确保您的项目 100% 安全。但是，您可以采取一些措施并在特定时间段内检查用户 html 文件中的恶意软件代码。我不完全确定，但我认为有一些免费的优秀 API 可以为您完成这项工作。我不太了解 Tumblr，但我认为他们正在使用某种 API 进行 javascript 检查。

# textbox - 谷歌脚本获取 UI 文本框值

> ID：14661035
> 
> 赞同：1
> 
> 时间：2013-02-02T10:41:11.813
> 
> 标签：textbox, google-apps-script

我创建了一个带有 2 个文本框和 1 个按钮的简单 GUI。按钮处理程序如下

```
function handleButton1(e) 
{
    var app = UiApp.getActiveApplication();
    var v1 = e.parameter.TextBox1;
    var v2 = e.parameter.TextBox2;
    Logger.log(v1);
    app.getElementById("TextBox1").setText(v2);
    app.getElementById("TextBox2").setText(v1);
    return app;
} 
```

当我运行应用程序时，文本框的值为 TextBox1 和 TextBox2。当按下按钮时，显示的两个文本框值都是未定义的。我哪里错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T14:57:41.120

对于服务器端点击处理程序，您需要使用`.addCallbackElement()`. 如果这样做，您添加的命名元素的当前值将包含在传递给您的处理程序的事件中。

既然你看到了`undefined`，很可能你没有添加回调。您的 UI 定义中应该有这样的内容：

```
var handler = app.createServerHandler('handleButton1')
                 .addCallbackElement(textBox1)
                 .addCallbackElement(textBox2);
button.addClickHandler(handler); 
```

元素的名称将用于标记回调值 ( `.setName()`)，而 id 将用于访问处理程序中的元素 ( `.setId()`)。

这是您的脚本的工作版本：

```
function doGet() {
  var app = UiApp.createApplication();

  var textBox1 = app.createTextBox().setName("TextBox1").setId("TextBox1");
  var textBox2 = app.createTextBox().setName("TextBox2").setId("TextBox2");
  var button = app.createButton('Swap Contents');
  app.add(textBox1).add(textBox2).add(button);

  var handler = app.createServerHandler('handleButton1')
                   .addCallbackElement(textBox1)
                   .addCallbackElement(textBox2);
  button.addClickHandler(handler);

  return app;
}

function handleButton1(e) 
{
  //Logger.log(JSON.stringify(e));
  var app = UiApp.getActiveApplication();
  var v1 = e.parameter.TextBox1;
  var v2 = e.parameter.TextBox2;
  app.getElementById("TextBox1").setText(v2);
  app.getElementById("TextBox2").setText(v1);
  return app;
} 
```

# java - 代码中是否发生线程饥饿死锁？

> ID：14661036
> 
> 赞同：3
> 
> 时间：2013-02-02T10:41:22.207
> 
> 标签：java, concurrency, deadlock, executorservice

```
//code taken from java concurrency in practice

  package net.jcip.examples;

import java.util.concurrent.*;

public class ThreadDeadlock
       {
    ExecutorService exec = Executors.newSingleThreadExecutor();

    public class LoadFileTask implements Callable<String> {
        private final String fileName;

        public LoadFileTask(String fileName) {
            this.fileName = fileName;
        }

        public String call() throws Exception {
            // Here's where we would actually read the file
            return "";
        }
    }

    public class RenderPageTask implements Callable<String> 
    {
        public String call() throws Exception
        {
            Future<String> header, footer;
            header = exec.submit(new LoadFileTask("header.html"));
            footer = exec.submit(new LoadFileTask("footer.html"));
            String page = renderBody();
            // Will deadlock -- task waiting for result of subtask
            return header.get() + page + footer.get();
        }

    }
} 
```

这段代码实际上取自 Java 并发，根据作者的说法，“ThreadStarvtionDeadlock”正在这里发生。请帮我找出 ThreadStarvationDeadlock 是如何在这里和哪里发生的？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T13:19:53.967

死锁和饥饿发生在以下行：

```
return header.get() + page + footer.get(); 
```

**如何？**
如果我们在程序中添加一些额外的代码，就会发生这种情况。可能是这个：

```
 public void startThreadDeadlock() throws Exception
    {
        Future <String> wholePage = exec.submit(new RenderPageTask());
        System.out.println("Content of whole page is " + wholePage.get());
    }
    public static void main(String[] st)throws Exception
    {
        ThreadDeadLock tdl = new ThreadDeadLock();
        tdl.startThreadDeadLock();
    } 
```

导致死锁的步骤：

1.  任务通过已实现的类提交给`exec`渲染页面。`Callable``RenderPageTask`
2.  `exec`启动时是`RenderPageTask`分开`Thread`的，唯一的就是执行顺序`Thread`提交的其他任务。`exec`
3.  里面还有两个任务的`call()`方法被提交到。第一个是，第二个是。但是由于通过[此处](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)提到的代码获得的 ExecutorService**使用单个工作线程操作无界 queueThread**并且该线程已分配给 RenderPageTask ，因此将 排队到无界队列等待轮流执行。`RenderPageTask``exec``LoadFileTask("header.html")``LoadFileTask("footer.html")``exec``Executors.newSingleThreadExecutor();` **`LoadFileTask("header.html")``LoadFileTask("footer.html")``Thread`**
***   `RenderPageTask`正在返回一个字符串，其中包含 的输出 `LoadFileTask("header.html")`、页面正文和 的输出的串联`LoadFileTask("footer.html")`。这三个部分`page`是由 成功获得的`RenderPageTask`。但是其他两个部分只有在两个任务都由分配的单个线程执行后才能获得`ExecutorService`。`call()`并且线程只有在返回方法之后才会被释放`RenderPageTask`。但是`call`方法 of`RenderPageTask`只会在`LoadFileTask("header.html")`and`LoadFileTask("footer.html")`被返回之后返回。所以不让`LoadFileTask`执行会导致**饥饿**。并且每个等待其他任务完成的任务都会导致**死锁**

    我希望这可以说明为什么上面代码中会发生线程饥饿死锁。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:49:36.170

我看到的执行器是一个单线程执行器，它有两个任务要做。然而，这两个任务并不相互依赖，它们的执行顺序似乎并不重要。因此，return 语句只会在[Future.get](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get%28%29)调用中暂停，以完成一个任务和另一个任务。

您显示的代码不会出现死锁。

**但是**我在代码中看到了另一个任务（RenderPageTask），不清楚哪个执行器实际上正在运行它的代码。如果是同一个单线程执行器，则可能死锁，因为两个提交的任务在主任务返回之前无法处理（而这个任务只有在两个任务都处理完后才能返回）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T21:30:16.933

原因从代码本身看不是很明显，而是从复制代码的原书来看：RenderPageTask向Executor提交了两个**额外**的任务以获取页面页眉和页脚......

如果 RenderPageTask 是独立于 newSingleThreadExecutor 的任务，则根本不会出现死锁。**

# c# - Callisto 多个参考错误

> ID：14661041
> 
> 赞同：0
> 
> 时间：2013-02-02T10:42:09.943
> 
> 标签：c#, windows, visual-studio, xaml, callisto

最近我尝试为 Windows 商店应用程序安装 callisto 1.1.0 和 1.2.6。但是安装后我的应用程序停止运行并弹出此错误

> 错误 1 ​​具有相同简单名称 'Callisto, Version=1.2.6.0, Culture=neutral, PublicKeyToken=null 的程序集已被导入。尝试删除其中一个引用或对其进行签名以并排启用。c:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs\Callisto\1.2.6\References\CommonConfiguration\neutral\Callisto.dll Callisto_AppBar

我尝试从安装位置删除 dll 文件并重新安装最新版本的 callisto。但是仍然弹出相同的错误。如果有人可以为此分享解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T21:39:00.940

你的项目中不能有这个库的多个版本……只允许一个。

# iphone - 如何从我的 iphone 应用程序将图像存储到 iCloud？

> ID：14661043
> 
> 赞同：2
> 
> 时间：2013-02-02T10:42:33.147
> 
> 标签：iphone, icloud, photo-gallery

我在 iPhone [App Store](https://itunes.apple.com/us/app/myphoto-pro-smart-photo-manager/id374269181?mt=8)（[网站](http://myphototips.tumblr.com/)）中有一个类似**MyPhoto Pro应用程序的项目。**

请，任何人都可以帮助或指导我应该使用哪些技术和框架来开发？

但我的首要任务是图像应该存储在 iCloud 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:58:37.593

对于**iCloud**文件存储，请参阅[文档中的 iCloud](http://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForDocumentsIniCloud.html)文档设计。

然后检查`NSFileManager`类，*管理基于 iCloud 的项目*部分。

*   `-ubiquityIdentityToken`-**检测**iCloud 可用性
*   `-URLForUbiquityContainerIdentifier:`–获取iCloud 目录（容器）的**URL**
*   `-setUbiquitous:itemAtURL:destinationURL:error:`–**将**任何本地文件移动到 iCloud（反之亦然）；一个 URL 必须是本地的，并且必须指向其中一个 iCloud 容器
*   `-startDownloadingUbiquitousItemAtURL:error:`–**下载**文件内容
*   `-evictUbiquitousItemAtURL:error:`-**删除**iCloud 文件。

还要检查`NSMetadataQuery`和`NSMetadataItem`类用于**发现**新的 iCloud 文件。iCloud 会自动**只为您提供文件的元数据**，但必须明确下载内容（参见上述方法）

# matlab - 在 MATLAB 中读取 AVI 文件时出错

> ID：14661050
> 
> 赞同：0
> 
> 时间：2013-02-02T10:44:39.450
> 
> 标签：matlab, video, video-processing

我正在使用 MATLAB 从 avi 文件中提取特征。每次运行代码时，我都会收到错误“阅读中的异常”。代码是：

```
cd('D:\Classified\negative-videos'); 
neg_files = dir('*.avi');

% compute negative files

for fileIter=1:size(neg_files,1)
   tic;
    movie_name = neg_files(fileIter).name;
    try

    [color_score__,edge_score__,spatio_score__,score__] = lg_model(movie_name,fps,3);

    if(score__ < threshold)
       true_neg = true_neg + 1 ;
    end

    if(score__ >= threshold)
        false_pos = false_pos + 1 ;
    end
    fprintf('[ %d / %d ]\tFile : %s\tscore : %f\tcolor_score : %f\tspatio_score : %f\n', fileIter,size(neg_files,1),movie_name, score__,color_score__, spatio_score__);        

    catch ME1
     fprintf('[ %d / %d ]\tFile : %s\t EXCEPTION IN READING \n', fileIter,size(neg_files,1),movie_name);
    end
    toc;    
    end

     fprintf('INTERMEDIATE\ttrue pos =  %d \n false pos = %d \n true neg =  %d \n false neg = %d \n', true_pos,false_pos,true_neg, false_neg); 
```

上面的代码片段有什么问题？

堆栈跟踪如下：对于我目录中的 18 个视频中的每一个，我都会收到以下错误：

```
 [ 1 / 18 ]    File : 38-Meter High Dive Goes Wrong.avi     EXCEPTION IN READING 

   ME1 = 

MException

Properties:
identifier: 'MATLAB:UndefinedFunction'
   message: 'Undefined function or method 'VideoReader' for input arguments of type 'char'.'
     cause: {}
     stack: [3x1 struct]

 Methods

 ME1 = 

 MException

 Properties:
 identifier: 'MATLAB:UndefinedFunction'
   message: 'Undefined function or method 'VideoReader' for input arguments of type 'char'.'
     cause: {}
     stack: [3x1 struct]

 Methods

 MException

 Properties:
 identifier: 'MATLAB:UndefinedFunction'
   message: 'Undefined function or method 'VideoReader' for input arguments of type 'char'.'
     cause: {}
     stack: [3x1 struct]

 Methods

 Undefined function or method 'VideoReader' for input arguments of type 'char'.
 3x1 struct array with fields:
file
name
line

MATLAB:UndefinedFunction
Elapsed time is 0.017901 seconds. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:00:34.253

很抱歉没有发表评论，但在我被允许之前需要更多的代表。

我同意@JimInCO，看起来你没有`VideoReader`. 它在 R2010b 中首次引入。如果您有旧版本，您可以尝试使用[aviread 。](http://www.mathworks.com.au/help/matlab/ref/aviread.html)

# python - 将 Python 字典转换为 JSON 数组

> ID：14661051
> 
> 赞同：101
> 
> 时间：2013-02-02T10:44:40.500
> 
> 标签：python, python-2.7

目前我有这本字典，使用以下方法打印`pprint`：

```
{'AlarmExTempHum': '\x00\x00\x00\x00\x00\x00\x00\x00',  
'AlarmIn': 0,  
'AlarmOut': '\x00\x00',  
'AlarmRain': 0,  
'AlarmSoilLeaf': '\x00\x00\x00\x00',  
'BarTrend': 60,  
'BatteryStatus': 0,  
'BatteryVolts': 4.751953125,  
'CRC': 55003,
'EOL': '\n\r',
'ETDay': 0,
'ETMonth': 0,
'ETYear': 0,
'ExtraHum1': None,
'ExtraHum2': None,
'ExtraHum3': None,
'ExtraHum4': None,
'ExtraHum5': None,
'ExtraHum6': None,
'ExtraHum7': None,
'ExtraTemp1': None,
'ExtraTemp2': None,
'ExtraTemp3': None,
'ExtraTemp4': None,
'ExtraTemp5': None,
'ExtraTemp6': None,
'ExtraTemp7': None,
'ForecastIcon': 2,
'ForecastRuleNo': 122,
'HumIn': 31,
'HumOut': 94,
'LOO': 'LOO',
'LeafTemps': '\xff\xff\xff\xff',
'LeafWetness': '\xff\xff\xff\x00',
'NextRec': 37,
'PacketType': 0,
'Pressure': 995.9363359295631,
'RainDay': 0.0,
'RainMonth': 0.0,
'RainRate': 0.0,
'RainStorm': 0.0,
'RainYear': 2.8,
'SoilMoist': '\xff\xff\xff\xff',
'SoilTemps': '\xff\xff\xff\xff',
'SolarRad': None,
'StormStartDate': '2127-15-31',
'SunRise': 849,
'SunSet': 1611,
'TempIn': 21.38888888888889,
'TempOut': 0.8888888888888897,
'UV': None,
'WindDir': 219,
'WindSpeed': 3.6,
'WindSpeed10Min': 3.6} 
```

当我这样做时：

```
import json
d = (my dictionary above)
jsonarray = json.dumps(d) 
```

我收到此错误：`'utf8' codec can't decode byte 0xff in position 0: invalid start byte`

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2013-02-02T10:50:04.297

如果您对 json 中的不可打印符号感到满意，请添加`ensure_ascii=False`到`dumps`调用中。

```
>>> json.dumps(your_data, ensure_ascii=False) 
```

> 如果`ensure_ascii`为 false，则返回值将是 `unicode`受普通 Python 强制规则约束的实例，`str`而`unicode` 不是转义为 ASCII `str`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-02T11:36:50.087

ensure_ascii=False 实际上只是将问题推迟到解码阶段：

```
>>> dict2 = {'LeafTemps': '\xff\xff\xff\xff',}
>>> json1 = json.dumps(dict2, ensure_ascii=False)
>>> print(json1)
{"LeafTemps": "����"}
>>> json.loads(json1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/json/__init__.py", line 328, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 365, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/json/decoder.py", line 381, in raw_decode
    obj, end = self.scan_once(s, idx)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xff in position 0: invalid start byte 
```

最终，您无法将原始字节存储在 JSON 文档中，因此您需要使用某种方法将任意字节序列明确编码为 ASCII 字符串 - 例如 base64。

```
>>> import json
>>> from base64 import b64encode, b64decode
>>> my_dict = {'LeafTemps': '\xff\xff\xff\xff',} 
>>> my_dict['LeafTemps'] = b64encode(my_dict['LeafTemps'])
>>> json.dumps(my_dict)
'{"LeafTemps": "/////w=="}'
>>> json.loads(json.dumps(my_dict))
{u'LeafTemps': u'/////w=='}
>>> new_dict = json.loads(json.dumps(my_dict))
>>> new_dict['LeafTemps'] = b64decode(new_dict['LeafTemps'])
>>> print new_dict
{u'LeafTemps': '\xff\xff\xff\xff'} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-30T21:27:09.497

如果您使用 Python 2，请不要忘记在脚本的第一行添加 UTF-8 文件编码注释。

```
# -*- coding: UTF-8 -*- 
```

这将解决一些 Unicode 问题，让您的生活更轻松。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-03T02:04:39.870

我使用的一种可能的解决方案是使用 python3。它似乎解决了许多 utf 问题。

很抱歉回答迟了，但它可能会在未来帮助人们。

例如，

```
#!/usr/bin/env python3
import json
# your code follows 
```

# mysql - MySQL：如何通过为特殊记录提供特定分数来对 select 进行排序

> ID：14661052
> 
> 赞同：2
> 
> 时间：2013-02-02T10:44:47.160
> 
> 标签：mysql, sql, select

我有一个简单的表格，例如：

```
id | name   | category
------------------------
1  | banana | 1
2  | orange | 1
3  | fruit  | 1
4  | potato | 2
5  | car    | 0 
```

我有很多特殊的过滤器，应该为要显示的列表分配一个特殊的分数。这是此示例的机制：

1.  如果“名称”是“香蕉”或“橙色”，则得分 = 得分 + 2
2.  如果“名称”是“水果”，则得分 = 得分 + 1
3.  如果“名字”是“土豆”，分数 = 分数 + 0
4.  如果“类别”> 0，分数 = 分数 + 1

所以在我的结果中我需要

```
id | name   | category | score
-------------------------------
1  | banana | 1        | 3 ( condition 1+4)
2  | orange | 1        | 3 ( condition 1+4)
3  | fruit  | 1        | 2 ( condition 2+4)
4  | potato | 2        | 1 ( condition 3+4)
5  | car    | 0        | 0 ( no match) 
```

最后我想按分数排序结果。我无法创建新列，因为条件是由用户选择的。什么将是 MySQL 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:55:32.020

一种可能的方法：

```
SELECT id, name, category,
       IF(category > 0, 1, 0) + 
       (CASE name WHEN 'banana' THEN 2
                 WHEN 'orange' THEN 2
                 WHEN 'fruit' THEN 1
                 ELSE 0 END)
        AS score
FROM ttt
ORDER BY score DESC 
```

[**SQL小提琴**](http://sqlfiddle.com/#!2/ee1b2/20)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:58:36.413

你可以这样做：

```
SELECT 
  id, 
  name, 
  category, 
  nameCondition + catCondition AS Score
FROM
(
    SELECT
      id, name, category,
      CASE 
        WHEN name IN ('banana', 'orange') THEN 2
        WHEN name = 'fruit'               THEN 1
        WHEN name = 'potato'              THEN 0
        ELSE 0
       END AS nameCondition,
       CASE 
         WHEN  category > 0 THEN 1 
         ELSE 0 
       END AS catCondition
    FROM tablename
) AS t; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/b5c6d/2)。

这会给你：

```
| ID |   NAME | CATEGORY | SCORE |
----------------------------------
|  1 | banana |        1 |     3 |
|  2 | orange |        1 |     3 |
|  3 |  fruit |        1 |     2 |
|  4 | potato |        2 |     1 |
|  5 |    car |        0 |     0 | 
```

# java - Double 类的 parseDouble 添加额外的零

> ID：14661059
> 
> 赞同：1
> 
> 时间：2013-02-02T10:45:21.667
> 
> 标签：java, rounding

```
public static double centsToDollars(Number cents, int precision) {
    return BigDecimal.valueOf(cents.doubleValue() / 100).setScale(precision, RoundingMode.DOWN).doubleValue();
} 
```

当我想以美元显示美分值时，上面的代码完全可以正常工作。例如，对于 1 美分，它返回 0.01 美元。

```
assertEquals("$0.01", FormatUtils.centsToDollars(1, 3)) 
assertEquals("$0.012", FormatUtils.centsToDollars(1.2345, 3))
assertEquals("$0.327", FormatUtils.centsToDollars(32.7, 3)) 
```

但我想不通，为什么`FormatUtils.centsToDollars(0.65, 3)`返回 0.0060 美元。我希望收到 0.006。最新的零是什么？

**更新**

看起来问题的根本原因是`doubleValue()`调用`BigDecimal`

```
System.out.println(Double.parseDouble("0.006")); 

System.out.println(BigDecimal.valueOf(0.006).doubleValue()); 
```

为我返回 0.0060

任何线索为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:50:28.333

> Double 类的 parseDouble 添加额外的零

Java 1.4 到 6 中有一个[错误 id:4428022](http://bugs.sun.com/view_bug.do?bug_id=4428022)，这意味着它会添加一个您不需要的额外零。这仅适用于 0.001 到 0.009 的值。Java 7 没有这个错误。

```
for (int i = 1; i <= 9; i++)
    System.out.println(i / 1000.0); 
```

在 Java 6 中打印

0.0010 0.0020 0.0030 0.0040 0.0050 0.0060 0.0070 0.0080 0.0090

但在 Java 7 中打印

0.001 0.002 0.003 0.004 0.005 0.006 0.007 0.008 0.009

* * *

我怀疑 0.65 实际上实际上稍微少一些。当你将它除以 100 时，你会得到类似 0.006499999999999 的结果，四舍五入后会下降到 0.006

我怀疑你想要的是

```
public static String centsToDollars(Number cents, int precision) {
    return "$" + BigDecimal.valueOf(cents.doubleValue())
           .divide(BigDecimal.valueOf(100))
           .setScale(precision, RoundingMode.HALF_UP);
} 
```

尝试

```
System.out.println(new BigDecimal(0.65 / 100)); 
```

我就是这样写的

```
public static String centsToDollars(double cents) {
    double rounded = Math.round(cents * 100) / 1e4;
    return "$" + rounded;
} 
```

这假定小数点后两位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:32:27.313

> Double 类的 parseDouble 添加额外的零

不，它没有。您用来*格式化*双精度的方法就是这样做的。双打不包含尾随小数零。它们不包含任何小数。

# c - c - 如何对已经类型定义的标识符进行类型定义？

> ID：14661062
> 
> 赞同：0
> 
> 时间：2013-02-02T10:45:38.307
> 
> 标签：c

有一个头文件`stack.h`：

```
typedef char ElemType;

typedef struct{
    ElemType data[MaxSize];
    int top;
} SqStack;

int Push_Sq(SqStack *s, ElemType e);

int Pop_Sq(SqStack *s, ElemType *e);

int GetTop_Sq(SqStack *s, ElemType *e); 
```

现在我有一些源文件，包括这个头文件，我想用`int`for`ElemType`代替`char`，这可能吗？我该怎么办？（我不想修改原来的头文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:49:42.393

不幸的是，没什么可做的。您可以重构代码以使类型 a `#define`，因此在头文件中是这样的：

```
#ifndef ELEMTYPE
# define ELEMTYPE char
#endif

typedef ELEMTYPE ElemType; 
```

然后在源文件中包含头文件*之前*可以做

```
#define ELEMTYPE int 
```

但是，如果从多个文件中使用并且您在*所有*源文件中都没有相同的文件，这可能会很**危险。**`ELEMTYPE`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T10:48:09.977

好吧，由于您正在编译代码，因此没有什么可以阻止您编辑源文件本身，或使用不同的源文件（您显示的文件的稍微修改的副本）将基础类型更改为`int`. 换句话说，将第一行更改为：

```
typedef int ElemType; 
```

您需要小心，因为这可能会破坏其他地方的假设，但这将是我尝试的第一件事。

如果，如编辑中所述，您不想修改原始头文件，则可以将其包含在内：

```
#define char int
#include "stack.h"
#undef char 
```

这可能`char`只在该头文件`typedef`本身中使用，因此效果是本地化的。

请记住，当前构建中的所有翻译单元都应该使用该技巧，否则您最终可能会遇到一些非常不寻常的错误。

* * *

在我看来，最好分叉整个堆栈实现以尝试保持干净，或者使堆栈能够处理任何数据类型（稍微复杂一点，但可行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T10:55:49.993

**你不能。**

在 C++ 中，另一种方法是在不同的*命名空间*中声明这些标识符。

在 C 语言中，您可以#define 它们，然后在必要时#undef 它们以创建新的#define。*

# php - 在 CodeIgniter 和 Doctrine 教程中保存错误

> ID：14661064
> 
> 赞同：1
> 
> 时间：2013-02-02T10:45:45.007
> 
> 标签：php, codeigniter, doctrine

我想在 Doctrine 2.3 中保存数据，不幸的是，如果可能我需要很好的教程，我也会出错，因为我认为文档没有用。

**我的最后一个话题：**

[CodeIgniter 和 Doctrine 教程中的控制器错误](https://stackoverflow.com/questions/14656932/controller-error-in-codeigniter-and-doctrine-tutorial)

**厄洛尔：**

致命错误：在第 19 行调用 C:\wamp\www\nauka\application\controllers\hello.php 中未定义的方法 User::save()

**带有选项保存的图片：**

![在此处输入图像描述](../Images/681d3ef3dc2071fc369c0c745ba68718.png)

**模型**

![在此处输入图像描述](../Images/c6f611e2af14217dfc96888982d55cac.png)

**ripa 我做了你想要的，但我得到了错误：**

解析错误：解析错误，在第 8 行的 C:\wamp\www\nauka\application\controllers\hello.php 中期待 `T_FUNCTION'

```
<?php
    // system/application/controllers/hello.php

    $this->load->model("user");

    class Hello extends CI_Controller {

            $this->user->setTableDefinition();

        function world() {
            echo "Hello CodeIgniter!";
        }

        function user_test() {

            $u = new User;
            $u->username = 'johndoe';
            $u->password = 'secret';
            $u->first_name = 'John';
            $u->last_name = 'Doe';
            $u->save();

            $u2 = new User;
            $u2->username = 'phprocks';
            $u2->password = 'mypass';
            $u2->first_name = 'Codeigniter';
            $u2->last_name = 'Doctrine';
            $u2->save();

            echo "added 2 users";
                    }

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:53:55.450

在 codeigniter 中，所有模型都将加载到控制器中。require_once 将不起作用。首先在 costructor 中加载您的模型，例如`$this->load->model("your model name")`. 然后从控制器调用模型的功能，如`$this->model_name->function_name()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:06:10.503

你可以这样保存：

```
$this->load->model('user');

$this->user->save_User('username','password','first_name','last_name'); 
```

模型文件：

```
class user extends CI_Model {

    function __construct()
    {
        // Call the Model constructor
        parent::__construct();
    }

     function save_User($username,$password,$fName,$lName)  {

          //Save to database
     }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T11:14:09.983

```
 <?php

class Hello extends CI_Controller {

        $this->user->setTableDefinition();

    function world() {
        echo "Hello CodeIgniter!";
    }

    function user_test() {

        $this->load->model("user");
        $u["username"] = 'johndoe';
        $u["password"] = 'secret';
        $u["first_name"] = 'John';
        $u["last_name"] = 'Doe';
        $this->user->save($u);

        echo "added 1 users";
                }

    }

?> 
```

可以从[http://ellislab.com/codeigniter/user-guide/general/models.html](http://ellislab.com/codeigniter/user-guide/general/models.html)获得帮助。请参阅此链接的“目录”。您将获得与 codeigniter 相关的所有内容。

# java - 覆盖鼠标的速率设置。创建我自己的鼠标速率算法

> ID：14661069
> 
> 赞同：5
> 
> 时间：2013-02-02T10:46:56.420
> 
> 标签：java, accessibility, processing, mouselistener, awtrobot

我正在与患有脑瘫的残疾儿童一起工作。一个孩子精细动作控制能力有限，所以她目前使用操纵杆来控制鼠标，并且它的遍历速度设置得非常低。这对她来说效果很好，因为她可以点击屏幕上的所有按钮，但我认为我们可以做得更好——当她想要遍历整个屏幕时，这样做需要一段时间（大约 10 秒）。

我的假设是她的大脑很好，只是她的运动控制很差。如果是这样的话，我相信鼠标以低速启动，但经历了恒定的加速，对她来说会更好，因为它会加快速度并在遍历整个屏幕时变得更快。如果这可行，那么我们可以为大量残疾人调整 PID 控制和速度/加速度设置，加快他们的访问速度，从而加快他们的学习和发展。

但我不知道构建它的最佳方式 - 欢迎所有建议、想法、链接和提示。

首先，我尝试使用 Processing 和 Java，并使用 mouseListener 和 Robot 来控制光标。我不相信这是最好的方法，因为我正在读取光标位置然后写入它，所以我的最佳尝试仍然使光标四处跳动，并且没有平滑的移动。它可以在Java中实现吗？我是否需要使用某种驱动程序从 USB 读取鼠标输入，然后用我自己的替换光标在屏幕上的绘图？

我制作了几个视频来说明我想要实现的效果。

现状（我的插图将光标从箭头键上移开） [http://www.youtube.com/watch?v=3ZhQCg5DJt8](http://www.youtube.com/watch?v=3ZhQCg5DJt8)

我想要的新行为（鼠标加速） [http://www.youtube.com/watch?v=JcBK_ZCFGPs](http://www.youtube.com/watch?v=JcBK_ZCFGPs)

如果有任何用处，我用来制作这些演示的处理代码将复制到下面：

现状演示：

```
import java.awt.AWTException;
import jav
a.awt.Robot;

Robot robot;
int i = 0;
int j = 0;

void setup() {
  setupDotgame();
  try { 
    robot = new Robot();
  } 
  catch (AWTException e) {
    e.printStackTrace();
  }
  robot.mouseMove(screenWidth/2, screenHeight/2);
}

void draw() {
  //println(frameCount);
  robot.mouseMove(screenWidth/2+8*i, screenHeight/2+8*j);
  drawDotgame();
}

void keyPressed() {
  if (keyCode == UP) {
    j--;
  } 
  else if (keyCode == DOWN) {
    j++;
  }
  else if (keyCode == RIGHT) {
    i++;
  }
  else if (keyCode == LEFT) {
    i--;
  }
} 
```

期望的行为：

```
import java.awt.AWTException;
import java.awt.Robot;

Robot robot;
int i = 0;
int j = 0;
int delta = 8;
int time = 0;

void setup() {
  setupDotgame();
  try { 
    robot = new Robot();
  } 
  catch (AWTException e) {
    e.printStackTrace();
  }
  robot.mouseMove(screenWidth/2, screenHeight/2);
}

void draw() {

  //println(frameCount);
  robot.mouseMove(screenWidth/2+i, screenHeight/2+j);
  drawDotgame();

}

void keyPressed() {
  if (millis() - time < 90) {
    delta += 8;
  }
  else { delta = 8; }
  time = millis();

  if (keyCode == UP) {
    j-=delta;
  } 
  else if (keyCode == DOWN) {
    j+=delta;
  }
  else if (keyCode == RIGHT) {
    i+=delta;
  }
  else if (keyCode == LEFT) {
    i-=delta;
  }
} 
```

以及他们都引用的 DotGame 代码：

```
void setupDotgame() {
  size(1000, 600);
  background(255);
  fill(255, 0, 0);
  noStroke();
  smooth();
  drawCircle();
}

void drawDotgame() {
  if (get(mouseX, mouseY) != color(255)) {
    background(255);
    drawCircle();
  }
}

void drawCircle() {
  int x = round(random(50, width-50));
  int y = round(random(50, height-50));
  int rad = round(random(20, 80));
  ellipse(x, y, rad, rad);
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T17:45:42.160

正如卡尔建议的那样，我相信最好的答案是让鼠标实际上具有这种行为，这是某种跳跃行为，它会使鼠标相当接近你需要去的地方，然后从那里使用操纵杆。

我碰巧知道一个叫做 AutoItv3 的程序可以做这种事情。您可以将其设置为识别特殊热键，然后让该热键将鼠标移动到您想要的任何区域。

对此有用的命令是 HotKeySet、MouseMove 和 Func/EndFunc。

# emacs - emacs ipython shell 中的制表符缩进

> ID：14661070
> 
> 赞同：0
> 
> 时间：2013-02-02T10:47:00.317
> 
> 标签：emacs, ipython

环境是 Ubuntu 上的 Emacs 24.1.1。使用 Ipython 进行 python 编程。直接在 shell 上运行 ipython 命令时，自动缩进效果很好，但是当我使用 emacs 运行 ipython 时，不再有自动缩进。更糟糕的是，当我输入 TAB 时，它会提示*完成*缓冲区。我也多次搜索过这个问题，但仍然没有找到实用的方法。结果我必须手动输入空间。

任何人都可以帮助解决这个问题？1\. emacs ipython shell 上的自动缩进 2\. 分别禁用 emacs ipython shell 上的完成。当我不在 ipython 交互式 shell 中时，保持 Tab 完成工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:25:29.120

在 emacs 中，您可以使用`python-mode`，然后从那里将代码发送到`*REPL*`缓冲区`C-c` `C-c`。

当您第一次发送缓冲区时，它会询问您用于 python 的可执行文件，因此您可以使用 ipython 或其他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:16:04.887

任何对 ipython-shell 的调用都应该进行正确的设置。请提交错误报告。

如果运行 python-mode.el -- modeline 显示 "Py" --

请先检查当前主干

当集市可用时

bzr 分支 lp:python 模式

# r - R中的cor和cor.test有什么区别

> ID：14661072
> 
> 赞同：5
> 
> 时间：2013-02-02T10:47:11.020
> 
> 标签：r, correlation

我有一个数据框，它的列是实验的不同样本。我想找到这些样本之间的相关性。所以样本 v2 和 v3 之间，样本 v2 和 v4 之间的相关性，......这是数据框：

```
> head(t1)
      V2          V3          V4         V5         V6
1 0.12725011 0.051021886 0.106049328 0.09378767 0.17799444
2 0.86096784 1.263327211 3.073650624 0.75607466 0.92244361
3 0.45791031 0.520207274 1.526476608 0.67499102 0.49817761
4 0.00000000 0.001139721 0.003158557 0.00000000 0.00000000
5 0.13383965 0.098943019 0.099922146 0.13871867 0.09750611
6 0.01016334 0.010187671 0.025410170 0.00000000 0.02369374
> nrow(t1)
[1] 23367 
```

如果我为此数据帧运行 cor 函数以获取样本（列）之间的相关性，我会得到所有样本的 NA：

```
> cor(t1, method= "spearman")
V2 V3 V4 V5 V6
V2  1 NA NA NA NA
V3 NA  1 NA NA NA
V4 NA NA  1 NA NA
V5 NA NA NA  1 NA
V6 NA NA NA NA  1 
```

但如果我运行这个：

```
> cor.test(t1[,1],t1[,2], method="spearman")$estimate
rho 
0.92394 
```

那不一样。为什么会这样？获得这些样本之间相关性的正确方法是什么？先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T10:56:50.537

您的数据包含`NA`值。

来自`?cor`：

> 如果使用是“一切”，则 NA 将在概念上传播，即，只要其贡献的观察值之一是 NA，结果值将是 NA。

从`?cor.test`

> na.action 一个函数，它指示当数据包含 NA 时应该发生什么。默认为 getOption("na.action")。

在我的系统上：

```
getOption("na.action")
[1] "na.omit" 
```

用于`which(!is.finite(t1))`搜索有问题的值和`which(is.na(t1))`搜索`NA`值。如果您的数据中有值，则`cor`返回。`NaN``Inf`

# haskell - Haskell/GHC UndecidableInstances - 非终止类型检查的示例？

> ID：14661073
> 
> 赞同：26
> 
> 时间：2013-02-02T10:47:13.437
> 
> 标签：haskell, ghc, typechecking, decidable

我写了一些需要 -XUndecidableInstances 来编译的 Haskell 代码。我确实理解为什么会发生这种情况，因为违反了某个条件，因此 GHC 大喊大叫。

但是，我从未遇到过类型检查器实际上会挂起或陷入无限循环的情况。

**非终止实例定义是什么样的 - 你能举个例子吗？**

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-02T13:00:27.927

[HQ](http://research.microsoft.com/en-us/um/people/simonpj/papers/fd-chr/)的这篇论文中有一个经典的、有点令人震惊的例子（涉及与函数依赖的交互）：

```
class Mul a b c | a b -> c where
  mul :: a -> b -> c
instance Mul a b c => Mul a [b] [c] where
  mul a = map (mul a)

f b x y = if b then mul x [y] else y 
```

我们需要`mul x [y]`与 有相同的类型`y`，因此，取`x :: x`和`y :: y`，我们需要

```
instance Mul x [y] y 
```

根据给定的例子，我们可以拥有。当然，我们必须采取`y ~ [z]`一些`z`这样的

```
instance Mul x y z 
```

IE

```
instance Mul x [z] z 
```

我们处于一个循环中。

这令人不安，因为该`Mul`实例看起来它的递归在结构上是*减少*的，这与 Petr 的答案中明显病态的实例不同。然而，它使 GHC 循环（使用无聊阈值来避免挂起）。

麻烦，正如我确定我在某处提到过的那样，是`y ~ [z]`尽管在`z`功能上依赖于`y`. 如果我们对函数依赖使用函数表示法，我们可能会看到约束表示`y ~ Mul x [y]`并拒绝替换，因为它违反了发生检查。

很感兴趣，我想我会试一试，

```
class Mul' a b where
  type MulT a b
  mul' :: a -> b -> MulT a b

instance Mul' a b => Mul' a [b] where
  type MulT a [b] = [MulT a b]
  mul' a = map (mul' a)

g b x y = if b then mul' x [y] else y 
```

启用后，`UndecidableInstances`循环超时需要相当长的时间。禁用后，`UndecidableInstances`实例仍然被接受并且类型检查器仍然循环，但是截止发生得更快。

所以...有趣的旧世界。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-02T11:12:18.653

例如：

```
{-# LANGUAGE UndecidableInstances #-}

class C a where
    f :: a -> a

instance C [[a]] => C [a] where
    f = id

g x = x + f [x] 
```

发生了什么：键入`f [x]`时编译器需要确保`x :: C [a]`对于某些`a`. 实例声明说只有当它也是`x`type时才可以是 type 。所以编译器需要确保，等等，并陷入无限循环。`C [a]``C [[a]]``x :: C [[a]]`

另请参阅[是否可以在本地使用 UndecidableInstances pragma 对编译终止产生全局影响？](https://stackoverflow.com/q/14476230/1333025)

# c++ - 省略数据成员对象的初始化列表条目

> ID：14661076
> 
> 赞同：4
> 
> 时间：2013-02-02T10:47:25.970
> 
> 标签：c++

我读过强烈建议在创建类时初始化所有数据成员，无论类型如何，并且构造函数的初始化列表是执行此操作的最佳位置。

作为对象的数据成员呢？假设该对象有一个足够的默认初始化程序，那么从初始化程序中省略它们是否被认为是一种好习惯？

如：

```
class A{
private:
  AnotherClass B;
  int x;
public:
  A():x(5){} //B is never explicitly initialized
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:48:59.740

如果您不使用成员初始化器列表来初始化用户定义类型的成员，则将调用该特定类型的默认构造函数来初始化成员对象。

因此，只要您的成员有可用的默认构造函数并且这是您的意图，那就完全没问题了。

> **从初始化程序中省略它们是否被认为是一种好习惯？**

这是一个选择和偏好的问题。对我来说，成员初始化列表更直观，所以我更喜欢它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T10:49:54.640

是的，完全没问题。

假设您有一个非常复杂的类，其中包含许多成员，其中大多数是对象，它们确实具有默认构造函数。由于将调用它们的默认构造函数，因此您无需担心 - 它们仍将被初始化。

建议从标准类型（如`int`,`bool`等）初始化所有成员，因为它们没有默认值。

在您的情况下 - 如果`B`没有默认构造函数，您将遇到编译错误，然后您必须`B`在`A::A`.

# python - 我是否在两个线程中锁定代码？

> ID：14661079
> 
> 赞同：0
> 
> 时间：2013-02-02T10:47:59.800
> 
> 标签：python, multithreading, python-3.x, locking

线程编程和使用锁的新手所以我有 2 个线程 - 一个从 COM 端口读取 vlaues - 另一个控制步进电机

在一个线程中

> ```
>  if stepperb_value != 0: #if stepperb non-zero
>             if stepperb_value > 0: # if positive value
>                 self.step_fine(10,11,12,13,step_delay) #step forward
>             else:
>                 self.step_fine(13,12,11,10,step_delay) #step backwards
>             if abs(stepperb_value) != 100:
>                 time.sleep(10*step_delay*((100/abs(stepperb_value))-1)) 
> ```

（我需要防止对 stepperb 的更改导致最后一行被零除错误）

在另一个从 COM 端口读取值的线程中

> ```
>  if 'stepperb' in dataraw:
>                 outputall_pos = dataraw.find('stepperb')
>                 sensor_value = dataraw[(1+outputall_pos+len('stepperb')):].split()
>                 print "stepperb" , sensor_value[0]
>                 if isNumeric(sensor_value[0]):
>                     stepperb_value =  int(max(-100,min(100,int(sensor_value[0])))) 
> ```

我需要在哪里（以及什么样的锁） - 第一个线程是时间敏感的，因此需要优先级

问候

西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:51:20.110

您将不得不锁定预期`stepperb_value`不会在该系列中更改的任何系列访问。在您的情况下，这将是您发布的整个电机控制块。同样，您应该锁定 COM 端口线程中的整个分配`stepperb_value`，以确保写入是原子的，并且不会在第一个线程持有锁时发生（并期望值不会改变）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:01:36.337

好吧，您的关键变量是`stepperb_value`应该“保护”的：

我建议您使用 Queue 来处理所有同步问题（消费者/生产者模式）。事件和条件也可以是合适的解决方案：

[http://www.laurentluce.com/posts/python-threads-synchronization-locks-rlocks-semaphores-conditions-events-and-queues/](http://www.laurentluce.com/posts/python-threads-synchronization-locks-rlocks-semaphores-conditions-events-and-queues/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T11:14:13.473

如果您只使用 CPython，那么您还有另一种可能性（目前）。

由于 CPython 具有[Global Interpreter Lock](http://docs.python.org/glossary.html#term-global-interpreter-lock)，因此分配是原子的。因此，您可以在使用之前在电机控制线程中拉`stepperb_value`入一个局部变量，并使用局部变量而不是全局变量。

请注意，您将在此处使用实现细节。您的代码可能无法在其他 python 实现（例如 Jython 或 IronPython）上安全运行。即使在 CPython 上，这种行为将来也可能会发生变化，但我认为 GIL 在 Python 5 或其他版本之前不会消失。

# antlr - 代表我的领域特定语言

> ID：14661087
> 
> 赞同：1
> 
> 时间：2013-02-02T10:49:04.097
> 
> 标签：antlr, grammar, dsl, dsl-tools

我设计了一种非常简单的领域特定语言 (DSL) 来指定和执行设备上的全屏交互行为。它是基于事件的动作语言，以 XML 作为载体语法。它的例子在这里：

```
<state no="15000" >
    <timeout>30</timeout>
    <backgroundactions>
      <as3function name="hideImages">
      </as3function>
    </backgroundactions>
    <screen>
      <components>
        <textfield x="50" y="120" width="924" textsize="50" background="1" border="1">
          <text say="1">
            <part type="text">Who would you like to call?</part>
          </text>          
        </textfield>
        <button label="MENU" width="80" height="30" x="920" y="10" textsize="14" icon="none" adjtext="-5">
          <event name="clicked">
            <action preconditions="no" name="transition">
              <parameter>
                <type>state</type>
                <name>n</name>
                <value>800</value>
              </parameter>
            </action>
          </event>
        </button>
        <button label="My contacts" width="250" height="200" x="212" y="500" textsize="40" icon="iconRight2.png" iconx="65" icony="20" adjtext="35">
          <event name="clicked">
            <action preconditions="no" name="transition">
              <parameter>
                <type>state</type>
                <name>n</name>
                <value>15007</value>
              </parameter>
            </action>
          </event>
        </button>
        <button label="Other" width="250" height="200" x="562" y="500" textsize="40" icon="iconWrong2.png" iconx="65" icony="20" adjtext="35">
          <event name="clicked">
            <action preconditions="no" name="transition">
              <parameter>
                <type>state</type>
                <name>n</name>
                <value>15100</value>
              </parameter>
            </action>
          </event>
        </button>
      </components>
    </screen>
  </state> 
```

它在语义上意味着以下内容： ![DSL的语义解释](../Images/a778c7e768759218d4da5c2999b44db8.png)

它是一种状态转换语言，程序员在其中以声明方式描述 UI 布局和程序应响应的事件以及流向事件的操作。DSL 是为可读性而设计的。以下是节点的简短描述：

*   timeout：执行每个状态时状态计时器的持续时间
*   背景动作：这些代表进入状态时执行的动作
*   状态屏幕：屏幕组件和与之关联的事件
*   expectedevents：当前状态预期的事件。这些是异步事件

有没有办法以更正式的描述将这种特定语言表示为语法或元模型（我不熟悉语言建模技术）。我的想法是为此 DSL 编写语言规范，以便我团队中的其他程序员可以根据该规范生成他们选择的其他语言的脚本，例如 python 或 lua。甚至可能代码生成这个 XML？代表这一点的最佳方式是什么？我一直在使用许多语言工具和 dsl 工具，但我不知道什么对这种语言最有效？有专业知识的人可以帮助我朝着正确的方向前进，并在需要完成的步骤上抢先一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:54:46.953

XML 可以用于实验，但它的冗长使得 DSL 变得很糟糕（并且与 DSL 的目的相反，我会说）。

发明一种最简单、最易读的语言来描述你想要什么，然后使用像 ANTLR、PEGjs、PyParsing、PyPEG 或 Grako 这样的工具来编写语法并为其生成解析器。

其他语言的程序将能够通过使用 DSL 编写的程序传递一个字符串来调用您的运行时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T21:18:12.563

使用 DSL 来接近实际的问题域（UI 和相关事件）非常有意义。我知道为某个 UI 指定了几个元模型，例如：手机、运动电脑、汽车信息娱乐系统、各种触摸屏设备和网络应用程序（请参阅[http://www.metacase.com/cases/上的一些公共语言dsm_examples-ui.html](http://www.metacase.com/cases/dsm_examples-ui.html)）。然后可以使用生成器生成实际代码、原型或测试脚本。

要定义这些特定领域的建模语言，您首先要指定元模型，包括概念（例如按钮、转换、状态）和相关规则（例如按下按钮触发转换），然后是一些符号。然后，您可以测试语言以定义示例模型，就像使用 XML 一样，最后准备好一些模型，您可以定义生成预期结果的生成器。通过这种方法，松下、Polar 和 EADS 等公司报告了更好的质量和更快的速度。我亲自参与了几个提供帮助的此类案例，并在[http://www.devx.com/enterprise/Article/30550](http://www.devx.com/enterprise/Article/30550)上写了一篇关于语言定义的文章。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:39:07.350

顺便说一句：已经有一个基于 pyPEG 并输出 XML 的 DSL 工具链——它是 YML，[http ://fdik.org/yml](http://fdik.org/yml)

也许这符合您的需求。使用 yml2proc -Y 自动转换它是：

```
state no="15000" {
    timeout > 30
    backgroundactions
        as3function name="hideImages";
    screen {
        components {
            textfield x="50", y="120", width="924", textsize="50", background="1", border="1" {
                text say="1" {
                    part type="text" > Who would you like to call?
                }
            }
            button label="MENU", width="80", height="30", x="920", y="10", textsize="14", icon="none", adjtext="-5" {
                event name="clicked" {
                    action preconditions="no", name="transition" {
                        parameter {
                            type > state
                            name > n
                            value > 800
                        }
                    }
                }
            }
            button label="My contacts", width="250", height="200", x="212", y="500", textsize="40", icon="iconRight2.png", iconx="65", icony="20", adjtext="35" {
                event name="clicked" {
                    action preconditions="no", name="transition" {
                        parameter {
                            type > state
                            name > n
                            value > 15007
                        }
                    }
                }
            }
            button label="Other", width="250", height="200", x="562", y="500", textsize="40", icon="iconWrong2.png", iconx="65", icony="20", adjtext="35" {
                event name="clicked" {
                    action preconditions="no", name="transition" {
                        parameter {
                            type > state
                            name > n
                            value > 15100
                        }
                    }
                }
            }
        }
    }
} 
```

但我会这样写（这也是正确的 YML）：

```
// this grammar could be in a header file named guidsl.yml2

decl state(no);
decl as3function @name;
decl button(icon="none"); // default value
decl event @name;
// for the click event (which is frequent) we define a shortcut
decl clicked (*to, name="clicked") alias event {
    action transition {
        parameter n {
            type state;
            value *to;
        }
    }
};
decl action @name (preconditions="no");
decl parameter *name { name *name; content; };
decl type @name;
decl part(type="text", say=1);

// here comes the model
// include guidsl.yml2

// sensible defaults for this single case

decl button is button (
    width=250,
    height=200,
    textsize=40,
    iconx=65,
    icony=20,
    adjtext=35
);

state 15000 {
    timeout 30;
    backgroundactions
        as3function hideImages;
    screen {
        components {
            textfield x=50 y=120 width=924 textsize=50 background=1 border=1 {
                part > Who would you like to call?
            }
            button label="MENU" width=80 height=30 x=920 y=10 textsize=14 adjtext=-5 {
                clicked 800;
            }
            button label="My contacts" x=212 y=500 icon="iconRight2.png" {
                clicked 15007;
            }
            button label="Other" x=562 y=500 icon="iconWrong2.png" {
                clicked 15100;
            }
        }
    }
} 
```

YSLT（YML 的一部分）现在为您提供了一种语言来生成代码。

根据您的问题，有 XML Schema 语言来描述和检查，请参阅[http://www.w3.org/XML/Schema](http://www.w3.org/XML/Schema) – 当然，还有 YSchema ;-)

VB，pyPEG 和 YML 的作者

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T14:47:19.160

关于“语义如何工作”的问题：您可能正在寻找建模理论。它是分析哲学的一部分。

因为我也错过了这一点，所以我正在研究如何将理论哲学的知识通过信息学转移到计算机科学中。不过，还有很多工作要做。很抱歉，我还没有发表我所拥有的东西——我不是在大学工作，而是自己筹钱。所以我没有以正确的方式写出已经可用的东西：-/因此，这只能是你前进方向的提示。我从 Gottlob Frege 开始，但离开了他的想法，几年后更多地与 Saul Kripke 的观点合作。言语行为理论也令人大开眼界。

为什么不是那些简单的语义工具之一？因为除了简单的情况外，我没有找到一种在实践中有效的方法。不可能有一个元模型和一个模型，仅此而已。这只是一个开端。还有更多需要。

我现在正在使用这种范例开发一种编程语言。但是现在展示还为时过早，再次抱歉。

只需在实践中尝试一种常见的语义工具，您就会发现自己缺少什么。

VB。

# ruby-on-rails-3.2 - ActionController::RoutingError 没有路由匹配 [GET]

> ID：14661088
> 
> 赞同：0
> 
> 时间：2013-02-02T10:49:10.867
> 
> 标签：ruby-on-rails-3.2, imagemagick, spree

在一个新的 Rails 项目中，我安装了带有 Ruby 1.9.3-p-194 的 Rails 3.2.11，我还安装了 spree 版本 1.3.1。

我在安装时采取的步骤：

```
 rails new mystore
    cd mystore
    spree install -A
    rails s 
```

安装时一切正常，但是当我在`http://localhost:3000/`未加载产品图像中打开它时，但加载了 spree 徽标。

这是最后一张图片，但我对所有产品图片都一样：

```
Started GET "/spree/products/6/small/ror_jr_spaghetti.jpeg" for 127.0.0.1 at 2013-02-02 11:33:54 +0100

ActionController::RoutingError (No route matches [GET] "/spree/products/6/small/ror_jr_spaghetti.jpeg"):
  actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.11) lib/rails/engine.rb:479:in `call'
  railties (3.2.11) lib/rails/application.rb:223:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /home/vane/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/vane/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/vane/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /home/vane/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.2ms)

Started GET "/assets/favicon.ico" for 127.0.0.1 at 2013-02-02 11:33:54 +0100
Served asset /favicon.ico - 304 Not Modified (28ms)
[2013-02-02 11:33:54] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

我检查了我的 ImageMagic 版本，`identify -version`我得到了：

```
Version: ImageMagick 6.8.2-2 2013-02-01 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2013 ImageMagick Studio LLC
Features: DPC OpenMP
Delegates: fontconfig freetype pango png ps x xml zlib 
```

我还验证了 ImageMagick 安装是否可以正常工作：

`/usr/local/bin/convert logo: logo.gif`

有人可以告诉我我做错了什么还是另一个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:36:41.090

更好地使用本指南，实际上： http: [//guides.spreecommerce.com/getting_started.html](http://guides.spreecommerce.com/getting_started.html)

你应该使用捆绑器。我没有看到任何关于 spree install -a 的信息。我认为你应该做一个 bundle exec rails g spree:install，但我可能错了。

*编辑*一切正常并向您提交了拉取请求。我不确定到底是什么问题，但我所做的只是再次运行 spree 安装，让它覆盖之前写的任何内容，看起来你缺少更多依赖项，另外我将您的大礼包更新到 1.3.2 导致 1.3.1 出现错误。我希望这能让你有所收获。

# java - 可分离的图像加密和数据隐藏

> ID：14661090
> 
> 赞同：2
> 
> 时间：2013-02-02T10:49:18.807
> 
> 标签：java, image-processing, netbeans, encryption, data-hiding

我正在开发一个基于 java 中的 ieee 论文的项目“隐藏在加密图像中的可分离可逆数据”。我了解如何加密图像，但无法真正了解如何通过修改 LSB 将数据嵌入图像中。有人可以向我解释它是如何完成的，或者只是指出我正确的方向。

我正在考虑使用 RC4 来加密图像。

原纸可在[http://www.sundaychennai.com/IEEE%202012%20Dotnet%20Basepaper/Separable%20Reversible%20Data%20Hiding%20in%20Encrypted%20Image_moorthy.pdf找到](http://www.sundaychennai.com/IEEE%202012%20Dotnet%20Basepaper/Separable%20Reversible%20Data%20Hiding%20in%20Encrypted%20Image_moorthy.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:17:33.833

在不阅读论文的情况下，我对它如何工作的理解是：

我们可以在图片中存储信息，通过让 R、G 和 B 分量的 LSB 成为我们想要“隐藏”的信息的载体。

未经训练的眼睛很难看到这些位的“波动”，尤其是在显示风景或类似事物的图像中。

尺寸为 1024x768 像素的图像将能够存储 2359296 位或 294912 字节。

当然，不能使用像 JPEG 这样的有损压缩算法，而不会破坏信息。

# facebook - “热门帖子”取决于 Facebook 喜欢

> ID：14661091
> 
> 赞同：2
> 
> 时间：2013-02-02T10:49:23.993
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

我有一个想法，为我的网站创建一个“热门帖子”功能，该功能根据帖子在 Facebook 上的点赞数和分享数创建“热门”列表。

用户可能会看到到目前为止已收到多少赞，因为他们只需要请求一个已定义的 url。但是，网站本身必须能够查询与其自身相关的所有链接（具有预定义的 url 模板，如 website.com/[post-id]）以创建“顶部”列表。是否可以做类似的事情（或以不同的方式获得相同的结果）？

任何有关此类事情的真实工作流程的想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:09:13.020

这似乎是一个小而有趣的项目。我不知道是否有一个功能可以直接以您想要的方式获得，但我做了类似的事情。

首先，您有 Graph API，您可以使用 Graph API 获取用户的帖子`feed`，每个帖子都会告诉您它有多少喜欢，您可以使用`POST_ID/likes`.

然后你必须定期检查帖子中的变化，比较它`created_time`和`updated_time`.

这看起来很难，因为你有很多帖子，你必须检查它们是否有更新，但你可以使用`batch_requests`这样你就可以一次检查它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T15:46:51.693

我制作了一个书签，它显示 Facebook 新闻提要以及 Google+、Twitter 和 Instagram 个人资料中的热门帖子。

只需在书签栏中添加一个新书签并将其 URL 替换为以下代码并保存，然后转到社交网络网站并运行它：

```
javascript:(function(){var s=document.createElement('script');s.src='https://niutech.github.io/topnewsfeed/topnewsfeed.min.js';document.body.appendChild(s);})() 
```

源代码可在[GitHub 上](https://github.com/niutech/topnewsfeed)获得。

# python - 在 Django 的用户模型中添加父用户

> ID：14661094
> 
> 赞同：0
> 
> 时间：2013-02-02T10:49:41.643
> 
> 标签：python, django, authentication

我已经阅读了一些关于 Django 中*其他模型*的 User 模型继承的文章，但我希望用户拥有一个特定的父用户，即 User 模型继承自身。

我不确定如何执行此操作，因为我肯定必须为 User 编辑 django.auth.contrib 模型，不是吗？

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:11:03.313

首先，不要在 Django 中编辑源代码。这是一个很大的错误，它会让你的代码难以维护——无论你想做什么，你真的不想改变 Django 源代码。

我不完全清楚您在问什么，但听起来您可能需要创建一个新模型，该模型继承自模型上的 self`User`并添加一个`ManyToMany`字段。

```
from django.contrib.auth.models import User

class ExtendedUser(User):
    parent = models.ManyToManyField("self", symmetrical=False) 
```

您的新模型现在将包含 Django`User`类的所有字段和方法以及您的额外`parent`字段。任何特定`ExtendedUser`对象的父字段都将引用另一个`ExtendedUser`对象。

正如我所说，我正在猜测您正在尝试做什么（如果我做对了，那么您可能会发现对[模型继承](https://docs.djangoproject.com/en/1.4/topics/db/models/#model-inheritance)和[类继承](http://docs.python.org/2/tutorial/classes.html#inheritance)进行一些阅读会有所帮助-也许寻找一些关于这个主题的教程）

# ios - 如何确定 EKCalendar 是 Facebook 日历？

> ID：14661103
> 
> 赞同：3
> 
> 时间：2013-02-02T10:50:08.193
> 
> 标签：ios, eventkit

鉴于 any `EKCalendar`，我如何检查此日历是否为 Facebook 日历？Facebook 日历可以是 Facebook 活动日历或 Facebook 生日日历。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T11:19:45.530

不幸的是，如果不使用私有 API，就无法判断特定日历是否为 facebook 日历。
我在 iOS 6 测试版期间提交了一份错误报告，一位 Apple 工程师告诉我他们会在最终版本中修复它，但事实证明他们没有……

但是，您可以测试特定事件是否是 facebook 事件：

```
BOOL isFacebookEvent = [[event.URL host] hasSuffix:@"facebook.com"]; 
```

不过，这不适*用于*Facebook 生日活动！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-07T10:01:47.990

EventKit 中仍然没有用于此的公共 API，但有一个仅使用公共方法的解决方法。

每个日历都有一个颜色属性：ekCalendar.CGColor

Facebook 活动日历的颜色是 Facebook Blue，因此通过比较日历颜色的 rbg 组件，可以确定日历*最有可能*来自 Facebook。

我写了一个 UIColor 的快速扩展来检查给定的颜色是否是 Facebook 蓝色（完成了帮助函数，使 UIColor rgb 函数更迅速）

```
extension UIColor {

    struct rgbComponents {
        var red : CGFloat
        var green : CGFloat
        var blue : CGFloat
        var alpha : CGFloat
    }

    func toComponents()->rgbComponents {
        var r:CGFloat = 0
        var g:CGFloat = 0
        var b:CGFloat = 0
        var a:CGFloat = 0

        var components : rgbComponents

        if self.getRed(&r, green: &g, blue: &b, alpha: &a) {
            components = rgbComponents(red: r, green: g, blue: b,  alpha: a)
        } else {
            components = rgbComponents(red: 0, green: 0, blue: 0, alpha: 0)
        }

        return components
    }

    func isFBBlue()->Bool {
        let c = self.toComponents()
        let result = c.red == 0.18823529779911041
                        &&  c.green == 0.39215686917304993
                        &&  c.blue == 0.7137255072593689
                        &&  c.alpha == 1.0
        return result
    } 
```

# c# - 在本地 IIS 网络服务器上运行 MVC4 Web 应用程序

> ID：14661107
> 
> 赞同：1
> 
> 时间：2013-02-02T10:50:28.220
> 
> 标签：c#, visual-studio-2010, iis, asp.net-mvc-4, multi-tenant

**更新**- 一开始指向错误的目录。感谢**Wiktor**的提示。仍然无法通过以下方式成功运行 MVC4 应用程序

我正在尝试（现在有一段时间.. :)）在我的开发 PC 上设置一个模拟的多租户 webapp。我了解到这对于 Visual Studio 的内部网络服务器是不可能的，所以我正在尝试设置 IIS。

`fake`我在我的主机中添加了租户。

```
127.0.0.1 localhost
127.0.0.1 tenant1.mydomain.com
127.0.0.1 tenant2.mydomain.com 
```

在 IIS 中，我创建了一个新网站`test`（端口 8081），并将其指向`C:\Azure\Websites\`. 在该目录中，我添加了一个`Hello World`html 文件以查看该位是否有效。

*   我导航到 localhost:8081 => Hello world
*   我导航到tenant1.mydomain.com:8081 => Hello world。

酷，生命的第一个证明。

* * *

下一步：使用在 VS2012 中创建的 MVC4 webapp 使其工作。

我启动了一个新的 MVC4 webapp 并将其存储在： `C:\Azure\Websites\MvcApplication1`

我只是使用默认生成的网站进行测试，所以我按下`F5`并验证了该网站是在Firefox中打开的。所以目标是让这个从 IIS 工作。

*   创建了一个新网站`test2`（端口 8082）
*   将 test2 应用程序池设置为 .net4.0
*   将物理目录指向`C:\Azure\Websites\MvcApplication1\MvcApplication1\`
*   导航到本地主机：8082

**HTTP 错误 500.21 - 内部服务器错误处理程序“ExtensionlessUrlHandler-Integrated-4.0”的模块列表中有一个错误模块“ManagedPipelineHandler”**

卸载 ASP.NET 并重新安装。结果相同。

当我改变 web.config 从

```
preCondition="classicMode,runtimeVersionv4.0,bitness32" 
```

至

```
preCondition="integratedMode,runtimeVersionv4.0,bitness32" 
```

然后我得到这个错误：

**HTTP 错误 404.2 - 未找到 由于 Web 服务器上的 ISAPI 和 CGI​​ 限制列表设置，无法提供您请求的页面。**

我能否强调一下我在 IIS 配置方面是一个 n00b 的事实...... :)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:42:56.583

ISAPI and CGI Restictions in IIS:

*   Add isapi dll for .net 4 32bit
*   Add isapi dll for .net 4 64bit

C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll

C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll

And it works. Finally!

Thanks Wiktor

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-07T18:07:31.843

首先将 IIS 配置为手动配置 打开控制面板并单击程序和功能 » 打开或关闭 Windows 功能。打开 Internet 信息服务。

在 Internet 信息服务下，打开以下功能：Web 管理工具 » IIS 6 管理兼容性 » IIS 元数据库和 IIS 6 配置兼容性。

Web 管理工具 » IIS 管理控制台、IIS 管理脚本和工具以及管理服务。

在万维网服务下，打开以下各项： 应用程序开发功能下的所有功能，服务器端包含除外。常见 HTTP 功能 » 默认文档、目录浏览、HTTP 错误、Http 重定向、静态内容。安全 » 基本身份验证、请求过滤、Windows 身份验证。

在 Microsoft .NET Framework 3.5.1 » Windows Communication Foundation HTTP 激活下。

创建网站后，打开 Internet 信息服务 (IIS) 管理器。展开您的服务器节点。展开站点节点并单击您的网站。

在右侧的 IIS 部分中，双击 Authentication。执行以下操作之一：

如果您使用表单身份验证，请确保启用匿名身份验证和表单身份验证，并禁用所有其他身份验证。

如果您使用基于声明的身份验证，请确保仅启用匿名身份验证并禁用所有其他身份验证。

再次单击您的网站，然后在 IIS 部分中，双击 Handler Mappings。确保您已启用 *.svc 和 *.xamlx 的处理程序映射，并将可执行路径设置为以下之一：

对于 64 位操作系统：%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll 对于 32 位操作系统：%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll 关闭 Internet 信息服务 (IIS) 管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T17:30:05.250

First configure IIS according [this site](http://www.sitefinity.com/documentation/documentationarticles/installation-and-administration-guide/install-sitefinity/configuring-the-iis-to-host-sitefinity-projects):

IIS 7.5 handler "`extensionlessurlhandler-integrated-4.0`" has a bad module "`managedpipelinehandler`" in its module list

For the above issue, you must go to Control Panel >> Installed Programs and Features >> Repair your .NET Framework by double clicking on it.

# javascript - JavaScript 方法调用

> ID：14661108
> 
> 赞同：0
> 
> 时间：2013-02-02T10:50:38.227
> 
> 标签：javascript

在“JavaScript：权威指南，第 6 版”一书中，第 61 页，第 4.5 节调用表达式，它说 -

> 在方法调用中，作为属性访问对象的对象或数组在函数执行时成为参数的**值**`this`。

有人可以用简单的英语解释该语句的含义，并举个例子吗？我特别不知道“属性访问的**主题”是什么意思。**

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:52:30.307

在 JavaScript 中（目前），`this`取决于函数的调用方式，而不是函数的定义方式*。*鉴于此，弗拉纳根所说的是：

```
foo.bar(); 
```

...在调用`bar`,`this`将引用 . 引用的对象`foo`。

如果您来自其他一些语言，例如 Java 或 C#，您可能会想，“但肯定`this`总是指`foo`内部`bar`”，但在 JavaScript 中并非如此。例子：

```
var f = foo.bar; // Get a reference to the function, but not calling it
f();             // Now we call it 
```

在上面，`this`在`bar`is **not** `foo`的调用中，它是全局对象（如果你不是在严格模式下）或`undefined`（如果你是）。

更多（在我的博客上）：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:02:08.993

为了补充 TJ 的答案，这里有[一个例子](http://jsfiddle.net/Adf4k/)：

```
var o = {}; // define an object
o.name = 'foo'; // add an attribute to the object
var f = function() { // define a function
    return this.name; // the function uses this internally
}
o.someFunction = f; // add the function to the object
var result = o.someFunction(); 
```

现在的值`result`是`'foo'`因为该函数已在对象 o 上调用，并且在函数内部，`this`指的是已调用该函数的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:19:59.757

我对“this”的理解是“this”是函数执行期间的上下文。
除非您明确更改“this”，否则默认行为是函数执行期间的上下文是函数调用的上下文。

第一种情况（最简单）：

```
var writeHelloFromThis = function() {
       console.log('hello from ' + this);
 };

writeHelloFromThis(); 
```

--> 输出是“hello from [object Window]”，因为调用的上下文是全局对象，即 Window。

第二种情况：现在我们定义一个对象，并将 writeHelloFromThis 添加到它：

```
var anObject={};

anObject.writeHelloFromThis = writeHelloFromThis; 
```

现在我们用 anObject 作为 context 调用 writeHelloFromThis ：

```
anObject.writeHelloFromThis(); 
```

--> 输出是“hello from [object Object]”：这是函数调用的上下文：在这种情况下是 anObject。

第三种情况，有点棘手：现在我们将 'anObject' 的 writeHelloFromThis 存储到另一个 var 中：

```
var anObjectsWriteHelloFromThis = anObject.writeHelloFromThis; 
```

anObjectsWriteHelloFromThis 只存储一个函数（=一个引用），而不知道任何关于“anObject”的信息。所以如果我们打电话：

```
 anObjectsWriteHelloFromThis(); 
```

输出将是“来自 [object Window] 的 hello”，因为调用的上下文是全局对象，即 Window。

最后一句话：如果这种处理方式对您来说似乎是有限的，那么您是对的：这就是为什么某些 Function 方法：bind、call、apply 允许您更改函数的上下文。

最后一个例子：

```
 writeHelloFromThis.call(anObject); 
```

将输出“来自 [object Object] 的 hello”，而不是 windows，因为这里我们强制 'this' 为 anObject。

# xml - 在 VBA 中解析 XML 显示数据

> ID：14661114
> 
> 赞同：0
> 
> 时间：2013-02-02T10:51:48.543
> 
> 标签：xml, vba, xml-parsing

根据我的研究，我已经能够在 VBA 中构建一个函数来解析 XML 并根据需要公开值。但是，有一个价值让我无法理解。

```
<osgb:topographicMember>
     <osgb:TopographicArea fid='osgb1000000347753568'>
     <osgb:featureCode>10053</osgb:featureCode>
     <osgb:version>4</osgb:version>
     <osgb:versionDate>2006-03-15</osgb:versionDate>
     <osgb:theme>Land</osgb:theme>
     <osgb:calculatedAreaValue>46.099150</osgb:calculatedAreaValue>
     <osgb:changeHistory>
         <osgb:changeDate>2001-03-09</osgb:changeDate>
         <osgb:reasonForChange>New</osgb:reasonForChange>
     </osgb:changeHistory>
     <osgb:descriptiveGroup>General Surface</osgb:descriptiveGroup>
     <osgb:descriptiveTerm>Multi Surface</osgb:descriptiveTerm>
     <osgb:make>Multiple</osgb:make>
     <osgb:physicalLevel>50</osgb:physicalLevel>
     <osgb:polygon><gml:Polygon srsName='osgb:BNG'>
     <gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>290996.130,92420.290   290998.010,92415.010 291000.000,92415.720 291005.770,92417.770 291003.890,92423.040 291000.000,92421.660 290996.130,92420.290 </gml:coordinates>
     </gml:LinearRing>
     </gml:outerBoundaryIs>
     </gml:Polygon>
     </osgb:polygon></osgb:TopographicArea>
     </osgb:topographicMember> 
```

我试图获得的值是 fid = 'osgb10000000347753568'

我可以获取并返回 TopographicArea (using xChild.baseName) ，但不是 fid。

欢迎任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:04:01.957

如果我正确理解输入，您需要打开`TopographicArea`node 并获取其`Fid`属性`.text`或`.NodeValue`属性（取决于节点数据类型，以最适合的为准）而不是 node `.baseName`，即您应该使用以下内容：

```
Set XMLDOC = CreateObject("MSXML2.DOMDocument")
.....
Set SubNode = XMLDOC.SelectNodes("//[list of parent nodes]/topographicMember/TopographicArea/")
fid = SubNode.Attributes.Item(0).NodeValue 
```

也许我的表示法有误，但这里你应该使用的关键点`.text`还是`.NodeValue`属性。添加的 XMLDOC 的 VBA 监视窗口将非常有帮助。祝你好运！

# java - java中的单例类错误

> ID：14661118
> 
> 赞同：-3
> 
> 时间：2013-02-02T10:52:08.430
> 
> 标签：java, singleton

```
public class SingletonDemo {
    public static void main(String[] args) throws Exception {

        Singleton service = Singleton.getInstance();
        service.doSomething();
    }
} 
```

当我创建单例对象时，获得错误 **单例无法解析为类型**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:04:27.120

你可以这样写

```
public class SingletonDemo {
    public static void main(String... ignored) {

        Singleton service = Singleton.getInstance();
        service.doSomething();
    }
}

public enum Singleton {
    INSTANCE;

    public static Singleton getInstance() { return INSTANCE; }

    public void doSomething() {
        System.out.println("Singleton.doSomething() called");
    }
} 
```

# java - 无法运行 JDI 跟踪示例：错误：无法找到或加载主类

> ID：14661122
> 
> 赞同：4
> 
> 时间：2013-02-02T10:52:46.390
> 
> 标签：java, jdi

我在命令行中运行以下程序作为示例应用程序：

> java -cp "D:\projects\PDFJavaFX\lib\PDFRenderer-0.9.1.jar" com/sun/pdfview/PDFViewer

然后我在命令行中运行[JDI](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/index.html) [跟踪](http://docs.oracle.com/javase/7/docs/technotes/guides/jpda/trace.html)示例：

> java -cp "C:\Program Files\Java\jdk1.7.0_13\lib\tools.jar;D:\projects\JDI_Trace\jar\trace.jar; **D:\projects\PDFJavaFX\lib\PDFRenderer-0.9.1 .jar** " com/sun/tools/example/trace/Trace com/sun/pdfview/PDFViewer

我收到此错误：

```
Error: Could not find or load main class com.sun.pdfview.PDFViewer
 -- VM Started --
 -- The application exited -- 
```

示例应用程序运行正常，并且包含在类路径中。这是什么原因？我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T23:36:47.433

编辑：看起来它与类路径相关。

我确实让它工作了（好吧，它弹出了 GUI，但很快就崩溃了）。我使用了类路径环境变量而不是`-cp`：

```
C:\cos126\dev\debug>set CLASSPATH=%CLASSPATH%;c:\tmp\PDFRenderer-0.9.1.jar;c:\tmp\debug 
```

所以，不漂亮，但它确实奏效了。所以看起来新创建的 VM 不会自动继承`-cp`. 我很乐观，但不确定，在启动新 VM 时，您可能可以更改一个选项来为您执行此操作。要查看 VM 启动选项的“文档”，您可以添加一些代码，例如

```
for (Map.Entry<String, Connector.Argument> arg : arguments.entrySet()) {
   System.out.println(arg.getValue().name()+" "+arg.getValue().description());
} 
```

到 Trace.java。当我这样做时，它会打印出来

```
home Home directory of the SDK or runtime environment used to launch the application
options Launched VM options
main Main class and arguments, or if -jar is an option, the main jar file and arguments
suspend All threads will be suspended before execution of main
quote Character used to combine space-delimited text into a single command line argument
vmexec Name of the Java VM launcher 
```

所以也许其中一个有用？祝你好运！

顺便说一句，这就是我使用 JDI 的目的：

[http://cscircles.cemc.uwaterloo.ca/java-visualize/](http://cscircles.cemc.uwaterloo.ca/java-visualize/)

如果您想查看它，我正在使源可共享（尽管我不能 100% 确定它是否有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T16:07:55.413

# ruby-on-rails-3 - 如何使 jquery-datatables-rails 内联可编辑？

> ID：14661126
> 
> 赞同：5
> 
> 时间：2013-02-02T10:53:22.857
> 
> 标签：ruby-on-rails-3, jquery-ui, datatables

我在我的一个应用程序中使用 jquery-datatables-rails 并显示一个网格。

为了使其可编辑，我在我的 gemfile 中添加了 jquery-datatables-editable-rails。

但是，我找不到使行可编辑的方法。

任何帮助将不胜感激。

这是我用于启用数据表的咖啡脚本文件的样子

```
jQuery ->
 $('#products').dataTable
   sPaginationType: "full_numbers"
   bJQueryUI: true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T01:39:04.007

这可能有用：

[http://www.datatables.net/forums/discussion/17213/table-editing-with-best-in-place-in-ruby-on-rails](http://www.datatables.net/forums/discussion/17213/table-editing-with-best-in-place-in-ruby-on-rails)

它描述了如何使用 best_in_place gem 使您的数据表可编辑。

# javascript - 制作一个矩形，知道边的两条垂直线（路径元素）的位置

> ID：14661128
> 
> 赞同：0
> 
> 时间：2013-02-02T10:54:05.817
> 
> 标签：javascript, html, svg

我想制作一个矩形，知道两边的两条垂直线的位置。这些行的实现如下：

```
<path fill="#000000" id="Measure1" d="M159.688,119.75L159.688,88.75L160.28799999999998,88.75L160.28799999999998,119.75ZM162.688,119.75L162.688,88.75L163.28799999999998,88.75L163.28799999999998,119.75Z"/>

<path fill="#000000" id="Measure2" d="M260.168,119.75L260.168,88.75L260.76800000000003,88.75L260.76800000000003,119.75Z"/> 
```

使用此代码，我有一个矩形：

```
<path d="M10 80 H 110 V 130 H   10 V  80 Z" fill="red" /> 
```

但是我可以使用两条线的坐标来为我的矩形提供位置吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:42:52.623

你可以用 SVG 的 native 得到线条的边界框`getBBox()`，然后计算位置，这是一个基本的例子：

```
var path1 = document.getElementById("Measure1");
var path2 = document.getElementById("Measure2");
var xmlns = "http://www.w3.org/2000/svg";
var svg = document.querySelector("svg");

var bbox1 = path1.getBBox();
var bbox2 = path2.getBBox();

var x = bbox1.x + bbox1.width;
var y =  bbox1.y;
var width = bbox2.x - x;
var height =  bbox1.height;

var rect = document.createElementNS(xmlns, "rect");
rect.setAttribute("x", x);
rect.setAttribute("y", y);
rect.setAttribute("width", width);
rect.setAttribute("height", height);
rect.setAttribute("fill", "red");
svg.appendChild(rect); 
```

你可以在这里看到结果：

[http://jsfiddle.net/3rSYV/](http://jsfiddle.net/3rSYV/)

# php - 如何为表名绑定值？

> ID：14661136
> 
> 赞同：1
> 
> 时间：2013-02-02T10:55:54.690
> 
> 标签：php, mysql, pdo, bindvalue

是否可以为表名做一个绑定值？如果我删除 :table 并添加表名，我的似乎基本上没有捡起它，第二个 2 绑定工作正常，但我想将它用于同一表单中的多个表。

表单上的表字段是根据上一个查询的结果定义的，因此表名称以 $table 的值出现在表单上，​​该值正确显示，因此这应该将 $table 的值发布到表绑定？？？

```
try {
    $sql = 'UPDATE :table SET
                archive = :archive
                WHERE id = :id';
    $s = $pdo->prepare($sql);
    $s->bindvalue('table', $_POST['table']);
    $s->bindvalue('archive', $_POST['archive']);
    $s->bindvalue('id', $_POST['id']);
    $s->execute();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T06:54:09.930

Since prepared statements are a "bit" more than `sprintf`, it doesn't make sense to set the table by variable.

A prepared statement is passed to the DB before the actual values are set. So the DB may look for a way how to answer the query. After this preparation the actual values searched for are set. The query is answered, when `execute()` is called.

So, to prepare "a way how to answer the query" (as I called it), the table name is a significant information. That is why it does not make sense to pass it as a variable. That is also why it doesn't work.

So, you have to string concatenate the table name:

```
$sql = 'UPDATE '. $table .' SET
            archive = :archive
            WHERE id = :id'; 
```

As @zerkms suggest, you should whitelist the possible table names.

# java - 没有 Spring 的 Camel 和 Google App Engine？

> ID：14661137
> 
> 赞同：1
> 
> 时间：2013-02-02T10:56:22.387
> 
> 标签：java, spring, google-app-engine, servlets, apache-camel

所以我正在复习该`Camel-GAE`组件，我发现的所有教程/代码示例似乎都表明您**必须**使用 Spring DSL (XML) 才能让 Camel 在 GAE 上运行。

这是因为`Camel-GAE`取决于`Camel-Servlet`，而我发现的用于配置`CamelServlet`in的唯一代码示例`web.xml`涉及：

```
<web-app>
    <servlet>
        <servlet-name>CamelServlet</servlet-name>
        <display-name>Camel Http Transport Servlet</display-name>
        <servlet-class>org.apache.camel.component.servlet.CamelHttpTransportServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>appctx.xml</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>CamelServlet</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

我真的不是 Spring 的忠实粉丝，我更愿意用 GIN 或 Guice 之类的东西来做我所有的 DI。**有没有办法在`CamelContext`不使用 Spring 的情况下创建 Camel Servlet 并定义它？**提前致谢。

**更新**- 在 GAE 上使用 JNDI 注册表时出现的错误：

```
java.lang.NoClassDefFoundError: javax.naming.InitialContext is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.apache.camel.impl.JndiRegistry.createContext(JndiRegistry.java:103)
    at org.apache.camel.impl.JndiRegistry.getContext(JndiRegistry.java:92)
    at org.apache.camel.impl.JndiRegistry.lookup(JndiRegistry.java:65)
    at org.apache.camel.impl.JndiRegistry.lookup(JndiRegistry.java:47)
    at org.apache.camel.impl.PropertyPlaceholderDelegateRegistry.lookup(PropertyPlaceholderDelegateRegistry.java:62)
    at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:1557)
    at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:1444)
    at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
    at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:1412)
    at com.ourapp.server.servlets.CamelServlet.doGet(Unknown Source)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:59:26.373

web.xml 文件不需要使用 Spring。所以从那里没有依赖要求。我只是认为在创建 camel-gae 时，示例和教程是 Web 应用程序，因此使用 spring 上下文侦听器引导 Camel 更容易。这不再需要：[http ://camel.apache.org/servlet-tomcat-no-spring-example.html](http://camel.apache.org/servlet-tomcat-no-spring-example.html)

我认为我们应该调查一下，我记录了一张票：[https ://issues.apache.org/jira/browse/CAMEL-6030](https://issues.apache.org/jira/browse/CAMEL-6030)

我在升级 camel-gae 以使用更新的 GAE 版本时注意到它的 spring 依赖性。

# php - Yii：如何从表中获取 id 数组

> ID：14661142
> 
> 赞同：0
> 
> 时间：2013-02-02T10:57:44.123
> 
> 标签：php, validation, activerecord, yii

假设我有一个带有 2 个表的模型：所有者（int：id）和 Car（int：id，int：owner_id）。

我正在尝试在 Car 上构建验证规则，以避免将不存在的 owner_ids 绑定到 Car.owner_id 字段。我希望在代码中使用此验证规则，而不是仅使用 DB 外键检查，因为它允许我轻松地在表单上显示错误消息，而不必稍后处理 DB 异常。

因此，在我的模型中，我想要类似的东西：

```
public function rules() {
    return array(
        array('owner_id', 'in', 'range' => array(11, 12, 13)),
    );
} 
```

其中 11、12、13 是现有的所有者 ID。

我可以通过以下代码找到这些 ID：

```
$ars = Yii::app()->db->createCommand("SELECT id FROM owner")->queryAll(); 
$ids = array(); 
foreach($ars as $ar) {    
    $ids[] = $ar['id'];
} 
```

但是，我想知道 Yii 中是否有任何内置方法允许以更懒惰的方式获取这个数组，例如“$ids = Owner::model()->findIdsAsArray()”或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:11:18.050

您不想验证范围。Yii为外键检查提供[`CExistValidator`](http://www.yiiframework.com/doc/api/1.1/CExistValidator)了别名。如果所有者 ID 不连续，即如果我们删除中间用户，验证器可能会失败`exist`。`range`所以您可以使用如下验证规则

```
array('owner_id', 'exist', 'attributeName'=>'id', 'className'=>'Owner'), 
```

上面的代码验证`owner_id`模型中是否存在一个，`Owner`如果数据库中不存在则引发错误。

# c# - CancellationTokenSource.Cancel 引发 ObjectDisposedException

> ID：14661147
> 
> 赞同：4
> 
> 时间：2013-02-02T10:58:17.640
> 
> 标签：c#, xamarin.ios, dispose, race-condition, cancellationtokensource

我有一个拥有`CancellationTokenSource`.

```
public class GrabboxCell : UICollectionViewCell
{
    CancellationTokenSource _tokenSource = new CancellationTokenSource ();

    // ...
} 
```

我正在使用当前令牌开始一些长时间运行的操作。

我的对象还需要支持“回收”。想想轮回。必须取消在前一个生命周期中开始的所有长时间运行的操作。

在这种情况下，我调用`Cancel`和`Dispose`源，并发出一个新的令牌源：

```
void CancelToken (bool createNew)
{
    _tokenSource.Cancel ();
    _tokenSource.Dispose ();
    _tokenSource = null;

    if (createNew) {
        _tokenSource = new CancellationTokenSource ();
    }
} 
```

我在两个地方调用这个方法：当我希望令牌过期时和当这个类被释放时。

```
public override void PrepareForReuse ()
{
    CancelToken (true);
    base.PrepareForReuse ();
}

protected override void Dispose (bool disposing)
{
    CancelToken (false);
    base.Dispose (disposing);
} 
```

有时我会从我的方法中`ObjectDisposedException`调用 when 。文档说：`_tokenSource.Cancel ()``Dispose`

> 的所有公共和受保护成员`CancellationTokenRegistration`都是线程安全的，并且可以从多个线程同时使用，除了`Dispose`，它只能在所有其他操作`CancellationTokenRegistration`都完成时使用。

我现在不知道该怎么办。包裹`CancelToken`在一个`lock`？
竞争条件到底发生在哪里以及如何减轻它？

我确定它`PrepareForReuse`总是*在*同一个线程上`Dispose`调用，但可能会在不同的线程上调用。

如果这有任何用处，我正在运行 Mono 而不是 .NET Framework，但我很确定它们在取消令牌方面应该具有相同的语义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T19:55:52.173

这不是很有趣，但我包裹`Cancel`并进入了一个可以吞下并且从那以后没有问题`Dispose`的尝试捕获。`ObjectDisposedException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-08T07:53:31.063

线程安全（单独）的操作并不意味着您的操作序列会立即执行。更具体地说，由于`PrepareForReuse`可以在不同的线程中运行`Dispose`，那么可能发生的情况是：

```
_tokenSource.Cancel ();
_tokenSource.Dispose (); 
```

在一个线程中执行，然后在执行之前在线程之间进行上下文切换`_tokenSource = null;`，然后另一个线程尝试再次运行`_tokenSource.Cancel ()`. 但是 tokenSource 已经被处理掉并且没有重新生成，因为第一个线程没有到达取消的最后一个代码块：

```
_tokenSource = new CancellationTokenSource (); 
```

如果你不时得到 a ，我也不会感到惊讶`NullPointerException`，如果上下文切换发生在`_tokenSource = null;`我解释的之后而不是之前（这也是可能的）。

为了解决这个问题，我将锁定您的`Cancel`方法，以便线程在另一个完成之前无法运行该方法的任何部分。

此外，为了保护 ，`NullPointerException`只有在您的方法`Dispose`之前调用时才会发生这种情况`PrepareForReuse`，您可以使用[*Null-Conditional Operator*](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/member-access-operators#null-conditional-operators--and-)。

# api - 什么是推特指数？

> ID：14661151
> 
> 赞同：1
> 
> 时间：2013-02-02T10:58:47.650
> 
> 标签：api, twitter

在[https://dev.twitter.com/docs/tweet-entities](https://dev.twitter.com/docs/tweet-entities)

我找到**了索引 = 从中提取媒体的字符位置**

但是我就是不明白这是什么意思...

感谢您的回答

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:16:13.863

据我了解，一个实体就像一条推文中提到的其他用户，所以当你得到这个实体时，这`indice`就是告诉你它在`tweet (string)`哪里的位置`entity (mention)`。

# ios - Objective C：定义像 MyStruct theArray[18][18] 这样的 C 数组的好方法？

> ID：14661154
> 
> 赞同：2
> 
> 时间：2013-02-02T10:59:09.843
> 
> 标签：ios, objective-c

我需要使用类似 C 数组的东西：

```
MyStruct theArray[18][18]; 
```

但我不能将其定义为属性：

```
@property (nonatomic) MyStruct theArray[18][18]; 
```

那么我必须：

```
@implementation MyClass
{
    MyStruct theArray[18][18];
} 
```

但是，就现代 Objective C 指南而言，这很好吗？

谢谢

更新：

我知道我可以将结构定义为类并使用 NSMutableArray 来处理它，但在我的情况下使用 C 数组更方便，主要关注的是编码指南和内存问题，因为我不分配或释放 theArray[ 18][18]，不确定它的生命周期是什么，我正在使用 ARC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:16:38.577

属性不能是数组类型，而公共实例变量没有提供足够的封装。一种更类似于 Objective C 的方法是定义一个私有 2D 数组，以及一对方法或一个返回访问它的指针的方法 - 大致如下：

```
// For small structs you can use a pair of methods:
-(MyStruct)getElementAtIndexes:(NSUInteger)i and:(NSUInteger)j;
-(void)setElementAtIndexes:(NSUInteger)i and:(NSUInteger)j to:(MyStruct)val;

// For larger structs you should use a single method that returns a pointer
// to avoid copying too much data:
-(MyStruct*)elementAtIndexes:(NSUInteger)i and:(NSUInteger)j; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:02:40.243

改用指针怎么样？

```
@property (nonatomic) MyStruct **theArray; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T12:01:48.503

到目前为止的答案都很棒。. . 这里还有两个选择：

**1.有点hacky**

（我不确定这是否需要Objective-C++）

您可以将数组创建为公共属性，如下所示：

```
@interface MyClass
{
    @public:
    MyStruct theArray[18][18];
}
@end 
```

然后按如下方式访问它：

```
myClass->theArray 
```

***2\. 返回一个结构***

虽然不能返回 C 样式的数组，但可以返回结构：

```
typedef struct
{
     CGPoint textureCoordinates[kMaxHillVertices];
     CGPoint borderVertices[kMaxBorderVertices];
} HillsDrawData;

@interface Hills : NSObject
{
    HillsDrawData _drawData;
}

- (HillsDrawData)drawData; //This will get cleaned up when the class that owns it does.

@end 
```

# php - 添加虚拟字段后的问题查看列表 - cakePHP

> ID：14661155
> 
> 赞同：0
> 
> 时间：2013-02-02T10:59:10.897
> 
> 标签：php, mysql, cakephp-2.2

我有一个页面列出了在公司工作的所有员工。[在我将虚拟字段](https://stackoverflow.com/questions/14630819/using-virtual-fields-in-cakephp-2-x/14630942)添加到用户模型之前，它一直运行良好。

现在它给了我以下错误：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'HrEmployee.name'
in 'field list'

SQL Query: SELECT `User`.`id`, `User`.`username`, `User`.`password`,
`User`.`hr_employee_id`, `User`.`group_id`, `User`.`created`, `User`.`modified`,
(CONCAT(`HrEmployee`.`name`, " ", `HrEmployee`.`surname`, " (",
`HrEmployee`.`jobTitle`, ")")) AS `User__fullname` FROM `intraweb_db`.`users`
AS `User` WHERE `User`.`hr_employee_id` = (182) 
```

我是 cakePHP 的新手，因此一直在尝试解决这个问题。然而，我正在挣扎。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:17:09.247

假设`HrEmployee`这里是另一个表；

```
SELECT 
    u.id, u.username, u.password,
    u.hr_employee_id, u.group_id, u.created, u.modified,
    (
        CONCAT(HrEmployee.name, " ", HrEmployee.surname, " (", HrEmployee.jobTitle, ")")
    ) AS u__fullname 
FROM intraweb_db.users AS u 
# need to join HrEmployee via related field with users
JOIN HrEmployee ON (HrEmployee.RELATED_FIELD = u.RELATED_FIELD)
WHERE u.hr_employee_id = (182) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:23:28.183

好的，所以我通过删除 $hasmany 下的用户引用来修复它。我们不需要它来调用那个页面，所以一切都很好。

现在可以了。

# ember.js - 我应该在 ember.js 中使用 ember 数据吗？

> ID：14661156
> 
> 赞同：11
> 
> 时间：2013-02-02T10:59:14.647
> 
> 标签：ember.js

在我正在进行的项目中，我们使用的是没有 ember-data 的 ember.js (1.0rc1)，到目前为止效果很好。我们决定不使用 ember-data 的原因是我们已经有了一些实用方法来处理与 REST 接口的集成，总而言之，因为 ember-data 不是 ember.js 的一部分。

来自 emberjs.com：

> 目前，Ember Data 作为独立于 Ember.js 的库提供，同时我们扩展了适配器 API 以支持更多功能。但是，本节中描述的 API 往往是稳定的。在将 Ember Data 作为标准分发的一部分包含之前，您可以从 GitHub 页面获取您的副本。

因此，对于我的问题和我正在寻找的输入：

*   使用这种方法我们会损失/获得多少？（除了 REST 集成）
*   某人的经历实际上可能在没有 ember-data 的情况下开始，现在迁移到 ember-data
*   ember-data 的成熟度及其与 ember.js 的集成

还有另一个问题，可能更适合 ember.js/ember-data 开发人员：

*   将 ember-data 集成到 ember.js 的路线图是什么？对 API 的影响会有多强？

感谢您分享您的经验并提供一些提示和建议。// ph

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T19:15:54.693

我在我的项目中使用了 ember-data，我对此非常满意。我为你节省了大量时间来开发你自己的东西来与服务器通信。

目前 ember-data 尚未正式投入生产，但我已经在使用它。

在 emberjs 网站上阅读[有关ember-data 的内容。](http://emberjs.com/guides/models/)它说：

> 无需任何配置，Ember Data 就可以加载和保存通过 RESTful JSON API 提供的记录和关系，前提是它遵循某些约定。
> 
> 我们还了解到，世界上存在许多 Web 服务 API，其中许多是疯狂的、不一致的和您无法控制的。Ember Data 旨在可配置为与您想要的任何持久层一起工作，从普通到异国情调。

[github页面](https://github.com/emberjs/data)上有更多信息。里面甚至还有一个路线图……

另一个优点是您可以定义模型及其关系。如果服务器出现问题，也可以使用使您能够回滚更改的事务。

我真的很喜欢 ember-data 背后的愿景，即它不依赖于您使用的后端类型。或者你在哪里定义你的关系。如果您使用 Mongo-db 在其中定义父对象上的关系，则其他人在其中执行子对象。

# networking - HZ和bps有什么关系？

> ID：14661157
> 
> 赞同：-2
> 
> 时间：2013-02-02T10:59:19.700
> 
> 标签：networking, bandwidth, frequency

EE中的带宽=频带宽度，单位为Hz，CS中=信息承载能力，单位为bit/sec，那么hz和bps之间是什么关系，如何相互转换呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:27:45.013

1.  这是一个软件而不是硬件的地方
2.  您没有提供足够的信息或背景信息，也没有表现出任何解决方案的努力
3.  这种关系取决于调制方案，称为调制效率。像 20（比特每秒）/（hz）这样的数字是合理的。所以，如果我说你的调制解调器有 3khz 的带宽，你应该期望每秒 3000*20 位，或 60K

# file - 在 gnuplot 中读取外部数据文件

> ID：14661163
> 
> 赞同：3
> 
> 时间：2013-02-02T11:00:07.320
> 
> 标签：file, plot, fortran, gnuplot

好吧，这是我上一个问题的延续。正如我所提到的，数据文件是由 Fortran 代码生成的。所有数据文件都包含两列数据。在 Fortran 代码中，我使用`FORMAT`(2(1X,D22.16))。所以，输出文件看起来像

```
-.4515533388641104D-01 -.6842652196656712D+01
-.1381692033642749D+00 0.6762844180244199D+01
-.5741668880663318D-01 -.7891086299010933D+01
-.1051164522902431D+00 0.7758389636011907D+01
-.7574000988697732D-01 -.8180315630079706D+01
-.7939204753736680D-01 0.8167097825331970D+01
-.1003250672387262D+00 -.7865995561517515D+01
-.6006135667296913D-01 0.7987393828927278D+01
 ..................... ...................... 
```

这只是一个数据文件的一小部分样本。为了绘制这个数据文件，我使用

```
plot "data001.out" u 1:2 w d lc rgb 'black' 
```

但是，`gnuplot`无法正确读取数据并生成此图

![在此处输入图像描述](../Images/388bb377e610a66e8e422a54124e153a.png)

使用 Mathematica 程序的正确绘图是这样的

![在此处输入图像描述](../Images/9507f5f3abab0b765fc23ee13f6b8222.png)

我注意到，如果我将其更改`FORMAT`为 (2(1X,F22.16)) （十进制形式），一切正常。为什么`gnuplot`不能读取指数形式的数据？有没有办法告诉程序如何读取这种类型的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T17:16:09.137

从 gnuplot 4.6 手册：

“数据可以以指数格式写入，指数前面带有字母 e 或 E。如果命令`set datafile fortran`有效，也可以使用 fortran 指数说明符 d、D、q 和 Q。”

所以你应该放在`set datafile fortran`前面`plot`。

希望能帮助到你！

# php - 为 Yii active checkBoxList 的特定项目添加 css 类

> ID：14661164
> 
> 赞同：2
> 
> 时间：2013-02-02T11:00:27.237
> 
> 标签：php, yii, checkboxlist

使用 Yii 和活动复选框列表。我知道参数。我需要为项目添加一个标志 css 类。这是我的代码：

```
$form->checkBoxList($model, 'items', $selected, array(
    'class'=>'default_class'
)); 
```

这段代码只是为每个项目添加了一个 default_class。但我需要一个不同的类来处理特定的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T12:53:46.777

在 Yii 论坛上问了同样的问题。有人帮我解决了[这个问题](http://www.yiiframework.com/forum/index.php/topic/40024-adding-a-css-class-to-specific-items-of-yii-active-checkboxlist/page__gopid__191592)

```
foreach ($models as $model) {
  echo '<input type="checkbox" name="' . CHtml::activeName($model, 'attribute') . '[]" value="' . $model->valueField . '" ' . condition ? 'class= "your-class" : '' . '/>';
} 
```

目前这是一个很好的领先优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:12:44.050

@XIII，我已经更新了我的答案

```
$form->checkBoxList($model, 'items', $selected, array(
  'options' => array(
       'value1'=>array('disabled'=>true, 'label'=>'value 1'),
       'value2'=>array('label'=>'value 2', 'class' => 'css-class-defined'),
   ),
)); 
```

请阅读有关您使用的功能的文档，或查看源代码`system.web.helpers.CHtml`行 764

# jquery - 使用jquery获取元素的宽度

> ID：14661165
> 
> 赞同：0
> 
> 时间：2013-02-02T11:00:38.570
> 
> 标签：jquery

您好朋友，我想获得包含在`<li>`以下内容中的图像宽度是我的代码

**脚本**

```
var imageWidth = $('.slider_cont ul li').children('img').width();
console.log(imageWidth); 
```

**HTML**

```
<div class="slider_cont">
        <ul>
            <li><img src="images/1.jpg" alt=" " /></li>
            <li><img src="images/2.jpg" alt=" " /></li>
            <li><img src="images/3.jpg" alt=" " /></li>
            <li><img src="images/4.jpg" alt=" " /></li>
        </ul>
    </div> 
```

当我在 Firefox 中打开它时，我的代码给出了准确的值，但是当我将它检入 chrome 时给出了 0（零）......我不知道为什么......请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:15:33.730

Chrome 渲染图像的方式与 FF 不同。要正确获取图像宽度，您需要等待浏览器完成加载图像标签。一种方法是在图像标签上设置 onload 事件，如下所示：

```
<script>
    function showWidth(){
        var imageWidth = $('.slider_cont ul li').children('img').width();
        console.log(imageWidth);
    }

</script>
<body>
    <div class="slider_cont">
        <ul>
            <li><img src="3Qp6h.png" alt=" " onload="showWidth()"/></li>
        </ul>
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:05:33.360

您的列表中有 4 张图片。您的代码只记录第一个。

这会将图像的宽度保存在数组中。

```
var imageWidth = new Array();
$('.slider_cont ul li').children('img').each(function() {
    imageWidth.push($(this).width());
});
console.log(imageWidth); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:19:05.767

试试这个代码。

```
var image = $('.slider_cont ul li').children('img');
console.log(image.clientWidth); 
```

# c++ - 带有地址提示的新运算符（在另一个对象附近创建一个对象）

> ID：14661167
> 
> 赞同：0
> 
> 时间：2013-02-02T11:00:59.263
> 
> 标签：c++, visual-studio-2010, memory-management, new-operator

我想创建很多相同类型的对象，并且我希望它们在内存中相对接近以避免页面丢失。

有没有办法告诉操作系统（Windows 平台）分配内存尽可能接近给定地址？（地址提示）
某些功能隐藏在 MSDN 深处？

我知道有新的操作员安置，但我试图找出是否有任何其他技巧。
是的，我知道如何使用新位置创建自定义内存管理......

伪代码（如果存在）：

```
Myclass *a = new Myclass();

Myclass *b = AloocateNear(a,sizeof(Myclass)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T11:04:40.670

使用`std::vector`. 索引 X 和 X+1 处的项目*保证*彼此相邻。

* * *

如评论中所述（感谢 sheu），此解决方案使破坏单个对象变得困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:03:17.420

安置新是答案。如果您*真的*关心局部性，那么您显然将不得不使用带有某种内存池的placement new。

# c# - WebService 类无法访问

> ID：14661170
> 
> 赞同：0
> 
> 时间：2013-02-02T11:01:30.010
> 
> 标签：c#, .net, winforms, web-services, visual-studio-2012

我有一个包含 2 个项目的解决方案，ServiceProj 和 UIProj（winforms）。ServiceProj 包含一个 WebService、一堆类和一个`DataSet`. 当我将`WebReference`ServiceProj 添加到 UIProj 时，我可以看到 Web 方法，但看不到 ServiceProj 的类。

我的类都是公共的、非静态的，并且它们位于**ServiceProj.Classes.Entities**命名空间中。我可以在 Web 服务中访问它们，因此在 Web 方法中使用它们，我可以在我的 UIProj 中调用 Web 方法，但我不能直接从 UIProj 访问这些类。

你知道我哪里可能出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:09:07.697

如果您想查看另一个项目中的类，您还必须向该项目添加项目引用（右键单击引用，添加引用）。

通过添加对您正在生成的另一个项目的 Web 引用：

*   包含所有网络方法的代理类
*   所有方法参数的类定义[如果需要]
*   所有方法返回类型的类定义[如果需要]

因此，仅通过您的 Web 引用，您就可以看到所有 Web 方法和由 Web 方法返回或传递给 Web 方法的自定义类型。

[答案基于 VS2010 而不是 VS2012]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:09:14.817

在公开的类上使用[XmlInclude属性](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlincludeattribute.aspx)

* * *

[在 ASP.NET 2.0 Web 服务中公开其他类](https://stackoverflow.com/questions/3300410/expose-additional-classes-in-asp-net-2-0-webservice)

# jquery - jquery：清除克隆元素的输入

> ID：14661183
> 
> 赞同：1
> 
> 时间：2013-02-02T11:02:46.570
> 
> 标签：jquery

我克隆了一个元素，但我不想清除它的所有输入值。如何？

要克隆的元素：

```
<div id = "clone">
       <span >
            <input type = "text" >
            <input type = "text">
     </span> 
</div> 
```

js：

```
new_ele = $('#clone').clone()
new_ele.find().val("")  # not working 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:06:49.503

它应该像

```
var new_ele = $('#clone').clone();
new_ele.find('input').val(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:12:50.183

试试这个：

```
var new_ele = $('#clone').clone();
$('input', new_ele).val(""); 
```

# php - 是否可以检查数学表达式字符串？

> ID：14661185
> 
> 赞同：2
> 
> 时间：2013-02-02T11:02:52.490
> 
> 标签：php, regex

我想检查所有括号是否正确开始和关闭，并检查它是否在给定字符串中是数学表达式。

前任 ：

`$str1 = "(A1+A2*A3)+A5+(B3^B5)*(C1*((A3/C2)+(B2+C1)))"`

`$str2 = "(A1+A2*A3)+A5)*C1+(B3^B5*(C1*((A3/C2)+(B2+C1)))"`

`$str3 = "(A1+A2*A3)+A5++(B2+C1)))"`

`$str4 = "(A1+A2*A3)+A5+(B3^B5)*(C1*(A3/C2)+(B2+C1))"`

在上面的示例中`$str1`，并且`$str4`是有效的字符串....

请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:44:30.707

你需要一种解析器。我认为您无法通过正则表达式来处理此问题，因为您必须检查括号的数量和顺序以及可能的嵌套括号。下面的这个类是我发现[的基于 Python 的数学表达式语法验证器的快速 PHP 端口：](http://snipplr.com/view.php?codeview&id=68048)

```
class MathExpression {

    private static $parentheses_open = array('(', '{', '[');
    private static $parentheses_close = array(')', '}', ']');

    protected static function getParenthesesType( $c ) {
        if(in_array($c,MathExpression::$parentheses_open)) {
            return array_search($c, MathExpression::$parentheses_open);
        } elseif(in_array($c,MathExpression::$parentheses_close)) {
            return array_search($c, MathExpression::$parentheses_close);
        } else {
            return false;
        }
    }

    public static function validate( $expression ) {
        $size = strlen( $expression );
        $tmp = array();
        for ($i=0; $i<$size; $i++) {
            if(in_array($expression[$i],MathExpression::$parentheses_open)) {
                $tmp[] = $expression[$i];
            } elseif(in_array($expression[$i],MathExpression::$parentheses_close)) {
                if (count($tmp) == 0 ) {
                    return false;
                }
                if(MathExpression::getParenthesesType(array_pop($tmp)) 
                    != MathExpression::getParenthesesType($expression[$i])) {
                    return false;
                }
            }
        }
        if (count($tmp) == 0 ) {
            return true;
        } else {
            return false;
        }
    }
}

//Mathematical expressions to validate
$tests = array(
    '(A1+A2*A3)+A5+(B3^B5)*(C1*((A3/C2)+(B2+C1)))',
    '(A1+A2*A3)+A5)*C1+(B3^B5*(C1*((A3/C2)+(B2+C1)))',
    '(A1+A2*A3)+A5++(B2+C1)))',
    '(A1+A2*A3)+A5+(B3^B5)*(C1*(A3/C2)+(B2+C1))'
);

// running the tests...
foreach($tests as $test) {
    $isValid = MathExpression::validate( $test );
    echo 'test of: '. $test .'<br>';
    var_dump($isValid);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:59:36.450

好吧，我想您正在寻找的东西是一些[无上下文语法](http://en.wikipedia.org/wiki/Context-free_grammar) 或[Pushdown automaton](http://en.wikipedia.org/wiki/Pushdown_automaton)。它不能只使用正则表达式来完成。（至少没有简单或好的方法）

那是因为您正在处理嵌套结构。一些实现的想法可以在这里找到[正则表达式来检测分号终止的 C++ for & while 循环](https://stackoverflow.com/questions/524548/regular-expression-to-detect-semi-colon-terminated-c-for-while-loops/524624#524624)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T11:11:07.483

使用正则表达式返回多少个左括号和右括号？

然后检查两个大括号的数量......如果它相等，那么你的表达是对的，否则是错误的......

# java - 为java专家编写面试测试

> ID：14661188
> 
> 赞同：2
> 
> 时间：2013-02-02T11:03:21.410
> 
> 标签：java

我目前正在为*java 专家简介*写一个面试问题。这里是：

* * *

考虑到这段代码：

**清单 1**

```
package com.example;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class Searching {
    public static void main(String[] args) {
        int input = Integer.valueOf(args[0]);
        String[] strings = {"1", "2", "4", "8", "16", "32", "64", "128"};
        List<Integer> integers = new ArrayList<Integer>();
        for (String s : strings) {
            integers.add(Integer.valueOf(s));
        }
        System.out.println("index of "+input+" is:"+Collections.binarySearch(integers, input, cmp));
    }

    static Comparator<Integer> cmp = new Comparator<Integer>() {
        public int compare(Integer i, Integer j) {
            return i < j ? -1 : (i == j ? 0 : 1);
        }
    };
} 
```

然后使用此 cmd 行编译此代码

**清单 2**

```
javac com/example/Searching.java 
```

并使用此命令行运行

**清单 3**

```
java com/example/Searching 128 
```

**问题一：**

执行清单 3 产生：

```
index of 128 is:-8 
```

你能解释一下这个输出吗？

**问题 B：**

考虑到这一点

```
 java com/example/Searching 32 
```

输出是

```
index of 32 is:5 
```

你能解释一下这个输出吗？

**问题 C：**

假设您有一个 JRE 1.6、一个 shell 和一个文本编辑器。您将更改为清单 1 和/或清单 2 和/或清单 3 以产生此输出：

```
index of 128 is:7 
```

*备注：*你改变的越少越好。

* * *

我的问题是：

*   你对这些问题的回答是什么？
*   如何改进它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:42:55.077

对 C 的回答：

```
public class Searching {
    public static void main(String[] args) {
        int input = Integer.parseInt(args[0]);
        int[] values = {1, 2, 4, 8, 16, 32, 64, 128};
        System.out.println("index of " + input + " is:" + Arrays.binarySearch(values, input));
    }
} 
```

因为专家不会让该代码变得如此糟糕。

*如何改进面试问题？*

[不要在面试中做谜题。](https://softwareengineering.stackexchange.com/questions/131232/do-coding-puzzles-make-good-interview-questions)

或者看看[这个页面](http://37signals.com/svn/posts/3071-why-we-dont-hire-programmers-based-on-puzzles-api-quizzes-math-riddles-or-other-parlor-tricks)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T11:11:10.240

作为一个面试问题，我会让问题变得更简单。我发现在面试中，如果没有提示，解决这类问题会困难得多。在几个他们无法回答的问题之后，受访者可以放弃，这并不总是富有成效的。

* * *

> 你能解释一下这个输出吗？

代码中有一个错误，`i == j`对 A 和 B 的影响不同。在一种情况下，排序假定该值小于 128，而在第二种情况下，它匹配 32，因为这是缓存的。

如果您尝试类似 -XX:+AggressiveOpts` 或其他选项来增加整数缓存大小，它将在每种情况下匹配。

> 你会改变清单 1

更改`i == j ? 0 : -1`为`i > j ? -1 : 0`

当然使用 Integer.compare() 会出现一些问题；）

> 如何改进它

根据程序的目的，我会使用

```
int count = 0;
for(int n = Integer.parseInt(args[0]); n != 0; n >>>= 1)
  count++;
System.out.println(count); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:11:43.457

只是为了解释我对这个问题的期望：

**问题一**：

*   `==`演示java语言的基本知识（和之间的区别`equals`）
*   理解别人编写的丑陋（和未注释）代码的能力

**问题 B**：

*   展示有关 JVM 和整数缓存的更多“深入”知识（在我看来，这不是最重要的）
*   表现出自信：即使这种奇怪的行为似乎表明问题 A 的答案不正确。

**问题 C**：

*   展示仔细理解和吸收约束的能力。在这种情况下，没有可用的 JDK，因此修改*列表 1*或*列表 2*不是一个选项。

此外，它为回答问题 B 提供了线索。

（即在命令行中添加一个系统属性是我期望的这个问题的答案：）`java.lang.Integer.IntegerCache.high`。

# gitlab - 仓库默认公开

> ID：14661189
> 
> 赞同：3
> 
> 时间：2013-02-02T11:03:23.393
> 
> 标签：gitlab, gitorious

我安装了 GitLab，似乎所有存储库默认都是私有的（创建者必须将所有开发人员添加到项目中才能共享代码）。我真的希望所有登录用户都显示（和可克隆）所有存储库。gitourious 能做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:15:56.430

为了允许所有用户访问，您可以直接在 repo 中添加规则[`gitolite.conf`](http://sitaramc.github.com/gitolite/admin.html#conf)（`gitolite-admin`由 GitLab 使用）

```
repo repo1
    R = @all
repo repo2
    R = @all
... 
```

`R = @all`将允许所有用户进行读取访问（和克隆）。

* * *

[第 260 期](https://github.com/gitlabhq/gitlabhq/issues/260)提到为 GitLab 实现了公共克隆：那些是[具有只读访问权限的项目](https://gitlab.com/public)。

这似乎是最近才引入的（不到 3 周前）：

```
C:\Users\VonC\prog\git\gitlabhq>git log --all-match --grep=public --grep=clone
commit b6da734824d0c74ef5bb4b784d404144c76d75f4
Merge: eff6d3c 80b8921
Author: Dmitriy Zaporozhets <dmitriy.zaporozhets@gmail.com>
Date:   Mon Jan 14 10:13:02 2013 -0800

    Merge pull request #2584 from jasl8r/public-grack-clone

    Public HTTP clones and remove auth request for public projects

commit 80b8921a9a0adb60c7eb8edeaf195d9dc2530cb9
Author: Jeremy Slater <jeremy.slater@nuance.com>
Date:   Mon Jan 14 09:46:55 2013 -0500

    Public HTTP clones and remove auth request for public projects 
```

[因此，您可以在提交 80b8921](https://github.com/gitlabhq/gitlabhq/commit/80b8921a9a0ad)和[提交 b6da734](https://github.com/gitlabhq/gitlabhq/commit/b6da734824d0c7)处看到新代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T15:45:06.557

您可以创建一个具有“Guest”权限的“Everyone”组，并将每个存储库添加到该组。有点痛苦，特别是如果你有大量的回购，但它有效。

# android - 如何从 android facebook sdk 获取朋友的联系信息？

> ID：14661190
> 
> 赞同：0
> 
> 时间：2013-02-02T11:03:24.207
> 
> 标签：android

我已经在我的手机中集成了 facebook sdk，我可以登录和注销该应用程序。并且还得到了朋友的名字，姓氏，位置等。但是我无法获得朋友的联系信息，例如电子邮件和手机号码，那么我该如何获得这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:38:51.853

在列出任何可能的解决方案/建议之前，我想指出 Facebook SDK/API**不会**将用户的电话号码（无论是移动电话号码还是其他电话号码）暴露给任何 API 调用。在您无法使用任何 API 调用访问**自己的**联系号码的情况下。

FQL 方法：[参考链接 - FQL](https://developers.facebook.com/docs/reference/fql/user)

使用以下查询查询 Facebook API：

```
select email from user where uid = USER_ID_BEING_QUERIED 
```

Graph API 方法：[参考链接 - Graph API](https://developers.facebook.com/docs/reference/api/user/)

```
USER_ID_BEING_QUERIED?fields=email&access_token=YOUR_ACCESS_TOKEN 
```

**注意：**上述任何查询的结果取决于用户与当前登录用户共享他们的电子邮件地址/地址。如果他们不与您共享它，则上述任何查询都不会给您任何结果，并将返回一个空数据集。

# php - PDO 和 PostgreSQL 函数

> ID：14661194
> 
> 赞同：0
> 
> 时间：2013-02-02T11:03:56.730
> 
> 标签：php, postgresql, pdo

我的 PostgreSQL 服务器中有功能

```
CREATE OR REPLACE FUNCTION edit_senti_meta_translation(_senti_id bigint, _meta_id bigint, _lang_code character, _meta_title character varying, _meta_note text)
  RETURNS boolean AS
$BODY$
BEGIN
    PERFORM
        senti.is_draft
    FROM
        senti, senti_meta
    WHERE
        senti.senti_id=_senti_id
    AND senti_meta.senti_id=senti.senti_id
    AND senti_meta.senti_id=_senti_id
    AND senti_meta.meta_id=_meta_id;
    IF FALSE THEN
        RETURN FALSE;
    END IF;
    BEGIN
        UPDATE senti_meta_translation
        SET meta_title=_meta_title, meta_note=_meta_note
        WHERE meta_id=_meta_id AND lang_code=_lang_code;
        IF FOUND THEN
            UPDATE senti_meta SET last_update=now() WHERE senti_id=_senti_id AND meta_id=_meta_id;
            RETURN TRUE;
        ELSE
            RETURN FALSE;
        END IF;
    END;
END;
$BODY$
  LANGUAGE plpgsql VOLATILE; 
```

好吧，如果我在 pgadmin3 中尝试，它就可以工作，如果我调用这个函数，我的记录已更新（按我的预期工作 100%）

```
SELECT edit_senti_meta_translation(1, 41, 'eng', 'a', 'a'); 
```

但是当我尝试使用 PHP（PDO 驱动程序）调用该函数时，它给我的结果是真或假，但是 UPDATE 没有运行，我的记录没有更新。

```
$stmt = Database::getInstance()->prepare('SELECT * FROM edit_senti_meta_translation(:senti_id, :meta_id, :lang_code, :meta_title, :meta_note);');
$stmt->bindParam(':senti_id', $senti_id, PDO::PARAM_INT);
$stmt->bindParam(':meta_id', $meta_id, PDO::PARAM_INT);
$stmt->bindParam(':lang_code', $lang_code, PDO::PARAM_STR);
$stmt->bindParam(':meta_title', $meta_title, PDO::PARAM_STR);
$stmt->bindParam(':meta_note', $meta_note, PDO::PARAM_STR);
$stmt->setFetchMode(PDO::FETCH_ASSOC);
$stmt->execute();
return $stmt->fetchColumn(0); 
```

即使我更改了我的 php 代码中的第一行

```
$stmt = Database::getInstance()->prepare("SELECT edit_senti_meta_translation(1, 41, 'eng', 'a', 'a');"); 
```

它给了我结果（真/假），但记录没有更新。这让我很困惑

有关信息，我正在使用 PostgreSQL 8.4

*让我感到困惑的一件事是，当我直接在 pgadmin3 中调用该函数时，它给了我正确的返回并更新了记录，但是当从 PHP(PDO) 调用它时，它只给我返回，但记录没有更新。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:04:19.113

好吧，在解决了这个问题之后，@dmirkitanov 回答了为什么会发生这种情况。

> 它可能与事务有关，例如，如果此代码在事务中运行，并且之后没有提交

我注意到在 PDO Singleton Class 上，项目中的某个人添加了新行。*见注释的代码行

```
<?php

include('config.database.php');

class Database {

    protected static $instance = null;

    final private function __construct() {}
    final private function __destruct() {
        //self::$instance->commit();
        self::$instance = null;
    }

    final private function __clone() {}

    public static function getInstance() {
        if (self::$instance === null) {
            try {
                self::$instance = new PDO(
                    'pgsql:host='   . DatabaseConfig::HOST . 
                    ';port='        . DatabaseConfig::PORT . 
                    ';dbname='      . DatabaseConfig::DBNAME . 
                    ';user='        . DatabaseConfig::USER . 
                    ';password='    . DatabaseConfig::PASSWORD
                );
                self::$instance->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
                self::$instance->setAttribute(PDO::ATTR_EMULATE_PREPARES, true);
                //self::$instance->beginTransaction();
            } catch (PDOException $e) {
                self::$instance->rollBack();
                die('Database connection could not be established.');
            }
        }

        return self::$instance;
    }
    public static function __callStatic($method, $args) {
        return call_user_func_array(array(self::instance(), $method), $args);
    }
}
?> 
```

如您所见，`beginTransaction()`设置在 中`getInstance()`，但`commit()`设置在`__destruct()`

# c# - System.Web.UI.Page 类中的事件和虚拟方法

> ID：14661204
> 
> 赞同：2
> 
> 时间：2013-02-02T11:05:13.390
> 
> 标签：c#, asp.net

我能够挂钩事件，还允许覆盖我的 aspx 代码隐藏文件中的加载和初始化..事件。我有以下问题。

```
public partial class Default : System.Web.UI.Page
{
    public Default()
    {
        this.Init += Default_Init;
        this.Load+=Default_Load;
    }    
    protected void Default_Load(object sender, EventArgs e)
    {        }    
    protected void Default_Init(object sender, EventArgs e)
    {        }    
    protected override void OnLoad(EventArgs e)
    {        }
    protected override void OnInit(EventArgs e)
    {        }
} 
```

问：

1.  为什么 Page 类中存在这样的选项（虚拟方法和事件处理程序）？
2.  当覆盖方法被执行时，我的事件处理程序（Default_Load 和 Default_Init）没有被执行。背后的原因是什么？
3.  我应该打电话给 base.OnLoad(e); 在重写的 OnLoad 方法中？为什么我应该/不应该？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:18:39.457

1.  默认情况下，`OnInit`并且`OnLoad`不是`Init`和`Load`事件的处理程序。他们习惯于火`Init`和`Load`事件。

2.  当您覆盖时，您会更改这些方法的行为，因此事件不会被方法触发（除非您明确编写`OnInit`等）`OnLoad``base.OnInit`

3.  如果你改变 OnLoad 的行为并且不调用基本方法，那么你可能会破坏 asp.net 应用程序的页面生命周期。例如，`Load`不会调用事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:47:32.200

通常，该方法`OnXxx` *会引发*名为 的事件`Xxx`。这也是一个`System.Web.UI.Control`like中的情况`Page`。

如果你这样做：

```
protected override void OnLoad(EventArgs e)
{
  // nothing here!
} 
```

你改变它的行为`OnLoad`，让它现在什么都不做。因此，很可能没有人会引发（“解雇”）该`Load`事件。所以它的事件处理程序永远不会运行。

相反，如果您这样做：

```
protected override void OnLoad(EventArgs e)
{
  // maybe add some code of your own here ...
  base.OnLoad(e);
  // ... or here
} 
```

然后基本调用将确保该方法仍然引发事件。

如果您在声明事件的类中，则只能显式引发事件，即调用底层委托。所以这对你来说是不可能的。定义的基类`Load`是这样的：

```
// inside same class where 'Load' event is defined:

protected virtual void OnLoad(EventArgs e)
{
  // maybe they put some other code here ...

  var loadDelegate = Load;   // gets the current underlying delegate of the event
  if (loadDelegate != null)
    loadDelegate(this, e);

  // ... or here
} 
```

但在大多数情况下，您根本不应该使用`override`任何方法。只需添加到`Load`当您希望在`Load`事件触发时运行某些代码时。

# android - 如何使用小部件在 android 主屏幕上移动笔记

> ID：14661209
> 
> 赞同：-2
> 
> 时间：2013-02-02T11:05:41.807
> 
> 标签：android

我在便笺应用程序上工作。我如何在 android 主屏幕上显示便笺，以便用户轻松查看。我已经在使用小部件，但我想要的是最终用户可以在主屏幕上移动小部件。是否可以？

谢谢您的帮助。

我知道小部件，但小部件是否支持运行时大小更改？用户可以在运行时最小化小部件的大小，如 Windows 操作系统待办事项列表

我知道小部件，但可以调整屏幕大小，或者我需要使用一些游戏框架，如 coco2d 或 libgdx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:07:30.833

是的，这是可能的。这称为小部件。

所有文档都在这里：http: [//developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)

你有什么具体要问的吗？我不明白你的问题......

# android - NETWORK_ERR：Android 中的 XmlHttpRequest 异常 101

> ID：14661210
> 
> 赞同：2
> 
> 时间：2013-02-02T11:05:45.217
> 
> 标签：android, xmlhttprequest, cross-domain, cordova

我正在为 android mobile 开发一个移动应用程序。当我运行它时，我收到以下错误：network_err xmlhttprequest exception 101。任何人都可以澄清一下吗？我使用的是 Android 4.2 版本下面的代码是 mainActivity.java 文件中的代码：

```
package com.example.myExample;

import org.apache.cordova.DroidGap;
import android.os.Bundle;

public class MainActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrlTimeoutValue = 15000;
        super.loadUrl("file:///android_asset/www/index.html");

        appView.getSettings().setAllowUniversalAccessFromFileURLs(true);
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T21:29:25.590

**跨域 XMLHttpRequest？**我和其他人在做跨域 XMLHttpRequests 时一直是这样（似乎没有记录的异常）。您使用 XMLHttpRequest 发出的大多数请求将是跨域的（即发送到加载页面 HTML 的服务器以外的服务器）——因为您从中加载的域是本地文件系统（文件:) Android/Webkit 可以有一些白名单域，但这可能不是您想要做的。

通常跨域使用 XMLHttpRequest（最近几年才被允许）要求您要访问的服务器*允许*该请求。这是通过让服务器返回 HTTP 标头来完成的：Access-Control-Allow-Origin: *（等，请参阅有关跨域 XMLHttpRequest 的信息）

我已经看到这个异常出现在 Android 2.3.5/Webkit 553.1 上，并且重复了有效的跨域请求（缓存错误？）。其他人在响应是无效 XML 的跨域请求中报告了它。

检查您尝试向哪个协议（http 与 https 等）发送请求的主机和端口（通常为 80）。

# python - 在 Cherrypy 中运行不止一堂课

> ID：14661217
> 
> 赞同：9
> 
> 时间：2013-02-02T11:06:30.777
> 
> 标签：python, cherrypy

我正在尝试构建一个带有索引等的小型站点以及我想要的 /api 中的 api。

例如：

```
class Site(object):
    @cherrypy.expose
    def index(self):
        return "Hello, World!"
    @cherrypy.expose
    def contact(self):
        return "Email us at..."
    @cherrypy.expose
    def about(self):
        return "We are..."

class Api(object):
    @cherrypy.expose
    def getSomething(self, something):
        db.get(something)
    @cherrypy.expose
    def putSomething(self, something) 
```

所以，我希望能够访问 mysite.com/contact 和 mysite.com/Api/putSomething

如果我使用`cherrypy.quickstart(Site())`，我只会获得 Site 下的页面。

我认为有一种方法可以将类 Api 映射到 /Api 下，但我找不到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T11:16:56.843

**更新（2017 年 3 月 13 日）：下面的原始答案已经过时了，但我保留它以反映最初提出的问题。**

[官方文档现在有一个关于如何实现它的正确指南。](http://docs.cherrypy.org/en/latest/advanced.html#restful-style-dispatching)

* * *

**原答案：**

查看默认调度程序。[调度的整个文档。](https://cherrypy.readthedocs.org/en/3.2.6/concepts/dispatching.html#default-dispatcher)

引用文档：

```
root = HelloWorld()
root.onepage = OnePage()
root.otherpage = OtherPage() 
```

> 在上面的示例中，URL`http://localhost/onepage`将指向第一个对象，URL`http://localhost/otherpage`将指向第二个对象。像往常一样，此搜索是自动完成的。

[此链接通过下面显示的完整示例提供了更多详细信息。](http://www.cherrypy.org/chrome/common/2.2/docs/book/chunk/ch03.html)

```
import cherrypy

class Root:
    def index(self):
        return "Hello, world!"
    index.exposed = True

class Admin:
    def user(self, name=""):
        return "You asked for user '%s'" % name
    user.exposed = True

class Search:
    def index(self):
        return search_page()
    index.exposed = True

cherrypy.root = Root()
cherrypy.root.admin = Admin()
cherrypy.root.admin.search = Search() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T02:09:00.760

正如[fumanchu 所](https://stackoverflow.com/users/23692/fumanchu)提到的，您可以通过多次调用`cherrypy.tree.mount`. 下面是我正在开发的一个网站的简化版本，它包含一个前端 Web 应用程序和一个 Restful API：

```
import cherrypy
import web

class WebService(object):

    def __init__(self):
        app_config = {
            '/static': {
                # enable serving up static resource files
                'tools.staticdir.root': '/static',
                'tools.staticdir.on': True,
                'tools.staticdir.dir': "static",
            },
        }

        api_config = {
            '/': {
                # the api uses restful method dispatching
                'request.dispatch': cherrypy.dispatch.MethodDispatcher(),

                # all api calls require that the client passes HTTP basic authentication
                'tools.authorize.on': True,
            }
        }

        cherrypy.tree.mount(web.Application(), '/', config=app_config)
        cherrypy.tree.mount(web.API(), '/api', config=api_config)

    # a blocking call that starts the web application listening for requests
    def start(self, port=8080):
        cherrypy.config.update({'server.socket_host': '0.0.0.0', })
        cherrypy.config.update({'server.socket_port': port, })
        cherrypy.engine.start()
        cherrypy.engine.block()

    # stops the web application
    def stop(self):
        cherrypy.engine.stop() 
```

创建 的实例会`WebService`初始化两个不同的 Web 应用程序。第一个是我的前端应用程序，它位于`web.Application`并将在`/`. 第二个是我的 RESTful API，它存在于`web.API`并将在`/api`.

这两个视图也有不同的配置。例如，我指定 api 使用方法分派，并且对它的访问由 HTTP Basic 身份验证控制。

创建 的实例后`WebService`，您可以根据需要对其调用 start 或 stop ，它会负责所有的清理工作。

很酷的东西。

# c++ - Windows 8 中的过剩空闲 - 重新渲染

> ID：14661220
> 
> 赞同：1
> 
> 时间：2013-02-02T11:07:03.470
> 
> 标签：c++, opengl, freeglut

我正在使用 freeglut、windows 8、vs2012 和最新的 nvidia 驱动程序。但是 glut idle 函数有一个奇怪的行为。在我调整窗口大小或单击窗口之前，它什么也不做。

或者不知何故 glut 不想重新渲染屏幕，即使某些变量已经改变。

```
#include <iostream>
#include <stdlib.h>
#include <GL/glut.h>

using namespace std;

GLfloat rotateQuad = 0;

void initRendering() {

    glEnable(GL_DEPTH_TEST);

}

//Called when the window is resized

void handleResize(int w, int h) {

    //Tell OpenGL how to convert from coordinates to pixel values

    glViewport(0, 0, w, h);

}

//Draws the 3D scene

void drawScene() {

    //Clear information from last draw

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_MODELVIEW); //Switch to the drawing perspective

    glLoadIdentity(); //Reset the drawing perspective

    glRotatef(rotateQuad,0,0,1);

    glBegin(GL_QUADS); //Begin quadrilateral coordinates

    glVertex3f(-0.5f, -0.5f, 0.0f);

    glVertex3f(0.5f, -0.5f, 0.0f);

    glVertex3f(0.5f, 0.5f, 0.0f);

    glVertex3f(-0.5f, 0.5f, 0.0f);

    glEnd(); //End quadrilateral coordinates

    glutSwapBuffers(); //Send the 3D scene to the screen

}
void idle(){
    rotateQuad+=1;
    if(rotateQuad > 360) rotateQuad=0;
}
int main(int argc, char** argv) {

    //Initialize GLUT

    glutInit(&argc, argv);

    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);

    glutInitWindowSize(400, 400); //Set the window size

    //Create the window

    glutCreateWindow("Quad Rotate");

    initRendering(); //Initialize rendering

    glutIdleFunc(idle);

    glutDisplayFunc(drawScene);

    glutReshapeFunc(handleResize);

    glutMainLoop(); //Start the main loop

    return 0;

} 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:10:11.023

你的`idle`函数只是更新旋转；它实际上并没有要求 GLUT 重新绘制，因此在其他事情触发它之前不会发生重新绘制（例如窗口交互或调整大小）。调用`glutPostRedisplay`你的空闲函数。见：[http ://www.lighthouse3d.com/tutorials/glut-tutorial/glutpostredisplay-vs-idle-func/](http://www.lighthouse3d.com/tutorials/glut-tutorial/glutpostredisplay-vs-idle-func/)

# asp.net - 使用 AJAX 作为模式窗口加载 .aspx 页面

> ID：14661222
> 
> 赞同：0
> 
> 时间：2013-02-02T11:07:29.197
> 
> 标签：asp.net, ajax, jquery

我正在尝试将页面加载`.aspx`为另一个页面内的模式窗口`.aspx`。但它似乎没有正确加载页面，我使用的是**JQuery** `get()`方法。这是加载页面并显示它的代码：

```
$(document).ready(function () {

    $.get('PagesForMenu.aspx', function (data) {
        modal.open({ content: data });
    });

}); 
```

这是主机页面： http: [//pastebin.com/r3msLELP](http://pastebin.com/r3msLELP)

我不尝试加载的页面有一个[CKeditor](http://ckeditor.com/)控件和两个**文本框**和一个**验证**控件的按钮（使用**JQuery 验证**插件）然后提交表单。当我从浏览器运行**PagesForMenu.aspx**时，它工作正常（加载**CKeditor**并验证工作）。但是当它在模式窗口中加载时，**CKeditor**没有加载，当我单击提交按钮时，它不会验证表单。

**浏览器中的页面：** ![浏览器中的页面](../Images/19416b620f303eb1fce7f4e3ae28a0c1.png)

**在模式窗口中加载** ![在模态窗口中加载页面](../Images/a475b39777961dfee90c1690e8b20c78.png) 的页面：我试图在模式窗口中加载的页面：http: [//pastebin.com/gS0JBBDS](http://pastebin.com/gS0JBBDS)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:53:27.887

我发现了问题所在。当您使用 加载页面时`get()`，它不会在页面内运行脚本。您应该将所有脚本放在一个文件中并使用 `$.getScript()`.

# xml - XSLT 函数 insert-before 无法识别

> ID：14661224
> 
> 赞同：3
> 
> 时间：2013-02-02T11:07:34.343
> 
> 标签：xml, xslt

我正在使用 baseX 创建一个 xslt 文件，但无法识别函数 insert-before。这是一个标准函数（你可以在这里看到它[http://www.w3schools.com/xpath/xpath_functions.asp](http://www.w3schools.com/xpath/xpath_functions.asp)），我也尝试像这样声明命名空间 fn

```
xmlns:fn="http://www.w3.org/2005/xpath-functions" 
```

然后使用 fn:insert-before 调用该函数，但它仍然不起作用。这是我的代码示例

```
<xsl:call-template name="temp">
   ....
   <xsl:with-param name="array" select="fn:insert-before($array,$count+1,$succ)"/>
   ...
</xsl:call-template> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T18:12:55.287

BaseX 文档位于

[http://docs.basex.org/wiki/XSLT_Module](http://docs.basex.org/wiki/XSLT_Module)

声明它默认使用默认的 JDK 1.5 XSLT 引擎。这仅支持 XSLT 1.0。同一页面解释了如何将其配置为与 Saxon 等 XSLT 2.0 引擎一起运行。

# python - 如何偶尔为长时间运行的 Python 列表理解提供反馈

> ID：14661229
> 
> 赞同：2
> 
> 时间：2013-02-02T11:08:08.220
> 
> 标签：python, list, list-comprehension

如果您在 Python 中有一个长期运行的列表理解，请说：

```
from itertools import combinations

print [w for w in (''.join(c) for c in combinations(words, 2)) if sorted(w) == letters] 
```

其中 words 是 200000 个单词的列表，而 letters 是字母列表；有没有办法偶尔打印出到目前为止已经处理了多少字或其他形式的进度报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:12:09.647

您需要将其转换为正常循环；不要尝试混合副作用功能：

```
from itertools import combinations

result = []
count = 0
for w in (''.join(c) for c in combinations(words, 2)):
    if sorted(w) == letters:
        result.append(w)
        count += 1
        if count % 2000 == 0:
            print 'Progress: {0} matching combinations found'.format(count)

print result 
```

或者，如果您想跟踪测试的组合，请将计数移到`if`：

```
from itertools import combinations

result = []
count = 0
for w in (''.join(c) for c in combinations(words, 2)):
    count += 1
    if count % 2000 == 0:
        print 'Progress: {0} combinations scanned'.format(count)

    if sorted(w) == letters:
        result.append(w)

print result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:34:08.687

这是一个生成器，可以向日志报告进度。

```
def log_every(seq, every):
    for i, x in enumerate(seq):
        if (i + 1) % every == 0:
            logging.info('Generated %d', i)
        yield x 
```

像这样使用它：

```
for c in log_every(combinations(words, 2), 2000):
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-06T11:41:02.843

为了完整起见，您可以使用一个*技巧*来定期打印列表理解的状态 - 例如，在每 10,000 次处理时打印一条消息，同时生成您可以使用的仅奇数列表：

```
test = [x for x in range(100000)
        if x % 2 or (x % 10000 == 0 and print("Processed: " + str(x)) is None and x % 2)] 
```

话虽如此，这更像是一种 hack（考虑到额外的条件，它可能不会提高性能）所以如果你需要定期打印输出，我肯定会建议你解开你的循环并以更理智的方式处理*报告*逻辑方式。

# sencha-touch - Sencha Touch 2.1.1 的 JSONP 请求问题

> ID：14661230
> 
> 赞同：0
> 
> 时间：2013-02-02T11:08:16.207
> 
> 标签：sencha-touch, sencha-touch-2, jsonp, sencha-touch-2.1

根据 Sencha Touch 2.1 文档，您使用以下方法 Ext.data.JsonP.request() 发出 json 请求。当我使用它时，我得到：“未捕获的类型错误：无法调用未定义的方法‘请求’”。我得到与 Ext.util.JSONP.request() 相同的错误。

如何使用 Sencha Touch 2.1.1 发出 jsonp 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:36:32.357

我猜你还没有导入必需的类。要使用`Ext.data.JsonP.request`，您需要`requires:['Ext.data.proxy.JsonP']`在相应的类中添加类似的要求。我只是更喜欢在 app.js 本身中添加 require 。

# javascript - 如何使 getElementsByClassName 工作

> ID：14661231
> 
> 赞同：1
> 
> 时间：2013-02-02T11:08:25.830
> 
> 标签：javascript

我一直在阅读有关 getElmentByClassName 的信息，但我似乎无法让它在任何浏览器中工作，当我调用 ID 名称时，我拥有的功能可以工作，但我希望能够调用类名。

有什么方法不包括 Jquery 吗？

这就是我所拥有的，在一些帮助下会很棒。谢谢。

```
<ul><li><button class="testButton">Test button</button></li></ul>

function OnButtonDown (button) {
alert("The class work")
}

function Init () {
    var className = "testButton";
    var button = document.getElementsByClassName(className);
    if (button.addEventListener) {  // all browsers except IE before version 9
        button.addEventListener ("mousedown", function () {
            OnButtonDown (button)
            }, false);
        button.addEventListener ("mouseup", function () {
            OnButtonUp (button)
            }, false);
    }
    else {
        if (button.attachEvent) {   // IE before version 9
            button.attachEvent ("onmousedown", function () {
                OnButtonDown (button)
                });
            button.attachEvent ("onmouseup", function () {
                OnButtonUp (button)
                });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:12:41.530

`getElementsByClassName()`返回 HTML 元素的集合，您需要使用它们的索引访问集合的元素：

```
button = document.getElementsByClassName(className)[0];
// your code here 
```

如果您只有一个元素，请考虑使用`.getElementById()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:29:58.663

@micnic 说了什么。

供参考。如果对您`document.getElementById()` *不起作用*，请按照以下方式处理：

```
var button = false;
var buttons = document.getElementsByClassName(className);
for (var i=0; i<buttons.length; i++) {
    button = buttons[i];
    // do stuff with button
} 
```

在这里演示：http: [//jsfiddle.net/3pAeM/](http://jsfiddle.net/3pAeM/)

# mysql - 在mysql中选择每个ID的第二行

> ID：14661232
> 
> 赞同：1
> 
> 时间：2013-02-02T11:08:35.620
> 
> 标签：mysql, sql, select, group-by

我有一张桌子：

```
ID | time
1 | 300
1 | 100
1 | 200
2 | 200
2 | 500 
```

我想得到`2nd row`每一个`ID`
我知道我能得到`1st row`的

```
select ID,time from T group by ID; 
```

但我不知道如何为每个 ID 获取第二行。
我知道`limit`and`offset`子句`mysql`，但不知道如何在这里使用它们。
我该怎么做 ？

```
EDIT : Actually, time is not ordered. I forgot to specify that. I have made an edit in the table. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:51:21.427

我只知道如何制作它，但我无法修复它，也许你可以修复它。任何建议都可以纠正我的查询

首先 this 选择每个 id 的第一行。

```
 SELECT min(id) id 
                 FROM TableName t2
                 group by id 
```

然后选择 min(id) 这是`not in`要选择的第一个查询 min(id) （这是第二行）

像那样

```
 SELECT  min(id) id ,time
      FROM TableName 
      WHERE id NOT IN    (
                          SELECT min(id) id 
                          FROM TableName 
                          GROUP BY id
                         )
      GROUP BY id 
```

** 正如我所说，它只是建议。它返回给我 0 个值。如果你修复它，让我编辑我的帖子以提供帮助

[**这里有一个演示**](http://www.sqlfiddle.com/#!2/d1e16/110)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:15:53.840

```
SELECT ID, MAX(time) time
FROM
    (
        select ID, Time
        from    TableName a
        where 
        (
            select count(*) 
            from TableName as f
            where f.ID = a.ID and f.time <= a.time
        ) <= 2
    ) s
GROUP BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5f342/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:15:30.410

```
SELECT x.* 
  FROM test x 
  JOIN test y 
    ON y.id = x.id 
   AND y.time >= x.time
 GROUP 
    BY id,time 
HAVING COUNT(*) = n; 
```

请注意，任何少于 n 个结果的条目都将被忽略

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T17:59:50.467

您不能对您拥有的表执行此操作。您可以通过以下方式进行勇敢的尝试：

```
select id, time
from (select id, time
      from t
      group by t
     ) t
where not exists (select 1 from t t2 where t2.id = t.id and t2.time = t.time)
group by id 
```

也就是说，尝试过滤掉第一行。

这不可能的原因是因为表本质上是无序的，因此表中没有“第二个”的真正定义。这使 SQL 引擎有机会在处理过程中按照它认为合适的方式重新排列行——这可以带来巨大的性能提升。

甚至您正在使用的构造：

```
select id, time
from t
group by id 
```

*不保证从第一行返回时间*。这是 MySQL 的一个（错误）功能，称为隐藏列。它实际上仅适用于所有值都相同的情况。我承认在实践中它似乎从第一行获得了价值，但你不能保证这一点。

可能您最好的解决方案是将数据选择到具有自动递增列的新表中：

```
create table newtable (
    autoid int auto_increment,
    id int,
    time int
);

insert into newtable(id, time)
    select id, time from t; 
```

在实践中，这可能会保持与原始表相同的顺序，然后您可以使用 autoid 获取第二行。不过，我想强调“在实践中”。无法保证这些值的顺序正确，但它们可能会如此。

# javascript - 如何用街道、城市和国家显示手机的当前位置

> ID：14661236
> 
> 赞同：0
> 
> 时间：2013-02-02T11:08:57.613
> 
> 标签：javascript, jquery, cordova, geolocation

以下是我为获取手机当前位置而编写的代码。它显示当前位置以及手机所在的城市和国家/地区。但我需要显示街道地址位置。请尽快提出建议。

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width;height=device-height; user-scalable=no" />
<meta http-equiv="Content-type" content="text/html;charset=utf-8">
<title>PhoneGap Reverse Geolocation Lookup</title>
<script type="text/javascript" src="cordova-1.7.0.js"></script>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
<script type="text/javascript">
var geocoder;
$(document).ready(function() {
geocoder = new google.maps.Geocoder();
$('#button-get-reverse-lookup').click(function(){
navigator.geolocation.getCurrentPosition(onGetCurrentPositionSuccess, onGetCurrentPositionError);
});
});
var onGetCurrentPositionSuccess = function(position) {
console.log("lat: " + position.coords.latitude);
console.log("long: " + position.coords.longitude);
var lat = parseFloat(position.coords.latitude);
var lng = parseFloat(position.coords.longitude);
// paris, france - uncomment to test
//var lat = parseFloat(48.850258);
//var lng = parseFloat(2.351074);
// tiburon, california
//var lat = parseFloat(37.872685);
//var lng = parseFloat(-122.45224);
var latlng = new google.maps.LatLng(lat, lng);
geocoder.geocode({'latLng': latlng}, function(results, status)
{
 if (status == google.maps.GeocoderStatus.OK)
                {
                    if (results[1])
                    {
                        var reverse_geo = results[1];

                         if (reverse_geo.address_components[0])
                          { 

                          alert(reverse_geo.address_components[4].long_name+"," + reverse_geo.address_components[3].long_name+"," + reverse_geo.address_components[2].long_name+"," + reverse_geo.address_components[0].long_name);
                          //text = text + "0: " + reverse_geo.address_components[0].long_name + "<br />"1: " + reverse_geo.address_components[1].long_name + "<br />""; 
                          }
                       }
                }
                else
                {
                    alert("No hay informaci�n de Reverse Geocoding.");
                }
});
}
var onGetCurrentPositionError = function(error) {
console.log("Couldn't get geo coords from device");
}
</script>
</head>

<body>
<h1>Reverse Geolocation Lookup</h1>
<button id="button-get-reverse-lookup">Get Reverse Lookup</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:45:16.363

根据[Google 网站上的文档，](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)您需要遍历所有地址组件，查看类型并将它们与您想要提取的内容进行比较。

street_number = 街道编号 route = 街道名称 locality = 城市 Administrative_area_level_1 = 州或省 country = Country

无法保证地址组件的交付顺序，因此您需要检查它们。

# magento - 如何将社交网络按钮添加到 Magento

> ID：14661241
> 
> 赞同：1
> 
> 时间：2013-02-02T11:09:20.187
> 
> 标签：magento, magento-1.7, magento-1.4, magento-1.5

我有一个 1.7.0.2 的 magento 版本。我曾尝试在产品中添加社交网络按钮以分享产品详细信息，但我也不知道它是否有效。我已经安装了一个扩展[这是一个扩展的链接](http://www.magentocommerce.com/magento-connect/social-bookmark-icons-7376.html#tab%3areviews)。但是在该站点的概览选项卡中，他们说我们必须复制并粘贴一些代码到我们希望看到的 html 页面上。但是那里缺少代码..

在评论部分，一个人提到了这个过程。我也经历过，但没有用。谁能知道比这更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:49:28.827

尝试在模板文件下方添加代码

```
<?php echo Mage::helper('network/data')->CUE_socialIcons(); ?> 
```

请参阅[http://www.magentocommerce.com/magento-connect/social-bookmark-icons-7376.html#tab%3areviews](http://www.magentocommerce.com/magento-connect/social-bookmark-icons-7376.html#tab%3areviews)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T10:19:14.320

[我们可以从http://www.addthis.com](http://www.addthis.com)和[http://www.sharethis.com](http://www.sharethis.com)轻松添加社交图标。我们可以自定义所需的社交网络。我不喜欢任何扩展来做到这一点。我们可以轻松做到。

正如我上面提到的，我正在使用扩展程序，后来，我卸载了扩展程序并从 addthis.com 获取了社交图标。只是我们需要注册并按照这些站点中显示的步骤进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T10:43:44.973

```
<?php echo CUE_socialIcons(); ?> 
```

# linux - CMake：是否可以从命令行获取目标安装目录？

> ID：14661244
> 
> 赞同：4
> 
> 时间：2013-02-02T11:09:25.820
> 
> 标签：linux, cmake, installation

是否可以从命令行获取目标安装目录？我希望能够执行这样的安装命令：

> 安装 {一些目的地}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T11:16:23.663

您可以在 CMake 运行时通过设置变量来影响这一点[`CMAKE_INSTALL_PREFIX`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_INSTALL_PREFIX)。例如

```
cmake . -DCMAKE_INSTALL_PREFIX=/usr
make
sudo make install 
```

# java - JSF 每个用户一个会话

> ID：14661248
> 
> 赞同：1
> 
> 时间：2013-02-02T11:09:35.773
> 
> 标签：java, jsf, session

我刚开始学习 JSF，我想知道这个问题。我有 16 个复选框。当我打开页面并且我的兄弟也在打开它时，似乎我们有相同的会话。当我单击其中一个复选框时，它也会在我的兄弟浏览器上被选中。选中的复选框保存在`private ArrayList<String> selectedBoes = new ArrayList<String>();`
My ManagedBean 的 SessionScoped 中。

为什么会发生这种情况以及如何避免？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T01:58:33.633

> *我兄弟的会话 ID 是`cdbbb126e96060ddb924b9d5e591`. 我的是`cd9a5c4180bd9dfef0ec8db2ac4d`*

那么唯一可能的原因是你*实际上是*没有将它们存储在会话范围内。症状表明您要么将它们存储在应用程序范围内，要么甚至声明了它`static`（因此问题中的代码根本不代表真正的代码；您注释中的代码表明也更少或更多，您使用了不同的属性名称，显然您试图从头顶输入它，您不应该这样做，您应该复制粘贴*真实*代码）。

请注意，当您使用 CDI`@Named`而不是 JSF`@ManagedBean`时，它将默认为应用程序范围，除非使用`javax.enterprise.context`范围注释另外指定。因此，如果您使用`javax.faces.bean.SessionScoped`CDI 不支持的 JSF 自己的注释，那么它仍然在应用程序范围内。

# java - Java JNI：使用 C 中的 JNI 创建 Swing 窗口

> ID：14661249
> 
> 赞同：10
> 
> 时间：2013-02-02T11:09:57.870
> 
> 标签：java, c, swing, java-native-interface, awt

我正在使用 JNI 调用一个静态 java 方法，该方法又创建一个 Swing JFrame 并显示它。代码相当简单，Java 代码独立工作（即`java StartAWT`做它应该做的），而当使用 JNI 从 C 调用时，进程挂起。

我在 Mac OS X 10.8 Mountain Lion 上使用 JDK 1.7.0_09。

这是我用来调用静态方法的 C 代码：

```
JavaVM* jvm;
JNIEnv* env = create_vm(&jvm);

jclass class = (*env)->FindClass(env, "StartAWT");
jmethodID method = (*env)->GetStaticMethodID(env, class, "run", "()V");

(*env)->CallStaticVoidMethod(env, class, method);

(*jvm)->DestroyJavaVM(jvm); 
```

该类`StartAWT`如下所示：

```
public class StartAWT {

    public static class Starter implements Runnable {
        public void run() {
            System.out.println("Runnning on AWT Queue.");

            JFrame.setDefaultLookAndFeelDecorated(true);
            JFrame frame = new JFrame("That's a frame!");
            JLabel label = new JLabel("A Label");
            frame.getContentPane().add(label);

            frame.pack();
            frame.setVisible(true);
        }
    }

    public static class GUI implements Runnable {
        public void run() {
            try {
                System.out.println("Going to put something on the AWT queue.");
                SwingUtilities.invokeAndWait(new Starter());
            } catch (Exception exc) {
                throw new RuntimeException(exc);
            }
        }
    }

    public static void run() {
        Thread gui = new Thread(new GUI());
        gui.start();
    }
} 
```

当我启动应用程序时，我确实看到`Going to put something on the AWT queue`但没有看到`Running on AWT Queue`.

我相信我的 C 进程中的虚拟机没有 AWT 事件队列，但我不知道如何设置它以拥有一个（我也不确定这是原因）。

为了使用 JNI 显示基于 AWT 的 GUI，需要做什么？

--

**编辑：**我已经插入循环来查看哪些线程是活动的，哪些不是（可以在[这个 gist](https://gist.github.com/4697138)中看到）。在这个版本中，我`SwingUtilities.invokeAndWait`在另一个线程中调用。结果：主线程处于活动状态（C）。Java 调度的第一个线程（不是主线程）是存活的；执行 Call 的线程`invokeAndWait`被阻塞（我认为 invokeAndWait 甚至没有返回），甚至没有输入应该在 EventQueue 上运行的函数。

我也尝试过`SwingUtilities.invokeAndWait`直接调用，这将给出以下消息：

```
2013-02-02 13:50:23.629 swing[1883:707] Cocoa AWT: Apple AWT Java VM was loaded on first thread -- can't start AWT. (
    0   liblwawt.dylib                      0x0000000117e87ad0 JNI_OnLoad + 468
    1   libjava.dylib                       0x00000001026076f1      Java_java_lang_ClassLoader_00024NativeLibrary_load + 207
    2   ???                                 0x000000010265af90 0x0 + 4335185808
) 
```

这也是我在 StackOverflow 上的其他问题中读到的内容，例如下面评论中建议的问题。但是，我找不到原始问题的解决方案。也许值得注意的是，在上面的消息出现后，主线程仍然活着，即进程既没有死锁也没有崩溃。

--

**编辑：**我在 Linux 上测试了它按预期工作的代码。所以我相信这是 Cocoa AWT 的 Mac OS X 问题，但我不知道如何规避它。

--

**编辑：**我还尝试将 JVM 的整个调用移动到一个新的本机线程上。这适用于具有 Apples Java 32 位 (1.6.0_37) 的 Mac OS X 10.6，但会导致与上述相同的死锁。在 Mac OS X 10.8 上情况更糟，应用程序崩溃，只有一条消息“Trace/BPT trap: 5”（这[似乎与加载动态库有关](https://stackoverflow.com/questions/14675206/mac-os-x-what-is-trace-bpt-trap-5)）。

根据 Apples [Launch Services Reference的说法，我还尝试](https://developer.apple.com/library/mac/documentation/Carbon/Reference/LaunchServicesReference/LaunchServicesReference.pdf)[按照此 Q&A](https://stackoverflow.com/questions/1596945/building-osx-app-bundle)中的描述捆绑二进制文件，但启动失败并显示消息，这是一个未知错误。后者也发生在没有尝试使用 AWT 的情况下（单纯的 JVM 调用失败）。`lsopenurlswithrole() failed with the message -10810`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-07T14:56:22.943

最后我找到了解决方案。

问题不在于创建虚拟机的线程，问题在于初始化 AWT 事件队列的线程。换句话说：第一次加载 AWT 类时，它可能不会加载到主线程上。`java.awt.Component`因此，第 1 步：在另一个线程上加载（例如） 。

但是现在 EventQueue 将阻塞，因为它将工作委托给未运行的 Cocoa 主事件队列 - 果然，因为它只会在主线程上运行，而主线程是我的应用程序。因此主运行循环需要在主线程上启动：

```
void
runCocoaMain()
{
    void* clazz = objc_getClass("NSApplication");
    void* app = objc_msgSend(clazz, sel_registerName("sharedApplication"));

    objc_msgSend(app, sel_registerName("run"));
} 
```

我必须将我的应用程序与 Cocoa 框架链接并包含`<objc/objc-runtime.h>`. 调用 runCocoaMain 后主线程被阻塞（因为事件循环在那里运行），因此需要为应用程序本身求助于另一个线程。

使用上面的代码片段运行 EventQueue 后，在另一个线程上加载 AWT 类将成功，您可以在那里继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T09:23:49.350

我通过 OSX 的指令解决了类似的问题[：JavaVM、AWT/Swing 和可能的死锁](https://stackoverflow.com/questions/8750690/osx-javavm-awt-swing-and-possibly-a-deadlock/14859179)，即`CFRunLoopRun()`在另一个线程中启动 JVM 后启动。

# javascript - 是否可以使用 javascript 提交表单并返回到另一个页面？

> ID：14661255
> 
> 赞同：-1
> 
> 时间：2013-02-02T11:10:12.960
> 
> 标签：javascript

我有另一个网站的表格。它是“发布方法”。它是一项免费的短信服务。所以我想知道我是否可以使用表单提交数据并返回到我网站上的另一个页面。我不知道它是否可能。我对javascript不太了解。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:35:10.933

也许你可以使用`ajax`：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ 但我怀疑它会起作用，因为他们可能会查看服务器发出的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:41:25.787

提交条件 feed 成功后尝试

```
window.location.href=www.google.com/type the url you want to go 
```

# jquery - jQuery ajax 错误说明

> ID：14661259
> 
> 赞同：0
> 
> 时间：2013-02-02T11:11:00.697
> 
> 标签：jquery, ajax

我知道在 jQuery ajax 中有检测错误的工具，但我想要的是如何描述问题所在？404，没有互联网连接，内部服务器错误或其他什么？

这是我的简单程序

```
<script type="text/javascript" charset="utf-8" src="http://jquery.local/jquery-1.7.2.min.js"></script>

<script>
    function Create_new_event ()
    {
        url = "missing.php";

        $.post(url, {
        }, function(hasil) {
            alert (hasil);
        });
    }

    $(document).ajaxError(function(event, request, settings) {
        // I believe in this area I should put my code to detect problem
    });

</script>

<button onClick="Create_new_event ();">Send</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:25:12.637

这是一个例子：

```
$(document).ajaxError(function(e, x, settings, exception) {
            var message;
            var statusErrorMap = {
                '400' : "Server understood the request but request content was invalid.",
                '401' : "Unauthorised access.",
                '403' : "Forbidden resouce can't be accessed",
                '500' : "Internal Server Error.",
                '503' : "Service Unavailable"
            };
            if (x.status) {
                message =statusErrorMap[x.status];
                                if(!message){
                                      message="Unknow Error \n.";
                                  }
            }else if(exception=='parsererror'){
                message="Error.\nParsing JSON Request failed.";
            }else if(exception=='timeout'){
                message="Request Time out.";
            }else if(exception=='abort'){
                message="Request was aborted by the server";
            }else {
                message="Unknow Error \n.";
            }

            alert(message);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:23:39.223

是的，你可以用`thrownError`参数来实现，这样做：http: [//jsfiddle.net/XJ7L2/](http://jsfiddle.net/XJ7L2/)

```
 function Create_new_event() {
   url = "missing.php";

   $.post(url, {}, function (hasil) {
       alert(hasil);
   });
 }
 $(function () {
   $('button').click(function(){
     Create_new_event();
   });
   $(document).ajaxError(function (event, request, settings, thrownError) {
     console.log(request.status  + ' : ' + thrownError);
   });
 }); 
```

发生 HTTP 错误时，`thrownError`接收 HTTP 状态的文本部分，例如`"Not Found"`或`"Internal Server Error."`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:24:49.960

如果您查看`request`参数包含的内容 ( `console.log( request );`)，您会看到响应代码在 中`request.status`，文本描述在 中`request.statusText`。

所以是这样的：

```
$(document).ajaxError(function(event, request, settings) {
    console.log( 'Server returned '+request.status+': '+request.statusText );
}); 
```

演示：http: [//jsfiddle.net/FSfEh/](http://jsfiddle.net/FSfEh/)

# oracle - 截断数据，如果从 1 插入新行列增量

> ID：14661273
> 
> 赞同：0
> 
> 时间：2013-02-02T11:12:18.163
> 
> 标签：oracle

我有两行的表，其中一个 ID 自动递增，最后一行 ID 为 89。然后我截断表中的数据/行。然后我再次插入行。

但编号 ID 来自 90 而不是来自 1（一）。如果在 mysql 中，如果我在表自动增量中截断数据，则再次从 1（一）开始。那么在 oracle 中我想如何再次从一个 ID 自动增量。谢谢。

创建表时的以下步骤：

```
// create table;
CREATE TABLE tes (
  id NUMBER NULL,
  ip_address varchar2(25) NOT NULL
  PRIMARY KEY (id)
);

// and create increment;
CREATE SEQUENCE tes_sequence START WITH 1 INCREMENT BY 1;

// and create trigger;
CREATE OR REPLACE TRIGGER tes_trigger
BEFORE INSERT
ON tes
REFERENCING NEW AS NEW
FOR EACH ROW
BEGIN
SELECT tes_sequence.nextval INTO :NEW.ID FROM dual;
END; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T11:27:38.183

Oracle 序列是一个单独的对象，不与表连接。如果您需要在截断表后开始序列，则需要更改序列。看看这里：[如何在 Oracle 中重置序列？](https://stackoverflow.com/questions/51470/how-do-i-reset-a-sequence-in-oracle)

# android - 按钮单击打开类中的另一个活动扩展片段

> ID：14661275
> 
> 赞同：1
> 
> 时间：2013-02-02T11:12:23.920
> 
> 标签：android, android-intent, android-widget

我创建了 ButtonFragment 类，在其中我们实现了视图上的按钮单击方法并识别特定按钮，当我们单击按钮事件时将起作用，但是当我们尝试打开另一个活动时，如 startActivity 方法给出错误。我们怎么能这样做，任何人都可以帮助我。下面是我的代码。

```
 package com.viewpagerex;

import android.content.Context; import android.content.Intent;
import android.os.Bundle; import android.support.v4.app.Fragment;
import android.util.Log; import android.view.LayoutInflater; import
android.view.View; import android.view.View.OnClickListener; import
android.view.ViewGroup; import android.widget.ImageButton;

public class ButtonFragment extends Fragment implements  OnClickListener 
{ 

private static final String TAG = null;
    protected static final Context context=null;

    public void onCreate(Bundle savedInstanceState)
{
        super.onCreate(savedInstanceState);
    Log.e(TAG,"HelloHelooooo");

    }   
public void onActivityCreated(Bundle savedInstanceState) 
{       super.onActivityCreated(savedInstanceState);

   }    

public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState)    
     {

        View view = inflater.inflate(R.layout.button, container, false);    

  ImageButton imgBtn = (ImageButton)  view.findViewById(R.id.imgButton);

        imgBtn.setOnClickListener(this);

                return view;
}

public void onClick(View v)
 {

            if(v.getId()==R.id.imgButton) 
        {
                     // TODO Auto-generated method stub

        startActivity(new Intent(ButtonFragment.this,Activity_One.class));
                Log.e(TAG,"Data show");     
                }
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:15:24.703

你可以试试：

```
startActivity(new Intent(v.getContext(),Activity_One.class)); 
```

并确保您已`Activity_One`在`AndroidManifest.xml`

# r - 在 R 中调用 cbind 和 sapply

> ID：14661276
> 
> 赞同：2
> 
> 时间：2013-02-02T11:12:32.267
> 
> 标签：r

我有一个给定矩阵的列之间所有可能组合的列表。我想计算每个组合的 cov，最后计算每个协方差矩阵的行列式。

问题是我需要在计算行列式之前计算一个平方矩阵，我尝试将 do.call 与 cbind 和 sapply 一起使用，但不起作用：

```
matrices.sq=do.call("cbind",lapply(list.of.matrices,get)) 
```

代码如下：

```
myarray=matrix(rexp(200),50,5)
list.of.matrices <- apply(expand.grid(rep(list(c(FALSE, TRUE)), ncol(myarray))),
                              1, function(j)myarray[, j, drop = FALSE])
list.of.cov.matrices=sapply(list.of.matrices, cov)
list.of.cov.matrices.2=list.of.cov.matrices[-(1:ncol(myarray))] #so get those with more than one column
list.of.det<- sapply(list.of.cov.matrices.2, det) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:41:10.737

我认为您不需要存储所有这些矩阵。首先，计算你的协方差矩阵，然后使用相同的`apply`调用来创建子矩阵，而不是存储它们，只计算它们的行列式：

```
cov.mat <- cov(myarray)
# is a 5-by-5 matrix

dets <- apply(expand.grid(rep(list(c(FALSE, TRUE)), ncol(cov.mat))),
              1, function(j) det(cov.mat[j, j, drop = FALSE]))
# is a vector of length 32 
```

但是，如果您真的必须做很长的路要走：

```
list.of.cov.mat <- apply(expand.grid(rep(list(c(FALSE, TRUE)), ncol(cov.mat))),
                         1, function(j) cov.mat[j, j, drop = FALSE])
# is a list of 32 covariance matrices
dets <- sapply(list.of.cov.mat, det)
# is a vector of length 32 
```

或者超长的路：

```
list.of.mat <- apply(expand.grid(rep(list(c(FALSE, TRUE)), ncol(cov.mat))),
                         1, function(j) myarray[, j, drop = FALSE])
# is a list of 32 matrices
list.of.cov.mat <- lapply(list.of.mat, cov)
# is a list of 32 covariance matrices
dets <- sapply(list.of.cov.mat, det)
# is a vector of length 32 
```

它们都应该给出相同的结果，但顶部的结果会明显更快，打字更少。

# web-services - 访问 java web 服务的路径？

> ID：14661288
> 
> 赞同：0
> 
> 时间：2013-02-02T11:14:12.917
> 
> 标签：web-services

我创建了一个简单的 java 类，并使用自下而上的方法基于该类创建了一个 Web 服务。我可以在 Eclipse 中创建服务，但是为了通过浏览器检查 WSDL 文件（以确认 Web 服务已成功部署），我不确定我应该使用哪个 URL（基本上是路径）。我尝试使用网址

```
http://localhost:8080/POSStore/ConsultServices?WSDL 
```

但它不起作用。有什么建议么？

![Eclipse 项目屏幕截图](../Images/efe3a084bf02da1f010e5de4bbe8a948.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:43:19.980

相反，我需要使用下面的 URL。虽然不确定为什么路径中包含服务。

```
http://localhost:8080/POSStore/services/ConsultServices?WSDL 
```

# php - Wordpress 以编程方式创建帖子，然后在 index.php 上显示帖子

> ID：14661289
> 
> 赞同：-3
> 
> 时间：2013-02-02T11:14:12.347
> 
> 标签：php, wordpress

我一直在尝试我的这个项目一段时间，但我没有运气。我正在尝试在functions.php 中以编程方式创建8 个帖子。我需要这些只发布 1 次。我遇到的问题是每次刷新页面时，帖子都会自动创建更多内容。这是我在functions.php中以编程方式创建帖子的代码。

```
<?php // Create post object
$my_post = array(
     'post_title' => 'How to make your diet success',
     'post_name' => '7-ways-to-make-succes-Diet',
     'post_content' => 'my content',
     'post_status' => 'publish',
     'post_author' => 1,
     'post_category' => array(8,39)
  );

// Insert the post into the database
wp_insert_post( $my_post ); ?> 
```

此代码的唯一问题是每次页面刷新时它都会自动创建更多帖子。我将创建 8 个这样的函数，我只希望它们被创建一次。一个代码示例会很棒。

* * *

接下来，我想在我的 index.php 上显示帖子。我想单独获得这些帖子。这是我到目前为止的代码。

```
<div class="post1"><?php $post_id = wp_insert_post( $post, $wp_error );
//now you can use $post_id withing add_post_meta or update_post_meta ?> </div>

<div class="post2"><?php $post_id = wp_insert_post( $post, $wp_error );
//now you can use $post_id withing add_post_meta or update_post_meta ?> </div> 
```

* * *

我很确定我需要打电话给蛞蝓或帖子名称来单独获取它们。是的，我已经尝试过这种方法以及其他 10 种方法，但没有任何效果。我得到的最接近的是显示帖子名称。代码示例会很棒。如果有人可以为我工作，我将非常感激并可能通过贝宝捐赠一些钱。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:21:01.293

functions.php 不是以编程方式创建页面或帖子的好地方。您应该[创建一个插件](https://codex.wordpress.org/Writing_a_Plugin)（就像创建自定义主题一样简单）并在其[激活函数](https://codex.wordpress.org/Function_Reference/register_activation_hook)中创建帖子。此函数仅在您的插件激活时调用。另请阅读有关插件[停用](https://codex.wordpress.org/Function_Reference/register_deactivation_hook)和[卸载](https://codex.wordpress.org/Function_Reference/register_uninstall_hook)挂钩的信息

一次又一次地创建您的帖子的原因是每次请求页面时都会调用文件 functions.php。如果您坚持在functions.php 中创建帖子，您应该通过检查您的帖子是否已经创建的条件来包装您的wp_insert_post - 而[get_posts](https://codex.wordpress.org/Template_Tags/get_posts)函数将适合您的需要。

```
<?php 
//Use either post slug (post_name)
$post = get_posts( array( 'name' => '7-ways-to-make-success-diet' ) );
/*or $post = get_posts( array( 'name' => sanitize_title('My Single.php Test') ) );
if you do not set the post_name attribute and let WordPress to set it up for you */
if ( empty($post) ) {
    // Create post object 
    $my_post = array( 'post_title' => 'My Single.php Test', 'post_name' => '7-ways-to-make-success-diet', 'post_content' => 'my content4654654', 'post_status' => 'publish', 'post_author' => 1, 'post_category' => array(8,39) ); 
    // Insert the post into the database 
    wp_insert_post( $my_post ); 
}
?> 
```

此外，get_posts 将帮助您将帖子放在首页。例如。

```
<?php 
$post = get_posts( array( 'name' => 'How to make your diet success' ) );
echo $post->post_title;
...
?> 
```

# c# - 从字符串转换 SQL Server 日期

> ID：14661294
> 
> 赞同：1
> 
> 时间：2013-02-02T11:15:13.310
> 
> 标签：c#, asp.net, sql-server-2008

我需要将从 ASP.Net 文本框中获取的日期存储到 SQL Server 2008`date`列中。

我收到以下异常消息。

> *从字符串转换日期和/或时间时转换失败。*

我的代码是：

```
SqlConnection cn;
SqlCommand cmd;
SqlDataAdapter da;

int n=4;
protected void Page_Load(object sender, EventArgs e)
{
    cn = new SqlConnection(<Connection String>);
}

protected void Button1_Click(object sender, EventArgs e)
 {
        try
      {
          string query = "insert into temp values('" + TextBox1.Text  + "')";
          cn.Open();
          cmd = new SqlCommand(query, cn);
          cmd.ExecuteNonQuery();
          cn.Close();
          Response.Write("Record inserted successfully");
     }
    catch (Exception ex)
    {
         Response.Write(ex.Message);
    }

} 
```

请帮忙 ..

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:21:09.103

将您的代码更改为以下内容（假设中的列`temp`实际上是 a `DateTime`）：

```
protected void Button1_Click(object sender, EventArgs e)
{
    try
    {
        string query = "insert into temp values(@Value)";
        cn.Open();
        cmd = new SqlCommand(query, cn);
        cmd.Parameters.AddWithValue("@Value", DateTime.Parse(TextBox1.Text));
        cmd.ExecuteNonQuery();
        cn.Close();
        Response.Write("Record inserted successfully");
 }
catch (Exception ex)
{
     Response.Write(ex.Message);
} 
```

}

您还应该更改逻辑以验证这`TextBox1.Text`实际上是一个有效日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:22:06.040

1.  请检查列数据类型是否设置为日期时间
2.  在插入数据库之前使用 convert.ToString

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:25:03.203

您必须进行多项更改

1.  将您的日期转换为 DateTime
2.  将值作为参数传递以避免 SQL 注入
3.  在 DB 中将该字段设置为 DateTime。

你的代码会是这样的

```
SqlConnection cn;
SqlCommand cmd;
SqlDataAdapter da;

int n=4;
protected void Page_Load(object sender, EventArgs e)
{
cn = new SqlConnection(<Connection String>);
}

protected void Button1_Click(object sender, EventArgs e)
{
    try
    {
      string query = "insert into temp values(@date))";
      cn.Open();
      cmd = new SqlCommand(query, cn);
      cmd.Parameters.AddWithValue("@date",Convert.DateTime(TextBox1.Text));
      cmd.ExecuteNonQuery();
      cn.Close();
      Response.Write("Record inserted successfully");
    }
    catch (Exception ex)
    {
     Response.Write(ex.Message);
    }

} 
```

# php - 如何将帖子数据从 javascript 发送到 php？

> ID：14661305
> 
> 赞同：-3
> 
> 时间：2013-02-02T11:15:58.797
> 
> 标签：php, javascript, post

如何将帖子数据从 javascript 发送到 php？

我有这个脚本用于在谷歌地图中定位一个点，但是从 post 发送的数据没有显示在 test.php 中。我究竟做错了什么？我需要从 js 文件中获取经度和纬度到 db。谢谢。

**pin.php**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="jqPinMyLocation.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#map_canvas').jqPinMyLocation({
            serverUrl   : 'test.php',//Server url 
            requestType : 'POST', // Type of request that we will send to server
            additionalData : {//Additional data that will be send to server after user drag the cursor
                userid: 2
            },
            address : 'Bucharest, Romania'//You need to provide the default address where the map will be centered
        });
    });
</script> 
```

**js文件**

```
var sendNewPositionToServer = function(LatLng) {
    var coordinates = {
        latitude    : LatLng.lat(),
        longitude   : LatLng.lng()
    };
    if( settings.serverUrl !== undefined ) {
        $.ajax({
            url : settings.serverUrl,

            type : (settings.requesttype !== undefined)?settings.requesttype  : 'post',
            data :$.extend(coordinates, settings.additionalData),
            success : function() {

            }
        });
    }
}; 
```

最后是我必须发送帖子数据的php文件。

```
echo $_POST['userid'];
echo $_POST['longitude']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:23:26.160

我没有为此使用 JQuery，但我使用

> 表单数据（）

（是一个js函数）用于在发布后使​​用ajax发布数据

# c - 如何证明释放链表的函数写得不好？

> ID：14661307
> 
> 赞同：1
> 
> 时间：2013-02-02T11:16:32.240
> 
> 标签：c, linux, memory-management, linked-list

关于 C 中的链表的问题。假设我们有以下结构，这些结构定义了链表中的节点和一个写得不好的 free_list 函数，（在我看来）应该会导致错误：

```
typedef struct node *nodeT;

typedef struct node
{
    int* elem;
    nodeT next;
} *nodeT;

void free_list(nodeT list)
{
    nodeT node;

    for (node = list; node; node = node->next)
    {
        free(node->elem);
        free(node);
    }
} 
```

正如你在上面看到的，我们已经将 node 定义为**nodeT**和一个释放列表**free_list**的函数。对我来说，明显的错误是在**free_list**函数里面**for**我们没有一个临时指针来存储**节点**值。

但是，当我编译代码（在 Linux 上）时，我在其中创建了一个包含少量元素的链表，程序并没有崩溃，似乎一切正常。

**我的问题是**：有没有一种简单的方法可以证明这个函数（**free_list**）写得不好？简单来说，我的意思是设置一些编译器标志（`-Wall`不显示任何错误）或使用诸如`Valgrind`（与 一起使用`memcheck`，没有太大帮助）之类的工具？

**更新**：按要求测试用例：

```
int main()
{
    nodeT myType;
    nodeT tmpPtr;

    myType = malloc(sizeof(nodeT));
    myType->item = malloc(sizeof(int));
    *(myType->item) = 0;
    myType->next = malloc(sizeof(nodeT));
    tmpPtr = myType->next;

    tmpPtr->item = malloc(sizeof(int));
    *(tmpPtr->item) = 1;
    tmpPtr->next = malloc(sizeof(nodeT));
    tmpPtr = tmpPtr->next;

    tmpPtr->item = malloc(sizeof(int));
    *(tmpPtr->item) = 2;
    tmpPtr->next = malloc(sizeof(nodeT));
    tmpPtr = tmpPtr->next;

    tmpPtr->item = malloc(sizeof(int));
    *(tmpPtr->item) = 3;
    tmpPtr->next = NULL;

    free_list(myType);

    return 0;
} 
```

这是`Valgrind`输出：

```
valgrind --tool=memcheck ./a.out
...
==4318== Invalid read of size 8
==4318==    at 0x400579: free_list (in /home/melon/a.out)
==4318==    by 0x40069E: main (in /home/melon/a.out)
==4318==  Address 0x51f1048 is 0 bytes after a block of size 8 free'd
==4318==    at 0x4C2A82E: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==4318==    by 0x400574: free_list (in /home/melon/a.out)
==4318==    by 0x40069E: main (in /home/melon/a.out)
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:25:29.000

我不确定你是如何使用 valgrind 进行测试的，但是使用默认参数它可以很好地检测到这个问题：

```
==4464== Invalid read of size 8
==4464==    at 0x400571: free_list (list.c:15)
==4464==    by 0x4005DF: main (list.c:30)
==4464==  Address 0x51e0048 is 8 bytes inside a block of size 16 free'd
==4464==    at 0x4C2AD3C: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==4464==    by 0x40056C: free_list (list.c:18)
==4464==    by 0x4005DF: main (list.c:30) 
```

我刚刚将它添加到程序中以使其可测试：

```
int main() {
    nodeT head = malloc(sizeof(struct node));
    nodeT node1 = malloc(sizeof(struct node));
    head->next = node1;
    head->elem = NULL;
    node1->next = NULL;
    node1->elem = NULL;

    free_list(head);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:18:54.677

您可以`memset`在释放内存之前将节点归零。那么它肯定会崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:21:29.173

除了代码取消引用指向已释放内存的指针之外，您不需要任何证据。那是未定义的行为。调用未定义的行为是不好的。

所以有你的证据。

# vsto - MS Project COM：使用 COM 单击功能区 UI 按钮

> ID：14661318
> 
> 赞同：0
> 
> 时间：2013-02-02T11:17:49.163
> 
> 标签：vsto, ms-project

我有 2 个不同的 .NET 项目：

1) MS Project 2010 VSTO 项目：该项目将自定义功能区（使用 XML）添加到 MS Project 的功能区 UI。此自定义功能区上有一个按钮（称为“Push_changes”）。这个项目已经被打包成一个“VSTO 包”并安装在我的本地机器上。

2) 我有另一个 .NET 控制台应用程序，它引用了 MS 项目对象库（COM 对象）。使用 COM，我能够启动 MS Project 2010 的新实例。下一步，我希望能够访问功能区（特别是我在步骤 1 中使用 VSTO 项目添加的功能区）。然后我想进入“Push_changes”按钮并单击它（通过代码）。

现在我尝试通过 CommandBars 集合，但它似乎不包含与“功能区”相关的任何内容。通过 CommandBars 集合枚举，我可以看到有一个名为“Ribbon”的 CommandBar，但它说它上面有“0”控件。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:34:35.813

使用功能区实现附加组件的程序集包含一个继承自`Microsoft.Office.Core.IRibbonExtensibility`.

该类的公共方法之一实现了 onClick 操作。

您可以通过名称访问 COM 加载项集合`Application.COMAddIns`并访问该加载项。

# c++ - 如何使用rapidjson（实现的序列化）将对象序列化为std :: string？

> ID：14661320
> 
> 赞同：2
> 
> 时间：2013-02-02T11:18:11.260
> 
> 标签：c++, json

如何使用 rapidjson 将对象序列化为 std::string？我已经实施

```
class Person{
public:
    std::string name;
    uint64 id; // uint64 is typedef

    template <typename Writer>
    void Serialize(Writer& writer) const {
        writer.StartObject();
        writer.String("name");
        writer.String(name);
        writer.String(("id"));
        writer.Uint64(id);
        writer.EndObject();
    }
     std::string serialize(){
        FileStream s(stdout);
        PrettyWriter<FileStream> writer(s);   
        Serialize(writer);
        return  ? /// There is a problem

    }
} 
```

问题在于序列化函数要返回什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-11T12:01:49.353

问题已经很老了，如果您仍在寻找答案，那么这是@Lightness Races in Orbit 建议的问题

```
class Person{
public:
    std::string name;
    uint64 id; // uint64 is typedef

    template <typename Writer>
    void Serialize(Writer& writer) const {
        writer.StartObject();
        writer.String("name");
        writer.String(name);
        writer.String(("id"));
        writer.Uint64(id);
        writer.EndObject();
    }
     std::string serialize(){
        StringBuffer s;
        Writer<StringBuffer> writer(s);
        Serialize(writer);
        return  s.GetString();
    }
} 
```

您还可以在此处查看示例代码：[simplewriter.cpp](https://github.com/miloyip/rapidjson/blob/master/example/simplewriter/simplewriter.cpp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:32:20.067

没有什么。您已经将它发送到`stdout`。

如果您不想将输出流式传输到文件，请不要使用`FileStream`; 使用其他一些模板参数来`PrettyWriter`存储并允许您提取字符串。

快速浏览一下文档，[`StringBuffer`](http://code.google.com/p/rapidjson/source/browse/trunk/include/rapidjson/stringbuffer.h)看起来很有希望。它是`GenericStringBuffer<UTF8<> >`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:32:48.473

尝试这个：

```
std::string serialize() {
  GenericStringBuffer<UTF8<> > buffer;
  Writer<GenericStringBuffer<UTF8<> > > writer(buffer);

  Serialize(writer);

  return buffer.GetString();
} 
```

# asp.net-mvc-4 - 弹出窗口在 KendoUI 网格中的工作原理以及如何在 MVC4 的 KendoUI ajax 网格中弹出控件

> ID：14661321
> 
> 赞同：-3
> 
> 时间：2013-02-02T11:18:12.070
> 
> 标签：asp.net-mvc-4, kendo-ui

单击编辑按钮时弹出窗口的工作原理以及如何将三个 Combobox 带入弹出窗口。我真的对下面的代码感到困惑

```
Client side Code

    //show server errors if any
    function error_handler(e) {
        if (e.errors) {
            var message = "Errors:\n\n";
            $.each(e.errors, function (key, value) {
                if ('errors' in value) {
                    $.each(value.errors, function () {
                        message += this + "\n\n";
                    });
                }
            });
            alert(message);
        }
    }

@(Html.Kendo().Grid(Model)
    .Name("SchoolGrid")
    .Columns(columns =>
    {
        columns.Bound(p => p.SchoolID).Width("80px");
        columns.Bound(p => p.Name);
        columns.Bound(p => p.Campus).Width("90px");
        columns.Bound(p => p.StateCode).Width("90px");
        columns.Bound(p => p.SectorCode).Width("95px");
        columns.Bound(p => p.MDISurveyStartDate).ClientTemplate("#= (MDISurveyStartDate == null) ? 'Not Set' : kendo.toString(MDISurveyStartDate, 'dd/MM/yyyy') #").Width("90px");
        columns.Bound(p => p.MDISurveyEndDate).ClientTemplate("#= (MDISurveyEndDate == null) ? 'Not Set' : kendo.toString(MDISurveyEndDate, 'dd/MM/yyyy') #").Width("90px");
        columns.Command(command => { command.Edit(); command.Destroy(); }).Width("190px").HtmlAttributes(new { style = "text-align:center" });
    })
    .ToolBar(tb => tb.Create().Text("Add New School"))
    .Editable(ed => ed.Mode(GridEditMode.PopUp).TemplateName("EditSchool").Window(w => w.Title("Add/Edit School Details").Name("editWindow").Width(600)))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model => model.Id(p => p.ClientID))
        .Events(e => e.Error("error_handler"))
        .Read("Read_Schools", "School")
        .Update("Update", "School")
        .Create("Create", "School")
        .Destroy("Destroy", "School")
    )
)

Server Side Code:-

        [HttpPost]
        public ActionResult Update([DataSourceRequest] DataSourceRequest request, School school)
        {
            try
            {
                if (ModelState.IsValid)
                {
                    string errMsg = "";
                    if (!_Service.UpdateSchool(school, out errMsg))
                        ModelState.AddModelError("UpdateSchool", errMsg);
                }
            }
            catch (Exception ex)
            {
                ModelState.AddModelError("UpdateSchool", ex.Message);
            }

            return Json(ModelState.ToDataSourceResult());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:05:25.810

[有代码库](http://www.kendoui.com/code-library/mvc/grid/custom-popup-editor.aspx)显示如何操作窗口的内容。其余的编辑可以通过 Grid 的**edit**事件进行（查看文档）。

# android - 结束通话后活动在眨眼间关闭

> ID：14661332
> 
> 赞同：0
> 
> 时间：2013-02-02T11:19:15.470
> 
> 标签：android, service, android-activity, phone-state-listener

当来电结束时，我正在从我的服务中调用活动，如下所示

```
Intent callIntent1 = new Intent(Intent.ACTION_CALL); 
callIntent1.addCategory(Intent.CATEGORY_HOME);
callIntent1.addCategory(Intent.CATEGORY_LAUNCHER);
callIntent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
callIntent1.setClass(context, com.example.test.MyActivity.class);
Log.d("TAG", "MyActivity");
startActivity(callIntent1); 
```

但我的活动开始闪烁并关闭，我看到主屏幕，我的日志显示给的电话`MyActivity`，我找不到原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:14:08.403

我认为这是因为您没有以正确的方式使用您的意图类别。如果您显式调用 startActivity 方法，则无需向您的意图添加类别。我猜它们应该与意图过滤器一起使用。如果您想检测某些东西，例如电话、文本等，请在您的活动中添加一个意图过滤器。

编辑：见[这里](https://stackoverflow.com/questions/7365732/what-are-the-purpose-of-intent-categories)

# css - 始终在单行中显示水平菜单栏项

> ID：14661334
> 
> 赞同：0
> 
> 时间：2013-02-02T11:19:26.217
> 
> 标签：css

我正在创建一个动态获取其菜单项的水平导航栏。但是我在水平显示列表项时遇到问题。每当列表项超出列表容器的宽度时，它们就会在容器内创建一个新行。我想让所有列表项始终出现在一行中。并且无论列表有多长，用户都只会水平滚动菜单

我已经为 ul 使用了样式

```
ul{ 
    background-color:yellow;
   position:absolute;
    height:80px;
overflow:auto;
    list-style:none;
    display:table-row;
} 
```

而对于李

```
li{
    margin:10px;
    display:inline-block;
} 
```

[演示小提琴](http://jsfiddle.net/gLbeK/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:29:09.257

```
ul{ 
    background-color:yellow;
    height:80px;
    overflow-x: auto;
    overflow-y: hidden;
    list-style:none;
    white-space: nowrap;
} 
```

[演示](http://jsfiddle.net/wdWpS/1/)

# c# - 何时清理命令绑定控件？

> ID：14661338
> 
> 赞同：0
> 
> 时间：2013-02-02T11:19:50.570
> 
> 标签：c#, wpf, button, user-controls, commandbinding

我有一个用户控件，它有一个`CheckBox`、一个`Button`和一个`CommandBinding`。如果`CheckBox`选中 ，`Button`则启用 。`MainWindow`使用`UserControl`. _ `Button`按下主窗口中的 时，会`UserControl`从 UI 中删除并`GC.Collect()`调用，但`CanExecute`方法仍会运行。

我发现如果我在主窗口中单击两次按钮，`CanExecute`将不再运行。看来我没有`GC.Collect()`在合适的时间打电话。

我想知道什么是调用 GC 清理未使用的用户控件的好时机，这样`CanExecute`就不会被调用。

`XAML`

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <RoutedUICommand x:Key="okCommand" Text="OK"/>
    </UserControl.Resources>
    <UserControl.CommandBindings>
        <CommandBinding Command="{StaticResource okCommand}" CanExecute="CommandBinding_CanExecute_1"/>
    </UserControl.CommandBindings>
    <StackPanel>
        <CheckBox Name="checkBox" Content="CheckBox"/>
        <Button Command="{StaticResource okCommand}" Content="{Binding Path=Text, Source={StaticResource okCommand}}"/>
    </StackPanel>
</UserControl> 
```

`Code behind`

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    private void CommandBinding_CanExecute_1(object sender, CanExecuteRoutedEventArgs e)
    {
        e.CanExecute = checkBox.IsChecked.GetValueOrDefault(false);

        System.Media.SystemSounds.Beep.Play();
    }
} 
```

`MainWindow`

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Loaded="Window_Loaded_1">
    <StackPanel>
        <Border Name="container"/>

        <Button Content="Set Null" Click="Button_Click_1"/>
    </StackPanel>
</Window> 
```

`Code behind`

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        container.Child = null;

        GC.Collect();
        GC.WaitForPendingFinalizers();
    }

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {
        UserControl1 uc = new UserControl1();
        container.Child = uc;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:49:25.917

使用网格作为容器和 Container.Clear() 方法，忘记 GC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:00:19.650

我找到了另一个解决方案。也就是`CommandBindings.Clear()`卸载时调用UserControl1。

我相信这是一种巧妙的方式，因为 UserControl1 的调用者不负责 UserControl1 的清理工作。

# javascript - 在backbonejs中销毁模型后从数据表中删除一行

> ID：14661342
> 
> 赞同：1
> 
> 时间：2013-02-02T11:20:00.717
> 
> 标签：javascript, backbone.js, datatable

我在数据表中显示我的集合中的行。我有一个销毁模型的视图，一旦完成，我需要删除数据表中的相应行。我能够销毁模型，但不知道如何删除该特定行。处理行的视图是这样的：

```
var rowRow = Backbone.View.extend({
  tagName: "tr",
  events: {
    'click .edit':'editrow',
    'click .delete':'deleterow'
  },

  render: function() {
    data = this.model.toJSON();

    this.$el.html('<td>'+data.name+'</td><td>'+data.email+'</td><td>'+data.contact_number+'</td><td><span id="delete'+data.id+'" class="delete">Delete</span> | <span class="edit">Edit</span></td>');
    return this;
  },

  editrow: function(){
    alert("edit");
  },

  deleterow: function() {
    var data = this.model.toJSON();

    this.model.destroy({ wait: true, success: function(){ }});
  }
}) 
```

模型销毁后，如何删除数据表中的特定行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:03:12.903

我想 this.$el.remove() 应该从 DOM 中删除整行。

Stack 上的帖子也放了这段代码：（[https://stackoverflow.com/a/11534056/968988](https://stackoverflow.com/a/11534056/968988)）

```
destroy_view: function() {

    //COMPLETELY UNBIND THE VIEW
    this.undelegateEvents();

    this.$el.removeData().unbind(); 

    //Remove view from DOM
    this.remove();  
    Backbone.View.prototype.remove.call(this);
} 
```

我认为下一个版本的 Backbone 将为此提供帮助。

# ios - 如何重新加载导航栏

> ID：14661343
> 
> 赞同：13
> 
> 时间：2013-02-02T11:20:08.733
> 
> 标签：ios, uitableview, uinavigationbar, uibarbuttonitem

在`UITableView`我`self.navigationItem.leftBarButtonItem`用一个按钮配置。现在我想重新加载此按钮以更新此按钮上的文本，但它在`Navigation bar`. `UITableView`我可以更新

```
 [self.tableView reloadData] 
```

但是如何更新导航栏？

更新：我不是初始化按钮的标题，而是重新加载它。所以任何初始化代码（例如`self.navigationItem.leftBarButtonItem.title = @"balabala"`）都不起作用，因为它不会立即生效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:24:40.407

只需更改 leftBarButtonItem 上的文本？

```
self.navigationItem.leftBarButtonItem.title = @"Back"; // or whatever text you want 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:26:09.680

尝试这个

```
UIBarButtonItem *btnBack = [[UIBarButtonItem alloc]
                               initWithTitle:@"Title" 
                               style:UIBarButtonItemStyleBordered
                               target:self
                               action:@selector(OnClick:)];
self.navigationItem.leftBarButtonItem = btnBack; 
```

希望这可以帮助你..

编辑 ：-

```
UIBarButtonItem *btnBack = [[UIBarButtonItem alloc] initWithTitle: @"Title" style: UIBarButtonItemStyleBordered target:self action:@selector(OnClick:)];

[[self navigationItem] setBackBarButtonItem: btnBack]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-24T09:29:57.580

尝试这个：

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc]
                                   initWithTitle:@"your_title"
                                   style:UIBarButtonItemStyleBordered
                                   target:self
                                   action:@selector(backBtnPressed:)];
    self.navigationItem.leftBarButtonItem = backButton; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T11:27:22.877

您是否尝试设置文本，使用

```
self.navigationItem.leftBarButtonItem.title 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-23T15:31:03.957

如果您想更改 NavigationBar 标题，请尝试以下方法之一：

```
[self.navigationController.navigationItem setTitle:@"Title"];
[self.navigationItem setTitle:@"Title"];
[self setTitle:@"Title"]; 
```

如果您想更改按钮标题，请将其放在同一类中：

```
- (void)setLeftBarButtonTitle:(NSString *)title action:(SEL)selector
{
    UIBarButtonItem *leftButton = [[UIBarButtonItem alloc] initWithTitle:title style:UIBarButtonItemStyleBordered target:self action:selector];
    [self.navigationItem setLeftBarButtonItem:leftButton];
}

- (void)setRightBarButtonTitle:(NSString *)title action:(SEL)selector
{
    UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:title style:UIBarButtonItemStyleBordered target:self action:selector];
    [self.navigationItem setRightBarButtonItem:rightButton];
} 
```

设置按钮标题和操作的示例：

```
// Change button titles and actions any time
[self setLeftBarButtonTitle:@"Back" action:@selector(goBack)];
[self setRightBarButtonTitle:@"Something" action:@selector(doSomething:)];

// Change button titles with no actions
[self setLeftBarButtonTitle:@"Nothing" action:nil];
[self setRightBarButtonTitle:@"Nothing" action:nil];

// Remove buttons from navigation bar
[self.navigationItem setLeftBarButtonItem:nil];
[self.navigationItem setRightBarButtonItem:nil]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-27T21:35:53.333

您需要使用以下语句：

```
self.navigationItem setLeftBarButtonItem:cancelButton animated:YES]; 
```

换句话说，您需要 setLeftBarButtonItem:**动画**消息而不是标准消息。这将重新加载带有动画的按钮文本。如果您有兴趣在某个时候更改后退按钮，这同样适用于后退按钮。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-23T14:50:31.223

```
 @interface Myviewcontroller : UIViewController
{
       UIBarButtonItem *barBtnBack;
       UIButton *btnQuestion;
} 
```

//ViewdidLoad

```
 btnQuestion = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 20, 25)];
        [btnQuestion setBackgroundImage:[UIImage imageNamed:@"question-mark2x"] forState:UIControlStateNormal];
        [btnQuestion addTarget:self action:@selector(goBacktomain)
              forControlEvents:UIControlEventTouchUpInside];
        barBtnBack =[[UIBarButtonItem alloc] initWithCustomView:btnQuestion];
    [self.navigationItem setLeftBarButtonItem:barBtnBack]; 
```

注意-当您想更改导航按钮标题时更改 btnQuestion 标题

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-17T10:12:52.310

我在 Swift 中解决了它，但是如果显示键盘，它就会隐藏。

`navigationController?.loadView()`

# cuda - 并行归约示例

> ID：14661346
> 
> 赞同：1
> 
> 时间：2013-02-02T11:20:24.180
> 
> 标签：cuda, shared-memory, reduction

我从斯坦福找到[了这个](http://code.google.com/p/stanford-cs193g-sp2010/source/browse/trunk/tutorials/sum_reduction.cu)使用共享内存的并行缩减代码。

该代码是 1<<18 个元素的示例，它等于 262144 并得到正确的结果。

为什么对于某些数量的元素我得到正确的结果，而对于其他数量的元素，如 200000 或 25000，我得到的结果与预期不同？在我看来，它总是在指定所需的线程块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:54:57.713

```
// launch a single block to compute the sum of the partial sums
block_sum<<<1,num_blocks,num_blocks * sizeof(float)>>> 
```

此代码导致错误。

假设 numblocks 是 13，

然后在内核 blockDim.x / 2 中将是 6，并且

```
if(threadIdx.x < offset)
{
    // add a partial sum upstream to our own
    sdata[threadIdx.x] += sdata[threadIdx.x + offset]; 
} 
```

只会添加导致错误的前 12 个元素。

当元素计数为 200000 或 250000 时，num_blocks 将是奇数并导致错误，对于偶数 num_blocks 它将正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:59:45.930

该内核对内核的阻塞参数（网格和线程块大小）敏感。您是否使用足够的线程来调用它来覆盖输入大小？

使用 for 循环来制定这样的内核更加健壮 - 而不是：

```
unsigned int i = blockIdx.x * blockDim.x + threadIdx.x; 
```

就像是：

```
for ( size_t i = blockIdx.x*blockDim.x + threadIdx.x;
      i < N;
      i += blockDim.x*gridDim.x ) {
    sum += in[i];
} 
```

CUDA 手册中的源代码有很多“阻塞不可知”代码的示例。减少代码在这里：

[https://github.com/ArchaeaSoftware/cudahandbook/tree/master/reduction](https://github.com/ArchaeaSoftware/cudahandbook/tree/master/reduction)

# grails - 参考 在 grails 标签库中

> ID：14661348
> 
> 赞同：0
> 
> 时间：2013-02-02T11:20:46.323
> 
> 标签：grails, groovy, gsp, taglib

我创建了一个 tmpl gsp 标记，其中包含一些标记，这些标记在我的 webapp (/shared/formRow.gsp) 中的整个表单中使用。我想在我创建的 groovy taglib 中引用这个 tmpl gsp 标签。这可能吗？

这是我的标签库中的def ...

```
def checkboxRow = { attrs ->
    def name = attrs.name
    def value = attrs.value
    def label = attrs.label
    def defaultLabel = attrs.defaultLabel

    out << "<tmpl:/shared/formRow name='${name}' label='${label}' defaultLabel='${defaultLabel}'>"
    out << "    ${checkBox(id: name, name: name, value: value)}"
    out << "</tmpl:/shared/formRow>"
} 
```

我意识到 taglibs 中的语法有点不同（例如，您需要执行 ${checkBox(...)} 而不是 ），但是是否可以以类似的方式引用您自己的 tmpl gsp 标签？如果是这样，我会使用什么语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:13:19.210

好吧，事实证明它在 Grails 文档中，[这里](http://grails.org/doc/latest/guide/single.html#taglibs)是。

你应该像这样调用渲染模板方法：

```
def formatBook = { attrs, body ->
    out << render(template: "bookTemplate", model: [book: attrs.book])
} 
```

真的很简单！

# algorithm - 如何为动态规划算法找到合适的公式

> ID：14661354
> 
> 赞同：3
> 
> 时间：2013-02-02T11:21:17.660
> 
> 标签：algorithm, dynamic-programming, recurrence

我正在阅读有关动态编程的信息。我读到它才能精通它，需要练习和直觉，但这个建议对我来说似乎很笼统。
对我来说最难的部分是找出一个递归公式。有时，解决方案中使用的公式对我来说似乎并不那么直观。
例如，我阅读了以下问题：

> 你有 2 个字符串 S 和 T。给出一个算法来找出 S 在 T 中出现的次数。并不是 S 的所有字符都必须在 T 中连续出现。

解决方案基于以下递归公式，对我来说这根本不直观：

> 假设 M(i, j) 表示 S 的 i 个字符出现在 T 的 j 个字符中的次数。基本情况：
> i) 如果 j = 0 则为 0
> ii) 如果 i = 0 则为 1

我想知道是否有某种问题的“分析”有助于定义/找到通过 DP 解决问题的正确递归公式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:31:47.600

维基百科对它的描述非常好，[这里](http://en.wikipedia.org/wiki/Dynamic_programming)：
“在数学、计算机科学和经济学中，动态编程是一种通过将复杂问题分解为更简单的子问题来解决复杂问题的方法。它适用于表现出重叠子问题的问题-问题和最佳子结构（如下所述）。在适用时，该方法比简单方法花费的时间要少得多。

另请阅读有关重叠子问题和最佳子结构的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-10T20:46:11.350

也许这个链接有用：
[https ://www.geeksforgeeks.org/solve-dynamic-programming-problem/](https://www.geeksforgeeks.org/solve-dynamic-programming-problem/) [https://www.geeksforgeeks.org/tabulation-vs-memoization/](https://www.geeksforgeeks.org/tabulation-vs-memoization/)
1.如何将问题分类为动态编程问题？
2\. 决定状态
3\. 制定状态之间的关系
4\. 为状态添加记忆或制表

# windows-phone-7 - 在 WP7 项目中引用 silverlight 类库

> ID：14661356
> 
> 赞同：0
> 
> 时间：2013-02-02T11:21:25.543
> 
> 标签：windows-phone-7, dll, silverlight-4.0

我使用 silverlight 4 创建了一个简单的测试类库，我想在我的 WP7 项目中使用它。

我在 WP7 项目中引用了 dll，无法使用我创建的控件。在使用控件之前，我需要知道应该将什么语句添加到我的 xaml 文件中。

这是类库的 xaml 文件（只有一个矩形）：

```
<UserControl x:Class="NabbeshControls.ProfileBox"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <Rectangle Fill="#FFABABFF" Margin="10" Stroke="Black"/>
    </Grid>
</UserControl> 
```

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:16:10.283

假设库中控件的命名空间是“NabbeshControls”并且 dll 称为“Nabbesh.dll”，请将以下内容添加到您要使用它的 XAML 的顶部：

```
 xmlns:tryNabbesh="clr-namespace:NabbeshControls;assembly=Nabbesh" 
```

# php - PHP GD 库 - 在将一个 gd 半透明图像覆盖在另一个上时发现意外的白点

> ID：14661359
> 
> 赞同：1
> 
> 时间：2013-02-02T11:22:03.843
> 
> 标签：php, image-processing, gd

我已经在这个项目上工作了好几天，由于某种原因，我无法摆脱在处理的每个图块中出现的意外 1px x 1px（大约）白点。

## 概括：

我正在使用原始图像（例如 original.jpeg ）作为参考，通过合并更小的 jpeg 图像（大约 10 像素 x 10 像素）来创建马赛克图像（例如，mosaic.jpeg，大约 1000 像素 x 1000 像素）。

我有大约 20,000 张平铺图像的数据集可供使用。

## 到目前为止的过程

1.  我已经映射了 original.jpeg 图像以将其切割成 5 x 5 像素的图块，然后找到每个图块的平均颜色并将其保存以供进一步使用。
2.  我已经扫描了所有 (10x10) 平铺图像并存储了它们各自的平均颜色。
3.  我已经通过使用加权参考计算出哪个平铺图像最适合原始图像的哪个平铺：距所提及站点的[欧几里得距离](http://www.compuphase.com/cmetric.htm)。
4.  我设法使用 PHP gd 库创建了一个新的真彩色图像，所有匹配的瓷砖都放置在正确的位置（从而有效地创建了 original.jpeg 图像的马赛克）

## 问题

我没有得到我预期的清晰马赛克，由于某种原因瓷砖不匹配。

## 解决方法

现在由于时间不够，我使用了一个快速修复方法，在我拍摄原始图像的地方，给它一些 50% 的不透明度，并在将其放入最终马赛克时将其覆盖在每个图块的顶部。

注意：虽然我有效地将原始图像覆盖在马赛克图像上，但我并没有一次性完成。覆盖必须发生在每个图块级别。

简而言之：在将每个图块放置在最终马赛克的正确位置之前，我执行以下操作 1\. 获取原始图像的特定部分 (5x5px) 2\. 将其扩展以匹配最终图块大小 (10x10px) 3\. 设置部分的透明度 4\. 将其放在将要放置的瓷砖上 5\. 将此新瓷砖合并到相应位置的最终马赛克上。

这是我创建的功能，用于覆盖图像的一部分以及为其设置的透明度。

```
public function overlay($dImg, $sImg, $opacity = null) {

    // set default Opacity if not specified
    $opacity = (is_null($opacity)) ? $this->opacity : $opacity;

    // get width, height of sourceImage
    $sWidth = imagesx($sImg);
    $sHeight = imagesy($sImg);

    // get width height of final image
    $dWidth = imagesx($dImg);
    $dHeight = imagesy($dImg);

    $image = imagecreatetruecolor($dWidth, $dHeight);
    imagecopyresampled($image, $sImg, 0, 0, 0, 0, $dWidth, $dHeight, $sWidth, $sHeight);

    $background = imagecolorallocatealpha($image, 255, 255, 255, 127);        
    imagefill($image, 0, 0, $background);

    imagealphablending($image, true);

    imagecopymerge($dImg, $image, 0, 0, 0, 0, $dWidth, $dHeight, $opacity);

    imagedestroy($image);

    return $dImg;
} 
```

## 真正的问题

从理论上讲，这一切似乎都很好。但结果对此事有自己的发言权。

我注意到在最终马赛克的每一块瓷砖的开头都有一个不寻常的几乎 1x1 像素的白色补丁。

只有在应用上述透明度技术时，才会出现此白色补丁。否则不会发生。

我不知道为什么会发生这种情况，由于这个白色补丁，整个图像看起来像是到处都是白噪声，并且极大地降低了整体质量。

请指导我了解为什么会发生这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:08:11.487

你的问题在于这两行：

```
$background = imagecolorallocatealpha($image, 255, 255, 255, 127);        
imagefill($image, 0, 0, $background); 
```

您不需要这些，因为 imagefill 用于填充具有相同/相似颜色的区域与位于提供的坐标上的颜色，在您的情况下为 0, 0（左上角），当没有相邻的相似颜色时，然后它只是改变给定坐标的颜色。

您可以改用**imagefilledrectangle**，但我仍然认为您不需要，只需注释掉这两行并查看结果是否符合您的要求，如果不符合，请继续使用**imagefilledrectangle**

[图像填充矩形](http://www.php.net/manual/en/function.imagefilledrectangle.php)

# python - 如何在 Python 中使用 Beautifulsoup 从 HTML 中提取标签

> ID：14661368
> 
> 赞同：3
> 
> 时间：2013-02-02T11:23:24.663
> 
> 标签：python, html, parsing, beautifulsoup, scrape

我正在尝试解析一个简化的 HTML 页面，如下所示：

```
<div class="anotherclass part"
  <a href="http://example.com" >
    <div class="column abc"><strike>&#163;3.99</strike><br>&#163;3.59</div>
    <div class="column def"></div>
    <div class="column ghi">1 Feb 2013</div>
    <div class="column jkl">
      <h4>A title</h4>
      <p>
        <img class="image" src="http://example.com/image.jpg">A, List, Of, Terms, To, Extract - 1 Feb 2013</p>
    </div>
  </a>
</div> 
```

我是python编码的初学者，我已经阅读并重新阅读了[http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html上的beautifulsoup文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)

我有这个代码：

```
from BeautifulSoup import BeautifulSoup

with open("file.html") as fp:
  html = fp.read()

soup = BeautifulSoup(html)

parts = soup.findAll('a', attrs={"class":re.compile('part'), re.IGNORECASE} )
for part in parts:
  mypart={}

  # ghi
  mypart['ghi'] = part.find(attrs={"class": re.compile('ghi')} ).string
  # def
  mypart['def'] = part.find(attrs={"class": re.compile('def')} ).string
  # h4
  mypart['title'] = part.find('h4').string

  # jkl
  mypart['other'] = part.find('p').string

  # abc
  pattern = re.compile( r'\&\#163\;(\d{1,}\.?\d{2}?)' )
  theprices = re.findall( pattern, str(part) )
  if len(theprices) == 2:
    mypart['price'] = theprices[1]
    mypart['rrp'] = theprices[0]
  elif len(theprices) == 1:
    mypart['price'] = theprices[0]
    mypart['rrp'] = theprices[0]
  else:
    mypart['price'] = None
    mypart['rrp'] = None 
```

我想从类中提取任何文本，`def`并且`ghi`我认为我的脚本正确。

我还想提取`abc`我的脚本目前以相当笨重的方式执行的两个价格。有时这部分有两种价格，有时一种，有时没有。

最后，我想从我的脚本无法执行`"A, List, Of, Terms, To, Extract"`的类中提取部分。`jkl`我认为获取标签的字符串部分`p`会起作用，但我不明白为什么它不起作用。这部分中的日期始终与课堂上的日期相匹配，`ghi`因此应该很容易替换/删除它。

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:03:33.077

首先，如果您添加`convertEntities=bs.BeautifulSoup.HTML_ENTITIES`到

```
soup = bs.BeautifulSoup(html, convertEntities=bs.BeautifulSoup.HTML_ENTITIES) 
```

那么 html 实体如`&#163;`将被转换为它们对应的 unicode 字符，如`£`. 这将允许您使用更简单的正则表达式来识别价格。

* * *

现在，给定，您可以使用其属性在价格`part`中找到文本内容：`<div>``contents`

```
In [37]: part.find(attrs={"class": re.compile('abc')}).contents
Out[37]: [<strike>£3.99</strike>, <br />, u'\xa33.59'] 
```

我们需要做的就是从每个项目中提取数字，如果没有数字则跳过它：

```
def parse_price(text):
    try:
        return float(re.search(r'\d*\.\d+', text).group())
    except (TypeError, ValueError, AttributeError):
        return None

price = []
for item in part.find(attrs={"class": re.compile('abc')}).contents:
    item = parse_price(item.string)
    if item:
        price.append(item) 
```

此时`price`将是 0、1 或 2 个浮点数的列表。我们想说

```
mypart['rrp'], mypart['price'] = price 
```

`price`但如果是`[]`或仅包含一项，那将不起作用。

你处理这三种情况的方法`if..else`是可以的——这是最直接的，可以说是最易读的方法。但这也有点世俗。如果您想要更简洁的内容，可以执行以下操作：

由于如果只包含一件商品，我们想重复相同的价格`price`，您可能会被引导考虑[itertools.cycle](http://docs.python.org/2/library/itertools.html#itertools.cycle)。

在 where`price`是空列表的情况下`[]`，我们想要`itertools.cycle([None])`，否则我们可以使用`itertools.cycle(price)`。

所以要将这两种情况组合成一个表达式，我们可以使用

```
price = itertools.cycle(price or [None])
mypart['rrp'], mypart['price'] = next(price), next(price) 
```

该函数将迭代器中的值一一`next`剥离。`price`既然`price`是循环通过它的价值观，它永远不会结束；它只会继续按顺序产生值，然后在必要时重新开始——这正是我们想要的。

* * *

`A, List, Of, Terms, To, Extract - 1 Feb 2013`可以通过使用属性再次获得`contents`：

```
# jkl
mypart['other'] = [item for item in part.find('p').contents
                   if not isinstance(item, bs.Tag) and item.string.strip()] 
```

* * *

因此，完整的可运行代码如下所示：

```
import BeautifulSoup as bs
import os
import re
import itertools as IT

def parse_price(text):
    try:
        return float(re.search(r'\d*\.\d+', text).group())
    except (TypeError, ValueError, AttributeError):
        return None

filename = os.path.expanduser("~/tmp/file.html")
with open(filename) as fp:
    html = fp.read()

soup = bs.BeautifulSoup(html, convertEntities=bs.BeautifulSoup.HTML_ENTITIES)

for part in soup.findAll('div', attrs={"class": re.compile('(?i)part')}):
    mypart = {}
    # abc
    price = []
    for item in part.find(attrs={"class": re.compile('abc')}).contents:
        item = parse_price(item.string)
        if item:
            price.append(item)

    price = IT.cycle(price or [None])
    mypart['rrp'], mypart['price'] = next(price), next(price)

    # jkl
    mypart['other'] = [item for item in part.find('p').contents
                       if not isinstance(item, bs.Tag) and item.string.strip()]

    print(mypart) 
```

产生

```
{'price': 3.59, 'other': [u'A, List, Of, Terms, To, Extract - 1 Feb 2013'], 'rrp': 3.99} 
```

# linux - 如何在 UNIX 上的 $PATH 中转义冒号 (:)？

> ID：14661373
> 
> 赞同：41
> 
> 时间：2013-02-02T11:23:42.590
> 
> 标签：linux, path, escaping, environment-variables

我需要`$PATH`在我的应用程序中解析环境变量。所以我想知道哪些转义字符在`$PATH`. 我创建了一个名为的测试目录`/bin:d`，并在其中创建了一个名为的测试脚本 `funny`。如果我用绝对路径调用它，它就会运行。我只是不知道如何转义`:`，`$PATH`我尝试使用转义冒号`\`并将其包装成单引号`'`和双`"`引号。但总是在我运行`which funny`时找不到它。我正在运行 CentOS 6。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-03-23T14:59:06.300

根据 POSIX 标准，这是不可能的。这不是特定 shell 的函数，PATH 处理是在 C 库中的 execvp 函数中完成的。没有任何形式的引用的规定。

这就是为什么强烈建议不要包含某些字符（不在“可移植文件名字符集”中的任何字符 - 冒号被特别指出作为示例。）的原因。

从[SUSv7](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap08.html#tag_08_03)：

> 由于`<colon>`是此上下文中的分隔符，因此可能在 PATH 中使用的目录名称不应包含`<colon>`字符。

另请参阅[GLIBC execvp 的来源](https://github.com/zerovm/glibc/blob/master/posix/execvp.c)。我们可以看到它使用`strchrnul`和`memcpy`函数来处理 PATH 组件，绝对没有提供跳过或取消转义任何类型的转义字符。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-02T11:38:22.807

看着这个功能 [`extract_colon_unit`](http://opensource.apple.com/source/bash/bash-29/bash/general.c) ，在我看来这是不可能的。无条件且不可避免地`:`用作路径分隔符。

好吧，这至少对*bash*有效。其他外壳可能会有所不同。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-08T01:29:51.023

你可以`mount`试试看

```
mount /bin:d /bind
PATH=/bind 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-02-08T15:21:50.667

根据[http://tldp.org/LDP/abs/html/special-chars.html](http://tldp.org/LDP/abs/html/special-chars.html)单引号应该保留所有特殊字符，所以不尝试它，我认为 '/bin:d' 可以工作（with）in $路径。

# objective-c - NSXPCConnection 通过代理传递对象

> ID：14661375
> 
> 赞同：10
> 
> 时间：2013-02-02T11:23:54.637
> 
> 标签：objective-c, xpc, nsxpcconnection

[Daemons and Services Programming Guides](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html#//apple_ref/doc/uid/10000172i-SW6-SW6)告诉我们可以通过打开的 XPC 连接返回代理对象，甚至作为回复块参数。

### 通过代理传递对象

> 大多数时候，复制对象并将它们发送到连接的另一端是有意义的。然而，这并不总是可取的。尤其：
> 
> 如果您需要在客户端应用程序和助手之间共享数据的单个实例，则必须通过代理传递对象。如果一个对象需要调用应用程序中其他对象上的方法，而这些方法您不能或不希望通过连接传递（例如用户界面对象），那么您必须通过代理传递一个对象——调用者、被调用者（其中可能），或者您专门为此目的构建的中继对象。通过代理传递对象的缺点是性能显着降低（因为对对象的每次访问都需要进程间通信）。因此，如果无法通过复制传递对象，则应仅通过代理传递对象。
> 
> 您可以配置其他代理对象，类似于配置初始连接的 remoteObjectInterface 属性的方式。首先，确定应该由代理传递方法的哪个参数，然后指定一个 NSXPCInterface 对象，该对象定义该对象的接口。

第一个问题来了：代理传递的对象应该如何定义？作为符合 NSXPCProxyCreating 协议的对象？那么是否应该实现 remoteObjectProxy 和 remoteObjectProxyWithErrorHandler: 方法？

下面是一个例子，这对我来说根本不清楚。特别是我不明白我应该在哪里调用 NSXPCInterface 方法 (setInterface:forSelector:argumentIndex:ofReply:) 将参数作为代理列入白名单：在 XPC 服务代码或主机中？

> 方法的第一个参数是参数 0，然后是参数 1，依此类推。
> 
> 在这种情况下，为 ofReply 参数传递值 NO，因为此代码正在修改方法本身的参数之一的白名单。如果您将方法的回复块的参数的类列入白名单，请改为传递 YES。

所以问题是：任何人都可以为我提供一个关于如何在 XPC 方法调用的块回复中将对象作为代理返回的清晰教程吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-02T16:03:43.050

我现在可以回答我自己的问题：要在 XPC 方法调用的块回复中返回一个对象作为代理，应该同时调用 setInterface:forSelector:argumentIndex:ofReply: 方法：

*   在 XPC 服务的端点中，其中`exportedInterface`声明了
*   在主机中，`remoteObjectInterface`声明了

即，通用代码：

```
// common (service/host) protocol definition
@protocol Service
@end

@protocol ServiceFactory
-(void)connectToNewService: (void (^)(id<Service>)reply;
@end 
```

在 XPC 服务中：

```
// Implement the one method in the NSXPCListenerDelegate protocol.
-(BOOL)listener:(NSXPCListener *)listener shouldAcceptNewConnection:(NSXPCConnection*)newConnection {   

    NSXPCInterface *serviceFactoryInterface =[NSXPCInterface interfaceWithProtocol:@protocol(ServiceFactory)];
    NSXPCInterface *serviceInterface =[NSXPCInterface interfaceWithProtocol:@protocol(Service)];

    // connection has to be returned as proxy, not as a copy
    [serviceFactoryInterface setInterface: serviceInterface
                          forSelector: @selector(connectToNewService:)
                        argumentIndex: 0
                              ofReply: YES];

    newConnection.exportedInterface = serviceFactoryInterface;
    newConnection.exportedObject = self;

    [newConnection resume];
    return YES;

} 
```

在主机代码中：

```
// in the host

- (void)openNewService
{
    NSXPCConnection *xpcConnection = [[NSXPCConnection alloc] initWithServiceName:@"eu.mycompany.servicefactory"];
    NSXPCInterface *serviceFactoryInterface =[NSXPCInterface interfaceWithProtocol:@protocol(ServiceFactory)];
    NSXPCInterface *serviceInterface =[NSXPCInterface interfaceWithProtocol:@protocol(Service)];

    // connection has to be returned as proxy, not as a copy
    [serviceFactoryInterface setInterface: serviceInterface
                          forSelector: @selector(connectToNewService:)
                        argumentIndex: 0
                          ofReply: YES];

    xpcConnection.remoteObjectInterface = serviceFactoryInterface;
    [xpcConnection resume];

    [[xpcConnection remoteObjectProxy] connectToNewService:^(id<Service> newService) {

        // here a newService is returned as NSXPCDistantObject <Service>*
        [xpcConnection invalidate];

    }];

} 
```

# javascript - 未捕获的 ReferenceError：未定义 chrome_fix3 _cmp_execLogic._cmp_suclick

> ID：14661376
> 
> 赞同：0
> 
> 时间：2013-02-02T11:23:59.280
> 
> 标签：javascript

我收到以下错误。我该如何解决这个问题？

> 未捕获的 ReferenceError：未定义
> chrome_fix3 _cmp_execLogic._cmp_suclick

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:28:20.130

好消息 - 该错误与您的网站无关。

坏消息 - 它是由错误的浏览器扩展程序引起的，该扩展程序将无效的 javascript 注入您的页面。我有一个不断增加的类似导致的错误列表，我们只能捕获和忽略这些错误。在某些时候，我打算向用户反馈一条消息，即他们安装的某些东西可能会导致我们的网站出现问题，但理想情况下，我想告诉他们究竟是什么扩展程序导致了问题，我完全不知道案例。

如果有人知道引用“chrome_fix3”的尝试实际上来自哪里，请添加到这篇文章中。

我们捕获但与我们的代码无关的类似错误是：

**未捕获的 ReferenceError：未定义管道页**

在调查错误时，我发现以下页面很有帮助：

[https://webmademovies.lighthouseapp.com/projects/65733/tickets/2895-crash-referenceerror-conduitpage-is-not-defined](https://webmademovies.lighthouseapp.com/projects/65733/tickets/2895-crash-referenceerror-conduitpage-is-not-defined)

[http://www.youtube.com/user/conduityoursite#g/c/4B820DE13E03888D](http://www.youtube.com/user/conduityoursite#g/c/4B820DE13E03888D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:38:11.233

您的代码尝试引用不存在的变量或属性，在您的情况下，它被命名为 chrome_fix3。

这可能来自您正在使用的 javascript 库，可能是 jQuery 之类的。

我认为这个库很好，它是由于错误地调用了它的一些函数造成的。

现在最好的方法是在 Firefox 中安装 Firebug 插件（你可以使用 Chrome、Opera 或 Internet Explorer 的调试器，但我最喜欢 Firebug）

然后在您认为出错的代码中添加以下代码：

```
//add the following line only once:
var okCounter=0;
// add teh following line every couple of lines in your code:
console.log("still ok here:",okCounter++); 
```

在 Forefox 中打开您的页面并按 F12，Firebug 窗口现在应该会出现。重新加载页面并查看控制台选项卡。

在某些时候，您应该注意到应该有的控制台没有更多的输出；现在您已经在代码中找到了出错的部分。如果您发布该部分，我们可能会为您提供更多帮助。

# javascript - 信息气泡始终显示在最后一个标记上

> ID：14661377
> 
> 赞同：1
> 
> 时间：2013-02-02T11:24:08.380
> 
> 标签：javascript, html, google-maps-api-3

> **可能重复：**
> [谷歌地图 - 多个标记 - 1 InfoWindow 问题](https://stackoverflow.com/questions/7402667/google-maps-multiple-markers-1-infowindow-problem)

我正在制作一张[地图](http://mapa.site11.com/map.html)，在其中绘制一些城镇和地点。正如您将看到的，当您单击标记时，您将被重定向到相应的页面。但现在我想将链接和其他一些信息放在信息气泡弹出框中。所以，我已经将我的代码编辑为：

```
function setMarkers(map, locations) {
  for (var i = 0; i < locations.length; i++) {
    var beach = locations[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var infobulle = new google.maps.InfoWindow({content: beach[4], position: myLatLng});
    var marker = new google.maps.Marker({position: myLatLng, map: map, title: beach[0], zIndex: beach[3], clickable: true, icon: beach[5],});
    marker[i] = marker;
    google.maps.event.addListener(marker[i], 'click', function() { 
      infobulle.open(map, marker);
    });
  }
} 
```

但正如您[在此处看到](http://mapa.site11.com/map2.html)的，信息气泡在最后一个位置保持“阻塞”状态。我真的不知道如何排序。

我有同样的结果：

```
function setMarkers(map, locations) {
  for (var i = 0; i < locations.length; i++) {
  var beach = locations[i];
  var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
  var infobulle = new google.maps.InfoWindow({content: beach[4]});
  var marker = new google.maps.Marker({position: myLatLng, map: map, title: beach[0], zIndex: beach[3], clickable: true, icon: beach[5]});

  google.maps.event.addListener(marker, 'click', function() { 
    infobulle.open(map, marker);
  });
} 
```

最新版本：

```
function setMarkers(map, locations) {
  for (var i = 0; i < locations.length; i++) {
    processBeach(locations[i]);
  }
}
function processBeach(beach) {
  var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
  var infobulle = new google.maps.InfoWindow({content: beach[4]});
  var marker = new google.maps.Marker({position: myLatLng, map: map, title: beach[0], zIndex: beach[3], clickable: true, icon: beach[5]});
  google.maps.event.addListener(marker, 'click', function() { 
infobulle.open(map, marker);
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:42:34.473

您`marker`似乎将变量用于两种不同的目的。一个作为单个标记，一个作为标记数组。但是，如果您使用闭包，则不需要一组标记。试试这个：

```
function setMarkers(map, locations) {
  for (var i = 0; i < locations.length; i++) {
    (function(beach) {
      var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
      var infobulle = new google.maps.InfoWindow({content: beach[4], position: myLatLng});
      var marker = new google.maps.Marker({position: myLatLng, map: map, title: beach[0], zIndex: beach[3], clickable: true, icon: beach[5]}))
      google.maps.event.addListener(marker, 'click', function() { 
        infobulle.open(map, marker);
      });
    }(locations[i]));
  }
} 
```

顺便说一句，您在选项数组的末尾还有一个虚假的逗号，`google.maps.Marker`这会在某些浏览器中导致问题。

**编辑**

如果你不想使用闭包，这是等价的：

```
function processBeach(beach) {
  var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
  var infobulle = new google.maps.InfoWindow({content: beach[4], position: myLatLng});
  var marker = new google.maps.Marker({position: myLatLng, map: map, title: beach[0], zIndex: beach[3], clickable: true, icon: beach[5]}))
  google.maps.event.addListener(marker, 'click', function() { 
    infobulle.open(map, marker);
  });
}

function setMarkers(map, locations) {
  for (var i = 0; i < locations.length; i++) {
    processBeach(locations[i]);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:34:27.127

看看我的[jSFiddle 这里](http://jsfiddle.net/farrukhsubhani/MKSnD/2/show/)。您缺少的代码是

1.  单击时，您需要从地图中获取当前的 infoWindow，然后使用新信息对其进行更新
2.  If you want to keep windows open and close when people want to close then you have to set a toggle kind of variable so each window will be created on click and then when someone click on close it will go away. But i think you only need to complete first part.

The code you should look in my fiddle is from line 120 to 150 which does check for infowindow if it exists and then do open the same window on new marker so it moves from old marker and go to new. if you keep creating new windows the old ones will not close magically.

```
var map = $(this).gmap3("get"),
      infowindow = $(this).gmap3({get:{name:"infowindow"}}); // Get current info window
    if (infowindow){ // if infoWindow is there then use it else create new
      infowindow.open(map, marker);
      infowindow.setContent(context.data.ht);
      jQuery("#customPopup").html(context.data.ht);
        jQuery("#customPopup").show(500);
    } else {
      $(this).gmap3({
        infowindow:{
          anchor:marker, 
          options:{content: context.data.ht}

        }
      });
        jQuery("#customPopup").html(context.data.ht);
        jQuery("#customPopup").show(500);
    } 
```

# php - 结帐订阅在 Magento 中不起作用

> ID：14661378
> 
> 赞同：1
> 
> 时间：2013-02-02T11:24:10.813
> 
> 标签：php, magento, magento-1.7

我安装了扩展**结帐​​订阅**，它对我来说工作正常。但是有一个小问题。我已经安装了 Recaptcha 的 Fontis 扩展。它工作正常。但安装此扩展后，Recaptcha 消失了。我试图禁用注册页面的recaptcha。但没有运气。希望你能帮忙。我正在使用 Magento 1.7

# java - Java Logging - 有没有办法控制将哪些数据插入到 xml 中？

> ID：14661379
> 
> 赞同：1
> 
> 时间：2013-02-02T11:24:14.280
> 
> 标签：java, logging, java.util.logging

我正在学习 java 日志记录机制，并编写了以下代码。以下代码将 2 条消息记录在一个名为`LOGGED.xml`.

```
import java.util.logging.Logger;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.io.IOException;

class Tester {
  public static void main(String args[]) throws IOException{
    Logger logger = Logger.getLogger(Tester.class.getName());
    FileHandler fHandler = new FileHandler("LOGGED.xml");
    logger.addHandler(fHandler);
    logger.log(Level.INFO,"This is an info log message");
    logger.log(Level.WARNING,"This is a warning message");
    fHandler.close();
  }
} 
```

以下是我在*xml*文件中看到的内容：

```
<log>
 <record>
  <date>2013-02-02T16:42:48</date>
  <millis>1359803568992</millis>
  <sequence>0</sequence>
  <logger>Tester</logger>
  <level>INFO</level>
  <class>Tester</class>
  <method>main</method>
  <thread>1</thread>
  <message>This is an info log message</message>
 </record>

 <record>
  <date>2013-02-02T16:42:49</date>
  <millis>1359803569031</millis>
  <sequence>1</sequence>
  <logger>Tester</logger>
  <level>WARNING</level>
  <class>Tester</class>
  <method>main</method>
  <thread>1</thread>
  <message>This is a warning message</message>
 </record>
</log> 
```

有很多我不想要的东西。有什么方法可以控制在 xml 中插入哪些数据？在某些时候，我只想查看我的*字符串*消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:32:47.970

您真的需要将日志存储为 xml 吗？要将它们作为纯文本获取，请尝试以下操作：

```
fHandler.setFormatter(new SimpleFormatter()); 
```

您也可以[实现自己的格式化程序](http://docs.oracle.com/javase/7/docs/api/java/util/logging/Formatter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:37:35.930

不幸的是，内置[`XMLFormatter.format()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/logging/XMLFormatter.java#XMLFormatter.format%28java.util.logging.LogRecord%29)方法几乎对 XML 格式进行了硬编码。如果您需要一个不同的，您可以实现自己的格式化程序（类似于`XMLFormatter`）并明确使用它：

```
fHandler.setFormatter(new MyXMLFormatter()); 
```

# python - 具有双重条件的 for 循环

> ID：14661383
> 
> 赞同：0
> 
> 时间：2013-02-02T11:24:39.483
> 
> 标签：python, code-readability

我正在寻找像`for i in list where i < n`. 我想替换这个烂摊子：

```
for i in list:
    if i < n:
        #logic here 
```

有没有更紧凑、更优雅的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:27:34.627

我会用一个保护条件来写它以避免缩进层。

```
for i in list:
    if i >= n: continue 
```

单线是这样的：

```
for i in (k for k in list if k < n):
    ... 
```

但我认为循环内带有 if 的明显代码更容易理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:37:42.077

您可以`itertools.ifilter`按如下方式使用：

```
>>> import itertools
>>> inlist = [1,2,3,4,5,6,7]
>>> for i in itertools.ifilter(lambda x: x < 5,inlist):
...     print i
1
2
3
4 
```

如果您想要相反的条件，例如大于：

```
>>> inlist = [1,2,3,4,5,6,7]
>>> for i in itertools.ifilter(lambda x: x > 5, inlist):
...     print i
... 
6
7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:28:14.017

简短的回答：没有。

长答案：

你当然可以这样做：

```
for i in (a for a in lst if a < n):
    # logic 
```

但显然这比您的解决方案要混乱得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T11:28:30.430

```
for i in [x for x in list if x<n]:
    pass 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T11:28:50.633

在 python 中，你必须使用这种东西`while`，for 循环正在迭代`list`你刚刚给它的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-02T11:51:48.573

似乎[itertools.takewhile](http://docs.python.org/2/library/itertools.html#itertools.takewhile)会做你想做的事。

来自母舰：

`itertools.takewhile(predicate, iterable)`

只要谓词为真，创建一个从可迭代对象返回元素的迭代器。相当于：

```
def takewhile(predicate, iterable):
    # takewhile(lambda x: x<5, [1,4,6,4,1]) --> 1 4
    for x in iterable:
        if predicate(x):
            yield x
        else:
            break 
```

**编辑** *！忽略我！*正如卡尔所说`ifilter(...)`的是正确的解决方案。

`takewhile`只像他们在母舰上所说的那样有用：

> *只要谓词为真，创建一个从可迭代对象返回元素的迭代器。*

我会把它改成

> ***仅**当谓词为真时，创建一个从可迭代对象返回元素的迭代器。*

正如巴菲所说：

> 我的错。

# qt - qml中的ListModel，从模型中获取对象

> ID：14661395
> 
> 赞同：3
> 
> 时间：2013-02-02T11:25:58.853
> 
> 标签：qt, qml

我有一个 ListModel，我按以下方式填写：

```
property ListModel projects: ListModel {}
property Project currentProject : null

function initialization(){
    var comp = Qt.createComponent("Project.qml");
    var object = comp.createObject(parent,{});
    projects.append(object);
    currentProject = projects.get(0)

}
Component.onCompleted: root.initialization(); 
```

而且我有一个错误`currentProject = projects.get(0)`。错误文字：

```
main.qml:14: Error: Cannot assign QObject* to Project_QMLTYPE_0* 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T07:41:17.487

当您将`Project`对象附加到 ListModel 时，将对象的属性`Project`添加到 ListModel（作为 ListModel 角色），而不是`Project`对象本身。因此，当您使用 时`ListModel.get()`，返回对象只是一个对象（确切地说是 QObject*），其中 ListModel 角色作为属性，而不是`Project`对象。

更简单地说，ListModel 不是您的`Project`对象的容器。它只存储`Project`对象的属性。

# jquery - 使用fadeOut() 和fadeIn() 淡化内容

> ID：14661396
> 
> 赞同：0
> 
> 时间：2013-02-02T11:26:00.853
> 
> 标签：jquery, fadein, fadeout

我最近开始学习 jQuery。我正在尝试为我的网站编写一个淡入淡出内容的脚本，因为我在网上的任何地方都找不到它。

有我的脚本：http: [//jsfiddle.net/hf9xJ/3/](http://jsfiddle.net/hf9xJ/3/)

我的问题是脚本只有在单击每个链接至少一次（在一个会话中）后才能正常工作。之后，fadeOut() 和 fadeIn() 可以正常工作。

当我试图删除时： `animate({ "left": "0%" }, 500, 'linear',` 整个脚本突然停止工作。

有谁知道如何解决这个问题，甚至有更好的想法以更好的方式编写整个脚本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:46:42.500

您必须将**left:100%**从**#content section:nth-child(1)**替换为**left:0%**并添加此 css

```
#content .active{
  z-index: 100;
} 
```

把js改成这个

```
 $("#content section").css("visibility", "hidden")
      .each(function(index, element) {
          elem=$(element);
          if (!(elem.hasClass("active"))) {
              elem.fadeOut();
          }
  });

  $("#content .active").css("visibility", "visible").fadeIn();

  $('a').on('click', function (event) {
  //event.preventDefault();

      var  sectionId = $(this).attr("data-section"),
            $toSlide = $("#content section#" + sectionId),
          $fromSlide = $('.active');

  if (!($toSlide.hasClass("active"))) {
      $fromSlide.fadeOut().css("visibility", "hidden").removeClass("active");
      $toSlide.addClass("active").css("visibility", "visible").fadeIn();
  }

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:33:09.953

你的 CSS

```
#content section {
position: absolute;
left:100%;
} 
```

设置为 0

并将它们设置为`display:none`（我猜第一个在加载时可见的除外））

注意：第一次点击时淡出正在工作，但同时从左：100％到左：0的动画正在运行；在左侧动画从左侧 0 动画到左侧 0 之后，因此没有任何可见的事情发生，您只看到淡入淡出动画，事实上，如果您只想要淡入淡出效果，为什么需要动画左侧动画？

# javascript - Javascript 表单验证，如果无效则不提交

> ID：14661398
> 
> 赞同：0
> 
> 时间：2013-02-02T11:26:10.027
> 
> 标签：javascript, forms, validation

我需要一些帮助。在这段代码中，我验证了 2 个文本框。我需要的帮助是，一旦在框中没有输入数据，表单不应该转到 check.php，而是带有 javascript 警报：无效数据我需要在 Javascript 中使用这个...

```
function f1()
{
    var v1=document.getElementById("uname").value;
    var v2=document.getElementById("pass").value;
if(v1=="" || v2=="")
alert("Please Fill It..!");

} 
```

```
Username:<input type="text" id="uname" placeholder="username" title="Enter your Username" name="uname"/>
Password:
<input type="password" id="pass" placeholder="password" title="Enter your password" name="pass"/>
<input type="submit" value="Login"/>
<input type="reset" value="clear"/>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:31:15.350

尝试这个：

```
function f1()
{
    var v1=document.getElementById("uname").value;
    var v2=document.getElementById("pass").value;
    if(v1=="" || v2=="") 
    {
         alert("Please Fill It..!");
         return false;
    }
} 
```

您的函数的问题是，默认情况下它返回 true 并提交表单。您需要返回 false 以防止表单提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:36:33.760

您需要将 f1() 注册为表单 onSubmit 事件处理程序。

```
<form action="formaction" method="post" onsubmit="f1()">
Username:<input type="text" id="uname" placeholder="username" title="Enter your Username" name="uname"/>
Password:
<input type="password" id="pass" placeholder="password" title="Enter your password" name="pass"/>
<input type="submit" value="Login"/>
<input type="reset" value="clear"/>
</form>

function f1()
{
    var v1=document.getElementById("uname").value;
    var v2=document.getElementById("pass").value;
    if(v1=="" || v2=="") return false;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:32:07.550

您可以使用将在`onSubmit`其中运行 javascript 的属性。如果它返回一个虚假值，则不会进行提交，但如果它返回`true`，则将进行提交。

```
<form method="POST" onSubmit="return f1()">
Username:<input type="text" id="uname" placeholder="username" title="Enter your Username" name="uname"/>
Password:
<input type="password" id="pass" placeholder="password" title="Enter your password" name="pass"/>
<input type="submit" value="Login"/>
<input type="reset" value="clear"/>

</form> 
```

f1 必须是一个返回`true`或`false`

# ruby-on-rails - 在rails3中检查上传文件夹中的图像是否可用？

> ID：14661403
> 
> 赞同：0
> 
> 时间：2013-02-02T11:26:49.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在使用载波在 rails3 中上传图像，我只想检查上传文件夹中是否有图像。

因为在我的情况下，假设图像名称在数据库中可用，但在单击图像链接时错误地从上传文件夹中删除了图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:18:04.230

我认为，这可以使用`exist?(file_name)`Ruby File Class 的方法来完成。我假设您可以从数据库中获取文件的完整路径，并将其传递给类方法，如下所示：

```
File.exist?('full/path/of/the/file') 
```

如果文件存在则返回 true，否则返回 false。[作为参考，您可以在此处](http://www.ruby-doc.org/core-1.9.3/File.html)阅读有关文件操作的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:53:45.317

Carrierwave 有一个内置的方法可以做到这一点。无论您的存储方法是 :file 还是 :fog，它都有效。看起来像这样：

```
picture.data.file.exists? 
```

# jquery - 一个 div 淡出，等待，另一个 div 动画

> ID：14661409
> 
> 赞同：0
> 
> 时间：2013-02-02T11:27:47.357
> 
> 标签：jquery

仅当#red 完全淡出时，如何使#blue 动画？我的意思是：
1\. 红色淡出
2\. 等待 1 秒
3\. 蓝色动画...

```
$(function(){     
    $("#blue").click(function() {
        $("#red").fadeOut("slow");
        $("#blue").animate({top:'20px'},"slow").delay(1000).fadeOut("slow"); 
    }); 
}) 
```

你可以在这里玩和尝试：http: [//jsfiddle.net/J8PVZ/](http://jsfiddle.net/J8PVZ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:29:58.977

使用`fadeout`回调并移动`delay`： http `animate`: [//jsfiddle.net/J8PVZ/1/](http://jsfiddle.net/J8PVZ/1/)

```
$(function(){     
    $("#blue").click(function() {
        $("#red").fadeOut("slow",function(){
            $("#blue").delay(1000).animate({top:'20px'},"slow").fadeOut("slow");     
        });
    }); 
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:30:58.350

您需要了解`fadeOut()`这里的文档中所示的回调函数：

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

您还需要在制作动画之前进行延迟。

```
$(function(){
    $("#blue").click(function() {
        $("#red").fadeOut("slow", function() {
            $("#blue").delay(1000).animate({top:'20px'},"slow").fadeOut("slow");
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:43:15.267

您可以使用淡出回调函数和使用来实现`.promise().done()`：

`[http://jsfiddle.net/J8PVZ/2/](http://jsfiddle.net/J8PVZ/2/)`

```
$("#blue").click(function () {
    $("#red").fadeOut("slow").promise().done(function(){
        $("#blue").delay(1000).fadeOut("slow")
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T11:47:15.380

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

使用回调方法

```
$(document).ready(function(){   

        $("#blue").bind('click',function() {        
        $("#red").fadeOut("slow",function(){        
            $("#blue").animate({top:'20px'},"slow").delay(1000).fadeOut("slow");
            });
        });
    }
    ); 
```

# functional-programming - 为什么 OCaml 列表中只有 first::rest，而列表中没有 rest::last？

> ID：14661411
> 
> 赞同：2
> 
> 时间：2013-02-02T11:28:07.430
> 
> 标签：functional-programming, ocaml

在 OCaml 中，对于列表，我们总是这样做`first::rest`。从列表中取出第一个元素或在列表前面插入一个元素很方便。

但是为什么OCaml没有`rest::last`呢？如果没有`List`'s 函数，我们将无法轻松获取列表的最后一个元素或将元素插入列表的末尾。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T11:53:56.870

list 数据类型不是内置的魔法，只是带有一些语法糖的常规递归数据类型。您可以通过以下方式自己实现它，使用`Nil`代替`[]`和`Cons(first,rest)`代替`first::rest`：

```
type 'a mylist =
  | Nil
  | Cons of 'a * 'a mylist 
```

我不确定您是否会将上面的定义视为您问题的答案，但它确实是：当您编写时`first::rest`，您不是在调用函数，您只是在使用构建新值的数据类型构造函数（在恒定的时间和空间中）。

这个定义很简单并且具有明确的算法属性：列表是不可变的，访问列表的第一个元素是`O(1)`，访问`k`第一个元素是`O(k)`，连接两个列表`li1`和`li2`是`O(length(li1))`，等等。特别是，访问最后一个元素或添加一些东西列表的结尾`li`是`O(length(li))`; 我们并不急于将其公开为一种方便的操作，因为它的成本很高。

如果要在序列末尾添加元素，列表不是正确的数据结构。您可能想要使用队列（如果您遵循先进先出的访问规则）、a`deque`等。标准库中有一个（可变）结构， [Core](https://ocaml.janestreet.com/ocaml-core/latest/doc/core/Dequeue.html)和[Batteries](https://github.com/ocaml-batteries-team/batteries-included/blob/master/src/batDeque.mli)有`Queue`两个第三方覆盖一个双端队列模块（在电池中持久，在核心中可变）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T11:58:27.660

因为列表只是简单的数据类型，定义为

```
type 'a list = Nil | Cons of 'a * 'a list 
```

除了你拼写`Nil`as`[]`和`Cons`as infix `::`。换句话说，如果您愿意，列表是“单链接的”。除了构造函数的语法之外，没有任何魔法。显然，要到达最后一个元素或追加一个元素，您需要一些辅助函数。

# php - 注意：未定义的偏移量：E:\server\htdocs\file.php 中的 1 使用 if() 和 elseif() 语句

> ID：14661412
> 
> 赞同：1
> 
> 时间：2013-02-02T11:28:12.610
> 
> 标签：php, if-statement

我正在使用这段代码：

```
<?php
include_once('/simple_html_dom.php');
$dom = file_get_html("http://www.gsmarena.com/samsung_i9300_galaxy_s_iii-4238.php");
foreach ($dom->find('tr') as $node) {
if (is_a($node->children(0), 'simple_html_dom_node')) {
    if ($node->children(0)->plaintext == "Protection") {
        $plain = explode(',', $node->children(1)->plaintext);
    if($plain[0] === null){echo 'Nu are';}
     elseif($plain[0]!== null) {echo $plain[0];
     if($plain[1] === null){echo 'Nu are';}
     elseif($plain[1] !== null) {echo $plain[1];} 
     }  
    }

    }
}

?> 
```

我想要的是是否存在 $plain[x] 或 $plain[y] 来告诉我是否不显示自定义文本（在我的情况下为“Nu are”）。一切都很好，代码运行良好，因为 $plain[1] 在当前情况下不存在，但我也收到错误消息。

这是从代码中收到的结果：

`Corning Gorilla Glass 2 Notice: Undefined offset: 1 in E:\server\htdocs\preluare\1.php on line 10 Nu are`

首先是向我显示偏移量 0，因为存在且第二个偏移量不存在，并向我显示错误和错误之后是正确的自定义文本。

正确的结果是`Corning Gorilla Glass 2 Nu are`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:31:43.480

代替

```
$plain[1] !== null 
```

采用

```
array_key_exists(1, $plain) 
```

或者

```
isset($plain[1]) 
```

# android - 在自动完成文本视图的建议列表中找不到项目时显示消息

> ID：14661420
> 
> 赞同：4
> 
> 时间：2013-02-02T11:29:05.747
> 
> 标签：android

当没有项目匹配 AutocompleteTextView 的建议列表时，我想要一条消息。如果我使用 addOnTextChangeListener，那么它会在用户输入字符时一直显示消息，但我只在没有找到匹配项时才想要它。所以请告诉我如何做到这一点，列表来自网络服务。感谢您。

```
searchEdit = (AutoCompleteTextView)findViewById(R.id.searchEdit);
    searchEdit.setCursorVisible(false);
    ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line, menuItems);
    searchEdit.setAdapter(adapter);
    searchEdit.addTextChangedListener(this);
@Override
public void afterTextChanged(Editable arg0) {

}
@Override
public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {

}
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    if (!searchEdit.isPerformingCompletion()) {
        Toast.makeText(getApplicationContext(), "No Item Found", 2000).show();
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-06T19:12:13.383

也许我的回答迟了，但我已经通过这种方式解决了这个问题：

```
searchEdit.addTextChangedListener(watcher);
TextWatcher watcher = new TextWatcher() {

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        if(s.length() > 2) {
            if (!searchEdit.isPopupShowing()) {
                Toast.makeText(getApplicationContext(),"No results", Toast.LENGTH_SHORT).show();
                return;
            }
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-07T11:35:48.313

刚刚碰到同样的问题。祝酒词很烂，显示与建议相同的下拉适配器要酷得多，但只有一个项目告诉“没有建议”或类似的东西。例如，这就是谷歌地图应用程序的工作方式。

这个解决方案有两个时刻。首先，如果您的手机上已经有所有可用的项目，您只需要更改您的适配器过滤器。在我的情况下，每个用户输入都会产生 Http 请求，该请求会返回建议列表或空列表。所以这里我是怎么做的

```
 List<AddressItem> cities = event.getCities();
    if(cities.isEmpty()) {
        AddressItem placeholder = AddressItem.placeholder(getContext());
        cities.add(placeholder);
    }
    AddressItemAdapter addressItemAdapter = new AddressItemAdapter(getContext(), R.layout.simple_text_view, cities);
    autoCompleteCity.setAdapter(addressItemAdapter);
    autoCompleteCity.showDropDown();
    progressCity.setVisibility(View.GONE); 
```

这是占位符项目的静态方法 placeholder()。第二个时刻是这个项目不应该是可点击的。所以你需要在你的适配器方法中检查它的 id ...

```
@Override
public boolean isEnabled(int position) {
    return items.get(position).getId == INVALID_ID;
} 
```

为了使其工作，您的适配器应在此方法中放置正确的 id

```
public long getItemId(int position) {
    return mItems.get(position).getId();
} 
```

你的占位符应该有等于 INVALID_ID 的 id 字段。我希望我的解释能让您比这些 Toasts 更喜欢 UX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:35:18.370

试试这个：你把吐司放入 afterTextChanged() 函数

```
 searchEdit = (AutoCompleteTextView)findViewById(R.id.searchEdit);
searchEdit.setCursorVisible(false);
ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line, menuItems);
searchEdit.setAdapter(adapter);
searchEdit.addTextChangedListener(this);

 @Override
 public void afterTextChanged(Editable arg0) {
  if (!searchEdit.isPerformingCompletion()) {
    Toast.makeText(getApplicationContext(), "No Item Found", 2000).show();
    return;
}
}
 @Override
 public void beforeTextChanged(CharSequence s, int start, int count,
    int after) {

 }
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T11:24:51.567

autosearch.setOnFocusChangeListener(新 OnFocusChangeListener() {

```
 @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                autosearch.getLayoutParams().width = JNConstants.WIDTH_35;
                rel_layer.setVisibility(View.VISIBLE);
            } else {

                if(!autosearch.isPerformingCompletion()){
                    if( jnApp.getSearch_result().size()==0)
                            {
                        Log.v("mytag", "search_results_none");

                        Toast t = Toast.makeText(getActivity(), getActivity().getResources().getString(R.string.search_results_none), Toast.LENGTH_SHORT);
                        t.setGravity(Gravity.CENTER, 0, 0);
                        t.show();
                        return;

                    }
                    }

                autosearch.getLayoutParams().width = JNConstants.WIDTH_15;
            }
        }
    }); 
```

# django - 为什么Paypal在使用django-paypal时会重试IPN

> ID：14661424
> 
> 赞同：3
> 
> 时间：2013-02-02T11:29:25.537
> 
> 标签：django, paypal-ipn, django-paypal

我一直在尝试让 django-paypal 应用程序在我的 Django 项目中工作。我正在使用[dcramer fork](https://github.com/dcramer/django-paypal)和 Django 1.4。我还在使用带有企业和个人帐户的 Paypal 开发人员帐户，通过 Paypal 沙盒网站处理交易。

如果我没有连接到`payment_was_successful`信号的接收器功能，事情似乎按预期工作。事务发生后，`paypal_ipn`在数据库表中创建一个新行，该行的值为“VERIFIED” `response`。Paypal IPN 日志报告此交易没有重试。

当我确实将接收器功能连接到`payment_was_successful`信号时，该`paypal_ipn`表包括两个新行，`created_at`时间戳相隔 10-15 秒。它们在响应列中的值都为“VERIFIED”，但两者中的后者被标记为`flag_info`如下所示：

'重复 txn_id。(5M907276M1007902B)'

Paypal 商业账户报告 IPN 被重试 1 次。

我找到了可能的解决方案，其中提到了将`dispatch_uid`接收器功能连接到我尚未尝试的信号时的使用。我的问题是我查看了相关的 django-paypal 源代码，但我不明白为什么 Paypal 会在验证第一个回发后重试 IPN。

有没有其他人遇到过这个问题并找到了他们理解的解决方案？

* * *

**更新：**

我发现我的接收器函数代码中有一个错误，这会引发异常。现在我已经解决了这个问题，Paypal 不再重试 IPN。我很高兴问题已经消失，但我仍然无法弄清楚它为什么会发生。

以下是数据库中最近重复记录的摘录。请注意，第一行是在下一行之前至少 10 秒创建和更新的。

```
created_at                       updated_at                       response    flag
2013-02-03 07:53:56.628013+00    2013-02-03 07:53:56.628057+00    VERIFIED    FALSE
2013-02-03 07:54:07.393795+00    2013-02-03 07:54:07.403008+00    VERIFIED    TRUE 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T11:25:21.757

我已经弄清楚了这一点。简短的回答是确保您的接收器功能正常工作。

当 Paypal 向您指定的 URL 发送 IPN 时，他们会期待 HTTP 状态代码为 200 的响应。如果响应代码是其他代码，他们将重试。即使您处理回调并收到已验证消息，来自 Paypal 的 IPN 也需要 200 OK 响应。

我查看了我的 Apache 访问日志，发现当我的`payment_was_successful`信号接收器函数出现错误时，paypal 的初始 IPN 收到了 HTTP 状态代码 500。

django-paypal 包`HttpResponse("OKAY")`仅在处理完其他所有内容后才会响应，包括返回“已验证”的 Paypal 回传、`PayPalIPN`保存到数据库的对象以及发送信号。当我的信号接收器函数出现问题并引发未处理的异常时，Django 以 HTTP 状态代码 500 进行响应。

当 Paypal 重试 IPN 时，django-paypal 包检测到重复的 txn_id 并发送`payment_was_flagged`信号。我的这个信号的接收函数没有错误，所以 Paypal 收到了它所期望的 HTTP 状态代码 200 并停止重试。

希望这对将来的其他人有所帮助。

# asp.net-mvc - 多对多关系中针对 EF 的实体的 LINQ

> ID：14661426
> 
> 赞同：0
> 
> 时间：2013-02-02T11:29:36.607
> 
> 标签：asp.net-mvc, linq, linq-to-entities, entity-framework-5

我正在使用 ASP.NET MVC4 EF CodeFirst。

**需要帮助**在索引操作中编写 LINQ（到实体）代码以获取所选学生参加的课程的集合。*连接表与有效负载的关系是多对多的。*

```
//StudentController
//-----------------------

public ActionResult Index(int? id)
{
    var viewModel = new StudentIndexViewModel();
    viewModel.Students = db.Students;

    if (id != null)
    {
        ViewBag.StudentId = id.Value;
        // *************PROBLEM IN LINE DOWN. HOW TO MAKE COURSES COLLECTION? 
        viewModel.Courses = db.Courses
            .Include(i => i.StudentsToCourses.Where(t => t.ObjStudent.FkStudentId == id.Value));
    }

    return View(viewModel);
} 
```

我得到的错误是：

```
The Include path expression must refer to a navigation property defined on the type. Use dotted paths for reference navigation properties and the Select operator for collection navigation properties. 
```

我有模型（第三个是用于连接有效负载的表）：

```
//MODEL CLASSES
//-------------

public class Student
{
    public int StudentId { get; set; }
    public string Name { get; set; }

    public virtual ICollection<StudentToCourse> StudentsToCourses { get; set; }
}

public class Course
{
    public int CourseId { get; set; }
    public string Title { get; set; }

    public virtual ICollection<StudentToCourse> StudentsToCourses { get; set; }
}

public class StudentToCourse
{
    public int StudentToCourseId { get; set; }
    public int FkStudentId { get; set; }
    public int FkCourseId { get; set; }
    public string Classroom { get; set; }

    public virtual Student ObjStudent { get; set; }
    public virtual Course ObjCourse { get; set; }
} 
```

然后，这是我需要传递给视图的模型视图

```
//VIEWMODEL CLASS
//---------------

public class StudentIndexViewModel
{
    public IEnumerable<Student> Students { get; set; }
    public IEnumerable<Course> Courses { get; set; }
    public IEnumerable<StudentToCourse> StudentsToCourses { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:41:22.977

EF 不支持条件包含。您需要包含全部或全部内容（即没有`Where`在里面`Include`）

如果您只需要获取某些关系的数据，则可以将其选择为匿名类型，例如（显然未经测试）；

```
var intermediary = (from course in db.Courses
                    from stc in course.StudentsToCourses
                    where stc.ObjStudent.FkStudentId == id.Value
                    select new {item, stc}).AsEnumerable(); 
```

显然，这将需要一些代码更改，因为它不再是带有 StudentsToCourses 集合的直接课程。

# algorithm - 检查字符串是否包含有效的括号集，字符串可能包含笑脸和皱眉脸

> ID：14661428
> 
> 赞同：0
> 
> 时间：2013-02-02T11:29:56.870
> 
> 标签：algorithm

最近参加Facebook黑客杯，有个题叫“平衡笑脸”：

```
A message has balanced parentheses if it consists of one of the following:

- An empty string ""
- One or more of the following characters: 'a' to 'z', ' ' (a space) or ':' (a colon)
- An open parenthesis '(', followed by a message with balanced parentheses, followed by a close parenthesis ')'.
- A message with balanced parentheses followed by another message with balanced parentheses.
- A smiley face ":)" or a frowny face ":(" 
```

编写一个程序，确定是否有一种方法可以解释他的信息，同时保持括号平衡。

我使用递归做到了，这是正确的，但时间复杂度很高。我考虑过记忆，但时间复杂度仍然是 O(n^2)/O(N^3)。他们发布了时间复杂度为 O(N) 的解决方案！

解决方案在python中：

```
def isBalanced(message):

minOpen = 0

maxOpen = 0

for i in xrange(len(message)):

    if message[i] == '(':

        maxOpen += 1

        if i == 0 or message[i-1] != ':':

            minOpen += 1

    elif message[i] == ')':

        minOpen = max(0, minOpen-1)

        if i == 0 or message[i-1] != ':':

            maxOpen -= 1

            if maxOpen < 0:

                break

if maxOpen >= 0 and minOpen == 0:

    return "YES"

else:

    return "NO" 
```

我知道代码在做什么，但无法说服自己相信它的正确性或证据。我们如何证明它永远有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:06:24.297

你可以这样理解：

每次你遇到一个 (，它可以是一个左括号，或者是微笑的一部分，如果它在冒号之后。对于像 :() 这样的字符串，当你遇到 (时，有效左括号的最小数量为0，最大个数为1。然后你继续遍历字符串，遇到)。此时，如果最大个数为0，则整个字符串不是有效字符串，否则有效。

# excel - 如何使用 Excel 的数组公式为 UDF 正确读取每个单元格？

> ID：14661431
> 
> 赞同：8
> 
> 时间：2013-02-02T11:30:00.210
> 
> 标签：excel, array-formulas, vba

节日，

我有一个更多的问题要帮助自己理解 Excel 的数组公式（Control+Shift+Enter）如何将每个单元格动态地读入公式中。

我做了一个简化的例子来告诉你我的意思。

我创建了一个虚构的小型农场，里面有一些动物，按名称列出，并提供动物发出的声音。在下一列中，我创建了一个名为 MakesSound 的用户定义函数，该函数接受它是什么动物的输入并响应它发出的动物的声音。如下图所示。

![在此处输入图像描述](../Images/9fe7b763e3b0755069a0f1b8452891da.png)

不幸的是，我认为一个数组公式可以发现我有不同的单元格列出了动物，并且它以这个快照结束。

![在此处输入图像描述](../Images/32169b1eb1921ce7497b4cb6f0fbe992.png)

那么我如何让数组公式识别我在 B 列中有不同的单元格，因为我知道 Quacks 不是其他动物的答案。:-)

这是另一个快照，显示了 arrayformulas 旁边的公式，用于比较和我也使用的代码。

![在此处输入图像描述](../Images/ca282fd621e23321dedf8b44c5b02925.png)

```
Public Function MakesSound(AnimalName As String) As Variant
    Select Case AnimalName
        Case Is = "Duck"
            MakesSound = "Quack!"
        Case Is = "Cow"
            MakesSound = "Moo!"
        Case Is = "Bird"
            MakesSound = "Tweet!"
        Case Is = "Sheep"
            MakesSound = "Ba-Ba-Ba!"
        Case Is = "Dog"
            MakesSound = "Woof!"
        Case Else
            MakesSound = "Eh?"
    End Select
End Function 
```

我愿意接受建议。

谢谢，彼得。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T14:39:12.933

你需要让你的数组函数将数据读入一个数组，处理它并创建一个输出数组。
然后需要使用 ctrl-shift-enter 将数组函数输入到多单元格数组公式 (D3:D7) 中。

```
Public Function MakesSound(AnimalName As Range) As Variant
Dim Ansa() As Variant
Dim vData As Variant
Dim j As Long
vData = AnimalName.Value2
ReDim Ansa(1 To UBound(vData), 1 To 1)
For j = 1 To UBound(vData)
    Select Case vData(j, 1)
    Case Is = "Duck"
        Ansa(j, 1) = "Quack!"
    Case Is = "Cow"
        Ansa(j, 1) = "Moo!"
    Case Is = "Bird"
        Ansa(j, 1) = "Tweet!"
    Case Is = "Sheep"
        Ansa(j, 1) = "Ba-Ba-Ba!"
    Case Is = "Dog"
        Ansa(j, 1) = "Woof!"
    Case Else
        Ansa(j, 1) = "Eh?"
    End Select
Next j
MakesSound = Ansa
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T11:41:15.510

对给定示例使用数组公式的目的对我来说真的很模糊，但无论如何，如果你坚持 - 请尝试以下操作：

1.  选择区域`C3:C7`（如在最上面的屏幕上）。
2.  按下`F2`可现场编辑并键入以下公式：`=MakesSound(B2:B7)`
3.  按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式并在`{}`其周围产生括号（但不要手动输入它们！）。

我不确定您的 UDF 是否可以正确处理数组表示法，但对于通常的 Excel 公式，这可以按预期工作，例如尝试`=LEFT(B2:B7,2)`作为第 2 步的数组之一 - 这将返回每个动物名称的 2 个起始字母。

希望这对您有所帮助。祝你好运！

# ios - UIPageViewControlerDataSource 和 UiWebView 用于在页面上显示

> ID：14661433
> 
> 赞同：0
> 
> 时间：2013-02-02T11:30:47.167
> 
> 标签：ios, objective-c, uiwebview, uipageviewcontroller, ibooks

我想开发一个使用`UIPageViewController`和`UIWebView`显示书页的 ePub 阅读器应用程序。因此，我可以通过使用 JavaScript 字符串执行偏移来制作不同章节的页面。

问题是如何`UIPageViewControlerDataSource delegate`以正确的方式实施工作？当我准备一些页面来显示时，我应该使用只有在屏幕上才有效的`UIWebView`方法和方法。我试图在基础下制作与 ePub 章节分页链接的微积分，但我无法在页面上拖动加载的内容。`UIWebView delegate``webView``webView``pageViewController`

有谁知道它是如何在 iBooks 或相同的应用程序中实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:22:01.157

一种简单的解决方案可能是：

*   子类`UIPageViewController`，使其符合`UIPageViewControllerDataSource`和`UIWebViewDelegate`协议并在覆盖中设置`self`为数据源`-viewDidLoad`
*   实现`pageViewController:viewControllerAfterViewController:`和`pageViewController:viewControllerBeforeViewController:`（UIPageViewControllerDataSource 协议方法），以便它们返回一个`UIViewController`包含`UIWebView`显示您的数据的新的。

    ```
    - (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
    {
        UIViewController *vc = [[UIViewController alloc] init];
        UIWebView *webview = [[UIWebView alloc] init];
        webview.delegate = self;

        // Here you can call - (void)loadData:(NSData *)data MIMEType:(NSString *)MIMEType textEncodingName:(NSString *)encodingName baseURL:(NSURL *)baseURL
        // to load your web page as you need

        vc.view = webview;

        return vc;
    } 
    ```

当然你必须完成代码存根。您应该设置一种机制来区分 viewControllers 以便能够返回下一页和上一页（即，我使用 UIPageViewController 子类声明`pageNumber`属性来做到这一点，但我相信有更优雅的方法可以做到这一点......）

# c# - 如何使用 ftplib 将目录上传到 ftp？

> ID：14661435
> 
> 赞同：0
> 
> 时间：2013-02-02T11:30:56.677
> 
> 标签：c#, asp.net, .net, wpf, asp.net-mvc

我在将所有文件上传到 ftp 时遇到问题：我使用[ftplib](http://ftplib.codeplex.com/)。我有一个上传功能：

```
static void DirSearch(string sDir, FtpConnection ftp)
{
  try
  {
    foreach (string d in Directory.GetDirectories(sDir))
    {
      string dirname = new DirectoryInfo(d).Name;
      if (!ftp.DirectoryExists(dirname))
      {
        ftp.CreateDirectory(dirname);
      }
      ftp.SetCurrentDirectory(dirname);
      foreach (string f in Directory.GetFiles(d))
      {
        Uri uri = new Uri(f);            
        ftp.PutFile(f, System.IO.Path.GetFileName(uri.LocalPath));

      }
      DirSearch(d, ftp);
    }
  }
  catch (System.Exception e)
  {
    MessageBox.Show(String.Format("Błąd FTP: {0} {1}", e.Message), "Błąd wysyłania plików na FTP", MessageBoxButton.OK, MessageBoxImage.Error);
  }
} 
```

好的这个函数uload文件，但我在本地磁盘文件中有：

```
UPLOAD
--DIR1
----DIR3
------FILE4
----FILE3
--DIR2
----DIR4
------FILE7
----FILE5
----FILE6
--FILE1
--FILE2 
```

在服务器中，我有：

```
UPLOAD
--DIR1
----DIR3
------DIR2
--------DIR4
----------FILE7
--------FILE5
--------FILE6
------FILE4
----FILE3 
```

我在第一个文件夹中没有文件并且目录树是错误的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:24:38.203

好吧，您的功能是问题所在 - 当您进入文件夹并将文件复制到其中时，您不会回到上一个文件夹，而是更深入地进入树。

对此的简单解决方案是重写此函数以在遍历目录后从目录返回：

```
static void DirSearch(string sDir, FtpConnection ftp)
{
  try
  {
     // First, copy all files in the current directory
     foreach (string f in Directory.GetFiles(d))
     {
       Uri uri = new Uri(f);            
       ftp.PutFile(f, System.IO.Path.GetFileName(uri.LocalPath));
     }

    // For all directories in the current directory, create directory if there is
    // no such, and call this function recursively to copy files.

    foreach (string d in Directory.GetDirectories(sDir))
    {
      string dirname = new DirectoryInfo(d).Name;
      if (!ftp.DirectoryExists(dirname))
      {
        ftp.CreateDirectory(dirname);
      }
      ftp.SetCurrentDirectory(dirname);
      DirSearch(d, ftp);
    }

  }
  catch (System.Exception e)
  {
    MessageBox.Show(String.Format("Błąd FTP: {0} {1}", e.Message), "Błąd wysyłania plików na FTP", MessageBoxButton.OK, MessageBoxImage.Error);
  }
  finally{
     // Go back! 
     ftp.SetCurrentDirectory(".."); //untested, but it should be fine, as I don't see cdup command in ftplib
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:24:17.933

你是对的。您可以在每次通话时保存和分配当前目录。试试这个：

```
static void DirSearch(string sDir, FtpConnection ftp, string currentDirectory)
{
  try
  {
    ftp.SetCurrentDirectory(currentDirectory);
    foreach (string d in Directory.GetDirectories(sDir))
    {
      string dirname = new DirectoryInfo(d).Name;
      if (!ftp.DirectoryExists(dirname))
      {
        ftp.CreateDirectory(dirname);
      }      
      foreach (string f in Directory.GetFiles(d))
      {
        Uri uri = new Uri(f);            
        ftp.PutFile(f, System.IO.Path.GetFileName(uri.LocalPath));

      }
      string newCurrentDir = currentDirectory + dirname + "/";
      DirSearch(d, ftp, newCurrentDir);
    }
  }
  catch (System.Exception e)
  {
    MessageBox.Show(String.Format("Błąd FTP: {0} {1}", e.Message), "Błąd wysyłania plików na FTP", MessageBoxButton.OK, MessageBoxImage.Error);
  }
} 
```

和方法调用

```
DirSearch("your initial dir", your ftp connection, "/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T14:50:18.993

这段代码不错

```
static void DirSearch(string sDir, FtpConnection ftp, string currentDirectory)
{
    try
    {
        ftp.SetCurrentDirectory(currentDirectory);
        foreach (string f in Directory.GetFiles(sDir))
        {
            Uri uri = new Uri(f);
            ftp.PutFile(f, System.IO.Path.GetFileName(uri.LocalPath));

        }
        foreach (string d in Directory.GetDirectories(sDir))
        {
            ftp.SetCurrentDirectory(currentDirectory);
            string dirname = new DirectoryInfo(d).Name;
            if (!ftp.DirectoryExists(dirname))
            {
                ftp.CreateDirectory(dirname);
            }

            string newCurrentDir = currentDirectory + "/" + dirname ;
            DirSearch(d, ftp, newCurrentDir);
        }
    }
    catch (System.Exception e)
    {
        MessageBox.Show(String.Format("Błąd FTP: {0} {1}", e.Message), "Błąd wysyłania plików na FTP", MessageBoxButton.OK, MessageBoxImage.Error);
    }
} 
```

# python-2.7 - 创建一个 msi 安装程序

> ID：14661444
> 
> 赞同：-4
> 
> 时间：2013-02-02T11:31:53.420
> 
> 标签：python-2.7, wix

Visual Studio 2010 没有帮助我构建部署项目以使用 msbuild 创建 msi 安装程序。我被要求编写一个自动构建和创建 msi 安装程序的 python 脚本。我想出了一个使用 wix 工具的解决方案。但是，我对此一无所知。请给我一个想法。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:04:01.400

1.  Visual Studio 2010 允许您创建 MSI 项目，您可以在此处查看： ![在此处输入图像描述](../Images/7bda87a29c05da26273444bef48ac5f1.png)

但是，由于 VS2012 不再支持 .vdproj 文件，我建议您学习如何使用 WIX 安装程序。
2\. 如果您想学习如何使用 WIX 安装程序，我建议您在此处询问之前 google 一下 Wix 安装程序教程：
[http ://wix.tramontana.co.hu/](http://wix.tramontana.co.hu/)

3.如果需要了解XML
[http://www.w3schools.com/xml/default.asp](http://www.w3schools.com/xml/default.asp)

# sql - 获取最后 5 行，但按创建顺序

> ID：14661446
> 
> 赞同：0
> 
> 时间：2013-02-02T11:32:19.813
> 
> 标签：sql, sql-server

我有一个包含以下信息的表：

mesID 是我的身份种子

```
mesID | ToUser | FromUser | DateTime
-------------------------------------
91    | jason  | krissy   | 1/18/2013 12:10:23 PM
92    | jason  | krissy   | 1/18/2013 12:20:38 PM
93    | jason  | krissy   | 1/18/2013 12:35:14 PM
94    | jason  | krissy   | 1/18/2013 12:20:38 PM
95    | jason  | krissy   | 1/18/2013 12:35:14 PM
98    | jason  | krissy   | 1/18/2013 12:10:23 PM
101   | jason  | krissy   | 1/18/2013 12:20:38 PM
104   | jason  | krissy   | 1/18/2013 12:35:14 PM
109   | jason  | krissy   | 1/18/2013 12:54:11 PM 
```

现在请记住，我还有 60 多条消息，它们的 mesID 低于 98。我想要做的是只获取最后 5 条消息，但按照从最旧到最新消息返回的原始顺序（mesID = 1 显然是最老的）。

从逻辑上讲，我认为我只会获得前 5 名退货并通过 DESC 按 mesID 对其进行排序。然后在返回 5 个之后，通过 mesID AESC 重新订购它们，但我不知道如何做到这一点。

所以最终结果我会得到类似...

```
95    | jason  | krissy   | 1/18/2013 12:35:14 PM
98    | jason  | krissy   | 1/18/2013 12:10:23 PM
101   | jason  | krissy   | 1/18/2013 12:20:38 PM
104   | jason  | krissy   | 1/18/2013 12:35:14 PM
109   | jason  | krissy   | 1/18/2013 12:54:11 PM 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:35:46.430

执行子查询：

```
SELECT *
FROM   TABLE
WHERE  mesid IN (SELECT TOP 5 mesid
                 FROM   TABLE
                 WHERE ToUser like '%krissy%' or FromUser like '%krissy%'  
                 ORDER BY
                        mesid DESC)
ORDER BY
       mesid ASC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T11:37:05.137

```
SELECT *
FROM   (
           SELECT TOP 5 *
           FROM   TABLE
           ORDER BY
                  mesID DESC
       ) t
ORDER BY
       t.mesID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:36:10.520

假设每个用户*都有许多带有 toUSer 和 FromUser 的记录，*这将获得最新的 5 个。

```
WITH recordList
AS
(
    SELECT mesID, ToUSer, FromUser, DateTime,
            ROW_NUMBER() OVER (PARTITION BY ToUSer, FromUser
                                ORDER BY mesID DESC) rn
    FROM tableName
)
SELECT mesID, ToUSer, FromUser, DateTime
FROM recordList
WHERE rn <= 5
ORDER BY mesID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/6fcf5/2)

# java - 会话中的价值节省

> ID：14661449
> 
> 赞同：0
> 
> 时间：2013-02-02T11:32:30.753
> 
> 标签：java, jsf, session-variables

我想要一个链接，当用户点击它时，它应该执行以下操作：

*   将密钥保存到会话中
*   使用另一个 JSF 页面打开一个新窗口
*   它不应该重新加载当前页面

我不知道如何解决这个问题。
当我保存密钥并打开新窗口时，密钥为空。
也许保存密钥的过程太慢了？
以及如何防止页面重新加载？

这是我当前的代码：

**JavaScript**

```
function openWin2(url)
{
     var w = 800;
     var h = window.innerHeight - 100;
     var left = ((screen.width-w)/2);
     var top = ((screen.height-h)/2);
     window.open(url, 'Tax', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
} 
```

**xhtml**

```
<ui:repeat value="#{main.list}" var="items">
    <h:commandLink action="#{main.setClickedId(items.itemId)}">
        <table onclick="openWin2('immobilie.xhtml')"><tr><td>Hello</td></tr></table>
    </h:commandLink>
</ui:repeat> 
```

**ManagedBean**
*保存*

```
public void setClickedId(String clickedId) {
    this.clickedId = clickedId;

    FacesContext context = FacesContext.getCurrentInstance();
    Map<String, Object> map = context.getExternalContext().getSessionMap();
    if(map.containsKey("id")){map.remove("id");}
    map.put("id", clickedId);
} 
```

*加载*

```
FacesContext context = FacesContext.getCurrentInstance();
immoId = context.getExternalContext().getSessionMap().get("id").toString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:16:17.720

> 当我保存密钥并打开新窗口时，密钥为空。也许保存密钥的过程太慢了？

这里的问题是 JavaScript 和服务器端方法在不同的地方运行：

*   JavaScript 代码在客户端浏览器中运行，就像在您的 PC 中本地执行代码一样。

*   服务器端代码在服务器上运行。浏览器必须向服务器发出请求，服务器将完成其工作并执行`action`您定义的方法`<h:commandLink>`，然后向浏览器返回响应。浏览器将处理响应。注意：这是一个非常基本的解释，有关 JSF 请求的更多信息，请阅读[JSF 生命周期和自定义组件](https://stackoverflow.com/q/33476/1065197)

知道这一点，并不是方法执行太慢，而是在不同的时间执行。

> 以及如何防止页面重新加载？

简而言之，您必须向服务器发出 ajax 请求，而不是完整的请求。为了实现这一点，JSF 2 为您提供`<f:ajax>`了将简单请求转换为 ajax 请求的功能，并且浏览器不会刷新页面。

解决方案应该是一个两步过程：

1.  执行服务器操作以将会话中的数据保存为 ajax 请求。

2.  处理完 ajax 请求后，您应该使用 JavaScript 打开窗口。

该`<f:ajax>`组件本质上不提供`oncomplete`javascript 方法，但您可以在完成 ajax 请求后利用该`onevent`方法的强大功能执行 javascript 代码。该示例基于[JSF 2.0 javascript onload/oncomplete](https://stackoverflow.com/q/5570180/1065197)。

```
<h:commandLink action="#{main.setClickedId(items.itemId)}" value="Hello">
    <f:ajax onevent="handleOnComplete" />
</h:commandLink>

<h:outputScript>
    function handleOnComplete(e) {
        if (e.status == 'success') {
            openWin2();
        }
    }
</h:outputScript> 
```

另一种方法是使用第三方库[`<a4j:commandLink>`](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Actions.html#sect-Component_Reference-Actions-a4jcommandLink)，如 RichFaces 或[`<p:commandLink>`](http://www.primefaces.org/showcase-labs/ui/commandLink.jsf)PrimeFaces。我将使用 PrimeFaces 代码发布示例：

```
<p:commandLink action="#{main.setClickedId(items.itemId)}" value="Hello"
    oncomplete="openWin2()" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:14:50.220

我自己发现了失败。
问题是，JSF 页面没有解析 JSF 标签。
从：

```
<h:outputText value="#{items.itemId" /> 
```

我没有任何输出。
这就是为什么我认为 JSF 页面调用方法失败的原因。
但这不是问题所在。问题是我的网址。这是我打开第二页的代码：

```
openWin2('immobilie.xhtml') 
```

但那是错误的。它一定要是

```
openWin2('faces/immobilie.xhtml') 
```

我从[这里](https://stackoverflow.com/questions/6477033/google-app-engine-does-not-parse-jsf-2-0-tags "这里")得到了解决方案。

* * *

Luiggi Mendoza 非常感谢您对我的帮助！你对我帮助很大！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:53:36.250

我建议使用`a4j:ajax`标签（在 RichFaces 中可用，[此处](http://docs.jboss.org/richfaces/latest_4_X/vdldoc/a4j/ajax.html)的文档）。那么 xhtml 中的标记应该如下所示：

```
<h:commandLink action="#{main.setClickedId(items.itemId)}">
    <table><tr><td>Hello</td></tr></table>
    <a4j:ajax oncomplete="openWin2('immobilie.xhtml')" />
</h:commandLink> 
```

这段代码会向服务器发送一个 AJAX 请求，服务器会执行 method `setClickedId`，当响应返回给浏览器时，`openWin2`会调用该函数。

# c++ - 将int转换为字符串的有效方法

> ID：14661450
> 
> 赞同：6
> 
> 时间：2013-02-02T11:32:41.283
> 
> 标签：c++, string, performance, int, type-conversion

我正在创建一个游戏，其中有一个主循环。在此循环的一个周期中，我必须将`int`值转换为`string`约 50-100 次。到目前为止，我一直在使用这个功能：

```
std::string Util::intToString(int val)
{
   std::ostringstream s;
   s << val;
   return s.str();
} 
```

但它似乎不是很有效，因为我遇到 FPS 从 ~120（不使用此功能）下降到 ~95（使用它时）。

有没有其他方法可以转换`int`为`string`比我的函数更有效的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T11:41:03.147

> 范围是 1-72。我不必处理负面因素。

预先创建一个包含 73 个`string`对象的数组/向量，并使用索引来获取您的字符串。返回`const`参考也可以让您节省分配/解除分配：

```
// Initialize smallNumbers to strings "0", "1", "2", ...
static vector<string> smallNumbers;

const string& smallIntToString(unsigned int val) {
    return smallNumbers[val < smallNumbers.size() ? val : 0];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T11:43:05.720

标准[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)功能可能很有用。

但是，在这种情况下，我想知道返回时是否不是字符串的*复制*可能是一个大瓶颈？如果是这样，您可以将目标字符串作为引用参数传递给函数。但是，如果您有，`std::to_string`那么编译器可能与 C++11 兼容，并且可以使用移动语义而不是复制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T11:46:18.413

是的 - 回到 C 中的函数，如上[一个答案](https://stackoverflow.com/a/1251043/560648)中所探讨的：

```
namespace boost {
template<>
inline std::string lexical_cast(const int& arg)
{
    char buffer[65]; // large enough for arg < 2^200
    ltoa( arg, buffer, 10 );
    return std::string( buffer ); // RVO will take place here
}
}//namespace boost 
```

理论上，这个新的专业化将在您定义它的翻译单元的其余部分生效。`ltoa`比构造和使用字符串流*要*快得多（**尽管是非标准的）。**

但是，[我](https://stackoverflow.com/questions/1250795/very-poor-boostlexical-cast-performance#comment19144737_1251043)在竞争共享库之间遇到了这个专业化的实例化和原始函数模板的实例化之间的名称冲突问题。

为了解决这个问题，我实际上只是给这个函数一个全新的名字：

```
template <typename T>
inline std::string fast_lexical_cast(const T& arg)
{
    return boost::lexical_cast<std::string>(arg);
}

template <>
inline std::string my_fast_lexical_cast(const int& arg)
{
    char buffer[65];

    if (!ltoa(arg, buffer, 10)) {
       boost::throw_exception(boost::bad_lexical_cast(
          typeid(std::string), typeid(int)
       ));
    }

    return std::string(buffer);
} 
```

**用法：** `std::string myString = fast_lexical_cast<std::string>(42);`

**免责声明：**此修改是从 Kirill 的原始 SO 代码逆向工程的，*而不是*我从公司代码库创建并投入生产的版本。不过，我现在想不出我对它所做的任何其他重大修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T11:39:16.597

像这样的东西：

```
 const int size = 12;
 char buf[size+1];
 buf[size] = 0;
 int index = size;
 bool neg = false
 if (val < 0) {    // Obviously don't need this if val is always positive.
    neg = true;
    val = -val;
 }

 do
 {
     buf[--index] = (val % 10) + '0';
     val /= 10;
 } while(val);
 if (neg)
 {
    buf[--index] = '-';
 }
 return std::string(&buf[index]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-22T21:11:16.530

我用这个：

```
void append_uint_to_str(string & s, unsigned int i)
{
    if(i > 9)
        append_uint_to_str(s, i / 10);
    s += '0' + i % 10;
} 
```

如果你想要负插入：

```
if(i < 0)
{
    s += '-';
    i = -i;
} 
```

在函数的开头。

# ruby-on-rails - 在 Rails 中建模应用程序 - 混合 STI 和多态关联

> ID：14661456
> 
> 赞同：2
> 
> 时间：2013-02-02T11:33:18.473
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, polymorphic-associations, single-table-inheritance

如果已经回答了这个问题，请原谅我，但我已经搜索了很多，仍然需要一些澄清。

我正在使用 Rails 3.2 构建一个物业管理工具。我已经有一个用户模型和授权/身份验证代码，并具有完整的测试覆盖率。

我刚刚开始绘制模型/类/表，让自己有点困惑。

让我们从用户开始。

## 建模用户

我计划允许多家公司使用这个系统。每个人都会有员工（用户）。这些用户将具有不同的角色，例如经理、代理、会计师、秘书等。在大多数情况下，我计划为每个用户存储的数据将是相似的（或者我目前认为），所以我倾向于单表继承和使用类型来定义每个员工拥有的访问级别。

其次，我打算让房东和租客也登录系统。登录后，他们将能够查看有关他们拥有或租用的房产的信息——也许还会更新他们的联系方式。

我正在考虑使用多态关联来表示这些用户。

所以我目前的计划并希望得到一些反馈

用户 < ActiveRecord::BASE

Employee < User（这将有一个 STI 类型列并允许不同的员工角色）

房东<用户

租户 < 用户

这是解决这个问题的最好方法，还是我在踢自己的脚？

我有一些人建议我应该有一个“角色”表并为用户分配角色——但我觉得这不是在 Rails 中最优雅的方式。

## 特性

我的下一个问题是属性。现在我有一个属性模型，当我添加它们时，它们属于一个用户（即它们有一个 user_id 外键）。然后我开始思考“如果添加属性的员工（用户）离开公司或由于某种原因删除了他们的帐户会发生什么？”

那么在这种情况下，最好放弃用户/员工与财产的关联，而只是将财产链接到员工所属的公司？这样我可以把所有的employee.company.properties 都列出来吗？

## 业主和租户协会

假设我们让属性属于一家公司。

就联想而言，这就是我的想法。现在看它，我看到一切都属于一家公司，因为使用该系统的一家公司不应该看到另一家公司的房东/租户/雇员/财产。

```
class Landlord < User
  belongs_to :company
  has_many :properties, :through => :ownerships
end

class Tenant < User
  belongs_to :company
  has_one :property, :through => tenancies #you can only live at one place at a time right?
end

class Property < ActiveRecord::Base
  has_many :tenants, :through => :tenancies
  has_many :landlords, :through => :ownerships
  belongs_to :company
end

class Company < ActiveRecord::Base
  has_many :properties
  has_many :employees
  has_many :landlords :through => :ownerships #not sure if through is required/works here
  has_many :tenants :through => :tenancies #not sure if through is required/works here
end

class Employees < User
  belongs_to :company
end 
```

## 特性

另外我猜我们会有不同类型的房产（商业/住宅），其中会有整栋建筑、建筑物内的公寓（单一地址）等。

与用户一样，我计划使用多态关联来定义两个子类 CommercialProperty 和 ResidentialProperty，然后使用 sti 来定义一个类型。如果类型是“多单元”，则有一个新的单元模型和一个关联，其中 Property has_many Units 和 Unit belongs_to 属性。

## 目标

我试图确保我的代码尽可能地遵循最佳实践，这样当我添加新功能和扩展时，我就不必重新编写应用程序的大部分内容。

我非常感谢您的反馈。

## 参考

我读过的一些帖子。希望能帮助其他人试图解决同样的问题。

[设计 Rails 应用程序：单表继承？](https://stackoverflow.com/questions/7719600/designing-a-rails-application-single-table-inheritance)

[具有不同用户类型的 Ruby on rails](https://stackoverflow.com/questions/2586329/ruby-on-rails-with-differnt-user-types)

[多种类型的 Ruby On Rails 用户模型](https://stackoverflow.com/questions/3956588/ruby-on-rails-user-model-for-multiple-types)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T21:58:48.793

可能为时已晚，但您也可以使用`has_and_belongs_to_many`on `User`，`Company`从而通过使用 gems [canscan](https://github.com/ryanb/cancan)和[rolify](https://github.com/EppO/rolify)完全避免 STI 。它允许您定义细粒度的访问权限（能力）。

我知道拥有不同的类而不是角色似乎更优雅，但这不是可行的长期策略，当逻辑变得复杂时它会变得混乱。

除此之外，其余的似乎很可靠，希望对您有所帮助:)

# android - 带有半透明标签导航的 ActionBarSherlock

> ID：14661464
> 
> 赞同：0
> 
> 时间：2013-02-02T11:34:19.660
> 
> 标签：android, tabs, android-actionbar, actionbarsherlock, android-tabs

在我的应用程序中，我有带有选项卡的 ActionBar，我想让选项卡半透明，但不是 ActionBar。是否可以通过样式和主题来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:53:07.390

您可以使用自定义布局并将其膨胀以将其用作选项卡

请在这里找到它：[https ://stackoverflow.com/a/10013297/951045](https://stackoverflow.com/a/10013297/951045)

并隐藏操作栏使用 getSupportActionBar().hide(); // 如果你正在使用支持库，否则使用 getActionBar().hide();

您还可以使用 Theme.Sherlock.NoActionBar 隐藏操作栏（用于支持库）

# android - Android 在适配器中更改数据

> ID：14661465
> 
> 赞同：2
> 
> 时间：2013-02-02T11:34:20.773
> 
> 标签：android, android-listview

我将此适配器用于我的 ListView：

```
Appadapter extends ArrayAdapter<ResolveInfo> 
     private PackageManager pm=null;
     List<ResolveInfo> apps;
     AppAdapter(PackageManager pm, List<ResolveInfo> apps) {
    super(Launchalot.this, R.layout.row, apps);
  this.apps=apps;
  this.pm=pm;
}

@Override
public View getView(int position, View convertView,
                      ViewGroup parent) {
      Log.w(Launchalot.this.getPackageName(),"getView");
  if (convertView==null) {
    convertView=newView(parent);
  }

  bindView(position, convertView);

  return(convertView);
}

private View newView(ViewGroup parent) {
    Log.w(Launchalot.this.getPackageName(),"newView");
  return(getLayoutInflater().inflate(R.layout.row, parent, false));
}

private void bindView(int position, View row) {
  TextView label=(TextView)row.findViewById(R.id.label);
  Log.w(Launchalot.this.getPackageName(),"bindView");
  label.setText(getItem(position).loadLabel(pm));

  ImageView icon=(ImageView)row.findViewById(R.id.icon);

  icon.setImageDrawable(getItem(position).loadIcon(pm));
}
    public void notifyDataSetChanged() {
        super.notifyDataSetChanged();
        setNotifyOnChange(true);}} 
```

我在 ListActivity 类中使​​用此代码填充我的视图：

```
AppAdapter adapter=new AppAdapter(getPackageManager(), getResolveInfoList(0));
setListAdapter(adapter); 
```

现在我已经更改了我称为 notifyDataSetChanged() 的列表应用程序，但我认为没有任何改变。请告诉我一个解决方案。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T12:54:12.487

这些信息仍然不足以看到问题并帮助您。这就是为什么我将用一个简单的例子来解释如何使用`notifyDataSetChanged();`on `MyCustomAdapter`。这是一个如何填充适配器的示例：

```
private ArrayList<String> _names;
private MyCustomAdapter _adapter;
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    _names = new ArrayList<String>();

    for(int i = 0; i < _names.size();i++){
        _names.add("Element : "+i);
    }

    _adapter = new MyCustomAdapter(this, _names);
    _myListView.setAdapter(_adapter);

}

private void refreshListView(){
    _names.clear();
    for(int i = 0; i < _names.size();i++){
        _names.add("New Element : "+i);
    }
    _adapter.notifyDataSetChanged();
} 
```

这里的想法是更改`List`您用来填充列表视图的内容。清除它，用新数据填充它，然后调用`notifyDataSetChanged();`。

就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:52:20.933

简短而快速，在您感觉数据集中已完成更改后调用这两行代码。

```
AppAdapter adapter=new AppAdapter(getPackageManager(), getResolveInfoList(0));
setListAdapter(adapter); 
```

# windows-7 - Windows 7 上的 Windows 8 模拟器？

> ID：14661471
> 
> 赞同：0
> 
> 时间：2013-02-02T11:35:18.157
> 
> 标签：windows-7, visual-studio-2012

通过在 windows 8 的 phonegap 上构建我的 android 应用程序，我得到了一个 .xap 文件。现在**我没有 Windows 8 电脑或 Windows 8 手机。**我想测试我的 xap 文件，那么我现在该怎么办？如果可以的话，是否可以在 Windows 7 上运行 xap 文件？我尝试安装 Windows 软件开发工具包，但找不到任何模拟器。有没有其他方法可以在 Windows 7 桌面上运行该应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:49:34.370

不，Windows 7 上没有适用于 Windows 8 的模拟器。

你最好的选择是[虚拟机](http://en.wikipedia.org/wiki/Virtual_machine)。两个最受欢迎的选项是[VirtualBox](https://www.virtualbox.org/)和[VMware](http://www.vmware.com/products/player/)。您可以运行虚拟 PC 并在其上安装 Windows 8（不过您需要安装 Windows 8）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:52:47.293

[Microsoft 在modern.ie](http://www.modern.ie/virtualization-tools)上发布了具有不同操作系统和浏览器的新虚拟映像。在页面的右侧，您会找到不同的虚拟化选项以及指向不同图像的下载链接。您可以下载和使用这些映像，而不必担心购买任何许可证、安装系统等（它们是有时间限制的，但您可以随意重置您的虚拟机）。

# grails - 在grails中获取动态bean字段

> ID：14661472
> 
> 赞同：2
> 
> 时间：2013-02-02T11:35:23.547
> 
> 标签：grails, groovy

我创建了一个 taglib 来缩短输入字段代码。它预设了“名称”、“值”等。现在我需要获取一个 bean 值，但保存该值的字段是动态的。
查看一些代码（缩短以更好地解决我的问题）：

普惠制：

```
<g:validatedInputField bean="${command}" field="surname" />
<g:validatedInputField bean="${command}" field="name" /> 
```

标签库

```
def validatedInputField = { attrs, body ->

    def field = attrs.field
    def bean = attrs.bean

    if (field && bean) {

        def val = bean.field
        out << "<input type=\"text\" name=\"$field\" bean=\"$bean\" value=\"$val\">"
    }
} 
```

所以问题出在下面一行。它显然不起作用，因为 bean 中没有字段“字段”。我希望它被“名称”或“姓氏”或参数“字段”的任何值动态替换。

```
def val = bean.field 
```

我尝试使用各种 GString/插值变体进行实验，但没有任何效果。
当然我可以添加另一个参数来传递值，但我觉得它不应该是必需的，因为我已经拥有了在 taglib 中获取它所需的一切......

你能给我一些指示吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:59:59.657

如果`bean`是一个对象实例并且`field`是一个表示该对象成员的字符串，您可以尝试以下操作：

```
def val = bean."$field" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T16:16:14.920

在 groovy 中，您可以使用 GStrings 动态引用对象的成员。例如：

```
def val = bean."${field}" 
```

您甚至可以在 GString 中执行一些逻辑。假设您有一个默认字段，并且您只想在“字段”变量中使用该名称，前提是它不为空：

```
def val = bean."${field ? field : "default"} 
```

# java - 从 SQL 重新查询或在 ArrayList 中循环并在 Java 中过滤数据是否更快？

> ID：14661473
> 
> 赞同：5
> 
> 时间：2013-02-02T11:35:36.340
> 
> 标签：java, mysql, sql, jdbc

我有一个从 SQL 查询中填充并包含表的所有行的 ArrayList。

如果我想要这个 ArrayList 的一个子集（比如 WHERE column1 = x）
，重新建立 SQL 连接并获取具有此条件的查询是否更快，或者循环遍历 arraylist 并过滤数据？（考虑 1000 行的数组列表）

如果通过arraylist的循环更快，直到它仍然适用的大小是多少？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:42:16.677

在 Java 中执行此操作应该总是更快。内存数组的 Java 过滤与 SQL 一样快，甚至更快。而且您还必须考虑连接到数据库、发送命令和解码答案的开销。

对于非常复杂的查询，通过 SQL 完成此操作可能会*更简单*，并且它可能更好地适应数据库大小（想想一百万行：您要将它们全部保存在内存中吗？）。此外，SQL 查询优化器可能有更多关于列基数的信息，并且能够*更有效*地执行，因此总体上比您仅仅基于逐个检查更快的 Java 代码执行得更快。

另一方面，还要考虑代码的可维护性。有些事情最好留给 SQL，即使它们这样慢一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T11:41:24.243

如果您已经将所有内容都保存在内存中，我的猜测是过滤列表将比对数据库进行进程间调用更快，尤其是对于如此少量的行。

但是首先将完整列表放在内存中似乎很奇怪。数据库速度很快，可以在您需要时返回您想要的数据。在内存中缓存这些小表的内容可能会使您的应用程序更加复杂，而不会显着提高速度。我会尽量让应用程序保持无状态，除非您遇到性能问题并且您证明缓存表内容可以解决问题。

# java - 在另一个类中使用带有逻辑的 Java swing GUI

> ID：14661478
> 
> 赞同：1
> 
> 时间：2013-02-02T11:36:27.673
> 
> 标签：java, swing, user-interface, logic, connect

我想使用另一个类的摆动 GUI，我的程序有逻辑。逻辑类是下面代码中的类 ApsVaje1。例如，我有两个类 GUI 和 Logic。在 GUI 中，我有 JTextArea 和 JTextField 以及一个 JButton。在类逻辑中，我有一些方法可以执行一些操作，而在我喜欢的逻辑类的主要方法中

# 伪代码

当按钮单击时：

```
String text = GUI.JTextField.get text    
String result = Method1(text)    
JText Area.setText(result) 
```

# 我的代码：

```
public class GUI extends javax.swing.JFrame {

    /**
     * Creates new form GUI
     */
    public GUI() {
        initComponents();

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jTextField1 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextArea2 = new javax.swing.JTextArea();
        jPanel1 = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jScrollPane1.setViewportView(jTextArea1);

        jButton1.setText("Vnesi");

        jTextArea2.setColumns(20);
        jTextArea2.setRows(5);
        jScrollPane2.setViewportView(jTextArea2);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 286, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 14, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 289, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addGap(32, 32, 32)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jButton1)
                            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 277, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 34, Short.MAX_VALUE)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(26, 26, 26))
            .addGroup(layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(19, 19, 19)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 160, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 149, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(13, 13, 13)
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton1)
                .addContainerGap(39, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(GUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(GUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(GUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(GUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new GUI().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextArea jTextArea2;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration
    public  String getField1Text(){
         return this.jTextField1.getText();
    }

    public  void setAreaText(String text){
        this.jTextArea1.setText(text);
    }

} 
```

和

```
import javax.swing.*;
import javax.swing.event.*;

public class ApsVaje1 {

    Sportnik[] tabelaSportnikov = new Sportnik[0];
    int vnos = 0;
    String podatki = "";
    /**
     * @param args the command line arguments
     */
    public Sportnik[] tvoriSportnike(int n){
        Sportnik[] tabelaSportnikov = new Sportnik[n];
        return tabelaSportnikov;
    }

    public  void izpisiTabelo(){
        for(int i = 0; i< tabelaSportnikov.length; i++){
            System.out.println(tabelaSportnikov[i].toString());

        }
    } 

    public static void main(String[] args) {
        GUI.main(args);
        while (true){            
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:19:26.673

我认为这个问题并不清楚。但据我了解，只需在 ApsVaje1 类中创建 GUI 实例即可。之后，您可以在 GUI 上使用 ApsVaje1 的任何逻辑。GUI的主要方法可以去掉。

我希望它对你的问题有用。如果您认为，我没有理解这个问题，那么请再次澄清这个问题。

# maven - Maven 3：Stripes Archetype - 无法创建项目？

> ID：14661483
> 
> 赞同：0
> 
> 时间：2013-02-02T11:36:55.250
> 
> 标签：maven, stripes, maven-archetype

我正在遵循本指南：

[http://www.stripesframework.org/pages/viewpage.action?pageId=1572995&decorator=printable](http://www.stripesframework.org/pages/viewpage.action?pageId=1572995&decorator=printable)

我运行以下命令，报告 BUILD SUCCESS：

> mvn install:install-file -Dfile=stripes-archetype-quickstart-1.0.jar -DgroupId=net.sourceforge -DartifactId=stripes-archetype-quickstart -Dversion=1.0 -Dpackaging=jar

我之前从这里下载了文件“stripes-archetype-quickstart-1.0.jar”：

[http://sourceforge.net/projects/mvnstripes/files/stripes-quickstart-1.0/1.0/stripes-archetype-quickstart-1.0.jar/download](http://sourceforge.net/projects/mvnstripes/files/stripes-quickstart-1.0/1.0/stripes-archetype-quickstart-1.0.jar/download)

到目前为止一切顺利，现在我继续本指南并尝试使用以下命令创建基于原型的项目：

> mvn archetype:generate -DarchetypeArtifactId=stripes-archetype-quickstart -DarchetypeGroupId=net.sourceforge -DarchetypeVersion=1.0

但是 Maven 似乎无法识别新安装的原型；它进入交互模式：

> 您的过滤器不匹配任何原型（提示：输入以返回初始列表）选择一个数字或应用过滤器（格式：[groupId:]artifactId，区分大小写包含）：：

我在这里缺少一个技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:11:07.060

在引用本地原型时，您应该使用选项“-DarchetypeCatalog=local”，例如

```
 mvn  archetype:generate -DarchetypeCatalog=local 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-10T08:17:12.947

with`-DinteractiveMode=false`将解决问题

# windows-phone-7 - GeoCoordinateWatcher 在后台使用 ScheduledTaskAgent 运行时不提供最新数据

> ID：14661484
> 
> 赞同：0
> 
> 时间：2013-02-02T11:37:04.010
> 
> 标签：windows-phone-7, windows-phone-7.1

从 ScheduledTaskAgent 使用 GeoCoordinateWatcher 类时，不会提供实时 GPS 数据。尽管 GeoCoordinateWatcher 对象的 PositionChanged 事件被触发了两次以上，但它每次都显示相同的旧数据。我将阈值保持为 0.0 。

但是来自 UI 的同一个 GeoCoordinateWatcher 对象的 PositionChanged 事件被触发了两次以上，并在最后一个 PositionChanged 事件中提供了有关位置的最新数据。

知道如何在每 30 分钟触发一次的 ScheduledTaskAgent 中解决此问题。

代码 ：

```
var watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
watcher.MovementThreshold = 0.0;
watcher.Start();
watcher.PositionChanged += _watcher_PositionChanged; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:36:44.217

你是什​​么意思“修复”？

[API 按文档说明工作](http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx)：

GeoCoordinateWatcher API，用于获取设备的地理坐标，支持在后台代理中使用，但它使用缓存的位置值而不是实时数据。缓存的位置值由设备每 15 分钟更新一次。

# c++ - 将元素添加到链表后面时出错

> ID：14661491
> 
> 赞同：1
> 
> 时间：2013-02-02T11:37:44.430
> 
> 标签：c++, debugging, class, linked-list

我正在尝试将一个元素添加到链表的后面。

我能够添加元素，并且在第一次尝试时一切正常，但是当我尝试添加另一个元素时，之前添加的元素变成了垃圾值。

当我用`LinkedList::process_example(int choice,LinkedList &set)`函数声明中完全相同的代码替换主菜单中的函数时，问题就解决了。谁能给我解释一下为什么？？？

```
#include <iostream>
#include <ctime>
using namespace std;

struct Node;
typedef void* VoidPtr;
typedef Node* NodePtr;
typedef char* ZodiacSign;
const int MAX=12;

struct Node
{
NodePtr next;
VoidPtr data;

};

class LinkedList
{
public:
LinkedList();

//~LinkedList();

void Addelement(VoidPtr);

void printSet();

int compareEqual(VoidPtr,VoidPtr);

void swap(int num,int x,ZodiacSign tempSign [MAX]);

void process_example(int choice);

int check_cardinality();

void Addelementfromback(VoidPtr);

private:

NodePtr head;

ZodiacSign getVP(VoidPtr);

};

int choice=1;
LinkedList set;
do {
    cout<<endl
        <<endl;

    cout<<"Wish to try the following operation?"
        <<endl
        <<"1\. Add an element to set"// the function to add to back of linked list
        <<endl
        <<"2\. Check an element in set"
        <<endl
        <<"3\. check carinality"
        <<endl
        <<"9\.  Quit"
        <<endl
        <<endl;

    cout<<"Your choice : ";
    cin>>choice;

    cin.clear();
    cin.ignore(200,'\n');

    set.process_example(choice);

} while (choice !=9);

void LinkedList::process_example(int choice)
{
    switch (choice)
    {
    case 1:
        cout<<endl
            <<endl
            <<"Current S = ";

        this->printSet();

        cout<<"Enter an element :";

        char element [30];

        cin>>element;

        cin.clear();
        cin.ignore(200,'\n');

        this->Addelementfromback(element);

        cout<<endl
            <<endl
            <<"Current S = ";

        this->printSet();

        break;

    case 3:
        cout<<endl
            <<endl;

        cout<<"Current Set S = ";
        set.printSet();

        cout<<endl
            <<"S has ";

        int count=this->check_cardinality();

        cout<<count
            <<" elements";
    }
}

void LinkedList::printSet()
{
    NodePtr temp = head;

    cout<<"{ ";

    while (temp != NULL)
    {
        cout << getVP (temp -> data) << " , ";
        temp = temp -> next;
    }
    cout<<" } ";
    cout << endl;
}

void LinkedList::Addelementfromback(VoidPtr horoscope)
{
    NodePtr temp = head;

    while (temp->next != NULL)
    {
        temp=temp->next;
    }

    NodePtr element = new Node;
    element->data=horoscope;
    element->next=NULL;
    temp->next=element;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:32:39.190

正如 WhozCraig 已经提到的，您需要将以下行添加到构造函数中

```
Head = NULL; 
```

然后您可以将类似这样的内容添加到函数 Addelementfromback 的开头

```
If(Head == NULL)
{
     Head = new Node;
     Head->data = horoscope;
     Head->next = NULL;
     return;
} 
```

您还需要更改 LinkedList::process_example 中的以下行

```
 char elements[30]; 
```

到

```
 char* elements = new char[30]; 
```

# c++ - 在速度方面值得在交换之前比较价值吗？

> ID：14661493
> 
> 赞同：1
> 
> 时间：2013-02-02T11:38:40.023
> 
> 标签：c++, performance, pointers, null, compare

标题可能听起来很复杂，但只要几行代码就很容易理解了。

假设您有一个指针数组，它可能是 NULL 或可能指向实际结构。我们的任务是将所有指针设置为 NULL（删除无关紧要）。

我们可以通过以下方式做到这一点：

```
 // first way
 array[i] = NULL;

 // second way
 if (array[i] != NULL)
      array[i] = NULL; 
```

我想知道，如果我们采用第二种方式，我们会在已经为 NULL 的值上节省一些速度吗？假设数组已经 50% 为 NULL。我的大学讲师曾经提到“比较不花钱，而改变价值”。这是真的吗？如果我们采用第二种方式，我们会对速度产生积极影响吗？或者额外的比较只会浪费时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T11:43:31.863

第一种方式总是更快。您必须读取指针以检查它是否为空，然后写入它，这比写入它需要更长的时间。虽然进行比较本身可能不会花费太多时间，但采用条件分支的后果肯定不好。[好的，所以编译器可以消除它，但完全不能保证]。

但与性能一样，“在互联网上询问并不能代替测量！”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:43:30.893

如果我们总是可以保存一些东西，那么编译器会在很多情况下进行这种机械转换。从来没有听说过。

**我至少**可以想到一种可能会节省一些东西的情况：如果你有一个巨大的数组，你在随机位置分配了一个数组，并且值通常是相同的。在这种情况下，您可能希望延长分支的周期，以防止 CPU 弄脏高速缓存行并被迫将其写回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:45:25.180

像往常一样，答案是“视情况而定”。关于您的问题集有多大，以及您的特定机器的特性。*没有什么比对实际经验证据*的剖析更好了。

您实际上是在将其中一个换成另一个：

*   条件分支的成本。
*   内存访问的成本。

对于每个数组元素，您的第一个解决方案只需要一次内存写入。第二种解决方案需要读取、比较，然后是条件写入。如果读取比写入便宜，并且比较相对便宜，那么如果有很多 NULL 条目，它可能会更快。

我的头上的回答是第一种方法，相当于 a `memcpy`，在现代处理器上可能更快，特别是如果使用非临时写入进行优化，因为它不会分支（昂贵！）并且不需要浪费你的带有元素的 CPU 缓存只读取一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T13:57:12.407

让我们从基本原则开始：你的导师告诉你的往往是完全倒退的。写入通常比读取快。具体来说（至少对于大多数现代 CPU），写入只是意味着将地址和值存入队列。然后 CPU 的其他部分可以处理将该值写入内存，而执行单元可以继续执行更多指令。但是，如果在写入队列已满时/如果您尝试写入更多数据，指令流可能会停止。

相比之下，要进行比较，如果数据尚未在缓存中，则必须将地址写入内存，然后停止直到数据从内存到达才能正确使用它进行比较。

比较还使用标志寄存器，它有很大的“寄存器压力”，因为大多数指令都会修改它们。这可以防止原本可用的指令级并行性。

现在，确实，您通常宁愿避免使用相关数据污染缓存，除非您很快会将其用于其他目的。*一些缓存通过不在*写入时分配缓存空间而完全避免了这种情况——即，除非您最近读取了数据，因此它已经在缓存中，否则写入它不会将其移动到缓存中；它只会将数据直接写入主存储器。

许多（大多数？）最近的处理器还具有始终直接写入内存的指令，而不管缓存策略如何。英特尔（例如）调用这些非临时存储（例如，MOVNTQ 和 MOVNTPS）。但是，正确使用这些可能有点棘手。与普通的内存写入不同，默认情况下它们不保证缓存一致性。您需要在写入后执行 SFENCE 指令，以确保其他处理器将看到写入的结果。

另一次值得进行比较的时候是单个比较可以让您避免*大量*写入。例如，假设您的数组非常稀疏，因此几百个条目中只有大约一个是非空的。在这种情况下，您可以（例如）使用位图，其中位图中的一位表示指针是否为空。在这种情况下，单个 64 位比较可以让您避免（例如）写入每个 64 位的 64 个不同指针中的*任何一个。*

不过，单独查看指针不会带来任何好处——具体而言，您需要先将每个指针加载到缓存中，然后才能进行比较，因此尝试逐个比较以避免污染缓存是一种弄巧成拙的主张。

# iphone - 登录谷歌下载文件 - ios

> ID：14661496
> 
> 赞同：0
> 
> 时间：2013-02-02T11:39:08.640
> 
> 标签：iphone, ios, objective-c, nsurlconnection

我正在尝试从 googletrends 下载文件。为此，我必须登录。我正在使用 NSURLConnection 所以我想我必须使用

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge 
```

我必须设置什么参数？即我如何定义用户名和密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:51:38.120

使用**[NSURLCredential](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLCredential_Class/Reference/Reference.html)**传递用户名和密码：

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    NSURLCredential *credential = [NSURLCredential credentialWithUser:userName password:userPassword persistence:NSURLCredentialPersistenceForSession];

    [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
} 
```

请查看本教程：[**处理 URL 身份验证挑战**](http://mobiledevelopertips.com/networking/handling-url-authentication-challenges-accessing-password-protected-servers.html)

# objective-c - UIView addSubview 也不在 UITableViewCell 中工作

> ID：14661498
> 
> 赞同：0
> 
> 时间：2013-02-02T11:39:14.540
> 
> 标签：objective-c, uitableview, uiview, addsubview

barView 我有一个表格视图，并且在每个单元格中，我想绘制一些统计条。我`UIView`在自定义单元格中创建了一个空单元格，它的名称是`mainView`，它是绘制图表的视图。

在`cellForRowAtIndexPath`我这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCellIdentifier";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    CGRect barRect = CGRectMake(0, 0, 100, 10);

    UIView *barView = [[UIView alloc] initWithFrame:barRect];
    [barView setBackgroundColor:[UIColor redColor]];
    [cell.mainView addSubview:barView];

    return cell;
} 
```

加载时不显示`barView`。它仅在我更改并从另一个选项卡返回或**单元格离开屏幕后显示**。

**笔记：**

*   我试过了`[cell.mainView setNeedsDisplay];`
*   我有一个用另一个自定义单元格制作的标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:05:00.787

试试这个：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCellIdentifier";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        CGRect barRect = CGRectMake(0, 0, 100, 10);
        UIView *barView = [[UIView alloc] initWithFrame:barRect];
        [barView setBackgroundColor:[UIColor redColor]];
        [cell addSubview:barView]; // use cell.mainView if you have that created somewhere other than here (like IB)
    }

    return cell;
} 
```

`dequeueResuable...`可以返回一个零单元格。所以你需要检查一下，看看你是否应该分配/初始化一个新单元。在我给你的代码中，如果`dequeueResuable...`返回一个正确的单元格，那么它会在子视图完好无损的情况下创建。所以不需要重新添加它（因此只在 中创建它`if (!cell)`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:06:22.820

您的描述清楚地表明您正在此函数之外填充 barView。这样它只有在转换后才可见。或者您只是在此处提供的内容之外覆盖它（甚至覆盖主视图）。

检查您的 viewdidload 和 viewdidappear 等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T15:26:58.423

我已经很容易解决了：

```
- (void)viewDidAppear:(BOOL)animated
{
    [self.tableView reloadData];
} 
```

在窗口中创建视图之前，在单元格完全加载之前，似乎无法添加子视图。

# php - 使用 phpMyAdmin 同步 MySQL 远程和本地数据库

> ID：14661501
> 
> 赞同：20
> 
> 时间：2013-02-02T11:39:25.467
> 
> 标签：php, mysql, phpmyadmin

我有本地 MySQL 数据库，它偶尔会发生变化，当它发生变化时，我想将它与远程数据库同步。我正在使用 PhpMyAdmin 的同步选项。

我已授予所有 IP 远程连接的权限。

**问题：** 当我想使用 PhpMyAdmin 的同步选项将远程数据库与本地数据库同步时。它只显示了数据库结构的差异，但两个数据库上的数据也不同，但没有显示出这种差异。

当我通过单击`Synchronize Database`按钮同步数据库并再次进行同步时。它再次显示相同的结构同步。

见下图 ![在此处输入图像描述](../Images/4a95eb33de69cb34b6a7d5581c6ce49c.png)

如果有人对此有替代解决方案，请同时告知。 **本地详细信息** 操作系统：Windows7 软件：EasyPHP12.0 **远程详细信息** 服务器：Linux Cpanel PhpMyAdmin

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-02T12:11:07.983

打开`phpMyAdmin/config.inc.php`并添加关于**"Server Configuration"**的这些行。

```
$i++;
$cfg['Servers'][$i]['host']          = '<remote-server-address>'; // Remote MySQL hostname or IP address
$cfg['Servers'][$i]['port']          = '';          // MySQL port - leave blank for default port
$cfg['Servers'][$i]['socket']        = '';          // Path to the socket - leave blank for default socket
$cfg['Servers'][$i]['connect_type']  = 'tcp';       // How to connect to MySQL server ('tcp' or 'socket')
$cfg['Servers'][$i]['extension']     = 'mysql';     // The php MySQL extension to use ('mysql' or 'mysqli')
$cfg['Servers'][$i]['compress']      = FALSE;       // Use compressed protocol for the MySQL connection
$cfg['Servers'][$i]['auth_type']     = 'config';    // Authentication method (config, http or cookie based)?
$cfg['Servers'][$i]['user']          = '<db-username>';     // Remote MySQL user
$cfg['Servers'][$i]['password']      = '<db-password>';     // Remote MySQL password 
```

> 现在您的 phpMyAdmin 首页上有一个“服务器”下拉菜单。选择你的服务器和宾果游戏！

致谢：[codejourneymen](http://www.codejourneymen.com/content/configure-local-phpmyadmin-access-remote-server)

而且，有很多例子，也许有帮助：

[phpadmin 远程数据库](https://www.google.com/search?q=phpmyadmin%20remote%20database)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T16:50:33.710

我的回答与 PhpMyAdmin 无关，但无论如何，让我向您推荐dbForge Studio for MySQL 中的[模式/数据比较工具](http://www.devart.com/dbforge/mysql/studio/database-synchronization.html)。这些工具将帮助您查找、查看差异和同步两个数据库。

如果您无权访问远程数据库，那么您可以使用 HTTP 隧道连接，或者使用 SSL/SSH 安全连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T10:03:27.293

尝试使用 SQLyog 作业代理 (SJA) 在 Windows 上，它与屡获殊荣的 MySQL GUI SQLyog 一起使用。SJA 的 Linux 版本是免费的，可以从 webyog.com 下载

[在这里检查](http://www.sitepoint.com/mysql-data-sqlyog-job-agent/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-18T14:05:40.583

在创建表时，我会让远程服务器使用偶数并让本地服务器添加奇数以自动递增。然后有一个脚本可以在服务器之间拉取或推送数据，而不会出现任何重复问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T20:51:10.417

我不明白你为什么不只是更新遥控器并一起放弃本地数据库。建议：您可能需要设置两个遥控器 - 例如：dev.domain.com、www.domain.com。将本地代码链接到开发并更新/测试，然后当您想投入生产时，只需将数据转储到 www DB 上。当本地数据库出现故障时，安全和备用准备就绪。

# android - android触发另一个项目活动

> ID：14661502
> 
> 赞同：1
> 
> 时间：2013-02-02T11:39:40.643
> 
> 标签：android, android-activity

这个问题吓死我了

我有一个应用程序，现在我想在客户端 android 应用程序和 localhost tomcat 7 服务器之间传输数据，我以前做过很多次，现在当我想从客户端向服务器发送数据时它运行良好，我可以看到数据服务器，但是发生了一些事情，android应用程序试图触发另一个项目的活动我删除了那个项目然后仍然尝试从另一个项目触发活动

我的活动名称是“注册”，Android 客户端试图从另一个项目中触发具有相同名称的活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:47:57.437

如日志：

> NumberFormatException：无法将 '[Lorg.apache.http.Header;@44ee4c10' 解析为整数

意味着您正在尝试将错误的字符串解析为 Integer 。将强制转换代码包装在 try/catch 块中以避免`NumberFormatException`：

```
String str_NumberOfCities="";
 Header[] headers = response.getAllHeaders();
  for (int i=0; i < headers.length; i++) {
         Header h = headers[i];
          Log.i(TAG, "Header names: "+h.getName());
          if(h.getName().toLowerCase().contains("NumberOfCities".toLowerCase()){
                str_NumberOfCities=h.getValue();
           }
      Log.i(TAG, "Header Value: "+h.getValue());
  }
int numberOfCities=0;
 try {
       numberOfCities = Integer.parseInt(str_NumberOfCities);
   } catch (NumberFormatException e) {
       numberOfCities=0;
    }
Data.cities = new String[numberOfCities];
///....your code 
```

# iphone - MapView 仅在第二次加载后显示正确的位置

> ID：14661503
> 
> 赞同：0
> 
> 时间：2013-02-02T11:39:44.083
> 
> 标签：iphone, objective-c, xcode, map, mkmapview

我`mapview`在我的应用程序上苦苦挣扎。加载屏幕时`mapview`，地图只会打开到 的默认位置`mapviews`。但是，当我返回上一个屏幕然后第二次启动地图时，会显示正确的位置。

显然，这并不理想。

请问有什么建议吗？

我的代码是：

```
CLLocation *mapLocation = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude];
[[self map] setCenterCoordinate:[mapLocation coordinate]];
[[self map] setRegion: MKCoordinateRegionMakeWithDistance([mapLocation coordinate], 1000, 1000)];        
MapAnnotation *annotation = [[MapAnnotation alloc] init];
[annotation setCoordinate:[mapLocation coordinate]];
[[self map] addAnnotation:annotation]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:22:14.020

我这样设置当前位置：
Location.h：

```
@interface WhereamiViewController : UIViewController <CLLocationManagerDelegate, MKMapViewDelegate, UITextFieldDelegate> {
CLLocationManager *locationManager;    
MKMapView *worldView;
IBOutlet UIActivityIndicatorView *activityIndicator;
IBOutlet UITextField *locationTextField;
}

- (void)findLocation;
- (void)foundLocation:(CLLocation *)loc;
- (IBAction)setMapTyp:(id)sender;

@property MKMapType mapType;
@property (nonatomic, retain) IBOutlet MKMapView *worldView;
@property (nonatomic, readonly) NSDate *currentDate;

@end 
```

地点.m:

```
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation {
NSLog(@"%@", newLocation);

NSTimeInterval t = [[newLocation timestamp] timeIntervalSinceNow];
if (t < -180) {
    return;
}

[self foundLocation:newLocation];
}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation {
CLLocationCoordinate2D loc = [userLocation coordinate];
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(loc, 250, 250);
[worldView setRegion:region animated:YES];
}

- (void)locationManager:(CLLocationManager *)manager
   didFailWithError:(NSError *)error {
NSLog(@"Could not find location: %@", error);
}

- (void)findLocation {
[locationManager startUpdatingLocation];
[activityIndicator startAnimating];
[locationTextField setHidden:YES];
}

- (void)foundLocation:(CLLocation *)loc {
CLLocationCoordinate2D coord = [loc coordinate];
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"HH:mm, dd. MMM. yyyy "];

NSDate *now = [[NSDate alloc] init];

NSString *dateString = [format stringFromDate:now];

MyOwnMapPoint *mp = [[MyOwnMapPoint alloc] initWithCoordinate:coord
                                                    title:[locationTextField text]
                                                 subtitle:dateString];
NSLog(@"Die Uhrzeit ist: %@", dateString);
[worldView addAnnotation:mp];
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(coord, 250, 250);
[worldView setRegion:region animated:YES];

//Reset the UI
[locationTextField setText:@""];
[activityIndicator stopAnimating];
[locationTextField setHidden:NO];
[locationManager stopUpdatingLocation];
} 
```

希望它能给你一个想法！

# c++ - QString 选择行范围

> ID：14661504
> 
> 赞同：0
> 
> 时间：2013-02-02T11:40:07.910
> 
> 标签：c++, qt, qt4, qstring

我有一个巨大的 QString（一个大日志文件），例如，我如何选择第 10 行到第 20 行？

就像是

```
QString tenLines = bigHugeQstring.linesRange(10,20); 
```

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:21:37.660

QStringList 是一个更好的解决方案

# scala - 更新地图的值

> ID：14661506
> 
> 赞同：0
> 
> 时间：2013-02-02T11:40:18.877
> 
> 标签：scala

我有一个像这样的地图：

```
Map("product1" -> List(Product1ObjectTypes), "product2" -> List(Product2ObjectTypes)) 
```

哪里`ProductObjectType`有一个字段`usage`。基于其他字段 ( `counter`) 我必须更新所有`ProductXObjectTypes`.

问题是此更新取决于*previous* ，并且在迭代此地图`ProductObjectType`时我找不到获取上一个项目的方法。`mapValues`所以基本上，要更新`usage`我需要的电流：`CurrentProduct1ObjectType.counter - PreviousProduct1ObjectType.counter`.

有没有办法做到这一点？

我开始这样：

```
val reportsWithCalculatedUsage =
  reportsRefined.flatten.flatten.toList.groupBy(_._2.product).mapValues(f) 
```

但我不知道`mapValues`如何访问*上一个*列表项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:52:27.590

请注意，常规地图是无序的集合，您需要使用 TreeMap 之类的东西来获得可预测的迭代顺序。

无论如何，据我了解，您希望在地图中获得所有值对。尝试这样的事情：

```
scala> val map = Map(1 -> 2, 2 -> 3, 3 -> 4)
scala> (map, map.tail).zipped.foreach((t1, t2) => println(t1 + " " + t2))
(1,2) (2,3)
(2,3) (3,4) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T13:06:49.433

我不确定我是否完全理解，但是如果您想根据其前身更新**列表中**的值，通常可以通过折叠来完成：

```
case class Thing(product: String, usage: Int, counter: Int)

val m = Map(
  "product1" -> List(Thing("Fnord", 10, 3), Thing("Meep", 0, 5))
  //... more mappings
)

//> Map(product1 -> List(Thing(Fnord,10,3), Thing(Meep,0,5)))

m mapValues { list => list.foldLeft(List[Thing]()){
  case (Nil, head) =>
    List(head)
  case (tail, head) =>
    val previous = tail.head
    val current = head copy (usage = head.usage + head.counter - previous.counter)
    current :: tail
} reverse }

//> Map(product1 -> List(Thing(Fnord,10,3), Thing(Meep,2,5))) 
```

# asp.net - 如何根据输入参数asp.net显示表格数据？

> ID：14661507
> 
> 赞同：0
> 
> 时间：2013-02-02T11:40:20.427
> 
> 标签：asp.net, sql-server

我想在我的 asp.net 页面中搜索。在此页面中，用户在文本框中键入名称，然后从具有两个值 ( ) 的组合框中选择一个值，她/他还必须从单选按钮列表 ( ) 中`ascending, descending`选择一个选项。`price, add_date, name`

现在这些参数发布到数据库。SQL Server 2008 中的哪些存储过程可以`Product`根据这些参数显示我的表的数据？

我的表是`Product`并且有这些列：`ID, Name, picture, Price, Added_date`

例如，当用户`Camera`在文本字段中键入并选择`Ascending`and`price`时，结果必须是一个表格，该表格根据其价格以升序显示所有相机。

我真的不知道什么可以存储过程？我是数据库新手。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:48:52.527

尝试这个：

**存储过程：**

```
CREATE PROCEDURE dbo.GetProducts
@Name NVARCHAR(100),
@SortOrder CHAR(10) 
AS
BEGIN
IF @SortOrder = 'ASCENDING'
    SELECT ID,[Name],Price,AddedDate FROM Product
    WHERE [Name] LIKE '%' + @Name + '%'
    ORDER BY [Name] ASC
ELSE IF @SortOrder = 'DESCENDING'
    SELECT ID,[Name],Price,AddedDate FROM Product
    WHERE [Name] LIKE '%' + @Name + '%'
    ORDER BY [Name] DESC
END 
```

**你像这样执行它：**

```
EXEC GetProducts @Name='Cam',@SortOrder='DESCENDING' 
```

# html - jQuery改变另一个

> ID：14661508
> 
> 赞同：3
> 
> 时间：2013-02-02T11:40:21.780
> 
> 标签：html, jquery, blackberry-webworks

我正在尝试使用 jQuery`.change()`创建两个`<select>`元素，第一个元素`<select id="state">`用于生成州列表，第二个`<select id="city">`用于生成城市列表。

州和城市的值不会被硬编码，而是从 Web 服务传递的值生成。

要生成的选项列表应该像这样工作：如果用户从`<select id="state">`选定的值中选择状态，则将传递给 Web 服务以检索列表以生成`<select id="city">`城市。

我真的不确定如何实现这一点。谁能给我建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:55:15.763

它应该看起来像

```
$(function(){
// populate the states list from Ajax 

    $.ajax( {
       url:"/listStates",
       type:"GET",
       success:function( data ) { 
            var statesList = data;
            if ( typeof(data) == "string" ){
                 statesList = JSON.parse(data);
            }
            $.each( statesList, function( index, state ){
                     $("#state").append($("<option></option>",{value:state.value, text:state.label});
                });
       },
       error:function( result ) { 
            console.log(["error getting states",result]);
       }
    });

    // register on state list change
    $("#state").change( function(){
            // on change dispatch an AJAX request for cities and populate cities 
        $.ajax({ url : "/listCities",
            data : {"state": $("#state").val() },
            type:'GET',
            success:function( data ) {
                var citiesList = data; // assuming list object
                if ( typeof(data) == "string"){ // but if string
                    citiesList = JSON.parse( data );
                } 
                            $("#city").empty();
                $.each(citiesList, function(index,city){
                    $("#city").append($("<option></option>", {"value":city.value, "text":city.label}));
                }
            },
            error:function( result ){ console.log(["error", result]); }

    })
}); 
```

这可以让你开始，但是我没有在这里遵循 lint 最佳实践。

## 走过

*   我在带有 id 状态的 select 上注册了一个“更改”事件。
*   如果触发更改，我会调用 Ajax 请求到位置“/listCities”
*   我假设这个位置是用“GET”方法调用的
*   我传递当前选择的状态 - 所以服务器将知道要列出哪些城市。
*   如果 Ajax 通过错误，我将错误记录到控制台。
*   如果 Ajax 成功，我会使用包含每个城市的值和标签的选项填充 id 为“city”的选择。

我在编写代码时假设了以下事情

*   您有一个需要状态的路线 GET /listCities。
*   该路由的响应是一个 JSON，其中包含每个城市的值和标签列表。像这样的东西：

    `[{ value : "AM" , label : "Amsterdam" }, .... ]`

对于此示例，您可能需要阅读的唯一内容是：

*   [JQuery Ajax 调用](http://api.jquery.com/jQuery.ajax/)
*   [使用 JQuery 填充列表的最佳实践](https://stackoverflow.com/a/818611/1068746)

如果您有任何问题，请评论我的回复，我将很乐意解释/添加/修改

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T11:59:22.707

你必须按照一些步骤来实现这一点：

*   首先，当页面加载通过 ajax 填充第一个国家/地区列表时（我的假设）
*   然后使用国家/地区列表创建一个`.change()`事件
*   这将发送请求并根据所选国家/地区返回状态列表响应。

你可以尝试这样测试：

```
$(function(){
   $.ajax({
      url:your url,
      type: 'post',
      dataType: 'json', // or your choice of returned data
      success: function(data){
          $.each(data, function(i, v){
             $('<option value="'+v.name+'">'+v.text+'</option>').appendTo('#country');
          });
      }
   });

   $('#country').change(function(){
       $.ajax({
         url:your url,
         type: 'post',
         dataType: 'json', // or your choice of returned data
         success: function(states){
             $.each(states, function(i, stt){
                $('<option value="'+stt.name+'">'+stt.text+'</option>').appendTo('#states');
             });
         }
      });
      $('#states').empty();
   });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T11:46:11.593

非常简单 - 您所要做的就是拥有两个下拉列表，一个包含完整的州列表，第二个（空）城市列表将仅包含一个空白的禁用选项。

一旦您的州下拉菜单触发`change`事件，您就提取州数据并通过 AJAX 调用将其发送到您的服务器或某些 Web 服务，该服务将返回该州的城市列表。

然后，您将使用返回的城市值填充第二个下拉列表。

# html - 浮动元素从 html 列表中丢失

> ID：14661509
> 
> 赞同：1
> 
> 时间：2013-02-02T11:40:21.420
> 
> 标签：html, css, css-float, mobile-safari, safari

**重要的提示！** 我只在运行 Safari 4.0 (528.16) 的第一代 iPhone 上重新创建了这个错误，但是当我试图让我的网站尽可能广泛兼容时，这仍然是一个潜在的问题......

问题：列表中的浮动元素没有出现在屏幕上。我已将问题缩小到以下规则组合：

```
<html>
<head>
    <style>
        p {
            float: left;
            overflow: hidden;
        }

        ul {
            list-style: none;
        }
    </style>
</head>
<body>
    <ul>
        <li><p>hello</p></li>
    </ul>
</body> 
```

`<li>`如果我在后面的标签内放置一个非浮动元素`<p>`，则 中的文本`<p>`变为可见。

到目前为止，我已经在 Windows 7 上的最新版本的 Chrome/IE/Firefox、iPhone 4 上的 Safari 和 Android (4.2.1) 上的 Chrome/Firefox/Opera 上对此进行了测试，并且出现了所描述的`not`问题

我再说一遍：**我只看到它发生在 Safari 4.0 上**，但由于我无法测试每个平台/浏览器版本组合，我担心这个问题可能会更普遍。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:23:41.677

我也遇到了这个问题，但是我在 Windows 7 的 Safari 5.1.7 中看到了它。

不幸的是，我当前的修补程序是基于 JavaScript 的：

```
 $('.listContainer').hide();
    $('.somethingElse').hide();
    $('.listContainer').show(); 
```

我不完全理解为什么会这样，但只要 .somethingElse 是一个有效的选择器，隐藏/显示操作就不应该被优化掉，实际上会强制 Safari 呈现列表。真正了解其中细节的人可能会提供更优雅的解决方案，但这就是我现在正在使用的技巧。

编辑

奇怪的是，如果我将动态生成的 HTML 静态放入正在处理的 .html 文件中，Safari 中就不会出现渲染问题。在 Safari 中构建 DOM 的方式发生了一些较低级别的事情，这打破了这一点。我也很可能没有遵循一些关于如何将新元素实时添加到 DOM 的标准。

有什么帮助吗？也许我应该添加一个我自己的问题。

**最终编辑**

好吧，我现在通过 CSS 让它工作了。

解决方案是让列表项*溢出：隐藏。*

我不知道为什么，但这解决了我的问题。希望它能解决你的问题。试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:25:59.387

当有一堆浮动元素时，父元素将无法正确计算其高度。

毕竟你的浮动元素包括一个空元素如下

`<div class="break"></div>`

`. break{ height: 1px; width: 100%; clear: both; float: none; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T17:59:52.790

我认为这里的问题是你有`overflow:hidden`这就是你的元素超出范围的原因。实际上，如果您有任何指定宽度的元素，`overflow: hidden`然后您试图隐藏一些内部标签

例如：

```
<div style='width:200px'>
<div style='float:left;'>asdfkl</div>
<div style='float:left;'>asdfkl</div>
<div style='float:left;'>asdfkl</div>
<div style='float:left;'>asdfkl</div>
<div style='float:left;'>asdfkl</div>
<div style='float:left;'>asdfkl</div>
</div> 
```

然后，您实际上是在尝试**隐藏超出给定 200px 宽度的任何内容，前提是**您有**内部 div 浮动**，以便它们都在同一行/部分或 div 中

# http - 为 HTTP 客户端设置代理

> ID：14661511
> 
> 赞同：60
> 
> 时间：2013-02-02T11:40:31.357
> 
> 标签：http, proxy, request, go

我正在尝试设置 HTTP 客户端，以便它使用代理，但是我不太明白该怎么做。该文档对“代理”有多个引用，但似乎没有一个函数允许定义代理。我需要的是这样的：

```
client := &http.Client{}
client.SetProxy("someip:someport") // pseudo code
resp, err := client.Get("http://example.com") // do request through proxy 
```

知道如何在 Go 中执行此操作吗？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-02-02T15:52:39.007

lukad 是正确的，你可以设置`HTTP_PROXY`环境变量，如果你这样做，Go 将默认使用它。

重击：

```
export HTTP_PROXY="http://proxyIp:proxyPort" 
```

去：

```
os.Setenv("HTTP_PROXY", "http://proxyIp:proxyPort") 
```

您还可以构建自己的 http.Client ，无论环境的配置如何，都必须使用代理：

```
proxyUrl, err := url.Parse("http://proxyIp:proxyPort")
myClient := &http.Client{Transport: &http.Transport{Proxy: http.ProxyURL(proxyUrl)}} 
```

如果您不能依赖环境的配置，或者不想修改它，这将很有用。

您还可以修改 " `net/http`" 包使用的默认传输。这会影响您的整个程序（包括默认的 HTTP 客户端）。

```
proxyUrl, err := url.Parse("http://proxyIp:proxyPort")
http.DefaultTransport = &http.Transport{Proxy: http.ProxyURL(proxyUrl)} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-02T12:39:32.187

`HTTP_PROXY`如果设置了，Go 将使用环境变量中定义的代理。否则它将不使用代理。

你可以这样做：

```
os.Setenv("HTTP_PROXY", "http://someip:someport")
resp, err := http.Get("http://example.com")
if err != nil {
    panic(err)
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-15T08:38:19.097

你也可以试试这个：

```
url_i := url.URL{}
url_proxy, _ := url_i.Parse(proxy_addr)

transport := http.Transport{}    
transport.Proxy = http.ProxyURL(url_proxy)// set proxy 
transport.TLSClientConfig = &tls.Config{InsecureSkipVerify: true} //set ssl

client := &http.Client{}
client.Transport = transport
resp, err := client.Get("http://example.com") // do request through proxy 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-15T17:47:23.177

Go 内置代理的使用简要记录在`DefaultTransport`：

```
// DefaultTransport .... It uses HTTP proxies
// as directed by the $HTTP_PROXY and $NO_PROXY (or $http_proxy and
// $no_proxy) environment variables.
var DefaultTransport RoundTripper = &Transport{
    Proxy: ProxyFromEnvironment, 
```

`DefaultTransport`这表明从头开始创建自定义传输以利用内置`ProxyFromEnvironment`函数的有用性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-16T11:50:56.943

如果你运行这样的东西：

```
HTTP_PROXY=89.x.y.z path_to_program 
```

然后只为该命令设置 HTTP_PROXY 设置，如果您不想为整个 shell 会话设置它，这很有用。注意：没有 ; 在设置和路径之间；如果你放一个分号，它会为那个 shell 设置（但不导出）HTTP_PROXY

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-12T09:28:25.933

对于另一种方法，您还可以使用[GoRequest](https://github.com/parnurzeal/gorequest)，它具有可以为任何单个请求轻松设置代理的功能。

```
request := gorequest.New()
resp, body, errs:= request.Proxy("http://proxy:999").Get("http://example.com").End()
resp2, body2, errs2 := request.Proxy("http://proxy2:999").Get("http://example2.com").End() 
```

或者您可以一次设置为整体。

```
request := gorequest.New().Proxy("http://proxy:999")
resp, body, errs:= request.Get("http://example.com").End()
resp2, body2, errs2 := request.Get("http://example2.com").End() 
```

# insert - VHDL、Xilinx ISE、项目导航器

> ID：14661512
> 
> 赞同：0
> 
> 时间：2013-02-02T11:40:37.507
> 
> 标签：insert, vhdl, xilinx, project-navigator

我是 vhdl 编程和 xilinx ISE 的新手，所以请原谅我这个菜鸟问题。

我不小心触发了一个热键，触发了文本编辑器中的插入功能。这真的很烦人，因为我不能在不删除下一个字符的情况下将新字符添加到代码中。

有谁知道我如何关闭 ISE 中的插入功能？谢谢！

干杯

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T10:25:43.853

正如 Cthulhu 已经提到的：点击键盘上的*插入*键。这应该可以解决问题。

# ruby-on-rails - 在 Rails 参数 [] 中访问多维数组

> ID：14661514
> 
> 赞同：-1
> 
> 时间：2013-02-02T11:40:56.607
> 
> 标签：ruby-on-rails, ruby, post

我一生都无法弄清楚如何以这种形式命名结构访问帖子数据：

```
feature[0][0], action[0][0]
feature[0][1], action[0][1]

feature[1][0], action[1][0] 
```

ETC...

我正在尝试这个，`params['action'][0][0]`但出于某种疯狂的原因，它只是返回`c`。的值`params['action'][0][0]`甚至不包含`c`!!

我完全被困住了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:59:47.460

`params['action']`包含控制器中的当前操作（方法）名称。如果您提交表单，它通常会执行`create`操作，如果您要求`[0]`，则基本上是在要求单词的第一个字母`create`。

无论如何，我敢打赌您的表单值嵌套在某个键下。将表单代码发送给我们或添加`gem "pry"`到您的 Gemfile，运行`bundle install`然后放在操作`binding.pry`的顶部`create`，提交表单并`params`在控制台中输入。

# android - EditText 打印一个字母两次

> ID：14661519
> 
> 赞同：0
> 
> 时间：2013-02-02T11:41:18.067
> 
> 标签：android, android-edittext

我知道这是一个有点愚蠢和奇怪的问题，但它真的困扰着我。正如我的帖子主题所说，当我在编辑文本中输入一个字母时，它会打印两次。我试图找出问题所在，但找不到。这是我的代码，

**更改代码.xml**

```
<EditText
    android:id="@+id/oldcode"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/changecodetxt"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="20dp"
    android:hint="Enter Old Pass Code"
    android:inputType="number"
    android:password="true" />

<EditText
    android:id="@+id/newcode"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/oldcode"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="20dp"
    android:hint="Enter New Pass code"
    android:inputType="number"
    android:password="true" />

<EditText
    android:id="@+id/renewcode"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/newcode"
    android:layout_marginLeft="15dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="25dp"
    android:hint="Re-Enter New Pass code"
    android:inputType="number"
    android:password="true" />

<Button
    android:id="@+id/savenewcode"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="5dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:background="@drawable/button_style"
    android:text="Update Code" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/savenewcode"
    android:layout_below="@id/renewcode"
    android:gravity="center" >

    <ToggleButton
        android:id="@+id/cc_togglebutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"
        android:textOff="123"
        android:textOn="ABC!@#" />
</LinearLayout> 
```

在**MainActivity.java**

```
oldcode = (EditText) findViewById(R.id.oldcode);
                newcode = (EditText) findViewById(R.id.newcode);
                renewcode = (EditText) findViewById(R.id.renewcode);
                savenewcode = (Button) findViewById(R.id.savenewcode);
                cc_toggle = (ToggleButton) findViewById(R.id.cc_togglebutton);

                cc_toggle.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        boolean on = cc_toggle.isChecked();
                        if (on) {

                            oldcode.setInputType(InputType.TYPE_CLASS_TEXT);
                            newcode.setInputType(InputType.TYPE_CLASS_TEXT);
                            renewcode.setInputType(InputType.TYPE_CLASS_TEXT);
                        }

                        else {

                            oldcode.setInputType(InputType.TYPE_CLASS_NUMBER);
                            newcode.setInputType(InputType.TYPE_CLASS_NUMBER);
                            renewcode.setInputType(InputType.TYPE_CLASS_NUMBER);
                        }                           
                    }
                }); 
```

非常感谢任何形式的帮助或建议。

# android - 在 Android 上解析 DNS SRV 记录的轻量级方法

> ID：14661522
> 
> 赞同：7
> 
> 时间：2013-02-02T11:41:23.423
> 
> 标签：android, dns, srv

在 Android 上进行 SRV 记录查找最节省资源的方法是什么，例如在像[yaxim](https://github.com/pfleidi/yaxim)这样的 XMPP 客户端中？

我知道：

*   [JNDI](http://docs.oracle.com/javase/tutorial/jndi/overview/index.html)，它是 JavaSE 的一部分，但不在 Android 中
*   [dnsjava](http://www.dnsjava.org/)，它添加了 800 KB 的类文件（ProGuard 之后的 580 KB，因此可能很难分离 SRV 查找所需的文件）
*   像 dig`nslookup`等原生工具，当静态编译时，它们的占用空间类似于`dnsjava`并且另外使您的应用程序依赖于原生代码

我已阅读[Querying the DNS service records to find the hostname 和 TCP/IP](https://stackoverflow.com/questions/738750/querying-the-dns-service-records-to-find-the-hostname-and-tcp-ip/740226)，但它只列出了 JNDI 和`dnsjava`.

当然我不是第一个遇到这个问题的人，Java 中一定有一些轻量级的 DNS SRV 解析器 :-)

**编辑：**提供 DNSSEC 验证/DANE 证书查询的奖励积分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-21T16:38:22.400

这可能有点晚了，但参考这个问题可能会有所帮助：

[SRV 记录的 Java DNS 查找](https://stackoverflow.com/questions/10138844/java-dns-lookup-for-srv-records)

答案是使用外部库（最新版本，截至撰写本文时的 2015 年 2 月），大小约为 310KB，并且在 BSD 许可下。您可以在[http://www.dnsjava.org/download/](http://www.dnsjava.org/download/)找到它。这一切都在一个 JAR 中，自 1999 年以来就已发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-28T07:25:28.210

偶然发现了这个问题。由于没有公认的答案，并且 dnsjava 已经被排除在外，因此我再次将这个问题提交给谷歌并偶然发现了[minidns](https://github.com/MiniDNS/minidns)。它支持 DNSSEC，带有用于查询 SRV 记录的单独 API，并且我成功地将它与 Android 应用程序原型集成。

在我的 app/build.gradle 我添加了这个：

```
dependencies {
    implementation "org.minidns:minidns-hla:0.3.2"
} 
```

之后，我能够使用 Kotlin 实现这样的查询：

```
package com.example.app

import android.os.AsyncTask
import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity

import kotlinx.android.synthetic.main.activity_main.*
import android.util.Log
import org.minidns.hla.ResolverApi
import java.io.IOException

class MainActivity : AppCompatActivity() {
    private val serviceName = "_mysrv._tcp.example.com"

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        FetchSrvRecord().execute(serviceName)
    }

    inner class FetchSrvRecord() : AsyncTask<String, Int, String>() {
        override fun doInBackground(names: Array<String>): String {
            try {
                val result = ResolverApi.INSTANCE.resolveSrv(names[0])
                if (result.wasSuccessful()) {
                    val srvRecords = result.sortedSrvResolvedAddresses
                    for (record in srvRecords) {
                        return "https://" + record.srv.target.toString()
                    }
                }
            } catch (e: IOException) {
                Log.e("PoC", "failed IO", e)
            } catch (e: Throwable) {
                Log.e("PoC", "failed", e)
            }

            return "https://example.com"
        }

        override fun onPostExecute(url: String) {
            super.onPostExecute(url);

            Log.d("PoC", "got $url");
        }
    }
} 
```

我对 Java/Android 不是很熟悉，我找不到明显可用的文件作为编译该库的输出，因此无法判断该库对您的 apk 大小的影响。

# php - mysql，找到父节点

> ID：14661525
> 
> 赞同：1
> 
> 时间：2013-02-02T11:41:48.783
> 
> 标签：php, mysql, hierarchical-data

我有一个标准的分层表 ID/PID，如果某个孩子属于某个 ID，我需要查找（布尔值）。有没有办法在mysql中做到这一点？

```
ID   PID
------------
1     0          <- root
...   ...
...   ... 
...   ...
7     1
...   ...
16    1
...   ...
4     0
...   ...
22    16
25    16 
```

有没有办法知道子节点 22 是否属于节点 1 ？我问是因为我想实现一些删除过程，其中节点 1 是我的回收站。属于 1 的所有删除都将被永久删除，所有其他删除都将替换 PID，因此现在暂时属于 1。

首先十分感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:08:59.290

基于[MySQL 中的分层查询](https://stackoverflow.com/questions/8104187/mysql-hierarchical-queries)：

```
SET @x := 22;
SET @y := 0;

select 'yes' as x_comes_from_y 
from dual
where @y in
(
 SELECT  @id :=
        (
        SELECT  pid
        FROM    h
        WHERE   id = @id
        ) AS nodes
 FROM    (
        SELECT  @id := @x
        ) vars
 STRAIGHT_JOIN
        h
 WHERE   @id IS NOT NULL
); 
```

[测试一下。](http://sqlfiddle.com/#!2/a0b75/17/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:53:04.673

再次感谢这个优雅的解决方案。我简化了一点，因为我不需要 STRAIGHT_JOIN

```
SET @x := 52;
SET @y := 41;

select 'yes' as x_comes_from_y 
from dual
where @y in
(
 SELECT  @id :=
        (
        SELECT  pid
        FROM    cat
        WHERE   id = @id
        ) 
 FROM    
        cat
 WHERE   @id IS NOT NULL
); 
```

PS。用于获取对象完整路径时有一个小缺点，结果总是返回最后一行 NULL，但这可以通过另一个 SELECT 来避免。

# javascript - Handlebars.js 不处理 unicode 作为 JSON 的键？

> ID：14661526
> 
> 赞同：1
> 
> 时间：2013-02-02T11:41:49.627
> 
> 标签：javascript, templates, handlebars.js, cjk, mustache

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T12:25:22.773

下载**[Handlebars.js v.1.0.11](https://raw.github.com/alejandrogarciaiglesias/handlebars.js/master/lib/handlebars.js)或更高版本。**

* * *

github 错误报告最近得到了答复。修复是替换字母数字正则表达式：

[a-zA-Z0-9_$:-]

进入 unicode 兼容的正则表达式：

[^\s!"#%-,./;->@[-\^`{-~]

由kpdecker[在 github 上完成](https://github.com/wycats/handlebars.js/commit/c1020a01309723b00ef21525d7f8093efb4d0d93.)

# asp.net - 将 WPF 转换为 Web

> ID：14661534
> 
> 赞同：5
> 
> 时间：2013-02-02T11:42:50.257
> 
> 标签：asp.net, wpf, xaml, infragistics

我的应用程序使用 Infragistics 控件（xaml）内置到 WPF 中。

我想将现有应用程序移植到 Web，但我们不想使用 silverlight（对于 silverlight，我们需要在浏览器中提供插件，并且目标用户将无权将任何插件安装到他们的浏览器中）是否有任何第三个可用的部分控件可帮助我们更快地将 WPF 页面移植到 WEB 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T12:29:44.657

将 WPF 移植到 Web 有两种方法：

1.  Silverlight（你说你不能使用）和
2.  [WPF XAML 浏览器应用程序](http://msdn.microsoft.com/en-us/library/aa970060.aspx)

这些是我知道的唯一选择。

如果您想将 WPF 应用程序转换为 ASP.NET Web 表单或 MVC，则必须手动进行。为了更容易，您可以创建可被 WPF 和 Web 应用程序使用的共享代码。

如果您在 WPF 项目中遵循了 MVVM 模式，这将使您的工作变得更加轻松，因为您可以在 MVC 中重用视图模型（只需稍作更改）

# .htaccess - htaccess 规则重定向？

> ID：14661536
> 
> 赞同：0
> 
> 时间：2013-02-02T11:42:58.683
> 
> 标签：.htaccess

我有一个类似的链接`www.example.com/hello-1/hey-2`，现在我想做的是我想从 重定向到这个链接`www.example.com/hello-1/hey`。如何为此编写 htaccess 规则。我已经尝试搜索它，尝试了相同的方法来减少 index.php 但没有奏效。谢谢。

看，基本上我希望人们在类型 www.example.com/hello-1/hey 这是我的旧链接时被重定向。我希望它们被重定向到 www.example.com/hello-1/hey-2，这 2 很重要，因为它为我传递了一个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:51:42.143

基本上，可以这样做；

```
RewriteEngine On
RewriteRule ^hello-1/hey$   hello-1/hey-2 [R=301,L] 
```

# android - android.view.inflateException Android

> ID：14661540
> 
> 赞同：0
> 
> 时间：2013-02-02T11:43:30.223
> 
> 标签：android, android-view, android-inflate

我创建了一个 java 类和一个带有图像按钮的布局。当我设置内容视图时，它会引发运行时异常。

错误：

```
02-02 17:46:39.558: E/AndroidRuntime(954): FATAL EXCEPTION: main
02-02 17:46:39.558: E/AndroidRuntime(954): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.oceans/com.oceans.LettersScreenActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.os.Looper.loop(Looper.java:137)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-02 17:46:39.558: E/AndroidRuntime(954):  at java.lang.reflect.Method.invokeNative(Native Method)
02-02 17:46:39.558: E/AndroidRuntime(954):  at java.lang.reflect.Method.invoke(Method.java:511)
02-02 17:46:39.558: E/AndroidRuntime(954):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-02 17:46:39.558: E/AndroidRuntime(954):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-02 17:46:39.558: E/AndroidRuntime(954):  at dalvik.system.NativeStart.main(Native Method)
02-02 17:46:39.558: E/AndroidRuntime(954): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
02-02 17:46:39.558: E/AndroidRuntime(954):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-02 17:46:39.558: E/AndroidRuntime(954):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-02 17:46:39.558: E/AndroidRuntime(954):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256) 
```

Xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/letters_bg" >

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="49dp"
        android:src="@drawable/leftsignpost" />

</RelativeLayout> 
```

Java类代码：

```
public class LettersScreenActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.letters_screen); // error is here
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    }
} 
```

那么问题是什么？为什么它抛出运行时异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:59:57.237

提供的代码没有任何明显的问题，应该运行吗？至少对我有用（当然，drawables是我的）。

检查您是否有引用的资源`letters_bg`并`leftsignpost`到位。这些必须在`res/drawable`. 清理项目。尝试提供更长的堆栈跟踪。

![截屏](../Images/839097f64288c70b70437746f54367b8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:09:23.827

我试过这段代码......它真的很好......请检查你的图像和清单文件

# orm - 同时使用多对一关系单独添加记录，使变量未定义

> ID：14661543
> 
> 赞同：2
> 
> 时间：2013-02-02T11:43:34.410
> 
> 标签：orm, coldfusion, coldfusion-9, fw1

我正在使用带有 FW/1 的 ColdFusion ORM。

我有两张表学生和家长，我已经给出了多对一的关系，因为我们知道家长可以在学校有更多的病房。我分别添加学生和家长，在添加家长时，我需要将 parentId 存储在学生表中，以便我可以列出或让学生与他们的家长一起获得更多功能和活动。

任何人都可以帮助我如何将父母保存在父表中，并将 parentId 保存在学生表中吗？

**学生.cfc**

```
component output="false" persistent="true" accessors="true" entityname="Student" table="school_student" {

          // Use a mysql autonumber for an ID
          property name="StudentId" column="school_studentid" type=numeric fieldtype="id" generator="identity";
          property name="Fullname" column="school_studentFullname" type="string" length="128" notnull="true";
          property name="email" column="school_studentEmail" type="string" length="128" notnull="true";
          property name="password" column="school_studentPassword" type="string" length="64";

          property name="Parent" fieldtype="many-to-one" cfc="Parent" fkcolumn="student_school_parentId" lazy="true" singularname="Parent"; 
} 
```

**父.cfc**

```
component output="false" accessors="true" persistent="true" entityname="Parent" table="school_parent" {

        //use mysql autonumber id
        property name="parentId" fieldtype="id" column="school_parentid" generator="identity";
        property name="name" type="string" column="school_parentname" length="128"; 
        property name="email" type="string" column="school_parentemail" length="128" ;
        property name="password" type="string" column="school_parentpassword" length="64";

        //relate parent with Student.
        property name="Student" fieldtype="one-to-many" cfc="Student" fkcolumn="student_school_parentId" lazy="extra" inverse="true"; 
```

这是我在控制器中保存父级的方式：

```
<cfargument name="rc" type="struct" required="true">
<cfset parent = getParentService().parent(arguments.rc.parentid)>
<cfset student = getStudentService().student(arguments.rc.studentId)>
<cfset parent.setName(arguments.rc.name)>
<cfset parent.setEmail(arguments.rc.email)>
<cfset parent.setPassword(arguments.rc.password)>
<cfset getParentService().save(parent)>
<cfset student.addparent(parent)>
<cfset variables.fw.redirect('parent.list')> 
```

如何在保存父母的同时将父母ID保存在学生表中？我的意思是我怎样才能调用学生保存方法在学生表中有父ID？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:23:31.823

尝试这个

```
<cfset parent.addstudent(student)>
<cfset getParentService().save(parent)> 
```

并尝试在 Parent 的学生属性上设置 cascade="any"。这应该允许您保存两个对象......即使它们都是第一次持久化的新对象。

# ios - UINavigationController里面的Photoscroller

> ID：14661547
> 
> 赞同：2
> 
> 时间：2013-02-02T11:44:37.367
> 
> 标签：ios, uinavigationcontroller

我正在尝试在 UINavigationController 中使用此代码：

[http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)

在故事板中：

*   我将 PageViewController 嵌入到导航控制器中。
*   我将 Topbar 更改为“NavigationBar”。
*   我在 NavigationBar 中添加了一个标题：“ImageView”。
*   我将情节提要 ID 添加到 PageViewController 和 NavigationController。

在 ImageViewScrollView.m ：

```
- (void)displayTiledImageNamed:(NSString *)imageName size:(CGSize)imageSize 
```

我改变这一行：

```
_zoomView = [[UIImageView alloc] initWithFrame:(CGRect){CGPointZero, imageSize }]; 
```

通过这些：

```
CGPoint navPoint = CGPointMake(0, 45);
_zoomView = [[UIImageView alloc] initWithFrame:(CGRect){navPoint, imageSize}]; 
```

我也改变了这些行：

```
- (CGPoint)minimumContentOffset
{
    return CGPointZero;
} 
```

通过这些：

```
- (CGPoint)minimumContentOffset
{
    CGPoint navPoint = CGPointMake(0, 45);
    return navPoint;
} 
```

而且我在使用 iOS 模拟器时看不到导航栏。替换 CGPointZero 是不够的。

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:36:33.943

我找到了一种更简单的方法来将 photoscroller 放在 UINavigationController 中。

我刚刚添加了 appdelegate.h ：

```
@property (nonatomic, retain) UINavigationController *navController; 
```

在 appdelegate.m 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // kick things off by making the first page
    PhotoViewController *pageZero = [PhotoViewController photoViewControllerForPageIndex:0];
    if (pageZero != nil)
    {
        // assign the first page to the pageViewController (our rootViewController)
        UIPageViewController *pageViewController = (UIPageViewController *)self.window.rootViewController;
        pageViewController.dataSource = self;

        [pageViewController setViewControllers:@[pageZero]
                                  direction:UIPageViewControllerNavigationDirectionForward
                                   animated:NO
                                 completion:NULL];

        self.navController = [[UINavigationController alloc] initWithRootViewController:pageViewController];
        [[self window] setRootViewController:_navController];   
    }
return YES; 
```

}

# c# - 如何在 SQL Server 数据库中插入小数位为 00 的值？

> ID：14661548
> 
> 赞同：-3
> 
> 时间：2013-02-02T11:45:11.473
> 
> 标签：c#, sql, sql-server-2008

在此表中，我想在浮点类型的权重列中插入十进制值为 00 的值，例如 100.00, 150.00, 25.00 。

在此表中，如果我要插入 25.5，那么如果我存储 135.00，它将显示十进制值位，它将存储 135，只有在 00 时不显示十进制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:54:42.250

从您的问题中，我不确定您实际上在寻找什么。存储和显示是两个独立的东西。

**贮存**

如果要在 SQL SERVER 中存储具有固定精度的数字，请使用 DECIMAL

```
CREATE TABLE MyTable
(
    MyNumber DECIMAL(5,2)
) 
```

以上将存储5位数字，小数点前3位，小数点后2位。

这是文档：http: [//msdn.microsoft.com/en-gb/library/ms187746.aspx](http://msdn.microsoft.com/en-gb/library/ms187746.aspx)

如果您要存储货币值，那么还有 MONEY 数据类型：http: [//msdn.microsoft.com/en-us/library/ms179882.aspx](http://msdn.microsoft.com/en-us/library/ms179882.aspx)

**展示**

如果您对值的显示而不是存储更感兴趣（您已经提到它们是数据库中的浮点数），那么在您的 C# 应用程序中，您可以使用如下内容：

```
 string display = string.Format("{0:0.00}", myNumber); 
```

这是将数字自定义格式化为字符串的文档：http: [//msdn.microsoft.com/en-gb/library/0c899ak8.aspx](http://msdn.microsoft.com/en-gb/library/0c899ak8.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:47:45.543

如果它是浮点类型，那么`X.00f = Xf`X 是任何整数。是的，它存储`135`或`135.00`- 如果它是一个浮点数，那也是一样的，真​​的。

# c# - 在 C# 中调用非托管代码并打印图像

> ID：14661549
> 
> 赞同：0
> 
> 时间：2013-02-02T11:45:18.367
> 
> 标签：c#, c++, pinvoke, compact-framework2.0

我需要通过 CF 2.0 使用 windows mobile 6.5（带打印机）在设备中打印图像，并且我有 c++ 头文件，并且我还包装了调用非托管代码的类： 问题：即使我读到这个，我也不知道如何打印图像文档 文档中

1.  PRNAPI UINT WINAPI **PrinterLoadImageFile** (LPCTSTR pszFile); 描述：读取图像文件。返回： PRINTER_OK: Success PRINTER_ERROR: Errors Argument: LPCTSTR pszFile: [in] file to read
2.  PRNAPI UINT WINAPI **PrinterImage** (int nMode); 描述：打印图像。返回： PRINTER_OK: Success PRINTER_ERROR: Errors 参数： int nMode: [in] 设置图像打印模式。PRINTER_IMAGE_NORMAL：200 * 200 dpi 默认 PRINTER_IMAGE_DOUBLEWIDTH：100 * 200 dpi PRINTER_IMAGE_DOUBLEHEIGHT：200 * 100 dpi PRINTER_IMAGE_QUADRUPLE：100 * 100 dpi
3.  PRNAPI UINT WINAPI **PrinterCloseImageFile** (); 描述：删除阅读图像。返回： PRINTER_OK：成功 PRINTER_ERROR：错误
4.  PRNAPI LPCTSTR WINAPI **PrinterGetImageName** (); 描述：获取读取的图像名称。返回： LPCTSTR: [out] 文件名

我确实附带了这个包装器.net代码

```
 [DllImport(@"PRN_DLL.dll")]
    public static extern uint PrinterCloseImageFile();
    [DllImport(@"PRN_DLL.dll")]
    public static extern uint PrinterLoadImageFile(string pszFile); 
    [DllImport(@"PRN_DLL.dll")]
    public static extern uint PrinterImage(int nMode);
    [DllImport(@"PRN_DLL.dll")]
    public static extern char[] PrinterGetImageName(); 
```

h文件的一部分：

```
//Close Image File
_DLL_EXPORT_ UINT WINAPI PrinterCloseImageFile();

//Load Image File
_DLL_EXPORT_ UINT WINAPI PrinterLoadImageFile(TCHAR* pszFile);
_DLL_EXPORT_ void WINAPI PrinterSetImageLeft(UINT nImageLeft);//ÇöÀç ´Ü»öºñÆ®¸Ê¸¸ Áö¿ø °¡´ÉÇÔ(2008³â11¿ù)

//Print Image
_DLL_EXPORT_ UINT WINAPI PrinterImage(int nMode);

//Get Image Name
_DLL_EXPORT_ TCHAR* PrinterGetImageName(); 
```

当我调用此代码时

```
String path = PathInfo.GetStartupPath() + "\\logo.png";//Path to image
                NativPrinter.PrinterGetImageName();
                MessageBox.Show(NativPrinter.PrinterLoadImageFile(path).ToString());
                NativPrinter.PrinterImage(NativPrinter.PRINTER_IMAGE_NORMAL);
                NativPrinter.PrinterCloseImageFile(); 
```

我在 PrinterLoadImageFile 中遇到错误（错误代码 1000 表示打印错误）。所以任何人都可以知道我的错误在哪里。对不起我的英语不好 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:12:51.820

您的调用`PrinterLoadImageFile`可能出错的明显方式是您的 C# 代码将传递 UTF-16 Unicode 文本，但本机库可能需要 8 位 ANSI。我们无法判断，因为我们不知道`TCHAR`扩展为什么。如果是这样，那么您需要传递一个`IntPtr`to`PrinterLoadImageFile`并手动转换为 ANSI。利用

```
byte[] ansiBytes = Encoding.Default.GetBytes(path);
byte[] pszPath = new byte[ansiBytes.Length + 1];//+1 for null terminator
ansiBytes.CopyTo(pszPath, 0); 
```

转换为以空字符结尾的 ANSI 字符串，存储在字节数组中。

然后将其复制到在非托管堆上分配的以 null 结尾的字符串。

```
IntPtr ptr = Marshal.AllocHGlobal(pszPath.Length);
Marshal.Copy(pszPath, 0, ptr, pszPath.Length); 
```

然后，您可以将其传递给`PrinterLoadImageFile`. 使用完内存后，使用`Marshal.FreeHGlobal`.

另一个问题是`PrinterGetImageName`。几乎可以肯定，这会返回一个指向在库中分配的字符串的指针。因此，您需要将返回值声明为`IntPtr`，并使用`Marshal`该类转换为 C# 字符串。您的代码将导致 p/invoke marshaller 尝试释放返回的内存块，`PrinterGetImageName`我确定这不是您想要的。

# python - 在python中将元素附加到字典

> ID：14661554
> 
> 赞同：1
> 
> 时间：2013-02-02T11:45:54.007
> 
> 标签：python

```
dictionary = {}

tabl = [('maint_id', 1003L), ('type', 'DB'), ('number', '102')]
for i in tabl:
     dictionary{i[0]:i[1]}

print dictionary 
```

它只给了我字典中的最后一个键值对。它覆盖了所有元素。这段代码有什么问题..任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T11:48:06.767

这要容易得多：

```
dictionary = dict(tabl) 
```

如果订单很重要：

```
from collections import OrderedDict
dictionary = OrderedDict(tabl) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:47:37.750

你要：

```
for i in tabl:
     dictionary[i[0]] = i[1] 
```

# audio - 使用 NIST 光谱数据库的氢的声音

> ID：14661555
> 
> 赞同：2
> 
> 时间：2013-02-02T11:46:03.607
> 
> 标签：audio, wolfram-mathematica, physics

在视频[The Sound of Hydrogen （](http://www.youtube.com/watch?v=IhvW8yZdE5A)[此处](http://www.youtube.com/watch?v=qyi5SvPlMXc)为原创）中，声音是使用 NIST 原子光谱数据库创建的，然后将编辑后的数据导入 Mathematica 以调制正弦波。我想知道他是如何将网站上的数据转换为视频中显示的值（[3:47 - 页面顶部](http://youtu.be/IhvW8yZdE5A?t=3m47s)），因为它与最初在网站上看到的完全不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T09:57:55.923

简短回答：这是不同的，因为在教程中采样率为 8 kHz，而原始视频中的采样率可能更高。

* * *

长答案：

我希望你在[http://physics.stackexchange.com](http://physics.stackexchange.com)或[http://math.stackexchange.com](http://math.stackexchange.com)上问过这个问题，这样我就可以使用公式...使用书签

```
javascript:(function(){function%20a(a){var%20b=a.createElement('script'),c;b.src='https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML.js',b.type='text/javascript',c='MathJax.Hub.Config({tex2jax:{inlineMath:[[\'$\',\'$\']],displayMath:[[\'\\\\[\',\'\\\\]\']],processEscapes:true}});MathJax.Hub.Startup.onload();',window.opera?b.innerHTML=c:b.text=c,a.getElementsByTagName('head')[0].appendChild(b)}function%20b(b){b.MathJax===undefined?a(b.document):b.MathJax.Hub.Queue(new%20b.Array('Typeset',b.MathJax.Hub))}var%20c=document.getElementsByTagName('iframe'),d,e;b(window);for(d=0;d<c.length;d++)e=c[d].contentWindow||c[d].contentDocument,e.document||(e=e.parentNode),b(e)})() 
```

使用 MathJax 渲染公式：

首先，请注意[里德堡公式](https://en.wikipedia.org/wiki/Rydberg_formula#Rydberg_formula_for_hydrogen)如何提供氢的共振频率为 $\nu_{nm} = c R \left(\frac1{n^2}-\frac1{m^2}\right)$ 其中 $c $ 是[光速](https://en.wikipedia.org/wiki/Speed_of_light)，$R$ 是[里德伯常数](https://en.wikipedia.org/wiki/Rydberg_constant)。最高频率为 $\nu_{1\infty}\约 3000$ THz，而对于 $n,m\to\infty$ 基本上没有下限，但如果您将自己限制在[莱曼级数](https://en.wikipedia.org/wiki/Lyman_series)（$n=1$ ) 和[Balmer 系列](https://en.wikipedia.org/wiki/Balmer_series)($n=2$)，下限为 $\nu_{23}\约 400$ THz。这些是对应于光的电磁频率（不完全在[可见光谱中](https://en.wikipedia.org/wiki/Visible_spectrum)（范围从 430-790 THz），那里有一些你看不到的红外线和大量紫外线）。“分钟物理学”现在只是将这些频率视为重新映射到[人类听觉范围](https://en.wikipedia.org/wiki/Hearing#Frequency_range)（约 20-20000 赫兹）的声音频率。

但正如视频所述，并非所有这些频率都以相同的强度产生共振， http: [//nist.gov/pml/data/asd.cfm](http://nist.gov/pml/data/asd.cfm)上的数据也包括幅度。对于频率 $\nu_{nm}$，我们将强度称为 $I_{nm}$（强度是幅度的平方，我想知道视频是否正确处理了它）。那么你的信号很简单

$f(t) = \sum\limits_{n=1}^N \sum\limits_{m=n+1}^M I_{nm}\sin(\alpha(\nu_{nm})t+\phi_{纳米})$

其中 $\alpha$ 表示频率重新缩放（可能是线性的，如 $\alpha(\nu) = (20 + (\nu-400\cdot10^{12})\cdot\frac{20000-20}{(3000- 400)\cdot 10^{12}})$ Hz) 和可选相位 $\phi_{nm}$ 可能等于零。

为什么听起来略有不同？可能实际视频确实使用了比教程视频中使用的 8 kHz 更高的采样率。

# javascript - 面板未显示 sencha touch 2

> ID：14661556
> 
> 赞同：0
> 
> 时间：2013-02-02T11:46:05.120
> 
> 标签：javascript, cordova, sencha-touch-2

我有一个如下所示的“vbox”面板，

```
 {xtype:'panel',
    id:'srchResPanel',
    layout:'vbox',
    scrollable:false,

    items:[
     {
       xtype:'toolbar',
       docked:'top',
       height:46,
       style:'border-top-left-radius:10px;',
       title:'some title'
         }

    ]} 
```

我正在尝试将 2 个面板动态添加到上面的面板中，它们如下所示

```
var header  =  Ext.create('Ext.Panel', {
         height:40,
         width:'100%',

    scrollable: {
        direction: 'horizontal',
        directionLock: true
    },

         layout:'hbox',
     });

    header.setHtml('<div style="font-size:15px;>header</div>'); 
```

和

```
 var grid = Ext.create('Ext.Panel', {
         width:'100%',

    scrollable: {
        direction: 'horizontal',
        directionLock: true
    },
         layout:'vbox',

     });
Ext.getCmp('srchResPanel').add(header);
Ext.getCmp('srchResPanel').add(grid); 
```

当我将上述两个面板添加到顶部面板时，仅显示第一个面板（标题），第二个面板（网格）未显示。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:31:50.883

您还需要`height`为第二个面板指定。

# javascript - 将 asp 经典 html 作为字符串从客户端传递到服务器端

> ID：14661557
> 
> 赞同：0
> 
> 时间：2013-02-02T11:46:06.880
> 
> 标签：javascript, asp-classic, vbscript, client-side, server-side

我有下一个场景（我无法改变它）。我有一个经典的asp页面。在其中，我有 asp 代码、javascript 代码和 VBscript 代码。当用户点击按钮确认时，javascript函数“确认”被执行。在其中，页面向自身提交一个表单。

我想要完成的是接下来的事情。在该 javascript 函数内确认，我可以轻松地将网页 html 作为字符串获取。但是我想要的是在页面处理完自我提交时在 VBScript 部分中获取该字符串。我尝试了接下来的事情：

1.  在页面中插入一个 asp 输入隐藏控件，并从 JavaScript 加载该输入中所需的字符串。之后我希望能在 VBScript 中得到它`Request("controlId/controlName")`。但它让我失望了，因为输入隐藏控件不能有那么大的字符串。

2.  在 JavaScript 确认函数中，加载字符串中的会话变量。但看起来我无法在会话变量中写入客户端变量。

3.  通过 JavaScript 函数存储一个临时文件并通过输入文件控件传递它。这个我只是想过。因为我认为在客户端存储临时文件不是一个好的解决方案，我仍然相信找到比这更好的解决方案。另外我不知道如何在客户端使用 JavaScript 编写文件。

我记得我已经尝试过所有这些，如果我记得我尝试过的另一件事，我会在这里发布。

我已经反复把脸撞在桌面上，但我找不到解决办法。任何想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:56:41.200

> 但它让我失望了，因为输入隐藏控件不能有那么大的字符串。

在表格中使用`method="post"`而不是，`method="get"`数据大小实际上是无限的。即限制从几千字节变为几兆字节。

> 但看起来我无法在会话变量中写入客户端变量。

那是对的。会话变量仅存在于服务器端。

> 通过javascript函数存储一个临时文件并通过输入文件控件传递它。

这是一个分两个步骤的过程，其中每个步骤本身通常是不可能的。无法使用 Javascript 访问本地文件系统，也无法使用 Javascript 设置输入文件控件的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:52:47.967

所以你想在你的 ASP 中使用 javascript 获取 html 页面？

你为什么要那样做。您可以使用带有 post 方法的表单来发送大字符串。

# javascript - PagerJS page-href 链接到带有参数的页面

> ID：14661559
> 
> 赞同：2
> 
> 时间：2013-02-02T11:46:16.363
> 
> 标签：javascript, knockout.js, navigation, single-page-application

我将 PagerJS 与 knockoutjs 结合使用来启用简单的分页/历史 url 导航。

PagerJS 支持像 #search?text=testtext&year=2013 这样的参数

我定义了这样一个页面：

```
<div data-bind="page: {id: 'search', params: ['text', 'year']}">
</div 
```

text 和 year 是视图模型中的两个可观察对象。如果我将 url 设置为 #search?text=testtext&year=2013 text is testtext 并且 year 是 2013 并且显示页面搜索，它可以工作。

但是，现在我想要一个带有特定参数的简单链接到这个页面。

```
<a data-bind="page-href: 'search'"></a> 
```

此行链接到#search（不带参数），但我想要一个指向具有特定参数的搜索页面的链接。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:59:08.327

您的解决方案有效，但链接非常静态。很难操纵它或将参数与可观察者联系起来。

pager.js 框架在过去几周扩展了它的功能，现在它能够以扩展和结构化的 page-href 语法与参数建立链接。

请参阅下面的示例或[演示](http://pagerjs.com/demo/#!/navigation/href_with_params)中的此处。

```
<a class="btn" data-bind="page-href: {path: 'user', params: {first: 'Philip', last: 'Fry'}}">Send parameter to page</a>

<div data-bind="page: {id: 'user', params: ['first','last']}" class="well-small">
  <div>
    <span>First name:</span>
    <span data-bind="text: first"></span>
  </div>
<div>
  <span>Last name:</span>
  <span data-bind="text: last"></span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:21:36.277

这应该是您正在寻找的：

`<a data-bind="page-href: 'search?text=foo'&year=2020"></a>`

我只是将片段添加到 URI，它似乎工作正常。

[JSFiddle 的示例](http://jsfiddle.net/Klaster_1/3K78X/)。

# android - 如何在地图上显示单个地点

> ID：14661564
> 
> 赞同：1
> 
> 时间：2013-02-02T11:46:40.223
> 
> 标签：android, android-mapview

我正在使用本教程来构建基于位置的应用程序：

[http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)

我仍然有一个按钮，使用该按钮我*可以查看地图上所有最近的地方*。

这里我*需要一点小改动*，我也*想在地图上显示一个地方*，不是全部，只选择一个....

因此，**在 SinglePlace.xml 中**，我给出*了一个图像按钮来查看该特定位置的位置*....

我仍然使用下面*的java类来获取所有*内容，请告诉我我需要在我的代码中做哪些更改**才能只获得一个地方**[我选择了哪个地方]

```
 public class PlacesMapActivity extends MapActivity {
// Nearest places
PlacesList nearPlaces;

// Map view
MapView mapView;

// Map overlay items
List<Overlay> mapOverlays;

AddItemizedOverlay itemizedOverlay;

GeoPoint geoPoint;
// Map controllers
MapController mc;

double latitude;
double longitude;
OverlayItem overlayitem;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_places);

    // Getting intent data
    Intent i = getIntent();

    // Users current geo location
    String user_latitude = i.getStringExtra("user_latitude");
    String user_longitude = i.getStringExtra("user_longitude");

    // Nearplaces list
    nearPlaces = (PlacesList) i.getSerializableExtra("near_places");

    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();

    // Geopoint to place on map
    geoPoint = new GeoPoint((int) (Double.parseDouble(user_latitude) * 1E6),
            (int) (Double.parseDouble(user_longitude) * 1E6));

    // Drawable marker icon
    Drawable drawable_user = this.getResources()
            .getDrawable(R.drawable.mark_red);

    itemizedOverlay = new AddItemizedOverlay(drawable_user, this);

    // Map overlay item
    overlayitem = new OverlayItem(geoPoint, "Your Location",
            "That is you!");

    itemizedOverlay.addOverlay(overlayitem);

    mapOverlays.add(itemizedOverlay);
    itemizedOverlay.populateNow();

    // Drawable marker icon
    Drawable drawable = this.getResources()
            .getDrawable(R.drawable.mark_blue);

    itemizedOverlay = new AddItemizedOverlay(drawable, this);

    mc = mapView.getController();

    // These values are used to get map boundary area
    // The area where you can see all the markers on screen
    int minLat = Integer.MAX_VALUE;
    int minLong = Integer.MAX_VALUE;
    int maxLat = Integer.MIN_VALUE;
    int maxLong = Integer.MIN_VALUE;

    // check for null in case it is null
    if (nearPlaces.results != null) {
        // loop through all the places
        for (Place place : nearPlaces.results) {
            latitude = place.geometry.location.lat; // latitude
            longitude = place.geometry.location.lng; // longitude

            // Geopoint to place on map
            geoPoint = new GeoPoint((int) (latitude * 1E6),
                    (int) (longitude * 1E6));

            // Map overlay item
            overlayitem = new OverlayItem(geoPoint, place.name,
                    place.vicinity);

            itemizedOverlay.addOverlay(overlayitem);

            // calculating map boundary area
            minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
            minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
            maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
            maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
        }
        mapOverlays.add(itemizedOverlay);

        // showing all overlay items
        itemizedOverlay.populateNow();
    }

    // Adjusting the zoom level so that you can see all the markers on map
    mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

    // Showing the center of the map
    mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
    mapView.postInvalidate();

}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

   } 
```

# php - 使用带有 php 的 jquery 验证 HTML 表单？

> ID：14661566
> 
> 赞同：0
> 
> 时间：2013-02-02T11:46:53.507
> 
> 标签：php, jquery, html, forms

我有一个带有表单的简单 HTML 文件。

```
<form action="register.php" method="get" id="submitform">
    First Name:
            <input type="text" class="fb-input" name="fname" id="firstname" />
            <br>
    <div class="fb-error">
    </div>

    <input type="button" name="signupBtn" id ="sub" value="Sign upw">

</form> 
```

当我按下提交按钮时，如果该字段为空，则会在 jquery 中进行检查。

```
$(document).ready(function(){
    $("#sub").click(function(){
       register();
    });
});

function register(){
    var firstname=$("#firstname").val();

    if(firstname==""){
        $(".fb-error").show().html("You must fill the fields.");

    }else{
        $(".fb-error").hide();
        $("#submitform").submit();
    }
} 
```

然后经过检查后会提交到php文件中进一步检查表单中输入的字符，如果发现无效字符会回显。

我想要的是，我在 php 文件中提交页面后所做的检查将在 jquery 中传输。例子：

```
function register(){
    var firstname=$("#firstname").val();

    if(...){
         <?php
            if(preg_match(....)){....}
         ?>
    }else{
        .....
    }
} 
```

我试过了，但没有用。我想我不能把 php 放在 jquery 里面。我想将 php 放在 jquery 中的原因是让我能够在 HTML 的 div 部分显示错误消息，因为一旦我提交页面，它就会转到另一个空白页面，其中 php 的错误消息显示向上。

我所做的就像 facebook 的注册，一旦你提交它并且你输入了错误的字符，一条错误消息就会出现在底部。我们必须使用 php，jquery 只是可选的。

谁能帮我解决这个问题？或者可以提出更好的方法来做到这一点？

* * *

更新：

html代码：

```
<html>
<head>
<title>Facebook Registration</title>
</head>
<body>
<form action="register.php" method="get" id="submitform">
    First Name:

    <?php $fname = isset($_POST['fname']) ? $_POST['fname'] : ''; ?>

    <input type="text" class="fb-input" name="fname" value="<?php echo $fname;     ?>">
        <br>

    <div class="fb-error">
    </div>

    <input type="submit" name="signupBtn" id ="sub" value="Sign upw">

</form> 
```

php文件：

```
<?php
$fname=$_GET['fname'];

if((preg_match("/^[a-zA-z]{1,}$/",$fname))){
    echo "registered";
}
else{
    var_dump($_POST);
    echo "<form id='retForm' method='post' action='index.php'>";
    echo "<input type='hidden' name='fname' value='$_POST[fname]'>";
    echo "<script>$(document).ready(function() { $('#retForm').submit() });</script>";
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:59:59.560

您需要创建一个 php 文件并编写您的验证，然后，您需要使用 AJAX 调用此页面，然后发送所需的参数

```
$.get("validation.php", { fieldname: "firstname", value: $("#firstname").val(); },
   function(data){
     if(data){
     }
     else{
     }
   }); 
```

**验证.php**

```
<?php
$fieldname = $_GET['fieldname'];
$fieldvalue = $_POST['value'];

if($fieldname == 'firstname'){
 if(!preg_match('/^[a-zA-Z0-9]+$/', $fieldvalue)){
   echo 'Notvalid';
 }
}
if($fieldname == 'email'){

}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:54:21.927

你不能在js中使用php。使用 js 正则表达式，或 jq 验证插件：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T12:06:08.007

您可以在 PHP 中执行的操作很简单。您可以在其他页面上的 PHP 脚本上验证表单，如果发现任何错误，您可以使用 $_POST 变量将表单重定向回来。

你的表格上有这样的东西

```
<?php $fname = isset($_GET['fname']) ? $_GET['fname'] : ''; ?>
<input type="text" class="fb-input" name="fname" value="<?php echo $fname; ?>"> 
```

现在，在您的 register.php 中，您可以编写此代码段

```
<?php
    if(isset($_GET['signupBtn'])) {
        //do validation on $_GET['fname']
        //if the validation fails, send it back to the form with the value like this
        echo "<form id='retForm' method='GET' action='originalForm.php'>";
        echo "<input type='hidden' name='fname' value='$_GET[fname]'>";
        echo "<script>$(document).ready(function() { $('#retForm').submit() });</script>";
    }
    else {
        //proceed with registration
    }
?> 
```

这将`fname`作为`$_GET`变量的一部分发送回来，并将显示在表单输入中。您也可以使用 AJAX 调用进行验证，但由于您希望最小化 jQuery 代码，这将是您可以实现它的少数方法之一。

# php - Symfony2 验证器致命错误

> ID：14661567
> 
> 赞同：0
> 
> 时间：2013-02-02T11:46:56.040
> 
> 标签：php, symfony, yaml

我创建了一个 symfony 包，在创建它时可以使用，但是当我将它移到其他地方时，它给了我以下错误：

> 致命错误：在线 /home/nagel/sites/battlemamono/vendor/symfony/symfony/src/Symfony/Component/Validator/Mapping/Loader/AbstractLoader.php 中找不到类“Symfony\Component\Validator\Constraints\type” 63

这是一个验证器错误，我拥有的唯一验证器是：

```
Battlemamono\DatabaseBundle\Entity\Mamono:
    constraints:
        - Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity: 
            fields: name
            message: A mamono with this name already exists.
            groups: [creation]
properties:
    id:
        - type: integer

    name:
        - NotBlank: ~
        - MaxLength: 30
        - type: string

    family1:
        - NotBlank: ~
        - MaxLength: 30
        - type: string
        - Choice : { callback: getFamily }

    family2:
        - MaxLength: 30
        - type: string
        - Choice : { callback: getFamily }

    element1:
        - NotBlank: ~
        - MaxLength: 30
        - type: string
        - Choice : { callback: getElements }

    element2:
        - MaxLength: 30
        - type: string
        - Choice : { callback: getElements }

    disposition:
        - NotBlank: ~
        - MaxLength: 100
        - type: string
    diet:
       - NotBlank: ~
       - MaxLength: 100
       - type: string

    previousForm:
       - MaxLength: 30
       - type: string

    nextForm:
       - MaxLength: 30
       - type: string

    evolution:
       - MaxLength: 30
       - type: string

    evolutionLove:
      - type: bool

    tags:
      - type: string
      - MaxLength: 100

    description:
     - type: string
     - NotBlank: ~ 
```

我不知道它为什么这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:00:05.297

您的格式错误，这就是文档所说的：

```
Acme\BlogBundle\Entity\Author:
    properties:
        age:
            - Type:
                type: integer
                message: The value {{ value }} is not a valid {{ type }}. 
```

来自[http://symfony.com/doc/current/reference/constraints/Type.html](http://symfony.com/doc/current/reference/constraints/Type.html)

# codeigniter-2 - Codeigniter 无法将带逗号的文本保存到数据库

> ID：14661568
> 
> 赞同：1
> 
> 时间：2013-02-02T11:47:07.287
> 
> 标签：codeigniter-2

我在codeigniter工作。

```
 function create($data){
    $this->db->insert(TBL_QUES, $data); 
    if($this->db->insert_id())
    return true;
    else
    return false;
} 
```

这是我模型中的功能之一。这用于在数据库中创建/插入记录。但我无法将带逗号的文本插入数据库。我无法在此代码中找到错误。

示例工作文本：这是一个字符串 1；

示例不工作文本：这是一个字符串 1，这是一个字符串 2；

我必须逃避输入吗？

我将全局过滤值设置为 true。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:23:51.520

您可以从此代码中获取帮助，以从 csv 生成 sql

```
csv2sql("pre_employee","ch_data.csv");
function csv2sql($table_name,$csvname)
{
$fl=fopen($csvname,r);
//if(!file_exists('a.txt'))
//{
    $flw=fopen("a.txt",'w');
//}
$sql='';
$i=2;
//echo $csvname.$data=fgetcsv($fl,1000,",");die();
while(($data=fgetcsv($fl,1000,","))!=false)
{
    $sql.="insert into ".$table_name." values('".$data[0]."','".$data[2]."','".$data[3]."');".chr(13);
    $i++;
}
//echo $sql;
fwrite($flw,$sql);
fclose($flw);
fclose($fl);
} 
```

# ibm-integration-bus - esql 中的 CURRENT_TIME 格式

> ID：14661570
> 
> 赞同：5
> 
> 时间：2013-02-02T11:47:17.047
> 
> 标签：ibm-integration-bus, extended-sql

esql 中函数 CURRENT_TIME 的默认格式是什么，我们如何根据我们的要求更改它（24 小时或 12 小时格式）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T12:26:57.800

```
DECLARE castTime TIME;
SET castTime = CAST (timeValue AS TIME FORMAT timePattern) 
```

模式可以在哪里

![在此处输入图像描述](../Images/d15e680a379307aecb196f0e887136d5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-16T05:35:20.500

只是为了澄清一点：CURRENT_TIME 函数返回一个 TIME 类型的值，它没有格式。该格式仅在将其转换为 CHARACTER 时才相关：

```
DECLARE now12, now24 CHARACTER;
SET now12 = CAST (CURRENT_TIME AS CHARACTER FORMAT 'h:mma');
SET now24 = CAST (CURRENT_TIME AS CHARACTER FORMAT 'hh:mm'); 
```

要找到正确的格式字符串，请查看其他答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T10:54:58.573

也许缺少的是信息，如果您想要 24 小时或 12 小时格式，您可以如何配置。您可以从@DaveZiegler 提到[的同一来源获取此信息：](https://www.ibm.com/support/knowledgecenter/en/SSMKHH_9.0.0/com.ibm.etools.mft.doc/ak05616_.htm)

*   h | 上午或下午的小时 (1-12)
*   呵呵 | 上午或下午的小时 (01-12)
*   H | 以 24 小时形式表示的一天中的小时 (0-23)
*   HH | 24 小时格式的一天中的小时 (00-23)

有一个 24h 格式的脚注：

> 如果指定了冲突的上午/下午字段，则 24 小时字段可能会导致时间不明确。

因此，请使用、、`h`或文档[中](https://www.ibm.com/support/knowledgecenter/en/SSMKHH_9.0.0/com.ibm.etools.mft.doc/ak05616_.htm)列出的模式。`hh``H``HH`

# java - (Java) 如何导入和显示精灵？

> ID：14661571
> 
> 赞同：1
> 
> 时间：2013-02-02T11:47:19.590
> 
> 标签：java, image, sprite, draw

如果这是一个愚蠢的问题，我很抱歉，但我真的需要帮助。如何导入图像并将其绘制在屏幕上？我想我需要使用 BufferedImage，但是如何使用呢？

包 com.jonas.game;

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;

public class Game extends JFrame implements Runnable{

private static final long serialVersionUID = 1L;
int WIDTH = 1024;
int HEIGHT = 576;
int SCALE = 1;
int heroX,heroY;
int x,y;

public static void main(String[] args) {
    new Game();
}

public Game(){

    setSize(WIDTH * SCALE, HEIGHT * SCALE);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setResizable(false);
    setTitle("BasicJava2DGame");
    setVisible(true);

    addKeyListener(new Input());

    heroX=getWidth()/2-16;
    heroY=getHeight()/2-16;

    try {
        while(true){
            update();
            Thread.sleep(20);
        }
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

}

public void paint(Graphics g){

    Image offScreen = createImage(getWidth(),getHeight());
    draw(offScreen.getGraphics());

    g.drawImage(offScreen,0,0,null);
}

public void draw(Graphics g){

    g.setColor(Color.GRAY);
    g.fillRect(0,0,getWidth(),getHeight());

    g.setColor(Color.BLUE);
    g.fillOval(heroX, heroY, 32, 32);

    g.setColor(Color.WHITE);
    g.fillOval(heroX+6,heroY+8,8,8);
    g.fillOval(heroX+18,heroY+8,8,8);

    g.setColor(Color.BLACK);
    g.fillOval(heroX+8, heroY+10, 4, 4);
    g.fillOval(heroX+20, heroY+10, 4, 4);

    g.fillRect(heroX+6, heroY+22, 20, 2);

    repaint();

}

public void setX(int x){
    this.x=x;
}
public void setY(int y){
    this.y=y;
}
public void update(){
    heroX+=x;
    heroY+=y;
}

public class Input implements KeyListener{

    public void keyPressed(KeyEvent e) {
        int keyCode=e.getKeyCode();

        if(keyCode==KeyEvent.VK_W){
            setY(-5);
        }
        if(keyCode==KeyEvent.VK_A){
            setX(-5);
        }
        if(keyCode==KeyEvent.VK_S){
            setY(5);
        }
        if(keyCode==KeyEvent.VK_D){
            setX(5);
        }
        if(keyCode==KeyEvent.VK_ESCAPE){
            stop();
        }
    }

    public void keyReleased(KeyEvent e) {
        int keyCode=e.getKeyCode();

        if(keyCode==KeyEvent.VK_W){
            setY(0);
        }
        if(keyCode==KeyEvent.VK_A){
            setX(0);
        }
        if(keyCode==KeyEvent.VK_S){
            setY(0);
        }
        if(keyCode==KeyEvent.VK_D){
            setX(0);
        }
    }

    public void keyTyped(KeyEvent e) {

    }

}

public void run() {
    new Thread().start();
}
public void stop(){
    System.exit(0);
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:50:22.320

要加载，您可以使用 ImageIO.read：

```
BufferedImage image = ImageIO.read(new File(yourfilename)); 
```

为了在 JPanel 上绘图，获取它的 Graphics 并使用 drawImage 方法：

```
Graphics g = panel.getGraphics();
g.drawImage(image, x, y, imageObserver (most likely null)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T23:39:02.607

这是我的文件的来源。我希望它有效。我在这个项目中使用 NetBeans：

```
package mygame;

import java.awt.*;
import java.io.File;
import javax.swing.*;

public class Main {

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("Name");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JLabel emptyLabel = new JLabel();
        frame.add(new JLabel(new ImageIcon("Image path here")));
        emptyLabel.setPreferredSize(new Dimension(700, 400));
        frame.getContentPane().add(emptyLabel, BorderLayout.PAGE_START);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
        createAndShowGUI();
    }
});
}
} 
```

# java - 我怎样才能在这个游戏中实现小而简单的图形？

> ID：14661573
> 
> 赞同：0
> 
> 时间：2013-02-02T11:47:22.827
> 
> 标签：java, swing, graphics, 2d

所以，我有这个我一直在努力的二十一点游戏。我已经成功完成了，但输出通常以“3 of Diamonds”的形式打印在 Java 终端窗口上。

我的导师要求我对其进行修改，以便能够将卡片显示为**图像。** 到目前为止，我所做的是开发一个方程式（**int i = n*type+rdigit**）（用于 OneCard 类），以便计算机从所有卡片图片中的卡片中知道我指的是哪张卡片。例如，如果要使用黑桃 A，则**n = 13**，**type = 1**和**rdigit = 1**。当放入方程时，答案是正确的。

我的问题是我对如何绘制图形知之甚少，因此我不知道如何实际显示图像。

如果有人能帮助我完成这个可能很简单的任务，我将不胜感激。

这就是我所拥有的一切。 [https://www.dropbox.com/home/Blackjack%20Card%20Game](https://www.dropbox.com/home/Blackjack%20Card%20Game)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:22:51.493

您需要一个用于 Java 的图形 UI 框架。

以前，Swing 是 Java GUI 应用程序的流行框架。在后来的几年中，JavaFX 旨在作为替代品，现在包含在 JDK7 中。

谷歌：

```
javafx tutorial

javafx example 
```

或类似的开始。

# java - Java 环境变量设置正确，但 java 找不到 jars

> ID：14661581
> 
> 赞同：2
> 
> 时间：2013-02-02T11:48:16.470
> 
> 标签：java, path, classpath, environment-variables, java-home

**概括**

Java 环境变量设置正确，从 echo-ing 中可以看出。但是，只有在 javac 命令中显式包含 jar 时才能看到 jar。

**细节**

这与图形和 OpenGL 无关，某些问题与类路径有关，即第三方**jar**文件的导入。

使用 Windows XP SP3、JDK 1.7.0_13

在 Windows xp 上，系统环境变量 PATH/JAVA_HOME/CLASSPATH 已设置/添加到包括以下目录：

```
C:\Documents and Settings\Administrator\My Documents\project\jar;
C:\Java\jdk1.7.0_13;
C:\Java\jdk1.7.0_13\bin;
C:\Java\jdk1.7.0_13\lib; 
```

没有可能发生冲突的用户定义变量。来自终端的保证（我在更改环境变量以便更新后重新启动，以在 windows xp 中设置环境变量，请参阅[Java 安装的环境变量](https://stackoverflow.com/questions/1672281/environment-variables-for-java-installation)）：

```
>echo %classpath%
  C:\Documents and Settings\Administrator\My Documents\project\jar;C:\Java\jdk1.7.0_13;C:\Java\jdk1.7.0_13\bin;C:\Java\jdk1.7.0_13\lib;

>echo %java_home%
  C:\Documents and Settings\Administrator\My Documents\project\jar;C:\Java\jdk1.7.0_13;C:\Java\jdk1.7.0_13\bin;C:\Java\jdk1.7.0_13\lib;

>echo %path%
  C:\WINDOWS\System32;... ...C:\Java\jdk1.7.0_13;C:\Java\jdk1.7.0_13\bin;C:\Java\jdk1.7.0_13\lib;C:\Documents and Settings\Administrator\My Documents\project\jar; 
```

矫枉过正，是的...当它起作用时，我会适当地修剪它们

相关文件：

```
C:\Documents and Settings\Administrator\My Documents\project\jar\jogl-all.jar
C:\Documents and Settings\Administrator\My Documents\project\Mush.java

C:\Documents and Settings\Administrator\My Documents\project\JarDir.java 
```

*jogl-all.jar*包含“javax.media.opengl.GL2”，*Mush.java*是一个通过导入 java-OpenGL 库显示简单 3D 蘑菇的程序；具体来说，它导入“javax.media.opengl.GL2”。

*JarDir.java*是我在[http://www.java2s.com/Code/Java/File-Input-Output/Listfilesinajarfile.htm](http://www.java2s.com/Code/Java/File-Input-Output/Listfilesinajarfile.htm)找到的一个程序，它显示了 jar 中的类，我用它来证明 jar 内容. 它还表明可以在机器上进行编译。

JarDir.java 如下：

```
import java.io.*;
   import java.util.*;
   import java.util.jar.*;

   public class JarDir {
     public static void main (String args[]) 
         throws IOException {

       JarFile jarFile = new JarFile("C:\\Documents and Settings\\Administrator\\My Documents\\project\\jar\\jogl-all.jar");
       Enumeration enumy = jarFile.entries();
       while (enumy.hasMoreElements()) {
         process(enumy.nextElement());
       }
     }

     private static void process(Object obj) {
       JarEntry entry = (JarEntry)obj;
       String name = entry.getName();
       long size = entry.getSize();
       long compressedSize = entry.getCompressedSize();
       System.out.println(
           name + "\t" + size + "\t" + compressedSize);
     }
   } 
```

并给出输出：

```
>javac JarDir.java

>java JarDir
... (lots of stuff)
javax/media/opengl/GL2.class   94123   28513
... (lots of stuff) 
```

它演示了成功的编译和 jar 文件中类的存在。尝试运行*Mush.java*会出现许多错误，尤其是第一个错误：

```
>javac Mush.java
Mush.java:21: error: package javax.media.opengl does not exist:
import javax.media.opengl.GL2;
                         ^ 
```

为了确定这是否是类路径问题，我运行了：

```
>javac Mush.java -cp ./jar/jogl-all.jar 
```

由于缺少相关类（例如由*Mush.java*实例化并位于同一项目文件夹中的 MushScene.java ）而导致错误，但在查找 javax.media.opengl 时没有问题*！*所以问题一定是环境变量问题！

这意味着，尽管根据 echo %classpath% 正确设置了类路径，但 java 不同意。我做错了什么？

注意：*Mush.java*程序已经在 Linux 上进行了演示。

注意 2：我有多个 jar，如果我最终在 jar 文件夹中使用 N 个 jar，我希望能够包含该文件夹，而不是专门命名每个 jar =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:53:28.367

jogl-all.jar 不在您的 CLASSPATH 环境变量中。很明显，`javac`如果您没有在`-cp`选项中明确包含它，则无法从此 jar 中找到任何类。jar 本身必须在 CLASSPATH 中，而不是包含它的目录。就像在`-cp`选项中一样。

无论如何，我都不会使用全局 CLASSPATH 环境变量，而只会使用`-cp`选项。当您编译或运行另一个具有不同依赖项的 Java 项目时，这将使一切变得更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:34:37.653

使用环境变量执行此操作的解决方案。（警告 - 可能不是最佳做法，请参阅接受的答案）

类路径环境变量：

```
C:\Documents and Settings\Administrator\My Documents\project\jar\*; 
```

路径环境变量：

```
...;C:\Documents and Settings\Administrator\My Documents\project\jar;C:\Java\jdk1.7.0_13;C:\Java\jdk1.7.0_13\bin;C:\Java\jdk1.7.0_13\lib;C:\Documents and Settings\Administrator\My Documents\project\lib; 
```

请注意，添加 jar 文件夹是错误的 - 您需要在类路径变量中使用反斜杠和星号：“jar\*”。这会添加该文件夹中的所有 jar。

至于路径变量，以及 sdk 的 bin 文件夹，您还需要 sdk 的 lib 文件夹，以及 jar 期望使用的任何 lib 文件夹。

然后你可以*javac Mush.java*和*java Mush*并观察一切正常 =)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-25T14:45:57.097

注意不要在变量**中使用**分号，因为它会破坏所有方便的路径，例如： 。正如您在上面写的那样，它会导致：这显然是错误的。`JAVA_HOME``%JAVA_HOME%\bin``C:\Java\jdk1.7.0_13;\bin`

# python - 这里的 __main__ 是什么意思？

> ID：14661593
> 
> 赞同：2
> 
> 时间：2013-02-02T11:50:50.330
> 
> 标签：python

```
class  RoundFloat(float):
  def __new__(cls,val):
    x=float.__new__(cls,round(val,2))
    print x, type(x)

>>>RoundFloat(1.785)
1.78   <class '__main__.RoundFloat'> 
```

**这里的主要**是什么意思 ？
和中的意思一样 `if __name__="__main__"`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:53:52.030

`RoundFloat`是`__main__`（正在运行的文件）的属性，因此`'__main__.RoundFloat'`. 如果该类来自导入的模块，`__main__`则将替换为模块名称。

的目的`if __name__ == '__main__'`是检查模块是否是顶层脚本，如果是，则执行一段代码。如果它正在被导入，则该代码块将不会执行，因为`__name__`它将是模块的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:54:03.270

`__main__`是一个顶级脚本环境——它是执行脚本的内置模块。

请参阅[参考资料](http://docs.python.org/2/library/__main__.html#module-__main__)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:54:09.100

这是您运行的顶级脚本的名称。它没有作为模块导入。如果您的代码作为模块导入，则该部分将替换为模块名称。该属性`__name__`是模块名称。顶级脚本的名称为`__main__`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T11:54:55.603

您正在`RoundFloat`主序列中运行，因为它不属于任何其他类。

如果你把这个`RoundFloat`类放在另一个类中，你可能会得到`SomeOtherClass.RoundFloat`或`**main**.SomeOtherClass.RoundFloat`。

（我不确定“主序列”是否是正确的 Python 术语，但希望你能明白我的意思。）

# iphone - iPhone gps 地图绘制

> ID：14661595
> 
> 赞同：0
> 
> 时间：2013-02-02T11:51:06.590
> 
> 标签：iphone

我正在开发一个将由马拉松运动员使用的 iPhone 应用程序。在基于 GPS 的应用程序中，我需要根据跑步者 GPS 位置的起点和终点在地图上绘制跑步路径（类似于一条线）。我对应用程序开发很陌生，如果你们中的任何人都可以指导我或帮助我编写一些代码，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:52:18.347

用于`Google-Map-API`通过添加起点和终点纬度和经度从谷歌获取折线。这是 API 的[链接](https://developers.google.com/maps/documentation/directions/)。

这是 api 网址：

```
http://maps.googleapis.com/maps/api/directions/json?origin=starting_address&destination=destination_address&sensor=false 
```

有关创建折线的参考，请参阅[Mapkit](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MapKit_Framework_Reference/_index.html)文档，以及来自 github 的这个项目....
[nvpolyline](https://github.com/wlach/nvpolyline)，
[route-me](https://github.com/route-me/route-me)，
[mapLines](https://github.com/psholtz/iOS/tree/master/MapLines)，
[MapKit-Route-Directions](https://github.com/kishikawakatsumi/MapKit-Route-Directions)

# asp.net-mvc - 发布具有新子实体的新实体

> ID：14661597
> 
> 赞同：0
> 
> 时间：2013-02-02T11:51:16.243
> 
> 标签：asp.net-mvc, razor-2

我的域模型是具有一个或多个 CompanyAdmin 实体的公司实体。

我意识到，要在发布表单值时使用默认模型绑定器，CompanyAdmin 实体必须具有唯一的名称。

首次浏览该页面时，公司或公司管理员都没有数据。这意味着，此代码在视图中不起作用，因此不会显示输入文本框。

```
@Html.EditorFor(model => model.Company.CompanyContacts) 
```

所以，为了让它们显示我使用：

```
@Html.EditorFor(model => model.Company.CompanyContacts.ElementAt(0).FirstName) 
```

但是，现在的问题是模型绑定在 POST 时不起作用。我能找到的所有示例都使用已经创建的数据。

我怎样才能让它工作？

视图模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace ContractorDirect.Models
{
  public class CompanyAdminViewModel
  {
    public Company Company { get; set; }
    public RegisterModel UserReg { get; set; }
  }
} 
```

控制器

```
public ViewResult CompanyAdmin(int? id)
    {
        CompanyAdminViewModel cavm = new CompanyAdminViewModel();

        jobTitleRepository = new JobTitleRepository();
        companyContactRepository = new CompanyContactRepository();

        var jobtitles = jobTitleRepository.All;
        ViewBag.JobTitleId = new SelectList(jobtitles, "JobTitleId", "JobName");

        if (id.HasValue)
        {
            cavm.Company = companyRepository.Find((int)id);
            cavm.Company.CompanyContacts = companyContactRepository.All.Where(admin=>admin.IsCompanyAdmin).ToList();
            return View(cavm);
        }

        cavm.Company = new Company();
        cavm.Company.CompanyContacts = new List<CompanyContact>();
        cavm.UserReg = new RegisterModel();
        return View(cavm);
    }

    [HttpPost]
    public ActionResult CompanyAdmin(CompanyAdminViewModel cavm)
    {
        JobTitleRepository rep = new JobTitleRepository();
        var jobtitles = rep.All;
        ViewBag.JobTitleId = new SelectList(jobtitles, "JobTitleId", "JobName");

        cavm.UserReg.UserName = cavm.Company.CompanyContacts.ElementAt(0).Email;

        if (ModelState.IsValid)
        {
            AccountController account = new AccountController();
            account.Register(cavm.UserReg, "CompanyAdmin");
            companyRepository.InsertOrUpdate(cavm.Company);
            companyRepository.Save();
            return RedirectToAction("CompanyRegistrationConfirmation");
        }
        else
        {
            return View();
        }
    } 
```

看法

```
 @model ContractorDirect.Models.CompanyAdminViewModel

  @{
       ViewBag.Title = "CompanyAdmin";
   }

 <h2>Company Admin</h2>

 <table>
 <tr style="vertical-align: top">
    <td>
        <div class="editor-label">
            @Html.LabelFor(model => model.Company.CompanyName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Company.CompanyName)
            @Html.ValidationMessageFor(model => model.Company.CompanyName)
        </div>

        <fieldset>
            <legend>Company Administrator</legend>

            <div class="editor-label">
                @Html.LabelFor(model => model.Company.CompanyContacts.ElementAt(0).JobTitleId)
            </div>
            <div class="editor-field">
                @Html.DropDownList("JobTitleId", string.Empty)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Company.CompanyContacts.ElementAt(0).FirstName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Company.CompanyContacts.ElementAt(0).FirstName)
                @Html.ValidationMessageFor(model => model.Company.CompanyContacts.ElementAt(0).FirstName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Company.CompanyContacts.ElementAt(0).LastName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Company.CompanyContacts.ElementAt(0).LastName)
                @Html.ValidationMessageFor(model => model.Company.CompanyContacts.ElementAt(0).LastName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Company.CompanyContacts.ElementAt(0).Email)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Company.CompanyContacts.ElementAt(0).Email)
                @Html.ValidationMessageFor(model => model.Company.CompanyContacts.ElementAt(0).Email)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Company.CompanyContacts.ElementAt(0).Phone)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Company.CompanyContacts.ElementAt(0).Phone)
                @Html.ValidationMessageFor(model => model.Company.CompanyContacts.ElementAt(0).Phone)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.UserReg.Password)
            </div>

            <div class="editor-field">
                @Html.EditorFor(model => model.UserReg.Password)
                @Html.ValidationMessageFor(model => model.UserReg.Password)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.UserReg.ConfirmPassword)
            </div>

            <div class="editor-field">
                @Html.EditorFor(model => model.UserReg.ConfirmPassword)
                @Html.ValidationMessageFor(model => model.UserReg.ConfirmPassword)
            </div>

        </fieldset>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:16:43.177

好的 - 问题出在视图中

这有效

```
@Html.EditorFor(model => model.Company.CompanyContacts[0].FirstName) 
```

这不

```
@Html.EditorFor(model => model.Company.CompanyContacts.ElementAt(0).FirstName) 
```

# java - Android - 我如何找到两点之间的距离 - Java 代码？

> ID：14661602
> 
> 赞同：0
> 
> 时间：2013-02-02T11:51:46.483
> 
> 标签：java, android, google-maps, distance

我有两点纬度和纬度。我怎样才能找到这两点之间的距离？如果您有任何代码或链接，请建议我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:59:06.563

您可以使用 Android SDK 函数[distanceBetween](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)。

> 计算两个位置之间的近似距离（以米为单位），以及它们之间最短路径的初始和最终方位（可选）。距离和方位角是使用 WGS84 椭球定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:53:47.497

试试这个，你会得到距离

```
 private String distance(double lati, double longi, double curlati1,
        double curlongi1) {

    double theta = longi - curlongi1;
    double dist = Math.sin(deg2rad(lati)) * Math.sin(deg2rad(curlati1))
            + Math.cos(deg2rad(lati)) * Math.cos(deg2rad(curlati1))
            * Math.cos(deg2rad(theta));
    dist = Math.acos(dist);
    dist = rad2deg(dist);
    dist = dist * 60 * 1.1515;

    dist = dist * 1.609344;

    result = Double.toString(dist);
    System.out.println("dist_result :" + result);
    return (result);
}

/* ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: */
/* :: This function converts decimal degrees to radians : */
/* ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: */
private double deg2rad(double deg) {
    return (deg * Math.PI / 180.0);
}

/* ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: */
/* :: This function converts radians to decimal degrees : */
/* ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: */
private double rad2deg(double rad) {
    return (rad * 180.0 / Math.PI);
} 
```

# c++ - C++ 第一个 GUI 应用程序

> ID：14661604
> 
> 赞同：0
> 
> 时间：2013-02-02T11:51:49.287
> 
> 标签：c++, user-interface

目前我正在开发一个简单的控制台泡泡破坏游戏，我想更进一步并为它创建某种 GUI。你能推荐最好和最简单的方法或创建 GUI 应用程序和简单形状的教程吗？您介意分享一些现有的优秀 C++ 库吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:01:01.643

您可以使用[**Qt 库**](http://qt-project.org/)和[**图形视图框架**](http://qt-project.org/doc/qt-4.8/graphicsview.html)。它们真的很容易上手和易于学习。使用图形视图框架，您可以编写简单的 2D 游戏。

> Qt 是一个跨平台的应用程序和 UI 框架，供使用 C++ 或 QML（一种类似 CSS 和 JavaScript 的语言）的开发人员使用。Qt Creator 是支持的 Qt IDE。

如果您想为您的 2D 游戏带来活力，请使用[**Box2D 库**](http://box2d.org/)for c++。

> Box2D 是一个开源 C++ 引擎，用于在 2D 中模拟刚体。Box2D 由 Erin Catto 开发并拥有 zlib 许可证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T11:56:57.173

要创建 GUI 游戏，您可能需要一个库。库是为提供额外功能而编写的一组代码，例如创建 GUI 应用程序。我会推荐 SDL 来开发 C++ 游戏。

这是学习 SDL 的一个很好的教程：[http ://www.lazyfoo.net/SDL_tutorials/](http://www.lazyfoo.net/SDL_tutorials/)

# php - 发送联系表格导致“意外错误”

> ID：14661605
> 
> 赞同：0
> 
> 时间：2013-02-02T11:51:49.183
> 
> 标签：php, forms, send, contact

正在做一个项目.. Ac-photography.net

需要联系表格方面的帮助。它似乎没有发送，我不断收到“意外错误消息”

```
<div class="contact_form">
            <div class="done">
                    <b>Thank you!</b> I have received your message. 
                </div>

                <form method="post" action="process.php">
                    <p>name</p>
                    <input type="text" name="name" class="text" />

                    <p>email</p>
                    <input type="text" name="email" class="text" id="email" />

                    <p>message</p>
                    <textarea name="comment" class="text textarea"></textarea>

                    <input type="submit" id="submit" value="send" class="submit-button" />
                </form> 
```

不知道如何在此处放置 PHP。

**任何帮助表示赞赏。谢谢你。**

```
 <?php

    //Retrieve form data. 
    //GET - user submitted data using AJAX
    //POST - in case user does not support javascript, we'll use POST instead
    $name = ($_GET['name']) ? $_GET['name'] : $_POST['name'];
    $email = ($_GET['email']) ?$_GET['email'] : $_POST['email'];
    $comment = ($_GET['comment']) ?$_GET['comment'] : $_POST['comment'];

    //flag to indicate which method it uses. If POST set it to 1
    if ($_POST) $post=1;

    //Simple server side validation for POST data, of course, you should validate the email
    if (!$name) $errors[count($errors)] = 'Please enter your name.';
    if (!$email) $errors[count($errors)] = 'Please enter your email.'; 
    if (!$comment) $errors[count($errors)] = 'Please enter your comment.'; 

    //if the errors array is empty, send the mail
    if (!$errors) {

//recipient
$to = 'Your Name <alex.cherkasov@gmail.com>';    // <--------- change your email here
//sender
$from = $name . ' <' . $email . '>';

//subject and the html message
$subject = 'Message from ' . $name; 
$message = '
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head></head>
<body>
<table>
    <tr><td>Name</td><td>' . $name . '</td></tr>
    <tr><td>Email</td><td>' . $email . '</td></tr>
    <tr><td>Message</td><td>' . nl2br($comment) . '</td></tr>
</table>
</body>
</html>';

//send the mail
$result = sendmail($to, $subject, $message, $from);

//if POST was used, display the message straight away
if ($_POST) {
    if ($result) echo 'Thank you! We have received your message.';
    else echo 'Sorry, unexpected error. Please try again later';

//else if GET was used, return the boolean value so that 
//ajax script can react accordingly
//1 means success, 0 means failed
} else {
    echo $result;   
}

    //if the errors array has values
    } else {
//display the errors message
for ($i=0; $i<count($errors); $i++) echo $errors[$i] . '<br/>';
echo '<a href="form.php">Back</a>';
exit;
    }

    //Simple mail function with HTML header
    function sendmail($to, $subject, $message, $from) {
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= 'From: ' . $from . "\r\n";

$result = mail($to,$subject,$message,$headers);

if ($result) return 1;
else return 0;
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:15:35.837

### JavaScript 部分

表单没有得到正确处理，因为它没有得到任何值。看看**contact-form.js**。

您正在构建`data`变量：

```
var data = 'name=' + name.val() + '&email=' + email.val() + '&website=' + website.val() + '&comment='  + encodeURIComponent(comment.val()); 
```

但比在 AJAX 调用中，您传递一个带有值的字符串`data`：

```
//pass the data
data: "data", 
```

试试这个：

```
//pass the data
data: data, 
```

* * *

### PHP部分（process.php）

当我像这样简单地调用脚本时：

> [http://ac-photography.net/process.php?email=test@test.com&name=name&comment=comment](http://ac-photography.net/process.php?email=test@test.com&name=name&comment=comment)

我会收到警告：

> 警告：mail() [function.mail]: SMTP 服务器响应：550 > 第 72 行 D:\Hosting\6405740\html\process.php 中的地址无效

修复此问题并检查邮件是否正确发送。它将`1`按预期返回。

# ios - 如果我在 UIViewController 和 UITabBar 之间切换，则无法滚动回顶部

> ID：14661606
> 
> 赞同：1
> 
> 时间：2013-02-02T11:51:59.820
> 
> 标签：ios, uiviewcontroller, uiscrollview

我有一个问题`UIScrollView`，如果我单击选项卡栏项目以切换到另一个 ViewController，然后返回 ViewController，`UIScrollView`我无法滚动回顶部。我必须在 ViewControllers 之间再次切换，然后`UIScrollView`正确显示其中的内容。这个过程对用户来说真的很不舒服。这是我的代码：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self becomeFirstResponder];  // View as first responder

    scrollView.scrollEnabled = YES;
    [scrollView setUserInteractionEnabled:YES];
    testLabel.text = @"there is a long, long text normally";   
} 
```

我没有故意设置 contentSize，因为它`UIScrollView`会根据这个标签自动获取正确的高度。我的问题是如果我向下滚动然后切换到另一个 ViewController，当我再次回到这个屏幕时，我无法再向上滚动到顶部。

一些进一步的信息：使用自动布局，层次结构是：ViewController - View - UIScrollView - Label，...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:29:53.123

我一直在努力解决这个完全相同的问题！不幸的是，我无法确切地弄清楚发生了什么或导致它（Apple 方面的错误？），但我已经创建了一个看起来相当有效的解决方法。

我正在做的是在 viewWillDissapear 方法中，我将滚动视图边界高度位置保存在本地浮点变量中，然后将滚动视图完全重置到顶部。

然后在 didLayoutSubviews 方法中，我滚动回保存的位置。

这是我的代码。

用于存储最后滚动值并延迟实例化的设置变量：

```
@property (nonatomic) float lastScrollHeight;

@synthesize lastScrollHeight = _lastScrollHeight;

-(float)lastScrollHeight{
    if(!_lastScrollHeight) _lastScrollHeight = 0;
    return _lastScrollHeight;
} 
```

视图完成布局子视图后，滚动到保存的值（第一次为零）：

```
-(void)viewDidLayoutSubviews{
    [super viewDidLayoutSubviews];
    [self.scrollView setContentOffset:CGPointMake(0.0f, self.lastScrollHeight) animated:NO];
} 
```

每次视图消失时，完全“重置”滚动视图：

```
-(void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];
    self.lastScrollHeight = self.scrollView.bounds.origin.y;
    [self resetApplesBrokenScrollview];
}

-(void)resetApplesBrokenScrollview{
    [self.scrollView setContentOffset:CGPointZero];
    CGRect sFrame = self.scrollView.bounds;
    sFrame.origin = CGPointZero;
    self.scrollView.bounds = sFrame;
    CGRect cFrame = self.contentView.frame;
    cFrame.origin = CGPointZero;
    self.contentView.frame = cFrame;
} 
```

这是我第一次在 Stack Overflow 上回答问题！如果您觉得我的回答有用，请点击左侧的灰色向上箭头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-22T01:31:18.313

我不确定是否是这种情况，但不要忘记在 iphone（而不是 ipad）上：

您需要确保，如果您有 uiscrollview(tableview, uiwebview, uicollectionview)，则此滚动视图是屏幕上唯一返回 scrollTopTop = YES 的滚动视图。

将所有其他设置为 scrollTopTop = NO。

# javascript - 使用 XMLHttpRequest 时通过范围保存 Javascript 变量

> ID：14661607
> 
> 赞同：0
> 
> 时间：2013-02-02T11:52:08.447
> 
> 标签：javascript, scope, xmlhttprequest

```
var mapFile = new XMLHttpRequest();
mapFile.open("GET", "http://localhost:8000/res/map01.txt", true);

mapFile.onreadystatechange = function() {
  if (mapFile.readyState === 4) {
    if (mapFile.status === 200) {
      this.lines = mapFile.responseText.split("\n");
    }
  }
}

this.lines = mapFile.onreadystatechange.lines;

mapFile.send(null); 
```

我有那个代码，我试图保存`this.lines`在里面`mapFile.onreadstatechange`，以便以后保存`this.lines`在外部范围内。但是，`mapFile.onreadystatachange.lines`未定义，我无法保存该变量以供以后使用。我什至尝试使用`element.innerHTML`which 是一个肮脏的黑客，但它也没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:09:10.147

这里有三个主要问题：

1.  内部与函数外部不同，因为函数`this`内部取决于函数的调用方式。更多关于我的博客：[*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)| [*你必须记住*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)`onreadystatechange``this``this`[](http://blog.niftysnippets.org/2008/03/mythical-methods.html)*[*`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)*

**   XHR 调用是*异步*的（默认情况下），因此当您尝试在调用`this.lines`上方使用时，您的回调不会被`send`调用。（即使是同步请求，由于该行是*before* `send`，它仍然不会被设置。）

    *   `mapFile.onreadystatechange.lines`查找在 .`lines`引用的函数对象上调用的属性`mapFile.onreadystatechange`。它与该函数中定义*的*任何变量完全无关。* 

 *以下是针对主要项目的更新：

```
var mapFile = new XMLHttpRequest();
var self = this; // <===== Remember `this` for use in the callback
mapFile.open("GET", "http://localhost:8000/res/map01.txt", true);

mapFile.onreadystatechange = function() {
  if (mapFile.readyState === 4) {
    if (mapFile.status === 200) {
      // v---- Use self instead of this
      self.lines = mapFile.responseText.split("\n");
    }
  }
}; // <=== Add missing semicolon

// Removed a line here using `this.lines` prematurely

mapFile.send(null); 
```*

# ios - UITextView 中的循环线

> ID：14661609
> 
> 赞同：0
> 
> 时间：2013-02-02T11:52:32.847
> 
> 标签：ios, nsstring, uitextview

如何在 UITextView 中循环行，我试过这个：

```
//Loop Lines
NSArray *myLines = [textView.text componentsSeparatedByString:@"\n"];
for (int i = 0; i < myLines.count;i++) {
    NSLog(@"Line[%i] = %@",i,[myLines objectAtIndex:i]);
} 
```

这将取决于新行 "\n" 但如果行很长怎么办？其中不会有 \n ，但会延伸到下一行。

# login - 使用 USB 令牌上的 CryptoAPI 登录

> ID：14661612
> 
> 赞同：1
> 
> 时间：2013-02-02T11:52:52.707
> 
> 标签：login, cryptoapi, e-token

有没有办法使用 CryptoAPI 登录 USB 令牌（iKey 4000）？（只是不清楚，这不是关于使用令牌登录，而是使用令牌）我知道我可以使用 Pkcs11 来做到这一点。我需要这样做是为了避免在第一次访问令牌的操作中提供的身份验证客户端显示的登录对话框。

提前致谢， 雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:16:56.373

此令牌可以与 CryptoAPI（Microsoft Base Smart Card Crypto Provider）一起使用吗？如果不是，则此令牌缺少“智能卡微型驱动程序”，您无法通过 CryptoAPI 处理任何事情。

否则，您需要获取此令牌上任何密钥容器的上下文并使用`CryptSetProvParam`带参数的函数`PP_KEYEXCHANGE_PIN`or `PP_SIGNATURE_PIN`。

请注意，在一个应用程序中登录智能卡或令牌可能不会导致其他应用程序处于“登录”状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:13:57.473

好吧，尝试解决您的问题：

不知道它是否可以与 Microsoft Base Smart Card Crypto Provider 一起使用，并且不会有其他应用程序使用它，因此卡在该服务上是可以的。

您的建议有效，但我不得不使用 PP_ADMIN_PIN 而不是 PP_KEYEXCHANGE_PIN 或 PP_SIGNATURE_PIN。

谢谢。

# python - 连接到 postgresql 导致密码验证失败

> ID：14661614
> 
> 赞同：0
> 
> 时间：2013-02-02T11:53:06.137
> 
> 标签：python, django, psycopg2, webfaction

0 嗨，我是**django**的新手。我正在构建一个**django**项目`server Webfaction`。当我执行“python manage.py sync”时出现错误：

```
 > Traceback (most recent call last): File "manage.py", line 10, in
 > <module> execute_from_command_line(sys.argv) File
 > "//home/xx/lib/python2.7/django/core/management/init.py", line 443, in
 > execute_from_command_line utility.execute() File
  "//home/xx/lib/python2.7/django/core/management/init.py", line 382, in
 > execute self.fetch_command(subcommand).run_from_argv(self.argv) File
 > "//home/xx/lib/python2.7/django/core/management/base.py", line 196, in
 > run_from_argv self.execute(*args, options.dict) File
 > "//home/xx/lib/python2.7/django/core/management/base.py", line 232, in
 > execute output = self.handle(*args, options) File
 > "//home/xx/lib/python2.7/django/core/management/base.py", line 371, in
 > handle return self.handle_noargs(options) File
 > "//home/xx/lib/python2.7/django/core/management/commands/syncdb.py",
 > line 57, in handle_noargs cursor = connection.cursor() File
 > "//home/xx/lib/python2.7/django/db/backends/init.py", line 306, in
 > cursor cursor = self.make_debug_cursor(self._cursor()) File
 > "//home/xx/lib/python2.7/django/db/backends/postgresql_psycopg2/base.py",
   > line 177, in _cursor self.connection = Database.connect(conn_params)
 > File "/usr/lib64/python2.6/site-packages/psycopg2/init.py", line 179,
 > in connect connection_factory=connection_factory, async=async)
 > 
  > psycopg2.OperationalError: FATAL: password authentication failed for
 > user "postgres" 
```

实际上在我的数据库设置中，我使用的是另一个帐户（不是 postgres），为什么它要求密码`postgres`？

顺便说一句，我需要安装`psycopy2`吗`webfaction`？以前它在我创建新数据库时起作用。但是现在当我尝试`django auth`创建一个新用户时，它会抛出这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:55:08.907

对不起，愚蠢的我。从 repo 中提取项目后忘记修改数据库设置。

# gwt - GWT 从 2.5RC 升级到 2.5 - NoClassDefFoundError HtmlTemplates？

> ID：14661624
> 
> 赞同：0
> 
> 时间：2013-02-02T11:53:59.843
> 
> 标签：gwt, noclassdeffounderror, classnotfoundexception, gwt-2.5

在将项目从 2.5RC 设置到 2.5 设置移动到新计算机后，我只是想知道如何修复我的项目以避免此错误。它以前工作过。当然`HtmlTemplates`在 2.5 客户端库中可能不存在，但我并不为此烦恼，我只想让我的 UI 显示：

```
11:24:08.060 [ERROR] [myapp] Failed to create an instance of 'org.myapp.client.UI' via deferred binding 

java.lang.RuntimeException: Deferred binding failed for 'org.myapp.client.UIDesktop$Binder' (did you forget to inherit a required module?)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:53)

...

Caused by: java.lang.NoClassDefFoundError: com/google/gwt/uibinder/rebind/model/HtmlTemplates
at com.google.gwt.uibinder.rebind.UiBinderWriter.&lt;init&gt;(UiBinderWriter.java:181)
at com.google.gwt.uibinder.rebind.UiBinderGenerator.generateOnce(UiBinderGenerator.java:188)

...

Caused by: java.lang.ClassNotFoundException: com.google.gwt.uibinder.rebind.model.HtmlTemplates
at java.net.URLClassLoader$1.run(Unknown Source) 
```

我只有 2.5 个 .jars（不是 2.5RC），而且 .classpath 似乎都指向它们，我尝试清除 gwt-Cache、生成的 .js 文件、运行“清理项目”都无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:35:34.453

2.5 中确实没有这样的类，但它早在第一个 2.5 RC 之前就被删除了。它只存在于 2.3 和 2.4 中。

仔细检查您的类路径，您必须引用一些 2.4 或 2.3 gwt-user.jar。要么就是这样，要么你正在使用一些第三方库，这些库基于 GWT 2.4 或 2.3（IIRC，GWT-Platform 为其 2.4 做了这样的事情`GinUiBinder`）；然后它可能会在您的 2.5RC 升级到 2.5 期间出现，因为您更改了类路径中的依赖顺序并将 gwt-user 推送到第三方库之后。

# asp.net-mvc - MVC 不通过提交表单返回只读属性

> ID：14661627
> 
> 赞同：0
> 
> 时间：2013-02-02T11:54:18.053
> 
> 标签：asp.net-mvc, form-submit, readonly, antiforgerytoken

我已经有一段时间试图弄清楚这一点了！
通常：我想从我的表单中获取“只读、隐藏”属性。

我从示例中删除了所有不必要的内容：
我有以下模型

```
public class ChangeOrderDetailModel
{
...
...
    [ReadOnly(true)]
    public int OrderId { get; set; }
} 
```

在视图中：

```
@using (Html.BeginForm("SubmitChangeOrder", "Order"))
{
    @Html.AntiForgeryToken()<br/>
    @Html.HiddenFor(o => o.OrderId) <br />
...
...
} 
```

现在：

1.  在 View HTML 中，OrderID 有一个隐藏字段...

2.  我不希望任何人更改“OrderID”，因为它可能会导致安全问题。

3.  我需要表单提交时的 OrderID 号...

4.  **问题**当表单提交给控制器时， `OrderController.SubmitChangeOrder(ChangeOrderDetailModel mdl){}`
    我看到它`mdl.OrderID` **总是 = 0**。

5.  当我`ReadOnly(true)`从属性中删除属性时，一切正常，但是任何人都可以使用简单的 JS 更改字段的值，这非常糟糕。
    而且我不想只在哈希令牌上中继，因为它也很容易被破坏:(

为什么它会这样工作？
我是否错过了一些东西，一种更好的方式来实现我喜欢的东西？

*注意：可能有几个变更单同时进行，所以会话有点问题。*

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:03:11.643

通过使用 [Readonly(true)] 您明确指示模型绑定器不要将字段绑定到模型的属性。通过使用渲染属性`Html.HiddenFor`已经在渲染的 html 中实现了您想要的。您可以在控制器操作中包含第二个参数 as`int OrderId`并且模型绑定器会将值绑定到该变量

流氓用户可能仍然能够编辑 OrderId。保护它免受此类操作的一种方法是加密 OrderId 并在模型中使用加密值，随后在页面上使用。然后，一旦回发发生，您将解密加密的 OrderId。加密和解密可以封装到模型本身

@TomerW，如果我正确理解了您的问题，您的核心问题是流氓用户可以在客户端更改 OrderId 的值，我的建议是不要以裸露的形式呈现 OrderId，而是在服务器端使用密钥只在服务器上知道。您应该将 HTML 中的加密值呈现为隐藏字段。流氓用户可能仍会尝试更改关联的值，但解密会失败，并且您会知道有人试图摆弄您的值。以下是一个存根实现，

```
public class ChangeOrderDetailModel
{
    [ReadOnly(true)] /*You are instructing the model binder not to bind this value*/
    public int OrderId { get; set; }

    private string _OrderIdEnc;
    public string OrderIdEnc
    {
        /*Encryp*/
        get
        {
            return Encrypt(OrderId);
        }

        set
        {
            _OrderIdEnc = value;
        }
    }

    public void DecryptPayload()
    {
        /* Decrypt, and this will fail is someone has edited the value */
        OrderId = Decrypt(_OrderIdEnc);
    }
} 
```

在您的视图模型中，使用`@Html.HiddenFor(o => o. OrderIdEnc)`. 您可以使用标准的 windows 加密来进行加密和解密。

为了非常安全，您可以为每个请求/响应会话使用不同的密钥。这将防止更高级的流氓用户用旧版本替换 OrderIdEnc。

我确信可能还有其他解决方案，但以上是我多次使用并且有效的模式

干杯

# asp.net - 实施了 BasicAuth，说它缺少 BasicAuth？

> ID：14661628
> 
> 赞同：0
> 
> 时间：2013-02-02T11:54:18.793
> 
> 标签：asp.net, asp.net-mvc-4, basic-authentication

我已经实现了......或者更确切地说从[http://www.asp.net/web-api/overview/security/authentication-and-authorization/basic-authentication](http://www.asp.net/web-api/overview/security/authentication-and-authorization/basic-authentication)复制粘贴的代码但是当我尝试运行该网站时我得到这个错误：

```
Could not load file or assembly 'BasicAuth' or one of its dependencies. The system cannot find the file specified. 
```

我正在研究这个例子，所以我对这是什么知之甚少，为什么它不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T14:02:13.707

BasicAuth 是您的应用程序程序集的名称，通常是您的测试应用程序的名称。您可以在项目属性中检查它。

# algorithm - 找出非常大的'n'的第n个斐波那契数

> ID：14661633
> 
> 赞同：74
> 
> 时间：2013-02-02T11:54:47.787
> 
> 标签：algorithm, math, fibonacci

我想知道如何找到非常大的 n 值的斐波那契数列的第 n 项，例如 1000000。使用小学递归方程`fib(n)=fib(n-1)+fib(n-2)`，找到第 50 项需要 2-3 分钟！

谷歌搜索后，我开始了解 Binet 的公式，但它不适用于 n>79 的值，正如[这里所说](http://www.maths.surrey.ac.uk/hosted-sites/R.Knott/Fibonacci/fibFormula.html)

有没有一种算法可以做到这一点，就像我们找到素数一样？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-02T12:08:14.533

您可以使用矩阵求幂法（线性递归法）。[您可以在此](http://fusharblog.com/solving-linear-recurrence-for-programming-contest/)博客中找到详细的解释和过程。运行时间为*O* (log *n* )。

我认为没有更好的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-02-02T12:55:56.203

[使用memoization](http://en.wikipedia.org/wiki/Memoization)可以节省很多时间。例如，比较以下两个版本（在 JavaScript 中）：

**版本 1**：正常递归

```
var fib = function(n) {
  return n < 2 ? n : fib(n - 1) + fib(n - 2);
}; 
```

**版本 2**：记忆

A. 使用[下划线](http://documentcloud.github.com/underscore/)库

```
var fib2 = _.memoize(function(n) {
  return n < 2 ? n : fib2(n - 1) + fib2(n - 2);
}); 
```

B. 无图书馆

```
var fib3 = (function(){
    var memo = {};
    return function(n) {
        if (memo[n]) {return memo[n];}
        return memo[n] = (n <= 2) ? 1 : fib3(n-2) + fib3(n-1);
    };
})(); 
```

对于 n = 50（在 Chrome 上），第一个版本需要 3 多分钟，而第二个版本只需要不到 5 毫秒！您可以在[jsFiddle](http://jsfiddle.net/hzheng/2CvT6/)中检查这一点。

如果我们知道版本 1 的时间复杂度是指数的（*O* (2 ^(*N* /2) )），而版本 2 的时间复杂度是线性的（*O* ( *N* )），这并不奇怪。

**版本 3**：矩阵乘法

此外，我们甚至可以通过计算*N*个矩阵的乘法将时间复杂度降低到*O* (log( *N ))。*

 *![矩阵](../Images/be7e743a87e223d407e8bf341a55f561.png)

其中*F* [*n*]表示斐波那契数列的第*n项。*

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2018-01-09T15:21:27.290

我同意[Wayne Rooney 的回答](https://stackoverflow.com/a/14661740)，即最佳解决方案将在*O(log n)*步骤中完成，但是整体运行时复杂性将取决于所使用的乘法算法的复杂性。例如，使用[Karatsuba 乘法，整体运行时复杂度将为](https://en.wikipedia.org/wiki/Karatsuba_algorithm)*O(n ^(log [2] 3) ) ≈ O(n ^(1.585) )*。¹

但是，矩阵求幂不一定是最好的方法。正如[Nayuki 项目](https://www.nayuki.io/page/fast-fibonacci-algorithms)的开发人员所注意到的，矩阵求幂带有冗余计算，可以删除。从作者的描述中：

> 给定***F [k]***和***F [k+1]***，我们可以计算这些：
> 
> ![](../Images/cd30e3b7a32be4a4c000b3fe69b36025.png)
> ![](../Images/1a463ef21d6c963e46353aea16149803.png)

请注意，每次拆分只需要 3 次 BigInt 到 BigInt 乘法，而不是矩阵求幂需要 8 次。

不过，我们仍然可以做得比这稍好一些。最优雅的斐波那契恒等式之一与卢卡斯数有关：

![](../Images/d198442c8f2f78470cac5ba58bcbb5e0.png)

其中*L [n]*是第*n^个* [卢卡斯数](https://en.wikipedia.org/wiki/Lucas_number)。这个身份可以进一步概括为：

![](../Images/e64e8e830b3735142f23124f795cc6cc.png)

有一些[或多或少等效](http://codepad.org/vU5b27DI)的递归方式，但最合乎逻辑的似乎是在*F [n]*和*L [n]*上。下面的实现中使用的其他身份可以从[Lucas Sequences](https://en.wikipedia.org/wiki/Lucas_sequence#Other_relations)列出的身份中找到或派生：

![](../Images/0656163df90ecce77c5cca25ce07a090.png)

![](../Images/dbb37c59b84cf79138c1e8a238426025.png)

![](../Images/edb39237d4cbbd2b0becd392b64cc179.png)

以这种方式进行每次拆分只需要两次 BigInt 到 BigInt 的乘法，而最终结果只需要一次。这比 Project Nayuki 提供的代码（[测试脚本](http://codepad.org/exxuWZbo)）快 20% 左右。注意：[原始来源](https://www.nayuki.io/res/fast-fibonacci-algorithms/fastfibonacci.py)已稍作修改（改进）以进行公平比较。

```
def fibonacci(n):
  def fib_inner(n):
    '''Returns F[n] and L[n]'''
    if n == 0:
      return 0, 2
    u, v = fib_inner(n >> 1)
    q = (n & 2) - 1
    u, v = u * v, v * v + 2*q
    if (n & 1):
      u1 = (u + v) >> 1
      return u1, 2*u + u1
    return u, v

  u, v = fib_inner(n >> 1)
  if (n & 1):
    q = (n & 2) - 1
    u1 = (u + v) >> 1
    return v * u1 + q
  return u * v 
```

* * *

### 更新

[灰胡子指出，Takahashi (2000)](https://stackoverflow.com/posts/comments/83448257?noredirect=1) ²已经对上述结果进行了改进，指出 BigInt 平方通常（特别是对于 Schönhage-Strassen 算法）的计算成本低于 BigInt 乘法。作者建议使用以下身份进行迭代，拆分*F [n]*和*L [n]*：

![](../Images/0656163df90ecce77c5cca25ce07a090.png)

![](../Images/edb39237d4cbbd2b0becd392b64cc179.png)

![](../Images/9ad972731974e4886429992e3e188b91.png)

![](../Images/2b0e5358fe09684496f83e9149b5950d.png)

以这种方式迭代每次拆分需要两个 BigInt 平方，而不是上面的 BigInt 平方和 BigInt 乘法。*正如预期的那样，对于非常大的n* ，运行时间明显快于上述实现，但对于较小的值（*n < 25000*）则慢一些。

但是，这也可以稍微改进。作者声称，*“众所周知，卢卡斯数乘积算法使用最少的位运算来计算斐波那契数 F [n]。”* 然后，作者选择采用当时已知最快的卢卡斯数乘积算法，在*F [n]*和*L [n]*上进行拆分。但是请注意，*L [n]*仅用于计算*F [n+1]*。如果考虑以下身份，这似乎有点浪费：

![](../Images/9ad972731974e4886429992e3e188b91.png)

![](../Images/971c7045b64f0d06a36bc875f80f2a2c.png)

![](../Images/258f42fba49aab002f4671efe2000c2e.png)

其中第一个直接取自高桥，第二个是矩阵求幂方法的结果（也由 Nayuki 指出），第三个是前两个相加的结果。这允许对*F [n]*和*F [n+1]*进行明显的拆分。结果需要少一次 BigInt 加法，重要的是，对于偶数*n*少一次除以 2 ；对于奇数*n*，收益翻倍。在实践中，这比 Takahashi 为小*n提出的方法要快得多（快 10-15%），而对于非常大的**n*（[测试脚本](http://codepad.org/exxuWZbo)）则略快一些。

```
def fibonacci(n):
  def fib_inner(n):
    '''Returns F[n] and F[n+1]'''
    if n == 0:
      return 0, 1
    u, v = fib_inner(n >> 1)
    q = (n & 2) - 1
    u *= u
    v *= v
    if (n & 1):
      return u + v, 3*v - 2*(u - q)
    return 2*(v + q) - 3*u, u + v

  u, v = fib_inner(n >> 1)
  # L[m]
  l = 2*v - u
  if (n & 1):
    q = (n & 2) - 1
    return v * l + q
  return u * l 
```

* * *

### 更新 2

自最初发布以来，我对之前的结果也略有改进。除了两个 BigInt 方格之外，在*F [n]*和*F [n+1]*上进行拆分还具有三个 BigInt 加法和每次拆分两个小的常数乘法的开销。*通过拆分L [n]*和*L [n+1]*几乎可以完全消除这种开销：

![](../Images/dbb37c59b84cf79138c1e8a238426025.png)

![](../Images/f5a77c1e1bbee78ccc55db50e35b7b03.png)

![](../Images/d1c5a5749fab179dbacdf555d29589bc.png)

像以前一样，以这种方式拆分需要两个 BigInt 方格，但只需要一个 BigInt 加法。不过，这些值需要与相应的斐波那契数相关联。幸运的是，这可以通过一次除以 5 来实现：

![](../Images/555146faa805be6c886ebd13824d9011.png)

因为商已知是整数，所以可以使用精确除法，例如 GMP `mpz_divexact_ui`。展开最外层的拆分允许我们使用单次乘法计算最终值：

![](../Images/d198442c8f2f78470cac5ba58bcbb5e0.png)

![](../Images/e528c508ffe85dddb1f5d19433c7380e.png)

正如在 Python 中实现的那样，这明显快于小*n的先前实现（快 5-10%），而对于非常大的**n*（[测试脚本](https://tio.run/##pVVNb6MwEL3zK0atUmNCVCCbS6X0uKee9tqtkNOYFm3sUDBI3T@fHY9NQr7atMsFMzOeefOex1Tv5nWts82mqNcKXlT1nkGpqnVtQFV/gyBYygKKcpEb8Ue8iua1DDW/CwB6e6m1rL0NgDH2S5q21g38fNRPIPQSHnCBdvKXBWiYzyFx4QA1RdtaYcJjemecfG0MHcyHNeD@HlLnfEMPGm4g4zCBlGwGbS1E0NLXNQJQMIb0yWVL7Y4WDR2nPM6KxiwK0RnZiDG82XTTyJDXlp9FBi1Z9NbDp6op7/Gfzrvtq01jlziLHKzejs0FwYdNHtY61fLp6r5Gt20q2NVFWzdQtapLtc6@LCkuxumXRE2/KSoCnntFO7vszuiw7Q@piFHBjlRDaiao6ZAVNHY7oREPbflEi2s8xMoepBUdGJu8vVCigRirYy1Wh1pML9XiYTBeF2qR7WuhEK0ezMJh@2qgShbDJOM4UDfbgeqnzTK8HRfbZufb/EAmIjD2Yg5GgngNDqCdBkbzbaEUhM9pwuEWZl8XpvA9DIQpBsLgrfidCZl8a0L@V5VT40LXxI/ISrUTp0tJwfGnI@WuMNy6x5s3xdZ8mWInRTluwedHSf29Frn1xK6PBoguP1Sfo15YIM@1UDLPLdksz5UodZ4zW4/@b6ZUsjT9D66WlRTGohcxLBBNEhP8Yl1jL6WGWugXGaZJknjIomlkbUJh0x/@FPnJiO0F@4F7etbtTp73OYyLGAS2vLCw6xaP3JxOvMVsZGMs7Ee2h43FwHZQ9r6m/RcWYk@uR3RoQ7nQ1yixWkEnVq1s7lg8CGCjgo1UqUPHYugPTYPSVIiJEd@9Aj3jo4aNKHMfbZQBit6nPJsR5xiP7e9v0a1ayBr34NFzpXFtieDc4pXPDVToRwsLjvtZifpFnu8nPN/Q1ZmGfusrwgdjv6F/3AbsZ4kvH95IuYzJhiVx5/EmGxFaSdZaPD@XjF8dcYWk@Axhlrgnhplf8XN0WYoGjE05vyXWhqQRL0PaNpt/)）则稍微快一点。

```
def fibonacci(n):
  def fib_inner(n):
    '''Returns L[n] and L[n+1]'''
    if n == 0:
      return mpz(2), mpz(1)
    m = n >> 1
    u, v = fib_inner(m)
    q = (2, -2)[m & 1]
    u = u * u - q
    v = v * v + q
    if (n & 1):
      return v - u, v
    return u, v - u

  m = n >> 1
  u, v = fib_inner(m)
  # F[m]
  f = (2*v - u) / 5
  if (n & 1):
    q = (n & 2) - 1
    return v * f - q
  return u * f 
```

* * *

^(1可以看出，) *F [n]* ~ *O(n)*的位数（或位数）为：

![](../Images/de692c001fbc4cc58359410135008ab1.png)

使用 Karatsuba 乘法的运行时复杂度可以计算为：

![](../Images/a307c06786e3800644241df4a2ec911a.png)

* * *

² Takahashi, D. (2000)，“[计算大型斐波那契数的快速算法](https://pdfs.semanticscholar.org/9652/9e1fedb0a372b825215c7b471a99088f4515.pdf)” (PDF)，*信息处理快报 75*，第 243-246 页。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-02-02T12:26:50.260

使用重复标识[http://en.wikipedia.org/wiki/Fibonacci_number#Other_identities](http://en.wikipedia.org/wiki/Fibonacci_number#Other_identities)在步骤中找到`n`第 - 个数字。`log(n)`为此，您将不得不使用任意精度的整数。或者您可以通过在每一步使用模运算来计算精确的答案*模数。*

![递归公式1](../Images/61e79e8527098212c542db6c8070d8ca.png)

![递归公式2](../Images/4e0564e15b6af46f3bde4e92ce7a23b6.png)

![递归公式 3](../Images/0a4aa02a9a502642d3cd7e7920af0cfb.png)

注意到`3n+3 == 3(n+1)`，我们可以设计一个*单递归*函数，它在每一步计算***两个***连续的斐波那契数，除以`n`3 并根据余数选择适当的公式。IOW 它一步一步`@(3n+r,3n+r+1), r=0,1,2`从一对`@(n,n+1)`中计算出一对，因此没有双重递归，也不需要记忆。

Haskell 代码在[这里](http://rosettacode.org/wiki/Fibonacci_sequence#With_recurrence_relations)。

[*更新：*](https://en.wikipedia.org/wiki/Fibonacci_number#Matrix_form)

```
F(2n-1) =   F(n-1)^2    + F(n)^2   ===   a' = a^2 + b^2 
F(2n)   = 2 F(n-1) F(n) + F(n)^2   ===   b' = 2ab + b^2 
```

似乎导致更快的代码。使用 [*“卢卡斯序列身份”*](http://en.wikipedia.org/wiki/Lucas_sequence#Other_relations)可能是最快的（[这是由于](https://stackoverflow.com/questions/14661633/finding-out-nth-fibonacci-number-for-very-large-n/14661885#comment29329683_14661885)user: [primo](https://stackoverflow.com/users/1441398/primo)引用了[这个实现](http://en.wikibooks.org/w/index.php?title=Algorithm_Implementation/Mathematics/Fibonacci_Number_Program&stable=0#Lucas_sequence_identities.2C_recursion)）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-02T13:23:22.973

大多数人已经给你链接解释了第 N 个斐波那契数的发现，顺便说一下 Power 算法的工作原理与微小的变化相同。

无论如何，这是我的 O(log N) 解决方案。

```
package algFibonacci;

import java.math.BigInteger;

public class algFibonacci {
    // author Orel Eraki
    // Fibonacci algorithm
    // O(log2 n)
    public static BigInteger Fibonacci(int n) {

        int num = Math.abs(n);
        if (num == 0) {
            return BigInteger.ZERO;
        }
        else if (num <= 2) {
            return BigInteger.ONE;
        }

        BigInteger[][] number = { { BigInteger.ONE, BigInteger.ONE }, { BigInteger.ONE, BigInteger.ZERO } };
        BigInteger[][] result = { { BigInteger.ONE, BigInteger.ONE }, { BigInteger.ONE, BigInteger.ZERO } };

        while (num > 0) {
            if (num%2 == 1) result = MultiplyMatrix(result, number);
            number = MultiplyMatrix(number, number);
            num/= 2;
        }

        return result[1][1].multiply(BigInteger.valueOf(((n < 0) ? -1:1)));
    }

    public static BigInteger[][] MultiplyMatrix(BigInteger[][] mat1, BigInteger[][] mat2) {
        return new BigInteger[][] {
            {
                mat1[0][0].multiply(mat2[0][0]).add(mat1[0][1].multiply(mat2[1][0])), 
                mat1[0][0].multiply(mat2[0][1]).add(mat1[0][1].multiply(mat2[1][1]))
            },
            {
                mat1[1][0].multiply(mat2[0][0]).add(mat1[1][1].multiply(mat2[1][0])), 
                mat1[1][0].multiply(mat2[0][1]).add(mat1[1][1].multiply(mat2[1][1]))
            }
        };
    }

    public static void main(String[] args) {
        System.out.println(Fibonacci(8181));
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-02-02T12:00:01.300

为了计算斐波那契数列的*任意大*元素，您将不得不使用封闭形式的解决方案——Binet 公式，并使用任意精度的数学来提供足够的精度来计算答案。

但是，仅使用递推关系*不需要*2-3 分钟来计算第 50 项——您应该能够在任何现代机器上在几秒钟内将项计算到数十亿。听起来您正在使用完全递归公式，这确实会导致递归计算的组合爆炸。简单的迭代公式**要**快得多。

也就是说：递归解决方案是：

```
int fib(int n) {
  if (n < 2)
    return 1;
  return fib(n-1) + fib(n-2)
} 
```

...然后坐下来观察堆栈溢出。

迭代解决方案是：

```
int fib(int n) {
  if (n < 2)
    return 1;
  int n_1 = 1, n_2 = 1;
  for (int i = 2; i <= n; i += 1) {
    int n_new = n_1 + n_2;
    n_1 = n_2;
    n_2 = n_new;
  }
  return n_2;
} 
```

请注意，我们实际上是如何`n_new`根据先前的项`n_1`和计算下一项`n_2`，然后将所有项“洗牌”以进行下一次迭代。运行时间与 的值呈线性关系，在现代千兆赫兹机器上，数十亿（在中间变量的整数溢出之后）`n`只需几秒钟。`n`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-02T12:01:49.490

对于计算斐波那契数，递归算法是最糟糕的方法之一。通过简单地将前两个数字相加在一个 for 循环（称为迭代方法）中，计算第 50 个元素不会花费 2-3 分钟。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-02T13:23:53.067

这是一个 python 版本，用于计算 O(log(n)) 中的第 n 个斐波那契数

```
def fib(n):
    if n == 0: 
        return 0

    if n == 1: 
        return 1

    def matmul(M1, M2):
        a11 = M1[0][0]*M2[0][0] + M1[0][1]*M2[1][0]
        a12 = M1[0][0]*M2[0][1] + M1[0][1]*M2[1][1]
        a21 = M1[1][0]*M2[0][0] + M1[1][1]*M2[1][0]
        a22 = M1[1][0]*M2[0][1] + M1[1][1]*M2[1][1]
        return [[a11, a12], [a21, a22]]

    def matPower(mat, p):
        if p == 1: 
            return mat

        m2 = matPower(mat, p//2)
        if p % 2 == 0:
            return matmul(m2, m2)
        else: 
            return matmul(matmul(m2, m2),mat)

    Q = [[1,1],[1,0]]

    q_final = matPower(Q, n-1)
    return q_final[0][0] 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-05-03T12:27:04.400

我编写了一个`C`实现，它支持使用 GNU 的**任何规模**的输入数字`gmp`。

计算单个数字的 fib 的时间是`O(n)`，缓存空间是`O(1)`，*（它实际上计算了 0 ~ n 的所有 fib）*。

* * *

## 代码

**fib_cached_gmp.c:**

```
// fibonacci - cached algorithm - any scale of input with GMP,
#include <gmp.h>
#include <stdio.h>
#include <stdlib.h>

// a single step,
void fib_gmp_next(mpz_t *cache) {
    mpz_add(cache[2], cache[0], cache[1]);
    mpz_set(cache[0], cache[1]);
    mpz_set(cache[1], cache[2]);
}

// figure fib for a single number, in O(n),
mpz_t *fib_gmp(int n, mpz_t *result) {
    // init cache,
    mpz_t cache[3]; // number: [fib(n-2), fib(n-1), fib(n)],

    mpz_init(cache[0]);
    mpz_init(cache[1]);
    mpz_init(cache[2]);

    mpz_set_si(cache[0], 0);
    mpz_set_si(cache[1], 1);

    while (n >= 2) {
        fib_gmp_next(cache);
        n--;
    }

    mpz_set(*result, cache[n]);

    return result;
}

// test - print fib from 0 to n, tip: cache won't be reused between any 2 input numbers,
void test_seq(int n) {
    mpz_t result;
    mpz_init(result);

    for (int i = 0; i <= n; i++) {
        gmp_printf("fib(%2d): %Zd\n", i, fib_gmp(i, &result));
    }
}

// test - print fib for a single num,
void test_single(int x) {
    mpz_t result;
    mpz_init(result);

    gmp_printf("fib(%d): %Zd\n", x, fib_gmp(x, &result));
}

int main() {
    // test sequence,
    test_seq(100);

    // test single,
    test_single(12345);

    return 0;
} 
```

**先安装gmp：**

```
// for Ubuntu,
sudo apt-get install libgmp3-dev 
```

**编译：**

```
gcc fib_cached_gmp.c -lgmp 
```

**执行：**

```
./a.out 
```

**示例输出：**

```
fib( 0): 0
fib( 1): 1
fib( 2): 1
fib( 3): 2
fib( 4): 3
fib( 5): 5
fib( 6): 8
fib( 7): 13
fib( 8): 21
fib( 9): 34
fib(10): 55
fib(11): 89
fib(12): 144
fib(13): 233
fib(14): 377
fib(15): 610
fib(16): 987
fib(17): 1597
fib(18): 2584
fib(19): 4181
fib(20): 6765
fib(21): 10946
fib(22): 17711
fib(23): 28657
fib(24): 46368
fib(25): 75025
fib(26): 121393
fib(27): 196418
fib(28): 317811
fib(29): 514229
fib(30): 832040
fib(31): 1346269
fib(32): 2178309
fib(33): 3524578
fib(34): 5702887
fib(35): 9227465
fib(36): 14930352
fib(37): 24157817
fib(38): 39088169
fib(39): 63245986
fib(40): 102334155
fib(41): 165580141
fib(42): 267914296
fib(43): 433494437
fib(44): 701408733
fib(45): 1134903170
fib(46): 1836311903
fib(47): 2971215073
fib(48): 4807526976
fib(49): 7778742049
fib(50): 12586269025
fib(51): 20365011074
fib(52): 32951280099
fib(53): 53316291173
fib(54): 86267571272
fib(55): 139583862445
fib(56): 225851433717
fib(57): 365435296162
fib(58): 591286729879
fib(59): 956722026041
fib(60): 1548008755920
fib(61): 2504730781961
fib(62): 4052739537881
fib(63): 6557470319842
fib(64): 10610209857723
fib(65): 17167680177565
fib(66): 27777890035288
fib(67): 44945570212853
fib(68): 72723460248141
fib(69): 117669030460994
fib(70): 190392490709135
fib(71): 308061521170129
fib(72): 498454011879264
fib(73): 806515533049393
fib(74): 1304969544928657
fib(75): 2111485077978050
fib(76): 3416454622906707
fib(77): 5527939700884757
fib(78): 8944394323791464
fib(79): 14472334024676221
fib(80): 23416728348467685
fib(81): 37889062373143906
fib(82): 61305790721611591
fib(83): 99194853094755497
fib(84): 160500643816367088
fib(85): 259695496911122585
fib(86): 420196140727489673
fib(87): 679891637638612258
fib(88): 1100087778366101931
fib(89): 1779979416004714189
fib(90): 2880067194370816120
fib(91): 4660046610375530309
fib(92): 7540113804746346429
fib(93): 12200160415121876738
fib(94): 19740274219868223167
fib(95): 31940434634990099905
fib(96): 51680708854858323072
fib(97): 83621143489848422977
fib(98): 135301852344706746049
fib(99): 218922995834555169026
fib(100): 354224848179261915075
fib(12345): 400805695072240470970514993214065752192289440772063392234116121035966330621821050108284603033716632771086638046166577665205834362327397885009536790892524821512145173749742393351263429067658996935575930135482780507243981402150702461932551227590433713277255705297537428017957026536279252053237729028633507123483103210846617774763936154673522664591736081039709294423865668046925492747583953758325850613548914282578320544573036249175099094644435323970587790740267131607004023987409385716162460955707793257532112771932704816713519196128834470721836094265012918046427449156654067195071358955104097973710150920536847877434256779886729555691213282504703193401739340461924048504866698176130757935914248753973087073009601101912877383634628929467608983980664185363370286731771712542583041365328648124549323878806758395652340861186334027392307091079257180835672989798524084534677252369585918458720952520972332496025465803523315515681084895362126005441170936820059518262349022456888758938672920855739736423917065122816343192172271301981007636070751378441363091187289522144227851382197807194256392294919912037019476582418451273767976783751999133072126657949249799858935787018952232743400610036315564885371356712960608966755186612620425868892621106627825137425386831657368826398245606147944273998498356443362170133234924531673939303668042878258282104212769625245680321344034442698232414181912301904509531018692483863038992377680591406376081935756597411807864832452421993121459549055042253305545594009110753730302061881025182053074077930494574304284381890534053065639084253641881363463311184024281835265103884539012874542416238100890688593076189105555658375552988619203325356676814545718066196038345684671830102920209857682912971565838896011294918349088792184108318689299230788355618638040186790724351073650210514429114905535411044888774713860041341593318365792673354888566799196442017231870631867558530906286613228902689695061557951752309687806567573290910909535395758148994377158637050112347651517847188123790794231572729345617619677555583207012253101701328971768827861922408064379891201972881554890367344239218306050355964382953279316318309272212482218232309006973312977359562553184608144571713073802285675503209229581312057259729362382786183100343961484090866057560474044189870633912200595478051573769889968342203512550302655117491740823696686983281784153050366346823513213598551985596176977626982962058849363351794302206703907577970065793839511591930741441079234179943480206539767561244271325923343752071038968002157889912694947204003637791271084190929058369801531787887444598295425899927970 
```

* * *

**尖端：**

*   他`test_seq()`不是很聪明，它没有重用两个输入数字之间的缓存。
    虽然实际上一次调用`fib_gmp()`就足够了，但如果您在每个步骤中添加一个`gmp_printf()`to`fib_gmp_next()`并提供 i to 。 无论如何，这只是为了演示。`fib_gmp_next()`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-02-02T13:56:53.263

[首先，您可以从已知的最大斐波那契项](http://wiki.answers.com/Q/What_is_the_largest_known_Fibonacci_number)中形成最高项的概念。另请参阅[逐步执行递归斐波那契函数演示](https://www.khanacademy.org/science/computer-science/v/stepping-through-recursive-fibonacci-function)。[本文介绍](http://ftp.mcs.anl.gov/pub/tech_reports/reports/P767.pdf)了有关此主题的一个感兴趣的方法。[另外，试着用世界上最糟糕的算法](http://bosker.wordpress.com/2011/04/29/the-worst-algorithm-in-the-world/)来阅读它？.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-05-04T06:40:28.400

我解决了一个 UVA 问题：495 - 斐波那契冻结

它生成最多 5000 个的所有斐波那契数，并为给定的输入（范围 1-5000）打印输出。

它在运行时间 00.00 秒时被接受。

5000 的斐波那契数是：

```
3878968454388325633701916308325905312082127714646245106160597214895550139044037097010822916462210669479293452858882973813483102008954982940361430156911478938364216563944106910214505634133706558656238254656700712525929903854933813928836378347518908762970712033337052923107693008518093849801803847813996748881765554653788291644268912980384613778969021502293082475666346224923071883324803280375039130352903304505842701147635242270210934637699104006714174883298422891491273104054328753298044273676822977244987749874555691907703880637046832794811358973739993110106219308149018570815397854379195305617510761053075688783766033667355445258844886241619210553457493675897849027988234351023599844663934853256411952221859563060475364645470760330902420806382584929156452876291575759142343809142302917491088984155209854432486594079793571316841692868039545309545388698114665082066862897420639323438488465240988742395873801976993820317174208932265468879364002630797780058759129671389634214252579116872755600360311370547754724604639987588046985178408674382863125 
```

* * *

```
#include<stdio.h>
#include<string.h>

#define LIMIT 5001
#define MAX 1050
char num[LIMIT][MAX];
char result[MAX];
char temp[MAX];

char* sum(char str1[], char str2[])
{
    int len1 = strlen(str1);
    int len2 = strlen(str2);
    int minLen, maxLen;
    int i, j, k;

    if (len1 > len2)
        minLen = len2, maxLen = len1;
    else
        minLen = len1, maxLen = len2;
    int carry = 0;
    for (k = 0, i = len1 - 1, j = len2 - 1; k<minLen; k++, i--, j--)
    {
        int val = (str1[i] - '0') + (str2[j] - '0') + carry;
        result[k] = (val % 10) + '0';
        carry = val / 10;
    }
    while (k < len1)
    {
        int val = str1[i] - '0' + carry;
        result[k] = (val % 10) + '0';
        carry = val / 10;

        k++; i--;
    }
    while (k < len2)
    {
        int val = str2[j] - '0' + carry;
        result[k] = (val % 10) + '0';
        carry = val / 10;

        k++; j--;
    }
    if (carry > 0)
    {
        result[maxLen] = carry + '0';
        maxLen++;
        result[maxLen] = '\0';
    }
    else
    {
        result[maxLen] = '\0';
    }
    i = 0;
    while (result[--maxLen])
    {
        temp[i++] = result[maxLen];
    }
    temp[i] = '\0';
    return temp;
}

void generateFibonacci()
{
    int i;
    num[0][0] = '0'; num[0][1] = '\0';
    num[1][0] = '1'; num[1][1] = '\0';
    for (i = 2; i <= LIMIT; i++)
    {
        strcpy(num[i], sum(num[i - 1], num[i - 2]));
    }
}

int main()
{
    //freopen("input.txt", "r", stdin);
    //freopen("output.txt", "w", stdout);
    int N;
    generateFibonacci();
    while (scanf("%d", &N) == 1)
    {
        printf("The Fibonacci number for %d is %s\n", N, num[N]);
    }
    return 0;
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-12-22T17:33:57.697

最简单的 Pythonic 实现可以如下给出

```
def Fib(n):
    if (n < 0) : 
        return -1
    elif (n == 0 ): 
        return 0
    else:
        a = 1
        b = 1
        for i in range(2,n+1):
            a,b = b, a+b
        return a 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-02-14T11:09:46.663

python中更优雅的解决方案

```
def fib(n):
  if n == 0: 
    return 0
  a, b = 0, 1
  for i in range(2, n+1):
    a, b = b, a+b
  return b 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-05-07T02:49:17.617

借助一些离散数学知识，您可以在常数时间 O(1) 内找到任何斐波那契数。有一种叫做*线性齐次递归关系*的东西。

斐波那契数列就是一个著名的例子。

要找到第 n 个斐波那契数，我们需要找到

![F](../Images/041e09a94f6538a85eb7e52c7236e414.png)

我们知道

![f1](../Images/84b7374160afcd2658aac6ea384b7dfc.png)

在哪里

![f2](../Images/1d54e5ec91c1af1a53dbcf381bf741bd.png)

那么，特征方程为

![f3](../Images/3efa3573c027834cc1690d2da2d9995d.png)

在找到特征方程的根并代入第一个方程后

![f4](../Images/2119a62d673a6088d3de246519b0659f.png)

最后，我们需要找到 alpha 1 & alpha 2 的值

![ff](../Images/7fdc14b8706d7d238ba3f30c74f16acd.png)

现在，您可以使用此等式在 O(1) 中找到任何斐波那契数。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-05-03T08:44:06.090

我在 c 中有一个源代码来计算第 3500 个斐波那契数：- 更多详细信息，请访问

[http://codingloverlavi.blogspot.in/2013/04/fibonacci-series.html](http://codingloverlavi.blogspot.in/2013/04/fibonacci-series.html)

C中的源代码：-

```
#include<stdio.h>
#include<conio.h>
#define max 2000

int arr1[max],arr2[max],arr3[max];

void fun(void);

int main()
{
    int num,i,j,tag=0;
    clrscr();
    for(i=0;i<max;i++)
        arr1[i]=arr2[i]=arr3[i]=0;

    arr2[max-1]=1;

    printf("ENTER THE TERM : ");
    scanf("%d",&num);

    for(i=0;i<num;i++)
    {
        fun();

        if(i==num-3)
            break;

        for(j=0;j<max;j++)
            arr1[j]=arr2[j];

        for(j=0;j<max;j++)
            arr2[j]=arr3[j];

    }

    for(i=0;i<max;i++)
    {
        if(tag||arr3[i])
        {
            tag=1;
            printf("%d",arr3[i]);
        }
    }

    getch();
    return 1;
}

void fun(void)
{
    int i,temp;
    for(i=0;i<max;i++)
        arr3[i]=arr1[i]+arr2[i];

    for(i=max-1;i>0;i--)
    {
        if(arr3[i]>9)
        {
            temp=arr3[i];
            arr3[i]%=10;
            arr3[i-1]+=(temp/10);
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-08-26T18:52:04.667

这是一个简短的 python 代码，最多可以使用 7 位数字。只需要一个 3 元素数组

```
def fibo(n):
    i=3
    l=[0,1,1]
    if n>2:
        while i<=n:
            l[i%3]= l[(i-1) % 3] + l[(i-2) % 3]
            i+=1
    return l[n%3] 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-28T18:39:46.490

```
#include <bits/stdc++.h>
#define MOD 1000000007
using namespace std;

const long long int MAX = 10000000;

// Create an array for memoization
long long int f[MAX] = {0};

// Returns n'th fuibonacci number using table f[]
long long int fib(int n)
{
    // Base cases
    if (n == 0)
        return 0;
    if (n == 1 || n == 2)
        return (f[n] = 1);

    if (f[n])
        return f[n];

    long long int k = (n & 1)? (n+1)/2 : n/2;

    f[n] = (n & 1)? (fib(k)*fib(k) + fib(k-1)*fib(k-1)) %MOD
        : ((2*fib(k-1) + fib(k))*fib(k))%MOD;

    return f[n];
}

int main()
{
    long long int n = 1000000;
    printf("%lld ", fib(n));
    return 0;
} 
```

时间复杂度：O(Log n)，因为我们在每个递归调用中将问题分成一半。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-08-13T16:50:16.070

计算斐波那契数（使用 Haskell）：

**版本 1**：将定义直接翻译为代码（非常慢的版本）：

```
fib :: Integer -> Integer
fib 0 = 1
fib 1 = 1
fib n =
  fib (n - 1) + fib (n - 2) 
```

**版本 2**：使用我们所做的工作来计算*F_{n - 1}*和*F_{n - 2}*（快速版本）：

```
fibs = 0 : 1 : zipWith (+) fibs (tail fibs) 
```

`fibs !! n`您只需执行where `n`is index即可获得第 n 个斐波那契。

**版本 3**：使用矩阵乘法技术。（更快的版本）：

```
-- declaring a matrix
data Matrix = Matrix
  ( (Integer, Integer)
  , (Integer, Integer)
  )
  deriving (Show, Eq)

-- creating it an instance of Num
-- so that if we implement (*) we get (^) for free
instance Num Matrix where
  (*) = mMult

  -- don't need these
  (+) = undefined
  negate = undefined
  fromInteger = undefined
  abs = undefined
  signum = undefined

-- 2-d matrix multiplication
mMult :: Matrix -> Matrix -> Matrix
mMult (Matrix ((a11, a12), (a21, a22))) (Matrix ((b11, b12), (b21, b22))) =
  Matrix
    ( (a11 * b11 + a12 * b21, a11 * b12 + a12 * b22)
    , (a21 * b11 + a22 * b21, a21 * b12 + a22 * b22)
    )

-- base matrix for generating fibonacci
fibBase :: Matrix
fibBase =
  Matrix ((1,1), (1,0))

-- get the large fibonacci numbers
fastFib :: Int -> Integer
fastFib n =
  let
    getNth (Matrix ((_, a12), _)) = a12
  in
    getNth (fibBase ^ n) 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2014-02-16T07:00:01.777

我编写了一个小代码来计算大数的斐波那契，这比会话递归方式更快。

我正在使用记忆技术来获取最后一个斐波那契数，而不是重新计算它。

* * *

```
public class FabSeries {
    private static Map<BigInteger, BigInteger> memo = new TreeMap<>();

    public static BigInteger fabMemorizingTech(BigInteger n) {
        BigInteger ret;
        if (memo.containsKey(n))
            return memo.get(n);
        else {
            if (n.compareTo(BigInteger.valueOf(2)) <= 0)
                ret = BigInteger.valueOf(1);
            else
                ret = fabMemorizingTech(n.subtract(BigInteger.valueOf(1))).add(
                        fabMemorizingTech(n.subtract(BigInteger.valueOf(2))));
            memo.put(n, ret);
            return ret;
        }

    }

    public static BigInteger fabWithoutMemorizingTech(BigInteger n) {
        BigInteger ret;
        if (n.compareTo(BigInteger.valueOf(2)) <= 0)
            ret = BigInteger.valueOf(1);
        else

            ret = fabWithoutMemorizingTech(n.subtract(BigInteger.valueOf(1))).add(
                    fabWithoutMemorizingTech(n.subtract(BigInteger.valueOf(2))));
        return ret;
    }

       public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("Enter Number");

        BigInteger num = scanner.nextBigInteger();

        // Try with memorizing technique
        Long preTime = new Date().getTime();
        System.out.println("Stats with memorizing technique ");
        System.out.println("Fibonacci Value : " + fabMemorizingTech(num) + "  ");
        System.out.println("Time Taken : " + (new Date().getTime() - preTime));
        System.out.println("Memory Map: " + memo);

        // Try without memorizing technique.. This is not responsive for large
        // value .. can 50 or so..
        preTime = new Date().getTime();
        System.out.println("Stats with memorizing technique ");
        System.out.println("Fibonacci Value : " + fabWithoutMemorizingTech(num) + " ");
        System.out.println("Time Taken : " + (new Date().getTime() - preTime));

    }
} 
```

* * *

> 输入号码
> 
> 40
> 
> 具有记忆技术的统计数据
> 
> 斐波那契值：102334155
> 
> 所用时间：5
> 
> 内存映射：{1=1, 2=1, 3=2, 4=3, 5=5, 6=8, 7=13, 8=21, 9=34, 10=55, 11=89, 12= 144, 13=233, 14=377, 15=610, 16=987, 17=1597, 18=2584, 19=4181, 20=6765, 21=10946, 22=17711, 23=28657, 24=46368, 25=75025, 26=121393, 27=196418, 28=317811, 29=514229, 30=832040, 31=1346269, 32=2178309, 33=3524578, 34=5702887, 35=9227465, 35=9227465, 3 24157817, 38=39088169, 39=63245986, 40=102334155}
> 
> 无需记忆技术的统计数据
> 
> 斐波那契值：102334155
> 
> 所用时间：11558

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2014-08-12T21:44:40.900

如果您使用 C#，请查看 Lync 和 BigInteger。我用 1000000（实际上是 1000001，因为我跳过了第一个 1000000）尝试了这个，并且不到 2 分钟（00:01:19.5765）。

```
public static IEnumerable<BigInteger> Fibonacci()
{
    BigInteger i = 0;
    BigInteger j = 1;
    while (true)
    {
        BigInteger fib = i + j;
        i = j;
        j = fib;
        yield return fib;
    }
}

public static string BiggerFib()
{
    BigInteger fib = Fibonacci().Skip(1000000).First();
    return fib.ToString();    
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2015-03-01T02:01:50.977

这个 JavaScript 实现可以毫无问题地处理 nthFibonacci(1200)：

```
var nthFibonacci = function(n) {
    var arr = [0, 1];
    for (; n > 1; n--) {
        arr.push(arr.shift() + arr[0])
    }
    return arr.pop();
};

console.log(nthFibonacci(1200)); // 2.7269884455406272e+250 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2017-06-04T03:50:16.670

我做了一个程序。计算值不需要很长时间，但可以显示的最大项是第 1477 个（因为 double 的最大范围）。结果几乎立即出现。该系列从0开始。如果需要任何改进，请随时编辑。

```
#include<iostream>
using namespace std;
void fibseries(long int n)
{
    long double x=0;
    double y=1;
    for (long int i=1;i<=n;i++)
     {
        if(i%2==1)
         {
            if(i==n)
             {
              cout<<x<<" ";
             }
            x=x+y;
         } 
        else 
         {
            if(i==n)
             {
              cout<<x<<" ";
             }
            y=x+y;
         }
     }
}
main()
{
    long int n=0;
    cout<<"The number of terms ";
    cin>>n;
    fibseries(n);
    return 0;
} 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2019-03-01T06:43:50.807

**仅供参考**：

以下公式似乎工作正常，但取决于所用数字的准确性 -

> [((1+√5)/2)ⁿ- ((1-√5)/2)ⁿ]/​​√5

**注意：**为了更精确，不要四舍五入。

**JS示例代码：**

```
let n = 74,
const sqrt5 = Math.sqrt(5);
fibNum = Math.round((Math.pow(((1+sqrt5)/2),n)- Math.pow(((1-sqrt5)/2),n))/sqrt5) ; 
```

根据**Number Precision**，它可以在 chrome 控制台上正常工作，直到**n=74**

打开任何建议！

**另一种解决方案**

按照步骤-

1.  以一定的时间间隔制作一组斐波那契数列的指数和值和前值。例如每 50 个或每 100 个。
2.  *从step-1*`n`的集合中找到所需数字的最接近的较低索引。
**   通过在每个后续值中添加先前的值，以传统方式进行。*

 ***注意：**看起来不太好，但如果你真的关心时间复杂度，这个解决方案很受欢迎。根据*step-1* ，最大迭代次数将等于间隔。

**结论：**

1.  斐波那契数与[黄金比例](https://en.wikipedia.org/wiki/Golden_ratio)密切相关：[Binet 公式](https://en.wikipedia.org/wiki/Binet_equation)用 n 和黄金比例表示第 n 个[斐波那契数](https://en.wikipedia.org/wiki/Fibonacci_number)，并暗示随着 n 的增加，两个连续斐波那契数的比例趋于黄金比例。
2.  在纯数学中，Binet 的公式每次都会给你准确的结果。在现实世界的计算中会出现错误，因为所需的精度超过了使用的精度。每个真正的解决方案都有相同的问题，在某些时候会超出精度。**

# php - 如何将数据发布到此函数 file_get_contents("php://input") 以从服务器读取文件

> ID：14661636
> 
> 赞同：-1
> 
> 时间：2013-02-02T11:54:55.717
> 
> 标签：php, html, forms, input, file-get-contents

我需要创建 html 页面以将数据发送到包含以下代码的 file.php：file_get_contents("php://input"); 让它显示来自服务器的文件...

这个可以吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:17:24.413

要从文件中获取输出，您不需要使用 php:// 包装器。您可以在本地（首选）或通过 http:// 获取文件

检查手册[http://php.net/file_get_contents](http://php.net/file_get_contents)

# php - 允许缓存 image.php 直到源被更改

> ID：14661637
> 
> 赞同：2
> 
> 时间：2013-02-02T11:54:59.800
> 
> 标签：php, caching, http-headers

以下代码是我在 image.php 中使用的代码（htaccess 下也是 image.jpeg）。如果源未更改（因此它是相同的图像），我希望用户能够访问缓存的副本。但是，如果源已更改，请获取新副本。该图像是背景图像，因此缓存很重要。这段代码正确吗？我在 Chrome 中尝试过，刷新页面总是重新加载图像。再次访问该页面（单击回车）始终保留缓存的图像，即使它已被更新。

```
<?php
session_start(); 
header("Cache-Control: private, max-age=10800, pre-check=10800");
header("Pragma: private");
header("Expires: " . date(DATE_RFC822,strtotime(" 2 day")));
if(file_exists('settings.xml')){
        $xml = simplexml_load_file('settings.xml');
        define("BACKGROUND_IMAGE", $xml->background->image);
        define("BACKGROUND_TIME", $xml->background->time); // when image changes this is set to time()
    }
if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) 
       && 
  (strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == BACKGROUND_TIME)) {
  // send the last mod time of the file back
  header('Last-Modified: '.gmdate('D, d M Y H:i:s', BACKGROUND_TIME).' GMT', 
  true, 304);
  exit;
}
// open the file in a binary mode
$name = BACKGROUND_IMAGE;
$fp = fopen($name, 'rb');
// send the right headers
header("Content-Type: image/png");
header("Content-Length: " . filesize($name));
// dump the picture and stop the script
fpassthru($fp);
exit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:04:08.030

我个人使用这样的东西并且效果很好；

```
$etag = '"'. md5($img) .'"';
if (isset($_SERVER['HTTP_IF_NONE_MATCH']) 
       && $_SERVER['HTTP_IF_NONE_MATCH'] == $etag) {
    header('HTTP/1.1 304 Not Modified');
    header('Content-Length: 0');
    exit;
}

$expiry = 604800; // (60*60*24*7)
header('ETag: '. $etag);
header('Last-Modified: '. gmdate('D, d M Y H:i:s', time()) .' GMT');
header('Expires:'.        gmdate('D, d M Y H:i:s', time() + $expiry) .' GMT');
...
// show/send/read image 
```

但是，如果您想看的话，这里还有其他内容（参考：[在 PHP 中回答 HTTP_IF_MODIFIED_SINCE 和 HTTP_IF_NONE_MATCH](https://stackoverflow.com/questions/2000715/answering-http-if-modified-since-and-http-if-none-match-in-php)）。

# dart - indexed_db - objectstore.delete - onSuccess

> ID：14661641
> 
> 赞同：1
> 
> 时间：2013-02-02T11:55:34.323
> 
> 标签：dart

有人可以告诉我以下代码有什么问题。主要问题是该行：

```
fDbListAllClients;    // this is not being "called" 
```

似乎没有被执行。

也可能存在其他错误代码。我不关心是否有必要检查删除，我想知道是什么导致了不执行相关行的问题。

```
fDbDeleteOneClient(String sKey) {
  var oDbTxn      =  ogDb1.transaction(sgTblClient, 'readwrite');
  var oDbTable    =  oDbTxn.objectStore(sgTblClient);
  var oDbRecord   =   oDbTable.getObject(sKey);
  oDbRecord.onSuccess.first.then((val) {if (oDbRecord.result == null) {
    window.alert("Record $sKey not found and cannot be deleted");
    return;}});
  var oDbDelReq   =  oDbTable.delete(sKey);
  oDbDelReq.onSuccess.first.then((val1) {
    var oDbRecord   =   oDbTable.getObject(sKey);  // check if it was deleted
    oDbRecord.onSuccess.first.then((val2){
      if (oDbRecord.result != null) {
        window.alert("Record $sKey was found but cannot be deleted");
      }
    });
    fDbListAllClients;    // this is not being "called"
  });  
  oDbDelReq.onError.first.then((e) => window.alert(
    "Error on Delete of $sKey. Error = ${e}"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T02:33:03.547

部分问题或主要问题是需要使用 onSuccess.listen()。正如有人在另一个问题上回答的那样：

“onSuccess 是一个流。如果你想接收多个元素，只需“监听”它们：onSuccess.listen。”

# jquery - jQuery On 的问题，特别是 iPad

> ID：14661642
> 
> 赞同：1
> 
> 时间：2013-02-02T11:55:37.943
> 
> 标签：jquery, ipad, jquery-click-event, jquery-on

阅读了它并多次被“告知”使用`live`，而不是`on`我将所有代码移到`on`......并且遇到了很多麻烦！

我已经克服了大部分，但是今天我遇到了一个非常奇怪的问题。

我有一个问题/答案公告板的东西，其中显示了消息标题，但在单击标题时会动态加载内容，HTML 是

```
<div class="headerRow" id="header_<%# Eval("headerId")%>">
    <span class="delete" id="delete_<%# Eval("msgId")%>"></span>
    <span class="markClosed" id="close_<%# Eval("headerId")%>"></span>

    <span id="view_<%# Eval("msgId")%>" class="openCurrent">                                       
        <span class="customerData userCol">
            <span class="qName"><%# Eval("customerName")%></span>
            <span class="qEmail">(<%# Eval("email")%>)</span>                           
        </span>    
        <span class="subjectCol"><%# Eval("subject")%></span>                             
        <span class="timeCol"><%# Eval("dateTime")%></span> 
    </span>

    <span class="reply" id="reply_<%# Eval("msgId")%>"> Reply </span>
</div> 
```

因此，我们有一个`headerRow`容器，其中有一些用于关闭或删除消息线程的按钮，然后是一个`span`包含消息详细信息、用户名、电子邮件主题的按钮，然后是一个用于打开回复表单的按钮。

带类的跨度`openCurrent`在绑定上有一个 jQuery，如下所示：

```
$('body').on('click', '.openCurrent', function (e) {
    var msgid = extractNumbers($(this).attr('id')); // sub function to pull the message ID from the element ID
    if ($('#content_' + msgid).html() == '') {
        $(but).addClass('centreLoader');
        getMsgContent(msgid, 'absolute', function (result) {
            // getMsgContent is an AJAX call returning the message
            $('#content_' + msgid).html(result).slideToggle();
        });
    } else {
        $('#content_' + msgid).slideToggle();
    };
}); 
```

现在，这在我的 PC 上完美运行，但在 iPad 上不可靠。

它有时会起作用，我无法弄清楚它为什么/何时会起作用的任何模式。

我最初的`on`绑定看起来像这样：

```
$('.headerRow').on('click', '.openCurrent', function (e)..... 
```

但是在阅读了移动 Safari 中的一个错误之后，这里：

[jQuery .on() 和 .delegate() 在 iPad 上不起作用](https://stackoverflow.com/questions/10165141/jquery-on-and-delegate-doesnt-work-on-ipad)

我将其更改为身体，但对行为没有影响。

我之前也注意到，`click`除非在这种情况下元素具有 CSS，否则移动 Safari 不会触发事件`cursor:pointer`，我已经有了它，因为它在桌面 GUI 上视觉上是有意义的。

有人有什么想法吗？

编辑：

它在 iPad 上的 Chrome 中也不起作用！

附加编辑：

我也尝试将点击事件绑定到`headerRow`元素，但遇到同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:38:46.980

对......好吧，如果这对将来的任何人有任何帮助，我会回答我自己的问题。

我忘记提出问题的一件事是元素上的 CSS，它似乎是`hover`导致问题的选择器

```
@media only screen and (min-device-width: 800px) {
  /* Hover only on PC, disabled for iPad */
    .headerRow:hover {box-shadow:2px 2px 2px #666;background: #c0c0c0;
        background: -moz-linear-gradient(top,  #c0c0c0 1%, #f0f0f0 41%, #f0f0f0 55%, #c0c0c0 100%); 
        background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#c0c0c0), color-stop(41%,#f0f0f0), color-stop(55%,#f0f0f0), color-stop(100%,#c0c0c0)); 
        background: -webkit-linear-gradient(top,  #c0c0c0 1%,#f0f0f0 41%,#f0f0f0 55%,#c0c0c0 100%);
        background: -o-linear-gradient(top,  #c0c0c0 1%,#f0f0f0 41%,#f0f0f0 55%,#c0c0c0 100%); 
        background: -ms-linear-gradient(top,  #c0c0c0 1%,#f0f0f0 41%,#f0f0f0 55%,#c0c0c0 100%); 
        background: linear-gradient(to bottom,  #c0c0c0 1%,#f0f0f0 41%,#f0f0f0 55%,#c0c0c0 100%);    
        -webkit-transition: all 0.2s;  -moz-transition:    all 0.2s;  -ms-transition:     all 0.2s;  -o-transition:      all 0.2s;
    }
} 
```

我有一堆渐变的 CSS，上面有过渡，现在已经把它包装进去了

```
@media only screen and (min-device-width: 800px) {} 
```

阻止它在 iPad 上显示它工作正常。

我尝试先排除过渡，但没有这样做，必须禁用整个悬停 CSS

我也将`on`绑定更改为`.headerRow`它仍然有效，也许是因为 Safari 自该错误以来一直在更新？

# iphone - 从 iphone 中的陀螺仪参数更新精灵位置

> ID：14661644
> 
> 赞同：0
> 
> 时间：2013-02-02T11:55:52.757
> 
> 标签：iphone, cocos2d-iphone, gyroscope

我正在尝试通过使用来自陀螺仪的俯仰、滚动和偏航值来更新 cocos2d 中图像精灵的位置（如在 iphone 应用程序“skyview”中）。怎么能这样做？我只想要 X 和 Y 位置与 3 个参数（俯仰、滚动和偏航）之间的关系。

如果代码太大，请给我一些可以实现此目的的链接。

提前致谢。

# php - PHPUnit：找出标头的发送位置

> ID：14661645
> 
> 赞同：2
> 
> 时间：2013-02-02T11:56:16.430
> 
> 标签：php, phpunit

我有一段代码正在使用 PHPUnit 进行测试，但收到以下错误：

```
session_regenerate_id(): Cannot regenerate session id - headers already sent 
```

我想知道标头的发送*位置*；一般来说，当我在浏览器中测试代码时，我会看到一条警告，其中提到了这样的位置：

```
Warning: Cannot modify header information - headers already sent by 
(output started at /www/xxxx/x.php:52) in /www/xxxx/index.php on line 123 
```

但是在 PHPUnit 测试中，没有这样的信息；PHPUnit 只显示上面的错误和回溯：

```
/var/www/yii/framework/web/CHttpSession.php:166
/var/www/yii/framework/web/auth/CWebUser.php:681
/var/www/yii/framework/web/auth/CWebUser.php:214
... 
```

这只是指出错误发生的位置。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:58:49.797

它告诉您标头已发送到何处。
解决方案是在测试函数中模拟会话组件。

```
$mockSession = $this->getMock('CHttpSession', array('regenerateID'));  
Yii::app()->setComponent('session', $mockSession); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-01T22:43:28.663

我得到了同样的错误，但我不使用 Yii。这是我使用`ob_*`函数解决它的方法：

我使用一个`phpunit.xml`配置文件，其中提到了一个**引导**文件：

```
<phpunit bootstrap="phpunit_bootstrap.php">
    ...
</phpunit> 
```

在`phpunit_bootstrap.php`我开始使用[`ob_start()`](http://php.net/manual/en/function.ob-start.php)

```
<?php
ob_start();
// some other configuration lines ... 
```

然后我在测试类中使用了 2 个**PHPUnit方法：**

```
// Erase output buffer before starting the tests
public static function setUpBeforeClass(){
    ob_clean();
}

// Turn off output buffering after the tests
public static function tearDownAfterClass(){
    ob_end_clean();
} 
```

* * *

*   [`ob_clean()`](http://php.net/manual/en/function.ob-clean.php)
*   [`ob_end_clean()`](http://php.net/manual/en/function.ob-end-clean.php)
*   [`setUpBeforeClass()`&`tearDownAfterClass()`](https://phpunit.readthedocs.io/en/7.4/fixtures.html#sharing-fixture)

# reactiveui - 从 IObservable 填充 ReactiveCollection

> ID：14661647
> 
> 赞同：1
> 
> 时间：2013-02-02T11:56:21.243
> 
> 标签：reactiveui

刚开始使用 ReactiveUI。我基本上是用查询结果填充网格。我的视图模型目前看起来像这样。

```
 public class QueryViewModel : ViewModelBase 
{

    private readonly ResultSet _resultSet = null;

    public ReactiveCollection<GridColumn> Columns { get; private set; }
    public ReactiveCollection<GridRow> Rows { get; private set; }

    public QueryViewModel()
    {
        _resultSet = ... run query

        Columns = new ReactiveCollection<GridColumn>(from c in _resultSet.Columns select new GridColumn(c));
        Rows = new ReactiveCollection<GridRow>(from r in _resultSet.Rows select new GridRow(r));

        //Rows = new ReactiveCollection<GridRow>();
        //_resultSet.ObservableRows
        //          .Subscribe(r => Rows.Add(new GridRow(r)));                     

    }    
} 
```

正如您所看到的，我可以在使用 IEnumerable 填充时使其工作，但您可以从注释掉的位中看到，我不太确定从 IObservable 填充的方式。

任何机会有人可以指出我正确的方向，拜托。

编辑：

为了全面披露，我已经包含了 ObservableRows 的实现，以防我在这里犯了错误。

```
Return Observable.Create<Row>((o) => {
             var cn = New SqlConnection(connection);
             var cmd = New SqlCommand(sql, cn);
             var asyncReader = Observable.FromAsyncPattern<SqlDataReader>(cmd.BeginExecuteReader, cmd.EndExecuteReader);
             IDisposable subscription;
             Try {
                cn.Open();
                subscription = asyncReader().Subscribe(rdr => PublishRows(rdr, o, columns));
             }
             Catch Exception ex {
                o.OnError(ex);
             }

             Return Disposable.Create(() => { 
                  subscription.Dispose();
                  cmd.Dispose();
                  cn.Close();
                  cn.Dispose();
             });
} 
```

很多谢谢

小号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:14:08.980

怎么样：

```
Rows = _resultSet.ObservableRows.CreateCollection(); 
```

# image - 跟踪低采样简单图像中的简单对象

> ID：14661649
> 
> 赞同：0
> 
> 时间：2013-02-02T11:56:29.530
> 
> 标签：image, image-processing, tracking, sampling

我正在追踪马来西亚上空下雨的云层。采样率为每 3 小时一次（卫星每次绕地球运行时都会拍摄一张照片）。这些是易于阈值化的简单对象，但它们的大小、形状和移动距离各不相同。如果您查看 3 或 4 帧，人类很容易看到云在移动的位置，但我不确定在跟踪这些类型的对象时从哪里开始。它们没有任何突出或保持帧到帧不变的特定功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:17:02.893

如果云是图片中唯一移动的部分，则可以通过背景减法检测到。有几种方法可以做到这一点，请参阅此链接以获取概述

[http://www-staff.it.uts.edu.au/~massimo/BackgroundSubtractionReview-Piccardi.pdf](http://www-staff.it.uts.edu.au/~massimo/BackgroundSubtractionReview-Piccardi.pdf)

# php - 使用php递归从数据库中获取城市

> ID：14661652
> 
> 赞同：1
> 
> 时间：2013-02-02T11:56:58.650
> 
> 标签：php, recursion

我有一个递归函数，我想用正确的语法再次调用它怎么做？我在数据库中有一个国家，如果它拥有 V: 并且它的格式为 Col1 CountryName; col1 如果它是一个城市，它没有 V：如果它是国家的一个地区，它有 V：所以这个递归必须是直到我们在数据库中获得一个国家的城市 Country= V:area1, V:area2.. .Area1=City1 或另一个 V:area 蚂蚁，所以直到我们得到城市名称..这是我到目前为止所做的事情，我很接近，但我不知道如何再次调用相同的函数

```
 function recur($d,$rek,&$aeroPole1)
  {
if(substr_count( $d, 'V:'))
  {

    $aeroPole=preg_replace('"V:"','',$d); 

    $aeroPole=explode(",",$aeroPole);

    foreach($aeroPole as $ap)
    {
          $mysqliObj3 = new mysqli('localhost','usr','pass', 'trevo');
          $comand6="SELECT * FROM `CC` WHERE name='".$ap."';";  //  name='".$RuleD[0]."';";
          $QueryObj6 = $mysqliObj3->query($comand6, MYSQLI_USE_RESULT);

          $dArea=$QueryObj6->fetch_assoc();
          $QueryObj6->close();

          if($dArea!="")
          {$rek+=1;
             $aeroPole1=array_merge($aeroPole1,recur((string)$dArea["airport_codes"],$rek,$aeroPole1));

            $fore++;

        }

    }//foreach

}
} 
```

编辑：关闭括号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:04:02.720

```
 $aeroPole1=array_unique($aeroPole1);
    return $aeroPole1;

else
{
     $aeroPole1=explode(",",$d);

  return $aeroPole1;
} 
```

另一种情况，如果它没有 v：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:01:12.330

你可以试试这个

//结束后`foreach`

```
$aeroPole1=array_unique($aeroPole1);
    return $aeroPole1; 
```

唯一的是没有任何重复，然后你返回函数

# iphone - 如何制作画廊视图

> ID：14661655
> 
> 赞同：-1
> 
> 时间：2013-02-02T11:57:55.007
> 
> 标签：iphone, ios6, uiimageview

> **可能重复：**
> [如何在 iOS 上创建图库](https://stackoverflow.com/questions/3866766/how-to-create-a-gallery-on-ios)

如何在我的应用程序中制作图像中的画廊视图，任何人都可以给我一些参考吗？

![在此处输入图像描述](../Images/1719a0bd653450b541285979d5c4f88c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:12:54.970

此代码来自从我们的图库中获取图像路径

```
 protected void onActivityResult(int requestCode, int resultcode, Intent intent)
  {
  super.onActivityResult(requestCode, resultcode, intent);

  if (requestCode == 1)
  {
      if (intent != null && resultcode == RESULT_OK)
      {             

            Uri selectedImage = intent.getData();

            String[] filePathColumn = {MediaStore.Images.Media.DATA};
            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            filePath = cursor.getString(columnIndex);
            cursor.close();
}
}
} 
```

# java - 如何在 Java 应用程序中显示任意文件格式的图像？

> ID：14661660
> 
> 赞同：1
> 
> 时间：2013-02-02T11:58:41.353
> 
> 标签：java, swing, file-extension

我有这个代码，它只接受那些`.bmp`格式 的图像

```
String format="";
if(pic_sel_file.toLowerCase().endsWith(".bmp"))
    format="BMP"; 
```

如何更改此代码以使其可以接受任何文件格式（.jpg、.tif 等）的图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T12:03:49.477

为避免出现多个*if-then-else*语句，您可以使用正则表达式对文件扩展名类型列表进行匹配。`endsWith`不采用正则表达式，所以你可以这样做：

```
Matcher m = Pattern.compile("(?i).*\\.(bmp|gif|jpg|tif)$").matcher(pic_sel_file);
if (m.matches()) {
   format = m.group(1).toUpperCase();
} 
```

*   `(?i)`忽略大小写

*   `\\.`转义点字符

*   `(bmp|...`图像类型

*   `$`行结束

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:51:15.893

如果你想避免正则表达式，你可以使用一个集合并循环它：

```
List<String> allowedFileEndings = Arrays.asList("bmp", "png", "gif"); //or array
for (String allowedFileEndingsItem : allowedFileEndings) {
    if(pic_sel_file.toLowerCase().endsWith(allowedFileEndingsItem)) // or "." + allowedFileEndingsItem
    {
        format = allowedFileEndingsItem; // uppercase if you want
        break;
    }
} 
```

我什至会考虑对文件格式使用枚举，这可以使格式处理更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T03:52:21.260

我怀疑这整个任务会更适合[`JFileChooser`带有支持的图像类型的过滤器](https://stackoverflow.com/a/13521592/418556)。

![](../Images/f83d98300025051ab268e8ae7e217d74.png)

### 有关的

*   [`ListImageReaders`](https://stackoverflow.com/a/3544777/418556)
*   [TIFF 支持](https://stackoverflow.com/a/11517879/418556)

# javascript - 获取同一html中隐藏字段的值？

> ID：14661670
> 
> 赞同：4
> 
> 时间：2013-02-02T11:59:57.730
> 
> 标签：javascript, html

我想`hidden`在我的 html 中获取字段的值。

```
<form>

<fieldset>
<input id="name" type="hidden" value="vikiiii" name="name">
</fieldset>

My name is {What should i write here to print "vikiiii" ???} ...!!!

</div>

</form> 
```

我如何在同一个 html 中打印我的名字。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T12:03:04.380

假设这个 HTML

```
<form>

<fieldset>
<input id="name" type="hidden" value="vikiiii" name="name">
</fieldset>

My name is <span id="nameTarget"></span> ...!!!

</div>

</form> 
```

此 JavaScript 代码将起作用：

```
document.getElementById( 'nameTarget' ).innerHTML = document.getElementById( 'name' ).value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:05:29.010

您可以使用 a`<span>`作为要打印的值。
这是一个[演示小提琴](http://jsfiddle.net/onury/HdZeR/)。

HTML：

```
<fieldset>
<input id="name" type="hidden" value="vikiiii" name="name">
</fieldset>
<span>My name is </span><span id="myname"></span><br /> 
```

Javascript：

```
var hiddenValue = document.getElementById("name").value;
document.getElementById("myname").innerText = hiddenValue; 
```

# php - 性能改进 PHP GD 调整大小和修剪图像背景保持正确的比例

> ID：14661673
> 
> 赞同：3
> 
> 时间：2013-02-02T12:00:02.360
> 
> 标签：php, image, image-processing, gd, image-resizing

我使用 PHP GD 库开发了一个图像大小调整和修剪类。我在第一步中使用[skibulks图像修剪脚本](https://stackoverflow.com/questions/1669683/crop-whitespace-from-image-in-php)来修剪图像背景，并在第二步中将图像缩放到需要的大小（保持原始比例）。

**问题：**是否真的有必要在`imagecopy`从函数中获取新的修剪后的图像尺寸后执行第一项工作，以首先使用新的修剪后的尺寸`$this->_trimBackground()`重新创建图像`imagecopy`（然后再次调整其大小）？ **或者**，是否可以将此作业与以下调整大小部分合并`imagecopyresampled`？

我不知道还有其他可能的性能改进吗？欢迎提出任何性能建议！

**功能一：**

```
/**
 * Resize image file
 * 
 * @param   string $filepath the image filepath
 * @param   integer $width the width to resize
 * @param   integer $height the height to resize
 * @return  (image blob|boolean status)
 * @throws  Asset_Model_Image_Exception
 */
private function _resizeImageByFilepathAndReturn($filepath, $width, $height) {

    list($imageWidth, $imageHeight, $imageType) = getimagesize($filepath);

   switch($imageType) {
    case IMAGETYPE_GIF:
            $gdImage = imagecreatefromgif($filepath);
            break;
      case IMAGETYPE_JPEG:
            $gdImage = imagecreatefromjpeg($filepath);
            break;
      case IMAGETYPE_PNG:
            $gdImage = imagecreatefrompng($filepath);
            break;
      default:
                return false;
   }

   if($box = $this->_trimBackground($gdImage)) {

    $gdTrimmed = imagecreatetruecolor($box['w'], $box['h']);
    imagecopy($gdTrimmed, $gdImage, 0, 0, $box['l'], $box['t'], $box['w'], $box['h']);

    $imageWidth = $box['w'];
    $imageHeight = $box['h'];
    $gdImage = $gdTrimmed;

    unset($gdTrimmed);

   }

   if($imageWidth <= $width && $imageHeight <= $height) {

    $fwidth = $imageWidth;
        $fheight = $imageHeight;

   } else {

        $wscale = $width / $imageWidth;
        $hscale = $height / $imageHeight;
        $scale = min($wscale, $hscale);
        $fwidth = $scale * $imageWidth;
        $fheight = $scale * $imageHeight;

   }

   $gdThumbnail = imagecreatetruecolor($width, $height);

   imagefill($gdThumbnail, 0, 0, 0x00FFFFFF);

   imagecopyresampled($gdThumbnail, $gdImage, ($width - $fwidth) / 2, ($height - $fheight) / 2, 0, 0, $fwidth, $fheight, $imageWidth, $imageHeight);

   ob_start();
   imagejpeg($gdThumbnail, null, 90);
   $image = ob_get_contents();
   ob_end_clean();

   imagedestroy($gdImage);
   imagedestroy($gdThumbnail);

   return $image;

} 
```

**功能二：**

```
/**
 * Trim image background
 * 
 * @param $gdImage image ressource
 */
private function _trimBackground($gdImage){

    $hex = imagecolorat($gdImage, 0,0);

    $width = imagesx($gdImage);
    $height = imagesy($gdImage);

    $bTop = 0;
    $bLft = 0;
    $bBtm = $height - 1;
    $bRt = $width - 1;

    for(; $bTop < $height; ++$bTop) {
        for($x = 0; $x < $width; ++$x) {
            if(imagecolorat($gdImage, $x, $bTop) != $hex) {
                break 2;
            }
        }
    }

    if($bTop == $height) {
        return false;
    }

    for(; $bBtm >= 0; --$bBtm) {
        for($x = 0; $x < $width; ++$x) {
            if(imagecolorat($gdImage, $x, $bBtm) != $hex) {
                break 2;
            }
        }
    }

    for(; $bLft < $width; ++$bLft) {
        for($y = $bTop; $y <= $bBtm; ++$y) {
            if(imagecolorat($gdImage, $bLft, $y) != $hex) {
                break 2;
            }
        }
    }

    for(; $bRt >= 0; --$bRt) {
        for($y = $bTop; $y <= $bBtm; ++$y) {
            if(imagecolorat($gdImage, $bRt, $y) != $hex) {
                break 2;
            }
        }
    }

    $bBtm++;
    $bRt++;

    return array('l' => $bLft, 't' => $bTop, 'r' => $bRt, 'b' => $bBtm, 'w' => $bRt - $bLft, 'h' => $bBtm - $bTop);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T09:35:58.690

imagecopy() 将你的 $gdImage 的一部分复制到 $gdTrimmed，几行之后用 $gdTrimmed 覆盖 $gdImage。

> 真的有必要做第一个图像复制吗？

这是你应该问自己的事情。

使用`imagedestroy()`函数代替`unset()`可能会大大提高您的性能。[这是对imagedestroy()](http://www.php.net/manual/en/function.imagedestroy.php)的有用评论：

> 重用图像变量不会清除内存中的旧数据！您必须使用 imagedestroy() 清除数据。（我不知道 unset() 是否也有效）。
> 
> 另请注意，内存中的图像数据是原始数据，因此不要根据压缩图像的原始文件大小（例如 jpeg 或 png）来确定您使用的内存量。

# html - 将图像添加到柔性盒模型

> ID：14661677
> 
> 赞同：0
> 
> 时间：2013-02-02T12:00:41.877
> 
> 标签：html, css

我是 HTML5 和 CSS3 的新手，正在为大学开发我的第一个网站/应用程序。理想情况下，我需要它显示在手机图像上（我还没有掌握），但现在我正在尝试做的只是显示灵活的盒子工作。当我调整窗口大小但徽标保持不变时，您将看到文本换行。有人建议我可以将图像设置为 div 的背景，该 div 会根据窗口大小进行调整，但不确定如何执行此操作。

```
!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>

        <!-- CSS -->
        <link rel="stylesheet" href="preposting.css">
    <title>Title goes here</title>
    </head>

    <body>
        <div id="container">
            <header id="top_header">
                <div id="logo">
                    <img class="logo_image" src="logo.gif" alt="" />
                </div>
                <div id="welcome">
                    <h1>Text wraps when I adjust window size but image doesn't.  It was suggested that I should set image as background to div and that way it would adjust but not sure how to do this.</h1>
                </div>
            </header>
        </div>
    </body>
</html> 

#container
{
    text-align:left;                    
    border: 10px solid black;
    margin: 20px auto;                  
    display:-webkit-box;                
    -webkit-box-orient: vertical;
    -webkit-box-flex: 1;                
}
#top_header
{
    border:30px solid green;
    padding:20px;
    background:yellow;
    display:-webkit-box;                
    -webkit-box-orient: horizontal;
    -webkit-box-flex: 1;                
}

#img.logo_image {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:40:44.147

我看到您使用的是旧的柔性盒模型： `-webkit-box;`

新的基本上只叫flex；你会输入： `display: -webkit-flex;`

他们在这里有很好的例子：http: [//www.w3.org/TR/css3-flexbox/](http://www.w3.org/TR/css3-flexbox/)

CSS：

```
#main { display: flex; }
#main > article { flex:1;         order: 2; }
#main > nav     { width: 200px;   order: 1; }
#main > aside   { width: 200px;   order: 3; }

@media all and (max-width: 600px) {
    /* Too narrow to support three columns */
    #main { flex-flow: column; }
    #main > article, #main > nav, #main > aside {
        /* Return them to document order */
        order: 0; width: auto;
    }
} 
```

# php - mysql real escape string 其他问题

> ID：14661681
> 
> 赞同：0
> 
> 时间：2013-02-02T12:01:33.597
> 
> 标签：php, mysql, sql-injection

> **可能重复：**
> [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

考虑这个片段，

```
*mysqltest.php*

$user_id= $_GET['user_id'];
$user_id= mysql_real_escape_string($user_id);
$query  = "SELECT * FROM people WHERE uid=".$user_id;
echo $query;
//then execution .. 
```

现在，当我们将此脚本称为**“mysqltest.php?user_id=56 or 1”时**

查询将是 **SELECT * FROM people WHERE uid=56 or 1**并导致成功注入。

***那么在列是数字类型的这种情况下，我们如何保护自己呢？***
在不使用 pdo 或准备好的语句的情况下，在这些情况下是否还有其他解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:08:58.760

mysql_real_escape_string没有“**其他**问题”。

大多数人混淆了这个功能，认为它的目的是通过“cleaninig”以某种方式保护他们免受“用户输入”的注入。
这肯定是错误的。
mysql_real_escape_string 旨在格式化字符串，使它们适合 SQL 查询。就这样。作为副作用，它也使注射变得不可能。

因此，每次将字符串动态添加到查询中时，**无论数据源如何，他们都必须遵循****两个**字符串格式规则：

 ***   将数据括在引号中
*   转义其中的特殊字符

因为没有另一个它们是**无用的。**

尽管可以将数字视为字符串。
因此，对于给定的示例，您 cat 将您的数据视为字符串，正如已删除的答案中所建议的那样

```
$user_id= $_GET['user_id'];
$user_id= mysql_real_escape_string($user_id);
$query  = "SELECT * FROM people WHERE uid='$user_id'"; 
```

唯一的例外是只能是整数的 LIMIT 子句参数。
在这种情况下，唯一的解决方案是将数据手动转换为所需的格式

```
$user_id= $_GET['user_id'];
$user_id= intval($user_id);
$query  = "SELECT * FROM people WHERE uid=$user_id"; 
```

但请记住，还有其他情况需要不同的处理

还有一件事要补充。
手动格式化数据很无聊。
让一些代码为你做这件事要好得多，使代码既短又安全**

# css - 径向梯度和绝对定位在不同的浏览器中产生不同的结果

> ID：14661682
> 
> 赞同：2
> 
> 时间：2013-02-02T12:01:37.430
> 
> 标签：css, layout, gradient, radial-gradients

我开发了一个带有两个电子开关和两个灯的开关板，它在不同的浏览器中产生不同的结果。

# 铬输出

在 Chrome 中它运行良好。

[点击查看大图](https://i.stack.imgur.com/st2U5.png)

![在此处输入图像描述](../Images/66b50c0071c8494c045bdadac9426d28.png)

# Safari 输出

按钮的闪亮标签被推到底部

[点击查看大图](https://i.stack.imgur.com/C4Ye7.png)

![在此处输入图像描述](../Images/1ec1312af750048006398c6a2d845f82.png)

# 火狐输出

径向梯度是 DULL

[点击查看大图](https://i.stack.imgur.com/2YVvb.png)

![在此处输入图像描述](../Images/999c13859cced2d0eebbf58e0ab1d50a.png)

在做跨浏览器平台支持时我有什么遗漏吗？

请有任何建议！任何帮助将不胜感激

请寻找当前版本[**代码笔链接**](http://codepen.io/Sud_/pen/tjAJB) **它带有评论**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:26:34.060

固定标签位置和渐变：[Code Pen Demo](http://codepen.io/anon/pen/JbACK)

要固定标签的位置，请使用`top`代替`margin-top`.

```
.switch:before { /* Used for Inner Ligths of switch */
  content: "";/* Without this no layout positioning will work */
  background: rgb(53, 244, 252);/* Sandy white color */
  width: 36%;/* occupied 36% of switch (which is 50% of board frame */
  position: absolute;
  height: 4px;/* Light height */
  margin-top: 0%;/* 36% width + 32 % left border + 32% right border = 100% of switch width */
  top: 77%;
  margin-left: 32% ;
  margin-right: 32% ;
  marging-bottom :0px;
  border-radius: 12px;/* Light radius */
  box-shadow: inset 0 0 1px rgba(0,0,0,.2);/* Switch light shadow */
  border: 1px solid rgba(0,0,0,.1);/* Switch Light border */
}

.on.switch:before {/* Used to target light of switch */
  margin: 0% 32% 8%; /* Move light of switch up so it appears that light is actually on */
  top: 70%;
  background: rgba(255, 255, 255, 0.42);
} 
```

问题不在于 Safari 或 Chrome，而是 Firefox 无法`margin-top`正确处理百分比。我尝试设置`margin-top: 100%`，只有 Safari 和 Chrome（Mac 版）呈现开关下方的标签。Firefox 确定 100% 小于开关的全高。

至于 Firefox 中的渐变，只需将线条`radial-gradient`移到顶部并留`-moz-radial-gradient`在底部即可。这将允许浏览器特定的 CSS 生效。

```
.radial:before{
  content:"";
  position:absolute;
  top:-240px;
  /* width: 1200px;*/
  /*max-width: 100%;*/
  width:100%;
  height: 920px;
  background: radial-gradient(ellipse at center,  rgba(255,255,255,0.15) 1%,rgba(255,255,255,0.15) 2%,rgba(255,255,255,0) 56%,rgba(255,255,255,0) 100%);
  background: -webkit-radial-gradient(center, ellipse cover,  rgba(255,255,255,0.75) 1%,rgba(255,255,255,0.65) 2%,rgba(255,255,255,0.15) 56%,rgba(255,255,255,0.05  ) 60%,rgba(255,255,255,0.04) 70%,rgba(255,255,255,0.04) 80%,rgba(255,255,255,0) 100%);
  background: -o-radial-gradient(center, ellipse cover,  rgba(255,255,255,0.75) 1%,rgba(255,255,255,0.65) 2%,rgba(255,255,255,0.15) 56%,rgba(255,255,255,0.05   ) 60%,rgba(255,255,255,0.04) 70%,rgba(255,255,255,0.04) 80%,rgba(255,255,255,0) 100%);
  background: -moz-radial-gradient(center, ellipse cover,  rgba(255,255,255,0.75) 1%,rgba(255,255,255,0.65) 2%,rgba(255,255,255,0.15) 56%,rgba(255,255,255,0.05 ) 60%,rgba(255,255,255,0.04) 70%,rgba(255,255,255,0.04) 80%,rgba(255,255,255,0) 100%);
  z-index: -21;
} 
```

# javascript - 速度与时间的浮动图

> ID：14661683
> 
> 赞同：1
> 
> 时间：2013-02-02T12:01:38.960
> 
> 标签：javascript, jquery, graph, flot

我正在尝试使用 flot 显示速度/时间图。我从 servlet 接收数据。我有大量带有时间戳、速度、位置等的 GPS 跟踪事件。
如果用户选择查看 2 天的图表，则图表如下所示： ![在此处输入图像描述](../Images/1da70e73e6b916ac41183672c84c6da5.png)

这是因为它们是 gps 事件之间的长时间停顿。（**水平是以小时为单位的时间，垂直是以公里/小时为单位的速度**）

现在，如果用户选择查看图表一小段时间，比如 10 小时或类似的时间（他们在 gps 事件中没有长时间的停顿），图表看起来很完美，如下所示： ![在此处输入图像描述](../Images/9dde767bdff38917a366e1130995b7a6.png)

创建图表的数据在[这里](http://rapidpaste.com/s/7e58e11c2d)

如您所见，第一张图不可读，我的问题是如何使第一张图更具可读性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:03:42.477

使用镜像对数刻度之类的东西。Flot 允许您配置图表的步骤。

像（[从这里复制](https://github.com/flot/flot/blob/master/API.md)）：

```
xaxis: {
    transform: function (v) { return Math.log(v); },
    inverseTransform: function (v) { return Math.exp(v); }
} 
```

# php - 将 CSV 文件从浏览器直接存储到 SERVER 目录

> ID：14661684
> 
> 赞同：-1
> 
> 时间：2013-02-02T12:01:40.287
> 
> 标签：php, file, csv

```
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=Download.csv"); 
```

当我在浏览器中运行脚本时，此代码可帮助我下载 csv 文件。

但是现在不是下载文件，而是可以直接将文件保存在文件夹中，

我的意思是如何修改代码，以便在我的脚本运行时它应该保护 csv 文件，而不是提示用户下载它。

例如：此代码将在目录中创建文件。

```
$ourFileName = "testFile.txt";
$ourFileHandle = fopen($ourFileName, 'w') or die("can't open file"); 
```

同样，我如何修改标头 Content-Disposition 以便它在文件夹中创建 csv 文件。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:13:40.573

您无法控制下载文件在客户端计算机上的保存位置。你**不应该这样做**；想象一个网站在打开网站时会自动保存并替换本地计算机上的文件？例如，它将“malicious_file.exe”下载到

```
C:\Documents and Settings\MyName\Start Menu\Programs\Startup\malicious_file.exe 
```

该文件将在登录时自动执行！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-02T12:08:01.723

如果我理解正确，您需要一个带有此行的 .htaccess 文件

选项+索引

所以你可以看到文件夹中的所有文件

# iphone - numberOfRowsInSection 中的动态数组返回计数

> ID：14661689
> 
> 赞同：0
> 
> 时间：2013-02-02T12:02:04.423
> 
> 标签：iphone, ios, arrays, tableview

我从我的 删除行时遇到问题`tableView`，因为我有多个部分是在视图控制器出现时动态生成的，所以当我返回计数时，`numberOfRowsInSection`它最终看起来像这样：

```
NSInteger count = [[_sectionsArray objectAtIndex:section] count];
return count; 
```

现在，当删除时，我会生成相同类型的数组，如下所示：

```
NSMutableArray *contentsOfSection = [[_sectionsArray objectAtIndex:[indexPath section]] mutableCopy];
[contentsOfSection removeObjectAtIndex:[indexPath row]]; 
```

如您所见，我正在从未链接到的数组中删除对象`tableView`，因此它只返回一个`NSInternalInconsistencyException`

有人可以帮我吗？

**更新：**

```
 [contentsOfSection removeObjectAtIndex:[pathToCell row]];

    if ([contentsOfSection count] != 0) {
        // THIS DOESN'T
        [self.tableView deleteRowsAtIndexPaths:@[pathToCell] withRowAnimation:UITableViewRowAnimationFade];
    }
    else {
        // THIS WORKS!
        [_sectionsArray removeObjectAtIndex:[pathToCell section]];
        [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:[pathToCell section]] withRowAnimation:UITableViewRowAnimationFade];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:00:17.570

muatableCopy 将创建数组的另一个实例。因此，您要从新创建的数组中删除项目，而不是从旧数组中删除项目。始终将“contentsOfSection”作为可变数组存储在 _sectionsArray 中。然后像这样删除。

```
NSMutableArray *contentsOfSection = [_sectionsArray objectAtIndex:[indexPath section]];
[contentsOfSection removeObjectAtIndex:[pathToCell row]];

if ([contentsOfSection count] != 0) {

    [self.tableView deleteRowsAtIndexPaths:@[pathToCell] withRowAnimation:UITableViewRowAnimationFade];
}
else {
    // THIS WORKS!
    [_sectionsArray removeObjectAtIndex:[pathToCell section]];
    [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:[pathToCell section]] withRowAnimation:UITableViewRowAnimationFade];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:03:29.447

在以下代码中：

```
[_sectionsArray removeObjectAtIndex:[pathToCell section]];
[self.tableView deleteSections:[NSIndexSet indexSetWithIndex:[pathToCell section]] withRowAnimation:UITableViewRowAnimationFade]; 
```

You are deleting object from _sectionArray. So this array automatically updates. But in other cases you are creating another copy and then deleting object from that array. So your _sectionArray is not going to update. So this is necessary that after deleting object from copy array, update section array with that new array also.

```
NSMutableArray *contentsOfSection = [[_sectionsArray objectAtIndex:[indexPath section]] mutableCopy];
[contentsOfSection removeObjectAtIndex:[indexPath row]];
[_sectionsArray replaceObjectAtIndex:[indexPath section] withObject:contentsOfSection]; 
```

Try this one and I hope that this will work.

# java - 仅当是数字时才允许在 JTextField 上存储字符

> ID：14661692
> 
> 赞同：1
> 
> 时间：2013-02-02T12:03:00.113
> 
> 标签：java, swing, validation, jtextfield, keylistener

我想过滤按下的键`JTextField`。我希望只允许数字，如果按下其他字符，则将其删除或不允许在文本字段上存储。

我正在考虑使用`addKeyListener`, 并使用方法：按下键和释放键。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:12:06.430

没有冒犯，Ravindra 先生的回答是正确的，但是当您连续输入时它会失败.. 我希望这会有所帮助：

```
 final JTextField myTextFiled=new JTextField();
    JFrame frame=new JFrame("onlyNums");
    KeyListener myKeyListner=new KeyListener() {

        @Override
        public void keyTyped(KeyEvent e) {
            // TODO Auto-generated method stub
            if(e.getKeyChar()>='0' && e.getKeyChar()<='9')                  
                myTextFiled.setText(myTextFiled.getText()+e.getKeyChar());
            else if(e.getKeyChar()==KeyEvent.VK_BACK_SPACE && myTextFiled.getText().length()>0)
                myTextFiled.setText(myTextFiled.getText().substring(0, myTextFiled.getText().length()-1));
        }

        @Override
        public void keyReleased(KeyEvent e) {
            // TODO Auto-generated method stub              
        }

        @Override
        public void keyPressed(KeyEvent e) {
            // TODO Auto-generated method stub              
        }
    };
    //to null out handling other inputs
    myTextFiled.setInputMap(JTextField.WHEN_FOCUSED, new InputMap());
    //to add your own handling
    myTextFiled.addKeyListener(myKeyListner); 
```

**注意：您必须添加处理以从指针的位置插入/删除。**

问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:15:01.723

尝试这个

```
final JTextField myTextField = new JTextField();
myTextField.addKeyListener(new KeyListener() {
      String oldText = "";
      public void keyPressed(KeyEvent keyEvent) {
                // Store old text in a temporary variable
                oldText = myTextField.getText();
      }

      public void keyReleased(KeyEvent keyEvent) {
                 // Make sure that the user is typing a number else replace with old text.
                 int charCode = (int)keyEvent.getKeyChar();
                 if (charCode  < 48 || charCode  > 57){
                     myTextField.setText(oldText); // Replace with old text.
                 }
      }

      public void keyTyped(KeyEvent keyEvent) {
      }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T09:46:19.070

使用自定义`Document`：

```
public class NumericDocument extends PlainDocument {

    @Override
    public void insertString(int pos, String text, AttributeSet as)
                                               throws BadLocationException {
        try {
            Integer.parseInt(text);
            super.insertString(pos, text, as);
        } catch(NumberFormatException e) {
            Toolkit.getDefaultToolkit().beep();
        }
    }

} 
```

安装到您的`TextField`：

```
JtextField field = new JTextField();
field.setDocument(new NumericDocument()); 
```

即使粘贴了文本（没有`KeyEvent`触发），这也将起作用。

# python - 如何从 Pandas 数据框中删除行列表？

> ID：14661701
> 
> 赞同：325
> 
> 时间：2013-02-02T12:03:46.323
> 
> 标签：python, pandas

我有一个数据框 df ：

```
>>> df
                  sales  discount  net_sales    cogs
STK_ID RPT_Date                                     
600141 20060331   2.709       NaN      2.709   2.245
       20060630   6.590       NaN      6.590   5.291
       20060930  10.103       NaN     10.103   7.981
       20061231  15.915       NaN     15.915  12.686
       20070331   3.196       NaN      3.196   2.710
       20070630   7.907       NaN      7.907   6.459 
```

然后我想删除具有列表中指示的某些序列号的行，假设这里是`[1,2,4],`剩下的：

```
 sales  discount  net_sales    cogs
STK_ID RPT_Date                                     
600141 20060331   2.709       NaN      2.709   2.245
       20061231  15.915       NaN     15.915  12.686
       20070630   7.907       NaN      7.907   6.459 
```

如何或什么功能可以做到这一点？

* * *

## 回答 #1

> 赞同：477
> 
> 时间：2013-02-02T12:11:11.497

使用[DataFrame.drop](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop.html)并向其传递一系列索引标签：

```
In [65]: df
Out[65]: 
       one  two
one      1    4
two      2    3
three    3    2
four     4    1

In [66]: df.drop(df.index[[1,3]])
Out[66]: 
       one  two
one      1    4
three    3    2 
```

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2016-01-05T14:28:26.223

请注意，当您想要进行插入时，使用“inplace”命令可能很重要。

```
df.drop(df.index[[1,3]], inplace=True) 
```

因为你原来的问题没有返回任何东西，所以应该使用这个命令。 [http://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.DataFrame.drop.html](http://pandas.pydata.org/pandas-docs/version/0.17.0/generated/pandas.DataFrame.drop.html)

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2017-04-15T01:57:42.187

如果 DataFrame 很大，并且要删除的行数也很大，那么简单的按索引删除`df.drop(df.index[])`会花费太多时间。

就我而言，我有一个带有 的浮点数的多索引 DataFrame `100M rows x 3 cols`，我需要从中删除`10k`行。我发现的最快的方法是，非常违反直觉的是，`take`剩余的行。

让`indexes_to_drop`是要删除的位置索引数组（`[1, 2, 4]`在问题中）。

```
indexes_to_keep = set(range(df.shape[0])) - set(indexes_to_drop)
df_sliced = df.take(list(indexes_to_keep)) 
```

在我的情况下，这需要`20.5s`，而简单的`df.drop`需要`5min 27s`并消耗大量内存。生成的 DataFrame 是相同的。

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2016-05-08T08:28:42.613

您还可以将*标签本身*（而不是索引标签系列）传递给[DataFrame.drop ：](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop.html)

 *```
In[17]: df
Out[17]: 
            a         b         c         d         e
one  0.456558 -2.536432  0.216279 -1.305855 -0.121635
two -1.015127 -0.445133  1.867681  2.179392  0.518801

In[18]: df.drop('one')
Out[18]: 
            a         b         c         d         e
two -1.015127 -0.445133  1.867681  2.179392  0.518801 
```

这相当于：

```
In[19]: df.drop(df.index[[0]])
Out[19]: 
            a         b         c         d         e
two -1.015127 -0.445133  1.867681  2.179392  0.518801 
```

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2017-12-28T07:05:12.607

我以更简单的方式解决了这个问题 - 只需 2 个步骤。

1.  使用不需要的行/数据制作数据框。

2.  使用此不需要的数据帧的索引从原始数据帧中删除行。

示例：
假设您有一个数据框 df ，其中包含整数的“年龄”列。现在假设您要删除所有以“年龄”为负数的行。

```
df_age_negative = df[ df['Age'] < 0 ] # Step 1
df = df.drop(df_age_negative.index, axis=0) # Step 2 
```

希望这更简单并且对您有所帮助。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2017-11-19T19:19:58.137

如果我想删除一个比方说 index 的行`x`，我会执行以下操作：

```
df = df[df.index != x] 
```

如果我想删除多个索引（比如这些索引在列表中`unwanted_indices`），我会这样做：

```
desired_indices = [i for i in len(df.index) if i not in unwanted_indices]
desired_df = df.iloc[desired_indices] 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2019-01-10T05:50:47.820

这是一个有点具体的例子，我想展示一下。假设您的某些行中有许多重复条目。如果您有字符串条目，您可以轻松地使用字符串方法来查找要删除的所有索引。

```
ind_drop = df[df['column_of_strings'].apply(lambda x: x.startswith('Keyword'))].index 
```

现在使用它们的索引删除这些行

```
new_df = df.drop(ind_drop) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-10-14T05:44:13.967

仅使用索引 arg 删除行：-

```
df.drop(index = 2, inplace = True) 
```

对于多行：-

```
df.drop(index=[1,3], inplace = True) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-12-22T20:41:54.270

在对@theodros-zelleke 的回答的评论中，@j-jones 询问了如果索引不是唯一的该怎么办。我不得不处理这样的情况。我所做的是在调用之前重命名索引中的重复项`drop()`，例如：

```
dropped_indexes = <determine-indexes-to-drop>
df.index = rename_duplicates(df.index)
df.drop(df.index[dropped_indexes], inplace=True) 
```

`rename_duplicates()`我定义的函数在哪里遍历索引元素并重命名重复项。我使用了与列上使用的相同的重命名模式`pd.read_csv()`，即，`"%s.%d" % (name, count)`其中`name`是行的名称，`count`是之前发生的次数。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-04-17T05:42:10.257

如上所述，从布尔值确定索引，例如

```
df[df['column'].isin(values)].index 
```

可能比使用此方法确定索引更占用内存

```
pd.Index(np.where(df['column'].isin(values))[0]) 
```

像这样应用

```
df.drop(pd.Index(np.where(df['column'].isin(values))[0]), inplace = True) 
```

此方法在处理大型数据帧和有限内存时很有用。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-08-17T07:06:38.877

看下面的数据框 df

> `df`

```
 column1  column2  column3
0        1       11       21
1        2       12       22
2        3       13       23
3        4       14       24
4        5       15       25
5        6       16       26
6        7       17       27
7        8       18       28
8        9       19       29
9       10       20       30 
```

让我们删除 column1 中所有奇数的行

创建 column1 中所有元素的列表，并仅保留那些为偶数的元素（您不想删除的元素）

> `keep_elements = [x for x in df.column1 if x%2==0]`

`[2, 4, 6, 8, 10]`将保留或不删除其 column1 中具有值的所有行。

```
df.set_index('column1',inplace = True)
df.drop(df.index.difference(keep_elements),axis=0,inplace=True)
df.reset_index(inplace=True) 
```

我们将 column1 作为索引并删除所有不需要的行。然后我们重新设置索引。 `df`

```
 column1  column2  column3
0        2       12       22
1        4       14       24
2        6       16       26
3        8       18       28
4       10       20       30 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-01-17T13:49:21.407

要删除索引为 1、2、4 的行，您可以使用：

```
df[~df.index.isin([1, 2, 4])] 
```

波浪号运算符`~`否定方法的结果`isin`。另一种选择是删除索引：

```
df.loc[df.index.drop([1, 2, 4])] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-26T03:37:07.863

考虑一个示例数据框

```
df =     
index    column1
0           00
1           10
2           20
3           30 
```

我们要删除第 2 和第 3 个索引行。

**方法一：**

```
df = df.drop(df.index[2,3])
 or 
df.drop(df.index[2,3],inplace=True)
print(df)

df =     
index    column1
0           00
3           30

 #This approach removes the rows as we wanted but the index remains unordered 
```

**方法二**

```
df.drop(df.index[2,3],inplace=True,ignore_index=True)
print(df)
df =     
index    column1
0           00
1           30
#This approach removes the rows as we wanted and resets the index. 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-17T15:15:58.197

正如[丹尼斯戈洛马佐夫的回答](https://stackoverflow.com/a/43421391/2988730)所暗示的那样，使用`drop`删除行。您可以选择保留行。假设您有一个要删除的行索引列表，称为`indices_to_drop`. 您可以将其转换为掩码，如下所示：

```
mask = np.ones(len(df), bool)
mask[indices_to_drop] = False 
```

您可以直接使用此索引：

```
df_new = df.iloc[mask] 
```

这个方法的好处是它`mask`可以来自任何来源：它可以是一个涉及许多列的条件，或者其他东西。

真正好的事情是，您根本不需要原始 DataFrame 的索引，因此索引是否唯一无关紧要。

缺点当然是你不能用这种方法就地放置。*

# c - 在什么条件下管道读取是原子的？

> ID：14661708
> 
> 赞同：11
> 
> 时间：2013-02-02T12:04:34.957
> 
> 标签：c, posix, pipe, atomic

man pipe -s7 文件很好地写入管道。对我来说重要的部分是，如果设置了 O_NONBLOCK 并且写入长度大于 PIPE_BUF，则写入只会部分完成。

但是，关于读取端什么也没说。

我在写入端以阻塞模式通过我的管道发送表示事件的结构。在读取结束时，我正在以非阻塞模式在更新循环中处理这些事件（和其他事情）。

由于我的结构小于 PIPE_BUF，所以 read 总是会读取整个结构吗？还是我需要处理仅读取部分结构的可能性？

常识告诉我，读取行为将反映记录在案的写入行为，但如果指定了这一点，我会更高兴。

我正在使用 Linux（内核 3.8、x86_64）。但重要的是我的代码可以跨不同的 UNIX 风格和 CPU 架构移植。

谢谢。克里斯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T15:46:51.343

评论是对的：`read`不是原子的。原子性的全部意义`write`在于允许多个写入者不会因交错数据而损坏。多个读取器的用处要小得多，但即使它们有用，支持原子读取也需要在管道中维护数据包边界，而这些边界并不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-18T00:53:05.813

从管道读取不是原子的。

从[标准页面`read()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/read.html)

> 标准开发人员考虑将原子性要求添加到管道或 FIFO，但认识到由于管道和 FIFO 的性质，无法保证 {PIPE_BUF} 或任何其他有助于应用程序可移植性的大小的读取的原子性。

# mysql - mysql select语句组合一对多

> ID：14661711
> 
> 赞同：3
> 
> 时间：2013-02-02T12:04:44.143
> 
> 标签：mysql

执行此查询的最佳方法

```
SELECT * FROM `table` WHERE  `column` like '%abc% %xcdb%' OR  `column` like '%abc% %dfhj%' 
```

这里第一个变量保持不变，但第二个变量改变了让我们说一个 10 到 20 的数组所以一个更好更快的方法来代替这个迭代（`column`比如）

餐桌设计

```
<table >
<tr>
    <td>id</td>
    <td>column</td>
    <td>other</td>
</tr>
<tr>
    <td>1;</td>
    <td>fsyd,**abc**,jgd,**xcdb**,sdfr</td>
    <td>tom</td>
</tr>
<tr>
    <td>2</td>
    <td>wer,tyuy,dhjd,dbhd</td>
    <td>john</td>
</tr>
<tr>
    <td>3;</td>
    <td>asy,gtyt,bnhhs,**abc**,bgy,trdcv,**dfhj**</td>
    <td>colin</td>
</tr>
     <tr>
    <td>4</td>
    <td>wer,**xcdb**,dhjd,**abc**,dbhd</td>
    <td>john</td>
</tr>
</table> 
```

此查询在检查序列时返回 id (1 和 3) 但不返回 4 的结果。这是一个正确的选择语句并返回我想要的结果，但我只是要求更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:01:43.473

根据您的要求以及订单很重要的含义，您有两种选择：

1.  循环通过一堆`LIKE`查询（就像你正在做的那样）
2.  正则表达式

我的理解是 MySQL 中的正则表达式对性能有重大影响，但我无法直接验证这一点。如果您需要，我将尝试使用正则表达式发布您的查询示例，我有几分钟的时间进行测试。

应该看起来像这样：

```
SELECT * FROM `table` WHERE  `column` REGEXP('.*abc.*((xcdb)|(dfhj).*)') 
```

在此处查看 SQLFiddle 中的证明：[http ://sqlfiddle.com/#!2/8cd26/1](http://sqlfiddle.com/#!2/8cd26/1)

# actionscript-3 - 在 as3 中更改所选文本字段的格式

> ID：14661713
> 
> 赞同：0
> 
> 时间：2013-02-02T12:05:00.167
> 
> 标签：actionscript-3, action

> **可能重复：**
> [更改 AS3 中任何选定文本字段的格式？](https://stackoverflow.com/questions/14662374/change-format-of-any-selected-textfield-in-as3)

我在单击事件中创建了许多文本字段。现在我想在任何选择的文本字段中更改文本格式。但是 textformat 应用了最新的创建文本字段。我试过了

```
function _txtbtn(e:*):void
{
    myText = new TextField();
    mc3 = new MovieClip();
    myText.text = "text...";
    myFormat.font = "Arial";
    myFormat.color = txt_color()
    myText.setTextFormat(myFormat);
    mc3.addChild(myText);
    addChild(mc3);
    mc3.x = _can.x;
    mc3.y = p;
    p= mc3.y+mc3.height+10;
    mc3.addEventListener(MouseEvent.MOUSE_DOWN,_select)
}
function _select(e:MouseEvent):void
{
    tool_stage.combo.addEventListener(Event.CHANGE,_font);
}
function _font(e:Event):void
{
    format.font = tool_stage.combo.selectedLabel;
    myText.setTextFormat(format);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:26:50.553

编辑答案：

```
function _font(e:Event):void
{
    format.font = tool_stage.combo.selectedLabel;
    var mc:MovieClip = e.target as MovieClip;
    (mc.getChildAt(0) as TextField).setTextFormat(format);
} 
```

# python - 在 Django Web 应用程序中保护 GET 请求

> ID：14661714
> 
> 赞同：5
> 
> 时间：2013-02-02T12:05:03.530
> 
> 标签：python, django, api, rest

如何保护特定的 GET 请求（例如：）`^api/...`？

我想让这个视图（API 调用）只对我的 Django Web 应用程序可用。

它只能由 Django Web 应用程序调用，而不是直接调用。

使用 CSRF 中间件生成的哈希键是一个好习惯吗？有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:06:55.787

恐怕没有可靠的方法来实现这一点。我能想到的最好方法是在您的 javascript 客户端中生成某种私钥，然后滥用代码。这会让“攻击者”很难使用你的方法。也许使用 HMAC 或类似的东西。

一个例子。您想拨打以下电话：`/api/users/1/vote_up`。你可以有一些代码来生成你的私钥：

```
<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha256.js">

var hmac = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, generatePassphraseObfuscated());
hmac.update("/api/users/1/vote_up");
var hash = hmac.finalize();
$.ajax(
    /api/users/1/vote_up,
    {hash: hash}
)
</script> 
```

`generatePassphraseObfuscated`功能是关键。你需要让它很难复制。此外，您可以在每个请求中更改它并添加一个 cookie 来识别您发送的“版本”。例如，您可以有两个版本：

```
function generatePassphraseObfuscated(){
    return 1;
}

function generatePassphraseObfuscated(){
    return 2;
} 
```

并随机提供它们，并用 cookie 识别它。所以你知道在你的 django 视图中使用哪个。

同样，它不可靠，没有万无一失的方法可以做你想做的事。这只是一种愚蠢的方式，让其他人复制它变得丑陋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:32:40.647

查看这些[回复](https://stackoverflow.com/questions/11686893/restrict-access-to-a-django-view-only-from-the-server-itself-localhost)，他们似乎经历了同样的问题。我会编写一个装饰器来检查是否`request.META['REMOTE_ADDR']`与您的本地地址相同。

# mysql - 我需要将整个数据库放在 Parse.com 中吗

> ID：14661716
> 
> 赞同：0
> 
> 时间：2013-02-02T12:05:09.670
> 
> 标签：mysql, amazon-ec2, push-notification, parse-platform, google-cloud-messaging

我们在 Amazon EC2 中使用[OpenMRS。Parse.com](http://openmrs.org/)可以仅制作通知数据库或整个数据库在 Parse.com 上构建。如果是这样。我们将使用谷歌消息云。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:58:39.000

Parse 的推送产品可以增加其他功能（即基于与用户的关系或 Parse 存储的其他数据的高级定位），但它被设计为作为独立功能工作。

# python - 如何将python包导入GAE

> ID：14661718
> 
> 赞同：0
> 
> 时间：2013-02-02T12:05:21.837
> 
> 标签：python, google-app-engine

对不起，如果这是一个愚蠢的问题。通常当我需要一个包时，我会导入 filename.py。这个[https://github.com/simplegeo/python-oauth2](https://github.com/simplegeo/python-oauth2)怎么样？由于找不到 oauth2.py 文件，如何导入此包。

我是否将此 oauth2 文件夹复制到项目根目录，然后导入 oauth2？

我只是一个初学者，能不能给我详细的指导？谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:21:48.327

先读[**这个**](http://docs.python.org/3/reference/import.html#packages)。

现在，如果您签出[`oauth2/__init__.py`](https://github.com/simplegeo/python-oauth2/blob/master/oauth2/__init__.py)，您将看到 oauth 已经这样做了，`import httplib2`因此您不必自己导入它。（当然，除非你也使用 httplib2。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:12:10.780

本质上，你是对的。如果您想在 GAE 应用程序中使用 python 包，您必须在应用程序根目录中拥有它的副本，您的应用程序可以作为正常导入访问它。然后它将与您的应用程序代码一起上传，并且在部署时也可以使用。

有些例外情况您不必这样做，因为库是为您提供的，您可以在此处阅读这些内容：[支持的第 3 方库](https://developers.google.com/appengine/docs/python/tools/libraries27)

对于那些你需要编辑你的 app.yaml 的人。

对于 oauth2，您应该查看 google 特定的实现。我不知道你在那里链接了什么，我所知道的是无休止的 oauth/gae 问题通常在这里结束：[https ://developers.google.com/appengine/docs/python/oauth/overview](https://developers.google.com/appengine/docs/python/oauth/overview)

# c# - 排序和分组

> ID：14661719
> 
> 赞同：0
> 
> 时间：2013-02-02T12:05:27.743
> 
> 标签：c#, sorting, grouping

我正在研究餐厅 POS (Samba pos) 的源代码，并且在打印票时如何格式化输出有 2 个问题。

下面的代码收集产品的标签，制作它们的标题，并对标题下的产品进行排序。

问题1：我对标题的顺序没有影响，所以输出看起来像：

**主菜**

牛排 22,50

**饮料**

可乐 2,00

**开胃菜**

汤 3,50

正确的顺序应该是 Starters --> Main course --> Desserts --> Drinks 如果我可以按字母顺序对标题进行排序，我会得到很大帮助。我会将组标签更改为：1 Starters、2 Maincourse 等

问题2：

产品在程序的早期阶段进行分组。由于程序员的选择，分组对我来说效果不佳。我的票上有一个很长的清单，例如：

1 x 可乐 2,00

2 x 可乐 4,00

有没有办法在这里对产品进行分组，以便我拥有：

3 x 可乐 6,00

这是一段代码：

```
if (template.GroupTemplate.Contains("{PRODUCT TAG}"))
{
    var groups = lines.GroupBy(GetMenuItemTag);
    var result = new List<string>();
    foreach (var grp in groups)
    {
        var grpSep = template.GroupTemplate.Replace("{PRODUCT TAG}", grp.Key);
        result.AddRange(grpSep.Split(new[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries));
        result.AddRange(grp.SelectMany(x => FormatLines(template, x).Split(new[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries)));
    }
    return result;
} 
```

我必须排序`var groups`。问题是文本 {PRODUCT TAG} 在循环中被替换为`grp.Key`，因此在循环之前排序`var groups`可能不起作用（我需要一个额外的循环吗？）。

将产品添加到标题中是在循环的第 3 行完成的。可以在这里对项目进行分组吗？

我已经在这里转储了整个文件：http: [//pastebin.com/qFr5wN28](http://pastebin.com/qFr5wN28)

编辑：

这段代码用于在票据打印机上生成票据。一张票看起来像这样：

```
BON
Datum: 2-2-2013
Tijd: 18:35    
Tafel nr.: B22    
Bon nr: 2    
------------------------------------------    
Breakfast    
- 1 Toast and Jam 1,50    
- 1 Egg, Bacon Cheese 3,99    
- 1 Toasted Bagel Cheese 2,25    
- 1 Toasted Bagel Jam 1,50    
- 2 Toast and Jam 1,50    
- 1 Egg, Bacon Cheese 3,99    
- 1 Bacon and Cheese 3,49    
- 1 Bacon and Tomato 3,49    
Deserts    
- 1 Rice Pudding 2,25    
- 1 Fruit Danish 1,50    
Main course    
- 1 Chicken Garden Wrap 5,25    
- 1 Chicken Caesar Wrap 5,75    
- 1 Canadian Wrap 6,99    
- 1 Chicken Greek Wrap 6,99 
```

标题是我可以添加到产品中的标签。有几处错误：文章（沙漠、主菜）上方的标题随机出现。我想对它们进行排序。并非所有文章都被分组，例如“吐司和果酱”。如果我可以对标题进行排序，我会稍微更改一下标签。所需的输出将是这样的：

```
------------------------------------------    
1 Breakfast    
- 3 Toast and Jam 1,50    
- 2 Egg, Bacon Cheese 3,99    
- 1 Toasted Bagel Cheese 2,25    
- 1 Toasted Bagel Jam 1,50    
- 1 Bacon and Cheese 3,49    
- 1 Bacon and Tomato 3,49    
2 Main course    
- 1 Chicken Garden Wrap 5,25    
- 1 Chicken Caesar Wrap 5,75    
- 1 Canadian Wrap 6,99    
- 1 Chicken Greek Wrap 6,99    
3 Deserts    
- 1 Rice Pudding 2,25    
- 1 Fruit Danish 1,50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:53:13.667

您可以[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)像这样订购您的线路：

```
var groups = lines.GroupBy(GetMenuItemTag).OrderBy(l => l.Key); 
```

您还可以遍历组并修改密钥的值。这可以通过`Select`向您的组添加投影来完成。

```
var groups = lines.GroupBy(GetMenuItemTag)
                  .Select(l => new { Key = template.GroupTemplate.Replace("{PRODUCT TAG}", grp.Key)
                                   , l.Value } )
                  .OrderBy(l => l.Key); 
```

编辑：

想了想，昨天才发现自己有点傻。我认为以下内容会对您有所帮助：

```
//dummy data for testing purposes
List<Tuple<string, string>> items = new List<Tuple<string, string>>();
items.Add(new Tuple<string, string>("Dinner", "steak"));
items.Add(new Tuple<string, string>("Dinner", "chicken"));
items.Add(new Tuple<string, string>("Dinner", "chicken"));
items.Add(new Tuple<string, string>("Desert", "chocolate"));

var groups = (from t in items
             group t by new {Course = t.Item1, Item = t.Item2}
             into grp
                 select new
                 {
                     grp.Key.Course,
                     grp.Key.Item,
                     Quantity = grp.Count()
                 })
             .OrderBy(g => g.Course);

foreach (var g in groups)
          Console.WriteLine(string.Format("{0} {1} {2}", g.Course, g.Item, g.Quantity)); 
```

输出：

```
Dinner steak 1
Dinner chicken 2
Desert chocolate 1 
```

显然，您将需要修改数据类型等，但查询本身应该为您提供所需的内容。

# caching - 多应用程序中共享缓存的最佳解决方案是什么

> ID：14661721
> 
> 赞同：2
> 
> 时间：2013-02-02T12:05:34.003
> 
> 标签：caching

标准的 .NET 4.0 缓存不能在多个服务器之间共享。我需要在多应用程序中共享缓存，什么是多应用程序中共享缓存的最佳解决方案我需要帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:08:47.390

几个月前，我写了一篇关于在 WCF 中使用 .NET 4.0 框架中可用的进程内内存缓存进行缓存的文章。该组件提供了一个轻量级缓存解决方案，可以轻松集成到各种类型的 .NET 应用程序中。

有些场景需要更高级的缓存解决方案。标准 .NET 4.0 缓存不能在多个服务器之间共享。每个服务器都有自己独立的缓存实例。此外，它与应用程序共享内存。32 位应用程序最多可以分配 4 GB 的 RAM（在 64 位操作系统上；在 32 位操作系统上最多 2 GB 的 RAM）。在某些情况下，您希望 32 位应用程序的缓存大于 2 GB（尽管这种情况很少见）。

新解决方案使用 Windows Server AppFabric 缓存

[https://github.com/geersch/AppFabric](https://github.com/geersch/AppFabric)

[http://dotnet.dzone.com/articles/caching-wcf-services-part-2](http://dotnet.dzone.com/articles/caching-wcf-services-part-2)

[http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AAP314](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AAP314)

[缓存可用于 WCF 和 ASP .NET 应用程序 (.NET 3.5)](https://stackoverflow.com/questions/11686728/caching-usable-in-both-wcf-and-asp-net-applications-net-3-5/14172721#14172721)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:13:45.767

您绝对可以在 IIS 之外使用 System.Web.Caching.Cache。只需添加对 System.Web 的引用即可 - 它绝对不是 IIS 的功能

[System.Web.Caching.Cache 对象不适用于 .NET Framework 1.1 和 .NET Framework 1.0 中的 ASP.NET](http://support.microsoft.com/kb/917411?wa=wsignin1.0)外部。

# jquery - jQuery 验证地址 - Google Places API

> ID：14661722
> 
> 赞同：1
> 
> 时间：2013-02-02T12:05:56.643
> 
> 标签：jquery, google-maps, google-maps-api-3, jquery-validate, google-places-api

我有一个简单的表单，用户可以在其中输入地址。

在提交表单之前，我使用 Places Api 执行 TextSearch 并将此数据放入表单中的隐藏输入字段中，然后提交。

**我想使用 jQuery Validate 来验证表单，但我不知道如何将 Places 数据与它一起获取。**

我想我必须将 submitHandler 与 Validate 一起使用，但我不确定如何将我的代码放在这里：

```
$("#myform").validate({
 submitHandler: function(form) {
   form.submit();
 }
}); 
```

这是我没有验证插件的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Maps Test</title>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <style type="text/css">
            html { height: 100% }
            body { height: 100%; margin: 0; padding: 0 }
            #map_canvas { height: 100% }
        </style>
        <script type="text/javascript"src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript">
            var map;
            var service;
            var infowindow;
            var service;
            var validated = false;

            function initialize() {
                var pyrmont = new google.maps.LatLng(-33.8665433,151.1956316);

                map = new google.maps.Map(document.getElementById('map_canvas'), {
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        center: pyrmont,
                        zoom: 15
                    });

                service = new google.maps.places.PlacesService(map);
            }

            function textsearchcallback(results, status) {
                if (status == google.maps.places.PlacesServiceStatus.OK) {
                    var place = results[0];
                    var request = {
                        reference: place.reference
                    };
                    service.getDetails(request, getdetailscallback);
                } else {
                    alert("ERROR: NO RESULTS FOUND!");
                }
            }

            function getdetailscallback(place, status) {
                if (status == google.maps.places.PlacesServiceStatus.OK) {
                    $("#placeinfo").val(JSON.stringify(place));
                    validated = true;
                    $("#search-form").submit();
                    validated = false;
                    $("#placeinfo").val("");
                } else {
                    alert("ERROR");
                }
            }

            function validateForm() {
                var searchfield = $("#search-field").val();
                if (searchfield == null || searchfield == "") {
                    alert("Please enter address");
                    return false;
                }
                if (validated) {
                    return true;
                } else {
                    var request = {
                        query: searchfield
                    };
                    service.textSearch(request, textsearchcallback);
                    return false;
                }
            }
        </script>
    </head>

    <body onload="initialize()">
        <form id="search-form" name="input" action="html_form_action.asp" method="get" onsubmit="return validateForm()">
            <input autocomplete="off" placeholder="Address, Airport or Postcode..." id="search-field" size="50" type="text"><br>
            <input type="hidden" name="placeinfo" id="placeinfo">
            <input type="SUBMIT" value="Search" /><br>
        </form>

        <div id="map_canvas" style="width:600px; height:400px"></div>
    </body>
</html> 
```

**编辑：**

这是一个带有工作代码的小提琴：http: [//jsfiddle.net/robertdodd/txqnL/26/](http://jsfiddle.net/Homeliss/txqnL/26/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:38:05.440

# **选项 1 - 客户端验证**

这种方法很麻烦而且有点 hack，除非你别无他法，否则我不建议这样做。我建议使用[另一个验证库](http://coding.smashingmagazine.com/2009/03/02/40-stand-alone-javascript-libraries-for-specific-purposes/)或编写自己的验证库，这是我自己打算做的。

**简单演示：http:** [//jsfiddle.net/robertdodd/txqnL/27/](http://jsfiddle.net/robertdodd/txqnL/27/)

这是一步一步发生的事情：

1.  用户点击提交
2.  表单由 jQuery 验证
3.  在提交处理程序中，我阻止表单提交并使用谷歌查找地址
4.  当谷歌返回时，我填写隐藏的输入并设置`validated = true`
5.  然后我重新提交表单，这次提交是因为`validated == true`

# **选项 2 - 服务器端验证：**

另一种选择是服务器端验证，无论如何我建议将其作为备份。以下是如何将它与 validate 插件一起使用。

1.  使用[远程验证方法](http://docs.jquery.com/Plugins/Validation/Methods/remote)从服务器获取响应
2.  使用[dataFilter](http://api.jquery.com/jQuery.ajax/)从响应中检索地图信息，将其放入隐藏输入中，然后通过返回“true”或“错误消息”来更改响应，因为远程验证需要某个字符串（[请阅读此处](http://docs.jquery.com/Plugins/Validation/Methods/remote)）

这是我的html代码：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript">

  function initialize() {
    $("#search-form").validate({
      rules: {
        searchfield: {
          required: true,
          remote: {
            url: "/validate",
            type: "get",
            dataFilter: function(data) {
              var json = JSON.parse(data);
              var placename = json.placename;
              $('#placename').val(placename);
              return '"' + json.result + '"';
            }
          }
        }
      }
    });
  }
</script>
</head>

  <body onload="initialize()">
    <form id="search-form" >
      <input autocomplete="off" placeholder="Enter a location" name="searchfield" id="searchfield" type="text" /><br/>
      <input type="hidden" name="placename" id="placename" />
      <input type="submit" value="Search" /><br/>
    </form>
    <div id="successmessage"></div>
  </body>
</html> 
```

我希望这可以帮助别人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:59:04.233

如果我理解正确，您只想集成 jQuery Validation 来代替您自己的手动验证。是的，您可以从插件中调用您的函数`submitHandler`，但是您的 OP 中缺少太多代码，无法进行 Maps 函数的工作演示。

这就像你需要做的事情。

```
$(document).ready(function () {
    $('#myform').validate({ // initialize the plugin
        // your rules and options,
        ignore: [], // this option is required if you need to validate hidden inputs
        submitHandler: function (form) { 
            // your functions here
            form.submit(); // to submit the form when you're ready
        }
    });
}); 
```

或者，如果您需要使用 ajax 提交没有页面重定向的表单...

```
$(document).ready(function () {
    $('#myform').validate({ // initialize the plugin
        // your rules and options,
        ignore: [], // this option is required if you need to validate hidden inputs
        submitHandler: function (form) { 
            // ajax functions here
            return false; // to block the normal form submit since you just did it with ajax
        }
    });
}); 
```

**HTML：**

您还需要`onsubmit`从 HTML 中删除事件处理程序，因为它已经内置到 jQuery Validate 插件中。

```
<form id="search-form" name="input" action="html_form_action.asp" method="get" 
onsubmit="return validateForm()"> 
```

会成为...

```
<form id="search-form" name="input" action="html_form_action.asp" method="get"> 
```

**简化演示：http:** [//jsfiddle.net/wbdvc/](http://jsfiddle.net/wbdvc/)

* * *

**编辑：**

关于[OP 编辑​​中的 jsFiddle 演示](http://jsfiddle.net/Homeliss/txqnL/26/)：

以下`if/then`条件永远不会正常工作。 [根据定义，`submitHandler`是**有效**表单](http://docs.jquery.com/Plugins/Validation/validate#toptions)的回调。换句话说，函数运行的**唯一**时间是*在*表单已经测试“有效”之后和实际表单之前。`submitHandler`*`submit`*

 *```
submitHandler: function(form) {
    if (validated) { 
        // address is validated and hidden input filled, so submit the form
        alert('valid form submitted');
        validated = false;
    } else { 
        // address is not validated yet, look up on Google Maps
        var request = {
            query: $("#searchfield").val()
        };
        service.textSearch(request, textsearchcallback);
    }
    return false;
} 
```

`submitHandler`您可以将其放在...中，而不是将该逻辑放在`addMethod`...

[http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)

这将创建一个新规则，您可以像使用任何其他预定义的 Validate 插件规则一样使用它。*

# mysql - CONCAT 周围的 GROUP_CONCAT 给出错误 - 组函数的使用无效

> ID：14661723
> 
> 赞同：0
> 
> 时间：2013-02-02T12:06:00.947
> 
> 标签：mysql, concat, group-concat

我正在尝试对以下查询返回的结果进行 GROUP_CONCAT：

```
SELECT
      CONCAT(p.product_name, " (", SUM(bp.quantity), ")") AS products
FROM product p
INNER JOIN booking_products bp ON p.product_id = bp.product_id
GROUP BY p.product_id 
```

此查询返回以下内容：

```
------------
| products |
------------
Shampoo (3)
Advil (1)
Dry Shampoo (4)
Cepacol (5) 
```

当我尝试运行下面的查询时，我收到一个错误：“#1111 - 组函数的使用无效”。这有什么问题？

```
SELECT
    GROUP_CONCAT(
        CONCAT(p.product_name, " (", SUM(bp.quantity), ")") 
        SEPARATOR ", "
    ) AS products
FROM product p
INNER JOIN booking_products bp ON p.product_id = bp.product_i
GROUP BY p.product_id 
```

当然它应该返回：

```
Shampoo (3), Advil (1), Dry Shampoo (4), Cepacol (5) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T12:11:22.980

```
SELECT GROUP_CONCAT(products) FROM
(
    SELECT CONCAT(p.product_name, " (", SUM(bp.quantity), ")") AS products
    FROM product p
    INNER JOIN booking_products bp ON p.product_id = bp.product_id
    GROUP BY p.product_id
) x 
```

GROUP_CONCAT 不起作用，因为您已经使用了 SUM，它是一个 GROUP 函数。

# windows - git post-receive 钩子将文件从裸仓库写入 www 文件夹 msysgit (windows)

> ID：14661726
> 
> 赞同：1
> 
> 时间：2013-02-02T12:06:16.767
> 
> 标签：windows, git, apache, msysgit, gitstack

所以我有两台 Windows 机器，我基本上是在尝试用 git 管理一些 web 文件我在远程机器上有一个裸存储库，我在本地机器上有一个克隆版本，我已经将一些文件推送到远程存储库。

我希望在接收后事件上将文件部署到目录 c:\UniServer\www\Scripts 这是我的接收后文件的内容：

```
#!/bin/sh
GIT_WORK_TREE=/c/UniServer/www/Scripts git checkout -f 
```

我的仓库存储在 c:\repos\scripts.git\ 我已使用 chmod 将 c:\repos\scripts.git\hooks\post-receive 的权限设置为 +x 并且我正在使用 gitstack ( [http://gitstack .com](http://gitstack.com) ) 来管理存储库。

问题是当我在本地推送提交时，远程服务器上的文件没有更新，有没有办法记录钩子中发生的事情或者只是让它工作:)

**更新：** *apache 服务器出现此错误：[Sat Feb 02 20:04:53 2013] [error] [client xx.xx.xxx.xxx] 错误：无法生成挂钩/接收后：没有这样的文件或目录。C:\repos\scripts.git\hooks\post-receive 确实存在，这让我认为这是一个权限错误*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:17:59.480

我遇到了同样的问题，为我解决的问题是让 GitStack 服务作为本地用户帐户而不是本地系统运行。当然，您使用的任何帐户都需要对存储库文件夹的读/写权限，但我不确定它可能需要哪些其他权限；我只是使用本地管理员帐户进行测试。

希望有帮助！

# ruby-on-rails - Rails Format Collection_Select 基于两种关系

> ID：14661727
> 
> 赞同：0
> 
> 时间：2013-02-02T12:06:20.807
> 
> 标签：ruby-on-rails, relationships, rails-models

我试图弄清楚如何构建一个 collection_select 来包含两个关系。这是我的模型：

```
class Country < ActiveRecord::Base
  has_many :companies, :dependent => :destroy
end

class Company < ActiveRecord::Base
  belongs_to :country
  has_many :departments, :dependent => :destroy
end

class Department < ActiveRecord::Base
  belongs_to :company
end 
```

当我创建一家新公司时，我使用以下内容显示基于关系的选择框。

```
<%= collection_select(:company, :country_id, Countries.all, :id, :name, :prompt => 'Please select country') %> 
```

但是对于部门，我想要一个选择，让用户从选择中选择它的公司，该选择还包括公司国家，格式如下：

公司 1 - 国家 1 公司 2 - 国家 1

如果我使用以下内容，我只会得到我希望能够从列表中看到它们来自哪个国家的所有公司的列表。

```
<%= collection_select(:device, :cabinet_id, Cabinet.all, :id, :name, :prompt => 'Please select cabinet') %> 
```

rails 有没有办法将国家/地区的信息拉到一个选择中并将条目附加到它的父国家/地区？

我希望我这个问题的措辞正确！抱歉，如果不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:53:40.500

即使@jvnil 解决方案有效，我认为您应该避免将此逻辑放在您的视图中。相反，您可以在`Company`模型中创建一个实例方法并在您的选择中使用它。

在您的模型中：

```
class Company< ActiveRecord::Base
  def name_for_select
    name + " - " + country.name
  end
end 
```

在您看来：

```
<%= collection_select(:department, :company_id, Company.all, :id, :name_for_select %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:07:37.220

利用

更新：将逻辑代码移动到模型

```
# company.rb
def company_with_country
  "#{name} - #{country.name}" # this is better than using `string + string` since it creates only 1 string
end

# view
collection_select :department, :company_id, Company.includes(:country).all, :id, :company_with_country 
```

更新：更快的版本，因为它只使用需要的列

```
# controller
@companies = Company.joins(:country)
  .select('companies.id, companies.name, countries.name AS country_name')
  .map { |c| ["#{c.name} - #{c.country_name}", c.id] }`

# view
select :department, :company_id, @companies 
```

# android - 为什么我的签名 apk 崩溃了？

> ID：14661730
> 
> 赞同：8
> 
> 时间：2013-02-02T12:06:47.280
> 
> 标签：android

我已经用我创建的标志签署了一个应用程序。我已经在我的手机中安装了这个 apk，这没问题，但是当我尝试打开应用程序时崩溃（不显示任何活动），并且它没有给我看日志的可能性（这个对话框没有报告按钮）

问题是我签署了应用程序的标志。我已经用其他标志测试过，应用程序可以完美打开。我无法发布有关创建标志的任何信息，但只能说我使用过：

别名中的字母和 _ 字符

密码中的字母、数字和 - 字符

50年

和名字中的字母

其他字段为空白。

主要问题是该应用程序已在 google play 中发布，那么如何在不取消发布此应用程序并创建新应用程序的情况下发布新签名的 apk？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T08:46:54.000

清理项目解决了我的问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-10T23:14:53.493

对于在`react-native` *环境*中获得此功能的任何人，请记住在生成签名的 APK 之前**[捆绑您的 js 。](https://stackoverflow.com/a/35935409/2553600)**

如果您使用的是 Android Studios GUI 之类的东西，很容易忘记

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-14T12:52:07.177

从项目中删除“gen”文件夹，然后清理项目

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-12-05T03:33:40.987

就我而言，我不得不`minifyEnabled`将`false``build.gradle`

`buildTypes { release { minifyEnabled false proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro' } }`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-02T12:17:26.797

您可以在 google play 的开发者帐户中查看此发布的 APK 及其详细信息，例如版本代码和版本名称等

有一键“上传新的APK”

*   点击“上传新的APK”按钮
*   上传修复了错误的新标志 APK
*   停用当前 APK
*   活跃的新apk

**注意：**不要更改新 APK 的包名

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-10T17:48:18.033

另一个可能的原因（对我来说就是这种情况）是在构建签名的 APK 时使用了错误的 JDK/JRE 版本。

如果您使用的是 Eclipse，请检查 Window -> Preferences -> Java -> Installed JREs 并查看哪个被选中为默认值。Android 尚不兼容 Java 8。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-23T02:41:33.080

我今天遇到了同样的问题，对我来说，原因是：

我**`void blaMethod()`**在尝试通过`onClick`XML 按钮的方法调用的 Java 代码中使用了该代码。我必须知道这些方法需要**`public void`......** - 我通常这样做，但这次我有点马虎。

奇怪的是：我的未签名 APK 在我所有的设备上都运行良好，但签名的 APK 在使用这些方法时崩溃了*（在父或祖先上下文中找不到方法（视图）*）。不明白为什么会这样......希望这对某人有帮助！

问候

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-18T12:09:29.883

如果您正在测试，您可以简单地创建一个新的密钥库，或者在我的情况下只需重新输入密码

# android - Android 检查连接是否中断

> ID：14661731
> 
> 赞同：0
> 
> 时间：2013-02-02T12:06:53.193
> 
> 标签：android

我的应用程序需要从 Internet 下载数据库。这是在 中完成的，`AsyncTask`因此当下载数据库时，它不会显示为`Progress Dialog`.

这是数据库下载的代码：

```
 public void downloadDB(String dbFile, String dbFileName) {
        int count;
        try {
            URL url = new URL(dbFile);
            URLConnection conection = url.openConnection();
            conection.connect();

            InputStream input = new BufferedInputStream(url.openStream(), 8192);

            OutputStream output = new FileOutputStream(ctx.getApplicationInfo().dataDir + "/databases/" + dbFileName);

            byte data[] = new byte[1024];

            while ((count = input.read(data)) != -1) {
                output.write(data, 0, count);
            }

            output.flush();

            output.close();
            input.close();
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
        }
    }
} 
```

我正在做一些测试，当下载数据库时，我关闭了互联网连接。问题是`Progress Dialog`不会终止（它处于无限循环中）。我期待在关闭互联网后，会有`IOException`，该函数返回到`doInBackground`方法`AsyncTask`并执行`onPostExecute`我关闭的方法`Progress Dialog`。

奇怪的是，如果我的手机与计算机断开连接，进度对话框永远不会消失，如果我在手机连接到计算机的情况下运行应用程序并查看日志猫，情况也是如此。如果我进入调试模式，`downloadDB`结束并返回给调用者，然后，进度对话框被关闭。

`downloadDB`当网络关闭时，我该怎么做才能从函数中返回？

# c# - 将列表绑定到 Gridview

> ID：14661732
> 
> 赞同：0
> 
> 时间：2013-02-02T12:06:58.900
> 
> 标签：c#, xaml, windows-store-apps

我正在努力解决这个问题，我有一个列表集合，其中包含我试图绑定到 GridView 的以下内容；

```
 public class GetMenu
    {
        public string titleName { get; set; }
        public string imagePath { get; set; }
    }

    List<GetMenu> Menu = new List<GetMenu>()
    {
        new GetMenu(){titleName = "one", imagePath = "image.jpg"},
        new GetMenu(){titleName = "one", imagePath = "image.jpg"}    
    }; 
```

我的 XAML 代码看起来像；

```
 <GridView x:Name="MenuViewGrid" TabIndex="1"
        Grid.RowSpan="2" Padding="116,136,116,46" Margin="0,0,50,0" VerticalAlignment="Center" 
        SelectionMode="None" IsSwipeEnabled="false" IsItemClickEnabled="True" ItemClick="ItemView_ItemClick">
        <GridView.ItemTemplate>
            <DataTemplate>
            <Grid HorizontalAlignment="Left" Width="275" Height="425" >
                <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                        <Image Source="{Binding Path=imagePath}" Stretch="UniformToFill"/>
                </Border>
                <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                    <TextBlock Text="{Binding Path=titleName}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" FontSize="25"  Height="60" Margin="15,0,15,0"/>
                </StackPanel>
            </Grid>
            </DataTemplate>
        </GridView.ItemTemplate>
    </GridView> 
```

在我的脑海中，我认为我可以做一个简单的；

```
MenuViewGrid.ItemsSource = GetMenu; 
```

但是在执行上述操作时，我收到一条错误消息，说它是一种类型，但我正在尝试将其用作变量。我无法理解这一点，因为我以前在 Windows Phone 上使用过代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:23:53.193

替换`GetMenu`为`Menu`（`GetMenu`是你的班级，`Menu`是你的名单）：

```
MenuViewGrid.ItemsSource = Menu; 
```

# windows-runtime - 保留 WinRT 应用程序设置的最佳方式？

> ID：14661734
> 
> 赞同：6
> 
> 时间：2013-02-02T12:07:03.537
> 
> 标签：windows-runtime, save, settings, permanent

我正在开发一个实际上也是游戏的 WinRT 应用程序。我需要将不同的信息（例如音频设置或播放器统计信息）保存在某种文件中或以某种方式保存。如果它是一个文件，只需将设置写入或...？我有一个想法，但我认为这太初级了......获得这个的最佳方法是什么？

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-02T14:37:23.357

以下是在 WinRT 应用程序中保存数据的一些方法，名称中带有设置的方法可能就是您要寻找的方法！- 只需添加其他方法，- 如果您愿意，您也可以序列化数据。这是工作代码-但不要忘记添加错误处理等。这是一个简单的演示代码:)

至于设置，您可以将简单的设置保存为键和值，对于更复杂的设置，您可以使用容器。我在这里提供了两个例子=）

```
 public class StorageExamples
{
    public async Task<string> ReadTextFileAsync(string path)
    {
        var folder = ApplicationData.Current.LocalFolder;
        var file = await folder.GetFileAsync(path);
        return await FileIO.ReadTextAsync(file);
    }

    public async void WriteTotextFileAsync(string fileName, string contents)
    {
        var folder = ApplicationData.Current.LocalFolder;
        var file = await folder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);
        await FileIO.WriteTextAsync(file, contents);
    }

    public void SaveSettings(string key, string contents)
    {
        ApplicationData.Current.LocalSettings.Values[key] = contents;
    }

    public string LoadSettings(string key)
    {
        var settings = ApplicationData.Current.LocalSettings;
        return settings.Values[key].ToString();
    }
    public void SaveSettingsInContainer(string user, string key, string contents)
    {
        var localSetting = ApplicationData.Current.LocalSettings;

        localSetting.CreateContainer(user, ApplicationDataCreateDisposition.Always);

        if (localSetting.Containers.ContainsKey(user))
        {
            localSetting.Containers[user].Values[key] = contents;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T12:14:09.213

MSDN 有[一篇关于在 Windows 应用商店应用程序中使用应用程序设置的文章](http://msdn.microsoft.com/en-gb/library/windows/apps/hh770544.aspx)。

[`Windows.UI.ApplicationSettings`](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.ui.applicationsettings.aspx)命名空间包含您需要的所有类。

> 提供允许开发人员定义出现在 Windows shell 的设置窗格中的应用设置的类。设置窗格为用户提供了一个一致的位置来访问应用程序设置。

基本上，这些类允许您存储应用程序设置并将它们挂接到所有应用程序设置的标准位置。您的用户不必学习任何新东西，设置将在预期的位置。

# iphone - 在 Objective-C 中将我的应用程序带到前台

> ID：14661735
> 
> 赞同：0
> 
> 时间：2013-02-02T12:07:29.137
> 
> 标签：iphone, ios, objective-c

由于位置服务，我的应用程序必须在后台运行很长时间（也）。当满足某个条件时，应用程序必须移动到前台。我能够在后台运行我的应用程序并手动将其置于前台。阅读此问题后，我对如何通过代码将我的应用程序移至前台感到困惑。

它必须在 if 语句中，但从这里做什么呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T12:13:03.617

不，不认为这是可能的。您将能够生成 a`UILocalNotification`向用户显示应用程序状态，但我的理解是 iOS 会阻止您使您的应用程序获得焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:24:36.593

这显然是不可能的，因为如果任何应用程序可以在任何时间点接管控制权，那将是一团糟。如前所述，您必须发布通知，然后由用户决定是否要启动该应用程序。如果您的通知说明了他们应该启动您的应用程序的充分理由，他们可能会这样做:-) 请记住，不要将用户的需求与您/您的应用程序的需求混为一谈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T12:16:21.183

如果没有用户交互，您将无法做到这一点。你可以展示一个 UILocalNotification
——你甚至不能*确定*iOS 让它继续运行！

在越狱的手机上，我想这是可能的

# c - 有符号数与无符号数

> ID：14661738
> 
> 赞同：0
> 
> 时间：2013-02-02T12:07:59.243
> 
> 标签：c

在 C 中，
- 有符号整数变量可以存储负数和正数
- 无符号整数变量只能存储正数
但是，它们都将分配 4 个字节的内存。我读了一本书，它说如果你想存储正数，我们考虑使用无符号整数变量，这样可以节省内存。如果有符号和无符号变量都分配相同大小的内存，4 字节，如何节省内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T12:08:47.713

（这个答案现在是关于 C，而不是 Java。）

> 如果有符号和无符号变量都分配相同大小的内存，两个字节，如何节省内存？

不同之处在于，即使它们具有相同的宽度，这两种类型也可以表示不同的值范围。这意味着如果您选择有符号而不是无符号，有时您必须使用更广泛的类型。

例如，假设您需要表示一个介于 0 和 60,000 之间的值。为此，您有多种选择：

*   使用 16 位无符号整数；
*   使用 32 位有符号整数。

如您所见，您必须为此范围选择更广泛的有符号类型。您不能使用 16 位有符号整数，因为它最多只能达到 32,767。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:10:47.333

1.  java中没有无符号整数类型（来自另一个主题的char）

2.  在有符号数字的语言中，**它们**不节省内存，而是支持更大的正值，并且还提供了一种明确声明给定值不能为负的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T12:12:00.920

直接回答您的问题：如果您需要存储 0 到 65535 之间的值，那么您可以使用一个无符号的两字节值。但是如果你使用有符号值，你将被迫使用更多字节，因为一个两字节的有符号值最多只能存储 32767。你可能不得不使用一个 4 字节的有符号值，这当然是存储的两倍.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T12:15:52.767

你是对的，无论它如何表示，4 个字节都是 4 个字节。在 Java 中使用 unsigned 可以提供帮助的唯一情况是，如果您的范围为 0 - 65535，并且您可以选择`char`或`int`。在这种情况下`char`较小。注意：在 a 中存储无符号数字`char`通常比有用更令人困惑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T12:58:12.840

通常，您不会节省内存，因为在大多数情况下，您使用的整数类型的大小比所需的大得多——通常您的值在 32 中的范围为 0..10 左右-bit int 范围为 +/- 20 亿，而 4 位可以。

从历史上看，有一些语言和计算机系统将数字“打包”成“奇数”位数（并且不止一些使用 4 位十进制数字），但没有“现代”语言（我忽略了RPG 和 COBOL，抱歉）就是这样做的。

因此，您可以使用无符号值来节省存储空间，但这种情况很少见。

但是，了解这两种类型之间的区别很重要，因为无符号值可能会以意想不到的方式表现。例如，（目前还不是最奇怪的情况）`for( unsigned int i = 100; i < 0; i--)`是一个无限循环，因为`i`它永远不会小于零。

因此，对于无符号整数，就有龙。

# windows - Windows 上的 emacs 24.2.1 中的自定义主题导致错误

> ID：14661745
> 
> 赞同：0
> 
> 时间：2013-02-02T12:08:49.447
> 
> 标签：windows, emacs, themes

所以我已经能够在我的 mac 和 linux 机器上安装自定义主题，但无法让自定义主题在我的 emacs windows 安装上工作。

我可以毫无问题地将以下内容添加到我的 ~/.emacs 文件中：

```
(add-to-list 'custom-theme-load-path "~/.emacs.d/themes") 
```

当我将以下命令放入 ~/.emacs 文件时：

```
(load-theme 'tomorrow-night t) 
```

它能够很好地找到该文件，但它停止并出现以下错误：

```
Symbol's value as variable is void: <!-- 
```

我已经用多个不同的主题（不仅仅是明天主题）对此进行了测试，并且出现了同样的问题，但是所有其他插件和对 emacs 的添加都可以正常工作。

任何帮助将不胜感激，因为我很乐意让我所有不同的机器在 emacs 中具有相同的主题风格。

请注意，我使用的是 Windows 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:43:48.820

解决了，原来在 Windows 8 中保存 .el 文件有一些有趣和奇怪的副作用。查看评论 3 的解决方案。

# android - 从 GCM onMessage() 调用 MainActivity 中的方法

> ID：14661749
> 
> 赞同：2
> 
> 时间：2013-02-02T12:09:05.110
> 
> 标签：android, google-cloud-messaging

**我想当GCMIntentService.java**中的onMessage( **)**收到一条新消息时， **onMessage()** 调用**MainActivity.java中的一个名为****blinkLED()**的方法，因此**blinkLED()**方法可以使用**onMessage()**接收到的数据，怎么能我执行那个？示例代码会有所帮助。

 ******* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T15:11:13.330

使用广播接收器。本[教程](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)向您展示如何从一个类发送广播意图，并让另一个类处理它。

简短的例子，在你的 GCMIntentService::onMessage() 中，你可能有这个：

```
Intent intent = new Intent();
intent.setAction("com.my.app.blinkled");
sendBroadcast(intent); 
```

然后在您的 MainActivity 中，您实现了一个 BroadcastReceiver ：

```
private class MyBroadcastReceiver extends BroadcastReceiver {
  @Override
  public void onReceive(Context context, Intent intent) {
    blinkLED();
  }
} 
```

并在 MainActivity 的 onResume() 中注册：

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction("com.my.app.blinkled");
receiver = new MyBroadcastReceiver();
registerReceiver(receiver, intentFilter); 
```******

# java - TcpListener.pending 替代 java

> ID：14661750
> 
> 赞同：0
> 
> 时间：2013-02-02T12:09:07.590
> 
> 标签：java, sockets

**你好..知道在 c# 中你可以使用 bool .pending(); 检查服务器是否有挂起的连接；但是有没有办法在java中做到这一点？我在问，因为我在网上找不到任何相关的东西……谢谢我想它是这样的：**

```
ServerSocket srv=new ServerSocket(port);
if(srv.isPending())//How this can be done????
{
Socket Cl=srv.accept();
while(Cl.isConnected())
{
//read packet stream..........
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:18:20.533

java中没有这样的方法。您必须编写一个无限循环来等待这样的客户端连接。

```
ServerSocket srv=new ServerSocket(port);
while(true){
   /*Program will wait for a new client connection
     at this line and then proceeds further*/
   Socket client=srv.accept();
   // Rest of the code will continue here
} 
```

# backbone.js - 当使用 Marionette.js 时，我应该何时调用 vent.trigger('app:show', Controller.layout)？

> ID：14661752
> 
> 赞同：1
> 
> 时间：2013-02-02T12:09:10.407
> 
> 标签：backbone.js, marionette, backbone-views, backbone-events

当然答案是“当你想展示应用程序时使用它”。好的，这很公平。但是子视图呢？我正在使用 Ted 的示例：[https](https://github.com/t2k/backbone.marionette-RequireJS) ://github.com/t2k/backbone.marionette-RequireJS 。该示例只有一个控制器设置。我有六个控制器，我在 Ted 的示例中复制了 libraryController。每个示例都有以下代码：

```
 var _initializeLayout = function() {
       console.log('initialize Start Layout...');
       Controller.layout = new Layout();
       Controller.layout.on("show", function() {
           vent.trigger("startLayout:rendered");
    });
    vent.trigger('app:show', Controller.layout);  <!-- is this needed for each?
}; 
```

所以我的每个控制器中都有该代码。StartLayout 有两个区域，它们有自己的视图，它们是 InspectorController 和 PlayerController 的入口点。

这些控制器中的每一个都具有：

```
vent.trigger('app:show', Controller.layout); 
```

所以在我看来，我可能会比需要更多地调用“app:show”。每个需要初始化的控制器一次。

这是必要的吗？当我处理应用程序的直接子视图时，我可以理解，但如果我深入到 PlayerController 并且应用程序视图不可见，这似乎有点矫枉过正。

谢谢，

安德鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T20:19:28.657

尽量不要想到“调用”app:show。这不是一个函数，它是一个事件。一个事件可以有任意数量的订阅监听它。对于此应用程序，该事件只有一个侦听器：

```
vent.on('app:show', function(appView) {
  app.content.show(appView);
}); 
```

在这种情况下，它告诉`content`区域将事件中包含的任何视图显示为`appView`. 因此，如果您想`content`用您自己的视图替换该区域，您应该`app:show`使用您希望该`content`区域显示的任何视图的参数来触发。

`content`绑定到一个 DOM 元素，并且无论何时调用`content.show(someView)`，该 DOM 元素的内容都会被`someView.render().el`.

我建议阅读[Layouts](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.layout.md)、[Regions](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.region.md)和[Events](https://github.com/marionettejs/backbone.wreqr#basic-use)。

希望这可以帮助。

# javascript - 没有在backbone.js + coffeescript 上定义方法

> ID：14661753
> 
> 赞同：1
> 
> 时间：2013-02-02T12:09:12.563
> 
> 标签：javascript, jquery, backbone.js, coffeescript

**我在backbone.js**中有我的javascript，用的是**coffeescript**而不是javascript：

```
TodoItem = Backbone.Model.extend(
  toggleStatus ->
    if @.get 'status' is "incomplete"
      @.set 'status': 'complete' 
    else
      @.set 'status': 'incomplete'
    @.save()  
)

todoItem = new TodoItem(
  description: 'Play the guitar'
  status: 'incomplete'
  id: 1
)

TodoView = Backbone.View.extend(
  tagName: 'div'
  id: "box"
  className: 'red-box'

  template: 
    _.template "<h3> <input type=checkbox #{ print "checked" if status is "complete"} /> <%= description %></h3>"

  events: 
    "click h3": "alertStatus"
    'change input': 'toggleStatus'

  toggleStatus: ->
    @.model.toggleStatus()

  alertStatus: ->
    alert('Hey you clicked the h3!')

  render: ->
    @.$el.html @.template(@.model.toJSON())
)

todoView = new TodoView({model: todoItem})
todoView.render()
console.log todoView.el 
```

Backbone 版本是最后一个版本 0.9.10，underscore.js 版本是最后一个版本 1.4.4

咖啡脚本文件编译得很好，但是我进入控制台：

**未捕获的 ReferenceError：toggleStatus 未定义 main.js:5**

**（匿名函数）main.js:5**

**（匿名函数）**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:40:50.753

I guess that you're trying to assign a anonymous function to your object at key `toggleStatus` at line 2.

Then, you just forget the `:` when declaring `toggleStatus`.

# linux - gcc-3.4 编译错误

> ID：14661759
> 
> 赞同：0
> 
> 时间：2013-02-02T12:10:04.690
> 
> 标签：linux, gcc, ubuntu-12.04, qemu, gcc3

我需要`gcc-3.4`编译一些软件。
我`Ubuntu-12.4`使用以下说明安装：--
[https://superuser.com/questions/351742/how-to-install-gcc-3-4-on-ubuntu-11-10](https://superuser.com/questions/351742/how-to-install-gcc-3-4-on-ubuntu-11-10)

> sudo dpkg -i *.deb

```
gcc-3.4 hello.c 
```

我编译了简单的hello程序。然后在 rpi_exp.c 里，`#include<stdio.h>`开始`i get lots of error.` 好像`libc`没有找到。

请建议为此安装正确的软件包`?`

这里有很多库要安装哪一个:?:
[http://packages.ubuntu.com/hardy-updates/gcc-3.4](http://packages.ubuntu.com/hardy-updates/gcc-3.4)

[https://ftp7.de.netbsd.org/pub/releases.ubuntu.com/ubuntu/pool/main/g/glibc/](https://ftp7.de.netbsd.org/pub/releases.ubuntu.com/ubuntu/pool/main/g/glibc/) [http://packages.ubuntu.com/hardy-updates/i386/libc6-i686/下载](http://packages.ubuntu.com/hardy-updates/i386/libc6-i686/download)

错误 ： -

```
ignite@ignite:~/testing$ gcc-3.4 rpi_exp.c
In file included from /usr/include/stdio.h:28,
                 from rpi_exp.c:1:
/usr/include/features.h:324:26: bits/predefs.h: No such file or directory
/usr/include/features.h:357:25: sys/cdefs.h: No such file or directory
/usr/include/features.h:389:23: gnu/stubs.h: No such file or directory
In file included from /usr/include/stdio.h:34,
                 from rpi_exp.c:1:
/usr/lib/gcc/i486-linux-gnu/3.4.6/include/stddef.h:213: error: syntax error before "typedef"
In file included from rpi_exp.c:1:
/usr/include/stdio.h:36:25: bits/types.h: No such file or directory
In file included from rpi_exp.c:1:
/usr/include/stdio.h:49: error: syntax error before "typedef"
/usr/include/stdio.h:54: error: syntax error before "__USING_NAMESPACE_STD"
/usr/include/stdio.h: In function `__USING_NAMESPACE_STD':
/usr/include/stdio.h:65: error: storage class specified for parameter `__FILE'
In file included from /usr/include/_G_config.h:20,
                 from /usr/include/libio.h:32,
                 from /usr/include/stdio.h:75,
                 from rpi_exp.c:1: 
```

rpi_exp.c :---

```
#include <stdio.h>
int main() 
{ 
   printf("Hello, world!\n"); 
   return 0; 
} 
```

我尝试安装 gcc-3.4 参考：---- [http://simplyrisc.blogspot.in/2009/11/install-gcc-34-on-ubuntu-910.html](http://simplyrisc.blogspot.in/2009/11/install-gcc-34-on-ubuntu-910.html)

错误得到：---

```
>> ignite@ignite:~/testing$ sudo dpkg -i *.deb

Reading database ... 159968 files and directories currently installed.)
Preparing to replace cpp-3.4 3.4.6-6ubuntu3 (using cpp-3.4_3.4.6-8ubuntu2_i386.deb) ...
Unpacking replacement cpp-3.4 ...
Selecting previously unselected package g++-3.4.
Unpacking g++-3.4 (from g++-3.4_3.4.6-6ubuntu3_i386.deb) ...
Selecting previously unselected package gcc-3.4.
Unpacking gcc-3.4 (from gcc-3.4_3.4.6-8ubuntu2_i386.deb) ...
Preparing to replace gcc-3.4-base 3.4.6-6ubuntu3 (using gcc-3.4-base_3.4.6-8ubuntu2_i386.deb) ...
Unpacking replacement gcc-3.4-base ...
Selecting previously unselected package libstdc++6-dev.
Unpacking libstdc++6-dev (from libstdc++6-dev_3.4.6-6ubuntu3_i386.deb) ...
dpkg: dependency problems prevent configuration of g++-3.4:
 g++-3.4 depends on gcc-3.4 (= 3.4.6-6ubuntu3); however:
  Version of gcc-3.4 on system is 3.4.6-8ubuntu2.
 g++-3.4 depends on gcc-3.4-base (= 3.4.6-6ubuntu3); however:
  Version of gcc-3.4-base on system is 3.4.6-8ubuntu2.

dpkg: error processing g++-3.4 (--install):
 dependency problems - leaving unconfigured
Setting up gcc-3.4-base (3.4.6-8ubuntu2) ...
dpkg: dependency problems prevent configuration of libstdc++6-dev:
 libstdc++6-dev depends on g++-3.4 (= 3.4.6-6ubuntu3); however:
  Package g++-3.4 is not configured yet.
 libstdc++6-dev depends on gcc-3.4-base (= 3.4.6-6ubuntu3); however:
  Version of gcc-3.4-base on system is 3.4.6-8ubuntu2.

dpkg: error processing libstdc++6-dev (--install):
 dependency problems - leaving unconfigured
Setting up cpp-3.4 (3.4.6-8ubuntu2) ...
Processing triggers for man-db ...
Setting up gcc-3.4 (3.4.6-8ubuntu2) ...
Errors were encountered while processing:
 g++-3.4
 libstdc++6-dev 
```

- - - - - - - - - - - - - - [编辑] ： - - - - - - - - - - --------

请帮助我出了什么问题。

我需要它来编译 QEmu。

我再次从以下链接重新安装，没有警告没有错误：-----
[https://launchpad.net/ubuntu/+archive/primary/+sourcepub/277794/+listing-archive-extra](https://launchpad.net/ubuntu/+archive/primary/+sourcepub/277794/+listing-archive-extra)

```
cpp-3.4_3.4.6-6ubuntu3_i386.deb
g++-3.4_3.4.6-6ubuntu3_i386.deb
gcc-3.4_3.4.6-6ubuntu3_i386.deb
gcc-3.4-base_3.4.6-6ubuntu3_i386.deb
libstdc++6-dev_3.4.6-6ubuntu3_i386.deb 
```

程序再次崩溃：-----

```
ignite@ignite:~/testing$ gcc-3.4 rpi_exp.c
In file included from /usr/include/stdio.h:28,
                 from rpi_exp.c:1:
/usr/include/features.h:324:26: bits/predefs.h: No such file or directory
/usr/include/features.h:357:25: sys/cdefs.h: No such file or directory
/usr/include/features.h:389:23: gnu/stubs.h: No such file or directory
In file included from /usr/include/stdio.h:34,
                 from rpi_exp.c:1:
/usr/lib/gcc/i486-linux-gnu/3.4.6/include/stddef.h:213: error: syntax error before "typedef"
In file included from rpi_exp.c:1:
/usr/include/stdio.h:36:25: bits/types.h: No such file or directory
In file included from rpi_exp.c:1:
/usr/include/stdio.h:49: error: syntax error before "typedef"
/usr/include/stdio.h:54: error: syntax error before "__USING_NAMESPACE_STD"
/usr/include/stdio.h: In function `__USING_NAMESPACE_STD':
/usr/include/stdio.h:65: error: storage class specified for parameter `__FILE'
In file included from /usr/include/_G_config.h:20,
                 from /usr/include/libio.h:32,
                 from /usr/include/stdio.h:75,
                 from rpi_exp.c:1:
/usr/include/wchar.h:95: error: storage class specified for parameter `__mbstate_t'
In file included from /usr/include/libio.h:32,
                 from /usr/include/stdio.h:75,
                 from rpi_exp.c:1:
/usr/include/_G_config.h:24: error: syntax error before "__off_t"
/usr/include/_G_config.h:29: error: syntax error before "__off64_t"
/usr/include/_G_config.h:53: error: storage class specified for parameter `_G_int16_t'
/usr/include/_G_config.h:54: error: storage class specified for parameter `_G_int32_t'
/usr/include/_G_config.h:55: error: storage class specified for parameter `_G_uint16_t'
/usr/include/_G_config.h:56: error: storage class specified for parameter `_G_uint32_t'
In file included from /usr/include/libio.h:53,
                 from /usr/include/stdio.h:75,
                 from rpi_exp.c:1:
/usr/lib/gcc/i486-linux-gnu/3.4.6/include/stdarg.h:43: error: storage class specified for parameter `__gnuc_va_list'
In file included from /usr/include/stdio.h:75,
                 from rpi_exp.c:1:
/usr/include/libio.h:182: error: storage class specified for parameter `_IO_lock_t'
/usr/include/libio.h:302: error: syntax error before "__off_t"
/usr/include/libio.h:312: error: syntax error before "_IO_lock_t"
/usr/include/libio.h:340: error: syntax error before '}' token
/usr/include/libio.h:343: error: storage class specified for parameter `_IO_FILE'
/usr/include/libio.h:348: error: storage class specified for parameter `_IO_2_1_stdin_'
/usr/include/libio.h:349: error: storage class specified for parameter `_IO_2_1_stdout_'
/usr/include/libio.h:350: error: storage class specified for parameter `_IO_2_1_stderr_'
/usr/include/libio.h:366: error: storage class specified for parameter `__ssize_t'
/usr/include/libio.h:366: error: syntax error before "__io_read_fn"
/usr/include/libio.h:374: error: storage class specified for parameter `__ssize_t'
/usr/include/libio.h:374: error: redefinition of parameter '__ssize_t'
/usr/include/libio.h:366: error: previous definition of '__ssize_t' was here
/usr/include/libio.h:374: error: syntax error before "__io_write_fn"
/usr/include/libio.h:383: error: syntax error before "__off64_t"
/usr/include/libio.h:383: error: storage class specified for parameter `__io_seek_fn'
/usr/include/libio.h:386: error: storage class specified for parameter `__io_close_fn'
/usr/include/libio.h:418: error: syntax error before '*' token
/usr/include/libio.h:418: error: storage class specified for parameter `__underflow' 
```

请帮助我出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:32:55.267

您的错误意味着您的文件在版本中不匹配。

您应该安装具有以下所有这些 .deb 文件的 gcc-3.4：

cpp-3.4_3.4.6-6ubuntu5_i386.deb g++-3.4_3.4.6-6ubuntu5_i386.deb gcc-3.4_3.4.6-6ubuntu5_i386.deb gcc-3.4-base_3.4.6-6ubuntu5_i386.deb libstdc++6-dev_3.4.6- 6ubuntu5_i386.deb

通过以下命令安装它们：dpkg -i *.deb

祝你好运 ;）

# file-upload - 3.5 Wordpress媒体上传器手动实现

> ID：14661760
> 
> 赞同：3
> 
> 时间：2013-02-02T12:10:07.820
> 
> 标签：file-upload, wordpress

我在理解如何在我的主题选项页面中实现新的 WP 媒体上传器时遇到问题。是否有关于如何执行此操作的文档或一些解释？我已经看过几个如何做到这一点的示例，但没有一个对他们的代码有任何很好的解释。是否有选项列表如何自定义媒体上传器框架？我的意思是如果你能做这样的事情不是很好（见 // 创建媒体框架。）：

```
// Uploading files
var file_frame;
jQuery('.upload_image_button').live('click', function() {
    // If the media frame already exists, reopen it.
    if ( file_frame ) {
        file_frame.open();
        return;
    }

    // Create the media frame.
    file_frame = wp.media.frames.file_frame = wp.media({
        title: 'My frame title',
        button: {
            text: 'My button text',
        },
        id: 'logo-frame',
        multiple: false,

        editing_sidebar: false, // Just added for example
        default_tab: 'upload', // Just added for example
        tabs: 'upload, library', // Just added for example
        returned_image_size: 'thumbnail' // Just added for example

    });

    // When an image is selected, run a callback.
    file_frame.on( 'select', function() {
        var attachment;
        // We set multiple to false so only get one image from the uploader
        attachment = file_frame.state().get('selection').first().toJSON();

        // Do something with attachment.id and/or attachment.url here

    });

    // Finally, open the modal
    file_frame.open();
    return false
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T23:35:53.840

对于 WP 3.5，您可以使用新的媒体上传器。我会简短，希望你知道你在做什么。这个想法是调用 wp_enqueue_script （这只适用于 WP >= 3.5 btw）。调用脚本后，您可以操作 javascript 对象。您必须进行一些检查才能看到您的全套选项。

首先，您必须将脚本排入队列：

```
add_action( 'wp_enqueue_scripts', 'front_upload_enqueues' );
function front_upload_enqueues() {
    wp_register_script('uploads', 
        // path to upload script
        get_template_directory_uri().'/lib/js/media-upload.js' 
    );
    wp_enqueue_script('uploads');
    if ( function_exists('wp_enqueue_media') ) {
        // this enqueues all the media upload stuff
        wp_enqueue_media();
    }
} 
```

然后你必须添加javascript（在我的例子中是jQuery）：

```
jQuery(document).ready(function($){
    var frame;
    /*
     * Upload button click event, which builds the choose-from-library frame.
     *
     */
    $('.form-table').on('click', '.member-upload-field .btn-upload', function( event ) {
        var $el = $(this);
        event.preventDefault();

        // Create the media frame.
        frame = wp.media.frames.customHeader = wp.media({
            title: $el.data('choose'),
            library: { // remove these to show all
                type: 'image', // specific mime
                author: userSettings.uid // specific user-posted attachment
            },
            button: {
                text: $el.data('update'), // button text
                close: true // whether click closes 
            }
        });

        // When an image is selected, run a callback.
        frame.on( 'select', function() {
            // Grab the selected attachment.
            var attachment = frame.state().get('selection').first(),
                link = $el.data('updateLink');

            $el.prev('input').val( attachment.attributes.id );
            $el.parent().prev().find('img').attr('src', attachment.attributes.url );
        });

        frame.open();
    });

}); 
```

# notepad++ - 使用filezilla上传文件时，Notepad ++在每行代码之间插入一个空行

> ID：14661761
> 
> 赞同：3
> 
> 时间：2013-02-02T12:10:08.810
> 
> 标签：notepad++, filezilla

我想用 Filezilla 从我的服务器下载 php 文件，以便备份它们并在我的计算机上备份它们。因此，在对代码进行任何更改之前，我肯定会拥有可以使用的最新版本。晚上累了，覆盖现有文件太容易了。

但是当我下载文件时，它们会在 Notepad++ 中打开，每行代码之间都有**一个空行。**它不再可读，它使一个 800 行的页面变成了 1600 个页面！一个一个地删除每个空白行会让你发疯。

之后有没有快速删除空行的方法或防止这种情况发生的方法？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-11T13:28:12.560

我遇到了同样的问题。将 filezilla 的传输文件类型设置更改为二进制，它不会再给出空行。

这是如何做到的：

转到`Edit`> `Settings`> `Transfers`>`File Types`

在那里你可以选择`Binary`转移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:35:54.187

您可能会遇到此问题，因为您正在将文件作为 UNIX 文件读取，而该文件是由 Windows 系统创建的。

如果您的服务器是 UNIX 系统，您应该使用替换。放置`\r`为搜索，将替换留空并选择扩展研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:11:49.873

谢谢。我找到了最简单的方法。

**只是不要右键单击远程文件上的编辑**

（如果您的文件设置为使用 Notepad++ 自动打开，则每行代码后都会插入一个空行）

**反而 ：**

*   在 HD 上创建 pubic_html 的副本文件夹
*   使用 Filezilla 将所有文件的副本传输到此文件夹。
*   ->>>备份将在几秒钟内完成，所有 php 文件将在 Notepad++ 中正常打开

# activiti - 使用activiti引擎实现离线消息流。

> ID：14661763
> 
> 赞同：2
> 
> 时间：2013-02-02T12:10:33.353
> 
> 标签：activiti

我有一个分布式业务流程模型，由销售人员和销售经理组成。每个销售人员都有一台笔记本电脑，上面安装了 activiti 引擎 5.11，并且在每天结束时，在他们的笔记本电脑中完成的所有流程都必须在 manager 引擎中更新。问题是销售人员必须离线工作（没有互联网）。这个问题的最佳解决方案是什么？如何在没有连接系统的情况下实现销售人员与销售经理之间的消息流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T13:31:04.263

由于每个“Salesman Activiti Engine”都使用自己的数据库，因此您可以在经理方面合并数据库（例如在每天或每周结束时）。

当进程在他/她的机器上启动和继续时，“经理的 Activiti 引擎”将在合并的数据库上工作。但是，在合并数据库时可能会发生 ID 冲突，这可以通过使用 UUID 来解决。更多关于 Activiti 中 UUID 的信息可以从[Activiti 用户指南中阅读。](http://www.activiti.org/userguide/#advanced.uuid.generator)

# android - Json 在 Android ICS 上运行良好，但不适用于 2.3

> ID：14661772
> 
> 赞同：0
> 
> 时间：2013-02-02T12:11:53.787
> 
> 标签：android, json, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

```
 try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "utf-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }    
// try parse the string to a JSON object
    try {
         // convert string to jsonObject
        Log.d("JSON Parser", "json: "+json);
        jObj = new JSONObject(json);

    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    } 
```

给出`Log.d("JSON Parser", "json: "+json);`作为输出（logcat）：

```
02-02 12:08:31.371: D/JSON Parser(407): json: {"code":64,"message":"Segnalazione avvenuta con successo"} 
```

但它在捕获和logcat中我读到：

```
02-02 12:08:31.371: E/JSON Parser(407): Error parsing data org.json.JSONException: Value  of type java.lang.String cannot be converted to JSONObject 
```

这在 Android ICS 中工作得很好，但在 Android 2.3 中不起作用

编辑：我解决

```
if (result.startsWith("["))
  {

  }
  else
  {
      result= result.substring(1);
  } 
```

但我不认为这是一个正确的策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:29:59.790

您是否尝试`responseType`将`json`. 如果问题仍然存在，这些帖子中有一些建议
[JSON Parsing works on Android 4.0 but not on Android < 4.0](https://stackoverflow.com/questions/11064244/json-parsing-works-on-android-4-0-but-not-on-android-4-0)
[Issue initializing a JSONObject](https://stackoverflow.com/questions/6062007/issue-initializing-a-jsonobject)
[JSON parsing question](https://stackoverflow.com/questions/7254962/json-parsing-problem)

# mdx - 根据我的需要设计 OLAP 多维数据集和 MDX 查询

> ID：14661778
> 
> 赞同：0
> 
> 时间：2013-02-02T12:12:33.010
> 
> 标签：mdx, olap, olap-cube, mondrian

我有一个时间维度为 [年 > 月 > 日月 > 小时] 的 OLAP 多维数据集。现在我需要非常快速地创建一些报告，例如昨天的所有销售报告（例如：上午 07:00 - 265 销售），上个月的所有销售（例如：2013 年 2 月 1 日 - 6625 销售），这一切都很容易& 快，因为昨天我正在查询：“WHERE {Hierarchize({[Date].[2013].[2013-2].[2013-2-1]})}”和我查询的月份:"WHERE {Hierarchize({[Date].[2013].[2013-2]})}"。

但现在我还需要创建过去 30 天的报告。有什么想法可以让这份报告和上个月的报告一样快吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:45:27.150

您需要查看 CurrentDateMember 函数，请参阅此处的 Diethards 博客以获得全面的解释：

[http://diethardsteiner.blogspot.co.uk/2009/10/current-date-function-on-mondrian.html](http://diethardsteiner.blogspot.co.uk/2009/10/current-date-function-on-mondrian.html)

至于性能 - 唯一的解决方案是打开各种蒙德里安日志，并首先检查是否没有慢速 SQL - 如果先在数据库中修复它 - 可能是缺少索引或其他东西。

最后，如果它仍然很慢，请发布完整的 mdx。您没有 2 个单独的日期集吗？

# javascript - 如何（ajax）发布和执行响应？

> ID：14661779
> 
> 赞同：2
> 
> 时间：2013-02-02T12:12:36.210
> 
> 标签：javascript, jquery, asp.net, post, httphandler

我们有以下情况：

在`default.aspx`我们有一个链接：

```
<a href="javascript:doPost()">test</a>. 
```

和JS代码：

```
function doPost() {
    $.post('AnHttpHandlerPage.aspx',"{some_data:...}", function(data) {
        if(data.indexOf("http://")==0)
            window.open(data);
        else{
            var win=window.open();
            with(win.document) {
                open();
                write(data); //-> how to execute this HTML code? The code also includes references to other js files.
                close();
            }  
        }
    }).error(function(msg){document.write(msg.responseText);});
} 
```

回调可以**首先是一个 url 地址**或**必须执行的第二个 html 代码**。选项 1 适合，但在选项 2 中，将打开一个新窗口，其中代码已编写但未执行。

很清楚，因为它发生在流中，所以无法执行。那么问题来了，你怎么能解决它？也许 a`refresh()`或类似的？

由于客户的要求，工作流程是不能改变的，所以必须在内部解决`doPost()`。

**编辑**

案例 2 中的**响应**是这样的 HTML。**这部分应该执行**：

```
<HTML><HEAD>
<SCRIPT type=text/javascript src="http://code.jquery.com/jquery-latest.js">
</SCRIPT>
<SCRIPT type=text/javascript>                      
$(document).ready(function() {
do_something... 
});                          
</SCRIPT>
</HEAD>
<BODY>
<FORM>...</FORM>
</BODY>
</HTML> 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:31:45.770

在您的 JS 代码中，它应该是这样的：

```
function doPost() {
    $.post('AnHttpHandlerPage.aspx',"{some_data:...}", function(data) {
        //if(data.indexOf("http://")==0)
              if (data.type!="url")   //i will add a data type to my returned json so i can differentiate if its url or html to show on page.
            window.open(); // I dont know why this is there. You should
        else{
            var win=window.open(data.url); //This data.url should spit out the whole page you want in new window. If its external it would be fine. if its internal maybe you can have an Action on one of your controllers that spit it with head body js css etc.
        /*  with(win.document) {
                open();
                write(data); //-> how to execute this HTML code? The code also includes references to other js files.
                close(); */ // No need to write data to new window when its all html to be rendered by browser. Why is this a requirement.
            }  
        }
    }).error(function(msg){document.write(msg.responseText);});
} 
```

整体逻辑是这样的

1.  你在 doPost 上进行 ajax 调用
2.  查看返回的数据是 url 类型还是需要在新窗口中打开的任何内容
3.  如果它是 url 类型，它将有一个 url（检查它是否不为 null 或为空，甚至是有效的 url），然后使用该 url 打开一个新窗口。阅读[W3C window.open](http://www.w3schools.com/jsref/met_win_open.asp)获取参数
4.  如果您出于某种原因想要打开和关闭它，只需保留窗口句柄即可，但您可以在该新窗口的 dom 就绪事件上执行此操作，否则您可能最终在其 dom 完全加载之前关闭它。（其他人可能有更好的方法）
5.  如果它不是 url 类型，那么你在这个页面上做你通常的事情。

如果这没有意义，让我们讨论。

# tomcat - 同一个 Web 容器中同一个 Web 应用程序的不同版本

> ID：14661785
> 
> 赞同：2
> 
> 时间：2013-02-02T12:13:06.147
> 
> 标签：tomcat, grails, deployment

我正在尝试在同一个 Tomcat 服务器中部署同一个 grails Web 应用程序的两个版本（生产版本和测试版本）

环境：Grails 2.0.4、Tomcat 7

但是，它似乎无法同时部署这两个应用程序。尝试部署时我没有收到任何错误。catalina.out 在配置 Spring Security COre 插件时卡住了

我已经在 .war 里面的 application.properties 文件中更改了应用名称，当然这两个 .war 文件有不同的名称：app_prod.war、app_test.war

有任何想法吗？

# c++ - 从具有未知参数计数的函数创建函子

> ID：14661787
> 
> 赞同：2
> 
> 时间：2013-02-02T12:13:07.750
> 
> 标签：c++, templates, boost

我用 C++ & boost 编写了一个程序。是否可以编写一个模板类，从具有未知数量参数的函数中生成仿函数，例如`my_call<func>(vector<variant>)`fun 可以在哪里`bool fun(string)`或`bool fun(int, int, string)`等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:55:10.243

首先，重要的是要认识到这`boost::variant<>`是一个类模板，它需要它可以包含的所有可能类型的列表。所以，你不会只有一个`vector<variant>`，而是一个`vector<variant<string, double>>`，或`vector<variant<int, double, string, my_class>>`，你将无法混合它们。

这让我觉得你可能想要使用`boost::any`而不是`boost::variant<>`. 因此，我在这里提出了一个可以使用`boost::variant`并且可以稍微修改以使用的解决方案`boost::any`，因此您可以选择您喜欢的版本。

* * *

首先，我必须承认该解决方案**使用起来很简单，**但*理解起来并不那么简单*，所以我必须先介绍一些**机器**。这种机制对于基于变体和基于任意的解决方案都是**通用的。**

```
//=============================================================================
// META-FUNCTIONS FOR CREATING INDEX LISTS

// The structure that encapsulates index lists
template <size_t... Is>
struct index_list
{
};

// Collects internal details for generating index ranges [MIN, MAX)
namespace detail
{
    // Declare primary template for index range builder
    template <size_t MIN, size_t N, size_t... Is>
    struct range_builder;

    // Base step
    template <size_t MIN, size_t... Is>
    struct range_builder<MIN, MIN, Is...>
    {
        typedef index_list<Is...> type;
    };

    // Induction step
    template <size_t MIN, size_t N, size_t... Is>
    struct range_builder : public range_builder<MIN, N - 1, N - 1, Is...>
    {
    };
}

// Meta-function that returns a [MIN, MAX) index range
template<size_t MIN, size_t MAX>
using index_range = typename detail::range_builder<MIN, MAX>::type; 
```

元类`index_range`允许定义**整数的编译时序列**。[Jonathan Wakely](https://stackoverflow.com/users/981959/jonathan-wakely)提出了[一个有趣的建议](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3493.html)来标准化这种结构，这样整个机器就不需要了。然而，就目前而言，我们必须像上面那样手动编写代码。

* * *

现在我们可以构建编译时整数序列，我们可以利用**可变参数模板**和**参数解包**来创建一个调度机制，将`variant`参数向量转换为常规参数列表。请注意具体`variant<>`类型必须如何作为模板参数提供。基于. _ *_*`any`

```
// Headers needed for the implementation of the dispatcher
#include <vector>
#include <functional>
#include <boost/variant.hpp>

// Just for convenience
using namespace std;
using boost::variant;

//============================================================================
// DISPATCHER IMPLEMENTATION

// Call dispatching mechanism: notice how the underlying variant type
// must be provided as a template argument (the first one)
template<typename VT, typename R, typename... Args>
struct dispatcher
{

    template<typename F>
    dispatcher(F f) : _f(f) { }

    // The call operator which performs the variant dispatch
    R operator () (vector<VT> const& v)
    {
        if (v.size() != sizeof...(Args))
        {
            // Wrong number of arguments provided!
            return false;
        }

        // Delegates to internal function call: needed for deducing
        // a sequence of integers to be used for unpacking.
        index_range<0, sizeof...(Args)> indexes;
        return do_call(v, indexes);
    }

private:

    // The heart of the dispatching mechanism
    template<size_t... Is>
    R do_call(vector<VT> const& v, index_list<Is...> indexes)
    {
        return _f((get_ith<Args>(v, Is))...);
    }

    // Helper function that extracts a typed value from the variant.
    template<typename T>
    T get_ith(vector<VT> const& v, size_t i)
    {
        return boost::get<T>(v[i]);
    }

    // Wrapper that holds the function to be invoked.
    function<R(Args...)> _f;
};

// Helper function that allows deducing the input function signature
template<typename VT, typename R, typename... Args>
function<R (vector<VT> const&)> get_dispatcher(R (*f)(Args...))
{
    dispatcher<VT, R, Args...> d(f);
    return d;
} 
```

最后，简短演示一下如何使用它。假设我们有两个测试函数，如下所示：

```
#include <iostream>

bool test1(string s, double d)
{
    cout << s << " " << d << endl;
    return true;
}

bool test2(int i1, int i2, string s1, string s2)
{
    cout << i1 << " " << i2 << " " << s1 << " " << s2 << endl;
    return true;
} 
```

我们想要的是通过构建一个变体向量来调用它们并将其分派到所需的函数。我必须再次强调一个事实，即*我们需要指定我们的变体可以包含的所有类型的列表*。在这里，我假设这些类型是`string`、`double`和`int`，但您的程序可能会使用不同的类型。

此外，该解决方案基于`std::function<>`实现类型擦除，允许您创建不同类型的函子并统一调用它们。因此，还提供了一个方便的类型定义`std::function<>`（这又取决于`variant<>`我们使用的类型）：

```
int main()
{
    // A helper type definition for the variant
    typedef variant<int, double, string> vt;

    // A helper type definition for the function wrapper
    typedef function<bool (vector<vt>)> dispatcher_type;

    // Get a caller for the first function
    dispatcher_type f1 = get_dispatcher<vt>(test1);

    // Prepare arguments for the first function
    vector<vt> v = {"hello", 3.14};

    // Invoke the first function
    f1(v);

    // Get a caller for the second function
    dispatcher_type f2 = get_dispatcher<vt>(test2);

    // Prepare arguments for the second function
    v.assign({1, 42, "hello", "world"});

    // Invoke the second function
    f2(v);
} 
```

由于所有调度程序都有类型`dispatcher_type`，因此您可以轻松地**将它们放入容器中**。但是，您必须注意这样一个事实，即尝试使用*错误数量的参数*调用函数只会在*运行时*`std::vector<>`被检测到（在编译时不可能知道一个包含多少元素）。因此，必须采取适当的措施。

* * *

正如所承诺的，我现在将稍微修改此解决方案以使用`boost::any`而不是`boost::variant`. 优点是由于`boost::any`可以保存*任何*值，因此**无需**指定可用作函数参数的可能类型列表。

虽然辅助机制没有改变，但核心调度程序类模板必须修改如下：

```
#include <vector>
#include <functional>
#include <boost/any.hpp>

using namespace std;
using boost::any;

//=============================================================================
// DISPATCHER IMPLEMENTATION

template<typename R, typename... Args>
struct dispatcher
{

    template<typename F>
    dispatcher(F f) : _f(f) { }

    // The call operator which performs the dispatch
    R operator () (vector<any> const& v)
    {
        if (v.size() != sizeof...(Args))
        {
            // Wrong number of arguments provided!
            return false;
        }

        // Delegates to internal function call: needed for deducing
        // a sequence of integers to be used for unpacking.
        index_range<0, sizeof...(Args)> indexes;
        return do_call(v, indexes);
    }

private:

    // The heart of the dispatching mechanism
    template<size_t... Is>
    R do_call(vector<any> const& v, index_list<Is...> indexes)
    {
        return _f((get_ith<Args>(v, Is))...);
    }

    // Helper function that extracts a typed value from the variant.
    template<typename T>
    T get_ith(vector<any> const& v, size_t i)
    {
        return boost::any_cast<T>(v[i]);
    }

    // Wrapper that holds the function to be invoked.
    function<R(Args...)> _f;
};

// Helper function
template<typename R, typename... Args>
function<R (vector<any> const&)> get_dispatcher(R (*f)(Args...))
{
    dispatcher<R, Args...> d(f);
    return d;
} 
```

如您所见，`VT`模板参数已经消失。特别是，可以在`get_dispatcher`不显式指定任何模板参数的情况下调用。使用我们为基于 - 的解决方案定义的相同测试函数`variant`，您将如何调整`main()`例程：

```
int main()
{
    // Helper type definition
    typedef function<bool (vector<any>)> dispatcher_type;

    // Get a caller for the first function
    dispatcher_type f1 = get_dispatcher(test1);

    // Get a caller for the second function
    dispatcher_type f2 = get_dispatcher(test2);
    // Prepare arguments for the first function

    vector<any> v = {string("hello"), 3.14};

    // Invoke the first function
    f1(v);

    // Prepare arguments for the second function
    v.assign({1, 42, string("hello"), string("world")});

    // Invoke the second function
    f2(v);
} 
```

唯一的缺点是`boost::any`你不能显式地分配字符串文字，因为字符串文字是 type `char []`，并且数组不能用于初始化 type 的对象`any`：

```
any a = "hello"; // ERROR! 
```

因此，您必须将它们包装成`string`对象，或者将它们显式转换为指向的指针`char const*`：

```
any a = string("hello"); // OK
any b = (char const*)"hello"; // OK 
```

如果这对您来说不是一个大问题，那么最好选择第二种解决方案。

# python-2.7 - 错误的 HTTP 状态代码：422

> ID：14661788
> 
> 赞同：-3
> 
> 时间：2013-02-02T12:13:16.873
> 
> 标签：python-2.7, tornado

我正在使用 Tornado 编写一个 REST API

试图使用

```
raise tornado.web.HTTPError(422) 
```

得到这个错误

```
Bad HTTP status code: 422 
```

请帮忙解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:26:42.160

web.py 的来源如下：

```
if e.status_code not in httplib.responses:
   logging.error("Bad HTTP status code: %d", e.status_code)
   self.send_error(500) 
```

我们是否应该怀疑 422 不被视为龙卷风的适当状态？

# sqlite - SQLite FTS 示例不起作用

> ID：14661790
> 
> 赞同：5
> 
> 时间：2013-02-02T12:13:33.023
> 
> 标签：sqlite, fts3, fts4

我已经下载了最新的 SQLite 3.7.15.2 shell (Win32) 并尝试完全按照[http://sqlite.org/fts3.html#section_3中的内容执行 FTS 示例之一](http://sqlite.org/fts3.html#section_3)

```
-- Virtual table declaration
CREATE VIRTUAL TABLE docs USING fts3();

-- Virtual table data
INSERT INTO docs(docid, content) VALUES(1, 'a database is a software system');
INSERT INTO docs(docid, content) VALUES(2, 'sqlite is a software system');
INSERT INTO docs(docid, content) VALUES(3, 'sqlite is a database');

-- Return the set of documents that contain the term "sqlite", and the
-- term "database". This query will return the document with docid 3 only.
SELECT * FROM docs WHERE docs MATCH 'sqlite AND database'; 
```

但尽管最后一条评论 SELECT 导致空集。它是 SQLite 中的错误还是只是过时的文档？（以及正确的语法是什么？）。

对我来说最重要的是那个查询

```
SELECT * FROM docs WHERE docs MATCH '(database OR sqlite) NEAR/5 system'; 
```

也不起作用，我在我的应用程序中需要那种类型的查询。有没有其他方法可以编写它以便它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T21:05:40.210

文档中的示例使用[增强的查询语法](http://sqlite.org/fts3.html#section_3_1)。检查`PRAGMA compile_options;`包括`ENABLE_FTS3_PARENTHESIS`.

您的`NEAR`查询不起作用不是编译选项的问题：

```
> SELECT * FROM docs WHERE docs MATCH '(database OR sqlite) NEAR/5 system';
Error: malformed MATCH expression: [(database OR sqlite) NEAR/5 system] 
```

问题在于，根据文档，`NEAR`它仅适用于基本搜索表达式：

> NEAR 查询是通过在两个短语、术语或前缀查询之间放置关键字“NEAR”来指定的。

所以你必须相应地重写你的搜索表达式：

```
> SELECT * FROM docs WHERE docs MATCH '(database NEAR/5 system) OR (sqlite NEAR/5 system)';
a database is a software system
sqlite is a software system 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T14:36:30.910

我不知道它是文档还是 SQLite 的错误，但这里有一些替代方案：

**对于`AND`查询**

不起作用：

```
select * from docs where docs match 'sqlite AND database'; 
```

作品（使用隐含`AND`）：

```
select * from docs where docs match 'sqlite database'; 
```

**`OR`似乎工作：**

```
select * from docs where docs match 'sqlite OR database'; 
```

**对于`OR`+`NEAR`查询：**

不工作：

```
SELECT * FROM docs WHERE docs MATCH '(database OR sqlite) NEAR/5 system'; 
```

作品：

```
SELECT * FROM docs WHERE docs MATCH 'database NEAR/5 system'
UNION
SELECT * FROM docs WHERE docs MATCH 'sqlite NEAR/5 system' 
```

**编辑：对于评论中提到的表格** `(word11 OR word12 OR word13) NEAR/2 (word21 OR word22 OR word23) NEAR/2 (word31 OR word32 OR word33`。这是我能做的最好的是将所有组合与一个 UNION 放在一起：

```
SELECT * FROM docs WHERE docs MATCH 'word11 NEAR/2 word21 NEAR/2 word31'
UNION
SELECT * FROM docs WHERE docs MATCH 'word11 NEAR/2 word22 NEAR/2 word32'
UNION
SELECT * FROM docs WHERE docs MATCH 'word11 NEAR/2 word23 NEAR/2 word33'
UNION
SELECT * FROM docs WHERE docs MATCH 'word12 NEAR/2 word21 NEAR/2 word31'
... 
```

以上当然会创建大量的 SQL。如果您的单词相似，只是结尾不同，则可以使用通配符：

```
SELECT * FROM docs WHERE docs MATCH 'word1* NEAR/2 word2* NEAR/2 word3*'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-20T22:53:39.470

根据文档（[https://www.sqlite.org/fts3.html](https://www.sqlite.org/fts3.html)），默认情况下不支持括号。

查看第***2 部分。编译和启用 FTS3 和 FTS4***。

# .net - 如何从提供 json 输出的 dot net webservices 中检索值？

> ID：14661793
> 
> 赞同：0
> 
> 时间：2013-02-02T12:13:44.027
> 
> 标签：.net, ios

在我的应用程序中，我使用 SBJson 来解析值。Web 服务是在 dot net 中开发的。使用 php web 服务，代码工作得很好，但使用 dot net web 服务，这没有显示响应值。代码中没有错误、异常或警告。

这是 Web 服务的 JSON 输出：

> { "Head":[ { "id":"0","msg":"用户名或密码不匹配"} ]}

用户名密码在这里是错误的，但我的代码甚至没有返回任何错误的值。

这是我的代码：

```
NSString *post = [NSString stringWithFormat:@"key=%@&username=%@&password=%@",key.text,[txtUsername text],[txtPassword text]];
NSLog(@"PostData: %@",post);

NSURL *url = [NSURL URLWithString:@"http://jabdcdfddfsd.aspx"];

NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSLog(@"%@", postData);

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSLog(@"%@",postLength);
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

NSLog(@"%@",request);
NSError *error = [[NSError alloc] init];
NSHTTPURLResponse *response = nil;
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSLog(@"%@",response);

NSLog(@"Response code: %d", [response statusCode]);
if ([response statusCode] >=200 && [response statusCode] <300)
{
    NSString *responseData = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"Response ==> %@", responseData) 
```

帮帮我。responseData 没有打印任何内容。我的代码有任何问题，或者问题出在另一端，我的意思是在 dotnet Web 服务中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T21:55:51.290

我认为如果代码在旧的 php web 服务上运行良好，你应该仔细看看你的 .Net web 服务。它很可能在某些方面有所不同。尝试使用[Chrome Advanced REST 客户端](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo)之类的工具来查看每个 Web 服务的响应方式。

# html - 响应式设计：为什么 css 不响应手机屏幕尺寸？

> ID：14661803
> 
> 赞同：0
> 
> 时间：2013-02-02T12:14:39.120
> 
> 标签：html, css, responsive-design, media-queries, skeleton-css-boilerplate

我正在使用响应式 CSS 框架 Skeleton，由于某种原因，当屏幕尺寸为移动宽度时，css 没有响应移动媒体查询。

它正在响应平板媒体查询，但在屏幕进入移动设备尺寸后，它会恢复为标准 CSS 宽度。

这是我正在使用的实时站点：

[http://fine-grain-2.myshopify.com/](http://fine-grain-2.myshopify.com/)

这是我正在使用的 HTML：

```
<div class="container">
    <div class="one column alpha">One</div>
    <div class="eleven columns omega">Eleven</div>
    <div class="two columns alpha">Two</div>
    <div class="ten columns omega">Ten</div>
</div> 
```

这是移动媒体查询 CSS：

```
/*  #Mobile (Portrait) 
================================================== */

    /* Note: Design for a width of 320px */

    @media only screen and (max-width: 767px) {
        .container { width: 300px; }
        .columns, .column { margin: 0; }

        .container .one.column,
        .container .one.columns,
        .container .two.columns,
        .container .three.columns,
        .container .four.columns,
        .container .five.columns,
        .container .six.columns,
        .container .seven.columns,
        .container .eight.columns,
        .container .nine.columns,
        .container .ten.columns,
        .container .eleven.columns,
        .container .twelve.columns,
        .container .two-thirds.column  { width: 300px; }

        /* Offsets */   
        .container .offset-by-one,              
        .container .offset-by-two,                  
        .container .offset-by-three,                
        .container .offset-by-four,                     
        .container .offset-by-five,                     
        .container .offset-by-six,                  
        .container .offset-by-seven,                
        .container .offset-by-eight,                
        .container .offset-by-nine,                     
        .container .offset-by-ten,                  
        .container .offset-by-eleven,                           
        .container .offset-by-fifteen { padding-left: 0; }           

    }    

/* #Mobile (Landscape)
================================================== */

    /* Note: Design for a width of 480px */

    @media only screen and (min-width: 480px) and (max-width: 767px) {
        .container { width: 420px; }
        .columns, .column { margin: 0; }

        .container .one.column,
        .container .one.columns,
        .container .two.columns,
        .container .three.columns,
        .container .four.columns,
        .container .five.columns,
        .container .six.columns,
        .container .seven.columns,
        .container .eight.columns,
        .container .nine.columns,
        .container .ten.columns,
        .container .eleven.columns,
        .container .twelve.columns,
        .container .one-third.column, 
        .container .two-thirds.column { width: 420px; }
    } 
```

这是正常工作的平板电脑媒体查询 CSS：

```
 /* Note: Design for a width of 768px */

@media only screen and (min-width: 768px) and (max-width: 959px) {
    .container { width: 768px; }
    .container .column, 
    .container .columns { margin-left: 10px; margin-right: 10px;  }
    .column.alpha, .columns.alpha               { margin-left: 0; margin-right: 10px; }
    .column.omega, .columns.omega               { margin-right: 0; margin-left: 10px; }

    .container .one-third.column                { width: 236px; }
    .container .two-thirds.column               { width: 492px; }       

    /*****************************
        12 Column
        ((768/12) - 20) * 1 = 44
    *****************************/

    .container .one.column                   { width: 44px;  }
    .container .two.columns                  { width: 108px; }
    .container .three.columns                { width: 172px; }
    .container .four.columns                 { width: 236px; }
    .container .five.columns                 { width: 300px; }
    .container .six.columns                  { width: 364px; }
    .container .seven.columns                { width: 428px; }   
    .container .eight.columns                { width: 492px; }
    .container .nine.columns                 { width: 556px; }
    .container .ten.columns                  { width: 620px; }   
    .container .eleven.columns               { width: 684px; }   
    .container .twelve.columns               { width: 748px; }

    /* Offsets */   
    .container .offset-by-one                { margin-left: 64px;  }
    .container .offset-by-two                { margin-left: 128px; }
    .container .offset-by-three              { margin-left: 192px; }
    .container .offset-by-four               { margin-left: 256px; }
    .container .offset-by-five               { margin-left: 320px; }
    .container .offset-by-six                { margin-left: 384px; }
    .container .offset-by-seven              { margin-left: 448px; }
    .container .offset-by-eight              { margin-left: 512px; }
    .container .offset-by-nine               { margin-left: 576px; }
    .container .offset-by-ten                { margin-left: 640px; }
    .container .offset-by-eleven             { margin-left: 704px; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T12:42:23.700

I notice in the skeleton.css on your live site, the media query:

```
@media only screen and (min-width: 768px) and (max-width: 959px) { .... 
```

does not have a closing `}`.

I hacked it in Chrome using a local copy of the css and it seemed to fix it for me. What do you reckon?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:24:20.163

移动设备的默认媒体查询比您提供的要小。您是否尝试针对您知道适合这些宽度量的特定移动设备？如果不是这里是针对 iphone 和其他常用智能手机的代码：

```
 /* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
} 
```

这是一篇关于媒体查询和更多针对其他设备的代码片段的文章的链接，其中包括一个特别有趣的仅针对 iphone4 而不是其他智能手机的文章： http: [//css-tricks.com/snippets/css/media-标准设备查询/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# list - 从 LISP 的列表中删除或

> ID：14661806
> 
> 赞同：0
> 
> 时间：2013-02-02T12:15:30.407
> 
> 标签：list, lisp

我必须这样做：

```
(or a w (or f r t) r (not p) (or (not p) a))

==> (a w f r t r (not p) (not p) a) 
```

我已经完成了这个功能：

```
(defun remove-or (x)
  (cond ((null x) x)
    ((atom x) x)
    ((and (listp x) (eq (first x) 'or)) (remove-or (cdr x)))
    (T (cons (remove-or (first x))
             (remove-or (rest x)))))) 
```

但结果是：

```
(or a w (or f r t) r (not p) (or (not p) a))

==> (a w (f r t) r (not p) ((not p) a)) 
```

如何删除“（）”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:14:09.333

您需要提前检查或子列表，例如 '((or ...) ...)，以便您可以将其转换为 '(... ...)。

它的条件很简单：

```
(and (listp lst) (listp (first lst))
     (eq (first (first lst)) 'or)) 
```

还有变压器：

```
(append (remove-or (rest (first lst)))
        (remove-or (rest lst))) 
```

因此，这将我们带到了您的函数，其中第三个条件分支略有修改：

```
(defun remove-or (lst)
  (cond ((null lst) lst)
        ((atom lst) lst)
        ((and (listp lst) (listp (first lst))
              (eq (first (first lst)) 'or))
         (append (remove-or (rest (first lst)))
                 (remove-or (rest lst))))
        (t (cons (remove-or (first lst))
                 (remove-or (rest lst)))))) 
```

但是这个函数不会处理一种特殊情况：列表最开始的 or ：（**OR** ab（或（或 cd）e））。但是有一个额外的条件分支，像`((and (listp x) (eq (first x) 'or)) (remove-or (cdr x)))`我们将删除`or`的 s 也像变量一样：（ab**或**c**或**）。

所以这种情况必须分开处理，例如：

```
(defun remove-or-head (lst)
   (remove-or (if (and (listp lst) (eq (first lst) 'or))
                  (rest lst)
                  lst)) 
```

将它们与隐藏的递归函数放在一起：

```
(defun remove-or (lst)
  (labels ((remove-or-rec (lst)
             (cond ((null lst) lst)
                   ((atom lst) lst)
                   ((and (listp lst) (listp (first lst))
                         (eq (first (first lst)) 'or))
                    (append (remove-or-rec (rest (first lst)))
                            (remove-or-rec (rest lst))))
                   (t (cons (remove-or-rec (first lst))
                          (remove-or-rec (rest lst)))))))
    (remove-or-rec (if (and (listp lst) (eq 'or (first lst)))
                       (rest lst)
                       lst)))) 
```

# json - JSON4S未知错误

> ID：14661811
> 
> 赞同：7
> 
> 时间：2013-02-02T12:15:59.777
> 
> 标签：json, scala, jackson

我试图让 json4s 提取一些东西，但我得到一个“未知错误”

我的代码如下所示：

```
import org.json4s._
import org.json4s.jackson.JsonMethods._ 
implicit val formats = org.json4s.DefaultFormats

case class Person(name: String, age: Int)
val json = """{"name":"joe","age":15}"""

print(parse(json).extract[Person]) 
```

错误路径：

```
org.json4s.MappingException: unknown error
    at org.json4s.Extraction$.extract(Extraction.scala:50)
    at org.json4s.ExtractableJsonAstNode.extract(ExtractableJsonAstNode.scala:21)
    at Main$$anon$1.<init>(test.scala:8)
    at Main$.main(test.scala:1)
    at Main.main(test.scala)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at scala.tools.nsc.util.ScalaClassLoader$$anonfun$run$1.apply(ScalaClassLoader.scala:78)
    at scala.tools.nsc.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:24)
    at scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.asContext(ScalaClassLoader.scala:88)
    at scala.tools.nsc.util.ScalaClassLoader$class.run(ScalaClassLoader.scala:78)
    at scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.run(ScalaClassLoader.scala:101)
    at scala.tools.nsc.ObjectRunner$.run(ObjectRunner.scala:33)
    at scala.tools.nsc.ObjectRunner$.runAndCatch(ObjectRunner.scala:40)
    at scala.tools.nsc.ScriptRunner.scala$tools$nsc$ScriptRunner$$runCompiled(ScriptRunner.scala:171)
    at scala.tools.nsc.ScriptRunner$$anonfun$runScript$1.apply(ScriptRunner.scala:188)
    at scala.tools.nsc.ScriptRunner$$anonfun$runScript$1.apply(ScriptRunner.scala:188)
    at scala.tools.nsc.ScriptRunner$$anonfun$withCompiledScript$1.apply$mcZ$sp(ScriptRunner.scala:157)
    at scala.tools.nsc.ScriptRunner$$anonfun$withCompiledScript$1.apply(ScriptRunner.scala:131)
    at scala.tools.nsc.ScriptRunner$$anonfun$withCompiledScript$1.apply(ScriptRunner.scala:131)
    at scala.tools.nsc.util.package$.waitingForThreads(package.scala:26)
    at scala.tools.nsc.ScriptRunner.withCompiledScript(ScriptRunner.scala:130)
    at scala.tools.nsc.ScriptRunner.runScript(ScriptRunner.scala:188)
    at scala.tools.nsc.ScriptRunner.runScriptAndCatch(ScriptRunner.scala:201)
    at scala.tools.nsc.MainGenericRunner.runTarget$1(MainGenericRunner.scala:58)
    at scala.tools.nsc.MainGenericRunner.process(MainGenericRunner.scala:80)
    at scala.tools.nsc.MainGenericRunner$.main(MainGenericRunner.scala:89)
    at scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.NoSuchFieldException: MODULE$
    at java.lang.Class.getField(Class.java:1520)
    at org.json4s.Meta$$anonfun$mappingOf$1$$anonfun$8.apply(Meta.scala:208)
    at org.json4s.Meta$$anonfun$mappingOf$1.apply(Meta.scala:207)
    at org.json4s.Meta$$anonfun$mappingOf$1.apply(Meta.scala:195)
    at org.json4s.Meta$Memo.memoize(Meta.scala:240)
    at org.json4s.Meta$.mappingOf(Meta.scala:195)
    at org.json4s.Extraction$.mkMapping$1(Extraction.scala:207)
    at org.json4s.Extraction$.org$json4s$Extraction$$extract0(Extraction.scala:214)
    at org.json4s.Extraction$.extract(Extraction.scala:47)
    ... 34 more 
```

我使用杰克逊解析器 2.1.1 和 json4s 2.9.2:3.1.0 运行 SCALA 2.9.2

在我去“json4s”之前，我直接尝试了杰克逊，甚至没有提供用于提取的示例，所以我认为这里有些东西是关闭的，但不知道从哪里开始寻找。

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-31T18:11:00.300

实际上，您放置案例类代码的位置有所不同。考虑两个例子：

```
class SomeServlet {
 def someMethod(json: String) = parse(json).extract[Person]
 case class Person(name: String, age: Int)
} 
```

在这种情况下，类 Person 将具有 SomeServlet 类型的隐式字段（如 Java 非静态内部类），因此不会对应于给定的 JSON。这就是为什么你会得到一个例外。现在看第二个例子：

```
class SomeServlet {
 def someMethod(json: String) = parse(json).extract[Person]
}

case class Person(name: String, age: Int) 
```

在第二个示例中，Person 类是完全独立的，因此没有隐式字段。所以它应该工作。至少对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T15:43:56.263

同样的问题。问题是你在哪里定义你的案例类！

示例 JSON 输入

```
$.ajax({
         type: 'POST',
         url: '',
         contentType: 'text/plain',
         data:    JSON.stringify(
         {"subject":emailTitle,"body":emailMessage.join('\n')}
         ),
         success: function(){
         }
       })    

import org.json4s._    
import org.scalatra.json.JacksonJsonSupport    
class EmailServlet extends ScalatraServlet {    
  post("/contact") {    
    val emailObj =parse(request.body).extract[EmailMessage] 
    SampleEmailService.sendEmail(    
    Email(emailObj.subject , emailObj.body)    
   )    
"ok"    
} 
```

}

```
//Outside Servlet definition    
case class EmailMessage(subject:String,body:String) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:38:59.893

我没有尝试过，但常见问题部分@ [https://github.com/json4s/json4s](https://github.com/json4s/json4s)提到：

“提取不适用于 REPL 中定义的类。使用 scalac 编译案例类定义并将其导入 REPL。”

# c - TCP C 客户端不发送但 telnet 到服务器发送

> ID：14661819
> 
> 赞同：0
> 
> 时间：2013-02-02T12:17:30.357
> 
> 标签：c, tcp

我制作了一个简单的服务器，当收到消息和消息时，它将打印到终端。我制作的客户端只是在我远程登录时发送消息（不接收）并将消息发送到服务器，它工作得很好，并且准确地打印了我发送的内容。但是，当我编写在其下方找到的 C 客户端代码时，就好像没有发送任何内容一样。

这是我使用 -wall -wextra -pedantic 对以下代码的编译输出

```
 ./client.c: In function ‘main’:
./client.c:17:4: warning: implicit declaration of function ‘bzero’ [-Wimplicit-function-declaration]
./client.c:19:4: warning: implicit declaration of function ‘inet_addr’ [-Wimplicit-function-declaration]
./client.c:28:2: warning: implicit declaration of function ‘strlen’ [-Wimplicit-function-declaration]
./client.c:28:41: warning: incompatible implicit declaration of built-in function ‘strlen’ [enabled by default]
./client.c:22:8: warning: unused variable ‘val’ [-Wunused-variable]
./client.c:10:15: warning: unused variable ‘n’ [-Wunused-variable]
./client.c:8:14: warning: unused parameter ‘argc’ [-Wunused-parameter]
./client.c:8:26: warning: unused parameter ‘argv’ [-Wunused-parameter]
soup@soup-XPS-8300:/home/c_dev/p2pcrypt_server/v0.1.0/src/tool_tests/libev 
```

-

```
/* Sample TCP client */

#include <sys/socket.h>
#include <netinet/in.h>
#include <stdio.h>

int main(int argc, char**argv)
{
   int sockfd,n;
   struct sockaddr_in servaddr;
   char * sendline;
   sendline = "hello";

   sockfd=socket(AF_INET,SOCK_STREAM,0);

   bzero(&servaddr,sizeof(servaddr));
   servaddr.sin_family = AF_INET;
   servaddr.sin_addr.s_addr=inet_addr("127.0.0.1");
   servaddr.sin_port=htons(8018);

    int connect_status = connect(sockfd, (struct sockaddr *)&servaddr, sizeof(servaddr));
    printf("%d\n", connect_status);

    int send_status = send(sockfd,sendline,strlen(sendline),0);
    printf("%d\n", send_status);

    printf("END\n");
    return 0;
} 
```

更新的代码 Connect 返回“0”（成功）并发送返回“5”（我认为这就是它发送的成功字符数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:56:38.573

这是我这边成功运行的代码，似乎需要 \r\n 以及所有被指出的好建议。谢谢小伙伴们！

```
/* Sample TCP client */

#include <sys/socket.h>
#include <netinet/in.h>
#include <stdio.h>

int main(int argc, char**argv)
{
   int sockfd,n;
   struct sockaddr_in servaddr;
   char * sendline;
   sendline = "hellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellohellolohellohellohellohellohellohellohellohellohellolohellohellohellohellohellohellohellohellohellolohellohellohellohellohellohellohellohellohellolo\r\n";

   sockfd=socket(AF_INET,SOCK_STREAM,0);

   memset(&servaddr, 0, sizeof(servaddr));
   servaddr.sin_family = AF_INET;
   servaddr.sin_addr.s_addr=inet_addr("127.0.0.1");
   servaddr.sin_port=htons(8018);

    int connect_status = connect(sockfd, (struct sockaddr *)&servaddr, sizeof(servaddr));
    printf("%d\n", connect_status);

    int send_status = send(sockfd,sendline,strlen(sendline),0);
    printf("%d\n", send_status);

    printf("END\n");
    return 0;
} 
```

# java - 来自 Adwhirl 的 Admob：没有足够的空间来展示广告！想要: 480, 75, 有: 480, 0

> ID：14661820
> 
> 赞同：2
> 
> 时间：2013-02-02T12:17:36.913
> 
> 标签：java, android, admob, haxe, adwhirl

我四处搜索，似乎无法找到有效解决此问题的答案。

我得到的错误是“没有足够的空间来展示广告！想要：480、75，有：480、0”

似乎出于某种原因，我的广告没有可用的高度。

这在 Haxe NME 上运行，我的手机是带有 Android 4.0.3 的 HTC One S (540x960)

这是Java代码：

```
public class AdWhirl
{
public static RelativeLayout adLayout;
public static GameActivity activity;
public static String code;

public static void init(String code)
{
    AdWhirl.code = code;
    activity = GameActivity.getInstance();

    activity.runOnUiThread(new Runnable() 
    {
        public void run() 
        {
            adLayout = new RelativeLayout(activity);

            //Nothing works till this is set.
            AdWhirlManager.setConfigExpireTimeout(1000 * 60 * 5);

            RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); 
            ViewGroup view = (ViewGroup) activity.getWindow().getDecorView();
            ViewGroup content = (ViewGroup) view.getChildAt(0);
            content.addView(adLayout, p);
        }
    });
}

public static void showAd(final int position)
{
    if(activity == null)
    {
        return;
    }

    activity.runOnUiThread(new Runnable() 
    {
        public void run() 
        {
            AdWhirlLayout l = new AdWhirlLayout(activity, code);
            l.setMaxHeight(75); //AdMob asks for this minimum height

            RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 

            //Bottom-Center
            if(position == 0)
            {
                p.addRule(RelativeLayout.CENTER_HORIZONTAL);
                p.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
            }

            //Top-Center
            else
            {
                p.addRule(RelativeLayout.CENTER_HORIZONTAL);
                p.addRule(RelativeLayout.ALIGN_PARENT_TOP);
            }

            adLayout.addView(l, p);
        }
    });
}

public static void hideAd()
{
    if(activity == null)
    {
        return;
    }

    activity.runOnUiThread(new Runnable() 
    {
        public void run() 
        {
            adLayout.removeAllViews();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:18:34.270

在没有看到您的 XML 布局的情况下，我只能冒险猜测，但您会希望您的 XML 看起来像下面这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/main_relative_layout_ad"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".GameActivity" >

    <!-- Note the layout_above attribute, below --> 

    <TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="10dp"
        android:layout_above="@+id/adView"
        android:gravity="center"
        android:text="@string/your_text_here" />

    <!-- Note the alignParentBottom attribute, below --> 

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:adSize="BANNER"
        ads:adUnitId="YOUR_PUBLISHER_ID"
        ads:loadAdOnCreate="true" />

</RelativeLayout> 
```

您可能正在使用的布局是贪婪的，因此会占用所有可用空间。使用`layout_above`将强制布局为广告留出空间。

请记住，支持的第一条规则是 GIGO。错误或不完整的信息会导致错误的答案或根本没有答案，正如在第 198 个人甚至敢于猜测答案之前对您的问题的 197 个观点所证明的那样。

# web-services - 保存时调用 Excel Web 服务

> ID：14661822
> 
> 赞同：0
> 
> 时间：2013-02-02T12:17:51.810
> 
> 标签：web-services, excel, file-upload

我有一个从用户上传批量（主）数据的应用程序。现在，我认为我可以将现有数据下载到 Excel 中，而不是创建表单，用户只需在 Excel 中更改他们需要的内容，然后单击说“保存”或 Excel 工作表上提供的一些按钮，这反过来会调用 Web 服务将此数据加载到应用程序中。（我们已经为此提供了一个 Web 服务 API）。我假设当我将 excel 文件（从服务器）下载给用户时，excel 文件中的宏现在也可供用户使用。关于该方法的任何想法，如果这听起来不错，任何关于我如何修改 excel 文件的建议，以便当用户单击“保存”时它会被上传（而不是保存在用户系统上）。也不确定如何从 Excel 中调用 WS 来执行此操作。提前谢谢，-anish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:15:05.713

虽然您可能需要自己调查一些细节，但我创建了以下库，用于与可能有帮助的 Web 服务交互：

[https://github.com/timhall/Excel-REST](https://github.com/timhall/Excel-REST)

这是一个简单的例子：

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
    Dim Api As New RestClient
    Api.BaseUrl = "http://.../yourapi/"

    Dim Data As New Collection
    ' Add data from sheet...

    ' Create update request to api
    Dim Request As New RestRequest
    Request.Resource = "resource/{id}"
    Request.AddUrlSegment "id", "123"
    Request.Body Data
    Request.Method = httpPUT

    ' Execute the update
    Dim Response As RestResponse
    Set Response = Api.Execute(Request)

    ' Check on what happened
    If Response.StatusCode < 400 Then
        ' Success!
    Else
        ' Uh oh, check on the error
        MsgBox Response.Content
    End If
End Sub 
```

# python - 如何从一个网页切换到另一个网页？

> ID：14661827
> 
> 赞同：0
> 
> 时间：2013-02-02T12:18:52.280
> 
> 标签：python, django, web-services

我想创建一个网页。其中有一个名为 的 go_to 按钮`goto_button`。每当用户按下此按钮时，都会调用新网页并销毁旧网页。为此，我必须在网页上的 html 文件中放置一个按钮。但是如何从一个网页切换到另一个网页？go_to网页地址是*www.kleol.com*

```
 if button is pressed
          go to web-page kleol // how can I do that? 
```

注意：我是 Django 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:34:26.730

如下所示的简单 HTML 标记将起作用：

```
<a href="http://www.kleol.com">Go to Kleol</a> 
```

没有什么是 django 相关的。它是简单的 html。

# objective-c - 从 NSArray 中删除另外几个项目

> ID：14661828
> 
> 赞同：0
> 
> 时间：2013-02-02T12:18:53.427
> 
> 标签：objective-c, arrays, nsarray, range

这是我从 JSON 解析中简化的 NSMutableArray：

```
{
main 
{ 
  array0, 
  array1,
  array2,
  array3,    <----- remove!
  array4,    <----- remove!
  array5,
  array6,    <----- remove!
  array7,    <----- remove!
  array8,
  ...,
}
} 
```

我正在寻找交替删除单个数组项的最佳方法，例如仅数组 2、4、6、8；**另外，如果我需要删除数组 3,4 和 6,7 的 COUPLES，总是交替？**

编辑：这是第一个解决方案，可以删除单个项目：

```
for (int i=0; i < [array count]; i = i+1) {
[array removeObjectAtIndex:i];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:16:08.280

对我来说，听起来您可以轻松地创建一个包含所有索引的索引集，以使用`removeObjectsAtIndexes:`.

您可以从中获取所有偶数（或奇数）索引对象的索引`indexesOfObjectsPassingTest:`。

```
NSMutableArray *array = // Your array where objects should be removed from
NSIndexSet *indexesToRemove = [array indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    return idx%2==0; // index is even (even objects get removed)
}];
[array removeObjectsAtIndexes:indexesToRemove]; 
```

# c# - 添加新项目时 DataGridView 的问题

> ID：14661830
> 
> 赞同：0
> 
> 时间：2013-02-02T12:19:03.083
> 
> 标签：c#, datagridviewcomboboxcell

当我在 datagridview 上保存新项目时，该语句

```
MessageBox.Show(this.tb_aprovacao_admissaoDataGridView.CurrentRow.Cells[0].Value.ToString()); 
```

显示值 -1。我怎样才能改变它以显示真实的身份证号码？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:41:38.893

Depends how you want to get the value.. Do you want to get the value after you click on the cell, or on the click of a button or?

If you want to do it on the cell click event, you can do it like this:

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value != null)
            {
                 MessageBox.Show(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());
            }
        } 
```

To get it with a button:

```
private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(dataGridView1.CurrentCell.Value.ToString());
    } 
```

# ubuntu - cvBlob 示例不工作

> ID：14661831
> 
> 赞同：1
> 
> 时间：2013-02-02T12:19:06.587
> 
> 标签：ubuntu, opencv, compiler-errors, blob

我尝试在**Ubuntu**下的opencv中使用teh cvBlob lib进行blob检测，但我一开始就被阻止了。当我尝试在那里编译示例表单时：

```
#include <cv.h>
#include <highgui.h>
#include <stdio.h>
#include "cvblob.h"

using namespace cvb;
using namespace std;

int main( int argc,char** argv){
    if( argv[1] == NULL ){
        printf("\n Please Provide a valid Argument \n");
        return(0);
    }
    else{
        IplImage* src = cvLoadImage(argv[1],CV_LOAD_IMAGE_UNCHANGED);
        cvNamedWindow("Original",CV_WINDOW_AUTOSIZE);
        cvShowImage("Original",src);
    IplImage src_g;
    cvThreshold(src, src_g,35,255, CV_THRESH_BINARY);  
    IplImage *labelImg=cvCreateImage(cvGetSize(src_g), IPL_DEPTH_LABEL, 1);
    CvBlobs blobs;
    unsigned int result=cvb::CvLabel(src_g, labelImg, blobs);
    cvRenderBlobs(labelImg, blobs, src, src);
    for (CvBlobs::const_iterator it=blobs.begin(); it!=blobs.end(); ++it)
    {
      cout << "Blob #" << it->second->label << ": Area=" << it->second->area << ", Centroid=(" << it->second->centroid.x << ", " << it->second->centroid.y << ")" << endl;
    }
    cvNamedWindow( "Mod", CV_WINDOW_AUTOSIZE );
    cvShowImage( "Mod", src );  
    cvWaitKey(0);
        cvReleaseImage(&src);
        cvReleaseImage(&src_g);
        cvDestroyWindow("Image");
        return(0);
    }

} 
```

我收到此原始错误`unsigned int result=cvb::CvLabel(src_g, labelImg, blobs);`：

```
home/rrg/OpenCV-2.4.3/release/bagDetect/main.cpp: In function ‘int main(int, char**)’:
/home/rrg/OpenCV-2.4.3/release/bagDetect/main.cpp:28: error: functional cast expression list treated as compound expression
/home/rrg/OpenCV-2.4.3/release/bagDetect/main.cpp:28: error: invalid cast from type ‘cvb::CvBlobs’ to type ‘cvb::CvLabel’
make[2]: *** [CMakeFiles/bag.dir/main.o] Error 1
make[1]: *** [CMakeFiles/bag.dir/all] Error 2
make: *** [all] Error 2 
```

我不知道应该是什么问题！

在第一个答案中提到的更改之后，我得到了一个链接器错误:(

```
Linking CXX executable bag
CMakeFiles/bag.dir/main.o: In function `main':
main.cpp:(.text+0x103): undefined reference to `cvLabel'
main.cpp:(.text+0x134): undefined reference to `cvRenderBlobs'
collect2: ld returned 1 exit status 
```

我应该把什么和放在哪里才能识别上面提到的功能？（CMakeList 或 Makefile）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:37:08.087

您的代码中有两个拼写错误，会产生这些错误： - **IplImage** src_g；--> 应该声明为指针 - unsigned int result=cvb:: **CvLabel** (src_g, labelImg, blobs); --> 使用 cvLabel() 代替 CvLabel()

希望这会有所帮助，TL

# javascript - 防止 JavaScript OnClick 绑定的 confirm() 覆盖 VB.NET Click 处理程序

> ID：14661837
> 
> 赞同：0
> 
> 时间：2013-02-02T12:20:28.233
> 
> 标签：javascript, vb.net, event-handling

我必须解决分配给我的一些代码中的问题，问题是在声明中遵循~~此代码`page.init`~~ `else`：

```
Me.SaveChangesButton.Attributes.Add("OnClick", 
    "if (!confirm('Are you sure?')){
        return false;
     } else {
        document.getElementById('SaveChangesButton').disabled = true; 
        document.getElementById('rejectButton').disabled = true;
     }
") 
```

覆盖此代码：

```
Protected Sub SaveChangesButton_Click(ByVal sender As Object, ByVal e As 
System.EventArgs) Handles SaveChangesButton.Click 
```

## 问题[编辑]

1.  ~~如何绑定`confirm()`到按钮以使其不会覆盖我的`handler`功能？~~
2.  ~~在代码中的哪个位置绑定它是最佳实践？~~
3.  ~~如果我删除第二部分`else {document.getElementById('SaveChangesButton').disabled = true; document.getElementById('rejectButton').disabled = true;}`它可以正常工作，但是我应该如何编写它以便它继续执行`SaveChangesButton_Click`，因为我知道只有第二部分覆盖处理程序？~~
4.  **如何执行这两行** `document.getElementById('SaveChangesButton').disabled = true; document.getElementById('rejectButton').disabled = true;` **并仍然执行** `SaveChangesButton_Click` **处理程序而不覆盖它？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:29:23.867

1）您应该使用[OnClientClick](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick%28v=vs.80%29.aspx)：

```
Me.SaveChangesButton.OnClientClick = @"
    if (!confirm('Are you sure?')) {
        return false;
    } else {
        document.getElementById('SaveChangesButton').disabled = true; 
        document.getElementById('rejectButton').disabled = true;
    }" 
```

2）如果你在中绑定`SaveChangesButton_Click`，`Page.Init`我也会设置`OnClientClick`。

3,4）`OnClientClick`在服务器端`OnClick`（当然）之前的火灾（有点）。这使您在触发`OnClick`. 并且`OnClick`不会在禁用的按钮上触发。该怎么办？**延迟禁用您的按钮**。

```
Me.SaveChangesButton.OnClientClick = @"
if (!confirm('Are you sure?')) {
    return false;
} else {
    setTimeout(function(){
        document.getElementById('SaveChangesButton').disabled = true; 
        document.getElementById('rejectButton').disabled = true;
    }, 100);
}" 
```

这实际上使您的问题与此问题[重复](https://stackoverflow.com/questions/14195881/onclientclick-is-stopping-postback)...

# vba - 编译错误：无法分配给返回数组字典对象的 VBA 函数中的数组）

> ID：14661839
> 
> 赞同：0
> 
> 时间：2013-02-02T12:20:40.603
> 
> 标签：vba

我有以下代码：

```
Function MC() As Object()

Dim RulesList(0 To 10) As Object

Dim Rule
Set Rule = CreateObject("Scripting.Dictionary")
Rule.Add "Sender", "Test"
Rule.Add "Subject", "bbb"
Rule.Add "Folder", "ccc"
Rule.Add "MarkRead", False

Set RulesList(0) = Rule

Set Rule = CreateObject("Scripting.Dictionary")
Rule.Add "Sender", "Java"
Rule.Add "Subject", "bbb"
Rule.Add "Folder", "ccc"
Rule.Add "MarkRead", False

Set RulesList(1) = Rule

Set MC = RulesList

End Function 
```

在 Outlook VBA 中。代码抛出

> “编译错误：无法在 Set MC = RulesList 线上分配给数组

有人可以帮我吗？我想创建一个字典对象数组并返回它们。

EDIT: Removing () at the end of function signature and using MC = RulesList in place of Set MC = RulesList works, however, I can't assign this in my calling function anymore, can anyone point me to help on that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:52:13.813

一些注意事项：

```
Function MC() As Object()
    Dim RulesList(0 To 10) As Object

    Set Rule = CreateObject("Scripting.Dictionary")
    Rule.Add "Sender", "Test"
    Rule.Add "Subject", "bbb"
    Rule.Add "Folder", "ccc"
    Rule.Add "MarkRead", False

    Set RulesList(0) = Rule

    Set Rule = CreateObject("Scripting.Dictionary")
    Rule.Add "Sender", "Java"
    Rule.Add "Subject", "bbb"
    Rule.Add "Folder", "ccc"
    Rule.Add "MarkRead", False
    Debug.Print Rule(1)

    Set RulesList(1) = Rule

    MC = RulesList

End Function

Sub getmc()
    Dim abc
    abc = MC
    Set Rule = abc(1)
    a = Rule.items
    Debug.Print a(0)
End Sub 
```

# php - 是“X-Mailer: PHP/ " 在 PHP 中发送邮件所需的标头？

> ID：14661844
> 
> 赞同：22
> 
> 时间：2013-02-02T12:21:32.210
> 
> 标签：php

我在网上找到了很多关于使用 php 发送电子邮件的示例设置标题

```
"X-Mailer: PHP/" . phpversion() 
```

但我发现披露我正在使用 php 及其版本是一种非常糟糕的安全做法。

这是必需的标题吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-02T12:56:41.513

我们来看看生成了什么样的header。

根据[RFC 2076](http://www.ietf.org/rfc/rfc2076.txt)的第 3.4 节，标题“X-Mailer”与其他几个标题一起是非标准的。这基本上意味着任何邮件软件都可以随心所欲地对待它，尤其是添加或忽略它们。不能对发件人使用此类标头的缺失。

我很确定“X-”前缀在 SMTP 消息格式中也表示“非标准标头”，就像它在 HTTP 标头或 mime 类型中一样。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-02T12:23:42.630

我必须达到最小字符数限制。

不 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T12:45:56.090

不是必需的，但您必须验证所有标头，因为某些提供商（hotmail、yahoo、法国的橙色）越来越严格，并且更容易将其标记为垃圾邮件合法电子邮件

# c++ - 对象验证灵活性设计：聚合与组合

> ID：14661845
> 
> 赞同：0
> 
> 时间：2013-02-02T12:21:43.100
> 
> 标签：c++, composition, aggregation

我有一个用 C++ 编写的库，它提供了一个图形编程语言的虚拟机（“VM”）。它使用图像（例如 png 文件）作为其源代码并执行指令。VM 用于不同类型的应用程序（控制台、gui），因此 lib 的目标是尽可能灵活。

问题是：**VM和图像对象之间应该是什么关系**？应该是聚合（VM 构造函数将现有 Image 实例作为参数）还是组合（VM 构造函数将图像文件路径作为字符串参数）？

合成是没有内部对象（图像）就不能存在外部（VM）对象的地方。好吧，在这种情况下，一个VM可以存在，但是没有任何图像它是没有用的（如果没有代码就不能执行任何指令）。所以它应该接受字符串参数并自行创建和销毁图像对象。但是如何验证字符串文件路径（检查是否没有图像或文件不是图像或图像二进制文件已损坏） - 应该在哪里实施此验证？[虚拟机构造函数](http://www.parashift.com/c++-faq-lite/ctors-can-throw.html)，我猜？

另一方面，如果 VM 可以用另一个图像替换一个图像，它可能是聚合（更像是 Java 虚拟机）。但我不确定这是否是一个好方法——VM 必须重置所有图像指针和绑定到图像的数据堆栈。也许每个映像一个 VM 是一种更清洁、更合乎逻辑的解决方案。

在这种情况下你会选择聚合还是组合？感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:39:39.633

以下是在聚合和组合之间做出决定的步骤：

1.  如果您无法处理多个具有依赖关系的对象，请使用组合。
2.  如果您可以处理多个对象，则应根据您的图像是在 VM 对象内部还是外部来决定。如果您在 VM 内部考虑它，请使用组合。如果您认为它在它之外，请使用聚合。

请注意，处理多个对象（使用聚合）非常困难。通常需要类似的东西：

```
struct Env {
   std::vector<I*> v1;
   std::vector<I2*> v2;
};
int push_image() { v1.push_back(new Image); return v1.size()-1; }
int push_vm(int image_id) 
    { v2.push_back(new VM(v1[image_id])); return v2.size()-1; } 
```

# php - 从 mysql 的派生列表中选择单个值

> ID：14661847
> 
> 赞同：0
> 
> 时间：2013-02-02T12:21:54.770
> 
> 标签：php, javascript, html, mysql

我如何才能选择一个值并单击我从数据库中提取的它我正在使用此代码

```
 $result = mysql_query("SELECT * FROM ***");
    if(mysql_num_rows($result)>0)
    {
    echo '<table cellpadding="1" cellspacing="1" border="0">';
    while($row = mysql_fetch_array($result))
       {
       echo '<tr><td><a href="***" target="condition">'.$row['name'].'</a></td></tr>';
        }

     } 
```

现在的问题是，当我单击它时，它正在选择我从 db 检索到的整个列表，我可以从派生列表中只选择一个项目并利用该值显示所选行中项目的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:43:54.757

You can LIMIT your query to Y results starting from the Xst result.

```
SELECT * FROM myTABLE LIMIT X,Y; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:16:58.023

您已经向我们展示了您的服务器端 PHP 代码。您还没有向我们展示您为检测点击事件所做的 .js（浏览器端）脚本。您是否要求有人编写整个 javascript 部分？希望不是。

这将帮助您入门....将动态分配的 div id 添加到您的行中，然后 goolgle javascript 点击事件。

# objective-c - 从 JSON 生成的 NSArray 中选择

> ID：14661850
> 
> 赞同：0
> 
> 时间：2013-02-02T12:22:18.530
> 
> 标签：objective-c, multidimensional-array

我有一个从 JSON 文件创建的 NSArray。
如果我只是将数组打印到控制台，我会得到以下输出：
[单击我](http://supertiko300.funpic.de/stackoverflow/arraycontent.rtf)。

文件第一部分：

```
{
    result =     {
        "attribute_controlled_attached_particles" =         (
                        {
                "attach_to_rootbone" = 0;
                id = 1;
                name = "Partikel 1";
                system = "burningplayer_red";
            },
                        {
                "attach_to_rootbone" = 0;
                id = 2;
                name = "Fliegende Teile";
                system = "burningplayer_flyingbits";
            },
                        {
                "attach_to_rootbone" = 0;
                attachment = muzzle1;
                id = 3;
                name = "Nemesis-Explosion";
                system = "particle_nemesis_burst_blue";
            },
                        {
                "attach_to_rootbone" = 0;
                id = 4;
                name = "Community-Glitzer";
                system = "community_sparkle";
            },
                        {
                "attach_to_rootbone" = 0;
                attachment = halopoint1;
                id = 5;
                name = Heiligenschein;
                system = halopoint;
            },
                        {
                "attach_to_rootbone" = 0;
                id = 6;
                name = "Gr\U00fcnes Konfetti";
                system = "superrare_confetti_green";
            },
                        {
                "attach_to_rootbone" = 0;
                id = 7;
                name = "Lila Konfetti";
                system = "superrare_confetti_purple";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 8;
                name = "Spukende Geister";
                system = "superrare_ghosts";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 9;
                name = "Gr\U00fcne Energieladung";
                system = "superrare_greenenergy";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 10;
                name = "Lila Energieladung";
                system = "superrare_purpleenergy";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 11;
                name = "Kreisendes TF-Logo";
                system = "superrare_circling_tf";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 12;
                name = Fliegenschwarm;
                system = "superrare_flies";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 13;
                name = "Brennende Flammen";
                system = "superrare_burning1";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = unusual;
                id = 14;
                name = "Sengende Flammen";
                system = "superrare_burning2";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 15;
                name = "Gl\U00fchendes Plasma";
                system = "superrare_plasma1";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 16;
                name = "Lebendiges Plasma";
                system = "superrare_plasma2";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 17;
                name = Sonnenstrahlen;
                system = "superrare_beams1";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 18;
                name = "Kreisendes Friedenszeichen";
                system = "superrare_circling_peacesign";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 19;
                name = "Kreisendes Herz";
                system = "superrare_circling_heart";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 20;
                name = "Karten-Briefmarken";
                system = "stamp_spin";
            },
                        {
                "attach_to_rootbone" = 0;
                attachment = "cig_drg_smoke";
                id = 28;
                name = "Eleganter Rauch";
                system = "drg_pipe_smoke";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 29;
                name = "St\U00fcrmischer Sturm";
                system = "unusual_storm";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 30;
                name = "Eisiger Sturm";
                system = "unusual_blizzard";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 31;
                name = "Muttern & Bolzen";
                system = "unusual_orbit_nutsnbolts";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 32;
                name = "Kreisende Planeten";
                system = "unusual_orbit_planets";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 33;
                name = "Kreisendes Feuer";
                system = "unusual_orbit_fire";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 34;
                name = Blubbern;
                system = "unusual_bubbles";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 35;
                name = Rauchen;
                system = "unusual_smoking";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 36;
                name = Dampfen;
                system = "unusual_steaming";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 37;
                name = "Brennende Laterne";
                system = "unusual_orbit_jack_flaming";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 38;
                name = "Bew\U00f6lkter Mond";
                system = "unusual_fullmoon_cloudy";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 39;
                name = "Blubbernder Kessel";
                system = "unusual_bubbles_green";
            },
                        {
                "attach_to_rootbone" = 1;
                id = 40;
                name = "Schauriges, kreisendes Feuer";
                system = "unusual_orbit_fire_dark";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 43;
                name = Messersturm;
                system = "unusual_storm_knives";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 44;
                name = "Nebliger Sch\U00e4del";
                system = "unusual_skull_misty";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 45;
                name = Herbstmond;
                system = "unusual_fullmoon_cloudy_green";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 46;
                name = "Es ist ein Geheimnis f\U00fcr jeden";
                system = "unusual_fullmoon_cloudy_secret";
            },
                        {
                "attach_to_rootbone" = 1;
                attachment = muzzle;
                id = 47;
                name = "St\U00fcrmische 13\. Stunde";
                system = "unusual_storm_spooky";
            }
        );
        attributes =         (
                        {
                "attribute_class" = "mult_dmg";
                defindex = 1;
                "description_format" = "value_is_percentage";
                "description_string" = "%s1%\U00a0geringerer Schaden";
                "effect_type" = negative;
                hidden = 0;
                "max_value" = "0.85";
                "min_value" = "0.95";
                name = "damage penalty";
                "stored_as_integer" = 0;
            },
                        {
                "attribute_class" = "mult_dmg";
                defindex = 2;
                "description_format" = "value_is_percentage";
                "description_string" = "+%s1%\U00a0Schadensbonus";
                "effect_type" = positive;
                hidden = 0;
                "max_value" = "1.1";
                "min_value" = "1.05";
                name = "damage bonus";
                "stored_as_integer" = 0;
            },
                        {
                "attribute_class" = "mult_clipsize";
                defindex = 3;
                "description_format" = "value_is_percentage";
                "description_string" = "%s1%\U00a0Magazingr\U00f6\U00dfe";
                "effect_type" = negative;
                hidden = 0;
                "max_value" = "0.75";
                "min_value" = "0.9";
                name = "clip size penalty";
                "stored_as_integer" = 0;
            },
                        {
                "attribute_class" = "mult_clipsize";
                defindex = 4;
                "description_format" = "value_is_percentage";
                "description_string" = "+%s1%\U00a0Magazingr\U00f6\U00dfe";
                "effect_type" = positive;
                hidden = 0;
                "max_value" = "1.1";
                "min_value" = "1.05";
                name = "clip size bonus";
                "stored_as_integer" = 0;
            },
                        {
                "attribute_class" = "mult_postfiredelay";
                defindex = 5;
                "description_format" = "value_is_inverted_percentage";
                "description_string" = "%s1%\U00a0niedrigere Schussfrequenz";
                "effect_type" = negative;
                hidden = 0;
                "max_value" = "1.25";
                "min_value" = "1.05";
                name = "fire rate penalty";
                "stored_as_integer" = 0;
            },
                        {
                "attribute_class" = "mult_postfiredelay";
                defindex = 6;
                "description_format" = "value_is_inverted_percentage";
                "description_string" = "+%s1%\U00a0h\U00f6here Schussfrequenz";
                "effect_type" = positive;
                hidden = 0;
                "max_value" = "0.9";
                "min_value" = "0.95";
                name = "fire rate bonus";
                "stored_as_integer" = 0;
            },
                        {
                "attribute_class" = "mult_medigun_healrate";
                defindex = 7;
                "description_format" = "value_is_percentage";
                "description_string" = "%s1%\U00a0Heilungsrate";
                "effect_type" = negative;
                hidden = 0;
                "max_value" = "0.8";
                "min_value" = "0.95";
                name = "heal rate penalty";
                "stored_as_integer" = 0;
            },
                        {
                "attribute_class" = "mult_medigun_healrate";
                defindex = 8;
                "description_format" = "value_is_percentage";
                "description_string" = "+%s1%\U00a0Heilungsrate";
                "effect_type" = positive;
                hidden = 0;
                "max_value" = "1.15";
                "min_value" = "1.05";
                name = "heal rate bonus";
                "stored_as_integer" = 0;
            }, 
```

*我的问题是：*如何在索引中获取项目的名称？

我试过了

```
[[[[news objectAtIndex:0]objectForKey:@"items"]objectAtIndex:2] objectForKey:@"name"]; 
```

News 是包含 Data 的数组！

希望你能帮助蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:59:02.223

您似乎有一本由几个字典数组组成的字典。我认为您想要这样的东西...（编辑：就像评论中提到的那样，这取决于您需要从中获取名称的字典数组，因为结果中似乎有几个可供选择）。

```
NSArray *array = [resultDictionary objectForKey:@"attribute_controlled_attached_particles"];

for (NSDictionary *aDictionary in array){
    NSString *name = [aDictionary objectForKey:@"name"];
   // do what you want with the string...
   // could be useful if you for instance need to make an array of all the names
} 
```

或者当然：

```
NSString *someString = [[array objectAtIndex:3] objectForKey:@"name"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:47:22.840

你有一个包含另一个字典的字典（不是一个聪明的主意），所以你应该使用 objectForKey: 选择器在其中获取字典。现在，如果您能够获取字典的键值，那么执行 N 次就不会出现问题。

[] 运算符允许您访问数组/字典的值，它的工作方式类似于 objectAtIndex:/valueForKey: 。这是如何做到的：

```
NSDictionary* result= json[@"result"];
NSArray* acabArray= result[@"attribute_controlled_attached_particles"];
for(NSDictionary* acabDict in acabArray)
{
    NSNumber* num= acabDict[@"attach_to_rootbone"];
    NSString* name= acabDict[@"name"];
    // Obtain also the other key-values in a similar way
    // Do what you want with these values, I suggest to build a custom
    // object to hold all these values, and put every object in a mutable array.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T13:48:26.623

你有一个`NSDictionary`包含一个`NSDictionary`（由“result”`NSArray`键控）包含一个（由“attribute_controlled_attached_pa​​rticles”键控）。要获取此包含数组，您需要执行以下操作：

```
NSArray *resultArray = [[jsonDictionary objectForKey:@"result"] objectForKey:@"attribute_controlled_attached_particles"]; 
```

在 中`resultArray`，您有一个表示新闻项目的有序字典列表。因此，要获取第一个索引的“名称”字符串，请执行

```
NSDictionary *itemDictionary = [resultArray objectAtIndex:0];
NSString *name = [itemDictionary objectForKey:@"name"]; 
```

要枚举所有项目，您需要遍历 resultArray。

# c# - 使用 AudioVideoCaptureDevice 在 Windows Phone 8 上录制 PCM

> ID：14661851
> 
> 赞同：2
> 
> 时间：2013-02-02T12:22:20.417
> 
> 标签：c#, windows-phone-8, windows-phone

以下代码使用 AMR 和 AAC 格式正确地将从我的 Windows Phone 8 设备录制的音频录制到隔离存储中。但是，当我尝试记录 PCM 格式时，应用程序崩溃并出现以下错误：

```
 Value does not fall within the expected range.
Windows.Phone.Media.Capture.AudioVideoCaptureDevice.StartRecordingToStreamAsync(IRandomAccessStream stream)
       at WP8.Classes.AudioCaptureController.<StartRecordingAsync>d__3.MoveNext()
    --- End of stack trace from previous location where exception was thrown ---
       at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
       at WP8.ViewModels.CameraPageViewModel.<capture>d__13.MoveNext()
    --- End of stack trace from previous location where exception was thrown ---
       at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
       at System.Runtime.CompilerServices.TaskAwaiter.GetResult()
       at WP8.ViewModels.CameraPageViewModel.<TakePictureAsync>d__6.MoveNext()
    --- End of stack trace from previous location where exception was thrown ---
       at System.Runtime.CompilerServices.AsyncMethodBuilderCore.<ThrowAsync>b__0(Object state) 
```

我工作的代码如下：

```
private AudioVideoCaptureDevice mic;
    private IRandomAccessStream sst;
    private string path;

    public async Task MicStartAsync()
    {
      mic = await AudioVideoCaptureDevice.OpenForAudioOnlyAsync();
      mic.AudioEncodingFormat = CameraCaptureAudioFormat.Pcm;
    }

    public async Task StartRecordingAsync()
    {
      IsolatedStorageAccess iso = new IsolatedStorageAccess();
      sst = await iso.SetUpFileStreamForSavingAudioAsync("123.pcm");
      await mic.StartRecordingToStreamAsync(sst);
      path = iso.Path;
    }

    public async Task StopRecordingAsync()
    {
      await mic.StopRecordingAsync();
      sst.AsStream().Dispose();
      new MediaPlayerLauncher()
      {
        Media = new Uri(path, UriKind.Relative)
      }.Show();
    }
  }
} 
```

将格式更改为 pcm 以外的任何内容都可以！

更新：由于某种原因，它现在似乎避免了崩溃，但这显示在输出中：

```
A first chance exception of type 'System.ArgumentException' occurred in WP8.DLL
An exception of type 'System.ArgumentException' occurred in WP8.DLL and wasn't handled before a managed/native boundary 
```

（WP8 是我的 dll 的名称）代码在此之后正常运行，只有在我停止录制时才会崩溃，它说录制从未开始并且 AudioVideoCaptureDevice 处于不正确的状态

我也尝试过使用 var`AudioVideoCaptureDevice.SupportedAudioEncodingFormats;`检查 Pcm 是否可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:01:28.050

您可以使用 XNA 框架从麦克风录制（似乎微软在将数据写入文件时在框架中有错误！）

看看这个代码[麦克风示例](http://code.msdn.microsoft.com/wpapps/Microphone-Sample-b2ebe8b6)和这篇文章以保存 wav 格式的数据 将麦克风流保存为来自诺基亚开发人员门户[的 Windows Phone 中的波形格式！](http://www.developer.nokia.com/Community/Wiki/Saving_Microphone_stream_to_wave_format_in_Windows_Phone)

# mysql - 查询以在 MySQL 中返回连接结果

> ID：14661852
> 
> 赞同：0
> 
> 时间：2013-02-02T12:22:24.783
> 
> 标签：mysql

考虑下表（名称 = 关键字）：

```
id keyword
-----------
1  apple mango
2  orange apple
3  fruit beans 
```

我正在搜索能够产生如下结果的查询：

```
apple mango orange apple fruit beans 
```

查询应该只连接每一行结果，并且应该只返回一长串连接的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:24:28.477

试试这个 ：：：

```
Select GROUP_CONCAT(keyword SEPARATOR ' ') from keywords 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:27:06.643

您可以在检索结果后创建一个循环来连接行

# java - Java - 使对象遵循画线

> ID：14661857
> 
> 赞同：0
> 
> 时间：2013-02-02T12:22:57.047
> 
> 标签：java, geometry, awt, line, java-2d

所以我有 4 个点，p1、p2、p3 和 p4。当它们到达太左时，它们会不断地向左移动并回到最右边（窗口宽度 + 100）`(x-100)`。他们的 Y 是随机的。

我还在每个点之间画了一条线，这使得一条流畅的“锯齿状”线在屏幕上移动（有点像 Windows 任务管理器中的 CPU 使用率图表）。

```
 if (p1x < p2x) {
        g.drawLine(p1x, p1y, p2x, p2y);
    }
    if (p2x < p3x) {
        g.drawLine(p2x, p2y, p3x, p3y);
    }
    if (p3x < p4x) {
        g.drawLine(p3x, p3y, p4x, p4y);
    }
    if (p4x < p1x) {
        g.drawLine(p4x, p4y, p1x, p1y);
    } 
```

我希望一个点在窗口中有一个恒定的 X，但是随着 Y 轴上的线移动，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:32:41.367

我认为您可能正在寻找[线性插值](http://en.wikipedia.org/wiki/Linear_interpolation)：

```
// assuming p0x and p0y are the coordinates of the dot, and it needs to
// be drawn somewhere between p3 and p4 (ie, p3x < p0x < p4x :
p0y = p3y + (p4y-p3y) * (p0x-p3x) / (p4x-p3x); 
```

看看维基百科页面，尤其是图纸，如果我对你的问题的解释是错误的，请告诉我。

# c - 在 C 中附加输出文件

> ID：14661859
> 
> 赞同：0
> 
> 时间：2013-02-02T12:23:06.873
> 
> 标签：c

我正在解决有关 USACO 的问题。在这个问题中，我必须将两个字符串作为输入并计算模数 47 的数值。如果值相同，则要打印 GO，否则必须打印 STAY。初始数值将通过取字母表的数值的乘积来计算（A 为 1，Z 为 26），然后使用模数计算最终数字。

我的程序正在编译，没有任何错误，第一种情况也是成功的。但问题在于第二种情况以及我的文件被附加的方式。程序如下：-

```
#include<stdio.h>
#include<malloc.h>
#include<string.h>
#define MAX 6
main()
{
    int cal(char *ptr);
    int a,b;
    char *comet,*group;
    FILE *fptr;
    comet=malloc(6*sizeof(char));
    group=malloc(6*sizeof(char));
    scanf("%s",comet);
    a=cal(comet);
    scanf("%s",group);
    b=cal(group);
    fptr=fopen("ride.out","a+");                (1)
    //fptr=fopen("ride.txt","a+");              (2)
    if(a==b)
        fprintf(fptr,"GO\n");               (3)
        //printf("GO\n");                    (4)
    else
        fprintf(fptr,"STAY\n");              (5)
        //printf("STAY\n");                   (6)   
    fclose(fptr);
    return 0;
}
int cal(char *ptr)
{
    int c,prod=1,mod;
    while(*ptr)
        {
                c=(*ptr++)-'A'+1;
                prod=prod*c;
        }
    mod=prod%47;
    return mod;
} 
```

输出：-

![输出图像](../Images/919d6348174376b083d3459c3a34f403.png)

第一种情况是设置两个字符串：-

第二种情况在错误通知本身中给出。

如果我从 (2) 中删除注释符号并将其放在 (1) 上，那么程序运行正常，因为我可以看到文件的内容，并且它们看起来就像评分系统想要的那样。(1) 的实际陈述没有发生。第 (4) 行和 (6) 行的注释也很好，但第 (1) 行不行。我无法弄清楚这一点。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:28:15.883

首先要注意几点：

*   `main()`：一个*体面的*主要是：

    ```
    int main(void)
    or
    int main(int argc, char *argv[]) 
    ```

*   使用`malloc()`你应该总是检查它是否返回`NULL`，也就是失败。

*   总是`free()`malloc 的对象。
*   每个人都有他/她/自己的编码风格。当涉及到 C 编码时，我发现[这是非常宝贵的。](http://www.kernel.org/doc/Documentation/CodingStyle)使用它作为许多其他人的基础。点是**结构化**代码更容易阅读、调试、解码等。

* * *

有关您的代码的更多详细信息：

### cal() 的签名

您声明的第一行`main`的签名`cal()`。尽管这*可行*，但您可能会将其放在上面`main`，或者将`cal()`函数全部放在上面`main`。

### 最长长度

您有一个`#define MAX 6`从未使用过的定义。如果它最多为六个字符并且您读取一个字符串，您还必须考虑尾随零。

例如来自[cplusplus.com scanf](http://www.cplusplus.com/reference/cstdio/scanf/)：

> > 说明符 's'：任意数量的非空白字符，在找到的第一个空白字符处停止。终止的空字符会自动添加到存储序列的末尾。

因此：

```
#define MAX_LEN_NAME    7
...
comet = malloc(sizeof(char) * MAX_LEN_NAME); 
```

因为学习使用是件好事，所以在这里这样做并`malloc()`没有*错。***但**由于它很简单，您可能希望使用：

```
char comet[MAX_LEN_NAME] = {0};
char group[MAX_LEN_NAME] = {0}; 
```

反而。至少：**如果**使用`malloc`then 检查成功并在完成后释放，否则使用静态数组。

### 更安全的 scanf()

`scanf()`given`"%s"`不会停止读取目标缓冲区的大小 - 它会继续读取数据**并将**其写入内存中的连续地址，直到它读取一个空白。例如：

```
/* data stream = "USACOeRRORbLAHbLAH NOP" */
comet = malloc(szieof(char) * 7);
scanf("%s", buf); 
```

在内存中，我们会：

```
Address (example)
0x00000f           comet[0]
0x000010           comet[1]
0x000011           comet[2]
0x000012           comet[3]
0x000013           comet[4]
0x000014           comet[5]
0x000015           comet[6]
0x000016           comet[7]
0x000017           /* Anything; Here e.g. group starts, or perhaps fptr */
0x000018           /* Anything; */
0x000019           /* Anything; */
... 
```

并且在阅读上面建议的流/字符串时，我们不会读`USACOe`入，但`comet`我们会继续阅读**超出**. `comet`换句话说（可能）覆盖其他变量等。这听起来可能很*愚蠢*，但由于 C 是一种低级语言，这是你必须知道的事情之一。随着你了解更多，你很可能也会学会爱它的力量:)

`maximum length`为了防止这种情况，您可以通过例如使用+来限制读取`[what to read]`。例如：

```
 scanf("%6[A-Z]", comet);
         | |      |
         | |      +------- Write to `comet`
         | +-------------- Read only A to Z
         +---------------- Read maximum 6 entities 
```

### 输入数据

阅读您的预期结果、您的错误、您的`(N)`评论等。听起来您应该有一个输入文件和一个输出文件。

由于您的代码现在依赖于从标准输入读取数据，即`stdin`. 因此，您也使用`scanf()`. 我怀疑您应该[改为从文件中读取](http://www.cplusplus.com/reference/cstdio/fscanf/) `fscanf()`。

所以：类似：

```
FILE *fptr_in;
char *file_data = "ride.in";
int res;
...
if ((fptr_in = fopen(file_data, "r")) == NULL) {
    fprintf(stderr, "Unable to open %s for reading.\n", file_data);
    return 1; /* error code returned by program */
}
if ((res = fscanf(fptr_in, "%6[A-Z]%*[ \n]", comet)) != 1) {
    fprintf(stderr, "Read comet failed. Got %d.\n", res);
    return 2;
}

b = cal(comet);

if ((res = fscanf(fptr_in, "%6[A-Z]%*[ \n]", group)) != 1) {
    fprintf(stderr, "Read group failed. Got %d.\n", res);
    return 2;
}

... 
```

### cal() 函数

首先，命名。假设这是一个项目的开始，最终会产生多个文件和数千行代码。您可能没有名为`cal()`. 学会给函数起个好名字。上面关于编码风格的链接给出了一些观点。恕我直言，在小型项目中也这样做。这是一个很好的练习，可以让你在写大到大的时候更容易。将其命名为`cprod_mod_47()`.

那么`mod`变量（也可能是 c）是多余的。一种替代方法可能是：

```
int cprod_mod_47(char *str)
{
    int prod = 1;

    while (*str)
        prod *= *(str++) - 'A' + 1;

    return prod % 47;
} 
```

* * *

### 一些更一般的建议

编译时使用许多警告和错误选项。例如，如果使用 gcc 说：

```
$ gcc -Wall -Wextra -pedantic -std=c89 -o my_prog my_prog.c 
```

这是巨大的帮助。进一步是使用类似`valgrind`和`gdb`无价的工具。

# c++ - 使用对象方法作为 WinApi WndProc 回调

> ID：14661865
> 
> 赞同：6
> 
> 时间：2013-02-02T12:23:53.190
> 
> 标签：c++, oop, class, winapi

我正在尝试制作一个在父窗口中显示控制台窗口的小类。（你可以想象那里显示聊天或调试信息）
现在，由于不同的实例确实有不同的私有变量（例如消息数组或父窗口），我需要使用非静态方法作为 Windows 事件的回调。
我已经想到了一些方法，我将实际的类实例传递给静态回调函数，然后在其上调用正确的方法，但是在 winAPI 中，一切都是使用完成的`TranslateMessage`，`DispatchMessage`我没有机会使用自己的参数。
我在这里找到了一些代码：[Class method as winAPI callback](https://stackoverflow.com/questions/3725425/class-method-as-winapi-callback)，但我不明白，我认为这不是我所需要的。如果是，那么请给我提供的代码的进一步解释。
我得到的错误：

> **错误**：'LRESULT ( `WindowConsole::`)(HWND__ *, UINT, WPARAM, LPARAM)' 类型的参数不匹配 'LRESULT ( `*`)(HWND__* , UINT, WPARAM, LPARAM)'

我不知道括号中的星号是什么意思，但这是不匹配的。
和代码：

```
class WindowConsole {
   char messages[255][255];
   HWND mainWindow;
   public:
     int width;
     int height;
     inline HWND create(HWND parent);
     inline bool update();
     inline LRESULT CALLBACK WndProc (HWND, UINT, WPARAM, LPARAM);
};

HWND WindowConsole::create(HWND parent) {
    HINSTANCE inst =  GetModuleHandle (0);
    WNDCLASSEX wincl;

    /* The Window structure */
    wincl.hInstance = inst;
    wincl.lpszClassName = "ConsoleClass";
    wincl.lpfnWndProc = this->WndProc;      /* This function is called by windows */
    /* more WNDCLASSEX crap...*/

    mainWindow = CreateWindow (
          /*PARAMS*/
    );
    ShowWindow(mainWindow,1);
    return mainWindow;

}
bool WindowConsole::update() {
   return true;
}
LRESULT CALLBACK WindowConsole::WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam) {
    switch (message)                  /* handle the messages */
    {
           /*EVENT crap*/
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T13:23:37.460

通常是这个订单上的东西：

```
#include <windows.h>

class BaseWindow {

     static LRESULT CALLBACK internal_WndProc(HWND hWnd, int msg, WORD wParam, LONG lParam) {
        BaseWindow *c = (BaseWindow *)GetWindowLong(hWnd,GWLP_USERDATA);

        if (c == NULL)
            return DefWindowProc(hWnd, msg, wParam, lParam);

        return c->WindowProc(hWnd, msg, wParam, lParam);
    }

public:
    virtual int WindowProc(HWND hWnd, int msg, WPARAM wParam, LPARAM lParam) = 0;

    BaseWindow(HINSTANCE instance) {
        WNDCLASS window_class = {0};
        HWND window;
        HMENU my_menu;

        window_class.lpfnWndProc = (WNDPROC)internal_WndProc;
        /* fill in window_class here */
        RegisterClass(&window_class);

        window = CreateWindow(
            "My Application", "Stupidity", 
            WS_OVERLAPPEDWINDOW, 
            CW_USEDEFAULT, CW_USEDEFAULT, 
            CW_USEDEFAULT, CW_USEDEFAULT, 
            NULL, my_menu, instance, NULL);

        // save the address of the class as the Window's USERDATA.
        SetWindowLong(window, GWLP_USERDATA, (long)this);
    }
}; 
```

这样，您就可以从 BaseWindow 派生一个类。在您的派生类中，您提供了一个“WindowProc”，它覆盖了 BaseWindow 中的（纯虚拟）一个。这里的技巧相当简单：因为你不能直接传递参数，你将类的地址存储在窗口的 GWLP_USERDATA 中，然后在窗口 proc 中（尝试）检索它并使用它来调用派生类的 virtual窗口过程

顺便说一句，请注意这是草图，而不是完成的作品（可以这么说）。尽管它应该按原样编译，但结果实际上不会起作用，除非您填写大量不在这里的部分（例如，WNDCLASS 结构的其他字段只是最明显的字段之一）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T13:16:30.367

您链接到的另一个问题仅部分适用。

WindowProc 方法确实需要是静态的。然后在调用 CreateWindowEx 之后立即调用 SetWindowLongPtr，将 GWLP_USERDATA 作为第二个参数，并将**this**作为第三个参数。这将 HWND 与类实例相关联。然后在静态 WindowProc 方法中调用 GetWindowLongPtr（再次使用 GWLP_USERDATA）来获取接收 UI 事件的 WindowConsole 实例。

这一切都在这里详细解释：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff381400(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff381400(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T15:22:12.813

我使用一个简单的解决方案。winproc 是一个模板函数。消息接收器位于 setwindowptr 内。

如果接收者有一个带有消息名称的函数，例如 onpaint ，那么 wm_paint 将包含在消息切换中。

[http://www.thradams.com/codeblog/wndproc.htm](http://www.thradams.com/codeblog/wndproc.htm)

# javascript - JavaScript：以编程方式捕获 YouTube 视频的帧

> ID：14661869
> 
> 赞同：3
> 
> 时间：2013-02-02T12:24:18.867
> 
> 标签：javascript, flash

我可以在 Chrome 中以编程方式捕获 Flash 视频的帧吗？

我问是因为我可以用浏览器外部的像素破坏 YouTube 视频帧（使用 WebGL），我想以编程方式提取那些损坏的帧（例如使用 JavaScript）。

当然，然后我会向 Google 报告该漏洞（并可能获得漏洞现金奖励）。

# apache2 - Apache2 隔离虚拟主机

> ID：14661875
> 
> 赞同：1
> 
> 时间：2013-02-02T12:25:18.903
> 
> 标签：apache2

我想隔离每个“www 子目录”，以便 mysite1.ext 无法访问 mysite2.ext 文件，这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:32:52.477

你必须为此配置你的 virtualHost Apache

像这样

```
 <VirtualHost x.x.x.x:80>
       ServeName www.example.com
       DocumentRoot /path/to/your/virtualroot
       ...
       ... usual stuff ...
       ...
        php_admin_value open_basedir /path/to/your/virtualroot:/some/other/path
 </VirtualHost> 
```

最后一行用于隔离 PHP 以访问其他目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:32:31.847

要在 Apache 中做你想做的事，你会使用 Name Based VirtualHosts。这允许您在一个 IP 地址上配置两个或多个单独的 Web 服务器环境。它看起来像这样。

```
NameVirtualHost *:80

<VirtualHost *:80>
ServerName www.mysite1.ext
ServerAlias domain.ext *.domain.ext
DocumentRoot /www/domain
</VirtualHost>

<VirtualHost *:80>
ServerName www.mysite2.ext
DocumentRoot /www/otherdomain
</VirtualHost> 
```

[您可以在此处](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)阅读有关此配置的更多信息。这将全部进入 Sites.enabled 或 http.conf，具体取决于您的最终阶段配置。

# macos - Mac 上的 Google Chrome 开发者工具键盘快捷键自定义

> ID：14661878
> 
> 赞同：9
> 
> 时间：2013-02-02T12:25:41.860
> 
> 标签：macos, google-chrome, keyboard-shortcuts, customization, developer-tools

我使用 Firefox Firebug 进行调试，但如果我可以自定义键盘快捷键，我会切换到 Google chrome。

我需要每天 1000 次激活和隐藏“开发人员工具 > 检查元素”。试图用一只手输入`CMD`++ ，这是一场`SHIFT`噩梦。`C`我用鼠标导航

扩展“快捷方式管理器”具有有限的内置选项。添加 Javascripts 的能力对我没有帮助，你会从哪里开始这样的任务？

因为“检查元素”在 Mac 菜单中不存在，所以我什至不能以这种方式定位它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-11-30T16:13:22.530

有一种简单的方法可以做到这一点，无需任何附加组件。

要在 Mac 上仅使用 F12 打开 Chrome 开发工具：打开**System Preferences** > **Keyboard**。选中标有“**使用所有 F1、F2 等键作为标准功能键**”的框。

然后转到快捷方式选项卡，然后从侧面菜单中选择**应用程序快捷方式。****通过点击+**按钮创建一个新的快捷方式，然后选择 Google Chrome 作为应用程序。在**菜单标题**输入中，键入**开发人员工具**，然后在**键盘快捷键**输入中简单地键入**F12**（或您自己的首选快捷键） 。

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T09:33:00.257

对于 Mac：`System Preferences > Keyboard > Keyboard Shortcuts tab > Application Shortcuts left-tab >`[加号按钮] 应用程序：Chrome ... 菜单标题：开发者工具（或同等工具）... 键盘快捷键：F12（如果您喜欢 Firebug）

希望这能回答你的问题 :)

编辑：我意识到您指的是“检查元素”，我相信在我的 Chrome 版本上`cmd+opt+C`不是您对`cmd+shift+C`（cmd+opt+c 有那么难吗？）的引用。无论如何，我对在 Chrome 中自定义键命令表示 +1，因为当我尝试浏览选项卡并卡住时，我不喜欢在开发人员工具中使用 cmd+1、2、3 等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-10T20:29:24.543

我能够通过使用“KeyRemap4MacBook”程序解决我的问题[https://pqrs.org/macosx/keyremap4macbook/index.html.en](https://pqrs.org/macosx/keyremap4macbook/index.html.en)

我保留了默认的 Chrome 快捷方式，并用我也使用过的短方式为它们起别名。

为此，我必须单击“杂项和卸载”按钮。然后通过“自定义设置”单击“打开 private.xml”按钮。我这个文件的内容如下所示。

```
<?xml version="1.0"?>
<root>
    <appdef>
        <appname>CHROME</appname>
        <equal>com.google.Chrome</equal>
    </appdef>

    <item>
        <name>CHROMETOFIREFOX</name>
        <appendix>this is to remap chrome inspect element to Command + `</appendix>
        <identifier>private.swap_chrome_to_ff_settings</identifier>
        <only>CHROME</only>
        <autogen>
        __KeyToKey__
        KeyCode::BACKQUOTE, ModifierFlag::COMMAND_L | ModifierFlag::NONE,
        KeyCode::C, ModifierFlag::SHIFT_L | ModifierFlag::COMMAND_L
        </autogen>
    </item>
</root> 
```**

# svn - 撤消上一个 svn 提交？

> ID：14661879
> 
> 赞同：3
> 
> 时间：2013-02-02T12:26:26.140
> 
> 标签：svn

我不小心添加了包含我的文件的错误目录。我没有添加 .cs 文件，而是添加了包含 .class 文件的目录。如何在 svn 中撤消此操作？

# css - CSS：盒子定位和响应

> ID：14661880
> 
> 赞同：0
> 
> 时间：2013-02-02T12:26:25.657
> 
> 标签：css, alignment, responsive-design

在我的几个页面上（目前该网站正在开发中），将显示一些天气信息：[LINK](http://www.golfanatics.de/J3/index.php/component/content/article/182-golfhotels/europa/spanien/23-best-western-hotel-subur-maritim.html) CSS 问题描述：在标题 WETTER 下，您可以看到 4 个框。一个显示今天的天气（HEUTE），下面的三个框显示接下来几天的天气。如您所见，这 3 个小框的总和并不完全等于 100% 的帧宽。此外，uppor 宽框的宽度略有不同。

--> 怎么可能达到以下？a) 当在横向视图中使用网络浏览器/IPAD 时，3 个框加在一起的宽度与上面的宽框完全相同，并且在同一时间 b) 在彼此下方有四个框（页面宽度为 100%）使用 iPhone/Android 浏览页面时。期待您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:31:49.493

我想我已经明白你想要什么了。

我做了一个粗略的演示：http: [//jsfiddle.net/Txjh5/](http://jsfiddle.net/Txjh5/)

使用整体容器来模拟您的框架宽度 - 这有一个最大宽度。这些框的百分比与顶框匹配，但使用边距我在框之间创建了间隙。

```
.last {margin-right: 0;} 
```

删除最后一个框的边距。

媒体查询用于较小的屏幕尺寸以强制每个框为 100% 宽度。

抱歉，如果我误解了这个问题，但请看一下演示，因为它比我能更好地解释事情！

# c# - Combobox.Text 总是返回 Null

> ID：14661881
> 
> 赞同：0
> 
> 时间：2013-02-02T12:26:30.933
> 
> 标签：c#, .net, wpf, combobox

我正在尝试从组合框中获取当前选择的选项，并且尝试通过它获取文本

```
ComboBox.Text

Combobox.SelectedItem() 
```

但`.Text`返回一个空字符串并`SelectedItem()`返回 null

这是关于我如何填充组合框的代码。组合框的值取决于另一个组合框的值。

```
private void cboSite_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
        BackgroundWorker bw = new BackgroundWorker();
        cboPlan.Items.Clear();
        bw.DoWork += new DoWorkEventHandler(bw_cboPlan);
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_cboPlanComplete);
        site = cboSite.SelectedItem.ToString();
       Busy.IsBusy = true;
        Busy.BusyContent = "Loading Products";
        bw.RunWorkerAsync();
    }

    void bw_cboPlan(object sender, DoWorkEventArgs e)
    {
        SqlConnection con = new SqlConnection(Class.GetConnectionString());
        SqlCommand scProduct = new SqlCommand("spSelectProduct", con);
        scProduct.Parameters.Add(new SqlParameter("@Site",site));
        scProduct.CommandType = CommandType.StoredProcedure;

        SqlDataReader readerPortal;
        con.Open();

        readerPortal = scProduct.ExecuteReader();

        while (readerPortal.Read())
        {
            this.Dispatcher.Invoke((Action)delegate(){cboPlan.Items.Add(readerPortal[0]);});
        }
        con.Close();
    }

    void bw_cboPlanComplete(object sender, RunWorkerCompletedEventArgs e)
    {
        cboPlan.SelectedIndex = 0;
        Busy.IsBusy = false;
    } 
```

虽然我可以看到`.Text`组合框中的值，但我无法在代码中使用它们。

编辑：空值由`cboPlan`组合框返回。

这是当它返回 null 的情况下`SelectedItem()`和空字符串的情况下`.Text`

```
if (IsValid())
        {
            BackgroundWorker bw = new BackgroundWorker();
            cboPlan.Items.Clear();
            bw.DoWork += new DoWorkEventHandler(bw_Add);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_AddComplete);
            plan = cboPlan.Text;
            Busy.IsBusy = true;
            Busy.BusyContent = "Sending Request.";
            bw.RunWorkerAsync();
        } 
```

组合框的 XAML。

```
<ComboBox x:Name="cboSite" HorizontalAlignment="Left" Margin="461,52,0,0" VerticalAlignment="Top" Width="174" SelectionChanged="cboSite_SelectionChanged"/>
<ComboBox x:Name="cboPlan" HorizontalAlignment="Left" Margin="395,106,0,0" VerticalAlignment="Top" Width="240" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:43:03.323

**Edit**

Well, you have this in your code:

```
 BackgroundWorker bw = new BackgroundWorker();
  // You will delete all items here!
  cboPlan.Items.Clear();
  bw.DoWork += new DoWorkEventHandler(bw_Add);
  bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_AddComplete);
  // plan is String.Empty because there are no items in the combobox!
  plan = cboPlan.Text;
  Busy.IsBusy = true;
  Busy.BusyContent = "Sending Request.";
  // You will start populating combobox asynchronously here 
  bw.RunWorkerAsync(); 
```

I am not sure what are you trying to do, but if you want to save value of the control, do that before calling `Items.Clear()` function.

**Original answer**

I suggest that you fill List from database in `bw_cboPlan`, and to fill ComboBox in `RunWorkerCompletedEventHandler` callback function:

```
List<String> combovalues = new List<String>();
void bw_cboPlan(object sender, DoWorkEventArgs e)
    {
        SqlConnection con = new SqlConnection(Class.GetConnectionString());
        SqlCommand scProduct = new SqlCommand("spSelectProduct", con);
        scProduct.Parameters.Add(new SqlParameter("@Site",site));
        scProduct.CommandType = CommandType.StoredProcedure;
        SqlDataReader readerPortal;
        con.Open();
        readerPortal = scProduct.ExecuteReader();
        combovalues.Clear();
        while (readerPortal.Read())
        {
             combovalues.Add(readerPortal[0]); // untested
            //this.Dispatcher.Invoke((Action)delegate(){cboPlan.Items.Add(readerPortal[0]);});
        }
        con.Close();
    }

    void bw_cboPlanComplete(object sender, RunWorkerCompletedEventArgs e)
    {
        foreach(var item in combovalues)
            cboPlan.Items.Add(item);
        cboPlan.SelectedIndex = 0;
        Busy.IsBusy = false;
    } 
```

# android - 如何减少android中的内存消耗

> ID：14661890
> 
> 赞同：4
> 
> 时间：2013-02-02T12:27:10.273
> 
> 标签：android, memory-management, out-of-memory

> **可能重复：**
> [Android：将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

我是android领域的新手。我不知道如何减少android中的内存消耗。在我的应用程序中，大量图像是从网络中提取并显示到网格视图中的。运行应用程序时出现“内存不足问题”。

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:36:49.310

**1）**按比例缩小并减小图像的大小

```
/**
 * decodes image and scales it to reduce memory consumption
 * 
 * @param file
 * @param requiredSize
 * @return
 */
public static Bitmap decodeFile(File file, int requiredSize) {
    try {

        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(file), null, o);

        // The new size we want to scale to

        // Find the correct scale value. It should be the power of 2.
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < requiredSize
                    || height_tmp / 2 < requiredSize)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;

        Bitmap bmp = BitmapFactory.decodeStream(new FileInputStream(file),
                null, o2);

        return bmp;

    } catch (FileNotFoundException e) {
    } finally {
    }
    return null;
} 
```

**2)**使用`bitmap.Recycle();`

**3)**用于`System.gc();`向 VM 指示现在是运行垃圾收集器的好时机

# c++ - libgomp.so.1：无法打开共享对象文件

> ID：14661892
> 
> 赞同：3
> 
> 时间：2013-02-02T12:27:34.443
> 
> 标签：c++, compiler-construction, path, shared-libraries, openmp

我在我的 C++ 代码中使用 OpenMP。

libgomp.so.1 存在于我的 lib 文件夹中。我还将其路径添加到 LD_LIBRARY_PATH

仍然在运行时我收到错误消息：*libgomp.so.1：无法打开共享对象文件*

在编译时，我使用 -fopenmp 选项编译我的代码。

知道什么会导致问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T13:19:40.837

为您的程序使用静态链接。在您的情况下，这意味着使用`-fopenmp -static`，并在必要时指定相关`librt.a`和`libgomp.a`库的完整路径。

这解决了您的问题，因为静态链接只是将运行程序所需的所有代码与二进制文件打包在一起。因此，您的目标系统不需要查找任何动态库，即使它们是否存在于目标系统上也没关系。

请注意，静态链接不是灵丹妙药。对于奇怪的硬件模拟器的特殊问题，它应该是一个好方法。然而，总的来说，静态链接有（至少）两个缺点：

*   二进制大小。想象一下，如果您静态链接所有 KDE 程序，那么您的系统上实际上将拥有所有 KDE/QT 库的数百个副本，而如果您使用共享库则可能只有一个副本
*   更新路径。假设人们在图书馆发现了一个安全问题`x`。使用共享库，只要在补丁可用时简单地更新库就足够了。如果您的所有应用程序都是静态链接的，您将不得不等待所有这些开发人员重新链接并重新发布他们的应用程序。

# ios - 如何仅在 touchesMoved 上查找向上滑动

> ID：14661894
> 
> 赞同：2
> 
> 时间：2013-02-02T12:28:17.843
> 
> 标签：ios, objective-c, touch, uigesturerecognizer, touchesmoved

我目前正在使用`touchesMoved`允许用户向上滑动，他们向上滑动的次数越多，增加的数量就越大。我不认为我可以在`UIGestureRecognizer`这里使用 a，因为它不会记录每一个动作 - 它只会记录单次滑动。

这是我当前的代码：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];
    CGPoint gestureEndPoint = [touch locationInView:self.view];

    NSLog(@"START: %@  END: %@", NSStringFromCGPoint(gestureStartPoint), NSStringFromCGPoint(gestureEndPoint));

    if((gestureStartPoint.x - gestureEndPoint.x) < 20 && (gestureStartPoint.x - gestureEndPoint.x) > -20)
    {

        if((gestureStartPoint.y - gestureEndPoint.y) > (gestureStartPoint.x - gestureEndPoint.x))
        {

            if(gestureStartPoint.y > gestureEndPoint.y)
            {

                NSInteger integer =  (NSInteger)(gestureEndPoint.y - gestureStartPoint.y);

                NSString *string = [NSString stringWithFormat:@"%i", integer / 40];

                if([string intValue] && self.lastValue != [string intValue])
                {

                    [self.timer invalidate];

                    [self.updateCounter invalidate];

                    [self.secondsTimer invalidate];

                    self.lastValue = [string integerValue];

                    self.number = self.number + 1;

                    NSString *finalTime = [NSString stringWithFormat:@"%i", self.number];

                    if(self.number == 1)
                        finalTime = [finalTime stringByAppendingString:@" MINUTE"];

                    else
                        finalTime = [finalTime stringByAppendingString:@" MINUTES"];

                    [self.amountOfTime setText:finalTime];

                    lastPoint = gestureEndPoint;

                    NSLog(@"Setting timer for %i", self.number * 60);

                    self.timer = [NSTimer scheduledTimerWithTimeInterval:self.number * 60 target:self  selector:@selector(countdownEnded) userInfo:nil repeats:NO];
                    self.updateCounter = [NSTimer scheduledTimerWithTimeInterval:60 target:self  selector:@selector(updateCounterText) userInfo:nil repeats:YES];

                    CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
                    crossFade.duration = 2.0;
                    crossFade.fromValue = (__bridge id)([self.background.image CGImage]);
                    crossFade.toValue = (__bridge id)([[UIImage imageNamed:@"MainBackground"] CGImage]);
                    crossFade.removedOnCompletion = NO;
                    crossFade.fillMode = kCAFillModeForwards;
                    [self.background.layer addAnimation:crossFade forKey:@"animateContents"];

                }

            }

            else
            {

                if(self.number - 1 >= 0)
                {

                    [self.timer invalidate];

                    [self.updateCounter invalidate];

                    [self.secondsTimer invalidate];

                    self.number = self.number - 1;

                    NSString *finalTime = [NSString stringWithFormat:@"%i", self.number];

                    if(self.number == 1)
                        finalTime = [finalTime stringByAppendingString:@" MINUTE"];

                    else
                        finalTime = [finalTime stringByAppendingString:@" MINUTES"];

                    [self.amountOfTime setText:finalTime];

                    lastPoint = gestureEndPoint;

                    NSLog(@"Setting timer for %i", self.number * 60);

                    self.timer = [NSTimer scheduledTimerWithTimeInterval:self.number * 60 target:self  selector:@selector(countdownEnded) userInfo:nil repeats:NO];
                    self.updateCounter = [NSTimer scheduledTimerWithTimeInterval:60 target:self  selector:@selector(updateCounterText) userInfo:nil repeats:YES];

                }

        else
            self.number = 0;

        }

    }

    }

} 
```

问题是 - 如果您从左到右或从右到左或从上到下滑动，数字会增加。我只希望 if 语句中的位能够拾取从下到上的滑动。我怎样才能做到这一点并消除所有其他滑动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:06:51.650

像这样？

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];
    CGPoint gestureEndPoint = [touch locationInView:self.view];

    int dx = abs(gestureStartPoint.x - gestureEndPoint.x);
    int dy = -1 * (gestureEndPoint.y - gestureStartPoint.y);

    if(dx > 20) {
        // too much left/right, so don't do anything
        return;
    }

    if(dy < 0) {
        // they moved down
        return;
    }

    NSLog(@"Change in Y: %d", dy); // now do something with dy
    // .... 
```

# ruby-on-rails - 每当 gem 命令不按间隔运行时

> ID：14661895
> 
> 赞同：0
> 
> 时间：2013-02-02T12:28:19.420
> 
> 标签：ruby-on-rails, ruby, whenever

在宝石上，我把一切都做好了。并且可以更新 schedule.rb 文件，但不会在每个时间间隔后获取日志。这是代码

这是计划文件

```
every 2.minutes do
 command "echo 'you can use raw cron sytax too'"
 rake "ftp" 
end 
```

这是 lib/tasks/ 中的 ftp.rake 文件

```
require 'net/ftp'
require 'timeout'
require 'pathname'
require 'fileutils'
task :ftp do
    command "echo 'you can use raw cron sytax too'"
    ftp = nil
    f = File.open("/home/hb/demo_haml/log/ftp_transfer.log","w+")    
    f.write("\n#{Time.now}")
    ftp = Net::FTP::new("192.168.x.x")
    ftp.login("demo", "demo")
    ftp.chdir("/home/hd")
    ftp.getbinaryfile("one.conf", "/home/hb/demo_haml/conf/one.conf", 1024)
    ftp.close if ftp
    f.close
end 
```

在此之后，当我开火时，我第一次得到了日志上的时间 `whenever --update-crontab store`

跑步`crontab -l`

```
# Begin Whenever generated tasks for: demo_haml
0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58 * * * * /bin/bash -l -c 'echo '\''you can use raw cron sytax too'\'''

0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58 * * * * /bin/bash -l -c 'cd /home/hb/applications/other_old_apps/Arpit/demo_haml && RAILS_ENV=production bundle exec rake ftp --silent' 
```

每次间隔后如何继续执行？

# android - Android，在edittext中进行输入时，防止在相对布局底部对齐的按钮向上

> ID：14661896
> 
> 赞同：4
> 
> 时间：2013-02-02T12:28:25.833
> 
> 标签：android, android-relativelayout

我创建了一个包含 3 个列表视图的相对布局。在顶部我有一个 editText 字段。在中间有一个滚动视图，它填满了所有剩余的空间。在底部我放置了一个按钮。问题是，当我在 editText 字段中进行输入时，键盘会出现，然后按钮会被移动并放在键盘上。似乎按钮总是粘在“左”视图的底部，但我希望它保持在原始窗口的底部。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/ll_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
    >

        <TextView
            android:id="@+id/tv_course_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/text_view_course_name"
            android:textStyle="bold" />

        <EditText
            android:id="@+id/et_course_name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll_save_course_button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <Button
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:onClick="saveCourse"
            android:text="@string/button_save_course" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll_course_table"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/ll_save_course_button"
        android:layout_below="@id/ll_name" >

    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T12:36:11.603

在您的清单文件中，

```
 <activity
        android:name=".HomeActivity"
        android:windowSoftInputMode="stateHidden|adjustPan" > 
```

**注意：** 在这里，我使用了 HomeActivity，您需要指定要在其中设置上述布局 xml 文件的活动名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:35:57.247

尝试这个：

```
 <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="saveCourse"
        android:gravity="bottom"
        android:text="@string/button_save_course" /> 
```

或使用这个

```
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
 WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# ios - 导航控制器toolbarItems数组为零？

> ID：14661897
> 
> 赞同：1
> 
> 时间：2013-02-02T12:28:35.733
> 
> 标签：ios, uinavigationcontroller

在我工作的一个应用程序中，我必须在 UINavigationController 的工具栏上放置许多（超过 5 个）工具栏项，并且需要在用户点击时替换其中一个工具栏项。

为了减少代码堵塞`-application:didFinishLaunchingWithOptions`，我在情节提要中设置了导航控制器（好吧，也许它是邪恶的..）而不是以编程方式。工具栏显示正常。唯一的问题是我无法在代码中获取工具栏项：

`NSMutableArray *toolbarItems = [[[self navigationController] toolbarItems] mutableCopy];`

`toolbarItems`始终为零。因此，我无法将我的手放在其中一个工具栏项上并按照我的意图进行更改。

这是正常的还是我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T12:36:10.927

好的，我只是修复它.. 我应该打电话`[self toolbarItems]`而不是`[[self navigationController] toolbarItems]`. 希望这篇文章可以帮助其他人。

# c# - 在 asp.net 3.5 中使用模板的多站点

> ID：14661898
> 
> 赞同：0
> 
> 时间：2013-02-02T12:28:48.110
> 
> 标签：c#, asp.net, templates, web

我在 Visual Web Developer 2010 Express Framework 3.5 中有一个 ASP.Net 站点，它本身就工作得很好。

我现在追求使用相同代码库的最佳方式，但适用于多个站点。

例如：

```
http://websiteaddress/SiteNumber1/Album.aspx or     
http://websiteaddress/SiteNumber2/Album.aspx 
```

解决此问题的最佳方法是什么？我应该使用 Intelligencias Rewrite 来使用重写规则，还是以某种方式使用特定的 Site Masters。这个问题可能已经在其他地方得到了回答，但我不完全确定我应该搜索什么？我没有权限弄乱 IIS 或任何东西。

也许有人知道做同样事情的教程。希望我已经解释得足够好，但如果没有，请随时提出问题！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:50:21.093

使用可以创建`Album.cs`文件，然后你可以使用它。或者第二种方法是您可以创建一个类文件，然后将其转换为`album.dll`然后您可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T19:17:18.690

我发现最好的方法是使用 Intelligencias Rewrite 工具进行自定义转换。例如：

```
<rewrite url="^/([\w-_]+)" to="~/default.aspx?Site=${SiteNameToIdTransform($1)}" processing="stop" /> 
```

已修改，但主要取自[http://runtingsproper.blogspot.co.uk/2009/11/advanced-url-rewriting-for-rest-of-us.html](http://runtingsproper.blogspot.co.uk/2009/11/advanced-url-rewriting-for-rest-of-us.html)

# android - Nexus 4 - NFC AAR 和过滤器

> ID：14661900
> 
> 赞同：2
> 
> 时间：2013-02-02T12:28:51.460
> 
> 标签：android, nfc, intentfilter, android-applicationrecord

我正在使用 NFC 论坛中指定的 Wifi 保护设置配置在标签上编写静态切换选择记录。（SSID，加密，...）。

类型是`application/vnd.wfa.wsc`

此外，我将 Android 应用程序记录作为最后一个 NDEF 记录添加到我的 NDEF 消息中。

我还在我的 Android Manifest XML 中为发现的 NFC 标签定义了一个过滤器。

问题是：如果启动了应用程序并显示了 Reader Activity，我可以读取标签并且一切正常。

现在我想要以下内容：如果我扫描我的标签，并且活动不是@foreground 或未启动，则应用程序应该自行启动并自动切换到阅读器模式。

1.  如果我这样做，则 AAR 不会启动 Nexus 4……如果我将此记录放在 NDEF 消息的第一位，它就会启动，但随后我会丢失 Ndef/Tech/Tag 发现的事件.
2.  我的android清单中也有过滤器，但这似乎没有做任何事情，我尝试了所有三个事件但没有任何反应

此外，如果标签被扫描，通常如果更多应用程序正在过滤事件，我会得到一个应用程序选择器，我想为此标签启动哪个应用程序。但是我的申请没有在这里列出。

这就是我创建消息的方式：

```
new NdefMessage(new NdefRecord[] { Utils.createHandoverSelectRecord(ac_record.toByteArray()), wpsRecord, aarRecord }); 
```

这是我的android清单中的过滤器：

```
 <activity android:name=".activities.NFCWriterActivity"></activity>
        <activity android:name=".activities.NFCReaderActivity" android:exported="true" android:permission="android.permission.NFC">
            <intent-filter>
              <action android:name="android.nfc.action.TAG_DISCOVERED"/>
              <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>        
        </activity>
        <activity android:name=".activities.NFCBeamActivity"></activity>
        <activity android:name=".activities.WifiManagerActivity"></activity>
        <activity android:name=".activities.WifiConfiguratorActivity"></activity>
        <activity android:name=".activities.TagWriterOptionsActivity"></activity>
        <activity android:name=".activities.WifiScannerTagActivity"></activity>
        <activity android:name=".activities.WifiScannerActivity"></activity> 
        <activity android:name=".activities.WifiListActivity"></activity>  

        <activity
            android:name=".activities.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
              <action android:name="android.nfc.action.TAG_DISCOVERED"/>
             <!--  <data android:mimeType="application/vnd.wfa.wsc" /> -->
              <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
            <intent-filter>
              <action android:name="android.nfc.action.TECH_DISCOVERED"/>
              <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
            <intent-filter>
              <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
              <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>                                
        </activity>       

    </application> 
```

我真的不知道应该在哪里过滤，我认为在 Reader Activity 中过滤就足够了，但这不起作用，所以我也在 MainActivity 中添加了过滤器，但这也没有任何作用。

我希望你能帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T19:27:43.840

您需要添加一个与第一个 NDEF 记录的 MIME 类型完全匹配的意图过滤器：

```
<intent-filter>
  <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
  <category android:name="android.intent.category.DEFAULT"/>
  <data android:mimeType="application/vnd.wfa.wsc" />
</intent-filter> 
```

# python - Python实例属性从具有相同名称的类属性中获取初始值？

> ID：14661908
> 
> 赞同：1
> 
> 时间：2013-02-02T12:29:45.797
> 
> 标签：python, class, attributes

```
class bambino(object):
    counter = 7
    def __init__(self):
        print("bambino.counter is self.counter ?", bambino.counter is self.counter)
        self.counter += 1
        print("bambino.counter is self.counter ?", bambino.counter is self.counter)

bambi1 = bambino()
print ("bambi1.counter:", bambi1.counter)
print ("bambino.counter:", bambino.counter) 
```

印刷：

```
bambino.counter is self.counter ? True
bambino.counter is self.counter ? False
bambi1.counter: 8
bambino.counter: 7 
```

我知道通过做`self.counter += 1` *counter*成为实例的属性而不是类的属性。

但是为什么`bambi1.counter`要取它的初始值`bambino.counter`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T12:34:50.837

如果在对象中找不到属性，则在层次结构中向上查找，首先在其类中查找，如果未找到，则在超类中查找。

`self.counter += 1`相当于`self.counter = self.counter + 1`。因此，要分配`bambi1.counter`，Python 首先需要获取 的值`bambi1.counter`。由于`bambi1`最初没有 a `counter`，python 没有找到它，必须在它的类中查找它。

PS：请把你的班级名字大写。

# r - 在 RStudio 中整理历史以记录分析

> ID：14661909
> 
> 赞同：2
> 
> 时间：2013-02-02T09:48:27.257
> 
> 标签：r

我正在 Rstudio 中进行一些分析，目前——因为我在远离 S 几十年后刷新了我对 R 的知识——这涉及编写许多对测试数据集进行操作的单行语句，然后检查/测试输出，然后当我检查了所有的小部分工作后，最终将其放大。

所以我的历史充满了语法错误和类似的。但我每次工作都在进步，每次工作时都会有一些有效的语句，我想保存，以便记录值得保存的会话部分。在 RStudio 中是否有任何既定的方法可以从我的历史中提取这些以供重复使用？我是否应该在每次会话后滚动浏览并使用文字处理器将它们复制并粘贴到文本文件中？或者有什么比我能做的更聪明的事情，留在 RStudio 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:06:11.923

查看历史记录的最简单方法是按 Ctrl-4，这将打开历史记录窗口。您可以将其复制到源，然后对其进行编辑，或者在任何地方进行编辑。但是，对于您正在做的事情，直接编辑到源窗口中可能会更好。

我使用的设置是打开一个脚本窗口，然后使用 ctrl-enter 运行当前行。

为了使这更容易进入工具>选项>代码编辑并确保“从源代码执行后聚焦控制台”未选中，并且在执行该行后您的光标将留在脚本中。

![在此处输入图像描述](../Images/cb191a3a6872a281a5951a196af44ed4.png)

您现在可以键入您的行并对其进行编辑，直到它们执行您想要的操作，然后在它工作时继续下一个。一旦你到达终点，你就已经建立了你的脚本。此外，由于您的“历史”就在您面前，因此跳回旧行并重新运行或修改它们要容易得多。如果要运行代码块，只需突出显示该块并按 ctrl-enter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T09:56:04.783

在 RStudio 的历史面板（右上面板）中，您可以单击“发送到源”，它会将您选择的行复制到您在左上面板中打开的任何 .R 文件中。

# objective-c - ARC 和内存管理

> ID：14661912
> 
> 赞同：1
> 
> 时间：2013-02-02T12:29:58.913
> 
> 标签：objective-c, automatic-ref-counting

我仍然不是 100% 了解 ARC 内部结构。

我想澄清几个例子：

`someObjectToReturn = [[SomeClass alloc] init];`在方法内部分配并返回会发生什么？如果`someObjectToReturn`分配给例如 someObject，那么 someObjectToReturn 什么时候会被释放？当 someObject 被取消或 someObjectToReturn 仍需要添加到自动释放池时？

另一种情况是如果一个对象数组被清零，是否所有的对象都被释放了？

最后，哪里是释放复制的块对象的好地方？还是执行后块仍然会被释放？如果将复制的块添加到自动释放池中，什么时候会耗尽该池？假设有 10 个块，每个块都添加到自动释放池中，过早将其耗尽会导致正在执行的块死亡。复制的块是否可以从自身内部取消，例如将块的取消分派回主线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:49:10.373

你似乎把事情复杂化了。在 ARC 下，您*无法*释放对象或耗尽自动释放池，因此没有“正确”的时间来执行此操作。不要考虑保留、释放和自动释放（除非在紧密循环中），要考虑对象所有权。

您的具体问题：

1.  当分配返回值的变量超出范围或设置为 nil 时，该对象将被释放。你不必担心。

2.  是的，当数组设置为nil时，数组的所有内容都会被释放，你不用担心

3.  完成后，您可以将保存复制块的值设置为零，或者当拥有复制块的对象消失时，它会消失。您不能在 ARC 下耗尽自动释放池，您可以将语句包装在一个`@autoreleasepool{}`块中，但这只是捕获块中的所有内容 - 您不会“添加”东西到池中或“耗尽”池。

# authentication - Cisco IP 电话 - 如何使用 Javascript XMLHttpRequest 进行身份验证？

> ID：14661915
> 
> 赞同：0
> 
> 时间：2013-02-02T12:30:10.320
> 
> 标签：authentication, xmlhttprequest, cisco

我正在尝试编写一个简单的代码，以查看是否可以让我的 Cisco 7942 IP 电话从网页拨号。到目前为止，我的 javascript 中有这个：

```
 var number = "http://172.25.11.59/CGI/Execute";
        var xml = new XMLHttpRequest();
xml.open("post", number, "username", "password");
xml.send('<CiscoIPPhoneExecute><URL="Dial:6180" /></CiscoIPPhoneExecute>'); 
```

电话...需要登录...而且我有自己正在使用的...不允许我，因为我得到：“[04:22:15.105] NS_ERROR_DOM_BAD_URI：访问受限 URI 被拒绝”。我使用的是 Firefox，所以我不必处理同源文件问题。关于如何让 Cisco 允许我使用 XMLHttpRequest 进行身份验证的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:08:55.650

这需要： xml.setRequestHeader("Authorization", "Basic MTgyMjg6MTgyMjg="); 其中密码是名称：base64 编码中的密码。虽然，仍然无法让其他部分与 Cisco 电话一起使用。

# x86 - GDT 分段内存

> ID：14661916
> 
> 赞同：0
> 
> 时间：2013-02-02T12:30:21.930
> 
> 标签：x86, kernel, gdt

我正在尝试构建自己的内核，现在正在设置 GDT。我为加载程序使用了一个程序集文件，并调用了用 C 编写的内核，并试图让 GDT 工作。内核从 GRUB 引导并通过 GRUB 刷新 GDT 设置。当我将 GDT 条目设置为段（具有适当的限制和偏移量）时，我假设在 QEMU 以及当我从 pendrive 启动时，内核重新启动时都会出现三重故障。

我的问题是：

我可以为 x86 架构实现分段模型吗？是否需要在保护模式下完成？工作完成后如何退出保护模式？

我会在此处发布代码，但其中大部分来自教程，如果我将程序集和 C 代码混在一起，它会变得一团糟。主要的是，如果我在 C 内核中将代码段和数据段条目的基础都设置为“0”之外的任何其他操作，内核就会重新启动。此外，当我将粒度设置为禁用 4KB 分页时，也会发生同样的事情。如果需要，请询问更多详细信息。谢谢 ：） ：）

编辑：这是我用于链接 asm 引导加载程序和 C 内核文件的 linker.ld 文件。我已经发布了与内存分段相关的 asm 和 C 文件中的段：

链接器：

```
ENTRY (loader)

SECTIONS
{
    . = 0x00100000;

    .text ALIGN (0x1000) :
    {
        *(.text)
    }

    .rodata ALIGN (0x1000) :
    {
        *(.rodata*)
    }

    .data ALIGN (0x1000) :
    {
        *(.data)
    }

    .bss :
    {
        sbss = .;
        *(COMMON)
        *(.bss)
        ebss = .;
    }
} 
```

用于设置 GDT 和实例化函数的 C 函数：

```
void gdt_set_gate(int num, unsigned long base, unsigned long limit, unsigned char access, unsigned char gran)
{
    /* Setup the descriptor base address */
    gdt[num].base_low = (base & 0xFFFF);
    gdt[num].base_middle = (base >> 16) & 0xFF;
    gdt[num].base_high = (base >> 24) & 0xFF;

    /* Setup the descriptor limits */
    gdt[num].limit_low = (limit & 0xFFFF);
    gdt[num].granularity = ((limit >> 16) & 0x0F);

    /* Finally, set up the granularity and access flags */
    gdt[num].granularity |= (gran & 0xF0);
    gdt[num].access = access;
}

void gdt_install()
{
    /* Setup the GDT pointer and limit */
    gp.limit = (sizeof(struct gdt_entry) * 35) - 1;
    gp.base = &gdt;

    /* Our NULL descriptor */
    gdt_set_gate(0, 0, 0, 0, 0);

   gdt_set_gate(1, 0x00000000, 0xFFFFFFFF, 0x9A, 0xCF); //Setting Code Segment

  gdt_set_gate(2, 0x00000000, 0xFFFFFFFF, 0x92, 0xCF); //Setting Data Segment

  //In the above two, if the second parameter is anything other 
  //than 0 i.e. base is not 0, the kernel doesn't run. 
 //Moreover, setting the last to 0x4F, which is byte accessing rather 
 //than 4KB paging gives the same malfunction too. 

 //gdt_set_gate(3, 0, 0xFFFFFFFF, 0xFA, 0xCF);
  //gdt_set_gate(4, 0, 0xFFFFFFFF, 0xF2, 0xCF);     
    //TASK STATE SEGMENT -1 
    //TASK STATE SEGMENT -2 

    //gdt_set_gate(3, 0, 0xFFFFFFFF, 0x89, 0xCF);
   // gdt_set_gate(4, 0, 0xFFFFFFFF, 0x89, 0xCF);   

    /* Flush out the old GDT and install the new changes! */
    gdt_flush();
} 
```

最后，用 ASM 编写的 GDT 刷新函数：

```
gdt_flush:    
    lgdt [gp]        ; Load the GDT with our '_gp' which is a special pointer   
    ;ltr [0x18]
    mov ax, 0x10      ; 0x10 is the offset in the GDT to our data segment
    mov ds, ax
    mov es, ax
    mov fs, ax
    mov gs, ax
    mov ss, ax
    jmp 0x08:flush2   ; 0x08 is the offset to our code segment: Far jump!
flush2:
    ret 
```

我知道 C 函数和 ASM 是正确的，因为它们适用于平面内存模型。我需要对此进行任何具体更改吗？我想就链接器文件提供一些建议以设置分段或分段分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:31:00.660

> 我可以为 x86 架构实现分段模型吗？

当然可以。

> 是否需要在保护模式下完成？

您只有两个选择：具有尴尬和 64K 和其他限制的实模式和保护模式。

> 工作完成后如何退出保护模式？

简而言之，您关闭页面转换（如果已打开），跳转到 16 位代码段，使用指向与实模式兼容的描述符的选择器加载段寄存器，清除 CR0.PE。还有更多细节（例如任务切换、中断处理）。您可以在官方文档和一些在线教程中找到它们。

> 如果我在 C 内核中将代码段和数据段条目的基础都设置为“0”之外的任何其他操作，则内​​核将重新启动。

您必须了解 x86 代码不是位置独立的，如果它重新定位到地址 X 将无法正常运行，而是加载到地址 Y。这意味着不仅应该调整段描述符的基数以移动您的代码/数据某个地方，但链接器也应该将可执行映像重新定位到另一个位置。一个简单的错误就足以让它不起作用。

> 此外，当我将粒度设置为禁用 4KB 分页时，也会发生同样的事情。

这种说法没有任何意义。您不会通过使用描述符的粒度位来禁用分页。

> 如果需要，请询问更多详细信息。

您的工作是为我们提供足够的信息来帮助您。正如目前所说的那样，这个问题缺乏细节，无法完全回答。您有一些错误的代码，但您没有向我们展示，我们如何提供帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-04T10:35:36.093

加载 GDT 后，在您的 asm 代码中使用它。

```
mov eax, cr0
or eax, 1b
mov cr0, eax 
```

# c# - 将png图像合并为WPF中的单个图像

> ID：14661919
> 
> 赞同：7
> 
> 时间：2013-02-02T12:30:45.310
> 
> 标签：c#, wpf, png, imaging, tiling

我正在寻找一种将一些 PNG 平铺图像合并成大图像的方法。所以我搜索并找到了一些链接。[这](https://stackoverflow.com/questions/6325057/c-sharp-combine-lots-of-images-wpf-imaging-classes)没有正确回答。[这](https://stackoverflow.com/questions/6325057/c-sharp-combine-lots-of-images-wpf-imaging-classes)不是平铺，它适用于叠加图像，并且[不](https://stackoverflow.com/questions/465172/merging-two-images-in-c-net)使用 WPF。所以我提出这个问题。

**问题定义：**

我有 4 张 PNG 图片。我想将它们合并成一个PNG图像，像这样

```
-------------------
|        |        |
|  png1  |  png2  |
|        |        |
-------------------
|        |        |
|  png3  |  png4  |
|        |        |
------------------- 
```

**问题：**

执行此操作的最佳和有效方法是什么（生成的图像必须是 PNG）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-02T12:38:17.950

```
// Loads the images to tile (no need to specify PngBitmapDecoder, the correct decoder is automatically selected)
BitmapFrame frame1 = BitmapDecoder.Create(new Uri(path1), BitmapCreateOptions.None, BitmapCacheOption.OnLoad).Frames.First();
BitmapFrame frame2 = BitmapDecoder.Create(new Uri(path2), BitmapCreateOptions.None, BitmapCacheOption.OnLoad).Frames.First();
BitmapFrame frame3 = BitmapDecoder.Create(new Uri(path3), BitmapCreateOptions.None, BitmapCacheOption.OnLoad).Frames.First();
BitmapFrame frame4 = BitmapDecoder.Create(new Uri(path4), BitmapCreateOptions.None, BitmapCacheOption.OnLoad).Frames.First();

// Gets the size of the images (I assume each image has the same size)
int imageWidth = frame1.PixelWidth;
int imageHeight = frame1.PixelHeight;

// Draws the images into a DrawingVisual component
DrawingVisual drawingVisual = new DrawingVisual();
using (DrawingContext drawingContext = drawingVisual.RenderOpen())
{
    drawingContext.DrawImage(frame1, new Rect(0, 0, imageWidth, imageHeight));
    drawingContext.DrawImage(frame2, new Rect(imageWidth, 0, imageWidth, imageHeight));
    drawingContext.DrawImage(frame3, new Rect(0, imageHeight, imageWidth, imageHeight));
    drawingContext.DrawImage(frame4, new Rect(imageWidth, imageHeight, imageWidth, imageHeight));
}

// Converts the Visual (DrawingVisual) into a BitmapSource
RenderTargetBitmap bmp = new RenderTargetBitmap(imageWidth * 2, imageHeight * 2, 96, 96, PixelFormats.Pbgra32);
bmp.Render(drawingVisual);

// Creates a PngBitmapEncoder and adds the BitmapSource to the frames of the encoder
PngBitmapEncoder encoder = new PngBitmapEncoder();
encoder.Frames.Add(BitmapFrame.Create(bmp));

// Saves the image into a file using the encoder
using (Stream stream = File.Create(pathTileImage))
    encoder.Save(stream); 
```

# php - PHP对象从类构造函数继承——正确的方法

> ID：14661925
> 
> 赞同：0
> 
> 时间：2013-02-02T12:31:52.113
> 
> 标签：php, class, inheritance

我需要一些关于 php 对象继承情况的指导。我有：一个配置对象，例如：

```
configuration{
    var driver = 'mysql'; // or 'mssql';
    var host = 'database_host';
    var user = 'database_user';
    var password = 'database_password';
    var name = 'database_name';
} 
```

两个数据库处理程序类：

```
class mysql{
    public mysql(){} // connect
    public query(){} // set a query
    public result(){} // load result
}

class mssql{
    public mysql(){} // connect
    public query(){} // set a query
    public result(){} // load result
} 
```

和某种类控制器：

```
class database{
    public function __construct(){
        $configuration = new configuration;
        /*
         * now, depending on the value of the $configuration->driver
         * my database class must inherit methods from mysql or mssql class
         */
        switch( $configuration->driver ){
            case 'mysql':
                // database inherit mysql methods
            break;
            case 'mssql':
            // database inherit mssql methods
            break;
        }
    }
} 
```

用法如：

```
$database = new database;
$database->query( 'select * from some_table' );
$result = $database->result(); 
```

所以，当我使用我的**数据库**类方法时，根据**配置**对象，我实际上使用**mysql**或**mssql**方法。我看到它的方式是不通的，因为我希望我的**数据库类继承类****构造函数**中的另一个类。

我希望有人能给我一个关于我该怎么做的建议......让我们说......正确的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:51:17.770

nonono，这不是 oop-thinking。您应该谷歌以下关键字：

*   更喜欢[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)
*   [策略模式](http://sourcemaking.com/design_patterns/strategy)
*   [构造函数注入](http://misko.hevery.com/2009/02/19/constructor-injection-vs-setter-injection/)
*   比基类更喜欢[接口](https://stackoverflow.com/questions/56867/interface-vs-base-class)
*   [单一责任](http://en.wikipedia.org/wiki/Single_responsibility_principle)原则
*   某种[工厂模式](http://corey.quickshiftconsulting.com/1/post/2009/5/first-post.html)

完成后，将 switch 语句放入工厂，使类 mysql 成为名为*DBDriver*的接口，并在数据库类中使用策略模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T18:42:38.483

如果有人像我一样困惑，阅读这篇文章，这就是我找到的解决方案（经过数周的研究 - 是的，数周后）：

使用单例模式，创建一个名为数据库的父类：

```
class database{
    protected static $instances = array();

    // method to create a new instance of this object
    public function getInstance( $driver ){
        $instanceid = md5( $driver );

        if( self::$instances[ $instanceid ] == null ){
            self::$instances[ $instanceid ] = new $driver;
        }

        return self::$instances[ $instanceid ];
    }

    public function testFunction(){
        //do something else
    }
} 
```

然后创建驱动函数

```
class mysql extends database{
    public mysql(){} // connect
    public query(){} // set a query
    public result(){} // load result
}

class mssql extends database{
    public mysql(){} // connect
    public query(){} // set a query
    public result(){} // load result
} 
```

现在像这样使用它

```
$database = database::getInstance( 'mysql' );
$database->query(); // works
$database->testFunction(); // works to 
```

进一步你可以使用和喜欢

```
$database = database::getInstance( 'mssql' );
$database->query(); // works
$database->testFunction(); // works to 
```

**我需要向 Froncoise 道歉，因为我取消了他的正确答案。**

# android - 制作临时文件并在 Android 内部存储器上重命名

> ID：14661926
> 
> 赞同：0
> 
> 时间：2013-02-02T12:31:59.553
> 
> 标签：android, io, fileinputstream, fileoutputstream

我有一个 .txt 文件，其中包含让我们说

```
1;2;3;4;5
a;b;c;d;e
A;B;C;D;E 
```

我想删除以“a”开头的行我复制了文件并在那里写下这些行，除非该行等于 lineToRemove

所以在这里我做了什么但文件没有改变

```
String path = "playlist.txt"
String lineToRemove = "a";

public boolean removeLineFromFile(String lineToRemove) {  

try {
    File inFile = new File(path);
    //Creating a temp file
    File tempFile = new File(inFile.getAbsolutePath()+".tmp");

    FileInputStream fIn = openFileInput(path);
    InputStreamReader isr = new InputStreamReader(fIn);
    BufferedReader br = new BufferedReader(isr);                    

    FileOutputStream fOut_temp = openFileOutput(path +".tmp", Context.MODE_APPEND);
    OutputStreamWriter osw_temp = new OutputStreamWriter(fOut_temp);
    osw_temp.write("");

    String line = br.readLine();

    //Read from the original file and write to the new
    //unless content matches data to be removed.
    while (line != null) {
        String[] tokens = line.split(";");
        if (! tokens[0].equals(lineToRemove)){
            osw_temp.write(line);
            osw_temp.flush();
        }
        line = br.readLine();
     }

    osw_temp.close();
    br.close();               

    //Delete the original file   
    inFile.delete();
    //Rename the new file to the filename the original file had.
    tempFile.renameTo(inFile);  
    return true;              
}catch (Exception ex) { return false;} 
```

我认为使用 File 存在问题，是否有另一种在 android 内部存储上写入的方式？在此先感谢您的帮助

编辑：因为使用 File = new File + rename + deleted 方法在这里不起作用是我找到的解决方案。也许不是最好的，但至少它有效

```
try {   

     FileInputStream fIn = openFileInput(path);
     InputStreamReader isr = new InputStreamReader(fIn);
     BufferedReader br = new BufferedReader(isr);  

     //Create temp file 
    FileOutputStream fOut2 = openFileOutput("te.txt", Context.MODE_WORLD_WRITEABLE);
    OutputStreamWriter osw2 = new OutputStreamWriter(fOut2);

    osw2.write("");
    // save and close
    osw2.flush();
    osw2.close();

    // Adding things to temp file
    FileOutputStream fOut_temp = openFileOutput("te.txt", Context.MODE_APPEND);
     OutputStreamWriter osw_temp = new OutputStreamWriter(fOut_temp);
     osw_temp.write("");

      String line = br.readLine();

      //Read from the original file and write to the new
      //unless content matches data to be removed.
      while (line != null) {
        String[] tokens = line.split(";");
        if (! tokens[0].equals(lineToRemove)){
          osw_temp.write(line);
          osw_temp.write("\r\n");
          osw_temp.flush();
        }
        line = br.readLine();
      }

      osw_temp.close();
      br.close();

      //Delete the original file  
    FileOutputStream fOut = openFileOutput(path, Context.MODE_WORLD_WRITEABLE);
    OutputStreamWriter osw = new OutputStreamWriter(fOut);          
    osw.write("");
    // save and close
    osw.flush();
    osw.close();

    //Copy temp file to original file

      FileInputStream fIn3 = openFileInput("te.txt");
     InputStreamReader isr3 = new InputStreamReader(fIn3);
     BufferedReader br2 = new BufferedReader(isr3);
    String line4 = br2.readLine() ;

   FileOutputStream fOut_temp4 = openFileOutput(path, Context.MODE_APPEND);
   OutputStreamWriter osw_temp4 = new OutputStreamWriter(fOut_temp4);

      while (line4 != null) {

          osw_temp4.write(line4);
          osw_temp4.write("\r\n");
          osw_temp4.flush();
            Toast.makeText(getApplicationContext(),"ecrit", Toast.LENGTH_SHORT).show();

        line4 = br2.readLine();
      }

      osw_temp4.close();
      br2.close();

      return true;            
    }catch (Exception ex) {                 
        Toast.makeText(getApplicationContext(),ex.getMessage(), Toast.LENGTH_SHORT).show();
    return false;} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:45:24.037

Using this with Java I'm able to remove the line starts with *a*, just port in Android thats it.

```
public class LineRemover
{
static String path = "temp.txt";
    static String lineToRemove = "a";
    public static void main(String[] args)
    {
            try {
                File inFile = new File(path);

                FileInputStream fIn = new FileInputStream(path);
                InputStreamReader isr = new InputStreamReader(fIn);
                BufferedReader br = new BufferedReader(isr);                    

                FileOutputStream fOut_temp = new FileOutputStream("te.txt");
                OutputStreamWriter osw_temp = new OutputStreamWriter(fOut_temp);
                osw_temp.write("");

                String line = br.readLine();

                //Read from the original file and write to the new
                //unless content matches data to be removed.
                while (line != null) {
                    String[] tokens = line.split(";");
                    if (! tokens[0].equals(lineToRemove)){
                        osw_temp.write(line);
                        osw_temp.flush();
                    }
                    line = br.readLine();
                 }

                osw_temp.close();
                br.close();               

                inFile.delete();
            inFile = new File("te.txt");
            //Rename the new file to the filename the original file had.
            inFile.renameTo(new File("temp.txt"));  
            }catch (Exception ex) 
            {}
        }
} 
```

# jquery - jQuery悬停取消动作

> ID：14661928
> 
> 赞同：0
> 
> 时间：2013-02-02T12:32:27.343
> 
> 标签：jquery, jquery-ui, jquery-hover

当您将鼠标悬停在另一个 DOM 元素上时，我想显示一个 div，但是如果您在显示 div 之前移动鼠标，我想取消此操作。到目前为止，这就是我所拥有的

HTML

```
<div id="msg">
    <a href="#" id="33"> HERE </a>
</div> 
```

JS

```
var timer;
$("body").on('mouseenter', '#msg a',function(){
    var userHover = $(this).attr("id");
    timer = setTimeout(function () {
        alert(userHover);   
    }, 1000);
}).on('mouseleave', '#msg a', function(){

}); 
```

[http://jsfiddle.net/Nyrdz/](http://jsfiddle.net/Nyrdz/)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T12:36:29.243

您正在寻找[`clearTimeout()`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)：

```
var timer;
$("body").on('mouseenter', '#msg a', function(){
    var userHover = $(this).attr("id");
    timer = setTimeout(function () {
        alert(userHover);   
    }, 1000);
}).on('mouseleave', '#msg a', function(){
    clearTimeout(timer);
}); 
```

但是，如果您有多个匹配的元素`#msg a`，我强烈建议您将`timer`值存储在特定于元素的数据中。

```
$("body").on('mouseenter', '#msg a', function(){
    var userHover = $(this).attr("id");
    $(this).data('timer', setTimeout(function () {
        alert(userHover);   
    }, 1000));
}).on('mouseleave', '#msg a', function(){
    clearTimeout($(this).data('timer'));
}); 
```

# node.js - 使用 node-gyp 构建 Boost.Geometry 失败

> ID：14661931
> 
> 赞同：1
> 
> 时间：2013-02-02T12:32:33.303
> 
> 标签：node.js, boost, node-gyp, boost-geometry

我使用 Mac OSX 10.8.2。我已经通过 Homebrew 安装了 Boost 1.52.0 `brew install boost`，.

```
#include <node.h>
#include <v8.h>
#include <boost/geometry.hpp>

using namespace v8;

Handle<Value> Method(const Arguments& args) {
    HandleScope scope;

    return scope.Close(String::New("ok"));
}

void init(Handle<Object> target) {
    target->Set(String::NewSymbol("method"), FunctionTemplate::New(Method)->GetFunction());
}
NODE_MODULE(method, init); 
```

尝试通过 构建这个简单的 NodeJS 插件时`node-gyp build`，出现以下错误：

```
gyp info it worked if it ends with ok
gyp info using node-gyp@0.8.3
gyp info using node@0.8.18 | darwin | x64
gyp info spawn make
gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
  CXX(target) Release/obj.target/method/method.o
In file included from ../method.cc:3:
In file included from /usr/local/include/boost/geometry.hpp:17:
In file included from /usr/local/include/boost/geometry/geometry.hpp:75:
In file included from /usr/local/include/boost/geometry/multi/multi.hpp:74:
In file included from /usr/local/include/boost/geometry/multi/io/wkt/wkt.hpp:17:
In file included from /usr/local/include/boost/geometry/multi/io/wkt/read.hpp:23:
/usr/local/include/boost/geometry/io/wkt/read.hpp:123:38: error: use of undeclared identifier 'blc'
            throw read_wkt_exception(blc.what(), it, end, wkt);
                                     ^
/usr/local/include/boost/geometry/io/wkt/read.hpp:127:38: error: use of undeclared identifier 'e'
            throw read_wkt_exception(e.what(), it, end, wkt);
                                     ^
2 errors generated.
make: *** [Release/obj.target/method/method.o] Error 1
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/node-gyp/lib/build.js:255:23)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:678:10)
gyp ERR! System Darwin 12.2.1
gyp ERR! command "node" "/usr/local/bin/node-gyp" "build"
gyp ERR! cwd /Users/alexandre/Projets/test
gyp ERR! node -v v0.8.18
gyp ERR! node-gyp -v v0.8.3
gyp ERR! not ok 
```

错误来源：

```
 catch(boost::bad_lexical_cast const& blc)
        {
            throw read_wkt_exception(blc.what(), it, end, wkt);
        }
        catch(std::exception const& e)
        {
            throw read_wkt_exception(e.what(), it, end, wkt);
        } 
```

...这与错误相矛盾。我的设置有什么问题？

# prototype - 如何在原型中的onclick事件后获取单选按钮值

> ID：14661932
> 
> 赞同：1
> 
> 时间：2013-02-02T12:32:38.690
> 
> 标签：prototype

我在原型js中使用以下代码-

```
 $('co-payment-form').on('change', 'input:radio', function() {
    alert(this.value);
 }); 
```

单击单选按钮后，我想获取单选按钮的值。我尝试了 this.value 但价值未定义。请帮助我如何获得价值。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:37:06.607

使用本准则。

```
$('co-payment-form').on('change', 'input:radio', function(el) {
   alert($(el.target).value);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:51:39.000

尝试这个

```
$('co-payment-form').on('change', 'input:radio', function(e) {
   console.log(e.target.value);
}); 
```

# c++ - 制作库时是否应避免使用 MACRO

> ID：14661935
> 
> 赞同：0
> 
> 时间：2013-02-02T12:33:00.883
> 
> 标签：c++, visual-c++, macros, static-libraries

该库提供了一个派生类，派生类作为模板参数。

例子：

```
class userclass : public lib::superclass<userclass>
{} 
```

如您所见，要输入的内容很多。并且“用户类”应该始终作为公共派生以使其正常工作。所以我想出了两个看起来像这样的宏：

```
#define SUPER(x) public lib::superclass<x>
#define SUPERCLASS(x) class x : public lib::superclass<x> 
```

用户现在可以键入其中任何一个。

```
class userclass : SUPER(userclass)
{}

SUPERCLASS(userclass)
{} 
```

但主要问题是宏 SUPER 和 SUPERCLASS 存在于用户全局命名空间中的速度与包含标题一样快。

我可以/应该：

1.  有办法保留命名空间要求但仍默认为公共派生？
2.  按原样使用宏。
3.  只需要求用户写出完整的“public lib::superclass”。

我正在使用 vs 11，并且该库针对 Windows 开发人员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T12:41:56.973

使用宏的第一条规则是“不要，如果有任何其他解决方案”。在这种情况下，还有另一种解决方案，所以摆脱它们。

其次，你的宏弊大于利，因为人们不知道他们仅仅通过阅读它来扩展什么，而完整的定义却知道。说真的，你节省了非常少的字符数，但在可读性方面却付出了巨大的代价。简单地写出继承要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T12:42:45.923

这真的不是很多打字。我见过很多不应该缩短的更长的行。用宏隐藏它只会混淆你的代码。如果我快速看一下您的`SUPERCLASS(userclass) {}`，我几乎可以猜到它是一个类（我不喜欢根据猜测使用库），但我不知道它或其父级是否被调用`userclass`（或两者都没有）或它使用什么样的继承。这意味着您必须记录它，并迫使人们在需要时查找它。

所以正确的答案是选项 3 - 不要使用宏。

^(如果你真的真的需要在你的库中使用一个宏，给它一个库特定的前缀。这与您将获得命名空间宏一样接近。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T12:46:07.280

我投票给 3。只需要求用户写出完整的“public lib::superclass”。

在以下情况下，库中的宏*可能*很有用：

*   真的有很多要写
*   有些东西必须写好几次
*   或者你想隐藏一个丑陋的实现细节，而语言不允许你这样做。

但在你的情况下：

*   写的不多，
*   是的，你必须输入两次类名，
*   你不想隐藏你是子类化的事实，甚至你正在写一个类！

我不认为类名的重复——一个积极的观点——是值得的。特别是因为您将隐藏`class`关键字并给读者造成相当大的混乱。

无论如何，如果一个库使用宏，习惯上将库名放在所有宏的前面：

```
#define MY_FANCY_LIBRARY_NAME_SUPER(x) public lib::superclass<x> 
```

但是现在你并没有节省那么多打字......

PS：记住编程的黄金法则：

> 代码只写一次，永远读下去，因此它应该易于阅读，而不是易于编写。

# java - Char Array 的元素在打印时右对齐

> ID：14661936
> 
> 赞同：0
> 
> 时间：2013-02-02T12:33:02.913
> 
> 标签：java, arrays

我需要打印出已经在 Hangman 中使用的字母，即元素，`char array`但它们是从右侧而不是从左侧一一出现。例如，第一个字母出现在第 26 个位置。第二个占据第 25 或第 26 个位置（取决于 alpha 顺序）等等......非常感谢您的建议。

寿命：5 字：B _ _ _ 目前使用的字母：BY

寿命：4 字：B _ _ _ 迄今为止使用的字母：BEY

寿命：4 字：BOO_ 迄今为止使用的字母：BEOY

```
char[] lettersUsedCharArray = new char[26];

/**************************************************
* Method - add guessLetter to lettersUsedCharArray
* 
**************************************************/
public void addGuessLetter(char guessLetter)
{
    this.guessLetter = guessLetter;
    for (int i = 0; i < this.lettersUsedCharArray.length; i++)
    {   
        if (this.lettersUsedCharArray[i]== '\0')
        {
                this.lettersUsedCharArray[i]=this.guessLetter;
                break;
        }   
    }
    Arrays.sort(this.lettersUsedCharArray);
}

/**************************************************
 * Method - print out out letters used
 * 
 **************************************************/
public void printLettersUsedCharArray(char[] lettersUsedCharArray, OutputBox oBox)
{
    oBox.print("Letters used so far : ");
    for(int i = 0; i < lettersUsedCharArray.length; i++)
    {
        oBox.print(lettersUsedCharArray[i]); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:15:33.907

## 更新的答案

如果您尝试以这种方式对数组进行排序`[b,a,_,_]`-> `[a,b,_,_]`（以免说那`_`是“空”的地方） with `Arrays.sort`then 以避免`_`在开头放置标记，您应该指定必须排序的范围，如下例所示：

```
char[] arr = new char[4];
arr[0] = 'B';
arr[1] = 'A';

System.out.println(Arrays.toString(arr)); // before sorting: [B, A, , ]
Arrays.sort(arr, 0, 2);// sort from 0 index (inclusive) to 2 index (exclusive) 
System.out.println(Arrays.toString(arr)); // after sorting: [A, B, , ] 
```

因此，在您将 char 添加到数组的情况下，您可以遍历数组，直到找到空白空间，将该字母放入数组并使用`Arrays.sort(arr, 0, i+1)`.

# algorithm - 选择一个点，使其与集合中其他点之间的距离总和最小

> ID：14661939
> 
> 赞同：2
> 
> 时间：2013-02-02T12:33:34.020
> 
> 标签：algorithm

我读了一篇关于几乎相同问题的[帖子。](https://cstheory.stackexchange.com/q/9750/13562)但在这里我简化了问题，希望能提供一个具体的证明。

有一个`A`包含一些离散点（一维）的集合，例如`{1, 3, 37, 59}`。我想选择一个点`A`，可以最小化该点与其他点之间的距离之和。

那里可能有很多帖子，我的问题只是那些版本，如果不是离散的，`1-d`我知道如何证明它，但是当像上面那样离散时我失败了。`A``A`

请用具体的证据给我答案，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T12:55:12.127

不是严格（甚至松散）的数学证明，如果这是您需要的，那么您很可能在错误的地方问:)

让我们调用一维坐标`x`，假设加注`x`向右移动。您正在寻找的重点是`mx`.

*   如果`mx`右边的点多于左边的点，则向右移动`mx`会将距离提高到左侧*较少的点，并将其降低到右侧**的更多点*，这将降低平均距离。

*   换句话说，`mx`左边不能比右边少，如果有，有办法降低平均值。

反之亦然。

如果元素的数量是奇数，则满足上述要求的唯一点就是中位数。

如果元素个数是偶数，则两个中间元素之间的任何点都满足条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T12:58:35.130

由于点之间的总距离函数是线性的，并且距离函数在任何地方都是连续的，因此必须在集合中的一个点处达到最小值。因此，您可以将 A 限制在给定的集合中。

以下是从点 {-3, 1, 2, 5} 开始的总距离函数的图表，例如： ![距离函数图](../Images/837b4c24ce702d10214862c0f9f8d96b.png)

假设 L 指向左侧，R 指向 A 右侧。

向右移动一个点会使距离改变 d * (L + 1 - R)（其中 d 是到下一个点的距离）。同样，向左移动一点会使距离改变 d * (R + 1 - L)。

最小化 |LR| 的点 是这个距离最小的地方。那是中位数（如果它在集合中），或者是中位数的两个相邻点中的任何一个（如果不是）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T14:47:12.507

考虑[最快的方法来找到点之间的最小距离](https://stackoverflow.com/questions/788733/fastest-way-to-find-minimum-distance-between-points)问题尝试看看[最接近的点对问题](http://en.wikipedia.org/wiki/Closest_pair_problem)。

# apache-flex - 为什么 rtmfp 不能使用这些参数和函数？

> ID：14661943
> 
> 赞同：0
> 
> 时间：2013-02-02T12:34:48.670
> 
> 标签：apache-flex, actionscript, netstream, rtmfp

为了使用 RTMFP，我在 ActionScript 中编写了一些基本函数：

```
import flash.events.NetStatusEvent;
import flash.net.NetConnection;
import flash.net.NetStream;
import flash.ui.Keyboard;

private var serverAddress:String = "rtmfp://cc.rtmfp.net/";
private var serverKey:String = "xxxxx";
private var netConnection:NetConnection;
private var outgoingStream:NetStream;
private var incomingStream:NetStream;

private function initConnection():void {
    netConnection = new NetConnection();
    netConnection.addEventListener(NetStatusEvent.NET_STATUS, netConnectionHandler);
    netConnection.connect(serverAddress + serverKey);
}

private function netConnectionHandler(event:NetStatusEvent):void {
    receivedMessages.text += "NC Status: " + event.info.code + "\n";

    //Some status handling will be here, for now, just print the result out.
    switch (event.info.code) {
        case 'NetConnection.Connect.Success':
            receivedMessages.text += "My ID: " + netConnection.nearID + "\n";
            break;
    }
}

private function sendInit():void {
    outgoingStream = new NetStream(netConnection, NetStream.DIRECT_CONNECTIONS);
    outgoingStream.addEventListener(NetStatusEvent.NET_STATUS, outgoingStreamHandler);
    outgoingStream.publish("media");

    var sendStreamObject:Object = new Object();
    sendStreamObject.onPeerConnect = function(sendStr:NetStream):Boolean {
        receivedMessages.text += "Peer Connected ID: " + sendStr.farID + "\n";
        return true;
    }

    outgoingStream.client = sendStreamObject;
}

private function receiveInit():void {
    receivedMessages.text += "Initializing Receiving Stream: " + incomingID.text + "\n";

    incomingStream = new NetStream(netConnection, incomingID.text);
    incomingStream.addEventListener(NetStatusEvent.NET_STATUS, incomingStreamHandler);
    incomingStream.play("media");
    incomingStream.client = this;
}

public function receiveMessage(message:String):void {
    receivedMessages.text += "Received Message: " + message + "\n";
}

private function outgoingStreamHandler(event:NetStatusEvent):void {
    receivedMessages.text += "Outgoing Stream: " + event.info.code + "\n";
}

private function incomingStreamHandler(event:NetStatusEvent):void {
    receivedMessages.text += "Incoming Stream: " + event.info.code + "\n";
}

private function sendMessage():void {   
    outgoingStream.send("receiveMessage", toSendText.text);
}

private function disconnectNetConnection():void {
    netConnection.close();
    netConnection.removeEventListener(NetStatusEvent.NET_STATUS, netConnectionHandler);
    netConnection = null;
}

private function disconnectOutgoing():void {
    outgoingStream.close();
    outgoingStream.removeEventListener(NetStatusEvent.NET_STATUS, outgoingStreamHandler);
    outgoingStream = null;
}

private function disconnectIncoming():void {
    incomingStream.close();
    incomingStream.removeEventListener(NetStatusEvent.NET_STATUS, incomingStreamHandler);
    incomingStream = null;
} 
```

*   `initConnection`初始化 NC，`sendInit`初始化发送流，`receiveInit`根据我复制粘贴到的远端对等 id 初始化传入流`incomingID.text`
*   我将每个结果打印到`receivedMessages.text`
*   我没有防火墙，也没有NAT。
*   Adobe 示例应用程序 ( [http://labs.adobe.com/technologies/cirrus/samples/](http://labs.adobe.com/technologies/cirrus/samples/) ) 运行良好。

我遵循的程序：

*   在应用程序 1 上初始化 NC。（发送方）
*   在应用程序 2 上初始化 NC。（接收方）
*   我将远端对等 id 复制到应用程序 2。并运行 receveInit。
*   我在应用程序 1 上初始化发送流 (sendInit)。

注意：我试图扭转最后两个过程，无论哪种方式都不起作用。

在此之后，我执行 sendMessage() 从`toSendText.text`.

不工作。为什么？我的代码有什么问题？

提前感谢您提供的每一个有用的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:22:42.653

因为 cc.rtmfp.net 是连接检查器，而不是 P2P 引入服务（p2p.rtmfp.net）。cc 执行一些快速测试，发送结果，然后断开连接。它不执行任何其他功能，也不提供任何其他服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T05:33:01.597

我发现。

对于开发和测试，我使用 Mac 并在那里测试了应用程序。不工作。还是不行。在 Windows 上，它可以完美运行。

奇怪的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T16:54:09.670

您必须为`receiveMessage()`. 否则它只是一个你必须调用它的函数。

# c++ - 使用 QtCreator(qmake) 编译 wtwithqt 示例

> ID：14661946
> 
> 赞同：0
> 
> 时间：2013-02-02T12:35:08.917
> 
> 标签：c++, qt, cmake, qmake, wt

我正在使用[Qt 开发](http://qt-project.org/)一个网络管理应用程序，我选择将[Wt](http://www.webtoolkit.eu/wt)用于 UI，因为有了它我就不必处理任何 Web 部件（PHP、AJAX、HTML/CSS）并且它可以在所有应用程序上使用平台。

我成功地使用 cmake 编译和运行示例。虽然我习惯了 QtCreator IDE 和 qmake，但我更愿意将其用于开发和编译。

**我试图在 QtCreator(qmake) 中编译[“wtwithqt”示例时遇到了困难。](https://github.com/kdeforche/wt/tree/master/examples/wtwithqt)**我一直在到处寻找一些如何用 qmake 编译它的指南。但是我发现没有任何帮助。

这是我的 .pro 文件。

*testWt.pro*

```
QT += core
QT -= gui

TARGET = helloqt
CONFIG += console no_keywords
CONFIG -=app_bundle

TEMPLATE = app

INCLUDEPATH += lib

LIBS += -lwt -lwthttp -lboost_signals -lboost_system -lboost_regex

QMAKE_CXXFLAGS += -DNDEBUG

HEADERS += \
    QtObject.h \
    HelloApplication.h

SOURCES += \
    hello.cpp \
    QtObject.cpp 
```

编译输出

```
13:28:15: Running build steps for project testWt...
13:28:15: Starting: "/usr/bin/make" clean -w
make: Entering directory `/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug'
/usr/bin/qmake-qt4 -spec /usr/share/qt4/mkspecs/linux-g++ CONFIG+=debug CONFIG+=declarative_debug -o Makefile ../testWt/testWt.pro
make: Leaving directory `/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug'
make: Entering directory `/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug'
rm -f moc_QtObject.cpp
rm -f hello.o QtObject.o moc_QtObject.o
rm -f *~ core *.core
make: Leaving directory `/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug'
13:28:15: The process "/usr/bin/make" exited normally.
13:28:15: Configuration unchanged, skipping qmake step.
13:28:15: Starting: "/usr/bin/make" -w
make: Entering directory `/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug'
g++ -c -pipe -DNDEBUG -g -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_KEYWORDS -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I../testWt -I/usr/include/qt4/QtCore -I/usr/include/qt4 -I../testWt/lib -I. -I../testWt -I. -o hello.o ../testWt/hello.cpp
g++ -c -pipe -DNDEBUG -g -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_KEYWORDS -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I../testWt -I/usr/include/qt4/QtCore -I/usr/include/qt4 -I../testWt/lib -I. -I../testWt -I. -o QtObject.o ../testWt/QtObject.cpp
/usr/bin/moc-qt4 -DQT_WEBKIT -DQT_NO_KEYWORDS -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I../testWt -I/usr/include/qt4/QtCore -I/usr/include/qt4 -I../testWt/lib -I. -I../testWt -I. ../testWt/QtObject.h -o moc_QtObject.cpp
g++ -c -pipe -DNDEBUG -g -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_KEYWORDS -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I../testWt -I/usr/include/qt4/QtCore -I/usr/include/qt4 -I../testWt/lib -I. -I../testWt -I. -o moc_QtObject.o moc_QtObject.cpp
g++  -o helloqt hello.o QtObject.o moc_QtObject.o    -L/usr/lib/i386-linux-gnu -lwt -lwthttp -lboost_signals -lboost_system -lboost_regex -lQtCore -lpthread 
hello.o: In function `HelloApplication':
/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug/../testWt/hello.cpp:43: undefined reference to `Wt::WQApplication::WQApplication(Wt::WEnvironment const&, bool)'
hello.o: In function `HelloApplication::propagateGreet()':
/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug/../testWt/hello.cpp:87: undefined reference to `Wt::toQString(Wt::WString const&)'
hello.o: In function `HelloApplication::doGreet(QString const&)':
/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug/../testWt/hello.cpp:92: undefined reference to `Wt::toWString(QString const&)'
hello.o: In function `~WQApplication':
/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug/../testWt/lib/WQApplication:82: undefined reference to `vtable for Wt::WQApplication'
hello.o:(.rodata._ZTV16HelloApplication[vtable for HelloApplication]+0x3c): undefined reference to `Wt::WQApplication::initialize()'
hello.o:(.rodata._ZTV16HelloApplication[vtable for HelloApplication]+0x40): undefined reference to `Wt::WQApplication::finalize()'
hello.o:(.rodata._ZTV16HelloApplication[vtable for HelloApplication]+0x44): undefined reference to `Wt::WQApplication::notify(Wt::WEvent const&)'
hello.o:(.rodata._ZTV16HelloApplication[vtable for HelloApplication]+0x5c): undefined reference to `Wt::WQApplication::realNotify(Wt::WEvent const&)'
hello.o:(.rodata._ZTI16HelloApplication[typeinfo for HelloApplication]+0x8): undefined reference to `typeinfo for Wt::WQApplication'
collect2: ld returned 1 exit status
make: Leaving directory `/home/nms-development/QtProject/testWt-build-desktop-Qt_4_8_1_in_PATH__System__Debug'
make: *** [helloqt] Error 1
13:28:28: The process "/usr/bin/make" exited with code 2.
Error while building project testWt (target: Desktop)
When executing build step 'Make' 
```

任何帮助表示赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:41:10.800

您的 makefile 非常合理，但我认为您忘记链接`wtwitqt`互操作层。添加`-lwtwithqt`到该`LIBS`行，

# javascript - 如何使用网格行内的按钮编辑/删除网格模型中的行？

> ID：14661949
> 
> 赞同：5
> 
> 时间：2013-02-02T12:35:54.990
> 
> 标签：javascript, button, extjs, row, edit

```
Ext.onReady(function() {
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [ 'name', 'class', 'view', 'edit', 'delete']
});
var userStore = Ext.create('Ext.data.Store', {
    model: 'User',
    data: [
        { name: 'Sri Vidhya', class: '6 A'},
        { name: 'Rafla', class: '9 C'},
        { name: 'Fabin', class: '10 B'},
        { name: 'Jayanthi', class: '8 C'},
        { name: 'Sri Vidhya', class: '6 A'},
        { name: 'Rafla', class: '9 C'},
        { name: 'Fabin', class: '10 B'},
        { name: 'Jayanthi', class: '8 C'},
        { name: 'Sri Vidhya', class: '6 A'},
        { name: 'Rafla', class: '9 C'},
        { name: 'Fabin', class: '10 B'},
        { name: 'Jayanthi', class: '8 C'}
    ]
});
Ext.create('Ext.grid.Panel', {
    cls: 'custom-grid',
    renderTo: Ext.getBody(),
    store: userStore,
    width: 389,
    height: 200,
    title: 'Student Details',
    columns: [
        {
            text: 'Student Name',
            cls: 'studentName',
            width: 100,
            sortable: true,
            hideable: false,
            dataIndex: 'name'
        },
        {
            text: 'Student Class',
            cls: 'studentClass',
            width: 150,
            sortable : true,
            dataIndex: 'class'   
        },
        {
            xtype:'actioncolumn', 
            width:40,
            tdCls:'delete',
            items: [{
                icon: 'Delete-icon.png',  // Use a URL in the icon config
                tooltip: 'Delete',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    //**rec.store.remove();**
                    //rec.store.remove()` is not working. 

                    Suggest me the code that will work here to remove the //entire row?
                    alert("Delete " + rec.get('name'));
                }
            }]
        },
        {
            xtype:'actioncolumn', 
            tdCls:'edit',
            width:40,
            items: [{
                icon: 'edit-icon.png',  // Use a URL in the icon config             
                tooltip: 'Edit',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    alert("Edit " + rec.get('name'));
                }
            }]
        },
        {
            xtype:'actioncolumn', 
            tdCls:'view',
            width:40,
            items: [{
                icon: 'view-icon.png',  // Use a URL in the icon config         
                tooltip: 'View',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    alert("View " + rec.get('name'));
                }
            }]
        }
    ]
});
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T12:49:50.493

```
grid.getStore().remove(rec); //or rec.destroy() if the url specified in model 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-02T13:56:18.430

```
grid.getStore().removeAt(rowIndex) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T07:13:59.317

```
//My Code Updated with delete options

Ext.onReady(function() {
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [ 'name', 'class', 'view', 'edit', 'delete']
});
var userStore = Ext.create('Ext.data.Store', {
    model: 'User',
    data: [
        { name: 'Sri Vidhya', class: '6 A'},
        { name: 'Rafla', class: '9 C'},
        { name: 'Fabin', class: '10 B'},
        { name: 'Jayanthi', class: '8 C'},
        { name: 'Sri Vidhya', class: '6 A'},
        { name: 'Rafla', class: '9 C'},
        { name: 'Fabin', class: '10 B'},
        { name: 'Jayanthi', class: '8 C'},
        { name: 'Sri Vidhya', class: '6 A'},
        { name: 'Rafla', class: '9 C'},
        { name: 'Fabin', class: '10 B'},
        { name: 'Jayanthi', class: '8 C'}
    ]
});
Ext.create('Ext.grid.Panel', {
    cls: 'custom-grid',
    renderTo: Ext.getBody(),
    store: userStore,
    width: 389,
    height: 200,
    title: 'Student Details',
    /*selType: 'User',
    plugins: [
        Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit: 1
        })
    ],*/
    columns: [
        {
            text: 'Student Name',
            cls: 'studentName',
            width: 100,
            sortable: true,
            hideable: false,
            dataIndex: 'name'
            /*editor: 'textfield'*/
        },
        {
            text: 'Student Class',
            cls: 'studentClass',
            width: 150,
            sortable : true,
            dataIndex: 'class'
            /*editor: 'textfield'*/         
        },
        {
            xtype:'actioncolumn', 
            tdCls:'view',
            width:40,
            items: [{
                icon: 'view-icon.png',  // Use a URL in the icon config         
                tooltip: 'View',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    alert("View " + rec.get('name'));
                }
            }]
        },
        {
            xtype:'actioncolumn', 
            tdCls:'edit',
            width:40,
            items: [{
                icon: 'edit-icon.png',  // Use a URL in the icon config             
                tooltip: 'Edit',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    alert("Edit " + rec.get('name'));
                }
            }]
        },
        {
            xtype:'actioncolumn', 
            width:40,
            tdCls:'delete',
            items: [{
                icon: 'Delete-icon.png',  // Use a URL in the icon config
                tooltip: 'Delete',
                handler: function(grid, rowIndex, colIndex) {
                    var rec = grid.getStore().getAt(rowIndex);
                    //rec.store.remove();
                    alert("Delete " + rec.get('name'));
                    grid.getStore().remove(rec); 
                    //grid.getStore().removeAt(rowIndex);
                }
            }]
        }
    ]
});
}); 
```

# automation - ESXi 5.1 每天或每晚恢复为快照

> ID：14661954
> 
> 赞同：3
> 
> 时间：2013-02-02T12:36:00.303
> 
> 标签：automation, snapshot, revert, esxi

我每天或晚上都在尝试将虚拟机恢复到以前的快照。不幸的是，我还没有找到任何方法来按照我想要的方式做到这一点。

以下是我尝试过但不适合的一些事情：

```
- snapshot.action=autoRevert --> The VM has to HALT, REBOOT doesn't work the same. I don't want to power on my VM manually.

- snapshot.action=autoRevert on a running snapshot. I tried this, thinking it might work and resolve the first issue. But when i HALT my VM, the snapshot is reverted but the VM is placed in a suspended state...

- PowerCLI script : I don't want to have a Windows machine running just for this little thing.

- NonPersistent disk : same thing as the first issue : VM needs to HALT, not REBOOT. 
```

我怎么能简单地做到这一点？我以为我可以做这些事情并在我的 linux VM 上放置一个 cron 来每天晚上重新启动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T00:13:48.083

过去，我设置了脚本，通过我的 ESXi 主机上的 SSH 服务器将虚拟机恢复为特定快照。启用 sshd 后，您可以通过 SSH 远程运行 vim-cmd。这是在 ESXi 4.x 上，但我认为在较新的版本中也可以这样做。

问题是我必须启用所谓的“技术支持模式”才能运行 sshd，如 VMware KB 中所述：[kb.vmware.com/kb/1017910](http://kb.vmware.com/kb/1017910)

我使用的过程是首先通过运行以下命令查找相关 VM 的 ID：

```
vim-cmd vmsvc/getallvms 
```

然后，您可以通过将其 ID 传递给此命令来查看 VM 的快照树（此示例使用 ID 为 80 的 VM）：

```
vim-cmd vmsvc/get.snapshotinfo 80 
```

最后，您可以使用 SSH 客户端通过将 VM 和快照 ID 传递给“snapshot.revert”来远程将 VM 还原为任意快照：

```
ssh root@YOUR_VMWARE_HOST vim-cmd vmsvc/snapshot.revert VM_ID 0 SNAPSHOT_ID 
```

要注意的另一件事是，您可以在 ESXi 服务器和运行脚本的机器之间设置公钥身份验证，这样后者就不必使用密码。

这种方法的唯一烦恼是我没有立即看到在重新启动之间保留 ESXi 服务器上的 authorized_keys 文件的方法 - 如果必须重新启动 ESXi 服务器，则必须在公钥验证之前重建其 authorized_keys 文件将再次工作。

# visual-studio - 迭代始终默认为第一个项目并且无法选择当前项目

> ID：14661958
> 
> 赞同：0
> 
> 时间：2013-02-02T12:36:31.010
> 
> 标签：visual-studio, tfs, azure-devops

我正在使用 Team Foundation Service（云中的 TFS）进行源代码控制。在我的帐户中，我有多个项目。通过网站，我可以看到第一个项目设置了默认的 Release & Sprint 层次结构。我有另一个项目，我创建了一些版本和冲刺。在网络管理员中，我还为我的项目设置了不同的区域。

在 Visual Studio 2012 中，当我去创建一个任务（TEAM > NEW TASK）时，它总是将 AREA=[FirstProject] 和 ITERATION 选项显示为仅 [FirstProject]。我无法将区域更改为不同的区域或迭代。它就像 Visual Studio 被“卡在”[FirstProject] 中一样，并且在处理任务和积压项目时不会让我进入我的任何其他项目。但是我可以在 Web 客户端中创建任务。在 Visual Studio 中，我还可以运行查询和查找任务。

所以，我试图弄清楚如何确保我可以使用 Visual Studio 2012 来创建和管理任务，而不必每次都访问网站。它卡在一个项目上。想法？

注意我没有遇到任何其他源代码控制问题......这只是处理任务的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:58:47.063

在 Visual Studio 2012 的“团队资源管理器”中，您可以通过单击选择所需的团队项目：

*   “首页 | [FirstProject]”、“项目”，然后选择其他项目。

此外，在 Visual Studio 2012.2（更新 2）中，团队资源管理器顶部还有一个“插头”外观图标，这允许从团队资源管理器中的面板而不是菜单访问许多服务器、集合和团队项目。

![在此处输入图像描述](../Images/372b20b244dd22c73647db93708acef2.png)

# iphone - 不需要时对 NSURLConnection 进行身份验证

> ID：14661960
> 
> 赞同：3
> 
> 时间：2013-02-02T12:36:41.553
> 
> 标签：iphone, ios, objective-c, nsurlconnection

我正在尝试从谷歌趋势下载文件。我正在使用 NSURLConnection 来获取文件。

我想让谷歌知道我已经登录（即验证连接），以便没有下载限制。我尝试使用：

```
- (void)connection:(NSURLConnection *)connection willSendRequestForAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge 
```

问题是由于**不需要**登录，因此永远不会调用该方法。有没有办法确保连接经过身份验证？谢谢！

[注意：我在这里](https://stackoverflow.com/questions/14661960/authentication-for-nsurlconnection-when-it-is-not-required)之前问过这个问题，但我没有得到答复，所以我再次问 - 希望没关系

**编辑：**也许我可以使用`- (NSCachedURLResponse *)connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse`？我可以通过缓存以某种方式进行身份验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:44:00.160

您必须设置正确的`NSURLRequest`. 看看这个[帖子](https://stackoverflow.com/questions/1973325/nsurlconnection-and-basic-http-authentication)的答案。您也必须寻找[base64](https://stackoverflow.com/questions/392464/any-base64-library-on-iphone-sdk)编码。

# node.js - 使用 Node.js 和 Express 清空目录

> ID：14661968
> 
> 赞同：0
> 
> 时间：2013-02-02T12:38:16.687
> 
> 标签：node.js, express

我正在寻找一种方法来清空 Express 中的目录。

基本上，我有一个`tmp`存储临时文件的目录，我经常只想清空所有文件的文件夹，而**不是**删除文件夹本身。

做这个的最好方式是什么？我目前正在使用`Node v0.8.9`和`Express v.3.0.0rc4`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:43:30.100

要么检查这个小而甜蜜的模块。

[https://github.com/isaacs/rimraf](https://github.com/isaacs/rimraf)

或者查看官方文档和示例。

[http://nodejs.org/docs/v0.4.1/api/fs.html#file_System](http://nodejs.org/docs/v0.4.1/api/fs.html#file_System)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T22:19:34.297

我写了这个叫做删除文件夹的函数。它将递归删除某个位置的所有文件和文件夹。它唯一需要的包是异步的。var async = require('async');

```
function removeFolder(location, removeFolder, next) {
    fs.readdir(location, function (err, files) {
        async.each(files, function (file, cb) {
            file = location + '/' + file
            fs.stat(file, function (err, stat) {
                if (err) {
                    return cb(err);
                }
                if (stat.isDirectory()) {
                    removeFolder(file, true, cb);
                } else {
                    fs.unlink(file, function (err) {
                        if (err) {
                            return cb(err);
                        }
                        return cb();
                    })
                }
            })
        }, function (err) {
            if (err) return next(err)
            fs.rmdir(location, function (err) {
                return next(err)
            })
        })
    })
} 
```

我对其进行了一些更改，以不删除原始文件夹调用它：

```
removeFolder('/tmp', false, function(err){
    //callback
}) 
```

# php - 一段时间后，Javascript Ajax 页面开始响应缓慢？

> ID：14661970
> 
> 赞同：2
> 
> 时间：2013-02-02T12:38:32.377
> 
> 标签：php, javascript, ajax, xmlhttprequest, google-maps-markers

我有一个 JavaScript ajax 页面，它每 20 秒触发一个 ajax 请求（使用 setInterval 函数）并获得`JSON`格式的响应。在页面中；使用`JSON`响应我在谷歌地图上显示标记（使用 API v3），并根据从`ajax`响应中收到的位置每 20 秒更新一次。我正在显示`infoWindow`标记的点击事件。

我使用 PHP 作为服务器端脚本，它通过执行一些数据库调用来生成我的 ajax 响应。

当我打开页面时一切正常。但慢慢地页面开始响应缓慢。我的意思是当我单击标记或相关文本时，页面需要花费大量时间来定位标记、加载地图并打开`infoWindow`. 随着时间的推移，页面的缓慢性会增加。如果我刷新页面，一切都会再次开始正常工作。

该页面在任何时候甚至都不会显示一个错误，我必须补充一点，标记位置的自动更新在页面的整个生命周期中都可以正常工作。

我已经尝试了在论坛上找到的所有内容。就像，我已经`json`从回应转向`xml(dom)`回应。我尝试更改`XMLHttpRequest`方法，因为 GET 请求倾向于自动缓存数据。但没有任何帮助。我完全一无所知，出了什么问题，我在我的代码中做了什么。

这是我的 JavaScript 代码：

```
 <script type="text/javascript">
    var map;
var contentString = "";
var infoWindow = new google.maps.InfoWindow({content: contentString});
var url = "genAjaxResponse.php?id=<?php echo $id; ?>";
var marker;
var gmarkers = new Array();
var icon;

var lastClickedMarker;
var stImgId;

var customIcons = {
  Moving: {
    icon: 'icons/abc.png'
  },
  Idle: {
    icon: 'icons/xyz.png'
  },
  Parked: {
    icon: 'icons/pqr.png'
  },
  Alert: {
    icon: 'icons/wxy.png'
  }
};

function load() {  // to be called on onload event of body
  map = new google.maps.Map(document.getElementById("map"), {           
        zoom: 6,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        scaleControl: true,
        center:new google.maps.LatLng(15.570128,78.957092)
  });

  calldownloadUrl(url,map,infoWindow);

  directionsDisplay = new google.maps.DirectionsRenderer();
}

function calldownloadUrl(url,map,infoWindow) {
    downloadUrl(url,displayMarker,map,infoWindow);  
}

function displayMarker(data,map,infoWindow) {

    function generateTriggerCallback(object, eventType) {
        return function() {
            google.maps.event.trigger(object, eventType);
        };
    }

var namearr = Array();
    var json = data.responseText;
    var vehicles = eval ("(" + json + ")");

    var i = 0;
    for (var veh in vehicles)
    {
    var tag = vehicles[veh];            
    var veh_no = tag["veh_no"];
        var is_stale = tag["is_stale"];
        var ignition_off = tag["ignition_off"];
        var speed = tag["speed"];
        var lat = tag["lat"];
        var lng = tag["lng"];
        var time = tag["time_stamp"];
        var address = tag["address"];

        var point = new google.maps.LatLng(
            parseFloat(lat),
            parseFloat(lng));
        var type;                 
        var status;

        stImgId = i+1;
        if(ignition_off == 0 && speed > 3) {
            type = "Moving";
            status = type + "(" + speed + " Kmph)"; 
            document.getElementById("img"+stImgId).src = "icons/greenalert2.png";
        }
        else {
            if(ignition_off == 1) {
                type = "Parked";
                status = type;
                document.getElementById("img"+stImgId).src = "icons/greyalert2.png";
            }
            else {
                type = "Idle";
                status = type;
                document.getElementById("img"+stImgId).src = "icons/yellowalert2.png";
            }
        }
        if(is_stale == 1) {
            type = "Alert";
            status = type;
            document.getElementById("img"+stImgId).src = "icons/redalert2.png";
        }                 

        infoWindow.close();

        var icon = customIcons[type] || {};         
        if(typeof gmarkers[i] != 'undefined') { 
            gmarkers[i].setPosition(point); 
            gmarkers[i].setIcon(icon.icon);
            if(gmarkers[i].id == lastClickedMarker)  {
                if(map.getBounds().contains(gmarkers[i].getPosition()) === false)
                    map.setCenter(gmarkers[i].getPosition());
            }                   
        }
        else
        { 
            gmarkers[i] = new google.maps.Marker({ 
                    id: i,
                    position: point,
                    icon: icon.icon,
                    title: veh_no,
                    map: map
            }); 
        }
        var html = "<span><p><b>"+veh_no +"</b></p> <p>Address: "+address+"<br />Status: "+status+"<br />Time: "+time+"</p></span>";

        namearr[i] = "<span><p><b>"+veh_no +"</b></p> <p>Address: "+address+"<br />Status: "+status+"<br />Time: "+time+"</p></span>";

        // -- bind click event to texts (vehicle nos) -- //
        var textclick = document.getElementById(i);
        textclick.onclick = generateTriggerCallback(gmarkers[i],"click");
        // -- bind click event to markers -- //
        bindinfoWindow(gmarkers[i], map, infoWindow, namearr[i], icon);
        i++;
    }
}

function bindinfoWindow(marker, map, infoWindow, html, icon) {
  google.maps.event.addListener(marker, 'click', function() {       
    lastClickedMarker = marker.id;
    map.setCenter(marker.getPosition());
    if(map.zoom < 15)
        map.setZoom(15);        
    marker.setIcon(icon.icon);        
    marker.setZIndex(google.maps.Marker.MAX_ZINDEX + 1);        
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback, map, infoWindow) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, map, infoWindow, request.status);
    }
  };

  request.open('GET', url, true);
  request.send();
}

function doNothing() {}

window.setInterval(function() {calldownloadUrl(url,map,infoWindow)},20000);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:52:36.217

`gmarkers`我认为每次调用该 ajax 请求时都需要清空数组，或者`i`在处理接收到的数据之前重置变量。通过这种方式，您不会将所有新标记添加到以前的标记中，这似乎是您代码中的瓶颈。

PS我没有测试你的代码。我只是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T15:39:53.380

我有一个类似的应用程序，我也遇到了类似的行为。就我而言，我每 30 秒更新一次标记数组（对于每个标记：位置、图标、侦听器的内容）。

**首先**，我已经停止在每次更新时创建一个新的标记，我认为设置`markers[id].setMap(null);`和创建一个新标记就可以了，CG 会处理这个问题。

**然后**我将代码更改为仅更新标记位置、图标和侦听器，如下所示：

```
 this.markers[id].setPosition(new google.maps.LatLng(lat, lng));
 this.markers[id].setIcon(this.updateFlags(status, id));

 google.maps.event.addListener(this.markers[id], 'mouseover', function () {
     infoWindow.setContent(text);
     infoWindow.open(this.map, this);
 });

 google.maps.event.addListener(this.markers[id], 'click', function () {
     devices.selectDevice(index);
 }); 
```

这产生了更少的内存消耗，但仍然......

**最后**我编辑了这样的代码：

```
 this.markers[id].setPosition(new google.maps.LatLng(lat, lng));
 this.markers[id].setIcon(this.updateFlags(status, id));

 google.maps.event.clearListeners(this.markers[id], 'mouseover');
 google.maps.event.clearListeners(this.markers[id], 'click');

 google.maps.event.addListener(this.markers[id], 'mouseover', function () {
     infoWindow.setContent(text);
     infoWindow.open(this.map, this);
 });

 google.maps.event.addListener(this.markers[id], 'click', function () {
     devices.selectDevice(index);
 }); 
```

我已经在**Chrome Developer Tools (F12) -> Profiler**和**Take Heap Snapshot**中对其进行了测试。你会看到它是否增长得太快。

**So in your case it would mean adding this line as the first line of function bindinfoWindow():**

```
google.maps.event.clearListeners(marker, 'click'); 
```

# android - 图像分析库/功能

> ID：14661972
> 
> 赞同：5
> 
> 时间：2013-02-02T12:38:42.733
> 
> 标签：android, image-processing, android-camera, face-recognition

我有一个想法来创建一个应用程序，使我能够分析来自 Android 上的拍照手机的图像。我正在考虑创建一个可以识别人脸的应用程序（现在这只是一个想法），但首先我想创建一些更简单的东西（例如检测蓝色圆圈旁边的红色方块的应用程序）。android 是否有任何库或功能可以帮助我识别我使用照相手机制作的图片中的形状（如正方形、矩形、圆形）和颜色？欢迎任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T12:43:44.027

I think Augmented Reality in android will help you [http://code.google.com/p/andar/](http://code.google.com/p/andar/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T12:42:23.870

Take a look at [http://opencv.org/android](http://opencv.org/android).

Face detector is already implemented by android api: [http://developer.android.com/reference/android/media/FaceDetector.html](http://developer.android.com/reference/android/media/FaceDetector.html)

# html - 图像悬停仅在 Google Chrome 上正常工作

> ID：14661984
> 
> 赞同：0
> 
> 时间：2013-02-02T12:39:50.583
> 
> 标签：html, css, hover

我制作了一个垂直图像滑块，每个图像都是一个链接，当图像悬停时，一个不透明度为 0.4 的黑色“玻璃窗格”覆盖图像并显示一些文本。其实背景是透明的png

问题是它只能在谷歌浏览器中正确显示。

*   Opera：我只看到玻璃窗格，但看不到上面的文字
*   Firefox：我看不到玻璃窗格，但我仅在前 2 个项目中看到玻璃窗格上的文本，第三个文本未显示，并且图像之间的间距与 Google Chrome 和 Opera 显示的不同
*   IE：图片间距与谷歌浏览器和Opera显示的不同，hover什么都不做，不显示玻璃窗格，甚至不显示文本。

[http://alessandroderoma.it/try/slider/](http://alessandroderoma.it/try/slider/)

谷歌浏览器中显示的内容需要在所有其他浏览器中显示。

但是，这是我正在使用的 html 代码：

```
<div id="vertical_slideshowwrapper">
    <div class="vertical_slideshow" style="visibility: visible; overflow: hidden; position: relative; z-index: 2; left: 0px; height: 489px;">
        <ul style="margin: 0px; padding: 0px; position: relative; list-style-type: none; z-index: 1; height: 4564px; top: -1956px;">
            <li style="overflow: hidden; float: none; width: 165px; height: 489px;">
                <a href="#" target="_self">
                    <img src="images/1.png" border="0">
                    <div class="box"><p>Text 1</p></div>
                </a>
                <a href="#" target="_self">
                    <img src="images/2.png" border="0">
                    <div class="box"><p>Text 2</p></div>
                </a>
                <a href="#" target="_self">
                    <img src="images/3.png" border="0">
                    <div class="box"><p>Text 3</p></div>
                </a>
            </li>
            <li style="overflow: hidden; float: none; width: 165px; height: 489px;">
                <a href="#" target="_self">
                    <img src="images/4.png" border="0">
                    <div class="box"><p>Text 4</p></div>
                </a>
                <a href="#" target="_self">
                    <img src="images/5.png" border="0">
                    <div class="box"><p>Text 5</p></div>
                </a>
                <a href="#" target="_self">
                    <img src="images/6.png" border="0">
                    <div class="box"><p>Text 6</p></div>
                </a>
            </li>
            <li style="overflow: hidden; float: none; width: 165px; height: 489px;">
                <a href="#" target="_self">
                    <img src="images/7.png" border="0">
                    <div class="box"><p>Text 7</p></div>
                </a>
                <a href="#" target="_self">
                    <img src="images/8.png" border="0">
                    <div class="box"><p>Text 8</p></div>
                </a>
                <a href="#" target="_self">
                    <img src="images/9.png" border="0">
                    <div class="box"><p>Text 9</p></div>
                </a>
            </li>
        </ul>
    </div>
</div> 
```

和CSS：

```
 body{
        background-color:#000;
    }
    DIV#vertical_slideshowfooter { 
        display:block; 
        padding-top: 10px; 
        font-family: Tahoma,Verdana,sans-serif; 
        font-size: 8px; 
        font-weight: bold; 
    } 
    div#vertical_slideshowwrapper { 
        width: 100%; 
        height: 100%; 
        overflow: hidden; 
        margin: 0px auto;  
    } 
    .vertical_slideshow ul li { 
        list-style:none; 
        margin-bottom:1px; 
        display:block; 
    } 
    .vertical_slideshow li img { 
        margin-right: 5px; 
        margin-top:1px; 
        margin-bottom:1px; 
        width: 160px; 
        height: 162px; 
    } 

    body{
        padding-top:0px;
        padding-left:0px;
        margin-top:0px;
        margin-left:0px;
    }

    .box {
        position: relative;
        left: 0;
        margin-top: -163px;
        width: 160px;
        height: 163px;
        background-image: url(images/bg.png);
        background-position:0 0;
        text-indent:-99999px;
    }

    .box:hover {
        background-position:-160px 0;
        text-indent:0;
    }

    .box p{
        position:absolute;
        font-family: Arial, Helvetica, Sans-Serif;
        bottom: -8px;
        right: 6px;
        font-variant: normal;
        font-weight: bold;
        font-size: 11px;
        text-align: left;
        text-decoration: none;
        text-transform: uppercase;
    }

    .box a, a:visited, a:hover{
        color:white;
        text-decoration:none;
    } 
```

我究竟做错了什么？任何帮助，将不胜感激

CSS 验证器结果：

[http://jigsaw.w3.org/css-validator/validator?uri=alessandroderoma.it%2Ftry%2Fslider&profile=css3&usermedium=all&warning=1&vextwarning=&lang=it](http://jigsaw.w3.org/css-validator/validator?uri=alessandroderoma.it%2Ftry%2Fslider&profile=css3&usermedium=all&warning=1&vextwarning=&lang=it)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:43:42.850

放置在您的 html 页面的行首下方。

```
<!DOCTYPE html> 
```

类似[的帖子](https://stackoverflow.com/a/881015/1719369)

**编辑**
我认为歌剧中存在问题`text-indent`。
我可以建议你一个答案。
最初使文本颜色为**黑色**，当悬停时使其变为**白色**

```
.box {  
    position: relative;
    left: 0;
    margin-top: -163px;
    width: 160px;
    height: 163px;
    background-image: url(images/bg.png);
    background-position:0 0;
    color:black;        /*added*/
    }   

.box:hover {
    background-position:-160px 0;
    text-indent:0;
    color:white;    /*added*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:30:35.003

只是一个建议：其他浏览器不支持某些 css 标签也许你可能想检查一下 IE [http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html) 你看看这个链接[http://www。 quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T11:03:03.597

正如新开发人员所说，我添加了

```
<!DOCTYPE html> 
```

在我的 HTML 文档的顶部，它使我的 html 输出在所有浏览器上都非常相似，并使鼠标悬停在 css 上以与 IE 一起使用，但没有解决我的 Opera 问题，图像上的文本仍然没有被显示。我搜索了很多，我发现 Opera 仅对`block`元素启用文本缩进，但甚至添加

```
display: inline-block 
```

我的`.box`元素并没有解决问题，所以我不得不找到一个解决方法。

我使用`padding`而不是解决了它`text-indent`：

```
.box {
    padding-left: 99999px;
    overflow: hidden;
}

.box:hover {
    padding-left: 0px;
} 
```

它有效，这不是一个解决方案，但对我来说这是一个很好的解决方法。

感谢所有帮助过的人！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-02T16:35:29.170

您可以使用背景颜色代替图像。因为您可以像图像一样设置背景颜色的透明度。将滑块的标题放入 div 类中，并为所需的输出写下以下代码。

.your_css_class
{
背景：#FDF7A6; /* 设置背景颜色 */
opacity: 0.5;/* 设置不透明度 */
}

还要记住设置 div 类的宽度、高度和位置。希望这对你有用。

# php - 如何使用 PHP/MySQL 在正确的行中插入 ID？

> ID：14661985
> 
> 赞同：1
> 
> 时间：2013-02-02T12:40:14.153
> 
> 标签：php, mysqli

假设我有3个问题：

```
QuestionNo   Video
1            
2            wildlife.mp4
3
4            colors.mp4
             sports.mp4 
```

现在我正在做的是将每个问题插入数据库，为每个问题提供自己的自动 QuestionId，所以它现在在技术上看起来像这样：

```
QuestionId    QuestionNo  Video
123           1
124           2           wildlife.mp4
125           3
126           4           colors.mp4 
                          sports.mp4 
```

现在下面是db中的问题表：

```
QuestionId (pk auto)  QuestionNo
123                   1
124                   2
125                   3
126                   4 
```

现在每个视频都存储在 Video Table 中自己的 id 中：

```
VideoId (auto pk)   VideoFile
12                  wildlife.mp4
13                  colors.mp4
14                  sports.mp4 
```

现在终于，这就是问题所在，我有一个 Video_Question 表，我们用它来了解哪个视频进入哪个问题。现在的问题是我为此设置插入的方式是它检索最后一个 QuestionId 插入，然后找到它找到的第一个 videoId 并使用该 QuestionId 显示它。这是不正确的，因为这意味着视频存储在错误的问题中。在上述示例的 db 中，它将像这样显示：

Video_Question 表：

```
VideoQuestionId (auto pk)  QuestionId  VideoId
4                          123         12
5                          124         13
6                          124         14 
```

以上不正确，因为 VideoId 12 不应该属于 QuestionId 123，它应该在 124 中，VideoId 13 和 14 应该在 126 中，而不是像下面的 124：

Video_Question 表：

```
VideoQuestionId (auto pk)  QuestionId  VideoId
4                          124         12
5                          126         13
6                          126         14 
```

我的问题是，看看上面的例子，我怎样才能用正确的 QuestionId 插入 videoid？我认为问题在于它没有认识到问题可能没有视频，但我不确定，因此我为什么要寻求帮助>

下面是插入 Question 表和 Video_Question 表的代码：

```
// Prepare your statements ahead of time
$questionsql = "INSERT INTO Question (SessionId, QuestionNo,
    QuestionContent, NoofAnswers, ReplyId, QuestionMarks, OptionId) 
    VALUES (?)";
if (!$insert = $mysqli->prepare($questionsql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

$videoquestionsql = "INSERT INTO Video_Question (VideoId, QuestionId)  
    VALUES (?, ?)"; 

if (!$insertvideoquestion = $mysqli->prepare($videoquestionsql)) { 
    // Handle errors with prepare operation here 
    echo __LINE__.': '.$mysqli->error; 
} 

//make sure both prepared statements succeeded before proceeding
if( $insert && $insertvideoquestion)
{
    $c = count($_POST['numQuestion']);
    $question_ids = array();

    for($i = 0;  $i < $c; $i++ )
    {

        $questionNo = $_POST['numQuestion'][$i];

        $insert->bind_param("i", $questionNo);

        $insert->execute();

        if ($insert->errno) 
        {
            // Handle query error here
        echo __LINE__.': '.$insert->error;
        break 1;
        }

        $questionId = $mysqli->insert_id;

        $question_ids[$questionNo] = $questionId;
    }

    $vidresults = $_POST['vidid'];

    foreach($vidresults as $videoid => $vidvalue) 
    {

         $video = $vidvalue;

         $vidquesid = (int)$question_ids[$videoid];  

         foreach($vidvalue as $video) 
         {

             $insertvideoquestion->bind_param("ii",$video, $vidquesid); 

             $insertvideoquestion->execute(); 

             if ($insertvideoquestion->errno) { 
                 // Handle query error here 
                 echo __LINE__.': '.$insertvideoquestion->error;
                 break 5;
             } 

         }
    }

    $insertvideoquestion->close(); 
    $insert->close();

} 
```

更新：

以下是与上述示例匹配的 var_dumps，唯一的区别是文件名和 id 号。上面提到的例子有4个问题：

var_dump($question_ids);

```
 array(4) { 
[1]=> int(277) 
[2]=> int(278) 
[3]=> int(279) 
[4]=> int(280) 
} 
```

var_dump($_POST['vidid']);

```
array(3) { 
[1]=> array(1) { 
[0]=> string(3) "148" 
} 
[2]=> array(1) { 
[0]=> string(3) "149" 
} 
[3]=> array(1) { 
[0]=> string(3) "150" 
} } 
```

将上面的 var_dumps 组合在一起看起来像这样：

```
array(4) { 
[1]=> int(289) 
[2]=> int(290) 
[3]=> int(291) 
[4]=> int(292) 
} 
array(3) { 
[1]=> array(1) { 
[0]=> string(3) "148"
} 
[2]=> array(1) { 
[0]=> string(3) "149" 
} 
[3]=> array(1) { 
[0]=> string(3) "150" 
} } 
```

**额外细节：**

通过使用这行代码：

```
$('.hiddenvid').append('<input type="hidden" name="vidid[' + videocounter + '][]" id="'+videoID+'" value="' + videoID + '" />'); 
```

它能够为每个上传的视频检索并显示`VideoId`插入到表格中的内容。`Video`因此，例如，如果`Wildlife.mp4`has `VideoId`which is `32`，那么在隐藏输入中，它将显示`32`应用程序中该视频的隐藏输入中的数字。

然后通过使用多维数组并使用`videocounter`which 是一个以 0 开头并使用`++`, - 为每个问题递增的变量`name="vidid[' + videocounter + '][]"`，每个输入都属于一个问题编号，具体取决于上传视频的问题。例如，如果上传了视频在问题 2 中，输入识别检索到的视频 id 属于问题 2。如果我为问题 4 执行此操作，那么它将识别出输入属于问题 4，依此类推。

这是一个演示，你可以用它来看看它是如何工作的（我将隐藏的输入更改为文本输入，这样你就可以看到发生了什么）：[演示](http://helios.hud.ac.uk/u0867587/Mobile_app/Text34.php)

更新：

目前在 Video_QuestionId 中插入数据时，QuestionId 显示为 0，以下代码是否正确：

```
function stopVideoUpload(success, videoID, videofilename){

      var result = '';
      videocounter++;

      var questionNum = $(this).closest('td').siblings('.qid').find('input.num_questionsRow').val();

      if (success == 1){
         result = '<span class="videomsg'+videocounter+'">The file was uploaded successfully</span>';
            $('.hiddenvid').append('<input type="text" name="vidid['+questionNum+'][]" id="'+videoID+'" value="' + videoID + '" />');
            $('.listVideo').eq(window.lastUploadVideoIndex).append('<div>' + htmlEncode(videofilename) + '<button type="button" class="deletefilevideo" data-videoID="'+videoID+'"  data-video_file_name="' + videofilename + '" value="'+videoID+'">Remove</button><br/><a href="previewvideo.php?filename='+ videofilename +'" title="Click to view in New window" target="_blank">Test Video<hr/></div>');
          }

....

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:32:49.633

我在您的前端看不到任何将上传的视频与它们相关的问题联系起来的地方。因此，当您提交表单时，它基本上只是发送两个不相关的列表`numQuestion`：（q1，q2，q3...）和`vidid`：（videos1[]，videos2[]，videos3[]...）。数组键只是它们添加的顺序，这不是您想要的。

有许多不同的方法可以解决这个问题，但最直接的方法是更改​​为视频构建这些隐藏字段的方式，以便它们与问题的 id 相关。

代替：

```
<input type="text" name="vidid[]" id="'+videoID+'" value="' + videoID + '" /> 
```

你希望这像

```
<input type="text" name="vidid['+questionNum+'][]" id="'+videoID+'" value="' + videoID + '" /> 
```

`questionNum`视频是针对哪里的问题。

编辑：

您将无法在函数调用时确定这一点，`stopVideoUpload()`因此您需要为该函数创建一个新参数并将此值传入。这意味着视频上传的 PHP 代码当然需要知道要传递什么值到`stopVideoUpload()`. 您应该能够通过更改“添加问题”行为将问题编号放在视频上传表单的字段中来轻松完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:42:48.493

它可能试图插入两个值作为主键。如果是这种情况，请将数据库字段设置为非自动增量。然后---父母作为视频ID，以将每个问题与它自己的个人ID相匹配。如果是这种情况，您将无法正确插入已创建的行。，请为它们使用更新。此外，在使用自动递增时，某些表不会如您所愿。如果是这种情况，请关闭自动递增并放置--max(id2)+1-- 代替所有主 $id 的值条目。---------------select max(id)+1, "'.$AnswerId.'" 等。此外，每个表都应该有每个对应的 parent-id。

```
 video-table
    ------------pid------
    questions-table
    ------------qid-----pid----id
    video-question-table
    ------------id------qid----pid

    if(mysql_query('insert into questions (id, parent, questionContent, NoofAnswers,
    ReplyId, AnswerId) select "'.$id.'", "'.$res['parent'].'", "'.$questionCont.'",
    "'.$Noofanswers.'", "'.$ReplyId.'", "'.$AnswerId.'" from questions where
    id="'.$id.'"') and mysql_query('update videos_questions set VideoId="'.$vid.'"and set
    QuestionId="'.$qid where id="'.$id.'" and parent=1'))  etc. 
```

# jquery - JQGrid 对数组数据进行分组和排序

> ID：14661986
> 
> 赞同：0
> 
> 时间：2013-02-02T12:40:23.477
> 
> 标签：jquery, jqgrid, grouping, sorting

我正在使用 JQgrid 通过分组和排序来显示我的数据。加载我的页面时，它根本不显示分组。但是，在我对列进行排序后它工作正常，它显示分组。我希望在我的页面加载时显示分组。我也对使用的 css 和 js 文件感到困惑。下面是我的代码。请帮我。

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

<link rel="stylesheet" type="text/css" media="screen" href="css/ui-lightness/jquery-ui-1.8.2.custom.css" />

<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />

<link rel="stylesheet" type="text/css" media="screen" href="/js/src/css/ui.multiselect.css" />

<link rel="stylesheet" type="text/css" media="screen" href="themes/basic/grid.css" />

<link rel="stylesheet" type="text/css" media="screen" href="themes/jqModal.css" />

 <style type="text">
        html, body {
        margin: 0;            /* Remove body margin/padding */
        padding: 0;
        overflow: hidden;    /* Remove scroll bars on browser window */
        font-size: 75%;
        }
    </style> 

<!--<script src="js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script>-->

<script type="text/javascript" src="js/jquery.jqGrid.min.js"></script>

<!--<script src="js/jquery-1.4.2.js" type="text/javascript"></script>-->

<script src="js/jquery.js"  type="text/javascript"></script>

<script src="js/jquery.jqGrid.js" type="text/javascript"></script>

<script src="js/src/jqModal.js" type="text/javascript"></script>

<script src="js/src/jqDnR.js" type="text/javascript"></script>

<script src="js/ui.multiselect.js" type="text/javascript"></script>

<script src="js/jquery.tablednd.js" type="text/javascript"></script>

<script src="js/jquery.contextMenu.js"  type="text/javascript"></script>

<script src="js/jquery.layout.js" type="text/javascript"></script>

<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>

<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $("#list4").jGrid.no_legacy_api = true; 
    </script>

<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="js/src/grid.loader.js" type="text/javascript"></script>

<script type="text/javascript">

   $(function(){ 
  $("#list4").jqGrid({

                        data: mydata,
                        datatype: "local",
                        height: 'auto',
                       colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'], 
                       colModel:[ {name:'id',index:'id', width:60, sorttype:"int"}, 
                       {name:'invdate',index:'invdate', width:90, sorttype:"date", formatter:"date"}, 
                       {name:'name',index:'name', width:100, editable:true}, 
                       {name:'amount',index:'amount', width:80, align:"right",sorttype:"float", formatter:"number", editable:true}, 
                 {name:'tax',index:'tax', width:80, align:"right",sorttype:"float", editable:true}, 
                 {name:'total',index:'total', width:80,align:"right",sorttype:"float"}, 
                 {name:'note',index:'note', width:150, sortable:false} ],
                                pager: '#pager',
                                rowNum:30,
                                rowList:[10,20,30],                               
                                loadonce: true,
            sortable:true, 
                                viewrecords: true,                                
                                imgpath: "themes/basic/images",
                               caption: "Grouping Array Data",
                               sortname: 'name',
                               grouping:true, 
        groupingView : { groupField : ['name'], groupColumnShow : [true],groupOrder : ['asc'],groupText : ['<b>{0}</b>', '{0}'] },
        groupDataSorted : true,
         plusicon: 'bullet_toggle_plus',
    minusicon: 'bullet_toggle_minus'
        //Required for client side sorting
//    loadonce: true,

    }    
            );

   var mydata = [ {id:"1",invdate:"2010-05-24",name:"test",note:"note",tax:"10.00",total:"2111.00"} , 
   {id:"2",invdate:"2010-05-25",name:"test2",note:"note2",tax:"20.00",total:"320.00"}, 
   {id:"3",invdate:"2007-09-01",name:"test3",note:"note3",tax:"30.00",total:"430.00"}, 
   {id:"4",invdate:"2007-10-04",name:"test",note:"note",tax:"10.00",total:"210.00"}, 
   {id:"5",invdate:"2007-10-05",name:"test2",note:"note2",tax:"20.00",total:"320.00"}, 
   {id:"6",invdate:"2007-09-06",name:"test3",note:"note3",tax:"30.00",total:"430.00"}, 
   {id:"7",invdate:"2007-10-04",name:"test",note:"note",tax:"10.00",total:"210.00"}, 
   {id:"8",invdate:"2007-10-03",name:"test2",note:"note2",amount:"300.00",tax:"21.00",total:"320.00"}, 
   {id:"9",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"}, 
   {id:"11",invdate:"2007-10-01",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"}, 
   {id:"12",invdate:"2007-10-02",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"}, 
   {id:"13",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"}, 
   {id:"14",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"}, 
   {id:"15",invdate:"2007-10-05",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"}, 
   {id:"16",invdate:"2007-09-06",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"}, 
   {id:"17",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"}, 
   {id:"18",invdate:"2007-10-03",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"}, 
   {id:"19",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"}, 
   {id:"21",invdate:"2007-10-01",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"}, 
   {id:"22",invdate:"2007-10-02",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"}, 
   {id:"23",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"},
    {id:"24",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"}, 
    {id:"25",invdate:"2007-10-05",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"}, 
    {id:"26",invdate:"2007-09-06",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"}, 
    {id:"27",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"}, 
    {id:"28",invdate:"2007-10-03",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"}, 
    {id:"29",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"} ];

        for(var i=0;i<=mydata.length;i++)
            jQuery("#list4").addRowData(i, mydata[i]);              
            }//function
    );//ready
 $("#list4").jqGrid().setGridParam({sortname: 'Date,', sortorder: 
'asc'}).trigger("reloadGrid");    

</script>
</head>

<body>

This is table

<table id="list4">

</table>

<div id="pager" class="scroll" style="text-align:center;">

</div>

This is table

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:37:42.423

最后我找到了我的问题本身的答案。数组声明和操作循环应该在匿名函数 jQuery(document).ready(function(){...}) 之内，而不是在它之外。这样它将在 jqQrid 初始化之后而不是之前执行。

# jquery - jQuery解析数组Json

> ID：14661989
> 
> 赞同：0
> 
> 时间：2013-02-02T12:40:41.423
> 
> 标签：jquery, arrays, json, highcharts

这是我的 Json

```
[{"name":"Male","data":[10,34,30]},{"name":"Female","data":[20,22,15]},{"name":"Male","data":[22,21,21]},{"name":"Female","data":[13,20,31]}] 
```

然后推它来创建图表，我做错了，这里是我的代码：

```
 <!DOCTYPE HTML>
     <html>
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Highcharts Example</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"  type="text/javascript"></script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.3.5/jquery.min.js"></script>
    <script type="text/javascript">

          /*  var items = [{
                "name": "Male",
                "data": [10, 34, 30]
            }, {
                "name": "Female",
                "data": [20, 22, 15]

            }];*/

                var chart;
        $(document).ready(function () {
            //define the options
            var options = {
                chart: {
                    renderTo: 'container',
                    type: 'bar'
                },
                title: {
                    text: 'Historic World Population by Region'
                },
                subtitle: {
                    text: 'Source: Wikipedia.org'
                },
                xAxis: {
                    categories: ['Age 20-24', 'Age 25-30', 'Age 30-40'],
                    title: {
                        text: null
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Population (millions)',
                        align: 'high'
                    },
                    labels: {
                        overflow: 'justify'
                    }
                },
                tooltip: {
                    formatter: function () {
                        return '' +
                            this.series.name + ': ' + this.y + ' millions';
                    }
                },
                plotOptions: {
                    bar: {
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'top',
                    x: -100,
                    y: 100,
                    floating: true,
                    borderWidth: 1,
                    backgroundColor: '#FFFFFF',
                    shadow: true
                },
                credits: {
                    enabled: false
                },
                series: [{

                }]
            };

            //Calls the JSON
            jQuery.getJSON("XSportWithAgegroup",
                            null, function (items) {
                                //Creates the new series as stated in the documentation
                                //http://www.highcharts.com/ref/#series
                                var series = {

                                    name: 'Browser Share',
                                    data: []
                                };
                                jQuery.each(items, function (itemNo, item) {
                                    //Get the items from the JSON and add then
                                    //to the data array of the series

                                        series.data.push({
                                            name: item.name,
                                            y: item.data[0],
                                        })

                                });
                                options.series.push(series);
                                //Create the chart
                                chart = new Highcharts.Chart(options);
                                chart.render();
                            });
        });

    </script>
</head>
<body>

    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script src="http://code.highcharts.com/modules/exporting.js"></script>

     <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

</body> 
```

这是我将查询结果转换为 json 的方法：

```
 public JsonResult XSportWithAgegroup() { 

       var series = (from m in db.Agegroup
                     where m.Gender == "Male" || m.Gender == "Female"
                     select new
                     {
                         name = m.Gender,
                         data = new List<double> { m.Age20To24, m.Age25To30, m.Age30To40 }
                     }).ToArray();

       return Json(series, JsonRequestBehavior.AllowGet);

    } 
```

我认为我的问题在于 jQuery，图表的演示是：[http ://www.highcharts.com/demo/bar-basic](http://www.highcharts.com/demo/bar-basic)

**更新 ：**

我的json：

```
 [{"name":"Male","data":[10,34,30]},{"name":"Female","data":[20,22,15]}] 
```

我的查询：

```
 //Calls the JSON
            jQuery.getJSON("XDiesesWithAgegroup",
                            null, function (items) {
                                //Creates the new series as stated in the documentation
                                //http://www.highcharts.com/ref/#series
                                var series = { name: 'll', data: [] };

                                jQuery.each(items, function (itemNo, item) {
                                    //Get the items from the JSON and add then
                                    //to the data array of the series

                                    for (i = 0; i <= 3; i++){
                                        series.data.push({
                                            name: item.name,
                                            y: item.data[i],
                                        });

                                  }//end for

                                });

                                options.series.push(series);

                                //Create the chart
                                chart = new Highcharts.Chart(options);
                                chart.render();

                            }); 
```

这里图表现在的样子：

[http://i.stack.imgur.com/ER6BZ.png](http://i.stack.imgur.com/ER6BZ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:42:46.927

您的 JSON 数组中没有属性`Gender`，只有`name`. 您可以更改您的 JSON 数据以`Gender`代替使用，也可以反过来`name`更改您的代码

```
series.data.push({
    name: item.name,
    y: item.data[i],
}); 
```

您发布的代码有几点。当您查看控制台时，它们都会显示出来。我将代码复制到[JSFiddle](http://jsfiddle.net/dEsyz/1/)并与[Highcharts - How To Use](http://www.highcharts.com/documentation/how-to-use)一起，我对其进行了一些修改

`y: item.data[i],`:`i`未定义。我只拿了第一个元素

```
series.data.push({
    name: item.Gender,
    y: item.data[0],
}) 
```

`options`未定义且图表没有目标

HTML：

```
<div id="container"></div> 
```

JS：

```
var options = {
    chart: { renderTo: 'container' },
    series: []
}; 
```

我认为重点是，您必须为要呈现的图表提供目标。

**更新**：

将您的数据与您提供的链接进行比较，我只是删除了循环并将您的 JSON 数据直接分配给`series`. 结合条形图，图表开始看起来很相似。

```
var options = {
    chart: { renderTo: 'container', type: 'bar' },
    series: items
}; 
```

见[JSFiddle](http://jsfiddle.net/dEsyz/3/)

**更新 2**：

因此，您只有两个条目，`Male`并且`Female`，每个条目都有三个子条目。Y 轴标记为`Age 20-24`，`Age 25-30`并且`Age 30-40`。

```
var options = {
    chart: { renderTo: 'container', type: 'bar' },
    xAxis: {
                categories: ['Age 20-24', 'Age 25-30', 'Age 30-40'],
                title: {
                    text: null
                }
            },
    series: items
}; 
```

[JSFiddle](http://jsfiddle.net/dEsyz/4/)

**更新 3**：

```
var options = {
    chart: { renderTo: 'container', type: 'bar' },
    xAxis: {
                categories: ['Age 20-24', 'Age 25-30', 'Age 30-40'],
                title: {
                    text: null
                }
            },
    series: null
};

jQuery.getJSON("XDiesesWithAgegroup", function (items) {
    options.series = items;

    //Create the chart
    chart = new Highcharts.Chart(options);
}); 
```

# iphone - QR code format for geolocation

> ID：14661994
> 
> 赞同：3
> 
> 时间：2013-02-02T12:41:46.490
> 
> 标签：iphone, ios, geolocation, qr-code

I am developing a QR code generator where I need to make QR code codes for various datas. One of them is geolocation and social network (likes in Facebook and follow in Twitter).

I am okay with other formats however the above two items are still not clear to me. What is the specific format to get them done?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T19:17:53.057

地理 URI 可用于编码地球上的一个点，包括海拔高度。例如，要对位于北纬 40.71872 度、西经 73.98905 度、在办公室上方 100 米处的谷歌纽约办事处进行编码，可以编码“geo:40.71872,-73.98905,100”。

读者可能会打开一个本地地图应用程序（如谷歌地图）到该位置并相应地缩放，或者可以在设备的网络浏览器中打开地图网站（如谷歌地图）上的该位置的链接。

请按照具体格式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T21:40:49.187

[我在我的二维码生成器http://www.qrcode-generator24.com](http://www.qrcode-generator24.com)上实现了 lat 和 lng 坐标地图二维码。将标记放在谷歌地图上，坐标将以 lng:39.7676745 lat:20.7634834 之类的形式存储。请记住，并非所有二维码阅读器都能将该内容识别为地图坐标。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-02T12:58:46.690

QR 码存储字母数字数据。如果您可以编写能够读取它们的代码（或集成第三方库），您可以对它们做任何您想做的事情，例如，您可以将坐标存储为 Well Known Format [WKF](http://en.wikipedia.org/wiki/Well-known_text)

要从 QR 码中点赞，请参考此答案：[Facebook 页面自动“点赞” URL（用于 QR 码）](https://stackoverflow.com/questions/8763046/facebook-page-automatic-like-url-for-qr-code)

通常，现有的二维码阅读器需要一个 url。

关于支持的设备：都依赖于读取二维码的库，不依赖于设备本身。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-02T12:52:05.523

对于地理定位，表示为纬度，经度坐标，我会这样编码：
未编码坐标 WGS84：lat=48.123456 lon=-120.123456
编码字符串将每个坐标乘以 1E6：

字符串表示：“（48123456，-120123456）”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-09T13:56:24.127

我通过 geo:lat(numerical value),lang(numerical value) 来调出地理位置二维码，它在任何扫描仪中都能正常工作。