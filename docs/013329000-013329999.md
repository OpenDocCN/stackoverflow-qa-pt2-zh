# StackOverflow 问答 13329000-13329999

# perl - Perl 中文件上传的哪些标头？

> ID：13329002
> 
> 赞同：1
> 
> 时间：2012-11-11T06:07:54.533
> 
> 标签：perl, file, upload, header

我已经坚持了好几个小时，但我无法通过研究找到解决方案。

以下 HTML 代码可满足我的要求：

```
<form action="uploader.php" method="POST" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="Filedata" id="file" />
<br />
<input type="submit" name="submit" value="Submit" />
</form> 
```

但是，以下 Perl 代码不起作用。我认为这是因为我没有发送所需的标头。

```
my @headers  = ('Content-Disposition' => 'form-data; name="Filedata"; filename="test.txt"',
                'Content-Type'        => 'text/plain',
                'Content'             => 'File content goes here.');

my $browser  = LWP::UserAgent->new;
my $response = $browser->post('uploader.php', undef, @headers); 
```

如果有人能指出它不起作用的原因，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T06:42:44.477

您提供的 Content-Type`text/plain`显然是错误的——您需要发送一条`multipart/form-data`带有文件作为`text/plain`附件的 MIME 消息。您*可以*使用 MIME 模块手动执行此操作，但正如 jpalecek 指出的那样，[HTTP::Request::Common](http://p3rl.org/HTTP::Request::Common)已经知道如何为您执行此操作。像这样的请求应该有效：

```
my $response = $browser->request(
    POST "http://somewhere/uploader.php",
        Content_Type => 'form-data',
        Content => [
            Filedata => [ 
                undef,
                "test.txt",
                Content_Type => "text/plain",
                Content => "file content goes here"
            ]
        ]
); 
```

或者如果 test.txt 确实存在于磁盘上：

```
my $response = $browser->request(
    POST "http://somewhere/uploader.php",
        Content_Type => 'form-data',
        Content => [
            Filedata => [ "/path/to/test.txt" ]
        ]
); 
```

就足够了。无论哪种情况，只要确保添加`use HTTP::Request::Common;`到您的代码中即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T06:46:35.763

```
my $response = $ua->post('http://.../uploader.php',
   Content_Type => 'form-data',
   Content => [
      Filedata => [ undef, 'test.txt',
         Content_Type => 'text/plain',
         Content      => "Hello, World!\n",
      ],
      submit => 'Submit',
   ],
); 
```

的参数`->post`与[HTTP::Request::Common](http://search.cpan.org/perldoc?HTTP%3a%3aRequest%3a%3aCommon)的`POST`子参数相同。

如果这是您真正想要做的，它还能够为您从磁盘读取文件。

```
my $response = $ua->post('http://.../uploader.php',
   Content_Type => 'form-data',
   Content => [
      Filedata => [ 'test.txt', 'test.txt',
         Content_Type => 'text/plain',
      ],
      submit => 'Submit',
   ],
); 
```

# sql-server - 将 SQL Server 导出到 Google Cloud SQL

> ID：13329006
> 
> 赞同：2
> 
> 时间：2012-11-11T06:08:45.883
> 
> 标签：sql-server, data-migration, google-cloud-sql

有人知道如何从 SQL Server 数据库将数据导出到 Google Cloud SQL 吗？

谷歌文档只给出了一个使用 mysqldump 的 mySQL 示例。我已经为 SQL Server 寻找过类似的程序，但没有找到。

有任何想法吗？

# javascript - 用户单击按钮时打开移动设备的地图

> ID：13329008
> 
> 赞同：0
> 
> 时间：2012-11-11T06:09:22.930
> 
> 标签：javascript, html, cordova, mobile, maps

我正在使用 phonegap 开发移动应用程序。在我的应用程序中，我有一个按钮，即“查看位置”。当用户单击该按钮时，设备地图应该打开，地图打开后，用户单击返回，它应该返回到我的应用程序。怎么做？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:27:38.643

您可以使用地图协议或使用 maps.google.com / maps.apple.com 打开地图应用程序（查看此 SO 答案[如何使用“地图：”方案打开 Google 地图应用程序？](https://stackoverflow.com/questions/9593244/how-to-open-google-maps-application-using-the-maps-scheme)）。

但是您不能从地图应用程序返回到您的应用程序。

实现这一点的唯一方法可能是使用 PhoneGap 的 ChildBrowser 插件。

# vb.net - 在 Windows 服务中移动文件

> ID：13329009
> 
> 赞同：1
> 
> 时间：2012-11-11T06:09:50.840
> 
> 标签：vb.net, windows-services

这是我第一次制作 Windows 服务应用程序。我正在尝试使用 Windows 服务应用程序将文件从一个文件夹移动到另一个文件夹。它会每 10 秒执行一次。这是我正在使用的代码。当我在 Windows 窗体应用程序上使用它时它可以工作，但当我在 Windows 服务应用程序上使用它时它不起作用。

如果我在 OnStart 中使用 Timer1_Tick 中的代码，它就可以工作。但在计时器中不起作用。

```
 Protected Overrides Sub OnStart(ByVal args() As String)
        Timer1.Enabled = True
    End Sub

    Protected Overrides Sub OnStop()
        Timer1.Enabled = False
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Dim FileToMove As String
        Dim MoveLocation As String
        Dim count1 As Integer = 0
        Dim files() As String = Directory.GetFiles("C:\Documents and Settings\dmmc.operation\Desktop\Q8")
        Dim pdfFiles(100) As String

        For i = 0 To files.Length - 1
            If Path.GetExtension(files(i)) = ".pdf" Then
                pdfFiles(count1) = files(i)
                count1 += 1
            End If
        Next

        For i = 0 To pdfFiles.Length - 1
            If pdfFiles(i) <> "" Then
                FileToMove = pdfFiles(i)
                MoveLocation = "C:\Documents and Settings\dmmc.operation\Desktop\Output\" + Path.GetFileName(pdfFiles(i))
                If File.Exists(FileToMove) = True Then
                    File.Move(FileToMove, MoveLocation)
                End If
            End If
        Next

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:59:44.337

如果没有实例化 Form，Windows.Forms.Timer 将无法工作。您应该改用 System.Timers.Timer ：

```
Private WithEvents m_timer As System.Timers.Timer

Protected Overrides Sub OnStart(ByVal args() As String)
    m_timer = New System.Timers.Timer(1000)   ' 1 second
    m_timer.Enabled = True
End Sub

Private Sub m_timer_Elapsed(ByVal sender As Object, ByVal e As System.Timers.ElapsedEventArgs) Handles m_timer.Elapsed
    m_timer.Enabled = False

    'Do your stuff here

    m_timer.Enabled = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-21T19:38:41.773

我还构建了一项服务，该服务可以移动放入文件夹中的文件，但我使用的是 FileSystemWatcher。FileSystemWatcher 允许我在创建新文件时移动文件，在 SQL 数据库中创建条目并在完成后发送电子邮件通知。

这就是我设置 FileSystemWatcher 的方式

1.  设置要观看的文件夹：watcher.Path = "C:\Folder to Watch"
2.  设置要观看的文件类型：watcher.Filter = "*.pdf"。
3.  要监视的事件类型和触发的方法：watcher.Created += new FileSystemEventHandler(OnChanged);
4.  最后，我需要启用事件： watcher.EnableRaisingEvents = true;

不幸的是，我每天都有文件无法成功移动的情况。我得到正在使用的文件的 IO 异常。文件被复制，但目标文件夹中的文件为 0kb。

我正在尝试对其进行故障排除，并且我已经设法远程调试，但我仍然没有弄清楚我做错了什么。

我得到的最常见错误是：错误：System.IO.IOException：该进程无法访问文件“fileName.pdf”，因为它正在被另一个进程使用。

此错误没有意义，因为在我的服务尝试移动它之前该文件不存在...

任何进一步的帮助将不胜感激。

# javascript - 简单模式在 IE 9 中不起作用

> ID：13329011
> 
> 赞同：-3
> 
> 时间：2012-11-11T06:10:14.763
> 
> 标签：javascript, jquery

以下是在 Firefox、chrome、Safari 中运行良好但由于某种原因在 IE 9 中无法运行的页面 URL。

页面加载时模态显示横幅。

[http://tinyurl.com/b52drmt](http://tinyurl.com/b52drmt)

我正在使用的模态链接[http://www.ericmmartin.com/projects/simplemodal-demos/](http://www.ericmmartin.com/projects/simplemodal-demos/)

脚本对我来说看起来不错，不幸的是我目前无法修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:23:09.820

通过下载相同的最新 js 文件解决了问题....现在在 IE 9 中工作正常

# java - java 为什么不能在一个文件中定义两个公共类？

> ID：13329012
> 
> 赞同：8
> 
> 时间：2012-11-11T06:10:25.923
> 
> 标签：java, class

为什么B类不能公开？我如何在其他类中使用类？在 Cons 中定义它会更好吗？

```
 //    public class B { why not?

   class B {
        int x;  
        B (int n) {
            x=n;
            System.out.println("constructor 'B (int n)' called!");
        }
    }

    public class Cons { 
        public static void main(String[] args) {B b = new B();}
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-11T06:12:27.863

根据 java 语言规范，一个文件 (.java) 中只能有一个公共类，文件名应与公共类名相同。

如果您希望在其他地方访问 B 类，您可以创建一个单独的 B.java 文件并将您的 B 类代码移动到该文件。

该[线程](https://stackoverflow.com/questions/10442758/why-must-a-java-file-have-the-same-name-as-its-public-class?lq=1)可能会为您提供更多信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-11T06:29:16.343

**Q.** java 为什么不能在一个类范围内定义两个公共类？

**A.** 正是语言的设计方式。一旦你习惯了它，你会发现它可以帮助你组织你的代码。

**Q.** 为什么B类不能公开？

**A.** 可以，但必须在名为 B.java 的文件中。它必须是该文件中唯一的公共类。

**Q.** 如何在其他课程中使用课程？

**A.** 你可能想重新表述这个问题。但是有多种方法：

*   使类公开，实例化它，然后调用它的方法。
*   将类添加到同一个文件中，不要将其公开（您将无法公开），实例化它，然后在其上调用方法。您将能够从同一文件或包中的其他类中使用它。这是“默认”访问修饰符，这意味着您将能够从同一包中的其他类中实例化此类。
*   使它成为一个内部（或嵌套）类，实例化它，然后调用它的方法。它只能在其父类中通过名称访问。这应该增加封装并使代码更具可读性。 [http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

**问** ：在 Cons 中定义它会更好吗？

**答：** 我个人发现自己并不经常这样做。我发现它使代码有点混乱，尽管上面的链接另有说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T06:13:31.767

将您的课程放在不同的文件中。

类的名称应与文件的名称匹配。

# ruby-on-rails - Rails：使用 Ajax

> ID：13329019
> 
> 赞同：1
> 
> 时间：2012-11-11T06:12:24.747
> 
> 标签：ruby-on-rails, ajax

问题：**尝试在我的博客上实现“点赞”功能**

**邮政索引：**

```
<% @posts.each do |post| %>
<tr>
<td><%= post.name %></td>
<td><%= link_to post.content, post %></td>
<td><%= post.created_at.strftime("%Y/%m/%d, %I:%M%p") %></td>
<td><%= post.view %></td>
<td><%= post.like %></td>
<td><%= post.hate %></td>
<td><%= link_to 'like', like_post_path(post), :remote => true %></td>
</tr>
<% end %> 
```

**后控制器：**

```
def like
 @post = Post.find(params[:id])
 @post.like += 1
 @post.save

 respond_to do |format|
    format.js
 end
end 
```

**app/views/posts/like.js.erb**

```
$('#post').html("<%=j @post.like %>"); 
```

**问题：**
我认为我没有正确指向我在 like.js.erb 中查看的帖子。
在索引文件中，只需执行 <%= @post.view %> 即可。但是你如何在 like.js.erb 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:21:11.443

当您想在 ajax 调用后更新它时，您需要一些标识符来识别您的 html 中的帖子之类的计数

**邮政索引：**

```
<% @posts.each do |post| %>
  <tr>
    <td><%= post.name %></td>
    <td><%= link_to post.content, post %></td>
    <td><%= post.created_at.strftime("%Y/%m/%d, %I:%M%p") %></td>
    <td><%= post.view %></td>
    <td id= "post<%= post.id %>_like"><%= post.like %></td>  <!-- set id (identifier) here -->
    <td><%= post.hate %></td>
    <td><%= link_to 'like', like_post_path(post), :remote => true %></td>
  </tr>
<% end %> 
```

然后在您的**app/views/posts/like.js.erb**中，

```
<% if @post.errors.blank? %>
  $("#post<%= @post.id %>_like").html("<%=j @post.like %>");
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T08:34:48.027

**使用 Ajax 修复表格行的完整方法：**

在您的 show.html（或 index.html）文件中，您可能已经有一个表格。

```
<tr>
 <td>row 1</td>
 <td>row 2</td>
 <td>row 3</td>
</tr> 
```

让我们假设这些行代表某种变量。那么上面的表格就像，

```
<tr>
 <td><%= @variableA %></td>
 <td><%= @variableB %></td>
 <td><%= @variableC %></td>
</tr> 
```

我想更改 variableA 而不重新加载整个页面。所以我使用 Ajax。

我的方法：

```
def fixvar
 @variableA = 2
end 
```

您必须添加一个组件才能使用 Ajax。

```
def fixvar
 @variableA = 2
end

respond_to do |format|
 format.js
end 
```

无论您想要什么，您都将拥有一个链接，该链接将通过 ajax 调用更改。

```
<%= link_to 'change variable A', URLof_fixvar(@variableA), :remote => true %> 
```

通过使用选项 :remote => true，您在 link_to 方法中使用了 ajax 组件。您必须相应地在 config/routes.rb 中设置 URLof_fixvar。[路由](https://stackoverflow.com/questions/13328453/rails-correct-way-of-using-the-method-of-postcontroller-in-the-index-file/13328525#13328525)

让我们指定在表中更新的位置。

```
<tr>
 <td id="variable_change_<%= @variableA.id %>><%= @variableA %></td>
 <td><%= @variableB %></td>
 <td><%= @variableC %></td>
</tr> 
```

我们按照上面的操作来指定我们要更新的行。例如，该行现在定义为 variable_change_1。（假设 variableA.id 为 1）

现在，您需要转到相关的视图文件夹，并创建一个与上面定义的方法相关的 .js.erb 文件。例如，我在 PostController 中定义了“like”方法，所以我创建了

```
app/views/posts/like.js.erb 
```

在这里，您只需要一行代码：

```
$("#variable_change_<%= @variable.id %>").html("<%= @variableA %>"); 
```

.html 之前的第一部分指向指定的行，之后的部分是我们要更新的值。完毕！

# c# - C# ref 多态性解决方法

> ID：13329022
> 
> 赞同：1
> 
> 时间：2012-11-11T06:12:40.830
> 
> 标签：c#

我在 C# 中创建了一个函数：

```
private void customShow(Form someForm, Type formType) {
    if (someForm == null || someForm.IsDisposed) someForm = (Form)Activator.CreateInstance(formType);
    someForm.StartPosition = FormStartPosition.CenterScreen; 
    someForm.MdiParent = this;
    someForm.Show();
    someForm.WindowState = FormWindowState.Maximized;
} 
```

然后我想这样做：

```
private void mnuKategori_Click(object sender, EventArgs e) {
    customShow(frmKategori, typeof(Master.FrmKategori));
    frmKategori.isCRUD = true;
} 
```

它在方法的第二行失败，因为在方法执行后变量 frmKategori 仍然为空。如果我将“someForm”参数作为引用，它也会失败，因为 C# 似乎不支持带有“ref”和“out”关键字的多态性。有人对此有什么建议吗？提前感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T06:22:22.533

也许是泛型？

```
private void customShow<T>(ref T someForm) where T : Form, new()
{
    if (someForm == null || someForm.IsDisposed) someForm = new T();
    someForm.StartPosition = FormStartPosition.CenterScreen; 
    someForm.MdiParent = this;
    someForm.Show();
    someForm.WindowState = FormWindowState.Maximized;
} 
```

然后我想这样做：

```
private void mnuKategori_Click(object sender, EventArgs e)
{
    customShow(ref frmKategori);
    frmKategori.isCRUD = true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T06:21:06.083

为什么不简单地让 customShow 返回一个新的 Form 实例，而不是填写一个 ref/out 参数？真的没有理由有一个带有 void 函数的单独的参数。

顺便说一句，我也将替换`customShow`为`buildCustomForm`，并将实际`Show()`方法保存到最后。否则可能会令人困惑。

# ios-ui-automation - iOS 的 Javascript UIAutomation 如何用于导航原生应用的 oAuth 流程？

> ID：13329030
> 
> 赞同：1
> 
> 时间：2012-11-11T06:15:32.293
> 
> 标签：ios-ui-automation

# 语境

许多原生应用程序让用户使用 Facebook 进行身份验证，而不是使用他们自己的身份验证系统。这对我使用 Javascript 绑定编写 iOS UIAutomation 测试用例来说是个问题。从用户的角度来看，我们的场景通常看起来像这样。

## 设想

1.  用户点击“连接到 Facebook”。
2.  （目标）应用程序移至后台，而 Safari 浏览器移至前台，因此用户可以使用 oAuth 进行身份验证。
3.  用户输入他们的认证数据并提交。
4.  Safari 浏览器窗口移入后台，目标应用程序移回前台。

# 问题

在运行测试之前，**Instruments**让用户在顶部菜单栏中设置“目标应用程序”。当目标应用程序移动到后台而 Safari 应用程序移动到前台时（步骤 #2），使用**Instruments**中的**自动化证明是有问题的。**此时，**仪器**报告

 ****> 目标应用程序似乎已经死亡

我认为这就像轮询/测试（或类似的）变化一样简单`UIATarget.localTarget().frontMostApp()`，但似乎并非如此——测试运行停止执行。

**如何使用 Instruments 成功测试此场景？** 这是 UIAutomation 的 Javascript 绑定的可测试场景吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:17:41.900

唉，这是不可能的。Instruments 失去了与应用程序的连接，因为应用程序在后台冻结并且无法继续。此外，无法将触摸事件发送到 Safari，因为 UI 自动化不适用于您自己构建的应用程序。

如果您使用的是预构建的 SDK，那么您就很不走运了。但是，如果您将自己的 Oauth 连接滚动到它们，您可以提供一个带有 web 视图的模态视图控制器，该控制器将转到 Facebook 的 Oauth 身份验证页面，而不是将用户一直踢到移动 Safari。

这样，应用程序永远不会退出。然后，您可以找出要发送到 web 视图的事件并尝试从那里进行测试。****

# c# - MVC 3 DropDownList 在编辑页面上显示多个值

> ID：13329036
> 
> 赞同：0
> 
> 时间：2012-11-11T06:16:18.690
> 
> 标签：c#, asp.net-mvc, razor, html-select

我正在使用枚举来填充我的 DropDownList，它可以与 List 和 Create 视图一起正常工作，但我的 Edit 视图会在 DropDownList 中加载重复值。重复的值只是属性含义的选定值，如果 Rented 是保存在 DB 中的值，则 DropDownList 将显示已选择的已租用、可用的和列表中的另一个已租用。我需要知道的是如何加载一个 DropDownList 来选择先前存储在数据库中的 PropertyStatus 枚举值而没有任何重复？

控制器：

```
 public ActionResult Edit(int id)
    {
        Property property = db.Properties.Find(id);

        ViewBag.PropertyStatus = SetViewBagPropertyStatus();
        return View(property);
    }

    private IEnumerable<SelectListItem> SetViewBagPropertyStatus()
    {
        IEnumerable<ePropStatus> values = 
            Enum.GetValues(typeof(ePropStatus)).Cast<ePropStatus>();

            IEnumerable<SelectListItem> items =
             from value in values
             select new SelectListItem
             {
                 Text = value.ToString(),
                 Value = value.ToString()
             };
            return items; 
    } 
```

模型：

```
 public enum ePropStatus
    {
        Available ,
        Rented
    }

    public partial class Property
    {
         public int PropertyId { get; set; }
         public string PropName { get; set; }
         public string Address { get; set; }
         public string City { get; set; }
         public string State { get; set; }
         public string ZipCode { get; set; }
         public int SqFeet { get; set; }
         public int Bedrooms { get; set; }
         public int Bathrooms { get; set; }
         public int Garage { get; set; }
         public string Notes { get; set; }
         public ePropStatus PropertyStatus { get; set; }
    } 
```

编辑视图：

```
@Html.DropDownList("PropertyStatus", Model.PropertyStatus.ToString()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:34:22.903

试试这个：

```
@Html.DropDownListFor(model => model.PropertyStatus, ViewBag.PropertyStatus) 
```

**编辑 :::**或者试试这个

**控制器：**

```
public ActionResult Edit(int id)
{
    Property property = db.Properties.Find(id);

    ViewBag.PropertyStatusList = SetViewBagPropertyStatus(property.PropertyStatus);
    return View(property);
}

private IEnumerable<SelectListItem> SetViewBagPropertyStatus(string selectedValue = "")
{
    IEnumerable<ePropStatus> values = 
        Enum.GetValues(typeof(ePropStatus)).Cast<ePropStatus>();

        IEnumerable<SelectListItem> items =
         from value in values
         select new SelectListItem
         {
             Text = value.ToString(),
             Value = value.ToString(),
             Selected = (selectedValue == value.ToString())
         };
        return items; 
} 
```

**看法：**

```
@Html.DropDownList("PropertyStatus", ViewBag.PropertyStatusList) 
```

# android - android - 布局 - 最大化imageview

> ID：13329038
> 
> 赞同：0
> 
> 时间：2012-11-11T06:16:56.163
> 
> 标签：android, layout, imageview, scrollview

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
   xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:id="@+id/linearLayout" 
   android:orientation="vertical" 
   android:layout_width="match_parent" 
   android:layout_height="match_parent" 
   android:gravity="center_horizontal" 
   android:background="@color/background_color">

   <TextView android:id="@+id/titleTextView"
      android:layout_width="match_parent" 
      android:layout_height="wrap_content"
      android:text="@string/quiz_title" 
      android:layout_marginBottom="2dp"
      android:textSize="@dimen/title_size" 
      android:textColor="@color/text_color" 
      android:gravity="center">
   </TextView>

   <TextView android:id="@+id/questionNumberTextView"
      android:layout_width="match_parent" 
      android:layout_height="wrap_content"
      android:layout_marginBottom="2dp" 
      android:layout_marginTop="2dp"
      android:textColor="@color/text_color" 
      android:textSize="@dimen/text_size" 
      android:layout_gravity="center" 
      android:gravity="center"></TextView>

   <ScrollView android:id="@+id/SlotScrollView" 
     android:layout_width="match_parent"           
     android:padding="0dp">          
      <ImageView android:id="@+id/flagImageView"
         android:adjustViewBounds="false" 
         android:layout_width="match_parent"
         android:layout_height="@dimen/flag_height">
      </ImageView>
   <ScrollView

   <TextView android:id="@+id/guessCountryTextView"
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content"
      android:layout_marginBottom="2dp" 
      android:layout_marginTop="2dp"
      android:text="@string/choose_answer" 
      android:textColor="@color/text_color"
      android:textSize="@dimen/text_size"></TextView>

   <TableLayout android:id="@+id/buttonTableLayout" 
      android:layout_width="match_parent"
      android:layout_height="wrap_content" 
      android:layout_weight="1" 
      android:stretchColumns="0,1,2,3">
      <TableRow android:id="@+id/tableRow0" 
         android:layout_width="match_parent" 
         android:layout_height="wrap_content" 
         android:orientation="horizontal"></TableRow>
      <TableRow android:id="@+id/tableRow1"
         android:layout_width="match_parent" 
         android:layout_height="wrap_content"
         android:orientation="horizontal"></TableRow>
      <TableRow android:id="@+id/tableRow2"
         android:layout_width="match_parent" 
         android:layout_height="wrap_content"
         android:orientation="horizontal"></TableRow>
   </TableLayout>

   <TextView android:id="@+id/answerTextView"
      android:layout_width="match_parent" 
      android:layout_height="wrap_content"
      android:textSize="@dimen/answer_size" 
      android:layout_gravity="center" 
      android:textStyle="bold" 
      android:gravity="center"></TextView>

</LinearLayout> 
```

我只想最大化图像视图，以便 1\. 当图像宽度小于屏幕宽度时，图像会按比例放大并与屏幕宽度相同 2\. 如果图像高度大于可用空间，则滚动效果会发生在上下 3.那些guessCountryTextView和图像下的所有组件必须显示并放置在屏幕底部。

但是，当我像上面的代码一样添加滚动视图时，滚动视图从 imageview 开始占据整个屏幕，而那些像guessCountryTextView 这样的下方都消失了。

这怎么可能修改？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:43:48.327

尝试使用相对布局而不是线性布局。为滚动视图使用 match_parent widht 和固定高度，我认为这就是你需要做的一切......看看代码你将不得不做一些调整。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/linearLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/darker_gray" >

    <TextView
        android:id="@+id/titleTextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="afafafafa"
        android:textColor="@android:color/darker_gray"
        android:textSize="20sp" >
    </TextView>

    <TextView
        android:id="@+id/questionNumberTextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/titleTextView"
        android:layout_gravity="center"
        android:textColor="@android:color/darker_gray"
        android:textSize="20sp" >
    </TextView>

    <ScrollView
        android:id="@+id/SlotScrollView"
        android:layout_width="match_parent"
        android:layout_height="250dp"
        android:layout_below="@+id/questionNumberTextView"
        android:padding="0dp"
        android:color="@android:color/black" >

        <ImageView
            android:id="@+id/flagImageView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:adjustViewBounds="false" >
        </ImageView>
    </ScrollView>

    <TextView
        android:id="@+id/guessCountryTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="2dp"
        android:layout_marginTop="2dp"
        android:text="sfsff"
        android:textColor="@android:color/darker_gray"
        android:textSize="20sp" >
    </TextView>

    <TableLayout
        android:id="@+id/buttonTableLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:stretchColumns="0,1,2,3" >

        <TableRow
            android:id="@+id/tableRow0"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
        </TableRow>
    </TableLayout>

    <TextView
        android:id="@+id/answerTextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/buttonTableLayout"
        android:textSize="20sp"
        android:textStyle="bold" >
    </TextView>

</RelativeLayout> 
```

# mysql - 如何有效地纠正这个查询？

> ID：13329039
> 
> 赞同：0
> 
> 时间：2012-11-11T06:16:59.133
> 
> 标签：mysql

我在这样的存储过程中有一个查询：

```
"DELETE FROM tbl1 
 WHERE id1
  NOT IN (SELECT id FROM tbl2)
  AND id2 
    NOT IN(SELECT id FROM tbl2);" 
```

现在我想知道如何只使用一次内部 SELECT ？它能有效提高执行速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:24:38.663

```
delete from tbl1 
where not exists (select 1 from tbl2 where id in (tbl1.id1,tbl1.id2)) 
```

# java - 有没有java解析器可以模拟mysql服务器解析器？

> ID：13329040
> 
> 赞同：0
> 
> 时间：2012-11-11T06:17:15.017
> 
> 标签：java, mysql, parsing

我为mysql编写了一个数据库中间件。我需要确定一个 sql 语句 isRead 语句或 isWrite 语句并提取模式和表信息。我通过谷歌找到的一些解析器只解析 DML 语句。但是我需要一个解析器可以解析mysql服务器可以做的所有语句。

你认为我直接在java中调用mysql解析器是个好主意还是有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:42:32.150

> 你认为我直接在java中调用mysql解析器是个好主意还是有可能？

不，我认为这不是一个好主意。从 Java 调用 C/C++ 代码很少是一个好主意。在这种情况下，解析器嵌入在一大堆其他代码中，并且很*可能*能够将其分离出来。最重要的是，它将解析树作为复杂的本机数据结构发出，这些数据结构很难从 Java 中使用。

更好的方法是使用现有的开源 Java 解析器用于 SQL，并（随着时间的推移）添加对解析 MySQL 特定语句的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-19T21:16:03.583

您可能需要考虑使用来自阿里巴巴[Druid 项目](https://github.com/alibaba/druid)的代码。虽然设计为一个复杂的连接池库，但该项目支持非常高级的[解析器和 AST](https://github.com/alibaba/druid/tree/master/src/main/java/com/alibaba/druid/sql)，用于 ANSI SQL 和非 ANSI 方言，如 MySQL、Oracle、SQL Server 等。该项目是开源的，并具有非常自由的 Apache 许可证版本2.0。

这部分库的主要入口点是[SQLUtils.java](https://github.com/alibaba/druid/blob/master/src/main/java/com/alibaba/druid/sql/SQLUtils.java)。

# blackberry - 监控 BlackBerry App World 的应用程序下载次数

> ID：13329042
> 
> 赞同：2
> 
> 时间：2012-11-11T06:17:27.037
> 
> 标签：blackberry, appworld

我想知道是否可以监控有多少人从在线商店下载我的黑莓应用程序。是否有开发人员/管理员登录来访问此类数据？我在 BlackBerry App World 上登录了供应商门户，但在那里我没有看到任何此类选项。任何人都可以就这个话题提供帮助吗？

我尝试了以下方法：

在我的供应商帐户中，有一个“下载报告”选项，我使用该选项生成了特定日期之间“总下载量”的图表报告。我正在寻找更详细的统计版本（Excel），因为图表不太清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T06:45:17.670

我设法得到了所需的确切报告。为了从在线商店生成 BlackBerry 应用程序下载次数的统计报告，我们可以登录我们的帐户（供应商帐户）并转到“管理报告”。其中有一个“计划报告”选项。在“计划报告”中，选择您需要下载次数的应用程序并选择开始日期和结束日期。报告可以按以下方式排序：

1.  仅日期
2.  产品，然后是日期
3.  承运人，然后是日期
4.  国家，然后是日期
5.  设备，然后日期

该报告很详细，可以从“管理报告”和“下载报告”轻松下载。.csv 文件可以在 excel 中查看，以后也可以保存为 .xls 格式。

# iphone - 更改 ABUnknownPersonViewController 的导航标题

> ID：13329043
> 
> 赞同：1
> 
> 时间：2012-11-11T06:17:46.483
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, abpersonviewcontroller

所以我想更改 ABUnknownPersonViewController 的标题，所以我通过代码设置它，通过设置导航项的标题和 titleView 将我的自定义标签放在上面。

```
unknownPersonVC.title = @"title"
uknownPersonVC.titleView = myLabel; 
```

这工作正常。

在 UnknownPersonVC 中，有“创建新联系人”和“添加到现有联系人”单元格。

点击它们会打开屏幕以添加新联系人或“模态”添加到现有联系人。

如何更改这些 MVC`color`的`navigationItem.titleView`（或）以编程方式设置我的标签？

任何想法/黑客？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:31:44.193

对于任何正在寻找这个答案的人......

```
 NSDictionary *textTitleOptions = [NSDictionary dictionaryWithObjectsAndKeys:[UIColor darkGrayColor], UITextAttributeTextColor, [UIColor whiteColor], UITextAttributeTextShadowColor, nil];
[[UINavigationBar appearance] setTitleTextAttributes:textTitleOptions]; 
```

# youtube - Applescript 将音频文件添加到主题演讲并将文件上传到 youtube

> ID：13329051
> 
> 赞同：4
> 
> 时间：2012-11-11T06:19:57.897
> 
> 标签：youtube, applescript, automator, keynote

我正在尝试使用 automator 或 applescript 来做两件事。

1.  将 mp3 添加到打开的主题演示文稿（添加到整个演示文稿而不是单个幻灯片）
2.  将生成的主题演讲上传到 youtube。

如果我使用添加文件命令，如下所示，它似乎不起作用，尽管如果我用幻灯片 1 替换幻灯片，那么它只会将它添加到幻灯片 1。

非常感谢。

```
tell application "Keynote"
    tell slideshow 1
        add file slideshow 1 path theFile
    end tell
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:01:34.403

您基本上想为幻灯片添加配乐，而不是添加文件。不幸的是，我没有看到用applescript 做到这一点的方法。通常，您在 Inspector->Documents->Audio 部分手动执行此操作。我也没有看到 Share->Send To->YouTube 命令的 applescript 命令。

看来你不能通过applescripting keynote做任何你想做的事情。Keynote 没有那些 applescript 命令。它也没有这些东西的任何键盘快捷键，所以它不能用 GUI 脚本来完成。对不起。

# android - 单击图像时的上下文菜单

> ID：13329053
> 
> 赞同：0
> 
> 时间：2012-11-11T06:20:16.047
> 
> 标签：android, android-layout

我有一个图像视图，希望在单击图像时打开上下文菜单，有谁知道其背后的逻辑，请帮助我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:27:27.350

查看[Greendroid](https://github.com/cyrilmottier/GreenDroid)，特别是 QuickActions。

# jquery - 如何使用jquery清除服务器文本框

> ID：13329056
> 
> 赞同：-1
> 
> 时间：2012-11-11T06:20:56.203
> 
> 标签：jquery, asp.net, textbox

我正在使用客户端函数来清除文本框（服务器控件 runat="server"）所以当我使用 jquery 清除它时它显示为空但是当我跟踪代码并检查 textbox.Text 控件时我发现那里的值而不是 null那么如何从客户端的文本框控件的值属性中清除它（我必须从客户端清除它以进行用户交互）

**我正在使用以下内容从客户端代码中清除它：**

```
$("#cp1_txtDeathDate").val(""); 
```

这是我控制的代码：

```
<asp:TextBox ID="txtDeathDate" runat="server" ></asp:TextBox> 
```

在后面的代码中：

```
if (txtDeathDate.Text != "" && DatePattern.IsMatch(txtDeathDate.Text))
{
//do something
} 
```

在萤火虫跟踪：

```
<input id="cp1_txtDeathDate" type="text" value="26/10/2012" name="ctl00$cp1$txtDeathDate"> // while textbox appeared empty 
```

当用户通过（事件点击）更改复选框的值时，我正在调用 javascript 代码

```
 function checkDead_click() {

            if ($("#cp1_chDead").prop("checked") == false) {
                $("#cp1_drpDeathReason").attr('disabled', 'disabled');
                $("#cp1_txtDeathDate").attr('disabled', 'disabled');
                $('#divDeath input#cp1_radDMR_0').attr('checked', true);
                $("#divDeath input:radio").attr("disabled", true);
                $("#cp1_drpDeathReason").html("");
                $("#cp1_txtDeathDate").val("");
            }
            else {
                $("#cp1_drpDeathReason").removeAttr('disabled');
                $("#cp1_txtDeathDate").removeAttr('disabled');
                $("#divDeath input:radio").removeAttr('disabled');
            }

        }

$("#cp1_chDead").click(checkDead_click);

protected void Saveform()
    {
        Demographic Demo = new Demographic();

            using (DBEntities DB = new DBEntities())
            {
                try
                {
                    if (hdFormMode.Value == "edit")
                    {
                        string nid = Session["NID"].ToString();
                        Demo = DB.Demographics.SingleOrDefault<Demographic>(d => d.NID == nid);
                    }
                    if (Demo != null || hdFormMode.Value == "new")
                    {

                        Demo.NID = litNID.Text;
                        Demo.BirthDate= txtBirthDate.Text;
                        Demo.FirstName = txtFirstN.Text;
                        Demo.FatherName = txtFatherN.Text;
                        Demo.GrandFName = txtGrandFN.Text;
                        Demo.FamilyName = txtFamilyN.Text;

                        if (txtDeathDate.Text != "" && DatePattern.IsMatch(txtDeathDate.Text))
                        {

                            Demo.DeathDate = txtDeathDate.Text;
                            Demo.RealDeathDate = Convert.ToByte("1");
                         }

                        else
                        {
                            Demo.DeathDate = null;

                        }
                        if (chDead.Checked)
                            Demo.Dead = Convert.ToByte("1");
                        else
                        {
                            Demo.Dead = null;
                            Demo.DeathReason = null;
                            Demo.RealDeathDate = null;
                            Demo.DeathDate = null;

                        }

                        if (hdFormMode.Value == "new")
                        {
                            CreateDemo(Demo);

                        }
                        else
                        {
                            if (Demo.EntityState == EntityState.Detached)
                            {

                                DB.AttachTo("DBEntities.Dempographics", Demo);
                            }
                            DB.ObjectStateManager.ChangeObjectState(Demo, EntityState.Modified);
                            DB.SaveChanges();
                        }

                    }
                }
                catch (Exception ex)
                {
                    throw;
                }
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:27:45.473

您应该使用它来获取服务器控件的客户端 ID

```
var txtDeathDate = "<%= txtDeathDate.ClientID %>";

//in your actual code should be
$("<%= txtDeathDate.ClientID %>").val(""); 
```

也在你的代码隐藏中试试这个

```
 if (String.IsNullOrEmpty(txtDeathDate.Text) && DatePattern.IsMatch(txtDeathDate.Text))
 {

    Demo.DeathDate = txtDeathDate.Text;
    Demo.RealDeathDate = Convert.ToByte("1");
 } 
```

最后，放置一个断点并调试您的代码并查看您的文本框和变量的值。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:30:21.003

试试这个，用以下代码替换你的代码......

```
$("#" + "<%=txtbox.CliendID%>").val(""); 
```

这将是工作....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T06:26:09.370

1.  来自后面代码的 textbox.Text 将始终有一个值 (String.Empty)，即使是空的也是如此。它不会为空
2.  你不能像这样通过 ID 引用，因为 runat=server 会改变值。您需要像 $("#<%= YOURTEXTBOX.ClientID %>") 中那样执行 YOURTEXTBOX.ClientID

编辑以显示如何参考的实际代码。通过客户 ID

# node.js - 有没有办法从 node.js 执行“cls”？

> ID：13329059
> 
> 赞同：0
> 
> 时间：2012-11-11T06:21:39.950
> 
> 标签：node.js

试图从 node.js 清除 Windows 上的命令提示符缓冲区。

这就是我正在尝试但不起作用的方法：

```
var exec = require('child_process').exec;
    var child = exec('cls', function(err, stdout, stderr) {
        if (err) throw err;
    }); 
```

它仍然积累了一个滚动条，这让我很不高兴。似乎从未*真正*执行过 CLS。如果我用 ls 替换 cls，它会显示一个文件列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:10:56.873

我使用`process.stdout.write('\u001B[2J\u001B[0;0f');`但不确定它会帮助你。无论如何让我知道。

# c++ - 在 C++ 类中设置我的窗口

> ID：13329060
> 
> 赞同：0
> 
> 时间：2012-11-11T06:21:48.780
> 
> 标签：c++, sfml

我不知道为什么，但是在类中创建窗口时出现错误。

错误是：

`game.cpp(11): error C2064: term does not evaluate to a function taking 2 arguments`

我不明白造成这种情况的原因，责任在类的构造函数中：

`window.cpp`

```
Application::Application(std::map<string,string>& s, std::map<string, string>& t){

settings = s;
theme = t;
window(sf::VideoMode(800, 600), "Test"); //error is here

} 
```

在我的标题`window.h`中私下设置为：

```
private:
    std::map<string, string> settings;
    std::map<string, string> theme;
    sf::RenderWindow window; 
```

我的`main.cpp`设置是这样的：

```
Application game(setting,style); 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:29:56.123

使用成员初始化器来初始化您的成员：

```
Application::Application(std::map<string,string>& s, std::map<string, string>& t)
:settings(s),
 theme(t),
 window(sf::VideoMode(800, 600), "Test") 
{
} 
```

它被称为成员初始值设定项列表。成员初始值设定项列表由逗号分隔的初始值设定项列表组成，前面有一个冒号。它位于参数列表的右括号之后和函数体的左括号之前。

# php - 在哪里放置数据库连接设置？

> ID：13329063
> 
> 赞同：11
> 
> 时间：2012-11-11T06:22:03.723
> 
> 标签：php, pdo

您将数据库连接的连接设置（如主机、数据库名称、用户、密码）放在哪里？它是放在数据库类或文件中，还是放在配置文件之外，还是放在其他地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T06:27:31.543

理想情况下，您应该将它放在一个配置文件中，该文件可以像 PHP 数组一样简单。

例如：db_config.php

```
$db_config = array(
  'host' => 'localhost',
  'user' => 'username',
  'password' => 'qwerty'
); 
```

然后，您应该将此文件放在文档根目录之外，以获得最大的安全性。这样，如果您的虚拟主机失败并开始将 PHP 文件作为文本文件提供（发生），则没有人可以获取您的数据库凭据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T06:27:06.683

它可以通过多种方式完成，但常见的是将其放在设置文件中，并将该文件保存在 webroot 之外，这样有关数据库密码的信息就不会意外泄漏到网络中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T07:02:07.300

对于 PostgreSQL，我真的很喜欢使用`pg_service.conf`. 它允许我将所有连接特定设置（主机名、数据库名称、用户名、密码等）放入`~/.pg_service.conf`或放入`/etc/postgresql-common/pg_service.conf`并给它们通用名称（服务名称）。

现在，任何想要连接到数据库的程序（Perl、PHP 等）都可以简单地指定`"service=name"`为它们的连接字符串——漂亮、干净、安全且易于维护。

据我所知，MySQL 对`~/my.cnf`or`/etc/my.cnf`文件有类似的机制——你可能想研究一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T06:47:41.173

有很多方法可以做到这一点，但我通过定义 CONSTANTS 来做到这一点：

```
Create a config/db.php

<?php
define('DB_INFO','mysql:host=localhost;dbname=test');
define('DB_USER','root');
define('DB_PASS',''); 
```

# ios - Flash 新手 - 我可以创建可以从移动设备中的浏览器访问的网络应用程序（或网站），即 ios/android/blackberry

> ID：13329066
> 
> 赞同：-3
> 
> 时间：2012-11-11T06:22:49.230
> 
> 标签：ios, flash, apache-flex, air

我对 Flash 很陌生，我读了很多文章，直到最近 ios 才支持 Flash。

据我了解，Adobe AIR 运行时使在 Flash 中创建的桌面应用程序可以在 ios/android/others 中看到。

我想要做的是使用 Flash（使用 Flex/AIR-任何一个 SDK）创建一个简单的网站/Web 应用程序 - 但可以使用桌面/平板电脑/移动设备中的浏览器访问同一个网站-- 包括 iphone/android。而且我希望网站包含 HTML/JS/CSS/SWF 文件...如果每种类型的设备都需要不同的 SWF 文件，我可以...可以在 Flash 中创建这样的网站吗？因为在许多网站中提到 ios 设备不支持 FLash，但一些网站还提到可以使用适用于 ios 设备的 Flash 创建本机应用程序......但我正在寻找创建跨所有手机（包括 ios/android/blackberry/pcs/tablets）...此外，如果可以做到这一点，那么我可以使用哪些 IDE 进行此类开发工作？最后，我可以使用 Flex SDK 来创建此类 Web 应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:55:57.350

> Adobe AIR 运行时使在 Flash 中创建的桌面应用程序可以在 ios/android/others 中看到。

Adobe AIR 可用于为 Windows 和 Mac 创建桌面应用程序。以及适用于 iOS、Android 和 Blackberry Playbook 的原生移动应用程序。所以，你的理解是正确的。

> 我对 Flash 很陌生，我读了很多文章，直到最近 ios 才支持 Flash。
> 
> 据我了解，Adobe AIR 运行时使在 Flash 中创建的桌面应用程序可以在 ios/android/others 中看到。
> 
> 我想要做的是使用 Flash（使用 Flex/AIR-任何一个 SDK）创建一个简单的网站/Web 应用程序 - 但可以使用桌面/平板电脑/移动设备中的浏览器访问同一个网站-- 包括 iphone/android。

那你倒霉了。您无法在 iOS 上的浏览​​器中访问 Flash；并且许多 Android 设备不支持它。

原生应用不同于基于浏览器的应用。

# ruby-on-rails - 使用ajax上传txt文件而不将其保存到数据库

> ID：13329072
> 
> 赞同：1
> 
> 时间：2012-11-11T06:24:28.997
> 
> 标签：ruby-on-rails

我似乎一直在寻找让用户上传文本文件的最佳方法，让我的应用程序解析文件，然后通过 ajax 直接在同一页面上返回一些输出。是否有捷径可寻？

我一直在使用以下，它工作得很好，但我不能让它与 ajax 一起工作。

这是视图文件 - index.html.erb

```
<%= form_tag 'log/new', :multipart => true do %>
<label for="file">Please upload a log file to continue</label> <%= file_field_tag "file" %>
<%= submit_tag ('Upload')%>
<% end %> 
```

然后我就可以在我的控制器中使用结果了，`params[:file]`但是当我添加`:remote => true`到我的表单时，它不会让我做任何 AJAX 或运行我的 .js.erb 视图文件，大概是出于安全原因，因为 js 可以' t 读取 XHR 请求 yadda yadda。

我也尝试过`CarrierWave`gems `jquery-fileupload-rails`，但我不想先将它保存到数据库中，载波似乎想要这样做，而 jquery-fileupload 似乎也这样做。无论如何，即使我使用其中一个 gem 将文件上传/保存到 db - 我如何能够像使用我的`params[:file]`方法一样访问内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:58:39.727

如果您想使用 AJAX 和 rails 表单上传文件，您可以使用`remotipart`gem：

> Remotipart 是一个 Ruby on Rails gem，支持在 Rails 3.0 和 Rails 3.1 远程表单中使用 jQuery 上传 AJAX 文件。这个 gem 增强了原生 Rails jQuery 远程表单功能，支持异步文件上传，几乎不需要修改您的应用程序。

对我来说，它也适用于 Rails 3.2。

[https://github.com/JangoSteve/remotipart](https://github.com/JangoSteve/remotipart)

[http://rubygems.org/gems/remotipart](http://rubygems.org/gems/remotipart)

# android - 使用 remove 方法刷新 Listview 的 ArrayAdapter 会引发 UnsupportedOperationException

> ID：13329073
> 
> 赞同：0
> 
> 时间：2012-11-11T06:24:33.053
> 
> 标签：android, adapter, android-arrayadapter

我想从`ListView`. 对于长按事件，我使用了以下代码：

```
 lstGame.setOnItemLongClickListener(new OnItemLongClickListener() {

        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1, final int arg2, long arg3) {
            AlertDialog.Builder builder = new AlertDialog.Builder(FavouriteActivity.this);
            builder.setMessage("Remove from Favourite?").setCancelable(false)
                    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            Const.favourite(FavouriteActivity.this, (args[arg2]));
                                Toast.makeText(FavouriteActivity.this, "Selected Item Removed from Favourite.", Toast.LENGTH_LONG).show();
                                // Here I get the UnsupportedException---->
                                // adapter.remove(args[arg2]);
                                lstGame.setAdapter(adapter);
                                lstGame.invalidate();

                        }
                    }).setNegativeButton("No", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                        }
                    });
            Dialog alert = builder.create();
            alert.show();
            return false;
        }
    }); 
```

为什么我会得到那个例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:30:04.197

如果*适配器*引用指向默认`ArrayAdapter`实例，那么您很可能`ArrayAdapter`使用`array`对象作为其数据源来实例化。如果是这种情况，那么在幕后，`ArrayAdapter`将把该数组转换为一个特殊的数组`ArrayList`（不是普通的 java 数组）。这个特殊`ArrayList`的没有实现改变其大小的方法（所以使用类似`add`or的方法`remove`（修改该列表）`ArrayAdapter`将抛出`UnsupportedOperationException`），它只允许您修改其中的值。

如果您想使用该`remove`方法，则将`array`您当前使用的数据`ArrayAdapter`放入 an 中`ArrayList`，然后将该列表传递给`ArrayAdapter`构造函数。

# air - AIR 应用程序无法捕获鼠标事件并且无法显示上下文菜单

> ID：13329075
> 
> 赞同：0
> 
> 时间：2012-11-11T06:24:41.360
> 
> 标签：air, flash, contextmenu, mouseevent

我正在构建一个 AIR 应用程序，我需要一个自定义上下文菜单。

我的问题是：我的应用程序中没有上下文菜单！

我找了很久。大多数人都想禁用上下文菜单，但我想启用它。我知道如何生成上下文菜单，但我什至看不到上下文菜单中的构建。

原因可能是：我的 swf 应用程序无法捕获鼠标事件。

有人知道原因吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:34:12.387

你可以这样实现：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"
                        creationComplete="initApp()">
    <mx:Script>
        <![CDATA[

            private function initApp():void {
                var ctxMenu:ContextMenu = new ContextMenu();
                var clsitem:ContextMenuItem = new ContextMenuItem("Close");
                var edititem:ContextMenuItem = new ContextMenuItem("Edit");
                var otheritem:ContextMenuItem = new ContextMenuItem("Etc.");
                clsitem.addEventListener(Event.SELECT,closeApp);
                ctxMenu.customItems.push(clsitem,edititem,otheritem);
                this.contextMenu = ctxMenu;
            }
            private function closeApp(event:Event):void {
                this.close();
            }
        ]]>
    </mx:Script>
    <mx:Panel width="200" height="300">

    </mx:Panel>
</mx:WindowedApplication> 
```

![在此处输入图像描述](../Images/639919afe716d04ee8c43dbfe03a8304.png)

# ruby - 为什么 Ruby `**` 运算符的优先级高于一元 `-`？

> ID：13329083
> 
> 赞同：4
> 
> 时间：2012-11-11T06:26:00.917
> 
> 标签：ruby, operator-keyword, operator-precedence

这会导致如下情况：

```
-1 ** 0.5 #=> -1 
```

只有括号可以解决它：

```
(-1) ** 0.5 #=> 6.123031769111886e-17+1.0i 
```

不如预期的好`1.i`，但基本可以接受。在我去 Ruby bug 抱怨之前，我想知道这是否有某种原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T06:32:05.077

许多语言通过在数学运算顺序之后建模来定义它们的运算符优先级表。在数学中，求幂确实比乘法具有更高的优先级，而一元否定毕竟*是乘法。*

来自 matz 在对“平方时省略数字的符号”的[回复：](http://www.ruby-forum.com/topic/87126#163398)

> 有数学背景的人要求**优先于一元减号。这就是原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T06:33:25.837

是的，在 Ruby 中`**`具有[更高的优先级。](http://phrogz.net/ProgrammingRuby/language.html#table_18.4)

与某些语言不同，`-`它*不是*数字文字的一部分，因此只是（并且普遍地）一元`-`（又名`-@`）。也就是说，两者都将一元`-x`和`-1`解析`-@`作为运算符应用于表达式的结果。

# r - 在 R 中创建新变量

> ID：13329095
> 
> 赞同：0
> 
> 时间：2012-11-11T06:28:45.393
> 
> 标签：r

我有两个变量`TEMPD`，并且`ENERGY`

我想创建两个新变量`TEMP2`并`TEMP3`执行以下操作：

```
tempd2 = tempd^2;
tempd3 = tempd^3; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-11T06:35:46.407

您在这里拥有的将起作用，但在 R 中您使用`<-`而不是`=`.

```
temp <- 2
energy <- 16

temp2 <- temp^2
energy2 <- energy^2 
```

检查结果：

```
> temp2
 [1] 4
> energy2
 [1] 256 
```

# javascript - 从“{Input:{'A':'System.Int32','B':'System.Int32'}, Output:System.Int32}”生成 html

> ID：13329096
> 
> 赞同：0
> 
> 时间：2012-11-11T06:28:53.223
> 
> 标签：javascript, knockout.js, metadata

我将元数据作为字符串获取，例如“{Input:{'A':'System.Int32','B':'System.Int32'}, Output:System.Int32}”

我正在使用 knockout.js，也可以使用 json.parse。但是有什么简单的方法可以生成一个输入表单，让用户提交输入属性的数据。（将元数据更改为属性列表会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:20:57.673

我用它来生成属性数组。

```
self.input = ko.observableArray([]);
if (data.MetaData) {
  //  alert(data.MetaData);
    var d = JSON.parse(data.MetaData).Input;
    for (var prop in d) {
        self.input.push({name:ko.observable(prop),type:d[prop],value:ko.observable('')});
    }
} 
```

和查看：

```
 <ul data-bind="foreach:test().input">
        <li >
            <label data-bind="text:name, uniqueFor: name"></label>
            <input placeholder="value" data-bind="value:value, uniqueId: name"/>
        </li>
    </ul> 
```

和绑定：

```
ko.bindingHandlers.uniqueId = {
    init: function (element, valueAccessor) {
        var value = valueAccessor();
        value.id = value.id || ko.bindingHandlers.uniqueId.prefix + (++ko.bindingHandlers.uniqueId.counter);

        element.id = value.id;
    },
    counter: 0,
    prefix: "unique"
};

ko.bindingHandlers.uniqueFor = {
    init: function (element, valueAccessor) {
        var value = valueAccessor();
        value.id = value.id || ko.bindingHandlers.uniqueId.prefix + (++ko.bindingHandlers.uniqueId.counter);

        element.setAttribute("for", value.id);
    }
}; 
```

# sql-server-2008 - 多对多关系和一对多关系有什么区别？

> ID：13329098
> 
> 赞同：0
> 
> 时间：2012-11-11T06:29:50.677
> 
> 标签：sql-server-2008

我在 SQL Server 数据库的逻辑设计中遇到问题。

我仍然无法区分哪个关系必须是一对多的，哪个关系必须是多对多的。有人告诉我，如果两个实体表都是独立的，它们可以具有多对多关系，否则它们将具有一对多关系。

但现在我正在做一个收集员工个人信息的项目，其中有一个表被称为`JobStatus`是用于人员当前工作的表。这个表和`Person`(table)是多对多的关系，当然它们之间有一个联结表。

我建立这种类型的关系是因为一个职位的名称被分配给几个人并且具有不同的表现。

例如 ：

```
Person A ----->Operator
Person B------>Operator and so on... 
```

而另一方面，在某些情况下，一个人有两个职位，我的意思是他要么是导演，要么是老师。

例如 ：

```
Person C ------>Director & Teacher 
```

那么请你指导我这个模棱两可的逻辑意思吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T06:59:12.927

根据您描述的项目，我将创建三个表：employeeTable、jobType 和 jobAssignment。给每个员工一个唯一的 id（主键），给每个工作一个唯一的 id（主键），让 jobAssignment 表成为连接 employeeTable 和 jobAssignment 表的粘合剂。jobAssignment 表将有一个关于employeeID 和jobID 的索引。

```
jobAssignment
---------------
employeeID (indexed)
jobID (indexed)

employeeTable
---------------
employeeID (primary key)
employeeName

jobType
---------------
jobID (primary key)
jobName
jobDescription 
```

这样，无论为每个员工分配了多少职位描述，您都可以在 jobAssignment 表中跟踪员工及其各自的职位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T06:56:31.097

简而言之，当任一表不能将另一个表中的 PK 作为其外键时，您会识别出多对多

采取学生和课程表

*   学生可以参加许多课程
*   课程可以属于多个学生

将 FK of course (CourseID) 放在学生身上会将学生限制为一门课程

将学生的 FK (StudentID) 放在课程上会将课程限制为一名学生

为了解决这个问题，第三个表 StudentCourse 将具有 StudentID 和 CourseID，从而使任一表独立。

那是多对多。

对于一对多来说，当您可以轻松地将一个表的 ID 作为另一个表的 FK 时，就会发生这种情况。

在您的情况下，两名员工可以同时是操作员，一名员工可以是操作员和教师——这种设计是多对多的。你说的对

# javascript - 使用 Javascript 检查表格单元格的内容

> ID：13329100
> 
> 赞同：0
> 
> 时间：2012-11-11T06:30:03.567
> 
> 标签：javascript, html-table

我的页面中有一个表格，我想使用 while 循环来检查代码第一列的内容。这就是我的代码的样子。我的表的名称是“列表”。

```
 var row=1;
        var cell=0;
        var flag=true;
        while (flag){
            var ele = list.rows[row].cells[cell].innerHTML;
            var stuff = ele.toString();

            if (stuff.search("Live") > -1 || stuff.search("Offline") > -1){
                row = row + 1;
            }
            else{
                flag = false;
            }
        } 
```

然后使用变量`i`，我可以专门修改该行中的内容，但由于某种原因，我不断得到：

> “未捕获的类型错误：无法读取未定义的属性‘innerHTML’”

当我尝试运行它时，它没有正确输出。我的表如下所示：

```
<table border="1" class="sortable" id="list">
<tr><th>Sort</th><th class="sorttable_nosort">Stream Name</th><tr>
<tr><td><script> livecheck("http://api.justin.tv/api/stream/list.xml?channel=gamespot", "True"); </script></td><td><a href="twitchtv.html" target="Stream">Twitch.tv test</a></td></tr>
<tr><td><script> livecheck("http://api.own3d.tv/liveCheck.php?live_id=6815", "true"); </script></td><td><a href="own3d.html" target="Stream">own3d test</a></td></tr>
<tr><td><script> livecheck("http://xcornellheronsx.api.channel.livestream.com/2.0/livestatus.xml", "true"); </script></td><td><a href="livestream(dot)com.html" target="Stream">livestream.com test</a></td></tr> 
```

我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:39:06.620

您需要初始化变量`list.`

例如，

```
var list = document.querySelectorAll('#list'); 
```

# log4cplus - 如何使用 log4cplus 以与 Chainsaw 兼容的格式输出日志消息

> ID：13329101
> 
> 赞同：3
> 
> 时间：2012-11-11T06:30:06.247
> 
> 标签：log4cplus, apache-chainsaw

我最近想出了如何在我的 C++ 应用程序中以与 LogFactor5 兼容的格式输出 log4cplus 消息：

在我的 log4cplus.properties 文件中，我定义了以下附加程序：

```
# LogFactor5 appender
log4cplus.appender.LogFactor5=log4cplus::RollingFileAppender
log4cplus.appender.LogFactor5.Schedule=DAILY
log4cplus.appender.LogFactor5.File=/home/ken/logs/project1.logfactor5
log4cplus.appender.LogFactor5.Append=true
log4cplus.appender.LogFactor5.MaxBackupIndex=9
log4cplus.appender.LogFactor5.MaxFileSize=100KB
log4cplus.appender.LogFactor5.layout=log4cplus::PatternLayout
log4cplus.appender.LogFactor5.layout.ConversionPattern=[slf5s.start]%d{%d %b %Y %H:%M:%S,%Q}[slf5s.DATE]%n%p[slf5s.PRIORITY]%n%x[slf5s.NDC]%n%t[slf5s.THREAD]%n%c[slf5s.CATEGORY]%n%l[slf5s.LOCATION]%n%m[slf5s.MESSAGE]%n%n 
```

但是，我想为 Chainsaw 做类似的事情，但没有找到正确的格式。Chainsaw 要求的日志消息格式是什么？

Chainsaw 是否期望日志消息为 XML 格式？log4cplus 是否提供 XML 附加程序？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:38:12.813

Chainsaw V2 可以解析和尾随任何日志框架生成的常规文本文件，因此您不需要生成 XML 格式的日志。

我建议在[http://people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)上尝试开发人员快照（运行 zip 中的链锯/chainsaw.bat 文件，或来自 DMG 的 Mac 应用程序），然后浏览配置对话框定义日志文件的日志格式。

如果您有其他问题，请随时通过我的 apache.org 地址向 sdeboy 发送电子邮件或在 log4j 用户列表上发布问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:39:39.743

Log4cplus在 1.1.0 版本中增加[了 Log4jUdpAppender](http://log4cplus.sourceforge.net/docs/html/classlog4cplus_1_1Log4jUdpAppender.html)。测试一下。

此时 Log4cplus 不提供任何 XML 附加程序。我当然愿意接受这样的附加程序应该如何表现的建议。请指出一些与 Chainsaw 兼容的 XML 日志文件的规范。

**编辑1：**

log4cplus.properties 示例：

```
log4cplus.appender.TEST=log4cplus::Log4jUdpAppender
log4cplus.appender.TEST.host=localhost
log4cplus.appender.TEST.port=4445 
```

# php - 在php中使用preg_split从字符串中获取单词

> ID：13329104
> 
> 赞同：3
> 
> 时间：2012-11-11T06:30:36.777
> 
> 标签：php, regex

我正在尝试使用 preg_split 从 php 中的字符串中获取单词，如下所示：

```
$result = preg_split('/[^A-Za-z]+/', $text) 
```

但这不起作用，有些单词是分裂的，我做错了什么？

编辑：事实是它不适用于俄罗斯文本 = "фыва ывафы фываф";

```
$result = preg_split('/[^А-яа-я]+/', $text) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T06:46:25.040

`[^A-Za-z]`只考虑 ASCII 字母。您需要拆分 Unicode 非字母：

```
$result = preg_split('/\P{L}+/u', $subject); 
```

`[^А-Яа-я]+`也不起作用，因为在 Unicode 字符集中，`А`(0x0410) 不是第一个 Kyrillian 字母，并且`я`(0x044F) 不是最后一个。看来这些荣誉属于`Ё`(0x0401) 和`ӹ`(0x04F9)。我根本不懂俄语，所以我无法推测为什么会这样。

您可以使用字符映射程序轻松检查：

![屏幕截图](../Images/60e5aa5504ed2d12697a293685acafa6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:49:20.923

```
$str ="As sdf fdasf";
$result = preg_split('/[\b ]/', $str); 
```

编辑：

```
$result = preg_split('/\b\s+/', $str); //this is not for Unicode 
```

# vb.net - 如何在 vb.net 列表框中打印三角形

> ID：13329105
> 
> 赞同：0
> 
> 时间：2012-11-11T06:30:37.450
> 
> 标签：vb.net

我正在尝试使用 vb.net 在列表框控件中打印 8 行三角形。我已经尝试了很多次，但我无法实现。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim i, j, n As Integer
    i = 1
    j = 1
    n = 8
    While i <= n
        i += 1
        j = 1
        While j <= 1
            listbox1.items.add( "*" & vbCrLf)
            j += 1
        End While

    End While

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:55:21.767

我在头顶看到两件事。在你的第二个`While`陈述中，你有`J <=1`而不是`J <= i`. 但主要的是，您没有为您的 "*" 构建一个字符串，然后将其添加到您的`ListBox`中，而是为每个 * 添加单个项目。

这是一种方法

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim i, j, n As Integer
    i = 1
    j = 1
    n = 8
    While i <= n
        j = 1
        Dim tmp As String = "" 'String to build your Line
        While j <= i
            tmp += "*"
            j += 1
        End While
        ListBox1.Items.Add(tmp)
        i += 1 'Moved to end otherwise you start with 2 *'s
    End While

End Sub 
```

另一个只使用一个`While`

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim i, n As Integer
    i = 1
    n = 8

    While i <= n
        ListBox1.Items.Add(StrDup(i, "*") )
        i += 1
    End While

End Sub 
```

# c# - 如何在整个网站上保持登录状态

> ID：13329112
> 
> 赞同：-2
> 
> 时间：2012-11-11T06:33:23.933
> 
> 标签：c#, asp.net, session-variables

我在建立网站时面临一个非常基本的问题；该网站有 10 个页面，问题是当我登录一次时，我如何才能在其余页面中保持登录状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:59:41.650

由于此问题包含 asp.net 和会话变量的标签，因此我不确定您缺少什么。

在登录表单上：

```
if (authentaionSuceeded){
   HttpContext.Current.Session["loggedin"]="yes";
} 
```

在所有其他页面上（注销除外）

```
if (HttpContext.Current.Session["loggedin"]=="yes"){
   // whatever you do for logged in users.
} 
```

这是基本的想法。虽然我更喜欢通过[提供类型安全和所有会话变量列表的扩展方法/类来访问会话变量](https://stackoverflow.com/questions/12923609/a-custom-variable-that-is-user-specific/12924861#12924861)。该答案中的示例在 VB 中，但您可以在 c# 中执行相同的操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T06:38:42.707

有一些可能的解决方案如下：

1.  Cookies：将会话信息存储在页面标题中的 cookie 中
2.  隐藏表单字段：在页面表单的一些隐藏字段中维护会话信息

在每个选项中，您需要在服务器端生成会话密钥（一些加密的唯一密钥），并且在后续请求中，您应该能够验证该会话密钥。最好在每个请求上重新生成一个新的会话密钥并在一定时间间隔后过期。因此，对于活跃用户，它将不断获得新密钥，但非活跃用户会话将简单地过期。

# android - 在两个班级之间进行更改，但程序已停止。为什么？

> ID：13329115
> 
> 赞同：0
> 
> 时间：2012-11-11T06:33:40.110
> 
> 标签：android, button

我有两个课程。我希望当用户单击两个第一个按钮时，程序转到第一类（主类）。我不使用片段。我编写了这段代码，但是当运行程序并单击 Places 按钮时，程序已停止。为什么？（在我添加按钮点击之前，程序正确运行）。LogCat 写入 nullexception 但我找不到 null 在哪里？！请帮我。

位置.java

```
public class Location extends MapActivity {
private FrameLayout linear;
private MapView map;
private MapController controller;
private EditText text_location;
GeoPoint searchLocation;
GeoPoint mylocation;
double myLatitude=0;
double myLongitude=0;
List<Overlay> mapOverlays;
Drawable drawable;
SimpleItemizedOverlay itemizedOverlay;

//Other classes
private Button mHome;
private Button mProduct;
private Button mPlaces;
private WebView mWebView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);

    initOtherButtons();
            //....
    }
    private void initOtherButtons(){
    mHome=(Button)findViewById(R.id.button_home);
    mProduct=(Button)findViewById(R.id.button_product);
    mPlaces=(Button)findViewById(R.id.button_places);
    mWebView=(WebView)findViewById(R.id.web_view);
    //TEST
    mHome.setOnClickListener(onClickListener);
    mProduct.setOnClickListener(onClickListener);

}
private OnClickListener onClickListener=new OnClickListener(){
    Intent i=new Intent(Location.this,Main.class);
    public void onClick(View v){
        switch(v.getId()){
        case R.id.button_home:
            startActivity(i);
            break;
        case R.id.button_product:
            startActivity(i);
            break;
        }
    }
};
} 
```

主.java

```
public class Main extends Activity {

private WebView mWebView;
private Button mHome;
private Button mProduct;
private Button mPlaces;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

mWebView = (WebView)findViewById(R.id.web_view);
mWebView.loadUrl("http://www.google.com");

mHome = (Button)findViewById(R.id.button_home);
mProduct=(Button)findViewById(R.id.button_product);
mPlaces=(Button)findViewById(R.id.button_places);

mHome.setOnClickListener(onClickListener);
mProduct.setOnClickListener(onClickListener);
mPlaces.setOnClickListener(onClickListener);

}
private OnClickListener onClickListener=new OnClickListener(){
public void onClick(View v){
    switch(v.getId()){
    case R.id.button_home:
        mWebView.loadUrl("http://www.google.com");
        break;
    case R.id.button_product:
        mWebView.loadUrl("http://www.google.com");
        break;
    case R.id.button_places:
        Intent i=new Intent(Main.this,Location.class);
        startActivity(i);
        break;
    }
}
};
} 
```

清单.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="org.example.loyaltier"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"

    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />  
    <activity
        android:name=".Main"
        android:label="@string/title_activity_main" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Location"
        android:label="@string/Location_title">
        </activity>
        <activity android:name=".SimpleItemizedOverlay"
        android:label="@string/app_name">
        </activity>

    <activity android:name=".BalloonOverlayView"
        android:label="@string/app_name">
        </activity>

    <activity android:name=".BalloonItemizedOverlay"
        android:label="@string/app_name">
        </activity>
</application>

</manifest> 
```

日志猫：

```
11-11 09:56:16.506: D/OpenGLRenderer(18214): Flushing caches (mode 1)
11-11 09:56:16.506: D/OpenGLRenderer(18214): Flushing caches (mode 0)
11-11 09:56:38.006: D/dalvikvm(18275): GC_CONCURRENT freed 172K, 2% free 14351K/14599K, paused 9ms+2ms
11-11 09:56:38.053: D/dalvikvm(18275): GC_FOR_ALLOC freed 7K, 2% free 14715K/14983K, paused 11ms
11-11 09:56:39.287: D/AndroidRuntime(18275): Shutting down VM
11-11 09:56:39.287: W/dalvikvm(18275): threadid=1: thread exiting with uncaught exception (group=0x40a891f8)
11-11 09:56:39.295: E/AndroidRuntime(18275): FATAL EXCEPTION: main
11-11 09:56:39.295: E/AndroidRuntime(18275): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.example.loyaltier/org.example.loyaltier.Location}: java.lang.NullPointerException
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1879)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.os.Looper.loop(Looper.java:137)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.app.ActivityThread.main(ActivityThread.java:4340)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at java.lang.reflect.Method.invokeNative(Native Method)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at java.lang.reflect.Method.invoke(Method.java:511)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at dalvik.system.NativeStart.main(Native Method)
11-11 09:56:39.295: E/AndroidRuntime(18275): Caused by: java.lang.NullPointerException
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.content.ContextWrapper.getPackageName(ContextWrapper.java:127)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.content.ComponentName.<init>(ComponentName.java:75)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.content.Intent.<init>(In tent.java:3004)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at org.example.loyaltier.Location$1.<init>(Location.java:118)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at org.example.loyaltier.Location.<init>(Location.java:117)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at java.lang.Class.newInstanceImpl(Native Method)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at java.lang.Class.newInstance(Class.java:1319)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-11 09:56:39.295: E/AndroidRuntime(18275):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
11-11 09:56:39.295: E/AndroidRuntime(18275):    ... 11 more 
```

编辑：简单程序

```
private OnClickListener onClickListener=new OnClickListener(){
    public void onClick(View v){
        switch(v.getId()){
        case R.id.button_home:
            mWebView.loadUrl("http://www.google.com");
            break;

        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:39:31.280

可能是您的 manifest.xml 中的活动声明不正确（或根本没有声明）。验证清单并确保声明了活动并且名称正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:40:13.243

它看起来是一个 NullPointerException：

```
11-11 09:56:39.295: E/AndroidRuntime(18275): Caused by: java.lang.NullPointerException 
```

您的两个 Activity 类都在清单中吗？如果是这样，请检查 Main 的 NPE 的 onCreate 或在此处发布您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T06:57:22.843

如果您在模拟器中运行它，请检查您的模拟器是否已创建支持 MapView 所需的 Google API。查看此链接以了解[AVD](https://developers.google.com/maps/documentation/android/index#avdsetup)设置。

EDIT01：请尝试`Intent i=new Intent(Location.this,Main.class);`按照`onClick()`以下方法移动：

```
private OnClickListener onClickListener=new OnClickListener(){

    public void onClick(View v){
    Intent i=new Intent(Location.this,Main.class);
        switch(v.getId()){
        case R.id.button_home:
            startActivity(i);
            break;
        case R.id.button_product:
            startActivity(i);
            break;
        }
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T09:14:42.707

我认为问题出在 Intent 对象上，因为我更改了程序，程序正确运行。发生了什么？为什么 Intent 应该在每种情况下都反对？

```
public void onClick(View v){
switch(v.getId()){
case R.id.button_home:
        Intent i=new Intent(Location.this,Main.class);
    startActivity(i);
    break;
case R.id.button_product:
    Intent j=new Intent(Location.this,Main.class);
    startActivity(j);
    break;
case R.id.button_places:
    //
    break;
}
} 
```

谢谢。干杯

# azure - 将自定义域（和通配符子域）映射到 Azure 网站

> ID：13329123
> 
> 赞同：4
> 
> 时间：2012-11-11T06:34:43.917
> 
> 标签：azure, azure-web-app-service

我查看了 MSDN 和堆栈溢出中的所有相关帖子，但仍然难以找到解决方案。

我正在寻找将域和所有子域映射到我的 windows azure 网站。它是一个保留的网站实例。我正在使用 Amazon Route 53 DNS 管理器并将通配符 CNAME 映射到我的 azure 子域，并在裸域上创建了重定向到 www。子域。

当我导航到裸根时，重定向开始，我被带到 www..com，在那里我收到来自 azure 的 404 错误。

我知道通配符 CNAME 正在工作。我已经使用 MXToolbox 进行了验证。如果我转到 Azure Web UI 管理系统中的“管理域”，我可以手动添加“www..com”或任何其他子域（例如“helloworld..com”）。Azure 验证它很好，保存后，我可以通过导航到该子域并加载我的天蓝色网站来很好地拉起网站。

有没有办法添加通配符子域而无需通过 azure ui 界面手动验证每个子域？我的应用程序是一个 SaaS，它依赖于自定义用户子域来提供其品牌网站并获得对其帐户的访问权限，因此我需要任何和所有子域来映射到我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:06:15.090

据我所知，目前不支持通配符域。至少在 Windows Azure 网站上。它们在路线图上，但目前您必须依靠手动添加每个域。

请参阅[“为 Windows Azure 网站配置自定义域名”的通配符注释](https://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/#comment-830367489)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:10:53.040

Azure 网站上尚不可用的另一个功能是使用虚（您自己的）域名的 SSL。如果您想要完全控制您的站点，您可以使用 Azure 云服务而不是网站。借助云服务，您可以使用主机标头路由在同一实例上配置证书、域名和运行多个站点。

您可以使用 IIS 管理执行的任何操作都可以使用云服务执行。

You're a little closer to the metal compared to Azure Web Sites (but not as close as with a VM) and you get load balancing, scaling, caching, and other goodness. Visual Studio 2010/2012 has excellent deployment tooling. You will need to study up on Azure deployment projects from VS, bit it's not bad.

# assembly - LEAL指令，这是什么意思？

> ID：13329124
> 
> 赞同：1
> 
> 时间：2012-11-11T06:35:14.880
> 
> 标签：assembly, addressing-mode

所以首先我通过做分配edx = y`movl 12(%ebp) %edx.`

为什么`leal (%edx, %edx, 2) , %edx` =`edx = 3*y`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T06:48:16.977

`LEA`是“加载有效地址”的缩写。（在 AT&T 语法中，对于 32 位操作数，它拼写为“leal”。）基本上，它采用给定括号中的内容计算的地址，而不是读取或写入内存，而是将*地址本身*分配给目标操作数。

它通常用于进行地址计算，但也经常用于乘以某些整数常量（3、5 和 9），假装一个数字是一个地址。（地址*只是*数字，所以一点也不难。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T06:49:05.847

直译过来就是“将有效地址EDX + EDX * 2装入EDX”。

80x86 有一些比较强大的寻址模式。例如，“movl (%edx, %edx, 2), %edx”将是“将有效地址 EDX + EDX << 1 处的值加载到 EDX 中”。LEA 指令允许这种相对强大的寻址电路被回收并用于其他目的。

您的部分困惑可能是由 AT&T 语法引起的——地址的书写方式远非自然。为了比较；对于英特尔语法，它会更清晰（例如“lea edx，[edx+edx*2]”）。

# svg - 移除 SVG 文件中的转换

> ID：13329125
> 
> 赞同：206
> 
> 时间：2012-11-11T06:35:24.240
> 
> 标签：svg, transform, inkscape

我已经为此苦苦挣扎了一段时间，似乎无法在任何地方找到答案（有效）。我有一个如下所示的 SVG 文件：

```
<svg

   xmlns:dc="http://purl.org/dc/elements/1.1/"
   ...
   width="72.9375"
   height="58.21875"
   ...>
   ...
   <g
     ...
     transform="translate(10.75,-308.96875)"
     style="...">
     <path
       inkscape:connector-curvature="0"
       d="m -10.254587,345.43597 c 0,-1.41732 0.17692,-2.85384 0.5312502,-3.5625 0.70866,-1.41733 2.14518,-2.82259 3.5625,-3.53125 1.41733,-0.70866 2.11392,-0.70867 3.53125,0 1.41732,0.70866 ... z"
       ... />
  </g>
</svg> 
```

我想删除这`transform="..."`条线，但我的图像仍然保留在我放置的位置（在 InkScape 中）。如果我手动删除转换，图像会压缩到屏幕的另一部分（如预期的那样），但我需要完全摆脱转换，同时让图像保持在我想要的位置。有没有办法将变换删除/展平为路径坐标本身？（我必须处理的唯一转换是平移和缩放，没有矩阵。）

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2014-06-12T08:43:16.383

**如何在 Inkscape中删除*变换***

1.  在 Inkscape 中打开 svg 文件
2.  转到编辑 -> 全选
3.  转到对象 - >取消组合
4.  转到编辑-> XML 编辑器
5.  在图层中找到“变换”属性并删除它们

**如何在不创建其他变换属性的情况下完全移动所有对象**

1.  转到编辑 -> 在所有图层中全选
2.  转到对象-> 变换

**在变换面板中**

3.  取消选中**相对移动**并选中**分别应用于每个对象**
4.  根据您的需要设置*水平*和*垂直值，然后单击***应用**

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2016-12-21T08:57:37.290

有一个名为**[Apply Transforms](https://github.com/Klowner/inkscape-applytransforms)**的 inkscape 扩展，它使用它们的变换重新计算路径。这正是我一直在寻找的。

安装后，您会在*Extensions > Modify Path > Apply Transform*下找到它的菜单。

* * *

学分：Inkscape 论坛 >[删除所有变换，同时保持原位](http://www.inkscapeforum.com/viewtopic.php?t=27459)

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2012-11-18T08:50:13.563

我弄清楚了问题所在。我希望不必求助于罗伯特的回答，尽管我很高兴确认它会起作用！最后 Duopixel 的答案实际上是最接近的，尽管事实证明还有其他事情发生。

当您在 Inkscape 文档中使用不同的路径时，我相信它的默认行为是将它们组合在一个`<svg:g.../>`标签下。当修改组中的路径时，Inkscape 会自动向组中添加一个变换来表示这些更改。但是，如果您打开 XML 编辑器并将路径拖到`<svg:g.../>`标签之外并使其成为自己的`<svg:path.../>`标签，Inkscape 可以随意编辑各个点。最后它确实是一个分组问题，即使我只使用一条路径！希望这可以帮助其他处于类似情况的人。

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2012-11-11T16:29:30.037

[![在此处输入图像描述](../Images/23f8e30abe54e3007521b7de4d93de60.png)](https://i.stack.imgur.com/PgQpe.png)

1.  [在 Method Draw http://editor.method.ac](http://editor.method.ac)中加载您的 SVG （文件 > 打开图像）
2.  取消组合元素（对象 > 取消组合元素）您可能需要多次执行此操作。
3.  选择你的路径
4.  重新定向路径（对象 > 重新定向路径）。
5.  保存图像（文件>保存图像）如果它出现在新窗口中，您可以右键单击并“将图像另存为...”

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2017-05-17T10:06:10.693

**在Inkscape**上打开你的 svg ：

*   **选择**包含您想要摆脱的所有转换的组
*   按`CTRL`+ `U`（取消组合）
*   按`CTRL`+ `G`（再次分组）

这样，您将摆脱应用于组的变换，它们将被转移到该组中包含的路径。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2014-08-01T14:23:12.337

对于团体来说，重组可以快速完成这项工作。选择组并按 Ctrl+Shift+G（解组），然后按 Ctrl+G（组）。

对于一些有类似问题的对象，例如螺旋和星星，快速的方法是按 Ctrl+Alt+C（笔划到路径） - 但是这会将对象转换为纯路径并删除所有额外属性，比如sodipodi:cx, sodipodi:revolutions等等。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2017-11-20T16:52:05.733

[SVGO](https://github.com/svg/svgo)是一个出色的开源命令行工具，用于此和许多其他优化。有一个同样出色的在线 Web UI，称为[SVGOMG](https://jakearchibald.github.io/svgomg/)

在这种情况下，相关选项是`moveGroupAttrsToElems`(SVGOMG: `Move group attrs to elements`) 将`transform`属性从组移动到路径元素，加上`convertPathData`(SVGOMG: `Round/rewrite paths`) 以展平`transform`为`d`.

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2015-10-13T11:05:04.247

虽然我更喜欢 Inkscape，但[Affinity Designer](https://affinity.serif.com/en-us/designer/)（约 40 美元/Mac）在使用 Android Vector Drawables 时为我节省了数小时的精力。

打开一个 SVG，文件 -> 导出 -> SVG -> 更多 ->**展平变换**效果很好。

[![亲和设计师](../Images/4791da3f5e8869e15d7171385ec909a2.png)](https://i.stack.imgur.com/Ppg1Q.png)

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2012-11-11T22:04:52.610

根据我的经验，如果您使用 Inkscape，只需稍微移动路径元素（例如使用光标键），Inkscape 将删除变换属性并相应地调整路径数据。（如果您真的想保留 transform 属性，那就很烦人了。）

所以，你可以简单地选择路径（确保它是路径而不是周围的组），点击左右光标键，你就完成了。

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2015-03-10T14:45:18.693

值得一提的是，偏好中有“优化”模式：

Inkscape Preferences > Transforms > Store transformation > Optimized

这应该尽可能减少`transform`属性的出现，（但没有）。

无论如何，这似乎是默认开启的。

根据[讨论](http://www.inkscapeforum.com/viewtopic.php?f=5&t=17884#p66138)，这种*优化*模式缺乏热情的一个例子是在**调整页面大小**时。这会导致将`translate`变换应用于图层`<g>`元素。看来，将孩子们疏散到另一层是目前最好的解决方案。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2013-07-11T12:55:41.723

Inkscape 可以选择清除转换数据，但仍保持对象的值不变。

在 Inkscape 中，选择对象和“路径”菜单，“简化”。现在，您将删除转换。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2016-02-18T19:00:57.477

1.  选择有问题的元素
2.  对象 > 取消组合（重复直到所有内容都取消组合；查看嵌套节点的 XML 编辑器）
3.  路径 > 对象到路径（将多边形转换为路径）
4.  对象>变换>取消选中相对移动>应用

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2014-10-17T15:08:47.500

要从`g`Inkscape 中的元素（组）中删除 transform 属性，您可以将组移动到其最终位置，取消组合，然后重新组合所有元素。现在已经创建了一个新组，如果您不再移动它，它将不会获得附加的变换属性。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2012-11-11T13:56:12.543

在这种情况下，只需将转换添加到每个孩子的 m 值，因此 -10.254587 + 10.75 = -0.504587 和 -308.96875 + 345.43597 = 36.46722。

由于示例中的所有术语都是相对的（即小写），仅此而已。如果有任何是绝对的（大写），例如 M 或 C，它们也必须进行调整。

对于比例，您基本上将所有子值乘以比例。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2015-03-06T15:28:50.690

如果有人在这里寻找在 Sketch 3 中执行此操作的解决方案，请选择图层，然后单击图层->路径->展平。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-01-20T12:05:51.043

在我的情况下，保存为优化的 SVG 解决了这个问题。所以在 Inkscape 中使用：

文件 -> 另存为... -> 优化的 SVG。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2014-08-15T20:39:31.613

找到了：

*   设置您想要的页面大小*
*   如果您当前的图层有一个变换（使用 XML 编辑器检查，它是 SVG 元素下的顶级组）然后创建一个新图层并将所有对象移动到它
*   取消分组任何组（这可能不需要，YMMV）
*   选择所有对象并应用空变换（例如按 100% 100% 缩放，或右箭头 + 左箭头），同时进行存储变换：在首选项/变换中优化
*   如果您必须撤消任何组，您现在可以重新组合它们
*   将副本另存为优化的 SVG 并设置所需的数字精度

*：或者至少将对象放置在您需要它们的位置，相对于页面的左上角。不幸的是，SVG 坐标参考左上角，而 Inkscape 相对于左下角调整页面大小！

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-05-28T20:13:19.903

通过将路径与矩形组合，然后删除矩形的节点，我能够摆脱`matrix(...)`变换（由于镜像）。不过，这`translate(...)`部分仍然存在。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-02-05T20:22:17.347

如果您使用的是 Inkscape，则此方法有效：

1.  选择所有内容并取消组合
2.  另存为“优化的 Svg (*.svg)”

在我尝试过的所有情况下，这都删除了任何转换属性。不确定它是否适用于更复杂的 SVG。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-01-24T14:36:29.737

我尝试了此处发布的解决方案，即删除 SVG 文件中的组标签并在 Inkscape 中重新打开它（在我的情况下为 0.48.3.1）。唉，在我使用选择和转换模式（F1）再次翻译路径并保存后，组标签再次出现！Inkscape 将应用于路径的所有转换保存在周围的组元素中。除非您使用路径节点选择工具 (F2)，否则请按 ctrl+a 并将路径的节点移动到正确的位置。在我这样做并保存之后，Inkscape 没有添加组标签，因为这种翻译直接应用于路径模型。希望这可以帮助。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-05-02T14:06:16.083

我多年来一直有这个问题。解决方案显然是能够在浏览器中动态播放转换，如果它不会在inkscape中“固定”。

Inkscape 论坛的用户*Mc*给了我[这个解决方案](http://stackoverflow.com/questions/13046811/how-to-determine-size-of-raphael-object-after-scaling-rotating-it/13111598#13111598)。

该解决方案在 SVG 元素与其 SVG 根元素之间构建当前变换，然后根据变换的总数返回一整套 BBox 信息。

如果您想在浏览器中在同一个 SVG 文件的两个部分之间进行工作，也可以轻松更改计算相对于哪个元素。

最后，我实际上可以拥有一个平移 SVG 视口。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-10-27T02:24:59.647

这似乎是随机的，但我尝试过的其他方法都没有，所以在这里你随机选择其他人。我的一些路径在它们周围有一种边缘，只有在选择它们时才能看到（[![例子](../Images/b5479c4215e2e36ac4fa83959d35d8ef.png)](https://i.stack.imgur.com/eKaZW.png)）。我认为这是当我从另一个 inkscape 文件中粘贴一个图层并将其旋转 90 度时创建的。这使得形状上的图案填充具有不同的变换（线间隔更远）。它还使对齐对象无法按预期工作。使用@Piotr_cz 提到的[应用变换解决了变换问题，但奇怪的边距仍然存在。](https://github.com/Klowner/inkscape-applytransforms%20Apply%20Transforms)我不小心通过将描边模糊更改为任何值并将其更改回零来摆脱它。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-11-29T22:20:03.653

在我的情况下，这些组实际上是由层引起的。删除文档中的所有图层删除了组和变换（可能与取消组合对象并重新组合它们等，如[删除 SVG 文件中的变换](https://stackoverflow.com/questions/13329125/removing-transforms-in-svg-files#answer-35490189)（来自上面@Charlie 的答案 35490189））

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-08-24T12:10:29.480

我的具体问题是在页面外定义的符号，因此需要在页面上显示转换。

要将符号移动到页面而不需要转换，我必须在 Inkscape 中完成以下步骤：

1.  打开符号窗口 (Shift+Ctrl+Y)
2.  从文档库中删除符号。（窗口中有一个按钮。）
3.  现在图形显示在文档中，位于页面边界之外。
4.  取消组合图形。（这是至关重要的一步！）
5.  在页面边界内移动图形。
6.  将图形添加回符号库。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-06-05T12:18:08.700

不知何故，我对任何一种方法都没有运气。如果`<defs>`您的 svg 中有这样的部分和用法：

```
<g transform="matrix( *** ) "><use xlink:href="#***"/></g> 
```

您可能必须删除所有用法并从 defs 部分中取出所有内容。然后，您可以使用 inkscape 以正确的方式放置所有内容，然后使用提到的插件应用转换。希望它可以帮助某人。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-07-03T12:01:56.773

**Kubuntu 20.04 上的 Inkscape 1.0**

虽然这个线程相当老，但我想发布我的经验/解决方案。我在尝试为 FreeCAD 的 TechDrawing 工作台创建模板时遇到了这个问题。这些模板不得包含任何转换。

就我而言，我必须从外部 .svg 文件（完全用 Inkscape 制作）添加公司徽标。该徽标包含图形和文本元素。将该徽标复制到模板中时，会创建转换，导致模板在 FreeCAD 中无法正常工作。

*   首先，[www.freecadweb.org/...](https://wiki.freecadweb.org/TechDraw_TemplateHowTo#Remove_transformans_on_the_SVG)上建议的这个解决方案对我不起作用。这就是我搜索网络并找到此讨论的原因。

*   其次，上面建议的解决方案都没有对我有用，但它们让我走上了正确的轨道。查理的答案很接近，但*对象 > 变换 > 取消选中相对移动 > 应用*确实没有区别。

对我有用的是：

1.  正如其他人所提到的，取消组合所有内容。
2.  将文本对象转换为路径 - 在我的情况下这似乎是必不可少的！
3.  删除 xml-Editor 中的所有现有转换并观察相关对象发生的情况。在我的例子中，相应的元素改变了它们的位置。
4.  手动更正这些更改，但不要对任何内容进行分组。
5.  另存为普通 svg（普通 = 未使用优化或其他特殊设置）

当我在 FreeCAD 中使用该模板时工作正常。

* * *

一个奇怪的细节：虽然我的解决方案意味着文本元素是我的问题，但它并不是那么容易。事实上，基本文档（我复制徽标的那个）包含很多文本元素，我没有转换任何一个。所以它可能是“外部来源”**和**文本元素的组合。我只是将此细节发布给可能有相关问题的其他人的提示。

# javascript - 需要帮助克服跨域问题，使用服务器端的节点和客户端的 JS

> ID：13329127
> 
> 赞同：0
> 
> 时间：2012-11-11T06:35:42.947
> 
> 标签：javascript, jquery, node.js, cross-domain

我在端口 8081 上运行 http 服务器，并尝试使用 getJSON jQuery 函数获取 JSON。但我总是遇到跨域（CORS）问题。我正在考虑使用 JSONP，但不确定我应该如何在我的 node.js 脚本上实现它。

```
 headers["Access-Control-Allow-Origin"] = "*";
  headers["Access-Control-Allow-Methods"] = "POST, GET, PUT, DELETE, OPTIONS";
  headers["Access-Control-Allow-Credentials"] = false;
  headers["Access-Control-Allow-Headers"] = "Content-Type,X-Requested-With, X-PINGOTHER";
  headers["Access-Control-Max-Age"] = 86400;
  response.writeHead(200, headers);
  var objToJson = {"response":res };
  response.write(JSON.stringify(objToJson)); 
```

这是我的客户端代码。

```
 jQuery.getJSON('http://localhost:8081', function(data) {
    console.log(data);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:00:19.410

你可以改编这个 PHP 脚本，逻辑很简单。归功于：[https ://stackoverflow.com/a/1678243](https://stackoverflow.com/a/1678243)

```
if (array_key_exists('callback', $_GET)) {
    // JSONP String
    header('Content-Type: text/javascript; charset=utf8');
    header('Access-Control-Allow-Origin: *');
    header('Access-Control-Max-Age: 0');
    header('Access-Control-Allow-Methods: GET');

    $callback = $_GET['callback'];
    echo $callback . '(' . $data . ');';
} else {
    // JSON String
    header('Content-Type: application/json; charset=utf8');
    echo $data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:29:42.123

不知道你做错了什么，但我复制了你的代码，填补了空白，它对我有用（在 Firefox 16 和 Chrome 24 上）。

这是我的[CORS 演示](https://gist.github.com/4059663)：

*   应用程序.js

    ```
    var http = require('http');

    http.createServer(function(request, response) {
      var headers = {};
      headers["Access-Control-Allow-Origin"] = "*";
      headers["Access-Control-Allow-Methods"] = "POST, GET, PUT, DELETE, OPTIONS";
      headers["Access-Control-Allow-Credentials"] = false;
      headers["Access-Control-Allow-Headers"] = "Content-Type,X-Requested-With, X-PINGOTHER";
      headers["Access-Control-Max-Age"] = 86400;

      response.writeHead(200, headers);
      var objToJson = {"response": "hello cors" };
      response.write(JSON.stringify(objToJson));
      response.end()
    }).listen(8081) 
    ```

*   索引.html

    ```
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset=utf-8 />
    <title>CORS demo</title>
    </head>
    <body>
      view results in the console
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js"></script>
      <script type=text/javascript>
        jQuery.getJSON('http://localhost:8081', function(data) {
          console.log(data);
        });
      </script>
    </body>
    </html> 
    ```

# node.js - NodeJS - 长轮询/推送/拒绝ajax？我需要什么才能将实时数据直接推送到网络？

> ID：13329129
> 
> 赞同：2
> 
> 时间：2012-11-11T06:36:09.980
> 
> 标签：node.js, push, long-polling, requirements

我对 NodeJS（使用 c9.io）相当陌生，最近对它有这种病态的痴迷。

我想知道在使用 NodeJS 时。是否可以流式传输基本 html 页面的内容，不是很大，也不是很特殊，比如 10 个并发用户。但是，如果该 html 页面发生更改，用户将立即看到更改。这可以基于任何事件，但基本上基于正在更新的文件内容。我真的希望创建一些简单的原型来给老板留下深刻印象，并使用 NodeJS 来完成，希望能够摆脱我们当前对 setInterval ajax 帖子的过时使用。呕吐

1.  这个过程的名称是什么，因为我不断听到不同的名称。
2.  可能吗？
3.  除了 NodeJS 我还需要什么
4.  好的起点在哪里？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T08:11:05.663

好的，这是一个非常简单的例子。文本区域与登录成员同步。

请安装 http、socket.io 和 express(ver3)。

```
sudo npm install http, socket.io, express 
```

并创建一个 javascript 文件。

**服务器.js**

```
var app = require('express')(), 
  server = require('http').createServer(app), 
  io = require('socket.io').listen(server),
  member_sockets = {},
  key;

server.listen(80);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket) {
  var user_id = socket.id;

  member_sockets[user_id] = socket;
  console.log("[login]-->", user_id);

  socket.on('txt_change', function (data) {
    for (key in member_sockets) {
      if (key != user_id) {
        member_sockets[key].emit("txt_change", data);
      }
    };
  });

  socket.on('disconnect', function (socket) {
    console.log("[logout]-->", user_id);
    delete member_sockets[user_id];
  });
}); 
```

在同一目录中，您还创建了一个 index.html 文件。

**索引.html**

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io.connect('http://localhost');
      socket.on('txt_change', function (data) {
        console.log(data);
        $("#txt").val(data.txt);
      });
      $(document).ready(function(){
        $("#txt").keyup(function(){
          socket.emit('txt_change', { "txt" : $(this).val() });
        });
      });
    </script>
  </head>
  <body>
    <textarea id="txt" style="width:200px;height:100px"></textarea>
  </body>
</html> 
```

然后使用以下命令运行服务器：

```
sudo node server.js 
```

所以代码应该像这张图片一样工作： ![在此处输入图像描述](../Images/9957d4b68fcbc3866e035c4d5f219fd0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T06:45:16.027

你检查过socket.io吗？您可以使用 socket.io 模块轻松创建推送服务器。

[http://socket.io/](http://socket.io/)

# php - Opencart 使用货币更改选项更改语言

> ID：13329130
> 
> 赞同：0
> 
> 时间：2012-11-11T06:36:24.613
> 
> 标签：php, opencart, multilingual

我只是[opencart](http://www.opencart.com/)的新手。我用它做了一个电子商务网站。在该网站中，具有多语言和多货币转换器选项的功能。现在我希望当用户点击他的语言时，它也应该将货币转换为他的语言。那么是否可以使用[Opencart](http://www.opencart.com/)来做到这一点。有人可以分享任何代码或任何参考链接，以便我可以做到这一点。任何帮助和建议都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:40:40.267

在 opencart 管理面板中有一个货币选项，路径是这样的：

系统 > 本地化 > 货币

在那里您可以更改和添加与特定语言相关的货币选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:10:39.340

```
if ($currency && $this->has($currency)) {
            $symbol_left   = $this->currencies[$currency]['symbol_left'];
            $symbol_right  = $this->currencies[$currency]['symbol_right'];
            $decimal_place = $this->currencies[$currency]['decimal_place'];
        } else {
            if($_SESSION['language']=="es"):

                $symbol_right  = $this->currencies[$this->code]['symbol_right'];
                else:
    $from="USD";
    $to="MXN";
    $path = "http://www.google.com/ig/calculator?hl=en&q=1".$from."=?".$to;
    $rawdata = file_get_contents($path);
    $data = explode('"', $rawdata);
    $data = explode(' ', $data['3']);
    $var = $data['0'];
    $e=round($var,3);
    if ($e):
        $number=$number / $e;
    else:
        $default_dollar=12.863;
        $number=$number / $default_dollar;                    
    endif;    
        $symbol_right=" USD";
    endif;
            $symbol_left   = $this->currencies[$this->code]['symbol_left'];

            $decimal_place = $this->currencies[$this->code]['decimal_place'];

            $currency = $this->code;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:05:50.660

在 :\system\library\currency.php 中有一个函数

```
 public function format($number, $currency = '', $value = '', $format = true) {
    if ($currency && $this->has($currency)) {
        $symbol_left   = $this->currencies[$currency]['symbol_left'];

        $symbol_right  = $this->currencies[$currency]['symbol_right'];
        $decimal_place = $this->currencies[$currency]['decimal_place'];
    } else {            
        $symbol_left   = $this->currencies[$this->code]['symbol_left'];
        $symbol_right  = $this->currencies[$this->code]['symbol_right'];
        $decimal_place = $this->currencies[$this->code]['decimal_place'];           
        $currency = $this->code;
    } 
```

如果您仔细查看，您可以在此处根据语言更改货币，或者您可以使用 jquery 发送 ajax 请求以更改货币。

# ruby - Ruby 中的 ARGV 有什么意义？

> ID：13329132
> 
> 赞同：0
> 
> 时间：2012-11-11T06:36:28.480
> 
> 标签：ruby, stdin, argv

Ruby 中的 ARGV 有什么意义？

```
first, second, third = ARGV 
puts "The script is called: #{$0}"
puts "Your first variable is: #{first}"
puts "Your second variable is: #{second}"
puts "Your third variable is: #{third}" 
```

什么时候运行我需要做的文件有什么意义：

```
ruby ex1.rb 
```

并输入我需要输入的第一个、第二个和第三个变量

```
ruby ex1.rb blah blah blah 
```

这对所有运行程序的人有什么好处？他们无论如何都做不到，因为我认为它是一个可执行文件：

```
user = ARGV.first
prompt = '> '

puts "Hi #{user}, I'm the #{$0} script."
puts "I'd like to ask you a few questions."
puts "Do you like me #{user}?"
print prompt
likes = STDIN.gets.chomp()

puts "Where do you live #{user}?"
print prompt
lives = STDIN.gets.chomp()

puts "What kind of computer do you have?"
print prompt
computer = STDIN.gets.chomp()

puts <<MESSAGE
Alright, so you said #{likes} about liking me.
You live in #{lives}.  Not sure where that is.
And you have a #{computer} computer.  Nice.
MESSAGE 
```

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-11T07:01:03.687

> `ARGV`Ruby的意义何在？

[`ARGV`](http://ruby-doc.org/core-1.9.3/ARGF.html#method-i-argv)“包含传递给脚本的参数，每个元素一个。”

> 什么时候运行你需要做的文件：`ruby ex1.rb`并输入你需要输入的第一个、第二个和第三个变量`ruby ex1.rb blah blah blah`。

这就是确切的一点，能够在运行文件时指定参数，例如：

```
ruby ex1.rb -a -b 3 
```

> 这对所有运行程序的人有什么好处？

任何其他命令行程序都能这样做的好处是相同的：用户可以预先指定他们想要的东西，而且它比交互式 CLI 更容易编写脚本。

> 他们无论如何都不能这样做，因为我认为它是一个可执行文件。

是的他们可以。您刚刚给出了一个示例，说明用户将如何以这种方式运行您的程序。它是否可执行并不会改变任何东西。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-11T07:18:02.337

`ARGV`有着悠久的传统，来自 UNIX/POSIX 世界，其中大多数 C 程序必须包含以下内容：

```
int main(int argc, char **argv)
{
   return(0);
} 
```

There`argc`表示提供的参数的数量，并且`argv`是一个低级指针，指向可能的多个字符串指针中的第一个。这个名字`argv`以各种形式存在。

命令行参数在开发人员中非常流行，尽管它们通常不像您想象的那样使用。未命名的参数更难处理。这就是为什么存在类似的东西`optparse`来帮助处理它们的原因。

[这是OptionParser 文档中](http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html)的一个示例：

```
require 'optparse'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: example.rb [options]"

  opts.on("-v", "--[no-]verbose", "Run verbosely") do |v|
    options[:verbose] = v
  end
end.parse!

p options
p ARGV 
```

这允许您定义更多可用的命令行参数，然后使用它们。对于您的示例，我希望它能够像这样工作：

```
test_script --live "New York" --computer "Lenovo" --like 
```

这使得参数是什么很明显，因为它们被命名了。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-11T15:09:04.013

考虑一些 Ruby 命令行实用程序，例如`rails`、`rake`、`gem`或`bundle`。虽然这些都不是最终用户应用程序（如 Web 应用程序或 GUI 应用程序），但它们仍然是用户与之交互的用 Ruby 编写的程序。他们都接受论点：

```
$ rails new my_app
$ rake tests
$ gem install rails --no-rdoc --no-ri
$ bundle update 
```

可以`ARGV`用来实现这些接受参数的命令行程序。虽然我们经常为此目的使用[OptionParser 标准库](http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html)或其他一些工具，但 ARGV 是构建这些工具的底层集合。

因此，如果您曾经运行过`gem`、`rails`、`rake`或`bundle`，或任何用 Ruby 编写的命令行开发工具，您将受益于`ARGV`!

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-12T18:01:45.440

关键`ARGV`是它使脚本能够在没有人工输入的情况下运行，并且还允许输入可能从一个迭代到下一个迭代变化的情况。

例如，您可能正在运行三个不同的脚本来获取三个值。然后可以将这些值传递到此脚本中，`ARGV`并可用于获取这些选项的值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-18T16:38:48.023

我曾经运行一个脚本，要求我输入电子邮件和密码。它用于登录 100 个帐户之一。像大多数 Ruby 脚本一样，我会从命令行运行它。这必须类似于一个“可执行文件”，尤其是不是一个带有您单击的图标的文件。

我会运行该程序，它会询问我电子邮件和密码，然后使用 Watir 登录。

```
puts "Email of Account"
account_email = gets.chomp

puts "Enter Password"
password = gets.chomp

# code that logs me in 
```

但是，我发现通过 ARGV 获取这些值对我来说要快得多。

```
account_email, password = ARGV
# code that logs me in 
```

然后我可以输入

```
$ ruby my_script.rb my.email@emailplace.com mypassword 
```

然后按回车。我也可以按控制台中的向上箭头一次又一次地运行它，或者使用不同名称和密码的最新版本来快速测试我的脚本。

更进一步，我制作了一个 shell 脚本，可以运行这些脚本、args 以及所有这些脚本的多种组合

```
ruby my_script.rb oneofmy@emails.com mypassword
ruby my_script.rb another@emails.com otherpassword 
```

最后，有时我需要在每次运行脚本时设置几十个设置，然后多次运行该脚本。所以我也可以很容易地从命令行将几十个变量插入到脚本中

```
ruby my_script.rb option1 option2 option3 option4 
```

我对使用 ARGV 非常陌生，并希望学习更好的使用方法，但这是我发现非常有用的一个功能。

# php - 用于测试网站的 MySQL

> ID：13329134
> 
> 赞同：0
> 
> 时间：2012-11-11T06:36:43.363
> 
> 标签：php, mysql, sql, apache

我正在制作一个类似于 Moodle 的网站。它基本上为学生举办考试。当允许在测试中出现多种类型的问题以及如何创建表格来存储数据时，就会出现混乱。

test_info**表**将包含测试 ID 和描述。**测试**表将包含测试 ID 和问题 ID 对。要获得测试问题，这将需要“SELECT * FROM test WHERE testID=$tID”，当数据库变大时，这将花费大量时间来执行。

最初的**问题**表包含问题、4 种可能性和答案。

我应该如何将多个问题和多种类型问题的数据存储在数据库中？

例如：

测试 51 - “数学入门”

问题1：什么是2+2？A：4 B：12 C：7 D：8

问题 2：(0,103) 是方程 y=2x/(100x) 的范围吗？真假

*这导致具有 2 种不同大小的数据*

问题：

| 问题 | 一个 | 乙| C | D | 正确 |

| 问题 | 正确 |

如果我将这些存储在 1 个表中，每个问题将浪费 4 个 50Char Var-Chars，如果我将这些存储在 2 个单独的表中，SELECT 将如何知道从哪个表中选择？

**问题**：| 测试ID | 表ID | 问题ID |

**问题1：** | 问题 | 一个 | 乙| C | D | 正确 |

**问题2：** | 问题 | 一个 | 乙| C | D | 正确 |

什么样的恶梦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:55:39.963

我认为您的数据结构将是这样的：

```
Table1 :Test

id:
TestName:

Table2: Questions:

id:
test_id:
Question:
Answer: //say a,b,c,d

Table3:Answers

id:
question_id:
Anwser Option: //say a,b,c,d
Answer: 
```

Sql 对于有数据的表：数据将帮助您理解结构。

```
CREATE TABLE IF NOT EXISTS `Tests` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `Test` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

--
-- Dumping data for table `test2`
--

INSERT INTO `test2` (`id`, `Test`) VALUES
(1, 'Test1');

//////////////////////////////////////

CREATE TABLE IF NOT EXISTS `questions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `test_id` int(11) NOT NULL,
  `Question` varchar(255) NOT NULL,
  `Answer` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `questions`
--

INSERT INTO `questions` (`id`, `test_id`, `Question`, `Answer`) VALUES
(1, 1, 'question1', 'a'),
(2, 2, 'Question2', 'd');

////////////////////////////////////////////////////

CREATE TABLE IF NOT EXISTS `answers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `question_id` int(11) NOT NULL,
  `answer_option` varchar(10) NOT NULL,
  `Answer` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

--
-- Dumping data for table `answers`
--

INSERT INTO `answers` (`id`, `question_id`, `answer_option`, `Answer`) VALUES
(1, 1, 'a', 'True'),
(2, 1, 'b', 'False'),
(3, 2, 'a', 'Asnwer1'),
(4, 2, 'b', 'Answer2'),
(5, 2, 'c', 'Answer3'),
(6, 2, 'd', 'Answer4'),
(7, 2, 'e', 'Answer5'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T06:57:50.403

一个空`VARCHAR(50)`文件只需要六位，这意味着它（很可能）只占用磁盘上的一个字节。`VAR`in`VARCHAR`表示空间使用将适应实际数据。这意味着使用一个表只会“浪费”每个问题四个字节。

由于您在代码中以两种不同的方式处理两种类型的问题，因此您的双表方法也是可行的。

推荐的方法是：

请注意，四答题和是非题都是多项选择题的特例。将这些存储在数据库中。一种可能的模式：

```
question: question_id (PK), test_id (FK), text
answer: answer_id (PK), question_id (FK), text, is_correct 
```

PK = 主键，FK = 外键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T06:51:33.680

把答案放在他们自己的桌子上：

```
answers (answer_id, question_id, description, sequence) 
```

并将正确的 answer_id 放入问题表中。

# java - 将 rich:pickList 绑定到 Set

> ID：13329138
> 
> 赞同：0
> 
> 时间：2012-11-11T06:38:53.563
> 
> 标签：java, jsf, richfaces

我需要有关使用`rich:pickList`绑定到集合而不是列表的帮助。假设我正在使用这种结构（取自另一个[问题](https://stackoverflow.com/questions/839893/how-to-populate-the-right-side-of-a-richfaces-picklist)）`rich:pickList`：

```
<rich:pickList value="#{bean.chosenRoles}">
    <f:selectItems value="#{bean.allRoles}" />
</rich:pickList> 
```

作为`bean.chosenRoles`一个`Set<T>`和`bean.allRoles`一个`DataModel<T>`。

我尝试`util.convertSetToList(Set<T>`从 Set to List 添加一个我在显示数据时使用的转换器 ()：

```
<rich:pickList value="#{util.convertSetToList(bean.chosenRoles)}">
    <f:selectItems value="#{bean.allRoles}" />
</rich:pickList> 
```

但后来我得到一个 NullPointerException。

```
Grave: java.lang.NullPointerException
    at org.richfaces.renderkit.SelectManyHelper.getConvertedValue(SelectManyHelper.java:270)
    at org.richfaces.renderkit.SelectManyRendererBase.getConvertedValue(SelectManyRendererBase.java:108)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at org.richfaces.component.AbstractTogglePanel.processValidators(AbstractTogglePanel.java:265)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIForm.processValidators(UIForm.java:253)
    at org.richfaces.context.PartialViewExecuteVisitCallback.visit(PartialViewExecuteVisitCallback.java:55)
    at org.richfaces.context.BaseExtendedVisitContext.invokeVisitCallback(BaseExtendedVisitContext.java:321)
    at javax.faces.component.UIForm.visitTree(UIForm.java:354)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at org.richfaces.context.ExtendedPartialViewContextImpl.executeComponents(ExtendedPartialViewContextImpl.java:237)
    at org.richfaces.context.ExtendedPartialViewContextImpl.processPartialExecutePhase(ExtendedPartialViewContextImpl.java:217)
    at org.richfaces.context.ExtendedPartialViewContextImpl.processPartial(ExtendedPartialViewContextImpl.java:196)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1170)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.comet.CometEngine.executeServlet(CometEngine.java:459)
    at com.sun.grizzly.comet.CometEngine.handle(CometEngine.java:316)
    at com.sun.grizzly.comet.CometAsyncFilter.doFilter(CometAsyncFilter.java:87)
    at com.sun.grizzly.arp.DefaultAsyncExecutor.invokeFilters(DefaultAsyncExecutor.java:171)
    at com.sun.grizzly.arp.DefaultAsyncExecutor.interrupt(DefaultAsyncExecutor.java:143)
    at com.sun.grizzly.arp.AsyncProcessorTask.doTask(AsyncProcessorTask.java:102)
    at com.sun.grizzly.http.TaskBase.run(TaskBase.java:193)
    at com.sun.grizzly.http.TaskBase.execute(TaskBase.java:175)
    at com.sun.grizzly.arp.DefaultAsyncHandler.handle(DefaultAsyncHandler.java:145)
    at com.sun.grizzly.arp.AsyncProtocolFilter.execute(AsyncProtocolFilter.java:210)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:29:55.227

不确定您的`util.convertSetToList`，但尝试在集合填充后立即将设置`Set`为 a并直接从 xhtml访问`List``List`

另请阅读**BalusC的此答案** [Displaying objects from a Set collection in Datatable JSF does not work](https://stackoverflow.com/a/7712593/617373) (wait for JSF 2.2)

# xcode - xcode管理器下载按钮di

> ID：13329139
> 
> 赞同：0
> 
> 时间：2012-11-11T06:38:57.027
> 
> 标签：xcode, download, organizer

我正在尝试使用 Ad Hoc Provisioning Profile 将 ios (5.1) 应用程序的数据文件从 iphone 复制到 MacBook。XCode 4.4.1 用于 MacBook。连接 iphone 后，在 Organizer、Devices 下，检测到连接的 iPhone 和应用程序。However, when the app is selected, no files are displayed in the 'Data Files in Sandbox' section and the Download button is disabled.

可能的原因是什么？使用的 MacBook 不是开发人员的机器。这种方法可以用来将应用程序数据文件复制到任何安装了 XCode（但没有源代码）的 MacBook 上吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:44:22.923

您不能使用 Xcode Organizer 将文件从 iPhone 复制到非开发人员机器上。Organizer 仅显示在 Xcode 中可用的有效配置文件的应用程序。

但是，如果您连接设备，选择它并转到“应用程序”选项卡的底部，则可以使用 iTunes 进行操作。在那里您可以看到所有支持文件共享的应用程序。如果您选择其中一个应用程序，您可以查看并下载 Documents 目录的内容。

要为您的应用启用文件共享，您必须添加密钥

```
UIFileSharingEnabled (Application supports iTunes file sharing) 
```

到 Info.plist 并将布尔值设置为 YES。

# android - 如何在 Android 上使用 Adob e Reader 为 PDF 添加书签

> ID：13329145
> 
> 赞同：-1
> 
> 时间：2012-11-11T06:39:39.063
> 
> 标签：android, pdf

我知道已提出相关问题，但似乎尚未回答此问题。

是否可以使用适用于 Android 的 Adob​​e Reader SDK“添加书签”？我查看了 Google Play 上现有的 PDF 应用程序，似乎没有一个明显的功能可以“添加书签”到 PDF，所以有可能吗？（将不胜感激提供代码片段而不是“查看此 URL”的答案）。

[https://www.adobe.com/devnet/readermobile.htm](https://www.adobe.com/devnet/readermobile.htm)上的信息 似乎对解释如何处理没有帮助。这个 API 的 *文档*在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:45:45.143

这可能不是你想听到的答案，但是……你不能。Adobe Reader for Android 不提供超出意图过滤器的 API，因此它所能做的就是显示 PDF。

也就是说，有一些开源（和 GPL）解决方案允许您为文档添加书签——然后将这些书签存储在本地。

# php - 遇到错误无法加载请求的类：身份验证

> ID：13329146
> 
> 赞同：1
> 
> 时间：2012-11-11T06:40:07.587
> 
> 标签：php, codeigniter, continuous-integration, xampp, localhost

我正在本地主机上处理我的应用程序，在尝试将我的 IDE（Expression 4 到 Eclipse）切换但没有成功后，我转到我的索引页面并收到此错误

遇到错误无法加载请求的类：身份验证

这个问题刚刚弹出，我不知道如何解决它。我尝试更改文件的用户权限，以便所有用户都可以访问，但仍然准确。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T20:41:51.227

我解决了这个问题。

在我主页上的函数构造中，我正在加载身份验证，但是具有身份验证的文件夹已被删除，因此我的页面因此而崩溃。

**前**

函数 __construct() {

```
 parent::__construct();

    // Load the necessary stuff...
    $this->load->helper(array('language', 'url', 'form', 'account/ssl'));
    $this->load->library(array('account/authentication'));
    $this->load->model(array('account/account_model'));
    $this->lang->load(array('general'));
} 
```

**后**

函数 __construct() {

父::__construct();

```
 // Load the necessary stuff...
    $this->load->helper(array('language', 'url', 'form'));

    $this->lang->load(array('general'));
} 
```

我希望这可以帮助别人

# matplotlib - 在调整 matlotlib 大小时自动更改视图边界

> ID：13329151
> 
> 赞同：7
> 
> 时间：2012-11-11T06:41:17.403
> 
> 标签：matplotlib

是否可以设置绘图以在展开时显示更多数据？

Matplotlib 在调整大小时绘制比例。要显示可以使用的特定区域`set_xlim`在轴上我有一个显示实时数据的类似 ecg 的图，它的 y 限制是预定义的，但是如果我扩大窗口或只有大显示器，我想沿着 x 看到更多数据。

我在 pyside 应用程序中使用它，我可以在调整大小时更改 xlim，但我想要更干净和通用的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T14:23:33.623

一种方法是为`resize_event`. 这是一个如何做到这一点的简短示例。您可以根据需要对其进行修改：

```
import numpy as np
import matplotlib.pyplot as plt

def onresize(event):
    width = event.width
    scale_factor = 100.
    data_range = width/scale_factor
    start, end = plt.xlim()
    new_end = start+data_range
    plt.xlim((start, new_end))

if __name__ == "__main__":

    fig = plt.figure()
    ax = fig.add_subplot(111)
    t = np.arange(100)
    y = np.random.rand(100)
    ax.plot(t,y)
    plt.xlim((0, 10))
    cid = fig.canvas.mpl_connect('resize_event', onresize)
    plt.show() 
```

# mysql - 添加两个表的计数然后分组

> ID：13329152
> 
> 赞同：0
> 
> 时间：2012-11-11T06:41:21.903
> 
> 标签：mysql

我有两个查询（返回正确的结果），我基本上想组合计数然后分组：

```
Select profileID, 
Count(*) as numTotal from replies
GROUP BY profileID; 
```

结果：

```
profileID: 1,2,3   
numTotal: 10,1,1 
```

和

```
Select postedByID,
Count(*) as numTotal from WIRL_01.posts 
Group by postedByID 
```

结果：

```
postedByID: 1,2,3 
numTotal: 13,4,3 
```

在这种情况下，我想将 profileID = postedByID 分组。我尝试了以下但无济于事：

```
Select profileID,
Count(*) as numTotal 
from replies
INNER JOIN posts ON replies.profileID = posts.postedByID
Group by profileID 
```

结果：

```
postedByID: 1,2,3 
numTotal: 130,4,3 
```

任何指导将不胜感激。

编辑：

这个查询让我更接近一点，但是如何按 profileID 对结果进行分组？

```
Select profileID, Count(*) from WIRL_01.replies Group by profileID
UNION ALL
Select postedByID, Count(*) from WIRL_01.posts Group by postedByID 
```

给我...

profileID：1,2,3,1,2,3 计数（*）：10,1,1,13,4,3

我需要的是：

profileID: 1,2,3 计数(*):23,5,4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:24:33.863

知道了！:)

```
Select profileID, sum(count) as totalNum from (Select profileID, Count(*) as count from  replies Group by profileID
UNION ALL
Select postedByID, Count(*) as count from posts Group by postedByID) as numTotal
group by profileID 
```

非常感谢 Joe Stafanelli：[Selecting Sum of the Count From Tables in a DB](https://stackoverflow.com/questions/6683608/selecting-sum-of-the-count-from-tables-in-a-db)

# ios - ios添加自定义inputView

> ID：13329153
> 
> 赞同：5
> 
> 时间：2012-11-11T06:42:07.673
> 
> 标签：ios, customization, nib, inputview

我被困在 iOS 中一个我似乎无法理解的概念上，无论我读了多少关于它的内容。我正在尝试使用自定义设计覆盖标准的 iOS 数字键盘。当用户触摸 UITextField 时，我希望显示自定义 inputView 而不是标准数字键盘。

我为我的自定义 inputView 创建了一个单独的 .h/.m/.xib ViewController 类，名为“customInputViewController” 现在，它只是一个深色背景和一个按钮，当 UITextField 被触摸时，它会遮挡大约一半的屏幕（类似于数字垫，但它只是看起来不同）。当我单击自定义 inputView 中的一个按钮时，我的实现失败——iOS 引发 EXC_BAD_ACCESS 错误。

这就是我在运行时加载 .xib 文件并将自定义 inputView 附加到 UITextField 对象的方式：

```
UIViewController *v = [[customInputViewController alloc] initWithNibName:@"customInputDesign" bundle:nil];
myTextInput.inputView = v.view; 
```

在自定义 inputView 的 .xib 文件中，我将 File's Owner 设置为“customInputViewController”，并创建了一个 (IBAction) 方法并将其附加到 UIButton。单击该按钮时， (IBAction) 设置为发送 NSLog(@"Button Clicked") 消息。没什么特别的。这只是一个简单的样板实现，会继续抛出错误。

也许我这样做完全错了。谁能提供一个简单的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:58:06.153

视图 v.view 被保留，因为 inputView 属性被定义为 (readwrite, retain)。但是，如果您在单击输入按钮之前在某处释放 customInputViewController v，您将遇到崩溃（EXC_BAD_ACCESS）

您可以在主控制器中尝试此操作：

```
- (IBAction) keyboardButtonClicked
{
    NSLog(@"keyboard Button Clicked");
}

- (void) viewDidLoad
{
    // do your stuff here ...

    UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)]; // add autorelease if you don't use ARC
    v.backgroundColor = [UIColor darkGrayColor];
    UIButton *b = [UIButton buttonWithType:UIButtonTypeCustom];
    [b setTitle:@"Test button" forState:UIControlStateNormal];
    [b addTarget:self action:@selector(keyboardButtonClicked) forControlEvents:UIControlEventTouchUpInside];
    b.frame = CGRectMake(80, 25, 160, 50);
    [v addSubview:b];
    myTextInput.inputView = v;
} 
```

应该可以正常工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:00:47.610

首先，看看[这个](http://blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/)

> UIKit 框架包括对自定义输入视图和输入附件视图的支持。当用户在视图中编辑文本或其他形式的数据时，您的应用程序可以用自己的输入视图代替系统键盘。例如，应用程序可以使用自定义输入视图来输入符文字母表中的字符。您还可以将输入附件视图附加到系统键盘或自定义输入视图；这个附属视图沿着主输入视图的顶部运行，并且可以包含例如以某种方式影响文本的控件或显示有关文本的某些信息的标签。
> 
> 如果您的应用程序使用 UITextView 和 UITextField 对象进行文本编辑，要获得此功能，只需将自定义视图分配给 inputView 和 inputAccessoryView 属性。当文本对象成为第一响应者时，会显示这些自定义视图...

实际上，我不需要向您提及所有这些混乱，但是提及这一点有一个有趣的原因，从第一句话开始，我就提到了 view-view-view，但是您是在单独的视图控制器中制作输入视图，并且您正在尝试将其分配为文本字段的输入视图，而 init 不应该创建视图， loadView 会这样做。当 view 为 nil 时调用 view getter (v.view) 将导致 loadView 被调用。这就是它与 EXC_BAD_ACCESS 崩溃的原因。

来源：[iOS 的文本、Web 和编辑编程指南](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html)

# variables - := 左侧没有新变量

> ID：13329154
> 
> 赞同：124
> 
> 时间：2012-11-11T06:42:08.373
> 
> 标签：variables, go, colon-equals

这里发生了什么事？

```
package main

import "fmt"

func main() {

    myArray  :=[...]int{12,14,26}  ;     
    fmt.Println(myArray)

    myArray  :=[...]int{11,12,14} //error pointing on this line 

    fmt.Println(myArray) ;

} 
```

它抛出一个错误，说

```
no new variables on left side of := 
```

我正在做的是将值重新分配给已经声明的变量。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-11-11T06:48:11.143

`colon :`当您为现有变量分配新值时，请从第二条语句中删除。

```
myArray = [...]int{11,12,14} 
```

`colon :`在您第一次执行简短声明和赋值时使用，就像您在第一个语句中所做的那样，即`myArray :=[...]int{12,14,26}`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-11T07:24:27.630

`:=`go和中有两种类型的赋值运算符`=`。它们在语义上是等价的（就赋值而言），但第一个也是“短变量声明”（[http://golang.org/ref/spec#Short_variable_declarations](http://golang.org/ref/spec#Short_variable_declarations)），这意味着在左边我们至少需要一个新的变量声明是正确的。

您可以将第二个更改为简单的赋值语句`:=`->`=`或者如果您的算法没问题，您可以使用新变量。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-06-13T05:30:45.820

作为旁注，**重新声明只能出现在多变量短声明中**

引用语言规范：

> 与常规变量声明不同，短变量声明可以重新声明变量，前提是它们最初是在同一块中以相同类型声明的，并且至少有一个非空白变量是新的。因此，重新声明只能出现在多变量短声明中。重新声明不引入新变量；它只是为原始值分配一个新值。

```
package main

import "fmt"

func main() {
    a, b := 1, 2
    c, b := 3, 4

    fmt.Println(a, b, c)
} 
```

这是关于在 golang 中重新声明变量的一个很好的例子： [https ://stackoverflow.com/a/27919847/4418897](https://stackoverflow.com/a/27919847/4418897)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-13T00:48:36.043

```
myArray  :=[...]int{12,14,26} 
```

正如前面的评论者所说， **`:=`**是一种速记和/或变量**声明**的缩写形式。

因此，在上面的陈述中，您正在做两件事。

1.  您将变量**声明**为**myArray**。
2.  您正在**将**一个整数数组分配给**myArray**变量。

你的代码的第二部分失败了，因为你在这里做什么：

```
myArray  :=[...]int{11,12,14} //error pointing on this line 
```

正在重新声明已包含整数值的**现有变量 myArray。**

这有效：

```
myArray = [...]int{11,12,14} // NO error will be produced by this line 
```

因为，它将整数数组**分配给**现有的（预先声明的/初始化的）变量。

# networking - Traceroute：它可以正确地跟踪从 A 到 B 的路径吗？

> ID：13329155
> 
> 赞同：7
> 
> 时间：2012-11-11T06:42:23.913
> 
> 标签：networking, tcp-ip, icmp

Traceroute 是一个跟踪从 A 到 B 的路径的应用程序。（A 是您的位置，B 是您要跟踪的服务器）。在 Windows 中，您可以键入`tracert`. 主要算法是：

```
send UDP with TTL = 1
Server A1 received, and return ICMP packet to A because TTL is expired.
--> know first machine between. For example A1.

send UDP with TTL = 2
Server A1 received, and send this UDP to server A2.
Server A2 received, and return ICMP packet to A because TTL is expired
--> know second machine between. In this example is A2.

Do it until to B. we can track down: A -> A1 -> A2 -> ... ->B 
```

这个算法能正常工作吗？因为在不同的时间，中间服务器可以向不同的服务器发送消息。例如，第一次，UDP 消息被发送到 A1，但在稍后的时间，它可以发送到另一个服务器，例如 B1。因此，跟踪路由将无法正常工作。

我是不是误会了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T07:43:16.760

从手册页：

> traceroute 跟踪从 IP 网络到给定主机的路由数据包

*因此，如果您试图找到 您的数据包可能采用的**一种****可能***路径，您会在`traceroute`.

现在，由于路由表不会每分钟都在更改，因此您发送的数据包*很可能会*采用与 traceroute 跟踪的相同路径。

另一个不能错过的重要点是 IPv4 标头中的**记录路由选项**。一旦您指定要使用此选项，路径中的每个路由器都会将其 IP 地址添加到标头中的选项中。[你可以在这里](http://www.6test.edu.cn/~lujx/linux_networking/0131777203_ch14lev1sec3.html)阅读更多关于它的信息。问题是目的地了解中间跃点，而不是源。

我看到你在traceroute的描述中漏掉了icmp echo request和reply messages的作用。如果这不是故意的，[请看一下](http://en.wikipedia.org/wiki/Traceroute#Implementation)。

**更新**：您可以通过执行`ping -R`

> ping -R 打开 Echo Request 数据包的路由记录，并在返回的数据包上显示路由缓冲区**（被许多路由器忽略）**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T07:20:23.767

该算法正常工作。实际上，路由可能会由于沿途不同服务器的考虑而改变，例如服务器负载或可用性。假设你想从 A 向 B 发送消息。如果路由不可更改，如果路由上的某个服务器宕机会发生什么？如果无法动态调整路由，则将导致无法将消息传递到此示例中的目的地。这是一个不同的示例：假设您有一台服务器在白天用于一些繁重的计算，但它在夜间处于空闲状态。有可能只允许它在夜间通过流量，因此任何使用它的路由都需要在白天进行更改。

总而言之，我们可以肯定地说，如果没有动态路由，互联网就不可能以现在的形式存在。

**添加：**

`Tracert`从 A 向 B 发送消息。它显示了沿途的跃点。这些跃点构成执行时从 A 到 B 的有效路由。无法保证沿途的 2 个相邻点之间的连接在该跃点完成后仍然有效。唯一可以保证的是，对于每个跃点，当发送的消息`tracert`传递到那里时，它的 2 个端点之间都有一个链接。

# javascript - Javascript执行按钮点击页面事件

> ID：13329158
> 
> 赞同：-3
> 
> 时间：2012-11-11T06:42:59.510
> 
> 标签：javascript

我是 javascript 的新手，我正在尝试看看我想做的事情是否可行。我想获取在浏览器中打开的当前网页，并执行新的 javascript。此页面上有一个计时器，当它增加到特定时间时，我希望它执行一次按钮单击。

这将是正在发生变化的时间，我想添加到 if 语句中：

07:34:04

这个变化的时间会引发一个会导致 javascript 运行的事件吗？我想要一些类似的东西：

如果时间 = 7:35:00 然后单击按钮。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:29:02.220

我想做出贡献.. 我对 javascript 时间格式不太了解，但如果我能查到，我会回帖。任何方式你都可以使用这样的函数：

```
var waiter;
function waitForTimer(extime, fn)
{
  //Here, fn is the function to be executed..
  //While extime is the time at which the function is to be executed..

  waiter = setInterval(function(fn,extime){
     //this function will check every one second..
     if( extime == time )
     {
        fn();
        clearInterval(waiter);
     }
     else
        log("waiting for " + time);
  }, 1000);
} 
```

我希望这有帮助。

# machine-learning - 产品分类？

> ID：13329159
> 
> 赞同：-1
> 
> 时间：2012-11-11T06:43:32.947
> 
> 标签：machine-learning, nlp, product, categorization

汽车制造商和模型有几个数据集。每个都包含数百个数据条目，如下所示：

奔驰 GLK 350 W2

普锐斯插电式混合动力高级丰田

通用别克君威 2012 GS 2.4L

如何仅使用这些文件将上述条目自动划分为制造商（例如 Toyota ）和型号（例如 Prius Plug-in Hybrid Advanced）？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:05:41.060

机器学习 (ML) 通常依赖于允许 ML 逻辑生成和验证基础数据模型的***训练数据。***有了这个模型，它就可以推断出提供给它的新数据的类别（在分类器应用程序中，就像手头的一样）或推断某个变量的值（在回归情况下，就像是，比如说，一个预测特定地区下个月降雨量的机器学习应用程序）。

问题中呈现的情况在几个层面上有点令人费解。
首先，汽车制造商的数量有限且相对较少。因此，很容易手动制作这些制造商的列表，然后简单地使用这个词典从型号中解析出制造商，使用纯字符串解析技术，即这里不需要甚至不需要 ML。（唉，人们将要使用的要求`"...only those files"`似乎排除了这个选项。
其次，人们可以想到一些可用于产生所需分类器的模式或启发式方法（暂时是一个相对较弱的分类器，作为模式/启发式方法来mind ATM 似乎相对不可靠）。此外，这种方法在这个词的普遍理解中也不是一种 ML 方法。

# python - 龙卷风+蟒蛇。等待链式操作完成回调

> ID：13329162
> 
> 赞同：1
> 
> 时间：2012-11-11T06:44:32.943
> 
> 标签：python, asynchronous, callback, tornado

我有一个像这样的简单处理程序：

```
@asynchronous
@gen.engine
def post(self):
    result = functionOne()
    foo = MyObject()
    bar = AnotherObject() 
```

但我希望结果返回，然后执行 foo，然后按顺序执行 bar。我尝试过按照[http://www.tornadoweb.org/documentation/gen.html](http://www.tornadoweb.org/documentation/gen.html)使用嵌套回调，但运气不佳。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T07:52:28.860

您正在使用 gen.engine，但您需要通过调用来调用您的`yield`方法`gen.Task`。

我的一个项目的例子：

```
customer = yield gen.Task( self.paymentService.charge, email, cardUri )
sub = yield gen.Task( self.paymentService.schedule, customer ) 
```

上面将首先完成`charge`部分然后返回结果，然后调用`schedule`并从该调用返回`subscription`对象。

您调用的方法`gen.Task`需要如下所示：

```
def customer( self, email, cardUri, callback=None ): 
```

`callback`要调用的函数在哪里实际返回`gen.Task`.

我将它设置为可以使用或不使用回调，因此我可以更轻松地测试我的方法。这只是一个简单的测试，如果`callback`是`None`或不是，如果不是，`None`那么它会被调用，否则它会正常返回。

[gen.Engine 文档](http://www.tornadoweb.org/documentation/gen.html)

编辑：

好的，为了澄清上面的内容，一个完整的函数`gen.Tasks`如下所示。

```
def delete_customer( customer_id, callback ):
    result = customerService.delete( customer_id )

    callback( result ) 
```

在 a 中使用时，上面`gen.Task`的内容如下所示。

```
@gen.engine
def perform_customer_delete( customer_id )
    result = yield gen.Task( delete_customer, customer_id )
    return result 
```

这意味着`delete_customer`使用参数调用`customer_id`，然后我希望将此函数的结果（返回）提供给`result`. 因此，当`delete_customer`函数完成并将 的 发送到`result`时，将返回该值并将其存储在.`self.customerService.delete``callback``gen.Task``result`

现在，您可以随意使用`result`，在我的示例中它被返回。

对于您的示例，您似乎想要执行以下操作。

```
@asynchronous
@gen.engine
def post(self):
    result = yield gen.Task( functionOne )
    foo = yield gen.Task( MyObject )
    bar = yield gen.Task( AnotherObject ) 
```

这将首先调用`functionOne`然后转到下一个`gen.Task`并执行`MyObject`等等。但是，您必须遵循`callback`在方法中有参数的模式才能`gen.Task`正确使用，否则您将无法返回结果。

这就是我的第二个令人困惑的例子发挥作用的地方。

为了绕过这个要求并允许我的代码在有`gen.Task`和没有的情况下工作，我执行以下操作。

```
def delete_customer( customer_id, callback=None ):
    result = customerService.delete_customer( customer_id )
    if callback:
        callback( result )
    return result 
```

这使我可以在更多情况下使用代码而不会损坏。

# vb.net - 在 vb.net 中以表格对齐方式打印文档中的两个或多个值

> ID：13329164
> 
> 赞同：0
> 
> 时间：2012-11-11T06:44:52.567
> 
> 标签：vb.net

如何在表格对齐的文档中打印两个或多个值

```
Public Class Form1

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    PrintDocument1.PrinterSettings.Copies = 2
    PrintDocument1.Print()

End Sub

Private Sub PrintDocument1_PrintPage(ByVal sender As System.Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs) Handles PrintDocument1.PrintPage
    e.Graphics.DrawString(TextBox1.Text, TextBox1.Font, Brushes.Blue, 100, 100)
    e.Graphics.DrawString(TextBox2.Text, TextBox2.Font, Brushes.Blue, 100, 100)

End Sub

End Class 
```

# php - PHP-将特定get []变量的.php页面加载到特定div中？

> ID：13329172
> 
> 赞同：1
> 
> 时间：2012-11-11T06:45:59.463
> 
> 标签：php, html, get, include

我知道这很容易，但是自从我完成 php 以来已经有很长时间了。

我有两种类型的链接。一个使用`$_get[]`of`p`和其他`g`。喜欢：

```
<a href='?p=pages/page-type-1'>page 1</a>
<a href='?g=pages/page-type-2'>page 2</a> 
```

单击特定链接后，我想通过该`include('')`方法将 .php 页面加载到特定 id 的 div 中。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T06:53:56.013

```
if($_GET['p'] === 'pages/page-type-1') {
  include('page-to-include.php');
} 
```

无论您做什么，都不要将变量从 $_GET 传递给包含。这是极其危险的！您不能信任 $_GET 中提供的数据，因此您总是希望专门对其进行测试并避免将其传递给其他代码，除非您必须这样做。

还要注意使用 === 来强制进行值检查和类型检查。如果您对此不熟悉，请在 PHP.net 上查找 === 运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T07:09:00.883

你说你想加载特定 div id 中的页面，对吗？您可以通过使用 AJAX 来实现这一点。

在你的 .js 文件中这样写。

```
 $.ajax({
     type:POST,
     url:'path/of/your/php/file/for/requesting/data.php',
     success:function(data){
      var get_data = parseJSON(data);

      //Target the specific div you want to display your requested data that returned to you by your php.

        $('#divid').html(get_data.name);

     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T06:59:32.210

这应该有效：

```
<?php
if(isset($_GET['p']) && ($_GET['p'] === pages/page-type-1){
require_once 'some.php';
} 
```

如果您想对 GET 数据做任何事情，请先对其进行清理。永远不要相信您的用户

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T07:35:11.103

抱歉，如果这不是您的问题，但解决方案可能只是对两个页面都使用 1 个 GET 变量，然后使用开关来确定您想要哪个页面：

```
if (isset($_GET["p"]))
{
    switch ($_GET["p"])
    {
        case "pages/page-type-1":
            include("page-type-1.php");
            break;

        case "pages/page-type-2":
            include("page-type-2.php");
            break;

        default:
            include("page-not-found.php");
    }
} 
```

# ios - 使用转换 CIFilters 进行 CATransition

> ID：13329179
> 
> 赞同：7
> 
> 时间：2012-11-11T06:46:43.610
> 
> 标签：ios, ios6, core-animation, core-image

我正在尝试将`CATransition`'`filter`属性与新的 iOS 6 过渡动画（CIBarsSwipeTransition、CICopyMachineTransition 等）一起使用。[`CIFilter`文档](http://developer.apple.com/library/ios/#Documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/uid/TP40004346)说这些在 iOS 6 上可用，并且文档中没有任何内容[`CATransition`说](https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CATransition_class/Introduction/Introduction.html#//apple_ref/occ/instp/CATransition/filter)该`filter`属性不能使用。

但是，我似乎无法让他们工作。我不知道 Apple 是否只是没有提及该功能的不可用，或者我只是缺少一些使它起作用的东西。这是我的设置方式：

```
CIFilter *transitionFilter = [CIFilter filterWithName:@"CIBarsSwipeTransition"];
[transitionFilter setDefaults];

CATransition *transition = [CATransition new];
transition.duration = 0.4f;
transition.filter = transitionFilter;

[self.view.layer addAnimation:transition forKey:kCATransition]; 
```

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:16:59.853

我知道这个问题已经很老了，但我通过这个链接开始工作了

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/CoreImaging/ci_tasks/ci_tasks.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/CoreImaging/ci_tasks/ci_tasks.html)

检查“使用过渡效果”部分中的 11 个步骤，它也适用于 iOS

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T15:02:30.750

我不确定在 iOS 上是否可行。从 CATransition 文档：

> 如果指定，过滤器必须同时支持输入键和`kCIInputImageKey`输出键。`kCIInputTargetImageKey``kCIOutputImageKey`

来自[CIFilter 文档](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html)（常量部分）（强调我的）

> `kCIInputTargetImageKey`
> 
> CIImage 对象的键，它是转换的目标图像。在 OS X v10.5 及更高版本中可用。**在 iOS 中不可用**。

过滤器存在，并且`inputTargetImage`是输入键之一，但即使您自己创建核心图像数据并将其分配给属性（在调试器中正确显示），您仍然无法获得效果。

在 OS X 上创建相同的效果就像您问题中的代码一样简单。我已将此作为雷达 (13281399) 归档。

# matlab - matlab中散点图的替代方法

> ID：13329182
> 
> 赞同：0
> 
> 时间：2012-11-11T06:47:29.443
> 
> 标签：matlab, scatter

我正在绘制`x`,`y`和之间的地图`density`。`x`并且`y`是距离。`scatterplot`除了绘制它还有其他方法吗？我希望密度显示在颜色栏中。我一直在做以下事情：

```
scatter(x(1:end-1), y(1:end-1), 5, g);
colorbar('eastoutside');
caxis([12 max(g)]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:02:01.280

使用`surf(x,y,z)`，其中 x 和 y 是您的距离，z 是密度。

# counter - 在VHDL中进行波形仿真时忽略时钟输入？

> ID：13329184
> 
> 赞同：0
> 
> 时间：2012-11-11T06:47:44.343
> 
> 标签：counter, vhdl

我是硬件描述语言理论和 VHDL 的新手。我需要用 VHDL 设计一个 2421 计数器。我使用 T 触发器构建了一个同步二进制递增计数器，并对其进行了修改，以通过激活预设和有条件地清除来生成最后 2 个所需的计数 8 和 9。当我尝试波形仿真时，时钟输入被忽略。无法弄清楚问题是什么。这是代码：

```
library ieee;  
use ieee.std_logic_1164.all;  
entity count2421 is    
port(clock:in std_logic;qq:buffer std_logic_vector(3 downto 0));  
end count2421;  
architecture arch of count2421 is  
component t_ff is  
port(clock,clear,preset,t:in std_logic;q:buffer std_logic);  
end component;  
signal p1,p2,p,t,u,a,b:std_logic;  
begin  
    t<='1';  
    u<='0';  
    qq(0)<='0';  
    qq(1)<='0';  
    qq(2)<='0';  
    qq(3)<='0';  
    process(clock) begin  
        if(clock'event and clock='0') then  
            p1<=(not qq(3)) and qq(2) and qq(1) and qq(0);  
            p2<=qq(3) and qq(2) and qq(1) and (not qq(0));  
            p<=p1 or p2;  
            a<=qq(3) and qq(2);  
            b<=a and qq(1);  
        end if;  
    end process;  
    stage0:t_ff port map(clock,u,p,t,qq(0));  
    stage1:t_ff port map(clock,u,p,qq(0),qq(1));  
    stage2:t_ff port map(clock,u,p,a,qq(2));  
    stage3:t_ff port map(clock,p1,p2,b,qq(3));  
end arch; 
```

这是T触发器代码：

```
library ieee;  
  use ieee.std_logic_1164.all;  
  entity t_ff is  
    port(clock,clear,preset,t:in std_logic;q:buffer std_logic);  
  end t_ff;  
  architecture arch of t_ff is  
signal temp:std_logic;  
begin  
    temp<=q;  
    process(clock)  
    begin  
        if(clock'event and clock='0') then  
            if(clear='1') then   
                q<='0';  
            elsif(preset='1') then  
                q<='1';  
            elsif(t='1') then  
                q<=not q;  
            end if;  
        end if;  
    end process;  
end arch; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:24:08.863

缓冲端口 qq 有两个驱动程序。在担心其他任何事情之前先解决这个问题。

# azure - 部署到 azure 然后得到 403 - Access Forbidden

> ID：13329190
> 
> 赞同：3
> 
> 时间：2012-11-11T06:48:49.683
> 
> 标签：azure

我正在尝试部署到 Azure（Silverlight 应用程序）；我已经迁移了我的数据库，更新了连接字符串并将我的应用程序发布到了 Azure，但是当我单击服务 URL 时，我得到了这个：

403 - 禁止：访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

知道我需要改变什么吗？

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-03T01:27:49.117

如果包的名称与文件系统中的路径匹配，则 Azure 上的 IIS 将引发 403 Forbidden 错误。

因此，如果您的解决方案中有一个名为的路径，并且您有一个名为 的`/Content/css`包名称，则该名称在您的文件中显示如下。然后你得到那个错误。`bundles.Add(new StyleBundle("~/Content/css").Include( ...``BundleConfig.cs``@Styles.Render("~/Content/css")``_Layout.cshtml`

我通过将包的名称从更改为来解决了这个`/Content/css`问题`/Style/css`

1.  `bundles.Add(new StyleBundle("~/Content/css").Include( ...` 在`BundleConfig.cs`成为`bundles.Add(new StyleBundle("~/Style/css").Include( ...`
2.  `@Styles.Render("~/Content/css")`在你的`_Layout.cshtml`变成`@Styles.Render("~/Style/css")`在你的`_Layout.cshtml`

您可以使用任何您喜欢的名称，没有特定限制。我想您也可以继续重命名解决方案中的文件夹，这应该可以。

注意：捆绑包的名称变成了浏览器可以请求的虚拟目录。如果它类似于物理文件夹结构，那么它将返回**403**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:24:37.133

I needed to use the full path to a page within the application as I hadn't set a default document in my web config e.g

```
 <add value="Pages/Home.aspx"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T08:58:46.627

我在我的 MVC 项目中遇到了同样的错误。经过一番调试，我发现这是因为我删除了 Azure 门户中的所有“默认页面”。

我在门户中添加了一个虚拟的“index.html”记录，然后一切都再次运行良好:)

# php - 在同一主机上的网页上使用多个数据库

> ID：13329194
> 
> 赞同：0
> 
> 时间：2012-11-11T06:49:51.433
> 
> 标签：php, mysql, database-connection

我刚刚引用[**了这个**](https://stackoverflow.com/questions/274892/how-do-you-connect-to-multiple-mysql-databases-on-a-single-webpage)答案，我最喜欢的是第一个解决方案，现在的问题是他已经给出了一个信息`mysql_()`但正在使用`mysqli_()`，所以使用第四个参数为真，我在用户登录时选择数据库，他登录的那一刻他被重定向到相应的页面，但显示连接被主动拒绝。任何想法如何使用 2 个数据库，1 是我的默认引擎数据库，我需要保持它运行我的框架，第二个数据库根据登录的用户运行相应的脚本......

我正在尝试的是这个

```
<?php
    $database_connect = mysqli_connect('localhost', 'root', '', 'engine');
    if(!$database_connect) {
        die ('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());
    }

    if(isset($_SESSION['system_id'])) {
        $system_database = mysqli_connect('localhost', 'root', '', $_SESSION['system_name'], true);
        if(!$system_database) {
            die ('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());
        }
    }
?> 
```

PS我想要一种程序方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:02:56.733

您不需要任何额外的参数，只需这样做

```
<?php
    $database_connect = mysqli_connect('localhost', 'root', '', 'engine');
    if(!$database_connect) {
        die ('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());
    }

    if(isset($_SESSION['system_id'])) {
        $system_database = mysqli_connect('localhost', 'root', '', $_SESSION['system_name']);
        if(!$system_database) {
            die ('Connect Error (' . mysqli_connect_errno() . ') '. mysqli_connect_error());
        }
    }

//Now whatever query you write, just do it like this

$access = mysqli_query($database_connection_var, "/*Query Goes Here*/"); //Will get database name from $database_connection_var

$access2 = mysqli_query($database_connection_var2, "/*Query Goes Here*/"); //Will get database name from $database_connection_var2
?> 
```

# c - 字符串数组访问错误

> ID：13329200
> 
> 赞同：2
> 
> 时间：2012-11-11T06:50:42.787
> 
> 标签：c, arrays, string, memory, allocation

当我首先打印 char** surname 和 char** 时，我得到了一些奇怪的输出。我不确定我是否正确地执行了 malloc，或者我是否正确地执行了其他操作。

输入 -> [names1.txt](http://pastebin.com/K0FKDAdr)

[输出](http://pastebin.com/QuzZVWyq)

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main ()
{
  int size, i;
  char **surname, **first, *middle_init, dummy, str[80];
  FILE *fp_input = fopen("names1.txt", "r");

  fscanf(fp_input, "%d%c", &size, &dummy); // gets size of array from file

  /* dynamic memory allocation */

  middle_init = (char*)malloc(size * sizeof(char));
  surname = (char**)malloc(size * sizeof(char*));
  first = (char**)malloc(size * sizeof(char*));

  for (i = 0; i < size; i++)
  {
    surname[i] = (char*)malloc(17 * sizeof(char));
    first[i] = (char*)malloc(17 * sizeof(char));  
  } // for

  /* reads from file and assigns value to arrays */

  i = 0;
  strcpy(middle_init, "");

  while (fgets(str, 80, fp_input) != NULL)
  { 
    surname[i] = strtok(str, ", \n");
    first[i] = strtok(NULL, ". ");
    strcat(middle_init, strtok(NULL, ". "));
    i++;
  } // while

  /* prints arrays */      

  for (i = 0; i < size; i++)
        printf("%s %s\n", surname[i], first[i]);

  return 0;
} // main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:02:21.177

随便看看代码表明：

*   您必须使用`strcpy()`或主题的变体将找到的字符串复制`strtok()`到姓氏等中。

*   你写它的方式，你扔掉你分配的内存。

*   您会得到重复的输出，因为您正在存储指向用于在`surname`and`first`数组中保存行的字符串的指针。当您进行打印时，该字符串仅包含最后一行。这一点和前一点是第一点的推论。

*   您只需为中间的首字母分配一个字符。然后，您`strcat()`可以将它们视为字符串。我建议将中间名首字母视为字符串，就像其他名称一样。或者，由于您不需要打印它们，您可能决定完全忽略中间的首字母。

*   使用 17 代替`enum { NAME_LENGTH = 17 };`或等效不是一个好主意。

毫无疑问，还有其他问题。

我猜你在学习过程中还没有达到结构。如果您已经介绍了结构，您可能应该使用结构类型来表示完整的名称，并使用单个名称数组而不是并行数组。这也可能会简化内存管理；您将在结构中使用固定大小的数组元素，因此您只需为每个名称进行一次分配。

下面的代码产生输出：

```
Ryan Elizabeth
McIntyre O
Cauble-Chantrenne Kristin
Larson Lois
Thorpe Trinity
Ruiz Pedro 
```

在这段代码中，该`err_exit()`函数非常有价值，因为它将错误报告变成了单行调用，而不是 4 行段落，这意味着您更有可能进行错误检查。它是变长参数列表的基本用法，你可能还不明白，但它非常方便和强大。唯一可以进行错误检查但不是的函数是`fclose()`and `printf()`。如果您正在阅读文件，则检查没有什么好处`fclose()`；如果您正在编写并且`fclose()`失败，您可能已经用完了磁盘空间或类似的东西，并且报告错误可能是合适的。您可以添加`<errno.h>`到标题列表并报告`errno`和`strerror(errno)`如果您想进一步改进错误报告。代码释放分配的内存；[`valgrind`](http://valgrind.org/)给它一个干净的健康账单。

```
#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static void err_exit(const char *fmt, ...);

int main(void)
{
    enum { NAME_SIZE = 25 };
    const char *file = "names1.txt";
    int size, i;
    char **surname, **first, str[80];
    FILE *fp_input = fopen(file, "r");

    if (fp_input == NULL)
        err_exit("Failed to open file %s\n", file);
    if (fgets(str, sizeof(str), fp_input) == 0)
        err_exit("Unexpected EOF on file %s\n", file);
    if (sscanf(str, "%d", &size) != 1)
        err_exit("Did not find integer in line: %s\n", str);
    if (size <= 0 || size > 1000)
        err_exit("Integer %d out of range 1..1000\n", size);

    if ((surname = (char**)malloc(size * sizeof(char*))) == 0 ||
        (first = (char**)malloc(size * sizeof(char*))) == 0)
        err_exit("Memory allocation failure\n");
    for (i = 0; i < size; i++)
    {
        if ((surname[i] = (char*)malloc(NAME_SIZE * sizeof(char))) == 0 ||
            (first[i] = (char*)malloc(NAME_SIZE * sizeof(char))) == 0)
            err_exit("Memory allocation failure\n");
    }

    for (i = 0; i < size && fgets(str, sizeof(str), fp_input) != NULL; i++)
    { 
        char *tok_s = strtok(str, ",. \n");
        char *tok_f = strtok(NULL, ". ");
        if (tok_s == 0 || tok_f == 0)
            err_exit("Failed to read surname and first name from: %s\n", str);
        if (strlen(tok_s) >= NAME_SIZE || strlen(tok_f) >= NAME_SIZE)
            err_exit("Name(s) %s and %s are too long (max %d)\n", tok_s, tok_f, NAME_SIZE-1);
        strcpy(surname[i], tok_s);
        strcpy(first[i], tok_f);
    }
    if (i != size)
        err_exit("Only read %d names\n", i);

    fclose(fp_input);

    /* prints arrays */      
    for (i = 0; i < size; i++)
        printf("%s %s\n", surname[i], first[i]);

    for (i = 0; i < size; i++)
    {
        free(surname[i]);
        free(first[i]);
    }
    free(surname);
    free(first);

    return 0;
}

static void err_exit(const char *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    vfprintf(stderr, fmt, args);
    va_end(args);
    exit(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:15:05.880

这里：

```
surname[i] = (char*)malloc(17 * sizeof(char));
first[i] = (char*)malloc(17 * sizeof(char));  
..
surname[i] = strtok(str, ", \n");
first[i] = strtok(NULL, ". "); 
```

您为它分配内存`surname`并且您`first`不使用该内存，因为您将返回的字符串分配给它，*因为*它指向函数用于解析的静态缓冲区，您可以使用：`strtok`*`strdup`*

 *```
 while (fgets(str, 80, fp_input) != NULL)   { 
    surname[i] = strdup(strtok(str, ", \n"));
    first[i] = strdup(strtok(NULL, ". "));
    middle_init[i] = strtok(NULL, ". ")[0];
    i++;  
  } // while

  /* prints arrays */          
  for (i = 0; i < size; i++)
        printf("%s %s %c\n", surname[i], first[i], middle_init[i]); 
```

`strdup`将分配内存并复制字符串，这样您也可以避免对字符串长度进行硬编码，完成后您应该释放该内存，还要注意这`middile_init`是一个 char 数组，所以我只分配`1`char。*

# plugins - 如何从源代码构建 gstreamer 丑陋的插件

> ID：13329202
> 
> 赞同：1
> 
> 时间：2012-11-11T06:51:18.530
> 
> 标签：plugins, gstreamer

我想在 gstreamer 丑陋的插件中更改一个元素 X 中的一些代码并重建和使用它。

我该怎么做？

我有 gstreamer-0.10 并安装了 gstreamer-ugly 插件。我只想下载 gstreamer0-10 丑陋的插件代码并更改它，并想使用新的 lib 文件。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:31:29.473

不幸的是，gstreamer-ugly 至少依赖于 libgstreamer 和 plugins-base 中的很多东西（如果你使用的是 linux 并且你的发行版像 debian/ubuntu 一样提供 *-dev 包）。

如果您使用的是 debian，则可以在使用 apt-source 查看源代码后使用 dpkg-buildpackage。这里最大的优势是所有构建依赖项都可以轻松安装。

手动方式可能需要您首先构建所有其他 gstreamer 包仔细查看 ./configure 告诉您我正在使用 debian 并且已经构建了 gstreamer+plugins 以将最近的那些反向移植到 ubuntu（虽然我'我不确定我是否以最佳实践方式做到了；））

**/edit**：我将尝试在此处介绍 ubuntu 的基本步骤：

*   将源代码库添加到 apt（选中[ubuntu 软件中心的“软件源”工具中的“源代码”复选框](https://help.ubuntu.com/community/Repositories/Ubuntu#Ubuntu_Software_Tab)
*   `sudo apt-get install dpkg-dev devscripts`
*   `sudo apt-get build-dep gst-plugins-ugly0.10`
*   `apt-get source gst-plugins-ugly0.10`
*   更改为新创建的 gst-plugins-base* 文件夹
*   `dpkg-buildpackage`（并确保它有效）
*   根据您的需要更改来源
*   您可以随时使用 dpkg-buildpackage 重建它（只是看看它是否编译`make`可能会更快）。这会在父文件夹中创建一个 .deb 文件，您可以使用它简单地安装它`dpkg -i`
*   如果这是一个有用的更改，您可能希望与 gstreamer-devs 取得联系；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:42:43.123

在 debian 系统上，运行 apt-get build-dep gstreamer0.10-plugins-ugly 以获取该包的所有构建依赖项。之后，您可以从 git、源代码 tarball 甚至重新构建 debian 包（使用 dkgp-buildpackage）构建包。

# sql - 带有条件的 SQL Server 插入触发器

> ID：13329207
> 
> 赞同：1
> 
> 时间：2012-11-11T06:52:33.520
> 
> 标签：sql, sql-server, triggers, insert

我以前从未尝试过使用触发器。

所以这是我想在检测到插入时触发的查询。

```
UPDATE USER_CHECK_LOGIN
   SET CHECKLOGIN = 2
 WHERE USER_CHECK_LOGIN.USER_KEY IN
       (SELECT e.USER_KEY
          FROM XTREME.game.dbo.CHAR_DATA0 AS e
         INNER JOIN XTREME.gamelogs.dbo.LOG_USING_DEPOT201211 AS p
               ON e.CHAR_KEY = p.CHAR_KEY
         WHERE p.GATENUM = 150
       )
   AND USER_CHECK_LOGIN.CHECKLOGIN = 0
   AND USER_CHECK_LOGIN.USER_KEY!=51; 
```

但问题是我一直在寻找，但找不到使用条件如何工作。

我需要的是在调用的表上完成插入时触发的脚本`LOG_CONNECT201211`，如果该插入包含`gatenum=150`和`kind=21/22/23`

如果 kind 是 21 则运行此查询，如果 22 运行此查询，如果 23 运行此查询。

类似的东西。

```
SELECT *
  FROM LOG_CONNECT201211
 WHERE GATENUM=150
   AND (KIND=21 OR KIND=22 OR KIND=23) 
```

如您所见，表格以 结尾`201211`，这意味着下个月表格将是`201212`，因此我还需要表格自动更改为当前月份表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:09:50.720

为什么需要每个月创建表？最好在表 LOG_CONNECT 列中添加日期时间。因此，可以检查一次触发器创建的当前月份。

```
CREATE TRIGGER dbo.triggerName ON LOG_CONNECT
FOR INSERT
AS
BEGIN
  IF EXISTS (
             SELECT 1
             FROM inserted i
             WHERE GATENUM=150 AND KIND IN (21, 22, 23) AND DATEPART(mm, newColumnDate) = DATEPART(mm, GETDATE())
             )
  BEGIN
    ...your logic
  END 
END 
```

# php - 如果服务器关闭，Codeigniter 备用数据库连接

> ID：13329212
> 
> 赞同：2
> 
> 时间：2012-11-11T06:55:18.920
> 
> 标签：php, codeigniter

我想在 Codeigniter 中使用原始 php 代码进行备用数据库连接，我的原始 php 代码是：

```
$db = mysql_connect('remote_server', 'username', 'password'); if(!$db){ 
 $db = mysql_connect('localhost', 'username', 'password') ; } 
```

如果远程 mysql 服务器由于某种原因关闭，则连接到备份服务器。

有没有人用 CodeIgniter 做过这种事情？如果是这样，您介意分享代码或想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:06:48.297

更新：刚刚想出了一个更好的方法。

假设你在database.php中有2个数据库配置，一个是默认的，另一个是备份的，即

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'temp_test1'; 
//.......
$db['backup']=$db['default'];
$db['backup']['hostname'] = 'localhost1';
$db['backup']['username'] = 'root';
$db['backup']['password'] = '';
$db['backup']['database'] = 'temp_test1'; 
```

现在，将其添加到 database.php 文件的末尾

```
//check to see if you can connect
$conn=@mysql_connect($db['default']['hostname'],$db['default']['username'],$db['default']['password']);
if($conn) //check to see if it's connecting, if it is close this connection
{
    mysql_close($conn);
}
else{ //if it isnt
    $db['default']=$db['backup']; //replace the default credentials with the backup credentials
} 
```

* * *

* * *

* * *

旧帖子：您可以采取很多方法。

您可以通过此 mysql_ping() 检查特定连接是否打开，即

```
$conn=mysql_connect(...);
if(mysql_ping($conn)){...}; 
```

因此您可以使用此方法来决定选择哪个数据库。

对于codeigniter，一种方法（我会说这是一种相当糟糕的方法，但仍然是一种方法）是弄乱系统文件。在 DB_Driver 中，在这部分代码中：

```
 $this->conn_id = ($this->pconnect == FALSE) ? $this->db_connect() : $this->db_pconnect();
    if ( ! $this->conn_id)
            {
                log_message('error', 'Unable to connect to the database');

                if ($this->db_debug)
                {
                    $this->display_error('db_unable_to_connect');
                }
                return FALSE;
            } 
```

是它尝试连接并检查连接是否成功的地方，如果没有则给出错误。

我不确定您如何在 CI 中进行异常处理，但基本上您应该处理异常并连接到不同的数据库。

由于我不知道异常处理，假设我创建了一个 database_backup.php 文件，其中包含配置文件夹主机名、用户名、密码和数据库变量。然后我会把代码改成这个

```
$this->conn_id = ($this->pconnect == FALSE) ? $this->db_connect() : $this->db_pconnect();
if ( ! $this->conn_id) //oops, first connection failed
{
    //no problem, change the credentials of the database to our backup credentials
    $ci=&get_instance();
    $ci->load->config('database_backup');
    $this->username=$ci->config->item('username');
    $this->password=$ci->config->item('password');
    $this->database=$ci->config->item('database');
    $this->hostname=$ci->config->item('hostname');
     //try to connect to database once more
    $this->conn_id = ($this->pconnect == FALSE) ? $this->db_connect() : $this->db_pconnect();

    // No connection resource STILL?nothing we can do now,  throw an error

    if ( ! $this->conn_id)
    {
        log_message('error', 'Unable to connect to the database');

            if ($this->db_debug)
            {
                $this->display_error('db_unable_to_connect');
            }
            return FALSE;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:33:00.240

看一眼`system/database/drivers/mysql/mysql_driver.php`

找到功能`function db_connect()`[或`function db_pconnect()`取决于您使用的功能]

有连接代码：

```
return @mysql_connect($this->hostname, $this->username, $this->password, TRUE); 
```

更改逻辑以满足您的需要。

顺便说一句，`PDO`默认情况下，首选使用驱动程序，codeigniter 使用`mysql_*`其折旧过程开始。

# c# - 将列表视图中选中项目的克隆副本与其他文本框数据/ C# 一起添加到新项目中

> ID：13329215
> 
> 赞同：0
> 
> 时间：2012-11-11T06:55:47.010
> 
> 标签：c#, c#-4.0, c#-3.0, c#-2.0

我正在尝试将 listviewOne 中所有选中项目的克隆副本添加到 listviewTwo。连同其他文本框值到 listviewTwo。但我收到错误..请有人帮助我..

```
private void button4_Click(object sender, EventArgs e)
        {

            foreach (ListViewItem item in listView1.Items)
                if (item.Checked)
                {
        ListViewItem lvi = new ListViewItem();
        lvi.SubItems.Add(textBox1.Text);
        lvi.SubItems.Add(textBox2.Text);
        lvi.SubItems.Add(textBox3.Text);
        lvi.SubItems.Add(textBox4.Text);
        lvi.SubItems.Add(item.Text);
        listView2.Items.Add(lvi);
                }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:07:37.390

此行有错误：

```
lvi.SubItems.Add((ListViewItem)item.Clone()); 
```

您不能将 a 添加`ListViewItem`到 SubItems 集合。您可以添加一个`ListViewSubItem`或添加一个字符串（使用该字符串创建一个新项目）。

在这种情况下，如果您使用`listView1`. 将行更改为：

```
lvi.SubItems.Add(item.Text); 
```

* * *

好的，所以您希望将 listView1 中的所有子项添加到 listView2 的项目中。尝试这个：

```
foreach (ListViewItem item in listView1.Items)
{
    if (item.Checked)
    {
        ListViewItem lvi = new ListViewItem();
        lvi.SubItems.Add(textBox1.Text);
        lvi.SubItems.Add(textBox2.Text);
        lvi.SubItems.Add(textBox3.Text);
        lvi.SubItems.Add(textBox4.Text);
        foreach (ListViewSubItem subItem in item.SubItems)
        {
            lvi.SubItems.Add(subItem);
        }
        listView2.Items.Add(lvi);
    }
} 
```

# php - 如何将 PHP 转换为 XML 输出

> ID：13329222
> 
> 赞同：0
> 
> 时间：2012-11-11T06:56:37.270
> 
> 标签：php, xml

我有一个 php 代码。此代码输出 HTML。我需要修改此代码以输出 XML。关于我将如何去做这件事的任何想法。是否有任何可用的 XML 库可以直接完成这项工作，还是我必须手动创建每个节点。？

我的PHP代码是：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<style>
a {text-decoration:none; color:black;}
</style>
</head>

<body>

<?php

$a=$_POST["title"];
$b=$_POST["name"];

$c="http://www.imdb.com/search/title?title=".urlencode($a)."&title_type=".urlencode($b);
$d=file_get_contents($c);

preg_match_all('/<div id="main">\n(No results.)/', $d,$nore);

preg_match_all('#<img src="(.*)"#Us', $d, $img);//image

preg_match_all('/<a\s*href="\/title\/tt[0-9]*\/">((?:[a-z]*(?:&*[.]*)?\s*-*[a-z]*[0-9]*[^<])+)/i',$d,$tit);  //title 

preg_match_all('/<span\sclass="year_type">\s*\(([\d]*)/',$d,$ye); //movie year working fine

preg_match_all('#<span class="credit">\n    Dir: (.*)\n(?:    With:)?#Us',$d,$dir); //director 

preg_match_all('/<span class="rating-rating"><span class="value">([\w]*.[\w]*)/i',$d,$rat); //rating 

preg_match_all('/<a\shref="(\/title\/tt[0-9]*\/)"\s*[title]+/i',$d,$lin); //link 

for($i=0;$i<5;$i++)
{ 
  if (@$rat[1][$i]=="-")
  $rat[1][$i]="N/A";
}

for($i=0;$i<5;$i++)
{ 
 if(@$dir[1][$i]=="")
 $dir[1][$i]="N/A";
}

if(count($tit[1])>5)
$cnt=5;
else
$cnt=count($tit[1]);

 echo"<center><b>Search Result</b></center>";
echo "<br/>";
echo "<center><b>\"$a\"of type\"$b\":</b></center>";
echo"<br/>";

if(@$nore[1][0]=="No results.")
echo "<center><b>No movies found!</b></center>";
else
{
echo "<center><table border=1><tr><td><center>Image</center></td><td><center>Title</center></td><td><center>Year</center></td><td><center>Director</center></td><td><center>Rating(10)</center></td><td><center>Link to Movie</center></td></tr>";
  for($j=0;$j<$cnt;$j++)
          {
            echo "<tr>";
            echo "<td>".@$img[0][$j+2]."</td>";
            echo "<td><center>".@$tit[1][$j]."</center></td>";
            echo "<td><center>".@$ye[1][$j]."</center></td>";
            echo "<td><center>".@$dir[1][$j]."</center></td>";
            echo "<td><center>".@$rat[1][$j]."</center></td>";
            echo '<td><center><a style="text-decoration:underline; color:blue;" href="http://www.imdb.com'.@$lin[1][$j].'">Details</a></center></td>';
            echo "</tr>";
          }

echo "</table></center>";
}               

?>

</body>
</html> 
```

预期的 XML 输出：

```
<result cover="http://ia.mediaimdb.com/images      
/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_
CR0,0,54,74_.jpg" title="The Amazing Spider-Man(2012)"year="2012"
director="Marc Webb" rating="7.5"
details="http://www.imdb.com/title/tt0948470"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BMzk3MTE5MDU5NV5BMl5BanBnXkFtZTYwMjY3NTY3._V1._SX54_CR0,
0,54,74_.jpg" title="Spider-Man(2002)" year="2002"director="Sam Raimi"
rating="7.3" details="http://www.imdb.com/title/tt0145487"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BODUwMDc5Mzc5M15BMl5BanBnXkFtZTcwNDgzOTY0MQ@@._V1._SX54_
CR0,0,54,74_.jpg" title="Spider-Man 3 (2007)" year="2007" director="Sam
Raimi" rating="6.3" details="http://www.imdb.com/title/tt0413300"/>

<result cover="http://i.mediaimdb.
com/images/SF1f0a42ee1aa08d477a576fbbf7562eed/realm/feature.gif" title="
The Amazing Spider-Man 2 (2014)" year="2014" director="Sam Raimi"
rating="6.3" details="http://www.imdb.com/title/tt1872181"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BMjE1ODcyODYxMl5BMl5BanBnXkFtZTcwNjA1NDE3MQ@@._V1._SX54_
CR0,0,54,74_.jpg" title="Spider-Man 2 (2004)" year="2004" director="Sam
Raimi" rating="7.5" details="http://www.imdb.com/title/tt0316654"/>
</results> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:40:06.663

首先，你正在用正则表达式解析你的 html 结果，这是低效的、不必要的，而且......好吧，[你正在回答 cthulhu 的电话](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)！

其次，解析 IMDB HTML 以检索结果虽然有效，但可能是不必要的。有一些简洁的 3rd 方 API 可以为您完成这项工作，例如[http://imdbapi.org](http://imdbapi.org)

如果您不想使用任何第 3 方 API，恕我直言，您应该改为使用 DOM 解析器/操纵器解析 HTML，例如 DOMDocument，这样更安全、更好，同时可以解决您的 HTML 到 XML 的问题。

这是您问的问题（从结果构建 XML 和 HTML）：

```
function resultsToHTML($results)
{
    $doc = new DOMDocumet();
    $table = $doc->createElement('table');

    foreach ($results as $r) {
        $row = $doc->createElement('tr');
        $doc->appendChild($row);
        $title = $doc->createElement('td', $r['title']);
        $row->appendChild($title);
        $year = $doc->createElement('td', $r['year']);
        $row->appendChild($year);
        $rating = $doc->createElement('td', $r['rating']);
        $row->appendChild($rating);

        $imgTD = $doc->createElement('td');

        //Creating a img tag (use only on)
        $img = $doc->createElement('img');
        $img->setAttribute('src', $r['img_src']);
        $imgTD->appendChild($img);
        $row->appendChild($imgTD);

        $imgTD = $doc->createElement('td');

        //Importing directly from the old document
        $fauxDoc = new DOMDocument();
        $fauxDoc->loadXML($r['img']);
        $img = $fauxDoc->getElementsByTagName('img')->index(0);
        $importedImg = $doc->importNode('$img', true);
        $imgTD->appendChild($importedImg);
        $row->appendChild($imgTD);
    }
    return $doc;
} 
```

* * *

```
function resultsToXML($results)
{
    $doc = new DOMDocumet();
    $root = $doc->createElement('results');
    foreach ($results as $r) {
        $element = $root->createElement('result');
        $element->setAttribute('cover', $r['img_src']);
        $element->setAttribute('title', $r['title']);
        $element->setAttribute('year', $r['year']);
        $element->setAttribute('rating', $r['rating']);
        $root->appendChild($element);
    }
    $doc->appendChild($root);
    return $doc;
} 
```

要打印它们，您只需要

```
$xml = resultsToXML($results);
print $xml->saveXML(); 
```

与 html 相同

* * *

根据您的帖子，这是使用 DOMDocument 重构的代码：

```
<?php
//Mock IMDB Link
$a = 'The Amazing Spider-Man';
$b = 'title';
$c = "http://www.imdb.com/search/title?title=".urlencode($a)."&title_type=".urlencode($b);

// HTML might be malformed so we want DOMDocument to be quiet
libxml_use_internal_errors(true);
//Initialize DOMDocument parser
$doc = new DOMDocument();

//Load previously downloaded document
$doc->loadHTMLFile($c);

//initialize array to store results
$results = array();

// get table of results and extract a list of rows
$listOfTables = $doc->getElementsByTagName('table');
$rows = getResultRows($listOfTables);

$i = 0;
//loop through all rows to retrieve information
foreach ($rows as $row) {
    if ($title = getTitle($row)) {
        $results[$i]['title'] = $title;
    }
    if (!is_null($year = getYear($row)) && $year) {
        $results[$i]['year'] = $year;
    }
    if (!is_null($rating = getRating($row)) && $rating) {
        $results[$i]['rating'] = $rating;
    }
    if ($img = getImage($row)) {
        $results[$i]['img'] = $img;
    }
    if ($src = getImageSrc($row)) {
        $results[$i]['img_src'] = $src;
    }
    ++$i;
}

//the first result can be a false positive due to the
// results' table header, so we remove it
if (isset($results[0])) {
    array_shift($results);
} 
```

* * *

**职能**

```
function getResultRows($listOfTables)
{
    foreach ($listOfTables as $table) {
        if ($table->getAttribute('class') === 'results') {
            return $table->getElementsByTagName('tr');
        }
    }
}

function getImageSrc($row)
{
    $img = $row->getElementsByTagName('img')->item(0);
    if (!is_null($img)) {
        return $img->getAttribute('src');
    } else {
        return false;
    }
}

function getImage($row, $doc)
{
    $img = $row->getElementsByTagName('img')->item(0);
    if (!is_null($img)) {
        return $doc->saveHTML($img);
    } else {
        return false;
    }
}

function getTitle($row)
{
    $tdInfo = getTDInfo($row->getElementsByTagName('td'));
    if (!is_null($tdInfo) && !is_null($as = $tdInfo->getElementsByTagName('a'))) {
        return $as->item(0)->nodeValue;
    } else {
        return false;
    }
}

function getYear($row)
{
    $tdInfo = getTDInfo($row->getElementsByTagName('td'));
    if (!is_null($tdInfo) && !is_null($spans = $tdInfo->getElementsByTagName('span'))) {
        foreach ($spans as $span) {
            if ($span->getAttribute('class') === 'year_type') {
                return str_replace(')', '', str_replace('(', '', $span->nodeValue));
            }
        }
    }
}

function getRating($row)
{
    $tdInfo = getTDInfo($row->getElementsByTagName('td'));
    if (!is_null($tdInfo) && !is_null($spans = $tdInfo->getElementsByTagName('span'))) {
        foreach ($spans as $span) {
            if ($span->getAttribute('class') === 'rating-rating') {
                return $span->nodeValue;
            }
        }
    }
}

function getTDInfo($tds)
{
    foreach ($tds as $td) {
        if ($td->getAttribute('class') == 'title') {
            return $td;
        }
    }
} 
```

# html - 在不破坏鼠标悬停功能的情况下扩展 DIV 以填充 TD

> ID：13329225
> 
> 赞同：1
> 
> 时间：2012-11-11T06:57:16.807
> 
> 标签：html, css, html-table, onmouseover

[从这里](https://stackoverflow.com/questions/3874781/how-to-overlay-div-box-on-mouseover/3874872)使用纯 CSS 方法，我正在处理鼠标悬停时的 div 扩展/弹出窗口。它之所以有效，是因为隐藏的 div 是悬停的 div 的子级。

我想让**Description**成为可变高度的一部分，我一直在寻找一种方法来排列**Price** div，以便它们都显示在相同的高度，而 Description 部分根据需要向下扩展（没有指定描述的最小或最大高度）。

以前有很多关于等高 div、关于扩展 div 以填充 td 以及关于将 div 放在 td 底部的问题的回答，但到目前为止，我还没有找到任何方法可以做到这一点，同时保持父级- 悬停工作的子关系。

任何建议将不胜感激。

[jsfiddle在这里](http://jsfiddle.net/danigot/4uYtB/)

```
body {font-family: sans-serif;text-align: center; }
div.special { position:relative; width:160px; background-color:white; border: solid white ;border-width:1px 1px 0px 1px;top:0px; }
div.special div.desc {  width:160px;background-color:white; display:none; border: solid 0px;position:absolute; z-index:100;left:-1px;}
div.special:hover div.desc { display:block;border: solid grey; border-width:0px 1px 1px 1px;box-shadow: 10px 10px 5px #888888;  }
div.special:hover {border: solid grey 1px;border-width:1px 1px 0px 1px; box-shadow: 10px 10px 5px #888888; z-index:100;}
table   {text-align:center;margin:0 auto;}​

<table >
<tr>
<td valign="top" >
    <div class="special">
        <img src="http://cdn1.iconfinder.com/data/icons/socialnetworkspro/128/Google-BUZZ.png">
        <br><b>Description</b><br>
        <div >Price</div>
        <div class="desc">
            Detailed Specs
            <br>Other Info
        </div>
    </div>
</td>
<td valign="top" >
    <div class="special">
        <img src="http://cdn1.iconfinder.com/data/icons/socialnetworkspro/128/Google-BUZZ.png">
        <br><b>Very Long Description</b><br>
        <div >Price</div>
        <div class="desc">
            Detailed Specs
            <br>Other Info
        </div>
    </div>
</td>    
 </tr>
</table>​ 
```

# java - IO文件属性

> ID：13329230
> 
> 赞同：1
> 
> 时间：2012-11-11T06:58:23.813
> 
> 标签：java, file, attributes

```
import java.io.File;
class AttriDemo{

    public static void main(String args[]){
        File f1 = new File("FileIO/file.txt");
        System.out.println("File name           : " + f1.getName());
        System.out.println("File path           : " + f1.getPath());
        System.out.println("File AbsPath        : " + f1.getAbsolutePath());
        System.out.println("File parent         : " + f1.getParent());
        f1.setWritable(true);
        if(f1.canWrite())
        {
            System.out.println("File is Writeable");
        }
        else
        {
            System.out.println("File is not Writeable");
        }
        if(f1.canRead())
        {
            System.out.println("Is readable");
        }
        else
        {
            System.out.println("File is not readable");
        }
    }
} 
```

我的文件是真实可读写的...

然后我尝试将其显式设置为 Writable 但输出仍显示为文件不可写！

输出：

```
....
The file is not writable.
The file is not readable. 
```

* * *

```
File f1 = new File("D:/javaProgs/FileIO/AttriDemo.java"); 
```

这样做有助于解决问题。但有人可以解释一下吗？我的意思是文件在同一个目录中，上面的语句运行得很好。例如 getName() getParent()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:28:31.353

愚弄您的是，无论您指定的路径是否存在，您都可以创建一个 File 对象，并且您可以在该对象上调用所有这些`getParent`函数`getPath`。

您可以出于各种原因创建一个不受真实文件支持的 File 对象，例如检查它是否存在或创建由该对象路径和名称指定的文件。

您可以使用[File.exists()](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29)查看文件是否真的存在于文件系统中。

# jquery - 如何在一个列表的children和childrens children元素里面

> ID：13329232
> 
> 赞同：0
> 
> 时间：2012-11-11T06:58:24.500
> 
> 标签：jquery

使用此 JSFiddle [http://jsfiddle.net/fGTqF/](http://jsfiddle.net/fGTqF/)我如何显示 SALE 子类别下的子类别？例如，在 SALE > BELTS 和 SALE > ACESSORIES 下还有其他类别，但我不知道如何定位它们以显示。下面的代码将显示 SALE 下的子类别，但我也需要它来显示 SALE 子类别的子类别。

```
var $currentCategory = "Sale";
var s = $(".sideCatMenu a").filter(function(){
    return $.trim($(this).text()) === $currentCategory
}).addClass('active').eq(1).next().show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:10:02.190

下面将显示带有文本的锚点之后的所有项目`Sale`。

```
var $currentCategory = "Sale";
var s = $(".sideCatMenu a").filter(function() {
    return $.trim($(this).text()) === $currentCategory;
}).addClass("active").next().show();​​ 
```

您的代码可能无意中出现的错误是文本中没有第二个元素`Sale`（在那种情况下）。请记住，`.eq()`使用从零开始的索引。所以你可能正在寻找的是（如果你真的想限制你的搜索）：

```
var $currentCategory = "Sale";
var s = $(".sideCatMenu a").filter(function() {
    return $.trim($(this).text()) === $currentCategory;
}).addClass("active").eq(0).next().show();​​ 
```

但是，我不明白的一件事是为什么要添加类然后限制数组，因为这样所有匹配选择器和过滤器的元素都会是红色的，但只有其中一个会显示其项目. 如果你想解决这个问题，只需使用：

```
var $currentCategory = "Sale";
var s = $(".sideCatMenu a").filter(function() {
    return $.trim($(this).text()) === $currentCategory;
}).eq(0).addClass("active").next().show();​​ 
```

# microcontroller - 初学者：AVR C++ Atmel Studio 6

> ID：13329236
> 
> 赞同：3
> 
> 时间：2012-11-11T06:59:30.343
> 
> 标签：microcontroller, atmel, atmega

我在确定我可以访问哪些库时遇到问题。我知道我可以使用 Atmel Studio 6 IDE 在 C++ 中对微控制器 (Atmega328p) 进行编程；但是，我无法确定我可以访问哪些库的记录位置。例如，我可以使用 STL（比如，vectors，deques ...）吗？如果有人可以向我指出一些文档，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T04:16:08.600

Atmel Studio 6 不附带 STL 的实现。avr-gcc 自带了一些库——进去看看：

`C:\Program Files (x86)\Atmel\Atmel Toolchain\AVR8 GCC\Native\3.4.2.1002\avr8-gnu-toolchain\avr\include\`

那不包含`<vector>`or `<deques>`，但确实包含`<string>`。不过，有*很多*STL 实现移植到 Atmel Studio：看看：

[http://www.gammon.com.au/forum/?id=11119](http://www.gammon.com.au/forum/?id=11119)

[http://andybrown.me.uk/wk/2011/01/15/the-standard-template-library-stl-for-avr-with-c-streams/](http://andybrown.me.uk/wk/2011/01/15/the-standard-template-library-stl-for-avr-with-c-streams/)

# oracle - 在 Oracle 中控制/限制用户的线程使用？

> ID：13329243
> 
> 赞同：2
> 
> 时间：2012-11-11T07:00:27.230
> 
> 标签：oracle, parallel-processing

是否可以控制或限制用户在 oracle 中的并行线程使用？

可以说，用户`dev`正在执行一个使用`SELECT`32 个并行线程的查询。

`/*NOPARALLEL*/`但是，无论提示或表设计如何，我都希望查询像提示一样在单线程中运行。这应该发生在 DML 事务用户`dev`对数据库所做的任何事情上。

我有什么办法可以做到这一点？我试图寻找一种方法，但无法到达任何地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:56:07.113

我们可以限制用户消耗系统资源的唯一方法是使用配置文件。CREATE PROFILE 选项提供了几个用于限制 CPU 使用的选项 CPU_PER_SESSION 和 CPU_PER_CALL ，但可惜不是 CPU 的数量。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_6010.htm#i2065930)。

我想说的是，在我们想要强加资源限制的那种环境中 - 即一个实时的 - 并行查询的使用应该通过 PARALLEL_AUTOMATIC_TUNING 参数留给数据库，或者由预先的 PARALLEL 提示锁定仅限罐头查询。

# windows - windows系统中是否有始终更新的文件，其中更新包含时间信息？

> ID：13329244
> 
> 赞同：0
> 
> 时间：2012-11-11T07:00:29.917
> 
> 标签：windows, windows-7, licensing

我正在编写一个 30 天试用应用程序，我需要确保用户更改系统时间不会损害我的应用程序，并且仍然会计算 30 天试用，或者至少我能够计算他做错了什么。

我发现的最好方法是检查其内容更新的系统文件，并且每次更新都包含其数据的时间，因此我可以通过相互比较日期来了解用户是否更改日期......

我知道这不是一定的方式，但它有点让它变得更难并缩小谁可以破解它的区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:00:00.890

我发现了关于事件日志

[windows7 日志文件](http://answers.microsoft.com/en-us/windows/forum/windows_7-security/windows-7-log-files/b1ec2721-d7f9-4cb0-8b26-7292b7bf49a2)

它可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T08:18:25.303

提出的任何解决方案都可能被黑客入侵。但听起来你只想抵御随便的海盗，而不是坚定的黑客。

与其信任系统时钟，不如向您自己的网站或时间服务器发出网络请求以获取当前日期和时间？

另一个想法是仅限制应用程序可以启动的次数，而不是将其限制在特定的时间量内。

# ruby-on-rails - 嵌套字段上的客户端验证不生成验证

> ID：13329248
> 
> 赞同：2
> 
> 时间：2012-11-11T07:01:34.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, client-side-validation

我有应用程序轨道并使用带有设计的 client_side_validations gem 来验证设计注册表单

//account.rb

```
has_one :user
validates :username, presence: true, uniqueness: true 
```

//用户.rb

```
 belongs_to :account
 validates :email, presence: true, uniqueness: true 
```

//new.html.erb

```
<%= form_for(@user, :url => registration_path(resource_name), :validate => true) do |f| %>

   <%= f.fields_for :account, :validate => true do |inner_form|%>
      <div  class="field">
          <%= inner_form.label :username, "Username" %><br />
          <%= inner_form.text_field :username %>
      </div>
   <% end %>

   <div class="field">
       <%= f.label :email, "Email" %>
       <%= f.email_field :email %>
   </div>
   <div>
       <%= f.submit "Sign up" %>
   </div>

<% end %> 
```

验证在电子邮件字段中正常工作，但对于用户名不起作用..帮助我，，，谢谢

**更新**--- 验证显示，但这不是嵌套形式

将 :account 更改为 @account

```
<%= f.fields_for :account, :validate => true do |inner_form|%> 
```

至

```
<%= f.fields_for @account, :validate => true do |inner_form|%> 
```

提交时，我得到了预期的错误 Account(#27129348)，得到了 ActiveSupport::HashWithIndifferentAccess(#26695068)

当验证不起作用时，html代码

```
<input id="user_account_attributes_username" name="user[account_attributes][username]" size="30" type="text" data-validate="true"> 
```

验证工作

```
<input id="user_account_username" name="user[account][username]" size="30" type="text" data-validate="true"> 
```

问题

user_account_attributes_username

用户[account_attributes][用户名]

工作过

user_account_username

用户[帐户][用户名]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-07T11:36:35.140

对于当前`DavyJonesLocker/client_side_validations`版本（Rails 4.2），修复嵌套表单只是替换行（在`rails.validations.js`或`.coffee`放置在`validateForm`函数内）：

```
name = name.replace(/\[[\da-z_]+\]\[(\w+)\]$/g, "[][$1]"); 
```

使用一些更好的正则表达式，它将消除字符串中的每一个和`[ids]`。这是一种解决方案：`[new_ids]``name``jeroenj/client_side_validations`

```
name = name.replace(/\[((?:new_)?\d+|[0-9a-f]{24})\]/g, "[]"); 
```

这很好（只要你有健全的属性名称）但可能有一些更好的方法可以做到这一点。如果有人擅长编写 JS 正则表达式，请帮助改进它。我会在完成当前项目后立即尝试，但我绝对不是正则表达式大师。

### 重要的：

在当前`client_side_validations`版本中更重要的是，您必须注释掉`if(...) { }`提到的正则表达式指令。这只是快速修复，`if`在某些时候可能是必要的，但我还没有找到它的任何用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T19:06:14.847

我们发现这个分支解决了这个问题。

我刚刚用这一行更新了我的 Gemfile：

```
gem 'client_side_validations', github: "jeroenj/client_side_validations", :branch => "4-0-deeply-nested-forms" 
```

希望对你有用

# mysql - TokuDB 状态和可靠性

> ID：13329249
> 
> 赞同：0
> 
> 时间：2012-11-11T07:01:36.273
> 
> 标签：mysql, tokudb

我一直在寻找方法来控制我计划很快进入测试版的 webapp 中的 mySQL DB 的潜在大小。数据库有可能变得非常大。在检查了我正在做的事情后，我发现使用文件系统存储某些数据（主要是图像）会对数据库大小产生巨大影响 - 确保我可能永远不必处理突破 TB 上限的数据库，尽管它可能仍然进入100 GB。我最终在寻找问题答案的过程中发现了 TokuDB——“在将其放入数据库之前压缩我的 VARCAHAR 数据是否值得？”。

我为 TokuDB 看到的基准非常令人印象深刻。但是，我也遇到了一些不太令人放心的评论

*   在重复更新上速度很慢。另一位作者反驳了这一点，他声称只需简单地切换到 REPLACE INTO 即可解决问题。
*   它对于备份数据库来说已经足够了，但对于生产目的来说就不够了。

这些评论已经有一年多了，所以我想知道......目前的观点是什么？我想听听任何有使用 TokuDB 经验的人的意见。我可能使用它的表具有很高比例的写访问，并且通常有一个较大的 VARCHAR 列。

# c++ - 从 C++ 注册预关机通知的正确方法

> ID：13329254
> 
> 赞同：4
> 
> 时间：2012-11-11T07:02:21.337
> 
> 标签：c++, winapi, service, notifications, shutdown

我使用 C++ 编写了一个本地服务应用程序，但我找不到正确的方法来注册预关闭通知（对于晚于 Windows XP 的操作系统）。我相信自 Vista 以来已经添加了 SERVICE_CONTROL_PRESHUTDOWN 通知，但是当您调用 SetServiceStatus 时，我们是否需要指定：

```
dwServiceStatus.dwControlsAccepted = SERVICE_ACCEPT_PRESHUTDOWN; 
```

或者

```
dwServiceStatus.dwControlsAccepted = SERVICE_ACCEPT_SHUTDOWN | SERVICE_ACCEPT_PRESHUTDOWN; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T09:38:06.583

如果您的服务编码正确，则您不能同时接受关闭和预关闭。文档明确说明了这一点。

来自[http://msdn.microsoft.com/en-us/library/windows/desktop/ms683241(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683241(v=vs.85).aspx)：

参考`SERVICE_CONTROL_PRESHUTDOWN`：

> 处理此通知的服务会阻止系统关闭*，直到服务停止*或通过 SERVICE_PRESHUTDOWN_INFO 指定的关闭前超时间隔到期。

在同一页面中，关于`SERVICE_CONTROL_SHUTDOWN`添加的部分：

> 请注意，注册 SERVICE_CONTROL_PRESHUTDOWN 通知的服务*无法接收此通知，因为它们已经停止*。

因此，正确的方法是根据您的需要将 设置`dwControlsAccepted`为包含`SERVICE_ACCEPT_SHUTDOWN`或`SERVICE_ACCEPT_PRESHUTDOWN`，但不要同时包含两者。

但请注意，您可能希望接受更多控制。您应该*始终*至少允许`SERVICE_CONTROL_INTERROGATE`，并且几乎肯定允许`SERVICE_CONTROL_STOP`，因为没有后者，服务将无法停止（例如，为了卸载软件）并且必须强制终止进程（即终止*）*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T16:04:05.980

正如上述评论者所指出的，您需要从 SERVICE_ACCEPT_SHUTDOWN 或 SERVICE_ACCEPT_PRESHUTDOWN（Vista 或更高版本）中进行选择。如果您使用的是 SERVICE_ACCEPT_PRESHUTDOWN，您将需要使用[RegisterServiceCtrlHandlerEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685058%28v=vs.85%29.aspx)而不是 RegisterServiceCtrlHandler 向 SCM 注册您的服务，否则您将不会收到预关闭通知。处理程序原型也从 Handler 更改为[HandlerEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683241%28v=vs.85%29.aspx)。

另一点需要注意的是，在 Windows Server 2012（可能是 Windows 8）中处理纯关闭事件的时间限制为 5 秒，在 Windows 7 和 Windows Server 2008 中为 12 秒，在 Windows XP 中为 20 秒，然后您的服务在停止时被终止。这就是您可能需要关机前通知的原因。您可能需要在 \\HKLM\SYSTEM\CurrentControlSet\Control\WaitToKillServiceTimeout 中更改此设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-08T13:33:56.610

在 alexpi 的评论中有一条关键信息。我发现处理 PRESHUTDOWN 的服务需要在 WaitToKillServiceTimeout 过去之前使用新的检查点编号（重复）更新服务状态。我的服务器配置为 5000 毫秒，我的服务仅每 12000 毫秒更新一次，服务器进入 SHUTDOWN 阶段，这导致我尝试停止另一个服务返回正在关闭的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T08:14:06.813

当我从文档中得到它时，这两个通知似乎有所不同。如果您确实需要让您的服务接收关闭前通知，您应该选择：`dwServiceStatus.dwControlsAccepted = SERVICE_ACCEPT_PRESHUTDOWN;`但是如果您还想让您的服务接收关闭通知，您应该选择第二个选项。

# c# - 图片不显示在网页中

> ID：13329255
> 
> 赞同：0
> 
> 时间：2012-11-11T07:02:30.680
> 
> 标签：c#, asp.net, .net, iis

我正在使用 VS 2010 开发 Web 应用程序。我将上传的图像存储在服务器的物理路径中，并在 IIS 7.5 中创建了虚拟路径（下面的屏幕截图）。在授权中，显示一个警告。对于使用 belo 代码，我尝试从服务器检索图像，但是图像不显示。问题在哪里，在虚拟路径中还是在代码中提到的路径中？

![IIS 错误](../Images/42cb0654e7a0e74702b55126c1fe7443.png)

```
 private void CallImage()
    {
     SqlConnection SqlCon = new SqlConnection(GetConnectionString());
     SqlCon.Open();
     string query = "SELECT Cmp_DocPath FROM Company_Info WHERE 
                          Vendor_ID= '" + ddlVendorID.SelectedValue + "'";
     SqlCommand SqlCmd = new SqlCommand(query, SqlCon);
     SqlDataAdapter da = new SqlDataAdapter(SqlCmd);
     DataTable dt = new DataTable();
     da.Fill(dt);
     string ImageName = Convert.ToString(dt.Rows[0][0].ToString());
     Image1.ImageUrl = this.ResolveUrl("D:/Upload/Commerical Certificates/"+ImageName);
    //  Image1.ImageUrl = this.ResolveUrl("D:\\Upload\\Commerical Certificates\\"+ImageName);
    //  Image1.ImageUrl = this.ResolveUrl("~\\Upload\\Commerical Certificates\\"+ImageName);
     SqlCon.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:15:52.937

您使用的用户名可能在服务器上没有读/写权限。进入对应用户的用户设置，开启读写权限。还要检查您是否提供了正确的图像路径。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T08:48:49.080

您不能将物理位置引用到图像并期望它在网站上工作。将图像的路径存储为站点根目录的虚拟路径。例如：

如果您的站点根目录位于：

```
d:\inetpub\mysite\ 
```

您的图片位于：

```
d:\inetpub\mysite\uploads\images\ 
```

那么你在数据库中的虚拟路径需要是：

```
~\uploads\images\image1.jpg
~\uploads\images\image2.jpg 
```

然后您可以将其设置为 ImageUrl 属性，不，您不需要解析它（Image 控件会自动执行此操作）。

我的猜测是您遇到此问题的原因是因为您试图引用不在网站内的图像，即使您通过访问网络服务 IIS_IUSRS 来在开发环境中工作，第二个你把这个应用程序移到生产环境中，你会遇到问题。更不用说在安全性和模块化方面这是一种非常糟糕的做事方式。

# simulator - Udh 始终为 0，并且无法使用 SMPPSim 发送长消息

> ID：13329257
> 
> 赞同：1
> 
> 时间：2012-11-11T07:02:42.090
> 
> 标签：simulator, kannel, smpp

我正在使用 SMPPSim selenium 软件，并且已将其连接到 kannel 4.3，正在使用 SMPPSim 从用户界面使用注入消息发送消息

我注意到，如果我从 SMPPSim 向 kannel 发送长消息，我将不会收到这些长消息，并且 udh=0 总是用于短消息或长消息（多条消息）

据我所知，长消息应该分为多条消息，并且它们的 udh 应该是 0 以外的值

请记住： 1\. 请求的客户端要求我使用 kannel 1.4.3，请求的客户端仍在使用 1.4.3，并且他们有很多基于此版本 kannel 的应用程序，因此升级不在我手中. 2\. SMPPSim selenium 软件中提到它支持多条消息，但我真的不知道，这是在寻找什么！

这是配置

kannel.conf

顺便说一句，我使用 SMPPSim Silenim 用户界面发送

kannel.conf

```
group = core
admin-port = 17000
smsbox-port = 17001
admin-password = Dumb-bugger
log-file = "/var/log/kannel/kannel.log"
log-level = 0
box-deny-ip = "*.*.*.*"
box-allow-ip = "127.0.0.1;192.168.1.*"
admin-deny-ip = "*.*.*.*"
admin-allow-ip = "127.0.0.1;192.168.1.*"
#unified-prefix = "+91,0091,+0091;+,;"
access-log = "/var/log/kannel/access.log"
dlr-storage = mysql

group = smsbox
bearerbox-host = localhost
sendsms-port = 17017
bearerbox-port = 17010
log-level = 0
mo-recode=false

group = sendsms-user
username = test
password = test
user-allow-ip = "127.0.0.1;192.168.1.*"
concatenation = true
max-messages = 10

group = smsc
smsc = smpp
smsc-id = "SMPPSim"
host = localhost
port =2775
receive-port = 2775
system-type = ""
smsc-username = smppclient1    
smsc-password = password
keepalive = 2
interface-version = 34
source-addr-ton = 5
source-addr-npi = 0
source-addr-autodetect = yes
dest-addr-ton = 1
dest-addr-npi = 1
address-range = ""
enquire-link-interval = 60
max-pending-submits = 10
reconnect-delay = 10
priority = 0 
```

smppsim.props

```
# SMPP_PORT specified the port that SMPPSim will listen on for connections from SMPP

# clients. SMPP_CONNECTION_HANDLERS determines the maximum number of client connections

# that can be handled concurrently.

SMPP_PORT=2775

SMPP_CONNECTION_HANDLERS=10

# Specify the classes that imlement connection and protocol handling respectively here.

# Such classes *must* be subclasses of com.seleniumsoftware.SMPPSim.ConnectionHandler and com.seleniumsoftware.SMPPSim.SMPPProtocolHandler respectively

# Or those classes themselves for the default (good) behaviour

# Supply your own subclasses with particular methods overridden if you want to implement

# bad SMSC behaviours to see how your client application copes...

CONNECTION_HANDLER_CLASS=com.seleniumsoftware.SMPPSim.StandardConnectionHandler

PROTOCOL_HANDLER_CLASS=com.seleniumsoftware.SMPPSim.StandardProtocolHandler

# Specify the class that implements the message state life cycle simulation.

# Such classes must extend the default class, LifeCycleManager

LIFE_CYCLE_MANAGER=com.seleniumsoftware.SMPPSim.LifeCycleManager

#

# The Deterministic Lifecycle Manager sets message state according to the first character of the message destination address:

# 1=EXPIRED,2=DELETED,3=UNDELIVERABLE,4=ACCEPTED,5=REJECTED, other=DELIVERED

# LIFE_CYCLE_MANAGER=com.seleniumsoftware.SMPPSim.DeterministicLifeCycleManager

# LifeCycleManager parameters

#

# Check and possibly change the state of messages in the OutboundQueue every n milliseconds

MESSAGE_STATE_CHECK_FREQUENCY=5000

# Maximum time (in milliseconds) in the initial ENROUTE state

MAX_TIME_ENROUTE=10000

# The minimum time to wait before generating a delivery receipt (ms)

DELAY_DELIVERY_RECEIPTS_BY=0

# Percentage of messages that change state each time we check (excluding expiry or messages being completely discarded due to age)

# Requires an integer between 0 and 100

PERCENTAGE_THAT_TRANSITION=75

# State transition percentages. These parameters define the percentage of messages that

# transition from ENROUTE to the specified final state. The list of percentages should

# add up to 100 and must be integer values. SMPPSim will adjust the percentages if they do not.

# Percentage of messages that will transition from ENROUTE to DELIVERED

PERCENTAGE_DELIVERED=90

# Percentage of messages that will transition from ENROUTE to UNDELIVERABLE

PERCENTAGE_UNDELIVERABLE=6

# Percentage of messages that will transition from ENROUTE to ACCEPTED

PERCENTAGE_ACCEPTED=2

# Percentage of messages that will transition from ENROUTE to REJECTED

PERCENTAGE_REJECTED=2

# Time messages held in queue before being discarded, after a final state has been reached (milliseconds)

# For example, after transitioning to DELIVERED (a final state), state info about this message will be

# retained in the queue for a further (e.g.) 60000 milliseconds before being deleted.

DISCARD_FROM_QUEUE_AFTER=60000

# Web Management

HTTP_PORT=88

HTTP_THREADS=1

DOCROOT=www

AUTHORISED_FILES=/css/style.css,/index.htm,/inject_mo.htm,/favicon.ico,/images/logo.gif,/images/dots.gif,/user-guide.htm,/images/homepage.gif,/images/inject_mo.gif

INJECT_MO_PAGE=/inject_mo.htm

# Account details. Comma seperate. SystemID and Password provided in Binds will be validated against these credentials.

SYSTEM_IDS=smppclient1,smppclient2

#SYSTEM_IDS=smppclient

PASSWORDS=password,password

#PASSWORDS=password

OUTBIND_ENABLED=false

#OUTBIND_ENABLED=true

OUTBIND_ESME_IP_ADDRESS=127.0.0.1

OUTBIND_ESME_PORT=2776

#OUTBIND_ESME_PORT=2777

#OUTBIND_ESME_SYSTEMID=smppclient1

OUTBIND_ESME_SYSTEMID=smppclient

OUTBIND_ESME_PASSWORD=password

# MO SERVICE

DELIVERY_MESSAGES_PER_MINUTE=0

DELIVER_MESSAGES_FILE=deliver_messages.csv

# LOOPBACK

LOOPBACK=FALSE

# ESME to ESME routing

ESME_TO_ESME=true

# QUEUES

# Maximum size parameters are expressed as max number of objects the queue can hold

OUTBOUND_QUEUE_MAX_SIZE=1000

INBOUND_QUEUE_MAX_SIZE=1000

# The delayed inbound queue holds DELIVER_SM (MO) messages which could not be delivered to the selected ESME

# because it replied "queue full". Such messages get stored in the delayed inbound queue and delivery is attempted again

# periodically according to the following configuration.

#

# How many seconds to wait between passes through the delayed inbound queue. Recommend this is set to at least one minute.

DELAYED_INBOUND_QUEUE_PROCESSING_PERIOD=60

DELAYED_INBOUND_QUEUE_MAX_ATTEMPTS=100

# LOGGING

# See logging.properties for configuration of the logging system as a whole

#

# Set the following property to true to have each PDU logged in human readable

# format. Uses INFO level logging so the log level must be set accordingly for this

# output to appear.

DECODE_PDUS_IN_LOG=true

# PDU CAPTURE

# The following properties allow binary and/or decoded PDUs to be captured in files

# This is to allow the results of test runs (especially regression testing) to be

# checked with reference to these files

#

# Note that currently you must use the StandardConnectionHandler and StandardProtocolHandler classes for this

# feature to be available.

#

# _SME_ properties concern PDUs sent from the SME application to SMPPSim

# _SMPPSIM_ properties concern PDUs sent from SMPPSim to the SME application

#

CAPTURE_SME_BINARY=false

CAPTURE_SME_BINARY_TO_FILE=sme_binary.capture

CAPTURE_SMPPSIM_BINARY=false

CAPTURE_SMPPSIM_BINARY_TO_FILE=smppsim_binary.capture

CAPTURE_SME_DECODED=false

CAPTURE_SME_DECODED_TO_FILE=sme_decoded.capture

CAPTURE_SMPPSIM_DECODED=false

CAPTURE_SMPPSIM_DECODED_TO_FILE=smppsim_decoded.capture

# Byte Stream Callback

#

# This feature, if enabled, will cause SMPPSim to send PDUs received from the ESME or sent to it

# as byte streams over a couple of connections.

# This is intended to be useful in automated testing scenarios where you need to notify the test application

# with details of what was *actually* received by SMPPSim (or sent by it).

#

# Note that byte streams are prepended by the following fields:

#

# a 4 byte integer which indicates the length of the whole callback message

# a 1 byte indicator of the type of interaction giving rise to the callback,

# - where 0x01 means SMPPSim received a request PDU and

#         0x02 means SMPPSim sent a request PDU (e.g. a DeliverSM)

# a 4 byte fixed length identified, which identifies the SMPPSim instance that sent the bytes

#

# So the length of the SMPP pdu is the callback message length - 9.

#

# LENGTH(4) TYPE(1) ID(4) PDU (LENGTH)

CALLBACK=false

CALLBACK_ID=SIM1

CALLBACK_TARGET_HOST=localhost

CALLBACK_PORT=3333

# MISC

SMSCID=SMPPSim 
```

smppsim 日志

```
2012.11.06 10:19:05 958 INFO    22 00010139:36373731:32303030:38333600:
2012.11.06 10:19:05 958 INFO    22 01013939:30300000:00000000:00000000:
2012.11.06 10:19:05 959 INFO    22 00546865:20756E69:76657273:69747920:
2012.11.06 10:19:05 959 INFO    22 77617320:666F756E:64656420:696E204D:
2012.11.06 10:19:05 959 INFO    22 61726368:20332C20:31383634:20617320:
2012.11.06 10:19:05 959 INFO    22 74686520:436F6C6F:7261646F:2053656D:
2012.11.06 10:19:05 959 INFO    22 696E6172:79206279:204A6F68:6E204576:
2012.11.06 10:19:05 959 INFO    22 616E732C:20746865:20666F72:6D657220:
2012.11.06 10:19:05 959 INFO    22 476F7665:726E6F72:206F6620:436F6C6F:
2012.11.06 10:19:05 959 INFO    22 7261646F:20546572:7269746F:72792C20:
2012.11.06 10:19:05 959 INFO    22 77686F20:68616420:6265656E:20617070:
2012.11.06 10:19:05 960 INFO    22 6F696E74:65642062:79205072:65736964:
2012.11.06 10:19:05 960 INFO    22 656E7420:41627261:68616D20:4C696E63:
2012.11.06 10:19:05 960 INFO    22 6F6C6E2E:204A6F68:6E204576:616E732C:
2012.11.06 10:19:05 960 INFO    22 2077686F:20616C73:6F20666F:756E6465:
2012.11.06 10:19:05 960 INFO    22 64204E6F:72746877:65737465:726E2055:
2012.11.06 10:19:05 960 INFO    22 6E697665:72736974:79207072:696F7220:
2012.11.06 10:19:05 960 INFO    22 746F2066:6F756E64:696E6720:4455202E:
2012.11.06 10:19:05 960 INFO    22 20
2012.11.06 10:19:05 960 INFO    22 cmd_len=0,cmd_id=5,cmd_status=0,seq_no=4,service_type=,source_addr_ton=1
2012.11.06 10:19:05 961 INFO    22 source_addr_npi=1,source_addr=919894198941,dest_addr_ton=1,dest_addr_npi=1
2012.11.06 10:19:05 961 INFO    22 destination_addr=9900,esm_class=0,protocol_ID=0,priority_flag=0
2012.11.06 10:19:05 961 INFO    22 schedule_delivery_time=,validity_period=,registered_delivery_flag=0
2012.11.06 10:19:05 961 INFO    22 replace_if_present_flag=0,data_coding=0,sm_default_msg_id=0,sm_length=256
2012.11.06 10:19:05 961 INFO    22 short_message=The university was founded in March 3
2012.11.06 10:19:05 961 INFO    22  1864 as the Colorado Seminary by John Evans
2012.11.06 10:19:05 961 INFO    22  the former Governor of Colorado Territory
2012.11.06 10:19:05 961 INFO    22  who had been appointed by President Abraham Lincoln. John Evans
2012.11.06 10:19:05 961 INFO    22  who also founded Northwestern University prior to founding DU .
2012.11.06 10:19:05 961 INFO    22  
2012.11.06 10:19:05 961 INFO    22 addressIsServicedByReceiver(9900)
2012.11.06 10:19:05 962 INFO    22 InboundQueue: empty  - waiting
2012.11.06 10:19:05 962 INFO    16 : DELIVER_SM_RESP:
2012.11.06 10:19:05 962 INFO    16 Hex dump (17) bytes:
2012.11.06 10:19:05 962 INFO    16 00000011:80000005:00000000:00000004:
2012.11.06 10:19:05 962 INFO    16 00
2012.11.06 10:19:05 963 INFO    16 cmd_len=17,cmd_id=-2147483643,cmd_status=0,seq_no=4,system_id=
2012.11.06 10:19:05 963 INFO    16 DelayedInboundQueue: now contains 0 object(s)
2012.11.06 10:19:05 963 INFO    16 
```

访问日志

```
2012-11-06 10:19:05 Receive SMS [SMSC:SMPPSim] [SVC:] [ACT:] [BINF:] [FID:] [from:+919894198941] [to:+9900] [flags:-1:0:-1:0:-1] [msg:0:] [udh:0:] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:47:52.523

不幸的是，SMPPSim 不支持长 SMS-MO (deliver_sm)，就像从 Http 接口注入一样简单，它会将 pdu 按原样发送到 kannel（或任何您的 ESME ），您可以通过嗅探 kannel 和 SMPPSim 之间的 smpp 流量来检查.

当你注入一个长的 SMS-MO 时，SMPPSim 将实例化一个新的**com.selenium.SMPPSim.pdu.DeliverSm**对象，然后用你在 http 界面上手动输入的参数填充它，所以如果你输入一个长文本，它会简单无论长度如何，都将其设置为**short_message 。**

当您知道如何使用 sar_total_segments、sar_segment_seqnum 和 sar_msg_ref_num 时，您可以通过该注入 http 接口发送长 SMS-MO，这是一个[很好的简单教程](http://www.ashishpaliwal.com/blog/2009/01/smpp-sending-long-sms-through-smpp/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-06-09T07:06:43.093

我配置了 sar_total_segments、sar_segment_seqnum 和 sar_msg_ref_num，但使用 com.cloudhopper.commons.gsm.GsmUtil.getShortMessageUserDataHeader 时 UDH 为 0。

# slider - 简单的画廊滑块

> ID：13329258
> 
> 赞同：3
> 
> 时间：2012-11-11T07:02:52.127
> 
> 标签：slider

我正在尝试使用 div 和 javascript 创建一个简单的滑块。我设置了一个 div，其中包含六个图像和一个箭头，每次单击时都会将包含图像的容器播放为 528px（每个图像的宽度）。当我到达画廊的开头或结尾时，我希望相应的箭头按钮淡出，这样用户就不会一直按下下一个/上一个。

任何帮助表示赞赏。

**JAVASCRIPT**

```
$("#btn-gallery-next").click(function(){
$("div#gallery li").not(this).removeClass('clicked');
$("div#gallery-slide").animate({left:"-=528px"});
if($("div#gallery-slide").position().left < -3168)
{
    $("#btn-gallery-next").fadeOut();
}
else {
    $("#btn-gallery-next").fadeIn();
}

});

$("#btn-gallery-prev").click(function(){
$("div#gallery li").not(this).removeClass('clicked');
$("div#gallery-slide").animate({left:"+=528px"});
if($("div#gallery-slide").position().left > 0)
{
    $("#btn-gallery-prev").fadeOut();
}
else {
    $("#btn-gallery-prev").fadeIn();
}

}); 
```

**HTML**

```
<div id="gallery-slide">
      <img class="gallery-img" src="_/img/gallery/img1.jpg" alt="" />
      <img class="gallery-img" src="_/img/gallery/img2.jpg" alt="" />
      <img class="gallery-img" src="_/img/gallery/img3.jpg" alt="" />
      <img class="gallery-img" src="_/img/gallery/img4.jpg" alt="" />
      <img class="gallery-img" src="_/img/gallery/img5.jpg" alt="" />
      <img class="gallery-img" src="_/img/gallery/img6.jpg" alt="" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T00:54:24.423

看演示 - **[http://codepen.io/vsync/pen/waKju?editors=011](http://codepen.io/vsync/pen/waKju?editors=011)**

## javascript

```
/**
* Slider - loops over images
* SEP 2014
* By - Yair Even-Or
*/
var Slider = function(elm, prev, next){
    var that = this;
    this.locked = false;
    this.slider = elm;
    this.children = this.slider.children;
    this.itemWidth = this.children[0].clientWidth;

    this.preloadImages();

    next && next.addEventListener('click', function(){ that.move('next') });
    prev && prev.addEventListener('click', function(){ that.move('prev') });
}

Slider.prototype = { 
    move : function(dir){
        var that = this, 
            itemToMove;

        if( this.locked ){ 
            this.locked.removeAttribute('style');
            this.slider.appendChild(this.locked);
            clearTimeout(this.timer);
            moveToEnd();
        }

        // do nothing if there are no items
        if( this.children.length < 2 )
            return false;

        itemToMove = this.children[0];
        this.locked = itemToMove;

        if( dir == 'next' )
            itemToMove.style.marginLeft = -this.itemWidth + 'px';
        else{
            itemToMove = this.children[this.children.length-1];
            itemToMove.style.marginLeft = -this.itemWidth + 'px';
            this.slider.insertBefore(itemToMove, this.children[0]);
            setTimeout(function(){ 
                itemToMove.removeAttribute('style');
            },50);
            this.preloadImages();
            this.locked = false;
        }

        // move the child to the end of the items' list
        if( dir == 'next' )
            this.timer = setTimeout(moveToEnd, 420);

        function moveToEnd(el){
            itemToMove = el || itemToMove;
            if( !itemToMove ) return;
            itemToMove.removeAttribute('style');
            that.slider.appendChild(itemToMove);
            that.locked = false;
            that.preloadImages();
        }
    },
    preloadImages : function(){
      this.lazyload(this.children[1].getElementsByTagName('img')[0] );
      this.lazyload(this.children[this.children.length-1].getElementsByTagName('img')[0] );
    },
    // lazy load image
    lazyload : function(img){
        var lazy = img.getAttribute('data-src');
        if( lazy ){
            img.src = lazy;
            img.removeAttribute('data-src');
        }
    }
}

// HOW TO USE /////////////////
var sliderElm = document.querySelector('.content'),
    next = document.querySelector('.next'),
    prev = document.querySelector('.prev'),
    slider = new Slider(sliderElm, prev, next); 
```

## HTML（JADE 语法）

```
.slider
    a.arrow.next
    a.arrow.prev
    ul.content
        li
            img(src='image1.jpg')
        li
            img(src='image2.jpg')
        li
            img(src='image3.jpg')
        li
            img(src='image4.jpg') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T19:13:17.180

试试woothemes 的[flex 滑块，它可以满足您的所有需求。](http://flexslider.woothemes.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T14:36:14.917

为什么不使用像[Owl Slider](http://owlgraphic.com/owlcarousel/)这样的滑块库？它带有许多选项和配置。集成到任何项目中都非常简单。

*   示例 #1 www.midwestgathering.com/#galleries
*   示例 #2 www.owlgraphic.com/owlcarousel/demos/images.html

另一种选择是[jcarousel](http://sorgalla.com/jcarousel/examples/basic/)。基本滑块显示了一个示例，该示例使左侧的下一步按钮处于非活动状态，直到用户向右滑动，然后一旦用户到达画廊的尽头，右侧的下一步按钮将变为非活动状态：

**JS**

```
(function($) {
$(function() {
    $('.jcarousel').jcarousel();

    $('.jcarousel-control-prev')
        .on('jcarouselcontrol:active', function() {
            $(this).removeClass('inactive');
        })
        .on('jcarouselcontrol:inactive', function() {
            $(this).addClass('inactive');
        })
        .jcarouselControl({
            target: '-=1'
        });

    $('.jcarousel-control-next')
        .on('jcarouselcontrol:active', function() {
            $(this).removeClass('inactive');
        })
        .on('jcarouselcontrol:inactive', function() {
            $(this).addClass('inactive');
        })
        .jcarouselControl({
            target: '+=1'
        });

    $('.jcarousel-pagination')
        .on('jcarouselpagination:active', 'a', function() {
            $(this).addClass('active');
        })
        .on('jcarouselpagination:inactive', 'a', function() {
            $(this).removeClass('active');
        })
        .jcarouselPagination();
});
})(jQuery); 
```

**CSS**

```
.jcarousel-wrapper {
    margin: 20px auto;
    position: relative;
    border: 10px solid #fff;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -webkit-box-shadow: 0 0 2px #999;
    -moz-box-shadow: 0 0 2px #999;
    box-shadow: 0 0 2px #999;
  }

.jcarousel-wrapper .photo-credits {
    position: absolute;
    right: 15px;
    bottom: 0;
    font-size: 13px;
    color: #fff;
    text-shadow: 0 0 1px rgba(0, 0, 0, 0.85);
    opacity: .66;
}

.jcarousel-wrapper .photo-credits a {
    color: #fff;
}

/** Carousel **/

.jcarousel {
    position: relative;
    overflow: hidden;
    width: 600px;
    height: 400px;
}

.jcarousel ul {
    width: 20000em;
    position: relative;
    list-style: none;
    margin: 0;
    padding: 0;
}

.jcarousel li {
    float: left;
}

/** Carousel Controls **/

.jcarousel-control-prev,
.jcarousel-control-next {
    position: absolute;
    top: 200px;
    width: 30px;
    height: 30px;
    text-align: center;
    background: #4E443C;
    color: #fff;
    text-decoration: none;
    text-shadow: 0 0 1px #000;
    font: 24px/27px Arial, sans-serif;
    -webkit-border-radius: 30px;
    -moz-border-radius: 30px;
    border-radius: 30px;
    -webkit-box-shadow: 0 0 2px #999;
    -moz-box-shadow: 0 0 2px #999;
    box-shadow: 0 0 2px #999;
}

.jcarousel-control-prev {
    left: -50px;
}

.jcarousel-control-next {
    right: -50px;
}

.jcarousel-control-prev:hover span,
.jcarousel-control-next:hover span {
    display: block;
}

.jcarousel-control-prev.inactive,
.jcarousel-control-next.inactive {
    opacity: .5;
    cursor: default;
}

/** Carousel Pagination **/

.jcarousel-pagination {
    position: absolute;
    bottom: 0;
    left: 15px;
}

.jcarousel-pagination a {
    text-decoration: none;
    display: inline-block;

    font-size: 11px;
    line-height: 14px;
    min-width: 14px;

    background: #fff;
    color: #4E443C;
    border-radius: 14px;
    padding: 3px;
    text-align: center;

    margin-right: 2px;

    opacity: .75;
}

.jcarousel-pagination a.active {
    background: #4E443C;
    color: #fff;
    opacity: 1;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.75);
} 
```

您可以在 www.sorgalla.com/jcarousel/docs/ 找到 jcarousel 的文档。

# android - android片段：回收位图

> ID：13329260
> 
> 赞同：1
> 
> 时间：2012-11-11T07:03:02.873
> 
> 标签：android, bitmap, fragment, recycle

我正在使用`DialogFragment`兼容性包中的一个。我有一个`Bitmap`对话框关闭时需要回收的，但是当我`findViewByID()`在里面调用`onDestroyView()`它时返回null。我也尝试过保留对视图的引用，`onCreateView()`但在调用时它也为空`onDestroyView()`。

如何`DialogFragment`在片段关闭时回收位图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:22:39.990

onDestroyView() 允许片段清理与其视图关联的资源，尝试在 onDismiss 或其他在 onDestroyView 之前调用的方法中回收位图

# c++ - 用于保存不同值的数据类型 C++

> ID：13329262
> 
> 赞同：0
> 
> 时间：2012-11-11T07:03:12.113
> 
> 标签：c++

我想知道如何在一个函数中加载许多图像并将其分配给一个变量，以便我可以调用它们并保存这些图像的信息。

例如 ：

```
src = tile1.png
x = 10
y = 11 
```

我需要什么样的数据类型？

我的目标是遍历文本文件中的行，加载每个图像及其相关信息，以便预先加载图像并准备好在屏幕上显示。我只是有点坚持如何完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:17:52.790

如果你想推出自己的系统，你可以创建一个抽象基`Image`类。然后为您要处理的每种图像类型（例如`ImageJpeg`，`ImagePng`）创建一个具体的子类。然后，这些具体的子类可以是像[libjpeg](http://libjpeg.sourceforge.net/)或[libpng](http://www.libpng.org/)这样的图像加载库的简单包装器。有一个创建具体对象但返回[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)抽象类的工厂函数。这些可以存储在标准容器中，例如[`std::vector`](http://en.cppreference.com/w/cpp/container/vector).

然而，已经有许多现有的图像库，包括特定的（如上面提到的 libjpeg/libpng）和通用的（如[SDL_Image](http://www.libsdl.org/projects/SDL_image/)或[Boost GIL](http://www.boost.org/doc/libs/1_52_0/libs/gil/doc/index.html)）。其中有些已经有 C++ 类，有些则不需要你自己包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:00:59.413

一个`struct`。

例子：

```
#include <iostream>
#include <string>
using namespace std;

struct a_new_datatype{

    string name;
    int age;
    char gender;

};

int main(){

    a_new_datatype my_own_datatype;

    my_own_datatype.name = "Christopher";
    my_own_datatype.age = 34;
    my_own_datatype.gender = 'M';

    cout << "Name: " << my_own_datatype.name << endl;
    cout << "Age: " << my_own_datatype.age << endl;
    cout << "Gender: " << my_own_datatype.gender << endl;

    return 0;
} 
```

# c# - C# 中的 memberwiseclone - system.object

> ID：13329263
> 
> 赞同：1
> 
> 时间：2012-11-11T07:03:14.547
> 
> 标签：c#, clone

[`MemberwiseClone()`](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone%28v=vs.110%29.aspx)将创建浅拷贝，它将逐位复制值类型，并且只复制引用类型的引用。我们需要创建一个深层副本以拥有引用类型的独立副本。还行吧。我明白了。现在我的问题是：为什么`System.Object`调用 MemberwiseClone() 时变量的反应不同？

例如：

```
Public class Test
{
    public int x;
    public object obj;

    public Test MyClone()
    {
         return (Test) this.MemberwiseClone();
    }
} 
```

现在在我的 Main 方法中访问它：

```
public static void Main()
{
    Test obj1 = new obj1;
     obj1.x = 1;
     obj1.obj = "x";

    Test obj2 = obj1.MyClone();
    obj2.obj = "y" 
} 
```

这不应该改变`obj1.obj`y 的值吗？由于 obj 是一个`System.Object`显然是引用类型的实例。但它不会改变 -`obj1.obj`给出 x 并`obj2.obj`给出 y。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:19:35.573

这是因为你没有改变 field 的状态`obj`。你*分配*它。

```
public static void Main()
{
    Test obj1 = new obj1;
     obj1.x = 1;
     obj1.obj = new List<string> {"x"};

    Test obj2 = obj1.MyClone();
    ((List<string>) obj2.obj).Add("y"); //now it contains {x, y} in obj1 and obj2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-15T15:45:18.200

1.  您的代码包含 3 个语法错误（无法运行）

2.  考虑您的代码：

    公共静态无效 Main() { 测试 obj1 = 新 obj1; obj1.x = 1; obj1.obj = "x";

    ```
     Test obj2 = obj1.MyClone();
     obj2.obj = "y" 
    ```

    }

你的错误想法在这里：

```
obj2.obj = "y" 
```

这不会改变 obj 的值，它会分配一个与非克隆实例无关的不同字符串对象。

这是因为每个字符串都是不可变的对象。不同的字符串会导致堆上的不同对象。

但是，如果您*确实*设法更改了字符串内容本身，那么您将获得预期的效果。

使用不安全模式，您可以这样证明：

```
using System.Diagnostics;

static class Program
{
    static void Main()
    {
        Test obj1 = new Test();
        obj1.x = 1;
        obj1.obj = "abc";

        Test obj2 = obj1.MyClone();

        var obj1Str = obj1.obj as string;

        ReverseString(obj1Str);

        var obj2Str = obj2.obj as string;

        Debug.Print(obj2Str); // "cba"
    }

    static unsafe void ReverseString(string str)
    {
        int i = 0;
        int j = str.Length - 1;

        fixed (char* fstr = str)
            while (i < j)
            {
                char temp = fstr[j];

                fstr[j--] = fstr[i];
                fstr[i++] = temp;
            }
    }
}

public class Test
{
    public int x;
    public object obj;

    public Test MyClone()
    {
        return (Test)MemberwiseClone();
    }
} 
```

# sql - 视图是否仅捕获查询，或者也捕获该查询背后的数据？

> ID：13329266
> 
> 赞同：1
> 
> 时间：2012-11-11T07:03:30.520
> 
> 标签：sql, sql-server, tsql

视图是否仅捕获查询，或者也捕获该查询背后的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T07:09:52.460

视图只是一个存储的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T07:15:36.313

视图只是简单地存储 T-SQL，除非它是索引视图，在这种情况下[，它必须至少具有唯一的聚集索引，因此将以与具有聚集索引的表相同的方式存储](http://msdn.microsoft.com/en-us/library/ms191432.aspx)。

# php - 将选择语句中的mysql编号格式化为php

> ID：13329268
> 
> 赞同：3
> 
> 时间：2012-11-11T07:04:42.217
> 
> 标签：php, mysql, numbers, formatting

我正在使用 mysql 5.1 数据库，其中有一些字段，格式如下所示：

1234567

当我通过 php 输出它们时，我希望它们的格式如下：1,234,567

不涉及小数。

select 语句正在从我的数据库中提取 30 条记录。每条记录都有（2）个我需要格式化的字段。重量和成本以及我需要但不需要格式化的其他 16 个字段。它们正在被读取并输入到表格中。

建议？

注：数据字段：成本权重
表：军舰
当前选择语句：

```
$result = mysql_query('SELECT * FROM `Warships` WHERE `Type` = "BC" ');
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['ID'] . "</td>";
  echo "<td>" . $row['SHIP CLASS'] . "</td>";
  echo "<td>" . $row['CAT'] . "</td>";
  echo "<td>" . $row['Type'] . "</td>";
  echo "<td>" . $row['WEIGHT'] . "</td>";
  echo "<td>" . $row['Cost'] . "</td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:10:56.097

我认为 PHP 的 number_format 是您所需要的。

```
$num = number_format(1234567);
echo $num; // 1,234,567 
```

如果只给出一个参数，数字将被格式化为不带小数，但在每组千位之间使用逗号 (",")。[来自 PHP API 的更多信息](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:09:44.827

您正在寻找[number_format](http://php.net/manual/en/function.number-format.php)函数。将您的号码作为第一个参数传递给它，它将为千位分隔符添加一个逗号。

例子：

```
echo "<td>" . number_format($row['Cost']) . "</td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T07:14:11.323

[数字格式](http://www.php.net/manual/en/function.number-format.php)

```
$num_format = number_format(1234567);
echo $num_format ; // 1,234,567 
```

# python - 字计数器不会打印外来字符

> ID：13329273
> 
> 赞同：0
> 
> 时间：2012-11-11T07:06:16.000
> 
> 标签：python, word-count

如何设置它以打印中文和重音字符？

```
from twill.commands import *
from collections import Counter

with open('names.txt') as inf:
    words = (line.strip() for line in inf)
    freqs = Counter(words)
    print (freqs) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T08:40:57.573

为了正确处理中文字符，我将使用`codecs.open`而不是 plain `open`，并将其传递给文件的正确编码。

例如，如果您有一个包含字符串“aèioሴ ሴ”的文件“unicode.txt”：

```
>>> open('unicode.txt').read()    # has utf-8 BOM
'\xef\xbb\xbfa\xc3\xa8io\xe1\x88\xb4 \xe1\x88\xb4'
>>> codecs.open('unicode.txt').read()    #without encoding is the same as open
'\xef\xbb\xbfa\xc3\xa8io\xe1\x88\xb4 \xe1\x88\xb4'
>>> codecs.open('unicode.txt', encoding='utf-8').read()
u'\ufeffa\xe8io\u1234 \u1234' 
```

对于`Counter`您获得的 s：

```
>>> Counter(open('unicode.txt').read())
Counter({'\xe1': 2, '\x88': 2, '\xb4': 2, 'a': 1, '\xc3': 1, ' ': 1, 'i': 1, '\xa8': 1, '\xef': 1, 'o': 1, '\xbb': 1, '\xbf': 1})
>>> Counter(codecs.open('unicode.txt', encoding='utf-8').read())
Counter({u'\u1234': 2, u'a': 1, u' ': 1, u'i': 1, u'\xe8': 1, u'o': 1, u'\ufeff': 1}) 
```

*如果*对于“我如何设置它以打印中文字符”的意思是`print(freqs)` 应该显示类似的`Counter({'不': 1})`内容，那么这在 python2 中是不可能的，而它是 python3 的默认设置。

在 python2 中`Counter`的`__str__`方法类是`__repr__`字符串的方法，因此你总是会看到类似的东西`\u40ed`而不是真正的字符：

```
>>> Counter(u'不')
Counter({u'\u4e0d': 1})
>>> repr(u'不')
"u'\\u4e0d'" 
```

在python3中，所有字符串都是unicode `repr`，'不'是“'不'”：

```
>>> Counter('不')
Counter({'不': 1})
>>> repr('不')
"'不'" 
```

因此，如果您想要一个适用于 python2 和 python3 的解决方案，您应该创建一个函数`str_counter`，在 python3 中只返回`str`of `Counter`，而在 python2 中它必须迭代键和值对并构建字符串表示本身：

```
>>> def str_counter(counter):
...     if sys.version_info.major > 2:
...         # python3, no need to do anything
...         return str(counter)
...     # python2: we manually create a unicode representation.
...     result = u'{%s}'
...     parts = [u'%s: %s' % (unicode(key), unicode(value)) for key, value in counter.items()]
...     return result % u', '.join(parts)
... 
>>> print str_counter(Counter(u'不'))   # python2
{不: 1} 
```

# firefox - 滚动时使大图像变黑的Firefox错误的解决方法？

> ID：13329274
> 
> 赞同：3
> 
> 时间：2012-11-11T07:06:40.153
> 
> 标签：firefox

此处详细介绍了错误：[https ://bugzilla.mozilla.org/show_bug.cgi?id=774617](https://bugzilla.mozilla.org/show_bug.cgi?id=774617)

在 OS X 上的 Firefox 中，将非常大的图像放入“溢出：滚动”div 会使图像在滚动时完全变黑。同样的错误发生在 Windows 上，但图像变成白色而不是黑色。

有什么解决方法吗？

# .htaccess - htaccess 中的 ModRewrite 将我发送到完整路径

> ID：13329275
> 
> 赞同：0
> 
> 时间：2012-11-11T07:07:09.670
> 
> 标签：.htaccess, mod-rewrite

我有这两个规则：

```
RewriteCond %{HTTP_USER_AGENT} iPhone [NC]
RewriteRule ^categories$ home.php?categories=1[L,NC,PT,R=301]
RewriteRule ^featured$ home.php?featurez=1 [L,NC,PT,R=301] 
```

问题是类别有效而特色无效。作品：

```
 http://apps.com/iphone/categories 
```

不起作用：

```
 http://apps.com/iphone/featured 
```

不起作用的第二条规则将我发送到这里

```
 http://apps.com/var/www/vhosts/apps.com/httpdocs/iphone/home.php?featurez=1 
```

它似乎向我发送了我的目录根目录的根目录，并且整个内容都以我网站的根目录为前缀..为什么？

这怎么可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:47:35.033

1.  重写条件*仅适用于紧随其后的规则*，因此您的条件根本不适用于“特色”规则。你必须复制它。
2.  Apache 尝试猜测规则的目标是 URL 路径还是文件路径，但它猜测不正确。您可以尝试通过包含重写基础或使您的目标成为绝对 URL 路径来修复它。

我已经在[您之前的问题](https://stackoverflow.com/a/13292201/851273)中回答了这个问题，使用这些解决方案中的任何一个都可以修复重定向中出现的文件路径。

```
RewriteBase /iphone/
RewriteCond %{HTTP_USER_AGENT} iPhone [NC]
RewriteRule ^categories$ home.php?categories=1[L,NC,PT,R=301]
RewriteCond %{HTTP_USER_AGENT} iPhone [NC]
RewriteRule ^featured$ home.php?featurez=1 [L,NC,PT,R=301] 
```

或者

```
RewriteCond %{HTTP_USER_AGENT} iPhone [NC]
RewriteRule ^categories$ /iphone/home.php?categories=1[L,NC,PT,R=301]
RewriteCond %{HTTP_USER_AGENT} iPhone [NC]
RewriteRule ^featured$ /iphone/home.php?featurez=1 [L,NC,PT,R=301] 
```

# android - Android UI (Activity) 在 BroadcastReceiver 尝试创建 httpConnection 时挂起

> ID：13329281
> 
> 赞同：0
> 
> 时间：2012-11-11T07:08:15.287
> 
> 标签：android, service, broadcastreceiver, httpurlconnection, freeze

我的 android 应用程序有一个`BroadcastReceiver`. 在开始时，我启动了`Service`一个`AlarmManager`用于每 10 分钟定期调用我的接收器的一个，并且接收器尝试建立一个 http 连接。当接收者试图建立一个 httpConnection 时，有时需要排队`httpConnection.getResponseCode();`或`androidHttpTransport.call(soapAction, envelope);`在这些情况下，android UI（活动）挂起并等待接收者的操作完成。但我认为广播接收器的操作是在一个单独的线程中，它不应该暂停 UI 线程。

为什么会发生这种情况，我该如何纠正？

我在接收器中的 httpconnection：

```
private Object callWebServiceMethodPublic(String url,
            String namespace, String methodName,
            HashMap<String, Object> parameters, String soapAction)
            throws Exception {

        //System.setProperty("http.keepAlive", "false");

        Log.i("WebService", "URL: " + url);
        Log.i("WebService", "MethodName: " + methodName);

        Log.i("SendMapMovements", "1.2.3.1");

        URL myurl = new URL(url);
        URLConnection connection = myurl.openConnection();
        connection.setConnectTimeout(20 * 1000);
        //connection.setRequestProperty("Connection", "close");

        HttpURLConnection httpConnection = (HttpURLConnection) connection;

        Log.i("SendMapMovements", "1.2.3.2");

        int responseCode = -1;
        try {
            responseCode = httpConnection.getResponseCode();

            Log.i("SendMapMovements", "1.2.3.3");

        } catch (Exception e1) {
            if (e1.toString().contains("Network is unreachable")) {

            } else if (e1.toString().contains("SocketTimeoutException")) {

            } else {
                throw e1;
            }
        }
        if (responseCode == HttpURLConnection.HTTP_OK) {
            httpConnection.disconnect();

            Log.i("SendMapMovements", "1.2.3.4");

            SoapObject request = new SoapObject(namespace, methodName);

            if (parameters != null) {
                String[] keys = new String[0];
                keys = (String[]) parameters.keySet().toArray(keys);
                Object[] vals = (Object[]) parameters.values().toArray();

                for (int i = 0; i < parameters.size(); i++) {
                    request.addProperty(keys[i], vals[i]);
                    Log.i("WebService", keys[i] + ": " + vals[i]);
                }
            }

            Log.i("SendMapMovements", "1.2.3.5");

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;

            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(url,
                    TimeOutInSeconds * 1000);

            Log.i("SendMapMovements", "1.2.3.6");

            try {
                androidHttpTransport.call(soapAction, envelope);

                Log.i("SendMapMovements", "1.2.3.7");

            } catch (Exception e) {
                if (e.toString().contains("XmlPullParserException")) {
                    throw new Exception(...);
                }
            }

            Object so = envelope.getResponse();
            System.gc();

            return so;

        } else {
            httpConnection.disconnect();
            Log.i("SendMapMovements", "1.2.3.8");
            String strErrorDescription = getHttpErrorDescription(responseCode);
            throw new Exception(strErrorDescription);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:20:35.213

您必须在 new 中运行您的连接代码`Thread`，而不是 on `UI Thread (Main Thread)`，因为 the`BroadcastReceiver`和您`Activity`在同一线程上运行。

# java - 测试从标准输入读取并写入标准输出的 java 程序

> ID：13329282
> 
> 赞同：12
> 
> 时间：2012-11-11T07:08:16.143
> 
> 标签：java, junit, mocking

我正在为 Java 编程竞赛编写一些代码。程序的输入使用标准输入给出，输出在标准输出上。你们是如何测试在标准输入/标准输出上工作的程序的？这就是我的想法：

由于 System.in 是 InputStream 类型，而 System.out 是 PrintStream 类型，所以我用这个原型在 func 中编写了代码：

```
void printAverage(InputStream in, PrintStream out) 
```

现在，我想使用junit对此进行测试。我想使用字符串伪造 System.in 并接收字符串中的输出。

```
@Test
void testPrintAverage() {

    String input="10 20 30";
    String expectedOutput="20";

    InputStream in = getInputStreamFromString(input);
    PrintStream out = getPrintStreamForString();

    printAverage(in, out);

    assertEquals(expectedOutput, out.toString());
} 
```

实现 getInputStreamFromString() 和 getPrintStreamForString() 的“正确”方法是什么？

我是否使这比需要的更复杂？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T07:21:02.067

尝试以下操作：

```
String string = "aaa";
InputStream stringStream = new java.io.ByteArrayInputStream(string.getBytes()) 
```

`stringStream`是一个将从输入字符串中读取字符的流。

```
OutputStream outputStream = new java.io.ByteArrayOutputStream();
PrintStream printStream = new PrintStream(outputStream);
// .. writes to printWriter and flush() at the end.
String result = outputStream.toString() 
```

`printStream`是一个`PrintStream`将写入的，而`outputStream`后者又将能够返回一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:13:54.460

编辑：对不起，我误读了你的问题。

用scanner或bufferedreader读取，后者比前者快得多。

```
Scanner jin = new Scanner(System.in);

BufferedReader reader = new BufferedReader(System.in); 
```

使用打印写入器写入标准输出。您也可以直接打印到 Syso，但速度较慢。

```
System.out.println("Sample");
System.out.printf("%.2f",5.123);

PrintWriter out = new PrintWriter(System.out);
out.print("Sample");
out.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-05T19:47:04.367

> 我正在为 Java 编程竞赛编写一些代码。程序的输入使用标准输入给出，输出在标准输出上。你们是如何测试在标准输入/标准输出上工作的程序的？

另一种发送字符的方法`System.in`是使用`PipedInputStream`and `PipedOutputStream`。可能类似于以下内容：

```
PipedInputStream pipeIn = new PipedInputStream(1024);
System.setIn(pipeIn);

PipedOutputStream pipeOut = new PipedOutputStream(pipeIn);

// then I can write to the pipe
pipeOut.write(new byte[] { ... });

// if I need a writer I do:
Writer writer = OutputStreamWriter(pipeOut);
writer.write("some string");

// call code that reads from System.in
processInput(); 
```

另一方面，正如@Mihai Toader 所提到的，如果我需要测试，`System.out`那么我会执行以下操作：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
System.setOut(new PrintStream(baos));

// call code that prints to System.out
printSomeOutput();

// now interrogate the byte[] inside of baos
byte[] outputBytes = baos.toByteArray();
// if I need it as a string I do
String outputStr = baos.toString();

Assert.assertTrue(outputStr.contains("some important output")); 
```

# php - 显示嵌套评论的最佳方式是什么？

> ID：13329283
> 
> 赞同：0
> 
> 时间：2012-11-11T07:08:56.740
> 
> 标签：php, kohana

为了实现这个特性，我在同一个表中创建了一个与`replyTo`相关的`comment_id`列。原来的评论是这样的`0`。我面临的问题是展示它们的最佳方式是什么。

在我的模型中，我创建了一个函数`nested_comments()` 来获取它们，在我看来，我正在这样做。

```
<? foreach( $comments as $comment ): ?>
....
          <? foreach( $comment->nested_comments() as $comm): ?> 
```

但这只有在我有一层嵌套评论时才可以。实际上，我希望是否有办法在视图中执行此操作。我不希望单独为此目的创建另一个视图文件和控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:15:53.200

您可以使用函数，如下所示：

```
function getComments($comments){
      if(!is_array($comments)){
          return;
       }
     foreach($comments as $key => $value){
          // do what you want with comments
          getComments($nestedComments);
     }
} 
```

它还没有准备好使用功能，但您可以以相同的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:53:26.530

您可以使用 mptt 模块来实现它，周围有几个：

[https://github.com/spadefoot/kohana-orm-leap](https://github.com/spadefoot/kohana-orm-leap)

[https://github.com/rafi/orm-mptt](https://github.com/rafi/orm-mptt)

[https://github.com/evopix/orm-mptt](https://github.com/evopix/orm-mptt)

我一直在使用第三个，但现在它已经过时了，我建议你看看跳跃，它看起来很有希望。并看看[http://kohana-modules.com/search?query=mptt](http://kohana-modules.com/search?query=mptt)

# ruby-on-rails - 在轨道中的表单加载之前创建丢失的对象

> ID：13329285
> 
> 赞同：0
> 
> 时间：2012-11-11T07:09:37.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我只是想让我的表单为尚未创建的每个项目显示一个空白字段。我已经使用 build 方法成功完成了更简单的表单，但我不知道如何在这种情况下做到这一点。我用来做这件事的策略是错误的还是我犯了一个简单的语法错误？

这是基本的模型设置：

比赛有许多回合和许多团队。一轮有许多项目。每队每轮只有 1 件物品

因此，当加载表单时，如果团队尚未创建项目，我希望为该团队创建一个空白项目，以便它显示在表单中并且可以为该团队进行编辑。

我在控制器中尝试了 2 种不同的方法，但都没有奏效：

**方法一：**

```
def edit_admin
    @comp = Comp.find(params[:comp_id])
    @round = @comp.rounds.find(params[:round_id])  
    team_ids = @round.items.all(:select => :team_id).collect(&:team_id)
    @comp.teams.each do |team|      
        if team_ids.include? team.id == false
            new_item = @round.items.new(:team_id => team.id, :round_id => @round.id)
            new_item.save        
        end
    end
end

def update_admin
    @comp = Comp.find(params[:comp_id])
    @round = @comp.rounds.find(params[:round_id])     
    if @round.update_attributes(params[:round]) 
        redirect_to(edit_comp_path(@comp))
    else
        render 'edit_admin'    
    end    
 end 
```

**方法二：**

本质上是一样的，但我定义了一个在页面加载之前运行的方法：

```
before_filter :build_new_items, :only => :edit_admin 

private
    def build_new_items
        @comp = Comp.find(params[:comp_id])
        @round = @comp.rounds.find(params[:round_id])
        team_ids = @round.items.all(:select => :team_id).collect(&:team_id)
        @comp.teams.each do |team|      
            if team_ids.include? team.id == false
                new_item = @round.items.new(:team_id => team.id, :round_id => @round.id)
                new_item.save        
            end
        end
    end 
```

表单如下所示（视图名为 edit_admin.html.erb）：

```
<%= form_tag update_admin_comp_round_items_path(@comp,@round), :method => :put do %>
    <% for item in @round.items.all %>
        <%= "Team: " + @comp.teams.find(item.team_id).team_name %> <br />
        <%= fields_for 'round[items_attributes][]', item do |f| %>
            <%= f.label :item_name %>
            <%= f.text_field :item_name %> <br />
            <%= f.hidden_field :id, :value => item.id %> <br />
        <% end %>
    <% end %>  
    <p><%= submit_tag "Submit" %></p>
 <% end %> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:47:48.270

回答我自己的问题，因为没有其他人这样做：我让方法 B 进行了非常小的调整。它所需要的只是“包含？”后面的值的括号，如下所示：

如果 team_ids.include?(team.id) == false。

我通过使用 rails 控制台中的每一行代码来解决这个问题。

方法 A 也可以工作，但由于我让方法 B 工作，我还没有尝试过。

更新：方法A也有效

# c++ - 从文本文件输入以获取 char C++

> ID：13329288
> 
> 赞同：1
> 
> 时间：2012-11-11T07:09:58.810
> 
> 标签：c++, file, text, input

我在 .txt 文件文本中的修饰符后获取输入时遇到问题。我想要做的是，如果 .txt 文件有“类型：”这个词，那么之后的任何内容都将被放入一个字符中。到目前为止我的代码：

```
#include "stdafx.h"
#include <windows.h>
#include "VKH.h"
#include "Strmif.h"
#include <iostream>
#include <stdio.h>
#include <string>
#include <fstream>

void GetDocumentandRead() {
string line;
ifstream myfile (line1);
if (myfile.is_open())
{
  while ( !myfile.eof() )
  {
    getline (myfile,line);
    char aline[100];
    strcpy(aline, line.c_str());
    printf(aline, "\n");
    if (line.compare("mouseup") == 0){
        MouseUp(10);
    }
    if (line.compare("mousedown") == 0){
        MouseDown(10);
    }
    if (line.compare("mouseright") == 0){
        MouseRight(10);
    }
    if (line.compare("mouseleft") == 0){
        MouseLeft(10);
    }
    if (line.compare("mouseclick") == 0){
        MouseClick();
    }
    if (line.compare("enter") == 0){
        Enter();
    }
    if (line.compare("ctrltab") == 0){
        CtrlTab();
    }
    if (line.compare("tab") == 0){
        Tab();
    }
    if (line.compare("altf4") == 0){
        AltF4(0);
    }
    if (line.compare("alttab") == 0){
        AltTab();
    }
    if (line.compare("mousecenter") == 0){
        MouseCenter();
    }
    if (line.compare(6,5,"type:") == 0){
      //Don't know what to put here...
    }
  }
  myfile.close();
 }

 else printf("\nUnable to open file\n\n");

} 
```

因此，在文本文件中的“类型：”之后，它将使用我调用的函数键入 TypeStr();

```
void TypeStr(char *lpszString)
{
  char cChar;
  while((cChar=*lpszString++)) // loops through chars
  {
    short vk=VkKeyScan(cChar); // keycode of char
    if((vk>>8)&1){keybd_event(VK_LSHIFT,0,0,0);} // hold shift if necessary
    keybd_event((unsigned char)vk,0,0,0); // key in
    keybd_event((unsigned char)vk,0,KEYEVENTF_KEYUP,0); // key out
    if((vk>>8)&1){keybd_event(VK_LSHIFT,0,KEYEVENTF_KEYUP,0);} // release shift if necessary
  }
} 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T08:10:27.617

首先你应该重写你的`TypeStr`函数，使它需要一个`const char *`. 像这样

```
void TypeStr(const char *lpszString)
{
    ...
} 
```

无需其他更改。

然后你应该像这样从你的代码中调用那个函数

```
if (line.compare(6,5,"type:") == 0){
   TypeStr(line.c_str() + 11);
} 
```

您必须将`TypeStr`函数更改为`const char*`（除了一般的好样式之外）的原因是返回 a而不是 a的`c_str()`方法。`std::string``const char*``char*`

# r - 线性模型和三次模型之间的编码差异

> ID：13329289
> 
> 赞同：0
> 
> 时间：2012-11-11T07:10:03.783
> 
> 标签：r

我有两个变量 ENERGY 和 TEMP

我创建了另外两个变量 temp2 和 temp 3

```
 > temp2 <- data$temp^2
 > temp3 <- data$temp^3
 >data=cbind(data, energy, temp,temp2,temp3) 
```

现在要创建一个立方模型，它看起来就像一个线性模型吗？

```
 >model<-lm(energy~temp+temp2+temp3) 
```

编辑：

好的，所以我按照您的建议做了，这是输出：

```
 > ?poly
 > model<- lm( energy ~ poly(temp, 3) , data=data ) 
 > summary(model)

 Call:
 lm(formula = energy ~ poly(temp, 3), data = data)

 Residuals:
     Min      1Q  Median      3Q     Max 
 -19.159 -11.257  -2.377   9.784  26.841 

 Coefficients:
                Estimate Std. Error t value Pr(>|t|)    
 (Intercept)       95.50       3.21  29.752  < 2e-16 ***
 poly(temp, 3)1   207.90      15.72  13.221 2.41e-11 ***
 poly(temp, 3)2   -50.07      15.72  -3.184  0.00466 ** 
 poly(temp, 3)3    81.59      15.72   5.188 4.47e-05 ***
 ---
 Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

 Residual standard error: 15.73 on 20 degrees of freedom
 Multiple R-squared: 0.9137,    Adjusted R-squared: 0.9008 
 F-statistic: 70.62 on 3 and 20 DF,  p-value: 8.105e-11 
```

我会假设我会以同样的方式测试拟合优度并查看 Pr(>|t|)。这会让我相信所有变量都很重要。

我可以使用这个拟合回归模型来预测平均温差的平均能耗吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T07:42:19.727

您应该考虑使用以下`poly`函数，而不是编写虚拟变量：

```
?poly   # Polynomial contrasts
model<- lm( energy ~ poly(temp, 3) , data=data ) 
```

如果您想使用与虚拟方法相同的列（这不利于统计推断），您可以使用 'raw' 参数：

```
model.r<- lm( energy ~ poly(temp, 3, raw=TRUE) , data=data ) 
```

预测将是相同的，但标准误差不会。这应该会给您与@RomanLuštrik 的建议返回的相同估计值。这些项不会是正交的，因此它们的必要相关性会很高，您将无法对独立效应做出正确的推断。

添加的问题：“我能否使用此拟合回归模型来预测平均温差的平均能耗？”

不。您需要指定一个特定的两个温度，然后`predict`可能会给您一个差异，但是该差异会根据参考点的不同而有所不同，即使差异的大小是相同的。这是使用的结果一个非线性项。也许您应该描述您的目标并使用更适合方法问题的论坛。当您知道自己想要做什么时，SO 用于编码。[当您更清楚地提出问题时， http://stats.stackexchange.com](http://stats.stackexchange.com)可能更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T17:41:59.107

有两种方法可以用 进行多项式回归`lm`：

```
lm( y ~ x + I(x^2) + I(x^3) ) 
```

和

```
lm( y ~ poly(x, 3, raw=TRUE) ) 
```

（那是三次方。我相信你可以概括为四次、五次等）

# sql - 即使没有发生错误，SQL Data Adapter.Update(dataset) 也会返回 0 条记录

> ID：13329292
> 
> 赞同：1
> 
> 时间：2012-11-11T07:10:25.547
> 
> 标签：sql

嗨，我正在创建 sqlconnectivity 类，当我在 datagridview 中编辑整个数据集后尝试更新整个数据集时遇到了一个问题。可以请任何人建议为什么我似乎无法更新我的数据集。这是我用来获取数据集和更新数据集的类代码。

```
public class clssql
{

    #region private sqlvariabels

    private static string _sqlconnectionstring;
    private SqlDataAdapter _sqldataadapter;
    private SqlCommand _sqlcommand;
    private SqlConnection _sqlconnection;
    private SqlCommandBuilder _sqlcommandbuilder;
    private SqlTransaction _sqlTransaction;
    private DataSet _ds;
    private bool _Transctionbinded=false;
    private string _errorstring;
    #endregion
    /// <summary>
    /// Constructor for clssql
    /// </summary>
    public clssql()
    {
        _sqlconnectionstring = GenerateSQLConnectionString(false);
        _sqlconnection = new SQLConnection(_sqlconnectionstring);
    }
    /// <summary>
    /// BindsTransaction to the Object
    /// </summary>
    public void BindTransaction()
    {
        _Transctionbinded = true;
        _sqlconnection.Open();
        _sqlTransaction = _sqlconnection.BeginTransaction();
        _sqlcommand.Transaction = _sqlTransaction;
    }

    /// <summary>
    /// Releases the transaction
    /// </summary>
    public void ReleaseTransaction()
    {
        if (_errorstring=="")
        {
            _Transctionbinded = false;
            _sqlTransaction.Commit();
            _sqlconnection.Close();

        }
            else
        {

        }
        _sqlTransaction = null;
    }

    /// <summary>
    /// Generate sqlconnection string.
    /// </summary>
    /// <param name="hardcoded">set to true if you want hardcoded string and not from app.config generated</param>
    /// <returns></returns>
    public static string GenerateSQLConnectionString(bool hardcoded = false)
        {
            StringBuilder connstring = new StringBuilder();

            if (hardcoded)
            {
                return @"Data Source=MAYA-PC\SQLExpress;Initial Catalog=BankDB;Persist Security Info=True;User ID=sa;Password=sql123";
            }
                else
            {
                try
                {
                    connstring.Append("Data Source=" + ConfigurationManager.AppSettings["DataSource"] + ";");
                    connstring.Append("Initial Catalog=" + ConfigurationManager.AppSettings["InitialCatalog"] + ";");
                    connstring.Append("Persist Security Info=True;");
                    connstring.Append("User ID=" + ConfigurationManager.AppSettings["UserID"] + ";");
                    connstring.Append("Password=" + ConfigurationManager.AppSettings["Password"] + ";");
                    return connstring.ToString();
                }
                catch (Exception)
                {
                    throw;
                }

            }

        }

  /// <summary>
  /// Executes an SQL Command Text.
  /// </summary>
  /// <param name="Query">Query to execute</param>
  /// <returns>Returns the Number of Rows Affected</returns>
    public int ExecuteNonQuery(string Query)
    {
        try
        {
            int rec;
            if (_Transctionbinded)
            {
                //Do Nothing
            }
                else
            {
                _sqlconnection.Open();
            }
            //_sqlconnection = new SqlConnection(_sqlconnectionstring);
            _sqlcommand.CommandText = Query;
            _sqlcommand.CommandType = CommandType.Text;
            rec = _sqlcommand.ExecuteNonQuery();

            if (_Transctionbinded)
            {
                //Do Nothing
            }
            else
            {
                _sqlconnection.Close();
            }
            return rec;
        }
        catch (Exception ex)
        {
            if (_Transctionbinded)
            {
                _errorstring = ex.Message;
            }
            else
            {
                _sqlconnection.Close();
            }
            throw;
        }
    }

    /// <summary>
    /// Directly Executes an SQL Command
    /// </summary>
    /// <param name="_sqlcommand"></param>
    /// <returns></returns>
    public int ExecuteCommand(SqlCommand _sqlcommand)
    {
        try
        {
            int rec;
            if (_Transctionbinded)
            {
                //Do Nothing
            }
                else
            {
                _sqlconnection.Open();
            }

            _sqlcommand.Connection = _sqlconnection;
            rec =_sqlcommand.ExecuteNonQuery();

            if (_Transctionbinded)
            {
                //Do Nothing
            }
            else
            {
                _sqlconnection.Close();
            }
            return rec;
        }
        catch (Exception ex)
        {
            if (_Transctionbinded)
            {
                _errorstring = ex.Message;
            }
            else
            {
                _sqlconnection.Close();
            }
            throw;
        }

      }

    /// <summary>
    /// Get Dataset From Query
    /// </summary>
    /// <param name="SelectQuery"></param>
    /// <returns></returns>
    public DataSet GetDataset(string SelectQuery)
    {
        try
        {

            if (_Transctionbinded)
            {
                //Do Nothing
            }
            else
            {
                _sqlconnection = new SqlConnection(_sqlconnectionstring);
                _sqlconnection.Open();
            }

            _sqlcommand = new SqlCommand(SelectQuery, _sqlconnection);
            _sqldataadapter = new SqlDataAdapter(_sqlcommand);
            _sqlcommandbuilder = new SqlCommandBuilder(_sqldataadapter);
            _ds = new DataSet();
            _sqldataadapter.Fill(_ds);

            if (_Transctionbinded)
            {
                //Do Nothing
            }
            else
            {
                _sqlconnection.Close();
            }

            return _ds;
        }
        catch (Exception)
        {

            throw;
        }

    }

    /// <summary>
    /// Updates Dataset
    /// </summary>
    /// <param name="ds"></param>
    /// <returns></returns>
    public int UpdateDataset(DataSet ds)
        {

            int rec;
            try
            {
                if (_Transctionbinded)
                {
                //Do Nothing
                }
            else
                {
                _sqlconnection.Open();
                }

                if (ds.HasChanges()) { 
                    ds.AcceptChanges(); 
                }
                _sqldataadapter.UpdateCommand = _sqlcommandbuilder.GetUpdateCommand(true);
                _sqldataadapter.InsertCommand = _sqlcommandbuilder.GetInsertCommand(true);
                _sqldataadapter.DeleteCommand = _sqlcommandbuilder.GetDeleteCommand(true);
                rec = _sqldataadapter.Update(ds);

                if (_Transctionbinded)
                {
                    //Do Nothing
                }
                else
                {
                    _sqlconnection.Close();
                }

                return rec;
            }
            catch (Exception ex)
            {
                if (_Transctionbinded)
                {
                    _errorstring = ex.Message;
                }
                else
                {
                    _sqlconnection.Close();
                }
                throw;
            }

        }

    } 
```

好吧，我已经把我的整个班级都放在这里了，但是 getdataset 和更新数据集是唯一一个现在不需要交易的重要数据集，只是为了将来的参考。

在同一个项目中，当我尝试此代码时，在编辑 datagridview 后，数据集已正确更新。我试了又试，但不明白为什么它适用于下面的代码而不适用于上面的代码..

```
 private void LoadClick(object sender, EventArgs e)
    {
        string connectionString = @"Data Source=MAYA-PC\SQLExpress;Initial Catalog=CrystalTutorial;Persist Security Info=True;User ID=sa;Password=sql123";
        string sql = "Select * From Customer_Orders";
        SqlConnection connection = new SqlConnection(connectionString);
        connection.Open();
        sCommand = new SqlCommand(sql, connection);
        sAdapter = new SqlDataAdapter(sCommand);
        sBuilder = new SqlCommandBuilder(sAdapter);
        sDs = new DataSet();
        sAdapter.Fill(sDs, "Stores");
        sTable = sDs.Tables["Stores"];
        connection.Close();
        dataGridView1.DataSource = sDs.Tables["Stores"];
        dataGridView1.ReadOnly = true;
        btnsave.Enabled = false;
        dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
    }

    private void new_btn_Click(object sender, EventArgs e)
    {
        dataGridView1.ReadOnly = false;
        btnsave.Enabled = true;
        btnnew.Enabled = false;
        btndelete.Enabled = false;
    }

    private void delete_btn_Click(object sender, EventArgs e)
    {
        if (MessageBox.Show("Do you want to delete this row ?", "Delete", MessageBoxButtons.YesNo) == DialogResult.Yes)
        {
            dataGridView1.Rows.RemoveAt(dataGridView1.SelectedRows[0].Index);
            sAdapter.Update(sTable);
        }
    }

    private void save_btn_Click(object sender, EventArgs e)
    {
        sAdapter.Update(sTable);
        dataGridView1.ReadOnly = true;
        btnsave.Enabled = false;
        btnnew.Enabled = true;
        btndelete.Enabled = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:15:38.170

您不应在更新之前调用 AcceptChanges 方法。 您将在使用 AcceptChanges 和 TableAdapter.Update线程的[顺序中](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/2d8a76dc-3bf9-4347-9ac3-7b996e1d7c33/)找到对此的解释。

# javascript - 为什么在 JavaScript 中 object 和 constructor.prototype 设置为 Base？

> ID：13329293
> 
> 赞同：0
> 
> 时间：2012-11-11T07:10:32.033
> 
> 标签：javascript

这是我的小程序。当我在调试模式下检查 rec 的值时，对象是 Base { x=0, y=0, w=10, more...}。应该是矩形吗？此外，constructor.prototype 是 Base。为什么不是形状？

```
 function Base() {
    }

    function Shape(x, y) {
        this.x = x;
        this.y = y;
    }

    Shape.prototype = new Base();
    Shape.prototype.move = function(x, y) {
        this.x += x;
        this.y += y;
        console.log("x = " + this.x + " y = " + this.y);
    };

    function Rectangle(x, y, w, h) {
        Shape.call(this, x, y);
        this.w = w;
        this.h = h;
    }

    Rectangle.prototype = new Shape();
    Rectangle.prototype.area = function() {
        return this.w * this.h;
    };
    var rec = new Rectangle(0, 0, 10, 10);
    console.log(instanceOf(rec, Rectangle));

    function instanceOf(object, constructor) { 
        while (object != null) {
            if (object == constructor.prototype)
                return true;
            if ( typeof object == 'xml') {
                return constructor.prototype == XML.prototype;
            }
            object = object.__proto__;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:05:15.060

看看[为什么*[不]*在这里使用`new`关键字？](https://stackoverflow.com/q/12592913/1048572). 您可能不会使用它并创建它的新实例，而只是从`Base.prototype`.

> 此外，constructor.prototype 是 Base。为什么不是形状？

我不确定`constructor`你在这里指的是哪个：

*   所有对象的`constructor`属性都是`Base`，因为它们都从`Base.prototype`对象继承了这个原型。设置继承链后您没有覆盖它。这不是真正必要的，但很好的风格：`Shape.prototype.constructor = Shape`和`Rectangle.prototype.constructor = Rectangle`- 那些原型对象是继承自`Base`.

*   你的函数的`constructor`参数。`instanceOf`你传入`Rectangle`那里，`constructor.prototype`它的原型对象也是如此`Rectangle`，它*继承*自`Base`但不同。

> 当我在调试模式下检查 rec 的值时，对象是 Base { x=0, y=0, w=10, more...}

通常不会。有`Base`什么特别的吗，例如宿主对象？您的`rec`对象是 的一个实例`Base`，因此它可能会因此而以不同的方式显示。

`rec`只是一个继承自`Rectangle.prototype`哪个继承自`Shape.prototype`哪个继承自`Base.prototype`哪个继承自的对象......假设`Base`是您定义的函数`Object.prototype`，继承自`null`。

# java - 用于英特尔应用程序开发的 Netbeans

> ID：13329299
> 
> 赞同：0
> 
> 时间：2012-11-11T07:12:11.703
> 
> 标签：java, eclipse, netbeans

有没有人使用 Netbeans 为 Intel Appup Store 开发应用程序。我知道他们“正式”支持 Eclipse。我下载了 Java SDK，打包并验证了我的 jar 文件，然后它停止工作。报告说*/lib*文件夹中不存在*appup_sdk_javav.xxx*。但它就在那里。我通过 Netbeans 添加该文件。是Netbeans的问题还是其他问题。

# objective-c - 隐藏和显示栏按钮项

> ID：13329303
> 
> 赞同：3
> 
> 时间：2012-11-11T07:13:01.203
> 
> 标签：objective-c

```
 [self setButtonItem:nil]; 
```

不隐藏我的栏按钮项目。

以及如何再次显示它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-03T17:14:50.077

可以**禁用另一个选项并将其颜色设置为 clearColor**，然后再次**启用并将其设置为原始颜色**，如下所示：

```
self.rightButton.tintColor = [UIColor clearColor];
self.rightButton.enabled = NO; 
```

然后：

```
self.rightButton.tintColor = [UIColor blackColor];
self.rightButton.enabled = YES; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-11T07:18:28.630

与 UIView 不同，这里没有可以使用的“隐藏”属性。您需要从导航栏或工具栏中删除您的栏按钮项目以隐藏它并重新添加它以再次显示它。

使用类似这样的东西（假设这是导航栏的一部分）：

```
self.navigationItem.rightBarButtonItem = nil; 
```

除非它是“后退”按钮，在这种情况下[，您可以使用特定的 API 调用](https://stackoverflow.com/questions/7202698/how-to-hide-the-bar-button-item-on-click-of-a-button?rq=1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T10:27:04.457

在 Swift 4 中，如果右侧只有一个条形按钮项，则可以使用此项，

> self.navigationItem.rightBarButtonItem = nil; //隐藏
> 
> self.navigationItem.rightBarButtonItem = barButtonItem //显示

假设您在右侧有多个条形按钮，例如假设您在导航项的右侧有两个条形按钮项（搜索按钮和过滤按钮）。现在右栏按钮项目是

> self.navigationItem.rightBarButtonItems = [searchItem,filterItem]

你必须只隐藏搜索按钮，你可以使用喜欢，

> self.navigationItem.rightBarButtonItems = [filterItem]

现在发生的事情是，您可以完全隐藏导航项中的搜索按钮，过滤器项代替搜索项

然后，如果您想显示隐藏的栏按钮，

> self.navigationItem.rightBarButtonItems = [searchItem, filterItem]

# android - Android 标准中的可折叠部分

> ID：13329307
> 
> 赞同：3
> 
> 时间：2012-11-11T07:14:05.803
> 
> 标签：android

是否有任何标准选项可用于使用 android satndard SDK 创建可折叠部分。在其中我们可以有一个普通的可点击标题，它将显示或隐藏某些部分。

提前致谢，考希克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T07:18:23.897

是的，您可以，您可以使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)，并在此处查看此示例： [如何开始使用 ExpandableListView](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)

# php - 可以运行多个php文件吗？

> ID：13329312
> 
> 赞同：0
> 
> 时间：2012-11-11T07:14:44.053
> 
> 标签：php

我有两个不同的任务，每个任务都在 php 文件中，所以我有两个 php 文件。我可以同时运行 2 个文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:20:58.223

我认为您问题的答案是关于使用 cronjob .. 您可以运行 php 文件取决于您在 crontab 中指定的时间..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:25:39.910

不知道你到底想要什么，但是，我认为这个 cam 可以帮助你：

**运行文件.php：**

```
<?php
require 'run1.php';
require 'run2.php';
?> 
```

您要执行的文件的位置和`run1.php`位置。`run2.php`

**更新**

你说过`the second task will have to wait, and then the user will not get the service he needs`，所以，这不像你期望的那样工作。

PHP 文件是从上到下读取的，就像任务（Cronjobs）一样，它运行一个文件而不是另一个文件，因此，您无法阻止文件执行之间的时间。

# android - 全局整数被分配了错误的值

> ID：13329320
> 
> 赞同：0
> 
> 时间：2012-11-11T07:15:54.940
> 
> 标签：android, android-view

我在我的应用程序的两个地方使用了我的自定义视图，`ColorStrip`：在`ListView`项目中和在单独的`FragmentActivity`. ListView 项目正确显示我的视图，但由于某些奇怪的原因，当`ColorStrip`为 my 创建a 时`FragmentActivity`，`hPx`和`wPx`变量​​分别设置为所有数字中的 102 和 8。如果我在为 ListView 项创建这些变量时检查它们的值（在执行期间`onCreate()`，它们都显示为零。但是当它为我的 FragmentActivity 创建 ColorStrip 时，它们被分配了那些奇怪的值。

我不明白为什么在为 FragmentActivity 创建变量时，变量会被分配 0 以外的值。

这是我的子类的所有代码`View`：

```
public class ColorStrip extends View {

public ShapeDrawable mDrawable;
private static int hPx = 0;
private static int wPx = 0;

public ColorStrip(Context context, AttributeSet attrs) {
    super(context, attrs);

    mDrawable = new ShapeDrawable(new RectShape());

    TypedArray a = context.getTheme().obtainStyledAttributes(attrs,
            R.styleable.ColorStrip, 0, 0);
    try {
        int color = a.getInt(R.styleable.ColorStrip_color, 0);
        if (color != 0)
            setColor(color);
    } finally {
        a.recycle();
    }

}

protected void onDraw(Canvas canvas) {
    if (wPx == 0)
        wPx = getWidth();
    if (hPx == 0)
        hPx = getHeight();
    mDrawable.setBounds(0, 0, wPx, hPx);
    mDrawable.draw(canvas);
}

public void setColor(int color) {
    mDrawable.getPaint().setColor(color);
}
} 
```

这是 ListView 的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal">
<com.acedit.assignamo.ui.ColorStrip
    android:id="@+id/assignment_list_color_strip"
    android:layout_width="@dimen/color_strip_width"
    android:layout_height="match_parent" /> 
```

和 FragmentActivity 的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ColorStrip="http://schemas.android.com/apk/res/com.acedit.assignamo"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

    <com.acedit.assignamo.ui.ColorStrip
        android:id="@+id/assignment_view_color_strip"
        android:layout_width="match_parent"
        android:layout_height="@dimen/assignment_view_color_strip_height" /> 
```

为什么变量被赋予这些奇怪的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:36:28.767

不要将 hPx 和 wPx 声明为静态的。此外，缓存它们并在第一次调用 onDraw 时进行设置也不是一个好主意。根据[http://android.developer.com上的](http://android.developer.com)[自定义绘图](http://developer.android.com/training/custom-views/custom-drawing.html#layouteevent)文档，一个更好的地方是[View.onSizeChanged()](http://developer.android.com/reference/android/view/View.html)。

# javascript - Web 应用程序中 iPad 屏幕的响应不佳

> ID：13329321
> 
> 赞同：0
> 
> 时间：2012-11-11T07:16:03.333
> 
> 标签：javascript, asp.net-mvc, ipad, ios6, dom-events

我有一个网络应用程序。它的一部分在 iPad 上运行。当设备升级到 iOS 6 时，屏幕响应变得很差而且很长（通常，根本没有响应 - 我们的 Javascript 按钮没有点击）。有没有办法改变屏幕响应或其他什么？（浏览器：Safari、Chrome）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:51:38.293

I solve it. Just use "ontouchend" event against "onclick" in javascript for controls.

# python - 按钮在 Tkinter 上不起作用

> ID：13329322
> 
> 赞同：0
> 
> 时间：2012-11-11T07:16:33.443
> 
> 标签：python, tkinter

我已经使用 Tkinter 一两个星期了，使用按钮没有问题。但是对于这个项目，我的脚本可以正常工作，直到我添加一个按钮，然后它就不再运行了。有人可以帮我解决这个问题。提前非常感谢。

```
from sys import argv
from Tkinter import *
from PIL import Image, ImageTk, ImageFilter
import random

script, infile = argv

class MyApp(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("ImagePro")
        Button(self.root, text ="ASdf").pack()

        #Original
        original = Image.open(infile)
        (w, h) = (original.size[0], original.size[1])
        tkpi = ImageTk.PhotoImage(original)
        label = Label(self.root, image=tkpi)
        label.grid(row =0, column=0, padx=5,pady=5)

        img = original.copy()
        pixels = img.load()
        for x in range(w):
            for y in range(h):
                pixels[x,y]= 22
        tkpi2 = ImageTk.PhotoImage(img)
        label = Label(self.root, image=tkpi2)
        label.grid(row =0, column=1, padx=5,pady=5)

        self.root.mainloop()

MyApp() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:25:31.053

您正在混合`pack`和`grid`布局。

“不要在同一个主窗口中混合网格和打包。Tkinter 会很高兴地度过你的余生，努力协商一个双方经理都满意的解决方案。” - [http://effbot.org/tkinterbook/pack.htm](http://effbot.org/tkinterbook/pack.htm)

为主窗口选择一个并坚持使用它。如果您需要使用多个布局，请`frame`为每个布局使用不同的布局。

# c# - 如何将 url 转换为 XML

> ID：13329323
> 
> 赞同：-1
> 
> 时间：2012-11-11T07:16:46.983
> 
> 标签：c#, xml, web-services

我正在尝试使用此网址...

[http://www.webservicex.net/stockquote.asmx/GetQuote?Symbol=T](http://www.webservicex.net/stockquote.asmx/GetQuote?Symbol=T)

它的作用类似于 XML，但格式不正确，我希望能够使用它以 XML 形式显示它...

这是我现在的代码

```
protected void btnGetResult_Click(object sender, EventArgs e)
{
    XPathNavigator nav;
    XmlDocument myXMLDocument = new XmlDocument();
    String stockQuote = "http://www.webservicex.net/stockquote.asmx/GetQuote?Symbol=T" + txtInfo.Text;
    myXMLDocument.Load(stockQuote);

    // Create a navigator to query with XPath.
    nav = myXMLDocument.CreateNavigator();
    nav.MoveToRoot();
    nav.MoveToFirstChild();

    do
    {
        //Find the first element.
        if (nav.NodeType == XPathNodeType.Element)
        {
            //Move to the first child.
            nav.MoveToFirstChild();

            //Loop through all the children.
            do
            {
                //Display the data.
                txtResults.Text = txtResults.Text + nav.Name + " - " + nav.Value + Environment.NewLine;
            } while (nav.MoveToNext());
        }
    } while (nav.MoveToNext());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:38:42.230

查看您收到的回复的来源。内容（带有根节点的所有内容）不是 XML。标签是 HTML 实体：`&lt;`和`&gt;`. 将其直接加载到您的 XmlDocument 中会将您所追求的所有内容视为简单文本。

下面的示例下载在线资源，用标签替换 HTML 实体并重新加载 XML 文档，然后 XPath 可以访问该文档。

```
string url = "http://www.webservicex.net/stockquote.asmx/GetQuote?Symbol=T";

XmlDocument doc = new XmlDocument();
doc.Load(url);

string actualXml = doc.OuterXml;
actualXml = actualXml.Replace("&lt;", "<");
actualXml = actualXml.Replace("&gt;", ">");
doc.LoadXml(actualXml); 
```

我没有考虑您的示例源代码的第二部分。但我想拥有一个适当的 XML 文档将是第一步。

# sql-server - Sql server缺少索引显示已包含在另一个索引中的列

> ID：13329327
> 
> 赞同：0
> 
> 时间：2012-11-11T07:18:02.580
> 
> 标签：sql-server, indexing, database-administration

我有一张桌子`Employees(Id,CompanyId,Name,Status....)` 我有一个索引`Ix_CompanyId_Status(CompanyId,Status)`

看着`dm_db_missing_index_details`，我看到 sql server 想要`CompanyId`在没有任何不等式列或包含列的相等列上建立索引。

如果它的数据已经包含在上面提到的索引中，为什么还需要这个索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:27:19.297

如果 CompanyID 是外键，您可以将其作为建议的索引从 `dm_db_missing_index_details`.

# javascript - 没有用 var 声明的 JavaScript 变量会变成全局变量吗？

> ID：13329329
> 
> 赞同：5
> 
> 时间：2012-11-11T07:18:20.963
> 
> 标签：javascript, jquery, typescript

我在一个文件中有以下代码：

```
function refreshGridSuccess(responseText, entity) {

    oTable = $('#dataTable').dataTable({
        "sScrollX": "100%", 
```

在另一个文件中，我有：

```
$('#detailData')
        .on('click', '.sort-up', function (event) {
            event.preventDefault();
            var column = $(this).closest('th'),
                columnIndex = column.parent().children().index(column.get(0));
            oTable.fnSort([[columnIndex, 'asc']]);
            return false;
        }) 
```

`oTable`除了这里，我没有定义。脚本似乎可以工作，这是否意味着它`oTable`以某种方式变成了全局变量？

现在我正在尝试开始使用 Typescript，如果没有`Otable`声明它就不会接受。有没有一种方法可以声明`oTable`为对象，还是必须将其声明为与返回的类型相同的对象`$('#dataTable').dataTable({})`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T07:23:34.573

*如果您在全局范围内，则没有区别。如果你在一个函数中，那么“var”将创建一个局部变量，“no var”将查找作用域链，直到找到变量或到达全局作用域（此时它将创建它）。*

在这里找到：[var 关键字的用途是什么以及何时使用它（或省略它）？](https://stackoverflow.com/questions/1470488/difference-between-using-var-and-not-using-var-in-javascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T07:23:41.553

是的，未使用 var 声明的变量将变为全局变量。在函数范围之外使用时，不一定需要，但是，使用在函数中定义的全局定义变量会导致不可预测的结果。

“在这些情况下未能声明变量很可能会导致意外结果。因此，在 ECMAScript 5 严格模式下，为函数内未声明的变量赋值会引发错误。” - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T07:25:44.463

You are correct. Variable without a var declaration is treated as global. If you are in a browser, that scope is `window`

Also note that Javascript variables are function-scoped. Meaning if you have a code like this:

```
function test()
{
   for (var key in someObject)
   {
      var foo = 'bar';
   }
} 
```

It is equivalent to this:

```
function test()
{
   var foo, key;
   for (key in someObject)
   {
      foo = 'bar';
   }
} 
```

It doesn't matter which block the `var` declaration is placed in, the actual declaration happens at the beginning of the function. This is also called `variable hoisting` if you want to google it.

Now about `Typescript`, I haven't had a chance to play with it. But I assume you can still do `var oTable;` right before you use the variable?

# php - 对我的 php 配置文件进行安全检查

> ID：13329333
> 
> 赞同：0
> 
> 时间：2012-11-11T07:19:17.600
> 
> 标签：php, security

我的根目录中有以下 config.php.inc 文件，我想知道将配置文件放入网站根目录是否安全，我的配置文件是否安全。

如果它不安全，我怎样才能让它更安全？

```
<?php 

    global $configVars;

    $configVars['online'] = false;  

    if(($_SERVER['SERVER_NAME'])!='localhost' and ($_SERVER['SERVER_NAME'])!='abc')
    {
$configVars['dbhost']       = "localhost";          // Database host address //
$configVars['dbuser']       = "dbuser";   // Database user name     //  
$configVars['dbpassword']   = "bq;^4";        // Database password     //
$configVars['dbname']       = "dbname";  // Database name         //
$configVars['dbport']       = 3306;             // Database port         //

    define('SERVER_NAME', 'http://sitesurl/');
    define("SITE_ABSOLUTE_PATH", SERVER_NAME."");

} else {

    $configVars['dbhost']       = "localhost";          // Database host address //
    $configVars['dbuser']       = "root";              // Database user name    //  
    $configVars['dbpassword']   = "";                 // Database password     //
    $configVars['dbname']       = "localdb";     // Database name         //
    $configVars['dbport']       = 3306;             // Database port         //

    ////////// Define Variables
    define('SERVER_NAME', 'http://localhost');
    define("SITE_ABSOLUTE_PATH", SERVER_NAME."/site/");
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:27:55.377

无需在配置文件中进行安全检查。最终用户或黑客无法访问此文件中的内容。

当一些人破解您的脚本并下载配置文件或以任何其他方式获取其内容时，问题就出现了。

谢谢

# ruby-on-rails - Heroku NameError（未初始化的常量 ApplicationController::ADMIN_ID）

> ID：13329336
> 
> 赞同：0
> 
> 时间：2012-11-11T07:19:50.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我正在制作一个简单的博客来学习 Rails。

一切都快完成了，我正在尝试应用 HTTP 身份验证，如此处所述 --> [http://berk.es/2011/03/29/simplest-authentication-in-rails-basic-authentication-with-a -logged_in-helper/](http://berk.es/2011/03/29/simplest-authentication-in-rails-basic-authentication-with-a-logged_in-helper/)

我的身份验证代码在 ApplicationController 中如下所示

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  protected
    def authenticate
      authenticate_or_request_with_http_basic do |username, password|
        username == ADMIN_ID && password == ADMIN_PASSWORD
      end
    end
end 
```

但是，我不想在我的文件中传递变量，而是想通过 heroku 传递它。所以我跑了-->

```
heroku config:add ADMIN_ID=myusername
heroku config:add ADMIN_PASSWORD=mypassword 
```

当我尝试登录时，虽然我收到“出现问题”消息。这是heroku日志所说的：

```
GET fast-chamber-1998.herokuapp.com/admin dyno=web.1 queue=0 wait=0ms service=10ms status=500 bytes=643
2012-11-11T07:18:47+00:00 app[web.1]: 
2012-11-11T07:18:47+00:00 app[web.1]: 
2012-11-11T07:18:47+00:00 app[web.1]: Started GET "/admin" for 60.245.65.132 at 2012-11-11 07:18:47 +0000
2012-11-11T07:18:47+00:00 app[web.1]: Processing by PostsController#admin as HTML
2012-11-11T07:18:47+00:00 app[web.1]: Completed 500 Internal Server Error in 1ms
2012-11-11T07:18:47+00:00 app[web.1]: 
2012-11-11T07:18:47+00:00 app[web.1]: NameError (uninitialized constant ApplicationController::ADMIN_ID):
2012-11-11T07:18:47+00:00 app[web.1]:   app/controllers/application_controller.rb:7:in `block in authenticate'
2012-11-11T07:18:47+00:00 app[web.1]:   app/controllers/application_controller.rb:6:in `authenticate'
2012-11-11T07:18:47+00:00 app[web.1]: 
2012-11-11T07:18:47+00:00 app[web.1]: 
```

从外观上看，我认为我传递的环境变量似乎没有被检测到。你建议我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:34:12.127

您应该以`ENV['ADMIN_ID']`和`ENV['ADMIN_PASSWORD']`

# algorithm - 快速船体最坏情况说明

> ID：13329345
> 
> 赞同：5
> 
> 时间：2012-11-11T07:21:15.027
> 
> 标签：algorithm, recursion

快速船体最坏的情况是什么？以及我们如何知道这是我与快速船体算法混淆的最坏情况。实际上，我理解的是，求三角形面积的行列式，如果面积为正，则该点位于极值点的左侧。并且递归地做这件事，将有 O(n) 的效率来构建一个船体。那我就不明白了，有时提到如何提高效率是O(nlogn)和)(n^2)？在哪些情况下会产生这种效率以及如何产生这种效率？如果有人可以通过一些特定的例子提供帮助；那将是很大的帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-22T11:22:28.713

恐怕接受的答案**不**正确。

事实上，上面的情况就是*O(n log n)*的情况。只看递归树。在每个步骤中，您将点集切割成两个大致相等的子集。因此递归树的高度为*O(log n)*，导致总运行时间为*O(n log n)*。

更准确地说：quickhull 算法的递推关系是*T(n) = T(a * n) + T(b * n) + c*n*。最后一项 ( *c*n* ) 表示对枢轴元素的搜索。在上面构造的情况下，常数*a*和*b*是*a = b = 1/2*。您可以使用主定理来确定*O(n log n)*的界限。

最坏的情况*O(n ² )*是*a*n ≈ n-1*和*b*n ≈ 1*。您可以通过使用以下规则（在极坐标中）在圆的边界上放置点来构造它：*P [i] = (r, π / 2 ^i )*。有了这组点，枢轴元素将始终是最左边的点，因此该组被分成一个包含 n-1 个点的子集和一个空子集。因此，在递归的每一步中，您只需“消除”一个点（枢轴元素）。因此，递归树的高度为*O(n)*，导致整体效率为*O(n ² )*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-15T00:02:42.907

[这是John's answer](https://stackoverflow.com/a/14457421/77567)的动画演示，展示了如何在每一步中只删除一个点：

[![演示](../Images/7f07e602838b673355d586eabe8d8e9e.png)](https://i.stack.imgur.com/hNAYc.gif)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-11T07:32:37.397

QuickHull 是一种快速算法，因为在其中一个步骤中，您消除了位于三角形内**的一堆点。**QuickHull 的步骤是：

1.  您选择最右边和最左边的点并在它们之间画一条线
2.  你找到离你的线最远的点
3.  你在这三个点之间画一个三角形
4.  您消除三角形内的点并返回第 2 步。

当您的点随机放置在平面上时就是这种情况，但有些情况下点分布很差，您无法在任何给定步骤中消除它们中的任何一个。其中一种情况是当点在**圆**的边界内时：

![在此处输入图像描述](../Images/6a0e3825fc03e1c0255ba4ff204ce4f0.png)

如您所见，当发生这种情况时，在上述算法的第 4 步中，您根本没有消除任何点。这就是为什么在最坏的情况下 QuickHull 是`O(n^2)`.

# c# - FolderBrowserDialog 正在自动关闭我的 C# 应用程序

> ID：13329346
> 
> 赞同：1
> 
> 时间：2012-11-11T07:21:19.293
> 
> 标签：c#, .net, winforms, folderbrowserdialog

我正在 Visual C# Express 2010 中开发我的 C# 应用程序，当我打开 FolderBrowserDialog 时，它打开得很好，而且我还可以获得文件夹名称和文件。

同一个应用程序（我也没有更改任何一行代码），我在 Visual Studio 2010 Ultimate 中打开。在调试应用程序时，我没有遇到任何问题。

但是，在通过应用程序打开 FolderBrowserDialog 时（单击单选按钮时），应用程序自动关闭而没有任何错误（我在 try-catch 本身中有代码。甚至没有出现任何异常）。

这是我关闭应用程序的简单代码：

```
DialogResult getFolderDialogResult = folderBrowserDialog1.ShowDialog(); 
```

在评论上述内容时，应用程序未关闭。

注意：我只是在调用 folderBrowserDialog 之前添加了 openFileDialog，我想知道它工作正常。

```
openFileDialog1.ShowDialog();
DialogResult getFolderDialogResult = folderBrowserDialog1.ShowDialog(); 
```

另一个注意事项：我已经创建了新项目并尝试了 FolderBrowserDialog。它工作正常:(

我的代码：

```
 try
        {
            MessageBox.Show("Select Folder Radio Button CLicked", "Radio Button", MessageBoxButtons.OK);
            string[] getFilesList = null;
            listBoxSelectSheetsMFR.DataSource = getFilesList;

            if (listBoxSelectSheetsMFR.Items.Count > 0)
            {
                listBoxSelectSheetsMFR.Items.Clear();
            }

            String tempString = "";
            ArrayList onlyFileNames = new ArrayList();
            String invalidFormat = "No";
            String folderPath = "";
            //Open Folder Selection Dialog
            DialogResult getFolderDialogResult = folderBrowserDialog1.ShowDialog();

            if (getFolderDialogResult == DialogResult.OK)
            {
                folderPath = folderBrowserDialog1.SelectedPath;
                MessageBox.Show(folderPath, "Folder Path", MessageBoxButtons.OK);

                //Get All Files
                getFilesList = Directory.GetFiles(folderPath);

                for (int i = 0; i < getFilesList.Length; i++)
                {
                    if (!Path.GetExtension(getFilesList[i].ToString()).Equals(".xls"))
                    {
                        invalidFormat = "Yes";
                    }
                }

                if (invalidFormat.Equals("No"))
                {
                    panelSelectSheetsMFR.Visible = true;

                    //Enable the ListBox and load the filenames
                    for (int i = 0; i < getFilesList.Length; i++)
                    {
                        tempString = getFilesList[i].ToString().Replace(folderPath + "\\", "");
                        onlyFileNames.Add(tempString.Replace(".xls", ""));
                    }

                    //Adding Items into ListBox
                    listBoxSelectSheetsMFR.DataSource = onlyFileNames;
                }
                else
                {
                    MessageBox.Show("One of file is having invalid Format. Please make sure all files \nshould be .xls format.", "Format Error", MessageBoxButtons.OK);
                }
            }
            MessageBox.Show(getFilesList.Length.ToString(), "# of Files", MessageBoxButtons.OK);
        }
        catch (Exception selectFolderExMsg)
        {
            MessageBox.Show(selectFolderExMsg.ToString(), "selectFolderRadioButtonFN", MessageBoxButtons.OK);
        } 
```

# mysql - 如何使用 MySQL 制作 Rails 应用程序？

> ID：13329348
> 
> 赞同：0
> 
> 时间：2012-11-11T07:21:40.480
> 
> 标签：mysql, ruby-on-rails, sqlite

要使用 MySQL 制作 Rails 应用程序，我执行以下操作：

```
rails new application -database=mysql 
```

但这不起作用，而是给了我的 SQLite。我不想要 SQLite，我想要 MySQL。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T20:23:55.773

我认为您正在查看在 database.yml 中使用 mysql 配置创建新 Rails 应用程序的命令

```
rails new app --database mysql 
```

我希望它能回答你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-13T09:52:38.753

首先你需要在你的系统中安装mysql2

```
sudo  gem install mysql2 -v=0.2.11 
```

安装 mysql2 后，您就可以创建一个默认使用 Mysql 的新应用了

```
rails new sample_app -d mysql 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T07:30:27.087

如果您使用捆绑器，那么您应该添加

```
gem "mysql2" 
```

到您的 Gemfile 并运行

```
bundle install 
```

然后在 config/database.yml 中指定您的数据库设置

# codeigniter - 将类别列表移动到产品视图中

> ID：13329349
> 
> 赞同：0
> 
> 时间：2012-11-11T07:21:50.870
> 
> 标签：codeigniter, codeigniter-2

这是示例控制器

```
public function products()
    {
           $category['catlist']=$this->usermodel->catlist();
           $this->load->view('admin/products',$category);

    } 
```

这是模型

```
public function catlist()
    {
        $query=$this->db->get('category');
        if($query->num_rows()>0)
        {
            return $query->result();
        }
        else
        {
            return null;
        }
    } 
```

这是视图

```
 <select name="categoryname">
                    <?php 
                    foreach($catlist as $categorylist)
                    {
                    ?>
                    <option><?php echo $categorylist->categoryname;?> </option>
                    <?php 
                    }
                    ?>
                </select> 
```

我想显示类别列表，但收到如下错误

> 消息：未定义变量：catlist
> 
> 消息：为 foreach() 提供的参数无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:29:11.787

```
if (is_array($catlist))
{
    foreach ($catlist  as $categorylist){
        ...
    }
} 
```

原因是当你没有任何东西可以开始时，你不会分配一个空数组。

# android - 将 jar 文档添加到 Eclipse

> ID：13329350
> 
> 赞同：2
> 
> 时间：2012-11-11T07:21:57.493
> 
> 标签：android, eclipse, robotium

我下载了[Robotium](http://code.google.com/p/robotium/) jar 以及 javadoc jar 文件。然后我创建了一个名为 libs 的文件夹并将两个 jar 粘贴到其中。我转到属性，库选项卡并添加 jar 并在我的 libs 目录中选择了主 jar。然后我尝试将 javadoc.jar 添加到 javadoc 位置。它仍然没有向我显示任何文档。有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-04T13:49:27.243

请按照以下步骤操作：

1.  在您的项目文件夹中创建“robotium”目录
2.  将“robotium-solo-4.x.jar”和“robotium-solo-4.x-javadoc.jar”放到新创建的“robotium”目录中
3.  转到项目 -> 属性 -> Java 构建路径 -> 选项卡库，单击右侧的“添加 JAR...”按钮并选择“robotium-solo-4.x.jar”
4.  展开库选项卡上的“robotium-solo-4.x.jar”项，双击“Javadoc location: (None)”，选择“Javadoc in archive”和“Workspace file”并选择“robotium-solo-4.x- javadoc.jar”用于“存档路径”参数。单击确定。
5.  切换到“订购和导出”并检查“robotium-solo-4.x.jar”行
6.  你完成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T19:59:59.270

是的。转到**属性**-> **Java构建路径**->选择选项卡**顺序和导出**->在列表中选择**Robotium-solo-3.6.jar-** >单击**顶部**按钮->**确定**

# html - CSS 和 firefox 的问题有时是 safari

> ID：13329353
> 
> 赞同：0
> 
> 时间：2012-11-11T07:22:32.087
> 
> 标签：html, css

我开始布局一个网站，我在 firefox 中遇到问题，主要是有时在 safari 中遇到问题，具体取决于条件，例如在 safari 中，如果我通过在地址栏中键入它来加载页面，它将在中间显示搜索 div标题边框，但是如果我再次突出显示地址栏并按 Enter 键，它会正确显示，如果在所有内容正确显示后单击刷新，它将导致搜索框位于标题边框的中间，并且登录 div 也会消失。一切都在 chrome 中运行良好。在 Firefox 中，提交按钮位于文本输入字段下方，无论我做什么，它似乎都留在那里。我的代码在这里[http://jsfiddle.net/ES2Mz/](http://jsfiddle.net/ES2Mz/)和下面：

```
<html>
    <head>
        <title>
        TESTING!    
        </title>
        <LINK href="CLLProfile.css" rel="stylesheet" type="text/css">
    </head>

    <body>

        <div class="container">

            <div id="header">
                <img src="http://www.placekitten.com/400/100">

                <div class="login"> 
                    <a href="http://www.signup.com">Sign Up</a> <a href="http://www.login.com">Login</a>
                </div>

                <div class="search">
                    <form id ="search" action="" method="post" enctype="multipart/form-data">
                        <label>Search:</label>
                        <input type="text" name="searchBox" id="searchBox" /> <input type="submit" id="Submit" value="Submit" />
                    </form> 
                </div>

            </div>

                <div class="content">
                    Here is the CONTENT 
                    <div class="profileInfo">
                        PROFILE INFO
                    </div>
                </div>

        </div>

    </body>

</html>​ 
```

CSS

```
body{
    background: gainsboro;

}

.container{
    padding-top: 20px;
    background: gold;
    width: 900px;
    height: 1300px;
    margin: 0 auto;

}

.content {
    background: #aad500;
    width: 800px;
    height: 1100px;
    margin: 0 auto;
    border: black solid medium;
}

#header {

    width: 800px;
    height: 150px;
    margin: 0 auto;
    background: #aad500;
    border: black solid medium;

}

#header img{
    position: relative;
    left: 50px;
    top: 25px;

}

.login {
    width: 350px;
    height: 35px;
    float: right;
    background: #aad500;
}

.search{
    background: #aad500;
    color: white;
    width: 250px;
    height: 20px;
    position: relative;
    margin-top: 10px;
    margin-left: 550px;
}

.profileInfo{
    background: whitesmoke;
    width: 750px;
    height: 800px;
    margin-top: 50px;
    margin-left: auto;
    margin-right: auto;

}

.login a{
    float: right;
    margin-left: 10px;
    margin-right: 20px;
    margin-top: 5px;
    font-size: large;
    color: whitesmoke;

}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:03:28.223

我解决了我忘了添加`<!DOCTYPE>`

# python - Flask、mod_wsgi 和 Apache：ImportError

> ID：13329354
> 
> 赞同：8
> 
> 时间：2012-11-11T07:22:36.690
> 
> 标签：python, apache, flask, mod-wsgi

我在我的错误日志中得到了这个：

> ImportError：没有名为flask的模块

它看起来与[Django + mod_wsgi + apache: ImportError at / No module named djproj.urls](https://stackoverflow.com/questions/5841531/django-mod-wsgi-apache-importerror-at-no-module-named-djproj-urls)完全一样，但我尝试了该解决方案，但它似乎不起作用......我正确地将应用程序主文件夹和父文件夹插入到系统路径，但这个错误仍然出现。

导航到我的页面仍然会显示 500 页。

更多信息：我正在使用[Amazon EC2](http://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud)免费套餐，Apache 采用 httpd 的形式。一切都安装正确，我很确定......

这是我的东西（应用程序名称*badassery*和应用程序主文件夹名称*hatmail* - 我改变了很多想法）：

错误日志

```
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148] mod_wsgi (pid=28143): Target WSGI script '/home/ec2-user/hatemail/badassery.wsgi' cannot be loaded as Python module.
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148] mod_wsgi (pid=28143): Exception occurred processing WSGI script '/home/ec2-user/hatemail/badassery.wsgi'.
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148] Traceback (most recent call last):
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148]   File "/home/ec2-user/hatemail/badassery.wsgi", line 6, in <module>
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148]     from badassery import app as application
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148]   File "/home/ec2-user/hatemail/badassery.py", line 6, in <module>
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148]     from flask import Flask, request, session, url_for, redirect, render_template, abort, g, flash, _app_ctx_stack
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148] ImportError: No module named flask
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148] mod_wsgi (pid=28143): Target WSGI script '/home/ec2-user/hatemail/badassery.wsgi' cannot be loaded as Python module.
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148] mod_wsgi (pid=28143): Exception occurred processing WSGI script '/home/ec2-user/hatemail/badassery.wsgi'.
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148] Traceback (most recent call last):
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148]   File "/home/ec2-user/hatemail/badassery.wsgi", line 6, in <module>
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148]     from badassery import app as application
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148]   File "/home/ec2-user/hatemail/badassery.py", line 6, in <module>
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148]     from flask import Flask, request, session, url_for, redirect, render_template, abort, g, flash, _app_ctx_stack
[Sun Nov 11 07:14:45 2012] [error] [client 18.189.71.148] ImportError: No module named flask 
```

### 坏蛋.wsgi

```
import sys

sys.path.insert(0,'/home/ec2-user/hatemail')
sys.path.insert(1,'/home/ec2-user')

from badassery import app as application 
```

httpd.conf 文件的补充

```
WSGISocketPrefix /var/run/wsgi

<VirtualHost *:80>
        ServerName 54.243.61.41
        DocumentRoot "/home/ec2-user/hatemail"

        WSGIDaemonProcess badassery user=apache group=apache processes=1 threads=5
        WSGIScriptAlias / /home/ec2-user/hatemail/badassery.wsgi
        WSGIScriptReloading On

        <Directory /home/ec2-user/hatemail>
                WSGIProcessGroup badassery
                WSGIApplicationGroup %{GLOBAL}
                Order deny,allow
                Allow from all
        </Directory>
</VirtualHost> 
```

目录结构

```
~
    hatemail
        badassery.py
        badassery.wsgi
        Procfile
        README
        requirements.txt
        schema.sql
        static/
        templates/
        venv/bin/activate 
```

是的，我正在做“if **name** == 'main': app.run()”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T19:00:53.063

如果你正在部署一个 virtualenv，你必须确保首先激活它。您应该像这样更新您的 wsgi 文件（更新值以匹配您的环境）：

```
activate_this = '/path/to/virtualenv/bin/activate_this.py'
execfile(activate_this, dict(__file__=activate_this)

import sys
sys.path.insert(0, '/path/to/flask/appname')
sys.path.insert(0,'/home/ec2-user/hatemail')
sys.path.insert(1,'/home/ec2-user')

from badassery import app as application 
```

如果你没有部署 virtualenv，你可能只需要确保你的系统上安装了 Flask。如果您已经安装`setuptools`，您可以：

```
easy_install flask 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T12:52:35.200

如果您在使用时遇到任何导入问题`wsgi_mod`，请确保您尝试明确指向导致问题的导入文件：

```
sys.path.append('/home/foo/www/Forms') 
```

然后进行导入！

# ios - iOS .pch 文件获取错误：“无效的预处理指令”

> ID：13329355
> 
> 赞同：0
> 
> 时间：2012-11-11T07:23:18.773
> 
> 标签：ios

我的 .pch 文件：

```
 #ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #improt "Constant.h" // here there is a error: 
 #endif 
```

line : #improt "Constant.h" 获取错误

```
Invalid preprocessing directive 
```

有什么事？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T07:26:07.427

使用“ `#import`”而不是“ `#improt`”，你应该没问题。

“无效的预处理指令”只是“语法”（或拼写）错误的另一种说法。

# python - ExtractSURF 总是返回相同的方向

> ID：13329357
> 
> 赞同：0
> 
> 时间：2012-11-11T07:23:33.003
> 
> 标签：python, opencv, computer-vision

我只是想开始学习 OpenCV。我的理解是 ExtractSURF 应该返回 0 到 360 之间的角度。出于某种原因，关键点总是为我返回 90 的方向。任何想法为什么？

这段代码：

```
import cv
image = cv.LoadImageM('lena.bmp', cv.CV_LOAD_IMAGE_GRAYSCALE)
(keypoints, descriptors) = cv.ExtractSURF(image, None, cv.CreateMemStorage(), (0, 6000, 1, 3))
for keypoint in keypoints:
    ((x, y), laplacian, size, dir, hessian) = keypoint
    print "x=%d y=%d laplacian=%d size=%f dir=%f hessian=%f" % (x, y, laplacian, size, dir, hessian) 
```

返回

```
x=345 y=201 laplacian=1 size=22.000000 dir=90.000000 hessian=6674.604492
x=82 y=270 laplacian=-1 size=18.000000 dir=90.000000 hessian=7615.113770
x=90 y=278 laplacian=-1 size=15.000000 dir=90.000000 hessian=12525.487305
x=112 y=254 laplacian=1 size=22.000000 dir=90.000000 hessian=8894.154297
x=273 y=274 laplacian=-1 size=24.000000 dir=90.000000 hessian=16313.005859
x=154 y=319 laplacian=-1 size=15.000000 dir=90.000000 hessian=9818.360352
x=172 y=333 laplacian=-1 size=26.000000 dir=90.000000 hessian=8314.745117
x=137 y=386 laplacian=-1 size=15.000000 dir=90.000000 hessian=9148.833984
x=140 y=363 laplacian=-1 size=22.000000 dir=90.000000 hessian=7735.985840 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:50:43.053

您缺少`_upright`参数，该参数告诉 OpenCV 是否计算角度。所以我假设如果你不指定 OpenCV 决定只返回 90 度。我不记得是否有办法在旧`cv`界面中指定它。然而，在较新的`cv2`界面中，这很容易：

```
import cv2 
```

指定所需的 SURF 参数：

```
surf_params = {"_hessianThreshold":1000,
 "_nOctaves":4, 
"_nOctaveLayers":2, 
"_extended":1, 
"_upright":0} 
```

请注意，传递`upright`as`1`将始终返回角度`90`。

构造 SURF 对象并读取图像：

```
surf = cv2.SURF(**surf_params)
image = cv2.imread('img.jpg', cv2.CV_LOAD_IMAGE_GRAYSCALE)
(keypoints, descriptors) = surf.detect(image, mask=None, useProvidedKeypoints=False)

for keypoint in keypoints:
    x,y = keypoint.pt
    size = keypoint.size 
    orientation = keypoint.angle
    response = keypoint.response 
    octave = keypoint.octave
    class_id = keypoint.class_id
    print (x,y), size, orientation 
```

（x，y），大小，方向返回的示例：（我使用的是不同的图像）

```
(523.3077392578125, 933.419189453125) 156.0 199.023590088
(1417.82470703125, 957.7914428710938) 166.0 127.772354126
(1398.8065185546875, 971.0693359375) 165.0 126.83026123
(1009.0242309570312, 1032.0604248046875) 176.0 164.367050171 
```

就是这样。`cv2`这是我总是建议人们切换到较新界面的众多原因之一。自从我进行了切换，我就不必再处理诸如缺少参数之类的事情了。

我希望这可以帮助你！

# xcode - 表格单元格标签大小

> ID：13329363
> 
> 赞同：0
> 
> 时间：2012-11-11T07:24:02.520
> 
> 标签：xcode, uitableview

我有一个 UITable 我正在扩展以显示“更多信息”文本。我遇到的问题是文本可以有不同的大小，即 indexpath.section1 可能是 1200 高，而 index path.section2 是 300 高。

在重新使用单元格之前，我的代码工作正常，标签框的大小没有针对新标签进行调整。因此，尽管单元格的大小正确，但该单元格内的标签仍然具有原始大小的框架，所以如果它太小，文本会被截断，我会得到大量空白，如果它太大，那么除非我滚动到，否则我看不到文本场的中间。

我究竟做错了什么？？请问有什么帮助吗？？

这是我的代码：-

```
 static NSUInteger const k1 = 1;

            // Declare references to the subviews which will display the data.
            UILabel *lbl1 = nil;

            static NSString *kCellID = @"CellID";

            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];
            if (cell == nil) {
                cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID];

                if ((indexPath.section == 8) || (indexPath.section == 9) || (indexPath.section == 10) || (indexPath.section == 11) || (indexPath.section == 12) || (indexPath.section == 13) || (indexPath.section == 14)|| (indexPath.section == 15) || (indexPath.section == 16))
                {
                    lbl1 = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, 290, 200)];
                }

                else if ((indexPath.section == 4) || (indexPath.section == 5))
                {
                    lbl1 = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, 290, 1200)];
                }
                lbl1.font = [UIFont fontWithName:@"Trebuchet MS" size:12.0f];
                lbl1.tag = k1;
                lbl1.textColor = [UIColor blackColor];
                lbl1.backgroundColor = [UIColor clearColor];
                lbl1.highlightedTextColor = [UIColor whiteColor];
                lbl1.opaque = NO;
                lbl1.adjustsFontSizeToFitWidth = TRUE;
                lbl1.numberOfLines = 0;

                lbl1.lineBreakMode = UILineBreakModeWordWrap;
                [cell.contentView addSubview:lbl1];

            } else {
                lbl1 = (UILabel *)[cell.contentView viewWithTag:k1];
            }

            cell.accessoryView.tag = indexPath.row;

            lbl1.text = [NSString stringWithFormat:@"%@", cellValue];

            return cell;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:37:00.350

您需要在标签上设置自动调整大小的掩码。这将导致它在调整其父视图大小时调整大小。适当的设置是：

```
lbl1.autoresizingMask = UIViewAutoresizingFlexibleHeight; 
```

# java - spring mvc 控制器错误 java.lang.IllegalStateException：没有合适的参数解析器 [0]

> ID：13329365
> 
> 赞同：3
> 
> 时间：2012-11-11T07:24:34.780
> 
> 标签：java, hibernate, spring-mvc

代码给出错误

> java.lang.IllegalStateException：参数 [0][type=org.jopenclass.form.Course] 没有合适的解析器

It sends a JSON response to an ajax call. I use hibernate to persist the objects.

```
 @RequestMapping(value = "/savecourse", method = RequestMethod.POST)
public @ResponseBody
Object saveLecturer(@Valid @ModelAttribute(value = "course") Course course,
        BindingResult result) {

    Map<String, Object> response = new HashMap<String, Object>();

    if (result.hasErrors()) {
        List<ObjectError> results = result.getAllErrors();
        for (ObjectError objectError : results) {
            System.out.println(objectError.getDefaultMessage());
        }
        response.put("message", "Could not add the Course to the system.");
    } else {
        try {
            course.setId(courseDao.saveCourse(course));//returns the id
            response.put("course", course);

        } catch (Exception e) {
            System.out.println(e);

        }
    }

    return response;
} 
```

But when I create a new object and copy the parameters to the other object, it works fine. The second method(Not a good method of course) works well. All the parameters in the request object are set to the cse object as well.

```
 @RequestMapping(value = "/savecourse", method = RequestMethod.POST)
public @ResponseBody
Object saveLecturer(@Valid @ModelAttribute(value = "course") Course course,
        BindingResult result) {

    Map<String, Object> response = new HashMap<String, Object>();

    if (result.hasErrors()) {
        List<ObjectError> results = result.getAllErrors();
        for (ObjectError objectError : results) {
            System.out.println(objectError.getDefaultMessage());
        }
        response.put("message", "Could not add the Course to the system.");
    } else {
        try {
            course.setId(courseDao.saveCourse(course));//returns the id
            Course cse = new Course();
            cse.setId(course.getId());
            cse.setCourseName(course.getCourseName());
            cse.setFee(course.getFee());
            Lecturer lec = new Lecturer();
            lec.setId(course.getLecturer().getId());
            lec.setFirstName(course.getLecturer().getFirstName());
            lec.setLastName(course.getLecturer().getLastName());
            cse.setLecturer(lec);
            cse.setGrade(course.getGrade());
            response.put("course", cse);

        } catch (Exception e) {
            System.out.println(e);

        }
    }

    return response;
} 
```

What is wrong in the first method?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:31:38.247

在第一种情况下，杰克逊无法反序列化您的响应。我建议将您的返回类型更改为`Map<String, ? extends object>` 让我们知道问题是否仍然存在

# entity-framework - 同一个主键表的多个外键

> ID：13329369
> 
> 赞同：4
> 
> 时间：2012-11-11T07:25:31.813
> 
> 标签：entity-framework

我有一个包含多个字段的表，这些字段是另一个表中主键的外键。例如 ：

```
Fixture Id (PK)
HomeTeamId (FK to Team.TeamId)
AwayTeamId (FK to Team.TeamId)
HomeTeamCoachId (FK to Coach.CoachId)
AwayTeamCoachId (FK to Coach.CoachId) 
```

使用 FixtureId 的外键将此数据分成 2 个表 HomeTeam 和 AwayTeam 会更好吗？这是当前由 Entity Framework 生成的：

```
FixtureId PK
HomeTeamId int
AwayTeamId int
HomeTeamCoachId int
AwayTeamCoachId int
AwayTeam_TeamId FK
HomeTeam_TeamId FK
AwayTeamCoach_CoachId FK
HomeTeamCoach_CoachId FK 
```

这是通过此类生成的：

```
public partial class Fixture
{
    public int FixtureId { get; set; }

    //foreign key
    public int AwayTeamId { get; set; }
    //navigation properties
    public virtual Team AwayTeam { get; set; }

    //foreign key
    public int HomeTeamId { get; set; }
    //navigation properties
    public virtual Team HomeTeam { get; set; }

    //foreign key
    public int AwayCoachId { get; set; }
    //navigation properties
    public virtual Coach AwayCoach { get; set; }

    //foreign key
    public int HomeCoachId { get; set; }
    //navigation properties
    public virtual Coach HomeCoach { get; set; }
} 
```

谁能告诉我这是否是正确的方法？

编辑：回复 Slauma

所以我的课基本上是这样的？或者 OnModelCreating 中的配置是否意味着我的 Fixture 类中不需要一些与外键相关的代码？

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // Entity Type Configuration
        modelBuilder.Configurations.Add(new TeamConfiguration());
        modelBuilder.Configurations.Add(new CoachConfiguration());
        modelBuilder.Configurations.Add(new FixtureConfiguration());

        modelBuilder.Entity<Fixture>()
            .HasRequired(f => f.AwayTeam)
            .WithMany()
            .HasForeignKey(f => f.AwayTeamId)
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<Fixture>()
            .HasRequired(f => f.HomeTeam)
            .WithMany()
            .HasForeignKey(f => f.HomeTeamId)
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<Fixture>()
            .HasRequired(f => f.AwayCoach)
            .WithMany()
            .HasForeignKey(f => f.AwayCoachId)
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<Fixture>()
            .HasRequired(f => f.HomeCoach)
            .WithMany()
            .HasForeignKey(f => f.HomeCoachId)
            .WillCascadeOnDelete(false);
    }

public partial class Fixture
{
    public int FixtureId { get; set; }
    public string Season { get; set; }
    public byte Week { get; set; }

    //foreign key
    public int AwayTeamId { get; set; }
    //navigation properties
    public virtual Team AwayTeam { get; set; }

    //foreign key
    public int HomeTeamId { get; set; }
    //navigation properties
    public virtual Team HomeTeam { get; set; }

    //foreign key
    public int AwayCoachId { get; set; }
    //navigation properties
    public virtual Coach AwayCoach { get; set; }

    //foreign key
    public int HomeCoachId { get; set; }
    //navigation properties
    public virtual Coach HomeCoach { get; set; }

    public byte AwayTeamScore { get; set; }
    public byte HomeTeamScore { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T14:45:59.970

显然 EF 没有检测到您的`int`属性，例如`AwayTeamId`导航属性的外键，`AwayTeam`因为其中的主键属性`Team`is not `Id`but `TeamId`。`AwayTeamTeamId`如果 FK 被命名为 like或者主键属性`Team`是否具有 name ，它可能会检测到 FK `Id`。

如果您不想根据 EF 约定更改这些属性名称，您可以使用数据注释定义 FK：

```
[ForeignKey("AwayTeam")]
public int AwayTeamId { get; set; }
public virtual Team AwayTeam { get; set; }

// the same for the other three FKs 
```

或流利的 API：

```
modelBuilder.Entity<Fixture>()
    .HasRequired(f => f.AwayTeam)
    .WithMany()
    .HasForeignKey(f => f.AwayTeamId)
    .WillCascadeOnDelete(false);

// the same for the other three FKs 
```

我已禁用级联删除，因为默认情况下它将为所需的关系启用。但是因为您与`Team`表（以及`Coach`表）有两个必需的关系，这将导致两个级联删除路径从`Fixture`to`Team`和`Coach`. `Fixture`SQL Server 中禁止使用多个级联删除路径，因此您必须对and`Team`之间（以及 and 之间`Fixture`）的两种关系中的至少一种禁用级联删除`Coach`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T05:07:46.000

我尝试过这种方式并工作

主键表

```
public class TravelCity
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int CityId { get; set; }
    public string CityName { get; set; }
    public string CityDesc { get; set; }
    public string Status { get; set; }
} 
```

具有外键的表

```
 public class TravelDetails
    {
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Int64 TravelId { get; set; }

    public Int32 FromLocation { get; set; }
    [ForeignKey("FromLocation"),InverseProperty("CityId")]
    public virtual TravelCity TravelCityFrom { get; set; }

    public Int32 ToLocation { get; set; }
    [ForeignKey("ToLocation"), InverseProperty("CityId")]
    public virtual TravelCity TravelCityTo { get; set; }

    public Int32 CurrentCity { get; set; }
    [ForeignKey("ToLocation"), InverseProperty("CityId")]
    public virtual TravelCity TravelCityCurrent{ get; set; }

} 
```

试试这种方式，它会很好地工作..干杯:)

# jquery - 是否可以将 Jquery mobile 和 Objective-C 结合起来？

> ID：13329381
> 
> 赞同：1
> 
> 时间：2012-11-11T07:28:31.673
> 
> 标签：jquery, objective-c

我已经使用 JQuery mobile 几天了，我注意到它很糟糕的一件事是列表很慢，没有应有的响应，而且它们往往有点生涩。

所以我的问题是，是否可以使用本机代码创建列表并将 JQuery mobile 用于其他不太擅长的领域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:34:17.063

我假设您正在编写 Web 应用程序，而不是本机应用程序？调用 iOS 中的本机列表，`UITableView`不，您不能在 Web 应用程序中使用它。

有一些方法可以提高 web 应用程序中动画的响应能力，例如使用 CSS 3D 过渡，我相信 jQuery mobile 已经处理了它。但性能永远无法与原生应用相媲美。

**更新：**如果您使用的是 PhoneGap，这同样适用，因为据我所知，它只是`UIWebView`本机应用程序内部的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:56:00.663

据我了解，您确实可以创建一个本地列表视图，或者您想要的任何类型的本地视图。只需在 Phonegap UIWebView 上显示此视图。或者也许调整 UIWebView 的大小并在下面显示 UITableView ......无论你想做什么！

我要说的是，是的，您可以创建任何您想要的本机功能。没有什么能阻止你。有一些方法可以让 Objective-C 和 Javascript 相互“对话”。

这样做是否是个好主意是另一个问题:)

我的Phonegap 应用程序的一部分是用Objective-C 编写的，通常是因为不可能用Javascript 构建应用程序的这一部分。例如电子邮件功能。

如果您查看 Phonegap 插件列表，就会发现有大量插件为 Phonegap 应用程序添加了一些本机功能。

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS](https://github.com/phonegap/phonegap-plugins/tree/master/iOS)

但是说了这么多，我个人认为将列表视图创建为本机控件并不是一个好主意。Phonegap 的重点是不要编写太多的 Objective-C :)

可以调整 jQuery Mobile 以使其更快。或者不要将 jQuery Mobile 用于该列表视图 - 您始终可以使用自定义 HTML+javascript 编写该部分，然后添加您自己的 CSS 触摸滚动内容...

# php - 使用 jQuery Ajax 获取单独的 PHP 变量

> ID：13329383
> 
> 赞同：2
> 
> 时间：2012-11-11T07:29:07.567
> 
> 标签：php, jquery, html, ajax, variables

我的**script.js**执行对**get_all.php**的请求，该请求具有三个要输出的变量 (echo `$all_categories`)`$all_brands`和`$all_filters`. 现在我想在我的**index.html**的三个不同区域中操作这些。

我想放置`$all_categories`在`<div id="caregories">`、和`$all_brands`中。`<div id="vrands">``$all_filtesr``<div id="filters">`

我怎样才能将它们分别放在每个`div`？我知道如何将所有这些放在一个中，`<div>`但不知道如何分别放置每个收到的变量。

**索引.php**

```
<?php // Startup ?>

<?php 

    define('APP_PATH', '../');
    define('SYS_PATH', '../system/');
    define('STYLES', 'assets/styles/');
    define('SCRIPTS', 'assets/scripts/');

    require_once SYS_PATH . 'initializers/all.php'; 

?>

<?php // Controller ?>

<?php

?>

<?php // Viewer ?>

<?php template('header'); ?>

<body>

<div id="static_menu">
    <ul>
        <li><a href="#categories">Categories</a></li>
        <li><a href="#brands">Brands</a></li>
        <li><a href="#filters">Filters</a></li>
        <li><a href="#social">Social</a></li>
    </ul>
</div>
<hr>
<div id="categories">
    <ul></ul>
</div>
<hr>
<div id="brands">
    <ul></ul>
</div>
<hr>
<div id="filters">
    <ul></ul>
</div>
<hr>
<div id="social">
    <ul></ul>
</div>
<hr>

</body>

<?php template('footer'); ?> 
```

**脚本.js**

```
// DOM ready
$(function(){

    // get categories, brands, filters and social
    $.ajax({
        type: "POST",
        url: "get_all.php"
    }).done(function(data){
        // manipulate recieved in three different divs
    })

}); 
```

**get_all.php**

```
<?php // Startup ?>

<?php 

    define('APP_PATH', '../');
    define('SYS_PATH', '../system/');
    define('STYLES', 'assets/styles/');
    define('SCRIPTS', 'assets/scripts/');

    require_once SYS_PATH . 'initializers/all.php'; 

?>

<?php // Controller ?>

<?php

$result_arr = $category->select_all();
$all_categories = $html->list_anchor_loop($result_arr, 'category');
echo $all_categories

$result_arr = $brand->select_all();
$all_brands = $html->list_anchor_loop($result_arr, 'brand');
echo $all_brands;

$result_arr = $filter->select_all();
$all_filters = $html->list_anchor_loop($result_arr, 'filter');
echo $all_filters; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T07:34:05.300

让您的 PHP 脚本将结果作为 JSON 对象发送（请参阅 参考资料[`json_encode`](http://php.net/manual/en/function.json-encode.php)）。

在您的 JS 中，您将收到一个对象，比如说`resp`，它将具有三个属性`resp.categories`，`resp.filters`和`resp.brands`

有关更多详细信息和特异性，请发布一些代码。

在`get_all.php`：

```
$result = array(
  'categories' => $all_categories,
  'brands' => $all_brands,
  'filters' => $all_filters
);

echo json_encode($result); 
```

在`script.js`

```
$.ajax({
    type: "POST",
    url: "get_all.php",
    dataType : 'json', //specify that data will be returned as JSON
}).done(function(data){
    // use data.categories, data.brands, data.filters here
    // manipulate recieved in three different divs
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T07:37:27.070

如果您的 ajax 调用通过[JSON](http://api.jquery.com/jQuery.getJSON/)返回，则很容易将数据插入到您需要的 div 中：

PHP

```
<?php
$return = array(
    'categories'=>$all_categories,
    'vrands'=>$all_brands,
    'filters'=>$all_filters
    );
echo $_GET['jsoncallback'].'('.json_encode($return).')';?> 
```

查询：

```
<script type="text/javascript">
$.getJSON("URL_TO_PHP?jsoncallback=?",{
    /*DATA TO SEND*/
    },function(response){
        $('#categories').html(response.categories);
        $('#vrands').html(response.vrands);
        $('#filters').html(response.filters);

});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:50:31.973

您可以使用自动执行此操作的库，例如[http://phery-php-ajax.net](http://phery-php-ajax.net) ，您可以直接从 PHP 传递 JSON 数据，同时仍按顺序操作 DOM。Phery 不适用于 URL，但可以使用函数回调，您可以从 PHP 本身内部分配给 DIV，例如您的情况：

```
<?php

Phery::instance()->set(array(
    'get_all' => function($data){
       /* globals, initialization, etc*/
       $r = new PheryResponse;
       $result_arr = $category->select_all();
       return 
         $r
         ->jquery('#categories')->html($html->list_anchor_loop($result_arr, 'category'))
         ->jquery('#filter')->html($html->list_anchor_loop($result_arr, 'filter'))
         ->jquery('#brand')->html($html->list_anchor_loop($result_arr, 'brand'));

    }
))->process(); 
```

`get_all`然后从您的 DOMReady调用该函数

```
$(function(){
  phery.remote('get_all');
}); 
```

完成，一切都为您完成，无需任何额外的客户端代码。

# java - 使用 Oracle 日期字段中的 cachedrowset 时如何获取整个日期和时间数据

> ID：13329391
> 
> 赞同：1
> 
> 时间：2012-11-11T07:31:22.063
> 
> 标签：java, oracle, jdbc, timestamp, cachedrowset

我从 oracle 获取带有结果集的数据，然后将它们填充到`cachedrowset`. 但是当我在数据库中获取一个日期字段并打印它时，它只打印日期。我检查了api并且知道`getDate()`方法返回`java.sql.date`，并且时间`sql.date`被强制转换为0。我测试如果我调用`resultset.getString("datefield")`它可以获取完整的日期和时间数据，那么有没有办法使用获取完整的日期和时间数据`cahcedrowset`，谢谢

这是我的源代码

```
 CachedRowSet rs = null;
    try {
    rs = executeQuery("select * from t_web_order_result ");
    if (rs != null && rs.next()) {
            KKLog.info(rs.getDate("stime"));//2012-04-24,it should be 2012-04-24 09:23:33
        KKLog.info(rs.getString("stime"));
    }
    } catch (SQLException e) {
        logErr("queryCheckers Err", e);
    } finally {
        closeCachedRowset(rs);
    } 
```

执行查询方法

```
 CachedRowSet rowset = null;
    Connection connection = null;
    PreparedStatement statement = null;
    ResultSet rs = null;
    try {
        connection = getConnection();
        statement = connection.prepareStatement(sql);
        for (int i = 0; i < params.length; i ++) {
            statement.setObject(i + 1, params[i]);
        }
        rs = statement.executeQuery();
        rowset = new CachedRowSetImpl();
        rowset.populate(rs);
        rs.close();
        statement.close();
    } finally {
         //close....            
    }
    return rowset; 
```

我用了三种方法打印日志

```
 KKLog.info(rs.getDate("stime"));
    KKLog.info(rs.getString("stime"));
    KKLog.info(rs.getTimestamp("stime")); 
```

日志内容是

```
 12-11-11 17:06:11 2012-04-24 
    12-11-11 17:06:11 2012-04-24 
    12-11-11 17:06:11 2012-04-24 00:00:00.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:12:16.077

如果要从数据库中获取日期和时间，则必须使用

```
KKLog.info(rs.getTimestamp("stime")) 
```

这将提供表格中的日期和时间，提供的日期和时间存储为`date`数据类型或`timestamp`. 另请注意，您必须使用`java.sql.Date`而不是`java.util.Date`.

**更新 1**

如果使用 cachedrowset，则有一些与从数据库获取时间部分相关的[错误。](http://www.blogjava.net/bing/archive/2009/12/09/jdbc_V8Compatible_timestamp_number_error_problem.html)

我尝试使用 CachedRowSet 并且缺少时间部分。为了解决此问题，请在数据库连接部分添加以下内容。我也可以看到时间部分。

```
 java.util.Properties prop = new java.util.Properties();
    prop.put("oracle.jdbc.V8Compatible", "true"); 
    prop.put("user", "user");
    prop.put("password", "password");
   Connection conn = 
  DriverManager.getConnection("jdbc:oracle:thin:@server:port:SID",prop); 
```

添加 `prop.put("oracle.jdbc.V8Compatible", "true");` 是解决此问题的关键。

我之前的日期和时间

```
2012-11-08 00:00:00 
```

添加后`V8Compatible`

```
2012-11-08 13:28:35 
```

希望这可以帮助

# haskell - 使用可能预期的 do 块中的编译错误

> ID：13329392
> 
> 赞同：0
> 
> 时间：2012-11-11T07:31:28.097
> 
> 标签：haskell, io, maybe

这是我的代码：

```
getMove :: Board -> Player -> IO (Maybe (Move, Board, Player))

completeUserTurn :: Player -> Board -> Maybe (IO (Board, Player))
completeUserTurn player board = do
    m <- getMove board player --error is here
    if isNothing m then
        Nothing
    else do
        let (move, updatedBoard, updatedPlayer) = fromJust m
        if isMoveValid board move then do
            continue <- prompt $ displayToUserForPlayer updatedBoard updatedPlayer ++ "\n" ++ "Is this correct? (y/n): "
            if continue == "y" then
                return (updatedBoard, updatedPlayer)
            else
                completeUserTurn player board
        else do
            putStr "Invalid Move!\n"
            completeUserTurn player board 
```

这是我得到的错误（在指示的行上）：

```
Couldn't match expected type `Maybe t0'
                with actual type `IO (Maybe (Move, Board, Player))'
    In the return type of a call of `getMove'
    In a stmt of a 'do' block: m <- getMove board player
    In the expression:
      do { m <- getMove board player;
           if isNothing m then
               Nothing
           else
               do { let ...;
                    .... } } 
```

怎么了？我虽然`<-`会做 IO 动作并将结果放在 m 中？为什么它期望一个`Maybe`then？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T08:44:30.780

## 一般建议

一旦你运行了一个`IO`操作，比如`getMove`你的函数必须有 type `IO ????`。任何与外界交互的东西都存在于 IO monad 中，所以你的函数必须有类型

```
completeUserTurn :: Player -> Board -> IO (Maybe (Board, Player)) 
```

不是

```
completeUserTurn :: Player -> Board -> Maybe (IO (Board, Player)) 
```

拥有类型的唯一方法`Maybe (IO ???)`是不实际执行任何 IO：

```
continue :: Bool -> Maybe (IO String)
continue False = Nothing
continue True = Just (putStrLn "Hooray! Please enter a string: " >> getLine) 
```

这个函数实际上并没有做，`getLine`也不是很有用，你可以通过做检查

```
if isNothing (continue True) then putStrLn "nope" else putStrLn "yes" 
```

在 ghci 中：它从不说万岁。更有用的是

```
continue :: Bool -> IO (Maybe String)
continue False = return Nothing
continue True = do
   putStrLn "Hooray! Please enter a string:\n"
   xs <- getLine
   return (Just xs) 
```

（尝试在 ghci 中`continue True`）`continue False`

这个实际上做 IO，所以它必须有 type `IO ???`。

## 你的代码

无论如何，您的功能最好表示为

```
completeUserTurn :: Player -> Board -> IO (Maybe (Board, Player)) -- new type
completeUserTurn player board = do
    m <- getMove board player 
    if isNothing m then
        return Nothing  -- edit #1
    else do
        let (move, updatedBoard, updatedPlayer) = fromJust m
        if isMoveValid board move then do
            continue <- prompt $ displayToUserForPlayer updatedBoard updatedPlayer ++ "\n" ++ "Is this correct? (y/n): "
            if continue == "y" then
                return $ Just (updatedBoard, updatedPlayer)  -- edit #2
            else
                completeUserTurn player board
        else do
            putStr "Invalid Move!\n"
            completeUserTurn player board 
```

**编辑#1**和**编辑#2**都是因为不可避免的类型更改为`IO (Maybe ??)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:55:40.817

`IO (Maybe a)`当然是一种很常见的类型，但是直接使用它很麻烦。但是，它等同于`MaybeT IO a`使用[`MaybeT`monad 转换](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-Maybe.html#v%3aMaybeT)器。这样，您的代码就变成了

```
import Control.Monad.Trans
import Control.Monad.Trans.Maybe

getMove' :: Board -> Player -> MaybeT IO (Move, Board, Player)
getMove' board = MaybeT . getMove board    -- with your original `getMove`

completeUserTurn :: Player -> Board -> MaybeT IO (Board, Player)
completeUserTurn player board = do
    (move, updatedBoard, updatedPlayer) <- getMove' board player
    if isMoveValid board move then do
        continue <- lift . prompt
             $ displayToUserForPlayer updatedBoard updatedPlayer ++ "\n"
                    ++ "Is this correct? (y/n): "
        if continue == "y" then
            return (updatedBoard, updatedPlayer)
        else
            completeUserTurn player board
    else do
        putStr "Invalid Move!\n"
        completeUserTurn player board 
```

如您所见，这使我们摆脱了所有讨厌的显式`Nothing`检查。

# oracle - 使用日期函数查询

> ID：13329396
> 
> 赞同：0
> 
> 时间：2012-11-11T07:32:26.660
> 
> 标签：oracle, plsql, date-arithmetic

我有下表

警报（AlarmID INT，InstalledDate 日期）

鉴于警报器需要每 5 年更换一次，我如何显示在接下来的 6 个月内需要更换的所有警报器？

我尝试了以下方法，但没有结果：

```
SELECT AlarmID
FROM   Alarm
WHERE  Add_months(InstalledDate, 60)
BETWEEN SYSDATE AND Add_months(SYSDATE, 6); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:59:42.267

> “我尝试了以下方法，但没有结果：”

您提出的查询看起来是正确的，所以也许您没有任何五年前的警报？

* * *

> “与 BETWEEN Add_months(SYSDATE, 6) AND SYSDATE 相比，使用 BETWEEN SYSDATE AND Add_months(SYSDATE, 6) 似乎存在差异；”

BETWEEN 运算符要求我们以特定顺序传递两个值，下限然后上限。所以这个过滤器是真的：

```
where date '2012-03-01' between date '2012-01-01'  and date '2012-06-01' 
```

而这是错误的：

```
where date '2012-03-01' between date '2012-06-01'  and date '2012-01-01' 
```

也许这看起来不公平，但[Oracle 文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions011.htm#sthref2006)`lt`通过将 BETWEEN 运算符转换为and`gt`语句使其更加清晰：

```
where date '2012-03-01' >= date '2012-01-01'  
and   date '2012-03-01' <= date '2012-06-01' 
```

如果你交换第二个和第三个表达式的值，你就会明白为什么颠倒的顺序返回 false。

# c# - 检测屏幕上任意位置的焦点文本框

> ID：13329400
> 
> 赞同：1
> 
> 时间：2012-11-11T07:32:52.817
> 
> 标签：c#, .net, windows

我正在用 C# 编写一个简单的应用程序。我希望这个应用程序在系统托盘中检测 Windows 上任何地方的焦点元素。如果焦点元素是文本框（用户可以输入文本的任何地方），则应用程序应在系统托盘上显示通知。我的问题是，如何检测一个焦点元素并检查它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:44:14.233

没有绝对的方法可以做到这一点，有太多控件允许您添加文本。

你可以像我在我的应用程序中那样搜索插入符号的位置，但它并不是在所有地方都有效，

这是我使用的代码，

```
 GUITHREADINFO lpgui = new GUITHREADINFO();
        IntPtr fore = GetForegroundWindow();
        uint tpid = GetWindowThreadProcessId(fore, IntPtr.Zero);
        lpgui.cbSize = Marshal.SizeOf(lpgui.GetType());
        bool flag = GetGUIThreadInfo(tpid, out lpgui);
        WINDOWINFO pwi = new WINDOWINFO();
        pwi.cbSize = (uint)Marshal.SizeOf(pwi.GetType());
        GetWindowInfo((IntPtr)lpgui.hwndCaret, ref pwi);

        if (flag)
        {
            if (!(lpgui.rcCaret.Location.X == 0 && lpgui.rcCaret.Location.Y == 0))
            {

//TODO

            }
        } 
```

这种方式在太多的应用程序中都可以正常工作，您可以将此代码放在计时器或任何您想要的地方

您必须使用winapi，如果您不熟悉api，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T08:08:05.057

您可以使用此代码检查焦点文本框。

```
foreach (Control item in this.Controls)
        {
            if (item is TextBox && item.Focused)
            {
                //Write your notification code here.
            }
        } 
```

# bugzilla - 如何在没有 SMTP 服务器的情况下设置 Bugzilla（无需使用电子邮件）？

> ID：13329402
> 
> 赞同：0
> 
> 时间：2012-11-11T07:33:49.170
> 
> 标签：bugzilla

如何在没有 SMTP 服务器的情况下设置 Bugzilla（无需使用电子邮件）？

我`Bugzilla`是从 windows-installer 安装的。我们只是在本地使用它，不需要电子邮件，也没有任何`SMTP`服务器。

[这个链接](https://groups.google.com/forum/?fromgroups=#!topic/mozilla.support.bugzilla/hrH-owndUVU)说我不需要 SMTP，但我不知道如何进入“管理员页面”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:03:34.320

您需要将“mail_delivery_method”参数设置为无以禁用发送电子邮件。以 Bugzilla 管理员身份登录以进入管理页面，然后选择参数，然后选择电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-14T13:34:36.013

需要将“mail_delivery_method”参数设置为“测试”。检查 C:\bugzilla\data 文件夹 mailer.testfile 文件中的新帐户创建邮件，您将在那里获得令牌链接以实际创建新用户。这样你就可以完全绕过设置 SMTP 服务器，而是在一组 ppl 中使用 Bugzilla。对于小组开发和错误跟踪非常有用。

# decode - 分析部分或损坏的二维码

> ID：13329406
> 
> 赞同：13
> 
> 时间：2012-11-11T07:34:26.190
> 
> 标签：decode, qr-code

如何分析损坏/部分 QR 码？通常，QR 解码器只会告诉您无法读取数据。这不是很有用。即使代码不可读，也可以提取一些信息！

*   发现者模式找到了吗？
*   是否找到时序模式？
*   什么是版本？
*   什么是错误级别？
*   面具是什么？
*   格式是否完好？
*   什么是模式？
*   是否在正确长度后找到停止模式？
*   有没有有意义的数据？

如何从损坏/部分二维码中提取此信息？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-04-27T04:05:10.023

**这是一个以多种方式出现的问题。有些比其他更容易。**

## 回答您的直接问题：您需要的工具：您的大脑。

软件可以提供帮助，但要解码部分或打印错误的代码需要一些工作。这就像侦探工作。首先，您需要拿出您所拥有的并填写您对它们的创建方式的了解，然后做出有根据的猜测以获得胜利。

* * *

这是一个概念之旅。通过查看这些文章，您的要点列表中的大部分项目都会得到解答。

**本文详细解释了整体格式：**

[受伤的二维码](http://datagenetics.com/blog/november12013/index.html)

例如，这是有关格式化的文章中的第一张图片：

[![在此处输入图像描述](../Images/997fcaac8a4941bfde9192ce16903826.png)](https://i.stack.imgur.com/CyPUr.png)

* * *

**这是解码部分图像的过程的真实示例：**

[解码部分二维码](http://aioo.be/2015/07/28/Decoding-a-partial-QR-code.html)

它从挑战图像开始

[![在此处输入图像描述](../Images/96478b90a3b319bac07eb14f88ae27a3.png)](https://i.stack.imgur.com/1pyug.jpg)

然后显示被编码的位的顺序：

[![在此处输入图像描述](../Images/335f2e7547a3a896448d9404af03693e.png)](https://i.stack.imgur.com/B7kZd.png)

然后通过侦探工作的过程来产生最终的图像：

[![在此处输入图像描述](../Images/9de52bd9ba14bf8d21ec5afcf400729d.png)](https://i.stack.imgur.com/IA26s.jpg)

* * *

**这是一个不同的问题。您有完整的图像，但无法正确扫描，因此您必须手动对其进行解码：**

[手动解码小二维码](http://blog.qartis.com/decoding-small-qr-codes-by-hand/)

它从纹身开始：

[![在此处输入图像描述](../Images/7ffcd07dc3788da889feb2c70abc7b6d.png)](https://i.stack.imgur.com/AlTcK.jpg)

这是错误的方向，也不会正确扫描。

因此，您将完成解码过程：

[![在此处输入图像描述](../Images/7674b63122a18b1e20d931385c26122e.png)](https://i.stack.imgur.com/m3ZrH.png)

产生最终结果：Maci Clare Peltz

* * *

玩得开心检测！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T12:37:44.703

你可以简单地破解一些开源代码，比如[zxing](http://code.google.com/p/zxing)，在解码过程中在命令行上打印出它的进度，然后看看它走了多远。随便说几句`System.out.println()`。

问题是误报。它几乎总能找到至少 3 个看起来像 QR 码查找器图案的区域；它总是需要 3 个最有可能的候选人。它们通常是幻影，因为您通常不会看 QR 码。下一步将失败，查找有效的版本信息。（在极不可能的情况下，它甚至会找到虚拟版本信息。）

您提到的其中一些方面不一定会被库检测到，因为它们不一定是，例如时序模式和停止模式（短数据不需要）。

除了这些警告之外，应该很容易。

# java - Java - 给一个空对象的字段一个值或声明一个没有构造函数的对象不是空的

> ID：13329407
> 
> 赞同：0
> 
> 时间：2012-11-11T07:34:40.183
> 
> 标签：java, object, constructor, null

感觉像是一个超级基本的问题，但我无法理解它。

有一个 PriceGroup 类，没有我要为其创建对象的构造函数。

```
class SmallPortfolio{
String id;  
// all the investments (stocks) belonging to this portfolio.
List<Investment> invList = new ArrayList<Investment>(); 
} 
```

现在在一个单独的类中，我正在创建一个名为 Spor 的 SmallPortfolio 对象。

```
//
String id = InstanceID.getTextNormalize(); //this value is taken from an element from jdom.
SmallPortfolio Spor;
Spor.id = id; 
//some code that creates a list of investments
//some code that creates a list of SmallPortfolio objects 
```

在java中，你如何给一个空对象的字段一个由NullPointerException获得的值？另一种解决方案是以某种方式声明一个不为空的 SmallPortfolio 对象。

这是一个奇怪的问题，但我正在使用的测试程序无法修改，并且它没有 SmallPortfolio 的构造函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T07:37:43.123

除非您自己定义一些构造函数，否则 Java 会自动为您创建一个默认的无参数构造函数。所以你可以写：

```
SmallPortfolio smallPort = new SmallPortfolio(); 
```

但是，在您的情况下， SmallPortfolio 类的作者可能应该提供了一个临时构造函数：

```
class SmallPortfolio{
    private final String id;  
    // all the investments (stocks) belonging to this portfolio.
    private final List<Investment> investments = new ArrayList<Investment>(); 

    public SmallPortfolio(String id) {
        this.id = id;
    }

    //getters + methods to add / remove investments
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T07:37:20.100

您需要做的就是初始化 Spor：

```
SmallPortfolio Spor = new SmallPortfolio(); 
```

这将创建一个非空对象。此外，如果您要在每次初始化后为其添加一个 id，您也可以将其添加到构造函数中。希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T07:37:43.823

`Spor`从未初始化：

```
SmallPortfolio Spor; 
```

用。。。来代替：

```
SmallPortfolio Spor = new SmallPortfolio(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T07:39:05.737

问题有点不清楚，但是如果您问是否可以在 null 对象上分配字段或调用方法，那么，不，您不能。您需要拥有（或制作）您的班级的一个实例。

```
 SmallPortfolio Spor = new SmallPortfolio();
 Spor.id = id; 
```

The code you have shown above should not even compile, because you have not assigned a value (not even null) to `Spor`. (If you do assign `null`, you'll get a runtime nullpointer exception).

If the confusion was how to make an object when there is no constructor: In this case, there is one, because if the Java code does not specify any constructor (but only then), there is an automatic default constructor that does not need arguments.

# java - 使用 Android 或 Java 从 MediaWiki / Wikipedia 查询多个结果

> ID：13329409
> 
> 赞同：1
> 
> 时间：2012-11-11T07:35:06.720
> 
> 标签：java, android, http, mediawiki, wikipedia

我目前正在使用 MediaWiki 的 URL 示例来查询 android 上的 HTTP GET 请求。

我只是通过这样的 URL 获取信息；

```
http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=Main%20Page&prop=revisions&rvprop=content 
```

然而，在这个例子中，我总是需要某种直接的标题并且只得到一个结果（titles=some name here）

我知道维基百科在这里解释了更复杂的搜索方法； [http://en.wikipedia.org/wiki/Help:搜索](http://en.wikipedia.org/wiki/Help:Searching)

我想在每次搜索时提供多篇维基百科文章的一些“预览”，因为他们键入的内容可能并不总是他们想要的。

有没有办法查询这些特殊的“搜索”结果？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:57:07.573

看起来[MediaWiki 搜索 API](http://www.mediawiki.org/wiki/API%3aOpensearch)可能就是您所追求的。该特定页面讨论了获取搜索结果的预览。

# c - c中的内存重新分配

> ID：13329432
> 
> 赞同：0
> 
> 时间：2012-11-11T07:39:25.227
> 
> 标签：c, dynamic-memory-allocation

我对c编程非常感兴趣，现在我正在编写用于动态内存分配的ac程序。

这些是该计划的阶段：

1.  它从用户那里获取`n`数字
2.  它打印它们
3.  `n`它从用户那里获得另一个号码
4.  它打印两组数字

我的程序适用于较小的值`n`，但不适用于较大的值，例如 200000 个数字。即首先我输入了 100000 个数字，然后我输入了另外 100000 个数字。

它对第一组执行良好，但随后出现分段错误。我`gdb`用于调试。它显示 SIGSEGV 错误。

任何人都可以解释发生了什么并给我一个解决方案吗？

```
#include<stdio.h>
#include<malloc.h>
int main(void)
{

    unsigned int *p=NULL;
    unsigned int n;
    unsigned int i;
    unsigned int *a;
    unsigned int *t;
    unsigned int k=0;

    printf("Enter no.of elements...");
    scanf("%d", &n);

    p = (unsigned int*)malloc(n*sizeof(unsigned int));
    a = p;
    t = p;
    for (i=0; i<n; i++, *p++, k++) {
        scanf("%d",p);
    }

    for(i=0;i<n;i++,a++) {
        printf("Element No-%d %d Address->%d\n", i, *a, a);
    }

    a=t;

    printf("next time...how many elements do you enter");
    scanf("%d",&n);

    t=p;
    a = (unsigned int*)realloc((void *)a, n*sizeof(int));
    for (i=0; i<n; i++, *t++ ,k++) {
        scanf("%d",t);
    }

    printf("next time...printing..\n");

    for (i=0; i<k; i++, a++) {
        printf("Element No-%d %d Address->%d\n",i,*a,a);
    }

    free(p);
    free(a);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T07:43:39.990

`realloc`更改分配的大小，它不会按照您指定的大小增加分配。

所以你需要做

```
a=realloc(a, original_size + extent_size); 
```

（[您不需要在 C中转换`malloc`or`realloc`](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)的返回值。 ）

另一个注意事项：

```
t=p;
...
a=t;
...
t=p;
a=realloc(...); 
```

你不能`t`在 realloc 之后使用，因为 realloc 可能已经改变了块的地址。放在`t=a;`realloc 之后。（并且使用更具描述性的名称，您的代码很难遵循。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T07:44:42.593

您应该`#include <stdlib.h>`and `#include <stdio.h>`，而不是`<malloc.h>`已弃用的。还请正确缩进您的代码

两行：

```
for(i=0;i<n;i++,*p++,k++)
   scanf("%d",p); 
```

显得可疑。为什么`*p`？我会成功的

```
for (i=0; i<n; i++, p++)
  if (scanf(" %d", p)<1) 
    exit (EXIT_FAILURE); 
```

不要忘记在编译期间启用所有警告和调试信息（`gcc`这意味着`gcc -Wall -g`）并使用调试器（例如`gdb`）和内存泄漏检测器（例如`valgrind`）来调试您的程序。

您可能想使用`calloc`而不是`malloc`，并且您绝对应该测试`malloc`、`calloc`或`realloc`（所有都可能因返回而失败`NULL`）的结果。

正如马特回答的那样，您的`realloc`电话不正确。

# image - 如何从内存缓冲区（StringIO）或使用opencv python库的url读取图像

> ID：13329445
> 
> 赞同：27
> 
> 时间：2012-11-11T07:42:46.310
> 
> 标签：image, opencv, numpy, urllib2, stringio

只需分享一种从内存缓冲区或 url 创建 opencv 图像对象的方法，以提高性能。

有时我们从 url 获取图像二进制文件，为了避免额外的文件 IO，我们想从内存缓冲区或从 url 中读取此图像，但 imread 仅支持从具有路径的文件系统中读取图像**。**

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-11T07:42:46.310

要使用内存缓冲区（StringIO）创建 OpenCV 图像对象，我们可以使用 OpenCV API imdecode，请参见下面的代码：

```
import cv2
import numpy as np
from urllib2 import urlopen
from cStringIO import StringIO

def create_opencv_image_from_stringio(img_stream, cv2_img_flag=0):
    img_stream.seek(0)
    img_array = np.asarray(bytearray(img_stream.read()), dtype=np.uint8)
    return cv2.imdecode(img_array, cv2_img_flag)

def create_opencv_image_from_url(url, cv2_img_flag=0):
    request = urlopen(url)
    img_array = np.asarray(bytearray(request.read()), dtype=np.uint8)
    return cv2.imdecode(img_array, cv2_img_flag) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-03-26T15:14:04.050

正如对已接受答案的评论中指出的那样，它已经过时并且不再起作用。

幸运的是，我最近不得不使用 Python 3.7 和 OpenCV 4.0 来解决这个问题。

为了处理来自 URL 或内存缓冲区的图像加载，我定义了以下两个函数：

```
import urllib.request
import cv2
import numpy as np

def get_opencv_img_from_buffer(buffer, flags):
    bytes_as_np_array = np.frombuffer(buffer.read(), dtype=np.uint8)
    return cv2.imdecode(bytes_as_np_array, flags)

def get_opencv_img_from_url(url, flags):
    req = urllib.request.Request(url)
    return get_opencv_img_from_buffer(urllib.request.urlopen(req), flags) 
```

如您所见，一个依赖于另一个。

第一个，get_opencv_img_from_buffer，可用于从内存缓冲区中获取图像对象。它假定缓冲区有一个读取方法，并且它返回一个实现[缓冲区协议的对象的实例](https://docs.python.org/3/c-api/buffer.html)

第二个，get_opencv_img_from_url，直接从 URL 生成图像。

flags 参数被传递给 cv2.imdecode，它在 cv2 中预定义了以下常量：

*   cv2.IMREAD_ANYCOLOR - 如果设置，图像以任何可能的颜色格式读取。
*   cv2.IMREAD_ANYDEPTH - 如果设置，则在输入具有相应深度时返回 16 位/32 位图像，否则将其转换为 8 位。
*   cv2.IMREAD_COLOR - 如果设置，总是将图像转换为 3 通道 BGR 彩色图像。
*   cv2.IMREAD_GRAYSCALE - 如果设置，总是将图像转换为单通道灰度图像（编解码器内部转换）。
*   cv2.IMREAD_IGNORE_ORIENTATION - If set, do not rotate the image according to EXIF's orientation flag.
*   cv2.IMREAD_LOAD_GDAL - If set, use the gdal driver for loading the image.
*   cv2.IMREAD_REDUCED_COLOR_2 - If set, always convert image to the 3 channel BGR color image and the image size reduced 1/2.
*   cv2.IMREAD_REDUCED_COLOR_4 - If set, always convert image to the 3 channel BGR color image and the image size reduced 1/4.
*   cv2.IMREAD_REDUCED_COLOR_8 - If set, always convert image to the 3 channel BGR color image and the image size reduced 1/8.
*   cv2.IMREAD_REDUCED_GRAYSCALE_2 - If set, always convert image to the single channel grayscale image and the image size reduced 1/2.
*   cv2.IMREAD_REDUCED_GRAYSCALE_4 - If set, always convert image to the single channel grayscale image and the image size reduced 1/4.
*   cv2.IMREAD_REDUCED_GRAYSCALE_8 - If set, always convert image to the single channel grayscale image and the image size reduced 1/8.
*   cv2.IMREAD_UNCHANGED - If set, return the loaded image as is (with alpha channel, otherwise it gets cropped).

# ruby-on-rails - 在 Rails 代码部署后运行精简重启，恒定 502 bad gateway 错误

> ID：13329448
> 
> 赞同：0
> 
> 时间：2012-11-11T07:42:55.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, thin

问题：重新启动精简时发出的所有请求都会导致 502 Bad Gateway Errors。

当我将代码更改部署到我的服务器时，我必须重新启动以使新更改生效。我的瘦配置 yml 如下所示：

```
chdir: /var/www/appname
servers: 6
environment: production
onebyone: true
wait: 30
no-epoll: true
address: 0.0.0.0
port: 3000
timeout: 30
log: log/thin.log
pid: tmp/pids/thin.pid
max_conns: 1024
max_persistent_conns: 512
require: []
daemonize: true 
```

我的理解是“onebyone”属性将确保至少有 1 个服务器始终可用于响应请求。但是，在所有服务器完成重新启动之前发出的任何请求都会导致 502 Bad Gateway 错误或 504 Gateway Time-out。在将新代码推送到生产环境后，如何确保始终正确处理我的请求？

**更新**

瘦日志显示此错误：

```
/usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:572:in `start_tcp_server': no acceptor (RuntimeError)
    from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:572:in `start_server'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.3.1/lib/thin/backends/tcp_server.rb:16:in `connect'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.3.1/lib/thin/backends/base.rb:53:in `block in start'
    from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `call'
    from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
    from /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.3.1/lib/thin/backends/base.rb:61:in `start'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.3.1/lib/thin/server.rb:159:in `start'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.3.1/lib/thin/controllers/controller.rb:86:in `start'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:185:in `run_command'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.3.1/lib/thin/runner.rb:151:in `run!'
    from /usr/local/lib/ruby/gems/1.9.1/gems/thin-1.3.1/bin/thin:6:in `<top (required)>'
    from /usr/local/bin/thin:19:in `load'
    from /usr/local/bin/thin:19:in `<main>' 
```

我正在重新开始`sudo thin -C /etc/thin/appname.yaml restart`

似乎发生的事情是瘦正在尝试侦听端口 3000，但之前的瘦进程仍在该端口上运行？为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:59:30.897

当 Thin 停止时，它会在与 Nginx 通信时删除套接字文件，然后在成功启动时重新创建它。即使 Thin 停止，NGinx 仍在侦听 Web 请求。如果此时向 Nginx 发出请求，则会导致您提到的错误。这只是意味着 Thin 无法正常启动，或者在您的情况下无法绑定到套接字。这可能意味着您试图停止和启动太快。

像这样的上限任务*应该*可以正常工作。

```
task :restart do
  sudo "bundle exec thin restart -C thin.yml"
end 
```

`onebyone`删除后这仍然是一个问题吗？

我还发现这篇文章对于使用 Thin 和 Capistrano 实现滚动重启非常有用 - [http://pointatstar.wordpress.com/2011/01/17/rolling-restart-for-thin-cluster-via-capistrano/](http://pointatstar.wordpress.com/2011/01/17/rolling-restart-for-thin-cluster-via-capistrano/)

就个人而言，我一直在使用 Unicorn，因为它内置了滚动重启。它在 RailsCast 中被覆盖 - [http://railscasts.com/episodes/373-zero-downtime-deployment](http://railscasts.com/episodes/373-zero-downtime-deployment)

# java - 正则表达式替换除字母以外的所有内容

> ID：13329449
> 
> 赞同：1
> 
> 时间：2012-11-11T07:43:02.330
> 
> 标签：java, regex

什么是一个简洁的正则表达式，可以从不是字母表的字符串中删除所有内容

```
 BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
    int T=0; 
    try{
        T= Integer.parseInt(br.readLine());

        while(T>0)
                String input=br.readLine();
                **String res= input.replaceAll("^[a-zA-Z]"," " );**
                System.out.println(res); 
```

也试过

```
 input.replaceAll("[^a-zA-Z]]"," " ) 
```

他们都没有替换输入字符串中的任何内容。输入字符串保持原样

编辑：

```
 input.replaceAll("[^a-zA-Z]"," " )  //works well
         input.replaceAll("^[a-zA-Z]"," " )  //replaces first char of string 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T07:46:35.397

你需要：

```
input = input.replaceAll("[^a-zA-Z]"," " );
^^^^^^^                          ^ ^ 
```

您需要将`input`引用指向该方法返回的 String 对象，`replaceAll`以获取更改后的字符串，因为 Strings 是不可变的。

范围`A-z`不是你想要的。你需要`A-Z`.

您的模式中还有一个额外`]`的。

[**看见**](http://ideone.com/Ra2i1r)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T07:43:48.587

`input.replaceAll("[^a-zA-z]","")`是字符串常量池中的一个新字符串，您没有使用这个新内容设置您的字符串。请使用这个：

```
input = input.replaceAll("[^a-zA-z]",""); 
```

# ios - 发送http请求返回<>

> ID：13329452
> 
> 赞同：0
> 
> 时间：2012-11-11T07:43:43.343
> 
> 标签：ios

我试图制作登录表单以使用 http 请求从外部服务器检查用户名和密码，但给出了响应 <>

```
- (IBAction)getlogin:(UIButton *)sender {
    NSString *rawStrusername = [NSString stringWithFormat:@"username=%@",_username.text];
    NSString *rawStrpassword = [NSString stringWithFormat:@"password=%@",_password.text];

    NSString *post = @"rawStrusername&rawStrpassword";
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
   /*
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];*/
    NSURL *url = [NSURL URLWithString:@"http://www.othaimmarkets.com/my_services_path/user/login"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    [request setHTTPMethod:@"POST"];
    /*[request setValue:postLength forHTTPHeaderField:@"Content-Length"];*/
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSURLResponse *response;
    NSError *err;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
    NSLog(@"responseData: %@", responseData);
} 
```

任何帮助、建议或示例将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:40:46.130

```
NSString *post = @"rawStrusername&rawStrpassword"; 
```

You are sending the "`rawStrusername&rawStrpassword`" string to the server? Why don't you try with:

```
NSString *post = [NSString stringWithFormat:@"%@&%@", rawStrusername, rawStrpassword]; 
```

# android - 如何设置我的 Eclipse 为 Android 2.3 编译

> ID：13329457
> 
> 赞同：1
> 
> 时间：2012-11-11T07:44:16.463
> 
> 标签：android

这可能是非常基本的，但我没有找到有关如何执行此操作的信息。在 iOS 上，我有一个基本 SDK 和一个目标 SDK，因此我可以使用基本 SDK 中的最新功能（当然要先检查它们是否可用），同时让我的应用程序在具有目标 SDK 的设备上运行。如何在 Eclipse 中使用 Android 做同样的事情，如何使用 Android 4.1 进行编译，同时让我的应用程序在（部署到）Android 2.3 上运行？

我不是询问在运行时检查我正在运行的版本，而是询问如何正确配置 Eclipse。

谢谢索伦_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:49:30.960

首先阅读Android 开发者网站上的[向后兼容性。](http://developer.android.com/training/search/backward-compat.html)您可能正在寻找“设置最低和目标 API 级别”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:49:46.217

在你的 Androidmanifest.xml 检查 uses-sdk 标签

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" /> 
```

版本 8 是 Android 2.2 最高 16 用于 4.1/4.1.1

从[这里](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# android - Android 内存泄漏——致命的拥抱

> ID：13329460
> 
> 赞同：1
> 
> 时间：2012-11-11T07:46:19.657
> 
> 标签：android, memory-leaks

考虑到托管代码/垃圾收集等的性质，最初我并没有过多关注 Android 中内存泄漏的可能性。我想这可能有点幼稚。这是问题：

假设有一个活动 - MyActivity。当操作系统启动它时，它会在其 onCreate() 中实例化另一个类（MyOtherClass）并保留对它的引用。但是，假设 MyOtherClass 的实例还保留对上下文的引用——这恰好也是对 MyActivity 实例的引用。

现在发生了一些事情 - 说屏幕被旋转了。操作系统调用活动 onDestroy() 并删除对 MyActivity 的旧实例的引用。但是，该活动实例仍然具有对 MyOtherClass 实例的引用，而该实例又具有该活动的实例。

那么，我认为这两个班级将永远保持彼此的生命是对的吗？

如果是这样，我想可能的答案是（a）不保留上下文引用，以另一种方式获取它，或者（b）在活动 onDestroy() 中删除它对其他任何东西的任何引用，那么这一切都应该崩溃.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T07:55:42.550

Java 不允许循环链接使彼此保持活动状态（在内存中）。但是，如果您声明了静态引用或创建了单例样式对象，Java 将无法帮助您。

一个好的开始可能是阅读[避免内存泄漏](http://android-developers.blogspot.se/2009/01/avoiding-memory-leaks.html)。

# dll - 在 vb6 的 dll 中使用全局变量

> ID：13329461
> 
> 赞同：-1
> 
> 时间：2012-11-11T07:46:34.820
> 
> 标签：dll, vb6

我有一个 dll，我想在其中访问项目的全局变量。如何在 VB6 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:42:00.423

除非您通过 COM 在项目之间显式传递，否则您无法访问不同项目中的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T18:03:53.927

虽然使用全局变量在语法上是正确的，但这是一个非常糟糕的主意。添加模块或类文件并将变量封装在属性中。如果您想从项目中访问您的属性，则可以使用 bas 文件。如果您正在描述制作一个 ActiveX dll 并使用另一个单独的项目访问属性，您应该制作一个类模块。您需要将类**Instancing**属性设置为私有以外的属性。

```
'myproject.bas code
Option Explicit

private mblnIsDirty as boolean

Public Property Let IsDirty(ByVal vIsDirty)

    mblnIsDirty = vIsDirty

End Property
Public Property Get IsDirt() As Boolean

    IsDirty = mblnIsDirty

End Property 
```

# php - 我的网站登录脚本以及安全问题在哪里

> ID：13329463
> 
> 赞同：0
> 
> 时间：2012-11-11T07:47:06.833
> 
> 标签：php, security

我有以下登录脚本，我已尽力确保它的安全，但有一个人破解了我的脚本并向我发送了一封他能够登录的电子邮件，他还向我发送了我的数据库信息，例如管理员密码等。

**登录.php**

```
<?
@session_start();
include("../global.inc.php");

if(isset($_POST['submit']))
{

    include("../classes/class.admin.php");  
    $objAdmin = new admin();
    $verifyAdmin=$objAdmin->verifyAdmin(mysql_real_escape_string($_POST['username']),(mysql_real_escape_string($_POST['password'])));

    if($verifyAdmin==1)
    {
        $_SESSION['my_admin']="admin";
        header("location:index.php");
    }
    else
    {
        $errMsg="Invalid Username or Password.";
    }
}
?>

<form name="frm" method="post" action="">
  <table width="300" border="0" cellspacing="0" cellpadding="0">

    <tr>
        <td class="blackheader" > Admin Panel</td>
      </tr>
    <tr>
        <td valign="top" class="adminborder"><table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
        <td>&nbsp;</td>
        <td style="color:#FF0000; font-size:11px; font-family:Arial, Helvetica, sans-serif;"><?=$errMsg;?></td>
    </tr>
        <tr>
            <td width="31%" height="28" align="left" valign="middle" class="admintxt">Username:</td>
            <td><input type="text" name="username" class="txtfield1" size="28"></td>
        </tr>
        <tr>
            <td height="28" align="left" valign="middle" class="admintxt">Password:</td>
            <td><input type="password" name="password" class="txtfield1" size="28"></td>
        </tr>
        <tr>
            <td></td>
            <td height="22" align="left" valign="middle"><input type="submit" name="submit" value="Login" class="submit_button"> 
```

我的头文件中有以下代码来检查用户是否已登录

```
<?php
session_start();
if(!isset($_SESSION['my_admin']))
{
    header("location: login.php");
}
?> 
```

下面是检查管理员登录密码的类

```
class admin extends dbClass
{
    function verifyAdmin($username, $password)
    {
        $select="select username,password from ".TABLE_ADMIN." where username='".$username."' and password='".$password."'";
        $query=$this->query($select,1);
        $numRows=count($query);

        return $numRows;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:51:09.957

1.  使用参数化语句执行查询，以避免 SQL 注入。
2.  确保此人实际上并未通过其他安全漏洞直接访问您的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T07:52:26.780

首先，将您的代码切换到 PDO，然后为您的查询使用准备/执行。这应该可以防止注射。

还要确保您的 .htaccess 设置正确，以防止访问您的文件。

# html - 如何将搜索栏移动到顶部而不隐藏它？

> ID：13329464
> 
> 赞同：0
> 
> 时间：2012-11-11T07:47:12.257
> 
> 标签：html, css, position

在这个网站[www.johnpaulus.com](http://www.johnpaulus.com)中，我无法将顶部搜索栏移动到最高位置，就在社交网络图标的右侧。它正在隐藏在背景后面。

如何将其向上移动并使其在社交网络图标的右侧可见？

我希望只使用 CSS / HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T07:50:48.283

您的定位是错误的，小提琴会有所帮助，但只是使用萤火虫做到这一点，给`margin: -40px 0 0;`，`#searchbar`您可以通过定位做得更好，但由于您没有共享任何小提琴或代码，我试图修改您的样式

截屏

![在此处输入图像描述](../Images/a9b969be5e3b73c1962c66e26b315636.png)

# json - JSON 未通过 JSONLint 进行验证

> ID：13329469
> 
> 赞同：0
> 
> 时间：2012-11-11T07:48:24.687
> 
> 标签：json, validation

JSON 下面没有得到验证。我找不到问题

```
vartablearray=[
    {
        name: “Apple”,
        code: “APPL”,
        value: “111”,
        bid: “112”,
        offer: “110”
    },
    {
        name: “Microsoft”,
        code: “MSFT”,
        value: “78”,
        bid: “70”,
        offer: “75”
    },
    {
        name: “Google”,
        code: “GOGL”,
        value: “101”,
        bid: “98”,
        offer: “102”
    },
    {
        name: “Nokia”,
        code: “NOK”,
        value: “10”,
        bid: “8”,
        offer: “9”
    },
    {
        name: “Samsung”,
        code: “SAMS”,
        value: “89”,
        bid: “86”,
        offer: “90”
    },
    {
        name: “IntelCorporation”,
        code: “INTC”,
        value: “111”,
        bid: “112”,
        offer: “110”
    }
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T07:58:05.887

JSON 要求密钥被双引号：

```
[{ "name": "Apple", ... }] 
```

`var tablearray=[ { name: “Apple” } ]`也会导致 Javascript 中的语法错误，因为 javascript 不理解您正在使用的“花式”双引号，只有 ASCII 集中的“普通”双引号：`var tablearray=[ { name: "Apple" } ]`或`var tablearray=[ { "name": "Apple" } ]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T07:55:51.113

尝试这个 `var tablearray= jQuery.parseJSON('[ { "name": "Apple", "code": "APPL", "value": "111", "bid": "112", "offer": "110" }, { "name": "Microsoft", "code": "MSFT", "value": "78", "bid": "70", "offer": "75" }, { "name": "Google", "code": "GOGL", "value": "101", "bid": "98", "offer": "102" }, { "name": "Nokia", "code": "NOK", "value": "10", "bid": "8", "offer": "9" }, { "name": "Samsung", "code": "SAMS", "value": "89", "bid": "86", "offer": "90" }, { "name": "IntelCorporation", "code": "INTC", "value": "111", "bid": "112", "offer": "110" } ]');`

# pdf - BIRT PDF 渲染：字体注册时间

> ID：13329471
> 
> 赞同：3
> 
> 时间：2012-11-11T07:48:45.093
> 
> 标签：pdf, fonts, itext, render, birt

我们从版本 2（目前使用 4.2.2）开始使用 BIRT，并且一直受到 PDF（itext？）字体注册时间的困扰。

```
org.eclipse.birt.report.engine.layout.pdf.font.FontMappingManagerFactory$2 run
INFO: register fonts in c:/windows/fonts cost:17803ms 
```

此过程仅在第一次使用渲染时发生。后续渲染没有问题。

问题似乎是访问所有系统连接的驱动器时浪费的时间。

**在org.eclipse.birt.report.engine.fonts 插件**中编辑 fontsConfig.xml ，减少搜索路径并不能解决问题。**BIRT 可以访问所有连接的驱动器**。

```
<font-paths>
    <path path="/windows/fonts" />
</font-paths> 
```

是否有一个简单的解决方案，而无需呈现“虚拟”报告以在后台初始化 BIRT？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-10T21:51:37.870

这不一定是解决方案，但可能是我在注意到相同问题并进行一些调查后提出的另一种解决方法。它也（IMO）比生成虚拟报告更好。

在启动时（或根据您的需要在其他时间点），进行以下调用：

```
FontMappingManagerFactory.getInstance().getFontMappingManager(format, Locale.getDefault()); 
```

# 为什么？

BIRT 使用`com.lowagie.text.FontFactory`( [iText](https://stackoverflow.com/questions/13515210/what-is-the-difference-between-lowagie-and-itext) ) 注册字体。对该类的调用也会从该类中 [`org.eclipse.birt.report.engine.layout.pdf.font.FontMappingManagerFactory`](https://github.com/eclipse/birt/blob/07c12f2e93edfcb98717e695460f7d6aa9b083d7/engine/org.eclipse.birt.report.engine/src/org/eclipse/birt/report/engine/layout/pdf/font/FontMappingManagerFactory.java)吐出问题中给出的日志条目。

在里面`FontMappingManagerFactory`我们可以看到日志条目的来源：

```
private static void registerFontPath( final String fontPath )
{
    AccessController.doPrivileged( new PrivilegedAction<Object>( ) {

        public Object run( )
        {
            long start = System.currentTimeMillis( );
            File file = new File( fontPath );
            if ( file.exists( ) )
            {
                if ( file.isDirectory( ) )
                {
                    FontFactory.registerDirectory( fontPath );
                }
                else
                {
                    FontFactory.register( fontPath );
                }
            }
            long end = System.currentTimeMillis( );
            logger.info( "register fonts in " + fontPath + " cost:"
                    + ( end - start ) + "ms" ); // <-- Here!
            return null;
        }
    } );
} 
```

向后工作，我们看到`registerFontPath(String)`由`loadFontMappingConfig(URL)`等调用，导致以下调用层次结构：

```
getFontMappingManager(String, Locale)
`-- createFontMappingManager(String, Locale)
    `-- loadFontMappingConfig(String)
        `-- loadFontMappingConfig(URL)
            `-- registerFontPath(String) 
```

并且`getFontMappingManager(String, Locale)`是我们可以调用的公共方法。然而，更重要的是，该方法还缓存了`FontMappingManager`被创建的内容：

```
public synchronized FontMappingManager getFontMappingManager(
        String format, Locale locale )
{
    HashMap managers = (HashMap) cachedManagers.get( format );
    if ( managers == null )
    {
        managers = new HashMap( );
        cachedManagers.put( format, managers );
    }
    FontMappingManager manager = (FontMappingManager) managers.get( locale );
    if ( manager == null )
    {
        manager = createFontMappingManager( format, locale );
        managers.put( locale, manager );
    }
    return manager;
} 
```

因此，当您准备好生成 PDF 时，它已经在缓存中，并且 BIRT 不必向下调用 FontFactory 并重新注册字体。

# 但是格式字符串呢？

这一点是一些猜测，但我*认为*有效的选项`OUTPUT_FORMAT_XXX` `String`是`IRenderOption`. 出于我们的目的，我进行了调试以查看我们想要`String`的`pdf`. 考虑到这也是方便的输出格式，我*认为* `IRenderOption.OUTPUT_FORMAT_PDF`这是要走的路。

如果您最终同时创建 PDF 和 HTML 文件，您似乎可以进行两次调用（一次使用`IRenderOption.OUTPUT_FORMAT_PDF`，一次使用`IRenderOption.OUTPUT_FORMAT_HTML`），并且只会考虑不同的字体配置文件（即，您不会从`c:/windows/fonts`两次）。

* * *

话虽如此，但还是要加一粒盐。我相信这是完全安全的，因为 的目的`getFontMappingManager(String, Locale)`是获取一个用于访问可用字体等的对象，并且它可以方便地缓存结果。但是，如果将来要改变这种情况，您最终可能会遇到一个难以发现的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T15:01:50.883

我建议您可以修改 fontsConfig.xml 并删除不再需要的字体。还要删除您不希望 birt 检查字体的驱动器。

# android - 静态变量在两个活动之间不起作用

> ID：13329476
> 
> 赞同：1
> 
> 时间：2012-11-11T07:50:03.140
> 
> 标签：android, android-activity, static, android-lifecycle

我有两个活动A和B。

```
public class A extends Activity 
{
....
@Override
    protected void onResume()
    {
    super.onResume();
    if(MyStaticVarz.myFlag)
    {
                    MyStaticVarz.myFlag= false;
        SomeTask();
    }

} 
```

MyStaticVarz.java：

```
public class MyStaticVarz
{
    public static boolean myFLag = false;
} 
```

从 A 转到 B 并将 myFlag 更改为 true ，例如：

```
MyStaticVarz.myFlag = true; 
```

并再次返回 A，但在 onResume if(MyStaticVarz.myFlag) 为 false 且 SomeTask() 未达到。

从 A 到 B 像：

```
Intent i = new Intent(A.this, B.class);
startActivity(i); 
```

**UPDATE** SomeTask() 用于更改 A 和 B 中文本的字体大小。

myFlag 用于按需重新初始化 UI，如果字体设置更改，则 SomeTask() 运行。

当点击 B 中的 optionMenu 并更改字体大小并转到 B 时，我看到了更改，但是当返回 A 时，文本字体大小不会发生。

**也许重要**：当我回到 A 并且字体大小不正确并且 myFlag 也为假时，如果我改变方向，文本字体大小是好的，但 myFlag 再次为假！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:09:39.797

如果您从不同的线程访问您的“myFlag”变量，每个线程都可能有一个本地存储的副本，因此不同的线程可能不会立即看到变量值的变化。

将变量定义为 volatile 以强制所有线程查看相同的副本：

```
public static volatile boolean myFLag = false; 
```

有关更详细的解释，请参阅[这个不错的答案](https://stackoverflow.com/a/7943472/532717)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T09:24:01.750

因为您正在从 2 个线程访问代码中的单个静态变量，所以您需要围绕该访问添加一些锁定。

我会看类似的东西：

```
public class MasterBB extends Activity 
{
  private final ReentrantLock lock = new ReentrantLock();

  @Override
  protected void onResume() {
    super.onResume();
    lock.lock();
    try {
        if(MyStaticVarz.myFlag) {
            MyStaticVarz.myFlag= false;
            SomeTask();
        }
    }
    finally {
        lock.unlock();
    }
  }
} 
```

恐怕我的 Java 有点生疏了，可能还有更新的方法，但这是一般的想法。您需要确保 myFlag 在该代码块运行时没有机会被修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:38:41.217

Your answer is simple, when you change `MyStaticVarz.myFlag` to `true` in `getView`, then you back to activity B, in `onResume()` the value of `MyStaticVarz.myFlag` change from `true` to `false` and when you back to activity A , the value of `MyStaticVarz.myFlag` is `false` not `true` and is obvious that activity A never get `true` value.

To solve this problem you must save changed value :

```
String value = entryValues[index].toString(); 
```

to `static String` in `MyStaticVarz` and in activity A and B `onResume()` event check the `static String` with `local String` to understand change.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T07:54:32.150

是`false`成员的初始值吗？也许您的应用程序的变量在此过程中被重置。如果我没记错 Android，onResume 可以作为应用程序终止的一部分调用，我几乎可以肯定这会破坏你所有的非存储数据。您需要将该信息存储在一个 Bundle 中并从中恢复。

# python - 如何创建动态表

> ID：13329477
> 
> 赞同：0
> 
> 时间：2012-11-11T07:50:13.437
> 
> 标签：python

我正在使用以下代码创建一个表该表将包含四列..请建议需要对代码进行哪些更改才能实现这一点

输入 XML：-

```
<Fixes>
CR           FA      CL                    TITLE

409452      WLAN    656885        Age out RSSI values from buffer in Beacon miss scenario  
12345,45678  BT     54567,34567   Test
379104       BT     656928        CR379104: BT doesn’t work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.
</Fixes> 
```

Python代码

```
crInfo = [ ]
CRlist = [ ]
CRsFixedStart=xmlfile.find('<Fixes>')
CRsFixedEnd=xmlfile.find('</Fixes>')
info=xmlfile[CRsFixedStart+12:CRsFixedEnd].strip()
for i in info.splitlines():
    index = i.split(None, 3)
    CRlist.append(index)
crInfo= CRlisttable(CRlist)
file.close()

def CRlisttable(CRlist,CRcount):
#For logging
global logString
print "\nBuilding the CRtable\n"
logString += "Building the build combo table\n"
#print "CRlist"
#print CRlist
CRstring = "<table cellspacing=\"1\" cellpadding=\"1\" border=\"1\">\n"
CRstring += "<tr>\n"
CRstring += "<th bgcolor=\"#67B0F9\" scope=\"col\">" + CRlist[0][0] + "</th>\n"
CRstring += "<th bgcolor=\"#67B0F9\" scope=\"col\">" + CRlist[0][1] + "</th>\n"
CRstring += "<th bgcolor=\"#67B0F9\" scope=\"col\">" + CRlist[0][2] + "</th>\n"
CRstring += "<th bgcolor=\"#67B0F9\" scope=\"col\">" + CRlist[0][3] + "</th>\n"
CRstring += "</tr>\n"

TEMPLATE = """
<tr>
<td><a href='http://prism/CR/{CR}'>{CR}</a></td>
<td>{FA}</td>
<td>{CL}</td>
<td>{Title}</td>
</tr>
"""
for item in CRlist[1:]:
    CRstring += TEMPLATE.format(
        CR=item[0],
        FA=item[1],
        CL=item[2],
        Title=item[3],
        )
CRstring += "\n</table>\n"
#print CRstring
return CRstring 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:28:25.333

虽然我对提供这个有一些保留，因为你似乎不愿意自己尝试这样做，但这里有一个例子展示了它可以做到的一种方式——所有这些都是希望至少你会倾向于努力学习和即使它被交给你，也可能从中学到一些东西......

```
with open('cr_fixes.xml') as file: # get some data to process
    xmlfile = file.read()

def CRlistToTable(CRlist):
    cols = CRlist[0] # first item is header-row of col names on the first line

    CRstrings = ['<table cellspacing="1" cellpadding="1" border="1">']
    # table header row
    CRstrings.append('  <tr>')
    for col in cols:
        CRstrings.append('    <th bgcolor="#67B0F9" scope="col">{}</th>'.format(col))
    CRstrings.append('  </tr>')

    # create a template for each table row
    TR_TEMPLATE = ['  <tr>']
    # 1st col of each row is CR and handled separately since it corresponds to a link
    TR_TEMPLATE.append(
        '    <td><a href="http://prism/CR/{{{}}}">{{{}}}</a></td>'.format(*[cols[0]]*2))
    for col in cols[1:]:
        TR_TEMPLATE.append('    <td>{{}}</td>'.format(col))
    TR_TEMPLATE.append('  </tr>')
    TR_TEMPLATE = '\n'.join(TR_TEMPLATE)

    # then apply the template to all the non-header rows of CRlist
    for items in CRlist[1:]:
        CRstrings.append(TR_TEMPLATE.format(CR=items[0], *items[1:]))
    CRstrings.append("</table>")

    return '\n'.join(CRstrings) + '\n'

FIXES_START_TAG, FIXES_END_TAG = '<Fixes>, </Fixes>'.replace(',', ' ').split()
CRsFixesStart = xmlfile.find(FIXES_START_TAG) + len(FIXES_START_TAG)
CRsFixesEnd = xmlfile.find(FIXES_END_TAG)
info = xmlfile[CRsFixesStart:CRsFixesEnd].strip().splitlines()

# first line of extracted info is a blank-separated list of column names
num_cols = len(info[0].split())

# split non-blank lines of info into list of columnar data
# assuming last col is the variable-length title, comprising reminder of line
CRlist = [line.split(None, num_cols-1) for line in info if line]

# convert list into html table
crInfo = CRlistToTable(CRlist)
print crInfo 
```

输出：

```
<table cellspacing="1" cellpadding="1" border="1">
  <tr>
    <th bgcolor="#67B0F9" scope="col">CR</th>
    <th bgcolor="#67B0F9" scope="col">FA</th>
    <th bgcolor="#67B0F9" scope="col">CL</th>
    <th bgcolor="#67B0F9" scope="col">TITLE</th>
  </tr>
  <tr>
    <td><a href="http://prism/CR/409452">409452</a></td>
    <td>WLAN</td>
    <td>656885</td>
    <td>Age out RSSI values from buffer in Beacon miss scenario</td>
  </tr>
  <tr>
    <td><a href="http://prism/CR/12345,45678">12345,45678</a></td>
    <td>BT</td>
    <td>54567,34567</td>
    <td>Test</td>
  </tr>
  <tr>
    <td><a href="http://prism/CR/379104">379104</a></td>
    <td>BT</td>
    <td>656928</td>
    <td>CR379104: BT doesnt work that Riva neither sends HCI Evt for HID ACL data nor 
        response to HCI_INQUIRY after entering into pseudo sniff subrating mode.</td>
  </tr>
</table> 
```

![在此处输入图像描述](../Images/a281a30d4020f92944ece2c983e67ec3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:55:39.697

这看起来不像 XML 文件 - 它看起来像一对标签内的制表符分隔的 CSV 文档。

我建议查看`csv`用于解析输入文件的模块，然后`jinja2`查看用于编写 HTML 生成的模板引擎。

本质上 - 读取 csv，检查标题的长度（为您提供列数），然后将该数据传递到模板中。在模板中，您将在 csv 结构上循环以生成 HTML。

# java - 如何使用hibernate对数据库中表的列进行排序

> ID：13329479
> 
> 赞同：1
> 
> 时间：2012-11-11T07:50:55.677
> 
> 标签：java, mysql, hibernate

我想在数据库中找到与我的值相近的 10 个表的列的值。所以我想对该列的值进行排序，然后找到比我的值更小或更大的 10 个值。我该怎么做非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:35:05.290

HQL 支持`ORDER BY`.

要么你做

```
Query q = session.createQuery("from Table order by abs(value - :v) asc";
q.setXxx("v", myValue);         /* Xxx is Float or Long or Integer or... */
q.setMaxResults(10);
List<Table> l = q.list(); 
```

或者

```
Query q1 = session.createQuery("from Table where value >= :v order by value asc";
q1.setXxx("v", myValue);         /* Xxx is Float or Long or Integer or... */
q1.setMaxResults(10);
List<Table> l1 = q1.list();
Query q2 = session.createQuery("from Table where value < :v order by value desc";
q2.setXxx("v", myValue);         /* Xxx is Float or Long or Integer or... */
q2.setMaxResults(10);
List<Table> l2 = q2.list();
/* now find the 10 nearest elements in Java code */
...
while (...) {
   ...
} 
```

在第二个示例中，您有两个选择的不便，总共给您 20 行，然后您必须在 Java 代码中找到最接近的 10 个，但如果 value 列上有数据库索引，它可能会快得多。两个示例的结果将相同。

# php - 值得在我的服务器上运行 memcache 吗？

> ID：13329482
> 
> 赞同：1
> 
> 时间：2012-11-11T07:51:26.420
> 
> 标签：php, ubuntu, memcached, ram

这似乎是一个新手问题，但我在谷歌上找不到答案。

我有一台 128mb 内存的服务器。我想知道安装 memcache 是否有助于减少服务器负载，比如说我为 memcache 牺牲了 5-10mb 的内存。这还值得吗？如果是，我将如何将内存缓存限制为 5-10mb 的内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T08:07:02.833

我认为你应该先用 nginx 替换 apache。这将允许您减少内存使用量，甚至可能低于 64MB，以及服务器负载。

然后，您可以为 memcached 分配最多 60MB 的剩余内存，这将有助于进一步减少负载。

# hibernate - Glassfish 版本化执行 import.sql 和 update.sql

> ID：13329483
> 
> 赞同：0
> 
> 时间：2012-11-11T07:51:40.320
> 
> 标签：hibernate, jpa-2.0, glassfish-3

在 JBoss 中，我们可以在部署应用程序时执行 import.sql。

可以在 Glassfish 中实现吗？我们还可以为不同的版本添加几个脚本吗？例如在 2.5 版本中，我添加了这个特定的用户记录。

我目前正在研究 DBMigration 和 LiquiBase，还有其他建议吗？或者根据经验，这两个中哪一个是可靠的？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:40:10.963

不幸的是，经过几天的研究，我认为在 glassfish 中无法实现相同的功能。相反，另一种方法是使用@PostConstruct 方法创建一个@Startup、@Singleton 注释bean，以在Glassfish 启动时创建数据库表行。

```
@Singleton
@Startup
public class InitData {
    @Inject
    private Logger log;

    @PersistenceContext
    private EntityManager em;

    @PostConstruct
    private void init() {
        log.debug("[dropship-ejb] init data");

        @SuppressWarnings("unchecked")
        List<Role> roles = em.createQuery("FROM Role r").getResultList();

        if (roles == null || roles.size() == 0)
            initData();
    }

    private void initData() {
        // insert roles
        createRole("member", "Member");
        createRole("affiliate", "Affiliate");
        createRole("backend", "Backend");
        createRole("admin", "Administrator");
    }

    private Role createRole(String name, String description) {
        Role r = new Role();
        r.setName(name);
        r.setDescription(description);
        em.persist(r);

        return r;
    }
} 
```

# python - 何时删除 django 中的缓存条目

> ID：13329484
> 
> 赞同：0
> 
> 时间：2012-11-11T07:51:40.173
> 
> 标签：python, django, caching

在我的 django 应用程序中，我有一个`BlogEntry`属于一个`Category`.A`BlogEntry`可能属于多个`Category`s

```
class BlogEntry(models.Model):
    creationdate=models.DateField(default=date.today)    
    description=models.TextField()
    author=models.ForeignKey(User,null=True)
    categories=models.ManyToManyField(Category)

class Category(models.Model):
    name=models.CharField(unique=True,max_length=50)
    description=models.TextField(blank=True) 
```

用户可以编辑 a`BlogEntry`并且这样做，可以删除`Category`它所在的 a。

假设以前`blogEntry1`属于`java,scala`。如果用户对其进行编辑以将其删除`scala`。现在该条目只有一个类别，即`java`

在我的 list_view 中，我使用缓存如下

```
from django.core.cache import cache
def list_entries_on_day(request,year,month,day):
    ...
    key = 'entries_day'+'-'+year+'-'+month+'-'+day
    if key not in cache:
        entries = BlogEntry.objects.filter(...args..)
        cache.set(key,entries)
    entries_on_day =cache.get(key)
    ... 
```

假设我今天创建了 2 个条目并将它们放入缓存中。如果我编辑其中一个`BlogEnty`并删除一个类别，即；

```
blogEntry1  has categories :java,scala
blogEntry2 has categories :dotnet,vbasic 
```

最初我查询今天的条目并将结果放入缓存中

缓存现在有`[blogEntry1,blogEntry2]`针对键`'entries_day-2012-11-11'`

现在我进行编辑`blogEntry1`，使其现在具有`java`类别

，我需要从缓存中删除存储的条目吗？（因为缓存`BlogEntry`在修改之前包含一个对象）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:49:50.327

您可以通过为 model.save 注册信号处理程序来使缓存无效

您还可以忍受这样一个事实，即用户将在缓存到期之前看到陈旧的内容（默认为 1 小时），确保他登录的用户不会看到缓存的内容，否则他会鸣喇叭编辑丢失。

嗯，我的回答有点含糊，但我只想说：不，您不必严格地在每次编辑时使缓存无效，这是性能和内容新鲜度之间的选择。

还有一点：缓存使用的首选习惯用法是：

```
entries_on_day = cache.get(key)
if entries_on_day  is None:
    entries_on_day  = BlogEntry.objects.filter(...args..)
    cache.set(key,entries_on_day) 
```

您保存一个缓存查询

# angularjs - MVW 代表什么？

> ID：13329485
> 
> 赞同：360
> 
> 时间：2012-11-11T07:52:17.083
> 
> 标签：angularjs, acronym, mvw

这是 AngularJS 页面的内容描述：

> AngularJS 本来就是 ​​HTML，如果它是为构建 web 应用程序而设计的。具有数据绑定、MVW、MVVM、MVC、依赖注入和出色的可测试性故事的声明式模板全部使用纯客户端 JavaScript 实现！

那么 MVW 代表什么？（考虑到 MVC、MVVW、MVP 等争吵，我猜“随便”，Model-View-Whatever =P）

* * *

## 回答 #1

> 赞同：454
> 
> 时间：2012-11-11T07:57:02.377

它确实代表着任何东西，就像2012 年伊戈尔·米纳尔 (Igor Minar )[对你有用的东西一样（](https://web.archive.org/web/20170627165705/https://plus.google.com/+IgorMinar/posts/DRUAkZmXjNV)***强调我的***）：

> **MVC vs MVVM vs MVP。**这是一个多么有争议的话题，许多开发人员可以花费数小时进行辩论和争论。
> 
> 几年来**+AngularJS 更接近于 MVC**（或者更确切地说是它的客户端变体之一），但随着时间的推移，并且由于许多重构和 api 改进，它**现在更接近于 MVVM** ——$scope 对象可以被认为是 ViewModel，它是被我们称为控制器的函数装饰。
> 
> 能够对框架进行分类并将其放入其中一个 MV* 存储桶具有一些优势。它可以帮助开发人员更轻松地使用它的 api，因为它可以更容易地创建一个代表正在使用该框架构建的应用程序的心理模型。它还可以帮助建立开发人员使用的术语。
> 
> 话虽如此，**我宁愿看到开发人员构建**设计良好并遵循关注点分离的出色应用程序，也不愿看到他们浪费时间争论 MV* 废话。出于这个原因，**我在此声明 AngularJS 为 MVW 框架 - Model-View-Whatever**。凡***代表“任何对你有用的东西”***。
> 
> Angular 为您提供了很大的灵活性，可以很好地将表示逻辑与业务逻辑和表示状态分开。请使用它来提高您的生产力和应用程序的可维护性，而不是就一天结束时无关紧要的事情进行激烈的讨论。

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2014-05-13T21:38:22.207

MVW 代表**Model-View-Whatever**。

为了完整起见，以下是提到的所有首字母缩略词：

> MVC -[模型-视图-控制器](https://stackoverflow.com/tags/model-view-controller/info)
> 
> MVP -[模型-视图-演示者](https://stackoverflow.com/tags/mvp/info)
> 
> MVVM -[模型-视图-视图模型](https://stackoverflow.com/tags/mvvm/info)
> 
> MVW / MV* / MVx -[模型-视图-随便](https://plus.google.com/+AngularJS/posts/aZNVhj355G2)

还有更多：

> HMVC -[分层模型-视图-控制器](https://stackoverflow.com/tags/hmvc/info)
> 
> MMV -[多用途模型视图](http://en.wikipedia.org/wiki/Multiuse_Model_View)
> 
> MVA -[模型-视图-适配器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93adapter)
> 
> MVI -[模型-视图-意图](https://fueled.com/blog/what-is-mvi-model-view-intent/)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-02-19T01:20:13.623

> 话虽如此，我宁愿看到开发人员构建设计良好并遵循关注点分离的出色应用程序，也不愿看到他们浪费时间争论 MV* 废话。出于这个原因，我在此声明 AngularJS 是**MVW 框架 - Model-View-Whatever。凡代表“任何对你有用的东西”。**

学分：[AngularJS Post - Igor Minar](https://web.archive.org/web/20170627165705/https://plus.google.com/+IgorMinar/posts/DRUAkZmXjNV)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-11-27T13:02:54.493

1.  [https://en.wikipedia.org/wiki/MVW](https://en.wikipedia.org/wiki/MVW)
2.  [https://en.wikipedia.org/wiki/AngularJS](https://en.wikipedia.org/wiki/AngularJS)
3.  [https://angularjs.org/](https://angularjs.org/)

AngularJS — 超级英雄的 JavaScript MVW 框架

4.  [https://plus.google.com/+AngularJS/posts/aZNVhj355G2](https://plus.google.com/+AngularJS/posts/aZNVhj355G2)

[![在此处输入图像描述](../Images/8081a0e368011475fe9f16d295a97f77.png)](https://i.stack.imgur.com/xGyxO.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-25T15:57:31.243

我觉得 MWV（Model View Everything）或 MV* 在我看来是一个更灵活的术语来描述 Angularjs 的一些独特性。它帮助我理解它不仅仅是一个 MVC（模型视图控制器）JavaScript 框架，但它仍然使用 MVC，因为它有一个模型视图和控制器。

它也可以被视为 MVP（模型视图演示器）模式。我认为 Presenter 是 Angularjs 中用于视图的用户界面业务逻辑。例如，通过使用可以格式化数据以供显示的过滤器。这不是业务逻辑，而是显示逻辑，它让我想起了我在 GWT 中使用的 MVP 模式。

此外，它还可以是一个MVVM（Model View View Model），View Model部分是两者之间的双向绑定。最后，它是 MVW，因为它具有您可以使用的其他模式以及@Steve Chambers 提到的模式。

我同意其他答案，即在这些术语上学究气可能是有害的，因为关键是要从术语中理解概念，但出于同样的原因，在设计应用程序代码时，充分理解这些术语会有所帮助，知道什么去哪里以及为什么。

# jquery-ui - 调整 jquery-ui 菜单小部件

> ID：13329486
> 
> 赞同：2
> 
> 时间：2012-11-11T07:52:19.877
> 
> 标签：jquery-ui, drop-down-menu, widget

正在使用新的 jquery ui 1.9 菜单小部件制作一个非常标准的下拉菜单，但由于小部件的新颖性和 jqueryui.com 上只有一个非常基本的示例存在一些问题

具体来说，这里的任何人都可以帮助我：

1.  初始化*没有*子菜单图标的小部件？（默认是右向克拉，我无法摆脱它）

2.  制作一个菜单，用户必须单击顶部菜单项（而不是仅仅悬停）以使子菜单出现？当用户的指针悬停在它们上方时，任何更深的子菜单都应该展开。这是典型的下拉行为，例如，用户单击“编辑”以使选项显示为“选择”或“撤消”，但（例如）“选择”下的任何进一步选择将仅通过将鼠标悬停在“选择”上出现。我希望这很清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T00:47:00.423

我不知道如何做你问题的第二部分，但我可以回答第一个问题。

您可以通过设置菜单选项的图标选项来更改默认图标。

首先像这样向您的 CSS 文件添加一个类。

```
.no-icon { display:none;} 
```

然后在创建菜单时设置图标选项。

```
$( "#menu" ).menu(
    { icons: { submenu: "no-icon" } }
); 
```

你不会有任何图标。这是一个[小提琴](http://jsfiddle.net/oumichaelm/XkE3b/1/)

# android - 如何在不停止的情况下重复音频？

> ID：13329490
> 
> 赞同：2
> 
> 时间：2012-11-11T07:52:45.553
> 
> 标签：android, audio

我想重复播放音频。因此，如果第一次单击按钮音频播放，然后第二次单击相同的按钮重复相同的音频而不停止。我怎样才能做到这一点？这是我尝试过的：

```
if (mp != null){
                mp.stop();
                try {
                    mp.prepare();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                mp.seekTo(0);
                mp = null;
            }
            else {
                mp = MediaPlayer.create(Takbiratul_Ihram.this, R.raw.takbir_cowok);
                mp.start();
                mp.setOnCompletionListener(new OnCompletionListener(){
                    public void onCompletion (MediaPlayer arg0){
                        mp = null;
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T08:42:41.297

```
mediaPlayer.setLooping(true); 
```

更多信息在[这里](http://developer.android.com/reference/android/media/MediaPlayer.html)

# google-maps - 是否可以在单击地图时获取某个地点的地址并将其存储在数据库中..并在该地点显示一个标记

> ID：13329491
> 
> 赞同：1
> 
> 时间：2012-11-11T07:52:45.863
> 
> 标签：google-maps

我有一张使用 api v3 的地图...当有人点击地图时，我需要将点击地点的位置保存在数据库中，并在地图上添加标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:08:51.873

[您可以在此处](https://developers.google.com/maps/documentation/javascript/reference)阅读 Google 地图文档。

您正在寻找的是绑定到地图的[`click`事件。](https://developers.google.com/maps/documentation/javascript/events)这是一个例子：

```
google.maps.event.addListener(map, 'click', function(event) {
  placeMarker(event.latLng);
}); 
```

# mysql - 当它的两列时，我如何在mysql中找到所有重复的条目？

> ID：13329492
> 
> 赞同：2
> 
> 时间：2012-11-11T07:52:54.790
> 
> 标签：mysql

我有一张桌子`eng-jap`，它基本上只是一个翻译，所以有一个英文和一个日文专栏。我制作的一个脚本以某种方式导致每个插入都有一个克隆，因此该表中有 1000 个重复条目，例如：

重复示例 A

```
eng                        jap
"mother washes every day"  "母は毎日洗濯する"
"mother washes every day"  "母は毎日洗濯する" 
```

如果它只是一列，我可以使用查询：

```
SELECT eng, COUNT(*) c FROM `eng-jap` GROUP BY eng HAVING c > 1 
```

但是由于该表可以合法地在 eng 或 jap 中具有重复项，只要它不在两者中即可。例如：

重复示例 B

```
eng                        jap
"mother washes every day"  "母は毎日洗濯する"
"every day mother washes"  "母は毎日洗濯する" 
```

这是为了让一个句子有多个翻译。所以我需要更改查询以查找重复项作为两列的组合我猜你可以说。

再次明确。示例 B 很好，我想选择示例 A 之类的所有重复项，以便我可以制作一个脚本来删除所有重复项之一。谢谢，麻烦您了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:35:18.367

我认为您只需要按 eng 和 jap 分组：

```
SELECT eng, jap, COUNT(*) c FROM `eng-jap` GROUP BY eng, jap HAVING c > 1 
```

如果您想删除所有重复项，如果您的行有`id`，则此查询会显示您必须保留的所有 id：

```
select
  SUBSTRING_INDEX(GROUP_CONCAT(CAST(id AS CHAR) order by id), ',', 1) as id
from `eng-jap`
group by eng, jap 
```

（这是一种`GROUP_CONCAT`用于查找每个组合的第一个 id 的技巧`eng/jap`）。此查询显示您必须删除的行的 ID：

```
select id
from
  `eng-jap`
     left join
  (select
     SUBSTRING_INDEX(GROUP_CONCAT(CAST(id AS CHAR) order by id), ',', 1) as id
     from `eng-jap`
     group by eng, jap) `eng-jap-dup`
  on `eng-jap`.id = `eng-jap-dup`.id
where `eng-jap-dup`.id is null 
```

我只使用 join 重写了这个查询，它必须快一点，但如果你的表太大，它可能仍然很慢。

如果它仍然太慢并且仍然无法正常工作，我建议您在表格中再添加两列：

*   `eng-hash`, 你可以在哪里保存`MD5(eng)`
*   `jap-hash`, 你可以在哪里保存`MD5(jap)`

然后像这样更新您的所有记录：

```
update `eng-jap` set `eng-jap`.`eng-hash` = MD5(eng), `eng-jap`.`jap-hash` = MD5(jap) 
```

然后您可以在两列的表上添加唯一索引，忽略所有错误，并让 MySql 为您完成消除重复的工作：

```
alter ignore table `eng-jap` add unique index (eng-hash, jap-hash); 
```

（如果您在创建索引时遇到错误，请参阅以下问题：[MySQL: ALTER IGNORE TABLE Gives "Integrity constraint violation"](https://stackoverflow.com/questions/8053447/mysql-alter-ignore-table-gives-integrity-constraint-violation)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T07:58:31.080

您可以临时添加一列，您只需在其中连接两个当前列的值。然后，您按该列对查询进行分组并消除匹配的行。之后，您再次删除该列。

当然，查询本身也可以这样做，只需按包含两个物理列连接的合成结果列进行分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:17:56.110

我不确定你是否已经在这里得到了答案。我也不确定您是否尝试仅读取重复的行，或者您想要一个没有重复的结果集。这完全取决于您对副本的定义是什么。

1）**假设你只需要重复的行**（正如你的标题所说）：

a)*如果在示例 A 中有重复项，而在示例 B 中没有重复项*，则只需：

```
SELECT eng, COUNT(*) c FROM `eng-jap` GROUP BY eng, jap HAVING c > 1 
```

b)*如果即使在示例 B 中也发现重复项（因为 jap 部分相同）*，则：

```
SELECT   * 
FROM     (
          SELECT   * 
          FROM     (
                    SELECT   * 
                    FROM     `eng-jap` 
                    GROUP BY eng 
                    HAVING   COUNT(*) > 1

                    UNION ALL

                    SELECT   * 
                    FROM     `eng-jap` 
                    GROUP BY jap 
                    HAVING   COUNT(*) > 1
                   ) AS t
          GROUP BY eng
             ) AS v
GROUP BY jap 
```

2）**如果您正在查看没有重复行的记录**（因为您在最后说`i want to select all duplicates like example A so i can make a scrip to remove one of all of the duplicates`）：

a)*如果在示例 A 中有重复项，而在示例 B 中没有重复项*，则只需：

```
SELECT eng, COUNT(*) c FROM `eng-jap` GROUP BY eng, jap 
```

b)*如果即使在示例 B 中也发现重复项*（因为 jap 部分相同），则：

```
SELECT   * 
FROM     (SELECT c.eng, c.jap FROM `eng-jap` c GROUP BY c.eng) t 
GROUP BY t.jap 
```

# python - 访问成员的问题

> ID：13329498
> 
> 赞同：0
> 
> 时间：2012-11-11T07:54:50.860
> 
> 标签：python

我正在尝试实现一个侦听特定端口号的套接字服务器。当我编写没有任何类的代码时，它工作正常。但是当我实现如下类时无法工作：

```
import socket;
from ServerConfig import ServerConfig;

class SyncServerRK:
    def __init__(self):
        self.config = ServerConfig()         #Call Initialize config class        
        #Send my IP address to managing_agent
        self.Listener()         #Call listener method

    def Listener(self):
        s = socket.socket()          # Create a socket object
        host = socket.gethostname()                     # Get local machine name
        port = self.config.Connect_Port()               # Reserve a port for your service.
        s.bind((host, port))         # Bind to the port
        while True:
            c, addr = s.accept()     # Establish connection with client.
            print ('Got connection from', addr)
            c.send('Thank you for connecting'.encode())
            print ('Message received:',c.recv(1024).decode())
            c.close()                # Close the connection            
        print(self.config.Managing_Agent())

if __name__ == "__main__":
    SyncServerRK() 
```

我收到的错误是：

```
Traceback (most recent call last):
  File "C:/Share/SyncServerRK.py", line 24, in <module>
    SyncServerRK()
  File "C:/Share/SyncServerRK.py", line 8, in __init__
    self.Listener()         #Call listener method
  File "C:/Share/SyncServerRK.py", line 16, in Listener
    c, addr = s.accept()     # Establish connection with client.
  File "C:\Python33\lib\socket.py", line 135, in accept
    fd, addr = self._accept()
OSError: [WinError 10022] An invalid argument was supplied 
```

有人可以建议如何使用面向对象的哲学实现带有线程的服务器套接字。

运行良好的非类版本：

```
import socket               # Import socket module

s = socket.socket()         # Create a socket object
host = socket.gethostname() # Get local machine name
port = 12345                # Reserve a port for your service.
s.bind((host, port))        # Bind to the port

s.listen(5)                 # Now wait for client connection.
while True:
   c, addr = s.accept()     # Establish connection with client.
   print ('Got connection from', addr)
   c.send('Thank you for connecting'.encode())
   print ('Message received:',c.recv(1024).decode())
   c.close()                # Close the connection 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:54:40.633

您在基于类的版本中缺少`s.listen(5)`。套接字必须绑定到一个地址并在接受连接之前侦听连接。

# objective-c - ActionSheet showFromTabBar

> ID：13329500
> 
> 赞同：0
> 
> 时间：2012-11-11T07:55:15.720
> 
> 标签：objective-c

为什么动画从上到下？

我想从底部（TabBar）显示动画。

```
[ActionButton showFromTabBar:(UITabBar *)self.view]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:27:26.040

尝试这个：

```
[ActionButton showInView:self.view]; 
```

# javascript - 在 Javascript 中淡化和重新出现文本集

> ID：13329507
> 
> 赞同：1
> 
> 时间：2012-11-11T07:55:54.297
> 
> 标签：javascript, html, css

如何编写闪烁文本数组（在本例中为单词）的 Javascript？我对 Javascript 很陌生。我有 5 个字符串数组，我希望它们按顺序闪烁和淡出。如果最后一个到达，它将从头开始。我并不是真的在寻找急剧消失和出现，而是一种逐渐消失和重新出现的机制，如新闻公告。

```
- "Car"
- "Dog"
- "Sky"
- "Building"

car - <fade> - <appear> - dog - <fade> - <appear> - sky  ... etc. 
```

如果有人提供链接或实际代码，我愿意快速接受答案并给你积分。

它是这样完成的：

> ```
>  var array = ["Hello", "World"]
>     var len = array.length
>     for (var i = 0; i < array.length; i++) {
>         var interval = loopVerySlowly(array, i);
>     }
> 
>     function loopVerySlowly(array, index) {
>         function doSomething() {
>             var _content = document.getElementById("hello");
> 
>             _content.innerHTML = array[index];
> 
>             index = (index + 1) % array.length; // increment for next time
>         }
> 
>         return setInterval(doSomething, 1000 * 5);
>     } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:12:43.400

当我开始学习 javascript 时，每个人都喜欢学习 jQuery，它让一切变得更容易，我会将同样的帮助传递给你“学习 jQuery”。更多[在这里](http://www.jquery.com)

淡入淡出在 jquery 中要容易得多，所以这里有一些文档
[，](http://api.jquery.com/fadeIn/) 淡出也在[这里](http://api.jquery.com/fadeout/)
。

所以有点背景。jQuery 是一个 javascript 库，它的口号是“少写多做”这正是它所做的，如果不是 jQuery，下面的示例会大得多。JQuery 需要像您的大多数 javascript 文件一样放置在您的网站脚本中，在下面的示例中，我使用谷歌内容交付网络 (CDN)，它位于[https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide) . 您也可以下载它并将其保存在您的服务器上，但如果您的服务器上的带宽和空间有限，那么让谷歌托管它可能会更好。

举个例子

```
 <html>
      <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">
     $(document).ready(function(){
       $(".fadein").click(function(){
            $(".fade").fadein('slow');
        });
        $(".fadeout").click(function(){
            $(".fade").fadeOut('slow');
        });
    });

</script>

      </head>
      <body>
        <div class="fade" style="background: black; width: 300px; height: 300px;position: absolute"><p> I can fadein</p></div>
        <button class="fadein">fadein<button
        <button class="fadeout">fadeout</button>

      </body>
    </html> 
```

[这](http://w3schools.com/jquery/)也是我刚刚使用的所有内容的示例

这里是一个 jsFiddler：位于[Here](http://jsfiddle.net/ryanc1256/AXpMX/)还有一个 jsfiddler 用于淡入淡出和按顺序显示[这里的例子](http://jsfiddle.net/ryanc1256/AXpMX/4/)

# fluent-nhibernate - 在 S#arp 架构中使用 MemCached 和 Fluent Nhibernate

> ID：13329513
> 
> 赞同：1
> 
> 时间：2012-11-11T07:58:25.323
> 
> 标签：fluent-nhibernate, memcached, s#arp-architecture

我正在使用 S#arp 架构来开发我的网站。我决定使用 memcached 作为我的缓存系统。我已经成功地将 memcached 合并到我的网站中，但是我在尝试使用我的 FNH 对象时发现了一些问题。[我在这里](https://stackoverflow.com/questions/2020730/nhibernate-l2-cache-configuration-in-fluent-nhibernate)看到了一些解释如何使用它的代码，但我不知道该代码应该放在哪里。请帮我。

谢谢，

伊扎尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:17:30.823

开箱即用的 S# 目前无法实现您想要做的事情，因为它使用了未考虑到这一点的 NHibernateInitializer。在 3.0 版本中，我们将摆脱这个类以支持以不同的方式初始化 NH，这将允许其他人根据需要进行修改。

抱歉，我无法提供更多帮助。

# css - 在 CSS3 中 list-style-type 可以设置为 NONE 吗？

> ID：13329515
> 
> 赞同：1
> 
> 时间：2012-11-11T07:58:53.687
> 
> 标签：css, w3c-validation

我正在通过[W3C 验证器](http://jigsaw.w3.org/css-validator/#validate_by_input)验证这个 CSS ：

```
#breadcrumbs {
  list-style-type: none;
  padding-left: 0;
} 
```

并得到这个输出：

```
Value Error : list-style-type none is not a list-style-type value : none 
```

这里的值有什么问题`none`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T12:22:21.477

是的，`list-style-type: none`在 CSS3 中有效，如在 CSS 2.1 中。这既适用于最新的[工作草案](http://www.w3.org/TR/css3-lists/#marker-content)，也适用于 CSS 列表和计数器模块 3 级的当前[编辑草案](http://dev.w3.org/csswg/css3-lists/#list-style-type)。

但是验证器在这里有一个错误；两天前才报道过：[Bug 19927](https://www.w3.org/Bugs/Public/show_bug.cgi?id=19927) - list-style-type does not validate。该错误似乎比最初报告的更广泛；甚至`list-style-type: disc`失败！

验证器错误当然不会影响浏览器行为。你可以继续使用`list-style-type: none`。

**更新：**验证器错误现已修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:12:26.160

我不知道为什么，但试试这个：

```
#breadcrumbs {
  list-style:none;
  padding-left: 0;
} 
```

这应该可以很好地验证并`list-style`具有相同的效果。

# python - Django书第5章数据库引擎设置

> ID：13329516
> 
> 赞同：2
> 
> 时间：2012-11-11T07:59:44.210
> 
> 标签：python, mysql, django

我很确定我准确地遵循了本教程的程序，但我仍然遇到错误 =/

目前，我的 settings.py DATABASES 看起来像这样

```
DATABASES = {
    'default': {
        'ENGINE': 'mysql',  # Add 'postgresql_psycopg2', 'mysql','sqlite3' or 'oracle'.      
        'NAME': 'mydb',     # Or path to database file if using sqlite3.
        'USER': 'user',     # Not used with sqlite3.
        'PASSWORD': 'pwd',  # Not used with sqlite3.
        'HOST': '',         # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',         # Set to empty string for default. Not used with sqlite3.
    }
} 
```

本教程告诉我在 ENGINE 中有“mysql”。但是，当我尝试使用命令“python manage.py shell”时出现此错误

```
django.core.exceptions.ImproperlyConfigured: 'mysql' isn't an available database backend.
Try using django.db.backends.mysql instead.
Error was: No module named mysql.base 
```

这就是为什么我有`django.db.backends.mysql`旁边的`ENGINE`。

在这些设置之后，教程告诉我输入这些命令

```
'python manage.py shell'     <--- works fine

from django.db import connection      <--- works fine

cursor = connection.cursor()          <--- uh oh 
```

运行游标命令后，我收到此错误

[http://pastebin.com/8MtYq7rg](http://pastebin.com/8MtYq7rg)

不太清楚这意味着什么=/

当我尝试运行我的服务器时，`python manage.py runserver`我收到了这个错误。也不确定这意味着什么，但最后一个错误似乎是相同的。

[http://pastebin.com/91U3dz73](http://pastebin.com/91U3dz73)

此外，我在网上查找`python manage.py dbshell`用于测试我的数据库访问权限，这是我得到的消息。

`Error: You appear not to have the 'mysql' program installed or on your path.`

我在 reddit 上发布了这个问题，看看是否可以得到任何额外的帮助。我希望其中一些信息能为这个问题提供额外的帮助。

1.  在 shell 中输入 MySQL 并查看结果
2.  发布您如何安装 MySQL。您是否已经为 Django 制作了一张表格以供使用？
3.  您使用的是什么操作系统？

    1.  当我在 shell 中输入 MySQL 时，什么也没有发生。当我输入命令'python manage.py shell'然后是MySQL。我收到一个错误“NameError: name 'MySQL' is not defined”。当我在终端输入 MySQL 时，它显示 MySQL: command not found

    2.  我如何安装 MySQL 是我下载了文件，然后提取了 tar 文件所在的位置。接下来，我将提取的文件夹放入 /home/Development 目录。我所有的代码都存储在 /home/Development/djcode/mysite/mysite/

    3.  我正在使用 Ubuntu

****** *** ******更新*********更新****** ** *** ** *** ** *** ** *** ******

 **所以我相信由于我没有安装/下载 MySQL，我得到了我的错误。我所拥有的是 MySQL-Python，它不是一回事......但无论如何，我下载/安装了 MySQL 并使用“python manage.py shell”然后“from django.db import connection”和“cursor = connection”运行 python shell 。光标（）'

但是，我收到以下错误

OperationalError: (1045, "Access denied for user 'bradford'@'localhost' (using password: YES)")

目前不知道该怎么做=/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T08:42:01.733

我猜你错过了[Python MySQLDB](http://sourceforge.net/projects/mysql-python/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:12:08.770

看这里[https://docs.djangoproject.com/en/dev/ref/settings/#engine](https://docs.djangoproject.com/en/dev/ref/settings/#engine)

你应该使用

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        ....
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T23:32:11.433

这是对您的更新的回应。那是一个 MySQL 错误。MySQL 对用户访问数据库的方式和位置设置了限制。[您可以在此处](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)找到该文档，但**tl;dr**是您需要确保用户存在、密码正确以及您从正确的域进行连接。**

# ruby - Ruby 中的迭代

> ID：13329517
> 
> 赞同：0
> 
> 时间：2012-11-11T07:59:49.327
> 
> 标签：ruby, arrays, hash, iteration

> **可能重复：**
> [计算 ruby​​ 数组中的重复元素](https://stackoverflow.com/questions/569694/count-duplicate-elements-in-ruby-array)

我刚开始学习 ruby​​，我希望实现这样的目标。假设我有一个数组

```
["student", "student", "teacher", "teacher", "teacher"] 
```

我要做的是计算学生和老师的数量并将其存储到哈希中，这样我就可以得到

```
{:student= > 2, :teacher=> 3} 
```

有人可以给我一些关于如何做到这一点的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T08:04:16.907

你应该检查[这个](https://stackoverflow.com/questions/569694/count-duplicate-elements-in-ruby-array)答案，它给出了这个例子：

```
# sample array
a=["aa","bb","cc","bb","bb","cc"]

# make the hash default to 0 so that += will work correctly
b = Hash.new(0)

# iterate over the array, counting duplicate entries
a.each do |v|
  b[v] += 1
end

b.each do |k, v|
  puts "#{k} appears #{v} times"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:03:33.260

```
list = ["student", "student", "teacher"]

# Initializing the hash with value 0 so that we can use += 1
count = Hash.new(0)  

list.each {|el| count[el] += 1}

#Number of student  
count['student'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T12:22:09.807

```
xs.inject({}) { |acc, x| acc.update(x => (acc[x] || 0) + 1) }
#=> {"student"=>2, "teacher"=>3} 
```

或者：

```
xs.each_with_object(Hash.new(0)) { |x, acc| acc[x] += 1 }
#=> {"student"=>2, "teacher"=>3} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T13:08:05.750

这个特殊问题是如何选择正确算法的一个很好的例子，但更重要的是正确的*数据结构*可以大大简化解决方案。事实上，在这种特殊情况下，选择正确的数据结构将使算法变得如此微不足道，以至于它基本上完全消失了：数据结构已经*是*答案。

我正在谈论的数据结构是 a `Multiset`: a`Multiset`就像 a `Set`，除了它不只存储唯一项目，而是存储每个项目在`Multiset`. 基本上，a`Set`告诉您某个特定项目是否在 中`Set` *，*此外，a`Multiset`还告诉您该特定项目在 中的*频率*`Multiset`。

不幸的是，Ruby 核心库或标准库中没有`Multiset`实现，但有几个实现在网络上流传。

你实际上只需`Multiset`要从你的`Array`. 这是一个例子：

```
require 'multiset'

ary = ["student", "student", "teacher", "teacher", "teacher"]

print Multiset[*ary] 
```

是的，这就是它的全部。这打印：

```
#2 "student"
#3 "teacher" 
```

就是这样。例如，使用[https://GitHub.Com/Josh/Multimap/](https://GitHub.Com/Josh/Multimap/)：

```
require 'multiset'

histogram = Multiset.new(*ary)
# => #<Multiset: {"student", "student", "teacher", "teacher", "teacher"}>

histogram.multiplicity('teacher')
# => 3 
```

例如，使用[http://maraigue.hhiro.net/multiset/index-en.php](http://maraigue.hhiro.net/multiset/index-en.php)：

```
require 'multiset'

histogram = Multiset[*ary]
# => #<Multiset:#2 'student', #3 'teacher'> 
```

另一种可能性是使用 a `Hash`，这基本上只是意味着`Multiset`您不必为您处理元素计数，而是必须自己做：

```
histogram = ary.inject(Hash.new(0)) {|hsh, item| hsh.tap { hsh[item] += 1 }}
print histogram
# { "student" => 2, "teacher" => 3 } 
```

但是，如果您不计算自己，而是使用自己`Enumerable#group_by`对元素进行分组，然后将分组映射到它们的大小，那么您可以更容易地做到这一点。最后，转换回 a `Hash`：

```
Identity = ->x { x }

print Hash[[ary.group_by(&Identity).map {|n, ns| [n, ns.size] }]
# { "student" => 2, "teacher" => 3 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T09:38:39.653

```
a = ["student", "student", "teacher", "teacher", "teacher"]

a.inject({}){|h, e| h[e] ||= a.count(e); h}
# => {"student"=>2, "teacher"=>3} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T09:50:02.337

```
list = ["student", "student", "teacher", "teacher", "teacher"] #original list

counts = {} #where the count hash will be

list.uniq.map{|x| counts[x]= list.count(x)} 
```

对于列表中的每个唯一项目，将其从原始列表中的计数放入计数哈希中。

一条线。干净简单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-11T08:43:06.830

在 SO 上，它真的已经死了，但我建议：

```
Hash[*a.group_by{|x| x}.flat_map{|k, v| [k.to_sym,v.size]}]
#=> {:student=>2, :teacher=>3} 
```

# vb.net - 更改多个表单上的连接字符串

> ID：13329520
> 
> 赞同：1
> 
> 时间：2012-11-11T08:00:04.713
> 
> 标签：vb.net, connection-string, sqlconnection

我的项目中有多种形式。有时我在笔记本电脑上工作，有时我在台式机上工作。问题是，当我的项目从笔记本电脑转移到台式机时，反之亦然，我必须更改项目中所有表单上的连接字符串。

这是我的连接字符串。我在全球范围内宣布了它。

```
Dim CN As New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=D:\Documents and Settings\Adriane05\Desktop\ThesisDB.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True") 
```

如何在不更改所有表单的情况下更改单个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:07:37.090

有几种方法可以实现这一点。首先，您可以将项目文件夹映射到所有计算机上的相同驱动器号，这样您的连接字符串就不会改变。我默认这样做是因为我的项目位于使用 TrueCrypt 加密的驱动器上

另一种方法是简单的代码模式。将连接字符串存储在设置或全局变量中，并在应用程序加载时运行如下内容：

```
if Environment.MachineName.Equals("laptop") then
    connectionString = ' Connection string 1
ElseIf Environment.MachineName.Equals("desktop") then
    connectionString = ' Connection string 2 
else
    connectionString = My.Settings.ConnectionString
End If

databaseProvider.Open(connectionString) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:06:28.040

在某处声明一个全局变量（或常量）并将您帖子中提到的语句替换为

```
Dim CN As New SqlConnection(NameOfGlobalVariable) 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T06:44:31.993

我建议在`config`文件中移动连接字符串。请参阅这些教程：

[在配置中存储连接字符串](http://www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config)

[连接字符串和配置文件](http://msdn.microsoft.com/en-us/library/ms254494.aspx)

# java - 通过 NFS 复制文件的困难

> ID：13329522
> 
> 赞同：4
> 
> 时间：2012-11-11T08:00:22.430
> 
> 标签：java, nfs

我有一个 NFS 挂载，我试图将文件复制到我的 Java 应用程序中。

在比较源文件和目标文件的长度后， Apache Commons`FileUtils.copy()`会导致“无法复制完整内容...”消息。但是，当我浏览文件系统时，我可以验证文件是否相同。

Java NIO 的`Files.copy()`结果是`java.nio.file.AccessDeniedException`. 创建一个具有零权限的空文件。

为了进行完整性检查，我针对非 NFS 目录运行了代码，一切都很好。我猜有某种异步行为正在发生。

出口声明如下：

```
/mnt/gluster *(rw,sync,fsid=0,no_root_squash,no_subtree_check) 
```

需要注意的一点是，这是一个使用 Gluster 安装在 FUSE 上的分布式文件系统。我不知道这是否有任何关联。我的 NFS 知识有点零散，所以我希望我只是忘记了做某事。

为了完整起见，NFS 服务器是一个 Ubuntu 机器，我将它安装在 Mac 上。

# php - 如何向现有应用程序添加测试？

> ID：13329526
> 
> 赞同：7
> 
> 时间：2012-11-11T08:01:07.703
> 
> 标签：php, unit-testing, phpunit

我目前正在开发一个现有的 PHP 项目。当前的代码设计不是很好，并且错误开始堆积。所以我想要的是添加一个全面的测试套件以使其更可靠。

已经有一些单元测试是用 PHP 单元编写的，但是，测试覆盖率并不是那么好。该项目并没有真正遵循 TDD 或任何类型的测试密集型流程。我希望尽可能地测试所有内容。但问题是我不确定是否可以为现有代码添加测试。正如我所提到的，代码结构不是很好，因此添加测试可能会变得非常麻烦和困难。

有没有更好的方法在这样的项目中添加单元测试？还是我应该重写项目？也许一个模块一个模块？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T08:44:11.143

尝试向现有应用程序添加单元测试时出现的大多数问题都是因为通常该应用程序没有将其功能划分为可以有效测试的类和方法。

这实际上不仅是 TDD 的主要优势之一，而且是在开发应用程序时编写测试的良好实践。测试迫使您编写具有明确目的和尽可能少副作用的简洁方法。

完全重写将是最终的解决方案，但我怀疑您是否有时间和精力这样做；而且，这样的动作可能不是我完全需要的！

老实说，*根据我的经验*，最好的方法是立即开始为每个模块编写测试，并在需要的地方进行重构。从核心元素开始，例如用户注册和管理位，然后再进一步。

这似乎是一项艰巨的任务，它可能会让你觉得你的工作是徒劳的，但从长远来看，这些测试将大大减少调试应用程序所花费的时间！

**进一步阅读：**

*   [我在 AltDevBlogADay 上推荐的一篇很棒的文章（被 bitsquid 镜像为旧的 url 404'ed）](http://bitsquid.blogspot.nl/2012/08/cleaning-bad-code.html)。这不仅仅是关于编写测试，而是解释了许多与处理糟糕（或者在你的情况下，可能只是难以测试）代码相关的概念。
*   [更多关于 PHP 单元测试](http://codeutopia.net/blog/2009/06/17/unit-testing-3-writing-tests-for-existing-code/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T18:48:01.450

我们只是开始测试我们可以测试的东西。处理数据和返回结果的类现在可以编写测试，这些测试可以工作，并验证可以测试类的一小部分。开始时令人生畏，但我们现在有大约 45% 的代码覆盖率，有 3000 多个测试。当人们重构代码时，这些测试当前会捕获错误。

我们试图隔离使测试更容易的模块和类，并且一些测试只是测试构造函数、公共接口等......如果它们发生变化，那么就会出现问题，因为某些东西可能会中断。

当发现新的错误时，我们首先尝试编写一个测试来说明错误，然后我们进行代码更改以解决测试。这使我们的测试继续前进。

每天，我们都会添加一些测试，直到结果开始令人鼓舞，测试基础更大，代码覆盖率更完整。在此过程中的某个时刻，我们的测试实际上发现了当人们添加或更改破坏某些遗留接口的代码时所产生的问题。这是自动化测试的第一个成功案例，因为它是在没有手动测试旧输入文件的情况下发现的，而旧输入文件可能没有经过测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T08:47:16.187

尝试将测试添加到已经存在的代码库时要非常小心。正如 Andrei 指出的那样，任务非常庞大，并且从一开始就集成测试时，TDD 效果最好。

尝试将测试添加到您的核心功能中，并通过开发人员测试其余部分以老式方式修复错误。

# api - Web 交互式服务器端 3D 渲染

> ID：13329533
> 
> 赞同：2
> 
> 时间：2012-11-11T08:03:08.097
> 
> 标签：api, web, 3d, rendering

我需要在网站上提交 3d 渲染作业并通过 URL 或 HTTP 接收结果，只是一张静止图像。

我准备好了 3D 场景和纹理贴图。作业将以 Javascript 发送。然后将服务器中的 3D 场景和纹理发送到渲染器。结果（静止图像）应发送回网站，以便显示。

你可以假设我有一个 HTML。

云或商业 3D 渲染农场中的哪些 3D 渲染工具可以提供此功能？
否则，开发系统需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:24:04.807

您可能想查看[Render Rocket](http://www.renderrocket.com)。一种 3D 云渲染服务，可为许多顶级 3D 应用程序（Maya、3ds Max、C4D 等）提供支持。这个过程正是你描述的。提交场景，渲染帧，然后下载。你提到了 JavaScript。我不确定您使用 JS 的工作流程，但如果您有原生 3D 格式的场景，则可能不需要 JS 部分。如果是 RR 的管道被配置为适应许多不同的自定义工作流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:55:01.507

HDVR(R) 完全符合您的要求，它基于 CPU，因此对云友好。除了它的交互质量远高于任何其他 VR 解决方案......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:32:30.667

> [IMPFarm](http://sourceforge.net/projects/impfarm/)是[POV-Ray](http://www.povray.org)光线追踪器的渲染农场。所有通信都是通过 http 与 XML 文档进行的。服务器和客户端是跨平台的。管理和报告是使用网页完成的。

# php - 如何在 wp-config.php 的 wordpress 数据库配置中定义和选择随机用户？

> ID：13329534
> 
> 赞同：0
> 
> 时间：2012-11-11T08:03:16.277
> 
> 标签：php, database, wordpress

```
$randomuser = array("user","user1","user2","user3","user4","user5");
shuffle($randomuser);

/** MySQL database username */
define('DB_USER', $randomuser); 
```

如何使上述代码在 wp-config.php 中工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:14:41.070

您也可以在第二个参数中设置要获得多少随机用户：

```
$random_users = array_rand($random_user,5); //gets 5 random users from array 
```

# scala - 隐式记录 scala 中演员收到的消息

> ID：13329535
> 
> 赞同：0
> 
> 时间：2012-11-11T08:03:24.000
> 
> 标签：scala, actor, message-passing

我是这种花哨的语言 scala 的新手，我正在尝试创建一个用于记录 scala 演员的库。我的库有一个类 Logger，它扩展了 Actor 类。因此，任何使用 Actor 模型的 Scala 应用程序都可以从此类扩展，或者从 Actor 类扩展以添加日志记录功能。例如。MyClass 类扩展了 Logger。在我的 Logger 类中，我实现了这样的逻辑，即每当有人向某个参与者发送消息时，它都会被发送参与者的日志文件记录下来。为此，每当有人向另一个参与者发送消息而不是调用 scala 发送函数时，例如

```
caller ! msg 
```

图书馆的用户调用

```
send(caller,msg) 
```

然后，库函数将在日志中为此消息创建一个条目。这工作正常。我希望为演员收到的消息添加类似的功能。也就是说，每当参与者收到消息时，库都应该在日志文件中为收到的消息创建一个条目。这样做的一种方法是，每当用户收到一个方法时，他都可以显式调用这样的日志方法，

```
while (true) {
   receive {
     case msg =>
       log(sender, msg)
       // do some stuff
   }
} 
```

日志函数在日志中创建一个条目。我希望用户不需要编写此行 log(sender, msg) 以便库对用户是透明的，并且没有用户需要编写的添加代码，并且所有内容都由 Logger 类隐式记录。有没有办法做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:41:26.883

在 Logger 类中，重写该方法`receive`，以便它调用`log(sender, msg)`然后`super.receive()`.

# android - Android：AsyncTask 中的 HTTP 请求不是并发的

> ID：13329537
> 
> 赞同：4
> 
> 时间：2012-11-11T08:03:32.890
> 
> 标签：android, concurrency, android-asynctask

我正在为[我当地的电影院](http://www.sderot-cin.org.il/info/about/about-003.htm)写一个粉丝应用程序，它显示了接下来几天的放映日历。每天的电影列表是使用来自该站点的[参数化 HTTP 调用](http://www.sderot-cin.org.il/cgi-webaxy/sal/sal.pl?ID=839468_cinematheque&act=search2&dbResOptions=hideResTabTitle=0&getValueAJAX=dataid,f1,f2,f3,f4&dbid=shows2009&query=sort%3CD%3Ef3%3CD%3Esort2%3CD%3Ef4%3CD%3Ef2%3CD%3E8/11/2012%3CD%3Ef2%3CD%3E8/11/2012)检索的（答案包含希伯来语，所以如果您单击链接并得到一些乱码，它可能没问题）。

该应用程序会显示接下来八天的日程安排，因此它会根据每天的日程安排请求拨打 8 个电话。

```
private class GetMoviesTask extends AsyncTask<Integer, Void, List<Film>> 
```

`doInBackground()`每天检索电影列表，并`onPostExecute()`更新界面。

AsyncTask 从以下位置调用`MainActivity.onCreate()`：

```
for (int i=0; i<NUMBER_OF_DAYS_TO_VIEW; i++){
    new GetMoviesTask().execute(i);
} 
```

问题是 AsyncTask 没有同时执行。日子一天天地慢慢加载，慢得令人痛苦：

![在此处输入图像描述](../Images/412b973269a33f0026de387cb4a30d6f.png)

![在此处输入图像描述](../Images/5319a9a3c35c0a0b15a766e4ae9a7e6d.png)

![在此处输入图像描述](../Images/4ade5815371548c47494424e0e1faf0c.png)

同时启动这些 AsyncCalls 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T08:51:41.917

`AsyncTask`众所周知，它会在 Android 4.x 中出现回归，系统*一次执行一个，*而不是像自 Android 1.6 以来那样同时执行它们。这是设计使然：基本上，在较新的平台上，您可以通过调用`executeOnExecutor()`而不是`execute()`. Mark Murphy（在 StackOverflow 上称为[Commonsware](https://stackoverflow.com/users/115145/commonsware) ）在他的博客上[整理了所有详细信息。](http://commonsware.com/blog/2012/04/20/asynctask-threading-regression-confirmed.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T08:12:37.093

基本上 AsyncTask 只为您创建一个在后台运行的线程。

你可以通过两种方式实现你想要的。

*   首先，您可以为每个操作创建单独的 AsyncTask。
*   其次，通过在 doInBackground 方法中创建多个线程并发出并发请求和进程。之后，您可以通过将它们发布到 onProgressUpdate 或 onPostExecute 来通知您的 UI。

检查这个

[带有线程的android asynctask](https://stackoverflow.com/questions/9939143/android-asynctask-with-threading)

# java - 画布的密度

> ID：13329538
> 
> 赞同：1
> 
> 时间：2012-11-11T08:03:51.560
> 
> 标签：java, android, android-canvas

我无法在我的`onDraw`函数中获取 Canvas 的密度。如果我在模拟器中运行代码`c.getDensity()`，其中“c”是我的`Canvas`，我得到 320，这是我期望的密度。但是当我在我的实际手机上运行这段代码时，同样的函数返回 0。你可以想象，视觉结果是根本不同的......

从 xml 文件或`onDraw`函数定义位图背景没有任何区别。

您对这种行为的原因有任何想法吗？

使用的 Android 版本为 4（模拟器为 4.1.2，实际手机为 4.1.1）。

感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:13:25.593

在我的实际手机上，返回的密度`getDensity`为 0，因为它被配置为强制使用 GPU。禁用此选项后，将返回正确的密度 320。

# java - sql中出现ibatis错误

> ID：13329539
> 
> 赞同：0
> 
> 时间：2012-11-11T08:04:04.217
> 
> 标签：java, mysql, sql, ibatis

```
select 
                ID,NAME,SEX,RESIDENCE,EMAIL,MOBILE,PASSWORD,MOOD,BIRTHDAY,AVATAR,TYPE,MONEY
             from 
                user 
             where 
                ID in
                    (select USER2 as id from friend where USER1=#userId# and STATUS= 1 union select user1 as id from friend where user2 = #userId#  )

select 
                ID,NAME,SEX,RESIDENCE,EMAIL,MOBILE,PASSWORD,MOOD,BIRTHDAY,AVATAR,TYPE,MONEY
             from 
                user 
             where 
                ID in
                    (select USER2 as id from friend where USER1=#userId# and STATUS= 1） 
```

如果我使用第二个 sql 没关系，如果我先使用它会运行错误。我认为参数没问题，因为两个 sql 具有相同的参数

```
org.springframework.jdbc.UncategorizedSQLException: SqlMapClient operation; uncategorized SQLException for SQL []; SQL state [null]; error code [0];   
--- The error occurred in com/bit/hapin/dao/activity/activity.xml.  
--- The error occurred while applying a parameter map.  
--- Check the getInviteFriendForActivity-InlineParameterMap.  
--- Check the parameter mapping for the 'userId' property.  
--- Cause: java.lang.ArrayIndexOutOfBoundsException: 1; nested exception is com.ibatis.common.jdbc.exception.NestedSQLException:   
--- The error occurred in com/bit/hapin/dao/activity/activity.xml.  
--- The error occurred while applying a parameter map.  
--- Check the getInviteFriendForActivity-InlineParameterMap.  
--- Check the parameter mapping for the 'userId' property.  
--- Cause: java.lang.ArrayIndexOutOfBoundsException: 1
    at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.translate(SQLStateSQLExceptionTranslator.java:121)
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.translate(SQLErrorCodeSQLExceptionTranslator.java:322)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:212)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.executeWithListResult(SqlMapClientTemplate.java:249)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForList(SqlMapClientTemplate.java:296)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForList(SqlMapClientTemplate.java:290)
    at com.bit.hapin.dao.activity.ActivityDAOImpl.getInviteFriendForActivity(ActivityDAOImpl.java:51) 
```

所以我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:26:38.470

第一次查询没有问题。但，

在第一个查询中：

```
select USER2 as id from friend ..... select user1 as id from friend .... 
```

这意味着`friend`表有`USER2`和`user1`列。如果是这样，请确保表中的表列（USER2，user1）`friend`。虽然我不知道您的程序要求，但第二个查询（在您的帖子中）就足够了，因为您正在尝试`union`使用`single/same`表。

也可以参考：[Union on the same table](https://stackoverflow.com/questions/2965174/union-on-the-same-table)

# objective-c - Xcode 4.5.2：无法在调试器中检查对象属性

> ID：13329544
> 
> 赞同：2
> 
> 时间：2012-11-11T08:05:07.297
> 
> 标签：objective-c, xcode, debugging, xcode4.5

当我在 Xcode 4.5.2 中调试并在检查器中打开对象的显示三角形时，我经常看不到它的属性。例如，在下面的屏幕截图中，我试图检查 UILabel，但没有出现 UILabel 的“文本”和其他属性。

![在此处输入图像描述](../Images/c3ebd78a32eec4dd84a7c5e1080d5f88.png)

另一方面，如果我要继承 UILabel（例如 MyUILabel）并创建自定义属性（例如 customText），则该属性将在检查器中正常显示：

![在此处输入图像描述](../Images/32e87cbf5b70bdfd84bd6631e5719773.png)

知道为什么我没有出现“文本”和其他 UILabel 属性吗？这是我需要打开的设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:44:48.807

从评论迁移到答案（不是很多）：

**不，这可能是一个错误**

# php - 无法让 PHP 在 osx 10.8.2 上运行

> ID：13329550
> 
> 赞同：1
> 
> 时间：2012-11-11T08:05:40.483
> 
> 标签：php, apache, installation, osx-mountain-lion

我曾尝试按照许多教程来设置 OSX 10.8 原生的 PHP，但未能完成，并且觉得如果我继续下去，情况会变得更糟。这是我无法告诉您的信息（如果您需要更多信息，请告诉我）：

在终端中，键入`which php`结果`/usr/bin/php`

我安装了 XCode 4.5.2

我安装了命令行工具

我安装了 XQuartz-2.7.4

我安装了 GCC 10.7 v2

在 finder 中，我的`/Library/WebServer/Documents/`节目： `info.php`和一个`orig`包含`index.html.en`,的文件夹`info.php`（我复制了这个以测试在不同范围内运行的 PHP - ¿也许？，显然没有工作）`PoweredByMacOSX.gif`，和`PoweredByMacOSXLarge.gif`

这些目录确实存在：

```
/usr/local/include
/usr/local/bin
/usr/local/lib
/usr/local/man/man1 
```

`~/.pearrc`返回`-bash: /Users/me/.pearrc: No such file or directory`

我在 rMBP 上运行 10.8.2

我的`.bash_profile`：

```
export PATH="$HOME/bin:$PATH"
if [ -f `brew --prefix`/etc/bash_completion.d/git-completion.bash ]; then
. `brew --prefix`/etc/bash_completion.d/git-completion.bash
fi
GIT_PS1_SHOWDIRTYSTATE=true
if [ -f `brew --prefix`/etc/bash_completion.d/git-prompt.sh ]; then
. `brew --prefix`/etc/bash_completion.d/git-prompt.sh
fi
PS1='CANT SHOW YOU'
if [ -f `brew --prefix`/etc/autojump ]; then
. `brew --prefix`/etc/autojump
fi
export CLICOLOR=1
export LSCOLORS=ExFxCxDxBxegedabagacad
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a         shell session *as a function*
export SCALING_SECRET_TOKEN="CANT SHOW YOU" 
```

我的`.bashrc`：

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

我的用户帐户 conf`me.conf`位于`/etc/apache2/users`：

```
<Directory "/Users/me/Sites/">
Options Indexes MultiViews
AllowOverride All
Order allow,deny
Allow from all
</Directory> 
```

我的`httpd.conf`：

```
LoadModule php5_module libexec/apache2/libphp5.so  // I removed the # at the begining
//under <Directory "/Library/WebServer/Documents">
AllowOverride All    // changed to All from None 
```

我有这个错误：

```
Error: uncaught throw `Failed executing: ./configure --prefix=/usr/local/Cellar/php54/5.4.8 --localstatedir=/usr/local/var --sysconfdir=/usr/local/etc/php/5.4 --with-config-file-path=/usr/local/etc/php/5.4 --with-config-file-scan-dir=/usr/local/etc/php/5.4/conf.d --with-iconv-dir=/usr --enable-dba --with-ndbm=/usr --enable-exif --enable-soap --enable-wddx --enable-ftp --enable-sockets --enable-zip --enable-pcntl --enable-shmop --enable-sysvsem --enable-sysvshm --enable-sysvmsg --enable-mbstring --enable-mbregex --enable-bcmath --enable-calendar --with-zlib=/usr/local/Cellar/zlib/1.2.7 --with-ldap --with-ldap-sasl=/usr --with-xmlrpc --with-kerberos=/usr --with-xsl=/usr --with-curl=/usr/local/Cellar/curl/7.28.0 --with-gd --enable-gd-native-ttf --with-freetype-dir=/usr/local/Cellar/freetype/2.4.10 --with-mcrypt=/usr/local/Cellar/mcrypt/2.5.8 --with-jpeg-dir=/usr/local/Cellar/jpeg/8d --with-png-dir=/usr/local/Cellar/libpng/1.5.13 --with-gettext=/usr/local/Cellar/gettext/0.18.1.1 --with-snmp=/usr --with-libedit --mandir 
```

和这个：

```
Error: uncaught throw `No available formula for zlib ' 
```

# python - Python 天气 API 问题

> ID：13329552
> 
> 赞同：1
> 
> 时间：2012-11-11T08:06:13.317
> 
> 标签：python, numpy, google-weather-api

我正在使用 pywapi 来获取不同位置的天气状况。我正在使用的命令是：

```
alaska = pywapi.get_weather_from_noaa('PABI') 
```

其中“PABI”是阿拉斯加的车站 ID。如果我直接在 Python 控制台或 IDLE 中输入它并将天气状况保存为 'alaska' 变量中的 dict 项，这工作正常，但是当我存储在 .py 文件中并尝试执行它时它会给出错误。它给出了以下错误：

```
Traceback (most recent call last):
  File "<pyshell#26>", line 1, in <module>
    from urllib import request
ImportError: cannot import name request 
```

不知道这里发生了什么。为什么一个方法在 IDLE 中可以正常工作，而从 .py 文件调用时却不能？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:15:21.940

教程/示例/您正在使用的任何内容都基于 Python3。升级，它应该工作得很好。

或者，您可以使用较旧的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:15:34.790

好的，所以我想通了。我用 urllib2 模块替换了 urllib，现在一切正常。感谢@Sheena 和其他人的光临。:-)

# jquery - 将 bootstrap 的 img-circle 逐渐过渡到 img-rounded

> ID：13329557
> 
> 赞同：0
> 
> 时间：2012-11-11T08:06:41.713
> 
> 标签：jquery, css, twitter-bootstrap, css-transitions

有没有办法让图像的类别从 img-circle 变为 img-rounded 不是立即而是通过鼠标悬停逐渐改变？

我知道它必须通过 javascript/jquery 完成，因为没有其他方法可以更改对象的类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:35:16.580

既有纯 CSS 也有基于 jQuery 的解决方案。[下面的代码，以及http://jsfiddle.net/technotarek/K52j4/](http://jsfiddle.net/technotarek/K52j4/)上两者的工作示例：

jQuery

```
$(".js").hover(function() {
    $(this).animate({
        "border-radius": "6px"
    });
}, function() {
    $(this).animate({
        "border-radius": "500px"
    });
});​ 
```

CSS3（无需 javascript；仅适用于现代浏览器）

```
img.css {
    -webkit-transition:border-radius 0.8s linear;
    -moz-transition:border-radius 0.8s linear;  
    -o-transition:border-radius 0.8s linear;      
    transition:border-radius 0.8s linear;  
}
    img.css:hover {  
        border-radius: 6px;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T08:15:04.470

是的，您可以使用 jquery 来完成这项工作，就像这样：

```
$("img[class='img-circle']").hover(function(){
      $(this).removeClass("img-circle").addClass("img-rounded");
   },function(){
      $(this).removeClass("img-rounded").addClass("img-circle");
}); 
```

# zend-framework - 在 Zend Framework 2 中，有哪些不同的路由类型以及如何使用每种类型？

> ID：13329559
> 
> 赞同：0
> 
> 时间：2012-11-11T08:07:12.007
> 
> 标签：zend-framework, zend-framework2

我在 ZendFramework 2 中定义了一个模块，我正在[他们网站上浏览标准 ZF2 教程](http://framework.zend.com/manual/2.0/en/genindex.html)。

在给出的示例中，类型定义如下：`'type' => 'segment'`. 还有哪些其他类型的路线，每种路线都有哪些典型用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:00:24.917

所有可能的路线类型是：

```
'hostname', 'literal', 'part', 'regex', 'scheme', 'segment', 'query', 'method' 
```

[此处的官方文档](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html)中描述了它们的用法。

虽然，根据来源，有一种称为“通配符”的额外类型是可能的，但文档中没有描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:24:39.280

除了 Jevgeni 刚刚发布的内容，您可能还对[ZendCon 2012 上的 DASPRiDs 路由器演示感兴趣](http://www.dasprids.de/blog/2012/10/23/slides-for-my-zf2-router-presentation)

# asp.net - 何时在 ASP.Net 中使用单例模式代替使用应用程序状态

> ID：13329562
> 
> 赞同：0
> 
> 时间：2012-11-11T08:07:47.343
> 
> 标签：asp.net, design-patterns, singleton

有人可以提供可以使用单例模式在 Asp.net 应用程序中存储常用数据的场景，在每个请求上检索这些数据的成本很高吗？另外，同样使用应用程序状态会更好吗？此外，Singleton Pattern 是否可以在应用程序启动时用于存储 Web.Config 设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:29:03.820

我认为在 ASP.Net 中使用单例模式没有简单的方法，我更喜欢将会话状态对象包装在静态类中，因为会话是整个应用程序的一个会话（但每个用户都不同）。

从某种意义上说，应用程序状态已经是一种单例，它适用于每次使用和整个应用程序。

如果您愿意，我不希望将 Web.Config 存储在您可以为其创建包装类的任何其他地方。

**一些相关帖子：**

[Asp.net 缓存单例模式](https://stackoverflow.com/questions/11502584/asp-net-cache-singleton-pattern)
[Asp.net 单例模式场景](https://stackoverflow.com/questions/6934606/asp-net-singleton-pattern-scenario)
[单例模式 Asp.net csharp for each user](https://stackoverflow.com/questions/3728678/singleton-pattern-asp-net-c-sharp-for-each-user)

# java - eclipse 内容助手在一个项目中不起作用

> ID：13329563
> 
> 赞同：0
> 
> 时间：2012-11-11T08:07:51.160
> 
> 标签：java, eclipse

我在 eclipse 中有多个项目，eclipse 帮助我在所有项目中查找错误和自动完成，除了一个！它一直有效，直到我对项目进行了一些重构，现在它不再这样做了！它甚至不能帮助我访问同一个包中的类的方法，并且当我在代码中键入任何内容时它也不会通知我！

可能是什么原因 ？

谢谢，阿里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:36:24.950

可能，您的项目不再编译。打开“问题”视图，显示导致编译停止的可能问题。也许缺少库或依赖项。

# c# - 如何根据行在 .aspx 中设置会话

> ID：13329568
> 
> 赞同：0
> 
> 时间：2012-11-11T08:08:33.760
> 
> 标签：c#, asp.net, session, gridview, eval

我面临以下问题：

当我根据我的要求在我的 aspx 中设置会话时，如下所示：

```
<Columns>
<asp:TemplateField ItemStyle-Width="10px">
<ItemTemplate>
<a id="btnShowPopup5" runat="server" class="thickbox" href='<%#"PopUp.aspx?AR=2"+"&TBiframe=true&height=530&width=750"%>'
<asp:Image ID="Image23" runat="server" ToolTip="Back" ImageUrl="Images/cross.png" /></a>
<asp:HiddenField ID="HDN_TaskCode" Value='<%# Session["s_TaskCode"] = DataBinder.Eval(Container.DataItem, "TaskCode") %>'
runat="server" /> 
```

* * *

我注意到：`Session["s_TaskCode"]`总是用gridview中的第一行任务代码值设置！

这不是我想要的。

我想根据行设置我的会话。

说我的 gridview 有两行：

*   第一个 task_code 值为 7
*   第二个 task_code 值为 10

我想根据我单击的超链接设置具有正确值的会话。

像数据键一样。

**注意**：我想在 .aspx 而不是 .cs 中设置我的会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:28:10.317

您的代码中只使用了一个会话变量 ( `Session["s_TaskCode"]`)。那么，如何在其中保留多个值。它将始终包含上次写入的值。

要在会话中存储逐行值，您必须执行以下操作：

`Session["s_TaskCode" + rowIndex]`

这里，rowIndex 是 <%# Container.DataItemIndex %>

所以你可以像这样使用：`<%# Session["s_TaskCode" + Container.DataItemIndex] %>`

**编辑：**

而不是会话，为什么不在'btnShowPopup5'href url QueryString参数中传递TaskCode的值：

```
href='<%#"PopUp.aspx?AR=2"+"&TBiframe=true&height=530&width=750&" + DataBinder.Eval(Container.DataItem, "TaskCode") %>' 
```

# java - 通过 HTTP 将大型视频文件从 Tomcat 服务器传输到 Android 客户端

> ID：13329570
> 
> 赞同：2
> 
> 时间：2012-11-11T08:09:18.563
> 
> 标签：java, android, tomcat, video-streaming

我已经查看了所有类似的问题，但似乎没有一个答案能解决我的问题。我正在尝试将视频文件从我的 Tomcat 服务器流式传输到 android Web 浏览器。我可以在 Chrome 浏览器中流式传输视频。我还可以使用类似的代码传输图像（较小的文件）。

这是我的 servlet 代码，它将视频转换为字节流以通过 HTTP 传输

```
public class VideoServlet extends HttpServlet {

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {

    try {
        File file = new File("C:\\Users\\ishan\\Desktop\\hisocData\\"
                + req.getPathInfo().substring(1));

        FileInputStream is = new FileInputStream(file);

        resp.setHeader("Content-Length", Long.toString(file.length()));
        resp.setContentType("video/3gpp");

        // Open the file and output streams
        OutputStream out = resp.getOutputStream();

        // Copy the contents of the file to the output stream
        byte[] buf = new byte[1024];
        int count = 0, length = 0;
        while ((count = is.read(buf)) >= 0) {
            out.write(buf, 0, count);
            length += count;
        }
        is.close();
        out.close();
        resp.setContentLength(length);
    } catch (FileNotFoundException e) {
        OutputStream out = resp.getOutputStream();
        out.write("File not found!".getBytes());
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
  }
} 
```

当我尝试在 Android 网络浏览器上访问此视频文件时出现此错误：

```
ClientAbortException:  java.net.SocketException: Connection reset by peer: socket write error
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:388)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:462)
    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:366)
    at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:413)
    at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:401)
    at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:91)
    at data.VideoServlet.doGet(VideoServlet.java:40)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:215)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:462)
    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:366)
    at org.apache.coyote.http11.InternalOutputBuffer$OutputStreamOutputBuffer.doWrite(InternalOutputBuffer.java:240)
    at org.apache.coyote.http11.filters.IdentityOutputFilter.doWrite(IdentityOutputFilter.java:84)
    at org.apache.coyote.http11.AbstractOutputBuffer.doWrite(AbstractOutputBuffer.java:192)
    at org.apache.coyote.Response.doWrite(Response.java:504)
    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:383) 
```

我将衷心感谢您的帮助。我已经被这个问题困扰了几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:58:29.330

看看这个链接，也许一些信息会有所帮助

[如何以“正确”的方式从 servlet 发送文件？](https://stackoverflow.com/questions/5805859/how-to-send-a-file-from-a-servlet-the-right-way)

[如何解决“对等方重置连接：套接字写入错误”？](https://stackoverflow.com/questions/12986542/how-to-solve-connection-reset-by-peer-socket-write-error)

[ClientAbortException: java.net.SocketException: Connection reset by peer: socket write error](https://stackoverflow.com/questions/839314/clientabortexception-java-net-socketexception-connection-reset-by-peer-socket)

[Java EE 6 应用程序中的 SocketException](https://stackoverflow.com/questions/8504115/socketexception-in-java-ee-6-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T13:41:07.920

您需要实现 HTTP 范围支持。看到[这个](https://stackoverflow.com/questions/13325345/serving-audio-data-from-a-java-servlet-for-an-html5-audio-control)，几乎相同的问题/答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:05:46.763

该问题很可能是由于在响应已发送后尝试设置内容长度引起的。您应该删除此行

```
resp.setContentLength(length); 
```

请注意，它等同于您在请求开始时所做的：

```
resp.setHeader("Content-Length", Long.toString(file.length())); 
```

我建议您将 resp.setHeader(...) 替换为 resp.setContentLength(file.length());

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T07:17:40.083

问题是我试图以播放器无法识别的 .3gp 格式传输视频。当我将其更改为 .mov 时，它运行良好。麻烦各位了，抱歉

# android - Android TextView以编程方式跨越全宽

> ID：13329576
> 
> 赞同：7
> 
> 时间：2012-11-11T08:10:24.930
> 
> 标签：android, textview, width

我以编程方式在 LinearLayout 中创建了一个 TextView：

```
LinearLayout filmTitleContainer = new LinearLayout(ctx);
TextView filmName = new TextView(ctx);
filmName.setBackgroundColor(Color.rgb(Color.YELLOW));
filmName.setText(this.screeningTime+" "+this.name); 
```

文本视图被缩小：

![在此处输入图像描述](../Images/9b8abd6ef623760dc3f31ff8b6d06960.png)

如何将文本设置为占据屏幕的整个宽度？当我使用 XML 布局文件时，我会设置`android:layout_width="match_parent"`. 什么是等效的 Java 代码？

* * *

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-11T08:11:05.177

用于`LayoutParams`视图及其容器：

```
LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 1f);
filmTitleContainer.setLayoutParams(params);
filmName.setLayoutParams(params); 
```

![在此处输入图像描述](../Images/19a003687b2a0bec48e5e3c06506f48e.png)

# sql - 如何在一个 SQL 中用不同的 WHERE 从同一张表中写入 COUNT 和 DISTINCT？

> ID：13329582
> 
> 赞同：0
> 
> 时间：2012-11-11T08:11:34.083
> 
> 标签：sql, count, sql-server-2008-r2, distinct

嗨，我想编写一个 SQL 语句，它从同一个表中返回计数和计数（不同），但使用不同的 WHERE 子句。

例如

```
People
-----------------------
ID      Name        Sex
1       Alex        F
2       Alex        M
3       Alex        M
4       Andy        F
5       Andy        M
6       Ann         F
7       Ann         F 
```

在这个例子中，我可以写`SELECT (SELECT COUNT(1) FROM People), (SELECT COUNT(DISTINCT Name) FROM People)`，但是 SELECT 太多了。所以我改写`SELECT COUNT(1), COUNT(DISTINCT Name) FROM People`。

但是，如果我想返回类似`SELECT (SELECT COUNT(1) FROM People), (SELECT COUNT(DISTINCT Name) FROM People WHERE Sex='M')`. 你如何像上面那样做同样的事情来减少 SELECT？

我不知道这是否相关，我知道我可以编写类似`SELECT COUNT(1), SUM(CASE WHEN Sex='M' THEN 1 ELSE 0 END) FROM People`在一个 SELECT 中具有不同 WHERE 子句的东西，但这仅适用于 COUNT，它不处理 DISTINCT。当需要 DISTINCT 时如何使用它？

数据库是 SQL Server 2008 R2，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:17:39.977

试试这个：

```
Select count(id), count(distinct case when sex = 'M' then name else null end)
From people 
```

您可以在 SQL fiddle 中看到它：

*   [**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/22fb2/9/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T08:24:24.290

您需要显示两个分组操作的结果，因此 union 可以帮助您：

```
SELECT 'Full' AS 'Grouping Type', count(*) AS 'Count' FROM people
UNION
SELECT 'Men', count(DISTINCT name) FROM people WHERE sex = 'M' 
```

# ruby-on-rails - Ajax 在博客上实现类似功能

> ID：13329584
> 
> 赞同：0
> 
> 时间：2012-11-11T08:11:59.237
> 
> 标签：ruby-on-rails, ajax, html-table

问题：Ajax 没有表现出应有的样子。

**邮政索引：**

```
<tr>
  <td><%= post.name %></td>
  <td><%= post.created_at.strftime("%Y/%m/%d, %I:%M%p") %></td>
  <td><%= post.view %></td>
  <td id="post_like_<%= post.id %>"><%= post.like %></td>
  <td><%= link_to 'like', like_post_path(post), :remote => true %></td>
</tr> 
```

**像.js.erb：**

```
$("#post_like_<%= post.id %>").html("<%= @post.like %>"); 
```

只有在刷新页面后才能看到更改。Ajax 无法正常工作，但我未能在上述代码中找到问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:14:54.840

你忘记了`@`你的看法。如我所见，我看到`$post`的是实例变量`$post.like`。因此，在您的 中`like.js.erb`，替换`post.id`为`@post.id`. 像：

```
$("#post_like_<%= @post.id %>").html("<%= @post.like %>"); 
```

# java - 休眠。如何将自己的类映射为实体中的属性类型？

> ID：13329591
> 
> 赞同：1
> 
> 时间：2012-11-11T08:12:46.870
> 
> 标签：java, hibernate, jpa, orm, hibernate-mapping

如何将我自己的类与 Hibernate 映射为其他类中的属性类型？例如，我有类**Address**和类**User**。我尝试映射如下：

```
public class User {
    private Long id;
    private Address address;
    // other fields
} 
```

但在这种情况下我得到了例外：

```
org.hibernate.MappingException: Could not determine type for: es.myproject.entity.User 
```

我将不胜感激有关各个示例的任何指导或有用的链接。最好使用 Hibernate 注释。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:20:51.393

您需要添加说明两个实体之间关系的注释，例如`@ManyToOne`、`@OneToOne`或`@OneToMany`。

大概是这样的：

```
@Entity
public class User {
    @Id
    private Long id;

    @OneToOne(mappedBy="user")
    private Address address;
    // other fields
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:36:33.510

看看这些[教程](http://viralpatel.net/blogs/hibernate-one-to-many-annotation-tutorial/)

# javascript - 如何使用 Javascript 播放存储在客户端计算机上的 MP3，并使用他们安装的媒体播放器？

> ID：13329595
> 
> 赞同：0
> 
> 时间：2012-11-11T08:13:32.720
> 
> 标签：javascript, shell, mp3

假设我有一个指向客户端计算机上 MP3 的路径和文件名，以及一个指向他们的媒体播放器（例如 Winamp 或 VLC）的路径/文件名。如何使用他们的播放器播放 MP3？

Javascript 中是否有任何类型的 Shell() 功能？谷歌搜索“javascript shell”之类的结果提供了面向 js 执行环境的结果，而不是系统 shell，并且“javascript play mp3”（等）找到了插入`<audio>`元素的指令。我的谷歌搜索技能让我失望了......

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:23:31.850

当您标记您的问题`shell`时，我猜您是在谈论命令行 JavaScript，**而不是**在 Web 浏览器中运行的 JavaScript。（如果你说的是在网络浏览器中运行的 JavaScript，答案当然是：你不能那样做，谢天谢地。）

对于命令行 JavaScript，如何执行此操作取决于您使用的 JavaScript 环境，答案应在该环境的文档中找到。我至少知道这些：

*   NodeJS - 你会使用这些[`process`](http://nodejs.org/api/process.html)东西来启动播放器。
*   JScript - 您将使用该[`WshShell`](http://msdn.microsoft.com/en-us/library/aew9yb99%28v=vs.84%29.aspx)对象。
*   SilkJS - 你会使用这些[`builtin/process`](http://silkjs.net/documentation/builtin/process)东西。
*   Rhino - Rhino 可以访问完整的 Java JDK，因此您可以使用其中一个`exec`功能[`Runtime`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)或这些[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)东西。

...但还有很多其他的。

* * *

在下面回复您的评论：

> 不幸的是，我说的是在浏览器中运行......

您可以*尝试*使用对应于 MP3 文件路径的 URL 向页面添加[`audio`标签](http://www.w3.org/TR/html5/the-audio-element.html#the-audio-element)`file://`，甚至是`a`旧浏览器的标签，但这不会触发用户的音乐播放器，它只会（充其量）播放音乐浏览器。在最坏的情况下，它不会播放任何内容，因为该文件与您的页面的来源不同（请参阅[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，在这方面我没有播放过音频，但这里肯定存在 SOP 问题）。

这是非常非常好的原因，网页上的 JavaScript 不能在客户端计算机上执行任意程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:21:56.630

感谢[TJ Crowder](https://stackoverflow.com/users/157247/t-j-crowder)的建议，我找到了一个（可能的）解决方案：创建一个协议处理程序。

这是我创建的注册表文件：

```
Windows Registry Editor Version 5.00

[-HKEY_CLASSES_ROOT\playmp3]

[HKEY_CLASSES_ROOT\playmp3]
@="URL:playmp3 Protocol"
"URL Protocol"=""

[HKEY_CLASSES_ROOT\playmp3\shell]

[HKEY_CLASSES_ROOT\playmp3\shell\open]

[HKEY_CLASSES_ROOT\playmp3\shell\open\command]
@="C:\\Program Files (x86)\\PlayMP3\\playmp3.bat %1" 
```

如果用户将其导入他们的注册表，然后进入`playmp3://E:\My Music\My Really Cool Song.mp3`浏览器地址栏将触发我的批处理文件：

```
@ECHO OFF

SET "url=%1"

SET "player=C:\Program Files (x86)\Winamp\winamp.exe"

SETLOCAL EnableDelayedExpansion

SET url=!url:playmp3://=!
SET url=!url:/=!

"%player%" "%url%"

ENDLOCAL 
```

...从字符串中剥离“playmp3://”（协议）并将其传递给 Winamp.exe :)

这样做，我成功地在页面上创建了一个链接，单击该链接后，开始在 Winamp 中播放曲目:)

当然，它需要用户执行注册表脚本，在批处理文件中指定可执行文件的路径，然后将其放在某个位置……但它可以工作！:)

# visual-studio - 将 qDebug() 或 printf() 与 Qt Creater、Cmake、MSVS 和 CDB 调试器一起使用

> ID：13329596
> 
> 赞同：0
> 
> 时间：2012-11-11T08:13:42.720
> 
> 标签：visual-studio, qt, cmake, windbg

是否可以使用 qDebug() 或 printf() 在带有 Qt Creater、Cmake、MSVS 和 CDB-调试器的 qt-GUI-Program 中绘制日志消息？我正在尝试使用它们，但不幸的是我在 Qt 创建器应用程序输出窗口中没有收到任何消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:12:28.593

您的意思是您想在从 Qt Creator 运行的 Qt-GUI 应用程序中打印日志消息？我不明白 MSVS 和 CDB 调试器如何与问题的其余部分相关......

对于第一部分，是的，您可以使用 qDebug 和 printf 将日志放置到标准输出，Qt Creator 应该显示这些。否则，请尝试从命令行启动您的应用程序，看看是否可以看到日志。

# jquery - 单击后退按钮时jQuery菜单删除类

> ID：13329607
> 
> 赞同：1
> 
> 时间：2012-11-11T08:15:24.670
> 
> 标签：jquery, html, css

当您单击后退按钮时，我有一个 jQuery 菜单无法正常工作。您当前所在页面的链接在html中有一个“selected”类。当您将鼠标悬停在其他链接上时，jQuery 会删除该类并添加“悬停”类。问题是，当您单击后退按钮时，“选定”类仍保留在您刚刚访问的链接上，而不是您实际所在页面的链接上。我是新手，但我假设 html 已被覆盖。

到目前为止，我只在 FF、IE 和 Chrome 上测试过它。这个问题只在FF上遇到。我想知道是否有办法恢复到 html 中的原始 CSS 类。菜单可以在[这里](http://www.accustarappraisals.com/accustar-complete/accustar-new/index.html)测试。

这是html：

```
<div id="menu">

<ul>

<li id="menuitem0" class="selected"><a href="index.html">HOME</a></li>
<li id="menuitem1"><a href="link1.html">Link1</a></li>
<li id="menuitem2"><a href="link2.html">Link2</a></li>
<li id="menuitem3"><a href="link3.html">Link3</a></li>
<li id="menuitem4"><a href="link4.html">Link4</a></li>
<li id="menuitem5"><a href="link5.html">Link5</a></li>
<li id="menuitem6"><a href="link6.html">Link6</a></li>

</ul>

</div><!--menu--> 
```

这是jQuery代码：

```
jQuery(document).ready(function($) {
jQuery(function($){
      var pathmatch = location.pathname.match(/([^\/]+)$/);
      // set selected by the current pathname, or default to Home...
      if( !pathmatch || !$('#menu a[href$="' + pathmatch[1] + '"]').addClass('selected').length){
        $('#menu a').eq(0).addClass('selected');
      }
      $('#menu a')
        .hover(function(ev){
          // add (or remove) 'hovering' class to the parent LI and its parent UL...
          $(this).parent().parent().andSelf().toggleClass('hovering',ev.type==='mouseenter');
        })
      });

}); 
```

# c# - 最大化继承母版页（表单）的用户控制

> ID：13329608
> 
> 赞同：0
> 
> 时间：2012-11-11T08:16:05.450
> 
> 标签：c#, winforms, user-controls, master-pages, fullscreen

我有 C# windows 应用程序中的母版页。在母版页中，我设置了许多面板和按钮。其中一个（面板）是主面板。在运行时，程序（即表单的母版页）被最大化，当点击按钮时，用户控件被放在主面板中。但不是最大化！！！！如何在运行时最大化用户控制？

在母版页中

```
private void bntContentEnter_Click_1(object sender, EventArgs e)
        {
            UserControlEnter_Parking u = new UserControlEnter_Parking();

            MasterPanel.Controls.Clear();
            ShowFullScreen(u);
            MasterPanel.Controls.Add(u);
        }

 private void ShowFullScreen(UserControl userControl)
        {
            Form fullScreenForm = new Form();
            fullScreenForm.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
            fullScreenForm.WindowState = FormWindowState.Maximized;
            fullScreenForm.ShowInTaskbar = false;
            userControl.Dock = DockStyle.Fill;
            fullScreenForm.Controls.Add(userControl);
            fullScreenForm.Show();
        } 
```

# ios - didSelectRowAtIndexPath 只被调用一次

> ID：13329609
> 
> 赞同：0
> 
> 时间：2012-11-11T08:16:39.547
> 
> 标签：ios, uiviewcontroller, uitableview, didselectrowatindexpath

我有两个视图控制器，FirstViewController 和 DetailViewController，来回切换。

在 didSelectRowAtIndexPath 方法 ---> updateRowNumber:indexPath.row 中，我将选定的行号传递给 DetailViewController。

第一次成功了，FirstViewController可以把选中的行传给DetailedViewController，来回切换后，还是得到最后选中的行。

有谁知道我错过了什么？

```
#import "FirstViewController.h"
#import "AppDelegate.h"
#import "DetailViewController.h"
#import "PartyListCustomViewCell.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

@synthesize dvController;  // it is a DetailViewController

- (void) viewDidLoad
{
contentArray = [[NSArray arrayWithObjects:@"heyun", @"wushi", @"ios", nil]retain];

[super viewDidLoad];

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void) dealloc
{
    [dvController release];
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear: animated];    
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear: animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear: animated];
}

- (void)viewDisDisappear:(BOOL)animated
{
    [super viewDidDisappear: animated];
}

- (NSInteger)numberOfSectionsInTableView: (UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [contentArray count];
}

// custom row height
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // dynamic with whether the cell has the party image or not..
    return 160;
}

// Customize the appearance of table view cells
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:        (NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"PartyListCustomCell";

    PartyListCustomViewCell *plcc = [tableView     dequeueReusableCellWithIdentifier:CellIdentifier];

    if(plcc == nil)
    {
        plcc = [[[PartyListCustomViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // set up custom cell
    plcc.partyTitle.text = @"partyTitle";

    return plcc;

}

- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (dvController == nil)
    {
        DetailViewController *aController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];

        self.dvController = aController;

        [aController release];
    }   

    [dvController updateRowNumber:indexPath.row];
    [[self navigationController] pushViewController:dvController animated:YES];

}

@end

#import "DetailViewController.h"

@interface DetailViewController ()

@end

@implementation DetailViewController

@synthesize rowNumber;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) 
    {
        // Custom initialization
    }
    return self;
}

- (void) updateRowNumber: (int) theindex
{

    rowNumber = theindex + 1;    
}

- (void)dealloc
{

    [super dealloc];
}

- (void)viewDidLoad
{

    UILabel *label1 = [[UILabel alloc]initWithFrame:CGRectMake(50.0, 20.0, 200.0, 50.0)];

    label1.text = [NSString stringWithFormat:@"row %i was clicked ", rowNumber];

    [self.view addSubview: label1];

    [super viewDidLoad];
    [label1 release];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewWillAppear:(BOOL)animated
{   
    [super viewWillAppear: animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear: animated];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:29:53.233

首先，如果“ `dvController`”是一个属性，则将“ ”方法`dvController`中的“”引用更改为“ ”。`didSelectRowAtIndexPath``self.dvController`

其次，在您的“ `DetailViewController`”对象中，当“ `updateRowNumber`”方法触发时……除了更新内部行号之外，看起来您之后不会做任何其他事情（即更新视图或其他任何事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:20:45.133

我根据 Michael Dautermann 的建议添加了以下代码，它可以工作

```
- (void) updateRowNumber: (int) theindex
{

    rowNumber = theindex + 1;

    UILabel *label1 = [[UILabel alloc]initWithFrame:CGRectMake(50.0, 20.0, 200.0, 50.0)];

    label1.text = [NSString stringWithFormat:@"row %i was clicked ", rowNumber];
    [self.view addSubview: label1];
    [label1 release];

} 
```

# css - 如何将旋转 90° 的文本放置在父元素的中间

> ID：13329610
> 
> 赞同：-1
> 
> 时间：2012-11-11T08:17:22.093
> 
> 标签：css

我希望垂直转换的文本位于包含元素的中间（到目前为止它显示在父 div 的顶部）。我的代码可以在这里看到：

CSS：

```
 .row{ 
   float:right;
   clear:right;
   width:830px;

 }
.caption{
   width:50px;
   background:dimGray;
   height:300px;
   margin:3px 3px 0 0;
   float:left;
   line-height: 50px;
   position: relative;

}
.diagramm{
   height:300px;
   float:left;
   background:lightGrey;
    width:770px;
    margin:3px 0 0 0;

 }
.rotate
{
     white-space: nowrap;
     -webkit-transform: rotate(90deg);
     -moz-transform: rotate(90deg);
     transition:  rotate(90deg);
                 filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); /* IE6, IE7 */
     -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)" /* IE8 */;

                 -webkit-transform-origin:50% 50%;

     color:white;
     font-weight:bold;

 } 
```

========================= HTML：

```
<div class="row">
   <div class="caption">
     <div class="rotate">
    text
                  </div>
   </div>
    <div class="diagramm">
            <div id="chart_" style="height:300px; width:500px;">
    </div>
   </div> 
</div>
</body> 
```

[http://jsbin.com/unogov/3/edit](http://jsbin.com/unogov/3/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:20:58.747

也许有一种更优雅的方式来做到这一点，但它的工作原理......只需将这些行添加到`.rotate`

```
top: 125px;
left: -125px;
text-align: center;
position: relative;
width: 300px; 
```

# assembly - x86/x64 添加置换寻址

> ID：13329611
> 
> 赞同：8
> 
> 时间：2012-11-11T08:17:36.523
> 
> 标签：assembly, x86, 64-bit

我正在为 x86/x64 CPU 指令编写编译器，但我似乎无法弄清楚人们所说的“位移”地址是什么意思。例如此处详细介绍了添加指令： [http ://www.c-jump.com/CIS77/CPU/x86/X77_0150_encoding_add_edx_displacement.htm](http://www.c-jump.com/CIS77/CPU/x86/X77_0150_encoding_add_edx_displacement.htm)

我只是想实现将寄存器添加到正常内存地址的添加指令。问题是，该地址是一个“位移地址”。这是否意味着地址是一个有符号值，它是指令位置的偏移量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T11:19:02.110

x86 中有几种不同形式的间接操作数：

1.  [注册]
2.  [注册+位移]
3.  [移位]
4.  [reg * 常量 + reg]
5.  [reg * 常数 + reg + 位移]

“位移”只是添加到地址其余部分的常数。如果地址中除了常量之外没有任何分量，它仍然被称为“位移​​”。这主要是为了与其他寻址形式保持一致。

另一种看待它的方式是所有地址的形式

[reg * 常数 + reg + 位移]

每个组件都允许值为 0。

[位移] 形式只是位移以外的所有分量都为零的编码。

作为编译器作者，最后两种形式特别有趣。`pArray[index]->field + 1`它们使在单个指令中编码事物变得容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T09:13:50.190

没有“需要位移的特殊添加”，该页面不必要地令人困惑 - 这只是正常内存操作数编码的一部分。

`add`是一条相当标准的指令，其编码方式与所有 alu-ops 相同：有一种特殊情况，使用`al`作为目标和立即数作为源（`04 ib`），使用`ax/eax/rax`作为目标和立即数作为源（`+ 05 imm`），三个版本`add r/m, imm`（一个用于 8 位目标，一个用于更广泛的目标和一个符号扩展的 8 位源，一个用于更广泛的目标和一个宽源），当然还有一个`add r, r/m`and `add r/m, r`。

这只是 的一种特殊情况`add r, r/m`，其中采用位移的形式：参见[ModRM encoding](http://www.sandpile.org/x86/opc_rm.htm)`r/m`的注释 #1 。

所以他们的意思是`add edx, [sdword]`。（但他们对 reg 字段进行了错误编码，`edx`对应于`010`，而不是`011`）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-11T10:32:45.253

该页面不准确。它所说的“进行位移的添加”是指形式`add r[16|32], r/m[16|32]`，或者`add edx, [0xdisp]`您可能在反汇编程序的输出中看到它。假设它正在谈论带有 opcode 的 ADD 指令`0x03`，

*   对寄存器目标进行编码`edx`并在 ModR/M 字节中指定一个 32 位位移作为有效地址，将得到 0x15 的值（请参阅英特尔® 64 和 IA-32 架构软件开发人员手册第 2 卷，第 41 页，表2-2)。
*   该指令的作用是将内存地址处的 dword 添加`disp`到`edx`.
*   因此，指令的实际编码将是：`\x03\x15\x00\x00\x00\x01`，对于 1 个字节的位移。

# decimal - 如何在 Inno Setup 中定义 Single-type 变量中的小数位数？

> ID：13329615
> 
> 赞同：2
> 
> 时间：2012-11-11T08:18:06.697
> 
> 标签：decimal, inno-setup, rounding, pascalscript

我需要计算我的设置中所有组件的总大小。由于一些自定义代码，我不能为此使用 Inno Setup 的内部功能。

问题是组件共享大量文件。所以我为每个组件定义了一个字符串，其中包含他们使用的文件的变量。然后，我将这些字符串添加到单个字符串中，如果在该字符串中找到某个变量，则将文件的大小（以字节为单位）添加到 type 的变量“size”中`Single`。最后“大小”显示安装需要多少空间。

实际上这很好用，但我想在下一页显示以 GB 为单位的大小。但是该函数`FloatToStr`在小数点后添加了很多数字，而我只想有两个。

这是脚本（问题出现在最后几行）：

```
function NextButtonClick(CurPageID: Integer): Boolean;
var
  size: Single;

  if (CurPageID = wpSelectDir) then { I have swapped the Components and SelectDir pages }
  begin

  size := 0; { this will contain the size in the end }
  xg := '';  { this is the string which contains the list of files needed by every single component }
  for I := 0 to GetArrayLength(ComponentArray) - 1 do
  if IsComponentSelected(ComponentArray[I].Component) then
  begin
    xg := xg + ComponentArray[I].GCF; 
  end;    
  { here the files are being added to the string, everything's working as intended.. }

  MsgBox(xg, mbInformation, MB_OK); { this is for testing if the string has been created correctly }
  if Pos('gcf1', xg) > 0 then size := size + 1512820736; { here the Pos-function searches for the given string and if it is found it adds the value to "size", ok... }
  if Pos('gcf2', xg) > 0 then size := size + 635711488;
  if Pos('gcf3', xg) > 0 then size := size + 286273536;
size := size / 1024 / 1024 / 1024; { now all sizes have been added and the number is converted to be displayed GB, not bytes }
  { Format('%.2n', [size]); }
  { size := (round(size * 10) / 10); }
  { size := Format('%.2n', [size]); }
  { FloatToStr(size); }
  MsgBox(FloatToStr(size), mbInformation, MB_OK); { Here the size is shown but with several unneeded places after the decimal point (2.267589569092) }
  end;
end; 
```

如您所见，我尝试了几件事来摆脱数字。问题是 中的`FloatToStr`函数`MsgBox`，它会自动添加所有数字。如果我选择`Integer`“大小”的类型，它仍然显示长数字，但我不能使用`Integer`和`IntToStr`（`MsgBox`什么可以解决问题），因为这里处理的数字太大，我想在点后有两位小数。

我也尝试将`Format`函数放入，`MsgBox`但我也得到了*“类型不匹配”*错误。

`FloatToStrF`Inno Setup 不支持。

预先使用转换“大小”`FloatToStr`并截断它也不起作用，因为编译器会检查“大小”声明的类型并坚持在后面`FloatToStr`使用`MsgBox`。

我不知道如何将这个数字四舍五入。也许一些不同的方法会有所帮助？

我期待着您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:40:15.270

您可以使用该[`Format`](http://www.jrsoftware.org/ishelp/topic_isxfunc_format.htm)功能。

看看这个例子：

```
procedure TestClick(Sender: TObject);
var
  Size: Extended;
begin
  Size := 0;
  Size := Size + 1512820736
  Size := Size + 635711488;
  Size := Size + 286273536;
  Size := Size / 1024 / 1024 / 1024; { now all sizes have been added and the number is converted to be displayed GB, not bytes }
  MsgBox(Format('%.2f Gb.', [Size]), mbInformation, MB_OK); 
end; 
```

我将数据类型从 更改`Single`为`Extended`，将其作为个人选择。

或者使用此函数作为*更明智*的选择，根据字节数添加正确的维度：

```
const
  KFactor = 1024;

function FormatBytes(const Bytes: Extended): string;
var
  Amount: Extended;
  Idx: Byte;
  Dms: array[1..5] of string;
  FmtStr: string;
begin
  Dms[1] := 'B'; Dms[2] := 'KB'; Dms[3] := 'MB'; Dms[4] := 'GB'; Dms[5] := 'TB';
  Amount := Bytes;
  Idx := 1;
  while Amount > (0.9 * KFactor) do
  begin
    Idx := Idx + 1;
    Amount := Amount / KFactor;
  end;
  if Abs(Amount - Trunc(Amount)) < 0.07 then
    FmtStr := '%.0f %s'
  else
    FmtStr := '%.2f %s';
  Result := Format(FmtStr, [Amount, Dms[Idx]]);
end; 
```

如果要显示接近精确数量的 KB/MB/GB/TB，则已编辑答案以调整小数位数。

# python - 在python中更改wav文件的音量

> ID：13329617
> 
> 赞同：15
> 
> 时间：2012-11-11T08:19:12.997
> 
> 标签：python, audio, wav, volume, wave

我有一个 2 秒 16 位单通道 8khz wav 文件，我需要更改它的音量。

应该很简单，因为改变音量和改变信号幅度是一样的，我只需要衰减它，也就是将它乘以0到1之间的一个数字。但它不起作用：新的声音较低，但非常充满噪音。我究竟做错了什么？

这是我的代码：

```
import wave, numpy, struct

# Open
w = wave.open("input.wav","rb")
p = w.getparams()
f = p[3] # number of frames
s = w.readframes(f)
w.close()

# Edit
s = numpy.fromstring(s, numpy.int16) * 5 / 10  # half amplitude
s = struct.pack('h'*len(s), *s)

# Save
w = wave.open("output.wav","wb")
w.setparams(p)
w.writeframes(s)
w.close() 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T22:30:11.857

我写了一个[库来简化这类事情](http://pydub.com)

你可以这样做：

```
from pydub import AudioSegment

song = AudioSegment.from_wav("never_gonna_give_you_up.wav")

# reduce volume by 10 dB
song_10_db_quieter = song - 10

# but let's make him *very* quiet
song = song - 36

# save the output
song.export("quieter.wav", "wav") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-25T13:10:01.570

正如您在问题的评论中看到的那样，有几种解决方案，其中一些更有效。

Jan Dvorak 立即发现了这个问题（“* 5 部分正在剪裁和溢出”），直接的解决方案是：

```
s = numpy.fromstring(s, numpy.int16) / 10 * 5 
```

在这种情况下，这个解决方案对我来说是完美的，刚刚好。

谢谢大家！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-01-10T18:00:25.220

这可以通过`audioop`Python 标准库中的模块来完成。这样，就不需要依赖`pydub`或依赖`numpy`。

```
import wave, audioop

factor = 0.5

with wave.open('input.wav', 'rb') as wav:
    p = wav.getparams()
    with wave.open('output.wav', 'wb') as audio:
        audio.setparams(p)
        frames = wav.readframes(p.nframes)
        audio.writeframesraw( audioop.mul(frames, p.sampwidth, factor)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-05T05:27:45.747

使声音更响亮的代码加上过滤低频和高频

```
from pydub import AudioSegment

audio_file = "first.mp3"

song = AudioSegment.from_mp3(audio_file)

new = song.low_pass_filter(1000)

new1 = new.high_pass_filter(1000)

# increae volume by 6 dB
song_6_db_quieter = new1 + 6

# save the output
song_6_db_quieter.export("C://Users//User//Desktop//second.mp3", "mp3") 
```

# r - 如何创建一个考虑每月工作日的预测模型？

> ID：13329619
> 
> 赞同：1
> 
> 时间：2012-11-11T08:19:29.653
> 
> 标签：r, events, forecasting

我想创建一个对一个月的工作日数敏感的预测模型。例如，今年（2012 年）圣诞节在一周的中间，因此 12 月明显短于圣诞节在周末期间。我知道像 ForecastPro 这样的商业软件包有能力在他们所谓的“帮助文件”的帮助下做到这一点。我想知道是否有人能够在 R 中证明这一点？

我有以下时间序列，我想预测上一个时期之后的情况。

```
ts <- structure(c(88.3, 97.1, 110.2, 93.1, 104.7, 102.6, 94.8, 85.6, 
103.8, 109.6, 111.4, 98.6, 102.5, 101.8, 113.6, 99, 104.6, 106, 
99.2, 87.5, 101.6, 111.3, 106.9, 91.6, 99.4, 100.3, 108.3, 106.2, 
104.1, 105.2, 103.9, 85.8, 107.5, 113.7, 110, 97, 101.6, 102.4, 
112, 104.1, 103.3, 104.4, 106.1, 83.9, 112.2, 117.7, 110.2, 104.7, 
101.8, 106.9, 123.3, 112.5, 108.7, 117.4, 109.3, 92.3, 118, 117.6, 
121.3, 108, 106.5, 109.6, 121, 116.3, 114, 121.8, 109.9, 99.1, 
124, 121.2, 128.2, 113.1, 117.5, 119.4, 139.9, 119.4, 131, 131.3, 
117.1, 107.1, 128.7, 133.7, 134.6, 115.3, 126.3, 124.9, 140.5, 
123.6, 129.9, 132.9, 127.6, 113.1, 130, 141.5, 139.4, 112.8, 
132.5, 133.8, 132.7, 138.7, 128.5, 133.2, 130.8, 105.5, 134.4, 
134.4, 118.3, 99.9, 102.8, 103.3, 113.8, 104.6, 101.4, 109.9, 
109.9, 90.6, 118.1, 119.8, 115.8, 104.2, 104.3, 109.5, 128.7, 
116.2, 115.2, 126.2, 116.9, 102.6, 127, 126.6, 129, 115.3, 115.8, 
118.4, 137.3, 119.4, 128.1, 125.7, 117.1, 109.4, 130.3, 123.7, 
127.9, 111.3, 117.1, 120.5, 132, 115.5, 123.3, 122.9, 118.3), .Tsp = c(2000, 
2012.5, 12), class = "ts") 
```

我还有以下关于工作日的信息（尚未映射所有假期），但这不应该限制我们查看这个概念。

```
workingdays <- structure(c(21L, 21L, 23L, 20L, 23L, 22L, 21L, 23L, 21L, 22L, 
22L, 21L, 23L, 20L, 22L, 21L, 23L, 21L, 22L, 23L, 20L, 23L, 22L, 
21L, 23L, 20L, 21L, 22L, 23L, 20L, 23L, 22L, 21L, 23L, 21L, 22L, 
23L, 20L, 21L, 22L, 22L, 21L, 23L, 21L, 22L, 23L, 20L, 23L, 22L, 
20L, 23L, 22L, 21L, 22L, 22L, 22L, 22L, 21L, 22L, 23L, 21L, 20L, 
23L, 21L, 22L, 22L, 21L, 23L, 22L, 21L, 22L, 22L, 22L, 20L, 23L, 
20L, 23L, 22L, 21L, 23L, 21L, 22L, 22L, 21L, 23L, 20L, 22L, 21L, 
23L, 21L, 22L, 23L, 20L, 23L, 22L, 21L, 23L, 21L, 21L, 22L, 22L, 
21L, 23L, 21L, 22L, 23L, 20L, 23L, 22L, 20L, 22L, 22L, 21L, 22L, 
23L, 21L, 22L, 22L, 21L, 23L, 21L, 20L, 23L, 22L, 21L, 22L, 22L, 
22L, 22L, 21L, 22L, 23L, 21L, 20L, 23L, 21L, 22L, 22L, 21L, 23L, 
22L, 21L, 22L, 22L, 22L, 21L, 22L, 21L, 23L, 21L, 22L, 23L, 20L, 
23L, 22L, 21L, 23L, 20L, 21L, 22L, 23L, 20L, 23L, 22L, 21L, 23L, 
21L, 22L), .Tsp = c(2000, 2013.91666666667, 12), class = "ts") 
```

您会注意到包含工作日的月数大大超出了第一个时间序列 (ts) 的范围。

感谢是否有人可以为我指出正确的方向（例如使用什么函数）来创建一个预测模型，使我能够在考虑工作日系列的同时预测 ts 系列。在预测中，这意味着它将根据预测月份的工作日数调整值。我有点卡住了，似乎无法想象如何使用我所知道的任何预测/时间序列函数来做到这一点。

谢谢你的帮助！约赫姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:20:04.140

尝试这个：

```
require(forecast)
fit <- auto.arima(ts,xreg=window(workingdays,end=2012.5))
fcast <- forecast(fit,xreg=window(workingdays,start=2012.51)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T08:45:07.493

我会查看与您的问题相关的包的[CRAN Timeseries Taskview 。](http://cran.r-project.org/web/views/TimeSeries.html)如果您对特定功能/包有任何具体问题，您可以在此处提出新问题。

# php - 在php中计算数组的子元素

> ID：13329621
> 
> 赞同：0
> 
> 时间：2012-11-11T08:19:54.007
> 
> 标签：php, arrays, function

我在 PHP 中有一个二维数组，如下所示：

```
Array (
[0] => Array
    (
        [id] => 205
        [name] => Data Export
        [description] => A function to export survey results.
        [is_active] => Y
    )

...

[99] => Array
    (
        [id] => 206
        [name] => Data Import
        [description] => 
        [is_active] => N
    )
) 
```

我想确定我的数组中有多少项没有描述。

到目前为止我得到的功能如下所示......

```
function array_count ($array, $key) {
    // count($array[*][$key])
    $c = 0;
    foreach ($array as $i=>$subarray) {
        $c += ($subarray[$key]!='');
    }
    return $c;
} 
```

... 有一个更好的方法吗？

...我将如何扩展它以计算与值的匹配，例如`$array[*][is_active]=='Y'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:19:44.427

我认为这可能有效：

```
function array_count ($array, $key, $value = NULL) {
    // count($array[*][$key])
    $c = 0;
    if (is_null($value)) {
        foreach ($array as $i=>$subarray) {
            $c += ($subarray[$key]!='');
        }
    } else {
        foreach ($array as $i=>$subarray) {
            $c += ($subarray[$key]==$value);
        }
    }
    return $c;
} 
```

这样我可以做到以下几点：

```
// assume $foo is an array of 100 arrays, 
// of which 20 sub-arrays have a blank 'description', 
// and 35 have 'is_active' set to 'Y' and 65 set to 'N'

echo array_count ($foo, 'description'); // ... 80 non-blanks
echo array_count ($foo, 'is_active'); // ... 100 non-blanks
echo array_count ($foo, 'is_active', 'Y'); // ... 35 matches
echo array_count ($foo, 'description', ''); // ... 20 is-blanks 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:35:02.027

```
function array_count ($array, $key, $value) {
    // count($array[*][$key])
    $c = 0;
    foreach ($array as $i=>$subarray) {
        $c += strcmp( $subarray[$key], $value) ) === 0 ? 1 : 0;
    }
    return $c;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T08:59:48.523

检查空数组：

```
if( 0 < ( $cnt = count($array) ) )
{
 echo "Your array size is: $cnt";
}
else
 echo "Too bad, your array is empty :("; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-11T08:34:03.683

利用：-

```
foreach ($array as $i=>$value) {

//from this you get the all whole array description value then apply if else condition to         short out

echo $_POST[$i]['description']."</br>";

    } 
```

# oop - Fortran中的双链表（类型判断不正确）

> ID：13329622
> 
> 赞同：0
> 
> 时间：2012-11-11T08:20:02.977
> 
> 标签：oop, linked-list, fortran, polymorphism

我想在 Mac OS X 10.8.2 中使用 PGI Fortran 编译器版本 12.10-0 在 Fortran 中实现一个通用的双链表来保存代码。这是我的原型，包括 3 个文件：

---> 文件 1：

```
! ----------------------------------------------------------------------------
! Description: 
! 
!   This module provides several basic data structures, e.g. double linked list. 
! 
! Authors: 
! 
!   Li Dong <dongli@lasg.iap.ac.cn> - 2012-11-11 
! ----------------------------------------------------------------------------

module basic_data_structure 

    implicit none 

    private 

    public list_elem_t, list_t 

    type list_elem_t 
        class(list_elem_t), pointer :: prev, next 
    end type list_elem_t 

    type list_t 
        integer :: num_elem = 0 
        class(list_elem_t), pointer :: head, tail 
    contains 
        procedure :: append => list_append 
        procedure :: insert => list_insert 
        procedure :: final => list_final 
    end type list_t 

contains 

    ! ------------------------------------------------------------------------
    ! Description: 
    ! 
    !   The following list_* are the type-bound procedures of double linked 
    !   list data structure. 
    ! 
    ! Authors: 
    ! 
    !   Li Dong - <dongli@lasg.iap.ac.cn> - 2012-11-11 
    ! ------------------------------------------------------------------------

    subroutine list_append(this, elem) 

        class(list_t), intent(inout) :: this 
        class(list_elem_t), intent(out), pointer :: elem 

        character(50), parameter :: sub_name = "list_append" 

        allocate(elem)
        if (this%num_elem == 0) then
            this%head => elem
            nullify(this%head%prev)
            this%tail => this%head
        else
            this%tail%next => elem
            elem%prev => this%tail
            this%tail => elem
        end if
        nullify(this%tail%next) 
        this%num_elem = this%num_elem+1 

    end subroutine list_append 

    subroutine list_insert(this, existed_elem, elem) 

        class(list_t), intent(inout) :: this 
        class(list_elem_t), intent(inout), pointer :: existed_elem 
        class(list_elem_t), intent(out), pointer :: elem 

        character(50), parameter :: sub_name = "list_insert" 

        ! TODO: Check existed_elem is allocated. 
        ! TODO: Check existed_elem is one element of this. 

        allocate(elem) 
        elem%prev => existed_elem 
        elem%next => existed_elem%next 
        if (associated(existed_elem%next)) then 
            existed_elem%next%prev => elem 
            existed_elem%next => elem 
        end if 
        this%num_elem = this%num_elem+1 

    end subroutine list_insert 

    subroutine list_final(this) 

        class(list_t), intent(inout) :: this 

        class(list_elem_t), pointer :: elem 
        integer i 

        elem => this%head 
        do i = 1, this%num_elem-1 
            elem => elem%next 
            if (associated(elem%prev)) deallocate(elem%prev) 
        end do 
        deallocate(this%tail) 

    end subroutine list_final 

end module basic_data_structure 
```

---> 文件 2

```
! ----------------------------------------------------------------------------
! Description: 
! 
!   This module manages the model variables. 
! 
! Authors: 
! 
!   Li Dong <dongli@lasg.iap.ac.cn> - 2012-11-11 
! ----------------------------------------------------------------------------

module variable 

    use basic_data_structure 

    implicit none 

    private 

    public variable_register 
    public variable_final 

    public var_t, var_1d_t 

    integer, parameter :: A_GRID = 1 
    integer, parameter :: B_GRID = 2 
    integer, parameter :: C_GRID = 3 

    type, extends(list_elem_t) :: var_t 
        character(10) name 
        character(50) long_name 
        character(20) units 
        integer grid_type 
    end type var_t 

    type, extends(var_t) :: var_1d_t 
        real(8), allocatable :: array(:) 
    end type var_1d_t 

    type, extends(var_t) :: var_2d_t 
        real(8), allocatable :: array(:,:) 
    end type var_2d_t 

    type(list_t) var_list 

contains 

    ! ------------------------------------------------------------------------
    ! Description: 
    ! 
    !   Register a variable. 
    ! 
    ! Authors: 
    ! 
    !   Li Dong <dongli@lasg.iap.ac.cn> - 2012-11-11 
    ! ------------------------------------------------------------------------

    subroutine variable_register(name, var) 

        character(*), intent(in) :: name 
        class(var_t), intent(inout), pointer :: var 

        character(50), parameter :: sub_name = "variable_register" 

        select type (var) 
        type is (var_1d_t) 
            print *, "---> Register a 1D variable """//trim(name)//"""." 
        type is (var_2d_t) 
            print *, "---> Register a 2D variable """//trim(name)//"""." 
        type is (var_t) 
            print *, "---> Oh, no!" 
        class default 
            print *, "---> Unknown variable type """//trim(name)//"""." 
        end select 

        call var_list%append(var) 

        ! -------------------------------> PROBLEM IS HERE 
        select type (var) 
        type is (var_1d_t) 
            print *, "---> Register a 1D variable """//trim(name)//"""." 
        type is (var_2d_t) 
            print *, "---> Register a 2D variable """//trim(name)//"""." 
        type is (var_t) 
            print *, "---> Oh, no!" 
        class default 
            print *, "---> Unknown variable type """//trim(name)//"""." 
        end select 

    end subroutine variable_register 

    ! ------------------------------------------------------------------------
    ! Description: 
    ! 
    !   Clean the registered variables. 
    ! 
    ! Authors: 
    ! 
    !   Li Dong <dongli@lasg.iap.ac.cn> - 2012-11-11 
    ! ------------------------------------------------------------------------

    subroutine variable_final() 

        character(50), parameter :: sub_name = "variable_final" 

        call var_list%final() 

    end subroutine variable_final 

end module variable 
```

---> 文件 3：

```
program test_variable 

    use variable 

    implicit none 

    type(var_1d_t), pointer :: a 

    call variable_register("a", a) 
    call variable_final() 

end program test_variable 
```

运行结果是：

```
MacBook-Pro:sandbox dongli$ ./test_variable 
 ---> Register a 1D variable "a". 
 ---> Unknown variable type "a". 
```

为什么添加列表后，类型`var`变为未知类型，如何实现预期功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:10:41.567

F2008 12.5.2.5 p2 在指针和可分配的虚拟参数方面说：“当且仅当关联的虚拟参数是多态的时，实际参数应该是多态的......”。

variable_register 中的虚拟参数`var`是一个多态指针。`a`主程序中的实际参数不是。你的程序出错了，Fortran 处理器不需要诊断这个错误（尽管在这种特殊情况下它应该很容易检测到这个错误）。

F2008 12.5.2.5 中的同一段接着说“......实际参数的声明类型应与虚拟参数的声明类型相同”。list_append 中的虚拟参数是声明类型的多态指针`list_elem_t`。实际参数是声明类型的多态指针`var_t`。它们不一样——你的程序错误更多。同样，Fortran 处理器不需要对此进行诊断，但在这种情况下它应该很容易做到这一点。

因为您的程序出错，所以任何事情都可能发生，但在相关说明中 - `elem`list_append 的参数已声明`INTENT(OUT)`。这意味着在该过程开始时， elem 的指针关联状态是未定义的——您不知道它指向什么（或其动态类型）。list_append 中的 allocate 语句然后分配声明类型的对象`elem`，即`list_elem_t`（作为最终参数的指针和作为“中间”参数的指针现在已经指向它们各自声明类型的父级的事实是存在上述 12.5.2.5 中引用的限制的原因 - 请阅读 F2008 中的注释 12.27）。您的选择类型不会检查该选项。

# matlab - 在matlab中将光栅图像绘图图形转换为矢量信息

> ID：13329623
> 
> 赞同：1
> 
> 时间：2012-11-11T08:20:09.497
> 
> 标签：matlab, image-processing, vector-graphics, raster

如果我有一张图片（jpg），我怎样才能得到`histogram`图片中显示的情节`Matlab`？请注意，我不想要图像的直方图，而只是想要图像呈现的线的值列表。例如如下：

0 ---> 4

1 ---> 5

2 ---> 8

**编辑** 例如，我得到了一个图像的直方图，如下所示。如何将此直方图作为值列表获取？

![在此处输入图像描述](../Images/acbd64088cc31dabe1cf4c8ece75d860.png)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:12:35.217

以下是您可以使用的一些选项：

1.  [图形数字化仪](http://www.mathworks.com/matlabcentral/fileexchange/23317-graph-digitzer)
2.  [手动数字化扫描图表](http://www.mathworks.com/matlabcentral/fileexchange/27884-manually-digitize-scanned-chart)
3.  [图像到数据](http://www.mathworks.com/matlabcentral/fileexchange/1282-image-to-data)
4.  [抓住它](http://www.mathworks.com/matlabcentral/fileexchange/7173-grabit)
5.  [数字化2](http://www.mathworks.com/matlabcentral/fileexchange/928-digitize2-m)

# multiple-inheritance - 可以避免多重继承吗？

> ID：13329624
> 
> 赞同：3
> 
> 时间：2012-11-11T08:20:16.253
> 
> 标签：multiple-inheritance

当你从 C++ 切换到 Java 时，有时会遇到“Java 没有多重继承”的问题，然后你上网找到 8475349857 篇描述如何避免多重继承的文章（在编写代码时，有时，更多麻烦）。

我不禁问自己：总是可以避免的吗？是否存在您确实需要多重继承并且不能使用组合或其他噱头来模拟它的任何场景？

# android - Google TV（或更一般地 Android 的）HLS 播放器是否支持替代音频？

> ID：13329625
> 
> 赞同：1
> 
> 时间：2012-11-11T08:20:19.123
> 
> 标签：android, ios5, http-live-streaming, google-tv

Google TV（或更一般地 Android 的）HLS 播放器是否支持替代音频？[请参阅HLS IETF 草案的](https://datatracker.ietf.org/doc/html/draft-pantos-http-live-streaming-07)第 27 页。我已经可以[在 iOS 5 中看到对此的支持](http://developer.apple.com/library/ios/#technotes/tn2288/_index.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:21:02.147

目前没有 - 我们确实（在 Google I/O 上）宣布了一些特定于 Google TV 的 API，这些 API 将在即将发布的版本中提供。

# linux - 在子网中查找网关公网 IP

> ID：13329630
> 
> 赞同：0
> 
> 时间：2012-11-11T08:21:27.667
> 
> 标签：linux, networking

如何检索我的子网网关的公共 IP（从 Internet 知道）？

是否有为此目的的专用命令？

我想从我的子网络的机器上执行这个查找。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:32:29.260

这些中的任何一个都可以：

```
lynx --dump http://ipecho.net/plain 
```

或者：

```
curl http://ipecho.net/plain; echo 
```

或者：

```
curl ifconfig.me 
```

这将为您提供在您浏览 Internet 时全世界看到的 IP。

# c# - 如何将波斯日期转换为公历日期？

> ID：13329631
> 
> 赞同：16
> 
> 时间：2012-11-11T08:21:35.530
> 
> 标签：c#

我使用下面的函数将公历日期转换为波斯日期，但我一直无法编写一个函数来进行反向转换。我想要一个将波斯日期（类似“1390/07/18 12:00:00”的字符串）转换为格鲁吉亚日期的函数。

```
public static string GetPdate(DateTime _EnDate)
{
    PersianCalendar pcalendar = new PersianCalendar();
    string Pdate = pcalendar.GetYear(_EnDate).ToString("0000") + "/" +
       pcalendar.GetMonth(_EnDate).ToString("00") + "/" +
       pcalendar.GetDayOfMonth(_EnDate).ToString("00") + " " +
           pcalendar.GetHour(_EnDate).ToString("00") + ":" +
           pcalendar.GetMinute(_EnDate).ToString("00") + ":" +
           pcalendar.GetSecond(_EnDate).ToString("00");

    return Pdate;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T08:25:01.360

`DateTime`始终有效*地*使用公历。即使您创建了一个指定不同日历的实例，由,`Day`等属性返回的值也在公历中。`Month``Year`

以伊斯兰历法的开始为例：

```
using System;
using System.Globalization;

class Test
{
    static void Main()
    {
        DateTime epoch = new DateTime(1, 1, 1, new HijriCalendar());
        Console.WriteLine(epoch.Year);  // 622
        Console.WriteLine(epoch.Month); // 7
        Console.WriteLine(epoch.Day);   // 18
    }
} 
```

目前尚不清楚您如何创建此方法的输入，或者您是否*真的*应该将其转换为字符串格式。（或者为什么你不使用内置的字符串格式化程序。）

*可能*是您可以使用：

```
public static string FormatDateTimeAsGregorian(DateTime input)
{
    return input.ToString("yyyy'/'MM'/'dd' 'HH':'mm':'ss",
                          CultureInfo.InvariantCulture);
} 
```

这适用于*任何* `DateTime`已**适当**创建的内容- 但我们不知道您在此之前做了什么。

样本：

```
using System;
using System.Globalization;

class Test
{
    static void Main()
    {
        DateTime epoch = new DateTime(1, 1, 1, new PersianCalendar());
        // Prints 0622/03/21 00:00:00
        Console.WriteLine(FormatDateTimeAsGregorian(epoch));
    }

    public static string FormatDateTimeAsGregorian(DateTime input)
    {
        return input.ToString("yyyy'/'MM'/'dd' 'HH':'mm':'ss",
                              CultureInfo.InvariantCulture);
    }
} 
```

现在，如果您在创建 时*没有*指定日历`DateTime`，那么您根本就没有真正创建波斯日期。

如果您想要跟踪其日历系统的日期，您可以使用我的[Noda Time](http://nodatime.org)项目，该项目现在支持波斯日历：

```
// In Noda Time 2.0 you'd just use CalendarSystem.Persian
var persianDate = new LocalDate(1390, 7, 18, CalendarSystem.GetPersianCalendar());
var gregorianDate = persianDate.WithCalendar(CalendarSystem.Iso); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-11T10:15:08.210

谢谢大家，我使用了下面的代码，我的问题解决了：

```
public static DateTime GetEdate(string _Fdate)
{
    DateTime fdate = Convert.ToDateTime(_Fdate);
    GregorianCalendar gcalendar = new GregorianCalendar();
    DateTime eDate = pcalendar.ToDateTime(
           gcalendar.GetYear(fdate),
           gcalendar.GetMonth(fdate),
           gcalendar.GetDayOfMonth(fdate),
           gcalendar.GetHour(fdate),
           gcalendar.GetMinute(fdate),
           gcalendar.GetSecond(fdate), 0);
    return eDate;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-31T22:10:04.297

使用此代码将波斯日期转换为公历日期，反之亦然。

```
public static class PersainDate
{
    public static DateTime ConvertToGregorian(this DateTime obj)
    {
        DateTime dt = new DateTime(obj.Year, obj.Month, obj.Day, new PersianCalendar());
        return dt;
    }
    public static DateTime ConvertToPersian(this DateTime obj)
    {
        var persian = new PersianCalendar();
        var year = persian.GetYear(obj);
        var month = persian.GetMonth(obj);
        var day = persian.GetDayOfMonth(obj);
        DateTime persiandate = new DateTime(year, month, day);
        return persianDate;
    }
} 
```

以这种方式使用代码

```
 var time = DateTime.Now;
        var persianDate = time.ConverToPersian();
        var gregorianDate = persianDate.ConverToGregorian(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-24T07:46:30.640

1-首先安装[Persiandate NuGet 包](https://www.nuget.org/packages/PersianDate/)(17KB)

```
Install-Package PersianDate 
```

2-使用 PersianDate 类的 ToFa 和 toEn 静态方法，例如（不要担心库本身将处理的分隔符和方向，如以下示例所示。您也可以在 GitHub 中找到 Usage Console 项目进行测试自己轻松）：

```
 //default format 
    string dts=ConvertDate.ToFa(DateTime.Now);//1393/08/01
    //date only (short and D for Long)
    dts=ConvertDate.ToFa(DateTime.Now, "d");//93/08/01 
    dts=ConvertDate.ToFa(DateTime.Now, "D");//پنج شنبه, 01 آبان 1393
    //time only 
    dts=ConvertDate.ToFa(DateTime.Now, "t");//21:53 
    dts=ConvertDate.ToFa(DateTime.Now, "T");//21:53:26
    //general short date + time
    dts=ConvertDate.ToFa(DateTime.Now, "g");//93/08/01 21:53 
    dts=ConvertDate.ToFa(DateTime.Now, "G");//93/08/01 21:53:26
    //general full date + time
    dts=ConvertDate.ToFa(DateTime.Now, "f");//پنج شنبه, 01 آبان 1393 21:53 
    dts=ConvertDate.ToFa(DateTime.Now, "F");//پنج شنبه, 01 آبان 1393 21:53:26
    //only month and year
    dts=ConvertDate.ToFa(DateTime.Now, "m");//آبان 1 
    dts=ConvertDate.ToFa(DateTime.Now, "y");//1393 آبان

    dts=ConvertDate.ToFa(DateTime.Now);//1393/08/01
    // converting back to Gregorian date 
    Datetime dt= ConvertDate.ToEn(dts);//2014/10/23 00:00:00 
```

3- [GitHub 中的源代码可](https://github.com/imanabidi/PersianDate.NET)用于任何修改和支持新格式。

查找以下函数源代码，看看它是如何工作的

```
 public static DateTime ToEn(string fadate)
    {
        if (fadate.Trim() == "") return DateTime.MinValue;
        int[] farsiPartArray = SplitRoozMahSalNew(fadate);

        return new PersianCalendar().ToDateTime(farsiPartArray[0], farsiPartArray[1], farsiPartArray[2], 0, 0, 0, 0);

    }

    private static int[] SplitRoozMahSalNew(string farsiDate)
    {
        int pYear = 0;
        int pMonth = 0;
        int pDay = 0;

        //normalize with one character
        farsiDate = farsiDate.Trim().Replace(@"\", "/").Replace(@"-", "/").Replace(@"_", "/").
            Replace(@",", "/").Replace(@".", "/").Replace(@" ", "/");

        string[] rawValues = farsiDate.Split(new[] { '/' }, StringSplitOptions.RemoveEmptyEntries);

        if (!farsiDate.Contains("/"))
        {
            if (rawValues.Length != 2)
                throw new Exception("usually there should be 2 seperator for a complete date");
        }
        else //mostly given in all numeric format like 13930316
        {
            // detect year side and add slashes in right places and continue
        }
        //new simple method which emcompass below methods too
        try
        {
            pYear = int.Parse(rawValues[0].TrimStart(new[] { '0' }).Trim());
            pMonth = int.Parse(rawValues[1].TrimStart(new[] { '0' }).Trim());
            pDay = int.Parse(rawValues[2].TrimStart(new[] { '0' }).Trim());

            // the year usually must be larger than 90
            //or for historic values rarely lower than 33 if 2 digit is given
            if (pYear < 33 && pYear > 0)
            {
                //swap year and day
                pYear = pDay;
                pDay = int.Parse(rawValues[0]); //convert again
            }
            //fix 2 digits of persian strings
            if (pYear.ToString(CultureInfo.InvariantCulture).Length == 2)
                pYear = pYear + 1300;
            //
            if (pMonth <= 0 || pMonth >= 13)
                throw new Exception("mahe shamsi must be under 12 ");
        }
        catch (Exception ex)
        {
            throw new Exception(
                "invalid Persian date format: maybe all 3 numric Sal, Mah,rooz parts are not present. \r\n" + ex);
        }

        return new[] { pYear, pMonth, pDay };
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-11T09:43:29.840

```
You may try with this: 

using System.Globalization // namespace
GregorianCalendar greg = new GregorianCalendar();
DateTime DayYearMonth = new DateTime(1433, 10, 11, greg );

Console.WriteLine(greg .GetDayOfMonth(DayYearMonth )); // 11
Console.WriteLine(greg .GetYear(DayYearMonth )); // 1433
Console.WriteLine(greg .GetMonth(DayYearMonth )); // 10 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-08T06:43:45.280

此方法将表示 shamsi 日期的字符串转换为 System.DateTime ：

```
 public DateTime milady(string shamsiDate)
    {
        DateTime dt = new DateTime();
        PersianCalendar pc = new PersianCalendar();

        int pYear = Convert.ToInt32(shamsiDate.Substring(0, 4));
        int pMonth =Convert.ToInt32(shamsiDate.Substring(5, 2));
        int pDay =  Convert.ToInt32( shamsiDate.Substring(8));

        dt = pc.ToDateTime(pYear, pMonth, pDay,0,0,0,0);
        return dt;
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-15T09:59:15.930

这种方法检查闰年。

```
private static DateTime JalaliToGregorianDate(string jalaliDate)
{
    string[] JalaliDateArray = jalaliDate.Split(new Char[] { '/' });
    int Year, Mounth, Day;
    DateTime GregorianDate;
    PersianCalendar persianCalendar = new PersianCalendar();
    //
    Year = int.Parse(JalaliDateArray[2]);
    if (Year < 100)
    {
        Year = 1300 + Year;
    }
    Mounth = int.Parse(JalaliDateArray[1]);
    Day = int.Parse(JalaliDateArray[0]);
    if (Day > 29 && Mounth == 12)
    {
        if (!persianCalendar.IsLeapYear(Year))
        {
            throw (new Exception(string.Format("IsNotLeapYear&{0}", Year)));
        }
    }
    GregorianDate = persianCalendar.ToDateTime(Year, Mounth, Day, 0, 0, 0, 0);
    //
    return GregorianDate;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-03T17:44:09.390

使用 Persia.NET Core 可以帮助您：

**将公历转换为 Shamsi**

```
Persia.SolarDate solarDate = Persia.Calendar.ConvertToPersian(DateTime.Now);
// getting the simple format of persian date
string str = solarDate.ToString(); 
```

**将 Shamsi 转换为公历**

```
DateTime ConvertToGregorian(SolarDate solarDate)
DateTime ConvertToGregorian(LunarDate lunarDate)
DateTime ConvertToGregorian(int year, int month, int day, DateType dateType)
DateTime ConvertToGregorian(int year, int month, int day, int hour, int minute, int
second, DateType dateType) 
```

[您可以在此处](https://github.com/shahabfar/Persia-.NET-Core)下载它 如果您的应用程序不支持 .NET Core，您可以从 NuGet 找到它的旧版本。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-26T10:18:12.343

您可以使用 PersianDateTime，使用 Nuget：

```
PM> Install-Package PersianDateTime 
```

以及如何使用：

```
DateTime miladiDate = new DateTime(2013, 5, 31);
PersianDateTime persianDate = new PersianDateTime(miladiDate); 
```

和：

```
PersianDateTime persianDate = PersianDateTime.Parse("1392/03/02");
DateTime miladiDate = persianDate.ToDateTime(); 
```

for :[有关 PersianDateTime 的更多信息](http://www.dotnettips.info/post/1349/persiandatetime-%D8%AC%D8%A7%DB%8C%DA%AF%D8%B2%DB%8C%D9%86%DB%8C-%D8%A8%D8%B1%D8%A7%DB%8C-system-datetime)

# maven - 如何解读 M2E 中的生命周期映射对话框？

> ID：13329634
> 
> 赞同：5
> 
> 时间：2012-11-11T08:23:11.870
> 
> 标签：maven, maven-3, m2eclipse, m2e

在eclipse M2E 1.2.0插件中，当我进入一个maven项目属性时，有一个生命周期映射对话框，这个对话框中的各个列是什么意思。我在网上搜索了解释，但没有找到任何可以清楚地解释各个列的含义的内容。

*   每一列是什么意思？
*   为什么剂量配置器在映射中多次显示，例如在编译器中：编译
*   来源栏中的不同来源是什么意思？

![在此处输入图像描述](../Images/5706ab13f921280c24b41d8de5d5e0ab.png)

**更新：**此链接有关生命周期映射的良好信息[https://docs.sonatype.org/display/M2ECLIPSE/Customizable+build+lifecycle+mapping+for+m2e+extensions+developers#Customizablebuildlifecyclemappingform2eextensionsdevelopers-Introduction](https://docs.sonatype.org/display/M2ECLIPSE/Customizable+build+lifecycle+mapping+for+m2e+extensions+developers#Customizablebuildlifecyclemappingform2eextensionsdevelopers-Introduction)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T10:02:53.637

> 每一列是什么意思？

插件执行：一个 Maven 目标，它被 m2eclipse 发现为绑定到您的 pom.xml。有关更多详细信息，请参阅[Maven：构建生命周期简介](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

> 为什么剂量配置器在映射中多次出现，例如在编译器中：编译

这可能是一个错误，也可能是`compiler:compile`目标由多个配置器映射的信号。

> 来源栏中的不同来源是什么意思？

*   无趣：它在 Eclipse 中被完全忽略
*   默认值：它由 m2e 的内置处理程序处理，例如 maven-resources-plugin
*   扩展：它由 m2e 外部的配置器处理

# c - 如何使用 C 更改 .dll 的文件版本和产品名称？

> ID：13329635
> 
> 赞同：0
> 
> 时间：2012-11-11T08:23:12.643
> 
> 标签：c, dll, versioning, getfileversion

当我单击 .Dll -> Details 的属性时，我得到这个窗口： ![在此处输入图像描述](../Images/93236b37b1b50ecd621f1f52a74fb097.png)

我想访问此信息并更改\添加文件版本和产品名称我可以得到一些帮助吗？我怎样才能访问它？我在 C# 中看到我可以使用：

```
string fileVersion = FileVersionInfo.GetVersionInfo(file).FileVersion;
string productVersion = FileVersionInfo.GetVersionInfo(file).ProductVersion; 
```

但我想用 C 语言来做。

任何人都可以帮助和指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:29:03.630

版本信息作为资源文件保存在 Windows 中。您可以查看此[工具](http://www.codeproject.com/Articles/13355/Modification-of-Version-Information-Resources-in-C)的源代码以了解如何更改文件中的资源。

# sql - 包含“in”子句的简单 sql 查询，检查更好的语法

> ID：13329638
> 
> 赞同：2
> 
> 时间：2012-11-11T08:23:49.073
> 
> 标签：sql, sql-server, in-clause

我想知道执行 SQL 查询的最佳方法。我有一个表，其中包含与文章相关的主题（每篇文章至少包含 2 个主题）。用户正在搜索两个主题，我需要回复所有文章。

我有一个看起来像这样的表：

> SubjectID ---> 键
> 
> 文章编号

我的查询如下：

```
SELECT  ArticleID
FROM    tblSubjectsInArticles
WHERE   SubjectID = @pSubjectID1
        AND ArticleID IN (SELECT ArticleID FROM tblSubjectsInArticles WHERE SubjectID = @pSubjectID2); 
```

我感觉有更好的方法来执行这项任务，可能是高效的查询或不同的数据结构。也许你们中的一个人知道更好的方法，或者您可以放心，这是最好的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:31:55.233

```
select distinct s1.ArticleID
from   tblSubjectsInArticles s1
         join tblSubjectsInArticles s2 
           on s1.ArticleID = s2.ArticleID
where  s1.SubjectID = @pSubjectID1
   and s2.SubjectID = @pSubjectID2 
```

因此，您将在 ArticleID 上创建一个连接表并过滤相关主题。distinct 确保您的列表仅包含唯一的 ArticleID

# linq - 使用 Linq 引用 DataTable 列

> ID：13329640
> 
> 赞同：1
> 
> 时间：2012-11-11T08:24:50.510
> 
> 标签：linq, datatable, asenumerable

我正在尝试使用 linq 加入两个数据表

```
var invoices420 = dt420_.AsEnumerable();
var invoices430 = dt430_.AsEnumerable();

            var query = from inv430 in invoices430
                        join inv420 in invoices420 on inv430.LinkDoc equals inv420.LinkDoc
                        orderby inv430.SID
                        select new
                {
                    LinkDoc = inv430.LinkDoc,
                    TotalIn = Math.Round(inv430.Credit, 2),
                    TotalOut = ((inv420 == null) ? 0 : Math.Round(inv420.Debit, 2))

                }; 
```

加入似乎不是问题，但我收到错误“System.Data.DataRow”不包含“LinkDoc”的定义，并且没有扩展方法“LinkDoc”接受“System.Data.DataRow”类型的第一个参数' 可以找到（您是否缺少 using 指令或程序集引用？）。

在不使用 inv430.Field("linkdoc") 的情况下，我必须做什么才能引用 DataTable 中的列，例如 inv430.LinkDoc？

如果我想对结果集进行分组，我在想

```
var q2 = query
         .GroupBy(item => item.LinkDoc);

return q2.ToArray(); 
```

问题是在第二季度我没有得到所有的列（linkdoc、totalin、totalout）。

原始数据是

```
dt420_
Linkdoc   Credit
Invoice1  500
Invoice2  100
Invoice3  200

dt430_
LinkDoc   Debit
Invoice1  100
Invoice1  100
Invoice2  200

Result would be
LinkDoc    TotalIn(Credit)  TotalOut(Debit)
Invoice1   500              200
Invoice2   100              200
Invoice3   200              0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:38:54.647

您需要将所有直接调用的位置替换为属性，例如

```
inv430.LinkDoc 
```

到

```
inv430["LinkDoc"] 
```

inv430 是一个`DataRow`所以你需要使用获取字符串的索引器。

编辑：您的加入会带来错误的数据（请参阅下面的评论）。您需要使用以下代码：

```
var group430 = from inv430 in invoices430
               group inv430 by inv430["LinkDoc"].ToString().Trim() into g
               select new
               {
                    LinkDoc = g.Key.ToString().Trim(),
                    TotalOut = g.Sum(inv => Math.Round((decimal)inv["Debit"], 2))
               };

var group420 = from inv420 in invoices420
               group inv420 by inv420["LinkDoc"].ToString().Trim() into g
               select new
               {
                    LinkDoc = g.Key.ToString().Trim(),
                    TotalIn = g.Sum(inv => Math.Round((decimal)inv["Credit"], 2))
               };

var result = from inv430 in group430
             join inv420 in group420 on inv430.LinkDoc equals inv420.LinkDoc into inv
             from inv420 in inv.DefaultIfEmpty()
             select new
             {
                 inv430.LinkDoc,
                 TotalOut = inv430.TotalOut,
                 TotalIn = inv420 != null ? inv420.TotalIn : 0
             }; 
```

# c++ - 公共成员函数问题

> ID：13329641
> 
> 赞同：0
> 
> 时间：2012-11-11T08:24:56.270
> 
> 标签：c++, visual-c++

我是 OOP 的初学者->我有一个带有 3 个私有变量成员的 Date 类，并且应该以 2 种方式打印日期：

1.  2010 年 12 月 25 日
2.  2010 年 12 月 25 日

以下代码给出了错误：

> date.obj：错误 LNK2019：未解析的外部符号“public：__thiscall Date::Date(void)”（??0Date@@QAE@XZ）在函数“public：void __thiscall Date::printDate(void)”中引用（？ printDate@Date@@QAEXXZ) 我做错了什么？日期.h

```
#include<iostream>
#include<string>
#ifndef DATE_H
#define DATE_H
class Date
{
private:
    int day;
    int month;
    int year;
public:
    Date();
    Date(int d, int m, int y)
    {
        day=d;
        month=m;
        year=y;
    }
    int getDay() const {return day;}
    int getMonth() const {return month;}
    int getYear() const {return year;}
    void printDate(void);
};
#endif 
```

日期.cpp

```
#include"date.h"
#include<iostream>
#include<string>
const int NR=12;
void Date::printDate()
{
    Date newDate;
    std::string Months[]={"January","February", "March" , "April", "May", "June", "July", "August", "September", "Octomber", "November", "December"};
    int position;
    std::string month;
    position=newDate.getMonth();
    for(int i=0;i<NR;i++)
    {
        if(i==position)
        {
            month=Months[i];
        }
    }
    std::cout<<month<<" "<<newDate.getDay()<<" "<<newDate.getYear()<<std::endl;
} 
```

主文件

```
#include "date.h"
#include <iostream>
int main()
{
    int d;
    int m;
    int y;
    std::cout<<"Enter day: ";
    std::cin>>d;
    std::cout<<"Enter month: ";
    std::cin>>m;
    std::cout<<"Enter years: ";
    std::cin>>y;
    Date newDate(d,m,y);
    std::cout<<newDate.getMonth()<<"/"<<newDate.getDay()<<"/"<<newDate.getYear()<<std::endl;
    newDate.printDate();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:26:32.813

错误很明显：您为类**声明**了构造函数，`Date`但没有在 cpp 文件中**定义它们。**

您应该为这些构造函数添加定义。他们可能看起来像这样：

```
Date::Date() {} 
```

或许

```
Date::Date() {
  d = 1;
  m = 1;
  y = 1970;
} 
```

如果你打电话至少不会打印废话

```
Date myDate;
myDate.printDate(); 
```

**编辑：**

正如 Mat 所建议的，您应该尽可能使用构造函数初始化程序列表。您的其他使用参数的构造函数看起来像这样，带有初始化列表：

```
Date(int d, int m, int y) : 
   day(d), month(m), year(y) {} 
```

在您的情况下，您的构造函数在 上调用空构造函数`day`，`month`然后为它们赋值，而在使用初始化列表时，`year`构造*函数*调用`Date`带有参数的构造函数 for`day`和。`month``year`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:55:50.647

嗯，我想你也可能在这里误解了很多东西。首先，成员数据：在您的 printDate() 函数内部，您可以直接引用日期对象的成员变量。其次，你不需要那个 for 循环，你可以说

```
months[position] 
```

第三， const global 不是存储该数组大小的最佳方式。如果您需要知道数组的大小，您可以调用

```
months.size() 
```

第四，月份数组可以是成员数据，因此您无需在每次调用 printDate 时都声明它。最后，您不需要在 cpp 文件中包含任何已包含在头文件中的内容。

所以你的新类应该是这样的：

日期.h：

```
#include<iostream>
#include<string>
#ifndef DATE_H
#define DATE_H
class Date
{
private:
    int day;
    int month;
    int year;
    const std::string months[] = {"jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"};
public:
    Date(){}
    Date(int d, int m, int y)
    int getDay() const {return day;}
    int getMonth() const {return month;}
    int getYear() const {return year;}
    void printDate(void);
};
#endif 
```

然后日期.cpp：

```
#include "Date.h"
Date::Date(int d, int m, int y)
{
    day=d;
    month=m;
    year=y;
}
void Date::printDate(void)
{
    std::cout<<months[month]<<" "<<day<<" "<<year<<std::endl;
} 
```

我知道这对你想做的事情似乎毫无意义，但你很快就会让自己陷入使用 C++ 的麻烦，因为它只是让你在大多数情况下做任何你想做的事情，所以最好学习良好的编码实践并学习能力当您开始使用一种语言时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T08:43:36.660

alestanis 对您需要做出的更改以消除错误是正确的。但是您的代码仍然非常错误。您显然在为面向对象而苦苦挣扎。

在您的`printDate`方法中，您应该只打印出 Date 类的成员变量。您不应声明新变量。像这样做

```
void Date::printDate()
{
    std::cout<<Months[m]<<" "<<d<<" "<<y<<std::endl;
} 
```

比你写的简单得多的代码。

# sendmail - 使用 Sendmail 添加 X-header（用于使用 milter）

> ID：13329643
> 
> 赞同：1
> 
> 时间：2012-11-11T08:25:26.713
> 
> 标签：sendmail, email-headers

我想`Sendmail`使用 Milter 进行配置以包含自定义 X-headers（我想使用免费版本）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-11T17:18:18.623

您不会说出“Milter”的意思，因为它是一个 API。最简单的答案是在使用 milter API 的应用程序中添加 X-* 标头。例如，使用 python-pymilter 的应用程序可能会使用：

```
self.add_header("X-DSpam-Score",'%f' % ds.probability) 
```

# ios - UILabel 和 UITextField 编辑字符

> ID：13329644
> 
> 赞同：0
> 
> 时间：2012-11-11T08:25:36.503
> 
> 标签：ios, uitextfield, uilabel

我在 iOS 中做一个字谜类型的任务。在这种情况下，我需要一个解决方案，

例如：

```
NSString* quest = @"SATCK";
labelQuestion.text = quest; 
```

我有一个 UITextField 来输入答案。正确答案是“堆栈”。用户将把它输入到 UITextFiled。例如：当用户在文本字段中键入“S”时，我需要从 UILabel 中删除字符“S”，同样，如果他在文本字段中删除字符“S”，我需要在 UILabel 中恢复“S”。这应该发生在所有字符用户类型上。如果用户在 textField 中键入“STACK”，我需要从 UILabel 中一一隐藏 S、T、A、C、K 字符。我怎样才能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:43:41.830

您需要设置一个符合“ `UITextFieldDelegate`”协议的委托对象。

然后，您可以通过 捕获正在输入到文本字段中的字符[`[UITextFieldDelegate textField:shouldChangeCharactersInRange:replacementString:]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textField%3ashouldChangeCharactersInRange%3areplacementString%3a)。

在您的委托对象中的该方法中，您可以编写代码来检测正在输入的字符，并且您可以从标签中减去这些字母（或者如果从文本字段中删除了这些字符，则重新添加它们）。

# javascript - Javascript 函数的工作时间只有一半

> ID：13329645
> 
> 赞同：0
> 
> 时间：2012-11-11T08:25:41.947
> 
> 标签：javascript, function

好吧，我知道这很奇怪，我想也许它与吊装有关，但我不太了解，所以我完全不确定。我基本上有一个石头剪刀布游戏，如果你不选择任何东西，电脑会随机选择。选择您选择的照片后，选择列表的值也会更改。

我的问题是图像并不总是改变，但只有当计算机随机化一个数字并且仅在 Chrome 中。[这是](http://jsfiddle.net/yotamoo/cr8s8/)jsFiddle 的链接，我也会在这里提供我的代码。

HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Rock-paper-scissers</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
<script src="rps.js"></script>
<style type="text/css">
html{
    min-height: 100%;
}
body{
    height: 100%;
    font: 100.01% "Trebuchet MS",Verdana,Arial,sans-serif;
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#93e1d1), to(#d4c87c));
    background-image: -webkit-linear-gradient(left, #93e1d1, #d4c87c); 
    background-image: -moz-linear-gradient(top, #93e1d1, #d4c87c);
    background-repeat: no-repeat;
    text-align: center;
}
div#Container {
    width: 80%;
    margin: 0 auto;
}
div#InnerLeft {
    width: 50%;
    position: relative;
    float: left;
}
div#InnerRight {
    width: 50%;
    position: relative;
    float: right;
}

div#Footer {
    clear: both;
}
div#notes {
    width: 60%;
    margin: 0 auto;
    padding-top: 15px;
    text-align: left;
}
select {
    background: transparent;
    margin-top: 15px;
    width: 220px;
    font-size: 16px;
    -webkit-appearance: none;
    border: 0px;
    height: 34px;
}
</style>
</head>
<body>
<div id="Container">
<img src="images/header.png">
<div id="InnerLeft">
<img src="images/uno.png"><br>
<select id="p1" onchange="change('p1','rpsleft')">
<option value=0>Choose your weapon</option>
<option value=1>Rock</option>
<option value=2>Paper</option>
<option value=3>Scissors</option>
</select>
<p><img src="images/rpsL.png" id="rpsleft"></p>
</div>
<div id="InnerRight">
<img src="images/dos.png"><br>
<select id="p2" onchange="change('p2','rpsright')">
<option value=0>Choose your weapon</option>
<option value=1>Rock</option>
<option value=2>Paper</option>
<option value=3>Scissors</option>
</select>
<p><img src="images/rps.png" id="rpsright"></p>
</div>
<div id="Footer">
<img src="images/andale.png" id="andale" onclick="rps(document.getElementById('p1').value,document.getElementById('p2').value)"
onMouseOver="document.getElementById('andale').src='images/andale2.png'"
onMouseOut="document.getElementById('andale').src='images/andale.png'">
</div>
</div>
</body> 
```

Javascript

```
// JavaScript Document
function reset() {
    document.getElementById('p1').value = 0;
    document.getElementById('p2').value = 0;
    document.getElementById('rpsleft').src="images/rpsL.png"
    document.getElementById('rpsright').src="images/rps.png"
    return;
}

function change(player,image) {
    var icon = document.getElementById(player).value;
    image = document.getElementById(image)
    switch (parseInt(icon)) {
        case 1: 
            if (player == 'p1')
                image.src="images/rockL.png";
            else 
                image.src="images/rock.png";
            break;
        case 2: 
            if (player == 'p1')
                image.src="images/paperL.png";
            else 
                image.src="images/paper.png";
            break;
        case 3: 
            if (player == 'p1')
                image.src="images/scissorsL.png";
            else 
                image.src="images/scissors.png";
            break;
    }
    return;
}

function getValue(player) {
    var rand = player;
    if (rand == 0) {
        rand = Math.floor(Math.random()*3) + 1;
    }
    return rand;
}

function rps(player1,player2) {
    var p1 = getValue(player1);
    var p2 = getValue(player2);

    document.getElementById('p1').value = p1;
    document.getElementById('p2').value = p2;

    change('p1','rpsleft');
    change('p2','rpsright');
    if (p1 == p2) {
        alert("It's a tie!");
        reset();
        return;
    }

    var sum = parseInt(p1) + parseInt(p2);
    var winner;
    switch(sum) {
        case 3:
            (p1 == 2) ? winner = '1' : winner = '2';
            break;
        case 4:
            (p1 == 1) ? winner = '1' : winner = '2';
            break;
        case 5:
            (p1 == 3) ? winner = '1' : winner = '2';
            break;  
        default:
            alert("There was an error");        
    }
    alert("Player " + winner + " is the winner");
    reset();
    return;
} 
```

谢谢！

# ios - 使用 TokBox API 构建 Ustream 类型的应用程序？

> ID：13329651
> 
> 赞同：2
> 
> 时间：2012-11-11T08:27:46.060
> 
> 标签：ios, video-streaming, http-live-streaming, opentok, tokbox

从他们的网站上看还不是很清楚，但是可以使用 TokBox Web/iOS API 构建一对多的流媒体应用程序，例如 Ustream 吗？是否仅限于聊天。

我想做一些从桌面或 ios 设备捕获视频的东西，并让该视频可以在某个公共 URL 上访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T10:35:56.193

是的，这是有能力的。OpenTok 与发布者和订阅者一起工作。单个发布者可以发布到会话，然后许多用户可以使用公共访问令牌订阅发布者流。

查看[API](http://www.tokbox.com/opentok/api/features)，它展示了你可以用它做什么，它是如何做的，甚至展示了一些很好的演示。有很多例子说明他们如何将其用于在线聊天节目和其他类似的一对多应用程序。

他们最近还发布了他们的 WebRTC 版本，这绝对值得一看！

# c# - 在 C# 应用程序运行时分析所有变量的内存使用情况

> ID：13329653
> 
> 赞同：-1
> 
> 时间：2012-11-11T08:28:41.037
> 
> 标签：c#, variables, memory, profiling, runtime

为了将我的 C# 应用程序中的内存占用减少到限制以下（大约 1-2GB），我希望实时（在运行时）查看所有变量的列表，以及它们消耗了多少内存（甚至可能是内容）。

在我看来，这个看似简单的请求似乎已经逃脱了内存分析器的注意。例如，.NET Memory Profiler 显示每个给定类型（例如 Int32[] 或 String）的内存，但似乎不允许更精细的粒度来显示每个命名变量的内存。

虽然我没有尝试过 dotTrace 或 ANTS Memory Profiler，但扫描常见问题解答、视频和屏幕截图也是空白。

除了我自己的变量之外，所需的分析器可能包括任何 .NET 应用程序典型的“开销”内存使用情况，尽管对我来说，这并不重要。

有没有可以做到这一点的程序（最好是免费的或低于 100 美元）？

- - - - - - - 编辑

对于相互引用的变量（如 Jon Skeet 所示），或通过引用传递给方法的变量，分析器可以将它们分组以显示它们实际上是同一个对象（因此“共享”相同的内存)，或者只显示原始变量名并省略引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T08:36:14.037

> 但似乎不允许更精细的粒度来显示每个命名变量的内存。

那可能是因为它没有多大意义。变量本身通常不会占用太多内存——它是占用内存的*对象*，而变量只是防止这些对象被垃圾收集。

例如，考虑以下代码：

```
byte[] array = new byte[1024 * 1024]; // 1MB
byte[] array2 = array;
byte[] array3 = array; 
```

这里我们有三个变量，都指向同一个数组。您想要的工具会显示他们每个人占用多少内存？1MB，因为每个都指一个1MB的数组？这会令人困惑，因为尽管实际只使用了 1MB，但显示的总内存为 3MB。0.3333MB？肯定更混乱。1MB？有点准确，但无济于事。

您应该专注于哪些*对象*比您希望的存活时间更长，然后找出使这些对象保持存活的原因。

通常，如果一个“看似简单的请求”似乎已经“逃脱了该领域专业人士的注意”，那是因为它毕竟*不是一个简单的请求。*

# wordpress - 在 Wordpress 托管博客中从 /%postname%/ 重定向到 /%postname%.html

> ID：13329655
> 
> 赞同：1
> 
> 时间：2012-11-11T08:29:03.483
> 
> 标签：wordpress, redirect, http-status-code-404, permalinks

我刚刚将我的永久链接从更改`/%postname%/`为`/%postname%.html`

因此，其中的链接`/%postname%/`显示`404`错误。

我想将这些链接重定向到`/%postname%.html`以避免 404 错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:48:49.607

更改带有扩展名的永久链接设置只会在帖子中生效，而不是在页面中。在很多这样的情况下，我总是使用这个插件[http://www.introsites.co.uk/wordpress/html-on-pages-plugin.html](http://www.introsites.co.uk/wordpress/html-on-pages-plugin.html)，它是一个简短的插件并且可编辑，您可以更改扩展名（.html ) 到许多其他类似：.asp、.shtml 等。

但请注意：如果您对永久链接设置进行了编辑，请停用插件并在完成后再次激活它。因为如果您更改永久链接设置并且没有停用并激活此插件，所有页面将显示为未找到。

您可以查看插件统计信息[http://wordpress.org/extend/plugins/html-on-pages/stats/](http://wordpress.org/extend/plugins/html-on-pages/stats/)了解有多少人使用了该插件。

# ruby-on-rails-3 - Rails 测试 - 在测试期间查询数据库时没有返回行

> ID：13329658
> 
> 赞同：0
> 
> 时间：2012-11-11T08:29:15.787
> 
> 标签：ruby-on-rails-3, postgresql

我已经为我的一些（不是全部）模型制作了固定装置，并编写了测试，其中创建和保存了其他模型的对象。`rake test`我正在使用 Rails ( )中内置的标准测试系统。在我的一项测试中，我调用了`debugger`.

在调试器中，调用`Login.all`返回两个在测试中创建的登录。但是，如果我连接到数据库（一个 PostgreSQL 数据库，我正在使用 pgAdmin 3 连接）并执行 a `select * from logins`，则不会返回任何行。

我知道这是正确的数据库，因为我的灯具都在那里（例如，如果我运行`select * from users`，我所有的灯具用户都会出现）。

我假设当我`#save`在测试期间调用 ActiveRecord 对象时，它实际上会将其插入到数据库中。这个假设是不正确的，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:38:23.723

原来每个测试都在事务中运行。当调试器被触发时，事务还没有提交，所以数据库中没有任何显示。事务可以手动提交（但测试完成后数据无法回滚，因此可能与其他测试发生冲突）。

# java - 在验证码中为视障者连接声音

> ID：13329667
> 
> 赞同：1
> 
> 时间：2012-11-11T08:32:04.040
> 
> 标签：java, jsp, captcha, text-to-speech, javasound

我有一个代码，它从 Java 中的随机字符生成验证图像并返回到显示它的 HTML 表单。但我也想为视障人士的图像添加声音剪辑。

任何人都可以帮助我提供任何教程或示例或他们自己想出的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:41:19.297

对于服务器端，您可能有一个 servlet 使用[`javax.sound.sampled`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/package-summary.html)（用于连接字母和数字的预录制部分）生成声音。请参阅[连接或混合音频文件](http://www.jsresources.org/examples/AudioConcat.html)以获取工作源。

除非您明确打算使用小程序（我不建议这样做），否则它的客户端与 Java 并不真正相关。

# java - 如何使用基于用户信息服务的 util 类

> ID：13329670
> 
> 赞同：0
> 
> 时间：2012-11-11T08:32:35.690
> 
> 标签：java, jakarta-ee

这是我的第一篇文章，很高兴来到这里。

我正在开发一个 Web 应用程序，我在 util 包中有一个 FormateUserLanguage util 类我想在应用程序声明时使用用户特定信息初始化这个 util 类，并在整个用户会话中使用该实例（会话不可用于此FormateUserLanguage 类，因为它是 util 类）。

例子 ：

当userA登录到应用程序时，userA的信息被初始化到util类中，他可以得到一些区域的格式化信息。如用户B，用户C....等，。

由于这是多用户应用程序，因此需要使用 FormateUserLanguage util 类显示用户特定信息。

请帮助如何在我的应用程序中实现此功能。

热切地等待您的回复。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:43:34.117

我认为您正在考虑一个[HttpSession](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html)，您可以存储可以由[RequestObject](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28boolean%29)创建/检索的任意对象（属性） 。

您需要阅读 Web 应用程序的生命周期，并保留此类偏好。（会话通常是每个服务器 JVM，但有一些方法可以在集群中的服务器之间传输/共享会话）

您可能想弄清楚您是否甚至需要每个会话对象，或者是否可以使用[过滤器](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)在每个请求的基础上创建它...

# shell - 从文本文件中提取城市

> ID：13329673
> 
> 赞同：0
> 
> 时间：2012-11-11T08:33:27.677
> 
> 标签：shell, command-line, command

我在文本文件中有大量城市，但只需要提取城市。

这是格式：

```
Country,City,AccentCity,Region,Population,Latitude,Longitude
ad,aixas,Aixàs,06,,42.4833333,1.4666667
ad,aixirivali,Aixirivali,06,,42.4666667,1.5
ad,aixirivall,Aixirivall,06,,42.4666667,1.5
ad,aixirvall,Aixirvall,06,,42.4666667,1.5 
```

是否可以仅提取城市并通过命令行将它们输出到另一个文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:39:09.930

```
awk '{FS=","; print $2}' < file 
```

# php - 如何通过 PHP 中的运行时脚本禁用 MySQL 中的大小写敏感性

> ID：13329677
> 
> 赞同：3
> 
> 时间：2012-11-11T08:34:12.573
> 
> 标签：php, mysql, case-sensitive, case-insensitive

我必须将 MySQL 备份从 Windows 服务器导入到 Linux 服务器。由于表名在以前的数据库中是大写和小写的，所以我现在遇到了问题，因为在当前服务器（Linux）中，MySQL 的设置是不区分大小写的模式。此外，我无法更改其设置，因为它是共享主机，我无权访问它。
如何使用 PHP 中的运行时脚本强制 MySQL 在不区分大小写模式下运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:08:09.777

我认为您可以使用此代码重命名或即时使用：

```
select concat('rename table ', table_name, ' to ' , lower(table_name) , ';') from information_schema.tables where table_schema = 'your_schema_name';

SELECT * from lower(table_name) ... 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-11T08:48:01.130

解决这个问题其实很简单。您需要做的就是编辑 my.cnf 文件并设置/添加以下条目。对于我的默认 mysql 安装“my.cnf”位于“c:\program files\mysql\mysql server[version]\my.cnf”

```
#Ensure that table names are stored case sensitive and that queries are case sensitive when naming a table
lower_case_table_names=0 
```

您可以将此路径更改为 gnu/linux

# ruby-on-rails-3.2 - 将 Cancan 权限序列化为 emberjs

> ID：13329681
> 
> 赞同：5
> 
> 时间：2012-11-11T08:35:40.577
> 
> 标签：ruby-on-rails-3.2, ember.js

我想知道是否有人知道如何将 CanCan 权限序列化为 emberjs。我看到了 Jo_Liss 的 StackOverflow Q &A，她解释了如何**[使用 active_model_serializers 序列化权限（例如 CanCan）](https://stackoverflow.com/questions/11660179/serialize-permissions-e-g-cancan-with-active-model-serializers)**，但在那个级别上停止了。这篇文章也**[链接到这里，讨论了如何在 emberjs 端检查权限](http://livsey.org/blog/2012/10/16/writing-a-helper-to-check-permissions-in-ember-dot-js/)**，但没有讨论如何将后端的权限序列化到 emberjs 中。

我希望有 3 种用户角色，即“管理员”、“作者”、“用户”，并且希望在 emberjs 上使用 CanCan 权限来控制他们在登录路径中可以访问的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T15:11:37.720

您可以使用 UserSerializer 序列化用户 CanCan 能力：

```
class UserSerializer < ActiveModel::Serializer
  attributes :id, :name, :email, :ability

  def ability
    Ability.new(self).as_json
  end
end 
```

这将返回如下内容：

```
user: {
  id: 1,
  name: "xxx",
  email: "xxx",
  ability: rules: [
    {
      match_all: false,
      base_behavior: false,
      actions: [
        "edit"
      ],
      subjects: [
        "user"
      ],
      conditions: { },
      block: null
    },
    {
      match_all: false,
      base_behavior: true,
      actions: [
        "read"
      ],
      subjects: [
        "user"
      ],
      conditions: { },
      block: null
    }
  ]
} 
```

你需要实现某种罐头吗？不能吗？javascript中的助手来处理能力。

希望有帮助。

# excel - vba excel：对其他工作簿进行排序

> ID：13329682
> 
> 赞同：0
> 
> 时间：2012-11-11T08:35:46.163
> 
> 标签：excel, vba

当 excel 宏未打开新工作表时，排序命令有效。如果 excel 宏试图操作由宏打开的工作表，则相同的排序命令不起作用。

```
With ActiveWorkbook.Worksheets("Sheet").Sort
  .SetRange Range("A1:D" & replacementRow - 1)
  .Header = xlNo
  .MatchCase = False
  .Orientation = xlTopToBottom
  .SortMethod = xlPinYin
  .Apply
End With 
```

用于打开工作簿的语句

```
Workbooks.Open (Cells(1, 1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:32:21.740

我假设您有指向 Cell (1,1) 中工作簿的链接？如果是这样尝试：

```
Dim wb As Workbook
Set wb = Workbooks.Open(Cells(1, 1))

With wb.Worksheets("Sheet1").Sort
  .SetRange Range("A1:D" & replacementRow - 1)
  .Header = xlNo
  .MatchCase = False
  .Orientation = xlTopToBottom
  .SortMethod = xlPinYin
  .Apply
End With 
```

# php - 遍历文件中的字符串并将值转换为两个单独的数组

> ID：13329684
> 
> 赞同：1
> 
> 时间：2012-11-11T08:35:52.360
> 
> 标签：php

需要一种快速简便的方法将文件转换为字符串，然后我需要将文件转换为两个单独的数组，称为 $username 和 $password

文件格式：

```
user1:pass1
user2:pass2
user3:pass3 
```

等我需要阵列出来

```
$username[0] = "user1";
$password[0] = "pass1";

$username[1] = "user2";
$password[1] = "pass2"; 
```

ETC

我已经读过这样的文件：

```
$file = file_get_contents("accounts.txt"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:44:51.930

阅读[explode()](http://php.net/explode)。但是，请注意，当您的密码（或用户名）包含冒号时，这将不起作用。您可能还想[加密您的密码](http://php.net/md5)，并考虑[在加密密码时使用盐](http://www.experts-exchange.com/Internet/Web_Development/A_4355-Salting-Password-Hashes.html)。

```
<?php
$file = file_get_contents("accounts.txt");
$file = explode("\n",$file);
$username = array();
$password = array();
foreach ($file as $line) {
    $line = explode(':',trim($line)); // trim removes \r if accounts.txt is using a Windows file format (\r\n)
    $username[] = $line[0];
    $password[] = $line[1];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T08:45:08.933

你的意思是：

```
$content = file("config.txt");
$username = array();
$password = array();

foreach($content as $con) {
  list($user, $pass) = explode(":", $con);
  $username[] = $user;
  $password[] = $pass;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T08:49:07.490

你的数组应该看起来像这样

```
$file = file("log.txt");
$users = array();
foreach ( $file as $line ) {
    list($u, $p) = explode(':', $line);
    $users[] = array("user" => trim($u),"password" => trim($p));
}

var_dump($users); 
```

输出

```
array (size=3)
  0 => 
    array (size=2)
      'user' => string 'user1' (length=5)
      'password' => string 'pass1' (length=5)
  1 => 
    array (size=2)
      'user' => string 'user2' (length=5)
      'password' => string 'pass2' (length=5)
  2 => 
    array (size=2)
      'user' => string 'user3' (length=5)
      'password' => string 'pass3' (length=5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T08:48:24.360

```
<?php

$file = "abcde:fghijkl\nmnopq:rstuvwxyz\nABCDE:FGHIJKL\n";

$reg="/([A-Za-z]{5}):([A-Za-z]+\\n)/i";

preg_match_all($reg,$file,$res);

for($i=0;$i<count($res[0]);$i++){
    echo 'usename is '.$res[1][$i].'====='.'passwd is '. $res[2][$i]."<br />";
}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T08:51:54.050

或者您可以通过查找以下索引来找到拆分字符串`:`：

```
<?php
//what you would really do
//$file = file_get_contents("accounts.txt");
//just for example
$file = "abcde:fghijkl\nmnopq:rstuvwxyz\nABCDE:FGHIJKL";
$e = explode("\n", $file);
$username = array();
$password = array();
foreach($e as $line) {
    $username[] = substr($line, 0, strpos($line, ':'));
    $password[] = substr($line, strpos($line, ':') + 1);
}
foreach($username as $u) {
    echo $u."\n";
}
foreach($password as $p) {
    echo $p."\n";
}
?> 
```

输出

```
abcde
mnopq
ABCDE
fghijkl
rstuvwxyz
FGHIJKL 
```

# asp.net - ASP.net 菜单栏

> ID：13329690
> 
> 赞同：1
> 
> 时间：2012-11-11T08:36:30.160
> 
> 标签：asp.net, menubar

我在 Site master 中创建了一个常规菜单，其中包含链接和另一个扩展的 MenuBar：

```
<div id="menu">

        <div class="MenuBar">
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
            <asp:Menu ID="menuBar" runat="server" Orientation="Vertical" Width="100%">
                <DynamicHoverStyle CssClass="DynamicHover" />
                <DynamicMenuItemStyle CssClass="DynamicMenuItem" />
                <DynamicSelectedStyle CssClass="DynamicHover" />
                <StaticHoverStyle CssClass="staticHover" />
                <StaticMenuItemStyle CssClass="StaticMenuItem" ItemSpacing="1px" />
                <StaticSelectedStyle CssClass="staticHover" />
            </asp:Menu>
        </asp:ContentPlaceHolder>
    </div>

    <ul>
        <li class="current_page_item"><a href="#">ח</a></li>
        <li><a href="#">א</a></li>
        <li><a href="#">ה</a></li>
        <li><a href="#">ב</a></li>
        <li><a href="#">ב</a></li>
        <li class="last"><a href="#">חו</a></li>
    </ul>
</div> 
```

1.  为什么我打开默认页面时没有显示菜单栏？默认页面代码只是：

    ```
    <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %> 
    ```

2.  如何插入菜单栏与主菜单中的其他链接在同一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:48:39.240

MenuBar 应该在 asp:ContentPlaceHolder**之外：**

```
<div class="MenuBar">
<asp:Menu ID="menuBar" runat="server" Orientation="Vertical" Width="100%">
            <DynamicHoverStyle CssClass="DynamicHover" />
            <DynamicMenuItemStyle CssClass="DynamicMenuItem" />
            <DynamicSelectedStyle CssClass="DynamicHover" />
            <StaticHoverStyle CssClass="staticHover" />
            <StaticMenuItemStyle CssClass="StaticMenuItem" ItemSpacing="1px" />
            <StaticSelectedStyle CssClass="staticHover" />
        </asp:Menu>
</div>
<div id="menu">
 <ul>
    <li class="current_page_item"><a href="#">ח</a></li>
    <li><a href="#">א</a></li>
    <li><a href="#">ה</a></li>
    <li><a href="#">ב</a></li>
    <li><a href="#">ב</a></li>
    <li class="last"><a href="#">חו</a></li>
</ul>
</div>

    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

    </asp:ContentPlaceHolder> 
```

为了在同一行中同时显示 MenuBar 和 ul，它们都必须是样式：

```
display: inline; 
```

# javascript - AJAX 回调函数间歇性地添加 GET 参数失败

> ID：13329691
> 
> 赞同：0
> 
> 时间：2012-11-11T08:36:32.397
> 
> 标签：javascript, jquery, html, ajax, callback

我有一个`<ul>`，每个人`<li>`都有一个像`<li id='entry24'>`. 单击一个时，我需要通过向`/query/getEntry/id=24`.

使用此代码：

```
for(var entry = 0; entry < entryIds.length; entry++) {
    $("#entry" + entryIds[entry]).click(function() {
        $.get(
            "/query/getEntry",
            {id: entryIds[entry]},
            getEntryCallback,
            "html"
        )
    });
} 
```

我发现每个请求都发送相同的 id - 最后一个条目的 id。经过一番研究，我将代码修改为：

```
for(var entry = 0; entry < entryIds.length; entry++) {
    var entryId = entryIds[entry];
    $("#entry" + entryId).click(function(event) {
        $.get(
            "/query/getEntry",
            {id: event.target.id.replace("entry", "")},
            getEntryCallback,
            "html"
        )
    });
} 
```

哪个效果更好（每个都`<li>`发送正确的ID）。但是，查看 Firebug 控制台，我可以看到每次单击都会发出请求，但大约 75% 的时间它们显示`/query/getEntry/id=`为红色......这意味着 id 没有实际发送，我没有得到我期望的结果。

我可以确认每个`<li>`DOES 都有一个适当的`id`字段。

非常感谢任何帮助/建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:50:53.733

试试这个，

```
$('ul li').click(function(){
    entryid = $(this).attr('title');
    $.get(
        "/query/getEntry",
        {id: entryid.replace("entry", "")},
        getEntryCallback,
        "html"
    )
}); 
```

`<li>`对于您的 html，在您的所有 s的标题属性中定义条目 id`<ul>`

如果没有错，这应该可以工作，因为 AJAX 函数仅在单击时才被调用`<li>`，并且 title 属性对每个属性都是唯一的，因此每次都会`<li>`产生唯一的 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T09:12:16.327

这是最好的解决方案，请看这个：

```
$("li[id^='entry']").on("click",function() {
    var id = $(this).attr("id").substring(5);
    $.get(
        "/query/getEntry",
        {id: id},
        getEntryCallback,
        "html"
    );
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T08:51:44.647

我不确定你为什么会遇到这个问题`<li>`。但是，请尝试这样做：

```
for(var entry = 0; entry < entryIds.length; entry++) {
    var entryId = entryIds[entry];
    $("#entry" + entryId).click(function(event) {
        $.get(
            "/query/getEntry",
            {id: entryId},
            getEntryCallback,
            "html"
        )
    });
} 
```

这应该在`entryId`定义 onclick 处理程序时围绕变量形成一个闭包，以便为每个条目保留正确的 id。

# java - 打印失败行 PreparedStatement addBatch

> ID：13329713
> 
> 赞同：1
> 
> 时间：2012-11-11T08:41:53.507
> 
> 标签：java, sql, exception, jdbc, prepared-statement

我正在使用 PreparedStatement addBatch。

当行插入失败时，我应该如何处理这种情况？

例如，假设在要插入的1000 行中，第100 行插入失败，程序突然结束，没有插入剩余的行（即从第100 行到第1000 行）。

我想打印失败行，以便能够检查问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:16:45.027

`ExecuteBatch`该方法在错误处理和返回值方面没有标准行为，这取决于您使用的 DBMS 和 JDBC 驱动程序。例如，Oracle 驱动程序在`BatchUpdateException`一个数组中返回每个成功记录的元素。数组的索引与添加到语句中的批次的索引对齐，这意味着最大的数组索引表示最后成功插入的批处理记录。但这对于您的特定 DMBS/驱动程序组合可能无效，因此检查它的唯一方法是使用调试器，模拟错误，在异常捕获代码处设置断点并查看异常对象。

# iphone - 我的 iPhone 如何获得它的高度？

> ID：13329714
> 
> 赞同：7
> 
> 时间：2012-11-11T08:41:56.273
> 
> 标签：iphone, gps, altitude

我做了一个简单的应用程序，它根据 iPhone 上的 GPS 位置显示高度。

*   海拔是怎么得到的？

*   它是在我所在的坐标处获得土地的高度还是获得实际的高度？（我在同一栋楼里尝试了相同的应用程序；一次在底层，一次在三楼，但显示的高度相同）

*   是否可以在不同楼层获得不同的高度？（就像我的安卓手机有气压计传感器，我通过大气压计算海拔高度；但没有一部 iPhone 有气压计传感器）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T11:35:06.157

gps 接收器读取的高度取决于卫星在地平线上的相对位置。当天空中没有足够的卫星或它们靠得太近时，高度读数可能不可靠。这取决于一天中的时间或日期。

来自卫星的信号一旦到达地球表面就会非常微弱，并且在建筑物内或附近有其他高楼的地方（例如曼哈顿等市中心）可能无法正确接收。

气压计读数会因天气而异，因此不能将绝对读数应用于特定楼层。然而，相对读数对于楼层间的变化可能足够可靠，例如，较低的值意味着上升。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T09:10:48.647

与使用 GPS 计算高度的任何其他设备一样，它正在测量[用户与卫星轨道中心的距离](http://gpsinformation.net/main/altitude.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T09:13:51.343

您的智能手机使用 GPS 技术根据您所在的位置计算您的海拔高度。它测量您与计算此信息的卫星之间的距离。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-11T02:48:45.593

请注意，较新的 iPhone (>= 6) 有一个气压计传感器，根据我的经验，它比 GPS 准确得多。使用气压计，精度似乎在一英尺以内，而使用 GPS，即使静止不动，它也会反弹 3-4 米。

[http://www.iphonetricks.org/iphone-6-barometer-sensor-features/](http://www.iphonetricks.org/iphone-6-barometer-sensor-features/)

# delphi - 如何使用 Delphi7 和 HTTP 制作聊天网站

> ID：13329716
> 
> 赞同：0
> 
> 时间：2012-11-11T08:42:00.907
> 
> 标签：delphi, http, delphi-7

我想制作一个使用 Delphi 7 Web 服务器的小型 HTTP 聊天网站。我不知道如何解决这个问题。我在互联网上搜索了几个小时，但没有发现任何帮助。我已经设置了一个基本的 Delphi 7 Web 服务器。我想使用 Delphi 的原因是因为我最熟悉它并且我想使用 HTTP，因为这是我知道如何在浏览器中使用的唯一语言。我可以这样做吗？互联网上有没有关于如何做到这一点的教程？我想做一个聊天服务器，因为这似乎是一个挑战。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:31:18.023

尽管我很喜欢 Delphi，但我强烈建议为这项任务学习另一种语言。

PHP 很容易上手。你只需要记事本来输入一个文件：

```
<?php echo "hello" ?> 
```

你有一个显示 hello 的工作 Web 应用程序。使用delphi，它变得更加复杂。您要么需要提供自己的 Web 服务器，要么需要创建一个可插入浏览器的 .dll，而且您需要更多代码才能使事情变得简单。

PHP 还内置了良好的 mysql 支持，如果您要创建聊天页面，您可能需要它，因为它可以轻松地为您处理多用户问题。

我知道这并不能回答您关于如何使用 Delphi 执行此操作的问题，但请采纳此建议。

# jsf-2 - 无法覆盖验证错误消息

> ID：13329719
> 
> 赞同：2
> 
> 时间：2012-11-11T08:42:37.460
> 
> 标签：jsf-2, primefaces

我想覆盖primefaces的默认密码匹配错误消息，所以这就是我所做的：

在**src/main/resources**下：我创建了一个名为**messages.properties**的属性文件 ，并向其中添加了以下键/值：

```
primefaces.password.INVALID_MATCH = Passwords doesn't match
primefaces.password.INVALID_MATCH_detail = Passwords doesn't match 
```

在**faces-config**中，我添加了以下内容：

```
 <application>

   <locale-config>
  <default-locale>en</default-locale>
   </locale-config>
   <message-bundle>
        resources.messages
   </message-bundle> 
```

但它仍然打印默认消息，请告知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-03T16:17:41.217

为什么不只添加 validatorMessage ？

```
<p:password id="password1" required="true"   requiredMessage="Password required"
 match="password2" validatorMessage="Passwords doesnt match">
</p:password> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:12:19.413

请注意，primefaces 得到了

*Messages.properties*和 *Messages_en.properties*

尝试将其重命名为`Messages.properties`大写字母`M`（*最佳实践*）并尝试添加`Messages_en.properties`（因为 primefaces jar 中的那个可能会覆盖您的新 Messages.properties）

```
<message-bundle>
    resources.Messages
</message-bundle> 
```

（如果`main`是包名称的一部分，请尝试在 之前添加它`resources`）

# c# - 匹配客户在前端选择的搜索属性

> ID：13329721
> 
> 赞同：3
> 
> 时间：2012-11-11T08:42:47.473
> 
> 标签：c#, linq

我在一个类中有一个方法，它允许我根据一组客户指定的条件返回结果。该方法将客户在前端指定的内容与来自数据库的集合中的每个项目相匹配。在客户未指定任何属性的情况下，将属性的 ID 传递给等于 0 的方法（数据库在所有表上都有一个标识，该标识以 1 为种子并且是增量的）。在这种情况下，应该忽略该属性，例如，如果客户未指定位置，则 customerSearchCriteria.LocationID = 0 进入方法。然后匹配将匹配其他属性并返回与其他属性匹配的所有位置，示例如下：

```
public IEnumerable<Pet> FindPetsMatchingCustomerCriteria(CustomerPetSearchCriteria customerSearchCriteria)
{   
    if(customerSearchCriteria.LocationID == 0)
    {         
         return repository.GetAllPetsLinkedCriteria()
                     .Where(x => x.TypeID == customerSearchCriteria.TypeID &&
                                 x.FeedingMethodID == customerSearchCriteria.FeedingMethodID &&
                                 x.FlyAblityID == customerSearchCriteria.FlyAblityID )
                     .Select(y => y.Pet);
    }
} 
```

**指定所有条件时的代码如下所示：**

```
private PetsRepository repository = new PetsRepository();

public IEnumerable<Pet> FindPetsMatchingCustomerCriteria(CustomerPetSearchCriteria customerSearchCriteria)
{            
    return repository.GetAllPetsLinkedCriteria()
                     .Where(x => x.TypeID == customerSearchCriteria.TypeID &&
                                 x.FeedingMethodID == customerSearchCriteria.FeedingMethodID &&
                                 x.FlyAblityID == customerSearchCriteria.FlyAblityID &&
                                 x.LocationID == customerSearchCriteria.LocationID )
                     .Select(y => y.Pet);
} 
```

每次客户没有明确选择他们正在寻找的结果的属性时，我想避免使用一整套**if 和 else 语句来满足需求。**我可以实现这一目标的最简洁和有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:12:13.110

未选择的标准始终为零，对吗？那么如何获取字段等于条件或条件为零的行。

这应该工作

```
private PetsRepository repository = new PetsRepository();

public IEnumerable<Pet> FindPetsMatchingCustomerCriteria(CustomerPetSearchCriteria customerSearchCriteria)
{
    return repository.GetAllPetsLinkedCriteria()
                     .Where(x => (customerSearchCriteria.TypeID == 0 || x.TypeID == customerSearchCriteria.TypeID)&&
                                 (customerSearchCriteria.FeedingMethodID == 0 || x.FeedingMethodID == customerSearchCriteria.FeedingMethodID) &&
                                 (customerSearchCriteria.FlyAblityID == 0 || x.FlyAblityID == customerSearchCriteria.FlyAblityID) &&
                                 (customerSearchCriteria.LocationID == 0 || x.LocationID == customerSearchCriteria.LocationID))
                     .Select(y => y.Pet);
} 
```

或者，如果这是您发现自己经常做的事情，您可以编写一个替代`Where`扩展方法，该方法要么应用条件，要么在为零时通过，并将调用链接起来，而不是让一个条件与条件相加。然后，您只需在每个查询中对条件 == 0 进行一次比较，而不是对每个不匹配的行进行比较。我不确定这是否值得 -*可能的*- 边际性能提升，如果您想要性能提升，最好在数据库中应用过滤器。
无论如何，为了教化的目的，它就在这里。. .

```
static class Extns
{
    public static IEnumerable<T> WhereZeroOr<T>(this IEnumerable<T> items, Func<T, int> idAccessor, int id)
    {
        if (id == 0)
            return items;
        else
            return items.Where(x => idAccessor(x) == id);
    }
}

private PetsRepository repository = new PetsRepository();

public IEnumerable<Pet> FindPetsMatchingCustomerCriteria(CustomerPetSearchCriteria customerSearchCriteria)
{
    return repository.GetAllPetsLinkedCriteria()
        .WhereZeroOr(x => x.TypeID, customerSearchCriteria.TypeID)
        .WhereZeroOr(x => x.FeedingMethodID, customerSearchCriteria.FeedingMethodID)
        .WhereZeroOr(x => x.FlyAblityID, customerSearchCriteria.FlyAblityID)
        .WhereZeroOr(x => x.LocationID, customerSearchCriteria.LocationID);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T09:21:56.550

看起来您正在使用存储过程，并且您首先获取所有记录，然后进行过滤。我建议您在存储过程级别进行过滤，让数据库完成繁重的工作，并且您需要在后面进行的任何微过滤都会更容易。在您的存储过程中，让您的参数默认为 NULL 并使您的属性可以为标准对象为空，这样您就可以传入值并且存储过程将（应该）被更正以使用这些空值，即

```
 private PetsRepository repository = new PetsRepository();

    public IEnumerable<Pet> FindPetsMatchingCustomerCriteria(CustomerPetSearchCriteria customerSearchCriteria)
    {
        return repository.GetAllPetsLinkedCriteria(customerSearchCriteria.TypeID,customerSearchCriteria.FeedingMethodID,customerSearchCriteria.FlyAblityID,customerSearchCriteria.LocationID).ToList();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T10:13:05.840

我没有看到一个优雅的解决方案。可能是这样的：

```
IEnumerable<Pet> FindPetsMatchingCustomerCriteria(CustomerPetSearchCriteria customerSearchCriteria)
{
    return repository.GetAllPetsLinkedCriteria()
                     .Where(x => 
                      Check(x.TypeID, customerSearchCriteria.TypeID) &&
                      Check(x.FeedingMethodID, customerSearchCriteria.FeedingMethodID) &&
                      Check(x.FlyAblityID, customerSearchCriteria.FlyAblityID) &&
                      Check(x.LocationID, customerSearchCriteria.LocationID))
                     .Select(x => x.Pet);
}

static bool Check(int petProperty, int searchCriteriaProperty)
{
    return searchCriteriaProperty == 0 || petProperty == searchCriteriaProperty;
} 
```

# c# - 从 XML 文件中选择前 n 个

> ID：13329723
> 
> 赞同：2
> 
> 时间：2012-11-11T08:43:12.060
> 
> 标签：c#, xml, linq

如何使用 C# 从以下其中 ContractID 为 2 的 xml 文件中选择最后 1 个状态？

```
<actions>
     <Action>
    <ID>2</ID>
    <ContractID>1</ContractID>
    <EmployeeID>1</EmployeeID>
    <Date>2012-09-04 00:00:00.000</Date>
    <Reply/>
    <Status>4002</Status>
</Action>
    <Action>
    <ID>2</ID>
    <ContractID>2</ContractID>
    <EmployeeID>1</EmployeeID>
    <Date>2012-09-04 00:00:00.000</Date>
    <Reply/>
    <Status>4005</Status>
</Action>
    <Action>
    <ID>2</ID>
    <ContractID>2</ContractID>
    <EmployeeID>1</EmployeeID>
    <Date>2012-09-04 00:00:00.000</Date>
    <Reply/>
    <Status>4008</Status>
</Action>
</actions> 
```

以及如何使用 linq to xml 或任何其他方式选择 top n

* * *

什么是相当于以下 sql 查询的 linq to xml 代码：

```
Select contracts.ID, contracts.ContractNo, 
    (select FieldName from tbl_SysType where ID =
    (select top 1 status from tbl_EmployeesActions where ContractID=contracts.ID and Status is not null order by ID desc ))as ContractStatus
from tbl_Contracts as contracts 
```

如果存在名为 Contracts.xml、SysType.xml 和 EmployeesActions.xml 的 xml 文件，如下 Contracts.xml

```
<Contracts>
     <Contract>
    <ID>1</ID>
    <ContractNo>Mob124444</ContractNo>      
</Contract>
    <Contract>
    <ID>2</ID>
    <ContractNo>Mob124445</ContractNo>      
</Contract>
</Contracts> 
```

雇员行动.xml

```
 <actions>
     <Action>
    <ID>2</ID>
    <ContractID>1</ContractID>
    <EmployeeID>1</EmployeeID>
    <Date>2012-09-04 00:00:00.000</Date>
    <Reply/>
    <Status>4002</Status>
</Action>
    <Action>
    <ID>2</ID>
    <ContractID>2</ContractID>
    <EmployeeID>1</EmployeeID>
    <Date>2012-09-04 00:00:00.000</Date>
    <Reply/>
    <Status>4005</Status>
</Action>
    <Action>
    <ID>2</ID>
    <ContractID>2</ContractID>
    <EmployeeID>1</EmployeeID>
    <Date>2012-09-04 00:00:00.000</Date>
    <Reply/>
    <Status>4008</Status>
</Action>
</actions> 
```

系统类型.xml

```
<SysTypes>
    <systype>
        <ID>4002</ID>
        <FieldName>New</FieldName>
    </systype>
<systype>
        <ID>4005</ID>
        <FieldName>Opened</FieldName>
    </systype>
<systype>
        <ID>4008</ID>
        <FieldName>Closed</FieldName>
    </systype>
</SysTypes> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T08:55:21.833

以下是您的两个要求的代码片段：

```
XDocument doc = XDocument.Load(@"XMLFile.xml");

var statuses = doc.Descendants("Action")
                  .Where(s => s.Element("ContractID").Value.Equals("2"))
                  .Select(s => s.Element("Status").Value); 
```

**选择 ContractID 为 2 的最后状态**

```
var lastStatus = statuses.Last(); 
```

**选择 ContractID 为 2 的前 N ​​个状态**

```
int N = 2; // assuming TOP 2
var topNStatuses = statuses.Take(N); 
```

对于您的新要求，您可以使用此代码片段来替代您的 SQL 查询：

```
XDocument employees = XDocument.Load(@"EmployeesActions.xml");
XDocument contracts = XDocument.Load(@"Contracts.xml");
XDocument sysTypes = XDocument.Load(@"Systype.xml");

var result = employees.Descendants("Action")
            .Join(sysTypes.Descendants("systype"),
                e => e.Element("Status") != null ? e.Element("Status").Value : "",
                s => s.Element("ID").Value,
                (e, s) => new
                {
                    ID = e.Element("ID").Value,
                    ContractID = e.Element("ContractID").Value,
                    Status = s.Element("FieldName").Value
                })
            .Where(x => !String.IsNullOrEmpty(x.Status))
            .OrderByDescending(x => x.ID)
            .Take(1)
            .Join(contracts.Descendants("Contract"),
                e => e.ContractID,
                c => c.Element("ID").Value,
                (e, c) => new
                {
                    ContractID = c.Element("ID").Value,
                    ContractNo = c.Element("ContractNo").Value,
                    Status = e.Status
                }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T08:58:47.617

```
var result = XElement.Load("data.xml").
                      Descendants("Action").
                      Where(x => x.Element("ContractID").Value == "2")
                      .Select(y => new
                       {
                            id = y.Element("ID").Value,
                            empId = y.Element("EmployeeID").Value,
                            contractId = y.Element("ContractID").Value,
                            date = y.Element("Date").Value
                       }); 
```

挑选前 N(1)

```
var top = result.Take(1); 
```

选择最后的 N(1)

```
var last = result.Skip(result.Count()-1); 
```

# c - 从内核读取 seq_file

> ID：13329724
> 
> 赞同：1
> 
> 时间：2012-11-11T08:43:13.723
> 
> 标签：c, linux-kernel

您能否发布一些示例如何从*/proc*文件中读取含义列表？

```
list_head* get_from_proc_file()
{
   struct file* file = fopen("example","r");
   seq_open(file, &seq_ops);
   struct seq_file *p = file->private_data;
   READ LIST OF DATA?????
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:19:51.663

你不能使用`fopen`，因为这是一个 libc 函数。下面的示例显示了如何从内核读取文件。

[http://www.wasm.ru/forum/viewtopic.php?pid=467952#p467952](http://www.wasm.ru/forum/viewtopic.php?pid=467952#p467952)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:18:51.843

可能您不需要在内核中读取 /proc 文件，因为内核使用 /proc 接口将某些信息导出到用户空间，这些信息肯定已经存在于内核中，无论是在某些结构列表中还是在其他全局列表中容器。所以正确的方法可能只是通过调用一些内核 API 或直接使用它们来获取全局列表/容器，如果它们被导出的话。

# reporting-services - SSRS 2012 未在 PDF 中呈现图表（GDI+ 中出现一般错误）

> ID：13329739
> 
> 赞同：1
> 
> 时间：2012-11-11T08:45:43.600
> 
> 标签：reporting-services, ssrs-2012, reporting-services-2012

我有一个以 PDF 格式呈现报告的数据驱动订阅。使用 SSRS 2012、Win 2008 R2（在 Hyper-V 上）。

我查看了`ExecutionLog3`，共享数据集都成功刷新，报告成功呈现并输出到正确的文件夹。

我确实在某处读到，在 IE 中呈现报告时，用户需要对该`Temporary Internet Files`文件夹的权限，但是我不知道这对数据驱动的订阅是否有效？我确实添加了执行帐户（本地用户）以对 ReportServer 临时 Internet 文件夹具有读/写权限。

除此之外，我不知道要寻找什么来解决此问题？任何建议都将受到欢迎。

**编辑 - 2012-11-19**

在 ReportServer 日志中发现以下未处理的异常错误：

```
ERROR: Throwing Microsoft.ReportingServices.ReportProcessing.RenderingObjectModelException: , Microsoft.ReportingServices.ReportProcessing.RenderingObjectModelException: A generic error occurred in GDI+. ---> System.Runtime.InteropServices.ExternalException: A generic error occurred in GDI+.
   at System.Drawing.Image.Save(Stream stream, ImageCodecInfo encoder, EncoderParameters encoderParams)
   at Microsoft.Reporting.Chart.WebForms.Chart.Save(Stream imageStream, ChartImageFormat format)
   at Microsoft.ReportingServices.OnDemandReportRendering.ChartMapper.GetImage(ImageType imageType)
   --- End of inner exception stack trace ---; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:14:16.460

事实证明，GDI+ 驱动程序需要在 Windows 2008 R2 Server 上更新，这是一个已知问题。如果您想知道您拥有的 GDI+ 版本，请搜索`gdiplus.dll`.

我在[这里](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/50c071db-b4fc-4a2e-a9f4-e10e833c97d2)发布了同样的问题并得到回复说通过修补程序更新驱动程序，可以[在此链接](http://support.microsoft.com/kb/2495074?wa=wsignin1.0)中找到，它提供了`gdiplus.dll`将与修补程序一起安装的版本，因此您可以比较是否有版本更改是必要的。

您需要请求修补程序，系统会向您发送一封电子邮件，提供下载位置。

`This also solved the issue of images not rendering as well as charts`

# python - 如何在 Tkinter 上排列按钮

> ID：13329740
> 
> 赞同：4
> 
> 时间：2012-11-11T08:46:05.063
> 
> 标签：python, tkinter

我正在使用行来布局我的 Tkinter 程序。我通常使用包，所以我的按钮会自动放置而不是重叠，使用行，我的按钮是重叠的，我必须通过更改它们的 padx 值来对齐它们。我想知道是否有更简单的方法可以做到这一点。

```
from sys import argv
from Tkinter import *
from PIL import Image, ImageTk, ImageFilter
import random

script, infile = argv

class MyApp(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("ImagePro")

        # Original
        original = Image.open(infile)
        (w, h) = (original.size[0], original.size[1])
        tkpi = ImageTk.PhotoImage(original)
        label = Label(self.root, image=tkpi)
        label.grid(row =0, column=0, padx=5,pady=5)

        img = original.copy().convert("L")
        tkpi2 = ImageTk.PhotoImage(img)
        label = Label(self.root, image=tkpi2)
        label.grid(row =0, column=1, padx=5,pady=5)

        Label(self.root, text = "Original").grid(row=1, column=0)
        Label(self.root, text = "Modified").grid(row=1, column=1)
        Button(self.root, text = "Brighten").grid(row=2, column=0, sticky=W)
        Button(self.root, text = "Darken").grid(row=2, column=0, sticky=W, padx=60)
        Button(self.root, text = "Warm").grid(row=2, column=0, sticky=W, padx=112)
        Button(self.root, text = "Cool").grid(row=2, column=0, sticky=W, padx=158)

        self.root.mainloop()

MyApp() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T09:12:29.383

为此，您需要开始使用框架。框架充当小部件的容器。将所有按钮添加到一个框架中，然后将该框架添加到根容器中。

```
class MyApp(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("ImagePro")

        #Original
        original = Image.open(infile)
        (w, h) = (original.size[0], original.size[1])
        tkpi = ImageTk.PhotoImage(original)
        label = Label(self.root, image=tkpi)
        label.grid(row =0, column=0, padx=5,pady=5)

        img = original.copy().convert("L")
        tkpi2 = ImageTk.PhotoImage(img)
        label = Label(self.root, image=tkpi2)
        label.grid(row =0, column=1, padx=5,pady=5)

        Label(self.root, text = "Original").grid(row=1, column=0)
        Label(self.root, text = "Modified").grid(row=1, column=1)

        self.buttonframe = Frame(self.root)
        self.buttonframe.grid(row=2, column=0, columnspan=2)        
        Button(self.buttonframe, text = "Brighten").grid(row=0, column=0)
        Button(self.buttonframe, text = "Darken").grid(row=0, column=1)
        Button(self.buttonframe, text = "Warm").grid(row=0, column=2)
        Button(self.buttonframe, text = "Cool").grid(row=0, column=3)

        self.root.mainloop() 
```

每个按钮都在框架内的自己的列中，框架位于主容器的底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:59:52.477

如果您`row,column`对多个小部件使用相同的一对，它们将出现在网格的同一个单元格中。因此，这样的事情应该可以解决问题。

```
Button(self.root, text = "Brighten").grid(row=2, column=0)
Button(self.root, text = "Darken").grid(row=2, column=1)
Button(self.root, text = "Warm").grid(row=2, column=2)
Button(self.root, text = "Cool").grid(row=2, column=3) 
```

`grid`您将找到有关几何管理器[http://effbot.org/tkinterbook/grid.htm](http://effbot.org/tkinterbook/grid.htm)文档的详细信息

# android - 尝试访问从资产复制的数据库中的 DatabaseHelper 到 data\data\ 时出现空指针异常

> ID：13329754
> 
> 赞同：1
> 
> 时间：2012-11-11T08:49:10.343
> 
> 标签：android, mysql

我有一个数据库助手类（下面的代码）。这个助手的类任务是将应用程序附带的资产文件夹中的数据库复制到我的应用程序的 data\data... 中，以便我可以使用它。

一旦我将数据库放入 data\data （我能够）.. 我想添加它并执行 CRUD 操作，并且该数据库将保留在应用程序中，直到用户删除该应用程序。

但是，一旦复制完成并且我在 data\data 中有数据库.. 我尝试在不同的活动中创建 DatabaseHelper 的实例（我想从中添加数据的那个）.. 当我这样做时， ，当代码到达 DatabaseHelper dbh = new DatabaseHelper(this); 时，我得到一个空指针异常错误 我知道这可能的原因可能是错误的上下文或空数据库......但在我的情况下似乎一切都好。

下面是代码。

```
DatabaseHelper.java

public class DatabaseHelper extends SQLiteOpenHelper
{   
    String DB_PATH = null;
// assign the database givens, such as name and context.
private static String DB_NAME = "offline";
private SQLiteDatabase myDataBase;
private final Context myContext;

static int count = 0;

/**
 * Constructor Takes and keeps a reference of the passed context in order to
 * access to the application assets and resources.
 * 
 * @param context
 */
public DatabaseHelper(Context context)
{
    super(context, DB_NAME, null, 1);
    this.myContext = context;
    DB_PATH = "/data/data/" + context.getPackageName() + "/" + "databases/";
}

// ///////////////////////////////////////////////////////////////////////////////////////

public void createDataBase() throws IOException
{
    boolean dbExist = checkDataBase();

    if (dbExist)
    {
        // do nothing - database already exist
    } else
    {
        this.getWritableDatabase();

        try
        {
            copyDataBase();

        } catch (IOException e)
        {
            throw new Error("Error copying database");
        }
    }
}

// ///////////////////////////////////////////////////////////////////////////////////////

private boolean checkDataBase()
{
    SQLiteDatabase checkDB = null;
    try
    {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,SQLiteDatabase.OPEN_READWRITE);
    } catch (SQLiteException e)
    {
        // database does't exist yet.
    }
    if (checkDB != null)
    {
        checkDB.close();
    }
    return checkDB != null ? true : false;
}

// ///////////////////////////////////////////////////////////////////////////////////////

private void copyDataBase() throws IOException
{
    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0)
    {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

// ///////////////////////////////////////////////////////////////////////////////////////

public void openDataBase() throws SQLException
{

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,SQLiteDatabase.OPEN_READWRITE);
}

// ///////////////////////////////////////////////////////////////////////////////////////

@Override
public synchronized void close()
{
    if (myDataBase != null)
        myDataBase.close();

    super.close();
}

// return cursor
public Cursor query(String table, String[] columns, String selection,
        String[] selectionArgs, String groupBy, String having,
        String orderBy)
{
    return myDataBase.query("myTable", null, null, null, null, null, null);

}

// //////////////////////////////////////////////////////////////////////////////////

@Override
public void onCreate(SQLiteDatabase db)
{

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{

}

// //////////////////////////////////////////////////////////////////////////////////
public long insertPuzzle(String q,String a,String c1,String c2,String c3,String c4)
{               
            ContentValues initialValues = new ContentValues();
                initialValues.put("q", q);
                initialValues.put("a",a);
                initialValues.put("c1",c1);
                initialValues.put("c2",c2);
                initialValues.put("c3",c3);
                initialValues.put("c4",c4);
                return myDataBase.insert("myTable", null, initialValues);

} 
```

每当我在我的活动中

```
DatabaseHelper db1 = new DatabaseHelper(this);
db1.openDatabase();
db1.insertPuzzle("q","a","1","2","3","4"); 
```

我得到空指针错误。

希望你能有所帮助，问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:58:06.260

将此文件放入您的包中

```
public class DBAdapter extends SQLiteOpenHelper {

private static String DB_PATH = "";
private static final String DB_NAME = "temp.sqlite";//your database name with extention any
private SQLiteDatabase myDataBase;
private final Context myContext;

private static DBAdapter mDBConnection;

/**
 * Constructor
 * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
 * @param context
 */
private DBAdapter(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext = context;
    DB_PATH = "/data/data/"
            + context.getApplicationContext().getPackageName()
            + "/databases/";
    // The Android's default system path of your application database is
    // "/data/data/mypackagename/databases/"
}

/**
 * getting Instance
 * @param context
 * @return DBAdapter
 */
public static synchronized DBAdapter getDBAdapterInstance(Context context) {
    if (mDBConnection == null) {
        mDBConnection = new DBAdapter(context);
    }
    return mDBConnection;
}

/**
 * Creates an empty database on the system and rewrites it with your own database.
 **/
public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    } else {
        // By calling following method
        // 1) an empty database will be created into the default system path of your application
        // 2) than we overwrite that database with our database.
        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {
        // database does't exist yet.
    }
    if (checkDB != null) {
        checkDB.close();
    }
    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {
        // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);
        // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;
        // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
        // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
        // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

/**
 * Open the database
 * @throws SQLException
 */
public SQLiteDatabase openDataBase() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);       
    return myDataBase;
}

/**
 * Close the database if exist
 */
@Override
public synchronized void close() {
    if (myDataBase != null)
        myDataBase.close();
    super.close();
}

/**
 * Call on creating data base for example for creating tables at run time
 */
@Override
public void onCreate(SQLiteDatabase db) {
}

/**
 * can used for drop tables then call onCreate(db) function to create tables again - upgrade
 */
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
}
} 
```

活动 onCreate 方法

```
private DBAdapter dba;
     @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile);
              dba = DBAdapter.getDBAdapterInstance(this);
    try {
        dba.createDataBase();
    } catch (IOException e) {
        Log.e("log_tag", e.getLocalizedMessage());
    }
} 
```

并用于插入代码

```
 SQLiteDatabase sqldb = dba.openDataBase();
    ContentValues cv = new ContentValues();
    cv.put("field", fieldvalue);
    sqldb.insert(table, nullColumnHack, cv);
    sqldb.close();
    dba.close();
    cv = null; 
```

# iphone - 具有本地 HTML 文件的 iPhone 应用程序不支持链接

> ID：13329759
> 
> 赞同：1
> 
> 时间：2012-11-11T08:50:11.107
> 
> 标签：iphone, html, web-applications, local

我想用本地 HTML 文件创建简单的 iPhone 应用程序。

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"];
NSData *htmlData = [NSData dataWithContentsOfFile:htmlFile];
[waWebView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:[NSURL URLWithString:@""]]; 
```

我制作了一个 webView 并使其在与 .m 文件相同的目录中显示 index.html 文件。
然后制作另一个 HTML 文件；index2.html，在同一目录中
我想通过 index.html 中的链接查看 index2.html

所以，在 index.html 中，我把

```
<a href="index2.html">View html 2</a> 
```

index.html 已成功显示，但**上面的链接不起作用**。
**我还需要什么？帮我T.T**

除了这个问题，这个应用程序**也不支持javascript**代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:06:45.230

链接是相对的。您需要将 webView 的 baseURL 设置为包含索引 html 文件的路径

```
NSString *file = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"];
NSURL *base = [NSURL fileURLWithPath:file.stringByRemovingLastPathComponent];
[webview loadHTMLString:text baseURL:base]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:01:19.097

它是通过使用它的 fileURLWithPath 创建一个 NSURL 然后是一个 NSURLRequest 并加载它而不是加载 html 本身来完成的：

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"];
NSURL *url = [NSURL fileURLWithPath:htmlFile];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[waWebView loadRequest:request]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T09:26:45.483

您可能需要向其中添加 javascript 才能使其正常工作。如果你想制作一个简单的 iPhone 应用程序，只需使用 app mobi(http://www.appmobi.com/)，它们让你将 css html 和 js 文件放入构建器中，它为你创造了奇迹。试试看。

希望我有所帮助

LucaSpeedStack

# python - 没有名为 ServerSocket 的模块

> ID：13329761
> 
> 赞同：38
> 
> 时间：2012-11-11T08:50:28.943
> 
> 标签：python

我正在尝试遵循示例 20.17.4.1。[来自Python Docs](http://docs.python.org/2/library/socketserver.html)的SocketServer.TCPServer 。但我收到一个错误：

```
ImportError: No module named 'ServerSocket' 
```

我正在使用新版本的 Python 并使用 IDLE 来编辑和执行脚本。需要帮助来摆脱这个错误。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-11T09:28:47.643

正确的名称`SocketServer`在 Python2 和`socketserver`Python3 中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-11T09:25:42.793

如果您使用的是 python 3，它可以作为 socketserver 使用（全部小写）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-19T23:59:30.227

我遇到了同样的问题，通过再次卸载并安装 Flask 和 Werkzeug 解决了这个问题

1) pip 卸载 Flask 2) pip 卸载 Werkzeug

3) pip install Flask 4) pip install Werkzeug

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-17T09:23:56.900

在我的代码中它已经尝试导入 SocketServer 和 socketserver 但都不起作用。

```
try:
    import SocketServer as socketserver
    from BaseHTTPServer import HTTPServer, BaseHTTPRequestHandler
except ImportError:
    import socketserver
    from http.server import HTTPServer, BaseHTTPRequestHandler 
```

但是，在我可以使用此命令之后，它对我有用

```
$pip install Werkzeug --upgrade 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-22T12:32:48.953

> 1.  pip 卸载 Flask 2) pip 卸载 Werkzeug
>     
>     
> 2.  pip install Flask 4) pip install Werkzeug

没有为我工作。我最终每次都重新安装 odoo 13。虽然我注意到只有当我在 pycharm 中添加 odoo/addons 作为源映射时才会发生这种情况。

编辑：我终于找到了问题！如果您使用 pycharm 并且在内容根目录中添加了 odoo/addons，请尝试将其从内容根目录中删除并重新运行服务器。希望它可以帮助某人

# mysql - 如何让mysql在做子字符串之前检查姓氏中是否有空格或-

> ID：13329766
> 
> 赞同：-1
> 
> 时间：2012-11-11T08:51:08.210
> 
> 标签：mysql, sql

我正在登录一个学校网站，我有一个名字列表，名字+姓氏。现在我有这个代码：

```
UPDATE tblusers t1
INNER JOIN
(
   SELECT 
     UserId,
     CONCAT(SUBSTRING(Surname, 1 ,4), SUBSTRING(Firstname,1,4)) Login
   FROM tblusers
) t2 ON t1.UserId = t2.UserId
SET t1.login = t2.login 
```

例如：**Johny bravo**的登录名是**bravjohn**。但是当有人被称为“ **Van Mullem Arnault** ”时，这变成**了 Van Arna** 我如何摆脱那个空间？或特殊名称的“-”号。所以我实际上想要“ **Van Mullem Arnault** ”--> **VanMArna**

我一直在网上和这里寻找，但并没有真正找到有趣的东西。谢谢你调查它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:53:46.673

你可以应用`TRIM`功能

```
....CONCAT(TRIM(SUBSTRING(Surname, 1 ,4)), TRIM(SUBSTRING(Firstname,1,4))).... 
```

或者字符串在字符串的*内部*，使用`REPLACE`

```
....CONCAT(REPLACE(TRIM(SUBSTRING(Surname, 1 ,4)), ' ',''), 
           REPLACE(TRIM(SUBSTRING(Firstname,1,4)), ' ', '')).... 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/973dc/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T08:57:29.250

使用[MySQL 替换](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)

```
UPDATE tblusers t1
INNER JOIN
(
   SELECT 
     UserId,
     CONCAT(REPLACE(Surname, ' ' ,''), REPLACE(Firstname, ' ','')) Login
   FROM tblusers
) t2 ON t1.UserId = t2.UserId
SET t1.login = t2.login 
```

# c# - Db 字段类型和 C# 字段类型？

> ID：13329773
> 
> 赞同：1
> 
> 时间：2012-11-11T08:52:14.350
> 
> 标签：c#, .net, orm, types, ado.net

假设我在 SQL 中有一个 SP：

```
CREATE PROCEDURE mySP
    @LastName nvarchar(10), 
    @FirstName nvarchar(20) 
AS 
  ...
GO 
```

在 c# 中没有指定长度的字符串类型。它的最大长度是`2^32-1 ( IMHO)`

那么， C# 开发人员有什么样的*保护措施：***不**发送超过长度的字符串？

*（我不认为任何 ORM 也有这个限制 - 也许我错了）。*

唯一的方法（我看到）是在之前（！）读取 Sp 参数并保存在缓存中，然后构建某种负责此的代理。

但是 - 我担心它只会在运行时失败。

我对吗 ？

有什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T08:55:22.627

C# 没有长度限制的字符串，必须在运行时进行检查。不过，这取决于您使用的 ORM。EntityFramework 有一个`MaxLength`可以用来装饰字符串的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:21:56.147

使用`if`条件检查您的字符串长度，如果超过要求的长度，请不要调用该程序。

# php - PHP如何从字符串中获取单词并将它们存储在一个简单的数组中

> ID：13329774
> 
> 赞同：0
> 
> 时间：2012-11-11T08:52:39.933
> 
> 标签：php, regex, arrays

请给我这个字符串：

```
$s = "Cannes (06150-06400), Limoges (87000-87100-87280), 06000, Paris"; 
```

我只想将**单词**存储在数组中，所以我尝试了这个：

```
$villes = explode(',', preg_replace('#\(([0-9\-]*)\)#', '', $s)); 
```

但结果我得到了这个数组：

```
array(4) {
          [0]=>
             string(7) "Cannes "
          [1]=>
             string(9) " Limoges "
          [2]=>
             string(7) "  06000" // This shouldn't be displayed in the array
          [3]=>
             string(6) " Paris"
         } 
```

请我如何修改正则表达式以使其按我的意愿工作。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:00:12.780

尝试：

```
<?php
$s = "Cannes (06150-06400), Limoges (87000-87100-87280), 06000, Paris";
preg_match_all("/[a-zA-Z]+/", $s, $villes);
var_dump($villes[0]);
?> 
```

对于单个单词名称。变量转储：

```
array(3) {
  [0]=>
  string(6) "Cannes"
  [1]=>
  string(7) "Limoges"
  [2]=>
  string(5) "Paris"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:11:33.223

尝试

```
$arr = preg_split('/\s*\(?[\d\-\s]*\)?\s*,\s*/', $s, -1, PREG_SPLIT_NO_EMPTY);
var_dump($arr); 
```

输出

```
array(3) {
  [0] =>
  string(6) "Cannes"
  [1] =>
  string(7) "Limoges"
  [2] =>
  string(5) "Paris"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T08:58:26.937

```
preg_match( '/[a-zA-Z\-\']+/', $s, $words );
var_dump( $words[0] ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T09:03:24.423

您可以使用数组作为结果。

```
$arr=explode(' ' , $s);
print_r($arr); 
```

# java - java中的系统类加载器有什么用？

> ID：13329779
> 
> 赞同：1
> 
> 时间：2012-11-11T08:54:35.080
> 
> 标签：java, classloader

我希望系统类加载器接管我的应用程序的类加载。所以，如果我运行我的程序，

```
java -Djava.system.class.loader=MyClassLoader Main 
```

我希望 Main 由 MyClassLoader 加载，以便我可以控制应用程序中的类加载。但这不会发生。Main 仍由默认系统类加载器 (sun.misc.Launcher$AppClassLoader) 加载，Main 引用的其他类也是如此。但是，对 getSystemClassLoader() 的调用会返回 MyClassLoader 的一个实例。

这有什么用？由我的自定义系统类加载器加载 Main 是否有意义？如何控制我的应用程序的类加载？谁使用 getSystemClassLoader() 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:42:36.427

如果您只是`URLClassLoader`在没有覆盖的情况下进行子类化，那么[这是您应该期望的记录在案的行为](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLClassLoader.html#URLClassLoader%28java.net.URL%5b%5d%29)：

> 在第一次在父类加载器中搜索之后，将按照为类和资源指定的顺序搜索 URL。

如果父类加载器可以加载该类，那么它会这样做，并且为该类报告的加载器将是父类加载器。为了恢复这个作为 Java 类加载器默认的*父优先*类加载策略，您必须覆盖`loadClass`.

# windows - “Windows [版本]：此值不可用”是什么意思。MSDN 中的声明？

> ID：13329781
> 
> 赞同：1
> 
> 时间：2012-11-11T08:54:43.123
> 
> 标签：windows, winapi

在阅读 MSDN 文档时获取枚举的[WinLocalLogonSid](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379650%28v=vs.85%29.aspx#WinLocalLogonSid)值`WELL_KNOWN_SID_TYPE`，即：

> **WinLocalLogonSid**
> 
> 指示与本地登录组匹配的 SID。
> 
> > ***Windows Server 2008 R2、Windows 7、Windows Server 2008、Windows Vista、Windows Server 2003 和 Windows XP：  **此值不可用。*

系统需求说明中*的含义*存在不确定性。它可以是以下含义之一：

1.  `WinLocalLogonSid`开始存在于 Windows 8 中。
2.  如果文档尚未更新到 Windows 8，也可能意味着`WinLocalLogonSid`仅存在于 Windows XP 之前的 Windows 版本中。

不幸的是，这些枚举值没有记录在标头源代码中。

`WinNT.h`我从 Windows 7 SDK进行了检查，令人惊讶的`WinLocalLogonSid`是，那里可用。我对这个事实没有明确的结论，因为有可能声明*了标识符但尚未实现*。

那么，有经验的人可以告诉我MSDN中这样的系统需求声明是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:24:43.637

请注意，它在底部说：

> 支持的最低客户端：Windows XP
> 
> 支持的最低服务器：Windows Server 2003

所以是的，它只是 Windows 8。

# r - 非常简单的方差分析模型 - 将变量与因子与不同的向量进行比较

> ID：13329783
> 
> 赞同：0
> 
> 时间：2012-11-11T08:55:17.293
> 
> 标签：r, anova

我认为我的问题最好用一点代码来理解：

```
#Load data
b <- structure(list(s1 = c(18.5, 24, 17.2, 19.9, 18), s2 = c(26.3, 
     25.3, 24, 21.2, 24.5), s3 = c(20.6, 25.2, 20.8, 24.7, 22.9), 
     s4 = c(25.5, 19.9, 22.6, 17.5, 20.4)), .Names = c("s1", "s2", 
     "s3", "s4"), row.names = c(NA, -5L), class = "data.frame")

# Model A
# One way (the wrong way) to test wether s1,s2,s3,s4 differs:
summary(aov(s1~s2+s3+s4, data=b))
# R does not complain here - but I don't know what I am doing. I guess I am trying
# to explain the variance in s1, with the variable s2,s3 and s4.
# I am not sure how this actually is different from a proper anova (see below).
# Also I dont understand why the Sum of Squares for s3 is much larger than the sum of    
# squares for s2 and s4.

# Model B
# The correct way to do it (requires reshape)
# install.packages('reshape')
# library(reshape)

summary(aov(value ~variable, data=melt(b)))
# This is correct - I am here testing variation within the factors of 'variable',
# to explain variation in 'value'.
# Doing 
TukeyHSD(aov(value ~variable, data=melt(b)))
# shows me that s1 is significantly different from s2.
# My way of thinking is that this result should be evident from "model A"
# What does Sum of Squares in model A mean? - why is it so big for s3? 
```

从上面代码中的注释来看：我要求解释模型 A 是如何以及为什么是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:49:32.493

模型 A 不是方差分析。您正在使用 s2、s3 和 s4 作为预测变量对一个响应变量 (s1) 进行建模；这是这里的协方差分析。如果绘制相关矩阵，s3 如此大的原因将变得显而易见；`cor( b )`会告诉你

```
 s1          s2         s3         s4
s1  1.00000000  0.08009315  0.7929146 -0.4200527
s2  0.08009315  1.00000000 -0.4433499  0.7846037
s3  0.79291464 -0.44334985  1.0000000 -0.8725241
s4 -0.42005268  0.78460371 -0.8725241  1.0000000 
```

您无法将其与模型 B 进行比较，在该模型 B 中，您将 s1 视为预测变量而不是响应变量，并且您的响应变量是类（s1、s2、s3 或 s4）。

# sql - Sql 查询条件基于列可以持有位

> ID：13329786
> 
> 赞同：-5
> 
> 时间：2012-11-11T08:55:25.460
> 
> 标签：sql, sql-server

我的问题是：

```
select
    ProdID, Qualified 
from 
    VarAnn_Data.dbo.tblOwnership 
```

程序输出：

```
ProdID(num) Qual (Bit)
26  0
26  0
26  1
26  0
26  1
26  0
26  0
27  0
28  0
28  0
28  0
28  0
28  0
28  1
28  1
29  0
29  0
29  1
29  0
29  1
29  0
29  0 
```

现在 single 有多个 1 和 0 `prodid`。我得到了不同的结果

情况1：

```
ProdId(num)      Quak(bit)
26                  0
26                  1 
```

结果：一个

```
ProdId(num)      Quak(bit)
26                  0 
```

结果：B

```
ProdId(num)      Quak(bit)
26                  1 
```

结果：C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:09:41.367

这是你想要的？

```
select ProdID, 
       min(Qualified),
       case when min(Qualified) <> max(Qualified) 
            then 'YES'
            else 'NO'
       end as Has_different_results
from VarAnn_Data.dbo.tblOwnership
group by ProdID 
```

# php - 如果密码包含空格，PDO 无法连接

> ID：13329787
> 
> 赞同：4
> 
> 时间：2012-11-11T08:55:41.393
> 
> 标签：php, postgresql, pdo

我正在使用 PDO 和 PHP 创建一个 PHP 网站，但是我的 DSN（用于 Postgresql）没有连接到数据库，而 Mysql 工作正常。

我正在尝试使用密码`a b c`。

> 错误：异常 'PDOException' 与消息 'SQLSTATE[08006] [7] 在 /var/www/owncloud/pg_test.php:11 中的连接信息字符串中的“b”后缺少“=”
> 堆栈跟踪：
> #0 /var/ www/owncloud/pg_test.php(11): PDO->__construct('pgsql:dbname=te...', 'test', 'ab c')
> #1 {main}
> 它正在工作！

[示例代码](https://gist.github.com/3046155)：

```
<?php

/** createuser -d -R -S -P test
* => set password to "a b c"
*/

$dsn = "pgsql:dbname=test;host=localhost";
$user = "test";
$psw = "a b c";
try{
  $db = new PDO($dsn,$user,$psw);
  echo "Oh gosh!\n";
}catch(PDOException $e){
  echo "Error :" . $e."\n";
}

$e_user = addslashes($user);
$e_password = addslashes($psw);
$psw = $user = null;
$dsn .= ";user='$e_user';password='$e_password'";

try{
  $db = new PDO($dsn,$user,$psw);
  echo "it's working!\n";
}catch(PDOException $e){
  echo "Error :" . $e."\n";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T08:57:44.257

这是 php 中的一个错误（[没有错误 #62479](https://bugs.php.net/bug.php?id=62479)），当您尝试使用包含 1 个或多个空格的密码连接到 Postgresql 数据库时，pdo 将无法连接

你必须使用like `goget2me`（密码中没有空格）

# windows - 从另一个进程读取列表视图数据

> ID：13329794
> 
> 赞同：2
> 
> 时间：2012-11-11T08:57:44.987
> 
> 标签：windows, api, inter-process-communicat, syslistview32

这是一种 GUI 自动化应用程序，我想从另一个进程的列表视图中读取数据。

列表视图类是 SysListView32 并具有以下样式集 LVS_OWNERDRAWFIXED

通常，我可以使用以下过程从列表视图中读取文本

*   在其他进程的内存空间中分配内存
*   向 listview 发送消息以使用该进程中分配的缓冲区指针读取文本
*   读取缓冲区

当列表视图不是所有者绘制时它工作正常，但在这种情况下，列表视图似乎是由所有者绘制的，即列表项没有数据。

是否可以通过我讨论过的方法或任何方法或通过挂钩 api 或任何方法从这样的列表视图中读取文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:12:06.723

控件仍必须将 LVITEM 添加到列表视图中。但是，当然没有义务在其中放入任何有用的东西。如果应用程序自己绘制，指定一个空的 pszText 或 iImage 就可以了。它将实现 WM_DRAWITEM 消息处理程序并使用内部数据来呈现项目。

无法找出该数据的存储位置。您可以伪造自己的 WM_DRAWITEM 消息，尽管这*很难*做到，因为您必须注入代码来创建 HDC，但这只会得到像素，而不是字节。使用 OCR 将是一个主要的异常值解决方案。实际上，您需要在这个问题上认输。

# android - URI 不存在时的异常

> ID：13329798
> 
> 赞同：0
> 
> 时间：2012-11-11T08:58:10.370
> 
> 标签：android

当我尝试从设置应用程序中打开“声音”时，它会因以下异常而崩溃：

```
11-11 19:47:40.080: E/AndroidRuntime(6305): FATAL EXCEPTION: Thread-773
11-11 19:47:40.080: E/AndroidRuntime(6305): java.lang.IllegalStateException: Unknown URL: content://media/internal/audio/media/30/30
11-11 19:47:40.080: E/AndroidRuntime(6305):     at android.os.Parcel.readException(Parcel.java:1433)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:188)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:140)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at android.content.ContentResolver.query(ContentResolver.java:370)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at android.content.ContentResolver.query(ContentResolver.java:313)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at com.android.settings.SoundSettings.updateRingtoneName(SoundSettings.java:331)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at com.android.settings.SoundSettings.access$300(SoundSettings.java:52)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at com.android.settings.SoundSettings$3.run(SoundSettings.java:252)
11-11 19:47:40.080: E/AndroidRuntime(6305):     at java.lang.Thread.run(Thread.java:856) 
```

好像这个 URI 不存在：

> 内容：//媒体/内部/音频/媒体/30/30

我跑了一个

> Uri.parse("content://media/internal/audio/media/30/30").getPath()

我回来了

> /内部/音频/媒体/30/30

但是 /internal 在我的设备的文件系统上不存在。

**我的问题是，如何创建 URI 引用的这个文件，以便应用程序不会因为丢失而崩溃？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:13:18.540

这是一个解决方案，但并不理想（您必须擦除手机）：解决此问题的方法是在未启用“自动恢复”选项的情况下执行“恢复出厂设置”。

你会得到一部干净的手机，这个错误就会消失。

另一个对我不起作用但似乎对其他人有用的修复是在“管理应用程序”中清除任何带有“设置”一词的应用程序的缓存和数据，即“设置”、“系统设置”

我仍然不确定是什么导致了这个问题，它会在短暂使用手机后表现出来：它可能是由安装特定应用程序引起的吗？

# html - IE 8 忽略 div 中的边距

> ID：13329803
> 
> 赞同：1
> 
> 时间：2012-11-11T08:59:08.213
> 
> 标签：html, css

我无法让 IE8 识别页边距，我有一个我想要垂直居中在一个带有左边距的标题 div 中的徽标，但它似乎被忽略但在 Chrome、Firefox 和 Safari 中显示良好。此外，我有一个登录/注册 div，它应该位于标题 div 的右上角，并带有一些顶部和右侧边距，但它们也被忽略了。我将在这篇文章中包含 JSFiddle 链接以及代码。这是它在 IE ![在此处输入图像描述](../Images/6c5c1933ad4fdbedc4ea79b6341761dc.png) 中的样子 这是它应该看起来的样子 ![在此处输入图像描述](../Images/24e0ce4be3966bcd7b7b82fc40250d37.png)

JSFiddle [http://jsfiddle.net/ARhRt/](http://jsfiddle.net/ARhRt/)

```
<html>
    <head>
        <title>
        TESTING    
        </title>
        <LINK href="CLLProfile.css" rel="stylesheet" type="text/css">

    </head>

    <body>
        <div id="wrapper">
        <div class="container">

            <div id="header">
                <img src="http://www.placekitten.com/400/100">

                <div class="login"> 
                    <a href="http://www.signup.com">Sign Up</a> <a href="http://www.login.com">Login</a>
                </div>

                <div class="search">
                    <form id ="search" action="" method="post" enctype="multipart/form-data">
                        <label>Search:</label>
                        <input type="text" name="searchBox" id="searchBox" /> 
                        <input type="submit" id="Submit" value="Submit" />
                    </form> 
                </div>

            </div>

            <div class="navigation">
                <form id ="categoryForm" action="test1.php" method="post">
                    <div id="categorydiv">
                        <select name="thing" onChange="getSub(this.value)">
                            <option value=0>Select Main Category<?=$options?>
                        </select> </div>

                    <div id="subcategorydiv">
                        <select name="subCats" >
                             <option>Select Sub Category</option>
                        </select></div>

                        <input type="submit" value="Submit" />
                </form>

            </div>

                <div class="content">
                    Here is the CONTENT 
                    <div class="profileInfo">
                        PROFILE INFO
                    </div>
                </div>

        </div>

        </div>
    </body>

</html>​ 
```

CSS：

```
body{
    background: gainsboro;
    text-align: center;

}

.container{
    padding-top: 20px;
    background: gold;
    width: 900px;
    height: 1300px;
    margin: 0 auto;

}

.content {
    background: #aad500;
    width: 800px;
    height: 1000px;
    margin: 0 auto;
    border: black solid medium;
    text-align: left;
}

#header {

    width: 800px;
    height: 150px;
    margin: 0 auto;
    background: #aad500;
    border: black solid medium;
    text-align: left;

}

#header img{
    position: relative;
    left: 50px;
    top: 25px;

}

.login {
    width: 350px;
    height: 35px;
    float: right;
    background: #aad500;

}

.search{
    background: #aad500;
    color: white;
    width: 250px;
    height: 20px;
    position: relative;
    margin-top: 10px;
    margin-left: 500px;
}

.profileInfo{
    background: whitesmoke;
    width: 750px;
    height: 800px;
    margin-top: 50px;
    margin-left: auto;
    margin-right: auto;

}

.login a{
    float: right;
    margin-left: 10px;
    margin-right: 20px;
    margin-top: 5px;
    font-size: large;
    color: whitesmoke;
    text-align: right;

}

.login a:hover{
    color: green;
}

.navigation {
    background: green;
    width: 800px;
    height: 50px;
    margin: 0 auto;
    border: black solid medium;
    text-align: left;
}

.navigation select{
    float: left;
    margin-top: 15px;
    margin-left: 10px;
}

.navigation input {
    margin-left: 10px;
    margin-top: 15px;
}

.search #Submit{
    float: right;
    position: absolute;
}

#wrapper{
    width: 100%;
    margin-left: auto;
    margin-right: auto;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:06:52.390

对于可能遇到相同问题的人，这是我做错的事情，我忘了添加！DOCTYPE 一个用户提出了这个建议，并且由于某种原因该帖子被删除了。

我在 DOC 开头留下的内容：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd"> 
```

# c# - 在运行时在 C#.NET 项目中传递 Java 类对象

> ID：13329804
> 
> 赞同：0
> 
> 时间：2012-11-11T08:59:29.187
> 
> 标签：c#, .net, com, interop

在 C# 代码中，我们如何将动态创建的 Java 类对象传递给基于 COM 互操作的项目中的另一个 Java 类函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T12:08:03.770

我不熟悉 Java 中的 COM 使用/部署，但我确信通过 COM 向 C# 公开的 Java 类看起来就像 C# 端的 C# 类。

因此，答案就是将 Java 对象传递给 Java 方法，就像将 C# 对象传递给 C# 方法一样。

# web - 我是否也需要提交子站点地图？

> ID：13329806
> 
> 赞同：0
> 
> 时间：2012-11-11T08:59:48.003
> 
> 标签：web, seo, sitemap

我有一个带有根站点地图的网站。根站点地图描述了所有的子站点地图。当我提交到谷歌或其他目录时，我是否也需要提交子站点地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:28:05.760

不，您只需要提交根站点地图。它应该包含指向所有子站点地图的链接。

# tridion - Tridion UI 错误 - “此页面的预览不是最新的”

> ID：13329809
> 
> 赞同：7
> 
> 时间：2012-11-11T08:59:51.880
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我已安装 Tridion UI 并在日志文件中收到以下警告。除了这个警告之外，即使在调试模式下，日志文件中也不会记录任何错误。

> “WARN AmbientDataContext - 没有当前环境数据上下文 - 环境数据框架未正确初始化”</p>

此警告会记录在我的会话预览 Web 服务 cd_core.2012-11-11.log 文件和登台 Web 应用程序的相同日志文件中。我怀疑由于这个警告，我没有在 UI 界面中获得更新的页面预览。请参阅下面的 UI 错误截图 –</p>

![在此处输入图像描述](../Images/1ea10ec981b526a1a6d567202c9f9e8a.png) 我还尝试通过单击“更新页面预览”按钮来更新预览，但没有运气。为了解决这个错误，我在堆栈溢出中遵循了几乎所有与此相关的答案。如果我参考以下问题中的答案。 [Tridion UI - 预览不更新](https://stackoverflow.com/questions/11351709/tridion-ui-preview-not-updating) 所以我们在这一点上是正确的，因为内容总是在正确的地方发布。我想从会话预览服务的 cd_dynamic_conf.xml 中的设置中探索类似的点，如下所示 -</p>

```
<URLMappings>
    <StaticMappings>
<Publications>
 <Publication Id="241">
    <Host Domain="xyz" Port="80" Protocol="http" Path="/" />
</Publication>
  <Publication Id="121">
     <Host Domain="xyz" Port="80" Protocol="http" Path="/" />
</Publication>
</Publications>
   </StaticMappings>
<StorageMapping IdentifyPublicationByProperty="publicationUrl"/>
</URLMappings> 
```

并在 staging 应用程序中

```
 <URLMappings>
    <StaticMappings>
      <Publications>           
    <Publication Id="241">
     <Host Domain="xyz" Port="80" Protocol="http" Path="/" />
   </Publication>
    </Publications>
   </StaticMappings>
    <StorageMapping IdentifyPublicationByProperty="publicationUrl"/>
      </URLMappings> 
```

并且 SiteEdit 标记会像这样创建 –</p>

用于组件演示

```
 <!-- Start SiteEdit Component Presentation: {"ID":"cp_5", "ComponentID":"tcm:240-22393",             "ComponentVersion":19, "ComponentTemplateID":"tcm:240-23899-32", "IsQueryBased":false} --> 
```

用于页面设置

```
<!-- SiteEdit Settings: {"PageID":"tcm:240-22507-64", "PageVersion":49,     "TargetTypeID":"tcm:0-1-65438", "ComponentPresentationLocation":1} --> 
```

在这里，我想强调以下几个要点 -

1- 我在同一个 IIS 目录下有两种语言的网站，一种是 /en，另一种是 /fr。在上面设置出版物 id 241 是我的网站的 en 版本。所以我也尝试了下面的设置

```
<Publication Id="240">
<Host Domain="xyz" Port="80" Protocol="http" Path="/en" />
</Publication> 
```

但再次没有运气。如果仍然需要他们调查问题，我可以提供更多信息，例如日志文件等。请帮助我尽早解决这个非常恼人的问题。

**编辑 -1**请在下面找到相同的配置文件

**用于会话预览 web 服务的 cd_ambient_conf.xml**

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<Configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="6.1" xsi:noNamespaceSchemaLocation="schemas/cd_ambient_conf.xsd">

    <!-- Cookies settings -->
    <!-- <Cookies> <Cookie Type="Tracking" Name="myTrackingCookie" Path="/"/> <Cookie Type="Session" Name="mySessionCookie" Path="/"/> </Cookies> -->
    <Cartridges>
        <!-- Example cartridge definition -->
        <!--
        <Cartridge File="cd_ambient_cartridge_conf.xml"/>
        -->
        <Cartridge File="cd_webservice_preview_cartridge.xml"/>
    </Cartridges>
</Configuration> 
```

**cd_ambient_conf.xml 用于临时网站**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Configuration Version="6.1"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:noNamespaceSchemaLocation="schemas/cd_ambient_conf.xsd">

        <Cartridges>

            <Cartridge File="cd_webservice_preview_cartridge.xml"/>
            <Cartridge File="footprint_cartridge_conf.xml"/>

        </Cartridges>
      <ClaimStoreProvider>com.tridion.siteedit.preview.PreviewClaimStoreProvider</ClaimStoreProvider>

    </Configuration> 
```

**用于暂存网站的 cd_ambient_cartridge_conf.xml**

```
 <ClaimProcessorDefinitions>
        <ClaimProcessorDefinition Uri="tcd:claimprocessor:example:userdetails" ImplementationClass="com.tridion.ambientdata.processing.ExampleClaimProcessor1"
                            Description="Example claim processor that gets user details.">
            <RequestStart>
                <InputClaims>
                    <ClaimDefinition Uri="tcd:claim:userid" />
                </InputClaims>
                <OutputClaims>
                    <ClaimDefinition Uri="tcd:claim:username" />
                    <ClaimDefinition Uri="tcd:claim:usersex" />
                    <ClaimDefinition Uri="tcd:claim:userage" />
                </OutputClaims>
            </RequestStart>
        </ClaimProcessorDefinition>

        <ClaimProcessorDefinition Uri="tcd:claimprocessor:example:example2"
                            ConfigProviderClass="com.tridion.ambientdata.processing.ExampleClaimProcessorConfigProvider" />
    </ClaimProcessorDefinitions>
</CartridgeDefinition> 
```

**注意：- 在设置 UI 期间，我们将 cd_ambient_cartridge_conf.xml 用于暂存网站而不是用于 Session 预览网站的原因** ，暂存网站抛出了一个错误，它期望 cd_ambient_cartridge_conf.xml 文件。所以我们在这个网站上放了一个示例文件。甚至在文档中也没有提到拥有这个文件。但在会话预览网站的情况下，它并不期望任何此类文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T03:42:50.623

1.  您可以放心地忽略日志中的 WARN 消息。预览不是最新消息与此 WARN 消息无关。

2.  如果您为网站使用虚拟路径（如 /en、/fr 等），则需要在预览应用程序上安装修补程序“CD_2011.1.1.81686”。您不需要将虚拟路径添加到 cd_dynamic_conf.xml 文件。你应该只保留“/”

3.  最后，关于“预览不是最新的”，除了预览之外，您还需要将 cd_ambient_catridge_conf.xml 添加到您的 Web 服务中。我不相信这是记录在案的，但是您需要添加它，我的 VM 无法轻松访问，但我可以稍后确认。请确保您注释掉所有示例 ClaimProcessors。

另外，请确保您在 CMS 中启用了会话预览，内联编辑设置（禁用会话预览应该是 NO）

希望这可以帮助。

# c++ - 自定义刷新实现

> ID：13329812
> 
> 赞同：5
> 
> 时间：2012-11-11T09:00:23.463
> 
> 标签：c++, iostream

我正在尝试按照[这个问题](https://stackoverflow.com/questions/243696/correctly-over-loading-a-stringbuf-to-replace-cout-in-a-matlab-mex-file)的逻辑`streambuf`在[`Rcpp`](http://dirk.eddelbuettel.com/code/rcpp.html). 有人贡献了基本的行为，让我们可以写出类似的东西

```
Rcout << "some text" ; 
```

我们在哪里实现`xsputn`并`overflow`重定向到`Rprintf`功能。

```
std::streamsize Rcpp::Rstreambuf::xsputn(const char *s, std::streamsize num ) {
    Rprintf( "%.*s", num, s );
    return num;
}

int Rcpp::Rstreambuf::overflow(int c ) {
    if (c != EOF) {
        Rprintf( "%.1s", &c );
    }
    return c;
} 
```

我也想实现刷新，即支持这种语法：

```
Rcout << "some text" << std::flush ; 
```

我需要实现哪种方法才能使`flush`操纵器​​在我的自定义流上工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T09:44:06.213

它是`sync()`函数（如在[filebuf](http://en.cppreference.com/w/cpp/io/basic_filebuf/sync)中）：

```
protected:
virtual int sync() 
```

[base_streambuf<>::sync()](http://en.cppreference.com/w/cpp/io/basic_streambuf/pubsync)的基本版本什么都不做，必须覆盖它才能与底层流进行一些同步。

# python - 在单独的行上将项目写入文件，末尾没有空行

> ID：13329818
> 
> 赞同：3
> 
> 时间：2012-11-11T09:02:57.403
> 
> 标签：python

我有一个包含一堆文本的文件，我想撕掉它，匹配一堆东西，然后将这些项目写入新文件中的单独行。

这是我整理的代码的基础知识：

```
f = open('this.txt', 'r')
g = open('that.txt', 'w')
text = f.read()
matches = re.findall('', text) # do some re matching here
for i in matches:
    a = i[0] + '\n'
    g.write(a)
f.close()
g.close() 
```

我的问题是我希望每个匹配的项目都在一个新行上（因此是 '\n'），但我不希望文件末尾有一个空行。

我想我不需要文件中的最后一项被换行符尾随。

解决这个问题的 Pythonic 方式是什么？另外，我在代码中设置它的方式是最好的方式，还是最 Pythonic 的方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T09:05:48.773

如果您想写出一系列行，它们之间有换行符，但最后没有换行符，我会使用`str.join`. 也就是说，用这个替换你的 for 循环：

```
output = "\n".join(i[0] for i in matches)
g.write(output) 
```

为了避免必须显式关闭文件，特别是如果您的代码可能被异常中断，您可以使用该`with`语句使事情变得更简单。以下代码替换了您问题中的整个代码：

```
with open('this.txt') as f, open('that.txt', 'w') as g:
    text = f.read()
    matches = re.findall('', text) # do some re matching here
    g.write("\n".join(i[0] for i in matches)) 
```

或者，因为您不需要同时打开两个文件：

```
with open('this.txt') as f:
    text = f.read()
matches = re.findall('', text) # do some re matching here
with open('that.txt', 'w') as g:
    g.write("\n".join(i[0] for i in matches)) 
```

# java - 为什么 HashMap 初始容量没有被库正确处理？

> ID：13329819
> 
> 赞同：3
> 
> 时间：2012-11-11T09:02:59.573
> 
> 标签：java, hashmap, capacity

要为 N 个元素创建 HashMap/HashSet，我们通常这样做`new HashMap((int)(N/0.75F)+1)`很烦人。

为什么库一开始就没有处理这个问题，而是允许初始化`new HashMap(N)`（不应该重新散列到 N 个元素）来处理这个计算`(int)(N/0.75F)+1`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:18:16.437

## 更新

更新以反映已更改的问题。不，没有这样的标准 API，但似乎[guava](/questions/tagged/guava "show questions tagged 'guava'")[`Maps.newHashMapWithExpectedSize(int)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Maps.html#newHashMapWithExpectedSize(int))中有一个方法：

> 创建一个`HashMap`具有足够高的“初始容量”的实例，它*应该可以*容纳`expectedSize`没有增长的元素。

* * *

> 我必须将其初始化为 (int)(N/0.75F)+1

不，你没有。`HashMap`如果你从 other新建`Map`，`HashMap`默认先计算容量：

```
public HashMap(Map<? extends K, ? extends V> m) {
    this(Math.max((int) (m.size() / DEFAULT_LOAD_FACTOR) + 1,
                  DEFAULT_INITIAL_CAPACITY), DEFAULT_LOAD_FACTOR);
    putAllForCreate(m);
} 
```

如果你一个一个地添加元素，同样的过程也会发生：

```
void addEntry(int hash, K key, V value, int bucketIndex) {
    if ((size >= threshold) && (null != table[bucketIndex])) {
        resize(2 * table.length);
        //...
    }

    createEntry(hash, key, value, bucketIndex);
} 
```

使用`HashMap(int initialCapacity, float loadFactor)`构造函数的唯一原因是当您从一开始就知道要在 中存储多少元素`HashMap`，从而避免以后调整大小和重新散列（地图从一开始就具有正确的大小）。

一个有趣的实现细节是初始容量被修剪到最接近的 2 次幂（请参阅：[为什么 ArrayList 以 1.5 的速率增长，但对于 Hashmap，它是 2？](https://stackoverflow.com/questions/5040753)）：

```
// Find a power of 2 >= initialCapacity
int capacity = 1;
while (capacity < initialCapacity)
    capacity <<= 1; 
```

因此，如果您希望自己`HashMap`具有定义的确切容量，只需使用 2 的幂即可。

选择不同`loadFactor`可以让您以空间换取性能 - 较小的值意味着更多的内存，但更少的冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T11:11:03.317

我已经运行了以下程序

```
public static void main(String... args) throws IllegalAccessException, NoSuchFieldException {
    for (int i = 12; i < 80; i++) {
        Map<Integer, Integer> map = new HashMap<Integer, Integer>((int) Math.ceil(i / 0.75));
        int beforeAdding = Array.getLength(getField(map, "table"));
        for (int j = 0; j < i; j++) map.put(j, j);
        int afterAdding = Array.getLength(getField(map, "table"));
        map.put(i, i);
        int oneMore = Array.getLength(getField(map, "table"));
        System.out.printf("%,d: initial %,d, after N %,d, after N+1 %,d%n ",
                i, beforeAdding, afterAdding, oneMore);
    }
}

private static <T> T getField(Map<Integer, Integer> map, String fieldName) throws NoSuchFieldException, IllegalAccessException {
    Field table = map.getClass().getDeclaredField(fieldName);
    table.setAccessible(true);
    return (T) table.get(map);
} 
```

打印出来

```
 12: initial 16, after N 16, after N+1 32
 13: initial 32, after N 32, after N+1 32
 .. deleted ..
 24: initial 32, after N 32, after N+1 64
 25: initial 64, after N 64, after N+1 64
 .. deleted ..
 47: initial 64, after N 64, after N+1 64
 48: initial 64, after N 64, after N+1 128
 49: initial 128, after N 128, after N+1 128
 .. deleted ..
 79: initial 128, after N 128, after N+1 128 
```

这表明默认初始化器的初始容量是四舍五入到二的下一次幂。这个值的问题是，如果你希望这是最终的大小，如果你想避免调整大小，就必须考虑负载因子。理想情况下，您不必像 Map 复制构造函数为您所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:08:35.007

大多数实现会随着您添加更多元素而自动增长。当容器变满时，大多数实现的性能也会下降。这就是为什么首先存在负载因素的原因：留下一些可用空间。

# php - 带 Âº 的数组

> ID：13329820
> 
> 赞同：0
> 
> 时间：2012-11-11T09:03:05.283
> 
> 标签：php, arrays, character-encoding

我有以下数组：

```
[0] => Array
        (
            [0] => 3,38 m
            [1] => 13,30 s
            [2] => 5,41 m
            [3] => ESE
            [4] => 294Âº
            [5] => 32,76 km/h
            [6] => W
            [7] => 266Âº
            [8] => 16,27 ÂºC
            [9] => 12,80 ÂºC
            [10] => 0
        ) 
```

我想在将数据添加到数据库之前对其进行清理。

此功能几乎存在，但不会删除特殊字符：

```
function cleanUp(&$value,$key)
{
    $cleaner2 = array("km/h"," ","m","s","Âº","ÂºC");
    $value = str_replace($cleaner2, "", $value);
}
array_walk($newArray[0],"cleanUp"); 
```

我已经研究过对数组进行编码，但我不确定它现在有什么编码？我可以修剪数组值，但觉得这很不雅。

有任何想法吗？

**解决方案：** 我从标题中省略了字符集！

```
header('Content-type: application/json; charset=UTF-8'); 
```

这使我的简单 cleanUp 函数可以工作，因为它删除了 Â，然后匹配以下 cleanUp 数组值：

```
$cleaner2 = array("km/h"," ","m","s","º","ºC","C"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:13:26.530

你可以试试

```
$data = array(
  0 => '3,38 m',
  1 => '13,30 s',
  2 => '5,41 m',
  3 => 'ESE',
  4 => '294Âº',
  5 => '32,76 km/h',
  6 => 'W',
  7 => '266Âº',
  8 => '16,27 ÂºC',
  9 => '12,80 ÂºC',
  10 => 0,
);

$c =  array("km/h"," ","m","s","Âº","ÂºC");
$data = array_map(function($v)use($c) {return mb_replace($c,"",$v);},$data);
var_dump($data); 
```

输出

```
array (size=11)
  0 => string '3,38' (length=4)
  1 => string '13,30' (length=5)
  2 => string '5,41' (length=4)
  3 => string 'ESE' (length=3)
  4 => string '294' (length=3)
  5 => string '32,76' (length=5)
  6 => string 'W' (length=1)
  7 => string '266' (length=3)
  8 => string '16,27C' (length=6)
  9 => string '12,80C' (length=6)
  10 => string '0' (length=1) 
```

功能使用

```
function mb_replace($search, $replace, $subject, &$count=0) {
    if (!is_array($search) && is_array($replace)) {
        return false;
    }
    if (is_array($subject)) {
        // call mb_replace for each single string in $subject
        foreach ($subject as &$string) {
            $string = &mb_replace($search, $replace, $string, $c);
            $count += $c;
        }
    } elseif (is_array($search)) {
        if (!is_array($replace)) {
            foreach ($search as &$string) {
                $subject = mb_replace($string, $replace, $subject, $c);
                $count += $c;
            }
        } else {
            $n = max(count($search), count($replace));
            while ($n--) {
                $subject = mb_replace(current($search), current($replace), $subject, $c);
                $count += $c;
                next($search);
                next($replace);
            }
        }
    } else {
        $parts = mb_split(preg_quote($search), $subject);
        $count = count($parts)-1;
        $subject = implode($replace, $parts);
    }
    return $subject;
} 
```

[功能信用：秋葵](https://stackoverflow.com/a/3786018/1226894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:18:58.853

```
function __clean( $text )
{
    $buff = implode('[:#:]',$text);
    $buff = str_replace("","UNICODE OF $text",$buff);
    return ($buff); 
} 
```

# java - 为非原始类型（类）定义包装器

> ID：13329821
> 
> 赞同：0
> 
> 时间：2012-11-11T09:03:05.767
> 
> 标签：java, design-patterns, distributed-transactions

我正在分布式系统中实现一个中间件服务提供者，它为调用它的方法提供锁管理，

我们可能有很多命令需要这个服务

实际上，该服务会检查一些条件以查看执行命令是否安全，如果安全则在远程对象上执行命令，

我正在考虑定义一个接收命令的包装器，进行锁定并返回命令执行的结果，

有没有办法实现这样的模式？

谢谢，阿里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:01:10.877

这是代理模式。G4 书 (Erich Gamma) 引用了一个正是您所需要的示例：保护代理。这本质上是您提出的解决方案，创建一个封装锁定和访问控制的新类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:10:22.443

据我了解，您需要使用代理模式。查看[此答案](https://stackoverflow.com/a/4777199/1375049)以获取有关如何在 java 中执行此操作的更多详细信息。我认为这正是你所需要的。

# deployment - Azure 部署因启动脚本而失败

> ID：13329822
> 
> 赞同：2
> 
> 时间：2012-11-11T09:03:13.677
> 
> 标签：deployment, azure, startupscript

我正在按照我的 ServiceDefinition.csdef 中的以下内容启动启动脚本

```
<Startup>
  <Task commandLine="Microsoft.WindowsAzure.Caching\ClientPerfCountersInstaller.exe install" executionContext="elevated" taskType="simple" />
  <Task commandLine="startup.cmd" executionContext="elevated" taskType="simple" />
</Startup> 
```

startup.cmd 文件是

```
@echo off
REM StartupLog.txt can be found at (E or F):\approot\bin

Echo Copying MyUtil to system root                                                        >> StartupLog.txt 2>&1
copy /y MyUtil.exe %SystemRoot%                                                           >> StartupLog.txt 2>&1
IF ERRORLEVEL 1 GOTO ErrorExit

REM It's ok if the next fails, the task may not be scheduled 1st time
Echo Trying to delete MyUtil from scheduler                                               >> StartupLog.txt 2>&1
schtasks /Delete /F /TN "MyUtil"                                                          >> StartupLog.txt 2>&1

Echo Adding MyUtil to Scheduler                                                           >> StartupLog.txt 2>&1
schtasks /Create /SC MINUTE /MO 2 /SD 11/01/2012 /TN "MyUtil" /TR %SystemRoot%\MyUtil.exe >> StartupLog.txt 2>&1
IF ERRORLEVEL 1 GOTO ErrorExit                                                            >> StartupLog.txt 2>&1
GOTO End

:ErrorExit
REM   Report the date, time, and ERRORLEVEL of the error.
%ERRORLEVEL%                                                      >> StartupLog.txt 2>&1
DATE /T                                                           >> StartupLog.txt 2>&1
TIME /T                                                           >> StartupLog.txt 2>&1
ECHO An error occurred during startup. ERRORLEVEL = %ERRORLEVEL%  >> StartupLog.txt 2>&1
ECHO -----------------------------------------------------------  >> StartupLog.txt 2>&1
EXIT /B 1

:End    
ECHO Exiting at end with 0                                        >> StartupLog.txt 2>&1
ECHO -----------------------------------------------------------  >> StartupLog.txt 2>&1
EXIT /B 0 
```

(E: or F:)\approot\bin 中的错误是：

```
Copying MyUtil to system root                                                        
        1 file(s) copied.
Trying to delete MyUtil from scheduler                                                
SUCCESS: The scheduled task "MyUtil" was successfully deleted.
Adding MyUtil to Scheduler                                                            
ERROR: No mapping between account names and security IDs was done.

(43,4):LogonType:'1' is not recognized as an internal or external command,
operable program or batch file. 
```

如果我在 RDP 进入 WebRole 之后运行 startup.cmd 文件，那么这些任务就会很好地添加到调度程序中。由于某种原因，它总是无法通过部署。有谁知道如何解决这一问题？我恢复到 OSVersion=2 直到我可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:51:29.213

原因可能是执行脚本的用户（还）没有 AppData 目录。您可以尝试在启动任务的顶部添加这些吗？

```
md "%~dp0appdata"
reg add "hku\.default\software\microsoft\windows\currentversion\explorer\user shell folders" /v "Local AppData" /t REG_EXPAND_SZ /d "%~dp0appdata" /f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T22:34:26.627

我遇到了完全相同的问题，在浪费了几个小时认为这是一个权限问题之后，结果发现它需要在指定为 /TR 参数的路径周围加上双引号。实际上我有命令行参数，所以我需要像“\”appname.exe\“\”parameter\””这样指定它

和你一样，我在我的任务中使用了环境变量——尽管我不确定为什么，这可能是相关的。也像您一样，以我的 RDP 用户身份启动时任务运行良好，但在 SYSTEM 下作为实际启动任务运行时却失败了。

我知道几个月过去了，所以你可能已经从这个问题上移开了，但我很好奇这些报价是否也为你解决了问题（以及奖励积分，解释为什么它关心！）。

# google-chrome-extension - 消息传递 chrome 扩展

> ID：13329825
> 
> 赞同：0
> 
> 时间：2012-11-11T09:04:40.723
> 
> 标签：google-chrome-extension, sendmessage

我想创建一个扩展，其中内容脚本将消息发送到后台页面，然后在浏览器操作上意味着单击扩展图标将访问该后台页面并获取一些数据。我在 windows8 上使用 chrome 版本 23.0.1271.64 m。

我收到以下错误。端口错误：无法建立连接。接收端不存在。

我试图解决同样的问题。但人们正在使用 chrome20+ 不支持的 sendRequest。我还找到了针对 chrome 20+ 的解决方案。但不工作。请帮忙。

以下是文件内容。

**清单.json**

```
{
  "name": "Test Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "A test extension.",
  "background": "background.html",
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["jquery.js","content.js"]
    }
  ],
 "permissions": ["tabs", "http://*/", "https://*/"],
   "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  }
} 
```

**背景.html**

```
<html>
<head>
    <script src="background.js"></script>
</head>
<body>
    <h1>Wy</h1>
</body>
</html> 
```

**背景.js**

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    // Chrome 20+
    alert(request);
    console.log('received in listener');
  sendResponse({farewell: "goodbye"});

}); 
```

**内容.js**

```
$(function(){
console.log('start-sending message');

chrome.extension.sendMessage({greeting: "hello"},function(response){alert(response);});

console.log('end-sending message');
}); 
```

**popup.html**

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    </style>

    <!-- JavaScript and HTML must be in separate files for security. -->
    <script src="jquery.js"></script>
    <script src="popup.js"></script>

  </head>
  <body>
  </body>
</html> 
```

**popup.js**

```
$(function(){
  var str_html = "<tr><td width='60%'>S</td><td width='40%'>15</td></tr><tr><td width='60%'>M</td><td width='40%'>25</td></tr>";
  $('#sizes_container').html(str_html);
  var bkg = chrome.extension.getBackgroundPage();
    console.log(bkg);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:57:08.607

您错误地将已弃用的`"background_page"`属性与`"background"`. 使用[后台页面](http://developer.chrome.com/extensions/background_pages.html)的正确方法是：

```
"background": {
    "scripts": ["background.js"]
} 
```

您可以完全摆脱您的`background.html`，因为它没有任何用途（您的内容`<body>`未使用）（如果您真的需要它，请使用`"background": {"page": "background.html"}`）。

关于`sendRequest`，它确实已被弃用，但尚未删除（尚未）。

关于您的弹出页面：您没有任何带有 ID 的元素`sizes_container`，因此您显然不会看到任何输出。

# javascript - 如何将孩子附加为第三个孩子

> ID：13329827
> 
> 赞同：2
> 
> 时间：2012-11-11T09:04:51.560
> 
> 标签：javascript, html, dom

我想在指定节点之后添加一个新的子节点作为第三个子节点。

```
<ul id="menu">
    <li>one</li>
    <li>tow</li>
    <li>three</li>
    <li>four</li>
</ul>

<script>
var li = document.createElement("li");
document.getElementById("menu").appendChild(li);
var sometext = document.createTextNode("third one");
li.appendChild(sometext); 
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T09:06:50.453

[`insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)如果要在其容器结束之前的任何位置添加节点，请使用此选项。

```
parentElement.insertBefore(newNode, currentThirdNode); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T10:14:24.580

`childNodes`请记住，`siblings`和之间存在差异`ElementSiblings`。a`textNode`是一个`Node`，但不是一个`Element`。所以如果你想在 DOM 中插入一个元素，使用`nextElementSibling`| `previousElementSibling`和`appendChild`| 和只包含这样的元素`insertBefore`的父属性：`children`

```
function insertAsThird( element, parent ){
  if ( parent.children.length > 2 ){
   parent.insertBefore(element, parent.children[2]);
 }
 else parent.appendChild(element);
} 
```

并像这样使用它：

```
insertAsThird( yourThirdElement, document.getElementById("your target parent")); 
```

if you want to to work on childNodes, not Elements, just change the `parent.children` parts to `parent.childNodes`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T09:33:18.450

javascript（没有 jQuery）：

```
var newLi = document.createElement("li");
newLi.innerHTML ="new el 3"
var menu = document.getElementById("menu");
var el3 = menu.getElementsByTagName("li")[2];
menu.insertBefore(newLi, el3); 
```

或使用 jQuery：

```
$('#menu').children().eq(1).append('<li>new</li>'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T09:33:55.890

我认为您应该在添加新元素之前附加 textNode，如下所示：

```
<script>
  var li = document.createElement("LI");
  var sometext = document.createTextNode("third one");
  li.appendChild(sometext);

  var menu = document.getElementById("menu");
  var third = parent.getElementsByTagName("LI")[2];

  menu.insertBefore(li, third);
</script> 
```

我希望这对你有用..

# document-ready - 使用history.back（1）时如何防止调用jquery document.ready？

> ID：13329829
> 
> 赞同：3
> 
> 时间：2012-11-11T09:05:04.123
> 
> 标签：document-ready

每当我单击调用“history.back(1);”的后退按钮时 $(document).ready(...); 总是触发..

如何预防？我只是希望在单击后退按钮时加载没有 doc.ready 的页面..

# android - 写入 SD 卡时出错

> ID：13329830
> 
> 赞同：0
> 
> 时间：2012-11-11T09:05:09.723
> 
> 标签：android

请帮助...我在我的应用程序的第一个活动中创建了一个文本文件，一切正常。在我的下一个活动中，我想附加到文本文件。

但是当我尝试附加捕获时会引发以下错误..

```
mnt/scard/PatRecords/testfile.txt  contains a file seperator 
```

并且没有任何内容添加到文件中。

我的附加代码是..

```
try {
     File directory = new File 
      (Environment.getExternalStorageDirectory().getPath()+"/PatRecords");

     FileOutputStream fOut = openFileOutput(directory.getPath()+"/"+FileName$, MODE_APPEND);
        OutputStreamWriter OutWriter = new OutputStreamWriter(fOut); 

        OutWriter.write(TestNo$+"\n");
        OutWriter.write(Date$+"\n");

        OutWriter.close();
        fOut.close();

     }  catch (Exception e) {
        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show();
        Error=1;
    }//End of try/catch 
```

我已经尝试删除分隔符等，但仍然无法正常工作，据我所知，catch 错误中显示的路径是正确的......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:31:00.210

`openFileOutput()`用于打开位于内部存储器上的程序数据文件夹中的文件，您只能提供文件名，而不是路径，因此会抱怨`mnt/scard/PatRecords/testfile.txt contains a file separator`.

如果你想打开 SD 卡上的文件，你必须使用`FileOutputStream()`或类似的东西：

```
File of = new File(Environment.getExternalStorageDirectory(), filename);
FileOutputStream fos = new FileOutputStream(file);
fos.write(data);
fos.flush();
fos.close(); 
```

# sql - 在 sql 中要使用 ALL 命令而不是 MAX 命令

> ID：13329831
> 
> 赞同：2
> 
> 时间：2012-11-11T09:05:16.040
> 
> 标签：sql, sql-server

我想查找`sids`所有命令中评分最高的。

我`max`通过写命令找到它

```
select S.sid,S.sname 
from Sailors S 
where S.rating = (select max(S1.rating) from Sailors S1) 
```

但我也想通过使用`all`命令找到它，所以我写它

```
select S.sid,S.sname 
from Sailors S 
where  S.rating > all (select S.rating from Sailors S) 
```

但它不会给出相同的结果。

我的错误是什么？我该如何规范它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T09:17:26.173

您只需将查询修改为以下内容：

```
select S.sid,S.sname 
from Sailors S 
where  S.rating >= all (select S.rating from Sailors S) 
```

虽然 Mahmoud 对于当前条件的问题部分是正确的，但添加相等的可能性会为您提供与`MAX`查询相同的行为，因为集合中的每个元素都必须大于或等于自身。（马哈茂德关于没有元素可以大于自身的观点是准确的。）

请参阅Mahmoud 提供的[这个 SQLfiddle](http://www.sqlfiddle.com/#!3/23a1b/4)。

正如 ypercube 在评论中指出的那样，如果列中的任何值为 NULL，则此方法不起作用。如果您修改子查询以指定`WHERE rating IS NOT NULL`, 或`NOT NULL`列，它应该仍然可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T09:36:25.823

在 SQL-Server 中，您也可以简单地使用`ORDER BY`组合与`TOP (1)`规范**[`WITH TIES`](http://msdn.microsoft.com/en-us/library/ms189463.aspx)**：

```
SELECT TOP (1) WITH TIES
    S.sid, S.sname 
FROM Sailors S 
ORDER BY S.rating DESC ; 
```

# jquery - Jquery Ajax 没有命中 Webservice

> ID：13329833
> 
> 赞同：1
> 
> 时间：2012-11-11T09:05:26.497
> 
> 标签：jquery, ajax, web-services

我正在使用位于应用程序根文件夹中的本地 Web 服务。我尝试使用 Jquery Ajax 方法访问服务方法，然后它返回 404 错误。但是相同的代码在我的本地机器上运行良好。在实时服务器上测试时会出现此问题。我是否需要在 web.config 文件中进行一些设置..请指导我有关此

这是网络服务的链接：- [http://solentcarleasing.co.uk/solentwebservice.asmx](http://solentcarleasing.co.uk/solentwebservice.asmx)

*   我正在使用 MVC3

提前致谢

这是代码：-

函数绑定价格（）{

```
 var derivative = $("#hdncderid").val();
    var Terms = "24";
    var Milage = "10000 mpa"

    Milage = $("#AnnualMilageList :selected").text();
    Terms = $("#drpterm :selected").val();

    var IsSpecial = 1
    var Type = "C"
    var IsMaintances = "0"

    var CtrServicePath = "http://solentcarleasing.co.uk/solentwebservice.asmx/GetLeasingPriceForTechinalPageByDerID";

    $.ajax({
        type: "POST",
        url: CtrServicePath,
        data: "{derivativeids:" + derivative + ", term: '" + Terms + "', milage: '" + Milage + "', IsSpecial: " + IsSpecial + ", typ: '" + Type + "', maintain: '" + IsMaintances + "'}",
        async: false,
        contentType: "application/json; Characterset=utf-8",
        dataType: "json",
        success: function (data1) {

            var p = eval("(" + data1.d + ")");

            if (p.length > 0) {

                $.each(p, function (i, k) {

                    if (parseFloat(k.BusinessPrice1).toFixed(2) != 0.00 || k.BusinessPrice1 != 0.0) {

                        document.getElementById("SpnBussinessPrice").innerHTML = "£ " + parseFloat(k.BusinessPrice1).toFixed(2);
                        document.getElementById("SpnPersonalPrice").innerHTML = "£ " + parseFloat(k.PersonPrice1).toFixed(2);
                        document.getElementById("SpnPersonlInialsPrice").innerHTML = " £ " + parseFloat(k.IntialsPersonalPayment1).toFixed(2);
                        document.getElementById("SpnBussinessInialsPrice").innerHTML = " £ " + parseFloat(k.IntialsBusinessPayment1).toFixed(2);

                        document.getElementById("spnquotepayment").innerHTML = "£ " + parseFloat(k.BusinessPrice1).toFixed(2);
                        document.getElementById("spnquoteinitialpayment").innerHTML = " £ " + parseFloat(k.IntialsBusinessPayment1).toFixed(2);
                        document.getElementById("spnquoteterm").innerHTML = Terms + " months";
                        document.getElementById("spnquotemilage").innerHTML = Milage.replace("mpa", "") + " miles";

                        document.getElementById("spnpermonthP").innerHTML = " per month";
                        document.getElementById("spnpermonthB").innerHTML = " per month";
                    }
                    else {

                        document.getElementById("SpnBussinessPrice").innerHTML = "Price on Request";
                        document.getElementById("SpnPersonalPrice").innerHTML = "Price on Request";
                        document.getElementById("spnpermonthP").innerHTML = "";
                        document.getElementById("spnpermonthB").innerHTML = "";

                        document.getElementById("SpnPersonlInialsPrice").innerHTML = " £ " + parseFloat(k.IntialsPersonalPayment1).toFixed(2);
                        document.getElementById("SpnBussinessInialsPrice").innerHTML = " £ " + parseFloat(k.IntialsBusinessPayment1).toFixed(2);

                        document.getElementById("spnquotepayment").innerHTML = "Price on Request";
                        document.getElementById("spnquoteinitialpayment").innerHTML = " £ " + parseFloat(k.IntialsBusinessPayment1).toFixed(2);
                        document.getElementById("spnquoteterm").innerHTML = Terms + " months";
                        document.getElementById("spnquotemilage").innerHTML = Milage.replace("mpa", "") + " miles";

                    }
                }
               );
            }
        },
        error: function (res) {
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:23:06.553

嘿，pardeep dhingra，我认为您在**vars 末尾**缺少**' `;`'**：

 **```
var derivative = $("#hdncderid").val();
var Terms = "24";
var Milage = "10000 mpa" // <------------------------------here

Milage = $("#AnnualMilageList :selected").text();
Terms = $("#drpterm :selected").val();

var IsSpecial = 1    // <----------------------------------here
var Type = "C"  // <---------------------------------------here
var IsMaintances = "0" // <--------------------------------here 
```

请放在**`;`**那里，看看你是否能成功。

谢谢**

# python - ns3 中的 Python 编码在 Ubuntu 12.04 中失败

> ID：13329836
> 
> 赞同：1
> 
> 时间：2012-11-11T09:06:10.677
> 
> 标签：python, networking, ubuntu-12.04

我的机器上有 Ubuntu 12.04。我根据 nsnam 中的说明将 ns3 安装到我的计算机上。到目前为止，我没有收到任何错误。我正在尝试使用 python 来运行我的代码。我安装了 python 2.7.3 并且 ./waf --pyrun examples/first.py 没有运行。我用谷歌搜索了很多，我找不到任何失败的答案。这是我的错误的 config.log：

```
from /home/shaul/tarballs/ns3/ns-3.13/bindings/python: Test does not build: Traceback (most recent call last):
  File "/home/shaul/tarballs/ns3/ns-3.13/.waf-1.6.7-0a94702c61504c487a251b8d0a04ca9a/waflib/Tools/c_config.py", line 435, in run_c_code
    bld.compile()
  File "/home/shaul/tarballs/ns3/ns-3.13/.waf-1.6.7-0a94702c61504c487a251b8d0a04ca9a/waflib/Build.py", line 193, in compile
    raise Errors.BuildError(self.producer.error)
BuildError: Build failed
 -> task failed (exit status 1): 
    {task 169552396: cxxprogram test.cpp.1.o -> testprog}
['/usr/bin/g++', 'test.cpp.1.o', '-o', '/home/shaul/tarballs/ns3/ns-3.13/build/.conf_check_9a1d0551212c9d703363e62dfbc51c79/testbuild/testprog', '-Wl,-Bstatic', '-Wl,-Bdynamic', '-L/usr/lib', '-lpython2.7', '-Wl,-Bsymbolic-functions', '-Wl,-z,relro']

not found
from /home/shaul/tarballs/ns3/ns-3.13/bindings/python: The configuration failed

# try again with -L$python_LIBPL (some systems don't install the python library in $prefix/lib) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:36:08.253

通过 nsnam 的说明告诉您下载源代码并构建它：这不是在 Ubuntu 12.04 上执行此操作的最佳方法。Ubuntu 12.04 有一个为你构建的包：

```
sudo apt-get install ns3 
```

应该做的伎俩。一点都不大惊小怪。

# css - 输入“未选择文件”标题的 Chrome CSS 问题未继承填充？

> ID：13329839
> 
> 赞同：3
> 
> 时间：2012-11-11T09:06:23.810
> 
> 标签：css, google-chrome

我正在尝试使用 Chrome 向输入字段添加一些 CSS 属性 - 除了“未选择文件”文本似乎没有继承填充值之外，一切似乎都有效。如果我删除所有 CSS，则“未选择文件”与按钮直接保持一致，但在添加 CSS 后，它会导致它看起来更高，好像该文本没有继承填充值？

这是导致此问题的完整 CSS：

```
.inputtest{
    line-height:1.5em;
    border:5px solid #3a3a3a;
    padding:10px;
    margin-left:20px;
    width:71%;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;    
}​ 
```

请参阅：http: [//jsfiddle.net/A6LuR/3/](http://jsfiddle.net/A6LuR/3/)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:01:56.350

你的CSS问题是`padding`财产。

这段代码给你类似的设计

CSS：

```
.inputtestHolder{
    border:5px solid #3a3a3a;
    padding:10px;
    margin-left:20px;
    width:71%;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;
} 
```

HTML：

```
<div class="inputtestHolder">
<input type="file">
</div> 
```

我希望这有帮助

​</p>

# java - 使用路径获取 IFile[]

> ID：13329843
> 
> 赞同：0
> 
> 时间：2012-11-11T09:07:00.763
> 
> 标签：java, eclipse-plugin

我有 org.eclipse.core.runtime.Path 对象。这将具有一些值，例如 Test/src/jsp —— 其中 Test 是项目名称。从这里我想获得该路径中的文件列表，即 IFile []。你能建议一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T09:19:10.473

您可以通过获取 src/ 文件夹`IFolder folder = project.getFolder(new Path("/src/"))` ，然后通过获取此文件夹中的所有资源`IResource[] resources = folder.members()`。

因此，您只需要提取所有 IFile，例如

`for(IResource resource : resources) {
if(resource instanceof IFile)
//do something
}`

# winforms - 在 VC++ 中使用“VS2010 并行模式库”

> ID：13329844
> 
> 赞同：2
> 
> 时间：2012-11-11T09:07:26.407
> 
> 标签：winforms, visual-c++, error-handling, ppl

我创建了一个 vc++ windows 窗体应用程序（VS 2010），当我尝试包含 ppl.h（并行模式库）时，出现以下编译错误。

> 错误：编译 /clr 时不支持并发运行时。c:\Program 文件 (x86)\Microsoft Visual Studio 10.0\VC\include\concrt.h 27"

我想在我的程序中使用“VS 2010 Parallel Patterns Library”提供的“parallel_for”算法。

谁能告诉我如何克服上述问题以及如何在 Windows 窗体应用程序中使用“并行模式库”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:47:25.610

您似乎正在用 C++/CLI 编写一个 WinForms 托管项目（为什么？...）。在托管世界中有[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)(TPL) 及其`System::Threading::Tasks::Parallel::For`. 您不必（不能）在针对 clr 的项目中使用 PPL，至少在它的托管部分中不必。您是否正在从事混合（托管/非托管）互操作性项目？如果是这样，请正确分离托管部分和本机部分。然后，在本地组件中使用 PPL，在托管组件中使用 TPL。例如，看看[这个博客条目](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/01/05/using-c-amp-code-in-a-c-clr-project.aspx)。

# android - 将 DateTime 转换为毫秒

> ID：13329846
> 
> 赞同：2
> 
> 时间：2012-11-11T09:07:54.087
> 
> 标签：android, datepicker, datetimepicker, milliseconds, datetime-conversion

我想将**Date+Time**转换为**毫秒**。我正在使用此代码来转换它们。

```
final TimePicker time = (TimePicker) findViewById(R.id.timePicker1);
final DatePicker date = (DatePicker) findViewById(R.id.datePicker1);

final Calendar calendar = Calendar.getInstance();

calendar.set(date.getYear(), date.getMonth(),
                            date.getDayOfMonth(), time.getCurrentHour(),
                            time.getCurrentMinute(), 0);
final long startTime = calendar.getTimeInMillis(); 
```

但它没有给我正确的价值。例如，如果我想转换这个“ **Sep 23 2000 02:45 AM** ”，它会给我这个值“ **96965900504** ”。但这个值不像这些网站那样

[http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/](http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/)

[http://www.timestampconvert.com/?go1=true&m=09&d=23&y=2000&hours=02&min=45&sec=0&Submit=++++++Convert+to+timestamp+++++&offset=-5](http://www.timestampconvert.com/?go1=true&m=09&d=23&y=2000&hours=02&min=45&sec=0&Submit=++++++Convert+to+timestamp+++++&offset=-5)

然后我尝试我们`time.getCurrentHour() + 5`，因为我当前的位置是**GMT+5**，但它没有给我正确的结果。我怎样才能得到正确的日期+时间值到毫秒？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:32:07.203

如果您将值直接设置到日历中，您将获得正确的值：

```
Calendar c = Calendar.getInstance();
c.set(2000, 8, 23, 2, 45, 0);

System.out.println("TimeInMillis:" + c.getTimeInMillis());

Date e = new Date(c.getTimeInMillis());
System.out.println("Date:" + e); 
```

结果将是：

```
TimeInMillis:969666300102
Date:Sat Sep 23 02:45:00 AST 2000 
```

因此，请确保`DatePicker`and`TimePicker`返回正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:06:21.493

好的，我只是将 TimeZone 添加到此代码中

```
TimeZone timezone = TimeZone.getTimeZone("GMT+05:00");
calendar.setTimeZone(timezone); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:22:38.850

尝试这个。

```
 Calendar calendar = Calendar.getInstance();
      Date date = calendar.getTime();
      TimeZone tz = TimeZone.getTimeZone("your timezone");

      SimpleDateFormat formatter = 
             (SimpleDateFormat)DateFormat.getDateTimeInstance(DateFormat.LONG,
             DateFormat.LONG, Locale.getDefault());

      formatter.setTimeZone(tz);
      formatter.applyPattern("your pattern");
      formatter.parse("yourdate"); 
```

# jquery - chrome上的console.log jquery元素看起来很奇怪

> ID：13329849
> 
> 赞同：5
> 
> 时间：2012-11-11T09:08:43.143
> 
> 标签：jquery, google-chrome

```
 [<h1>, prevObject: e.fn.e.init[1], context: #document, selector: "h1"] 
```

我如何获得如上所示的结果？

这是我使用的命令：`console.log($('h1'));` 任何人都可以在 chrome 版本 23.0.1271.64 m 上获得像我一样的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:14:26.187

当然，您正在寻找整个 HTML 元素

用于`console.log($('h1').get(0));`检查属性

或者`console.log($('h1')[0]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T11:19:12.943

您正在查看 jQuery 对象的所有子属性。

如果您在 Firefox 中单击**+**，您将看到相同的属性..（*加上所有继承的方法*）

# http - 是否可以在没有 tomcat 的情况下使用 cxf 提供 http 服务

> ID：13329851
> 
> 赞同：0
> 
> 时间：2012-11-11T09:09:36.870
> 
> 标签：http, tomcat, cxf

我正在编写一个用于使用 http 协议提供服务的服务器。（服务器不是为从浏览器访问而设计的，它是用来为iphone客户端提供数据的）我知道cxf库对此有很好的支持。没有tomcat可以做到这一点吗？如果可能的话，一个示例项目或示例配置文件会很棒。

（我认为这个问题也可以理解为我们是否必须使用像tomcat这样的web容器来进行http协议）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:19:15.563

你不需要使用tomcat。CXF 有一个 HTTP 传输，它使用嵌入式 Jetty 实例为您不使用 Tomcat 或其他 servlet 引擎的情况提供 HTTP 服务器支持。当您使用 -Pserver maven 配置文件时，几乎所有 CXF 在示例目录中提供的示例应用程序都使用它。

# javascript - 用javascript读取服务器文件

> ID：13329853
> 
> 赞同：7
> 
> 时间：2012-11-11T09:10:28.240
> 
> 标签：javascript, file

我有一个使用 javascript 的 html 页面，用户可以选择从他的 PC 读取和使用他自己的文本文件。但我想在服务器上有一个示例文件，用户可以通过单击按钮打开该示例文件。我不知道打开服务器文件的最佳方法是什么。我google了一下。（我是 html 和 javascript 的新手，所以我对以下内容的理解可能不正确！）。我发现 javascript 是基于客户端的，打开服务器文件不是很简单。看起来使用 iframe (?) 是最简单的。所以我正在尝试（第一个测试只是打开它的网页加载）以下。在服务器上与我的 html 页面相同的目录中使用 kgr.bss：

```
<IFRAME SRC="kgr.bss" ID="myframe" onLoad="readFile();"> </IFRAME> 
```

和（使用 file_inhoud，在别处定义的行）

```
function readFile() {
    func="readFile=";
    debug2("0");
    var x=document.getElementById("myframe");
    debug2("1");
    var doc = x.contentDocument ? x.contentDocument : (x.contentWindow.document || x.document);
    debug2("1a"+doc);
    var file_inhoud=doc.document.body;
    debug2("2:");
    lines = file_inhoud.split("\n");
    debug2("3");
    fileloaded();
    debug2("4");
} 
```

调试功能显示：

```
readFile=0//readFile=1//readFile=1a[object HTMLDocument]// 
```

所以停止程序的语句是：

```
var file_inhoud=doc.document.body; 
```

怎么了？读取此文件的正确（或最佳）方法是什么？

注意：我看到文件被读取并显示在框架中。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T09:21:54.230

您最好的选择是，因为文件在您的服务器上，所以通过“ajax”检索它。这代表异步 JavaScript 和 XML，但 XML 部分是完全可选的，它可以用于各种内容类型（包括纯文本）。（就此而言，异步部分也是可选的，但最好坚持下去。）

下面是一个使用 ajax 请求文本文件数据的基本示例：

```
function getFileFromServer(url, doneCallback) {
    var xhr;

    xhr = new XMLHttpRequest();
    xhr.onreadystatechange = handleStateChange;
    xhr.open("GET", url, true);
    xhr.send();

    function handleStateChange() {
        if (xhr.readyState === 4) {
            doneCallback(xhr.status == 200 ? xhr.responseText : null);
        }
    }
} 
```

你会这样称呼它：

```
getFileFromServer("path/to/file", function(text) {
    if (text === null) {
        // An error occurred
    }
    else {
        // `text` is the file text
    }
}); 
```

但是，上面的内容有些简化。它适用于现代浏览器，但不适用于一些旧浏览器，您必须解决一些问题。

**更新**：您在下面的评论中说您正在使用 jQuery。如果是这样，您可以使用它的[`ajax`功能](http://api.jquery.com/jQuery.ajax/)并从 jQuery 的一些浏览器不一致的解决方法中受益：

```
$.ajax({
    type:    "GET",
    url:     "path/to/file",
    success: function(text) {
        // `text` is the file text
    },
    error:   function() {
        // An error occurred
    }
}); 
```

* * *

边注：

> 我发现javascript是基于客户端的......

不，这是一个神话。JavaScript 只是一种编程语言。它可以在浏览器、服务器、工作站等中使用。事实上，JavaScript**最初**是为服务器端使用而开发的。

如今，最常见的用途（和您的用例）确实是在客户端的 Web 浏览器中，但 JavaScript 并不限于一般情况下的客户端。事实上，它在服务器和其他地方正在大幅复苏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-11T09:21:10.257

检索文本文件（或任何其他服务器端资源）的常用方法是使用[AJAX](https://developer.mozilla.org/en/docs/AJAX)。下面是一个如何提醒文本文件内容的示例：

```
var xhr;
if (window.XMLHttpRequest) {
    xhr = new XMLHttpRequest();
} else if (window.ActiveXObject) {
    xhr = new ActiveXObject("Microsoft.XMLHTTP");
}

xhr.onreadystatechange = function(){alert(xhr.responseText);};
xhr.open("GET","kgr.bss"); //assuming kgr.bss is plaintext
xhr.send(); 
```

然而，您的最终目标的问题在于，传统上不可能使用 javascript 来访问客户端文件系统。但是，新的 HTML5 文件 API 正在改变这一点。[你可以在这里](http://www.html5rocks.com/en/tutorials/file/dndfiles/)阅读它。

# xml - 使用 xslt 从每条记录中获取基于另一个标签值的标签值

> ID：13329855
> 
> 赞同：2
> 
> 时间：2012-11-11T09:11:06.773
> 
> 标签：xml, xslt, tibco

我需要根据每条记录中的另一个元素值获取一个元素值。我必须根据第二个元素值将它们分为两组。

标准：

*   如果`RECORD_TYPE='WARNING'`那么我必须打印**WARNINGS**`ERROR_DESC`下所有记录的所有值：。

***   如果`RECORD_TYPE='ERROR'`那么我必须打印**ERRORS**`ERROR_DESC`下所有记录的所有值：

    ***   每个错误描述都应打印在新行中。****

 ******示例输入：**

```
<root>
<SellOutErrorRecord>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
    <RECORD_NO>1</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>LA</PRODUCT_LINE>
</SellOutErrorRecord>
<SalesInErrorRecord>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <ERROR_DESC>record 1:location id is invalid</ERROR_DESC>
    <RECORD_NO>1</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>LA</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>C</PRODUCT_LINE_TYPE>
</SalesInErrorRecord>
<SellOutErrorRecord>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <ERROR_DESC>record 2:SO:invoiced net amount is invalid</ERROR_DESC>
    <RECORD_NO>2</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>HA</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SellOutErrorRecord>
<SellOutErrorRecord>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <ERROR_DESC>record 3:SO:transaction currency is invalid</ERROR_DESC>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>J3</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SellOutErrorRecord>
<SalesInErrorRecord>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <ERROR_DESC>record 3:SI:buy quantity is zero</ERROR_DESC>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>J3</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SalesInErrorRecord>
<SalesInErrorRecord>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <ERROR_DESC>record 3:SI:transaction document id is invalid</ERROR_DESC>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>J3</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SalesInErrorRecord>
<SellOutErrorRecord>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <ERROR_DESC>record 4:SO:invoiced net amount is invalid</ERROR_DESC>
    <RECORD_NO>4</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>445860-B21</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>MV</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>C</PRODUCT_LINE_TYPE>
</SellOutErrorRecord>
<SalesInErrorRecord>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <ERROR_DESC>record 5:SI:transaction currency is null or invalid</ERROR_DESC>
    <RECORD_NO>5</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>J3</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SalesInErrorRecord>
<InventoryErrorRecord>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <ERROR_DESC>record 6:product id is invalid</ERROR_DESC>
    <RECORD_NO>6</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    <PRODUCT_NUMBER>331184-B21</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0S1</PRODUCT_OPTION>
    <PRODUCT_LINE>R8</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</InventoryErrorRecord>
<SellOutErrorRecord>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <ERROR_DESC>record 6:SO:invoiced net amount is invalid</ERROR_DESC>
    <RECORD_NO>6</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
    <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
    <PRODUCT_OPTION>0D1</PRODUCT_OPTION>
    <PRODUCT_LINE>J3</PRODUCT_LINE>
    <PRODUCT_LINE_TYPE>E</PRODUCT_LINE_TYPE>
</SellOutErrorRecord>
</root> 
```

**预期输出：**

```
ERRORS:
record 1:location id is invalid
record 2:SO:invoiced net amount is invalid
record 3:SO:transaction currency is invalid

WARNINGS:
record 1:location id is invalid
record 3:SI:buy quantity is zero
record 4:SO:invoiced net amount is invalid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:22:20.397

以下样式表用于[`xsl:key`](http://www.w3.org/TR/xslt#key)按元素的`RECORD_TYPE`值对元素进行分组并生成分组的文本输出。

```
<xsl:stylesheet version="1.0"      
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">  
    <xsl:output method="text"/>

    <!--Create a key matching on each of the elements that contain RECORD_TYPE, and use it's value as the lookup key -->
    <xsl:key name="record-type" match="*[RECORD_TYPE]" use="RECORD_TYPE" />

    <xsl:template match="/">
        <!--generate output for all ERRORS -->
        <xsl:apply-templates select="key('record-type','ERROR')" />
        <!--generate a line-feed to separate the record types -->
        <xsl:text>&#xA;</xsl:text>
        <!--generate output for all WARNINGS -->
        <xsl:apply-templates select="key('record-type','WARNING')" />
    </xsl:template>

   <!--For the first of each type of record, generate a header row -->
   <xsl:template match="/*/*[generate-id()=generate-id(key('record-type',RECORD_TYPE)[1])]">
       <xsl:value-of select="RECORD_TYPE"/>
        <xsl:text>S:&#xA;</xsl:text>           
        <xsl:apply-templates select="ERROR_DESC" />
   </xsl:template>

    <!--Default processing for elements is to apply-templates to child elements-->
    <xsl:template match="*">
        <xsl:apply-templates select="*"/>
    </xsl:template>

    <!--For ERROR_DESC, output it's text value and a line-feed -->
    <xsl:template match="ERROR_DESC">
        <xsl:value-of select="."/>
        <xsl:text>&#xA;</xsl:text>
    </xsl:template>

</xsl:stylesheet> 
```

当应用于提供的 XML 时，它会产生以下输出：

```
ERRORS:
record 1:location id is invalid
record 2:SO:invoiced net amount is invalid
record 3:SO:transaction currency is invalid
record 3:SI:transaction document id is invalid
record 5:SI:transaction currency is null or invalid
record 6:product id is invalid
record 6:SO:invoiced net amount is invalid

WARNINGS:
record 1:location id is invalid
record 3:SI:buy quantity is zero
record 4:SO:invoiced net amount is invalid 
```****

# c# - 通过 HTTPS 使用 WebClient 发送请求 - POST 日期加倍

> ID：13329865
> 
> 赞同：3
> 
> 时间：2012-11-11T09:12:36.067
> 
> 标签：c#, post, https, webclient

这段代码

```
 using (WebClient webClient = new WebClient())
        {
            string address = "https://www.any.com/name.htm";
            byte[] postData = Encoding.ASCII.GetBytes("login=123");
            webClient.Headers[HttpRequestHeader.Accept] = "text/html, application/xhtml+xml, */*";
            webClient.Headers[HttpRequestHeader.AcceptLanguage] = "ru-RU";
            webClient.Headers[HttpRequestHeader.UserAgent] = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)";
            webClient.Headers[HttpRequestHeader.AcceptEncoding] = "gzip, deflate";
            webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
            webClient.UploadData(address, postData);
        } 
```

产生这个请求（postData 双打）：

```
POST /name.htm HTTP/1.1
Accept-Language: ru-RU
Accept-Encoding: gzip, deflate
Accept: text/html, application/xhtml+xml, */*
Content-Type: application/x-www-form-urlencoded
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)
Host: [url]www.any.com[/url]
Content-Length: 9
Connection: Keep-Alive

login=123login=123 
```

如果我改变

```
string address = "https://www.any.com/name.htm" 
```

至

```
string address = "http://www.any.com/name.htm" 
```

那么数据不会翻倍。

**HTTPS发送请求时如何避免数据翻倍？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:03:31.877

这是 HttpAnalizer 的错误。

非常感谢哈德拉达。

# cordova - 是否可以将 phonegap 2.2.0 与 Xcode 4.2.1 一起使用

> ID：13329871
> 
> 赞同：0
> 
> 时间：2012-11-11T09:14:19.870
> 
> 标签：cordova

是否可以将 phonegap 2.2.0 与 Xcode 4.2.1 一起使用？我已经按照电话间隙站点的说明进行操作，但是 xcode 提示我许多错误消息，例如“没有为选择器“createBackupInfoWithCloudBackup”找到已知的类方法。除此之外，libCordova.a 在“使用库链接二进制文件”中以红色字体显示。我已将所有架构更改为 armv7。但是，问题仍然存在。任何人都可以帮助/建议我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T04:34:11.093

您可以修复编译错误。能够使其与 Phonegap / Cordova 2.9 和 XCode 4.2（带有 iOS SDK 5）和 Snow Leopard 一起使用。我在[这里](http://programming.mvergel.com/2013/07/xcode-42-and-phonegap-cordova-and.html)记录了这个过程。

# php - PHP类方法中的单元测试 - 与类属性的依赖关系？

> ID：13329877
> 
> 赞同：0
> 
> 时间：2012-11-11T09:16:37.437
> 
> 标签：php, unit-testing, class

说我有这门课：

```
class MyExample
{
   public $my_var = [1,2,3,4];

   public function MyMethod() 
   {
     //Here I use $this->my_var;
   }
} 
```

考虑到我在其中使用了类属性 $my_var，什么是测试 MyMethod 方法的好方法。您是否建议将类属性作为参数传递给方法？所以我可以“给出论据，得到结果”的方法吗？：

```
 public function MyMethod($my_var) 
   {
     //Here I use $my_var;
   } 
```

我有一种感觉，如果我不这样做，如果我想测试 MyMethod，我将不得不创建几个具有不同值的 MyExample 实例，`$my_var`这将以某种方式测试类本身，而不仅仅是方法。

什么是好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:59:18.063

最好将“单元测试”中的“单元”视为类本身。您应该能够广泛地重构该类的内部实现，同时保持其公共 API 不变，而不会破坏您的测试。事实上，这基本上就是它们的用途：允许您更改单元的*实现，如果您从系统中**其他类*的角度更改了它的工作方式，您将被告知是安全的。

# java - Switch 语句意外结果

> ID：13329880
> 
> 赞同：0
> 
> 时间：2012-11-11T09:17:01.937
> 
> 标签：java, switch-statement

我写了这段代码，但它似乎不起作用。当我们输入`d`时，它会计算美元，但仍然在做（..what？）。

你能看到列表部分中的+检测+，错误的部分吗？

```
String currency = sc.next();
        char detect = currency.charAt(0);
switch (detect){
    case 'D':
    case 'd':
        double dollar = (amount/18*10);
        System.out.println(amount + " Turkish Lira(s) --> " + dollar + " Dollar");

    case 'E':
    case 'e':
        double euro = (amount/23*10);
        System.out.println(amount + " --> " + euro + " Euro");

    case 'T':
    case 't':
        double lira = (amount);
        System.out.println(amount + " --> " + lira+ " Lira(s)");

        while (detect!='d'|| detect!='e' || detect!='t' || detect!='D'|| detect!='E' || detect!='T'){
            System.out.println("Can u See " + detect + " In The List ?\n" + menucur);
            currency = sc.next();
            detect = currency.charAt(0);
            } 
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T09:21:13.410

您需要`break`在每个案例的末尾添加您的 switch 语句。

请参阅[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T09:28:14.950

`break`在每个块中的每个系列语句的末尾添加一个`case`，例如：

```
switch (detect){
    case 'D':
    case 'd':
        double dollar = (amount/18*10);
        System.out.println(amount + " Turkish Lira(s) --> " + dollar + " Dollar");
        break; // <==== Add this

    case 'E':
    case 'e':
        double euro = (amount/23*10);
        System.out.println(amount + " --> " + euro + " Euro");
        break; // <==== Again here 
```

...等等。这告诉代码你不想继续下一个`case`。

我推荐阅读一本好的 Java 入门书。在评论中，MadProgrammer 指出了一个特定于[这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)`switch`的教程，但我会退后一步，对基础知识做一些回顾。

为此，这是一个正确编写的`switch`声明的示例：

```
// Assume `n` is an integer
switch (n) {
    case 0:
    case 1:
        System.out.println("n is 0 or 1");
        break;

    case 2:
    case 3:
    case 4:
        System.out.println("n is 2, 3, or 4");
        break;

    case 17:
        System.out.println("n is 17");
        break;

    default:
        System.out.println("n has some value other than 0, 1, 2, 3, 4, or 17");
        break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T09:33:11.260

`beak`正如 Omar Jackman 已经指出的那样，缺少必要的关键字。此外，要处理无效输入（'D'、'd'、'E'、'e'、'T'、't' 以外的字母使用关键字`default`）：

```
switch(case)
    case 'D':
    case 'd': 
         double dollar = (amount/18*10);
         System.out.println(amount + " Turkish Lira(s) --> " + dollar + " Dollar");
         break;

    case 'E':
    case 'e':
         double euro = (amount/23*10);
         System.out.println(amount + " --> " + euro + " Euro")
         break;

    //.. rest of your code
    // finally:

    default: // <- handle invalid letter input
         System.out.println("Invalid input");
         break;
} 
```

# filenet-p8 - IBM FileNet P8 与 IBM Case Manager？

> ID：13329894
> 
> 赞同：4
> 
> 时间：2012-11-11T09:21:09.307
> 
> 标签：filenet-p8, filenet, ibm-case-manager

编辑：由于基于意见与基于事实而关闭，但答案非常基于事实：Case Manager 是 FileNet 的超集，而不是竞争产品。

在我的项目中，我们正在考虑使用 IBM Case Manager 而不是 FileNet P8+ILOG JRules 来实施贷款发起系统。我有责任研究通过 FileNet P8（我们已经在多个项目中使用过）迁移到案例管理的优点和缺点。

但我仍然不熟悉案例管理器。有人试过这个产品吗？请给我一些意见。总体体验如何？值得改变吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T06:21:16.953

IBM Case Manager 实际上是一个位于基本 FileNet P8 组件和 ILOG JRules 之上的产品。它使用底层 P8 内容引擎和流程引擎分别管理内容和工作流。因此，即使使用 IBM Case Manager，您的解决方案中仍会包含 FileNet P8 和 ILOG JRules，但它们在某种程度上隐藏在 IBM Case Manager 之后。

除了基本 P8 的安装和部署过程的一些改进之外，最新版本的 IBM Case Manager 带来的最大好处是知识工作者能够确定需要在案例上完成工作流的哪些部分- 逐案。传统上，P8 Process Engine 中的工作流设计是静态的，无法在运行时更改。他们仍然不能，但是案例管理器在流程引擎上放置了一个抽象层，让不同的流程片段仍然在流程引擎中静态定义，但案例的整体流程是动态的，并由知识工作者在运行时确定。

话虽如此，如果该项目的流程不涉及知识工作者，而只涉及系统集成（例如信用卡批准），那么使用 ILOG JRules 的基础 P8 和静态工作流可能更适合。

# meteor - 有没有办法在迭代 Meteor 中的集合时获取索引？

> ID：13329898
> 
> 赞同：6
> 
> 时间：2012-11-11T09:21:33.580
> 
> 标签：meteor, handlebars.js

下面的示例将生成一个球员姓名列表，其中球员是来自[MongoDB](http://en.wikipedia.org/wiki/MongoDB)数据库的数据集。

```
<template name="players">
  {{#each topScorers}}
    <div>{{name}}</div>
  {{/each}}
</template> 
```

但是，我想连续显示其中四个，并且在打印四个玩家之后，我想将行除以`<hr />`然后继续。例如，

```
<template name="players">
  {{#each topScorers}}
    <div style="float:left;">{{name}}</div>
    {{if index%4==0}}
      <hr style="clear:both;" />
    {{/if}
  {{/each}}
</template> 
```

在遍历集合时如何做这样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-28T08:14:10.570

为了保持集合的反应性，另一个解决方案是使用带有[地图光标功能](http://docs.meteor.com/#map)的模板助手。

下面是一个示例，展示了在将 each 与集合一起使用时如何返回索引：

```
index.html:

<template name="print_collection_indices">
  {{#each items}}
    index: {{ this.index }}
  {{/each}}
</template>

index.js:

Items = new Meteor.Collection('items');

Template.print_collection_indices.items = function() {
  var items = Items.find().map(function(doc, index, cursor) {
    var i = _.extend(doc, {index: index});
    return i;
  });
  return items;
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T00:18:16.247

现在没有简单的方法可以做到这一点，最新版本的车把支持一个`@index`字段（可以做你想要的），但它还没有在流星的版本中实现 - [https://github.com/meteor/meteor/issues/ 489](https://github.com/meteor/meteor/issues/489) .

当然你可以实现你自己的`{{#each_with_index}}`助手，它看起来像这样：

```
Handlebars.registerHelper('each_with_index', function(items, options) {
  var out = '';
  for(var i=0, l=items.length; i<l; i++) {
    var key = 'Branch-' + i;
    out = out + Spark.labelBranch(key,function(){ 
      options.fn({data: items[i], index: i});
    });
  }

  return out;
}); 
```

这样做的缺点是你失去了流星`{{#each}}`助手的好处，当单个项目发生变化时，它不会反应性地重新渲染整个列表。

编辑：感谢@zorlak 指向[https://github.com/meteor/meteor/issues/281#issuecomment-13162687](https://github.com/meteor/meteor/issues/281#issuecomment-13162687)

# java - PlayN JBox2D Y 速度增加但发生碰撞

> ID：13329906
> 
> 赞同：2
> 
> 时间：2012-11-11T09:22:24.070
> 
> 标签：java, box2d, collision, playn, jbox2d

所以我看到了一个非常奇怪的问题。

使用展示中的 PlayN peas 演示，我组合了一个简单的应用程序 - 我有一个动态实体掉到一个静态实体上，我无法弄清楚它为什么不弹跳。

在做了一些打印输出后，我发现碰撞正在发生 - y 位置保持不变，但 y 速度只是不断增加

这是我在动态实体中的更新代码

```
 @Override
  public void paint(float alpha) {
    float x = (body.getPosition().x * alpha) + (previousX * (1f - alpha));
    float y = (body.getPosition().y * alpha) + (previousY * (1f - alpha));
    float w = (body.getAngle() * alpha) + (previousRotationAngle * (1f - alpha));
    if (body.m_type == BodyType.DYNAMIC) {
      System.out.println("body x = " + body.getPosition().x + ", y = " + body.getPosition().y);
      System.out.println("velocity x = " + body.m_linearVelocity.x + ", y = "
      + body.m_linearVelocity.y);
    }
    imageLayer.setTranslation(x, y);
    imageLayer.setRotation(w);
  }

  @Override
  public void update(float delta) {
    previousX = body.getPosition().x;
    previousY = body.getPosition().y;
    previousRotationAngle = body.getAngle();
  } 
```

这是打印输出 - 你可以看到速度不断上升，但 y 位置在 8.46 处保持不变

```
 [java] body x = 17.024979, y = 0.5199691
 [java] velocity x = 0.0, y = 1.2983631
 [java] body x = 17.024979, y = 0.79601336
 [java] velocity x = 0.0, y = 2.562787
 [java] body x = 17.024979, y = 0.8908453
 [java] velocity x = 0.0, y = 2.8736944
 [java] body x = 17.024979, y = 0.99586946
 [java] velocity x = 0.0, y = 3.18255
 [java] body x = 17.024979, y = 0.99586946
 [java] velocity x = 0.0, y = 3.18255
 [java] body x = 17.024979, y = 1.1110185
 [java] velocity x = 0.0, y = 3.489367
 [java] body x = 17.024979, y = 1.2362258
 [java] velocity x = 0.0, y = 3.794159
 [java] body x = 17.024979, y = 1.2362258
 [java] velocity x = 0.0, y = 3.794159
 [java] body x = 17.024979, y = 1.3714248
 [java] velocity x = 0.0, y = 4.096939
 [java] body x = 17.024979, y = 1.5165496
 [java] velocity x = 0.0, y = 4.3977213
 [java] body x = 17.024979, y = 1.6715348
 [java] velocity x = 0.0, y = 4.696518
 [java] body x = 17.024979, y = 1.6715348
 [java] velocity x = 0.0, y = 4.696518
 [java] body x = 17.024979, y = 1.8363149
 [java] velocity x = 0.0, y = 4.993343
 [java] body x = 17.024979, y = 2.0108259
 [java] velocity x = 0.0, y = 5.2882085
 [java] body x = 17.024979, y = 2.195003
 [java] velocity x = 0.0, y = 5.581128
 [java] body x = 17.024979, y = 2.388783
 [java] velocity x = 0.0, y = 5.8721147
 [java] body x = 17.024979, y = 2.388783
 [java] velocity x = 0.0, y = 5.8721147
 [java] body x = 17.024979, y = 2.5921018
 [java] velocity x = 0.0, y = 6.1611805
 [java] body x = 17.024979, y = 2.5921018
 [java] velocity x = 0.0, y = 6.1611805
 [java] body x = 17.024979, y = 2.804897
 [java] velocity x = 0.0, y = 6.4483385
 [java] body x = 17.024979, y = 3.0271058
 [java] velocity x = 0.0, y = 6.733601
 [java] body x = 17.024979, y = 3.0271058
 [java] velocity x = 0.0, y = 6.733601
 [java] body x = 17.024979, y = 3.2586663
 [java] velocity x = 0.0, y = 7.016981
 [java] body x = 17.024979, y = 3.4995165
 [java] velocity x = 0.0, y = 7.298491
 [java] body x = 17.024979, y = 3.4995165
 [java] velocity x = 0.0, y = 7.298491
 [java] body x = 17.024979, y = 3.7495952
 [java] velocity x = 0.0, y = 7.5781426
 [java] body x = 17.024979, y = 4.0088415
 [java] velocity x = 0.0, y = 7.8559484
 [java] body x = 17.024979, y = 4.277195
 [java] velocity x = 0.0, y = 8.131921
 [java] body x = 17.024979, y = 4.5545955
 [java] velocity x = 0.0, y = 8.406072
 [java] body x = 17.024979, y = 4.5545955
 [java] velocity x = 0.0, y = 8.406072
 [java] body x = 17.024979, y = 4.840983
 [java] velocity x = 0.0, y = 8.678413
 [java] body x = 17.024979, y = 4.840983
 [java] velocity x = 0.0, y = 8.678413
 [java] body x = 17.024979, y = 5.1362987
 [java] velocity x = 0.0, y = 8.948957
 [java] body x = 17.024979, y = 5.440483
 [java] velocity x = 0.0, y = 9.217716
 [java] body x = 17.024979, y = 5.440483
 [java] velocity x = 0.0, y = 9.217716
 [java] body x = 17.024979, y = 5.753478
 [java] velocity x = 0.0, y = 9.484701
 [java] body x = 17.024979, y = 6.0752254
 [java] velocity x = 0.0, y = 9.749924
 [java] body x = 17.024979, y = 6.0752254
 [java] velocity x = 0.0, y = 9.749924
 [java] body x = 17.024979, y = 6.4056673
 [java] velocity x = 0.0, y = 10.013396
 [java] body x = 17.024979, y = 6.7447467
 [java] velocity x = 0.0, y = 10.275129
 [java] body x = 17.024979, y = 7.0924063
 [java] velocity x = 0.0, y = 10.535135
 [java] body x = 17.024979, y = 7.0924063
 [java] velocity x = 0.0, y = 10.535135
 [java] body x = 17.024979, y = 7.4485893
 [java] velocity x = 0.0, y = 10.793425
 [java] body x = 17.024979, y = 7.8132396
 [java] velocity x = 0.0, y = 11.05001
 [java] body x = 17.024979, y = 7.8132396
 [java] velocity x = 0.0, y = 11.05001
 [java] body x = 17.024979, y = 8.186301
 [java] velocity x = 0.0, y = 11.304901
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 11.55811
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 11.55811
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 11.8096485
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 12.059526
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 12.059526
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 12.307755
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 12.554346
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 12.554346
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 12.799309
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 13.042655
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 13.042655
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 13.284395
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 13.52454
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 13.7631
 [java] body x = 17.024979, y = 8.465522
 [java] velocity x = 0.0, y = 13.7631
 [java] body x = 17.024979, y = 8.465522 
```

这是一张图片 - 花是我测试的动态实体 - 它显然停在砖块上，但我不明白为什么速度只是继续上升

![在此处输入图像描述](../Images/3b4b9a54dfc157f006dd0221bbb8b876.png)

* * *

我不知道还有什么其他代码在这里会有所帮助——我的设置与展示中的豌豆演示几乎相同——以至于我从展示演示中删除了一些东西并且无法在那。

我在这里 100% 不知所措，因为这是一个物理问题，它有点阻碍了我的所有进步。豌豆演示完全有效

任何帮助将不胜感激 - 我已经尝试了 4 个小时，现在尝试了我能想到的所有事情，但没有任何效果

* * *

编辑添加了主要的世界级（这绝对是丑陋的 - 请不要评判我）

```
public class LevelWorld implements ContactListener, Paintable, Updatable, Destroyable {

  private static final float PHYSICS_UNITS_PER_PIXEL = PhysicsScale.PHYSICS_UNITS_PER_PIXEL
  .getScaleFactor();

  private final playn.core.GroupLayer worldLayer;

  private final Context context;
  private final World world;
  private final float frameRate;

  private final List<playn.core.GroupLayer> groupLayers;
  private final List<Entity> entities;
  private final Stack<Contact> contacts;
  private final Map<Body, PhysicsEntity> bodies;

  public LevelWorld(Level level, Context context) {
    worldLayer = graphics().createGroupLayer();
    worldLayer.setScale(1.F / PHYSICS_UNITS_PER_PIXEL);
    this.context = context;
    final Integer fps = (Integer) context.get(FPS);
    this.frameRate = 1.F / fps.floatValue();
    final Vec2 gravity = new Vec2(0.F, 10.0F);
    world = new World(gravity, true);
    world.setWarmStarting(true);
    world.setAutoClearForces(true);
    groupLayers = new ArrayList<playn.core.GroupLayer>();
    entities = new ArrayList<Entity>();
    contacts = new Stack<Contact>();
    bodies = new HashMap<Body, PhysicsEntity>();
    for (final GroupLayer groupLayer : level) {
      final playn.core.GroupLayer gl = graphics().createGroupLayer();
      gl.setDepth(groupLayer.getDepth());
      gl.setScale(groupLayer.getScaleFactor());
      groupLayers.add(gl);
      for (final Entity entity : groupLayer.getEntities()) {
        if (entity instanceof PhysicsEntity) {
          final FixtureDef fixtureDef = new FixtureDef();
          final BodyDef bodyDef = new BodyDef();
          if (PhysicsType.DYNAMIC.equals(entity.getEntityMetadata().getPhysicsType())) {
            bodyDef.type = BodyType.DYNAMIC;
          } else if (PhysicsType.STATIC.equals(entity.getEntityMetadata().getPhysicsType())) {
            bodyDef.type = BodyType.STATIC;
          }
          final Body body = world.createBody(bodyDef);
          fixtureDef.shape = entity.getEntityMetadata().getShape();
          fixtureDef.density = 0.4f;
          fixtureDef.friction = 0.1f;
          fixtureDef.restitution = 0.5f;
          body.setLinearDamping(0.2f);
          body.createFixture(fixtureDef);
          body.setTransform(new Vec2(entity.getPosition().x, entity.getPosition().y),
          entity.getRotationAngle());
          ((PhysicsEntity) entity).setBody(body);
          bodies.put(body, (PhysicsEntity) entity);
        }
        gl.add(entity.getImageLayer());
      }
      entities.addAll(groupLayer.getEntities());
      worldLayer.add(gl);
    }
    graphics().rootLayer().add(worldLayer);
    world.setContactListener(this); // kinda sketchy
  }

  @Override
  public void beginContact(Contact contact) {
    System.out.println("BEGIN CONTACT HAPPENED");
    contacts.push(contact);
  }

  @Override
  public void endContact(Contact contact) {

  }

  @Override
  public void preSolve(Contact contact, Manifold oldManifold) {

  }

  @Override
  public void postSolve(Contact contact, ContactImpulse impulse) {

  }

  @Override
  public void destroy() {
    worldLayer.destroy();
  }

  @Override
  public void update(float delta) {
    // worldLayer.setOrigin(worldLayer.originX() + (delta / 250.F),
    // worldLayer.originY());
    for (final Entity entity : entities) {
      entity.update(delta);
    }
    world.step(0.033F, 10, 10);
    // processContacts();
  }

  @Override
  public void paint(float alpha) {
    for (final Entity entity : entities) {
      entity.paint(alpha);
    }
  }

  private void processContacts() {
    while (!contacts.isEmpty()) {
      final Contact contact = contacts.pop();
      final PhysicsEntity a = bodies.get(contact.m_fixtureA.m_body);
      final PhysicsEntity b = bodies.get(contact.m_fixtureB.m_body);

      if (a != null && b != null) {
        if (a instanceof PhysicsEntity.IsContactListener) {
          ((PhysicsEntity.IsContactListener) a).contact(b);
        }
        if (b instanceof PhysicsEntity.IsContactListener) {
          ((PhysicsEntity.IsContactListener) b).contact(a);
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:47:52.307

万一有人遇到这种情况 - 经过一整天半的时间试图弄清楚这一点并创建一个单独的简单项目，将 1 个动态实体放到一个静态实体上并看到它做同样的事情。

如果你看到这种情况发生在实体停止移动但速度不断增加的地方——你输入的碰撞形状是向后的——我有 4 个顶点按 0、1、2、3 的顺序放入形状中——如果我把它们放进去作为 3,2,1,0 它会工作得很好。我想如果您遇到相同类型的问题，请尝试颠倒您创建形状的顺序并查看碰撞是否有效。

# ruby-on-rails - 通知：Ruby FayeClient - Node.js 或 Ruby - Redis pub/sub - Node.js

> ID：13329910
> 
> 赞同：1
> 
> 时间：2012-11-11T09:22:54.477
> 
> 标签：ruby-on-rails, websocket, redis, publish-subscribe, faye

我有点进退两难。我有 Rails 应用程序，它也使用 Faye 与 Node.js 服务器进行 websocket 通信（用于聊天和其他一些东西）。我们也已经将 redis 用于一些短期数据。

现在我想实现某种将存储在redis中的实时通知。我有两个选择：

*   我安装了 faye gem 并使用 faye 客户端直接发送消息。但这需要 EventMachine。如果可以避免的话，我倾向于拒绝添加很多新的不必要的东西。

*   我使用 redis 发布/订阅。从 rails 发送数据到 redis pub/sub 并订阅 Node.js 中的同一频道，然后将这些消息发布到 faye 频道。

关于采取哪种方法有什么建议吗？或者您是否有更好的解决方案？

# visual-studio - 在 vs2012 扩展中调用源代码控制比较操作

> ID：13329911
> 
> 赞同：3
> 
> 时间：2012-11-11T09:23:18.380
> 
> 标签：visual-studio, tfs, visual-studio-2012, vsx, visual-studio-extensions

我正在编写一个与 TFS 2010 对话的 vs2012 扩展（尽管我希望它也可以与 tfs2012 一起使用）。

我需要从扩展名中对文件调用比较操作。

我想使用创新时在 Visual Studio 中配置的默认比较工具（因为用户可以配置不同的比较工具）。

我有文件的位置，我希望能够调用以下内容：

*   打开默认比较。
*   打开与最新版本的比较
*   打开与工作区版本的比较

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T01:42:31.813

用于[`IVsDifferenceService`](http://msdn.microsoft.com/en-us/library/hh298810.aspx)从[VSPackage](http://msdn.microsoft.com/en-us/library/cc138589.aspx)调用 Visual Studio 差异工具：

```
private void Compare(string leftFile, string rightFile)
{
    var diffService = (IVsDifferenceService)GetService(typeof(SVsDifferenceService));
    if (diffService != null)
    {
        ErrorHandler.ThrowOnFailure(
            diffService.OpenComparisonWindow(leftFile, rightFile).Show()
            );
    }
} 
```

要对其进行测试，您需要设置工作区并下载要比较的文件：

```
 // TODO: add some error handling
    var tpc = new TfsTeamProjectCollection(new Uri("http://tfs.company.com:8080/tfs"));
    var vcs = tpc.GetService<VersionControlServer>();
    var workspace = vcs.GetWorkspace(Environment.MachineName, vcs.AuthorizedUser);

    string localItem = @"C:\workspace\project\somefile.cs";

    var folder = workspace.GetWorkingFolderForLocalItem(localItem);
    var item = vcs.GetItem(folder.ServerItem, VersionSpec.Latest);
    var latestItem = string.Format("{0}~{1}", localItem, item.ChangesetId);
    item.DownloadFile(latestItem);

    Compare(localItem, latestItem); 
```

参考：

```
using Microsoft.VisualStudio;
using Microsoft.VisualStudio.Shell;
using Microsoft.VisualStudio.Shell.Interop;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client; 
```

# python - l1 是一个列表，l2 = l1；为什么 "l2 = l2 + [item]" 不影响 l1 而 "l2 += [item]" 影响？

> ID：13329915
> 
> 赞同：3
> 
> 时间：2012-11-11T09:25:35.363
> 
> 标签：python, list

> **可能重复：**
> [加号等于（+=）在 Python 中做了什么？](https://stackoverflow.com/questions/2347265/what-does-plus-equals-do-in-python)

我注意到一个奇怪的问题：

```
 l1 = ['1', '2', '3']
    l2 = l1

    item = l2.pop(0)
    # the pop operation will effect l1
    print l1

    l2 = l2 + [item]
    # why "l2 = l2 + [item]" does't effect l1 while "l2 += [item]" does.
    print l2
    print l1 
```

输出是：

```
['2', '3']
['2', '3', '1']
['2', '3'] 
```

但如果我`l2 = l2 + [item]`变成`l2 += [item]`，输出将是：

```
['2', '3']
['2', '3', '1']
['2', '3', '1'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T09:43:58.413

`+`并且`+=`是不同的运算符，具有不同的内部含义，如此处[所述](http://docs.python.org/2/reference/datamodel.html#emulating-numeric-types)。

`l2 = l1 + x`调用`l2 = l1.__add__(x)`，如果这不起作用，它调用`x.__radd__(l1)`。两者都应该返回一个形成操作结果的新对象，独立于旧对象，因此不影响`l1`.

`l2 += x`调用`l2 = l2.__iadd__(x)`（“增强分配”），并且仅当这不起作用时，才回退到`l2 = l2 + x`如上所述。

对于数字，两者是相同的，因为它们是不可变的，因此不能用 修改`+=`，而在列表上，则在修改左侧`+`的对象时返回一个新对象。`+=`

随着后面的对象`l2`被修改并`l1`引用同一个对象，您`l1`也会注意到更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:35:08.267

分配后`l2 = l1`，`l2`是一样的`l1`。以下`pop`操作会影响两者`l1`，`l2`因为它们是相同的。

`l2 = l2 + [item]`创建一个新列表。所以`l2`现在是一个不同的对象。

`l2 += [item]``l2`就地修改。所以`l2`指向与 相同的东西`l1`。

代码执行的交互式可视化：

*   [第一的](http://pythontutor.com/visualize.html#code=l1+%3D+%5B%271%27,+%272%27,+%273%27%5D%0Al2+%3D+l1%0A%0Aitem+%3D+l2.pop%280%29%0A%0Al2+%3D+l2+%2B+%5Bitem%5D&mode=display&cumulative=false&py=2&curInstr=0_)
*   [第二](http://pythontutor.com/visualize.html#code=l1+%3D+%5B%271%27,+%272%27,+%273%27%5D%0Al2+%3D+l1%0A%0Aitem+%3D+l2.pop%280%29%0A%0Al2+%2B%3D+%5Bitem%5D&mode=display&cumulative=false&py=2&curInstr=0)

一些相关链接：

*   [Python 中的名称](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#python-has-names)。

*   [更多关于列表](http://henry.precheur.org/python/copy_list)

# c - 如何从 c 程序中打开带有 GUI 的文件夹？

> ID：13329918
> 
> 赞同：0
> 
> 时间：2012-11-11T09:26:02.627
> 
> 标签：c, macos, unix, filesystems, finder

我正在编写一个在 Mac OS 文件系统中搜索文件的程序。一旦我的程序找到文件，我想如何使用 finder 弹出 GUI 文件夹。这可能吗？我可以使用任何系统调用来使用 finder 打开目录吗？它是用 C 写的

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:29:54.323

我想你想使用`open`命令。您可以使用`open .`打开与当前目录对应的查找器窗口，或`open document.pdf`使用其对应的默认应用程序打开特定文档。

# php - PHP重用：“包含文件”和“函数”有什么区别？

> ID：13329924
> 
> 赞同：1
> 
> 时间：2012-11-11T09:26:41.590
> 
> 标签：php

在 PHP 中重用代码的“包含文件”和“函数”有什么区别？

我可以列举 1 个不同之处：使用函数时，调用者脚本无权访问函数本地变量，但在包含包含脚本时，可以访问包含脚本的本地变量。

其他的区别是什么？

什么时候应该使用“函数”，什么时候应该使用“包含文件”？

对于 DB 连接，通常使用哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T09:41:22.900

Functions are callable blocks of code. Usually created by the developer when that certain block of code is used multiple times. Instead of writing the same code in multiple places, you create a function and call it when needed.

Also, some developers create functions to make a certain task distinct in the code for readability and understandability. They use functions as "labels" as to what a certain block of code does. For example, I'd create a `readFile()` function for a certain block of code that reads files.

Includes on the other hand "merges" a file into the calling file as if it were coded into that file. This makes whatever was declared in the other file available in the current file in the scope that called it.

* * *

As for what to use, you use both.

To separate DB connection code from the current file, I'd create a DB Class in another file (like `dbcon.php`) containing all the properties and methods (functions) needed to interface with the DB.

Then, in the file that needs the DB connection (like `index.php`), it should use `include` to "merge-in" the file containing the DB Class for `index.php` to use the class definition.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T10:08:17.957

这似乎是一个显而易见的问题，但无论如何分享我们的经验还是很有趣的。

配置文件（即常量）的包含应该使用`require_once`. 因为没有它，您的系统将无法工作（需要），并且应该只包含一次（一次）。所以... `class`, `DB configuration`,`constants`和 core 文件应该被插入`require_once`而不是 with `include`，因为如果某些文件丢失，它会抛出一个致命错误并停止执行，从而防止错误链。

那么，我们什么时候可以使用`include`?

`include`应该用于`inclusion`更复杂的部分代码（例如包含其他内容）以及部分代码对您的系统来说不是强制性或必不可少的。例如，您可以考虑为视图包含一个模块。（包括一个处理 tpl 文件的 php 文件）。当我与其他开发人员在系统上工作时，我在想：有些部分是共享的（即数据库），有些部分是本地的。如果我修改共享部分中的某些内容导致其他开发人员包含失败，则不会对他们造成致命错误。（这只是一个例子）

现在：我应该什么时候使用`function`？

当您编写大量函数时，您可以使用包含的一个文件（或者，更好的是，必需的）并在需要时调用此函数之一。除了所有函数中的代码都被封装，防止与其他代码部分发生恼人的冲突（相信我：它经常发生，而且并不总是很容易找到错误）

好处：一个文件用于许多功能，并且所有代码都封装了。

# linux - 如何在 Linux 中实现同步同一程序的多个不同副本的信号量

> ID：13329942
> 
> 赞同：2
> 
> 时间：2012-11-11T09:31:11.717
> 
> 标签：linux, tcl, semaphore

我有一个可以多次运行的程序。该程序使用一个工作目录来保存/操作其运行时文件并放置结果。我想确保如果程序的多个副本同时运行，它们不会使用同一个文件夹。为此，我在创建工作目录时在工作目录中添加了一个隐藏文件，这意味着该目录正在被使用，并在程序退出时将其删除。当一个程序想要使用某个目录作为它的工作目录时，它会检查该文件是否存在，如果不存在，它将使用该目录，否则，它将使用带有其进程 ID 的同名目录。实现是：（在 Tcl 中）

开始时：

```
if [file exists [db_work_area]/.folder_used] {
    reg set work_area_override [db_work_area]_[pid]
}
...
exec touch ${db_wa}/.folder_used 
```

退出时：

```
if [file exists [db_work_area]/.folder_used] {
    file delete [db_work_area]/.folder_used
} 
```

这在一次打开一个程序的副本时有效，但是我担心如果同时打开多个程序副本，它们的同步就会出现问题。这意味着两个程序将一起检查文件是否存在，看看它没有都选择那个目录，只有在那之后，他们才会添加文件。如何实现能够在运行的同一程序的多个不同副本之间同步的信号量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T09:47:15.253

你不应该做一个`[file exists]`和以后的触摸，最好在获得许可的情况`open`下一步完成。`EXCL`

尝试使用这样的东西来创建文件，如果它已经以原子方式存在则失败。

```
if {[catch {open ${db_wa}/.folder_used {WRONLY EXCL CREAT}} fd]} {
    # error happend, file exists
    # pick a different area
} else {
    # just close it again, like a touch to create the file
    close $fd
} 
```

# matlab - MATLAB 更改矩阵元素

> ID：13329943
> 
> 赞同：0
> 
> 时间：2012-11-11T09:31:16.287
> 
> 标签：matlab

如何在条件下迭代矩阵并更改值..例如：我有大小为 100x100 的矩阵 m，我在做：

```
m(m<10)=func(elemnt); 
```

element 应该是迭代时的当前元素。我如何访问当前元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:34:14.970

尝试简单 `m(m<10)=func(m(m<10));`

例子：

```
m=[[1 2 3];[5 6 7];[8 9 10]]

m =
1    2    3
5    6    7
8    9   10

m(mod(m,3)==2) = m(mod(m,3)==2) * 5
m =
 1   10    3
25    6    7
40    9   10 
```

唯一的限制是您的自定义函数可以处理向量。

# sql-server - 是否可以使用 Transact SQL 监控事务复制

> ID：13329947
> 
> 赞同：6
> 
> 时间：2012-11-11T09:31:38.250
> 
> 标签：sql-server, replication, transactional-replication

我正在尝试使用 c# 应用程序中的事务 sql 监视连续复制状态。从我的 c# 应用程序中，我使用这个成功地开始了这项工作..

```
exec sp_startpushsubscription_agent
   @publication = 'myPublication',
   @subscriber = 'my_subscriber_server_name',
   @subscriber_db = 'my_subscriber_db' 
```

现在，我想知道我的同步是否完成或是否发生任何错误。该过程完成后，我想向用户发送成功消息。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:35:26.100

是的，我们可以使用 T-SQL 或使用复制管理对象 (RMO) 以编程方式监控复制。有关示例，请参阅以[编程方式监视复制](http://msdn.microsoft.com/en-us/library/ms147874.aspx)。

我更喜欢为此使用 RMO，启动代理并处理状态事件并在表单上显示代理状态。我在我的博客上有一个如何为合并代理执行此操作的示例：[http ://www.sqlrepl.com/sql-server/implementing-a-replication-agent-progess-bar/](http://www.sqlrepl.com/sql-server/implementing-a-replication-agent-progess-bar/)

可以对分发代理执行相同的操作。

# css - CSS定位：所有变种都试过了，没有进展

> ID：13329948
> 
> 赞同：1
> 
> 时间：2012-11-11T09:31:47.720
> 
> 标签：css, positioning

我已经阅读了有关类似问题的其他帖子。但这“有点”没有帮助。

案子：

在表格单元格中，我有一张拇指照片。它自己停靠在左上角，我没有任何指示。美好的。然后我想要提到那张照片的词。如果我什么都不做，它们会在图片下方对齐并平行于单元格的左侧。

理论：

我希望单词不是在图片下方而是在图片的右侧对齐。没有办法得到那个。

1.  忘记绝对定位，因为我们正在动态显示未知数量的行，因此与页面坐标相关的内容会很混乱。

2.  如果您尝试使用 margin-left、margin-right 等来定位它们，它也不起作用。原因：每个城镇的长度不一样，所以一个词好，另一个词不好。

3.  如果您尝试相对定位，它也将不起作用。原因：规则说相对的东西相对于元素的正常位置来定位依赖项。我们已经看到元素的正常位置是在图片下方发光，所以虽然我可以将它们相对于第一个元素定位，但事实证明第一个元素的位置是错误的，因此，所有依赖项都将是也。

如果我通过使用 marging-right 等将第一个元素定位在我想要的位置，其他元素的相对定位将不起作用，因为我想要的位置不是单词在文档中自身定位的位置。

我有这个元素：图片价格城镇区域是元素，除了图片

```
<tr class=<?php  echo $fila?>>

<td>
<?php echo "<img src= http://localhost/housing2/assets/uploads/thumbs/$oferta->thumb_a>"?>

<ul>

<li>
<div id ="listado"><?php echo $oferta->price?></div>
</li>

<li class = "listado.town">
<div id ="listado_town" ><?php echo $oferta->nombre_localidad?></div>
</li>

<li class = "listado.region">
<div id ="listado_region"><?php echo $oferta->nombre_region?></div>
</li>

<li class = "listado.m2">
<div id ="listado_metros" ><?php echo $oferta->m2?></div>
</li>

</ul>

</td> 
```

和CSS

```
.listado.town{position:relative; bottom:10px;}
.listado.region{position:relative;bottom:15px;}
.listado.m2{position:relative;bottom:20px;} 
```

但这只是我尝试过的 20 次事件之一。这个对齐图片下方和左侧的所有元素，实际上我认为它是如此不正确，以至于读者忽略了我的错误，然后它只是将它们对齐，因为它们自然会在文档中出现

其他组合：

考虑到指导标签是价格，我将其放置在文档中自然会出现的位置，正如我所说，它位于图片下方。然后我可以通过使用相对位置正确定位所有其余部分，是的，这很容易并且正如预期的那样，但是父级的价格，定位不正确：

会是这样

```
li.listado_town{position:relative; bottom:160px; left:130px;}
li.listado_region{position:relative;bottom:150px; left:130px;}
li.listado_m2{position:relative;bottom:140px; left:130px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:11:43.427

您可以通过告诉图像`float: left;` **并**确保表格单元格足够宽来实现这一点

```
td {
    min-width: 400px;
}
img {
    margin-right: 10px;
    float: left;
} 
```

*   看看这个：http: [//jsfiddle.net/zjA4f/](http://jsfiddle.net/zjA4f/)

或者，如果您不想指定表格宽度，则可以使`ul`元素内联。使用以下命令可以轻松地将其相对于图像定位的额外好处`vertical-align`：

```
img {
    margin-right: 10px;
    vertical-align: middle;
}
ul {
  display: inline-block;
  vertical-align: middle;
} 
```

​</p>

（见[http://jsfiddle.net/zjA4f/2/](http://jsfiddle.net/zjA4f/2/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:12:41.407

也许你应该给图片周围的宽度。接下来，您应该为单词添加另一个。

就像是：

```
<div>
     <div width="10px" style="float: left; margin-right:10px;">picture</div>
     <div width="10px" style="float: left;">
          <p>word</p>
          <p>word1</p>
          <p>.....</p>
          <p>word20</p>
     </div>
</div> 
```

[在此处](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_text-align)粘贴代码（先删除旧代码）并查看结果。

# php - Inpage urdu 到 unicode Urdu 转换器

> ID：13329949
> 
> 赞同：2
> 
> 时间：2012-11-11T09:32:02.633
> 
> 标签：php, unicode, converter

Inpage 是一个乌尔都语软件，我们可以用它来编写乌尔都语。我找到[了一个网站](http://www.urdu.ca)，它提供了将 Inpage Urdu Text 转换为 Unicode Urdu 的[功能](http://www.urdu.ca/convert)。

我想要 PHP 中的那个功能。有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T08:40:07.797

有一个开源 Inpage Urdu to Unicode Urdu Converter `Pak Inpage To Unicode Converter`，它是在 Vb.net 中开发的，但你可以得到线索。 [http://dl.dropbox.com/u/2700846/_InPageConverter.zip](http://dl.dropbox.com/u/2700846/_InPageConverter.zip)

开始：

1.  在文本框中复制 Inpage 文本。
2.  将此文本带入 PHP。
3.  将文本转换为字节数组。

    `for($i = 0; $i < strlen($inpage_data); ++$i) {`

    ```
    $inp_code = ord($inpage_data[$i]);

    if ($inp_code == 128)
     {
         $unicode_urdu = $unicode_urdu . 'ب';
     } 
    ```

    `} echo $unicode_urdu; ?>`

Inpage 中的每个单词都有唯一的代码，例如 Alif = 129、Bay = 128、Pay = 146。

现在在循环中相应地将页面内文本转换为 unicode Urdu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-24T02:54:24.600

虽然这是一个老问题，但我想回答它，以便它可以帮助其他仍在寻找解决方案的人

```
Converter converter;
std::wstring UrduUnicodeText = converter.inpageToUnicode(InpageText);
std::wstring InpageText = converter.unicodeToInpage(UrduUnicodeText); 
```

**在Github**上查看[此](https://github.com/umer0586/unicode-inpage-converter)源代码

# uitableview - 以编程方式更新 UITableView 以响应按钮按下

> ID：13329955
> 
> 赞同：0
> 
> 时间：2012-11-11T09:33:08.073
> 
> 标签：uitableview

我有一个完全自定义的视图，其中包含一个 UITableView 和一个自定义选项卡栏（基本上是一个包含 6 个 UIButtons 的 UIView）。

我正在从 plist 文件加载数据，然后根据类别将数据排序到多个数组中（杂项数组和邮件项数组等）

标签栏中的每个按钮都代表一个类别，当我按下按钮时，我调用自定义函数“miscSelected”等等。

如何让表格视图完全重新加载，然后根据所选数组显示表格视图（选择杂项类别，表格视图会自行清除并加载杂项数组数据，与任何其他类别相同）？

创建我尝试过的方法并将 NSString 命名为“selection”，然后在我设置的每个按钮功能中选择等​​于我选择的任何部分。在我的 cellForRoxAtIndexPath 方法中，我有这个：

```
if ([self.selection isEqualToString:@"All Items"]) {
        NSArray *mainDataArray = [NSArray arrayWithContentsOfFile:self.plistFile];

        NSSortDescriptor *brandDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
        NSArray *sortDescriptors = [NSArray arrayWithObject:brandDescriptor];
        self.sortedData = [mainDataArray sortedArrayUsingDescriptors:sortDescriptors];

    }
    else if ([self.selection isEqualToString:@"Misc Items"]){

        self.sortedData = [NSArray arrayWithContentsOfFile:self.plistFile];

    }

    cell.itemTitle.text = [[self.sortedData objectAtIndex:indexPath.row] objectForKey:@"name"]; 
```

为了示例和测试，我只是显示相同的数据，只有一个按钮按字母顺序显示，另一个不显示。

此代码仅在我开始向下滚动和向后滚动时才有效，但实际上并不会在按下按钮时更新。调用 myTable reloadData 也不做任何事情。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:57:37.233

所以我花了很多时间寻找更多，我找到了解决方案。对于任何可能想知道的人来说，这是一小段代码，如下所示：

```
[self.myTable performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO]; 
```

现在完美运行！

# c# - .net 3.5 的无边框 wpf 窗口行为

> ID：13329960
> 
> 赞同：3
> 
> 时间：2012-11-11T09:33:47.760
> 
> 标签：c#, .net, wpf

有谁知道如何在**.Net 3.5**中有一个无边框的 wpf 窗口？

基本上我试图在 mahapps metro 中使用相同的窗口，但在 .net 3.5 中。当我尝试在提到的库中使用无边界行为时，我在窗口的右/下侧得到一个厚厚的黑色边框。

我想避免**AllowsTransparency**并改用挂钩消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:38:17.847

如果你想完全摆脱边框，你必须将“WindowStyle”设置为“None”，将“ResizeMode”设置为“NoResize”或“CanMinimize”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:38:31.777

尝试将 设置`ResizeMove`为`NoResize`或`CanMinimize`。这将删除边框。

> NoResize 或 CanMinimize 摆脱了漂亮的阴影效果，我不想松动调整大小（带手柄）。

在这种情况下，您应该实现自己的阴影（不是那么难 - 只需将所有内容放入一个`Border`具有理想边距的内容中并设置`DropShadowEffect`）。`CanMinimize`仍将允许您调整窗口大小，但您仍必须[实现自己的调整大小](http://go4answers.webhost4life.com/Example/wpf-custom-window-resizing-101303.aspx)。

# php - 用于多个 URL 的 PHP DOM 解析器？

> ID：13329962
> 
> 赞同：0
> 
> 时间：2012-11-11T09:34:02.343
> 
> 标签：php, web-crawler

我尝试了很多不同的技术来加载和爬取多个 url，但它们都不起作用，我什至得到了 apache 错误。

现在我正在尝试从文件中加载 URL，但它不起作用，这里的一切对我来说都很好，所以这里是代码：

```
<?php
include_once('simple_html_dom.php');
$target_url = "array.htm";
$html = new simple_html_dom();
$links = $html->load_file($target_url);

foreach ($links as $link)
{
    echo $link;
}

?> 
```

我得到的错误`Warning: Invalid argument supplied for foreach() in C:\xampp2\htdocs\copy.php on line 7`

# linux-kernel - UDP 数据包突发丢失和 `SndbufErrors` 增加

> ID：13329963
> 
> 赞同：1
> 
> 时间：2012-11-11T09:34:12.187
> 
> 标签：linux-kernel, udp, packet-loss

我有一个服务器应用程序，它以 200Mbps 的速度发送 UDP 数据包。输出以太网接口为 1000Mbps。但是 UDP 数据包会在不规则的时间间隔内突发丢失。我注意到只要发生丢包问题，该字段就会增加`SndbufErrors`。如果UDP数据包被发送到接口，`/proc/net/snmp`则不存在丢包。`loopback`

**没有任何错误返回`udp.send`。**

我已经深入研究了 Linux 内核，但是当我到达路由子系统时我就不见了。

是什么`SndbufErrors`意思？为什么数量会增加？

# java - 如何验证表单然后提交到 url？

> ID：13329965
> 
> 赞同：-3
> 
> 时间：2012-11-11T09:34:22.360
> 
> 标签：java, jquery, forms, html, validation

我有根据输入字段中的值在提交时重定向到 url 的表单。但是，如果电子邮件不正确，我的表单仍会提交。我该如何解决？此表格的 URL 是 dokuchaeva.com/donate/ 。我需要验证的是电子邮件。现代浏览器验证它购买默认值。如果电子邮件字段错误，我会发出警报，但表单仍会提交。我需要根据插入的信息提交表单并重定向到预定义的 url。

```
 <form>
                <label>DONATION AMOUNT</label> <input name="price" id="price" class="button" value="100" required size="6" tabindex="1"> RUB<br><br>
                <label>YOUR E-MAIL</label> <input type="email" name="user_email" id="user_email" required="" placeholder="email@example.com" class="button" autofocus="autofocus" tabindex="0">
                <input type="submit" id="submit" value="SUBMIT" class="button" tabindex="3" onclick="location.href= 'http://secure.onpay.ru/pay/dokuchaeva?'+'pay_mode=fix&pay_for=donation&price='+$('#price').val()+'&currency=RUR&user_email='+$('#user_email').val()+'&pay_for=donation&convert=no&ln=en&url_success=dokuchaeva.com/donate/success.html&url_fail=dokuchaeva.com/donate/fail.html';">
            </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:38:28.713

使用 form.submit 函数，如果你返回 true，你知道表单提交已经被处理或应该被中止 - 作为回报，如果返回为 false，浏览器将正常发送表单。

```
<script>
   function validateme(form) {
       var isValid = false; // default, not true
       for(var el in form.elements) if(form.elements.hasOwnProperty(el) {
           // perform checks here
            if(form.elements[el].value == "") isValid = false;
       }
       return !(isValid);
   }
</script>
<form action="getUrlHereOrDocumentLocationIsUsed" submit="return validateme(this)">
 ...
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T09:46:27.430

首先。你需要指定你想要什么样的验证。

如果您只想要基于客户端的验证来处理表单数据而不提交。

检查非常方便的 Jquery Validation 插件。

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

如果您想要基于客户端和基于后端的验证。首先，您需要使用 JQuery 验证在客户端进行验证，然后提交表单并在后端使用您的验证逻辑。

例如，检查电子邮件是否已存在于数据库中，或者用户名是否已被使用等。

# javascript - Javascript & Canvas：轻微变形圆圈的无尽随机动画？

> ID：13329966
> 
> 赞同：1
> 
> 时间：2012-11-11T09:34:36.123
> 
> 标签：javascript, canvas, html5-canvas

我对它完全`canvas`陌生并用它来动画对象。我做了一些研究（例如，我找到[了 RaphaelJS](http://raphaeljs.com/animation.html)）但是我找不到任何关于如何创建“变形”圆圈的一般答案或教程。

![在此处输入图像描述](../Images/65c223b38b3c47c9ccc6ef99fdd97123.png)

我在这里发布的图像是我想做的：我想创建一个通过 a 动画并稍微改变其轮廓的`one`圆圈。`endlessly``randomizer`

我知道这对于这个论坛来说可能不是一个“真正的”问题，但我只是想知道是否有人可以提供一些关于如何做类似事情的提示或技巧。

通过“如何做这样的事情”，我实际上是在谈论如何使圆变形的技术。我是否必须“以数学方式”创建一个圆圈，该圆圈沿边缘有数十个受随机函数影响的锚点？

我真的很感激这方面的一些帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:39:53.223

一个圆可以通过 4 条三次曲线相当好地近似（每个四分之一和切线上的控制点 - 谷歌以获取控制段的正确长度或自己计算它们 - 请参见[此处](http://www.whizkidtech.redprince.net/bezier/circle/)。然后您可以随机为控制点设置动画小半径以获得摆动效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:39:36.043

> 我是否必须“以数学方式”创建一个圆圈，该圆圈沿边缘有数十个受随机函数影响的锚点？

是的，您可以，尽管不必创建“数十个”。

您可能会发现`.bezierCurveTo()`和`.quadraticCurveTo()`函数可用于在控制点之间提供平滑的插值曲线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:42:32.120

当您可以使用光栅图像时，您可以使用 sin 函数沿 x 轴对每个点进行位移。您可以沿 y 轴运行相同的函数，但要简单地置换像素，您可以将其加倍。这应该给你一个变形圆，但它也适用于其他形状。

# c - 递归函数中的内存泄漏

> ID：13329968
> 
> 赞同：6
> 
> 时间：2012-11-11T09:34:47.960
> 
> 标签：c, memory, recursion, fft, memory-leaks

这是我用 C 语言实现 Cooley-Tukey 算法的一个片段。是的，这是大学作业。但无论如何......该算法工作正常，但我必须释放 ar1 和 ar2 以消除大量输入数据上的巨大内存泄漏，但每次我尝试时，我都会得到无效读取。理论上，ar1 和 ar2 应该只由函数的当前实例使用，并且它们应该是唯一的，因为每个实例都分配自己的输出。

```
complex_exp * dft(complex_exp * from, int N, int s, int inverse) {

if(N == 1)
    return from;

int i;
complex_exp * transformed = (complex_exp *) malloc(N * sizeof(complex_exp));
complex_exp * ar1 = dft(from, N / 2, 2*s, inverse); //LINE 83
complex_exp * ar2 = dft(from + s, N / 2, 2*s, inverse); // LINE 84

for(i = 0; i < N/2; i++) {

    transformed[i] = ar1[i]; //LINE 88
}

for(i = N/2; i < N; i++) {
    transformed[i] = ar2[i - N/2];
}

//Do stuff with the transformed array - NO reference to ar1 or ar2.

free(ar1); //LINE 113
return transformed;
} 
```

Valgrind 说：

```
==69597== Invalid read of size 8
==69597==    at 0x100000EE6: dft (progtest05.c:88)
==69597==    by 0x100000EA2: dft (progtest05.c:84)
==69597==    by 0x100000E67: dft (progtest05.c:83)
==69597==    by 0x100000E67: dft (progtest05.c:83)
==69597==    by 0x100001A0E: main (progtest05.c:233)
==69597==  Address 0x100007250 is 64 bytes inside a block of size 256 free'd
==69597==    at 0xDCB8: free (vg_replace_malloc.c:450)
==69597==    by 0x1000011E5: dft (progtest05.c:113)
==69597==    by 0x100000E67: dft (progtest05.c:83)
==69597==    by 0x100000E67: dft (progtest05.c:83)
==69597==    by 0x100000E67: dft (progtest05.c:83)
==69597==    by 0x100001A0E: main (progtest05.c:233) 
```

因此，似乎在第 83 行调用 dft 会释放内存，然后在下一行调用 dft 会尝试访问该内存。知道实际发生了什么以及如何摆脱泄漏吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T09:43:56.880

您说“每个实例都分配自己的输出”，但是在此声明中并非如此：

```
if(N == 1)
    return from; 
```

也许当 N==1 时，您应该返回一个副本`from`（即 malloc 新内存，将 from 的内容复制到新内存中，然后返回副本）。

> 我怎样才能摆脱泄漏？

我希望您必须在返回转换之前释放 ar1 和 ar2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T09:42:27.077

解决这些问题的最佳方法是明确定义您的前置条件和后置条件。您是否假设返回的结果已被 malloc 处理？如果是这样，您似乎通过返回“from”以及未能释放“ar2”来违反此规定。如果您假设返回的结果不是 malloc 的，那么您需要确保此内存已由调用者提供，并且不返回 malloc 的内存。

# c# - 如何制作从列表派生的对象的深层副本

> ID：13329975
> 
> 赞同：3
> 
> 时间：2012-11-11T09:36:24.613
> 
> 标签：c#, list, deep-copy, derived

我有以下课程：

```
public partial class AuthorizationSetObject
{
   public AuthorizationObjectList AuthorizationObjects { get; set; }
}

public partial class AuthorizationObject
{
   public string Text { get; set; }
}

public partial class AuthorizationObjectList : List<AuthorizationObject>
{
} 
```

我现在需要 AuthorizationSetObject 的深层副本。我怎样才能做到这一点？

我试过这样：

```
public static bool CopyProperties(object source, object target)
{
    var customerType = target.GetType();
    foreach (var prop in source.GetType().GetProperties())
    {
        var propGetter = prop.GetGetMethod();
        if (propGetter != null)
        {
            PropertyInfo pi = customerType.GetProperty(prop.Name);
            if (pi != null)
                {
                var propSetter = pi.GetSetMethod();
                if (propSetter != null)
                {
                    var valueToSet = propGetter.Invoke(source, null);
                    propSetter.Invoke(target, new[] { valueToSet });
                }
            }
        }
    }
    return true;
} 
```

问题是 AuthorizationObjectList 不是真正的深拷贝。如果我在深层复制之后更改目标中的属性“文本”，则源中的“文本”会很好地更改。

可能我需要一个像“pi.PropertyType.BaseType.IsGenericType”这样的实现，然后做其他事情......但是什么？

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:28:05.170

对您的问题发表的评论都指向正确的方向。问题是，在这条线上

```
propSetter.Invoke(target, new[] { valueToSet }); 
```

valueToSet 是一个引用，这意味着您将对同一对象的引用添加到列表中。现在[ICloneable](http://msdn.microsoft.com/de-de/library/vstudio/system.icloneable.aspx)就位。如果 valueToSet 的类型实现[ICloneable](http://msdn.microsoft.com/de-de/library/vstudio/system.icloneable.aspx)你可以使用

```
propSetter.Invoke(target, new[] { valueToSet.Clone() }); 
```

相反，它将生成此实例的新深层副本。

# php - 使用 Gimp Image Filter 创建卡通图像

> ID：13329981
> 
> 赞同：0
> 
> 时间：2012-11-11T09:37:24.417
> 
> 标签：php, python, gimp

我想创建一个工具来获取图像并在过滤后返回相同的图像。使用 Gimp 我可以选择一个图像去过滤器->艺术->卡通。并将我的图像卡通化（或其他艺术选项）。有没有办法只使用命令行而不打开软件用户界面？如果没有我怎样才能获得包括图像过滤器的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T10:41:04.643

由于卡通滤镜是一个插件，所以您必须弄清楚如何调用卡通插件。

> （插件-卡通RUN-NONINTERACTIVE图像绘制蒙版-半径pct-黑色）

如果我查看附加到[http://registry.gimp.org/node/6697](http://registry.gimp.org/node/6697)的代码，应该可以解决问题。

因此，如果您采用[http://www.gimp.org/tutorials/Basic_Batch/](http://www.gimp.org/tutorials/Basic_Batch/)上的最后一个示例，并用上面的插件替换该行（并重命名批处理函数），它应该可以工作。 ..

# android - Basics : Sending a signal from an external hardware connected via USB port to android phone to make custom app do stuff

> ID：13329982
> 
> 赞同：4
> 
> 时间：2012-11-11T09:37:32.593
> 
> 标签：android

I just need some initial directions as I am new when it comes to electronic hardware and android phone/app interaction. I am comfortable in both domains within their boundaries.

I have a black box electronic circuit. To simplify things lets assume all it does is, send binary 1 or 0 i.e. electric On or Off pulse. I need to connect this circuit to the android phone via USB(either Host/accessory mode) and want my android app to react to this pulse.

If possible - start the app when the phone receives 1/ON signal OR display an "Switched ON" dialog message while the app is running in background as a service

Please dont worry too much about the electronics part. I'm aware that this is a software/programming forum.

e.g. black box : a electronic thermometer that sends a pulse/1/On signal if the temperature goes to 100 degrees Centigrade OR anything similar that's on a simple circuit board(no processor or programming language/architecture dependent) and could trigger a signal that could be sent to the android phone to inform my app that the event occurred.

another even simpler example, an earphone that has a connect/disconnect call button connected to audio jack of the android phone. i just need to replicate this functionality. instead or ear phone, my electronic BB and instead of phone call program, a custom android app.

Links, DIY projects, Tuts anything will be really helpful

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:27:19.957

这是一个很大的悬而未决的问题。我猜您要的是“真实世界 <=> Android”USB 接口。这需要一些硬件和一些软件。你可能想看看这里：

[http://www.yoctopuce.com/EN/products/usb-sensors/yocto-knob](http://www.yoctopuce.com/EN/products/usb-sensors/yocto-knob)

[http://www.yoctopuce.com/EN/article/sample-applications-for-android](http://www.yoctopuce.com/EN/article/sample-applications-for-android)

您可能还想看看比赛

www.phidgets.com

请注意，让 USB 设备与 Android 设备一起工作并不像听起来那么简单：您需要一个能够在主机模式下工作的 Android 设备，设备中使用的 Android 映像必须支持 USB 设备，并且您可能有一个如果设备应该从您计划使用的 USB 端口供电，则会出现电源问题。

经验表明，最便宜的 Android 设备越不可能与外来的 USB 设备兼容。

# javascript - 如何使用ckeditore通过ajax发送数据？

> ID：13329984
> 
> 赞同：5
> 
> 时间：2012-11-11T09:37:53.393
> 
> 标签：javascript, jquery, ajax, django

我在 Django 中有一个表格。这是“撰写邮件”表格。我将此表单从视图发送到我的模板，然后我应用 ckeditor 来更改正文样式。我希望这个表格由 ajax 发布。并且当使用 ckeditor 时，body 字段的值不会与 request.POST 一起发送。我使用这行代码来使用ckeditor：

```
CKEDITOR.replace('id_body'); 
```

（不使用ckeditor，一切正常。）

```
<form id="compose_form" action="compose/" method="post">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div>
            <div class="form-field">
                <label for="id_recipient">{% trans 'recipient' %}:</label>
                {{ form.recipient }}               
                {{ form.recipient.errors }}
            </div>
            <div class="form-field">
                <label for="id_subject">{% trans 'subject' %}:</label>
                {{ form.subject }}
                {{ form.subject.errors }}
            </div>
        </div>
        <div class="form-field">
            {{ form.body }}
            {{ form.body.errors }}
        </div>        
            <input id="messages-submit" type="submit" value=""Send"/>
        </div>
    </form> 
```

我使用这个脚本通过 ajax 发送表单数据：

```
<script type="text/javascript">
        $(function() {
            $('#compose_form').submit(function() {
                var temp = $("#compose_form").serialize();                
                $.ajax({
                    type: "POST",
                    data: temp,
                    url: 'compose/',
                    success: function(data) {
                      // do s.th
                    }
                });
                return false;
            });
        });
    </script> 
```

使用此脚本，正文值不会发送到 request.POST（我的意思是它在正文字段中发送空字符串），当我将以下行添加到我的脚本时，它会发送正文字段的值，但它不是 ajax 任何更多的。你能帮我做什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T10:31:29.310

编辑器中的数据不包含在表单中的原因是编辑器不是表单的一部分。它需要更新您与之关联的表单元素。为此，您需要告诉编辑器更新表单元素。

因此，在表单的提交功能中，您需要从编辑器中获取数据。

这应该可以解决问题：

```
$(function() {
        $('#compose_form').submit(function() {
            for (var instance in CKEDITOR.instances)
                CKEDITOR.instances[instance].updateElement();
            var temp = $("#compose_form").serialize();
            etc etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-31T09:50:33.057

我对 django-ckeditor 也有同样的问题，我尝试的是

```
<script type="text/javascript">
     for (var instance in CKEDITOR.instances)
            CKEDITOR.instances[instance].updateElement(); 
```

然后通过以下方式检查实例名称：

```
console.log(instance) 
```

它给了“id_Your_Message”，所以我做了：

```
var temp = $("#id_Your_Message").val() 
```

它工作正常

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T10:36:47.967

```
<script type="text/javascript">
    $(function () {
        $('#submit_button_id').click(function () {
            $.post("action post file url", $("#form_id").serialize(), function (data) {});
        });
    });
</script> 
```

我希望上面的脚本可以帮助你

# objective-c - Groundcontrol 示例，在我的服务器上使用 .plist

> ID：13329991
> 
> 赞同：0
> 
> 时间：2012-11-11T09:38:50.567
> 
> 标签：objective-c, xcode, nsuserdefaults, afnetworking

我的问题是[地面控制示例](https://github.com/mattt/GroundControl)。当我使用默认 url 来获取消息问候时，它可以工作，但是当我将其更改为我自己服务器上 plist 的 URL 时。没有消息出现，它只是空白。

我要更改为自己的服务器的行如下：

```
static NSString * const kGroundControlDefaultsURLString =
@"http://ground-control-demo.herokuapp.com/defaults.plist"; 
```

我已经尝试下载确切的 plist 文件并将其上传到我的服务器，但这甚至不起作用。

在浏览器中访问文件时，我注意到一个不同之处，在上面的示例链接中，它会自动下载，但在我自己的服务器上，它会在服务器中打开。

所以然后我尝试将以下内容添加到我的 .httaccess 文件中，以使我自己的服务器上的文件也自动下载，它在添加后完成了，但也无法从应用程序运行。

```
<FilesMatch "\.(?i:plist)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

调试器在失败时什么也不吐，当它工作时（来自示例 URL）它吐出以下内容：

```
2012-11-11 17:18:40.163 GroundControl Example[13804:f803] 
NSUserDefaultsDidChangeNotification: NSConcreteNotification 0x68b9e40 {name = 
NSUserDefaultsDidChangeNotification; object = <NSUserDefaults: 0x6e83400>} 
```

所以这是我的问题，基本上我想做的就是通过将 .plist 文件上传到我的服务器并使用地面控制来使用它来使文​​件正常工作。

感谢 Stackoverflow 的帮助。

如果有帮助，这是一些groundControl代码。

-来自 AppDelegate.m

```
static NSString * const kGroundControlDefaultsURLString = @"http://ground-control-demo.herokuapp.com/defaults.plist";

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[NSUserDefaults standardUserDefaults] registerDefaultsWithURL:[NSURL URLWithString:kGroundControlDefaultsURLString]];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

-来自 ViewController.m

```
@implementation ViewController

- (void)updateValues {
    self.greetingLabel.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"Greeting"];
}

#pragma mark - UIViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserverForName:NSUserDefaultsDidChangeNotification object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *notification) {
        NSLog(@"NSUserDefaultsDidChangeNotification: %@", notification);
        [self updateValues];
    }];

    [self updateValues];
} 
```

* * *

**解决方案**

根据 Jake Bonham 的评论，

在我的服务器上更改我的 .httaccess 文件中的这一行，使用 GroundControl 类和所有。

```
ForceType application/octet-stream 
```

**八位字节流到 x-plist**

```
<FilesMatch "\.(?i:plist)$">
  ForceType application/x-plist
  Header set Content-Disposition attachment
</FilesMatch> 
```

也许这也有帮助

首先将 plist 加载到字典中。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

//THIS IS THE PART THAT I CHANGED
 NSURL* url = [NSURL URLWithString:@"http://mydomain.org/defaults.plist"];
 NSDictionary* dict = [NSDictionary dictionaryWithContentsOfURL:url];
    [[NSUserDefaults standardUserDefaults] registerDefaults:dict];
//AND FINALLY LOAD dict INTO NSUserDefaults

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:19:49.800

我也遇到了这个问题。注销错误响应说它需要类型“application/x-plist”并从我保存的 .plist 文件中获取“application/octet-stream”。

您的解决方案删除了​​ GroundControl 类。您正在将 url 加载到 dict 中，然后将其保存到用户默认值。所以它有效。只是不使用地面控制。

# c# - Make image slideshow in wpf

> ID：13329995
> 
> 赞同：1
> 
> 时间：2012-11-11T09:39:22.710
> 
> 标签：c#, wpf, image, animation, slideshow

I'm trying to create an image slideshow just like this one on this page: [http://forum.xda-developers.com/forumdisplay.php?f=1914](http://forum.xda-developers.com/forumdisplay.php?f=1914) If you mouseover the image of the tablet, two arrows appear and you may slide through these images.

How to achieve this with wpf? I want to create it just like on the page, I press the right arrow and the current image moves left out of sight and the new image comes to the center from the right.

The application should be resolution independet, so working with a canvas isn't possible I guess.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T09:51:13.673

在不为您编写代码的情况下给出该问题的一般答案（这是您的任务）：

创建`Grid`一个图像大小的图像。创建一个`Canvas`设置`HeightProperty`为图像的高度和`WidthProperty`宽度*数量的图像的总和。

接下来，将箭头和画布的两个图像添加到网格中并正确定位它们。

倒数第二件事。为网格创建一个事件，将箭头`MouseEnter`的属性更改为，并将其设置为。`IsVisible``true``MouseLeave``false`

最后一件事。为两个箭头图像创建事件，`LeftMouseButtonDown`这将触发一个动画，该动画`Margin.Left`将画布的属性更改为一个图像的宽度。