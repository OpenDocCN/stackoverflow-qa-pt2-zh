# StackOverflow 问答 15767000-15767999

# python - Django：将 request.FILES 放入 request.SESSION

> ID：15767007
> 
> 赞同：1
> 
> 时间：2013-04-02T14:39:26.157
> 
> 标签：python, django, django-sessions, django-file-upload

我正在尝试将 request.session 字段放在我的 request.session 中以供以后使用。但是当我简单地写：

```
request.session['fileInfo'] = request.FILES 
```

我总是收到这个错误：

```
Pickilng error: Can't pickle <type 'cStringIO.StringO'>: attribute lookup cStringIO.StringO failed 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:42:24.633

问题是会话使用名为`pickle`. `pickle`必须能够转换会话中的所有对象`dict`。

对象`request.FILES`不是。`pickle-able`

# c# - 模拟器中的线程和定时器

> ID：15767012
> 
> 赞同：0
> 
> 时间：2013-04-02T14:39:48.137
> 
> 标签：c#, .net, multithreading, gdi, emulation

我正在用 C# 开发一个 Chip-8 模拟器，我已经完成了几乎所有方面的部分工作，但我仍然想知道模拟器的速度控制。

我现在正在做的是假设我每秒获得 60 帧，我使用一个以以下方式触发 1/60 秒的计时器（伪代码）：

```
timer_ticked()
{
    for(int i = 0; i < Settings.CyclesPerFrame; i++)
    {
        EmulateCycle();
    }

    if (IsDrawFlagSet)
    {
        DrawGraphics();
    }
} 
```

[我正在使用一个名为 microtimer http://www.codeproject.com/Articles/98346/Microsecond-and-Millisecond-NET-Timer](http://www.codeproject.com/Articles/98346/Microsecond-and-Millisecond-NET-Timer)的高分辨率计时器，我相信计时器不会等待 timer_ticked 完成触发下一个周期（fon 实例，创建一个新线程）我遇到了线程和表单问题，因为尝试使用 GDI 绘制到窗口（使用 control.GetGraphics() 方法）似乎是线程安全的，但试图创建一个 SDLDotNet 方法（只是一个例子）没有。

您认为哪种方法可以最好地控制模拟器的速度，而不会陷入计时器线程的疯狂状态？

PS：模拟器的源码可以在GitHub上找到：[https ://github.com/AlFranco/C8POC](https://github.com/AlFranco/C8POC)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:03:09.667

如果您在完成之前再次调用打勾方法，则问题不在于您的计时器。这是因为处理时间超过了 16.6 毫秒。获得更好的计时器并不能解决您的问题。

也就是说，您可以通过几种方式防止重入。

您可以在输入回调时禁用计时器，并在完成后重新启用它。这将防止多次调用：

```
timer_ticked()
{
    timer.Enabled = false;
    // do stuff here
    timer.Enabled = true;
} 
```

请注意，这并不能为您提供完美的 16.6 毫秒滴答频率。相反，下一个滴答声将在您启用计时器后 16.6 毫秒（大约）发生。您的实际周期是 16.6 毫秒加上处理所需的时间。

唯一会失败的情况是`timer_ticked`在下一次滴答发生之前没有调用该方法。

如果您想保证无法获得并发滴答，可以使用 a`System.Threading.Timer`并将其设置为一次性（无周期性信号）。例如：

```
Timer myTimer = new Timer(timer_tick, null, 16, -1); 
```

最后`-1`一个参数中的 告诉它不是周期性计时器。它会触发一次并停止。

然后，在你的计时器滴答声中：

```
timer_tick()
{
    // do stuff
    // restart the timer
    myTimer.Change(16, -1);
} 
```

## 编辑

如果处理程序仍在处理前一个滴答声，您不能轻易告诉计时器不要发出滴答声。但是，您可以阻止计时器滴答处理程序在后续滴答中执行任何操作。您只需使用`Monitor`：

```
private object timerLock = new object();
timer_ticked()
{
    if (!Monitor.TryEnter(timerLock))
        return;
    try
    {
        // do stuff here
    }
    finally
    {
        Monitor.Exit(timerLock);
    }
} 
```

这种解决方案的问题在于，如果您的计时器设置为 16 毫秒并且处理程序需要 17 毫秒，那么您的有效更新率将是每 32 毫秒一次，因为第二个滴答基本上被忽略了。你最好使用一次性计时器交易。

另一种可能性是使用 a `Stopwatch`to time 你的处理程序需要多长时间，并从下一个延迟期中减去它：

```
timer_ticked()
{
    var sw = Stopwatch.StartNew();
    // do stuff
    timer.Change(16-sw.ElapsedMilliseconds, -1);
} 
```

但这并不是那么简单。如果处理程序完成它的时间超过 16 毫秒，那么您最终会得到一个负延迟。所以你会想要：

```
var delayTime = Math.Max(0, 16 - sw.ElapsedMilliseconds);
timer.Change(delayTime, -1); 
```

但是同样，如果您的处理程序经常花费比计时器延迟更长的时间，那么这对您没有帮助。您要么必须降低定时器频率（即延长延迟），要么优化处理代码。

# javascript - 如何获取 javascript 本身的查询字符串值？

> ID：15767016
> 
> 赞同：0
> 
> 时间：2013-04-02T14:40:00.247
> 
> 标签：javascript

在 mytest.html 我包括这个：

```
<html><head>
<script type="text/javascript" src="/myjavascript.js?foo=bar"></script>
</head>
<body>Hi</body>
</html> 
```

在 myjavascript.js

```
alert(this.location.search); 
```

这显示了查询字符串 mytest.html 但我想要 javascript 本身的查询字符串“foo = bar”或只是“bar”。

关于如何做到这一点的任何想法都会很棒。（我在想也许我需要阅读脚本元素的 html 并解析该文本。但我希望这是一种更简单的方法。）

如果有简单的方法，我也可以使用 JQuery 来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:42:22.033

当脚本运行时，它是页面上加载的最后一个东西。特别是，这也使它成为当前时间的最后一个脚本元素。

所以，考虑到这一点，试试这个：

```
var scripts = document.getElementsByTagName('script'),
    lastscriptsrc = scripts[scripts.length-1].getAttribute("src"),
    search = lastscriptsrc.substr(lastscriptsrc.indexOf("?")); 
```

编辑：你也可以单行，虽然它的可读性较差：

```
var search = [].pop.apply(document.getElementsByTagName('script')).getAttribute("src").replace(/.*\?/,""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:28:58.800

我接受了 Kolink 的回答。正如评论所指出的，我不是 100% 相信这将是最后一个脚本（似乎有效）。所以下面更明确地说明了哪个脚本 src。

这是我使用 Kolink 回答来帮助我的 JQuery 回答：

```
var scriptsrc = $("script[src*='myjavascript']").attr("src");
var search = scriptsrc.substr(scriptsrc.indexOf("?"));
alert("search:" + search); 
```

非常感谢你在这方面的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T10:59:01.077

试试这个

```
var qrStr = window.location.search;
var spQrStr = qrStr.substring(1);
var arr = new Array();
arr = spQrStr.split('&');
for (var i=0;i<arr.length;i++)
{
    var queryvalue = arr[i].split('=');
    alert("Name: "+queryvalue[0]+" Value: "+queryvalue[1]);
} 
```

# objective-c - 在 Objective C 中添加一个监听器来激活键盘输入设备

> ID：15767021
> 
> 赞同：1
> 
> 时间：2013-04-02T14:40:16.730
> 
> 标签：objective-c, macos, assistive-technology

我想在我的应用程序中创建一个侦听器，当用户将焦点设置到任何应用程序中的文本输入元素时会收到通知（本质上是在最前面的应用程序中有闪烁的文本光标时收到通知）。我正在尝试使用它来通知外部硬件设备用户想要输入文本，并切换到文本输入模式。

我已经通过 NSObserver、共享工作区通知中心等，但没有找到类似的东西。可能吗？

我想我可以尝试不断地轮询当前的焦点对象，但我宁愿有一个监听器。

# javascript - yepnope / modernizr.load 全局完成回调？

> ID：15767024
> 
> 赞同：1
> 
> 时间：2013-04-02T14:40:22.110
> 
> 标签：javascript, modernizr, assets, yepnope

加载所有文件后是否可以触发全局完成回调？前任：

```
yepnope(['file1.js', 'file2.js']) 
```

....一些 html....

```
<script>
    yepnope({complete: function() { console.log('This is getting called before the above files finish loading') });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:56:07.997

您是否尝试过类似以下的方法？

```
Modernizr.load([

  {
  load : ["file1.js", "file2.js"],
  complete : function()
  {
  // do some stuff
  }
  } // can repeat this block as required

]); 
```

祝你好运！

# css - 转换 - 当我将 html 内容转换为 pdf 时，旋转和缩放不起作用

> ID：15767027
> 
> 赞同：5
> 
> 时间：2013-04-02T14:40:25.837
> 
> 标签：css, rotation, transform, scale, html2pdf

我正在使用 html2pdf 将带有图像的 HTML 内容转换为 PDF，并且我还添加了一个旋转和翻转图像的选项......现在 pdf 已成功创建......但是如果我使用 CSS 旋转或翻转了任何图像 `transform: rotate(90deg);`

```
transform:scaleX(-1); 
```

然后在 PDF 文件中，该图像看起来没有旋转或翻转...任何解决此问题的想法...请分享...或任何解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-07-19T02:21:30.550

使用“-webkit-transform”而不是“transform”。例如：

```
 -webkit-transform: rotate(90deg); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T15:11:53.297

尝试 wkhtmltopdf，它也适用于 css 转换（但仅使用 -webkit 前缀）

[https://code.google.com/p/wkhtmltopdf/](https://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-30T09:48:39.417

我重新发布这个旧帖子。对于仍在寻找使用 CSS3 和 HTML5 最新功能的 wkhtmlToPdf 或 wkhtmlToImage 的替代品的人来说，由于这个 github 问题，我在这里找到了两个工具：

[https://github.com/wkhtmltopdf/wkhtmltopdf/issues/4092](https://github.com/wkhtmltopdf/wkhtmltopdf/issues/4092)

所以有两个很棒的工具可以直接使用 Chromium 浏览器，我使用的一个是**[Pupputer](https://github.com/puppeteer/puppeteer)**，它允许你通过 Node.js 代码使用它（所以这对 Node.js 网络服务器来说是一件好事！），截图网页并将其转换为 pdf 或图像。

**它还允许您选择基于铬的浏览器！！！**（使用 puppeteer-core 而不是 puppeteer 用于轻型版本并使用外部铬）

我尝试了一下，它只是渲染了一个与您在 chromium 浏览器上看到的相同的屏幕截图，我使用了CSS 属性的`rotateX, rotateY, rotateZ`with`perspective`并且工作得很好。

享受 ！！！

> 木偶师：[https ://github.com/puppeteer/puppeteer](https://github.com/puppeteer/puppeteer)

> ChromeHtmlToPdf：[https ://github.com/Sicos1977/ChromeHtmlToPdf](https://github.com/Sicos1977/ChromeHtmlToPdf)

下面是一个简单的代码，可以在本地使用 Node.js 进行尝试：

```
// I use here the light version so I can choose my default chromium browser that I used on my Windows
    // to install it :
    // npm -i puppeteer-core
    const puppeteer = require('puppeteer-core');
    (async ()=>{
        // path to my default browser, idk if it's work with opera or other chromium based browser
        const browser = await puppeteer.launch({ executablePath: 'E:/Programmes/chrome-win/chrome.exe' });
        const page = await browser.newPage();

        // the default size if 800 * 600
        await page.setViewport({
            width: 800,
            height: 533,
            deviceScaleFactor: 1,
        });

        // the page targeted that I want the screenshot
        await page.goto('http://localhost/Fiverr/3dAxis/temp/2_photo2.jpg.html');

        // the output
        await page.screenshot({ path: 'example.png' });
        await browser.close();
    })(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-06T02:03:01.043

尝试`style="-webkit-transform: rotate(-90deg);"`而不是变换。

它适用于**html-pdf**和**html2pdf**转换器。

# sql - 更新记录时出现“ORA-00903: 无效的表名”错误

> ID：15767034
> 
> 赞同：12
> 
> 时间：2013-04-02T14:40:48.547
> 
> 标签：sql, oracle

我有这张桌子叫`iowe`。它*已*创建并存在于我的数据库中。这是它的样子：

```
名称 数量 序列号
---------- ---------- -------------
普拉文 20500
肉山 5000 2
罗希特 5000 3
沙市7500 4

```

当我尝试通过输入命令更新与名称 Praveen 对应的序列号时

```
update table iowe
set "Serial Number" = 1 where amount = 20500 
```

或者

```
update table iowe
set "Serial Number" = 1 where name = 'Praveen' 
```

我收到以下错误：`ORA-00903: invalid table name`

其他命令在此表上执行良好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T14:46:35.590

您不需要[更新语句](http://docs.oracle.com/cd/E11882_01/server.112/e10592/statements_10008.htm)`table`中的关键字：

```
update iowe
set "Serial Number" = 1
where amount = 20500 
```

正如你所拥有的，它正在寻找一个*名为* `'table`'的表，同时给它*别名*' `iowe`'。

与问题无关，但我也真的建议不要给对象混合大小写或非标准名称，因为您必须引用它们 - 就像您使用`"Serial Number"`. 我还没有看到一个案例可以证明增加的复杂性和混淆的机会是合理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:46:45.013

从更新语句中删除单词“table”：

```
update iowe
set "Serial Number" = 1 
where name = 'Praveen' 
```

# r - 为什么 R 函数中拼写不完整的名称可以找到匹配项？

> ID：15767036
> 
> 赞同：3
> 
> 时间：2013-04-02T14:40:56.493
> 
> 标签：r, function

```
f=function(s,abc=0,def=0) {
  return(s+def)
}

f(3)
[1] 3
f(3,d=4)
[1] 7 
```

为什么R将“d”与“def”匹配？

是否有一条规则规定，当在函数中找不到变量的名称时，R 将自动匹配大写字母与其相同的名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T14:45:15.390

这在 R 语言定义的[参数匹配](http://cran.r-project.org/doc/manuals/R-lang.html#Argument-matching)部分中进行了描述。

> 本小节适用于闭包，但不适用于原始函数。后者通常会忽略标签并进行位置匹配，但应查阅其帮助页面以了解例外情况，包括 log、round、signif、rep 和 seq.int。
> 
> 函数评估中发生的第一件事是将形式与实际或提供的参数匹配。这是通过三遍过程完成的：
> 
> 标签上的精确匹配。对于每个命名提供的参数，在形式参数列表中搜索名称完全匹配的项目。相同的形式参数匹配多个实际值是错误的，反之亦然。
> 
> 标签的部分匹配。使用部分匹配将每个剩余的命名提供参数与剩余的形式参数进行比较。如果提供的参数的名称与形式参数的第一部分完全匹配，那么这两个参数被认为是匹配的。有多个部分匹配是错误的。注意 if `f <- function(fumble, fooey) fbody`, then`f(f = 1, fo = 2)`是非法的，即使第二个实际参数只匹配`fooey`。`f(f = 1, fooey = 2)`虽然是合法的，因为第二个参数完全匹配并且不考虑部分匹配。如果形式参数包含“...”，则部分匹配仅适用于它之前的参数。
> 
> 位置匹配。任何不匹配的形式参数都按顺序绑定到未命名的提供参数。如果有一个 '...' 参数，它将占用剩余的参数，无论是否标记。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T14:51:27.997

有三种主要的方法来匹配参数。这些在[R Language Definition的](http://cran.r-project.org/doc/manuals/r-patched/R-lang.html)[Argument Matching](http://cran.r-project.org/doc/manuals/r-patched/R-lang.html#Argument-matching)部分进行了讨论，我在下面复制了相关部分：

> 函数评估中发生的第一件事是将形式与实际或提供的参数匹配。这是通过三遍过程完成的：
> 
> 1.  **标签上的精确匹配**。对于每个命名提供的参数，在形式参数列表中搜索名称完全匹配的项目。相同的形式参数匹配多个实际值是错误的，反之亦然。
> 2.  **标签上的部分匹配**。使用部分匹配将每个剩余的命名提供参数与剩余的形式参数进行比较。如果提供的参数的名称与形式参数的第一部分完全匹配，那么这两个参数被认为是匹配的。有多个部分匹配是错误的。注意 if `f <- function(fumble, fooey) fbody`, then`f(f = 1, fo = 2)`是非法的，即使第二个实际参数只匹配`fooey`。 `f(f = 1, fooey = 2)`虽然是合法的，因为第二个参数完全匹配并且不考虑部分匹配。如果形式参数包含`...`，则部分匹配仅适用于它之前的参数。
> 3.  **位置匹配**。任何不匹配的形式参数都按顺序绑定到未命名的提供参数。如果有`...`参数，它将占用剩余的参数，无论是否标记。

请注意，这是正常功能发生的情况。原始函数在 R 中是特殊的。原始函数在许多方面都很特殊，并且总是不使用标签，而是使用位置匹配。然而，这并没有始终如一地应用。

另一个重要的例外是包含参数的函数中的`...`参数。如上所述，如果一个参数出现*在函数的参数列表之后，* **如果**位置匹配未应用于这些参数`...`，则必须在对该函数的调用中命名该参数。例如：

 **```
foo <- function(x, ..., y) {
    y
} 
```

传递值的唯一方法`y`是在函数调用中为其命名，例如：

```
foo(y = 1) 
```**

# frameworks - 缺少属性时，代码优先实体框架会变慢

> ID：15767037
> 
> 赞同：0
> 
> 时间：2013-04-02T14:40:59.797
> 
> 标签：frameworks, ef-code-first, entity

我正在使用实体框架 4.3.1 代码优先。

我有一个非常简单的表达式和实体模型。

```
using (var PMCtx = new PMContext("PMEntities"))
{        
     var results =
            PMCtx.Fetch<vwSDHOriginalMW>()
            .Where(x => x.DT >= StartDate && x.DT < EndDate)
            .ToList();
     return results;
}

public class vwSDHOriginalMW : IEntityObject, IPMContext
{
    public int Schedule { get; set; }
    public DateTime DT { get; set; }
    public int HE { get; set; }
    public Decimal OrgMW { get; set; }        
    public Decimal DELIVERMW { get; set; }
    public string NERCCode { get; set; }
    public string NERCCodeStatus { get; set; }
    public int SDHSDHID { get; set; } 
} 
```

每次都需要 15 秒，而不仅仅是第一次。该模型映射到 Sql Server 2008 数据库中的视图。我输出了 EF 发送的查询，并在 SSMS 中运行它，只花了几分之一秒。

为什么在实体框架中这么慢？

IEntityObject 似乎是一个标记接口，因此原始程序员可以确定这些是唯一放入泛型的。

EDIT 1 Fetch 最终通过一些层包装器到达它执行此操作的数据层：

```
private DbSet<TEntity> FetchSet<TEntity>()
        where TEntity : class, IEntityObject
{
        Type PassedType = typeof(TEntity);
        if (!CheckedTypes.Any(x => x.FullName == PassedType.FullName))
            if (!PassedType.GetInterfaces().Any(x => CtxInterfaces.Contains(x)))
                throw new ArgumentException("Type passed is not a DbSet type of constructed context.");
            else
                CheckedTypes.Add(PassedType);

        return privateContext.Set<TEntity>();
} 
```

EF 正在发送的查询的清理示例

```
SELECT  [Schedule], 
    [DT], 
    [HE], 
    [OrgMW], 
    [DELIVERMW], 
    [NERCCode], 
    [NERCCodeStatus], 
    [SDHSDHID], 
    [ScheduleDeliveryHourHistoryID]
FROM    [vwSDHOriginalMW]
WHERE ([DT] >= '2/17/2013') AND ([DT] < '2/21/2013') 
```

编辑 2 数据库中的视图实际上比我的实体模型的属性多一列。我将属性添加到模型中。

```
public class vwSDHOriginalMW : IEntityObject, IPMContext
{
    public int Schedule { get; set; }
    public DateTime DT { get; set; }
    public int HE { get; set; }
    public Decimal OrgMW { get; set; }        
    public Decimal DELIVERMW { get; set; }
    public string NERCCode { get; set; }
    public string NERCCodeStatus { get; set; }
    public int SDHSDHID { get; set; } 
    //missing property
    public int ScheduleDeliveryHourHistoryID { get; set; }

} 
```

昨天加了属性后，有一阵子加速非常快，跑了4秒而不是15秒。但是今天又变慢了，什么都没变。

更新：我进一步缩小了范围。我可以使用两种方法，最终使用相同的 FetchSet。我正在使用的返回一个 IQueryable 而不是 IEnumerable。这看起来很正常，而且因为我是在之后过滤的，所以这是最可取的。但是，返回 IQueryable 的方法需要 15 秒，而 IEnumerable 需要不到一秒。（我在两者上都调用 ToList()） FetchAll 原来只是一个调用 Fetch 并返回 IEnumerable 而不是 IQueryable 的包装器

```
public IQueryable<TEntity> Fetch<TEntity>() where TEntity : class, Common.IEntityObject
{
    return privateContext.Fetch<TEntity>();
}

public IEnumerable<TEntity> FetchAll<TEntity>() where TEntity : class, Common.IEntityObject
{
        return privateContext.FetchAll<TEntity>();
} 
```

如果我改变

```
IEnumerable<vwSDHOriginalMW> results =
                   PMCtx.Fetch<vwSDHOriginalMW>()
                   .Where(x => x.DT >= StartDate && x.DT < EndDate)
                   .ToList(); 
```

到

```
IEnumerable<vwSDHOriginalMW> results =
                   PMCtx.Fetch<vwSDHOriginalMW>()
                   .ToList()
                   .Where(x => x.DT >= StartDate && x.DT < EndDate); 
```

它很快。但这是不可接受的，因为我似乎希望将 where 子句传递给数据库。在这种情况下，在开发环境中，视图只有 180 行，但它有可能达到数百万行，所以我绝对不想在过滤它们之前将所有结果返回到内存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:12:47.307

经过大量挖掘和许多头痛之后，我发现该视图正在引用另一个数据库实例上的视图，该实例引用了一个缺少非聚集索引的表。这导致执行计划被错误地缓存。在另一个数据库上添加索引后：

```
USE [OTHERDATABASE]
GO
CREATE NONCLUSTERED INDEX [IX_ScheduleEnergyProfileJoin]
ON [dbo].[WTXS_ScheduleEnergyProfile] ([SEQSDR])
INCLUDE ([SEQSEPI],[StartDate],[EndDate])
GO 
```

然后使用我正在使用的视图清除数据库上的执行计划缓存：

```
USE [MYDATABASE]

DBCC FREEPROCCACHE
DBCC DROPCLEANBUFFERS 
```

查询正在快速运行。所以事实证明，EF 说它使用的 SQL 可能不是发送到数据库的 sql。故事的寓意是，我应该通过任何困难来获得对该数据库的分析权限，而不是依赖以下内容来输出实际发送的 SQL。

```
var sql = ((System.Data.Entity.Infrastructure.DbQuery<vwSDHOriginalMW>)results).ToString(); 
```

# python - Python-使用导入的 CSV 数据自动命名变量

> ID：15767065
> 
> 赞同：1
> 
> 时间：2013-04-02T14:42:15.110
> 
> 标签：python, oop, csv, eval

我对 python 有点陌生，坚持 6.00x（2013 年春季）课程。我希望尝试一些我新发现的知识，但似乎已经过火了。

这个想法是将包含我的银行对帐单的 CSV 文件导入到 python 中。然后我希望将每个事务变成一个类的实例。然后我希望开始使用数据来看看我能做些什么，但我似乎连第一个障碍都失败了，让事情很好地适合我的面向对象程序。

我从这个开始导入我的文件：

```
import csv
datafile = open('PATH/TO/file.csv', 'r')
datareader = csv.reader(datafile)
data = []
for row in datareader:
    data.append(row) 
```

这似乎行得通。我得到一个如下所示的所有报表数据列表（你会明白我没有上传真实数据......）

```
[['date', 'type', 'details', 'amount', 'balance', 'accountname', 'accountdetails', 'blank_string'],['date', 'type', 'details', 'amount', 'balance', 'accountname', 'accountdetails', 'blank_string'],['date', 'type', 'details', 'amount', 'balance', 'accountname', 'accountdetails', 'blank_string'],['date', 'type', 'details', 'amount', 'balance', 'accountname', 'accountdetails', 'blank_string']] 
```

所以输入 data[0] 会让我：

```
['date', 'type', 'details', 'amount', 'balance', 'accountname', 'accountdetails', 'blank_string'] 
```

所以我创建了我的类和构造函数。将这些事务中的每一个分解为易于访问的项目的想法。

```
class Transaction(object):
    """
    Abstract class for building different kinds of transaction
    """
    def __init__(self, data):
        self.date = data[0]
        self.trans_type = data[1]
        self.description = data[2]
        self.amount = data[3]
        self.balance = data[4]
        self.account_type = data[5]
        self.account_details = data[6] 
```

如果我现在输入，我发现这有效

> T1 = 交易（数据[0]）

但是我不想不断输入 T1 =... T2=... t3=... t4=... 有很多交易需要永远！

所以我尝试了这个！

```
for i in range(len(data)):
eval("T" + str(i)) = Transaction(data[i]) 
```

但是python真的不喜欢那样......它报告回来：

> SyntaxError：您的程序中有错误：***无法分配给函数调用（FILENAME.py，第 80 行）

所以我的问题是。为什么我不能迭代地使用 eval() 函数将我的数据作为实例分配到类 Transaction(object) 中？

如果没有办法解决这个问题，我还能怎么做呢？

我还有一个挥之不去的疑问，我的错误表明我错过了有关面向对象编程的一些要点以及何时适合使用它。将我的 csv 数据导入字典并从那里玩弄它会更好吗？

非常感谢！休

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:44:09.090

改用`transactions = []`列表，只需`.append()`新建`Transaction`实例：

```
transactions = []
for row in datareader:
    transactions.append(Transaction(row)) 
```

甚至：

```
transactions = [Transaction(row) for row in datareader] 
```

*无需*为每个行结果创建单独的变量。

# c# - 在 C# 中获取 Selenium RemoteWebDriver 的会话 ID

> ID：15767066
> 
> 赞同：7
> 
> 时间：2013-04-02T14:42:18.727
> 
> 标签：c#, unit-testing, selenium-webdriver, saucelabs

我正在尝试为在 SauceLabs 云上运行的测试获取会话 ID，但我似乎无法访问它。

我尝试了以下方法：

```
//Returns null
var sessionId = (string)((RemoteWebDriver)driver).Capabilities.GetCapability("webdriver.remote.sessionid");

//Will not compile
sessionId = ((RemoteWebDriver)driver).SessionId; //This is protected. 
```

第二种方法特别令人困惑。这是一个受保护的属性，但如果我只能从派生类访问它，那么它对于我需要的东西基本上没有用。

![会话 ID](https://i.stack.imgur.com/jhQTR.png)

任何帮助表示赞赏。

为了使其工作，我必须创建一个派生自的类`RemoteWebDriver`，然后定义一个 getter 方法。例如：

```
class  CustomeRemoteDriver : RemoteWebDriver
{

    public CustomeRemoteDriver(ICapabilities desiredCapabilities):base(desiredCapabilities)
    {
    }

    public CustomeRemoteDriver(ICommandExecutor commandExecutor, ICapabilities desiredCapabilities):base(commandExecutor, desiredCapabilities)
    {
    }

    public CustomeRemoteDriver(Uri remoteAddress, ICapabilities desiredCapabilities):base(remoteAddress, desiredCapabilities)
    {
    }

    public CustomeRemoteDriver(Uri remoteAddress, ICapabilities desiredCapabilities, TimeSpan commandTimeout):base(remoteAddress, desiredCapabilities, commandTimeout)
    {
    }

    public string GetSessionId()
    {
        return base.SessionId.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T07:39:42.020

也可以达到使用反射。

```
 var sessionIdProperty = typeof(RemoteWebDriver).GetProperty("SessionId", BindingFlags.Instance | BindingFlags.NonPublic);
            if (sessionIdProperty != null)
            {
                SessionId sessionId = sessionIdProperty.GetValue(driver, null) as SessionId;
                if (sessionId == null)
                {
                    Trace.TraceWarning("Could not obtain SessionId.");
                }
                else
                {
                    Trace.TraceInformation("SessionId is " + sessionId.ToString());
                }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:22:39.373

你可以做什么的一个例子

```
class  CustomeRemoteDriver : RemoteWebDriver
{    
    public CustomRemoteDriver(Uri uri, DesiredCapabilities capabilities) 
    : base(uri, capabilities)
    { 
    } 

    public SessionId getExecutionID() 
   { 
      return ((CustomRemoteDriver)Driver.Browser.driver).SessionId; 
   } 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-12T10:24:16.907

只需获取 sessionId: 通过这个

```
String sessionId = ((RemoteWebDriver)webDriver).getSessionId().toString(); 
```

这里

```
WebDriver webDriver = null; 
```

已经宣布。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-30T18:31:36.430

我正在使用`selenium-dotnet-2.48.0`，这工作得很好：

```
string sessionId = ((RemoteWebDriver)driver).Capabilities.GetCapability("webdriver.remote.sessionid").ToString(); 
```

确保将视频设置为 True：

```
DesiredCapabilities capability = DesiredCapabilities.Firefox();
...
capability.SetCapability("video", "True"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-23T02:09:50.637

使用 Selenium.WebDriver Version="3.141.0"，这是有效的：

```
string sessionId = ((RemoteWebDriver)Driver).SessionId.ToString(); 
```

# google-maps-api-3 - 我可以使用谷歌地图 api v3 来获取位置的时区吗？

> ID：15767074
> 
> 赞同：12
> 
> 时间：2013-04-02T14:42:26.413
> 
> 标签：google-maps-api-3

是否可以使用谷歌地图 api 来获取时区？我已经在使用它的 api 进行地理编码和地图显示，我也想添加时区。但我在文档中找不到任何东西。

有任何想法吗？链接？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-10T06:46:54.303

您可以使用[时区 API](https://developers.google.com/maps/documentation/timezone/intro)。

例如（使用 jQuery）：

```
$.ajax({
   url:"https://maps.googleapis.com/maps/api/timezone/json?location=6.123123,106.213144&timestamp="+(Math.round((new Date().getTime())/1000)).toString(),
})
.done(function(response){
   if(response.data.timeZoneId != null){
     //do something
   }
}); 
```

您可以从 GoogleMaps API 获取位置坐标（纬度/经度）。

[**请注意，您需要一个特定的密钥才能使用此 API**](https://developers.google.com/maps/documentation/timezone/get-api-key)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-27T19:25:34.347

选择时区

```
var lat=23.8103771
var long=90.41245449999997
$.ajax({
		 url:"https://maps.googleapis.com/maps/api/timezone/json?location=" + lat + "," + long + "&timestamp="+(Math.round((new Date().getTime())/1000)).toString()+"&sensor=false",
			}).done(function(response){
				 if(response.timeZoneId != null){
                   var hour=(response.rawOffset)/60
                   //alert(hour)

                   $('#timezone option[value="'+hour+'"]').prop('selected', true)

				 }
		});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<select name="timezone" id="timezone" style="width:300px;">

          <option value="-720">(GMT - 12:00 hours) Enitwetok, Kwajalien</option>

          <option value="-660">(GMT - 11:00 hours) Midway Island, Samoa</option>

          <option value="-600">(GMT - 10:00 hours) Hawaii</option>

          <option value="-540">(GMT - 9:00 hours) Alaska</option>

          <option value="-480">(GMT - 8:00 hours) Pacific Time (US &amp; Canada)</option>

          <option value="-420">(GMT - 7:00 hours) Mountain Time (US &amp; Canada)</option>

          <option value="-360">(GMT - 6:00 hours) Central Time (US &amp; Canada), Mexico City</option>

          <option value="-300">(GMT - 5:00 hours) Eastern Time (US &amp; Canada), Bogota, Lima, Quito</option>

          <option value="-240">(GMT - 4:00 hours) Atlantic Time (Canada), Caracas, La Paz</option>

          <option value="-210">(GMT - 3:30 hours) Newfoundland</option>

          <option value="-180">(GMT - 3:00 hours) Brazil, Buenos Aires, Georgetown, Falkland Isl.</option>

          <option value="-120">(GMT - 2:00 hours) Mid-Atlantic, Ascention Isl., St Helena</option>

          <option value="-60">(GMT - 1:00 hour) Azores, Cape Verde Islands</option>

          <option value="0">(GMT) Casablanca, Dublin, Edinburgh, London, Lisbon, Monrovia</option>

          <option value="60">(GMT + 1:00 hour) Amsterdam, Berlin, Copenhagen, Madrid, Paris, Rome</option>

          <option value="120">(GMT + 2:00 hours) Kaliningrad, South Africa, Warsaw</option>

          <option value="180">(GMT + 3:00 hours) Baghdad, Riyadh, Moscow, Nairobi</option>

          <option value="210">(GMT + 3:30 hours) Tehran</option>

          <option value="240">(GMT + 4:00 hours) Adu Dhabi, Baku, Muscat, Tbilisi</option>

          <option value="270">(GMT + 4:30 hours) Kabul</option>

          <option value="300">(GMT + 5:00 hours) Ekaterinburg, Islamabad, Karachi, Tashkent</option>

          <option value="330">(GMT + 5:30 hours) Bombay, Calcutta, Madras, New Delhi</option>

          <option value="360">(GMT + 6:00 hours) Almaty, Colomba, Dhaka</option>

          <option value="420">(GMT + 7:00 hours) Bangkok, Hanoi, Jakarta</option>

          <option value="480">(GMT + 8:00 hours) Beijing, Hong Kong, Perth, Singapore, Taipei</option>

          <option value="540">(GMT + 9:00 hours) Osaka, Sapporo, Seoul, Tokyo, Yakutsk</option>

          <option value="570">(GMT + 9:30 hours) Adelaide, Darwin</option>

          <option value="600">(GMT + 10:00 hours) Melbourne, Papua New Guinea, Sydney, Vladivostok</option>

          <option value="660">(GMT + 11:00 hours) Magadan, New Caledonia, Solomon Islands</option>

          <option value="720">(GMT + 12:00 hours) Auckland, Wellington, Fiji, Marshall Island</option>

        </select>
```

# java - 描述给定库/包的Java基本术语

> ID：15767078
> 
> 赞同：2
> 
> 时间：2013-04-02T14:42:44.840
> 
> 标签：java

这不是一个编程问题，而是一个术语问题。

可以使用哪些术语来描述该语句：

```
import java.util.LinkedList 
```

我是否导入了“默认”Java LinkedList API 或包或类？

[http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:43:53.107

您使用[*单一类型的导入声明*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.1)来导入`LinkedList`类。（它是`java.util`包的一部分，但您只导入了一个类型。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:44:45.433

这是 java 的标准 LinkedList 类的导入语句。该`java.util`包也称为实用程序包

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:50:06.740

您使一个名为“LinkedList”的类驻留在名为“java.util”的包中，可以在您的类中访问。

当 java 运行时加载一个类时，它会验证所有导入的类是否在该类之前加载和初始化（它们的静态块）。

# c# - 在asp.net中的thread.sleep

> ID：15767081
> 
> 赞同：15
> 
> 时间：2013-04-02T14:42:50.027
> 
> 标签：c#, asp.net, asp.net-mvc-4

我正在为我的站点模拟彗星实时馈送协议，因此在我的控制器中添加：

```
while(nothing_new && before_timeout){
  Thread.Sleep(1000);
} 
```

但是我注意到添加此功能后整个网站变慢了。调试后我得出结论，当我调用`Thread.Sleep`所有线程时，即使在其他请求中，也被阻塞了。

为什么会`Thread.Sleep`阻塞所有线程，而不仅仅是当前线程，我应该如何处理这样的问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-02T14:48:54.123

@Servy 说的是正确的。除了他的回答，我还想扔掉我的 2 美分。我敢打赌您正在使用 ASP.NET 会话，并且您正在从同一个会话发送并行请求（例如，您正在发送多个 AJAX 请求）。除了 ASP.NET 会话不是线程安全的并且您不能有来自同一会话的并行请求。ASP.NET 将简单地序列化调用并按顺序执行它们。

这就是你观察这个*阻塞*的原因。它只会阻止来自同一 ASP.NET 会话的请求。如果您从不同的会话发送 HTTP 请求，它不会阻塞。此行为是设计使然，您可以阅读有关它的更多信息[`here`](https://stackoverflow.com/questions/4318965/asp-net-session-request-queuing)。

ASP.NET 会话就像癌症一样，我建议您在发现它们正在 Web 应用程序中使用它们时立即禁用它们：

```
<sessionState mode="Off" /> 
```

不用排队了。现在您有了一个可扩展的应用程序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T14:45:08.007

> 我得出的结论是，当我调用 thread.sleep 时，即使在其他请求中的所有线程都被阻塞了

这个结论是不正确的。 `Thread.Sleep`不会阻塞任何其他线程，它只会阻塞当前线程。如果多个线程都被这行代码阻塞，那是因为所有这些线程都在访问这行代码。

# javascript - 为什么 preventDefault() 在父元素的单击“禁用”复选框上？

> ID：15767083
> 
> 赞同：9
> 
> 时间：2013-04-02T14:42:52.127
> 
> 标签：javascript, html, checkbox, preventdefault, stoppropagation

我最近遇到了这种情况（这里简化）。只需用一个元素包装一个复选框并在其单击事件上应用 preventDefault() ，该复选框将变为不可选中。

看到[这个小提琴](http://jsfiddle.net/peteorpeter/P8Fap/1/)，但这里有一个片段：

```
<div>
    <input type="checkbox"/>
</div> 

/* Wrapper could be any element (and any ancestor element will work) */
$('div').on('click', function(e){
    e.preventDefault();
});

/* Uncomment to make the checkbox work again 
$('input').on('click', function(e){
    e.stopPropagation();
});
*/ 
```

该行为发生在 Chrome 和 FF 中，所以我认为这是故意的。

为什么已经在复选框本身上触发的单击事件不会导致复选框被切换？祖先上的`preventDefault`似乎应该与子复选框的行为无关。似乎，要使复选框更改发生，单击事件需要自由地冒泡到文档根目录。

这里发生了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T15:05:56.610

> 祖先上的 preventDefault 似乎应该与子复选框的行为无关。

不，不是。事件冒泡，所有处理程序（包括祖先的处理程序）都可能影响它。

> 似乎，要使复选框更改发生，单击事件需要自由地冒泡到文档根目录。

不完全是。它不需要到达文档根目录，但它一定没有被默认阻止。

您可能想阅读 DOM 规范中关于[事件流](http://www.w3.org/TR/DOM-Level-3-Events/#event-flow)、[默认操作和可取消事件](http://www.w3.org/TR/DOM-Level-3-Events/#event-flow-default-cancel)的架构说明。

那么一步一步会发生什么呢？

1.  你点击复选框
2.  它被检查
3.  该事件在文档根目录上调度
4.  （不在 IE 中）：[捕获阶段](https://stackoverflow.com/q/4616694/1048572)，您的处理程序没有任何反应
5.  活动到达`<input>`
6.  ……开始冒泡
7.  在 上`<div>`，它被处理。您的事件侦听器调用该`preventDefault`方法，设置一个内部`cancelled`标志。
8.  它冒泡，但没有任何反应。
9.  由于事件已取消，因此不应发生默认操作，并且复选框将重置为之前的状态。

如果您取消注释代码的第二部分，步骤 6+ 看起来会有所不同：

6.  该事件在`<input>`. 您的侦听器调用该`stopPropagation`方法
7.  …这导致跳过冒泡阶段。（永远不会调用 div-listener）
8.  未阻止默认操作，并且复选框保持选中状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T14:47:41.440

[`preventDefault`](http://api.jquery.com/event.preventDefault/)防止浏览器的默认操作被触发。更改复选框的选中状态或跟随`href`锚点、提交表单等都是默认操作。`preventDefault`阻止它们，同时允许事件传播。

这与事件传播不同（正如您所指出的，您可能会停下来`stopPropagation`）。在调用浏览器的默认行为之前，该事件将在整个侦听器层次结构中传播（除非被阻止）。

# asp.net - 实体数据源过滤器

> ID：15767085
> 
> 赞同：0
> 
> 时间：2013-04-02T14:43:00.313
> 
> 标签：asp.net, c#-4.0, entitydatasource

我有一个`entity datasource`并且我想过滤它（created_on）以仅显示最大日期。我该怎么做呢？

```
<asp:EntityDataSource ID="Payroll_DetailsDS" runat="server" 
                ConnectionString="name=sspEntities" DefaultContainerName="sspEntities" 
                EnableDelete="True" EnableFlattening="False" EnableInsert="True" 
                EnableUpdate="True" EntitySetName="Payroll_Details" 
                OrderBy="it.[Payslip_no] desc" EntityTypeFilter="" Select="" 
                Where="it.Status = &quot;COM&quot;">
 </asp:EntityDataSource> 
```

目前，数据源仅按 it.status 过滤。我也会过滤`it.created_on = Max(created_On)`..这就是我想要的想法，不知道如何得到它。

我能够得到类似的东西，`linq`而且效果很好。只需要它`entity datasource`。

```
var testquery = from d in context.Payroll_Details
                                        where d.Created_on == ((from b in                                      context.Payroll_Details
                                        where b.Employee_Personal_InfoEmp_id == xyz.PD_EmpPersonal_Id
                                        select b.Created_on).Max())
                                        select new
                                        {
                                            d.Employee_Personal_InfoEmp_id,
                                            d.Basic_Pay_YTD
                                        };
                        var r = testquery.SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:58:40.177

如果我理解你的话，你可以这样使用：

```
<asp:EntityDataSource ID="SalesOrderHeader" runat="server" 
  ConnectionString="name=AdventureWorksEntities" 
  DefaultContainerName="AdventureWorksEntities" EnableDelete="True" 
  EnableInsert="True" EnableUpdate="True" EntitySetName="SalesOrderHeader" 
  EntityTypeFilter="" OrderBy="it.TotalDue DESC" Select="" 
   Where="it.OnlineOrderFlag = TRUE AND it.TotalDue &gt; @ordercost">
  <WhereParameters>
    <asp:ControlParameter ControlID="costLimit" DbType="Int32" 
      DefaultValue="2500" Name="ordercost" PropertyName="Text" />
  </WhereParameters>
</asp:EntityDataSource> 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.orderby.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.orderby.aspx)

# jenkins - 如何配置 Jenkins 在 Slave 下线时发送通知邮件？

> ID：15767089
> 
> 赞同：12
> 
> 时间：2013-04-02T14:43:12.287
> 
> 标签：jenkins, continuous-integration, slave, nightly-build

如何配置 Jenkins 在 Slave 下线时发送通知邮件？我在云中有一个 Windows 服务器。里面有一个运行夜间构建的 Jenkins Slave，但有时 Slave 会离线，我需要知道它何时离线。在这种情况下，如何配置 Jenkins 向我发送电子邮件通知？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-10T17:22:56.257

Lars 提到的设置似乎没有附带默认的 Jenkins 安装（v1.514）。我通过[邮件观察插件看到它](https://wiki.jenkins-ci.org/display/JENKINS/Mail+Watcher+Plugin)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:48:41.700

在从属配置中，有一个选项“节点在线状态更改时通知”。如果您选中它，它将允许您输入电子邮件地址，以便在从站上线/下线时得到通知。

# c# - 网格视图截断多个空格（在文本框中工作正常）

> ID：15767091
> 
> 赞同：0
> 
> 时间：2013-04-02T14:43:13.730
> 
> 标签：c#, asp.net, html

我有一个 gridview BoundField 需要显示字符串中存在的值 - 无需应用 HTML 格式并在其间保留多个空格（就像文本框的行为方式一样）

我尝试了以下方法，但没有奏效。我们怎样才能让它像文本框一样工作？

![在此处输入图像描述](https://i.stack.imgur.com/vBrVB.jpg)

**标记**

```
<form id="form1" runat="server">
<asp:TextBox ID="Textbox1" runat="server" EnableViewState="false"></asp:TextBox>
<asp:TextBox ID="Textbox2" runat="server" EnableViewState="false"></asp:TextBox>
<asp:TextBox ID="Textbox3" runat="server" EnableViewState="false"></asp:TextBox>
<asp:TextBox ID="Textbox4" runat="server" EnableViewState="false"></asp:TextBox>

<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="Name" HeaderText="B" DataFormatString="<pre>{0}</pre>"
            HtmlEncode="true" ItemStyle-BackColor="Gray" />
        <asp:BoundField DataField="Name" HeaderText="D" HtmlEncode="true" ItemStyle-BackColor="Cyan" />
        <asp:BoundField DataField="Name" HeaderText="E" ItemStyle-BackColor="Orange" />
        <asp:BoundField DataField="Name" HeaderText="C" HtmlEncode="false" ItemStyle-BackColor="Teal" />
         <asp:BoundField DataField="Name" HeaderText="A" DataFormatString="<pre>{0}</pre>"
            HtmlEncode="false" ItemStyle-BackColor="Yellow" />

    </Columns>
</asp:GridView>
</form> 
```

**C# 代码**

```
protected void Page_Load(object sender, EventArgs e)
{

    string selectedVal1 = "a    b";
    string selectedVal2 = "<br />";
    string selectedVal3 = "<script    1>";
    string selectedVal4 = "<script>";

    this.Textbox1.Text = selectedVal1;
    this.Textbox2.Text = selectedVal2;
    this.Textbox3.Text = selectedVal3;
    this.Textbox4.Text = selectedVal4;

    DataTable table = new DataTable();
    table.Columns.Add("Name", typeof(string));
    table.Rows.Add(selectedVal1);
    table.Rows.Add(selectedVal2);
    table.Rows.Add(selectedVal3);
    table.Rows.Add(selectedVal4);

    GridView2.DataSource = table;
    GridView2.DataBind();

} 
```

**HTML**

```
<input name="Textbox1" type="text" value="a    b" id="Textbox1" />
<input name="Textbox2" type="text" value="&lt;br />" id="Textbox2" />
<input name="Textbox3" type="text" value="&lt;script    1>" id="Textbox3" />
<input name="Textbox4" type="text" value="&lt;script>" id="Textbox4" />

<div>
<table cellspacing="0" rules="all" border="1" id="GridView2" style="border-collapse:collapse;">
    <tr>
        <th scope="col">B</th><th scope="col">D</th><th scope="col">E</th><th scope="col">C</th><th scope="col">A</th>
    </tr><tr>
        <td style="background-color:Gray;">&lt;pre&gt;a    b&lt;/pre&gt;</td><td style="background-color:Cyan;">a    b</td><td style="background-color:Orange;">a    b</td><td style="background-color:Teal;">a    b</td><td style="background-color:Yellow;"><pre>a    b</pre></td>
    </tr><tr>
        <td style="background-color:Gray;">&lt;pre&gt;&lt;br /&gt;&lt;/pre&gt;</td><td style="background-color:Cyan;">&lt;br /&gt;</td><td style="background-color:Orange;">&lt;br /&gt;</td><td style="background-color:Teal;"><br /></td><td style="background-color:Yellow;"><pre><br /></pre></td>
    </tr><tr>
        <td style="background-color:Gray;">&lt;pre&gt;&lt;script    1&gt;&lt;/pre&gt;</td><td style="background-color:Cyan;">&lt;script    1&gt;</td><td style="background-color:Orange;">&lt;script    1&gt;</td><td style="background-color:Teal;"><script    1></td><td style="background-color:Yellow;"><pre><script    1></pre></td>
    </tr><tr>
        <td style="background-color:Gray;">&lt;pre&gt;&lt;script&gt;&lt;/pre&gt;</td><td style="background-color:Cyan;">&lt;script&gt;</td><td style="background-color:Orange;">&lt;script&gt;</td><td style="background-color:Teal;"><script></td><td style="background-color:Yellow;"><pre><script></pre></td>
    </tr>
</table>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:02:06.250

如果您想要值中的确切空间，那么您必须在设计视图中绑定 Gridview 上的字段...

试试下面的..

```
DataFormatString="<pre>{0}</pre>"  // - this formating displays the values with spaces 
```

请注意，我们正在关闭 BoundField ( `HtmlEncode="False"`) 中的 HTML 编码，因为我们正在使用`pre`标签。

来自[HTML pre 标签](http://www.w3schools.com/tags/tag_pre.asp)

> pre 元素中的文本以固定宽度字体（通常是 Courier）显示，并且保留空格和换行符。

来自[BoundField.HtmlEncode 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.htmlencode.aspx)

> HTML 编码字段值有助于防止显示跨站点脚本攻击和恶意内容。应尽可能启用此属性。

来自[HttpServerUtility.HtmlEncode 方法](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)

> 如果文本字符串包含小于号 (<) 或大于号 (>)，浏览器会将这些字符解释为 HTML 标记的左括号或右括号。当字符被 HTML 编码时，它们被转换为字符串 < 和 >，这会导致浏览器正确显示小于号和大于号。

在设计视图中设置gridview如下..

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
<Columns>
<asp:BoundField DataField="Name" HeaderText ="Name" DataFormatString="<pre>{0}</pre>" 
HtmlEncode="False" />
</Columns>
</asp:GridView> 
```

在 C# 代码后面（这是我的示例...您可以在此应用您自己的...）

```
DataTable table = new DataTable();
table.Columns.Add("Name", typeof(string));
table.Rows.Add( "Ab      Sdf");
GridView1.DataSource = table;
GridView1.DataBind(); 
```

它的输出如下...

![GridView 输出](https://i.stack.imgur.com/yMJn8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:46:56.103

默认情况下，浏览器会删除连续的空格以在 HTML 文本中仅保留 1。如果您希望显示所有空格，则需要在 gridview 中显示时将它们替换为不间断空格字符“ ”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:40:21.850

我在 RowDataBound 事件中使用了以下 C# 代码

```
e.Row.Cells[(int)logDescriptionIndex].Text = 
e.Row.Cells[(int)logDescriptionIndex].Text.Replace(" ", "&nbsp;"); 
```

请注意以下事项

1.  不要将其应用于标题行
2.  不要将其应用于具有进一步格式（例如日期格式）的表格单元格，这些表格单元格可以在格式上有空格

注意：以下是基于另一个网格视图；不适用于有问题的网格视图。使用相关网格视图所需的微小更改

**代码**

```
 protected void SearchLogsGridRowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e != null)
        {
            if (e.Row.RowType == DataControlRowType.Header)
            {
                if (logDescriptionIndex == null)
                {
                    int index = 0;
                    foreach (TableCell cell in e.Row.Cells)
                    {
                        if (cell.Controls[0] != null)
                        {
                            if (String.Equals(((LinkButton)(cell.Controls[0])).Text.Trim(), UIConstants.LogDescriptionHeader))
                            {
                                logDescriptionIndex = index;
                            }
                        }
                        index++;
                    }
                }
            }

            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                if (logDescriptionIndex != null)
                {
                    //  Replace white spaces with HTML space.
                    //  This is to handle multiple white spaces between two characters
                    e.Row.Cells[(int)logDescriptionIndex].Text = e.Row.Cells[(int)logDescriptionIndex].Text.Replace(" ", "&nbsp;");
                }
            }
        }

    } 
```

# java - 运行任务队列时 404 Instance Unavailable

> ID：15767092
> 
> 赞同：1
> 
> 时间：2013-04-02T14:43:15.013
> 
> 标签：java, google-app-engine, task-queue

我正在使用具有以下任务队列设置的Java SDK 1.7.5、 **HRD数据存储：**

```
<queue>
  <name>surveyAssembly</name>
  <rate>5/s</rate>
  <bucket-size>20</bucket-size>
  <max-concurrent-requests>10</max-concurrent-requests>
</queue> 
```

![GAE 控制台](https://i.imgur.com/6L5K3fm.png)

触发任务时我收到 HTTP 404。日志中没有错误只是默默地失败。

似乎与此[任务排队的问题类似，重试时没有任何反应（无日志）](https://stackoverflow.com/questions/11734606/tasks-queue-up-nothing-happens-on-retry-no-log)，但清除队列后没有运气。

关于如何诊断原因的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:00:20.897

我也遇到了同样的错误。调试后我发现我忘记从 Eclipse 部署后端版本。所以你必须确认后端和前端都有相同的更新代码。

试试这个代码 //backends.xml

```
<backends>
 <backend name="mailback">
 </backend>
</backends> 
```

// 队列代码

```
Queue surveyAssemblyQueue = QueueFactory.getQueue("surveyAssembly");
surveyAssemblyQueue.add(withUrl("/taskloop")param("type", type).header("Host",BackendServiceFactory.getBackendService().getBackendAddress("mailback", 0))); 
```

注意：即时 ID 应为“0”，因为我只创建了 1 个后端即时。

# ios - NSMutableArray removeAllObjects 越界异常

> ID：15767093
> 
> 赞同：3
> 
> 时间：2013-04-02T14:43:15.837
> 
> 标签：ios, objective-c, exception, nsmutablearray

我有一个名为 logBu​​ffer 的 NSMutableArray 对象，它保存日志信息并每 N 行将其转储到一个文件中。发生这种情况时，我删除其所有条目，

```
[logBuffer removeAllObjects] 
```

有时这会引发异常：

```
[__NSArrayM removeObjectAtIndex:]: index 7 beyond bounds [0 .. 6] 
```

我猜 removeAllObjects 会在内部迭代数组中的所有对象，但我不确定它如何超出其界限。我唯一的想法是在删除对象时还有另一个线程在操作数组，但我完全不确定。

有什么想法吗？

* * *

编辑：这是一些额外的代码：

```
- (void) addToLog:(NSString*)str {
    [logBuffer addObject:s];
    if ([logBuffer count] >= kBufferSize) {
        [self writeLogOnFile];
    }
}

- (void) writeLogOnFile {
    NSArray *bufferCopy = [NSArray arrayWithArray:logBuffer];   // create a clone, so that logBuffer doesn't change while dumping data and we have a conflict

    NSString *multiline = [bufferCopy componentsJoinedByString:@"\r\n"];
    multiline = [NSString stringWithFormat:@"%@\n", multiline];
    NSData *data = [multiline dataUsingEncoding:NSUTF8StringEncoding];
    NSFileHandle *outputFileHandle = [NSFileHandle fileHandleForWritingAtPath:logFilePath];
    [outputFileHandle seekToEndOfFile];
    [outputFileHandle writeData:data];
    [outputFileHandle closeFile];

    [logBuffer removeAllObjects];   // This is where the exception is thrown
} 
```

[CrashManager addToLog:] 被几十个类调用，并不总是在主线程上。

* * *

这是回溯：

```
"0   AClockworkBrain             0x0008058f -[SWCrashManager backtrace] + 79",
"1   AClockworkBrain             0x0007fab6 uncaughtExceptionHandler + 310",
"2   CoreFoundation              0x041fe318 __handleUncaughtException + 728",
"3   libobjc.A.dylib             0x03c010b9 _ZL15_objc_terminatev + 86",
"4   libc++abi.dylib             0x044c9a65 _ZL19safe_handler_callerPFvvE + 13",
"5   libc++abi.dylib             0x044c9acd __cxa_bad_typeid + 0",
"6   libc++abi.dylib             0x044cabc2 _ZL23__gxx_exception_cleanup19_Unwind_Reason_CodeP17_Unwind_Exception + 0",
"7   libobjc.A.dylib             0x03c00f89 _ZL26_objc_exception_destructorPv + 0",
"8   CoreFoundation              0x041171c4 -[__NSArrayM removeObjectAtIndex:] + 212",
"9   CoreFoundation              0x04153f70 -[NSMutableArray removeAllObjects] + 96",
"10  AClockworkBrain             0x000817c3 -[SWCrashManager writeLogOnFile] + 691",
"11  AClockworkBrain             0x0008141d -[SWCrashManager addToLog:] + 429",
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM removeObjectAtIndex:]: index 7 beyond bounds [0 .. 6]' 
```

* * *

编辑#2

在阅读了关于 的建议后`@synchronize`，我将其修改为：

```
- (void) addToLog:(NSString*)str {
    [self performSelectorOnMainThread:@selector(doAddToLog:) withObject:str waitUntilDone:YES];
}

- (void) doAddToLog:(NSString*)str {
    // Do the real stuff
}

- (void) writeLogOnFile {
    [self performSelectorOnMainThread:@selector(doWriteLogOnFile) withObject:nil waitUntilDone:YES];
}

- (void) doWriteLogOnFile {
    // Do the real stuff
} 
```

我测试了代码几个小时，它没有抛出异常。它曾经每小时崩溃大约 1-2 次，所以我认为问题已经解决。有人可以解释这种方法与`@synchronize`建议有何不同吗？

另外，在这种情况下使用 waitUntilDone:YES 或 NO 会更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:11:44.913

使用`@synchronized(logBuffer)`：

```
- (void) addToLog:(NSString*)str {
    @synchronized(logBuffer) {
      [logBuffer addObject:s];
    }
    if ([logBuffer count] >= kBufferSize) {
        [self writeLogOnFile];
    }
}

- (void) writeLogOnFile {
    @synchronized(logBuffer) {    
      NSString *multiline = [logBuffer componentsJoinedByString:@"\r\n"];
      multiline = [NSString stringWithFormat:@"%@\n", multiline];
      NSData *data = [multiline dataUsingEncoding:NSUTF8StringEncoding];
      NSFileHandle *outputFileHandle = [NSFileHandle fileHandleForWritingAtPath:logFilePath];
      [outputFileHandle seekToEndOfFile];
      [outputFileHandle writeData:data];
      [outputFileHandle closeFile];

     [logBuffer removeAllObjects];   // This is where the exception is thrown
    }
} 
```

编辑：由于我使用`@synchronized`的是 ，我们可以摆脱缓冲区副本并进行同步。

接下来，考虑评论和编辑的问题：

如果您只调用`writeLogOnFile`from `addToLog`，那么我会做以下两件事之一：

1.  `writeLogOnFile`将代码合并到`addToLog`中，因为无论如何它是一对一的。这确保没有任何东西会直接调用`writeLogOnFile`. 在这种情况下，完全包裹`addToLog`在`@synchronized(logBuffer) {}`

2.  如果您出于某种原因想保持`writeLogOnFile`分离，请将此方法设为类私有。在这种情况下，你可以摆脱 inside，因为理论上你知道你在课堂上做什么，但你也应该完全包裹`@synchronized(logBuffer)`在里面`writeLogOnFile``addToLog``@synchronized(logBuffer) {}`

如您所见，在这两种情况下，您绝对应该`addToLog`完全单线程通过`@synchronized`（或保留原始答案）。它非常简单，可以让您的代码保持干净，并消除您编辑的问题试图解决的所有线程问题。该`@synchronized`模式是专门为避免编写您为解决问题而编写的所有包装代码而创建的，即强制所有内容通过主线程（或特定线程）。

为了完整起见，这是我要编写的完整代码：

```
- (void) addToLog:(NSString*)str {
    @synchronized(logBuffer) {
      [logBuffer addObject:s];
      if ([logBuffer count] >= kBufferSize) {  // write log to file
        NSString *multiline = [logBuffer componentsJoinedByString:@"\r\n"];
        multiline = [NSString stringWithFormat:@"%@\n", multiline];
        NSData *data = [multiline dataUsingEncoding:NSUTF8StringEncoding];
        NSFileHandle *outputFileHandle = [NSFileHandle fileHandleForWritingAtPath:logFilePath];
        [outputFileHandle seekToEndOfFile];
        [outputFileHandle writeData:data];
        [outputFileHandle closeFile];
        [logBuffer removeAllObjects];
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:48:10.893

虽然您提供的信息很难判断出了什么问题，但根据我的说法，问题可能是您在使用主线程或其他线程迭代数组时可能正在修改数组。

# neo4j - Neo4j 2.0：使用标签进行索引

> ID：15767096
> 
> 赞同：0
> 
> 时间：2013-04-02T14:43:37.820
> 
> 标签：neo4j, cypher

所以，我意识到我在这里谈论的是未发布的东西，但我希望有人能澄清一个我在 [prerelease] 文档中找不到答案的问题。

2.0 中的标签索引：它是后台操作吗？或者在创建索引之前，shell 会阻塞返回吗？

我应该担心在导入结束时索引多个 GB 的数据，还是应该最初创建索引并遭受导入惩罚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:29:50.930

Neo4j 2.0 中的索引将是一个后台操作，当它赶上时使索引可用 - 正如我目前所理解的那样。准备现在玩的第一个里程碑:)

# visual-c++ - 鼠标点击事件图片框视觉c

> ID：15767099
> 
> 赞同：1
> 
> 时间：2013-04-02T14:43:41.943
> 
> 标签：visual-c++

我有以下问题：

我使用 Visual Studio 中的常用工具在对话框上创建了一个图片框。在这个框中，我展示了用户通过一些代码选择的图片。

现在，我需要在此图片框中获取鼠标单击（左键）的位置。

我尝试了 STN_CLICKED（NOTIFY 属性 = true），但这不是我需要的。

你能解决这个问题吗？（注意视觉 C++）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:28:45.950

好吧，改为添加父对话框的 OnLButtonDown 事件，而不是 PictureControl！

```
afx_msg void OnLButtonDown(
   UINT nFlags,
   CPoint point 
); 
```

在这里，您已经需要坐标（点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T12:43:55.703

首先打开您的 Myform.h[design] 即您的 UI 部分。点击你的图片框。它会将您重定向到`pictureBox1_Click`功能。在那里，您可以使用它 `mouseEventArgs`来获取鼠标单击时鼠标指针的位置。

```
private: System::Void pictureBox1_Click(System::Object^  sender, System::EventArgs^  e) {

                 MouseEventArgs ^ms = (MouseEventArgs^)e;
                 int X = ms->X;
                 int Y = ms->Y;
} 
```

# asp.net - ASP.NET 中的 System.Web.Caching.Cache

> ID：15767106
> 
> 赞同：1
> 
> 时间：2013-04-02T14:44:07.163
> 
> 标签：asp.net, .net

我刚刚发现`System.Web.Caching.Cache`在我正在从事的一个项目中使用，我很难找到更多关于它的信息。

我的问题是这个缓存是如何持久化的？是客户端（类似于`ViewState`），服务器端（`Session`）？完全不同？

例子：

```
protected string FileContent 
{ 
    get 
    { 
        return Cache[FILE_UPLOAD_KEY + Id] as string ?? GetFileUpload(); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:52:13.100

它是一个服务器端、应用程序范围的缓存。

> 每个应用程序域创建一个此类的实例，只要应用程序域保持活动状态，它就保持有效。有关此类实例的信息可通过 HttpContext 对象的 Cache 属性或 Page 对象的 Cache 属性获得。（[缓存类，MSDN](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)）

它授予对缓存对象设置时间限制等的能力。而且它不*保证*当你再次需要它时该对象会在那里。只要有足够的内存，它就会将项目保存在缓存中。

因此，它不适用于在页面视图（使用[ViewState](http://msdn.microsoft.com/en-us/library/bb386448%28v=vs.100%29.aspx)或[Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)）或控件（使用[Items](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.items.aspx) ）之间传递对象。它旨在缓存构建成本高昂的全局对象（可在所有客户端的任何请求中访问）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:52:15.777

它在服务器上持续存在，并且跨会话是全局的，例如`Application`. 因此，当您在 中设置值时`Cache`，所有用户都可以使用它，直到它过期。

**编辑**

您得到的示例可能不太正确（除非`GetFileUpload()`实际写入缓存）。通常，您对缓存的调用类似于：

```
string GetSomeStringFromCache()
{
    string someString = Cache[SomeKey] as string;
    if (someString == null)
    {
        someString = GetStringUsingSomeExpensiveFunction();
        Cache.Add(SomeKey, someString, /*a bunch of other parameters*/);
    }
    return someString;
} 
```

如果它不存在，这会将其放入缓存中，但如果存在，它将只使用它。

# c++ - C++ 使用 delphi DLL

> ID：15767113
> 
> 赞同：2
> 
> 时间：2013-04-02T14:44:19.137
> 
> 标签：c++, delphi, dll, widestring

我无法使用在delphi中开发的dll的功能。我在类型转换方面遇到了一些困难。

这是我要调用 DLL 的函数：

```
function rData(ID: Cardinal; queue: WideString): WideString; stdcall; 
```

我的 C++ 代码是这样的：

```
typedef string (*ReturnDataSPL)(DWORD, string);

string result;
HMODULE hLib;
hLib = LoadLibrary("delphi.dll");
pReturnDataSPL = (ReturnDataSPL)GetProcAddress(hLib,"rData");
if (NULL != pReturnDataSPL)
   result = pReturnDataSPL(JobID,printerName); 
```

我无法使其工作的问题。我不知道哪种类型与 Delphi WideString 和 Cardinal 兼容。

谁来帮帮我

> **编辑：**
> 
> 这是我要调用 DLL 的函数：
> 
> ```
> procedure rData(ID: Cardinal; queue: WideString; var Result: WideString); stdcall; 
> ```
> 
> *修改后的代码是这样的：*
> 
> ```
> typedef void (__stdcall *ReturnDataSPL)(DWORD, BSTR, BSTR&);
> 
> HMODULE hLib;
> BSTR result = NULL;
> hLib = LoadLibrary("delphi.dll");
> 
> pReturnDataSPL = (ReturnDataSPL)GetProcAddress(hLib,"rData");
> if (NULL != pReturnDataSPL)
> {
>    pReturnDataSPL(JobID,(BSTR)"Lexmark X656de (MS) (Copiar 2)",result);
> } 
> ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T14:47:53.070

您调用该函数的机会很小。

首先，您当前的代码无法成功，因为我认为`string`是`std::string`. 这是 Delphi 代码无法提供或使用的 C++ 数据类型。要与 Delphi 匹配，`WideString`您需要使用 COM`BSTR`数据类型。

您的代码存在的另一个问题是它`cdecl`在 C++ 端和`stdcall`Delphi 端使用。您需要调整调用约定。

但是，由于 Delphi 的返回值 ABI 与平台标准之间的差异，这也会失败。此处详细介绍了该主题：[为什么不能将 WideString 用作互操作的函数返回值？](https://stackoverflow.com/questions/9349530/why-can-a-widestring-not-be-used-as-a-function-return-value-for-interop)

最好的办法是停止`WideString`用作返回值并将其转换为 C++ 引用参数。您需要将 Delphi 转换为匹配。

你正在看这样的东西：

**德尔福**

```
procedure rData(ID: Cardinal; queue: WideString; var Result: WideString); stdcall; 
```

**C++**

```
typedef void (__stdcall *ReturnDataSPL)(DWORD, BSTR, BSTR&); 
```

# c - 二进制环境变量和 setenv()

> ID：15767114
> 
> 赞同：5
> 
> 时间：2013-04-02T14:44:22.070
> 
> 标签：c, linux, environment-variables, setenv

在 Linux 中使用二进制环境变量时，我发现了一些奇怪的行为，其中一些单字节似乎不好。我仔细检查了它，似乎某些字节在给 setenv() 时总是会被错误地“转换”。看这个：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    char array[256];

    int i;
    for(i = 1; i < 256; i++) {
        array[i] = i;
    }

    setenv("badenv", array, 1);

    system("/bin/sh");

    return 0;
} 
```

我执行这个程序，然后当我执行 echo $badenv > test; 我看到的 hexdump 测试：

```
0000000 0101 0302 0504 0706 2008 0c0b 0e0d 100f
0000010 1211 1413 1615 1817 1a19 1c1b 1e1d 201f
0000020 2221 2423 2625 2827 2a29 2c2b 2e2d 302f
0000030 3231 3433 3635 3837 3a39 3c3b 3e3d 403f 
```

似乎 0x9 被转换为 0x20，0xa 被转换为 0xb 等等。

我是在滥用 setenv()，还是在滥用环境变量？我查看了联机帮助页并搜索了一些环境变量是否应该能够处理二进制值，但我不确定。

这种行为的原因是什么，有什么办法可以解决它，同时仍然使用环境变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:09:39.817

环境变量根据 的值拆分为“单词”，`$IFS`“单词”用单个分隔符连接 - 在本例中为普通空格。因此`"\x09\x0a"`，在`"\t\n",`解释.`'\x20'``array`

> IFS - 内部字段分隔符，用于扩展后的分词并使用 read 内置命令将行拆分为单词。默认值为“空格制表符换行符”。

您可以通过（暂时）更改来避免替换`$IFS`。

但是请注意，

*   `array[0]`具有不确定的价值
*   `array`不是 0 终止的

在你的程序中。你应该解决这个问题。

# javascript - 在 Chrome 扩展程序中，如何使用 browser_action (popup.html) 获取网站的 URL？

> ID：15767115
> 
> 赞同：0
> 
> 时间：2013-04-02T14:44:22.167
> 
> 标签：javascript, google-chrome, google-chrome-extension, popup, browser-action

我正在使用以下代码创建一个 Chrome 扩展程序。

### 文件*清单.json*

```
{
"name": "Project",
"version": "1.0.0",
"manifest_version": 2,
"description": "Popup when website requires Log in",
"browser_action":{
    "default_icon":"icon_19.png",
    "default_popup":"Popup.html"
 }
} 
```

### 文件*Popup.html*

```
<html>
<head></head>
<body>
<div class="plus" id="plu"></div>
<script src="inline.js"></script>
</body>
</html> 
```

内联.js：

```
window.onload = function() {
    document.getElementById('plu').onclick=popup;
}
function popup() {
    var link = document.URL;
    alert("This is the link: ( " +link+ " )");
} 
```

当我单击 ID 为“plu”的 div 时，它会获取文件*popup.html*的 URL ，但不是网站的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:57:33.873

此时的文档对象是指您的扩展程序的弹出窗口，因为您将脚本包含在您的 popup.html 中。

如果要访问选项卡页面的 DOM，则需要使用内容脚本。看一眼：

[http://developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)

# php - CodeIgniter 调整上传的图片大小不起作用

> ID：15767117
> 
> 赞同：1
> 
> 时间：2013-04-02T14:44:31.637
> 
> 标签：php, codeigniter

我想创建上传图像的缩略图，然后调整上传图像的大小。这是我的代码：

```
$data = array('upload_data' => $this->upload->data());
            $upload_data = $data['upload_data'];

            //Create image thumbnail
            $config['image_library'] = 'gd2';
            $config['source_image'] = $upload_data['full_path'];
            $config['create_thumb'] = TRUE;
            $config['overwrite'] = TRUE;
            $config['maintain_ratio'] = TRUE;
            $config['width'] = 150;
            $config['height'] = 150;

            $this->load->library('image_lib', $config);

            $this->image_lib->resize();

            //Resize original image for space saving purposes
            if ($upload_data['image_width'] > 850 || $upload_data['image_height'] > 850) {

                $config['image_library'] = 'gd2';
                $config['source_image'] = $upload_data['full_path'];
                $config['maintain_ratio'] = TRUE;
                $config['create_thumb'] = FALSE;
                $config['overwrite'] = TRUE;
                $config['width'] = 850;
                $config['height'] = 850;

                $this->load->library('image_lib', $config);
                $this->image_lib->resize();
            } 
```

缩略图创建得很好，但原始图像的大小调整不起作用。我在这里想念什么？

编辑：我尝试添加以下行：

```
$this->image_lib->clear(); 
```

在两个图像处理之间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:59:55.440

原来我还需要重新初始化 $config ，如下所示：

```
 $this->image_lib->clear();
                $this->image_lib->initialize($config);
                $this->image_lib->resize(); 
```

# sql-server - 将nvarchar sql server数据类型转换为ssis中的数字

> ID：15767119
> 
> 赞同：0
> 
> 时间：2013-04-02T14:44:37.847
> 
> 标签：sql-server, ssis

我在 sql server DB 中有一个具有 nvarchar 数据类型的列，我想将此表数据放入 excel 文件，但它在 excel 文件中显示文本数据。我的要求是将 sql server nvarchar 列转换为 ssis 中的数字数据类型以便可以将正确的格式（数字格式）插入到目标 excel 文件中。请让我知道我该怎么做。我尝试使用这种方法使用数据转换转换并选择八字节有符号整数数据类型，但它不起作用。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-30T18:52:23.680

在 SSIS 数据流任务中，您可以使用**数据转换**转换将 nvarchar 数据类型转换为整数。您必须确保要转换的数据不包含数值以外的数据，否则您会遇到问题。如果这不起作用，请发布您收到的特定错误消息，因为这是在 SSIS 包中转换数据类型的正确方法。

# hibernate - JPA/Hibernate SequenceGeneator 定制

> ID：15767120
> 
> 赞同：1
> 
> 时间：2013-04-02T14:44:40.310
> 
> 标签：hibernate, jpa

这是一个关于自定义 Hibernate SequenceGenerator 的问题。

我有一个应用程序（Spring 3.1/Hibernate 4），它必须与 Oracle 和 SQLServer 的两个旧数据库一起使用。我遇到了 ID 生成器的问题。

在我的实体中，我将 ID 生成器策略注释为 AUTO，这样当它与 Oracle 一起使用时，它默认选择 SequenceGenerator，而当与 SQLServer 一起使用时，它默认选择 IdentityGenerator。它可以毫无问题地与 SQLServer 一起使用。但是对于 Oracle，hibernate 使用硬编码的“hibernate_sequence”作为默认序列名称。这会导致问题，因为旧版 Oracle 数据库使用约定 TableName+"_SEQ" 作为每个表的序列名称。

我设法通过更改 Hibernate SequenceGenerator 源代码并构建自己的休眠代码库来解决这个问题。但这不太可取，因为我们在升级 Hibernate 时必须记住这一点。

我还尝试编写自己的 ID 生成器（并用它注释 ID 字段）在 SequenceGenerator/IDGenerator 之间切换但失败了。无论如何，这也不是可取的方式，因为这需要进一步深入 JPA/Hibernate 框架内部，而我对此犹豫不决。

我想要的是编写我的 CustomizedSequenceGenerator 并以某种方式覆盖 Hibernate 通过配置使用的那个。但我可以找到“不知何故”。

有没有人有这样的经历？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:39:31.617

您可以通过实现`IdentifierGenerator`接口然后覆盖它的`generate`方法来创建自定义生成器。

然后你可以在实体中使用它来生成id。

```
@Id
@GenericGenerator(name="TABLE_X_SEQ", strategy="com.package.TableXIdGenerator")
@GeneratedValue(generator="TABLE_X_SEQ") 
```

# java - 使用 JDOM 查找后代元素

> ID：15767122
> 
> 赞同：1
> 
> 时间：2013-04-02T14:44:44.180
> 
> 标签：java, xml, jdom, jdom-2

有没有办法使用 JDOM 找到后代元素，就像使用 jQuery 一样？

我正在尝试从此 XML 文档中获取序列元素：

```
<getEmployeesXMLResponse xmlns="http://tempuri.org/">
    <getEmployeesXMLResult>
        <xs:schema id="NewDataSet" xmlns:xs="http://www.w3.org/2001/XMLSchema"
            xmlns="" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
            <xs:element name="NewDataSet" msdata:IsDataSet="true"
                msdata:MainDataTable="ListOfEmployees"
                msdata:UseCurrentLocale="true">
                <xs:complexType>
                    <xs:choice minOccurs="0" maxOccurs="unbounded">
                        <xs:element name="ListOfEmployees">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="name" type="xs:string" minOccurs="0" />
                                    <xs:element name="department" type="xs:string"
                                        minOccurs="0" />
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                    </xs:choice>
                </xs:complexType>
            </xs:element>
        </xs:schema>
        <diffgr:diffgram xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1"
            xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
            <DocumentElement xmlns="">
                <ListOfEmployees diffgr:id="ListOfEmployees1"
                    msdata:rowOrder="0">
                    <name>Paul</name>
                    <department>Sales</department>
                </ListOfEmployees>
                <ListOfEmployees diffgr:id="ListOfEmployees2"
                    msdata:rowOrder="1">
                    <name>Bob</name>
                    <department>Marketing</department>
                </ListOfEmployees>
            </DocumentElement>
        </diffgr:diffgram>
    </getEmployeesXMLResult>
</getEmployeesXMLResponse> 
```

目前我正在这样做：

```
 Element currentEl = document.getRootElement();
        do {
            currentEl = currentEl.getChildren().get(0);
        } while (currentEl.getName() != "sequence"); 
```

但我认为必须有更好的方法。

感谢您的意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T17:31:05.630

使用 XPaths 并在此处阅读：[JavaDoc for XPathFactory](http://www.jdom.org/docs/apidocs/org/jdom2/xpath/XPathFactory.html#compile%28java.lang.String,%20org.jdom2.filter.Filter,%20java.util.Map,%20org.jdom2.Namespace...%29)以及更多关于它的信息：[GitHub Wiki](https://github.com/hunterhacker/jdom/wiki/JDOM2-Feature-XPath-Upgrade)

底线是您希望使用表达式 "//xs:sequence" 和命名空间 Namespace.getNamespace("xs", " [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) ")编译 XPath

滚滚

# javascript - 即使定时器低于 10，如何使计数器变为两位数

> ID：15767125
> 
> 赞同：0
> 
> 时间：2013-04-02T14:44:51.543
> 
> 标签：javascript, timer, setinterval

我有如下简单的计时器，但是如何让它在低于 10 时显示两位数，例如 09、08、07、06 等？

```
startTimer(60);
function startTimer(num){
      count = num;
      countdown = setInterval(function(){
             count--;
      }, 1000);
     }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:46:38.867

所需的字符串格式很简单：

```
var str = (count < 10) ? '0' + count : count; 
```

但是，您需要确保也有某种方法可以*停止*计数器。通常最好使用`setTimeout`代替`setInterval`，并且仅在您知道当前值大于零时才设置新计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-29T15:23:48.940

`var str = (count < 10) ? '0' + count : count;`

这对我有用，对我的番茄项目的 setInterval() 有用。

# java - 在云提供商之间移动文件

> ID：15767127
> 
> 赞同：0
> 
> 时间：2013-04-02T14:44:55.580
> 
> 标签：java, file, cloud, inputstream, move

我想通过使用他们的 Java API 将文件从云提供商移动到另一个。

在源云提供商上，我可以获取文件作为输入流，或者可以将其下载到文件对象（使用文件输出流）。目标云提供商接受文件作为输入流（需要内容长度）或文件对象存储。

移动文件是否更好

*   获取云存储提供商上文件的输入流和内容长度，并使用这些数据存储在目标云提供商上或
*   首先将源云提供商上的文件下载到 File 对象，然后再将其存储在目标云提供商上。

有什么优点/缺点？

第一个移动策略的一个优点是它需要更少的磁盘空间。但是它们有任何性能差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:54:18.660

我不会使用 File 对象，除非您知道要传输的文件适合内存。使用流媒体。在将文件发送到目标提供程序之前，您仍然可以在本地存储文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:50:11.253

通过使用流复制方法将文件内容保存在内存中可能会稍微提高性能，因为您没有发生磁盘绑定 I/O 等待。也就是说，进出云存储 API 的流量的网络时间可能会成为您的主要瓶颈，因此不太可能产生重大影响。

将文件写入磁盘的一个可能优势是您可以获得所有内容的自动额外备份，并且如果上传失败，则可能有一个更简单的基础来执行重试。

# maven - 如果指定了“-DskipTests”或“-Dmaven.test.skip=true”，如何跳过 Maven 插件执行？

> ID：15767132
> 
> 赞同：40
> 
> 时间：2013-04-02T14:45:18.310
> 
> 标签：maven, testing, plugins, automated-tests

我正在使用 Maven 3.0.3。我有这个插件，通常我想在执行 JUnit 测试之前运行它：

```
 <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <test.mysql.db.user>sbjunituser</test.mysql.db.user>
            <test.mysql.db.password></test.mysql.db.password>
            <test.mysql.db.prefix>sbjunit</test.mysql.db.prefix>
            <test.mysql.db.sid>${test.mysql.db.prefix}_${project.artifactId}</test.mysql.db.sid>
            <test.mysql.db.host>localhost</test.mysql.db.host>
            <test.mysql.db.port>3306</test.mysql.db.port>
            <test.mysql.dataSource.url>jdbc:mysql://${test.mysql.db.host}:${test.mysql.db.port}/${test.mysql.db.sid}</test.mysql.dataSource.url>
            <test.mysql.dataSource.driverClassName>com.mysql.jdbc.Driver</test.mysql.dataSource.driverClassName>
        </properties>
        <build>
            <plugins>
        <!--  Run the liquibase scripts -->
        <plugin>
            <groupId>org.liquibase</groupId>
            <artifactId>liquibase-maven-plugin</artifactId>
            <version>2.0.1</version>
            <dependencies>
                <dependency>
                    <groupId>mysql</groupId>
                    <artifactId>mysql-connector-java</artifactId>
                    <version>5.1.18</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <id>build-database</id>
                    <phase>process-test-classes</phase>
                    <configuration>
                        <driver>com.mysql.jdbc.Driver</driver>
                        <url>jdbc:mysql://${test.mysql.db.host}:${test.mysql.db.port}/${test.mysql.db.sid}</url>
                        <username>${test.mysql.db.user}</username>
                        <password>${test.mysql.db.password}</password>
                        <changeLogFile>${project.build.directory}/db.changelog-master.xml</changeLogFile>
                        <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                    </configuration>
                    <goals>
                        <goal>update</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

但是，如果有人指定`-Dmaven.test.skip=true`or `-DskipTests`，我想跳过这个插件的运行。我怎么做？我尝试将执行阶段更改为“测试”，但随后我的单元测试在此插件之前运行，这不是我想要的。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-12-14T12:30:44.890

这对我有用：

```
<configuration>
   <skip>${skipTests}</skip>
</configuration> 
```

**或者**

```
<configuration>
   <skip>${maven.test.skip}</skip>
</configuration> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-04T07:00:57.187

您可以使用在使用单元测试跳过属性之一时被激活的配置文件来设置一个新属性（例如`skipLiquibaseRun`），该属性在 liquibase 是否应该运行时保存标志

```
<profiles>
    <profile>
      <id>default</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>
      <properties>
        <skipLiquibaseRun>false</skipLiquibaseRun>
      </properties>
    </profile>
    <profile>
      <id>skipTestCompileAndRun</id>
      <activation>
        <property>
          <name>maven.test.skip</name>
          <value>true</value>
        </property>
      </activation>
      <properties>
        <skipLiquibaseRun>true</skipLiquibaseRun>
      </properties>
    </profile>
    <profile>
      <id>skipTestRun</id>
      <activation>
        <property>
          <name>skipTests</name>
        </property>
      </activation>
      <properties>
        <skipLiquibaseRun>true</skipLiquibaseRun>
      </properties>
    </profile>
</profiles> 
```

使用 liquibase 插件部分中的新属性来决定是否应该[跳过](http://www.liquibase.org/manual/maven_update#skip)运行，如下所示：

```
<configuration>
    <skip>${skipLiquibaseRun}</skip>
    <driver>com.mysql.jdbc.Driver</driver>
    <url>jdbc:mysql://${test.mysql.db.host}:${test.mysql.db.port}/${test.mysql.db.sid}</url>
    <username>${test.mysql.db.user}</username>
    <password>${test.mysql.db.password}</password>
    <changeLogFile>${project.build.directory}/db.changelog-master.xml</changeLogFile>
    <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
</configuration> 
```

未经测试，但希望它有效;-)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-10T21:29:45.307

我认为最直接的方法是级联 POM 中的“跳过”属性：

```
<properties>
  <maven.test.skip>false</maven.test.skip>
  <skipTests>${maven.test.skip}</skipTests>
  <skipITs>${skipTests}</skipITs>
</properties> 
```

然后您可以在插件配置中使用上面设置的最后一个“跳过”属性：

```
<configuration>
  <skip>${skipITs}</skip>
</configuration> 
```

有关此答案中提到的每个不同“跳过”属性的更多详细信息，请参阅[Maven Failsafe 插件：跳过测试](http://maven.apache.org/surefire/maven-failsafe-plugin/examples/skipping-tests.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T16:41:54.307

尝试将其添加到如下示例的配置文件中，（但是，这仅适用于`maven.test.skip`未指定的情况：

```
 <profiles>
    <profile>
        <id>execute-liquibase</id>
        <activation>
            <property>
                <name>!maven.test.skip</name>
            </property>
        </activation>
        <build>
            <plugins>
                <!--  Run the liquibase scripts -->
                <plugin>
                    <groupId>org.liquibase</groupId>
                    <artifactId>liquibase-maven-plugin</artifactId>
                    <version>2.0.1</version>
                    <dependencies>
                       <dependency>
                           <groupId>mysql</groupId>
                           <artifactId>mysql-connector-java</artifactId>
                           <version>5.1.18</version>
                       </dependency>
                    </dependencies>
                    <executions>
                       <execution>
                           <id>build-database</id>
                           <phase>process-test-classes</phase>
                           <configuration>
                               <driver>com.mysql.jdbc.Driver</driver>
                               <url>jdbc:mysql://${test.mysql.db.host}:${test.mysql.db.port}/${test.mysql.db.sid}</url>
                               <username>${test.mysql.db.user}</username>
                               <password>${test.mysql.db.password}</password>
                               <changeLogFile>${project.build.directory}/db.changelog-master.xml</changeLogFile>
                               <promptOnNonLocalDatabase>false</promptOnNonLocalDatabase>
                           </configuration>
                           <goals>
                              <goal>update</goal>
                           </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
 <profiles> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-09T15:03:45.117

**对于配置中不支持`skip`**的插件，还有另一种**不使用配置文件的跳过方法。**

在阶段声明中，您可以附加一个属性`pluginxyz.skip`

例如

```
<properties>
   <property>
      <pluginxyz.skip><pluginxyz.skip>
   </property>     
</properties>
...
<plugin>
    <groupId>org.xyz</groupId>
    <artifactId>xyz-maven-plugin</artifactId>
    <version>2.0.1</version>
    <executions>
      <execution>
        <id>build-database</id>
        <phase>process-test-classes${pluginxyz.skip}</phase>
        <configuration>....</configuration>
     </execution>
<plugin> 
```

然后，当从命令行执行时，您可以添加`-Dpluginxyz.skip=true`将`true`值附加到阶段名称的值。

由于没有阶段调用`process-test-classestrue`，目标不会被执行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-02T15:43:53.557

我认为这不能直接完成，但您可以添加`-Dliquibase.should.run=false`以完全跳过 liquibase（请参阅[http://www.liquibase.org/manual/maven_update#skip](http://www.liquibase.org/manual/maven_update#skip)）。`skipTests`如果您不想同时键入这两个属性，则可以将此属性捆绑到单独的配置文件中。

```
<profiles>
    <profile>
        <id>skipTestAndDb</id>
        <properties>
            <skipTests>true</skipTests>
            <liquibase.should.run>false</liquibase.should.run>
        </properties>
    </profile>
</profiles> 
```

然后你只需输入`mvn install -PskipTestAndDb`

# html - Margin-Top 不适用于 div 元素

> ID：15767133
> 
> 赞同：1
> 
> 时间：2013-04-02T14:45:19.563
> 
> 标签：html, css, overflow

所以我正在尝试一个简单的布局。它基本上是一个带有很多图片的采访布局。

这是我遵循的基本概念：

-介绍

-相片

-面试

我在顶部设置了一个边距，`<div id="interview">`但它不起作用。为什么？我认为我的布局结构存在问题。（如果您单击 chrome 中的检查元素）

如何解决？链接： http: [//mysecretathens.gr/kulte_test/osterman.html](http://mysecretathens.gr/kulte_test/osterman.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:48:44.297

这是因为你没有清除浮动元素，只是在你`<div id="interview">`这样声明之前清除浮动而不是使用`margin-top: /* Whatever px */`

```
<div style="clear: both;"></div>
<div id="interview"> 
```

看看你的网站，你在登陆页面上使用了大量的图片，这会惹恼任何带宽不足的用户，我建议你看看`lazy loading`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:51:59.623

解决此问题的一种干净方法是将“溢出：隐藏”添加到照片元素。

```
#photos {overflow:hidden;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:50:40.830

它“不起作用”，因为上面的所有图像都是浮动的——因此不会跨越其父元素的高度。

添加`overflow:hidden`到您的`#photos`div 中，使其包含所有图像并且不会让它们浮出 - 然后以下元素上的 margin-top 将按预期工作。

# ios - 线程程序收到信号：“EXC_BAD_ACCESS”，同时在 ios 的 sqlite 中查找列的总和

> ID：15767135
> 
> 赞同：2
> 
> 时间：2013-04-02T14:45:20.537
> 
> 标签：ios, sqlite

我编写了一个函数来从在 sqlite 中创建的表中查找总费用和今天的费用。这是我的代码

```
-(void) calculateTodaysExp    
{
    const char *dbpath = [databasePath UTF8String];    
    sqlite3_stmt *statement1;    
    if(sqlite3_open(dbpath, &expenseDB) == SQLITE_OK)    
    {
        NSString *todays = [NSString stringWithFormat:@"SELECT sum(amount) FROM expenseDetails WHERE date = \"%@\"", dateString];    
        const char *todays_statement = [todays UTF8String];    
        if(sqlite3_prepare_v2(expenseDB, todays_statement, -1, &statement1, NULL) == SQLITE_OK)    
        {
            while (sqlite3_step(statement1) == SQLITE_ROW)    
            {
                NSString *todaysExpenseString = [[NSString alloc]initWithUTF8String:    (const char *)sqlite3_column_int(statement1, 0)];    
                todaysExpense.text = todaysExpenseString;     

            }
        }
        sqlite3_finalize(statement1);    
        sqlite3_close(expenseDB);    
    }
}

-(void) calculateTotalExp    
{
    const char *dbpath = [databasePath UTF8String];    
    sqlite3_stmt *statement2;    
    if(sqlite3_open(dbpath, &expenseDB) == SQLITE_OK)    
    {
        NSString *total = [NSString stringWithFormat:@"SELECT SUM(amount) FROM expenseDetails"];    

        const char *total_statement = [total UTF8String];    
        if(sqlite3_prepare_v2(expenseDB, total_statement, -1, &statement2, NULL) == SQLITE_OK)    
        {
            while(sqlite3_step(statement2) == SQLITE_ROW)    
            {
                NSString *totalExpenseString = [[NSString alloc]initWithUTF8String:(const char *)sqlite3_column_int64(statement2, 0)];    
                totalExpense.text = totalExpenseString;    
            }
        }
        sqlite3_finalize(statement2);    
        sqlite3_close(expenseDB);    
    }
} 
```

无论我尝试调用这些函数，程序都会停止并显示“程序接收到的信号：”EXC_BAD_ACCESS“”。如果有人能找到解决办法。提前致谢

这是我的整个代码

```
#import "sqliteViewController.h"

@implementation sqliteViewController
@synthesize selectCategory = _selectCategory;
@synthesize enterExpense;
@synthesize dateString;
@synthesize showDate;
@synthesize moneyLeft;
@synthesize todaysExpense;
@synthesize totalExpense;
-(void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

-(void)viewDidLoad
{
    NSString *docsDirectory;
    NSArray *directoryPaths;
    directoryPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDirectory = [directoryPaths objectAtIndex:0];
    databasePath = [[NSString alloc]initWithString:[docsDirectory stringByAppendingPathComponent:@"expense.db"]];
    NSFileManager *fileMan = [NSFileManager defaultManager];
    if([fileMan fileExistsAtPath:databasePath] == NO)
    {
        const char *dbpath = [databasePath UTF8String];
        if(sqlite3_open(dbpath, &expenseDB) == SQLITE_OK)
        {
            char *errorMessage;
            const char *sqlStatement = "create table if not exists expenseDetails (ID INTEGER PRIMARY KEY AUTOINCREMENT, CATEGORY TEXT, AMOUNT FLOAT, DATE TEXT)";
            if (sqlite3_exec(expenseDB, sqlStatement, NULL, NULL, &errorMessage) != SQLITE_OK)
            {
                NSLog(@"failed to create table");
            }
            sqlite3_close(expenseDB);
        }
        else{
            NSLog(@"failed to open/create");
        }
    }

    [super viewDidLoad];
    date = [NSDate date];
    NSDateFormatter *dateFormat = [[ NSDateFormatter alloc]init];
    [dateFormat setDateFormat:@"dd/MM/YY"];
    dateString = [dateFormat stringFromDate:date];
    NSLog(@"date%@", dateString);
    showDate.text = dateString;
    [self calculateTodaysExp];
    [self calculateTotalExp];
}

-(void)viewDidUnload
{
    [super viewDidUnload];

}

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

-(void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

-(void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(IBAction)categorySave:(id)sender {
    _selectCategory = [[UIActionSheet alloc]initWithTitle:@"select" delegate:self cancelButtonTitle:@"close" destructiveButtonTitle:nil otherButtonTitles:@"food",@"transportation",@"fuel",@"mobile",@"shopping", nil];
    [_selectCategory showInView:self.view];
}
-(void) actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:  (NSInteger)buttonIndex;
{
    if(buttonIndex == 0)
    {
        categoryBuffer = @"food";
    }
    if(buttonIndex == 1)
    {
        categoryBuffer = @"transportation";
    }
    if(buttonIndex == 2)
    {
        categoryBuffer = @"fuel";
    }
    if(buttonIndex == 3)
    {
        categoryBuffer = @"mobile";
    }
    if(buttonIndex == 4)
    {
        categoryBuffer = @"shopping";
    }
    sqlite3_stmt *statement;
    const char *dbpath = [databasePath UTF8String];
    if(sqlite3_open(dbpath, &expenseDB) == SQLITE_OK)
    {
        NSString *insertExpense = [NSString stringWithFormat:@"INSERT INTO expenseDetails (category, amount, date) Values (\"%@\", \"%d\", \"%@\")", categoryBuffer, enterExpense.text, dateString];
        const char *insert_statement = [insertExpense UTF8String];
        sqlite3_prepare_v2(expenseDB, insert_statement, -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
            enterExpense.text = @"";
            [self calculateTodaysExp];
            [self calculateTotalExp];
        }
        else {
            NSLog(@"failed");
        }

        sqlite3_finalize(statement);
        sqlite3_close(expenseDB);
    }
    else
    {
        NSLog(@"failed to insert in table");
    }
}
-(void) calculateTodaysExp
{
    const char *dbpath = [databasePath UTF8String];
    sqlite3_stmt *statement1;
    if(sqlite3_open(dbpath, &expenseDB) == SQLITE_OK)
    {
        NSString *todays = [NSString stringWithFormat:@"SELECT TOTAL(amount) FROM expenseDetails WHERE date = \"%@\"", dateString];
        const char *todays_statement = [todays UTF8String];
        if(sqlite3_prepare_v2(expenseDB, todays_statement, -1, &statement1, NULL) == SQLITE_OK)
        {
            while (sqlite3_step(statement1) == SQLITE_ROW)
            {
                int result = sqlite3_column_int(statement1,0);
                NSString *todaysExpenseString = [NSString stringWithFormat:@"%d", result];
                todaysExpense.text = [NSString stringWithFormat:@"%d", result];
            }
            sqlite3_finalize(statement1);
        }
        else
        {
            NSLog(@"failed to select");
        }
        sqlite3_close(expenseDB);
    }
}
-(void) calculateTotalExp
{
    const char *dbpath = [databasePath UTF8String];
    sqlite3_stmt *statement2;
    if(sqlite3_open(dbpath, &expenseDB) == SQLITE_OK)
    {
        NSString *total = [NSString stringWithFormat:@"SELECT SUM(amount) FROM expenseDetails"];

        const char *total_statement = [total UTF8String];
        if(sqlite3_prepare_v2(expenseDB, total_statement, -1, &statement2, NULL) == SQLITE_OK)
        {
            while(sqlite3_step(statement2) == SQLITE_ROW)
            {
                int result1 = sqlite3_column_int(statement2,0);
                NSString *totalExpenseString = [NSString stringWithFormat:@"%d", result1];
                totalExpense.text = totalExpenseString;
            }
            sqlite3_finalize(statement2);
        }
        sqlite3_close(expenseDB);
    }
}
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [enterExpense resignFirstResponder];
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:34:47.850

您正在调用`sqlite3_column_int`并创建一个字符串，例如：

```
NSString *todaysExpenseString = [[NSString alloc]initWithUTF8String:    (const char *)sqlite3_column_int(statement1, 0)]; 
```

那是无效的。您将其转换为`(const char *)`，但它不是字符串，而是整数。你真的需要：

```
int result = sqlite3_column_int(statement1, 0);
NSString *todaysExpenseString = [NSString stringWithFormat:@"%d", result]; 
```

# visual-studio-2012 - VS2012 需要的接口在 UML 模型浏览器中变成提供的接口

> ID：15767136
> 
> 赞同：0
> 
> 时间：2013-04-02T14:45:28.513
> 
> 标签：visual-studio-2012, uml

将所需的接口拖到组件图上（它的半圆图）。
检查UML Model Explorer，它变成了完整的圆圈提供的界面图标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:20:02.297

不是真正的答案，但看起来这可能是“按预期工作”。

从 UML 模型资源管理器中拉出的所有界面都是空心圆圈，当您在将界面拖动到画布后单击该界面时，会在空心圆圈旁边显示一个上下文图标。单击图标可将空心圆转换为半圆。

# c++ - 包括 windows.storage.streams.h

> ID：15767146
> 
> 赞同：1
> 
> 时间：2013-04-02T14:46:19.500
> 
> 标签：c++, visual-c++, c++-cli, windows-phone-8, c++-cx

我试图从[这个答案](https://stackoverflow.com/questions/10520335/how-to-wrap-a-char-buffer-in-a-winrt-ibuffer-in-c)中放入类 NativeBuffer但是当 windows.storage.streams.h 我有很多错误，比如：

```
Error   1   error C2872: 'AsyncStatus' : ambiguous symbol   c:\program files (x86)\windows phone kits\8.0\include\abi\asyncinfo.h   75
Error   2   error C2872: 'AsyncStatus' : ambiguous symbol   c:\program files (x86)\windows phone kits\8.0\include\abi\asyncinfo.h   76
Error   3   error C2872: 'AsyncStatus' : ambiguous symbol   c:\program files (x86)\windows phone kits\8.0\include\abi\asyncinfo.h   77
Error   4   error C2872: 'AsyncStatus' : ambiguous symbol   c:\program files (x86)\windows phone kits\8.0\include\abi\asyncinfo.h   78
Error   5   error C2371: 'IAsyncInfo' : redefinition; different basic types c:\program files (x86)\windows phone kits\8.0\include\abi\asyncinfo.h   108
Error   6   error C2872: 'AsyncStatus' : ambiguous symbol   c:\program files (x86)\windows phone kits\8.0\include\abi\asyncinfo.h   115
Error   7   error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.foundation.collections.h  1185
Error   8   error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.foundation.collections.h  1186
Error   9   error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.foundation.collections.h  1224
Error   10  error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.foundation.collections.h  1225
Error   11  error C3431: 'PropertyType' : a scoped enumeration cannot be redeclared as an unscoped enumeration  c:\program files (x86)\windows phone kits\8.0\include\abi\windows.foundation.h  3984
Error   12  error C2371: 'ABI::Windows::Foundation::PropertyType' : redefinition; different basic types c:\program files (x86)\windows phone kits\8.0\include\abi\windows.foundation.h  15298
Error   13  error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.storage.search.h  4005
Error   14  error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.storage.search.h  4008
Error   15  error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.storage.search.h  4012
Error   16  error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.storage.search.h  4015
Error   17  error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.storage.h 10488
Error   18  error C2872: 'EventRegistrationToken' : ambiguous symbol    c:\program files (x86)\windows phone kits\8.0\include\abi\windows.storage.h 10491
Error   19  error C2039: 'RuntimeClass' : is not a member of 'Microsoft::WRL'   c:\users\sergey.fedortsov\documents\socialholdem\prj.ipoker\wp8\shared\platform\wp\nativebuffer.h   12
Error   20  error C2504: 'RuntimeClass' : base class undefined  c:\users\sergey.fedortsov\documents\socialholdem\prj.ipoker\wp8\shared\platform\wp\nativebuffer.h   12
Error   21  error C2143: syntax error : missing ',' before '<'  c:\users\sergey.fedortsov\documents\socialholdem\prj.ipoker\wp8\shared\platform\wp\nativebuffer.h   12
Error   22  error C2039: 'RuntimeClassFlags' : is not a member of 'Microsoft::WRL'  c:\users\sergey.fedortsov\documents\socialholdem\prj.ipoker\wp8\shared\platform\wp\nativebuffer.h   13
Error   23  error C3083: 'RuntimeClassType': the symbol to the left of a '::' must be a type    c:\users\sergey.fedortsov\documents\socialholdem\prj.ipoker\wp8\shared\platform\wp\nativebuffer.h   13
Error   24  error C2039: 'WinRtClassicComMix' : is not a member of 'Microsoft::WRL' c:\users\sergey.fedortsov\documents\socialholdem\prj.ipoker\wp8\shared\platform\wp\nativebuffer.h   13
Error   25  error C2039: 'FtmBase' : is not a member of 'Microsoft::WRL'    c:\users\sergey.fedortsov\documents\socialholdem\prj.ipoker\wp8\shared\platform\wp\nativebuffer.h   16 
```

我的代码：

```
 #ifndef NATIVE_BUFFER_H
#define NATIVE_BUFFER_H

#include <robuffer.h>
#include <wrl.h>
#include <wrl/implements.h>
#include <wrl\client.h>
#include <windows.storage.streams.h>

/// <summary>
/// The purpose of this class is to transform byte buffers into an IBuffer
/// </summary>
class NativeBuffer : public Microsoft::WRL::RuntimeClass<
    Microsoft::WRL::RuntimeClassFlags< Microsoft::WRL::RuntimeClassType::WinRtClassicComMix >,
    ABI::Windows::Storage::Streams::IBuffer,
    Windows::Storage::Streams::IBufferByteAccess,
    Microsoft::WRL::FtmBase>
{

public:
    virtual ~NativeBuffer()
    {
        if (m_pBuffer && m_bIsOwner)
        {
            delete[] m_pBuffer;
            m_pBuffer = NULL;
        }
    }

    STDMETHODIMP RuntimeClassInitialize(UINT totalSize)
    {
        m_uLength = totalSize;
        m_uFullSize = totalSize;
        m_pBuffer = new BYTE[totalSize];
        m_bIsOwner = TRUE;
        return S_OK;
    }

    STDMETHODIMP RuntimeClassInitialize(BYTE* pBuffer, UINT totalSize, BOOL fTakeOwnershipOfPassedInBuffer)
    {
        m_uLength = totalSize;
        m_uFullSize = totalSize;
        m_pBuffer = pBuffer;
        m_bIsOwner = fTakeOwnershipOfPassedInBuffer;
        return S_OK;
    }

    STDMETHODIMP Buffer( BYTE **value)
    {
        *value = m_pBuffer;
        return S_OK;
    }

    STDMETHODIMP get_Capacity(UINT32 *value)
    {
        *value = m_uFullSize;
        return S_OK;
    }

    STDMETHODIMP get_Length(UINT32 *value)
    {
        *value = m_uLength;
        return S_OK;
    }

    STDMETHODIMP put_Length(UINT32 value)
    {
        if(value > m_uFullSize)
        {
            return E_INVALIDARG;
        }
        m_uLength = value;
        return S_OK;
    }

    static Windows::Storage::Streams::IBuffer^ GetIBufferFromNativeBuffer(Microsoft::WRL::ComPtr<NativeBuffer> spNativeBuffer)
    {
        auto iinspectable = reinterpret_cast<IInspectable*>(spNativeBuffer.Get());
        return reinterpret_cast<Windows::Storage::Streams::IBuffer^>(iinspectable);
    }
    static BYTE* GetBytesFromIBuffer(Windows::Storage::Streams::IBuffer^ buffer)
    {
        auto iinspectable = (IInspectable*)reinterpret_cast<IInspectable*>(buffer);
        Microsoft::WRL::ComPtr<Windows::Storage::Streams::IBufferByteAccess> spBuffAccess;
        HRESULT hr = iinspectable->QueryInterface(__uuidof(Windows::Storage::Streams::IBufferByteAccess), (void **)&spBuffAccess);
        UCHAR * pReadBuffer;
        spBuffAccess->Buffer(&pReadBuffer);
        return pReadBuffer;
    }
private:
    UINT32 m_uLength;
    UINT32 m_uFullSize;
    BYTE* m_pBuffer;
    BOOL m_bIsOwner;
};

#endif 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T17:26:19.670

最可能的原因是您`using namespace`在头文件中！

例如。

```
// Header
using namespace System;
using namespace std;

// Your class declaration 
```

从标头中删除所有名称空间包含。使用明确的类包含，例如

```
using System::Int32;
using std::vector; 
```

由于您将此标头包含在其他标头中，然后包含标准标头 - 所有内容都进入（或被视为）全局名称空间。它引起了歧义。您不能更改标准标头（通过前缀`::`或其他命名空间）。

# java - log4j 2.x，每个模块每天一个新文件

> ID：15767147
> 
> 赞同：1
> 
> 时间：2013-04-02T14:46:19.730
> 
> 标签：java, log4j

如何为我的 Enterprise Java 应用程序创建以下结构的日志文件？

我想每天创建一个目录`04-20-2013`，然后每个应用程序的模块我想在该目录中创建一个文件。

例如

```
/var/xAppLog/
............/04-20-2013/module1.log
............/04-20-2013/module2.log
............/04-20-2013/module3.log
............/05-20-2013/module1.log
............/05-20-2013/module2.log
............/05-20-2013/module3.log 
```

我怎样才能做到这一点？我是 Java 世界的新手。

# android - 如何更改广播接收器内的变量内容？

> ID：15767149
> 
> 赞同：0
> 
> 时间：2013-04-02T14:46:24.213
> 
> 标签：android, broadcastreceiver

在我的`BroadcastReceiver`我试图检测未接来电。

所以我正在检查电话是否从`EXTRA_STATE_RINGING`到`EXTRA_STATE_IDLE`。我给每个状态一个固定值并检查是否获得了特定值。

但是，变量的值并没有像我期望的那样反映。我尝试过使用`SharedPreferences`，但我认为它们不能在`BroadcastReceiver`. 我试过调用不同的类对象，但它给了我错误。

我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:51:34.263

您应该使用一些持久存储之王来保持您的状态变量值在接收广播之间。你可以用`mysql`，`files`或者更好`SharedPreferences`。[您可以轻松地`SharedPreferences`从`BroadcastReceiver`](https://stackoverflow.com/questions/9075030/shared-preferences-inside-broadcastreceiver).

# php - Google Analytics PHP API (GAPI) 不返回关键字

> ID：15767151
> 
> 赞同：0
> 
> 时间：2013-04-02T14:46:31.550
> 
> 标签：php, analytics, keyword, google-analytics-api, search-keywords

我正在练习使用 GAPI，到目前为止，我已经完成了大部分工作。
目前，我坚持显示 5 个最常用的关键字。我所有的代码返回的是一个空数组。
我一直在努力寻找解决方案，但到目前为止还没有成功。
这是我的代码：

```
<?php
$ga->requestReportData(GA_PROFILE_ID, 'searchKeyword', 'pageviews', '-pageviews', null, null, null, 1, 5);
foreach($ga->getResults() as $result) {

    echo "$result - ".$result->getpageViews();

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:46:34.173

最终，我自己找到了。
显然，searchKeyword 用于内部搜索，keyword 用于源搜索。

来源：
关键字：[https](https://developers.google.com/analytics/devguides/reporting/core/dimsmets/trafficsources#ga:keyword)
://developers.google.com/analytics/devguides/reporting/core/dimsmets/trafficsources#ga:keyword searchKeyword：[https ://developers.google.com/analytics/devguides/reporting/core/dimsmets /internalsearch#ga:searchKeyword](https://developers.google.com/analytics/devguides/reporting/core/dimsmets/internalsearch#ga:searchKeyword)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:41:55.213

看起来您正在为文档说应该是数组的属性发送字符串。

```
$ga->requestReportData(GA_PROFILE_ID, 'searchKeyword', 'pageviews', '-pageviews', null, null, null, 1, 5); 
```

尝试使用数组作为[GAPI](https://code.google.com/p/gapi-google-analytics-php-interface/wiki/GAPIDocumentation)推荐的文档：

```
$ga->requestReportData(GA_PROFILE_ID, array('searchKeyword'), array('pageviews'), array('-pageviews'), null, null, null, 1, 5); 
```

# c# - 在 Sitecore 中将类加载为列表

> ID：15767155
> 
> 赞同：3
> 
> 时间：2013-04-02T14:46:37.767
> 
> 标签：c#, xml, interface, sitecore, sitecore6

```
#region Web Service GetLawyerBioInfo
        [WebMethod]
        public System.Xml.XmlNode GetLawyerBioInfo()
        {
                System.Xml.XmlDocument xDoc = new System.Xml.XmlDocument();
                xDoc.PreserveWhitespace = true;
                System.Xml.XmlReaderSettings xmlRS = new System.Xml.XmlReaderSettings();
                xmlRS.IgnoreWhitespace = false;
                xmlRS.IgnoreProcessingInstructions = true;
                xmlRS.IgnoreComments = true;
                try
                {
                    LawyerInfo mInfo = GetLawyerInfo();
                    xDoc.LoadXml(LawyerInfo.GetXml(mInfo));
                    return xDoc.DocumentElement;
                }
                catch (Exception pEx)
                {
                    xDoc.LoadXml("<ErrorMessage>Error occured in GetLawyerBioInfo WS - " + pEx.Message + "</ErrorMessage>");
                    return xDoc.DocumentElement;
                }
        }
        #endregion 
```

webservice 以获取 xml 中的数据，此处调用 GetLawyerInfo()。

```
 #region GetLawyerInfo
        public LawyerInfo GetLawyerInfo()
        {

           Sitecore.Data.Database mSiteCoreDB = Sitecore.Configuration.Factory.GetDatabase("master");
           LawyerInfo mInfo = new LawyerInfo();

                string query = "/sitecore/content/Global Content/People/A";
                Sitecore.Data.Items.Item root = mSiteCoreDB.GetItem(query);
                foreach (Sitecore.Data.Items.Item mBioItem in root.Children)
                {
                    mInfo.LawyerID = mBioItem.ID.ToString();
                    mInfo.LawyerName  = mBioItem.Fields["FirstName"].Value.ToString();

                    PropertyInfo[] mPropertyInfo = mInfo.GetType().GetProperties();
                    foreach (PropertyInfo mProperty in mPropertyInfo)
                    {
                        object[] mObjList = mProperty.GetCustomAttributes(false);
                        ArrayList mList = mList = new ArrayList();
                        foreach (object mObj in mObjList)
                        {
                            if (mObj is BiographyAttribute)
                            {
                                if (((BiographyAttribute)mObj).MultipleFieldsPropertyName.Equals("PracticeRelationships"))
                                {
                                    Sitecore.Data.Fields.MultilistField mMultilistField = mBioItem.Fields[((BiographyAttribute)mObj).MultipleFieldsPropertyName];
                                    foreach (Sitecore.Data.Items.Item mChild in mMultilistField.GetItems())
                                    {
                                        Sitecore.Data.Items.Item mMLI = mChild.Database.Items.GetItem(mChild.ID);
                                        PracticeItem mPitems = new PracticeItem();
                                        mPitems.PracticeTitle = mMLI.DisplayName;
                                        mPitems.PracticeID = mMLI.ID.ToString();
                                        mList.Add(mPitems);
                                    }
                                }
                            }
                        }
                        if (mProperty.Name.Equals("Practices") )
                        {
                            IBioInterface[] mItems = null;
                            if (mProperty.Name.Equals("Practices"))
                            {
                                mItems = new PracticeItem[mList.Count];
                            }

                            for (int x = 0; x < mList.Count; x++)
                            {
                                mItems[x] = (IBioInterface)mList[x];
                            }
                            mProperty.SetValue(mInfo, mItems, null);
                        }
                    }
                }
            }
         return mInfo;
        }
        #endregion 
```

遍历 A 文件夹下的所有站点核心项目。

```
 #region LawyerInfo
        [Serializable()]
        public class LawyerInfo
        {
            private string iLawyerID = "";
            private string iLawyerName = "";

            private PracticeItem[] iPractices = null;

            public LawyerInfo()
            {
            }

            #region properties
            public string LawyerID { get { return iLawyerID; } set { iLawyerID = value; } }
            public string LawyerName { get { return iLawyerName; } set { iLawyerName = value; } }

            [BiographyAttribute(HasMultipleFields = true, IsRepeatable = false, MultipleFieldsPropertyName = "PracticeRelationships")]
            public PracticeItem[] Practices { get { return iPractices; } set { iPractices = value; } }
            #endregion

            public static string GetXml(LawyerInfo pObject)
            {
                XmlSerializer mSerializer = new XmlSerializer(pObject.GetType());
                StringWriter mWriter = new StringWriter();
                mSerializer.Serialize(mWriter, pObject);
                return LawyerInfo.ReplaceXml(mWriter, false);
            }

            public static string GetXml(LawyerInfo[] pObject)
            {
                XmlSerializer mSerializer = new XmlSerializer(pObject.GetType());
                StringWriter mWriter = new StringWriter();
                mSerializer.Serialize(mWriter, pObject);
                return LawyerInfo.ReplaceXml(mWriter, true);
            }

            private static string ReplaceXml(StringWriter pWriter, bool pChangeTag)
            {
                string mString = pWriter.ToString().Replace("<?xml version=\"1.0\" encoding=\"utf-16\"?>", "");
                mString = mString.Replace(" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"", "");
                mString = mString.Replace("\r\n", "");
                mString = mString.Replace("&amp;amp;", "&amp;");
                return mString;
            }
        }
        #endregion 
```

律师信息类

```
 #region Implementation of IBioInterface

        public class IBioInterface
        {
        }
        public class PracticeItem : IBioInterface
        {
            private string iPracticeTitle = "";
            private string iPracticeID = "";
            public PracticeItem()
            {
            }

            public string PracticeTitle { get { return iPracticeTitle; } set { iPracticeTitle = value; } }
            public string PracticeID { get { return iPracticeID; } set { iPracticeID = value; } }
        }

        #endregion 
```

我想拥有 A 下的所有记录，但只在 foreach 循环之后获取最后一条记录。如何获取儿童项目的所有记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:56:15.190

您的`GetLawyerInfo()`方法应如下所示：

```
public LawyerInfo[] GetLawyerInfo()
{
    Sitecore.Data.Database mSiteCoreDB = Sitecore.Configuration.Factory.GetDatabase("master");
    List<LawyerInfo> infos = new List<LawyerInfo>();

    string query = "/sitecore/content/Global Content/People/A";
    Sitecore.Data.Items.Item root = mSiteCoreDB.GetItem(query);
    foreach (Sitecore.Data.Items.Item mBioItem in root.Children)
    {
        LawyerInfo mInfo = new LawyerInfo();
        infos.Add(mInfo);
        mInfo.LawyerID = mBioItem.ID.ToString();

        // your code goes here
            // ...
    }
    return infos.ToArray();
} 
```

您的解决方案遍历所有子对象，但将它们的值分配给一个`LawyerInfo`对象。

此解决方案将返回`LawyerInfo`对象数组并将每个子对象添加到数组中。

# validation - LoadRunner：如何在 C 语言中重放脚本时找到图像大小？

> ID：15767162
> 
> 赞同：1
> 
> 时间：2013-04-02T14:47:01.907
> 
> 标签：validation, loadrunner

我正在运行一个脚本，并且图像已下载到我的浏览器的缓存中如果我想检查图像大小，我可以使用 C 语言中的什么函数，就像我使用 web_reg_find() 进行页面验证一样，无论图像是否出现但是如果我也想检查它的大小怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:40:37.470

是的，你可以这样做。为此，您需要使用录制选项录制页面：常规 > 录制 > 基于 HTML 的脚本（HTML 高级）> 非 HTML 生成的元素 > 分步录制

此外，对于回放，请确保您没有缓存资源，否则这将返回“0”。

记录页面后，找到您尝试报告大小的图像的特定调用，并在该调用之后直接添加函数：web_get_int_property(HTTP_INFO_DOWNLOAD_SIZE);

此函数返回一个“int”，因此您需要设置一个变量来捕获该值。它看起来像这样：

```
Action()
{

    int imageSize;

    web_url("my_image.gif", 
        "URL=http://www.abc.com/images/my_image.gif", 
        "TargetFrame=", 
        "Resource=1", 
        "RecContentType=image/gif", 
        "Referer=http://www.abc.com/", 
        "Snapshot=t01.inf", 
        LAST);

    imageSize = web_get_int_property(HTTP_INFO_DOWNLOAD_SIZE);

} 
```

可能有不同的方法可以做到这一点，但这在过去对我有用。

# python - 使用python从二进制文件中读取数字数据

> ID：15767163
> 
> 赞同：2
> 
> 时间：2013-04-02T14:47:05.320
> 
> 标签：python, file-io, binary

我想读取一个包含标题部分（文本）和数字数组的二进制数据文件。我可以使用 f.read(block_size) 在标题部分保持流式传输，但是读取数字数组的最佳方法是什么？

在 MatLab 中，我可以做

```
fid = fopen(data_file_name, 'rb');
line = fread(fid, block_size, '*char'); 
data = fread(fid, 'long'); 
```

在 Python 中，我所做的是

```
f = open(data_file_name, 'rb')
header = f.read(block_size) 
```

从这里我不知道如何到达数字数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:48:11.820

您可以使用[`struct.unpack`](http://docs.python.org/2/library/struct.html#struct.unpack)来解压缩数字数据。

例如

```
with open('file','rb') as fin:
    header = fin.read(header_size)
    data_str = fin.read(num_data_bytes)
    data_tuple = struct.unpack('100f',data_str)  #100 4-byte floats 
```

根据数据，您可以使用[`numpy.fromfile`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html). 该函数接受一个打开的文件对象，因此您可以读取标头，然后将打开的文件对象传入，以便 numpy 可以读取数据。在[这个问题](https://stackoverflow.com/q/11760095/748858)中，我询问了将二进制数据从字符串读取到 numpy 数组的详细信息。这是一个略有不同的问题，但那里的大部分答案也适用于此（如何指定字节顺序等）

# html - Firefox 和 chrome 的 css clearfix 行为不一样

> ID：15767164
> 
> 赞同：0
> 
> 时间：2013-04-02T14:47:08.583
> 
> 标签：html, css, css-float, clearfix

我在计算宽度为 0 的 div 上将此类用于 css clearfix，但其中包含宽度 x 的内容。

```
.clearfix {
 *zoom: 1;
 &:before,
 &:after {
   display: table;
   content: "";
 }
 &:after {
   clear: both;
 }
} 
```

发生的事情是，在我使用此类后，**在 chrome 中，div 采用了其内容的宽度。****但在 firefox**中，div 采用其父级的宽度。

行为不应该是 div 在两个浏览器中都采用其内容的宽度吗？可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:57:39.680

如果它不干扰您的其他样式，您可以使用`overflow: hidden;`强制容器扩展浮动内容等。

请参阅此 jsFiddle： http: [//jsfiddle.net/mBSCj/](http://jsfiddle.net/mBSCj/)，它适用于所有主要浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:00:45.727

还有另一种在不使用额外标记的情况下清除浮动的方法。它比*micro clearfix*早了好几年。

[http://www.positioniseverything.net/easyclearing.html](http://www.positioniseverything.net/easyclearing.html)

```
.clearfix:after {
    content: " ";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
} 
```

# c# - 如何在不知道格式的情况下反序列化 json？

> ID：15767165
> 
> 赞同：1
> 
> 时间：2013-04-02T14:47:11.773
> 
> 标签：c#, json, windows-phone-8, restsharp

我使用 RestSharp 并且在反序列化 Json 时遇到问题。

如果成功，我会收到一个这样的 Json（数据是一个表）：

```
{"status": "OK", "data": "[...]"} 
```

如果出现错误，我会收到一个 Json（数据是字符串）：

```
{"status": "ERROR", "data": "..."} 
```

我怎么知道我是否必须用表格或字符串反序列化 Json？

我的方法是这样的（它返回一个表，但如果 Json 返回一个字符串作为数据会崩溃）：

```
public Task<Items> GetItemById(string id)
{
var client =
new RestClient(string.Format("{0}/{1}/{2}/{3}/{4}", _baseUrl, 
    AppResources.RestApiVersion, userId, token, AppResources.NotUse));

var tcs = new TaskCompletionSource<Items>();
var request = new RestRequest(string.Format("/items/get/{0}", id));
client.ExecuteAsync<Items>(request, response => {
    try
    {
        tcs.SetResult(new JsonDeserializer().Deserialize<Items>(response));
    }
    catch (InvalidCastException e)
    {

    }
});
return tcs.Task;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:20:21.327

我使用此答案中的代码：[将 JSON 反序列化为 C# 动态对象？](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)

它根据 JSON 对象的内容生成一个动态对象。我非常喜欢它，尽管他的代码有几个我在下面的版本中修复的错误：

```
internal sealed class DynamicJsonConverter : JavaScriptConverter
{
    public override object Deserialize(IDictionary<string, object> dictionary, Type type, JavaScriptSerializer serializer)
    {
        if (dictionary == null)
            throw new ArgumentNullException("dictionary");

        return type == typeof(object) ? new DynamicJsonObject(dictionary) : null;
    }

    public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override IEnumerable<Type> SupportedTypes
    {
        get { return new ReadOnlyCollection<Type>(new List<Type>(new[] { typeof(object) })); }
    }

    #region Nested type: DynamicJsonObject

    private sealed class DynamicJsonObject : DynamicObject
    {
        private readonly IDictionary<string, object> _dictionary;

        public DynamicJsonObject(IDictionary<string, object> dictionary)
        {
            if (dictionary == null)
                throw new ArgumentNullException("dictionary");
            _dictionary = dictionary;
        }

        public override string ToString()
        {
            var sb = new StringBuilder();
            ToString(sb);
            return sb.ToString();
        }

        private void ToString(StringBuilder sb)
        {
            sb.Append("{");
            var firstInDictionary = true;
            foreach (var pair in _dictionary)
            {
                if (!firstInDictionary)
                    sb.Append(",");
                firstInDictionary = false;
                var value = pair.Value;
                var name = pair.Key;
                if (value is string)
                {
                    sb.AppendFormat("\"{0}\":\"{1}\"", name, value);
                }
                else if (value is IDictionary<string, object>)
                {
                    sb.AppendFormat("\"{0}\":", name);
                    new DynamicJsonObject((IDictionary<string, object>)value).ToString(sb);
                }
                else if (value is ArrayList)
                {
                    sb.Append("\"");
                    sb.Append(name);
                    sb.Append("\":[");
                    var firstInArray = true;
                    foreach (var arrayValue in (ArrayList)value)
                    {
                        if (!firstInArray)
                            sb.Append(",");
                        firstInArray = false;
                        if (arrayValue is IDictionary<string, object>)
                            new DynamicJsonObject((IDictionary<string, object>)arrayValue).ToString(sb);
                        else if (arrayValue is string)
                            sb.AppendFormat("\"{0}\"", arrayValue);
                        else
                            sb.AppendFormat("{0}", arrayValue);

                    }
                    sb.Append("]");
                }
                else
                {
                    sb.AppendFormat("\"{0}\":{1}", name, value);
                }
            }
            sb.Append("}");
        }

        public override bool TryGetMember(GetMemberBinder binder, out object result)
        {
            if (!_dictionary.TryGetValue(binder.Name, out result))
            {
                // return null to avoid exception.  caller can check for null this way...
                result = null;
                return true;
            }

            var dictionary = result as IDictionary<string, object>;
            if (dictionary != null)
            {
                result = new DynamicJsonObject(dictionary);
                return true;
            }

            var arrayList = result as ArrayList;
            if (arrayList != null && arrayList.Count > 0)
            {
                if (arrayList[0] is IDictionary<string, object>)
                    result = new List<object>(arrayList.Cast<IDictionary<string, object>>().Select(x => new DynamicJsonObject(x)));
                else
                    result = new List<object>(arrayList.Cast<object>());
            }

            return true;
        }
    }

    #endregion
} 
```

他的代码示例的其余部分都适用。

# git - 使用 Repo 下载 android 源代码时出现致命错误

> ID：15767170
> 
> 赞同：1
> 
> 时间：2013-04-02T14:47:18.280
> 
> 标签：git, android-source, repository

我想下载安卓源代码。我按照以下步骤，

```
$ curl https://dl-ssl.google.com/dl/googlesource/git-repo/repo > ~/bin/repo
$ chmod a+x ~/bin/repo
$ mkdir android-source
$ cd android-source
$ repo init -u https://android.googlesource.com/platform/manifest 
```

但出现错误

```
**Get https://gerrit.googlesource.com/git-repo
fatal: Unable to find remote helper for 'https'** 
```

我正在使用 Ubuntu-10.04 并且我已经安装了所需的所有软件包并按照[此处提到的所有步骤进行操作](http://source.android.com/source/initializing.html)

任何帮助，将不胜感激，

谢谢，尼拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T21:14:51.320

如果你不能让 curl 工作，你可以使用

```
wget -O - https://dl-ssl.google.com/dl/googlesource/git-repo/repo > ~/bin/repo 
```

反而。

顺便说一句，您可以通过运行检查您的 curl 版本是否支持 https

```
curl -V 
```

如果确实如此，它应该在某处打印“https”。

# vb.net - 为 Web 服务生成的 output.config 文件的作用是什么？

> ID：15767174
> 
> 赞同：4
> 
> 时间：2013-04-02T14:47:36.190
> 
> 标签：vb.net, visual-studio-2010, web-services

我在 Visual Basic 中为 Web 服务生成了一个类文件，我试图用它来连接到第三方应用程序进行身份验证。

当我运行命令行命令为 web 服务生成类文件时，我还发现了一个使用它生成的 output.config 文件。

这个文件的作用是什么，我应该把它放在哪里以确保应用程序可以与 web 服务成功通信？

“我应该把它放在哪里”我的意思是，它应该与 web 服务类文件放在同一个文件夹中吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:24:30.513

> 我在 Visual Basic [...] 中为 Web 服务生成了一个类文件

我假设您使用[svcutil.exe](http://msdn.microsoft.com/en-us/library/aa347733.aspx)？Svcutil 不仅创建客户端代码，还创建配置。配置在`output.config`文件中。在其中你会发现诸如[客户端端点、绑定配置或端点行为](http://msdn.microsoft.com/en-us/library/ms733107.aspx)之类的东西。

您将需要[复制您在其中找到的配置`output.config`](http://msdn.microsoft.com/en-us/library/ms734663.aspx)并将其放在您的`App.config`文件或`Web.config`文件中（取决于您拥有的应用程序的类型）。

# scala - 为什么 2.10 坚持指定类型参数边界（在 2.9 中运行良好）？

> ID：15767176
> 
> 赞同：4
> 
> 时间：2013-04-02T14:47:41.183
> 
> 标签：scala, scala-2.10, scala-2.9

我有以下案例类：

```
case class Alert[T <: Transport](destination: Destination[T], message: Message[T]) 
```

在 Scala 2.9.2 中，以下方法签名编译得很好：

```
def send(notification: Alert[_]) {
  notification match {
    ...
  }
} 
```

现在在 Scala 2.10.1 中，它无法编译并出现以下错误：

```
type arguments [_$1] do not conform to class Alert's type parameter bounds [T <: code.notifications.Transport] 
```

为什么是这样？如何修复错误？简单地给出相同的类型界限会`send`导致更多的编译错误......

**更新：**查看[SIP-18](http://docs.scala-lang.org/sips/pending/modularizing-language-features.html)，我不认为原因是我没有启用存在类型，因为 SIP-18 说它只需要非通配符类型，这正是我在这里所拥有的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:20:56.527

似乎有错误说存在类型“ `_`”不限于是`Transport`. 这可能是首选的解决方案，

```
trait Transport
trait Destination[T]
trait Message[T]
case class Alert[T <: Transport](destination: Destination[T], message: Message[T])

def send[T <: Transport](notification: Alert[T]) {
  notification match {
    case _ => ()
  }
} 
```

这似乎也有效，

```
def send(notification: Alert[_ <: Transport]) 
```

但我认为最好不要使用存在类型。

# javascript - 如何从特定点拆分网址

> ID：15767178
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:47:43.713
> 
> 标签：javascript, jquery

我有一个网址，例如： [http ://www.mysite.com/page/blog/category/postname/](http://www.mysite.com/page/blog/category/postname/)

我需要做的是将它从第三个到最后一个'/'拆分，所以它返回：category/postname/

我该怎么做呢？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:51:52.180

试试这个：

```
var last3 = str.split("/").slice(-3).join("/"); 
```

# text - Crystal Reports - 如何格式化文本对象以自动在每行的开头插入文本？

> ID：15767179
> 
> 赞同：1
> 
> 时间：2013-04-02T14:47:45.683
> 
> 标签：text, crystal-reports, word-wrap

这是一个例子：

```
CSA.1169-1342, 1169-1342, 1349-1353, 
1349-1353, 1355-1368, 1355-1368, 
1371-2498, 1371-2498, 2501-2661, 
2501-2661, 2665-2691, 2665-2691, 
2693-2893, 2693-2893, 2897-3000, 
2897-3000 
```

我需要每行都以前缀 CSA 开头。它来自不同的领域。我还从两个独立的字段创建了这个字符串，它们分别呈现 1349 和 1342 并添加 - 和逗号。目标是能够保持对象的宽度相同，而文本大小实际上可能会发生变化，并允许字段换行并在每次换行时包含前缀。这是该字段的另一个示例：

```
CRTX.220-239, 220-239, 241-249, 
241-249, 251-948, 251-948, 
90-218, 90-218, 950-983, 
950-983, 985-1000, 985-1000, 
```

无论对象何时包装，我需要的是结果呈现以下内容：

```
CRTX.220-239, 220-239, 241-249, 
CRTX.241-249, 251-948, 251-948, 
CRTX.90-218, 90-218, 950-983, 
CRTX.950-983, 985-1000, 985-1000, 
```

我的意图是将其作为链接到组的子报告插入。字符串中的 CRTX 将链接子报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:51:48.767

您需要在考虑最小和最大字符数的同时决定一行可以容纳多少个数字范围。给定您的示例，假设 3 是您最想要的每行。这应该足以让您入门。

```
local stringvar sampletext :=
 "CRTX.220-239, 220-239, 241-249, 
 241-249, 251-948, 251-948, 
 90-218, 90-218, 950-983, 
 950-983, 985-1000, 985-1000,";

local stringvar array samplearry := split(sampletext,', '); //split string into elements
local numbervar x;
local stringvar out;

for x := 1 to ubound(samplearry)-1 do //ignore last element in array since it's empty
     (if remainder(x,3)=0 then out:=out + trim(samplearry[x]) + ", " + chr(13) + "CRTX."
      else out:=out + samplearry[x] + ", ");

//trim the line prefix if no elements fall on that line
if remainder(ubound(samplearry)-1,3)=0 then left(out,length(out)-8) else out 
```

该公式会将您的字符串转换为：

```
CRTX.220-239, 220-239, 241-249, 
CRTX.241-249, 251-948, 251-948, 
CRTX.90-218, 90-218, 950-983, 
CRTX.950-983, 985-1000, 985-1000, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:48:20.317

我不知道在您调整字段大小时动态执行此操作的能力，但使用以下公式可以更改包含 mod 的语句，这将提供您问题中的输出。更改为 mod 4 = 0 将每行输出四个数字等......（将字段更改为可以增长）

```
numbervar a;
stringvar prefix := split({yourfeild},".")[1];
stringvar data := split({yourfeild},".")[2];
stringvar array numbers := split(data,",");
numbervar counter := ubound(split(data,","));
stringvar output;
for a := 1 to counter do 
(
if a mod 3 =0 then output := output + trim(numbers[a]) +", " + chr(13) +  prefix +"."
else output := output + trim(numbers[a]) +", "
);
output := prefix + "."+mid(output,1,len(output)-2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T17:01:53.680

提示：像这样的复杂需求最好在 .NET 或您使用的任何语言中处理。与其在 Crystal 中编写大量代码，不如使用 SQL-Server、C# 或其他方式编写，然后以您希望它显示的形式将其传递给 Crystal。仅将 Crystal 用作演示服务。

你会后悔将 .rpts 变成迷你应用程序。它将您永远绑定到该技术，并使支持/维护变得困难。

# django - Django接收器列'user_id'不能为空

> ID：15767185
> 
> 赞同：0
> 
> 时间：2013-04-02T14:47:57.933
> 
> 标签：django, django-signals

我正在使用[userena](http://www.django-userena.org/)接收器，但出现以下错误...

**/accounts/signup/ 处的 IntegrityError（1048，“列 'user_id' 不能为空”）**

我假设我没有在我自己的 receivers.py 中正确访问用户。有人可以看看吗？

谢谢

**接收器.py**

```
from django.dispatch import receiver
from userena.signals import signup_complete

from accounts.models import Account

@receiver(signup_complete)
def handle_signup_complete(user, **kwargs):
    try:
        account = Account.objects.get(user=user)
    except Account.DoesNotExist:
        account = Account.objects.create()
        account.credit_limit = 0
        account.balance = 0
        account.user = user
        account.save() 
```

**模型.py**

```
class Account(models.Model):

    OPEN, FROZEN, CLOSED = 'Open', 'Frozen', 'Closed'
    status = models.CharField(max_length=32, default=OPEN)
    credit_limit = models.DecimalField(max_digits=10, decimal_places=1,
                                       null=True, blank=True)
    # For performance, we keep a cached balance
    balance = models.DecimalField(max_digits=10, decimal_places=1,
                                  null=True, blank=True)
    #FK
    user = models.OneToOneField(User) 
```

**用户信号.py**

```
from django.dispatch import Signal

signup_complete = Signal(providing_args=["user",])
activation_complete = Signal(providing_args=["user",])
confirmation_complete = Signal(providing_args=["user","old_email"])
password_complete = Signal(providing_args=["user",]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:00:12.327

您使用`create`错误，您应该将值作为参数传递给创建。[https://docs.djangoproject.com/en/1.5/ref/models/querysets/#django.db.models.query.QuerySet.create](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#django.db.models.query.QuerySet.create)

```
@receiver(signup_complete)
def handle_signup_complete(user, **kwargs):
    try:
        account = Account.objects.get(user=user)
    except Account.DoesNotExist:
        account = Account.objects.create(
            user=user,
            credit_limit=0,
            balance=0,
        ) 
```

基本上，问题是在创建对象时需要传递任何必填字段。

# ember.js - Ember.js 中的嵌套模板

> ID：15767186
> 
> 赞同：0
> 
> 时间：2013-04-02T14:47:58.993
> 
> 标签：ember.js

试图按照[这个](https://github.com/ghempton/ember-router-example)例子（现在已经将 ember 更新到 1.0rc2），我想嵌套模板来开始。`{{outlet}}`我在模板中有第一个附加项`home`，我希望它包含两个嵌套视图（一个“简历”`span9`和另一个“工具表” `span3`，供引导爱好者使用）。“简历”将再次具有嵌套模板，但一旦我能通过第一级，我想我可以。

根据[这个SO？](https://stackoverflow.com/questions/9576853/what-is-the-best-solution-for-multi-level-nested-view)，以及我编辑的[JS Fiddle 答案](http://jsfiddle.net/chrisfrisina/9w5QU/8/)，我有点看到它是如何完成的，但是，答案在咖啡脚本中，并且示例中的路由器比我能理解的要复杂一些（使用`connectOutlets`，给定它的一些助手方法，我自己有点理解。

最终结果应该看起来像[这样 fiddle](http://jsfiddle.net/chrisfrisina/ME54A/)。

但是我如何让其他模板在家庭路由器中呈现，因为`sections`路由器和`items`路由器位于不同的路径上，但是，这些将是索引路由的一部分`/`？我是否需要多个`{{outlets}}`？，以及如何将适当的模板路由到适当的插座占位符？

信息：

```
DEBUG: ------------------------------- 
DEBUG: Ember.VERSION : 1.0.0-rc.2 
DEBUG: Handlebars.VERSION : 1.0.0-rc.3 
DEBUG: jQuery.VERSION : 1.9.1 
DEBUG: ------------------------------- 
```

索引.html：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Resume Builder</title>
    <meta name="description" content="A way to create a tailored resume from my CV" />
    <meta name="author" content="Chris Frisina" />

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet" />
    <link href="css/RB.css" rel="stylesheet" />
  </head>

  <body>

    <script src="js/libs/jquery-1.7.1.js"></script>
    <script src="js/libs/jquery.lorem.js"></script>
    <script src="js/libs/bootstrap.min.js"></script>
    <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
    <!-- // <script src="js/libs/ember1.js"></script> -->
    <script src="js/libs/ember2.js"></script>
    <script src="js/RB.js"></script>

    <script type="text/x-handlebars" data-template-name="application">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container-fluid">
            <div class="brand home" {{bindAttr class="isHome:active"}} {{action "doHome"}}>Chris Frisina</div>
            <div class="nav-collapse pull-right">
              <ul class="nav">
                <li class="sections"><a>1</a></li>
                <li class="sections"><a>2</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid">
        {{outlet}}
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="index">
      <h3 class="demo-panel-title">This is the index template</h3>
      {{home}}
    </script>

    <script type="text/x-handlebars" data-template-name="home">
      <div class="row-fluid">
        <!-- This is where I resume template should be placed -->
        {{resume}}
        <!-- This is where I tooltable template should be placed -->
        {{tooltable}}
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="resume">
      <div class="span9">
        <h1>Viewer</h1>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="tooltable">
      <div class="span3">
        <div id="tooltable" class="tooltable hero-unit affix">
          <h1>Tooltable</h1>
          <p>Selector 1</p>
          <p>Selector 1</p>
        </div>
      </div>
    </script>

  </body>
</html> 
```

应用程序.js：

```
// Attach the application to window
window.RB = Ember.Application.create({});

// Define the main application controller. This is automatically picked up by
// the application and initialized.
RB.ApplicationController = Ember.Controller.extend({

});
RB.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

// Router
RB.Router = Ember.Router.extend({

});
RB.Router.map(function(){

});

// Home
RB.HomeController = Ember.Controller.extend({
});
RB.HomeView = Ember.View.extend({
  templateName: 'home',
});
// Resume
RB.ResumeController = Ember.ObjectController.extend({
});
RB.ResumeView = Ember.View.extend({
  templateName: 'resume'
});

// Tooltable
RB.TooltableController = Ember.ObjectController.extend({
});
RB.TooltableView = Ember.View.extend({
  templateName: 'tooltable'
});

//Defer the start until advanceReadiness() is complete
// cant init RB manually, must use advanceReadiness(), which needs defer...
RB.deferReadiness();
// var test = function() {
  RB.advanceReadiness();
// }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:34:29.783

我无法回答整个问题，但我可以先举例说明如何嵌套模板并编写使用它们的路线

```
App.Router.map(function(match) {
    this.resource("days", { path: "/days" }, function() {
        this.resource("day", { path: "/:day_id" }, function() {
            this.resource("appointments", { path: "/appointments" }, function() {
                this.resource("appointment", { path: "/:appointment_id" }, function() {
                    this.route("edit", { path: "/edit" });
                });
            });
        });
    });
}); 
```

对于上面的示例路线，我计划让用户从 /days 到特定日期 /days/1 点击

然后在那一天内，我希望他们能够显示所有约会

然后在约会中，我想让他们能够“点击”特定的apt并显示或编辑它

因为我的应用程序以天数路线开始，所以在我的应用程序索引中，我想在应用程序启动时立即跳转到天数（例如，我的应用程序从 /days 开始而不是从 /days 开始）

```
App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('days');
    }
}); 
```

模板看起来像这样

application.handlebars （或者如果你内联它）

```
{{outlet}} 
```

days.handlebars

```
{{#each day in controller}}
  {{#linkTo 'day' day}}view details about the day{{/linkTo}}
{{/each}}

{{outlet}} 
```

day.handlebars

```
{{#linkTo "appointments" target="controller"}}show all the apts{{/linkTo}} 
```

约会.车把

```
{{#each appointment in controller}}
<a href="#" {{action 'addAppointment' appointment target="view"}}>{{appointment.start}} - {{appointment.end}}</a><br />
{{/each}} 
```

我的约会路线如下所示（提供上述模板中的约会）

```
App.AppointmentsIndexRoute = Ember.Route.extend({
    model: function(params) {
        var day = this.modelFor("day");
        return day.get('appointments');
    }
}); 
```

# jquery - 如何使用 jquery 更改 li 内的 href 类？

> ID：15767189
> 
> 赞同：0
> 
> 时间：2013-04-02T14:48:07.987
> 
> 标签：jquery, html-lists, href

我是 jquery 的新手。我确实阅读了一些针对 li 的方法，但没有了解如何针对 li 中的 href 来更改所选菜单的类。代码如下：

```
<ul class="cssmenu">
    <li class="home">
        <a href="#" class="selected" title="Home">
            <span class="displace">
            </span>
        </a>
    </li>
    <li class="blog">
        <a href="#" title="Blog">
            <span class="displace">
            </span>
        </a>
    </li>
    <li class="contact">
        <a href="#" title="Contact">
            <span class="displace">
            </span>
        </a>
    </li>
</ul> 
```

我正在使用的脚本是

```
$("ul").on("click", "li", function() 
{
    var $this = $(this);
    $this.addClass("selected")
        .prependTo($this.parent())
        .siblings().removeClass("selected");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:53:51.550

由于您将点击事件绑定到列表项，因此您需要先使用 find() 从列表项的所有子锚点中删除该类，然后将所选类添加到列表的特定锚点子项（或锚点) 你点击了。

```
 $("ul").on("click", "li", function () {
     $(this).siblings().find('a').removeClass("selected");
     $('a',this).addClass("selected");
 }); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/3q2kQ/)**

# c# - 如何在c#中将数组类型转换为double

> ID：15767194
> 
> 赞同：-4
> 
> 时间：2013-04-02T14:48:19.340
> 
> 标签：c#, arrays, types

您好，我正在尝试更改字符串数组的类型，其中包含像 {12.3 , 33.7 , ...} 这样的数字，我想在 c# 中将此数组的类型转换为 Double

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:48:59.383

LINQ`Select`用于将对象从一种形式转换为另一种形式。`double.Parse`用于将值解析`string`为`double`值。您可以将它们组合为：

```
double[] doubles = strings.Select(double.Parse).ToArray(); 
```

您还可以使用所谓的 lambda 语法

```
double[] doubles = strings.Select(s => double.Parse(s)).ToArray(); 
```

您绝对应该熟悉 LINQ 技术。[将101 个 LINQ 示例](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)的精彩集合视为学习教程

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:50:25.697

```
var doubleArray = Array.ConvertAll(stringArray, input => double.Parse(input)); 
```

# python - 带线程的无限循环：线程枚举为无限

> ID：15767196
> 
> 赞同：0
> 
> 时间：2013-04-02T14:48:28.483
> 
> 标签：python, multithreading, loops

我已经用 python 编写了我的第一个线程脚本，所以我对多线程非常陌生。我有一个真正的无限循环和 12 个线程，每 n 秒执行一次。发生的情况是，每次循环重复时，线程的数量都会增加（第一次从 1 运行到 12，第二次从 13 运行到 24 直到巨大的数字）等等。我猜它只是线程的“名称”，实际上在每次运行结束时我调用 threading.activeCount() 并得到 1（我猜是主线程）。

在脚本结束时，我还调用 join 以确保线程已完成它们的工作，因此由于在每次运行结束时我只有 1 个线程，我想当执行数小时后线程得到 10000 之类的数字时，我不应该担心。 ..

我错了吗？谢谢

# r - ARIMA 结构

> ID：15767197
> 
> 赞同：1
> 
> 时间：2013-04-02T14:48:29.567
> 
> 标签：r, time-series

我正在尝试使用 AIC 标准找到最佳模型结构。我已经知道 d=1 和 D=1 的季节性分量等于 12。所以：

```
best.order<-c(0,0,0)
best.aic<-Inf
n <- length(x1)
for (i in 0:2) for (j in 0:2)  {
fit <- arima(log(x1), c(i, 1, j),seasonal = list(order = c(i, 1, j), period = 12),method="CSS-ML")
fit.aic <- -2 * fit$loglik + (log(n) + 1) * length(fit$coef) 
if (fit.aic < best.aic) {
best.order <- c(i,1,j)
best.arma <- arima(resid(fit), order=best.order)
best.aic <-fit.aic 
}
} 
```

它给了我这个结果：

```
best.arima 
Call:
arima(x = resid(fit), order = best.order, seasonal = list(order = best.order, 
period = 12), method = "CSS-ML")

Coefficients:
      ma1     sma1
  -0.9275  -0.8904
s.e.   0.0899   0.4776

sigma^2 estimated as 0.0005297:  log likelihood = 143.67,  aic = -281.34 
```

这完全不同于：

```
auto.arima(log(x1),d=1,D=1)
ARIMA(1,1,1)                    

Coefficients:
     ar1      ma1
    0.4238  -0.8984
s.e.  0.1202   0.0489

sigma^2 estimated as 0.006367:  log likelihood=84.98
AIC=-163.96   AICc=-163.63   BIC=-156.93 
```

哪个是正确的结果？

# boost - 使用 boost asio 读取串口中的所有可用数据

> ID：15767199
> 
> 赞同：3
> 
> 时间：2013-04-02T14:48:32.467
> 
> 标签：boost, serial-port, boost-asio

我找不到一种方法来使 boost asio 库看起来是最简单的事情之一：

> 读取串行端口中的所有可用数据

例如在 Qt 中有一个`readAll()`方法来自`QextSerialPort`.

实际上，我发现的所有示例都是关于读取一定数量的数据或多线程的。

就我而言，我需要它从 GSM 控制器读取数据。响应大小取决于发送的命令和控制器上下文，因此我无法指定它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-04T06:15:16.590

试试这个：

```
boost::asio::read(
    sock,
    boost::asio::buffer(buf),
    boost::asio::transfer_at_least(1),
    ec
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:33:20.840

您希望[`transfer_all()`完成条件](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/transfer_all.html)与`read()`或`async_read()`自由功能相结合：

```
boost::array<char, 128> buf;
boost::system::error_code ec;
std::size_t n = boost::asio::read(
    sock, boost::asio::buffer(buf),
    boost::asio::transfer_all(), ec);
if (ec)
{
  // An error occurred.
}
else
{
  // n == 128
} 
```

# vb.net - 我可以在 excel 14 上编程并在 excel 12 上工作吗？

> ID：15767200
> 
> 赞同：0
> 
> 时间：2013-04-02T14:48:41.297
> 
> 标签：vb.net, excel

我想制作一个可以在 excel 中写入和读取的 vbnet 程序，我安装了 excel 2010，所以我添加了“Excel 14”，但是如果我希望应用程序在 2007 和 2010 上工作，那么我必须在 excel 2007 或 excel 2010 上对应用程序进行编程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:46:31.100

随着每个版本的改进，都有新的语言格式可用。在编写 VBA 时，最好为任何用户都拥有的最低版本的 Excel 编写代码。许多新功能对于新版本的 Excel 和 VBA 来说非常酷，但是如果在旧版本的 Excel 上运行，则需要进行调试。我尝试在以前版本的 excel 中编写，以防万一用户没有兼容的编程来运行更新的代码。

# jquery-mobile - 如何使用jquery mobile在同一页面上显示搜索结果

> ID：15767210
> 
> 赞同：0
> 
> 时间：2013-04-02T14:49:01.500
> 
> 标签：jquery-mobile

我对 jQuery Mobile 真的很陌生。我想使用 jquery mobile 在同一页面上显示搜索结果。

在搜索中，如果我输入班加罗尔，它将点击数据库，结果将显示在同一页面中。 [这](http://m.allrecipes.com/search)是一个示例演示。

我需要使用 html+Ajax+Servlet 以相同的方式实现

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:13:11.567

你有两个选择

1.  启用了过滤选项的 ListView
2.  使用第三方库

## 使用列表视图

ListView 有一个内置功能，可以让您自动过滤 ListView 的内容。如果您有较少的数据和一次性可用的数据，它会非常方便。

您必须在`<ul>`标签中设置以下属性 true

```
data-filter="true" 
```

这是[Live fiddle的一个示例](http://jsfiddle.net/mayooresan/HHfZk/)

您可以在[此处阅读文档](http://view.jquerymobile.com/1.3.0/docs/widgets/listviews/)

## 使用库

Andy Mathews 编写了一个[很棒的库](http://andymatthews.net/read/2012/03/27/jQuery-Mobile-Autocomplete-now-available)，您可以使用它在同一页面内进行自动搜索。

它更适合使用`xhr`或其他类型的 Web 服务、套接字等的复杂搜索。

你可以在这里查看[演示](http://andymatthews.net/code/autocomplete/)。

# excel - 在工作表上查找单元格值并将包含数据的列中最后一个单元格中的所有单元格值复制到顶部，不包括空格

> ID：15767211
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:49:03.057
> 
> 标签：excel, vba

我无法让我的副本正常工作。我需要它使用“A”单元格的位置作为要复制的起始单元格，然后让 .end(xlup) 从下到上查找单元格到“A”单元格位置，并仅将带有数据的单元格复制到 wbVer（省略空白单元格）。

```
With wbVer.ws(1)
    for each ws in wbCs.sheets
If instr(1, ws.name, "value") then
     Set acell = ws.Cells.Find(What:=strPhone, After:=ActiveCell, LookIn:=xlValues, _
     LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
     MatchCase:=False, SearchFormat:=False)
If Not acell Is Nothing Then
     Set firstRange = wbkVer.ws("CSV").Range("A" & .Rows.Count).End(xlUp).Offset(1,                             0).Resize(acell.Rows.Count, 1)
     Set rngCSPhcell = .Range(acell.Offset(1, 0)).End(xlUp).offset(-1,0)  '<---this isn't right
     rngCSPhcell.Copy
     firstRange.PasteSpecial xlPasteValues
End if
End if

End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:37:22.107

在没有看到更多代码或工作表的情况下，我只能建议：

除了您已经拥有的任何变量之外，还对这些变量进行标注：

```
Dim aCell As Range
Dim rngToCopy As Range      'Use this to contain the ENTIRE range of cells to be copied
Dim cl As Range
Dim c As Long: c = 1 
```

然后，从 开始`If Not aCell is Nothing`，将您的代码替换为以下内容：

```
If Not aCell Is Nothing Then
'Commented out per revision:'
    'Set rngToCopy = Range(Cells(1, aCell.Column).Address, Cells(aCell.Row, aCell.Column).Address)  '
    Set rngToCopy = Range(acell.Offset(1, 0), Range("A1048576").End(xlUp))

    'Assuming this evaluates to a single cell range...
    'find the next empty cell in column A of wbkVer.ws("CSV")
    Set firstRange = wbkVer.ws("CSV").Range("A1048576").End(xlUp).Offset(1, 0) '<< Set this Range to the FIRST cell address that you want to paste to.

    For Each cl In rngToCopy
        'If statement to ignore blank cells:
        If Not cl.Value = vbNullString Then
            'This puts the cell's value in firstRange, row "c", column 1.'
            'Adjust as necessary.'
            'assuming firstRange is a single cell, we can just use .Offset with the '
            ' incrementer variable, "c":
            firstRange.Offset(c, 0).Value = cl.Value
            c = c + 1
        End If
    Next
End If 
```

请注意，我不确定您是如何尝试设置的`aCell`，因此可能需要修改此行：

`Set rngToCopy = Range(Cells(1, aCell.Column).Address, Cells(aCell.Row, aCell.Column).Address)`

现在，它应该设置`rngToCopy`为`aCell`' 列中的单元格范围，从第 1 行到任何行`aCell`。

# ios - 关于带计时器的简单架构的建议

> ID：15767212
> 
> 赞同：0
> 
> 时间：2013-04-02T14:49:02.813
> 
> 标签：ios, properties

这个问题看起来应该很简单，但我无法解决它。我有一个包含“游戏”的核心数据存储。这些游戏有一个为计时器存储时间的属性：game.timer。这一切都很好。

我的 App Delegate 中还有一个集中式计时器，它会在滴答声时发布通知，以便各种视图控制器可以显示该时间。这一切都很好。

这是我坚持的简单事情。用户启动/停止计时器并显示滴答时间的视图控制器，在 viewWillLoad 中，它获取 game.timer 中的时间，并在应用程序委托中为集中式计时器设置时间属性。当计时器运行时，视图中的标签会更新。这一切都很好。

但是当第一次显示该视图时，我不知道如何在标签中显示静态时间量。例如，如果我在 viewWillLoad 中执行此操作，计时器将显示 20:00。伟大的。如果我启动计时器，该标签会打勾。也很棒。但是，如果我离开视图并返回，标签将再次设置为 20:00（假设计时器仍在运行，则从那里向下打勾。）

所以我需要以某种方式跟踪状态，以设置标签中的初始时间。说得通？

编辑：我的计时器倒计时。我需要在视图首次加载时显示开始时间，比如 20:00。如果计时器正在运行，则该标签将正确更新。但是，如果我离开视图然后回来，如果计时器正在运行，我不希望标签恢复到 20:00。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:00:37.033

没关系。我只是添加了一堆状态来检查是否设置了计时器等等。不像我想要的那样优雅，但它会起作用。

# sql - 如何使用 LIKE 运算符在 SQL Server 中进行匹配？

> ID：15767213
> 
> 赞同：3
> 
> 时间：2013-04-02T14:49:04.233
> 
> 标签：sql, sql-server

我正在尝试匹配一个价格字符串，例如 $25.00，以找到相应的货币符号。例如，25.00 美元应与美元匹配。这很有效；但是，当我输入 25.00（无货币符号）时，我在 CUP 上有一个不需要的匹配项。

我在 SQL Server 2012 中设置了下表：

```
CurrencyId  varchar(3)
Symbol      nvarchar 
```

以下是一些数据：

```
Currency Symbol
ANG      ƒ
CUP      ₱
EUR      €
USD      $ 
```

查询是：

```
SELECT [t0].[CurrencyId], [t0].[Symbol]
FROM [dbo].[EWN_Currency] AS [t0]
WHERE '25.00' LIKE '%'+[t0].[Symbol]+'%' 
```

如果我跳过字符串连接进行测试，那么它至少不会返回错误匹配，例如：

```
SELECT [t0].[CurrencyId], [t0].[Symbol]
FROM [dbo].[EWN_Currency] AS [t0]
WHERE '25.00' LIKE '%₱%' 
```

使用 LIKE '%'+[t0].[Symbol]+'%' 似乎没有正确设置字符串连接。我玩过将所有内容都转换为 nvarchar ，但没有运气。我将如何进行这项工作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:55:36.773

怎么用`LEFT`？

```
SELECT *
FROM   TableName
WHERE  LEFT('$25.00',1) = Symbol 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/26293/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:05:28.747

尝试：

```
with cte as
(select [Symbol], [CurrencyId] from [dbo].[EWN_Currency] where [Symbol] = '₱')
SELECT coalesce([t0].[CurrencyId], cte.[CurrencyId]) [CurrencyId],
       coalesce([t0].[Symbol], cte.[Symbol]) [Symbol]
FROM cte
LEFT JOIN [dbo].[EWN_Currency] AS [t0]
       ON '25.00' LIKE '%'+[t0].[Symbol]+'%' 
```

注意：如果您打算将其与货币格式数据表而不是单个字符串一起使用，那么我建议从 cte 交叉连接到您的数据表，然后从数据表左连接到货币表。

[（这里](http://www.sqlfiddle.com/#!6/1a175/1)的 SQLFiddle ）

# cakephp - Cakephp 发送电子邮件，附件发送为 0 字节

> ID：15767214
> 
> 赞同：0
> 
> 时间：2013-04-02T14:49:07.200
> 
> 标签：cakephp, dompdf

我正在使用 dompdf 动态生成 pdf 文件并将它们附加到电子邮件和发送中。但在邮件中，我总是将附件作为 0 字节。我正在 cake 的 tmp 文件夹下创建文件，并且创建成功。我使用 cakephp 2.x 并使用 CakeEmail 发送邮件。dompdf 文件夹位于插件文件夹中。我已授予 lib/fonts 目录必要的权限。该文件在创建后不会立即作为附件发送。使用 dompdf 时是否会有任何类型的锁定/延迟，即 cakeemail 无法获取文件的内容（但文件存在）？

```
App::uses('CakePdf', 'CakePdf.Pdf');
$CakePdf = new CakePdf();

$orderDetails = array('1' => 'myproduct');
$CakePdf->viewVars(compact('orderDetails'));      

$CakePdf->template('view_ticket_pdf', 'default');
$filename = TMP . $data['Billing']['order_id'] . '.pdf';
$pdf = $CakePdf->output();
$CakePdf->write( $filename);

$email = new CakeEmail('smtp');
$desc = $email->template('order_mail');
$email->emailFormat('html');
$email->from(array(ADMIN_EMAIL => 'Admin'));
$email->to('user@gmail.com');
$email->attachments(array($filename));
$email->subject('Your order');
$content = $email->send(); 
```

我收到 fread() 错误：CakeEmail 中的长度参数必须大于 0。如果我创建一个示例文本文件，而不是 pdf，它会附加并且大小将大于 0。我正在使用 github.com/ceeram/CakePdf 插件来创建 pdf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T11:18:50.150

同样的问题（[$Email->attachments() 不附加文件](https://stackoverflow.com/questions/17718671/email-attachments-does-not-attach-file)）。顺便说一句，这不是锁定问题。如果您将 PDF 写入数据库，您可以做一个丑陋的解决方法。看看这里：[https ://stackoverflow.com/a/17744761/1145597](https://stackoverflow.com/a/17744761/1145597)

# javascript - 如何获取跨域网页的html？

> ID：15767215
> 
> 赞同：1
> 
> 时间：2013-04-02T14:49:07.393
> 
> 标签：javascript, html, ajax, yql

我正在开发一个网页，我需要在其中获取另一个跨域站点的 html 内容。虽然谷歌我了解了 YQL。但我不熟悉`YQl`。我们可以使用`Javascript`or解决这个问题`Jquery`吗？

您的建议将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:56:17.140

您可以在服务器端使用[WebClient](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)类来读取其他页面。

```
WebClient client = new WebClient();
string result = client.DownloadString(address); 
```

下载整个页面输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:13:04.940

> 但我对YQl不熟悉

它是一种网络服务。

> 我们可以使用 Javascript 或 Jquery 解决这个问题吗？

您可以使用 JavaScript 访问 YQL。您不能用客户端 JavaScript 替换 YQL。

# azure - Azure 站点到多站点 VPN 部署

> ID：15767216
> 
> 赞同：0
> 
> 时间：2013-04-02T14:49:15.003
> 
> 标签：azure, vpn

我想通过 VPN 放置一个可从多个分支机构访问的虚拟机。只要我阅读并测试过，我就可以建立一个站点到站点的 VPN，牢记（分支机构的）本地 IP 地址空间、（同一分支机构的）公共 IP 地址，并且一旦配置是通过网关的子网完成的，我们将获得“虚拟”网关 IP 和（虚拟网络的）预共享密钥来终止分支机构对等点上的这个 VPN。

但是，如果我想连接另一个分支机构怎么办？我不知道部署此场景的“最佳实践”是什么。我试图添加一个本地网络并将其附加到现有的虚拟网络，但我做不到。据我所知，每个连接只能附加一个本地网络，除此之外，我只能支持一个预共享密钥。如果是这样，这是正常的做法吗？我应该为每个分支机构创建一个新的 VPN/VitualGateway 吗？那么，使用不同的虚拟网关，虚拟机将继续通过不同的隧道进行路由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T13:10:57.253

Microsoft 刚刚发布了 Azure 更新，它将支持您想要完成的场景。上周刚刚发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T01:50:59.360

对不起。这是不可能的。如果您阅读了所有链接，那么您会看到它指的是在 prem 上运行 RRAS。不在 Azure 中。事实上，8:06 的视频说这是不可能的，但很多人都在要求它，所以请继续关注。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T23:59:14.877

这种情况是可能的。

您可以使用 Azure 中 VM 上的软件终结点（例如 RRAS）为多个站点实施站点到站点 VPN。您只需要在 Azure 中专用一个 VM 来支持配置（用于故障转移的附加 VM）。您仍然可以使用每个站点的硬件端点来控制路由并提供您需要的连接。

查看[这篇博](http://blog.concurrency.com/featured-post/site-to-azure-vpn-using-windows-server-2012-rras/)文，详细介绍使用 2012 和 Azure 的过程

此外，微软似乎直接支持 RRAS 方法，尽管我相信下面的示例仅限于 1 个站点连接 - 如此处和[此处](http://weblogs.asp.net/scottgu/archive/2013/04/26/windows-azure-improvements-to-virtual-networks-virtual-machines-cloud-services-and-a-new-ruby-sdk.aspx)[所见](http://fabriccontroller.net/blog/posts/setting-up-software-based-site-to-site-vpn-for-windows-azure-with-windows-server-2012-routing-and-remote-access/)

多站点连接的其他参考资料 -[参考资料 #1](http://social.msdn.microsoft.com/Forums/windowsazure/en-US/6504087f-38fc-4db6-9f22-070fed5d3b81/multiple-sitetosite-vpn-with-azure) -[参考资料 #2](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/3332170-allow-vpn-from-multiple-sites-and-direct-access) -[参考资料 #3](http://channel9.msdn.com/Shows/Edge/Edge-Show-64-Windows-Azure-Point-to-Site-VPN) - 跳到 8:06 进行讨论。

# ios - 自定义 UINavigationController UIToolbar 子类

> ID：15767217
> 
> 赞同：2
> 
> 时间：2013-04-02T14:49:25.220
> 
> 标签：ios, objective-c, uinavigationcontroller, subclass, uitoolbar

我需要`UIToolbar`使用`UINavigationController`. 我知道这可以通过`Interface Builder`但我需要以编程方式完成。

文档声明`UINavigationController`工具栏属性是只读的，所以我对如何进行有点茫然。

有关的：

*   [自定义 UINavigationController UIToolbar 背景图片](https://stackoverflow.com/a/3323636/1106878 "自定义 UINavigationController UIToolbar 背景图片")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:53:29.940

自 iOS 5 起提供了一种新的[init*方法](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/initWithNavigationBarClass%3atoolbarClass%3a)

```
- (instancetype)initWithNavigationBarClass:(Class)navigationBarClass 
                              toolbarClass:(Class)toolbarClass 
```

也不要忘记

> ...您负责在屏幕上显示导航控制器之前添加根视图控制器。

# java - 如何通过匹配其中一列中的 ID 号从数据库中选择一行？

> ID：15767219
> 
> 赞同：-3
> 
> 时间：2013-04-02T14:49:27.563
> 
> 标签：java, mysql, sql

我将使用 Java 和 MySQL 数据库以 Excel 文件的形式生成报告。我需要做的是从 UI 中获取一个 ID 号，然后从包含该 ID 号的数据库中提取相应的行并将其存储在某种数据结构中。然后我会遍历数据结构并将每条数据插入到 Excel 文件中对应的单元格中，在这里和那里进行一些计算。

那么，我将如何构建一个查询，该查询将从给定的数据库中查找并返回一行以及 ID 号，以及保存返回数据的最佳数据结构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:51:41.663

我认为你最好的选择是使用类似[Hibernate](http://www.hibernate.org/)的东西。它抽象了实际的 SQL 调用，并以“数据结构”为您返回查询结果。

或者，您可以设置 SQL 驱动程序并自己运行查询，但我想您会在很多方面重新发明轮子。

作为起点，您的原始 SQL 查询将类似于：

`select * from <yourTable> where <id column> = <your id>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:34:00.813

如果您要使用普通`jdbc`方法，那么我建议实施一个`prepared statement`以避免**SQL Injenctions**（不管这有多大可能）。

您仍然需要完成与 MySql 数据库建立连接的所有步骤：

```
1\. Load MySql driver:       Class.forName("com.mysql.jdbc.Driver"); 
2\. Connect to the database: Connection myConn = DriverManager.getConnection (... URL for your database ...); 
```

然后您可以创建语句、执行它并检索结果。

这些方面的东西：

```
PreparedStatement myStmt = myConn.PreparedStatement("SELECT * FROM YoutTable WHERE ID_Number = ?");
myStmt.setString(1, idStringFromUI);
ResultSet myResults = myStmt.executeQuery(); 
```

显然，您需要导入`java.sql.*`并处理所有已检查的异常。

这似乎是此类代码的一个很好的示例：[link](http://www.roseindia.net/jdbc/jdbc-mysql/SelectRecords.shtml)

如果您已经知道所有这些东西-请接受我的道歉，但从您的问题中并不清楚。

# java - 猜测循环卡住 Java

> ID：15767221
> 
> 赞同：1
> 
> 时间：2013-04-02T14:49:38.660
> 
> 标签：java, loops

我正在为一个任务制作一个程序，我必须让用户猜测一个锁的 3 个数字来解锁它。如果他们不能在 3 内完成，则游戏结束。很简单，据我所知，我做得对，所以不知道我哪里出错了。这是代码部分：

```
do{
    try{
        String g1Str = JOptionPane.showInputDialog("Enter number 1:");
        g1 = Integer.parseInt(g1Str);
        looper = 2;
    }
    catch(NumberFormatException e){
        JOptionPane.showMessageDialog(null,"Not a Number");
        looper = 1;
    }
    if(g1!=num1){
        JOptionPane.showMessageDialog(null, "Incorrect guess, try again");
        lives = lives - 1;
        looper = 1;
    }
    else if(g1==num1){
        JOptionPane.showMessageDialog(null, "Correct!");
        looper = 2;
    }
}while(looper==1||lives!=0); 
```

这是我的想法：要求用户输入数字，尝试将字符串转换为整数。我使用 try catch 来确保用户确实输入了数字而不是字母。之后，我看看猜测是否等于实数。如果没有，你会失去一个生命（生命之前被声明为 3），然后将 looper 设置为 1，这样你就可以再次尝试猜测你是否有足够的生命。如果它是正确的，则looper被设置为2，并且循环被打破，此时用户可以猜测第二个数字。只要你有足够的生命，我只希望循环保持活动状态，所以我将“while”语句设置为当 looper 为 1 时，或者当生命不等于 0 时。但它似乎不会打破循环如果生命值降为 0。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:53:53.580

您需要更改 while 循环的逻辑：

`while (looper == 1 && lives != 0)`

现在，如果你有更多的生命，它会继续循环，不管 Looper 是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:58:52.023

您想要布尔值 AND`&&`而不是 OR `||`，如下所示：

```
while(looper==1 && lives!=0); 
```

`||``true`如果其中一个论点为真，`looper`则`1`计算结果`lives`为 `lives`同样，如果is not ，您的代码将继续循环`0`，即使您设置`looper`为`2`.

`&&`将`true`仅在两个条件都为真时评估为，如果is not或is则给出`false`并退出循环。`looper``1``lives``0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:56:31.653

替换这个

```
if(g1!=num1){
      JOptionPane.showMessageDialog(null, "Incorrect guess, try again");
      lives = lives - 1;
      looper = 1;
   } 
```

这样

```
if(g1!=num1){
   JOptionPane.showMessageDialog(null, "Incorrect guess, try again");
   lives = lives - 1;
   if(lives == 0)
   {
       looper = 2;
   }
   else
   {
       looper = 1;
   }

} 
```

因为当你`lives`达到 0.`looper`仍然等于 1 所以循环继续

# c# - 将图像文件夹添加到资源

> ID：15767226
> 
> 赞同：3
> 
> 时间：2013-04-02T14:49:55.723
> 
> 标签：c#

我有一千张图片需要嵌入到我的 C# 应用程序中。我在资源中创建了一个文件夹，并将我的所有文件复制到该文件夹​​中。我可以使用相对路径检索我的图像。但问题是如何在发布应用程序时包含所有这些文件。

PS：我无法将所有图像导出到资源，因为我的图像文件夹包含很多子文件夹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:51:36.527

在 Visual Studio 中选择所有图像，按 F4，然后`Build Action`将`Embedded Resource`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:51:58.637

您可以将其设置`Build Action`为 Resource ( `WPF`only) 或`Embedded Resource`，但是，有时更简单的选项是使用二进制文件部署图像。

请参阅[有关构建操作的精彩解释](https://stackoverflow.com/questions/145752/what-are-the-various-build-action-settings-in-vs-net-project-properties-and-wh)

# python - 在 python 中快速查找

> ID：15767228
> 
> 赞同：4
> 
> 时间：2013-04-02T14:50:02.427
> 
> 标签：python, lookup

我有以下格式的条目（总共约 8800 万）：

```
userid  age test    value
111 33  SODIUM  140
111 34  POTASSIUM   4.1
333 65.4    CHLORIDE    107
444 24  BICARBONATE 24 
```

`value`给定前三个项目（即，，，），我需要为最后一列`userid`创建`age`快速查找`test`。

重复查找此数据的最佳方法是什么？我正在考虑的一个是创建一个字典，其中`keys`是 元组 ( `userid`, `age`, `test`) 和值是`value`。过去我使用过类似的方法，这种方法在小得多的数据上非常慢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:54:59.757

你应该使用一个数据库，你有太多的条目。对如此多的数据进行查找和索引是数据库的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:53:45.800

如果您不关心内存使用情况：坚持使用[dict](http://docs.python.org/2/library/stdtypes.html#dict)。请注意，除非您有*很多*内存，否则上述操作可能会用完您的所有内存。一点一点地做，看看你能加载多少。快速测试表明您至少需要 16GB 的内部存储器。

否则：使用数据库。[SQLite](http://docs.python.org/2/library/sqlite3.html)包括在内，PostgreSQL 非常适合专业用途，但有很多替代品，包括 NoSQL 的 Redis 等，这在这里可能很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:53:02.793

哇，哇，那里。8800万？比如，88,000,000？

您必须使用数据库。尝试`redis`一个非常轻量级、快速查找的替代方案。您可以使用前三个值作为键。

`redis`甚至会给你一些漂亮的数据操作，你可以节省往返。

# django - createdb 上的密码问题 - OSX Mountain Lion 上的 PostgreSQL

> ID：15767232
> 
> 赞同：0
> 
> 时间：2013-04-02T14:50:17.320
> 
> 标签：django, postgresql, osx-mountain-lion, virtualenv

我越来越有名了

```
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

`createdb`尝试在 OSX Mountain Lion 的终端中尝试时出错，因此按照[此处](https://stackoverflow.com/a/6772559/1256700)的说明，我添加`export PATH=/opt/local/lib/postgresql92/bin:$PATH`到我的`.bash_profile`，现在如果我输入`which psql`我得到`/opt/local/lib/postgresql92/bin/psql`（以前我得到的地方`/usr/bin/psql`）。

但是，如果我`createdb database`现在尝试，系统会提示我输入我不知道的密码（这不是我的默认用户密码），如果我两次输入错误，我会得到：

```
createdb: could not connect to database template1: 
FATAL:  password authentication failed for user "username" 
```

`username`我在终端中的默认用户名在哪里。我要做的是创建一个 PostgreSQL 数据库，我可以从一个生活在 virtualenv 中的 Django 项目中访问。我正在使用 PostgreSQL 9.2。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:40:06.437

`createdb`必须在后台连接到 PostgreSQL 才能执行将创建新数据库的 SQL 命令。默认情况下，它使用您的操作系统用户名。根据错误消息，它碰巧失败了，要么是因为该用户不作为数据库用户存在（最有可能），要么是因为他有一个您不记得的密码。

要解决这个问题，假设您使用的是[macports](http://www.macports.org/)包，考虑到安装路径，这似乎是合理的，您可以运行：

```
sudo su postgres -c '/opt/local/lib/postgresql92/bin/createdb dbname' 
```

新数据库将由 postgres 用户拥有，这并不总是理想的。更明智的选择是使用您的用户名创建一个普通的 db 用户，并使其成为数据库的所有者：

```
sudo su postgres -c '/opt/local/lib/postgresql92/bin/createuser username'
sudo su postgres -c '/opt/local/lib/postgresql92/bin/createdb -O username dbname' 
```

**编辑**：`createuser`命令提示这些问题（来自手册页）：

> ```
>  $ createuser joe
>        Shall the new role be a superuser? (y/n) n
>        Shall the new role be allowed to create databases? (y/n) n
>        Shall the new role be allowed to create more new roles? (y/n) n 
> ```

通过对最后两个回答“是”，新用户将拥有足够的权限，以便随后可以在 through 中使用它`postgres`，`sudo`例如，这将起作用：

```
createuser -U username newuser
createdb -U username newdatabase 
```

# c# - 访问 SharePoint 2010 ListItem 中的属性以获取版本历史记录

> ID：15767239
> 
> 赞同：2
> 
> 时间：2013-04-02T14:50:35.660
> 
> 标签：c#, sharepoint, sharepoint-2010, csom

我有一个自定义应用程序，它使用 SharePoint 2010 来存储列表项并对这些项进行版本控制。搜索正在通过搜索服务进行，并且更新正在使用客户端对象模型成功。我们现在尝试检索旧版本列表项的自定义属性以显示给用户，类似于 SharePoint 显示历史信息的方式，它在哪里提取文件版本，然后显示已更改属性的列表。

现在我们有以下内容，但该文件的版本没有显示任何可显示的属性，即使当我们在屏幕上查看历史记录时 SharePoint 确实显示了更改。

```
using (ClientContext context = new ClientContext(spURL)) {
    Web site = context.Web;
    context.Load(site);
    context.ExecuteQuery();

    File file = site.GetFileByServerRelativeUrl(sRelativeObjectPath);
    context.Load(file);

    context.ExecuteQuery();

    FileVersionCollection versions = file.Versions;
    context.Load(versions);
    context.ExecuteQuery();

    foreach (FileVersion ver in versions)
    {
        File verFile = site.GetFileByServerRelztiveUrl(ver.Url);
        context.Load(verFile, f => f.ListItemAllFields);

        //verFile.ListItemAllFields.FieldValues are null, need to get the properties of the ListItem

    } 
} 
```

关于我应该如何为版本提取属性值的任何想法？这不在 SharePoint 中运行，因此我无权访问 SharePoint.dll 以使用 SPQuery 和 SPItem。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:07:34.037

在`File`类中有[`File.ListItemAllFields`属性](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.file.listitemallfields%28v=office.14%29.aspx)，您可以使用关联的列表项及其字段。

# c# - 使用实体框架获取更改属性时出错

> ID：15767240
> 
> 赞同：2
> 
> 时间：2013-04-02T14:50:39.300
> 
> 标签：c#, entity-framework, change-tracking

我正在使用实体框架，我需要知道表的哪个字段已被修改，所以我写了这段代码

```
IEnumerable<ObjectStateEntry> changes = this.ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Deleted | EntityState.Modified).ToList();
        foreach (ObjectStateEntry stateEntryEntity in changes)
        {
            if (stateEntryEntity.Entity != null)
            {
                var stateEntry = this.ObjectStateManager.GetObjectStateEntry(entry.Entity);
                IEnumerable<string> modifiedProperties = stateEntry.GetModifiedProperties(); 
            }
        } 
```

问题是我得到了修改对象的所有字段，而不是只获取更改的字段。

知道为什么我有这种奇怪的行为吗？

谢谢

# java - 如何将 Java 中生成的序列化 JSON 转换为 Python 中的复杂对象？

> ID：15767244
> 
> 赞同：3
> 
> 时间：2013-04-02T14:50:52.760
> 
> 标签：java, python, json

我在 Java 中定义了两个类。让我们称他们为“用户”和“地址”

```
class Address {
    String addressFirstLine;
    String city;
    String pincode;

    // Getters/setters for all attributes
}

class User {
    String firstName;
    String lastName;
    Address address;

    // Getters/setters for all attributes
} 
```

我创建了一个 User 类的对象并使用 Gson 库对其进行序列化。

JSON 字符串如下所示：

```
{"firstname":"Zen","lastName":"coder", "Address":{"addressFirstLine":"High st, Point place","city":"Wisconcin","pincode":"4E23C"}} 
```

现在这个字符串被发送到一个 python 应用程序，该应用程序具有相同的两个类定义“用户”和“地址”，就像在上面的 Java 中定义的一样。

我尝试使用 jsonpickle 将 json 反序列化为 python 对象。我可以用 jsonpickle 反序列化简单对象，但不能反序列化复杂对象。

任何人都可以提出解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:31:06.257

这可能是您使用 Python 内置 JSON 库的解决方案，该库利用 Python 将字典作为关键字参数提取的能力。

我根据您的大纲在 Python 中定义了类。在 User 类定义中，我允许将地址作为实际地址对象、列表（从 JSON 数组转换而来）或字典（从 JSON 对象转换而来）传递。

```
class Address(object):
def __init__(self, addressFirstLine, city, pincode):
    self.addressFirstLine = addressFirstLine
    self.city = city
    self.pincode = pincode

class User(object):
    def __init__(self, firstName, lastName, address):
        self.firstName = firstName
        self.lastName = lastName
        if isinstance(address, Address):
            self.address = address
        elif isinstance(address, list):
            self.address = Address(*address)
        elif isinstance(address, dict):
            self.address = Address(**address)
        else:
            raise TypeError('address must be provided as an Address object,'
            ' list, or dictionary') 
```

我使用内置的 Python json 库将您提供的 JSON 字符串转换为字典，然后使用该字典创建用户对象。正如您在下面看到的，user.address 是一个实际的地址对象（我在一个名为 user_address.py 的文件中定义了用户和地址，因此是前缀）。

```
>>> import json
>>> user_dict = json.loads('{
    "firstName" : "Zen", "lastName" : "Coder", 
    "address" : {
        "addressFirstLine" : "High st, Point place",
        "city" : "Wisconcin", 
        "pincode" : "4E23C"}
    }')
>>> from user_address import User
>>> user = User(**user_dict)
>>> user
    <user_address.User at 0x1035b4190>
>>> user.firstName
    u'Zen'
>>> user.lastName
     u'coder'
>>> user.address
     <user_address.Address at 0x1035b4710>
>>> user.address.addressFirstLine
    u'High st, Point place'
>>> user.address.city
    u'Wisconcin'
>>> user.address.pincode
    u'4E23C' 
```

此实现还支持拥有地址参数列表，而不是字典。如果传递了不受支持的类型，它还会引发描述性错误。

```
>>> user_dict = json.loads('{
    "firstName" : "Zen", "lastName" : "coder", 
    "address" : ["High st, Point place", "Wisconcin", "4E23C"]
    }')
>>> user = User(**user_dict)
>>> user.address
    <user_address.Address at 0x10ced2d10>
>>> user.address.city
    u'Wisconcin'
>>> user_dict = json.loads('{
    "firstName" : "Zen", "lastName" : "coder", 
    "address" : "bad address"
    }')
    TypeError: address must be provided as an Address object, list, or dictionary 
```

这个另一个答案还谈到了将 Python dict 转换为 Python 对象，使用更抽象的方法：[Convert Python dict to object](https://stackoverflow.com/a/1305663/307293)

# java - 使用 JDT：如何确定一个方法是否覆盖了另一个方法

> ID：15767248
> 
> 赞同：1
> 
> 时间：2013-04-02T14:51:17.807
> 
> 标签：java, eclipse-jdt

我正在使用 JDT ASTVisitor 遍历 AST。

```
private void removeOverrideAnnotations(CompilationUnit astUnit) {
    astUnit.accept(new ASTVisitor() {
        @Override
        public boolean visit(MethodDeclaration methodDeclarationNode) {
            if (isOverridingMethodOfSuperclass(methodDeclarationNode)) {
                ... process ...
            }
            return super.visit(methodDeclarationNode);
        }
    });
} 
```

如何确定我正在访问的 MethodDeclaration 是否覆盖了超类方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:22:01.993

请参阅以下链接以获取覆盖方法搜索。基本上，它对项目进行了详尽的搜索，找到了 Type 的超类，并使用超类方法检查每个方法是否具有相同的名称和参数。

*   [https://gist.github.com/shivamkalra/3197033](https://gist.github.com/shivamkalra/3197033)

# java - JPA EclipseLink 与 @TableGenerator。为什么事务回滚后分配给 id 的值不为空？

> ID：15767252
> 
> 赞同：1
> 
> 时间：2013-04-02T14:51:28.397
> 
> 标签：java, jakarta-ee, jpa, eclipselink

我有以下实体：

```
@Entity
@Table(name = "sales", schema = "cust_tables")
@Multitenant(MultitenantType.TABLE_PER_TENANT)
@TenantTableDiscriminator(contextProperty = "customer_schema", type = TenantTableDiscriminatorType.SCHEMA)
@XmlRootElement
@XmlAccessorType(XmlAccessType.NONE)
public class Sale implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO, generator = "Sale")
    @TableGenerator(name = "Sale", schema = "thehub", allocationSize = 5)
    @Column(name = "id", unique = true, nullable = false, updatable = false)
    @XmlElement
    private Long id; 
```

在持久化操作期间，我可能故意允许事务在乐观锁定失败期间回滚。

然而，在这种情况下，我对 JPA/EclipseLink 的行为感到惊讶。`id`正如预期的那样，JPA 将序列中的值分配给。但是，在回滚期间，该值不会被“删除”。然后下次我尝试坚持时， for 的值`id`已经存在。JPA 跳过从序列中提取新数字并尝试持久化实体。

我因 SQL 完整性约束异常而失败：

```
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.5.0.v20130226-e0971b1): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '51' for key 'PRIMARY'
Error Code: 1062 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:26:58.190

当 JPA 事务失败时，所有对象都将分离。您不能重新提交交易。

您需要创建一个新的持久性上下文，并且需要重新创建对象，或者如果您想使用现有的对象，请仔细合并到新的持久性上下文中并清空它们的 id。此外，对于任何更新的对象，您都需要恢复其版本字段。

JPA 不提供重新提交事务的简单方法。EclipseLink 的本机 API 提供了 commitAndResumeOnFailure()，但这并没有暴露给 JPA。也许记录增强请求以获得某种选项以允许在 JPA 中重新提交失败的事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:31:55.103

好的，我设法解决了这个问题，我将在此处发布我的结果以帮助可能遇到相同问题的任何人。

使用调试器，我可以看到 EclipseLink 确实为 entity.id 字段分配了一个值，即使在事务回滚期间也是如此。如果你像我一样，你的 id 字段被注释并且你的 ID 是不可变的，这意味着只有一个 getter 而不是一个 setter。EclipseLink 能够使用反射为该字段分配一个值，但您公开的 API 会阻止 id 字段的突变。（这是一件“好事”）。

EclipseLink 似乎有意或无意地为 ID 字段分配了一个值，并从 ID 序列中删除了该值。因此，事务回滚会导致您的序列号出现漏洞（这并不是什么大罪）。

请记住，EclipseLink 读取序列号表，在内存中缓存一些序列号，然后在缓存为空时重新读取它，同时为下一个序列提交起始值。

不知何故，通过事务回滚和重新启动我的服务器的组合，序列号表落后于正在使用的实际序列号。因此，该错误不是在事务回滚期间分配 ID，而是丢失了对序列号的跟踪。我最终得到的是序列号表的值为 50，但我的数据库中编号最高的实体是 51。解决方案是将序列表更新为 allocationSize(5) 的两倍，将其设置为 60，然后反弹我的服务器。

不幸的是，我无法重现此错误。:( 我不知道 EclipseLink 是如何进入格式错误的状态的。

# web-services - 指向同一实现的多个 Web 服务名称

> ID：15767253
> 
> 赞同：1
> 
> 时间：2013-04-02T14:51:28.943
> 
> 标签：web-services, wsdl, jax-ws

使用 @WebService 注释可以将无状态 EJB bean 发布为 Web 服务。但是，有没有办法发布多个具有相同实现类的 Web 服务，而无需为此目的定义其子类？

即，如果我们定义空白类 A1、A2、A3、A4 都具有 @WebService 注释并且是实际实现逻辑的 A 的后代，那么这是可以实现的。然后 JAX-WS 将准确发布 4 个 Web 服务，它们都有不同的名称，但实际上具有相同的实现。

但是，我想要的是让 JAX-WS**注册几个具有相同实现的 Web 服务，**并且**在实现内部能够获取**调用该实现的 Web 服务的名称。

**编辑：** 目前试图通过使用 JAX-WS Endpoint 类（运行时发布者）来实现结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:45:56.850

我使用了这样的解决方案：

```
@Startup
@Singleton
@LocalBean
public class WSPublisher
{
    @PostConstruct
    void publishAll()
    {
         Reflections reflections = new Reflections("abc.de.f");
         Set<Class<? extends MyBean>> myBeans = reflections.getSubTypesOf(MyBean.class);

         for(Class<? extends MyBean> myBean: myBeans)
             Endpoint.publish("http://localhost:9090/project/" + myBean.getSimpleName() + "WS", new MyBean());
    }
} 
```

现在所有的 Web 服务前端都是动态注册的，来自它们中的任何一个的方法调用都被重定向到一个公共的实现类。

# javascript - 使用 Javascript 设置选定的属性 onClick

> ID：15767258
> 
> 赞同：0
> 
> 时间：2013-04-02T14:51:45.353
> 
> 标签：javascript, jquery, html

我的 javascript 技能不是最好的，但我最近一直在研究它们，我想做的一件事是为 html 选项标签设置属性。我在 jfiddle 上发布了这个项目，以便更容易看到。[你可以在这里](http://jsfiddle.net/davidThomas/YZ42J/2/)看到。我想我只是关闭了一行代码或其他东西。

如何从选项 2 中删除选定属性并为选项 1 创建选定属性？换句话说，当我打开“另一个弹出窗口”时，选择了选项 1 而不是选项 2。

我建议您查看 jsFiddle 链接，但我也发布了有关此问题的代码。更新链接的javascript：

```
function updateSelected(id, removeID, parentID) {
    document.getElementById(parentID).style.display = 'none';
    document.getElementById(id).setAttribute("selected","selected");
    document.getElementById(removeID).removeAttribute("selected")
} 
```

的HTML：

```
<a href="#box" rel="popup">Popup</a>

<div id="box" class="popup">
<a href="#another-box" rel="popup" onClick="updateSelected("1", "2", "box");">Another box</a>
</div>
<div id="another-box" class="popup">
<form>
    <select>
        <option id="1">option 1</option>
        <option id="2" selected>option 2</option>
    </select>
</form>
</div> 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:55:06.570

要更改选择的条目，您应该更改`.selected` *属性*，而不是*属性*。

```
document.getElementById(id).selected = true; 
```

属性只设置控件的*初始*值，而*属性*设置当前值。

请注意，也无需从先前选择的元素中*删除该属性。*这会自动发生，因为（默认情况下）一次只能“选择”一个元素。

或者，将`.value`封闭的属性设置为与所需元素`<select>`的值相同。`<option>`该值将是元素`value`上的属性值`<option>`，如果没有`value`属性，则为包含的文本。

见[http://jsfiddle.net/alnitak/C98Wc/](http://jsfiddle.net/alnitak/C98Wc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:54:16.610

像这样：

```
document.getElementById(id).selected=1;//or true 
```

而另一种方法是

```
document.getElementById(id).selected=0;//or false 
```

@Alnitak - 感谢您的更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:56:55.763

注意你的报价，尝试用`<a>`这个替换标签：

```
<a href="#another-box" rel="popup" onClick="updateSelected('1', '2', 'box');">Another box</a> 
```

双引号内不能使用双引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:57:47.557

为什么不一直使用 jQuery？还要在双引号内使用单引号

[小提琴](http://jsfiddle.net/mplungjan/SyJnt/)

```
<a href="#another-box" rel="popup" id="another" >Another box</a>

$(function() {
    $('a[rel*=popup]').leanModal({ top : 200, closeButton: ".popup-close" });       
    $("#another").on("click",function(e) {
        updateSelected("o1","box");
        return false; // cancel click - can be e.preventDefault() instead 
    });

});         
function updateSelected(id, parentID) {
    $("#"+parentID).css("display","none"); // or .hide()
    $("#"+id).prop("selected",true);
} 
```

# android - 如何在不使用 ActivityManager 的情况下将我的应用程序置于前台？

> ID：15767261
> 
> 赞同：2
> 
> 时间：2013-04-02T14:51:54.303
> 
> 标签：android, android-broadcast, start-activity, activity-manager

**编辑**

你可以在评论中找到这个问题的答案！

**邮政**

在我的应用程序中，我有计时器来提醒用户他应该做的一些任务。时间到了，就会发出通知。当用户单击此通知时，我希望将我的**应用程序置于前台（**如果还没有的话）。我坚持使用“应用程序”，因为我发现很多帖子都显示了如何将一个`Activity`放在前台，但这里不是这种情况。

这是当我想发送通知并将我的应用程序带到前台时调用的 Broadcastreceiver 的代码：

```
public class TimerBroadcast extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    int ID = 333;
    final NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
    builder.setSmallIcon(R.drawable.clock_alarm2);
    builder.setContentTitle("Time is up");
    builder.setContentText("SLIMS");
    builder.setOnlyAlertOnce(false);
    Uri uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    builder.setSound(uri);
    builder.setVibrate(new long[] { 0, 200, 3000 });
    ActivityManager activityManager = (ActivityManager) context.getSystemService(Activity.ACTIVITY_SERVICE);

    // get the info from the currently running task
    List<ActivityManager.RunningTaskInfo> taskInfo = activityManager.getRunningTasks(100);

    for (int i = 0; i < taskInfo.size(); i++) {
        String componentName = taskInfo.get(i).topActivity.getClassName();
        if (componentName.contains("com.genohm.android")) {
            Intent intentActivity = new Intent();
            intentActivity.setComponent(taskInfo.get(i).topActivity);
            intentActivity.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, intentActivity, PendingIntent.FLAG_CANCEL_CURRENT);
            builder.setContentIntent(contentIntent);
        }
    }

    final Notification notification = builder.build();
    notification.flags |= Notification.FLAG_INSISTENT;
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    NotificationManager mNM = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    mNM.notify(ID, notification);
}
} 
```

此代码**完美运行**。问题是我使用的方法[getRunningTasks()](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)似乎被 Google**强烈反对**。

> 此类用途不受支持，将来可能会中断。

但实际上这是我迄今为止找到的唯一方法。有谁知道这种做法是否存在一些解决方法？

# xcode - 推送到 Xcode 中的随机 veiwcontroller？

> ID：15767264
> 
> 赞同：0
> 
> 时间：2013-04-02T14:52:04.057
> 
> 标签：xcode, random, storyboard

**第1部分**

好吧，我对此很陌生，正在制作一个新的应用程序。但是，我无法让我的随机效果。我想要的是在一个 veiwcontroller 上我有一个按钮，当按下它时，它会将您推送到 100 个其他视图控制器之一，但随机地，同时使用情节提要。现在我在故事板上有 100 个 veiwcontrollers，其中 1 个在家，并且上面有一个开始按钮，我想要它，所以当你按下开始按钮时，它会随机转到其他 100 个 veiwcontrollers 之一。任何帮助将不胜感激，因为我说我是新手。提前致谢！

**第2部分**

好的，它现在开始有意义了，但是就像我说的那样，我对此很陌生。我提供了一个测试代码的图像，看看它是否有效，但是当我运行它并按下按钮时它只是冻结。我的 .m 文件：

```
#import "StartPage.h"
#import "ViewController1.h"
#import "ViewController2.h"
#import "ViewController3.h"
#import "ViewController4.h"

@interface StartPage ()

@end

@implementation StartPage

- (IBAction)randomButton
{
NSArray *viewControllerList; {
    NSString *ViewController1 = ViewController1;
     NSString *ViewController2 = ViewController2;
     NSString *ViewController3 = ViewController3;
     NSString *ViewController4 = ViewController4;

}
NSString *randomViewControllerClassName = viewControllerList[arc4random() % 99];
UIViewController *randomVC = [[NSClassFromString(randomViewControllerClassName) alloc] init];
[self presentViewController:randomVC animated:YES completion:nil];
} 
```

我的 .h 文件：

```
#import <UIKit/UIKit.h>

@interface StartPage : UIViewController

- (IBAction) randomButton;

@end 
```

我的故事板有一个导航控制器和 5 个其他视图控制器，在第一个视图控制器上我有一个按钮，这是我的 .h 和 .m 中的“randomButton”，它与 viewcontroller1 是 segue，其余的是没有 segued，但有各自的 veiwcontroller 类。所以我被困住了，我真的很感谢你帮助我，并且很乐意回报你的恩惠。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:04:20.323

这样做的方法可能是无穷无尽的，其中一些方法会更好或更差，具体取决于您应用程序的其余部分。

一种简单的方法是创建一个视图控制器类名数组，然后使用随机数生成器随机选择一个索引，然后实例化并加载该类。

.m

```
@interface StartPage()
@property (strong, nonatomic) NSArray *viewControllerList;
@end

@implementation StartPage

- (id)init {
    if ((self = [super init])) {
        self.viewControllerList = [@"BobViewController", @"TomViewController", ..., @"OneHundrethViewController"];
    }
    return self;
}

- (IBAction)buttonTapped {
    NSString *randomViewControllerClassName = viewControllerList[arc4random() % 99];
    UIViewController *randomVC = [[NSClassFromString(randomViewControllerClassName) alloc] init]
    [self presentViewController:randomVC animated:YES completion:nil];
} 
```

# script# - 找不到 ScriptSharp 类方法

> ID：15767270
> 
> 赞同：1
> 
> 时间：2013-04-02T14:52:13.417
> 
> 标签：script#

ScriptSharp 生成的 Javascript 找不到我的类方法“LoadContent()”。我哪里错了？

似乎是将方法放入原型中，但我不确定这是我需要的。任何帮助将不胜感激。

```
namespace Echo.Web.JScript
{
     [ScriptNamespace("Scripts")]
    public class MasterTrackerActions
     {
         private jQueryObject _source;

         public MasterTrackerActions(string fundCodeSourceId)
         {
             _source = jQuery.Select("#" + fundCodeSourceId);
             _source.Change(delegate
                 {
                     Script.Alert("Here we go"); //We see this fine.
                     LoadContent();
                 });
         }

         public void LoadContent()
         {
             Script.Alert("Do we get here?"); //Answer is no
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:25:44.247

我在 0.8 中尝试过，它按预期工作（通过 AMD 模式）。我对您的代码稍作更改，使其在 0.8 中编译。

*   将 Script.Alert 更改为 Window.Alert
*   在 AssemblyInfo.cs 中删除了 ScriptNamespace 并添加了 [assembly: ScriptAssembly("Scripts")]

**S# 类**

```
using System.Html;
using jQueryApi;

namespace Echo.Web.JScript {
    public class MasterTrackerActions {
        private jQueryObject _source;

        public MasterTrackerActions(string fundCodeSourceId) {
            _source = jQuery.Select("#" + fundCodeSourceId);
            _source.Change(delegate {
                Window.Alert("Here we go"); //We see this fine.
                LoadContent();
            });
        }

        public void LoadContent() {
            Window.Alert("Do we get here?"); //Answer is no
        }
    }
} 
```

**生成的 JS 文件是**

```
/*! Scripts.js 1.0.0.0
* 
*/

"use strict";

define('Scripts', ['ss', 'jquery'], function(ss, $) {
    var $global = this;

    // Echo.Web.JScript.MasterTrackerActions

    function MasterTrackerActions(fundCodeSourceId) {
    var $this = this;

    this._source = $('#' + fundCodeSourceId);
    this._source.change(function() {
          alert('Here we go');
          $this.loadContent();
      });
    }

    var MasterTrackerActions$ = {
        loadContent: function() {
           alert('Do we get here?');
        }
    };

    var $exports = ss.module('Scripts', null,
    {
      MasterTrackerActions: [ MasterTrackerActions, MasterTrackerActions$, null ]
    });

    return $exports;
}); 
```

现在要在 HTML 文件中使用它，您需要使用提供的 ModuleLoader SSLoader.js 或 RequireJS（首选）。在这种情况下，您需要带有 JQuery 的 RequireJS 模块。也有不同的方法来包含 JQuery（这超出了这里的范围）。

**HTML 文件**

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>

    <body>
        <script type="text/javascript" data-main="Scripts/MyScript.js" src="Scripts/require-jquery.js"></script>

        <script type="text/javascript">
            require(['MyScript'], function (ms) {
                var tracker = new ms.MasterTrackerActions('sampleText');
                console.log(tracker);
            });
        </script>

        <textarea id="sampleText">TEST123</textarea>
    </body>
</html> 
```

哦还有一件事，当控件失去焦点时触发事件......

# php - 为什么调用存储过程时会出现此错误？

> ID：15767271
> 
> 赞同：0
> 
> 时间：2013-04-02T14:52:14.667
> 
> 标签：php, mysql, stored-procedures

这是一个 MySQL PHP(5.2.5) 设置。

我正在对这样的程序进行基本调用......

```
$sp = mysql_query("CALL AlmGetRecord()"); 
$res = mysql_fetch_array($sp) or die(mysql_error());
print_r($res); 
```

但无论我做什么，我都会收到这个错误。

**过程 AlmGetRecord 无法返回给定上下文中的结果集**

我做了一些快速的谷歌搜索，除了它是 PHP 中的一个潜在错误之外没有发现太多。谁能证实这一点？或者告诉我为什么这个错误不断弹出？

谢谢！

# authentication - 使用 pam_userdb.so 在 Berkeley DB 中为 vsftpd 加密的密码

> ID：15767273
> 
> 赞同：4
> 
> 时间：2013-04-02T14:52:19.437
> 
> 标签：authentication, ftp, pam, vsftpd

我正在尝试使用 Berkeley DB 与一些虚拟用户一起安装 vsftpd。我主要遵循本指南： http: [//www.neant.ro/2012/04/secure-ftp-with-vsftpd/](http://www.neant.ro/2012/04/secure-ftp-with-vsftpd/)。一切正常，但我想让密码在数据库中散列。我正在使用带有 glibc 2.12 的 CentOS 6.3。

从 pam_userdb.so 的联机帮助页中，我假设我可以使用 crypt 提供的功能。如果我们看一下 crypt(3) 手册页，我们可以使用 SHA-256 和 SHA-512。我会使用其中之一。

我的疑问是如何实现它。据我所知，我需要转到我的 pam.d 文件并编辑并添加参数 crypt 但是......我应该给它哪个值？5 用于 SHA-256？6 用于 SHA-512？

```
auth    sufficient pam_userdb.so db=/path/to/db/virtual-users crypt=?
account sufficient pam_userdb.so db=/path/to/db/virtual-users crypt=?
session sufficient pam_loginuid.so 
```

现在我需要数据库中 SHA-256/SHA-512 的密码。获取哈希的正确方法是什么？我想我必须使用 crypt 功能。但是，我需要使用 Ruby 来获取它，有什么办法吗？

在此先感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T20:51:51.737

没有办法。您应该说`crypt=crypt`（其他选项被拒绝）但至少在您获得包含[此修复程序](https://lists.fedorahosted.org/pipermail/pam-developers/2013-February/000360.html)`mod_userdb`的 PAM 版本之前不会接受非 DES 哈希（例如，Ubuntu Saucy 没有）。

一方面，我编译了我自己的 PAM 来进行修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-06T03:36:17.103

这是[固定](https://git.fedorahosted.org/cgit/linux-pam.git/tree/modules/pam_userdb/pam_userdb.c#n218)的。Debian Jessie 的 libpam-modules 版本 1.1.8-3 似乎也已修复。

要插入一行，请使用 db5.3-util 或类似的：

`{ echo user; echo hash; } | db5.3_load -T -t hash /tmp/passwd.db`

要生成 crypt-valid strong `hash`：

`echo pass|mkpasswd -s -m sha-512`

这个 pam 模块的“调试”选项和[pamtester一样有用（检查 /var/log/auth.log）](http://pamtester.sourceforge.net/)

# android - 尽管 state_pressed 有效，但 State_Selected 无效

> ID：15767274
> 
> 赞同：8
> 
> 时间：2013-04-02T14:52:24.553
> 
> 标签：android, listview, textview

我有个问题。首先检查我的代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:color="@color/clickedtext" />
    <item android:state_pressed="true" android:color="@color/clickedtext" />
    <item  android:color="@color/defaulttext" />
</selector> 
```

在这里，默认文本颜色出现在默认状态。当我单击时，列表项中的文本颜色会发生变化。But color of the text does not change when an item selected.

我尝试了一些东西，但我无法处理这个问题。我该怎么办 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-05T17:34:15.260

在使用 ListView 时，我也在寻找这个问题的答案，并且不得不在这里浏览很多帖子，然后才能找到[我](https://stackoverflow.com/a/9729579/1346778)认为是最佳选择的帖子，并且工作起来就像一个魅力。

这个想法是将视图设置为选中，然后使用`state_activated`而不是`state_selected`执行您的选择。如果您使用的是 ListView 或类似的，您还需要调用`setChoiceMode(ListView.CHOICE_MODE_SINGLE)`以确保只检查一项。有关更多信息，请参阅[帖子](https://stackoverflow.com/a/9729579/1346778)

我希望这可以帮助某人比我更快地找到解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T09:24:50.667

使用自定义列表项布局时：设置

```
android:background="?android:attr/activatedBackgroundIndicator" 
```

作为背景

# javascript - AngularJS 应用程序未通过官方 W3C HTML5 验证

> ID：15767279
> 
> 赞同：7
> 
> 时间：2013-04-02T14:52:43.373
> 
> 标签：javascript, html, angularjs, html-validation

我有一个使用 AngularJS 的项目，但其中一个要求是我的应用程序必须通过官方 HTML5 和 CSS3 验证。

为什么使用 AngularJS 构建的应用程序未通过官方 W3C HTML5 验证？我真的很喜欢 AngularJS，那我该怎么办？我真的必须从头开始构建它，还是有任何合理的文章/博客来解决这个问题，以便我可以向我的教授解释？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T14:58:01.187

根据其他一些 Stackoverflow QA，您可以使用该属性预先修复您的 angularjs`data-`属性。

所以`ng-app`会变成`data-ng-app`. 这意味着您的标记是有效的 html5 并且仍然可以使用 angularjs。

请参阅这些问题以供参考。

[AngularJS 标签属性](https://stackoverflow.com/questions/12107504/angularjs-tags-attributes)

[我可以在angularjs中使用另一个前缀而不是`ng`吗？](https://stackoverflow.com/questions/9746916/can-i-use-another-prefix-instead-of-ng-with-angularjs?rq=1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-05T09:39:11.143

这个答案已经很晚了，但我写了一个名为[angular-html5](https://github.com/pgilad/angular-html5)的基本工具，它将指令`data-directives`自动转换为。在构建步骤中还可以使用[grunt](https://github.com/pgilad/grunt-angular-htmlify)和[gulp插件。](https://github.com/pgilad/gulp-angular-htmlify)

这样你仍然可以写：

```
<div ng-if="whatever"></div> 
```

它会变成：

```
<div data-ng-if="whatever"></div> 
```

[只需将其添加到您的工作流程中，您就可以像使用ng-min](https://github.com/btford/ngmin)进行缩小一样使用它。

有关更多信息，请参阅[Angular 指令规范化规则](https://docs.angularjs.org/guide/directive)。

# c# - 用新的DLL替换旧的DLL

> ID：15767280
> 
> 赞同：0
> 
> 时间：2013-04-02T14:52:49.327
> 
> 标签：c#, asp.net

我的客户丢失了他们的 Web 应用程序的源代码，并希望对其进行一些小的更改。我使用 RedGate 的 .Net Reflector 从 DLL 中提取源代码。使用生成的类文件，我能够在所需位置进行更改并重新生成 DLL。应用程序使用的应用程序池是 1.1 版的“默认”，我认为该应用程序也是使用 .Net 框架 1.1 创建的，但我使用 Visual Studio 2008 打开项目并创建新的 DLL。旧的 DLL 也有一些版本号。我的问题是：由于应用程序已经在线，更换新的 DLL 会产生任何问题吗？由于给我们更换 DLL 的时间非常短，因为应用程序不能长时间离线，我想确保一切正常。我是否遵循正确的方法？或者，我是否必须使用相同的框架（1.1）创建新的 DLL？我还需要做什么才能使应用程序顺利运行而没有任何问题。请原谅我这个蹩脚的问题，但这是我第一次遇到这种情况。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:57:50.777

在重新构建 DLL 时，您需要确保两件事：

[1] 项目的目标框架与您将部署它的框架相同。您可以从 project->properties 查看当前目标框架版本。如果您的实时服务器只有 1.1，那么您在项目文件中设置的目标也应该如此。

[2] 需要确保满足所有依赖项。您可以从解决方案资源管理器中的引用中查看所有依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:56:21.653

如果还有其他引用此 DLL 的内容，您可能需要反编译/重新编译该 DLL，并且如果您解构源代码，公钥很可能会发生变化。您应该安全地复制它，这将触发应用程序池的重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:55:58.010

要限制您遇到的问题，您需要针对 1.1 框架构建程序集。然后，在向下窗口期间：

1.  停止应用程序池。
2.  更换组件。
3.  重新启动应用程序池。

# testing - 测试 github 拉取请求的最佳实践是什么？

> ID：15767281
> 
> 赞同：0
> 
> 时间：2013-04-02T14:52:51.253
> 
> 标签：testing, github, pull-request

Github 拉取请求是接收对开源项目的代码贡献的好方法，但是将它们拉入代码库的最佳方式是什么？

开发人员可能会说他们的代码分支已经通过了所有测试，并且对他们的代码进行审查看起来不错；但是如果你只是合并然后你的本地测试失败了，那么你的 repo 就会处于某种状态。

如果您接受了拉取请求而不实际接受它，是否有一些好的方法可以在您将获得的代码上运行所有项目测试？

# php - 从具有动态列名的相同 mysql 表中选择

> ID：15767282
> 
> 赞同：0
> 
> 时间：2013-04-02T14:52:53.280
> 
> 标签：php, mysql, dynamic, limesurvey

我必须使用由limesurvey 创建的表格。表结构始终相同，前 9 列 (id|taken|submitdate|...) 也是如此。但是其余 200 列是动态命名的，由 id、questionset id 和 question id 组成（即 445999X180X151702）。可能会插入新表，但（目前）将始终遵循此方案。我必须通过 php 创建某种形式的结果表。我可以按数字引用列，但这对我来说似乎是错误的（问题数量的变化不太可能，但谁知道）。有什么不同的方法吗？如果没有，我至少可以创建某种映射文件，以便当我必须对我的 php 应用程序进行任何更改的表进行任何更改时，我的应用程序将很容易更新？

谢谢！

编辑：不幸的是我无法控制这个表结构。这是limesurvey创建表格的方式，因为这是这里使用的工具，我将不得不处理它。我正在寻找最好的方法来做到这一点:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:39:55.390

我不确定您希望最终结果是什么样子。

但是，元数据表`information_schema.columns`可以为您提供帮助。这将为您提供每个表的列位置 ( `ordinal_position`) 和列名称 ( ) 的映射。`column_name`

在 php 中，您可以按位置访问列的数据。然后，您可以在该表中查找该位置的列名。. . 并用它做你想做的事。

例如，您可以为一组此类表获取所有可能的列名，并为它们创建视图代码。就像是：

```
create view vw_AllQuestions as (
    select <column list> -- with NULL values for the columns not in TableA
    from tableA
    union all
    select <column list> -- with NULL values for the columns not in TableB
    from tableB
    . . .
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:11:45.160

虽然戈登斯的回答会奏效，但我能够更轻松地完成它：

```
$query  = 'SELECT * FROM lime_tokens_'.$audit.' AS tokens INNER JOIN lime_survey_'.$audit.' AS audits ON tokens.token = audits.token WHERE tokens.completed != "N"';
$result = mysql_query($query) or die(mysql_error());

while ($row = mysql_fetch_row($result)) {
...
} 
```

这给了我一个编号数组，并且由于所有调查的结构都相同，因此数组始终相同。

# asp.net - 信号R获取GetHttpContext

> ID：15767286
> 
> 赞同：2
> 
> 时间：2013-04-02T14:53:04.433
> 
> 标签：asp.net, asp.net-mvc-4, signalr, signalr-hub, signalr.client

我正在尝试做[这里](https://gist.github.com/davidfowl/4692934)所做的事情：

```
// Get the HttpContext from the SignalR request
var context = Context.Request.GetHttpContext(); 
```

（即使用httpcontext进行只读）

这就是我想要实现的目标：

1) 在事件发生更改时调用集线器中的 SendMessage 方法

```
public override Task OnConnected()
{
    ActionManager.refreshStatusChanged += this.SendMessage;
    return base.OnConnected();
} 
```

2) SendMessage 调用 Web 服务（可能需要几秒钟）并通过 signalR 发送响应。

```
public void SendMessage(object sender, ActionItemArgs e)
{
     var context = this.Context.Request.GetHttpContext(); // THIS WORKS RANDOMLY!!
     // USE CONTEXT FOR SOME OTHER STUFF

     // send response to clients
     this.Clients.Client(e.ConnectionId).actionInit(false, e);
} 
```

- 这是正确的做法吗？我应该改用任务吗，如果可以，我仍然可以访问 this.Context.Request.GetHttpContext() 吗？

-this.Context.Request.GetHttpContext() - 这是我偶尔看到的（这种情况很少发生）但它确实发生了，导致空引用异常（这些属性的一堆是空的）：

![在此处输入图像描述](https://i.stack.imgur.com/7D4wI.png)

# scala - 为什么Scala编译器拒绝没有前导空格的函数体？

> ID：15767297
> 
> 赞同：4
> 
> 时间：2013-04-02T14:53:46.207
> 
> 标签：scala

我发现这非常令人困惑。

```
scala> val a = (x:Boolean)=>!x
<console>:7: error: not found: value x
       val a = (x:Boolean)=>!x
                ^

scala> val a = (x:Boolean)=> !x
a: Boolean => Boolean = <function1> 
```

两者之间的唯一区别是空格。是因为词法分析器考虑`=>!`了运算符吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:11:40.703

你是对的，它无法正确解析第一个版本。以下是它为第一个和第二个选项生成的树的差异：

```
scala> import scala.reflect.runtime.{universe => u}
import scala.reflect.runtime.{universe=>u}

scala> import scala.reflect.runtime.{currentMirror => m}
import scala.reflect.runtime.{currentMirror=>m}

scala> import scala.tools.reflect.ToolBox
import scala.tools.reflect.ToolBox

scala> val tb = m.mkToolBox()
tb: scala.tools.reflect.ToolBox[reflect.runtime.universe.type] = scala.tools.reflect.ToolBoxFactory$ToolBoxImpl@4426fc2e

scala> val treeNotWorking = tb.parse("(x:Boolean)=>!x")
treeNotWorking: tb.u.Tree = (x: Boolean).$eq$greater$bang(x)

scala> val treeWorking = tb.parse("(x:Boolean) => !x")
treeWorking: tb.u.Tree = ((x: Boolean) => x.unary_$bang) 
```

如您所见，它尝试调用在别处定义`=>!`的布尔变量。`x`例如，如果我们`x`在范围内，我们会得到一个不同的错误：

```
scala> val x = true
x: Boolean = true

scala> val a = (x:Boolean)=>!x
<console>:17: error: value =>! is not a member of Boolean
       val a = (x:Boolean)=>!x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:25:52.527

Scala 不保留符号`=>!`：

```
scala> val =>! = 42
=>!: Int = 42 
```

任何未被该语言保留的连续标点字符字符串都可用于定义。如果要定义一个同时包含标点符号和字母数字字符的符号，则必须在标点符号和字母数字之间的每个转换处放置一个下划线，反之亦然。如果它不这样做，一串输入字符，例如，`x+y`将是单个符号（就像在 Lisp 中一样）。

# indexing - 跟踪文件和暂存文件之间的编码差异

> ID：15767302
> 
> 赞同：0
> 
> 时间：2013-04-02T14:53:50.110
> 
> 标签：indexing, libgit2

使用 libgit2 API，“添加”文件以进行跟踪或将修改后的文件添加到暂存区域之间有什么区别吗？

这是我目前用来暂存已修改的跟踪文件的代码：

```
int giterror = git_repository_index( &index, open_repo );
if( giterror != 0 )
{
    return giterror;
}

//  Refresh the index from disk to load the entries that may already be staged
giterror = git_index_read( index );
if( giterror != 0 )
{
    git_index_free( index );

    return giterror;
}

giterror = git_index_add_bypath( index, relativeFilePath );
if( giterror != 0 )
{
    git_index_free( index );

    return giterror;
}

// write updated index to disk - aka staging area
giterror = git_index_write( index );
if( giterror != 0 )
{
    git_index_free( index );

    return giterror;
}

// write the index of changes to a tree
git_oid rootTreetOID;
giterror = git_index_write_tree( &rootTreetOID, index );
if( giterror != 0 )
{
    git_index_free( index );

    return giterror;
} 
```

我应该使用相同的代码将未跟踪的文件添加到索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:43:32.157

是的你应该。

`git_index_add_bypath()`*文档指出，当愿意“从磁盘上的文件添加或更新索引条目”*时，应使用此方法。

这种方法能够

*   将未跟踪的文件添加到索引
*   暂存文件的修改

# c# - C#：自定义隐式转换运算符失败

> ID：15767308
> 
> 赞同：11
> 
> 时间：2013-04-02T14:54:02.190
> 
> 标签：c#, casting, asp.net-4.0, implicit

好吧，我一直在努力寻找这方面的任何信息。我建立了一个小类来查看类型安全枚举对于字符串的实现有多难，因为我想将它们用于数据库字段名称等。我从不喜欢枚举只能用于整数的事实。
然而，即使我已经`implicit operator`为这个类实现了一个，每次我尝试使用它时，它都会给我一个无效的强制转换异常。我很茫然，因为此时我的代码没有任何问题。
这是课程：

```
/// <summary>
/// SBool - type-safe-enum for boolean strings
/// </summary>
public sealed class SBool
{

    private readonly String name;
    private readonly int value;

    // these guys were for conversions. They might work better in another case,
    //  but for this one, they weren't very helpful.
    // ((I.e. they didn't work either.))
    //private static readonly Dictionary<SBool, String> stringsByBool = new Dictionary<SBool, String>();
    //private static readonly Dictionary<String, SBool> boolsByString = new Dictionary<String, SBool>();

    public static readonly SBool True = new SBool( 1, "true" );
    public static readonly SBool False = new SBool( 0, "false" );

    private SBool( int value, String name )
    {
        this.name = name;
        this.value = value;
        //stringsByBool[this] = name;
        //boolsByString[name] = this;
    }

    private SBool( SBool sbool )
    {
        this.name = sbool.name;
        this.value = sbool.value;
        //stringsByBool[this] = name;
        //boolsByString[name] = this;
    }

    public override String ToString()
    {
        return name;
    }

    /// <summary>
    /// allows implicit casting of SBools to strings
    /// </summary>
    /// <param name="sbool">the SBool to cast into a string</param>
    /// <returns>the string equivalent of the SBool (its value)</returns>
    public static implicit operator String( SBool sbool )
    {
        if ( sbool == SBool.True )
            return SBool.True.name;
        else
            return SBool.False.name;
    }

    /// <summary>
    /// implicitly cast a string into a SBool.
    /// </summary>
    /// <param name="str">the string to attempt to cast as a SBool</param>
    /// <returns>the SBool equivalent of the string,
    /// SBool.False if not either "true" or "false".</returns>
    public static explicit operator SBool( String str )
    {
        if ( !String.IsNullOrEmpty(str) && str.ToLower() == "true" )
            return SBool.True;
        else
            return SBool.False;
    }

    public static bool operator ==( SBool left, SBool right )
    {
        return left.value == right.value;
    }

    public static bool operator !=( SBool left, SBool right )
    {
        return left.value != right.value;
    }
} 
```

这在检查 Session 变量时失败：
`if( ( (string)Session["variable"] ) == SBool.False )`带有 InvalidCastException，
坦率地说，我不知道为什么。

提前致谢; 任何人都可以解释为什么这不起作用的 cookie（cookie 并非在所有地区都可用）。我将解决其他问题，但如果有任何不清楚的地方，请告诉我。有关类型安全枚举的更多信息，这是我基于此类[的 SO 帖子之一。](https://stackoverflow.com/questions/424366/c-sharp-string-enums)

[MetaEDIT] 忽略这一点。我大错特错，大错特错。[/编辑]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T15:11:18.643

用户定义的隐式和显式运算符完全是编译时机制，而不是运行时机制。编译代码后，运行时将不知道任何用户定义的转换运算符。

当编译器进行类型检查并看到 a`Foo`是预期的但实际值为 a`Bar`时，它将首先检查内置的语言隐式转换运算符以查看是否存在适当的转换。如果没有，它会检查隐式转换运算符`Foo`和`Bar`隐式转换运算符的定义，如果找到一个，它将添加对相关静态方法的调用以执行转换。一旦进入运行时，将只应用内置的语言隐式运算符。

在这种情况下，您不是从转换`SBool`为 a `string`，而是从转换`object`为`string`（就编译器而言）并且没有转换运算符来处理它。

您需要首先将`Session`变量的结果转换为`SBool`（实际上是），然后转换为其他类型，以便能够利用用户定义的转换运算符。所以：

```
if( ( (SBool)Session["variable"] ) == SBool.False ) 
```

会工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T12:20:09.350

正如 Servy 提到的，这些类型的转换发生在编译时。但是，有一种方法可以通过使用 dynamic 关键字来强制在运行时进行此检查。而不是转换为 SBool 转换为动态。这将导致强制转换运算符在运行时执行。

在我看来，转换为 SBool 是一种更清洁且不易出错的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T15:06:23.300

当您将 Session[] 转换为字符串时，您正在执行显式转换。您没有定义 SBool->String 显式运算符，只有隐式定义。

您需要添加显式 SBool->string 转换。

# mysql - MySQL 跨表删除

> ID：15767312
> 
> 赞同：1
> 
> 时间：2013-04-02T14:54:16.050
> 
> 标签：mysql, sql, join, sql-delete

我正在尝试从两个 MySQL 表中删除：

```
1) table_images
2) table_images_links 
```

具有相同 image_id 和 pair_id id 的所有行条目

```
1) table_images.image_id
2) table_images_links.pair_id 
```

> 这个 id 的 table_images_links.il.object 应该完全等于 'cat'

我的查询是：

```
mysql_query("
DELETE FROM table_images im, table_images_links il 
WHERE im.image_id = il.pair_id 
AND il.object = 'cat'
"); 
```

问题是在此查询运行后没有发生任何事情。

我的问题是：我如何跟踪这一点并使查询根据我的需要工作。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:05:12.420

在语句中加入表时，您需要指定要删除行的表`DELETE`。在这种情况下，请使用表名上给出的*ALIAS 。*

```
DELETE im, il                   -- this will delete row in both tables.
FROM   table_images im, table_images_links il 
WHERE  im.image_id = il.pair_id AND 
       il.object = 'cat' 
```

或者

```
DELETE im, il                   -- this will delete row in both tables.
FROM   table_images im
       INNER JOIN table_images_links il 
           ON  im.image_id = il.pair_id AND 
               il.object = 'cat' 
```

# php - 在 php 脚本中为联系表单初始化 javascript

> ID：15767317
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:54:20.267
> 
> 标签：php, javascript, html, forms

您好，正在制作一个简单的联系表格。

```
<form action="mail.php" method="POST">
  <input type="text" id="name" name="name" placeholder="Name" required><br />
  <input type="text" id="email" name="email" placeholder="Mail" required><br />
  <textarea name="message" placeholder="Nachricht" required></textarea><br />
  <button name="submit" type="submit" id="submit">send</button>
</form> 
```

用一个简单的 php 邮件程序

```
<?php 
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$formcontent="Von: $name \n Nachricht: $message" ;
$recipient = "mail@mail.com";
$subject = "$betreff";
$mailheader = "Von: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!" //need to be removed;
?> 
```

我使用一个简单的 javascript 将按钮更改为“发送”

```
var send = document.getElementById('submit');
    if(send) {
        send.onclick = function () {
            this.innerHTML = 'sending';
        }
    } 
```

`sent`php脚本成功完成后是否可以将按钮innerhtml更改为？另外我怎样才能避免重定向到mail.php？

首先它应该显示`send`. 单击后`sending`应该出现，并且当 mail.php 不`sent`应该出现在按钮中时。

有什么想法或建议吗？

最好的问候丹尼姆

[编辑：通过 jquery ajax 提交联系表单的](https://stackoverflow.com/questions/15769651/error-on-contact-form-submit-via-jquery-ajax)进一步进展和解决方案错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:57:44.770

> php脚本成功完成后是否可以将按钮innerhtml更改为发送？

如果您重新加载相同的模板，您可以将按钮呈现为`sent`. 您必须在后端跟踪表单的状态。您可以使用 ajax 更改您的表单以通过 javascript 提交。收到成功的响应后，您可以更改 innerHTML。

> 另外我怎样才能避免重定向到mail.php？

不要提交表格。使用 javascript 收集值并发出 ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:17:34.663

您应该使用 XHR (AJAX) 请求。

与其像在您的示例中那样编写普通的 javascript，不如使用 jQuery 之类的 javascript 框架更快。

这样的事情应该可以解决问题：

```
$('form#formId').submit(function(){

    //set submit label to sending
    $('form#formId #submit').html('sending');

    $.post('mail.php', function(){
        //set submit label to sent
        $('form#formId #submit').html('sent');
    });

    //returning false to prevent native submission of form.
    return false;

}); 
```

您需要为您的表单提供一个 ID 属性，以便您可以有选择地选择它。

# c# - 仅获取带有套接字的 http 状态代码

> ID：15767318
> 
> 赞同：0
> 
> 时间：2013-04-02T14:54:20.753
> 
> 标签：c#, sockets, http

我必须检查一些域的 http 状态代码，尽可能减少流量。

我决定使用套接字。问题是系统总是接收完整的标头，而不仅仅是 20 个字节。

我怎样才能更多地减少响应？

这是代码...工作正常

```
 string uri = "www.stackoverflow.com";
    var addresses = System.Net.Dns.GetHostAddresses(uri);
    IPEndPoint hostep = new IPEndPoint(addresses[0], 80);
    Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    sock.Connect(hostep);
    if (sock.Connected)
    {
        byte[] msg = Encoding.UTF8.GetBytes("HEAD / HTTP/1.1\r\nHost: "+uri+"\r\nConnection: Close\r\n\r\n");
        int i = sock.Send(msg,0,msg.Length);
        byte[] bytes = new byte[20];
        i = sock.Receive(bytes);
        string header = Encoding.ASCII.GetString(bytes);
        Console.WriteLine(header);
    } 
```

感谢每一个小小的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:07:05.497

```
i = sock.Receive(bytes, 20); 
```

然而，这是没有意义的：计算机很可能已经收到带有完整响应的 TCP 数据包，而您所做的只是读取系统缓冲区的一部分。

# php - Google Maps API，如何限制结果数量？

> ID：15767321
> 
> 赞同：0
> 
> 时间：2013-04-02T14:54:25.020
> 
> 标签：php, google-maps

我正在为市政厅网站工作。他们有一个包含 +-13,000 套公寓的数据库。

我做了一个引擎，可以检索 x 套公寓，并将它们的地址、邮政编码等放在地图上......

有没有办法限制 API 的响应数量？

例如，如果我们尝试在地图上放置 100 多个公寓，则会收到错误消息。

我需要这样做以节省服务器上的资源，并且不超过 Google Maps API（免费版）施加的限制。

如果没有解决方案，我可以做到这一点，但现在对我来说并不容易。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:59:13.883

首先 - 准备工作：

为公寓创建索引：稍后将用于限制缩放级别的公寓数量。保存到所有公寓的 DB 坐标（将来最好存储它们，当您将其添加到 DB 时，因此无需同时索引所有 13k+）

在此之后遵循简单的逻辑：仅在地图的视口中显示公寓，并且仅使用 zoomLevel 等于 DB 中的索引（我们手动创建，或者它可能是随机的）

# arrays - F#反序列化数组数组

> ID：15767328
> 
> 赞同：1
> 
> 时间：2013-04-02T14:54:37.303
> 
> 标签：arrays, f#, deserialization

我必须从存储为 JSON 数组的文件中读取一些数据。基本上，数据代表一棵二叉树，带有节点标签和叶子上的值，并且风格化了一条线，如下所示：

[label1,[label2,[label3,w],x],[label4,y,z]]

在所有分支上具有任意深度。现在最终我希望将其转换为树结构，但第一步是读入它。

以下 C# 代码有效（使用 System.Web.Extensions.dll）：

```
var jss = new JavaScriptSerializer();
foreach (string line in System.IO.File.ReadAllLines(filename))
{
    var data = jss.Deserialize<object[]>(line);
} 
```

对于“作品”，我的意思是在上面给出的示例中，data.[1] 又是一个对象数组。F# 的直接端口是

```
let data = 
   let jss = new JavaScriptSerializer()
   System.IO.File.ReadAllLines(filename)
       |> Seq.map (fun line -> jss.Deserialize<obj[]>(line)) 
```

但是，将此应用于示例确实会产生数据。 [1] 是一个对象而不是对象数组。

我考虑将反序列化替换为

```
 |> Seq.map (fun line -> jss.Deserialize<seq<obj[]>(line)) 
```

但这不起作用，因为（在我的示例中）label1 是一个字符串，并且（显然）不能转换为 System.Object []。我还尝试将 C# 代码包装在静态类中，然后使用该类读取 F# 中的数据，但这也不起作用。我知道我可以使用外部 JSON 解析器，但由于使用 JavaScriptSerializer 确实在 C# 中工作，我的固执开始了，我也想在 F# 中这样做。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:15:17.873

这对我有用：

```
#r "System.Web.Extensions"

open System.Web.Script.Serialization

let jss = new JavaScriptSerializer()
let data = jss.Deserialize<obj[]>("""["label1",["label2",["label3","w"],"x"],["label4","y","z"]]""")
let doesItWork = data.[1].GetType() = typeof<obj[]> 
```

你能提供一个更完整的例子来说明什么不适合你吗？

# slider - 如何用图像（箭头）替换 Nivo 滑块“上一个”和“下一个”

> ID：15767331
> 
> 赞同：1
> 
> 时间：2013-04-02T14:54:44.023
> 
> 标签：slider, nivo-slider

我正在使用 Nivo 滑块...

我设法使用 css 隐藏了滑块底部的数字。

我现在想做的是用我在photoshop中制作的箭头替换“prev”和“next”......我一直在这里和谷歌上搜索，但我找不到解决方案。

如果有人可以提供帮助，我将不胜感激。

桑迪普

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:44:57.187

我会为此使用 CSS 图像替换。所以：

```
.nivo-directionNav .nivo-prevNav {
  background:transparent url(path/to/image) 0 0 no-repeat;
  height:20px; /*height of img*/
  width:10px; /*width of img*/
  text-indent:-10000px; /*moving the default text*/
  overflow:hidden; /*hiding the default text*/
} 
```

然后重复 .nivo-nextNav。您还可以使用定位将箭头放在幻灯片中所需的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:19:45.777

您可以通过使用自己的图像和设置创建新主题来做到这一点，请参见此处：http: [//support.dev7studios.com/articles/nivo-slider-jquery-plugin/creating-custom-themes](http://support.dev7studios.com/articles/nivo-slider-jquery-plugin/creating-custom-themes)

或者通过将按钮的 png 图像更改为现有主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T07:23:10.947

在你的文件中包含这一行

`<link href="<?php echo get_template_directory_uri(); ?>/default/default.css" rel="stylesheet" type="text/css" />`

并将`background:url(arrows.png) no-repeat;`.theme-default .nivo-directionNav 包含在存储在默认文件夹中的 default.css 文件中。请注意，箭头图像必须存储在与放置 defalut.css 的文件夹相同的文件夹中。希望这会有所帮助。

# java - Spring中的Restful Service导致400 Bad request

> ID：15767334
> 
> 赞同：1
> 
> 时间：2013-04-02T14:54:46.897
> 
> 标签：java, spring, resttemplate

我在使用 Spring restTemplate 时遇到了一些问题。

根据我尝试访问的 Rest Service 的 API 文档（仅适用于 PHP）。POST 的正确格式是：

```
curl -d "data={\"client_email\":\"steve@martiancraft.com\",\"client_name\":\"Steve Ryner\",\"employee_id\":0,\"service_id\":20216,\"start_date\":\"2012-08-15 09:00:00\",\"note\":\"This is a test.\"}" http://www.setster.com/api/v2/company/7089/appointment?session_token=niab4ptf9mjjem41cooso389f3 
```

得到回应：

```
{
"statusCode":0,
"statusDescription":"OK",
"data":{
    "status":2,
    "client_id":103352,
    "client_email":"steve@martiancraft.com",
    "client_name":"Steve Ryner",
    "company_id":"7089",
    "employee_id":9862,
    "location_id":"13832",
    "start_date":"2012-08-15 14:00",
    "end_date":"2012-08-15 15:00",
    "length":3600000,
    "note":"This is a test.",
    "service_id":20216,
    "type":"60 Min Swedish",
    "duration_padding":0,
    "repeat_type":0,
    "subservices":"",
    "timezone_dif":-18000,
    "price":"60",
    "custom_fields":"[]",
    "client_phone":"",
    "client_address":"",
    "payment_pending":0,
    "id":171302483
} 
```

}

这是我的代码的重要部分：

```
RestTemplate restTemplate = new RestTemplate();

Map<String, String> data = new HashMap<String, String>();

        data.put("client_name", "Alexandre Moraes");
        data.put("client_email", "kalvinmoraes@gmail.com");
        data.put("client_phone", "98065867");
        data.put("employee_id", "0");
        data.put("location_id", "16675"); // Here i have to specify the "Location_ID" because there is more than just one
        data.put("start_date", "2013-05-03 09:15:00");
        data.put("service_id", "18499");

        String result = restTemplate.postForObject("http://setster.com/api/v2/company/6788/appointment/?session_token="+session_token, data, String.class);

        resp.setContentType("text/html;charset=UTF-8");
        PrintWriter out = resp.getWriter();
        out.println(result); 
```

但是当我执行那个**postForObject**时，响应是一个**400 Bad 请求**，好像发送了错误的东西：

```
WARNING: POST request for "http://setster.com/api/v2/company/6788/appointment/?session_token=[censored]" resulted in 400 (Bad Request); invoking error handler
WARNING: StandardWrapperValve[setster]: PWC1406: Servlet.service() for servlet setster threw exception 
```

也许我发送数据的格式是错误的。但我不知道如何管理这些信息。

任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:51:45.733

在您的 curl 请求中，您的 HTTP POST 的正文是：

```
data={\"client_email\":\"steve@martiancraft.com\",\"client_name\":\"Steve Ryner\",\"employee_id\":0,\"service_id\":20216,\"start_date\":\"2012-08-15 09:00:00\",\"note\":\"This is a test.\"} 
```

因此，您的端点需要一个标准的 HTTP POST，其中包含一个名为 data 的字符串，以及您的序列化 JSON。RestTemplate 假设您要以这种方式提交：

```
{\"client_email\":\"steve@martiancraft.com\",\"client_name\":\"Steve Ryner\",\"employee_id\":0,\"service_id\":20216,\"start_date\":\"2012-08-15 09:00:00\",\"note\":\"This is a test.\"} 
```

即，只是一个 JSON 对象。您将无法为此使用 RestTemplate。使用Spring 的HTTP 服务[内置插件之一。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html#remoting-caucho-protocols)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:26:00.180

使用 Jackson lib - 将对象转换为 json 的简单方法：

`ObjectMapper mapper = new ObjectMapper();`

```
mapper.writeValue(resp.getWriter(), data); 
```

# ruby-on-rails - 如何强制 Openssl 更新？

> ID：15767337
> 
> 赞同：1
> 
> 时间：2013-04-02T14:54:52.653
> 
> 标签：ruby-on-rails, openssl, rvm, homebrew

我一直在尝试使用这个命令来安装带有条带/设计等的railsapp，使用这个命令：

```
rails new clients -m https://raw.github.com/RailsApps/rails-composer/master/composer.rb -T 
```

当我这样做时，我得到了这个错误：

```
apply  https://raw.github.com/RailsApps/rails-composer/master/composer.rb
/usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/net/http.rb:799:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError) 
```

我一直在按照此处的说明进行操作：[http](http://railsapps.github.com/openssl-certificate-verify-failed.html) ://railsapps.github.com/openssl-certificate-verify-failed.html尝试进行故障排除，这是迄今为止发生的情况：

*   重新安装 RVM（没有用，仍然显示我的 OpenSSL 版本为：`OpenSSL 0.9.8r 8 Feb 2011`
*   尝试使用 brew 安装，它说 OpenSSL 已经安装

如果我还能听到任何声音，我现在早就把它撕掉了。我将非常感谢对此的任何帮助，以下是我的任何相关版本：

```
ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin12.2.0]

Rails 3.2.12

OpenSSL 0.9.8r 8 Feb 2011

rvm 1.19.1 (master)

Homebrew 0.9.4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:54:07.243

跑：

```
rvmsudo rvm get head
rvm autolibs homebrew
rvm reinstall 1.9.3
rvm reinstall 2.0.0 
```

rubygems 的错误是无害的。

# html - 重定向网页并打开另一个网页的方法？

> ID：15767346
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:55:04.100
> 
> 标签：html, redirect, hyperlink, web

只是想知道是否有网站代码，何时，如果在当前网页上单击超链接图片 - www.idontknow.com（例如）。一个站点打开，一个更改页面

所以我点击 www.idontknow.com/page1 上的图片

一个新窗口打开到 www.youclickedthispicture.co.uk/troll

**但是**在打开另一个窗口的同时，是否可以将 www.idontknow.com/page1 更改为 www.idontknow.com/page4 例如

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:02:59.693

尝试：

```
<a href="www.idontknow.com/page4" onclick="window.open('www.youclickedthispicture.co.uk/troll')">Click Here</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:58:04.893

您可以使用该`target`属性在新页面中打开第一个链接，然后使用 document.location 更改当前页面的 URL。

```
<a href="newpage.html" target="_blank">Open in new page</a>

$("a").click(function(){
  document.location = "newpage.html";
}) 
```

注意：上面的函数正在实现 jQuery。不确定您是否对此感到满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:58:15.643

同时打开链接的页面（包括图像预览）可以将`target`HTML 属性与 javascript 结合使用`onclick`。首先，href：

采取以下html：

```
<a href="http://www.idontknow.com/some_image.png">
  <img src="http://www.idontknow.com/some_image.png" />
</a> 
```

...单击此图像将在同一窗口中加载图像。现在，考虑：

```
<a target="_blank" href="http://www.idontknow.com/some_image.png">
  <img src="http://www.idontknow.com/some_image.png" />
</a> 
```

...单击此图像将在新选项卡或窗口中打开图像（或链接）（取决于用户设置和浏览器功能）。

用于完成同时弹出窗口的 javascript：

```
<a onclick="window.open('http://www.idontknow.com/some_image.png')" href="http://www.idontknow.com/some_other_page.html">
  <img src="http://www.idontknow.com/some_image.png" />
</a> 
```

单击 THAT 会将当前页面定向到`some_other_page.html`并在弹出窗口中打开图像（或其他）。

**文档**

*   `a`MDN 上的元素 - [https://developer.mozilla.org/en-US/docs/HTML/Element/a](https://developer.mozilla.org/en-US/docs/HTML/Element/a)
*   `window.open`在 MDN - [https://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)

# jquery - 基于 jQuery AJAX SOAP 的 Web 服务和 CORS（跨源资源共享）

> ID：15767349
> 
> 赞同：17
> 
> 时间：2013-04-02T14:55:08.013
> 
> 标签：jquery, web-services, soap, cors

几个星期以来，我一直在尝试让我的一个基于 jQuery AJAX SOAP 的跨域 Web 服务从我为我的一位客户编写的 jQuery 插件中工作。我所做的大部分研究似乎表明这是不可能的，因为 CORS 或跨域资源共享只允许 jasonP (GET) 类型的调用。

**我终于想出了如何让它发挥作用，并认为我会分享我必须做的事情。**

首先要了解的是，在支持 CORS 的浏览器中，服务器位于另一个域中，除 GET 之外的任何其他参数（以及其他参数）都将导致所谓的预检检查。这意味着浏览器将向服务器询问允许执行的选项列表。除非服务器返回确切的选项列表以允许基于 SOAP 的 Web 服务，否则即使在发出实际请求之前，调用也会失败。

您需要做的是让 Web 服务器（在我的示例中为 IIS7.5）返回正确的选项列表。
为此，您可以在 inetpub\wwwroot 文件夹中配置 web.config 文件（如果没有，只需创建它并将以下内容复制到其中）。

我的 web.config 文件看起来像这样。

**重要的是，一旦我意识到这一切都按预期工作，***一切都是区分大小写的。*****

 **```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
 <system.webServer>
  <httpProtocol>
   <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Methods" value="POST, GET, OPTIONS, PUT, DELETE" />
    <add name="Access-Control-Allow-Headers" value="content-type,soapaction,x-requested-with" />      
    </customHeaders>
   </httpProtocol>
        <handlers accessPolicy="Read, Execute, Script" />
 </system.webServer>
</configuration> 
```

我的 jQuery AJAX 代码如下所示。

```
var getNextJobId = function()
{
  var se = '';
  se = se + '<?xml version="1.0" encoding="UTF-8" standalone="no"?>';
  se = se + '<soap-env:Envelope xmlns:soap-env="http://www.w3.org/2003/05/soap-envelope">';
  se = se + '<soap-env:Body>';
  se = se + '<ebas:getNextJobIdRequest xmlns:ebas="http://www.ebasetech.com">';
  se = se + '<ebas:ORGCODE>' + plugin.settings.orgcode + '</ebas:ORGCODE>';
  se = se + '</ebas:getNextJobIdRequest>';
  se = se + '</soap-env:Body>';
  se = se + '</soap-env:Envelope>';
  $.ajax(
  {
    url: params.webserviceTargetUrl,
beforeSend: function(xhr)
{
  xhr.setRequestHeader("SOAPAction", "getNextJobId");
},
type: "POST",
dataType: "xml",
data: se,
crossDomain: true,
headers: {"X-Requested-With": "XMLHttpRequest"},
async: false,
success: function(xml)
{
  params.jobId =   $(xml).find("ebas\:JOBID").text();
},
failure: function(xml)
{
  params.webserviceFailure = $(xml).text();
},
      contentType: "charset=UTF-8"
});
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-13T16:52:01.737

*“这是不可能的，因为 CORS 或跨域资源共享只允许 jasonP (GET) 类型的调用。”*

CORS 不限于 GET 方法，也不限于 JSONP 样式的调用。

JSONP 是一种在 CORS 标准化之前 Web 开发人员使用的技术，用于向服务于页面的主机以外的主机执行 AJAX 请求。JSONP 通过`<script>`在页面中插入标签来工作。它需要服务器参与，通常通过将 JSON 结果包装在对函数的调用中，在 AJAX 调用中通过`callback`参数命名。看到这个答案： [what-is-jsonp-all-about](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)。

正如您所指出的，JSONP 仅限于执行 GET 方法，因为`<script>`只执行 GET。它也有其他问题，例如无法处理错误。例如，如果返回 400 响应，则脚本根本不会被浏览器执行，而不是为 AJAX 调用执行 JS 错误处理程序。

CORS 是一个较新的标准。它还需要服务器参与，因为它必须处理预检检查，并使用额外的 HTTP 标头，例如：`Access-Control-Allow-Origin`、`Access-Control-Allow-Methods`和`Access-Control-Allow-Headers`，您在问题的编辑中很好地描述了这些标头。它不限于 GET 方法。相反，它仅限于由`Access-Control-Allow-Methods`标头中的预检检查结果指定的那些方法。CORS 不需要在回调函数中包装结果或对结果进行任何其他调整，它可以处理错误和其他状态代码。有关更多信息，请参阅 CORS 的出色[概述。](http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/)**

# c# - 无法加载文件或程序集 System.IO.FileNotFoundException

> ID：15767350
> 
> 赞同：1
> 
> 时间：2013-04-02T14:55:12.390
> 
> 标签：c#, remoting

我正在开发的应用程序是一个简单的远程聊天应用程序。

当我尝试运行我的应用程序时遇到此异常。当它谈到加载文件或程序集时，我真的不明白。

> “System.Reflection.TargetInvocationException：调用目标引发了异常。---> System.IO.FileNotFoundException：无法加载文件或程序集'客户端，版本 = 1.0.0.0”

```
try
{
   gt = (Greeting)Activator.GetObject(typeof(Greeting), "tcp://Localhost:7189/Greeting");
   handler = new MessageHandler(OnReceive);
   gt.Sender += handler;
}
catch(Exception ex)
{
   textBox2.Text = ex.ToString();
} 
```

此异常在此行​​引发

```
gt.Sender += handler; 
```

下面是我的问候课。

```
[Serializable]
public delegate void MessageHandler(string mymsg);
public class Greeting:MarshalByRefObject
{
    public event MessageHandler Sender;

    public override object InitializeLifetimeService()
    {
        return null;
    }

    public Greeting()
    {
    }

    public void postGreeting(string msg)
    {
        if (Sender != null)
        {
            Sender(msg);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:55:52.887

我假设处理程序是在您的客户端程序集中创建的？当您订阅 Greetings.Sender 事件时，对处理程序的引用将传递给您的服务器程序集。作为服务器端反序列化的一部分，它必须解析处理程序类型。由于它位于客户端程序集中，因此服务器程序集必须可以访问它。

将所有程序集构建到一个共享的调试或发布文件夹中，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T11:39:07.010

使用 microsoft sysinternals 进程监视器的想法对我来说非常有效。我能够看到它正在错误的文件夹中寻找依赖项之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T11:51:30.570

If you experience `Could not load file or assembly` use the [Assembly Binding Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx) (on disk called `fuslogvw.exe` and availbale from the .NET SDK) to find out exactly what your process is actually probing, either in the GAC or your application folder.

A typical logentry will hold info similar to this:

```
LOG: Processing DEVPATH.
LOG: DEVPATH is not set. Falling through to regular bind.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Post-policy reference: graphicfailtest.resources, Version=0.0.0.0, Culture=en-US, PublicKeyToken=null
LOG: Attempting download of new URL file:///C:/Program Files/Microsoft.NET/FrameworkSDK/Samples/Tutorials/resourcesandlocalization/graphic/cs/en-US/graphicfailtest.resources.DLL. 
```

and you can then verify that it loads assemblies from a location you expect, inclusing if it is the correct version.

[Probing](http://msdn.microsoft.com/en-us/library/15hyw9x3.aspx) from the msdn docs.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T17:32:09.633

使用 microsoft sysinternals 进程监视器，配置该工具来监视您的应用程序的所有文件访问操作，然后您可以看到您的进程正在尝试访问哪些程序集。

# android - Android中的WebView触发标准浏览器

> ID：15767351
> 
> 赞同：0
> 
> 时间：2013-04-02T14:55:18.620
> 
> 标签：android, webview

我在 Android 中创建了一个用于显示网站的 Activity。我使用了这段代码：

```
private WebView mWebview; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    mWebview = new WebView(this);
    mWebview.getSettings().setJavaScriptEnabled(true); // enable javascript
    mWebview.loadUrl("http://blablabla");
    CookieSyncManager.createInstance(this);
    CookieManager cookieManager = CookieManager.getInstance();
    cookieManager.removeAllCookie();
    setContentView(mWebview); 
```

但是当我将它与例如 www.bild.de 或其移动版本 wap.bild.de 一起使用时，它会触发标准浏览器并从我的应用程序中退出。如果我点击该网站的链接，也是如此。我不想要那个。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:16:42.307

你并没有真正做任何“错误”的事情。默认情况下，链接点击和重定向会显示用户选择的 Web 浏览器，而不是将它们保留在您的`WebView`.

为了解决这个问题，您需要在您的, via中添加一个`WebViewClient`实现。您的子类将需要覆盖以处理您想要保留在的任何 URL ：`WebView``setWebViewClient()``WebViewClient``shouldOverrideUrlLoading()``WebView`

```
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
  if (/* url is one you want to keep in the WebView */) {
    view.loadUrl(url);

    return(true);
  }

  return(false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:17:07.170

我刚刚在手机上的一个测试项目中运行了您的代码，并且在加载第一页时它似乎运行良好。它第一次加载 wap.bild.de 没有任何问题。

但是，我确实遇到了与点击链接时启动默认浏览器相同的问题。要解决此问题，只需添加以下行：

```
mWebview.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url); // open link in the same web view.
            return true;
        }
    }); 
```

# sql - 如何检查日期字符串是否以 4 位数格式输入年份？SQL Server 2008

> ID：15767354
> 
> 赞同：0
> 
> 时间：2013-04-02T14:55:35.837
> 
> 标签：sql, sql-server-2008

我需要创建一个函数来检查是否以 4 位格式输入了带有年份的日期字符串，例如 1-1-45 将返回 0，1-1-2045 将返回 1。

有人可以给我一个方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:59:34.007

你想要这个吗？

```
where right(val, 4) like '[0-9][0-9][0-9][0-9]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:01:06.530

SQL Server 支持`ISNUMERIC()`

```
SELECT ISNUMERIC(RIGHT('1-1-2045', 4)) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d41d8/11814)

*为什么不使用日期选择器或任何其他允许您选择日期的控件？*

# android - SDK 是否适用于 3D 引擎开发，还是我应该直接使用 NDK？

> ID：15767356
> 
> 赞同：3
> 
> 时间：2013-04-02T14:55:37.203
> 
> 标签：android, performance, android-ndk

就像标题状态一样 - 我想为 Android 编写一个 3D OpenGL ES 2.0 引擎（对制作游戏不感兴趣，只是引擎）。我应该直接使用 NDK 并用 C++ 编写所有内容还是先使用 Java？

大多数关于 Android 性能的链接都来自 2010 年，当时 JIT 和并发垃圾收集器出现之前。Java 的性能仍然如此糟糕（不要使用公共字段，不要使用虚拟方法），我应该期望使用 C++ 获得什么样的加速？

顺便说一句，我对这两种语言都很熟悉，所以不涉及舒适问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:04:45.513

根据 Android 的设计和工作方式，有 1 个专用于 Java/SDK 的单线程和 1 个专用于 NDK/C++ 应用程序的单线程，SDK 和 NDK 都只能生成将在沙箱中运行的应用程序，实际上有点将使用 NDK 创建的应用程序定义为“本地”是不正确的，因为您永远无法使用商业和官方 Android 工具包进行本地化，这两种解决方案都会导致使用 Android 虚拟机。

因此，它们为开发人员提供了大致相同的折衷方案，两种解决方案都需要权限，并且两种解决方案最终都打包在一个 apk 中，许多人选择 C++ 而不是 Java 的主要原因是，你可以很容易地将 C++ 引擎移植到其他平台，你不能用Java做同样的事情。

如果你想要一个跨平台的解决方案，我建议使用 C++，如果你不需要跨平台的解决方案，我建议使用 Java，由于 API 的可达性和不那么繁琐的管道，Java 将更容易处理，尤其是对于“构建和编译”部分。

# ruby-on-rails-3 - 表单提交时出现 Rails 路由错误

> ID：15767358
> 
> 赞同：1
> 
> 时间：2013-04-02T14:55:41.023
> 
> 标签：ruby-on-rails-3, routing

我正在尝试使用 Rails 实现一个简单的私人消息系统，它工作正常，但是在构建回复系统时，我得到了错误。这是代码：

```
def show
  @message = current_user.messages.find(params[:id])
    if @message != nil
      @sender = User.find(@message.id).email
      @replies = @message.replies
      @reply = Reply.new
      @reply.message_id = params[:id]
      @reply.user_id = current_user.id
   else
      index_redirect
   end 
```

结尾

```
 def reply
    @reply = Reply.new(params[:reply])
    if @reply.save
      set_flash "Reply sent"
      show_redirect
    else
      set_flash "Error, please try again"
      show_redirect
    end
  end 
```

和观点：

```
<h1>Messages#show</h1> 
```

```
<h2>replies</h2>
<div>
    <%- @replies.each do |reply| %>
        <%= content_tag :span, reply.content %>
        <%= content_tag :span, reply.created_at %>
        <%= content_tag :span, User.find(reply.user_id).email %>
    <% end %>

    <%= form_for @reply, :as => :reply, :url => { :action => :reply } do |reply| %>
        <%= reply.text_area :content %>
        <%= reply.submit "Reply" %>
    <% end %>
</div> 
```

最后是路线：

```
 resources :messages do
    collection do
      delete 'destroy'
      post   'reply'
    end
  end

 messages DELETE /messages(.:format)            messages#destroy
      reply_messages POST   /messages/reply(.:format)      messages#reply
                     GET    /messages(.:format)            messages#index
                     POST   /messages(.:format)            messages#create
         new_message GET    /messages/new(.:format)        messages#new
        edit_message GET    /messages/:id/edit(.:format)   messages#edit
             message GET    /messages/:id(.:format)        messages#show
                     PUT    /messages/:id(.:format)        messages#update
                     DELETE /messages/:id(.:format)        messages#destroy 
```

**但是在提交表单时我收到此错误：**

> 没有路由匹配 {:action=>"show", :controller=>"messages"}

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:02:08.857

我想，当你有你的表格时，它正在发送一个`POST`只接收的动作，`GETs`这就是你得到错误的原因。在这种情况下，您要么需要发送到正确的操作`create`（因为它接受`POST`），要么设置`:method`为`:get`.

在您看来，以下是将表单更改为`get`方法的示例。

```
<%= form_for @reply, :as => :reply, :url => { :action => :reply }, :html => {:method => :post} do |reply| %>
  <%= reply.text_area :content %>
  <%= reply.submit "Reply" %>
<% end %> 
```

# c# - 为什么我的 XDocument 保存了一个不完整的文件？

> ID：15767368
> 
> 赞同：0
> 
> 时间：2013-04-02T14:55:58.683
> 
> 标签：c#, linq-to-xml

我有一个使用线程运行一系列插件的程序。在此过程中，它将插件的运行时写入 XDocument，以便程序知道自上次运行该插件以来已经过去了多长时间。不过我有问题。大约每天一次（在不可预测的时间）当我加载 XDocument 时，我收到以下错误：

`[04/01/2013 08:17:10.083] Unexpected end of file has occurred. The following elements are not closed: Database, DatabaseList. Line 4043, position 1.`

我运行了一些跟踪语句，发现在此之前的时间，服务失败，大约有 44 个插件要运行，这显然导致 XDocument 在没有写入文件末尾的情况下关闭。它写入和读取硬盘上的 XML 文件，但它对内存中的 XDocument 执行所有操作，因为我使用 Linq 对数据执行复杂的操作。

有谁知道为什么会发生这种情况？如何加载我的 XDocument，以便在运行过程中发生某些事情时它不会破坏实际文件？

编辑：这是使用`XDocument`（命名`XDoc`）的代码示例：

```
 private void RunPlugin(object oQueuedPlugin)
    {
        PluginState oPluginState = (PluginState)oQueuedPlugin;
        PluginResponse oResponse = new PluginResponse();
        XElement xPlugin;

        lock (xDoc)
        {
            xPlugin = GetPluginNode(oPluginState.ClientFusionDatabase.Name, oPluginState.Plugin.Name);
        }

        if (xPlugin == null)
        {
            API.Log.Write("ActivityTrace.ShowXMLLog", "XML for " + oPluginState.ClientFusionDatabase.Name + " was null.");
            XElement NewPlugin = new XElement("Plugin",
                new XAttribute("PluginName", oPluginState.Plugin.Name),
                new XAttribute("Running", "true"),
                new XAttribute("LastStart", DateTime.Now.ToString()),
                new XAttribute("LastSuccess", ""),
                new XAttribute("LastExitStatus",""));

            lock (xDoc)
            {
                var Location = from database in xDoc.Root.Elements("Database")
                               where database.Attribute("DatabaseName").Value == oPluginState.ClientFusionDatabase.Name
                               select database;

                Location.FirstOrDefault().Add(NewPlugin);
                xDoc.Save(XmlLogFilePath);
            }

            oResponse = oPluginState.Plugin.Run(oPluginState.ClientFusionDatabase);
            if (oResponse == null)
            {
                API.Log.Write("ActivityTrace.ShowNullReturnLog", oPluginState.ClientFusionDatabase.Name + "- " + oPluginState.Plugin.Name + " returned null.");
            }

            lock (xDoc)
            {
                NewPlugin.Attribute("Running").Value = "false";
                NewPlugin.Attribute("LastExitStatus").Value = oResponse.ResponseType.ToString();
                if (oResponse.ResponseType == PluginResponseTypes.Success || oResponse.ResponseType == PluginResponseTypes.Warning)
                    NewPlugin.Attribute("LastSuccess").Value = DateTime.Now.ToString();
                xDoc.Save(XmlLogFilePath);
            }

            API.Log.Write("ActivityTrace.ShowXMLLog","Completed " + oPluginState.ClientFusionDatabase.Name + "- " + oPluginState.Plugin.Name + " with XML " + NewPlugin.ToString());
            API.Log.Write(oPluginState.Plugin.Name, "(" + oPluginState.ClientFusionDatabase.Connection.Database + " = " + (oResponse.ResponseType + ") ").PadRight(9) + "EXIT MESSAGE: " + (string.IsNullOrEmpty(oResponse.Message) ? "None" : oResponse.Message));
        }
        else
        {
            DateTime dLastRun = (DateTime)xPlugin.Attribute("LastStart");
            bool bRunning = (bool)xPlugin.Attribute("Running");

            if ((DateTime.Now - dLastRun) > oPluginState.Plugin.Interval && !bRunning)
            {
                lock (xDoc)
                {
                    xPlugin.Attribute("LastStart").Value = DateTime.Now.ToString();
                    xPlugin.Attribute("Running").Value = "true";
                    xDoc.Save(XmlLogFilePath);
                }
                oResponse = oPluginState.Plugin.Run(oPluginState.ClientFusionDatabase);

                lock (xDoc)
                {
                    xPlugin.Attribute("Running").Value = "false";
                    xPlugin.Attribute("LastExitStatus").Value = oResponse.ResponseType.ToString();
                    if (oResponse.ResponseType == PluginResponseTypes.Success || oResponse.ResponseType == PluginResponseTypes.Warning)
                        xPlugin.Attribute("LastSuccess").Value = DateTime.Now.ToString();
                    xDoc.Save(XmlLogFilePath);
                }

                API.Log.Write(oPluginState.Plugin.Name, "(" + oPluginState.ClientFusionDatabase.Connection.Database + " = " + (oResponse.ResponseType + ") ").PadRight(9) + "EXIT MESSAGE: " + (string.IsNullOrEmpty(oResponse.Message) ? "None" : oResponse.Message));
            }
            else if (bRunning)
                API.Log.Write(oPluginState.Plugin.Name, "(" + oPluginState.ClientFusionDatabase.Connection.Database + " = " + ("SKIPPED) ").PadRight(9) + "REASON: Plugin already running");
        }

        oPluginState.Complete = true;
    } 
```

问题是一个或多个插件没有正确处理错误，导致它不返回任何响应并使程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:03:46.723

要在不解析整个内容并将其加载到内存的情况下读取 XML 文件，您可以[`XmlReader`使用](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx). 然后要编写 XML 文件，可以使用[`XmlWriter`类](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx). 相应的 MSDN 页面上有一些示例。

但是，您将失去 LINQ 的所有优点，并且它的工作方式大不相同。真的没有办法将 LINQ 的优点与`XDocument`仅在磁盘上处理 XML 文件相结合。

然后，当您的服务崩溃时，您`XmlWriter`可能仍然没有得到处理，没有将其缓冲区刷新到磁盘并留下一个不完整的 XML 文件。您应该解决导致服务崩溃的错误。

# shell - 在 Windows 中使用管道符号和“打印”

> ID：15767371
> 
> 赞同：1
> 
> 时间：2013-04-02T14:56:16.793
> 
> 标签：shell, dos, pipe

我正在尝试使 shell 脚本在 Windows 中工作。抱歉，我在 Windows 方面不是很有经验（老实说，甚至在 shell 方面也没有那么多经验）。该脚本运行良好，除了这一行：

```
print "9\n0\n1\n5\n0\n0\n\n" | /usr/ts23/mm_util 
```

这`mm_util`是一个将数字作为输入的交互式实用程序。它首先选择选择 9，然后是 0，然后是 1，等等。我已经更改了使用该实用程序的路径，它在 Windows 中具有相同的界面，但输出只是第一个屏幕。未输入“9”输入，因此输出（已解析）不正确。如何更改此设置以便在第一个屏幕上输入“9”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:04:40.377

尝试将那九个换行符零的东西放在一个文本文件中，然后执行`print textfile.txt | /usr/ts23/mm_util`

请记住，Windows 使用换行符的 pre-UNIX 约定`CR LF`，而不仅仅是`LF`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:32:15.780

我得到我想要的输出的方式是使用这个：

> C:\Users\ts23\mm_util < test.txt

然后只需将以下内容放入 test.txt

```
9
0
1
5
0
0 
```

我得到的输出是我需要的，希望这将有助于将来尝试做类似事情的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T17:43:12.877

这是一种不需要文件的方法。它适用于命令行：

```
(for %N in (9 0 1 5 0 0 "") do @echo(%~N)|c:\Users\ts23\mm_util 
```

`""`就像您在原始问题中所做的那样，在输出中获得一个空行。您的答案没有空行。

该`%~N`符号从值中去除了引号。

这`echo(`是一种非直观的语法，可以可靠地打印空行，以防`%~N`扩展为空。

如果将代码放在批处理脚本中，请不要忘记将百分比加倍。

# javascript - Mootools 新元素不起作用

> ID：15767381
> 
> 赞同：0
> 
> 时间：2013-04-02T14:56:36.740
> 
> 标签：javascript, mootools

新元素不起作用。有人知道为什么吗？CSS：

```
#tileNode {
position:absolute;
width:100px;
height:100px;
background-color:red;
} 
```

js：

```
window.addEvent('domready', function() {
var newElement = new Element('div',{id:"tileNode"});
newElement.inject($$('div#tileNode'));
alert($$('#tileNode').get('id'));
}); 
```

警报#root 工作正常，所以它存在......创建该 tileNode 元素不起作用警报它也不起作用：/

亲切的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:04:01.167

采用

```
newElement.inject($('root')); 
```

如果你注入 id 为 'root' 的 div，你也必须注入单个元素，使用 $('id') 因为 $$ 返回一个数组......</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T21:13:14.283

您的代码中有几件事引起了我的注意：拳头是，`new Element('div',{id:"tileNode"})`完全等于`new Element('div[id=tileNode]')`. 由于您选择哪种方式没有区别，我推荐第二种形式，因为它更具可读性。你甚至可以添加更多的属性，比如`Element('div[id=tileNode][class=tile]')`等等，而不是传递一个对象。

如果您尝试通过其 id 获取元素，则另一个优化是使用[美元函数。](http://mootools.net/docs/core/Element/Element#Window%3adollar)因此，如果您想提醒元素的 id，请尝试使用`alert($('tileNode').id)`. 虽然警报可能工作正常，但您可以尝试使用 javascript 控制台。而不是`alert(myVar)`使用`console.log(myVar)`.

希望这会有所帮助，并且编码愉快:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T10:39:11.000

你也可以用它来注入：

```
newElement.inject($$('div#tileNode')[0]); 
```

# php - 在 CakePHP 中设置可以访问哪些页面

> ID：15767382
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:56:48.407
> 
> 标签：php, cakephp, authentication

我已经对此进行了大量研究，但我无法弄清楚最好的方法是什么。

我有一个员工管理系统，其中登录的每个人都是“员工”、“主管”或“经理”。

目前，我会根据它们的排名来显示不同版本的页面。但是，如果他们手动输入 URL，普通的“员工”仍然可以访问他们不应该访问的页面。根据 CakePHP 的文档，它说默认情况下所有页面都受到限制，并且您必须授予对每个页面的访问权限。但我没有授予访问权限，似乎所有页面都可以访问。

页面访问的最佳方法是什么？谢谢！

编辑：这是 AppController 的配置：

```
 public $components = array(
        'DebugKit.Toolbar',
        'Session',
        'Auth' => array(
            'authenticate' => array(
                'Form' => array(
                    'userModel' => 'Employee'
                )
            ),
            'loginAction' => array(
                'controller' => 'employees',
                'action' => 'login',
                //'plugin' => 'users'
            ),
            'loginRedirect' => array('controller' => 'employees', 'action' => 'dashboard'),
            'logoutRedirect' => array('controller' => 'employees', 'action' => 'login'),
            'authError' => 'You must be logged in to see that.'
        )
    ); 
```

然后是始终设置为返回 false 的 isAuthorized() 方法：

```
public function isAuthorized($user = null) {
// Any registered user can access public functions
/*if (empty($this->request->params['admin'])) {
    return true;
}*/

// Only admins can access admin functions
/*if (isset($this->request->params['admin'])) {
    return (bool)($user['role'] === 'admin');
}*/

// Default deny
return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:11:18.507

在数据库中创建两个表

1.  资源（id、控制器、动作）（这将包含控制器名称和动作名称。）
2.  权限（roll_id，resource_id）

在`isAuthorized()`功能

1.  如果 roll 是`admin`，则返回 true。
2.  否则检查以下内容。
3.  使用`$this->request->controller`获取当前控制器名称。
4.  使用`$this->request->action`获取当前操作名称。
5.  `resource_id`从表中获取`resources`当前控制器和操作。
6.  检查`permission`表中的记录`resource_id`和`roll_id`。
7.  如果记录存在则返回true。
8.  否则最后它默认返回false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-30T04:38:33.070

您的代码在 AppController.php 中缺少此内容

```
 class AppController extends Controller {

    public function isAuthorized($user) {
        return true;
    }

    public function initialize() {
        parent::initialize();

        $this->loadComponent('RequestHandler');
        $this->loadComponent('Flash');
        $this->loadComponent('Auth', [
            'authenticate' => [
                'Form' => ['fields' => ['username' => 'email']]
            ],
            'authorize' => ['Controller'],
        ]);

        //some other code here    
    } 
```

# oracle - 连接表返回额外的行

> ID：15767383
> 
> 赞同：0
> 
> 时间：2013-04-02T14:56:52.043
> 
> 标签：oracle, join

我被困在一个 oracle 查询中

我正在做的是我在 cityid 加入两张桌子。

发生的事情是，当我查询第一个表时，它返回 486 行，但是当我加入它们时，无论哪个加入并加入它在 cityid 上，它都会返回 570 行请建议我如何才能只获得 486 条记录

查询如下

```
select c.year,c.amount,c.product,g.state 
from Accounts c 
join Address g 
  on g.cityid=c.cityid
order by c.year,c.product; 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:12:23.927

这是完全可能的。

如果给定帐户有多个地址，或者给定地址有多个帐户，那么您可能会得到比地址或帐户表中更多的行。

考虑：

```
Account
id | ... | cityid
 4 | ... | 12
 5 | ... | 12
 6 | ... | 13
 7 | ... | 14

Address
id | ... | cityid
 2 | ... | 12
 3 | ... | 13
 4 | ... | 14 
```

加入您将获得：

```
Account           Address
id | ... | cityid | id | ... | cityid
 4 | ... | 12     |  2 | ... | 12
 5 | ... | 12     |  2 | ... | 12
 6 | ... | 13     |  3 | ... | 13
 7 | ... | 14     |  4 | ... | 14 
```

因此，您会看到返回了 4 条记录，尽管 Address 中有 3 条记录，其中记录 Address.2 被重复。

如果外键关系被颠倒，这可能会发生相反的情况。

而这其实是关系型数据库的核心特点，输入的数据保持外键关系，不需要重复输入。

您可以通过仅选择要加入的第一个（最低 id）值来限制行。这通常涉及创建一个临时表，这是我将留给 oracle 专家的练习，因为我认为 Sybase 的语法是不同的（并且需要在存储过程中完成，yick）。

我发现自己想知道在您所描述的之外是否可能对架构有稍微不同的解释，这可能更有可能解决您的问题。

# django - 如何更改 Django 超级用户名？

> ID：15767390
> 
> 赞同：6
> 
> 时间：2013-04-02T14:57:06.330
> 
> 标签：django

有没有办法通过 cmd windows 更改 Django 超级用户名？如果不是，其他选项是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T15:15:20.773

当您说“名称”时，它可以是`first_name`，`last_name`或者`username` 您可以这样做：

`manage.py`打开 cmd，然后使用There导航到文件夹

```
$ python manage.py shell
> from django.contrib.auth.models import User
> user = User.objects.get(username=<superuser's username>) #or email=<email>
> user.first_name = 'first_name'
> user.last_name = 'last_name'
> user.username = 'username' #make sure it is unique
> user.save() 
```

另一种选择是转到您的数据库表`auth_user`并在那里进行更改。

# asp.net - 使用 MySqlSessionProvider 时，什么会删除过期会话？

> ID：15767402
> 
> 赞同：4
> 
> 时间：2013-04-02T14:57:44.053
> 
> 标签：asp.net, mysql, session-state

我从[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/aa478952.aspx)了解的有关 Asp.Net 会话提供程序的所有信息。但是，在工作中，我们使用的是 MySql 会话提供程序，我对一个细节感到困惑：会话过期。

在那个 MSDN 页面上，它说：

> ASPState 数据库包含一个 SQL Server 代理作业，该作业定期（默认情况下，每 60 秒）调用存储过程 DeleteExpiredSessions 以删除过期会话。

我对此有一些问题。我们正在使用 MySql，所以没有 SQL Server 代理来执行此操作。此外，我们的数据库实例似乎根本没有任何例程。作为记录，如果它使用例程，我们确实有`autogenerateschema="true"`，我想它会制作它们。

有人可以对 Session State Store 和 Session Expiration 的 MySql 细节有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:20:22.680

从源代码来看，MySqlSessionStateStore 类似乎通过运行一个清除过期会话的计时器来处理它。

# c - 使用 SSE 从 _m128i 寄存器中提取非零值

> ID：15767404
> 
> 赞同：4
> 
> 时间：2013-04-02T14:57:46.817
> 
> 标签：c, performance, sse, simd

我必须提取 __m128i 寄存器的非零值。例如，我有一个带有八条无符号短裤的向量。

```
__m128i vector {40, 0, 22, 0, 0, 0, 0, 8} 
```

我想用最少的 SSE 指令提取 40、22 和 8。然后将非零值存储在非零值数组中。

```
{40, 22, 8, more values from different vectors ... } 
```

是否可以对它们进行洗牌，或者是否有一个很好的内在提取和存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:15:21.177

如果你看[这篇论文](http://adms-conf.org/p1-SCHLEGEL.pdf)，作者描述了如何使用 _mm_cmpestrm 指令来做你想要的。他们算法的核心是这个（我已经稍微修改了它来做你想要的，而不是他们想要的）：

```
__m128i res_v = _mm_cmpestrm(
    vector, 
    8, 
    mm_setzero_si128(),
    8,
    _SIDD_UWORD_OPS|_SIDD_CMP_EQUAL_ANY|_SIDD_BIT_MASK|_SIDD_NEGATIVE_POLARITY);
int r = _mm_extract_epi32(res_v, 0);

__m128i p = _mm_shuffle_epi8(vector, sh_mask[r]); 
```

如果您按照论文中的描述构建查找表 sh_mask，则 p 应该具有非零元素（没有任何重新排序），然后是零元素。r 中设置的位数将告诉您非零元素的数量。

_mm_cmpestrm 不幸的是在 SSE4 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:34:03.087

根据 anjruu 的回答，这是一个未经任何方式测试的 SSSE3 版本：

```
; xmm0 = input
pxor xmm1, xmm1
pcmpeqb xmm1, xmm0
pmovmskb eax, xmm1
shl eax, 4
pshufb xmm0, [table + eax] 
```

当然是不同的`table`，但并不难解决，只要记住索引是“反转的”——例如索引 0 对应于没有零，而 0xFFFF 对应于全零。

# android - GoogleMap 对象无法在新版本的应用程序上获取位置？

> ID：15767408
> 
> 赞同：0
> 
> 时间：2013-04-02T14:57:52.580
> 
> 标签：android, google-maps-android-api-2

我正在构建一个类似于***Google Maps***应用程序的 android 应用程序。它存储位置、路线等。我将我的 eclipse 项目从我的***Linux/Ubuntu***系统移动到***Mac OSX***系统，并为我的项目获得了一个新的 api 密钥。***我正在用我自己的安卓设备三星 Galaxy Note2***测试我的应用程序。它正在工作，***GoogleMap***对象能够获取位置；但现在它无法获取位置。我使用我兄弟的安卓手机***Galaxy Note1***来测试该应用程序，但它在他的设备上运行正常。***GoogleMap***对象无法在我的手机上获取位置，但它通过相同的 apk 包安装在我兄弟的手机上获取位置。

我以为我的手机有一些导致这个问题的旧应用程序数据，我做了恢复出厂设置。还是一样。有什么方法可以清洁我的手机，还是我必须对 eclipse 配置做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:55:19.043

如果您在不同的测试设备上使用使用相同密钥签名的同一个 APK，并且只有一个设备在工作，则可能是设备的 GPS 没有获得 GPS 锁定。

要进行测试，请在未显示应用程序地图的设备上打开 Google 地图或任何其他使用 GPS 功能的应用程序，然后查看该应用程序是否可以获得 GPS 锁定。如果是这样，我建议您在 API 控制台上检查您的应用程序的签名密钥，并确保您已注册所有密钥。

# jira - JIRA 高级查询的 HTTP 链接

> ID：15767412
> 
> 赞同：0
> 
> 时间：2013-04-02T14:58:04.190
> 
> 标签：jira

我在 JIRA 中有一个高级查询，我运行了很多

```
assignee = currentUser() and resolution = 'Unresolved' ORDER BY priority DESC 
```

我想这是不言自明的，我只按优先级顺序得到我必须做的事情。

如何为这个查询添加书签？我想直接链接到运行该查询的页面，而不是每次都键入它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:12:51.447

您还可以在右上角查看有链节等符号的视图旁边。这是一个 URL，您可以为查询添加书签

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:10:15.597

您应该先保存查询，然后如果您将鼠标悬停在已保存查询的链接上，您将获得一个 url。就像是：

```
http://jira.mycompany.org/issues/?filter=11328 
```

# javascript - 从 JavaScript 访问 google 驱动器文件内容

> ID：15767416
> 
> 赞同：3
> 
> 时间：2013-04-02T14:58:11.550
> 
> 标签：javascript, xmlhttprequest, google-drive-api

## 我有

我有一个 web/html5 应用程序，我在其中向用户提供了一个功能来可视化经过身份验证的用户的 Google Drive 内容文件并选择它们。

我成功使用了 google.picker UI 界面，效果很好。例子：

```
 var view = new google.picker.View(google.picker.ViewId.DOCS);

    var picker = new google.picker.PickerBuilder()
      .enableFeature(google.picker.Feature.NAV_HIDDEN)
      .enableFeature(google.picker.Feature.MULTISELECT_ENABLED)
      .setAppId('MY_CLIENT_ID')       
      .addView(view)
      .setCallback(pickerCallback)
      .build();
    picker.setVisible(true); 
```

## 问题

有一次用户从 UI 中选择了文件，`pickerCallback`然后我得到了用户选择的对象属性列表。

![在此处输入图像描述](https://i.stack.imgur.com/ctOPw.png)

1.  我看到`driveError`：“错误”和`driveSuccess`：假
2.  在我无法使用更多下载该文件之后`gapi`

我的尝试是这样的：

```
 gapi.client.setApiKey('MY_API_KEY');
        gapi.client.load('drive', 'v2', function () {

            var scopes = 'https://www.googleapis.com/auth/drive';
            gapi.auth.authorize({ client_id: "MY_CLIENT_ID", scope: scopes, immediate: true },
            function () {

                //TOKEN IS ALWAYS NULL !! 
                var myToken = gapi.auth.getToken();
                gapi.client.request({
                    'path': '/drive/v2/files/' + file.id,
                    'method': 'GET',
                    callback: function (theResponseJS, theResponseTXT) {

                        var myXHR = new XMLHttpRequest();
                        myXHR.open('GET', theResponseJS.downloadUrl, true);   
                        myXHR.onreadystatechange = function (theProgressEvent) {
                            if (myXHR.readyState == 4) {
                                if (myXHR.status == 200) {
                                    //200=OK
                                    console.log(myXHR.response);
                                }
                            }
                        }
                        myXHR.send();
                    }
                });
            }

            );

        }); 
```

这与身份验证有关，imo，但根据 Google 本身的最新帖子，TOKEN 管理已被弃用并实际上被删除。

## 问题

如何从 Google Drive 中读取用户文件选择的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:03:26.880

您是否将上面代码中的`MY_APP_ID`,`MY_API_KEY`和`MY_CLIENT_ID`占位符替换为 API 控制台中的实际值？

# c++ - 按值获取枚举关键字

> ID：15767418
> 
> 赞同：2
> 
> 时间：2013-04-02T14:58:20.250
> 
> 标签：c++, enums

我有一个关于 C++ 枚举的基本问题。

这是一个枚举：

```
enum Names {
    Tim     =       0x1,
    Bob     =       0x2,
    Jim     =       0x4
}; 
```

如果我收到一个值（例如`0x4`），我想打印相关名称：`Jim`。

有没有办法做到这一点？像`Names.key(0x04)`什么？[我知道这存在于 Java 中](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#name%28%29)。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:00:29.810

不，你不能。由于反射，这在 Java 中是可能的，这是 C++ 中不存在的功能。

您可以做的最好的是将名称存储在地图中：

```
std::map<Names, std::string> names_string = {
    { Tim, "Tim"},
    { Bob, "Bob"}
    // .....
};

std::cout << "Tim's enum: " << names_string[Tim] << std::endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:04:43.463

正如许多人所说，这在 vanilla C++ 中是不可能的。但是如果你使用 Qt，你可以定义注册到 Qt 元系统的枚举，这样你就可以在运行时检索枚举信息。

> QMetaEnum 类提供有关枚举器的元数据。
> 
> 使用 name() 作为枚举数的名称。枚举器的键（每个枚举项的名称）由 key() 返回；使用 keyCount() 查找键的数量。isFlag() 返回枚举数是否打算用作标志，这意味着它的值可以使用 OR 运算符组合。
> 
> 转换函数 keyToValue()、valueToKey()、keysToValue() 和 valueToKeys() 允许在枚举或设置值的整数表示形式与其文字表示形式之间进行转换。scope() 函数返回声明此枚举器的类范围。

```
 class MyClass : public QObject
 {
     Q_OBJECT
     Q_ENUMS(Priority)

 public:
     MyClass(QObject *parent = 0);
     ~MyClass();

     enum Priority { High, Low, VeryHigh, VeryLow };
     void setPriority(Priority priority);
     Priority priority() const;
 }; 
```

由于整个机制使用 Qt 元系统，您只能将这种方法用于枚举，QObject 派生类的成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:59:27.243

不，在 C++ 中没有办法做到这一点。首先，编译出枚举的名称。如果你想从整数获取枚举类型，你可以强制转换。

类似地，如果你有

```
Foo foo = new Foo();
String name = "John";
int age = 23; 
```

在 C++ 中无法获取变量名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:00:42.640

不，这是不可能的。与 C++ 中的所有标识符一样，它们在运行时不再可用。也许地图或集合比枚举更适合您的用例？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:08:36.960

编写你自己的函数来处理这个......

```
enum Names {
    Tim     =       0x1,
    Bob     =       0x2,
    Jim     =       0x4
};

std::string GetNameString(int nName)
{
    if( nName == Tim )
        return std::string("Bob");
    else if( nName == Bob )
        return std::string("Tim");
    else if( nName == Jim )
        return std::string("Jim");

    return std::string("");
} 
```

# python - 使用 Tornado 和多个实例进行锁定

> ID：15767419
> 
> 赞同：1
> 
> 时间：2013-04-02T14:58:23.710
> 
> 标签：python, locking, tornado

我对 Python 和 Tornado 还很陌生，所以如果我把一个长期解决的问题复杂化了，请原谅，但我没有找到太多其他东西。

我正在为一个应用程序运行多个 Tornado 实例（每个服务器多个实例，多个服务器），并且有一些只有一个实例应该执行的任务，例如在应用程序中调度某些事件。我不想运行执行此任务的专用实例，而是希望采用一种机会主义方法，让第一个尝试完成这项工作的实例。

我的解决方案的一部分是基于数据库的锁定机制 (MongoDB `findAndUpdate`)。下面的代码似乎工作得很好，但如果这是一个好的解决方案，或者是否有现成的锁定和任务分配解决方案用于 Tornado，我想得到一些建议。

这是在进入函数时获取锁并在之后释放它的装饰器：

```
def locking(fn):
    @tornado.gen.engine
    def wrapped(wself, *args, **kwargs):
        @tornado.gen.engine
        def wrapped_callback(*cargs, **ckwargs):
            logging.info("release lock")
            yield tornado.gen.Task(lock.release_lock)
            logging.info("release lock done")
            original_callback(*cargs, **ckwargs)

        logging.info("acquire lock")
        yield tornado.gen.Task(model.SchedulerLock.initialize_lock, area_id=wself.area_id)
        lock = yield tornado.gen.Task(model.SchedulerLock.acquire_lock, area_id=wself.area_id)
        if lock:
            logging.info("acquire lock done")
            original_callback = kwargs['callback']
            kwargs['callback'] = wrapped_callback
            fn(wself, *args, **kwargs)
        else:
            logging.info("acquire lock not possible, postponed")
            ioloop = tornado.ioloop.IOLoop.instance()
            ioloop.add_timeout(datetime.timedelta(seconds=2), functools.partial(wrapped, wself, *args, **kwargs))

    return wrapped 
```

该`acquire_lock`方法返回锁对象或`False`

对此有什么想法吗？我知道锁只是解决方案的一半，因为我还需要一种机制来确保一次性任务只完成一次。然而，这可以非常相似地实现。有什么可以更优雅地解决问题的吗？

# java - UDP android 应用程序适用于 HTC 但不适用于 Nexus S

> ID：15767430
> 
> 赞同：0
> 
> 时间：2013-04-02T14:58:40.517
> 
> 标签：java, android, sockets, networking, udp

我有一个简单的应用程序，它允许一个 android 设备连接到另一个设备，现在使用我的 Google Nexus 作为主机并使用 HTC Dessire 连接客户端它工作正常，但是如果我将主机作为我的谷歌 Nexus 和我的客户端作为Google Nexus S，出现错误，这是他们尝试连接到服务器时的代码

```
public void connectToServer()
{
    //Send a connect message to the server
    try {
        //Create a socket
        socket = new DatagramSocket( port );
        byte[] bufer = new byte[256];
        //Send a message "connect" to the host
        String msg = "connect";
        int msgLength = msg.length();
        bufer = msg.getBytes();
        InetAddress address;
        //Default ip address of the host
        address = InetAddress.getByName("192.168.1.59");
        DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
        //Send packet
        socket.send( p ); // <-- Error is here

    } catch (UnknownHostException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
    } catch (SocketException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //Receive the message back
    byte[] buf = new byte[256];
    DatagramPacket packet = new DatagramPacket( buf, buf.length );
    //Try to receive a packet from the server
    try 
    {
        socket.receive( packet );
    } 
    //Error
    catch (IOException e) 
    {
        Log.d(TAG, "Error with receiving data");
        e.printStackTrace();
    }

    //Convert the packet to a string
    String data = new String( buf, 0, packet.getLength() );

    //Use the string to find out what ID this client is
    ID = Integer.parseInt( data );
    //Setup the client game
    setUpClient();

    //Debug
    //Log.d(TAG, "Data received was :" + ID);
} 
```

这里也是来自 Eclipse 的日志

```
04-02 15:51:56.875: D/gameState(2719): Start the game loop
04-02 15:51:59.754: D/gameState(2719): Coords: x=216.09375,y=387.8023
04-02 15:51:59.754: D/gameState(2719): Join game
04-02 15:51:59.773: E/InputEventReceiver(2719): Exception dispatching input event.
04-02 15:51:59.777: E/MessageQueue-JNI(2719): Exception in MessageQueue callback: handleReceiveCallback
04-02 15:51:59.793: E/MessageQueue-JNI(2719): android.os.NetworkOnMainThreadException
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:175)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at libcore.io.IoBridge.sendto(IoBridge.java:473)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at java.net.PlainDatagramSocketImpl.send(PlainDatagramSocketImpl.java:182)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at java.net.DatagramSocket.send(DatagramSocket.java:284)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at     com.example.gelorph_v1.gameClient.connectToServer(gameClient.java:89)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.example.gelorph_v1.gameClient.<init>(gameClient.java:67)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.example.gelorph_v1.gamePanel.changeState(gamePanel.java:153)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.example.gelorph_v1.gamePanel.checkCollisions(gamePanel.java:117)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.example.gelorph_v1.gamePanel.onTouchEvent(gamePanel.java:77)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.View.dispatchTouchEvent(View.java:7127)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1877)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.View.dispatchPointerEvent(View.java:7307)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3174)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3119)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4155)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4134)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4226)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.os.MessageQueue.nativePollOnce(Native Method)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.os.MessageQueue.next(MessageQueue.java:125)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.os.Looper.loop(Looper.java:124)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at android.app.ActivityThread.main(ActivityThread.java:4745)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at java.lang.reflect.Method.invokeNative(Native Method)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at java.lang.reflect.Method.invoke(Method.java:511)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-02 15:51:59.793: E/MessageQueue-JNI(2719):   at dalvik.system.NativeStart.main(Native Method) 
```

为什么这不起作用？

帆布

更新

我刚刚将服务器和客户端更改为 AsyncTask 而不是线程，这是我现在的客户端代码

```
@Override
//Keep the game updated
protected String doInBackground(String... params)
{
    //If the client is host, then start the server thread
    if( host == true ) { setUpClient(); server.execute(); }
    //game us now ready to be played
    rdyForPlay = true;
    boolean run = true;
    boolean setupPlayer = false;

    while( run )
    {
        //Tell the server to give position of players
        //if( setupPlayer == true )
        //{
        //  setUpClient();
        //  setupPlayer = false;
        //}

        //If this is a client then do this
        if( host == false )
        {
            try {
                //If the socket is not yet setup, set it up
                if(socket == null)
                {
                    socket = new DatagramSocket( port );
                }
                byte[] bufer = new byte[256];
                //Using the ID given at the start, send X and Y position to the server
                String msg = ID +":"+ assets[ID].returnPosX() +":"+ assets[ID].returnPosY();
                int msgLength = msg.length();
                bufer = msg.getBytes();
                InetAddress address;
                address = InetAddress.getByName("192.168.1.59");
                DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
                //Send the data
                socket.send( p );

            } catch (UnknownHostException e2) {
                // TODO Auto-generated catch block
                Log.d(TAG, "Error with unknown host");
                e2.printStackTrace();
            } catch (SocketException e) {
                // TODO Auto-generated catch block
                Log.d(TAG, "Error with socket");
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Log.d(TAG, "Error with sending/receiving data");
                e.printStackTrace();
            }

            //Receive the data from the serever
            byte[] buf = new byte[256];
            DatagramPacket packet = new DatagramPacket( buf, buf.length );
            //Try and receive data from the server
            try 
            {
                socket.receive( packet );
            } 
            //Error
            catch (IOException e) 
            {
                Log.d(TAG, "Error with receiving data");
                e.printStackTrace();
            }

            String data = new String( buf, 0, packet.getLength() );
            //Split the string up
            String[] dataArray = data.split("#");
            int newTotalPlayers = Integer.parseInt( dataArray[0] );
            //Using the string do this
            if( newTotalPlayers != totalPlayers )
            {
                Log.d(TAG," what is total amount of players:" + newTotalPlayers);
                if( newTotalPlayers == 1 )
                {
                    newPlayer( 0 );
                    totalPlayers = newTotalPlayers;
                }
                else
                {
                    newPlayer( newTotalPlayers );
                    totalPlayers = newTotalPlayers;
                }
            }

            //Do a for loop to go through dataArray
            for( int i = 0; i < totalPlayers; i++)
            {
                //Update each user that is connected
                String[] pos = dataArray[(i + 1)].split(":");
                if( Integer.parseInt( pos[(i*3)] ) == ID )
                {
                    Log.d(TAG, "Do nothing please");
                }
                else
                {
                    assets[i].setPosition( Integer.parseInt( pos[(i*3) + 1] ), Integer.parseInt( pos[(i*3) + 2] ) );
                }
            }

        }

        //Host data will ofcourse be differnet

    }
    Log.d(TAG, "Error with run value");
    return "finished";
} 
```

我仍然得到同样的错误......我是否执行了 AsyncTask 错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:01:42.043

您正在 UI 线程中运行网络操作（因此例外`android.os.NetworkOnMainThreadException`），这在较新版本的 Android 中是不允许的。改用`AsyncTask`这个。

确保你调用你的方法`doBackground`

# rabbitmq - 如何在 RabbitMQ/AMQP 中设置重新投递策略

> ID：15767434
> 
> 赞同：1
> 
> 时间：2013-04-02T14:58:56.257
> 
> 标签：rabbitmq, activemq, amqp

我目前正在为我的排队系统使用 ActiveMQ，并且我想过渡到 RabbitMQ。我一直在使用的属于 ActiveMQ 的一个特性是重新传递策略，因为有时我们的消费者拒绝一条消息，因为它此时无法处理它，但可能想稍后再试一次，所以它重新排队。

现在在 AMQP 中，当我拒绝一条消息时，它会立即再次退出队列并再次尝试。

在 RabbitMQ 中，有没有办法为队列、消费者或消息指定重新传递策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:12:09.983

我也有这种行为的问题。根据文档（据我记得，可能在较新的版本中有所改变），在重新排队后没有说明消息将放置在哪里（它被描述为未确定）。在我的测试用例（版本 2.8.2）中，一些消息被放在队列的末尾，而一条消息（恰好首先来自客户端预取）开始（并立即被消费）。在我们的应用程序中，这会导致活锁。

您可以通过将消息副本发布到队列并确认已经交付的一对一事务来解决此问题（但我建议仔细阅读文档中有关事务的部分）或使用死信处理暂时无法处理的消息。

# python - 统计Sweep算子的Python实现

> ID：15767435
> 
> 赞同：3
> 
> 时间：2013-04-02T14:59:06.517
> 
> 标签：python, numpy, statistics

我正在学习一些对书中缺失数据进行统计的技术（ Little 和 Rubin 的**Statistical Analysis with Missing Data**）。处理单调无响应数据的一项特别有用的功能是*Sweep Operator*（详细信息见第 148-151 页）。我知道 R 模块**gmm**具有执行此操作的*swp*函数，但我想知道是否有人在 Python 中实现了此函数，非常适合 Numpy 矩阵保存输入数据。我搜索了 StackOverflow，也进行了几次网络搜索，但均未成功。谢谢你的帮助。

更新：我在想我只是想念它，而不是有人会为我写它。但这也很棒。这是定义。

如果一个 PxP 对称矩阵 G 被另一个对称 PxP 矩阵 H 替换，其元素定义如下： 那么是这样，但现在遵循一个代码块：

```
 h_kk = -1/g_kk
    h_jk = h_kj = g_jk/g_kk for j != k
    h_jl = g_jl - g_jk g_kl / g_kk j != k, l != k

    G = [g11, g12, g13
         g12, g22, g23
         g13, g23, g33]   
    H = SWP(1,G) = [-1/g11, g12/g11, g13/g11
                   g12/g11, g22-g12^2/g11, g23-g13*g12/g11
                   g13/g11, g23-g13*g12/g11, g33-g13^2/g11]
    kvec = [k1,k2,k3]
    SWP[kvec,G] = SWP(k1,SWP(k2,SWP(k3,G)))

    Inverse function
    H = RSW(k,G)
    h_kk = -1/g_kk
    h_jk = h_kj = -g_jk/g_kk for j != k
    h_jl = g_jk g_kl / g_kk j != k, l != k    

    G == SWP(k,RSW(k,G)) == RSW(k,SWP(k,G)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T17:12:42.930

```
def sweep(g, k):
    g = np.asarray(g)
    n = g.shape[0]
    if g.shape != (n, n):
        raise ValueError('Not a square array')
    if not np.allclose(g - g.T, 0):
        raise ValueError('Not a symmetrical array')
    if k >= n:
        raise ValueError('Not a valid row number')
    #  Fill with the general formula
    h = g - np.outer(g[:, k], g[k, :]) / g[k, k]
    # h = g - g[:, k:k+1] * g[k, :] / g[k, k]
    # Modify the k-th row and column
    h[:, k] = g[:, k] / g[k, k]
    h[k, :] = h[:, k]
    # Modify the pivot
    h[k, k] = -1 / g[k, k]
    return h 
```

我没有办法测试上面的代码，但是我在[这里](http://www-rci.rutgers.edu/~dhjones/APPLIED_LINEAR_STATISTICAL_MODELS%28PHD%29/LECTURES/LECTURE06/3-The%20sweep%20operator.pdf)找到了一个替代描述，它对非对称矩阵有效，可以计算如下：

```
def sweep_non_sym(a, k):
    a = np.asarray(a)
    n = a.shape[0]
    if a.shape != (n, n):
        raise ValueError('Not a square array')
    if k >= n:
        raise ValueError('Not a valid row number')
    #  Fill with the general formula
    b = a - np.outer(a[:, k], a[k, :]) / a[k, k]
    # b = a - a[:, k:k+1] * a[k, :] / a[k, k]
    # Modify the k-th row and column
    b[k, :] = a[k, :] / a[k, k]
    b[:, k] = -a[:, k] / a[k, k]
    # Modify the pivot
    b[k, k] = 1 / a[k, k]
    return b 
```

这确实为该链接中的示例提供了正确的结果：

```
>>> a = [[2,4],[3,1]]
>>> sweep_non_sym(a, 0)
array([[ 0.5,  2\. ],
       [-1.5, -5\. ]])
>>> sweep_non_sym(sweep_non_sym(a, 0), 1)
array([[-0.1,  0.4],
       [ 0.3, -0.2]])
>>> np.dot(a, sweep_non_sym(sweep_non_sym(a, 0), 1))
array([[  1.00000000e+00,   0.00000000e+00],
       [  5.55111512e-17,   1.00000000e+00]]) 
```

# matlab - 在向量中查找向量

> ID：15767436
> 
> 赞同：6
> 
> 时间：2013-04-02T14:59:07.473
> 
> 标签：matlab

我有一个 (7,6) 逻辑数组，如下所示：

有效Y2_A =

```
 0     0     0     0     0     0
 0     0     0     0     0     0
 0     0     0     1     0     0
 1     0     0     1     1     0
 1     1     1     0     0     1
 1     1     1     0     1     1
 0     1     1     1     1     1 
```

我想创建一个 (1,6) 逻辑向量“contig”，以显示上述矩阵在每列中是否有 3 个连续的。例如，这样的结果将是：

重叠群=

```
[1, 1, 1, 0, 0 ,1]; 
```

我试过 strfind 但这有两个问题，第一个是它是一个列数组（转置根本没有帮助。或者需要大量额外的代码来临时使用。第二个问题是因为它是一个逻辑数组，如果我将其更改为字符串，则所有值都会变为真或假，并且试图让它工作也没有结果。有没有一种方法可以搜索列向量以查找另一个特定列向量存在于其中的任何位置？我想在每一列中搜索 [1; 1; 1];

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:02:16.593

怎么样

```
t = imfilter( validY2_A, ones(3,1) );
contig = any( t >= 3, 1 ); 
```

或者（如@Dan 所建议）：

```
t = conv2( validY2_A, ones(3,1), 'same');
contig = any( t >= 3, 1 ); 
```

正如@GeorgeAprilis 所建议的那样，可能需要`validY2_A`先将逻辑矩阵转换为双精度：

```
validY2_A = double( validY2_A ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:26:01.563

这是一种应该很容易理解的方法：

```
idx1=1:end-2
idx2=2:end-1
idx3=3:end 
```

基本上，这些索引将您的矩阵移动了三倍。

现在您只需应用它们：

```
any(validY2_A(idx1,:) & validY2_A(idx2,:) & validY2_A(idx3,:)) 
```

例如，使用循环和移位函数来概括这一点并不难。

# java - 如何更改 Mockito 中字符串的默认返回值？

> ID：15767437
> 
> 赞同：13
> 
> 时间：2013-04-02T14:59:11.047
> 
> 标签：java, unit-testing, mocking, mockito

[2010 年的这个问题暗示了我正在尝试做的事情。](https://code.google.com/p/mockito/issues/detail?id=227)

我正在做一个单元测试，它练习需要许多模拟对象来完成它需要做的事情的代码（测试 HTML + PDF 渲染）。为了使这个测试成功，我需要生成许多模拟对象，并且这些对象中的每一个最终都会将一些字符串数据返回到正在测试的代码中。

我*想*我可以通过实现我自己的`Answer`类或来做到这一点`IMockitoConfiguration`，但我不确定如何实现这些，所以它们只会影响返回字符串的方法。

我觉得下面的代码和我想要的很接近。它抛出一个强制转换异常，`java.lang.ClassCastException: java.lang.String cannot be cast to com.mypackage.ISOCountry`. 我认为这意味着我需要以某种方式默认或限制`Answer`仅影响`String`.

```
private Address createAddress(){
    Address address = mock(Address.class, new StringAnswer() );

    /* I want to replace repetitive calls like this, with a default string. 
    I just need these getters to return a String, not a specific string.

    when(address.getLocality()).thenReturn("Louisville");
    when(address.getStreet1()).thenReturn("1234 Fake Street Ln.");
    when(address.getStreet2()).thenReturn("Suite 1337");
    when(address.getRegion()).thenReturn("AK");
    when(address.getPostal()).thenReturn("45069");   
    */

    ISOCountry isoCountry = mock(ISOCountry.class);
    when(isoCountry.getIsocode()).thenReturn("US");
    when(address.getCountry()).thenReturn(isoCountry);

    return address;
}

//EDIT: This method returns an arbitrary string
private class StringAnswer implements Answer<Object> {
    @Override
    public Object answer(InvocationOnMock invocation) throws Throwable {
        String generatedString = "Generated String!";
           if( invocation.getMethod().getReturnType().isInstance( generatedString )){
               return generatedString;
           }
           else{
               return Mockito.RETURNS_DEFAULTS.answer(invocation);
           }
       }
} 
```

如何设置 Mockito 以默认为返回 String 的模拟类上的方法返回生成的 String？[我在 SO 上找到了这部分问题的解决方案](https://stackoverflow.com/questions/8501920/how-to-mock-a-builder-with-mockito)

对于额外的点，我怎样才能使生成的值成为形式为 String 的字符串`Class.methodName`？例如`"Address.getStreet1()"`，而不仅仅是一个随机字符串？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T15:24:46.150

我能够完全回答我自己的问题。

在此示例中，生成了一个具有路易斯维尔地区的地址，而其他字段看起来像“address.getStreet1();”。

```
private Address createAddress(){
    Address address = mock(Address.class, new StringAnswer() );

    when(address.getLocality()).thenReturn("Louisville");

    ISOCountry isoCountry = mock(ISOCountry.class);
    when(isoCountry.getIsocode()).thenReturn("US");
    when(address.getCountry()).thenReturn(isoCountry);

    return address;
}

private class StringAnswer implements Answer<Object> {
    @Override
    public Object answer(InvocationOnMock invocation) throws Throwable {
           if( invocation.getMethod().getReturnType().equals(String.class)){
               return invocation.toString();
           }
           else{
               return Mockito.RETURNS_DEFAULTS.answer(invocation);
           }
       }
} 
```

# jquery - 使用jquery在div中加载ajax内容后如何执行事件

> ID：15767440
> 
> 赞同：0
> 
> 时间：2013-04-02T14:59:25.493
> 
> 标签：jquery, ajax

我正在开发一个滚动提要内容，我已经成功地将提要内容显示在一个 div 中。现在我希望每个提要项目滚动。所以我使用循环插件，但循环插件没有检测到指定的包含滚动内容的标签。

在这里查看我的完整代码[http://jsfiddle.net/guru01/LxBHX/](http://jsfiddle.net/guru01/LxBHX/)

```
$('#img').load(function() {
            $('.feedEkList').cycle({
                fx:     'scrollUp', 
                timeout: 6000, 
                delay:  -2000
            });
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:17:39.790

**[在这里查看演示](http://jsfiddle.net/LxBHX/3/)**

应该是这样的

```
jQuery(window).load(function () { 
```

而不是下面

```
$('#img').load(function() { 
```

# java - Java解码JSON

> ID：15767442
> 
> 赞同：0
> 
> 时间：2013-04-02T14:59:29.830
> 
> 标签：java, json, map

我试图将 json 字符串解码为 Map。

我知道有很多这样的问题，但我需要非常具体的格式。例如，我有 json 字符串：

```
{
    "map": {
        "a": "b",
        "c": "d",
    },
    "map2": {
        "aa": "bb",
        "cc": "dd",
    },
    "something": "a",
    "something2": "b"
} 
```

我需要有这样的结果：

```
"map.a" => "b"
"map.c" => "d"
"map2.aa" => "bb"
"map2.cc" => "dd"
"something" => "a"
"something2" => "b" 
```

我确定键不会包含任何点。我看了几个JSON库，但我不需要这么多函数，只是为了解码和存储在Java地图中。如果没有简单的方法，我会为此编写自己的算法，我希望它不会那么难......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:04:50.560

要准确解析 JSON，您需要为它定义一个适当的解析器，编写它们并不难，只是耗时。我的建议是找到一个相当轻量级的 JSON 解析器，然后为它编写一个装饰器以获取您正在寻找的地图格式。虽然，如果您正在处理大量 JSON，不幸的是，您会增加开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:04:58.980

我不认为你会找到一个开箱即用的解决方案，因为这是一个非标准的表示。我的建议是使用 JSON 库将 JSON 字符串转换为 Java Map，然后对该 Map 进行深度优先遍历以将其转换为所需的表示形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:36:43.243

我用过`org.codehaus.jackson`。请执行下列操作：

```
 HashMap<String, Object> content = null;
    HashMap<String, String> result = new HashMap<String, String>();

    try {
        JsonFactory factory = new JsonFactory();
        ObjectMapper mapper = new ObjectMapper(factory);
        TypeReference<HashMap<String, Object>> typeRef = new TypeReference<HashMap<String, Object>>() {
        };
        content = mapper.readValue(jsonString, typeRef);

    } catch (Exception ex) {
        System.out.println("Exception : " + ex);
    } 
    // now content has everything inside
    for(String s : content.keySet()){
        Object obj = content.get(s);
        if(obj instanceof String){
            result.put(s, (String)obj);
        } else {
            HashMap<String,String> hm = (HashMap<String,String>)obj;
            for(String s2: hm.keySet()){
                result.put(s+"."+s2, hm.get(s2));
            }

        }
    } 
```

编辑：经过测试和工作

# sas - 我有一个数据集，我需要按照以下格式创建一个 Excel 表...有什么办法吗？

> ID：15767443
> 
> 赞同：0
> 
> 时间：2013-04-02T14:59:33.027
> 
> 标签：sas

假设这里是数据集......

```
Aspect                                Evaluation      Quarter     Percentage
HOST/HOSTESS DIVERSIONS /687          Excellent       Q1          40%
ROCKIN' BAR D / WAVEBANDS/ EVOLUTION  Excellent       Q1          50%
KNOWLEDGE OF SERVER TEAM – ROTATION   Excellent       Q1          60% 
```

尝试在下面生成具有相同颜色和结构的 Excel 工作表，假设上述百分比将填充在“% Within”列中......

![在此处输入图像描述](https://i.stack.imgur.com/W0U17.jpg)

以这种所需格式获得 excel 的任何方法....？感谢您的帮助...谢谢，Sam

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:04:28.067

如果你要做颜色等，你有几个选择。当然，PROC EXPORT 不会这样做。因此，您需要执行 Excel 标记集、DDE 或创建未格式化的工作表并使用模板中的宏来复制颜色。

优点/缺点：

*   Excel 标签集：

    *   好处：完全用 SAS 代码制作准确的格式。通过相当简单的界面进行大量控制。使用强大的 PROC TEMPLATE 定义样式，允许高度可移植和可重用的代码。
    *   缺点：制作一个 .xml 文件可以被 excel 读取，而不是真正的 .xls/.xlsx 文件。它的功能确实有一些限制。可能是越野车。可能是这三个选项中最慢的编码，除非您非常熟悉它。
*   DDE:

    *   好处：一旦您在 Excel 中制作模板（一次），就可以在 SAS 中完全制作您想要的。可以 100% 完成 Excel 的工作。
    *   缺点：使用有些过时的方法，因此熟悉它的 SAS 程序员较少。需要在机器上安装 Excel 并打开（您可以将其作为 DDE 程序的一部分打开）。复制数据的速度有点慢，并且需要更仔细地检查以验证数据到达了它应该去的地方。需要了解 DDE 命令。
*   模板/副本：

    *   优点：在设置时间方面可能是最快的方法。可以像excel一样做所有事情。其他程序员只要懂 Excel/VBA 和 SAS 就容易理解。
    *   缺点：需要在 SAS 之外的步骤来运行复制宏（可以通过 DDE 或批处理文件从 SAS 调用，但更常见的是手动完成）。确实需要一些 VBA 和 SAS 知识。

一般来说，我建议先尝试 Excel 标记集；如果它们不能满足您的需求，请尝试其他两个选项中的任何一个。一些适合初学者的关于 Excel 标记集的好论文：http: [//support.sas.com/resources/papers/proceedings11/170-2011.pdf](http://support.sas.com/resources/papers/proceedings11/170-2011.pdf) [http://support.sas.com/resources/papers/proceedings12/207-2012 .pdf](http://support.sas.com/resources/papers/proceedings12/207-2012.pdf) [http://www2.sas.com/proceedings/forum2008/036-2008.pdf](http://www2.sas.com/proceedings/forum2008/036-2008.pdf)

我认为您可以使用 excel 标记集和 proc 报告轻松创建上述内容；特别关注第一篇论文，因为它似乎与您正在做的最相似。如果您遇到任何问题，请将它们作为单独的问题发布，我们应该能够为您提供帮助。

# sql - 如何在同一张表上内连接两个选择查询

> ID：15767448
> 
> 赞同：4
> 
> 时间：2013-04-02T14:59:44.650
> 
> 标签：sql

我被卡住了...一个带有“值”和“数据类型”列的“数据”表填充了发动机负载和车速，每条记录都标有日期、时间、纬度、经度。我想在车辆行驶时查询发动机负载超过 10%（例如速度 > 0）。我可以创建一个查询来选择发动机负载，我可以创建一个查询来选择车速，但是当 > 10% 并且车辆在其日期、时间纬度和经度的位置移动时，我如何创建一个查询来选择发动机负载是平等的吗？

此查询不起作用，但它提供了我正在尝试做的事情的概要。谁能帮我创建一个查询？

```
表
T名称：数据
PK数据密钥
    价值
fk1 数据事件键
fk2 数据类型名称键

TName：数据类型名称
PK 数据类型名称键
   数据类型名称

TName：数据事件
PK数据eventkey
   约会时间
   纬度
   长

```

```
SELECT 
   d1.datetime 
FROM 
    (data INNER JOIN datatypename ON data.datatypenamekey = datatypename.datatypenamekey    
    INNER JOIN dataevent ON dataevent.dataeventkey = data.dataeventkey) d1  
WHERE 
    ( d1.datatypename = "Engine Load [%]" AND d1.value > 10 )

 INNER JOIN

SELECT 
    d2.datetime  
FROM 
    (data INNER JOIN datatypename ON data.datatypenamekey = datatypename.datatypenamekey  
    INNER JOIN dataevent ON dataevent.dataeventkey = data.dataeventkey) d2  
WHERE 
    ( d2.datatypename = "Vehicle Speed [mph]" AND d2.value > 0 ) 

    ON d1.datetime = d2.datetime 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T15:14:02.133

我不是 100% 确定我理解，但我认为您只需要引用同一张表的两个实例。根据您的 SQL 做出一些假设，但在这里试一试：

```
SELECT 
    engineLoad.dateTime
FROM
    (
    SELECT 
       d.datakey,
       de.datetime        
    FROM 
        data d
        INNER JOIN datatypename dt ON data.datatypenamekey = dt.datatypenamekey    
        INNER JOIN dataevent de ON de.dataeventkey = d.dataeventkey  
    WHERE 
        d.value > 10 AND
        dt.datatypename = "Engine Load [%]"
    ) engineLoad
    INNER JOIN
    (
    SELECT 
       d.datakey,
       de.datetime        
    FROM 
        data d
        INNER JOIN datatypename dt ON data.datatypenamekey = dt.datatypenamekey    
        INNER JOIN dataevent de ON de.dataeventkey = d.dataeventkey  
    WHERE 
        d.value > 0  AND
        dt.datatypename = "Vehicle Speed [mph]" 
    ) vehicleSpeed 
        ON engineLoad.dataKey = vehicleSpeed.dataKey <==might need to remove this line
           AND engineLoad.datetime = vehicleSpeed.datetime 
```

**编辑** 看起来您还需要引用 datatypename 两次？编辑了上面，所以再试一次。

# java - 当你初始化一个没有构造函数的类时会调用什么？

> ID：15767449
> 
> 赞同：5
> 
> 时间：2013-04-02T14:59:49.443
> 
> 标签：java, class, constructor, initializing

所以当一个类有一个私有构造函数时你不能初始化它，但是当它没有构造函数时你可以。那么当你在没有构造函数的情况下初始化一个类时会调用什么？

例如，这里叫什么 (new b())??

```
public class a {
    public static void main(String args[]) {
        b classB = new b();
    }
}

public class b {
    public void aMethod() {
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T15:01:02.387

Java 中没有“没有构造函数的类”之类的东西——如果源代码中没有*显式*构造函数，编译器会自动将默认构造函数添加到类文件中：

```
public ClassName() {
  super();
} 
```

如果超类本身没有公共或受保护的无参数构造函数，则这反过来可能无法编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:00:58.773

它被称为默认构造函数。当一个类没有*明确*定义任何构造函数时，它会自动添加。

[正式规格](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.8.9)：

> 如果类不包含构造函数声明，则自动提供不带参数的默认构造函数：
> 如果被声明的类是原始类 Object，则默认构造函数具有空主体。
> 否则，默认构造函数不带参数，只是简单地调用不带参数的超类构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T15:01:12.997

调用默认的无参数构造函数 -有关更多信息，请参见[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-06T10:33:29.500

如有疑问，请使用`javap`.

`Empty.java`：

```
public class Empty {
    public static void main(String[] args) {}
} 
```

然后：

```
javac Empty.java
javap -v Empty.class 
```

输出摘录：

```
public Empty();
  descriptor: ()V
  flags: ACC_PUBLIC
  Code:
    stack=1, locals=1, args_size=1
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return 
```

哈！生成了一个构造函数。如果我们尝试相同的：

```
public class Empty {
    public Empty() {}
    public static void main(String[] args) {}
} 
```

我们看到完全相同的字节码。

我问过这是否是仅限 Java 的限制，或者它是否也存在于字节码级别：[是否有一个没有任何构造函数的 JVM 字节码类有效？](https://stackoverflow.com/questions/29478139/is-it-valid-to-have-a-jvm-bytecode-class-without-any-constructor)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:01:59.537

有一个不可见的默认构造函数，看起来像这样：

```
public B() {
   super();
} 
```

当您调用 时`new B()`，会调用此隐式构造函数。

请注意，在 Java 中，我们使用类名以大写字母字符开头的约定。所以我已经为你改变了。

# objective-c - 如何从应用程序委托访问 uitabbarcontroller 内的 uinavigationcontroller 内的 uitableview？

> ID：15767450
> 
> 赞同：0
> 
> 时间：2013-04-02T14:59:55.307
> 
> 标签：objective-c, uinavigationcontroller, uitabbarcontroller, uitableview, appdelegate

我试图从我的根标签栏控制器访问位于导航控制器内部的 uitableview 中的刷新控制方法，但我无法获得准确的句柄。

到目前为止，这是我在 AppDelegate 中的代码，但它不起作用......

```
UITableViewController *tableView = (UITableViewController *)[[self.tabbarController viewControllers][0] tableView];
    [tableView.refreshControl beginRefreshing]; 
```

我有 5 个标签栏项目，我相信我可以通过 [0]、[1]、[2]、[3] 和我在 UITableView 中的代码访问它们（尽管可能无关紧要）...

```
// Add Refresh Control
    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:appDelegate action:@selector(forceDownload) forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refreshControl;
    [refreshControl release]; 
```

任何帮助将不胜感激，因为我找不到任何可以访问如此深入的在线。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:09:00.913

如果您需要在不相关的对象之间进行通信，我认为最好的选择是使用 NSNotifications。这允许您使用单例对象`[NSNotificationCenter defaultCenter]`，将通知从一个对象传递到另一个对象（或许多其他对象）。

所以你可以把 AppDelegate 对象（或其他对象）放在观察一个特定的通知，然后在需要刷新控件时用 tableviewController 发布通知。

在应用程序委托类中，您可以添加观察者，例如：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(forceDownload)
                                             name:@"ForceDownloadNotification"
                                           object:nil]; 
```

而且，在 tableviewController 中，您可以发布通知，例如：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ForceDownloadNotification" 
                                                    object:self]; 
```

在这里，我使用名称“ForceDownloadNotification”作为通知的名称。您可以使用所需的名称，但为了使此解决方案正常工作，您必须在开始观察和发布通知时使用相同的名称。

[在这里](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter/)你有一个关于这个主题的教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T20:49:01.813

*我喜欢 Luis Espinoza 的方法，但这本身*并不能回答问题。

如果您想调用嵌套在 UINavigationController 中的 UITableViewController 中的方法，该 UINavigationController 是您的 App Delegate 的 rootViewController。首先，我们使用 UITableViewController（或子类）创建一个 navigationController：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// Override point for customization after application launch.
CustomTableViewController *nuTableVC = [[CustomTableViewController alloc] initWithStyle:UITableViewStylePlain];
UINavigationController *nuNavController = [[UINavigationController alloc] initWithRootViewController:nuTableVC];
self.window.rootViewController = nuNavController;

[self.window makeKeyAndVisible];
return YES;
} 
```

然后在你的 UITableViewController （或子类）中你设置刷新控件就像你问的那样：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Add Refresh Control
    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:[[UIApplication sharedApplication] delegate]
                       action:@selector(forceDownload) 
             forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refreshControl;
} 
```

最后要访问 UItableViewController 您必须检查实例是否真的是您想要的类，这是我在您的**App Delegate中创建的方法（** **forceDownload**）的实现：

 **```
- (void)forceDownload {
NSLog(@"force download method in App Delegate");
UINavigationController *someNavController = (UINavigationController*)[_window rootViewController];

UIViewController *vcInNavController = [[someNavController viewControllers] objectAtIndex:0];

if ([vcInNavController isKindOfClass:[CustomTableViewController class]]) {
    NSLog(@"it is my custom Table VC");
    NSLog(@"here we can stop the refresh control, or whatever we want");
    CustomTableViewController *customTableVC = (CustomTableViewController *)vcInNavController;
    [customTableVC.refreshControl performSelector:@selector(endRefreshing)
                                       withObject:nil
                                       afterDelay:1.0f];
    }
} 
```

我个人更喜欢使用 NSNotificationCenter 因为它更简单，但这并不意味着我们不能按照您最初计划的方式访问对象。

（如果您想要示例代码，请索取）。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:36:37.807

如果您的目标确实是让您的刷新控制与 networkActivityIndi​​cator 同步，那么一个选项是 KVO。

在 viewController 中`viewDidAppear:`添加类似这样的内容

```
- (void)viewDidAppear:(BOOL)animated
{
  [super viewDidAppear:animated];

  UIApplication *application = [UIApplication sharedApplication];
  [application addObserver:self
                forKeyPath:@"networkActivityIndicatorVisible"
                   options:NSKeyValueObservingOptionNew
                   context:myContext];

  self.refreshControl.refreshing = [application isNetworkActivityIndicatorVisible];
} 
```

然后确保在 viewController 不需要它时删除这个观察者 - 也许在`viewDidDisappear:`

```
- (void)viewWillDisappear:(BOOL)animated
{
  [super viewDidDisappear:animated];
  [[UIApplication sharedApplication] removeObserver:self
                                         forKeyPath:@"networkActivityIndicatorVisible"
                                            context:myContext];
} 
```

现在开始实际工作

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context;
{
  if (myContext == context) {
    self.refreshControl.refreshing = [change[NSKeyValueChangeNewKey] boolValue];
  } else {
    [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
  }
} 
```**

# php - .htaccess 空变量给出 403 禁止错误

> ID：15767452
> 
> 赞同：0
> 
> 时间：2013-04-02T14:59:57.713
> 
> 标签：php, regex, .htaccess, mod-rewrite

我正在使用这样的 .htacces 文件：

```
RewriteRule ^folder/(.*).html$ file.php?mode=$1 [L,NC] 
```

这个网址没有问题：

```
http://www.example.com/folder/qwerty.html 
```

但它给出了 403 禁止错误，例如这个 URL：

```
http://www.example.com/folder/.html 
```

（ps：这个问题不是什么大问题。只是我想学习如何解决这个问题，出于安全原因我需要修复它。）

（P.s2：我尝试将 file.php 更改为“if mode == null”，但仍然出现 403 错误。）

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:01:13.290

Apache 的默认配置包含一个部分：

```
#
# The following lines prevent .htaccess and .htpasswd files from being
# viewed by Web clients.
#
<Files ~ "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy all
</Files> 
```

您的包含“/.html”的 URL 与此匹配，作为带有“.ht”的路径的文件部分，因此它在达到您的重写规则之前拒绝访问。

您将不得不覆盖它；通过使上面的部分更具体并且仅匹配 .htaccess 和 .htpasswd 来拒绝它们，或者通过覆盖匹配以重新允许 .html，例如：

```
<Files ~ "^\.html">
    Order allow,deny
    Allow from all
</Files> 
```

...在您的 .htaccess 文件中。

# python - 在python中确定哪个字典与我的字典类匹配

> ID：15767455
> 
> 赞同：0
> 
> 时间：2013-04-02T15:00:01.230
> 
> 标签：python, python-2.7

参考文件：file.py

```
class requestDicts():
    dictrefA={
    "operation_module":"cbs",
    "operation_group":"xxx",
    "operation_type":"yyy"}

    dictrefB={
    "operation_module":"cbs",
    "operation_group":"xxx",
    "operation_type":"yyy1"}

    dictrefC={
    "operation_module":"cbs",
    "operation_group":"xxx1",
    "operation_type":"yyy1"} 
```

比较文件头.py

```
recievedDict={
    "msg_id":100,
    "operation_module":"cbs",
    "operation_group":"xxx",
    "operation_type":"yyy1",
    "user_name":"venkat",
    "msg_length":50} 
```

如何执行部分比较字典并返回匹配的字典名称

上面的预期答案是：`dictrefB`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:19:51.787

假设您的原始数据，我将创建一个中间查找和一个辅助函数，然后执行以下操作：

```
from operator import itemgetter

key = itemgetter('operation_module', 'operation_group', 'operation_type')
lookup = {key(v): k for k,v in requestDicts.__dict__.iteritems() if isinstance(v, dict)}
print lookup[key(recievedDict)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:05:26.877

**更新**

在 python2.7 和 python3.x 上，有一个更好的方法：

```
items = ((k,v) for (k,v) in requestDicts.__dict__.items() if k.startswith('dictref'))
r_items = recievedDict.viewitems()
print next(k for k,sub in items if len(sub.viewitems() & r_items) == len(sub)) 
```

第一行只是尝试将您的类保存字典放入稍微有用的数据结构中。第二行只是为了缩短第三行并避免在生成器中进行额外的属性查找/方法调用。

在 python3.x 上，`dict.items`返回与`dict.viewitems`在 python2.x 中相同的内容。我想那`2to3`会明白的。基本上，`view`将项目作为类似集合的对象返回。我得到了两组的交集并检查以确保它是一个完整的交集。换句话说，我检查以确保一个字典是另一个字典的子集。我不保证这比我的其他答案更*有效*，但它更简洁一些（如果它更快，我不会感到惊讶）。我想我们需要`timeit`知道。

* * *

我没有看到比循环比较它们更好的方法：

```
def compare(sub,full):
    try:
        return all(sub[k] == full[k] for k in sub)
    except KeyError:
        return False  #sub's keys aren't a subset of full's keys. 
```

现在要弄清楚哪个是第一场比赛：

```
next(sub for sub in (dictrefA,dictrefB,dictrefC) if compare(sub,recievedDict)) 
```

这是一个完整的、具体的工作示例：

```
class requestDicts():
    dictrefA={
    "operation_module":"cbs",
    "operation_group":"xxx",
    "operation_type":"yyy"}

    dictrefB={
    "operation_module":"cbs",
    "operation_group":"xxx",
    "operation_type":"yyy1"}

    dictrefC={
    "operation_module":"cbs",
    "operation_group":"xxx1",
    "operation_type":"yyy1"}

recievedDict={
    "msg_id":100,
    "operation_module":"cbs",
    "operation_group":"xxx",
    "operation_type":"yyy1",
    "user_name":"venkat",
    "msg_length":50}

def compare(sub,full):
    try:
        return all(sub[k] == full[k] for k in sub)
    except KeyError:
        return False  #sub's keys aren't a subset of full's keys.

items = ((k,v) for (k,v) in requestDicts.__dict__.items() if k.startswith('dictref'))
print next(k for k,sub in items if compare(sub,recievedDict)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:09:04.013

像这样的东西在这里看起来更合适，使用一个`dict`dicts：

```
main_dict={
    'dictrefA':{
      "operation_module":"cbs",
      "operation_group":"xxx",
      "operation_type":"yyy"},
    'dictrefB':{
      "operation_module":"cbs",
      "operation_group":"xxx",
      "operation_type":"yyy1"},
    'dictrefC':{
      "operation_module":"cbs",
      "operation_group":"xxx1",
      "operation_type":"yyy1"}
      }

recievedDict={
    "msg_id":100,
    "operation_module":"cbs",
    "operation_group":"xxx",
    "operation_type":"yyy1",
    "user_name":"venkat",
    "msg_length":50}

for x,y in main_dict.items():
    if all(v in recievedDict.items() for v in y.items()):
        print x
        break 
```

**输出**：

```
dictrefB 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:13:27.330

```
main_dict={
    'dictrefA':{
      "operation_module":"cbs",
      "operation_group":"xxx",
      "operation_type":"yyy"},
    'dictrefB':{
      "operation_module":"cbs",
      "operation_group":"xxx",
      "operation_type":"yyy1"},
    'dictrefC':{
      "operation_module":"cbs",
      "operation_group":"xxx1",
      "operation_type":"yyy1"}
      }
recieved_dict={
    "msg_id":100,
    "operation_module":"cbs",
    "operation_group":"xxx",
    "operation_type":"yyy1",
    "user_name":"venkat",
    "msg_length":50}

compare_dict = {
    "operation_module": recieved_dict["operation_module"],
    "operation_group": recieved_dict["operation_group"],
    "operation_type": recieved_dict["operation_type"],
}

matching_dict_key = [key for key, value in main_dict.items() if value == compare_dict]

print matching_dict_key[0] 
```

结果：

```
$ python so.py
dictrefB 
```

如果它需要更快，你可以制作一个哈希字典。

# javascript - 使用 RegEx 构造函数属性的短名称代替冗长名称的充分理由是什么？

> ID：15767457
> 
> 赞同：3
> 
> 时间：2013-04-02T15:00:12.327
> 
> 标签：javascript, regex

我正在研究 JavaScript（使用*专业 Javascript for Web Developers* [1]），我想知道为什么开发人员可能会使用 RegExp 中的短名称而不是语义上更有意义的详细名称（即“$_”而不是 input 或“$ `" 而不是 leftContext)？

在我需要查找短名称（或者甚至，我假设，通过代码完成）的时间里，我可以轻松地输入详细名称。但是，如果它们很重要，我不想吹掉它们，那么为什么程序员更喜欢短名称呢？

谢谢你。

编辑：

一些上下文。书中给出了以下示例：

```
var text = "this has been a short summer"; 
var pattern = /(.)hort/g; 

 if (pattern.test( text)){ 

   alert( RegExp.input);                     // this has been a short summer 
   alert( RegExp.$_);                        // this has been a short summer 

   alert( RegExp.leftContext);               // this has been a 
   alert( RegExp.["$`"]);                    // this has been a 

   alert( RegExp.rightContext);              // summer 
   alert( RegExp.["$'"]);                    // summer 

   alert( RegExp.lastMatch);                 // short 
   alert( RegExp.["$&"]);                    // short 

   alert( RegExp.lastParen);                 // s 
   alert( RegExp.["$+"]);                    // s 

  } 
```

如果甚至不推荐使用这些冗长的形式，那么我想我的问题会略有不同（“没有它们，您将如何完成这些任务？”）。

1：扎卡斯，尼古拉斯 C. (2011-12-20)。面向 Web 开发人员的专业 JavaScript。约翰威利父子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:12:44.097

它们具有以前的模式，因为我相信这就是它们在其他语言（例如 Perl）中的模式，因此如果您的背景使用不同的语言，就会有那种熟悉感。

它们只能用于替换字符串，例如`"ABC".replace(/[ABC]/g, "$&")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:19:02.463

套用 Perl [Camel 的书](http://en.wikipedia.org/wiki/Programming_Perl)，有些情况您要强调“快速而肮脏”并节省开发时间，有些情况您要强调可维护性。如果您只需要快速破解来完成工作，那么您无需查找即可记住的任何内容都比您通常想要编写的漂亮的、人类可读的、自记录的代码要快。套用[一句不同的格言](http://c2.com/cgi/wiki?MakeItWorkMakeItRightMakeItFast)，对于第一个原型，一旦你可以让基本流程正常工作，你就打算回来进行润色，在你投入任何努力“让它正确”之前，你想“让它工作”。

（当然，这种推理很容易回头咬你，但这就是推理。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T13:58:06.383

看起来`RegExp.["$`"]`和`RegExp.["$'"]`已经“死”了，`RegExp.$+`而且`RegExp.$&`行为出人意料。

当前（2015 年 4 月 30 日）输出：

**RegExp.input** : 这是一个短暂的夏天
**RegExp.$_** : 这是一个短暂的夏天
**RegExp.leftContext** : 这是一个
**RegExp.rightContext** : 夏天
**RegExp.lastMatch** : short
0
**RegExp.lastParen** : s
**RegExp.$+** :未定义的NaN

这是一个现场测试：

```
var text = "this has been a short summer"; 
var pattern = /(.)hort/g; 

 if (pattern.exec(text) != null) {

   document.getElementById("res").innerHTML += "<b>RegExp.input</b>: " + RegExp.input + "<br />";               // this has been a short summer 
   document.getElementById("res").innerHTML += "<b>RegExp.$_</b>: " + RegExp.$_ + "<br />";                  // this has been a short summer 

   document.getElementById("res").innerHTML += "<b>RegExp.leftContext</b>: " + RegExp.leftContext + "<br />";       // this has been a 
   //document.getElementById("res").innerHTML += RegExp.["$`"] + "<br />";            // this has been a, now, does not let compile

   document.getElementById("res").innerHTML += "<b>RegExp.rightContext</b>: " + RegExp.rightContext + "<br />";    // summer 
   //document.getElementById("res").innerHTML += RegExp.["$'"] + "<br />";           // summer, now, does not let compile

   document.getElementById("res").innerHTML += "<b>RegExp.lastMatch</b>: " + RegExp.lastMatch + "<br />";           // short 
   document.getElementById("res").innerHTML += "<b>RegExp.$&</b>: " + RegExp.$& + "<br />";                  // was "short", now, evaluates the expression on the right to 0

   document.getElementById("res").innerHTML += "<br /><b>RegExp.lastParen</b>: " + RegExp.lastParen + "<br />";          // s 
   document.getElementById("res").innerHTML += "<b>RegExp.$+</b>: " + RegExp.$+ + "<br />";                 // was "s", now, outputs "NaN"

  }
```

```
<div id="res" />
```

# linux - 如何获取一个Linux线程的详细信息

> ID：15767458
> 
> 赞同：2
> 
> 时间：2013-04-02T15:00:18.113
> 
> 标签：linux, shell

我已经知道了`ps -ef`，`top`并将列出线程信息。事实上，我通过 top 得到了一个 pid。我想查看有关此线程的更多详细信息，我记得应该有一个 Linux 命令来执行此操作。

谢谢@Shahbaz 这就是回答我的问题。

不过，我还是想澄清一下。

我想要的是：

我有一个 pid，我想了解有关此线程的更多信息，例如线程在哪里开始，例如哪个文件夹？也许与记忆有关。

我实际上在等待的答案

```
pmap pid

$pmap 498
498:   ./bin/redis-server redis.conf
0000000000400000    224K r-x--  /var/www/bin/redis-2.2.11/bin/redis-server
0000000000637000     12K rwx--  /var/www/bin/redis-2.2.11/bin/redis-server
000000000063a000     80K rwx--    [ anon ]
0000000011204000  57756K rwx--    [ anon ]
0000003dd7a00000    112K r-x--  /lib64/ld-2.5.so
0000003dd7c1b000      4K r-x--  /lib64/ld-2.5.so
0000003dd7c1c000      4K rwx--  /lib64/ld-2.5.so
0000003dd7e00000   1332K r-x--  /lib64/libc-2.5.so
0000003dd7f4d000   2048K -----  /lib64/libc-2.5.so
0000003dd814d000     16K r-x--  /lib64/libc-2.5.so
0000003dd8151000      4K rwx--  /lib64/libc-2.5.so
0000003dd8152000     20K rwx--    [ anon ]
0000003dd8200000    520K r-x--  /lib64/libm-2.5.so
0000003dd8282000   2044K -----  /lib64/libm-2.5.so
0000003dd8481000      4K r-x--  /lib64/libm-2.5.so
0000003dd8482000      4K rwx--  /lib64/libm-2.5.so
0000003dd8a00000     88K r-x--  /lib64/libpthread-2.5.so
0000003dd8a16000   2044K -----  /lib64/libpthread-2.5.so
0000003dd8c15000      4K r-x--  /lib64/libpthread-2.5.so
0000003dd8c16000      4K rwx--  /lib64/libpthread-2.5.so
0000003dd8c17000     16K rwx--    [ anon ]
00002b000ff11000      4K rwx--    [ anon ]
00002b000ff28000    416K rwx--    [ anon ]
00002b000ff91000    480K rwx--    [ anon ]
00002b0010fba000   1536K rwx--    [ anon ]
00007fff90700000     84K rw---    [ stack ]
ffffffffff600000   8192K -----    [ anon ]
 total            77052k 
```

我希望清楚。至少，下一次我会觉得很容易。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:13:06.067

目前尚不清楚您正在寻找什么样的信息，所以我将向您指出最终位置。看

```
/proc/<pid> 
```

那里有*许多*文件，它们要么是程序感兴趣的位置的链接，要么一旦`cat`编辑就会为您提供您能想到的任何信息。

* * *

`/proc`是一个目录。在它里面还有其他目录（看看它）。对于每个进程，都有一个以其 pid 命名的目录。在该目录中，有链接和*特殊*文件，称为 /proc 条目。

每个特殊文件都可能具有读或写访问权限。如果它具有读取权限，您可以简单地读取它（`cat`例如使用），它会为您提供有用的信息。如果它具有写访问权限，则可能意味着它可以接受某种数据来修改进程的某些参数。

* * *

> 我想知道这个 ruby​​ 命令从哪个文件夹开始？

如果您知道`grep`命令的 pid，`readlink /proc/<pid>/cwd`请查看进程的“当前工作目录”在哪里。

* * *

在您的编辑中：`pmap`您可以在 中找到相同的信息`/proc/<pid>/maps`。

# javascript - js获取具有相同tagName的标签

> ID：15767460
> 
> 赞同：1
> 
> 时间：2013-04-02T15:00:26.087
> 
> 标签：javascript, tags

有没有办法获取具有相同名称的标签集合？

像这样的东西：

```
var buttons = document.getElementsByTagName('button');
for (var a = 0; a < buttons['item-menu-edit-button'].length; a++) {
  sys.addEventHandler(buttons['item-menu-edit-button'][a], 'click', callback);
} 
```

我需要为每个编辑按钮分配一个事件处理程序......

[编辑] html 标记是：

```
<span>
<button name="item-menu-edit-button" id="generiID">Edit</button>
<!-- content -->
</span>
<span>
<button name="item-menu-edit-button" id="generiID">Edit</button>
<!-- other content -->
</span> 
```

我需要为每个名为“item-menu-edit-button”的按钮上的“click”事件分配一个事件处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:16:22.443

您似乎使用了不同语言的函数/关键字，`addEventHandler`javascript 中没有函数。您想要做的内置功能是`addEventListener`. 我也不确定是什么`sys`，但是他们编写代码的方式是您尝试将事件处理程序添加到调用的对象`sys`而不是按钮。

```
var buttons = document.getElementsByTagName('button');

for(var i = 0; i < buttons.length; i++){
    if(buttons[i].getAttribute('name') == 'item-menu-edit-button'){
        buttons[i].addEventListener('click', callback);
    }
} 
```

**编辑：**根据您的评论更新，以便分配与`name`属性匹配的按钮。

# jquery - jquery设置宽度，等待更新

> ID：15767463
> 
> 赞同：0
> 
> 时间：2013-04-02T15:00:28.630
> 
> 标签：jquery

我试图让一小部分 jquery 在页面加载时设置选择元素的大小，然后根据新的自动大小设置它的容器的大小。这有时有效，但似乎因页面加载速度较慢而失败。如果我调试代码并在每一行暂停，它会 100% 地工作，所以我假设在下一行触发之前每个操作都没有完成。我尝试为每一行添加 setTimeout，这有一点帮助，但并非总是如此。有任何解决这个问题的方法吗？

```
$(document).ready(function() {

  //set select element to auto width
  setTimeout(function(){$("#PunchDD").width("auto");},5); 

  //Add some width to the element to account for custom drop down arrow
  setTimeout(function(){$("#PunchDD").width($("#PunchDD").width() + 17);},5);

  //Set container width a bit smaller to hide the stock drop down arrow
  setTimeout(function(){$("#PunchDDContainer").width($("#PunchDD").width() - 18);},5);
}); 
```

此外，我不想在 css 中将大小设置为自动，因为当 javascript 不工作时，我在那里使用固定大小进行故障回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:05:31.963

将您的事件设置为在窗口加载而不是文档就绪时工作：

```
$(window).on('load',function(){
    // fun shtuffs
}); 
```

这应该可以解决问题，因为窗口和 CSS 格式在任何操作发生之前已经加载。

# asp.net - Web API 小写路由

> ID：15767471
> 
> 赞同：17
> 
> 时间：2013-04-02T15:00:50.507
> 
> 标签：asp.net, routes, asp.net-web-api, url-routing

嘿那里，

我需要在我的 Web API 项目中强制执行小写路由。如果它是一个 MVC 项目，我会使用类似的东西

```
routes.LowercaseUrls = true; 
```

但在 Web API 中，该属性不存在。

我尝试了[LowercaseRoutesMVC4](http://lowercaseroutesmvc.codeplex.com/) NuGet 扩展，但我的路线需要有一个自定义处理程序，这样扩展对我没有帮助。

我能做些什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-06T15:52:40.093

这看起来像你需要的

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: new { url = new LowercaseRouteConstraint() }
        );
    }
}

public class LowercaseRouteConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        var path = httpContext.Request.Url.AbsolutePath;
        return path.Equals(path.ToLowerInvariant(), StringComparison.InvariantCulture);
    }
} 
```

我在[https://gist.github.com/benfoster/3274578#file-gistfile1-cs-L4找到了这个](https://gist.github.com/benfoster/3274578#file-gistfile1-cs-L4)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-08-05T12:09:45.917

我有类似的json配置

```
public class JsonConfig
{
    public static void Initiliaze(HttpConfiguration config, bool isCamelCase)
    {
        var json = config.Formatters.JsonFormatter;
        json.SerializerSettings.PreserveReferencesHandling = PreserveReferencesHandling.None;
        json.SerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
        json.SerializerSettings.Formatting = Formatting.None;

        if (isCamelCase)
            json.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();

        config.Formatters.Remove(config.Formatters.XmlFormatter);
    }
} 
```

您可以在 WebApiConfig.cs 中调用此方法，例如

```
JsonConfig.Initiliaze(config, true); 
```

# r - 如何设置初始值以在 R 中使用 cumprod() 创建返回索引？

> ID：15767472
> 
> 赞同：1
> 
> 时间：2013-04-02T15:00:53.483
> 
> 标签：r

我在一段时间内有一系列回报，比如说每日回报：

```
> Z <-cbind(rnorm(10)*.01)
> Z
               [,1]
 [1,] -0.0095401182
 [2,]  0.0119037893
 [3,]  0.0001539471
 [4,] -0.0087361367
 [5,] -0.0127281577
 [6,] -0.0031177198
 [7,] -0.0041689219
 [8,] -0.0066547279
 [9,]  0.0156863175
[10,] -0.0126733237 
```

接下来，我使用 cumprod() 创建一个投资指数，它表示基于回报序列 Z 的初始 1 美元投资的回报：

```
> ZZ <-cbind((cumprod(1+Z)*1))
> ZZ
           [,1]
 [1,] 0.9904599
 [2,] 1.0022501
 [3,] 1.0024044
 [4,] 0.9936473
 [5,] 0.9810000
 [6,] 0.9779415
 [7,] 0.9738645
 [8,] 0.9673837
 [9,] 0.9825584
[10,] 0.9701061 
```

如何编辑用于创建索引 ZZ 的代码，以使结果输出显示初始值 1.00？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:03:07.063

使第一个返回零：

```
cumprod(1+c(0,rnorm(10)*.01)) 
```

或将所有元素除以第一个值：

```
ZZ <- ZZ/ZZ[1,1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:07:50.953

最直接的方法是`1`在开头添加一个`ZZ`：

```
ZZ <- cbind(c(1, cumprod(1+Z))) 
```

# sql - SQL：我们能否将多个条件组合到一个结果列中？

> ID：15767473
> 
> 赞同：1
> 
> 时间：2013-04-02T15:00:55.773
> 
> 标签：sql, sql-server, select

我正在将我们的一些旧数据从丑陋的数据库堆中标准化并迁移到更有用的东西中。

顺便说一句，源数据库是 MSSQL/SQL-Server。
（而且它受到列和表蔓延的困扰，FK 的使用很少，并且在有 FK 的地方，它们经常被破坏，因为某些唯一 ID在某些 UI 用例中发生了***变化！！！:)***

现在，我正在收集一些客户数据。这里有两大类客户。它们不是相互排斥的。使用的术语相当神秘，因此我将在此处将其简化为*User*和*Reseller*。

就目前而言，源表中有 4 列（是的，***4***列）可用于确定客户是*经销商*还是*用户*：`is_user`、`isuser`、`is_reseller`和`cust_type`。
该`cust_type`列存储手动输入的值，因此我们也面临拼写/缩写的变化:)

我已经有一些较早的查询，它们分别选择每种客户类型，但现在我想将它们合并到一个 qry 中，其中结果有一个简单的`is_user`布尔值和一个简单的`is_reseller`布尔值。

*这是我的用户*qry 示例（为简洁起见，功能完整）：

```
SELECT TOP 1 name, email, phone
FROM customer 
WHERE  name = '{$row['cust']}'
AND (  isuser=1 
    OR is_user=1
    OR cust_type LIKE 'USER%'
    OR cust_type = 'DIRECT USER' 
) 
```

**我的目标**是消除该条件，并将其替换为结果集中的附加列以指示是否`is_user`为 TRUE/FALSE。

这在 SQL（特别是 MS 风格）中有多可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:04:00.837

您可以使用`CASE`表达式，但您需要确保您的`WHERE`子句不那么排他性（如果它是同一组标准，那么结果中的每一行都将为真）。

```
SELECT TOP 1 name, email, phone, is_user = CASE
   WHEN ( isuser = 1 
      OR is_user = 1
      OR cust_type LIKE 'USER%'
      OR cust_type = 'DIRECT USER')
   THEN 1 ELSE 0 END,
 is_reseller = CASE 
   WHEN (...any condition that makes a customer a reseller...)
   THEN 1 ELSE 0 END
FROM dbo.customer
...WHERE... 
```

# emacs - Emacs 中的 Python 模式。 导致永无止境的过程

> ID：15767481
> 
> 赞同：1
> 
> 时间：2013-04-02T15:01:10.377
> 
> 标签：emacs, python-mode

如果我按下`<TAB>`像下面这样缩进的代码，Emacs 会进入一个无限的永无止境的过程，永远不会修复缩进

          ![在此处输入图像描述](https://i.stack.imgur.com/7zDtL.png)

我检查`C-h k`并`<TAB>`绑定到`(py-indent-line &optional ARG RECURSIVE)`，我认为这是正确的。

这是 Emacs 24.3 的最新稳定版本和 Python 模式的最新版本（6.1.1）。

# c# - 使用c#从另一个进程调用函数

> ID：15767482
> 
> 赞同：5
> 
> 时间：2013-04-02T15:01:11.547
> 
> 标签：c#, c, function, winapi

我正在为自己的学习目的创建一个内存修改程序。我的一个朋友指出了我想要触发的另一个程序中的一个函数。

该函数在另一个程序中位于 0x004B459C。我知道如何读写内存，但是如何从我的程序中触发这个功能。我没有这个其他程序的来源。

我的问题是，如果我知道这个十六进制代码，我是否需要注入函数，或者我只是在内存中写一些东西来触发它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:39:21.740

想想你真正想要什么。您希望其他进程执行此功能。进程不执行代码，它是执行代码的线程。如果您希望其他进程调用此函数作为其正常操作的一部分，您将必须弄清楚输入等，这将使其他进程的线程之一调用它。一般来说，任何其他方式都会冒着破坏其他进程的风险。可以将线程注入另一个进程并让它调用您感兴趣的函数（请参阅[CreateRemoteThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437.aspx)）。如果打算在消息泵线程上调用此函数，则可以[注入消息挂钩](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces)进入另一个进程，向它发送一条特殊消息并从你的钩子中调用它。还有更多方法（APC），但这些方法仍然更复杂，收效甚微。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T17:28:25.840

您缺少一些基本的架构基础知识:-) 您不能简单地从另一个进程调用知道其地址的函数！想想看，这意味着你的程序可以获取任何程序的内存并执行代码！这将是一个混乱和完全不安全的环境。首先是一些基础知识：1）windows保证你只能看到你自己进程的内存，操作系统（甚至Windows）最重要的原则之一是隔离进程，当然包括它们的内存。2）确实考虑了权限，通常任何运行的代码都必须在用户帐户下运行，另一个进程可能意味着另一个进程帐户。

答案很简单，如果你的程序是 .NET/C#，那么检查一下 .NET 框架为你提供了哪些进程间通信，这是你必须搜索的东西，每个平台，Java，windows native，.NET 都提供了一种官方方式进程如何相互通信，称为进程间通信，在.NET框架中查看

# c++ - 未为 rapidjson 声明 _snprintf？

> ID：15767489
> 
> 赞同：1
> 
> 时间：2013-04-02T15:01:23.963
> 
> 标签：c++, linux, rapidjson

尝试在 CentOS 6.4 上构建时出现以下错误：此处传递的唯一标志是 -Wall 和 -std=c++11，使用 gcc 4.7.2

> /usr/local/include/rapidjson/writer.h：在成员函数'void rapidjson::Writer::WriteDouble(double)'中：/usr/local/include/rapidjson/writer.h:173:53：错误：有'_snprintf' 没有依赖于模板参数的参数，因此'_snprintf' 的声明必须可用 [-fpermissive] /usr/local/include/rapidjson/writer.h:173:53：注意：（如果你使用“-fpermissive”，G++ 将接受您的代码，但不允许使用未声明的名称）

有问题的代码：（来自 rapidjson/writer.h）

```
 void WriteDouble(double d) {
            char buffer[100];
#if _MSC_VER
            int ret = sprintf_s(buffer, sizeof(buffer), "%g", d);
#else
            int ret = snprintf(buffer, sizeof(buffer), "%g", d); //this line is the troublemaker
#endif
            RAPIDJSON_ASSERT(ret >= 1);
            for (int i = 0; i < ret; i++)
                    stream_.Put(buffer[i]);
    } 
```

writer.h 文件的顶部如下所示：

```
#ifndef RAPIDJSON_WRITER_H_
#define RAPIDJSON_WRITER_H_

#include "rapidjson.h"
#include "internal/stack.h"
#include "internal/strfunc.h"
#include <cstdio>       // snprintf() or _sprintf_s()
#include <new>          // placement ne 
```

这让我想到了这个问题：[cstdio stdio.h namespace](https://stackoverflow.com/questions/10460250/cstdio-stdio-h-namespace)。

据我了解上述问题的答案，包含 cstdio 应在标准命名空间中声明 snprintf 符号。所以，我想包括 stdio.h 来获取在全局命名空间中定义的符号。无论我是否包含 cstdio、stdio.h 或两个文件（我不应该这样做），都会产生相同的编译错误

我的问题是两个部分：为什么 gcc 寻找 _snprintf 而不是 snprintf？还是我走错了路，这是否与 gcc 为模板参数绑定所做的两部分名称查找有关？（ala 10.8.2， http: [//idlebox.net/2009/apidocs/gcc-4.4.1.zip/gcc-4.4.1/gcc_10.html#SEC315](http://idlebox.net/2009/apidocs/gcc-4.4.1.zip/gcc-4.4.1/gcc_10.html#SEC315)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:06:59.390

您是否使用 -ansi 编译标志？

使用 -ansi 通常表示您希望标头仅公开 C89 标准中提到的接口。但是C89没有描述snprintf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:17:56.593

*（还不能发表评论，所以我写这个作为答案）。*

关于您的第二个问题：这不太可能与两阶段名称查找有关。错误消息只是说有一个非依赖的未定义 smybol ( `_snprintf`)。

好的，为什么会这样？错误消息是 about `_snprintf`，而不是实际使用`snprintf`的 in `writer.h`，所以如果我不得不猜测我会说`#define snprintf _snprintf`在包含 STL 标头之前还有一些其他代码通过重新定义该名称。你的代码中有类似的东西吗？如果可能，请将其删除。

其他一些可以尝试的事情：如果可能的话，将包含`writer.h`移到文件顶部（即在重新定义 of 之前`snprintf`）。如果不可能，请尝试`#undef snprintf`在包含`writer.h`.

此外，单独这样的重新定义会导致我的机器上出现不同的错误。为了澄清这一点：您的系统上如何定义预处理器符号`_GLIBCXX_USE_C99`？

如果这没有帮助，则需要更多信息。然后您能否发布完整的错误消息（也许是一个最小的重现示例）？

# c++ - 在返回的迭代器中搜索向量

> ID：15767492
> 
> 赞同：0
> 
> 时间：2013-04-02T15:01:38.613
> 
> 标签：c++, map, vector, iterator, find

上下文：我在 <-string,vector->map 上使用 std::string 执行 std::find。然后它返回一个向量迭代器，我将返回的迭代器保存在一个常量迭代器中。

问题：我现在想遍历返回的 const-iterator，并字符串比较索引 0 处的每个向量。所以类似于：

```
while (iterator != map.end())
    if ( myStr == iterator.at(0) )
        break;
    else
        iterator++ 
```

这种方法对我来说很好，我想知道是否有更优雅的方法来做这件事，我错过了什么吗？

感谢您对此的帮助=]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:08:47.970

而不是显式编码搜索，您可以使用[`std::find_if()`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
std::vector<std::vector<std::string>> vstring
    {
        { "no",   "yes"   },
        { "help", "yes"   },
        { "true", "false" }
    };

const std::string myStr = "help";
auto f = std::find_if(vstring.begin(), vstring.end(),
            [&](std::vector<std::string>const & vs)
            {
                return !vs.empty() && myStr == vs[0];
            });

if (f != vstring.end())
{
    // Found.
} 
```

[请参阅http://ideone.com/nkI7fk](http://ideone.com/nkI7fk)上的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:10:01.767

使这个更“优雅”的一种方法是这样的：

```
// C++11 allows `using` to be used instead of `typedef`
using map_type = std::map<std::string, std::vector<some_type>>;

// First find the starting point of our secondary search
const auto itr = map.find(some_string);

// Do secondary search
const auto found = std::find_if(itr, map.end(),
                                [](const map_type::value_type& pair)
                                {
                                    return (!pair.second.empty() &&
                                            pair.second[0] == myStr);
                                });
if (found != map.end())
{
    // Found the item
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-02T15:08:23.660

我可以想象有一种非常糟糕的方式。这不是普通的，应该（甚至必须）永远不要使用。重载向量的比较运算符，因此它只会比较 0 个位置。然后使用 map::find() 方法。只是好玩。

# ruby-on-rails - 数据库建模这个关系？

> ID：15767501
> 
> 赞同：1
> 
> 时间：2013-04-02T15:02:02.020
> 
> 标签：ruby-on-rails, database, schema

导轨应用程序：

1.  用户拥有多个职位。
2.  每个职位都有一个公司（公司名称和公司 ID），其架构如下：

    ```
    create_table "positions", :force => true do |t|
      t.integer  "user_id"
      ...
      t.string   "company"
      t.integer  "company_id"
    end 
    ```

3.  我希望用户能够“关注”尽可能多的个人公司（即一个用户可以关注许多不同的公司，一个公司可以被许多不同的用户关注）。这似乎需要用户和职位之间的 has_and_belongs_to_many 关系，但我希望用户能够关注职位行的公司*属性*，而不是职位本身。

我是否应该完全创建一个新的“关注”表，将公司从职位表中拉出以匹配 user_id？或者有没有办法可以建立一个has_many：通过关系并将user_id's映射到company_id's？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:09:01.277

我认为你可以拥有的

用户**表**：

```
integer User_Id
.... 
```

**公司**表：

```
string company
integer company_id
... 
```

**职位**表：

```
integer user_id foreign_key -> User table
integer company_id foreign_key -> company table 
```

**下**表（如果用户可以关注任何公司关于他是否有职位）：

```
integer user_id foreign_key -> User table
integer company_id foreign_key -> company table 
```

**或者**，如果用户只能关注他拥有职位的公司，那么您可以在**职位表中添加一个新列**。这将是一个布尔标志，告诉用户是否“关注”由职位标识的公司。或者，在这种情况下，下表也可以将用户映射到位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:56:31.053

我大致同意 MickJ，尽管创建了 Company 和 User 模型/表（显然每个都有一个 id 列）我会这样做：

```
create_table "companies" do |t|
   t.string "name"
   ... 
end

create_table "positions" do |t|
   t.references "user"
   t.references "company"
   ...
end

create_table "followings" do |t|
   t.references "user"
   t.references "company"
   ...
end 
```

楷模：

```
class User
  has_many :positions
  has_many :followings
end 

class Company
  has_many :positions
  has_many :followings
end 

class Position
  belongs_to :user
  belongs_to :company
end 

class Following
  belongs_to :user
  belongs_to :company
end 
```

您可以通过以下方式从职位中引用公司：

```
position = Position.first
puts position.company.name 
```

或由用户使用类似的东西

```
user = User.first
user.positions.each do |position| 
  puts position.company.name
end 
```

-- 编辑1：

要将公司名称从职位中提取到一个单独的表中，您最好编写一个小 rake 任务 - 例如：

```
Position.all.each do |position|
  company = Company.find_or_initialize_by_name(position.company_name)
  position.company_id = company.id
  position.save
end 
```

然后，您可能想要编写迁移以从职位表中删除公司名称列......只是为了保持整洁。

# wordpress - 关于如何使用搜索和替换工具脚本将 WordPress 从本地迁移到在线服务器的疑问

> ID：15767507
> 
> 赞同：1
> 
> 时间：2013-04-02T15:02:21.623
> 
> 标签：wordpress, content-management-system

我正在尝试将我的博客从本地 Web 服务器迁移到在线 Web 服务器，但我对此过程有疑问。

我已将所有本地文件上传到我的 Web 服务器的根目录中。

我还导出了本地数据库的表（使用 phpMyAdmin），并将它们导入到我的在线数据库中。

然后我更改了文件**wp-config.php**中的设置，以便与在线数据库建立连接。

现在我必须使用**搜索和替换工具**脚本更改我的数据库上的 URL 设置：http: [//interconnectit.com/products/search-and-replace-for-wordpress-databases/](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)

所以我对使用搜索和替换脚本的疑问是：

1）我是否必须将**searchreplacedb2.php**文件放入我的网络服务器的根目录（它是 wp-config.php 文件）并执行此脚本？

2）我是扫描所有表还是只扫描帖子表？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:46:06.637

我不知道您建议的脚本，但我一直使用的是直接 mysql 查询，如下所示：

```
/**
To update WordPress options with the new blog location, use the following SQL command:
**/

UPDATE wp_options SET option_value = replace(option_value, 'http://www.old-domain.com', 'http://www.new-domain.com') WHERE option_name = 'home' OR option_name = 'siteurl';

/**
After that you will need to fix URLs of the WordPress posts and pages, which translated from post slug, and stored in database wp_posts table as guid field. The URL values in this field are stored as abolute URLs instead of relative URLs, so it needs to be changed with the following SQL query:
**/

UPDATE wp_posts SET guid = replace(guid, 'http://www.old-domain.com','http://www.new-domain.com');

/**
If you have linked internally within blog posts or pages with absolute URLs, these links will point to wrong locations after you move the blog location. Use the following SQL commands to fix all internal links to own blog in all WordPress posts and pages:
**/

UPDATE wp_posts SET post_content = replace(post_content, 'http://www.old-domain.com', 'http://www.new-domain.com'); 
```

注意：自从我编写这个脚本以来，wp DB 结构中可能发生了一些变化，所以以防万一，在使用它之后，转到`wp_options`表并仔细检查 HOME 和 BLOG url 条目以查看它们是否与您的新域匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T18:34:49.057

一个更安全的选择可能是利用[wp-cli](http://wp-cli.org/)，特别是它的[搜索替换](http://wp-cli.org/commands/search-replace/)功能。

您可以对数据库的本地副本执行此操作，然后将其上传到您的生产环境。

# android - Phonegap 2.5.0：项目创建期间出错

> ID：15767509
> 
> 赞同：0
> 
> 时间：2013-04-02T15:02:29.443
> 
> 标签：android, cordova

我正在尝试在 Windows 上遵循[Android 入门教程。](http://docs.phonegap.com/en/2.5.0/guide_getting-started_android_index.md.html)我在第 4 步。设置一个新项目。我输入`./create c:\projects\test com.example.test test`，然后收到错误：

```
An unexpected error occurred: ANDROID_BIN="${ANDROID_BIN:=$( which android )}" exited with 1
Deleting project... 
```

我已经修改了我的`PATH`系统环境变量，添加`%ANDROID_HOME%\tools`和`%ANDROID_HOME%\platform-tools`. `%ANDROID_HOME%`指向`c:\adt-bundle\sdk`.

我可以成功运行以下命令：

*   `java`
*   `javac`
*   `ant`
*   `adb`

但是，运行`android`会导致`-bash: android: command not found`.

我难住了。任何人都知道我为了能够创建Phonegap项目而缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:14:40.470

确保您可以从终端运行以下命令：

```
ant -version
java -version
android -h 
```

如果找不到命令，则需要先修复该问题，然后再尝试创建 Phonegap 项目。更新 PATH 变量后，您需要重新启动命令提示符/终端才能使用这些命令。

为了让事情变得更简单，请确保您也定义了 ANT_HOME、JAVA_HOME 和 ANDROID_HOME 变量！

编辑：确保您使用的是 Window 的命令提示符而不是 cygwin shell。

# php - 如何不从 SQL 中的相邻表中选择另一个表中列出的 id？

> ID：15767511
> 
> 赞同：2
> 
> 时间：2013-04-02T15:02:37.833
> 
> 标签：php, mysql, codeigniter

关于我的问题的更多背景信息。我的网站上有一个“关注者”侧边栏，用户可以在其中关注其他用户。问题是目前出现在这个侧边栏中的用户还可以包括他们已经关注的用户。我想修改函数，这样就不会再发生了。这是我目前使用的模型功能...

```
public function get_oldest($limit = 10, $user_id)
{
  $this->db
      ->select($this->db->dbprefix('profiles').'.*, g.description as group_name, users.*')
      ->join('groups g', 'g.id = users.group_id')
      ->join('profiles', 'profiles.user_id = users.id', 'left')
      ->group_by('users.id');
  $this->db->order_by('users.created_on', 'ASC');
  $this->db->limit($limit);
  $results = $this->db->get('users')->result_array();

  return $results;
} 
```

这是控制器功能...

```
function get_oldest() {
  $this->load->model('user_account/user_account_m');

  $limit = $this->attribute('limit');

  $user_id = $this->current_user->id;

  $users = $this->user_account_m->get_oldest($limit, $user_id);
  return $users;
} 
```

sql数据库中的“Follower”(default_follow)表结构如下...

> **id** = 关注事件的id
> **follower_id** = 进行关注的人的user_id
> **follow_id** = 被关注的人的user_id

sql数据库中的“Profile”(default_profiles)表结构如下...

```
user_id
display_name
first_name
last_name 
```

我知道我需要以某种方式使用当前用户的 id 才能让它工作，我只是很难弄清楚如何。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:21:36.687

在 sql 中设置差异的一种方法是使用 EXCEPT 关键字。我在这里在 sqlfiddle 上放了一个玩具渲染： [http ://sqlfiddle.com/#!6/2308a/6](http://sqlfiddle.com/#!6/2308a/6)

```
SELECT distinct user_id
FROM users
EXCEPT 
SELECT followed_id
FROM follow
WHERE follower_id = <idhere> 
```

最上面的 sql 将获取系统中的所有 user_id。底部会抓取当前用户关注的所有用户，EXCEPT 关键字将应用设置差异，为您提供当前用户尚未关注的所有用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:44:45.873

您正在寻找的功能称为子查询。

在 SQL 中，您的 CodeIgniter ActiveRecord 查询大致翻译为：

```
SELECT profiles.*, g.description as group_name, users.*
INNER JOIN groups g ON g.id = users.group_id
LEFT JOIN profiles ON profiles.user_id = users.id
GROUP BY users.id
ORDER BY users.created_on; 
```

为了过滤掉现有的关注者，我们将添加一个使用 IN 关键字和子查询的 WHERE 子句：

```
SELECT profiles.*, g.description as group_name, users.*
INNER JOIN groups g ON g.id = users.group_id
LEFT JOIN profiles ON profiles.user_id = users.id
WHERE users.id NOT IN (SELECT follower_id FROM default_follow WHERE followed_id = ?)
GROUP BY users.id
ORDER BY users.created_on; 
```

这 ？表示一个查询参数，在您的情况下是登录用户的 ID。

转换回 CodeIgniter，你有几个选择：

1) 将 NOT IN 子句直接写入对 CodeIgniter 的“where”函数的调用中，连接用户 ID。

```
$this->db
        ->select($this->db->dbprefix('profiles').'.*, g.description as group_name, users.*')
        ->join('groups g', 'g.id = users.group_id')
        ->join('profiles', 'profiles.user_id = users.id', 'left')
        ->where('users.id NOT IN (SELECT follower_id FROM default_follow WHERE followed_id = '.$user_id.')', NULL, FALSE)
        ->group_by('users.id'); 
```

2) 将子查询拆分为单独的查询并在第二个查询中使用结果：

```
$this->subquery->select('follower_id')
               ->where('followed_id', $user_id);
$followers = $this->subquery->get('default_follow')->result_array();
$this->db
        ->select($this->db->dbprefix('profiles').'.*, g.description as group_name, users.*')
        ->join('groups g', 'g.id = users.group_id')
        ->join('profiles', 'profiles.user_id = users.id', 'left')
        ->where_not_in('users.id', $followers)
        ->group_by('users.id'); 
```

选项 1 很好，因为它让数据库完成所有工作，但根据 $user_id 的来源，您可能会面临 SQL 注入攻击。您需要提前清理该输入。

选项 2 可以避免 SQL 注入，但会强制 PHP 完成一些工作。它不会那么快，尤其是对于有很多追随者的用户。一些数据库对可以包含在显式 IN 子句中的元素数量有限制（特别是，Oracle 将您限制为 1000），但看起来您正在使用 mySQL，它没有这样的限制。

我希望有一个选项三，但是 CodeIgniter 的 ActiveRecord 功能还没有提供对子查询的本机支持。鉴于上述选项，我会选择选项 1 并确保自己防止 SQL 注入。

这是使用 CodeIgniter ActiveRecord 进行查询的不错参考：

[http://ellislab.com/codeigniter/user-guide/database/active_record.html](http://ellislab.com/codeigniter/user-guide/database/active_record.html)

# mysql - 尝试将 SQL 中的值转换为 Unix 时间戳

> ID：15767515
> 
> 赞同：0
> 
> 时间：2013-04-02T15:02:49.240
> 
> 标签：mysql

我有一个 Wordpress 表，其中包含当前日期格式为 MM/DD/YYYY 的一堆值。此查询成功地向我显示了它们的 Unix 时间戳：

```
SELECT UNIX_TIMESTAMP(STR_TO_DATE(`meta_value`,'%m/%d/%Y'))
FROM `wp_6222_postmeta`
WHERE `meta_key`="wpcf-start-date" 
```

但是我正在努力弄清楚如何将这些值正确地写回该字段。我试过这个查询，但没有用：

```
UPDATE 'wp_6222_postmeta'
SET 'meta_value' = UNIX_TIMESTAMP(STR_TO_DATE(`meta_value`,'%m/%d/%Y'))
WHERE 'meta_key' = 'wpcf-start-date' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:20:34.820

在这里粘贴答案，因为我之前无法回答，因为我的帐户太新了。

好的，语法错误最终是为 UPDATE 不能喜欢的列字段添加引号。删除那些给了我 NULL 值但查询运行。然后我发现我必须将时间戳转换包装在一个 SELECT 函数中。这是我运行的成功转换所有字段的代码：

```
UPDATE wp_6222_postmeta
SET meta_value = (SELECT UNIX_TIMESTAMP(STR_TO_DATE(meta_value`,'%m/%d/%Y')))
WHERE meta_key='wpcf-end-date' 
```

# wpf - 如何为 TextBox 应用自定义样式上下文菜单（默认上下文菜单复制/剪切/粘贴）？

> ID：15767521
> 
> 赞同：1
> 
> 时间：2013-04-02T15:03:07.880
> 
> 标签：wpf, xaml, styles, contextmenu

我为 MenuItem 创建样式。当我创建自己的菜单时，一切都很好。但是如何将样式应用于 TextBox 的上下文菜单？我的意思是，菜单（复制、剪切、粘贴等） - 我不想创建新行，而只是更改样式。

```
//My Custom Menu Example
    <UserControl.ContextMenu>
        <ContextMenu Style="{StaticResource ContextMenuStyle}" HasDropShadow="True">
            <MenuItem x:Name="MenuItem1" Header="Open" 
                    Style="{StaticResource ContextMenuItem}">
            </MenuItem>
            <MenuItem x:Name="MenuItem2" Header="Save" 
                     Style="{StaticResource ContextMenuItem}">
            </MenuItem>
            <MenuItem x:Name="MenuItem3" Header="Delete" 
                    Style="{StaticResource ContextMenuItem}">
            </MenuItem>
        </ContextMenu>
    </UserControl.ContextMenu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:13:06.343

从技术上讲，您必须对 UserControl.ContextMenu 对 TextBox.ContextMenu 执行相同的操作。

查看下面的链接，该链接正是您使用 xaml 询问的场景。

# git - git clone+pull 从同一台机器上的不同仓库：我可以指定文件系统路径，还是只能使用 ssh 路径？

> ID：15767522
> 
> 赞同：-1
> 
> 时间：2013-04-02T15:03:08.790
> 
> 标签：git

标题几乎涵盖了这个问题。实际上，我必须生成一个 ssh 密钥才能进行本地结帐。像这样的东西：`git clone ec2-user@localhost:/home/ec2-user/local_bare_repo.git local_normal_repo`

根据 git doc，

> <repository> 作为获取或拉取操作源的“远程”存储库。这个参数可以是一个 URL（参见下面的 GIT URLS 部分）或远程的名称（参见下面的 REMOTES 部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:06:53.317

如果您已经在查看文档，为什么不阅读引用中提到的“Git URL”部分？

> 对于本地存储库，Git 本身也支持，可以使用以下语法：
> `/path/to/repo.git/`
> `file:///path/to/repo.git/`

# javascript - 将选择选项绑定到全局变量/数组？

> ID：15767524
> 
> 赞同：0
> 
> 时间：2013-04-02T15:03:14.050
> 
> 标签：javascript, data-binding, knockout.js, typescript

假设我有以下 Javascript：

```
var Option = (function ()
{
        function Option(value, text)
        {
            this.value = value;
            this.text = text;
        }

        return Option;
})();

var QuestionTypes = (function ()
{
    QuestionTypes.chooseOne = new Option("ChooseOne", "Choose One");
    QuestionTypes.chooseMany = new Option("ChooseMany", "Choose Many");
    QuestionTypes.text = new Option("Text", "Text");
    QuestionTypes.all = function ()
    {
        return
        [
            QuestionTypes.chooseOne, 
            QuestionTypes.chooseMany, 
            QuestionTypes.text
        ];
    };

    return QuestionTypes;
})(); 
```

这个HTML：

```
<select data-bind="value: type, options: QuestionTypes.all, optionsValue: value, optionsText: text" /> 
```

所以`select`绑定到我的“静态”变量`QuestionTypes`。我希望结果`select`看起来像这样：

```
<select data-bind="value: type, options: QuestionTypes.all, optionsValue: value, optionsText: text">
    <option value="ChooseOne">Choose One</option>
    <option value="ChooseMany">Choose Many</option>
    <option value="Text">Text</option>
</select> 
```

基本上，我如何绑定到全局而不是模型本身的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T21:54:26.890

您可以很好地绑定到全局变量。就像其他任何地方一样，它们可以在绑定中使用。

您的示例中的问题是`optionsValue`并且`optionsText`需要是字符串。

```
options: QuestionTypes.all, optionsValue: 'value', optionsText: 'text' 
```

# android - Deezer sdk 示例播放器无法获取流令牌属性以启动播放

> ID：15767528
> 
> 赞同：1
> 
> 时间：2013-04-02T15:03:38.150
> 
> 标签：android, deezer

即使从示例应用程序中，我也无法启动曲目的播放。我从 Deezer 获得的流令牌出现问题（似乎丢失了！）。奇怪的是，因为我在 iOS 版本中使用了相同的应用程序 ID，而且我可以正常播放，而且我的播放列表也可以正常播放……有什么想法吗？

编辑

似乎 Deezer 应用程序 ID 只接受一个平台。奇怪，因为开发工具允许您填充两个平台。专门为 Android 创建一个新应用程序以获取另一个应用程序 ID 解决了该问题。

# vb.net - 设置与父表单按钮相关的表单位置

> ID：15767531
> 
> 赞同：0
> 
> 时间：2013-04-02T15:03:44.040
> 
> 标签：vb.net, winforms

我有一个 MDI（父）表格和 2 个其他表格。在 form1 上有一个按钮，位置是 (X:100, Y:200)。我要求当用户通过 Form1 单击按钮时，应该打开另一个表单“Form2”。Form2 的位置应该在按钮（发件人）的正中间。

我写这段代码

```
   Private Sub UpdateLocation(ByVal element As Control, ByVal frm As Form)
        将 p 调暗为新点（element.Location）
        p = element.PointToScreen(p)
        pX = pX + element.Width + 10
        pY = pY / 2

        Debug.Print(p.ToString)
        frm.Location = p
        frm.BringToFront()
    结束子

```

但 Form2 的位置不如预期。在按钮单击事件上调用上述函数

```
    更新位置（form1.button1，form2）

```

任何帮助都是不言而喻的。提前致谢。

上述代码的输出是：

[Button1_Click](http://goo.gl/yfbLS)

经过几次测试后，我意识到 point.x (location.x) 可以正常工作，但 point.y (location.y) 却不行

[您可以从这里下载这段代码](http://www.softnsolv.com/temp/FormLocation.zip)。你可以检查它的实际问题。需要 VS2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:56:53.260

我认为如果你想要它在中间，你需要考虑按钮和表单的高度：

```
Dim p As Point = Me.MdiParent.PointToScreen(element.Location)
p.X += element.Width + 10
p.Y += (element.Height / 2) - (frm.Height / 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:57:53.467

尝试这个，

```
Private Sub UpdateLocation(ByVal element As Control, ByVal frm As Form)

        Dim p As New Point(element.Location)
        p = element.parent.PointToScreen(p)
        p.X = p.X + element.Width + 10
        p.Y = p.Y + (element.height/2)

        Debug.Print(p.ToString)
        frm.Location = p
        frm.BringToFront()

 End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T16:11:46.817

“已解决”，再次确认

```
Private Sub UpdateLocation(ByVal element As Control, ByVal frm As Form)
        If IsNothing(element) Then
            退出子
        万一
        将 p 调暗为新点（element.Location）
        p = element.Parent.PointToScreen(p)
        pX = pX + element.Width + 5
        pY += (element.Height / 2) - (frm.Height / 2)

        frm.Location = p
        frm.BringToFront()
结束子

```

这段代码在我所有的案例中都能 100% 正常工作。

# ruby-on-rails - Ruby方法似乎不起作用

> ID：15767534
> 
> 赞同：0
> 
> 时间：2013-04-02T15:03:59.023
> 
> 标签：ruby-on-rails, ruby, irb

我有一个 ruby​​ 脚本，我想在其中将变量初始化/重置封装在一个方法中。我创建了以下变量重置方法。但是在 irb 中，这个方法运行良好，但是当我在运行这样的方法后打印变量时`initer`：它没有完成这项工作。

```
def intiter
  cntr = 0
  rec = 0
  timer = 0
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:07:56.690

`initer`您的方法仅在;范围内设置局部变量 当该方法结束时，您设置的那些变量将`0`消失在以太中。您需要引用类、实例或全局变量才能在您的方法中设置它们。类变量以该类的所有实例开头`@@`并由该类的所有实例共享；`@`实例变量以类的特定实例中的任何东西开头，并且可以被任何东西访问；全局变量从程序中的任何地方开始`$`并且可以在任何地方使用，但可能会受到意外更改的影响。在不了解更多代码以及您的整体设计是什么的情况下，我无法为您提供更多帮助。

编辑：我包含的上一个链接不是正确的部分。尝试[http://docs.ruby-doc.com/docs/ProgrammingRuby/html/tut_classes.html](http://docs.ruby-doc.com/docs/ProgrammingRuby/html/tut_classes.html)了解更多信息。

此外，[为什么（辛酸）的红宝石指南](http://www.rubyinside.com/media/poignant-guide.pdf)很好......无论如何，如果它是你的一杯茶。我喜欢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:14:02.720

`def`关键字以 new 开头，这意味着此处定义的`scope`任何变量都是全新的，并且在`end`命中关键字时将被销毁。您正在创建这些变量的全新副本，将它们设置为 0，然后销毁它们。原始变量永远不会被触及。

# android - 在android中使用的颜色选择器

> ID：15767537
> 
> 赞同：4
> 
> 时间：2013-04-02T15:04:11.777
> 
> 标签：android

有人可以为我提供一些颜色选择器的代码及其在 android 中的用法吗？

我在这里找到了一些示例[Android Color Picker](https://stackoverflow.com/questions/6980906/android-color-picker)，但我不知道如何使用它:(

请帮助我，谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-02T15:10:52.680

颜色选择器对话框。

```
public class ColorPickerDialog extends Dialog {

public interface OnColorChangedListener {
    void colorChanged(int color);
}

private OnColorChangedListener mListener;
private int mInitialColor;

private static class ColorPickerView extends View {
    private Paint mPaint;
    private Paint mCenterPaint;
    private final int[] mColors;
    private OnColorChangedListener mListener;

    ColorPickerView(Context c, OnColorChangedListener l, int color) {
        super(c);
        mListener = l;
        mColors = new int[] {
            0xFFFF0000, 0xFFFF00FF, 0xFF0000FF, 0xFF00FFFF, 0xFF00FF00,
            0xFFFFFF00, 0xFFFF0000
        };
        Shader s = new SweepGradient(0, 0, mColors, null);

        mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mPaint.setShader(s);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeWidth(32);

        mCenterPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mCenterPaint.setColor(color);
        mCenterPaint.setStrokeWidth(5);
    }

    private boolean mTrackingCenter;
    private boolean mHighlightCenter;

    @Override
    protected void onDraw(Canvas canvas) {
        float r = CENTER_X - mPaint.getStrokeWidth()*0.5f;

        canvas.translate(CENTER_X, CENTER_X);

        canvas.drawOval(new RectF(-r, -r, r, r), mPaint);
        canvas.drawCircle(0, 0, CENTER_RADIUS, mCenterPaint);

        if (mTrackingCenter) {
            int c = mCenterPaint.getColor();
            mCenterPaint.setStyle(Paint.Style.STROKE);

            if (mHighlightCenter) {
                mCenterPaint.setAlpha(0xFF);
            } else {
                mCenterPaint.setAlpha(0x80);
            }
            canvas.drawCircle(0, 0,
                              CENTER_RADIUS + mCenterPaint.getStrokeWidth(),
                              mCenterPaint);

            mCenterPaint.setStyle(Paint.Style.FILL);
            mCenterPaint.setColor(c);
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        setMeasuredDimension(CENTER_X*2, CENTER_Y*2);
    }

    private static final int CENTER_X = 100;
    private static final int CENTER_Y = 100;
    private static final int CENTER_RADIUS = 32;

    private int floatToByte(float x) {
        int n = java.lang.Math.round(x);
        return n;
    }
    private int pinToByte(int n) {
        if (n < 0) {
            n = 0;
        } else if (n > 255) {
            n = 255;
        }
        return n;
    }

    private int ave(int s, int d, float p) {
        return s + java.lang.Math.round(p * (d - s));
    }

    private int interpColor(int colors[], float unit) {
        if (unit <= 0) {
            return colors[0];
        }
        if (unit >= 1) {
            return colors[colors.length - 1];
        }

        float p = unit * (colors.length - 1);
        int i = (int)p;
        p -= i;

        // now p is just the fractional part [0...1) and i is the index
        int c0 = colors[i];
        int c1 = colors[i+1];
        int a = ave(Color.alpha(c0), Color.alpha(c1), p);
        int r = ave(Color.red(c0), Color.red(c1), p);
        int g = ave(Color.green(c0), Color.green(c1), p);
        int b = ave(Color.blue(c0), Color.blue(c1), p);

        return Color.argb(a, r, g, b);
    }

    private int rotateColor(int color, float rad) {
        float deg = rad * 180 / 3.1415927f;
        int r = Color.red(color);
        int g = Color.green(color);
        int b = Color.blue(color);

        ColorMatrix cm = new ColorMatrix();
        ColorMatrix tmp = new ColorMatrix();

        cm.setRGB2YUV();
        tmp.setRotate(0, deg);
        cm.postConcat(tmp);
        tmp.setYUV2RGB();
        cm.postConcat(tmp);

        final float[] a = cm.getArray();

        int ir = floatToByte(a[0] * r +  a[1] * g +  a[2] * b);
        int ig = floatToByte(a[5] * r +  a[6] * g +  a[7] * b);
        int ib = floatToByte(a[10] * r + a[11] * g + a[12] * b);

        return Color.argb(Color.alpha(color), pinToByte(ir),
                          pinToByte(ig), pinToByte(ib));
    }

    private static final float PI = 3.1415926f;

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX() - CENTER_X;
        float y = event.getY() - CENTER_Y;
        boolean inCenter = java.lang.Math.sqrt(x*x + y*y) <= CENTER_RADIUS;

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                mTrackingCenter = inCenter;
                if (inCenter) {
                    mHighlightCenter = true;
                    invalidate();
                    break;
                }
            case MotionEvent.ACTION_MOVE:
                if (mTrackingCenter) {
                    if (mHighlightCenter != inCenter) {
                        mHighlightCenter = inCenter;
                        invalidate();
                    }
                } else {
                    float angle = (float)java.lang.Math.atan2(y, x);
                    // need to turn angle [-PI ... PI] into unit [0....1]
                    float unit = angle/(2*PI);
                    if (unit < 0) {
                        unit += 1;
                    }
                    mCenterPaint.setColor(interpColor(mColors, unit));
                    invalidate();
                }
                break;
            case MotionEvent.ACTION_UP:
                if (mTrackingCenter) {
                    if (inCenter) {
                        mListener.colorChanged(mCenterPaint.getColor());
                    }
                    mTrackingCenter = false;    // so we draw w/o halo
                    invalidate();
                }
                break;
        }
        return true;
    }
}

public ColorPickerDialog(Context context,
                         OnColorChangedListener listener,
                         int initialColor) {
    super(context);

    mListener = listener;
    mInitialColor = initialColor;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    OnColorChangedListener l = new OnColorChangedListener() {
        public void colorChanged(int color) {
            mListener.colorChanged(color);
            dismiss();
        }
    };

    setContentView(new ColorPickerView(getContext(), l, mInitialColor));
    setTitle("Pick a Color");
 }
} 
```

用法

```
new ColorPickerDialog(FingerPaintActivity.this, FingerPaintActivity.this, mPaint.getColor()).show(); 
```

FingerPaintActivity.this - 是活动上下文 mPaint 是绘制对象。 

无论用户选择什么颜色，对象都将具有该颜色。如果用户选择红色 mPaint 将具有可用于绘制的红色。

显示颜色选择器

在按钮单击时说要显示颜色选择器对话框

```
Button b= (Button) findViewById(R.id.button1);
b.setOnClickListener(new OnClickListener()
{
    public void OnClick(View v)
    {
        new ColorPickerDialog(FingerPaintActivity.this, FingerPaintActivity.this, mPaint.getColor()).show();
    }  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T11:59:29.813

我找到了这个：[https ://www.buzzingandroid.com/2012/11/hsv-color-picker-dialog](https://www.buzzingandroid.com/2012/11/hsv-color-picker-dialog)

由于 FloatMath 被贬值，我做了以下更改：

```
import java.lang.Math;
 //import android.util.FloatMath;

selectedPoint.x = rect.left + (int) ((float)-Math.cos( hueInPiInterval ) * colorHsv[1] * innerCircleRadius + fullCircleRadius);
selectedPoint.y = rect.top + (int) ((float)-Math.sin( hueInPiInterval ) * colorHsv[1] * innerCircleRadius + fullCircleRadius);
//selectedPoint.x = rect.left + (int) (-FloatMath.cos( hueInPiInterval ) * colorHsv[1] * innerCircleRadius + fullCircleRadius);
//selectedPoint.y = rect.top + (int) (-FloatMath.sin( hueInPiInterval ) * colorHsv[1] * innerCircleRadius + fullCircleRadius); 
```

` 这是我见过的最好的颜色选择器！非常易于使用且描述良好。希望它对你也有用。

# c# - 有没有办法固定 C# Windows 窗体应用程序的分辨率？

> ID：15767539
> 
> 赞同：0
> 
> 时间：2013-04-02T15:04:14.443
> 
> 标签：c#

我想修复我的主窗体的分辨率，我可以使用设置像素数

```
 this.Height = 480;
 this.Width = 640; 
```

但是我想要一些方法让它保持不变，这样即使帧被放大，像素的数量也不会改变，而是它们的大小。

通过将选项设置`AutoSizeMode`为`GrowAndShrink`I 可以防止通过拖动表单的边缘来重新调整表单的大小，但是当按下最大化按钮时，表单会变大并添加新的像素。我想允许重新调整表单的大小并将其置于最大化或全屏模式而不更改表单中的像素数，或者换句话说，如果当前像素扩大大小，而不是添加新像素。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:06:19.980

像素是固定单位。您可能会喜欢 WPF，因为它是基于矢量的系统。

# android - Android - 在智能手机和蓝牙模块之间路由音频的功能

> ID：15767540
> 
> 赞同：5
> 
> 时间：2013-04-02T15:04:15.570
> 
> 标签：android, audio, routing, bluetooth

这是我在 Stackoverflow 上的第一篇文章。过去几天我尝试在 android 智能手机上路由音频，但我找不到正确执行此操作的功能。

它用于制作蓝牙婴儿电话。

我需要在智能手机和蓝牙模块之间进行路由。蓝牙模块最初用于制作Handset、汽车免提、无线音箱……

我与项目音频方面的 A2DP 和 HFP（免提）配置文件进行通信。

我可以在设备之间建立“sco”连接（用于音频蓝牙交换的连接）并从蓝牙模块取回音频。但是当连接“sco”正常工作时，我无法再使用智能手机上的扬声器和麦克风。

我希望找到一种解决方案，在我的智能手机上使用音频，同时在我的蓝牙模块上使用音频。

我在[http://developer.android.com/index.html](http://developer.android.com/index.html)上搜索了路由音频的功能。

AudioManager 类具有一些功能来路由音频，例如 setRouting 或 setParameters，但我还没有任何结果。 [http://developer.android.com/reference/android/media/AudioManager.html](http://developer.android.com/reference/android/media/AudioManager.html)

您可以在下面看到我用来从婴儿手机端（蓝牙模块端）获取音频的代码：

```
boolean isRecording=true;
int buffersize = 8000;
byte[] buffer = new byte[buffersize];

//audio configuration and SCO Bluetooth connection. 
AudioManager aManager = (AudioManager) getSystemService(AUDIO_SERVICE);
android.os.Process.setThreadPriority(
            android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
aManager.startBluetoothSco();
aManager.setBluetoothScoOn(true);
aManager.setMode(AudioManager.MODE_IN_COMMUNICATION);

//AudioRecord configuation for recording audio from babyphone.
AudioRecord  arec = new AudioRecord(
            MediaRecorder.AudioSource.VOICE_COMMUNICATION,
            8000,
            AudioFormat.CHANNEL_IN_MONO,
            AudioFormat.ENCODING_PCM_16BIT,
            buffersize); 

//AudioTrack configuation for sending audio to smartphone speaker.                
AudioTrack  atrack = new AudioTrack(AudioManager.STREAM_VOICE_CALL,
                8000,
                AudioFormat.CHANNEL_OUT_MONO,
                AudioFormat.ENCODING_PCM_16BIT,
                buffersize,
                AudioTrack.MODE_STREAM);

atrack.setPlaybackRate(8000);

//start audio recording and playing.
arec.startRecording();
atrack.play();

while(isRecording) {
    arec.read(buffer, 0, buffersize);

    atrack.write(buffer, 0, buffer.length);
}

arec.stop();
atrack.stop() 
```

如果我不能将音频路由到智能手机扬声器并同时使用“sco”连接从 babyphone 端的麦克风取回音频，我需要尽快知道它以改变我的项目方向。

如果可能，智能手机端的 babyphone 程序需要在所有最近的智能手机上运行。

英语不是我的第一语言，所以有些句子可能不正确。

我愿意接受任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:01:39.473

A2DP 用于媒体播放，并且是单向的。SCO 用于通过 BT 进行语音通话/VoIP/录音，是双向的，但质量较低。

`IN_CALL`当您启用 BluetoothSco 并将模式设置为or`IN_COMMUNICATION`将被路由到 BT_SCO 输出设备时会发生什么（至少在我使用过的大多数/所有设备上）`STREAM_VOICE_CALL`，并且将根据输出设备选择输入设备（因为模式）这意味着BT_SCO输入设备。

我的建议——虽然我不能保证它可以在每台设备上运行——是**不要**将模式设置为`IN_COMMUNICATION`. 该`setBluetoothScoOn(true)`调用将在内部将录制的“强制使用”设置设置为 BT_SCO，并结合使用`DEFAULT`或`VOICE_RECOGNITION`AudioSource 应选择 BT_SCO 麦克风作为录制设备。
然而，同时从 BT_SCO 和内置麦克风录音可能证明不可能以便携式方式进行。
对于输出，您可以使用`RING`、`ALARM`或`MUSIC`流类型，当不在语音通话中时，它们应该被路由到内部扬声器而不是 BT_SCO。

# heroku - heroku db:push 不工作，还有什么我可以使用的吗

> ID：15767545
> 
> 赞同：0
> 
> 时间：2013-04-02T15:04:27.760
> 
> 标签：heroku, sqlite, taps

我有一个在本地运行 sqlite 的 rails 应用程序。`Taps Server Error: PGError: ERROR: time zone displacement out of range:`为了修复可怕的错误，我已经尝试了几乎所有推荐的方法。我尝试设置不同版本的 ruby​​，卸载并重新安装 taps gem 和 sqlite3 以及所有这些东西。

我想找到一个不同的解决方案。我认为如果有某种 rake 任务我可以用来导出 sqlite，然后我可以在 heroku 上运行另一个 rake 任务来查找 sqlite 转储并使用相同的数据，什么不是。这是一个可能的解决方案还是有人可以推荐更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:32:18.973

不要在本地使用 sqlite3 和远程使用 Postgres。请在此处查看我在本地迁移到 postgres 的其他答案，该答案还提供了有关使用 pgbackups 导入/导出数据的 Heroku 文档的链接：[https ://stackoverflow.com/a/15373024/95741](https://stackoverflow.com/a/15373024/95741)

# sql-server-2008 - 如何为触发器设置断点sql server 2008

> ID：15767546
> 
> 赞同：1
> 
> 时间：2013-04-02T15:04:28.393
> 
> 标签：sql-server-2008

嗨，我有大尺寸触发器。所以我必须检查值是否传递给触发器。所以如何在 sql server 2008 中为触发器设置断点。

# icarousel - 如何访问 iCarousel 项目视图数据？

> ID：15767549
> 
> 赞同：0
> 
> 时间：2013-04-02T15:04:37.640
> 
> 标签：icarousel

是否可以根据 iCarousel currentItemIndex 检索 iCarousel 特定项目数据？(ie) 假设我在 iCarousel 中有 10 个项目，每个项目都有一个 UILabel。我想访问 3 项 UILabel 文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:23:31.280

您可以通过使用 itemViewAtIndex: 来获取项目视图并在其子视图中查找标签来执行此操作。

这是错误的方法，你不应该在你的项目视图中存储数据。您必须最初从数据源中设置了该标签，因此要找出给定索引的标签文本，只需再次从您的模型中检索它（这可能是某种数组）。

# c# - c#将字符串编码为未知格式

> ID：15767556
> 
> 赞同：0
> 
> 时间：2013-04-02T15:04:54.703
> 
> 标签：c#, encoding, character

我知道一个转换特殊字符的网站，但我不知道什么是编码格式。示例：当我`uğur`在网站中搜索时，它会转换为`ug21ur`URL。是编码格式还是？如何在 C# 中将a 转换`ğ`为？`g21`

示例：[http ://www.behindthename.com/name/ug21ur](http://www.behindthename.com/name/ug21ur)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:19:17.023

它似乎不是“正式”编码。通常，URL 编码会产生：`u%C4%9Fur`.

[这是一个非常好的在线资源](http://rishida.net/tools/conversion/)，可用于转换为大多数编码。但是，在这种情况下，我看不到任何与`g21`您的角色相对应的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:19:45.407

这对您没有帮助，但我认为它特定于该网站，甚至不是真正的编码。一些例子：

```
uğur ug21ur
泽南 泽南
NAĎA nad18a
Naďa nad18a
NADĚŽDA nade18z18da

```

我认为这些名称是使用网站创建者设计的某种算法生成的。比如：如果字符是特殊的，后缀为 18。如果已经存在具有相同表示的名称，则增加数字。只是猜测，可能不正确。

[国际化也被缩写为 i18n。]

# google-maps - GoogleMap 不使用 DOCTYPE

> ID：15767557
> 
> 赞同：0
> 
> 时间：2013-04-02T15:04:56.233
> 
> 标签：google-maps

如果我在我的代码中留下 !DOCTYPE html，谷歌地图不起作用？我不能只是删除它，因为我的网站的其余部分都是废话吗？我在谷歌地图上做错了什么？以下是我的审查代码。在有和没有 !DOCTYPE html 的情况下运行它，你会明白我的意思。

```
<!DOCTYPE html>
<head>
<meta charset="utf-8"/>
<!-- Title Begins  -->
<title>TEST</title>
<!-- Title Ends -->

<!-- Meta-data Begins -->
<meta name="description" content="">
<meta name="keywords" content="">

<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<!-- Meta-data Ends -->

<!-- CSS Begins -->
<link href="/css/main.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/skins/menuskin.css" />
<link href="/css/accordiongrey.css" rel="stylesheet" type="text/css" />
<!-- CSS Ends -->

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Scripting Begins -->
<script type="text/javascript" src="/js/jQuery.js"></script>
<script type='text/javascript' src='/js/respond.min.js'></script>
<script type='text/javascript' src='/js/jquery.hoverIntent.minified.js'></script>
<script type='text/javascript' src='/js/jquery.dcmegamenu.1.3.3.js'></script>
<script type='text/javascript' src='/js/jquery.cookie.js'></script>
<script type='text/javascript' src='/js/jquery.hoverIntent.minified.js'></script>
<script type='text/javascript' src='/js/jquery.dcjqaccordion.2.7.min.js'></script>
<script type='text/javascript' src='/js/jquery.zrssfeed.js'></script>

<script type="text/javascript">

$(document).ready(function() {

// ADD CLASS TO MAIN MEGA MENU NAVIGATION
$(".white > ul").eq(0).addClass("mega-menu").attr("id", "mega-menu-9"); 

// SETUP MEGA MENU
$('#mega-menu-9').dcMegaMenu({
rowItems: '3',
speed: 'fast',
effect: 'fade'
});

$(".whiteB > ul").eq(0).addClass("accordion").attr("id", "accordion-2");

$('#accordion-2').dcAccordion({
eventType: 'click',
autoClose: false,
saveState: false,
disableLink: true,
speed: 'fast',
classActive: 'test',
showCount: false
});

var pull        = $('#menu');
                menu        = $('#mainNavAcord');
                menuHeight  = menu.height();

$(pull).on('click', function(e) {
                e.preventDefault();
                menu.slideToggle();
            });

            $(window).resize(function(){
                var w = $(window).width();
                if(w > 320 && menu.is(':hidden')) {
                    menu.removeAttr('style');
                }
            });

    $('#blog').rssfeed('');

});
</script>

<!-- Scripting Ends -->        

</head>
<body>
<div id="wrapper">

<!--start header--> 
<div id="header">

<div id="headMenu" style="float:left; width: 8%; padding: 1%">
<a href="/pages/1/Home"><img src="/images/home.png" alt="Home" class=".iconNav"></a><br>
<img src="/images/menu.png" alt="Menu" class=".iconNav" id="menu"><br>
<a href="" target="_blank"><img src="/images/donate.png" alt="Twitter" class=".iconNav"></a>
</div>

<div id="headLogos" style="float:left;  width: 80%;">
<img src="/images/logo.jpg" alt="Logo" id="Logo">
</div>

<div id="headIcons" style="float:left;  width: 10%; text-align:center;">

<a href="http://www.twitter.com" target="_blank"><img src="/images/twitter.png" alt="Follow On Twitter" class="socials"></a><br>
<a href="http://www.facebook.com"  target="_blank"><img src="/images/facebook.png" alt="Follow On Facebook" class="socials"></a><br>
<a href="http://www.youtube.com"  target="_blank"><img src="/images/youtube.png" alt="Follow On YouTube" class="socials"></a>

</div>

<div style="clear:both"></div>
</div>
<!--end header-->

<div style="clear:both"></div>

<div id="main"><!--start main-->

<div id="columnLeft">

<div id="mainNavAcord"><!--start mainNav-->

</div><!--end mainNav-->

</div>

<div id="columnRight">

<h1>Route Tracker</h1>
<style type="text/css">
      #map-canvas { height: 50%; width: 100% }
    </style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAFuZxfIaJWtXtKW7V1r-cG7q--EcxsXYo&sensor=false">
    </script>
    <script type="text/javascript">

    var locations = [
      ['toronto', 43.653226,-79.383184, 4]
    ];

      function initialize() {
  var theGirls = new google.maps.LatLng(55.16994,-118.798615);
  var theDonations = new google.maps.LatLng(42.680986, -80.332176);
  var myLatLng = new google.maps.LatLng(56.130366, -106.346771);
  var mapOptions = {
    zoom: 3,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

  var infoWindow = new google.maps.InfoWindow;

  var map = new google.maps.Map(document.getElementById("map-canvas"),
      mapOptions);

var locations = [
      ['<p></p>', 53.277963,-110.006145, 1, '/bikes.png'],
      ['<p></p>', 46.803283, -71.242796, 2, '/money.png']
    ];

    var infowindow = new google.maps.InfoWindow();

    var marker, i;

    for (i = 0; i < locations.length; i++) {  
    var image = locations[i][4];
    //var image = 'bike.png';
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
        map: map,
        icon: image,
      });

      google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
        }
      })(marker, i));
      }

  var flightPlanCoordinates = [
    new google.maps.LatLng(47.560541, -52.712831), // St John's Sydney
    new google.maps.LatLng(46.13679, -60.194224), // To Antigonish
    new google.maps.LatLng(45.622661, -61.992802), // To Charlottetown
    new google.maps.LatLng(46.23824, -63.13107), // To Moncton
    new google.maps.LatLng(47.835957, -69.535985), // To Riverie du loup
    new google.maps.LatLng(46.803283, -71.242796), // To Quebec City
    new google.maps.LatLng(45.50867, -73.553992) ,// To Montreal
    new google.maps.LatLng(45.42153, -75.697193), // To Ottawa
    new google.maps.LatLng(43.653226, -79.383184), // To Toronto
    new google.maps.LatLng(43.250021, -79.866091), // To Hamilton
    new google.maps.LatLng(42.680986, -80.332176), // To Turkey Point
    new google.maps.LatLng(43.434311,-80.477747), // To Kitchener
    new google.maps.LatLng(44.629602,-81.265082), // To Sauble Beach
    new google.maps.LatLng(46.265718,-81.771057), // To Espanola
    new google.maps.LatLng(48.380895,-89.247682), // To Thunder Bay
    new google.maps.LatLng(51.213889,-102.462778), // To Yorkton
    new google.maps.LatLng(52.13437,-106.647656), // To Saskatoon
    new google.maps.LatLng(52.776475,-108.297455), // To North Battlefordd
    new google.maps.LatLng(53.277963,-110.006145), // To North Lloydminster
    new google.maps.LatLng(52.879277,-118.079256), // To North Jasper
    new google.maps.LatLng(53.406541,-117.570033), // To Hinton
    new google.maps.LatLng(55.16994,-118.798615), // To Grande Praire
    new google.maps.LatLng(55.759627,-120.237662), // To Dawson Creek
    new google.maps.LatLng(58.805017,-122.697236), // To Ft Nelson
    new google.maps.LatLng(59.422611,-126.097126), // To Laird River Hot Springs
    new google.maps.LatLng(60.058091,-128.68423), // To Frank Trail
    new google.maps.LatLng(60.087499,-130.606604), // To Rancheria
    new google.maps.LatLng(60.222771,-132.764975), // To Telsin
    new google.maps.LatLng(60.721187,-135.056845), // To Whitehorse
    new google.maps.LatLng(60.754454,-137.511782), // To Hainse Junction
    new google.maps.LatLng(61.252472,-138.800831), // To Destruction
    new google.maps.LatLng(62.385278,-140.893056), // To Beaver Creek

  ];

  var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  flightPath.setMap(map);

}

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    <div id="map-canvas"></div> 
</div>

<div style="clear: both;"></div>

</div><!--end main-->

<div style="clear:both"></div>

<div id="sponsors"><!--start sponsors-->
<hr>
&nbsp;&nbsp;&nbsp;<strong>Our Sponsors</strong><br>
<img src="/images/sponsorPanel.jpg" alt="Sponsor Panel" width="100%"><br><br>
</div>

<div id="footer"><!--start footer-->
<p>Site By <a href="" target="_blank"><img src="" alt="Barber and Veri"></a></p>

</div><!--end footer-->     

</div><!--end wrapper-->

<script>
//jQUERY TO ADD AN ONCLICK FUNCTION FOR TRACKING
// PDF CLICKS ON THE SiTE
$("a[href$='pdf']").each(function(index) {
pdfLabel = $(this).attr('href');
pdfOnClick = "_gaq.push(['_trackEvent', 'PDF', 'Download', '" + pdfLabel + "']);";
$(this).attr("onClick", pdfOnClick);
});
</script>

<script type="text/javascript">
//GOOGLE ANALYTICS CODE
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:19:21.720

将 div "map-canvas" 的高度设置为绝对值（例如 500 像素）会再次显示地图。

```
 #map-canvas { height: 500px; width: 100% } 
```

# c# - 从 ActionFilter 中的对象显式转换

> ID：15767558
> 
> 赞同：0
> 
> 时间：2013-04-02T15:04:57.167
> 
> 标签：c#, c#-4.0, asp.net-mvc-4, implicit-conversion, action-filter

目标是创建一个 ActionFilter 来自动保存所有联系人。

## 代码：

**视图模型**

`Origem`用于标识已保存联系人的视图来源（本例中只有两个视图 contato`ContatoViewModel`和 Careers `TrabalheConoscoViewModel`）

```
public class ContatoViewModel
{
    public string Nome { get; set; }
    public string Email { get; set; }
    public string Assunto { get; set; }
    public string Mensagem { get; set; }

    public static explicit operator Contato(ContatoViewModel vm)
    {
        return new Contato { Nome = vm.Nome, Email = vm.Email, PrimeiroContato = DateTime.Now, Origem = OrigemContato.Contato };
    }
}

public class TrabalheConoscoViewModel
{
    public string Nome { get; set; }
    public string Email { get; set; }
    public string Mensagem { get; set; }
    public HttpPostedFileBase Arquivo { get; set; }

    public static explicit operator Contato(TrabalheConoscoViewModel vm)
    {
        return new Contato{ Nome = vm.Nome, Email = vm.Email, PrimeiroContato=DateTime.Now, Origem = OrigemContato.Candidato };
    }
} 
```

**筛选**

```
public class LogContatoAttribute : ActionFilterAttribute
{
    private readonly string _paramName;
    private object _paramValue = null;
    public LogContatoAttribute(string paramName = "vm")
    {
        _paramName = paramName;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.ActionParameters.ContainsKey(_paramName))
            _paramValue = filterContext.ActionParameters[_paramName];
        else
            throw new ArgumentException("Parâmetro não encontrado.", _paramName);
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var a = (Contato)_paramValue; //Error!!!!

        // Save in database

    }
} 
```

**行动**

```
public ActionResult contato()
{
    return View(new ContatoViewModel());
}

[HttpPost]
[ValidateAntiForgeryToken]
[LogContato("vm")]
public ActionResult contato(ContatoViewModel vm)
{
    if (ModelState.IsValid)
    {
        new mailController().contato(vm).Deliver();
        return RedirectToRoute("Default", new RouteValueDictionary { { "controller", "home" }, { "action", "contato" } });
    }

    ModelState.AddModelError("", "Não foi possível enviar sua mensagem.");
    return View(vm);
} 
```

## 错误

```
System.InvalidCastException was unhandled by user code
  HResult=-2147467262
  Message=Unable to cast object of type 'CreditoImobiliarioBB.WebSite.ViewModels.ContatoViewModel' to type 'CreditoImobiliarioBB.WebSite.Models.Contato'.
  Source=CreditoImobiliarioBB.WebSite
  StackTrace:
       at CreditoImobiliarioBB.WebSite.Infra.Filters.LogContatoAttribute.OnActionExecuted(ActionExecutedContext filterContext) in w:\Clients\creditoimobiliariobb\website\src\CreditoImobiliarioBB.WebSite\Infra\Filters\LogContato.cs:line 27
       at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
       at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
  InnerException: 
```

![错误](https://i.stack.imgur.com/wD4aF.png)

## 问题

我相信这是因为它`_paramValue`是一个对象。如何从对象隐式转换？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:34:41.237

异常肯定是由于您调用转换的类型是`object`.

您也不能从基本`object`类型创建隐式转换。在能够使用隐式转换器之前，您需要转换为正确的类型。

我不喜欢使用隐式/显式转换运算符。我更喜欢像 AutoMapper 这样的 propper 映射解决方案。

# c# - 在 C# 中使用母版页和 Web 表单

> ID：15767562
> 
> 赞同：0
> 
> 时间：2013-04-02T15:05:18.480
> 
> 标签：c#, asp.net

使用母版页时，无论如何我可以看到当前加载或加载到母版页中的 Web 表单，所以在此行之前：

```
<asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

</asp:ContentPlaceHolder> 
```

我想查看/获取将要加载到母版页中的 Web 表单，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:17:51.197

`Page`是的，您可以从母版页访问该属性。

要查看实际情况，请从 ASP.NET Web 应用程序（带有母版页）的默认 Visual Studio 模板中，将其转储到`h1`标题为的母版中：

```
My ASP.NET Application <%= Page.GetType().Name %> 
```

它将在浏览器中显示为`My ASP.NET Application default_aspx`您所在的任何页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:12:02.293

我不知道您是否有权访问正在加载的页面，但是您可以在名为 eg 的母版页上创建一个公共属性，`currentPage`并将其设置为`Page_Load`您想要的值。这样您就可以在 Site.Master 代码上查看它：

```
// on the Site.Master.cs
public string CurrentPage;

// on the page, inside the Page_Load event
((Site)this.Master).CurrentPage = 'My page';

// on the Site.Master
<%
if (CurrentPage == "My page")
{
    %>My page is loaded.<%
}
else
{
    %>Another page is loaded.<%
} 
```

# php - 当我们不允许访问该文件时，我们是否仍然能够“即时”重新配置 php.ini？

> ID：15767564
> 
> 赞同：0
> 
> 时间：2013-04-02T15:05:23.933
> 
> 标签：php, laravel, cpanel, whm

我正在使用 Laravel 框架，当我将 Laravel 应用程序放在共享主机上时出现问题。当我执行我的网站网址时，会出现以下消息；

```
Unhandled Exception

Message:

Directive 'safe_mode' is deprecated in PHP 5.3 and greater
Location:

Unknown on line 0 
```

我用那个关键字四处搜索。我发现上面的消息出现是因为我的 php.ini **safe_mode**是**on**。

我执行 phpinfo() 并告诉我 php.ini 路径是 /usr/local/lib/php.ini

这让我很失望 :( 因为我无法访问 php.ini。（我使用的是 cPanel 和 WHM 11 共享主机。）

你能告诉我这个问题的任何其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:50:33.980

但您也可以在根文件夹中使用自定义 php.ini。如果它也不起作用，您可以使用`.htaccess`通过添加以下内容之一：

```
php_value safe_mode off

php_flag safe_mode off 
```

`suPHP`如果未启用，这些都是有效的。如果`suPHP`已启用，您可以查看以下文章，希望对您有所帮助： [http ://blog.philipbrown.id.au/2009/08/php-suexec-and-custom-php-ini-files/](http://blog.philipbrown.id.au/2009/08/php-suexec-and-custom-php-ini-files/)

# validation - ASP.net MVC 4 实体验证错误

> ID：15767565
> 
> 赞同：0
> 
> 时间：2013-04-02T15:05:26.123
> 
> 标签：validation, asp.net-mvc-4, view

创建新学生时，它现在不再需要执行 db.SaveChanges() 给出验证错误：需要 Student_Nummer。即使该字段是自动增量字段。

控制器：

```
[HttpPost]
public ActionResult Create(Tbl_Student tbl_student)
{
    if (ModelState.IsValid)
    {
        try 
        {
            db.Tbl_Student.Add(tbl_student);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        catch (DbEntityValidationException dbEx)
        {
            foreach (var validationErrors in dbEx.EntityValidationErrors)
            {
                foreach (var validationError in validationErrors.ValidationErrors)
                {
                    Trace.TraceInformation("Property: {0} Error: {1}",
                        validationError.PropertyName, validationError.ErrorMessage);
                }
            }
        }

    }

    return View(tbl_student);
} 
```

风景：

```
@model PVBMVC.Tbl_Student

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(false)

    <fieldset>
        <legend>Tbl_Student</legend>

        @Html.HiddenFor(model => model.Student_Nummer)

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Id)
            @Html.ValidationMessageFor(model => model.Student_Id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Roepnaam)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Roepnaam)
            @Html.ValidationMessageFor(model => model.Student_Roepnaam)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_TussenV)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_TussenV)
            @Html.ValidationMessageFor(model => model.Student_TussenV)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Achternaam)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Achternaam)
            @Html.ValidationMessageFor(model => model.Student_Achternaam)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Adres)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Adres)
            @Html.ValidationMessageFor(model => model.Student_Adres)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Postcode)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Postcode)
            @Html.ValidationMessageFor(model => model.Student_Postcode)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Woonplaats)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Woonplaats)
            @Html.ValidationMessageFor(model => model.Student_Woonplaats)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Telefoon)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Telefoon)
            @Html.ValidationMessageFor(model => model.Student_Telefoon)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_GeboorteDatum)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_GeboorteDatum)
            @Html.ValidationMessageFor(model => model.Student_GeboorteDatum)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Geslacht)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Geslacht)
            @Html.ValidationMessageFor(model => model.Student_Geslacht)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_TelefoonNR1)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_TelefoonNR1)
            @Html.ValidationMessageFor(model => model.Student_TelefoonNR1)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_TelefoonNR2)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_TelefoonNR2)
            @Html.ValidationMessageFor(model => model.Student_TelefoonNR2)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_GeboortePlaats)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_GeboortePlaats)
            @Html.ValidationMessageFor(model => model.Student_GeboortePlaats)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Opleiding)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Opleiding)
            @Html.ValidationMessageFor(model => model.Student_Opleiding)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Leerplicht)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Leerplicht)
            @Html.ValidationMessageFor(model => model.Student_Leerplicht)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_VorigeSchool)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_VorigeSchool)
            @Html.ValidationMessageFor(model => model.Student_VorigeSchool)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Email)
            @Html.ValidationMessageFor(model => model.Student_Email)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Klas_Id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Klas_Id)
            @Html.ValidationMessageFor(model => model.Klas_Id)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Student_Wachtwoord)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Student_Wachtwoord)
            @Html.ValidationMessageFor(model => model.Student_Wachtwoord)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

# oracle10g - 流水线函数

> ID：15767566
> 
> 赞同：1
> 
> 时间：2013-04-02T15:05:26.593
> 
> 标签：oracle10g

您能否向我解释一下：我在包规范中有以下内容，而不是使用 Oracle 10g 的正文。

```
TYPE t_fraud_ext IS TABLE OF FI_RPT.FI_Fraud_OBJ;

FUNCTION fraud_ext_Sql
(   schema_name  IN VARCHAR2
, select_beginning_business_date     IN DATE     – Start Date
, select_thru_business_date  IN DATE     – End Date
, select_beginning_business_time     IN VARCHAR2     – Start Time
, select_thru_business_time  IN VARCHAR2     – End Time
) RETURN VARCHAR2;

FUNCTION fraud_ext
(   schema_name  IN VARCHAR2
, select_beginning_business_date     IN DATE     – Start Date
, select_thru_business_date  IN DATE     – End Date
, select_beginning_business_time     IN VARCHAR2     – Start Time
, select_thru_business_time  IN VARCHAR2     – End Time
) RETURN t_fraud_ext PIPELINED; 
```

这些有什么关系？从未使用过流水线功能。

我也喜欢一个关于如何在包规范/正文中使用管道功能的非常详细的示例。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:24:07.383

假设您只有规范，我们无法判断是否`fraud_ext_Sql`由 调用`fraud_ext`，但它在流水线函数的上下文中无关紧要。

要使用流水线函数，您可以从基本数组/嵌套表类型开始。例如：

```
SQL> create type test_typ as object (id number, txt varchar2(20));
  2  /

Type created.

SQL> create type test_tab as table of test_typ;
  2  /

Type created. 
```

所以`test_tab`将在流水线输出中使用。我们也可以有一个标量数组/嵌套表。例如，这也适用于流水线函数：

```
SQL> create type test_tab as table of varchar2(20);
  2  /

Type created. 
```

一旦有了基本类型，就可以将函数定义为流水线。在下面的示例中，我将函数封装在一个包中，但这不是必需的；也可以使用独立功能。

```
SQL> create package test_pkg
  2  as
  3    function get_data(p_id number)
  4    return test_tab pipelined;
  5  end;
  6  /

Package created. 
```

`pipelined`关键字是关键。包体如下：

```
SQL> create package body test_pkg
  2  as
  3
  4    function get_data(p_id number)
  5    return test_tab pipelined
  6    is
  7    begin
  8      for idx in 1..p_id
  9      loop
 10        pipe row(test_typ(idx, dbms_random.string('x', 2)));
 11      end loop;
 12    end get_data;
 13
 14  end;
 15  /

Package body created. 
```

该`PIPE ROW`命令将一行泵回客户端。这（与常规函数不同）立即将行返回给客户端（即，它不会等待整个集合在发送回行之前实现）您将看到由客户端中的 arraysize 设置控制的成批返回的行。这样做的好处是 Oracle 在将数据发送回客户端之前不需要将整个数组保存在内存中。

因此，要调用流水线函数，您可以`table`像这样使用该函数：

```
SQL> select *
  2    from table(test_pkg.get_data(10));

        ID TXT
---------- --------------------
         1 3B
         2 AM
         3 1J
         4 36
         5 8I
         6 BM
         7 LS
         8 ON
         9 5Z
        10 D7

10 rows selected. 
```

如果你有一个标量数组，就像我之前提到的那样，该`pipe row`命令只是直接具有值，其中没有任何类型名称：

```
SQL> create type test_tab as table of varchar2(20);
  2  /

Type created.

SQL>
SQL> create package test_pkg
  2  as
  3    function get_data(p_id number)
  4    return test_tab pipelined;
  5  end;
  6  /

Package created.

SQL> create package body test_pkg
  2  as
  3
  4    function get_data(p_id number)
  5    return test_tab pipelined
  6    is
  7    begin
  8      for idx in 1..p_id
  9      loop
 10        pipe row(dbms_random.string('x', 2));
 11      end loop;
 12    end get_data;
 13
 14  end;
 15  /

Package body created.

SQL> select *
  2    from table(test_pkg.get_data(10));

COLUMN_VALUE
--------------------
GS
MJ
PF
D6
NG
WO
22
MV
96
8J 
```

# javascript - JavaScript 中的三维对象

> ID：15767572
> 
> 赞同：2
> 
> 时间：2013-04-02T15:05:34.467
> 
> 标签：javascript, oop

我正在尝试在 JavaScript 中创建三维对象。我希望能够运行这样的东西：

```
object1().object2().object3(); 
```

但我不希望“object3()”能够像这样被访问：

```
object1().object3(); 
```

当我尝试这个时：

```
function object1(){
    alert("object 1");
    function object2(){
        alert("object 2");
        function object3(){
            alert("object 3");
        }
    }
} 
```

它运行第一个警报，但随后 chrome 给了我这个错误：

```
TypeError: Object #<object1> has no method 'object2' 
```

当我尝试这个时：

```
function object1(){
    alert("object 1");
    this.object2 = function(){
        alert("object 2");
        this.object3 = function(){
            alert("object 3");
        }
    }
} 
```

它运行前两个，然后 chrome 给我这个错误：

```
TypeError: Cannot call method 'object3' of undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:10:09.113

要进行方法调用链接，您需要返回对以下内容的引用`this`：

```
function object1(){
    alert("object 1");
    this.object2 = function(){
        alert("object 2");
        this.object3 = function(){
            alert("object 3");
        }
        return this;
    }
    return this;
} 
```

（工作）在这里小提琴：http: [//jsfiddle.net/MmJjR/](http://jsfiddle.net/MmJjR/)

（作为旁注，这不是“三维对象”。对象不像数组。这些是嵌套对象，其中每个对象都有对下一个“子”对象的引用。很容易理解你的意思，只是想我会在那里扔一个术语提示。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:11:33.987

```
object1 = function(){
    console.log("object 1");
    this.object2 = function(){
        console.log("object 2");
        this.object3 = function(){
            console.log("object 3");
        }
        return this;
    }
    return this;
}

object1().object2().object3() 
```

也许是这样的？

[http://jsfiddle.net/rd13/T2EG2/](http://jsfiddle.net/rd13/T2EG2/)

# android - 如何读取通过 HttpPost 从 android 发送到 Rest web 服务的 Json 数据

> ID：15767581
> 
> 赞同：1
> 
> 时间：2013-04-02T15:06:02.080
> 
> 标签：android, web-services, http, rest

我是 Web 服务开发的新手，在这个特定的步骤中我有点迷茫。我正在从 Android 手机发送 JSON 数据（它只是我在两个 EditTexts 中输入的文本，我需要在我的 java 应用程序中恢复）到 Restful Web 服务，并希望获取该数据并在数据库中搜索它。

在 Android 中，我使用了一个简单的 httpPost 来发送信息。

这是我的安卓代码：

```
 Map<String, String> comment = new HashMap<String, String>();    
    comment.put(login.getText().toString(),"Using the GSON library");
    comment.put(pswd.getText().toString(),"Using libraries is convenient.");                    
    String json = new GsonBuilder().create().toJson(comment,Map.class);                     
    makeRequest("http://10.0.2.2:8080/com.WebService/rest/hello",json); 
```

然后，http帖子

```
 HttpPost httpPost = new HttpPost(uri);
    httpPost.setEntity(new StringEntity(json));
    httpPost.setHeader("Accept", "application/json");
    httpPost.setHeader("Content-type", "application/json");
    return new DefaultHttpClient().execute(httpPost); 
```

我的问题是：我应该在我的 java web 服务中做什么来接收这些数据，并在以后做任何我想做的事情。（我对@Post 和@Put 感到困惑，我什至不确定这是否是我真正需要的）

# c++ - 将函数作为参数传递时出现错误 LNK2019“未解析的外部符号”

> ID：15767584
> 
> 赞同：0
> 
> 时间：2013-04-02T15:06:09.207
> 
> 标签：c++, function-pointers, typedef, linker-errors

我正在尝试将函数作为 C++ 中的参数传递。我不断收到 LNK2019 未解决的外部符号错误。

我已经阅读了这些内容，并在过去修复了这些内容，但我无法弄清楚我在这里做错了什么。

# 主文件

该错误似乎发生在我的显示函数中的 TreeItemType 引用中。

```
include "PhoneBook.h"  
include "PhoneEntry.h"  
include "bst.h"   
using namespace std;  
using namespace p04NS;  

void display(TreeItemType& item);

int main() {

    PhoneEntry test = PhoneEntry("first", "last", "618-580-0680");
    bst * tree = new bst();

    TreeItemType foo = TreeItemType(); // test type reference, no error

    tree->insert(test);

    tree->inorder(display);

    system("pause");
    return 0;
}

void display(TreeItemType& item){
    cout << "hello worlds!";
} 
```

# bst.h

TreeItemType typedef 在这里定义。

```
namespace p04NS {

    typedef PhoneEntry TreeItemType;
    typedef string KeyType;

    // Pointer to a function that can be used to display the item.
    typedef void (*FunctionType)(const TreeItemType& item);

    class bst { //some codez  }

} 
```

# 调试说明：

我尝试在 main 中使用这种类型，并且没有收到错误。另外，无论我是否注释掉该函数的用法，它是否都会出错。所以这似乎是我的函数定义的问题，而不是它的用法。

任何帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:11:28.833

```
void display(TreeItemType& item){ 
```

和

```
typedef void (*FunctionType)(const TreeItemType& item); 
```

指出不同？提示，它以字母“c”开头。

但是，鉴于此代码不应编译。所以你一定还有其他问题。始终发布真实代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:15:01.807

当我没有写函数定义时，我通常会得到这个错误，只有声明。例如，当我像这样注释掉 void AITank::obstructed() 的实现时：

```
//void AITank::obstructed()
//{
//    // some code here
//} 
```

但我在某处调用了该函数（并且在 AITank.h 文件中仍然有 void obeded();）

我得到：

错误 LNK2019：在函数“public: void __thiscall Game::play(void)”(?play@游戏@@$$FQAEXXZ)

查看该行的内容，看看它是否告诉您缺少哪个功能。

# ios - 复杂的 UITableView/UITableViewCell 和性能

> ID：15767586
> 
> 赞同：0
> 
> 时间：2013-04-02T15:06:21.383
> 
> 标签：ios, uiview, uitableview, calayer

我有一个带有复杂形式的子视图的表格视图。

上面是一个标题（不是 UITableview 的一部分，也没有问题），但是当有很多行时，该标题下的所有内容都呈现得很慢。每个单元格都有一个标签和一个背景图像，其中有几个可能的图像，如蓝色边框和三角形。

一般来说，我正在寻找最好的解决方案来进行这种复杂的 UITableView 渲染。

也许与CALayer一起工作？

![在此处输入图像描述](https://i.stack.imgur.com/ml6FA.png)

# php - 不会过期的缓存

> ID：15767591
> 
> 赞同：0
> 
> 时间：2013-04-02T15:06:39.617
> 
> 标签：php, caching

我正在用 PHP 开发一个电子商务系统。我总是想向客户显示更新的数据，但内存缓存是必要的。我在计算是否有没有过期的缓存，并在数据更新时删除缓存。或者这是不好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:47:54.260

我在一个流量相当大的拍卖网站上工作，我们必须做很多缓存来保持网站正常运行。

我们使用了两种缓存失效：

**积极的**

对于任何变化很快的东西，我们都会使用主动失效。对我们来说，它是出价/在任何特定时刻一件物品的成本。我们会无限期地缓存这些信息，当有人出价时，我们会主动清除缓存。

不过，我们将主动清除保持在绝对最低限度。

此外，您还想确保您是否主动清除缓存对象……确保它只存在于一个地方。尝试在缓存中搜索所有实例并随处更改它们太痛苦了。

**被动的**

这是您给对象一个生存时间 (TTL) 并让它自己优雅地过期的地方。将它用于可以承受有点陈旧的东西。

我们对 95% 的数据采用了这种方法，并且效果很好。

与主动失效不同，它也很容易编程。

* * *

对于主动和被动缓存失效......我不会说任何一个都是不好的做法。

# logging - WSO2 数据服务 - 是否有任何机制来记录调用操作的 IP？

> ID：15767593
> 
> 赞同：0
> 
> 时间：2013-04-02T15:06:47.083
> 
> 标签：logging, wso2, wso2dss

我们需要记录在我们的系统中进行任何操作的 ip、日期时间和用户以进行登录。有没有一种简单/快速的方法来做到这一点？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T09:13:29.350

您还可以将我们的 MT-Logging 架构与 BAM 一起使用，我们在其中存储上述信息，例如记录 ip、日期时间和用户。请参考 [1] 使用 WSO2 BAM 配置分布式 MT-Logging。

[1] - [http://sparkletechthoughts.blogspot.com/2012/10/how-to-configure-mt-logging-with-wso2.html](http://sparkletechthoughts.blogspot.com/2012/10/how-to-configure-mt-logging-with-wso2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:00:39.113

您可以根据需要编写自定义日志记录模块并将其部署在 wso2dss 服务器中。这是有关如何编写自定义日志记录模块的[参考。](http://vvratha.blogspot.com/search/label/log4j)基本上，您可以在axis2 级别选择上述信息并进行日志记录。

# c# - 特殊数据列的自定义排序

> ID：15767595
> 
> 赞同：1
> 
> 时间：2013-04-02T15:06:50.473
> 
> 标签：c#

我有一个数据集，我用一个名为 的特殊列显示`4_Most_Previlent`。它的数据类型是字符串，格式如下：Item1-Item2-Item3-Item4。

以下是该列的一些值的示例：

```
Cl-K-Be-Li
K-Cl-He-O
Cu-Mn-Ca-Cl
Cr-Cu-Mn-Cu
Cu-Cr-Mn-Cu
Cr-Cu-Ca-S 
```

我喜欢根据此列自定义项目，您可以说第一个和第二个元素需要相同，但可以互换。所以它就像 AB|CD 或 BA|CD。因此，在我上面的示例中，前 2 个项目将彼此相邻排序，因为它们都以相同的 2 个项目开头，但它们被转置了。底部 3 也将彼此相邻排序。

关于如何做到这一点和/或 C# 中的代码片段的任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:13:44.057

我会将字符串包装在一个类中，然后您可以根据`IComparable`需要自由实现。

例如：

```
class SomeRecord : IComparable<SomeRecord> {
    public SomeRecord(string line) {
        string[] fields = line.Split('-');
        Item1 = fields[0];
        Item2 = fields[1];
        Item3 = fields[2];
        Item4 = fields[3];
    }
    public string Item1 { get;set; }
    public string Item2 { get;set; }
    public string Item3 { get;set; }
    public string Item4 { get;set; }

    int IComparable<SomeRecord>.CompareTo(SomeRecord other) {
        // implement your custom logic here, returning -1, 0, or 1
    }
} 
```

完成此操作后，您可以使用默认排序器对它们进行排序。

# c# - 使用 ado.net 实体对象插入多个表

> ID：15767596
> 
> 赞同：1
> 
> 时间：2013-04-02T15:06:52.820
> 
> 标签：c#, asp.net, entity-framework-4

我想使用实体框架 4.0 在多个表中插入记录

我的数据库包含 2 个表

```
 1\. Student (StudentID - PrimaryKey)
 2\. Standard (StudentID - ForeignKey) 
```

如何一次将值添加到这些表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:49:20.790

试试这个：

```
Student student = new Student();
...
Standard standard = new Standard();
standard.Student = student;

/* Commit it */ 
```

# jsf - FaceletViewHandlingStrategy$MethodRetargetHandlerManager$ArbitraryMethodRegargetHandler.retarget 的 java.lang.NullPointerException

> ID：15767598
> 
> 赞同：2
> 
> 时间：2013-04-02T15:06:53.317
> 
> 标签：jsf, nullpointerexception, composite-component

我创建了一个 JSF 复合组件来验证一些电话号码。如果我将原始代码直接放在页面上，一切正常，但是当我尝试在 CC 中使用代码时，页面加载时会出现 NPE。

中央委员会：

```
<!-- INTERFACE -->
<cc:interface>
    <cc:attribute required="true" name="gridID"/>
    <cc:attribute required="true" name="coutry"/>
    <cc:attribute required="true" name="listener"/>
    <cc:attribute required="true" name="number"/>
    <cc:attribute required="true" name="validator"/>
    <cc:attribute required="true" name="groupID"/>
</cc:interface>

<!-- IMPLEMENTATION -->
<cc:implementation>
    <h:panelGrid id="#{cc.attrs.gridID}" 
                 columns="5">

        <h:outputText  value="Telephone*:"
                       styleClass="field-label"
                       style="margin-right: 22px"/>  
        <pou:selectOneMenu value="#{cc.attrs.coutry}" 
                           effect="fade"
                           required="true"
                           requiredMessage="Telephone country is required">  
            <f:selectItem itemLabel="#{web['W0033']}" 
                          itemValue="" />  
            <f:selectItems value="#{worldCountriesUtilMb.listAll()}"/> 
            <pou:ajax listener="#{cc.attrs.listener}" 
                      update="#{cc.attrs.groupID}" />
        </pou:selectOneMenu>

        <pou:inputText value="#{cc.attrs.number}"
                       required="true"
                       requiredMessage="Telephone number is required"
                       style="margin-left: 10px">
            <pou:ajax event="keyup" 
                      listener="#{cc.attrs.listener}" 
                      update="#{cc.attrs.groupID}" />

        </pou:inputText>

        <h:panelGroup id="#{cc.attrs.groupID}"
                      style="margin-left: 10px">
            <pou:graphicImage value="#{publicURLGeneratorMb.s3Icon('cross-grey-1.svg')}"
                              width="20"
                              height="20"
                              rendered="#{!cc.attrs.validator}"/>

            <pou:graphicImage value="#{publicURLGeneratorMb.s3Icon('tick-blue-1.svg')}"
                              width="20"
                              height="20"
                              rendered="#{cc.attrs.validator}"/>

            <!-- Phone number validation -->
            <h:inputHidden value="#{cc.attrs.validator}"
                           validator="booleanTrueRequired"
                           required="true"
                           requiredMessage="Please make sure the phone number is valid."
                           rendered="#{!cc.attrs.validator}"/>

        </h:panelGroup>

    </h:panelGrid>
</cc:implementation> 
```

我如何使用它：

```
<ez:phone-validator 
    gridID="panelGrid3" 
    coutry="#{profileMb.roleOneProfileObj.phoneNumber.country}" 
    listener="#{profileMb.roleOneProfileObj.phoneNumber.validatePhoneNumber()}" 
    number="#{profileMb.roleOneProfileObj.phoneNumber.localNumber}" 
    groupID="valid-number" 
    validator="#{profileMb.roleOneProfileObj.phoneNumber.validNumber}"/> 
```

堆栈跟踪：

```
WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
    at com.sun.faces.application.view.FaceletViewHandlingStrategy$MethodRetargetHandlerManager$ArbitraryMethodRegargetHandler.retarget(FaceletViewHandlingStrategy.java:1767)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.retargetMethodExpressions(FaceletViewHandlingStrategy.java:731)
    at com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.applyNextHandler(CompositeComponentTagHandler.java:201)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:196)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:196)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:196)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at com.sun.faces.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:106)
    at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:178)
    at com.sun.faces.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:395)
    at com.sun.faces.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:366)
    at com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:111)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:196)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:87)
    at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:320)
    at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:379)
    at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:358)
    at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
    at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:87)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:164)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:870)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:99)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
    at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
    at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
    at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
    at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:383)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T15:41:44.710

```
java.lang.NullPointerException
    at com.sun.faces.application.view.FaceletViewHandlingStrategy$MethodRetargetHandlerManager$ArbitraryMethodRegargetHandler.retarget(FaceletViewHandlingStrategy.java:1767) 
```

基于[源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.1.16/com/sun/faces/application/view/FaceletViewHandlingStrategy.java#1767)，

```
1767                methodSignature = methodSignature.trim(); 
```

当`<cc:attribute>`有问题没有`method-signature`.

根据到目前为止发布的代码，这`<cc:attribute name="listener">`是需要它的代码。所以，如果你添加它，那么这个问题应该得到解决。

```
<cc:attribute required="true" name="listener" method-signature="void listener()" /> 
```

# python - python sys库命令提示符

> ID：15767599
> 
> 赞同：0
> 
> 时间：2013-04-02T15:06:55.760
> 
> 标签：python, command-line-interface, interactive

我正在尝试 python 中的 sys 库。在命令提示符下，我正在使用它。

```
>>>import sys
>>>sys.ps1 ='$'
#my own input 'print 'test print''
$print 'test print'
test print 
```

但是，当我尝试在 python 文件中执行它并在 CLI 中运行它时，这在 CLI 中有效（ `python file.py`没有返回任何内容。

```
#!/usr/bin/python

import sys
sys.ps1= '$' 
```

我是否遗漏了文件中的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:14:25.587

你想做什么？sys.ps1 只会为 python 解释器设置提示，所以一旦它退出，它的效果就会再次消失。运行文件时，没有命令行。

如果你想看到这个有效果，试着用`python -i file.py`- 这将运行命令，然后把你放到交互式 shell 中，它应该将 PS1 设置为`$`now

# objective-c - 为什么我的程序可以在 Xcode 中运行，但不能作为单独的应用程序运行？

> ID：15767600
> 
> 赞同：0
> 
> 时间：2013-04-02T15:06:56.340
> 
> 标签：objective-c, xcode

我的程序从文件中加载一些数据，然后绘制它们。

文件读取部分是这样的：

```
- (void)load_file
{
    NSFileHandle *inFile = [NSFileHandle fileHandleForReadingAtPath:@"map_data"];
    NSData  *myData=[inFile readDataToEndOfFile];
    NSString *myText=[[NSString alloc]initWithData:myData encoding:NSASCIIStringEncoding];
    NSArray *values = [myText componentsSeparatedByString:@"\n"];
    for (NSString *string in values) {
        NSArray *lines=[string componentsSeparatedByString:@" "];
        if ([lines count] != 2) break;
        NSPoint point= NSMakePoint([lines[0] floatValue], [lines[1] floatValue]);
        [points addObject:[NSValue valueWithPoint:point]];
    }
    [self setNeedsDisplay:YES];
} 
```

调试时，我把数据文件放在[NSBundle mainBundle]目录下，程序运行正常。

但是，当我使用实现来取出应用程序时，它永远不会运行。我将数据文件放在与应用程序相同的路径中，但似乎无法加载它。

* * *

更新

我尝试使用 c++，但仍然失败。

```
- (void)load_file
{
    ifstream inf("map_data");
    double x, y;
    while (inf >> x >> y) [points addObject:[NSValue valueWithPoint:NSMakePoint(x, y)]];
    inf.close();
} 
```

我尝试将构建方案更改为发布并运行，这很好。但是每当我直接进入应用程序的查找器并双击它时，它就不起作用并且似乎没有加载任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:52:41.987

*   将文件作为资源添加到项目中（这将导致它被复制到正确位置的应用程序包装器中）

*   使用`[[NSBundle mainBundle] pathForResource:@"map_data" ofType:nil];

那应该给你文件的路径。该文件不应该被手动复制，它不应该在应用程序包装器旁边，你也不应该在应用程序包装器中尝试更改或替换文件。

它有时似乎起作用的原因仅仅是巧合。您正在传递部分路径，`NSFileHandle`并且您的应用程序的当前工作目录有时会指向正确的位置，以便数据文件可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:12:54.410

我不确定如何处理相对路径，但通常您使用该类`NSFileHandle`设置路径。`NSBundle`

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"myfile" ofType:@"ext"]; 
```

您也可以简单地从文件的内容初始化一个 NSString，您不需要先将它读入`NSData`using `NSFileHandle`。

```
NSString *text = [[NSString alloc] initWithContentsOfFile:path 
                                   encoding:NSASCIIStringEncoding error:nil]; 
```

（如果您想要正确的错误处理，请使用错误参数）

# javascript - OpenLayers 中的平铺背景图像

> ID：15767605
> 
> 赞同：0
> 
> 时间：2013-04-02T15:07:09.413
> 
> 标签：javascript, openlayers

使用 OpenLAyers 时，是否可以有一个包含平铺、可缩放图像的图层？我可以使用 CSS 来设置 DIV 标签的背景图像和背景重复属性，但是当我放大和缩小时当然不会缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:45:30.117

我将 OpenLayers.Layer.WMS 用于平铺、可缩放的图像，我认为这是最常用的图层。OpenLayers Demos 中有一个[简单的 WMS 示例](http://www.openlayers.org/dev/examples/wms.html)。如果您嗅探从该演示发出的 http 请求，您将看到如下 URL：

```
http://vmap0.tiles.osgeo.org/wms/vmap0?LAYERS=basic&SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&STYLES=&FORMAT=image/jpeg&SRS=EPSG:4326&BBOX=5.625,39.375,11.25,45&WIDTH=256&HEIGHT=256 
```

此 URL 中的请求参数包括边界框、投影和图块宽度和高度。服务器响应该位置 (BBOX) 和投影 (SRS) 的适当大小的图像。OpenLayers 负责将返回的平铺图像放置到地图视口中的适当位置。

OpenLayers 在这里为您做了很多。您不必自己操作 CSS 或 DIV 标签，但这一切都是在地理空间上完成的。如果您的平铺图像不是地理空间图像，那么您可能想看看除了 OpenLayers 之外的其他东西。希望我有所帮助。

# php - 如何使用 PHP 交互式 shell

> ID：15767606
> 
> 赞同：16
> 
> 时间：2013-04-02T15:07:10.120
> 
> 标签：php, ubuntu, readline, interactive-shell

我正在使用 Ubuntu 12.04 64 位，我想使用 PHP 交互式 shell：

```
php -a 
```

但它似乎不太好用，很多语法都被错误地解释了。

当我运行`php -a`它显示：

```
interactive mode enabled 
```

只是一个光标闪烁。

我正在使用：PHP 5.4.13-2~precise+1 (cli)（构建时间：2013 年 3 月 21 日 12:17:18）

如何使用 PHP 交互式 shell？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T04:09:08.360

尝试安装[http://www.phpsh.org/](http://www.phpsh.org/)这可能是最简单的解决方案。

*步骤：（假设已安装依赖项）*

1.  `git clone https://github.com/facebook/phpsh`
2.  `cd phpsh`
3.  `sudo python setup.py install`
4.  `phpsh`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-22T16:27:47.523

`php5-readline`这是未安装软件包时您将得到的。假设这是您的问题，您可以通过运行以下命令来解决它：

```
sudo apt-get install php5-readline 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-08T08:33:52.690

## 如何使用 PHP 交互式 shell

phpsh 是由 facebook 制作的。要安装它，请参见：[http ://www.phpsh.org/](http://www.phpsh.org/)

**安装方向：**

```
sudo apt-get install git
cd /home/youruser; 
```

拉入存储库， cd 进入并安装：

```
git clone https://github.com/facebook/phpsh
cd phpsh
sudo python setup.py install 
```

**运行：**

```
el@apollo:~$ phpsh
Starting php
type 'h' or 'help' to see instructions & features
php> 
```

**演练：**

打印字符串：

```
php> echo 'hi';
hi 
```

做一些数学运算：

```
php> echo 1+2;
3 
```

打印一些内置变量：

```
php> echo $_SERVER;
Array 
```

打印该数组的内容：

```
php> print_r($_SERVER);
Array
(                                    
    [LANG] => en_US.UTF-8
    [TERM] => xterm
    [SHELL] => /bin/bash
) 
```

获取该数组的键：

```
php> echo $_SERVER['TERM'];
xterm 
```

添加另一种类型：

```
php> =2+2
4 
```

打印上一个：

```
php> = $_
4 
```

存储一个变量：

```
php> $msg = "don't just sit there fancy pants, take the wheel";
php> echo $msg;
don't just sit there fancy pants take the wheel 
```

等式可以通过换行保持打开，直到它完成：

```
php> =2+
 ... 3+
 ... 4+5
14 
```

定义我们自己的数组：

```
php> $derp = array(1,2,3);
php> echo $derp
Array 
```

获取变量的类型：

```
php> echo gettype(PHP_VERSION);
string 
```

为了伟大的正义，循环：

```
php> $i = 0; while ($i < 3){$i++; echo "pinkie pie is best pony ";}
pinkie pie is best pony pinkie pie is best pony pinkie pie is best pony 
```

给自己一些信息：

```
php> phpinfo();
phpinfo();
PHP Version => 5.3.10-1ubuntu3.8 
```

Explode 将空间上的字符串解析为一个数组， print_r 漂亮地打印它：

```
php> function little_bad_girl(){ print_r(explode(" ", "oxy contin")); }
php> little_bad_girl();
Array
(
    [0] => oxy
    [1] => contin
) 
```

Foreach 结构可以扩展到以下行。

```
php> foreach (array(1,2,3) as $item) {
 ... echo $item;
 ... }
123 
```

块注释被忽略：

```
php> /* echo "hidden"; */
php> 
```

从文件中读取：

```
php> $section = file_get_contents('/home/el/myfile.txt');
php> echo $section;
we will become a spacefaring civilization. 
```

不，没时间：

```
php> echo time();
1386492405 
```

纯真甜蜜的真相：

```
php> echo isset($_SERVER);
1 
```

制作一个数组，在其中搜索一个项目。

```
php> $data = array(0, 1, 2);    
php> echo preg_grep("/1/", $data);
Array
php> print_r( preg_grep("/1/", $data));
Array
(
    [1] => 1
)
php> print_r( preg_grep("/4/", $data));
Array
(
) 
```

你想要更多？？？有够填一辈子，godspeed：[http ://php.about.com/od/advancedphp/](http://php.about.com/od/advancedphp/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-18T22:02:54.917

[PsySH](http://psysh.org/)怎么样？

一个小例子：

```
psysh 
Psy Shell v0.7.2 (PHP 5.5.12-2ubuntu4.6 — cli) by Justin Hileman
>>> $toto='ejgf5d78gfmkzl'
=> "ejgf5d78gfmkzl"
>>> substr($toto,0,2)
=> "ej" 
```

# asp.net - 使用 linq to xml 从 xml 文档中删除 xmlns="something"

> ID：15767615
> 
> 赞同：3
> 
> 时间：2013-04-02T15:07:50.007
> 
> 标签：asp.net, .net, xml-parsing, linq-to-xml

我正在解析一个 xml 文件。

xml 的第一行看起来像；

```
<DataSetMenu xmlns="http://tempuri.org/DataSetMenu.xsd"> 
```

我正在使用下面的代码来解析 xml。

```
string filename = Request.QueryString["file"].ToString();
XElement xdocument = XElement.Load(Server.MapPath("xml\\" + filename));

xdocument.Attribute("xmlns").Remove();

IEnumerable<XElement> MenuGroups = xdocument.Elements();

sb.Append("<link href='StyleSheet.css' rel='stylesheet' type='text/css' />");
foreach (var xel in MenuGroups)
{

    if (xel.Elements("MenuCatName").Any())
    {
        Int32 MenuCatID = Convert.ToInt32(xel.Element("MenuCatID").Value);
        string MenuCatName = xel.Element("MenuCatName").Value;
        sb.Append("<div class='CategoryDiv'><h1 class='category'>" + MenuCatName + " </h1>");
        GetGroupItems(xdocument, MenuCatID);
    }
} 
```

但是当 xml 文件的第一个节点包含：

```
 xmlns="http://tempuri.org/DataSetMenu.xsd" 
```

它根本不起作用。当我尝试访问 xml 的数据时，它给了我错误，**对象引用未设置为对象的实例**

**文件**

```
 <DataSetMenu xmlns="http://tempuri.org/DataSetMenu.xsd">
    <MenuCategories>
     <MenuCatID>10108</MenuCatID>
     <MenuCatName>SPEICALS</MenuCatName>
     <BusinessEntityID>20137</BusinessEntityID>
    <DisplayIndex>10107</DisplayIndex>
     <MenuCatDesc />
      <Visible>true</Visible>
      <ImagePath />
   </MenuCategories>
   <MenuCategories>
    <MenuCatID>10109</MenuCatID>
    <MenuCatName>GENERAL MENU</MenuCatName>
    <BusinessEntityID>20137</BusinessEntityID>
     <DisplayIndex>10108</DisplayIndex>
      <   MenuCatDesc />
       <Visible>true</Visible>
       <ImagePath />
    </MenuCategories>
   <MenuGroups>
     <MenuGroupID>110079</MenuGroupID>
    <MenuCatID>10108</MenuCatID>
     <MenuGroupName>SPECIAL OFFERS</MenuGroupName>
     <MenuGroupDesc />
     <Visible>true</Visible>
     <DisplayIndex>0</DisplayIndex>
     <MenuTypeID>1</MenuTypeID>
    <ImagePath />
     <ServiceTimeEnforced>false</ServiceTimeEnforced>
    <ServiceStartTime>1900-01-01T11:00:00-06:00</ServiceStartTime>
     <ServiceEndTime>1900-01-01T15:00:00-06:00</ServiceEndTime>
     <Monday>true</Monday>
    <Tuesday>true</Tuesday>
    <Wednesday>true</Wednesday>
    <Thursday>true</Thursday>
    <Friday>true</Friday>
    <Saturday>true</Saturday>
    <Sunday>true</Sunday>
   </MenuGroups>
   </DataSetMenu> 
```

给我一个解决方案，让它正常工作。或以任何方式删除此属性。

谢谢。

***现在它现在在这里工作***

```
 private void GetGroupItems(XElement xdocument, Int32 MenuCatID)
{

    var MenuGroup = from nm in xdocument.Elements("MenuGroups")
                    where (int)nm.Element("MenuCatID") == MenuCatID
                    select nm;

    foreach (XElement  GroupName in  MenuGroup)
    { 
        Int32 MenuGroupID = Convert.ToInt32(GroupName.Element("MenuGroupID").Value);
        string MenuGroupName = GroupName.Element("MenuGroupName").Value; 
        sb.Append("<div class='IType'>" + MenuGroupName + " </div>");
        sb.Append("<table class='restaurantlist'><tbody><tr><td class='righttd'>");
        GetMenuItems(MenuGroupID, xdocument);
        sb.Append("</td></tr></tbody></table>");
        sb.Append("<div class='restaurantlistdiv'><div style='clear: both;'></div>");
    }
} 
```

请告诉我，我应该如何修改这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:51:18.730

查询 XML 时必须指定命名空间。

创建`XNamespace`实例：

```
var ns = XNamespace.Get("http://tempuri.org/DataSetMenu.xsd"); 
```

然后使用[`XNamespace`+ String 运算符实现](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.op_addition.aspx)：

```
public static XName operator +(
    XNamespace ns,
    string localName
) 
```

在`Elements()`方法调用中，像这样：

```
IEnumerable<XElement> MenuGroups = xdocument.Elements();

sb.Append("<link href='StyleSheet.css' rel='stylesheet' type='text/css' />");
foreach (var xel in MenuGroups)
{

    if (xel.Elements(ns + "MenuCatName").Any())
    {
        Int32 MenuCatID = Convert.ToInt32(xel.Element(ns + "MenuCatID").Value);
        string MenuCatName = xel.Element(ns + "MenuCatName").Value;
        sb.Append("<div class='CategoryDiv'><h1 class='category'>" + MenuCatName + " </h1>");
        GetGroupItems(xdocument, MenuCatID);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:46:45.967

这里要记住的关键是您使用的不是属性，而是命名空间声明。这就是为什么您不能只删除该属性。查看[C#: How to remove namespace information from XML elements 中](https://stackoverflow.com/questions/413050/c-how-to-remove-namespace-information-from-xml-elements)的建议是否有帮助。

# macos - Cordova/Phone Gap 2.5.0 创建错误

> ID：15767617
> 
> 赞同：2
> 
> 时间：2013-04-02T15:07:52.057
> 
> 标签：macos, cordova, path

我在为 phonegap 2.5.0 创建新的 android 项目时遇到问题。我使用 Mac 并正确设置路径变量。但是在命令之后

```
./create /pathtoProject/PhoneGap FirstPackage CatchMyPainPG 
```

终端工作大约一秒钟，然后我收到以下错误：

```
An unexpected error occurred: "$ANDROID_BIN" create project --target $TARGET --path "$PROJECT_PATH" --package $PACKAGE --activity $ACTIVITY >&/dev/null exited with 1
Deleting project... 
```

这是什么意思？我想我已经设置了正确的路径变量并安装了所有的 android sdk。

我希望你能帮帮我！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T09:48:24.983

包名称应相应地以 3 命名空间作为前缀。

**示例：** *com.companyname.projectname*

**试试这个：**

./create /pathtoProject/PhoneGap com.YourCompanyName.FirstPackage CatchMyPainPG

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:12:04.680

确保您可以从终端运行以下命令：

```
ant -version
java -version
android -h 
```

# sass - 将变量与媒体查询一起使用时的 SASS 编译错误

> ID：15767623
> 
> 赞同：2
> 
> 时间：2013-04-02T15:08:11.560
> 
> 标签：sass

这很简单，当编译以下代码失败并出现错误时：

**media.scss 的第 6 行：“...ia (min-width:”: 预期的表达式 (例如 1px，粗体) 之后的 CSS 无效，为“$desktop”**

这是代码（尽可能简单）：

```
$desktop: 1920px;
$tablet: 1024px;
$phone: 480px;

// Style adjustments for desktop size
@media (min-width: $desktop) {

}

// Style adjustments for tablet size
@media (min-width: $tablet) and (max-width: $desktop) {

}

// Style adjustments for phone size
@media (max-width: $phone) {

} 
```

这是一个错误吗？也许不可能在使用 SASS 的媒体查询中使用变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:31:17.347

代码没有问题。在 SASS 3.2 中可以使用变量。[关联](http://thesassway.com/intermediate/responsive-web-design-in-sass-using-media-queries-in-sass-32)

# html - HTML 5 画布如何从 spritemap 中提取和存储图像？

> ID：15767631
> 
> 赞同：0
> 
> 时间：2013-04-02T15:08:31.157
> 
> 标签：html, canvas

我也很想知道这是否是最佳做法。

我加载一个精灵图：

```
canvas = $('#GameCanvas')[0];
context = canvas.getContext('2d');

// load sprite map
spriteMap = new Image();
spriteMap.src = "resources/spritemap.png"; 
```

现在我已经加载了我的精灵，我想在屏幕上绘制它们。`context.drawImage(..)`我可以通过使用but来做到这一点：

*   我不知道这是否是最好的方法，而不是仅仅提取我想要的每个图像并将它们单独存储，例如。`var playerCharacter = [cut the image out of the sprite map]`

*   我想给图像上色。如果我拉出一个“白色”精灵，我可能想要将它着色为红色、绿色等。我还不知道该怎么做，但它可能需要创建一个新的彩色`Image`，所以我必须拉无论如何，它都超出了精灵图。我不想不断地重新着色。

知道最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:55:30.177

# c# - 64 位机器中 %ProgramFiles(x86)% 的路径（用于注册表）

> ID：15767635
> 
> 赞同：0
> 
> 时间：2013-04-02T15:08:40.743
> 
> 标签：c#, x86, registry, exe, program-files

问题：在 64 位机器的注册表中使用**%ProgramFiles(x86)%**的 [INSTALLDIR] 是什么？

我有一个程序将安装在 64 位机器的**%ProgramFiles(x86)%内。**

基本上，我想在注册表中添加这些值

值名称：

```
(Default) 
```

价值数据：

```
"C:\Program Files (x86)\MyApp\MyApp.exe"  "%1" 
```

上面的值数据工作得很好，但我不能使用确切的路径，因为 Windows 可能安装在 C:\ 以外的不同目录中

我试过

价值数据：

```
"[INSTALLDIR]MyApp.exe" "%1" 
```

但它给出了**应用程序未找到**错误。

我可以使用什么来获取注册表中 %ProgramFiles(x86)% 的路径？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:12:43.080

可能在这里复制[。](https://stackoverflow.com/questions/194157/c-sharp-how-to-get-program-files-x86-on-windows-vista-64-bit)

```
 static string ProgramFilesx86()
 {
    if( 8 == IntPtr.Size 
        || (!String.IsNullOrEmpty(Environment.GetEnvironmentVariable("PROCESSOR_ARCHITEW6432"))))
    {
        return Environment.GetEnvironmentVariable("ProgramFiles(x86)");
    }

    return Environment.GetEnvironmentVariable("ProgramFiles");
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:18:24.807

如果您的安装程序标记为`x64`，您可以使用[ProgramFilesFolder](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370881.aspx)安装程序属性：

```
"[ProgramFilesFolder]MyApp\MyApp.exe" "%1" 
```

在`x64`模式下，此属性将指向`x86`Program Files 文件夹，而[ProgramFiles64Folder](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370880.aspx)将指向`x64`Program Files 文件夹。

**编辑：**如果您将`reg`文件导入注册表而不是让安装程序生成键和值，则可以使用环境变量：

```
"%ProgramFiles(x86)%\MyApp\MyApp.exe" "%1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:12:29.607

`[INSTALLDIR]`包括您的应用程序的名称。所以它转化为

`C:\Program Files (x86)\MyApp\MyApp\MyApp.exe`在你的例子中。尝试使用

```
"[INSTALLDIR]MyApp.exe" "%1" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:28:17.850

```
Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86) 
```

# php - 警告：无法修改标头信息 - 标头已发送（输出开始于 C:\xampp\htdocs\UpdateProfile.php:10）

> ID：15767639
> 
> 赞同：-4
> 
> 时间：2013-04-02T15:08:52.813
> 
> 标签：php

警告：无法修改标头信息 - 标头已由第 11 行 C:\xampp\htdocs\UpdateProfile.php 中的（输出从 C:\xampp\htdocs\UpdateProfile.php:10 开始）发送

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T15:25:04.530

您是否尝试过将`ob_start`PHP 代码放在顶部？

# android - 有没有机会以编程方式将软键盘设置为默认值？

> ID：15767643
> 
> 赞同：1
> 
> 时间：2013-04-02T15:09:06.123
> 
> 标签：android, keyboard

我想为我的应用程序使用自定义键盘，但我不想强迫用户进入设置页面将我的键盘设置为默认键盘。我需要做什么才能在我的应用程序中强制使用我的键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:11:55.363

> 有没有机会以编程方式将软键盘设置为默认值？

幸运的是，出于明显的隐私和安全原因，这是不可能的。

# php - 将随机生成的代码存储到会话中，而不在回显会话时重新生成

> ID：15767644
> 
> 赞同：0
> 
> 时间：2013-04-02T15:09:06.467
> 
> 标签：php, session

我正在生成一个随机代码。

```
function GenerateID($email) 
{
    $nums = substr(hash('sha512', $email), 0, 10);
    $ID = strtoupper(str_shuffle($nums));
    return $ID;
} 
```

然后我将它存储到一个会话中

```
$_SESSION['id'] = $ID; 
```

然后我从数据库中选择该 ID，然后 ID 会更改，因为每当我激活它时，它都会重新生成而不是保持不变。

```
 $makesure = $CONNECT_TO_DATABASE->prepare("SELECT * FROM users WHERE id = :id LIMIT 1");
            $makesure->bindValue(':id', $ID);
            $makesure->execute(); 
```

我怎样才能让它停止再生？有比使用单独文件更好的解决方案吗？

函数 generateID 位于 functions.inc.php 我在 index.php 处理它。

基本上我做了一个快速注册系统，用户输入他的电子邮件并点击提交，然后他收到一个唯一生成的字符串。

可以有多个用户使用相同的电子邮件，但 ID 必须不同。

所以这就是我选择指定刚刚注册的用户的方式：

```
 $fetch = $CONNECT_TO_DATABASE->prepare("SELECT * FROM users WHERE email = :email AND :id LIMIT 1");
        $fetch->bindValue(':email', $_SESSION['email']);
        $fetch->bindValue(':id', $_SESSION['id']);
        $fetch->execute(); 
```

但这无济于事，因为我假设会话 ID 在执行时会重新生成。

# backbone.js - 主干：未捕获的 ReferenceError：未定义属性

> ID：15767648
> 
> 赞同：1
> 
> 时间：2013-04-02T15:09:13.410
> 
> 标签：backbone.js

我正在使用 gem 'backbone-on-rails' # [https://github.com/meleyal/backbone-on-rails](https://github.com/meleyal/backbone-on-rails)并且我正在尝试使用空白表格创建一个“新报价”视图。应该很简单。:S 但我得到的只是这个错误：

**Uncaught ReferenceError: description is not defined**通过调试，错误似乎发生在 View->render 方法上。

这是代码：

路由器：

```
class SpencerGrafica.Routers.Quotes extends Backbone.Router
    routes:
        'new'       : 'newQuote'

    newQuote: ->
        new SpencerGrafica.Views.NewQuote model: new SpencerGrafica.Models.Quote 
```

看法：

```
class SpencerGrafica.Views.NewQuote extends Backbone.View
  el: '#app'
  template: JST["quotes/new"]

  initialize: ->
    @render()

  render: ->
    $(@el).html(@template(@model.toJSON()))
    @ 
```

模型

```
class SpencerGrafica.Models.Quote extends Backbone.Model

  defaults:
    description: null 
```

模板

```
<form id="new-quote" name="quote">

  <div>
    <input type="text" name="description" value="<%= description %>" placeholder="Descripcion interna">
  </div>

  <div class="actions">
    <input type="submit" value="Add Post" />
  </div>

</form> 
```

任何帮助真的很感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:51:16.180

尝试

```
class SpencerGrafica.Views.NewQuote extends Backbone.View
  el: '#app'
  template: JST["quotes/new"]

  initialize: ->
    @render()

  render: =>  # fat arrow here
    $(@el).html(@template(@model.toJSON())) 
```

# mysql - mysql错误：找不到表“mysql”。“innodb_table_stats”

> ID：15767652
> 
> 赞同：38
> 
> 时间：2013-04-02T15:09:32.390
> 
> 标签：mysql

我在 mysql 5.6 社区版中收到以下错误：

```
： 错误：
表“mysql”。“innodb_table_stats”
 未找到。InnoDB：重新计算
为表“mydatabase”请求的持久统计信息。“mytable”
但所需的持久统计存储不存在或已损坏。
改为使用瞬态统计信息。

```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-05-03T15:47:04.053

这解决了我的问题。

> /* 临时修复 Windows 7 机器上 MySQL 5.6.10 的 Windows 安装程序问题。我在一个干净安装的 MySql 上做了这个过程，它对我有用，至少它停止了日志中的 innodb 错误行和临时 innodb 表的使用。所以，这样做需要您自担风险。
> 
> 1.  从 mysql 中删除这些表： innodb_index_stats innodb_table_stats slave_master_info slave_relay_log_info slave_worker_info
>     
>     
> 2.  删除上述表格的所有 .frm 和 .ibd。
>     
>     
> 3.  运行此文件以重新创建上面的表（源 5-tables.sql）。
>     
>     
> 4.  重启mysqld。干杯，CNL */

```
CREATE TABLE `innodb_index_stats` (
  `database_name` varchar(64) COLLATE utf8_bin NOT NULL,
  `table_name` varchar(64) COLLATE utf8_bin NOT NULL,
  `index_name` varchar(64) COLLATE utf8_bin NOT NULL,
  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `stat_name` varchar(64) COLLATE utf8_bin NOT NULL,
  `stat_value` bigint(20) unsigned NOT NULL,
  `sample_size` bigint(20) unsigned DEFAULT NULL,
  `stat_description` varchar(1024) COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`database_name`,`table_name`,`index_name`,`stat_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin STATS_PERSISTENT=0;

CREATE TABLE `innodb_table_stats` (
  `database_name` varchar(64) COLLATE utf8_bin NOT NULL,
  `table_name` varchar(64) COLLATE utf8_bin NOT NULL,
  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `n_rows` bigint(20) unsigned NOT NULL,
  `clustered_index_size` bigint(20) unsigned NOT NULL,
  `sum_of_other_index_sizes` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`database_name`,`table_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin STATS_PERSISTENT=0;

CREATE TABLE `slave_master_info` (
  `Number_of_lines` int(10) unsigned NOT NULL COMMENT 'Number of lines in the file.',
  `Master_log_name` text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'The name of the master binary log currently being read from the master.',
  `Master_log_pos` bigint(20) unsigned NOT NULL COMMENT 'The master log position of the last read event.',
  `Host` char(64) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT 'The host name of the master.',
  `User_name` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The user name used to connect to the master.',
  `User_password` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The password used to connect to the master.',
  `Port` int(10) unsigned NOT NULL COMMENT 'The network port used to connect to the master.',
  `Connect_retry` int(10) unsigned NOT NULL COMMENT 'The period (in seconds) that the slave will wait before trying to reconnect to the master.',
  `Enabled_ssl` tinyint(1) NOT NULL COMMENT 'Indicates whether the server supports SSL connections.',
  `Ssl_ca` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The file used for the Certificate Authority (CA) certificate.',
  `Ssl_capath` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The path to the Certificate Authority (CA) certificates.',
  `Ssl_cert` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The name of the SSL certificate file.',
  `Ssl_cipher` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The name of the cipher in use for the SSL connection.',
  `Ssl_key` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The name of the SSL key file.',
  `Ssl_verify_server_cert` tinyint(1) NOT NULL COMMENT 'Whether to verify the server certificate.',
  `Heartbeat` float NOT NULL,
  `Bind` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'Displays which interface is employed when connecting to the MySQL server',
  `Ignored_server_ids` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The number of server IDs to be ignored, followed by the actual server IDs',
  `Uuid` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The master server uuid.',
  `Retry_count` bigint(20) unsigned NOT NULL COMMENT 'Number of reconnect attempts, to the master, before giving up.',
  `Ssl_crl` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The file used for the Certificate Revocation List (CRL)',
  `Ssl_crlpath` text CHARACTER SET utf8 COLLATE utf8_bin COMMENT 'The path used for Certificate Revocation List (CRL) files',
  `Enabled_auto_position` tinyint(1) NOT NULL COMMENT 'Indicates whether GTIDs will be used to retrieve events from the master.',
  PRIMARY KEY (`Host`,`Port`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='Master Information';

CREATE TABLE `slave_relay_log_info` (
  `Number_of_lines` int(10) unsigned NOT NULL COMMENT 'Number of lines in the file or rows in the table. Used to version table definitions.',
  `Relay_log_name` text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'The name of the current relay log file.',
  `Relay_log_pos` bigint(20) unsigned NOT NULL COMMENT 'The relay log position of the last executed event.',
  `Master_log_name` text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'The name of the master binary log file from which the events in the relay log file were read.',
  `Master_log_pos` bigint(20) unsigned NOT NULL COMMENT 'The master log position of the last executed event.',
  `Sql_delay` int(11) NOT NULL COMMENT 'The number of seconds that the slave must lag behind the master.',
  `Number_of_workers` int(10) unsigned NOT NULL,
  `Id` int(10) unsigned NOT NULL COMMENT 'Internal Id that uniquely identifies this record.',
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='Relay Log Information';

CREATE TABLE `slave_worker_info` (
  `Id` int(10) unsigned NOT NULL,
  `Relay_log_name` text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `Relay_log_pos` bigint(20) unsigned NOT NULL,
  `Master_log_name` text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `Master_log_pos` bigint(20) unsigned NOT NULL,
  `Checkpoint_relay_log_name` text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `Checkpoint_relay_log_pos` bigint(20) unsigned NOT NULL,
  `Checkpoint_master_log_name` text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `Checkpoint_master_log_pos` bigint(20) unsigned NOT NULL,
  `Checkpoint_seqno` int(10) unsigned NOT NULL,
  `Checkpoint_group_size` int(10) unsigned NOT NULL,
  `Checkpoint_group_bitmap` blob NOT NULL,
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 STATS_PERSISTENT=0 COMMENT='Worker Information'; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-06T18:59:43.050

我最近在生产服务器上遇到了这个问题，我发现最常见的答案涉及删除表、删除文件等让我感到有点不安！

因此，我认为向将来阅读本文的人指出，在我的情况下，错误的实际原因是我的根分区已满，这可能是有用的。我当时一直在做一个 mysql 转储并将它保存到错误的地方。所以解决方案只是释放一些磁盘空间并重新启动服务。

在转向涉及混乱 MYSQL 结构的标准解决方案之前，检查一下您是否不是这种情况可能是一个想法，并且可能会有点风险。

祝你好运，

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-03T05:49:38.677

阅读[此 mysql 文档](http://dev.mysql.com/doc/refman/5.6/en/innodb-persistent-stats.html)以了解有关`Persistent Statistics`.

要禁用此功能，请添加并`innodb_stats_persistent = 0`重新`my.cfg`启动您的 mysql 服务器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-17T12:01:57.657

同样的问题，但崩溃表' `gtid_slave_pos`'，创建`gtid_slave_pos`

```
CREATE TABLE `gtid_slave_pos` (
  `domain_id` int(10) unsigned NOT NULL,
  `sub_id` bigint(20) unsigned NOT NULL,
  `server_id` int(10) unsigned NOT NULL,
  `seq_no` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`domain_id`,`sub_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COMMENT='Replication slave GTID state'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-12T12:13:22.393

这对我来说是一个权限问题。由于这是在权限未锁定的开发机器上，因此我能够很容易地修复它：

```
sudo chmod -R 775 /usr/local/mysql/data 
```

...如果这可以为​​您解决问题，那就太好了。但如果问题出在生产机器上，您可能希望比我的解决方案更彻底地调查权限。

也许你想试试这个：

```
sudo chown mysql.mysql -R /usr/local/mysql/data 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-31T23:55:30.573

如果您正在运行 Debian Linux：

我对这个问题的解决方案是在删除 mysql.innodb_table_stats 文件并删除相关的 .frm 和 .ibd 文件后，我运行了这个：

```
dpkg-reconfigure mariadb-server-10.1 
```

它会为您重新创建 innodb_* 表，但无论出于何种原因，使用已经存在的文件（来自以前的安装）都遇到了麻烦。

我认为这更安全，因为自从写了上面的答案以来，列和它们的名称可能已经改变。

# c# - NEST C# - elasticsearch - 电子商务过滤器组合

> ID：15767656
> 
> 赞同：3
> 
> 时间：2013-04-02T15:09:43.017
> 
> 标签：c#, filter, e-commerce, elasticsearch, nest

我正在尝试在我的网上商店中实现弹性搜索，但在使用过滤器时遇到了一些麻烦。过滤是动态完成的。

***例子：***

我首先展示所有被索引的产品。所以没有应用过滤器。访问者可以选择自己的过滤器，例如：颜色、尺寸、品牌、类型、类别......

但我现在不知道如何使用 elasticsearch 和 NEST 构建搜索结果。

***这是我没有过滤的解决方案：***

```
var query = ElasticClient.Search<Product>(s => s
            .From(from)
            .Size(size)
        ); 
```

我还有另一个关于索引集合<> 或列表<> 的问题。我不得不在这些集合上使用 JsonIgnore。我也可以索引这些吗？

***这是我的课：***

```
/// <summary>
/// Represents a product
/// </summary>
public partial class Product    {

    private ICollection<ProductCategory> _productCategories;
    private ICollection<ProductManufacturer> _productManufacturers;
    private ICollection<ProductPicture> _productPictures;

    /// <summary>
    /// Gets or sets the name
    /// </summary>
    public virtual string Name { get; set; }

    /// <summary>
    /// Gets or sets the short description
    /// </summary>
    public virtual string ShortDescription { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the entity is published
    /// </summary>
    public virtual bool Published { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether the entity has been deleted
    /// </summary>
    public virtual bool Deleted { get; set; }

    /// <summary>
    /// Gets or sets the date and time of product creation
    /// </summary>
    public virtual DateTime CreatedOnUtc { get; set; }

    /// <summary>
    /// Gets or sets the date and time of product update
    /// </summary>
    public virtual DateTime UpdatedOnUtc { get; set; }

    /// <summary>
    /// Gets or sets the collection of ProductCategory
    /// </summary>
    [JsonIgnore] /* added - wesley */
    public virtual ICollection<ProductCategory> ProductCategories
    {
        get { return _productCategories ?? (_productCategories = new List<ProductCategory>()); }
        protected set { _productCategories = value; }
    }

    /// <summary>
    /// Gets or sets the collection of ProductManufacturer
    /// </summary>
    [JsonIgnore] /* added - wesley */
    public virtual ICollection<ProductManufacturer> ProductManufacturers
    {
        get { return _productManufacturers ?? (_productManufacturers = new List<ProductManufacturer>()); }
        protected set { _productManufacturers = value; }
    }

    /// <summary>
    /// Gets or sets the collection of ProductPicture
    /// </summary>
    [JsonIgnore] /* added - wesley */
    public virtual ICollection<ProductPicture> ProductPictures
    {
        get { return _productPictures ?? (_productPictures = new List<ProductPicture>()); }
        protected set { _productPictures = value; }
    }

} 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:03:04.417

请务必在此处阅读有关编写查询的完整文档：http: [//nest.azurewebsites.net/nest/writing-queries.html](http://nest.azurewebsites.net/nest/writing-queries.html)

以下是从那里粘贴的摘录。

## 无条件查询

编写复杂的布尔查询是一回事，但通常情况下，您不会想要根据用户输入来决定如何查询。

```
public class UserInput
{
    public string Name { get; set; }
    public string FirstName { get; set; }
    public int? LOC { get; set; }
} 
```

进而

```
.Query(q=> {
    QueryDescriptor<ElasticSearch> query = null;
    if (!string.IsNullOrEmpty(userInput.Name))
        query &= q.Term(p=>p.Name, userInput.Name);
    if (!string.IsNullOrEmpty(userInput.FirstName))
        query &= q
            .Term("followers.firstName", userInput.FirstName);
    if (userInput.LOC.HasValue)
        query &= q.Range(r=>r.OnField(p=>p.Loc).From(userInput.Loc.Value))
    return query;
}) 
```

这也很快变得乏味和冗长。因此，嵌套允许您将先前的查询编写为：

```
.Query(q=>
    q.Term(p=>p.Name, userInput.Name);
    && q.Term("followers.firstName", userInput.FirstName)
    && q.Range(r=>r.OnField(p=>p.Loc).From(userInput.Loc))
) 
```

如果任何查询会导致空查询，它们将不会被发送到 elasticsearch。

因此，如果除 userInput.Loc 之外的 userInput 上的所有术语都为空（或空字符串），它甚至不会将范围查询包装在布尔查询中，而只是发出一个普通范围查询。

如果它们全部为空，则将导致 match_all 查询。

这种无条件行为默认打开，但可以像这样关闭：

```
 var result = client.Search<ElasticSearchProject>(s=>s
    .From(0)
    .Size(10)
    .Strict() //disable conditionlessqueries by default
    ///EXAMPLE HERE
); 
```

但是，查询本身可以选择加入或退出。

```
.Query(q=>
    q.Strict().Term(p=>p.Name, userInput.Name);
    && q.Term("followers.firstName", userInput.FirstName)
    && q.Strict(false).Range(r=>r.OnField(p=>p.Loc).From(userInput.Loc))
) 
```

在此示例中，如果 userInput.Name 为 null 或为空，则将导致 DslException。无论 SearchDescriptor 是否使用 .Strict() ，范围查询都将使用无条件逻辑。

还需要注意的是，无条件查询逻辑会传播：

```
q.Strict().Term(p=>p.Name, userInput.Name);
&& q.Term("followers.firstName", userInput.FirstName)
&& q.Filtered(fq => fq
    .Query(qff => 
        qff.Terms(p => p.Country, userInput.Countries)
        && qff.Terms(p => p.Loc, userInput.Loc)
    )
) 
```

如果 userInput.Countries 和 userInput.Loc 都为 null 或为空，则不会发出整个过滤查询。

# powershell - 在后台使用 powershell 脚本中的参数启动 .exe

> ID：15767657
> 
> 赞同：7
> 
> 时间：2013-04-02T15:09:43.540
> 
> 标签：powershell, jobs, job-scheduling

我有一个程序，我通常在 powershell 中这样开始：

```
.\storage\bin\storage.exe -f storage\conf\storage.conf 
```

在后台调用它的正确语法是什么？我尝试了许多组合，例如：

```
start-job -scriptblock{".\storage\bin\storage.exe -f storage\conf\storage.conf"}
start-job -scriptblock{.\storage\bin\storage.exe} -argumentlist "-f", "storage\conf\storage.conf" 
```

但没有成功。它还应该在 powershell 脚本中运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T15:16:48.800

该作业将是 PowerShell.exe 的另一个实例，它不会以相同的路径启动，因此`.`无法工作。它需要知道在哪里`storage.exe`。

您还必须在脚本块中使用参数列表中的参数。您可以使用内置的 args 数组或使用命名参数。args 方式需要最少的代码。

```
$block = {& "C:\full\path\to\storage\bin\storage.exe" $args}
start-job -scriptblock $block -argumentlist "-f", "C:\full\path\to\storage\conf\storage.conf" 
```

命名参数有助于了解参数应该是什么。以下是使用它们的外观：

```
$block = {
    param ([string[]] $ProgramArgs)
    & "C:\full\path\to\storage\bin\storage.exe" $ProgramArgs
}
start-job -scriptblock $block -argumentlist "-f", "C:\full\path\to\storage\conf\storage.conf" 
```

# php - 寻找一种不那么尴尬的方式来返回一个变量（如果它存在）

> ID：15767664
> 
> 赞同：-1
> 
> 时间：2013-04-02T15:10:10.977
> 
> 标签：php, if-statement, return

`foreach`我在循环中有这段代码：

```
if ($foo) {
   return $foo;
} 
```

`$foo`基本上，如果发现存在，我会提前退出我的函数。

PHP有更好的写法吗？我正在考虑三元运算符，但我认为它不适用于这种情况......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:32:17.290

根据评论...您应该使用[`is_null()`](http://php.net/manual/en/function.is-null.php)功能。

```
foreach(...) {
    if( !is_null($foo)){
        return $foo;
    }
}

throw new Exception( 'No $foo found'); 
```

# c# - Equals 不适用于结构？

> ID：15767665
> 
> 赞同：2
> 
> 时间：2013-04-02T15:10:13.317
> 
> 标签：c#, .net

由于极其可怕的原因，我的雇主申请中有这个结构。

我试图覆盖相等运算符，但出现错误`Error 9 Operator '==' cannot be applied to operands of type 'TR_St_DateTime' and 'TR_St_DateTime'` 。

我错过了什么？

```
public struct TR_St_DateTime : IEquatable<TR_St_DateTime>
{
    public int Year;
    public int Month;
    public int Day;
    public int Hour;
    public int Minute;
    public int Second;

    public TR_St_DateTime(DateTime time)
    {
        Day = time.Day;
        Hour = time.Hour;
        Minute = time.Minute;
        Second = time.Second;
        Month = time.Month;
        Year = time.Year;
    }

    public override bool Equals(object obj)
    {
        TR_St_DateTime o = (TR_St_DateTime) obj;
        return Equals(o);
    }

    public override int GetHashCode()
    {
        return Year ^ Month ^ Day ^ Hour ^ Minute ^ Second;
    }

    public override string ToString()
    {
        return String.Format("{0}/{1}/{2}", Day, Month, Year);
    }

    public bool Equals(TR_St_DateTime other)
    {
        return ((Day == other.Day) && (Month == other.Month) && (Year == other.Year) && (Minute == other.Minute) && (Hour == other.Hour) && (Second == other.Second));
    }
} 
```

更新：这似乎`==`不起作用，但`Equals`确实如此。

无需`Equals`在结构上实现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T15:17:12.473

您没有重载`==`运算符，这就是编译器抱怨的原因。你只需要写：

```
public static bool operator ==(TR_St_DateTime left, TR_St_DateTime right)
{
    return left.Equals(right);
}

public static bool operator !=(TR_St_DateTime left, TR_St_DateTime right)
{
    return !(left == right);
} 
```

我*强烈*建议您避免使用这些公共领域。除非您小心，否则可变结构可能会导致任何数量的意外副作用。

（您还应该遵循 .NET 命名约定，并在调用`false`该`Equals(object)`方法时返回对不同类型实例的引用，而不是无条件强制转换。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T15:17:29.530

覆盖该`Equals`方法也不会自动实现`==`。您仍然需要手动重载这些运算符并将它们提供给`Equals`方法

```
public static bool operator==(TR_St_DateTime left, TR_St_DateTime right) {
  return left.Equals(right);
}

public static bool operator!=(TR_St_DateTime left, TR_St_DateTime right) {
  return !left.Equals(right);
} 
```

# sql - 对数据屏蔽有用的 HSQL 函数

> ID：15767670
> 
> 赞同：0
> 
> 时间：2013-04-02T15:10:17.720
> 
> 标签：sql, oracle, hsqldb

有谁知道如何使用 HSQL db 中的现有函数（类似于 oracle 中的随机函数）执行数据屏蔽。

# c - 函数在 C 中分配了不正确的浮点值

> ID：15767671
> 
> 赞同：1
> 
> 时间：2013-04-02T15:10:18.947
> 
> 标签：c, floating-point

我正在尝试返回一个浮点值并将其分配给一个浮点变量，但新浮点的值与返回的不同。

```
float getVoltageReading() {
    return 1.2f;
}

void updateUIReadings(uint8_t menuID) {
    float integerReading = getVoltageReading(); // digital voltage
} 
```

在调试器中，我看到 getVoltageReading 返回`1.2`，但 integerReading 被分配为`1.06703091e+009`

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T08:49:30.863

您`getVoltageReading`在范围内没有活动原型的情况下调用该函数，这意味着它假设它将返回一个`int`. 从您的问题的组织方式来看，它*似乎*在范围内，但我可以向您保证不是。

您可以通过以下两个文件看到`testprog1.c`：

```
#include <stdio.h>

//float getVoltageReading(void);

int main(void) {
    float integerReading = getVoltageReading ();
    printf("%e\n", integerReading);
    return 0;
} 
```

和`testprog2.c`：

```
float getVoltageReading(void) {
    return 1.2f;
} 
```

当这些被编译并链接在一起时，输出是：

```
1.067031e+09 
```

因为从中返回的浮点值`getVoltageReading()`被解释为`int`. 如果您在 中取消注释原型`testprog1.c`，它可以正常工作，因为它将浮点值解释为`float`：

```
1.200000e+00 
```

# coffeescript - CoffeeScript 不工作“-bash：咖啡：找不到命令”

> ID：15767676
> 
> 赞同：4
> 
> 时间：2013-04-02T15:10:25.240
> 
> 标签：coffeescript, npm

我安装了节点、npm 和咖啡脚本，当我尝试运行咖啡命令时，我得到“-bash：咖啡：找不到命令”

[http://cl.ly/image/1Z2t1U1O1I0z](http://cl.ly/image/1Z2t1U1O1I0z)

我不确定 $PATH 是否有问题，所有谷歌结果都表明那是我的问题。显然我是新手，我有点过火了，但我尝试添加 npm 给我的每条路径：

```
$path = /usr/local/share/npm/bin/coffee:/usr/local/share/npm/bin/cake:/usr/local/share/npm/lib/node_modules/coffee-script/bin/cake:/usr/local/share/npm/lib/node_modules/coffee-script/bin/coffee:node_modules/coffee-script:/usr/local/share/npm/lib/node_modules/coffee-script:/Users/asmith:/usr/local/bin/node:/usr/local/bin/npm:~/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

人类可读：

*   /usr/local/share/npm/bin/咖啡
*   /usr/local/share/npm/bin/cake
*   /usr/local/share/npm/lib/node_modules/coffee-script/bin/cake
*   /usr/local/share/npm/lib/node_modules/coffee-script/bin/coffee
*   节点模块/咖啡脚本
*   /usr/local/share/npm/lib/node_modules/coffee-script
*   /用户/史密斯
*   /usr/local/bin/节点
*   /usr/local/bin/npm
*   〜/斌
*   /usr/local/bin
*   /usr/bin
*   /bin
*   /usr/sbin
*   /sbin
*   /usr/local/bin

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:18:58.060

是的 - 这是一个路径问题。

你真正需要的路径可能只是`/usr/local/share/npm/bin`

您不需要添加可执行文件本身的路径，您需要将路径添加到它们所在的目录。

# types - 在 Avro 中键入别名？

> ID：15767682
> 
> 赞同：1
> 
> 时间：2013-04-02T15:10:46.427
> 
> 标签：types, avro

是否可以在 Avro 中创建类型别名/同义词（或近似相同）？

我想标记例如“long”是一个时间-in-ms-since-epoch，而不必依赖于隐式上下文。

在 Haskell 术语中，它类似于：

```
type EpochTime = Double 
```

在 Scala 术语中类似：

```
type Coordinates = Tuple2[Float, Float] 
```

在 Avro 中是否有类似的方法，或者我必须附加一些额外的元数据？[该线程](https://issues.apache.org/jira/browse/AVRO-739)意味着我可能必须像这样使用记录包装器：

```
{"type": "record", "name":"epochTimeRecord", "fields" : [
  {"name": "epochTime", "type": "long"}
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T02:59:02.280

从 Avro 1.7.5 开始，在您描述的 haskell/scala 意义上没有别名的概念。

# heroku - 了解 Heroku 服务器状态 143

> ID：15767685
> 
> 赞同：103
> 
> 时间：2013-04-02T15:11:01.093
> 
> 标签：heroku, deployment, server-side

我想知道 Heroku 服务器的状态，但找不到有关此主题的任何文档。

例子：

```
Process exited with status 143 
```

谁能解释这个例子？我在哪里可以找到资源以供将来参考？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-04-02T20:04:34.873

退出代码 143 表示您的进程已被 SIGTERM 终止。这通常在您执行任何需要重新启动测功机的命令时发送（配置：设置、重新启动、缩减...）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-05-11T06:00:33.607

当一段时间没有收到任何请求时，它是一个空闲状态。当它收到请求时，它将重新开始。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-09-10T16:59:28.727

每日重启是 Heroku dynos 生命周期的常规活动：

[Heroku 自动测功机重新启动](https://devcenter.heroku.com/articles/dynos#automatic-dyno-restarts)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-02-08T08:56:45.277

这是由于 dyno 停止了 heroku 应用程序。所以你必须重新启动应用程序。您可以`heroku restart`在终端中输入。还`heroku restart --app application_name`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-27T15:48:46.393

重新启动测功机，这会导致测功机接收 SIGTERM。使用这个命令

```
heroku restart worker.1 
```

进而

```
heroku logs 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-07-23T12:48:00.530

我的是因为我的环境变量。为确保，删除服务器中的 process.env.YourVarible 并将其替换为实际字符串，然后 git add，然后 heroku push main 以查看错误是否消失。我还没有解决方案如何正确地将环境变量放在 .env 中以成功部署到 heroku。

# salesforce - 销售队伍 SOQL MALFORMED_QUERY

> ID：15767688
> 
> 赞同：1
> 
> 时间：2013-04-02T15:11:04.430
> 
> 标签：salesforce, soql

为什么这个 SOQL 查询`MALFORMED_QUERY: unexpected token:`返回

```
Select id FROM account 
where id = '0012000000I7MkRAAV' or id = '0012000000I7MkRAAV' 
and id = '0012000000I7MkRAAV' 
```

将“and”更改为“or”可以很好地返回结果：

```
Select id FROM account 
where id = '0012000000I7MkRAAV' or id = '0012000000I7MkRAAV' 
or id = '0012000000I7MkRAAV' 
```

我正在 Force explorer 中执行查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:25:51.403

您需要对您的和/或的进行分组，使其不会模棱两可，例如

```
Select id FROM account where id = '0012000000I7MkRAAV' or (id = '0012000000I7MkRAAV' and id = '0012000000I7MkRAAV') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:30:55.977

问题是一个帐户记录不能同时有两个 id。一个对象记录只有一个 Id。在此查询中，您只能使用 OR 语句

# c - 生成随机字符串的 C 库函数是什么？

> ID：15767691
> 
> 赞同：13
> 
> 时间：2013-04-02T15:11:17.737
> 
> 标签：c

是否有一个库函数以与`mkstemp()`创建唯一文件名相同的方式创建随机字符串？它是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T15:39:52.327

没有标准功能，但您的操作系统可能会实现某些功能。您是否考虑过搜索手册？或者，这个任务很简单。我很想使用类似的东西：

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>

void rand_str(char *, size_t);

int main(void) {
    char str[] = { [41] = '\1' }; // make the last character non-zero so we can test based on it later
    rand_str(str, sizeof str - 1);
    assert(str[41] == '\0');      // test the correct insertion of string terminator
    puts(str);
}

void rand_str(char *dest, size_t length) {
    char charset[] = "0123456789"
                     "abcdefghijklmnopqrstuvwxyz"
                     "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

    while (length-- > 0) {
        size_t index = (double) rand() / RAND_MAX * (sizeof charset - 1);
        *dest++ = charset[index];
    }
    *dest = '\0';
} 
```

这样做的好处是可以在 EBCDIC 系统上正常工作，并且能够适应几乎任何字符集。我没有将以下任何字符添加到字符集中，因为很明显您想要可能是文件名的字符串：

```
":;?@[\]^_`{|}"
```

我认为其中许多字符可能在各种操作系统的文件名中无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:20:28.153

没有内置 API，您可以使用（在 *x 系统上）`/dev/urandom`，例如：

```
FILE *f = fopen( "/dev/urandom", "r");
if( !f) ...
fread( binary_string, string_length, f);
fclose(f); 
```

请注意，这将创建二进制数据，而不是字符串数据，因此您之后可能需要对其进行过滤。

您也可以使用标准的伪随机生成器[`rand()`](http://linux.die.net/man/3/rand)：

```
#include <time.h>
#include <stdlib.h>

// In main:
srand(time(NULL));
for( int i = 0; i < string_length; ++i){
    string[i] = '0' + rand()%72; // starting on '0', ending on '}'
} 
```

如果你需要真正的随机字符串，你需要谷歌[`generating random sequence cryptography`](https://www.google.com/search?hl=en&ie=UTF-8&q=generating%20random%20sequence%20cryptography)，这是密码学的难题之一，仍然没有完美的解决方案:)

# c# - 我怎么知道 ListA 是否拥有 ListB 的一切？

> ID：15767695
> 
> 赞同：-2
> 
> 时间：2013-04-02T15:11:27.383
> 
> 标签：c#

如果我有以下...

```
List<string> listA = new List<string>();
listA.Add("a");
listA.Add("b");
listA.Add("c");
listA.Add("d");

List<string> listB = new List<string>();
listB.Add("b");
listB.Add("d"); 
```

我怎么知道 listA 是否拥有 listB 的一切？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T15:14:19.970

使用[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

```
bool allBinA = !listB.Except(listA).Any(); 
```

[**演示**](http://ideone.com/ZtNcDi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:14:18.493

你可以用原始（慢）的方式来确保

```
bool contains_all = true;

foreach(String s in listA) {
  if(!listB.Contains(s)) {
    contains_all = false;
    break;
  }
} 
```

尽管这确实对数组中的每个元素执行了详尽的搜索

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:13:15.003

试试这个：

```
bool result = listB.Intersect(listA).Count() == listB.Count; 
```

还有这个：

```
bool result2 = listB.Select(input => !listA.Contains(input)).Count() > 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:15:04.557

```
bool result = false;

if (listB.Count>listA.Count) result =  listB.Intersect(listA).Count() == listB.Count;

else result =  listA.Intersect(listB).Count() == listA.Count; 
```

# arrays - CUDA 线程将可变数量的数据附加到公共数组

> ID：15767705
> 
> 赞同：4
> 
> 时间：2013-04-02T15:12:01.760
> 
> 标签：arrays, hash, cuda, thrust

我的应用程序需要数百万条输入记录，每条记录 8 个字节，并将每条记录散列到两个或多个输出箱中。也就是说，每个输入密钥 K 创建少量对 (B1,K), (B2,K), ... 在处理密钥之前，每个密钥的输出箱数是未知的。它通常是 2，但有时可能是 10 或更多。

所有这些输出对最终都需要存储在一个数组中，因为稍后将一起处理每个 bin 中的所有键。如何有效地做到这一点？

使用原子增量从全局数组中重复保留一对听起来非常慢。另一种明显的方法是将哈希表初始化为指向每个 bin 的某种存储的指针数组。那看起来更慢。

我正在考虑在块共享数组中为每个输入记录预先保留 2 对，然后根据需要获取更多空间（即重新实现 STL 向量保留操作），然后让每个块中的最后一个线程复制块共享数组到全局内存。

但是我不期待实现这一点。帮助？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-13T01:20:55.690

> 使用原子增量从全局数组中重复保留一对听起来非常慢。

您可以增加全局数组的 bin，而不是一次增加一个条目。换句话说，你可以有一个大数组，每个线程可以从 10 个可能的输出条目开始。如果线程溢出，它会从全局数组中请求下一个可用的 bin。如果您担心 1 个原子序数会降低速度，您可以将 10 个原子序数用于数组的 10 个部分并分配访问。如果一个满了，再找一个。

> 我也在考虑两次处理数据：第一次只是为了确定每个输入记录的输出记录数。然后分配足够的空间，最后再次处理所有数据。

这是另一种有效的方法。一旦获得每个线程的结果总数，瓶颈就是计算每个线程在全局数组中的偏移量。我还没有想出一个合理的并行方式来做到这一点。

我能想到的最后一个选择是分配一个大数组，基于块分配它，使用共享原子 int （有助于慢速全局原子）。如果空间不足，请标记该块未完成，并标记它停止的位置。在下一次迭代中完成尚未完成的工作。

全局内存的分布式部分的缺点当然就像 talonmies 所说的......你需要一个收集或压缩来使结果密集。

祝你好运！

# .htaccess - 您如何为看起来像目录的页面编写 htaccess 重定向？

> ID：15767708
> 
> 赞同：0
> 
> 时间：2013-04-02T15:12:03.127
> 
> 标签：.htaccess, redirect, rewrite

我试图弄清楚如何为 URL 格式为的页面执行 301 重定向

```
www.site.co.uk/foo/bar/ 
```

到格式为的 URL

```
www.site.co.uk/bar.html 
```

我尝试过使用无效的重定向，我也尝试过 RewriteRule，但我运气不佳。

谁能提供一些帮助或将我链接到一些很棒的 htaccess 教程？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:21:44.020

我通过阅读找到了解决方案：

[http://perishablepress.com/redirect-subdirectory-to-root-via-htaccess/](http://perishablepress.com/redirect-subdirectory-to-root-via-htaccess/)

htaccess 代码如下：

```
RedirectMatch 301 ^/foo/bar/$ http://www.site.co.uk/bar.html 
```

# sql-server - 四舍五入的小数截断小值 - 向上舍入

> ID：15767709
> 
> 赞同：1
> 
> 时间：2013-04-02T15:12:20.457
> 
> 标签：sql-server, types, decimal, number-formatting

例如，我有 1000 个西红柿，总价值 4.00 美元。这将是`0.004`每个番茄。我的数据类型是`decimal (9,2)`.

如果我想将该值四舍五入，`0.01`我将如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:14:54.460

```
Select Round(CEILING(0.004 * 100)/100,2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:16:12.847

```
select  case 
        when cast(4.00/1000 as decimal(9,2)) < 0.01 then 0.01
        else cast(4.00/1000 as decimal(9,2))
        end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:19:26.210

这应该这样做：

```
select ceiling(0.004*100)/100 
```

# windows-phone-7 - 检测用户点击了迷你浏览器（window phone）上的特定按钮

> ID：15767711
> 
> 赞同：0
> 
> 时间：2013-04-02T15:12:27.057
> 
> 标签：windows-phone-7, windows-phone-8, webbrowser-control

我正在开发窗口电话应用程序，

场景：迷你浏览器打开一个页面（例如 google.com） Google.com 有一个名为“搜索”的按钮

```
If User clicked button 'Search'
  Redirect to an redirect.xaml
Else
  Do nothing 
```

这是我的场景，我怎样才能真正检测到用户点击了按钮，只有他们才能进入下一页？在这种情况下我必须使用javascript吗？因为如果在网络上，这是我将使用的技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:54:34.477

Webbrowser 控件下载我们的内容，您必须解析内容或处理 js 操作。这就是这样做的方法。

# android - Firefox 移动插件 SDK 通过 Android USB 连接错误 - package.json 没有“主”条目

> ID：15767713
> 
> 赞同：2
> 
> 时间：2013-04-02T15:12:35.817
> 
> 标签：android, firefox, firefox-addon, firefox-addon-sdk

我的目标是在 android 设备上安装一个 firefox 插件，但我遇到了以下错误...

```
"package.json does not have a 'main' entry." 
```

使用

Windows 7：Firefox 20.0：Android SDK 4.2.2 w/Google USB 驱动程序：刚刚下载了 Firefox SDK

Nexus 7：启用 USB 调试模式的 Firefox Nightly

我安装了 python 2.6 并安装了最新的 Android sdk 并验证了版本与我的 android 设备 (Nexus 7) 匹配并且 cfx 测试命令成功返回，但我收到以下错误并且不知道从哪里开始寻找......

查看 pastebin 条目以查看我的命令行条目以及它向我吐口水的错误...

[http://pastebin.com/aXWxnKxw](http://pastebin.com/aXWxnKxw)

我一直在关注以下教程：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/installation.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/installation.html) [https://addons.mozilla.org/en-US/developers/docs/sdk /latest/dev-guide/tutorials/mobile.html#cfx-options](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/mobile.html#cfx-options)

谢谢先进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:16:33.230

好吧，我找到了答案……您必须在插件的源文件夹中运行命令。

请参阅[http://blog.mozilla.org/addons/2012/02/06/mobile-add-on-development-using-the-add-on-sdk/](http://blog.mozilla.org/addons/2012/02/06/mobile-add-on-development-using-the-add-on-sdk/)

# amazon-web-services - AWS java SDK 如何确定它的默认区域

> ID：15767714
> 
> 赞同：1
> 
> 时间：2013-04-02T15:12:37.563
> 
> 标签：amazon-web-services

有人可以解释 AWS Java SDK 如何确定它的默认端点吗？

```
AmazonEC2Client client = new AmazonEC2Client(...);

// If this method is not called, how does it know where to connect?
client.setEndpoint("ec2.us-west-2.amazonaws.com"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:16:01.010

它不能确定任何事情，所有 API 的 SDK 的默认端点都是 us-east 本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-06T14:13:00.903

```
AmazonEC2 ec2 = AmazonEC2ClientBuilder.defaultClient();
DescribeAvailabilityZonesResult zones = ec2.describeAvailabilityZones();
AvailabilityZone zone = zones.getAvailabilityZones().get(0);
String currentRegion = zone.getRegionName(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-25T19:50:47.133

适用于 Java 的 AWS 开发工具包默认为所有客户端**的 us-east-1**。

AWS SDK for Java 开发人员指南中有很多关于默认设置和如何选择不同区域的重要信息：http: [//docs.aws.amazon.com/AWSSdkDocsJava/latest/DeveloperGuide/java-dg-region-selection .html](http://docs.aws.amazon.com/AWSSdkDocsJava/latest/DeveloperGuide/java-dg-region-selection.html)

# ruby-on-rails - before_filter set_locale 除了控制器

> ID：15767715
> 
> 赞同：3
> 
> 时间：2013-04-02T15:12:38.810
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, internationalization, ruby-on-rails-3.2

我的`routes.rb`

```
MyApp::Application.routes.draw do
 scope '(:locale)' do
  #all resources here
 end
 namespace :blog do
  resources :posts, :only => [:index, :show]
 end
end 
```

我的`application_controller.rb`

```
class ApplicationController < ActionController::Base
 #
 #
 before_filter :set_locale

 private

 def default_url_options(options = {})
   {locale: I18n.locale}
 end

 def set_locale
   #code for detect locale here
 end
 #
 #
end 
```

里面的所有资源`scope '(:locale)'`都运行良好。

但是**我不想使用语言环境，`namespace :blog`**当我尝试点击博客链接时，我可以看到这个 url`http://localhost:3000/blog/posts?locale=en`

**如何删除`namespace :blog...`和的语言环境`blog resource`？我想得到一个像`http://localhost:3000/blog/posts`**我想删除的网址`?locale=en`

**谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:15:05.960

`skip_before_filter`在您的博客控制器中使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:09:36.507

鉴于您在评论中所说的话，如果当前控制器不是，请尝试仅`locale`在您的中包含，这有望消除尾随问题。也许是这样的：`default_url_options``PostsController`
`?locale=en`

```
 def default_url_options(options = {})
   { locale: I18n.locale } unless controller_name == 'posts'
 end 
```

或者，既然[`default_url_options`是 depreciated](http://apidock.com/rails/ActionController/Base/default_url_options)，如果你想使用`url_options`，也许是这样的：

```
def url_options
  controller_name == 'posts' ? super : { locale: I18n.locale }.merge(super)
end 
```

以上都没有经过测试，所以我不确定它们中的任何一个都可以工作。

**编辑**

如果您在[此 StackOverflow Q&A](https://stackoverflow.com/q/5261521/567863)`locale`中将 设置为`nil`like怎么样？所以也许是这样的：

```
def url_options
  locale = controller_name == 'posts' ? nil : I18n.locale
  { locale: locale }.merge(super)
end 
```

# php - 由于无效的 RETURN 和 CANCEL URL，PayPal setExpressCheckout 调用失败

> ID：15767718
> 
> 赞同：1
> 
> 时间：2013-04-02T15:12:42.610
> 
> 标签：php, paypal, paypal-sandbox

我目前正在将 PayPal Express Checkout 集成到我们的网站中。我们正在使用 osCommerce (PHP) 的安装和 setExpressCheckout 的 SOAP 实现。令人费解的是，我的 Express Checkouts 代码在我的本地环境中正常工作。

然而; 委托给我们的开发服务器后，Express Checkout 的相同代码不再有效。

下面是我的本地开发环境向 PayPal Sandbox 端点发起的一个成功的 SOAP 请求，用于快速结帐。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Header>
  <RequesterCredentials xmlns="urn:ebay:api:PayPalAPI">
    <Credentials xmlns="urn:ebay:apis:eBLBaseComponents">
      <Username>xxxxxxxxxxxxxxxxxxxxxxxxxxx</Username>
      <Password>xxxxxxxxxxxxxxxx</Password>
    </Credentials>
  </RequesterCredentials>
</soap:Header>
<soap:Body>
  <SetExpressCheckoutReq xmlns="urn:ebay:api:PayPalAPI">
    <SetExpressCheckoutRequest>
      <Version xmlns="urn:ebay:apis:eBLBaseComponents">98.0</Version>
      <SetExpressCheckoutRequestDetails xmlns="urn:ebay:apis:eBLBaseComponents">
        <ReturnURL>http://localhost/checkout_shipping.php?action=express_checkout&amp;site=xxxxx</ReturnURL>
        <CancelURL>http://localhost/checkout_shipping.php?ec_cancel=1&amp;site=xxxxx</CancelURL>
        <ReqConfirmShipping>1</ReqConfirmShipping>
        <NoShipping>0</NoShipping>
        <AddressOverride>0</AddressOverride>
        <LocaleCode>US</LocaleCode>
        <PageStyle></PageStyle>
        <cpp-header-image></cpp-header-image>
        <cpp-header-border-color></cpp-header-border-color>
        <cpp-header-back-color></cpp-header-back-color>
        <cpp-payflow-color></cpp-payflow-color>
        <PaymentAction>Sale</PaymentAction>
        <PaymentDetails>
          <OrderTotal currencyID="USD">6.47</OrderTotal>
          <ItemTotal currencyID="USD">2.48</ItemTotal>
          <ShippingTotal currencyID="USD">3.99</ShippingTotal>
          <HandlingTotal currencyID="USD"></HandlingTotal>
          <TaxTotal currencyID="USD">0</TaxTotal>
          <Custom>Phone: xxxxxxxxxx -- Email: xxxx.xxxxx@gmail.com</Custom>
          <InvoiceID></InvoiceID>
          <NotifyURL></NotifyURL>
          <ButtonSource>PAYPAL_BUTTON_SOURCE</ButtonSource>
          <ShipToAddress>
            <Name></Name>
            <Street1>xxxx Park Forest Circle</Street1>
            <Street2></Street2>
            <CityName>Clermont</CityName> 
            <StateOrProvince>OH</StateOrProvince>
            <PostalCode>xxx03</PostalCode>
            <Country>US</Country>
          </ShipToAddress>
          <PaymentDetailsItem><Name>Product XYZ</Name><Amount currencyID="USD">2.48</Amount><Number>-</Number><Quantity>1</Quantity></PaymentDetailsItem>
        </PaymentDetails>
      </SetExpressCheckoutRequestDetails>
    </SetExpressCheckoutRequest> 
  </SetExpressCheckoutReq>
</soap:Body>
</soap:Envelope> 
```

下面是我从 API 端点检索到的响应

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cc="urn:ebay:apis:CoreComponentTypes" xmlns:wsu="http://schemas.xmlsoap.org/ws/2002/07/utility" xmlns:saml="urn:oasis:names:tc:SAML:1.0:assertion" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/12/secext" xmlns:ed="urn:ebay:apis:EnhancedDataTypes" xmlns:ebl="urn:ebay:apis:eBLBaseComponents" xmlns:ns="urn:ebay:api:PayPalAPI">
    <SOAP-ENV:Header>
        <Security xmlns="http://schemas.xmlsoap.org/ws/2002/12/secext" xsi:type="wsse:SecurityType"></Security>
        <RequesterCredentials xmlns="urn:ebay:api:PayPalAPI" xsi:type="ebl:CustomSecurityHeaderType">
            <Credentials xmlns="urn:ebay:apis:eBLBaseComponents" xsi:type="ebl:UserIdPasswordType">
                <Username xsi:type="xs:string"></Username>
                <Password xsi:type="xs:string"></Password>
                <Signature xsi:type="xs:string"></Signature>
                <Subject xsi:type="xs:string"></Subject>
            </Credentials>
        </RequesterCredentials>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body id="_0">
        <SetExpressCheckoutResponse xmlns="urn:ebay:api:PayPalAPI">
            <Timestamp xmlns="urn:ebay:apis:eBLBaseComponents">2013-03-27T18:46:35Z</Timestamp>
            <Ack xmlns="urn:ebay:apis:eBLBaseComponents">Success</Ack>
            <CorrelationID xmlns="urn:ebay:apis:eBLBaseComponents">cca293672cf33</CorrelationID>
            <Version xmlns="urn:ebay:apis:eBLBaseComponents">98.0</Version>
            <Build xmlns="urn:ebay:apis:eBLBaseComponents">5551055</Build>
            <Token xsi:type="ebl:ExpressCheckoutTokenType">EC-2CM343011B950025M</Token>
        </SetExpressCheckoutResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

但是，如果我从 DEV 服务器发起相同类型的事务；这将导致失败。在下面找到从我们的开发服务器发起的请求的 var_dump()

```
Array ( 
    [PAYPAL_ORDER_TOTAL] => 7.84 
    [PAYPAL_ORDER_DESCRIPTION] => Order placed on April 2, 2013, 9:30 am by xxxx xxxxx (ID: xxxxx)  
    [PAYPAL_CUSTOM] => Phone: xxxxxxxxxx -- Email: xxxx.xxxxx@gmail.com 
    [PAYPAL_SHIPPING_TOTAL] => 0 
    [PAYPAL_HANDLING_TOTAL] => 
    [PAYPAL_TAX_TOTAL] => 0 
    [PAYPAL_ITEM_TOTAL] => 7.84 
    [PAYMENT_DETAILS_ITEM] => Product XYZ 
    [PAYPAL_SHIPPING_NAME] => 
    [PAYPAL_SHIPPING_ADDRESS1] => xxxx Rainbow Springs Ct 
    [PAYPAL_SHIPPING_ADDRESS2] =>  
    [PAYPAL_SHIPPING_CITY] => Louisville 
    [PAYPAL_SHIPPING_STATE] => KY 
    [PAYPAL_SHIPPING_ZIP] => 40213 
    [PAYPAL_SHIPPING_COUNTRY] => US 
    [PAYPAL_NOTIFY_URL] => 
    [PAYPAL_INVOICE_ID] => 
    [PAYPAL_PAGE_STYLE] => 
    [PAYPAL_CPP_HEADER_IMAGE] => 
    [PAYPAL_CPP_HEADER_BORDER_COLOR] => 
    [PAYPAL_CPP_HEADER_BACK_COLOR] => 
    [PAYPAL_CPP_PAYFLOW_COLOR] => 
    [PAYPAL_RETURN_URL] => http://wpp_mod.testosc.storename.com/checkout_shipping.php?action=express_checkout&site=xxxxx 
    [PAYPAL_CANCEL_URL] => http://wpp_mod.testosc.storename.com/checkout_shipping.php?ec_cancel=1&site=xxxxx        
    [PAYPAL_REQUIRE_CONFIRM_SHIPPING] => 1 
    [PAYPAL_LOCALE_CODE] => US 
    [PAYPAL_NO_SHIPPING] => 0 
    [PAYPAL_ADDRESS_OVERRIDE] => 0 
) 
```

此请求导致以下响应（同样，返回的 var_dump()）：

```
Array (
    [Security] => 
    [RequesterCredentials] => 
        Array ( [0] => 
            Array ( 
                [Credentials] => 
                    Array ( [0] => 
                        Array ( 
                            [Username] => 
                            [Password] => 
                            [Signature] => 
                            [Subject] => 
                        ) 
                    ) 
                ) 
            ) 
    [SetExpressCheckoutResponse] => 
        Array ( [0] => 
            Array ( 
                [Timestamp] => 2013-04-02T14:30:46Z 
                [Ack] => Failure 
                [CorrelationID] => 44f876829f4cb 
                [Errors] => 
                    Array ( [0] => Array ( 
                            [ShortMessage] => Transaction refused because of an invalid argument. See additional error messages for details. 
                            [LongMessage] => ReturnURL is invalid. 
                            [ErrorCode] => 10471 
                            [SeverityCode] => Error ) 
                        [1] => Array ( 
                            [ShortMessage] => Transaction refused because of an invalid argument. See additional error messages for details. 
                            [LongMessage] => CancelURL is invalid. 
                            [ErrorCode] => 10472 
                            [SeverityCode] => Error ) 
                    ) 
                [Version] => 98.0 
                [Build] => 5613839 
            ) 
        ) 
) 
```

在检查了[setExpressCheckout](https://www.x.com/developers/paypal/documentation-tools/api/setexpresscheckout-api-operation-soap)的 PayPal API 文档后，就 API 端点在有效 URL 中查找的内容而言，我无法找到任何特定指南。

我还检查了[SO1](https://stackoverflow.com/questions/14415520/paypal-returns-ack-failure-on-setexpresscheckout)和[SO2](https://stackoverflow.com/questions/11648754/paypal-setexpresscheckout-returning-token-then-displaying-this-transaction-is)，但没有看到与我的特定问题有关的任何内容。

如果有人有任何关于 RETURN 和 CANCEL URL 可能有问题的信息，或者更好的是对 setExpressCheckout API 的正确格式 URL 的更详细说明，这将是最有帮助的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:55:02.247

似乎 PayPal API 端点不喜欢 domain/url 中的下划线，所以：

```
http://localhost/checkout_shipping.php?action=express_checkout&amp;site=xxxxx 
```

是有效的，但这

```
http://wpp_mod.testosc.storename.com/checkout_shipping.php?action=express_checkout&site=xxxxx 
```

不是; 因为我们的开发服务器的域名中有一个下划线。这是不方便但可以纠正的。

# java - 子线程同步在这里不起作用

> ID：15767720
> 
> 赞同：0
> 
> 时间：2013-04-02T15:12:44.243
> 
> 标签：java

Java 代码：

```
// Create a second thread.
class NewThread implements Runnable 
{
    Thread t;
    NewThread() 
    {   
        t = new Thread(this, "Demo Thread");    // Create a new, second thread
        System.out.println("Child thread: " + t);
        t.start();              // Start the thread
    }
    public void run()   // This is the entry point for the second thread.
    {
        justCall();
    }
    public synchronized void justCall()
    {
        try 
        {   
                for(int i = 10; i > 0; i--)
                {
                    System.out.println("Child Thread: " + i);
                    Thread.sleep(10000);
                }

        }
        catch (Exception e) 
        {
            System.out.println("Child interrupted.");
        }
        System.out.println("Exiting child thread.");
    }
}
class ThreadDemo 
{
    public static void main(String args[]) 
    {
        NewThread nt = new NewThread();         // create a new thread
        try 
        {
            for(int i = 5; i > 0; i--) 
            {
                System.out.println("Main Thread: " + i);
                Thread.sleep(1000);
            }
        }
        catch (InterruptedException e) 
        {
            System.out.println("Main thread interrupted.");
        }   
        System.out.println("Main thread exiting.");
    }
} 
```

在这里您可以删除同步的 justCall() 方法，并且可以在 run() 方法中初始化同步块（将 justCall() 方法的代码放在同步块中）。

如何在这里同步子代码？请帮忙。我读到 Thread.sleep() 方法在同步块或方法中执行时永远不会释放锁。但在我的代码中，主线程和子代码同时执行。请帮助使用 Thread.sleep() 方法同步子代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:17:25.947

当两个线程在同一个对象上同步时，它们不会都运行相同的代码。这允许许多不同的线程同时在许多不同的代码区域中协作运行。

A `synchronized`on 非静态方法会在`this`对象上创建锁。如果它是一个静态方法，那么锁就会`Class`在该类的对象上`NewThread`。任何类和任何类的任何实例都可以有一个`syncronized`，从而创建一个锁。

您只有一个线程在同步区域中运行。因此，当它被锁定时，没有其他线程试图运行锁定的代码。没有其他线程尝试在该类的`nt`实例上进行同步。`NewThread`

您可能想尝试这样做：

```
NewThread nt1 = new NewThread();         // create a new thread
NewThread nt2 = new NewThread();         // create a 2nd new thread 
```

然后在主类中停止循环。

# php - PHP Xpath 中的撇号

> ID：15767724
> 
> 赞同：0
> 
> 时间：2013-04-02T15:12:54.437
> 
> 标签：php, dom, xpath, compiler-errors, apostrophe

Xpath 中的撇号是怎么回事？我尝试的任何方法似乎都不起作用。

我正在尝试使用 DOM 中的 Xpath 通过标题从 XML 文件中挑选项目，但因为有些项目有撇号，所以它不起作用。

我试过用这个替换撇号

```
$query1 = "channel/item[title='$p']/title"; 
```

但即使这样也行不通。关于如何做到这一点的任何建议，或如何通过 DOM 中的标题提取元素的替代方法？

## 编辑

这是我的代码：

```
$q = $_GET["q"];

$q = explode('|^', $q);

$counts = count($q);

unset($q[$counts-1]);

$p = stripslashes($q);
$q = stripslashes($p);

$dom = new DOMDocument;
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;

$dom->Load("../$userid.xml");

$xpath = new DOMXPath($dom);

foreach ($q as $r) {

$p = preg_replace("/'/","&#146;",$r);

$query1 = "channel/item[title='$p']/title";
$query2 = "channel/item[title='$p']/url";
$query3 = "channel/item[title='$p']";

$entries = $xpath->query($query1);
$entries2 = $xpath->query($query2);
$entries3 = $xpath->query($query3);

foreach ($entries as $entry) {
foreach ($entries2 as $entry2) {
foreach ($entries3 as $entry3) {

$oldchapter = $entry->parentNode->removeChild($entry);
$oldchapter2 = $entry2->parentNode->removeChild($entry2);
$oldchapter3 = $entry3->parentNode->removeChild($entry3);

$dom->preserveWhiteSpace = false;

}
}
}
}

$dom->formatOutput = true;

$dom->save("../$userid.xml") 
```

基本上，我的代码从 URL 中提取标题，用“|^”分隔（例如 title1|^title2|^title3|^）。因为“|^”附加到每个标题的末尾，所以我必须从数组中删除空值。然后，因为带有撇号的标题像“Title\\'s”一样出现，所以我必须两次剥离斜线才能摆脱它们。然后我加载一个新的 DOM 文档，并从现有 XML 文档中的 URL 中找到标题。然后我希望代码删除与 URL 中的标题相同的整个项目（标题、url 和项目本身），然后保存文档。

# excel - 如何 Excel 日期/时间减法

> ID：15767726
> 
> 赞同：0
> 
> 时间：2013-04-02T15:13:02.817
> 
> 标签：excel

我正在尝试在 Excel 中设置一个公式，该公式将从 中减去天数`4/29/2013 16:00`，但始终将时间保持在`6:00:00 PM`. 我找到了这个公式：

```
=DATE(YEAR(B2),MONTH(B2),DAY(B2)-3) 
```

减去天数，但它返回`4/26/2013 00:00`。我希望时间 ( `00:00`) 永远存在`18:00`。有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:28:53.927

最简单的方法是将 TimeValue("18:00") 或 0.75 (18/24) 添加到您的公式中。减去 3 天也可能是算术运算。

```
=TRUNC(NOW())-3 + 0.75 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:02:29.990

在 VBA 中，您可以使用以下`DateAdd`功能：

```
Sub DateChange()
Dim originalDate as Date
Dim newDate as Date

originalDate = "4/29/2013 16:00"
newDate = DateAdd("d", -3, originalDate)

MsgBox newDate,vbInformation

End Sub 
```

或者，您可以编写一个自定义函数来近似 DateAdd 函数并使其在工作表上可用：

```
Public Function wsDateAdd(interval As String, number As Double, myDate As Date)
'function to make 'DateAdd' VBA function available on worksheet.'

Dim newDate As Date

Select Case LCase(interval)
    Case "y", "m", "d", "h", "n", "s" 'years-months-days-hours-minutes-seconds'
        newDate = DateAdd(interval, number, myDate)
    End Select

wsDateAdd = newDate
End Function 
```

前：

![公式...](https://i.stack.imgur.com/qIGx5.jpg)

后：

![未格式化的值](https://i.stack.imgur.com/d8Zdu.jpg)

然后将适当的数字格式应用于单元格，瞧：

![格式化日期](https://i.stack.imgur.com/B2Tnu.jpg)

# android - 向后兼容的 PageTransformer

> ID：15767729
> 
> 赞同：1
> 
> 时间：2013-04-02T15:13:05.153
> 
> 标签：android, android-viewpager, android-animation, nineoldandroids

我正在尝试为 ViewPager 中的项目设置动画，而 PageTransformer 符合要求。我希望它向后兼容 Android 2.2，所以我使用 support v4 库。然而...

> 由于仅从 Android 3.0 及更高版本开始支持属性动画，因此在早期平台版本上的 > ViewPager 上设置 PageTransformer 将被忽略。

所以 PageTransformer 不能在旧版本上工作

我正在使用[Jake Wharton 的 NineOldAndroids](http://nineoldandroids.com/)库，所以我可以使用该 API，但我不确定如何为 ViewPager 制作动画。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T23:31:03.657

您需要`PageTransformer`使用`AnimatorProxy`包装器来实现在视图上设置转换属性。

然后困难的部分是`ViewPager`将忽略`PageTransformer`较低的 API 版本。所以你需要修改`ViewPager`自身才能使用`PageTransformer`.

我[在 GitHub 上有一个支持库的分叉版本，](http://www.github.com/kedzie/android_frameworks_support)它允许这样做以及使用 NineOldAndroids 动画师进行自定义片段转换。使用 animator-transition 分支。这是一个 maven 项目，因此您可以从 v4 子目录构建它。

```
public class ZoomOutPageTransformer implements PageTransformer {
    private static float MIN_SCALE = 0.85f;
    private static float MIN_ALPHA = 0.5f;

    public void transformPage(View view, float position) {
        int pageWidth = view.getWidth();
        int pageHeight = view.getHeight();

        AnimatorProxy proxy = AnimatorProxy.wrap(view);

        if (position < -1) { // [-Infinity,-1)
            // This page is way off-screen to the left.
            proxy.setAlpha(0);
        } else if (position <= 1) { // [-1,1]
            // Modify the default slide transition to shrink the page as well
            float scaleFactor = Math.max(MIN_SCALE, 1 - Math.abs(position));
            float vertMargin = pageHeight * (1 - scaleFactor) / 2;
            float horzMargin = pageWidth * (1 - scaleFactor) / 2;
            if (position < 0) {
                proxy.setTranslationX(horzMargin - vertMargin / 2);
            } else {
                proxy.setTranslationX(-horzMargin + vertMargin / 2);
            }

            // Scale the page down (between MIN_SCALE and 1)
            proxy.setScaleX(scaleFactor);
            proxy.setScaleY(scaleFactor);

            // Fade the page relative to its size.
            proxy.setAlpha(MIN_ALPHA +
                (scaleFactor - MIN_SCALE) /
                (1 - MIN_SCALE) * (1 - MIN_ALPHA));
        } else { // (1,+Infinity]
            // This page is way off-screen to the right.
            proxy.setAlpha(0);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T13:35:31.443

[正如@mark.kedzierski 所说，从这里](https://raw.github.com/android/platform_frameworks_support/master/v4/java/android/support/v4/view/ViewPager.java)复制了 ViewPager 类并删除了版本的 if 语句（检查下面）并将其命名为 TransformableViewPager

```
public void setPageTransformer(boolean reverseDrawingOrder, PageTransformer transformer) {
    if (Build.VERSION.SDK_INT >= 11) {
        final boolean hasTransformer = transformer != null;
        final boolean needsPopulate = hasTransformer != (mPageTransformer != null);
        mPageTransformer = transformer;
        setChildrenDrawingOrderEnabledCompat(hasTransformer);
        if (hasTransformer) {
            mDrawingOrder = reverseDrawingOrder ? DRAW_ORDER_REVERSE : DRAW_ORDER_FORWARD;
        } else {
            mDrawingOrder = DRAW_ORDER_DEFAULT;
        }
        if (needsPopulate) populate();
    }
} 
```

我还必须将所有 PageTransformer 更改为 ViewPager.PageTransformer。然后像这样在自定义 PageTransformer 中进行转换，

```
if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB){
    // > 11 version
    view.setAlpha(0);
}
else
{
    // Nine Old Androids version
    ViewHelper.setAlpha(view, 0);
 } 
```

也可以使用 Ithink 代理，因此您不必编写版本检查。这甚至适用于 2.2

# asp.net-mvc - Entity Framework Code First - 一旦开发完成，我如何告诉我的应用程序现在使用生产数据库而不是创建本地数据库？

> ID：15767739
> 
> 赞同：0
> 
> 时间：2013-04-02T15:13:27.847
> 
> 标签：asp.net-mvc, database, ef-code-first, scaffolding

我在使用 MVC4 和 MVC 脚手架的实体框架 5 中使用 Code First（链接/教程： http: [//www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4- and?msg=4531106#xx4531106xx](http://www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and?msg=4531106#xx4531106xx)）从我的模型创建我的数据库。所以，基本上，当我运行应用程序时，如果我的模型发生变化，应用程序会删除并创建一个新数据库。那太棒了。现在，显然，这对本地发展非常有利。

但是当我的应用程序投入生产时呢？我如何告诉代码不再这样做，而是让我的应用程序使用我在 GoDaddy 上托管的数据库？我将 web.config 中的连接字符串更改为指向 GoDaddy 数据库的连接字符串，但这不起作用。发生的情况是代码仍然尝试使用旧的连接字符串，原因我不知道。**我现在**似乎无法让我的应用程序使用我在 GoDaddy 上创建的数据库。我开始后悔走代码优先路线....

这是我的`Application_Start`方法中自动生成数据库的代码行（在这种情况下，仅当我的模型发生更改时）：

```
System.Data.Entity.Database.SetInitializer(new System.Data.Entity.DropCreateDatabaseIfModelChanges<CapWorx.QuikCap.Models.CapWorxQuikCapContext>()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:21:41.163

我找到了解决我的问题的方法。

最初，我在上下文的构造函数中有以下内容：

```
static CapWorxQuikCapContext()
{
    Database.SetInitializer(new CodeFirstSeeder.Xml.DropCreateDatabaseAlways<CapWorxQuikCapContext>());
} 
```

请注意，此时 CodeFirstSeeder 无关紧要 - 它只是我安装的用于播种一些示例数据的策略。无论如何，我将上面的内容更改为：

```
public CapWorxQuikCapContext()
    : base("DefaultConnection")
{
} 
```

这告诉我的应用程序查看名为“DefaultConnection”的连接字符串并将其用作其数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:27:12.690

（根据我们的讨论/评论）

简单的规则是 -

如果您有“非静态 ctor” CapWorxQuikCapContext() : base("connection") - 那么您也必须在配置中使用相同的名称。

**否则 - 您必须将连接字符串命名为与您的 Context 类相同的名称**- 即完全是 CapWorxQuikCapContext。

如果您不这样做 - EF/CF 会创建自己的“连接”路径 - 即创建一些默认数据库名称 - 就像您的上下文一样 - 或者就像您在 ctor 中一样

# android - Android VideoView 在 stopPlayback() 后清除显示

> ID：15767742
> 
> 赞同：27
> 
> 时间：2013-04-02T15:13:36.863
> 
> 标签：android, android-widget

我正在使用 VideoView 组件来播放视频。手动调用 stopPlayback() 后，我似乎无法清除 VideoView 显示。我想重置 VideoView 以便原始背景可见。

1.  在 VideoView 组件中播放视频。
2.  选择要播放的新视频。
3.  VideoView 卡在第一个视频的最后一帧，直到下一个视频开始。如果下一个视频出现错误，则第一个视频中的静态图像仍然卡在那里。
4.  如果我让视频播放到完成状态，则显示被清除。

我正在使用的代码：

```
private VideoView videoViewer = null;

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
...
  if (videoViewer != null) {
    videoViewer.setOnPreparedListener(new OnPreparedListener());
  }
...
}

public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
  if (videoViewer != null) {
    videoViewer.stopPlayback();
    videoViewer.setVideoURI(Uri.parse("http://my_vido_url/playlist.m3u8"));
  }
}

private class OnPreparedListener implements MediaPlayer.OnPreparedListener {
  @Override
  public void onPrepared(MediaPlayer mp) {
    videoViewer.start();
  }
} 
```

请注意，基于 VideoView.java 源，stopPlayback() 对底层 MediaPlayer 执行以下操作：

```
public void stopPlayback() {
  if (mMediaPlayer != null) {
    mMediaPlayer.stop();
    mMediaPlayer.release();
    mMediaPlayer = null;
  }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-12T19:00:48.917

对我来说，有效的只是隐藏然后显示`VideoView`using [`setVisibility`](http://developer.android.com/reference/android/view/View.html#setVisibility(int))。

```
public void clearCurrentFrame() {
    videoView.setVisibility(GONE);
    videoView.setVisibility(VISIBLE);
} 
```

这是因为我想让它`VideoView`变得透明，而不是纯色。将背景设置为透明不起作用 - 视频帧仍然显示。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-03T12:28:37.383

除非有人可以提供更好的解决方案，否则我确定的解决方案是使用`setBackgroundResource`，它的名称似乎很奇怪，因为它似乎改变了前台资源。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
...
  videoViewer.setBackgroundResource(R.drawable.viewer_background);
...
}

public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
  if (videoViewer != null) {
    videoViewer.stopPlayback();
    // Set the background back to the drawable resource to clear the current video when switching to a new one.
    videoViewer.setBackgroundResource(R.drawable.viewer_background);
    videoViewer.setVideoURI(Uri.parse("http://my_vido_url/playlist.m3u8"));
  }
}

private class OnPreparedListener implements MediaPlayer.OnPreparedListener {
  @Override
  public void onPrepared(MediaPlayer mp) {
    videoViewer.start();
    // Clear the background resource when the video is prepared to play.
    videoViewer.setBackgroundResource(0);
  }
} 
```

我引用的 drawable 是一个简单`layer-list`的带有自定义蓝色背景和居中徽标图像的对象。

可绘制\viewer_background.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
  <item>
    <shape android:shape="rectangle">
      <solid android:color="@color/custom_blue" />
    </shape>
  </item>
  <item>
    <bitmap android:src="@drawable/img_logo"
      android:gravity="center" />
  </item>
</layer-list> 
```

或者，我也可以用来`setZOrderOnTop`控制表面视图的放置位置（您还可以在 VideoViewer 顶部定义另一个视图并以这种方式切换可见性）：

```
videoViewer.setZOrderOnTop(false);
videoViewer.setZOrderOnTop(true); 
```

或者，我也可以`setBackgoundColor`用来完成与以下相同的事情`setBackgroundResource`：

```
videoViewer.setBackgroundColor(getResources().getColor(R.color.custom_blue));
videoViewer.setBackgroundColor(Color.TRANSPARENT); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-28T08:02:46.167

只是这段代码：

```
videoView.setVideoURI(null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-15T06:41:32.140

好吧，对我来说，这个线程中的任何解决方案都不起作用，所以我尝试了其他方法，下面是对我有用的解决方案，

```
new Handler().postDelayed(new Runnable() {

     @Override
     public void run() {
        mVideoViewPlayList.setVisibility(View.GONE);
        mVideoViewPlayList.setVisibility(View.VISIBLE);
        mVideoViewPlayList.setVideoURI(Uri.parse(path));
    }
}, 500); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-29T05:45:35.850

### 你可以这样做；

```
videoView.stopPlayBack();   
 videoView.seekTo(0); 
```

希望对你有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-16T15:40:19.007

媒体控制器类本身已经具有此功能，使用下面这个简单的代码，您可以创建所有必要的交互。

```
MediaController mediaController = new MediaController (this); 
videoView.setMediaController(mediaController); 
```

# joomla - 使用 K2 v2.6.5 制作 SEF URL

> ID：15767743
> 
> 赞同：1
> 
> 时间：2013-04-02T15:13:36.773
> 
> 标签：joomla, seo, joomla-k2, sef

我正在使用 Joomla 2.5.1 和 K2 2.6.5。我想弄清楚如何在 K2 中使用 SEF url。我的网站带有“真实”文件夹“coolmovies”。Joomla 控制这个文件夹。

在 K2 中，我有一个类别 alias='scifi'，其中我有一个项目 alias='startrek' 和 'startrek' 的项目 id 为 42。目前这个 url 有效：

[http://mycoolsite.com/coolmovies/42-startrek](http://mycoolsite.com/coolmovies/42-startrek)

我将 K2 的 SEF 设置更新为以下内容： ![K2 v2.6.5 的 SEF 设置](https://i.stack.imgur.com/e90zP.jpg)

理论上，这现在应该可以工作：

[http://mycoolsite.com/coolmovies/scifi-startrek](http://mycoolsite.com/coolmovies/scifi-startrek)

但事实并非如此。我尝试了各种排列，但除了 404 错误我什么也没得到。

我找到了这个链接供参考。 [http://getk2.org/community/New-to-K2-Ask-here-first/6472-K2-SEO-issue---Can-it-be-fixed?limit=20&start=40](http://getk2.org/community/New-to-K2-Ask-here-first/6472-K2-SEO-issue---Can-it-be-fixed?limit=20&start=40)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T20:04:06.863

您的网址的构造是错误的。如果您的类别别名是“scifi”并且您的文章别名是“startrek”，则 url 应该是

[http://mycoolsite.com/scifi/startrek](http://mycoolsite.com/scifi/startrek)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T21:33:19.440

根据我的经验，使用 joomla 核心 SEF 很难控制 k2 url。您可能必须安装第 3 方组件。

我最终安装了 artioJoomSEF 并设法解决了它。

你也可以试试 aceSEF ( [http://www.joomace.net/joomla-extensions/acesef-joomla-seo-sef-urls](http://www.joomace.net/joomla-extensions/acesef-joomla-seo-sef-urls) )，我觉得它更容易使用。

# solr - 按日期查询获取总词频

> ID：15767747
> 
> 赞同：0
> 
> 时间：2013-04-02T15:13:43.500
> 
> 标签：solr

我想知道查询中的“前 10 个术语”（这只是一个日期范围查询）。我需要按日期划分的“总词频”......**不是**文档数，**也不仅仅是**整个索引中词频的计数。我已经研究了 Solr 术语组件和 Lucene 的 HighFreqTerms，但似乎都不支持我想要作为查询结果的操作。

我的索引非常简单......每个项目都进入“内容”字段，该字段也有一个“日期创建”字段（以支持查询）。对我可以使用的技术有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T02:22:01.923

[分面](http://docs.lucidworks.com/display/solr/Faceting)几乎提供了您正在寻找的内容，但会给出每个术语的文档频率，而不是总术语频率。将您的日期范围查询作为`/select`调用，然后添加参数： *`rows=0`因为您不想查看找到的文档，所以只计算 * `facet=true` * `facet.field=<the field with the required terms>` *`facet.limit=10`因为您想要前十个术语

在名为 的字段`text`上，部分响应如下所示：

```
<lst name="facet_counts">
  <lst name="facet_queries"/>
  <lst name="facet_fields">
    <lst name="text">
      <int name="from">3690</int>
      <int name="have">3595</int>
      <int name="it">3495</int>
      <int name="has">3450</int>
      <int name="one">3375</int>
      <int name="who">3221</int>
      <int name="he">3137</int>
      <int name="up">3125</int>
      <int name="all">3112</int>
      <int name="year">3089</int>
    </lst>
  </lst>
  <lst name="facet_dates"/>
  <lst name="facet_ranges"/>
</lst> 
```

警告，这个请求可能很慢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:32:27.523

当您查询相关日期时，您可以遍历[`scoreDoc`](https://lucene.apache.org/core/4_2_0/core/org/apache/lucene/search/ScoreDoc.html)返回的 s，并[获取`TermVector`](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/IndexReader.html#getTermVector%28int,%20java.lang.String%29)内容字段的 s，例如：

```
Terms terms = myIndexReader.getTermVector(currentScoreDoc.doc, "content"); 
```

然后您可以遍历[`terms.iterator()`](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/Terms.html#iterator%28org.apache.lucene.index.TermsEnum%29)，并为每个术语创建一个计数集合（从[`TermsEnum.next()`](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/util/BytesRefIterator.html#next%28%29)or[`TermsEnum.term()`](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/TermsEnum.html#term%28%29)方法获取）

# c++ - 嵌套命名空间中的流运算符重载

> ID：15767750
> 
> 赞同：1
> 
> 时间：2013-04-02T15:13:50.807
> 
> 标签：c++, namespaces, operator-overloading, stream-operators

**最近，当我实现一个类时，我创建了一个名为操作符**的嵌套命名空间，我在其中添加了流操作符。

我这样做是因为我经常需要在类的命名空间操作系统以外的命名空间中使用它们

```
using my_namespace::operators; 
```

就在我想要的地方，就是这样。

在这里，我有一个示例，其中包含类 Point、类 Segment 及其流运算符，其中 Segment 的流调用 Point 的流。但是......我无法编译：

**上课点：**

```
#ifndef POINT_HPP
#define POINT_HPP

#include <iostream>

namespace geom {

class Point
{
public:
    Point(int x_, int y_) : x(x_), y(y_) {};
    int x;
    int y;
 };

namespace operators {
    std::ostream& operator<<(std::ostream& out, const Point& p)
    {
        out << "(" << p.x << ", " << p.y << ")";
        return out;
    }
} // ~ namespace geom::operators
} // ~ namespace geom

#endif // ~ POINT_HPP 
```

**类段：**

```
#ifndef SEGMENT_HPP
#define SEGMENT_HPP

#include <iostream>
#include "point.hpp"

namespace geom_2d {

class Segment
{
public:
    Segment(const geom::Point& a_, const geom::Point& b_) : a(a_), b(b_) {};
    geom::Point a;
    geom::Point b;
};

namespace operators {
    std::ostream& operator<<(std::ostream& out, const Segment& p)
    {
        using namespace geom::operators;
        out << "[" << p.a << ", " << p.b << "]";
        return out;
    }

} // ~ namespace geom_2d::operators
} // ~ namespace geom_2d

#endif // ~ SEGMENT_HPP 
```

**主要的：**

```
#include <iostream>
#include "segment.hpp"
#include "point.hpp"

using namespace geom_2d::operators;

int main()
{
    geom::Point p1(3, 5);
    geom::Point p2(1, 6);
    geom_2d::Segment s(p1, p2);

    std::cout << s << std::endl;

    return 0;
} 
```

这无法编译，我得到：

```
../segment.hpp:21: error: no match for ‘operator<<’ in ‘std::operator<< [with _Traits = std::char_traits<char>](((std::basic_ostream<char, std::char_traits<char> >&)((std::ostream*)out)), ((const char*)"[")) << p->geom_2d::Segment::a’ 
```

如果我删除命名空间运算符编译正确，但正如我告诉你的那样，我想避免它。

我认为问题与在另一个命名空间运算符中使用命名空间运算符进行调用有关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:23:10.023

尚不清楚为什么您希望运算符与您的类型存在于不同的命名空间中。一般来说，建议操作员应该与他们操作的用户定义类型位于相同的命名空间中。这样做会启用 Argument Dependent Lookup，这反过来将有助于在您使用它时找到正确的运算符（并将解决您的编译错误）。

如果**确实**有理由将运算符放在不同的命名空间中，您可以在该命名空间中提供一个标记类型，然后使用继承来强制 ADL 查看嵌套的命名空间（using 指令对 ADL 没有帮助）：

```
namespace A {
   namespace operators {
      struct tag {};
   }
   struct B : operators::tag {};
   namespace operators {
      std::ostream& operator<<(std::ostream& out, const ::A::B& obj) { ... }
   }
}
namespace C {
   void foo() {
      ::A::B b;
      std::cout << b;
   }
} 
```

请注意，这在某种程度上是一种 hack，有些人会惊讶于运算符未在`A`命名空间中定义......它之所以有效，是因为类型的关联命名空间集包括定义类型的命名空间以及命名空间它的所有基础（在这种情况下，`::A::operators`由于 and 之间的继承关系而被`::A::B`拉出`::A::operators::tag`）

**注意**：如果您在与类型相同的命名空间中定义运算符，则**根本**不需要 using 指令，因为 ADL 会在需要时找到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:25:44.440

问题是您已经通过 将命名空间导入到代码中`using`，但库头文件并没有这样做。所以他们只能在全局命名空间、命名空间`std`或通过参数相关的查找中找到运算符。

你可以通过这样做来解决这个问题

```
using namespace geom_2d::operators; 
```

前

```
#include <iostream> 
```

但这在我看来是一个糟糕的解决方案。

# c# - 使用 LINQ-to-SQL 实现 INotifyPropertyChanged

> ID：15767754
> 
> 赞同：3
> 
> 时间：2013-04-02T15:14:03.397
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone, inotifypropertychanged

我正在为我的实体使用 LINQ-to-SQL 构建 Windows Phone 8 应用程序。我当前的实现使用简单的 INotifyPropertyChanging/INotififyPropertyChanged 方法：

```
[Table]
public class Item : INotifyPropertyChanged, INotifyPropertyChanging
{
    private int _itemId;

    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", AutoSync = AutoSync.OnInsert)]
    public int ItemId
    {
        get { return _itemId; }
        set
        {
            if (_itemId != value)
            {
                NotifyPropertyChanging("ItemId");
                _itemId = value;
                NotifyPropertyChanged("ItemId");
            }
        }
    }

    [Column]
    internal int? _groupId;

    private EntityRef<Board> _group;

    [Association(Storage = "_group", ThisKey = "_groupId", OtherKey = "GroupId", IsForeignKey = true)]
    public Group Group
    {
        get { return _group.Entity; }
        set
        {
            NotifyPropertyChanging("Group");
            _group.Entity = value;

            if (value != null)
            {
                _groupId = value.BoardId;
            }

            NotifyPropertyChanging("Group");
        }
    }
} 
```

我想将属性设置器更改为我的新方法，我在这里创建：http: [//danrigby.com/2012/04/01/inotifypropertychanged-the-net-4-5-way-revisited/](http://danrigby.com/2012/04/01/inotifypropertychanged-the-net-4-5-way-revisited/)

```
protected bool SetProperty<T>(ref T storage, T value, [CallerMemberName] String propertyName = null)
{
    if (object.Equals(storage, value)) return false;

    this.OnPropertyChanging(propertyName);
    storage = value;
    this.OnPropertyChanged(propertyName);
    return true;
} 
```

*像ItemId*这样的属性很容易实现，但我不知道如何为*GroupId*实现它，因为应该在 _group.Entity 上设置*值*，并且不能作为参考传递。

这是我的解决方法（尚未测试），但我认为 PropertyChanging/PropertyChanged 事件将提早提早：

```
 public Group Group
    {
        get { return _group.Entity; }
        set
        {
            var group = _group.Entity;

            if (SetProperty(ref group, value))
            {
                _group.Entity = group;

                if (value != null)
                {
                    _groupId = value.GroupId;
                }
            }
        }
    } 
```

这个问题有明确的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:59:28.697

我找到了解决方案。只需用另一个实现重载该方法：

```
 protected T SetProperty<T>(ref T field, T value, [CallerMemberName] string propertyName = null)
    {
        if (EqualityComparer<T>.Default.Equals(field, value))
        {
            return value;
        }

        NotifyPropertyChanging(propertyName);
        field = value;
        NotifyPropertyChanged(propertyName);

        return value;
    }

    protected T SetProperty<T>(ref EntityRef<T> field, T value, [CallerMemberName] string propertyName = null) where T : class
    {
        NotifyPropertyChanging(propertyName);
        field.Entity = value;
        NotifyPropertyChanged(propertyName);

        return value;
    } 
```

像这样称呼它：

```
 public Group Group
    {
        get { return _board.Entity; }
        set
        {
            if (SetProperty(ref _group, value) != null)
            {
                _groupId = value.GroupId;
            }
        }
    } 
```

# windows-phone-7 - Windows Phone 7 中的 Segoe 符号 UI

> ID：15767756
> 
> 赞同：2
> 
> 时间：2013-04-02T15:14:10.650
> 
> 标签：windows-phone-7, xaml, fonts, microsoft-metro

我在针对 Windows Phone 7.1 的应用程序中有一个非常奇怪的行为（因此也将在 Windows Phone 8 上运行）。

对于我的图标，我使用的是 Segoe UI Symbol 字体。当我在 WP 8 上运行应用程序时，图标显示正确。如果我在 WP7 中运行它，一些图标会显示为矩形。

我认为 WP7 上的字体可能是旧版本，所以我所做的就是从我的 Win8 PC 下载字体并将其用作 WP7 中的嵌入字体，但它仍然无法正常工作。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:11:58.377

唔，

我设法让它工作。我需要做的是：

*   清理字体
*   重命名原始文件名
*   使用 TypoGraf 重命名字体
*   重建项目

我不是 100% 确定一切都需要，但至少通过这种方式我得到了它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T16:59:44.777

您是否将其称为“资源”？尝试使用程序集名称指定完整路径。像

```
/Acme.Product;component/Assets/seguisym.ttf#Segoe UI Symbol 
```

# c - 将二进制浮点“1101.11”转换为十进制（13.75）的正确算法？

> ID：15767758
> 
> 赞同：3
> 
> 时间：2013-04-02T15:14:14.910
> 
> 标签：c, floating-point, floating-point-conversion

[我用 C 语言编写了一个程序，将二进制](http://kipirvine.com/asm/workbook/floating_tut.htm)( ) 表示的浮点数转换`1101.11`为十进制 ( `13.75`)。

但是，我似乎无法从算法中得到正确的值。

将二进制浮点数转换为十进制的正确方法是什么？

我正在使用 Dev CPP 编译器（32 位）。算法定义如下：

```
void b2d(double p, double q )
{
   double rem, dec=0, main, f, i, t=0;

   /* integer part operation */    
   while ( p >= 1 )
   {
     rem = (int)fmod(p, 10);
     p = (int)(p / 10);
     dec = dec + rem * pow(2, t);
     t++;
   }

   /* fractional part operation */
   t = 1; //assigning '1' to use 't' in new operation
   while( q > 0 )
   {
     main = q * 10;
     q = modf(main, &i); //extration of frational part(q) and integer part(i)
     dec = dec+i*pow(2, -t);
     t++;
   }

   printf("\nthe decimal value=%lf\n",dec); //prints the final output
}

int main()
{
   double bin, a, f;

   printf("Enter binary number to convert:\n");
   scanf("%lf",&bin);

   /* separation of integer part and decimal part */
   a = (int)bin;
   f = bin - a;       
   b2d(a, f); // function calling for conversion

   getch();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:14:10.200

正如您所相信的那样，您不会将“1101.11”读取为*以二进制表示的浮点数*。您正在将其读取为*转换为 IEEE 双精度浮点值的 base-10 浮点数*，**然后**尝试更改基数。

此中间步骤固有的不精确性是您出现问题的原因。

正如 Vicky 所建议的，一种更好的方法是：

1.  将“1101.11”读为字符串或文本行
2.  转换整数和小数部分（`whole=b1101=13`和`numerator=b11=3`，`denominator=4`）
3.  将这些重新组合成`whole + numerator/denominator = 13.75`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T16:24:37.177

## 解决方案

以下将按预期工作：

输出：

```
➤ gcc bin2dec.c -lm -o bin2dec && bin2dec
1101.11 -> 13.750000
1101 -> 13.000000
1101\. -> 13.000000
.11 -> 0.750000 
```

代码 ( `bin2dec.c`):

```
#include <stdio.h>
#include <math.h>

double convert(const char binary[]){
  int bi,i;
  int len = 0;
  int dot = -1;
  double result = 0;

  for(bi = 0; binary[bi] != '\0'; bi++){
    if(binary[bi] == '.'){
      dot = bi;
    }
    len++;
  }
  if(dot == -1)
    dot=len;

  for(i = dot; i >= 0 ; i--){
    if (binary[i] == '1'){
      result += (double) pow(2,(dot-i-1));
    }
  }
  for(i=dot; binary[i] != '\0'; i++){
    if (binary[i] == '1'){
      result += 1.0/(double) pow(2.0,(double)(i-dot));
    }
  }
  return result;
}

int main()
{
   char  bin[] = "1101.11";
   char  bin1[] = "1101";
   char  bin2[] = "1101.";
   char  bin3[] = ".11";

   printf("%s -> %f\n",bin, convert(bin)); 
   printf("%s -> %f\n",bin1, convert(bin1)); 
   printf("%s -> %f\n",bin2, convert(bin2)); 
   printf("%s -> %f\n",bin3, convert(bin3)); 

   return 0;
} 
```

## 解释

上面的代码首先找到数字中小数点的索引。

一旦知道这一点，它就会从该索引向前和向后遍历字符串，将适当的值添加到`result`变量中。

第一个循环从小数点向后走，如果字符是 ，则累积 2 的幂`1`。它将与小数点的距离作为 2 的幂，减去 1 以使索引正确。即，它累积：

```
pow(2,<distance-from-decimal-point>) 
```

当索引到达字符串的开头时，循环停止。

第二个循环向前走直到字符串的末尾，[并按预期](http://kipirvine.com/asm/workbook/floating_tut.htm)处理小数部分，它也使用与索引的距离，但这次累积小数部分：

```
1/pow(2,<distance-from-decimal-point>) 
```

## 制定的例子：

```
1101.11 = 1101 + 0.11

1101 = 1*2^3 + 1*2^2 + 0*2^1 + 1*2^0 = 8 + 4 + 0 + 1 = 13

0.11 = 1/(2^1) + 1/(2^2) = 0.5 + 0.25 = 0.75

1101.11 = 13.75 
```

谨防格式错误的输入。“10gsh.9701072.67812”会给你一个结果。意义不大：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T16:19:06.900

这段代码行为异常：我添加了一些简单的打印语句

```
 while(q>0)
  {
     double i;
     main=q*10.0;
     q=modf(main, &i); //extration of frational part(q) and integer part(i)
     cout << "main = " << main << " frac part " << q << " int part " << i << endl;
     cin.get();
     dec=dec+i*pow(2,-t);
     t++;
  } 
```

当您输入 1101.11 时，会显示以下输出：

```
Enter binary number to convert(e.g: 1101.11 which will be 13.75 in decimal):
1101.11
bin in main 1101.11
p  1101 q 0.11

//inside the above while loop code
main = 1.1 frac part 0.1 int part 1
main = 1 frac part 1 int part 0  //^^^^^Error, given main=1, it should output integer part 1, fraction part 0
main = 10 frac part 1 int part 9  //^^^^^same strange error here, it should exit while already 
```

所以你得到了错误的结果。我`modf`用输入1单独测试，它给出了正确的结果。

所以我的猜测是您正在将二进制数读取为双精度数，然后尝试将此双精度数转换为二进制数。数字的精度可能在幕后发生了一些事情，尽管它表明它是`1101.11`. 正如@Useless 所建议的，您可能需要将数字读取为字符串，找出小数点前后的子字符串`.`然后将这两个部分分别转换为十进制。

# c++ - windows无法加载位图图像

> ID：15767760
> 
> 赞同：1
> 
> 时间：2013-04-02T15:14:18.637
> 
> 标签：c++, windows, visual-studio-2010

该程序仅显示一个空白窗口。

我想将位图图像随机加载到屏幕上。我无法弄清楚这一点。即使我在此程序中为图像指定不同的名称，该程序仍会毫无错误地执行并显示空白窗口。

请帮我！

```
#ifndef UNICODE
#define UNICODE
#endif

/*have used unicode */

#include<Windows.h>
#include<iostream>
#include<time.h>
using namespace std;

bool gameover =FALSE;
const wchar_t classname[] = L"My first procedure and main";
HWND window;
HDC device;
LRESULT CALLBACK WindowProc(HWND hwnd,UINT uMsg,WPARAM wParam,LPARAM lParam);

ATOM MyRegisterClass(HINSTANCE hInstance)
{
    //set the new windows properties 
    WNDCLASS wc = {};

    wc.lpfnWndProc=(WNDPROC)WindowProc;
    wc.hInstance=hInstance;
    wc.style=CS_HREDRAW|CS_VREDRAW;
    wc.hbrBackground=(HBRUSH)GetStockObject(COLOR_WINDOW +1);
    wc.lpszClassName=classname;

    return RegisterClass(&wc);
}

bool InitInstance(HINSTANCE hInstance,int nCmdShow)
{ 
    //Create a new window
    window=CreateWindowEx(0,
                          classname,
                          L"My Program",
                          WS_OVERLAPPEDWINDOW,
                          CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,
                          NULL,
                          NULL,
                          hInstance,
                          NULL );

    //Any error in creating the window ?
    if(window==0)
        return 0;

    //Display the window 
    ShowWindow(window,nCmdShow);
    UpdateWindow(window);
    device=GetDC(window);
    return 1;
}

bool Game_Init()
{
    srand(time(NULL));
    return 1;
}

// This function handles the loading of bitmap image into the window
void DrawBitmap( char *filename,int x,int y)
{
    //Load the bitmap image
    HBITMAP image=(HBITMAP)LoadImage(0,L"image.bmp",IMAGE_BITMAP,0,0,LR_LOADFROMFILE);
    BITMAP bm;
    GetObject(image,sizeof(BITMAP),&bm);
    HDC hdcdevice=CreateCompatibleDC(device);
    SelectObject(hdcdevice,image);
    BitBlt(device,x,y,bm.bmWidth,bm.bmHeight,hdcdevice,0,0,SRCCOPY);

    //delete the device context and bitmap
    DeleteDC(hdcdevice);
    DeleteObject((HBITMAP)image);
}

void Game_Run()
{
    if(gameover==true)
        return;
    RECT rect;
    GetClientRect(window,&rect);

    //draw bitmap at random location
    int x=rand() % (rect.right-rect.left);
    int y=rand() %(rect.bottom-rect.top);

    DrawBitmap("image.bmp",x,y);
}

void Game_End()
{
    //Free the device
    ReleaseDC(window,device);
}

int WINAPI wWinMain(HINSTANCE hInstance,HINSTANCE,PWSTR PCmdLine,int nCmdShow)
{   
    //Register the class    
    MyRegisterClass(hInstance);

    //Initialize application
    if(!InitInstance(hInstance,nCmdShow))
        return 0;

    //Declare variables
    MSG msg ={ };

    //Initialize the game
    if(!Game_Init())
        return 0;

    //main message loop
    while(!gameover)
    {
        if (PeekMessage(&msg,NULL,0,0,PM_REMOVE))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
        Game_Run();
    }
    Game_End();

    return msg.wParam;
}

//This is window procedure function for handling closing of windows.
LRESULT CALLBACK WindowProc(HWND hwnd,UINT uMsg,WPARAM wParam,LPARAM lParam)
{   
    switch(uMsg) 
    { 
        case WM_CLOSE: 
            if(MessageBox(hwnd,L"Do you want to close this window",NULL,MB_OKCANCEL)==IDOK)           
                gameover=true;
            DestroyWindow(hwnd);

    }
    return DefWindowProc(hwnd,uMsg,wParam,lParam);
} 
```

![这是我的程序的输出](https://i.stack.imgur.com/zY6vO.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:26:13.187

将 bmp 文件的完整路径传递给 LoadImage 函数。还要检查 LoadImage 函数的返回值。

例如。

```
HBITMAP image=(HBITMAP)LoadImage(0,L"c:\\wherever\\whatever\\image.bmp",IMAGE_BITMAP,0,0,LR_LOADFROMFILE);
if(image == NULL)
    MessageBox(0, "Couldn't load the image", "Error", MB_OK);
else
    .... Whatever else ...... 
```

几乎可以肯定，您的 LoadImage 无法找到“image.bmp”，因此返回 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:44:17.347

检查句柄的值，例如“设备”和“图像”。

尝试单步执行代码，看看是否一切正常。

您还可以选择使用 LoadBitmap()。

# amazon-web-services - 单个 Vagrantfile 可以同时拥有 AWS 和 VirtualBox 提供商吗？

> ID：15767766
> 
> 赞同：7
> 
> 时间：2013-04-02T15:14:39.617
> 
> 标签：amazon-web-services, vagrant

我是 Vagrant 的新手，目前正在尝试从单个 Vagrantfile 配置一个 VirtualBox 和 AWS 盒子（使用 vagrant-aws 插件）。

我的 Vagrantfile 如下图所示：

```
Vagrant.configure("2") do |config|

    config.vm.define :web do |web_config|
        web_config.vm.box = "dummy"
        web_config.vm.box_url = "https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box"

        web_config.vm.provider :aws do |aws|
            aws.access_key_id = "ACCESS KEY"
            aws.secret_access_key = "SECRET KEY"
        end
    end

    config.vm.define :db do |db_config|
        db_config.vm.box = "precise32"
        db_config.vm.box_url = "http://files.vagrantup.com/precise32.box"

        db_config.vm.provider :virtualbox  do |vb|

        end     
    end
end 
```

所以基本上我试图让 AWS 用于 web 和一个网络盒用于数据库。是否可以从单个 Vagrantfile 执行此操作？下面的 vagrant up 命令会创建和配置两个虚拟机吗？

```
vagrant up --provider=aws 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T17:15:55.413

从[Basic Provider Usage来看](http://docs.vagrantup.com/v2/providers/basic_usage.html)

> 限制
> 
> Vagrant 目前限制您为每台机器提供一个提供程序。例如，如果您有一个多机环境，您可以启动一台由 VirtualBox 支持的计算机和另一台由 VMware Fusion 支持的计算机，但您不能同时使用 VirtualBox 和 VMware Fusion 支持同一台计算机。
> 
> 这是一个将在未来版本的 Vagrant 中删除的限制。

这确实是可能的！但是您必须记住，公共网络和专用网络之类的功能不能（通常，请参阅[专用网络](http://docs.vagrantup.com/v2/networking/private_network.html)）跨提供商边界使用。

关于你问题的第二部分，我想你需要发出两个命令，一个用于你的多虚拟机环境中的每个提供者，但这只是一个猜测——关于提供者和多虚拟机环境的官方文档很少。

# pagination - “破碎”的分页

> ID：15767767
> 
> 赞同：2
> 
> 时间：2013-04-02T15:14:48.323
> 
> 标签：pagination, http-status-code-404, wordpress

在我的 WordPress 网站上，我为自定义帖子类型工作了分页。当我说工作时，我的意思是分页正在出现。例如，每当我尝试转到第 2 页时，都会收到 404 错误。我有一个非常相似的代码片段，可以在博客文章中完美运行。有什么建议么？代码如下：

```
 <?php
/**
 * @package WordPress
 * @subpackage themename
 * Template Name: Resources Template
 */

get_header(); ?>
<div id="main">
        <div id="primary">
            <div id="content">

                <?php the_post(); ?>

                <article id="post-<?php the_ID(); ?>" <?php post_class(); ?> role="article">

                        <h1 class="entry-title"><?php the_title(); ?></h1>

                    <div class="entry-content">
                        <?php the_content(); ?>
                        <?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args = array( 'post_type' => 'cbd_resources', 'posts_per_page' => 5, 'paged' => $paged); // -1 Shows ALL Posts
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post(); ?>

                        <?php
$resourceURL = get_post_meta($post->ID,'resourceURL',true);
$thumb = wp_get_attachment_image_src(get_post_thumbnail_id(), 'thumbnail_name');
$imgURL = (isset($thumb[0]) ? $thumb[0] : get_template_directory_uri() . "/images/placeholder.jpg"); ?>

                        <div class="testimonialListing">
                            <img src="<?php echo get_template_directory_uri(); ?>/thumb.php?src=<?php echo urlencode($imgURL); ?>&w=127&zc=2">
                            <div class="testimonialInfo">
                                <span><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></span>
                                <?php the_content(); ?>
                                <strong><a href="<?php the_permalink(); ?>">READ MORE</a></strong>
                            </div>
                        </div>

                        <?php endwhile; ?>

                    <?php wp_reset_query(); ?>
                        <div class="pagination">
                        <?php $total_pages = $loop->max_num_pages;

if ($total_pages > 1){

    $current_page = max(1, get_query_var('paged'));

    echo paginate_links(array(
            'base' => get_pagenum_link(1) . '%_%',
            'format' => '/page/%#%',
            'current' => $current_page,
            'total' => $total_pages,
        ));
}   ?>
                        </div>
                                            </div><!-- .entry-content -->
                </article><!-- #post-<?php the_ID(); ?> -->

            </div><!-- #content -->
            <div id="secondary" class="widget-area"><?php if ( dynamic_sidebar('resources-sidebar') ) : else : ?><?php endif; ?></div>
        </div><!-- #primary -->

<?php get_footer(); ?> 
```

# jquery - jQuery对象数组？

> ID：15767768
> 
> 赞同：0
> 
> 时间：2013-04-02T15:14:48.573
> 
> 标签：jquery, arrays

我不知道如何解释，以下代码有效

```
function DrawIrregularChartGrid() {
    $('#data_grid').datagrid({
        columns: [[{"field":"MeterID","title":"MeterID"},{"field":"ADateTime","title":"ADateTime"}]]
    });
} 
```

但这一个不起作用，没有错误消息，网格正在加载但列名称为空。

```
function DrawIrregularChartGrid() {
    $('#data_grid').datagrid({
        columns: [GetGridColumnNames()]
    });
} 
```

`GetGridColumnNames()`

返回

`[{"field":"MeterID","title":"MeterID"},{"field":"ADateTime","title":"ADateTime"}]`

**GetGridColumnNames 函数**

```
function GetGridColumnNames() {

var cols = [];
var IrregularChartParams = InitializeChartParams();

// parametreleri json stringe cevir...
var chartParams = JSON.stringify(IrregularChartParams);

$.ajax({
    type: "POST",
    url: app_base_url + 'Graph/GetGridColumnNames',
    contentType: 'application/json; charset=utf-8',
    data: chartParams,
    success: function (result) {
        $.each(result, function (index, value) {
            cols.push(result);
        });
    },
    error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
    },
    beforeSend: function () {

    },
    complete: function () {
    }
});
return cols;
} 
```

dataGrid 列属性类型是对象数组。如何将`GetGridColumnNames`返回对象分配给`columns`属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:18:06.050

它不起作用，因为您的 AJAX 调用是*异步*的，因此`cols`函数返回时为空。

您需要*推迟*所有后续操作，直到`success:`调用完成。更好的是，删除`success:`and`error:`处理程序并使用显式延迟对象，即：

```
function GetGridColumnNames() {
    return $.ajax(...).then(
        function(result) {
            // pre-process result and _return_ the desired array
            ...
            return cols;
        },
        function(xhr, ajaxOptions, thrownError) {
            // error handling
        },
    }
}

GetGridColumnNames().done(function(cols) {
    // use column names here
}); 
```

该`.then`调用被传递了两个回调 - 一个用于预处理返回的 JSON 数据，另一个用于处理错误。

# ruby - EventMachine Web-socket 客户端 TLS 连接

> ID：15767770
> 
> 赞同：4
> 
> 时间：2013-04-02T15:14:51.553
> 
> 标签：ruby, ssl, websocket, eventmachine

我很难让 EventMachine Web-socket 客户端`wss://`使用 TLS 连接到安全的 Web-socket 服务器。

我有一个 EventMachine web-socket 服务器设置并且运行良好。我可以在浏览器中使用 javascript，并且连接效果很好。只是无法让 EventMachine Web-socket 客户端连接工作。

我认为这可能与证书有关，但不知道如何判断。

这是我的客户代码：

```
require 'eventmachine'
require 'em-websocket-client'

EM.run do
    conn = EventMachine::WebSocketClient.connect("ws://0.0.0.0:9110/message")

    conn.callback do
        data = {data: 'data'}
        conn.send_msg data.to_json
    end

    conn.errback do |e|
        puts "Got error: #{e}"
    end

    conn.stream do |msg|
        puts "<#{msg}>"
        conn.close_connection
    end

    conn.disconnect do
        puts "success"
        EM::stop_event_loop
    end
end 
```

我没有错误？我可以从客户端破译。在服务器上（以调试模式运行）仅显示：

```
[[:initialize]]
[[:unbind, :connection]] 
```

我也尝试用 wss:// 替换 ws:// 无济于事。

顺便说一句，如果我把加密排除在问题之外，一切都会很好。

还有其他人在这方面取得成功吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:06:57.953

事实证明，目前`EventMachine::WebSocketClient`不支持`wss://`连接。服务器可以，但那是一个单独的项目。

我最终使用了支持[的 faye-websocket-ruby](https://github.com/faye/faye-websocket-ruby)`wss://`

README.md 中有关于如何使用的示例。

# paypal - 贝宝：退款时激活 ipn 脚本

> ID：15767774
> 
> 赞同：2
> 
> 时间：2013-04-02T15:14:55.177
> 
> 标签：paypal, paypal-ipn

我使用paypal ipn，并且在paypal退款完成后ipn脚本被激活

我如何在 paypal ipn 中知道这是退款并区别对待？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:29:36.067

payment_status=已退款

请参阅此处的第 48 页：[https ://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/ipnguide.pdf](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/ipnguide.pdf)

* * *

2019 年编辑，当前链接： [https ://developer.paypal.com/docs/classic/ipn/integration-guide/IPNandPDTVariables/#transaction-and-notification-related-variables](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNandPDTVariables/#transaction-and-notification-related-variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-23T08:49:15.880

```
if($_POST["payment_status"] == "Refunded"){
    //it's a refund
} 
```

请注意，还有其他付款状态，例如已完成（针对销售）和已撤销（针对买家提出投诉）。

# javascript - 在 JS 中创建一个计算器并获得一个未定义的。初级程序员

> ID：15767778
> 
> 赞同：1
> 
> 时间：2013-04-02T15:15:08.763
> 
> 标签：javascript, calculator

所以我正在创建一个可以进行非常简单计算的计算器。只是一些简单的数学。然而，有一个属性有很多不同的变量。原始程序是用 jQuery 编写的，所以我必须重做属性才能使用我们网站的常规 Javascript 框架。我认为这是声明的变量之一的问题。如果你运行程序，你会得到“未定义”的答案，就像它缺少一个变量一样。

```
<script type="text/javascript">
var volts = document.getElementById("voltDrop_volts")[0].value;
var acdc = document.getElementById("voltDrop_acdc")[0].value;
var amps = document.getElementById("voltDrop_amps")[0].value;
var length = document.getElementById("voltDrop_ft")[0].value;
var awg = document.getElementById("voltDrop_awg")[0].value;
var ohm = 0;

if (awg === 36) { ohm = 371.0; }
else if (awg === 34) { ohm = 237.0; }
else if (awg === 32) { ohm = 164.0; }
else if (awg === 30) { ohm = 103.0; }
else if (awg === 28) { ohm = 64.9; }
else if (awg === 26) { ohm = 37.3; }
else if (awg === 24) { ohm = 23.3; }
else if (awg === 22) { ohm = 14.7; }
else if (awg === 20) { ohm = 10.0; }
else if (awg === 18) { ohm = 6.4; }
else if (awg === 16) { ohm = 4.0; }
else if (awg === 14) { ohm = 2.5; }
else if (awg === 12) { ohm = 1.6; }
else if (awg === 10) { ohm = 1.1; }
else if (awg === 8) { ohm = .62; }
else if (awg === 6) { ohm = .40; }
else if (awg === 4) { ohm = .24; }
else if (awg === 2) { ohm = .16; }
else if (awg === 1) { ohm = .13; }
else if (awg === '1/0') { ohm = .096; }
else if (awg === '2/0') { ohm = .077; }
else if (awg === '3/0') { ohm = .062; }
else if (awg === '4/0') { ohm = .049; }
else { msg = "Error"; }

var vDrop = ((ohm * 2) * (length / 1000) * amps);
var vFinal = (volts - vDrop);

function formReset()
    {
    document.getElementById("form1").reset();
    }
function printAnswer()
    {
        document.getElementById("theAnswer").innerHTML = vFinal;
    }
</script> 
```

我将讨论这个，希望你能理解我是如何编码的。第一个 var 是一个包含 3 个选项的下拉列表。第二个是带有 2 个不影响计算的选项的下拉菜单。第三个是用户输入，只要用户输入任何数字，它就应该起作用。四是用户输入的长度。也应该使用任何数字。第五是我认为有些事情搞砸了。它也是一个数字，但它必须是 if/else 表中的数字之一。

就我个人而言，我认为我没有正确编码 if/else 的东西。`var`元素是否应该`ohm`包含 if/else 语句？任何帮助是极大的赞赏。我不使用 Javascript 工作，但我的老板把这个甩给了我，并说弄清楚，这就是我结束的地方。

谢谢！

编辑：感兴趣的人的HTML

```
 <body>
<h1>Voltage Drop Calculator Tool</h1> 
<form id=form1>
<div class="calculator-wrapper" id="voltageDropCalc" style="margin: 10px 0 20px 20px; padding: 15px;"><!-- BEGIN Calc wrapper --> 

<p>1\. Initial Voltage</p>

<select name="voltDrop_volts" size="1" style="padding: 3px;"> <option>Choose...</option> <option value="12">12 Volt</option> <option value="24">24 Volt</option> </select>
<p>2\. AC / DC</p>
<select class="sized" name="voltDrop_acdc" size="1" style="padding: 3px;"> <option selected="selected" value="dc">DC</option> <option value="ac">AC</option> </select>

<p class="field-label field-label-right">3\. Current (Amps)</p>

<input align="bottom" class="sized" name="voltDrop_amps" size="15" style="padding: 3px;" type="text" />

<p class="field-label field-label-right">4\. Cable Length (ft)</p>

<input align="bottom" class="sized" name="voltDrop_ft" size="15" style="padding: 3px;" type="text" />

<p class="field-label field-label-right">5\. Cable Gauge (AWG)</p>
<input align="bottom" class="sized" name="voltDrop_awg" size="15" style="padding: 3px;" type="text" />

<p><a href="#" id="voltageDropSubmit" style="text-decoration: none;" onclick="printAnswer()"><button type="button">Calculate</button></a> &nbsp;&nbsp;&nbsp;<a class="clearBtn" href="#" style="text-decoration: none;"><button type="button" onclick="formReset()">Cancel</button></a></p>
<div class="results-box">
<p id="theAnswer"style="margin: 10px 0;">&nbsp;</p>
</div>
</form>
<p>Note: Industry standard is a voltage drop of no greater than 10%.</p>

<div class="errorMsg"></div>
<!-- displays error messages to user -->
</div>
<!-- END Calc wrapper -->
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:19:01.623

你正在尝试它 getElementsByName() 应该是 document.getElementsByName() 像这样：

```
var volts = document.getElementsByName("voltDrop_volts")[0].value;
var acdc = document.getElementsByName("voltDrop_acdc")[0].value;
var amps = document.getElementsByName("voltDrop_amps")[0].value;
var length = document.getElementsByName("voltDrop_ft")[0].value;
var awg = document.getElementsByName("voltDrop_awg")[0].value; 
```

测试：

```
<body>
<h1>Voltage Drop Calculator Tool</h1> 
<form id=form1>
<div class="calculator-wrapper" id="voltageDropCalc" style="margin: 10px 0 20px 20px; padding: 15px;"><!-- BEGIN Calc wrapper --> 

<p>1\. Initial Voltage</p>

<select name="voltDrop_volts" size="1" style="padding: 3px;"> <option value="0">Choose...</option> <option value="12">12 Volt</option> <option value="24">24 Volt</option> </select>
<p>2\. AC / DC</p>
<select class="sized" name="voltDrop_acdc" size="1" style="padding: 3px;"> <option selected="selected" value="dc">DC</option> <option value="ac">AC</option> </select>

<p class="field-label field-label-right">3\. Current (Amps)</p>

<input align="bottom" class="sized" name="voltDrop_amps" size="15" style="padding: 3px;" type="text" />

<p class="field-label field-label-right">4\. Cable Length (ft)</p>

<input align="bottom" class="sized" name="voltDrop_ft" size="15" style="padding: 3px;" type="text" />

<p class="field-label field-label-right">5\. Cable Gauge (AWG)</p>
<input align="bottom" class="sized" name="voltDrop_awg" size="15" style="padding: 3px;" type="text" />

<p><a href="#" id="voltageDropSubmit" style="text-decoration: none;" onclick="printAnswer()"><button type="button">Calculate</button></a> &nbsp;&nbsp;&nbsp;<a class="clearBtn" href="#" style="text-decoration: none;"><button type="button" onclick="formReset()">Cancel</button></a></p>
<div class="results-box">
<p id="theAnswer"style="margin: 10px 0;">&nbsp;</p>
</div>
</form>
<p>Note: Industry standard is a voltage drop of no greater than 10%.</p>

<div class="errorMsg"></div>
<!-- displays error messages to user -->
</div>
<!-- END Calc wrapper -->
<script type="text/javascript">
  var volts = 0;
  var acdc = 0;
  var amps = 0;
  var length = 0;
  var awg = 0;
  var amp = 0;
 volts = document.getElementsByName("voltDrop_volts")[0].value;
 acdc = document.getElementsByName("voltDrop_acdc")[0].value;
 amps = document.getElementsByName("voltDrop_amps")[0].value;
 length = document.getElementsByName("voltDrop_ft")[0].value;
 awg = document.getElementsByName("voltDrop_awg")[0].value;
var ohm = 0;

if (awg === 36) { ohm = 371.0; }
else if (awg === 34) { ohm = 237.0; }
else if (awg === 32) { ohm = 164.0; }
else if (awg === 30) { ohm = 103.0; }
else if (awg === 28) { ohm = 64.9; }
else if (awg === 26) { ohm = 37.3; }
else if (awg === 24) { ohm = 23.3; }
else if (awg === 22) { ohm = 14.7; }
else if (awg === 20) { ohm = 10.0; }
else if (awg === 18) { ohm = 6.4; }
else if (awg === 16) { ohm = 4.0; }
else if (awg === 14) { ohm = 2.5; }
else if (awg === 12) { ohm = 1.6; }
else if (awg === 10) { ohm = 1.1; }
else if (awg === 8) { ohm = .62; }
else if (awg === 6) { ohm = .40; }
else if (awg === 4) { ohm = .24; }
else if (awg === 2) { ohm = .16; }
else if (awg === 1) { ohm = .13; }
else if (awg === '1/0') { ohm = .096; }
else if (awg === '2/0') { ohm = .077; }
else if (awg === '3/0') { ohm = .062; }
else if (awg === '4/0') { ohm = .049; }
else { msg = "Error"; }

var vDrop = ((ohm * 2) * (length / 1000) * amp);
var vFinal = (volts - vDrop);

function formReset()
    {
    document.getElementById("form1").reset();
    }
function printAnswer()
    {
        document.getElementById("theAnswer").innerHTML = vFinal;
    }
</script>
</body> 
```

请注意，当您将值设置为“amps”时，您使用的是“amp”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:22:58.477

1.  您可能想使用`getElementById`而不是`getElementsByName`. 要使用`getElementById`，您必须`id`在 html 中定义该属性。

2.  您需要使用该`value`属性来获取文本框中的值。例如：

    `var myValue = document.getElementById("myElement").value;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:21:53.837

这里有很多需要纠正的地方。

*   首先，您想在 print answer 函数中获取所有输入的值。否则，您的变量会在页面加载时初始化，并且字段尚未填充。像这样移动你的代码

    ```
    function printAnswer()
    {
    var volts = document.getElementsByName("voltDrop_volts")[0].value;
    var acdc = document.getElementsByName("voltDrop_acdc")[0].value;
    var amps = document.getElementsByName("voltDrop_amps")[0].value;
    var length = parseFloat(document.getElementsByName("voltDrop_ft")[0].value);
    var awg = document.getElementsByName("voltDrop_awg")[0].value;
    var ohm = 0;
    if (awg === 36) { ohm = 371.0; }
    else if (awg === 34) { ohm = 237.0; }
    else if (awg === 32) { ohm = 164.0; }
    else if (awg === 30) { ohm = 103.0; }
    else if (awg === 28) { ohm = 64.9; }
    else if (awg === 26) { ohm = 37.3; }
    else if (awg === 24) { ohm = 23.3; }
    else if (awg === 22) { ohm = 14.7; }
    else if (awg === 20) { ohm = 10.0; }
    else if (awg === 18) { ohm = 6.4; }
    else if (awg === 16) { ohm = 4.0; }
    else if (awg === 14) { ohm = 2.5; }
    else if (awg === 12) { ohm = 1.6; }
    else if (awg === 10) { ohm = 1.1; }
    else if (awg === 8) { ohm = .62; }
    else if (awg === 6) { ohm = .40; }
    else if (awg === 4) { ohm = .24; }
    else if (awg === 2) { ohm = .16; }
    else if (awg === 1) { ohm = .13; }
    else if (awg === '1/0') { ohm = .096; }
    else if (awg === '2/0') { ohm = .077; }
    else if (awg === '3/0') { ohm = .062; }
    else if (awg === '4/0') { ohm = .049; }
    else { msg = "Error"; }
    var vDrop = ((ohm * 2) * (length / 1000) * amps);
    var vFinal = (volts - vDrop);
    console.log(volts, acdc, amps, length, awg, ohm);
    document.getElementById("theAnswer").innerHTML = vFinal;
    } 
    ```

*   另外，请记住，您从字段中获得的是字符串，因此您可能必须使用 parseInt() 或 parseFloat() 将值转换为数字。

例如：`var length = parseFloat(document.getElementsByName("voltDrop_ft")[0].value);`

*   同样，当您使用 === 进行比较时，您希望比较相同类型的对象。因此，如果`awg`是一个字符串，当您从 HTML 中获取它时，将其与字符串进行比较：

例如：`if (awg === '6') { ... }`

*   您可以使用`document.getElementsByName`or`document.getElementById`但请记住，第一个返回一个列表，因此当第二个仅返回一个元素时，您想使用 [0]。此外，要使第二个工作，您将需要您的字段设置 id。

*   使用 devtools 和 Web 控制台进行调试。这些是您进行此类调试的最佳朋友。

# matplotlib - python matplotlib：转置轴的方法

> ID：15767781
> 
> 赞同：12
> 
> 时间：2013-04-02T15:15:17.703
> 
> 标签：matplotlib

假设我有一个绘图函数，它接受一个轴参数（或返回一个）。是否有一些低级方法可以转置整个图，使 x 轴变为 y 轴，反之亦然？或者甚至是绘图之前的轴，以便绘图函数通过依赖轴函数正确地完成所有操作（标记）？

我知道如何“手动”执行此操作，但我想知道是否存在允许这种转换的稍微隐藏的抽象级别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T05:24:03.083

John Hunter 在邮件列表中的[旧帖子（大约 2005 年）。](http://matplotlib.1069221.n5.nabble.com/rotating-a-plot-using-rotate-keyword-td576.html)我怀疑这是一种足够罕见的愿望，并且足够棘手，以至于当时还没有增加意义。

*John Hunter 在现有*地块上交换轴的示例是

```
line2d = plot(rand(10))[0]

def swap(xdata, ydata):
    line2d.set_xdata(ydata)
    line2d.set_ydata(xdata)
    draw()

swap(line2d.get_xdata(), line2d.get_ydata()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-11T16:08:15.893

不超过 tcaswell 的回答。

```
def swap(*line_list):
    """
    Example
    -------
    line = plot(linspace(0, 2, 10), rand(10))
    swap(line)
    """
    for lines in line_list:
        try:
            iter(lines)
        except:
            lines = [lines]

        for line in lines:
            xdata, ydata = line.get_xdata(), line.get_ydata()
            line.set_xdata(ydata)
            line.set_ydata(xdata)
            line.axes.autoscale_view() 
```

一个例子

```
line = plot(linspace(0, 2, 10), rand(10))
swap(line) 
```

# python - Python - HTTP 多部分/表单数据 POST 请求

> ID：15767785
> 
> 赞同：6
> 
> 时间：2013-04-02T15:15:21.787
> 
> 标签：python, python-3.x

我想将文件上传到网络服务器。根据我的阅读，最好的方法是在 HTTP POST 请求上使用 multipart/form-data 编码类型。

我的研究似乎表明使用 Python 标准库没有简单的方法可以做到这一点。我正在使用 Python 3。

（注意：请参阅名为[requests](http://docs.python-requests.org/en/latest/) ( [PyPI Link](https://pypi.python.org/pypi/requests) ) 的包以轻松完成此操作）

我目前正在使用这种方法：

```
import mimetypes, http.client
boundary = 'wL36Yn8afVp8Ag7AmP8qZ0SA4n1v9T' # Randomly generated
for fileName in fileList:
    # Add boundary and header
    dataList.append('--' + boundary)
    dataList.append('Content-Disposition: form-data; name={0}; filename={0}'.format(fileName))

    fileType = mimetypes.guess_type(fileName)[0] or 'application/octet-stream'
    dataList.append('Content-Type: {}'.format(fileType))
    dataList.append('')

    with open(fileName) as f: 
        # Bad for large files
        dataList.append(f.read())

dataList.append('--'+boundary+'--')
dataList.append('')
contentType = 'multipart/form-data; boundary={}'.format(boundary)

body = '\r\n'.join(dataList)
headers = {'Content-type': contentType}

conn = http.client.HTTPConnection('http://...')
req = conn.request('POST', '/test/', body, headers)

print(conn.getresponse().read()) 
```

这适用于发送文本。

有两个问题：这只是文本，整个文本文件必须作为一个巨大的字符串存储在内存中。

如何上传任何二进制文件？有没有办法在不将整个文件读入内存的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:36:52.020

看看小[Doug Hellmann 的 urllib2](https://github.com/ivanromanko/yadmin/blob/master/lib/multipart_sender.py)，由我翻译成 python3。

我几乎以这种方式使用它：

```
import urllib.request
import urllib.parse
from lib.multipart_sender import MultiPartForm

myfile = open('path/to/file', 'rb')
form = MultiPartForm()
form.add_field('token', apipost[mycgi['domain']]._token)
form.add_field('domain', mycgi['domain'])
form.add_file('file', 'logo.jpg', fileHandle=myfile)
form.make_result()

url = 'http://myurl'
req1 = urllib.request.Request(url)
req1.add_header('Content-type', form.get_content_type())
req1.add_header('Content-length', len(form.form_data))
req1.add_data(form.form_data)
fp = urllib.request.urlopen(req1)
print(fp.read()) # to view status 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T07:22:22.193

我看过这个模块

```
class HTTPConnection:
    # ...
    def send(self, data): # line 820
        """Send `data' to the server.
        ``data`` can be a string object, a bytes object, an array object, a
        file-like object that supports a .read() method, or an iterable object.
        """ 
```

数据就是正文。你可以像这样传递一个迭代器：（我没有尝试过）

```
def body():
  for fileName in fileList:
    # Add boundary and header
    yield('--' + boundary) + '\r\n'
    yield('Content-Disposition: form-data; name={0}; filename=    {0}'.format(fileName)) + '\r\n'

    fileType = mimetypes.guess_type(fileName)[0] or 'application/octet-stream'
    yield('Content-Type: {}'.format(fileType)) + '\r\n'
    yield('\r\n')

    with open(fileName) as f: 
        # Bad for large files
        yield f.read()
    yield('--'+boundary+'--') + '\r\n'
    yield('') + '\r\n' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T16:55:10.627

您可以使用 unirest 拨打电话。示例代码

```
import unirest

# consume async post request
def consumePOSTRequestSync():
 params = {'test1':'param1','test2':'param2'}

 # we need to pass a dummy variable which is open method
 # actually unirest does not provide variable to shift between
 # application-x-www-form-urlencoded and
 # multipart/form-data
 params['dummy'] = open('dummy.txt', 'r')
 url = 'http://httpbin.org/post'
 headers = {"Accept": "application/json"}
 # call get service with headers and params
 response = unirest.post(url, headers = headers,params = params)
 print "code:"+ str(response.code)
 print "******************"
 print "headers:"+ str(response.headers)
 print "******************"
 print "body:"+ str(response.body)
 print "******************"
 print "raw_body:"+ str(response.raw_body)

# post sync request multipart/form-data
consumePOSTRequestSync() 
```

查看博客文章了解更多详情[http://stackandqueue.com/?p=57](http://stackandqueue.com/?p=57)

# wordpress - 实施单点登录

> ID：15767786
> 
> 赞同：0
> 
> 时间：2013-04-02T15:15:30.157
> 
> 标签：wordpress, single-sign-on

我正在开发 2 个 Web 应用程序，一个是在 WordPress 上开发的，另一个是在 Asp.net MVC 上开发的。我们允许 FB、Google ID 从这两个应用程序登录。

该站点是在 WordPress 中开发的，用户可以使用 FB Id 登录该站点，并通过单击链接将我的 asp.net mvc 站点加载到 WordPress 站点上的 iframe 中。

由于用户已经在 WordPress 站点登录，我希望使用从 Wordpress 站点传递到 asp.net 站点的一些令牌来完成用户身份验证和授权。目前我正在传递加密的 url，并且正在传递一些信息。我不确定，这是一种标准/推荐方式。

我认为有一些标准可以解决这个问题。我想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:19:46.677

WP 用户在技术上并未通过 WP 进行身份验证，而是通过 FB 或 Google。您需要做的就是让您的 ASP.NET MVC 应用程序接受 FB 或 Google 身份，并且 SSO 将“正常工作”。您不需要将任何东西从 WP 传递到 ASP.NET。

FB 和 Google 的操作略有不同，但都支持 OAuth（和 OpenId）。在 .NET 应用程序中，您可以使用的一个库是 DotNetOpenAuth（已经随 MVC4 提供）。或者，您可以依靠第 3 方服务来处理对 Google/FB 的身份验证（以及可能的其他服务：twitter、linkedin 等）。这个第 3 方服务在技术上被称为“Federation Provider”（FP），本质上是您的应用程序和其他身份系统之间的代理：

```
WP   -+          +-> FB
      |          |     
.NET -+ --> FP --+-> Google 
...   |          |

app3 -+          +-> Others 
```

此模型的优点是您可以稍后更改身份提供者而不会影响您的应用程序，并且您可以添加应用程序而无需在所有身份提供者中注册它们。

其中一项服务是 Windows Azure Active Directory，它可以与 FB 和 Google 一起使用。另一个是[Auth0](http://www.auth0.com)。（完全披露：这是我工作的地方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:18:03.737

SAML（安全断言标记语言）是一种广泛采用的技术，可在两个不同的域/网站之间实现单点登录。更多信息请访问[http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language](http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language)。社交网站流行的另一种技术是 OAUth。更多信息请访问[http://en.wikipedia.org/wiki/Oauth](http://en.wikipedia.org/wiki/Oauth)。FB 开发者页面也有关于 OAUth 的优秀信息

# asp.net - 一些应用程序池在第一次加载时非常慢

> ID：15767790
> 
> 赞同：1
> 
> 时间：2013-04-02T15:15:49.690
> 
> 标签：asp.net, .net-4.0, application-pool

如[以下文章所述](http://forums.iis.net/p/1176520/2046929.aspx/1?p=True&t=635004973147926661)，一些 .NET 应用程序池在第一次请求时变得非常慢（大约 x4 倍）。问题仅涉及应用程序池。其中一些速度很慢，而另一些则不在相同的条件下：Web 应用程序、配置、文件权限等。

> 所以我的问题是，这怎么会发生？一个应用程序池如何比具有相同设置的另一个应用程序池慢，即使在重新启动它们之后，有没有办法修复/防止它？一旦应用程序池变慢，它就不会再次变快，即使停止和启动它也是如此。
> 
> 我确保在每次测试之前回收应用程序池，以便所有测试都是“第一次请求”。

我发现了同样的问题，想知道这里是否有人找到了解决这个奇怪问题的方法？

请注意这不是asp.net初始化速度的普遍问题。我们将同一服务器上的相同代码与两个应用程序池进行比较：通用（快速）和损坏（慢）。在两个相同（相同）的微不足道（没有任何数据库访问等）之间切换两个应用程序池（相同的设置，但一个不合理的“慢”）测试 asp.net 应用程序改变它们的行为：一个启动非常慢，另一个 - 不是。

问题是：

*   为什么应用程序池突然坏了（慢）？
*   如何避免应用程序池变得“慢”？
*   如何修复损坏的应用程序池？是的，我们可以创建无限的新应用程序池，但无论如何，这对于生产环境来说是奇怪且不可接受的。

UPD：我注意到这个问题甚至不限于“慢”应用程序池本身，而是它的名称！如果您重命名“慢”应用程序池，它将再次变为“快”。如果您创建名为以前重命名（或删除）“慢”的新应用程序池，则此应用程序池再次变慢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:54:41.423

我有一个类似的问题，我有一个应用程序池正在生成 WCF 错误，说它处于故障状态。我尝试创建一个新的应用程序池并测试相同的代码，它运行良好。然后我删除了旧的应用程序池并将新的应用程序池重命名回旧的应用程序池，问题又回来了！所以似乎有一些东西被保存在与应用程序池相关的某个地方，当应用程序池被删除时，这些东西不会被删除。很奇怪..通过将它重命名为其他任何东西，它又可以工作了。但是如果我把它改回原来的名字，它就会抛出错误！我只是希望我们不必不断更改应用程序池名称..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:25:37.800

哈哈。这有点像当您启动拉式割草机时。执行初始请求并初始化数据库需要一些时间。我们过去每次在共享点服务器上执行 IIS 重置时都会注意到这一点。它必须获取 web.config，连接到数据上下文或数据库，在站点开始发出请求之前做很多事情。一旦运行并拥有所有组件和运行时，尽管它很顺利。进行需要在夜间或下班时间进行 iisreset 的维护通常是好的，因此当用户第一次启动时，它会更快。您想要的最后一件事是您的 CEO 或副总裁，成为第一个访问您的网站的人。

附带说明一下，您拥有的应用程序池越多，占用的内存就越多。我知道使用 SharePoint 应用程序池，每个池占用 250MB 内存。减轻使用量和资源消耗的最佳选择是将其分配到多个 Web 服务器场/集群中，该集群对请求执行某种轮询或负载平衡。在给定点点击的用户越多，初始请求的速度就越慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:25:34.643

默认情况下，应用程序池设置为在一段时间后回收。我认为默认是 20 分钟。回收后，必须在第一次请求时重新加载。这可能就是你正在经历的。

# sql - SQL：聚合后如何过滤？

> ID：15767794
> 
> 赞同：22
> 
> 时间：2013-04-02T15:16:01.180
> 
> 标签：sql, select, aggregation

删除不想聚合的值非常容易。

例如：

```
SELECT department, SUM(sales) as "Total sales"
FROM order_details
GROUP BY department
HAVING SUM(sales) > 1000; 
```

这将从总和聚合中排除所有价值小于或等于 1000 的销售额。

但是聚合后如何过滤呢？

例如`WHERE ("Total sales"> 15000)`

编辑：具有讽刺意味的是，我只是`HAVING SUM(sales) > 1000;`为了防止混淆所需的查询类型；因为我实际上对从求和中排除项目并不感兴趣，只是返回的结果！谢谢，尽管很困惑！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-02T15:24:20.033

您的查询实际上是在做您想做的事情，而不是您在问题中表达的内容。如果要排除所有小于 1000 的销售额，则应使用`WHERE sales > 1000`. 但是`HAVING SUM(sales) > 1000`过滤实际上是在聚合之后完成的。

编写子查询并`SELECT WHERE`在原始查询之上添加另一个查询是多余的。

请参阅[小提琴](http://www.sqlfiddle.com/#!2/30c3f/14/0)以进行澄清。

```
#Query1

SELECT department, SUM(sales) as Total
FROM order_details
GROUP BY department
HAVING Total > 40;

#Query 2

SELECT department, SUM(sales) as Total
FROM order_details
GROUP BY department
HAVING  SUM(sales) > 40;

#Query 3

SELECT department, SUM(sales) as Total
FROM order_details
WHERE sales > 40
GROUP BY department;

#Query 1 and 2 are the same, filtering after aggregation
#Query 3 is filtering before aggregation 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T15:22:24.623

如果要过滤价值小于 1000 的销售，正确的查询是

```
SELECT department, sales
FROM order_details
WHERE sales > 1000 
```

如果你想聚合，并且只保留总和超过 15000，那么你需要这个查询：

```
SELECT department, SUM(sales) as TotalSales
FROM order_details
WHERE sales > 1000
GROUP BY department
HAVING SUM(sales) > 15000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:19:46.410

您可以通过将总和选择到临时表中，然后从临时表中进行选择来分两步进行：

```
SELECT department, SUM(sales) as TotalSales
INTO #temp
FROM order_details
GROUP BY department
HAVING SUM(sales) > 1000

SELECT department, TotalSales
FROM #temp
WHERE TotalSales > 15000

DROP TABLE #temp 
```

# django - 如何在 Django 中禁用自动会话到期更新？

> ID：15767795
> 
> 赞同：2
> 
> 时间：2013-04-02T15:16:02.053
> 
> 标签：django, django-sessions

我正在 Django 中开发一个具有一些特定安全要求的应用程序。其中之一是禁用默认行为以自动延长活动会话的到期时间。是的，我希望会话过期，除非明确更新（例如重新登录、更新令牌等 - 现在不相关）。

这如何提高安全性？那么，控制受害者 PC 的恶意用户将只能在有限的时间内访问受害者经过身份验证的应用程序。

不幸的是，使用[`django.contrib.sessions`](https://docs.djangoproject.com/en/1.5/topics/http/sessions/)，这似乎是不可配置的，因为会话的*修改*时间被彻底使用，并且在后端（`backends/base.py`）的基础中用于服务器端存储以及在中间件组件（`middleware.py`）中用于 HTTP cookie。`SessionStore._session_expiry`此外，由于只有会话*数据*被加载到会话对象中，因此只能以内部修改时间的相对形式访问到期时间（ ）。因此，除非我们直接询问模型（`Session.objects.get(pk=s.session_key).expire_date`- 呃，丑陋），否则我们不知道过期日期是什么。

我该如何正确实施？`get_expiry_*`如果不重新实现方法和`process_response()`中间件功能，这可能吗？我宁愿避免这种情况，因为我认为它可能会在以后中断，以防 Django 得到更新。

[通过设置自定义会话变量来以我自己的方式（如在此答案](https://stackoverflow.com/a/3025372/1254292)中）跟踪到期来尝试这一点似乎不仅多余，而且还会混淆其他应用程序/代码询问`SessionStore.get_expiry_age()`，而我的中间件将强制执行不同的到期。因此，我认为这种方法对于我的目的来说质量太低了。

我的上述假设是否正确？我是否应该将此作为一项新功能提出要求并同时自己修补它？

# back-button - Spring JSR 286 Portlets 中的浏览器后退按钮问题

> ID：15767798
> 
> 赞同：0
> 
> 时间：2013-04-02T15:16:04.597
> 
> 标签：back-button, jsr286, spring-portlet-mvc

我使用 sprint portlets JSR 286 开发了一个 Web 应用程序，它在 Web 浏览器中以表格格式显示数据。

下面给出的是用于从 JSP 文件调用控制器的代码。

`

```
function openPortletReport(displayName,reportName,linkNum){
  document.eployerSearchLightFrm.action='<%=formAction%>';
  document.getElementById("reportName").value=reportName;
  document.getElementById("parentLinkName").value=linkNum;
  document.getElementById("eployerSearchLightFrm").submit();
} 
```

` 这里表单动作类型是POST和reportName，parentLinkName是参数。

在提交此表单时，会调用 Controller 的*handlerRenderRequest*方法。从数据库中获取数据后，我们在 ModelAndView 对象中传递视图的名称，如下所示：-

```
`modelAndView = new ModelAndView("searchlight/genderProfile");
 return modelAndView;` 
```

此视图名称使用应用程序上下文 xml 文件中的 ViewResolver 与相关 JSP 文件映射，如下所示：-

`

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"></property>        
        <property name="prefix" value="/WEB-INF/jsp/"></property>        
        <property name="suffix" value=".jsp"></property>    
    </bean> 
```

`

显示此 JSP 文件后，该 JSP 文件中可能会出现另一个链接，该链接将按照上述相同的过程转到某个新的 JSP 文件。

现在，在使用上述过程在浏览器中加载 JSP 文件后，如果我单击浏览器后退按钮，它不会重新发送它给我的 Portlet 请求，它给我的*网页在浏览器中已过期*错误。这发生在所有浏览器中，包括 IE 8、Mozilla Firefox 19 和 Chrome 24。

请帮助我解决这个问题，因为我已经搜索了谷歌中几乎所有的内容来找到解决方案，但没有运气！！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:48:35.227

这是表单 POST 的预期行为。如果后退按钮必须起作用，那么请改用 GET 作为表单方法。

# dynamics-crm-2011 - 创建 Forder 方法的 System.Security.Permission 错误

> ID：15767800
> 
> 赞同：0
> 
> 时间：2013-04-02T15:16:05.767
> 
> 标签：dynamics-crm-2011, dynamics-crm

我已经构建了一个插件，但出于我的需要，我必须将所有日志写入一个文本文件。但是在调试模式下，我注意到当代码单步执行以下代码段时

```
if (!System.IO.Directory.Exists(_filePath))
            {
                System.IO.Directory.CreateDirectory(_filePath);
            } 
```

它返回给我这个异常：

> 'System.Security.Permissions.FileIOPermission，mscorlib，版本 = 4.0.0.0，文化 = 中性，PublicKeyToken = b77a5c561934e089'

在文件系统上，“每个人”都被授予读/写权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:49:33.393

我猜你是在沙盒模式下部署你的插件，在这种模式下你有限制，[看看](http://msdn.microsoft.com/en-us/library/gg334752.aspx)。如果您不使用在线 crm，请尝试以另一种模式部署。

# html - TCPDF 有时会生成 php 文件

> ID：15767801
> 
> 赞同：0
> 
> 时间：2013-04-02T15:16:08.817
> 
> 标签：html, pdf, tcpdf

让我描述一下这个案例：

我想在网上填写表格，然后将表格数据填充到页面，然后我需要将该页面下载为 PDF。我正在使用 TCPDF。

TCPDF 在大多数情况下都有效。但是当有一个大的 html 页面需要转换为 PDF 时，有时只需给我 .php 文件以供下载。下载 php 文件后，它会在 .php 文件中显示一些特殊字符。

在 80% 的时间里，我得到了 PDF 被接受。但在 20% 的时间内，我得到了 .php 文件。我用谷歌搜索了很多，但没有发现任何有用的东西。

我的 HTML 页面链接是：[http ://app.ans4u.com/wp-content/themes/dctappv2/requre/pdf-creator/passport-form.php](http://app.ans4u.com/wp-content/themes/dctappv2/requre/pdf-creator/passport-form.php)

您可以在源代码中看到纯 html 代码。在页面中，您将找到一个下载按钮。如果您单击它 5 次，您将看到 1 或 2 次它返回一个 php 文件进行下载。

要生成 PDF，我使用以下代码：

```
 require_once(dirname(__FILE__).'/html2pdf.class.php');
 try
 {
    $html2pdf = new HTML2PDF($form_orientation, 'Letter', 'fr');
    $html2pdf->writeHTML($content, isset($_GET['vuehtml']));
    $html2pdf->Output('form-'.$form_no.'.pdf','D');
 }
catch(HTML2PDF_exception $e) {
    echo $e;
    exit;
 } 
```

我错过了什么吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:27:35.503

在进行了大量的谷歌搜索和性能测试后，我发现 TCPDF 在处理非常大的复杂 php 页面时使用了很大比例的内存。因此，当我的网站中有大量用户并尝试生成 pdf 时，ram 会变高并长时间忙碌，因此它成为内存使用超时。在这种情况下，它会分解并返回一个带有特殊字符的 .php 文件。

似乎没有人面对它。但我使用的是共享主机，所以我遇到了很多。

希望这些信息对将来的人有所帮助。

# performance - Entity Framework 查询慢，但 SqlQuery 中相同的 SQL 快

> ID：15767803
> 
> 赞同：107
> 
> 时间：2013-04-02T15:16:13.353
> 
> 标签：performance, entity-framework, ef-code-first

我看到一些非常奇怪的性能与使用 .NET 框架版本 4 的实体框架代码优先的非常简单的查询相关。LINQ2Entities 查询如下所示：

```
 context.MyTables.Where(m => m.SomeStringProp == stringVar); 
```

这需要超过 3000 毫秒才能执行。生成的 SQL 看起来很简单：

```
 SELECT [Extent1].[ID], [Extent1].[SomeStringProp], [Extent1].[SomeOtherProp],
 ...
 FROM [MyTable] as [Extent1]
 WHERE [Extent1].[SomeStringProp] = '1234567890' 
```

此查询在通过 Management Studio 运行时几乎立即运行。当我更改 C# 代码以使用 SqlQuery 函数时，它会在 5-10 毫秒内运行：

```
 context.MyTables.SqlQuery("SELECT [Extent1].[ID] ... WHERE [Extent1].[SomeStringProp] = @param", stringVar); 
```

因此，完全相同的 SQL，在这两种情况下都对生成的实体进行了更改跟踪，但两者之间的性能差异很大。是什么赋予了？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-04-02T19:39:05.030

找到了。事实证明这是 SQL 数据类型的问题。数据库中的`SomeStringProp`列是 varchar，但 EF 假定 .NET 字符串类型是 nvarchar。在查询数据库进行比较期间产生的翻译过程需要很长时间。我认为 EF Prof 在这里让我误入歧途，正在运行的查询的更准确表示如下：

```
 SELECT [Extent1].[ID], [Extent1].[SomeStringProp], [Extent1].[SomeOtherProp],
 ...
 FROM [MyTable] as [Extent1]
 WHERE [Extent1].[SomeStringProp] = N'1234567890' 
```

所以最终的修复是注释代码优先模型，指示正确的 SQL 数据类型：

```
public class MyTable
{
    ...

    [Column(TypeName="varchar")]
    public string SomeStringProp { get; set; }

    ...
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-11-14T13:14:32.677

减慢我的 EF 查询的原因是将不可为空的标量与可空的标量进行比较：

```
long? userId = 10; // nullable scalar

db.Table<Document>().Where(x => x.User.Id == userId).ToList() // or userId.Value
                                ^^^^^^^^^    ^^^^^^
                                Type: long   Type: long? 
```

该查询耗时 35 秒。但是一个小的重构如下：

```
long? userId = 10;
long userIdValue = userId.Value;

db.Table<Document>().Where(x => x.User.Id == userIdValue).ToList()
                                ^^^^^^^^^    ^^^^^^^^^^^
                                Type: long   Type: long 
```

给出了令人难以置信的结果：只需 50 毫秒即可完成。它看起来像 EF 中的一个错误。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-10T10:38:19.900

如果您使用的是 fluent 映射，则可以将`IsUnicode(false)`其用作配置的一部分以获得相同的效果 -

[http://msdn.microsoft.com/en-us/data/jj591617.aspx#1.9](http://msdn.microsoft.com/en-us/data/jj591617.aspx#1.9)

[http://msdn.microsoft.com/en-us/library/gg696416%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/gg696416%28v=vs.103%29.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-12T18:01:28.260

我遇到了同样的问题（从 SQL 管理器执行时查询很快）但是从 EF 执行时超时到期。

原来实体（从视图创建）有错误的实体键。所以实体有相同键的重复行，我猜它必须在后台进行分组。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-30T11:40:14.333

我也遇到了一个复杂的 ef 查询。对我来说，将 6 秒 ef 查询减少到它生成的亚秒 sql 查询的一个修复方法是关闭延迟加载。

要找到此设置 (ef 6)，请转到 .edmx 文件并查看属性 -> 代码生成 -> 启用延迟加载。设置为假。

对我来说性能有了很大的提高。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-20T14:41:54.170

我也有这个问题。事实证明，我的罪魁祸首是 SQL-Server [parameter sniffing](https://www.brentozar.com/archive/2013/06/the-elephant-and-the-mouse-or-parameter-sniffing-in-sql-server/)。

我的问题实际上是由于参数嗅探引起的第一个线索是，使用“set arithabort off”或“set arithabort on”运行查询会在 Management Studio 中产生截然不同的执行时间。这是因为 ADO.NET 默认使用“set arithabort off”，而 Management Studio 默认使用“set arithabort on”。查询计划缓存根据此参数保留不同的计划。

我禁用了查询的查询计划缓存，您可以在[此处](https://stackoverflow.com/a/47327803/540832)找到解决方案。

# c++ - NCurses 从 stdin 读取到 std::string，C++

> ID：15767804
> 
> 赞同：-1
> 
> 时间：2013-04-02T15:16:13.577
> 
> 标签：c++, string, stl, ncurses, stdstring

我正在编写一个 Linux 应用程序，我必须使用 ncurses 从标准输入读取密码。我可以毫无问题地读入 C 风格的字符串，但是，这会带来安全风险，所以我必须找到一种方法来读入 STL 字符串（std::string）。这是我的代码的相关部分：

```
initscr();
noecho();
string key;
... // Get the key from the user
string enter=key+"A"; // So the entered key is not the user-set one
while(enter!=key)
{
    const char* msg="Key to unlock terminal? ";
    move(y/2, (x-strlen(msg))/2);
    erase();
    printw(msg);
    sscanw("%s", enter); // How do I read into an STL string?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:02:48.600

我不太清楚，`sscanw`但如果格式化工作像`sscanf`我建议你限制输入的大小。

```
char[21] enter;
sscanw("%20s", enter);
enter[20] = 0; 
```

安全问题涉及缓冲区溢出（用户写入超出缓冲区末尾的程序空间）。为了解决这个问题，简单地限制`%20s`你读入缓冲区大小的字符（）的数量。

# android - 具有 maven 依赖项的 Android 库项目

> ID：15767805
> 
> 赞同：0
> 
> 时间：2013-04-02T15:16:14.447
> 
> 标签：android, maven, android-library

我创建了一些由 maven 管理的依赖项的 android 库项目。

现在我正在尝试从 android maven 应用程序项目运行库代码。

我在库运行中编写的代码，但在第一次调用依赖时我得到了 NoClassDefFoundError。

有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:33:56.750

您可能想看看[http://androidkickstartr.com/](http://androidkickstartr.com/)。该工具将为您创建正确的 mavenized 项目，然后您可以从 pom.xml 复制缺少的部分。

# plsql - ORA-00905: SQL PLus 中缺少关键字

> ID：15767813
> 
> 赞同：0
> 
> 时间：2013-04-02T15:16:31.283
> 
> 标签：plsql, sqlplus

使用 SQLPLUS 命令行在以下过程中运行时出现 ORA-00905: missing keyword 错误。奇怪的是，当我通过 PL/SQL 开发人员中的 SQL 窗口运行它时，它可以编译并工作，不幸的是，我也需要它通过命令行工作：

```
CREATE OR REPLACE PROCEDURE PRO_INSERT_ALERT_END_DATE IS

CURSOR cur_InsertEndDate IS

    SELECT cli_per_id,
           date_ended,
           date_started,
           alertid
    FROM   CP_END_ALERT;

BEGIN

FOR rec_cur_InsertEndDate IN cur_InsertEndDate
LOOP

    BEGIN

        UPDATE vwe_alert_table
        SET    alert_inactive_on = rec_cur_InsertEndDate.date_ended,
               alert_inac_reason = 'Deregistered'
        WHERE  vwe_alert_table.art_id = rec_cur_InsertEndDate.alertid AND
               vwe_alert_table.art_per_id = rec_cur_InsertEndDate.cli_per_id AND
               vwe_alert_table.art_alerted_on = rec_cur_InsertEndDate.date_started AND
               vwe_alert_table.art_alert = 'AL02';

        COMMIT;

    EXCEPTION
        WHEN OTHERS THEN

            dbms_output.put_line('Error updating record ' || SUBSTR(SQLERRM, 1, 250));
            ROLLBACK;

    END;
   END LOOP;
END PRO_INSERT_ALERT_END_DATE; 
```

任何建议都将受到欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:30:09.763

这可能是由于脚本中的空白行。告诉 SqlPlus 忽略它们

```
 set sqlblanklines on 
```

# java - 使用其中的乘法从另一个数组填充一个数组

> ID：15767819
> 
> 赞同：0
> 
> 时间：2013-04-02T15:16:42.777
> 
> 标签：java, arrays, double

正如您在下面看到的，我有一个名为 costperkm 的变量，通常为 0.08，然后我有一个基于数字的数组，然后是围绕这些数字乘以 costperkm 构建的第二个数组，但我得到了错误；[http://puu.sh/2sxi7](http://puu.sh/2sxi7)

```
Scanner costscan=new Scanner(System.in);
    double costperkm = costscan.nextDouble();

double distarray[] = new double[5];

  distarray[0] = 850;
  distarray[1] = 1000;
  distarray[2] = 1250;
  distarray[3] = 1275;
  distarray[4] = 1350;
  distarray[5] = 2690;

double costarray[] = new double[5];

  costarray[0] = (distarray[0]*costperkm);
  costarray[1] = (distarray[1]*costperkm);
  costarray[2] = (distarray[2]*costperkm);
  costarray[3] = (distarray[3]*costperkm);
  costarray[4] = (distarray[4]*costperkm);
  costarray[5] = (distarray[5]*costperkm);

System.out.print(costarray[0]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:17:55.727

```
double distarray[] = new double[5]; 
```

意味着您只有 0-4 个索引，因此：

```
distarray[5] = 2690; 
```

尝试访问数组外的索引 5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:19:17.407

您的数组大小为 5 (0,1,2,3,4)。

所以索引会在 0 到 4 之间变化。

您无法访问数组 [5]。它会抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:19:01.593

看下面两个表达式：

```
last_index_of_the_array != length_of_the_array    
last_index_of_the_array == length_of_the_array -1 
```

如果您的数组长度为 5，您的最后一个索引将为 4

# php - 将一个 url 翻译成一组 GET 参数

> ID：15767832
> 
> 赞同：1
> 
> 时间：2013-04-02T15:17:23.327
> 
> 标签：php, url, parameters, get

我想将带有参数的url翻译成路径，即

```
http://www.example.com/?page=1 => http://www.example.com/1
http://www.example.com/?section=books&category=thriller&page=1 => http://www.example.com/books/thriller/1 
```

然后我希望能够获取所有这些参数以在查询中使用它们以便根据这些参数进行选择，我不知道从哪里开始，我该怎么做？我正在使用这个 .htaccess 将我的所有请求重定向到 index.php

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ index.php/$1 [QSA,L] 
```

我如何“翻译”一组参数的路径以在查询中使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:28:22.850

你倒过来了。您希望从用户那里收到请求，然后将*其*`http://www.example.com/books/thriller/1`重写为供 PHP 处理。这样，用户会看到“友好”的 URL，而 PHP 会看到对其友好的格式。*`index.php?qs=$1`*

 *因此，您的重写规则将更改为：

```
RewriteRule ^(.*)$ index.php?qs=$1 [QSA,L] 
```

然后您可以通过以下方式访问其内容：

```
$myQueryVars = explode('/', $_GET['qs']); 
```

`http://www.example.com/books/thriller/1`变成

```
array( 'books', 'thriller', '1' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:33:30.310

我会做这样的事情......

```
RewriteRule ^([0-9]+)$ index.php?page=$1
RewriteRule ^([0-9a-zA-Z]+)/([0-9a-zA-Z]+)/([0-9]+)$ index.php?section=$1&category=$2&page=$3 
```*

# cron - 将 crontab 导出到文件

> ID：15767834
> 
> 赞同：75
> 
> 时间：2013-04-02T15:17:26.317
> 
> 标签：cron

如何将 crontab 的内容导出到文件中？

我需要它，因为我正在切换用户名并且不想丢失 crontab 中的数据。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-04-02T15:17:26.317

创建备份（导出）：

```
crontab -l > /some/shared/location/crontab.bak 
```

从新用户导入：

```
crontab /some/shared/location/crontab.bak 
```

# jquery - Jquery ajax成功回调警报没有数据要检索？

> ID：15767840
> 
> 赞同：0
> 
> 时间：2013-04-02T15:17:34.927
> 
> 标签：jquery, json

我已经在 J​​query 中成功构建了一个 ajax json 函数，但我不是 100% 满意。php 更强大的函数从 MYSql 的文件中检索链接。我想知道如果没有要检索的数据，是否有任何方法可以向脚本添加警报。清除：如何让 Jquery 触发警报（）；如果在特定类别下没有要检索的数据？如果问题不清楚，请告诉我。

我的代码：

```
$('#blankett_form').submit(function (e) {
var id = $(this).find('.update:last').val();
if (id === '') {
    alert('välj land och region');
} else {
    var table = '<table class="table table-hover table-bordered"><thead><tr> <th>blanketter.</th><th>datum tillagt.</th></tr></thead><tbody></tbody></table>';
    $('#formsubmit').empty().append(table);
    $.ajax({
        url: 'func/blankett_func2.php',
        data: {
            'id': id
        },
    dataType: 'JSON',
    success: function(data)
    {
        $.each(data.list, function (i, val){
            $('#formsubmit tbody').append(val);
        });

    }
    });
}
e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:19:26.700

添加一个条件，如

```
if(data.length>0){  // if(data){ if your are using below 1.9 versions   
 //proceed.

 }else {

  alert();

  } 
```

# mysql - 根据 2 个匹配字段返回是或否值

> ID：15767842
> 
> 赞同：0
> 
> 时间：2013-04-02T15:17:35.913
> 
> 标签：mysql, sql, insert, sql-update

我有一个关于根据 2 个表匹配的字段将值设置为是或否的[先前问题。](https://stackoverflow.com/questions/11571773/inserting-yes-or-no-values-based-on-fields-in-different-tables-being-equal/11572363?noredirect=1#comment15325935_11572363)我试图让查询检查generalsource.firstinventor，如果它匹配inventor.inventorfull插入“是”或插入“否”结果是以下代码：

```
UPDATE i
SET LeadInventor = 
    CASE 
        WHEN fi.FirstInventorName IS NULL THEN 'No' 
        ELSE 'Yes' 
    END
FROM Inventor i
    LEFT JOIN FirstInventor fi
    ON i.InventorFirst + ' ' + i.InventorLast = fi.FirstInventorName 
```

效果非常好，直到我尝试放入 MySQL 并且我无法弄清楚语法有什么问题。我如何解决它？

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM Inventor i     LEFT JOIN FirstInventor fi     ON i.InventorFirst + ' ' + i.' at line 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:31:20.143

CONCAT 字符串为

```
CONCAT( i.InventorFirst, ' ', i.InventorLast ) 
```

**更新：**另外，您的更新语句中似乎存在语法问题，应该如下

```
UPDATE 
  Inventor i
  LEFT JOIN FirstInventor fi ON CONCAT( i.InventorFirst, ' ', i.InventorLast ) = fi.FirstInventorName
SET LeadInventor = 
    CASE 
        WHEN fi.FirstInventorName IS NULL THEN 'No' 
        ELSE 'Yes' 
    END 
```

更多信息：[http ://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

# drupal - Drush make - 解压和区分 mime 时间的错误

> ID：15767846
> 
> 赞同：2
> 
> 时间：2013-04-02T15:17:45.290
> 
> 标签：drupal, drush

我在 Windows 2008 R2 Enterprise 上安装了 Drush 5.8，除了远程管理外，所有选项都包括在内。

每当我运行时，`drush make`我都会收到有关它无法解压缩 github 存档文件并且无法确定 js 文件的 mime 类型的错误。这是我的make文件和输出。我不确定这里出了什么问题，并且会喜欢您可能拥有的任何指示。

**制作文件：**

```
; Drupal 7 core
core = 7.x
api = 2
projects[drupal][version] = 7

; Libraries
; --------

libraries[colorbox][download][type] = "get"
libraries[colorbox][download][url] = "https://github.com/jackmoore/colorbox/archive/1.4.8.zip"
libraries[colorbox][directory_name] = colorbox
libraries[colorbox][destination] = libraries

libraries[zepto][download][type] = "get"
libraries[zepto][download][url] = "http://zeptojs.com/zepto.min.js"
libraries[zepto][directory_name] = zepto
libraries[zepto][destination] = libraries 
```

**输出：**

```
C:\Users\Administrator\Desktop\drush>drush make test.make testing
Could not locate drupal version 7, will try to download latest recommended or supported release.               [warning]

drupal-7.21 downloaded.                                                                                             [ok]

colorbox downloaded from https://github.com/jackmoore/colorbox/archive/1.4.8.zip.                                   [ok]

Unable to unzip C:\Users\ADMINI~1\AppData\Local\Temp\1/make_tmp_1364915473_515af511066a2/1.4.8.zip.              [error]

zepto downloaded from http://zeptojs.com/zepto.min.js.                                                              [ok]

Unable to determine mime type for zepto.min.js.                                                                  [error] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:37:29.540

经过一番挣扎，终于弄明白了。

使用 Cygwin，我能够获得解压缩的副本，我将其放入 Program Files (x86)\Drush\GnuWin32\bin 目录（位于我的 PATH 环境变量中）。这清除了列出的有关解压缩的错误。

至于 mime 类型问题，我必须手动编辑 include/drush.inc 以添加`'.js' => 'application/javascript'`到 $extension_mimetype 数组。请参阅[http://drupal.org/node/1825946](http://drupal.org/node/1825946)了解导致我这样做的讨论。

# android - Android Local public class textview在构造函数上创建

> ID：15767849
> 
> 赞同：0
> 
> 时间：2013-04-02T15:17:54.107
> 
> 标签：android, constructor, android-listview, textview

我是新的@andorid 开发。请帮助我。

这是我的问题：

我创建 listview.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="wrap_content" 
android:gravity="left|center"
android:layout_width="wrap_content" 
android:paddingBottom="5dp"
android:paddingTop="5dp" 
android:paddingLeft="5dp">

<TextView  android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:gravity="center"
    android:textColor="#FFFF00"
    android:textIsSelectable="true">

</TextView>

<TextView android:id="@+id/TextView02"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp" 
    android:textColor="#0099CC"
    android:textIsSelectable="true">

</TextView> 
```

和本地类声明：

```
 public class listview_row{
    TextView Text1;
    TextView Text2;
    public listview_row(){
        Text1 = (TextView) findViewById(R.id.TextView01);
        Text2 = (TextView) findViewById(R.id.TextView02);
    }
} 
```

当我从这个类创建对象时：

```
 listview_row obListview = new listview_row();
    obListview.Text1.setText(bundle.getString("first_name"));
    obListview.Text2.setText(bundle.getString("last_name")); 
```

obListview.Text1 总是等于 null 并且 nullobjectexecption 正在提高。我怎样才能解决这个问题。我以为我可以在构造函数上创建 textview，但我认为我错了。

PS：我想用两个 textview 创建 Listview，我使用了 android.R.layout.simple_list_item_1 并且我可以在两个活动之间毫无问题地传递数据。现在我尝试显示 first_name|last_name @first screen listview。

有关更多信息，这里是我的 onActivityResult：

```
 public void onActivityResult(int requestCode, int resultCode, Intent intent){
    if ( resultCode == RESULT_OK ){
        Bundle extras = intent.getExtras(); 

        if (extras != null){
        switch (requestCode){
        case Activity_New:
            add_new_row( extras );
            break;
        case Activity_Edit:
            edit_row( extras );
            break;
        }}
    }
} 
```

这是 add_new_row: public void add_new_row(Bundle bundle){ // Başlık bilgilerini kayıt ediyoruz int sayi = HeaderArray.size(); listview_row obListview = new listview_row(); obListview.Text1.setText(bundle.getString("first_name")); obListview.Text2.setText(bundle.getString("last_name"));

```
 HeaderArray.add(sayi, obListview);
    HeaderAdapter.notifyDataSetChanged();

    // Kalem bilgilerini kayıt ediyoruz
    mtable_row obMember = new mtable_row();
    obMember.index = sayi;
    obMember.first_name = bundle.getString("first_name");
    obMember.last_name = bundle.getString("last_name");
    obMember.birth_date = bundle.getString("birth_date");
    itemArray.add(sayi, obMember);
} 
```

我用于详细信息数组：

```
 private ArrayList<mtable_row> itemArray;

public class mtable_row{
    int index;
    String first_name;
    String last_name;
    String birth_date;
} 
```

我的主要目标是使用两个数组：第一个是标题，第二个是项目。标头有两个字段 first_name 和 second_name

我喜欢在我的主屏幕上显示这个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:25:41.003

为此，您必须膨胀一个`Layout`文件以传递给您的班级并使用它来获取像

```
Text1 = (TextView) layout.findViewById(R.id.TextView01); 
```

您传递给构造函数`layout`的膨胀值在哪里。`layout`我还没有尝试过，但类似的东西可能会起作用。但是，除非您需要这样做，否则将它们保留`Views`在您的`Activitvy`

```
public class YourActivity extends Activity {

TextViw Text1;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listview);

    Text1 = (TextView) findViewById(R.id.TextView01);
    Text2 = (TextView) findViewById(R.id.TextView02);
    .....
}
} 
```

你得到了一个`NPE`，因为据我所知，你没有夸大这些`layout`文件所在的文件`Views`。

此外，这是一件小事，但您应该考虑遵守[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)，以免混淆或混淆其他人。类名应该是驼峰式，变量名应该是大小写混合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:26:41.620

> 我想用两个文本视图创建 Listview，

为此，我建议您使用自定义列表视图。定义了一个自定义适配器。为每一行膨胀一个自定义布局。

您可以将值传递给 CustomAdapter 的构造函数。

```
 CustomAdapter cus = new CustomAdapter(this);
 ListView lv= (ListView) findViewById(R.id.lv);
 lv.setAdapter(cus);  

public class CustomAdapter extends ArrayAdapter {
Context c;
    LayoutInfator mInflater;
public CustomAdapter(CustomListView customListView) {
    super(customListView, 0);
    // TODO Auto-generated constructor stub
    this.mInflater = LayoutInflater.from(customListView);  
    c=customListView;
}
public int getCount() {
    return 20; //listview item count
}

public Object getItem(int arg0) {
    return arg0;
}

public long getItemId(int arg0) {
return arg0;
}

public View getView(final int arg0, View arg1, ViewGroup arg2) {
    final ViewHolder vh;
    vh= new ViewHolder();

    if(arg1==null )
     {
        arg1=mInflater.inflate(R.layout.customlayout, arg2,false);
        vh.tv1= (TextView)arg1.findViewById(R.id.textView1);
        vh.tv2= (TextView)arg1.findViewById(R.id.textView2);    
     }
    else
    {
     arg1.setTag(vh);
    }
        vh.tv1.setText("hello");    
        vh.tv2.setText("hello");

    return arg1;
}

 static class ViewHolder
 {
TextView tv1,tv2;
 }
 } 
```

在两个活动之间传递数据后，在第二个活动中检索数据。每个屏幕都有自己的 UI。您不能像您所做的那样引用 UI 元素。

为您的第二个活动提供两个 TextView

```
public class SecondActivity  extends Activity{
TextView tv1;
TextView tv2;
 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.second);
     tv1 = (TextView) findViewById(R.id.TextView01);
     tv2 = (TextView) findViewById(R.id.TextView02);
     Bundle extras = getIntent().getExtras();
    if (extras != null) {
        tv1.setText(extras.getString("first_name"));
        tv2.setText(extras.getString("last_name"));   
    }

   }
 } 
```

# javascript - 逻辑和浮点数，0.75 > 0 = false？

> ID：15767852
> 
> 赞同：0
> 
> 时间：2013-04-02T15:18:00.627
> 
> 标签：javascript, jquery, if-statement, int, parseint

在 Javascript 中，我有一个失败的 if 语句应该通过，但我不知道为什么。这是if的结构。

```
if(parseInt(obj.OptionCredit) > parseInt(Account.Credits))
{
     true
}
else

{
     false
} 
```

当我控制台记录这两个变量时，我得到 Account.Credits = 0 和 obj.OptionCredit = 0.75。话虽如此，0.75 > 0 应该返回 false。

谁能帮我解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:19:25.833

您将它们解析为整数（而不是浮点数），因此它们都返回零。0 不大于 0，因此比较返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:21:34.093

您需要使用`parseFloat()`而不是`parseInt()`

# apache-flex - Flex：右键单击按钮会导致状态更改

> ID：15767857
> 
> 赞同：0
> 
> 时间：2013-04-02T15:18:09.323
> 
> 标签：apache-flex, states

右键单击 Spark 按钮会触发从“over”到“up”的状态更改。

相反，我希望状态为“向下”，因此该按钮在左键或右键单击时的行为相同。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:27:41.410

是的！

```
var b:Boolean;

protected function rightMouseDown(e:MouseEvent):void {
    b = true;
}

protected function rightMouseUp(e:MouseEvent):void {
    b = false;
}

override public function setCurrentState(stateName:String, playTransition:Boolean = true):void {
    if (!b) {
        super.setCurrentState(stateName, playTransition);
    } else {
        super.setCurrentState(...);
    }
} 
```

# java - 使用关键字“this”访问实例函数或成员是一种好习惯吗？

> ID：15767858
> 
> 赞同：3
> 
> 时间：2013-04-02T15:18:09.750
> 
> 标签：java, keyword

因此，当类成员和参数使用相同的名称时，我知道 this 在构造函数中是多么有用。

人们通常在构造函数之外使用它来访问实例变量/成员和函数吗？这是一个好习惯吗？我应该继续使用这个关键字还是不应该使用它？

```
class Test {
    private int num = 0;

    Test(int num) {
        this.num = num;
    }

    public int getNum() {
        return this.num;     // I could write num;
    }

    public void doSomething() {
        System.out.println(this.getNum());    // I could have just invoked getNum()
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:33:55.997

首先，这是个人（或团队）风格的问题。一些开发人员认为它有助于提高可读性，而另一些开发人员则认为它是多余且繁琐的。

话虽如此，**我认为使用它是一个好主意，`this`因为它可以防止不同范围之间的混淆**。

如果`this`始终使用，则检查部分代码的开发人员不必在每次引用变量时都向上滚动以找出其范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:28:48.543

当在一个团队中工作时，最重要的事情可能是所有成员都使用相同的样式，例如格式、camelCase 或 mCamelCase 名称，甚至在任何地方都使用这个关键字。

没有什么比使用不同风格的代码更不可读了。

您参与的每个项目可能都有不同的风格，但所有成员都应遵守规则。

只要灵活一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:19:16.563

是的，你可以做到`this.your_field`。`this`使用关键字没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:22:05.553

尝试在 eclipse 中生成 getter。即使 eclipse 也会`this`在构造函数之外使用关键字 ;) 所以，是的，它是常用的并且非常习惯的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:33:48.230

只有在您引用完全不同的变量/方法时才需要使用它。

例如，在您上面的构造函数中，如果您没有使用它，您将指的是传递给构造函数的参数。

在您的 doSomething() 方法中，不需要 this 关键字。

# php - 带有特殊字符的 Slim PHP 路由不起作用

> ID：15767859
> 
> 赞同：2
> 
> 时间：2013-04-02T15:18:10.407
> 
> 标签：php, rest, routing, routes, slim

我有以下 SLIM php 路线：

```
$app->get('/suggest(/:filter)', 'getSuggestions'); 
```

按以下方式调用它时效果很好：

```
/suggest/query 
```

但总是在更复杂的 URI 编码查询上中断

```
/suggest/my%20query 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T18:38:49.243

苗条的论坛对这些问题有大量的回应 - 但很可能如果它不起作用，那就是你的 GET 调用方式（更可能的是 getSuggestions 函数正在处理请求和它遇到的任何空间。没有看到更多的代码，最好的答案你会得到的是你没有正确地考虑空间。

# xml - 根据 xml 节点值将数据设置为 true 或 false

> ID：15767860
> 
> 赞同：0
> 
> 时间：2013-04-02T15:18:11.747
> 
> 标签：xml, parsing, powershell, sql-server-2008-r2

我的数据看起来类似于这个问题最底部的 xml。这是数千个任务中的 3 个。有些有`<DayOfWeek>`节点，有些没有。我正在努力获取这些数据并将其放入 csv 中，以便可以将其导入 sql。

我的目标是让每一天成为表格中的一列，每一行代表一个任务。如果计划在给定日期运行，则相应日期为 1，否则为 0。对于此问题底部的以下数据，表格如下所示

```
| taskID | mon | tue | wed | thur | fri | sat | sun |
|________|_____|_____|_____|______|_____|_____|_____|
|    1   |  1  |  0  |  0  |  1   |  1  |  1  |  0  |
|    2   |  1  |  0  |  0  |  0   |  1  |  0  |  0  |
|    3   |  1  |  1  |  1  |  1   |  1  |  1  |  1  | 
```

我当前的 ps 脚本使这些数据更加垂直而不是水平。代码摘录

```
foreach($task in $config.Settings.Tasks.Task){
    $taskID = $task.ID
    foreach($DoW in $task.Schedules.Schedule.Days.DayOfWeek){
        $newCSV += @(New-Object -TypeName psobject -Property @{'taskID' = $taskID; 'Day' = $DoW})
    }
}
$newCSV | Export-Csv -Path c:\users\mhopkins\desktop\micSchedule\DoW.csv -notype 
```

你们能帮我把这些数据在表格中更好地工作吗？

XML 片段

```
<Task ID="1" Name="name1" Active="1" NextEID="11">
    <Schedules>
        <Schedule OnlyUntilFirstSuccess="0" FailIfNoSuccessInSched="0" RunEvenIfNotif="0">
            <Days>
                <DayOfWeek>Monday</DayOfWeek>
                <DayOfWeek>Friday</DayOfWeek>
                <DayOfWeek>Thursday</DayOfWeek>
                <DayOfWeek>Saturday</DayOfWeek>
            </Days>
        </Schedule>
    </Schedules>
</Task>
<Task ID="2" Name="name2" Active="1" NextEID="12">
    <Schedules>
        <Schedule OnlyUntilFirstSuccess="0" FailIfNoSuccessInSched="0" RunEvenIfNotif="0">
            <Days>
                <DayOfWeek>Monday</DayOfWeek>
                <DayOfWeek>Friday</DayOfWeek>
            </Days>
        </Schedule>
    </Schedules>
</Task>
<Task ID="3" Name="name3" Active="0" NextEID="24" TT="COS" AR="0">
    <Schedules>
        <Schedule OnlyUntilFirstSuccess="0" FailIfNoSuccessInSched="0" RunEvenIfNotif="1">
            <Days>
                <DayOfWeek>Monday</DayOfWeek>
                <DayOfWeek>Tuesday</DayOfWeek>
                <DayOfWeek>Wednesday</DayOfWeek>
                <DayOfWeek>Thursday</DayOfWeek>
                <DayOfWeek>Friday</DayOfWeek>
                <DayOfWeek>Saturday</DayOfWeek>
                <DayOfWeek>Sunday</DayOfWeek>
            </Days>
        </Schedule>
    </Schedules>
</Task> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:34:02.570

我必须在您的 XML 代码片段中添加行以使其适用于 PowerShell。

```
<xml>
...
</xml> 
```

我正在使用 PowerShell v 3.0 并让它工作。

```
$config = [xml](get-content 'dat.xml')

foreach($task in $config.xml.Task){

    $props = @{
        'taskID'=$task.ID
        'Sunday'=$NULL
        'Monday'=$NULL
        'Tuesday'=$NULL
        'Wednesday'=$NULL
        'Thursday'=$NULL
        'Friday'=$NULL
        'Saturday'=$NULL
    }

    foreach($DoW in $task.Schedules.Schedule.Days.DayOfWeek){
        foreach($day in $DoW){
            #POWERSHELL!!!
            $props.$day = $true #Or equals 1 whatever  
        }   
    }

    $newCSV += @(New-Object -TypeName psobject -Property $props)
}
$newCSV 
```

这是我得到的输出。

```
Thursday  : True
Sunday    :
taskID    : 1
Saturday  : True
Friday    : True
Tuesday   :
Monday    : True
Wednesday :

Thursday  :
Sunday    :
taskID    : 2
Saturday  :
Friday    : True
Tuesday   :
Monday    : True
Wednesday :

Thursday  : True
Sunday    : True
taskID    : 3
Saturday  : True
Friday    : True
Tuesday   : True
Monday    : True
Wednesday : True 
```

PowerShell 输出它很奇怪，但它都是有组织的。您始终可以使用格式表`$newCSV | Format-Table TaskID,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday -AutoSize`。Export-CSV 将保持所有列正确。

**更新**

您始终可以使用[`switch`语句](http://technet.microsoft.com/en-us/library/ff730937.aspx)来编辑属性。换`$props.$day = $true`一个 good'ole switch 语句，如下所示：

```
foreach($DoW in $task.Schedules.Schedule.Days.DayOfWeek){
    foreach($day in $DoW){
        #$props.$day = $true
        switch ($day){
            'Sunday'{$props.Sunday = $true}
            'Monday'{$props.Monday = $true}
            'Tuesday'{$props.Tuesday = $true}
            'Wednesday'{$props.Wednesday = $true}
            'Thursday'{$props.Thursday = $true}
            'Friday'{$props.Friday = $true}
            'Saturday'{$props.Saturday = $true}
            default{"$day is not a Day of the Week"}
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:12:24.100

传统的智慧似乎是您应该将其转换为 [XML]，但如果有数千个，我怀疑这将对 CPU 和内存造成相当沉重的负担。也许其他人会发布该解决方案以进行比较。

同时：

```
[regex]$regex = @'
(?ms)\s*<Task ID="(\d+)".+?
\s*<Days>(.+?)
\s*</Days>.+?
\s*</Task>
'@

$text = [IO.File]::ReadAllText('C:\tasks.xml')
&{
$regex.Matches($text) |
foreach {
 $Schedule = 
 new-object psobject -Property @{
                                 taskID = $_.groups[1].value
                                 mon    = 0
                                 tue    = 0
                                 wed    = 0
                                 thur   = 0
                                 fri    = 0
                                 sat    = 0
                                 sun    = 0
                                 }
    switch -Regex ($_.groups[2].value)
    {
     'Monday'    {$Schedule.mon  = 1}
     'Tuesday'   {$Schedule.tue  = 1}
     'Wednesday' {$Schedule.wed  = 1}
     'Thursday'  {$Schedule.thur = 1}
     'Friday'    {$Schedule.fri  = 1}
     'Saturday'  {$Schedule.sat  = 1}
     'Sunday'    {$Schedule.sun  = 1}
     }
   $schedule 
  }
}| select taskID,mon,tue,wed,thur,fri,sat,sun | ft -auto

taskID mon tue wed thur fri sat sun
------ --- --- --- ---- --- --- ---
1        1   0   0    1   1   1   0
2        1   0   0    0   1   0   0
3        1   1   1    1   1   1   1 
```

# firefox-addon - Firefox 插件进度监听器

> ID：15767861
> 
> 赞同：2
> 
> 时间：2013-04-02T15:18:15.620
> 
> 标签：firefox-addon, http-status-code-302

我正在使用此页面来实现地址栏更改侦听器。

[https://developer.mozilla.org/en-US/docs/Code_snippets/Progress_Listeners#Example.3a_Notification_when_the_value_in_Address_Bar_changes](https://developer.mozilla.org/en-US/docs/Code_snippets/Progress_Listeners#Example.3a_Notification_when_the_value_in_Address_Bar_changes)

这段代码做了它应该做的事情。当我导航到新页面时，它会提醒 URL。但是，如果我拥有的 URL 是 302 或类似的，则会导致问题。它会提醒重定向的 URL 而不是原始 URL。在将请求发送到服务器并进行重定向之前，我需要 URL。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:48:33.567

我认为您可以通过 onStateChange 事件进行检查。

```
var myExtension = {
    oldURL: null,

    init: function() {
        gBrowser.addProgressListener(this);
    },

    uninit: function() {
        gBrowser.removeProgressListener(this);
    },

    processNewURL: function() {},

    // nsIWebProgressListener
    QueryInterface: XPCOMUtils.generateQI(["nsIWebProgressListener",
                                           "nsISupportsWeakReference"]),

    onLocationChange: function(aProgress, aRequest, aURI) {
        this.processNewURL(aURI);
    },

    onStateChange: function(aWebProgress, aRequest, aStateFlags, aStatus) {
        if (!aRequest) return;

        if (aStateFlags & nsIWebProgressListener.STATE_START) {
            alert(aRequest.name);
    },

    onProgressChange: function() {},
    onStatusChange: function() {},
    onSecurityChange: function() {}
};

window.addEventListener("load", function() { myExtension.init() }, false);
window.addEventListener("unload", function() { myExtension.uninit() }, false); 
```

在此处查看更多信息：[https ://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIRequest](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIRequest)

`aRequest`是一个 nsIRequest，其属性*名称*是请求的 URL。

# regex - [:space:] 和 [:blank:] 有什么区别？

> ID：15767863
> 
> 赞同：11
> 
> 时间：2013-04-02T15:18:19.380
> 
> 标签：regex, bash, grep

来自[正则表达式简介](http://tldp.org/LDP/abs/html/x17046.html)

[:blank:] 匹配空格或制表符。

[:space:] 匹配空白字符（空格和水平制表符）。

对我来说，这两个定义都是一样的，我想知道它们是否真的是重复的？

如果它们不同，它们有什么区别？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T15:22:09.497

对于 GNU 工具，以下内容`grep.info`适用：

```
[:blank:]

     Blank characters: space and tab.

[:space:]

     Space characters: in the 'C' locale, this is tab, newline,
     vertical tab, form feed, carriage return, and space. 
```

您可以使用以下命令找到该部分：

```
info grep 'Regular Expressions' 'Character Classes and Bracket Expressions' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T15:21:24.907

在这里可以更好地解释他们每场比赛的内容

*   [http://www.regular-expressions.info/posixbrackets.html](http://www.regular-expressions.info/posixbrackets.html)

最大的不同是`[:space:]`还会匹配换行符之类的项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-14T10:04:21.817

空格表示按空格键和制表符

空格意味着它带有换行符、制表符、换页符和回车符，还有空格。

# javascript - javascript等于运算符

> ID：15767865
> 
> 赞同：-5
> 
> 时间：2013-04-02T15:18:31.560
> 
> 标签：javascript

以下代码导致错误的原因是什么？

```
{} === {}
//false 
```

这段代码变成真的原因是什么？

```
 var obj = {};
 obj === obj
  //true 
```

请用简单明了的语言回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:20:44.963

对象的比较不检查对象是否具有相同的内容，而是检查它们是否是同一个对象。每个都`{}`创建一个新对象。您的第一个测试测试一个新对象是否与不同的新对象是*同*一个对象。您的第二个测试将创建的对象与自身进行比较。

从[比较运算符的文档中](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)：

> 仅当操作数引用相同的对象时，比较对象的表达式才为真

或者，从[语言规范](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.6)：

> 第 7 步：如果 x 和 y 引用同一个对象，则返回 true。否则，返回假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:20:29.370

在第一种情况下，您正在创建两个对象并比较它们。在第二种情况下，您正在比较同一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:21:07.380

当你这样做时，`{}`你正在创建一个（空）对象文字（一个没有属性的新对象）。当你在做

```
{} === {} 
```

您正在比较两个完全不同的对象，所以它返回`false`.

但是，当您这样做时：

```
var obj = {};
obj === obj 
```

你正在比较*同一个*对象，所以它返回`true`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:21:12.640

其次，您正在将一个对象与自身进行比较，这在逻辑上是相等的。

起初，您不是在比较相同的事物，而是尝试比较显示相同的事物。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:21:36.463

{} 创建一个新对象。

=== 检查它们实际上是同一个对象。尽管它们都是新的空对象，但它们实际上是不同的空对象。

要了解为什么这很重要，请尝试以下操作：

```
var a = {};
var b = {};
var c = a;
a.key = 'value';
console.log(b);
console.log(c); 
```

你会看到因为 a 和 b 是不同的空对象，所以改变 a 不会改变 b。因为 c 实际上和 a 是同一个空对象，所以将某物放入 a 也将其放入 c。

# jquery - 如何在画布对象上使用 jquery ui 可拖动方法？

> ID：15767872
> 
> 赞同：0
> 
> 时间：2013-04-02T15:18:42.147
> 
> 标签：jquery, jquery-ui, canvas, jquery-ui-draggable

我试图让用户能够使用可拖动方法在画布元素周围移动矩形。

这是我最初的想法，但它不起作用。

[我在http://jsfiddle.net/r2Zbe/](http://jsfiddle.net/r2Zbe/)设置了一个小提琴

```
$("button").click(function () {
    var door = bgContext.strokeRect(20, 20, 50, 150);
    door.draggable();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:22:15.673

不确定是否将 jQuery UI 与画布一起使用，但如果您正在使用画布，则可能需要查看 EaselJS。它使一切，包括拖放，都非常简单。

[画架](http://www.createjs.com/#!/EaselJS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:03:02.847

jCanvas 库说他们可以让你用 jQuery 在画布上拖动。[http://calebevans.me/projects/jcanvas/](http://calebevans.me/projects/jcanvas/)

不过，他们对 jQuery UI 只字未提。

免责声明：我从未尝试过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T20:35:46.327

我会使用类似fabricJs的东西，它更干净且易于使用。

# java - 无法使用 JComboBoxes 更改 JTextArea 中的字体和字体大小

> ID：15767876
> 
> 赞同：0
> 
> 时间：2013-04-02T15:18:53.177
> 
> 标签：java, swing, fonts, jcombobox, font-size

我创建了一个 JFrame，用户可以在其中编辑 JTextArea 中的文本。有一个 JComboBox 可以更改字体类型，一个 JComboBox 可以更改字体大小，还有 2 个 JCheckBoxes 可以使文本变为粗体和斜体。我已经完成了 JCheckBoxes，但我无法弄清楚如何通过使用 JComoboBoxes 来更改字体和字体大小。任何帮助，将不胜感激。

```
 import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;

    public class SetFontModified extends JFrame 
    {
        private JPanel p1, p2;
        private JLabel jlblFontName, jlblFontSize;
        private JComboBox jcbFonts, jcbSizes;
        private JTextArea jtxtWelcome;
        private JCheckBox  jckbBold, jckbItalic;

        public SetFontModified()                                                              
        {
        p1 = new JPanel();
        jlblFontName = new JLabel("Font Name");                                               

        GraphicsEnvironment e = GraphicsEnvironment.getLocalGraphicsEnvironment();   
        String[] fontNames = e.getAvailableFontFamilyNames();                                 
        jcbFonts = new JComboBox(fontNames);                                                      

        jlblFontSize = new JLabel("Font Size");// add 2nd JLabel

        jcbSizes = new JComboBox(); // create 2nd JComboBox
        for(int i = 1; i < 101; i ++) // populate JComboBox with array of font sizes 1-100
        {
            jcbSizes.addItem(i);
        }

        p1.add(jlblFontName); // add all 4 components to p1
        p1.add(jcbFonts);
        p1.add(jlblFontSize);
        p1.add(jcbSizes);

        jtxtWelcome = new JTextArea("Welcome to Java", 3, 20);// add a JTextArea
        add(jtxtWelcome);

        p2 = new JPanel(); // create p2 & add JCheckBoxes
        p2.add(jckbBold = new JCheckBox("Bold"));
        jckbBold.setMnemonic('B');
        p2.add(jckbItalic = new JCheckBox("Italic"));
        jckbItalic.setMnemonic('I');

        add(p1,BorderLayout.NORTH);
        add(p2,BorderLayout.SOUTH);

        ListenerClass listener = new ListenerClass();
        jcbFonts.addActionListener(listener);
        jcbSizes.addActionListener(listener);
        jckbBold.addActionListener(listener);
        jckbItalic.addActionListener(listener);
        }

        public static void main(String[] args) 
        {
       SetFontModified frame = new SetFontModified();
       frame.setTitle("Set Font Details");
       frame.pack();
       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       frame.setLocationRelativeTo(null);    
       frame.setVisible(true);
    }

    private class ListenerClass implements ActionListener
    {   
        public void actionPerformed(ActionEvent e)
        {   
            jcbSizes.getFontSize();

            Font plainFont = new Font("serif", Font.PLAIN, size);
            Font boldFont = new Font("serif", Font.BOLD, 14);
            Font italicFont = new Font("serif", Font.ITALIC, 14);
            Font boldItalicFont = new Font("serif", Font.BOLD + Font.ITALIC, 14);

            if (jckbBold.isSelected() && jckbItalic.isSelected()) 
                jtxtWelcome.setFont(boldItalicFont);

            else if (jckbBold.isSelected())
                jtxtWelcome.setFont(boldFont);

            else if (jckbItalic.isSelected())
                jtxtWelcome.setFont(italicFont);

            else jtxtWelcome.setFont(plainFont);                
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:26:39.953

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Test extends JFrame 
{
    private JPanel p1, p2;
    private JLabel jlblFontName, jlblFontSize;
    private JComboBox jcbFonts, jcbSizes;
    private JTextArea jtxtWelcome;
    private JCheckBox  jckbBold, jckbItalic;

    public Test()                                                              
    {
    p1 = new JPanel();
    jlblFontName = new JLabel("Font Name");                                               

    GraphicsEnvironment e = GraphicsEnvironment.getLocalGraphicsEnvironment();   
    String[] fontNames = e.getAvailableFontFamilyNames();                                 
    jcbFonts = new JComboBox(fontNames);                                                      

    jlblFontSize = new JLabel("Font Size");                                               // add 2nd JLabel

    jcbSizes = new JComboBox();                                                               // create 2nd JComboBox
    for(int i = 1; i < 101; i ++)                                                                 // populate JComboBox with array of font sizes 1-100
    {
        jcbSizes.addItem(i);
    }

    p1.add(jlblFontName);                                                                         // add all 4 components to p1
    p1.add(jcbFonts);
    p1.add(jlblFontSize);
    p1.add(jcbSizes);

    jtxtWelcome = new JTextArea("Welcome to Java", 3, 20);                            // add a JTextArea
    add(jtxtWelcome);

    p2 = new JPanel();                                                                            // create p2 & add JCheckBoxes
    p2.add(jckbBold = new JCheckBox("Bold"));
    jckbBold.setMnemonic('B');
    p2.add(jckbItalic = new JCheckBox("Italic"));
    jckbItalic.setMnemonic('I');

    add(p1,BorderLayout.NORTH);
    add(p2,BorderLayout.SOUTH);

    ListenerClass listener = new ListenerClass();
    jcbFonts.addActionListener(listener);
    jcbSizes.addActionListener(listener);
    jckbBold.addActionListener(listener);
    jckbItalic.addActionListener(listener);
    }

    public static void main(String[] args) 
    {
   Test frame = new Test();
   frame.setTitle("Set Font Details");
   frame.pack();
   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   frame.setLocationRelativeTo(null);    
   frame.setVisible(true);
}

private class ListenerClass implements ActionListener
{   
    public void actionPerformed(ActionEvent e)
    {   
        //jcbSizes.getFontSize();

        Font plainFont = new Font("serif", Font.PLAIN, Integer.parseInt(jcbSizes.getSelectedItem().toString()));
        Font boldFont = new Font("serif", Font.BOLD, 14);
        Font italicFont = new Font("serif", Font.ITALIC, 14);
        Font boldItalicFont = new Font("serif", Font.BOLD + Font.ITALIC, 14);

        if (jckbBold.isSelected() && jckbItalic.isSelected()) 
            jtxtWelcome.setFont(boldItalicFont);

        else if (jckbBold.isSelected())
            jtxtWelcome.setFont(boldFont);

        else if (jckbItalic.isSelected())
            jtxtWelcome.setFont(italicFont);

        else jtxtWelcome.setFont(plainFont);

    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:26:43.877

编译器抱怨未定义的变量`size`。您可以将此声明添加到您的`ActionListener`：

```
int size = (Integer)jcbSizes.getSelectedItem(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:30:21.347

您需要正确的方法`jcbSizes`：

```
int size = (Integer) jcbSizes.getSelectedItem(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:45:57.317

> 但我无法弄清楚如何通过使用 JComoboBoxes 来更改字体和字体大小。

为此，您必须更改 else 块，如下所示。

```
else {

    // jcbFonts.getSelectedItem().toString()
    // gets font string selected in font combobox
    // -------------------------------------
    // jcbSizes.getSelectedIndex())
    // get font size selected in size combobox

    jtxtWelcome.setFont(new Font(jcbFonts.getSelectedItem()
                    .toString(), Font.PLAIN, jcbSizes.getSelectedIndex()));

    System.out.println("Font Name: " + jcbFonts.getSelectedItem() 
                + " Font Size:" + jcbSizes.getSelectedIndex());
} 
```

[类字体 API](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html)

# html - html 行跨度未按预期运行

> ID：15767882
> 
> 赞同：0
> 
> 时间：2013-04-02T15:19:08.567
> 
> 标签：html, css, html-table

我有一些应该很简单的 html，但由于某种原因，我无法`rowspan`工作。它没有填充整个左侧列，而是仅占据其底部的一个单元格。我想得到这样的东西：

```
+----------+-----------+---------+
| label 1  | content 1 | label 2 |
|          +-----------+         |
|          | content 2 |         |
|          +-----------+         |
|          | content 3 |         |
|          +-----------+         |
|          | content 4 |         |
|          +-----------+         |
|          | content 5 |         |
+----------+-----------+---------+ 
```

但我对下面的代码没有运气。[JSBIN](http://jsbin.com/ucozub/1/edit)。

```
<tr>
    <td rowspan="5">
        label one
    </td>
    <td>
        content 1
    </td>
</tr>
<tr>
    <td>
        content 2
    </td>
</tr>
<tr>
    <td>
        content 3
    </td>
</tr>
<tr>
    <td>
        content 4
    </td>
</tr>
<tr>
    <td>
        content 5
    </td>
    <td rowspan="5">
        label two
    </td>
</tr> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:21:57.260

只是一个小的 html 更改：

```
<table border="1">

    <tr>
        <td rowspan="5">
            label one
        </td>
        <td>
            content 1
        </td>
      <td rowspan="5">
            label two
        </td>
    </tr>
    <tr>
        <td>
            content 2
        </td>
    </tr>
    <tr>
        <td>
            content 3
        </td>
    </tr>
    <tr>
        <td>
            content 4
        </td>
    </tr>
    <tr>
        <td>
            content 5
        </td>

    </tr>

</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:21:28.000

试试看：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
 <table border="1">

    <tr>
        <td rowspan="5">
            label one
        </td>
        <td>
            content 1
        </td>
      <td rowspan="5">
            label two
        </td>
    </tr>
    <tr>
        <td>
            content 2
        </td>
    </tr>
    <tr>
        <td>
            content 3
        </td>
    </tr>
    <tr>
        <td>
            content 4
        </td>
    </tr>
    <tr rowspan="5">
        <td>
            content 5
        </td>
    </tr>

</table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:21:31.367

将 vertical-align:top 添加到内联样式，或设置一个类并执行相同操作。应该管用。

```
<td rowspan="5" style="vertical-align:top"> 
```

# magento - Magento - 将所见即所得编辑器添加到自定义小部件

> ID：15767894
> 
> 赞同：7
> 
> 时间：2013-04-02T15:19:29.710
> 
> 标签：magento, module, widget, customization, wysiwyg

我在自定义模块中创建了一个小部件。一切正常，小部件可以嵌入到 CMS 页面中。但是，我想添加一个所见即所得编辑器，而不是 textarea 参数类型。

这是我的 widget.xml 中的重要部分：

```
<parameters>            
    <description translate="label">
        <required>0</required>
        <visible>1</visible>
        <label>Description</label>
        <type>textarea</type>
    </description>
</parameters> 
```

我想知道是否有一种方法可以扩展 Magento 的功能以允许类似于以下的 WYSIWYG 编辑器：

```
<parameters>            
    <description translate="label">
        <required>0</required>
        <visible>1</visible>
        <label>Description</label>
        <type>WYSIWYG</type>
    </description>
</parameters> 
```

有没有人遇到过类似的问题？.. 或者有谁知道如何做到这一点？也许通过调用 WYSIWYG 编辑器的自定义渲染器，但是如何..？

提前谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T16:15:13.047

我终于设法自己做到了。对于所有有同样问题的人，我就是这样做的：

在 widget.xml 中，我的参数设置如下：

```
<parameters>            
    <text translate="label">
        <required>1</required>
        <visible>1</visible>
        <label>Specify text</label>
        <description>No double quotes allowed, use single quotes instead!</description>
        <type>cmswidget/widget_wysiwyg</type>
    </text>
</parameters> 
```

为了在小部件的文本区域上启用 WYSIWYG 编辑器，我在我的自定义模块中创建了一个新的块类，扩展了 Mage_Adminhtml_Block_Widget_Form_Renderer_Fieldset_Element 类并覆盖了 render() 函数：

```
class MyCompany_MyModule_Block_Widget_Wysiwyg extends Mage_Adminhtml_Block_Widget_Form_Renderer_Fieldset_Element
{
    public function render(Varien_Data_Form_Element_Abstract $element)
    {
        $editor = new Varien_Data_Form_Element_Editor($element->getData());
        $editor->setId($element->getId());
        $editor->setForm($element->getForm());
        $editor->setWysiwyg(true);
        $editor->setForceLoad(true);
        return parent::render($editor);
    }
} 
```

现在，我很高兴看到小部件内的编辑器。不幸的是，仍然存在问题。由于编辑器使用双引号创建内联样式和属性并将其作为小部件属性放置到 CMS 页面 - 它本身也是双引号，因此无法正确呈现小部件。为了解决这个问题，我扩展了 Mage_Widget_Model_Widget 类并将编辑器双引号替换为单引号，如下所示：

```
class MyCompany_MyModule_Model_Widget extends Mage_Widget_Model_Widget
{
    public function getWidgetDeclaration($type, $params = array(), $asIs = true)
    {

        if( preg_match('~(^mymodule/myblockclass)~', $type) )
        {
            $params['text'] = str_replace('"', "'", $params['text']);

        }
        return parent::getWidgetDeclaration($type, $params, $asIs);
    }
} 
```

在 getWidgetDeclaration() 函数中，我检查小部件类型是否是我要处理的类型。小部件类型在 widget.xml 中为每个小部件指定，如下所示：

```
<MyCompany_MyModule_MyWidgetName type="mymodule/myblockclass" translate="name description" module="mymodule">
<!-- ... -->
</MyCompany_MyModule_MyWidgetName> 
```

现在我让一切都像我想要的那样工作。编辑器生成的 HTML 将其双引号替换为单引号，并且输出将完美运行。在我像这样转义双引号之前 - \"some text \"。起初这似乎可行，但是当通过单击图标（编辑器视图）编辑小部件时，html 被切断了。Magento 的 javascript 似乎以自己的方式转义了字符串。但是，上述方法将起作用，因为我只是在插入小部件时将双引号替换为单引号，而 Magento 在 CMS 编辑器视图中打开小部件时会将单引号转换为双引号。

希望这对某人有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-10T06:47:06.250

我认为这不再与 Magento 1.9 兼容。我已经尝试过这种方法，但在保存添加了小部件的 cms 块/页面时，我不断收到 javascript 错误

错误：[未知对象].fireEvent() 中的错误：事件名称：formSubmit 错误消息：无法设置属性“值”为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T14:44:05.210

基于 Rouzbeh，我添加了小的 jQuery 代码来验证是否使用了双引号：

```
<description>
<![CDATA[
<script>
jQuery("#widget_options textarea").keyup(function(){
if(jQuery(this).val().indexOf('"') > -1){
  jQuery(this).val(jQuery(this).val().replace('"',"'"));
  alert('No double quotes allowed, use single quotes instead.')
}
});
</script>
]]>                
</description> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-25T06:26:35.363

因此，已知的解决方案似乎不再适用于 1.9+，所以我制作了一个替代方案，它添加了所见即所得，但使用了替代编辑器。

我使用了这个编辑器：

[https://alex-d.github.io/Trumbowyg/](https://alex-d.github.io/Trumbowyg/)

最终结果如下：

[![在此处输入图像描述](https://i.stack.imgur.com/fPUYL.png)](https://i.stack.imgur.com/fPUYL.png)

步骤 1：在 adminhtml 皮肤区下载编辑器文件和速度：

在我的例子中，我把它们放在`skin/adminhtml/default/js/wysiwyg`

[![在此处输入图像描述](https://i.stack.imgur.com/9xgOH.png)](https://i.stack.imgur.com/9xgOH.png)

第 2 步：在您的模块中，您需要定义管理布局更新，并在您的 adminhtml 布局文件中，添加指令以加载库文件（和 jquery）

由于我希望它只出现 n CMS 页面编辑，我通过适当的句柄添加：

```
<adminhtml_cms_page_edit>
        <reference name="head">
            <action method="addJs">
                <script>lib/jquery/jquery-1.12.0.js</script>
            </action>
            <action method="addJs">
                <script>lib/jquery/noconflict.js</script>
            </action>
            <action method="addItem"><type>skin_js</type><name>js/wysiwyg/trumbowyg.min.js</name></action>
            <action method="addItem"><type>skin_css</type><name>js/wysiwyg/ui/trumbowyg.min.css</name></action>
        </reference>
    </adminhtml_cms_page_edit> 
```

第 3 步：创建一个新的小部件类来呈现元素：

在我的示例中，我将这是一个模块放在 BLOCKS 下

基本上，这需要小部件 xml 定义的元素，并将其转换为一个`textarea`元素，然后附加所需的 javascript (jquery) 以初始化所见即所得编辑器。

您将看到传递给编辑器的选项，在 $options 中定义

```
<?php
class ProxiBlue_Landingpage_Block_Widgets_Wysiwyg extends Mage_Adminhtml_Block_Widget_Form_Renderer_Fieldset_Element
{
    public function render(Varien_Data_Form_Element_Abstract $element)
    {
        $textarea = new Varien_Data_Form_Element_Textarea();
        $textarea->setForm($element->getForm())
            ->setId($element->getHtmlId())
            ->setName($element->getName())
            ->setLabel($element->getLabel())
            ->setClass('widget-option input-area input-text');
        if ($element->getRequired()) {
            $textarea->addClass('required-entry');
        }
        if ($element->getValue()) {
            $textarea->setValue($element->getValue());
        }
        $options = "btns: ['viewHTML', 'strong', 'em', 'del', 'undo', 'redo', 'formatting', 'superscript', 'subscript', 'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'unorderedList', 'orderedList', 'horizontalRule', 'fullscreen'],
                    semantic: true,
                    removeformatPasted: true,
                    autogrow: false";

        $textarea->setData('after_element_html',
            "<script>jQuery(document).ready(
                function() { 
                    jQuery(" . $element->getHtmlId() .").trumbowyg({ " . $options . " })
                    .on('tbwblur', function(){ 
                        var html = jQuery(this).trumbowyg('html');
                        html = html.replace(/\"/g, '&quot;');
                        jQuery(this).trumbowyg('html', html);
                    }); 
                    });</script>");

        $html = parent::render($textarea);

        return $html;
    }

} 
```

在那里你可能还会注意到这个片段：

```
.on('tbwblur', function(){ 
   var html = jQuery(this).trumbowyg('html');
   html = html.replace(/\"/g, '&quot;');
   jQuery(this).trumbowyg('html', html);
}); 
```

此处的目的是将任何双引号 (") 更改为正确的 html 实体，`&quot` 这是为了防止将文本数据存储在用双引号括起来的小部件参数中。

第 4 步：定义小部件元素：

```
<text_blurb translate="label">
                <sort_order>50</sort_order>
                <label>Textual Content</label>
                <visible>1</visible>
                <required>1</required>
                <type>landingpage/widgets_wysiwyg</type>
            </text_blurb> 
```

完毕。

希望这对某人有用。

# xml - Eclipse Velocity 和 xml 格式

> ID：15767895
> 
> 赞同：1
> 
> 时间：2013-04-02T15:19:34.187
> 
> 标签：xml, eclipse, editor, velocity

我正在 Velocity 模板中生成一个 XML 文档。有谁知道是否有办法让 Eclipse 对速度命令和 xml 进行正确的格式化和识别？目前我可能遇到非此即彼的情况：只有 xml 被格式化或#if/#else/#end 速度命令，这取决于我使用的编辑器，但不能同时使用两者。

谢谢

# jquery - jQuery.post .fail (.error) 函数比它应该更快地动作并接收格式错误的 json

> ID：15767901
> 
> 赞同：0
> 
> 时间：2013-04-02T15:19:49.070
> 
> 标签：jquery, wordpress, post, error-handling

我正在为 WordPress 写一个 ajax 形式的评论发布，这是我目前所拥有的：

```
$.post('wp-comments-post.php', { data: Data, },
    function(result) {
        do_success_staff();
    })
    .fail(function(out) {
        do_fail_staff;
    }); 
```

处理时`.fail(function(out)`，我得到了意想不到的结果。wp-comments-post.php 根据错误返回不同的答案，例如如果您将其留空，则“请写下您的评论”或如果您输入的电子邮件地址不正确，则“输入有效的电子邮件地址” . 但是，我收到这样的结果：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>error</title>
<style type="text/css">
    your css goes here
</style>
</head>
<body id="error-page">
<p><strong>error</strong>: write your comment.</p></body>
</html> 
```

因此，我尝试处理向用户显示的错误答案，如下所示：

```
.fail(function(out) {
    var error_value = $(out).find("p");
        $("div#error").text(error_value);
    }); 
```

问题是它返回一个内部服务器错误（500 页）而不是预期的结果。你怎么看这个问题？我认为错误页面是在浏览器解析之前收到的！有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:49:21.663

非常感谢[Kevin B](https://stackoverflow.com/users/400654/kevin-b)解决了我的问题。这个问题的继续及其答案在这里：

[你知道这是什么类型的代码以及如何用 jQuery 解析它吗？](https://stackoverflow.com/questions/15772701/do-you-know-type-of-code-this-is-and-how-to-parse-it-with-jquery)

# perl - Perl - 将行更改为逗号分隔的变量

> ID：15767913
> 
> 赞同：-5
> 
> 时间：2013-04-02T15:20:32.910
> 
> 标签：perl

我想从 Mac 上的命令行执行此操作。所以，我想 Perl 可能是它的选择，但我不知道该怎么做：

我有一个包含 100,000 个名称的文件，每行一个名称

我想更改它，并在一行中有 50 个名称，用逗号分隔，然后在下一行，接下来的 50 个名称用逗号分隔，等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:24:14.620

您可以使用以下单线：

```
perl -pe 's/\n/,/ if $. % 50' < file > output 
```

`\n`如果当前输入的行号 ( ) 不能被50`$.`整除 ( )，它将用逗号替换换行符 ( )。`%`

# java - @Transactional(propagation=Propagation.REQUIRES_NEW) 的奇怪行为

> ID：15767914
> 
> 赞同：19
> 
> 时间：2013-04-02T15:20:34.187
> 
> 标签：java, spring, hibernate, transactions, rollback

**这是我的问题：**

我在 Java EE/Spring/Hibernate 应用程序上运行批处理。这批调用一个`method1`. 这个方法调用一个`method2`可以抛出`UserException`的（一个扩展的类`RuntimeException`）。这是它的样子：

```
@Transactional
public class BatchService implements IBatchService {
 @Transactional(propagation=Propagation.REQUIRES_NEW)
 public User method2(User user) {
   // Processing, which can throw a RuntimeException
 }

 public void method1() {
   // ...
   try {
     this.method2(user);
   } catch (UserException e) {
     // ...
   }
   // ...
 }
} 
```

随着执行的继续，异常会被捕获，但在`method1`事务结束时会抛出 RollbackException。

**这是堆栈跟踪：**

```
org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Transaction marked as rollbackOnly
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:476)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy128.method1(Unknown Source)
at batch.BatchController.method1(BatchController.java:202) 
```

当`method2`不抛出此异常时，它运行良好。

**我试过的：**

*   设置`@Transactional(noRollbackFor={UserException.class}))`为`method1`
*   尝试并赶上`method2`

但这并没有改变什么。

由于异常是在发生回滚的不同事务中引发的，我不明白为什么它不起作用。我看了一下：[Jpa transaction javax.persistence.RollbackException: Transactionmarked as rollbackOnly](https://stackoverflow.com/questions/11418290/jpa-transaction-javax-persistence-rollbackexception-transaction-marked-as-rollb)但它并没有真正帮助我。

如果有人能给我一个线索，我将非常感激。

**更新**

我通过设置`propagation=Propagation.REQUIRES_NEW`调用的方法`method2`（实际上是发送异常的方法）使其工作。这个方法定义在一个与 my 非常相似的类中`BatchService`。所以我不明白为什么它在这个级别上有效，而不是在`method2`.

*   我已将注释设置`method2`为公共，因为`@Transactional`如果方法是私有的，则不考虑注释，如文档中所述：

> @Transactional 注解可以放在接口定义、接口上的方法、类定义或类上的公共方法之前。

*   我也尝试使用`Exception`代替`RuntimeException`（因为它更合适）但它也没有改变任何东西。

即使它正在工作，问题仍然悬而未决，因为它有一种奇怪的行为，我想了解为什么它的行为不像它应该的那样。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-02T16:32:26.810

默认情况下，Spring 事务通过使用处理事务和异常的代理包装 Spring bean 来工作。当您调用`method2()`from`method1()`时，您完全绕过了此代理，因此它无法启动新事务，并且您实际上是`method2()`从与调用 to 所打开的事务相同的事务中调用`method1()`。

相反，当您从 调用另一个注入 bean 的方法时`method1()`，您实际上是在调用事务代理上的方法。因此，如果这个外来方法被标记为 REQUIRES_NEW，则代理会启动一个新事务，并且您可以捕获异常`method1()`并恢复外部事务。

这在[文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/htmlsingle/#tx-decl-explained)中有所描述。

# javascript - 在网格表示中合并两个 div

> ID：15767916
> 
> 赞同：1
> 
> 时间：2013-04-02T15:20:39.473
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

我有一个 4x4 网格，我通过 jquery UI 使其可排序和可选择。我想做的下一件事是能够合并我选择的两个 div，但我完全不知道该怎么做。

我的第一个想法是尝试将其转换为带有 colspan 和 rowspan 属性的表格和玩具，但这会弄乱我的可排序功能。

如果有人能指出我正确的方向，我将不胜感激。基本上我可能会重新排序单元格，然后选择两个或多个单元格并在有意义的情况下合并它们！

我有一个 JSFiddle 我到目前为止[在这里](http://jsfiddle.net/fmusV/)

```
<ol id="selectable">
    <li class="ui-state-default" id="1">1</li>
  <li class="ui-state-default" id="2">2</li>
  <li class="ui-state-default" id="3">3</li>
  <li class="ui-state-default" id="4">4</li>
  <li class="ui-state-default" id="5">5</li>
  <li class="ui-state-default" id="6">6</li>
  <li class="ui-state-default" id="7">7</li>
  <li class="ui-state-default" id="8">8</li>
  <li class="ui-state-default" id="9">9</li>
  <li class="ui-state-default" id="10">10</li>
  <li class="ui-state-default" id="11">11</li>
  <li class="ui-state-default" id"12">12</li>
</ol>

$(function() {
    $( "#selectable" )
  .sortable({ handle: ".handle" })
  .selectable()
    .find( "li" )
      .addClass( "ui-corner-all" )
      .prepend( "<div class='handle'><span class='ui-icon ui-icon-arrow-4'></span></div>" );
  });
$(function() {
    $( "#selectable" ).selectable({
      stop: function() {
        var result = $( "#select-result" ).empty();
        $( ".ui-selected", this ).each(function() {
          var index = $( "#selectable li" ).index( this );
          result.append(" #"+ ( index + 1 ) );
        });
      }
    });
  }); 
```

提前致谢！！

**编辑**

还要澄清一下，我不介意在此阶段是否在合并后创建一个空白 div，以防万一：）

# css - 页面刷新导致css被忽略

> ID：15767917
> 
> 赞同：4
> 
> 时间：2013-04-02T15:20:40.937
> 
> 标签：css, google-chrome, iis-6, mime-types

我的页面加载正常，然后只要您点击刷新按钮，所有样式都会消失。

它似乎特定于chrome。如果我查看网络选项卡，我会看到我的 css 文件返回 304 Not modified 但类型已更改为 text/html。在初始加载时，它是文本/css。

如果我关闭缓存一切正常。

[我在这里](https://stackoverflow.com/questions/10912763/pages-do-not-load-correctly-only-when-click-refresh-on-win7iis7-5)看到了一个类似的问题，但它以前工作过，我没有更改服务器。

我似乎已将其范围缩小到一个 css 文件的问题。特别是添加背景图像。

```
body {background:#b4dfff url(/images/backgrounds/background.jpg) no-repeat fixed top;
text-align:left;
font-family: Helvetica, Arial, sans-serif;
color: #585858;
font-size: 12px;    
} 
```

如果我删除背景，问题发生的频率就会大大降低。我尝试将其更改为

```
background-color:#b4dfff;
Background-image:url(/images/backgrounds/background.jpg) no-repeat fixed top; 
```

那没用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T16:18:49.123

事实证明，这与 chrome 处理 304 响应有关。

Chrome 请求内容并收到 304 响应，表示它没有被修改。

当 IIS 返回 304 响应时，其中包含内容类型。Chrome 不会忽略内容类型并查看并看到内容类型已更改，因为 IIS 仅返回默认类型 chrome 认为该文件不再是样式表并且不加载它。

所以为了解决这个问题，我们让它每次都重新加载样式表。我还没有找到一种简单的方法来修改 304 响应，使其不包含内容类型。

这是谷歌问题 [https://code.google.com/p/chromium/issues/detail?id=246875](https://code.google.com/p/chromium/issues/detail?id=246875)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:43:49.970

这里提到了同样的问题：[http://productforums.google.com/forum/#!topic/chrome/zID6uQQfKH8](http://productforums.google.com/forum/#!topic/chrome/zID6uQQfKH8) 似乎临时解决方案可能是

> 关闭 ETags 并在 HTTP 标头中设置 no-cache。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-07T22:24:53.540

我遇到过同样的问题。

我发现一个简单的解决方法是在你的 css 文件的每一行的末尾添加“！important”，以确保它覆盖默认的 css 样式。

我检查了页面刷新后一直恢复到原始样式的项目，现在它们保持 css 文件中提供的样式。

一个例子：

```
.div {
    display: block !important;
    margin-top: 10px !important; 
} 
```

# javascript - 使用 BreezeJS 在 Durandal 中显示模态

> ID：15767921
> 
> 赞同：5
> 
> 时间：2013-04-02T15:20:57.593
> 
> 标签：javascript, knockout.js, modal-dialog, breeze, durandal

我在这个问题上苦苦挣扎了很长时间，并想为什么不在 Stackoverflow 上问这个问题！我的问题如下：

我正在使用 Durandal 和 BreezeJS 创建一个单页应用程序 (SPA)。每当用户创建新内容时，都会调用 Breeze Lib 中的 createEntity 函数，并返回我的对象​​。我把它推到一个 Ko.observablearray 中，瞧它工作得很好；）

直到这一切都工作正常。

但现在棘手的部分来了，我使用 ko.observablearray 创建一个带有数据绑定的表。每一行都是可单击的，当您单击一个时，将调用 SelectedMemo 函数并成功传递“项目”。但是它来了，当这个函数需要创建自定义模式时，什么也没有发生。我收到一个错误 /app/views/.html 不存在。我知道这里发生了什么，它试图路由到一个不存在的页面，因为没有创建实体的视图和模型视图。

我该如何解决这个问题？这样当我单击表格中的一行时，可以看到我的项目的所有数据吗？

这是到目前为止的代码：

视图模型：

```
 define(function (require) {
    var router = require('durandal/plugins/router'),
        app = require('durandal/app'),
        system = require('durandal/system'),
        addmemo = require('viewmodels/modals/addMemo'),
        memo = require('viewmodels/modals/memo'), //probably in the models folder but for now its okay
        dataservice = require('services/dataservice'),
        memos = ko.observableArray([]),
        suspendItemSave = false;

    function extendMemo(memoToExtend) {
        if (memoToExtend.isEditing) return; // already extended

        memoToExtend.isEditing = ko.observable(false);
        //Deze functie wordt getriggerd zodra het aanpassen klaar is!

        // listen for changes with Breeze PropertyChanged event
        memoToExtend.entityAspect.propertyChanged.subscribe(function () {
            if (memoToExtend.propertyChangedPending || suspendItemSave) { return; }
            // throttle property changed response
            // allow time for other property changes (if any) to come through
            memoToExtend.propertyChangedPending = true;
            setTimeout(validateAndSaveModifiedItem, 10);

            function validateAndSaveModifiedItem() {
                if (memoToExtend.entityAspect.entityState.isModified()) {
                    if (memoToExtend.entityAspect.validateEntity()) {
                        dataservice.saveChanges();
                    } else { // errors
                        // handleItemErrors(memoToExtend);
                        memoToExtend.isEditing(true); // go back to editing
                    }
                }
                memoToExtend.propertyChangedPending = false;
            }
        });
    }

    function init() {
        dataservice = new dataservice('api/memo');
        dataservice.getAllRows('AllMemos').then(function (data) {
            data.results.forEach(function (item) {
                //Important step otherwise you are not able to create a memo modal!
                extendMemo(item);
                // memos.push(new memo(item));
                memos.push(item);
            });
            system.log("Initialization succesfull!");
        }).fail(function() {
            system.log("Error initialization!");
        });
    }

    init();
    return {
        displayName: 'Estimating page',
        memos: memos,
        activate: function() {
            system.log("Estimating page started!");
        },
        canDeactivate: function() {
            return app.showMessage('Are you sure you want to leave this page and stop estimating?', 'Navigate', ['Yes', 'No']);
        },
        addMemo: function() {
            app.showModal(new addmemo()).then(function (result) {
                //maby first extend? For editing on the go see hot towel
                if (result != undefined) {                
                    var memoN = dataservice.createT({
                        Description: result[0].Description,
                        CreationDate: result[0].CreationDate,
                        Employee: result[0].User,
                        Type: result[0].Type
                    }, 'tblMemo');

                    if (memoN.entityAspect.validateEntity()) {
                        extendMemo(memoN); //deze 
                        //memos.push(new memo(memoN)); //& deze moeten gewrapped worden!!! anders werkt de entityAspect niet
                        memos.push(memoN);
                        dataservice.saveChanges();
                    }

                    /*
                    if (memoN.entityAspect.validateEntity()) {
                        //memos.push(memoN); //this is not the right thing to add this should be a memo Object!
                        extendMemo(memoN);     
                       // extendMemo(newMemo);
                        memos.push(new memo(memoN.Employee(), memoN.Description(), memoN.Type(), memoN.CreationDate()));
                        dataservice.saveChanges();
                    }*/
                }
            }).fail(function(result) {
                //in future show nice error message, hmmm toastr....?
            });
        },
        selectedMemo: function (selectedMemo, element) {
            //need to make a temp object with data before user clicks okay button or what so ever.
            //THis because the input fields are all observables
            if (selectedMemo) {
                selectedMemo.isEditing(true);
            }

            app.showModal(selectedMemo).then(function (result) {
                if (result) {
                    if (selectedMemo) {
                        selectedMemo.isEditing(false);
                        memos.remove(selectedMemo);
                        selectedMemo.entityAspect.setDeleted();
                        dataservice.saveChanges();
                    }
                }
            }).fail(function() {

            });

            //futher use for deleting memo
            /*
            app.showMessage('Do you want to delete this memo?', 'Delete memo', ['Yes', 'No']).then(function (result) {
                if (result == "Yes") {
                    memos.remove(selectedMemo);
                    selectedMemo.entityAspect.setDeleted();
                    dataservice.saveChanges();
                }
            });
            */ 
        }
    };
}); 
```

我也尝试创建一个备忘录对象，但是当我这样做时，EntityAspect 在我的项目中丢失了！但是，模态是否有效？如何解决这一切？

更新 2：

我已经重写了我的备忘录模型，所以它将实体保存在一个变量中。但是不再触发 PropertyPendingChanged：S

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:08:28.307

所以我终于做到了:) 我已经对此进行了 3 天的编码，但我得到了它的工作！

这是我对代码所做的，我创建了仅包含实体变量的 Memo.js。在我看来，我称这个变量和他的数据。当用户编辑一个值时，订阅功能会自动触发，新的值会传入数据库。希望它有用，花了我整整 3 天，每次大约 8 小时 XD

意见

备忘录.html

```
<div class="messageBox">
    <div class="modal-header">
        <h2>Memo details</h2>
    </div>
    <div class="modal-body">
        Employee: <input type="text" data-bind="value: MemoEntity._latestValue.Employee"/>
        Description: <input type="text" data-bind="value: MemoEntity._latestValue.Description"/>
        Type: <input type="text" data-bind="value: MemoEntity._latestValue.Type"/>
    </div>
    <div class="modal-footer">
        <ul class="btn-group">
            <button class="btn" data-bind="click: closeModal">Ok</button>
            <button class="btn btn-primary" data-bind="click: deleteMemo">Delete</button>
        </ul> 
    </div>
</div> 
```

备忘录模型视图

```
(function () {
    var _this = this;
    //self.dataservice = require('services/dataservice');
    define(function (require) {
        var Memo;
        return Memo = (function () {
            function Memo(dataForMemo) {
                this.MemoEntity = ko.observable(dataForMemo);

               // this.Employee = ko.observable(dataForMemo.entityAspect.entity.Employee());
               // this.Description = ko.observable(dataForMemo.entityAspect.entity.Description());
               // this.Type = ko.observable(dataForMemo.entityAspect.entity.Type());
               // this.CreationDate = ko.observable(dataForMemo.entityAspect.entity.CreationDate());
               // this.isEditing = dataForMemo.entityAspect.entity.isEditing;
            }

            Memo.prototype.closeModal = function () {
                return this.modal.close(false);
            };

            Memo.prototype.deleteMemo = function () {
                return this.modal.close(true);
            };
            return Memo;
        })();
    });
}).call(this); 
```

还有我的页面js

模型视图

```
define(function (require) {
    var router = require('durandal/plugins/router'),
        app = require('durandal/app'),
        system = require('durandal/system'),
        addmemo = require('viewmodels/modals/addMemo'),
        memo = require('viewmodels/modals/memo'), //probably in the models folder but for now its okay
        dataservice = require('services/dataservice'),
        memos = ko.observableArray([]),
        suspendItemSave = false;

    function extendMemo(memoToExtend) {
        if (memoToExtend.isEditing) return; // already extended

        memoToExtend.isEditing = ko.observable(false);
        //Deze functie wordt getriggerd zodra het aanpassen klaar is!

        // listen for changes with Breeze PropertyChanged event
        memoToExtend.entityAspect.propertyChanged.subscribe(function () {
            if (memoToExtend.propertyChangedPending || suspendItemSave) { return; }
            // throttle property changed response
            // allow time for other property changes (if any) to come through
            memoToExtend.propertyChangedPending = true;
            setTimeout(validateAndSaveModifiedItem, 10);

            function validateAndSaveModifiedItem() {
                if (memoToExtend.entityAspect.entityState.isModified()) {
                    if (memoToExtend.entityAspect.validateEntity()) {
                        dataservice.saveChanges();
                    } else { // errors
                        // handleItemErrors(memoToExtend);
                        memoToExtend.isEditing(true); // go back to editing
                    }
                }
                memoToExtend.propertyChangedPending = false;
            }
        });
    }

    function init() {
        dataservice = new dataservice('api/memo');
        dataservice.getAllRows('AllMemos').then(function (data) {
            data.results.forEach(function (item) {
                //Important step otherwise you are not able to create a memo modal!
                extendMemo(item);
                var t = new memo(item);
                memos.push(t);
                //memos.push(item);
            });
            system.log("Initialization succesfull!");
        }).fail(function() {
            system.log("Error initialization!");
        });
    }

    init();
    return {
        displayName: 'Estimating page',
        memos: memos,
        activate: function() {
            system.log("Estimating page started!");
        },
        canDeactivate: function() {
            return app.showMessage('Are you sure you want to leave this page and stop estimating?', 'Navigate', ['Yes', 'No']);
        },
        addMemo: function() {
            app.showModal(new addmemo()).then(function (result) {
                //maby first extend? For editing on the go see hot towel
                if (result != undefined) {                
                    var memoN = dataservice.createT({
                        Description: result[0].Description,
                        CreationDate: result[0].CreationDate,
                        Employee: result[0].User,
                        Type: result[0].Type
                    }, 'tblMemo');

                    if (memoN.entityAspect.validateEntity()) {
                        extendMemo(memoN); //deze 
                        memos.push(new memo(memoN)); //& deze moeten gewrapped worden!!! anders werkt de entityAspect niet
                        dataservice.saveChanges();
                    }

                    /*
                    if (memoN.entityAspect.validateEntity()) {
                        //memos.push(memoN); //this is not the right thing to add this should be a memo Object!
                        extendMemo(memoN);     
                       // extendMemo(newMemo);
                        memos.push(new memo(memoN.Employee(), memoN.Description(), memoN.Type(), memoN.CreationDate()));
                        dataservice.saveChanges();
                    }*/
                }
            }).fail(function(result) {
                //in future show nice error message, hmmm toastr....?
            });
        },
        selectedMemo: function (selectedMemo, element) {
            //need to make a temp object with data before user clicks okay button or what so ever.
            //THis because the input fields are all observables
        //    if (selectedMemo) {
                //selectedMemo.MemoEntity._latestValue.entity.isEditing(true);
               // selectedMemo.isEditing(true);
        //    }

            app.showModal(selectedMemo).then(function (result) {
                if (result) {

                    app.showMessage('Do you want to delete this memo?', 'Delete memo', ['Yes', 'No']).then(function (resultMes) {
                        if (resultMes == "Yes") {
                            memos.remove(selectedMemo);
                            selectedMemo.MemoEntity._latestValue.entityAspect.setDeleted();
                            dataservice.saveChanges();
                        }
                    });

                }
            }).fail(function() {

            });

            //futher use for deleting memo
            /*
            app.showMessage('Do you want to delete this memo?', 'Delete memo', ['Yes', 'No']).then(function (result) {
                if (result == "Yes") {
                    memos.remove(selectedMemo);
                    selectedMemo.entityAspect.setDeleted();
                    dataservice.saveChanges();
                }
            });
            */

        }
    };
}); 
```

我对备忘录的看法

```
<table class="table table-hover table-striped">
                    <thead>
                        <tr>
                            <th>Created</th><th>User</th><th>Memo</th><th>Type</th>
                        </tr>
                    </thead>
                    <tbody data-bind="visible: memos().length > 0, foreach: memos">
                        <tr data-bind="click: $parent.selectedMemo">
                            <td data-bind="text: MemoEntity._latestValue.CreationDate"></td>
                            <td data-bind="text: MemoEntity._latestValue.Employee"></td>
                            <td data-bind="text: MemoEntity._latestValue.Description"></td>
                            <td data-bind="text: MemoEntity._latestValue.Type"></td>
                        </tr>
                    </tbody>
                    <tbody data-bind="visible: memos().length == 0">
                        <tr>
                            <td colspan="4">NO MEMOS ADDED YET</td>
                        </tr>
                    </tbody>
                </table> 
```

希望能帮助到你 ;）

# ios - 在 iOS 上，您可以在调用 applicationDidEnterBackground 之前开始在后台线程上工作吗？

> ID：15767922
> 
> 赞同：2
> 
> 时间：2013-04-02T15:21:05.360
> 
> 标签：ios, concurrency, grand-central-dispatch

我正在更新我的应用程序中的一些内容，我希望在用户退出应用程序时完成。看来我必须停止当前正在运行的更新并在该`applicationDidEnterBackground`方法中启动另一个更新。如果我可以在调用该方法之前将一些工作标记为我想在后台运行的东西，那会更方便。

这是场景：

*   我正在尝试更新内容并开始运行需要一些时间的 SQL 更新。（超过您必须从 . 返回的 5 秒`applicationDidEnterBackground`。）
*   用户离开应用程序。当前更新已暂停，但我真的希望它完成。
*   我可以开始一个新的更新，从另一个停止的地方开始，但是如果用户切换回应用程序，我就会遇到 SQL 级别的并发问题。

将 SQL 查询分解为更小的批次以便我可以在`applicationDidEnterBackground`回调中干净地切换是唯一的选择吗？它几乎使执行时间加倍。（我不担心操作系统会杀死我的后台任务，简历处理得很好。）

理想情况下，我能够让现有的工作在后台无缝地继续（在操作系统的乐趣下），这可能吗？有更好的选择吗？

（我已经阅读了[Programming Guide](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)关于执行后台任务的部分。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:41:05.690

您可以继续运行当前线程。您不必停止其中任何一个并开始新的。

您唯一需要做的事情是，如果在进入后台时使用 beginBackgroundTaskWithExpirationHandler（如 proxi 所述）并在完成后使用 endBackgroundTask。此方法可让您的应用程序最多执行 10 分钟。您的应用程序的 UI 将无法访问（因为用户切换到另一个应用程序），但您的应用程序的所有线程将继续运行。当您执行 endBackgroundTask 或 10 分钟到期时，系统将暂停所有线程。

我会这样组织

*   您是否正在处理正在运行的线程

*   在 applicationDidEnterBackground 调用 beginBackgroundTaskWithExpirationHandler。将 UIBackgroundTaskIdentifier 保存在可访问的某个地方。

*   在处理线程结束时，检查 UIBackgroundTaskIdentifier 是否不为 0，如果不为 0，则调用 endBackgroundTask。将 UIBackgroundTaskIdentifier 设置为零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:33:32.687

如果我理解正确，您只需将长时间运行的操作包装到 beginBackgroundTaskWithExpirationHandler 块中。有关如何使用它的详细信息，请参阅该方法的文档。

# javascript - 从内容可编辑的 div 中获取已删除的字符

> ID：15767925
> 
> 赞同：8
> 
> 时间：2013-04-02T15:21:08.913
> 
> 标签：javascript, jquery, html, character

我使用 a 是`content editable div`因为我想在文本区域中显示用户选择的表情符号。

我想知道按钮`character`是`deleted`什么。`backspace``delete`

是否可以用`jquery`or知道字符`javascript`？

**更新**

这根本不是重复的，因为所有答案都是关于如何跟踪按下的键而不是关于选中的字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:33:08.467

我没有干净的解决方案。但是，如果您按退格键，这个会显示已删除的字符：

```
var lastText = $('#editable').text();
$('#editable').keyup(function(event){
  if (event.which==8 || event.which==46) {
     var newText =  $(this).text();
    for (var i=0; i<lastText.length-1; i++) {
      if (lastText[i]!=newText[i]) {
       console.log("char '" +  lastText[i] + "' was removed at index "+i);
        lastText = newText;
        return;
      }
    }
  }
}); 
```

[示范](http://jsbin.com/arulix/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:44:33.030

您可以使用该`preventDefault()`功能做您想做的事。

这是一个使用 a 的示例，`<textarea>`但它应该扩展到任何元素：

[http://jsfiddle.net/4dThe/](http://jsfiddle.net/4dThe/)

```
$('#txtArea').keydown(function(e) { 

    if (e.which == 8)
    {
     var value =   $(this).val();
     var lastchar = value.substring(value.length - 1);

        alert("Last character is: " + lastchar);
        $(this).val(value.substring(0, value.length - 1));
        e.preventDefault();
    }

}); 
```

该`preventDefault()`方法阻止退格操作，因此不会删除最后一个字符。然后您可以看到最后一个字符是什么，并自己执行退格操作。

您需要更改上面的示例以检测当前光标位置以删除正确的字符，但这是一个开始。

# android - 实施谷歌oAuth2

> ID：15767932
> 
> 赞同：0
> 
> 时间：2013-04-02T15:21:25.157
> 
> 标签：android, oauth-2.0, google-oauth

我只是想通过谷歌验证我的登录。用户必须输入他的 ID 和密码，并且我必须在应用程序本身中验证登录（没有 Web 视图）。我试图自己解决这个问题，但无法:(。任何人都可以建议我应该从哪里以及如何开始？我可能需要下载哪些 jar？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:44:08.560

Google Play 服务最近创建并发布，旨在简化 Google 产品的 OAuth 流程。您可能想从这里开始 -[使用 Play 服务进行身份验证](http://developer.android.com/google/play-services/auth.html)

用户设备应安装 Play Services APK 以充分利用此功能，但 Google 表示大多数使用 Play Store 的 Android 2.1 以上设备应在设备上安装这些服务，随时可用。

另请阅读[设置](http://developer.android.com/google/play-services/setup.html)部分，了解如何设置项目和设备以使用这些服务。

# php - Codeigniter：将数据传递到另一个视图

> ID：15767933
> 
> 赞同：0
> 
> 时间：2013-04-02T15:21:26.110
> 
> 标签：php, database, codeigniter

好的，所以这个问题可能非常简单，我只是缺少一些基本的东西，但是这里有。我目前正在构建的网站是在 Codeigniter 中开发的。这是一个练习的网站。

现在我的一个函数（二头肌）调用一个模型（model_get），它从我的数据库中获取数据，然后将其传递到视图（content_biceps.php）

因此，为了尽可能最好地解释这一点，这是我的控制器模型和视图。

控制器功能：

```
 public function biceps(){

        if($this->session->userdata("is_logged_in")){

            $this->load->model("model_get");
            $data["results"] = $this->model_get->getExercises("1");

            $this->load->view("site_header");
            $this->load->view("site_nav");
            $this->load->view("site_sidebar");
            $this->load->view("content_biceps", $data);
            $this->load->view("site_footer");
        }   else {
            redirect ("site/restricted");
        }
    } 
```

模型函数get_data：

```
 function getData($page){
        $query = $this->db->get_where("pagedata", array("page" => $page));
        return $query->result();
    } 
```

查看内容_二头肌：

```
foreach($results as $row){

    echo '<div class="item">
            <h2>'.$row->name.'</h2>
            <img src="'.$row->image.'" alt="'.$row->name.'" />';

    $e_id = $row->e_id;
    echo $e_id;

    echo form_submit('exercise_submit', 'view');
    echo '</div>';
    echo form_close();
} 
```

现在这个视图效果很好，它可以获取我需要的数据，例如每个练习的名称、图像和 e_id，并将它们全部显示出来。

如果您注意到名为“查看”的提交按钮。如果你能想象所有这些练习都显示在一页上。它们都有一个唯一的 e_id。我想要它，以便当我单击某个练习的查看按钮时，我会被带到一个页面视图，例如“exercise_view”，我可以在其中使用 e_id 来获取该特定练习的数据。目前，当我单击查看并在另一个页面中使用它时，我不知道如何获取 e_id。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:28:53.733

您可以尝试使用所需的 e_id 添加输入，例如

```
<div>
    <input type="hidden" name="e_id" value="{$e_id}" />
    <input type="submit" name="view" />
</div> 
```

然后在控制器中，您可以获得 e_id

```
$e_id = $this->input->post('e_id'); 
```

# telerik - RadUpload 在 RadGrid 的 EditFormSettings (WebUserControl) 中不起作用

> ID：15767944
> 
> 赞同：0
> 
> 时间：2013-04-02T15:21:53.780
> 
> 标签：telerik, radgrid, radupload

简而言之，我有带有**WebUserControl**类型的编辑表单的 RadGrid。

```
 <telerik:RadAjaxPanel runat="server">
    <telerik:RadGrid ...>

    <Columns>
    ...
    </Columns>
    <EditFormSettings UserControlName=".../EditForm.ascx" EditFormType="WebUserControl">
    </EditFormSettings>

    </MasterTableView>

    </telerik:RadGrid>
    </telerik:RadAjaxPanel> 
```

EditForm 包含**RadUpload**控件。问题是：在 RadUpload 的 OnUpdateCommand UploadedFiles 中，所有时间都是空的。我无法获取和保存上传的文件。

# android - Eclipse - 限制 logcat 输出以调试相关日志

> ID：15767946
> 
> 赞同：0
> 
> 时间：2013-04-02T15:21:58.933
> 
> 标签：android, eclipse, logcat

我重新安装了 Eclipse，现在我`Logcat`记录了手机发送的所有内容，例如电池状态或邮件发送状态。

有没有办法告诉 Eclipse/Logcat 只记录我正在调试的应用程序的真实情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:27:26.420

使用“app:com.yourdomain.appname”过滤 Logcat。我还添加了一个过滤器，它使用 not 运算符删除更多项目：

```
tag:^((?!CoreMetrics|InputEventConsistency|memalloc|Adreno200-EGLSUB|Resources|global|TaggingRequest|Facade[B|U]|dalvik|skia|KeyCharacterMap|BackStackEntry|FragmentManager|ServiceRunnable|ServiceLocator|BaseHttpRequest|szipinf|APACHE).)*$ 
```

您需要专门针对您所看到的项目编辑列表，但这是减少静态的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:26:59.357

您可以使用标签登录，然后使用相同的标签在 logcat 中过滤。您可以通过单击左侧列表中的 + 来添加过滤器。您可以识别它，因为第一个标签将是“所有消息”。单击列表可启用过滤器。

```
Log.i("MyTag", "some log message"); 
```

同样在较新版本的 ADT eclipse 插件中，我相信它会自动将您的应用程序添加到过滤器列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:30:20.680

您可以在顶部的搜索框中输入搜索过滤器，或者您可以通过 eclipse logcat 窗口左侧可见的过滤器面板使这些过滤器永久化。如果它不可见，请注意 logcat 右上角显示/隐藏它的按钮。

“有没有办法告诉 Eclipse/Logcat 只记录我正在调试的应用程序的真实情况？”

不完全是。您应该可以使用过滤器“app:com.yourapp”来做到这一点。此过滤器基于 logcat 输出的“应用程序”列/数据，这将是完美的，但 Android 设备在将该信息添加到调试输出时相当不习惯。实际上，Nexus 4 是我用过的第一款手机，它在其 logcat 输出中可靠地指定了该数据字段。

但即使“应用程序”列对您不起作用，您也应该能够找到其他过滤器，将可见日志语句减少到可管理的级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:32:27.460

在您的 LogCat 单击“向下箭头按钮”左侧的按钮（倒数第二个）中，单击“加号”写入过滤器名称，并在应用程序中写入您想要获取过滤日志的应用程序的包名称，例如 com.yourapp 按确定和中提琴！！！

# codeigniter - 如何同时为两列使用类似活动记录

> ID：15767947
> 
> 赞同：0
> 
> 时间：2013-04-02T15:22:01.857
> 
> 标签：codeigniter, activerecord

我正在尝试创建一个搜索页面，该页面使用他们的品牌和型号在产品数据库下搜索产品。`like`但这里的问题是，当查询同时包含品牌和型号时，由于和“or_like”活动记录，不会返回任何结果。

我正在尝试以下操作：

```
 $this->db->select("*");
    $this->db->from("products");
    $this->db->like('brand', $query, 'both');
    $this->db->or_like('model', $query, 'both');
    $this->db->limit(3);
    $this->db->order_by("views", "ASC");
    $query = $this->db->get(); 
```

我应该怎么做才能获得同时包含品牌和型号名称的查询的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:07:46.383

我假设实际查询看起来像这样：

```
SELECT * 
  FROM products 
  WHERE brand LIKE '%query%' 
    OR model LIKE '%query%' 
  ORDER BY views ASC
  LIMIT 3 
```

`brand`这是获取包含“查询”或包含“查询”的记录的正确查询`model`。

我会说运行`$this->db->last_query();`并查看查询是否正确 - 然后针对您的数据库运行该实际查询。

# android - Searchable Dictionary：如何显示单词列表（listview）

> ID：15767948
> 
> 赞同：0
> 
> 时间：2013-04-02T15:22:04.043
> 
> 标签：android, listview, searchable

大家好你们好。我想几乎每个人都知道“可搜索字典”android 示例项目。我的问题是：如何在主屏幕上显示 definitions.txt 中的单词列表？每个人都知道，如果我们中的一个人点击搜索按钮，它会显示来自数据库的部分条目。我想在主活动的 ListView 中显示所有条目。

我是新手。有人能帮我吗？？？谢谢！

字典数据库.Java

```
public class WordActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.word);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    }

    Uri uri = getIntent().getData();
    Cursor cursor = managedQuery(uri, null, null, null, null);

    if (cursor == null) {
        finish();
    } else {
        cursor.moveToFirst();

        TextView word = (TextView) findViewById(R.id.word);
        TextView definition = (TextView) findViewById(R.id.definition);

        int wIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_WORD);
        int dIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_DEFINITION);

        word.setText(cursor.getString(wIndex));
        definition.setText(cursor.getString(dIndex));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);
    }

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
        case android.R.id.home:
            Intent intent = new Intent(this, SenseDictionary.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return false;
    }
}
} 
```

DictionaryProvider.Java

```
public class DictionaryProvider extends ContentProvider {
String TAG = "DictionaryProvider";

public static String AUTHORITY = "com.pesquisa.dicionario.searchabledict.DictionaryProvider";
public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/dictionary");

public static final String WORDS_MIME_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE +
                                              "/vnd.pesquisa.dicionario.searchabledict";
public static final String DEFINITION_MIME_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE +
                                                   "/vnd.pesquisa.dicionario.searchabledict";

private DictionaryDatabase mDictionary;

private static final int SEARCH_WORDS = 0;
private static final int GET_WORD = 1;
private static final int SEARCH_SUGGEST = 2;
private static final int REFRESH_SHORTCUT = 3;
private static final UriMatcher sURIMatcher = buildUriMatcher();

private static UriMatcher buildUriMatcher() {
    UriMatcher matcher =  new UriMatcher(UriMatcher.NO_MATCH);
    matcher.addURI(AUTHORITY, "dictionary", SEARCH_WORDS);
    matcher.addURI(AUTHORITY, "dictionary/#", GET_WORD);
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY, SEARCH_SUGGEST);
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY + "/*", SEARCH_SUGGEST);

    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_SHORTCUT, REFRESH_SHORTCUT);
    matcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_SHORTCUT + "/*", REFRESH_SHORTCUT);
    return matcher;
}

@Override
public boolean onCreate() {
    mDictionary = new DictionaryDatabase(getContext());
    return true;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs,
                    String sortOrder) {

    switch (sURIMatcher.match(uri)) {
        case SEARCH_SUGGEST:
            if (selectionArgs == null) {
              throw new IllegalArgumentException(
                  "selectionArgs must be provided for the Uri: " + uri);
            }
            return getSuggestions(selectionArgs[0]);
        case SEARCH_WORDS:
            if (selectionArgs == null) {
              throw new IllegalArgumentException(
                  "selectionArgs must be provided for the Uri: " + uri);
            }
            return search(selectionArgs[0]);
        case GET_WORD:
            return getWord(uri);
        case REFRESH_SHORTCUT:
            return refreshShortcut(uri);
        default:
            throw new IllegalArgumentException("Unknown Uri: " + uri);
    }
}

private Cursor getSuggestions(String query) {
  query = query.toLowerCase();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION,
      SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID};

  return mDictionary.getWordMatches(query, columns);
}

private Cursor search(String query) {
  query = query.toLowerCase();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION};

  return mDictionary.getWordMatches(query, columns);
}

private Cursor getWord(Uri uri) {
  String rowId = uri.getLastPathSegment();
  String[] columns = new String[] {
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION};

  return mDictionary.getWord(rowId, columns);
}

private Cursor refreshShortcut(Uri uri) {

  String rowId = uri.getLastPathSegment();
  String[] columns = new String[] {
      BaseColumns._ID,
      DictionaryDatabase.KEY_WORD,
      DictionaryDatabase.KEY_DEFINITION,
      SearchManager.SUGGEST_COLUMN_SHORTCUT_ID,
      SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID};

  return mDictionary.getWord(rowId, columns);
}

@Override
public String getType(Uri uri) {
    switch (sURIMatcher.match(uri)) {
        case SEARCH_WORDS:
            return WORDS_MIME_TYPE;
        case GET_WORD:
            return DEFINITION_MIME_TYPE;
        case SEARCH_SUGGEST:
            return SearchManager.SUGGEST_MIME_TYPE;
        case REFRESH_SHORTCUT:
            return SearchManager.SHORTCUT_MIME_TYPE;
        default:
            throw new IllegalArgumentException("Unknown URL " + uri);
    }
}

@Override
public Uri insert(Uri uri, ContentValues values) {
    throw new UnsupportedOperationException();
}

@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
    throw new UnsupportedOperationException();
}

@Override
public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {
    throw new UnsupportedOperationException();
}

} 
```

SenseDictionary.Java

```
public class SenseDictionary extends Activity {

private TextView mTextView;
private ListView mListView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mTextView = (TextView) findViewById(R.id.text);
    mListView = (ListView) findViewById(R.id.list);

    handleIntent(getIntent());
}

@Override
protected void onNewIntent(Intent intent) {
    handleIntent(intent);
}

private void handleIntent(Intent intent) {
    if (Intent.ACTION_VIEW.equals(intent.getAction())) {
        Intent wordIntent = new Intent(this, WordActivity.class);
        wordIntent.setData(intent.getData());
        startActivity(wordIntent);
    } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    }
}

private void showResults(String query) {

    Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,
                            new String[] {query}, null);

    if (cursor == null) {
        mTextView.setText(getString(R.string.no_results, new Object[] {query}));
    } else {
        int count = cursor.getCount();
        String countString = getResources().getQuantityString(R.plurals.search_results,
                                count, new Object[] {count, query});
        mTextView.setText(countString);

        String[] from = new String[] { DictionaryDatabase.KEY_WORD,
                                       DictionaryDatabase.KEY_DEFINITION };

        int[] to = new int[] { R.id.word,
                               R.id.definition };

        SimpleCursorAdapter words = new SimpleCursorAdapter(this,
                                      R.layout.result, cursor, from, to);
        mListView.setAdapter(words);

        mListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Intent wordIntent = new Intent(getApplicationContext(), WordActivity.class);
                Uri data = Uri.withAppendedPath(DictionaryProvider.CONTENT_URI,
                                                String.valueOf(id));
                wordIntent.setData(data);
                startActivity(wordIntent);
            }
        });
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);
    }

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
        default:
            return false;
    }
} 
```

}

WordActivity.Java

```
public class WordActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.word);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    }

    Uri uri = getIntent().getData();
    Cursor cursor = managedQuery(uri, null, null, null, null);

    if (cursor == null) {
        finish();
    } else {
        cursor.moveToFirst();

        TextView word = (TextView) findViewById(R.id.word);
        TextView definition = (TextView) findViewById(R.id.definition);

        int wIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_WORD);
        int dIndex = cursor.getColumnIndexOrThrow(DictionaryDatabase.KEY_DEFINITION);

        word.setText(cursor.getString(wIndex));
        definition.setText(cursor.getString(dIndex));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);

    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);
    }

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
        case android.R.id.home:
            Intent intent = new Intent(this, SenseDictionary.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return false;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-18T12:58:14.103

运行 Stream 并为其提供文本文件的路径。

```
private void loadWords() throws IOException {
        Log.d(TAG, "Loading words...");
        final Resources resources = mHelperContext.getResources();
        InputStream inputStream = resources.openRawResource(R.raw.definitions);
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

        try {
            String line;
            while ((line = reader.readLine()) != null) {
                reader.toString();
                String[] strings = TextUtils.split(line, "-");

                if (strings.length < 2) continue;
                long id = addWord(strings[0].trim(), strings[1].trim());
                if (id < 0) {
                    Log.e(TAG, "unable to add word: " + strings[0].trim());
                }
            }
        } finally {
            reader.close();
        }
        Log.d(TAG, "DONE loading words.");
    } 
```

之后，如果您想显示自己的文字，请更改位于 Layout/raw 文件夹中的 definitions.txt 文件的内容。

# pdf - 如何在 itextSharp 中检测表开始？

> ID：15767952
> 
> 赞同：3
> 
> 时间：2013-04-02T15:22:08.303
> 
> 标签：pdf, csv, itextsharp, pdf-reader, pdf-parsing

我正在尝试将 pdf 转换为 csv 文件。pdf文件具有表格格式的数据，第一行作为标题。我已经达到了可以从单元格中提取文本、比较表格中文本的基线并检测换行符的水平，但我需要比较表格边框以检测表格的开头。我不知道如何检测和比较 PDF 中的行。谁能帮我？

谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:32:19.353

正如您所看到的（希望如此），PDF 没有表格的概念，只有放置在特定位置的文本和围绕它们绘制的线条。文本和行之间没有内在联系。理解这一点非常重要。

知道了这一点，如果所有单元格都有足够的填充，您可以寻找足够大的字符之间的间隙，例如 3 个或更多空格的宽度。如果单元格没有足够的间距，不幸的是这可能会破裂。

您还可以查看 PDF 中的每一行，并尝试找出代表“表格”行的内容。[有关如何遍历页面上的每个标记](https://stackoverflow.com/a/15638732/231316)以查看正在绘制的内容，请参阅此答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-15T08:34:08.807

我也在寻找类似问题的答案，但不幸的是我没有找到，所以我自己做了。

像这样的PDF页面[![在此处输入图像描述](https://i.stack.imgur.com/zrOw4.png)](https://i.stack.imgur.com/zrOw4.png)

将输出为[![在此处输入图像描述](https://i.stack.imgur.com/WBLsU.png)](https://i.stack.imgur.com/WBLsU.png)

这是我制作的 dotnet 控制台应用程序的 github 链接。 [https://github.com/Justabhi96/Detect_And_Extract_Table_From_Pdf](https://github.com/Justabhi96/Detect_And_Extract_Table_From_Pdf)

此应用程序检测 PDF 特定页面中的表格，并在控制台上以表格格式打印它们。这是我用来制作这个应用程序的代码。

首先，我使用扩展**iTextSharp 的 iTextSharp.text.pdf.parser.LocationTextExtractionStrategy**类的类从 PDF 中取出文本及其坐标。代码如下：

这是要存储带有坐标和文本的块的类。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace itextPdfTextCoordinates
{
    public class RectAndText
    {
        public iTextSharp.text.Rectangle Rect;
        public String Text;
        public RectAndText(iTextSharp.text.Rectangle rect, String text)
        {
            this.Rect = rect;
            this.Text = text;
        }

    }
} 
```

这是扩展**LocationTextExtractionStrategy**类的类。

```
using iTextSharp.text.pdf.parser;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace itextPdfTextCoordinates
{
    public class MyLocationTextExtractionStrategy : LocationTextExtractionStrategy
    {
        public List<RectAndText> myPoints = new List<RectAndText>();

        //Automatically called for each chunk of text in the PDF
        public override void RenderText(TextRenderInfo renderInfo)
        {
            base.RenderText(renderInfo);

            //Get the bounding box for the chunk of text
            var bottomLeft = renderInfo.GetDescentLine().GetStartPoint();
            var topRight = renderInfo.GetAscentLine().GetEndPoint();

            //Create a rectangle from it
            var rect = new iTextSharp.text.Rectangle(
                                                    bottomLeft[Vector.I1],
                                                    bottomLeft[Vector.I2],
                                                    topRight[Vector.I1],
                                                    topRight[Vector.I2]
                                                    );

            //Add this to our main collection
            this.myPoints.Add(new RectAndText(rect, renderInfo.GetText()));
        }
    }
} 
```

此类覆盖 LocationTextExtractionStrategy 类的**RenderText**方法，每次使用*PdfTextExtractor.GetTextFromPage()*方法从 PDF 页面提取块时都会调用该方法。

```
using itextPdfTextCoordinates;
using iTextSharp.text.pdf;
//Create an instance of our strategy
var t = new MyLocationTextExtractionStrategy();
var path = "F:\\sample-data.pdf";
//Parse page 1 of the document above
using (var r = new PdfReader(path))
{
    for (var i = 1; i <= r.NumberOfPages; i++)
    {
        // Calling this function adds all the chunks with their coordinates to the 
        // 'myPoints' variable of 'MyLocationTextExtractionStrategy' Class
        var ex = iTextSharp.text.pdf.parser.PdfTextExtractor.GetTextFromPage(r, i, t);
    }
}
//Here you can loop over the chunks of PDF
foreach(chunk in t.myPoints){
    Console.WriteLine("character {0} is at {1}*{2}",i.Text,i.Rect.Left,i.Rect.Top);
} 
```

现在，为了检测表格的开始和结束，您可以使用从 PDF 中提取的块的坐标。 **就像如果特定行没有表格，那么当前块的右坐标和下一个块的左坐标将没有跳转。但是有表格的线条将有至少 3 个点的坐标跳跃。**

像具有表的行将具有块的坐标，如下所示：

当前块的
右坐标 -> 12.75pts 下一个块的左坐标 -> 20.30pts

因此，您可以进一步使用此逻辑来检测 PDF 中的表格。代码如下：

```
using itextPdfTextCoordinates;
using iTextSharp.text.pdf;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp1
{
    class LineUsingCoordinates
    {
        public static List<List<string>> getLineText(string path, int page, float[] coord)
        {
            //Create an instance of our strategy
            var t = new MyLocationTextExtractionStrategy();

            //Parse page 1 of the document above
            using (var r = new PdfReader(path))
            {
                // Calling this function adds all the chunks with their coordinates to the 
                // 'myPoints' variable of 'MyLocationTextExtractionStrategy' Class
                var ex = iTextSharp.text.pdf.parser.PdfTextExtractor.GetTextFromPage(r, page, t);
            }
            // List of columns in one line
            List<string> lineWord = new List<string>();
            // temporary list for working around appending the <List<List<string>>
            List<string> tempWord;
            // List of rows. rows are list of string
            List<List<string>> lineText = new List<List<string>>();
            // List consisting list of chunks related to each line
            List<List<RectAndText>> lineChunksList = new List<List<RectAndText>>();
            //List consisting the chunks for whole page;
            List<RectAndText> chunksList;
            // List consisting the list of Bottom coord of the lines present in the page 
            List<float> bottomPointList = new List<float>();

            //Getting List of Coordinates of Lines in the page no matter it's a table or not
            foreach (var i in t.myPoints)
            {
                Console.WriteLine("character {0} is at {1}*{2}", i.Text, i.Rect.Left, i.Rect.Top);
                // If the coords passed to the function is not null then process the part in the 
                // given coords of the page otherwise process the whole page
                if (coord != null)
                {
                    if (i.Rect.Left >= coord[0] &&
                        i.Rect.Bottom >= coord[1] &&
                        i.Rect.Right <= coord[2] &&
                        i.Rect.Top <= coord[3])
                    {
                        float bottom = i.Rect.Bottom;
                        if (bottomPointList.Count == 0)
                        {
                            bottomPointList.Add(bottom);
                        }
                        else if (Math.Abs(bottomPointList.Last() - bottom) > 3)
                        {
                            bottomPointList.Add(bottom);
                        }
                    }
                }
                // else process the whole page
                else
                {
                    float bottom = i.Rect.Bottom;
                    if (bottomPointList.Count == 0)
                    {
                        bottomPointList.Add(bottom);
                    }
                    else if (Math.Abs(bottomPointList.Last() - bottom) > 3)
                    {
                        bottomPointList.Add(bottom);
                    }
                }
            }

            // Sometimes the above List will be having some elements which are from the same line but are
            // having different coordinates due to some characters like " ",".",etc.
            // And these coordinates will be having the difference of at most 4 points between 
            // their bottom coordinates. 

            //so to remove those elements we create two new lists which we need to remove from the original list 

            //This list will be having the elements which are having different but a little difference in coordinates 
            List<float> removeList = new List<float>();
            // This list is having the elements which are having the same coordinates
            List<float> sameList = new List<float>();

            // Here we are adding the elements in those two lists to remove the elements
            // from the original list later
            for (var i = 0; i < bottomPointList.Count; i++)
            {
                var basePoint = bottomPointList[i];
                for (var j = i+1; j < bottomPointList.Count; j++)
                {
                    var comparePoint = bottomPointList[j];
                    //here we are getting the elements with same coordinates
                    if (Math.Abs(comparePoint - basePoint) == 0)
                    {
                        sameList.Add(comparePoint);
                    }
                    // here ae are getting the elements which are having different but the diference
                    // of less than 4 points
                    else if (Math.Abs(comparePoint - basePoint) < 4)
                    {
                        removeList.Add(comparePoint);
                    }
                }
            }

            // Here we are removing the matching elements of remove list from the original list 
            bottomPointList = bottomPointList.Where(item => !removeList.Contains(item)).ToList();

            //Here we are removing the first matching element of same list from the original list
            foreach (var r in sameList)
            {
                bottomPointList.Remove(r);
            }

            // Here we are getting the characters of the same line in a List 'chunkList'.
            foreach (var bottomPoint in bottomPointList)
            {
                chunksList = new List<RectAndText>();
                for (int i = 0; i < t.myPoints.Count; i++)
                {
                    // If the character is having same bottom coord then add it to chunkList
                    if (bottomPoint == t.myPoints[i].Rect.Bottom)
                    {
                        chunksList.Add(t.myPoints[i]);
                    }
                    // If character is having a difference of less than 3 in the bottom coord then also
                    // add it to chunkList because the coord of the next line will differ at least 10 points
                    // from the coord of current line
                    else if (Math.Abs(t.myPoints[i].Rect.Bottom - bottomPoint) < 3)
                    {
                        chunksList.Add(t.myPoints[i]);
                    }
                }
                // Here we are adding the chunkList related to each line
                lineChunksList.Add(chunksList);
            }
            bool sameLine = false;

            //Here we are looping through the lines consisting the chunks related to each line 
            foreach(var linechunk in lineChunksList)
            {
                var text = "";
                // Here we are looping through the chunks of the specific line to put the texts
                // that are having a cord jump in their left coordinates.
                // because only the line having table will be having the coord jumps in their 
                // left coord not the line having texts
                for (var i = 0; i< linechunk.Count-1; i++)
                {
                    // If the coord is having a jump of less than 3 points then it will be in the same
                    // column otherwise the next chunk belongs to different column
                    if (Math.Abs(linechunk[i].Rect.Right - linechunk[i + 1].Rect.Left) < 3)
                    {
                        if (i == linechunk.Count - 2)
                        {
                            text += linechunk[i].Text + linechunk[i+1].Text ;
                        }
                        else
                        {
                            text += linechunk[i].Text;
                        }
                    }
                    else
                    {
                        if (i == linechunk.Count - 2)
                        {
                            // add the text to the column and set the value of next column to ""
                            text += linechunk[i].Text;
                            // this is the list of columns in other word its the row
                            lineWord.Add(text);
                            text = "";
                            text += linechunk[i + 1].Text;
                            lineWord.Add(text);
                            text = "";
                        }
                        else
                        {
                            text += linechunk[i].Text;
                            lineWord.Add(text);
                            text = "";
                        }
                    }                        
                }
                if(text.Trim() != "")
                {
                    lineWord.Add(text);
                }
                // creating a temporary list of strings for the List<List<string>> manipulation
                tempWord = new List<string>();
                tempWord.AddRange(lineWord);
                // "lineText" is the type of List<List<string>>
                // this is our list of rows. and rows are List of strings
                // here we are adding the row to the list of rows
                lineText.Add(tempWord);
                lineWord.Clear();
            }

            return lineText;
        }
    }
} 
```

您可以调用上述类的**getLineText()方法并运行以下循环以在控制台上查看表结构中的输出。**

```
 var testFile = "F:\\sample-data.pdf";
    float[] limitCoordinates = { 52, 671, 357, 728 };//{LowerLeftX,LowerLeftY,UpperRightX,UpperRightY}

    // This line gives the lists of rows consisting of one or more columns
    //if you pass the third parameter as null the it returns the content for whole page
    // but if you pass the coordinates then it returns the content for that coords only
    var lineText = LineUsingCoordinates.getLineText(testFile, 1, null);
    //var lineText = LineUsingCoordinates.getLineText(testFile, 1, limitCoordinates);
    // For detecting the table we are using the fact that the 'lineText' item which length is 
    // less than two is surely not the part of the table and the item which is having more than
    // 2 elements is the part of table
    foreach (var row in lineText)
    {
        if (row.Count > 1)
        {
            for (var col = 0; col < row.Count; col++)
            {
                string trimmedValue = row[col].Trim();
                if (trimmedValue != "")
                {
                    Console.Write("|" + trimmedValue + "|");
                }
            }
            Console.WriteLine("");
        }
    }
    Console.ReadLine(); 
```

# java - 查询 ORA-00979 中的错误：不是 GROUP BY 表达式

> ID：15767958
> 
> 赞同：0
> 
> 时间：2013-04-02T15:22:26.320
> 
> 标签：java, sql, oracle, hibernate

当我使用 Mysql 时，我有一个对我有用的查询。现在我在 Oracle 上收到此错误：

```
ORA-00979: not a GROUP BY expression 
```

这是查询：

```
SELECT o.neNesId, COUNT(o) 
FROM ParNe AS o 
WHERE o.neBanId = :neBanId 
GROUP BY o.neNesId 
```

任何想法为什么我有这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:24:22.420

您的查询是：

```
SELECT o.neNesId, COUNT(o)
FROM ParNe AS o
WHERE o.neBanId = :neBanId
GROUP BY o.neNesId 
```

我的猜测是这`o.o`不是一个有效的领域。因此，您有一个需要列名的表名。试试这个：

```
SELECT o.neNesId, COUNT(*)
FROM ParNe AS o
WHERE o.neBanId = :neBanId
GROUP BY o.neNesId 
```

或者将 替换`*`为有效的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:30:00.047

使用计数（*）。count(o) 用于休眠而不是用于 sql 查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:10:24.403

您需要像 Gordon 的示例中那样选择 count(*) 或 count(1)。如果你坚持使用你的查询语法，这根本没有必要，那么试试这个：

```
SELECT neNesId, count(o) AS o_cnt
  FROM
  (  -- your query here --
   SELECT 1 neNesId, 2 AS o FROM dual
  )
  GROUP BY neNesId
  / 
```

# c# - C# 解析 JSON 数组元素

> ID：15767960
> 
> 赞同：0
> 
> 时间：2013-04-02T15:22:32.460
> 
> 标签：c#, windows

我正在开发 VS 2012 中的 Windows 8 Store 应用程序，并且是 C# 和 XAML 的新手。使用 JsonArray 解析 Json 提要如何从另一个数组中的数组中获取元素？

```
[

    {
        "item_id": 2270978,
        "item_title": "This is the title",
        "roles": [

            {
                "item_url": "http://www.blahblah.com/161089",
                "parent_url": "http://www.blahblah.com",
            },
            {
                "item_url": "http://www.blahblah.com/469888",
                "parent_url": "http://www.blahblah.com",
            }

        ],
    }
] 
```

我认为另一个 foreach 可以在原始 foreach 中工作，但出现错误：

> 无法使用 [] 将索引应用于“Windows.Data.Json.IJsonValue”类型的表达式

```
 foreach (var item in items)
            {
                JsonObject theItem = item.GetObject();
                FeedItem feedItem = new FeedItem();

                feedItem.PubDate = System.DateTime.Now;
                feedItem.Title = theItem["item_title"].GetString();
                feedItem.Author = "Me";
                feedItem.ItemId = (int)(theItem["item_id"].GetNumber());
                feedItem.Content = theItem["item_body"].GetString();
                feedItem.Link = new Uri(theItem["permalink_url"].GetString());

                var roles = theItem["roles"].GetArray();
/* TRIED LIKE THIS DOESN'T WORK
                foreach (var role in roles)
                {
                    feedItem.ContentUrl = new Uri(role["item_url"].GetString());
                }
*/
                feed.Items.Add(feedItem);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:27:01.190

您正在迭代错误的变量。应该：

```
 var roles = theItem["roles"].GetArray();
            foreach (var role in roles)
            {
                feedItem.ContentUrl = new Uri(role.GetObject()["item_url"].GetString());
            } 
```

您的输入 JSON 字符串中也没有`content_url`元素。不应该是`item_url`或`parent_url`吗？

# javascript - html 元素的 ID 是否始终可从 window 对象获得？

> ID：15767961
> 
> 赞同：12
> 
> 时间：2013-04-02T15:22:35.397
> 
> 标签：javascript, html

我注意到以下内容：

```
<div id='myDiv'>...</div>

<script>
    myDiv.style.color = 'red'; // I can access the object.
<script> 
```

在意识到这一点之前，我一直在使用以下内容：

```
var x = document.getElementById('myDiv'); 
x.style.color = 'red'; 
```

我很困惑。第二种方法的重点是什么？第一种方法总是有效吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:25:03.953

> html 元素的 ID 是否始终可从 window 对象获得？

不，这是一种非标准的微软主义，其他一些浏览器出于兼容性原因采用了这种模式。它容易发生命名空间冲突，并且不完全跨浏览器兼容：不要这样做。

> 第二种方法的重点是什么？

它是标准的、受良好支持的跨浏览器（也跨语言）。

# git - 交互式 rebase 向我展示了比我要求的更多的提交

> ID：15767962
> 
> 赞同：3
> 
> 时间：2013-04-02T15:22:36.847
> 
> 标签：git

我想做一个交互式变基，所以我： `git rebase -i HEAD~5`，但我得到的不仅仅是`five`提交。为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T15:24:17.510

有时，合并仅计为 1 次提交，但它会显示合并中分支的所有提交。因此，如果您有 1 次提交、1 次合并、1 次提交并且您 rebase -i HEAD~3 您可能会获得合并中的所有提交以及两个末端提交（超过三个）。

# byte - 以位为单位的字大小转换混淆

> ID：15767967
> 
> 赞同：2
> 
> 时间：2013-04-02T15:22:59.197
> 
> 标签：byte, bit, virtual-address-space, word-size

我有一个非常基本的问题，这让我有些困惑。对此进行一些复习会很棒。

每台计算机都有一个字长。字长是虚拟地址空间的最大尺寸。因此，如果我们说 a `32 bit word size`，我们有一个虚拟地址空间，其范围最大为`2^32 values`. 在参考文献中它说`2^32 bytes`？为什么是以字节为单位的范围。

另外，我无法理解的是`2^32`可能的值如何成为可能的地址范围`4GB`？所以，我的困惑源于将`32 bit word size`变成`4 byte word size`，然后如何`4 bytes`，乘以得到`2^32`的困惑`4GB`。

我试图使其合理化的一种方法如下：

```
2^32 bits = 2^2(bytes) x 2^10(kilobytes) x 2^10(megabytes) x 2^10(gigabytes) 
```

`2^32`因此by 的连续除法`2^10`结果为`2^2 GB`or `4 GB`。

有人能指出 32 位字大小如何达到 4GB 页面范围吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T21:05:20.300

我脑子里的论点是这样的：我们有 32 位可用，每个位最多可以是 1。所以我们可以容纳的最大数量是当所有 32 位（0 位到 31 位）都被填满时1s。所以诀窍是找到十进制形式的最大数，通过将二进制转换为十进制，我们得到：

```
1111111111111111111111111111111 (binary) = 4294967295 (decimal) 
```

但是 4294967295 是什么？它实际上比 2^32 小一。现在还有一个重要的事情要记住：

```
4GB = 4294967296 bytes 
```

但为什么它比我们的结果大 1 呢？因为我们的第一个字节是字节 0，而最后一个字节是字节 4294967295，总共 4294967296 个字节。

所以现在我们处于一个 32 位寄存器中可以存在的最小数字是 0 而 32 位寄存器中可以存在的最大数字是 4294967295 的位置。

```
0 (binary)  - 1111111111111111111111111111111 (binary)
0 (decimal) - 4294967295 (decimal)
0 (hex)     - 0xFFFFFFFF (hex) 
```

所以有 4GB 的可寻址空间，因为任何超过 4GB 的地址都会有一个太大的数字，无法容纳在 32 位数字中，因此无法容纳在 32 位寄存器中。

我在 excel 中做了所有这些事情，看到它对我有很大帮助。

# css - Css 使小圆圈的边框平滑

> ID：15767968
> 
> 赞同：8
> 
> 时间：2013-04-02T15:22:59.973
> 
> 标签：css

有没有办法让纯 CSS 圆形边框在较小的尺寸下看起来清晰明快？或者某种方式使边框在外边缘周围不会出现“锯齿状”？非常感谢！

![在此处输入图像描述](https://i.stack.imgur.com/YGkI1.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T16:00:57.043

使用`box-shadow`CSS 属性解决此问题。

请看下一个例子：http: [//jsfiddle.net/RMWWR/](http://jsfiddle.net/RJMWR/)

# ajax - jQuery Ajax POST 失败

> ID：15767970
> 
> 赞同：0
> 
> 时间：2013-04-02T15:23:00.373
> 
> 标签：ajax, jquery, twitter

我无法让我的 AJAX 请求成功完成。它用于 Twitter API 上的 bearere 令牌。我已经在一个 HTTP 请求客户端中成功完成了，如下所示：

![成功](https://i.stack.imgur.com/BTmDd.png)

但我无法在代码中复制它：

```
$.ajax({
        type: 'POST',
        url: 'https://api.twitter.com/oauth2/token',
        headers: {
            'Authorization':'Basic ' + base64EncodedBearerTokenCredentials,
        },
        contentType: 'application/x-www-form-urlencoded; charset=utf-8',
        data: {
            'grant_type': 'client_credentials'
        },
        error: function(xhr, status, error) {
        },
        success: function(response){
        },
    }); 
```

我收到了 405，但因为我有 Authorization 标头，所以在 Firebug 中看不到响应。

它是什么？

谢谢。

# jruby - 带有自定义类加载器的 JRuby？

> ID：15767972
> 
> 赞同：1
> 
> 时间：2013-04-02T15:23:14.170
> 
> 标签：jruby, classloader

我正在尝试在 JRuby 中使用自定义 ClassLoader，因此我的 gem 加载的类不会与任何需要我的 gem 的项目冲突。

为此，我可以很容易地创建一个新的`URLClassLoader`并调用`loadClass`来加载我的类，但我得到的是一个未包装的 Java `Class`，我似乎不能轻松地做很多事情。

我希望能够做这样的事情：

```
clazz = java_class_loader.loadClass 'org.foo.bar.Class'
wrapped = JRuby.wrap_class clazz

wrapped.static_method 1, 2, 3 # call a static method
wrapped::CONSTANT             # get a constant 
```

有任何想法吗？我已经在 J​​Ruby 源代码中查看了一个好的端点，并且我已经尝试了 JavaSupport 中的许多方法，`get_proxy_class`或者同样没有好的效果。我可以从我的班级获得和实例，`JavaClass`但这似乎对我没有多大好处。

# java - Jersey：“找不到语法元素”是什么意思？

> ID：15767973
> 
> 赞同：7
> 
> 时间：2013-04-02T15:23:16.633
> 
> 标签：java, json, rest, jersey

将 Jersey 从 1.15 版升级到 1.17 版后，它开始记录以下消息：

```
Apr 2, 2013 5:13:06 PM com.sun.jersey.server.wadl.generators.AbstractWadlGeneratorGrammarGenerator attachTypes
INFO: Couldn't find grammar element for class java.lang.String 
```

产生此类消息的服务示例：

```
@GET
@Path("/bla/{a}")
@Produces("application/json")
public String doStuff(@PathParam("a") String a) {
    return a;
} 
```

我的第一印象是认为这是一条错误消息，纯粹基于消息的措辞方式（“找不到”）。但是，它以 INFO 级别记录，并且在实践中似乎没有任何影响，因为所有服务都继续工作。

所以我的问题是这些日志消息是否表明我们配置或使用 Jersey 的方式存在（潜在的）问题。由于以前的版本没有发生这种情况，我已经检查了发行说明，但没有发现任何相关内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-11T07:51:32.310

我也有同样的“信息”信息。对于基本的 java 类型（布尔、字符串...），我还没有设法修复它，但是对于我自己的自定义类，如果我添加 @XmlRootElement 注释和默认的无参数构造函数，消息就会消失。

深入研究球衣源代码，我注意到“WadlGeneratorJAXBGrammarGenerator”类有以下代码：

```
Object parameterClassInstance = null;
try {
    Constructor<?> defaultConstructor = type.getDeclaredConstructor();
    defaultConstructor.setAccessible(true);
    parameterClassInstance = defaultConstructor.newInstance();
} catch (InstantiationException ex) {
    LOGGER.log(Level.FINE, null, ex);
} catch (IllegalAccessException ex) {
    LOGGER.log(Level.FINE, null, ex);
} catch (IllegalArgumentException ex) {
    LOGGER.log(Level.FINE, null, ex);
} catch (InvocationTargetException ex) {
    LOGGER.log(Level.FINE, null, ex);
} catch (SecurityException ex) {
    LOGGER.log(Level.FINE, null, ex);
} catch (NoSuchMethodException ex) {
    //getting here for Boolean/String and some other primitive data type
    LOGGER.log(Level.FINE, null, ex);
}

if (parameterClassInstance==null) {
    return null;
} 
```

因此，基本上没有 String、Boolean 和其他少数类型的默认构造函数，然后它会抛出 NoSuchMethodException，因此它返回 null 并记录信息消息。

所以仍然不知道它为什么会发生，但在我的情况下，解决方案是禁用 wadl 生成，因为我没有使用它。只需将以下参数添加到您的 web.xml

```
 <init-param>
         <param-name>com.sun.jersey.config.feature.DisableWADL</param-name>
         <param-value>true</param-value>
     </init-param> 
```

# scala - 如何在 Play 2.1 中访问测试资源？

> ID：15767976
> 
> 赞同：1
> 
> 时间：2013-04-02T15:23:21.290
> 
> 标签：scala, playframework-2.1

我正在尝试使用这行代码访问`.jpg`我的文件夹中的文件：`src`

```
getClass().getResource("/teste.jpg") 
```

这导致`NullPointerException`.

我试图将文件放在`app/`根目录中。我也尝试将其放入`test/`目录`test/resources`中。

当我从 Eclipse 运行测试时，它工作正常，但不能从命令行使用`play test`.

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-27T19:14:22.577

将文件放置在Play[应用程序剖析中](https://www.playframework.com/documentation/latest/Anatomy)`public`或下方。您还可以在.`app/assets``test/resources`

```
[root]> help resourceDirectory
Default unmanaged resource directory, used for user-defined resources.

[root]> show test:resourceDirectory
[info] root/test:resourceDirectory
[info]  /Users/jacek/dev/sandbox/play-new-app/test/resources 
```

使用其中一个目录中的资源文件，您可以按如下方式获取它们：

```
io.Source.fromInputStream(getClass.getResourceAsStream("/teste.jpg")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:05:05.657

我相信你可以通过使用来实现它

```
Play.application().getFile("file-relative-to-root") 
```

它取决于正在运行的应用程序，但对于单元测试，您可以创建自己的应用程序。查看 API 文档。

[http://www.playframework.com/documentation/api/2.1.0/scala/index.html#play.api.Application](http://www.playframework.com/documentation/api/2.1.0/scala/index.html#play.api.Application)

# haskell - 为什么 Parsec 不使用 Control.Applicative 运算符

> ID：15767978
> 
> 赞同：18
> 
> 时间：2013-04-02T15:23:28.010
> 
> 标签：haskell, parsec, alternative-functor

Using`Control.Applicative`对 Parsec 非常有用，但是您需要始终隐藏`<|>`和类似的对象，因为它们与 Parsec 自己的冲突：

```
import Control.Applicative hiding ((<|>), many, optional)
import Text.Parsec.Combinator
import Text.Parsec 
```

或者，正如 Antal SZ 指出的那样，您可以隐藏 Parsec 版本。然而，据我所知，这似乎是一个不必要的限制。

为什么 parsec 不简单地从 Applicative 实现这些运算符？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-02T15:53:17.510

这是出于历史原因。Parsec 库早于应用函子的发现，因此在设计时并未考虑到它们。而且我猜没有人花时间更新 Parsec 以使用`Control.Applicative`. 不这样做没有根本原因。

# bash - 如何在不扩展通配符的情况下扩展 bash 变量中的变量？

> ID：15767979
> 
> 赞同：9
> 
> 时间：2013-04-02T15:23:53.607
> 
> 标签：bash, eval

我有一个包含这种字符串的变量：

```
var='$FOO/bar/baz*' 
```

我想用它的内容替换变量 $FOO 。但是，当我这样做时

```
var=$(eval "echo $var") 
```

变量被替换，但星号也被替换，因此`var`现在包含我的文件系统中的所有可能匹配项（就像我在 shell 中按下制表符一样）。例如，如果 $FOO 包含 /home，`var`将包含`"/home/bar/baz1.sh /home/bar/baz2.sh /home/bar/baz.conf"`

如何在不扩展通配符的情况下替换变量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T15:33:39.893

在 bash 中关闭 globbing，然后重新启用它。

```
set -f 
var="$FOO/bar/baz*"
set +f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:50:53.570

只需删除引号：

```
var=$FOO/bar/baz/* 
```

Glob 不会在变量赋值的 RHS 上展开。

# jsf-2 - 如何通过在 h:selectOneMenu 上选择新值来隐藏组件？

> ID：15767982
> 
> 赞同：0
> 
> 时间：2013-04-02T15:23:57.380
> 
> 标签：jsf-2

我有一个带有 a 的页面，当我在某些 bean 属性值更新时选择一个新值时`h:selectOneMenu`，我想隐藏 a 。我正在尝试不同的事情，我可以通过重新加载页面来隐藏。我已经在属性上使用一些 JavaScript 代码进行了尝试。在这种情况下，尽管我使用了这些 bean 属性值（并且我还需要 bean 的*视图*范围），但这些 bean 属性值会消失。`dataTable``h:selectOneMenu``dataTable``onsomething``t:saveState`

 *这是一个小例子来澄清这一点：

```
<h:selectOneMenu id="list" value="#{Bean.id}">       
    <f:selectItems value="#{Bean.List}" var="element" itemLabel="#{element.name}" itemValue="#{element.id}"/>
    <t:saveState value="#{Bean.id}"/>
    <f:ajax listener="#{Bean.populateBean}" render=":form:period" event="change"/>
</h:selectOneMenu>

<h:selectOneMenu id="period" value="#{Bean.period}">
<f:selectItems value="#{Bean.listaPeriod}" var="period" itemLabel="#{period[1]}" itemValue="#{period[0]}"/>
     <t:saveState value="#{Bean.period}"/>
</h:selectOneMenu>

<h:commandButton id="search" action="#{Bean.doSearch}"></h:commandButton>

<t:dataTable id="data" value="#{Bean.configList}" rendered="#{Bean.search}"
     <t:column>
     ...
</t:dataTable> 
```

并`Bean.doSearch`更改`Bean.search`为`true`. `dataTable`当我选择新值时如何隐藏`h:selectOneMenu id="list"`？

编辑：

简而言之，搜索按钮呈现表格，当我在“列表”下拉列表中选择一个新值而不重新加载页面时，我想隐藏该表格。现在，`<f:ajax>`仅用于重新呈现“期间”下拉值。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:04:33.750

您的问题很难理解，但是如果您想在下拉菜单触发的 ajax 请求上将数据表从视图中踢出，您需要将其包含在视图中始终存在的组件中，以便 HSF 知道在 ajax 时要重新呈现什么通话成功结束：

```
<h:panelGroup id="rerender">
    <t:dataTable rendered="#{bean.condition}" ...>
        ....
    </t:dataTable>
<h:panelGroup> 
```

当然，要使其正常工作，您应该指定要重新渲染的组件的 id：

```
<h:selectOneMenu ...>
    ...
    <f:ajax listener="#{bean.populate}" render="rerender" />
</h:selectOneMenu> 
```

请注意，如果下拉组件和数据表组件属于同一表单，则无需指定后者父级的绝对 id。另请注意，指定事件是多余的，因为它已经默认为正确的。最后，当您使用 JSF 2.x 时，不需要使用保存状态，只需将表单数据的值绑定到视图范围的 bean。

最后要注意的是您没有遵守 Java 命名约定，您应该尽快更正这一点。*

# javascript - 两个页面在两个 div onclick 事件中加载

> ID：15767983
> 
> 赞同：1
> 
> 时间：2013-04-02T15:24:03.137
> 
> 标签：javascript, jquery, html

我想知道如何使用 onclick 事件在同一页面的两个不同 div 中加载两个页面。

HTML：

```
<a href="content.html">Content</a> 
<div id="FirstDiv"></div> 
```

JavaScript：

```
$('a').click(function() {
    $('#FirstDiv').load($(this).attr('href'));
    return false;
}); 
```

* * *

所以这适用于一个页面，但我如何在同一个点击事件中加载另一个页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:25:22.627

就像这样：

```
$('a').click(function() {
   $('#FirstDiv').load($(this).attr('href'));
   $('#SecondDiv').load('anotherURL.php');
   return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:37:06.330

```
$("a").on("click", function(e) {
  e.preventDefault();
  $("#FirstDiv").load(this.href);
  $("#SecondDiv").load("url");
}); 
```

# javascript - jquery 事件委托的背后是什么？

> ID：15767987
> 
> 赞同：0
> 
> 时间：2013-04-02T15:24:13.920
> 
> 标签：javascript, jquery

有人告诉我有时事件委托更有效率。

```
<ul id="test">
    <li>aaaaa<li>
    <li>bbbbb <p>xxxxx<p> </li>
    <li>ccccc<li>
</ul>

//script
var li = document.getElementByTagName('li');
for(var i=0,len=li.length;i<len;i++){
    li[i].addEventListener('click',function(){ alert(this.innerHTML); },false);
}

//event delegate
var ul = document.getElementById('test');
ul.addEventListener('click',function(e){
    if(e.target == 'li'){
        alert(e.target.innerHTML);
    }
},false); 
```

在“li”中单击“p”时效果不佳。我知道 jquery 有方法'on'，它很有用。我尝试阅读 jquery 源代码，但无法理解如何在复杂的 DOM 下实现委托函数工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:43:34.677

在这段代码中：

```
//event delegate
var ul = document.getElementById('test');
ul.addEventListener('click',function(e){
    if(e.target == 'li'){
        alert(e.target.innerHTML);
    }
},false); 
```

（单个）事件处理程序将在元素中的*任何位置*被调用。`<ul>`

如果您希望找到哪个`<li>`收到了点击，即使点击实际上是在某个子元素中，您也需要爬上 DOM 树，直到找到所需的元素。

```
//event delegate
var ul = document.getElementById('test');
ul.addEventListener('click',function(e) {
    var el = e.target;
    while (el) {
        if (el.tagName === 'li') {
            alert(el.innerHTML);
            break;
        } else {
            el = el.parentNode;      // climb the tree
            if (el === this) break;  // but not too far!
        }
    }
}, false); 
```

jQuery 的第二个参数`.on`为您完成 DOM 爬升 - 它模拟 DOM 的事件冒泡，直到找到与指定选择器匹配的元素。

# iphone - 在后台无法获取位置更改通知

> ID：15767989
> 
> 赞同：2
> 
> 时间：2013-04-02T15:24:15.460
> 
> 标签：iphone, ios, objective-c, core-location, cllocationmanager

我的应用需要在后台使用位置服务。所以我添加了以下方法

```
- (void)startStandardUpdates
{
    // Create the location manager if this object does not
    // already have one.
    if (nil == locationManager)
        locationManager = [[CLLocationManager alloc] init];

    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyKilometer;

    // Set a movement threshold for new events.
    locationManager.distanceFilter = 500;

    [locationManager startUpdatingLocation];
} 
```

根据[苹果的](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)文档，它说当位置发生变化时应用程序会收到通知，即`- (void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation` 委托方法将被调用。

为了进行一些后台处理（延长处理时间），我`ExpirationHandler`在上面指定的委托方法中添加了如下

```
- (void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    UIApplication *app = [UIApplication sharedApplication];
    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        bgTask = UIBackgroundTaskInvalid;
    }];

    longitude = newLocation.coordinate.longitude;
    latitude = newLocation.coordinate.latitude;

    //Making webservice
    [self updateServerWithLongitude:longitude andLatitude:latitude];
} 
```

完成网络服务请求后，我停止了后台任务，如下所示

```
[[UIApplication sharedApplication] endBackgroundTask:bgTask];
bgTask = UIBackgroundTaskInvalid; 
```

如果我在完成 Web 服务请求后没有停止后台任务，每件事都会按预期工作（能够获得位置更改通知）。但是，如果我在完成请求后停止了后台任务，我将无法获得位置更改通知，并且状态栏中的位置服务图标在应用程序处于后台时消失......

我进行了很多搜索以解决问题...这是在后台获取位置更改并更新对服务器的更改的正确方法吗？如果没有，有人可以提出更好的方法吗？任何帮助是极大的赞赏.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:45:52.020

如果您想在应用程序处于后台时更新位置更改，Apple 要求您在 info.plist 中指定应用程序的后台模式（在本例中为**位置）。**

他们需要使用的关键是[UIBackgroundModes](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

# sql - 每个月返回 Max(Recent_Date)、重复值和内部连接问题 - SQL

> ID：15767990
> 
> 赞同：0
> 
> 时间：2013-04-02T15:24:16.270
> 
> 标签：sql, date, inner-join, max

基本上，我想实现每个月，就像在这个例子中，从 2013 年 1 月到 2013 年 3 月，每个用户的 Max(Most_Recent_Day) 是多少。

例如，从 1 月到 3 月，数据库中的每个月，系统都会为每个用户捕获 Most_Recent_Day。

以下是预期结果：

```
User                 | Most_Recent_Day
--------------------------------
afolabi.banu         | 1/31/2013
afolabi.banu         | 2/7/2013
afolabi.banu         | 3/21/2013
mario.sapiter        | 1/22/2013
mario.sapiter        | 2/7/2013
mario.sapiter        | 3/11/2013 
```

但是，我还希望显示另一个 DB 列。下面是该列。

```
User|Total_Hits | Recent_Month| Most_Recent_Day | Most_Recent_Days_Hits 
```

我尝试使用内部联接，但结果不是我所期望的。我得到了重复的用户名，并且最近一天重复了。基本上，我只想显示相同用户名的不重复记录。

下面是我得到的结果。请忽略 recent_month 值，因为它是来自数据库的数据。

```
User          |Total_Hits | Recent_Month   | Most_Recent_Day | Most_Recent_Days_Hits
-------------------------------------------------------------------------------------
afolabi.banu  | 223   |   25       |   2/7/2013      |  5
afolabi.banu  | 223   |   25       |   2/7/2013      |  5
afolabi.banu  | 211   |   13       |   1/31/2013     |  3
afolabi.banu  | 223   |   25           |   2/7/2013      |  5
afolabi.banu  | 296   |   31       |   3/21/2013     |  1
afolabi.banu  | 296   |   31           |   3/21/2013     |  1
mario.sapiter | 95    |   7        |   2/7/2013      |  5
mario.sapiter | 7     |   7        |   3/21/2013     |  1
mario.sapiter | 7     |   37           |   3/22/2013     |  1
mario.sapiter | 249   |   37       |   2/7/2013      |  5 
```

这是我的 SQL 代码

```
SELECT t.[User],
t.Total_Hits,
t.Recent_Month,
t.Most_Recent_Day, 
t.Most_Recent_Day_Hits FROM UserUsageMonthly t
INNER JOIN 
(
select  
[User]
, max(Most_Recent_Day) as Most_Recent_Day
from UserUsageMonthly (NoLock)
where Application_Name='Daily Production Review' and Site_Collection='wrm13' 
and Most_Recent_Day between '1/1/2013' and '3/31/2013'  
group by [User], datepart(month,Most_Recent_Day) 
) table2
ON
t.[User]=table2.[User]
AND t.Most_Recent_Day = table2.Most_Recent_Day 
order by t.[User] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:04:45.263

您应该将月份值添加到您的 SQL SELECT

```
SELECT 
MONTH(t.Most_Recent_Day) as 'MyMonth',
t.[User],
t.Total_Hits,
t.Recent_Month,
t.Most_Recent_Day, 
t.Most_Recent_Day_Hits FROM UserUsageMonthly t 
```

然后你可以按月份列分组

```
GROUP BY MyMonth 
```

# node.js - 使用 uglify 将 TypeScript 转为 JavaScript

> ID：15767993
> 
> 赞同：11
> 
> 时间：2013-04-02T15:24:21.550
> 
> 标签：node.js, typescript, gruntjs, uglifyjs

我在**ts**目录下有 4 个 TypeScript 文件。`typescript:base`我可以使用该任务将它们全部编译成一个带有源映射（main.js.map）的文件（main.js） 。

*但是，在编译多个*TypeScript 文件时，尝试`uglify`这些文件不起作用。当使用多个文件制作时，好像会感到困惑。*`uglify``sourceMapIn`*

 *您如何将具有多个文件的 TypeScript 项目编译成具有源映射的一个文件（返回原始 ts 文件）

这是咕噜声文件：

```
module.exports = function (grunt) {
    grunt.initConfig({
        uglify: {
            dist: {
                options: {
                    sourceMap: '../js/main.min.map',
                    sourceMapIn: 'main.js.map',
                    sourceMapRoot: '../ts/'
                },
                files: {
                    '../js/main.min.js': ['main.js']
                }
            }
        },
        typescript: {
            base: {
                 src: ['**/*.ts'],
                 dest: '../js/main.js',
                 options: {
                     module: 'amd',
                     sourcemap: true,
                     declaration: false
                 }
             }

        }
    });

    grunt.loadNpmTasks('grunt-contrib-uglify');
    grunt.loadNpmTasks('grunt-typescript');

    grunt.file.setBase('../ts');

    grunt.registerTask('default', ['typescript:base', 'uglify:dist']);
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-29T06:42:49.903

我试图在以下环境中重现您的问题：

```
grunt: 0.4.1
grunt-contrib-uglify: 0.2.2
grunt-typescript: 0.2.4
nodejs: 0.10.15 
```

我不得不更改`uglify.dist.options.sourceMapIn`to`'../js/main.js.map'`和`uglify.dist.files['../js/main.min.js']`to `['../js/main.js']`，即使路径相对于 gruntfile 位置。之后，编译工作完美无缺，`../js/main.min.js`而且`../js/main.min.map`看起来都是正确的。*

# wso2 - WSO2 CEP 管理控制台

> ID：15767996
> 
> 赞同：0
> 
> 时间：2013-04-02T15:24:33.397
> 
> 标签：wso2, complex-event-processing, wso2cep

我已经在 Linux 上安装了 WSO2 CEP。但是当我尝试使用 https:///carbon/ 打开管理控制台时，它显示“该网站不可用”。

我正在运行 WSO2 CEP（它说 WSO2 Carbon 在 19 秒内开始）。这是因为我没有正确安装 CEP 吗？

请帮忙。我是WSO2的新手。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T04:51:35.980

If you started the WSO2 CEP or any other WSO2 products properly, then you can see the management console in

```
https://localhost:9443/ 
```

With the default configuration all the WSO2 products works in 9443 port. For more information regarding the WSO2 CEP please refer the [1].

[1] [http://docs.wso2.org/wiki/display/CEP210/Complex+Event+Processor+Documentation](http://docs.wso2.org/wiki/display/CEP210/Complex+Event+Processor+Documentation)

Regards,

Mohan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T19:21:56.837

使用命令启动服务器

```
sh wso2server.sh 
```

然后当服务器启动过程完成时，在您的浏览器上

```
https://localhost:9443/carbon 
```

可能是您可能会遇到 https 认证错误继续进行。

享受