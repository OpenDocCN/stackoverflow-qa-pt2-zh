# StackOverflow 问答 14515000-14515999

# python - 用户是必需的错误消息

> ID：14515000
> 
> 赞同：0
> 
> 时间：2013-01-25T03:45:23.583
> 
> 标签：python, django

`print profile_form.errors`

显示：

`<ul class="errorlist"><li>user<ul class="errorlist"><li>This field is required.</li></ul></li></ul>`

代码：

```
def update(request):
    user    = get_object_or_404(User, pk=request.user.id)
    profile = get_object_or_404(UserProfile, user=user)

    if request.method == 'POST':
        user_form    = RegistrationForm(request.POST, instance=user)
        profile_form = ProfileForm(request.POST, request.FILES, instance=profile)

---

class ProfileForm(forms.ModelForm):
    address   = forms.CharField(required=False, max_length=250, widget=forms.Textarea(attrs={'rows': 2}))

    class Meta:
        model = UserProfile

---

class UserProfile(models.Model):
    ...
    country             = models.ForeignKey(Country, default=1)
    city                = models.ForeignKey(City, default=1)
    user                = models.OneToOneField(User) 
```

由于配置文件已分配给用户，我该如何绕过它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:20:57.617

您的表单可能不会呈现用户字段，并且`ModelForm`需要一个。

```
class ProfileForm(forms.ModelForm):
    address   = forms.CharField(required=False, max_length=250, widget=forms.Textarea(attrs={'rows': 2}))

    class Meta:
        model = UserProfile
        exclude = ('user', )  # <-- exclude user from your form 
```

# xslt - xslt：通过中间参考节点选择唯一节点？

> ID：14515004
> 
> 赞同：1
> 
> 时间：2013-01-25T03:45:37.073
> 
> 标签：xslt, xslt-2.0, xslt-grouping

XSLT 2。

嗨，我有一个 xml，它有 3 个节点，从名为“孩子”的角度命名：孩子、父亲和母亲父亲。从父亲节点开始，我需要根据子节点中的 ID 找到一个子母亲 MothersFather 节点（子节点是连接其他两个节点的中间参考。）

因此，对于每个父亲来说，他的孩子都有**不同**的MothersFather - 这些不是人类，一个父亲可能有数百个孩子，但只有大约 20 个相关的 MothersFathers :)

XML 的简化版本（在现实生活中大约有 80 个父亲节点、3000 个子节点和 400 个母亲父亲节点）：

```
<t>
<Children>
    <Child>
        <ID>1</ID>
        <FathersID>100</FathersID>
        <MothersFatherID>200</MothersFatherID>    
    </Child>
    <Child>
        <ID>2</ID>
        <FathersID>100</FathersID>
        <MothersFatherID>201</MothersFatherID>    
    </Child>
    <Child>
        <ID>3</ID>
        <FathersID>100</FathersID>
        <MothersFatherID>202</MothersFatherID>    
    </Child>
    <Child>
        <ID>4</ID>
        <FathersID>100</FathersID>
        <MothersFatherID>201</MothersFatherID>    
    </Child>
    <Child>
        <ID>5</ID>
        <FathersID>101</FathersID>
        <MothersFatherID>201</MothersFatherID>    
    </Child>
</Children>
<Fathers>
    <Father>
        <ID>100</ID>
    </Father>
    <Father>
        <ID>101</ID>
    </Father>
</Fathers>
<MothersFathers>
    <MothersFather>
        <ID>200</ID>
    </MothersFather>
    <MothersFather>
        <ID>201</ID>
    </MothersFather>
    <MothersFather>
        <ID>202</ID>
    </MothersFather>
</MothersFathers>        
</t> 
```

我的 xslt 看起来像：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:key name="kFathersChildren" match="Child" use="FathersID"/>

    <xsl:template match="/">
        <xsl:apply-templates select="//Fathers"></xsl:apply-templates>
    </xsl:template>

    <xsl:template match="Fathers">
        <xsl:apply-templates select="Father"></xsl:apply-templates>
    </xsl:template>

    <xsl:template match="Father">
        <xsl:text>&#10;FATHER: ID=</xsl:text><xsl:value-of select="ID"/>
        <!-- Now show all this fathers childrens maternal grandfathers based on the ID in the Child node -->

        <!--TRY 1: this works, as in gets the right nodes, but doesn't do distinct values....--> 
        <xsl:for-each select="key('kFathersChildren', ID)">  <!-- get the fathers children --> 
            <xsl:text>&#10; found child: current MFid=</xsl:text><xsl:value-of select="current()/MothersFatherID"/>
            <xsl:text> ID=</xsl:text><xsl:value-of select="ID"/>
            <xsl:apply-templates select="//MothersFathers/MothersFather[ID=current()/MothersFatherID]"></xsl:apply-templates>
        </xsl:for-each>

        <!-- *** THIS IS WHERE I GET LOST??? - Do the same thing but only get distinct MothersFatherID's... -->

        <!--TRY 2: note- won't compile in current state... -->
        <xsl:for-each select="distinct-values(key('kFathersChildren', ID)[MothersFatherID])">  
            <xsl:text>&#10;  Distinct MothersFatherID ???? - don't know what to select </xsl:text><xsl:value-of select="."/>
            <xsl:apply-templates select="//MothersFathers/MothersFather[ID=??????????"></xsl:apply-templates>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="//MothersFathers/MothersFather">
        <xsl:text>&#10;      IN MothersFather template... ID=</xsl:text><xsl:value-of select="ID"/>
    </xsl:template>
</xsl:stylesheet> 
```

在 Try 1 中，我可以获得所有节点和 MothersFatherID。Try1 的输出是：

```
FATHER: ID=100
 found child: current MFid=200 ID=1
      IN MothersFather template... ID=200
 found child: current MFid=201 ID=2
      IN MothersFather template... ID=201
 found child: current MFid=202 ID=3
      IN MothersFather template... ID=202
 found child: current MFid=201 ID=4
      IN MothersFather template... ID=201
FATHER: ID=101
 found child: current MFid=201 ID=5
      IN MothersFather template... ID=201 
```

在我选择“不同值”的 Try2 中，我希望输出如下：

```
FATHER: ID=100
      IN MothersFather template... ID=201
      IN MothersFather template... ID=200
      IN MothersFather template... ID=202
FATHER: ID=101
      IN MothersFather template... ID=201 
```

（不是真正的输出 - 只是调试显示我可以引用正确节点的东西）。

但我不知道我打算用什么来引用唯一的 MothersFatherID 以传递给“应用模板”调用。

无论我尝试过什么，我都会得到以下错误的变化： `Required item type of first operand of '/' is node(); supplied value has item type xs:anyAtomicType`或`Axis step child::element('':MothersFatherID) cannot be used here: the context item is an atomic value`. 我认为他们的意思是我正在尝试选择使用字符串值的节点，反之亦然....也许我对 distinct-value() 函数的使用完全错误？

任何人都可以阐明如何做到这一点吗？（我一直希望这个 xslt 在我不会被这种事情困住时会有一些禅意的时刻）。

此外，一旦我这样做了，我将希望 MothersFather 对每个父亲进行排序 - 在真正的 xml 中，每个“ID”都有一个“名称” - 希望每个“排序”语句将是类似参考什么解决了上述问题？

谢谢你的时间。布莱斯。

**编辑：**

哇！！谢谢你的回答迪米特。我已经检查过了，希望你能帮我把它分解一下，因为我没有完全理解它？答案是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:key name="kMFByFId" match="MothersFatherID"
          use="../FathersID"/>

 <xsl:key name="kMFById" match="MothersFather" use="ID"/>

 <xsl:key name="ChildByFIdAndMFId" match="Child"
  use="concat(FathersID, '+', MothersFatherID)"/>

 <xsl:template match="Children|MothersFathers|text()"/>

 <xsl:template match="Father">
   Father ID=<xsl:value-of select="ID"/>
  <xsl:apply-templates select=
   "key('kMFById',
         key('kMFByFId', ID)
          [generate-id(..)
          =
           generate-id(key('ChildByFIdAndMFId',
                            concat(../FathersID,'+',.)
                          )[1]
                       )
          ]
        )">
     <xsl:sort select="ID" data-type="number"/>
   </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="MothersFather">
      MothersFather ID=<xsl:value-of select="ID"/>
 </xsl:template>
</xsl:stylesheet> 
```

我可以使用所涉及的密钥。

这条线`<xsl:template match="Children|MothersFathers|text()"/>`——这条线是怎么做的？如果我通过调试器单步执行它，它就会直接跳过这条线。如果我将其注释掉，就会有很多我看不到来源的多余输出。

以及给出 MothersFather 节点的 apply-templates 行 ——我一直试图在纸上分解它以查看其神奇之处，但并没有完全理解它。这有点类似于 通过当前的父亲 ID 获取匹配的 MothersFather 节点，其中生成的 id 为“（dot dot）” - 与父节点有关吗？哪一个？等于基于 ChildByFIdAndMFId 键生成的 id - 这 1 是否只获得匹配生成的 id 的第一次出现，从而给出我的不同值？`<xsl:apply-templates select= "key('kMFById', key('kMFByFId', ID)[generate-id(..) =
generate-id(key('ChildByFIdAndMFId', concat(../FathersID,'+',.))[1] ) ] )">``key('kMFById', key('kMFByFId', ID)``[generate-id(..)``[1]`

（Dimitre 的这个答案也与 JLRishie 的答案非常相似。他的那种似乎很有效，我在 Dimitre 那里遗漏了什么吗？）

问候，布莱斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:54:03.323

我相信这应该做你想做的事情：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" />
  <xsl:key name="kFathersChildren" match="Child" 
           use="concat(FathersID, ' - ', MothersFatherID)"/>
  <xsl:key name="kChildByFatherId" match="Child" use="FathersID"/>
  <xsl:key name="kMothersFatherById" match="MothersFather" use="ID" />

  <xsl:template match="text() | Children | MothersFathers" />

  <xsl:template match="Father">
    <xsl:value-of select="concat('&#10;FATHER: ID=', ID)" />

    <xsl:apply-templates 
      select="key('kMothersFatherById', 
                 key('kChildByFatherId', ID)
                   [generate-id() = 
                     generate-id(
                       key('kFathersChildren', 
                          concat(FathersID, ' - ', MothersFatherID)
                           )[1])
                   ]/MothersFatherID)">
      <xsl:sort select="ID" data-type="number" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="MothersFather">
    <xsl:value-of select="concat('&#10;      IN MothersFather template... ID=', ID)"/>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
FATHER: ID=100
      IN MothersFather template... ID=200
      IN MothersFather template... ID=201
      IN MothersFather template... ID=202
FATHER: ID=101
      IN MothersFather template... ID=201 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:17:33.043

**这种转换 - 更短且格式正确且可读，无需水平/垂直滚动。此外，与其他答案不同，它正确应用排序**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:key name="kMFByFId" match="MothersFatherID"
          use="../FathersID"/>

 <xsl:key name="kMFById" match="MothersFather" use="ID"/>

 <xsl:key name="ChildByFIdAndMFId" match="Child"
  use="concat(FathersID, '+', MothersFatherID)"/>

 <xsl:template match="Children|MothersFathers|text()"/>

 <xsl:template match="Father">
   Father ID=<xsl:value-of select="ID"/>
  <xsl:apply-templates select=
   "key('kMFById',
         key('kMFByFId', ID)
          [generate-id(..)
          =
           generate-id(key('ChildByFIdAndMFId',
                            concat(../FathersID,'+',.)
                          )[1]
                       )
          ]
        )">
     <xsl:sort select="ID" data-type="number"/>
   </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="MothersFather">
      MothersFather ID=<xsl:value-of select="ID"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于此 XML 文档时（已提供，但为了测试正确排序而稍微打乱了一些）：**

```
<t>
<Children>
    <Child>
        <ID>2</ID>
        <FathersID>100</FathersID>
        <MothersFatherID>201</MothersFatherID>
    </Child>
    <Child>
        <ID>1</ID>
        <FathersID>100</FathersID>
        <MothersFatherID>200</MothersFatherID>
    </Child>
    <Child>
        <ID>3</ID>
        <FathersID>100</FathersID>
        <MothersFatherID>202</MothersFatherID>
    </Child>
    <Child>
        <ID>4</ID>
        <FathersID>100</FathersID>
        <MothersFatherID>201</MothersFatherID>
    </Child>
    <Child>
        <ID>5</ID>
        <FathersID>101</FathersID>
        <MothersFatherID>201</MothersFatherID>
    </Child>
</Children>
<Fathers>
    <Father>
        <ID>100</ID>
    </Father>
    <Father>
        <ID>101</ID>
    </Father>
</Fathers>
<MothersFathers>
    <MothersFather>
        <ID>200</ID>
    </MothersFather>
    <MothersFather>
        <ID>201</ID>
    </MothersFather>
    <MothersFather>
        <ID>202</ID>
    </MothersFather>
</MothersFathers>
</t> 
```

**产生想要的正确结果：**

```
 Father ID=100
      MothersFather ID=200
      MothersFather ID=201
      MothersFather ID=202
   Father ID=101
      MothersFather ID=201 
```

**请注意**：

使用 XSLT 1.0 和 XSLT 2.0 处理器都可以正确执行转换。

* * *

**更新**：

OP已编辑问题，询问有关此解决方案的一些问题：

我可以使用所涉及的密钥。

> 这条线`<xsl:template match="Children|MothersFathers|text()"/>`——这条线是怎么做的？如果我通过调试器单步执行它，它就会直接跳过这条线。如果我将其注释掉，就会有很多我看不到来源的多余输出。

您已经发现了这个带有空正文的模板在做什么——它可以防止编写多余的输出。XSLT 处理器有许多内置模板，在处理给定节点时选择执行这些模板——以防 XSLT 转换未指定与该节点匹配的模板。

任何元素的内置模板都会输出其所有文本节点后代的字符串值的串联——这正是您所看到的多余输出。

为避免这种情况，我提供了一个匹配 thode 元素的模板。这会覆盖（抑制）内置模板。由于此模板没有实体，因此不会产生任何输出。

> 还有给出`MothersFather`节点 的 apply-templates 行`<xsl:apply-templates select= "key('kMFById', key('kMFByFId',` `ID)[generate-id(..) = generate-id(key('ChildByFIdAndMFId',` `concat(../FathersID,'+',.))[1] ) ] )">`——我一直试图在纸上分解它以查看其魔力，但并没有完全理解它。这有点像意味着通过当前位置 `key('kMFById', key('kMFByFId', ID)`获取匹配节点- 与父节点有关吗？哪一个？等于基于生成的 id - 这是否只获得匹配生成的 id 的第一次出现，从而给出我的不同值？`MothersFather``Father ID``[generate-id(..) the generated id of '(dot dot)'``ChildByFIdAndMFId key [1]``1`

你的问题是关于这个代码片段：

```
 <xsl:apply-templates select=
   "key('kMFById',
         key('kMFByFId', ID)
          [generate-id(..)
          =
           generate-id(key('ChildByFIdAndMFId',
                            concat(../FathersID,'+',.)
                          )[1]
                       )
          ]
        )">
     <xsl:sort select="ID" data-type="number"/>
   </xsl:apply-templates> 
```

为了了解这里发生了什么，您需要熟悉**[Muenchian Grouping Method](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

**上面的代码片段本质上说的是**：

处理`MothersFather`第一个这样的元素的所有元素，这些元素是 a 的同级元素，并且具有与当前 ( ) 节点`FathersID`的 相同的值。`ID``Father`

# c# - VS 2010 SP1 - 此安装不支持项目类型

> ID：14515007
> 
> 赞同：4
> 
> 时间：2013-01-25T03:46:26.870
> 
> 标签：c#, visual-studio-2010, configuration, guid

我有一个 Visual Studio 2010 Ultimate SP1，使用我的两个 .csproj 项目无法打开的解决方案。我得到的错误是此安装不支持项目类型。

解决方案没有问题，因为这些项目在所有其他工作站上打开时都没有问题。

对于解决方案中不可用的两个项目，我的项目类型 guid 似乎相同：

{786C830F-07A1-408B-BD7F-6EE04809D6DB}；{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}

{786C830F-07A1-408B-BD7F-6EE04809D6DB}；{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}

我检查了所有先决条件，它们似乎安装正确。我注意到打开视觉工作室时有时许可证名称不同。我想知道是否可能与以前的安装冲突？任何的意见都将会有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:03:14.740

问题的原因是您试图打开一个项目，但它的模板未安装在您的 VS 2010 中。例如，默认情况下 VS2010 没有 MVC3、MVC4 和 Silverlight 5 模板。如果要打开它们的项目类型，则需要安装它们。

要下载 MVC3 或 MVC4 安装程序，请访问[http://www.asp.net/mvc](http://www.asp.net/mvc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T04:06:55.453

看起来您缺少便携式库工具。确定安装了吗？

如果没有， http: [//visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981](http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981)

# jakarta-ee - 使用 infinispan 选择 Jboss 运行模式

> ID：14515009
> 
> 赞同：0
> 
> 时间：2013-01-25T03:46:39.350
> 
> 标签：jakarta-ee, jboss, jboss7.x, infinispan

我开始一个 Jboss 7.1 项目并考虑使用 infinispan 进行缓存。使用 infinispan 在独立模式和域模式下运行 Jboss 有哪些优点/缺点（限制）？我很欣赏对此的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:12:32.030

`standalone`和模式都`domain`可以集群。我相信模式的要点`domain`是允许您从一个中心点管理整个服务器组。

在`domain`模式下，您可以执行一次部署应用程序等操作，域中的所有服务器都将部署该应用程序。

在`standalone`模式下，您必须在每台机器上部署它。

我在集群服务器上以`standalone`模式运行 Infinispan 缓存。它可能需要额外的步骤（在多个服务器中创建相同的配置缓存），但我发现独立模式更适合我自己的使用。

[这](http://blog.akquinet.de/2012/06/29/managing-cluster-nodes-in-domain-mode-of-jboss-as-7-eap-6/)是一篇关于域模式的文章（在JBoss7 集群[系列](http://blog.akquinet.de/2012/06/21/clustering-in-jboss-as7eap-6/)中），它很好地解释了它。

# jenkins - 从参数化触发器插件传回结果

> ID：14515015
> 
> 赞同：4
> 
> 时间：2013-01-25T03:47:19.313
> 
> 标签：jenkins, jenkins-plugins

我有 2 个工作：“Helper”和“Main”以及单个 jenkins 实例（即主机和执行程序）。

助手管理第 3 方资源并为 Main 作业做准备（准确地说 - 它为要部署以进行测试的应用程序创建环境）。

辅助作业的唯一工件是具有环境 IP 的单个文件，专门为 Main 作业准备。

在这种情况下，我如何将构建从 Helper 传递回 Main？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T17:37:35.133

您是说您只需将带有 IP 的文件传递给“主要”作业。如果您只需要该 IP，则有更简单的方法（无需文件），我将同时描述这两种方法。

## 将工件从一个工作传递到另一个工作

在“Helper”作业中，您需要从工作区归档该文件。

1.  在**post-build actions**中，选择**Archive the artifacts**
2.  放置一个相对于工作空间的路径。您可以使用通配符，或硬编码文件名（如果文件名始终相同）。
3.  将此作业配置为在其他项目构建步骤上使用**触发/调用构建**自动触发您的“主要”作业。如果你没有这个插件，你可以在[这里获取](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)
4.  对于**Projects to build**，输入您的“主要”作业的名称

现在，在“主要”作业中，您需要从前一个（“助手”）作业中复制此工件。

1.  对于第一个**构建**步骤，选择**从另一个项目构建步骤复制工件**。如果你没有这个插件，你可以在[这里获取](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)
2.  对于**Project name**，输入您的“Helper”作业的名称
3.  对于**哪个构建**，选择**最新的成功构建**
4.  对于**要复制的工件**，请使用`**/yourartifactname*.*`您的工件名称将是您在“助手”作业中配置的名称。在前面使用`**/`确保它会在进入工件之前忽略任何目录结构
5.  对于**Target directory**，在“主要”作业的工作区中指定一个位置，该文​​件也将被复制到该位置。
6.  选中**Flatten directory**，以便文件直接转到步骤 5 中指定的位置，否则它将保留存档时的目录结构（在“Helper”作业中）

现在，您的“主要”作业在其工作区中有来自“助手”作业的文件。像使用工作区中的任何其他文件一样使用它

## 将变量从一个作业传递到另一个作业

就像我提到的那样，如果您只需要一个 IP 地址，您在“Helper”作业中的某个时间点将其作为变量，您只需使用**其他项目上的 Trigger/Call 构建**步骤将其发送到“Main”作业您在“Helper”作业的步骤 3 和 4 中配置的内容。在这种情况下，您不需要对“主要”作业进行任何特殊配置。

1.  配置“Helper”作业以**在其他项目**构建步骤上使用 Trigger/Call 构建自动触发您的“Main”作业。如果你没有这个插件，你可以在[这里获取](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)
2.  对于**Projects to build**，输入您的“主要”作业的名称
3.  单击**添加参数**按钮
4.  选择**预定义参数**
5.  Type `VarForMain=$VarFromHelper`，其中`VarFromHelper`包含您的 IP 地址的“Helper”作业中`VarForMain`的环境变量，以及将在“Main”作业中设置为此值的环境变量。没有理由为什么这些不能具有相同的名称。

现在，在您的“主要”工作中，您可以`$VarForMain`像引用任何其他环境变量一样引用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-21T01:28:25.000

接受的答案对我来说没有帮助，但我想出了一个窍门：

1.  使用 shell 命令创建一个主作业

    ```
    echo "PARAMS_FILE=${WORKSPACE}/build-${BUILD_NUMBER}.params" > "${WORKSPACE}/build-${BUILD_NUMBER}.params" 
    ```

2.  通过将子作业添加到构建步骤（不是构建*后*的步骤）来创建子作业

3.  将文件作为参数源传递给子构建，并让构建在其脚本中使用一行更新文件，例如：

    ```
    echo "MY_VAR=some_value" >> "$PARAMS_FILE" 
    ```

这样，所有后续作业的环境都会根据其前任的结果进行更新。

# ruby-on-rails-3.2 - Rails 预编译资产 - 响应式 css 的最佳实践

> ID：14515017
> 
> 赞同：3
> 
> 时间：2013-01-25T03:47:28.760
> 
> 标签：ruby-on-rails-3.2, conditional, asset-pipeline, production, precompile

这些是我的页面包含的样式（顶部的样式在生产中返回错误）

```
<link href="/assets/foundation.css" rel="stylesheet" type="text/css" />
<link href="/assets/app.css" rel="stylesheet" type="text/css" />
<link href="/assets/full_size.css" media="screen and (min-width: 761px)" rel="stylesheet" type="text/css" />
<link href="/assets/mobile_size.css" media="screen and (max-width: 760px)"   rel="stylesheet" type="text/css" />

<link href="/assets/application-b0a44b2bbc0d3c94d855fbb830c2098d.css" media="screen" rel="stylesheet" type="text/css" />
<script src="/assets/application-cd6a361c13ee838fceb09ecb2c58c467.js" type="text/javascript"></script> 
```

我的网站是响应式的，所以我希望根据屏幕大小包含所需的样式。有没有办法单独预编译我的 css，使它看起来像这样：

```
<link href="/assets/foundation-b0a44b2bbc0d3c94d855fbb830c2098d.css" rel="stylesheet" type="text/css" />
<link href="/assets/app-b0a44b2bbc0d3c94d855fbb830c2098d.css" rel="stylesheet" type="text/css" />
<link href="/assets/full_size-b0a44b2bbc0d3c94d855fbb830c2098d.css" media="screen and (min-width: 761px)" rel="stylesheet" type="text/css" />
<link href="/assets/mobile_size-b0a44b2bbc0d3c94d855fbb830c2098d.css" media="screen and (max-width: 760px)"   rel="stylesheet" type="text/css" /> 
```

那么就不需要application.css，也将它们结合起来破坏了我的css。我的网站在开发中看起来不错:)

现在我在 config/application.rb 中设置了 config.assets.enabled = false，压缩 css 并自己手动包含它会更好吗？

这有点类似于这个问题，除了我不喜欢任何答案。当然有一个简单的解决方案。 [使用 Rails 3.1 资产管道有条件地使用某些 css](https://stackoverflow.com/questions/7134034/using-rails-3-1-assets-pipeline-to-conditionally-use-certain-css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:01:51.147

我认为您在一般情况下使用资产管道的方向是错误的。如果您要使用管道，您只需要保留`application.css`- 这是一个清单文件，用于包含您的`css`文件。我的建议是将您`link href=`从视图中移出并使用清单文件（application.css），如下所示：

```
*= require_self
*= require foundation
*= require mobile_size

....
*= require_tree 
```

您现在包含的是预编译的 css 文件（注意哈希前缀），每次修改 assets 时，哈希前缀都会更改。

文件的情况也是如此`.js`——您必须将它们包含在`application.js`清单文件中。

编辑：使用 SASS (3.2) 和媒体查询（如[这篇 CSS-tricks 文章中所述](http://css-tricks.com/media-queries-sass-3-2-and-codekit/)，关于@penner）的想法很适合这种情况。

# ruby-on-rails - ruby on rails 自动测试出错

> ID：14515019
> 
> 赞同：4
> 
> 时间：2013-01-25T03:47:39.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, railstutorial.org, autotest

我运行了命令 autotest，这是我得到的错误。我正在关注 Hartl 的书，想知道这种冲突是否会发生，因为 Rails 现在带有 ZenTest 或其他东西？我该如何解决这个错误。我是 RoR 的新手

```
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
/Users//.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find ZenTest (>= 0) amongst [abstract-1.0.0, actionmailer-3.2.8, actionmailer-3.2.8.rc1, actionmailer-3.0.1, actionmailer-3.0.0, actionpack-3.2.8, actionpack-3.2.8.rc1, actionpack-3.0.1, actionpack-3.0.0, activemodel-3.2.8, activemodel-3.2.8.rc1, activemodel-3.0.1, activemodel-3.0.0, activerecord-3.2.8, activerecord-3.2.8.rc1, activerecord-3.0.1, activerecord-3.0.0, activeresource-3.2.8, activeresource-3.2.8.rc1, activeresource-3.0.1, activeresource-3.0.0, activesupport-3.2.8, activesupport-3.2.8.rc1, activesupport-3.0.1, activesupport-3.0.0, addressable-2.3.2, arel-3.0.2, arel-1.0.1, autotest-4.4.6, builder-3.0.4, builder-3.0.3, builder-2.1.2, bundler-1.2.1, bundler-1.2.0, bundler-1.0.22, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.4.0, coffee-script-source-1.3.3, diff-lcs-1.1.3, erubis-2.7.0, erubis-2.6.6, excon-0.16.2, execjs-1.4.0, heroku-2.31.2, heroku-api-0.3.5, hike-1.2.1, i18n-0.6.1, i18n-0.4.2, journey-1.0.4, jquery-rails-2.1.4, jquery-rails-2.1.2, json-1.7.5, launchy-2.1.2, mail-2.4.4, mail-2.2.19, mime-types-1.19, multi_json-1.4.0, multi_json-1.3.6, netrc-0.7.7, polyglot-0.3.3, rack-1.4.1, rack-1.2.5, rack-cache-1.2, rack-mount-0.6.14, rack-ssl-1.3.2, rack-test-0.6.2, rack-test-0.6.1, rack-test-0.5.7, rails-3.2.8, rails-3.2.8.rc1, rails-3.0.1, railties-3.2.8, railties-3.2.8.rc1, railties-3.0.1, railties-3.0.0, rake-10.0.2, rake-0.9.2.2, rdoc-3.12, rest-client-1.6.7, rspec-2.12.0, rspec-core-2.12.1, rspec-expectations-2.12.0, rspec-mocks-2.12.0, rspec-rails-2.12.0, rubygems-bundler-1.1.0, rubyzip-0.9.9, rvm-1.11.3.5, sass-3.2.3, sass-3.2.1, sass-rails-3.2.5, sequel-3.20.0, sinatra-1.0, spork-0.9.2, spork-0.9.0, sprockets-2.1.3, sqlite3-1.3.6, taps-0.3.24, thor-0.16.0, thor-0.14.6, tilt-1.3.3, treetop-1.4.12, treetop-1.4.10, tzinfo-0.3.35, tzinfo-0.3.33, uglifier-1.3.0] (Gem::LoadError)
from /Users//.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from /Users//.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
from /Users//.rvm/gems/ruby-1.9.2-p320@twitclone/bin/autotest:18:in `<main>'
from /Users//.rvm/gems/ruby-1.9.2-p320@twitclone/bin/ruby_noexec_wrapper:14:in `eval'
from /Users//.rvm/gems/ruby-1.9.2-p320@twitclone/bin/ruby_noexec_wrapper:14:in `<main>' 
```

所以在回答建议后，我尝试先卸载 Zentest

```
-MacBook-Pro:proto1 $ gem uninstall ZenTest-4.8.4
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
INFO:  gem "ZenTest-4.8.4" is not installed 
```

在此之后（尽管出现错误消息，我安装了降级版本）

```
s-MacBook-Pro:proto1 $ gem install ZenTest --version "=4.8.3"
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
Fetching: ZenTest-4.8.3.gem (100%)
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
Successfully installed ZenTest-4.8.3
1 gem installed
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
Installing ri documentation for ZenTest-4.8.3...
Installing RDoc documentation for ZenTest-4.8.3... 
```

然后我运行自动测试并显示这个！

```
s-MacBook-Pro:proto1 $ autotest
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
Invalid gemspec in [/Users//.rvm/gems/ruby-1.9.2-p320@twitclone/specifications/ZenTest-4.8.4.gemspec]: Illformed requirement ["< 2.1, >= 1.8"]
loading autotest/rspec2 
```

问题的新部分：

在有人建议我删除 ZenTest gemspec 文件后，我无法运行 spork 或 rails 服务器。我已经安装了 ZenTest 4.8.3，但它显示以下内容：

```
$ spork
Using RSpec
Preloading Rails environment
Could not find ZenTest-4.8.4 in any of the sources
Run `bundle install` to install missing gems. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T05:26:44.787

使用命令`autotest`，您必须安装`ZenTest`gem。
我想你已经`ZenTest 4.8.4`在你的系统中安装了。这颗宝石无法正常工作。
所以你必须把它降级到**4.8.3**。删除所有与`ZenTest 4.8.4`. 然后使用命令安装**4.8.3**

`gem install ZenTest --version "=4.8.3"`

我认为这会解决你的问题。

干杯..！

# hadoop - 海星或splunk

> ID：14515026
> 
> 赞同：1
> 
> 时间：2013-01-25T03:48:19.167
> 
> 标签：hadoop, monitoring, splunk, log-analysis

hiall 我的目标是分析 Hadoop 的日志文件，有两个工具 starfish（开源）和 splunk（商业产品）。有谁知道选择哪一个的利弊。我真的很感谢你的回答。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:54:18.980

好吧，
任何开源与商业工具选择的优缺点都是一样的。

主要指导方针应该是，你的先决条件是什么？

Splunk 核心**是**开源的，免费许可证允许您每天索引 500Mb，
可能它的主要优势是提供比其他商业工具更便宜的 BI 工具，
它还有大量插件，包括 Hadoop，就像 Hadoop 依赖于（不同）自 Splunk 4.x 以来的 MapReduce 实现。
它都有 Python 和 Java SDK，可能会派上用场。
它的方法是，安装它并在（最小的）设置之后，开始使用您的数据。

我不知道 Starfish，虽然它看起来很有希望，但它似乎只需要 JavaFX，而 Splunk 带有自己的 Python 替代安装。

但最终，这一切都归结为您最重要的先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T16:26:44.877

两者的进入门槛都很低。最好的办法是两者都试一试，看看哪种对你有用。

根据您的用例，每种工具都有不同的优势。你的用例是什么？

一般来说，Splunk 在社区支持下既简单又现代。答案通常只需几个搜索即可。

# linux-kernel - ftp.kernel.org 中的内核 tarball 和 git.kernel.org 中的 git 树有什么关系？

> ID：14515028
> 
> 赞同：-1
> 
> 时间：2013-01-25T03:48:32.300
> 
> 标签：linux-kernel

我对linux内核开发过程很感兴趣。我的问题是标题。

我访问了 git.kernel.org。这个 gitweb 界面可以通过快照生成 tarball。维护者是否抓住球并将它们放在 ftp.kernel.org 上？也许太天真了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T06:01:50.693

开发人员使用[git](http://en.wikipedia.org/wiki/Git_%28software%29)获取最新的 Linux 内核并进行开发。

更多Linux内核开发流程详情请阅读官方文档：[http ://www.kernel.org/doc/Documentation/development-process/](http://www.kernel.org/doc/Documentation/development-process/)

# java - Java HTTP请求无效方法？

> ID：14515029
> 
> 赞同：0
> 
> 时间：2013-01-25T03:48:32.010
> 
> 标签：java, http

我正在尝试使用 java 创建 HTTP 请求，但我得到了一个无效的方法，我不知道为什么。这是我的代码：

```
String str = "GET / HTTP/1.1\r\nHost: " + this.url + "\r\n";
int i=r.nextInt(agents.length);
String uAgent = agents[i]; //agents is an array of user agents.
  str = str + "User-Agent: "+uAgent+"\r\n";
  str = str + "Content-Length: " + (int)(Math.random() * 1000.0D) + "\r\n"; //random content length for now
  str = str + "X-a: " + (int)(Math.random() * 1000.0D) + "\r\n"; //random

 HttpURLConnection con = (HttpURLConnection) new URL(this.url).openConnection();
 con.setRequestMethod(str);
 con.setConnectTimeout(5000); //set timeout to 5 seconds
 con.connect();
 System.out.print("."); 
```

我得到的错误是：

```
java.net.ProtocolException: Invalid HTTP method: GET / HTTP/1.1
Host: http://example.com/
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US)
Content-Length: 434
X-a: 660   
    at java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:339)
    at jbot.HTTP.run(HTTP.java:88) 
```

看来我正在使用有效的方法，所以我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:57:06.327

HTTP 请求方法只有一个词：“GET”、“POST”等。其他行是请求标头，您可以使用`setRequestProperty`. 例如：

```
con.setRequestProperty("User-Agent", uAgent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T03:55:00.320

好的，退后一步，查看以下文档[`HttpUrlConnection`](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html#setRequestMethod%28java.lang.String%29)：

`HttpUrlConnection`是对 HTTP 的 TOP 的抽象。它可以帮助您，因此您不必像您所做的那样手动编写 HTTP 字符串。

`setRequestMethod`需要一个简单的`String`，并确切地告诉你它允许什么。如果使用，则不需要手动执行整个 HTTP 行`HttpUrlConnection`（实际上，GET 是默认设置，只是不要为 GET 设置方法）。

您可以根据需要设置“属性”，`HttpUrlConnection`使用[`setRequestProperty`](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#setRequestProperty%28java.lang.String,%20java.lang.String%29).

这就是您用来设置标题的方法，带有简单的键值对（并且用户代理是一个标题）。对于参数，由于您使用的是 GET，它们将成为 URL（查询字符串）的一部分。

如果您想手动将字符串发送到 HTTP 服务器，就像您构建的那样（您可能不想这样做，但以防万一），您只需要使用 a 连接到它`Socket`并开火（不要使用一个辅助库，例如`HttpUrlConnection`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T03:56:57.073

根据文档（http://docs.oracle.com/javase/1.5.0/docs/api/java/net/HttpURLConnection.html#setRequestMethod(java.lang.String)），`setRequestMethod`唯一需要的方法是“GET "、"POST"、"PUT" 等。

你想要这样的东西：

```
URL serverAddress = new URL("http://localhost");
//set up out communications stuff
HttpURLConnection connection = null;

//Set up the initial connection
connection = (HttpURLConnection)serverAddress.openConnection();
connection.setRequestMethod("GET");
connection.setDoOutput(true);
connection.setReadTimeout(10000);

connection.connect(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T04:05:25.223

“GET、POST、HEAD、OPTIONS、PUT、DELETE、TRACE”，这些是传递下面方法的有效参数：

```
void setRequestMethod(String method) 
```

要设置其他属性（如您的情况下的 User-Agent），您可以使用以下方法，如下所示：

```
con.setRequestProperty("<Property-name>", <property-value>) 
```

感谢和快乐的编码！

# sublimetext2 - 使用图像背景自定义 Sublime Text 2

> ID：14515033
> 
> 赞同：3
> 
> 时间：2013-01-25T03:49:29.440
> 
> 标签：sublimetext2

我想用背景中的图像自定义我的 Sublime Text（它足够暗以使文本清晰显示）。我已经看到为 vim 文本编辑器添加了作为背景的图像，我可以在 sublime 中更改配色方案，但我不确定如何将背景设置为上传的图像。

我正在使用 Linux Ubuntu 操作系统，如果这有所作为的话。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:58:45.220

这在 Sublime Text 2 中目前是不可能的。
但是，在他们的 UserEcho 论坛上已经有一个[开放的功能请求，你可以在那里投票。](http://sublimetext.userecho.com/topic/126401-background-image-in-main-window-where-the-code-is-shown/)

# objective-c - 检测和逃避调试器

> ID：14515042
> 
> 赞同：1
> 
> 时间：2013-01-25T03:51:12.460
> 
> 标签：objective-c, clang

新 iTunes 中一个有趣的功能是它无法接受附加到它的调试器进程（如 F-Script 之类的严重工具） 这不仅会涉及[检测方法](http://developer.apple.com/library/mac/qa/qa1361/_index.html)，而且还需要某种进程来检查调试器在运行中附加自身，或者调试器在尝试附加自身时将发出的入口点方法。此外，它需要一种方法来告诉调试器离开（按原样）而不终止进程。问题是：如何？显然，每 X 秒轮询一次调试器效率低下，并且不允许它附加到给定进程（没有像 ptrace() 这样的覆盖）似乎非常私密。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:01:08.733

iTunes 正在调用`ptrace(PT_DENY_ATTACH)`它设置`P_LNOATTACH`阻止调试器（和其他进程，例如 F-Script 和 DTrace）附加到进程的标志。

请参阅[是否可以从 DTrace 隐藏 OS X 应用程序？](https://stackoverflow.com/questions/10406419/is-it-possible-to-conceal-a-os-x-app-from-dtrace)了解更多信息。

如果 iTunes 也积极使用检测方法来识别调试器，我不会感到惊讶。Apple 竭尽全力保护 iTunes 中的 DRM。

有许多书籍提供了保护 Cocoa 应用程序的方法，包括检测调试器。脑海中浮现出一些潜在的标题（我没有仔细检查这些内容，所以不要假设它们有检测方法）：“Mac Hacker's Handbook”、“Hacking and Securing iOS Applications”、“Professional Cocoa Application Security”和“C 和 C++ 的安全编程手册”。

“Mac OS X 内部结构”和“Mac OS X 和 iOS 内部结构”可能在`PT_DENY_ATTACH`.

# c - 如何使 OS X malloc 在失败时自动中止？

> ID：14515045
> 
> 赞同：6
> 
> 时间：2013-01-25T03:51:23.003
> 
> 标签：c, macos, malloc

[Matasano 博客](http://mtso.squarespace.com/chargen/2006/1/29/four-c-programming-anti-idioms.html)将“检查返回值`malloc()`”称为“C 编程反成语”。相反，如果它失败了，它`malloc()`应该自动调用你。`abort()`论点是，由于您通常希望在程序`malloc()`失败时中止程序，因此这应该是默认行为，而不是您每次都必须费力地键入或忘记键入的内容。

在不深入了解这个想法的优点的情况下，最简单的设置方法是什么？我正在寻找可以通过其他库函数自动检测内存分配失败的东西，例如[`asprintf()`](http://linux.die.net/man/3/asprintf)。一个便携的解决方案会很棒，但我也会对特定于 mac 的东西感到满意。

* * *

总结以下最佳答案：

### Mac 运行时解决方案

在运行程序之前设置`MallocErrorAbort=1`环境变量。自动适用于所有内存分配功能。

### Mac/linux 运行时解决方案

[使用动态库 shim](https://stackoverflow.com/a/931866/14558)在运行时使用或加载自定义`malloc()`包装器。您可能想要换行, , *&* c。也是。`LD_PRELOAD``DYLD_INSERT_LIBRARIES``calloc()``realloc()`

 *### Mac/linux编译解决方案

定义您自己的`malloc()`和`free()`函数，并使用`dyld(RTLD_NEXT, "malloc")` [如下所示](https://stackoverflow.com/a/4586534/14558)访问系统版本。同样，您可能想要换行`calloc()`, `realloc()`, *&* c。也是。

```
#include <dlfcn.h>
#include <stdio.h>
#include <stdlib.h>

void *(*system_malloc)(size_t) = NULL;

void* malloc(size_t bytes) {
    if (system_malloc == NULL) {
        system_malloc = dlsym(RTLD_NEXT, "malloc");
    }
    void* ret = system_malloc(bytes);
    if (ret == NULL) {
        perror("malloc failed, aborting");
        abort();
    }
    return ret;
}

int main() {
    void* m = malloc(10000000000000000l);
    if (m == NULL) {
        perror("malloc failed, program still running");
    }
    return 0;
} 
```

### Linux编译解决方案

按照[glibc 手册](http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Hooks-for-Malloc.html)中的说明使用`__malloc_hook`和。`__realloc_hook`

### mac编译解决方案

使用该[`malloc_default_zone()`函数](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/malloc_default_zone.3.html)访问堆的数据结构，取消保护内存页面，并在 中安装一个钩子`zone->malloc`：

```
#include <malloc/malloc.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>
#include <unistd.h>

static void* (*system_malloc)(struct _malloc_zone_t *zone, size_t size);
static void* my_malloc(struct _malloc_zone_t *zone, size_t size) {
    void* ret = system_malloc(zone, size);
    if (ret == NULL) {
        perror("malloc failed, aborting");
        abort();
    }
    return ret;
}

int main() {
    malloc_zone_t *zone = malloc_default_zone();
    if (zone->version != 8) {
        fprintf(stderr, "Unknown malloc zone version %d\n", zone->version);
        abort();
    }
    system_malloc = zone->malloc;
    if (mprotect(zone, getpagesize(), PROT_READ | PROT_WRITE) != 0) {
        perror("munprotect failed");
        abort();
    }
    zone->malloc = my_malloc;
    if (mprotect(zone, getpagesize(), PROT_READ) != 0) {
        perror("mprotect failed");
        abort();
    }

    void* m = malloc(10000000000000000l);
    if (m == NULL) {
        perror("malloc failed, program still running");
    }
    return 0;
} 
```

为了完整起见，您可能还需要包装`calloc()`,和 in中`realloc()`定义的其他函数。`malloc_zone_t``/usr/include/malloc/malloc.h`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T03:54:07.623

只需包装`malloc()`一些`my_malloc()`执行此操作的函数即可。在很多情况下，实际上可以处理无法分配内存的问题，因此这种行为是不可取的。添加功能很容易，`malloc()`但删除它很容易，这可能就是它以这种方式运行的原因。

要记住的另一件事是，这是您要调用的库。您是否想进行库调用并让库杀死您的应用程序而您无法发表意见？

我想我错过了有关的部分，`asprintf`但是 libc 导出了一些您可以使用的钩子（valgrind 本质上是这样做的），这些钩子可以让您覆盖 malloc 行为。这是对钩子本身的参考，如果您对 C 足够了解，这并不难。

[http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Hooks-for-Malloc.html](http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Hooks-for-Malloc.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T04:10:02.153

`man malloc`在我的 Mac 上提供以下信息。看起来像你想要`MallocErrorAbort`的。

> ### 环境
> 
> 以下环境变量会更改与分配相关的函数的行为。
> 
> *   `MallocLogFile <f>`
>     创建/附加消息到给定的文件路径`<f>`，而不是写入标准错误。
>     
>     
> *   `MallocGuardEdges`
>     如果设置，则在每个大块之前和之后添加一个保护页。
>     
>     
> *   `MallocDoNotProtectPrelude`
>     如果设置，即使设置了 MallocGuardEdges 环境变量，也不要在大块之前添加保护页。
>     
>     
> *   `MallocDoNotProtectPostlude`
>     如果设置，即使设置了 MallocGuardEdges 环境变量，也不要在大块之后添加保护页。
>     
>     
> *   `MallocStackLogging`
>     如果设置，则记录所有堆栈，以便可以使用泄漏之类的工具。
>     
>     
> *   `MallocStackLoggingNoCompact`
>     如果设置，则以与 malloc_history 程序兼容的方式记录所有堆栈。
>     
>     
> *   `MallocStackLoggingDirectory`
>     如果设置，则将堆栈日志记录到指定的目录，而不是将它们保存到默认位置 (/tmp)。
>     
>     
> *   `MallocScribble`
>     如果设置，则用 0xaa 字节填充已分配的内存。这增加了对新分配内存的内容进行假设的程序失败的可能性。此外，如果设置，则用 0x55 字节填充已释放的内存。这增加了程序由于访问不再分配的内存而失败的可能性。
>     
>     
> *   `MallocCheckHeapStart <s>`
>     如果设置，则指定在MallocCheckHeapEach 指定的`<s>`开始定期堆检查之前等待的分配数。`<n>`如果设置了 MallocCheckHeapStart 但未指定 MallocCheckHeapEach，则默认检查重复次数为 1000。
>     
>     
> *   `MallocCheckHeapEach <n>`
>     如果设置，则在每次操作时对堆运行一致性检查`<n>`。MallocCheckHeapEach 仅在还设置了 MallocCheckHeapStart 时才有意义。
>     
>     
> *   `MallocCheckHeapSleep <t>`
>     当设置了 MallocCheckHeapStart 并检测到堆损坏时，设置休眠的秒数（等待调试器附加）。默认值为 100 秒。将此设置为零意味着根本不睡觉。将此设置为负数意味着仅在第一次检测到堆损坏时才休眠（正数秒）。
>     
>     
> *   `MallocCheckHeapAbort <b>`
>     当设置了 MallocCheckHeapStart 并将其设置为非零值时，如果检测到堆损坏，则会导致调用 abort(3)，而不是任何休眠。
>     
>     
> *   `MallocErrorAbort`
>     如果设置，则在 malloc(3) 或 free(3) 中遇到错误时调用 abort(3)，例如在先前释放的指针上调用 free(3)。
>     
>     
> *   `MallocCorruptionAbort`
>     与 MallocErrorAbort 类似，但不会在内存不足的情况下中止，因此仅捕获那些会导致内存损坏的错误更有用。MallocCorruptionAbort 始终在 64 位进程上设置。
>     
>     
> *   `MallocHelp`
>     如果设置，则打印分配相关函数注意的环境变量列表，以及简短描述。该列表应与本文档相对应。

请注意`MallocCorruptionAbort`关于 的行为的评论`MallocErrorAbort`。

* * *

对于我自己的大部分代码，我使用了一系列包装函数—— `emalloc()`, `erealloc()`, `ecalloc()`, `efree()`,`estrdup()`等——检查失败的分配（`efree()`是一个直接传递函数以确保一致性）并且在分配失败时不返回。他们要么退出，要么中止。这基本上就是[耶稣拉莫斯在他的](https://stackoverflow.com/users/392046/jesus-ramos)[回答](https://stackoverflow.com/a/14515068/15168)中所暗示的；我同意他的建议。

但是，并非所有程序都能负担得起这种情况。我正在修复我编写的一些代码，这些代码确实使用了这些函数，以便可以在不能因分配错误而失败的上下文中重用它。出于最初的目的（在进程启动的早期阶段进行安全检查），出错时退出是可以的，但现在它需要在系统运行后才能使用，此时不允许过早退出。因此，代码必须处理那些代码曾经能够假设“分配失败不返回”的路径。这有点痛苦。它仍然可以采取保守的观点；分配失败意味着请求不安全并对其进行适当处理。但并非所有代码都可以承受因内存分配失败而中止而失败的后果。*

# csv - 无法将 CSV 复制到 postgreSQL 表中：时间戳列将不接受空字符串

> ID：14515046
> 
> 赞同：8
> 
> 时间：2013-01-25T03:51:26.453
> 
> 标签：csv, null, copy, timestamp, postgresql-9.2

我想将 CSV 文件导入 9.2 版，但 CSV 文件在最后一列位置有双引号双引号来表示 NULL 值：

`"2","1001","9","2","0","0","130","","2012-10-22 09:33:07.073000000",""`

它映射到时间戳类型的列。postgreSQL 不喜欢“”。我试图设置 NULL 选项，但也许我做得不对？我已经尝试过`NULL as '""`并且`NULL ''`和`NULL as ''`但`NULL ""`没有成功；这是我的命令：

```
COPY SCH.DEPTS 
FROM 'H:/backups/DEPTS.csv' 
WITH (
 FORMAT CSV,
 DELIMITER ',' ,
 NULL  '',
 HEADER TRUE,
 QUOTE   '"' 
 ) 
```

但它失败并出现错误：

> 错误：类型时间戳的无效输入语法：“”
> 
> 上下文：复制部门，第 2 行，列过期日期：“”

PS 有没有办法为 COPY 命令指定布尔值的字符串表示形式？生成 CSV（其中有很多）的实用程序使用“false”和“true”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T08:42:36.537

空字符串 ("") 不是有效的时间戳，并且`COPY`似乎不提供`FORCE NULL`or`FORCE EMPTY TO NULL`模式；它有相反的，`FORCE NOT NULL`，但这不会做你想要的。

您可能需要`COPY`将数据放入带有`text`时间戳字段的表中，可能是一个`UNLOGGED`或`TEMPORARY`表，然后使用`INSERT INTO real_table SELECT col1, col, col3, NULLIF(tscol,'') FROM temp_table;`.

`COPY`应该接受`true`和`false`作为布尔值，所以你不应该有任何问题。

或者，使用简单的 Python 脚本和`csv`模块读取 CSV，然后使用`psycopg2`to`COPY`行进入 Pg。或者只是写出新清理的 CSV 并将其输入`COPY`. 或者使用进行数据转换的 ETL 工具，例如 Pentaho Kettle 或 Talend。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-29T13:10:36.430

5年后，这似乎仍然是一个问题。我今天在运行 PostgreSQL 9.6.8 时遇到了这个问题。作为运行 COPY 命令之前的一种解决方法，我使用`sed`替换所有出现的`""`with`null`然后添加`NULL as 'null'`到我的 COPY 命令中，即

```
sed -i 's/""/null/g' myfile.csv

PGPASSWORD=<pwd> psql -h <host> -p <port> -d <db> -U <user>
-c "\copy mytable from myfile.csv WITH CSV DELIMITER ',' QUOTE '\"' ESCAPE '\\' NULL as 'null';" 
```

# javascript - canvas.getContext() 不是函数

> ID：14515047
> 
> 赞同：11
> 
> 时间：2013-01-25T03:51:26.920
> 
> 标签：javascript, canvas

目前正在研究如何将 Coldfusion 与 Canvas 交互。目前，由于 javascript 错误“canvas.getContext('2d'); is not a function”，我被卡住了。

画布必须位于 div 内：

```
<div id="svgbasics" name="svgbasics"></div> 
```

这是用于生成图像的 javascript

```
var canvas = $('#svgbasics').svg('get').toSVG();
var context = canvas.getContext('2d');
var strDataURI = canvas.toDataURL();
Canvas2Image.saveAsPNG(canvas); 
```

* * *

项目的附加信息（如果需要）：

*   使用以下库：`1.7.2/jquery.min.js`、`jquery.svg.js`和`base64.js``canvas2image.js`

*   `$('#svgbasics').svg('get').toSVG();`返回如下内容：

    `<svg xmlns="w3.org/2000/svg"; version="1.1" width="400" height="300"><circle cx="75" cy="75" r="50" fill="none" stroke="red" stroke-width="3"/><g stroke="black" stroke-width="2"><line x1="15" y1="75" x2="135" y2="75"/><line x1="75" y1="15" x2="75" y2="135"/></g></svg>`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-06-03T16:44:47.417

您应该参考`<canvas .....> </canvas>` 元素，而不是`<div>`等！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-25T04:06:59.547

尝试：

```
var canvas = document.getElementById("canvasEl");
var context = canvas.getContext('2d'); 
```

`canvasEl`一个在哪里`<canvas id="canvasEl"></canvas>`。您`$('#svgbasics').svg('get').toSVG();`可能不会返回它必须`.getContext('2d')`存在的 HTML 画布元素。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T04:14:40.350

您将 SVG 画布与新的 HTML5 画布混淆了。

它们是不同的动物。请看这篇文章，了解 Canvas 和 SVG 之间的区别（有一个“Canvas 和 SVG 之间的区别”部分）：[http ://www.w3schools.com/html/html5_svg.asp](http://www.w3schools.com/html/html5_svg.asp)

从您的脚本标签中，我可以看到您正在使用 jQuery SVG：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 <script type="text/javascript" src="jquery.svg.js"></script> 
```

此页面显示了使用获取和操作 SVG 画布的示例：http: [//keith-wood.name/svg.html](http://keith-wood.name/svg.html)。

# javascript - Javascript 程序不工作

> ID：14515049
> 
> 赞同：-2
> 
> 时间：2013-01-25T03:51:46.883
> 
> 标签：javascript

我目前正在用 Javascript 编写一个简单的程序。我不知道为什么程序不能正常工作。用户应该能够猜出一个数字，程序会告诉用户它需要猜高还是低。现在，它甚至没有给我第一个提示。谢谢大家的帮助。

```
<html>
  <head>
  </head>
  <body>
    <script>
      //Guessing Game
      function guessingGame() {
        var userNumber = prompt("Pick a number 1 through 1000!", "Type your number here");
        var computerNumber = Math.floor(Math.random() * 1000 + 1);
        var tries = 0;
        var done = false;
        while (done === false) {
          if (userNumber < computerNumber) {
            document.write("Your number was too low.");
            tries = tries + 1;
            userNumber = prompt("Please guess again", "Type your number here");
          } else if (userNumber > computerNumber) {
            document.write("Your number was too high.");
            tries = tries + 1;
            userNumber = prompt("Please guess again", "Type your number here");
          } else {
            document.write("Great Job!!! You guessed the number in " + tries + " tries!" );
            done = true;
          }
        }
      }
      guessingGame();
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:54:25.743

```
document.write("Great Job!!! You guessed the number in " + tries " tries!" ); 
```

此行缺少`+`after `tries`。语法错误通常会导致整个 JavaScript 块被丢弃，因此没有任何运行。

```
if (userNumber < computerNumber) { 
```

您还应该避免`<`在 JavaScript 代码中使用未转义的字符，因为它不能与 HTML 很好地混合。写要么

```
if (userNumber &lt; computerNumber) { 
```

或者[将整个脚本放入 CDATA 部分](https://stackoverflow.com/questions/7092236/what-is-cdata-in-html)，以便允许使用未转义的尖括号。

```
<script>
// <![CDATA[

    /* code here, can use '<' freely */

// ]]>
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T03:54:34.993

您忘记了`+`该行中的其他串联：

```
document.write("Great Job!!! You guessed the number in " + tries " tries!" ); 
```

它应该是

```
document.write("Great Job!!! You guessed the number in " + tries + " tries!" ); 
```

修复了**[jsFiddle](http://jsfiddle.net/j08691/jNFfN/)**上的示例。

# matlab - 有人可以解释如何在MATLAB中使用contourf绘制这个总和吗？

> ID：14515051
> 
> 赞同：4
> 
> 时间：2013-01-25T03:52:03.300
> 
> 标签：matlab, plot, vectorization, graphing

我将首先声明，是的，这是作业（我在 stackoverflow 上的第一个作业问题！）。但我不想让你帮我解决，我只是想要一些指导！

有问题的等式是这样的：![有问题的系列](../Images/70aaf5bf05aa99084eacd8367dfb0fa1.png)

我被告知取 N = 50, phi1 = 300, phi2 = 400, 0<=x<=1 和 0<=y<=1，并让 x 和 y 成为 100 个等距点的向量，包括终点。

所以我做的第一件事就是设置这些变量，并使用 x = linspace(0,1) 和 y = linspace(0,1) 来制作正确的向量。

问题是编写一个名为 potential.m 的 MATLAB 脚本文件，该文件计算 phi(x,y) 并使用内置函数**contourf**绘制与 x 和 y 的填充等高线图（有关示例，请参见 MATLAB 中的帮助命令）。确保正确标记图形。（提示：域的顶部和底部应该在 400 度左右，而左侧和右侧应该在 300 度左右）。

但是，以前，我使用 x 或 y 作为常数来计算 phi。如果两者都是变量，我应该如何计算它？我是否保持 x 稳定，同时遍历 y 向量中的每个数字，将其分配给矩阵，在一次又一次地遍历 y 的每个值后将 x 递增到其向量中的下一个数字？然后做同样的过程，但是慢慢增加 y ？

如果是这样，我一直在使用一个循环，每次循环遍历所有 100 个值时都会递增到下一行。如果我这样做，我最终会得到一个有 200 行和 100 列的巨大矩阵。我将如何在 linspace 函数中使用它？

如果这是正确的，这就是我找到矩阵的方式：

```
clear
clc
format compact
x = linspace(0,1);
y = linspace(0,1);
N = 50;
phi1 = 300;
phi2 = 400;
phi = 0;
sum = 0;
for j = 1:100
    for i = 1:100
        for n = 1:N
            sum = sum + ((2/(n*pi))*(((phi2-phi1)*(cos(n*pi)-1))/((exp(n*pi))-(exp(-n*pi))))*((1-(exp(-n*pi)))*(exp(n*pi*y(i)))+((exp(n*pi))-1)*(exp(-n*pi*y(i))))*sin(n*pi*x(j)));
        end
        phi(j,i) = phi1 - sum;
    end
end
for j = 1:100
    for i = 1:100
        for n = 1:N
            sum = sum + ((2/(n*pi))*(((phi2-phi1)*(cos(n*pi)-1))/((exp(n*pi))-(exp(-n*pi))))*((1-(exp(-n*pi)))*(exp(n*pi*y(j)))+((exp(n*pi))-1)*(exp(-n*pi*y(j))))*sin(n*pi*x(i)));
        end
        phi(j+100,i) = phi1 - sum;
    end
end 
```

这是contourf的定义。我想我必须使用 contourf(X,Y,Z)：

contourf(X,Y,Z)、contourf(X,Y,Z,n) 和 contourf(X,Y,Z,v) 使用 X 和 Y 绘制 Z 的填充等高线图以确定 x 轴和 y 轴限制。当 X 和 Y 是矩阵时，它们的大小必须与 Z 相同，并且必须单调递增。

这是新代码：

```
N = 50;
phi1 = 300;
phi2 = 400;
[x, y, n] = meshgrid(linspace(0,1),linspace(0,1),1:N)
f = phi1-((2./(n.*pi)).*(((phi2-phi1).*(cos(n.*pi)-1))./((exp(n.*pi))-(exp(-n.*pi)))).*((1-(exp(-1.*n.*pi))).*(exp(n.*pi.*y))+((exp(n.*pi))-1).*(exp(-1.*n.*pi.*y))).*sin(n.*pi.*x));
g = sum(f,3);
[x1,y1] = meshgrid(linspace(0,1),linspace(0,1));
contourf(x1,y1,g) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:32:55.917

您的代码需要这么长时间来计算`phi`矩阵的原因是您没有[预先分配数组](http://www.mathworks.com/help/matlab/matlab_prog/techniques-for-improving-performance.html#f8-793781)。发生大小错误是因为`phi`不是 100x100。但是，与其修复这些东西，还有一个更好的方法......

MATLAB 是一个 MATrix LABoratory，所以这种类型的方程很容易使用矩阵运算来计算。提示：

1.  `x`不是循环遍历and的值、行或列，而是`y`构造矩阵来表示所有可能的输入组合。检查[网格网格](http://www.mathworks.com/help/matlab/ref/meshgrid.html)。

2.  您仍然需要一个循环来对 n = 1:N 求和。但是对于 n 的每个值，您可以一次计算所有 x 和 y 的方程（使用提示 1 中的矩阵）。完成这项工作的关键是使用[逐个元素的运算符](http://www.mathworks.com/help/matlab/ref/arithmeticoperators.html)，例如`.*`and `./`。

像这样使用矩阵运算是 Matlab 方式。学习并爱上它。（并且在使用大多数其他没有它们的语言时会感到沮丧。）

祝你的家庭作业好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T04:57:41.443

向量化代码。例如，您可以使用以下方式编写`f(x,y,n)`：

```
 [x y n] = meshgrid(-1:0.1:1,-1:0.1:1,1:10);
 f=exp(x.^2-y.^2).*n ; 
```

`f`是一个 3D 矩阵，现在刚好`sum`在正确的维度上......

```
 g=sum(f,3); 
```

为了使用`contourf`，我们将只使用 2D 部分`x,y`：

```
 [x1 y1] = meshgrid(-1:0.1:1,-1:0.1:1);    
 contourf(x1,y1,g) 
```

![在此处输入图像描述](../Images/c348787f9569751d6f050a196ce9e6a4.png)

# android - Google Map Android API v2：授权失败

> ID：14515054
> 
> 赞同：3
> 
> 时间：2013-01-25T03:52:45.047
> 
> 标签：android, google-api, android-maps-v2

我试图让我的谷歌地图显示在我的应用程序上，但它不工作并且出现了这个错误：

```
01-25 11:38:54.763: E/Google Maps Android API(30514): Authorization failure. 
```

我目前正在使用发布证书中的 SHA1 证书指纹，该证书用于在 appstore 上发布我的应用程序。

**编辑**：我还在 API 控制台上打开了 Google Map Android API v2。

我从[这里](https://stackoverflow.com/questions/13696620/google-maps-android-api-v2-authorization-failure)的评论中读到“签名算法必须是 SHA1withRSA 而不是 SHA256withRSA”。但是，我从 Eclipse 创建了发布证书，它是 SHA256withRSA，我没有对其进行任何设置。我好像也改不了。

如果签名算法导致问题，有人可以启发我吗？如果是这样，我应该如何更改 eclipse 上的签名算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T05:29:55.833

想通了我的问题。

我一直在从我的发布证书生成密钥，当我在手机上运行应用程序时，它在调试期间**将不起作用。**我必须改用调试密钥库证书指纹。

请记住保留2把钥匙：

1.  当您在手机上运行它时，从您的调试密钥库中调试 API 密钥。

2.  发布要在部署到 Google Play 商店之前签署应用程序时使用的证书 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:23:31.867

请检查您是否已`Google Maps Android API v2`在您的 google api 控制台中启用。

![在此处输入图像描述](../Images/83289c2b8b211f2f9a6adc7330973038.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-09T09:33:49.523

使用适当的 SHA 检查您的 API 密钥是否存在，如果不使用适当的 SHA 重新生成它。如果您不知道如何生成它，请在下面尝试：

```
JAVA_HOME\bin > keytool -list -v -alias androiddebugkey -keystore "~\.android\debug.keystore" -storepass password(your_own) -keypass "password(your_own)" 
```

检查*清单*文件，如果你写了两个这样的元标记

```
<!--<meta-data-->
<!--android:name="com.google.android.maps.v2.API_KEY"-->
<!--android:value="AIzaSyBHghWPWutTiOxCJKll2WoCuVOQ5YotLiY" />-->

<meta-data
    android:name="com.google.android.geo.API_KEY"
    android:value="@string/google_maps_key"/> 
```

评论其中任何一个，对于我使用的项目`geo.API_Key`，它将同时处理 GEO 和谷歌地图。

更重要的是，将**google-services.json**文件导入您的应用文件夹。

# android - 设计简单的android布局？

> ID：14515057
> 
> 赞同：1
> 
> 时间：2013-01-25T03:53:00.013
> 
> 标签：android, xml, layout

我在布置我的 android 应用程序时遇到了一些麻烦。我没有很好地计划它，我对 java 并不陌生，但我对这些 android xml 布局很陌生。我拥有的是一个水平线性布局父级，它包含两个相对布局。正确的相对布局由一个自定义视图（GridView）组成，在它下面我想要 3 个按钮。我在我的 xml 文件中添加了一个按钮 (button1)，如您所见，它不会显示在屏幕上。我在想我需要如何设置我的gridview的大小？它的高度是宽度的 2 倍。或者我可以在运行时以编程方式通过像素设置它吗？

在这一点上，我也在想我有点过于复杂了。就像我说的那样，我对这些奇怪的布局很陌生，我习惯于在 .net 中使用 x 和 y 偏移量。也许这一切都可以在一个相对布局中完成，而不是使用两个并将它们嵌套在线性布局中？

这是我到目前为止得到的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/next" />

    <com.mydomain.tetrisv2.PreviewGridView
        android:id="@+id/previewGridView1"
        android:layout_width="100dp"
        android:layout_height="150dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/previewGridView1"
        android:text="Score: " />

</RelativeLayout>

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <com.mydomain.tetrisv2.GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="50dp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/gridView1"
        android:text="Button" />

</RelativeLayout>

</LinearLayout> 
```

我无法发布图片，但视觉效果如下：http: [//i50.tinypic.com/orscgi.png](http://i50.tinypic.com/orscgi.png)

另附注（不相关），这是一个用于实验和学习目的的项目，但是制作俄罗斯方块游戏并将其放在 Play 商店中是否有任何法律版权影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:24:33.357

只需将我们右侧gridview的下方按钮更改为此代码

```
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" // change is here 
    android:text="Button" /> 
```

希望对你有帮助..

# objective-c - 链接 MKNetworkKit API 调用并遇到如何用数据填充 NSMutableArray 的问题

> ID：14515058
> 
> 赞同：0
> 
> 时间：2013-01-25T03:53:00.527
> 
> 标签：objective-c, api, rest, nsmutablearray, mknetworkkit

我有一个包含两个部分的 UITableView，其中每个部分都需要调用 REST API 来获取数据。我正在使用 MKNetworkKit 进行通话。我的问题是我*应该*如何为 UITableView 填充 NSMutableArray 以确保数据始终正确，即使在“拉动刷新”之后也是如此。我只是觉得我对这一切都错了。

这是我现在的代码：

MKNetworkEngine 子类 (.h)：

```
typedef void (^DualResponseBlock)(id ResponseJson, NSError *);

-(MKNetworkOperation*) RequestWithURI:(NSString *) URI
                      withHandler:(DualResponseBlock)ResponseBlock; 
```

MKNetworkEngine 子类 (.m)：

```
-(MKNetworkOperation *)RequestWithURI:(NSString *)URI
                          withHandler:(DualResponseBlock)ResponseBlock {
    MKNetworkOperation *op = [self operationWithPath:HubAPI(URI)
                                              params:nil
                                          httpMethod:@"GET"];

    if(![self isReachable]) {
        DLog(@"Unable to connect to %@ - Reachability is %d", HubAPI(URI), [self isReachable]);
    }

    [op addCompletionHandler:^(MKNetworkOperation *completedOperation) {
        [completedOperation responseJSONWithCompletionHandler:^(id jsonObject) {
            ResponseBlock(jsonObject, nil);
        }];
    } errorHandler:^(MKNetworkOperation *errorOp, NSError *error) {
        [errorOp responseJSONWithCompletionHandler:^(id jsonObject) {
            NSMutableDictionary *errorDetails = [NSMutableDictionary dictionary];

            NSDictionary *errorResponse = [jsonObject objectForKey:@"error"];
            [errorDetails setValue:[errorResponse objectForKey:@"message"] forKey:NSLocalizedDescriptionKey];
            NSError *error = [NSError errorWithDomain:kNSErrorDomain code:[[errorResponse objectForKey:@"code"] intValue] userInfo:errorDetails];

            ResponseBlock(nil, error);
        }];

    }];

    [self enqueueOperation:op];

    return op;
} 
```

带有 UITableView (.h) 的 ViewController：

```
@interface WishlistViewController : UITableViewController <NSObject, UITableViewDelegate, UITableViewDataSource, UIActionSheetDelegate> {
    NSMutableArray *wishlist;
}

@property (nonatomic, retain) IBOutlet UITableView *wishlistTableView; 
```

带有 UITableView (-(void)viewDidLoad) (.m) 的 ViewController：

```
[MBProgressHUD showHUDAddedTo:self.view animated:YES];

[app.hubEngine RequestWithURI:@"wishlist" withHandler:^(id responseJson, NSError *responseError) {
        if(responseJson != nil) {
            wishlist = [[NSMutableArray alloc] initWithObjects:[responseJson mutableCopy], nil];

            [app.hubEngine RequestWithURI:@"wishlist/granted" withHandler:^(id responseJson, NSError *responseError) {
                if(responseJson != nil) {
                    [wishlist addObject:[responseJson mutableCopy]];
                    [_wishlistTableView reloadData];
                }
                else {
                    DLog(@"Error: %@", [responseError localizedDescription]);
                }

                [MBProgressHUD hideHUDForView:self.view animated:YES];
            }];
        }
        else {
            DLog(@"Error: %@", [responseError localizedDescription]);

            [MBProgressHUD hideHUDForView:self.view animated:YES];
        }
    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:40:14.557

不完全确定您在此处尝试做什么，但如果您希望在第一个操作完成后执行第二个操作，请尝试此操作。

```
[op2 addDependency:op1]; 
```

# mysql - 使用变量在日期范围内选择字符串日期行

> ID：14515059
> 
> 赞同：0
> 
> 时间：2013-01-25T03:53:21.227
> 
> 标签：mysql, vb.net, date, date-range

再会！我在使用变量过滤日期范围内的字符串日期时遇到问题。这是我的示例查询不起作用：

```
Select * from table_name where datee >= '" & result & "' and datee1 <= '" & result1 & "'; 
```

此代码显示相同的日期，2012-12-31 和 2012-12-31。我想要的是大于等于将显示为 2012-12-01，小于或等于是 2012-12-31。 . 这是我的日期范围代码：

```
Dim datee, datee1, result, result1 as string
Dim dateTime As Date
Dim dTime As Date
dateTime = Date.Parse(datee)
dTime = Date.Parse(datee1)
result = dateTime.ToString("yyyy-MM-dd")
result1 = dTime.ToString("yyyy-MM-dd") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:07:19.803

请试试这个：（假设您的变量持有正确的日期格式和值，并且数据库字符串日期格式是`YYYY-MM-DD`）

```
Select * from table_name where Str_to_Date(datee,'%Y-%m-%d') >= 
'" & result & "' and Str_to_Date(datee1,'%Y-%m-%d') <= '" & result1 & "'
; 
```

由于 12-01 至 12-31 涵盖了 12 月份.. 您可以尝试：

```
Select * from table_name where Month(Str_to_Date(datee,'%Y-%m-%d')) = 12
; 
```

因此，

```
Select * from table_name where 
Month(Str_to_Date(datee,'%Y-%m-%d')) = " & Month(result1) & "
; 
```

`month`在示例演示表中使用函数和字符串日期格式的查询非常仔细地检查演示：

*   ## [SQLFIDDLE MYSQL 演示](http://sqlfiddle.com/#!2/c4855/3)

# ios - 如何加载作为项目一部分的 HTML5 文档？

> ID：14515064
> 
> 赞同：0
> 
> 时间：2013-01-25T03:53:42.893
> 
> 标签：ios, xcode

我正在开发一个 iPhone 应用程序，在我的项目中，我添加了一个 HTML5 页面，它是一个模板，并且有一个 webview 并希望在 viewdidload 上加载它。我似乎无法访问它，我正在尝试这个：

```
NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(    NSAllApplicationsDirectory, NSUserDomainMask, YES ) ;

NSString *documentDirectory =  [ documentDirectories objectAtIndex: 0 ] ;
    NSString *longPath = [ documentDirectory stringByAppendingFormat:@"/%@" filename ] ; 
```

我有一点疑惑？我怎样才能做到这一点？我是否需要告诉 xcode 这个 html5 需要在运行时构建并发送到特定文件夹？像对待资源一样？

我是来自 .NET 环境的 xcode 新手，所以术语可能有点尴尬。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:25:28.203

如果它是项目的一部分，它将不在文档目录中，它将在您的应用程序包中。例如：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:filename ofType:@"html"]];
NSURLRequest *req = [NSURLRequest requestWithURL:url];
[self.webView loadRequest:req]; 
```

# python - 在带有 HFS+ 的 OSX 上的 python 中，如何获得现有文件名的正确大小写？

> ID：14515073
> 
> 赞同：9
> 
> 时间：2013-01-25T03:55:00.563
> 
> 标签：python, macos, filesystems, hfs+

我正在存储有关 OSX HFS+ 文件系统上存在的文件的数据。我稍后想遍历存储的数据并确定每个文件是否仍然存在。出于我的目的，我关心文件名是否区分大小写，所以如果文件名的大小写发生了变化，我会认为该文件不再存在。

我开始尝试

```
os.path.isfile(filename) 
```

但是在 HFS+ 上正常安装 OSX 时，即使文件名大小写不匹配，它也会返回 True。我正在寻找一种方法来编写一个关心大小写的 isfile() 函数，即使文件系统没有。

os.path.normcase() 和 os.path.realpath() 在我传入它们的任何情况下都返回文件名。

编辑：

我现在有两个似乎适用于仅限于 ASCII 的文件名的函数。我不知道 unicode 或其他字符如何影响这一点。

第一个是基于 omz 和 Alex L 给出的答案。

```
def does_file_exist_case_sensitive1a(fname):
    if not os.path.isfile(fname): return False
    path, filename = os.path.split(fname)
    search_path = '.' if path == '' else path
    for name in os.listdir(search_path):
        if name == filename : return True
    return False 
```

第二个可能效率更低。

```
def does_file_exist_case_sensitive2(fname):
    if not os.path.isfile(fname): return False
    m = re.search('[a-zA-Z][^a-zA-Z]*\Z', fname)
    if m:
        test = string.replace(fname, fname[m.start()], '?', 1)
        print test
        actual = glob.glob(test)
        return len(actual) == 1 and actual[0] == fname
    else:
        return True  # no letters in file, case sensitivity doesn't matter 
```

这是基于帝斯曼答案的第三个。

```
def does_file_exist_case_sensitive3(fname):
    if not os.path.isfile(fname): return False
    path, filename = os.path.split(fname)
    search_path = '.' if path == '' else path
    inodes = {os.stat(x).st_ino: x for x in os.listdir(search_path)}
    return inodes[os.stat(fname).st_ino] == filename 
```

如果我在一个目录中有数千个文件，我不认为这些会表现良好。我仍然希望有一些感觉更有效的东西。

我在测试时注意到的另一个缺点是它们只检查文件名是否匹配。如果我向他们传递一个包含目录名称的路径，那么到目前为止这些函数都没有检查目录名称的大小写。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-14T02:02:10.877

该答案通过提供改编自[Alex L 的答案的](https://stackoverflow.com/a/14515332/45375)**函数**来补充现有答案：

*   也适用于**非 ASCII 字符**
*   处理***所有*路径组件**（不仅仅是最后一个）
*   使用 Python 2.x 和 3.x
*   作为奖励，也可以在 Windows 上工作（有更好*的特定于 Windows 的*解决方案 - 请参阅[https://stackoverflow.com/a/2114975/45375](https://stackoverflow.com/a/2114975/45375) - 但这里的功能是跨平台的，不需要额外的包）

```
import os, unicodedata

def gettruecasepath(path): # IMPORTANT: <path> must be a Unicode string
  if not os.path.lexists(path): # use lexists to also find broken symlinks
    raise OSError(2, u'No such file or directory', path)
  isosx = sys.platform == u'darwin'
  if isosx: # convert to NFD for comparison with os.listdir() results
    path = unicodedata.normalize('NFD', path)
  parentpath, leaf = os.path.split(path)
  # find true case of leaf component
  if leaf not in [ u'.', u'..' ]: # skip . and .. components
    leaf_lower = leaf.lower() # if you use Py3.3+: change .lower() to .casefold()
    found = False
    for leaf in os.listdir(u'.' if parentpath == u'' else parentpath):
      if leaf_lower == leaf.lower(): # see .casefold() comment above
          found = True
          if isosx:
            leaf = unicodedata.normalize('NFC', leaf) # convert to NFC for return value
          break
    if not found:
      # should only happen if the path was just deleted
      raise OSError(2, u'Unexpectedly not found in ' + parentpath, leaf_lower)
  # recurse on parent path
  if parentpath not in [ u'', u'.', u'..', u'/', u'\\' ] and \
                not (sys.platform == u'win32' and 
                     os.path.splitdrive(parentpath)[1] in [ u'\\', u'/' ]):
      parentpath = gettruecasepath(parentpath) # recurse
  return os.path.join(parentpath, leaf)

def istruecasepath(path): # IMPORTANT: <path> must be a Unicode string
  return gettruecasepath(path) == unicodedata.normalize('NFC', path) 
```

*   `gettruecasepath()`获取存储在指定路径（绝对或相对）路径的文件系统中的大小写精确表示（如果存在）：

    *   输入路径*必须*是*Unicode*字符串：
        *   Python 3.x：字符串本身就是 Unicode - 不需要额外的操作。
        *   Python 2.x：文字：前缀为`u`; 例如，`u'Motörhead'`; str 变量：转换为，例如，`strVar.decode('utf8')`
    *   返回的字符串是 NFC 中的 Unicode 字符串（*组合*范式）。甚至在 OSX 上也会返回 NFC，其中文件系统 (HFS+) 将名称存储在 NFD（*分解*的正常形式）中。
        返回 NFC，因为它比 NFD 更常见，并且 Python 不会将等效的 NFC 和 NFD 字符串识别为（概念上）相同。有关背景信息，请参见下文。
    *   返回的路径保留输入路径的结构（相对与绝对，组件，如`.`和`..`），除了折叠多个路径分隔符，并且在 Windows 上，返回的路径始终`\`用作路径分隔符。
    *   在 Windows 上，驱动器/UNC 共享组件（如果存在）按原样保留。
    *   如果`OSError`路径不存在，或者您无权访问它，则会引发异常。
    *   *如果您在区分大小写*的文件系统上使用此函数，例如在带有 ext4 的 Linux 上，它实际上会降级为指示输入路径是否以指定的确切大小写存在。
*   `istruecasepath()`用于`gettruecasepath()`将输入路径与存储在文件系统中的路径进行比较。

*警告*：由于这些函数需要检查输入路径（如指定）每个级别的所有目录条目，它们会很*慢*- 无法预测，因为性能将对应于检查的目录包含的项目数量。继续阅读背景信息。

* * *

## 背景

### 原生 API 支持（缺乏）

奇怪的是 OSX 和 Windows 都没有提供*直接*解决这个问题的原生 API 方法。

虽然[在 Windows 上，您可以巧妙地结合两种 API 方法来解决问题](https://stackoverflow.com/a/2114975/45375)，但在 OSX 上，我所知道的没有替代方案，即如上所述，在检查的路径的每一级上，目录内容的枚举速度非常慢，无法预料。

### Unicode 范式：NFC 与 NFD

**HFS+（OSX 的文件系统）以*分解*的Unicode 形式 (NFD) 存储文件名，这在将此类名称与大多数编程语言中的内存中 Unicode 字符串进行比较时会导致问题，这些语言通常采用*组合*的Unicode 形式 (NFC)。**

例如，您在*源代码*`ü`中指定为*文字*的具有非 ASCII 字符的路径将表示为*单个*Unicode 代码点，; 这是**NFC**的一个示例：“C”代表*组成*，因为字母基础字母及其变音符号（组合分音符号）形成一个*字母*。**`U+00FC`***`u``¨`*****

 *****相比之下，如果您将`ü`其用作 HFS+*文件名*的一部分，它将被转换为**NFD**形式，从而产生*2 个*Unicode 代码点：基本字母`u`( `U+0075`)，然后是组合分音符号 ( `̈`, `U+0308`) 作为*单独*的代码点；'D' 代表*decomposed*，因为字符被分解为基本字母及其相关的变音符号。

尽管 Unicode 标准认为这 2 种表示（规范）*等效*，但大多数编程语言，包括 Python，*都不*承认这种等效性。
在 Python 的情况下，您必须使用`unicodedata.normalize()`将两个字符串转换为相同的形式，然后再进行比较。

（旁注：Unicode*正常形式与 Unicode**编码*是分开的，尽管不同数量的 Unicode 代码点通常也会影响编码每种形式所需的*字节*`ü`数。在上面的示例中，单代码点(NFC) 需要*2 个字节*来以 UTF-8 ( `U+00FC`-> `0xC3 0xBC`) 编码，而双码点`ü`(NFD) 需要*3 个字节*（`U+0075`->`0x75`和`U+0308`-> `0xCC 0x88`））。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T04:24:05.603

继 omz 的帖子之后——这样的事情可能会奏效：

```
import os

def getcase(filepath):
    path, filename = os.path.split(filepath)
    for fname in os.listdir(path):
        if filename.lower() == fname.lower():
            return os.path.join(path, fname)

print getcase('/usr/myfile.txt') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T04:50:39.240

这是我的一个疯狂想法。免责声明：我对文件系统知之甚少，无法考虑边缘情况，因此仅将其视为碰巧起作用的东西。一次。

```
>>> !ls
A.txt   b.txt
>>> inodes = {os.stat(x).st_ino: x for x in os.listdir(".")}
>>> inodes
{80827580: 'A.txt', 80827581: 'b.txt'}
>>> inodes[os.stat("A.txt").st_ino]
'A.txt'
>>> inodes[os.stat("a.txt").st_ino]
'A.txt'
>>> inodes[os.stat("B.txt").st_ino]
'b.txt'
>>> inodes[os.stat("b.txt").st_ino]
'b.txt' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T04:14:08.507

您可以使用类似的东西`os.listdir`并检查列表是否包含您要查找的文件名。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-21T12:36:19.757

这个答案只是一个概念证明，因为它不会尝试转义特殊字符、处理非 ASCII 字符或处理文件系统编码问题。

从好的方面来说，答案不涉及循环遍历 Python 中的文件，并且它正确地处理检查导致最终路径段的目录名称。

该建议基于以下观察结果（至少在使用 bash 时），`/my/path`当且仅当`/my/path`以该确切大小写存在时，以下命令才能找到没有错误的路径。

```
$ ls /[m]y/[p]ath 
```

（如果括号被排除在任何路径部分之外，那么该部分将不会对大小写的变化敏感。）

这是基于此想法的示例函数：

```
import os.path
import subprocess

def does_exist(path):
    """Return whether the given path exists with the given casing.

    The given path should begin with a slash and not end with a trailing
    slash.  This function does not attempt to escape special characters
    and does not attempt to handle non-ASCII characters, file system
    encodings, etc.
    """
    parts = []
    while True:
        head, tail = os.path.split(path)
        if tail:
            parts.append(tail)
            path = head
        else:
            assert head == '/'
            break
    parts.reverse()
    # For example, for path "/my/path", pattern is "/[m]y/[p]ath".
    pattern = "/" + "/".join(["[%s]%s" % (p[0], p[1:]) for p in parts])
    cmd = "ls %s" % pattern
    return_code = subprocess.call(cmd, shell=True)
    return not return_code 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-25T05:43:59.090

您也可以尝试打开该文件。

```
 try:open('test', 'r')
    except IOError: print 'File does not exist' 
```*****

# actionscript-3 - 带有 Nape 物理的 AS3：如何找到从点到物体的切线？

> ID：14515077
> 
> 赞同：2
> 
> 时间：2013-01-25T03:55:28.240
> 
> 标签：actionscript-3, game-physics, raycasting, spatial-query

简短的问题：在 Nape 中是否有任何简单的方法来计算与 Nape 身体对象或形状的切点，给定身体外部的一个点？

我想做的是创建蠕虫式的绳索物理。它基本上用作可扩展的线/距离接头，当它与关卡几何体接触时会自动分成段。我通过从最近的枢轴点进行光线投射来做到这一点；如果发生碰撞，我从碰撞点偏移几个像素，创建一个新的绳段，并将该点作为新的枢轴。如果我的角色在一个尖角附近摆动，我会从那个点重铸，必要时循环，直到我清楚关卡几何。

考虑到我缺乏经验，它的效果非常好，但有一点化妆品故障。绳子不会“紧紧地”缠绕在喇叭形的突出物上。很容易看出为什么会这样。请参考下图。

![在此处输入图像描述](../Images/f5722bda42ff921a6bd5f0c566aef2e2.png)

每次我以 60 帧/秒的速度踏入 Nape 世界时，我都会投射一道光线。图 1 显示了两个示例射线投射之间的差异。角色（未图示）位于线的末端，并且他一步下落到相对于枢轴的悬崖“边缘”，因此碰撞点未达到所需的切点。

图2是我最终得到的。通过从表面偏移和重铸，环绕逻辑仍然有效，但它看起来并不“紧绷”。

我想要的是类似于图 3 的东西，它修正了角度以找到与身体的实际切点并由此创建新的枢轴。

我计划的后备是通过小增量偏移光线投射的角度并重新投射，直到我不再撞击关卡几何体，然后备份一个并将其用作碰撞点。即使这样也可能需要比图 2 中“弯曲”更少的计算，但我仍然想知道：有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T15:38:12.780

对不起，我没有发表评论，但我不需要积分:)

我以前使用过类似的东西（不完全相同），我认为要走的路是保存每次施法的点，根据 y 轴获得与起点差异最大的那个（如果绳子走了向上，然后你得到最小的点，`y`反之亦然（绳子从起点向下）。然后你可以固定角度指向这个特定的点，标记为“边缘”。稍后您可以继续使用常见模式，因为绳子会朝另一个方向移动（就像悬崖的边缘一样）。

# node.js - 如何访问 package.json 配置部分？

> ID：14515078
> 
> 赞同：13
> 
> 时间：2013-01-25T03:55:27.980
> 
> 标签：node.js, config

正如我在[https://npmjs.org/doc/config.html中看到的，将](https://npmjs.org/doc/config.html)*package.json*的配置部分暴露给环境变量的一种方法是使用`npm start`命令。

我发现将*package.json*文件加载为 JSON 并在此之后导出*配置*属性的模块。但最简单的方法是将所有配置定义为模块并`require`按需定义。我对吗？有什么建议么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-25T04:28:34.583

您还可以将整个`package.json`作为模块加载，`require('./package')`整个 JSON 对象将是该模块的`exports`，因此您可以这样做`console.log(require('./package').version);`，例如。

# emacs - 在 emacs 模式行中截断任务名称

> ID：14515079
> 
> 赞同：5
> 
> 时间：2013-01-25T03:55:44.313
> 
> 标签：emacs, org-mode

当 org-clock-in 任务时，任务名称将显示在模式行上。但是我的一些任务名称太长了。是否有任何功能可以截断模式行中的显示名称？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:49:44.920

您可以根据自己的喜好调整它：

```
(setq org-clock-heading-function
      (lambda ()
        (let ((str (nth 4 (org-heading-components))))
          (if (> (length str) 6)
              (substring str 0 6))))) 
```

# python - python（和AWS）：按日期排序S3键列表时遇到问题

> ID：14515080
> 
> 赞同：0
> 
> 时间：2013-01-25T03:55:47.240
> 
> 标签：python, sorted

我有以下python代码块

```
b = c.get_bucket(bucket)
lst = []
for prfx in prefix_list:
    for f in b.list(prefix=prfx):
        lst.append(f)
sorted(lst, key=lambda kk: kk.last_modified, reverse=True) 
```

`lst`基本上，我从另一个前缀列表() 创建 AWS S3 键列表 ( `prefix_list`)，然后尝试按键的最后修改日期对该列表进行排序。我可能在这里犯了一些基本的 Python 错误，因为`lst`没有排序。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:57:15.960

确保获取返回值。sorted() 返回一个新列表，它不会修改现有列表。

```
lst = sorted(lst, key=lambda kk: kk.last_modified, reverse=True) 
```

# php - 如何更改 wamp 服务器的端口以及如何创建第一个应用程序

> ID：14515084
> 
> 赞同：11
> 
> 时间：2013-01-25T03:56:31.843
> 
> 标签：php, port, wamp

我刚刚安装了 wamp 服务器，但是当我尝试访问 localhost 时，它无法访问我认为这是端口的问题，因为 wamp 默认使用端口 80。之后我想创建一个动态网站，我过去从未使用过 php，所以我想知道如何使用...谢谢

我在另一个系统中尝试过。我安装了 wamp 并看到那里可以访问 localhost 但是当我通过调制解调器 wamp 服务器连接到互联网时停止工作。我对这个端口设置感到非常困惑。我从我的笔记本电脑上拔下局域网电缆并重新启动系统然后尝试即使它不工作..我已经更改了 httpd.conf 文件但它对我没有帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T04:34:16.377

首先更改`Listen 80`为`Listen PORT YOU WANT`Apache httpd.conf 文件。

现在在同一个文件中搜索 vhost 这个词你会发现它三次，只需从语句的开头删除 # 取消注释它（你会在一个语句中找到它两次）。

现在打开里面的 http-vhosts.conf 文件`C:\wamp\bin\apache\Apache2.2.17\conf\extra\`并粘贴下面的代码修改端口，你就完成了。

使用它，您可以将多个端口设置到不同的目录。

```
<VirtualHost *:5>
   ServerAdmin webmaster@dummy-host2.localhost
   DocumentRoot "C:/wamp/www"
           <Directory "C:/wamp/www">
                       Options Indexes FollowSymLinks
                       AllowOverride all
                       Order allow,deny
                       Allow from all
           </Directory>
   #ServerName dummy-host2.localhost
   #ErrorLog "logs/dummy-host2.localhost-error_log"
   #CustomLog "logs/dummy-host2.localhost-access_log common"

</VirtualHost>
```

只需将`<VirtualHost *:5>`其更改为您需要的任何端口并重新启动 Apache 和所有其他服务。

现在干杯。享受

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T04:13:33.487

要更改 wamp 服务器端口号：

```
1\. Go to \wamp\bin\apache\apache2.2.8\conf
2\. Open  “httpd.conf” in notepad
3\. Find “Listen 80” and Change it to your desired port
   (for example : Listen 8081)
4\. Save it and close it . 
```

重新启动 wamp 服务器并检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T04:17:24.677

让你开始你的

`C:/wamp/www`目录在那里，您将把所有文件都放在您自己决定文件的结构上。

如果您使用的是 Skype，请在打开 Skype 之前尝试运行 wampserver，Skype 使用端口 80 与默认 wampserver 端口一样。在使用 Skype 之前打开 wampserver。没有问题，也无需更改 PORT。不仅Skype，其他程序也使用PORT 80，在做任何事情之前先打开wamp，然后再其他程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T04:03:04.707

使用谷歌后，我找到了你的答案。

打开 httpd.conf 并找到以下行： Listen 80

80 是端口号，因此请将其更改为您想要的任何数字。

[更多链接可以帮助您](https://www.google.com/search?q=change+default+port+of+wamp&aq=f&oq=change+default+port+of+wamp&aqs=chrome.0.57j0.5978&sourceid=chrome&ie=UTF-8#hl=en&tbo=d&sclient=psy-ab&q=change+default+port+of+wamp+server&oq=change+default+port+of+wamp+server&gs_l=serp.3..33i29.4428.5590.0.5730.7.7.0.0.0.0.109.714.3j4.7.0.les%3B..0.0...1c.1.Xr0fTaWIuEY&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.41524429,d.aWc&fp=99bbb1d5e9938d35&biw=1006&bih=647)

# c# - 如何在 ac# 控制台应用程序（类似 powershell）中管道自定义类型？

> ID：14515089
> 
> 赞同：1
> 
> 时间：2013-01-25T03:57:00.473
> 
> 标签：c#, powershell, command-line, pipe

我知道我可以使用简单的 Console.WriteLine 和 Console.ReadLine 方法进行输出/输入，但是这样我在进程之间传递了一个字符串（必须对其进行解析以重新创建对象）。

我想知道的是我是否能够管道我自己的类型，以便我可以在命运过程中轻松检索它们。我期望的是做类似的事情：

```
myProgram | get-member 
```

并且输出类似于 MyNameSpace.MyType 及其成员列表（目前它显示 typeName System.String）

这在控制台应用程序中是否可行，还是我只能使用 cmdlet 来实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:56:06.743

最简单的方法是使用序列化将您希望从一个发送到另一个的对象转换为可管道格式以将它们从一个发送到另一个。但是，这样做有一些限制：

首先，您来回传递的类型的实现必须可供所有可能处理它们的应用程序使用。（这对 PowerShell 来说不是问题，因为所有 cmdlet 都在同一个进程中运行。）因此，最简单的方法是在所有控制台应用程序都引用的类库中创建要传递的类型。这个类，例如，我把我的示例共享库：

```
[Serializable]
public class TestClass
{
    public string Test { get; set; }

    public string TestAgain { get; set; }

    public string Cheese { get; set; }
} 
```

[Serializable] 属性将其标记为可序列化，这对于简单的类来说已经足够了。对于更复杂的类，可能需要更多 - 请参阅 MSDN，从这里开始：http: [//msdn.microsoft.com/en-us/library/4abbf6k0 (v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/4abbf6k0(v=VS.71).aspx)

然后，在您要从中传输的程序中，将其序列化为 XML 并将其写出到控制台，如下所示：

```
using System;
using System.IO;
using System.Text;
using System.Xml.Serialization;

using Shared;

namespace Out
{
    class Program
    {
        static void Main(string[] args)
        {
            // Create the object.
            TestClass test = new TestClass();
            test.Test = "Monkey";
            test.TestAgain = "Hat";
            test.Cheese = "Fish";

            // Serialize it.
            XmlSerializer serializer = new XmlSerializer(typeof (TestClass));
            StringBuilder sb = new StringBuilder();
            using (var writer = new StringWriter(sb))
                serializer.Serialize(writer, test);

            // And write it to console.
            Console.WriteLine(sb.ToString());
        }
    }
} 
```

运行时，它会输出以 XML 编码的实例属性，因此：

```
<?xml version="1.0" encoding="utf-16"?>
<TestClass xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http
://www.w3.org/2001/XMLSchema">
  <Test>Monkey</Test>
  <TestAgain>Hat</TestAgain>
  <Cheese>Fish</Cheese>
</TestClass> 
```

然后，在您的接收应用程序中，您反转该过程，从控制台读取，因此：

```
using System;
using System.IO;
using System.Xml.Serialization;

using Shared;

namespace In
{
    class Program
    {
        static void Main(string[] args)
        {
            // Read the input XML; until complete.
            string input = Console.In.ReadToEnd();

            TestClass passedIn;

            // Deserialize it.
            var serializer = new XmlSerializer(typeof (TestClass));
            using (var reader = new StringReader(input))
                passedIn = (TestClass) serializer.Deserialize(reader);

            // Do something with the object.
            Console.WriteLine("Test:      {0}", passedIn.Test);
            Console.WriteLine("TestAgain: {0}", passedIn.TestAgain);
            Console.WriteLine("Cheese:    {0}", passedIn.Cheese);
        }
    }
} 
```

瞧！

```
C:\Working\PipeExample\In\bin\Debug>..\..\..\Out\bin\Debug\Out.exe | in
Test:      Monkey
TestAgain: Hat
Cheese:    Fish 
```

当然，您将需要一些额外的代码，以确保接收应用程序知道预期的类型 - 或者可以处理它得到的任何东西 - 并且由于中间 XML 不是很容易被人类解析，所以您需要一种确保发送应用程序知道它何时与管道对话以及何时与人类对话的方法。在 .NET 4.5 中，Console.IsOutputRedirected() 方法将为您执行此操作（[http://msdn.microsoft.com/en-us/library/system.console.isoutputredirected%28v=VS.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.console.isoutputredirected%28v=VS.110%29.aspx)） ，但在早期版本中，以编程方式获取此信息并不容易。

但这是事情的核心，查看 XmlSerializer 及其周围的文档应该会给你剩下的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:46:28.640

为什么不编写自己的 cmdlet 而不是控制台程序？

PowerShell 模块可以是由用 C# 编写的 cmdlet 组成的二进制模块（DLL 程序集）。查看[安装 Windows PowerShell SDK](http://msdn.microsoft.com/en-us/library/windows/desktop/ff458115%28v=vs.85%29.aspx)。

# java - 检查geoFence中的地理点和Java中的距离

> ID：14515093
> 
> 赞同：2
> 
> 时间：2013-01-25T03:57:13.360
> 
> 标签：java, algorithm, google-maps, geolocation

我是 Java 新手。我创建了一个圆形的地理围栏。我知道中心（纬度，经度）点和半径（以米为单位）。我想检查一个地理点（即纬度，经度）是否在这个围栏内，如果是真的，我想找到那个地理点到中心点之间的距离。我怎么能在java中做到这一点。在 mysql 中有一个用于执行此操作的查询

```
 SELECT tripid,create_time, ( 6371 * acos( cos( radians(8.475316) ) * cos(    
radians(lattitude ) ) * cos(
radians( longitude ) - radians(76.962528) ) + sin( radians(8.475316) ) * sin(  
 radians( lattitude ) ) ) ) AS
 distance
FROM pack_history where speed<5 and tripid=685  HAVING distance < 0.10 ORDER BY       
create_time desc LIMIT 0 ,100; 
```

我如何在 Java 中完成类似的功能？ ![在此处输入图像描述](../Images/c8654cc4dda56f820344c7902f46438c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T01:14:52.767

您只需要一种计算两个纬度/经度坐标之间距离的方法。（在 SO 或互联网上搜索，这很容易找到）。
如果距离 < r，则该点在圆内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-01T12:14:36.523

> 此功能是计算两个纬度/经度坐标之间的**距离**

```
private double distance(double lat1, double lon1, double lat2, double lon2, char unit) {
  double theta = lon1 - lon2;
  double dist = Math.sin(deg2rad(lat1)) * Math.sin(deg2rad(lat2)) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.cos(deg2rad(theta));
  dist = Math.acos(dist);
  dist = rad2deg(dist);
  dist = dist * 60 * 1.1515;
  if (unit.equals("K")) {
    dist = dist * 1.609344;
  } else if (unit.equals("N")) {
  dist = dist * 0.8684;
  }
  return (dist);    
} 
```

> 此函数将十进制度转换为弧度

```
private double deg2rad(double deg) {
  return (deg * Math.PI / 180.0);
} 
```

> 此函数将弧度转换为十进制度

```
private double rad2deg(double rad) {
  return (rad * 180.0 / Math.PI);
} 
```

> 如果你想以**英里**为单位传递**M**

```
system.println(distance(32.9697, -96.80322, 29.46786, -98.53506, "M") + " Miles\n"); 
```

> 如果你想以**公里**为单位传递**K**

```
system.println(distance(32.9697, -96.80322, 29.46786, -98.53506, "K") + " Kilometers\n"); 
```

> 如果你想在**海里**通过**N**作为单位

```
system.println(distance(32.9697, -96.80322, 29.46786, -98.53506, "N") + " Nautical Miles\n"); 
```

# node.js - Node-Webkit 通过导出在节点中共享数据

> ID：14515105
> 
> 赞同：0
> 
> 时间：2013-01-25T03:59:20.233
> 
> 标签：node.js, node-webkit

如果我这样称呼的话，我最近正在尝试使用 Node-Webkit；

```
exports.name = function() {
    console.log('My name is Uğur');
}; 
```

Node-WebKit 渲染器抛出错误：

```
"Uncaught ReferenceError: exports is not defined" 
```

我无法理解，它是由 node-webkit 还是 node.js 本身引起的。自从; 'node test.js' 没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:30:32.393

您需要在 Node 的上下文（而不是 WebKit 的上下文）中运行它。为此，请在清单中的“node-main”中指定脚本。

这是一个例子：

index.js：

```
exports.callback0 = function (win) {
} 
```

索引.html：

```
<body onload="process.mainModule.exports.callback0(window)"> 
```

包.json：

```
{
  "name": "nw-demo",
  "node-main": "index.js",
  "main": "index.html"
} 
```

高温高压

# javascript - Javascript书签没有改变css？

> ID：14515114
> 
> 赞同：-1
> 
> 时间：2013-01-25T04:00:31.550
> 
> 标签：javascript, bookmarklet

当我去谷歌并尝试这个书签时，它不起作用？请问有什么帮助吗？

```
javascript:void(document.getElementById('lga').style.display == 'none') 
```

`lga`是我通过检查元素找到的徽标 id。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:03:13.933

您正在使用`==`which 是比较运算符。您只需要一个`=`将值设置为`style.display`to的单个`none`。

```
javascript:void(document.getElementById('lga').style.display = 'none') 
```

# c# - 在没有 Visual Studio 的情况下执行邮件阅读器程序

> ID：14515117
> 
> 赞同：1
> 
> 时间：2013-01-25T04:00:57.993
> 
> 标签：c#, .net, visual-studio-2008, outlook

参考我[之前的问题](https://stackoverflow.com/questions/11098549/how-to-open-outlook-received-and-read-email)，我已经编写了我的程序，当我使用 VS2008 运行它时，它运行得非常好。

我还有两个问题：

**1.**当我运行我的程序时，我想和你们核实一下，所有邮件都以 xml 文件的形式出现在 VS 输出中，***但我从来没有在输出中打印它们。***对所有人来说都是正常的还是我需要添加一些东西来删除它。我觉得我的电脑需要很长时间才能在输出中显示邮件。

**2.**我的第二个问题是，当我只想单独使用 exe 文件（通过 exe 文件而不是 VS 运行程序）时，我收到以下错误并且程序挂起并关闭。

> “MailReader 遇到问题需要关闭。对于给您带来的不便，我们深表歉意。”

正如我上面提到的，这个程序在 VS 中运行良好。

我复制了我阅读邮件的部分代码并将它们拆分以供您参考。

```
public void ReadMail()
        {
            ServicePointManager.ServerCertificateValidationCallback += delegate(object sender,
                                                                                X509Certificate certificate,
                                                                          X509Chain chain,
                                                                                SslPolicyErrors sslPolicyErrors) { return true; };
            try
            {
                ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
                service.TraceEnabled = true;
                service.Credentials = new WebCredentials(_username, _password); //Modify this
                service.Url = new Uri(_exchange); //Modify this
                service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);

                service.Url = new Uri(_exchange);
                service.TraceEnabled = true;
                service.Credentials = new WebCredentials(_username, _password); //Modify this
                service.Url = new Uri(_exchange);
                //SearchFilter to get unreaded messages only.
                SearchFilter sf = new SearchFilter.SearchFilterCollection(LogicalOperator.And, new SearchFilter.IsEqualTo(EmailMessageSchema.IsRead, false));
                ItemView itemview = new ItemView(Int16.MaxValue);

                //DateTime searchdate = new DateTime(2012, 7, 6); //Year, month, day
                SearchFilter greaterthanfilter = new SearchFilter.IsGreaterThan(ItemSchema.DateTimeSent, Convert.ToDateTime(startDate));
                SearchFilter lessthanfilter = new SearchFilter.IsLessThan(ItemSchema.DateTimeSent,Convert.ToDateTime(finishDate));
                SearchFilter[] f = { greaterthanfilter, lessthanfilter };
                SearchFilter filter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, f);
                //Folder folder = Folder.Bind(this.m_Service, WellKnownFolderName.MsgFolderRoot); //Or the folder you want to search in
                //FindItemsResults<Item> results = folder.FindItems(filter, new ItemView(1000));

                FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.SentItems,filter, itemview);

                Action action = () => fr.setText(findResults.Items.Count + "mails need to analysis from "+startDate +" to "+ finishDate);
                fr.Invoke(action, null);

                action = () => fr.setMaximumProgressBar(findResults.Items.Count);
                fr.Invoke(action, null);

                dmd = new List<DailyMailDetails>();

                foreach (Item item in findResults.Items)
                {
                    string messageDate = "Error in Date";
                    string messageSubj = "Error in Subject";
                    int index = 0; 
                    try
                    {
                        PropertySet propertySet = new PropertySet(BasePropertySet.FirstClassProperties, ItemSchema.DateTimeSent, ItemSchema.Body, ItemSchema.Subject);
                        propertySet.RequestedBodyType = BodyType.Text;
                        EmailMessage message = EmailMessage.Bind(service, item.Id, propertySet);

                        string temp = startSign.ToUpper();
                        int start = message.Body.Text.ToUpper().IndexOf(temp) + temp.Length;
                        int end = message.Body.Text.ToUpper().IndexOf(finishSign.ToUpper());
                        int len = end - start;
                        string text = message.Body.Text.Substring(start, len);

                        index = findDmdIndex(message.DateTimeSent.ToShortDateString().ToString());

                        if (index == -1)
                        {
                            dmd.Add(new DailyMailDetails(message.DateTimeSent.ToShortDateString().ToString(), (List<PeopleSigniture>)Extensions.Clone<PeopleSigniture>(OrginallistPeopleSign)));
                            index = dmd.Count - 1;
                        }
                        bool signExist = false;

                        for (int i = 0; i < listPeopleSign.Count; i++)
                            if (text.ToUpper().Contains(dmd[index].peopleSign[i].Signiture.ToUpper()))
                            {
                                dmd[index].peopleSign[i].addResponse(message.DateTimeSent.ToString(), message.Subject.ToString());
                                signExist = true;
                                break;
                            }
                        messageDate = message.DateTimeSent.ToString();
                        messageSubj = message.Subject.ToString();
                        if (!signExist)
                            dmd[index].peopleSign[dmd[index].peopleSign.Count - 2].addResponse(message.DateTimeSent.ToString(), message.Subject.ToString());
                    }
                    catch (Exception ex)
                    {
                        dmd[index].peopleSign[dmd[index].peopleSign.Count - 1].addResponse(messageDate, messageSubj);
                    }

                    action = () => fr.increasePrograss();
                    fr.Invoke(action, null);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Class: Mail Function:ReadMail" + ex.Message);
            }
            Action action2 = () => fr.setText(ToString(true),dmd);
            fr.Invoke(action2, null);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T01:55:28.317

对于问题 #1 - 您可能正在查看 XML 输出，因为您[启用了 EWS 跟踪](http://msdn.microsoft.com/en-us/library/exchange/dd633655%28v=exchg.80%29.aspx)。您需要完全设置[`ExchangeService.TraceEnabled`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.exchangeservicebase.traceenabled%28v=exchg.80%29.aspx)或`false`注释掉它。（*您还需要清理许多重复的代码行。*）

```
service.TraceEnabled = false; 
```

对于问题 #2 - 您需要确定实际的 .NET 异常。没有这个 - 我们无法为您提供进一步的帮助。它可能因无数原因而崩溃。请提供堆栈跟踪。

# webdriver - 我如何等待特定帧加载？我正在使用 selenium webdriver 2.24

> ID：14515120
> 
> 赞同：12
> 
> 时间：2013-01-25T04:01:15.307
> 
> 标签：webdriver, frames

我使用 webdriver 支持的 selenium 来等待特定帧的加载。因为在某些情况下，切换到特定帧会失败，因为该帧尚未加载。我使用的代码是

```
selenium.waitForFrameToLoad(frameJCLeft, strTimeOut);
driver.switchTo().defaultContent();
driver.switchTo().frame(frameJCLeft); 
```

请让我知道是否有一种方法，因为我打算消除支持硒的 webdriver 并且只使用 webdriver api

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-25T04:49:31.840

您可以使用 Web Driver Wait 和 Expected Condition 类来实现这一点。

试试这个代码。

```
 WebDriverWait wait = new WebDriverWait(driver,10);
  wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(frameName); 
```

上面的代码将等待一个`given frame up to 10 seconds`. 如果该帧可用，则它切换到给定的帧。否则，它会抛出一个`TimeoutException`.

时间限制取决于应用程序和用户的意愿。

欲了解更多信息 [http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#frameToBeAvailableAndSwitchToIt(java.lang.String)](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#frameToBeAvailableAndSwitchToIt(java.lang.String))

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T04:15:26.347

我会改用 Selenium 2，并使用 RemoteWebDriver 而不是“WebDriver 支持的 selenium 1.0 东西”。然后，我会玩[WebDriver.TargetLocator](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.TargetLocator.html)。

# mysql - 忽略过程中的 MySQL WHERE 条件

> ID：14515125
> 
> 赞同：3
> 
> 时间：2013-01-25T04:01:52.630
> 
> 标签：mysql, sql, select, procedure

我正在尝试用参数制作一个程序。但是当我在某种`WHERE`条件下使用它们时，就好像从来没有存在过一样。他们只是被忽略了。

```
DELIMITER //

DROP PROCEDURE IF EXISTS p //

CREATE PROCEDURE p (IN player TEXT, OUT num INT)
BEGIN
  SELECT COUNT(*) INTO num FROM `sg_playerstats` WHERE `player` = player; 
END

//

DELIMITER ; 
```

Num 被正确填写，但无论我在播放器中输入什么，结果总是 66。（表格有 66 行！）

我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T04:02:57.000

重命名参数，

```
CREATE PROCEDURE p (IN _player TEXT, OUT num INT)
BEGIN
  SELECT COUNT(*) INTO num FROM `sg_playerstats` WHERE `player` = _player; 
END 
```

你得到这个的原因是因为它碰巧有名字冲突。

# smalltalk - 如何从 Ordered 集合中获取 Text 中的所有项目

> ID：14515127
> 
> 赞同：4
> 
> 时间：2013-01-25T04:02:24.113
> 
> 标签：smalltalk, pharo

我得到的简单问题

```
|list string|
list:= #('ab' 'efghij' 'lmnopqrst'). "Ordered collection"
list do:[:each| "string with:each"  i know this is not right how do i add items ]. 
```

我也尝试了流，它返回给我这个“有序集合（'ab''efghij''lmnopqrst'）”

我所需要的只是一个具有

```
'abc efghij lmnopqrst ' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T07:44:25.670

在Pharo你可以做

```
Character space join: list 
```

如果 join: 不可用并且它应该表现良好，那么您可以使用流变体

```
String streamContents: [:stream| 
    list 
        do [:each| stream nextPutAll: each ]
        separatedBy: [ stream nextPut: Character space ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T06:13:34.873

`Object`类定义了一条`#asString`消息，内容如下：

```
"Answer a string that represents the receiver." 
```

所以，你可以这样做：

```
| aList aStringsList |
aList := #('ab' 'efghij' 'lmnopqrst'). "Array"
aStringsList := aList collect: [ :each | each asString ] 
```

并且`aStringsList`将是通过调用in 每个's 成员返回`Array`的s 中的一个。`String``#asString``aList`

如果您想将所有这些连接在一个单一的`String`，您可以使用`#inject:into:`集合的方法，而不是`#collect:`：

```
aList inject: '' into: [ :text :each | text , each asString , ' ' ] 
```

如果你打印出来，你会得到`'ab efghij lmnopqrst '`你想要的:)

# javascript - 如何将数据转换为 JSON

> ID：14515130
> 
> 赞同：1
> 
> 时间：2013-01-25T04:02:45.863
> 
> 标签：javascript, jquery, ajax, json

假设我们有一个文件 (*.csv, *.txt ...)，例如：

```
Name,  Surname,     Age,  Occupation
Gino,  DiNanni,     19,   student
Anna,  Kournikova,  27,   programmer 
```

^(*（我添加这些空格只是为了让它在这里可读）*)

我正在尝试创建一个 JSON（顺便说一句，它是有效的），例如：

```
[
    {
        "gino_dinanni": [
            {
                "age": "19",
                "occupation": "student",
            }
        ]
    },
    {
        "anna_kournikova": [
            {
                "age": "27",
                "occupation": "programmer",
            }
        ]
    }
] 
```

可访问，例如

```
anna_kournikova.age    // 27 
```

到目前为止，我有这个[http://jsbin.com/apapey/2/edit](http://jsbin.com/apapey/2/edit)但这给了我（非常）：

```
[["Age:19","Occupation:student"],["Age:27","Occupation:programmer"]] 
```

我知道如何使用`.toLowerCase()`来创建`anna_kournikova`和填充，但我真的迷失在创建正确的**JSON** “对象”。我会粘贴一些我之前尝试过的更好的例子，但我一怒之下将它们全部删除，现在从头开始，我需要你的建议。可能是我错过了一个简单的细节？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:16:18.197

如果您能够更改 JSON 的标记，这将产生更好的结果，

```
{
    "gino_dinanni": {
        "age": "19",
        "occupation": "student"
    },
    "anna_kournikova": {
        "age": "27",
        "occupation": "programmer"
    }
}; 
```

这样你就可以使用`data.anna_kournikova.age`. 正如其他用户所建议的那样，您的 CSV 应该在服务器端进行解析，您可以使用`jQuery.getJSON( ... )`它来检索它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:17:00.067

[http://jsbin.com/ihivuj/2/edit](http://jsbin.com/ihivuj/2/edit)

我已将其更改为我认为您想要的格式。

如果您想使用真正的`..stringify`JSON 对象，则打印可能不需要。您正在尝试使用一些字符串/数组的混合。

您可以使用括号语法向对象添加元素，但不要将它们视为数组：

```
arr[oneData[0] + oneData[1]][headers[2]] = oneData[2]; 
```

您也不能将大括号语法与键名的连接/变量结合起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:20:26.650

你可以看到这个页面 [http://www.cparker15.com/code/utilities/csv-to-json/](http://www.cparker15.com/code/utilities/csv-to-json/)

Github 中的项目是[https://github.com/cparker15/csv-to-json/issues](https://github.com/cparker15/csv-to-json/issues)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:07:22.043

当然你可以尝试一些元编程，使用 JavaScript :)

```
var json =[{"gino_dinanni": [{"age": "19","occupation": "student",}]},{"anna_kournikova": [{"age": "27","occupation": "programmer",}]}];

document.write(getAge('gino_dinanni'));

function getAge(name){
    return eval("json[0]."+name+"[0].age");
}; 
```

# jquery - 将鼠标悬停在视频或 div 上，在视频上显示 div

> ID：14515138
> 
> 赞同：-2
> 
> 时间：2013-01-25T04:03:23.453
> 
> 标签：jquery, css

我有一个 div，它从数据库中随机抽取内容。内容可以是文本或视频，并保存在 div 中。

我想`Read more`在用户将鼠标悬停在文本或视频上时显示文本，例如下面的视频管理器：

![在此处输入图像描述](../Images/188a9724732073e22d02f0740ba5eb5e.png)

请有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:18:24.657

有很多教程可供您开始搜索，也许本教程可能有助于观看演示[​​http://www.backslash.gr/demos/contenthover-jquery-plugin/#demo1](http://www.backslash.gr/demos/contenthover-jquery-plugin/#demo1)

HTML

```
<img id="d1" src="photos/1.jpg" width="300" height="240" />
<div class="contenthover">
    <h3>Lorem ipsum dolor</h3>
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum pulvinar ante quis augue lobortis volutpat. </p>
    <p><a href="#" class="mybutton">Lorem ipsum</a></p>
</div> 
```

CSS

```
.contenthover { padding:20px 20px 10px 20px; }
.contenthover, .contenthover h3, contenthover a { color:#fff; }
.contenthover h3, .contenthover p { margin:0 0 10px 0; line-height:1.4em; padding:0; }
.contenthover a.mybutton { display:block; float:left; padding:5px 10px; background:#3c9632; color:#fff; -moz-border-radius: 4px; -webkit-border-radius: 4px; border-radius: 4px; }
.contenthover a.mybutton:hover { background:#34742d } 
```

jQuery脚本：

```
$('#d1').contenthover({
    overlay_background:'#000',
    overlay_opacity:0.8
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T04:40:01.647

我认为你可以创建另一个 div 并绝对设置它的位置，然后你可以做你想做的事情。不知道如果我是对的。

# php - 页面到达时停止加载- 无解决方案

> ID：14515139
> 
> 赞同：0
> 
> 时间：2013-01-25T04:04:01.120
> 
> 标签：php, facebook, wordpress, facebook-opengraph

自过去 8 小时以来，我一直面临这个问题，我的鼻子几乎在键盘上......我开始寻找一种解决方案，将代码放在我的 Wordpress 的 header.php 上，用于 facebook og:image。看起来很简单，但是页面在到达代码行时总是停止加载，所以它总是一个没有任何信息的白页。

页面到达时停止加载`<?php echo get_fbimage(); ?>`- 无解决方案

这是行：`<meta property="og:image" content="<?php echo get_fbimage(); ?>"/>`

1-如果我删除那条线或`<?php echo get_fbimage(); ?>`，一切顺利......

2- 即使没有functions.php 上的get_fbimage() 函数，它也不起作用。

这是在线页面：http: [//www.contagiarte.pt/centroformacaoculture/formacao/formacao-fixa/yoga/](http://www.contagiarte.pt/centroformacaocultural/formacao/formacao-fixa/yoga/)

我需要找到一个解决方案来解决这个问题或让 Facebook 拉取每个 wordpress 页面的正确图像的替代解决方案。提前致谢。

这是 header.php 代码的第一部分：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:og="http://opengraphprotocol.org/schema/"
xmlns:fb="http://www.facebook.com/2008/fbml" <?php language_attributes(); ?>>
<head profile="http://gmpg.org/xfn/11">

<title><?php if (is_home()) { ?><?php bloginfo('name'); ?> - <?php bloginfo('description'); ?><?php } else { ?><?php wp_title($sep = ''); ?> - <?php bloginfo('name'); ?><?php } ?></title>
<meta http-equiv="content-type" content="<?php bloginfo('html_type') ?>; charset=<?php bloginfo('charset') ?>" />

<!-- Facebook Open Graph -->
<meta property="fb:app_id" content="155171734506350" />
<meta property="og:title" content="<?php the_title(); ?>"/>
<meta property="og:description" content="<?php
  if ( function_exists('wpseo_get_value') ) {
    echo wpseo_get_value('metadesc');
  } else {
    echo $post->post_excerpt;
  }
?>"/>
<meta property="og:url" content="<?php the_permalink(); ?>"/>
<meta property="og:type" content="<?php
  if (is_single() || is_page()) { echo "article"; } else { echo "website";}
?>"/>
<meta property="og:site_name" content="<?php bloginfo('name'); ?>"/>

<meta property="og:image" content="<?php echo get_fbimage(); ?>"/>

<meta name="description" content="<?php bloginfo('description') ?>" />
<?php if(is_search()) { ?>
<meta name="robots" content="noindex, nofollow" /> 
<?php }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:08:46.707

也许是因为页面没有加载`functions.php`你提到的？

所以也许改变这个：

```
<?php echo get_fbimage(); ?> 
```

对此：

```
<?php echo require_once('functions.php'); get_fbimage(); ?> 
```

我假设`functions.php`该页面与此页面位于同一文件夹中？如果不是，那么您需要将其设置`require_once`为指向`functions.php`

# sql - 如何在数据网格视图上过滤 sql 选择查询的结果

> ID：14515145
> 
> 赞同：0
> 
> 时间：2013-01-25T04:04:37.783
> 
> 标签：sql, vb.net, datagridview, filter

我的表单上有一个 Sql 查询，在我的 tableA 中显示所有到期日期为 2013 年的记录，填充数据网格视图。我还有一个按钮和文本框。

我想做的是在datagrid视图上过滤我的sql查询结果，是否有可能有另一个这样的sql：

`"SELECT caseno, duedate,remarks from (the data on my datagrid view)"`

这是我的数据网格示例：

```
 caseno      duedate       remarks
    1001        1/12/13       passed
    1002        1/22/13       passed
    1003        1/15/13       failed
    1004        1/20/13       none
    1005        1/06/13       failed 
```

当我单击按钮时，我想在我的数据网格上显示所有具有我在文本框中输入的备注的记录。任何人都可以帮助我吗？天呐！试着让它简单:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:12:19.323

解决方案1：

1.  设置datagridview的数据源选择sql查询
2.  仅在文本更改事件发生时绑定数据
3.  在按钮单击事件上对文本框文本进行验证

参考：[如何在数据网格视图中过滤记录并在数据网格中显示选定的记录](https://stackoverflow.com/questions/7786556/how-to-filter-records-in-datagrid-view-and-show-the-selected-record-in-the-datag)

解决方案2：

使用在文本框中输入的数据检查代码项目上的此帖子[以过滤 DataGridview](http://www.codeproject.com/Tips/431281/Filter-DataGridView-with-the-text-entered-in-TextB)

需要注意的重要一点是，您可以将`DataView`'s`.RowFilter`与您在 中输入的参数一起使用`textbox`。然后将该 DataView 绑定`RowSource`到`GridView`. 在上面的示例中，它使用：

```
dataview.RowFilter = "Year(Duedate) = " + textBox1.Text + ";
dataGridView1.DataSource = dataview; 
```

您还可以在 SO 中找到许多其他文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:12:12.350

通过使用 dataview 行过滤器，您可以过滤数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:52:41.213

您用于过滤备注的选择语句：

```
SELECT caseno, duedate, remarks FROM yourTable name where remarks = '"& txt1.text &"' 
```

您还可以制作一个包含备注列表的组合框，并将 txt1.text 替换为 combobox1.text

把它放在datagridview上：（在你的按钮事件中）

```
 'declare your dataset and adapter
    Dim adapter As MySqlDataAdapter
    Dim ds As New DataSet

Try

        connect()
        adapter = New MySqlDataAdapter("SELECT caseno, duedate, remarks FROM yourTable name where remarks = '"& txt1.text &"'", con)
        adapter.Fill(ds)
        yourdatagridview.DataSource = ds.Tables(0)

 Catch ex As Exception
        MsgBox(ex.Message)
    End Try
    con.Close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:57:33.667

[BindingSource.Filter](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.filter.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)怎么样

```
 BindingSource.Filter = "caseno Like '" textBox.Text + "%'" 
```

# iis - Azure VM：无法访问/ping 端口 80

> ID：14515152
> 
> 赞同：6
> 
> 时间：2013-01-25T04:05:04.380
> 
> 标签：iis, azure, webserver, virtual-machine, windows-server-2008-r2

我是 Azure 平台的新手，所以希望这是一个简单的问题：

我目前正在通过 Azure 设置 Sharepoint Web 场。我当前的架构如下所示：

*   用作我的域控制器的 WIN2008 虚拟机。我有域设置和 AD 运行
*   用作我的数据库服务器的 WIN2008 VM SQL2012
*   一个 WIN2008 虚拟机作为我的共享点网络服务器。

所有虚拟机都属于域。

我在 sharepoint Web 服务器上启动并运行了 sharepoint，我可以使用 //localhost 访问 sharepoint 站点。但是，我无法从外部计算机（端口 80）访问这些站点。我无法使用 IP 地址或 *.cloudapp.net 地址 ping 它。我已经确保 80 的防火墙端口对所有配置文件都是开放的。我还在共享点 VM 上为端口 80 设置了一个端点。

有什么想法吗？我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-26T18:49:53.490

详细说明上面的端点参考：

Azure 门户中有一个配置页面，您需要签出以确保正确的端口与 Windows VM 的 Endpoints 页面上的端口一样打开。我认为这同样适用于其他托管操作系统 VM，如 Linux 等。

![查看 VM 的状态页面](../Images/296664f238c035a7208aa0cdc1537f44.png)

当我在 Azure 门户上看到相关 VM 的 Endpoints 选项卡时，我注意到列出了 RDP 和 PowerShell 端口，但没有列出 HTTP。添加之后，我发现我可以在虚拟机上访问我的 IIS 服务器。简而言之，它就像有两个防火墙，一个在您的服务器上，一个在 Azure 门户上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T11:25:58.427

我相信 Azure 会阻止 ping 请求

[http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/7ce4e4c5-c714-492f-8cd6-424c01552195](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/7ce4e4c5-c714-492f-8cd6-424c01552195)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-05T20:57:51.703

看起来你有一个答案，但值得注意的是，你必须为你想要命中的任何东西设置端点。

# perl - 使用带有单个结果类定义的 DBIx::Class 来处理具有相同结构的多个表

> ID：14515153
> 
> 赞同：1
> 
> 时间：2013-01-25T04:05:21.617
> 
> 标签：perl, dbix-class

我有几个（约 100 个并且还在计数）MySQL 表，每个表的条目超过 50M。问题是所有这些表都具有**完全相同的结构**，我想在 DBIx::class 中为它们创建一个结果类。例如，考虑一组具有以下结构的表：

```
CREATE TABLE users_table_1 (
  name TINYTEXT,
  username TINYTEXT
);
CREATE TABLE users_table_2 (
  name TINYTEXT,
  username TINYTEXT
);
... 
```

我希望能够执行以下操作，而不必为每个表创建一个结果类。

```
my $users_1_rs = $schema->resultset('User_table_1');
my $users_2_rs = $schema->resultset('User_table_2');
... 
```

我是 DBIx::Class 的新手，我能想到的唯一两种可能的解决方案是：

1.  对于每个表，使用[DBIx::Class::DynamicSubclass 之](http://search.cpan.org/~syber/DBIx-Class-DynamicSubclass-0.03/lib/DBIx/Class/DynamicSubclass.pm)类的东西从具有所有通用功能的基本结果类中继承。缺点是这样我仍然需要为我的每一个表编写一个类（尽管是一个小类）。
2.  使用[DBIx::Class::Loader](http://search.cpan.org/~blblack/DBIx-Class-Loader-0.21/lib/DBIx/Class/Loader.pm)并从数据库本身自动创建类。但是，我发现这个解决方案对于我的需求来说并不是非常优雅和强大。

有人可以为我指出一个更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:38:52.817

可能有一个用于动态创建表类的*元编程*API 。`DBIx::Class`

代替深入研究（相当大的）文档，这里是一个在普通 Perl*元编程*`DBIx::Class`中创建类的替代示例：

 *```
package MySchema;
use strict;
use warnings;
use parent 'DBIx::Class::Schema';

our @tables = map { 'users_table_' . $_ } 1..2;

require DBIx::Class::Core;

# build table classes for users_tables_*
for my $table (@MySchema::tables) {
    my $t = "MySchema::$table";
    {
        no strict 'refs';
        @{$t . '::ISA'} = qw/DBIx::Class::Core/;
    }
    $t->table($table);
    $t->add_columns(qw/name username/);
}

__PACKAGE__->load_classes(@MySchema::tables);

1; 
```

在我的简单测试中，以上对我有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:37:38.640

我建议在搜索功能中使用“from”参数：

```
...resultset('TableA')->search({}, { from=>'TableB'}); 
```*

# python - 从网站自动收集数据到我的数据库？

> ID：14515155
> 
> 赞同：0
> 
> 时间：2013-01-25T04:05:30.380
> 
> 标签：python, django, webfaction

我有一个基于 Django 的网站，使用 Webfaction 上托管的 PostgreSQL 数据库。我通常从另一个网站手动收集我的数据库的数据（复制粘贴到文本文件中），该网站在 HTML 表中列出了单个网页上的所有数据。

至于用 Python 自动收集数据，我猜我应该使用 html5lib 或 Scrapy 之类的东西来编写一个脚本来加载网页，找到我想要的 HTML 表，从中提取数据，将其格式化为 JSON ，然后使用

```
manage.py loaddata fixturename.json 
```

将我的数据加载到我的数据库中。不过，我的问题是，如何让这个脚本每天在 Webfaction 的服务器上自动运行一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:08:45.527

您可以使用[cron](http://en.wikipedia.org/wiki/Cron)来安排任务。

您的 crontab 文件可能如下所示：

```
# Minute   Hour   Day of Month       Month          Day of Week        Command    
# (0-59)  (0-23)     (1-31)    (1-12 or Jan-Dec)  (0-6 or Sun-Sat)                
    0        1          *             *               *           /usr/bin/python manage.py loaddata fixturename.json 
```

（或者你可以用`@daily /usr/bin/python manage.py loaddata fixturename.json`每晚午夜跑步）

请参阅 webfaction 文档：[http ://docs.webfaction.com/software/general.html#scheduling-tasks-with-cron](http://docs.webfaction.com/software/general.html#scheduling-tasks-with-cron)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:08:41.207

您可以 YQL 为您报废网站并以 json 格式返回结果。我广泛使用 YQL 为我的应用程序获取数据。它速度很快，您的服务器不必为此承担负载。

[http://developer.yahoo.com/yql/](http://developer.yahoo.com/yql/)

要每天运行一次脚本，您可以尝试将其添加到 cron 作业中

[http://docs.webfaction.com/software/general.html#scheduling-tasks-with-cron](http://docs.webfaction.com/software/general.html#scheduling-tasks-with-cron)

[http://garrett.im/django/sysadmin/2011/10/03/cron-django-webfaction.html](http://garrett.im/django/sysadmin/2011/10/03/cron-django-webfaction.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T04:09:13.680

您想运行 CRON 作业。这是让服务器按照您设置的任何时间表运行一次或重复运行作业的一种简单方法。

还要确保您有权屏蔽抓取他人的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T04:20:45.190

Cron 或 celerybeat 是不错的选择。Cron 更简单，celery 给你更多控制权

[http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)

# javascript - Dialog ajax加载动画效果——需要循环延迟，休眠

> ID：14515158
> 
> 赞同：0
> 
> 时间：2013-01-25T04:05:47.903
> 
> 标签：javascript, ajax, caching, sleep

我有一个 jquery ui 对话框，它加载了来自服务器的部分视图的 ajax。该对话框最初以 dialog-ajax-loader 的形式打开，当调用返回时，它会动画/增长到内容的大小。

问题是当对话框内容被缓存或 ajax 调用太快时，我会得到一个不受欢迎的效果，即内容基本上立即加载到 ajax-loader 大小的对话框中，而 ajax 加载器实际上是不可见的，即使是片刻. 不用说，我付出了所有努力让这看起来很棒，我不能满足于此。我需要 ajax 加载器至少显示 1 秒，如果 ajax 调用实际上需要更多时间，则需要更多时间。

我已经在网上搜索了很长时间，试图找到一个不错的 sleep() 函数，但总是有一个禁忌。想在这里发帖以获得一些想法，这是最好的方法。

实际的代码当然要复杂得多，但在概念上是这样的：

```
 var mydialog = $("<div></div>").dialog({...Ajax loader settings...});

 var minimumTimeMet = false;
 setTimeout(function( ){ minimumTimeMet = true; }, 1000);
 mydialog.dialog("open"); //Open ajax loader

 $.ajax({ 
     cache: false,   //This helps but not always, sometimes the request is just too fast
     ....
     success: function(htmlContentResponse){

          while(!minimumTimeMet){
              //sleep here! However, thread cannot be 
              //blocked because the function set in setTimeout
              //above must executed to change minimumTimeMet = true 
              //and break out of this loop. 
          }

          mydialog.html(htmlContentResponse);  
          mydialog.animate({...Animate into new dialog settings ...});
     }

 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:29:32.660

尝试在触发请求之前添加一个标志，同时 setTimeout 为 1000ms 并在回调中清除标志

```
var flag = false;
var response;

setTimeout(function () {
    flag = true;
    if (response) {
        ajaxCallback(response);
    }
}, 1000);

$.ajax({
    cache: false,
    success: function(htmlContentResponse){
        response = htmlContentResponse;
        if (flag)   {
            ajaxCallback(response);
        }
    }
});

function ajaxCallback(htmlContentResponse) {
    // Do something
} 
```

这样，如果 ajax 调用提前结束，它会等到 setTimeout 回调被执行。

# sql-server-2008-r2 - 将网格中的所有 SSRS 报告合并为一份报告

> ID：14515160
> 
> 赞同：0
> 
> 时间：2013-01-25T04:06:02.717
> 
> 标签：sql-server-2008-r2, reporting-services

它应该很简单，应该使用多值参数，但不知道怎么做？

此报告从**GridView****获取参数**我在 asp.net 网页中有一个 gridview，该网页的每一行都有**打印按钮**，用于为该行打印此报告。 现在，表格中有多少**行就有****多少报告**。---[这部分完成] 那么，如何**将所有这些报告**合并为一个报告

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:54:32.487

您可以为每个报告添加一个子报告。您只需创建一个新报表并开始在每一行中插入子报表。

检查此文档：

[http://msdn.microsoft.com/en-us/library/dd220581.aspx](http://msdn.microsoft.com/en-us/library/dd220581.aspx)

这是给你的一个例子：

1 - 创建一个新报告。然后，您可以向其中添加 tablix，以防您有更多信息，在我的示例中就是这种情况。如果这是您的情况，请不要忘记将数据集添加到该 tablix。

这就是它的样子 ![在此处输入图像描述](../Images/df4dc58652c9b6af9b37c999817fa1e0.png)

每条灰线都是一个子报表。

2 - 要插入子报表，只需右键单击一个单元格并转到`Insert > Subreport`

3 - 右键单击​​您的子`Subreport Properties`报告，从下拉菜单中选择并选择您的报告：

![在此处输入图像描述](../Images/28fd1bd01c367b5732d6c4e45598bdf0.png)

![在此处输入图像描述](../Images/49c23fb5c253f0bbfd157d9805f59fb0.png)

4 - 然后您可以设置子报告将收到的参数：

![在此处输入图像描述](../Images/1bd71dcd21da3313ad09a573cc0740a7.png)

案例 2：如果您不需要 tablix 来获取其他信息，只需在`Rectangle`.

* * *

**更新**

正如我在评论中所说，这是一份报告，我在其中完全按照您的意愿行事：

![在此处输入图像描述](../Images/70cdc8218152095df917be97b7608572.png)

如您所见，子报表是具有其他数据的主报表主体的一部分。

我需要为每条记录重复这些子报表，这就是它的完成方式。

在这里，您可以看到`Id`作为参数传递给我的子报告：

![在此处输入图像描述](../Images/70eba6c1db9e8de937299b30d9be828c.png)

据我了解，这就是你想要的。这样，对于每条记录，它的当前`Id`值都会传递给报告。**使用您提到的“动态”**参数生成报告。******

# c++ - 求二叉树c++的平均值

> ID：14515164
> 
> 赞同：1
> 
> 时间：2013-01-25T04:06:18.823
> 
> 标签：c++, recursion, binary-tree

所以我正在尝试编写一个递归函数来返回 c++ 中值的二叉树的平均值。这是我所拥有的，但不起作用：

```
double avg(bNode* root)
{
    if(!root) return 0;
    int sum = avg(root->left) + avg(root->right) + root->value;
    if(root->left && root->right) return sum/3;
    else if(!root->left && !root->right) return sum;
    else return sum/2;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:14:10.000

这是一个非常简单的示例，可以说明为什么您计算的不是平均值：

```
 10
   /  \
  4    12 
         \
          20 
```

在“12”节点处，平均值为`(12 + 20) / 2 = 16`.

然后在`10`节点处，平均值将为`(4 + 10 + 16) / 3 = 10`。

但是，平均水平确实如此`11.5`。

问题是平均值的平均值不等于一个大的正确平均值。在每个级别，您必须将平均值乘以用于计算它的节点数（即总和），然后才能在下一次平均计算中使用它。

一种更简单的方法可能是计算总和，然后除以树中的节点数。

一种技术的一些**伪代码**是：

```
class accumulator
{
    int sum = 0;
    int count = 0;

    // implement the obvious operator+
};

accumulator avg(bNode* root)
{
    if(!root) return <empty accumulator>
    return <recursive children> + <self>;
}

int main()
{
    accumulator acc = avg(root);
    // ..calculate average..
} 
```

# cryptography - .NET 支持身份验证加密算法？

> ID：14515165
> 
> 赞同：2
> 
> 时间：2013-01-25T04:06:28.387
> 
> 标签：cryptography

首先，我不是在谈论传统的对称或非对称加密——我指的是身份验证加密 (AE) 算法或[EAX](http://en.wikipedia.org/wiki/EAX_mode)或 GCM/ [Galois](http://en.wikipedia.org/wiki/Galois/Counter_Mode)等模式（其中使用对称加密）。我也看到[了这个问题](https://stackoverflow.com/questions/3046535/is-eax-crypto-mode-supported-in-the-net-framework)，但那已经超过 2.5 年了！

那么问题来了：Microsoft 是否已将身份验证加密类作为官方 .NET 框架的一部分发布？我发誓我搜索并没有找到任何东西。所以我想知道他们是否被称为不同的标签或其他东西？

旁注：最好的 AE 模式，OCB，[它的许可证](http://www.cs.ucdavis.edu/~rogaway/ocb/license.htm)在 2 周前就放宽了 :) 好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:41:41.760

你可以使用[bouncy castle c# 很容易地做 GCM](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net/10366194#10366194)，但是微软发布了一个单独的框架[CLR Security](http://clrsecurity.codeplex.com/)，增加了对 gcm 的支持，但它在 3 年内没有看到任何动作。

# perl - 想要过滤最大结果并从包含多个场景的许多结果的表中打印

> ID：14515167
> 
> 赞同：0
> 
> 时间：2013-01-25T04:06:40.097
> 
> 标签：perl

我有一个 CSV 表，其中包含**1024 个自变量**和**25 个相关变量**的合并数据。对于每个自变量（称为 1 .. 1024），我有 10 个不同的结果。我想

1.  为每个自变量选择最佳结果，并且
2.  将包含该信息的行通过管道传输到新的 CSV 文件中。

询问 perl 似乎是一件相当容易的事情，也许对数组的数组进行哈希处理会很简单，但我仍然对如何为这个数据集合实现类似的东西感到困惑。

### 当前代码

从 2009 年开始，我发现了一个关于打印匹配行的[非常有用的问答。](https://stackoverflow.com/questions/1523846/how-can-i-print-a-matching-line-one-line-immediately-above-it-and-one-line-imme)经过一些修补后，它运行得相当好，但仍然存在一些问题：

*   我必须对文件进行预排序，以便我的最大值是每种情况下出现的第一个值。
*   我也错过了获得第一个自变量的最佳结果和
*   在某些情况下，我收到多行返回给我，而不仅仅是最大值。

我相当确定必须有一种更简单的方法来做到这一点，我将非常感谢对我的（抄袭）脚本的任何帮助和/或建设性的批评。

谢谢！

这是我到目前为止所拥有的：

```
#!/usr/bin/perl 
use warnings;
use strict;
unless ($#ARGV == 0) {
  print "USAGE:  get_best.pl  csvfile \n";
  exit;
}
### this is a script to get the best "score"
my $input = $ARGV[0];
my $outfile = "bestofthebest.csv";
if (-e $outfile ) {    
  system "rm $outfile";
}
open(my $fh,'<',"$input") || die "could not open $input"; #try to open input
open (SUMMARY, ">>","$outfile") || die "could not open $outfile"; #open output file for writing
my $this_line = "";
my $do_next = 0;

while (<$fh>) {
  chomp($_);
  my $last_line = $this_line;
  $this_line = $_;
  if ($this_line =~ m/Seq/) {
    print SUMMARY "$this_line\n";next;
  }
  my ($compound,     $rank,     $nnme,     $G1,     ..., $res1,     $res2,     $res3,     $res4,     $res5,     $res6    ) = split(/\s+/, $this_line, 26);
  my ($compound_old, $rank_old, $nnme_old, $G1_old, ..., $res1_old, $res2_old, $res3_old, $res4_old, $res5_old, $res6_old) = split(/\s+/, $last_line, 26);
  foreach ($compound == $compound_old) {
    if (($G1 >= $G1_old)){
      print SUMMARY "$this_line\n";
      print "\n $G1 G1 is >> $G1_old G1_old loop\n";
      print "\n compound is $compound G1 is $G1\n";
      $do_next = 1;
    }
    else {
      $last_line = "";
      $do_next = 0;
    } 
  }
}
close ($fh);
close (SUMMARY); 
```

### 示例输入

这就是输入数据的样子（显然，我省略了一些列和行）

```
10  8   3   -18.08  -1.4    -16.68  -15.94  -2.13   -9.45
11  10  4   -15.2   3.2 -18.4   -18.02  2.82    -5
11  5   4   -15.22  2.71    -17.92  -15.88  0.66    -4.51
11  7   4   -14.06  3.84    -17.89  -16.7   2.64    -5.73
11  4   4   -16.63  0.48    -17.1   -15.75  -0.87   -5.92
11  6   4   -15.21  1.83    -17.04  -18.41  3.21    -7
11  9   4   -15.18  1.82    -17 -16.56  1.38    -7.09
11  8   4   -14.98  1.93    -16.91  -16.78  1.79    -10.81
11  2   4   -18.75  -1.95   -16.8   -17.83  -0.92   -7.35
11  1   4   -19.67  -3.17   -16.5   -16.4   -3.27   -9.01
11  3   4   -16.69  -0.54   -16.14  -16.35  -0.34   -9.17
12  7   4   -19.54  -1.14   -18.41  -17.74  -1.81   -2.79
12  9   4   -19.09  -1.01   -18.08  -16.01  -3.09   -5.56
12  4   4   -19.48  -2.18   -17.3   -16.34  -3.14   -4
12  2   4   -19.86  -2.77   -17.1   -15.97  -3.9    -2.96
12  8   4   -19.49  -2.45   -17.03  -16.39  -3.1    -7.19
12  1   4   -20.28  -3.33   -16.95  -17.12  -3.16   -5.18
12  3   4   -18.78  -1.93   -16.86  -17.81  -0.98   -5.39
12  5   4   -19.63  -2.86   -16.77  -16.41  -3.22   -6.54
12  6   4   -19.81  -3.25   -16.56  -16.53  -3.27   -7.19
12  10  4   -19.39  -2.95   -16.44  -17.42  -1.97   -7.67
13  1   3   -13.05  6.35    -19.4   -18.71  5.66    -6.43
13  8   3   -21.44  -2.32   -19.11  -17.08  -4.36   -1.93
13  3   3   -16 2.94    -18.94  -19.24  3.24    -2.78
13  2   3   -13.79  4.9 -18.7   -17.35  3.56    -4.72
13  6   3   -22.08  -3.4    -18.68  -20.12  -1.96   -6.74
13  9   3   -18.98  -0.32   -18.66  -15.97  -3.01   -3.06
13  7   3   -20.4   -2.08   -18.32  -18.24  -2.17   -5.71
13  5   3   -19.94  -1.62   -18.32  -19.42  -0.52   -7.44
13  10  3   -19.26  -1.25   -18.01  -17.52  -1.74   -5.68
13  4   3   -17.75  -1.33   -16.42  -17.75  0   -9.15
14  9   3   -22.23  -3.43   -18.79  -16.68  -5.55   -3.91
14  5   3   -21.32  -2.95   -18.37  -18.08  -3.24   -6.03
14  7   3   -24.25  -6.29   -17.96  -18.78  -5.47   -9.21
14  6   3   -21.03  -3.14   -17.89  -19.17  -1.86   -10.11
14  4   3   -21.59  -3.93   -17.67  -19.32  -2.28   -6.55
14  1   3   -22.43  -4.79   -17.63  -18.09  -4.34   -5.63 
```

### 电流输出：

```
10  2   3   -10.11  8.94    -19.04  -18.48  8.38    -4.09
11  5   4   -15.22  2.71    -17.92  -15.88  0.66    -4.51
12  7   4   -19.54  -1.14   -18.41  -17.74  -1.81   -2.79
12  6   4   -19.81  -3.25   -16.56  -16.53  -3.27   -7.19
13  8   3   -21.44  -2.32   -19.11  -17.08  -4.36   -1.93
14  9   3   -22.23  -3.43   -18.79  -16.68  -5.55   -3.91
15  10  4   -21.51  -1.51   -20 -17.63  -3.88   -2.45
16  5   4   -17.81  2.56    -20.37  -19.09  1.28    -1.19
16  2   4   -16.61  1.97    -18.58  -21.06  4.45    -6.47 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:07:38.133

也许以下内容会有所帮助：

```
use strict;
use warnings;

my %hash;

while (<DATA>) {
    my ( $indVarID, $val ) = (split)[ 0, 3 ];

    $hash{$indVarID} = [ $val, $_ ]
      if !exists $hash{$indVarID}
      or $hash{$indVarID}[0] < $val;
}

print $hash{$_}[1] for sort { $a <=> $b } keys %hash;

__DATA__
11  7   4   -14.06  3.84    -17.89  -16.7   2.64    -5.73
11  4   4   -16.63  0.48    -17.1   -15.75  -0.87   -5.92
11  6   4   -15.21  1.83    -17.04  -18.41  3.21    -7
11  9   4   -15.18  1.82    -17 -16.56  1.38    -7.09
11  8   4   -14.98  1.93    -16.91  -16.78  1.79    -10.81
11  2   4   -18.75  -1.95   -16.8   -17.83  -0.92   -7.35
11  1   4   -19.67  -3.17   -16.5   -16.4   -3.27   -9.01
11  3   4   -16.69  -0.54   -16.14  -16.35  -0.34   -9.17
12  7   4   -19.54  -1.14   -18.41  -17.74  -1.81   -2.79
12  9   4   -19.09  -1.01   -18.08  -16.01  -3.09   -5.56
12  4   4   -19.48  -2.18   -17.3   -16.34  -3.14   -4
12  2   4   -19.86  -2.77   -17.1   -15.97  -3.9    -2.96
12  8   4   -19.49  -2.45   -17.03  -16.39  -3.1    -7.19
12  1   4   -20.28  -3.33   -16.95  -17.12  -3.16   -5.18
12  3   4   -18.78  -1.93   -16.86  -17.81  -0.98   -5.39
12  5   4   -19.63  -2.86   -16.77  -16.41  -3.22   -6.54
12  6   4   -19.81  -3.25   -16.56  -16.53  -3.27   -7.19
12  10  4   -19.39  -2.95   -16.44  -17.42  -1.97   -7.67
13  1   3   -13.05  6.35    -19.4   -18.71  5.66    -6.43
13  8   3   -21.44  -2.32   -19.11  -17.08  -4.36   -1.93
13  3   3   -16 2.94    -18.94  -19.24  3.24    -2.78
13  2   3   -13.79  4.9 -18.7   -17.35  3.56    -4.72
13  6   3   -22.08  -3.4    -18.68  -20.12  -1.96   -6.74
13  9   3   -18.98  -0.32   -18.66  -15.97  -3.01   -3.06
13  7   3   -20.4   -2.08   -18.32  -18.24  -2.17   -5.71
13  5   3   -19.94  -1.62   -18.32  -19.42  -0.52   -7.44
13  10  3   -19.26  -1.25   -18.01  -17.52  -1.74   -5.68
13  4   3   -17.75  -1.33   -16.42  -17.75  0   -9.15
14  9   3   -22.23  -3.43   -18.79  -16.68  -5.55   -3.91
14  5   3   -21.32  -2.95   -18.37  -18.08  -3.24   -6.03
14  7   3   -24.25  -6.29   -17.96  -18.78  -5.47   -9.21
14  6   3   -21.03  -3.14   -17.89  -19.17  -1.86   -10.11
14  4   3   -21.59  -3.93   -17.67  -19.32  -2.28   -6.55
14  1   3   -22.43  -4.79   -17.63  -18.09  -4.34   -5.63 
```

输出：

```
11  7   4   -14.06  3.84    -17.89  -16.7   2.64    -5.73
12  3   4   -18.78  -1.93   -16.86  -17.81  -0.98   -5.39
13  1   3   -13.05  6.35    -19.4   -18.71  5.66    -6.43
14  6   3   -21.03  -3.14   -17.89  -19.17  -1.86   -10.11 
```

这构建了一个数组散列 (HoA)，其中键是自变量 ID，值是对二元素列表的引用。列表中的第零个元素是在记录的第四列中找到的值。第一个元素是记录。

在读取记录时，如果自变量的新值大于旧值（或者如果没有旧值），则新值和记录将存储在列表中。

完成后，对键进行数字排序，并打印包含每个自变量 ID 的最大值的记录。

# iphone - 如何通过 Xcode 检索 SAFARI 对象

> ID：14515172
> 
> 赞同：-1
> 
> 时间：2013-01-25T04:06:56.110
> 
> 标签：iphone, ios, ipad

如果我使用以下 iPad 代码打开 URL，如何检索 Safari 或我的默认浏览器的实例对象

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:14:12.190

你不能，一旦你打开 URL Safari 移动到前台，替换你的应用程序。从文档中：

> 如果资源是另一个应用程序，调用此方法可能会导致调用应用程序退出，以便启动另一个应用程序。

但是如果你愿意，你可以在你的应用程序中创建你自己的视图控制器，并实现一些基本的浏览器控件。该类`UIWebView`具有您可以使用的方法`goBack`。`goForward`

# iphone - iOS 应用程序可以使用 youtube 加载 web 视图吗？

> ID：14515178
> 
> 赞同：0
> 
> 时间：2013-01-25T04:07:15.263
> 
> 标签：iphone, ios, ipad, ios6, http-live-streaming

我正在开发一个 iOS 应用程序。我正在使用 HTML5 使用 webview 加载几个 youtube 视频。

我有点担心苹果会拒绝那些在没有 HTTP 直播的情况下直接加载一些大视频的应用程序。

那么，我的方法错了吗？我要直接加载 youtube 视频吗？youtube 自己提供 HTTP 直播吗？

我很想知道这些东西。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:11:10.107

可以在 HTML WebViews 中加载 YouTube 视频。许多应用程序都是这样做的。

要记住的关键是您不允许自动播放视频，它们必须由用户启动，即他们必须按下播放按钮。

**编辑**：请查看[**此**](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html)官方页面

# javascript - 等宽字体 - 不是真正的等宽字体？

> ID：14515185
> 
> 赞同：2
> 
> 时间：2013-01-25T04:08:44.057
> 
> 标签：javascript, fonts, text-editor, monospace

到目前为止，这似乎是我在 Gedit 中使用**JavaScript**发现的一个错误（当您将字体从“Ubuntu mono”更改为“Monospace”时）和 Geany。我将右边距设置为 80 个字符，但是当我键入`Object`或`prototype`任何其他由程序加粗的**关键字**时，它会添加一些字母间距，稍微偏离间距。

因此，我有一行声明`Object`是 79 个字符，但似乎是 81.5 个字符。有人可以建议我如何解决这个问题吗？它是文本编辑器设置吗？是不是字体本身的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:19:34.750

这可能是因为您的默认等宽字体没有原生粗体样式。换个字体就好了。我建议您使用 Linux、DejaVu Sans Mono 或 Liberation Mono；他们会工作得很好。

> 此外，你会认为 monospace 现在会有一种原生的粗体风格

如果您在 Ubuntu 中，您可以下载[Unsettings](http://www.florian-diesch.de/software/unsettings/)并更改默认的等宽字体，这样当您打开以“等宽”为字体的程序时，它将是您选择的字体。

顺便说一句，这不是 Linux 独有的。查看 Windows 上的默认等宽字体`cmd`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-12T11:08:36.500

就我而言，更改字体没有帮助。`Insert spaces instead of tabs`解决方案是在首选项/编辑器中选择选项。

# html - Nokogiri 生成无效的 HTML？

> ID：14515190
> 
> 赞同：1
> 
> 时间：2013-01-25T04:09:11.563
> 
> 标签：html, ruby, parsing, nokogiri

我需要处理一个 HTML 文档并在几个地方插入一些节点。我正在处理的内容无效，但 Nokogiri 足够聪明，可以弄清楚它应该是什么。问题是我不想更改原始文档的格式，除了我要插入的部分。

这是一个例子：

```
require 'nokogiri'

orig_html = '
  <html>
  <meta name="Generator" content="Microsoft Word 97 O.o">
  <body>
    1
    <b><p>2</p></b>
    3
  </body>
</html>'

puts Nokogiri::HTML(orig_html).inner_html

# >> <html>
# >> <head>
# >> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
# >> <meta name="Generator" content="Microsoft Word 97 O.o">
# >> </head>
# >> <body>
# >>         1
# >>         <b></b><p>2</p>
# >>         3
# >>       </body>
# >> </html> 
```

我希望输出与输入相同。问题是我不能在`<p>`里面`<b>`。我的倾向是切换到XML，但是有标签之类的无效标签`<meta>`，没有关闭。HTML 足够聪明，可以识别这一点，但 XML 不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:59:49.993

Nokogiri 正在修复格式错误的 HTML 以使其可解析。完成后，DOM 处于合理状态，但 Nokogiri 不再提供原始文档。

如果您希望原件不受影响，则必须在将其传递给 Nokogiri 之前使其有效，然后您可以使用 Nokogiri 的方法对其进行操作。通常我会使用一些正则表达式来查找问题点并添加/调整标签或其相关的结束标签，以允许 Nokogiri 解析而无需修复问题。

这不是 HTML 比 XML 更智能的情况，而是 Nokogiri 尊重严格的 XML 规范的精神，并`errors`在文件无效时通过使用错误填充数组来引发标志。HTML 的规范不那么严格，而且，因为浏览器在解析和显示 HTML 时（也）很宽容，所以 Nokogiri 会在一定程度上遵循，进行修复，然后填充`errors`数组。（无论哪种情况，您都可以检查该数组以查看问题所在。）

```
require 'nokogiri'

orig_html = '
  <html>
  <meta name="Generator" content="Microsoft Word 97 O.o">
  <body>
    1
    <b><p>2</p></b>
    3
  </body>
</html>'

doc = Nokogiri::HTML(orig_html)
doc.errors 
```

`doc.errors`包含：

```
[
    [0] #<Nokogiri::XML::SyntaxError: Unexpected end tag : b>
] 
```

以下是我使用 Nokogiri 修复示例 HTML 的方法：

```
doc = Nokogiri::HTML(orig_html)
p = doc.at('b+p')
p.previous_sibling.remove 
```

这是此时的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Generator" content="Microsoft Word 97 O.o">
</head>
<body>
    1
    <p>2</p>
    3
  </body>
</html> 
```

继续：

```
p.inner_html = "<b>#{p.content}</b>"
puts doc.to_html 
```

这是生成的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Generator" content="Microsoft Word 97 O.o">
</head>
<body>
    1
    <p><b>2</b></p>
    3
  </body>
</html> 
```

很明显，示例 HTML 并不是您真正使用的内容，因此您必须更改访问器以定位需要更改的标签，但这应该可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:30:32.110

以上适用于上述特定情况，但不适用于以下情况。

```
 orig_html = '
      <html>
      <meta name="Generator" content="Microsoft Word 97 O.o">
      <body>
        1
        <b>this is a bold
          <p>This is a paragraph</p>
        </b>
        3
      </body>
    </html>'

    doc = Nokogiri::HTML(orig_html)
    p = doc.at('b+p')

    p.previous_sibling.remove
    p.inner_html = "<b>#{p.content}</b>" # !> mismatched indentations at 'end' with 'def' at 17
     puts doc.to_html 
```

生成的 HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="Generator" content="Microsoft Word 97 O.o">
    </head>
    <body>
        1
         <p><b>This is a paragraph</b></p>

        3
      </body>
    </html> 
```

# java - Android，Java以正弦波移动手榴弹

> ID：14515192
> 
> 赞同：1
> 
> 时间：2013-01-25T04:09:21.387
> 
> 标签：java, android, wave, trigonometry

我正在玩android，想尝试用正弦波模拟手榴弹运动。有人可以帮我语法吗？

这是我用我所拥有的小数学知识所尝试的：

```
mPositionX += mSpeed;
mPositionY = (float) (0.5f * Math.sin(mTargetX * mPositionX));
setPosition(mPositionX, mPositionY); 
```

但它并没有真正做到我所期望的..

我的 mPositionX/Ys 初始值是手榴弹的生成点，而 mTargetX/Y 是我希望正弦波完成半波（如半圆）的位置；手榴弹应该降落的地方。

我的位置值是百分比，所以 0.5 是画布的一半等，如果值得一提的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:28:36.490

您用于正弦波的概念似乎很奇怪。在正弦波中，方程为

> y=sin(x);

这应该适用于正弦波

```
mSpeed=constant;
mTargetX = constant2;
mOriginalX=constant3;
mDistanceX=mTargetX-mOriginalX; 
```

现在在反复叫`onDraw`

```
mPositionX+=mDistanceX/mSpeed; //Distance divided by speed
mPositionY=(float) (0.5* Math.sin(Math.PI*(Math.abs(mPositionX-mOriginalX))/mDistanceX); 
            //Assuming you want it to go to pi degrees
            //Divide current distance by total distance * total angle reqd 
```

# linux - 使用 GNU 屏幕，我如何执行进程以响应来自远程应用程序的输入字符串？

> ID：14515193
> 
> 赞同：1
> 
> 时间：2013-01-25T04:09:33.113
> 
> 标签：linux, terminal, gnu-screen, vt100

我正在使用 GNU 屏幕连接到 VT100 终端服务器（在 DOSEMU 中运行的 DOS）。我想配置转义序列来执行子进程并退出子进程。这将类似于 printcmd，除了我会将进程 STDOUT 返回到远程服务器的 STDIN。我已阅读 GNU 屏幕手册并了解 exec 的基础知识，但我不知道如何使 exec 发生在远程转义序列上。

# python - Python Opencv SolvePnP 产生错误的翻译向量

> ID：14515200
> 
> 赞同：17
> 
> 时间：2013-01-25T04:11:00.147
> 
> 标签：python, opencv, camera-calibration

我正在尝试使用单应性在 Blender 3d 中校准并找到单个虚拟相机的位置和旋转。我正在使用 Blender，以便在进入更困难的现实世界之前仔细检查我的结果。

我在我的固定相机的视野中渲染了十张棋盘在不同位置和旋转的照片。使用 OpenCV 的 Python，我曾经`cv2.calibrateCamera`从十幅图像中检测到的棋盘角找到内在矩阵，然后用它`cv2.solvePnP`来找到外在参数（平移和旋转）。

然而，虽然估计的参数接近实际参数，但还是有一些可疑的地方。我最初对翻译的估计是`(-0.11205481,-0.0490256,8.13892491)`. 实际位置是`(0,0,8.07105)`。很接近吧？

但是，当我稍微移动和旋转相机并重新渲染图像时，估计的平移变得更远了。估计：`(-0.15933154,0.13367286,9.34058867)`。实际：`(-1.7918,-1.51073,9.76597)`。Z 值接近，但 X 和 Y 不接近。

我完全糊涂了。如果有人能帮我解决这个问题，我将不胜感激。这是代码（它基于 OpenCV 提供的 Python2 校准示例）：

```
#imports left out
USAGE = '''
USAGE: calib.py [--save <filename>] [--debug <output path>] [--square_size] [<image mask>]
'''   

args, img_mask = getopt.getopt(sys.argv[1:], '', ['save=', 'debug=', 'square_size='])
args = dict(args)
try: img_mask = img_mask[0]
except: img_mask = '../cpp/0*.png'
img_names = glob(img_mask)
debug_dir = args.get('--debug')
square_size = float(args.get('--square_size', 1.0))

pattern_size = (5, 8)
pattern_points = np.zeros( (np.prod(pattern_size), 3), np.float32 )
pattern_points[:,:2] = np.indices(pattern_size).T.reshape(-1, 2)
pattern_points *= square_size

obj_points = []
img_points = []
h, w = 0, 0
count = 0
for fn in img_names:
    print 'processing %s...' % fn,
    img = cv2.imread(fn, 0)
    h, w = img.shape[:2]
    found, corners = cv2.findChessboardCorners(img, pattern_size)        

    if found:
        if count == 0:
            #corners first is a list of the image points for just the first image.
            #This is the image I know the object points for and use in solvePnP
            corners_first =  []
            for val in corners:
                corners_first.append(val[0])                
            np_corners_first = np.asarray(corners_first,np.float64)                
        count+=1
        term = ( cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_COUNT, 30, 0.1 )
        cv2.cornerSubPix(img, corners, (5, 5), (-1, -1), term)
    if debug_dir:
        vis = cv2.cvtColor(img, cv2.COLOR_GRAY2BGR)
        cv2.drawChessboardCorners(vis, pattern_size, corners, found)
        path, name, ext = splitfn(fn)
        cv2.imwrite('%s/%s_chess.bmp' % (debug_dir, name), vis)
    if not found:
        print 'chessboard not found'
        continue
    img_points.append(corners.reshape(-1, 2))
    obj_points.append(pattern_points)        

    print 'ok'

rms, camera_matrix, dist_coefs, rvecs, tvecs = cv2.calibrateCamera(obj_points, img_points, (w, h))
print "RMS:", rms
print "camera matrix:\n", camera_matrix
print "distortion coefficients: ", dist_coefs.ravel()    
cv2.destroyAllWindows()    

np_xyz = np.array(xyz,np.float64).T #xyz list is from file. Not shown here for brevity
camera_matrix2 = np.asarray(camera_matrix,np.float64)
np_dist_coefs = np.asarray(dist_coefs[:,:],np.float64)    

found,rvecs_new,tvecs_new = cv2.solvePnP(np_xyz, np_corners_first,camera_matrix2,np_dist_coefs)

np_rodrigues = np.asarray(rvecs_new[:,:],np.float64)
print np_rodrigues.shape
rot_matrix = cv2.Rodrigues(np_rodrigues)[0]

def rot_matrix_to_euler(R):
    y_rot = asin(R[2][0]) 
    x_rot = acos(R[2][2]/cos(y_rot))    
    z_rot = acos(R[0][0]/cos(y_rot))
    y_rot_angle = y_rot *(180/pi)
    x_rot_angle = x_rot *(180/pi)
    z_rot_angle = z_rot *(180/pi)        
    return x_rot_angle,y_rot_angle,z_rot_angle

print "Euler_rotation = ",rot_matrix_to_euler(rot_matrix)
print "Translation_Matrix = ", tvecs_new 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-27T00:51:03.450

我想你可能会想到`tvecs_new`相机的位置。有点令人困惑，事实并非如此！事实上，它是世界原点在相机坐标中的位置。要在对象/世界坐标中获得相机姿势，我相信你需要

```
-np.matrix(rotation_matrix).T * np.matrix(tvecs_new) 
```

`cv2.decomposeProjectionMatrix(P)[-1]`您可以使用where `P`is the `[r|t]`3 by 4 外在矩阵获得欧拉角。

我发现[这](https://ksimek.github.com/2012/08/22/extrinsic/)是一篇关于内在和外在的非常好的文章......

# regex - 在 R 中替换文本时出错

> ID：14515202
> 
> 赞同：5
> 
> 时间：2013-01-25T04:11:03.737
> 
> 标签：regex, r, replace, runtime-error

我正在使用 sub 替换 R 中的一个文本。

```
 x<-"My name is ${name}"
 sub("${name}","Tiger",x) 
```

错误信息：

```
Error in sub("${name}", "Tiger", x) : 
  invalid regular expression '${name}', reason 'Invalid contents of {}' 
```

输入文本有 {}，如何解决此错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T04:16:18.760

`$`, `{`, 并且`}`需要转义：

```
sub("\\$\\{name\\}","Tiger",x)
# [1] "My name is Tiger" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-25T04:57:06.303

使用`fixed=TRUE`参数：

```
sub("${name}","Tiger",x, fixed=TRUE)
# [1] "My name is Tiger" 
```

# c# - 使用 ThreadPool 的正确方法是什么？

> ID：14515207
> 
> 赞同：24
> 
> 时间：2013-01-25T04:11:33.900
> 
> 标签：c#, multithreading, queue, threadpool

如果我对 ThreadPool 工作方式的理解是正确的，那么它的目的之一就是限制一个进程中可以在给定时间创建的工作线程的数量。例如，如果您将 MaxThreads 设置为 5，然后调用 QueueUserWorkItem 30 次，则会向 ThreadPool 发出 30 个请求，但其中只有 5 个请求会被新线程处理，而其他 25 个请求将被添加到队列中并在先前的请求完成并且现有线程可用时一次提供一个服务。

然而，在下面的代码中，对 Thread.Sleep(-1) 的调用保证 DoSomething() 方法永远不会返回，这意味着当前线程永远不会对后续请求可用。

但是我对 ThreadPool 工作方式的理解是不正确的，因为如果它是正确的，下面的代码将只打印数字 0-4，而不是 0-29。

有人可以解释一下 ThreadPool 是如何工作的，以及为什么下面的代码没有做我认为应该做的事情吗？

```
 static void DoSomething(object n)
    {
        Console.WriteLine(n);
        Thread.Sleep(-1);
    }

    static void Main(string[] args)
    {
        ThreadPool.SetMaxThreads(5, 5);
        for (int x = 0; x < 30; x++)
        {
            ThreadPool.QueueUserWorkItem(new WaitCallback(DoSomething), x);
        }
        Console.Read();
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T05:35:45.030

`ThreadPool.SetMaxThreads(5, 5)`

means the number of active thread is 5 (if you have more than 5 cpu core), does not mean that the ThreadPool can only create 5 threads. The ThreadPool maximum number of threads = CPU Core * 250.

After `Thread.Sleep`, the thread is inactive, so it will not affect the execution of other threads.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T05:36:48.733

> 但是我对 ThreadPool 工作方式的理解是不正确的，因为如果它是正确的，下面的代码将只打印数字 0-4，而不是 0-29。

**是的，您的假设非常正确。**

由于您在 ThreadPool 中排队了 30 个作业，并且这些作业将无限期地休眠，它们永远不会完成，ThreadPool 类将等待一定的时间间隔来创建新线程，但不会超过最大线程数。

### 笔记

> Console.Read() 使您的后台线程保持活动状态。

## 文章

*   [如何使用线程池](http://msdn.microsoft.com/en-us/library/3dasc8as%28v=vs.80%29.aspx)

*   [使用线程池](http://www.codeproject.com/Tips/277245/Working-with-ThreadPool)

## 来自 MSDN

> 许多应用程序创建的线程会花费大量时间处于睡眠状态，等待事件发生。其他线程可能会进入睡眠状态，只是为了定期唤醒以轮询更改或更新状态信息。线程池通过为您的应用程序提供由系统管理的工作线程池，使您能够更有效地使用线程。一个线程监视排队到线程池的几个等待操作的状态。当等待操作完成时，线程池中的一个工作线程执行相应的回调函数。

* * *

> 当所有线程池线程都已分配给任务时，线程池不会立即开始创建新的空闲线程。为了避免不必要地为线程分配堆栈空间，它会每隔一段时间创建新的空闲线程。该时间间隔目前为半秒，但在 .NET Framework 的未来版本中可能会发生变化。

* * *

> 托管线程池中的线程是后台线程。也就是说，它们的 IsBackground 属性为真。这意味着 ThreadPool 线程不会在所有前台线程都退出后保持应用程序运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T04:24:25.523

可能是 Thread.Sleep(-1) 没有按照您的预期进行。

参数 Int32：线程被阻塞的毫秒数。指定零 (0) 表示应该挂起该线程以允许其他等待线程执行。指定 Infinite 无限期地阻塞线程。

[http://msdn.microsoft.com/en-us/library/d00bd51t.aspx](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)

您应该查看 Tasks， http: [//msdn.microsoft.com/en-us/library/dd235608.aspx](http://msdn.microsoft.com/en-us/library/dd235608.aspx)将其视为 Threadpool 2.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T04:29:48.570

通常，ThreadPool 创建的线程数等于 CPU 内核数。没有必要创建更多线程，因为核心一次只能处理一个线程。但是，当排队到 ThreadPool 的任务执行时间超过 0.5 秒时，ThreadPool 会创建一个额外的线程来处理队列中的剩余任务。因此，如果您将大量繁重的任务排队到 ThreadPool 中，它将创建大量额外的线程来模拟多任务处理并“并行”执行所有任务。但是总执行时间与没有额外线程的情况相同，而且，因为创建线程是相当繁重的操作，所以它会更少。这就是为什么建议将 ThreadPool 用于小型任务，以避免创建实际上不会带来任何优势的额外线程。

[您可以在Albahari 的](http://www.albahari.com/threading/#_Thread_Pooling)文章中阅读有关 ThreadPool 的更多信息。实际上，他在那里有很多关于线程的文章。

# maven - Maven 代理设置，工作与家庭

> ID：14515208
> 
> 赞同：1
> 
> 时间：2013-01-25T04:11:51.073
> 
> 标签：maven, proxy

我在笔记本电脑上工作，当我在工作时，我必须通过代理来解决 Maven 依赖项。当我在家时，这会失败，所以我需要禁用它。有没有办法让它在[settings.xml](http://maven.apache.org/guides/mini/guide-proxies.html)中工作，所以我不必一直手动禁用/启用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:19:41.400

您可以在 settings.xml 中设置配置文件来控制它；请参阅[http://maven.apache.org/settings.html#Profiles](http://maven.apache.org/settings.html#Profiles)。

不过，您将不得不使用*一些*外部信息来控制它。如何检测您所在的网络？您始终可以使用环境或 -P 选项提供变量，但您仍然需要设置一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T23:41:12.750

抱歉插件，但我刚刚发布了一个 Maven 插件的源代码，该插件可以在 Maven 中启用自动代理发现：[https ://github.com/volkertb/autoproxy-maven-plugin](https://github.com/volkertb/autoproxy-maven-plugin)

目标是能够使用 Maven 在网络之间漫游，而无需手动编辑 settings.xml 中的任何静态代理设置。这是第一个版本，所以如果你使用它，你可能会遇到一些错误。如果你这样做，请告诉我。我希望这对你有用。:-)

# html - 取html整个页面

> ID：14515212
> 
> 赞同：0
> 
> 时间：2013-01-25T04:12:49.380
> 
> 标签：html, css, iframe

一个网页有 4 个图像，它们连续移动或旋转，我想把整个网页放在除了我用 < 尝试过的图像之外`iframe src= somewebpage.com width= "1000px" height="400px" position = "relative" scrolling = "no"></iframe>`。它对我来说很好，但是只有一个问题，当网页将显示在框架内时，只有页面的顶部才可见......我希望以这种方式，当它从 url 获取页面时，它将获取整个页面并将其放入 iframe 中。所以我可以一口气从上到下看到整个页面..无需任何滚动..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:23:47.180

尝试这个

```
body
{
width:1000px;
height:400px;
margin-left:auto;
margin-right:auto;
} 
```

# sql - 使用日期范围的存储过程参数对某天的销售额求和的 SQL Server 语法是什么？

> ID：14515213
> 
> 赞同：1
> 
> 时间：2013-01-25T04:13:07.320
> 
> 标签：sql, sql-server, datetime, stored-procedures

这是我的表定义：

**tblTrans**

```
PK - trans_id (int)
   - user_id_fk (int)
   - trans_created (datetime)
   - trans_amount (money) 
```

我想汇总给定日期的所有销售数据，并将其返回为`NumberOfTransactions,TotalDollars`

我有以下 SQL 查询，我想将其移至以参数为参数的存储过程`MM/DD/YYYY`。

查询有效，我只是不确定如何传入参数。

```
SELECT Cast(count(*) as varchar(8)) + ','
                         +  Cast(Sum(trans_amount) as varchar(8)) as SalesData 
FROM PD_Transaction 
WHERE pd_Trans_CreatedOn BETWEEN '20130122' 00:00:00.000' AND '20130122 23:59:59.997' 
```

我想将其创建为存储过程，并仅传入日期。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:34:16.507

如果仅通过一个日期：

```
CREATE PROC P @Date DATE
AS BEGIN 
    SELECT Cast(count(*) as varchar(8)) + ',' +  Cast(Sum(trans_amount) as varchar(8)) as SalesData FROM PD_Transaction WHERE pd_Trans_CreatedOn
    BETWEEN CONVERT(datetime, CONVERT(VARCHAR(10), @Date, 121) + ' 00:00:00', 121) and CONVERT(datetime, CONVERT(VARCHAR(10), @Date, 121) + ' 23:59:59', 121)
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:31:25.083

我从您的查询中询问您使用 SQL Server 作为 RDBMS。这是存储的过程：

```
CREATE PROC P @startDate DATE, @endDate DATE
AS BEGIN 
    SELECT Cast(count(*) as varchar(8)) + ',' +  Cast(Sum(trans_amount) as varchar(8)) as SalesData FROM PD_Transaction WHERE pd_Trans_CreatedOn
    BETWEEN @startDate and @endDate
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:33:59.533

您可以在存储过程中声明两个参数，@StartDate 和 @EndDate 等。在您的代码中，使用

```
DateTime dtStart = new DateTime(2013,01,22);
DateTime dtEnd= new DateTime(2013,01,23); 
```

然后 sql 脚本将类似于

```
*.....FROM PD_Transaction WHERE pd_Trans_CreatedOn >= @StartDate AND pd_Trans_CreatedOn < @EndDate* 
```

# combobox - comboBox.SelectedValue 空错误

> ID：14515214
> 
> 赞同：2
> 
> 时间：2013-01-25T04:13:12.937
> 
> 标签：combobox, null, selecteditem

我将 C# VS 2010 与 Access 2010 数据库一起使用，当我尝试基于选定的 DropDownList 组合框填充列表框时，我不断收到空错误（对象引用未设置为对象的实例）。例如，用户在说西部片的组合框中选择电影类型。然后列表框应填充该类型的标题。

我尝试通过简单的使用来解决它

```
ComboBox c = New ComboBox();
c = comboBox1; 
```

但是我的列表框不会填充任何东西。我可以在查询中手动将我的流派设置为西方，但我不想使用该方法，因此我可以将其应用于大型案例场景。

```
 public partial class Form1 : Form
{
    OleDbConnection cn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data source = c:\\users\\Nick\\Desktop\\DatabaseTest.accdb");
    public Form1()
    {
        InitializeComponent();
    }
    private void Form1_Shown(object sender, EventArgs e)
    {
        try
        {
            cn.Open();
        }
        catch (ObjectDisposedException ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
            Application.Exit();
        }
        OleDbCommand cm = new OleDbCommand("SELECT Genre FROM Genre", cn);
        try
        {
            OleDbDataReader dr = cm.ExecuteReader();

            while (dr.Read())
            {
                comboBox1.Items.Add(dr["Genre"]);

            }
            dr.Close();
            dr.Dispose();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    //private void button1_Click(object sender, EventArgs e)
    //{

    //}

    private void comboBox1_SelectionChangeCommitted(object sender, EventArgs e)
    {
        OleDbCommand cf = new OleDbCommand("SELECT Title FROM Movies WHERE mGenreID=@Genre", cn);
        cf.Parameters.Add("@Genre", comboBox.SelectedValue.ToString());

        try
        {
            OleDbDataReader dr = cf.ExecuteReader();

            while (dr.Read())
            {
                listBox1.Items.Add(dr["Title"]);
            }
            dr.Close();
            dr.Dispose();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:43:08.037

您正在向 中添加项目`comboBox1`，但从中读取值`comboBox`。注意缺少`1`.

# linux - 编写 bash 脚本

> ID：14515216
> 
> 赞同：0
> 
> 时间：2013-01-25T04:13:14.710
> 
> 标签：linux, shell, unix

我需要编写一个执行以下操作的 bash 脚本：

> 如果给定的参数少于两个，它会打印一个适当的错误并退出。将以下信息附加到第一个参数指示的文件：
> 
> *   时间和日期
> *   每个倒数第二个参数一行，包含文件中的行数，然后是文件名
> *   列表中的文件总数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:31:17.077

以下代码应该可以满足您的要求。如果您有任何问题，请告诉我。

```
#!/bin/bash

if [ $# -lt 2 ]
then
    echo "$0: Too few arguments. At least two required"
    exit 1
fi

date >> $1

arg_array=( "$@" )
i=1

while [ ${arg_array[$i]} ]
do
    echo `wc -l ${arg_array[$i]}` >> $1
    i=$(($i + 1))
done

echo $(($# - 1)) >> $1 
```

# python - 如何在 Pygame 中为 Pong 设置碰撞检测

> ID：14515217
> 
> 赞同：2
> 
> 时间：2013-01-25T04:13:17.413
> 
> 标签：python, pygame, collision-detection, pong

我正在 Pygame 中构建 Pong 克隆。我不知道如何为球和桨添加碰撞检测，这样球就会从桨上反弹。我怎样才能做到这一点？当球击中桨时，我怎样才能让球向相反的方向移动？

```
bif="bg.jpg"

import pygame, sys
from pygame.locals import *

pygame.init()
pygame.display.set_caption("Griffin West's Python Pong")
pygame.mixer.init()
sounda= pygame.mixer.Sound("Music.wav")

sounda.play()

screen=pygame.display.set_mode((1280,720),0,32)
background=pygame.image.load(bif).convert()

color1=(255,255,255)
color2=(255,255,0)
color3=(0,0,255)
color4=(0,255,0)
pos1=(640,0)
pos2=(640,720)
pos3=(640,360)
pos4=(0,360)
pos5=(1280,360)
radius=(100)
x1,y1=75,0
x2,y2=1175,0
x3,y3=1,1
clock=pygame.time.Clock()
speedx=750
speedy=750
movex1, movey1=0,0
movex2, movey2=0,0
s1=0
s2=0

while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type==KEYDOWN:
            if event.key==K_w:
                movey1=-2
            elif event.key==K_s:
                movey1=+2
            if event.key==K_UP:
                movey2=-2
            elif event.key==K_DOWN:
                movey2=+2
        if event.type==KEYUP:
            if event.key==K_w:
                movey1=0
            elif event.key==K_s:
                movey1=0
            if event.key==K_UP:
                movey2=0
            elif event.key==K_DOWN:
                movey2=0

    x1+=movex1
    y1+=movey1
    x2+=movex2
    y2+=movey2

    milli=clock.tick()
    seconds=milli/1000.0
    dx=seconds*speedx
    dy=seconds*speedy
    x3+=dx
    y3+=dy

    if x3>1280: 
        x3+=-dx  # get ball out of the wall
        speedx = -speedx  # change direction
        s1=s1+1
    if y3>720:
        y3+=-dy
        speedy = -speedy
    if x3<0:
        x3+dx
        speedx = -speedx
        x3=x3+1
        s2=s2+1
    if y3<0:
        y3=y3+1
        y3+=dy
        speedy = -speedy
    if x3<=y3y3+30:
        speedx = -speedy

    screen.blit(background, (0,0))

    screen.lock()
    pygame.draw.line(screen, color1, pos1, pos2, 1)
    pygame.draw.circle(screen, color1, pos3, radius, 1)
    pygame.draw.circle(screen, color1, pos4, radius, 1)
    pygame.draw.circle(screen, color1, pos5, radius, 1)
    pygame.draw.rect(screen, color3, Rect((x1,y1),(30,100)))
    pygame.draw.rect(screen, color2, Rect((x2,y2),(30,100)))
    pygame.draw.circle(screen, color4, (int(x3),int(y3)), 15)

    screen.unlock()
    myfont = pygame.font.SysFont("Press Start 2P", 50)
    myfont2 = pygame.font.SysFont("Press Start 2P", 25)
    label = myfont.render("Python", 1, (255,0,0))
    screen.blit(label, (494, 115))
    label = myfont.render("Pong", 1, (255,0,0))
    screen.blit(label, (544, 175))
    label = myfont2.render("Player 1: "+str(s1), 1, (255,255,255))
    screen.blit(label, (25, 675))
    label = myfont2.render("Player 2: "+str(s2), 1, (255,255,255))
    screen.blit(label, (950, 675))
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T13:34:56.050

[这个答案](https://stackoverflow.com/a/11846756/216356)有一个示例 pong 实现，其中包括碰撞检测。具体来说，您会对`bounce`下面列出的代码中的方法感兴趣。

**在 Pong 类中：**

```
def move_all(self):
    for obj in self.p1, self.p2, self.ball:
        obj.move()
        if obj is not self.ball:
            obj.bounce(self.ball) 
```

**在桨类中：**

```
def bounce(self, ball):
    minimum = self.size.x + ball.radius
    if self.position.x != ball.position.x and self.overlap(ball, minimum):
        if not self.just_bounced:
            self.just_bounced = True
            self.score += abs(ball.velocity.y)
        sign = +1 if self.position.x < ball.position.x else -1
        if self.collision_area == self.PART.center:
            ball.position.x = self.position.x + minimum * sign
        else:
            ball.position.adjust(self.middle_point, minimum)
        ball.velocity.x = copy_sign(ball.velocity.x, sign)
        ball.change_speed()
    else:
        self.just_bounced = False 
```

**在球类中：**

```
def bounce(self):
    if self.position.y - self.radius < 0:
        self.position.y = self.radius
        self.velocity.y = copy_sign(self.velocity.y, +1)
        self.change_speed()
    elif self.position.y + self.radius > self.board.y:
        self.position.y = self.board.y - self.radius
        self.velocity.y = copy_sign(self.velocity.y, -1)
        self.change_speed() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:25:36.607

做一个 if 语句，检查球的 x 坐标是否超出了球拍的 x 坐标，以及球的 y 坐标是否在球拍的顶部和底部 y 坐标内。如果是这样，将球的 x 速度乘以 -1。

# python - 芹菜节拍与方法任务不起作用

> ID：14515218
> 
> 赞同：3
> 
> 时间：2013-01-25T04:13:19.297
> 
> 标签：python, celery, celerybeat

我正在尝试在方法任务上运行 celerybeat，但无法正常工作。这是一个示例设置：

```
from celery.contrib.methods import task_method
from celery import Celery, current_app

celery=celery('tasks', broker='amqp://guest@localhost//')
celery.config_from_object("celeryconfig")
class X(object):
    @celery.task(filter=task_method, name="X.ppp")
    def ppp(self):
        print "ppp" 
```

我的 celeryconfig.py 文件是

```
from datetime import timedelta
CELERYBEAT_SCHEDULE = {
      'test' : {
               'task' : 'X.ppp', 
               'schedule' : timedelta(seconds=5)
               }, 
 } 
```

当我运行时`celery beat`，我收到如下错误：

```
 task X.ppp raised exception, TypeError('ppp() takes exactly 1 argument, (0 given) 
```

当我把这个方法变成一个普通函数并用`@celery.task'装饰它时，它确实有效，所以其余的设置似乎正在工作。[我在文档中](http://docs.celeryproject.org/en/latest/reference/celery.contrib.methods.html)看到了有关方法任务的警告，但无法真正找出问题所在。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:24:05.253

问题是 Celerybeat 在调用方法之前不会实例化 X。如果方法未绑定到对象，则 task_method 过滤器默认调用未绑定方法。

我的问题是，你想在这里完成什么？X 没有状态，那么为什么不使用模块级函数呢？

# cocoa - Cocoa WebKit - Mountain Lion - loadRequest, loadHTMLString:baseURL: - 加载错误

> ID：14515219
> 
> 赞同：1
> 
> 时间：2013-01-25T04:13:21.390
> 
> 标签：cocoa, webview, webkit

OS X 10.8.2。我有一个 webView，我一直在其中加载 HTML 文档。（一次一个，响应用户输入。）

我正在使用 WebScriptObjects，以便当用户单击每个 HTML 文档中的菜单元素时，我的代码会收到通知。然后我可以在内存中创建一些特定于上下文的文档，并通过调用`loadHTMLString:baseURL`webView 的 mainFrame 将其返回给用户。

（顺便说一句：这项工作的第二个原因是修改 HTML 文档，以强制 WebKit 更新页面和链接的 javascript 文件；WebKit 会积极缓存和重用 javascript，并且对链接 JS 的更改不会反映在WebView。为了解决这个问题，我在运行中重写了 javascript 包含，为它加上时间戳，以强制 WebKit 重新包含它。非常乏味。有人知道 WebKit 在这方面是否有所改进？）

在 Mountain Lion 之前，代码按照宣传的方式运行，没有错误。

在 Mountain Lion 上运行时，发生了两次破损：

`absoluteString`1)从 NSURL获取时包含片段。即字符串“#someAnchor”被附加到字符串的末尾。`path`改用该方法修复。

2) 后续加载在 webFrame 中不再起作用。具体来说...我可以使用 loadRequest 或 loadHTMLString:baseURL: 将一个页面（例如 page1.html）加载到 webFrame 中。收到的委托回调是：

```
webView:didStartProvisionalLoadForFrame: 
```

其次是...

```
webView:didFinishLoadForFrame: 
```

巨大的成功。

**问题：**

但是，在单击通常会通过 WebScriptObjects 导致新页面加载（例如 page2.html）的 HTML 元素后，我得到了这些回调：

```
webView:didStartProvisionalLoadForFrame: 
```

和...

```
webView:didFailProvisionalLoadWithError:forFrame: 
```

错误代码是 999 (NSURLErrorCancelled)

一项小研究表明，这是一个非常常见的错误，尤其是在 iOS 世界中。通常，您只是忽略它。但是，我不能忽略它，因为我的页面加载已损坏。无论初始页面加载和下一页加载尝试之间的时间长度如何，都会发生此错误。初始页面已完全加载（如`webView:didFinishLoadForFrame:`回调所示。）

我曾尝试在加载页面之前调用 stopLoading，但没有效果。

任何人都可以提供建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:38:08.467

解决此问题的方法：我现在没有尝试立即加载下一页，而是将其安排在不久的将来使用：

```
performSelector: @selector(doScheduledPageChange)
            withObject: nil
            afterDelay: 0.01]; 
```

这行得通。

# c++ - 使用 value wrapper 和 operator() 重载来简化 getter/setter 设计：一种危险的做法？

> ID：14515224
> 
> 赞同：6
> 
> 时间：2013-01-25T04:13:34.297
> 
> 标签：c++, c++11, wrapper, getter-setter

考虑以下类：

```
class MyClass1
{
    public:
        double x() const {return _x;} // getter
        double y() const {return _y;} // getter
        double z() const {return _x*_y;} // getter
        void x(const double var) {_x = var;} // setter
        void y(const double var) {_y = var;} // setter
        void z(const double var) {_x = var; _y = 1;} // setter
    protected:
        double _x;
        double _y;
}; 
```

由于 的实际内容`MyClass1`是一个实现细节，因此 getter 和 setter 提供了一种统一的方式来获取和设置类内容，即使它们是相互依赖的（这里`_z`不存在内部但对用户而言，`z`是一个变量，如`x`and `y`）。

现在为了避免必须为`x`and编写 getter/setter `y`，可以使用这样的包装器：

```
template <typename Type>
class Wrapper
{
    public:
        constexpr Wrapper(const Type& value) {_value = value;}
        constexpr Type& operator()() {return _value;}
        constexpr const Type& operator()() const {return _value;}
        constexpr void operator()(const Type& value) {_value = value;}
    protected:
        _value;
}; 
```

现在原来的类变成了：

```
class MyClass2
{
    public:
        Wrapper<double> x;
        Wrapper<double> y;
        double z() const {return x*y;} // getter
        void z(const double var) {x = var; y = 1;} // setter
}; 
```

避免编写 getter/setter 是一种危险的做法还是一个好的解决方案？

注意：这里`MyClass1`和`MyClass2`只是例子。我的问题非常“笼统”：`Wrapper`当 getter/setter 只是返回/设置一个内部值时，用提议的方法替换类的 getter/setter 是否危险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:22:09.380

正如您所提到的，getter 和 setter 的主要目的是提供一种统一的方式来访问和设置您的私有实例变量。

从您的包装器解决方案中，如果在程序生命周期的某个时候您决定更改设置器，您可以丢弃包装器并将其替换为 MyClass1 中的原始获取器/设置器 - 无需更改所有其他组件调用它的代码。

因此，从那时起，我认为您的解决方案是一种有效的方法，可以让您免于输入额外的几行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:24:35.123

我觉得那里没有什么特别危险的地方，但它似乎没有任何收获。C++ 为任何类型的对象提供引用语义，这与 setter 函数不兼容。有时实际的内容不仅仅是一个细节。

您也可以采用其他方式（实际上，这是我单击此问题时所期望看到的）：

```
struct virt_z {
    double x;
    double y;
    struct z_wrap {
        virt_z &parent;

        operator double() { return parent.x * parent.y; }
        z_wrap &operator=( double in ) {
            parent.x = in;
            parent.y = 1;
            return *this;
        }
        z_wrap( virt_z &in ) : parent( in ) {}
    } z;

    virt_z() : z( *this ) {}
    virt_z( virt_z const &o ) : x( o.x ), y( o.y ), z( *this ) {}
}; 
```

[https://ideone.com/qqgj3D](https://ideone.com/qqgj3D)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:19:23.060

它本身并不危险，只是更难使用（对于类用户）。MyClass2 混淆了界面。

它可能会让您编写代码变得不那么乏味，但您只需编写一次代码 - 接口将被多次重用。因此应该优先使用读码器。

由于这个原因，MyClass1 优于 MyClass2 和 Potatoswatter 解决方案。

（即使 C++ 中有一种方法可以做到这一点：

```
class MyClass3
{
    double x, y, z;
}

MyClass3::z::operator=(double) { ... } // property set
double MyClass3::z::operator() { ... } // property get 
```

就像在 C# 中一样，我认为这仍然是一个坏主意，因为这种“隐藏”代码会导致错误的假设，从而减慢调试速度。函数样式至少让您认为可能有比原始副本更复杂的事情发生。）

# visual-c++ - 如何打开和读取未保存文件的内容

> ID：14515225
> 
> 赞同：1
> 
> 时间：2013-01-25T04:13:36.573
> 
> 标签：visual-c++, file-io

我想打开并读取一个尚未保存的文件。我想在 Windows 操作系统中使用 VC++ 或仅通过批处理文件来执行此操作。

如果我通过 fopen 或 fopen_s 的正常方法打开文件，文件将以上次保存的方式打开，这不是我想要的。我想要文件中存在但尚未保存的所有数据。

我已在此链接中阅读了有关此内容的内容。[类似的问题](http://www.autohotkey.com/board/topic/46147-how-do-you-read-data-in-an-unsaved-notepad-file/)。但我无法遵循脚本。有人可以把它转换成一批给我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:53:28.880

我相信您的意思是从窗口或控件中读取内容。仅在保存数据后制作文件。

要读取像记事本中的编辑控件这样的窗口内容，首先必须获得控件的句柄。您可以使用`FindWindow`首先获取主窗口的句柄，然后使用它`FindWindowEx`来获取编辑控件的句柄来执行此操作。

一旦你有了控件的句柄，你就可以向它`WM_GETTEXT`发送消息`SendMessage`以读取它包含的文本。

请注意，这可能不适用于所有应用程序。例如，MS-Word 使用富编辑控件，它有自己的方法来获取文本。

# android - 导出已签名应用程序期间出现致命的 Lint 错误

> ID：14515231
> 
> 赞同：10
> 
> 时间：2013-01-25T04:14:14.477
> 
> 标签：android, fatal-error, android-lint

我正在尝试导出已签名的 android 应用程序，但遇到了以下 lint 错误：

![在此处输入图像描述](../Images/644583c0e640997a8b132b486e5f5476.png)

当我进入 xml 查看它时，会发生这种情况：

![在此处输入图像描述](../Images/62bd4863e59c681dd63c9bcc2e47db19.png)

有没有办法解决这个问题，以便我可以继续签署应用程序？我不需要翻译它们，因为无论如何它都是英文的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T04:32:24.333

问题出在 Android Lint 上。为了解决这个问题去`Preferences -> Android -> Lint error Checking.`

在那里您可以看到错误检查方法的列表。

*   滚动到**正确性：消息**。
*   **将缺少翻译**的严重性更改为错误以外的其他内容，例如警告

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-25T04:25:00.657

Window--> Preferences --> Android --> Lint Error Checking --> 取消选中第二个复选框 -Run full error check。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-15T18:54:49.407

由于您不想翻译所有语言和类似的错误，请尝试以下步骤

**项目**->**属性**，找到***Android Lint Preferences***，在顶部到右键单击***配置工作区设置***... -> 取消选中***导出应用程序时运行完整错误检查***。

# php - PHP，用其他数组变量替换数组变量

> ID：14515233
> 
> 赞同：2
> 
> 时间：2013-01-25T04:14:24.910
> 
> 标签：php, arrays

这是示例代码：

```
$array1 = array("Name1", "Name2", "Name3");
$array2 = array("Name2" => "NameX");
foreach($array1 as $val) 
{
    echo $val."<br/>";
} 
```

这将输出： Name1 Name2 Name3

我怎样才能输出这个： Name1 NameX Name3

**Yogesh Suthar**提交了正确的回复：

```
 $array1 = array("Name1", "Name2", "Name3");

$array2 = array("Name2" => "NameX");
foreach($array1 as $val) {
    if (array_key_exists($val, $array2)) {
            echo $array2[$val];
    }
    else {
            echo $val."<br/>";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:18:31.880

会从字面上理解您的问题并使用您拥有的代码。

```
$array1 = array("Name1", "Name2", "Name3");
$array2 = array("Name2" => "NameX");
foreach($array1 as $val) {
    if (array_key_exists($val, $array2)) {
            echo $array2[$val]."<br/>";
    }
    else {
            echo $val."<br/>";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:18:01.707

我认为您正在寻找 array_replace()

```
<?php
$base = array("orange", "banana", "apple", "raspberry");
$replacements = array(0 => "pineapple", 4 => "cherry");
$replacements2 = array(0 => "grape");

$basket = array_replace($base, $replacements, $replacements2);
print_r($basket);
?> 
```

它将输出：

```
Array
(
    [0] => grape
    [1] => banana
    [2] => apple
    [3] => raspberry
    [4] => cherry
) 
```

[PHP：数组替换](http://php.net/manual/en/function.array-replace.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T04:18:04.127

```
foreach ($a1 as $v) {
  if (isset($a2[v]) && !empty($a2[$v]))
    echo "{$a2[$val]}<br />";
  else
    echo "$val<br />";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T04:34:02.283

```
 $array1 = array("Name1", "Name2", "Name3");
enter code here$array2 = array("Name2" => "NameX");

//Loop tthrough replacement array 
foreach($array2 as $key => $word){
    //Loop through all the replacements
    foreach($array1 as $array1key => $item){

        if($item == $key){
        //if match found replace
        $array1[$array1key] = $word;

        }
    }   
}

print_r($array1); 
```

# mysql - 选择字符并与连接一起分组？

> ID：14515235
> 
> 赞同：3
> 
> 时间：2013-01-25T04:14:38.997
> 
> 标签：mysql, sql

我在mysql中有以下表设置：

```
CREATE TABLE `games_characters` (
  `game_id` int(11) DEFAULT NULL,
  `player_id` int(11) DEFAULT NULL,
  `character_id` int(11) DEFAULT NULL,
  KEY `game_id_key` (`game_id`),
  KEY `character_id_key` (`character_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我的目标是获得一个 game_id，其中 character_ids 的列表都存在于这个 game_id 中。

一组示例数据：

```
1, 1
1, 2
1, 3
2, 1
2, 2
3, 1
3, 4 
```

假设我想获取 character_id 具有 1、2 和 3 的 game_id。我将如何进行有效的查询？到目前为止，我最好的想法是多次加入表格，但我认为必须有更好的方法来做到这一点。

谢谢

编辑：对于任何好奇的人，这是我使用的最终解决方案，因为它证明了最佳查询时间：

```
SELECT game_ID
FROM (
    SELECT DISTINCT character_ID, game_ID
    FROM games_Characters
) AS T
WHERE character_ID
IN ( 1, 2, 3 ) 
GROUP BY game_ID
HAVING COUNT( * ) =3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:19:29.163

```
Select game_ID from games_Characters
where character_ID in (1,2,3)
group by game_ID
having count(*) = 3

the above makes two assumptions
1) you know the characters your looking for
2) game_ID and character_ID are unique 
```

我不认为你能得到我知道的排名第三的人，因为你知道你正在寻找的人的名单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T04:22:41.950

这个应该可以的。

```
select game_id
from games_characters
where character_id in (1,2,3)
group by game_id
having count(*) = 3 
```

如果这对您来说不够动态，则需要添加更多步骤。

```
create temporary table character_ids(id int primary key);

insert into character_ids values (1),(2),(3);

select @count := count(*)
from character_ids;

select gc.game_id
from games_characters as gc
join character_ids as c
    on (gc.character_id = c.id)
group by gc.game_id
having count(*) = @count; 
```

# python - 将财务数据从 postgres 转换为 pandas 数据框以与 Zipline 一起使用

> ID：14515239
> 
> 赞同：6
> 
> 时间：2013-01-25T04:15:00.307
> 
> 标签：python, pandas, etl, zipline

我是 Pandas 和 Zipline 的新手，我正在尝试学习如何使用它们（并将它们与我拥有的这些数据一起使用）。任何类型的提示，即使没有完整的解决方案，也将不胜感激。我已经尝试了很多事情，并且已经非常接近，但遇到了索引问题，`Exception: Reindexing only valid with uniquely valued Index objects`特别是。[熊猫 0.10.0，Python 2.7]

我正在尝试从以下形式转换我在 postgres 中拥有的数千只股票的月度回报数据：

```
ticker_symbol :: String, monthly_return :: Float, date :: Timestamp 
```

例如

```
AAPL, 0.112, 28/2/1992
GS, 0.13, 30/11/1981
GS, -0.23, 22/12/1981 
```

注意：报告的频率是每月一次，但这里会有相当多的 NaN 数据，因为并非我在这里拥有的 6000 多家公司都会同时出现。

…到下面描述的形式，这是 Zipline 运行其回测器所需要的。（我认为。Zipline 的回测器可以轻松地处理这样的月度数据吗？我知道*可以*，但是有什么技巧吗？）

* * *

下面是一个 DataFrame （时间序列？你怎么说？），我需要的格式：

`> data`：

```
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 2268 entries, 1993-01-04 00:00:00+00:00 to 2001-12-31 00:00:00+00:00
Data columns:
AA      2268  non-null values
AAPL    2268  non-null values
GE      2268  non-null values
IBM     2268  non-null values
JNJ     2268  non-null values
KO      2268  non-null values
MSFT    2268  non-null values
PEP     2268  non-null values
SPX     2268  non-null values
XOM     2268  non-null values
dtypes: float64(10) 
```

下面是一个时间序列，是我需要的格式。

`> data.AAPL`：

```
Date
1993-01-04 00:00:00+00:00    73.00
1993-01-05 00:00:00+00:00    73.12
...

2001-12-28 00:00:00+00:00    36.15
2001-12-31 00:00:00+00:00    35.55
Name: AAPL, Length: 2268 
```

注意，这里没有返回数据，而是价格。它们被调整（通过 Zipline 的`load_from_yahoo`——虽然，从阅读源代码，实际上是通过 pandas 中的函数）用于股息、拆分等，所以在它和我的返回数据之间存在同构（减去初始价格）（所以，这里没问题）。

（编辑：如果您希望我写下我拥有的东西，或者附上我的 iPython 笔记本或要点，请告诉我；我只是怀疑它是否会有所帮助，但如果需要，我绝对可以做到。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T22:36:43.830

我怀疑您试图过早地将日期设置为索引。我的建议是首先[`set_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.set_index.html)作为日期*和*公司名称，然后您可以[`unstack`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.unstack.html)使用公司名称和[`resample`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.resample.html).

像这样的东西：

```
In [11]: df1
Out[11]: 
  ticker_symbol  monthly_return                date
0          AAPL           0.112 1992-02-28 00:00:00
1            GS           0.130 1981-11-30 00:00:00
2            GS          -0.230 1981-12-22 00:00:00

df2 = df2.set_index(['date','ticker_symbol'])
df3 = df2.unstack(level=1)
df4 = df.resample('M')

In [14]: df2
Out[14]: 
                          monthly_return
date       ticker_symbol                
1992-02-28 AAPL                    0.112
1981-11-30 GS                      0.130
1981-12-22 GS                     -0.230

In [15]: df3
Out[15]: 
               monthly_return      
ticker_symbol            AAPL    GS
date                               
1981-11-30                NaN  0.13
1981-12-22                NaN -0.23
1992-02-28              0.112   NaN

In [16]: df4
Out[16]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 124 entries, 1981-11-30 00:00:00 to 1992-02-29 00:00:00
Freq: M
Data columns:
(monthly_return, AAPL)    1  non-null values
(monthly_return, GS)      2  non-null values
dtypes: float64(2) 
```

# php - CodeIgniter - sql 只返回第一个字母

> ID：14515241
> 
> 赞同：2
> 
> 时间：2013-01-25T04:15:24.953
> 
> 标签：php, mysql, codeigniter

我正在为我正在构建的网站的词汇页面创建目录。因此，当您单击 A 链接时，它将拉回所有以 A 开头的字母，依此类推。我已经完成了大部分功能，但是我无法获得正确的 sql 语句来撤回我想要的。

我正在处理这个...

```
$this->db->order_by("title", "asc");
$this->db->where('category', 'vocab');
$this->db->like('title', $this->uri->segment(3));
$data['query'] = $this->db->get('entries'); 
```

所以，我一直在努力让类似的功能正常工作。当用户单击链接时，将标题中的第一个字母与我在 url 中输入的字母相匹配。

有什么帮助吗？我在做类似的条款吗？我以前从未真正做过。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T04:19:30.923

我相信您需要更改一行：

```
$this->db->like('title', $this->uri->segment(3), 'after'); 
```

另外，请注意获得结果的方式：`$this->db->get('entries')->result();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T11:59:13.797

如果要控制通配符 (%) 的放置位置，可以使用可选的第三个参数。您的选项是“之前”、“之后”和“两者”（这是默认设置）。

```
$this->db->like('title', 'match', 'before'); // Produces: WHERE title LIKE '%match'
$this->db->like('title', 'match', 'after'); // Produces: WHERE title LIKE 'match%' 
$this->db->like('title', 'match', 'both'); // Produces: WHERE title LIKE '%match%' 
```

[可以看到codeIgniter Active Record Page](https://ellislab.com/codeigniter/user-guide/database/active_record.html)

# visual-studio-2012 - Visual Studio 商业库

> ID：14515243
> 
> 赞同：3
> 
> 时间：2013-01-25T04:15:28.057
> 
> 标签：visual-studio-2012

我刚刚升级到 Visual Studio 2012。我需要能够为不同的项目使用不同的商业组件。例如，一位客户可能需要我使用 Developer Express 中的 UI 组件。另一个可能希望我使用 Telerik 组件。

事实是，我很少需要加载所有这些。我真的很希望能够只加载我想要的组件集，而不必承担每次启动 Visual Studio 时加载所有组件所需的时间。

我想知道是否可以创建自定义加载场景。例如，用组件包 a、b 和 c 启动 VS，或者用 a、b、d 和 e 启动它？

感谢您的任何指示。

——罗伯特

# c# - 简单的重载错误？

> ID：14515245
> 
> 赞同：0
> 
> 时间：2013-01-25T04:15:33.720
> 
> 标签：c#, winforms, visual-studio-2012, string-formatting

如果标题简单重载错误，我很抱歉？不是正确的标题。我不确定我在下面尝试过的方法......

无论如何，我希望我的文本字段显示我在此处设置的文本，即“播放器：”然后我想调用我的变量“字符串 player1”并将其输入到文本字段以及我刚刚设置的文本？

```
lblPDisp.Text = ("Player: {0}", Player1); 
```

但它只是出现了红线

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T04:16:36.090

你很接近：

```
lblPDisp.Text = string.Format("Player: {0}", Player1); 
```

# eclipse - 如何在 Eclipse 中删除只读工作集

> ID：14515247
> 
> 赞同：1
> 
> 时间：2013-01-25T04:15:36.623
> 
> 标签：eclipse, working-set

当我清理我的项目工作集时，我无法删除一些工作集。该工作集的属性如下。我怎样才能删除它？

我的eclipse版本：Juno SR1 20120920-0800

![屏幕截图](../Images/28a0fb5c501d8c8a1002b6ceb1de5abf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-11T21:11:31.517

工作集不能删除，但可以**隐藏**。选择其他项目并单击右键，您将看到删除按钮。 ![在此处输入图像描述](../Images/33de4a32369b4b01c767e5178813345e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:56:23.810

你不能删除它。

“其他项目”工作集是一个特殊的工作集。它的存在是为了向您展示未明确在工作集中的项目。

你为什么要删除它？

您唯一需要关心的是您的工作区中是否有多个工作集。`Top-Level Elements->Working Sets`如果您在包资源管理器中选择了“其他项目”工作集（它在那个小三角形菜单下），那么“其他项目”工作集非常有用：

![在此处输入图像描述](../Images/1d0a11f8be1959f6903aa1d618e45f94.png)

在此示例中，我定义了两个工作集，`Android`并`Collage`在我的工作区中组织代码。任何未分配给这些工作集的项目都会出现在下面，`Other Projects`因此我仍然可以看到它们（并且可能将它们拖到其他工作集）。

# ruby - 守护进程不会重新启动？

> ID：14515250
> 
> 赞同：3
> 
> 时间：2013-01-25T04:16:14.270
> 
> 标签：ruby, daemons

我正在尝试在多个守护进程中运行相同的脚本。

`myapp.rb`看起来像这样：

```
loop do
  sleep 5
  1 / 0 # crash it
end 
```

我的`myapp_controller.rb`：

```
require 'rubygems'
require 'daemons'

options = {
  :log_output  => true,
  :backtrace   => true,
  :monitor     => true,
  :multiple    => true,
  :log_dir     => '/mnt/log/',
  :hard_exit   => true
}
Daemons.run(File.join(File.dirname(__FILE__), 'myapp.rb'), options) 
```

当我`ruby myapp_controller.rb start`连续运行几次时，它会创建很多守护进程，正如我所期望的那样。但是，过了一会儿，由于`myapp.rb`守护进程中的错误崩溃并且监视器仅重新启动一个而不是全部。所以我最终得到了一个正在运行的守护进程。

为什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:22:45.480

我能够重现这种行为。这不是你做错了什么；这是`daemons gem`行为方式。

[查看守护程序 gem](https://github.com/ghazel/daemons)的代码，结果发现该`:multiple`选项不适用于该`:monitor`选项。

**该`:monitor`选项仅在守护程序以单一模式运行时有效。**

我[在守护进程项目页面上创建了一个错误报告，](http://rubyforge.org/tracker/index.php?func=detail&aid=29703&group_id=524&atid=2084)引用这个问题作为源。

## 有关问题重现的更多信息：

时会创建多个守护进程`:multiple => true`。每个进程都有自己的 pid 文件，格式为`<scriptname>.rb<number>.pid`.

但是，只创建了一个监视器进程（使用单个`<scriptname>.rb_monitor.pid`文件。）

以下是我启动守护进程 3 次时启动的进程列表：

```
$ ps -fe | grep my_server
  501  1758     1   0 12:25PM ??         0:00.63 my_server.rb  
  501  1759     1   0 12:25PM ??         0:00.43 my_server.rb_monitor  
  501  1764     1   0 12:25PM ??         0:00.54 my_server.rb  
  501  1834     1   0 12:51PM ??         0:00.31 my_server.rb 
```

pid/log 文件夹中的文件：

```
$ ls /tmp/daemons-2013-01-25/
my_server.rb.log                my_server.rb1.pid               my_server.rb_monitor.pid
my_server.rb0.pid               my_server.rb2.pid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-11T17:18:05.677

在[问题](https://github.com/thuehlinger/daemons/issues/7)解决之前，您可以将代码更改为以下内容：

```
#myapp_controller.rb
require 'rubygems'
require 'daemons'

number = ARGV.fetch(1)

options = {
  :app_name    => "daemon-#{number}" # provide app_name
  :log_output  => true,
  :backtrace   => true,
  :monitor     => true,
  :multiple    => false, # disable multiple option
  :log_dir     => '/mnt/log/',
  :hard_exit   => true
}
Daemons.run(File.join(File.dirname(__FILE__), 'myapp.rb'), options) 
```

然后使用这些命令启动你的守护进程：

```
ruby myapp_controller.rb start 1
ruby myapp_controller.rb start 2
... 
```

这会稍微改变您的启动代码，但现在您将拥有一个监控每个守护进程的进程。

# mysql - 为 BPM 应用程序生成自动递增的 id

> ID：14515254
> 
> 赞同：1
> 
> 时间：2013-01-25T04:16:26.130
> 
> 标签：mysql, business-process-management

在 BPM Web 应用程序中，我在特定页面上有一个发票 # 字段，但我需要在每次用户附加发票并查看该页面时自动生成它。该数字必须是唯一的，最好是自动递增的。可以通过从外部 MYSQL 数据库的表中查询来显示发票编号字段的值。因此，每次用户登陆该特定页面时，都可以触发 SELECT 查询语句。

在 MYSQL 端，我将如何设置它？所以基本上，我想为该发票＃字段设置一个查询，它将在其中运行查询，例如，SELECT invoice_num FROM invoice_generator

每次运行此查询时，它都会返回下一个递增的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:30:13.993

您可以在此处使用 mysql 触发器概念....我在这里添加了一个示例...这对您非常有用（另请参阅此链接：http://www.freemindsystems.com/mysql-triggers-a-practical -例子/）

```
CREATE TABLE `products` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL DEFAULT '',
  `price` int(20) NOT NULL DEFAULT '0',
  `other` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `products_name_idx` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `freetags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tag` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `freetagged_objects` (
  `tag_id` int(20) NOT NULL DEFAULT '0',
  `object_id` int(20) NOT NULL DEFAULT '0',
  `tagged_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `module` varchar(50) NOT NULL DEFAULT '',
  PRIMARY KEY (`tag_id`, `object_id`),
  KEY `freetagged_objects_tag_id_object_id_idx` (`tag_id`, `object_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

INSERT_PRODUCTS_TAGS

```
DELIMITER ||
DROP TRIGGER IF EXISTS insert_products_tags;
||
DELIMITER @@
CREATE TRIGGER insert_products_tags AFTER INSERT ON products
  FOR EACH ROW
  BEGIN
    DECLARE current_id integer;
    DECLARE tag_id integer;
    DECLARE next integer;
    DECLARE tag_field varchar(255);
    DECLARE next_sep integer;
    DECLARE current_tag varchar(255);
    DECLARE right_tag varchar(255);

    -- We use the field other as comma-separated tag_field
    SET tag_field = NEW.other;

    -- Check for empty tags
    IF (CHAR_LENGTH(tag_field) <> 0) THEN
        -- Loop until no more ocurrencies
       set next = 1;
       WHILE next = 1 DO
         -- Find possition of the next ","
         SELECT INSTR(tag_field, ',') INTO next_sep;
         IF (next_sep > 0) THEN
            SELECT SUBSTR(tag_field, 1, next_sep - 1) INTO current_tag;
            SELECT SUBSTR(tag_field, next_sep + 1, CHAR_LENGTH(tag_field)) INTO right_tag;
            set tag_field = right_tag;
         ELSE
           set next = 0;
           set current_tag = tag_field;
         END IF;

         -- Drop spaces between comas
         SELECT TRIM(current_tag) INTO current_tag;

         -- Insert the tag if not already present
         IF (NOT EXISTS (SELECT tag FROM freetags WHERE tag = current_tag)) THEN
           -- Insert the tag
           INSERT INTO freetags (tag) values (current_tag);
           SELECT LAST_INSERT_ID() INTO tag_id;
         ELSE
           -- Or get the id
           SELECT id FROM freetags WHERE tag = current_tag INTO tag_id;
         END IF;

         -- Link the object tagged with the tag
         INSERT INTO freetagged_objects
           (tag_id, object_id, module)
            values
           (tag_id, NEW.id, 'products');
       END WHILE;
    END IF;
  END;
@@ 
```

现在，如果您在产品表上执行插入：

```
INSERT INTO PRODUCTS 
    (name, price, other) 
    values
    ("product1", 2, "tag1, tag2,tag3 , tag 4"); 
```

# c - 如何找出库中缺少的函数，但这些函数存在于与库一起发布的公开头文件中？

> ID：14515258
> 
> 赞同：5
> 
> 时间：2013-01-25T04:16:34.717
> 
> 标签：c, shared-libraries

我们有一个遗留库实现和相关的公开头文件。最近发现，暴露的头文件中的一些函数，在库实现中没有对应的定义。

我们想检查是否还有更多这样的功能。有没有更简单的方法来做到这一点，而不是筛选标题中存在的每个 API，然后检查它是否有定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:28:31.307

您可以从调用所有函数并尝试编译它的标头生成 C 源代码（Perl 是一种方法！）。链接器会抱怨缺少功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:23:42.907

尝试通过[abi-compliance-checker](http://lvc.github.io/abi-compliance-checker/)工具创建 ABI 转储文件：

```
abi-compliance-checker -lib NAME -dump DESC.xml 
```

*DESC.xml*文件如下：

```
<version>
    1.0
</version>

<headers>
    /path(s)/to/headers
</headers>

<libs>
    /path(s)/to/libraries
</libs> 
```

生成的 ABI 转储文件将包含您需要的有关头文件 ( `SymbolInfo`) 中声明的符号和共享库 ( ) 导出的符号的信息`Symbols`。

您还可以通过添加`--xml`选项生成 xml 格式的 ABI 转储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:43:56.013

如果这是 C，您可以执行以下操作：

```
printf("", /* insert all functions here */); 
```

那应该将它们全部作为函数指针传递给`printf`. 那些不存在的应该显示为链接器错误。

（在 C++ 中，您必须显式列出重载，这使得它有点困难。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T04:54:08.677

我倾向于使用`ctags`从头文件生成标识符列表，然后使用`ar`,`emfar`或`elfdump`在 Unix 或`lib.exe`Windows`dumpbin.exe`中（参见[此处](https://stackoverflow.com/questions/305287/how-to-see-the-contents-of-windows-library-lib)的讨论）从库中转储标识符列表，然后对`diff`两个列表进行排序。

# c# - 无法打开输入文件：filename.php

> ID：14515261
> 
> 赞同：2
> 
> 时间：2013-01-25T04:16:44.613
> 
> 标签：c#, c#-4.0, c#-3.0

在 .bat 文件中包含代码 PHP filename.php 我在打开 bat 文件后收到错误消息 Could not find input file:filename.php 。任何人都可以提供建议吗

```
private void button5_Click_1(object sender, EventArgs e)
{
    try
    {
        string bat = "D:\\folder1\\file1.bat";
        if (File.Exists(bat))
        {
            if (radioButton1.Enabled == true)
            {
                MessageBox.Show(bat.ToString());
                System.Diagnostics.Process.Start(bat);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T04:21:20.627

我猜这个过程不是在与`filename.php`. 在 bat 文件中指定完整路径或设置启动文件夹：

```
Process process = new Process();
process.StartInfo.FileName = bat;
process.StartInfo.WorkingDirectory = "D:\\folder1";  // or whatever is appropriate
process.Start(); 
```

# html - CSS 属性特异性

> ID：14515263
> 
> 赞同：3
> 
> 时间：2013-01-25T04:16:52.033
> 
> 标签：html, css, css-specificity

```
1)  #divID input[type='text']
    {
       height:30px;
    }

2)  #divID .ClassName
    {
       height:40px;
    } 
```

对于 div 中的文本框，我定义了上述样式。2 比 1 更具体，但渲染高度为 30px。它是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T04:18:35.073

2并不比1更具体。1实际上更具体。

CSS 选择器分为三个级别（出于讨论的目的；实际上还有更多，因为`style`属性 and `!important`）。

ID 选择器`#`位于最高级别。

类和属性`.ClassName`, `[type=text]`,`[id=x]`和伪类一样位于第二层。

元素和伪元素位于最低级别。

一个级别的关系移动到下一个级别。两个规则集都与 ID 和类/属性级别相关联（`.ClassName`并且`[type=text]`是相关联的）。

第一个规则集有一个元素作为选择器的一部分，但另一个没有。因此，第一个规则集在最低级别获胜。

[http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)
[http://www.w3.org/TR/CSS21/cascade.html#specificity](http://www.w3.org/TR/CSS21/cascade.html#specificity)

# linux - 如何用hadoop打印文件树？

> ID：14515266
> 
> 赞同：9
> 
> 时间：2013-01-25T04:17:04.047
> 
> 标签：linux, shell, hadoop, command

我是 HDFS 和 *nix 的新手，我只是好奇，如何在 hadoop 中打印文件树？

例如，我们可以在任何 *nix 系统中输入“tree”，然后给我们这样的结果：

```
[admin~]$tree
.
├── backup_snapshot.sh
├── project
│   ├── doc
│   │   └── README
│   ├── src
.... 
```

这是非常清楚的输出，但由于 HDFS 不完全符合 POSIX 标准，所以我不确定如何在 hadoop 中打印它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-29T20:49:07.400

基于[http://en.wikipedia.org/wiki/Tree_(Unix)](http://en.wikipedia.org/wiki/Tree_(Unix))，您可以提出类似树的表示形式，例如：

```
hadoop fs -lsr /mydir | awk '{print $8}' | \
sed -e 's/[^-][^\/]*\//--/g' -e 's/^/ /' -e 's/-/|/' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T06:49:10.110

刚刚创建了一个简单的项目来做到这一点：http: [//github.com/trovit/hdfstree](http://github.com/trovit/hdfstree)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:58:26.023

从技术上讲，如果你*真的*想要那样（虽然我不知道你为什么想要，除了调试/可视化/娱乐目的），你可以[使用 fuse 将 HDFS 挂载为普通文件系统](http://wiki.apache.org/hadoop/MountableHDFS)- 有几个可用的实现。这将为您提供一个目录，您可以在该目录中运行您最喜欢的“树”可视化工具或您习惯于使用普通文件系统的任何内容。

# c++ - 检查字符串是否在字符串中（字符串列表）

> ID：14515274
> 
> 赞同：12
> 
> 时间：2013-01-25T04:18:27.093
> 
> 标签：c++, string, if-statement, input, cin

我是新来的 C++。我在 python 方面有一些经验，发现“if a in b”真的很容易，我想知道 C++ 中是否有等价物。

**背景**

我一直在尝试制作一个字符串列表并检查输入是否在该列表中。我想这样做的原因是，如果输入实际上会在该函数中执行某些操作，我只想使用该函数。（在这种情况下更改 int x 和 y 坐标）

**问题**

```
string myinput;
string mylist[]={"a", "b", "c"};
cin>>myinput;
//if myinput is included in mylist
//do other stuff here 
```

如何检查`if`输入`myinput`是否包含在字符串中`mylist`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T04:22:38.613

你可以使用`std::find`：

```
std::string myinput;
std::vector<std::string> mylist{"a", "b", "c"};

std::cin >> myinput;
if (std::find(std::begin(mylist), std::end(mylist), myinput) != std::end(mylist))
    // myinput is included in mylist. 
```

这仅适用于三个字符串，但如果您要拥有更多字符串，则使用`std::set`or可能会更好`std::unordered_set`。

```
std::set<std::string> myset;
// put "a", "b", and "c" into the set here

std::cin >> myinput;
if (myset.find(myinput) != myset.end())
    // myinput is included in myset. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T04:28:10.873

使用[std::find、std::find_if](http://en.cppreference.com/w/cpp/algorithm/find)算法

```
 string myinput;
  string mylist[]={"a", "b", "c"};

  std::string *begin = mylist;
  std::string *end = mylist + 3;

  if (std::find(begin, end, "b") != end)
  {
    std::cout << "find" << std::endl;
  } 
```

或将 C++11`std::array`与`std::begin()`,`std::end()`

```
std::array<std::string, 3> mylist = { "a", "b", "c" };

if (std::find(std::begin(mylist), std::end(mylist), "b") != std::end(mylist))
{
  cout << "find" << endl;
} 
```

或拉姆达：

```
if (std::find_if(std::begin(mylist), std::end(mylist),
     [](const std::string& s){ return s == "b";}) != std::end(mylist)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T04:21:43.137

使用[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
std::size_t listsize = sizeof mylist / sizeof mylist[0];
if (std::find(mylist, mylist + listsize, myinput) != mylist + listsize) {
    //found
} 
```

如果您事先知道列表的大小，我建议您`std::array`公开迭代器和`size()`函数，以及与内置数组相比的其他一些好处。请注意，这仅是 C++11（C++03 接近等效项是`std::vector`），并且随着 C++11 的出现，`std::begin`并且`std::end`将其简化为：

```
if (std::find(std::begin(mylist), std::end(mylist), myinput) != std::end(mylist)) 
```

在 C++03 中为内置数组制作自己的数组也相当容易，但是使用公开`begin()`和`end()`成员的标准容器，这应该不是太必要，尽管它更通用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-28T05:29:23.803

你也可以使用`std::count`

```
#include <iostream>
#include <algorithm>  // std::count
#include <vector>

//using namespace std;

int main() {
    std::vector<std::string> ans = {"a", "b", "c", "a"};
    std::cout << count(ans.begin(), ans.end(), "a") << std::endl;
    return 0;
} 
```

如果 number `> 0`，则表示字符串在字符串中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T04:22:22.787

由于您正在使用 C++，因此请不要犹豫使用 STL 库：

```
 string mylist[]={"a", "b", "c"};
  vector<string> myvector(mylist, mylist + sizeof(mylist)/sizeof(mylist[0])); 

  if (find(myvector.begin(), myvector.end(), mystring) != myvector.end()) {
    ..
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T04:22:26.200

```
if (find(mylist, &mylist[3], myinput) != &mylist[3])
    ... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T04:23:56.410

```
#include <algorithm>
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string myinput;
    string mylist[]={"a", "b", "c"};
    if (cin >> myinput && 
        std::find(std::begin(mylist), std::end(mylist), myinput) == std::end(mylist))
    {
        // do other stuff
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-25T06:37:34.433

您可以按照其他人的建议使用 find ，也可以使用 for 循环（对于初学者来说更容易）：

```
for (int i = 0; i < mylist.size() ; i ++){
        if (myinput == mylist[i]){
               //Do Stuff
        } 
```

# wordpress - https 和 http 结合 .htaccess （不同的问题）

> ID：14515276
> 
> 赞同：1
> 
> 时间：2013-01-25T04:18:29.460
> 
> 标签：wordpress, .htaccess, ssl, https, woocommerce

好的。希望有人可以帮助我提出建议-

1.  我有一个使用子文件夹的 WordPress 多站点
2.  我正在使用 WooCommerce
3.  我有一个安装了 GoDaddy 证书的标准 Ubuntu 12.04/LAMP 服务器

如果它打开 SSL，它会影响我的整个域（显然）所以我的主站点最终为：' [https://main-sitename.com](https://main-sitename.com) '

我的多站点博客也出现： `https://main-sitename.com/blogname-1` `https://main-sitename.com/blogname-2`

等等。我所有的菜单链接也是 https，它会禁用外部链接，因为 url 都以 https 开头。：-/

我想做的是得到这个：

`http://main-sitename.com` `http://main-sitename.com/blogname-1` `http://main-sitename.com/blogname-2`

`https://main-sitename.com/shop/`（WooCommerce 将在结帐时强制使用 HTTPS，然后在完成后取消强制执行）。

*   那么，有人对我如何解决这个问题有任何想法吗？有趣的是，当我在 Rackspace 云站点上拥有完全相同的站点时，一切正常。当我搬到一个自我管理的云服务器时，这发生了。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:25:37.177

听起来好像为整个服务器设置了 SSLRequireSSL。因为您只想在 /shop/ 目录上强制执行 HTTPS。在该目录中添加一个 .htaccess 文件，其中包含：

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

这将强制使用 http:// 连接到您的商店的任何人被重定向到相同的 URI，但在 https://

**编辑 2**

这对我有用（将 www.myserver.com 更改为我的真实服务器名称）。我在 WP 中使用日期和名称永久链接。我一访问[http://www.myserver.com/shop/](http://www.myserver.com/shop/)就会被重定向到 https。它保留了 URI。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
# Addition to force redirect to https when they visit the shop!
RewriteBase /
RewriteCond %{HTTPS} !on
RewriteRule (shop/.*$) https://www.myserver.com/$1 [R=301,L]
# Back to WordPress changes
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

# git - 将当前 git 分支名称替换为 git log 命令

> ID：14515284
> 
> 赞同：0
> 
> 时间：2013-01-25T04:19:28.370
> 
> 标签：git

我有一个 git log 命令，它允许我查看尚未推送到远程存储库的本地提交。它看起来像这样：

```
ahead = log origin/master..HEAD --graph --pretty=format:'%Cred%h%Creset %d %s %Cgreen(%cr)%Creset %Cblue[%an]%Creset' --abbrev-commit --date=relative 
```

只要您在`master`分支上，它就可以正常工作。我想要的是一个变量，我可以将它放在命令 where `master`is now 中，以便`git ahead`别名将针对该分支运行。类似于 zsh $(git_prompt_info) 变量，但可以在 gitconfig 文件中用作别名定义的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:31:58.763

您正在寻找`@{u}`：

> ### <refname>@{upstream}，例如 master@{upstream}，@{u}
> 
> ref 的后缀 @{upstream}（短格式 <refname>@{u}）指的是 ref 设置为在其上构建的分支。缺少的 ref 默认为当前分支。

所以你的别名应该是这样的：

```
ahead = log @{u}..HEAD --graph --pretty=format:'%Cred%h%Creset %d %s %Cgreen(%cr)%Creset %Cblue[%an]%Creset' --abbrev-commit --date=relative 
```

但我建议将其更改为：

```
ahead = log @{u}...HEAD --graph --decorate --left-right --boundary --pretty=format:'%Cred%h%Creset %d %s %Cgreen(%cr)%Creset %Cblue[%an]%Creset' --abbrev-commit --date=relative 
```

这将显示远程中缺少的本地提交以及远程中缺少的本地提交。

# php - 如果没有线程，为什么 PHP 有信号量？

> ID：14515287
> 
> 赞同：0
> 
> 时间：2013-01-25T04:19:32.987
> 
> 标签：php, multithreading, semaphore

我们有信号量：http: [//php.net/manual/en/book.sem.php](http://php.net/manual/en/book.sem.php)，但是如果我们不能使用线程，它们在 PHP 中的用途是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:23:41.907

您可以将它们用于*进程*间同步。`pcntl_fork`想到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:38:28.177

您可以将它们与多处理一起使用，这是它们存在的最初原因。

但是... [http://php.net/Thread](http://php.net/Thread)

使用 pthreads 时不需要信号量，此外，信号量的当前实现利用线程本地存储，因此很可能与 pthreads 不兼容。

# r - 从表面到 R 中轮廓的体积

> ID：14515291
> 
> 赞同：1
> 
> 时间：2013-01-25T04:19:44.607
> 
> 标签：r, volume, contour

我需要在 R 中找到从表面到特定轮廓的体积。以 R 帮助文件中的轮廓示例：

```
x <- 10*1:nrow(volcano)
y <- 10*1:ncol(volcano)
contour(x,y,volcano) 
```

给定结果图，我如何找到从特定轮廓线到表面的体积。

在实践中，我将使用 bkde2D 来获取散点图的密度图。由此我可以制作等高线图，但我想确定结果图中由各种密度截止值定义的体积。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:41:19.947

函数`contour`只绘制轮廓线但不返回任何值。您需要使用的是功能`contourLines`。

```
cL <- contourLines(x,y,volcano) 
```

从那里，您可以通过以下方式计算每条等高线的面积：

```
area <- rep(0,length(cL))
for(i in 1:length(cL)){
    d <- data.frame(cL[[i]]$x,cL[[i]]$y)
    sa <- sb <- 0
    for(j in 1:(nrow(d)-1)){
        sa <- sa+d[j,1]*d[j+1,2]
        sb <- sb+d[j,2]*d[j+1,1]
        }
    area[i] <- abs((sa-sb)/2)
    }
area
[1] 1.413924e+05 3.109685e+04 2.431528e+04 2.049473e+04 6.705976e+04 3.202145e+05 1.720469e+03
[8] 2.926802e+05 2.335421e+05 1.834791e+05 1.326162e+05 4.672784e+02 9.419792e+04 5.121851e+03
[15] 5.126860e+04 3.660862e-01 1.216750e+03 2.051307e+04 4.670745e+02 4.146927e+03 
```

现在，如果你想要两条等高线之间的音量（比如 120 和 130 级之间）：

```
level1 <- 120
level2 <- 130
levels <- unlist(lapply(cL,function(x)x$level))
base <- (1:length(cL))[level==level1]
top <- (1:length(cL))[level==level2]
vol <- (level[top]-level[base])*(area[base]+area[top])/2
vol
[1] 2631111 
```

这就是我所能做到的，因为如果下一条等高线被分成几个扇区，我不知道如何进行。

# python - Python：尝试通过电子邮件发送 href

> ID：14515294
> 
> 赞同：1
> 
> 时间：2013-01-25T04:20:05.997
> 
> 标签：python, beautifulsoup, scrape

下面的代码是从 ESPN/college-football 中提取头条新闻。我可以抓住文章的标题和链接。我可以打印这两个，但我也想通过电子邮件发送给他们。我可以获取电子邮件的标题，但不能获取 href 属性。知道发生了什么吗？

```
from urllib import urlopen
from BeautifulSoup import BeautifulSoup
import smtplib

# Copy all of the content from the provided web page
webpage = urlopen('http://espn.go.com/college-football').read()
soup = BeautifulSoup(webpage)    

# to get the contents of <ul> tags w/ attribute class="headlines":
for i in soup.findAll('ul', {'class': 'headlines'}):
    for tag in i.findAll('li'):
        for a in tag.findAll({'a' : True, 'title' : False}):            
            print a.text
            print a['href']                                
            print "\n"

            url = str(a.get('href'))
            fromaddr = 'FROM@from.com'
            toaddrs  = 'TO@to.com'            

            # Credentials (if needed)
            username = 'username'
            password = 'password'

            # The actual mail send
            server = smtplib.SMTP('smtp.gmail.com', 587)
            server.set_debuglevel(1)
            server.ehlo()
            server.starttls()
            server.login(username,password)
            server.sendmail(fromaddr, toaddrs, url)
            server.quit() 
```

Eclipse 中的控制台显示：

```
reply: '235 2.7.0 Accepted\r\n'
reply: retcode (235); Msg: 2.7.0 Accepted
send: 'mail FROM:<person> size=106\r\n'
reply: '250 2.1.0 OK a9sm22683966anb.6\r\n'
reply: retcode (250); Msg: 2.1.0 OK a9sm22683966anb.6
send: 'rcpt TO:<emailHere>\r\n'
reply: '250 2.1.5 OK a9sm22683966anb.6\r\n'
reply: retcode (250); Msg: 2.1.5 OK a9sm22683966anb.6
send: 'data\r\n'
reply: '354  Go ahead a9sm22683966anb.6\r\n'
reply: retcode (354); Msg: Go ahead a9sm22683966anb.6
data: (354, 'Go ahead a9sm22683966anb.6')
send: 'http://espn.go.com/college-sports/story/_/id/8878732/lawyer-ncaa-miami-    hurricanes-investigation-says-patsy\r\n.\r\n'
reply: '250 2.0.0 OK 1359087354 a9sm22683966anb.6\r\n'
reply: retcode (250); Msg: 2.0.0 OK 1359087354 a9sm22683966anb.6
data: (250, '2.0.0 OK 1359087354 a9sm22683966anb.6')
send: 'quit\r\n'
reply: '221 2.0.0 closing connection a9sm22683966anb.6\r\n'
reply: retcode (221); Msg: 2.0.0 closing connection a9sm22683966anb.6 
```

但它从未在电子邮件中出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:48:43.237

尝试`email`打包来格式化电子邮件：

```
# -*- coding: utf-8 -*-
from email.header    import Header
from email.mime.text import MIMEText

msg = MIMEText('put message body here…', 'plain', 'utf-8')
msg['Subject'] = Header('here goes subject…', 'utf-8')
msg['From'] = 'from@gmail.com'
msg['To'] = 'to@example.com'
print(msg.as_string()) 
```

输出：

```
内容类型：文本/纯文本；字符集="utf-8"
MIME 版本：1.0
内容传输编码：base64
主题：=?utf-8?q?here_goes_subject=E2=80=A6?=
发件人：from@gmail.com
收件人：to@example.com

cHV0IG1lc3NhZ2UgYm9keSBoZXJl4oCm

```

通过 gmail 发送：

```
from smtplib import SMTP_SSL

s = SMTP_SSL('smtp.gmail.com')
s.set_debuglevel(1)
try:
    s.login(login, password)
    s.sendmail(msg['From'], msg['To'], msg.as_string())
finally:
    s.quit() 
```

# c - 在 C 中打印最大十六进制精度

> ID：14515303
> 
> 赞同：0
> 
> 时间：2013-01-25T04:21:17.400
> 
> 标签：c, hex

有没有办法在 C 中打印最大十六进制精度？

例如：

```
printf(" %x ", var); 
```

输出为 - “FFFFAB”

但是，我只希望输出为“AB”，即最少 2 个有效数字。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:22:20.717

只需使用按位与屏蔽掉您不想要的位。

```
printf(" %x ", var & 0xFF); 
```

此外，您所说的“AB”通常被称为 hexadecimal *digits*，而不是*bits*。描述二进制数时通常使用位。

# ios - 在新的导航控制器中打开 Webview 链接

> ID：14515304
> 
> 赞同：0
> 
> 时间：2013-01-25T04:21:19.307
> 
> 标签：ios, uiwebview

在 Xcode 中，我尝试让 webview 中的所有链接在新的导航控制器视图中打开。这样我就可以将它添加到堆栈中。

新视图可以与旧视图完全相同，但只需要加载新链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:34:13.097

在控制器中实现 UIWebViewDelegate。使用 ...

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
   // Push here
   return NO;
} 
```

... 方法，以获取您接下来要推送的新 URL。

# python - 如果文件没有改变，如何修改 web2py 下载函数返回“304 Not Modified”？

> ID：14515313
> 
> 赞同：1
> 
> 时间：2013-01-25T04:22:29.410
> 
> 标签：python, google-app-engine, web2py

就我而言，我有一个数据库，其中包含显示在概览页面上的文档缩略图。每次浏览器访问该站点时，都会再次下载所有缩略图，因此下载功能会再次加载数据库中的所有图像。因为我在 GAE 上运行，所以我的数据库读取量很大。

我尝试通过设置启用客户端站点缓存：

```
@auth.requires_login()
def download():
  response.headers['Cache-Control'] = None
  response.headers['Pragma'] = None
  response.headers['Expires'] = None
  return response.download(request, db) 
```

我还读到 response.stream 可能会有所帮助，但 web2py 书说：

> 如上所述，response.download 应该用于检索通过上传字段存储的文件。response.stream 可用于其他情况，例如返回一个临时文件或控制器创建的 StringIO 对象。

### - 编辑 -

我启用了客户端缓存：

```
session.forget() #important
expire_time = datetime.timedelta(days=2)

response.headers['Cache-Control'] = 'private, max-age%d'%(60*60*24*2)
response.headers['Pragma'] = None
response.headers['Expires'] = (request.utcnow + expire_time).strftime("%a, %d %b %Y %H:%M:%S GMT")
response.headers['Content-Disposition'] = \
      'attachment;filename=' + filename + ';'

return response.stream(stream, filename=filename) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:56:44.980

首先，如果图像是公开可用的并且不需要验证即可查看，那么您可以将它们存储在 /static 文件夹中，然后将它们作为静态文件提供，而不是将它们存储在 /uploads 文件夹中。在这种情况下，将自动为客户端缓存设置标头（它也将更快、更高效）。

其次，您可以使用`response.stream()`流式传输上传的文件，但它不会自动识别文件所在的文件夹，也不会从编码的文件名中解码原始文件名并将其添加到 Content-Disposition 标头（您不需要在无论如何，这种情况是因为您正在显示图像而不是下载它们）。因此，只要您将完整的文件路径传递给`response.stream()`，您应该能够在这种情况下使用它，并且它将适当地设置响应标头以进行缓存。

最后，如果您想直接设置响应标头，则类似于：

```
import os
import time
modified = os.stat(file)[stat.ST_MTIME]
mtime = time.strftime('%a, %d %b %Y %H:%M:%S GMT', time.gmtime(modified))
response.headers['Last-Modified'] = mtime
response.headers['Pragma'] = 'cache'
response.headers['Cache-Control'] = 'private' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:58:27.323

如果您提供图片，为什么不使用 Google 高性能图片服务。使用此 API (get_serving_url)，Google 将为您提供图像。您不需要处理程序！它速度很快，您可以调整大小，而且只需要一些带宽。

但这仅适用于图像。这是我的一些代码，用于从 blobstore 提供 CSS，包括 304。

```
class DynCSS(blobstore_handlers.BlobstoreDownloadHandler):

    def get(self, resource):                                        

        (key, _, _) = resource.rpartition('.')
        self.response.headers[str('ETag')] = str(key)
        if 'If-None-Match' in self.request.headers:
            etags = [x.strip()
                     for x in self.request.headers[str('If-None-Match')].split(',')]
            if key in etags:
                self.response.set_status(304) # optimize traffic 304
                return
        blob_info = blobstore.BlobInfo.get(key) 
        self.send_blob(blob_info, save_as=True) 
```

resource 参数是一个添加了 .css 的 blob_key。我使用 unicode 文字。

高性能图像服务使用：get_serving_url [https://developers.google.com/appengine/docs/python/images/functions](https://developers.google.com/appengine/docs/python/images/functions)

例子 ：

```
entity.serving_url = images.get_serving_url(entity.blob_key, size=None, secure_url=True) 
```

如何使用 ：

*   将您的图片上传到您的 blobstore
*   将带有图像文件名的 blob_key 保存在数据存储中
*   创建一个 get_serving_url。您只需创建一次。
*   在您的模板 img 标签中使用服务网址。

serving_url 看起来像这样：[https ://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70](https://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70)

# python - 使用指向 numpy 数组数据属性的指针

> ID：14515315
> 
> 赞同：0
> 
> 时间：2013-01-25T04:22:41.750
> 
> 标签：python, numpy, cython

我正在尝试解决我的应用程序中的瓶颈，这是两个矩阵的元素总和。

我正在使用 NumPy 和 Cython。我有一个`cdef`带有矩阵属性的类。由于 Cython 仍然不支持类属性中的缓冲区数组，因此我遵循[了这一点](https://groups.google.com/forum/?fromgroups=#!topic/cython-users/vFXntLy_s9Q "这个")并尝试使用指向`data`矩阵属性的指针。问题是，我确信我做错了什么，正如结果所表明的那样。

我试图做的或多或少如下：

```
cdef class the_class:
    cdef np.ndarray the_matrix
    cdef float_t* the_matrix_p

    def __init__(self):
        the_matrix_p = <float_t*> self.the_matrix.data

    cpdef the_function(self):
        other_matrix = self.get_other_matrix()

        the_matrix_p += other_matrix.data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:00:37.623

我非常怀疑添加两个 numpy 数组是一个瓶颈，你可以解决用 C 重写的东西。请参阅以下代码，它使用[`scipy.weave`](http://docs.scipy.org/doc/scipy/reference/tutorial/weave.html)：

```
import numpy as np
from scipy.weave import inline

a = np.random.rand(10000000)
b = np.random.rand(10000000)
c = np.empty((10000000,))

def c_sum(a, b, c) :
    length = a.shape[0]
    code = '''
           for(int j = 0; j < length; j++)
           {
               c[j] = a[j] + b[j];
           }
           '''
    inline(code, ['a', 'b', 'c', 'length']) 
```

一旦你运行`c_sum(a, b, c)`一次来​​编译 C 代码，这些是我得到的时间：

```
In [12]: %timeit c_sum(a, b, c)
10 loops, best of 3: 33.5 ms per loop

In [16]: %timeit np.add(a, b, out=c)
10 loops, best of 3: 33.6 ms per loop 
```

因此，如果时序差异不仅仅是随机噪声，那么在处理一千万个元素的数组时需要几毫秒的操作时，您似乎正在寻找 0.3% 的性能改进。如果它真的是一个瓶颈，这很难解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T00:33:02.657

尝试编译 ATLAS 并在此之后重新编译 numpy。这可能对加法没有帮助，但是通过更复杂的矩阵运算（当然，如果您使用这种运算），您可以获得非常好的性能提升。

看看这个[简单的基准](https://stackoverflow.com/a/7645872/1113562)。如果您的结果与帖子中给出的结果相差太远，那么您的 numpy 可能没有与某些优化的 BLAS 实现相关联。

# html - 不在网站中使用文字可以吗？

> ID：14515317
> 
> 赞同：0
> 
> 时间：2013-01-25T04:22:43.817
> 
> 标签：html, text, seo

我没有在我的网站上应用任何文本。所有信息都嵌入在图像中。主要是因为我在合并网站所需的字体时遇到了麻烦。搜索引擎让我的网站出现在结果列表中会不会很糟糕？在不输入网站内容的情况下，我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T04:29:27.863

对于索引、可用性、可访问性和可维护性来说，这是一个坏主意。

如今，您可以使用 typeface.js 在 Web 上以任何字体呈现文本：

[http://typeface.neocracy.org/fonts.html](http://typeface.neocracy.org/fonts.html)

或者使用 CSS 中的 @font-face 直接将字体发送到浏览器：

[如何为我的网站使用 .woff 字体？](https://stackoverflow.com/questions/12812441/how-do-i-use-woff-fonts-for-my-website)

其他需要考虑的事项：

*   您将为您的用户中断复制+粘贴。也许他们想从您的联系页面复制电话号码或电子邮件地址？
*   对非桌面浏览器有何影响，可能是较小的屏幕，可能无法按预期布局页面？
*   那些可能想要缩放您的网页以获得更好的可见性的高分辨率用户呢？对于文本等矢量对象，这可以正常工作，但对于图像，它会显得像素化和丑陋。
*   如果您决定更改正文的颜色怎么办？对于图像，您必须为网站的每个页面重新渲染新图像。使用 html+css 正确完成，您只需更改单个文件中的单个值即可实现相同的效果。

对我来说，这从根本上与网络的精神背道而驰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T04:24:36.700

老实说，这意味着您的网站没有被索引。但是如果你想让你的内容被索引，你必须将`alt`内容添加到你的所有图像中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T04:56:50.687

使用图像而不是字体不是一个好习惯。您可以使用 CSS 字体或使用 Google Web 字体...

[http://www.google.com/webfonts](http://www.google.com/webfonts)

但是这个网页字体在 IE 中可能有一些问题。

最好使用@font-face。

# iphone - 当我尝试在核心绘图图中绘制第二个绘图时，应用程序在我的 iOS 模拟器中崩溃

> ID：14515320
> 
> 赞同：1
> 
> 时间：2013-01-25T04:23:02.630
> 
> 标签：iphone, ios, uiscrollview, core-plot, uipagecontrol

`

```
 #import "TUTSimpleScatterPlot.h"
    #import "CPDConstants.h"
    #import "CPDStockPriceStore.h"

    @implementation TUTSimpleScatterPlot

    @synthesize hostView = _hostingView;  
    @synthesize graph = _graph;  
    @synthesize graphEmpActualWeightData = _graphEmpActualWeightData;  
    @synthesize graphEmpGoalWeightData = _graphEmpGoalWeightData;

    // Initialise the scatter plot in the provided hosting view with the provided data.  
    // The data array should contain NSValue objects each representing a CGPoint.   

    -(id)initWithHostingView:(CPTGraphHostingView *)hostingView andEmpActualWeight:(NSMutableArray *)valuesEmpActualWeight andEmpGoalWeight:(NSMutableArray *)valuesEmpGoalWeight
    {

       self = [super init];  
       if ( self != nil ) {  
            self.hostView = hostingView;   
            self.graphEmpActualWeightData = valuesEmpActualWeight;    
            self.graphEmpGoalWeightData = valuesEmpGoalWeight;   
            self.graph = nil;  
        }   
        return self;  
    }   
     #pragma mark - Chart behavior   
    -(void)initPlot {    
        [self configureGraph];   
        [self configurePlots];   
        [self configureAxes];   
    }    

    -(void)configureGraph {    
        // 1 - Create the graph    
        CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:self.hostView.bounds];   
        [graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];   
        self.hostView.hostedGraph = graph;    
        // 2 - Set graph title    
        NSString *title = @"Body weight actual and goal";    
        graph.title = title;    
        // 3 - Create and set text style    
        CPTMutableTextStyle *titleStyle = [CPTMutableTextStyle textStyle];    
        titleStyle.color = [CPTColor whiteColor];    
        titleStyle.fontName = @"Helvetica-Bold";   
        titleStyle.fontSize = 16.0f;   
        graph.titleTextStyle = titleStyle;   
        graph.titlePlotAreaFrameAnchor = CPTRectAnchorTop;   
        graph.titleDisplacement = CGPointMake(0.0f, 10.0f);   
        // 4 - Set padding for plot area   
        [graph.plotAreaFrame setPaddingLeft:30.0f];   
        [graph.plotAreaFrame setPaddingBottom:30.0f];   
        // 5 - Enable user interactions for plot space   
        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;   
        plotSpace.allowsUserInteraction = YES;   
        }   

    -(void)configurePlots {   
        // 1 - Get graph and plot space   
        CPTGraph *graph = self.hostView.hostedGraph;   
        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;   
            // 2 - Create the two plots   
        CPTScatterPlot *actualPlot = [[CPTScatterPlot alloc] init];   
        actualPlot.dataSource = self;   
        actualPlot.identifier = CPDTickerSymbolActual;   
        CPTColor *actualColor = [CPTColor redColor];   
        [graph addPlot:actualPlot toPlotSpace:plotSpace];   
            CPTScatterPlot *goalPlot = [[CPTScatterPlot alloc] init];   
        goalPlot.dataSource = self;   
        goalPlot.identifier = CPDTickerSymbolGoal;   
        CPTColor *goalColor = [CPTColor greenColor];   
        [graph addPlot:goalPlot toPlotSpace:plotSpace];   
        // 3 - Set up plot space   
        [plotSpace scaleToFitPlots:[NSArray arrayWithObjects:actualPlot,nil]];      
        CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];      
        [xRange expandRangeByFactor:CPTDecimalFromCGFloat(1.1f)];      
        plotSpace.xRange = xRange;      
            CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];    
        [yRange expandRangeByFactor:CPTDecimalFromCGFloat(1.2f)];     
        plotSpace.yRange = yRange;      
            // 4 - Create styles and symbols   
        CPTMutableLineStyle *actualLineStyle = [actualPlot.dataLineStyle mutableCopy];   
        actualLineStyle.lineWidth = 2.5;   
        actualLineStyle.lineColor = actualColor;      
            actualPlot.dataLineStyle = actualLineStyle;   
        CPTMutableLineStyle *actualSymbolLineStyle = [CPTMutableLineStyle lineStyle];   
        actualSymbolLineStyle.lineColor = actualColor;      
            CPTPlotSymbol *actualSymbol = [CPTPlotSymbol hexagonPlotSymbol];   
        actualSymbol.fill = [CPTFill fillWithColor:actualColor];   
        actualSymbol.lineStyle = actualSymbolLineStyle;   
        actualSymbol.size = CGSizeMake(6.0f, 6.0f);   
            actualPlot.plotSymbol = actualSymbol;   
            CPTMutableLineStyle *goalLineStyle = [goalPlot.dataLineStyle mutableCopy];   
        goalLineStyle.lineWidth = 1.0;   
        goalLineStyle.lineColor = goalColor;   
        goalPlot.dataLineStyle = goalLineStyle;   
        CPTMutableLineStyle *goalSymbolLineStyle = [CPTMutableLineStyle lineStyle];   
        goalSymbolLineStyle.lineColor = goalColor;   
        CPTPlotSymbol *goalSymbol = [CPTPlotSymbol starPlotSymbol];   
        goalSymbol.fill = [CPTFill fillWithColor:goalColor];   
        goalSymbol.lineStyle = goalSymbolLineStyle;   
        goalSymbol.size = CGSizeMake(6.0f, 6.0f);   
        goalPlot.plotSymbol = goalSymbol;   
    }   

    -(void)configureAxes {   
        // 1 - Create styles   
        CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];   
        axisTitleStyle.color = [CPTColor whiteColor];   
        axisTitleStyle.fontName = @"Helvetica-Bold";   
        axisTitleStyle.fontSize = 12.0f;   
        CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];   
        axisLineStyle.lineWidth = 2.0f;   
        axisLineStyle.lineColor = [CPTColor whiteColor];   
        CPTMutableTextStyle *axisTextStyle = [[CPTMutableTextStyle alloc] init];   
        axisTextStyle.color = [CPTColor whiteColor];   
        axisTextStyle.fontName = @"Helvetica-Bold";   
        axisTextStyle.fontSize = 11.0f;   
        CPTMutableLineStyle *tickLineStyle = [CPTMutableLineStyle lineStyle];   
        tickLineStyle.lineColor = [CPTColor whiteColor];   
        tickLineStyle.lineWidth = 2.0f;   
        CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];   
        tickLineStyle.lineColor = [CPTColor blackColor];   
        tickLineStyle.lineWidth = 1.0f;   
        // 2 - Get axis set   
        CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostView.hostedGraph.axisSet;   
        // 3 - Configure x-axis   
        CPTAxis *x = axisSet.xAxis;   
        x.title = @"Weeks ->";   
        x.titleTextStyle = axisTitleStyle;   
        x.titleOffset = 15.0f;   
        x.axisLineStyle = axisLineStyle;   
        x.labelingPolicy = CPTAxisLabelingPolicyNone;   
        x.labelTextStyle = axisTextStyle;   
        x.majorTickLineStyle = axisLineStyle;   
        x.majorTickLength = 4.0f;   
        x.tickDirection = CPTSignNegative;   //commented by me   
       // x.tickDirection = CPTSignPositive;   
        NSInteger xmajorIncrement = 2;   
        NSInteger xminorIncrement = 1;   
        //CGFloat dateCount = [[[CPDStockPriceStore sharedInstance] datesInMonth] count];   
        CGFloat dateCount = 20;   
        NSMutableSet *xLabels = [NSMutableSet setWithCapacity:dateCount];   
        NSMutableSet *xLocations = [NSMutableSet setWithCapacity:dateCount];   
        NSInteger i = 0;   
        for (NSString *date in [[CPDStockPriceStore sharedInstance] datesInMonth]) {   
            CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:date  textStyle:x.labelTextStyle];   
            CGFloat location = i++;   
           // CGFloat location = ++i;   
            label.tickLocation = CPTDecimalFromCGFloat(location);   
            label.offset = x.majorTickLength;   
            if (label) {   
                [xLabels addObject:label];   
                [xLocations addObject:[NSNumber numberWithFloat:location]];   
            }   
        }   
        x.axisLabels = xLabels;   
        x.majorTickLocations = xLocations;   
        // 4 - Configure y-axis   
        CPTAxis *y = axisSet.yAxis;   
        y.title = @"Weight ->";   
        y.titleTextStyle = axisTitleStyle;   
        y.titleOffset = -40.0f;  //commented by me   
        y.axisLineStyle = axisLineStyle;   
        y.majorGridLineStyle = gridLineStyle;   
        y.labelingPolicy = CPTAxisLabelingPolicyNone;   
        y.labelTextStyle = axisTextStyle;   
        y.labelOffset = 16.0f;   
        y.majorTickLineStyle = axisLineStyle;   
        y.majorTickLength = 4.0f;   
        y.minorTickLength = 2.0f;   
        y.tickDirection = CPTSignPositive;   
        NSInteger majorIncrement = 40;   
        NSInteger minorIncrement = 20;   
        CGFloat yMax = 300.0f;  // should determine dynamically based on max price   
        NSMutableSet *yLabels = [NSMutableSet set];   
        NSMutableSet *yMajorLocations = [NSMutableSet set];   
        NSMutableSet *yMinorLocations = [NSMutableSet set];   
        for (NSInteger j = minorIncrement; j <= yMax; j += minorIncrement) {   
            NSUInteger mod = j % majorIncrement;   
            if (mod == 0) {   
                CPTAxisLabel *label = [[CPTAxisLabel alloc] initWithText:[NSString stringWithFormat:@"%i", j] textStyle:y.labelTextStyle];   
                NSDecimal location = CPTDecimalFromInteger(j);   
                label.tickLocation = location;   
                label.offset = -y.majorTickLength - y.labelOffset;   
                if (label) {   
                    [yLabels addObject:label];   
                }   
                [yMajorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:location]];   
            } else {   
                [yMinorLocations addObject:[NSDecimalNumber decimalNumberWithDecimal:CPTDecimalFromInteger(j)]];   
            }   
        }   
        y.axisLabels = yLabels;   
        y.majorTickLocations = yMajorLocations;   
        y.minorTickLocations = yMinorLocations;   
    }   

    #pragma mark - CPTPlotDataSource methods   
    -(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {   
        //return [[[CPDStockPriceStore sharedInstance] datesInMonth] count];   
        return 20;   

    }   

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {
    NSInteger valueCount = [[[CPDStockPriceStore sharedInstance] datesInMonth] count];
  //  NSValue *value = [self.graphData objectAtIndex:index];
 //   CGPoint point = [value CGPointValue];

    switch (fieldEnum) {
        case CPTScatterPlotFieldX:
            if (index < valueCount) {
               //if( [plot.identifier isEqual:CPDTickerSymbolGoal] == YES)
                return [NSNumber numberWithUnsignedInteger:index];
            }

            break;

        case CPTScatterPlotFieldY:
            if ([plot.identifier isEqual:CPDTickerSymbolActual] == YES ) {
                //return [[[CPDStockPriceStore sharedInstance] monthlyPrices:CPDTickerSymbolAAPL] objectAtIndex:index];

                if(index < [_graphEmpActualWeightData count]){
                  // return [_graphEmpActualWeightData objectAtIndex:index];
                    return   (NSDecimalNumber *)[NSDecimalNumber numberWithDouble:[[_graphEmpActualWeightData objectAtIndex:index] doubleValue]];
                }
                else{
                //    return (NSNumber *) nil;
                }

            } else if ([plot.identifier isEqual:CPDTickerSymbolGoal] == YES) {
                //return [[[CPDStockPriceStore sharedInstance] monthlyPrices:CPDTickerSymbolGOOG]
            //return [_graphEmpGoalWeightData objectAtIndex:index];
                return   (NSDecimalNumber *)[NSDecimalNumber numberWithDouble:[[_graphEmpGoalWeightData objectAtIndex:index] doubleValue]];
            }
            break;
    }
    return [NSDecimalNumber zero];
}

// This does the actual work of creating the plot if we don't already have a graph object.
-(void)initialisePlot
{
    // Start with some simple sanity checks before we kick off
    if ( (self.hostView == nil) || (self.graphEmpGoalWeightData == nil)  ) {
        NSLog(@"TUTSimpleScatterPlot: Cannot initialise plot without hosting view or data.");
        return;
    }

    if ( self.graph != nil ) {
        NSLog(@"TUTSimpleScatterPlot: Graph object already exists.");
        return;
    }
    [self initPlot];

} 
```

`嗨朋友们，从昨天开始我一直在努力解决这个问题。迫切需要你的帮助。我是核心图的新手，当我尝试在图中绘制第二个图时一直面临崩溃问题。每次我都会得到不同的不同原因。其中一些粘贴在下面。

1) ***由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'-[__NSArrayM numberOfRecordsForPlot:]: unrecognized selector sent to instance 0x726adc0'

2)EXC_BAD_ACCESS

3) ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[CALayerArray numberOfRecordsForPlot:]: unrecognized selector sent to instance 0x769f5b0”

4) ***由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'-[__NSDecimalNumber numberOfRecordsForPlot:]: unrecognized selector sent to instance 0x726adc0'

我真的不明白我的代码出了什么问题。当我工作正常时

# cordova - 列出设备 cordova/phonegap 上的所有音乐文件

> ID：14515321
> 
> 赞同：1
> 
> 时间：2013-01-25T04:23:20.563
> 
> 标签：cordova, media

我是 Cordova 的新手，我正在尝试构建一个应用程序，我需要在其中获取设备上的所有音乐文件。我将如何找到它们？我可以使用 DirectoryReader 输入音乐文件夹的直接路径，但我想自动找到它。这可能吗？有没有你知道的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:41:45.773

好吧，您将不得不从根目录开始递归地读取所有文件夹。读取根文件夹。如果对象是文件夹 - 读取其内容。如果对象是文件 - 检查它是否是媒体文件并将其路径添加到列表中。

# ios - obj-c 继承变量为空

> ID：14515327
> 
> 赞同：0
> 
> 时间：2013-01-25T04:23:46.277
> 
> 标签：ios, inheritance

我有一个具有自定义 init 方法的基类，然后使用通过 init 方法传入的值在其子类上调用自定义 init 方法。问题是当我尝试通过子类 Via 访问在基类中分配了值的变量时，`super`这些值为空，就像基类是一个完全不同的对象。是因为基类还没有从它的 init 方法返回吗？还是我在这里继承错误？要遵循的代码。

**界面**

```
@interface WTFGameBoard : NSObject
{
    @protected
    UIView *_answerView;
    UIView *_keyboardView;
    NSMutableArray* _answerSeperatedByCharacter;

    WTFAnswerBoard *_answerBoard;
    WTFGameKeyboard *_gameKeyboard;

    OpenGameViewController *_weakGameViewRef;
    GameInfo *_gameinfo;
}

-(id) initWithGameVC:(OpenGameViewController*)gameVC;

@property (nonatomic,unsafe_unretained)OpenGameViewController *weakGameViewRef;
@property (nonatomic,strong)GameInfo *gameInfo;

@end 
```

**执行**

```
@implementation WTFGameBoard
@synthesize weakGameViewRef = _weakGameViewRef;
@synthesize gameInfo = _gameinfo;

-(id) initWithGameVC:(OpenGameViewController*)gameVC
{
    if (self = [super init])
    {
        //[weakGameViewRef ]
        _answerView = [gameVC answerView];
        _keyboardView = [gameVC keyboardView];

        self.weakGameViewRef = gameVC;
        self.gameInfo = [[CurrentGamesInfo sharedCurrentGamesInfo]_selectedGame];

        _answerBoard = [[WTFAnswerBoard alloc] initWithAnswer:[gameVC answer] blankSpaceImageView:[gameVC answerBox]];
        _gameKeyboard = [[WTFGameKeyboard alloc] initWithButtons:[gameVC letterSelectButtons]];

    }

    return self;
}

@end 
```

**界面**

```
@interface WTFAnswerBoard : WTFGameBoard
{
    NSMutableArray *WTFAnswerSpaces;
    NSMutableArray *_answerBlankBlocks;
    NSMutableArray *_answerGiven;
    NSMutableArray *_answerBlankOriginalPosition;
    NSString *_answer;
}

-(id)initWithAnswer:(NSString*)answer blankSpaceImageView:(UIImageView*)answerBox; 
```

**执行**

```
-(id)initWithAnswer:(NSString*)answer blankSpaceImageView:(UIImageView*)answerBox
{
    if ( self = [super init] )
    {
        _weakGameViewRef = [super weakGameViewRef];//WHY U NO NOT BE NULL?
        _gameinfo = [super gameInfo];//WHY U NO NOT BE NULL?

        _answerBlankBlocks = [_weakGameViewRef answerBlankBlocks];
        _answerGiven = [_weakGameViewRef answerGiven];
        _answerBlankOriginalPosition = [_weakGameViewRef answerBlankOriginalPosition];

        [self SetupBlankAnswerSpacesForAnswer:answer withTemplate:answerBox];
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:27:31.333

问题是您没有在派生类中调用自定义构造函数：

```
if ( self = [super init] ) 
```

您正在调用默认值，它没有被覆盖，并且不会初始化您尝试访问的 ivars。

您应该调用自定义构造函数：

```
if ( self = [super initWithGameVC:gameVC] ) 
```

当然，这意味着您需要传递参数，或者通过初始化您想要初始化的内容来覆盖默认构造函数，而无需任何参数。

我不明白的另一件事是为什么要在自定义类中设置派生类的 ivars：

```
_weakGameViewRef = [super weakGameViewRef]; 
```

这基本上什么都不做，因为 ivar 是相同的，如果您设置基类之一，那么您可以直接访问它。

编辑

因为你在这里有一个奇怪的依赖问题，一个快速的解决方案是有类似的东西

```
WTFAnswerBoard initWithWTFGameBoard:(WTFGameBoard*)board {
  self.board = board;
} 
```

这样您就可以访问实例化`WTFAnswerBoard`并保持继承但将使用切换为组合的板（通过添加一个属性来`WTFAnswerBoard`使您的递归初始化不会发生。

# forms - 触发 form_errors(form)

> ID：14515336
> 
> 赞同：1
> 
> 时间：2013-01-25T04:24:32.443
> 
> 标签：forms, symfony-2.1

我正在做我的第一个 Symfony2 项目，并且刚刚开始使用表单模板。我找不到任何关于`form_errors(form)`输出的信息。据我所知，它应该输出与字段无关的全局表单错误。这意味着什么以及如何触发它们以用于模板目的？

# magento - 在订单网格中添加自定义列（Magento 1.7.0.0）

> ID：14515338
> 
> 赞同：2
> 
> 时间：2013-01-25T04:24:33.607
> 
> 标签：magento, magento-1.7

我在 Magento 1.7.0.0 的订单网格中添加自定义列时遇到了这个问题，我希望你能在这里帮我一把。基本上我遵循了这个指南[http://www.atwix.com/magento/customize-orders-grid/](http://www.atwix.com/magento/customize-orders-grid/)解释了我必须制作一个本地版本`/app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php`并进行一些更改才能拥有我想要的额外列。按照上述指南，它说我必须编辑函数`_prepareCollection()`来添加这一行（指定我想在数组中提取的字段）

```
$collection->getSelect()->join('magento_sales_flat_order_address', 'main_table.entity_id = magento_sales_flat_order_address.parent_id',array('telephone', 'email')); 
```

前

```
return parent::_prepareCollection(); 
```

并像这样添加两列`_prepareColumns()`：

```
$this->addColumn('telephone', array(
        'header' => Mage::helper('sales')->__('Telephone'),
        'index' => 'telephone',
    ));

$this->addColumn('email', array(
        'header' => Mage::helper('sales')->__('Email'),
        'index' => 'email',
    )); 
```

就是这样，显然......或者可能不是，因为当我这样做时它会引发以下错误：

```
Item (Mage_Sales_Model_Order) with the same id "XXXX" already exist 
```

根据下面的评论，解决方案是在`_prepareCollection`before中添加以下行`$this->setCollection($collection)`：

```
$collection->getSelect()->group('main_table.entity_id'); 
```

添加该行后，订单网格现在像我想要的那样显示电子邮件和电话列，但结果分页停止工作，它只显示最近的 20 个，并显示**“Pages 1 out of 1”**，**“2 个记录发现”**在上面。我似乎无法弄清楚为什么会发生这种情况，而且我看到的每条评论都没有超出上面的最后一条指令。什么可能是这个问题的原因？

我认为它可以被复制，因为我没有对这个模型进行任何其他修改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T12:20:08.410

好的，解决了。这就是我所做的：受此答案[https://stackoverflow.com/a/4219386/2009617](https://stackoverflow.com/a/4219386/2009617)的启发，我复制了该文件`lib/Varien/Data/Collection/Db.php`，将其放在下面`app/core/local/Varien/Data/Collection/Db.php`并复制了该答案中建议的修改以修复组选择计数错误这给了我上面的问题。到目前为止，它似乎奏效了。

但是，行中有一个问题，当我点击订单时，它说订单“不再存在”，所以我检查了实际的 url，结果发现 url 中的 order_id 与“entity_id”相同order_address 表，它与订单的实际关联 ID (parent_id) 不对应。在对 MySQL 查询进行了很长时间的调整后，我意识到问题出在我创建的函数`_prepareColumns()`和函数调用的`getRowUrl()`函数中`/app/code/local/Mage/Adminhtml/Block/Sales/Order/Grid.php`，因为它们检索了错误的 Id。所以我做了以下更改：

在`_prepareColumns()`对应于 Action 列的代码中，我将*'getter'*更改为*'getParentId'*，如下所示：

```
 if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/view')) {
        $this->addColumn('action',
            array(
                'header'    => Mage::helper('sales')->__('Action'),
                'width'     => '50px',
                'type'      => 'action',
                //~ 'getter'     => 'getId',
                'getter'     => 'getParentId',
                'actions'   => array(
                    array(
                        'caption' => Mage::helper('sales')->__('View'),
                        'url'     => array('base'=>'*/sales_order/view'),
                        'field'   => 'order_id',
                    )
                ),
                'filter'    => false,
                'sortable'  => false,
                'index'     => 'stores',
                'is_system' => true,
        ));
    } 
```

在`getRowUrl()`函数中，我更改了函数中的 $row 语句，`getUrl()`如下所示：

```
public function getRowUrl($row)
{
    if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/view')) {
        //~ return $this->getUrl('*/sales_order/view', array('order_id' => $row->getId()));
        return $this->getUrl('*/sales_order/view', array('order_id' => $row->getParentId()));
    }
    return false;
} 
```

现在它就像一个魅力。我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T13:56:31.553

问题在查询中。而不是这个查询：

```
$collection->getSelect()->join('magento_sales_flat_order_address', 'main_table.entity_id = magento_sales_flat_order_address.parent_id',array('telephone', 'email')); 
```

你应该使用这个：

```
$collection->getSelect()->join('sales_flat_order_address', 'main_table.entity_id = sales_flat_order_address.parent_id AND sales_flat_order_address.address_type = "shipping" ',array('telephone', 'email')); 
```

在表 sales_flat_order_address 中，parent_id 是重复的。第一个用于计费，第二个用于运输。因此，您只需选择其中一项：计费或运输。此值在列 address_type...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:07:29.210

尝试在 addColumn 函数中使用 filter_index：

```
$this->addColumn('telephone', array(
    'header' => Mage::helper('sales')->__('Telephone'),
    'index' => 'telephone',
     'filter_index' => 'tablename.telephone'
)); 
```

您可以通过打印出 sql 查询来找出表名：

```
var_dump((string)$collection->getSelect()) 
```

# perl - Perl 程序计算用户输入的数字的总和

> ID：14515340
> 
> 赞同：0
> 
> 时间：2013-01-25T04:24:39.327
> 
> 标签：perl, input, average

我的脚本需要获取用户输入的一系列数字并找到它们的平均值。我想使用“文件结尾”这一行来表明用户已完成输入代码。任何帮助，将不胜感激。以下是我到目前为止所拥有的。我想我真的很接近，但我错过了一些东西。

代码：

```
#! /usr/bin/perl
use 5.010;

print "Enter the scores and type end-of-file when done";
chomp(@scores = <STDIN>);
foreach (@scores) {
    push_average(total(@scores));
}

sub total {
    my $sum;
    foreach (@_) {
        $sum += $_;
    }
    sum;
}

sub average {
    if (@_ == 0) {return}
    my $count = @_;
    my $sum = total(@_);
    $sum/$count;
}

sub push_average {
    my $average = average(@_);
    my @list;
    push @list, $average;
    return @list;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:38:21.863

你很接近。在每个 Perl 脚本的顶部添加`use strict; use warnings`会提醒您可能不会注意到的错误。

一些提示：

*   您忘记`$sum`了`total`. 目前，您返回一个字符串“sum”（没有严格的变量），或者可能调用一个名为`sum`.

*   您不需要`foreach`主要部分，而是

    ```
    my @averages = push_average(@scores); 
    ```

    `total`里面已经计算好了`push_average`

*   您可能想要打印出结果平均值：

    ```
    my $avg = $averages[0];
    say "The average of these numbers is $avg"; 
    ```

*   这`push_average`很愚蠢；您返回一个包含一个元素的新数组。你也可以返回那个元素。

* * *

建议的脚本：

```
use strict; use warnings; use 5.010;
use List::Util qw/sum/;  # very useful module

# say is like print, but appends a newline. Available with 5.10+
say "Please enter your numbers, finish with Ctrl+D";
my @nums = <STDIN>;
chomp @nums;

# The // is the defined-or operator
# interpolating undef into a string causes a warning.
# Instead, we give an expressive message:
my $avg = average(@nums) // "undefined"; 

say "The average was $avg";

sub average { @_ ? sum(@_) / @_  : undef } # return undef value if called without args 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:32:10.550

读到换行符。你在这里有几个选择。您可以要求用户输入以空格分隔的数字，然后将其拆分为您的 @choices 数组。或者您可以继续要求他们输入一个数字，或者直接按 Enter 键完成。

答案 1)

```
print "Enter scores separated by a space and press enter when done";
chomp($input = <STDIN>);
@choices = split(' ', $input); 
```

答案 2)

```
@chomp = ();
do {
   print "Enter a score and then press enter. If done, just press enter.";
   chomp($temp = <STDIN>);
   if($trim ne '') {
     push(@choices, $temp);
   }
} until ($temp eq ''); 
```

# android - 平板电脑的布局

> ID：14515343
> 
> 赞同：1
> 
> 时间：2013-01-25T04:25:13.903
> 
> 标签：android, android-layout

附加的布局适用于手机（Samsung Infuse），但在将应用上传到平板电脑（Nexus 7）时无法正确显示布局。按钮大小不正确。我怎样才能解决这个问题？

```
 <?xml version="1.0" encoding="utf-8"?>
         <LinearLayout xmlns:android="http://schemas.android.com/apk/res/"
            style="@string/menu_settings"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/gecko25"
            android:gravity="center_horizontal"
            android:orientation="horizontal"
            android:textAlignment="center"
            android:visibility="visible" >

        <Button
            android:id="@+id/link1_btn"
            android:layout_width="98dp"
            android:layout_height="wrap_content"
            android:minHeight="58dip"
            android:minWidth="98dip"
            android:text="About"
            android:textStyle="bold" />

        <Button
            android:id="@+id/link2_btn"
            android:layout_width="98dp"
            android:layout_height="wrap_content"
            android:minHeight="58dip"
            android:minWidth="98dip"
            android:text="Experience"
            android:textStyle="bold" />

        <Button
            android:id="@+id/link3_btn"
            android:layout_width="98dp"
            android:layout_height="wrap_content"
            android:minHeight="58dip"
            android:minWidth="98dp"
            android:selectAllOnFocus="false"
            android:text="Bulacards"
            android:textStyle="bold" />

                    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:31:53.023

不建议您将 tvdpi 用于 Nexus 7 屏幕。

看到这个： [http ://android-developers.blogspot.com/2012/07/getting-your-app-ready-for-jelly-bean.html](http://android-developers.blogspot.com/2012/07/getting-your-app-ready-for-jelly-bean.html)

检测 7" 平板电脑（如 Nexus 7）的最佳方法可能是使用限定符：

布局-sw600dp

以及 10 英寸平板电脑的预选赛：

布局-sw720dp

您可能想尝试在 sp 而不是 dp 中指定按钮大小，因为如果用户更改默认字体大小但 wrap_content 和/或使用权重通常最好，它们可能需要更大或更小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:56:43.023

为不同的密度制作不同的布局。即，将相同的 xml 文件放在
`layout-hdpi`,
`layout-xhdpi`,
`layout-tvdpi`

要在 res/layout 中创建这些文件夹，请执行以下步骤：

右键单击布局文件夹-->新建-->其他-->Andorid xml布局-->下一个-->给出文件名（所有密度都必须相同）-->AvailableQulaifiers选项卡选择密度->将其移至借助中间的箭头选择限定符->选择什么密度（中高电视）->完成

例如：

*Nexus S*和*Nexus 一*--->`hdpi`

*银河 Nexus* ---->`xhdpi`

*连结 7* --->`tvdpi`

并给出`heights`..`widths`最佳`Button`做法是将它们设置为`wrapcontent`，如果您的场景需要高度，请按照上述步骤操作。并给出高度和宽度，以便在不同**密度下的手机和平板电脑有所不同**

# objective-c - 将 Plist 加载为对象

> ID：14515345
> 
> 赞同：0
> 
> 时间：2013-01-25T04:25:35.180
> 
> 标签：objective-c, plist

Stackoverflow 研究员。

我正在尝试加载一个`plist`. 但是`plist`，`root`可以是`NSArray`或`NSDictionary`。有没有更漂亮的方法来确定它是哪一个（通过标题的类型`root`）`NSArray`或`NSDictionary`？`NSDictionary`显然，从or`NSArray`或中拉取文件是很常见的`NSData`。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:37:28.427

通过使用`NSPropertyListSerialization`该类，您可以从 an 反序列化您的 plist 文件`NSData`，然后通过快速检查了解它是 a`NSDictionary`还是 a `NSArray`through`isMemberOfClass:`

```
id plist = [NSPropertyListSerialization propertyListWithData:data options:0 format:nil error:nil]

if ([plist isMemberOfClass:[NSArray class]]) {
  ..
} 
```

# c# - 从继承子类对象访问父类虚方法

> ID：14515352
> 
> 赞同：5
> 
> 时间：2013-01-25T04:26:19.887
> 
> 标签：c#, oop, inheritance

我想知道是否可以使用继承类（覆盖方法）对象访问基本虚拟方法。

我知道这不是一个好习惯，但我想知道这在技术上是否可行。我不遵循这种做法，只是出于好奇而询问。

我确实看到了一些类似的问题，但我没有得到我正在寻找的答案。

例子：

```
public class Parent
{
    public virtual void Print()
    {
        Console.WriteLine("Print in Parent");
    }
}

public class Child : Parent
{
    public override void Print()
    {
        Console.WriteLine("Print in Child");
    }
}

class Program
{
    static void Main(string[] args)
    {
         Child c = new Child();
         //or Parent child = new Child(); 
         child.Print();  //Calls Child class method
         ((Parent)c).Print(); //Want Parent class method call
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T20:20:48.630

根据我评论的链接副本，您可以使用一些反射技巧来做到这一点：

```
static void Main(string[] args)
{
    Child child = new Child();
    Action parentPrint = (Action)Activator.CreateInstance(typeof(Action), child, typeof(Parent).GetMethod("Print").MethodHandle.GetFunctionPointer());

    parentPrint.Invoke();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:50:24.623

不 - 不能调用基类的 Virtual 方法 - 在这种情况下调用该方法的最派生实现。`"Print in Child"`在您给出的示例中，它会在两种情况下打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T05:09:27.580

在我看来，你能做的最好的事情是：

```
public class Parent
{
    public virtual void Print()
    {
        Console.WriteLine("Print in Parent");
    }
}

public class Child : Parent
{
    public override void Print()
    {
        base.Print();
        Console.WriteLine("Print in Child");
    }
}

class Program
{
    static void Main(string[] args)
    {
         Child c = new Child();
         //or Parent child = new Child(); 
         child.Print();  //Calls Child class method
         ((Parent)c).Print(); //Want Parent class method call
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T19:47:01.217

我不知道这什么时候会有帮助。但是一个体面的解决方法可能是重载或编写一个只调用父类的虚拟方法。它看起来像这样：

```
public class Child : Parent
{
    public void Print(bool onlyCallFather)
    {
    if(onlyCallFather)
        base.Print();
    else
        Print();
    }
} 
```

然后在你的主要方法中：

```
class Program
{
    static void Main(string[] args)
    {
         Child c = new Child();
         child.Print(false);  //Calls Child class method
         child.Print(true);  //Calls only the one at father
    }
} 
```

所以它会做你想做的事。实际上，我已经看到过这种解决方法来判断您是否希望调用基本方法。

# c# - 如何在 C# 中使用函数 D3DXSaveSurfaceToFile()

> ID：14515353
> 
> 赞同：0
> 
> 时间：2013-01-25T04:26:32.927
> 
> 标签：c#, directx, directx-9

我使用directx 9来构建模型。

我想将其保存为 bmp 文件。我找到了函数 D3DXSaveSurfaceToFile()

但我不知道如何在 C# 中使用它。

我该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:04:16.920

不幸的是，c# 中没有这样的功能。请尝试以下代码：

```
try
{

// initialize D3D device 
PresentParameters presentParams = new PresentParameters();
presentParams.Windowed = true;
presentParams.SwapEffect = SwapEffect.Discard;
Device myDevice = new
Device(0,DeviceType.Hardware,this,CreateFlags.SoftwareVertexProcessing,presentParams);

// create a surface the size of screen, 
// format had to be A8R8G8B8, as the GetFrontBufferData returns
// only memory pool types allowed are Pool.Scratch or Pool.System memory
Surface mySurface =
myDevice.CreateOffscreenPlainSurface(SystemInformation.PrimaryMonitorSize.Width,SystemInformation.PrimaryMonitorSize.Height,Format.A8R8G8B8,Pool.SystemMemory);

//Get the front buffer.
myDevice.GetFrontBufferData(0,mySurface);

//saves surface to file
SurfaceLoader.Save("surface.bmp",ImageFileFormat.Bmp,mySurface);

}
catch
{
   //whatever
} 
```

# vba - 根据特定单元格值从 excel 复制特定行

> ID：14515369
> 
> 赞同：1
> 
> 时间：2013-01-25T04:28:52.823
> 
> 标签：vba, excel, vbscript

我在一本 Excel 书中有多个工作表，每个工作表都包含模块数据。我想从每个工作表中复制所有模块数据并将其粘贴到新的 Excel 书中。**如何使用VBScript**做到这一点？

**所有工作表在rawData.xls**中看起来都像这样

 **```
 A        B        C 
Module1  999     asda
Module2  22      asda
Module1  33      asda
Module7  44      asda
Module3  55      asda
Module2  66      asda
Module5  77      asda 
```

我需要迭代**rawData.xls**中的所有工作表，复制所有包含“Module1”的行并将其粘贴到**result.xls**，然后重复 Module2、Module3、...

有没有办法使用 VB 脚本使这种自动化？

任何帮助表示赞赏。提前致谢

我的代码：

```
Sub copy() 
    Set objRawData = objExcel.Workbooks.Open("rawData.xls") 
    Set objPasteData = objExcel.Workbooks.Open("result.xls") 
    StartRow = 1 RowNum = 2 
    Do Until IsEmpty(objRawData.WorkSheets("Sheet1").Range("C" & RowNum)) 
      If objRawData.WorkSheets("Sheet1").Range("C" & RowNum) = "module1" Then
        StartRow = StartRow + 1 
        objPasteData.WorkSheets("Final").Rows(StartRow).Value = _ 
                objRawData.WorkSheets("Sheet1").Rows(RowNum).Value 
      End If 
      RowNum = RowNum + 1 
    Loop 
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:15:08.457

而不是让流行的“你试过什么？” 强迫您在没有计划的情况下编写代码，考虑（并要求）将特定的工作表/表格行选择到新工作表/表格中所需的知识/知识/方法/工具。

“选择”意味着 SQL，虽然 Excel 不是数据库管理系统，但您可以使用 .XLS 作为数据库：在[ADO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675532%28v=vs.85%29.aspx)的帮助下。

所以我的计划是：

(1) 打开一个[ADODB.Connection](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681519%28v=vs.85%29.aspx)到您的源 .XLS

(2) 获取所有要处理的工作表/表格的列表

(3) 使用 (2) 生成如下语句

```
SELECT [A] FROM [Tbl1] UNION SELECT [A] FROM [Tbl2] UNION SELECT [A] FROM [Tbl3] ORDER BY [A] 
```

(4) 执行 (3) 并遍历结果集

(5) 对于每个 Module1 ... ModuleLast

(5a) 要在目标 .XLS 中为模块 M 创建新工作表/表格，请执行如下语句

```
SELECT * INTO [TblModuleM]  IN "path\to\your\dst.xls" "Excel 8.0;" FROM [Tbl1] WHERE [A] = 'ModuleM' 
```

(5b) For Each Tbl2 ... TblLast 使用如下语句附加 ModuleM 行

```
INSERT INTO [TblModuleM]  IN "path\to\your\dst.xls" "Excel 8.0;" SELECT * FROM [TblT] WHERE [A] = 'ModuleM' 
```

演示代码让您对计划和一些关键字有信心查找：

```
 Const csSFSpec   = "..\data\14515369\src.xls"
  Const csDFSpec   = "..\data\14515369\dst.xls"
  Const csTables   = "[Tbl1] [Tbl2] [Tbl3]"

  Dim aTblNs  : aTblNs   = Split(csTables)
  Dim oFS     : Set oFS = CreateObject("Scripting.FileSystemObject")
  Dim sSFSpec : sSFSpec = oFS.GetAbsolutePathName(csSFSpec)
  Dim sDFSpec : sDFSpec = oFS.GetAbsolutePathName(csDFSpec)
  If oFS.FileExists(sDFSpec) Then oFS.DeleteFile sDFSpec

  Dim oDbS    : Set oDbS = CreateObJect("ADODB.Connection")
  Dim sCS     : sCS      = Join(Array( _
    "Provider=Microsoft.Jet.OLEDB.4.0", "Data Source=" & sSFSpec, _
    "Extended Properties=""Excel 8.0;HDR=True;IMEX=0;Readonly=False""" _
  ),";")
  WScript.Echo "Connectionstring:"
  WScript.Echo sCS
  oDbS.Open sCS
  Dim sInExt  : sInExt   = " IN """ & sDFSpec & """ ""Excel 8.0;"""

  Dim sSelI : sSelI = "SELECT * INTO [Tbl@Mod] " & sInExt & " FROM @Tbl WHERE [A] = '@Mod'"
  Dim sInsI : sInsI = "INSERT INTO [Tbl@Mod] " & sInExt & " SELECT * FROM @Tbl WHERE [A] = '@Mod'"
  WScript.Echo sSelI
  WScript.Echo sInsI

  Dim sMods : sMods = "SELECT [A] FROM " & aTblNs(0)
  Dim i
  For i = 1 TO UBound(aTblNs)
      sMods = sMods & " UNION SELECT [A] FROM " & aTblNs(i)
  Next
  sMods = sMods & " ORDER BY [A]"
  WScript.Echo sMods

  Dim oRS  : Set oRS = oDbS.Execute(sMods)
  Dim sSQL
  Do Until oRS.EOF
     WScript.Echo "Processing", oRS("A"), "..."
     sSQL = Replace(Replace(sSelI, "@Mod", oRS("A")), "@Tbl", aTblNs(0))
     WScript.Echo "Create & fill new table for", oRS("A")
     WScript.Echo sSQL
     oDbS.Execute sSQL
     For i = 1 To UBound(aTblNs)
         sSQL = Replace(Replace(sInsI, "@Mod", oRS("A")), "@Tbl", aTblNs(i))
         WScript.Echo "Appending for", oRS("A"), "from", aTblNs(i)
         WScript.Echo sSQL
         oDbS.Execute sSQL
     Next
     oRS.MoveNext
  Loop
  oRS.Close
  oDbS.Close 
```

输出：

```
Connectionstring:
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=somewheresrc.xls;Extended
 Properties="Excel 8.0;HDR=True;IMEX=0;Readonly=False"
SELECT * INTO [Tbl@Mod]  IN "somewheredst.xls" "Excel 8.0;" FROM @Tbl
WHERE [A] = '@Mod'
INSERT INTO [Tbl@Mod]  IN "somewheredst.xls" "Excel 8.0;" SELECT * FRO
M @Tbl WHERE [A] = '@Mod'
SELECT [A] FROM [Tbl1] UNION SELECT [A] FROM [Tbl2] UNION SELECT [A] FROM [Tbl3] ORDER BY [A]
Processing Module1 ...
Create & fill new table for Module1
SELECT * INTO [TblModule1]  IN "somewheredst.xls" "Excel 8.0;" FROM [T
bl1] WHERE [A] = 'Module1'
Appending for Module1 from [Tbl2]
INSERT INTO [TblModule1]  IN "somewheredst.xls" "Excel 8.0;" SELECT *
FROM [Tbl2] WHERE [A] = 'Module1'
Appending for Module1 from [Tbl3]
INSERT INTO [TblModule1]  IN "somewheredst.xls" "Excel 8.0;" SELECT *
FROM [Tbl3] WHERE [A] = 'Module1'
Processing Module2 ...
Create & fill new table for Module2
SELECT * INTO [TblModule2]  IN "somewheredst.xls" "Excel 8.0;" FROM [T
bl1] WHERE [A] = 'Module2'
Appending for Module2 from [Tbl2]
INSERT INTO [TblModule2]  IN "somewheredst.xls" "Excel 8.0;" SELECT *
FROM [Tbl2] WHERE [A] = 'Module2'
Appending for Module2 from [Tbl3]
INSERT INTO [TblModule2]  IN "somewheredst.xls" "Excel 8.0;" SELECT *
FROM [Tbl3] WHERE [A] = 'Module2'
Processing Module3 ...
Create & fill new table for Module3
SELECT * INTO [TblModule3]  IN "somewheredst.xls" "Excel 8.0;" FROM [T
bl1] WHERE [A] = 'Module3'
Appending for Module3 from [Tbl2]
INSERT INTO [TblModule3]  IN "somewheredst.xls" "Excel 8.0;" SELECT *
FROM [Tbl2] WHERE [A] = 'Module3'
Appending for Module3 from [Tbl3]
INSERT INTO [TblModule3]  IN "somewheredst.xls" "Excel 8.0;" SELECT *
FROM [Tbl3] WHERE [A] = 'Module3'
Processing Module4 ...
Create & fill new table for Module4
SELECT * INTO [TblModule4]  IN "somewheredst.xls" "Excel 8.0;" FROM [T
bl1] WHERE [A] = 'Module4'
Appending for Module4 from [Tbl2]
INSERT INTO [TblModule4]  IN "somewheredst.xls" "Excel 8.0;" SELECT *
FROM [Tbl2] WHERE [A] = 'Module4'
Appending for Module4 from [Tbl3]
INSERT INTO [TblModule4]  IN "somewheredst.xls" "Excel 8.0;" SELECT *
FROM [Tbl3] WHERE [A] = 'Module4' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:25:54.553

@Peter L、@Kim Gysen 和 @Ekkehard.Horner，感谢你们提供的所有代码。但代码远在我头上。我是如何解决这个问题的。我只是将所有工作表中的所有数据复制到新的 Excel 书中，然后根据模块对整个数据进行排序。所以我能够得到解决方案。

```
Sub CopyRawData()
countSheet = RawData.Sheets.Count
For i = 1 to countSheet     
    RawData.Activate
    name = RawData.Sheets(i).Name

    RawData.WorkSheets(name).Select
    RawData.Worksheets(name).Range("A2").Select

    objExcel.ActiveSheet.UsedRange.Select
    usedRowCount1 = objExcel.Selection.Rows.Count
    objExcel.Range("A2:J" & usedRowCount1).Copy

    RawData.WorkSheets(name).Select
    RowCount = objExcel.Selection.Rows.Count
    RawData.Worksheets(name).Range("F2").Select

    FinalReport.Activate
    FinalReport.WorkSheets("Results").Select
    objExcel.ActiveSheet.UsedRange.Select
    usedRowCount2= objExcel.Selection.Rows.Count

    FinalReport.Worksheets("Results").Range("A"& usedRowCount2 + 1 ).PasteSpecial Paste =xlValues

Next
FinalReport.Save                        

Sub CopyData()
    Const xlAscending = 1
    Const xlDescending = 2
    Const xlYes = 1
    Set objRange = FinalReport.Worksheets("Results").UsedRange
    Set objRange2 = objExcel.Range("C2")
    objRange.Sort objRange2, xlAscending, , , , , , xlYes
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T16:42:28.107

除了 SQL 和排序（之前已经提供）之外，我还给了它另一种方法。
我测试了这段代码，它可以工作。

这段代码背后的总体思路：

1.  类模块“clsSheet”包含每张纸的所有信息，即。列标题 A、B、C，还有使用的范围、加载此范围的数组和最大行/列。
2.  这些自创建的数据对象被加载到一个集合中，之后代码的下一部分将执行内存中的所有代码（快速）。
3.  创建了一个字典，其中包含“模块名称”（即 module1、2、3 等）作为键，以及一个 clsModule 对象作为值。当键（因此模块名称）尚不存在时，将添加一个新项目。
4.  clsModule 类保存每个模块名称的信息，即。A、B 和 C 列信息。信息以数组的形式存储。
5.  当所有信息都存储在字典中时，只需将字典内容翻译回首选形式即可。在这种情况下，我选择为每个工作表指定字典键的名称并将数据加载到相应的工作表中。

此代码包括：

*   动态查找名称为“A”、“B”和“C”的标头，从而降低错误风险；
*   快速执行；
*   创建一个新工作簿并将每个“模块”的值写入不同的工作表。
*   这些类可在其他情况下重复使用，只需进行最少的修改。

这种方法的主要好处是灵活性。由于您在框架中加载所有数据，因此您可以通过设置类并调用它们的属性来虚拟执行任何操作。

```
Sub GetModules()

Dim cSheet                      As clsSheet
Dim cModule                     As clsModule
Dim oSheet                      As Excel.Worksheet
Dim oColl_Sheets                As Collection
Dim oDict                       As Object
Dim vTemp_Array_A               As Variant
Dim vTemp_Array_B               As Variant
Dim vTemp_Array_C               As Variant

Dim lCol_A                      As Long
Dim lCol_B                      As Long
Dim lCol_C                      As Long
Dim lMax_Row                    As Long
Dim lMax_Col                    As Long
Dim oRange                      As Range
Dim oRange_A                    As Range
Dim oRange_B                    As Range
Dim oRange_C                    As Range
Dim vArray                      As Variant

Dim lCnt                        As Long
Dim lCnt_Modules                As Long

Dim oBook                       As Excel.Workbook
Dim oSheet_Results              As Excel.Worksheet

Set oColl_Sheets = New Collection
Set oDict = CreateObject("Scripting.Dictionary")

'Get number of columns, rows and headers A, B, C dynamically
'This is useful in case columns are inserted
For Each oSheet In ThisWorkbook.Sheets

    Set cSheet = New clsSheet
    Set cSheet = cSheet.get_Sheet_Data(cSheet, oSheet)

    oColl_Sheets.Add cSheet

Next oSheet

'At this point, your entire sheet data structure is already contained in the collection oColl_Sheets

Set cSheet = Nothing

'Loop through the sheet objects and retrieve the values into modules
For Each cSheet In oColl_Sheets

    'Now you load back all data from the sheet and perform loops in memory through the arrays
    lCol_A = cSheet.fA_Col
    lCol_B = cSheet.fB_Col
    lCol_C = cSheet.fC_Col
    lMax_Row = cSheet.fMax_Row
    lMax_Col = cSheet.fMax_Col
    Set oRange = cSheet.fRange
    vArray = cSheet.fArray

    For lCnt = 1 To lMax_Row - 1

        'Check if the module already exists
        If Not oDict.Exists(vArray(1 + lCnt, 1)) Then  '+1 due to header
            lCnt_Modules = lCnt_Modules + 1
            Set cModule = New clsModule

            'Add to dictionary when new module (thus key) is new
            Set cModule = cModule.Add_To_Array_A(cModule, lCol_A, vArray(1 + lCnt, lCol_A), True)
            Set cModule = cModule.Add_To_Array_B(cModule, lCol_B, vArray(1 + lCnt, lCol_B), True)
            Set cModule = cModule.Add_To_Array_C(cModule, lCol_C, vArray(1 + lCnt, lCol_C), True)

            oDict.Add vArray(1 + lCnt, 1), cModule

        Else

            Set cModule = oDict(vArray(1 + lCnt, 1))

            'Replace when module (thus key) already exists
            Set cModule = cModule.Add_To_Array_A(cModule, lCol_A, vArray(1 + lCnt, lCol_A), False)
            Set cModule = cModule.Add_To_Array_B(cModule, lCol_A, vArray(1 + lCnt, lCol_B), False)
            Set cModule = cModule.Add_To_Array_C(cModule, lCol_A, vArray(1 + lCnt, lCol_C), False)

            Set oDict(vArray(1 + lCnt, 1)) = cModule

        End If

    Next lCnt

Next cSheet

'Now you have all the data available in your dictionary: per module (key), there is an array with the data you need.
'The only thing you have to do is open a new workbook and paste the data there.
'Below an example how you can paste the results per worksheet

Set oBook = Workbooks.Add
Set oSheet_Results = oBook.Sheets(1)

lCnt = 0
For lCnt = 0 To oDict.Count - 1

    'Fill in values from dictionary
    oBook.Sheets.Add().Name = oDict.Keys()(lCnt)
    ReDim vTemp_Array_A(1 To UBound(oDict.Items()(lCnt).fA_Arr))
    ReDim vTemp_Array_B(1 To UBound(oDict.Items()(lCnt).fB_Arr))
    ReDim vTemp_Array_C(1 To UBound(oDict.Items()(lCnt).fC_Arr))
    oBook.Sheets(oDict.Keys()(lCnt)).Range("A1").Value = "A"
    oBook.Sheets(oDict.Keys()(lCnt)).Range("B1").Value = "B"
    oBook.Sheets(oDict.Keys()(lCnt)).Range("C1").Value = "C"

    vTemp_Array_A = oDict.Items()(lCnt).fA_Arr
    vTemp_Array_B = oDict.Items()(lCnt).fB_Arr
    vTemp_Array_C = oDict.Items()(lCnt).fC_Arr
    Set oRange_A = oBook.Sheets(oDict.Keys()(lCnt)).Range(Cells(2, 1), Cells(1 + UBound(vTemp_Array_A), 1))
    Set oRange_B = oBook.Sheets(oDict.Keys()(lCnt)).Range(Cells(2, 2), Cells(1 + UBound(vTemp_Array_B), 2))
    Set oRange_C = oBook.Sheets(oDict.Keys()(lCnt)).Range(Cells(2, 3), Cells(1 + UBound(vTemp_Array_C), 3))
    oRange_A = Application.Transpose(vTemp_Array_A)
    oRange_B = Application.Transpose(vTemp_Array_B)
    oRange_C = Application.Transpose(vTemp_Array_C)

Next lCnt

Set oColl_Sheets = Nothing
Set oRange = Nothing
Set oDict = Nothing

End Sub 
```

名为“clsModule”的类模块

```
Option Explicit

Private pModule_Nr              As Long
Private pA_Arr                  As Variant
Private pB_Arr                  As Variant
Private pC_Arr                  As Variant

Public Function Add_To_Array_A(cModule As clsModule, lCol As Long, vValue As Variant, bNew As Boolean) As clsModule

Dim vArray As Variant

vArray = cModule.fA_Arr

If bNew Then
    ReDim vArray(1 To 1)
    vArray(1) = vValue
Else
    ReDim Preserve vArray(1 To UBound(vArray) + 1)
    vArray(UBound(vArray)) = vValue
End If

cModule.fA_Arr = vArray

Set Add_To_Array_A = cModule

End Function

Public Function Add_To_Array_B(cModule As clsModule, lCol As Long, vValue As Variant, bNew As Boolean) As clsModule

Dim vArray As Variant

vArray = cModule.fB_Arr

If bNew Then
    ReDim vArray(1 To 1)
    vArray(1) = vValue
Else
    ReDim Preserve vArray(1 To UBound(vArray) + 1)
    vArray(UBound(vArray)) = vValue
End If

cModule.fB_Arr = vArray

Set Add_To_Array_B = cModule

End Function

Public Function Add_To_Array_C(cModule As clsModule, lCol As Long, vValue As Variant, bNew As Boolean) As clsModule

Dim vArray As Variant

vArray = cModule.fC_Arr

If bNew Then
    ReDim vArray(1 To 1)
    vArray(1) = vValue
Else
    ReDim Preserve vArray(1 To UBound(vArray) + 1)
    vArray(UBound(vArray)) = vValue
End If

cModule.fC_Arr = vArray

Set Add_To_Array_C = cModule

End Function

Property Get fModule_Nr() As Long
    fModule_Nr = pModule_Nr
End Property

Property Let fModule_Nr(lModule_Nr As Long)
    pModule_Nr = lModule_Nr
End Property

Property Get fA_Arr() As Variant
    fA_Arr = pA_Arr
End Property

Property Let fA_Arr(vA_Arr As Variant)
    pA_Arr = vA_Arr
End Property

Property Get fB_Arr() As Variant
    fB_Arr = pB_Arr
End Property

Property Let fB_Arr(vB_Arr As Variant)
    pB_Arr = vB_Arr
End Property

Property Get fC_Arr() As Variant
    fC_Arr = pC_Arr
End Property

Property Let fC_Arr(vC_Arr As Variant)
    pC_Arr = vC_Arr
End Property 
```

名为“clsSheet”的类模块

```
Option Explicit
Private pMax_Col                As Long
Private pMax_Row                As Long
Private pArray                  As Variant
Private pRange                  As Range
Private pA_Col                  As Long
Private pB_Col                  As Long
Private pC_Col                  As Long

Public Function get_Sheet_Data(cSheet As clsSheet, oSheet As Excel.Worksheet) As clsSheet

Dim oUsed_Range         As Range
Dim lLast_Col           As Long
Dim lLast_Row           As Long
Dim iCnt                As Integer
Dim vArray              As Variant
Dim lNr_Rows            As Long
Dim lNr_Cols            As Long

Dim lCnt                As Long

With oSheet
    lLast_Row = .Cells(.Rows.Count, "A").End(xlUp).Row
    lLast_Col = .Cells(1, .Columns.Count).End(xlToLeft).Column
End With

oSheet.Activate
Set oUsed_Range = oSheet.Range(Cells(1, 1), Cells(lLast_Row, lLast_Col))
cSheet.fRange = oUsed_Range
lNr_Rows = oUsed_Range.Rows.Count
cSheet.fMax_Row = lNr_Rows
lNr_Cols = oUsed_Range.Columns.Count
cSheet.fMax_Col = lNr_Cols
ReDim vArray(1 To lNr_Rows, 1 To lNr_Cols)
vArray = oUsed_Range
cSheet.fArray = vArray

For lCnt = 1 To lNr_Cols
    Select Case vArray(1, lCnt)

        Case "A"
            cSheet.fA_Col = lCnt
        Case "B"
            cSheet.fB_Col = lCnt
        Case "C"
            cSheet.fC_Col = lCnt

    End Select
Next lCnt

Set get_Sheet_Data = cSheet

End Function

Property Get fMax_Col() As Long
    fMax_Col = pMax_Col
End Property

Property Let fMax_Col(lMax_Col As Long)
    pMax_Col = lMax_Col
End Property

Property Get fMax_Row() As Long
    fMax_Row = pMax_Row
End Property

Property Let fMax_Row(lMax_Row As Long)
    pMax_Row = lMax_Row
End Property

Property Get fRange() As Range
    Set fRange = pRange
End Property

Property Let fRange(oRange As Range)
    Set pRange = oRange
End Property

Property Get fArray() As Variant
    fArray = pArray
End Property

Property Let fArray(vArray As Variant)
    pArray = vArray
End Property

Property Get fA_Col() As Long
    fA_Col = pA_Col
End Property

Property Let fA_Col(lA_Col As Long)
    pA_Col = lA_Col
End Property

Property Get fB_Col() As Long
    fB_Col = pB_Col
End Property

Property Let fB_Col(lB_Col As Long)
    pB_Col = lB_Col
End Property

Property Get fC_Col() As Long
    fC_Col = pC_Col
End Property

Property Let fC_Col(lC_Col As Long)
    pC_Col = lC_Col
End Property 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T15:59:56.773

这是我的方法：非常简单，违反了许多编程原则，例如“避免复制/粘贴使用”，但从学习的角度来看，它似乎很容易理解，大约 80% 的代码是使用 MacroRecorder 生成的。这里是：

```
Sub DataToBook()

Dim CurDir As String
Dim ResultBook As String
Dim ResultRow As Long
Dim WS As Worksheet

Application.ScreenUpdating = False

CurDir = Replace(ThisWorkbook.FullName, ThisWorkbook.Name, "", vbTextCompare)
ResultBook = "Results.xlsx"
ResultRow = 1

Workbooks.Add
ActiveWorkbook.SaveAs Filename:=CurDir & ResultBook, FileFormat:= _
    xlOpenXMLWorkbook, CreateBackup:=False

For Each WS In ThisWorkbook.Worksheets

    ThisWorkbook.Activate
    WS.Select
    WS.Range("A1").Select
    WS.Rows("1:" & Selection.CurrentRegion.Rows.Count).Copy
    Workbooks(ResultBook).Sheets(1).Activate
    Workbooks(ResultBook).Sheets(1).Range("A1").Select
    If Selection.CurrentRegion.Rows.Count > 1 Then ResultRow = Selection.CurrentRegion.Rows.Count + 1
    Workbooks(ResultBook).Sheets(1).Cells(ResultRow, 1).Insert Shift:=xlDown

Next WS

Application.CutCopyMode = False

Workbooks(ResultBook).Sheets(1).Range("A1").Select
Workbooks(ResultBook).Sheets(1).Sort.SortFields.Clear
'
' Comment each of 3 lines below where sorting is not needed.
'
Workbooks(ResultBook).Sheets(1).Sort.SortFields.Add Key:=Range("A1:A" & Selection.CurrentRegion.Rows.Count), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
Workbooks(ResultBook).Sheets(1).Sort.SortFields.Add Key:=Range("B1:B" & Selection.CurrentRegion.Rows.Count), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
Workbooks(ResultBook).Sheets(1).Sort.SortFields.Add Key:=Range("C1:C" & Selection.CurrentRegion.Rows.Count), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal

With Workbooks(ResultBook).Sheets(1).Sort
    .SetRange Selection.CurrentRegion
    .Header = xlGuess
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With

ThisWorkbook.Activate
ThisWorkbook.Sheets(1).Select
ActiveSheet.Range("A1").Select
Workbooks(ResultBook).Close SaveChanges:=True

Application.ScreenUpdating = True

End Sub 
```

因此，`Results.xlsx`将在与源相同的文件夹中创建新工作簿。我的方法的要点：

1.  使用每个原始书页的数据区域的复制/粘贴将数据收集到新工作簿。
2.  使用结果数组排序对关键项进行分组：我的代码使用所有 3 列进行排序，但要保持源工作簿的原始顺序，只需注释相应的代码行以禁用排序设置。
3.  使用这种方法，数据键和源书单的数量是“无限的”。

示例文件也被共享：[https ://www.dropbox.com/s/ual33s5me1gzhus/DataToBook.xlsm](https://www.dropbox.com/s/ual33s5me1gzhus/DataToBook.xlsm)

希望这会有所帮助，至少在学习基本的 VBA 编码方面。**

# sql - 更新列中以分号分隔的 ID - sql

> ID：14515378
> 
> 赞同：1
> 
> 时间：2013-01-25T04:30:06.800
> 
> 标签：sql

我一直在尝试解决这个问题一段时间。希望任何人都可以在这里提供帮助。

我的文章表中有一个分号分隔的 CategoryID（例如 ;2;34;5;9;），并且我有一个包含旧 CategoryID 列和新 CategoryID 列的 Category 表。现在我想用一些基于原始 CategoryID 的新 CategoryID 来更新 Article 表中的 CategoryID。例如（例如；2；34；5；9；）将更新为（例如；564；344；753；944；）

我需要这个的原因是因为我正在合并来自具有相同表设置的两个数据库的表。

我知道这是一个糟糕的设计，但多年来一直如此。我真的想不出一个解决方案，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:46:47.083

是的，这是一个糟糕的设计。

我想你使用 MySQL。我使用了[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat) MySQL 特色功能，但[您也可以在 MSSQL 中模拟它](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-microsoft-sql-server-2005)。我想你需要用新的替换所有旧的 ID。

[SQLFiddle 演示](http://sqlfiddle.com/#!2/15515/1)

表：

```
create table article(id int, CategoryID varchar(200));
create table Category(OldCategoryId int, newCategoryId int); 
```

并更新以替换组：

```
update article,
(select 
  article.id, 
  CONCAT(';',
         GROUP_CONCAT(cast(newCategoryID as char) separator ';'),
         ';') newGroups 
from category
left join article on CategoryId like CONCAT('%;',CAST(oldCategoryId as char),';%')
group by article.id) t1
SET article.CategoryId=t1.newGroups
where article.id=t1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:35:55.120

> [对于这样的事情 MySQL 提供了功能`find_in_set`。但是，SQL Server（如果您正在使用它）不直接支持`IN`谓词 for `CSV`，也不提供`find_in_set`. 它需要一个`rowset`for`IN`谓词才能工作](http://explainextended.com/2009/06/23/in-with-a-comma-separated-list-sql-server/)......

检查上面的链接`CTE`示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:39:58.917

您需要一个脚本/程序来构建新旧 CategoryID 映射，并通过您的文章表并通过查找地图来替换它。

也许过程程序可能会这样做（如果您的 DBMS 支持存储过程 / PLSQL 之类的过程），否则使用 Java / C# / Php 可能更容易做到这一点

# javascript - Javascript——比较两个数组，返回差异，但是

> ID：14515382
> 
> 赞同：6
> 
> 时间：2013-01-25T04:30:33.733
> 
> 标签：javascript

我找到了很多解决这个问题的帖子：

假设我们有：

```
array1 = ['A', 'B', 'C', 'D', 'E']; array2 = ['C', 'E']; 
```

是否有一种经过验证且快速的解决方案可以将两个数组相互比较，返回一个数组而没有出现在两个数组中的值（此处为 C 和 E）。所需的解决方案：

```
array3 = ['A', 'B', 'D'] 
```

但是如果你有：

```
array1 = ['A', 'B', 'C', 'D', 'D', 'E']; array2 = ['D', 'E']; 
```

并且您正在寻找解决方案：

```
array3 = ['A', 'B', 'C', 'D'] // don't wipe out both D's 
```

这是一些上下文：

你正试图教学生句子是如何工作的。你给他们一个乱七八糟的句子：

吃了——猫——老鼠——那个——那个

他们开始输入答案：猫

您现在希望提示阅读：

吃了——老鼠——

目前，我的代码取出了两个。

这是我尝试过的：
（zsentence 是 xsentence 的副本，将被下面的代码操作，join()ed 并放到屏幕上）

```
for (i=0; i < answer_split.length; i++) {
for (j=0; j < xsentence.length; j++) {
        (function(){
            if (answer_split[i] == xsentence[j]) { zsentence.splice(j,1); return; }
        })();
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T04:35:04.070

只需遍历要删除的元素数组即可。

```
var array1 = ['A', 'B', 'C', 'D', 'D', 'E'];
var array2 = ['D', 'E'];
var index;

for (var i=0; i<array2.length; i++) {
    index = array1.indexOf(array2[i]);
    if (index > -1) {
        array1.splice(index, 1);
    }
} 
```

如果`O(array1.length * array2.length)`不是相当小的阵列和现代硬件，这不应该远程引起问题。

[http://jsfiddle.net/mattball/puz7q/](http://jsfiddle.net/mattball/puz7q/)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-25T10:47:00.580

您也可以使用过滤器。请查看以下示例。

```
var item = [2,3,4,5];
var oldItems = [2,3,6,8,9];
oldItems = oldItems.filter(n=>!item.includes(n)) 
```

所以这将返回 [6,8,9]

如果您只想获得匹配的项目，那么您必须编写以下代码。

```
oldItems = oldItems.filter(n=>item.includes(n)) 
```

这将仅返回 [2,3]。

# django - 如何在任何模板上使用 Django 内置评论框架

> ID：14515384
> 
> 赞同：0
> 
> 时间：2013-01-25T04:30:47.057
> 
> 标签：django, django-templates, django-comments

我刚开始研究 Django 内置的评论功能。起初我认为评论模板应该在任何页面上都可以正常工作，只要使用**get_comment_form**或**render_comment_form 。**但现在当我将这些代码添加到普通页面时真的很烦人。它不起作用。也许换句话说。当涉及到普通页面时，我不知道如何指定要附加的对象。以下是详细信息：

```
models.py
class Entry(models.Model):
    title = models.CharField(max_length=250)
    body = models.TextField()
    pub_date = models.DateTimeField()
    enable_comments = models.BooleanField()

urls.py
urlpatterns = patterns('',
url(r'^profile/','django.views.generic.simple.direct_to_template',{
        'template' : 'admin_ryu_blog/profile.html'},name='profile'),
) 
```

现在我只想在模板 profile.html 上使用评论框架。我应该怎么办 ？您现在可以将 profile.html 视为空白页面。如果您可以使用内置评论框架显示评论表单，那么您可以添加任何您想要的代码。

顺便说一句，我尝试了以下方法：

```
{% load comments %}
{% render_comment_form for profile %} 
```

然后它会提示一条错误消息。与我之前的问题相同的回溯。点击[这里](https://stackoverflow.com/questions/14498212/attributeerror-str-object-has-no-attribute-meta)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:46:33.167

你不能。评论框架需要一个对象来引用。

但是想到的一个简单的解决方案是构建一个映射到 URL 的模型，如下所示：

```
class CommentAnchor(models.Model):
    path = models.CharField(max_length=256) 
```

构建一个[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)来构建这些对象并将它们添加到所有模板上下文中。请记住将您的上下文处理器添加到您的`settings.TEMPLATE_CONTEXT_PROCESSORS`中，并记住`RequestContext`在渲染模板时使用。

```
def CommentAnchorProcessor(request):
    comment_anchor, created = CommentAnchor.objects.get_or_create(path=request.path)
    return {
        'comment_anchor': comment_anchor,  # now, this is available in every template.
    } 
```

现在您可以通过这些新对象呈现评论。

```
{% render_comment_form for comment_anchor %} 
```

# webserver - 如何在多个虚拟机上设置 Web 服务器、应用程序服务器、数据库服务器？

> ID：14515385
> 
> 赞同：1
> 
> 时间：2013-01-25T04:30:51.917
> 
> 标签：webserver, virtualization, virtual-machine, application-server, database-server

我想做我的学习实践。

要在第一个 vm 中安装多个 vm -web 服务器上的多服务器，在第二个中安装应用程序服务器，在最后一个 vm 中安装 db 服务器。然后，我将创建自己的网页来测试访问 db 中的数据。每个 vm 都是基于 VMware在我的电脑中，只需在本地主机环境中执行即可。不需要连接互联网。

我该怎么做或在哪里可以找到任何教程。请给我一些建议以完成我的项目^^"

非常感谢你h

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:05:23.330

就像您在物理机器中所做的一样。恕我直言，您的问题太笼统了，与虚拟机无关。我认为您正在寻找的是如何设置 Web 服务器以及如何使用数据库。为什么不检查诸如 nginx 或 apache 和 mysql 或 postgresql 之类的站点？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T04:36:20.813

首先，您需要运行所有机器并相互连接。通过这样做，您将获得这些机器的 IP 地址。

现在只需根据服务器将您的 IP 地址替换为 localhost

请注意，每台机器都必须有合适的服务器

# javascript - 具有复杂对象的 KnockoutJS 映射插件

> ID：14515390
> 
> 赞同：2
> 
> 时间：2013-01-25T04:31:42.400
> 
> 标签：javascript, mvvm, knockout.js

基于 KnockoutJS 映射[文档](http://knockoutjs.com/documentation/plugins-mapping.html)，我正在尝试做的事情似乎非常简单，但是我没有得到我期望的结果。

所以对于一些简单的测试html-

```
<div data-bind="with: rootItem">
<p data-bind="text: subProperty"></p>
    <div data-bind="with: subObject">
        <p data-bind="text: subSubProperty"></p>
</div> 
```

这个简单的视图模型和应用程序

```
var vm = function(){
this.rootItem = ko.observable();

this.loadData = function(data){

    //map the rootObject here
    ko.mapping.fromJS(data,{},this.rootItem());

    //this.rootItem is undefined
    console.log(this.rootItem());
 };

};
   //create new viewmodel
    var myVM = new vm();
   //create some dummy data with nested objects and properties
    var data = {
    subProperty: "Top Level Property",
    subObject: {
        subSubProperty:"Sub Level Property",
        },
    };
  //load the data
  myVM.loadData(data);
  //apply the vm
  ko.applyBindings(myVM); 
```

所以 vm.rootObject 永远不会被设置。我是否缺少有关 ko.mapping 插件行为的信息？

loadData 函数的这个实现得到了想要的结果，但是增加了额外的步骤。

```
this.loadData = function(data){

    //map the rootObject here
     this.rootItem(ko.mapping.fromJS(data));

    //this.rootItem is an object with a nested object and observable properties
    console.log(this.rootItem());
 }; 
```

为什么第一种方法会失败？在文档中，它非常清楚地指出“ko.mapping.fromJS 的第三个参数表示目标。”

这是一个演示正在发生的事情的[小提琴。](http://jsfiddle.net/mA77A/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:54:20.097

文档是正确的“ko.mapping.fromJS 的第三个参数表示目标。”。但是您提供了错误的目标：

因为当您调用时，`ko.mapping.fromJS(data,{}, this.rootItem());`映射插件无法将其用作目标。`this.rootItem``undefined`

创建时使用空对象，`rootItem`它将正常工作：

```
var vm = function(){
    this.rootItem = ko.observable({});

    this.loadData = function(data){     
        ko.mapping.fromJS(data,{}, this.rootItem());             
     };
}; 
```

演示[JSFiddle](http://jsfiddle.net/nemesv/a3sdy/)。

# ios - Storyboard - 如何在 UINavigationController 中使用 UITabbarController 自定义 UITabbarItem

> ID：14515392
> 
> 赞同：0
> 
> 时间：2013-01-25T04:31:52.367
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我对自定义 UITabBarItem 有疑问

首先可以[下载我的代码demo](http://www.mediafire.com/?yaiz95ati4ji98r)

现在，我在 MyAppDelegate 的自定义 UITabbarcontroller 是：

```
-(void)configureiPhoneTabBar
{
    tabViewController  = (UITabBarController *)self.window.rootViewController;
    UIViewController *controller1 = [[tabViewController viewControllers] objectAtIndex:0];
    [self configureTabBarItemWithImageName:@"home_ON.png" : @"home.png" andText:@"Home" forViewController:controller1];

    UIViewController *controller2 = [[tabViewController viewControllers] objectAtIndex:1];
    [self configureTabBarItemWithImageName:@"tvChannel_ON.png" : @"tvChannel.png" andText:@"TV" forViewController:controller2];
}

-(void)configureTabBarItemWithImageName:(NSString*)imageName1 : (NSString*)imageName2 andText:(NSString *)itemText forViewController:(UIViewController *)viewController
{
    UIImage* icon1 = [UIImage imageNamed:imageName1];
    UIImage* icon2 = [UIImage imageNamed:imageName2];

    UITabBarItem *item1 = [[UITabBarItem alloc] initWithTitle:itemText image:icon1 tag:0];
    [item1 setTitleTextAttributes:@{ UITextAttributeTextColor : [UIColor whiteColor] }
                         forState:UIControlStateNormal];
    [item1 setFinishedSelectedImage:icon1 withFinishedUnselectedImage:icon2];
    [viewController setTabBarItem:item1];
} 
```

我在 UINavigationController 中使用 UITabbarcontroller，我无法从 appdelegate 自定义 uitabaritem，如果您运行代码并检查 UITabBarController 中的“初始”，界面显示为真，但是当在 UINavigationController 中检查“初始”时很难这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:35:18.377

如果您从登录视图控制器启动您的应用程序，您可以从该初始视图控制器配置 tabBarController。您可以在 a 中执行此操作`prepareForSegue`，因为在那里您将有一个指向 tabBarController 的指针`segue.destinationViewController`...

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        [self configureiPhoneTabBar:segue.destinationViewController];
    } 
```

将您的 tabBarViewController 配置代码移动到此视图控制器中...

```
 -(void)configureiPhoneTabBar:(UITabBarController*)tabViewController
 {
        // tabViewController  = (UITabBarController *)self.window.rootViewController;
    UIViewController *controller1 = [[tabViewController viewControllers] objectAtIndex:0];
        //...etc... 
```

或发送`configureiPhoneTabBar:`给您的应用委托进行配置（但实际上最好将代码保留在您的应用委托之外）。

更好的是，您可以继承 UITabBarViewController 并将您的配置代码放在那里，由 viewDidLoad 触发：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self configureiPhoneTabBar];
}

-(void)configureiPhoneTabBar
  {
    UIViewController *controller1 = [[self viewControllers] objectAtIndex:0];

        ...etc... 
```

作为另一种选择，您可以在加载到选项卡栏的相应视图控制器中找到配置代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:24:36.030

将自定义标签栏的代码移动到 LoginViewController （这是与标签栏控制器分离的那个）。我将此代码添加到该文件的末尾：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"idenLogin"]) {
        UITabBarController *tabViewController  = segue.destinationViewController;
        UIViewController *controller1 = [[tabViewController viewControllers] objectAtIndex:0];
        [self configureTabBarItemWithImageName:@"home_ON.png" : @"home.png" andText:@"Home" forViewController:controller1];
        UIViewController *controller2 = [[tabViewController viewControllers] objectAtIndex:1];
        [self configureTabBarItemWithImageName:@"tvChannel_ON.png" : @"tvChannel.png" andText:@"TV" forViewController:controller2];
    }
}

-(void)configureTabBarItemWithImageName:(NSString*)imageName1 : (NSString*)imageName2 andText:(NSString *)itemText forViewController:(UIViewController *)viewController {
    UIImage* icon1 = [UIImage imageNamed:imageName1];
    UIImage* icon2 = [UIImage imageNamed:imageName2];

    UITabBarItem *item1 = [[UITabBarItem alloc] initWithTitle:itemText image:icon1 tag:0];
    [item1 setTitleTextAttributes:@{ UITextAttributeTextColor : [UIColor whiteColor] }
                         forState:UIControlStateNormal];
    [item1 setFinishedSelectedImage:icon1 withFinishedUnselectedImage:icon2];
    [viewController setTabBarItem:item1];
} 
```

# .net - 组合框文本和 SelectedIndex 一致性/行为

> ID：14515403
> 
> 赞同：1
> 
> 时间：2013-01-25T04:33:34.830
> 
> 标签：.net, vb.net, combobox

我有一段代码，其中表单上 DropDown 模式下的 ComboBox 有一个固定的唯一项的 ArrayList 作为其数据源；通常这对用户来说工作得很好，但很少会发生错误，即 SelectedIndex 无法找到与用户输入的 ComboBox 文本属性所表示的项目相对应的项目（即使它是合法项目）。

更具体地说，用户在 ComboBox 文本字段中键入合法条目作为文本并使用鼠标导航到另一个控件。文本字段继续显示条目，但稍后，当用户使用依赖于与正在显示的文本对应的 SelectedIndex 的方法提交更改时，SelectedIndex 不正确（有时）。

官方文档[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.text.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.text.aspx)指出：

“将 Text 属性设置为 null 或空字符串 ("") 会将 SelectedIndex 设置为 -1。将 Text 属性设置为 Items 集合中的值会将 SelectedIndex 设置为该项目的索引。将 Text 属性设置为不在集合中的值使 SelectedIndex 保持不变。”

所以合法的文本条目应该将 SelectedIndex 移动到正确的数字。我知道我可以在任何重要的事情发生之前强制对事件处理程序进行一致性检查，但我想知道是什么导致了这个罕见的错误，它在文档面前飞了起来，以更好地理解 ComboBox 实际在做什么。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:20:57.913

对，经过一些测试，这是我的结论。

当您在组合框的文本字段中键入时，您实际上并没有触发索引选择。但是，如果将 Text 属性设置为一个值。即 Combobox1.Text = "Existing item" 然后它设置选定的索引。因此，如果他们键入而不是在组合框中选择，您似乎真的不应该在数据库中获得任何正确的结果。

对，所以这就是它变得愚蠢的地方。这将起作用：

```
Private Sub ComboBox1_TextChanged(sender As System.Object, e As System.EventArgs) Handles ComboBox1.TextChanged
    ComboBox1.Text = ComboBox1.Text
End Sub 
```

但是，我建议您改为这样做：

```
Private Sub ComboBox1_Leave(sender As System.Object, e As System.EventArgs) Handles ComboBox1.Leave
    ComboBox1.Text = ComboBox1.Text
End Sub 
```

为了使我的答案有所不同，我将添加此内容。

如果您为组合框添加这些设置，则键入将在没有离开事件的情况下工作。

```
 ComboBox1.AutoCompleteMode = AutoCompleteMode.SuggestAppend
    ComboBox1.AutoCompleteSource = AutoCompleteSource.ListItems 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T14:20:45.830

当 ComboBox 处于 DropDown 模式时，即使用户未从列表中的项目中进行选择，也不会触发 SelectedIndexChanged。因此，当用户简单地输入一个条目然后使用鼠标导航离开时，selectedIndex 不会改变。为了使其工作，您需要手动处理 ComboBox.Leave 事件，以便选择用户输入的任何文本。

```
Private Sub ComboBox1_Leave(sender As Object, e As System.EventArgs) Handles ComboBox1.Leave
    ' This will cause the SelectedIndex to be changed, thus firing the Selected_IndexChanged Event:
    ComboBox1.SelectedIndex = ComboBox1.FindStringExact(ComboBox1.Text)
End Sub

Private Sub ComboBox1_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
    MsgBox("SelectedIndex =" & ComboBox1.SelectedIndex.ToString())
End Sub 
```

# java - 如何停止 RMI 客户端？

> ID：14515404
> 
> 赞同：0
> 
> 时间：2013-01-25T04:33:41.553
> 
> 标签：java, rmi

我正在开发一个正在改造/现代化的项目，其中有一个小的 RMI 部件，不幸的是我以前从未使用过 RMI。

我无法弄清楚的一件事是为什么在我最初创建 RMI 客户端后它一直调用其自定义 SocketFactory 构造函数。似乎每 5 分钟就会发生一次，即使客户端和服务器之间没有流量，我也会看到调用构造函数的输出。

所以我想一定有某种方法可以结束客户端或以某种方式清理它，所以它停止这样做，但我不知道它可能是什么。

它像这样设置 RMI 连接：

```
UnicastRemoteObject.exportObject(this);
TheServer rmiServer = (TheServer)Naming.lookup(s); // where s is some rmi:// url 
```

所以我可以访问服务器的方法，它可以调用我的客户端上的方法。

完成连接后，我应该如何清理和停止任何线程以进行持久化？

我正在检查 UnicastRemoteObject，也许我需要使用 unexportObject 方法？

但是这个自定义的 SocketFactory 是如何被调用的，在我的项目中绝对没有引用它的类名，除非它在后台的一些反映是通过从客户端的名称或其他东西派生类名来找到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:56:32.343

您正在看到分布式垃圾收集的效果。如果你完成了存根，只需释放所有本地引用并让它在本地进行垃圾收集。然后 DGC 也将停止，该远程对象的所有网络活动也将停止。

# sql - SQL 显式批处理执行

> ID：14515408
> 
> 赞同：1
> 
> 时间：2013-01-25T04:34:02.037
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

假设我有这批：

```
// Insert two order lines for order #2002 (Order_Lines table)
// Update order #2002 Total Quantity (Orders table)

INSERT INTO Order_Lines (OrderID, Line, PartID, Quantity)
   VALUES (2002, 1, 1234, 10);
INSERT INTO Order_Lines (OrderID, Line, PartID, Quantity)
   VALUES (2002, 2, 5678, 5);
UPDATE Orders 
   SET TotalQty = (SELECT SUM(Quantity) FROM Order_Lines WHERE OrderID = 2002)
   WHERE OrderID = 2002; 
```

当我运行它时，服务器是否在开始执行下一条语句之前等待批处理中的每个语句完成执行？

我真正想知道的是，如果我运行这批，Orders 表是否会正确更新。（如果先执行插入，最后执行更新，则应该正确更新。）

顺便说一句，我使用的是 SQL 2005 和 2008 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:39:10.023

是的，您可以期望每个语句的结果可用于后续语句。

# android - 滚动时 ListView 元素背景颜色变为黑色

> ID：14515411
> 
> 赞同：2
> 
> 时间：2013-01-25T04:34:13.780
> 
> 标签：android, listview, scrollview

我有一个`listview`，当我滚动它时，那个时间 listview 元素背景颜色变为黑色。我尝试了几个小时，但没有得到解决方案。

我试过

```
android:cacheColorHint="@android:color/transparent" 
```

或者

```
android:cacheColorHint="#00000000" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:14:59.420

设置

```
android:cacheColorHint 
```

到您用作**ListViewItem 背景的颜色**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T06:10:43.023

就我而言，这很好用

```
 <ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="1dip"
    android:layout_weight="1"
    android:background="#ffffff"
    android:choiceMode="singleChoice" 
    android:cacheColorHint="@android:color/transparent"
    android:scrollingCache="false"
    android:fastScrollEnabled="true">
</ListView> 
```

一位开发人员说，您必须强制使用这两个属性。

```
 android:cacheColorHint="@android:color/transparent"
    android:scrollingCache="false" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T05:16:28.433

您可以使用以下代码：

```
// you can use your color also
android:background="@android:color/transparent"
android:cacheColorHint="@android:color/transparent" 
```

两种颜色应该相同，那么您的问题将得到解决。

希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:14:01.127

将以下属性添加到 xml 布局内的列表视图。

```
android:scrollingCache="true"
android:cacheColorHint="#ffffff" 
```

# css - `word-spacing: -1em;` 对表单有不同的作用吗？关于使用它来清除`inline-block`的空白

> ID：14515414
> 
> 赞同：1
> 
> 时间：2013-01-25T04:34:18.253
> 
> 标签：css

我正在使用这里给出的建议：[https](https://stackoverflow.com/a/5174967) ://stackoverflow.com/a/5174967内联布局一些表单元素。它建议`word-spacing: -1em;`在父元素上使用，然后将间距重置为正常。我发现我不需要重置标签内`word-spacing`的`form`元素。`<form>`

```
 form
  {
     word-spacing: -1em;
  }

  input,
  textarea
  {
    width: 90%;
    display: inline-block;
    vertical-align: middle;
  }

  label span
  {
     display: inline-block; 
     width: 10%;
     vertical-align: middle;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:41:54.480

不，表格没有特殊规则`word-spacing`。`<form>hello world</form>`您可以通过使用（格式错误的）样式表查看样式来查看这一点。但`word-spacing`仅影响单词之间的间距，对于“单词”的某些（部分依赖于浏览器）定义。

使用负字间距来处理内联块的间距是不可靠的诡计，它不是您所指问题的公认答案。

# java - Java FileDialog 可以在 Mac 上运行吗？

> ID：14515415
> 
> 赞同：-2
> 
> 时间：2013-01-25T04:34:22.617
> 
> 标签：java, applet, awt, filedialog

我在 Java 中创建了一个使用 FileDialog 的 Web 小程序。文件对话框在 Windows 上运行良好，我想知道它是否是跨平台的。它适用于 Mac 和 Linux 吗？还是需要指定自定义参数？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:36:26.597

是的，FileDialog 是标准 Java SE 运行时可用的 java.awt.* 包的一部分。Mac OSX 通常附带 Java SE 运行时，因此您不应该对 FileDialog 有任何问题（外观可能不同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:49:41.613

来自[awt](http://openjdk.java.net/groups/awt/)

> AWT 应该在尽可能多的平台上工作。

因为 Java 编程语言是平台无关的，所以 AWT 也必须是平台无关的。AWT 旨在为在各种平台上工作的图形用户界面设计提供一组通用工具。

# arrays - 数组应该被认为是水平结构还是垂直结构

> ID：14515419
> 
> 赞同：11
> 
> 时间：2013-01-25T04:35:00.090
> 
> 标签：arrays, matlab, multidimensional-array

我正在做一些 Matlab 作业，但在概念化它处理矩阵的方式时遇到了问题。在 Matlab 中，矩阵是`d(row,col)`格式的地址。

我已经编程了一段时间，并且一直倾向于将一维数组视为水平结构，第二维从下方延伸出来。

从计算机的角度来看，哪一个是对数组数据结构的“更正确”的思考方式

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T04:42:35.853

好问题+1。

纯粹从 Matlab 编程的角度来看，最好将矩阵视为一系列列向量。为什么？因为这是 Matlab 将它们分配到计算机内存的方式。也就是说，矩阵的任何给定列中的两个连续元素将在内存中彼此相邻分配。这有时被称为“列优先顺序”，用于 Fortran、R 和 Julia 等语言。相反，不出所料，称为“行主要顺序”，用于 C 和 Python。

这意味着 Matlab 在对矩阵的列执行操作时比对行执行操作要快得多。@angainor几个月前对我的一个问题提供了一个[很好的答案，证明了这一事实。](https://stackoverflow.com/questions/12522888/arrayfun-can-be-significantly-slower-than-an-explicit-loop-in-matlab-why)根据@angainor 的见解，这是一个有用的速度测试：

```
M = 1000; %# Number of iterations over each method
T = 1000; %# Number of rows
N = 1000; %# Number of columns

X = randn(T, N); %# Random matrix

%# Loop over the rows of a matrix and perform a sum operation on each row vector
tic
for m = 1:M
    for t = 1:T
        sum(X(t, :));
    end
end
toc

%# Loop over the columns of a matrix and perform a sum operation on each column vector
tic
for m = 1:M
    for n = 1:N
        sum(X(:, n));
    end
end
toc 
```

在我的机器上，测试的结果是：

```
Elapsed time is 9.371870 seconds. %# Looping over rows
Elapsed time is 1.943970 seconds. %# Looping over columns 
```

换句话说，对列执行的操作几乎比对行执行的操作快 5 倍！

从数学的角度来看，我不相信自己能给出一个好的答案。您可能会从[math.stackexchange](https://math.stackexchange.com/?as=1)获得一些很棒的见解。

# c++ - Poco 是否适用于 LLVM 标准 C++ 库？

> ID：14515420
> 
> 赞同：2
> 
> 时间：2013-01-25T04:35:03.400
> 
> 标签：c++, poco-libraries

C++ 目前不是我的主要语言之一——仍在学习中。. . （所以对我放轻松）。.

我正在 iOS 上设置 Poco。. . 当我链接到 Gnu C++ 标准库时它可以工作，但是当链接到 LLVM 标准库时，我得到了一堆错误 - 无法找到 std::string。. .

它适用于 llvm 标准库吗？

它是否适用于 C++11（有趣的问题，但不是那么重要，因为我也对针对 Android 和使用 Poco 进行线程处理感兴趣）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:35:55.147

我们已经构建了适用于 iOS 和 Android 的静态库：使用[此处介绍的 Android 平台说明](http://www.appinf.com/docs/poco/99300-AndroidPlatformNotes.html)

对代码的少量编辑应该使 poco 使用 stlport_static 工作。但使用 gnustl_static 开箱即用。

iOS 静态库在 Xcode 中开箱即用，使用：c-dialect:GNU99、c++-dialect GNU++11、C++-library libc++ 和 LLVM 4.2 编译器。

```
GCC_C_LANGUAGE_STANDARD = gnu99
CLANG_CXX_LANGUAGE_STANDARD = gnu++0x
CLANG_CXX_LIBRARY = libc++ 
```

（如果您拥有的 stl-library 版本与 Poco 中使用的 std:: 命名空间不同，则可能需要在[iOS](https://github.com/pocoproject/poco/pull/58)和[Android的 poco 版本 1.51 上进行微小的编辑）。](https://github.com/pocoproject/poco/issues/57)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:00:35.940

取决于您使用的版本，1.5.1 版本应该可以工作（请参阅[https://github.com/pocoproject/poco/issues/46](https://github.com/pocoproject/poco/issues/46)）。我不认为该修复被移植到 1.4.x

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T02:59:40.747

由于没有其他答案，因此根据评论中的建议进行回答：

截至 2013 年 1 月，它将与 C++11 方言一起使用，但它似乎不喜欢 llvm 标准库。. Gnu 标准库工作。

# mysql - 选择在另一个表中引用的行

> ID：14515422
> 
> 赞同：0
> 
> 时间：2013-01-25T04:35:17.220
> 
> 标签：mysql, reference

我有两张桌子，它们如下：

```
USERS
ORDERS 
```

我想选择 ORDERS 表中至少有 1 个或更多订单的所有用户。我知道在 MySQL 中有一个内联查询，但现在我必须选择所有用户，然后再进行一次查询，看看每个用户是否有订单——所有这些都使用 PHP 循环。

我现在所做的在道德上是不正确的，所以我基本上只是想在 ONE MySQL 查询中选择 ORDERS 表中已引用的所有用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:52:40.197

这是您应该使用的查询

```
select distinct u.* from users u
inner join orders o on o.user_id = u.id; 
```

注意`distinct`和`u.*`。此查询不会从中选择字段，`orders`也不会选择同一用户两次（如果一个用户有多个订单）。

演示：[http ://sqlfiddle.com/#!2/6ebcc/3](http://sqlfiddle.com/#!2/6ebcc/3)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T04:38:34.353

您可以使用[mysql 连接](http://dev.mysql.com/doc/refman/5.0/en/join.html%20join)语法。假设您的两个表都有 userid 列，这是示例：

```
SELECT * FROM USERS a JOIN ORDERS b ON
a.UserId = b.UserId 
```

这是一个简单的数据库操作，解释见[这里](http://en.wikipedia.org/wiki/Join_%28SQL%29%20join)

# android - 从 google nexus 中最近使用的应用程序打开时应用程序强制关闭

> ID：14515424
> 
> 赞同：1
> 
> 时间：2013-01-25T04:35:38.163
> 
> 标签：android

使用我的应用程序后，我正在按 Home 以在后台运行应用程序。如果我立即再次打开该应用程序，它会打开该应用程序。

但是，如果我在某个时间后打开应用程序意味着距离最近的示例 15 分钟，它的强制关闭应用程序并使用以下 logcat 信息

```
01-24 11:04:37.311: I/dalvikvm(6418): Turning on JNI app bug workarounds for target SDK version 8...
01-24 11:04:37.639: W/dalvikvm(6418): threadid=1: thread exiting with uncaught exception (group=0x41c71930)
01-24 11:04:37.654: E/AndroidRuntime(6418): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.roseenvy.ui.activities/com.roseenvy.ui.activities.AppHomeScreen}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.os.Handler.dispatchMessage(Handler.java:99)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.os.Looper.loop(Looper.java:137)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.ActivityThread.main(ActivityThread.java:5039)
01-24 11:04:37.654: E/AndroidRuntime(6418): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-24 11:04:37.654: E/AndroidRuntime(6418): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-24 11:04:37.654: E/AndroidRuntime(6418): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-24 11:04:37.654: E/AndroidRuntime(6418): at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.Activity.setContentView(Activity.java:1881)
01-24 11:04:37.654: E/AndroidRuntime(6418): at com.roseenvy.ui.activities.AppHomeScreen.onCreate(AppHomeScreen.java:34)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.Activity.performCreate(Activity.java:5104)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-24 11:04:37.654: E/AndroidRuntime(6418): at com.roseenvy.ui.fragments.Special.onCreateView(Special.java:42)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:846)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
01-24 11:04:37.654: E/AndroidRuntime(6418): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676) 
```

这只发生在我的 google nexus 中。我在 LG optimus 和 google tab2 中测试了该应用程序，也在这些设备应用程序上正常工作。

我的活动布局是

```
<?xml version="1.0" encoding="utf-8"?>
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pageflip"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white" >

    <fragment
        android:name="com.roseenvy.ui.fragments.Special"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
     />

    <fragment
        android:name="com.roseenvy.ui.fragments.CreateMyOwnViewPager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:id="@+id/fragcreatehome"
      />

    <fragment
        android:id="@+id/previewfrag"
        android:name="com.roseenvy.ui.fragments.PreviewFragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <fragment
        android:id="@+id/addmessagefrag"
        android:name="com.roseenvy.ui.fragments.AddMessage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <fragment
        android:name="com.roseenvy.ui.fragments.BuyNow"
        android:id="@+id/buynowfrag"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <fragment
        android:name="com.roseenvy.ui.fragments.ConfirmOrder"
        android:layout_width="fill_parent"
        android:id="@+id/confirmfrag"
        android:layout_height="fill_parent" />

</ViewFlipper> 
```

这是我的片段布局

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/i_spf_spl_image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY" />

    <RelativeLayout
        android:id="@+id/specialLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ImageView
            android:id="@+id/i_spf_transp_logo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="10dp"
            android:src="@drawable/transp_logo" />

        <LinearLayout
            android:id="@+id/spf_spl_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:src="@drawable/this_weeks_special" />

            <com.roseenvy.ui.customviews.RoseTextView
                android:id="@+id/specialPrice"
                style="@style/SpecialText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:layout_gravity="center_horizontal"
                android:layout_marginTop="10dp"
                android:background="@drawable/price_bkg"
                android:paddingLeft="10dp"
                android:paddingRight="10dp"
                android:textSize="45sp" />

            <com.roseenvy.ui.customviews.RoseTextView
                android:id="@+id/specialTitle"
                style="@style/SpecialText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:singleLine="true"
                android:text="@string/title"
                android:textColor="@color/white"
                android:textSize="50sp" />

            <LinearLayout
                android:id="@+id/gospecial"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:orientation="horizontal" >

                <com.roseenvy.ui.customviews.RoseTextView
                    android:id="@+id/t_spf_spl_price"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/see_special_offer"
                    android:textColor="@color/white"
                    android:textSize="19sp" />

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginLeft="5dp"
                    android:src="@drawable/spl_offer_arrow" />
            </LinearLayout>
        </LinearLayout>

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:background="@drawable/create_your_own" >

            <LinearLayout
                android:id="@+id/createownbottom"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:orientation="vertical"
                android:paddingTop="7dp" >

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:src="@drawable/down_arrow" />

                <com.roseenvy.ui.customviews.RoseTextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="2dp"
                    android:text="@string/createyourown"
                    android:textColor="@color/white"
                    android:textSize="14sp" />
            </LinearLayout>
        </FrameLayout>
    </RelativeLayout>

</FrameLayout> 
```

活动代码

```
public class AppHomeScreen extends FragmentActivity {

    public static ViewFlipper pageFlip;

    private Utils utils;

    public AppPreferences appPreferences;
    @Override
    protected void onCreate(Bundle bundle) {

        super.onCreate(bundle);
        setContentView(R.layout.apphome);
        pageFlip = (ViewFlipper) findViewById(R.id.pageflip);
        appPreferences = new AppPreferences(this);
        utils = new Utils();
    }
} 
```

片段代码

```
public class Special extends BaseFragment implements OnClickListener {
    private ImageView specialBg;
    private RoseTextView title, price;
    public Bitmap bg;
    private LinearLayout createownbottom, gospecial;
    private SpecialProduct specialProduct;
    private String roseColor;
    public static boolean special = false;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.special_fragment, container, false);
        // pageFlip = AppHomeScreen.pageFlip;
        specialBg = (ImageView) v.findViewById(R.id.i_spf_spl_image);
        ImageDownloader imageLoader = new ImageDownloader(getActivity(), false);
        imageLoader.setMode(Mode.CORRECT);

        specialProduct = ApplicationData.getSpecialProduct();
        imageLoader.download(specialProduct.getSpecialImage(), specialBg, null);

        roseColor = specialProduct.getRoseInfo().getColor();
        title = (RoseTextView) v.findViewById(R.id.specialTitle);
        title.setText(specialProduct.getTitle().toUpperCase());
        price = (RoseTextView) v.findViewById(R.id.specialPrice);
        price.setText(getString(R.string._) + specialProduct.getPrice());
        price.setTextColor(Color.parseColor("#" + roseColor));
        createownbottom = (LinearLayout) v.findViewById(R.id.createownbottom);
        createownbottom.setOnClickListener(this);
        gospecial = (LinearLayout) v.findViewById(R.id.gospecial);
        gospecial.setOnClickListener(this);
        return v;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:30:44.207

我可能是错的，但似乎当您从“最近”启动该应用程序时，它会调用一个视图，该视图由于`Activity`在后台时间过长而不再膨胀，因此被杀死。

这发生在其他设备上而不是在 Google Nexus 上这一事实并不能说明太多——当 Android 终止后台进程时可能是任意的，具体取决于您的内存使用情况和其他因素。如[文档](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)中所述：

> Android 系统尝试尽可能长时间地保留应用程序进程，但最终需要在内存不足时删除旧进程。如活动生命周期中所述，关于删除哪个进程的决定与用户与其交互的状态密切相关。通常，根据其中运行的活动，流程可以处于四种状态，此处按重要性顺序列出。系统会在杀死更重要的进程（第一个）之前杀死不太重要的进程（最后一个）。

您是否尝试在方法中保存您的应用程序的状态，或者在、、或`onStop()`中的任何一个中重新填充上述日志中描述的组件？这完全取决于您将使用哪种方法。供参考：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)`onCreate()``onStart()``onResume()``onRestart()`

# delphi - Delphi (2009) - 转换 AnsiString 读取或保留换行符？

> ID：14515429
> 
> 赞同：2
> 
> 时间：2013-01-25T04:35:56.790
> 
> 标签：delphi, png, ansistring

使用此（测试）代码从 PNG 读取文本块：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  PngVar: TPngImage;
  n: Integer;
begin
  PngVar := TPNGImage.Create;
  PngVar.LoadFromFile('C:\test.png');
  for n := 0 to pred(PngVar.Chunks.count) do
  if PngVar.Chunks.item[n].Name='tEXt' then
  with PngVar.Chunks.item[n] as TChunkTEXT do
  memo1.lines.add(KeyWord+'='+Text);
end; 
```

该代码来自 TPNGObject 的原作者的示例，并从 embercardo 的网站下载。KeyWord 包含文本块的值，在本例中为注释。文本包含我们需要的文本。它是一个 AnsiString 并且应该有中断，但是当从 AnsiString 转换为 unicode 时，它​​们会丢失并且它变成一个字符串，在行尾和行首之间甚至没有空格。

单步调试调试器时，我注意到它的每一行都用单引号括起来，并且在行之间它有 #$A 我假设如果我签入十六进制是某种形式的控制字符。

comment=PunkBuster Screenshot (ñ) BF3 Levels/MP_017/MP_017'#$A'1135998 31.204.131.11:25530 GoTBF3.nl #4 | 32p | 仅 TDM 运河 | 500 张门票'#$ *A'geawtaw46y4w63a46a34643a* BorislavFatsolka'#$A'尝试：w=320 X h=240 at (x=50%,y=50%)'#$A'结果：w=320 X h=200 样本=1'

**示例图片** [http://www.pbbans.com/pbss_evidence/bf3/31.204.131.11:25530/5d00a95d22fae4a287bd510c076db1bf-2e36c3b4.png](http://www.pbbans.com/pbss_evidence/bf3/31.204.131.11:25530/5d00a95d22fae4a287bd510c076db1bf-2e36c3b4.png) 这是示例。我正在做的是从 punkbuster 图像中读取数据，以使它们可以在我们的社区数据库中搜索。但我也会在图像旁边显示信息，并且 id 喜欢换行或知道行何时结束。

**当直接放入备忘录或字符串列表时，它会出现如下一行：**

comment=PunkBuster Screenshot (ñ) BF3 Levels/MP_017/MP_0171135998 31.204.131.11:25530 GoTBF3.nl #4 | 32p | 仅 TDM 运河 | 500 张票*geawtaw46y4w63a46a34643a* BorislavFatsolka 尝试：w=320 X h=240 at (x=50%,y=50%) 结果：w=320 X h=200 sample=1

**问题**

处理这个 ansistring 的最佳方法是什么，它来自原始图像，或者 TPNGImage 在那里没有真正的选择。将其放入备忘录、丰富的编辑或字符串列表中，并保持完整的中断。

想到的第一件事可能是低效的，那就是将其放入字节数组等中并逐字节读取它，并在行尾标记处切割每一行。

**示例中的更多数据** 您应该能够通过下载示例图像来看到这一点，但是，这是它在十六进制编辑器中的外观（文件的第一部分完好无损，png 标头，tEXt 块标头关键字等。

```
‰PNG........IHDR...Ž...2.....ûŒÆ$....tEXtcomment.PunkBuster Screenshot (ñ) BF3  Levels/MP_017/MP_017.1135998 31.204.131.11:25530 GoTBF3.nl #4 | 32p | TDM Canals Only | 500 Tickets.*geawtaw46y4w63a46a34643a* BorislavFatsolka.Attempted: w=320 X h=240 at (x=50%,y=50%).Resulting: w=320 X h=200 sample=1.

89 50 4E 47 0D 0A 1A 0A 00 00 00 0D 49 48 44 52 00 00 02 8E 00 00 01 32 08 02 00 00 00 FB 8C C6 24 00 00 01 03 74 45 58 74 63 6F 6D 6D 65 6E 74 00 50 75 6E 6B 42 75 73 74 65 72 20 53 63 72 65 65 6E 73 68 6F 74 20 28 F1 29 20 42 46 33 20 20 4C 65 76 65 6C 73 2F 4D 50 5F 30 31 37 2F 4D 50 5F 30 31 37 0A 31 31 33 35 39 39 38 20 33 31 2E 32 30 34 2E 31 33 31 2E 31 31 3A 32 35 35 33 30 20 47 6F 54 42 46 33 2E 6E 6C 20 23 34 20 7C 20 33 32 70 20 7C 20 54 44 4D 20 43 61 6E 61 6C 73 20 4F 6E 6C 79 20 7C 20 35 30 30 20 54 69 63 6B 65 74 73 0A 2A 67 65 61 77 74 61 77 34 36 79 34 77 36 33 61 34 36 61 33 34 36 34 33 61 2A 20 42 6F 72 69 73 6C 61 76 46 61 74 73 6F 6C 6B 61 0A 41 74 74 65 6D 70 74 65 64 3A 20 77 3D 33 32 30 20 58 20 68 3D 32 34 30 20 61 74 20 28 78 3D 35 30 25 2C 79 3D 35 30 25 29 0A 52 65 73 75 6C 74 69 6E 67 3A 20 77 3D 33 32 30 20 58 20 68 3D 32 30 30 20 73 61 6D 70 6C 65 3D 31 0A 
```

**其他发现** 如果我转储块 (PngVar.Chunks.item[n].SaveToStream)，它基本上可以提供我们在十六进制编辑器中找到的内容。控制字符为 0A。我不确定#$A 是转换前还是转换后的效果，甚至可能是由 pngimage 代码引起的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:30:31.300

尝试：

```
memo1.lines.add(KeyWord+'='+StringReplace(Text,#10,sLineBreak,[rfReplaceAll])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:42:14.193

另一种方法是 Jedi CodeLib

```
sl := TJclStringList.Create;
sl.Split(Text, #10);
sl[0] := 'Keyword=' +sl[0]
memo1.lines.AddStrings(sl);
sl.Free; 
```

# iphone - 与其他 iOS 应用程序通信

> ID：14515431
> 
> 赞同：0
> 
> 时间：2013-01-25T04:36:01.453
> 
> 标签：iphone, ios, uiwebview, quickblox

我正在开发一个基于 QuickBlox 的 ChattAr-iOS 项目的应用程序，[由于](http://www.quickblox.com)[我](https://github.com/QuickBlox/ChattAR-ios)无法与另一个应用程序通信，因此每次我尝试使用以下代码从我的应用程序中打开[Waze应用程序时：](http://www.waze.com)`UIWebViewController`

```
 - (void) navigateToLatitude:(double)latitude
              longitude:(double)longitude
{
  if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"waze://"]]) {
    //Waze is installed. Launch Waze and start navigation
    NSString *urlStr = [NSString stringWithFormat:@"waze://?ll=%f,%f&navigate=yes", latitude, longitude];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlStr]];
} else {
    //Waze is not installed. Launch AppStore to install Waze app
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://itunes.apple.com/us/app/id323229106"]];
    }
} 
```

它导航到那个`UIWebView`。该项目中有一个类`ChatARApplication`可能导致问题。

**ChattARApplication.h**

```
#import <UIKit/UIKit.h>

@interface ChattARApplication : UIApplication

@end 
```

**ChattARApplication.m**

```
#import "ChattARApplication.h"
#import "WebViewController.h"
#import "AppDelegate.h"

@implementation ChattARApplication

 -(BOOL)openURL:(NSURL *)url{
    UITabBarController *tabBarControlelr = ((AppDelegate *)self.delegate).tabBarController;
if(tabBarControlelr.selectedIndex != 1){
    return [super openURL:url];
    }

    // handle chat messages' links
    WebViewController *webViewControleler = [[WebViewController alloc] init];
    webViewControleler.urlAdress = [url absoluteString];
    webViewControleler.webView.scalesPageToFit = YES;
    UINavigationController *chatViewController = [tabBarControlelr.viewControllers objectAtIndex:1];
    [chatViewController pushViewController:webViewControleler animated:YES];
    [webViewControleler autorelease];

    return NO;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:15:42.970

**解决了问题**

这个小小的代码和平做到了

```
 if ([[url scheme] isEqualToString:@"waze"]) {
    return [super openURL:url];
} 
```

在`-(BOOL)openURL:(NSURL *)url`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:07:21.140

主文件

```
int main(int argc, char *argv[]){
    @autoreleasepool {
        return UIApplicationMain(argc, argv, NSStringFromClass([ChattARApplication class]), NSStringFromClass([AppDelegate class]));
    }
} 
```

我认为是问题所在。如果您想保留应用程序设置，您可以在`-(BOOL)openURL:(NSURL *)url;`

希望对你有帮助~~

# vba - Word 2010 VBA 在突出显示的范围内替换

> ID：14515433
> 
> 赞同：2
> 
> 时间：2013-01-25T04:36:16.747
> 
> 标签：vba, ms-word

以下代码有效，但它对*整个文档*执行所有操作。我想突出显示一段文本，然后当我运行宏时，*它只*适用于突出显示的文本。我怎么做？谢谢...

```
Sub DoCodeNumberStyle(numchars As String)

    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = "(^13)([0-9]{" + numchars + "}) "
        .Replacement.Text = "\1###\2$$$ "
        .Forward = True
        .Wrap = wdFindAsk
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    Selection.Find.Replacement.Style = ActiveDocument.Styles("CodeNumber")
    With Selection.Find
        .Text = "###([0-9]{" + numchars + "})$$$"
        .Replacement.Text = "\1"
        .Forward = True
        .Wrap = wdFindAsk
        .Format = True
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll
End Sub

Sub CodeNumberStyle()
    DoCodeNumberStyle ("1")
    DoCodeNumberStyle ("2")
End Sub 
```

**后记：**

我发现的另外一件事：如果您在一个选择上做了多个查找，第一个查找会丢失/更改选择，所以其他的不再受原始选择的限制（并且 wdReplaceAll 将继续到文档）。要解决此问题，请将选择捕获到范围中。这是我的方法的最终版本，它现在可以完成我需要的一切，仅限于原始突出显示的选择（即使有 3 个查找和替换），并且在代码方面也已最小化：

```
Sub AAACodeNumberStyleHighlightedSelection()

    With Selection.Range.Find
        .ClearFormatting
        .Style = ActiveDocument.Styles("Code")
        .Replacement.ClearFormatting
        .Forward = True
        .Wrap = wdFindStop
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False

        ' First line:
        .Text = "1   //"
        .Replacement.Text = "###1$$$   //"
        .MatchWildcards = False
        .Execute Replace:=wdReplaceAll

        ' Rest of lines:
        .Text = "(^13)([0-9]{1,2}) "
        .Replacement.Text = "\1###\2$$$ "
        .MatchWildcards = True
        .Execute Replace:=wdReplaceAll

        ' Now style the line numbers:
        .Text = "###([0-9]{1,2})$$$"
        .Replacement.Text = "\1"
        .Replacement.Style = ActiveDocument.Styles("CodeNumber")
        .MatchWildcards = True
        .Execute Replace:=wdReplaceAll

    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:03:33.397

将 .Wrap 更改为 wdFindStop，这应该适合您。我认为这可能是一个小的 Word 错误；文档说 Wrap 值

> 设置如果搜索开始于文档开头以外的点并到达文档结尾（如果 Forward 设置为 False，反之亦然）或在指定的选择中找不到搜索文本时发生的情况或范围。

但似乎它迫使 Find 转到文档的末尾，而不是考虑选择。无论如何，如果您只打算在选择上运行它，则不需要 wdFindAsk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T17:54:17.580

我也发现，即使在某个范围上开始 FIND 循环，该范围也会由 FIND 重新定义，因此 .execute 上的连续循环超出了原始范围到文档末尾。wdFindStop 仅在文档​​的末尾停止，而不是在原始范围的末尾。

所以，我插入了一个 IF 语句：

do while .find.found ... If .find.parent.InRange(doc.Bookmarks("BODY").Range) = False Then Exit Do ... .execute loop

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T00:21:36.400

```
Set myRange = Selection.Range
 myRange.Select
    With Selection.Find
        .Text = "Apple"
        .Replacement.Text = "Banana"
        .Forward = True
        .Wrap = wdFindStop
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        '.MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll

   myRange.Select
        With Selection.Find
        .Text = "red"
        .Replacement.Text = "yellow"
        .Forward = True
        .Wrap = wdFindStop
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        '.MatchWildcards = True
    End With
    Selection.Find.Execute Replace:=wdReplaceAll 
```

# android - 如何防止jquery mobile中的默认列表视图点击？

> ID：14515440
> 
> 赞同：1
> 
> 时间：2013-01-25T04:36:59.410
> 
> 标签：android, ios, html, cordova, jquery-mobile

我创建了一个列表视图..在列表视图中我放了一个按钮..喜欢

```
<ul class="ui-listview">
 <li>
  <p>HEllo</p>
  <input type='button' id='btn1'>
  </li>

<li>
  <p>Hiii</p>
  <input type='button' id='btn2'>
  </li>
</ui> 
```

现在我想要这个按钮的单击事件并停止列表视图的默认单击......那么它在 jquery 中怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:12:59.983

```
$("input[type=button]").click(function(event){
    event.stopPropagation();
    //your code goes here
}); 
```

这是基于您的标记[的 jsFiddle 。](http://jsfiddle.net/pmatseykanets/GLWQw/)

# sql-server-2008 - 没有记录时返回空白行sql server

> ID：14515441
> 
> 赞同：1
> 
> 时间：2013-01-25T04:37:22.093
> 
> 标签：sql-server-2008

我有一张桌子`tblAccount`。我想从表中获取前 4 行。如果没有记录，我想得到 4 个空白行。

```
select * 
from tblAccount

o/p
----
AccountID AccountNo
1          #101
2          #102
NULL       NULL
NULL       NULL 
```

如果有两条记录，上面应该是结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:00:32.870

[SQLFiddle demo](http://sqlfiddle.com/#!3/746c9/8)

```
select TOP 4 AccountID,AccountNo
from
(
select 0 as srt,AccountID,AccountNo from tblAccount
union all
select 1 as srt,NULL as AccountID, NULL as AccountNo
union all
select 2 as srt,NULL as AccountID, NULL as AccountNo
union all
select 3 as srt,NULL as AccountID, NULL as AccountNo
union all
select 4 as srt,NULL as AccountID, NULL as AccountNo
) as t
order by srt,AccountID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:48:17.250

这应该有效。您可以对临时表执行相同的操作，只需为其提供正确数量的字段和行。

```
with meganull(a,b) as (
    select CAST(null as int),
           CAST(null as varchar(max))
    union all
    select *
    from meganull
)
select top 4 *
from (
    select *
    from tblAccount
    union all
    select *
    from meganull) as sq 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T19:24:43.230

尝试这个...

```
Select * FROM (VALUES (1),(2),(3),(4)) AS value(tmpID) left join 
(
select Row_Number() over (order by AccountID) as RowCtr, * 
from tblAccount
) accountTable on tmpID = accountTable.RowCtr 
```

当我想要一种方法来强制在 SSRS 报告中显示一定数量的行时，我使用了类似的技术，其中空白行表示物理机架中的空白点。

# css - 所见即所得的 CSS 编辑？

> ID：14515451
> 
> 赞同：4
> 
> 时间：2013-01-25T04:38:58.227
> 
> 标签：css, wysiwyg

是否有任何应用程序或浏览器扩展通过所见即所得提供基本的 CSS 编辑？

例如，我希望该工具允许我通过选择页面上的任何框 DIV，然后拖动调整大小控件来调整其大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:44:00.407

你真的应该尝试使用内置在你的网络浏览器中的检查器（我认为最好是 Chrome）或者可能是用于 Firefox 的[Firebug 。](http://getfirebug.com/)您所做的这些更改将在刷新时被删除，但它可以让您快速进行 CSS 原型设计。

但是，我会说您正在寻找的内容可能不如在文本编辑器中编辑文本并在多个浏览器上刷新您的更改那样好。我之所以说多个浏览器，是因为编写适用于尽可能多的平台和尽可能多的浏览器的代码总是最好的，因为它对项目来说是合理的。远离浏览器内所见即所得的代码编辑器，并坚持使用 Dreamweaver、TextMate、Coda 等 IDE。

# jquery - Jquery倒计时不起作用（错误的时间）

> ID：14515452
> 
> 赞同：0
> 
> 时间：2013-01-25T04:39:08.253
> 
> 标签：jquery, countdown

我正在使用这个**[CountDown Plugin](http://keith-wood.name/countdown.html)**，这是我的代码和视图：

```
<div class="sc" lang="2013, 12 -1, 18">
<div class="sc" lang="2013, 6 -1, 22">

<script>
$(document).ready(function(){
$(".sc").each(function(){
$(this).countdown({until: $(this).attr("lang"), compact: true, format: 'HMS', description: ''});});});
</script> 
```

我的问题是它返回错误的时间，例如：**00:34:00**另一个是**00:34:03**。

有人可以帮我吗？

*我正在努力学习英语，所以我的英语说得不好，很抱歉。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:58:35.497

您错误地使用了 until 参数，您需要一个新的 Date 对象，并且您当前的 lang attr 无法解析为该对象。

**编辑：**由于您的目标日期如此遥远，如果您使用`ODHMS`或`DHMS`作为您的格式来根据需要包含月份和日期会更好。

我对您的代码进行了一些更改以使其正常工作。

**HTML：**

```
<div class="sc" lang="2013, 11, 18"></div>
<div class="sc" lang="2013, 5, 22"></div> 
```

**查询：**

```
$(document).ready(function () {
    $("div.sc").each(function (i, item) {
        var targetDate = $(item).attr("lang").split(',');
        $(item).countdown({
            until: new Date(targetDate[0].trim(), targetDate[1].trim(), targetDate[2].trim()),
            compact: true,
            format: 'DHMS',
            description: ''
        });
    });
}); 
```

还要检查这个小提琴中的工作样本：http: [//jsfiddle.net/EkmsT/](http://jsfiddle.net/EkmsT/)

**编辑 2：**我已将 lang 值更改为 11 和 5 而不是 12-1 和 6-1，并直接在倒计时代码中使用它作为 targetDate[1].trim()。您仍然可以使用 12 -1 和 6 -1 并将新的日期代码更改为使用 parseInt(targetDate[1].trim())

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:55:11.180

好吧，因为没有设置时区。

试试这个。

`$(this).countdown({until: $(this).attr("lang"), compact: true, format: 'HMS', description: '',timezone: +60});`

相应地设置时区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T05:07:07.033

在 jquery 倒计时中定义参数时，您尚未定义`date`函数。attr`until`中的日期之间有一个空格。`lang`

```
<div class="sc" lang="2013, 10, 21"></div>
<div class="sc" lang="2013, 5, 23"></div>

<script>
$(document).ready(function(){
$(".sc").each(function(){
    var dateSplit = $(this).attr("lang").split(',');alert(dateSplit[0].trim());
    var dateRem = new Date(dateSplit[0].trim(), dateSplit[1].trim(), dateSplit[2].trim());
    $(this).countdown({until: dateRem, compact: true, format: 'HMS', description: ''});});
});
</script> 
```

# html - 外部链接留在网站内

> ID：14515458
> 
> 赞同：0
> 
> 时间：2013-01-25T04:40:13.513
> 
> 标签：html, hyperlink

如果我有一个链接，例如：www.google.com，该链接将转到 mydomain.com/www.google.com。

如果 http:// 在开头，则链接将转到 www.google.com。

有没有办法确保链接确实转到外部站点，使用 php 等？

此链接转到 mydomain.com/www.google.com：

```
<a href="www.google.com">Link</a> 
```

此链接转到 www.google.com（正如我想要的那样）：

```
<a href="http://www.google.com">Link</a> 
```

最终使用它来验证：

```
if(strpos($URL, "http://") !== false) $URL = $URL;
else if (strpos($URL, "https://") !== false) $URL = $URL;
else $URL = "http://$URL"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:43:15.947

您必须放在链接`http://`前面，这就是互联网的工作方式，还有其他协议，`https`例如`ftp`等`<a href="google.com">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:49:02.907

如果您使用的是 PHP，那么您可以检查链接。

检查链接是否以 http:// 开头，如果是，则可以，否则，在链接前面加上 http://。

这将确保您的链接将在外部站点中打开。

# gwt - 在 GWT 中添加外部 jar

> ID：14515459
> 
> 赞同：9
> 
> 时间：2013-01-25T04:40:19.857
> 
> 标签：gwt

我有一个包含源代码的 jar 文件。

我在 war/WEB-INF/lib/xxx.jar 中插入了 jar 添加到构建路径

但是当我运行项目时出现错误

**编辑添加 gwt.xml**

```
 <module rename-to='bookmanagementsystem'>

  <inherits name='com.google.gwt.user.User'/>
  <inherits name='com.google.gwt.user.theme.standard.Standard'/>
  <inherits name='com.example.Book'></inherits>
  <entry-point class='com.example.Book.client.Index'/>  

</module> 
```

**已编辑**

我解决 **了插件无法连接到 127.0.0.1:9997 的开发模式服务器**

现在我有一个问题

```
Loading inherited module 'com.example.book'
         [ERROR] Unable to find 'com/example/book.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source?
      [ERROR] Line 6: Unexpected exception while processing element 'inherits' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T05:33:14.957

如果您想将外部 jar 包含到 GWT 中，请确保您执行了以下操作

1.  检查 jar 有 .gwt.xml 文件，它必须指定源。
2.  将其添加到 lib 文件夹
3.  配置构建路径并将jar添加到库
4.  从 Order and Export 中选择 jar
5.  在您的 .gwt.xml 文件中继承此模块

例如。如果您在 jar 中有一个名为“sample.source”的包，并且 jar 中的 .gwt.xml 文件是“Source.gwt.xml”，并且“sample”文件夹中的这个 .gwt.xml 文件和“source”中的类或实体文件夹

那么你当前的项目必须继承它。即它必须有以下标签

```
 <inherits name='sample.Source'/> 
```

例如：jar 文件中的 Sorce.gwt.xml

```
<module>
 <source path="">
 <include name="**/MyEntity.java"/>
 </source>
</module> 
```

供参考：http://jonathan.lalou.free.fr/?p=1077

GWT 不支持客户端的序列化，因此请尝试使用 RPC 并在服务器中使用 jar 中的这些类，或者您只需复制 jar 的包并添加到 gwt 项目的 src 中。

或者

**我解决了jar文件必须具有java源代码以及类文件或将java源代码打包到jar中并使用的问题。**

# php - CI 中使用了哪种数据库访问方法？

> ID：14515469
> 
> 赞同：0
> 
> 时间：2013-01-25T04:42:35.227
> 
> 标签：php, database, codeigniter

我听说（感谢 SO）mysql_* 系列函数容易受到 SQL 注入的影响，因此始终建议使用**mysqli_* OR PDO 方法。**

因此，我试图找出 Codeigniter 中使用了哪些方法，因为我已经使用 CI 4 个月了。但我无法把它弄出来。

谁能告诉我 CI 中使用了哪些方法或任何其他方法？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T04:48:37.103

CodeIgniter 根据您的`config/database.php`文件使用您选择的任何方法。例如，如果您选择`mysqli`作为驱动程序，它将使用`mysqli`函数族。如果选择`mysql`，它将使用`mysql`家庭，依此类推。

有一个 PDO 驱动程序，但它不是当前版本中世界上最稳定的东西。

如果您在 CodeIgniter 中使用“活动记录”函数（实际上应该称为“查询构建器”函数，因为它们不遵循活动记录模式），那么您的所有数据都会使用适当的函数自动清理。例如，如果您说 ，`$this->db->where('field', $value)`并且您正在使用`mysqli`驱动程序，CodeIgniter 将自动调用您传递给它`mysqli_real_escape_string`的输入，从而使查询安全。`$value`

我还应该注意，这种自动清理仅适用于活动记录帮助器功能，例如`$this->db->get`等。如果您尝试使用 then 运行自己的查询，`$this->db->query("SELECT * FROM table WHERE field = '" . $field . "'")`则需要注意保护自己，因为您绕过了 CodeIgniter 的安全机制。直接使用该`query()`方法运行查询就像在说“别担心，我知道我在做什么”。您需要专门要求 CodeIgniter 通过调用`$this->db->escape()`或其相关函数为您清理某些值。如果您只是将变量连接到查询中，那么您将对 SQL 注入敞开心扉。

# eval - 使用 eval 设计计算器的优缺点

> ID：14515472
> 
> 赞同：1
> 
> 时间：2013-01-25T04:42:54.870
> 
> 标签：eval, calculator, kivy

我正在使用 kivy 为 android 制作一个计算器，它几乎完成了（不能使用 java，因为 python 是我知道的唯一语言）。它的工作方式是，用户输入一个表达式，然后 eval 用于评估该表达式。目前，在我的应用程序中，eval 表达式可以包含数字、数学运算符（+、-、/、*）和数学模块中的大多数运算符（简而言之，它是一个科学计算器），并且可以按预期工作。将来我计划集成 matplotlib 以向应用程序添加图形功能。因此，在上下文中， eval 是一个安全的选择。鉴于我在编程方面的经验有限，我并不认为 eval 在很多情况下都是不安全的方法，就在几天前，我偶然发现了一个讨论与使用 eval 相关的安全问题的线程。

那么将评估更改为我的应用程序中的其他内容更好还是在给定情况下安全？如果对前者是，那么最好的选择是什么而不改变我的代码太多。如果它在python标准库中也会更好，这样我就不会增加应用程序的大小）

编辑：顺便说一句，eval 表达式是实时计算的（不确定这是否重要）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:50:20.063

[这篇文章](http://lybniz2.sourceforge.net/safeeval.html)应该对你很有用——它几乎正是你想要做的。

另一方面，这是一个很好的警告，如果您不小心可能会发生什么[。](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)大概有解决这个问题的好方法（也许只是过滤掉任何包含双下划线的输入，作为一个非常简单的开始），但值得记住的是 Python 有很多魔法，并且大部分所说的魔法都可以通过`eval()`.

# erlang - 进程正常退出

> ID：14515480
> 
> 赞同：3
> 
> 时间：2013-01-25T04:44:08.887
> 
> 标签：erlang, signals

给定两个链接的进程`child`和`parent`，进程如何`child`检测到`parent`正常退出（终止）？

我，作为一个绝对的 Erlang 初学者，认为一个进程，当它无事可做时，使用`exit(normal)`. 然后，这会向所有链接的进程发出信号，其中

*   已`trap_exit`设置为的进程的行为`false`是忽略信号，并且
*   已`trap_exit`设置为的进程的行为`true`是生成消息`{'EXIT', pid, normal}`，其中`pid`是终止进程的进程 ID。

我这么认为的原因是[Learn You Some Erlang for Great Good](http://learnyousomeerlang.com/errors-and-processes#its-a-trap)和[Erlang 文档](http://www.erlang.org/doc/reference_manual/processes.html)，其中说明了以下内容。

> 如果退出原因是原子正常，则称进程正常终止。没有更多代码可以执行的进程正常终止。

显然这是错误的 (?)，因为`exit(normal`) 显示`** exception exit: normal`在命令提示符中并使下面的代码工作。因为没有更多代码要执行而退出不会产生异常并且不会使我的代码工作。

例如，考虑以下代码。

```
-module(test).
-export([start/0,test/0]).

start() ->
     io:format("Parent (~p): started!\n",[self()]),
     P = spawn_link(?MODULE,test,[]),
     io:format(
        "Parent (~p): child ~p spawned. Waiting for 5 seconds\n",[self(),P]),
     timer:sleep(5000),
     io:format("Parent (~p): dies out of boredom\n",[self()]),
     ok. 

test() ->
     io:format("Child (~p): I'm... alive!\n",[self()]),
     process_flag(trap_exit, true),
     loop().

loop() ->
     receive
          Q = {'EXIT',_,_} ->
                io:format("Child process died together with parent (~p)\n",[Q]);
          Q ->
                io:format("Something else happened... (~p)\n",[Q])
     after
          2000 -> io:format("Child (~p): still alive...\n", [self()]), loop()
     end. 
```

这会产生如下输出。

```
(erlide@127.0.0.1)> test:start().
Parent (<0.145.0>): started!
Parent (<0.145.0>): child <0.176.0> spawned. Waiting for 5 seconds
Child (<0.176.0>): I'm... alive!
Child (<0.176.0>): still alive...
Child (<0.176.0>): still alive...
Parent (<0.145.0>): dies out of boredom
ok
(erlide@127.0.0.1)10> Child (<0.176.0>): still alive...
Child (<0.176.0>): still alive...
Child (<0.176.0>): still alive...
Child (<0.176.0>): still alive...
Child (<0.176.0>): still alive...
Child (<0.176.0>): still alive...
Child (<0.176.0>): still alive...
exit(pid(0,176,0),something).
Child process died together with parent ({'EXIT',<0.194.0>,something}) 
```

如果必须手动执行`exit(pid(0,176,0),something)`命令以防止孩子永远活着。更改`ok.`为`start`使`exit(normal)`执行像这样进行

```
(erlide@127.0.0.1)3> test:start().
Parent (<0.88.0>): started!
Parent (<0.88.0>): child <0.114.0> spawned. Waiting for 5 seconds
Child (<0.114.0>): I'm... alive!
Child (<0.114.0>): still alive...
Child (<0.114.0>): still alive...
Parent (<0.88.0>): dies out of boredom
Child process died together with parent ({'EXIT',<0.88.0>,normal})
** exception exit: normal 
```

我的具体问题如下。

1.  如何使上述代码按预期工作。也就是说，如何在*不更改父进程的情况下*确保子进程与父进程一起死亡？
2.  为什么会在 CLI中`exit(normal)`生成一个？`** exception exit: normal`我很难将异常视为正常现象。Erlang 文档中的气味是什么意思？

我认为这些一定是非常基本的问题，但我似乎无法弄清楚......我在 Windows (x64) 上使用 Erlang 5.9.3.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:03:49.470

Erlang shell 将用于评估命令的工作进程作为一个单独的进程，并且您键入的所有命令都由同一进程运行。当你的`start`函数完成时，worker 还活着，当你通过 exit() 杀死它时，shell 理解为 worker 异常（因为在正常情况下 worker 永远不会死）。

所以：

1.  `spawn`您应该通过或作为单独的进程运行启动`spawn_link`
2.  CLI 将所有工作人员退出记录为异常和正常

PS对不起我的英语

PPS`spawn(fun() -> test:start() end).`按预期工作

```
4> spawn(fun() -> test:start() end).
Parent (<0.41.0>): started!
<0.41.0>
Parent (<0.41.0>): child <0.42.0> spawned. Waiting for 5 seconds
Child (<0.42.0>): I'm... alive!
Child (<0.42.0>): still alive...
Child (<0.42.0>): still alive...
Parent (<0.41.0>): dies out of boredom
Child process died together with parent ({'EXIT',<0.41.0>,normal}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:29:17.687

在@PetrKozorezov 的回答中对您的问题发表评论。外壳并没有以任何方式表现特殊。shell worker 进程只是一个普通进程，所以如果它链接到的任何进程崩溃，那么它也会崩溃。然后将启动另一个工作进程。这是正常的*Erlang 方式*。

您的`start/0` **函数**只是返回并且不会**终止**其进程，它只是输出“无聊之死”消息。这就是为什么循环继续进行的原因，它没有收到`exit`信号，因为没有进程死亡。

当您将`start/0`函数更改为结束时，`exit(normal)` **您**确实会终止 shell 进程，以便将`exit`信号发送到循环进程，然后循环进程会获取`{'EXIT',...,...}`消息并终止。

当@PetrKozorezov`start/0`在一个单独的进程中生成您的原始函数时，该函数在执行后死亡，`start/0`它向循环进程发送了一个退出`normal`信号，导致它死亡。

这是完全正常的 Erlang 行为和风格。您通常**不会**用 an结束*start*函数，`exit`而是让调用者决定何时结束。

还有一点：正如 start 函数所做的那样，`spawn_link`您通常会调用它`start_link`。假设一个`start`函数只是`spawn`一个过程。当然，这只是一个约定，而是一个常见的约定，因此您没有犯错误。

# xcode - xcode 控制台输出中的源文件链接

> ID：14515481
> 
> 赞同：4
> 
> 时间：2013-01-25T04:44:17.757
> 
> 标签：xcode

许多开发环境在调试时将一些基本的解析逻辑应用于程序的输出，例如，如果程序写入控制台（由于错误，断言），例如：

> /Users/Foo/Project/SomeFile.m:12 - 这里发生了一些不好的事情

文件路径和行名会被自动检测为源链接，并且可以单击或双击控制台窗口内的相关文本以使源编辑器跳转到此处。

我一直在试图找出 XCode 是否有类似的东西，但我运气不佳。XCode 中是否缺少任何此类功能，或者我只是没有找到它喜欢的首选文本形状？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:21:42.837

我只记得“快速打开……”。如果您复制文件名的文本，然后使用“快速打开...”功能（默认为Cmd-Shift-O），您可以将文件名粘贴进去并按回车，它会显示该文件。

# asp.net-mvc - 将逻辑从 View 移动到 Controller 和 ViewModel

> ID：14515484
> 
> 赞同：0
> 
> 时间：2013-01-25T04:44:45.943
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4

我正在移动所有定义，如下所示：

```
 @(Model.Store.EmployeeType.Name == "Manager" ? Model.Store.HQ.Manager.DisplayName : Model.Store.Manager.DisplayName ) 
```

从我的视图中进入视图模型：

```
public class ManagerViewModel 
{
    public string Manager {get;set;}
} 
```

并在控制器中定义它们：

```
var viewModel = new ManagerViewModel();

viewModel.Manager = Model.Store.EmployeeType.Name == "Manager" ? Model.Store.HQ.Manager.DisplayName : Model.Store.Manager.DisplayName;

return View(viewModel); 
```

现在，在我看来，我可以这样做：

```
@Model.Manager 
```

我的问题是——这是否违反了瘦控制器的最佳实践？我有大约 30 个字段需要这种类型的处理，所以我的控制器会很大——我正在为每个字段创建一个新属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:49:03.833

不要太担心[过早的优化](https://stackoverflow.com/a/385529/124069)。我认为您在这里走在正确的道路上，不必为此担心太多。

如果您真的担心“瘦”控制器，则可以从构造函数中填充 ViewModel。

```
public class ManagerViewModel 
{

    public ManagerViewModel(ManagerModel model){
        // initialize in here
        this.Manager = model.Store.EmployeeType.Name == "Manager" ? model.Store.HQ.Manager.DisplayName : model.Store.Manager.DisplayName;
    }

    public string Manager {get;set;}
} 
```

```
var viewModel = new ManagerViewModel(model);
return View(viewModel); 
```

# sql-server - 将 T-sql 游标转换为 oracle 游标：在 Oracle 游标中等效的 FETCH_STATUS

> ID：14515485
> 
> 赞同：0
> 
> 时间：2013-01-25T04:44:57.707
> 
> 标签：sql-server, oracle, tsql, cursor

我需要将以下 T-SQL 游标转换为 PL-SQL 游标：

```
DECLARE employe_cur CURSOR 
FOR
SELECT name FROM #table 
where salary = 0
OPEN employe_cur
 FETCH NEXT FROM employe_cur
WHILE @@FETCH_STATUS <> -1
BEGIN
  FETCH NEXT FROM employe_cur
END
CLOSE employe_cur
DEALLOCATE employe_cur 
```

大部分部分都很简单，但是如何转换它

```
 @@ FETCH_STATUS <> -1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:54:28.773

这就是您在 Oracle 中的操作方式（多种方式之一）：

```
 OPEN employees_cur;

   LOOP
      ...do your fetches here

      EXIT WHEN employees_cur%NOTFOUND;
   END LOOP;

   CLOSE employees_cur; 
```

# google-analytics - 如何测试谷歌分析？AnalyticsForWindowsPhone 不工作

> ID：14515487
> 
> 赞同：1
> 
> 时间：2013-01-25T04:45:07.043
> 
> 标签：google-analytics, windows-phone-8

有没有人让这个库与 Windows Phone 8 一起工作？我已按照[此页面](http://devatheart.azurewebsites.net/2012/09/02/analytics-for-windows-phone-nuget-to-rule-them-all/)中的所有步骤进行操作，但 Google 上没有显示任何内容。没有直播，没有活动……什么都没有。我上周建立了谷歌分析网站。我也尝试[了这个分析包](http://mark.mymonster.nl/2013/01/18/google-analytics-now-also-on-your-windows-phone-8-app-in-1-minute)，也没有从中得到任何东西。如果有人让它工作，有没有在这些页面上不明显的技巧？我很好奇是否有办法从 Google 测试我的 PropertyID，看看它是否有效——比如我可以输入带有参数的 URL，例如，看看它是否有效。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:00:36.280

拉曼，

我是 MSAF.GoogleAnalytics nuget 包的创建者。您是否尝试使用提琴手来查看实际的 HTTP 请求是否通过？

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:12:40.930

我从来没有让谷歌分析工作。我最终选择了 Flurry，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T21:53:23.370

要查看实时数据，您需要通过页面跟踪来跟踪它，而不是自定义类别、操作或标签。

# java - 如何在给定值上获取匹配字符串（特殊字符（如 +-=.etc）或字符串（az 字母）。

> ID：14515488
> 
> 赞同：0
> 
> 时间：2013-01-25T04:45:29.197
> 
> 标签：java

我这里有一个纯 java 代码，这个给我一个输出“特殊字符是：java.util.regex.Matcher[pattern=[\p{Punct}&&[^_]]+ region=0,8 lastmatch= &&=+-]”，因为我编译和运行，但我只想根据我的给定值输出“特殊字符是：&&=+-”。并且字符串与“字符串是：sam”相同，但不知道该怎么做，请帮助......我使用了netbeans ide

```
 import java.util.regex.Matcher;
     import java.util.regex.Pattern;

     class SubstringsOfAString
     {
      public static void main(String args[])
         {

        String sample = "sam&&=+-";
        Pattern p = Pattern.compile("[\\p{Punct}&&[^_]]+");
         Matcher m = p.matcher(sample);

       boolean b = m.find();

       if(b == true)
       {
         System.out.println("Special Characters are: " + m );

         }

       else {
      System.out.println("Nothing" );
       }

            }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:52:43.687

将 System.out 替换为

```
 System.out.println("Special Characters are: " + m.group()); 
```

在您的解决方案中，您正在打印整个 Matcher 对象，而不是匹配项。

# jquery - 手机悬停效果

> ID：14515489
> 
> 赞同：0
> 
> 时间：2013-01-25T04:45:50.983
> 
> 标签：jquery, mobile

我有一个简单的 jquery 函数，它在图像悬停时淡入淡出：

```
if($(".portfolioThumbs").length>0){
$(".magnify").css("opacity","0");
$(".magnify").hover(function(){$(this).stop().animate({opacity:1},"slow")},function()     {$(this).stop().animate({opacity:0},"slow")}
)}; 
```

如何在移动设备上获得同样的效果？我在某处读到你可以使用“touchstart”和“touchend”——如果是这样，我怎么能把它结合到这个函数中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:59:54.200

也许这样的事情可以奏效。

```
var hoverStart = function(evt){
    $(this).stop().animate({
        opacity:1
    },"slow")
};
var hoverEnd = function(evt)     {
    $(this).stop().animate({
        opacity:0
    },"slow")
}
if($(".portfolioThumbs").length>0){
    $(".magnify").css("opacity","0");
    $(".magnify").bind('touchstart',hoverStart);
    $(".magnify").bind('touchend',hoverEnd);
    $(".magnify").hover(hoverStart, hoverEnd);
} 
```

# delphi - 使用带字符串的 Case 语句

> ID：14515492
> 
> 赞同：36
> 
> 时间：2013-01-25T04:46:18.237
> 
> 标签：delphi, delphi-xe2

说我有一个字符串

```
'SomeName' 
```

并希望在 case 语句中返回值。这可以吗？可以像这样在case语句中使用字符串吗

```
Case 'SomeName' of

   'bobby' : 2;
   'tommy' :19;
   'somename' :4000;
else
   showmessage('Error');
end; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-25T07:00:11.063

在 Jcl 库中，您有 StrIndex 函数`StrIndex(Index, Array Of String)`，其工作原理如下：

```
Case StrIndex('SomeName', ['bobby', 'tommy', 'somename']) of 
  0: ..code.. ;//bobby
  1: ..code..;//tommy
  2: ..code..;//somename
else
  ShowMessage('error');
end. 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-25T05:11:15.260

Delphi[`Case Statement`](http://docwiki.embarcadero.com/RADStudio/XE3/en/Declarations_and_Statements#Case_Statements)只支持序数类型。所以你不能直接使用字符串。

但存在另一种选择，如

*   构建一个基于字符串返回整数（哈希）的函数
*   使用泛型和匿名方法（[字符串的通用案例](http://delphi.fosdal.com/2010/12/generic-case-for-strings.html)）
*   使用接收字符串数组的函数（为字符串[做一个案例，理智的方式](http://www.deltics.co.nz/blog/?p=706)）
*   等等。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-03-15T22:21:38.940

@Daniel 的回答为我指明了正确的方向，但我花了一段时间才注意到“Jcl 库”部分和关于标准版本的评论。

在 [至少] XE2 及更高版本中，您可以使用：

```
Case IndexStr('somename', ['bobby', 'tommy', 'somename', 'george']) of 
  0: ..code..;                   // bobby
  1: ..code..;                   // tommy
  2: ..code..;                   // somename
 -1: ShowMessage('Not Present'); // not present in array
else
  ShowMessage('Default Option'); // present, but not handled above
end; 
```

此版本区分大小写，因此如果第一个参数是“SomeName”，它将采用`not present in array`路径。用于`IndexText`不区分大小写的比较。

对于较旧的 Delphi 版本，请分别使用`AnsiIndexStr`或`AnsiIndexText`。

感谢@Daniel、@The_Fox 和@afrazier 对于这个答案的大部分组成部分。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-20T10:38:32.073

在 D7 和 Delphi 西雅图工作，

```
uses StrUtils (D7) system.Ansistring (Delphi Seattle)

case AnsiIndexStr(tipo, ['E','R'] )   of
      0: result := 'yes';
      1: result := 'no';
end; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-15T16:09:05.257

我使用了 AnsiStringIndex 并且可以工作，但是如果您可以毫无问题地转换为数字：

```
try
  number := StrToInt(yourstring);
except
  number := 0;
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-08T10:33:22.060

试试这个它使用 System.StrUtils

```
procedure TForm3.Button1Click(Sender: TObject);
const
  cCaseStrings : array [0..4] of String = ('zero', 'one', 'two', 'three', 'four');
var
  LCaseKey : String;
begin
  LCaseKey := 'one';
  case IndexStr(LCaseKey, cCaseStrings) of
    0: ShowMessage('0');
    1: ShowMessage('1');
    2: ShowMessage('2');
    else ShowMessage('-1');
  end;
end; 
```

# c++ - 在注册表中存储和使用 Windows 句柄 (WId)

> ID：14515496
> 
> 赞同：0
> 
> 时间：2013-01-25T04:46:56.587
> 
> 标签：c++, qt, window-handles

我希望将正在运行的应用程序实例的 Window 句柄存储在注册表中，即小部件的 WId（在 Qt 中）。

我需要这个来确保如果另一个应用程序启动，它可以检查注册表以了解它应该向谁发送消息，使用 sendMessage() windows API。

我如何实现这一目标？

Windows 句柄 HWND 的类型，其中**WId 是 typedef** ..是一个 void 指针。

如何将此类信息存储在注册表设置中，然后检索以再次使用？

请帮我解决一下这个。我有义务。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:43:59.010

根据程序的位数，您可以将其`REG_DWORD`用于 32 位程序或`REG_QWORD`64 位程序。

# php - 通过 php 代码重新定义 iframe URL

> ID：14515497
> 
> 赞同：0
> 
> 时间：2013-01-25T04:47:11.543
> 
> 标签：php, html

我想使用 PHP 设置 iframe 的 url，我的 url 采用这种格式： http: [//mysite.com/s/](http://mysite.com/s/) where = numbers，我想制作一个按钮，增加 1 的 url 中的数字并重新加载内嵌框架。

```
<html>
    <head>
        <meta charset="utf-8" />
        <link href="style.css" rel="stylesheet" type="text/css" />
    </head>

    <body>
        <form class="topBorder">
            <p>
                <?php
                    $site = 6394100;

                    function NextSite($sites)
                    {
                        $sites += 1;
                        return 'http://mywebsite.com/s/' . $sites . '/';
                    }

                ?>
                <a href="<?php echo NextSite($sites); ?>" target="frame"> Next </a>
            </p>
            <iframe name="frame" id="frame" src="http://mywebsite.com/s/" class="gagFrame"></iframe>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:55:52.553

好吧，您可以为此借助一个简单的 JS 函数。请参阅下面的修改后的代码。我还没有测试过，但你应该知道这样做的想法。

编辑：

您需要以 ajax 方式完成它。将你的 php 函数放在一个文件中，比如 loadurl.php：

```
 <?php
                $site = 6394100;

                   $sites += 1;
                   echo 'http://mywebsite.com/s/' . $sites . '/';
            ?> 
```

现在在您的 html 代码中执行以下操作：

```
<html>
<head>
    <meta charset="utf-8" />
    <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <form class="topBorder">
    <script type="text/javascript">
    function loadURL()
    { 
         $.get('pathToloadurl.php',success(data)
         {
             window.frames[siteFrame].location =data;
         });
     }
    </script>
   <button type="button" onClick="loadURL()">Next</button>
   <iframe name="siteFrame" id="frame" src="http://mywebsite.com/s/" class="gagFrame"></iframe>
 </form> 
```

# jquery - 如何在ul中使用jquery在每个5的倍数之后添加div

> ID：14515500
> 
> 赞同：0
> 
> 时间：2013-01-25T04:48:10.447
> 
> 标签：jquery

如何使用 jquery 实现以下目标。我尝试使用 css 但无济于事，所以我正在考虑使用 jquery。我怎样才能做到这一点？我试图追加但无济于事。

```
 <ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <div class="clear"></div>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <div class="clear"></div>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <div class="clear"></div>
    </ul> 
```

欢迎任何帮助或建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:54:34.627

您将要使用第[n 个子选择器。](http://api.jquery.com/nth-child-selector/)

```
$('ul li:nth-child(5n)').after('<li class="clear"></li>'); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-25T04:52:43.427

尝试以下...它应该工作..

```
 $(document).ready(function(){
    $('ul li').each(function(i,val){
    i++;
    if(i%5==0){
    $(this).append('<div class="clear"></div>');
    }
    });
    }); 
```

# azure - Azure 处理程序映射，如何将扩展指向 .net 4.5？

> ID：14515508
> 
> 赞同：0
> 
> 时间：2013-01-25T04:48:46.417
> 
> 标签：azure, iis, azure-web-app-service

我有一个 Azure 网站设置，我试图将 .html 指向 .net 4.5，因为我希望 MVC 路由扩展的请求，并且我相信 IIS 正在路由它并且它永远不会让它到 mvc/asp。净决定去哪里。

有一个 Handler Mappings 部分，但我不确定要为脚本处理器路径放置什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:46:06.237

我不确定，但我想你可以将它映射到 System.Web.UI.PageHandlerFactory

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-08T19:35:14.420

脚本处理器值应该是“FastCGI 应用程序的绝对路径”。[在这里找到更多细节](https://docs.microsoft.com/en-us/rest/api/appservice/webapps/getconfiguration#handlermapping)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-12T16:18:37.507

设置 -> 配置 -> 路径映射 ScriptProcessor 将引用安装在 IIS 上的可用处理程序映射之一。

[https://docs.microsoft.com/en-us/iis/configuration/system.webserver/handlers/](https://docs.microsoft.com/en-us/iis/configuration/system.webserver/handlers/)

如果您想查看可用的脚本映射，那么您可以这样做。

1.  转到应用服务门户
2.  适用于 Windows 的开放式应用服务
3.  单击高级工具下的“开始”
4.  在 Kudu 中转到调试控制台
5.  查找并打开 ApplicationHost.config。

你会在下面看到一些例子。

```
 <handlers accessPolicy="Read, Script">

    <add name="PHP56_via_FastCGI" path="*.php" verb="GET,HEAD,POST" modules="FastCgiModule" scriptProcessor="D:\Program Files (x86)\PHP\v5.6\php-cgi.exe" resourceType="Either" />

    <add name="svc-ISAPI-2.0-64" path="*.svc" verb="*" modules="IsapiModule" scriptProcessor="%SystemRoot%\Microsoft.NET\Framework64\v2.0.50727\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv2.0,bitness64" />

    <add name="svc-ISAPI-2.0" path="*.svc" verb="*" modules="IsapiModule" scriptProcessor="%SystemRoot%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv2.0,bitness32" />

    <add name="svc-ISAPI-4.0_64bit" path="*.svc" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" />

    <add name="svc-ISAPI-4.0_32bit" path="*.svc" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" />

    <add name="svc-Integrated-4.0" path="*.svc" verb="*" type="System.ServiceModel.Activation.ServiceHttpHandlerFactory, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="integratedMode,runtimeVersionv4.0" />

    <add name="ASPClassic" path="*.asp" verb="GET,HEAD,POST" modules="IsapiModule" scriptProcessor="%windir%\system32\inetsrv\asp.dll" resourceType="File" /> 
```

# ios - 使用滑动手势在 uivewconrollers 之间切换

> ID：14515514
> 
> 赞同：0
> 
> 时间：2013-01-25T04:49:16.247
> 
> 标签：ios, xcode, gestures

我正在尝试使用滑动手势（向上）和小动画在 4 个 VC 之间切换，我正在使用 xib：

```
-(IBAction)gotonext:(UISwipeGestureRecognizer *)recognizer{
ibasar *ibas =[[ibasar alloc]initWithNibName:@"ibasar" bundle:nil];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES];

[self.view addSubview:ibas.view];

[UIView commitAnimations];

  } 
```

问题是当我从第一个 VC 切换到第二个时完成了，但是当我从第二个切换到第三个时，应用程序停止了！尽管 switch 使用了相同的代码！任何帮助请..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:53:28.237

首先，如果要制作动画，请使用块动画。不是旧的动画方法。

其次，您只是在彼此之上添加一个子视图。这可能对内存很重。在动画结束时删除并丢弃旧视图，或者更好的是，使用 UINavigation 视图控制器为您处理所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:09:20.440

你可以创建一个`CATransition`动画。这是一个示例，说明如何在将当前视图推出时将第二个视图（从左侧）滑入屏幕：

```
UIView *theParentView = [self.view superview];

CATransition *animation = [CATransition animation];
[animation setDuration:0.3];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromLeft];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

[theParentView addSubview:yourSecondViewController.view];
[self.view removeFromSuperview];

[[theParentView layer] addAnimation:animation forKey:@"MainView"]; 
```

# ruby-on-rails-3 - 格式化返回的 rails 数据

> ID：14515515
> 
> 赞同：0
> 
> 时间：2013-01-25T04:49:19.280
> 
> 标签：ruby-on-rails-3

我对 Rails 很陌生，但是有一个不错的项目正在进行

我的模型中有以下内容：

def self.get_feeds

```
sponsorlinks = RssFeed.all

links = sponsorlinks.each do |sponsorlink|
  puts sponsorlink.rss_url
end

feed_urls = ["link1","link2"]
update_from_feeds(feed_urls) 
```

结尾

“链接”按预期将我的 2 个链接输出到控制台，但是如何将我的两个链接放入 feed_urls = ["link1","link2"]

以预期的格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:49:25.240

```
sponsorlinks = RssFeed.all

links = []
sponsorlinks.each do |sponsorlink|
  links << sponsorlink.rss_url
end
update_from_feeds(links) 
```

# eclipse - Eclipse 中的 JCDE 插件不起作用，java 卡

> ID：14515516
> 
> 赞同：0
> 
> 时间：2013-01-25T04:49:24.940
> 
> 标签：eclipse, plugins, javacard

我复制`eclipse-jcde-0.2`到 eclipse'plugin 文件夹中，但是 eclipse 中的插件不起作用，我是否仍然缺少诸如 FEATURES 文件夹等必要的东西，我怎样才能获得这些功能？

```
OS:windows
Eclipse version :3.2. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T06:01:17.257

它对我来说很好。
我已按照链接[eclipse-jcde](http://eclipse-jcde.sourceforge.net)
的确切说明进行操作， 我所做的唯一更改是使用 Eclipse 3.5 而不是 eclipse 3.2

要在 Eclipse 3.5 中安装，请按照以下步骤操作。

1.  下载 Eclipse 3.5 后，在 eclipse 文件夹中创建 plugins 文件夹（如果还没有的话。）

2.  将下载的 zip 文件（eclipse-jcde-0.2.zip\plugins 文件夹）中的所有 jar 文件粘贴到 plugins 文件夹（有 8 个 jar）

3.  以 -clean 模式启动 eclipse。
    以干净模式启动 eclipse：在 eclipse 文件夹上右键单击并打开命令提示符，然后发出命令`eclipse -clean`。

`java-card-dev-kit-home`现在按照上述链接中 的说明设置路径。

我能够创建 java 卡项目和小程序，甚至还可以启动 JCWDE 模拟器。

# google-chrome-extension - javascript 表单评估的格式化消息

> ID：14515518
> 
> 赞同：0
> 
> 时间：2013-01-25T04:49:35.433
> 
> 标签：google-chrome-extension

我一直在尝试为 Safari Firefox 和 Chrome 开发一个简单的扩展，其中一个表单在弹出窗口中呈现给用户，填写后在本地进行评估，并在该评估中定义对用户的响应。原始表格可在以下网址找到：[https ://dl.dropbox.com/u/86545493/Waze/Calculadora.html](https://dl.dropbox.com/u/86545493/Waze/Calculadora.html)

我也已经能够创建一个可以在此处下载的工作 safari 扩展程序：[https](https://dl.dropbox.com/u/86545493/Waze/Extensions/WRTC.safariextz) ://dl.dropbox.com/u/86545493/Waze/Extensions/WRTC.safariextz 但我的问题在尝试创建 chrome 扩展程序时开始.

我按照教程创建了第一个扩展，并且能够创建一个按钮并将表单加载为弹出窗口。但是，安全限制不允许我的表单运行。根据我通过阅读开发人员指南所了解的内容，我需要将 javascript 分离到其自己的文件中并从弹出文件中调用它。然而，文件的语言对我（医学生）来说太专业了，我无法理解格式化应该使用的消息的正确方法。这是我的代码的当前状态：

popup.html

```
<head>
<script type="text/javascript" src="popup.js"></script>
</head>
<body>
<h1>Calculadora de Tipo de Camino</h1>
<form id="Calle" target="_self">
    Cruceros <select id="cruceros">
     <option value=1>Glorietas</option>
     <option value=1>Rotondas</option>
     <option value=1>Sem&aacuteforos</option>
     <option value=0 selected>Sin Control</option>
     <option value=2>Sin Cruceros</option>
    </select></br>
    Carriles <select id="carriles">
        <option value=1 selected>1</option>
        <option value=2>2</option>
        <option value=3>3 o m&aacutes</option>
    </select></br>
    Sentidos Separados f&iacutesicamente o parte de par vial <input type="checkbox" id="sentidos"></br>
    Con Laterales o Acotamiento <input type="checkbox" id="laterales"></br>
    Entradas y Salidas delimitadas <input type="checkbox" id="ramps"></br>
    Avenida, Boulevard, o Circuito <input type="checkbox" id="name"></br>
    Es Carretera
    <select id="carretera">
        <option value=0 selected>No</option>
        <option value=1>Municipal</option>
        <option value=2>Estatal</option>
        <option value=3>Federal</option>
    </select> Revisar en: <a href="http://petra.sdg.mx/sigcsi/" target="_blank">SCT</a></br>
    Tiene topes <input type="checkbox" id="topes"></br>
    </br>
</form>
<button type="button" onclick="textR()">Calcular Puntos</button>
<hr><p id="resultn"></p>
<p id="resultt"></p>
</body> 
```

popup.js

```
function textR()
{var cru=document.getElementById("cruceros").value;
if (cru==0){crun=0}
else if (cru==1){crun=1}
else{crun=2}
var carr=document.getElementById("carriles").value;
if (carr==1){carrn=0}
else if (carr==2){carrn=1}
else{carrn=2}
sen=(document.getElementById("sentidos").checked==true)?1:0;
lat=(document.getElementById("laterales").checked==true)?1:0;
ram=(document.getElementById("ramps").checked==true)?1:0;
av=(document.getElementById("name").checked==true)?1:0;
var hw=document.getElementById("carretera").value;
if (hw==1){hwn=1}
else if (hw==2){hwn=2}
else if (hw==3){hwn=3}
else{hwn=0}
saluden=(document.getElementById("topes").checked==true)?1:0;
var r=crun+carrn+sen+lat+ram+av+hwn+saluden;
document.getElementById("resultn").innerHTML=(r+" puntos");
if (r<2){rt='Street'}
else if (r<4){rt='<span class="pstreet">Primary Street'}
else if (r<7){rt='<span class="mihw"> Minor Highway '}
else if (r<9){rt='<span class="mahw"> Major Highway '}
else {rt='<span class="fw"> Freeway '}
document.getElementById("resultt").innerHTML=(rt);
} 
```

你能告诉我要使用的正确语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:37:19.373

消除内联代码`onclick="textR()"`并将其添加，`popup.js`如下所示

```
document.getElementsByTagName("button")[0].addEventListener("click",textR); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:11:37.390

最后，我最终将popup.js 放在`document.getElementById("calcButton").addEventListener("click", textR);`了末尾，不得不移到`<script type="text/javascript" src="popup.js"></script>`popup.html 的末尾。

I found this article usefull: [Javascript: Uncaught TypeError: Cannot call method 'addEventListener' of null](https://stackoverflow.com/questions/9856140/javascript-uncaught-typeerror-cannot-call-method-addeventlistener-of-null)

# php - MySQL中的特殊字符

> ID：14515523
> 
> 赞同：-1
> 
> 时间：2013-01-25T04:50:12.093
> 
> 标签：php, mysql

我正在搜索我正在从事的项目。当有人搜索一个词时，它将被保存在 MySQL 数据库中。我`mysql_real_escape_string`用来转义特殊字符，但仍将特殊字符保存在数据库中，例如

不要变成不要

然后我试`htmlspecialchars`了一下还是一样。我什至将数据库更改为`utf8_general_ci`我也尝试过。

这是代码

```
$addSearch = htmlspecialchars($search);
$addSearch1 = mysql_real_escape_string($addSearch);
mysql_query("INSERT INTO search (term) VALUES('$addSearch1') ") 
or die(mysql_error()); 
```

谁能告诉我一个解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:53:40.957

使用此正则表达式从字符串中删除特殊字符

```
$addSearch = preg_replace('/[^a-zA-Z0-9_ %\[\]\.\(\)%&-]/s', '', $search);
mysql_query("INSERT INTO search (term) VALUES('$addSearch') ") or die(mysql_error()); 
```

并使用`mysqli`or`pdo`代替，`mysql`因为它已被弃用并且可以在将来删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:55:37.647

我建议检查您的 PHP 配置 (php.ini) 以查看是否启用了“Magic Quotes”。如果是这样，请关闭它们并重新启动您的网络服务。更多[信息在这里](http://php.net/manual/en/security.magicquotes.disabling.php)。

```
; Magic quotes for incoming GET/POST/Cookie data.
magic_quotes_gpc = Off

; Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
magic_quotes_runtime = Off

; Use Sybase-style magic quotes (escape ' with '' instead of \').
magic_quotes_sybase = Off 
```

`.htaccess`如果您无法编辑，您也可以在文件中使用它`php.ini`：

```
php_flag magic_quotes_gpc Off 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T05:11:10.743

试试这样......

```
$height='aA1`';
$value=preg_replace("/[^\`a-z,. \'\-\d]/i", "", $height);
$value=mysql_real_escape_string($value);
mysql_query("INSERT INTO `table` SET `column`='$value'") or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T04:57:49.280

实际上，有很多方法可以做到这一点。也许有一些你看不到的错误。

```
$str = addslashes($str);
$str = addcslashes($str, "'\"");
$str = str_replace(array("'", '"'), array("\\'", '\\"'), $str);
$str = preg_replace("~([\"'])~", "\\\\1", $str); 
```

# c# - 从 T4 文本模板文件调用函数

> ID：14515527
> 
> 赞同：0
> 
> 时间：2013-01-25T04:50:32.370
> 
> 标签：c#, asp.net-mvc-3, texttemplate

我正在使用 T4 tt 文件，我试图在其中调用一个函数表，该函数表位于不同的命名空间和类中，分别表示 r2ts 和 sql..

我已经导入了命名空间并进行如下调用

```
<#@ import namespace= "r2ts" #>

<# 
   WriteLine(r2ts.sql.GetTable(schema, tablename));
#> 
```

它不起作用，如下所示

编译转换：找不到类型或命名空间名称 r2ts（您是否缺少 using 指令或程序集引用？）

任何工作请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:04:48.587

我认为您必须引用 dll 以及程序集指令

```
<#@ assembly name="Name of the assembly" #> 
```

...检查[这个](http://www.olegsych.com/2008/02/t4-assembly-directive/)

# sql - 如何在sql中将不同的数据类型转换为int

> ID：14515528
> 
> 赞同：0
> 
> 时间：2013-01-25T04:50:35.910
> 
> 标签：sql, sql-server, sql-order-by

我`nvarchar(200)`在表中有一个列，其中包含整数（作为字符串）和非整数字符串和符号的混合。例如一些样本数据：-

对不起，我在最初的帖子中输入了 varchar(200)，但实际上它是 'nvarchar(200)'

```
02
0
.../
125
00125
/2009
1000
0002589
000.00125 
```

马拉地语[数字](http://www.google.co.in/imgres?imgurl=http://sanskritdocuments.org/marathi/eshala/allwrite001.jpg&imgrefurl=http://sanskritdocuments.org/marathi/eshala/&h=3051&w=2111&sz=566&tbnid=DdqEBTN1C2qwwM%3a&tbnh=90&tbnw=62&zoom=1&usg=__zRJQ6g8uCYPeaGcE0dIDKlOiPjM=&docid=FSHXRzbvO7XOPM&sa=X&ei=llQCUZWvAYqU0QXjwoGgAg&ved=0CD0Q9QEwAQ&dur=392)[和](http://www.google.co.in/imgres?imgurl=http://forum.brillkids.com/gallery/5585/Thumbnail.jpg&imgrefurl=http://forum.brillkids.com/downloads/?sa=view;id=5585&h=320&w=425&sz=5&tbnid=-h6RTrMy3PIFkM%3a&tbnh=96&tbnw=127&zoom=1&usg=__nRz1UTjPwAaTH31m8V3EnUOv7s4=&docid=W6yjFJQEv9zSYM&sa=X&ei=CRUCUavPHsaH0AXLmYHgDg&ved=0CEoQ9QEwBA&dur=287)字母

我怎样才能订购这个专栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:52:22.483

许多 DBMS 具有`CAST()`可以将一种数据类型转换为另一种数据类型的功能。

对于 MySQL 看看[这个网站](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:44:13.237

您可以使用此查询

`SELECT CASE`
`WHEN ISNUMERIC(colName)=1 THEN ROUND(colName, 0) ELSE 0 END AS [colName]`
`FROM tblName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:00:30.437

您可以使用**CAST 和 Convert**将字符串类型值转换为 int 类型。但请确保该值应为数字。

```
select convert(int,'123')

select CAST('123' as int) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:06:27.103

您可以使用[`CAST`](http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29.aspx)将 a 转换为varchar 持有正确数字`varchar`的给定值。`INT`

`SELECT CAST(varCharCol as Int)`

例如

`col1 as Varchar(10)`

`col1 = '100'`转换为 INT 将成功

但如果`col1 = '100 xyz'`在此过程中将不成功。

查看您的字符串，您可能必须使用 number of`LTRIM`来`REPLACE`获取数字或使用正则表达式来获取逗号分隔的数字。这也不是很清楚你的原始字符串是什么样子的。

*   [参考文献](http://www.sqlmag.com/article/tsql3/can-i-convert-this-string-to-an-integer--94069)。

# php - 在foreach php中使用foreach

> ID：14515533
> 
> 赞同：0
> 
> 时间：2013-01-25T04:52:20.010
> 
> 标签：php, magento, loops, foreach

嗨，我有一个脚本，其中有`foreach`一个`foreach`. 第*一个* `foreach`用于唯一的 id，但第二个`foreach`用于产品的相关图像，该图像应根据图像数量循环。但是，它限制我只能获取一张相关图片，我怎样才能获取所有相关图片？

```
$i=0;
foreach ($collection as $product_all) { 
    //echo $product_all->getId().'<br/>';
    if($i==10) break;  
    $id = $product_all->getId();        
    $neew = Mage::getModel('catalog/product')->load($id);         
    //echo'<pre>';
        echo 'active products id ===='.$neew ->getId().'<br/>';  
        echo 'active products name ===='.$neew->getname().'<br/>';    
        echo 'active products style_ideas ===='.$neew->getstyle_ideas().'<br/>';  
        echo 'active products size and fit ===='.$neew->getsize_fit().'<br/>';  
        echo 'active products short description ===='.$neew->getshort_description().'<br/>';  
        echo 'active products  description ===='.$neew->getdescription().'<br/>';  
        //print_r($neew); 
        if (count($neew->getMediaGalleryImages()) > 0){
            $i = 0 ;
            $j = 0 ;
            foreach ($neew->getMediaGalleryImages() as $_image){
                  $relative_image = Mage::helper('catalog/image')->init($neew->getProduct(), 'image', $_image->getFile())->resize(2000);
                  $relative_image1 = str_replace('/webApps/migration/productapi/new/','/',$relative_image);
                  //echo 'relative_image => '.$relative_image1.'<br/>';
                  $relative_image_save = $relative_image1 ;
                  $relative_image_save1 = explode('/', $relative_image_save);//explode / to get only image name
                  $end1 = end($relative_image_save1);
                  $relative_image3 = $end1;
                  //$handle1 = fopen( $relative_image3, 'w') or die('Cannot open file:  '. $relative_image);
                  $path12 = '/mnt/aviesta/development/webApps/migration/productapi/new/'.'sku-'.$neew->getsku().'_' .$i++.'.jpg';
                  copy($relative_image_save, $path12);
                  echo 'relative image with sku path_'.$j++.' ====>'.$path12.'<br/><br/>'; 
               }
           }
      $i++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:06:33.117

从您的代码中，我认为可以通过在第二个 foreach 循环之前初始化一个数组来解决该问题，并将图像存储在该数组中可以帮助您获取所有图像....这是我从您的问题中理解的。如果这是正确的..，那么下面的代码可能会起作用....

```
foreach()
{
    //Your code....
     $image_list = array();
     $i = 0;
     foreach()
      {
        // Your usual code 
       $image_list[$i] = your_image;
       //storing images one-by-one in your variable..
       $i++;
       }
} 
```

您可以稍后返回变量或只返回 print_r(); 得到输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:16:02.147

我想我有点**匆忙**地发布了这个问题，脚本工作**正常**，对于最初的产品，产品只有一个图像，但对于新产品，有多个图像并且脚本工作正常，**感谢****大家**的回应帖子……

# postgresql - 丢失更新会发生在 PostgreSQL 的读提交隔离级别吗？

> ID：14515543
> 
> 赞同：2
> 
> 时间：2013-01-25T04:53:01.157
> 
> 标签：postgresql, concurrency, worker-process

我在 PostgreSQL 中有如下查询：

```
UPDATE 
     queue 
SET 
  queue.status   = 'PROCESSING' 
WHERE 
    queue.status   = 'WAITING' AND
    queue.id       = (SELECT id FROM queue WHERE STATUS = 'WAITING' LIMIT 1 )
RETURNING 
        queue.id 
```

并且许多工作人员尝试一次处理一项工作（这就是为什么我有限制为 1 的子查询）。在此更新之后，每个工作人员都会获取有关 id 的信息并处理工作，但有时他们会获取相同的工作并处理两次或更多次。隔离级别为已提交读。

我的问题是如何保证一项工作将被处理一次？我知道那里有很多帖子，但我可以说我已经尝试了其中的大部分但没有帮助 () ；

*   我试过 SELECT FOR UPDATE，但它导致了*死锁*的情况。
*   我试过pg_try_advisory_xact_lock，但它导致*[共享内存不足](https://stackoverflow.com/questions/3132533/postgresql-out-of-shared-memory)*
*   我尝试添加`AND pg_try_advisory_xact_lock(queue.id)`到外部查询的 WHERE 子句，但是... [？]

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T06:19:00.193

在您描述的情况下不会发生丢失更新，但也不会正常工作。

在您上面给出的示例中会发生什么，假设（例如）10 个工作人员同时启动，所有 10 个工作人员都将执行子查询并获得*相同的 ID*。他们都将尝试锁定该 ID。其中一个会成功；其他人将阻止第一个锁。一旦第一个后端提交或回滚，其他 9 个后端将争夺锁。一会得到它，重新检查 WHERE 子句，发现`queue.status`测试不再匹配，然后*不修改任何行就返回*。其他 8 个也会发生同样的情况。因此，您使用 10 个查询来完成一个查询的工作。

如果您未能明确检查`UPDATE`结果并看到零行已更新，您可能会认为您丢失了更新，但事实并非如此。您的应用程序中只是由于对执行顺序和隔离规则的误解而导致了并发错误。真正发生的事情是，您正在有效地序列化您的后端，以便一次只有一个后端真正取得进展。

PostgreSQL 可以避免让它们都获得相同的队列项 ID 的唯一方法是对它们进行序列化，因此在查询 #1 完成之前它不会开始执行查询 #2。如果你愿意，你可以通过`LOCK`ing 队列表来做到这一点......但同样，你也可以只拥有一个工人。

你不能用咨询锁来解决这个问题，无论如何都不容易。使用非阻塞锁定尝试迭代队列直到获得第一个可锁定项目的黑客行为会起作用，但会很慢而且很笨拙。

您正在尝试使用 RDBMS 实现工作队列。这不会很好地工作。它会很慢，会很痛苦，而且既正确又快速将非常非常困难。不要自己滚。相反，使用完善的、经过良好测试的系统来进行可靠的任务排队。看看 RabbitMQ、ZeroMQ、Apache ActiveMQ、Celery 等。还有[来自 Skytools 的 PGQ](http://wiki.postgresql.org/wiki/PGQ_Tutorial)，一个基于 PostgreSQL 的解决方案。

有关的：

*   [在 PostgreSQL 中，对同一表中不同行的多个更新是否存在锁定冲突？](https://stackoverflow.com/questions/11761281/in-postgresql-do-multiple-updates-to-different-rows-in-the-same-table-having-a)
*   [多个线程会导致受约束集的重复更新吗？](https://stackoverflow.com/q/11914804/398670)
*   [为什么我们需要像 rabbitmq 这样的消息代理而不是像 postgres 这样的数据库？](https://stackoverflow.com/q/13005410/398670)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-16T08:28:50.160

[`SKIP LOCKED`](https://www.postgresql.org/docs/9.5/sql-select.html)可用于在 PostgreSql 中实现队列。[看](https://www.2ndquadrant.com/en/blog/what-is-select-skip-locked-for-in-postgresql-9-5/)

# php - PHP：检查辅助页面上的会话状态

> ID：14515544
> 
> 赞同：1
> 
> 时间：2013-01-25T04:53:03.460
> 
> 标签：php

我正在使用来自[http://tutorialzine.com/2009/10/cool-login-system-php-jquery/](http://tutorialzine.com/2009/10/cool-login-system-php-jquery/)的 PHP 登录系统只是为了给你一个快速的概述，我相信本教程在下面设置了变量方式：

```
<?php
define('INCLUDE_CHECK',true);
require 'connect.php';
require 'functions.php';
// Those two files can be included only if INCLUDE_CHECK is defined

session_name('tzLogin');
// Starting the session

session_set_cookie_params(1*7*24*60*60);
// Making the cookie live for 1 weeks

session_start();
if($_SESSION['id'] && !isset($_COOKIE['tzRemember']) && !$_SESSION['rememberMe'])

.......... 
```

到目前为止一切顺利，除了我无法将会话变量从主登录页面转移到后续页面（包含受限内容）。这是我打算放在每个受限内容页面开头的基本代码

```
<?php
session_name('tzLogin');
session_set_cookie_params(1*7*24*60*60);
session_start();
    if($_SESSION['id'])  <-- I believe I need more code here (incldue the cookie)
{
//If all is well, I want the script to proceed and display the HTML content below.
}
else 
{
header("Location: MainLogin.html");
or die;
//redirects user to the main login page.
}
?> 
```

正如你所看到的，我是一个完全的新手，但任何帮助将不胜感激。截至目前，即使我正确登录，我的受限内容页面也会不断被重定向到主页。因此我怀疑 SESSION 状态没有被延续。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:57:45.457

您可能应该确保在调用 session_set_cookie_params 时设置路径和域：

```
session_set_cookie_params ( 1*7*24*60*60, '/','.yourdomain.com') 
```

请参阅[http://php.net/manual/en/function.session-set-cookie-params.php](http://php.net/manual/en/function.session-set-cookie-params.php) （最好也设置 httpOnly 属性。）

此外，请确保您实际上为会话 id 键分配了一些值（在您的代码示例中并不清楚您所做的）：

```
$_SESSION['id'] = 'some value'; 
```

最后，您可能希望在调试时使用 session_status() 来验证您实际上是否正确启动了会话 (http://php.net/manual/en/function.session-status.php)。

# asp.net-mvc - 图书馆网站显示图片的解决方案

> ID：14515545
> 
> 赞同：0
> 
> 时间：2013-01-25T04:53:08.177
> 
> 标签：asp.net-mvc, thumbnails

在我的网站中，我有一个包含用户所有图像的库，我想在这个库中显示所有图像。我该怎么做？

![在此处输入图像描述](../Images/4b37dd30ee2da3b5198acf7bfa45aaa6.png)

我有解决方案，但我做不到。这是我的解决方案。我将为每个图像创建缩略图并将其显示在库中。缩略图的大小非常小，所以我不担心性能。如果我在我的服务器中创建缩略图。它必须下载、读取这些图像并调整其大小，然后返回到我的网站。这样我感觉不太好。我有很多图片，每个客户大约有数百张图片，每张图片的大小约为 1mb 或 2mb。我认为没有服务器可以处理它。另一种方法是通过 jQuery 在客户端创建缩略图，但我做不到，我的朋友和我交谈。jQuery 不处理它。我怎样才能为我的解决方案做到这一点？希望你明白我的意思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:00:26.547

您需要在服务器上生成缩略图并在图库中显示缩略图。当用户单击图库中的缩略图时，显示完整图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:56:59.757

如果您想在一个页面中返回数百万张图片，我认为您可以使用分页，例如每页 50 张图片以跟上您的网络性能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:05:44.600

我认为你的第一个想法更好。因为您不想以实际大小显示图像，并且想让它们更小。所以使用他们的缩略图是一个很好的解决方案。如果您认为这可能会增加一些复杂性，您可以在用户上传它们时为每张图像制作缩略图，并且在您的视图中只使用缩略图。

# java - Android上Assets文件夹中的InputStream返回空

> ID：14515550
> 
> 赞同：8
> 
> 时间：2013-01-25T04:53:39.487
> 
> 标签：java, android, io, inputstream, assets

我没有得到任何例外，但是当我跑步时......

```
InputStream deckFile = context.getAssets().open("cards.txt"); 
```

然后，deckFile.read() 返回 -1。该文件位于正确的文件夹中，并且不为空。

这应该是世界上最简单的事情了……

编辑：AssetManager 确实列出了“cards.txt”，所以这不应该是问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T05:26:05.707

试试下面的代码行

```
InputStream is = getAssets().open("test.txt");
int size = is.available();
byte[] buffer = new byte[size]; //declare the size of the byte array with size of the file
is.read(buffer); //read file
is.close(); //close file

// Store text file data in the string variable
    String str_data = new String(buffer); 
```

可用方法返回资产的总大小......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T04:56:42.817

将您的文本文件放在`/assets`Android 项目下的目录中。使用`AssetManager`类来访问它。

```
AssetManager am = context.getAssets();
InputStream is = am.open("test.txt"); 
```

或者您也可以将文件放在`/res/raw`目录中，该文件将被索引并且可以通过 R 文件中的 id 访问：

```
InputStream is = getResources().openRawResource(R.raw.test); 
```

**编辑：**

尝试以下方法来读取您的文件：

> ```
>  public String convertStreamToString(InputStream p_is) throws IOException {
>     /*
>      * To convert the InputStream to String we use the
>      * BufferedReader.readLine() method. We iterate until the BufferedReader
>      * return null which means there's no more data to read. Each line will
>      * appended to a StringBuilder and returned as String.
>      */
>     if (p_is != null) {
>         StringBuilder m_sb = new StringBuilder();
>         String m_line;
>         try {
>             BufferedReader m_reader = new BufferedReader(
>                     new InputStreamReader(p_is));
>             while ((m_line = m_reader.readLine()) != null) {
>                 m_sb.append(m_line).append("\n");
>             }
>         } finally {
>             p_is.close();
>         }
>         Log.e("TAG", m_sb.toString());
>         return m_sb.toString();
>     } else {
>         return "";
>     }
> } 
> ```

我相信它会帮助你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T17:59:58.613

问题是我的文件太大，并且因为它的“.txt”扩展名而被压缩。通过将文件重命名为通常压缩的格式“.mp3”，没有问题

# java - 当发送到 Java 中的构造函数时，“null”值有什么作用？

> ID：14515565
> 
> 赞同：12
> 
> 时间：2013-01-25T04:55:03.427
> 
> 标签：java, constructor, null

> **可能重复：**
> [传递 null 时选择了哪个构造函数？](https://stackoverflow.com/questions/4021733/which-constructor-is-chosen-when-passing-null)

我最近在几天前编码时遇到了这种好奇心，似乎无法弄清楚为什么会发生以下情况：

鉴于下面的课程

```
public class RandomObject{
    public RandomObject(Object o){
        System.out.println(1);
    }
    public RandomObject(String[] s){ 
        System.out.println(2);
    }
} 
```

进行调用时`new RandomObject(null);`，输出始终`2`与构造函数的创建顺序无关。为什么`null`指的是字符串数组而不是对象？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T05:00:55.970

这里的关键是 Object 是 String[] 的超类型

Java 使用最具体的可用方法来解决此类情况。Null 可以传递给这两种方法而不会出现编译错误，因此 Java 必须在这里找到最具体的方法。带有 String[] 的版本更具体 - 因此将选择执行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T04:59:17.073

[之前有人问过这个问题，看看这个帖子](http://www.coderanch.com/t/408091/java/java/null-type-data-type)

> 如果有两种情况可供选择，编译器将首先尝试选择更具体的情况。在这种情况下，String 将被选中而不是 Object。

在另一个问题中，它`String str`不是`String[] s`

因此，由于`String[]`它是一种比它的超类型更具体的数据类型`Object`，所以它被选中了。

# bioinformatics - 如何使用 cadnano 创建 3D DNA 折纸结构

> ID：14515573
> 
> 赞同：1
> 
> 时间：2013-01-25T04:55:23.403
> 
> 标签：bioinformatics

我正在学习 DNA 折纸，并遇到了用于创建 DNA 折纸结构 的[cadnano 。](http://cadnano.org)![在此处输入图像描述](../Images/c133c43ec01323b56c5a9f0b6ef732e1.png)

我能够画出一些简单的 DNA 折纸结构 [绿色三角形]，但在 cadnano 中制作复杂的 DNA 折纸结构 [红星] 时遇到了麻烦。你知道我如何使用cadnano创建这些结构[红星]，或者你知道比cadnano更好的软件（用户友好）来绘制复杂的3d结构吗

注：图片取自cadnano网站

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T04:12:29.650

您可以在 CadNano 的图库中以 zip 文件的形式找到底部示例（带有开槽的十字架）：http: [//cadnano.org/gallery](http://cadnano.org/gallery)

CadNano 似乎在显示 3D 形状方面做得不好，但您可以将源文件提交给 CanDo 进行分析，它会像在图库图像中一样显示。

# lucene - 在数据库中存储 lucene 索引时出现异常

> ID：14515575
> 
> 赞同：0
> 
> 时间：2013-01-25T04:55:27.487
> 
> 标签：lucene, compass-lucene

我正在使用 lucene 4.0.0 版和 compass 2.2.0 在 Mysql 中存储 lucene 索引。

我收到以下错误并坚持下去。

```
Exception in thread “main” java.lang.NoSuchMethodError: org.apache.lucene.store.IndexInput: method ()V not found 
```

而且你能告诉我哪个会表现更好。将索引存储在 FS 或 DB 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:50:11.853

Lucene 4.0 涉及 API 的重大更改，Compass 无疑不支持。Compass 的开发在两年多前就停止了。

正如 Compass 的创建者在[这篇博](http://www.kimchy.org/the_future_of_compass/)文中所解释的那样，该项目实际上已被[ElasticSearch](http://www.elasticsearch.org/)取代。您应该考虑改用 ElasticSearch。

就存储索引而言，将其存储在文件系统中。据我所知，Compass 的数据库存储功能还没有被引入 ElasticSearch。坦率地说，这似乎是一个奇怪的功能，我只能假设它会影响性能，尽管我还没有找到任何明确解决这个问题的资源。我建议不要尝试在数据库中存储索引，除非您有充分的理由确实需要这样做。

# c - 在 malloc 之后访问结构数组的内容

> ID：14515577
> 
> 赞同：0
> 
> 时间：2013-01-25T04:55:42.960
> 
> 标签：c, arrays, struct, char, malloc

我正在尝试将每个单词的单词和数量存储在一个数组中`struct word`

```
struct word{
    char str[MAX_WORD_LENGTH];
    int num;
}

inputFile = fopen("wordstat.txt", mode);
if(inputFile == NULL){
    printf("Cannot open file\n");
    return 1;
}

//scan through file to count number of possible words
while(fscanf(inputFile, "%s", scan)){
    wordCount++;
}

rewind(inputFile);

struct word *words = malloc(wordCount * (sizeof *words)); 
```

如何访问字符串并将其存储到成员变量 str 中？在我做malloc之前是否需要初始化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:04:43.627

```
struct word *words = malloc(wordCount * (sizeof *words)); 
```

有效地创建一个一维`word`结构数组，您可以使用数组表示法访问它：`words[i].str`或指针表示法`(words + i)->str`以访问条目“i”。

要存储一串字符（例如从您的`scanf`调用中返回），请将它们复制到您的一个`word`结构中

```
fscanf( inputFile, "%s", scan );
strncpy( words[i].str, scan, MAX_WORD_LENGTH ); 
```

`struct word`当您执行 malloc 时，会分配每个字符串的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:00:48.620

您可以`words`作为指针或数组访问：

```
words[0] 
```

是第一个结构。

```
words[0].str 
```

是第一个字。并遍历所有单词：

```
for (int iWord = 0; iWord < wordCount; ++iWord)
{
    // words[iWord] is the current word
    printf("%s", words[iWord].str);
} 
```

如果您更喜欢指针（在这种情况下我不喜欢），那么：

```
(words+5)->str 
```

这是第 6 个单词吗（记住我们从 0 开始编号）。但是你可能会使用这样的指针：

```
for (struct word *pWord = words; pWord < words+wordCount; ++pWord)
{
    // pWord is the current word
    printf("%s", pWord->str);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:02:54.617

首先，最后一行应该是

```
struct word *words = malloc(wordCount * sizeof(word)); 
```

您需要单词结构的大小，而不是您在这一行声明的变量...

除此之外，您需要做的是将每个结构初始化`words`为一些合理的默认值，如下所示：

```
words[0].num = 0; // or any values you please, really
words[0].str[0] = '\0'; 
```

# wpf - wpf 字符串格式 d

> ID：14515578
> 
> 赞同：4
> 
> 时间：2013-01-25T04:55:49.800
> 
> 标签：wpf, string-formatting

为什么显示日期和时间（而不仅仅是日期）？

```
<ListView Name="AttachmentsLB" Width="160" ItemsSource="{Binding Path=PicuAttachments}" >
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Start" DisplayMemberBinding="{Binding StartDate}" Width="80">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=., StringFormat=d}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header="Finish" DisplayMemberBinding="{Binding FinishDate}" Width="80">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=., StringFormat=d}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

我也试过 StringFormat = {}{0:d} 和 StringFormat = \{0:d\} 没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:01:07.503

StringFormat 在错误 Binding 上的问题

```
<GridViewColumn Header="Start" DisplayMemberBinding="{Binding StartDate, StringFormat=d}" Width="75">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}" />
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:25:45.313

用这个怎么样？更改绑定中的 StringFormat ：

```
DisplayMemberBinding="{Binding Path=startDate, StringFormat='yyyy-MM-dd'}" 
```

# iphone - UIWebView 的 ODRefreshController

> ID：14515588
> 
> 赞同：0
> 
> 时间：2013-01-25T04:56:31.220
> 
> 标签：iphone, ios, objective-c, uiwebview, uiscrollview

在我的 iPhone 应用程序中，我使用 Web 视图来显示用户提要。为了刷新，我在用户从顶部向上滚动时发送服务器请求。我想为此使用一些很酷的提神剂。

我试过`ODRefresh`控制器（Git- [here](https://github.com/Sephiroth87/ODRefreshControl)），但它只适用于滚动视图和表格视图，而不适用于`UIWebVIew`（和应用程序崩溃）。我已经`UIScrollView`使用方法实现了对 webview 的委托`addScrollViewListener`，但我仍然没有运气。

我的代码如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    ODRefreshControl *refreshControl = [[ODRefreshControl alloc] initInScrollView:self.myWebView];
    [refreshControl addTarget:self action:@selector(dropViewDidBeginRefreshing:) forControlEvents:UIControlEventValueChanged];
}

- (void)dropViewDidBeginRefreshing:(ODRefreshControl *)refreshControl
{
    double delayInSeconds = 3.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [refreshControl endRefreshing];
    });
}

- (void) addScrollViewListener
{
    UIScrollView* currentScrollView;
    for (UIView* subView in myWebView.subviews) {
        if ([subView isKindOfClass:[UIScrollView class]]) {
            currentScrollView = (UIScrollView*)subView;
            currentScrollView.delegate = self;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:06:54.087

```
ODRefreshControl *refreshControl = [[ODRefreshControl alloc] initInScrollView:[[self.myWebView subviews] objectAtIndex:0]]; 
```

或者

```
ODRefreshControl *refreshControl = [[ODRefreshControl alloc] initInScrollView:[[self.myWebView subviews]lastObject]]; 
```

# bash - 写别名

> ID：14515593
> 
> 赞同：1
> 
> 时间：2013-01-25T04:56:53.957
> 
> 标签：bash

我想编写一个别名来执行以下操作：

*   用户（所有者）的权限不变。
*   所有组和世界（其他）权限都已设置，因此它们不允许对文件进行任何访问 - 读取、写入或执行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T05:02:26.830

```
private () {
  chmod go-rwx "$@"
} 
```

我相信这正是你想要的。它使用 Posix 语法定义了一个 shell 函数，该函数适用于每个 Posix shell，而不仅仅是 bash。它适用于任意数量的文件。

它仅从组和其他人中删除 rwx 权限位，使用户权限与以前一样。

# windows - 32 位 OpenCL SDK 和 64 位操作系统错误

> ID：14515597
> 
> 赞同：0
> 
> 时间：2013-01-25T04:57:03.937
> 
> 标签：windows, windows-8, 64-bit, opencl, 32-bit

好吧，我有一个 64 位 Windows 8，通常 64 位操作系统也支持 32 位软件，根据微软文档，比如模拟器 WOW64 让它完成。但是当我尝试在我的 64 位操作系统上安装时，我下载了 OpenCL 32 位后，它说“设置将退出”正因为如此！

为什么是先生？无论如何都要运行它吗？

[它与编程有关，因为 OpenCL 与编程有关。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:21:09.090

你可以参考[这里](https://superuser.com/questions/459193/trick-a-32-bit-application-into-running-on-64-bit-system)，超级用户社区已经提供了详细的答案，它工作正常。你[在这里参考了安装指南](http://software.intel.com/en-us/articles/intel-sdk-for-opencl-applications-installation-guide)

希望它有所帮助

# php - 如何使用 Curl 设置浏览器 Cookie

> ID：14515606
> 
> 赞同：2
> 
> 时间：2013-01-25T04:58:02.307
> 
> 标签：php

我有一个 curl 功能，如下所示。要加载此功能，我使用此功能`<img src="http://site.com/pxl.php?i=1.jpg" height="1" width="1" />`，但是当我这样做时，cookie 不会添加到我的浏览器中。有没有办法让curl在url上运行时我从url收集cookie并将其设置为使用访问的浏览器`<img src="http://site.com/pxl.php?i=1.jpg" height="1" width="1" />`

```
function get_content($url,$ref)
{
$browser = $_SERVER['HTTP_USER_AGENT'];
$ch = curl_init();

$header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
$header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
$header[] = "Cache-Control: max-age=0";
$header[] = "Connection: keep-alive";
$header[] = "Keep-Alive: 300";
$header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
$header[] = "Accept-Language: en-us,en;q=0.5";
$header[] = "Pragma: "; // browsers keep this blank.

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERAGENT, $browser);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, $ref);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, false);
$html = curl_exec($ch);
curl_close ($ch);
return $html;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T05:00:48.393

要使用 cURL 将 cookie 发送到页面，请使用以下`CURLOPT_COOKIE`选项：

```
curl_setopt($ch, CURLOPT_COOKIE, 'user=alice; activity=knitting'); 
```

要为脚本设置 cookie，请使用[setcookie()](http://php.net/manual/en/function.setcookie.php)：

```
setcookie("TestCookie", $value, time()+3600); 
```

# jquery - 文档准备好 html 加载后页面内容未显示

> ID：14515607
> 
> 赞同：0
> 
> 时间：2013-01-25T04:58:13.840
> 
> 标签：jquery, ajax

我正在尝试在页面加载后加载广告，因为我正在使用 jquery html() 方法。问题是`$(document).ready(function(){`重定向我的页面并且只显示广告而不是数据。

我想在同一页面中显示广告和数据，并且应该在页面加载后加载广告。

这是我的代码链接[http://jsfiddle.net/2MTHE/1/](http://jsfiddle.net/2MTHE/1/)

出于检查目的，我`hello how are you`在`.html()`开始时添加了它也没有显示在页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:31:08.420

穆萨是对的。使用 document.write 将覆盖页面中的所有内容。尝试删除 document.write ，一切都会像魅力一样工作。

或者在加载html文件的内容之前先做document.write..

为了您加载 html 内容，您也可以使用输出内容`document.write`..

```
document.write('<div><a target=\"_top\" href=\"http://www.adbrite.com/mb/commerce/purchase_form.php?opid=2233784&afsid=1\" style=\"font-weight:bold;font-family:Arial;font-size:13px;\">Your Ad Here</a></div>'); 
```

在这个论坛中有一个**解决您的问题的方法。**这是线程：

[在页面加载时在 div 内做广告](https://stackoverflow.com/a/8460505/1999395)

[在加载时使用两个 div 做广告](https://stackoverflow.com/a/2957086/1999395)

# assembly - CPUID 值错误？

> ID：14515608
> 
> 赞同：3
> 
> 时间：2013-01-25T04:58:29.740
> 
> 标签：assembly, x86, cpuid

我的 CPU 是 Intel Core2Quad Q9300 2.5GHz。CPU-Z 为我提供 Family: 6, Model:7 和 Stepping:7 的值。尝试使用 EAX=1 的 cpuid 指令编写 x86 程序集，我得到的只是 AL 中的 0000 0010 值（我想它应该是 0111 0111）。

有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:21:21.240

可悲的是（由于大量吸吮）英特尔的“家族”数量从 5（奔腾）到 6（奔腾 Pro、奔腾 II、奔腾 II）到 15（奔腾 4），然后又回到 6（奔腾 M） 、Atom、Core、Core2、Nehalem、Sandy Bridge 等）。

这主要意味着（就其本身而言）“family”字段对于确定 CPU 的系列是无用的。相反，如果“family = 6”，您必须使用型号来确定系列（并且型号不是正常顺序或任何东西 - 例如型号 8、10 和 11 是 Pentium III，并且在中间9 型是奔腾 M）。

另请注意，型号最初是 4 位（EAX 中的第 4 到 7 位），这不足以处理英特尔的“一切都是第 6 家族”的愚蠢，因此他们稍后将型号扩展了另外 4 位（第 16 位到EAX 中的 19 个）。这意味着要获得完整的型号，您需要进行一些旋转/移位（例如`model = ( (EAX >> 4) & 0x0F) | ( (EAX >> 12) & 0xF0);`）。

例如，对于型号 23，EAX 中的值将是 0x???1??7?，而较旧的软件（在引入“型号扩展”之前设计）会错误地认为 CPU 是“型号 7”当它不是。

我会假设您也做了同样的事情（忘记在您的型号中包含“扩展型号”）；并且您实际 CPU 的详细信息是“family = 6, model = 23”。这将使其成为 Core 2 (Penryn)。

# javascript - 使用查找中的 Mongoose 字段

> ID：14515617
> 
> 赞同：0
> 
> 时间：2013-01-25T04:59:27.553
> 
> 标签：javascript, node.js, mongodb, object, mongoose

所以我四处寻找试图弄清楚这一点，我想我只是错过了一些简单的东西......但我无法完全弄清楚。

使用 Mongoose，我正在查找特定文档，当找到该文档时，我想查看字段 senderDel 是否设置为 true，然后我将进行删除。如果它设置为 false，我会进行更新。

代码：

```
PMessage.delete = function(msgId, callback)
{
    Message.find({_id: msgId}, function(e, res){
        if (res){
            console.log(res);
            if (res.senderDel == true){
                console.log("sender deleted...call message remove");
                Message.remove({_id: msgId}, callback);
            } else {
                console.log("res.senderDel is not true");
                Message.findByIdAndUpdate(msgId, {$set: {receiverDel: true}}, callback);
            }
        } else {
            console.log("error: " + e); 
            callback; 
        }
    });
}; 
```

console.log(res) 返回：

```
[ { sender: 50ea4e8198c6770e1e000004,
senderName: 'tester',
receiver: 50ac4ac5bca9f1794b000007,
receiverName: 'admin',
subject: 'a',
body: 'a',
_id: 5101a35a7889727e35000006,
__v: 0,
receiverDel: false,
senderDel: true,
read: false,
sentOn: '01/24/2013 21:10:50' } ] 
```

我会认为我可以用 res.senderDel 引用 senderDel 字段？为什么 res.senderDel 出现未定义，我该如何修改它以使其工作？任何帮助是极大的赞赏！

编辑：添加我的架构：

```
var messageSchema = new Schema({
    sender: {type: ObjectId, ref: 'User'},
    senderName: String,
    receiver: {type: ObjectId, ref: 'User'},
    receiverName: String,
    subject: String,
    body: String,
    sentOn: {type: String, default: moment().format()},
    read: {type: Boolean, default: false},
    senderDel: {type: Boolean, default: false},
    receiverDel: {type: Boolean, default: false}
});

module.exports = mongoose.model('Message', messageSchema); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:23:35.063

`model.find`函数返回一个文档数组，而不是单个文档。如果要查找单个文档，请使用`model.findOne`or `model.findById`：

```
PMessage.delete = function(msgId, callback)
{
    Message.findById(msgId, function(e, res){
        if (res){
            console.log(res);
            if (res.senderDel == true){
                console.log("sender deleted...call message remove");
                Message.remove({_id: msgId}, callback);
            } else {
                console.log("res.senderDel is not true");
                Message.findByIdAndUpdate(msgId, {$set: {receiverDel: true}}, callback);
            }
        } else {
            console.log("error: " + e); 
            callback; 
        }
    });
}; 
```

# java - Java Applet中某个像素位置的颜色？

> ID：14515619
> 
> 赞同：0
> 
> 时间：2013-01-25T04:59:42.100
> 
> 标签：java, colors, applet, pixel

我目前正在使用 Java Applets 制作类似绘画的程序。我想通过使用递归和检查给定点周围的每个像素来模拟存储桶工具，但是我无法获取给定像素的 RGB 值。

有没有办法做一些事情，比如

```
public void paint(Graphics g) {
    g.getPixelAt(X, Y);
} 
```

或者其他的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:03:58.190

`Graphics`是虚拟概念，不支持您尝试做的事情

您需要做的是在可以与之交互的表面上进行绘制，例如`BufferedImage`.

基本思想是将所有效果绘制到此缓冲图像上，并`Graphihcs#drawImage`用于将图像实际渲染到屏幕上。

从那里您可以使用我们`BufferedImage#getRaster`，它将为您提供`WritableRaster`具有方法的对象`get/setPixel`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:07:25.703

您可以使用 Applet.getLocationOnScreen() 和 java.awt.Robot.createScreenCapture() 来查找和捕获您想要的小程序部分。

[这个问题](https://stackoverflow.com/questions/13254070/how-do-i-get-the-viewport-position-relative-to-the-screen/13281095#13281095)提出了类似的问题。

# c++ - 在 C++ 中调用私有函数

> ID：14515621
> 
> 赞同：0
> 
> 时间：2013-01-25T04:59:50.283
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中调用私有方法](https://stackoverflow.com/questions/6873138/calling-private-method-in-c)

我有一个 DLL，在那个 DLL 中他们公开了一些函数，但其​​中一个是私有的。功能是`C_MORPHO_Device::InitUsbDevicesNameEnum(PUL o_pul_NbUsbDevice)`。

如何`InitUsbDevicesNameEnum`在我的应用程序中调用此函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:10:09.783

**干脆不要那样做。**库作者已将该函数设为私有，因此您不应调用它。阅读文档以了解您打算调用哪些函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:17:49.633

*私有方法应该对其*他人私有。如果将 at 作为私有方法，为什么需要调用私有方法？出于某种原因，他们这样做了。

您可以检查调用此方法中的任何其他`public`或功能。但这不是访问私有方法的好方法`friend``InitUsbDevicesNameEnum`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:12:21.263

没有直接的方法来实例化类并调用其私有方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:13:59.687

私有方法是否也导出？我对此表示怀疑（他们为什么要导出私有方法？）。但如果是导出的，可以使用**dumpbin /exports**命令查看修饰的方法名称，然后使用 GetProcAddress 获取指向该方法的函数指针并调用该类的实例。就像是：

```
HMODULE hModule = LoadLibrary(L"thedll.dll");
(C_MORPHO_Device::*pMethod)(PUL) = reinterpret_cast<(C_MORPHO_Device::*)(PUL)>(GetProcAddress(hModule, L"InitUsbDevicesNameEnum@_ABunchOfSymbolsHere"));

C_MORPHO_Device device;
(device.*pMethod)(...); 
```

# jquery - 如何使用jquery将内容添加到第一个空的div或在不为空的情况下插入？

> ID：14515624
> 
> 赞同：0
> 
> 时间：2013-01-25T04:59:56.027
> 
> 标签：jquery

我有以下内容...

```
 <div class="sectionA"></div>
              <div class="sectionA"></div>
              <div class="sectionA"></div>
              <div class="sectionA"></div> 
```

首先，我需要将内容附加到第一个空 div.... 所以我尝试了这个：

```
 if(".sectionA").is(":empty"))
              {
                   alert("empty div")
                   $(this).append(value);
              }else // if no available empty divs then insert after last div
              {
                   $(".sectionA:last").after("<div>"+value+"</div>");
              } 
```

这个逻辑不起作用，警报（“空 div”）测试永远不会被触发，我知道有空 div 已通过 Firebug 验证。知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:00:38.510

你有一个语法错误：

```
if ( $(".sectionA").is(":empty") )
// ^ ^ You're missing the parentheses & dollar sign. 
```

* * *

但是，您的逻辑是有缺陷的。改用这个：

```
var $sections = $(".sectionA");
var $empty = $sections.filter(':empty');

if ( $empty.length ) {
    $empty.first().append(value);
} else {
    $sections.last().after('<div>' + value + '</div>');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:21:49.647

如果您需要将内容附加到第一个空 div。你错过了`$`登录`if`条件

```
$(document).ready(function(){
  if($(".sectionA:first").is(":empty"))
  {
       alert("empty div")
       $(this).append(value);
  }else // if no available empty divs then insert after last div
  {
       $(".sectionA:last").after("<div>"+value+"</div>");
  } 
}); 
```

所以在那之后你会得到`alert("empty div")`测试触发器。之后，您可以执行逻辑来附加值。

# java - 罐子不匹配！修复 FacebookSDK 的依赖项

> ID：14515626
> 
> 赞同：34
> 
> 时间：2013-01-25T04:59:59.877
> 
> 标签：java, android, facebook, jar

我想用 facebook 登录。我正在遵循这个[步骤](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)。这一切都很好。但是当我将`Create a new Android Project with Facebook Login`步骤 6 转到上面的链接时，我得到了`Jar mismatch`.

当我创建新的android应用程序时没有任何错误，但是当添加**`FacebookSDK`**到新创建的项目时。那个时候它给了

```
Jar mismatch! Fix your dependencies  |   Unknown Android Dependency Problem 
```

我尝试了一切来改变java编译器级别，但没有得到。

我尝试了项目属性> Java 编译器> 在这个级别中，我对Java 版本进行了所有更改，但没有成功。

请问有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-25T05:17:32.173

尝试`android-support-v4.jar`从项目的**libs**文件夹中删除该文件。

祝你好运。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-25T05:10:28.553

如果**Library**和您的**Project的****libs**文件夹中有任何同名的**JAR**文件，它们必须具有相同的大小（相同的 jar 文件）。

 ******如果现在只需将其中一个替换为另一个

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T05:14:24.887

Android FacebookSDK 包含自己`android-support-v4.jar`的`jar`.

打开项目首选项，从根目录中选择`Java Build Path`并删除，然后应该可以再次编译好。`android-support-v4.jar`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-21T05:07:16.247

我认为存在比删除正在使用的 android-support jar 更好的解决方案来解决这个问题。它可能会导致您的项目出现其他一些错误。我通过删除 fb sdk 的支持 jar 解决了这个问题，然后将其支持库更新到我们项目中的版本，然后将库项目添加到您的项目中，它将编译没有任何错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-21T06:03:12.793

发生这种情况是因为`FacebookSDK`它自带了自己的版本，`android-support-v4.jar.`您可以按照以下步骤解决此问题：

1.  `android-support-v4.jar`从你自己的 android 项目中删除
2.  删除`android-support-v4.jar`自`appcompat_v7`
3.  `android-support-v4.jar`从您的`FacebookSDK`项目中复制
4.  将此复制的 jar 粘贴到您删除其他 jar 的位置

这比从两个项目中彻底删除 jar 的风险要小。这不仅可以解决 SHA-1 哈希问题。它还有助于解决在项目中添加后`res`可能会弹出的错误。`appcompat_v7``FacebookSDK`******

# javascript - NPAPI：如何在 javascript 中读取 NPP_New 的返回 NPError 值

> ID：14515638
> 
> 赞同：0
> 
> 时间：2013-01-25T05:01:06.840
> 
> 标签：javascript, npapi

我们正在为 Mac 中的 Safari 开发一个 Netscape 插件 我有一个场景，其中在 NPP_New 函数中完成的初始化失败并且我返回 NPERR_GENERIC_ERROR。我如何在 Javascript 中读取此错误代码。

在这方面的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:41:35.510

C NPAPI 调用的错误代码在 JS 中不可用。但是，如果您已经知道错误代码是什么，那么您真的不需要阅读它——只需尝试在 try 块中访问插件的一些可编写脚本的属性，如果失败，您就知道您的插件没有负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:32:45.840

如果您需要确定这种特定的故障情况，我可以考虑以下选项：

*   成功 NPP_New，但相应地设置插件内部状态（以便脚本稍后可以询问插件）
*   将有问题的初始化移出 NPP_New 并通过可编写脚本的函数调用它（... `ret = plugin.initStuff()`）
*   如果您绝对必须在 NPP_New 中失败（例如，因为 OS X 上没有支持的绘图模型），您可以调用页面，通知脚本有关条件

# javascript - 用于 Jquery 开发的 IDE

> ID：14515639
> 
> 赞同：0
> 
> 时间：2013-01-25T05:01:15.850
> 
> 标签：javascript, jquery, jquery-ui, ide, jquery-widgets

你对 JQuery 开发 IDE 有什么建议。有没有类似于 Eclipse for java 的东西，所以我可以在其中运行/调试我的应用程序？

我做了很多基于 JQuery Widget 和 JQuery UI 的工作。

我正在开发 Fedora。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:04:07.717

我正在使用netbeans。它有一个相当不错的 JS 编辑器，有时可以很好地与 jQuery 配合使用，但没有集成所有功能，并且无法正确建议参数 - 但我不知道任何 IDE 可以做到这一点

在现代浏览器（如 chrome）中编辑使用调试器工具；）

# java - 如何使用 BigDecimal 显示始终有 2 个小数点的数字？

> ID：14515640
> 
> 赞同：40
> 
> 时间：2013-01-25T05:01:19.277
> 
> 标签：java, precision, bigdecimal, decimal-point

我正在使用*BigDecimal*来获取一些价格值。要求是这样的，无论我们从数据库中获取什么值，显示的值都应该有 2 个小数点。

例如：

> 提取值为 1 - 应显示为 1.00
> 提取值为 1.7823 - 应显示为 1.78

我正在使用`setScale(2, BigDecimal.ROUND_HALF_UP)`但仍有一些地方，如果来自 DB 的数据是整数，则显示相同的数据！

我的意思是如果数据库中的值为 0，则它仅显示为 0。我希望它显示为 0.00

谢谢

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-25T05:11:30.557

BigDecimal 是不可变的，包括 setScale(2, BigDecimal.ROUND_HALF_UP) 在内的任何操作都会产生一个新的 BigDecimal。正确的代码应该是

```
BigDecimal bd = new BigDecimal(1);
bd.setScale(2, BigDecimal.ROUND_HALF_UP); // this does change bd
bd = bd.setScale(2, BigDecimal.ROUND_HALF_UP);
System.out.println(bd); 
```

输出

```
1.00 
```

注意 - 由于 Java 9`BigDecimal.ROUND_HALF_UP`已被弃用，您现在应该使用`RoundingMode.ROUND_HALF_UP`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-25T05:20:24.543

您可以使用向上取整格式

```
BigDecimal bd = new BigDecimal(2.22222);
System.out.println(bd.setScale(2,BigDecimal.ROUND_UP)); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-25T05:25:04.613

要在 JAVA 中格式化数字，您可以使用：

```
 System.out.printf("%1$.2f", d); 
```

其中 d 是您的变量或数字

或者

```
 DecimalFormat f = new DecimalFormat("##.00");  // this will helps you to always keeps in two decimal places
 System.out.println(f.format(d)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T05:05:35.897

您需要使用`NumberFormat`适当的语言环境来[格式化](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)

```
NumberFormat.getCurrencyInstance().format(bigDecimal); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-21T04:05:16.083

BigDecimal.setScale 会工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-27T12:22:42.900

下面的代码可能会有所帮助。

```
protected String getLocalizedBigDecimalValue(BigDecimal input, Locale locale) {
    final NumberFormat numberFormat = NumberFormat.getNumberInstance(locale);
    numberFormat.setGroupingUsed(true);
    numberFormat.setMaximumFractionDigits(2);
    numberFormat.setMinimumFractionDigits(2);
    return numberFormat.format(input);
} 
```

# powershell - 使用 TFS 和 Powershell 进行 CI 和部署

> ID：14515641
> 
> 赞同：1
> 
> 时间：2013-01-25T05:01:32.997
> 
> 标签：powershell, configuration-files, tfsbuild, continuous-deployment

我正在开发一个具有自动部署的 CI 流程。TFS Build 正在构建解决方案，然后它使用 InvokeProcess 任务启动 Powershell 脚本。Powershell 脚本使用 sqlpackage 将数据库更改部署为 dacpac，使用 Web 服务报告服务报告，将字体发送到 SSRS 服务器，并将网站本身部署到 1 个或多个 Web 服务器 - 整个过程使用部署配置文件来定义放置路径，服务器ips，安装文件夹等。每个环境都会有一个。

我希望能够构建解决方案并部署到内部服务器以运行自动化测试作为自动化构建的一部分。完成测试并手动检查构建后，我希望能够启动另一个构建定义，该定义仅具有标准构建模板的部署部分，它将仅采用构建号或构建放置位置, 并将相同的构建部署到不同的环境（即 staging、prod 等）

我遇到的问题是我目前正在使用配置文件转换管理我的大部分 Web/应用程序配置 - 即我有 Debug、Test、Prod 等的构建定义，然后是 Web.Debug.config、Web.Test.config 等.我只想执行一个构建，然后将相同的构建部署到不同的环境，但是目前构建只会为一个环境生成配置文件 - 即无论构建配置是什么。

最好的方法是生成所有配置文件（或者实际上为每个环境预先创建完整的配置文件），然后为特定部署选择合适的配置文件？或者我应该将 env 特定配置存储在我的部署配置文件中，并在部署时使用 powershell 更新适当的密钥？

这里的正常/推荐方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:46:27.473

我建议为每个目标环境创建新的配置（例如，默认情况下你有调试/发布，创建更多）。然后使用内置的 web.config 转换，对于非 web 项目使用[Slow Cheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)

这将为您指定要构建的每个配置（在您的构建定义中）吐出预配置的构建输出。

# windows-phone-8 - 从 Wp8 应用程序调用第三方应用程序

> ID：14515644
> 
> 赞同：-1
> 
> 时间：2013-01-25T05:01:38.430
> 
> 标签：windows-phone-8

我曾尝试从我的应用程序启动 Hotmail 应用程序，但无法这样做。无论如何在我的 WP8 应用程序中调用/列出第三方应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:17:08.997

您可以使用[LaunchUriAsync](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh701480.aspx)`mailto:`使用格式 URI启动电子邮件应用程序（我假设这就是您所说的 Hotmail 应用程序） 。请参阅[MSDN 以获取参考以及可用于其他内置应用程序的其他 URI/文件类型的列表](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662937%28v=vs.105%29.aspx)。

您不能列出第 3 方应用程序，只能列出您自己在应用商店中发布的其他应用程序。

# groovy - 葡萄或正常进口

> ID：14515645
> 
> 赞同：1
> 
> 时间：2013-01-25T05:01:56.427
> 
> 标签：groovy, import, grape, gpars

有什么不同吗，如何将 GPars 集成到我的项目中？
我可以做吗

```
@Grab(group='org.codehaus.gpars', module='gpars', version='1.0.0') 
```

或者只是（假设我的构建路径中有所有必需的 jar）

```
import groovyx.gpars.* 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:27:51.853

这取决于您如何组织项目以及您的构建系统是什么。

如果它是一个普通的 Groovy 脚本，那么**一起**`@Grab`使用注释和`import`语句将为您工作。 只是告诉系统管理依赖关系，你仍然需要语句。**`@Grab``import`**

 **但如果是更大的项目，使用[Gradle](http://gradle.org)是更好的方法。**

# java - 检查单词搜索游戏的网格

> ID：14515646
> 
> 赞同：1
> 
> 时间：2013-01-25T05:01:55.910
> 
> 标签：java, search, word, wordsearch

我做了这个boggle类型的游戏，到目前为止效果很好。这里的方法是搜索 10x10 的网格来查看用户输入的单词是否正确。我遇到的问题是此代码仅适用于从左到右和从上到下出现的单词。现在我不指望做对角线，但我想让它以相反的顺序出现的单词也被系统接受。有人告诉我，您输入的单词必须翻转（反转）才能查看它是否正确匹配（这是有道理的。毕竟，您正在寻找一个反词）。那么我将如何实现这一目标？现在，我不太擅长编码，所以，如果你有时间，请写下我必须使用的代码。谢谢你。

```
public static boolean wordSearch (char[][] table, String search)
       {
           int  ctr = search.length();
           String temp = ""; 

           // LEFT TO RIGHT / X-AXIS
           for (int row = 0; row < 10; row++) //Checks each row (x) one by one
           {
                   for (int a = 0; a <= (10 - ctr); a++)
                   {
                    StringBuilder s = new StringBuilder(10-ctr);//Does... something
                        for (int x = a; x <= (a+ctr-1); x++) //Checks every possibility in the row
                         {
                            s.append(table[row][x]);
                            temp = s.toString();
                            if (temp.equals(search))
                            {
                                return true;
                            }
                         }
                   }
           }
           // TOP TO BOTTOM / Y-AXIS
           for (int column = 0; column < 10; column++)
           {
                   for (int b = 0; b <= (10 - ctr); b++)
                   {
                    StringBuilder v = new StringBuilder(10-ctr);
                        for (int y = b; y <= (b+ctr-1); y++)//checks every possibility in grid
                         {
                            v.append(table[y][column]);
                            temp = v.toString();
                            if (temp.equals(search))
                            {
                                return true;
                            }
                         }
                   }
           }
            return false;//if word isn't in grid it returns as false, which then displays an error message
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:13:45.257

编辑 ... Java 版本！！！（我现在手头没有 Java 编译器，但我认为这是对的……）

在代码的第二行，我们计算反向字符串；有数千种方法可以做到这一点，但这个方法很容易解释（我假设你的字符串中没有空格......）：

```
int ls = search.length();  // length of initial string
StringBuilder sb = new StringBuilder(); // temporary place to store growing string
for(int ii=ls-1;ii>=0; ii--) {
        sb.append(search.charAt(ii)); // build the string one character at a time
    }
hcraes = sb.toString(); // convert to "regular" string 
```

现在，在你有线的每一点

```
if (temp.equals(search)) 
```

将该行更改为

```
if (temp.equals(search) || temp.equals(hcraes)) 
```

这应该够了吧。

# tfs - Team Foundation Server SDK 2012：获取凭据提示

> ID：14515651
> 
> 赞同：1
> 
> 时间：2013-01-25T05:02:36.730
> 
> 标签：tfs, tfs-sdk, credential-providers

我正在开发一个需要与 Team Foundation Server 交互的应用程序，主要是检索一些工作项。为此，我使用了随 Visual Studio Team Explorer 2012 提供的 TeamFoundation 客户端程序集 v11。我希望我的应用程序显示网络提示，以便用户可以提供凭据。我读[了这个](https://stackoverflow.com/questions/6196608/tfs-sdk-getting-the-network-credential-prompt)和[这个](http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/64b32520-442f-4fc6-9edc-f4fa0c326008)，他们在其中提出了以下建议：

```
var projectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(uri, new UICredentialsProvider())
projectCollection.EnsureAuthenticated(); 
```

但是，提到的“GetTeamProjectCollection”方法在 TFS SDK 2012 中已弃用。我想知道如何在 TFS SDK 2012 中显示凭据提示？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T22:02:47.360

如果您希望用户选择凭据，那么您最好使用内置的 UI 工具：

```
using (TeamProjectPicker tpp = new TeamProjectPicker(TeamProjectPickerMode.NoProject, false))
{
    DialogResult result = tpp.ShowDialog();
    if (result == DialogResult.OK)
    {
        return tpp.SelectedTeamProjectCollection;
    }
    return null;
} 
```

如果您想手动执行此操作，您可以使用传递凭据的功能，或者实际上在 TFS 中模拟凭据并创建您自己的 UI 来请求凭据。

还有其他几个选项：

*   [CredUIPromptForCredentials 函数 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375177%28v=vs.85%29.aspx)
*   [在 Windows 身份验证应用程序中从当前用户获取网络凭据](https://stackoverflow.com/questions/11414266/obtain-network-credentials-from-current-user-in-windows-authentication-applicati)

# google-docs-api - 从表单生成的 Google 电子表格中查询数据

> ID：14515659
> 
> 赞同：1
> 
> 时间：2013-01-25T05:03:23.797
> 
> 标签：google-docs-api, google-spreadsheet-api

目前，我们正在请求将 Google 表单功能集成到我们的系统中。我在网上进行了一些搜索，发现除非我们使用 3rd 方工具进行大量定制，否则我们无法更改 Google 表单的后处理。

因此，我有一个想法，当有人填写 Google 表单时，他/她将需要在表单中填写“用户 ID”。这将作为表单生成的 Google 电子表格中的一个字段收集。

在我的后端应用程序中，我会查询电子表格并查找用户输入的用户 ID 字段。然后我就能知道他/她是否填写了表格。

我正在尝试查看电子表格的 Google Docs API，发现有基于列表的提要和基于单元格的提要，但我不确定哪一个可以实现我想要做的。任何有这方面经验的人都可以解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:38:58.697

将基于列表的提要想象成类似于 SQL。您可以读取行、插入行（在底部）、删除行和更新行。- 您只能存储数据，不能存储公式。相比之下，基于 CELL 的提要允许您使用单元格引用（R1C1 样式）读取和写入单元格，任何单元格。CELL FEED 为您提供更多控制，包括批量更新。

一些示例 CELL FEED 代码在这里： [http ://code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/spreadsheet/cell/CellDemo.java?r=51](http://code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/spreadsheet/cell/CellDemo.java?r=51)

另一种选择是也使用谷歌应用程序脚本，如果您只想提取数据，这可能会减少工作量。html 服务可能是[https://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)工作的工具- 因为您不需要 OAuth 来进行读取。

# php - 如何在 Gridview 中弹出一个新的 Windwon？

> ID：14515673
> 
> 赞同：0
> 
> 时间：2013-01-25T05:05:35.437
> 
> 标签：php, javascript, yii

如何在 Gridview 中弹出一个新的 Windwon？

当使用单击gridview的退款按钮时，我想显示带有数据的弹出框。我能怎么做？

这是我的网格视图

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'advance-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(

        array('name' => 'acc_category_id',
               'value'=>'(isset($data->acccategories->name)) ? CHtml::encode($data->acccategories->status) :"Not Set"',
               'filter'=>CHtml::listData($acccate, 'id', 'name'),
        ),
        array('name' => 'accmain_id',
               'value'=>'(isset($data->accmains->name)) ? CHtml::encode($data->accmains->name) :"Not Set"',             
               'filter'=>CHtml::listData($accmain, 'id', 'name'),
        ),
        array('name' => 'job_id',
               'value'=>'(isset($data->jobs->name)) ? CHtml::encode($data->jobs->name) :"Not Set"',             
               //'filter'=>CHtml::listData($job, 'id', 'name'),
        ),
        'currency',
        'amount',

        array('name' => 'created_date',
               'value'=>'Yii::app()->dateFormatter->format("d MMM y",strtotime($data->created_date))',              
              // 'filter'=>CHtml::listData($job, 'id', 'name'),
        ),
        array(
            'class'=>'CButtonColumn',
            'template'=>'{update} {delete} {refund}',
            'buttons'=>array
            (   

                'update' => array
                (
                    'imageUrl'=>Yii::app()->request->baseUrl.'/protected/assets/images/gridview/edit.gif',
                    'options'=>array('style'=>'width:10px; border:none;'),
                    'url'=>'Yii::app()->createUrl("advance/update", array("id"=>$data->id))',
                ),
                'delete' => array
                (
                    'imageUrl'=>Yii::app()->request->baseUrl.'/protected/assets/images/gridview/delete.gif',
                    'options'=>array('style'=>'width:10px; border:none;'),
                    'url'=>'Yii::app()->createUrl("advance/delete", array("id"=>$data->id))',
                ),   

                'refund' => array
                (
                    'type'=>'raw',
                    'imageUrl'=>Yii::app()->request->baseUrl.'/protected/assets/images/gridview/icon_refund_loans2.gif',
                    'options'=>array('style'=>'width:10px; border:none;'),
                    'url'=>'Yii::app()->createUrl("advance/view", array("id"=>$data->id))',
                ),  

            ),
        ),
    ),
    'htmlOptions' => array(
        //'class' => 'table table-bordered table-striped table_vam grid_widget',
    ),
)); ?>

<div id="loadingdiv" style="float:right; margin-right:160px;">&nbsp;</div>
            <div id="jobslist"></div> 
```

======================================

更新

当我通过跟随并通过萤火虫检查来更新网格时，它正在萤火虫中显示数据。但不显示弹出窗口。

```
array(
            'header'=>'Refund',
            'type'=>'raw',
            'value'=>'CHtml::ajaxLink($data->id, array("advance/jobslist", "id"=>$data->id), array("onclick"=>\'$("#jobslist").dialog("open"); return false;\'));',

        ), 
```

这是控制器

```
public function actionJobslist()
    {
        $model=new Job('search');
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['Customer']))
            $model->attributes=$_GET['Customer'];

        if(isset($_GET['AccRecei']))
            $accrecei->attributes=$_GET['AccRecei'];

        $this->renderPartial('jobs_listing',array('model'=>$model),false,true);

    } 
```

这是视图/jobs_listing.php

```
<?php 
$this->beginWidget('zii.widgets.jui.CJuiDialog',array(
                'id'=>'jobslist',
                'options'=>array(
                    'title'=>Yii::t('job','Jobs List'),
                    'autoOpen'=>true,
                    'modal'=>'true',
                    'width'=>'750',
                    'height'=>'500',
                ),
                ));
echo $this->renderPartial('_jobs_listing', array('model'=>$model)); ?>
<?php $this->endWidget('zii.widgets.jui.CJuiDialog');?> 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T08:30:16.033

```
array(
            'header'=>'Refund',
            'type'=>'raw',
            'value'=>'CHtml::link($data->id, array("id"=>$data->id, 'class'=>'view-popup'));',
        ), 
```

并插入javascript：

```
$('.view-popup').live('click', function() {
        var id = $(this).attr('id');
        window.open("<?php echo 'http://'.$_SERVER['HTTP_HOST'].'/your_path/id/'; ?>" + id,'popUpWindow','height=800,width=1000,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes');
        return false; 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:37:44.850

网格内部

```
array(
            'header'=>'Refund',
            'type'=>'raw',
            'value'=>'CHtml::ajaxLink($data->id, array("advance/jobslist", "id"=>$data->id), array(
            "onclick"=>"$(\"#jobslist\").dialog(\"open\"); return false;","update"=>"#jobslist",
            "beforeSend" => "function() {           
                $(\"#loadingdiv\").addClass(\"ajaxloading\");
            }",
            "complete" => "function() {
                $(\"#loadingdiv\").removeClass(\"ajaxloading\");
            }", 
            ),array("id"=>"showcustomerlist2"));',

        ), 
```

出格

```
<div id="loadingdiv" style="float:right; margin-right:160px;">&nbsp;</div>
            <div id="jobslist2"></div> 
```

# ruby-on-rails - 如何在 rails 3.2 app 中设置 rack-offline

> ID：14515677
> 
> 赞同：1
> 
> 时间：2013-01-25T05:06:04.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, offline

如何使 rake-offline 在 rails 3.2.11 中工作？

我添加了初始化程序

```
offline = Rack::Offline.configure do
  #cache "images/masthead.png"

  public_path = Rails.public_path
  Dir[public_path.join("javascripts/*.js")].each do |file|
    cache file.relative_path_from(public_path)
  end

  network "/"
end 
```

我在路线中添加

```
match "/application.manifest" => Rails::Offline

  Rack::Offline.configure do
    cache "assets/application.js"
    cache "assets/application.css"   
    network "/"
  end 
```

并在 html 标签中添加清单。

它抛出错误

```
/initializers/offline.rb:5:in `block in <top (required)>': undefined method `join' for "/Sites/Ruby/project/public":String (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:37:00.153

在 Rails 3.2.11 中，`Rails.public_path`返回 a `String`，而不是`Pathname`对象。（看起来 Rails master 让它返回一个`Pathname`对象，这就是为什么 rack-offline 的文档可能会说以这种方式使用它）。

试试这个：

```
 public_path = Pathname.new(Rails.public_path) 
```

见[https://github.com/wycats/rack-offline/issues/7](https://github.com/wycats/rack-offline/issues/7)

# php - 使用 jquery ui resizable 与来自 ajax 上传的 img 一起工作，img 宽度和高度将变为零，如何在更改前获取值？

> ID：14515679
> 
> 赞同：1
> 
> 时间：2013-01-25T05:06:16.720
> 
> 标签：php, jquery, ajax

使用 jQuery ui resizable 与来自 ajax 上传的 img 一起工作，如果没有在 css 中同时设置 img 的宽度和高度（`auto`也不起作用），
img 将变为`0 0`，看不到 img。
我该如何解决？赶上之前的img大小`resizable`或任何其他建议？

谢谢。

js

```
$('.btn').click(function(){
    $.ajax({
        type: "POST",
        url: "upload.php",
        data:fd, // new FormData()..
        processData: false,
        contentType: false,
        success: function(html){
            var img = $(html).filter('.img_wp').html();
            $('.container').append(img);

            $('.upload_img img').resizable();
        }
    });
}); 
```

php

```
$filename = $_FILES['file_upload_tmp']['name'];
$filetmp_name = $_FILES['file_upload_tmp']['tmp_name'];
$filetype = $_FILES['file_upload_tmp']['tmp_name'];
$filetype_accept = $filetype == 'image/jpg';

if($_FILES){
    if($filetype_accept){
        move_uploaded_file($filetmp_name, 'upload/tmp/'.$filename);
        print"
            <div class=\"img_wp\">
                <div class=\"upload_img\" id=\"$layer\">
                    <img src=\"upload/tmp/$filename\">
                </div>
            </div>
        ";
    }
    else{
        print"upload file error, plz upload file type: $filetype";
    }
}
else{
    print"
        <div class=\"upload\">
            <form enctype=\"multipart/form_data\">
                <input type=\"file\" name=\"file_upload_tmp\">
                <input type=\"submit\" value=\"upload\" class=\"btn\">
            </form>
        </div>
        <div class=\"container\"></div>
    ";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:10:29.357

设置时可能无法加载图像`.resizable()`。尝试在图像加载时设置它。

```
 $('.upload_img img').on('load', function(){
                $(this).resizable();
            }); 
```

# c# - 在 Visual Studio 扩展中向菜单添加分隔符

> ID：14515684
> 
> 赞同：4
> 
> 时间：2013-01-25T05:07:21.220
> 
> 标签：c#, visual-studio-2010, visual-studio-addins, visual-studio-extensions

我正在构建我的第一个 Visual Studio 扩展，现在我已经接近尾声，我只是想让它看起来更好一点。我在顶部菜单中有自己的标题，其中包含项目。我想在菜单中添加一个分隔符以使其更整洁，但不知道该怎么做。

我正在谈论的分隔符是跨越菜单/上下文菜单以分隔项目的行。

我猜它必须添加到 vsct 文件中的 xml 中，但如果它是相关的，则加载项在 C# 中。

我真的找不到太多关于这个的东西，所以我希望有人能帮助我。

**编辑：我似乎已经弄清楚了我的问题。环顾四周后，我想到了尝试将几个菜单项放入 XML vsct 文件中的不同组中。瞧！我现在有一个很酷的分离器。所以答案是它会自动添加到单独的组中，并且不能通过代码完成（或者我认为）。请记住，扩展不使用 C# 或 VB 来添加菜单项，只有插件可以。扩展使用 XML。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-25T05:09:01.333

分隔符是 .vsct 文件中定义的命令组的视觉分隔。

命令组是属于一起的命令的逻辑容器。这种分组也可以用于视觉效果。

如果您在一个菜单中放置了多个命令组，则会创建一个分隔符以直观地强调命令组的分隔。

要了解有关 .vsct 文件的更多信息，请查看：[http ://dotneteers.net/blogs/divedeeper/archive/2008/03/02/LearnVSXNowPart14.aspx](http://dotneteers.net/blogs/divedeeper/archive/2008/03/02/LearnVSXNowPart14.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:33:34.240

从这里：[http ://social.msdn.microsoft.com/Forums/en-US/vsx/thread/f26acf64-0ee6-4947-84e4-a7a0ded9d636](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/f26acf64-0ee6-4947-84e4-a7a0ded9d636)

看起来这是代码，但老实说我不知道​​。

```
'Me.AddSeparatorLine(generateCodeCommandBarPopup, 3)   
CType(cmnd_GenerateListDetailFormCode.AddControl(generateCodeCommandBarPopup.CommandBar, 3),CommandBarButton).BeginGroup = True 
```

这看起来也可能有用：[http ://www.mztools.com/articles/2005/MZ2005003.aspx](http://www.mztools.com/articles/2005/MZ2005003.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:36:43.020

在 .vcts 中，`Commands`section 负责该功能。为了动态地用菜单做某事，你可以实现界面并在方法`IVsShellPropertyEvents`中做你的逻辑`OnShellPropertyChange`

```
public int OnShellPropertyChange(int propid, object propValue)
    {
      // --- We handle the event if zombie state changesfrom true to false
        if ((int)__VSSPROPID.VSSPROPID_Zombie == propid)
        {
            if ((bool)propValue == false)
            {
                // --- Show the commandbar
                EnvDTE80.DTE2 dte = GetService(typeof(DTE)) as DTE2;
                CommandBar cb = ((dte.CommandBars as CommandBars)["YourCommandBar"] as CommandBar);

                foreach (CommandBarControl cbc in cb.Controls)
                {
                    if (cbc.Caption == "YourCaption")
                    {
                        CommandBarButton btn = (CommandBarButton)cbc;
                        btn.BeginGroup = true; // HERE WE ADD NEW GROUP - means add separator
                    }
                }
            }

            // --- Unsubscribe from events

            var shellService = GetService(typeof(SVsShell)) as IVsShell;
            if (shellService != null)
            {
                ErrorHandler.ThrowOnFailure(shellService.UnadviseShellPropertyChanges(_EventSinkCookie));
            }

            _EventSinkCookie = 0;
        }

        return VSConstants.S_OK;
    } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-25T05:40:25.430

Not sure how you're creating the menu, but if you're using the `MenuItem` class, you can pass `"-"` to its constructor to create a separator.

```
MenuItem separator = new MenuItem("-"); 
```

# css - 无法使用 CSS 和 jquery UI 可拖动

> ID：14515686
> 
> 赞同：0
> 
> 时间：2013-01-25T05:07:23.187
> 
> 标签：css, jquery-ui, jquery-ui-draggable

我远离 CSS 大师，并且在尝试从顶部的容器中拖动元素时遇到问题：固定到页面的主要内容。它只是向下滚动顶部容器，而不是拖入主要内容。它很难解释，所以我做了一个小提琴：

[http://jsfiddle.net/4wG5t/11/](http://jsfiddle.net/4wG5t/11/)

如您所见，您不能将任何元素从顶部拖到页面的主体中。另外，在实际页面中，顶部有很多元素，所以我需要保持水平滚动条。任何帮助表示赞赏！

谢谢！

这也是小提琴的代码：

HTML：

```
<div class="fieldSectionContainer">
<div class="fieldSection">
    <ul id="fieldList">
        <!-- have loop here -->
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>
        <li class="fieldClass">field value</li>

    </ul>

</div>
</div>

<div style="margin-top:100px">
    content below <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>
    content below  <br/><br/>

</div> 
```

CSS：

```
.fieldClass {
    display:inline-block;
    background-color:white;
    border-radius:4px;
    width:200px;
    margin:5px 5px;
    padding: 1px 1px;
    text-align:center;
    border:1px solid black;      
}

.fieldClass:hover {
    cursor:move;
 }

 .fieldSectionContainer {
    overflow-y:hidden;
    overflow-x:auto;
    position:fixed !important;
    top:0;
    width:100%;
    height:100px;
 }

 .fieldSection {

    height:100px;
    width:2500px;   
    font-size:10px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:51:39.957

您必须为元素决定一个`droppable`区域。`draggable`然后它将只接受拖动的元素。

为您的最后一个部门指定一个 id，并使其成为一个`draggalbe`区域。

看看这个[**小提琴**](http://jsfiddle.net/4wG5t/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:20:40.280

如果您将 revert 设置为 true，则该框将移回其原始位置。你想做什么？

你的脚本还没有完成。如果你有一个可拖动的元素，那么你也必须有一个拖放功能。

您是否在寻找教程？.. 这是[jquery 拖放功能的链接](http://jqueryui.com/draggable/)

或者看看这个相同的[线程](https://stackoverflow.com/questions/13263266/when-drag-a-object-from-one-div-to-another-format-gets-changed)..但是线程还没有解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:25:21.207

我已经删除了水平滚动。

以下内容也已更改：

before-> revert: true after-> revert: false

你可以检查一下 jsfiddle.net/4wG5t/13/

# java - 简单的例子来理解 Thread 中 join() 的概念

> ID：14515688
> 
> 赞同：-1
> 
> 时间：2013-01-25T05:07:32.790
> 
> 标签：java, multithreading

我正在研究**java中的线程。**

我只想要一个简单的例子来解释*`join()`*线程中的使用。我看过这个链接。。

[了解 join() 方法示例](https://stackoverflow.com/questions/5872803/understanding-join-method-example)

但仍然无法理解这个概念。

谁能解释一下使用`join()`in Thread 的概念。

任何与此相关的解释都会对我很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:10:52.927

我能想到的最简单的解释是 join 使调用者线程等待指定线程的完成。

假设你有一个“主线程”和“线程 A”，如果你从主线程调用 A.join()，主线程将等到线程 A 完成。

关于并发的 java se 手册页应该在这里为您提供帮助：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/join.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/join.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:10:50.643

`Thread.join()``join()`导致当前线程在恢复执行之前等待您调用的线程死亡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:22:08.750

Thread.join() 阻塞（不返回），直到您加入的线程完成。

这不是等待线程完成的唯一方法，但它是对 CPU 使用最友好的方法。想象一下，如果你有这样的循环（伪代码）：

```
while(!thread.isAlive())
{
 Sleep(1);
} 
```

这应该做同样的事情......但是，每秒 1000 次，它会醒来，检查变量并重新进入睡眠状态。这意味着 1000 次上下文切换（这很昂贵），因此程序会变慢。这被称为“自旋锁定”或“忙于等待”，并且在编程中不受欢迎，因为它无缘无故地消耗 CPU。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T04:46:31.727

我做了一些实验，结果如下： 1\. 首先启动线程 t3。2\. 启动 t1 然后 3\. 创建 t2 并且 t2 加入了正在运行的线程 t1。根据定义，t2 应该等待 t1 死亡，然后它应该开始。

**观察**：我在 t1 上调用了等待，所以 t1 暂停但没有死，但我看到然后 t2 开始了，为什么？

```
public class TestThreadJoin {

    public static void main(String[] args) {
        final Thread t3 = new Thread(new Runnable() {
            public void run() {
                System.out.println("R3");       
            }
        });
        t3.start();

        final Thread t1 = new Thread(new Runnable() {
            public void run() {
                System.out.println("R1 before");
                try {
                perform();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("R1 after");
            }
            private void perform() throws InterruptedException {
                synchronized(this){
                    wait(5000);
                }
            }
        });
        t1.start();
        Thread t2 = new Thread(new Runnable() {
            public void run() {
                System.out.println("R2");
                try {
                    t1.join();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        });
        t2.start();

    }
} 
```

# ubuntu - SSH 适用于第二个会话，但不适用于第一个会话

> ID：14515691
> 
> 赞同：2
> 
> 时间：2013-01-25T05:07:44.683
> 
> 标签：ubuntu, ssh, rsa

所以我已经设置了一百次SSH无密码登录，但我从来没有遇到过这样的问题。我有一个安装了标准 sshd 服务器的 Ubuntu 服务器。我已经验证了我的主文件夹、我的 .ssh 文件夹和我的 authorized_keys 文件的权限。我在authorized_keys 中有正确的密钥，并且我已经在我的Windows 客户端上运行了我的私钥加载到其中的Pageant。一切都设置好了，直到今天都运行良好。

今天，我尝试登录并提示输入密码。所以我搞砸了设置，重新启动了 SSH 服务，并尝试了其他一些事情。当那不起作用时，我只是将事情恢复原状并再次尝试。我使用我的密码登录了一个 PuTTY SSH 会话，然后为了踢球和咯咯笑打开另一个 PuTTY 窗口并尝试再次登录。这一次，它只使用我的 RSA 密钥让我登录而没有提示。无论我使用什么程序，我都会得到相同的结果。PuTTY、WinSCP、TortoisePlink，应有尽有。如果我让第一个会话保持打开状态，第二个会话将仅使用密钥。换句话说，如果我关闭使用密码登录的第一个窗口，我将无法再使用我的密钥登录以进行连续会话。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:39:25.300

似乎您的主目录已加密。第一次登录解密内容，第二次 SSH 是无密钥的，因为现在可以读取 SSH 密钥。看看[这里的讨论](https://askubuntu.com/questions/34753/can-not-log-into-ssh-unless-logged-in-locally)。

# android - android webservice ksoap2错误

> ID：14515692
> 
> 赞同：1
> 
> 时间：2013-01-25T05:07:47.633
> 
> 标签：android, web-services, soap, ksoap2

我正在尝试测试为我制作的网络服务，当我尝试使用 android 时，我遇到了问题。我阅读了所有帖子，但无法解决。这是我的代码：

```
import java.io.IOException;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

import android.util.Log;
import android.widget.TextView;

import android.os.Bundle;
import android.app.Activity;

public class ListIncidencesActivity extends Activity {

private static final String NAMESPACE = "http://localhost:8080/";
private static String URL="http://localhost:8080/WebApp/services/Hola?wsdl";
private static final String METHOD_NAME = "DiHola";
private static final String SOAP_ACTION ="http://localhost:8080/DiHola";

private SoapObject request=null;
private SoapSerializationEnvelope envelope=null;
private SoapPrimitive  resultsRequestSOAP=null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list_incidences);        

        request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("nombre","R1K4R2");

        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);

        HttpTransportSE transporte = new HttpTransportSE(URL);

        try {
            transporte.call(SOAP_ACTION, envelope);

            resultsRequestSOAP = (SoapPrimitive)envelope.getResponse();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.v("Milagro?","SIIII  "+ resultsRequestSOAP);    
      }
} 
```

当我添加库`ksoap2-android-assembly-2.5.8-jar-with-dependencies`时，运行时出现致命错误：

```
01-25 04:46:38.374: E/AndroidRuntime(781): FATAL EXCEPTION: main
01-25 04:46:38.374: E/AndroidRuntime(781): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
01-25 04:46:38.374: E/AndroidRuntime(781):  at es.proyecto.gestorincidencias.ListIncidencesActivity.onCreate(ListIncidencesActivity.java:47)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.app.Activity.performCreate(Activity.java:5008)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.os.Looper.loop(Looper.java:137)
01-25 04:46:38.374: E/AndroidRuntime(781):  at android.app.ActivityThread.main(ActivityThread.java:4745)
01-25 04:46:38.374: E/AndroidRuntime(781):  at java.lang.reflect.Method.invokeNative(Native Method)
01-25 04:46:38.374: E/AndroidRuntime(781):  at java.lang.reflect.Method.invoke(Method.java:511)
01-25 04:46:38.374: E/AndroidRuntime(781):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-25 04:46:38.374: E/AndroidRuntime(781):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-25 04:46:38.374: E/AndroidRuntime(781):  at dalvik.system.NativeStart.main(Native Method) 
```

如果我更新到`ksoap2-android-assembly-2.6.5-jar-with-dependencies`我会遇到编译问题：

```
The import org.ksoap2 cannot be resolved 
```

但与我没有添加任何人（电线）时不同。出现一个！mi 图标项目中的信号。

所以有什么想法吗？？我希望这是一个我看不到的小错误，因为我没有经验，这是我的第一次。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:43:35.920

阅读[此](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)链接并按照说明如何放置 .jar 文件，不要忘记将代理地址设置为右键单击“项目”-> 运行方式-> 运行配置代理-> 您的互联网访问 IP 地址
端口-> 默认 8080

然后点击“应用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T07:37:50.330

单击android项目打开右侧菜单然后选择构建路径并选择配置构建路径

检查您的程序集 ksoap2-android-assembly-2.6.5-jar-with-dependencies 是否检查的顺序和支持

# javascript - 如何在 Qunit 中设置环境变量

> ID：14515693
> 
> 赞同：1
> 
> 时间：2013-01-25T05:07:54.503
> 
> 标签：javascript, jquery, qunit

我坚持测试使用 $j(window).width() 的函数。这个函数根据这个返回值。现在我的问题是我想在我的 Qunit 函数中设置窗口宽度。任何人都可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:17:02.693

在您期望从您无法控制或至少需要测试的对象返回的值的情况下，您应该模拟返回值。看看[JSMockito](http://jsmockito.org/)，它是一个基于 JavaScript 的模拟框架。`get(1)`下面是一个简单的示例，它模拟一个 Array 对象并设置测试调用方法时要返回的值。

```
var mockedObject = mock(Array);

when(mockedObject).get(1).thenReturn("hello world");

// -- start code under test --
alert(mockedObject.get(1));

// the following alerts 'true' as get(99) was not stubbed
alert(typeof (mockedObject.get(99)) === 'undefined');
// -- end code under test -- 
```

希望这可以帮助！

# data-binding - jquery绑定一个ajax加载的元素

> ID：14515698
> 
> 赞同：1
> 
> 时间：2013-01-25T05:08:45.557
> 
> 标签：data-binding, jquery

我正在尝试使用具有以下绑定命令的评级插件。

```
$("#rateit10b").bind('over', function (event, value) { 
    $(this).attr('title', tooltipvalues[value - 1]); 
}); 
```

html是

```
<div class='rateit' id='rateit10b' data-rateit-step='1' >
            </div> 
```

但我正在通过 ajax 加载 html。jquery 似乎不起作用。我可以使用 .live() 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:10:29.607

使用`.on`，委托方式：

```
$(document).on('over', '#rateit10b', function (event, value) { 
```

几件事：

1.  不要使用`.live`. 它在 jQuery 1.9 中被移除
2.  `document`如果可以的话，使用更具体的选择器进行绑定
3.  是`over`事件类型吗？你的意思是`mouseover`？

# c# - 验证用户角色的页面级别访问权限

> ID：14515699
> 
> 赞同：1
> 
> 时间：2013-01-25T05:09:04.367
> 
> 标签：c#, asp.net

我的问题几乎与这个 [ASP.Net Roles: Page-Level Security Question](https://stackoverflow.com/questions/2804572/asp-net-roles-page-level-security-question)相似， 除了我没有使用 asp.net 成员资格，我所做的是我创建了角色并将页面分配给角色，菜单也是根据用户的角色填充。我想通过简单地键入来限制用户访问页面`PageName.aspx`，一个解决方案可能是检查每个页面加载，但我认为它不是有效的。我已经用谷歌搜索但只找到了添加`<location path="Logon.aspx">`限制的解决方案，我必须为每个页面添加这个`web.config`，这违背了保持这个东西动态的整个目的，我正在**使用表单身份验证**，有些人建议创建一个**基类**并派生其他页面从那个班级，我想可能有一些`global.asax`实现这一目标的方法，但不知道。请建议我实现这一目标的最佳方法！

PS：我**没有使用 ASP.NET Membership**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:16:44.203

创造传奇，

这取决于您的项目布局。一种解决方案是您创建一个文件夹结构，在其中放置*webconfig*并在那里为用户授予权限，我认为这可能是一种解决方案，也可能是其他解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:13:44.787

最后，我所做的是`Page_Load`使用方法名称`IsPageAssignedToRole()`检查MasterPage 上每个用户的 Pages 访问权限

```
 string requestedPage = Request.Url.Segments[Request.Url.Segments.Length-1];
        if (requestedPage != "UnAuthorized.aspx")
        {
        AdminUserAuthInfo au = (AdminUserAuthInfo)Context.Items["AdminUserAuthInfo"];
        int current_role= int.Parse(au.Roles[0].ToString());
        if (!AdminRole.IsPageAssignedToRole(current_role, requestedPage))
        { Response.Redirect("UnAuthorized.aspx",true); }
        } 
```

# c# - 在 GridView 选择 SelectIndexChanged 后丢失组件

> ID：14515700
> 
> 赞同：1
> 
> 时间：2013-01-25T05:09:14.957
> 
> 标签：c#, asp.net, user-controls, code-behind, webusercontrol

当我在 UserControl 的 GridView 处选择行时，此 gridview 消失。

**主页（aspx 页面）**

1.1.HTML

```
<body>
    <form id="form1" runat="server">
    <div>
    <asp:PlaceHolder ID="plh" runat="server"></asp:PlaceHolder>
    </div>
    </form>
</body> 
```

1.2.CodeBehind

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            Test2.Admin.WebUserControl1[] wuc = new Test2.Admin.WebUserControl1[2];
            for (int i = 0; i < 2; i++)
            {
                plh.Controls.Add(new LiteralControl("<div id='dvChannel' runat='server' style='width: 200px;float:left;padding-left:20px;'>"));
                wuc[i] = (Test2.Admin.WebUserControl1)LoadControl("WebUserControl1.ascx");
                wuc[i].ID = "wuc" + i.ToString();
                plh.Controls.Add(wuc[i]);
                plh.Controls.Add(new LiteralControl("</div>"));
            }
        }
    } 
```

**用户控制**

2.1.html

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl1.ascx.cs" Inherits="Test2.Admin.WebUserControl1" %>
<asp:GridView ID="GridView1" runat="server" AutoGenerateSelectButton="true"
OnSelectedIndexChanged="gvSelected">
</asp:GridView> 
```

2.2.代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                var list = (new[] { 
                new { Price = 30 } ,
                new { Price = 30 },
                new { Price = 30 },
                new { Price = 30 }
                });
                GridView1.DataSource = list;
                GridView1.DataBind();
            }
        }
        protected void gvSelected(object sender,EventArgs e)
        {
            GridViewRow row = GridView1.Rows[GridView1.SelectedIndex];
            row.BackColor = Color.Red;//Set red color for this row on gridview
        } 
```

当我在 UserControl 的 GridView 处选择行时，此 gridview 消失。我应该怎么做才能让它正常工作。你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T11:45:48.723

即使在回发中，您也需要加载 GridView。尝试删除条件 - if (!Page.IsPostBack)

或者，在 else 块中编写不同的代码片段 - 用于设置数据源和绑定网格。

# php - sql注入示例

> ID：14515701
> 
> 赞同：0
> 
> 时间：2013-01-25T05:09:15.560
> 
> 标签：php, sql

> **可能重复：**
> [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

我是 sql 新手，我想了解 SQL 注入。例如，我有一个简单的 sql 查询，例如使用 POST (php)：

```
 $valuedata = $_POST['name1'];
    $dbase->query("SELECT * FROM tabledata WHERE value LIKE '%$valuedata%'"); 
```

如何保护这个 SQL 注入查询？

# c# - 如何在 MVC3 中更新没有回发的视图

> ID：14515703
> 
> 赞同：4
> 
> 时间：2013-01-25T05:09:19.573
> 
> 标签：c#, jquery, asp.net-mvc-3

如何更新 MVC3 中的下拉列表。我想用其他视图填充的最新数据重新填充它，但我不想回发视图并想用 jquery 实现它。我有一个下拉列表，例如：

```
@Html.DropDownListFor(m => m.Department, Model.Departments)
@Html.ValidationMessageFor(m => m.Departments)
<input type="button" value="Refresh" id="btnrefresh" /> 
```

我已经编写了 jquery 代码来调用控制器的方法：

```
 $("#btnrefresh").click(function () {
 var ref = '@Url.Action("RefreshDepartments")';
 var model = '@Model.ToJson()';
 var data = { empModel: model };
 $.getJSON(ref, data, function (result) { alert(result.message); });
        return false;
    }); 
```

这是控制器方法：

```
public ActionResult RefreshDepartments(EmployeeModel empModel)
    {
        empModel.Departments = GetDepartments();
        empModel.Roles = GetRoles();
        return Json(new { message = "Updated successfully"}, JsonRequestBehavior.AllowGet);
    } 
```

在没有任何回发的情况下，如何在单击“刷新”按钮时使用最新值更新下拉列表？将模型传递给控制器​​并更新模型属性是个好主意吗？还有哪些可能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:26:10.160

在我看来，您不需要将模型发布到您的控制器以执行您正在执行的操作。另外，是的，你绝对可以用 jquery 做到这一点！附带说明一下，您也可以使用 Ajax.BeginForm() 辅助方法来执行此操作，但让我们处理您的 jquery 示例。

您可以简单地调用路径本身，而不是使用 @Url.Action 使您的 jquery 复杂化。

```
$("#btnrefresh").click(function () {
    var ref = 'ControllerName/RefreshDepartments';
    $.each(result, function (index, val) {
        $('#whateverYourRenderedDropdownListHtmlObjectis')
            .append($("<option></option>")
            .attr("value", val.Text)
            .text(val.Text));
    });
}); 
```

现在，对于您的控制器...

```
public JsonResult RefreshDepartments()
{
    return Json(GetDepartments, JsonRequestBehavior.AllowGet);
}

private SelectList GetDepartments
{
    var deparments = GetDepartments;
    SelectList list = new SelectList(departments);
    return list;
} 
```

这是返回模型的替代方法。它允许您改为操作原始 JSON。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:33:56.890

你几乎都做到了！为什么不通过 RefreshDepartments 操作发送数据，我的意思是列表？您发送了一条要查看的消息，因此您可以类似地发送列表，而不是提醒结果，您可以填写下拉列表。像这样的东西：

```
public ActionResult RefreshDepartments(EmployeeModel empModel)
    {
        return Json(new { departments = GetDepartments()}, JsonRequestBehavior.AllowGet);
    }

$.getJSON(ref, data, function (result) { 
    $("#Department").html("");
    for (var i = 0; i < result.departments.length; i++) {
        var item = result.departments[i];
        $("#Department").append(
              $("<option></option>").val(item.Id).html(item.Name);
        );
    });
}); 
```

# javascript - 当控件出现在文档中时怎么办？

> ID：14515704
> 
> 赞同：-1
> 
> 时间：2013-01-25T05:09:20.763
> 
> 标签：javascript, jquery, asp.net

javascript怎么可能？我找不到像这样的事件：

```
$(.check-icon).on('loaded', function(){...}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:11:21.140

```
$(document).ready(function(){
$(.check-icon).on('load', function(){...});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:11:38.450

你的意思是在`DOM`你准备好之后`document`

你可以用这个。[在这里检查](http://api.jquery.com/ready/)

```
$(document).ready(function(){
    ---code here
}); 
```

# apache - 如何使用 mod_proxy 仅将 *.jsp 或 *.do 请求转发到 Tomcat？

> ID：14515708
> 
> 赞同：2
> 
> 时间：2013-01-25T05:09:56.120
> 
> 标签：apache, tomcat, mod-proxy

我正在使用 mod_proxy 模块来转发对我的一个域的所有请求，以由 Tomcat 提供服务。但是，我只想将以 *.jsp 或 *.do 或 *.something 结尾的请求转发给 Tomcat，然后由 Apache 服务器提供其他服务（例如 *.html、*.php、*.png）。**如何使用mod_proxy**来实现？

以下是我当前使用的示例 httpd.conf 配置：

```
<VirtualHost *:80>
    DocumentRoot /usr/share/tomcat6/webapps/mywebapp
    ServerName example.com
    ServerAlias www.example.com
    ProxyRequests Off
    ProxyPreserveHost On

    <Proxy *>
    Order deny,allow
    Allow from all
    </Proxy>

    ProxyPass         /  ajp://localhost:8009/
    ProxyPassReverse  /  ajp://localhost:8009/
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-17T11:51:36.410

我知道您已经找到了答案，但我为可能需要它的其他人写了这个答案：

```
<Proxy *>
    Order deny,allow
    Allow from all
    </Proxy>

    #ProxyPass         /  ajp://localhost:8009/
    ProxyPassMatch ^/(.*\.do)$ ajp://localhost:8009/$1
    ProxyPassMatch ^/(.*\.jsp)$ ajp://localhost:8009/$1 
```

# mysql - InnoDB 错误 MySQL windows 8

> ID：14515709
> 
> 赞同：1
> 
> 时间：2013-01-25T05:09:59.990
> 
> 标签：mysql, windows-8, innodb

我刚刚从 Windows 7 升级到 Windows 8，但是很多设置或文件已更改，我无法再连接到 MySQL 数据库。

这是我得到的错误：

```
130124 23:56:02 [Warning] Can't create test file C:\Program Files\MySQL\MySQL Server 5.5\data\Randy-PC.lower-test
130124 23:56:02 [Warning] Can't create test file C:\Program Files\MySQL\MySQL Server 5.5\data\Randy-PC.lower-test
130124 23:56:02 [Note] Plugin 'FEDERATED' is disabled.
130124 23:56:03 InnoDB: The InnoDB memory heap is disabled
130124 23:56:03 InnoDB: Mutexes and rw_locks use Windows interlocked functions
130124 23:56:03 InnoDB: Compressed tables use zlib 1.2.3
130124 23:56:03 InnoDB: Initializing buffer pool, size = 128.0M
130124 23:56:03 InnoDB: Completed initialization of buffer pool
130124 23:56:03  InnoDB: Operating system error number 5 in a file operation.
InnoDB: The error means mysqld does not have the access rights to
InnoDB: the directory. It may also be you have created a subdirectory
InnoDB: of the same name as a data file.
InnoDB: File name .\ibdata1
InnoDB: File operation call: 'open'.
InnoDB: Cannot continue operation. 
```

1.  我该怎么做才能让我的数据库重新启动并运行？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:45:29.673

最可能的解释是Windows 8升级修改了MySQL数据目录的权限。

从错误消息来看，您的 InnoDB 数据目录可能是`C:\Program Files\MySQL\MySQL Server 5.5\data`

使用 Windows 资源管理器导航到该目录，右键单击并打开属性，然后单击安全选项卡。运行 MySQL 服务的服务帐户需要对该目录具有完全访问权限（所有权限）。当您单击编辑时，有两列复选框用于允许和拒绝...完全控制、修改、读取和执行等）

（注意：我没有运行 Windows 8。在我的 Windows 7 系统上，数据目录是`C:\ProgramData\MySQL\MySQL Server 5.5\data\`）

# javascript - CSS Javascript 弹出窗口

> ID：14515710
> 
> 赞同：0
> 
> 时间：2013-01-25T05:10:04.910
> 
> 标签：javascript, jquery, popup, shadow

我正在升级我的网站，并一直在尝试将其切换为翻页在线杂志。我已经成功地做到了这一点，但我有一个问题。我们每个月都会进行视频采访，我正在努力做到这一点，以便有人可以单击翻页中的图像并在视频中弹出一个阴影框。

最初，我只是将视频嵌入到翻转页面中，该页面可以正常工作，因为它在应该显示之前出现在页面上。我假设这是翻页 Javascript 中的 flash 或 z-indexing 问题。

我已经尝试了许多具有此功能的 JQuery 库，最后一个是弹出的阴影框，只不过在锚标记中添加了一个 rel。问题是当我将 rel 添加到锚标记并单击它时，它会打开一个全新的选项卡而不是弹出窗口。

有谁知道可以展示从 YouTube 嵌入的视频的任何好的锚点或 div 标签弹出窗口？我现在已经把这两个例子都放到了翻页中。常规嵌入在第 25 页，锚点在第 27 页。您会注意到，如果您在 25 播放它并翻回 23，它有时会显示在第 23 页上。

[http://www.grossmag.com/2013-March/](http://www.grossmag.com/2013-March/)

这是以锚标记开头的视频框的 html。div 的设置来自翻页代码。

```
<div id="page27" class="music">
<div class="img27">
   <span class="pageNumD right">Page 27 </span>
    <img src="/2013/January/img/xf1.jpg" alt="" title="Gross Magazine January 2013 XFACTOR1 Interview with QBall Wolf" border="0">
    <a href="http://www.youtube.com/watch?v=2gD1shLW2T0" rel="vidbox" title="caption"><img src="/2013/January/img/xf1.jpg" alt="" title="Gross Magazine January 2013 XFACTOR1 Interview with QBall Wolf" border="0"></a>
</div>
</div> 
```

这是videobox自带的js

```
var Videobox = {

init: function (options) {
    // init default options
    this.options = Object.extend({
        resizeDuration: 400,    // Duration of height and width resizing (ms)
        initialWidth: 250,      // Initial width of the box (px)
        initialHeight: 250,     // Initial height of the box (px)
        defaultWidth: 425,      // Default width of the box (px)
        defaultHeight: 350, // Default height of the box (px)
        animateCaption: true,   // Enable/Disable caption animation
        flvplayer: 'swf/flvplayer.swf'
    }, options || {});

    this.anchors = [];
    $A($$('a')).each(function(el){
        if(el.rel && el.href && el.rel.test('^vidbox', 'i')) {
            el.addEvent('click', function (e) {
      e = new Event(e);
      e.stop();
      this.click(el);
            }.bind(this));
            this.anchors.push(el);
        }
}, this);

    this.overlay = new Element('div').setProperty('id', 'lbOverlay').injectInside(document.body);
    this.center = new Element('div').setProperty('id', 'lbCenter').setStyles({width: this.options.initialWidth+'px', height: this.options.initialHeight+'px', marginLeft: '-'+(this.options.initialWidth/2)+'px', display: 'none'}).injectInside(document.body);

    this.bottomContainer = new Element('div').setProperty('id', 'lbBottomContainer').setStyle('display', 'none').injectInside(document.body);
    this.bottom = new Element('div').setProperty('id', 'lbBottom').injectInside(this.bottomContainer);
    new Element('a').setProperties({id: 'lbCloseLink', href: '#'}).injectInside(this.bottom).onclick = this.overlay.onclick = this.close.bind(this);
    this.caption = new Element('div').setProperty('id', 'lbCaption').injectInside(this.bottom);
    this.number = new Element('div').setProperty('id', 'lbNumber').injectInside(this.bottom);
    new Element('div').setStyle('clear', 'both').injectInside(this.bottom);

    var nextEffect = this.nextEffect.bind(this);
    this.fx = {
        overlay: this.overlay.effect('opacity', {duration: 500}).hide(),
        center: this.center.effects({duration: 500, transition: Fx.Transitions.sineInOut, onComplete: nextEffect}),
        bottom: this.bottom.effect('margin-top', {duration: 400})
    };

},

click: function(link) {

        return this.open (link.href, link.title, link.rel);

},
open: function(sLinkHref, sLinkTitle, sLinkRel) {
    this.href = sLinkHref;
    this.title = sLinkTitle;
    this.rel = sLinkRel;
    this.position();
    this.setup();
    this.video(this.href);
    this.top = Window.getScrollTop() + (Window.getHeight() / 15);
    this.center.setStyles({top: this.top+'px', display: ''});
    this.fx.overlay.start(0.8);
    this.step = 1;
    this.center.setStyle('background','#fff url(loading.gif) no-repeat center');
    this.caption.innerHTML = this.title;
    this.fx.center.start({'height': [this.options.contentsHeight]});
},

setup: function(){
    var aDim = this.rel.match(/[0-9]+/g);
    this.options.contentsWidth = (aDim && (aDim[0] > 0)) ? aDim[0] : this.options.defaultWidth;
    this.options.contentsHeight = (aDim && (aDim[1] > 0)) ? aDim[1] : this.options.defaultHeight;

},

position: function(){
this.overlay.setStyles({'top': window.getScrollTop()+'px', 'height': window.getHeight()+'px'});
},

video: function(sLinkHref){
    if (sLinkHref.match(/youtube\.com\/watch/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('=');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://www.youtube.com/v/"+this.videoID, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/metacafe\.com\/watch/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('/');
        this.videoID = videoId[4];
        this.so = new SWFObject("http://www.metacafe.com/fplayer/"+this.videoID+"/.swf", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/google\.com\/videoplay/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('=');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://video.google.com/googleplayer.swf?docId="+this.videoID+"&hl=en", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/ifilm\.com\/video/i)) {
      this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('video/');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://www.ifilm.com/efp", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0", "#000");
        this.so.addVariable("flvbaseclip", this.videoID+"&");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/\.mov/i)) {
      this.flash = false;
        if (navigator.plugins && navigator.plugins.length) {
      this.other ='<object id="qtboxMovie" type="video/quicktime" codebase="http://www.apple.com/qtactivex/qtplugin.cab" data="'+sLinkHref+'" width="'+this.options.contentsWidth+'" height="'+this.options.contentsHeight+'"><param name="src" value="'+sLinkHref+'" /><param name="scale" value="aspect" /><param name="controller" value="true" /><param name="autoplay" value="true" /><param name="bgcolor" value="#000000" /><param name="enablejavascript" value="true" /></object>';
  } else {
    this.other = '<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" width="'+this.options.contentsWidth+'" height="'+this.options.contentsHeight+'" id="qtboxMovie"><param name="src" value="'+sLinkHref+'" /><param name="scale" value="aspect" /><param name="controller" value="true" /><param name="autoplay" value="true" /><param name="bgcolor" value="#000000" /><param name="enablejavascript" value="true" /></object>';
  }
    }
    else if (sLinkHref.match(/\.wmv/i) || sLinkHref.match(/\.asx/i)) {
    this.flash = false;
     this.other = '<object NAME="Player" WIDTH="'+this.options.contentsWidth+'" HEIGHT="'+this.options.contentsHeight+'" align="left" hspace="0" type="application/x-oleobject" CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"><param NAME="URL" VALUE="'+sLinkHref+'"><param><param NAME="AUTOSTART" VALUE="false"></param><param name="showControls" value="true"></param><embed WIDTH="'+this.options.contentsWidth+'" HEIGHT="'+this.options.contentsHeight+'" align="left" hspace="0" SRC="'+sLinkHref+'" TYPE="application/x-oleobject" AUTOSTART="false"></embed></object>'
    }
    else if (sLinkHref.match(/\.flv/i)) {
     this.flash = true;
     this.so = new SWFObject(this.options.flvplayer+"?file="+sLinkHref, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0", "#000");
    }
    else {
      this.flash = true;
        this.videoID = sLinkHref;
        this.so = new SWFObject(this.videoID, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
    }
},

nextEffect: function(){
    switch (this.step++){
    case 1:
        this.fx.center.start({'width': [this.options.contentsWidth], 'marginLeft': [this.options.contentsWidth/-2]});
        break;
        this.step++;
    case 2:
        this.center.setStyle('background','#fff');
        this.flash ? this.so.write(this.center) : this.center.setHTML(this.other) ;
        this.bottomContainer.setStyles({top: (this.top + this.center.clientHeight)+'px', height: '0px', marginLeft: this.center.style.marginLeft, width: this.options.contentsWidth+'px',display: ''});
        if (this.options.animateCaption){
            this.fx.bottom.set(-this.bottom.offsetHeight);
            this.bottomContainer.style.height = '';
            this.fx.bottom.start(0);
            break;
        }
        this.bottomContainer.style.height = '';
        this.step++;
    }
},

close: function(){
    this.fx.overlay.start(0);
    this.center.style.display = this.bottomContainer.style.display = 'none';
    this.center.innerHTML = '';
    return false;
} 
```

};

window.addEvent('domready', Videobox.init.bind(Videobox));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:53:12.737

有许多 js 插件可以完成这项工作。

这里有几个：

[VideoBox 影](http://videobox-lb.sourceforge.net/)
[盒](http://www.shadowbox-js.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:01:52.233

FancyBox和[FancyBox2](http://fancybox.net/)[都](http://fancyapps.com/fancybox/)支持 youtube 视频。我以前用 Fancbox 来播放 youtube 视频，它非常简单。

# ios - 将块中异步接收的 JSON 对象传递给实例变量 - 在 iOS6 上使用 AFNetworking

> ID：14515719
> 
> 赞同：1
> 
> 时间：2013-01-25T05:10:38.177
> 
> 标签：ios, json, serialization, nsarray, afnetworking

此代码具有 JSON，但无论我做什么，我都无法弄清楚如何将此 JSON 传递给实例变量。每次我将它设置为一个变量并在此方法之外调用该变量时它为零。所以我可以收集到的是在以下异步调用返回之前调用了该变量。

所以问题是我可以对下面的代码做些什么，以便我可以提取 JSON 值。在互联网上的某个地方，我读到我需要向它传递一个块，该块将在完成时作为回调服务器，但我不知道如何为以下代码执行此操作

```
 //Gets the JSON object that contains the entries from the server
 -(void)getEntriesFromServer 
 {
   NSLog(@"%s", __PRETTY_FUNCTION__);

   [[appAPIClient sharedClient] getPath:@"/entries"
                          parameters:nil
                             success:^(AFHTTPRequestOperation *operation, id JSON)
    {
      NSLog(@" JSON array = %@",[JSON valueForKeyPath:@"entries"]);
    }failure:^(AFHTTPRequestOperation *operation, NSError *error)
    {
      NSLog(@" Json not received");
    }];
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:58:31.177

尝试添加`__block`到数组的定义中，例如`__block NSArray* entriesArray;` 或制作类似的属性

```
@property (nonatomic, retain) NSArray* entriesArray; 
```

并像这样更改您的代码

```
[[appAPIClient sharedClient] getPath:@"/entries"
                               parameters:nil
                                  success:^(AFHTTPRequestOperation *operation, id JSON)
   {

     //NSLog(@" Json value received is : %@ ",[JSON description]);
     //NSLog(@" JSON array = %@",[JSON valueForKeyPath:@"entries"]);

     self.entriesArray = [NSArray arrayWithArray:[JSON valueForKeyPath:@"entries"]];
     NSLog(@" JSON array from inside block = %@", _entriesArray);
     }failure:^(AFHTTPRequestOperation *operation, NSError *error)
    {
        NSLog(@" Json not received");
    }]; 
```

希望它会有所帮助

# ajax - IE9 ajax保存权限被拒绝

> ID：14515721
> 
> 赞同：4
> 
> 时间：2013-01-25T05:10:46.813
> 
> 标签：ajax, internet-explorer-9, tinymce, save

IE9 TinyMCE ajax 保存问题

我在一页中有几个标签，在一个标签中我有三个文本区域（都包含 TinyMCE）编辑器。

我正在使用 ajax 发布表单并保存值，然后重新显示从 PartialViewResult 返回的部分视图。

我正在使用 TinyMCE 的最新版本（3.5.8）。

当我第一次单击时，会保存 textarea 值。但是当我第二次点击标签消失并给我'SCRIPT70：权限被拒绝'。

错误发生在 tiny_mce_src.js 中

```
 getBody : function() {
        return this.bodyElement || this.getDoc().body;
    } 
```

我试过使用 document.domain = 'localhost'（写在 tiny_mce_src.js 的顶部），它可以工作，但只有一个 textarea 转换为 TinyMCE 编辑器，另外两个仍然是正确的 textarea。

还尝试将其设置为 1(HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_OBJECT_CACHING\iexplore.exe)

我发布表格和重新显示的代码如下。

```
 $(".save").live("click", function () {
           tinyMCE.triggerSave();
           var f = $(this).parents("form");
           var action = f.attr("action");
           var serializedForm = f.serialize();
           $.ajax({
               type: 'POST',
               url: action,
               data: serializedForm,
               async: false,
               cache: false,
               success: function (data, textStatus, request) {
                     // redisplay partial view
                     $("div.tab-pane.active").html(data);
                     window.scrollTo(0, 0);
                     InItTinyMCE();
               },
               error: function (req, status, error) {
                     alert("Error occurred!");
               }
           });
           return false;
    });

    function InItTinyMCE() {
           tinyMCE.init({
              mode: "textareas",
              cleanup: true
           });
    } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:10:39.637

您可能必须正确重新初始化 tinymce 实例

要关闭编辑器实例，请使用：

```
tinymce.execCommand('mceRemoveControl',true,'your_editor_id'); 
```

重新初始化使用

```
tinymce.execCommand('mceAddControl',true,'your_editor_id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:25:21.030

尝试使用模式：精确

```
$(window).ready(function() {
tinyMCE.init({
    ...
    mode : "exact",
    elements : "elm1,elm2"
});

}) 
```

.....................

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T06:50:51.797

```
add some line in Sizzle function in sizzle.js like this -

function Sizzle( selector, context, results, seed ) {
var match, elem, m, nodeType,
// QSA vars
i, groups, old, nid, newContext, newSelector;

try{
document === document; //may cause permission denied
}
catch(err){
document = window.document; //resets document, and no more permission denied errors.
}
if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
setDocument( context );
}
//remaining code will be same 

} 
```

# javascript - 这个变量声明代码在做什么？

> ID：14515726
> 
> 赞同：0
> 
> 时间：2013-01-25T05:11:03.083
> 
> 标签：javascript

我正在浏览玉模板引擎源代码，并试图弄清楚这个语句的含义。

我知道它会尝试实例化`options.compiler`，如果实例化失败`Compiler`，但下一部分让我感到困惑......这是说调用`parser.parse`并将返回的值声明为变量吗？如果是这样，为什么最右边的括号是选项？

```
var compiler = new (options.compiler || Compiler)(parser.parse(), options)
  , js = compiler.compile(); 
```

.
如果有帮助，这里有更多上下文

```
function parse(str, options){
  try {
    // Parse
    var parser = new Parser(str, options.filename, options);

    // Compile
    var compiler = new (options.compiler || Compiler)(parser.parse(), options)
      , js = compiler.compile(); 
```

[Github - 第 960 行](https://github.com/visionmedia/jade/blob/master/jade.js#L960)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:13:32.513

`var compiler = new (options.compiler || Compiler)`不尝试*实例化* `options.compiler`. 它寻找构造函数的*存在*作为`compiler`的属性`option`。如果它没有找到它，它将`Compiler`用作构造函数。

然后它只是将这两个参数传递给正在使用的构造函数：第一个参数是 的返回值`parser.parse()`，第二个参数是`options`.

* * *

为了简化它，这可以重写如下：

```
var theConstructor = options.compiler || Compiler;
var parsedStuff = parser.parse();
var compiler = new theConstructor(parsedStuff, options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:24:02.680

让我们分解一下。

```
(options.compiler || Compiler) 
```

这个表达式似乎是为了寻找一个“类”（好吧，从技术上讲，是一个构造函数，这是 JavaScript）。options 对象可用于指定它，否则它将回退到`Compiler`.

```
new (options.compiler || Compiler)(/* ... */) 
```

好的，现在这更有意义了。我们正在调用一个构造函数。只是“类”是动态选择的。

```
new (options.compiler || Compiler)(parser.parse(), options) 
```

当我们传入构造函数时，我们传入了两个参数。第一个是调用对象`parse`方法的结果`parser`，第二个是前面的选项对象。

```
var compiler = new (options.compiler || Compiler)(parser.parse(), options) 
```

那个邪恶的混乱存储在`compiler`变量中。

```
var compiler = new (options.compiler || Compiler)(parser.parse(), options), js = compiler.compile(); 
```

您可以在同一`var`语句中声明和分配多个变量，这样会进一步混淆。但最后一部分本身很容易理解。

该声明可以并且可能应该分解为多行……但事实就是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:15:30.657

它看起来很有趣，因为要调用的构造函数本身就是一个表达式。

不，它并没有完全计算`parser.parse()`为声明的本地值，`compiler,`而是从返回的对象创建一个新对象并从中*初始化* `compiler`。

而且，最右边的括号只是因为代码知道返回的任何构造函数......它都需要两个参数。

# java - JMenuItems 隐藏在我的 JApplet 后面

> ID：14515731
> 
> 赞同：0
> 
> 时间：2013-01-25T05:11:18.570
> 
> 标签：java, swing, components, japplet, jmenu

好吧，我正在为我的服务器制作一个客户端，并且在`JMenu`添加小程序之前工作正常，现在当我单击菜单查看下拉菜单时，它没有显示。我认为它隐藏在小程序后面，但我无法修复它

```
public class Loader extends JApplet implements Serializable, ActionListener {

private static final long serialVersionUID = 7639088664641445302L;

private static final HashMap<String, String> THEME_LIST = new HashMap<String, String>();

private final String[] THEME_NAMES = { "Magma", "Emerald", "Raven", "Black Steel", "Challenger", "Sahara", "Silver", "Blue" };

public Properties params = new Properties();
public JFrame mainframe;
public JPanel mainpanel = new JPanel();

public static boolean useIsaac = false;

private static Robot robot;

private static final String HOME = System.getProperty("user.home") + "\\";

public static String THEME = "org.jvnet.substance.skin.SubstanceBusinessLookAndFeel";
public static String IP = "77.248.12.184";
public static boolean LOBBY_ENABLED;
public static boolean DISABLE_XTEA_CRASH = true;
public static boolean DISABLE_USELESS_PACKETS = true;
public static boolean DISABLE_RSA = false;

public static final int REVISION = 718;
public static int SUB_REVISION = 3;
public static Loader instance;

private JMenuItem forums, vote, donate;
private JCheckBoxMenuItem lastChecked;
private JMenu links, options, themes;
private JCheckBox lobbyCheckBox;
private JMenuBar menuBar;

public static void main(String[] args) throws Exception {
    UIManager.setLookAndFeel(THEME);
    JFrame.setDefaultLookAndFeelDecorated(true);
    JDialog.setDefaultLookAndFeelDecorated(true);
    JPopupMenu.setDefaultLightWeightPopupEnabled(true);
    // final GUI gui = instance = (GUI) loadSerializedFile();
    robot = new Robot();
    final Loader gui = new Loader();
    LOBBY_ENABLED = gui.lobbyCheckBox.isSelected();
    gui.mainframe.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent e) {
            storeSerializableClass(gui);
        }
    });
    gui.mainframe.setVisible(true);
    gui.startClient();
}

public void startClient() {
    try {
        client clnt = new client();
        clnt.supplyApplet(this);
        clnt.init();
        clnt.start();
    } catch (Exception exception) {
        exception.printStackTrace();
    }
}

public Loader() {
    params.put("separate_jvm", "true");
    params.put("boxbgcolor", "black");
    params.put("image", "http://www.runescape.com/img/game/splash2.gif");
    params.put("centerimage", "true");
    params.put("boxborder", "false");
    params.put("java_arguments", "-Xmx256m -Xss2m -Dsun.java2d.noddraw=true -XX:CompileThreshold=1500 -Xincgc -XX:+UseConcMarkSweepGC -XX:+UseParNewGC");
    params.put("27", "0");
    params.put("1", "0");
    params.put("16", "false");
    params.put("17", "false");
    params.put("21", "1"); // WORLD ID
    params.put("30", "false");
    params.put("20", IP);
    params.put("29", "");
    params.put("11", "true");
    params.put("25", "1378752098");
    params.put("28", "0");
    params.put("8", ".runescape.com");
    params.put("23", "false");
    params.put("32", "0");
    params.put("15", "wwGlrZHF5gKN6D3mDdihco3oPeYN2KFybL9hUUFqOvk");
    params.put("0", "IjGJjn4L3q5lRpOR9ClzZQ");
    params.put("2", "");
    params.put("4", "1"); // WORLD ID
    params.put("14", "");
    params.put("5", "8194");
    params.put("-1", "QlwePyRU5GcnAn1lr035ag");
    params.put("6", "0");
    params.put("24", "true,false,0,43,200,18,0,21,354,-15,Verdana,11,0xF4ECE9,candy_bar_middle.gif,candy_bar_back.gif,candy_bar_outline_left.gif,candy_bar_outline_right.gif,candy_bar_outline_top.gif,candy_bar_outline_bottom.gif,loadbar_body_left.gif,loadbar_body_right.gif,loadbar_body_fill.gif,6");
    params.put("3", "hAJWGrsaETglRjuwxMwnlA/d5W6EgYWx");
    params.put("12", "false");
    params.put("13", "0");
    params.put("26", "0");
    params.put("9", "77");
    params.put("22", "false");
    params.put("18", "false");
    params.put("33", "");
    params.put("haveie6", "false");

    mainframe = new JFrame("Matrix RSPS");
    mainframe.getContentPane().setLayout(new BorderLayout());
    mainpanel.setLayout(new BorderLayout());
    mainpanel.setPreferredSize(new Dimension(765, 503));
    mainframe.getContentPane().add(mainpanel, "Center");
    mainframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainpanel.add(this);

    menuBar = new JMenuBar();
    mainframe.setJMenuBar(menuBar);

    lobbyCheckBox = new JCheckBox("Enable Lobby");
    lobbyCheckBox.addActionListener(this);
    lobbyCheckBox.setHorizontalTextPosition(SwingConstants.LEFT);
    menuBar.add(lobbyCheckBox);

    links = new JMenu("Links");
    menuBar.add(links);

    forums = new JMenuItem("Forums");
    forums.addActionListener(this);
    links.add(forums);

    vote = new JMenuItem("Vote");
    vote.addActionListener(this);
    links.add(vote);

    donate = new JMenuItem("Donate");
    donate.addActionListener(this);
    links.add(donate);

    options = new JMenu("Options");
    menuBar.add(options);

    themes = new JMenu("Themes");
    options.add(themes);

    JCheckBoxMenuItem temp;
    for (int i = 0; i < THEME_NAMES.length; i++) {
        String theme = THEME_NAMES[i];
        temp = new JCheckBoxMenuItem(theme);
        temp.addActionListener(this);

        if (THEME.equalsIgnoreCase(THEME_LIST.get(theme))) {
            lastChecked = temp;
            temp.setSelected(true);
        }
        themes.add(temp);
    }
    mainframe.pack();
    mainframe.setVisible(true);
}

public String getParameter(String string) {
    return (String) params.get(string);
}

public URL getDocumentBase() {
    return getCodeBase();
}

public URL getCodeBase() {
    try {
        return new URL("http://" + IP);
    } catch (Exception exception) {
        exception.printStackTrace();
        return null;
    }
}

public static final Object loadSerializedFile() {
    try {
        File saveDirect = new File(HOME + "Saradomin");
        File saveFile = new File(HOME + "Saradomin\\Client Save.sv");
        if (!saveDirect.exists() || !saveFile.exists())
            return new Loader();
        ObjectInputStream in = new ObjectInputStream(new FileInputStream(saveFile));
        Object object = in.readObject();
        in.close();
        return object;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return new Loader();
}

public static final void storeSerializableClass(Serializable o) {
    try {
        File saveDirect = new File(HOME + "Saradomin");
        File saveFile = new File(HOME + "Saradomin\\Client Save.sv");
        if (!saveDirect.exists())
            saveDirect.mkdir();
        if (!saveFile.exists())
            saveFile.createNewFile();
        ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(saveFile));
        out.writeObject(o);
        out.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

static {
    THEME_LIST.put("Magma", "org.jvnet.substance.skin.SubstanceMagmaLookAndFeel");
    THEME_LIST.put("Emerald", "org.jvnet.substance.skin.SubstanceEmeraldDuskLookAndFeel");
    THEME_LIST.put("Black Steel", "org.jvnet.substance.skin.SubstanceBusinessBlackSteelLookAndFeel");
    THEME_LIST.put("Raven", "org.jvnet.substance.skin.SubstanceRavenGraphiteGlassLookAndFeel");
    THEME_LIST.put("Challenger", "org.jvnet.substance.skin.SubstanceChallengerDeepLookAndFeel");
    THEME_LIST.put("Sahara", "org.jvnet.substance.skin.SubstanceSaharaLookAndFeel");
    THEME_LIST.put("Silver", "org.jvnet.substance.skin.SubstanceBusinessLookAndFeel");
    THEME_LIST.put("Blue", "org.jvnet.substance.skin.SubstanceBusinessBlueSteelLookAndFeel");
}

private void openURL(String url) throws Exception {
    Desktop.getDesktop().browse(new URI(url));
}

public String getFormattedDate() {
    DateFormat dateFormat = new SimpleDateFormat("hh.mm.ss a");
    Date date = new Date();
    String formattedDate = dateFormat.format(date);
    return formattedDate;
}

private Rectangle getGameScreen() {
    Rectangle rect = this.getBounds();
    rect.setLocation(this.getLocationOnScreen());
    return rect;
}

private void confirmImage(BufferedImage createScreenCapture) {
    new ConfirmImage(createScreenCapture);
}

@Override
public void actionPerformed(ActionEvent e) {
    try {
        String command = e.getActionCommand();
        System.out.println(command);
        String selectedTheme = THEME_LIST.get(e.getActionCommand());
        if (selectedTheme != null) {
            if (lastChecked != null)
                lastChecked.setSelected(false);
            lastChecked = (JCheckBoxMenuItem) e.getSource();
            UIManager.setLookAndFeel(selectedTheme);
        } else if (command.equalsIgnoreCase("enable lobby")) {
            confirmImage(robot.createScreenCapture(getGameScreen()));//temp until screenshot is 100%
            //LOBBY_ENABLED = lobbyCheckBox.isSelected();
        } else if (command.equalsIgnoreCase("forums")) {
            openURL("http://www.saradom.in/");
        }
    } catch (Exception e1) {
        e1.printStackTrace();
    }
}

private class ConfirmImage implements ActionListener {

    private JFrame frame;
    private JButton btnSave, btnDiscard, btnUpload;
    private BufferedImage image;

    public ConfirmImage(BufferedImage image) {
        this.image = image;
        openFrame();
    }

    public void openFrame() {
        frame = new JFrame("Decide the fate of you screenshot.");
        Insets insets = frame.getInsets();
        frame.setSize(image.getWidth()+insets.left + insets.right, image.getHeight()+insets.top + insets.bottom);
        frame.setResizable(false);
        frame.addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                if (JOptionPane.showConfirmDialog(frame, "Are you sure you want to discard this image(you will not be able to get it back)?", "Confirm exit.", JOptionPane.OK_OPTION, 0, new ImageIcon("")) != 0) {
                    return;
                }
                frame.dispose();
            }

        });
        frame.setDefaultCloseOperation(0);

        JPanel contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        frame.setContentPane(contentPane);
        contentPane.setLayout(null);

        JLabel picLabel = new JLabel(new ImageIcon(image));
        picLabel.setBounds(0, 0, image.getWidth(), image.getHeight());
        contentPane.add(picLabel);

        JMenuBar menuBar = new JMenuBar();
        frame.setJMenuBar(menuBar);

        btnSave = new JButton("Save Image");
        menuBar.add(btnSave);
        btnSave.addActionListener(this);

        btnDiscard = new JButton("Discard Image");
        menuBar.add(btnDiscard);
        btnDiscard.addActionListener(this);

        btnUpload = new JButton("Upload Image");
        menuBar.add(btnUpload);
        btnUpload.addActionListener(this);

        JPanel panel = new JPanel();
        panel.setLayout(null);
        panel.setBounds(0, 0, 484, 362);
        contentPane.add(panel);

        frame.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        try {
            String action = e.getActionCommand();
            if (action.equalsIgnoreCase("save image")) {
                ImageIO.write(image, "PNG", new File(HOME + "Saradomin" + getFormattedDate() + ".png"));
                JOptionPane.showConfirmDialog(frame, "Screenshot saved to: " + HOME + "Saradomin", "Screenshot save completed.", JOptionPane.PLAIN_MESSAGE);
                frame.dispose();
            } else if (action.equalsIgnoreCase("discard image")) {
                if (JOptionPane.showConfirmDialog(frame, "Are you sure you want to discard this image(you will not be able to get it back)?", "Confirm exit.", JOptionPane.OK_OPTION, 0, new ImageIcon("")) != 0) {
                    return;
                }
                frame.dispose();
            } else if (action.equalsIgnoreCase("upload image")) {
                new ImageLink(Utils.upload(image));
            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }
    }
}
} 
```

编辑：我知道这是为什么造成的，你们不必继续在下面发布原因是什么，我正在寻求解决方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T09:42:14.053

我很警惕`frame.setContentPane(contentPane)`，它有效地*替换*了`contentPane`具有 (default) 的`FlowLayout`. 而是使用`frame.add(contentPane)`，它*转发*“`contentPane`必要时”。不同的名称也可能会有所帮助。另请参阅[*使用顶级容器*](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)和此[答案](https://stackoverflow.com/a/11769153/230513)。

# php - 使用多个条件更新 cakephp 中的查询

> ID：14515740
> 
> 赞同：2
> 
> 时间：2013-01-25T05:12:24.993
> 
> 标签：php, mysql, cakephp

我有一个像这样的查询：

```
Update `pools` set status='2' where `pid`='1' and `uid`='2' 
```

如何在 cakephp 中转换此查询？即，我想在查询中传递 AND 条件，该条件应该更新包含 pid='1' 和 uid='2' 的行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T05:15:17.450

`UPDATEALL`是你所需要的全部。

```
$this->Pool->updateAll(array('status'=>2), array('Pool.pid'=>1,'Pool.uid' => 2));
```

更多文档。

[**http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions**](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions)

如果您已经拥有要更新的行的 id，那么无需使用 update cakephp 就可以非常聪明地理解它。

例如。

如果你有`Pool.id`那一行记录。

```
$this->data['Pool']['id'] = $pool_id;
$this->data['Pool']['uid'] = $pool_uid;
$this->data['Pool']['other_data'] = $pool_otherData;
$this->Pool->save($this->data['Pool']);
```

上面会自动保存 $pool_id 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:23:35.223

我想这可能有用......试试......

```
$this->Pool->updateAll(array('status'=>2), array('AND' => array('Pool.pid'=>1,'Pool.uid' => 2))); 
```

# php - Facebook 登录到应用程序，显示誓言对话框中出现错误

> ID：14515741
> 
> 赞同：-1
> 
> 时间：2013-01-25T05:12:26.803
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-login

我正在开发一个应用程序，你聊天最多的朋友，所以我编写了以下代码来登录该应用程序，但是当我尝试点击登录 url 时，我在 facebook 誓言权限对话框页面中收到以下错误消息：
错误发生，请重试。
我写的代码在这里：

```
<?php
require("facebook.php");
require("settings.php");
$facebook=new Facebook(array('app_Id'=>$app_id,'secret'=>$secret,'cookie'=>true));
$user=$facebook->getUser();
if($user)
{
    var_dump($user);
}
else
{
$login_url = $facebook->getLoginUrl(array("scope"=>"read_mailbox"));
    echo "<a href='$login_url'>Login</a>";
echo $login_url;
}
?> 
```

我的测试应用程序的网址是：[www.cyberkiller.freeserver.me](http://www.cyberkiller.freeserver.me)应用程序 中的错误可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:13:41.780

请检查您的应用程序中给出的重定向和代码中给出的重定向 url，**它应该是相同的**

它说登录后的重定向网址

它将作为**站点 URL：**在您的应用编辑页面中给出

还要检查您的应用凭据

使用图形 API 很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:16:00.603

应该是 appID 而不是 app_ID：

不正确：

```
$facebook=new Facebook(array('app_Id'=>$app_id,'secret'=>$secret,'cookie'=>true)); 
```

正确的：

```
$facebook=new Facebook(array('appId'=>$app_id,'secret'=>$secret,'cookie'=>true)); 
```

# mysql - 具有多重关系的表的数据库设计

> ID：14515742
> 
> 赞同：1
> 
> 时间：2013-01-25T05:12:30.783
> 
> 标签：mysql, database, database-design, mysql-workbench, erd

我有五张桌子。它们如下：

1.  顾客类型
2.  顾客
3.  地区
4.  项目
5.  车

这是表之间关系的解释。对于第一个表 customer_type，数据/行包含一个客户类型，可以是个人、公司、政府等的值。

根据客户的类型，围绕该特定客户可以在另一张表上创建的内容有几个规则。规则如下：

*   如果客户类型是个人，则客户不能拥有（不允许创建）区域和项目。
*   如果客户类型是公司，客户不能没有（不允许创建）区域。
*   如果客户类型是政府，客户可以链接到地区、项目和汽车。

一个区域可以由多个项目组成。一个特定的项目可以分配多辆汽车。

但是，就像我之前解释的那样，如果客户类型是个人，则客户没有区域和项目。客户的关系直接与汽车。

如果客户类型是公司，首先客户与项目有关系，然后项目与汽车有关系。与政府类似，首先与区域有关系，然后区域与项目有关系，然后项目与汽车有关系。

```
+Customer Type -> Customer -> Region -> Project -> Car : table relation if customer type government.
+Customer Type -> Customer -> Project -> Car : table relation if customer type corporate.
+Customer Type -> Customer -> Car : table relation if customer type personal. 
```

如何解决这个问题，我的意思是为这种情况设计一个好的表格，比如什么。抱歉多余的解释

![数据库设计](../Images/2ab82e5d86c8cfee19a7a91c0b5ae228.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:33:59.453

这是以下汽车的解决方案。只需创建一些 1 到多个表。

```
CREATE TABLE Car
(
  CarId int PRIMARY KEY,
  ...
)    

CREATE TABLE CustomerCar
(
  CarId int PRIMARY KEY,
  CustomerId int,
  FOREIGN KEY fk1 (CarId) references Car(CarId)
 )

CREATE TABLE ProjectCar
(
  CarId int PRIMARY KEY,
  ProjectId int,
  FOREIGN KEY fk1 (CarId) references Car(CarId)     
 ) 
```

如果您需要一个汽车不能同时在 CustomerCar 和 ProjectCar 中的约束，您需要搜索在 MySQL 中应用 Check 约束的变通方法，因为我认为它不支持它们。Customer->Project 和 Region->Project 可以以相同的方式完成，Customer->Region 也可以。

# asp.net - 正则表达式限制零

> ID：14515745
> 
> 赞同：-2
> 
> 时间：2013-01-25T05:13:25.010
> 
> 标签：asp.net, regex

我想要一个只允许从 1 到 9999 的数字的正则表达式。它应该限制所有其他字符和所有字符。我试过了`^\d+$`。但它不工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T05:16:49.667

如果你坚持完全在正则表达式中做这将有点难看。我唯一能想到的是：（`^[1-9][0-9]{0,3}$`一个从 1 到 9 的数字，后跟从 0 到 9 的 0 到 3 个数字）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:16:14.740

你真的不需要正则表达式，

所以非正则表达式方式

```
 string myNum = "5000";

        int num;

        if (Int32.TryParse(myNum, out num) && (num >= 1 && num <= 9999))
        {
            //condition validated
        } 
```

和

正则表达式方式

```
bool foundMatch = Regex.IsMatch(myNum, "^(?:[1-9][0-9]{0,3})$"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T05:17:36.543

你想使用一个字符类。

```
^[1-9][0-9]{,3}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:06:02.770

您可以使用

```
^0*(?!\d{5,}$)(?!0+$)\d+$ 
```

但最好将字符串解析为 int 然后比较值..

遵循**KISS**原则

# jquery - $(window).load 等效于 Wordpress 中的高级 Ajax 页面加载器

> ID：14515753
> 
> 赞同：0
> 
> 时间：2013-01-25T05:14:07.070
> 
> 标签：jquery, ajax, wordpress

当页面加载时，我有一个小脚本可以在单个帖子中为我的内容设置动画，它从右侧滑动到左侧。当我在输入地址后直接进入带有帖子的特定页面时，一切正常......但是，当我使用高级 AJAX 页面加载器[http://wordpress.org/extend/plugins/advanced-ajax-进入此页面时page-loader/](http://wordpress.org/extend/plugins/advanced-ajax-page-loader/)然后它不工作。我猜问题出在“$(window).load”中，有什么等价的东西可以改变它吗？

有我的脚本：

```
<script type="text/javascript">
   $(window).load(function() {
     $('#main-content-slide').animate({'left':'0%'}, 1500);
   });
</script> 
```

对不起我的英语不好，希望你能理解我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:19:19.950

如果页面是通过 Ajax 加载的，那么在我看来，您想要制作动画的内容只会在整个`$(window).load()`事件发生后才会加载。窗口首先加载，然后 Ajax 拉取内容，对吗？

因此，您需要注意您的内容在哪里，并等待其可见和就地。所以也许是这样的：

```
<script type="text/javascript">
   $(window).load(function() {
     if ($('#main-content-slide').length > 0) {
       $('#main-content-slide').animate({'left':'0%'}, 1500);
     }
   });
</script> 
```

编辑：另一个想法是将代码直接放在正在呈现的元素下，这样在代码运行时始终确保“#main-content-slide”元素就位。

祝你好运！

# javascript - 使用 setTimeout 和 setInterval

> ID：14515756
> 
> 赞同：1
> 
> 时间：2013-01-25T05:14:21.063
> 
> 标签：javascript, jquery, html

当我最初加载页面时，我需要在 30 秒内调用一个函数。此后应在 60 秒内自动调用它。

我所做的是，

```
 <html>
    <head>
    </head>
    <body>
    <script>
        setTimeout('ajaxload()',30000);
        setInterval('ajaxload()',60000);
        function ajaxload()
        {
         //code
        }
    </script>

    </body>
    </html> 
```

但是我认为该函数在不规则的时间被调用。我做得对吗？如有错误欢迎分享....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T05:18:10.943

不要传递字符串 .. 传递函数名称/声明本身：

```
setTimeout(function () {
   ajaxload();
   setInterval(ajaxload, 60000);
}, 30000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T05:18:26.643

您使用它有点不正确。如果第一个是 30 秒，然后是 60 秒，你应该按顺序进行。

```
setTimeout(startAjaxLoad,30000);

function ajaxload()
{
     //code
}

function startAjaxLoad() 
{
    ajaxload();
    setInterval(ajaxload,60000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:19:37.030

改成

```
setTimeout(function(){ajaxload()},30000);
setInterval(function(){ajaxload()},60000);
function ajaxload()
        {
         //code
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:34:57.403

如果您要连续调用 AJAX 方法，我会考虑一些更整洁的方法，方法是先等待它完成，然后再简单地使用`setTimeout()`。

```
function ajaxload()
{
    $.ajax({

        // AJAX Settings.
        // ...

        complete: function()
        {
            // Call .ajaxload() 60 seconds from the completion of this request.
            setTimeout(ajaxload, 60000);
        }

    });
}

// Initial call.
setTimeout(ajaxload, 30000); 
```

# java - mongodb (java) 按名称包括 id 字段

> ID：14515759
> 
> 赞同：0
> 
> 时间：2013-01-25T05:14:44.753
> 
> 标签：java, mongodb, grouping, projection

我正在关注java中的mongo db聚合，示例显示了下面的管道。我要做的是添加一个名为的附加字段`department`，其中包含部门值（因此在这种情况下，该字段将具有相同的值。我尝试在with`_id`中添加另一个字段，但这不起作用。`groupFields``new BasicDBObject("department",$department)`

```
// create our pipeline operations, first with the $match
DBObject match = new BasicDBObject("$match", new BasicDBObject("type", "airfare") );

// build the $projection operation
DBObject fields = new BasicDBObject("department", 1);
fields.put("amount", 1);
fields.put("_id", 0);
DBObject project = new BasicDBObject("$project", fields );

// Now the $group operation
DBObject groupFields = new BasicDBObject( "_id", "$department");
groupFields.put("average", new BasicDBObject( "$avg", "$amount"));
DBObject group = new BasicDBObject("$group", groupFields);

// run aggregation
AggregationOutput output = collection.aggregate( match, project, group ); 
```

输出为

```
{"_id" : "Human Resources" , "average" : 74.91735537190083} , 
{"_id" : "Sales" , "average" : 72.30275229357798} ,
{"_id" : "Engineering" , "average" : 74.1} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:28:50.197

尝试切换顺序：

```
AggregationOutput output = collection.aggregate( match, group, project); 
```

或者您可以在组后添加另一个项目。如果您使用`$project`before `$group`，它只是将值传递给组运算符，而不是直接传递给输出。

# iphone - 如何将 .app 文件安装到未注册的 iOS 设备？

> ID：14515763
> 
> 赞同：1
> 
> 时间：2013-01-25T05:15:19.323
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipod-touch

我们购买了新的 iPod touch，我没有获得此设备的临时证书，我正在等待批准并添加此设备，我有我的应用程序的 .app 我想将其加载到我的新设备中。可能吗？我应该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:17:02.300

除非您获得证书，否则您将无法安装，除非您越狱您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:48:37.293

**不，你不能**得到你的证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:17:40.520

不，这是不可能的。您必须将配置文件与您的设备 UDID 添加到其中。除非你有企业发行证书。或者，您的设备正在越狱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T10:47:34.123

这仅适用于越狱的 iOS 设备。但是，如果您想将其安装在未越狱的设备中，则需要该设备的源证书或有效的临时证书。

# 8051 - SDCC 上的编译器警告：指针目标丢失 const 限定符

> ID：14515770
> 
> 赞同：1
> 
> 时间：2013-01-25T05:16:18.257
> 
> 标签：8051, sdcc

我收到编译器警告，代码如下：

```
uint8 executeSpecialCommand(const char *string)
{
    char *parameters;           
    parameters = strtok(string, "=");

    if (parameters)
     {
         usbSendf("\nProcessing Parameters...");       
         while(parameters != NULL)
         {
             parameters = strtok(NULL, " ");
             usbSendf("\n%s", parameters);
         }
         return 1;
     }
    else
        return 0;   
} 
```

错误指向第 3 行，我认为这是因为“=”。strtok 在我使用相同的代码的其他部分以某种方式期待 const char* 并且我没有收到任何警告。这里有帮助教育我的想法吗？

**更新** 我得到的错误是：

> 警告 196：指针目标丢失 const 限定符

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:27:16.943

该`strtok`函数修改其第一个参数。从手册页：

> BUGS 使用这些功能时要小心。如果您确实使用它们，请注意：
> 
> ```
>  * These functions modify their first argument.
> 
>    * These functions cannot be used on constant strings. 
> ```

这意味着您可以将 a`const char*`作为第一个参数传递，就像使用名为 的变量一样`string`。

`strtok`通过在每个分隔符处在传递的字符串中插入一个 NULL 来工作，这允许它返回每个令牌而不为返回的字符串分配内存。我怀疑 SDCC 是否支持可重入版本`strtok_r`，但如果它存在，则可以使用它。

或者，在解析之前创建自己的传入字符串副本。如果您知道最大传入字符串大小，则可以在解析函数顶部的堆栈上分配字符串副本。

# coded-ui-tests - 在没有子窗口名称或 Id 的情况下识别 Web 应用程序的子窗口

> ID：14515771
> 
> 赞同：0
> 
> 时间：2013-01-25T05:16:24.647
> 
> 标签：coded-ui-tests

我正在自动化一个 Web 应用程序，在该应用程序中，单击超链接会打开一个没有 url 选项卡的窗口。子窗口包含一些控件，其操作需要自动化。我没有子窗口 ID 或名称。请帮忙，我被这个问题阻止了。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:52:42.087

假设您有一个`UITestControl`窗口对象或相关子控件，则该`UITestControl.GetChildren`方法将返回所有子控件。您可以轻松地遍历孩子，或者可能通过他们进行递归拖网搜索以找到您需要的控件。请参阅[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.uitestcontrol.getchildren.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.uitestcontrol.getchildren.aspx)

# java - 字段类型检查注释

> ID：14515779
> 
> 赞同：0
> 
> 时间：2013-01-25T05:16:53.670
> 
> 标签：java, annotations

我正在处理注释，遇到以下代码时需要出现编译器时间错误

```
public void myMethod(@myAnn Object[] ob) {
.
.
} 
```

以下代码不应引发编译器错误

```
public void myMethod(@myAnn Object ob) {
.
.
} 
```

我想要的类型应该是`Object`而不是`Object[]`

我相信这是一种类型检查。有没有办法我可以实现这一点..阅读其他一些帖子和 JSR 我才知道这是不允许注释的东西（我可能错了，因此我发布了这个 q） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:55:05.677

检查注释类型并确保它是`Object.class`

像下面的代码

```
if (annotation.annotationType().equals(java.lang.Object.class)){} 
```

# java - 如何将 JSON 字符串数组转换为 Json 数组列表

> ID：14515785
> 
> 赞同：2
> 
> 时间：2013-01-25T05:17:19.173
> 
> 标签：java, json, json-lib

我有 Json 字符串数组，看起来像这样，

```
{ {name:"214",value:true,Id:0},
  {name:"215",value:true,Id:0},
  {name:"216",value:true,Id:0}
} 
```

并希望将此字符串转换为 Json 数组对象并迭代列表以读取每个对象的值。然后将值设置为相应的 dto 并保存。但我没有找到任何将普通 JSON 数组字符串转换为 json 数组对象的好方法。

我没有使用 google json ，我希望它在普通 json 本身中完成。请帮助我

和java类我想要这样的东西

```
JSONObject[] jsonObjectList = String after convert();

    for (JSONObject jsonObject : jsonObjectList) {
        System.out.println(" name is --"+jsonObject.get("name"));
        System.out.println(" value is ---"+jsonObject.get("value"));
        System.out.println(" id is ----"+jsonObject.get("id"));

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:31:07.187

这是解析 json 对象的示例。使用[JSON 库](https://github.com/douglascrockford/JSON-java)。

```
import net.sf.json.JSONArray;
import net.sf.json.JSONException;
import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;
public class TestJson {
    public static void parseProfilesJson(String jsonStr) {
        try {
            JSONArray nameArray = (JSONArray) JSONSerializer.toJSON(jsonStr);
            System.out.println(nameArray.size());
            for(Object js : nameArray){
                JSONObject json = (JSONObject) js;
                System.out.println(json.get("date"));
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
    public static void main(String[] args) {
        String s = "[{\"date\":\"2012-04-23\",\"activity\":\"gym\"},{\"date\":\"2012-04-24\",\"activity\":\"walking\"}]";
        parseProfilesJson(s);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:23:56.063

使用这个：假设你`JSONArray`是`net.sf.json.JSONArray`

```
String str = "[ {name:\"214\",value:true,Id:0},{name:\"215\",value:true,Id:0},{name:\"216\",value:true,Id:0}]";
JSONArray array = JSONArray.fromObject(str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T06:20:09.590

我只是结合了一些答案，在这里找到了正确的解决方案是代码..

```
String str = "[ {name:\"214\",value:true,Id:1},{name:\"215\",value:false,Id:2},{name:\"216\",value:true,Id:3}]";
    JSONArray array = JSONArray.fromObject(str);
    for (Object object : array) {
        JSONObject jsonStr = (JSONObject)JSONSerializer.toJSON(object);
          System.out.println(" name is --"+jsonStr.get("name"));
            System.out.println(" value is ---"+jsonStr.get("value"));
            System.out.println(" id is ----"+jsonStr.get("Id"));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:26:52.310

您可以执行以下操作，

```
String str = "[ {name:\"214\",value:true,Id:0},{name:\"215\",value:true,Id:0},{name:\"216\",value:true,Id:0}]";
JsonParser parser = new JsonParser();
JsonElement element = parser.parse(str);
JsonArray jasonArray = element.getAsJsonArray(); 
```

如果您正在使用`import com.google.gson.*;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-08T21:02:41.327

如果你有 DTO 类，映射可以通过反射自动完成：

```
import net.sf.json.JSONArray;

List<DTO> list = (List<DTO>) JSONArray.toList(JSONArray.fromString(str), DTO.class); 
```

# mysql - 意外的 WITH ROLLUP 行为

> ID：14515786
> 
> 赞同：0
> 
> 时间：2013-01-25T05:17:29.007
> 
> 标签：mysql

我对特定查询执行 WITH ROLLUP 并将其作为结果返回：

```
sex       avgAge
Female    54
Male      49
Male      52 
```

我的问题是......为什么第三列有男性？它不应该有NULL吗？

查询：

```
SELECT sex, COUNT(1) AS avgAge
FROM people
GROUP BY IFNULL(sex,'')
WITH ROLLUP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:03:03.043

问题很可能是`GROUP BY`子句中的表达式与 SELECT 列表中的列名不匹配。

摘自[http://dev.mysql.com/doc/refman/5.5/en/group-by-modifiers.html](http://dev.mysql.com/doc/refman/5.5/en/group-by-modifiers.html)

<剪辑>

每个超聚合行中的 NULL 指示符是在将行发送到客户端时生成的。服务器查看在 GROUP BY 子句中命名的列，紧随最左边的已更改值的列。对于结果集中具有与这些名称中的任何一个词法匹配的名称的任何列，其值设置为 NULL。（如果您指定按列号对列进行分组，则服务器会按编号确定将哪些列设置为 NULL。）

</snip>

因此，简短的回答是，GROUP BY 子句中的表达式与结果集中列的名称之间没有“词法匹配”，因此未设置超聚合行中该列的值为空。

* * *

我们还注意到，您提供的查询不是产生该结果集的查询。我们注意到别名`avgAge`没有分配给第二列，并且汇总行中的值似乎是`AVG`聚合的结果，而不是`COUNT`聚合的结果。对于`COUNT`聚合，我们预计汇总值为 103。

* * *

要在该汇总（“超级聚合”）行的第一列中获得 NULL，您需要以下内容：

```
SELECT t.sex, COUNT(1) AS cnt
  FROM people t
 GROUP BY t.sex
  WITH ROLLUP 
```

如果要处理空字符串之类的 NULL 值，则如下所示：

```
SELECT IFNULL(t.sex,'') AS sex, COUNT(1) AS cnt
  FROM people t
 GROUP BY sex
  WITH ROLLUP 
```

请注意，GROUP BY 中的名称引用分配给 SELECT 列表中的表达式的别名，而不是表中的列。

# php - 带有 php 安全漏洞的 css 压缩

> ID：14515793
> 
> 赞同：1
> 
> 时间：2013-01-25T05:17:49.437
> 
> 标签：php, security, code-access-security

我得到了一个脚本，它使用提供给它的查询并分解它们调用目录中的文件。这里的脚本

```
<?php
header("Content-type: text/css");

$safehash = sha1(binary-style_1afn34jdd2);

$css = '';
$root = 'css/'; //directory where the css lives
$files = explode(',',$_SERVER['QUERY_STRING']);
if(sizeof($files))
{
  foreach($files as $file)
  {
    $css.= (is_file($root.$file.'.css') ? file_get_contents($root.$file.'.css') : '');
  }
}
function compress($css){
  // Remove comments
  $css = preg_replace('!/\*[^*]*\*+([^/][^*]*\*+)*/!', '', $css);
  // Remove spaces before and after symbols
  $css = preg_replace('/(\s(?=\W))|((?<=\W)\s)/', '', $css);
  // Remove remaining whitespace
  $css = str_replace(array("\r\n","\r","\n","\t",'  ','    ','    '), '', $css);
  return $css;
}

echo compress($css);
?> 
```

问题在于，有些人可能会通过在脚本中添加越来越多的查询（例如 style.php?sheet,sheet,sheet,sheet.....ect保护此代码的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:21:30.973

您可以简单地限制查询字符串的大小：

```
if(mb_strlen($_SERVER['QUERY_STRING'])>10) {
    header('HTTP/1.0 413 Request Entity Too Large');
    exit;
} 
```

# linux - Shell脚本从脚本输入密码

> ID：14515794
> 
> 赞同：2
> 
> 时间：2013-01-25T05:17:54.880
> 
> 标签：linux, shell, ssh, sftp

我正在尝试编写一个 shell 脚本来将文件传输到运行[超简单 sftp 服务器](http://www.geekality.net/2011/05/13/ultra-simple-sftp-server-for-windows/)的远程 Windows 机器。它是来自 coreftp 的轻量级版本。所以我没有使用公钥身份验证的选项。

从 Linux 端看，它是非英特尔平台的精简版，所以如果我想使用“expect”，我无法安装 expect/tcl/tk。这是出于测试目的，我想从 Shell 脚本输入密码。有没有可用的方法？

```
#!/bin/sh
HOST='10.x.x.x'
USER='user'
PASSWD='passwd'

sftp $USER@$HOST 
```

不使用任何工具就不能从 shellscript 输入密码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T08:48:30.570

有几种选择：

1.  您可以使用[sshpass](http://linux.die.net/man/1/sshpass)自动执行密码验证。

2.  Putty 包 ( [psftp](http://the.earth.li/~sgtatham/putty/0.52/htmldoc/Chapter6.html) ) 中的 SFTP 客户端接受来自命令行的密码（尽管这样做并不完全安全）。

3.  然后，您可以使用一些支持 SFTP 的脚本语言。如果你走那条路，不要只使用一些类似期望的模块来自动化密码认证，而是使用一些自己实现 SFTP 协议的模块，如果你想执行错误检查，这将使你更容易喜欢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T08:09:05.730

[本页](http://rachid.koucha.free.fr/tech_corner/pty_pdip.html)包含一个简单的 C 语言演示程序，用于创建伪终端，可以与需要密码的应用程序（更准确地说，需要终端的应用程序）交互，如 ftp、sftp 客户端等。同一页的参考会话也提到[lpty](http://www.tset.de/lpty/)，这是另一个更完整的实用程序，可用于在伪终端上运行程序。

简而言之，您需要一个可以处理伪终端的程序来完成您的任务。无论是 expect，perl 和 expect 模块，上面提到的直接 C 编程，还是 lpty，另一个伪终端程序。或者，如果您的 Linux 内核支持 /dev/ptmx 和 /dev/pty/，您可以通过打开和访问设备文件来创建伪终端（可能来自 shell 脚本，但我不确定）。我怀疑您在 ARM 上的简单 Linux 是否支持...

移植 lpty 应该比预期的要容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:55:48.440

你可以使用期望..

```
expect -c 'spawn sftp root@your-domain.com; expect password; send "your-password\n"; interact' 
```

# android - jQuery Ajax 和使用 appcache 时的 Android 浏览器问题

> ID：14515801
> 
> 赞同：6
> 
> 时间：2013-01-25T05:18:23.687
> 
> 标签：android, jquery, browser, html5-appcache

我们在 Android 4.0、4.1 和 4.2 上的内置浏览器存在问题（我们没有任何更低的版本可供测试）。问题是 ajax 调用将在第一次加载时完美运行，您可以根据需要多次按下运行 Ajax 按钮，它会很好。您可以断开与互联网的连接，它会正常工作。但是，如果您退出（完全，确保它不只是在后台运行）浏览器然后重新启动它，它将在加载和按下按钮时失败。不管你是在线还是离线。从 ajax 调用返回的错误是状态 = 0 和 readyState = 0 的“错误”。
当它成功时，您会收到一条消息说“从 Ajax 调用响应”，状态 = 200 和 readyState = 4。

该代码适用于我们在 Android Chrome、Firefox 和 Opera 上测试过的所有其他浏览器。在 IOS 5 和 6 上它可以工作，我们可以找到每个桌面浏览器。是否有我遗漏的东西或者我们在内置浏览器中发现了一个错误。对此的任何帮助将不胜感激，特别是如果它只是我所做的一些愚蠢的事情。

我们已经创建了一个测试脚本来很好地演示这个问题，我已将它附加到此消息的底部。

谢谢

蒂姆

测试.php

```
<?php     
function displayPage() { 
?>
<!DOCTYPE html>
<html manifest="test.manifest" debug="true">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" >
        <title>test</title>
        <script type="text/javascript" src="jquery-1.9.0.min.js"></script>
        <script type="text/javascript">
            function runAjaxGet() {
                var XMLHttpRequest = $.ajax({
                    url: "test.php",
                    dataType: "json",
                    data: "test=test",
                    traditional: "true",
                    success: function( responseData ) {
                        alert('good\n responseData: '+responseData+ '\n res:' + XMLHttpRequest.responseText +'\n readyState: '+ XMLHttpRequest.readyState + '\n Status: '+XMLHttpRequest.status );
                        console.log(XMLHttpRequest);
                   },
                   error: function (xhr, ajaxOptions, thrownError, responseData) {  
                       alert('bad\n responseData: '+responseData+ '\n res:' + XMLHttpRequest.responseText +'\n readyState: '+ XMLHttpRequest.readyState + '\n Status: '+XMLHttpRequest.status);
                       console.log(XMLHttpRequest);
                   }
                });
            }
            $(document).ready(function() { 
                runAjaxGet();
            });

        </script>
    </head>
    <body>
        <button Name="Run Ajax" onclick="runAjaxGet();">Run Ajax</button>
    </body>
</html>
<?php
}

function processRequests() {
    header("Content-Type: application/json; charset=UTF-8" );
    echo (json_encode("respose from Ajax Call"));
}

date_default_timezone_set ( "UTC" );

if (isset($_REQUEST['test'])) {
    $which = $_REQUEST['test'];
} else {
    $which = '';
}

switch ($which) {
    case "test":
        processRequests();
        break;

    default :
        displayPage();
        break;
}
?> 
```

测试清单

```
 CACHE MANIFEST
 test.php
 jquery-1.9.0.min.js
 test.php?test=test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T05:19:24.313

我遇到了同样的问题，并确定从缓存中检索时，0 表示成功。这可能是因为没有涉及实际的 http 请求，因为请求完全在本地解析。

应用缓存清单文件：

```
CACHE MANIFEST

CACHE:
/config 
```

Javascript：

```
var request = new XMLHttpRequest();
request.open('GET', '/config', false); // async=false is ok because this file will always come from AppCache
request.send(null);

// Older versions of android return 0 when ajax request retrieved from appcache
if (request.status == 200 || request.status == 0) {
  return JSON.parse(request.responseText);
} else {
  console.log("ERROR: config not retrievable");
  throw "Attempt to retrieve config return http status " + request.status;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:37:57.110

只需添加带星号的 NETWORK 部分即可

```
 CACHE MANIFEST
 test.php
 jquery-1.9.0.min.js
 test.php?test=test
 NETWORK:
 * 
```

# mapreduce - 使用 mapreduce 将输出写入不同文件夹的任何风险/注意事项

> ID：14515805
> 
> 赞同：1
> 
> 时间：2013-01-25T05:18:45.403
> 
> 标签：mapreduce

目标是使用一个 reduce 将输出写入不同的文件夹（不同的路径）。我使用旧的 mapreduce api，我对 MultipleOutputs 做了一些修改（放开限制），它可以工作。但是我使用的输出格式扩展了 FileOutputFormat，其中 FileOutputCommitter 由 FileOutputFormat 引用。而且我发现只有一个文件夹中会有一个 _success 文件。会有问题吗？

而且还有一个空文件part-00000，不知道为什么会生成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:55:08.407

_SUCCESS 仅在作业完成后写入一次。检查作业是否完成很有用。我认为这样做没有任何风险。您应该知道它仅在作业完成后创建，并且如果您正在使用该文件，您应该知道在哪里查找该文件。

关于部分文件，请查看 [map reduce 输出文件：part-r-* 和 part-*](https://stackoverflow.com/questions/10924852/map-reduce-output-files-part-r-and-part)

# jquery - 类型错误：未定义

> ID：14515806
> 
> 赞同：2
> 
> 时间：2013-01-25T05:18:54.927
> 
> 标签：jquery, html

我正在尝试设置`Add Question`按钮功能，但我的开始很糟糕。我收到一条错误消息：

类型错误：form.questionText 未定义

我究竟做错了什么？

```
 <script type="text/javascript">
        function insertQuestion(form) {

            var questionarea = (form.questionText.length) ? form.questionText[0] : form.questionText;

        }

    </script>

<table id="question">
<tr>
    <td>Question:</td> 
    <td>
        <textarea class="questionTextArea" id="mainTextarea" rows="5" cols="40" name="questionText"></textarea>
    </td>
</tr>
</table>

    <form id="QandA" action="insertQuestion.php" method="post">
        <table id="questionBtn" align="center">
            <tr>
                <th>
                    <input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question"
                    onClick="insertQuestion(this.form)" />
                </th>
            </tr>
        </table>
        </div>
        <hr/>
        <table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0">
            <thead>
                <tr>
                    <th width="13%" class="question">Question</th>
                </tr>
            </thead>
        </table>
        <div id="qandatbl_onthefly_container">
            <table id="qandatbl_onthefly" align="center" cellpadding="0" cellspacing="0"
            border="0">
                <tbody></tbody>
            </table>
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:22:37.017

你还没有定义`questionText`，所以它会给出`undefined`错误

更新 1：然后您必须在`form`提交按钮所在的位置添加您的 questionText：

```
<textarea class="questionTextArea" id="mainTextarea" rows="5" cols="40" name="questionText"></textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:28:20.947

该`questionText`元素不在`<form>`. 把它移到表格里面！更好的是，由于您使用的是 jQuery，因此有一种更简洁的方法可以做到这一点。摆脱您拥有的 JS 并*在*html 之后添加：

```
$("#addQuestionBtn").on('click', function (e) {
   var questionarea = $("[name=questionText]").val();

   e.preventDefault();
}); 
```

# android - 如何将 java 对象转换为 json 对象并作为 android 中的参数发送到 asmx Web 服务？

> ID：14515807
> 
> 赞同：0
> 
> 时间：2013-01-25T05:19:10.527
> 
> 标签：android, json, web-services, asmx, gson

我正在从我的 android 应用程序调用 asmx Web 服务中的 Web 方法，并且该方法接受一个 json 对象。当我调试我的应用程序时，它给了我以下异常“无法序列化 1001.10”（它是我的类变量值之一）。下面我通过硬编码值发送数据（用于测试目的）

```
 Item itm=new Item();
        ItemType itype=new ItemType();

    itm.Description="Good Product";
    itm.BarcodeNumber="1234";
    itm.Depreciation=(float) 100.56;
    itm.AgencyId=1;
    itm.ItemCode="Android";
    itm.ItemValue=(float) 9999.99;
    itm.PurDate=new Date(0);   //Date I am sending here...
    itm.PurValue=(float) 1001.10;

    itype.Itemname="Android App";
    itype.Make="Android Developers";
    itype.Model="2013 Model";
    itype.Year=new Date(0);

    itm.iType=itype; 
```

在 itm.PurValue 之后出现“Cannont serialize 1001.01”异常（调试我的应用程序时捕获异常）

我认为这是由于日期格式，但由于我的 Web 服务接受 json 对象，我认为错误可能是我发送的对象的格式。

要将 java 对象转换为 json 对象，我已将 gson.jar 文件添加到我的 java 构建路径 - -libraries 中。

并使用 Gson 将 java 对象转换为 json 字符串并将该 json 字符串传递给 Web 服务。

当我运行该应用程序时，它中止并显示“不幸的是，我的应用程序停止工作”

这是我用于将 java 对象转换为 json 字符串的代码。

```
 Gson gson = new Gson();  //Exception Occurred at this point when control comes here it is giving as Invocation Target Exception 
    String json=gson.toJson(itm);

        p.setName("ThisItem");
    p.setValue(json);
    p.setType(String.class);
    request.addProperty(p); 
```

其余代码很常见......但作为参考，我也在此处粘贴该代码。

```
 SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER12);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidTSE=new HttpTransportSE(URL);

        try
        {
            androidTSE.call(Soap_Action, envelope);
            SoapObject response=(SoapObject) envelope.getResponse();
            return response.toString();
        }
        catch(Exception ex)
        {
            return ex.toString();
        } 
```

当我使用上述 gson 代码调试我的应用程序时，我收到一个异常调用目标异常。

可能是什么问题？是我在对象中使用的日期格式还是将 java 对象转换为 gson 对象的格式？

最后我想说我想向我的 asmx Web 服务发送一个 json 对象。我怎么解决这个问题。请任何人都可以分享任何想法。我为这个错误奋斗了 7 个小时。

在此先感谢 Ganesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T15:52:13.633

我知道我为时已晚，但对于其他寻找类似答案的人来说：

当我试图将一个字符发送到我的肥皂服务时，我遇到了这个错误。问题出在这段代码上：

```
p.setName("ThisItem");
p.setValue(json);
p.setType(String.class);
request.addProperty(p); 
```

你需要做的是解决它：

```
request.addAttribute("This Item",json); 
```

是的，这行得通！

# java - Android 没有找到 JSONValue 类

> ID：14515822
> 
> 赞同：2
> 
> 时间：2013-01-25T05:21:03.000
> 
> 标签：java, android, maven, jar

我对 android 很陌生，当我尝试运行我的 android 项目时出现此错误。

```
java.lang.NoClassDefFoundError: org.json.simple.JSONValue
E/AndroidRuntime(  502):    at in.juspay.PaymentService.initOrder(PaymentService.java:165)
E/AndroidRuntime(  502):    at com.example.HelloMobile.LoginActivity$1.onClick(LoginActivity.java:124)
E/AndroidRuntime(  502):    at android.view.View.performClick(View.java:2485)
E/AndroidRuntime(  502):    at android.view.View$PerformClick.run(View.java:9080)
E/AndroidRuntime(  502):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(  502):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(  502):    at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  502):    at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(  502):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  502):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(  502):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(  502):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(  502):    at dalvik.system.NativeStart.main(Native Method) 
```

我有由我编写并使用 maven 工具构建的 jar 文件。当我做 ：

```
mvn clean install 
```

那里没有错误并且一切正常文件，但是当我将 jar 添加到我的 android 项目并尝试运行时，我收到了这个错误。

`pom.xml`这是我从文件中获取的 Maven 依赖项：

```
<dependencies>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
    </dependency>

    <dependency>
        <groupId>com.googlecode.json-simple</groupId>
        <artifactId>json-simple</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>commons-codec</groupId>
        <artifactId>commons-codec</artifactId>
        <version>1.7</version>
    </dependency>

    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-plugin-api</artifactId>
        <version>3.0.4</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <dependency>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.4.3</version>
    </dependency>

</dependencies> 
```

不知道为什么会发生错误。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:14:14.050

您在“mvn clean install”之后获得的 jar 仅包含您项目中的类。这些依赖 jar 中的类不包括在内，因此您得到了 NoClassDefFoundError 异常。

如果你真的需要构建一个包含所有依赖项的胖 jar，我会建议使用 maven-assembly-plugin。以下是一个工作示例（将其放在您的 pom.xml 中）：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <appendAssemblyId>false</appendAssemblyId>
            </configuration>
            <!-- This will bind assembly:make-assembly to the package phase -->
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

获取jar（在目标目录中）后，您可以运行“jar -tf theJarFile”来检查该类是否包含在内。

# java - 应用程序列表中的重复图标

> ID：14515826
> 
> 赞同：1
> 
> 时间：2013-01-25T05:21:34.727
> 
> 标签：java, android

我得到了应用程序列表，但我得到了这样的列表重复图标：

![在此处输入图像描述](../Images/daa3b87b08bc18a7ea2db12a81588e4f.png)

第一次一切都很好，几次后开始复制图标:(

代码：

```
@Override
protected ArrayList<Order> doInBackground(String... params) {

    PackageManager pm = getPackageManager();
    appsList = new ArrayList<Order>();          
    Drawable img = null;
    Intent intent;

    try {
        List<PackageInfo> packages = pm.getInstalledPackages(0);

        for (int i = 0; i < packages.size(); i++) {
            PackageInfo pi = packages.get(i);
            ApplicationInfo ai = pi.applicationInfo;

            intent = pm.getLaunchIntentForPackage(pi.packageName);
            if(intent != null) {
                img = ai.loadIcon(pm);
            }                   

            Order o = new Order();
            o.setTextName(ai.loadLabel(pm).toString());
            o.setTextPackageName(pi.packageName);
            o.setTextVersion(pi.versionName);
            o.setTextVersionCode(pi.versionCode);
            o.setImage(img);
            appsList.add(o);

        };
    } catch (Exception e) {
        e.printStackTrace();
    }
    return appsList;
} 
```

自定义适配器：

```
public class myAdapter extends ArrayAdapter<Order> {

private LayoutInflater lInflater;
private ArrayList<Order> data;
private Order o;
Context ctx;
Drawable noImage;

public myAdapter(Context c, int appsList, ArrayList<Order> data) {
    super(c, appsList, data);
    lInflater = LayoutInflater.from(c);
    this.data = data;
    ctx = c;
    noImage = c.getResources().getDrawable(
            R.drawable.ic_launcher);
}

public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;

    if (convertView == null) {
        convertView = lInflater.inflate(R.layout.custom_list, null);
        holder = new ViewHolder();
        holder.textName = (TextView) convertView
                .findViewById(R.id.textName);
        holder.textPackageName = (TextView) convertView
                .findViewById(R.id.textPackageName);
        holder.textVersion = (TextView) convertView
                .findViewById(R.id.textVersion);
        holder.textVersionCode = (TextView) convertView
                .findViewById(R.id.textVersionCode);
        holder.image = (ImageView) convertView.findViewById(R.id.imageLogo);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    o = data.get(position);
    holder.image.setTag(o);

    if (o.getImage() == null) {
        holder.image.setImageDrawable(noImage);
    } else {
        holder.image.setImageDrawable(o.getImage());
    }
    holder.textName.setText(o.getTextName());
    holder.textName.setTextColor(Color.parseColor("#FFFFFF"));
    holder.textPackageName.setText(o.getTextPackageName());
    holder.textPackageName.setTextColor(Color.parseColor("#FFFFFF"));
    holder.textVersion.setText("v." + o.gettTextVersion() + "  ");
    holder.textVersion.setTextColor(Color.parseColor("#2E64FE"));
    holder.textVersionCode
            .setText("v.c." + Integer.toString(o.getTextVersionCode()));
    holder.textVersionCode.setTextColor(Color.parseColor("#01DFD7"));

    holder.textName.setOnClickListener(new OnClickListener() {
        int texTimetPos = position;
        int textNamePos = position;
        int linkPos = position;

        @Override
        public void onClick(View v) {
            // Intent i = new Intent(getContext(), Details.class);
            // i.putExtra("time",
            // data.get(texTimetPos).getTextTime().toString());
            // i.putExtra("name",
            // data.get(textNamePos).getTextName().toString());
            // i.putExtra("url",
            // data.get(linkPos).getDetailsUrl().toString());
            // ctx.startActivity(i);
        }
    });

    return convertView;
}

static class ViewHolder {
    TextView textName, textPackageName, textVersion, textVersionCode;
    ImageView image;
} 
```

我该如何解决？

# sql - 通过从另一个表中选择列将列附加到表

> ID：14515829
> 
> 赞同：0
> 
> 时间：2013-01-25T05:21:54.833
> 
> 标签：sql

```
Alter Table table2 add ( select column1, column2, column3, column4 from table1 ); 
```

我需要通过选择另一个表的列来附加现有表中的列。

我得到错误！期待一个可能的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:14:39.393

首先，要向表中添加四个新列，请使用以下语法：

```
ALTER TABLE Table2
            ADD  column1 <datatype> <allow null>,
                 column2 <datatype> <allow null>,
                 column3 <datatype> <allow null>,
                 column4 <datatype> <allow null> 
```

`<datatype>`您将添加到列中的数据类型`<allow null>`在哪里，`NULL`如果您想允许空值是列，`NOT NULL`如果您不想在列中允许空值。

例如，要添加大小为 10 且允许空值的四列 nchar 类型，您可以执行以下操作：

```
ALTER TABLE Table2
            ADD  column1 [nchar](10) NULL,
                 column2 [nchar](10) NULL,
                 column3 [nchar](10) NULL,
                 column4 [nchar](10) NULL 
```

接下来，要将 table1 中的数据作为全新记录插入到该表中，您将使用以下 sql：

```
insert into     table2 (column1, column2, column3, column4)
                select column1, column2, column3, column4
                from table1 
```

注意：如果表中的任何原始列设置为`NOT NULL`并且没有默认值，这将失败，您还必须为这些列设置值。您可以使用类似于为不允许 NULL 值的列设置特定值的命令来执行此操作：

```
insert into     table2 ( existingColumn, column1, column2, column3, column4)
                select 'value to insert', column1, column2, column3, column4
                from table1 
```

# c++ - 如何声明指向二维数组的指针数组

> ID：14515830
> 
> 赞同：0
> 
> 时间：2013-01-25T05:22:00.067
> 
> 标签：c++, arrays, pointers, multidimensional-array

我有一个二维数组列表：

```
float a[][9] = { ... }
float b[][9] = { ... }
float c[][9] = { ... } 
```

我想要另一个指向每个二维数组的指针数组，如下所示：

```
what_should_be_here?? arr[] = { a, b, c } 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T05:32:06.483

用于`typedef`简化声明。arr 的每个元素都是`float (*)[9]`. 说这个类型是`SomeType`。然后`{a,b,c}`意味着您需要一个包含三个类型元素的数组`SomeType`。

```
SomeType arr[] = {a,b,c}; 
```

现在的问题是，**什么**是`SomeType`？所以你去：

```
typedef float (*SomeType)[9]; //SomeType is a typedef of `float (*)[9]`

SomeType arr[] = {a,b,c}; //this will compile fine now! 
```

正如我所说，**用于`typedef`简化声明！**

我会选择一个更好的名字`SomeType`：

```
typedef float (*PointerToArrayOf9Float)[9];

PointerToArrayOf9Float arr[] = {a,b,c}; 
```

这是一个更长的名称，但它使代码可读！

请注意，如果没有 typedef，您的代码将如下所示：

```
float (*arr[])[9] = {a,b,c}; 
```

这是丑陋的。这就是为什么我要重复：

### 用于`typedef`简化声明！

希望有帮助。

# signalr - signalR/hubs 不包含集线器方法

> ID：14515834
> 
> 赞同：2
> 
> 时间：2013-01-25T05:22:16.237
> 
> 标签：signalr

我正在使用 signalR 1.0.0 rc2 并且代码如下：

```
using System.Web;
using System.Threading.Tasks;
using Microsoft.AspNet.SignalR;
using Microsoft.AspNet.SignalR.Hubs; 

[HubName("chat")]
public class Chat : Hub
{
    public Chat()
    { 
    }
    [HubMethodName("send")]
    public void Send(string message,string  connectionId)
    {
        Clients.All(message);
    }
} 
```

我有客户端js：

```
$(function () {
    var myHub= $.connection.chat;
} 
```

在这里，我得到了未定义的聊天。我查看了信号器/集线器，发现

```
$.extend(signalR, {
   //here should have extended hub methods but has nothing   
}); 
```

这里的问题是集线器没有被初始化。我没有包含 `RouteTable.Routes.MapHubs()`在`global.asax.cs`是否有必要包括这一行？）。同样，当我包含此行时，我得到一个错误：

> 找不到方法：'无效 Microsoft.AspNet.SignalR.DependencyResolverExtensions.InitializePerformanceCount>ters(Microsoft.AspNet.SignalR.IDependencyResolver, System.String,System.Threading.CancellationToken)'。

谢谢 。

# iphone - 在 Core Data 中的瞬态属性的 getter 中执行密集任务

> ID：14515838
> 
> 赞同：0
> 
> 时间：2013-01-25T05:23:01.347
> 
> 标签：iphone, ios, core-data, transient

我有一个名为 Group 的实体。Group 实体有一个名为 displayImage 的瞬态属性。此 displayImage 是动态计算的。计算涉及 2 个或更多图像旋转、缩放。和种植。注意：计算中涉及的图像是从另一个实体中检索的。

我有一个 UITableView，它显示 Group 实体。在每个组单元格中，我显示 displayImage。

问题：我怎样才能实现它，以便在后台计算 displayImage （以避免在计算过程中出现屏幕 ferezes）？

我见过异步显示图像的示例，但这涉及在异步调用返回后在主线程中设置 UIImageView 的图像。我的问题是异步调用将设置 NSManagedObject 的瞬态属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:57:20.450

而不是把它放在吸气剂中，为什么不按照你描述的那样做呢？

最初加载时，请不要理会 image 属性并启动后台进程。完成后，调用主线程上的选择器以使用结果设置属性值。

您可以使用 KVO 或发布通知来触发您的视图控制器重新加载受影响的表格单元格。

# c# - ASP.NET 自定义服务器控件未在禁用的面板内禁用

> ID：14515841
> 
> 赞同：0
> 
> 时间：2013-01-25T05:23:34.780
> 
> 标签：c#, asp.net, custom-server-controls

我编写了一个自定义 ASP.NET 服务器控件。当我呈现控件时，我检查 this.Enabled 属性以确定是否应该将 disabled 属性添加到我的标签（下面的代码摘录）。除非我专门设置了 Enabled 标志，否则无论面板处于何种状态，此值都是 True。

```
output.AddAttribute(HtmlTextWriterAttribute.Type, "text");
if (!this.Enabled)
{
    output.AddAttribute(HtmlTextWriterAttribute.Disabled, "disabled");
}
output.AddAttribute(HtmlTextWriterAttribute.Value, this.DisplayName);
output.RenderBeginTag(HtmlTextWriterTag.Input);
output.RenderEndTag(); 
```

标准服务器控件（如文本框等）在这种情况下按预期运行并被禁用。

我必须实现什么模式才能检查控件是否实际上被禁用？您是否必须检查父级以查看它们中的任何一个是否是面板，然后查看它们是否已启用？如果是这样的话，似乎效率很低。

谢谢马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:33:15.970

刚找到。

需要修改代码为：

```
output.AddAttribute(HtmlTextWriterAttribute.Type, "text");
if (!this.IsEnabled)
{
    output.AddAttribute(HtmlTextWriterAttribute.Disabled, "disabled");
}
output.AddAttribute(HtmlTextWriterAttribute.Value, this.DisplayName);
output.RenderBeginTag(HtmlTextWriterTag.Input);
output.RenderEndTag(); 
```

# sencha-touch - 创建时传递值以查看

> ID：14515843
> 
> 赞同：0
> 
> 时间：2013-01-25T05:23:40.050
> 
> 标签：sencha-touch

我想在应用程序级别创建视图时将自定义参数传递给视图，但它不起作用。我已经阅读了 sencha 文档中的类系统，以及 Stack Overflow 中的相关问题，但这并没有帮助解决我的问题。

```
 Ext.define('ImgPanel', {
 extend: 'Ext.Panel',
 config: {
    flex: 5,
    appName: '', // self-defined 
     }, 
```

> ```
>  var imgPanel = Ext.create('ImgPanel', {appName: 'city'});
>   alert(imgPanel.getAppName());   // does not show the 'city' that I'm expected 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:22:48.750

对于`className`，使用[字符串点命名空间格式](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-define)。代替，

```
Ext.define('ImgPanel', { //... 
```

更改类名以包含应用程序的 ( `Ext.application`) 名称，

```
Ext.define('MyAppName.ImgPanel',  { //... 
```

[查看这个工作示例。](http://www.senchafiddle.com/#U9wBJ)

# .net - 为什么 webBrowser 不在 windows phone 7 模拟器中显示网页？

> ID：14515844
> 
> 赞同：0
> 
> 时间：2013-01-25T05:23:55.697
> 
> 标签：.net, windows-phone-7, xaml, webbrowser-control, windows-phone-7-emulator

windows phone 7 中的 webBrowser 不显示网页。它没有显示任何错误并显示空白页面。我试图打开 google.com 页面。代码如下：

private void button1_Click(object sender, RoutedEventArgs e) { webBrowser1.Navigate(new Uri("http://www.google.com", UriKind.RelativeOrAbsolute)); }

//xml代码

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,164">
            <phone:WebBrowser HorizontalAlignment="Left" Source="{Binding Path=WebAddress}" Margin="9,0,0,0" Name="webBrowser1" VerticalAlignment="Top" Height="576" Width="441" IsScriptEnabled="True"/>
        </Grid>
        <Button Content="Button" Grid.Row="1" Height="72" HorizontalAlignment="Left" Margin="158,591,0,0" Name="button1" VerticalAlignment="Top" Width="160" Click="button1_Click" />
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:38:07.347

您似乎正在尝试绑定 WebBrowser.Source 属性。这不是依赖属性，因此不可绑定。见以下两点：

[数据绑定 WPF 中 WebBrowser 的 Source 属性](https://stackoverflow.com/questions/263551/databind-the-source-property-of-the-webbrowser-in-wpf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:46:44.613

这是显示驱动程序的问题。我系统中的驱动程序是 WDDM 1.0。

# core-data - NSManagedObject 中的冲突是什么，某些合并策略之间有什么不同？

> ID：14515847
> 
> 赞同：8
> 
> 时间：2013-01-25T05:23:56.863
> 
> 标签：core-data, conflict

`NSMergeByPropertyObjectTrumpMergePolicy`并且`NSOverwriteMergePolicy`在一件事上是相同的。该属性会覆盖商店中的属性。

那么它们之间有什么不同呢？在我能想到的所有情况下，无论持久存储中的那个是否已更改，该属性都会覆盖持久存储。

还有什么是冲突？

我认为冲突只是意味着数据不同。这是否意味着核心数据最初设计为一旦数据写入就无法更新？

`NSOverwriteMergePolicy`如果冲突与单纯的“数据不同”不同，那么和之间有什么区别`NSErrorMergePolicy`？

在这两种情况下，单纯的数据差异无论如何都不是冲突，因此不会有冲突。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T17:35:44.153

> 这是否意味着核心数据最初设计为一旦数据写入就无法更新？

不，如果是这样的话，它就没有多大用处了，不是吗？

> 还有什么是冲突？

在 Core Data 中，当您有多个托管对象上下文 (MOC) 访问同一个数据存储时，可能会发生冲突。这在多线程应用程序中很常见。每个 MOC 都可以独立保存更改。但是您希望跨所有线程保持一致的数据视图，因此可以通知更改已保存在一个 MOC 上并将这些更改合并到不同的上下文中。这使上下文保持同步。

但是，如果您尝试将更改合并到 MOC 中，并且它对同一数据有不同的未保存更改，该怎么办？就像，两个 MOC 在同一个实例上更改了相同的属性，并将其更改为不同的值。这是发生冲突的时候。如果您尝试合并更改，结果取决于 MOC 的合并策略。默认情况下它使用`NSErrorMergePolicy`，这意味着合并失败并且您的代码需要以某种方式整理和解决冲突。有几个内置的合并策略将不同的自动解决方案应用于冲突。

四种内置的解决方案优先考虑磁盘上的更改或内存中的更改。它们在处理非冲突内存更改的方式上也有所不同。例如，`NSMergeByPropertyStoreTrumpMergePolicy`更新内存中的任何冲突更改以匹配来自其他 MOC 的更改，但保留非冲突更改。`NSRollbackMergePolicy`不同之处在于它完全丢弃内存中的更改，即使它们与来自其他 MOC 的新更改不冲突。如果没有任何内置方案看起来正确，您还可以创建自己的合并策略。

> 在这两种情况下，单纯的数据差异无论如何都不是冲突，因此不会有冲突。

肯定会有冲突。这是一个非常常见的场景。

# html - 如何使用 jquery 从远程 Web 服务获取数据

> ID：14515851
> 
> 赞同：0
> 
> 时间：2013-01-25T05:24:21.767
> 
> 标签：html, web-services, jquery

我在将数据绑定到 html 页面中的控件时遇到问题，这里我们在远程位置有一个 Web 服务，因为我们正在将数据绑定到 html 中的控件（下拉菜单），数据没有为 localhost 绑定代码，但对于远程 url.here 我在下面放置代码，任何人都可以告诉我任何修改或要添加到其中的任何代码。

```
 <!DOCTYPE html>
  <html>
   <head>
      <title></title>
<script src="Scripts/jquery-1.8.3.js" type="text/javascript"></script>
 </head>
<body>
<select id="CbxArea" style="width: 200px">
    <option>Select Area</option>
</select>
<script type="text/javascript">
    $(document).ready(function () {
        //debugger;
        var requestUrl = 'http://192.168.3.252:8081/HaraveerWCF/ExcelDataService.asmx/GetAreaNames';
        var ddlArea = $("#CbxArea");
        $.ajax({
            url: "http://192.168.3.252:8081/HaraveerWCF/ExcelDataService.asmx/GetAreaNames",
            //url: "ExcelDataService.asmx/GetAreaNames",
            type: "POST",
            dataType: "json",
            contentType: "application/json; encoding=utf-8",
            success: function (data) {
                debugger;
                for (i = 0; i < data.d.length; i++) {
                    ddlArea.append($("<option></option>").val(data.d[i].AreaName).html(data.d[i].AreaName));
                };
                alert(data.d.AreaName);
            },
            error: function (e) {
                $('#status').innerHTML = "Unavailable";
            }
        });

    });
</script> 
```

提前致谢。

# android - 数据库中字符串的映射

> ID：14515852
> 
> 赞同：0
> 
> 时间：2013-01-25T05:24:24.960
> 
> 标签：android, database, string, mapping

我正在编写一个 android 程序，其中我生成了一个文本。，带有单词数据库和与单词相关的文本内容。当生成的文本与单词匹配时，它需要立即显示文本内容。示例 - 数据库具有 facebook、orkut、linkedin 的文本内容。. 当生成的文本内容为 facebook 时，它与数据库的 facebook 字匹配并显示 facebook 详细信息。我如何在android中执行此操作。

# javascript - 如何使用 jQuery 从 cookie 中删除特定的 cookie

> ID：14515854
> 
> 赞同：1
> 
> 时间：2013-01-25T05:24:26.037
> 
> 标签：javascript, jquery, jquery-ui, cookies, session-cookies

这是显示 URL 和删除 cookie 的删除图像的代码。添加和显示功能正在工作，但如何删除？

```
function backLinks(){
    var pathname = window.location;
    var patientName = document.getElementById("general:patientDetailName").value;
    var cookieTimeVal = jQuery.cookie('PCC_Back_Button');
    if( cookieTimeVal== null){
        cookieTimeVal ="";
    }
    // for writing Cookie
    var stringCookie = "<span class='backLinkText1'><img src='../images/deleteImg.png' alt='' class='backLinkDeleteButton' onClick='deleteBackLink()'/></span><a class='backLinkText' href=\""+pathname+"\"> Patient History For \""+patientName+"\"</a>"+cookieTimeVal;
    jQuery.cookie('PCC_Back_Button', stringCookie , { expires: 1 });

    // read Cookie and set in HTML
    jQuery('#backButtonSpan').append(
        jQuery('<div>').attr({style:'padding-top:-10px;' }).append(cookieTimeVal)
    );
} 
```

**

```
function deleteBackLink(val){
        jQuery.cookie(val, null);
    } 
```

**

如何创建删除函数以及传递给它的参数是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:15:38.667

得到了正确答案...

在此我将替换 cookie 并删除内部 html

```
 function backLinks(stringValueAndName, patientName, patientDOB){
                var pathname = window.location;
                var cookieTimeVal = jQuery.cookie('PCC_Back_Button');
                if( cookieTimeVal== null){
                    cookieTimeVal ="";
                }

                var time = new Date();
                var spanId = time.getTime();

                // for wright in Cookie
                var stringCookie = "<span id ="+spanId+"> <img src='../images/deleteImg.png' class='backLinkDeleteButton' onClick='deleteBackLink("+spanId+")'/><a class='backLinkText' href=\""+pathname+"\">"+stringValueAndName +patientName+' ('+patientDOB +')'+"\</a></span>"+cookieTimeVal;
                jQuery.cookie('PCC_Back_Button', stringCookie , { expires: 1 });
                // read Cookie and set in HTML
                jQuery('#backButtonSpan').append(
                        jQuery('<div>').attr({style:'padding-top:-10px;' }).append(cookieTimeVal)
                    );
            }
    function deleteBackLink(val){
        jQuery('#'+val).remove();
        var stringCookie = jQuery('#backButtonSpan div').html();
        jQuery.cookie('PCC_Back_Button', stringCookie , { expires: 1 });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:30:15.627

要使用 jQuery 删除 cookie，请将值设置为 null：

```
jQuery.cookie("name", null); 
```

因此，您的函数将起作用 - 只需将 cookie 名称作为参数传递：

```
deleteBackLink("name"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:46:07.143

它没有。饼干就是饼干。

`The closest it comes is the HTTP Only flag, which allows a cookie to be hidden from JavaScript(mean client side)`. （这为 XSS cookie 盗窃提供了一点防御）。

饼干就是饼干。`(Again, client side code can't touch an HTTP only cookie)`

# html - 在 html 中而不是通过 css 后将样式应用于 nav ul li

> ID：14515861
> 
> 赞同：0
> 
> 时间：2013-01-25T05:25:05.053
> 
> 标签：html, css, nav

我`nav ul li:after`在css中有一个定义，例如：

```
nav ul:not(.first) li:after {
    margin-left: 10px;
    content: '';
    color: #bbb;
} 
```

但是要摆脱 not(.first)，因为它会影响页面中的其他“导航”...我想将属性应用于特定`nav ul, li:after`的，其他导航都可以，只有这个我想应用这种样式：

```
 <nav>
    <ul>
        <li id="all">All</li>
        <li id="web">WEB</li>
        <li id="print">DesignD</li>
        <li id="illustration">Illustration</li>
    </ul>
</nav> 
```

是否可以？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:31:30.320

我很确定我知道你在做什么，但如果我错了，请原谅我。您想将这些样式仅应用于第一个 li 吗？

在这种情况下，你应该打电话

```
nav ul:first-child li:after {
margin-left: 10px;
content: '';
color: #bbb;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:59:25.373

通常我会建议使用该`style`属性，但遗憾的是我并没有真正使用`:later`. 因此，正如已经提到的，您必须处理一个类或一个 id，然后在 css 中定位它。

# java - 相对目录似乎不适用于 Maven 程序集描述符中的文件集。有什么办法可以做到这一点？

> ID：14515864
> 
> 赞同：5
> 
> 时间：2013-01-25T05:25:28.067
> 
> 标签：java, maven, maven-3, maven-assembly-plugin

根据 maven 程序集插件文档，相对目录是允许的，但“..”似乎根本不起作用。

由于我无法进入（也无法更改）的原因，我想在程序集中包含一些在 maven 项目目录之外的文件。

```
/-
---maven-project/
---some-crap/ 
```

我尝试了各种方法：

```
<fileSets>
    <fileSet>
        <directory>${project.basedir}/../some-crap</directory>
        <outputDirectory>crapdir</outputDirectory>
        <includes>
            <include>**/*</include>
        </includes>
    </fileSet>
</fileset> 
```

或者

```
<fileSets>
    <fileSet>
        <directory>${project.basedir}</directory>
        <outputDirectory>crapdir</outputDirectory>
        <includes>
            <include>../some-crap/**/*</include>
        </includes>
    </fileSet>
</fileset> 
```

或者

```
<fileSets>
    <fileSet>
        <directory>../some-crap</directory>
        <outputDirectory>crapdir</outputDirectory>
        <includes>
            <include>**/*</include>
        </includes>
    </fileSet>
</fileset> 
```

等等。我的 Maven 版本是 3.0.4（最新）

除了在 ant 中写一些东西来获取这些东西或在组装之前将它复制到我的目标目录之外，我还能做些什么吗？

我真的认为程序集插件将“..”视为目录名称，而不是“上一级”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:08:46.567

在组装之前使用 maven-antrun-plugin 将文件复制到项目目录如何？

```
 <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-antrun-plugin</artifactId>
           <executions>
               <execution>
                   <id>prepare-deploy-package</id>
                   <phase>prepare-package</phase>
                   <goals>
                       <goal>run</goal>
                   </goals>
                   <configuration>
                       <tasks>
                           <copy todir="${project.build.directory}">
                               <fileset dir="../xxxx">
                               </fileset>
                           </copy>
                       </tasks>
                   </configuration>
               </execution>
           </executions>
       </plugin> 
```

# haskell - Haskell 中的列表处理

> ID：14515867
> 
> 赞同：3
> 
> 时间：2013-01-25T05:25:29.810
> 
> 标签：haskell

我正在自学 Haskell，遇到了问题，需要帮助。

**背景：**

```
type AInfo  =  (Char, Int)
type AList  =  [AInfo]       (let’s say [(‘a’, 2), (‘b’,5), (‘a’, 1), (‘w’, 21)]

type BInfo  =  Char
type BList  =  [BInfo]      (let’s say [‘a’, ‘a’, ‘c’, ‘g’, ‘a’, ‘w’, ‘b’] 
```

**一个快速编辑：**以上信息仅用于说明目的。列表的实际元素要复杂一些。此外，列表不是静态的；它们是动态的（因此使用 IO monad），我需要在程序运行期间保留/传递/“返回”/有权访问和更改列表。

我希望执行以下操作：

对于 AList 的所有元素，检查 BList 的所有元素，并且在 AList 元素（对）的字符等于 Blist 中的字符的情况下，将 AList 元素（对）的 Int 值加一并从 BList 中删除该字符。

所以这意味着在 AList 的第一个元素与 BList 的所有元素进行检查之后，列表的值应该是：

AList [('a', 5), ('b',5), ('a', 1), ('w', 21)]

BList ['c', 'g', 'w', 'b']

最后，列表值应该是：

AList [('a', 5), ('b',6), ('a', 1), ('w', 22)]

BList ['c', 'g']

当然，所有这些都发生在 IO monad 中。

**我尝试过的事情：**

1.  使用 mapM 和递归辅助函数。我看过两个：

    AList 的每个元素都检查 bList 的每个元素 -- mapM (myHelpF1 alist) blist 和 BList 的每个元素都检查 AList 的每个元素 - mapM (myHelpF2 alist) blist

2.  将两个列表都传递给一个函数并使用复杂的 if/then/else 和辅助函数调用（感觉就像我在强迫 Haskell 进行迭代；混乱的复杂代码，感觉不对。）

3.  我考虑过使用过滤器、AList 元素的字符值和 Blist 来创建第三个 Bool 列表并计算 True 值的数量。更新 Int 值。然后在 BList 上使用 filter 来移除……的 BList 元素（再次感觉不对，不是很像 Haskell。）

**我想我知道的关于这个问题的事情：**

解决方案可能非常简单。如此之多，更有经验的 Haskeller 会在他们输入回复时低声咕哝“真是个菜鸟”。

任何指针将不胜感激。（喃喃自语……）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:07:32.703

几点建议：

不要`[(Char, Int)]`用于“AList”。您正在寻找的数据结构是一个有限映射：[`Map Char Int`](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/containers-0.3.0.0/Data-Map.html). 特别看[`member`](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/containers-0.3.0.0/Data-Map.html#v%3Amember)和[`insertWith`](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/containers-0.3.0.0/Data-Map.html#v%3AinsertWith)。 [`toList`](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/containers-0.3.0.0/Data-Map.html#v%3AtoList)并[`fromList`](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/containers-0.3.0.0/Data-Map.html#v%3AfromList)从您当前拥有的表示转换为`AList`，因此即使您坚持使用该表示，您也可以转换`Map`为该算法的 a 并在最后转换回来。（这将比留在列表中更有效，因为您要进行大量查找，并且有限映射 API 比列表更易于使用）

我将这个问题分为两个阶段：（1）[`partition`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3apartition)根据`blist`它们是否在地图中，（2）`insertWith`已经在地图中的元素。然后您可以返回结果映射和另一个分区。

我还将摆脱无意义的假设，例如键是`Char`-您可以说它们是`k`满足必要约束的任何类型（对于“键”）（您可以将其放在 a 中`Map`，这要求它是可`Ord`擦除的）。您可以使用小写类型变量执行此操作：

```
import qualified Data.Map as Map

sieveList :: (Ord k) => Map.Map k Int -> [k] -> (Map.Map k Int, [k]) 
```

更通用地编写算法有助于捕获错误，因为它确保您不使用任何您不需要的假设。

哦，这个程序在`IO`monad 中也没有任何关系。这是纯代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:11:05.297

正如@luqui 指出的那样，您描述的操作是纯的，所以我们只是将它定义为纯 Haskell 函数。它可以通过(or )*在*monad (包括`IO`) 中使用。`fmap``do`

```
import Data.List

combine alist blist = (reverse a, b4) where 
```

首先我们对B列表进行排序和计数：

```
 b = map (\g->(head g,length g)) . group . sort $ blist 
```

我们需要导入`group`并`sort`可用。接下来，我们滚动`alist`并做我们的事情：

```
 (a,b2) = foldl g ([],b) alist
  g (acc,b) e@(x,c) = case pick x b of 
                        Nothing -> (e:acc,b)
                        Just (n,b2) -> ((x,c+n):acc,b2)
  b3 = map fst b2
  b4 = [ c | c <- blist, elem c b3 ] 
```

现在`pick`，如所使用的，必须是

```
 pick x [] = Nothing
  pick x ((y,n):t) 
     | x==y = Just (n,t)
     | otherwise = case pick x t of Nothing -> Nothing
                                    Just (k,r) -> Just (k, (y,n):r) 
```

当然`pick`执行线性搜索，因此如果性能（速度）成为问题，`b`应更改为允许二分搜索（树等，如`Map`）。其计算`b4`是`filter (`elem` b3) blist`另一个潜在的性能问题，因为它重复检查存在于`b3`. 同样，一般来说，在树中检查是否存在比在列表中要快。

测试运行：

```
> combine [('a', 2), ('b',5), ('a', 1), ('w', 21)] "aacgawb"

([('a',5),('b',6),('a',1),('w',22)],"cg") 
```

* * *

`blist`编辑：您可能希望它反过来，在更新`alist`和生成（或不生成）结果中的元素`blist`（`b4`在我的代码中）的同时滚动。这样，该算法将以更*本地化*的方式在长输入流上运行（假设您的输入流`blist`很长，尽管您没有这么说）。如上所述，它会出现空间问题，`blist`多次消耗输入流。我会保持原样作为插图，作为思考的食物。

因此，如果您决定走第二条路线，请先将您的地图转换`alist`为地图（[当心重复！](http://www.haskell.org/ghc/docs/latest/html/libraries/containers/Data-Map-Lazy.html#v%3afromList)）。然后，扫描 (with `scanl`) over `blist`，利用[`updateLookupWithKey`](http://www.haskell.org/ghc/docs/latest/html/libraries/containers/Data-Map-Lazy.html#v%3aupdateLookupWithKey)更新counts map，同时为 的每个成员`blist`一一决定是否输出。因此，累加器的类型必须是`(Map a Int, Maybe a)`，`a`您的元素类型 ( `blist :: [a]`)：

```
scanl :: (acc -> a -> acc) -> acc -> [a] -> [acc]

scanning = tail $ scanl g (Nothing, fromList $ reverse alist) blist
g (_,cmap) a = case updateLookupWithKey (\_ c->Just(c+1)) a cmap of
                 (Just _, m2) -> (Nothing, m2)   -- seen before
                 _            -> (Just a, cmap)  -- not present in counts 
new_b_list = [ a | (Just a,_) <- scanning ]
last_counts = snd $ last scanning 
```

如果您必须在那里保留旧的副本，则必须将其`toList last_counts`与原件结合起来`alist`（您为什么要这样做？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:36:23.513

虽然我绝不是 Haskell 专家，但我有部分尝试返回一次操作的结果。也许您可以了解如何将其映射到其余部分以获得您的解决方案。addwhile 很聪明，因为你只想更新 lista 中第一次出现的元素，如果它存在两次，它只会给它加 0。代码批评非常受欢迎。

```
import Data.List
type AInfo = (Char, Int)
type AList = [AInfo]

type BInfo = Char
type BList = [BInfo]

lista = ([('a', 2), ('b',5), ('a', 1), ('w', 21)] :: AList)
listb = ['a','a','c','g','a','w','b']

--step one, get the head, and its occurrences
items list = (eleA, eleB) where
        eleA = length $ filter (\x -> x == (head list)) list
        eleB = head list

getRidOfIt list ele = (dropWhile (\x -> x == ele) list) --drop like its hot

--add to lista
addWhile :: [(Char, Int)] -> Char -> Int -> [(Char,Int)]    
addWhile [] _ _ = []
addWhile ((x,y):xs) letter times = if x == letter then (x,y+times) : addWhile xs letter times 
                                   else (x,y) : addWhile xs letter 0

--first answer
firstAnswer = addWhile lista (snd $ items listb) (fst $ items listb)
--[('a',5),('b',5),('a',1),('w',21)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:37:48.957

```
import Data.List

type AInfo  =  (Char, Int)
type AList  =  [AInfo]

type BInfo  =  Char
type BList  =  [BInfo]

process :: AList -> BList -> AList
process [] _ = []
process (a:as) b = if is_in a b then (fst a,snd a + 1):(process as (delete (fst a) b)) else a:process as b where
        is_in f [] = False
        is_in f (s:ss) = if fst f == s then True else is_in f ss

*Main> process [('a',5),('b',5),('a',1),('b',21)] ['c','b','g','w','b']
[('a',5),('b',6),('a',1),('b',22)]
*Main> process [('a',5),('b',5),('a',1),('w',21)] ['c','g','w','b']
[('a',5),('b',6),('a',1),('w',22)] 
```

可能是一个重要的免责声明：我对 Haskell 生疏到了无能的地步，但作为一个放松的午夜练习，我写了这个东西。它应该做你想做的事，尽管它不返回 BList。通过一些修改，您可以让它返回一个 (AList,BList) 元组，但我认为如果需要这种操作，您最好使用命令式语言。

或者，有一个优雅的解决方案，我对 Haskell 太一无所知了。

# dust.js - 如何使用灰尘部分模板文件（.tl 文件）

> ID：14515869
> 
> 赞同：1
> 
> 时间：2013-01-25T05:25:43.490
> 
> 标签：dust.js

我对部分和覆盖模板几乎没有问题。为此，我使用了以下文件夹结构。

**项目根**

```
 dust-core-0.6.0.min.js
   jquery.js
   test.html
   partial.tl
   main_without_override.tl 
```

的内容`partial.tl:`

```
{+greeting} Hola {/greeting}

{+world} World {/world} 
```

的内容`main_without_override.tl`：

```
{>partial/} 
```

的内容`test.html`：

```
<!DOCTYPE html>
<html>
  <head>
    <script src="dust-core-0.6.0.min.js" type="text/javascript"></script>
    <script src="jq.js" type="text/javascript"></script>
  </head>
  <body>
  </body>
  <script>
    $.get('main_without_override.tl', function(){
        console.log(arguments);
    })
  </script>
</html> 
```

在`index.html`我试图得到`main_without_override.tl`它的说法 404 时。但我确定文件在那里。firebug 显示的路径是正确的。但是浏览器显示 404。

我想知道

1.  如何得到这个`main_without_override.tl`
2.  在浏览器中应用模板`main_without_override.tl`并渲染。

我在谷歌搜索了大多数示例只给出了语法。有人可以帮我渲染`main_without_override.tl`模板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:55:18.040

为了在客户端上编译模板（这可能不是一个好主意），您需要包含`dust-full`而不是`dust-core`. 这是因为`dust-core`不包括 Dust 编译器。

在客户端编译模板可能不是一个好主意的原因是 Dust 编译为 JavaScript，正如 @monshi 提到的，您可以编译模板，然后将它们作为 JavaScript 提供。`.tl`如果包含，则可以通过 AJAX 获取文件`dust-full`，但最好事先编译该模板，然后`.js`在需要时对该文件进行动态请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:53:30.377

您可以使用`<script>`标签将您的灰尘模板包含为 JavaScript 文件，但您需要先对其进行编译，**[此处对此进行了说明](https://stackoverflow.com/questions/13736462/how-to-use-dustjs-linkedin-as-client-side-templating/13854510)**

然后将以下模板（脚本）添加到`test.html`：

```
 <script type="text/javascript" src="partial.js"></script>
    <script type="text/javascript" src="main_without_override.js"></script> 
```

在你的 JavaScript 中通过`dust.render`方法渲染模板：

```
 dust.render('main_without_override', your_json_object, function(err, out){

        your_dom_element.innerHTML = out;

    }); 
```

相关问题： [如何使用dustjs-linkedin 作为客户端模板？](https://stackoverflow.com/questions/13736462/how-to-use-dustjs-linkedin-as-client-side-templating/13854510)

# kernel-module - 如何在内核线程中获取接收到的信号

> ID：14515872
> 
> 赞同：1
> 
> 时间：2013-01-25T05:26:01.437
> 
> 标签：kernel-module

我在内核线程中调用函数 signal_pending()。返回true时，我想获取信号。我的
代码如下： `sigset = &current->signal->shared_pending.signal;` 但值为零。我的错误在哪里？

# c - int32、int、int32_t、int8和int8_t的区别

> ID：14515874
> 
> 赞同：128
> 
> 时间：2013-01-25T05:26:06.803
> 
> 标签：c, int, declaration

`int32_t`我最近在一个 C 程序中遇到了数据类型。我知道它存储 32 位，但不这样`int`做`int32`吗？

另外，我想`char`在程序中使用。我可以`int8_t`改用吗？有什么不同？

总结一下：**C中的int32，int，int32_t，int8和int8_t有什么区别？**

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2013-01-25T05:32:40.930

between `int32`and `int32_t`, （以及同样 between `int8`and `int8_t`）的区别非常简单：C 标准定义了`int8_t`and `int32_t`，但没有定义任何名为`int8`or`int32`的东西——后者（如果它们存在的话）可能来自其他一些头文件或库（很可能早于 C99中添加`int8_t`和）。`int32_t`

平原`int`与其他的有很大不同。where `int8_t`and `int32_t`each 有一个指定的大小，`int`可以是任何大小 >= 16 位。在不同的时间，16 位和 32 位都相当普遍（对于 64 位实现，它可能应该是 64 位）。

另一方面，`int`保证在 C 的每个实现中都存在，无论在`int8_t`哪里`int32_t`。不过，这对您是否重要可能还有待商榷。如果您在小型嵌入式系统和/或较旧的编译器上使用 C，则可能会出现问题。如果你主要在桌面/服务器机器上使用现代编译器，它可能不会。

糟糕——错过了关于`char`. 如果（且仅当）您希望整数类型保证为 8 位大小时，您将使用`int8_t`而不是 char。如果要存储字符，则可能要`char`改用。它的大小可能会有所不同（就位数而言），但可以保证恰好是一个字节。不过有一点奇怪：无法保证普通文本`char`是有符号的还是无符号的（许多编译器可以将其设为其中之一，具体取决于编译时标志）。如果您需要确保其被签名或未签名，则需要明确指定。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-25T05:35:29.183

_t 数据类型是 stdint.h 标头中的 typedef 类型，而 int 是内置的基本数据类型。这使得 _t 仅在 stdint.h 存在时可用。另一方面， int 保证存在。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-12-03T17:12:59.387

请始终记住，如果未明确指定，“大小”是可变的，因此如果您声明

```
 int i = 10; 
```

在某些系统上，编译器可能会生成 16 位整数，而在其他一些系统上，它可能会生成 32 位整数（或在较新的系统上为 64 位整数）。

在嵌入式环境中，这可能会导致奇怪的结果（尤其是在处理内存映射 I/O 或可能被认为是简单的数组情况时），因此强烈建议指定固定大小的变量。在遗留系统中，您可能会遇到

```
 typedef short INT16;
 typedef int INT32;
 typedef long INT64; 
```

从 C99 开始，设计人员添加了 stdint.h 头文件，该文件基本上利用了类似的 typedef。

在基于 Windows 的系统上，您可能会看到 stdin.h 头文件中的条目为

```
 typedef signed char       int8_t;
 typedef signed short      int16_t;
 typedef signed int        int32_t;
 typedef unsigned char     uint8_t; 
```

还有更多的东西，比如最小宽度整数或精确宽度整数类型，我认为探索 stdint.h 以获得更好的理解并不是一件坏事。

# java - 从 Java 中的 Hashmap 数据中循环遍历数组

> ID：14515878
> 
> 赞同：2
> 
> 时间：2013-01-25T05:26:30.947
> 
> 标签：java, android, loops, for-loop, hashmap

我有`XML`从 Web 服务下载的文件，我遇到的问题是我无法让它在循环之外正确显示数据。

`XML`格式设置如下：

```
<section>
    <outage>
        <dummydata>test</dummydata>
   </outage>
    <outage>
        <dummydata>test2</dummydata>
   </outage>
</section>
<section>
   <outage>
    <dummydata>test3</dummydata>
   <outage>
</section> 
```

请注意，某些部分可能会发生不止一次中断。正如您在下面看到的，计数是正确的，但一次中断来自 4。

```
01-24 22:54:49.176: I/System.out(1924): Outage Count per sect 1
01-24 22:54:49.176: I/System.out(1924): Outage Count per sect 1
01-24 22:54:49.176: I/System.out(1924): Outage Count per sect 1
01-24 22:54:49.176: I/System.out(1924): Outage Count per sect 1
01-24 22:54:49.176: I/System.out(1924): Outage Count per sect 4
01-24 22:54:49.186: I/System.out(1924): Outage Count per sect 1
01-24 22:54:49.186: I/System.out(1924): Outage Count per sect 1
01-24 22:54:49.196: I/System.out(1924): Outages : 763674 
```

这是完成所有工作的代码

```
for (int j = 0; j < arrPolygons.size(); j++) {

     if (isPointInPolygon(point, arrPolygons.get(j).getPoints())) {
      for (int outageInfo = 0; outageInfo < nodeList.getLength(); outageInfo++) {
            outageData = new LinkedList<HashMap<String, String>>();
             Node ouageInfoNode = nodeList.item(outageInfo);

              Element ouageInfoElement = (Element) ouageInfoNode;
              NodeList ouageInfoList = ouageInfoElement.getElementsByTagName("Outage");
              System.out.println("Outage Count per sect "+ouageInfoList.getLength());
                 for (int outages = 0; outages < ouageInfoList.getLength(); outages++) {
                     Node outageNode = ouageInfoList.item(outages);
                     Element outageDataElement = (Element) outageNode;
                     NodeList outageDataList =outageDataElement.getElementsByTagName("outagenum");   

                     outageDataElement = (Element) outageDataList.item(0);
                     outageDataList = outageDataElement.getChildNodes();

                     outagenum = ((Node) outageDataList.item(0))
                            .getNodeValue();

                    //This is what I want to loop 
                      HashMap<String, String> map = new HashMap<String, String>();
                      map.put("outagenum", outagenum);
                    outageData.add(outages, map);                        
                    } 

                }
                  Toast.makeText(MainActivity.this, "Inside " + arrPolygons.get(j).getId()+" "+ outageData.get(j), Toast.LENGTH_LONG).show();

                  System.out.println("Outages : " + outageData.get(0));

              }
           }

         }
    } 
```

我的结果应该看起来像

```
Index 0 - {test,test2}
Index 1 - {test3} 
```

谁能告诉我我在这个循环中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:30:14.087

```
 for (int outageInfo = 0; outageInfo < nodeList.getLength(); outageInfo++) {
            outageData = new LinkedList<HashMap<String, String>>(); 
```

应该

```
 outageData = new LinkedList<HashMap<String, String>>();
 for (int outageInfo = 0; outageInfo < nodeList.getLength(); outageInfo++) { 
```

# ruby-on-rails - 客户端验证未定义方法“validates_email”

> ID：14515880
> 
> 赞同：1
> 
> 时间：2013-01-25T05:26:45.703
> 
> 标签：ruby-on-rails, client-side-validation

我从 client_side_validations 页面复制了代码。我有错误 `undefined method validates_email for #<Class:0x007ff3382428a8>` 当我放入`includes ::Validations`我的模型时，这个错误消失了，但验证根本不起作用。

应用程序/验证器/email_validator.rb

```
class EmailValidator < ActiveModel::EachValidator
  def validate_each(record, attr_name, value)
    unless value =~ /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i
    record.errors.add(attr_name, :email, options.merge(:value => value))
    end
  end
end

# This allows us to assign the validator in the model
module ActiveModel::Validations::HelperMethods
  def validates_email(*attr_names)
    validates_with EmailValidator, _merge_attributes(attr_names)
  end
end 
```

配置/语言环境/en.yml

```
# config/locales/en.yml
en:
  errors:
    messages:
      email: "Not an email address" 
```

应用程序/资产/javascripts/rails.validations.customValidators.js

```
// The validator variable is a JSON Object
// The selector variable is a jQuery Object
window.ClientSideValidations.validators.local['email'] = function(element, options) {
// Your validator code goes in here
if (!/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i.test(element.val())) {
// When the value fails to pass validation you need to return the error message.
// It can be derived from validator.message
return options.message;
}
} 
```

模型/comment.rb

```
class Comment < ActiveRecord::Base
  attr_accessible :content, :email, :ip, :name, :post_id
  belongs_to :post
  validates_presence_of :content, :email, :post_id, :name
  validates_email :email
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:49:18.983

我没有看到你包括你的模块。此外，根据您放置模块的位置，您有时需要“要求”它。而且，尝试：

```
include <Module name> 
```

代替

```
includes <Module name> 
```

希望这会有所帮助

# php - 我们应该在亚马逊 MWS PHP SDK 的 APPLICATION_NAME 和 APPLICATION_VERSION 字段中输入什么？

> ID：14515883
> 
> 赞同：2
> 
> 时间：2013-01-25T05:27:23.707
> 
> 标签：php, amazon-web-services, amazon-mws

我不知道我应该在亚马逊[MWS PHP 库的以下字段中输入什么](http://code.google.com/p/amazon-mws-php-fork/source/browse/trunk/src/MarketplaceWebService/Samples/.config.inc.php?r=5)

```
define('APPLICATION_NAME', '<Your Application Name>');  
define('APPLICATION_VERSION', '<Your Application Version or Build Number>'); 
```

如果有人知道亚马逊 MWS 中的应用程序名称和版本，请说明应用程序名称和版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T11:00:15.547

You enter the application name and version. According to a comment in the file you linked to:

```
/*
* All MWS requests must contain a User-Agent header. The application
* name and version defined below are used in creating this value.
*/ 
```

So, the application name and version are used to create the user agent string. You said your application will be used to export your store products to seller central. So use a name like `MyProductExporter` and the version will be `1.0` and then when you upgrade it you can set the version to `1.1`.

So, for example, mine would look something like:

```
define('APPLICATION_NAME', 'MyAWESOMEProductExporter');  
define('APPLICATION_VERSION', '1.1.391'); 
```

So it's for identifying your client via `User-Agent` - as long as it's unique, put whatever makes sense to you in there.

Hope this helps

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:51:21.207

```
define('APPLICATION_NAME', 'MarketplaceWebServiceProducts PHP5 Library');
define('APPLICATION_VERSION', '2'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T00:16:26.857

[https://github.com/tejesh002/amazon-mws](https://github.com/tejesh002/amazon-mws)

**用于结算的php composer包**

*   获取报告列表
*   获取报告请求
*   获取报告
*   更新确认

# c# - 发布/安装后手动寻址数据库

> ID：14515884
> 
> 赞同：0
> 
> 时间：2013-01-25T05:27:23.230
> 
> 标签：c#, database, path, installation

我正在编写一个表单数据库程序。为此，我需要手动读出数据，我认为 - 经过长时间的研究 - 这是解决我的数据库的最佳方法：

```
con = new System.Data.SqlServerCe.SqlCeConnection();
String connectionString = "Data Source=|DataDirectory|\\Database1.sdf";
String executable = System.Reflection.Assembly.GetExecutingAssembly().Location;
String path = (System.IO.Path.GetDirectoryName(executable));
AppDomain.CurrentDomain.SetData("DataDirectory", path);
con.ConnectionString = connectionString;//"Data Source=C:\\Users\\Name\\Documents\\Databases\\Visual 2012\\Database1.sdf";
con.Open(); 
```

这在可视化编辑器中有效，但是在发布我的程序和程序安装后它会出错，因为安装的文件夹中没有数据库。（安装连接字符串目标后`C:\Users\Tac\AppData\Local\Apps\2.0\9E0GCT8K.WVE\KYYL0ERB.678\Program`，没有数据库。

有人可以帮我一个好主意，安装后如何使寻址工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:30:22.523

如果您不使用 SetData 设置 DataDirectory，它将检查的位置之一是可执行文件的目录。

您可以在安装程序中包含数据库（我猜是一个空的），并将其配置为与可执行文件安装在同一目录中。

或者最好还是使用 Windows 中的特殊文件夹之一。

```
AppDomain.CurrentDomain.SetData("DataDirectory", Environment.SpecialFolder.ApplicationData); 
```

您也可以在安装程序配置中指定此文件夹。查看此[链接](http://msdn.microsoft.com/en-us/library/s2esdf4x%28v=vs.100%29.aspx)以获取有关特殊文件夹和**文件系统编辑器的更多信息**

# dojo - dojo 1.8：错误：尝试使用 id==main_bContainer 注册小部件，但该 id 已注册

> ID：14515888
> 
> 赞同：2
> 
> 时间：2013-01-25T05:27:59.687
> 
> 标签：dojo

嗨，我有一个简单的，如下所示，它显示了边框容器和内容窗格。我不明白为什么边界容器的 id 注册了两次，因为我只为边界容器定义了一个 id。

错误说明：错误：尝试使用 id==main_bContainer 注册小部件，但该 id 已注册请告知我哪里弄错了。

```
<!DOCTYPE html>
<html>
<head>
<title>Hello</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="../dojo1_8/dijit/themes/soria/soria.css"/>
<link rel="stylesheet" href="../common.css"/>
<style type="text/css">
html, body 
{
    width: 100%;
    height: 100%;
    margin: 5px;
    padding: 0px;
    overflow: hidden;
}

</style>

</head>

<body class="soria">
<div id="main_bContainer" data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'sidebar'">
    <div class="cP_Left" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'">
        Content Pane A
    </div>
    <div class="cP_Right" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'right'">
        Content Pane B
    </div>

</div>
</body>

<script>            
var dojoConfig =
            {
                parseOnLoad: true,//replace web controls based on theme soria
                isDebug: true,//true for debuggin with aid  from FireBug, Always set it to false, to avoid overhead
                async: true,//
                locale : "en-us"//
            }; 
</script>

<script src='../dojo1_8/dojo/dojo.js'></script>

<script>require(["dojo/parser",
             "dojo/ready",
             "dojo/request",
             "dijit/layout/BorderContainer",
             "dijit/layout/ContentPane",
             "dojo/domReady!"
            ], function(parser, ready, request)
            {ready(function()
                {parser.parse();

            });
    });
</script>
</html> 
```

谢谢克莱门特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:01:33.620

因为你有`parse()`它的2次。

这里`dojoConfig = { parseOnLoad: true };`

和这里`parser.parse();`

只有`parse`一个问题会解决。

# solr - 有没有办法在 solr 中为 CSV 上传器指定可变数量的列？

> ID：14515889
> 
> 赞同：0
> 
> 时间：2013-01-25T05:28:08.603
> 
> 标签：solr

我正在使用 CSVupdateHandler 将 CSV 文件索引到 Solr。我的 Csv 文件在每一行中都有可变数量的字段（例如，第一行 4 个字段，第 2 行中的 6 个字段，依此类推……）。

```
 line1:field1,field2,field3,field4 
      line2:field1,field2,field3,field4,field5,field6
      line3:field1,field2,field3,field4 
```

那么有没有办法指定字段名的变量号？如果有四个字段，我想要它做的是索引 4 列，如果有六个则索引 6。任何其他实现这一目标的替代方法也受到赞赏:) 谢谢！

更新 ：

```
let me describe the situation .... 
```

我有一个包含 CSV 数据的文件，如上所示。我使用 fieldnames 参数来指定 Solr 必须使用的字段名称。因为我的文件中的每一行都没有设置数量的 CSValue，所以我不能为此文件设置标准标题，而不必用空值填充一些行。例如。当我上传上面定义了 6 个标题字段的文件时，第 1 行和第 3 行会抛出一个错误，如果我使用 4 个标题字段第 2 行会抛出一个错误.. 我想知道是否有办法指定标题字段，以便上述条件有效...或者我是否必须将我的文件转换为具有填充虚拟值的等长字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:29:08.747

解决了这个问题：在 schema.xml 中指定具有默认值的自定义字段。考虑到某些行中的额外两个字段！提供的 schema.xml 有很多例子！

ALTERNATE：您还可以定义自定义 updateRequestProcessor 并使用 java 根据条件添加字段。并将此处理器指定为请求处理程序中更新处理器链的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:22:16.570

您希望第 5 列和第 6 列映射到什么？您需要以一种或另一种方式让 Solr 知道吗？在这种情况下，您只需为丢失的项目做空昏迷。

另一方面，如果您尝试在单个字段中提供多值，那么您可能应该将字段分隔符设置为其他值，并将逗号作为值分隔符。

试着想一想你希望 Solr 看到什么，然后反过来工作。

# rest - Alfresco REST API：数据大小限制？

> ID：14515890
> 
> 赞同：1
> 
> 时间：2013-01-25T05:28:16.173
> 
> 标签：rest, alfresco

我正在露天开发基于 REST 的网络服务以进行数据传输，并且想知道我可以通过 REST 协议发送/获取的最大数据量是多少？

任何参考都会非常有帮助。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:20:15.340

最大数据量为 2147000000。这就是为什么如果您的数据足够大，建议将其流式传输到您的 REST 服务。这是一个例子。

**发件人/上传者应用程序或客户端**

```
 var sb = new StringBuilder();
        sb.Append("Just test data. You can send large one also");
        var postData = sb.ToString();
        var url = "REST Post method example http://localhost:2520/DataServices/TestPost";
        var memoryStream = new MemoryStream();
        var dataContractSerializer = new DataContractSerializer(typeof(string));
        dataContractSerializer.WriteObject(memoryStream, postData);
        var xmlData = Encoding.UTF8.GetString(memoryStream.ToArray(), 0, (int)memoryStream.Length);
        var client = new WebClient();
        client.UploadStringAsync(new Uri(url), "POST", "");
        client.Headers["Content-Type"] = "text/xml";
        client.UploadStringCompleted += (s, ea) =>
        {
            if (ea.Error != null) Console.WriteLine("An error has occured while processing your request");
            var doc = XDocument.Parse(ea.Result);
            if (doc.Root != null) Console.WriteLine(doc.Root.Value);
            if (doc.Root != null && doc.Root.Value.Contains("1"))
            {
                string test = "test";
            }
        }; 
```

**REST 服务方法**

```
[WebInvoke(UriTemplate = "TestPost", Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Xml)]
    public string Publish(string market,string sportId, Stream streamdata)
    {
        var reader = new StreamReader(streamdata);
        var res = reader.ReadToEnd();
        reader.Close();
        reader.Dispose();

    } 
```

**不要忘记将以下配置设置放在您的 REST 服务配置文件中，如果您没有此设置，则会引发错误**

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="2147000000" maxQueryStringLength="2097151" maxUrlLength="2097151"/>
  </system.web>
  <system.webServer>
    ........
  </system.webServer>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true" maxReceivedMessageSize="2147000000" maxBufferPoolSize="2147000000" maxBufferSize="2147000000"/>
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel> 
```

# c++ - 利用类中的结构映射

> ID：14515891
> 
> 赞同：0
> 
> 时间：2013-01-25T05:28:18.720
> 
> 标签：c++, c, algorithm, struct

我的程序中有一个要放置在 3d 空间中的形状对象。形状的属性如下所示：

```
struct Shape{
Vector3 position, 
TYPE shapeType,
std::string resourcePath
}; 
```

**XmlReader**

```
map<Shape, Vector3> locations;

//Add pairs to map by reading from xml file, for eg:
//Initializing struct
Shape _shape = {
node->getPosition(), //position of the card in xml
node->getType(),
node->getPath()
}
//Add to map 
```

以上是我的 XmlReader 类中的`map`一个公共字段，在我的主程序中，我将遍历地图以将形状放置在空间中。
在这种情况下，我还必须`struct`在我的主程序中初始化 a 以从地图中获取位置和形状。
例如：
在地图迭代器中，

```
for(std::map<Shape, Vector3>::iterator itr=locations.begin();itr!location.end();++itr)
Shape _Receivedshape = itr->first;
std::string resulttring = _Receivedshape.resourcePath; 
```

由于我也在我的主程序中初始化结构，因此上述是否是正确的实现。如果不是，在这里使用什么是更好的实现？

# c++ - 在 QT 中循环而不崩溃

> ID：14515893
> 
> 赞同：0
> 
> 时间：2013-01-25T05:28:27.520
> 
> 标签：c++, qt

这是我的代码：

```
void FileOperations::EncryptAndSave(Ui::MainWindow *NUI){
int Stime = clock();
int percent=0;
NUI->progressBar->setVisible(1);
while(percent<100)
{
    if(clock()-Stime>250)
    {
        percent++;
        NUI->progressBar->setValue(percent);
        Stime=clock();
    }
    Sleep(1);
}
CFuncion=0;
NUI->progressBar->setVisible(0);
} 
```

我不希望这个循环在几秒钟后不冻结整个程序，这可能吗，还是我需要多线程？

如果多线程是唯一的选择，有人可以给我一些示例代码（将变量发送到第二个线程）

我打算把代码放在 main.cpp 中，让它在每次检查代码时运行，但在 QT 中，main.cpp 只执行一次。

顺便说一句，这是一个示例代码，显然它什么也没做，我要把一些文件操作放在循环中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:41:11.283

`QCoreApplication::processEvents()`应在您的循环中调用以避免 UI 冻结。

```
while(percent<100)
{
    if(clock()-Stime>250)
    {
        percent++;
        NUI->progressBar->setValue(percent);
        Stime=clock();
    }
    QCoreApplication::processEvents();
    Sleep(1);
} 
```

# javascript - 数组自引用映射 - 非常奇怪的结果

> ID：14515894
> 
> 赞同：5
> 
> 时间：2013-01-25T05:28:41.787
> 
> 标签：javascript, arrays, map, self-reference

在尝试一些不同的方法来生成 JavaScript 数组时，我偶然发现了一个奇怪的结果。使用自`map`引用`push`数组（[**DEMO**](http://jsfiddle.net/TDneq/)）：

```
a=[1,1,1,1,1,1,1,1,1,1];
a=a.map(a.push,a); 
```

我得到以下结果（在 Chrome 中）：

```
[13,16,19,22,25,28,31,34,37,40] 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T05:37:09.943

对于 , 中的每个元素`a`，`push`都使用该元素、该元素的索引和被遍历的数组来调用。然后，对于数组中的每个元素，我们添加这三个附加元素。这解释了原始数组中每个元素的长度增加了三。push 的结果是元素添加后数组的长度，因此结果数组 (from `map`) 是一个数组，保存`a`每次 push 回调完成后数组的长度。

请参阅[map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)和[push](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T05:33:14.100

它与`push`作为新长度的返回值有关。不知道为什么它增加了 3。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

> **返回**
> 调用方法的对象的新长度属性。

# wpf - 在 wpf 中解析区域管理器

> ID：14515899
> 
> 赞同：0
> 
> 时间：2013-01-25T05:29:04.397
> 
> 标签：wpf, mvvm, specflow

我正在尝试在 specflow 步骤定义文件中执行此操作，以便我可以创建视图模型对象并对它进行方法调用。

但我收到一条错误消息，提示“无法解析接口：Microsoft.Practices.Prism.Regions.IRegionManager（解析路径：TestClass）”。我做错了什么？

```
public class TestClass
{
    private IRegionManager _RegionManager;

    [ImportingConstructor]
    public TestClass(IRegionManger regionManager)
    {
        this._RegionManager = regionManager;
        // stuff here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:02:58.410

您是否希望通过 SpecFlow 或通过 Prism 实例化您的测试类？因为两者都具有依赖注入功能。

因此，我不希望您的测试定义文件具有任何导入构造函数或类似的 MEF 属性。相反，我希望你的测试类写得更像

```
[Binding]
public class TestClass
{
  [Given("I setup Prism")]
  public void GivenISetupPrism()
  {
    // Call into prism
  }
} 
```

有关详细信息，请参阅[http://specflow.org上的文档。](http://specflow.org)

# iphone - 如何在 IOS 6 中获取此背景条？

> ID：14515900
> 
> 赞同：0
> 
> 时间：2013-01-25T05:29:07.970
> 
> 标签：iphone, ios, cocoa-touch, uiview, uiimage

![在此处输入图像描述](../Images/0e6aeeee1170811f7c3067c6d181f064.png)

我在旧版本中使用过这个背景，更新到 iOS 6.0 后，我无法在 IB 中找到任何地方。我堆栈溢出并使用了这个

```
self.view.backgroundColor = [UIColor groupTableViewBackgroundColor]; 
```

仍然是白色，我现在该怎么办？我需要为此设置图像吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T05:32:32.980

此功能**groupTableViewBackgroundColor**在 iOS 6 上已弃用。请在背景模式下设置颜色或图像，请参阅[SO 答案](https://stackoverflow.com/questions/12452810/is-grouptableviewbackgroundcolor-deprecated-on-ios-6)

# ruby-on-rails - 不区分大小写的名称，同时保留大小写，在 Devise

> ID：14515901
> 
> 赞同：4
> 
> 时间：2013-01-25T05:29:22.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

使用名称作为键，我们如何在注册时通过忽略大小写来验证名称，同时在显示时仍然记住大小写？

在`config/initializers/devise.rb`中，设置`config.case_insensitive_keys = [ :name ]`似乎在注册之前将整个名称小写。

示例：一些家伙将自己命名为 TheFourthMusketeer。

*   视图将显示 TheFourthMusketeer，而不是 thefourthmusketeer
*   没有新用户可以注册，比如说，thHEfourthMUSKETEER

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T06:07:48.580

您可能会尝试**不**设置`:name`为不区分大小写，这将在数据库中正确保存区分大小写的名称：

```
config.case_insensitive_keys = [] 
```

然后，重写 User 上的`find_first_by_auth_conditions`类方法以按用户名查找用户。请注意，此代码会因数据库而异（以下使用 Postgres）：

```
def self.find_first_by_auth_conditions(warden_conditions)
  conditions = warden_conditions.dup
  if login = conditions.delete(:login)
    where(conditions).where("lower(name) = ?", login.downcase).first
  else
    where(conditions).first
  end
end 
```

这样做，a`User.find_for_authentication(login: 'thefourthmusketeer')`将正确返回带有`name`“TheFourthMusketeer”的记录。

有关覆盖此方法的说明，请参阅[https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address 。](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-26T07:40:18.420

接受的答案不完整，因为它在注册时仍然区分大小写。例如，“用户名”和“用户名”都可以成功注册，但只有第一个可以登录。

禁用不区分大小写的键`config/initializers/devise.rb`（这也可以是特定于模型的，所以也检查那里）：

```
config.case_insensitive_keys = [] 
```

覆盖`find_first_by_auth_conditions`方法`models/user.rb`：

```
def self.find_first_by_auth_conditions(warden_conditions)
  conditions = warden_conditions.dup
  if login = conditions.delete(:username)
    where(conditions).where(["lower(username) = :value", { :value => login.downcase }]).first
  else
    where(conditions).first
  end
end 
```

...并且还设置`validates_uniqueness_of`在`models/user.rb`：

```
validates_uniqueness_of :username, :case_sensitive => false 
```

所以你有它：不区分大小写的身份验证，不区分大小写的注册，在数据库中保留大小写。

# ruby-on-rails - 在不在 Model 中的属性上使用 Rails 中的 Group by

> ID：14515911
> 
> 赞同：0
> 
> 时间：2013-01-25T05:30:25.303
> 
> 标签：ruby-on-rails, group-by

我有一个具有属性 date:DateTime 的模型事件

我只想按 Date 对 Event 进行分组，如果我使用 group_by(&:date) 然后它按 DateTime 分组，我无法更改 Model 属性，因为我还需要 Time 稍后显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:43:43.083

```
Event.group_by(&:date_col)

def group_by_criteria
  date_col.to_date.to_s(:db)
end

Event.group_by(&:group_by_criteria) 
```

这将仅按日期分组。

# iphone - 相机有时显示黑屏

> ID：14515923
> 
> 赞同：1
> 
> 时间：2013-01-25T05:31:28.120
> 
> 标签：iphone, xcode, uiimagepickercontroller

我在我的应用程序中访问默认摄像头。有时它显示黑屏。这个问题的解决方案是什么？。

```
 if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeCamera])
    {
        imgPicker = [[UIImagePickerController alloc] init];
        imgPicker.delegate = self;
        imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
//        imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *) kUTTypeImage, nil];
        imgPicker.allowsEditing = NO;
        imgPicker.showsCameraControls = NO;
        cameraView.backgroundColor = [UIColor clearColor];
        imgPicker.cameraOverlayView = cameraView;
        [self presentModalViewController:imgPicker animated:YES];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:52:35.387

我认为问题在于您呈现`UIImagePickerController`实例的方式：

```
 UIImagePickerController * imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.delegate = self;
    [self presentModalViewController:imagePicker animated:YES];
   // [picker release]; 
```

# python - 检查 ND-Array 列中的 Nan 值并删除它们

> ID：14515925
> 
> 赞同：0
> 
> 时间：2013-01-25T05:31:45.923
> 
> 标签：python, loops, slice, bitvector, multidimensional-array

下面的代码是为了检查 Python ND-Array 列中的 NaN 值而编写的。如果 temparr1 或 temparr2 中有一个 NaN，我们从它们中删除相应的行。问题是，它似乎不起作用。你能帮帮我吗？

```
 temparr1=arr[index[indexkey]][:]// We get a column from arr, an nd-array of size 0 to 9470
        temparr2=arr[index[secondIndexKey]][:]// Same as above, but with the next column
        rwc=range(0,len(arr)) We get a bit vector of a sort to check.
        for i in range(0,len(arr)):
            if(isnan(temparr1[i]) or isnan(temparr2[i]) ):
                rwc = rwc[:i-1]+rwc[i+1:] // Remove the value from the bit Vector for a NaN value in the arrays.
                print i
        temparr1 = []
        temparr2 = []
        for i in rwc:
            temparr1.append(arr[index[indexkey]][i])
            temparr2.append(arr[index[secondIndexKey]][i])// Extract the data for the corresponding values in RWC and get them into the temparrs. 
```

有人可以告诉我为什么它不起作用，为什么我仍然得到 NaN 吗？

一个数组看起来像： [99,242,122,nan,42,nan,414,........]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:50:31.587

在`rwc=range(0,len(arr))`您拥有之后`len(rwc)=len(arr)`，因此在`rwc = rwc[:i-1]+rwc[i+1:]`您期望的行中和`i`的索引相同。`rwc``arr`

但是，在您完成之后，您会`rwc = rwc[:i-1]+rwc[i+1:]`得到一个长度较小的列表 ( `len(rwc) = len(arr) -2`)，因此在下一次迭代中，您开始从列表中删除错误的元素。

另外我怀疑你打算这样做`rwc = rwc[:i]+rwc[i+1:]`，这是另一个错误

据我了解，你试图做这样的事情：

```
X=arr[index[indexkey]]
Y=arr[index[secondIndexKey]]

temparr1 = []
temparr2 = []
for i in range(len(X)):  #I assume len(X)=len(Y)
    if not (isnan(X[i]) or isnan(Y[i])):
        temparr1.append(X[i])
        temparr2.append(Y[i]) 
```

# php - 单击提交按钮时隐藏隐藏的输入值（php/jquery）

> ID：14515932
> 
> 赞同：1
> 
> 时间：2013-01-25T05:32:21.590
> 
> 标签：php, javascript, jquery, hidden-field

好的，所以我的问题是：

我有一个表格，要求输入名字、姓氏和城市。用户单击提交，然后信息显示在此表中：

```
<p>You entered the following data:</p>

            <form action="1.php" method="post">

                <input type="hidden" name="action" value="update">
                <input type="hidden" name="city" value="<?php echo $user->get_city(); ?>">

                <table>
                    <tr>
                        <th>First Name:</th>
                        <td><?php echo $user->get_fname(); ?></td>
                        <td><input type="button" id="edit_fname" value="Edit"></td>
                        <td><input type="text" id="fname" name="fname" size="20"></td>
                        <td><input type="hidden" id="valf" name="val" value="fname">
                            <input type="hidden" id="lnf" name="lname" value="<?php echo $user->get_lname(); ?>">
                            <input type="submit" id="subfn" value="Submit"></td>
                    </tr>
                    <tr>
                        <th>Last Name:</th>
                        <td><?php echo $user->get_lname(); ?></td>
                        <td><input type="button" id="edit_lname" value="Edit"></td>
                        <td><input type="text" id="lname" name="lname" size="20"></td>
                        <td><input type="hidden" id="vall" name="val" value="lname">
                            <input type="hidden" id="fnf" name="fname" value="<?php echo $user->get_fname(); ?>">
                            <input type="submit" id="subln" value="Submit"></td>
                    </tr>
                    <tr>
                        <th align="right">City:</th>
                        <td><?php echo $user->get_city(); ?></td>
                        <td>&nbsp;</td>
                    </tr>
                </table>
            </form> 
```

因此，当用户单击编辑按钮时，会显示一个文本框和一个提交按钮，并且根据它是名字编辑还是姓氏编辑，我有适当的隐藏值与表单一起发送。唯一的问题是，无论如何，即使您单击名字字段的“提交”按钮，隐藏的输入“val”也会设置为“lname”。

这是jQuery：

```
$().ready = function() {
                    $('#fname').hide();
                    $('#lname').hide();
                    $('#subfn').hide();     // submit button for first name
                    $('#subln').hide();     // submit button for last name
                    $('#valf').hide();      // hidden value for fname so we know to post lname
                    $('#vall').hide();      // hidden value for lname so we know to post fname
                    $('#lnf').hide();       // hidden value to post last name when first name edit submit
                    $('#fnf').hide();       // hidden value to post first name when last name edit submit

                    $("#edit_fname").click(function() {
                        $('#fname').show();
                        $('#subfn').show();
                        $('#valf').show();
                        $('#lnf').show();

                        if ($('#lname').show) {     // if last name edit is showing, hide it
                            $('#lname').hide();
                            $('#subln').hide();
                            $('#vall').hide();
                            $('#fnf').hide();

                        }
                    });

                    $("#edit_lname").click(function() {
                        $('#lname').show();
                        $('#subln').show();
                        $('#vall').show();
                        $('#fnf').show();

                        if ($('#fname').show()) {       // if first name edit is showing, hide it
                            $('#fname').hide();
                            $('#subfn').hide();
                            $('#valf').hide();
                            $('#lnf').hide();
                        }
                    });

                }(); 
```

这是单击提交按钮并将“操作”更改为“更新”时的 PHP：

```
case 'update':
        $val = $_POST['val'];

        if ($val == 'fname') {
            $fname = $_POST['fname'];
            $lname = $_POST['lname'];
            $city = $_POST['city'];

            $user = new User($fname, $lname, $city);
            break;
        }
         else if ($val == 'lname') {
            $fname = $_POST['fname'];
            $lname = $_POST['lname'];
            $city = $_POST['city'];

            $user = new User($fname, $lname, $city);
            break;
        } 
```

我测试了 $val 是什么，无论如何它似乎都停留在“lname”上。所以，我认为我的 jQuery 代码有问题，或者问题是无论如何都会发送姓氏“val”值，这不应该是因为我在单击名字按钮。

这都是实验性的，可以帮助我学习 OOP。显然，这根本不是生产代码。我目前是应用科学副学士学位的一年级学生，并且还有很多年才能获得计算机科学学士学位。这甚至不是课程的一部分……我只是很无聊，真的很喜欢编程。

所以，觉得有人可以帮忙吗？抱歉发了这么长的帖子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:42:19.480

Here is why. See the following two lines of code

```
<td><input type="hidden" id="valf" name="val" value="fname"> 
```

.....

```
<td><input type="hidden" id="vall" name="val" value="lname"> 
```

Those define a hidden field named **val** first with value fname and then with value lname. Even when you are giving them different IDs their names are still the same. And nowhere in your jquery code are you changing the value of **val** that is why it always remains **lname**.

You have to change that value depending upon your logic somewhere. You can use following jQuery selector

```
$("input[type='hidden'][name='val']") 
```

**Edit**

So instead of this

```
$('#valf').show(); 
```

You can write

```
$("input[type='hidden'][name='val']").val("fname"); 
```

And instead of this

```
$('#vall').show(); 
```

You can write

```
$("input[type='hidden'][name='val']").val("lname"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:41:04.470

You have two different fields with `name="val"` in the same form. PHP reads each of these in sequence and the second value clobbers (overwrites) the first one, leaving you with just the last value in the `$_GET` array element.

You can submit multiple values under the same name by specifying the variable name with `[]` on the end of it. This tells PHP that it's an array element, just like you would use `$array[] = "new element";` in your normal code to add an element to an array.

Even using the array syntax wouldn't help you here though, since both values would be passed to the server every time you submitted the form. If you only want one section or the other to be submitted, then they need to be separate forms.

# java - 如何使用基本适配器单击每个单独的位置

> ID：14515938
> 
> 赞同：0
> 
> 时间：2013-01-25T05:32:55.273
> 
> 标签：java, android

我正在使用基本适配器，我有一个列表，其中包含带有文本视图的列表（表示左侧发送的项目，下面是右侧接收的项目，我想单击列表中的每个位置以执行回复消息。

请建议我如何执行单击列表项的功能

下面是我正在使用的代码

类 MessageAdapter 扩展 BaseAdapter {

```
 ViewHolder viewHolder;
     LayoutInflater inflater=(LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);

     public int getCount() {
            // TODO Auto-generated method stub
            return Constant_Variables.Sms_Status_list.size();
        }

     public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

     @Override
     public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

     @Override
     public View getView(final int position, View convertView, ViewGroup parent) {

         if (convertView == null) {
             convertView = inflater.inflate(R.layout.messagelist_row, null);

             viewHolder=new ViewHolder();

             viewHolder.sms_from_row=(TextView)convertView.findViewById(R.id.sms_from_txtview);
             viewHolder.sms_to_row=(TextView)convertView.findViewById(R.id.sms_sendto_txtview);

         }
         else
         {
             viewHolder = (ViewHolder) convertView.getTag();
         }

         viewHolder.sms_from_row.setVisibility(View.VISIBLE);
         viewHolder.sms_to_row.setVisibility(View.VISIBLE);

         if(Constant_Variables.Sms_Status_list.get(position).equalsIgnoreCase(Twilioresponse_Utils.sms_sent))
         {
             viewHolder.sms_from_row.setVisibility(View.GONE);
             viewHolder.sms_to_row.setText("Sent: "+Constant_Variables.Sms_from_list.get(position));

         }
         else if(Constant_Variables.Sms_Status_list.get(position).equalsIgnoreCase(Twilioresponse_Utils.sms_received))
         {
             viewHolder.sms_to_row.setVisibility(View.GONE);
             viewHolder.sms_from_row.setText("Received: "+Constant_Variables.Sms_to_list.get(position));
         }
         else
         {
             viewHolder.sms_from_row.setText("Message in queued.");
             viewHolder.sms_to_row.setVisibility(View.VISIBLE);
         }

         convertView.setTag(viewHolder);

         return convertView;
     }

     protected void onListItemClick(ListView l, View v, final int position, long id) {

         if(l.callOnClick()== true)
         {
             Log.i("the Item clicked is at position : ", ""+ position);
         }

         else
         {
             Log.i("the Item not clicked is at position : ","the Item not clicked is at position" );
         }
     }
 } 
```

下面是我正在使用的 XML 代码

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >

    <TextView
        android:id="@+id/sms_from_txtview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="12dp"
        android:layout_alignParentRight="true"
        android:background="@drawable/blue"
        android:layout_alignParentTop="true"
        android:text="From" />

    <TextView
        android:id="@+id/sms_sendto_txtview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="12dp"
        android:background="@drawable/red"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="To" />
</RelativeLayout > 
```

问候阿姆林德·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:35:50.230

android中有onItemClickListener，你可以使用它

```
ListView listview = (ListView)findViewById(R.id.yourlist);
listview.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // @todo
    }
}); 
```

对于列表项中的单个视图，您始终可以在 getView 方法中添加单击侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:38:09.073

初始化该视图时为两者实现单击侦听器

```
viewHolder.sms_from_row.setOnClickListener(new OnClickListener(){
    public void onClick(View view){
        // Todo thing
    }
});
viewHolder.sms_to_row.setOnClickListener(new OnClickListener(){
    public void onClick(View view){
        // Todo thing
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:38:38.010

您的代码是正确的，只需在此下方添加点击侦听器即可。

```
 viewHolder.sms_from_row=(TextView)convertView.findViewById(R.id.sms_from_txtview);
 viewHolder.sms_to_row=(TextView)convertView.findViewById(R.id.sms_sendto_txtview); 
```

在此下方添加像这样的单击侦听器。

```
viewHolder.sms_from_row.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                    }
                });

    viewHolder.sms_to_row.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub

                        }
                    }); 
```

希望对您有所帮助。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:40:48.370

写在项目上点击textview

```
 @Override
 public View getView(final int position, View convertView, ViewGroup parent) {

     if (convertView == null) {
         convertView = inflater.inflate(R.layout.messagelist_row, null);

         viewHolder=new ViewHolder();

         viewHolder.sms_from_row=(TextView)convertView.findViewById(R.id.sms_from_txtview);
         viewHolder.sms_to_row=(TextView)convertView.findViewById(R.id.sms_sendto_txtview);

viewHolder.sms_from_row.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {

                        }
                    });
     }
     else
     {
         viewHolder = (ViewHolder) convertView.getTag();
     }

     viewHolder.sms_from_row.setVisibility(View.VISIBLE);
     viewHolder.sms_to_row.setVisibility(View.VISIBLE);

     if(Constant_Variables.Sms_Status_list.get(position).equalsIgnoreCase(Twilioresponse_Utils.sms_sent))
     {
         viewHolder.sms_from_row.setVisibility(View.GONE);
         viewHolder.sms_to_row.setText("Sent: "+Constant_Variables.Sms_from_list.get(position));

     }
     else if(Constant_Variables.Sms_Status_list.get(position).equalsIgnoreCase(Twilioresponse_Utils.sms_received))
     {
         viewHolder.sms_to_row.setVisibility(View.GONE);
         viewHolder.sms_from_row.setText("Received: "+Constant_Variables.Sms_to_list.get(position));
     }
     else
     {
         viewHolder.sms_from_row.setText("Message in queued.");
         viewHolder.sms_to_row.setVisibility(View.VISIBLE);
     }

     convertView.setTag(viewHolder);

     return convertView;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-05T13:29:24.843

**单击列表时单击**
![单击列表时](../Images/3f85169e5a3dc189e7b233f90bbc7662.png)

**删除图标**
![单击删除图标时](../Images/6030a7e9a675f639bdec6bc209f70255.png)

**这是您可以参考的代码：**

```
 public class CaseAdapter extends BaseAdapter{

        Context context;
        ArrayList<PojoClass> list;
        LayoutInflater inflater;

        public CaseAdapter(Context context,ArrayList<PojoClass> list)
        {
            this.context=context;
            this.list=list;
            inflater=(LayoutInflater)this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return list.size();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
            View row = convertView;
             ViewHolder holder = null;

            if(row == null)
            {

                row = inflater.inflate(R.layout.activity_home_screen, parent,false);            
                holder = new ViewHolder(row);
                row.setTag(holder);

            }
            else
            {
                holder = (ViewHolder) row.getTag();
            }
            holder.caseNumber.setText(list.get(position).getCaseNo());
            holder.state.setText(list.get(position).getState());
            holder.date.setText(list.get(position).getDate());

            row.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                     Toast.makeText(context, "record clicked!", Toast.LENGTH_LONG).show();

                }
            });

            holder.delete.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    v=(View) v.getParent();//utilizing the View object...or we can use new view object
                    //View view=(View)v.getParent();//this one also we can use...but instead of v object you need to use view object;

                    TextView number=(TextView)v.findViewById(R.id.textView_case_number);
                    InfoDb db=new InfoDb(context);//using for remove record from database
                    db.open();

                    if(db.removeRecord(number.getText().toString()))
                    {
list.remove(position);
                  Toast.makeText(context, "Record Deleted!", Toast.LENGTH_LONG).show();
                  CaseAdapter.this.notifyDataSetChanged();

                    }else
                         Toast.makeText(context, "Record not Deleted!", Toast.LENGTH_LONG).show();

                    db.close();
                }
            });

            return row;
        }

        public class ViewHolder{

            TextView state,caseNumber,date;
            ImageView delete;

            public ViewHolder(View v){
                state=(TextView)v.findViewById(R.id.textView_State);
                caseNumber=(TextView)v.findViewById(R.id.textView_case_number);
                date=(TextView)v.findViewById(R.id.textView_date);
                delete=(ImageView)v.findViewById(R.id.ImageView_Delete);

            }

        }

    } 
```

# php - SoapClient 创建 XML

> ID：14515941
> 
> 赞同：-2
> 
> 时间：2013-01-25T05:33:10.980
> 
> 标签：php, xml, soap-client

我需要创建这个xml：

```
<soapenv:Envelope
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"  
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">  
  <soapenv:Header>  
    <wsse:Security xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/04/secext">  
      <wsse:UsernameToken>  
        <wsse:Username>user</wsse:Username>  
        <wsse:Password>password</wsse:Password>  
      </wsse:UsernameToken>  
    </wsse:Security>  
  </soapenv:Header>  
  <soapenv:Body>  
    <vb:getAirportInfo xmlns:vb="http://www.example.com/schema/2005/02/booking.xsd">  
      <airport>BNE</airport>  
      <airport>PPP</airport>  
      <airport>MEL</airport>  
    </vb:getAirportInfo>  
  </soapenv:Body>  
</soapenv:Envelope> 
```

我是使用 SoapClients 的新手，需要一些帮助。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:41:39.507

要从 PHP 中成功使用 SOAP，您需要做两件事：

1.  第一个是与 PHP 捆绑的 SoapClient 和/或 SoapServer 类。它们工作正常，有关详细信息，请参阅[http://php.net/manual/en/book.soap.php](http://php.net/manual/en/book.soap.php)。
2.  第二个是 WsdlDocument 库。它为您的服务生成 WSDL 描述，因此其他客户端可以轻松使用它。请参阅[http://code.google.com/p/wsdldocument/](http://code.google.com/p/wsdldocument/)

使用 SoapClient 非常简单，一旦初始化它，您将获得可以像往常一样调用方法的对象，并将这些调用转发到服务器。

SoapServer 只是关于创建服务实例和调用句柄方法。

这些都不包括手动处理您发布的 XML。它可以自己*神奇地*工作（从字面上看）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:07:10.233

我想到了。我需要做两件事。首先，我需要创建包含安全性的标题部分。$soap_client = new SoapClient("airportinfo.wsdl", array("trace" => 1,"exceptions"=>0));

```
 $header_part = '
        <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" SOAP-ENV:mustUnderstand="1">
            <wsse:UsernameToken>
                <wsse:Username>'.$username.'</wsse:Username>
                <wsse:Password>'.$password.'</wsse:Password>
            </wsse:UsernameToken>
        </wsse:Security>
    ';
    $soap_var_header = new SoapVar( $header_part, XSD_ANYXML, null, null, null );
    $soap_header = new SoapHeader( 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd', 'wsse', $soap_var_header, true );
    $soap_client->__setSoapHeaders($soap_header); 
```

其次，我需要创建一个数组并将其传递给 WSDL 所具有的函数。我通过使用 __getFunctions() 获得了这些列表。然后我使用此代码生成最后一个 xml

```
 $airports = array("AirportInfoRQ" => array("AirportCode" => "PPP", "AirportCode" => "BNE"));
    $responce = $soap_client->AxisTransaction($airports); 
```

这给了我上面所说的稍微不同的 xml，但它是让 SoapClient 正常工作的正确 xml

# jsf - JSF 保存获取参数到 bean

> ID：14515945
> 
> 赞同：0
> 
> 时间：2013-01-25T05:33:26.000
> 
> 标签：jsf

我有一个链接可以让我访问 kosz.xhtml?id=3; 我如何在 kosz.xhtml 中接收 id 并保存到 bean？ `<c:set>`不要为`<f:param>`我工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:21:12.823

为此，`<f:viewParam>`打算使用。把它放在模板客户端中：

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.id}" />
</f:metadata> 
```

### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)

# iphone - 无法从服务器接收 jpeg 图像

> ID：14515946
> 
> 赞同：0
> 
> 时间：2013-01-25T05:33:29.733
> 
> 标签：iphone, ios, objective-c, sockets

我正在尝试从我的 c# 服务器接收 jpeg 图像。奇怪的是，当我使用调试器运行它并且在方法中的任何地方都有一个断点时，它工作得非常好。如果没有断点，我会收到此错误

损坏的 JPEG 数据：数据段过早结束

这是我的代码

```
(void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {
NSMutableData *data;
data = [NSMutableData new];
switch(eventCode) {
    case NSStreamEventHasBytesAvailable:
    {
        uint8_t buffer[1024];
        int len;

        while([inputStream hasBytesAvailable]) {
            len = [inputStream read:buffer maxLength:sizeof(buffer)];

            if (len > 0)
            {
                [data appendBytes:(const void*)buffer length:sizeof(buffer)];
            }
        }
        UIImage *images = [[UIImage alloc]initWithData:data];
        [dvdCover setImage:images];
    } break;
    case NSStreamEventEndEncountered:
    {
        //UIImage *images = [[UIImage alloc]initWithData:data];
        //[dvdCover setImage:images];

    } break;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:39:11.473

似乎您假设整个 JPEG 图像将在一个块中传输，并且您只需发生一次“HasBytesAvailable”事件即可读取它。但是，您还应该考虑将 JPEG 图像以多个块的形式传输给您的情况。

如果您设置断点，它可能对您有用，因为您的代码执行可能会在某个地方停止，并且您的网络缓冲区有足够的时间来接收图像的所有字节。但是如果没有断点，它可能没有时间这样做。

尝试重构您的代码以累积字节块，并且仅假设它在所有字节都已传输时完成。（通常你必须事先知道图像将是多少字节——或者你可以捕获流事件的结束）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:25:03.277

```
hi you can check this code hop it will help you...

case NSStreamEventHasBytesAvailable:
{

uint32_t max_size = 1000000;  // Max size of the received imaged you can modify it as your reqirement.
        NSMutableData* buffer = [[NSMutableData alloc] initWithLength: max_size];
        NSInteger totalBytesRead = 0;
        NSInteger bytesRead = [(NSInputStream *)stream read: [buffer mutableBytes] maxLength: max_size];
        if (bytesRead != 0) {
            while (bytesRead > 0 && totalBytesRead + bytesRead < max_size) {
                totalBytesRead+= bytesRead;
                bytesRead = [(NSInputStream *)stream read: [buffer mutableBytes] + totalBytesRead maxLength: max_size - totalBytesRead];
            }
            if (bytesRead >= 0) {
                totalBytesRead += bytesRead;
            }
            else {
                // read failure, report error and bail (not forgetting to release buffer)
            }
            [buffer setLength: totalBytesRead];
            yourImageName.image = [UIImage imageWithData: buffer];
            [buffer release];

}  break; 
```

# javascript - 如何正确关闭 node-express 服务器？

> ID：14515954
> 
> 赞同：101
> 
> 时间：2013-01-25T05:34:46.983
> 
> 标签：javascript, api, node.js, webserver, express

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-01-25T05:59:06.850

`app.listen()`返回`http.Server`。您应该`close()`在该实例上调用，而不是在`app`实例上调用。

前任。

```
app.get(
    '/auth/github/callback',
    passport.authenticate('github', { failureRedirect: '/login' }),
    function(req, res) {
        res.redirect('/');

        setTimeout(function () {
            server.close();
            // ^^^^^^^^^^^
        }, 3000)
    }
);

var server = app.listen('http://localhost:5000/'); 
```

您可以检查来源：`/node_modules/express/lib/application.js`

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-02-12T20:52:53.880

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-07-01T12:05:06.640

如果您的快速应用程序中发生任何错误，那么您必须关闭服务器，您可以执行以下操作 -

```
var app = express();
var server = app.listen(process.env.PORT || 5000) 
```

如果发生任何错误，那么我们的应用程序将收到一个名为`SIGTERM`. 您可以在此处阅读更多 SIGTERM - [https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html](https://www.gnu.org/software/libc/manual/html_node/Termination-Signals.html)

```
process.on('SIGTERM', () => {
  console.info('SIGTERM signal received.');
  console.log('Closing http server.');
  server.close((err) => {
    console.log('Http server closed.');
    process.exit(err ? 1 : 0);
  });
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-20T03:15:51.467

[我在不同的node.js](/questions/tagged/node.js "显示标记为“node.js”的问题")支持渠道上多次回答了“如何终止 HTTP 服务器”的变体。不幸的是，我不能推荐任何现有的库，因为它们以一种或另一种方式[缺乏](https://github.com/gajus/http-terminator#alternative-libraries)。从那以后，我已经组合了一个包，（我相信）它可以处理所有预期的优雅 express.js HTTP(S) 服务器终止的情况。

[https://github.com/gajus/http-terminator](https://github.com/gajus/http-terminator)

[http-terminator](https://github.com/gajus/http-terminator)的主要好处是：

*   它没有猴子补丁 Node.js API
*   它会立即销毁所有没有附加 HTTP 请求的套接字
*   它允许对正在进行的 HTTP 请求的套接字进行优雅的超时
*   它正确处理 HTTPS 连接
*   它通过设置连接来通知连接使用保持活动服务器正在关闭：关闭标头
*   它不会终止 Node.js 进程

# java - BouncyCastle 在加密文件中自动附加签名

> ID：14515955
> 
> 赞同：0
> 
> 时间：2013-01-25T05:34:56.280
> 
> 标签：java, cryptography, bouncycastle

我正在使用 BouncyCastle 包进行 OpenPGP 加密。除了一个部分，一切都很顺利。当我将加密文本写入文件时，它会附加以下消息

```
-----BEGIN PGP MESSAGE-----
Version: BCPG v1.47
//encrypted text here
-----END PGP MESSAGE----- 
```

但我不想要文件中的签名部分。这是我用于加密的代码

```
public void encryptFile(OutputStream out, String fileName, PGPPublicKey encKey, boolean armor, boolean withIntegrityCheck) throws IOException, NoSuchProviderException, PGPException {
            //armor = true; integrityCheck = true
    Security.addProvider(new BouncyCastleProvider());

    if (armor) {
        out = new ArmoredOutputStream(out);
    }

    ByteArrayOutputStream bOut = new ByteArrayOutputStream();
    PGPCompressedDataGenerator comData = new PGPCompressedDataGenerator(PGPCompressedData.ZIP);

    PGPUtil.writeFileToLiteralData(comData.open(bOut), PGPLiteralData.BINARY, new File(fileName));

    comData.close();

    BcPGPDataEncryptorBuilder dataEncryptor = new BcPGPDataEncryptorBuilder(PGPEncryptedData.AES_256);
    dataEncryptor.setWithIntegrityPacket(withIntegrityCheck);
    dataEncryptor.setSecureRandom(new SecureRandom());

    PGPEncryptedDataGenerator encryptedDataGenerator = new PGPEncryptedDataGenerator(dataEncryptor);
    encryptedDataGenerator.addMethod(new BcPublicKeyKeyEncryptionMethodGenerator(encKey));

    byte[] bytes = bOut.toByteArray();
    OutputStream cOut = encryptedDataGenerator.open(out, bytes.length);
    cOut.write(bytes);
    cOut.close();
    out.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T06:40:03.473

这不是签名，而是装甲数据的信封。关闭装甲，您将获得二进制加密数据。如果您移除信封并继续保护，符合标准的解密 OpenPGP 工具将不知道如何处理 - 他们将无法区分保护数据和非保护数据。

# objective-c - 如何使用 Objective-C 存储 iOS 应用程序的全局状态和/或参数？

> ID：14515963
> 
> 赞同：0
> 
> 时间：2013-01-25T05:35:26.373
> 
> 标签：objective-c

我用不同`UIViewController`的 s 编写了一个小应用程序。在我的 AppDelegate 我有这个：

```
self.window.rootViewController = [[UINavigationController alloc]
                                 initWithRootViewController:
                                 [[MainViewController alloc] init]]; 
```

MainViewController，包含一个方法：

```
- (void)aMethod
{
    [self.navigationController pushViewController:[[CellViewController alloc] init]             
                                         animated:TRUE];
} 
```

CellViewController，包含一个方法：

```
- (void)aMethod
{
    StartToBuildViewController * controller = [[StartToBuildViewController alloc] init];
    [self.navigationController pushViewController:controller animated:true];
} 
```

等等。我的问题是：`UIViewController`与他人分享信息的最佳方式是什么？我只需要存储标志状态和/或日期时间值。我可以使用全局变量吗？数据库？还有什么？

我来自 php，在 php 中我会使用数据库或会话变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:44:32.143

在 IOS SDK 中，它取决于用户的要求和理解。虽然您可以将标志存储在 NSUserDefault 或使用 extern 创建全局变量或使用定义属性创建 AppDelegate 变量。

谢谢

# sharepoint-2010 - SharePoint 临时位置

> ID：14515971
> 
> 赞同：0
> 
> 时间：2013-01-25T05:35:53.033
> 
> 标签：sharepoint-2010

我正在使用 SharePoint 2010。我需要从存储在 sharepoint 库中的 excel 文件中获取数据。我计划通过使用 OLEDB 连接来实现这一点。所以我需要从 doc library 下载 excel 文件并将其存储在一个临时位置，然后访问这个临时文件以从中获取数据。现在我的问题是哪个是存储下载文件的最佳安全位置？到目前为止，我已经使用了 SharePoint 的布局目录、C:windows:TEMP 甚至 Path.GetTempFileName()。但是我得到的结果是“拒绝访问！”。在临时位置有什么想法吗？有没有其他安全的地方？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:39:44.800

检查您是否正在使用提升权限运行文件保存代码，并且应用程序池帐户是否具有对提供的路径的写入权限。将临时文件存储在 14 个配置单元内不是一个好习惯。

如果您的场启用了 excel 服务，为什么不使用 Excel Web 服务来读取 excel 文件。请参阅[http://msdn.microsoft.com/en-us/library/ms500767%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/ms500767%28v=office.14%29.aspx)

或者尝试使用第三方库，如[EPPlus](http://epplus.codeplex.com)，您可以在其中使用流而不是从物理文件位置打开 excel 文件。

# javascript - 使用函数和对象更改变量

> ID：14515972
> 
> 赞同：-1
> 
> 时间：2013-01-25T05:35:54.627
> 
> 标签：javascript

谁能告诉我返回什么索引？我很确定它是0。

```
function jsTest() {

    var index = 0;
    var counter = 0;
    var obj = {};

    obj.index = index;

    var func = function () {
        for (index = 0; index < 10; index++) {
            counter += 2;
        }
        obj.index++;    
    };

    obj.func = func;
    this.index++;

    return index;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:42:13.847

It should be 0\. Since the only place that can change local variable `index` is in function `func`, but it doesn't get called. Note that `this.index` is different from local variable `index`. BTW, `this.index++` makes no sense since `this.index` is undefined).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T05:40:45.217

Zero. At least that's what Chrome gave. Also obvious when you see that nothing changes it.

# jquery - 我正在使用带有插件的 orbit-jquery-image-slider 插件是图像不滑动吗？

> ID：14515973
> 
> 赞同：0
> 
> 时间：2013-01-25T05:36:10.447
> 
> 标签：jquery, jquery-plugins

我正在使用 orbit-jquery-image-slider 插件我可以通过执行此 'animation': 'fade' 但无法幻灯片图像来提供淡入淡出效果我尝试使用 'animation': 'horizo​​ntal-push' 但不起作用请帮助我

```
<script type="text/javascript">
    $(window).load(function () {
        $('#featured').orbit({
            'animation': 'horizontal-push',
            'bullets': true,
            advanceSpeed: 10000,
        });
        $('.slider-navs').css('position', 'relative');
        $('#featured').css('width', '650px');
        $('#featured').css('height', '210px');

    });

</script>
<div class="holder">
    <div class="above_cont_area " style="height:50px;height: 219px;width: 650px;margin-left: 25px;margin-bottom: 25px;">
        <div id="featured">
            <img src="dummy-images/img1.jpg" data-caption="#htmlCaption" />
            <img src="dummy-images/img2.jpg" data-caption="#htmlCaption" />
            <img src="dummy-images/img3.jpg" data-caption="#htmlCaption" />
            <img src="dummy-images/img4.jpg" data-caption="#htmlCaption" />
            <img src="dummy-images/img5.png" data-caption="#htmlCaption" />
            <img src="dummy-images/img6.png" data-caption="#htmlCaption" />
            <img src="dummy-images/img7.png" data-caption="#htmlCaption" />
            <img src="dummy-images/img8.png" data-caption="#htmlCaption" />
            <img src="dummy-images/img9.png" data-caption="#htmlCaption" />
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T14:56:52.767

另一个棘手的问题 22，是 .orbit-timer 和 .orbit-progress 栏不能从 DOM 中隐藏，不显示或幻灯片停止运行。

请参阅以下内容

[https://github.com/zurb/foundation/issues/1856#issuecomment-19422603](https://github.com/zurb/foundation/issues/1856#issuecomment-19422603)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:58:05.837

该插件要求所有图像具有相同的大小。添加的图像是否具有相同的大小？官方网站在[这里](http://www.zurb.com/playground/jquery_image_slider_plugin)

轨道功能将动态确定您的图像集的高度和宽度并相应地缩放，但请确保您的所有图像大小相同，否则较大的图像会从侧面窥视。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:03:32.783

如果你想要淡入淡出效果意味着你必须将动画作为淡入淡出而不是水平推动

```
$(window).load(function() {
    $('#featured').orbit({
            'animation': 'fade',
            'bullets': true,
            advanceSpeed: 10000
        });
  }); 
```

# ios - 如何将整个标题视图设置为 UICollectionView？

> ID：14515975
> 
> 赞同：11
> 
> 时间：2013-01-25T05:36:11.910
> 
> 标签：ios, ios6, uicollectionview, uicollectionviewlayout

我想将标题设置为集合视图，就像 UITableViewController 的 setTableHeader 一样。

我找到了在集合视图上设置每个部分的标题的方法，但我找不到如何设置整个标题的标题视图。

Apple 对 UICollectionViewLayout 的引用说：“补充视图呈现数据但与单元格不同。与单元格不同，补充视图不能由用户选择。相反，您使用补充视图来实现给定部分或整个部分的页眉和页脚视图等内容集合视图。补充视图是可选的，它们的使用和放置由布局对象定义。”，但我不知道如何为整个集合视图实现标题视图。

我试图通过只在第一部分创建一个节标题视图矩形来实现这一点，但它与 tableHeader 的不同。

在表格视图中，如果我将内容偏移设置为低于标题，则内容大小会自动扩展，以便隐藏标题，尽管存在一些元素。

但是在集合视图中，只有当存在足够多的元素可以滚动时，修改内容偏移才能正常工作。

当存在一些元素时，我尝试动态扩展内容大小，但它似乎无法正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T04:23:14.587

我使用自定义布局实现了这一点，并在每个滚动事件上重新定位标题。从继承 UICollectionViewLayout 开始，网上有很多教程，这是一个很好的教程：http: [//markpospesel.wordpress.com/2012/10/25/fixing-circlelayout/](http://markpospesel.wordpress.com/2012/10/25/fixing-circlelayout/)

然后诀窍是始终返回`YES`到`shouldInvalidateLayoutForBoundsChange:`，并`prepareLayout`根据集合视图 xOffset 和 yOffset 重新定位（即更改 layoutAttributes 的框架）标题。

使用 NSIndexPath 0-0 的补充视图。

`layoutAttributesForElementsInRect:`将在每一帧上调用，因此如果您的集合视图中有很多项目，您将需要缓存结果，以免影响性能。除了那个标题之外，所有属性都应该保持不变。

资料来源：我花了 1 个月的时间研究这个特定的主题。

# ajax - AJAX 结果问题 - Data.Results 未定义

> ID：14515978
> 
> 赞同：1
> 
> 时间：2013-01-25T05:36:25.677
> 
> 标签：ajax, json, jquery, jquery-select2

我正在尝试将 Select2 设置为使用 Ajax 并且被卡住了。我已经在 IE 中调试并确认我的 AJAX 正在返回结果，所以这似乎不是问题。输入框加载，但是当我在“牛奶”中输入“mi”时，它只是说“正在搜索......”并且什么也没找到！

这是我的jQuery：

```
 $(document).ready(function () {
            $('#e1').select2({
                placeholder: "Select an ingredient...",
                minimumInputLength: 2,
                ajax: {
                    url: "../api/IngredientChoices",
                    dataType: "jsonp",
                    quietMillis: 500,
                    data: function (term, page) {
                        return {
                            q: term,
                            page_limit: 10,
                            page: page

                        };
                    },
                    results: function (data, page) {
                        var more = (page * 10) < data.total;
                        return {
                            results: data.MainName, more:more
                        }

                    }
                }
            });
        }); 
```

JSON：

```
[{"SubItemID":1,"MainItemID":1,"SubName":"2%","MainName":"Milk"},{"SubItemID":2,"MainItemID":1,"SubName":"Skim/Fat Free","MainName":"Milk"},{"SubItemID":3,"MainItemID":2,"SubName":"Chedder","MainName":"Cheese"}] 
```

HTML：

```
<td><input type="hidden" id="e1" /></td> 
```

如果我将 dataType 更改为只是 json，当我在框中键入“mi”时会出现另一种错误。

![在此处输入图像描述](../Images/341ec749644cdd747503984732aa9ec0.png)

**这是工作版本的最终代码：**

```
 $('#e1').select2({
                placeholder: "Select an ingredient...",
                minimumInputLength: 2,
                ajax: {
                    url: "../api/IngredientChoices",
                    dataType: "json",
                    quietMillis: 500,
                    data: function (term, page) {
                        return {
                            q: term,
                            page_limit: 10,
                            page: page

                        };
                    },
                    results: function (data, page) {
                        var more = (page * 10) < data.length;
                        console.log(more);
                        console.log(data);
                        return { results: data, more: more };

                    },
                    formatResult: function (post) {
                        markup = '<strong>' + post.text + '</strong>';
                    }
                }
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T18:01:09.617

您遇到的错误似乎是由于您获得的结果的格式。Select2 的预期结果是具有 id: 和 text: 属性的对象的集合。

[{ id: 1, text: 'String' }, { id: 2, text: '其他字符串。'}]

# javascript - 运行 D3.js 示例

> ID：14515980
> 
> 赞同：1
> 
> 时间：2013-01-25T05:36:48.280
> 
> 标签：javascript, d3.js

我一直在尝试学习 D3，但在运行循环示例时遇到了麻烦。

```
http://mbostock.github.com/d3/tutorial/circle.html 
```

我只是想运行圆圈改变颜色和大小的步骤。

我所做的只是复制和粘贴示例，但我不知道如何处理这个

```
http://jsfiddle.net/NntGN/ 
```

我一直在尝试通过教程来解决这个问题：

```
http://jsfiddle.net/H2SKt/1/ 
```

如果您查看饼图，则会发现名称被屏蔽掉了。我需要进行哪些更改以使所有标签都指向饼图的中心并且不会相互阻挡？我一直在玩文字锚，觉得这是我最好的选择，但我没有取得任何进展。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:41:38.417

首先，您不必将以下 html 代码复制到您的站点：

```
<svg width="360" height="180">
  <circle class="little" cx="180" cy="45" r="12"></circle>
  <circle class="little" cx="60" cy="90" r="12"></circle>
  ...
</svg> 
```

d3.js 为你做的。您只需要编写 javascript 代码来选择一个 svg 元素（例如，将一个附加到您的正文中）并创建这些元素。您的代码不起作用，因为`svg`未定义。

查看[圆形教程](http://mbostock.github.com/d3/tutorial/circle.html)中的**创建元素**部分。

最后但并非最不重要的是工作[jsfiddle](http://jsfiddle.net/NntGN/1/)。

# c++ - 如何从 C 程序调用 bash shell 脚本中定义的函数

> ID：14515984
> 
> 赞同：1
> 
> 时间：2013-01-25T05:37:07.743
> 
> 标签：c++, c, linux, bash, shell

我有

```
 #!/bin/sh

    func1()
    {
        echo "This is func1 from shell script"
    }

    func2()
    {
        echo "This is func2 from shell script"

    } 
```

我想从 C 程序中调用 func1 和 func2。我可以这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T05:57:29.317

这不太可能是一个好主意，但我想你可以这样写：

```
if (! fork()) { // TODO fork can return -1 on error; should check for that
    execl("/bin/sh", "-c", ". FILE && func1", (char *)NULL);
    // TODO should check to make sure execlp successfully replaced the process
} 
```

其中`FILE`是`.sh`定义`func1`. 以上将产生一个子进程，并用 Bash 的实例（或任何你的 shell）替换该子进程，并带有参数`-c`（意思是“要运行的脚本是下一个参数”）和`. FILE && func1`（这是脚本；这意味着“运行中的命令`FILE`，如果成功，则运行命令`func1`”）。

了解更多信息：

*   [关于`fork`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html)
*   [关于`execl`](http://pubs.opengroup.org/onlinepubs/009604499/functions/exec.html)
*   [关于`.`](http://www.gnu.org/software/bash/manual/bash.html#Bourne-Shell-Builtins)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T02:32:50.333

比使用 fork / exec 更简单的是 stdlib“系统”命令。

参见[man 3 系统](http://www.manpagez.com/man/3/system/)。

假设您的 bash 函数在文件“/tmp/scripts.sh”中...

```
system("bash -c \". /tmp/scripts.sh ; func1 ; func2\""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T02:36:05.657

如果你想接收执行脚本的退出代码，你应该使用 system，否则使用 vfork + exec*

# php - 无法将重复记录添加到 json 对象

> ID：14515986
> 
> 赞同：0
> 
> 时间：2013-01-25T05:37:15.080
> 
> 标签：php, json, fullcalendar

我正在尝试对完整日历实施重复事件选项。我只在 db 中存储事件的一个实例及其重复详细信息。

根据重复的细节，我试图从 php 代码中重复事件，我在下面发布。

```
 $calendar_query = "select * from test.calendar where User_Id = 07";
    $Calendar_res = mysql_query($calendar_query) or die(mysql_error());

    while ($calendar_row = mysql_fetch_assoc($Calendar_res)) {
    $flag=false;
    $cal_id=$calendar_row['Calendar_Id'];
    $Repeating_query="select * from repeating_event where Calendar_id='$cal_id'";
    $Repeating_res = mysql_query($Repeating_query) or die(mysql_error());

    while ($repeating_row = mysql_fetch_assoc($Repeating_res)) {

    if($repeating_row['repeats']==0){
    $flag=true; $i=0;
    while($i<$repeating_row['ends_after']){
    if($i==0){

    $eventsArray['id'] =  $calendar_row['Calendar_Id'];
    $eventsArray['userid'] = $calendar_row['User_Id'];
    $eventsArray['title'] = $calendar_row['Event_Title'];
    $eventsArray['start'] = date('Y-m-d H:i:s', strtotime($calendar_row['StartDateTime']));
    $eventsArray['end'] = date('Y-m-d H:i:s', strtotime($calendar_row['EndDateTime']));
    $eventsArray['description'] = $calendar_row['Event_Desc'];
    $eventsArray['venue']=$calendar_row['Event_Venue'];
    $d1=strtotime($calendar_row['StartDateTime']);
    $d2=strtotime($calendar_row['EndDateTime']);
    if($d1==$d2){
    $eventsArray['allDay'] = true;
    }
    else{
    $eventsArray['allDay'] = false;
    }
    }   

    else{

    $eventsArray['id'] =  $calendar_row['Calendar_Id'];
    $eventsArray['userid'] = $calendar_row['User_Id'];
    $eventsArray['title'] = $calendar_row['Event_Title'];
    $eventsArray['start'] = date('Y-m-d H:i:s', strtotime($calendar_row['StartDateTime']) + ($repeating_row['repeats_every']*86400));
    $eventsArray['end'] = date('Y-m-d H:i:s', strtotime($calendar_row['EndDateTime']) + ($repeating_row['repeats_every']*86400));
    $eventsArray['description'] = $calendar_row['Event_Desc'];
    $eventsArray['venue']=$calendar_row['Event_Venue'];
    $d1=strtotime($calendar_row['StartDateTime']);
    $d2=strtotime($calendar_row['EndDateTime']);
    if($d1==$d2){
    $eventsArray['allDay'] = true;
    }
    else{
    $eventsArray['allDay'] = false;
    }
    }  
    $i++;
    }
    }
    }

$events[] = $eventsArray;

}

echo json_encode($events); 
```

***输出是：***

```
[{"id":"20","userid":"7","title":"Suresh Birthday","start":1357686000,"end":1357686000,"description":"suresh birthday on 9t april","venue":"Bangalore","allDay":true},
{"id":"22","userid":"7","title":"appointment with doctor","start":"2012-12-01 01:00:00","end":"2012-12-01 02:00:00","description":"for dental checkup","venue":"fortis","allDay":false},
{"id":"23","userid":"7","title":"asdfasd","start":1363042800,"end":1363042800,"description":null,"venue":null,"allDay":true},
{"id":"70","userid":"7","title":"asdf","start":1358204400,"end":1358204400,"description":"asdf","venue":"asdf","allDay":true},
{"id":"71","userid":"7","title":"rahj","start":1358895600,"end":1358895600,"description":"","venue":"as","allDay":true},
{"id":"81","userid":"7","title":"cc","start":1356908400,"end":1356908400,"description":"cc","venue":"","allDay":true},
{"id":"82","userid":"7","title":"kk","start":1358722800,"end":1358722800,"description":"","venue":"","allDay":true},
{"id":"83","userid":"7","title":"mm","start":1359327600,"end":1359327600,"description":"","venue":"","allDay":true},
{"id":"84","userid":"7","title":"vv","start":1359068400,"end":1359068400,"description":"","venue":"","allDay":true},
{"id":"85","userid":"7","title":"zz","start":1358463600,"end":1358463600,"description":"zz","venue":"zz","allDay":true},
{"id":"87","userid":"7","title":"qq","start":1358118000,"end":1358118000,"description":"qq","venue":"qq","allDay":true}] 
```

***预期结果：-***

```
[{"id":"20","userid":"7","title":"Suresh Birthday","start":1357686000,"end":1357686000,"description":"suresh birthday on 9t april","venue":"Bangalore","allDay":true},
{"id":"22","userid":"7","title":"appointment with doctor","start":"2012-11-28 01:00:00","end":"2012-11-28 02:00:00","description":"for dental checkup","venue":"fortis","allDay":false},
{"id":"22","userid":"7","title":"appointment with doctor","start":"2012-11-29 01:00:00","end":"2012-11-29 02:00:00","description":"for dental checkup","venue":"fortis","allDay":false},
{"id":"22","userid":"7","title":"appointment with doctor","start":"2012-11-30 01:00:00","end":"2012-11-30 02:00:00","description":"for dental checkup","venue":"fortis","allDay":false},
{"id":"22","userid":"7","title":"appointment with doctor","start":"2012-12-01 01:00:00","end":"2012-12-01 02:00:00","description":"for dental checkup","venue":"fortis","allDay":false},
{"id":"22","userid":"7","title":"appointment with doctor","start":"2012-12-02 01:00:00","end":"2012-12-02 02:00:00","description":"for dental checkup","venue":"fortis","allDay":false},
{"id":"23","userid":"7","title":"asdfasd","start":1363042800,"end":1363042800,"description":null,"venue":null,"allDay":true},
{"id":"70","userid":"7","title":"asdf","start":1358204400,"end":1358204400,"description":"asdf","venue":"asdf","allDay":true},
{"id":"71","userid":"7","title":"rahj","start":1358895600,"end":1358895600,"description":"","venue":"as","allDay":true},
{"id":"81","userid":"7","title":"cc","start":1356908400,"end":1356908400,"description":"cc","venue":"","allDay":true},
{"id":"82","userid":"7","title":"kk","start":1358722800,"end":1358722800,"description":"","venue":"","allDay":true},
{"id":"83","userid":"7","title":"mm","start":1359327600,"end":1359327600,"description":"","venue":"","allDay":true},
{"id":"84","userid":"7","title":"vv","start":1359068400,"end":1359068400,"description":"","venue":"","allDay":true},
{"id":"85","userid":"7","title":"zz","start":1358463600,"end":1358463600,"description":"zz","venue":"zz","allDay":true},
{"id":"87","userid":"7","title":"qq","start":1358118000,"end":1358118000,"description":"qq","venue":"qq","allDay":true}] 
```

**您可以在预期中清楚地看到我有 5 个“id”实例：“22”，但在输出中我只得到一个。**

我在这里面临的问题是：-无法保存同一事件的重复实例。

循环结构对我来说似乎没问题，如果我将 echo 语句放入循环中，它会根据重复的细节显示“n”次出现，但如果我将它编码为 json，最终的 json 对象只有事件的最新记录（除了最后重复的事件细节）。

我猜json不允许重复记录，我希望它有重复记录，请建议我，我哪里出错了.. :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:11:55.177

看起来你正在设置`$events[]`几个相同的状态`$eventsArray`......为什么不在每个循环开始时重新初始化它：`$eventsArray=array()`......？

# java - 使用 Jackson 将 JSON 字符串转换为漂亮的打印 JSON 输出

> ID：14515994
> 
> 赞同：191
> 
> 时间：2013-01-25T05:37:46.917
> 
> 标签：java, json, jackson, pretty-print

这是我拥有的 JSON 字符串：

```
{"attributes":[{"nm":"ACCOUNT","lv":[{"v":{"Id":null,"State":null},"vt":"java.util.Map","cn":1}],"vt":"java.util.Map","status":"SUCCESS","lmd":13585},{"nm":"PROFILE","lv":[{"v":{"Party":null,"Ads":null},"vt":"java.util.Map","cn":2}],"vt":"java.util.Map","status":"SUCCESS","lmd":41962}]} 
```

我需要将上面的 JSON`String`转换为 Pretty Print JSON 输出（使用 Jackson），如下所示：

```
{
    "attributes": [
        {
            "nm": "ACCOUNT",
            "lv": [
                {
                    "v": {
                        "Id": null,
                        "State": null
                    },
                    "vt": "java.util.Map",
                    "cn": 1
                }
            ],
            "vt": "java.util.Map",
            "status": "SUCCESS",
            "lmd": 13585
        },
        {
            "nm": "PROFILE
            "lv": [
                {
                    "v": {
                        "Party": null,
                        "Ads": null
                    },
                    "vt": "java.util.Map",
                    "cn": 2
                }
            ],
            "vt": "java.util.Map",
            "status": "SUCCESS",
            "lmd": 41962
        }
    ]
} 
```

任何人都可以根据我上面的例子给我一个例子吗？如何实现这个场景？我知道有很多例子，但我无法正确理解这些例子。任何帮助都将通过一个简单的示例来表示。

**更新：**

下面是我正在使用的代码：

```
ObjectMapper mapper = new ObjectMapper();
System.out.println(mapper.defaultPrettyPrintingWriter().writeValueAsString(jsonString)); 
```

但这不适用于我需要上述输出的方式。

这是我用于上述 JSON 的 POJO：

```
public class UrlInfo implements Serializable {

    private List<Attributes> attribute;

}

class Attributes {

    private String nm;
    private List<ValueList> lv;
    private String vt;
    private String status;
    private String lmd;

}

class ValueList {
    private String vt;
    private String cn;
    private List<String> v;
} 
```

谁能告诉我我是否为 JSON 获得了正确的 POJO？

**更新：**

```
String result = restTemplate.getForObject(url.toString(), String.class);

ObjectMapper mapper = new ObjectMapper();
Object json = mapper.readValue(result, Object.class);

String indented = mapper.defaultPrettyPrintingWriter().writeValueAsString(json);

System.out.println(indented);//This print statement show correct way I need

model.addAttribute("response", (indented)); 
```

下面的行打印出如下内容：

```
System.out.println(indented);

{
  "attributes" : [ {
    "nm" : "ACCOUNT",
    "error" : "null SYS00019CancellationException in CoreImpl fetchAttributes\n java.util.concurrent.CancellationException\n\tat java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:231)\n\tat java.util.concurrent.FutureTask.",
    "status" : "ERROR"
  } ]
} 
```

这是我需要展示的方式。但是当我像这样将它添加到模型时：

```
model.addAttribute("response", (indented)); 
```

然后在结果表单 jsp 页面中显示出来，如下所示：

```
 <fieldset>
        <legend>Response:</legend>
            <strong>${response}</strong><br />

    </fieldset> 
```

我得到这样的东西：

```
{ "attributes" : [ { "nm" : "ACCOUNT", "error" : "null    
SYS00019CancellationException in CoreImpl fetchAttributes\n 
java.util.concurrent.CancellationException\n\tat 
java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:231)\n\tat 
java.util.concurrent.FutureTask.", "status" : "ERROR" } ] } 
```

我不需要。我需要上面打印出来的方式。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：286
> 
> 时间：2013-01-26T00:25:45.033

要缩进任何旧的 JSON，只需将其绑定为`Object`，例如：

```
Object json = mapper.readValue(input, Object.class); 
```

然后用缩进写出来：

```
String indented = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(json); 
```

这避免了您必须定义实际的 POJO 来将数据映射到。

或者您也可以使用`JsonNode`（JSON 树）。

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2014-06-01T17:32:09.107

最简单也是最紧凑的解决方案（适用于 v2.3.3）：

```
ObjectMapper mapper = new ObjectMapper();
mapper.enable(SerializationFeature.INDENT_OUTPUT);
mapper.writeValueAsString(obj) 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-01-14T02:49:06.633

使用 Jackson 1.9+ 的新方法如下：

```
Object json = OBJECT_MAPPER.readValue(diffResponseJson, Object.class);
String indented = OBJECT_MAPPER.writerWithDefaultPrettyPrinter()
                               .writeValueAsString(json); 
```

输出将被正确格式化！

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-02-26T05:42:20.170

对于 Jackson 1.9，我们可以使用以下代码进行漂亮的打印。

```
ObjectMapper objectMapper = new ObjectMapper();
objectMapper.enable(SerializationConfig.Feature.INDENT_OUTPUT); 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-07-29T08:02:25.907

我认为，这是美化json数据最简单的技术，

```
String indented = (new JSONObject(Response)).toString(4); 
```

其中***响应***是一个字符串。

只需在方法中传递 4(indentSpaces) `toString()`。

**注意：**它在没有任何库的 android 中运行良好。但是在 java 中你必须使用[org.json](https://github.com/stleary/JSON-java)库。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2020-05-15T22:38:57.847

[`ObjectMapper.readTree()`](https://fasterxml.github.io/jackson-databind/javadoc/2.9/com/fasterxml/jackson/databind/ObjectMapper.html#readTree-java.lang.String-)可以在一行中做到这一点：

```
mapper.readTree(json).toPrettyString(); 
```

由于`readTree`产生 a [`JsonNode`](http://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/JsonNode.html#toPrettyString--)，这几乎总是会产生等效的漂亮格式的 JSON，因为它`JsonNode`是底层 JSON 字符串的直接树表示。

## 在杰克逊 2.10 之前

该[`JsonNode.toPrettyString()`](http://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/JsonNode.html#toPrettyString--)方法是在 Jackson 2.10 中添加的。在此之前，需要第二次调用 来`ObjectMapper`编写格式化的结果：

```
mapper.writerWithDefaultPrettyPrinter()
        .writeValueAsString(mapper.readTree(json)); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-12-05T08:47:07.900

您可以使用以下方式实现此目的：

**1.使用杰克逊**

```
 String formattedData=new ObjectMapper().writerWithDefaultPrettyPrinter()
.writeValueAsString(YOUR_JSON_OBJECT); 
```

导入波纹管类：

```
import com.fasterxml.jackson.databind.ObjectMapper; 
```

它的gradle依赖是：

```
compile 'com.fasterxml.jackson.core:jackson-core:2.7.3'
compile 'com.fasterxml.jackson.core:jackson-annotations:2.7.3'
compile 'com.fasterxml.jackson.core:jackson-databind:2.7.3' 
```

**2\. 使用谷歌的 Gson**

```
String formattedData=new GsonBuilder().setPrettyPrinting()
    .create().toJson(YOUR_OBJECT); 
```

导入波纹管类：

```
import com.google.gson.Gson; 
```

它的gradle是：

```
compile 'com.google.code.gson:gson:2.8.2' 
```

在这里，您还可以从存储库下载正确的更新版本。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-01-25T06:03:07.383

[这看起来可能是您问题的答案](https://stackoverflow.com/a/6339454/61624)。它说它正在使用 Spring，但我认为这对你的情况仍然有帮助。让我在这里内联代码，这样更方便：

```
import java.io.FileReader;

import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.ObjectWriter;

public class Foo
{
  public static void main(String[] args) throws Exception
  {
    ObjectMapper mapper = new ObjectMapper();
    MyClass myObject = mapper.readValue(new FileReader("input.json"), MyClass.class);
    // this is Jackson 1.x API only: 
    ObjectWriter writer = mapper.defaultPrettyPrintingWriter();
    // ***IMPORTANT!!!*** for Jackson 2.x use the line below instead of the one above: 
    // ObjectWriter writer = mapper.writer().withDefaultPrettyPrinter();
    System.out.println(writer.writeValueAsString(myObject));
  }
}

class MyClass
{
  String one;
  String[] two;
  MyOtherClass three;

  public String getOne() {return one;}
  void setOne(String one) {this.one = one;}
  public String[] getTwo() {return two;}
  void setTwo(String[] two) {this.two = two;}
  public MyOtherClass getThree() {return three;}
  void setThree(MyOtherClass three) {this.three = three;}
}

class MyOtherClass
{
  String four;
  String[] five;

  public String getFour() {return four;}
  void setFour(String four) {this.four = four;}
  public String[] getFive() {return five;}
  void setFive(String[] five) {this.five = five;}
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-09-02T22:50:39.383

由于`jackson-databind:2.10`JsonNode 具有[`toPrettyString()`](https://fasterxml.github.io/jackson-databind/javadoc/2.10/com/fasterxml/jackson/databind/JsonNode.html#toPrettyString--)轻松格式化 JSON 的方法：

```
objectMapper
  .readTree("{}")
  .toPrettyString()
; 
```

从[文档](https://fasterxml.github.io/jackson-databind/javadoc/2.10/com/fasterxml/jackson/databind/JsonNode.html#toPrettyString--)：

> `public [String](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true) toPrettyString()`
> 
> 替代方案[`toString()`](https://fasterxml.github.io/jackson-databind/javadoc/2.10/com/fasterxml/jackson/databind/JsonNode.html#toString--)将使用 Jackson 默认的漂亮打印机序列化此节点。
> 
> **自：**
> 2.10

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-23T09:29:44.430

如果您格式化字符串并返回对象，如`RestApiResponse<String>`，您将获得不需要的字符，如转义等：`\n`, `\"`. 解决方案是将您的 JSON 字符串转换为 Jackson JsonNode 对象并返回`RestApiResponse<JsonNode>`：

```
ObjectMapper mapper = new ObjectMapper();
JsonNode tree = objectMapper.readTree(jsonString);
RestApiResponse<JsonNode> response = new RestApiResponse<>();
apiResponse.setData(tree);
return response; 
```

# c# - 如何在 C# 中使用反射实现挂钩？

> ID：14515997
> 
> 赞同：0
> 
> 时间：2013-01-25T05:38:15.043
> 
> 标签：c#, .net, plugins, architecture

为了我自己的乐趣和学习 C# 反射 API，我一直在玩弄一个完全由插件构建的无用应用程序的想法，这样主程序所做的唯一事情就是读取一个配置文件，然后加载一个插件将继续加载它配置为动态加载的所有其他程序集。

为此，我正在考虑使用属性来定义 (...)services(?) 和事件（为了参数，我们将它们称为 ServiceAttribute(string) EventAttribute(string)，其中参数是名称钩子），然后保留一张我们可以在哪里找到这些的表格。一个例子是这样的

```
namespace example{
  public class Plugin : IPlugin{
    [Service("myService")]
    public void PrintFrickingEverything(params string[] toPrint){
      foreach(string s in toPrint){
        Console.WriteLine(s);
      }
    }
  }
} 
```

并且可以通过询问“example.Plugin.myService”以某种方式访问​​该钩子

然而，有几件事一直萦绕在我的脑海中，

一：这个实现似乎是Martin Fowler的服务定位器模式，我认为它把事情耦合得太紧了，如果可能的话宁愿避免它。

二：虽然我做了类似的事情来为 PHP 中的插件创建调度程序，但 C# 中的类型安全性使这种方法变得困难。

我知道我可以使用 MS 的库来做这类事情，但我想自己从头开始构建它，这样我就可以一路了解它，以帮助我以后写其他东西。

无论如何，tl;博士：我想以某种方式超越打字系统并能够将这些方法保存在某个地方，但仍然能够调用它们而无需诉诸于强制转换对象数组。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:52:28.313

是的。您正在尝试做的是我们几年前做插件的方式，并且效果很好。现在我们有 MEF 来做，但是为了学习，我建议看看这个： http: [//www.codeproject.com/Articles/6334/Plug-ins-in-C](http://www.codeproject.com/Articles/6334/Plug-ins-in-C)

# android - 创建具有 3 个以上选项的弹出框？

> ID：14515999
> 
> 赞同：-1
> 
> 时间：2013-01-25T05:38:19.183
> 
> 标签：android, android-layout

我知道如何使用 3 个选项制作 AlertDialog 框。

我想要做的是在我单击一个按钮后，会弹出一个包含大约 7 或 8 个选项的框，例如按钮或选项列表。

我可以用什么来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:39:43.993

您可以创建自定义对话框。 [http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)