# StackOverflow 问答 15760000-15760999

# android - 将 EditText 文本转换为提示。- 安卓

> ID：15760008
> 
> 赞同：0
> 
> 时间：2013-04-02T09:00:26.313
> 
> 标签：android, android-edittext

好。我的问题是

我想让`EditText`用户插入的文本成为提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:02:49.193

我认为你想这样做

```
String text = edittext.getText();
edittext.setHint(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:03:36.023

试试这个...

```
EditText editText= (EditText) findViewById(R.id.edit_text);
String txt= editText.getText().toString();
editText.messageText.setHint(txt); 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:13:17.143

在你的 xml 中使用 android:hint...like--

```
 <EditText android:hint="Hello" /> 
```

在这里设置你想要给出的提示

# .htaccess - htacess seo友好不工作proplery

> ID：15760010
> 
> 赞同：0
> 
> 时间：2013-04-02T09:00:40.140
> 
> 标签：.htaccess, url, seo

我正在尝试为我的页面[http://www.jobslamp.com/jobsbystate.php?s=af3d1405&st=Kerala](http://www.jobslamp.com/jobsbystate.php?s=af3d1405&st=Kerala)制作 seo 友好的网址。我之前尝试过一些 htacess 代码，但后来设计丢失了。你能否建议适当的 htacess 代码来实现这一点。我想获得一个像[http://www.jobslamp.com/jobsbystate.php/af3d1405&st/Kerala这样的网址](http://www.jobslamp.com/jobsbystate.php/af3d1405&st/Kerala)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:24:09.190

这听起来像您使用相对 URI 而不是绝对 URI 链接到 CSS 或 javascript。您可以通过添加前导斜杠（例如）使所有链接成为绝对链接：

```
<link rel="stylesheet" href="main.css" type="text/css"> 
```

至：

```
<link rel="stylesheet" href="/main.css" type="text/css"> 
```

或者，您可以通过添加以下内容在页面标题中定义 URI 基础：

```
<base href="/"> 
```

或任何基础应该是。

# jquery - 将完整日历右标题从按钮更改为列出项目

> ID：15760012
> 
> 赞同：1
> 
> 时间：2013-04-02T09:00:41.680
> 
> 标签：jquery, html, css, fullcalendar

我正在使用 FullCalendar 执行以下操作 - 请建议最好的方法：

1.  我想将右标题重新定位到最左端
2.  目前，标题选项显示为内联块按钮。我希望它们显示为列表项。onclick 功能不应受到影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:43:22.420

我自己想通了：添加一个新按钮只需要添加以下
$('.fc-header-right').append('Some Button');

要将所有标题右侧按钮以垂直列表显示格式对齐屏幕左侧，需要将样式添加到 fullCalendar.css

```
.fc-header-right{
     position:absolute;
     left:0 ;
} 
```

并向按钮添加一个类并向该类添加样式

```
.fc-header-right-button {
    position: relative;
    display: table;
    padding: 0 .6em;
    overflow: hidden;
    height: 1.9em;
    line-height: 1.9em;
    white-space: nowrap;
    cursor: pointer;
    margin-left: 50px;
} 
```

# jquery - jQuery 动画增长和缩小大小问题

> ID：15760013
> 
> 赞同：0
> 
> 时间：2013-04-02T09:00:41.683
> 
> 标签：jquery, jquery-animate

我的代码出了点问题，它的行为很奇怪。我写了一个代码，在悬停时，标题宽度将增加并适合容器宽度，我的代码它正在工作，但是如果你悬停并连续悬停，标题的宽度会增加并且不会恢复到默认宽度- 我知道令人困惑，所以我在这里给出代码......请帮助

HTML

```
 <div class="cat-boxes">
                <img src="img/3.jpg" />
                <div class="cat-boxes-desc">
                    <span class="cat-title"><h3>culture and history</h3></span>
                    <p>
                        Festivals are true celebrations in God's Own Country
                    </p>
                    <a href="archive.html" class="articles">Articles</a>
                </div>
            </div><!--end cat-boxes--> 
```

CSS

```
 .cat-boxes{
width:300px;
overflow:hidden;
position:relative;
background:#ecebeb;
float:left;
margin-bottom:25px;
}
.cat-boxes img{
width:100%;
}
.cat-boxes-desc{
width:234px;
height:115px;
padding:6px 15px;
position:relative;
z-index:999;
background:rgba(255, 255, 255, .5);
margin: -25px auto 15px auto;
}
.cat-boxes-desc .cat-title{
display:inline-block;
padding:0 15px;
line-height:35px;
position:absolute;
top:-35px;
right:0;
background:#04a732;
}
.cat-boxes-desc .cat-title h3{
font-size:14px;
font-family:Arial, Helvetica, sans-serif;
line-height:35px;
text-align:center;
color:white;
text-transform:uppercase;
font-weight:normal;
margin:0;
}
.cat-boxes-desc p{
font: 14px Arial, Verdana, Geneva, sans-serif;
color:black;
line-height:20px;
text-transform:uppercase
} 
```

jQuery

```
 $(function(){
$('.cat-boxes').hover(function(){
$wd = $(this).find($('.cat-title')).width();

$(this).find($('.cat-title')).stop().animate({ 
top: '-35px',
right: '-20px',
width:'105%',
'text-align':'center'
}, {duration: "slow"});
}, function(){

$(this).find($('.cat-title')).stop().animate({ 
top: '-35px',
right: '0px',
width: $wd
}, {duration: "slow"});

});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:20:27.147

试试这个脚本

```
 $(function () {
        $('.cat-boxes').mouseover(function () {
            wd = $(this).find('.cat-title').width();

            $(this).find('.cat-title').stop().animate({
                top: '35px',
                right: '-20px',
                width: '105%',
                    'text-align': 'center'
            }, 'slow' );
        }).mouseout(function () {

            $(this).find('.cat-title').stop().animate({
                top: '-35px',
                right: '-40px',
                width: wd
            }, 'slow' );

        });
    }); 
```

jsfiddle 为它 [http://jsfiddle.net/wmMpN/](http://jsfiddle.net/wmMpN/)

# jquery - 如果使用 jQuery Cycle2 插件只有一张幻灯片，则隐藏“下一个/上一个”导航

> ID：15760018
> 
> 赞同：1
> 
> 时间：2013-04-02T09:00:54.980
> 
> 标签：jquery, css, api, slideshow, jquery-cycle

在幻灯片中只有一张幻灯片的情况下，我想隐藏`.cycle-next`由`data-cycle-next`属性生成的“下一步”控制按钮 ( )。我目前似乎没有它的工作。

我有以下 HTML（只需取消注释`img`标签以使用不同的幻灯片计数进行测试）：

```
<div class="cycle-slideshow" 
   data-cycle-timeout="0" 
   data-cycle-next=".cycle-next" 
   >
   <img src="http://placehold.it/250x250" />
   <!--<img src="http://placehold.it/350x250" />-->
   <!--<img src="http://placehold.it/450x250" />-->
</div>
<div class="cycle-next">Next</div> 
```

还有我的 jQuery，基于 Cycle2 [API](http://www.malsup.com/jquery/cycle2/api/)：

```
$('.cycle-slideshow').on('cycle-initialized', function (e, opts, API) {
    if (opts.slideCount == 1) {
        $(".cycle-next").css("display", "none");
    }
}); 
```

这里也是一个[小提琴](http://jsfiddle.net/approach/MCWvA/3/)。

任何人都可以确定问题可能是什么，或建议使用另一种解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:24:35.253

你在找这样的东西吗？您可以像这样使用元素的`length`属性：`div``children`

```
var slides = $('.cycle-slideshow').children().length;
if(slides <= 1) {
    $('.cycle-next').css("display", "none");
} else {
    $('.cycle-next').css("display", "visible");
}
$('.cycle-slideshow').on('cycle-initialized', function (e, opts, API) {}); 
```

示例：http: [//jsfiddle.net/MCWvA/4/](http://jsfiddle.net/MCWvA/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:23:53.537

您可以找到 img 的数量，`.length`然后可以隐藏下一个按钮。

[检查这个小提琴](http://jsfiddle.net/MCWvA/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T17:49:03.007

这是我用于带有 div 的 Cycle2 幻灯片的替代方法：

```
// flag slideshows with only a single slide by adding a "cycle-single" class
$('.cycle-slideshow').each(function( i ) { if( $(this).children('.cycle-slide').not('.cycle-sentinel').length <= 1 ) $(this).addClass('cycle-single'); }); 
```

这会为任何只有一张幻灯片（或没有）的任何人添加一个`cycle-single`类。`.cycle-slideshow`然后，您可以基于`.cycle-slideshow.cycle-single`例如执行 css 规则。

```
.cycle-slideshow.cycle-single + .cycle-next {
  display: none;
} 
```

在 OP 的情况下。只要语法一致，这应该适用于每页的多个滑块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-25T04:20:10.843

在这里，您需要将 ID = slideshow 添加到您的代码中：

```
 <div id="slideshow" class="cycle-slideshow" 
       data-cycle-timeout="0" 
       data-cycle-next=".cycle-next" 
       >
       <img src="http://placehold.it/250x250" />
       <!--<img src="http://placehold.it/350x250" />-->
       <!--<img src="http://placehold.it/450x250" />-->
    </div>
    <div class="cycle-next">Next</div> 
```

然后使用：

```
 $('#slideshow').on('cycle-initialized', function (e, opts) {
        if (opts.slideCount <= 1) {
            $(".cycle-next").css("opacity", 0);
        }
    }); 
```

# javascript - 将正确的 jQuery 选择器传递给对象

> ID：15760019
> 
> 赞同：2
> 
> 时间：2013-04-02T09:00:56.540
> 
> 标签：javascript, jquery, namespaces

我正在编写一个 jQuery 插件，理想情况下我想在它自己的命名空间中。

到目前为止，这似乎有效（就命名空间嵌套而言）

```
(function($) {
    $.fn.nspace = {
        foo: function() {
            // Does not work becuase $(this) is not the correct selector.
            $(this).show();
        }
    }
})(jQuery); 
```

所以给定上面的例子，我可能会这样调用我的函数：

```
$("html, body").nspace.foo(); 
```

但`$(this)`不是`[html, body]`......我该如何解决这个问题？

**编辑：**澄清（基于用户评论）......

`$("html, body").nspace.foo();`应该调用 foo`[html, body]`但是，`$(this)`在 nspace 内部解析为 nspace ......所以它试图调用`nspace.foo();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:16:01.473

您应该考虑为 jQuery 插件使用经典模式：只定义一种方法：在您的情况下，nspace。在此方法中，您将考虑每种情况。听起来很难，但是一旦你研究了它就很容易[了](http://docs.jquery.com/Plugins/Authoring)。（顺便说一下，在编写 jQuery 插件时你肯定要看看这个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:03:16.047

你不应该这样做，只是因为我不喜欢有人在编程中说“你不能”（通常是不真实的，尤其是在 Javascript 中）——你可以这样做：

jQuery 对象每次都使用它的原型函数构造，该函数别名为 fn.init，因此您可以使用包装函数覆盖它，该函数以不损害任何现有用法或库的方式添加命名空间对象，像这样：

```
(function($) {
    var baseInit = $.fn.init;
    $.fn.init = function(selector, context, rootjQuery) {
        // Instantiate jQuery the way it expects
        var j = new baseInit(selector, context, rootjQuery);

        // Add our extra object/namespace
        // Use j inside to refer to the current jQuery object
        j.nspace = {
            foo: function() {
                j.show();
            }
        };

        // Return it all and other libraries are none the wiser
        return j;
    }
})(jQuery); 
```

[http://jsfiddle.net/b9chris/7TPZY/](http://jsfiddle.net/b9chris/7TPZY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:15:53.200

您不能将对象添加为插件并仍然获取用于获取该对象的 jQuery 对象。当您调用对象中的方法时，您根本没有引用该 jQuery 对象。

把函数直接作为插件：

```
(function($) {
  $.fn.nspace = function() {
    this.show();
  };
})(jQuery); 
```

用法：

```
$("html, body").nspace(); 
```

（注意，对象是 jQuery 实例，不是选择器或元素，所以不需要使用`$(this)`）。

# java - 如何按类过滤列表？

> ID：15760022
> 
> 赞同：1
> 
> 时间：2013-04-02T09:01:06.620
> 
> 标签：java, gwt, collections, guava

我有一个超类型列表，并且想要过滤属于特定实现类的所有对象。

```
class Base;
class Bar extends Base;
class Foo extends Base;

List<Base> list; 
```

当我使用 GWT 时，仅部分支持 Guava。因此，我不能使用以下内容，否则在普通 java 中可以使用：

```
Lists.newArrayList(Iterables.filter(list, Bar.class)); 
```

我如何替换它以与 GWT 兼容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T11:47:29.653

```
Iterables#filter(Iterable<?> unfiltered, Class<T> type) 
```

和

```
Predicates#instanceOf(Class<?> clazz) 
```

是 GWT 不兼容的，因为`Class#isInstance(Object obj)`在 GWT 中不受支持，因为它破坏了 GWT 编译器优化，并且 GWT 试图远离反射。

但是，该`instanceof`关键字可用。因此，以下将起作用：

```
 Iterables.filter(list, new Predicate<Base>() {
        @Override
        public boolean apply(Base input) {
            return input instanceof Bar;
        }
    }); 
```

也就是说，编写起来可能更容易/更干净（请参阅[Guava wiki 警告](https://code.google.com/p/guava-libraries/wiki/FunctionalExplained)）：

```
 List<Bar> bars = Lists.newArrayList();
    for (Base base : list) {
        if (base instanceof Bar) {
            bars.add((Bar) base);
        }
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-02T09:32:48.323

当您使用泛型 BASE 时..它会自动为您过滤 BASE 类..但是如果您想要根据上面示例中提到的 BASE 类的子类来指定..这是不可能的..

# css - 多个元素上的 CSS3 动画问题

> ID：15760023
> 
> 赞同：0
> 
> 时间：2013-04-02T09:01:06.930
> 
> 标签：css, css-transitions

我需要在父元素的“悬停”动作上为两个元素设置动画。

**JS小提琴是：[这里](http://jsfiddle.net/velmurugansp/qrmWA/)**

我在这里包含了相同的代码：

这是我的**HTML**代码：

```
<div class="dealList"><a href="#" title="View Deal" class="viewDeal"><span>&nbsp;</span>View</a></div> 
```

而**CSS3**是

```
-webkit-animation-name: expand;-webkit-animation-duration: 1s;-webkit-animation-iteration-count: 1;    -webkit-animation-timing-function: linear;    -moz-animation-name: expand;     -moz-animation-duration: 1s;     -moz-animation-iteration-count: 1;    -moz-animation-timing-function: linear;}.dealList .viewDeal span{    display: inline-block;    width: 14px;    height: 14px;    background: url(../images/star_view.png) no-repeat;    -webkit-transition-property: -webkit-transform;    -webkit-transition-duration: 1s;    -moz-transition-property: -moz-transform;    -moz-transition-duration: 1s;}.dealList .viewDeal:hover span{    -webkit-animation-name: rotate;     -webkit-animation-duration: 2s;     -webkit-animation-iteration-count: infinite;    -webkit-animation-timing-function: linear;    -moz-animation-name: rotate;    -moz-animation-duration: 2s;    -moz-animation-iteration-count: infinite;    -moz-animation-timing-function: linear;}@-webkit-keyframes rotate {    from {-webkit-transform: rotate(0deg);}    to {-webkit-transform: rotate(-360deg);}}@-moz-keyframes rotate {    from {-moz-transform: rotate(0deg);}    to {-moz-transform: rotate(360deg);}}@-webkit-keyframes expand {    from {width: 14px;}    to {width: 80px;}}@-moz-keyframes expand {    from {width: 14px;}    to {width: 80px;}} 
```

我需要星星旋转，“视图”应该会出现。一旦宽度达到最大限制，它应该保持不变并且星星应该停止旋转。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:10:44.143

将您的显示属性更改为`inline-block`.

```
.dealList .viewDeal{
    display: inline-block; 
    ... 
```

这是小提琴：http: [//jsfiddle.net/qrmWA/1/](http://jsfiddle.net/qrmWA/1/)

# quickblox - QuickBlox：登录后如何更改用户密码？

> ID：15760024
> 
> 赞同：1
> 
> 时间：2013-04-02T09:01:12.297
> 
> 标签：quickblox

登录后有什么方法可以更改用户的密码吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:16:37.310

当然

```
QBUUser *user = [QBUUser user];
user.ID = 300;
user.oldPassword = @"fgrhpass";
user.password = @"newpassword";

[QBUsers updateUser:user delegate:self]; 
```

# php - OnClick 事件 - 在 Mozilla 中通过 ajax 运行 php 脚本

> ID：15760025
> 
> 赞同：2
> 
> 时间：2013-04-02T09:01:13.973
> 
> 标签：php, ajax, onclick, mozilla

我解决了一个仅在 Mozilla 的一项更新中出现的问题。我在 jQuery 中有一个程序，它记录点击元素 div#region。点击运行php脚本，点击保存在数据库中。但是如果这个div链接点击的话，虽然php脚本记录点击使用$.get调用，但是并没有启动。这就是它在 Mozilla 中的行为方式，在任何其他浏览器中我都没有看到过这种行为。如果您可以在 Firebug 中查看调用 php 脚本。

它是安全、优化还是其他方面的标准行为？或者这是一个 Mozilla 错误还是它的代码写得不好？

HTML：

```
<div id="region">
<p>nejaky text</p>
<a href="http://www.test.cz" target="_blank">click</a>
</div> 
```

JAVASCRIPT

```
$(document).ready(function(){
$("#region").click(function(){
$.get('/ajax/add_click.php?id=5');
});
});
}); 
```

我在互联网上找不到解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:05:08.913

尝试像这样改变

```
<div id="region">
   <p>nejaky text</p>
   <a href="http://www.test.cz" target="_blank">click</a>
</div> 
```

你的jQuery将是

```
$(document).ready(function(){
   $("#region").click(function(e){
       e.preventDefault();         //Add preventDefault here
       window.open($(this + 'a').attr('href'));
       $.get('/ajax/add_click.php?id=5');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:15:08.077

您是否在本地文件系统上进行了测试？当我在本地尝试您的代码时，我也没有看到任何事情发生，但是在远程服务器上它确实对我有用。

# java - 如果未安装，请安装 JRE

> ID：15760026
> 
> 赞同：4
> 
> 时间：2013-04-02T09:01:15.017
> 
> 标签：java, deployment

我一直在网上和这个论坛上寻找将 Java 运行时环境包含在我的 Java 应用程序中的正确方法。

我知道 JRE 依赖于机器，因此，如果我想为 MAC 或 Linux 进行部署，随我的应用程序提供的 JRE 将会改变。

我真正想知道的是（假设我之前说的是正确的），是：

**“有没有办法检查客户端机器上是否安装了 JRE，如果没有在尝试运行我的应用程序之前安装它？”**

因为我认为不可能：

**您是否认为我应该使用适合客户端系统的 JRE 文件夹部署我的应用程序，并使用 JRE 文件夹中包含的 java.exe 使用脚本启动我的应用程序？**

这避免了安装任何 Java 的东西，但对我来说这看起来不是一个好习惯......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:09:44.230

如果您的应用程序是客户端的，我将提供两种选择：使用和不使用 JRE 进行安装。许多 Java 应用程序提供这两种安装。例如，SmartGit 应用程序允许您使用捆绑的 JRE 或使用现有 JRE（其用户有责任拥有兼容的 java 版本）的 JRE 下载安装。许多应用程序服务器都带有自己的 JDK，该 JDK 已包含在安装中。

因此，如果您不想给客户带来任何麻烦，那么将部署与您的 JRE 捆绑在一起就可以了；但是，我也允许非 JRE 安装（以满足挑剔者:)。

如果您的应用程序是服务器端的，通常它不附带 JRE，但同样，这不是规则。

此外，您的运行/安装脚本可能会检查是否安装了正确的 JRE 或 JDK（通过检查是否设置了 JAVA_HOME 等），然后在缺少 JRE 时退出。更重要的是，该脚本甚至可以下载 java 并将其安装在本地 - 尽管只使用您为应用程序准备的捆绑 JRE 会更实用。或者，如果检测到 JRE，您可能会询问用户是否要使用现有的 java 或捆绑的。

捆绑 JRE 没什么大不了的。即使我有时会使用捆绑的 JRE 安装 java 应用程序，因为我将系统打开到例如应用程序不支持的新版本或 64 位版本的 java 等等......

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:03:15.420

`java -version`windows的CMD命令告诉JVM版本；所以你可以根据这个命令的输出来决定是否需要安装。

> C:\用户\501200I958>java-版本

`java version "1.7.0_17" Java(TM) SE Runtime Environment (build 1.7.0_17-b02) Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)`

# javascript - Jquery Mobile，不工作对话框

> ID：15760027
> 
> 赞同：1
> 
> 时间：2013-04-02T09:01:18.067
> 
> 标签：javascript, jquery-mobile

我不明白为什么这个对话框不起作用。我正在使用 jqm 1.3

```
<a href="#foo" data-rel="dialog">Open dialog</a>

<div id="foo" data-role="dialog">
    <div data-role="header" data-theme="d">
        <h1>Dialog</h1>
    </div>
    <div data-role="content">
        <h1>Delete page?</h1>
        <p>This is a regular page, styled as a dialog. To create a dialog, just link to a normal page and include a transition and <code>data-rel="dialog"</code> attribute.</p>
        <a href="dialog/index.html" data-role="button" data-rel="back" data-theme="b">Sounds good</a>       
        <a href="dialog/index.html" data-role="button" data-rel="back" data-theme="c">Cancel</a>    
    </div>
</div> 
```

我在“头”上加了

```
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js> 
```

和其他 jqm 事件正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:12:26.297

您需要包装您的锚标记，该标记在页面 div 中调用对话框，如下所示。

```
<div data-role="page">
    <div data-role="content">
<a href="#foo" data-rel="dialog">Open dialog</a>
    </div>
</div>

<div id="foo" data-role="dialog">
    <div data-role="header" data-theme="d">
        <h1>Dialog</h1>
    </div>
    <div data-role="content">
        <h1>Delete page?</h1>
        <p>This is a regular page, styled as a dialog. To create a dialog, just link to a normal page and include a transition and <code>data-rel="dialog"</code> attribute.</p>
        <a href="dialog/index.html" data-role="button" data-rel="back" data-theme="b">Sounds good</a>       
        <a href="dialog/index.html" data-role="button" data-rel="back" data-theme="c">Cancel</a>    
    </div>
</div> 
```

您可以在以下位置查看示例`**[Live fiddle](http://jsfiddle.net/mayooresan/y5Ttv/)**`

# ios - 如何在任务切换器和锁定屏幕中暂停音乐？

> ID：15760029
> 
> 赞同：0
> 
> 时间：2013-04-02T09:01:18.973
> 
> 标签：ios

我需要在 ios 的后台播放来自 url 的音乐。我试过`MPMoviePlayerController`and `AVPlayer`，它可以在后台成功播放音乐。

但我无法通过任务切换器和锁定屏幕中的“暂停”按钮停止音乐。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:11:22.343

我在以下答案中找到了答案：

用于从任务切换器暂停音乐： [iOS MPMoviePlayerController 在后台播放音频](https://stackoverflow.com/questions/15540726/ios-mpmovieplayercontroller-playing-audio-in-background)

有关显示信息（包括专辑图片），请参阅[`MPNowPlayingInfoCenter`](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPNowPlayingInfoCenter_Class/Reference/Reference.html)

# facebook - Facebook 分享在移动浏览器中不起作用

> ID：15760032
> 
> 赞同：1
> 
> 时间：2013-04-02T09:01:29.740
> 
> 标签：facebook, facebook-graph-api, ruby-on-rails-3.2

我正在使用以下 API 进行 Facebook 共享，它可以在网络浏览器中运行，但不能在移动浏览器中运行。

[https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.facebook.com%2Fphoto.php%3Ffbid%3D503650586358491%26set%3Da.447778305279053.102678.420576761332541%26type%3D1&t= Breaking%3A+BUCKWILD%27s+Shain+已经+死了。+Our+hearts+go+out+to+his+family.+More+info+here%3A+http%3A%2F%2Fon.mtv.com% 2F128hbz2](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.facebook.com%2Fphoto.php%3Ffbid%3D503650586358491%26set%3Da.447778305279053.102678.420576761332541%26type%3D1&t=Breaking%3A+BUCKWILD%27s+Shain+has+died.+Our+hearts+go+out+to+his+family.+More+info+here%3A+http%3A%2F%2Fon.mtv.com%2F128hbz2)

我用的是安卓手机。

错误消息：“找不到您的链接。”

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T07:26:39.060

您需要移动网址才能启动[http://m.facebook.com/sharer.php?u=](http://m.facebook.com/sharer.php?u=) 其余网址也不会那样工作，您需要带有 Facebook Open Graph META 标签的网址网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T10:46:25.330

据我所知，vj_andrei 提供的解决方案不起作用 - m.facebook.com/sharer 网址根本不存在。然而，Facebook 重新引入了[分享按钮](https://developers.facebook.com/docs/plugins/share-button/)，它也适用于移动设备。

# iis-7 - 本地语言的布尔值

> ID：15760035
> 
> 赞同：8
> 
> 时间：2013-04-02T09:01:46.487
> 
> 标签：iis-7, asp-classic, locale, windows-7-x64

这个问题很久以前就在[serverfault](https://serverfault.com/questions/274964/iis-7-5-using-classic-asp-converts-a-boolean-value-to-a-string-in-the-local-lang)上被问过，但没有工作 awnser。我希望有人遇到它并从那时起找到解决方案。

例子：

```
<%
Response.Write True
Response.Write "<hr>"
Response.Write "test:" & True
%> 
```

输出：

```
True
--------------
test:Waar 
```

正如你所看到的，只要你组合输出，它就会变成一个本地字符串（'Waar' 是荷兰语的真）。我需要它保持“真实”。

我怎样才能改变这个？我不介意在页面开头放置一些代码，但我无法更改`True`整个代码中的所有实例。所以创建一个像下面这样的函数来返回正确的字符串是行不通的。

```
Function PB(pVal)
  If pVal Then
    PB = "true"
  Else
    PB = "false"
  End If
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:39:40.180

奇怪，无论设置哪种语言环境，我都无法让我的 IIS 以我的本地语言输出布尔值。

您是否已经找到此[知识库文章](http://support.microsoft.com/kb/306044)？

有一个注册表设置的描述可以做到这一点：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\OLEAUT 
```

我不想弄乱我的生产服务器，所以我还没有尝试过。

* * *

**第一个答案：**

您可以“欺骗”VB 使用您自己的函数。如果您将这些函数添加到页面顶部，VB 将更喜欢这些函数而不是内置函数，在这种情况下`CStr`和`Trim`. 也许这有帮助。

```
 Function PB(pVal)
        If pVal Then
            PB = "true"
        Else
            PB = "false"
        End If
    End Function

    Function CStr(pVal)
        CStr = PB(pVal)
    End Function

    Function Trim(pVal)
        Trim = PB(pVal)
    End Function 
```

输出：

```
 True
    --------------
    test:true
    --------------
    test:true
    --------------
    test:true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T15:17:35.717

我做了这样的事情，但目前没有机器来测试你的案例：

```
<%
Response.Write FormatDateTime(Now) & "<br />"
oldLocale = SetLocale(1026) 'Bulgarian
Response.Write FormatDateTime(Now) & "<br />"
SetLocale oldLocale 
Response.Write FormatDateTime(Now) & "<br />"
%> 
```

...从另一个 SO question 看来，上面的方法不起作用。

如果你尝试这些会发生什么： `Response.Write "test:" & CStr(True)` 或者 `Response.Write "test:" & Trim(True)` 使用或不使用 SetLocale？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T11:37:36.730

这就像字符串连接在 vbscript 中起作用。

来自[vbscript 语言参考](http://msdn.microsoft.com/en-us/library/sx97884w%28v=vs.84%29.aspx)：

> “只要表达式不是字符串，它就会被转换为字符串子类型。如果两个表达式都为 Null，则结果也为 Null。但是，如果只有一个表达式为 Null，则该表达式被视为零长度字符串（“” ) 与另一个表达式连接时。任何为空的表达式也被视为零长度字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T13:01:08.980

如果 SetLocale 不起作用，那么我认为您最好的选择是创建一个函数。

```
Function TF(B)
   If B Then
      TF = "True"
   Else
      TF = "False"
   End If
End Function 
```

然后，而不是这样说：

```
Response.Write "test:" & True 
```

你会这样说：

```
Response.Write "test:" & TF(True) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-02T05:45:42.840

我也被这个“问题”“抓住”了。事实上，这不是问题：

# 问题（示例）

在 SQL 语句中使用布尔数据时，我遇到了同样的问题。在我的法语服务器上，我的 SQL 语句如下：

```
<%
'Set my boolean value
Dim myBoolean
myBoolean = True

'Set my SQL Statement
Dim MySQLStatement
MySQLStatement = "SELECT * FROM MyTable WHERE MyBooleanField = " & myBoolean
'=> Here, as MySQLStatement is a STRING, the boolean data was "converted/rendered" as a localized string. So that leads to this output :
'=> SELECT * FROM MyTable WHERE MyBooleanField = Vrai
'Obviously, that SQL Statement is incorrect, because the SQL Engine does NOT understand what is the "Vrai" word - It should be "True" instead.
%> 
```

# 解释：

*   在您的 Windows 系统上设置哪些区域设置并不重要：基础数据不会发生任何事情。布尔数据类型**仍然**是*BOOLEAN*，使用英语、法语、德语、俄语、泰语、..或任何您想要的语言。
*   事实是数据**只是被呈现**为本地化*字符串*（如日期）。

# 解决方案

经过大量阅读论坛主题后，解决方案不是更改Windows系统上的区域设置，也不是更改注册表项，也不是更改Session.LCID，......绝对和纯代码的**解决方案是转换布尔值（ True|False) 到整数 (0|1)**。然后，这个整数将在字符串中安全使用，并将保持 (0|1)。

**这是以**非本地化形式使用/转换/呈现布尔值的安全方法：**使用整数值**。

```
<%
'Set my boolean value
Dim myBoolean
myBoolean = True

'Set my SQL Statement
Dim MySQLStatement
MySQLStatement = "SELECT * FROM MyTable WHERE MyBooleanField = " & BoolToInt(myBoolean)
'=> Here, as MySQLStatement is a STRING, and as the boolean data was previously "converted/rendered" as an integer, we got this correct SQL Statement :
'=> SELECT * FROM MyTable WHERE MyBooleanField = 1
'This SQL Statement is correct, as the SQL Engine DOES understand that 1 is a boolean.

'This Function Returns an INTEGER value based on a BOOLEAN value
Function BoolToInt(v)
    'INPUT:
    'v      Boolean value    

    'OUTPUT:
    'Integer (0|1)    

    Dim b_OUT
    b_OUT = v    

    'If the Input value is a "True" boolean value (in any language)
    if (b_OUT = True) then
        BoolToInt = cint(1)
    'If the Input value is a "False" boolean value (in any language)
    elseif (b_OUT = False) then
        BoolToInt = cint(0)
    end if
End Function 'BoolToInt
%> 
```

我真的希望它能拯救你的一天！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T07:49:26.720

您可以尝试在页面开头将 Response.LCID 或 Session.LCID 设置为 1033，但这也会影响其他内容（如日期和货币变量）的显示方式。

1033 是美国的区域设置 ID

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T13:53:23.423

Attempt 2:

```
<%
arr=Array("False","True")

Response.Write True
Response.Write "<br /><br />"

Response.Write "" & arr( abs(True) ) & "<br />"
Response.Write "" & arr( abs(False) ) & "<br />"
%> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-01T06:01:36.363

如果您不介意将区域设置更改为美国设置，我找到了解决方案。它涉及更改注册表。这已经在 windows 7 西班牙语中进行了测试，现在它提供原生 True/False 而不是 Verdadero/Falso。

1.  导航到 HKEY_USERS/.Default/Control Panel/International 并用手机拍一张漂亮的照片，以防万一搞砸了。您还可以通过单击“国际”然后单击文件/导出来备份注册表项

2.  打开记事本并将其粘贴到其中（您也可以在注册表中手动更改值）：

----------------- 粘贴此行下方的内容 -------------

```
Windows Registry Editor Version 5.00

[HKEY_USERS\.DEFAULT\Control Panel\International]
"Locale"="00000409"
"LocaleName"="en-US"
"s1159"=""
"s2359"=""
"sCountry"="United States"
"sCurrency"="$"
"sDate"="/"
"sDecimal"="."
"sGrouping"="3;0"
"sLanguage"="ENU"
"sList"=","
"sLongDate"="dddd, MMMM dd, yyyy"
"sMonDecimalSep"="."
"sMonGrouping"="3;0"
"sMonThousandSep"=","
"sNativeDigits"="0123456789"
"sNegativeSign"="-"
"sPositiveSign"=""
"sShortDate"="M/d/yyyy"
"sThousand"=","
"sTime"=":"
"sTimeFormat"="h:mm:ss tt"
"sShortTime"="h:mm tt"
"sYearMonth"="MMMM, yyyy"
"iCalendarType"="1"
"iCountry"="1"
"iCurrDigits"="2"
"iCurrency"="0"
"iDate"="0"
"iDigits"="2"
"NumShape"="1"
"iFirstDayOfWeek"="6"
"iFirstWeekOfYear"="0"
"iLZero"="1"
"iMeasure"="1"
"iNegCurr"="0"
"iNegNumber"="1"
"iPaperSize"="1"
"iTime"="0"
"iTimePrefix"="0"
"iTLZero"="0"

[HKEY_USERS\.DEFAULT\Control Panel\International\Geo]
"Nation"="244" 
```

----------------- 不要粘贴此行 -------------

3.  将其保存为english.reg（或whatever.reg）

4.  双击它。

我不必重新启动计算机即可使更改生效。

- - - - 更新 - - - - -

不工作。如果我用这个创建一个空白的 asp 页面： <%=isnumeric(6)%> 它会回答 True （英文），但是一旦我将 True 连接到一个字符串中，它就会再次变成 Verdadero。

# java - 使用反射——如何获取所有字段和方法

> ID：15760040
> 
> 赞同：1
> 
> 时间：2013-04-02T09:01:58.223
> 
> 标签：java

使用 Java 反射：

*   如何获取给定对象的所有方法（私有、受保护、公共等）
*   也许创建类的结构表示
*   最后，将对象序列化为字符串或字节数组

这个想法看起来不错吗？或者这不会让我到任何地方？

我想要实现的是能够：

*   将任何序列`java.lang.Object`化为字节数组或字符串
*   未实现的类/对象`Serializable`将被扔到我的应用程序中进行序列化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:07:05.203

听起来很复杂。只需使用[XStream](http://xstream.codehaus.org/)。

```
String xml = new XStream().toXML(whatever); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:05:46.327

**问题1：如何获取一个类的所有方法。**

[getDeclaredMethods](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getDeclaredMethods%28%29)将为您提供对类上所有方法的访问。

> 返回一个 Method 对象数组，反映由此 Class 对象表示的类或接口声明的所有方法。这包括公共、受保护、默认（包）访问和私有方法，但不包括继承的方法。

例子： `Method[] methods = Integer.class.getDeclaredMethods();`

**问题 2：创建类的结构表示**

我不确定你为什么需要这样做，因为它已经存在。您总是可以检索一个对象的类，它为您提供了它的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:06:36.103

要获取类的所有方法和字段，请使用`getDeclaredMethods`和`getDeclaredFields`。我不确定您是否可以使用它来重新组合一个不可序列化的类，我也不确定我是否会这样做。但也许你可以在这里找到一些想法：[How to serialize a non-serializable in Java?](https://stackoverflow.com/questions/6163872/how-to-serialize-a-non-serializable-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:11:56.407

`Class.getDeclaredMethods()`并`Class.getDeclaredFields()`返回仅在当前类中声明的具有任何可见性的方法和字段。这些方法不返回继承的东西。为此，您必须遍历类层次结构并为每个超类调用这些方法，即：

```
List<Method> methods = new ArrayList<>();
List<Field> fields = new ArrayList<>();
for (Class c = clazz; c != null; c = c.getSuperClass()) {
    methods.add(c.getDeclaredMethods());    
    fields.add(c.getDeclaredFields());    
} 
```

# c# - wcf 流式传输大文件内存不足错误

> ID：15760044
> 
> 赞同：3
> 
> 时间：2013-04-02T09:02:07.770
> 
> 标签：c#, wcf, file, streaming

我有一个用于传输文件的 wcf 服务。我正在使用 basicHttpBinding Streamed 模式。我在 web.config 和 app.config(client side) 中正确配置了一些值（我猜），但它没有按我预期的那样工作。它最多可以发送和接收 1,610,611,200 字节，接近 1.5 GB。每次我将大于此大小的文件上传到服务器时，在此限制下，我的服务方法都会抛出“读取流时引发异常”。例外。当我尝试下载大于此大小的文件时，它会抛出“抛出'System.OutOfMemoryException'类型的异常。” 例外。这是我的配置文件相关部分。希望有人能给我一些点来解决这个问题。

```
 <basicHttpBinding> (web config)
    <binding name="StreamServiceHttpBinding" receiveTimeout="01:00:10" sendTimeout="03:00:30" maxBufferPoolSize="2147483647"
      maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"
      transferMode="Streamed">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </basicHttpBinding>

 <basicHttpBinding> (app config)
    <binding name="BasicHttpBinding_IStreamService" receiveTimeout="01:00:10"
      sendTimeout="03:00:30" maxBufferPoolSize="2147483647" maxBufferSize="2147483647"
      maxReceivedMessageSize="2147483647" transferMode="Streamed">
      <readerQuotas maxDepth="128" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding> 
  </basicHttpBinding> 
```

顺便说一句，我在服务器上有 8gb 的内存，在客户端也有 8gb 的内存。因为它是流式传输模式，它不一定使用公羊，但我现在想如果它是一个内存问题:(任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T08:02:08.907

上周我遇到了同样的问题。我想我找到了解决方案。我更改了 maxReceivedMessageSize="4294967295"（近 4GB）并增加了超时。

应用程序配置

```
<bindings>
      <basicHttpBinding>
        <binding name="GShare.Sharer" receiveTimeout="00:40:00" sendTimeout="00:40:00" maxReceivedMessageSize="4294967295" maxBufferSize="2147483647" maxBufferPoolSize="4294967295" transferMode="StreamedRequest">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
          <security mode="None">
          </security>
        </binding>
      </basicHttpBinding>
</bindings>

<system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="4294967295"/>
      </requestFiltering>
    </security>
  </system.webServer> 
```

客户端 web.config

```
<binding name="BasicHttpBinding_ISharer" closeTimeout="24:01:00" openTimeout="24:01:00" receiveTimeout="24:10:00" sendTimeout="24:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="4294967295" maxBufferSize="2147483647" maxReceivedMessageSize="4294967295" textEncoding="utf-8" transferMode="Streamed" useDefaultWebProxy="true" messageEncoding="Text">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
 </binding> 
```

之后，我成功上传了 1.89GB 的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-25T11:12:00.657

谢谢@JJ_CoderHir。

我遇到了同样的问题。使用下面的代码可以解决。根据我的理解，由于“requestLengthDiskThreshold”的默认值正确，我遇到了 System.OutOfMemory 问题。所以我已经改变它现在它按照我的期望工作。

```
<system.web>
    <httpRuntime maxRequestLength="2147483647" requestLengthDiskThreshold="2097151" executionTimeout="240"/>
</system.web>
<system.webServer>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="2147483648" />
        </requestFiltering>
    </security>
</system.webServer> 
```

# xslt - 基于配置文件的 XSLT 转换

> ID：15760051
> 
> 赞同：2
> 
> 时间：2013-04-02T09:02:23.757
> 
> 标签：xslt

输入：

```
<chapter xmlns='http://www.w3.org/1998/Math/MathML'>
<math>
<mtext mathcolor="#3e9a3c">This is sample 1</mtext>
<mtext mathcolor="#009bd2">This is sample 2</mtext>
</math>
</chapter> 
```

**输出：**

```
<?xml version='1.0' encoding='UTF-8' ?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML"><math>~COLOR~[Green]This is sample 1~COLOR~[Red]This is sample 2</math></chapter> 
```

**配置文件：**

```
<?xml version="1.0"?>
<colors>
<color><mathcolor>#3e9a3c</mathcolor><textcolor>Green</textcolor><colorvalue>1</colorvalue></color>
<color><mathcolor>#009bd2</mathcolor><textcolor>Red</textcolor><colorvalue>2</colorvalue></color>
</colors> 
```

XSLT 试过：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML">
<xsl:output method="xml" encoding="UTF-8" indent="no"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@* | node()">
<xsl:copy>
<xsl:apply-templates select="@* | node()"/>
</xsl:copy>
</xsl:template>

<xsl:template match="m:mtext">
<xsl:if test="@mathcolor">
<xsl:choose>
<xsl:when test="@mathcolor='#3e9a3c'"><xsl:text disable-output-escaping="yes">~COLOR~[Green]</xsl:text></xsl:when>
<xsl:when test="@mathcolor='#009bd2'"><xsl:text disable-output-escaping="yes">~COLOR~[Red]</xsl:text></xsl:when>
</xsl:choose>
</xsl:if>
<xsl:apply-templates/></xsl:template>

</xsl:stylesheet> 
```

我需要根据配置文件将上面给出的输入转换为所需的输出。如果用户更新配置文件，并且输入具有 mathcolor 属性值，则其对应的颜色应转换为输出所示。我可以使用 XSLT 1.0。请帮助解决这个问题

*例如：* 如果用户在配置文件中添加以下编码： `<color><mathcolor>#007c62</mathcolor><textcolor>Magenta</textcolor><colorvalue>3</colorvalue></color>`并且输入包含 mathcolor="#007c62"，则应在输出中应用洋红色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:39:01.987

这应该有效：

### 样式表

```
<?xml version="1.0" encoding="utf-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:m="http://www.w3.org/1998/Math/MathML"
  xmlns:mml="http://www.w3.org/1998/Math/MathML"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://www.w3.org/1998/Math/MathML">

  <xsl:output method="xml" encoding="UTF-8" indent="no"/>
  <xsl:strip-space elements="*"/>

  <!--
  Config file name/path, can be passed as a parameter to XSL transformation
  -->
  <xsl:param name="config.file" select="'config.xml'"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- <m:mtext> elements with a @mathcolor attribute, no need for <xsl:if> -->
  <xsl:template match="m:mtext[@mathcolor]">
    <xsl:text>~COLOR~[</xsl:text>
    <!--
    Fetch color name from $config.file (<color> element with a <mathcolor>
    child that has the same value as the @mathcolor attribute of the element
    currently being processed)
    -->
    <xsl:value-of
      select="document($config.file)/colors/color
        [mathcolor = current()/@mathcolor]/textcolor"/>
    <xsl:text>]</xsl:text>
    <xsl:apply-templates/>
  </xsl:template>

</xsl:stylesheet> 
```

### 输入

```
<chapter xmlns='http://www.w3.org/1998/Math/MathML'>
  <math>
    <mtext mathcolor="#3e9a3c">This is sample 1</mtext>
    <mtext mathcolor="#009bd2">This is sample 2</mtext>
  </math>
</chapter> 
```

### 配置文件

```
<?xml version="1.0"?>
<colors>
  <color>
    <mathcolor>#3e9a3c</mathcolor>
    <textcolor>Green</textcolor>
    <colorvalue>1</colorvalue>
  </color>
  <color>
    <mathcolor>#009bd2</mathcolor>
    <textcolor>Red</textcolor>
    <colorvalue>2</colorvalue>
  </color>
</colors> 
```

### 输出

```
<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
  <math>~COLOR~[Green]This is sample 1~COLOR~[Red]This is sample 2</math>
</chapter> 
```

# c++ - 当我尝试编写'const char *'时，c++ 给了我标准的字符串/损坏的数据而不是二进制数据

> ID：15760062
> 
> 赞同：0
> 
> 时间：2013-04-02T09:02:55.317
> 
> 标签：c++, postgresql, c++11, libpq

在 C++（Visual C++ MFC）中，我有`char *`来自数据库的。这实际上是一张图片。PostgreSQL 将它作为 char * 返回，因为 C++ 中没有 byte[] （据我所知-yet-:)）

问题是，我尝试像这样写那个图像：

```
ofstream myFile ("C:\\picture.jpg", ios::out | ios::binary);
myFile.write(contents, size);
myFile.close(); 
```

它输出如下：

```
\xffd8ffe000104a46494600010101006000600000ffe1005a4578696600....... 
```

我试图将内容更改为`reinterpret_cast<char *>(&contents)`然后我得到了一些二进制数据，但只有少数。其余的不在文件中。

我也试过这个：

```
fstream binary_file("C:\\picture.jpg", ios::out | ios::binary | ios::app);
binary_file.write(reinterpret_cast<char *>(&contents),size);
binary_file.close(); 
```

无论有`reinterpret_cast<char *>(&contents)`没有它。文件中仍然有几个字节数据。不再。

我也尝试过改变`size`。大小来自 postgresql 的`PQgetlength`方法，所以这是肯定的。（不会错吧？）

我终于给`size`了自己，对 C++ 说它是`5000`. 它输出 5.000 的二进制数据，但事实是，它与原始文件不符。它以“h”开头，然后是不同的东西......

我还尝试将这些数据加载到 Chilkat 的 ByteArray，然后使用它的 oen 文件访问方法写入。仍然得到相同的结果`\xfdd...`。

那么，主要目标是什么？我在这里想念什么？任何帮助将不胜感激。

**编辑**：它是**char ***。我为我的误会道歉。

**结论**：由于我的需要，我选择了*Craig Ringer * 的解决方案。*但由于这个问题的性质，我选择**H2CO3**的答案作为公认的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:05:51.813

如果`contents`真的是 a `char *`，而不是数组，那么问题在于您传递的是**指针**本身的地址。然后你试图将指针值写入文件。传递`contents`（而不是`&contents`）到`fstream::write()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T09:07:32.563

据我所知，你的输出搞砸了

```
\xffd8ffe000104a46494600010101006000600000ffe1005a4578696600... 
```

这不是有效的十六进制表示法。你需要这样的东西

```
\xff\xd8\xff\xe0\x00... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T10:14:36.883

使用[`libpqtypes`](http://libpqtypes.esilo.com/). 它负责`bytea`转换和各种其他未`libpq`正确内置的更高级别的数据类型处理。

可以在 中使用二进制传输模式`libpq`，但老实说，使用起来会简单得多，`libpqtypes`并让它处理所有这些。您*真的*不想处理日期和其他自定义格式值的二进制传输，因此如果您确实使用二进制传输，您通常应该只为 bytea 列指定二进制模式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T09:22:54.517

首先，您的输出看起来像是一个良好、有效的 JPG 文件的开始，该文件通过一些自制程序转换为文本。一些数据库开发人员不喜欢将二进制数据存储在 BLOB 中，而用于将二进制存储在文本字段中的原生 PostreSQL 格式 bytea 相当不方便。如此多的开发者使用 Base64、UUENCODE 或自制解决方案。

你的第一个片段看起来不错。你没有给我们内容和大小的定义，但如果它们看起来像，它应该可以工作。它应该输出内容而不做任何更改。因此，要确保问题出在内容中，请启动调试器，在 myFile.Write 处设置断点并查看内容变量。很可能它将包含相同的“\xffd8ffe000”而不是二进制数据。

如果是这样，您需要手动重新转换此文本数据。

# mysql - Node.js mysql 事务

> ID：15760067
> 
> 赞同：20
> 
> 时间：2013-04-02T09:03:09.447
> 
> 标签：mysql, node.js, transactions, express, node-mysql

谁能提供我如何在 Node.js 中实现 MySQL 事务的示例。我正在尝试使用 node-mysql 驱动程序和 node-mysql-queue。

据我所知，使用 node-mysql-queue 大大降低了 Node.js 的异步特性，因为新查询必须等到现有查询完成。为了解决这个问题，有没有人尝试将 node-mysql-queue 与 node-mysql 的连接池功能结合起来。即为每个新的http请求启动一个新的mysql连接，并在单个连接上启动事务队列？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2017-07-24T16:07:43.540

### 更新

请参阅下面的编辑以了解 async/await 语法

* * *

我花了一些时间写了node mysql给出的事务示例的通用版本，所以我想在这里分享一下。我使用 Bluebird 作为我的承诺库，并用它来“承诺”连接对象，这大大简化了异步逻辑。

```
const Promise = ('bluebird');
const mysql = ('mysql');

/**
 * Run multiple queries on the database using a transaction. A list of SQL queries
 * should be provided, along with a list of values to inject into the queries.
 * @param  {array} queries     An array of mysql queries. These can contain `?`s
 *                              which will be replaced with values in `queryValues`.
 * @param  {array} queryValues An array of arrays that is the same length as `queries`.
 *                              Each array in `queryValues` should contain values to
 *                              replace the `?`s in the corresponding query in `queries`.
 *                              If a query has no `?`s, an empty array should be provided.
 * @return {Promise}           A Promise that is fulfilled with an array of the
 *                              results of the passed in queries. The results in the
 *                              returned array are at respective positions to the
 *                              provided queries.
 */
function transaction(queries, queryValues) {
    if (queries.length !== queryValues.length) {
        return Promise.reject(
            'Number of provided queries did not match the number of provided query values arrays'
        )
    }

    const connection = mysql.createConnection(databaseConfigs);
    Promise.promisifyAll(connection);
    return connection.connectAsync()
    .then(connection.beginTransactionAsync())
    .then(() => {
        const queryPromises = [];

        queries.forEach((query, index) => {
            queryPromises.push(connection.queryAsync(query, queryValues[index]));
        });
        return Promise.all(queryPromises);
    })
    .then(results => {
        return connection.commitAsync()
        .then(connection.endAsync())
        .then(() => {
            return results;
        });
    })
    .catch(err => {
        return connection.rollbackAsync()
        .then(connection.endAsync())
        .then(() => {
            return Promise.reject(err);
        });
    });
} 
```

如果您想按照问题中的建议使用池，您可以轻松地使用 切换`createConnection`行`myPool.getConnection(...)`，并使用 切换`connection.end`行`connection.release()`。

* * *

## 编辑

我使用`mysql2`库（与承诺支持相同的 api `mysql`）和新的 async/await 运算符对代码进行了另一次迭代。这里是

```
const mysql = require('mysql2/promise')

/** See documentation from original answer */
async function transaction(queries, queryValues) {
    if (queries.length !== queryValues.length) {
        return Promise.reject(
            'Number of provided queries did not match the number of provided query values arrays'
        )
    }
    const connection = await mysql.createConnection(databaseConfigs)
    try {
        await connection.beginTransaction()
        const queryPromises = []

        queries.forEach((query, index) => {
            queryPromises.push(connection.query(query, queryValues[index]))
        })
        const results = await Promise.all(queryPromises)
        await connection.commit()
        await connection.end()
        return results
    } catch (err) {
        await connection.rollback()
        await connection.end()
        return Promise.reject(err)
    }
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-26T03:39:13.153

一个月前在文档中添加了以下交易示例：

[https://github.com/felixge/node-mysql#transactions](https://github.com/felixge/node-mysql#transactions)

```
connection.beginTransaction(function(err) {
  if (err) { throw err; }
  connection.query('INSERT INTO posts SET title=?', title, function(err, result) {
    if (err) { 
      connection.rollback(function() {
        throw err;
      });
    }

    var log = 'Post ' + result.insertId + ' added';

    connection.query('INSERT INTO log SET data=?', log, function(err, result) {
      if (err) { 
        connection.rollback(function() {
          throw err;
        });
      }  
      connection.commit(function(err) {
        if (err) { 
          connection.rollback(function() {
            throw err;
          });
        }
        console.log('success!');
      });
    });
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-20T05:59:15.280

我正在使用以下方法。我的模型中有一个添加函数，我正在执行数据库操作。

```
 add : function (data, callback) {

    //Begin transaction
    connection.beginTransaction(function(err) {
        if (err) {
            throw err;
        }

        var user_query = "INSERT INTO `calldata`.`users` (`username`, `password`, `enabled`, `accountNonExpired`, `accountNonLocked`, `credentialsNonExpired`) VALUES ('" + data.mobile + "', '" + sha1(data.password) + "', '1', '1', '1', '1')";
        connection.query(user_query, function(err, results) {
            if (err) {
                return connection.rollback(function() {
                    throw err;
                });
            }

            var accnt_dtls_query = "INSERT INTO `calldata`.`accnt_dtls` (`req_mob_nmbr`, `usr_nme`, `dvce_id`, `mngr_id`, `cmpny_id`, `actve_flg`, `crtd_on`, `usr`) VALUES (" + data.mobile + ", '" + data.name + "', '', " + data.managerId + ", " + data.companyId + ", 1, now(), '" + data.mobile+ "')";

            connection.query(accnt_dtls_query, function(err, results) {
                if (err) {
                    return connection.rollback(function() {
                        throw err;
                    });
                }
                var user_role_query = "INSERT INTO `calldata`.`user_roles` (`username`, `ROLE`) VALUES ('" + data.mobile + "', '" + data.role + "')";

                connection.query(user_role_query, function(err, result) {
                    if (err) {
                        return connection.rollback(function() {
                            throw err;
                        });
                    }

                    //add an entry to manager table
                    var mngr_dtls_query = "INSERT INTO `calldata`.`mngr_dtls` (`mngr_nm`, `cmpny_id`, `crtd_on`, `usr_nm`, `eml_id`) VALUES ('" + data.name + "'," + data.companyId + " , now(), '" + data.mobile + "', '" + data.mobile + "')";
                    connection.query(mngr_dtls_query, function(err, result) {
                        if (err) {
                            return connection.rollback(function () {
                                throw err;
                            });
                        }
                        console.log('Changed ' + result.changedRows + ' results');
                        connection.commit(function (err) {
                            console.log('Commiting transaction.....');
                            if (err) {
                                return connection.rollback(function () {
                                    throw err;
                                });
                            }

                            console.log('Transaction Complete.');
                            connection.end();
                            callback(null, result);
                        });
                    });
                });
            });
        });
    });
    //transaction ends here
} 
```

并从控制器调用：

```
 agentAccountModel.add(data, function(err, results) {
                if(err)
                {
                    res.status(500);
                    res.json({
                        "status": 500,
                        "message": err
                    });
                }

                res.status(200);
                res.json({
                    "status": 200,
                    "message": "Saved successfully"

                });
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-10T19:48:58.597

我想出了一个使用递归函数的解决方案。

```
var sql = 'INSERT INTO logs SET data = ?';

// array of rows to insert
var rows = [[/*first row*/], [/*additional row*/]];

connection.beginTransaction(function (err) {

    if (err) { 
        throw err; 
    }

    var insertEachRow = function () {

        var row = rows.shift();

        if (! row) {
            // Done, now commit
            return noMoreRows();
        }

        connection.query(sql, row, function (err, result) {
            if (err) { 
                connection.rollback(function () {
                    throw err;
                });
            }  

            insertEachRow();
        });
    };

    var noMoreRows = function () {
        connection.commit(function (err) {
            if (err) { 
                connection.rollback(function () {
                    throw err;
                });
            }
            console.log('success!');
        });
    };

    insertEachRow();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-18T06:57:27.530

我为此特定目的创建了一个包装器 ORM 类型的东西，希望它有助于[SQl-connecton - 池 ORM 类型辅助方法](https://github.com/duke7able/SQL-wrapper)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-13T10:10:47.717

您也可以将它与 mysql 一起使用，只需使用此函数而无需任何参数 /call back 。确保您具有异步功能并使用这些功能

```
await con.rollback();
await con.beginTransaction();
await con.commit(); 
```

生活设定......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-05T14:15:57.233

我发现了一个有用的链接，它使用 node js mysql pooling with transaction。数据库连接池总是有用的。可以查看此链接

[https://github.com/mysqljs/mysql](https://github.com/mysqljs/mysql)

# android - 安卓板式联网多人游戏防作弊

> ID：15760077
> 
> 赞同：1
> 
> 时间：2013-04-02T09:04:03.103
> 
> 标签：android, networking, client-server, multiplayer, anti-cheat

**TL;博士**

*   安卓，棋盘类游戏。
*   延迟不重要。
*   通过 LAN/Global 的客户端-服务器，潜在的高分 => 不信任。
*   未来潜在的蓝牙层 => 完全信任。
*   移动意味着昂贵的流量，上游比下游更昂贵。
*   PRNG用的很多，一定是确定性的。
*   用于序列化 + 传输的 kryonet

我和几个朋友正在为 Android 构建我们的棋盘游戏“端口”/“风味”（具有许多不同的事件类型和各种排列），并为其添加联网的多人游戏方面。我们不是加密或网络专家 =)

游戏的默认多人游戏层将基于客户端-服务器（服务器要么是专用主机，要么在安卓设备上运行[以防你和你的朋友在树林里而你没有网络]）。这可能是一个全局服务器或 LAN——这并不重要。但是可能会有一个潜在的高分需要一些反作弊机制因为它是一个回合制的棋盘类游戏，延迟不是问题。

将来，如果我们有时间 - 我们可能会添加一个基于蓝牙的层，但在这种情况下，作弊不是问题，因为假设人们彼此很了解。

由于我们正在处理（很可能）上游比下游更昂贵的移动网络，因此从服务器下载比从客户端发送模型更便宜。

我们可能会使用 kryonet 进行数据的序列化和传输。

游戏会经常使用PRNG，因此需要有一些良好的反作弊和验证逻辑，所以在gamedev&stackoverflow大量搜索和阅读后，我设计了以下逻辑。我需要一些关于该计划的合理性的意见。非常感谢所有提示和建议。

**假设/考虑：**

*   PRNG 的行为具有确定性（考虑使用 Mersenne Twister）。
*   正常的游戏玩法不应因反作弊措施而受到惩罚。

**方案/计划：**

1.  在“握手”/自“onResume()”之后的第一个连接上 - 从服务器获取 PRNG 种子并存储它。每个玩家在服务器中都有自己的种子。

    1.  还要在同一请求中将游戏状态的哈希发送到服务器，如果不同步，则同步游戏状态。
2.  在操作/用户输入时，获取下一个随机数 -> 保存到“随机数桶” *（因此称为桶 - 桶是您可以添加但永远不会删除的“陷阱列表”）。*还将输入 ID/Type/Enum 保存到列表中。

3.  累积更改直到其他玩家必须知道（即下一个玩家轮到）/ PNR（不归路点）

4.  PNR 已达到

    1.  发送模型的更改 ID/类型/枚举（约 64 位）+ 桶 + 哈希（更改后）。桶 + 哈希是否应该加密，也许是 AES 256（其他更合适的加密技术？）。

    2.  根据 N = size( bucket ) 的 N 个连续随机数检查 bucket。如果不匹配，转到 6，然后转到 7。

    3.  临时更改模型（不承诺完整的游戏模型）。

    4.  计算哈希并检查客户端提供的哈希。如果无效转到 6。

    5.  有效：提交到服务器上的游戏模型。

    6.  无效：要求客户端恢复到服务器发回的状态。

    7.  作弊：禁止（不是 IP [动态 IP...]，而是 MAC 地址或 UID）/从游戏中删除几个作弊。

* * *

**编辑：**另外 - 关于反作弊的另一个问题......对于类似棋盘游戏的 2 个农业高分的机器人团队的反措施有什么好的想法吗？

**EDIT2：**这是我所做的问题前研究的链接：

*   [https://gamedev.stackexchange.com/questions/4181/how-can-i-prevent-cheating-on-global-highscore-tables](https://gamedev.stackexchange.com/questions/4181/how-can-i-prevent-cheating-on-global-highscore-tables)

*   良好的链接（用于去中心化的客户端-客户端协议）：[https ://gamedev.stackexchange.com/questions/47145/peer-to-peer-hostless-competitive-games-of-chance](https://gamedev.stackexchange.com/questions/47145/peer-to-peer-hostless-competitive-games-of-chance)

*   [http://en.wikipedia.org/wiki/Commitment_scheme](http://en.wikipedia.org/wiki/Commitment_scheme)

*   iphone益智游戏：[简单游戏服务器的代码示例](https://stackoverflow.com/questions/3892798/code-examples-for-simple-game-servers?rq=1)

调查：

5) 在你的游戏连接上使用一些轻量级的多态编码。

6) 使用一些反调试技术来防止调试器附加到您的进程。谷歌反调试，你应该能找到很多东西。

7) 使用定制的专有 PE 打包程序来防止对您的游戏进行有用的反汇编。

8) 使用哈希作为承诺，然后在满足其他玩家行为的条件时揭示哈希承诺的含义。它很复杂，并且会对性能产生影响，但其中一些想法可能很有用，尤其是对点对点游戏。

9）我认为让破解者更难解决问题的一个好方法是在你的服务器中拥有游戏状态的唯一权威副本，只向客户端发送和接收更新，这样你就可以嵌入通信协议本身客户端验证（它没有被破解，因此检测规则仍然存在）。那，并积极监控发现的新奇怪行为可能会让你更接近你想去的地方。

与实时 FPS 相关，与我们的相关性较低：

*   客户端-服务器：[如何防止我们的（多人）游戏中的作弊行为？](https://stackoverflow.com/questions/960499/how-to-prevent-cheating-in-our-multiplayer-games/960697#960697)

    *   链接：[如何保护客户端反作弊](https://stackoverflow.com/questions/13826786/how-to-secure-client-side-anti-cheat)
*   自动化：[防止自动化](https://stackoverflow.com/questions/143231/protection-against-automation/143241#143241)

*   信任客户端，[如何在使用时间戳验证位置差异时考虑延迟差异（防作弊）？](https://stackoverflow.com/questions/1657057/howto-take-latency-differences-into-consideration-when-verifying-location-differ)

*   [https://developer.valvesoftware.com/wiki/Source_Multiplayer_Networking](https://developer.valvesoftware.com/wiki/Source_Multiplayer_Networking)

*   [好的多人/mmo 客户端<>服务器游戏在移动计算中使用延迟吗？](https://stackoverflow.com/questions/1448997/do-good-multiplayer-mmo-clientserver-games-use-latency-within-movement-calcula?rq=1)
*   [使用时间戳验证位置差异时如何考虑延迟差异（防作弊）？](https://stackoverflow.com/questions/1657057/howto-take-latency-differences-into-consideration-when-verifying-location-differ)

*差不多就这些了，希望大家给点建议！*

# image - 将鼠标悬停在java脚本中div中的文本显示图像上

> ID：15760078
> 
> 赞同：0
> 
> 时间：2013-04-02T09:04:10.260
> 
> 标签：image, mouseover

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

     function show1() {
            document.getElementById("img1").display = 'block';
     }
     function hide1() {
            document.getElementById("img1").display = 'none';
        }

</script>
</head>
<body>
<a href="http://www.feverpitchholidays.com/corporate-team-outing-lnt/"><span onMouseOver="show1()" onMouseOut="hide1()">Corporate Team Outing - LNT</span></a>

<div id="img1" style="display:none">
    <img src="" alt="image 1" />
    <img src="" alt="image 2" />
</div>
</body>
</html> 
```

我希望当你将鼠标放在文本上时，它会在 div 中显示图像，我试图这样做，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:40:03.583

忘记这个的javascript！CSS就是答案。在 ID:img1 和 div 内的图像上放置悬停状态（如果你不做后者，鼠标悬停在图像上会取消 div 鼠标悬停。所以它看起来像这样（由于鼠标悬停而不是内联样式国家声明）：

```
#img1 {
  Background-image: none;
}

#img1:hover, img1:hover img {
  Background-image: url(your URL);
} 
```

您可以将 ID 更改为类，以便可以重用 CSS 并保留 ID 用于编码（javascript 等）

# django - Django admin：如何通过自定义方法对列进行排序

> ID：15760082
> 
> 赞同：16
> 
> 时间：2013-04-02T09:04:20.527
> 
> 标签：django, django-admin

```
 class Item(models.Model):
     name = models.CharField(max_length=100, unique=True)

     def admin_amount(self):
         total = self.warehouse_set.all().aggregate(item=Sum('amount'))
         return total['item']

 class Warehouse(models.Model):
     name = models.CharField(max_length=100, unique=True)
     item = models.ForeignKey('Item', blank=True, null=True)
     amount = models.IntegerField() 
```

创建新字段是错误的，但我不能这样做：

```
 admin_amount.admin_order_field = 'admin_amount' 
```

我发现了[类似的问题](https://stackoverflow.com/questions/2168475/django-admin-how-to-sort-by-one-of-the-custom-list-display-fields-that-has-no-d)，但我遇到了重写 queryset() 方法的问题（不能写类似的东西`qs.warehouse_set.all().annotate(models.Sum('amount'))`）。有什么方法可以为我调整这个解决方案，或者在我的情况下，还有另一种解决方案吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T20:17:14.987

使用[链接问题](https://stackoverflow.com/questions/2168475/django-admin-how-to-sort-by-one-of-the-custom-list-display-fields-that-has-no-d)中的代码（和[建议的编辑](https://stackoverflow.com/review/suggested-edits/468872)），底部应该为您的示例执行此操作。其原理是使用annotate 将来自子查询的附加数据添加到返回的QuerySet 中。在这种情况下`Sum`，仓库中的金额。

接下来，您添加一个包装函数`amount_in_warehouses`来为每一行获取此值，并告诉管理员在列表中显示此值`list_display = ('amount_in_warehouses',)`，并对其进行排序`amount_in_warehouses.admin_order_field = 'amount_in_warehouses'`。

```
class ItemAdmin(admin.ModelAdmin):
    list_display = ('amount_in_warehouses',)
    name = models.CharField(max_length=100, unique=True)

    def queryset(self, request):
        qs = super(ItemAdmin, self).queryset(request)
        qs = qs.annotate(models.Sum('warehouse__amount'))
        return qs

    def amount_in_warehouses(self, obj):
        return obj.warehouse__amount__sum
    amount_in_warehouses.admin_order_field = 'amount_in_warehouses' 
```

# c - 为什么 ] 在 C 中不显示？

> ID：15760084
> 
> 赞同：3
> 
> 时间：2013-04-02T09:04:24.853
> 
> 标签：c, format-specifiers

这是我在 C 中的代码片段：

```
 char *str = NULL;
      int len = -1;

      // Get length
      len = snprintf(NULL, 0, "[%d]", 2);

      // Allocate str
      str = (char *)malloc(len + 1);

      // Assign str
      snprintf(str, len, "[%d]", 2);

      assert(len == 3);

      // Display str
      puts(str); 
```

我希望这应该显示`[2]`。这`len`是3。

但运行此代码仅显示`[2`

为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T09:08:56.087

缓冲区的长度是`len+1`，但你只传递`len`给`snprintf`，试试这个：

```
snprintf(str, len + 1, "[%d]", 2); 
```

来自[cplusplus.com](http://www.cplusplus.com/reference/cstdio/snprintf/)：

> 如果结果字符串长于 n-1 个字符，则剩余字符将被丢弃且不存储，但会计入函数返回的值。
> 
> 内容后会自动附加一个终止空字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:15:43.613

函数 snprintf() 最多将 len 个字节（包括终止的空字节 ('\0')）写入 str。

len 等于 3（第一次调用），所以 snprintf 将只写入 3 个字符：'['、'2' 和 '\0'。

# log4j - Log4j 属性文件配置

> ID：15760085
> 
> 赞同：0
> 
> 时间：2013-04-02T09:04:25.967
> 
> 标签：log4j

我`Log4j`用于记录我的系统事件。

最初我使用`Log4j`属性文件，然后转移到`log4j.xml`文件。

我的应用程序有另一个属性文件——`system.properties`它采用配置参数。

我希望在应用程序属性文件中指定日志输出文件 -`system.properties`并在文件中引用属性文件`log4j.xml`并更新配置。

这种`log4j.xml`配置可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:50:16.547

您可以使用 ant 脚本来完成。在 ant 中加载 system.properties 文件并替换 log4j.xml 文件中的值。

有关如何更新 XML 文件的信息，请参阅此链接。 [如何使用 Ant 更新 XML 文档](https://stackoverflow.com/questions/5739210/how-to-update-an-xml-document-with-ant)

# python - 一些字符串没有在 django i18n 模块中翻译

> ID：15760087
> 
> 赞同：12
> 
> 时间：2013-04-02T09:04:29.197
> 
> 标签：python, django, django-i18n

我对 django 的国际化模块有一些奇怪的问题。大多数字符串都按它们必须的方式进行翻译，而其他一些则不是。让我告诉你和例子：

```
<li>{% trans "Upload Score" %}</li>
<li>{% trans "Profile" %}</li>
<li>{% trans "Invite friends" %}</li>
<li>{% trans "Settings" %}</li> 
```

我有一个包含 4 项菜单的列表。我运行 django 命令 makemessages 以法语翻译网站，我得到了预期的一切：

```
#: templates/main.html:190 templates/main.html.py:195
#, fuzzy
msgid "Upload Score"
msgstr "Publier"

#: templates/main.html:191 templates/main.html.py:196
msgid "Profile"
msgstr "Profil"

#: templates/main.html:192 templates/main.html.py:197
#, fuzzy
msgid "Invite Friends"
msgstr "inviter vos amis"

#: templates/main.html:193 templates/main.html.py:198
msgid "Settings"
msgstr "Préférences" 
```

但是当我编译它时，django-admin 会编译消息，只有“配置文件”和“设置”被翻译。你知道它可能来自哪里吗？它是否与使用空白有关？i18n 模块中有调试模式吗？

谢谢你的帮助！:)

编辑：我们在 django 1.4 上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T09:51:00.830

您需要删除模糊线。

模糊可能意味着原始字符串已更改。Gettext 不想丢失您的翻译，因此它会更改它但将其标记为模糊。

我推荐你[罗塞塔](https://github.com/mbi/django-rosetta)。它将为您创建类似管理员的界面，您可以在其中翻译字符串和管理模糊。

干杯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-04T11:20:27.713

我有完全相同的症状，我只是忘记添加[`LOCALE_PATHS`](https://docs.djangoproject.com/en/dev//ref/settings/#locale-paths)设置，并且 Django 对我的一些字符串使用了一些默认翻译字符串，并且没有访问我自定义开发的消息文件。

添加此设置解决了问题：

```
LOCALE_PATHS = (
    PROJECT_DIR.child('locale'),  # assuming PROJECT_DIR is set to project root (using unipath)
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-18T01:54:51.137

在我的情况下，保存我的目录的`LC_MESSAGES`目录是以我想要的语言代码（例如`en-us`）而不是语言环境（`en_US`）命名的。将其重命名为区域设置格式固定的东西。

# titanium - 列出项目符号大小

> ID：15760088
> 
> 赞同：1
> 
> 时间：2013-04-02T09:04:33.090
> 
> 标签：titanium, titanium-mobile

如何增加列表项目符号的大小？我正在使用 ""\u2023 ABC" 并应用字体大小为 :16 的样式。但是项目符号大小不会缩放，只有字体大小会缩放。

"\u2023"= 项目符号的 unicode

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:22:58.557

普拉萨德，子弹的大小也随着字体大小而增加。但问题是**子弹的大小比文本小**。请参考我在 iPhone 模拟器中截取的不同字体大小的截图

![最小尺寸 16](https://i.stack.imgur.com/WUEDX.png) ![大中号 30 号](https://i.stack.imgur.com/RObFy.png) ![最大尺寸 80](https://i.stack.imgur.com/xS3Bh.png)

以上图片中，每一个的**字体大小分别为16、30和80**。您可以看到箭头大小相对于字体大小也在增加。

这是适合您的工作解决方案。

![使用 2 个标签](https://i.stack.imgur.com/WeHUW.png)

这里我使用了两个标签——一个用于箭头，另一个用于城市名称，字体大小分别为 40 和 20，将它们添加到 tableViewRow。您可以根据需要更改字体大小

这是我的代码

```
for(var i = 0 ; i < number_of_cities; i++ ){            
    var lblArrow = Ti.UI.createLabel({
        text    : "\u2023",
        font    : {fontSize : 40},
        left    : '3%'
    });
    var lblValue   = Ti.UI.createLabel({
        text    : cityList[i].name,
        font    : {fontSize : 20},
        left    : '10%'
    });

    tblData[i] = Ti.UI.createTableViewRow();
    tblData[i].add(lblArrow);
    tblData[i].add(lblValue);
} 
```

*请注意：我不确定这是不是最好的方法，但它会解决您的问题*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-18T11:35:17.903

Unicode 项目符号有许多变体，快速访问 [几何形状](http://https://en.wikipedia.org/wiki/Geometric_Shapes/)总是有用的。我个人最喜欢的是“Black Circle”，就像 Unicode 中的很多东西一样，它可能是很多东西，但它*不是一个圆圈。*

`&#9679;`是一颗**漂亮的胖子弹**——一颗有*态度*的子弹。在十六进制中，它被`&#x25CF;`解析为列表样式的目的，写成标签`"\25AC"`的`content`值：`li:before`

```
li:before {
    content: "\25AC"; 
```

等等

# html - 选择大小属性大小在 Chrome/Safari 中不起作用？

> ID：15760089
> 
> 赞同：17
> 
> 时间：2013-04-02T09:04:43.107
> 
> 标签：html, css, google-chrome, safari

如何解决选择属性大小的问题，如代码：

```
<select size="2">
    <option value="0" selected="selected">Default</option>
    <option value="1">select 1</option>
    <option value="2">select 2</option>
    <option value="3">select 3</option>
</select> 
```

如何让它在 Chrome 和 Safari 中运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T09:29:05.967

这是**[webkit 浏览器中的一个已知错误](http://productforums.google.com/forum/#!topic/chrome/z4rBqNT3174)**。

让它在 Chrome 和 Safari 中按照您喜欢的方式工作的最简单方法是手动指定选择本身的样式。

这是一个[**工作 jsFiddle**](http://jsfiddle.net/jgZnF/4/)。

```
select {
  height: 36px;
  font-size: 14px;
}
```

```
<select size="2">
  <option value="0" selected="selected">Default</option>
  <option value="1">select 1</option>
  <option value="2">select 2</option>
  <option value="3">select 3</option>
</select>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-26T17:31:46.207

包括`height: auto`它应该可以工作。

```
<select size="2" style="height: auto">
    <option value="0" selected="selected">Default</option>
    <option value="1">select 1</option>
    <option value="2">select 2</option>
    <option value="3">select 3</option>
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-16T06:36:18.753

我将 HTML 中的 size 属性用于“其他”浏览器，然后在 CSS 中指定 webkit 外观。其他类型的菜单列表选项可用，文本字段不是唯一的。而且您可能需要根据字体大小来处理高度。这使得它在所有浏览器上看起来都差不多。

**CSS**

```
select{
  -webkit-appearance: menulist-textfield;
  height: 45px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-11T23:50:37.680

我可以通过在选择标签中添加“多个”选项来解决这个问题。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-04-02T09:09:46.440

尝试使用`width`select 标签的 css 属性：

```
select {
  width:value px;
} 
```

# android - 构建通知时出错

> ID：15760097
> 
> 赞同：3
> 
> 时间：2013-04-02T09:05:08.770
> 
> 标签：android, android-notifications

我正在使用本教程[http://www.vogella.com/articles/AndroidNotifications/article.html](http://www.vogella.com/articles/AndroidNotifications/article.html)，我想构建通知

// 准备在选择通知时触发的意图

```
Intent intent = new Intent(this, NotificationReceiver.class);
PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);

// Build notification
// Actions are just fake
Notification noti = new Notification.Builder(this)
        .setContentTitle("New mail from " + "test@gmail.com")
        .setContentText("Subject")
        .setSmallIcon(R.drawable.icon)
        .setContentIntent(pIntent)
        .addAction(R.drawable.icon, "Call", pIntent)
        .addAction(R.drawable.icon, "More", pIntent)
        .addAction(R.drawable.icon, "And more", pIntent).build();

NotificationManager notificationManager = 
  (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

// Hide the notification after its selected
noti.flags |= Notification.FLAG_AUTO_CANCEL;

notificationManager.notify(0, noti); 
```

我有错误`addAction`，日食说`the method addaction(ing, String pendingintent) is undefined for the type notification.builder`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:14:33.697

你必须在你`android-support-v4.jar`的项目 lib 文件夹中使用文件`/lib/android-support-v4.jar`并添加它

1.  你的 ptoject---->properites (Alt+)-->Build Path-->Library-->add jar-->select `android-support-v4.jar`from lib folder --> ok

2.  你的 ptoject---->properites (Alt+)-->Build Path-->Order & Export--> 全选--> ok。

使用这个你的代码在 <= 11 API LEVEL 中运行。

* * *

**已编辑：** 您收到错误，因为以下方法需要 MIN 11 API 级别

```
.setContentTitle("My notification")
.setContentText("Hello World!"); 
```

以下方法需要 MIN API LEVEL 16：

```
.addAction(R.drawable.ic_launcher, "call", pIntent)
.addAction(R.drawable.ic_launcher, "more", pIntent)
.addAction(R.drawable.ic_launcher, "add more", pIntent) 
```

所以您的解决方案如下使用这种方式：

![在此处输入图像描述](https://i.stack.imgur.com/AHdps.png)

```
Intent intent = new Intent(this, TestSettings.class);
        PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);

        NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                this).setSmallIcon(R.drawable.ic_launcher)
                .addAction(R.drawable.ic_launcher, "call", pIntent)
                .addAction(R.drawable.ic_launcher, "more", pIntent)
                .addAction(R.drawable.ic_launcher, "add more", pIntent)
                .setContentTitle("My notification")
                .setContentText("Hello World!");
        // Creates an explicit intent for an Activity in your app
        Intent resultIntent = new Intent(this, TestSettings.class);

        TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);

        stackBuilder.addParentStack(TestSettings.class);

        stackBuilder.addNextIntent(resultIntent);
        PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,
                PendingIntent.FLAG_UPDATE_CURRENT);
        mBuilder.setContentIntent(resultPendingIntent);
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

        mNotificationManager.notify(100, mBuilder.build()); 
```

**确保您已添加`android-support-v4.jar`jar 文件**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:11:32.090

您需要将您的`sdkTargetVersion`in`<uses-sdk>`元素设置`AndroidManifest.xml`为 16 或更高。`addAction(...)`旧版本的 Android 不存在该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T14:24:53.253

您正在使用错误版本的支持库。AddAction 已在 r13 中引入（可能更早）。

# python - 在 Python 中禁用 TLS 重新协商

> ID：15760099
> 
> 赞同：3
> 
> 时间：2013-04-02T09:05:09.093
> 
> 标签：python, ssl, cherrypy

我在我的 web.py 中实现 SSL 连接，但是服务器未能通过安全扫描并卡在 TLS Renegotiation DoS 漏洞上。

这是我的代码片段：

```
import web

from web.wsgiserver import CherryPyWSGIServer

CherryPyWSGIServer.ssl_certificate = "path/to/ssl_certificate"
CherryPyWSGIServer.ssl_private_key = "path/to/ssl_private_key"

urls = ("/.*", "hello")
app = web.application(urls, globals())

class hello:
    def GET(self):
        return 'Hello, world!'

if __name__ == "__main__":
    app.run() 
```

有没有办法在 web.py 中禁用 TLS 重新协商？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-28T13:30:48.980

五年没有答案？我假设你一直在使用的 API 现在已经改变了。但由于问题的标题通常指的是 Python，我会回答这个问题。

Python 3.7 有一个禁用重新协商的标志，但它需要 openssl 1.1.0 或更高版本。对于较旧的 Python 版本，诀窍似乎是更新底层的 openssl 库。

有关背景，请参阅本期的讨论：[https ://bugs.python.org/issue32257](https://bugs.python.org/issue32257)

# c# - 单击按钮时停止刷新页面

> ID：15760101
> 
> 赞同：3
> 
> 时间：2013-04-02T09:05:21.170
> 
> 标签：c#, asp.net, html

当我单击它时，我需要使 asp 按钮不刷新整个页面。

我的代码只是将图片更改为另一张图片，但图片的索引是在页面加载方法中设置的。并且每次点击按钮跳转到下一张图片索引时，整个页面都会刷新并调用页面加载方法。然后将索引设置回0。

单击按钮时如何使页面停止调用页面加载方法

这是我正在使用的基本代码

在表格中：

```
<tr>
    <td> <asp:Button ID="Button1" runat="server" Text="Prev" OnClick="Button1_Click" OnClientClick="return false"/> </td>
    <td> <img ID="pic" alt="" src="010.JPG" runat="server" width="200" height="200" /> </td>
    <td> <asp:Button ID="Button2" runat="server" Text="Next" OnClick="Button2_Click" OnClientClick="return false"/> </td>
</tr> 
```

这是.cs文件

```
private List<String> imagePathList = new List<String> { };
private List<Boolean> isActivePath = new List<Boolean> { };

protected void Page_Load(object sender, EventArgs e)
{
        Debug.WriteLine("GALLARY *page load*");

        pic.Width = 200;
        pic.Height = 200;

        addToList();

        getImagePath(1);
}
protected void Button1_Click(object sender, EventArgs e)
{
    Debug.WriteLine("GALLARY *Button1_Click*");
    int index = getActive();
    getImagePath(index = index - 1); 
}
protected void Button2_Click(object sender, EventArgs e)
{
    Debug.WriteLine("GALLARY *Button2_Click*");
    int index = getActive();
    getImagePath(index = index + 1);
}

private void getImagePath(int index)
{
    Debug.WriteLine("GALLARY *getImagePath* index = "+index);
    int length = imagePathList.Count;

    if (index < length && index >= 0)
    {
        //pic.Src = imagePathList[index];
        //pic.Alt = imagePathList[index];
        pic.Src = imagePathList[index];
        pic.Alt = imagePathList[index];
        setActive(index);
    }
    else
    {
        pic.Src = "DOES NOT EXIST";
        pic.Alt = "DOES NOT EXIST";
    }
}

private void addToList()
{
    Debug.WriteLine("GALLARY *addToList*");
    imagePathList.Clear();
    isActivePath.Clear();

    addImage("08.JPG");
    addImage("09.JPG");
    addImage("010.JPG");
    addImage("011.JPG");
    addImage("012.JPG");
}

private void addImage(String filename)
{
    Debug.WriteLine("GALLARY *addImage* filename = "+filename);
    imagePathList.Add(filename);
    isActivePath.Add(false);
}
private void setActive(int index)
{
    Debug.WriteLine("GALLARY *setActive* index = " + index);
    for (int i = 0; i > isActivePath.Count; i++)
    {
        isActivePath[i] = false;
    }

    isActivePath[index] = true;
}
private int getActive()
{
    Debug.Write("GALLARY *getActive*");
    int temp = 0;
    for (int i = 0; i > isActivePath.Count; i++)
    {
        if (isActivePath[i] == true)
        {
            temp = i;
        }
    }
    Debug.WriteLine("index = " + temp);
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:10:03.927

您需要使用 UpdatePanel 进行部分更新。

```
<asp:ScriptManager runat="server"></asp:ScriptManager>

    <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Always" >
    <ContentTemplate>
    <asp:Image ID="Image1" runat="server" Height="23px"  Width="24px" />

    <asp:Button ID="btnImageChange" runat="server" Text="Check" OnClick="btnImageChange_Click1"  />
     </ContentTemplate>
    <Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnImageChange" EventName="Click" />
    </Triggers>
    </asp:UpdatePanel> 
```

然后在 .cs 后面的代码中写下：

```
protected void btnImageChange_Click1(object sender, EventArgs e)
    {
     // you can add a loop here for the list of images...
            Image1.ImageUrl = "~/Images/loading.gif";

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T09:08:47.620

```
onClientClick="return false" 
```

应该这样做！Onclick 将引用一个 ASP.net 函数，onClientClick 将在 HTML 中呈现为 OnClick 控件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-02T09:21:44.103

在按钮上单击调用此 javascript 函数

```
 <script type="text/Javascript">
     function ChangeIndex(){
      $.ajax({
                url: "Url of your page/Methodname",
                data: JSON.stringify({variableName,VariableValue}),
                dataType: 'json',
                type: 'POST',
                contentType: 'application/json',
                success: function (data) {
                    //set your image scr here 
                },
                error: function (data, status, jqXHR) {
                    //alert('There was an error.');
                }

            }
      </script> 
```

在你的代码后面写一个 webmethod

```
 [WebMethod]
    public static string Methodname(string variableName)
    { 
      //Logic to get the index. 
      return "Index";
     } 
```

希望这可以帮助。请发布您的代码，以便我可以进一步帮助您。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-26T09:36:01.500

尽量不要实现这样的老式按钮。相反，您可以使用`fly buttons`或`jQuery`触发不会回发的按钮。

# java - java.sql.SQLException：ResultSet 关闭 MySQL Java 后不允许操作

> ID：15760109
> 
> 赞同：0
> 
> 时间：2013-04-02T09:05:47.000
> 
> 标签：java, mysql, resultset, sqlexception

每当我尝试使用这种方法时，我都会得到这个。

```
java.sql.SQLException: Operation not allowed after ResultSet closed
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926)
    at com.mysql.jdbc.ResultSetImpl.checkClosed(ResultSetImpl.java:794)
    at com.mysql.jdbc.ResultSetImpl.next(ResultSetImpl.java:7077)
    at server.util.Plimus$1.run(Plimus.java:77) 
```

这是在第 77 行：`while (resultSet.next()) {`

```
public static void process(final Player c, final String playerName) {
    if (connection == null && connectionStatus == 0)
        createConnection();
    else if (connectionStatus != 0)
        return;
    new Thread() {
        @Override
        public void run() {
            try {
                String username = playerName.replaceAll(" ", "_");
                String query = "SELECT * FROM donations WHERE username = '" + username + "' AND received = '0' LIMIT 1;";
                ResultSet resultSet = query(query);
                while (resultSet.next()) {
                    int[] contractIds = {3178768, 1}; //put all of your contract ids in here.
                    int contractId = Integer.parseInt(resultSet.getString("contract")), id = Integer.parseInt(resultSet.getString("id"));
                    query("UPDATE donations SET received = '1' WHERE username = '" + username + "' AND id = '" + id + "';");
                    if (contractId == contractIds[0]) { //first contract id in array.
                        c.getItems().addItem(962, 1);
                    } else if (contractId == contractIds[1]) { //second contract id in array.
                        c.getItems().addItem(962, 1);
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
                processMethod(0, true, true, false);
            }
        }
    }.start();
} 
```

这是请求的查询方法。

```
/**
 * Creates query function.
 */
public static ResultSet query(String s) throws SQLException {
    try {
        if (s.toLowerCase().startsWith("select")) {
            ResultSet resultSet = statement.executeQuery(s);
            return resultSet;
        } else {
            statement.executeUpdate(s);
        }
        return null;
    } catch (Exception e) {
        e.printStackTrace();
        processMethod(0, true, true, false);
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:21:11.273

在遍历您的`ResultSet`时，您正在重用该`Statement`对象来更新数据（在您的`query`方法内部），这将关闭`ResultSet`查询。

请参阅结果[集文档](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)：

> “当生成它的 Statement 对象关闭、重新执行或用于从多个结果序列中检索下一个结果时，ResultSet 对象会自动关闭。”

您应该为查询和更新创建单独的语句，并将它们传递给您的查询方法：

```
public ResultSet query(String s, Statement statement) throws SQLException {
    ...
} 
```

我假设这`statement`是在你的类中声明`static`的——通常不需要这样做：在你的类的构造函数中创建两个查询和更新语句，然后将它们传递给`query()`方法或根据语句使用一个或另一个.

# java - 从 URL 将图像添加到 PDF？

> ID：15760111
> 
> 赞同：3
> 
> 时间：2013-04-02T09:05:51.190
> 
> 标签：java, image, itext

我试图将 URL 地址中的图像添加到我的 pdf 中。代码是：

```
Image image=Image.getInstance("http://www.google.com/intl/en_ALL/images/logos/images_logo_lg.gif");
image.scaleToFit((float)200.0, (float)49.0);
paragraph.add(image); 
```

但它不起作用。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:00:22.050

这是使用 iText 从远程位置加载 .gif 时的一个已知问题。

解决此问题的方法是使用 Java 下载 .gif（而不是通过 iText 的 Image 类的 getInstance 方法）并在 Image 类的 getInstance 方法中使用下载的字节。

编辑：我继续并修复了 iText 中的远程 gif 加载，它包含在 iText 5.4.1 及更高版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-15T16:05:57.650

无法通过 URL 将图像添加到 Itext PDF 中。在 PDF 中添加图像的唯一方法是将所有图像下载到本地目录并应用以下代码

```
String photoPath = Environment.getExternalStorageDirectory() + "/abc.png";
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inSampleSize = 8;
            final Bitmap b = BitmapFactory.decodeFile(photoPath, options);

            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            Bitmap.createScaledBitmap(b, 10, 10, false);
            b.compress(Bitmap.CompressFormat.PNG, 30, stream);
            Image img = null;
            byte[] byteArray = stream.toByteArray();
            try {
                img = Image.getInstance(byteArray);
            } catch (BadElementException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-04-14T19:18:22.517

您用于将图像添加到 IText PDF 的方式是用于添加本地文件的方式，而不是 URL。

对于 URL，这种方式将解决问题。

```
String imageUrl = "http://www.google.com/intl/en_ALL/" 
                  + "images/logos/images_logo_lg.gif";

Image image = Image.getInstance(new URL(imageUrl)); 
```

然后，您可以继续将其添加`image`到以前打开的一些文件`document`中，使用`document.add(image)`.

如需进一步参考，请访问 [ [Java IText: Image docs](http://tutorials.jenkov.com/java-itext/image.html) ]。

# database - Grails 锁定级别

> ID：15760115
> 
> 赞同：1
> 
> 时间：2013-04-02T09:06:01.207
> 
> 标签：database, grails, grails-orm

我是 Grails 和 Goovy 的新手。我已经查看了[Grails 框架文档](http://grails.org/doc/latest/guide/single.html#locking) 和关于乐观与悲观锁定的讨论[here](https://stackoverflow.com/questions/129329/optimistic-vs-pessimistic-locking)

从文档中可以清楚地看出：

*   Grails 默认使用乐观锁。

*   可以关闭乐观锁定（通过使用 version=false）

*   如果您关闭乐观锁定并关心发生并发更新时丢失数据，那么您必须启用悲观锁定（通过使用 lock() 方法）

我的问题：

*   好像有3种模式。两个明确命名：乐观和悲观，另一个隐含 - 您已覆盖乐观但未启用悲观。这个对吗？

*   如果正确 - 这种“中间”状态称为什么，是否有任何合法用途？（询问的原因是我正在审查某人的代码，并且这种“中间”状态有很多用途，他们没有问，没有记录它等等......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T02:08:02.960

“乐观”和“悲观”不一定是全局模式。您可以以一种方式访问​​一个对象，并以另一种方式访问​​另一个对象。

首先，这是 Marc Palmer 最近（2012 年 11 月）的一篇非常好的文章：[GORM 和 Hibernate 的错误乐观](http://www.anyware.co.uk/2005/2012/11/12/the-false-optimism-of-gorm-and-hibernate/)。它的主要结论是，嗯，它很复杂，而且 Grails 并不能真正很好地处理开箱即用的并发性。除非您真正了解 Hibernate 如何在数据库之上工作，以及 Grails 如何在 Hibernate 之上工作，否则您确实会在随机位置丢失数据或出现奇怪的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:01:18.953

我认为如果你关闭版本控制，你基本上是在关闭锁检查。所以第三种状态基本上是无版本控制=>所有写入都通过，没有检测到冲突。

从'Programming Grails'的Hibernate章节 -

Grails 默认为所有域类启用乐观锁定，通常不应更改此设置。但是，如果您需要，例如在映射到旧数据库或未更新的表时，因此没有并发编辑的风险，您可以使用版本 false 禁用它。

# iphone - iPhone，带有@和#的键盘，也有英文字符

> ID：15760117
> 
> 赞同：-2
> 
> 时间：2013-04-02T09:06:06.750
> 
> 标签：iphone, keyboard, development-environment

我想在屏幕截图中设置为 iPhone 的以下键盘。

对我来说重要的是同时使用英文字符“@”和“#”。

![我正在寻找的屏幕截图](https://s17.postimg.org/ri2ixem7j/keyboard_Insta.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:09:02.797

设置文本字段的键盘类型

```
 textfield.keyboardType = UIKeyboardTypeTwitter; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:09:04.360

[文档说明了一切。](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/doc/uid/TP40006896-CH3-SW22) `UIKeyboardTypeTwitter`.

# jaxb - 球衣 2 - JAXB

> ID：15760123
> 
> 赞同：0
> 
> 时间：2013-04-02T09:06:27.677
> 
> 标签：jaxb, jersey, tomcat7, jax-rs

在 Tomcat 7 中使用 Jersey 2 m13-3，我试图发布 XML 并让 JAXB 自动解组它。

我的方法签名是这样的：

```
@POST
@Consumes(MediaType.APPLICATION_XML)
@Produces( {"text/xml"})
public Response setFoo(
        myXJC.generatedclass.Foo foo
        ) 
```

我收到 400 错误请求，但也不例外（我能找到）。

测试：

```
@POST
@Consumes(MediaType.APPLICATION_XML)
@Produces( {"text/xml"})
public Response setFoo() { ... } 
```

我确信正在调用此方法以响应请求。

但只要我添加 arg myXJC.generatedclass.Foo，它就不是了。

我的班级是否需要一些特殊的东西来扩展 javax.ws.rs.core.Application 以使用 JAXB？可能与 ResourceConfig 相关的东西？任何额外的球衣专用罐子？

我看到有一个 jersey-media-moxy。我很乐意让它与 MOXy 一起使用，但理想情况下它也可以与 Sun/Oracle JAXB 一起使用。

我看过以下源代码：

```
<dependency>
    <groupId>org.glassfish.jersey.examples</groupId>
    <artifactId>jaxb</artifactId>
    <version>2.0-m13-3</version>
</dependency> 
```

但我仍然有麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:44:24.740

事实证明，当我使用 XJC 从 XSD 生成类时，我在其中留下了不正确的目标命名空间。

我发布的 XML 不是命名空间限定的，但生成的类需要命名空间。

一旦我解决了这个问题，事情就很好了。

# excel - sheet_name.calculate 不会更新公式，但 shift+f9 会更新吗？

> ID：15760127
> 
> 赞同：0
> 
> 时间：2013-04-02T09:06:32.663
> 
> 标签：excel, vba

我正在自动化工作表并在 vba 中调用：

```
sheet_name.calculate 
```

问题是这似乎没有更新我的一些依赖于对财务插件的 API 调用的单元格。它们仍然包含`#VALUE!`但是，如果我在同一张纸上按“shift + f9”，那么所有包含`#VALUE!`突然刷新的单元格并包含正确的数值。

为什么 .calculate 不这样做呢？

（我的计算更新设置设置为“手动” - 这是因为我不想自动更新，只有当我的代码调用 .calculate 时才决定）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:38:44.223

尝试

```
Application.CalculateFull 
```

[http://msdn.microsoft.com/en-us/library/office/ff194064.aspx](http://msdn.microsoft.com/en-us/library/office/ff194064.aspx)

如果这不起作用，也许这会有所帮助 - 它确保重建所有依赖项

```
Application.CalculateFullRebuild 
```

[http://msdn.microsoft.com/en-us/library/office/ff822609.aspx](http://msdn.microsoft.com/en-us/library/office/ff822609.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T17:50:44.487

我个人没有发现 worksheets("SheetName").Calculate 和 shift-f9 之间的任何区别 - 但可能值得尝试一下：

```
Worksheets("SheetName").EnableCalculation=False
Worksheets("SheetName").EnableCalculation=True
Worksheets("SheetName").Calculate 
```

这会强制对工作表进行完整计算，而不是重新计算。

# ganglia - 如何从 ganglia 的数据库中获取数据

> ID：15760128
> 
> 赞同：8
> 
> 时间：2013-04-02T09:06:34.630
> 
> 标签：ganglia

我想用ganglia的数据来分析我们的集群，但是我不知道ganglia的数据库在哪里。

以前有人这样做过吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T12:31:45.940

To get data from ganglia .rrd files and save it in .xml file, you can use rddtool.

```
rrdtool dump filename.rrd [filename.xml] [--header|-h {none,xsd,dtd}] [--no-header] [--daemon address] > filename.xml 
```

example:

```
sudo rrdtool dump bytes_out.rrd > data.xml 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-27T13:45:38.710

在 gmetad 上存储度量数据的是 rrd 文件。通常默认路径是`/var/lib/ganglia/rrds/<cluster-name>/<node-name>/`每个指标存储在单个 rrd 文件中的位置，例如`bytes_in.rrd`

请参阅命令[rrdfetch](http://oss.oetiker.ch/rrdtool/doc/rrdfetch.en.html)或[此问题](https://stackoverflow.com/questions/14494114/how-to-read-rrd-file-to-get-usage-data)以查看如何从 rrd 文件中获取数据（这是纯粹的 rrdtool 问题，不属于神经节技术）

# c++ - c++：奇怪的双倍乘法错误

> ID：15760131
> 
> 赞同：-2
> 
> 时间：2013-04-02T09:06:41.677
> 
> 标签：c++, double

我使用 VC++ 2010 编译器。我下面的代码给出了 509：

```
double volume = 5.1;
int n = static_cast<unsigned int>(volume * 100.0); 
```

我想念什么吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:07:45.917

浮点数据类型不能代表所有数字。由于您的计算机使用二进制浮点，因此唯一可表示的数字是*s2 ^e*形式，其中*s*是有效数，*e*是指数。很容易看出 5.1 不适合这种模式。它不能完全表示。

此[页面](http://pages.cs.wisc.edu/~rkennedy/exact-float?number=5.1)向您显示最接近 5.1 的可精确表示的双精度二进制浮点值。值为：

```
5.09999 99999 99999 64472 86321 19949 90706 44378 66210 9375 
```

所以最接近 5.1 的值略小于 5.1。将它乘以 100 并截断，得到 509。

了解有关该主题的更多信息的标准参考是 David Goldberg 的[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:17:41.640

5.1 表示为 5.099999，乘以 100.0 为 509.9990。转换为 int 后为 509。

# android - 在android中过滤搜索

> ID：15760132
> 
> 赞同：0
> 
> 时间：2013-04-02T09:06:43.953
> 
> 标签：android

我正在对我的列表视图进行过滤搜索。我的 listview 代码执行良好。我放了一个edittext对象，然后我将进行过滤器搜索。我怎么能做这个？我的代码如下。

```
package com.nexum.imageloadingromjson;

  public class MainActivity extends Activity {

private ListView list;
private MyAdapter adapter;

private final String parsingUrl = "someurl";
private String tag_coord = "Coord";
private String tag_lat = "Lat";// Double
private String tag_lon = "Lon";// Double
private String tag_image = "Image";
private String tag_InIzmir = "InIzmir";// Boolean
private String tag_name = "Name";
private ImageLoader imageLoader;
private EditText filteredittext;

private ProgressDialog pDialog;

private static int clickedItemPosition = -1;
private final int REQUEST_CODE_DETAIL = 1;

ArrayList<CoordItem> items;
ArrayList<CoordItem> filterlist;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    items = new ArrayList<CoordItem>();
    filterlist = new ArrayList<CoordItem>();
    adapter = new MyAdapter(this, R.layout.list_item, items);

    list = (ListView) findViewById(R.id.exampList);
    list.setAdapter(adapter);
    list.setTextFilterEnabled(true);

    filteredittext = (EditText)findViewById(R.id.filtersearchedittext);

    filteredittext.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            viewitems.clear();
            String search = filteredittext.getText().toString();

            for (int i = 0; i < items.size(); i++) {

                if(items.get(i).name.equals(search)){
                    viewitems.add(items.get(i));
                    adapter.notifyDataSetChanged();
                }

            }

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });

    pDialog = new ProgressDialog(this);
    pDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    pDialog.setMessage("Veriler alınıyor...");

    new ListViewLoad().execute();

    list.setOnItemClickListener(new OnItemClickListener() {

        @SuppressLint("ShowToast")
        @Override
        public void onItemClick(AdapterView<?> a, View v, int position,
                long id) {
            /*
             * String bulunma = ""; if (items.get(position).inIzmir) {
             * bulunma+="İzmir de bulundu."; }else{
             * bulunma+="İzmir de bulunmadı."; } String
             * s="Name:"+items.get(position).name+"\nInIzmir:"+bulunma;
             * Toast.makeText(getApplicationContext(), s,
             * Toast.LENGTH_LONG).show();
             */

            clickedItemPosition = position;
            Intent myIntent = new Intent(MainActivity.this,
                    DetailActivity.class);
            Bundle bundle = new Bundle();
            bundle.putParcelable(
                    "parcelable_key",
                    new CoordItem(items.get(position).name, items
                            .get(position).img, items.get(position).lat,
                            items.get(position).lon,
                            items.get(position).inIzmir));
            myIntent.putExtras(bundle);
            // Güncelleme olayÄ± burada baÅŸlÄ±yor
            // startActivityForResult(myIntent, REQUEST_CODE_DETAIL);

            startActivityForResult(myIntent, REQUEST_CODE_DETAIL);

        }

    });

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == REQUEST_CODE_DETAIL && resultCode == RESULT_OK
            && data != null) {
        CoordItem coorditem = new CoordItem(data.getStringExtra("name"),
                items.get(clickedItemPosition).img, Double.parseDouble(data
                        .getStringExtra("lat")), Double.parseDouble(data
                        .getStringExtra("lon")),
                items.get(clickedItemPosition).inIzmir);

        items.set(clickedItemPosition, coorditem);
        adapter.notifyDataSetChanged();
        Toast.makeText(getApplicationContext(), "Guncelleme yapÄ±ldÄ±.",
                Toast.LENGTH_SHORT).show();
    }

}

private class ListViewLoad extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... params) {

        String json = getStringFromURL(parsingUrl);
        try {
            final JSONArray jArray = new JSONArray(json);

            for (int i = 0; i < jArray.length(); i++) {
                JSONObject c = jArray.getJSONObject(i);
                JSONObject coord = c.getJSONObject(tag_coord);
                double lat = coord.getDouble(tag_lat);
                double lon = coord.getDouble(tag_lon);
                String image = c.getString(tag_image);
                boolean InIzmir = c.getBoolean(tag_InIzmir);
                String name = c.getString(tag_name);

                CoordItem item = new CoordItem(name, image, lat, lon,
                        InIzmir);
                items.add(item);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);

        adapter.notifyDataSetChanged();

        pDialog.dismiss();
    }

}

private class MyAdapter extends ArrayAdapter<CoordItem> {

    private LayoutInflater inflater;

    public MyAdapter(Context context, int textViewResourceId,
            ArrayList<CoordItem> objects) {
        super(context, textViewResourceId, objects);

        imageLoader = ImageLoader.getInstance();
        imageLoader.init(ImageLoaderConfiguration.createDefault(context));
        this.inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        if (items != null)
            return items.size();
        else
            return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder viewholder = null;

        if (convertView == null) {
            viewholder = new ViewHolder();

            convertView = inflater.inflate(R.layout.list_item, parent,
                    false);
            viewholder.listItemImage = (ImageView) convertView
                    .findViewById(R.id.listItemImage);

            viewholder.listItemName = (TextView) convertView
                    .findViewById(R.id.listItemName);
            viewholder.listItemInIzmir = (TextView) convertView
                    .findViewById(R.id.listItemInIzmir);
            viewholder.listItemLatitude = (TextView) convertView
                    .findViewById(R.id.listItemLatitude);
            viewholder.listItemLongitude = (TextView) convertView
                    .findViewById(R.id.listItemLongitude);
            convertView.setTag(viewholder);
        } else {
            viewholder = (ViewHolder) convertView.getTag();
        }

        viewholder.listItemName.setText(items.get(position).name);
        if (items.get(position).inIzmir) {
            viewholder.listItemInIzmir.setText("Izmirde.");
        } else {
            viewholder.listItemInIzmir.setText("Izmirde degil.");
        }

        DisplayImageOptions options = new DisplayImageOptions.Builder().delayBeforeLoading(1000).build();
        imageLoader.displayImage(items.get(position).img,viewholder.listItemImage,options);

        return convertView;
    }

    public Drawable getDrawableFromUrl(URL url) {
        try {
            InputStream is = (InputStream) url.getContent();
            Drawable d = Drawable.createFromStream(is, "src");
            return d;
        } catch (Exception e) {
            return null;
        }
    }

}
static class ViewHolder {
    ImageView listItemImage;
    TextView listItemName, listItemInIzmir, listItemLatitude,
            listItemLongitude;
}

public String getStringFromURL(String url) {

    // Making HTTP request
    String json = "";
    InputStream is = null;
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        e.printStackTrace();
    }

    // return JSON String
    return json;

} 
```

}

我必须在这些代码中向 onTextChanged 方法写什么？我进行了研究，但没有找到该课程的代码。或者我没有编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:14:13.003

请尝试使用以下代码。

```
you must integrate this line .. where you are setting adapter .

listView.setAdapter(new MyAddapter(this));

                    array_sort.clear();
                    array_sort.addAll(Service_Listitems); 
```

然后使用下面的行。

```
 edittext_search.addTextChangedListener(new TextWatcher(){
                    public void afterTextChanged(Editable s) {

                    }
                    public void beforeTextChanged(CharSequence s, int start, int count, int after){

                    }
                    public void onTextChanged(CharSequence s, int start, int before, int count){

                        try {
Service_Listitems.clear();// Clear your arraylist initially 

                            for (int i = 0; i < array_sort.size(); i++) {

                                    if (array_sort.get(i)  instanceof yourServiceSetterGetterClass) {
                                        yourServiceSetterGetterClass cp1 = (yourServiceSetterGetterClass)array_sort.get(i);

        String strOrig = "";
        if (cp1.getFirstName() == null) {
strOrig = "";
    } else {
    strOrig = cp1.getFirstName().toUpperCase().trim();
}
String str = edittext_search.getText().toString().toUpperCase().trim();
if (strOrig.startsWith(str)) {                              Service_Listitems.add(cp1);
} 
}
}

listView.setAdapter(new MyAddapter(this));

                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                    }
                });; 
```

编辑

```
ArrayList<CoordItem> Service_Listitems= new ArrayList<CoordItem>();  

private ArrayList<Object> array_sort = new ArrayList<Object>(); 
```

或者你也可以像下面这样使用

```
 private ArrayList<CoordItem> array_sort = new ArrayList<CoordItem>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:16:30.657

要在 listview 上搜索，请查看此处的链接。

[在android中的EditText上输入时如何过滤ListView数据](https://stackoverflow.com/questions/1645209/how-can-i-filter-listview-data-when-typing-on-edittext-in-android/13172848#13172848)

如果要进行自定义搜索，可以使用下面的代码

Activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">
<EditText 
android:id="@+id/search"
android:layout_width="fill_parent"
android:layout_height="wrap_content"/>
<ListView
android:id="@+id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

主要活动

```
 public class MainActivity extends Activity {
 ArrayList<NewData> mTemp=new ArrayList<NewData>(); //temporary list for search data 
 ArrayList<NewData> mPostingData=new ArrayList<NewData>(); //data to post in listview
 ArrayList< NewData> mOri = new ArrayList<NewData>() ;//original data
   // You can have two arraylist instead of three. 1\. for original values 2\. one for search result.

Myadapter ma;
EditText search;

NewData nd;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

        for(int i = 0; i < 20; i++)
        {
             // Add your Json Parsed Data here
            // each item from json add it to hash map in NewData class. Arraylist of 0 contains jsondata of customer1
            nd=new NewData();

            nd.newDatacus.put(NewData.TAG_CUSTOMER_CODE, "i"+i);
            nd.newDatacus.put(NewData.TAG_CUSTOMER_NAME, "a"+i);
            nd.newDatacus.put(NewData.TAG_CUSTOMER_MOBILE, "number");
            nd.newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS, "address");
           mOri.add(nd);
        }

     ma= new Myadapter(MainActivity.this);
   mPostingData=mOri;
   mTemp=mOri;
    ListView lv= (ListView) findViewById(R.id.list);
    lv.setAdapter(ma);
    search= (EditText) findViewById(R.id.search); //editext
     search.addTextChangedListener(new TextWatcher() { //supply edittext value to filter

         public void onTextChanged(CharSequence s, int start, int before, int count) {
                         ma.getFilter().filter(s);
                         ma.notifyDataSetChanged();

         }

         public void beforeTextChanged(CharSequence s, int start, int count,
             int after) {

           }

           public void afterTextChanged(Editable s) {
           }
          });

}

 class Myadapter extends ArrayAdapter  
{
LayoutInflater mInflater;

 public void setData(ArrayList<NewData> mPpst) {  //function to set data based on search result 
        mPostingData = mPpst;//contains class items data.
    }

 @Override
 public Filter getFilter() {  //implement getFilter
     return new Filter() {
         @Override
         protected void publishResults(CharSequence constraint, FilterResults results) {
             if (results != null && results.count >= 0) {
                 setData((ArrayList<NewData>) results.values);//if results of search is null set the searched results data
             } else {
                 setData(mOri);// set original values
             }

             notifyDataSetInvalidated();//refresh listview
         }

       //this performs filtering data.//check if data matches whats typed in editext
       //add it to list if found. return list (founditems)
        @Override
         protected FilterResults performFiltering(CharSequence constraint) {
             FilterResults result = new FilterResults();
             if (!TextUtils.isEmpty(constraint)) {
                 constraint = constraint.toString().toLowerCase();
                 ArrayList<NewData> foundItems = new ArrayList<NewData>();
                 if(mTemp!=null)
                 {
                 for(int i=0;i<mTemp.size();i++)
                 {

                     if (mTemp.get(i).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString().contains(constraint)) {
                         System.out.println("My datas"+mTemp.get(i).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString());
                         foundItems.add(mTemp.get(i));

                     }
                     else
                     {

                     }
                 }
                 }
                 result.count = foundItems.size();//search results found return count
                 result.values = foundItems;// return values
             } 
             else
             {
                 result.count=-1;// no search results found
             }

             return result;
         }
     };
 }
public Myadapter(Context context) {
    super(context, 0);
    mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // TODO Auto-generated constructor stub
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return mPostingData.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
     ViewHolder holder;

        if(mOri == null ){

            return null;
        }
                // When convertView is not null, we can reuse it directly, there is no need
                // to reinflate it. We only inflate a new View when the convertView supplied
                // by ListView is null.
                if (convertView == null) {
                    convertView = mInflater.inflate(R.layout.list, null);
                    convertView.setLayoutParams(new AbsListView.LayoutParams(LayoutParams.FILL_PARENT,
                            LayoutParams.WRAP_CONTENT));
                    // Creates a ViewHolder and store references to the two children views
                    // we want to bind data to.
                    holder = new ViewHolder();
                    holder.t1=(TextView) convertView.findViewById(R.id.textView1);
                    holder.t2 = (TextView) convertView.findViewById(R.id.textView2);
                    holder.t3 = (TextView) convertView.findViewById(R.id.textView3);

                    convertView.setTag(holder);
                } else {
                    // Get the ViewHolder back to get fast access to the TextView
                    // and the ImageView.
                    holder = (ViewHolder) convertView.getTag();
                }
                holder.t1.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_CODE).toString());
                holder.t2.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_NAME).toString());
                holder.t3.setText(mPostingData.get(position).newDatacus.get(NewData.TAG_CUSTOMER_MOBILE).toString());
                return convertView;
    }
 }
 class ViewHolder
 {
 TextView t1,t2,t3;
 }
} 
```

列表.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="horizontal" >

 <TextView
  android:id="@+id/textView1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:paddingLeft="20dp"
  android:text="TextView" />

 <TextView
  android:id="@+id/textView2"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:paddingLeft="20dp"
android:text="TextView" />

<TextView
android:id="@+id/textView3"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:paddingLeft="20dp"
android:text="TextView" />

</LinearLayout> 
```

NewData 类 - 将所有数据保存在 hashmap 中

```
 public class NewData {
 public static final String TAG_CUSTOMER_CODE = "customer_code";
 public static final String TAG_CUSTOMER_NAME = "customer_name"; 
 public static final String TAG_CUSTOMER_MOBILE = "customer_mobile";
 public static final String TAG_CUSTOMER_ADDRESS = "customer_address";

 Hashtable newDatacus=new Hashtable();

public NewData()
{

    newDatacus.put(NewData.TAG_CUSTOMER_CODE,new String());
    newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS,new String());
    newDatacus.put(NewData.TAG_CUSTOMER_NAME,new String());
    newDatacus.put(NewData.TAG_CUSTOMER_MOBILE,new String());
    newDatacus.put(NewData.TAG_CUSTOMER_ADDRESS,new String());

 }
} 
```

# python - aix 上的 M2crypto 编译

> ID：15760137
> 
> 赞同：0
> 
> 时间：2013-04-02T09:07:11.503
> 
> 标签：python, swig, aix, m2crypto

在 AIX5.1 上使用以下加扰命令编译 M2Crypto 模块时：

`/opt/local/python/2.7.3/bin/python setup.py build_ext --swig /opt/local/swig/1.3.4/bin/swig -I /opt/local/swig/1.3.4/share/swig/1.3.40/:/opt/local/swig/1.3.4/share/swig/1.3.40/python --openssl /opt/local/openssl/0.9.8/ --library-dirs=/opt/local/openssl/0.9.8/lib/`

输出如下：

`/opt/local/swig/1.3.4/share/swig/1.3.40//exception.i:11: Error: CPP #error ""This version of exception.i should not be used"". Use the -cpperraswarn option to continue swig processing.`

可用编译器列表：

*   --compiler=bcpp Borland C++ 编译器
*   --compiler=cygwin 用于 Win32 的 GNU C 编译器的 Cygwin 端口
*   --compiler=emx GNU C Compiler for OS/2 的 EMX 端口
*   --compiler=mingw32 用于 Win32 的 GNU C 编译器的 Mingw32 端口
*   --compiler=msvc Microsoft Visual C++
*   --compiler=unix 标准 UNIX 风格的编译器

通过任何这些似乎也不起作用。在 /opt/local/python/2.7.3/lib/python2.7/config/Makefile 我看到：

`CC= xlc_r` `CXX= g++`

这应该首先使用 xlc_r 编译器。将 -cpperraswarn 传递给它作为建议返回： `error: don't know how to compile C/C++ code on platform 'posix' with 'pperraswarn' compiler`

应该有办法让它使用不同于可用编译器列表中定义的编译器进行编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:48:02.437

嗯，本质上，

Swig 应该以不同的方式编译，

```
./configure --with-python=/opt/local/python/2.7.3/bin/python --prefix=/opt/local/swig/1.3.40 CC=xlc_r CXX=/usr/vacpp/bin/xlC_r 
```

在这种情况下，正确的编译器选项很重要。

对于 M2Crypto，然后：

`/opt/local/python/2.7.3/bin/python setup.py build_ext --openssl=/opt/local/openssl/1.0.0a/`

在那个问题之后通常构建和安装。希望这些东西将来对某人有用。

# sass - PhpStorm：SCSS 文件观察器设置

> ID：15760140
> 
> 赞同：9
> 
> 时间：2013-04-02T09:07:23.503
> 
> 标签：sass, phpstorm

我需要帮助在 PhpStorm 中设置我的 SCSS 文件观察器。我在 Ubuntu 上，我有 PhpStorm 6，我有带有 Ruby 1.9.3p194 和 Sass 3.2.5 的 RVM。我在设置>>文件观察器中设置了我的文件观察器选项，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/dLx5X.png)

完成此操作后，我更改了**.SCSS**文件中的某些内容，但出现此错误。

```
...-1.9.3-p194/bin/sass --no-cache --update style_update.scss:style_update.css
/usr/bin/env: ruby: No such file or directory 
```

*（我在第一行的开头添加了三个点以使行更短）*那么可能是什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T12:45:20.967

问题是 IDE 无法`ruby`在`PATH`. 请注意，它在终端和从 Ubuntu 启动板启动的应用程序中可能会有所不同。

使用文件观察程序配置中的**环境变量**`PATH`选项来指定包含所需可执行文件的目录的自定义值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-17T13:49:54.357

引用之前的答案/评论：

> “[...] ... 只做所写的，添加 PATH 变量 ... [...]”

......这正是帮助人们（他们大多不是老师），每天完成任务，另一方面问人们，他们可以想象标准答案和他们的话背后的 3 种不同事物之间的常见误解。Stackoverflow 应该对此进行扩展，而不是重复手册或文档。

例如，在 PHPstorm 中，点击环境变量设置窗口右上角的加号后，您有 2 个空字段。左侧字段具有标题“变量”，右侧字段具有标题“值”。因此，如果有人不熟悉桌面或服务器系统的 PATH 和 ENVIROMENT 变量，这个人就会对必须放在第一个字段中的内容感到困惑。是“红宝石”吗？是“路径”吗？它不会覆盖系统的整个 PATH 变量吗？它是我可以选择的自定义给定名称吗？系统如何知道它？找不到解释。

如果你不知道背后的逻辑，你就不能从这个标准制定的建议中假设正确的步骤。虽然我对 PHPstorm 的功能集感到非常兴奋，但我发现文档过于标准化且无法解释。这就是为什么许多条目从下面的读者那里得到了不好的投票。就像有人会问：“我如何烘烤繁殖？” 回答者说：“首先你必须准备面粉和面团，然后你才能烘烤。” 那么提问者从这个答案中学到了什么？确切地。没有什么是他之前不知道的。好吧，也许问题不够清楚，但这也是一个常见的情况：如果你不知道你实际要求的是什么，如何正确提问？从哪里可以知道，是否需要了解如何设置 PATH 变量？我想这就是创客和老师的不同之处。教师学会沟通这种差距。文档通常缺乏更好的老师来编写它。在支持团队中工作的人应该更好地像老师一样思考。

为了变得更有建设性：PHPstorm 的文档在其示例中说：“选择 PATH_TO_LIB 作为 NAME 并选择库的路径作为 VALUE 字段。” 再说一遍：这个 PATH_TO_LIB 是从哪里来的？它是一个自己的名字，还是一个准备好的空变量名 PHPstorm 手表？如果出现问题并且您开始寻找可能导致此问题的问题并开始担心错误的设置，即使作为经验丰富的 PHP 开发人员，您也会迷失在这个问题上。

我通常更喜欢使用像警卫和基于 RVM 的 ruby​​ 安装 ATM 这样的工具，而不是像 PHPstorm 这样的内置监视文件解决方案，它们主要寻找系统范围的 ruby​​ 等。但是使用 rvm 我们有基于项目的路径到 ruby​​ 等。RVM 可以防止破坏基于某些 gem 版本的长期主题或模块开发的编译链。在此处观看[http://www.youtube.com/watch?v=CmTuvzbPduI](http://www.youtube.com/watch?v=CmTuvzbPduI)，其中 Sebastian Siemssen（著名的 Drupal 开发人员）解释了为什么这是一个好概念。但是要使用 PHPstorm 功能很好地实现这一点，您需要更好的低级入口来在 PHPstorm 中进行路径编辑。

遗憾的是，这涉及再次按下保存，因为这需要触发保存文件事件。我希望看到更好的实现、灵活性和更好的解释，说明如何使用 PHPstorm 内置观察器来刷新手头的编辑。

# jquery - Jquery UI DIV 自动调整大小

> ID：15760141
> 
> 赞同：0
> 
> 时间：2013-04-02T09:07:24.227
> 
> 标签：jquery, jquery-ui

我正在使用 JQUERY UI LIBRARY，并且我有简单的 JQUERY 命令

```
$(".div1").dialog({ autoOpen: false });

$(".link1").click(
    function () {
        $(".div1").dialog('open');
        $(".div1").css("width", "500px");
        return false;
    }
);

.table   {width:500px}

<div class="div1" title="New Vindow">
   <div class="table">
   </div>
</div> 
```

当我点击link1 打开一个新的vindow DIV1。没关系。但我可以注意到这个 vindow 的宽度。上面我写了500px，但是不行，大小差不多350px。在 div1 里面我有另一个 div，div 的宽度是 500px。那么，如何更改 div1 的宽度以查看 vindow 上的所有内容？我检查了 jquery-ui.min，没有找到关于宽度的信息。可能我需要编写额外的命令吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:11:14.220

您`width`可以在[对话框默认选项中选择](http://api.jqueryui.com/dialog/)

```
$(".div1").dialog({   width: 500; });

$(".div1").dialog('open'); 
```

# powershell - 从命令行传递参数到powershell

> ID：15760145
> 
> 赞同：2
> 
> 时间：2013-04-02T09:07:33.193
> 
> 标签：powershell, command-line

当我在命令行中运行以下命令时

```
powershell.exe "Import-Module ActiveDirectory;New-ADUser -name "rr" 
-path "OU=Test,DC=Example,DC=com" 
```

我收到以下错误：

```
New-ADUser : Cannot convert 'System.Object[]' to the type 'System.String' required by parameter 'Path'. Specified method is not supported.
At line:1 char:56
+ Import-Module ActiveDirectory;New-ADUser -name rr -path <<<<  OU=Test,DC=Example,DC=com
    + CategoryInfo          : InvalidArgument: (:) [New-ADUser], ParameterBindingException
    + FullyQualifiedErrorId : CannotConvertArgument,Microsoft.ActiveDirectory.Management.Commands.NewADUser 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:16:19.770

试试这个：

```
powershell.exe "Import-Module ActiveDirectory;New-ADUser -name 'rr' `
-path 'OU=Test,DC=Example,DC=com'" 
```

# c++ - 在 Windows 上创建并行的屏幕外 OpenGL 上下文

> ID：15760147
> 
> 赞同：7
> 
> 时间：2013-04-02T09:07:37.293
> 
> 标签：c++, opengl

我正在尝试设置并行多 GPU 屏幕外渲染上下文。我使用“OpenGL Insights”书，第 27 章，“NVIDIA Quadro 上的多 GPU 渲染”。我还查看了 wglCreateAffinityDCNV[文档](http://developer.download.nvidia.com/opengl/specs/WGL_nv_gpu_affinity.txt)，但仍然无法确定。

我的机器有 2 个 NVidia Quadro 4000 卡（无 SLI）。在 Windows 7 64 位上运行。我的工作流程是这样的：

1.  使用 GLFW 创建默认窗口上下文。
2.  映射 GPU 设备。
3.  销毁默认的 GLFW 上下文。
4.  为每个设备创建新的 GL 上下文（目前只尝试一个）
5.  为每个上下文设置 boost 线程并使其在该线程中处于当前状态。
6.  分别在每个线程上运行渲染程序。（不共享资源）

一切都是在没有错误的情况下创建并运行的，但是一旦我尝试从屏幕外 FBO 读取像素，我就会在这里得到一个空指针：

```
GLubyte* ptr  = (GLubyte*)glMapBuffer(GL_PIXEL_PACK_BUFFER, GL_READ_ONLY); 
```

glError 也返回**“未知错误”**

我认为可能是多线程是问题，但相同的设置在单线程上运行时会给出相同的结果。所以我相信它与上下文创作有关。

这是我的做法：

```
 ////Creating default window with GLFW here .
      .....
         ..... 
```

创建屏幕外上下文：

```
 PIXELFORMATDESCRIPTOR pfd =
{
    sizeof(PIXELFORMATDESCRIPTOR),
    1,
    PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER,    //Flags
    PFD_TYPE_RGBA,            //The kind of framebuffer. RGBA or palette.
    24,                        //Colordepth of the framebuffer.
    0, 0, 0, 0, 0, 0,
    0,
    0,
    0,
    0, 0, 0, 0,
    24,                        //Number of bits for the depthbuffer
    8,                        //Number of bits for the stencilbuffer
    0,                        //Number of Aux buffers in the framebuffer.
    PFD_MAIN_PLANE,
    0,
    0, 0, 0
};

void  glMultiContext::renderingContext::createGPUContext(GPUEnum gpuIndex){

    int    pf;
    HGPUNV hGPU[MAX_GPU];
    HGPUNV GpuMask[MAX_GPU];

    UINT displayDeviceIdx;
    GPU_DEVICE gpuDevice;
    bool bDisplay, bPrimary;
    // Get a list of the first MAX_GPU GPUs in the system
    if ((gpuIndex < MAX_GPU) && wglEnumGpusNV(gpuIndex, &hGPU[gpuIndex])) {

        printf("Device# %d:\n", gpuIndex);

        // Now get the detailed information about this device:
        // how many displays it's attached to
        displayDeviceIdx = 0;
        if(wglEnumGpuDevicesNV(hGPU[gpuIndex], displayDeviceIdx, &gpuDevice))
        {   

            bPrimary |= (gpuDevice.Flags & DISPLAY_DEVICE_PRIMARY_DEVICE) != 0;
            printf(" Display# %d:\n", displayDeviceIdx);
            printf("  Name: %s\n",   gpuDevice.DeviceName);
            printf("  String: %s\n", gpuDevice.DeviceString);
            if(gpuDevice.Flags & DISPLAY_DEVICE_ATTACHED_TO_DESKTOP)
            {
                printf("  Attached to the desktop: LEFT=%d, RIGHT=%d, TOP=%d, BOTTOM=%d\n",
                    gpuDevice.rcVirtualScreen.left, gpuDevice.rcVirtualScreen.right, gpuDevice.rcVirtualScreen.top, gpuDevice.rcVirtualScreen.bottom);
            }
            else
            {
                printf("  Not attached to the desktop\n");
            }

            // See if it's the primary GPU
            if(gpuDevice.Flags & DISPLAY_DEVICE_PRIMARY_DEVICE)
            {
                printf("  This is the PRIMARY Display Device\n");
            }

        }

        ///=======================   CREATE a CONTEXT HERE 
        GpuMask[0] = hGPU[gpuIndex];
        GpuMask[1] = NULL;
        _affDC = wglCreateAffinityDCNV(GpuMask);

        if(!_affDC)
        {
            printf( "wglCreateAffinityDCNV failed");                  
        }

    }

    printf("GPU context created");
}

glMultiContext::renderingContext *
    glMultiContext::createRenderingContext(GPUEnum gpuIndex)
{
    glMultiContext::renderingContext *rc;

    rc = new renderingContext(gpuIndex);

    _pixelFormat = ChoosePixelFormat(rc->_affDC, &pfd);

    if(_pixelFormat == 0)
    {

        printf("failed to  choose pixel format");
        return false;
    }

     DescribePixelFormat(rc->_affDC, _pixelFormat, sizeof(pfd), &pfd);

    if(SetPixelFormat(rc->_affDC, _pixelFormat, &pfd) == FALSE)
    {
        printf("failed to set pixel format");
        return false;
    }

    rc->_affRC = wglCreateContext(rc->_affDC);

    if(rc->_affRC == 0)
    {
        printf("failed to create gl render context");
        return false;
    }

    return rc;
}

//Call at the end to make it current :

 bool glMultiContext::makeCurrent(renderingContext *rc)
{
    if(!wglMakeCurrent(rc->_affDC, rc->_affRC))
    {

        printf("failed to make context current");
        return false;
    }

    return true;
}

    ////  init OpenGL objects and rendering here :

     ..........
     ............ 
```

正如我所说，我在设备和上下文创建的任何阶段都没有出错。我究竟做错了什么 ？

**更新：**

好吧，似乎我发现了这个错误。我在调用 wglMakeCurrent() 之后调用了 glfwTerminate()，所以看起来最新的使“非当前”也成为新的上下文。虽然它是有线的，因为 OpenGL 命令不断执行。所以它在单个线程中工作。

但是现在，如果我使用 boost 踏板生成另一个线程，我会收到初始错误。这是我的线程类：

```
GPUThread::GPUThread(void)
{
    _thread =NULL;
    _mustStop=false;
    _frame=0;

    _rc =glMultiContext::getInstance().createRenderingContext(GPU1);
    assert(_rc);

    glfwTerminate(); //terminate the initial window and context
    if(!glMultiContext::getInstance().makeCurrent(_rc)){

        printf("failed to make current!!!");
    }
             // init engine here (GLEW was already initiated)
    engine = new Engine(800,600,1);

}
void GPUThread::Start(){

    printf("threaded view setup ok");

    ///init thread here :
    _thread=new boost::thread(boost::ref(*this));

    _thread->join();

}
void GPUThread::Stop(){
    // Signal the thread to stop (thread-safe)
    _mustStopMutex.lock();
    _mustStop=true;
    _mustStopMutex.unlock();

    // Wait for the thread to finish.
    if (_thread!=NULL) _thread->join();

}
// Thread function
void GPUThread::operator () ()
{
    bool mustStop;

    do
    {
        // Display the next animation frame
        DisplayNextFrame();
        _mustStopMutex.lock();
        mustStop=_mustStop;
        _mustStopMutex.unlock();
    }   while (mustStop==false);

}

void GPUThread::DisplayNextFrame()
{

    engine->Render(); //renders frame
    if(_frame == 101){
        _mustStop=true;
    }
}

GPUThread::~GPUThread(void)
{
    delete _view;
    if(_rc != 0)
    {
        glMultiContext::getInstance().deleteRenderingContext(_rc);
        _rc = 0;
    }
    if(_thread!=NULL)delete _thread;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:23:19.080

最后我自己解决了问题。第一个问题是我在将另一个设备上下文设置为当前后调用了 glfwTerminate。这可能也卸载了新的上下文。第二个问题是我对增强线程的“noobiness”。我未能在自定义线程中初始化所有与渲染相关的对象，因为我在设置线程之前调用了 rc init 对象过程，如上例所示。

# javascript - 通过 JavaScript 向左滑动 ul li

> ID：15760149
> 
> 赞同：0
> 
> 时间：2013-04-02T09:07:40.650
> 
> 标签：javascript, jquery, slider, jquery-animate

我有这个结构：

```
<div style="background-color:#FFF;height:49px;border-top:1px solid #ef4723;clear:both">
  <div id="marka-slider" class="row">
    <ul>
      <?php if (($references = Reference::getAll())) :
              foreach ($references as $r) :
      ?>
        <li>
          <img src="<?php echo Reference::getUploadPath() . '/' . $r->mediapath; ?>"
               alt="<?php echo $r->title; ?>" title="<?php echo $r->title; ?>"/>
               <!-- <?php CVarDumper::dump(array('ref: ' => $r->attributes), 5, 1); ?>  -->
        </li>
      <?php endforeach; ?>
      <?php endif; ?>
    </ul>

  </div>
</div> 
```

JS：

```
var slider;
$(document).ready(function () {
  slider = $('#marka-slider ul li');

  setTimeout(function() {
    bgscroll('right');
  }, 1000);
});

function bgscroll(direction) {
  var sign;
    if (direction === 'left') {
      slider.stop().animate({'background-position': '+=10000'}, 200000, 'linear', bgscroll);
    } else {
      slider.stop().animate({'background-position': '-=10000'}, 200000, 'linear', bgscroll);
    } 
```

但它不起作用。当我通过 Firebug 检查时，它没有给出错误。我该如何解决？

[演示](http://jsfiddle.net/xpVRT/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:51:36.407

[http://jsfiddle.net/xpVRT/2/](http://jsfiddle.net/xpVRT/2/)

您正在为标签的背景图像设置动画`li`，而图像`li`在`img`标签内部。

# azure - Windows Server 2008 R2 SP1 未 ping 通

> ID：15760152
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:07:54.270
> 
> 标签：azure, azure-virtual-machine

我在 Windows Azure 上创建了一个 VM。我的行动

1）“文件和打印机共享（回显请求-ICMPv4-In）”设置为开

2) Windows Wirewall 设置为 Off

它仍然无法ping通。

UPD：网络工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:37:39.700

你是什​​么意思`not pinged`？

ICMP 作为协议在 Azure LoadBalancer 级别被**禁用/阻止。**因此，无论您在 VM 中做什么，都不会在 VM 内部从 Internet 获得 ICMP 流量。将 ISMP 流量导入 VM 的唯一方法是通过[Azure 虚拟网络和 Azure Connect](http://www.windowsazure.com/en-us/home/features/networking/)以及来自有效连接的计算机。

您的操作 (1) 和 (2) 将帮助您从以下任一位置获取 ICMP 流量：

*   同一云服务中的另一个虚拟机
*   同一虚拟网络中的另一个虚拟机
*   您的计算机，如果它是同一虚拟网络的一部分
*   您的计算机（如果它**和**目标 VM 在 Windows Azure Connect 的同一组中）

** 更新 **

澄清问题后，您仍然无法成功执行`ping whatever.cloudapp.net`. 为了“使 iis 站点可见”，您需要从门户或您需要的端口的[管理 API](http://msdn.microsoft.com/en-us/library/windowsazure/jj157187.aspx)[将端点添加到您的 VM 。](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/setup-endpoints/)在你的情况下 - 端口 80。

# c# - 这两者有什么区别？

> ID：15760154
> 
> 赞同：0
> 
> 时间：2013-04-02T09:08:01.123
> 
> 标签：c#

```
namespace test
{
    class testclass1
    {

        public virtual void test()
        {
            Console.WriteLine("Parent class");
        }
    }
}

namespace test 
{
    class Program : testclass1
    {
        public override void test()
        {
            Console.WriteLine("Child class");
        }
        static void Main(string[] args)
        {
            Program t = new Program();
            t.test();
            Console.ReadLine();
        }
    }
} 
```

使用 `Program t = new Program()`答案是“儿童班”，同时使用 `testclass1 t = new Program()`答案也是一样的！

那么这两个初始化之间的确切区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:10:42.447

您正在分配not`t`的实例，因此它将始终调用该方法的实现，因为它是派生类并且覆盖了基方法。`Program``TestClass``Program`

```
public class Base
{
  //I am virtual, this means that I can be overriden
  public virtual void MethodA()
  {
    Console.WriteLine("Hello, From Base");
  }
}
public class Derived : Base
{
  //I am Base, but with other stuff.

  //I am going to do something else with MethodA
  public override void MethodA()
  {
    Console.WriteLine("Hello, From Derived");
  }
} 
```

你本质上是在做。

```
Base o = new Dervied(); 
```

`Derived`是一个基础，但它不能从 更改`Derived`为`Base`所以`Derived`仍然存在的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:14:37.483

您在这里使用的称为`inheritance`. 在您的情况下，您的`Program`类继承自 `testclass1`. 继承描述了一种 is-a 关系：你是一个人，`Program`is-a `testclass1`。

正因为如此，你可以说`testclass1 t = new Program()`。您创建一个类型的变量`testclass1`并使用 a 对其进行初始化`Program`，它是 的一种特殊类型`testclass1`。

您可以使用继承的一件事是扩展或替换行为。类中的`virtual`关键字`testclass1`意味着从它派生的类可以替换方法，就像您`override`在类中使用关键字一样`Program`。

以下几行将给出不同的结果：

```
Program p = new Program();
testclass1 t = new testclass1();
t.test();
p.test(); 
```

这将打印：

```
Child class
Parent class 
```

但是，您可以像使用`testclass1 一样使用您的`Program`类，就像您可以像对待动物一样对待人或狗一样。

# ruby - 如何在 Rake 文件中包含 gem 而不在 Gemfile 中指定它们？

> ID：15760159
> 
> 赞同：0
> 
> 时间：2013-04-02T09:08:17.417
> 
> 标签：ruby, rake

我正在尝试编写我的第一个 Rake 文件。它看起来像这样：

lib\tasks\routes_check.rake：

```
require 'curb'
task :route_test do 
  puts "checking routes"
end 
```

运行`rake route_test`失败并显示以下消息：

```
rake aborted!
no such file to load -- curb 
```

我用它运行它，`--trace`痕迹就[在这里](https://gist.github.com/gprasant/5290933)。

我不知道为什么这不起作用。在同一`lib/tasks`目录中，我保存了一个 .rb 文件，如下所示：

任务.rb：

```
require 'curb'

puts "Hello" 
```

当我使用 运行此文件时`ruby task.rb`，它工作正常。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:12:20.520

默认情况下，Rails 应用程序使用 Bundler，因此您需要添加`gem "curb"`到 Gemfile，然后使用`gem install`.

# java - 如何在运行时增加文本框高度？

> ID：15760160
> 
> 赞同：1
> 
> 时间：2013-04-02T09:08:20.677
> 
> 标签：java, swt, jface

如果文本框中的文本达到限制，我希望我的文本框高度增加。事实上，如果文本框的宽度最多可以容纳 15 个字符，那么在 15 个字符之后，我的文本框大小应该增加，以便我可以看到文本框的两行。我正在使用多行文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:42:07.790

这个有可能。如果您使用 SWT.WRAP，当您超过文本小部件的行宽时，您的文本将自动在新行中继续。然而，高度将保持不变。因此，您必须在文本修改事件中计算它。为文本小部件设置新高度后，您必须布局父级​​，以便计算文本小部件兄弟的新位置。

```
 final Text text = new Text(parent, SWT.MULTI | SWT.BORDER | SWT.WRAP);
    text.setLayoutData(new GridData(SWT.FILL, SWT.BEGINNING, true, false));

    Point textSize = text.computeSize(SWT.DEFAULT, SWT.DEFAULT);
    Rectangle textTrim = text.computeTrim(0, 0, textSize.x,
            text.getLineHeight());
    final int textPadding = textTrim.height - text.getLineHeight();

    text.addModifyListener(new ModifyListener() {

        @Override
        public void modifyText(ModifyEvent e) {
            int height = text.getLineCount() * text.getLineHeight()
                    + textPadding;
            text.setSize(text.getSize().x, height);
            // need to layout parent, in order to change position of
            // siblings
            parent.layout();
        }
    }); 
```

# vb.net - 由于 Activator.CreateInstance()，Windows 服务未检索数据

> ID：15760161
> 
> 赞同：2
> 
> 时间：2013-04-02T09:08:21.697
> 
> 标签：vb.net, windows-services

我的 Windows 服务应用程序有问题，我有一个场景，我需要使用 DLL（由客户端提供）获取文件路径。为了加快调试速度，我创建了一个控制台应用程序，其中以下代码运行良好

```
 AppDomain.CurrentDomain.SetPrincipalPolicy(System.Security.Principal.PrincipalPolicy.WindowsPrincipal)

_objAoApplication = Activator.CreateInstance(Type.GetTypeFromProgID("AOLib6.Application"))

_strAoLastCompany = _objAoApplication.GetLastCompanyFile 
```

但是，当我创建与窗口服务相同的内容时，`_strAoLastCompany`会得到一个不需要的空字符串。

谁能建议我如何开始

# javascript - 从对话框中删除/禁用滚动条 - Firefox

> ID：15760168
> 
> 赞同：0
> 
> 时间：2013-04-02T09:08:42.437
> 
> 标签：javascript, firefox, modal-dialog, showmodaldialog

我正在使用以下代码打开一个具有自定义宽度和高度的对话框。

```
window.showModalDialog(" & _"'" & dlgURL & "',window,'dialogWidth:" & width & "px;dialogHeight:" & height & "px;overflow:auto;scrollbars:no;center:yes');" 
```

我在这里面临的问题是，对话框中可以看到垂直和水平滚动条。即使我们向下滚动，也没有内容。谁能告诉我如何禁用 Firefox 浏览器的这些滚动条。我尝试了溢出：自动属性。但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:26:47.097

`overflow``showModalDialog`如果您查看规格，这似乎不是一个有效的属性： [https ://developer.mozilla.org/en-US/docs/DOM/window.showModalDialog](https://developer.mozilla.org/en-US/docs/DOM/window.showModalDialog)

尝试设置`scroll`为`0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:31:05.197

此示例似乎有效：我的 FF 上没有滚动条。

[http://jsfiddle.net/xA9Nm/1/](http://jsfiddle.net/xA9Nm/1/)

```
window.showModalDialog('http://www.december.com/html/demo/hello.html',window,'dialogWidth:600px;dialogHeight:500px;center:yes'); 
```

我建议检查是否由于某种原因页面内的内容大于对话框大小

# iphone - 在 iPhone 导航推送中获取父视图控制器的类名

> ID：15760175
> 
> 赞同：9
> 
> 时间：2013-04-02T09:08:54.890
> 
> 标签：iphone, ios, uinavigationcontroller, push

我正在推动这样的观点。

`[[self.navigationController pushViewController:myViewController animated:YES];`

如何从推送视图（子视图）中获取父视图控制器的类名？`Any Idea?`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T09:13:24.020

这应该这样做：

```
NSUInteger numberOfViewControllersOnStack = [self.navigationController.viewControllers count];
UIViewController *parentViewController = self.navigationController.viewControllers[numberOfViewControllersOnStack - 2];
Class parentVCClass = [parentViewController class];
NSString *className = NSStringFromClass(parentVCClass); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T09:13:14.160

获取父视图控制器的类：

```
id class = [self.navigationController.viewControllers[0] class]; 
```

及其名称：

```
NSString *className = NSStringFromClass(class); 
```

# ant - 为什么我不能在 ant (1.8.1) 的目标之外使用继承的引用？

> ID：15760176
> 
> 赞同：3
> 
> 时间：2013-04-02T09:08:55.393
> 
> 标签：ant, reference

我要做的就是在父 build.xml 上设置对路径的引用，并在子 build.xml 上使用它（用 调用`<ant>`）。这是我可以创建的最简单的示例：

**构建-parent.xml**

```
<?xml version="1.0"?>
<project name="parent" default="do-parent">
    <target name="do-parent">
        <path id="inherited.path"/>
        <ant antfile="build-child.xml" inheritrefs="false" inheritall="false">
            <reference refid="inherited.path"/>
        </ant>
    </target>
</project> 
```

**构建-child.xml**

```
<?xml version="1.0"?>
<project name="child" default="do-child">
    <pathconvert property="converted.path" refid="inherited.path"/>
    <target name="do-child"/>
</project> 
```

我运行`ant.bat -f build-parent.xml` 并得到：*未找到引用继承的路径。*

如果我将**build-child.xml**更改为：

```
<?xml version="1.0"?>
<project name="child" default="do-child">
    <target name="do-child">
        <pathconvert property="converted.path" refid="inherited.path"/>
    </target>
</project> 
```

它工作正常...

显然我可以通过多种方式解决这个问题，但我想以正确的方式做到这一点。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:48:01.040

以前遇到过这种行为：

[将参考从主构建文件传递给子](http://ant.1045680.n5.nabble.com/Passing-References-from-Master-Build-File-to-Child-td1343346.html#a1343347)

我找不到任何暗示这种行为是否是设计使然的东西。

# python - 与多处理池并行创建对象？

> ID：15760179
> 
> 赞同：1
> 
> 时间：2013-04-02T09:09:00.953
> 
> 标签：python, parallel-processing, multiprocessing, pickle

Python 2.7.3

我有一个包含数千个数据文件的文件夹。每个数据文件都被提供给构造函数并进行大量处理。现在我正在遍历文件并按顺序处理它们：

```
class Foo:
    def __init__(self,file):
        self.bar = do_lots_of_stuff_with_numpy_and_scipy(file)

def do_lots_of_stuff_with_numpy_and_scipy(file):
    pass

def get_foos(dir):
    return [Foo(os.path.join(dir,file)) for file in os.listdir(dir)] 
```

这很好用，但是太慢了。我想并行执行此操作。我试过：

```
def parallel_get_foos(dir):
    p = Pool()
    foos = p.map(Foo, [os.path.join(dir,file) for file in os.listdir(dir)])
    p.close()
    p.join()
    return foos

if __name__ == "__main__":
    foos = parallel_get_foos(sys.argv[1]) 
```

但它只是错误地出现了很多这些：

```
Process PoolWorker-7:
Traceback (most recent call last):
  File "/l/python2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/l/python2.7/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "/l/python2.7/lib/python2.7/multiprocessing/pool.py", line 99, in worker
    put((job, i, result))
  File "/l/python2.7/lib/python2.7/multiprocessing/queues.py", line 390, in put
    return send(obj)
PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed 
```

我尝试过创建一个函数来返回对象，例如：

```
def get_foo(file):
    return Foo(file)

def parallel_get_foos(dir):
    ...
    foos = p.map(get_foo, [os.path.join(dir,file) for file in os.listdir(dir)])
    ... 
```

但正如预期的那样，我得到了同样的错误。

我已经阅读了大量类似的线程，试图解决类似这样的问题，但没有一个解决方案对我有帮助。所以我很感激任何帮助！

编辑：

Bakuriu 正确地推测我在我的 do_lots_of_stuff 方法中定义了一个非顶级函数。特别是，我正在执行以下操作：

```
def fit_curve(data,degree):
    """Fits a least-square polynomial function to the given data."""
    sorted = data[data[:,0].argsort()].T
    coefficients = numpy.polyfit(sorted[0],sorted[1],degree)
    def eval(val,deg=degree):
        res = 0
        for coefficient in coefficients:
            res += coefficient*val**deg
            deg -= 1
        return res
    return eval 
```

反正有没有让这个功能可以腌制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:40:29.993

您在做什么（至少，您在示例中显示的内容）实际上工作正常：

```
$mkdir TestPool
$cd TestPool/
$for i in {1..100}
> do
>     touch "test$i"
> done
$ls
test1    test18  test27  test36  test45  test54  test63  test72  test81  test90
test10   test19  test28  test37  test46  test55  test64  test73  test82  test91
test100  test2   test29  test38  test47  test56  test65  test74  test83  test92
test11   test20  test3   test39  test48  test57  test66  test75  test84  test93
test12   test21  test30  test4   test49  test58  test67  test76  test85  test94
test13   test22  test31  test40  test5   test59  test68  test77  test86  test95
test14   test23  test32  test41  test50  test6   test69  test78  test87  test96
test15   test24  test33  test42  test51  test60  test7   test79  test88  test97
test16   test25  test34  test43  test52  test61  test70  test8   test89  test98
test17   test26  test35  test44  test53  test62  test71  test80  test9   test99
$vi test_pool_dir.py
$cat test_pool_dir.py 
import os
import multiprocessing

class Foo(object):
    def __init__(self, fname):
        self.fname = fname   #or your calculations

def parallel_get_foos(directory):
    p = multiprocessing.Pool()
    foos = p.map(Foo, [os.path.join(directory, fname) for fname in os.listdir(directory)])
    p.close()
    p.join()
    return foos

if __name__ == '__main__':
    foos = parallel_get_foos('.')
    print len(foos)   #expected 101: 100 files plus this script

$python test_pool_dir.py 
101 
```

版本信息：

```
$python --version
Python 2.7.3
$uname -a
Linux giacomo-Acer 3.2.0-39-generic #62-Ubuntu SMP Thu Feb 28 00:28:53 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

我的猜测是，您并*没有*完全按照您在显示的代码示例中显示的那样做。例如，我在执行此操作时收到与您类似的错误：

```
>>> import pickle
>>> def test():
...     def test2(): pass
...     return test2
... 
>>> import multiprocessing
>>> p = multiprocessing.Pool()
>>> p.map(test(), [1,2,3])
Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/usr/lib/python2.7/multiprocessing/pool.py", line 319, in _handle_tasks
    put(task)
PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed 
```

这很明显，因为：

```
>>> pickle.dumps(test())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/pickle.py", line 1374, in dumps
    Pickler(file, protocol).dump(obj)
  File "/usr/lib/python2.7/pickle.py", line 224, in dump
    self.save(obj)
  File "/usr/lib/python2.7/pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "/usr/lib/python2.7/pickle.py", line 748, in save_global
    (obj, module, name))
pickle.PicklingError: Can't pickle <function test2 at 0x7fad15fc2938>: it's not found as __main__.test2 
```

And[`pickle`](http://docs.python.org/2/library/pickle.html#what-can-be-pickled-and-unpickled)的文档指出：

> 可以腌制以下类型：
> 
> *   `None`, `True`, 和`False`
> *   整数、长整数、浮点数、复数
> *   普通和 Unicode 字符串
> *   `tuple`s、`list`s、`set`s 和仅包含可腌制对象的字典
> *   **在模块顶层定义的**函数
> ***   **在模块顶层定义的**内置函数***   **在模块顶层定义的**类***   此类类的实例，其`__dict__`或调用的结果`__getstate__()`是可腌制的（有关详细信息，请参见腌制协议部分）。******

 ******并继续：

> 请注意，函数（内置的和用户定义的）是通过“完全限定”名称引用而不是值来腌制的。这意味着只有函数名和定义函数的模块的名称被腌制。函数的代码和它的任何函数属性都没有被腌制。因此，定义模块必须在 unpickling 环境中是可导入的，并且模块必须包含命名对象，否则将引发异常。******

# knockout.js - Durandal：无法解析绑定

> ID：15760183
> 
> 赞同：1
> 
> 时间：2013-04-02T09:09:16.300
> 
> 标签：knockout.js, durandal

问这个问题感觉很愚蠢，我一直在关注 John Papas SPA 教程并且遇到了视图绑定问题。在应用程序的结构方面，我尝试采用与他相同的方法。

我的回购/数据服务：

```
define(function (require) {
var http = require('durandal/http');
var model = require("viewmodels/model");

var getShifts = function (observableShifts) {

    observableShifts([]);

    return http.get("api/shift/").then(querySucceeded);

    function querySucceeded(data) {
        var shifts = [];
        data.forEach(function (item) {
            var s = new model.shift(item);
            shifts.push(s);
        });
        observableShifts(shifts);
    };
};

var shiftRepository = {
    getShifts : getShifts
};

return shiftRepository;

}); 
```

我的模型：

```
define(function () {

var shift = function (dto) {
    this.start = ko.observable(dto.Start);
    this.end = ko.observable(dto.End);
    this.employeeId = ko.observable(dto.EmployeeId);
    this.shiftId = ko.observable(dto.WorkingShiftId);
    this.userName = ko.observable(dto.UserName);
    return this;
};

var model = {
    shift: shift
};
return model;  
}); 
```

我的视图模型：

```
define(function (require) {

var shiftRepository = require("repositories/shiftRepository");

var shifts = ko.observableArray();

var vm = {
    activate : activate,
    shifts: shifts,
    title: 'My shifts'
};
return vm;

function activate() {
    return shiftRepository.getShifts(shifts);
}

}); 
```

我的观点：

```
<div>
<h3 data-bind="text: title"></h3>
<span data-bind="text: shifts().length"></span><span> found</span>
<table border="1">
    <thead>
        <tr><td>Shifts</td></tr>
    </thead>
    <tbody data-bind="foreach: shifts"></tbody>
    <tr>
        <td data-bind="text: userName"></td>
    </tr>
</table>
</div> 
```

我可以看到返回了两个项目，我还可以看到预期的属性。这是来自 Chrome 控制台的转储：

> [“无法解析绑定。↵消息：ReferenceError：...我未定义；↵绑定值：文本：用户名”，“视图/班次”，对象] 0：“无法解析绑定。↵消息：ReferenceError：用户名是未定义；↵绑定值：文本：userName” 1：“views/shifts”2：对象 **moduleId**：“viewmodels/shifts”激活：function activate() { shifts: Object[0] **ko_proto** : function (initialValue) { _latestValue: Array[2] 0: shift employeeId: function observable() { end: function observable() { shiftId: function observable() { start: function observable() { userName: function observable() { **proto** : Object 1: shift length: 2 **原型**：数组[0]

我究竟做错了什么？我试图改变将 dto 对象的属性映射到类似于 Papas 方法的可观察对象的方式，但结果相同。

任何帮助，将不胜感激。

更新：在我看来这样做是有效的！：

```
<section data-bind="foreach: shifts">
    <article>
        <span data-bind="text: userName"></span>
    </article>
</section> 
```

所以很明显我对表格结构不太聪明，谁能向我解释我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:26:53.143

您的绑定是正确的，只是您的 HTML 搞砸了。

您已经**关闭了`tbody`之前的`tr`**. 所以 KO 将重复空`tbody`并尝试绑定`userName`主视图模型而不是`shifts`项目。

所以你只需要修复你的 HTML，它应该可以正常工作：

```
<table border="1">
    <thead>
        <tr><td>Shifts</td></tr>
    </thead>
    <tbody data-bind="foreach: shifts">
        <tr>
            <td data-bind="text: userName"></td>
        </tr>
    </tbody>
</table> 
```

# linux - 从文件列表中选择文件

> ID：15760185
> 
> 赞同：3
> 
> 时间：2013-04-02T09:09:21.827
> 
> 标签：linux, bash

我有一个文件名列表，如下所示：

```
tRapTrain.Isgf3g.2853.2.v1.primary.RC.txt       tRapTrain.Yox1.txt
tRapTrain.Isgf3g.2853.2.v1.primary.txt          tRapTrain.Ypr015c.txt
tRapTrain.Isgf3g.2853.2.v1.secondary.RC.txt     tRapTrain.Yrm1.txt
tRapTrain.Isgf3g.2853.2.v1.secondary.txt        tRapTrain.Zbtb12.2932.2.v1.primary.RC.txt 
```

现在我需要选择带有 primary.txt 的文件以及所有没有找到最终后缀的文件。最终后缀 == primary.RC.txt，secondary.RC.txt，secondary.txt。

所以我想要的输出将是：

```
tRapTrain.Isgf3g.2853.2.v1.primary.txt
tRapTrain.Yox1.txt
tRapTrain.Ypr015c.txt
tRapTrain.Yrm1.txt 
```

我试图做到这一点，`ls tRap*primary.txt`但无法弄清楚如何同时进行这两个选择。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:23:33.537

您可以使用*查找*：

```
find * -type f -not -name "*.secondary.RC.txt" -not -name "*.primary.RC.txt" -not -name "*.secondary.txt" -print 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:15:11.920

我会使用反向 grep 匹配：

```
ls tRap* | grep -v "\.RC\." | grep -v "\.secondary\." 
```

这应该摆脱“.RC”的任何内容。或“.secondary”。在标题中，这听起来像你想要的。

这可能不是最优雅的，但它确实有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:22:49.990

使用商店：

```
$ shopt -s extglob
$ ls !(*primary.RC.txt|*secondary.RC.txt|*secondary.txt) 
```

意义：

```
!(pattern-list)
Matches anything except one of the given patterns. 
```

# .net - .NET 中的字符串格式

> ID：15760186
> 
> 赞同：1
> 
> 时间：2013-04-02T09:09:21.957
> 
> 标签：.net, string-formatting

我对 .NET 中的字符串格式有一点问题

```
?String.Format("{00} {1}", 1, "min")
"1 min" 
```

我需要输出“01 分钟”但“20 分钟”，如果不是 1 我有 20。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T09:11:33.513

问题是您使用“00”就好像它是格式说明符，但它实际上只是格式项的*索引*部分。你要：

```
String.Format("{0:00} {1}", 1, "min") 
```

所以`{0:00}`第一部分 ( `0`) 是索引，第二部分 ( `00`) 是格式字符串。有关详细信息，请参阅[有关复合格式的 MSDN 页面](http://msdn.microsoft.com/en-gb/library/txafckwd.aspx)。

或者你可以使用：

```
String.Format("{0:d2} {1}", 1, "min") 
```

Where`d2`是以2 作为精度说明符的[标准数字格式字符串。](http://msdn.microsoft.com/en-gb/library/dwhawy9k.aspx)

# php - 在非对象上调用成员函数 resize()

> ID：15760187
> 
> 赞同：0
> 
> 时间：2013-04-02T09:09:25.863
> 
> 标签：php

我使用脚本上传图像。

在我想创建缩略图的脚本中。

首先我制作一个副本，在复制之后我想调整副本的大小。

我有

```
$originalfile =//the file i just uploaded

$kopiefile = //the copy destination /same filename as original but with an extra dir added.

if (!copy($originalfile, $kopiefile)) {
    echo "failed to copy $originalfile...\n";
} else {
    $kopiefile = "http://mydomain.com/media/img/thumbs/".$file_name;
    echo $kopiefile;
    $kopiefile -> resize(300, 0, false);
} 
```

复制文件有效，我可以看到新创建的文件。

echo $kopiefile 给了我一个直接指向图像的链接，如果我复制链接，它就可以工作。

但现在我到了

```
$kopiefile -> resize(300, 0, false); 
```

部分，我得到了错误

致命错误：在 .... 第 176 行中对非对象调用成员函数 resize()

第 176 行在哪里

```
$kopiefile -> resize(300, 0, false); 
```

我的代码有什么问题？

我也尝试使用：

$kopiefile = "/home/censored/domains/censored/public_html/ve/media/img/thumbs/".$file_name;

但它不工作。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:14:17.393

`$kopiefile`只是一个字符串，而不是一个对象，因此不能有像`$someobject->resize()`.

您必须将图片加载到具有某种调整大小方法的对象中。您现在正在做的是将文件的 url 放入字符串变量中。

试试[http://php.net/manual/en/function.imagecopyresized.php](http://php.net/manual/en/function.imagecopyresized.php)

或者这个： http: [//www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/) 滚动到底部的 SimpleImage 类代码。像这样使用它：

```
<?php
   include('SimpleImage.php');
   $image = new SimpleImage();
   $image->load('picture.jpg');
   $image->resizeToWidth(250);
   $image->save('picture2.jpg');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:20:43.677

看起来你正在使用`simpleimage`php 库。您必须先加载图像`$image = SimpleImage('path.jpg');`然后`$image->resize()`才能工作。先下载简单的图片再试试

在这里下载：[simpleimage](https://gist.github.com/miguelxt/908143)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:14:16.180

$kopiefile 不是**对象**，也没有方法**resize**。

尝试使用[https://code.google.com/p/ag-php-classes/wiki/ImagesHelper](https://code.google.com/p/ag-php-classes/wiki/ImagesHelper)类 =)

# sql - 如何从多键表更新 T-SQL 中的多个列

> ID：15760188
> 
> 赞同：1
> 
> 时间：2013-04-02T09:09:26.233
> 
> 标签：sql, sql-server, tsql, join, sql-update

我在从另一个表值更新表时遇到问题。

假设我有：

表A（键A，键B，字段A，字段B）

表 B（键 A、键 B、字段 A、字段 B、字段 C）

我想更新 TableA 中将表 B 中的值与 TableB 值进行比较的行。

我试过这样：

```
UPDATE TableA
SET FieldA = 
(
SELECT FieldA
FROM TableA W INNER JOIN TableB as V
    ON  W.keyA = V.keyA AND
        W.keyB = V.keyB
WHERE W.KeyA = V.KeyA AND
        W.keyB = V.KeyB AND 
) 
FROM TableA PK INNER JOIN TableB  AS I ON
TableA.keyA = TableB.keyA AND TableA.keyB = TableB.keyB 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:11:33.897

您的查询非常复杂。你可以进一步简单地进入这个，

```
UPDATE  a
SET     a.fieldA = b.fieldA,
        a.fieldB = b.fieldB
FROM    TableA a
        INNER JOIN TableB b
            ON  a.keyA = b.keyA AND
                a.keyB = b.keyB 
```

# entity-framework - 编码表字段的第一个映射部分

> ID：15760198
> 
> 赞同：1
> 
> 时间：2013-04-02T09:09:59.177
> 
> 标签：entity-framework, ef-code-first

我先用代码，已经存在数据库表t_News，包含字段Id、NewsTitle、Content、AutoKeywords、Author。但是我不想实体包含字段 Author 所以定义这个实体类：

```
[Table ("t_News")]
public class News
{
    public int Id {get; set;}
    public string NewsTitle {get; set;}
    public string Content {get; set;}
    public string AutoKeywords {get; set;}
} 
```

运行时错误：未处理的异常：System.InvalidOperationException：支持“PartContext”上下文的模型自数据库创建以来已更改。考虑使用 Code First 迁移来更新数据库 ( [http://go.microsoft.com/fwlink/?LinkId=2](http://go.microsoft.com/fwlink/?LinkId=2) 38269)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:57:54.883

由于存在 __MigrationHistory 表，因此您并不真正处于“现有数据库上的代码优先”的情况，因为数据库在某种程度上是由 EF 创建的。

所以你可以删除 __MigrationHistory。这将为您带来“现有数据库上的代码优先”的情况。但是你必须考虑你会因为掉落而失去什么。这至少是 EF 的迁移功能。所以你要问你：为什么这个数据库是由 EF 创建的？__MigrationHistory 只影响我吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:14:02.593

您应该首先创建迁移。像这样的东西：

```
Add-Migration "YouMigrationName" -ConnectionString "Data Source=.; Integrated Security=True; Pooling=False; MultipleActiveResultSets=true;" -ConnectionProviderName System.Data.SqlClient 
```

比你必须更新你的数据库。这里还有一些例子：

```
Update-Database -ConnectionString "Data Source=.; Integrated Security=True; Pooling=False; MultipleActiveResultSets=true;" -ConnectionProviderName System.Data.SqlClient 
```

# java - IE 的 GWT 性能问题

> ID：15760200
> 
> 赞同：0
> 
> 时间：2013-04-02T09:10:00.957
> 
> 标签：java, gwt

我有 GWT 应用程序，它在 IE8/9（任何版本）中性能很差，这意味着显示记录需要很长时间。但在 Firefox 中，它会快速显示结果。

我使用 fiddler 并检查应用程序端是否有任何问题，但 fiddler 显示它在 8 秒内收到了响应。问题出在 IE 中，即使那些 post 请求在 fiddler 中显示完成，浏览器也不会显示结果，但它显示 please wait message for so long like 4 minutes 然后显示结果。另一方面，Firefox 在 8 秒内收到响应后显示记录。

这是一种网格表，只有很少的记录，如 60 条，并在 GWT 中使用面板。

有人遇到这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:21:40.757

8 秒的服务器响应似乎非常高，可能您得到了巨大的响应。

对于数据量等渲染，在IE中gwt表格和面板不太方便，所以可以考虑使用gwt [CellTables](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellTable)，它提供了高性能的渲染。认为您也应该考虑使用[AsyncDataProvider对数据进行分页](http://www.mytechtip.com/2010/11/gwt-celltable-example-using_8168.html)

# javascript - Javascript 对象列表返回 null 或未定义但不是

> ID：15760202
> 
> 赞同：2
> 
> 时间：2013-04-02T09:10:05.267
> 
> 标签：javascript, undefined, innerhtml, nodelist, console.log

我有以下，

HTML,

```
<div id="testDiv" name="testHolder">
    Test Content
</div> 
```

JS,

```
var testVar = document.getElementsByName('testHolder');
console.log(testVar); 
```

我得到，

```
[object NodeList] 
[item: function] 
```

好的，让我再解释一下，

```
var testVar = document.getElementById('testDiv');
console.log(testVar); 
```

返回，

空值

因此，如果向其添加索引 [0]，则无法读取 null 的属性 [0] ...为什么？

我想在 div 中获取字符串“测试内容”。

更新，

在使用 getElementsByName 时从 console.log 中看到此对象属性，

```
innerHTML: "↵               Test Content↵             "
innerText: "Test Content" 
```

为什么不能隔离这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:13:59.917

`document.getElementsByTagName`返回与作为参数提供给函数的标记相对应的元素数组。代码输出`undefined`到控制台，因为`testDiv`它不是 HTML 标记。使用`getElementsByTagName`脚本时，根据标签的名称（认为类型）获取元素，因此名称如 div、span、ul、li、input 等。

例如，`document.getElementByTagName("div")`将返回`div`页面上的所有元素。它不**检查**标签上的 name 属性并返回相应的元素。

以下是一些示例来演示这些方法的正确用法，它们依赖于您提供的 HTML：

```
//Retrieves Element By ID
var element = document.getElementById("testDiv");
alert("By Id: " + element.innerHTML);

//Retrieves By Tag
var element2 = document.getElementsByTagName("div");
//Remember this is an array we must specify an index
alert("By Tag Name: " + element2[0].innerHTML);

var doesntWork = document.getElementsByTagName("testHolder");
alert("By Tag Name: " + doesntWork[0].innerHTML);//Won't work 
```

**演示：http:** [//jsfiddle.net/TEJKB/](http://jsfiddle.net/TEJKB/)

确保在 DOM 加载后执行此脚本。对于一个简单的测试，将此脚本放在页面底部。如果可行，那么您需要向事件添加事件处理程序`window.onload`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:17:03.333

您应该使用函数**getElementsByName**来获得正确答案。

**getElementsByName**和**getElementsByTagName**都返回一个*nodelist*，因此您需要进一步检查结果并获取例如第一项：

```
var testVar = document.getElementsByName('testHolder');
if( testVar.length > 0 )
    alert( testVar[0].innerHTML ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:17:17.650

getElement(s) 总是返回数组对象。你添加索引号`getElementsByTagName('testHolder')[0]`。例如

```
var testVar = document.getElementsByTagName('testHolder')[0].innerHTML;
console.log(testVar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:34:26.183

```
var testVar = document.getElementById('testDiv');
console.log(testVar.innerHTML); 
```

或者

```
var testVar = document.getElementById('testDiv').innerHTML;
console.log(testVar); 
```

应该管用...

# jquery - 在 MVC 中使用 JSON 访问强类型列表

> ID：15760207
> 
> 赞同：0
> 
> 时间：2013-04-02T09:10:26.523
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-4

嗨，我正在开发一个页面，在该页面中，在选择下拉列表时调用 Json 方法。

以下是我的下拉列表事件：

```
function onChange(e) {

        alert(e.value);
        var id = e.value;
        //alert(e.val);
        $.post("/SysAdmin/UsersRole/Get",
            {
                Id: id
            },
                function (data, status) {
                    alert(data);
                });
    } 
```

我正在调用 UsersRole 控制器的 Get 方法，该方法将返回树元素列表。

控制器代码

```
public List<Tree> Get(int Id)
        {
            RolesToUserViewModel viewModel = UsersRole.GetRoleByUser(Id);
            return viewModel.Tree;
        } 
```

我在 viewModel 对象中获取数据，但无法在 JS 函数中访问该数据。如何在 JQuery 中访问强类型对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:16:13.127

在这种情况下，您只能使用 JSON 对象来访问它。

将返回的 Object 转换为 JSONResult 并将 Action 方法的类型更改为 JSONResult。

# java - 如何停止子类的序列化？

> ID：15760213
> 
> 赞同：5
> 
> 时间：2013-04-02T09:10:45.213
> 
> 标签：java, serialization

`Serializable`如果超类正在实现接口，如何停止子类的序列化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T09:13:18.867

您可以使用[writeObject()](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/output.html#861)方法来实现这一点。

您可以使用`writeObject`自定义对象的序列化行为，如果您不想允许序列化`Class`您覆盖此方法并引发错误。

```
private void writeObject(java.io.ObjectOutputStream stream)
        throws IOException {
    throw new IOException('No serialization not allowed')
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T09:14:54.880

实现`readObject`无条件`writeObject`抛出`IOException`. 丑陋但有效。

不幸的是，你不能阻止子类实现它自己的`readObject`方法`writeObject`来恢复“可序列化”......除非你将子类声明为`final`.

当然，这是有问题的 OO 设计（它违反了[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)），但如果你真的需要这样做......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T09:11:39.930

使所有属性瞬态:)

# html - 强制浏览器以 IE 10 兼容性视图模式呈现页面

> ID：15760214
> 
> 赞同：1
> 
> 时间：2013-04-02T09:10:50.227
> 
> 标签：html, asp-classic, cross-browser, internet-explorer-10

我有一个主页，其中包含指向其他应用程序的链接。一些在 asp 中，一些在 asp.net 中。我想强制浏览器以 IE 10 兼容视图模式呈现页面，以便所有其他页面也以相同的方式呈现。这不应该使用开发人员工具手动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:43:51.467

您可以尝试添加一个 HTTP 标头来告诉 IE 使用可用的最新兼容模式（如果使用 IE 8，将是 IE 8 兼容模式，如果是 IE10，将使用 IE 10 兼容模式）：

```
Response.AddHeader "X-UA-Compatible", "IE=edge" 
```

# php - 谁能帮我一个文件共享脚本？我如何让它流式传输视频？

> ID：15760215
> 
> 赞同：0
> 
> 时间：2013-04-02T09:10:51.917
> 
> 标签：php, video-streaming, file-sharing

也许您听说过 sockshare.com 和 putlocker.com 之类的网站，我想要一个具有文件共享功能和视频共享功能的网站，但我就是无法让它具有视频功能，例如，如果用户上传一个视频，那么它必须是流式传输的，而不是作为要下载的文件。

请帮帮我，我不知道该怎么做。我不认为有人知道这样做的脚本已经如此...... :(

这是一些来源：

**主页.php：**

```
<?php
/*
    QMC (Quick Mini Core) by Alessandro Ubriaco
    http://core.seedfuse.com/
*/
define('CORE',1);
include_once 'inc/mcore.php';
$Core->Layout->begin();

$init = isset($_GET['init']) ? htmlspecialchars($_GET['init']) : 'home';

if(isset($_GET['exec']))
{
    $cname = 'com/'.basename($_GET['exec']).'.php';
    if(file_exists($cname))
        $Core->R = include($cname);
}

if(isset($_GET['req_name']))
{
    header('Cache-Control: no-cache, must-revalidate'); 
    $params = explode('_',$_GET['req_q']);
    $pname = 'pages/'.basename($params[0]).'.php';

    ob_start();
    if(file_exists($pname))
        include $pname;
    else
        echo 'Failed to load page.';
    $content = ob_get_contents();
    ob_end_clean();
    echo $Core->Lang->all($content);
    $Core->end();
}

echo <<<HTML
<div id="panel-dyn"></div>
<script type="text/javascript">
<!-- 
```

**索引.php：**

```
<?php
if(!defined('CORE'))
    exit(0);

if(isset($_SESSION['mc_admin']))
{
    include 'admin_home.php';
    return;
}

$js = <<<JS

        var swfu;

            var settings = {
                flash_url : 'flash/swfupload.swf',
                upload_url: '?exec=upload',
                post_params: {
                    '_sid' : '{$Core->SID}'
                    },
                file_size_limit : '10 MB',
                file_types : '*.*',
                file_types_description : 'All Files',
                file_upload_limit : 100,
                file_queue_limit : 0,
                custom_settings : {
                    progressTarget : 'fsUploadProgress',
                    cancelButtonId : 'btnCancel'
                },
                debug: false,

                button_image_url : 'images/buttons/upload-blue.png',
                button_placeholder_id : 'spanButtonPlaceholder',
                button_width: 140,
                button_height: 40,

                swfupload_loaded_handler : swfUploadLoaded,
                file_queued_handler : fileQueued,
                file_queue_error_handler : fileQueueError,
                file_dialog_complete_handler : fileDialogComplete,
                upload_start_handler : uploadStart,
                upload_progress_handler : uploadProgress,
                upload_error_handler : uploadError,
                upload_success_handler : uploadSuccess,
                upload_complete_handler : uploadComplete,
                queue_complete_handler : queueComplete,

                minimum_flash_version : '9.0.28',
                swfupload_pre_load_handler : swfUploadPreLoad,
                swfupload_load_failed_handler : swfUploadLoadFailed
            };

            swfu = new SWFUpload(settings);
this.style.display = 'none';
JS;

jspack($js);

echo <<<HTML

<form id="uploader" action="#" method="post" enctype="multipart/form-data">
    <fieldset>
        <legend>Uploader</legend>
        <div id="divSWFUploadUI">
            <div class="fieldset  flash" id="fsUploadProgress">
            <span class="legend">Upload Queue</span>
            </div>
            <p id="divStatus">0 Files Uploaded</p>
            <p>
                <span id="spanButtonPlaceholder"></span>
                <input id="btnCancel" type="button" value="Cancel All Uploads" disabled="disabled" style="display: none; margin-left: 2px; height: 22px; font-size: 8pt;" />
                <br />
            </p>
        </div>
        <noscript>
            <div style="background-color: #FFFF66; border-top: solid 4px #FF9966; border-bottom: solid 4px #FF9966; margin: 10px 25px; padding: 10px 15px;">
                We're sorry.  Upload could not load.  You must have JavaScript enabled to enjoy Upload.
            </div>
        </noscript>
        <div id="divLoadingContent" class="content" style="background-color: #FFFF66; border-top: solid 4px #FF9966; border-bottom: solid 4px #FF9966; margin: 10px 25px; padding: 10px 15px; display: none;">
            Upload is loading. Please wait a moment...
        </div>
        <div id="divLongLoading" class="content" style="background-color: #FFFF66; border-top: solid 4px #FF9966; border-bottom: solid 4px #FF9966; margin: 10px 25px; padding: 10px 15px; display: none;">
            Upload is taking a long time to load or the load has failed.  Please make sure that the Flash Plugin is enabled and that a working version of the Adobe Flash Player is installed.
        </div>
        <div id="divAlternateContent" class="content" style="background-color: #FFFF66; border-top: solid 4px #FF9966; border-bottom: solid 4px #FF9966; margin: 10px 25px; padding: 10px 15px; display: none;">
            We're sorry.  Upload could not load.  You may need to install or upgrade Flash Player.
            Visit the <a href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash">Adobe website</a> to get the Flash Player.
        </div>
    </fieldset>
    <p>This is a <b>DEMO</b>, database is wiped every 15 minutes except for users.</p>
    <div id="completed"></div>
</form>
<img src="images/loading.gif" border="0" alt="" onload="javascript:{$js}" />
HTML;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:15:06.277

你不能用 php 流式传输视频，你需要使用类似[jPlayer的东西](http://www.jplayer.org/)

我忘记了 putlocker 的用途，但它与 jPlayer 的想法相同。

# javascript - 从 javascript 访问本机 c 函数

> ID：15760216
> 
> 赞同：2
> 
> 时间：2013-04-02T09:10:53.793
> 
> 标签：javascript, c, webkit, java-native-interface

我有一个将在嵌入式平台上运行的 javascript 应用程序。它必须调用一些已经在平台中实现的 c API。这是一个专有应用程序，只能在选定的设备上运行。
我在 webkit 上运行这个应用程序。没有可用的 JVM。
我正在考虑一些选择，并得到了一些。我想知道它们中的任何一个是否适用或更好的选择。我是 javascript 新手，所以我的想法可能不正确。

1.  类似于 JNI 的东西（如果存在的话）

2.  为 webkit 开发一个插件，它向应用程序公开一些 Javascript API，然后调用本机 c 函数

3.  修改 webkit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:18:43.293

您的第二个建议非常接近您需要做的事情。当你编译浏览器时（你不需要自己编译webkit）你可以注册函数和对象。

如果您使用的是 Qt，您可能应该从[这里](http://qt-project.org/doc/qt-4.8/qtwebkit-bridge.html)开始。

如果你使用 GTK，注册是不同的，[这里](http://rvr.typepad.com/wind/2011/10/webkit-extending-javascript-1.html)有一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:27:55.373

您可能想要探索的一种方法是脚本警报处理程序。我知道 webkit gtk 支持它[http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-script-alert](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-script-alert)

您可以在 webview 上设置简单的 javascript 警报并在另一侧解析参数，然后调用所需的函数。当然，如果你有复杂的参数（例如对象）不能很容易地转换成字符串，这种方法将很难实现。

唯一的问题是我不知道您的平台是否支持此功能，因为您没有提及平台，我无法检查。

# c++ - 以结构向量作为返回值的 C++ 函数

> ID：15760217
> 
> 赞同：0
> 
> 时间：2013-04-02T09:10:57.783
> 
> 标签：c++, vector

我想在 C++ (VS2010) 中创建一个私有函数。它应该返回结构体/用户定义类型的向量/数组。

但是我认为我在 cpp 文件中对函数的声明可能是错误的。或者可能已经在标题中。有人可以看看吗？

我的标题如下所示：

```
#pragma once
using namespace std;
#include <algorithm>
#include <vector>
class clsWString2
{
private:
struct udtWChar2
{
    wstring Text;
    int OrigPos;
};
bool m_bDirty;
vector<udtWChar2>pToWChar2(wstring u);

vector<udtWChar2>m;
public:
clsWString2(void);
~clsWString2(void);
void ReplaceCompareBinary(wstring uSearchFor, wstring uReplaceBy);
void ReplaceCompareText(wstring uSearchFor,wstring uReplaceBy);
void ReplaceByPos(int uStartPos1Based,int uLen0Based, wstring uReplaceBy);
void FeedString(wstring u);
void Append(wstring u);
wstring CharAtPos(int uIndex);
int OrigPos(int uIndex);
}; 
```

我的 .cpp 文件如下所示：

```
#include "StdAfx.h"
#include "clsWString2.h"

clsWString2::clsWString2(void)
{
m.resize(0);
}
clsWString2::~clsWString2(void)
{
}
vector<udtWChar2> clsWString2::pToWChar2(wstring u)
{
vector<udtWChar2> n;
n.resize(0);

for (int i=0;i<u.size();i++)
{

    wstring sChar;
    sChar=u.substr(i,1);

    udtWChar2 nc;
    nc.Text =sChar;
    nc.OrigPos=i;

    n.push_back (nc);
}

return n;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T09:20:48.950

在源文件中，定义函数时，返回类型不在类的范围内，因此vector中的类需要全限定：

```
vector<clsWString2::udtWChar2> clsWString2::pToWChar2(wstring u)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:20:07.097

啊，我明白了：

```
vector<clsWString2::udtWChar2> clsWString2::pToWChar2(wstring u) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:38:00.783

你不能直接使用 udtWChar2 作为类型，你需要定义类型 def 或者你需要使用 struct udtWChar2

像 ：

在.h

```
vector  < struct udtWChar2 > pToWChar2(wstring u);
vector  < struct udtWChar2 > m; 
```

在.cpp

```
vector < struct clsWString2::udtWChar2 > clsWString2::pToWChar2(wstring u) 
```

# vector - VHDL 位聚合

> ID：15760219
> 
> 赞同：0
> 
> 时间：2013-04-02T09:10:58.510
> 
> 标签：vector, vhdl, bit

我有一个 VHDL 设计问题。我有 N 个类似的实体，它们接受一些输入，每个实体都生成一个 STD_LOGIC 输出。

例子：

```
entity example1 is
begin
    ...
    result_1 : out std_logic;
end example1;

entity example2 is
begin
    ...
    result_2 : out std_logic;
end example2;

... 
```

我正在寻找一种方法将所有这些单比特结果聚合到一个 UNSIGNED(N - 1 downto 0) 结果信号 V 中，使得 V(i) = result_i 成立。

目前，我的方法如下所示：

```
entity ResultAggregation is
   port (
      result_1 : in std_logic;
      result_2 : in std_logic;
      aggregate_results : out unsigned(1 downto 0)
   );
end ResultAggregation;

architecture Behavioral of ResultAggregation is
begin
   aggregate_results <= result_2 & result_1;
end Behavioral; 
```

我觉得这种方法相当笨拙。我正在寻找的是一个更自动化的解决方案，例如，我可以提供数字 N 以便生成适当的引脚。

我知道这是一个相当笼统的问题，但如果有人知道一个聪明的解决方案，请告诉我。

在此先感谢，
斯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:27:49.573

我的建议是省略`ResultAggregation`实体，只定义与您的,等实体`aggregate_results`相同级别的信号。然后，您可以将这些实体实例化为`example1``example2`

```
i_example1 : entity work.example1
port map (
    ...
    result_1 => aggregate_results(0));

i_example2 : entity work.example2
port map (
    ...
    result_2 => aggregate_results(1)); 
```

您可以在实例化等实体`aggregate_results`的级别上将向量的宽度设为通用。`example1`

您可以获得通用数量的引脚的唯一方法是将您的`ResultsAggregation`实体定义为

```
entity ResultAggregation is
   generic (
       N_RESULTS : integer
   );
   port (
      results : in std_logic_vector(N_RESULTS-1 downto 0);
      aggregate_results : out std_logic_vector(N_RESULTS-1 downto 0)
   );
end ResultAggregation; 
```

但是，该实体将仅包含`aggregate_results <= results`使该实体毫无意义的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:01:48.327

如果块相同，则使用 for/generate 语句：

```
n_examples: for i in 0 to (N-1) generate
   inst_example: example_entity
      port map(
          ...
          result => V(i);
      );
end generate n_examples; 
```

如果块具有相似的实体但不同的功能，您仍然可以使用这种方法：

```
...  
inst_ex1: example1 
port map(
    ...,
    result_1 => V(1)
);

inst_ex2: example2 
port map(
    ...,
    result_2 => V(2)
);
.... 
```

# c# - mvc 在部分中从包中排除 css

> ID：15760221
> 
> 赞同：0
> 
> 时间：2013-04-02T09:11:00.417
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, bundle

抱歉，我在 mvc 中完全是菜鸟，我需要从我的视图中排除主要的 StyleBundle 之一：

`bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css"));`

这是从我的一个视图页面中呈现在 _Layout.cshtml 中的。查看页面是一个照片库。它有自己的 css，与核心*site.css*冲突。我已经尝试插入：

`@{BundleTable.Bundles.IgnoreList.Ignore("~/Content/css");}`或者`@{BundleTable.Bundles.IgnoreList.Ignore("site.css");}`

到我的照片库页面，但在第一种情况下我什么都没有，在第二种情况下，mvc 完全忽略了我的照片库css之外的**所有捆绑包。**

*除了使用不同的 _ Layout.cshtml*之外，还有什么简单的方法来处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:26:24.957

> 除了使用不同的_Layout.cshtml，还有什么简单的方法可以处理吗？

不，一旦你包含了一个包，它就会在标记中呈现。

您当然不想修改，`IgnoreList`因为这是一个全局属性，更改它会影响应用程序中的所有其他页面。

# android - ViewPager - 最后一个项目？安卓

> ID：15760227
> 
> 赞同：0
> 
> 时间：2013-04-02T09:11:30.013
> 
> 标签：android, android-viewpager

我的应用程序中有 20 张图像。当用户在应用程序中向左/向右滑动时，我使用 ViewPager 显示上一个/下一个图像？当用户在最后一张图片中向右滑动时，我想显示“重复”屏幕。

这是我的代码，

```
viewPager = (ViewPager) findViewById(R.id.main_viewpager);

ImagePagerAdapter adapter = new ImagePagerAdapter();
viewPager.setAdapter(adapter);

PageListener pageListener = new PageListener();
viewPager.setOnPageChangeListener((OnPageChangeListener) pageListener);

int currentPage;
private class PageListener extends SimpleOnPageChangeListener{ 

        public void onPageSelected(int position) {
                --- some code -----
                currentPage = position;
        }
}

private class ImagePagerAdapter extends PagerAdapter {

     @Override
     public int getCount() {
          return mImages.size();
     }

     -- other implemented methods ---
} 
```

当用户滑动到viewpager中最后一个元素的右侧时，是否可以捕获事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T16:40:27.770

您可以像开始一样在 ViewPager 上设置自定义 onChangePageListener 来实现这一点。我会这样做：

```
viewPager.setOnPageChangeListener(new OnPageChangeListener() {
 //...
 @Override
public void onPageSelected(int arg0) {
  onPageChanged(arg0);
}
 //...
}); 
```

然后在你的活动中

```
public void onPageChanged(int position) {
 if(position == SOMETHING) //do something
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T06:56:11.670

从此[链接](https://stackoverflow.com/a/16992751/2810231)：您可以扩展`ViewPager`类，然后覆盖`onTouchEvent()`方法：
这里举个例子：

```
public class MxTViewPager extends ViewPager {
public MxTViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
}

float mStartDragX;
OnSwipeOutListener mListener;

public void setOnSwipeOutListener(OnSwipeOutListener listener) {
    mListener = listener;
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    if (getCurrentItem() == getAdapter().getCount() - 1) {
        final int action = ev.getAction();
        float x = ev.getX();
        switch (action & MotionEventCompat.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            mStartDragX = x;
            break;
        case MotionEvent.ACTION_UP:
            if (x < mStartDragX) {
                mListener.onSwipeOutAtEnd();
            } else {
                mStartDragX = 0;
            }
            break;
        }
    } else {
        mStartDragX = 0;
    }
    return super.onTouchEvent(ev);
}

public interface OnSwipeOutListener {
    public void onSwipeOutAtEnd();
} 
```

} 希望它可以帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-07T17:12:31.990

您可以做的是获取 viewpager 的一个实例并调用：

```
PagerAdapter pg = viewPager.getAdapter();
int i = pg.getCount(); 
```

这将返回 viewPager 中的页数现在您可以做的是：应用条件来检查当前页面的总数...请注意，第一页是 [0] 第二页是 [1]，第三页是 [2] ...当前页面的计数由...返回

```
viewPager.getCurrentItem() 
```

希望这能解决您的问题！

# spring - Maven 3 模块

> ID：15760229
> 
> 赞同：0
> 
> 时间：2013-04-02T09:11:32.823
> 
> 标签：spring, maven, multi-module

我即将开始一个项目。我们将使用`Spring MVC`、`RestEasy`和`Spring Batch`。`Spring Security`

为每一个都有一个模块是否有意义，例如：

```
Main_Project
   ---pom.xml
   ---Module_Project
         ---pom.xml
   ---Module_MVC
         ---pom.xml
   ---Module_Rest
         ---pom.xml
   ---Module_Batch
         ---pom.xml
   ---Module_Security
         ---pom.xml 
```

不确定最佳做法是什么？或者，我应该使用一个模块吗？

谢谢，阿迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:42:20.263

乍一看没有任何意义。

既然你已经知道你需要什么技术，我想你已经对如何组织自己的代码有了一个想法。这是您自己的代码组织，必须驱动您的模块（而不是您正在使用的框架）。

一种可行的通用方法（至少它可以作为为传统的基于 Web 的应用程序制定架构的起点）：

*   一个带有您的模型的模块（即数据库层、dao、持久 bean...） - 包装 jar
*   一个带有控制器的模块（即访问数据库层、事务管理、业务逻辑......） - 包装 jar
*   一个带有您的视图文件（如果有）（jsp，...）的模块（前层） - 打包大战
*   一个带有您的 Web 服务定义（如果有）的模块（前层） - 打包大战

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:51:29.597

不要按框架对模块进行排序。（框架是您在需要它们的模块中添加的依赖项，可能像这样：

```
<project>
    <groupId>com.ourproject</groupId>
    <artifactId>myfeature</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    ...
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>
    </dependencies>
</project> 
```

如何组织您的项目有许多不同的方法。

我目前使用的方法是按照功能组织软件。然后通过良好的旧 java 包“细分”每个功能。通过这种方式，我将属于特定功能的业务逻辑、数据访问对象和特定资源打包到一个模块中。

好处是您不必费力寻找属于该功能的所有内容，允许您根据需要引入或删除功能。

缺点是您必须将所有功能模块（横切关注点甚至公共父类）使用的对象打包到单独的模块中，并将它们作为另一个依赖项添加到每个模块中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:45:55.137

忽略框架。拆分您的模块，直到您可以对每个模块的以下 2 个问题回答“否”：

**“我是否将视图/控制器逻辑与业务逻辑混合在一起？”**

**“我在混合功能吗？”**

请记住在父 pom.xml 中声明框架，以便模块可以共享完全相同的依赖项。

# php - PHP xml在childNode中保留标签

> ID：15760234
> 
> 赞同：1
> 
> 时间：2013-04-02T09:11:44.090
> 
> 标签：php, xml

我将此字符串提取到数据库中：

`$str = "<ol><li><span style=&quot;color:rgb(255,153,0);&quot;><b style=&quot;color:rgb(255,153,0);&quot;>Maximum</b></span> authority</li><li>Innovative response</li><li>Freedom<br></li></ol>";`

我想将字符串拆分为一个数组，将里面的值`<li>`作为值并提出如下内容：

```
[0] => <span style=&quot;color:rgb(255,153,0);&quot;><b style=&quot;color:rgb(255,153,0);&quot;>Maximum</b></span> authority
[1] => Innovative response
[2] => Freedom<br> 
```

但是，我只提出了这个解决方案：

```
$xml = new DOMDocument();
$xml->loadHTML($str);
foreach($xml->getElementsByTagName('li') as $li)
  $final_list[] = $li->nodeValue;

// Results
[0] => Maximum authority
[1] => Innovative response
[2] => Freedom 
```

它去除了里面的 HTML 标签，`<li>`这不是我的预期结果。有什么想法可以改进吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:19:40.170

请参考[http://www.php.net/manual/en/domdocument.savexml.php](http://www.php.net/manual/en/domdocument.savexml.php)你需要使用 saveXML 来保留 HTML

```
$final_list[] = htmlentities($xml->saveXML($li), ENT_QUOTES, 'UTF-8') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:25:00.290

检查此解决方案：

```
$xml = new DOMDocument();
$xml->loadHTML($str);
$final_list = array();
foreach($xml->getElementsByTagName('li') as $li) {
    $tmp_dom = new DOMDocument();
    $tmp_dom->appendChild($tmp_dom->importNode($li, true));
    $h = trim($tmp_dom->saveHTML());
    $final_list[] = substr($h, strpos($h,'>')+1, -(strlen($li->nodeName)+3));
} 
```

# java - 来自外部 Java 程序的 JBoss AS 6 上的 Java JNDI 查找失败

> ID：15760235
> 
> 赞同：1
> 
> 时间：2013-04-02T09:11:44.570
> 
> 标签：java, jboss, jndi, jboss6.x

我正在从 JBoss AS 4.0.4.GA 升级到 JBoss 6.0.0.Final。我一直无法从外部 Java 客户端查找 HornetQ 主题，所以我决定编写一个小的测试 Java 程序来简单地查找数据源。该查找失败。我可以在 Web 控制台中看到 DataSource，它具有：

```
Pool JNDI Name = MyDS 
```

我曾经（使用 JBoss 4.0.4.GA）使用“java:/MyDS”查找数据源，但这不起作用。我看到一些关于无法从 AS 外部查找对象（队列、主题、数据源、EJB 等）的讨论。如果是这种情况，我会感到惊讶，但如果是这样，那么我该如何禁用该“功能”？

DS 在 server/myconf/deploy/mysql-ds.xml 中：

```
<?xml version="1.0" encoding="UTF-8"?>
<datasources>
    <local-tx-datasource>
        <jndi-name>MyDS</jndi-name>
        <connection-url>jdbc:mysql://localhost:3306/mydb</connection-url>
        <driver-class>com.mysql.jdbc.Driver</driver-class>
        <user-name>xxxxxxxx</user-name>
        <password>xxxxxxxx</password>
        <prepared-statement-cache-size>50</prepared-statement-cache-size>
        <min-pool-size>20</min-pool-size>
        <max-pool-size>40</max-pool-size>
        <metadata>
            <type-mapping>mySQL</type-mapping>
        </metadata>
    </local-tx-datasource>
</datasources> 
```

查找 DS 的 Java 程序是：

```
env.put(javax.naming.Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
env.put(javax.naming.Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");
env.put(javax.naming.Context.PROVIDER_URL, "jnp://localhost:1099");

InitialContext ctx = new InitialContext(env);
Object o = ctx.lookup("java:/MyDS"); 
```

查找行抛出 NameNotFoundException：

```
javax.naming.NameNotFoundException: MyDS not bound 
```

我已经尝试使用“MyDS”而不是“java:/MyDS”进行查找，但它仍然失败。我认为问题不在于我用于查找的名称，而是阻止我从外部应用程序进行任何查找的东西——如果是这种情况，我需要启用此类查找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:27:34.670

更新数据源定义，如：

```
<use-java-context>false</use-java-context> 
```

例如

```
<?xml version="1.0" encoding="UTF-8"?>
<datasources>
<local-tx-datasource>
    <jndi-name>MyDS</jndi-name>
    <use-java-context>false</use-java-context>
    <connection-url>jdbc:mysql://localhost:3306/mydb</connection-url>
    <driver-class>com.mysql.jdbc.Driver</driver-class>
    <user-name>xxxxxxxx</user-name>
    <password>xxxxxxxx</password>
    <prepared-statement-cache-size>50</prepared-statement-cache-size>
    <min-pool-size>20</min-pool-size>
    <max-pool-size>40</max-pool-size>
    <metadata>
        <type-mapping>mySQL</type-mapping>
    </metadata>
</local-tx-datasource>
</datasources> 
```

# c# - c# geocoding 它只读取 json 字符串中的第一个数组

> ID：15760246
> 
> 赞同：1
> 
> 时间：2013-04-02T09:12:17.830
> 
> 标签：c#, asp.net, sql

我目前正在编写一种方法来对我的邮政编码进行地理编码并将它们存储在我的 sql 数据库中以下是我的代码示例：

问题：“json”字符串中有两个数组。但是，当我尝试进行地理编码时，它只对第一个数组中的邮政编码进行地理编码，而不是第二个。我应该如何对第二个数组中的邮政编码进行地理编码。

```
protected void getGeoCode()
        {
            string json = DAO.getLatLongNull();
            JObject jobject = JObject.Parse(json);
            JArray array = (JArray)jobject["e"];

            string postalCode = string.Empty;
            string glat = string.Empty;
            string glong = string.Empty;
            string gPostal = string.Empty;

            string sqlQuery = string.Empty;
            string connectionString = DAO.GetConnectionString();
            SqlConnection sqlConn = new SqlConnection(connectionString);
            sqlConn.Open();

            foreach (var item in array)
            {
                postalCode = item["postalCode"].ToString();
                string url = "https://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=Singapore%20";
                dynamic googleResults = new Uri(url + postalCode).GetDynamicJsonObject();

                foreach (var result in googleResults.results)
                {
                    glat += result.geometry.location.lat;
                    glong += result.geometry.location.lng;
                    gPostal += item["postalCode"].ToString();

                    sqlQuery = "update testlatlong set lat =@lat,long =@long where postalCode =@postal";
                    SqlCommand command = new SqlCommand(sqlQuery, sqlConn);
                    command.Parameters.Add("@lat", SqlDbType.NVarChar).Value = glat;
                    command.Parameters.Add("@long", SqlDbType.NVarChar).Value = glong;
                    command.Parameters.Add("@postal", SqlDbType.NVarChar).Value = gPostal;
                    command.ExecuteNonQuery();

                }

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:14:30.183

我设法解决了这个问题：

```
protected void getGeoCoding()
        {
            string postalCode = string.Empty;
            string glat = string.Empty;
            string glong = string.Empty;
            string gPostal = string.Empty;
            string sqlUpdateQuery = string.Empty;
            string sqlGetQuery = string.Empty;

            string json = DAO.getNullLatLong();
            JObject jobject = JObject.Parse(json);
            JArray items = (JArray)jobject["e"];

            JObject item;
            JToken jtoken;

            string connectionString = DAO.GetConnectionString();
            SqlConnection sqlConn = new SqlConnection(connectionString);
            sqlConn.Open();

             for (int i = 0; i < items.Count; i++) //loop through rows
             {
                 item = (JObject)items[i];
                 jtoken = item.First;

              while (jtoken != null)//loop through columns
              {

                postalCode = item["postalCode"].ToString();
                string url = "https://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=Singapore%20";
                dynamic googleResults = new Uri(url + postalCode).GetDynamicJsonObject();

                foreach (var result in googleResults.results)
                {
                    glat += result.geometry.location.lat;
                    glong += result.geometry.location.lng;
                    gPostal += postalCode;

                    sqlUpdateQuery = "update latlongDB set lat =@lat,long =@long where postalCode =@postal";
                    SqlCommand updateCommand = new SqlCommand(sqlUpdateQuery, sqlConn);
                    updateCommand.Parameters.Add("@lat", SqlDbType.NVarChar).Value = glat;
                    updateCommand.Parameters.Add("@long", SqlDbType.NVarChar).Value = glong;
                    updateCommand.Parameters.Add("@postal", SqlDbType.NVarChar).Value = gPostal;
                    updateCommand.ExecuteNonQuery();
                }

            }

              jtoken = jtoken.Next;    
            }

        } 
```

# java - 如何从字符串值创建日期对象

> ID：15760248
> 
> 赞同：3
> 
> 时间：2013-04-02T09:12:21.780
> 
> 标签：java, date-format, simpledateformat, date-formatting

运行以下代码时，我得到一个`UNPARSABLE DATE EXCEPTION`.

我该如何解决？

```
 package dateWork;

    import java.text.DateFormat;
    import java.text.ParseException;
    import java.text.SimpleDateFormat;
    import java.util.Date;

    public class DateCreation {

        /**
         * @param args
         */
        public static void main(String[] args) {

            String startDateString = "2013-03-26";
            DateFormat df = new SimpleDateFormat("yyyy/MM/dd"); 
            Date startDate=null;
            String newDateString = null;
            try 
            {
                startDate = df.parse(startDateString);
                newDateString = df.format(startDate);
                System.out.println(startDate);
            } catch (ParseException e) 
            {
                e.printStackTrace();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T09:14:01.190

您对月份使用了错误的日期格式，您也应该使用与日期相同的分隔符。

如果你的日期字符串是格式`"2013/01/03"`

`/`对模式使用相同的分隔符`"yyyy/MM/dd"`

如果您的日期字符串是格式`"2013-01-03"`

在您的模式中使用相同的分隔符“-”`"yyyy-MM-dd"`

```
 DateFormat df = new SimpleDateFormat("yyyy/mm/dd"); 
```

应该

```
 DateFormat df = new SimpleDateFormat("yyyy/MM/dd"); 
```

来自[**SimpleDateFormat 文档**](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

MM--->一年中的一个月

mm---> 分钟

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:14:04.227

```
String startDateString = "2013-03-26";
DateFormat df = new SimpleDateFormat("yyyy/MM/dd"); 
```

您使用的模式与您正在解析的模式不同。

要么初始化 this as`DateFormat df = new SimpleDateFormat("yyyy-MM-dd");` 要么 this as`String startDateString = "2013/03/26";`

[也看看这篇文章](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:16:04.167

`MM`代替`mm`

`-`而不是`/` ie`yyyy-MM-dd`就像您`-`在日期字符串中使用的那样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:35:33.667

在 SimpleDateFormat("yyyy-mm-dd") 的构造函数中传递相同的格式字符串

因为您的字符串日期是“2013-03-26”

如果您的日期是“2013/03/26”，请使用

SimpleDateFormat("yyyy/mm/dd")

# excel - 格式化jasper报告列

> ID：15760251
> 
> 赞同：2
> 
> 时间：2013-04-02T09:12:27.483
> 
> 标签：excel, spring-mvc, csv, jasper-reports

我正在使用`spring MVC`框架开发 Web 应用程序，在我的应用程序中，我曾用于`jasper report`将一些结果下载到`csv`. 但是我在下载包含数字字段的报告时遇到问题`credit card number`。即使信用卡号字段在我的应用程序中是字符串类型，它在下载时会自动转换为整数字段，`csv`并且由于卡号是，`length 16-digits`它将始终转换为`exponential form`. 我怎么解决这个问题？。我尝试了各种方法，但它没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:33:08.220

那是因为无论您做什么，除非您在 Excel 中手动指定格式，否则 Excel 会将数字序列本身作为数字中断。谷歌中有各种解决方案，例如`'`在数字序列阻止 Excel 将其中断为整数之前添加（单引号）。但更好可能对您有用的解决方案是，在您的应用程序中，在将 cerdit 卡号保存到数据库之前，您可以将该字符串划分为类似这样的格式`5455-4121-4124-9221`。下面是可以帮助你的代码，

```
String cerditcardNum="";
String[] cerditcardnum = new String[10];
cerditcardnum[0]=cerditcardnumber.substring(0,4);
cerditcardnum[1]=cerditcardnumber.substring(4,8);
cerditcardnum[2]=cerditcardnumber.substring(8,12);
cerditcardnum[3]=cerditcardnumber.substring(12,cerditcardnumber.length());
cerditcardNum=cerditcardnum[0]+"-"+cerditcardnum[1]+"-"+cerditcardnum[2]+"-"+cerditcardnum[3]; 
```

# wpf - 覆盖控制 AvalonDock 的 2 个可停靠面板

> ID：15760252
> 
> 赞同：0
> 
> 时间：2013-04-02T09:12:28.880
> 
> 标签：wpf, vb.net, avalondock

我正在使用包含图块菜单的 WPF 创建一个界面。UI 有一个位于菜单栏下方的图像。当菜单栏被隐藏时，图像会展开并取而代之，因为我正在使用 Avalon Dock。我有一个设计，当鼠标悬停在菜单图块上时，菜单图块的高度会扩大。但是由于可停靠面板的高度没有扩展，扩展的图块会被隐藏。有没有办法将瓷砖面板覆盖在图像面板上，以便瓷砖完全可见？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T11:14:07.917

我在互联网上搜索了很多，也搜索了文档。最后发现，2个面板是独立的组件，所以其中的内容不能叠加。例如。两个窗口不能共享一个按钮，因为它们的视觉树不同。

所以，我的问题的答案是组件不能被覆盖。

# javascript - 有没有办法防止在 jQuery 对象化 HTML 片段中加载图像

> ID：15760256
> 
> 赞同：6
> 
> 时间：2013-04-02T09:13:01.573
> 
> 标签：javascript, jquery, dom

我有一个 HTML 片段，我通过 jQuery 对其进行对象化，以便从中提取一些数据。这个片段有一些我不希望浏览器下载的图片资源。有没有办法做到这一点。

我当前代码的简化版本：

```
var html = '<p class="data">Blah Blah</p>...<img src="/a/b/...png">...<div>...</div>';

var obj = $(html); // this makes the browser download the contained images as well!!!

var myData = {
    item_1: obj.find('.data:first').text(),
    item_2: obj.find('.data2:first').text(),
    .... // and so on..
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:15:45.173

除非您认为字符串`src=`中的子字符串实例对您很重要，否则您可以这样做：

```
html = html.replace(/src=/g, "data-src="); 
```

或者可能

```
html = html.replace(/src\s*=/g, "data-src="); 
```

...允许空格。这样，浏览器将看不到该`src`属性，也不会触发下载。

有时直接的方法是最好的。当然，如果您认为可能存在`src=`与您尝试提取的内容有关的子字符串，那么...

# c# - 想要通过消息框停止用户输入但被 Enter 按键绕过

> ID：15760257
> 
> 赞同：0
> 
> 时间：2013-04-02T09:13:03.077
> 
> 标签：c#, winforms, barcode-scanner, motorola-emdk

我正在编写一个在条形码扫描仪上运行的 Windows 窗体应用程序。
工厂形式为 .Net2.0CF/C#。

我想要的是每当用户输入错误时，应用程序将弹出一个消息框并阻止下一个输入（实际上是扫描操作），直到用户单击屏幕上的确定。

但通常用户会继续扫描下一个内容，因为他们没有发现任何问题，这将插入一个**Enter 按键**，因此消息框将被关闭，一句话，消息框不会阻止用户。

我该如何编码？下面是一个非常简单的代码片段

```
private void tb_KeyDown(object sender, KeyEventArgs e)
{
  if (e.KeyCode.ToString() == "Return")
  {
    if(!ValidateInput(tb.Text))
    MessageBox.Show("Error");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:51:54.537

您可以创建自己的窗口（表单）来显示错误消息，但不会对回车键做出反应。

它应该包含一个用户可以单击的按钮（如您所写），但是您需要确保在显示窗口时该按钮没有焦点。（因为如果它有焦点，按返回键将“单击”按钮。）

一种简单的方法是添加另一个控件，该控件的 TabStop 设置为 true（例如，文本框、另一个按钮）并且其 TabIndex 属性低于按钮。

此外，也许你可能想做一个

```
System.Media.SystemSounds.Beep.Play(); 
```

在显示窗口时将用户的注意力吸引到窗口上。

# c# - 我可以在 C# 中创建过渡效果吗？

> ID：15760258
> 
> 赞同：0
> 
> 时间：2013-04-02T09:13:06.480
> 
> 标签：c#, winforms, label, effects

我有一个表格和几个标签。我正在使用上述表格创建屏幕保护程序。到目前为止，我已经能够让文本标签以不同的间隔出现。

然而，我想更进一步。我想让文本从顶部或底部向右或向左滚动。我可以直接用 C# 做到这一点吗？如何？

我会很感激一个有用的答案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:46:53.013

还没有见过类似的东西...但是如果您知道什么是 Expression Blend，您可以制作自己的元素样式（颜色、形式、大小、动画）。你可以尝试在那里实现它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:26:14.233

创建一个间隔较短的计时器，然后使用：

```
//Move right:
label1.Location = new Point(label1.Location.X + 1, label1.Location.Y);
//Move left:
label1.Location = new Point(label1.Location.X - 1, label1.Location.Y); 
```

也许是这样的：

```
private void timer1_Tick(object sender, EventArgs e)
{
    if (label1.Location.X <= Width)
        label1.Location = new Point(label1.Location.X + 1, label1.Location.Y);
    else
        label1.Location = new Point(0, label1.Location.Y);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:26:46.480

你想让你的文字在表格上“飞”吗？如果是，为什么不改变标签位置？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-19T15:50:09.210

您和其他任何想做类似事情的人都可以简单地使用以下框架：

> **WinForm 动画库 [.Net3.5+]**
> 
> 一个简单的库，用于在 .Net WinForm（.Net 3.5 及更高版本）中为控件/值设置动画。基于关键帧（路径）且完全可定制。

[https://falahati.github.io/WinFormAnimation/](https://falahati.github.io/WinFormAnimation/)

```
new Animator2D(
        new Path2D(new Float2D(-100, -100), lbl_label.Location.ToFloat2D(), 500))
    .Play(lbl_label, Animator2D.KnownProperties.Location); 
```

这会将标签从 -100、-100 滑动`lbl_label`到它在 500 毫秒内位于首位的位置。

# javascript - Emberjs：为其他路线加载数据

> ID：15760261
> 
> 赞同：1
> 
> 时间：2013-04-02T09:13:14.183
> 
> 标签：javascript, ember.js

**更新到 emberjs-rc.2 时自行解决。见答案。**

在我的应用程序中，我有 2 页具有向导功能。在第一页上，用户将提供一些数据，在下一页上，用户将在基于第一页上的数据构建的列表中选择一个项目。我要做的是在第一页上所需的数据有效时立即开始加载第二页的数据，即使用户仍在第一页上。这是因为构建列表服务器需要一些时间，我希望在转换到下一页时准备好数据。

两个页面/路由嵌套在同一个资源下。

我的路线：

```
App.YayRoute = Ember.Route.extend({

  events: {
    dataValid: function() {
      this.controllerFor('yaySecond').send('loadStuff');
    }
  }
});

App.YaySecondRoute = Ember.Route.extend({
  events: {
    loadStuff: function() {
      this.controller.set('stuff', App.Stuff.find());
    }
  }
}); 
```

在 YayFirstController 中，我正在观察相关数据并在它出现时执行 this.send('dataValid') 。最上面的路线 YayRoute 选择了这个，并在第二条路线上触发 loadStuff。App.Stuff.find() 看起来像这样

```
find: function() {
    var result = Ember.A([]);
    $.getJSON(url, function(data) {
        // populate result
    });
    return result;
} 
```

一切都在按预期运行，但我的问题是从 loadStuff 调用时 YaySecondController 上的东西没有填充。如果我将**loadStuff 的 controller.set('stuff', App.Stuff.find())**内容添加到 YaySecondRoute 上的 setupController，数据将加载正常。但是随着数据尽快加载，我失去了冷静。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:13:08.693

所以，今天更新到 emberjs-rc.2 时，这个问题自行解决了。我还是 ember 的新手，所以我不知道发生了什么。无论如何，这是正确的方法吗？看起来有点麻烦。

# web-applications - 如果允许用户在保存期间修改内容，我如何捕获要保存的内容？

> ID：15760264
> 
> 赞同：1
> 
> 时间：2013-04-02T09:13:18.010
> 
> 标签：web-applications, save, autosave

我正在创建一个 TODO 列表 Web 应用程序，我有一个关于如何保存列表内容的问题。就像任何文字处理器一样，我希望允许用户在保存期间修改数据。

我可以使用布尔变量来指示用户更改了某些内容，即。更改某些内容时为 TRUE，否则为 FALSE。也许，这个标志也用于向用户显示某些数据未保存。当用户通过按 Ctrl+S 保存数据时，我的应用程序会调用一个函数，然后获取列表中的当前数据并开始将其保存到数据库中。最后，变量更改为假。这看起来很简单，但这种方法有一个明显的缺陷。例如。

1.  用户更改数据。布尔变量变为 TRUE。
2.  用户按下 Ctrl+S。
3.  调用一个函数，它检索当前数据并开始保存它。
4.  用户在保存期间更改更多数据。
5.  该函数完成保存并将变量设置为 FALSE。

即使第 4 步中存在一些未保存的数据，也很容易看到该标志被设置为 FALSE。文字处理器/文本编辑器如何处理这个问题？他们是否只是在保存过程中禁用输入，但它足够快以至于我看不到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:17:41.033

在浏览器中有一个`revision`字段。另外，有一个`saved_revision`领域。当文档保存开始时，您的代码会记住当前值`revision`，当保存完成时，它会上`saved_revision`升到该值。每次用户更改某些内容时，`revision`都会增加一。要检查是否所有更改都已保存，请检查`revision == saved_revision`. 像这样的东西：

```
var revision = 0
var saved_revision = 0

function handle_keypress() {
  revision++
  update_document_saved_display()
  /* ... */
}

function save() {
  var saving_rev = revision
  upload_version(serializeDocument(), function(status) {
    if (status === 'ok') {
      saved_revision = saving_rev
      update_document_saved_display()
    }
  })
} 
```

# c# - 如何在 c# 中创建使用对象名称的方法？

> ID：15760266
> 
> 赞同：1
> 
> 时间：2013-04-02T09:13:19.450
> 
> 标签：c#, object, methods

假设我有一个名为`Enabler`
的类，我像往常一样创建该类的实例（在半伪 C# 代码中）

```
bool cond;
Enabler enable = new Enabler(cond); 
```

当我调用 Enabler 的方法时出现问题`Enable`，这不是什么大问题，因为它非常冗长

```
enable.Enable(/*some code to enable*/); 
```

当我这样做时，真正的问题出现了：

```
Enabler disable = new Enabler(!cond); //reverse condition

disable.Enable(/*some code to disable*/); //this makes no sense semantically 
```

所以我正在寻找一种方法来做这样的事情：

```
Enabler enable = new Enabler(cond);
Enabler disable = new Enabler(!cond);

// then simply call the method by the object name like this:
enable(/*something to enable*/); //uses the object name as the method name
disable(/*something to disable*/); 
```

这使得负载在语义上比说更有意义`disable.Enable`

有没有办法做到这一点？

就像可以做 a 一样`this[]`，是否也可以做 a `this()`of sorts？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:17:03.587

afaik 不可能做这样的事情。但是，如果您可以使用“Enabler”类禁用和启用，那么“Enabler”可能不是正确的名称。

“Toggler”或更冗长的东西呢？

编辑：@Nahum 的回答也是一个很好的提示。要拥有可维护性良好的代码，您应该同时更改 imo。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:16:51.227

只需调用该方法`Activate`或`Execute`

并有两个实例

```
Enabler enable= new Enabler(cond);
Enabler disable = new Enabler(!cond);

enable.Activate()

disable.Activate() 
```

我也觉得 enabler 是一个糟糕的类名。

您的班级同时处理启用和禁用，从您的班级名称中不清楚它的作用。

您应该命名它`StatusChanger`或任何适合您的应用程序的名称。

另外，您为什么不只有两种方法，`enable`并且`disable`？

# ios - 如何在 Foursquare 或 Twitter 等同一页面中实现 MapView 和 TableView？

> ID：15760273
> 
> 赞同：1
> 
> 时间：2013-04-02T09:13:37.577
> 
> 标签：ios, uitableview, mkmapview

我正在创建一个 iphone 应用程序，该应用程序将有一个页面，上面有 MapView，下面是一个列表，用于显示与该地图相关的消息。它应该看起来像这个屏幕截图（我从 Foursquare 和 Twitter 应用程序复制并粘贴）。下面的文本应该像一条推文，用户可以单击该推文查看对该推文的回复。并且注释实际上只是一个引脚（与屏幕截图中的许多引脚不同）。

[http://img690.imageshack.us/img690/203/screenshottest.png](http://img690.imageshack.us/img690/203/screenshottest.png)

我现在正在做的是我使用了 TableView 并设置了 tableHeaderView = mapView. 然后我想我会做自定义表 tableViewCell 。第一个单元格是推文，下面的单元格将是回复。但我不确定我是否走在这样做的正确道路上。谁能建议该怎么做？或者显示与我的想法类似的示例代码。

TIA，香港

# c# - 在jquery中单击后绑定css样式？

> ID：15760276
> 
> 赞同：0
> 
> 时间：2013-04-02T09:13:38.803
> 
> 标签：c#, jquery, css

嗨，我有一个带有滚动条的面板。

对于这个滚动条，我有一个 css 类，我将它绑定到一个面板。

当我执行将数据加载到此面板中的单击事件时，它没有显示滚动条。

这是我的代码：

```
<div id='dvFlexScroll' class='flexcroll' style="overflow: scroll">
  <div style="height: auto;">
    <asp:Panel ID="pnlContainer" runat="server">
      <div id="acc" class="pnlAcc" runat="server"></div>
    </asp:Panel>
  </div>
</div> 
```

我只是想`flexcroll`在单击按钮后重新绑定这个类（这是通过 ASP.net 中的 JSON 调用完成的）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:18:02.763

点击后切换课程怎么样。说，比如：

```
$("#button").click(function() {
  $("#divid").toggleClass("newclass");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:16:36.897

我的朋友，这是给你的一个小提示；

在js中单击时编写以下代码：

```
$('div id to which u want to set new css').attr('class','new class name'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:17:06.773

```
$(document).ready(function(){
    $("#button-id").on('click',function(){
        $("#acc").addClass("flexcroll");
    });
}); 
```

# ios - 灵活的 iOS 安装失败

> ID：15760278
> 
> 赞同：0
> 
> 时间：2013-04-02T09:13:39.330
> 
> 标签：ios, apache-flex, air

我创建了一个弹性应用程序。现在我想在 iOS 上导出它。然后我从 developer.apple.com 下载了配置文件和证书并创建了 .ipa 文件但是当我在设备上安装应用程序时它给了我

安装失败

请帮助我被卡住了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:33:34.820

我没有从配置文件中选择任何证书。这解决了我的问题。

# java - 从按钮按下获取坐标不起作用

> ID：15760289
> 
> 赞同：0
> 
> 时间：2013-04-02T09:14:15.360
> 
> 标签：java, android, google-maps

我对 Android 开发很陌生，我尝试在我的 Android 应用程序中创建一个方法，您可以在其中按下按钮并获取坐标（经度和纬度）。但是当我按下按钮时，程序停止在模拟器上运行。

我可能只是在这里做错了什么。通过调用堆栈查看并没有帮助我。它实在是太杂乱了......很多无用的信息。

我该如何解决？

```
public void onLocateByGMapButtonClick() {
    LocationManager mloc = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    List<String> providers = mloc.getAllProviders();
    Location loc = new Location(providers.get(0));
    double loTude = loc.getLongitude();
    double laTude = loc.getLatitude();

    String newCoords = loTude + "," + laTude;
    location.setText(newCoords);
    Toast.makeText(this.getBaseContext(),"Location have been updated!",5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:19:45.707

您的应用程序崩溃的原因可能是因为您收到了`null pointer exception`.

您必须了解 GPS 修复不是一个即时过程，它可能需要时间，并且在这段时间内您没有工作的位置，除非您使用该`getLaskKnownLocation`方法（也可能返回 null）。

所以你需要做的是或使用：

```
Location loc = lm.getLastKnownLocation(provider); 
```

或者实现一个[LocationListener](http://developer.android.com/reference/android/location/LocationManager.html)，一旦有新的位置更新到达就会触发。

**教程：** [http ://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

# bash - 使用 PHP5 CLI 和 ISP 配置的 Cron 作业

> ID：15760294
> 
> 赞同：0
> 
> 时间：2013-04-02T09:14:26.187
> 
> 标签：bash, symfony, cron

我正在 Symfony2 下的一个项目和一个专用服务器上工作。此服务器有 ISP 配置面板。

我希望我的 cron 运行一个集成在 symfony2 中的 php-cli 命令行（php app/console config:renewalsession）。我在 PHP-Symfony 中的命令运行良好。如果我手动运行它，它会做我想要的。

但是我被 cron 作业所阻止。所以我做了一个 sh 脚本，他调用了这个命令。

```
#!/bin/bash
#!/usr/bin/php5
php /var/www/clients/client1/web1/private/app/console config:renewalsession 
```

我设置了 cron 作业，在两分钟内工作，我等待，没有任何反应。不知道从哪里来...

那么有人可以帮助我吗？

**编辑 ：**

我得到了一些更多的信息。我的 sh 脚本工作正常。问题来自我如何填充 cron 的输入。

我必须用“分钟”“小时”“月中的天”“月”“周中的天”和我的命令填写表格。我的命令很好。所以问题来自其余的输入。我希望 cron 每天在凌晨 1 点运行一次。

所以我这样填写表格：

*   分钟：0
*   小时：1
*   每月天数：*
*   月：*
*   星期几：*

这些参数有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:45:02.360

这将在每月的每一天凌晨 1 点运行您的脚本：0 1 * * * sh /path/to/script.sh

# c - 使用opencv进行人脸检测

> ID：15760296
> 
> 赞同：2
> 
> 时间：2013-04-02T09:14:30.683
> 
> 标签：c, opencv, image-processing, computer-vision, face-detection

我正在使用 haarcascade_frontalface_default 级联使用 Viola Jones 对象检测器进行人脸检测。任何人都可以建议任何其他方法/xml文件来增加同一相机的面部检测范围（到20英尺）（与可以检测到用户的相机的最大距离）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:11:20.730

`1.`你应该试试`haarcascade_frontalface_alt2.xml`。

`2.`根据您的应用需求，您可以尝试根据相应边界框的比例过滤检测结果，以降低系统的误报率。

# mysql - 异或约束

> ID：15760303
> 
> 赞同：0
> 
> 时间：2013-04-02T09:14:54.660
> 
> 标签：mysql

在准备我的关系模型期间，我陷入了类型约束 {XOR} 的转换。

这是一个示例：我有一个文件，该文件由申请人（用户）获得同等信用，并且还由验证者（另一个用户）验证，但存在排除约束，申请人可能不是同一文件夹的验证者。

我如何在我的餐桌上翻译它？

```
Dossier_Equi (num_dosier, # applicant # validator ......) 
```

![在此处输入图像描述](https://i.stack.imgur.com/DKxkc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:57:08.227

首先，注意它不是*类型约束*（即两个分类器之间的约束），而是*关联约束*。然后，请注意*[xor 约束指定类的对象一次最多可以参与其中一个关联](http://stuartgunter.wordpress.com/2011/04/03/opposing-views-on-the-uml-xor-constraint/)。*

约束：

> 申请人不得是验证人。

SQL 等价物是：

```
CHECK (validator IS NULL OR applicant<>validator) 
```

（作为表约束，因为它适用于不同的列）。

但是，MySQL 不支持 SQL 检查约束。在另一个问题中，建议为此目的[使用`BEFORE INSERT/UPDATE`触发器](https://stackoverflow.com/a/14248038/1297272)。

# java - 使用 Java itext 库对 PDF 进行签名会导致大文件崩溃

> ID：15760309
> 
> 赞同：2
> 
> 时间：2013-04-02T09:15:16.770
> 
> 标签：java, exception, itext, digital-signature

我正在使用 Itext 库进行 PDF 签名，它适用于 50MB 以下的小文件。但是较大的文件会崩溃，比如文件大小为 150MB，那么它会给出

```
Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space
at com.itextpdf.text.pdf.ByteBuffer.append(ByteBuffer.java:210)
at com.itextpdf.text.pdf.ByteBuffer.write(ByteBuffer.java:622)
at java.io.BufferedOutputStream.write(BufferedOutputStream.java:105)
at java.io.FilterOutputStream.write(FilterOutputStream.java:80)
at com.itextpdf.text.pdf.OutputStreamCounter.write(OutputStreamCounter.java:104)
at com.itextpdf.text.pdf.PRStream.toPdf(PRStream.java:230)
at com.itextpdf.text.pdf.PdfIndirectObject.writeTo(PdfIndirectObject.java:157)
at com.itextpdf.text.pdf.PdfWriter$PdfBody.write(PdfWriter.java:397)
at com.itextpdf.text.pdf.PdfWriter$PdfBody.add(PdfWriter.java:386)
at com.itextpdf.text.pdf.PdfWriter.addToBody(PdfWriter.java:848)
at com.itextpdf.text.pdf.PdfStamperImp.close(PdfStamperImp.java:353)
at com.itextpdf.text.pdf.PdfStamperImp.close(PdfStamperImp.java:327)
at com.itextpdf.text.pdf.PdfSignatureAppearance.preClose(PdfSignatureAppearance.java:1244)
at com.itextpdf.text.pdf.security.MakeSignature.signDetached(MakeSignature.java:134) 
```

这是我的签名代码，适用于小于 50 MB 的 pdf 文件

```
 private void PdfSigningProcess(String src, String dest,
        Certificate[] chain,
        PrivateKey pk, String digestAlgorithm, String provider,
        MakeSignature.CryptoStandard subfilter, String reason, String location)
        throws
        GeneralSecurityException, IOException, DocumentException
  {
    // Creating the reader and the stamper
    PdfReader reader =
            new PdfReader(src);
    FileOutputStream os =
            new FileOutputStream(dest);
    PdfStamper stamper = PdfStamper.
            createSignature(reader, os, '\0');
    //Creating the appearance PdfSignature Appearance
    PdfSignatureAppearance appearance = stamper.getSignatureAppearance();
    appearance.setReason(reason);
    appearance.setLocation(location);
    appearance.setVisibleSignature(new Rectangle(36, 7, 48, 144, 780), 1, "DQCA Signature");
    // Creating the signature 
    ExternalDigest digest = new BouncyCastleDigest();
    ExternalSignature signature =
            new PrivateKeySignature(pk, digestAlgorithm, provider);
    MakeSignature.signDetached(appearance, digest, signature, chain, null, null, null, 0, subfilter); //HERE IT IS CRASHING
} 
```

“MakeSignature.signDetached”这是出现异常的函数......请指导我如何解决这个问题，因为写入和附加过程在这个函数内部，我无法逐行更改和刷新数据......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:37:16.093

我看到您已经阅读了我[的白皮书](http://itextpdf.com/book/digitalsignatures)，但我也看到您选择在内存中签署文件。正如 Michaël 所指出的，如果您要求 iText 使用大量内存，则不应责怪 iText 使用大量内存；-)

请阅读标题为“签署大型 PDF 文件”的第 2.2.4 节。在该部分中，您将找到一个示例，展示如何使用临时文件进行签名。这将显着减少内存使用。

不要忽视注意事项：如果您使用`createSignature()`临时文件的方法，您可以使用 an `OutputStream`that is `null`，在这种情况下，临时文件将用作实际的目标文件。如果您的目标是在文件系统上存储签名文件，这是一种很好的做法。如果`OutputStream`不是`null`，iText 将始终在签名完成后尝试删除临时文件。

# orm - 从域服务中刷新 EntityManager 是否可以？

> ID：15760312
> 
> 赞同：1
> 
> 时间：2013-04-02T09:15:20.653
> 
> 标签：orm, domain-driven-design, entitymanager, domainservices

我有一个名为 的域服务`OrderService`，它有一个`saveOrder()`方法：

```
class OrderService
{
    // ...

    public function saveOrder(Order $order)
    {
        $this->orderRepository->add($order);
        // $this->entityManager->flush();

        $this->notificationService->notifyOrderPlaced($order);
    }
} 
```

`saveOrder()`将订单添加到存储库（内部调用`persist()`EntityManager），然后将订单传递给 NotificationService 以发送适当的通知（电子邮件、短信）。

问题是，虽然 NotificationService 需要将订单 ID 包含在通知中，但订单还没有 ID，因为它没有被持久化到数据库（ID 是自动生成的）。

显而易见的解决方案似乎是将 EntityManager 作为依赖项传递给 OrderService，并`flush()`在存储库`add()`方法之后，如上面的示例所示。但我一直不愿意让域服务知道 EntityManager，宁愿让它们只与存储库或其他服务对话。

*   依赖 EntityManager 的域服务有哪些缺点（如果有的话）？
*   有更好的选择吗？

*注意：我使用的是 PHP 和 Doctrine ORM，但我相信同样的原则也适用于 Java 和 Hibernate。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:26:23.367

您可能需要考虑这些选项之一（或两者）

*   使该服务成为应用层服务而不是域服务。在应用程序服务中调用更改跟踪器是完全可以的，因为它应该知道当前用例中的应用程序上下文和进度。典型的应用程序服务将提交业务事务/要求更改跟踪器在完成后保存更改，那么[为什么不调用它来生成 Id](http://domain-driven-design.3010926.n2.nabble.com/How-to-create-new-entity-without-identity-tt7578543.html#a7578618)呢？

    如果您担心在用例中间涉及数据库，也许您可​​以找到与 NHibernate 的[Guid.Comb 策略](http://thatextramile.be/blog/2009/05/using-the-guidcomb-identifier-strategy)等效的策略，以使您的 ORM 生成 Id 而无需立即向数据库发出 INSERT。

*   使用域事件。在创建后，Order 可以通知世界它已被更新。通知服务将处理该事件并发送适当的通知。您将在[此处](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)找到一个示例（它还包括一个应用程序层服务来处理业务事务）。

# java - 在我的 android 应用程序和 web 服务之间的通信过程中，如何管理连接丢失？

> ID：15760313
> 
> 赞同：0
> 
> 时间：2013-04-02T09:15:21.140
> 
> 标签：java, android, web-services

我正在研究与 web 服务通信以接收数据并将它们存储到数据库中的 android 项目。

在发送操作之前，我验证了连接状态（见下面的代码）

```
if (XXX.getInstance(Context).isOnline(Context)) 
{
//TODO Sending operation
} 
```

但是在此操作期间，如果设备处于脱机状态，尽管 HTTP 状态代码为 200 或 201，但我会丢失数据。

***我在手术前管理，但不是在手术期间。***

> 有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:33:30.333

使用广播接收器不断检查连接状态。

首先在您的`onCreate()`方法中注册接收器：

```
registerReceiver(mReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION)); 
```

然后写下当你想要的信号被发现时你想做的事情：

```
private BroadcastReceiver mReceiver = new BroadcastReceiver()
{
    public void onReceive(Context context, Intent intent)
    {
        cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        netInfo = cm.getActiveNetworkInfo();

        if (netInfo != null && netInfo.isConnected()) 
        {
        //You are still connected
        }
        else
        {
        //You have lost connection
        }
    }
}; 
```

`onDestroy()`离开活动后（在）方法中，请确保取消注册接收器：

```
if (mReceiver != null)
{
    unregisterReceiver(mReceiver);
} 
```

# authentication - 如何使用 Google Plus 登录让用户登录 Firebase

> ID：15760317
> 
> 赞同：3
> 
> 时间：2013-04-02T09:15:27.440
> 
> 标签：authentication, google-plus, firebase

我喜欢在 FireBase 中使用 Google Plus Sign 进行身份验证。

Google Plus 的 signinCallback 返回一个 auth 对象。如何使用此信息将我的用户安全地登录到 FireBase？

Auth 身份验证对象如下所示：

```
access_token: "ya29.2342324234"
authuser: "0"
client_id: "23ss4443234"
code: "4/tLijpRBvHp9hDNc-hcZk00bqvpz4.2342342"
cookie_policy: "single_host_origin"
expires_at: "136334897186"
expires_in: "3600"
g-oauth-window: Window
g_user_cookie_policy: "single_host_origin"
id_token: "324234234234.234234234.bW--234234---E2-Hj1I"
issued_at: "1364893586"
prompt: "consent"
scope: "https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email"
session_state: "234234234234234234..32cd"
state: ""
token_type: "Bearer" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:17:23.087

您可以使用自定义身份验证令牌将任何身份验证系统与 Firebase 集成。请参阅： [https ://www.firebase.com/docs/security/custom-login.html](https://www.firebase.com/docs/security/custom-login.html)

Firebase 有一个名为 Firebase 简单登录服务的服务，可以轻松处理一些常见的身份验证场景。但是，它不处理 Google Plus 身份验证。相反，您可以查看我们与 Singlely 的第三方集成： [https ://www.firebase.com/docs/security/authentication.html](https://www.firebase.com/docs/security/authentication.html)

# javascript - Raphael JS - 沿其路径动画半圆

> ID：15760320
> 
> 赞同：0
> 
> 时间：2013-04-02T09:15:34.930
> 
> 标签：javascript, animation, raphael

我有一个仪表/刻度盘类型级别要在我的应用程序中进行动画处理。当值发生变化时，指针和刻度盘将自动更新。对于小的变化，我必须编写的代码可以正常工作，但是当它有较大的变化时，动画不会沿着半圆的路径前进。

我的代码是这样的：（间隔仅用于测试目的）

```
var rad = Math.PI / 180;
var getCurvePath = function(cx, cy, r, startAngle, endAngle) {
    var x1 = cx + r * Math.cos(-startAngle * rad),
        x2 = cx + r * Math.cos(-endAngle * rad),
        y1 = cy + r * Math.sin(-startAngle * rad),
        y2 = cy + r * Math.sin(-endAngle * rad);

    return ["M", x1, y1, "A", r, r, 0, +(endAngle - startAngle > 180), 0, x2, y2];
};

var zeroAngle = 197, fullAngle = -15,baseAngle = 199,
    r = Raphael('level');

var level = r
    .path(getCurvePath(150, 150, 75, zeroAngle, baseAngle))
    .attr({
        'stroke': '#FF0000',
        'stroke-width': '11px'
    });

window.setInterval(function() {
    var ratio = Math.random();
    var newLevelAngle = (zeroAngle - fullAngle) * ratio;
    level.animate({
        'path': getCurvePath(150, 150, 75, newLevelAngle, baseAngle)
    }, 1000, 'bounce');
}, 2000); 
```

我在这里设置了一个 JS Fiddle，所以你可以看到这个：http: [//jsfiddle.net/Rfd3v/1/](http://jsfiddle.net/Rfd3v/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:27:17.647

这里接受的答案解决了我的问题： [在 raphael js 中绘制居中弧](https://stackoverflow.com/questions/5061318/drawing-centered-arcs-in-raphael-js)

我需要从@genkilabs 的答案中调整一些内容以适应液位/仪表应用程序。希望这可能对其他人有帮助：

```
var arcCentre = { x: 100, y: 100 },
    arcRadius = 50,
    arcMin = 1, // stops the arc disappearing for 0 values
    baseRotation = -100, // this starts the arc from a different point
    circleRatio = 220/360, // I found this helpful as my arc is never a full circle
    maxValue = 1000; // arbitrary        

// starts the arc at the minimum value
var myArc = r.path()
         .attr({
             "stroke": "#f00",
             "stroke-width": 14,
             arc: [arcCentre.x, arcCentre.y, arcMin, 100, arcRadius],
         })
         .transform('r'+ baseRotation + ',' + arcCentre.x + ',' + arcCentre.y);

// set a new value
var newValue = 234; // pick your new value

// convert value to ratio of the arc to complete
var ratio = newValue / maxValue;

// set level
var newLevelValue = Math.max(arcMin, ratio * 100 * circleRatio);
myArc.animate({
    arc: [arcCentre.x, arcCentre.y, newLevelValue, 100, arcRadius]
}, 750, 'bounce'); 
```

# php - 需要正则表达式的解释

> ID：15760321
> 
> 赞同：2
> 
> 时间：2013-04-02T09:15:41.823
> 
> 标签：php, regex

谁能解释一下这个正则表达式的含义？

```
$html = preg_replace("# <(?![/a-z]) | (?<=\s)>(?![a-z]) #exi", "htmlentities('$0')", $html); 
```

有人在[如何以比使用 strip_tags 函数更安全的方式去除标签？](https://stackoverflow.com/questions/4995962/how-to-strip-tags-in-a-safer-way-than-using-strip-tags-function)但我无法理解。

这是我在stackoverflow上的第一篇文章，所以如果我犯了任何错误，请原谅我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:22:42.383

```
#...#      the # and # are just characters to start en end a REGEX
           (you can use a lot of character for this)
#exi       the e, x and i flags. See the PHP.net site for information
           about it

<          the < character
(?!...)    a negative lookahead. The REGEX matches when the characters
           after this are NOT equal to one of those
[/a-z]     a character class, matches for the / character and the
           letters a - z
|          OR
(?<=\s)    a positive lookbehind. The REGEX maches when there is
           \s (whitepspace) before
>          the > character
(?![a-z])  negative lookahead for the letters a - z 
```

所以基本上，它匹配所有不用作标签的字符`<`。`>`例如，`<foo`and `</foo`will not match 并且`foo>`will not aswell。但是`1 < 3`会匹配。这将被传递给`htmlentities`函数并成为`1 &lt; 3`. 现在，您可以`strip_tags`只删除标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:23:54.423

在我看来，它只是试图根据 < 或 > 之后的以下字符是否是数字来确定什么不是 HTML 标记。

这意味着它将捕获`<`以下内容：

`<span>This is <5 ml.</span>`

并将其替换为与该字符等效的 HTML 实体，从而使您可以安全地使用`strip_tags`而不会破坏字符串的含义（如您引用的问题中所述）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:26:26.083

寻找`<`没有跟随的`a-z`

**或者**

`>`后面没有的空格`a-z`

然后它将它替换为`htmlentities('$0')`$0 是您的整个比赛！

`i`选项忽略大小写

`e`做正常替换

`x`忽略文字空白

# statistics - Team City 代码覆盖范围包括总共排除的代码

> ID：15760327
> 
> 赞同：0
> 
> 时间：2013-04-02T09:15:55.870
> 
> 标签：statistics, teamcity, metrics, dotcover

Team City 中的代码覆盖率存在这个问题（使用 dotCover）。在报表覆盖范围内，百分比计算为`covered/Total`。哪个好。

当我们排除命名空间（例如测试代码和第 3 方产品）时，仍会列出排除的命名空间，但`covered`度量为 0（零），这是预期的结果。

但是，排除的命名空间的`Total`指标**不是**零，而是包含在整体`Total`指标中。这会影响覆盖率指标！

问题截图：

![在此处输入图像描述](https://i.stack.imgur.com/ri8dZ.png)

我该如何解决这个问题？（这是 TC 7.1.2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:38:17.070

将第 3 方代码移动到单独的程序集中。

# c - 一个简单的指针代码

> ID：15760329
> 
> 赞同：-3
> 
> 时间：2013-04-02T09:16:03.173
> 
> 标签：c, pointers

```
#include <stdio.h>

int main(void)
{
    int* a;
    *a=20;
    printf("%i\n",*a);

    return 0;
} 
```

我有上面的代码。当代码在运行时，我总是收到错误消息“filename.exe 已停止工作”。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:17:11.143

您没有为指向的指针分配任何内存。你可以这样做：

```
int *a = malloc(sizeof(*a)); 
```

或像这样：

```
int value;
int *a = &value; 
```

如果您使用 分配，`malloc`那么您将希望`free`在使用完指针后调用它。

访问未初始化的指针会导致未定义的行为。在您的程序中，它导致了分段错误，这是未初始化指针访问的一种非常常见的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:17:45.820

in`int* a;` `a`的默认值是垃圾，并且指向一个无效的内存，你不能分配给它。像`*a=20;`这样的赋值会在运行时导致未定义的行为。（语法明智的代码是正确的，所以编译）你可能有时也会遇到段错误。

要么做：

```
int i;
int *a = &i;  // a points to a valid memory that is i
*a = 20; 
```

或使用 calloc() 或 malloc() 函数进行动态内存分配。

```
int *a = malloc(sizeof(int));
*a = 20; 
```

记住动态分配的内存，我们必须在完成后显式地释放（释放）内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:17:49.177

你有`wild pointer`，要么分配内存给它使用`malloc`

```
int* a = malloc(sizeof(int)); 
```

或使用堆栈变量

```
int b = 0;
int *a = &b;
*a=20; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:01:26.013

问题在于您的作业 *a = 20。

您不能像这样为指针变量分配值。

诠释 b = 20; a = &b;

谢谢， 桑托什

# c# - 从 OrderedDictionary 按名称获取值

> ID：15760333
> 
> 赞同：1
> 
> 时间：2013-04-02T09:16:22.030
> 
> 标签：c#, ordereddictionary

我正在寻找类似 PHP 的关联数组，它也支持嵌套。例如，我正在创建一个 Dictionary 对象，如下所示：

```
System.Collections.Specialized.OrderedDictionary userRoles = new System.Collections.Specialized.OrderedDictionary();
userRoles["UserId"] = "120202";
userRoles["UserName"] = "Jhon Doe";

// 2D array Like
userRoles["UserRoles"][0] = "CAN_EDIT_LIST";
userRoles["UserRoles"][1] = "CAN_EDIT_PAGE"; 
```

然后我想通过 KeyNames 而不是索引值来访问它们。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:51:16.503

`OrderedDictionary`使用对象作为键和值。

要实现嵌套，只需将值设置为另一个字典：

```
userRoles["UserRoles"] = new Dictionary(); 
```

然后你可以使用：

```
((Dictionary())userRoles["UserRoles"])["MyKey"] = "My Value"; 
```

# android - 相对布局 id 参考

> ID：15760336
> 
> 赞同：1
> 
> 时间：2013-04-02T09:16:26.673
> 
> 标签：android, android-layout

这两个视图都在`RelativeLayout`. IDE 抛出错误，没有`@id/et_pass`，但如果我设置`@+id/et_pass`它就可以了。这是为什么？

```
<ImageView 
    android:id="@+id/devider_zero"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@id/et_pass" <!-- Error is here -->
    android:src="@drawable/registration_line" />

<EditText
    android:id="@+id/et_pass"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/devider_first"
    android:background="@android:color/transparent"
    android:layout_gravity="left"
    android:ellipsize="start"
    android:ems="8"
    android:hint="@string/password"
    android:inputType="textPassword"
    android:layout_marginTop="@dimen/register_layout_edittext_margin_top"
    android:maxLines="1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:20:41.943

`@+id/something`和之间的区别在于`@id/something`第一个是创建一个id，第二个是引用一个已经创建的id。你第一次提到一个 id 你必须使用 来创建它`@+id/`，之后的任何东西都可以使用`@id/`。

当您提供视图时，如果您已经在文件中的某个位置使用过该属性`android:id`，则不必使用该属性。`@+id/`

由于 android 编译 XML 文件的方式，它首先读取您的图像视图，到达您`@id/`在 R 文件中编写搜索 id 的点，但找不到它。但是如果调用`@+id/`eclipse搜索R文件中的id，找不到，就添加了。

此外，这并非特定于 RelativeLayouts，如果您将相同的代码放在线性布局中，您也会收到该错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:20:57.990

`@+id`如果 ID 不存在，则指示解析器创建 ID。`@id`用于引用现有 ID。

# amazon-web-services - AWS RDS 是否有任何替代方法来创建可供所有实例访问的数据库

> ID：15760337
> 
> 赞同：0
> 
> 时间：2013-04-02T09:16:28.460
> 
> 标签：amazon-web-services, amazon-rds

我想使用一个可供多个 ec2 实例访问的数据库，但 RDS 有点贵，有没有 RDS 的替代品？

我在我的项目中使用 ruby​​ on rails。Ruby 1.9.3 和 Rails 3.2.12

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:35:55.807

您可以拥有一个自我管理的基于 EC2 的数据库实例。创建具有所需容量的实例安装所需的数据库风格并创建一个端点来访问它。您需要弄清楚创建端点的方法。这是可能的。

链接在这里`http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T11:39:34.013

Rajat，您可以创建自己的实例并将数据库安装到其中。有问题，你需要知道（或者你应该有人来管理它）备份专家。RDS 使您管理 DB 的责任减轻了一点。您可以使用简单的命令甚至通过 Web GUI 来获取 DB 的快照。因此，RDS 让您轻松完成 DB 工作。

# python - 使用 re.match() 查找子字符串

> ID：15760340
> 
> 赞同：1
> 
> 时间：2013-04-02T09:16:33.393
> 
> 标签：python, regex, string

如何在不使用复杂正则表达式的情况下搜索空格分隔的字符串。这是我的代码

```
import re
stringToQueryLevel1 = ['why this','why this code','why this code is complex']  
for i in range(stringToQueryLevel1.__len__()):
    if re.search('why this' , stringToQueryLevel1[i]) != None:
        rc = 0
    else:
        rc = 1

    print rc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:45:00.433

这很简单

```
stringToQueryLevel1 = ['why this', 'why this code', 'why this code is complex']
for item in stringToQueryLevel1:
    print ' ' in item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:05:02.057

试试下面的代码：

```
import re
stringToQueryLevel1 = ['why this','why this code','why this code is complex','TestTest'] 
for i in range(stringToQueryLevel1.__len__()): 
    if re.search('(\w+)\s(\w+)' , stringToQueryLevel1[i]) != None:
        print 'match found in %s'%(stringToQueryLevel1[i])
    else:
        print 'match not found in %s'%(stringToQueryLevel1[i]) 
```

# asp.net-mvc - Telerik.Web.Mvc.UI 智能感知不起作用

> ID：15760343
> 
> 赞同：0
> 
> 时间：2013-04-02T09:16:35.163
> 
> 标签：asp.net-mvc, telerik, intellisense, telerik-mvc, nopcommerce

我有一个`Class Library`nopCommerce 插件，它的作用类似于 MVC3 应用程序，在`Index.cshtml`我想使用`Html.Telerik().Grid<MyModel>(Model)`并添加到我的`Index.cshtml`this中`@using Telerik.Web.Mvc.UI`，它指出它没有找到，但是当我运行应用程序时，我没有收到错误说我没有'没有该库的引用并且可以很好地编译我的代码，但是我没有该`Telerik`库的智能感知，我也添加`<add namespace="Telerik.Web.Mvc.UI" />`到我的根`web.config` `Class Library`项目中并且仍然没有智能感知。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:56:17.650

我找到了解决问题的方法： 1\. 像这样使用`gacutil.exe`安装程序集2.`cmd`像这样找到程序集的`c:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\x64>gacutil.exe /i Telerik.Web.Mvc.dll` PublickKeyToken 3\. 在我的项目 web.config 文件中添加这样的程序集： `cmd``gacutil.exe``c:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\x64>gacutil.exe /l Telerik.Web.Mvc``Class Library`

```
 <add assembly="Telerik.Web.Mvc, Version=2012.1.214.340, Culture=neutral, PublicKeyToken=121fae78165ba3d4" />
            </assemblies>
        </compilation> 
```

4\. 在 web.config 中添加命名空间，如下所示：

```
 <add namespace="Telerik.Web.Mvc.UI" />
        </namespaces>
    </pages> 
```

5.保存，构建，关闭visual studio，再次打开

# android - 关于自定义适配器类的几个问题

> ID：15760345
> 
> 赞同：0
> 
> 时间：2013-04-02T09:16:36.937
> 
> 标签：android

```
 public static class ViewHolder{
        public TextView item1;
        public TextView item2;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        ViewHolder holder;
        if (v == null) {
            LayoutInflater vi =
                (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.document_item_row, null);
            holder = new ViewHolder();
            holder.item1 = (TextView) v.findViewById(R.id.big);
            holder.item2 = (TextView) v.findViewById(R.id.small);
            v.setTag(holder);
        }
        else
            holder=(ViewHolder)v.getTag();

        final DocumentResponse custom = entries.get(position);
        if (custom != null) {
            holder.item1.setText(custom.getCreateByFullName());
            holder.item2.setText(custom.getTitle());
        }
        return v;
    } 
```

1.  谁能解释一下覆盖方法的参数。[ `getView(int position, View convertView, ViewGroup parent)`]。我需要知道每个参数的作用是什么？

2.  我有一个静态类 ViewHolder 持有我的视图组件，那我为什么要创建一个 nerw 实例`holder`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:22:51.963

对于 getView 方法：

*   position 是列表中的索引，您将使用它从数据源中获取当前对象
*   convertView 是一个 View... 这是由 getView 方法返回的另一个位置的视图，因此您不必为每一行膨胀视图，您可以重用一个。
*   parent 可能是容器，但我从未使用过它。

# r - 模拟学习调用函数

> ID：15760351
> 
> 赞同：0
> 
> 时间：2013-04-02T09:16:59.347
> 
> 标签：r, function, loops, simulation

我花了几个小时思考以下问题。我正在运行模拟研究，我想在模拟研究之外定义函数，以便能够在我的代码末尾调用这些函数。

此示例说明了该问题，但不可复制（您将在下面找到该问题的可复制示例）。我使用“metafor”包进行荟萃分析。

我想使用我在最终模拟代码之外定义的以下函数：

```
mat <- matrix(NA, nrow = 8, ncol = 3)

funtr.stu <- function(i) {
  for (y in 1:8) {
    mat[y,i] <- tr[[y]]$k0
  }
  return(mat)
} 
```

“tr”是一个列表，由8次分析的结果组成。我想从该列表中检索对象“k0”并将其存储到矩阵“mat”中。

在代码的以下部分（我在其中运行模拟）中，我想调用该函数并用正确的数字填充矩阵“mat”。

```
for (i in 1:iterations) { 
   tr.stu <- funtr.stu()
} 
```

此代码的结果是一个填充矩阵，但每列中的数字相同。因此，R 不是每次迭代都存储数字，而是仅存储最后一次迭代。

如何修改我的代码，使 R 可以根据需要存储输出？

一个非常简单的例子：

Mat 仅表示一个带有数字的矩阵，而 res 是我要填充的空矩阵。

```
mat <- matrix(data = c(1,2,3,4,5,6), ncol = 2, nrow = 3)
res <- matrix(NA, ncol = 2, nrow = 3) 
```

我使用函数“fun”来填充空矩阵 res。

```
fun <- function() {
  for (i in 1:2) {
    res[y,i] <- mat[y,i]
  }
  return(res)
} 
```

这就是我想放在代码末尾的内容（我只想调用该函数，并使用此函数填充矩阵“res”）。但是，如果我使用下面的代码，R 只会填充第三行而不是第一行和第二行。

```
for (y in 1:3) {
  test <- fun()
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:50:07.097

这应该适用于您的情况。基本上，在 for 循环的每次迭代中返回一行。当您返回整个“res”矩阵时。

```
mat <- matrix(data = c(1,2,3,4,5,6), ncol = 2, nrow = 3)
res <- matrix(NA, ncol = 2, nrow = 3)

fun <- function() {
  for (i in 1:2) {
    res[y,i] <- mat[y,i]
  }
  return(res[y,])
}

for (y in 1:3) {
  test[y,] <- fun()
} 
```

# netty - blip 场景中的 Netty 连接处理

> ID：15760359
> 
> 赞同：1
> 
> 时间：2013-04-02T09:17:07.197
> 
> 标签：netty, nio, throttling

我们在游戏公司使用 Netty3.2.1 进行客户端和服务器之间的连接管理。我们的目标是改进

1.  能够处理网络中断等突发情况，并且必须能够尽快从中恢复。
2.  在不丢弃现有连接套接字的情况下增加单个服务器可以处理的连接数。

**Blip 场景** 在实时环境中，由于 ISP 故障可能会出现 blip，因此所有现有客户端（我们的客户端在现有连接中断后重新连接）连接将同时中断和重新连接。例如，如果一个服务器连接了 25000 个客户端，在 blip 期间，所有 25000 个客户端都试图同时连接回服务器，这给服务器带来了巨大的压力。由于 Netty 旧版本不提供启用/禁用**OP_ACCEPT**的功能，我们开始限制超过 100 个并发连接 ssl 握手限制的连接。当超过限制时，我们会暂停老板线程几秒钟。我们还没有准备好使用提供该功能的 Netty 4.0 Beta 版本。

我们在压力测试期间观察到的其他情况是，如果服务器上有大量传入连接，则接受所有传入连接并稳定需要花费大量时间（25 K 连接大约 30 分钟，所有 25 K 尝试连接在同一时间） 。但是如果我们慢慢增加负载，netty 能够在非常短的时间内（大约 3 到 5 分钟）轻松地接受所有连接。我们希望构建系统，以便我们希望能够灵活地处理突发事件。

*   我在现有的 Netty Jar 中添加了一些日志，当客户端在巨大负载期间断开连接时，它似乎在 read() 方法中失败。
*   使用 Netty3.6 Final jar ，没有太大帮助
*   将使用执行处理程序帮助吗？
*   禁用限制会导致服务器出现 OOM 异常。

请提出解决此问题的任何可能方法。还有其他方法可以限制连接吗？

**设置详细信息和配置**

**客户端**- JMeter 框架 - 2 GB 机器负载 - 50000 个客户端每秒消息数 - 12000 条消息/秒。消息是客户端问候和服务器问候作为字符串。所有机器上的 ulimit 为 1,00,000

**服务器**- 12 个核心、HT 和 48 GB ram 工作线程 - 50 个（HT 的核心数量的两倍，核心数量变为 24 个）Linux 机器的所有 TCP 内部缓冲区都配置为使用峰值限制。

我们的管道处理程序具有以下处理程序

*   pipeline.addLast(sslHadler) - 内置处理程序中的 Netty
*   pipeline.addLast(messageEncoder) - 只是对字节进行编码和解码，并根据需要将它们转换为消息帧。
*   pipeline.addLast(messageDecoder)
*   pipeline.addLast(Businesshandler)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:03:38.487

我认为你可以在这里使用 netty 3.x 做的不多，可能会将积压设置为一个小数字，以便客户端稍后需要重新连接。

所以我认为你最好的选择是尽可能升级到 Netty 4。对不起....

# c# - 从内容页面获取并转换 Masterpage UserControl 以访问特定的 UC 属性

> ID：15760361
> 
> 赞同：2
> 
> 时间：2013-04-02T09:17:11.557
> 
> 标签：c#, user-controls, master-pages, asp.net-2.0

我有一个引用 2 个用户控件的 MasterPage (MyBoxx.Master)：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MyBoxx.master.cs" Inherits="MyBoxxMaster" %>
<%@ Register TagPrefix="uc1" TagName="Header" Src="Header.ascx" %>
<%@ Register TagPrefix="uc1" TagName="Footer" Src="Footer.ascx" %> 
```

我的用户控件“标题”包含一个搜索框。我想在访问某些页面时隐藏此搜索框。因此，我在我的用户控件中添加了一个布尔属性，并在呈现用户控件时使用此属性来确定是否显示搜索框：

```
public partial class uxHeader : System.Web.UI.UserControl
{

    bool _showSearch = true;
    public bool ShowSearch
    {
        get { return _showSearch; }
        set { _showSearch = value; }
    }
    [...]
    protected void Page_Load(object sender, EventArgs e)
    {
        [...]
        searchBox.Visible = _showSearch;

    }
} 
```

然后我尝试从内容页面访问这个“ShowSearch”属性：

```
((uxHeader)Page.Master.FindControl("Header1")).ShowSearch = false; 
```

问题是我在尝试编译时收到以下错误：

```
Error   15  The type or namespace name 'uxHeader' could not be found (are you missing a using directive or an assembly reference?) 
```

问题是我确信我可以在某个时候让它工作并编译，因为它可以在以前发布的生产版本上工作。但是现在我正在对同一站点中的其他内容进行更改，并且无法再编译。

从 SO 上的各种帖子中，我尝试将以下行添加到我的内容页面 aspx ：

```
<%@ MasterType VirtualPath="~/MyBoxx.master"%>
<%@ Reference VirtualPath="~/MyBoxx.master" %> 
```

没有任何成功！我还看到了有关页面生命周期的一些答案，但这不是问题，因为我在编译时遇到错误，而不是在执行时遇到错误。

如果有人对如何永久解决此问题有任何建议，我将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:39:35.047

好吧，我找到了几个可行的解决方案......我想我理解它是如何/为什么更早地工作的

1）似乎编译在这方面可以发挥作用。如果我注释该行，编译该站点，然后尝试再次添加该行，则 uxHeader 类型在 VS 中为“可用”，我可以在未注释该行的情况下再次编译该站点...

2）由于第一个解决方案显然不是一个长期的解决方案，我发现在内容页面 aspx 中引用用户控件（当然没有实际使用它）可以解决问题：

```
<%@ Register TagPrefix="uc1" TagName="Header" Src="Header.ascx" %> 
```

3）我也试过这个，我发现它最干净......在母版页中，公开一个公共属性：

```
public uxHeader PageHeader
{
    get
    {
        return Header1;//Header1 is the id of the userControl dropped in masterpage
    }
} 
```

在内容页面 aspx 中，我然后输入：

```
<%@ MasterType VirtualPath="~/DBoxx.master"%> 
```

然后，仍然在内容页面中，但在代码隐藏中，在网站编译后，我可以使用：

```
this.Master.PageHeader.ShowSearch = false; 
```

希望这将有助于那些在未来寻求有关该主题的帮助的人。我看到这是一个反复出现的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T15:03:35.773

根据您对用户控件进行编码的方式，在将其作为母版页属性公开给母版页时，您可能无法访问它的所有属性/方法。

这是一个有效的解决方案：

在您的母版页中，您需要注册您的用户控件 (.ascx) 并将其放置在表单标记内的母版上。

注册用户控件

```
<%@ Register Src="~/Controls/MyUserControl.ascx" TagPrefix="uc" TagName="MyUserControl" %> 
```

将用户控件添加到母版页

```
<form id="frmMain" runat="server">
        <uc:MyUserControl runat="server" ID="ucMyUserControl" />
        <div id="main-wrapper">
            <div id="main">... 
```

现在对于内容页，您必须在每个使用您要使用控件的母版页的内容页中创建一个引用。

在内容页面中添加参考

```
<%@ Reference Control="~/Controls/MyUserControl.ascx" %> 
```

现在您可以在页面级别设置公共变量并访问它的属性/方法

> 部分班级MyPage
> 
> ```
>  Inherits System.Web.UI.Page
> 
>   Public usrCtrl As MyUserControl
> 
> Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
> 
>     If Master.FindControl("ucMyUserControl") IsNot Nothing Then
>         usrCtrl = CType(Master.FindControl("ucMyUserControl"), MyUserControl)
>         usrCtrl.ExecMyMethod()
>     End If
>     ... 
> ```

# javascript - 功能内容执行不按顺序

> ID：15760362
> 
> 赞同：0
> 
> 时间：2013-04-02T09:17:13.330
> 
> 标签：javascript, jquery, dom

我有一个java脚本函数

```
function myfunction() {

    var url = location.href;
    var ajaxRespose;

        $.ajax({
            type:"GET",
            url: url,
            cache:false,
            dataType: "text",
            success: function(response) {
                var data = $.parseJSON(response);
                ajaxRespose = data;
                console.debug("ajaxRespose ==>:"+ajaxRespose);
            }
        });
        console.debug("first ajaxRespose: " +ajaxRespose);
    }
    return false;
} 
```

在我的控制台（firbug）上，我得到：

```
first ajaxRespose: undefined

ajaxRespose ==>:[object Object] 
```

我的问题是，为什么 ajax 调用在“第一个”console.debug 之后执行。PS：我已经简化了功能，（功能正常，但问题在于执行顺序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:21:54.007

因为 AJAX 是异步的（因此得名）。在 AJAX 请求完成之前，正在执行记录“第一个 ajaxRespose”的控制台日志，这就是您未定义的原因。然后 AJAX 请求完成并且您得到响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:22:03.557

因为`$.ajax()`是**异步**的，所以事件的顺序是这样发生的：

```
$.ajax(...);   // executes AJAX request
console.debug("first ajaxResponse:" + ajaxRespose);   // undefined

/* some time later, we receive AJAX response */

// it executes the success function from the original AJAX request
console.debug("ajaxRespose ==>:"+ajaxRespose);  // [object Object] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:24:09.257

# javascript - Jquery XML Parse 不适用于 IE

> ID：15760363
> 
> 赞同：1
> 
> 时间：2013-04-02T09:17:13.630
> 
> 标签：javascript, jquery, browser, internet-explorer-9

我遇到了情况，需要帮助。我正在尝试使用 jquery ajax 方法读取 xml 文件的内容，如下所示：

```
$.ajax({
type: "GET",
url: "Resources/languageResource.xml",
dataType: "xml",
success: function(xml) {
    $(xml).find(lang).each(function(){
        var title=$(this).find('title').text();
        var loginBoxHeader1=$(this).find('loginBoxHeader1').text();
        var loginBoxHeader2=$(this).find('loginBoxHeader2').text();
        var username=$(this).find('username').text();
        var password=$(this).find('password').text();
        var submit=$(this).find('LoginBtn').text();
        var RememberCheckbox=$(this).find('RememberCheckbox').text();

        document.getElementById('titleId').innerText = title;
        document.getElementById('h1Id').innerHTML = title;
        document.getElementById('loginBoxHeader1').innerHTML = loginBoxHeader1;
        document.getElementById('loginBoxHeader2').innerHTML = loginBoxHeader2;
        document.getElementById('username').innerHTML = username;
        document.getElementById('password').innerHTML = password;
        document.getElementById('submit').innerHTML = submit;
        document.getElementById('RememberCheckbox').innerHTML = RememberCheckbox;
    });
} 
```

});

这在 Firefox 和 Chrome 中效果很好，但不适用于 IE。什么不见​​了？

Internet Explorer 版本为 9。

这是xml文件结构：

```
<xml>
<English>
    <title>Welcome to ******* System</title>
    <loginBoxHeader1>Login Panel - </loginBoxHeader1>
    <loginBoxHeader2>Please provide following credentials!</loginBoxHeader2>
    <username>Username:</username>
    <password>Password:</password>
    <LoginBtn>Log in</LoginBtn>
    <RememberCheckbox>Remember my login on this computer</RememberCheckbox>
</English>

<Spanish>
    <title>********************************</title>
    <loginBoxHeader1>Login Panel -</loginBoxHeader1>
    <loginBoxHeader2>Por favor, proporcione las credenciales siguientes!</loginBoxHeader2>
    <username>Nombre de Usuario:</username>
    <password>Contraseña:</password>
    <LoginBtn>iniciar la sesión</LoginBtn>
    <RememberCheckbox>Recordar mi usuario en este equipo</RememberCheckbox>
</Spanish>

</xml> 
```

在 Chrome/Firefox 上的结果：

![在此处输入图像描述](https://i.stack.imgur.com/UskkA.png)

IE 上的结果：

![在此处输入图像描述](https://i.stack.imgur.com/ZQBDz.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T14:17:21.237

在这种情况下，帮我重置了IE的所有设置`(Internet Options -> Advanced -> Reset)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:01:42.283

它对我不起作用的原因是在旧版本的 jQuery 中，XMLHttpRequest 的字段 responseXML 被评估为 XML 响应。较新的版本似乎总是使用 DOMParser 来解析原始响应，这在响应响应期间有时会引发异常，即使 XMLHttpRequest 的 responseXML 字段中有一个有效的 dom 树也是如此。由于字符编码问题，可能会引发异常，但是如果 responseXML 确实包含 dom 树，则可以解决此问题：

```
var xhr;

$.ajax({
   type: "GET",
   url: "Resources/languageResource.xml",
   dataType: "xml",
   xhr: function () {
      xhr = $.ajaxSettings.xhr();
      return xhr;
   },
   success: onSuccess,
   error: function(status, msg) {
      if (status.status == 200) {
         var xml = xhr.responseXML;
         if (xml && xml.documentElement) {
            onSuccess(xml);
         }
      } else {
          // error handling
      }
   }
 });

 function onSuccess(xml) {
    // parsed xml tree
    // ...
 } 
```

然而奇怪的是，responseXML 包含一个 dom 树，而 DOMParser 无法解析原始响应。IE10 似乎解决了这个问题 - IE9 是否使用两个不同的 xml 解析器 (resonseXML!=DOMParser)？- 奇怪的...

# c++ - 当引用范围结束时，当引用指向对象的指针（堆中的对象）时会发生什么？

> ID：15760367
> 
> 赞同：-2
> 
> 时间：2013-04-02T09:17:24.283
> 
> 标签：c++, visual-c++

当引用范围结束时，当引用指向对象的指针（堆中的对象）时会发生什么？我的意思是堆中的对象是销毁还是保留：

例如：

```
void f(){
    Object &obj= *new Object() ;

   int &i = new int;
}

void main(){
  f();
} 
```

对象在 f 的末尾被销毁还是必须在末尾调用“delete &n”？原始值也一样？如果它必须被破坏，那么我如何创建一个常量原始值的副本并分配给一个引用而不用“新”创建它？

（对不起语法或拼字法，以及原始问题的打字错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:25:05.840

```
Object &n = new Object(); 
```

这不会编译。*new-expression* like返回一个`new Object()`指向动态分配对象的指针。你不能`Object&`用`Object*`.

如果您有 type 的引用`T&`，则应该使用 type 的对象对其进行初始化`T`。这就是参考的工作原理。`T&`是对`T`对象的引用。

你*可以*这样做：

```
Object &n = *new Object(); 
```

*这将取消引用new-expression* (with )返回的指针`*`以获取`Object`it 指向的位置，然后用 that 初始化引用`Object`。但是，我完全不建议这样做。它只是隐藏了对象是动态分配的事实。

不，这样做不会影响动态分配对象的生命周期。*如果您使用new-expression*创建一个对象，它具有动态存储持续时间，因此您必须`delete`在某个时候使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:24:51.780

首先，你需要做出决定。你要这个：

```
Object &n = * new Object(); 
```

或者你想要这个：

```
Object* &n = new Object(); 
```

无论如何，当引用超出范围时，它们不会导致对象被删除。在您的示例中，您将有内存泄漏，无法恢复堆中的`Object`和分配的。`int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:29:35.690

首先：您的代码将无法编译。

最多你应该做（只是为了编译......）：

`Object &n = *(new Object());`但我不推荐这种做法。

关于第二个问题：总是你写“新”，总是你必须在一段时间内删除。

# r - r如何计算逻辑回归中的p值

> ID：15760371
> 
> 赞同：2
> 
> 时间：2013-04-02T09:17:39.243
> 
> 标签：r

R 在二项式逻辑回归中计算什么类型的 p 值，这在哪里记录？

当我阅读 ?glm() 的文档时，我发现没有参考 p 值的计算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:48:44.487

p 值由函数 计算`summary.glm`。请参阅`?summary.glm`有关如何计算这些的（非常简短的）信息。

有关更多信息，请通过键入查看源代码

```
summary.glm 
```

在 R 命令提示符下。在那里，您将找到`pvalue`创建对象的代码行。按照代码返回以查看如何（有条件地）计算 p 值计算的组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:59:39.613

R 的作者在编写帮助系统时考虑了几个原则：紧凑（不要写超出需要的内容，它不是教科书）、准确性以及好奇和受过良好教育的读者。它确实*是*为其他统计学家写的。包括开头句的“好奇”部分是为了提出一个问题，为什么您没有同时关注`?glm`页面中的各种链接：`summary.glm`您会在哪里找到对您的模棱两可的问题的一个答案，或者`anova.glm`您会在哪里找到另一个可能的答案. 帮助作者确实希望您会关注这些链接*并*阅读整个页面*并*执行示例。你会注意到，即使你到达`summary.glm`没有提到“二元逻辑回归”，因为他们几乎假设您在统计学方面有良好的基础并且手边有 McCullagh 和 Nelder 的副本，或者如果没有，您将阅读参考资料。

另一个原则：有时是代码本身（鉴于 R 的开源性质）执行文档。从技术上讲`glm`，不打印任何内容，`print.glm`也不打印 p 值。它会`print.summary.glm`或`print.anova.glm`那会做任何印刷。学习 R 的一部分是学习打印到控制台的结果将经过一个 eval-print 循环，并且可以使用特定于对象类的函数来定制输出。

这些假设只是许多人认为的“R 的陡峭学习曲线”的一部分（尽管如果在 x 轴上用时间/努力绘制，我会称它为浅曲线。）

# python - shell 中的“set -x”的 Python 等价物是什么？

> ID：15760381
> 
> 赞同：43
> 
> 时间：2013-04-02T09:17:58.997
> 
> 标签：python, shell, debugging

`set -x`请建议与 shell 脚本等效的 Python 命令。

有没有办法打印/记录 Python 执行的每个源文件行？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-02T09:20:20.003

您可以使用[跟踪](http://docs.python.org/3.3/library/trace.html)模块：

```
python -m trace -t your_script.py 
```

上面的命令行将在执行时显示每一行代码。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-10-31T08:52:42.743

为了获得`bash -x`使用该`trace`模块的适当等价物，需要使用`--ignore-dir`来阻止打印导入的每个模块的源代码行，例如，根据需要为其他模块位置`python -m trace --trace --ignore-dir /usr/lib/python2.7 --ignore-dir /usr/lib/pymodules repost.py`添加更多指令。`--ignore-dir`

这在尝试定位加载缓慢的模块时变得很重要，例如`requests`在慢速机器上几分钟内会吐出数百万条源代码行。正确使用可以`--ignore-dir`将时间缩短到几秒钟，并且只显示您自己代码中的行。

```
$ time python -m trace --trace repost.py 2>&1 | wc
3710176 16165000 200743489

real    1m54.302s
user    2m14.360s
sys 0m1.344s 
```

对比

```
$ time python -m trace --trace --ignore-dir /usr/lib/python2.7 --ignore-dir /usr/lib/pymodules repost.py 2>&1 | wc
     42     210    2169

real    0m12.570s
user    0m12.421s
sys 0m0.108s 
```

这并不能真正回答您的问题；您要求 Python 等效于`set -x`. 一个简单的近似方法是`sys.settrace()`：

```
jcomeau@aspire:/tmp$ cat test.py
#!/usr/bin/python -OO
'''
test program for sys.settrace
'''
import sys, linecache
TRACING = []

def traceit(frame, event, arg):
    if event == "line":
        lineno = frame.f_lineno
        line = linecache.getline(sys.argv[0], lineno)
        if TRACING:
            print "%d: %s" % (lineno, line.rstrip())
    return traceit

def test():
    print 'this first line should not trace'
    TRACING.append(True)
    print 'this line and the following ought to show'
    print "that's all folks"
    TRACING.pop()
    print 'this last line should not trace'

if __name__ == '__main__':
    sys.settrace(traceit)
    test() 
```

它在运行时给出：

```
jcomeau@aspire:/tmp$ ./test.py
this first line should not trace
19:     print 'this line and the following ought to show'
this line and the following ought to show
20:     print "that's all folks"
that's all folks
21:     TRACING.pop()
this last line should not trace 
```

从跟踪输出中删除“TRACING.pop()”行作为练习留给读者。

来源：[https](https://pymotw.com/2/sys/tracing.html) ://pymotw.com/2/sys/tracing.html和[http://www.dalkescientific.com/writings/diary/archive/2005/04/20/tracing_python_code.html](http://www.dalkescientific.com/writings/diary/archive/2005/04/20/tracing_python_code.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-15T14:53:32.667

我非常喜欢@jcomeau_ictx 的[答案](https://stackoverflow.com/a/33449763/2454357)，但它有一个小缺陷，这就是我扩展它的原因。问题是 jcomeau_ictx 的“traceit”函数只有在所有要跟踪的代码都在调用的文件中时才能正常工作`python file.py`（我们称之为主机文件）。如果你调用任何导入的函数，你会得到很多没有代码的行号。这样做的原因是它`line = linecache.getline(sys.argv[0], lineno)`总是试图从宿主文件 ( `sys.argv[0]`) 中获取代码行。这很容易纠正，因为实际包含跟踪代码行的文件的名称可以在`frame.f_code.co_filename`. 这现在可能会产生大量输出，这就是为什么人们可能希望拥有更多控制权。

还有一点需要注意。根据`sys.settrace()`文档：

> 每当输入新的本地范围时，都会调用跟踪函数（事件设置为“调用”）

换句话说，要跟踪的代码必须在函数内部。

为了保持一切整洁，我决定将所有内容放入一个名为`setx.py`. 代码应该是不言自明的。然而，为了兼容 Python 3，需要一段代码，它处理 Python 2 和 3 在模块导入方式方面的差异。这是解释[here](https://stackoverflow.com/a/40945851/2454357)。该代码现在应该也适用于 Python 2 和 3。

```
##setx.py
from __future__ import print_function
import sys, linecache

##adapted from https://stackoverflow.com/a/33449763/2454357
##emulates bash's set -x and set +x

##for turning tracing on and off
TRACING = False

##FILENAMES defines which files should be traced
##by default this will on only be the host file 
FILENAMES = [sys.argv[0]]

##flag to ignore FILENAMES and alwas trace all files
##off by default
FOLLOWALL = False

def traceit(frame, event, arg):
    if event == "line":
        ##from https://stackoverflow.com/a/40945851/2454357
        while frame.f_code.co_filename.startswith('<frozen'):
            frame = frame.f_back
        filename = frame.f_code.co_filename
##        print(filename, FILENAMES)
        if TRACING and (
            filename in FILENAMES or
            filename+'c' in FILENAMES or
            FOLLOWALL
        ):
            lineno = frame.f_lineno
            line = linecache.getline(filename, lineno)
            print("{}, {}: {}".format(filename, lineno, line.rstrip()))
    return traceit

sys.settrace(traceit) 
```

然后我用这段代码测试功能：

```
##setx_tester.py
from __future__ import print_function
import os
import setx
from collections import OrderedDict

import file1
from file1 import func1
import file2
from file2 import func2

def inner_func():
    return 15

def test_func():

    x=5
    print('the value of x is', x)

    ##testing function calling:
    print('-'*50)
    ##no further settings
    print(inner_func())
    print(func1())
    print(func2())

    print('-'*50)
    ##adding the file1.py to the filenames to be traced
    ##it appears that the full path to the file is needed:
    setx.FILENAMES.append(file1.__file__)
    print(inner_func())
    print(func1())
    print(func2())

    print('-'*50)
    ##restoring original:
    setx.FILENAMES.pop()

    ##setting that all files should be traced:
    setx.FOLLOWALL = True
    print(inner_func())
    print(func1())
    print(func2())

##turn tracing on:
setx.TRACING = True
outer_test = 42  ##<-- this line will not show up in the output
test_func() 
```

这些文件看起来像这样`file1.py`：`file2.py`

```
##file1.py
def func1():
    return 7**2 
```

和

```
##file2.py
def func2():
    return 'abc'*3 
```

然后输出如下所示：

```
setx_tester.py, 16:     x=5
setx_tester.py, 17:     print('the value of x is', x)
the value of x is 5
setx_tester.py, 20:     print('-'*50)
--------------------------------------------------
setx_tester.py, 22:     print(inner_func())
setx_tester.py, 12:     return 15
15
setx_tester.py, 23:     print(func1())
49
setx_tester.py, 24:     print(func2())
abcabcabc
setx_tester.py, 26:     print('-'*50)
--------------------------------------------------
setx_tester.py, 29:     setx.FILENAMES.append(file1.__file__)
setx_tester.py, 30:     print(inner_func())
setx_tester.py, 12:     return 15
15
setx_tester.py, 31:     print(func1())
**path to file**/file1.py, 2:     return 7**2
49
setx_tester.py, 32:     print(func2())
abcabcabc
setx_tester.py, 34:     print('-'*50)
--------------------------------------------------
setx_tester.py, 36:     setx.FILENAMES.pop()
setx_tester.py, 39:     setx.FOLLOWALL = True
setx_tester.py, 40:     print(inner_func())
setx_tester.py, 12:     return 15
15
setx_tester.py, 41:     print(func1())
**path to file**/file1.py, 2:     return 7**2
49
setx_tester.py, 42:     print(func2())
**path to file**/file2.py, 2:     return 'abc'*3
abcabcabc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-19T01:40:26.040

还有[viztracer](https://github.com/gaogaotiantian/viztracer)，它与 GUI 类似`trace`，但更完整。

你可以像这样使用它：

```
$ pip install viztracer --user
$ viztracer --log_func_args --log_func_retval source.py 
```

它生成一个可以像这样可视化的报告`vizviewer report.json`

# php - Opencart 类别自定义图标

> ID：15760393
> 
> 赞同：2
> 
> 时间：2013-04-02T09:19:16.923
> 
> 标签：php, opencart, categories

我需要显示一个自定义图形图标以显示在每个缩略图侧面的 opencart 类别页面上。

我可以使用 Opencart 的现有产品属性之一来让它显示在类别中吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:32:04.217

`I have created a vQmod extension for this. Wait until today evening I'll post an URL where to buy it. – shadyyx 3 hours ago`

我的朋友，你真好..收费..不

基本上你需要编辑`category.tpl`在`view/catalog/theme/default/template/product`

您可以分配一个简单的`<img src=$id/cat_icons />`或类似性质的东西..

# ruby - 为什么 ruby 进程开始获取：“getaddrinfo：名称解析中的临时失败”在重新启动之前所有远程调用

> ID：15760394
> 
> 赞同：1
> 
> 时间：2013-04-02T09:19:23.280
> 
> 标签：ruby, dns

我有几台专用服务器，在这些服务器上我的后台工作人员有时会在重新启动之前运行数天。发生这种情况时（它们似乎运行了 24 小时以上），然后我开始收到如下错误：

```
getaddrinfo: Temporary failure in name resolution
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:540:in `open'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:540:in `tcp_socket'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:549:in `block in do_start'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:549:in `do_start'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:519:in `start' 
```

来自该特定进程的所有远程调用都会发生该错误，直到它重新启动（不是硬件/服务器重新启动，只是 ruby​​ 进程）。我已经仔细检查/确认重新启动该进程是一种修复，因为我试图通过 SSH 连接到服务器，并在失败的进程旁边运行一个新进程，这个进程可以完美运行，而有故障的进程仍然失败.

所以我的问题是，为什么会发生这种情况，除了每天重新启动流程之外，我该如何解决这个问题？

我在 ruby​​ 1.9.3 p194 上，后台作业是用[sidekiq](http://mperham.github.com/sidekiq/) gem 处理的（但是我不怀疑那个负责混乱）。

服务器位于[http://www.hetzner.de](http://www.hetzner.de)（但我不认为他们应该受到责备，因为它正在发生在进程中）

**更新**

除了上述 smtp 调用错误之外，在执行简单的 http 请求时，我也会收到类似的错误。这也可以在进程重新启动后解决：

```
# (Errno::EHOSTUNREACH) "No route to host - connect(2)"

/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:29:in `initialize'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:29:in `open'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:29:in `block in connect'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent/ssl_reuse.rb:29:in `connect'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
/home/deployer/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:750:in `start'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:628:in `start'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:888:in `reset'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:567:in `connection_for'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/net-http-persistent-2.8/lib/net/http/persistent.rb:926:in `request'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/mechanize-2.5.1/lib/mechanize/http/agent.rb:258:in `fetch'
/home/deployer/apps/au/shared/bundle/ruby/1.9.1/gems/mechanize-2.5.1/lib/mechanize.rb:407:in `get' 
```

# android - 如何在 Windows 7 的模拟器上安装 facebook api？

> ID：15760402
> 
> 赞同：6
> 
> 时间：2013-04-02T09:19:35.773
> 
> 标签：android, facebook-graph-api, sdk, facebook-apps

我是 facebook 应用程序的新手，所以我需要帮助才能在 Windows 7 的 android 模拟器上安装 facebook api。

我已经安装了 facebook api，但我得到了一个库错误..

```
[2013-04-02 16:22:35 - HelloFacebookSample] Unable to resolve target 'android-8' 
```

在图书馆

....\Facebook ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T09:44:04.950

您无需安装 Facebook API。既不在设备上，也不在模拟器上。

您可以使用他们针对各种平台的 SDK 调用 Facebook API。在您的情况下，Facebook Android SDK。此[Facebook Android SDK](https://developers.facebook.com/android/)将集成到您开发的应用程序中。

但是，如果您的意思是在模拟器上安装 Facebook 应用程序（*OP 非常不清楚*），那么您需要获取 SDK 包中包含的 .apk 文件，您可以从上面的链接下载该文件。要安装该 APK，请按照下列步骤操作：

**确保您的模拟器已经在运行。**

1.  下载 SDK 包。
2.  将 zip 的内容提取到一个文件夹中。
3.  在提取的文件夹中找到 APK 文件，在**bin**文件夹中并将其重命名为简单的**facebook.apk**文件名。复制此文件。
4.  浏览到您计算机上的 SDK 位置并导航到**平台工具**文件夹。（我们在这里需要*adb*）。在此处粘贴**facebook.apk**文件
5.  在文件夹的空白区域，按住 Shift 键，右键单击并选择**在此处打开命令窗口** *（确保您没有在任何文件或文件夹上执行此操作）*
6.  现在，在命令提示符下，键入以下命令：

    adb 安装 facebook.apk

按照上述步骤将在您的模拟器上安装 Facebook 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:23:29.490

如果您想将 Facebook 用作应用程序的一部分，您可以获取[Facebook SDK](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)，这是您自己的库项目。您不能在模拟器上安装 Facebook 进行测试，但它会回退到使用 Internet 浏览器进行身份验证。

最好的解决方案是在真实设备上进行测试。如果您想要一台真实设备进行测试但没有，您可以尝试使用[三星远程实验室。](http://developer.samsung.com/remotetestlab/rtlDeviceList.action#)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-03T14:54:41.617

如果要安装 Facebook .APK 文件，需要执行以下步骤：

1) 为您的 Android SDK 下载相应的 Facebook .APK 文件。请查看此链接：[Facebook SDK for Android v4.x 下载[1](https://developers.facebook.com/docs/android/downloads)

2) 如果您使用的是 Mac OSX：

转到 Android Studio > 终端：

```
cd /Users/[your_username]/Library/Android/sdk (or where is the location of the SDK) 
```

3) `./platform-tools/adb install /Users/admin/Downloads/Facebook-some_version.apk`

4) 您应该会看到“成功”消息。

祝你好运 ！

# iphone - 如何使用 objectAtIndex 删除 childviewcontroller

> ID：15760406
> 
> 赞同：1
> 
> 时间：2013-04-02T09:19:40.400
> 
> 标签：iphone, ios, objective-c, xcode

我有一个 ViewController，我在其中添加了许多孩子，如下所示：

```
 [self addChildViewController:myViewController]; 
```

在此之后，我想删除一些依赖于我在程序中的位置的孩子以释放内存。所以我在想这样的事情：

`[self.childViewControllers objectAtIndex:1]`

然后使用`removeFromParentViewController`. 但是如何在 objectAtIndex 上提供此代码？我也试过：`[self.childViewControllers objectAtIndex:1] = nil;`

但这不起作用，我得到表达式不可分配的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:23:31.803

您可以通过执行“”来获得一组视图控制器`[self.navigationController viewControllers]`。

然后，您可以通过`objectAtIndex:`该数组上的“”获取其中任何一个。

当您获得其中任何一个时，您可以`removeFromParentViewController`在该视图控制器上调用 "。

但是，我不会做你想做的事。这可能会让您的用户感到困惑，他们在浏览您的应用程序时认为他们来自一个特定的视图控制器，但现在当他们备份时，他们会回到意想不到的地方。

# c# - C# 项目、GAC、DLL

> ID：15760415
> 
> 赞同：0
> 
> 时间：2013-04-02T09:20:14.333
> 
> 标签：c#, dll, gac, cil, openoffice-calc

我的构建应用程序有问题。

我有一个从[这里](http://www.codeproject.com/Articles/21475/TblProc-OpenOffice-Calc-and-Excel)获取的项目对其进行了修改并在我的程序中实现。
很快，这个 TableProc 项目会生成一个报告给 OpenOffice Calc 并使用来自 OpenOffice 的一些库 - cli_basetypes (GAC/MSIL)、cli_oootypes (GAC/MSIL)、cli_uno (GAC/MSIL)、cli_ure (GAC/MSIL)、cli_uretypes (GAC/ MSIL)**和**cli_cppuhelper (GAC32)。

看起来像：
解决方案
.....Project1（引用TableProc）
.....Project2（引用TableProc）
.....TableProc（实现）（对bin目录cli_basetypes.dll等库的引用）

因此，当我处于调试模式 VS 2010 中时，这些 DLL 位于目录***/bin/**中- 一切正常 - 报告已完成。

但是当我构建我的应用程序时：
1\. cli_basetypes、cli_oootypes 等没有 DLL
2\. 有 project1.dll、project2.dll 和 TableProc.dll 和 Program.exe

**问题：**

在构建的应用程序中，它告诉您：

错误一：

> 无法加载文件或程序集 'cli_cppuhelper, Version=1.0.14.0, Culture=neutral, PublicKeyToken=ce2cb7e279207b9e' 或其依赖项之一。Ann 试图加载格式不正确的程序。）

好的，我尝试手动将这些 DLL 放在我的 Program.exe 旁边——同样的错误。

然后我发现，当您安装 Open Office 时，这些库已安装在 GAC 中。我查看了它们，注意到它们都安装在 GAC/MSIL 中，但 cli_cppuhelper 安装在 GAC/32 中。

我试图手动将 cli_cppuhelper 程序集从 GAC/32 复制到 GAC/MSIL，并收到此错误：

错误2：

> 不是有效的Win32应用程序。（来自 HRESULT 的异常：0x800700C1））

据我了解，我的应用程序在查找 DLL 时仅在 GAC/MSIL 中查找

请帮忙，我不知道该怎么办...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T06:39:04.960

将您的平台从 AnyCPU 更改为 x86。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T00:27:09.970

对于那些在未来发现这一点的人。

问题是 Visual Studio 中的目标平台不正确。.dll 需要使用正确的位版本进行编译。

您需要将 Visual Studio 中的目标平台更改为：

*   64 位 -> x64
*   32 位 -> x86

注意：AnyCPU 不工作。

# django - 替换默认管理员显示以添加页面外键

> ID：15760421
> 
> 赞同：0
> 
> 时间：2013-04-02T09:20:25.407
> 
> 标签：django, django-cms

我正在寻找一种方法来替换管理员中页面外键的默认显示。Django cms 正在读取所有页面和页面标题，并将其放在一个 select html 标记中。我的问题是我有超过 10000 页，生成该列表需要一些时间。我写的插件可以有多个这样的链接，并且 Django cms 正在为每个元素加载该列表，因此时间乘以元素的数量。我很想有一种方法，只需按下一个按钮即可打开一个新窗口，以显示用户可以从该新窗口的列表中选择页面并简单地将其添加到插件中的元素。我尝试使用 django-autocomplete-light 但我无法让它与 cms 一起使用。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:22:51.033

那正是这样[`raw_id_fields`](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/#django.contrib.admin.ModelAdmin.raw_id_fields)做的。

# jquery - jQuery.ajax 如何使用内容属性

> ID：15760422
> 
> 赞同：6
> 
> 时间：2013-04-02T09:20:26.453
> 
> 标签：jquery, ajax

谁能给我一个如何使用该`contents`物业的例子？

```
$.ajax(
{
   contents : {...}
} 
```

jQuery 自己的文档仅说明了以下内容：

**内容**

`An object of string/regular-expression pairs that determine how jQuery will parse the response, given its content type`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:35:42.273

来自[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)：

> $.ajax() 转换器支持将数据类型映射到其他数据类型。但是，如果您想将自定义数据类型映射到已知类型（例如 json），则必须使用 content 选项在响应 Content-Type 和实际数据类型之间添加对应关系：

```
$.ajaxSetup({
  contents: {
    mycustomtype: /mycustomtype/
  },
  converters: {
    "mycustomtype json": function ( result ) {
      // do stuff
      return newresult;
    }
  }
}); 
```

所以，这意味着您的服务器响应的数据类型可能是`mycustomtype`. 当 AJAX 调用接收到数据时，它会看到它的数据类型是`mycustomtype`并且匹配我们设置的正则表达式（在*contents*中）：`/mycustomtype/`并将数据扔到我们指定的*转换器*中，例如。`mycustomtype json()`将尝试将数据转换为 json。

**详细说明*转换器***：

这`converters["mycustomtype json"]`意味着这里指定的函数将在您要转换`mycustomtype`为`json`格式时执行，因此该函数的内容将执行将返回的解析`JSON`。您可以指定其他转换类型，例如。

```
converters: {
    "mycustomtype json": converterFromCustomTypeToJson,      // mycustomtype -> json
    "mycustomtype jsonp": converterFromCustomTypeToJsonP,    // mycustomtype -> jsonp
    "mycustomtype text": converterFromCustomTypeToText,      // mycustomtype -> text 
    "text mycustomtype": converterFromTextToCustomType       // text -> mycustomtype 
} 
```

您将编写自己的*转换器*函数：

```
var converterFromCustomTypeToJson = function(result) {
        var jsonResult = ...
        /* do conversion to JSON */
        return jsonResult;
    },
    converterFromCustomTypeToJsonP = function(result) {
        var jsonPResult = ...
        /* do conversion to JSONP */
        return jsonPResult;
    },
    converterFromCustomTypeToText = function(result) {
        var textResult = ...
        /* do conversion to text */
        return textResult;
    },
    converterFromTextToCustomType = function(result) {
        var customResult = ...
        /* do conversion to mycustomtype */
        return customResult;
    }; 
```

您还希望避免弄乱默认转换器，它们是：

```
{
    "* text": window.String, 
    "text html": true, 
    "text json": jQuery.parseJSON, 
    "text xml": jQuery.parseXML
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T10:09:55.903

`contents`用于定义新的数据类型。jQuery 中定义了 4 种默认数据类型：xml、json、script 和 html。如果没有为 ajax 调用指定 dqataType，jQuery 将尝试根据响应的 MIME 类型来推断它。使用 定义新数据类型时`contents`，需要指定正则表达式，该表达式将用于从响应的 MIME 类型推断自定义数据类型。

例如，定义一个 CSV 数据类型，否则将被解析为文本：

```
$.ajaxSetup({
  // for: text/csv or application/csv
  contents: {
    csv: /csv/
  }
}); 
```

`contents`与转换器一起使用：

要将 csv 转换为 json，请定义一个自定义转换器：

```
$.ajaxSetup({
  contents: {
    csv: /csv/
  },
  converters: {
    "csv json": function (result) {
      // parse csv here
      return jsonresult;
    }
  }
}); 
```

# iphone - 在 NSFetchResultController 中设置 NSSortDescriptor 键的问题

> ID：15760425
> 
> 赞同：4
> 
> 时间：2013-04-02T09:20:35.757
> 
> 标签：iphone, ios, ipad, core-data, nsfetchedresultscontroller

![在此处输入图像描述](https://i.stack.imgur.com/I8w7d.png)

关于上面的关系图，早些时候，我在 Assignment 和 Question 实体之间有太多的关系，这被打破以解决问题排序问题。

现在，Assignment 与 Question 的关系是通过连接表 AssignmentQuestion。

这里的想法是根据 AssignmentQuestion 表的 questionOrderIndex 属性对问题进行排序。

我正在通过 NSFetchResultController 获取作业问题。我已经写了一个谓词来相应地获取问题。但由于我希望基于 questionOrderIndex 对问题进行排序，因此我通过问题实体的排序描述符的排序键是 assignmnetQuestion.questionOderIndex。

但是使用这个排序键，我得到一个异常：“Exception = to-many key not allowed here”。经过调查，我发现这是因为 Question 到 AssignmentQuestion 表的“一对多”关系。

我的问题是：

1）如何根据questionOrderIndex设置排序描述符的排序键？

2）我们真的需要在核心数据中有一个连接表来按顺序对问题进行排序吗？

**获取问题的谓词：**

```
NSString *predicateString = [NSString stringWithFormat:@"self.evaluationQuestion.assignmentEvaluation.assignmentId == %@", @"1"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:07:02.683

如果您不需要监听问题的更改（视图控制器外部），则可以取而代之的是获取 AssignmentQuestion 实体，并预获取附加的问题。稍后，在您的视图控制器中，使用它们的预取关系
而不是使用`AssignmentQuestion`实体`question`

```
//code not tested
NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"AssignmentQuestion"];
[request setPredicate:[NSPredicate predicateWithFormat:@"assignmentEvaluation.assignmentId == %@",assignmentId]];
[request setRelationshipKeyPathsForPrefetching:@[@"question"]];
[request setSortDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"questionOrderIndex" ascending:YES]]]; 
```

也[见这里](https://stackoverflow.com/questions/15768491/coredata-sort-items-by-index-in-categorys-set)

# mocking - 如何模拟 LightStreamer？

> ID：15760430
> 
> 赞同：2
> 
> 时间：2013-04-02T09:20:52.420
> 
> 标签：mocking, lightstreamer

我使用 LightStreamer（它是一个将广播消息从服务器发送到订阅的 javascript 客户端的软件）来获取事件以更新网页上的复杂数据视图。有很多不同的事件，附有不同的数据集。而且测试这个系统非常困难，因为我需要做很多工作来引发事件。

我想与后端分开测试网页，所以我想创建将发送到客户端预定义事件的“LightStreamer mock”。

最好和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:00:45.173

Pavel - 你`LightStreamer`应该有一些接口 - 这就是你可以模拟它的方式。

如果是这种情况——有一个接口——你可以使用一些模拟框架来让你更容易。

# android - 使用警报管理器调用服务类

> ID：15760435
> 
> 赞同：1
> 
> 时间：2013-04-02T09:21:09.180
> 
> 标签：android, android-service, android-alarms, android-broadcast

我开发了一个应用程序来监控每分钟后的网络状态.. 我正在使用服务组件来监控网络状态并将网络详细信息存储到数据库中。我正在使用 AlarmManager 类从广播接收器调用服务类.. ..我重复AlarmManager，以便在每分钟后调用服务类..但不幸的是，服务类并没有在每分钟后准确地被调用......相反，它被调用了一段时间，它会停止.. .我在这里附上了源代码....

请让我知道如何在每分钟后使用 AlarmMagerclass 在后台连续运行服务类...

提前致谢 .. ;-）

我的服务类

```
public class NetworkInfoService extends Service implements LocationListener{

    private String strNetworkInfo;
    private LocationManager locationManager;
    private NetworkDetailsVO networkDetailsVO = new NetworkDetailsVO();
    private NetworkInfoDatabaseHelper networkInfoDatabaseHelper;

    @Override
    public void onCreate() {
        super.onCreate();

        ConnectivityManager connectivityManager = (ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);
        TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);

        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

        if(networkInfo!=null && networkInfo.isConnected()){
            String networkState = getNetworkStateString(networkInfo.getState());
            String stateString = networkInfo.toString().replace(',', '\n');
            strNetworkInfo = String.format("Network Type: %s\n Network State: %s\n\n %s",
                    networkInfo.getTypeName(),networkState,stateString);
        }

        locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        /*locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 300f, this);*/

        telephonyManager.listen(new SignalStrengthDetector(), PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);

        networkDetailsVO.setNetworkInfo(strNetworkInfo);
        networkDetailsVO.setPhoneNumber(telephonyManager.getLine1Number());
        networkDetailsVO.setOperatorName(telephonyManager.getNetworkOperatorName());
        networkDetailsVO.setDateTime(new Date().toString());

        Log.i("Network DetailsFrom Service", networkInfo.toString());

        networkInfoDatabaseHelper = new NetworkInfoDatabaseHelper(getApplicationContext());
        networkInfoDatabaseHelper.saveRecord(networkDetailsVO);

    }

    @Override
    public void onStart(Intent intent, int startId) {

        ConnectivityManager connectivityManager = (ConnectivityManager) this.getSystemService(Context.CONNECTIVITY_SERVICE);
        TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);

        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

        if(networkInfo!=null && networkInfo.isConnected()){
            String networkState = getNetworkStateString(networkInfo.getState());
            String stateString = networkInfo.toString().replace(',', '\n');
            strNetworkInfo = String.format("Network Type: %s\n Network State: %s\n\n %s",
                    networkInfo.getTypeName(),networkState,stateString);
        }

        locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        /*locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 300f, this);*/

        telephonyManager.listen(new SignalStrengthDetector(), PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);

        networkDetailsVO.setNetworkInfo(strNetworkInfo);
        networkDetailsVO.setPhoneNumber(telephonyManager.getLine1Number());
        networkDetailsVO.setOperatorName(telephonyManager.getNetworkOperatorName());
        networkDetailsVO.setDateTime(new Date().toString());

        Log.i("Network DetailsFrom Service", networkInfo.toString());

        networkInfoDatabaseHelper = new NetworkInfoDatabaseHelper(getApplicationContext());
        networkInfoDatabaseHelper.saveRecord(networkDetailsVO);

    }

    /*
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        return Service.START_STICKY;
    }*/

    private String getNetworkStateString(NetworkInfo.State state){

        String stateString = "unknown";

        switch(state)
        {
        case CONNECTED: 
            stateString = "connected";             
            break;

        case CONNECTING:        
            stateString = "connecting";    
            break;

        case DISCONNECTED:      
            stateString = "disconnected";  
            break;

        case DISCONNECTING:     
            stateString = "disconnecting";  
            break;

        case SUSPENDED:         
            stateString = "suspended";              
            break;

        default: 
            stateString = "unknown";     

            break;

        }

        return stateString;
    }

    @Override
    public void onLocationChanged(Location location) {

        networkDetailsVO.setLatitude(location.getLatitude());
        networkDetailsVO.setLongitude(location.getLongitude());
        networkDetailsVO.setAccuracy(location.getAccuracy());
    }

    @Override
    public IBinder onBind(Intent intent) {

        return null;
    }

    @Override
    public void onProviderDisabled(String string) {

    }

    @Override
    public void onProviderEnabled(String provider) {

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 1, this);
    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {

    }

    private class SignalStrengthDetector extends PhoneStateListener{

        @Override
        public void onSignalStrengthsChanged(SignalStrength signalStrength) {
            super.onSignalStrengthsChanged(signalStrength);
            networkDetailsVO.setSignalStrength(signalStrength.getGsmSignalStrength());
        }

    }

} 
```

我的广播接收器类（它已注册为 android.intent.action.BOOT_COMPLETED 意图）

```
public class NetworkInfoListner extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        PendingIntent service = null; 
        Intent intentForService = new Intent(context.getApplicationContext(), NetworkInfoService.class);
        final AlarmManager alarmManager = (AlarmManager) context
                        .getSystemService(Context.ALARM_SERVICE);
        final Calendar time = Calendar.getInstance();
        time.set(Calendar.MINUTE, 0);
        time.set(Calendar.SECOND, 0);
        time.set(Calendar.MILLISECOND, 0);
        if (service == null) {
         service = PendingIntent.getService(context, 0,
                            intentForService,    PendingIntent.FLAG_CANCEL_CURRENT);
                }

                alarmManager.setRepeating(AlarmManager.RTC, time.getTime()
                        .getTime(), 60000, service);

    } 
```

我的清单文件

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.networkinfodemo_v_03"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17" />

        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
        <uses-permission android:name="android.permission.READ_PHONE_STATE" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
        <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.example.networkinfodemo_v_03.activity.NetworkInfoActivity"
                android:configChanges="orientation|keyboardHidden|screenSize"
                android:label="@string/app_name"
                android:theme="@style/FullscreenTheme" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <service android:name="com.example.networkinfodemo_v_03.service.NetworkInfoService" android:enabled="true">
            </service>

            <receiver android:name="com.example.networkinfodemo_v_03.broadcastreceiver.NetworkInfoListner" >
                <intent-filter>
                    <action android:name="android.intent.action.BOOT_COMPLETED" />
                </intent-filter>
            </receiver>
        </application>
     </manifest> 
```

请让我知道是什么错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:41:49.397

尝试这个

```
Calendar cal = Calendar.getInstance();   
cal.add(Calendar.SECOND, 60);

service.setInexactRepeating(AlarmManager.RTC_WAKEUP,
        cal.getTimeInMillis(), 60000, pending); 
```

# java - Google App Engine 投影查询返回 0 个结果

> ID：15760437
> 
> 赞同：4
> 
> 时间：2013-04-02T09:21:15.867
> 
> 标签：java, google-app-engine, projection, objectify

我正在尝试执行投影查询，以便从我的一万多个实体的数据存储中的每个实体中获取多个属性。我已阅读并遵循[文档](https://developers.google.com/appengine/docs/java/datastore/projectionqueries)，但我的查询没有返回任何结果。我什至将我的投影简化为仅投影一个属性，即实体的 ID 字段，但仍然得到 0 个结果。这是我的简化代码：

```
Query q = new Query("MyEntity");
q.addProjection(new PropertyProjection("entityId", Long.class));
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
PreparedQuery pq = datastore.prepare(q);
int count = pq.countEntities(FetchOptions.Builder.withLimit(1000));
log.info("query contains " + count + " items."); 
```

当我运行此代码时，`count`等于 0。如果我只是删除第二行以使查询没有投影，则`count`等于 1000。

我在我的应用程序中使用[Objectify](https://code.google.com/p/objectify-appengine/)，但我使用 GAE 低级 API 进行投影查询，因为我使用的是 Objectify v3，它不支持投影查询。更改我的代码以支持 Objectify v4 需要做很多工作。

我投影的`entityId`字段在我的 Objectify 实体对象中如下所示：

```
@Id Long entityId; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:12:52.177

所以事实证明，我只投影 ID 属性的简化案例是问题所在。当我在任何其他属性字段上测试相同的代码时，投影查询有效。

创建投影查询时，不应投影 ID 属性。它仍然包含在结果实体中，但将其包含在投影中会导致查询没有结果。ID 属性的存储方式与实体中其他属性字段的存储方式不同。

# ios - 在 UICollectionView 中隐藏搜索栏

> ID：15760438
> 
> 赞同：4
> 
> 时间：2013-04-02T09:21:16.240
> 
> 标签：ios, objective-c, ipad, uicollectionview, uicollectionviewcell

我在 UICollectionView 的 SectionHeader 单元格中添加了一个搜索栏。

目前我正在通过向上移动 Y 偏移来隐藏视图。

```
[self.collectionView setContentOffset:CGPointMake(0, 44)]; 
```

当我的偏移高度大于我的视图时，这非常有效。（垂直滚动条）但是当单元格适合我的视图时，搜索栏仍然可见。（没有垂直滚动条）

任何想法？

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T18:57:52.400

我所做的是子类 UICollectionViewFlowLayout 并覆盖该方法：

```
- (CGSize)collectionViewContentSize {
    CGSize size = [super collectionViewContentSize];

    // add viewHeight to allow enough room for view to be hidden
    if (size.height < self.collectionView.frame.size.height + viewHeight) {
        size.height = self.collectionView.frame.size.height + viewHeight;
    }

    return size;
} 
```

这确实意味着当内容的大小小于您的 collectionView 的边界时，人们可以在您的 collectionView 上滚动一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T02:26:18.890

听起来您可能只需要在您的 collectionView 上设置[alwaysBounceVertical:YES 。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/cl/UIScrollView)

# python - Python中的照应解析

> ID：15760440
> 
> 赞同：5
> 
> 时间：2013-04-02T09:21:18.243
> 
> 标签：python, linux, nlp

我想在与文本挖掘相关的项目中使用照应解析。我在 Linux 平台上做这个项目，我正在使用 Python。我在网上搜索过，但没有合适的工具包可以在 Python 中执行回指解析。请建议一些可以这样做的工具包。

我想找到代词的名词。例如

> 乔伊正在吃午饭。他太饿了。

我希望将下一句中的“He”替换为“Joey”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:34:24.830

查看[NLTK-DRT](http://nltk.org/_modules/nltk/sem/drt.html#resolve_anaphora)的文档。

# sql - 如何从 SQL 中的不同日期减去值？

> ID：15760441
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:21:20.103
> 
> 标签：sql, max, min

假设我正在使用以下名为 TestTable 的 SQL 表：

```
Date       Value1      Value2     Value3 ... Name
2013/01/01    1           4         7        Name1
2013/01/14    6           10        8        Name1
2013/02/23    10          32        9        Name1 
```

而且我想获得日期之间的值的增量，例如：

```
Value1Inc  Value2Inc Value3Inc Name
4          22        1         Name1 
```

`2013/02/23`和之间`2013/01/14`。

请注意，这些值总是递增的。我正在尝试在 StackOverflow 中找到以下方法：

```
select (
(select value1 from TestTable where date < '2013/01/14') -
(select value1 from TestTable where date < '2013/02/23')
) as Value1Inc,

(select value2 from TestTable where date < '2013/01/14') -
(select value2 from TestTable where date < '2013/02/23')
as Value2Inc
... 
```

等等，但这种方法给了我一个巨大的疑问。

我想使用 MAX 和 MIN SQL 函数来简化查询，但我不知道该怎么做，因为我不是 SQL 大师（至少：-）。

请大家帮我看看好吗？

编辑：Ups，我认为我自己通过在查询末尾添加“GROUP BY Name”找到了解决方案，如下所示：

select name,max(value1) - min(value1) from TestTable where date < '2013-02-23' and date > '2013-01-01' GROUP BY Name

就是这样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:06:03.110

您想使用联接匹配下一条记录。可能最简单的方法是枚举并加入：

```
with tt as (
      select tt.*, row_number() over (partition by name order by date) as seqnum
      from testtable tt
     )
select tt.name, tt.date, ttnext.date as nextdate,
       (ttnext.value1 - tt.value1) as Diff_Value1,
       (ttnext.value2 - tt.value2) as Diff_Value2,
       (ttnext.value3 - tt.value3) as Diff_Value2
from tt left outer join
     tt ttnext
     on tt.seqnum = ttnext.seqnum - 1; 
```

如果您的数据库不支持`row_number()`，您可以对相关子查询执行类似的操作。

# windows - 有没有像 OnNavigatedTo 这样的其他方法？

> ID：15760442
> 
> 赞同：0
> 
> 时间：2013-04-02T09:21:21.337
> 
> 标签：windows, windows-phone-7, navigation

我正在使用 OnNavigatedTo 在页面之间导航时传递值，我正在获取 OnNavigatedTo 中的值。

这工作正常，现在问题是，

对于示例，我有屏幕 A、B 和 C。当我将数据从 A 发送到 B 时，我可以在 B 中收集数据。所以 B 具有 OnNavigatedTo 方法，当我从 B 导航到 C 并返回到 B 时 OnNavigatedTo 被调用一次当我回到屏幕 B 时。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:43:35.967

在屏幕 B 的 OnNavigatedTo 处理程序中，您可以检查导航是向后导航还是新导航

```
if (e.NavigationMode != System.Windows.Navigation.NavigationMode.Back)
{
    //Navigation is not backwards
    //Your code
} 
```

# android - 如何在android中解析dns？

> ID：15760443
> 
> 赞同：0
> 
> 时间：2013-04-02T09:21:26.087
> 
> 标签：android, c++, dns, android-ndk

我正在使用 Android NDK 和一个与 JNI 包装器链接的 C++ 项目来构建我的 android 应用程序。C++ 项目由几个基本功能组成，其中之一是 DNS 查找。我正在使用`ares_gethostbyname`API 来解析 DNS。但是有一个错误，Android 的 DNS 查找失败。但在其他平台上它工作正常。我找不到可能的原因。我已经检查了从应用程序传递的地址。这是正确的。但它无法解析DNS。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-21T05:27:43.157

是的，它不适用于 UDP-Blocked 环境。根本原因是，DNS 解析是通过使用 gethostbyname() 中的 UDP 端口完成的。尽管有记录表明 getaddrinfo() 可用于使用 udp 和 tcp 端口解析 dns 名称。但我不确定它在 UDP 阻塞环境中是否有效。虽然你可以尝试使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:27:26.847

解决了。在 UDP-BLOCKED 环境中无法在 android dns 中查找。

# iphone - 如何延迟 MPMoviePlayer 中的视频流

> ID：15760445
> 
> 赞同：0
> 
> 时间：2013-04-02T09:21:33.650
> 
> 标签：iphone, ios, video, mpmovieplayercontroller, mpmovieplayer

我正在 MPMoviePlayer 中从 url 播放视频流。当我单击播放按钮时，Json

解析发生，视频在缓冲区后播放。所有视频都是 30 多岁。之后

第一个缓冲视频播放 5-6 秒，然后停止。然后再次缓冲并播放。它继续

直到第30秒。所以观众受到了很大的干扰。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:29:02.157

一个捷径就是你出去

```
sleep(4); 
```

在播放播放器之前

~谢谢你

# java - log4j.xml 日志记录在 spring 控制器中不起作用？

> ID：15760446
> 
> 赞同：2
> 
> 时间：2013-04-02T09:21:39.923
> 
> 标签：java, spring, logging, spring-mvc, log4j

我已将`log4j.xml`.`WEB-INF/classes/log4j.xml`

我`log4j.xml`的是，

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- <!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" > -->

    <appender name="fileAppender" class="org.apache.log4j.RollingFileAppender">
        <param name="Threshold" value="INFO" />
        <param name="MaxFileSize" value="512KB" />
        <param name="MaxBackupIndex" value="10" />
        <param name="File" value="F:/Spring_logs/pointel_Aop.log" />
        <!-- <param name="File" value="${webapp.root}/WEB-INF/logs/helloworld.log" /> -->
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p %c{1}:%L %m %n" />
        </layout>
    </appender>

    <!--sets the priority log level for org.springframework -->
    <logger name="org.springframework">
        <level value="info" />
    </logger>

    <!--sets the priority log level for com.pointel.EM.controllers -->
    <logger name="com.pointel.EM.controllers">
        <level value="debug" />
    </logger>

    <!--sets the default priority log level -->
    <root>
        <priority value="info"></priority>
        <appender-ref ref="fileAppender" />
    </root>

</log4j:configuration> 
```

在我的`web.xml`,

```
 <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/classes/log4j.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener> 
```

在我的`controller`,

```
@Controller
public class PageController {

    Logger logger = Logger.getLogger(PageController.class);

    @RequestMapping(value="index.html" , method=RequestMethod.GET)
    public String indexPage(){
        //logger.log(Level.DEBUG,"Entered in the GET of index.html");
        logger.trace("Trace..............");
        logger.debug("Debug...............");

        System.out.println("Index Page............");
        return "Main";
    }
} 
```

日志文件将在`log4j.xml`. 但是日志信息不会打印在日志文件中。

在创建的日志文件中，

```
2013-04-02 14:36:32,945 INFO  DispatcherServlet:301 FrameworkServlet 'dispatcher': initialization started 
2013-04-02 14:36:32,976 INFO  XmlWebApplicationContext:456 Refreshing WebApplicationContext for namespace 'dispatcher-servlet': startup date [Tue Apr 02 14:36:32 GMT+05:30 2013]; root of context hierarchy 
2013-04-02 14:36:33,023 INFO  XmlBeanDefinitionReader:315 Loading XML bean definitions from ServletContext resource [/WEB-INF/dispatcher-servlet.xml] 
2013-04-02 14:36:33,367 INFO  DefaultListableBeanFactory:549 Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@171f189: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0,org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,pageController,viewResolver,messageSource]; root of factory hierarchy 
2013-04-02 14:36:33,445 INFO  DefaultAnnotationHandlerMapping:411 Mapped URL path [/index.html] onto handler [com.pointel.EM.controllers.PageController@11db6bb] 
2013-04-02 14:36:33,445 INFO  DefaultAnnotationHandlerMapping:411 Mapped URL path [/Main.jsp] onto handler [com.pointel.EM.controllers.PageController@11db6bb] 
2013-04-02 14:36:33,445 INFO  DefaultAnnotationHandlerMapping:411 Mapped URL path [/addEmployee.html] onto handler [com.pointel.EM.controllers.PageController@11db6bb] 
2013-04-02 14:36:33,445 INFO  DefaultAnnotationHandlerMapping:411 Mapped URL path [/listEmployees.html] onto handler [com.pointel.EM.controllers.PageController@11db6bb] 
2013-04-02 14:36:33,476 INFO  Version:56 Hibernate Validator 4.0.2.GA 
2013-04-02 14:36:33,476 INFO  DefaultTraversableResolver:89 Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver. 
2013-04-02 14:36:33,632 INFO  DispatcherServlet:320 FrameworkServlet 'dispatcher': initialization completed in 687 ms 
```

`Index page ........`将在控制台打印以确认控制器的条目。

任何人都可以帮助打印日志文件中的日志信息。

好的答案绝对值得赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:33:33.207

也许您的控制器的设置没有被应用：

```
<!--sets the priority log level for com.pointel.EM.controllers -->
<logger name="com.pointel.EM.controllers">
    <level value="debug" />
</logger> 
```

查看是否将调用从更改`debug`为`info`输出。

```
@RequestMapping(value="index.html" , method=RequestMethod.GET)
public String indexPage(){
    logger.info("Info..............");

    System.out.println("Index Page............");
    return "Main";
} 
```

# android - 在traceview中Incl CPU Time，Excl CPU Time，Incl Real CPU Time，Excl Real CPU Time是什么意思？

> ID：15760447
> 
> 赞同：31
> 
> 时间：2013-04-02T09:21:40.887
> 
> 标签：android, cpu-usage, android-traceview

1) 独占时间是在方法中花费的时间 2) 包含时间是在方法中花费的时间加上在任何被调用函数中花费的时间 3) 我们将调用方法称为“父”，将被调用方法称为“子”。参考链接：[点这里](http://developer.android.com/tools/debugging/debugging-tracing.html)

这里的问题是：

有什么区别

*   包括 CPU 时间和包括实际 CPU 时间？
*   不包括 CPU 时间和不包括实际 CPU 时间？

在我的 Method1() 示例跟踪文件中：Incl CPU Time = 242 msec & Incl Real CPU Time = 5012 msec

*   我无法确定上述两次 5012-242 = 4770 毫秒差距背后的原因。

如果您有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-07-27T21:36:46.450

[这是 DDMS 文档](http://developer.android.com/tools/debugging/debugging-tracing.html#profilepanel)

**包含 CPU 时间**是包含的 CPU 时间。它是函数本身*所*用时间的总和，也是*它调用的所有函数*的时间总和。

**Excl CPU time**是独占 cpu 时间。它只是花在*函数本身上*的时间。您会注意到它始终与“self”孩子的“incl time”相同。

该文档没有阐明**CPU time**和**real time**之间的区别，但我同意 Neetesh 的观点，即 CPU time 是函数实际运行的时间（这不包括等待 IO），而 real time 是挂钟时间（这将包括花在做 IO 上的时间）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T04:00:48.230

cpu time是进程使用cpu的时间，cpu real time是从进程开始到进程结束的总时间，它包括进程执行的等待时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-01T10:03:24.790

从.trace的源码可以看到cpu时间细节和真实cpu时间不同，和android文档的描述一样：CPU时间只考虑线程主动使用CPU时间的时间，真实的time 提供从你的应用程序进入一个方法的那一刻到它退出该方法的绝对时间信息——不管线程是活动的还是休眠的。

# windows-8 - 在 Windows 8/商店应用程序中禁用触摸反馈（通过代码）？

> ID：15760450
> 
> 赞同：3
> 
> 时间：2013-04-02T09:21:48.187
> 
> 标签：windows-8, configuration, windows-store-apps, tap

这就是我所说的：

![在此处输入图像描述](https://i.stack.imgur.com/Eweus.png)

我知道这个视觉指示是[操作系统的一部分，](https://stackoverflow.com/questions/12979585/tap-visual-white-circle-indicator-windows-8)可以[在控制面板中禁用](http://answers.microsoft.com/en-us/windows/forum/windows_8-hardware/how-do-i-turn-off-pen-feedback-in-windows-8/4cbfb07b-6d19-4e86-b7fe-ae97dff3e0e2)。但是，我想知道是否可以在一个应用程序中禁用此定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:26:31.520

[感谢Raymond Chen](https://stackoverflow.com/users/902497/raymond-chen)提供的建议，我能够找到解决方案。只需在您的应用程序入口点添加这一行：

```
PointerVisualizationSettings.GetForCurrentView().IsContactFeedbackEnabled = false; 
```

# linux - shell脚本中的递归问题

> ID：15760451
> 
> 赞同：0
> 
> 时间：2013-04-02T09:21:48.980
> 
> 标签：linux, bash, shell, sh

```
function syncfile(){
                echo "[ DONE $file ]"
        return ;
}
function syncfolder(){

        folder=$1
        for foo in `ls -1 $folder`
        do

                file="$folder/$foo"

                        if [ -d $file ];then
                                syncfolder $file
                        elif [ -e $file ];then
                                syncfile $file
                        else
                                echo "$file is neither file nor directory"
                        fi
        done
        return;
} 
```

以上是我的两个递归函数..当我调用 `syncfolder $foldername`它时，在以下情况下没有给出正确的输出..

假设层次结构如下

```
portchanges/
portchanges/script/script1/script1.sh
portchanges/script/script1/script2.sh
portchanges/script/script1/script3.sh

portchanges/script/script4.sh
portchanges/script/script5.sh

portchanges/script6.sh
portchanges/script7.sh

portchanges/appl/script11/script11.sh
portchanges/appl/script11/script12.sh
portchanges/appl/script11/script13.sh 
```

现在如果`foldername=portchanges` 我打电话`syncfolder $foldername`

它只处理

```
portchanges/script/script1/script1.sh
portchanges/script/script1/script2.sh
portchanges/script/script1/script3.sh 
```

用`function syncfile()`函数调用......然后它转到函数`return`。`syncfolder`

它将搜索`script6.sh`并`script7.sh`在`portchanges/script/script1/`目录中！这是完全不正当的行为！！

我应该怎么做它对整个文件夹进行递归处理，并且每个文件都可以`syncfile()`正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T09:45:21.037

`folder`将变量声明为`local`。您不希望递归调用更改调用者变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:48:27.093

以下是在我的情况下工作。如果要打印目录名称，请将其传递给syncfile。

```
function syncfolder(){
        syncfile $1
        local folder=$1
        for foo in `ls -1 $folder`
        do

                file="$folder/$foo"

                        if [ -d $file ];then
                                syncfolder $file
                        elif [ -e $file ];then
                                syncfile $file
                        else
                                echo "$file is neither file nor directory"
                        fi
        done
        return;
} 
```

# knockout.js - 自定义控件不适用于剔除“with”绑定

> ID：15760454
> 
> 赞同：0
> 
> 时间：2013-04-02T09:21:55.040
> 
> 标签：knockout.js, custom-controls, knockout-2.0, knockout-mvc

我是淘汰赛的新手。我的要求是将自定义控件放置在使用“with”绑定的 div 中。下面是我正在使用的代码，

```
<div id="test" data-bind="with:testTemp">

     --------  I have placed my custom control here ---------

   --------- I am binding value to this custom control using "value" binding----

</div> 
```

在脚本中，

```
function ViewModel() {

    this.testTemp= ko.observable();
    this.testTemp({
        price : 6.6
    });  
} 
```

现在值 6.6 已绑定到自定义控件，但该控件似乎无法正常工作。自定义控件不过是编辑器百分比 texbox，我无法增加/减少值。它似乎仅在我使用“with”绑定绑定 div 时发生。在父 div 中没有“with”绑定的情况下工作正常。所以，谁能告诉我上面的代码出了什么问题。为什么我的自定义控件无法使用“with”绑定与 div 一起使用。我需要在编码中添加任何内容吗？

感谢您的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:11:31.907

```
<div id="test" data-bind="with:testTemp">
    <span data-bind="text : $data.price"></span>
</div> 
```

javascript

```
function ViewModel() {
    this.testTemp= ko.observable();
    this.testTemp({
        price : 6.6
    });  
}
ko.applyBindings(new ViewModel()) 
```

[JSFiddle](http://jsfiddle.net/e2pfn/)

# matlab - 如何回报？

> ID：15760456
> 
> 赞同：0
> 
> 时间：2013-04-02T09:22:08.017
> 
> 标签：matlab, matlab-deployment

实际上，我正在编写一个 Matlab 模拟，其中 AnchorID 和 SourceID 将相互报告。例如，如果我采用锚点 30 和源 50，它将收集这些锚点和源之间的所有 agc 值并计算 rssi_dB 并显示它们。下面提到的是锚点 30 和源 id 50 的示例

注意：锚点 ID 和源 ID 的列表是相同的。例如 30 50 55 58 。这些 ID 对于锚点和源都是相同的。

```
function A30(BlinkSet)
for i=1:length(BlinkSet)

      xAnchorID=30;
      xSourceID=50;
      a=BlinkSet{i}.AnchorID;
      b=BlinkSet{i}.SourceID;
      if xAnchorID==a && xSourceID==b
      xagc=BlinkSet{i}.agc;
      rssi_dB(i)=-(33+xagc*(89-33)/(29-1));
      end
  end
     rssi_dB(rssi_dB==0)=[];
     rssi_dBm=sum(rssi_dB(:))/length(rssi_dB);
     disp([sprintf('The rssi value is %0.0f',rssi_dBm)]); 
```

当我在 Matlab 命令窗口中调用该函数时，我得到了上述函数的 rssi 值。

另外，我的任务是，当我将 Anchor ID 和源 ID 说 Anchor 为 50，源 ID 为 30 时，就像我在下面提到的函数一样，我得到一个错误，它在下面的函数之后提到。

```
function A50(BlinkSet)
for i=1:length(BlinkSet)

   xAnchorID=50;
   xSourceID=30;
   a=BlinkSet{i}.AnchorID;
   b=BlinkSet{i}.SourceID;
   if xAnchorID==a && xSourceID==b
   xagc=BlinkSet{i}.agc;
   rssi_dB(i)=-(33+xagc*(89-33)/(29-1));
   end

end
rssi_dB(rssi_dB==0)=[];
   rssi_dBm=sum(rssi_dB(:))/length(rssi_dB);
disp([sprintf('The rssi value is %0.0f',rssi_dBm)]); 
```

当我调用这个函数时，我得到一个错误

```
??? Undefined function or variable "rssi_dB".

 Error in ==> A50 at 14
 rssi_dB(rssi_dB==0)=[];

 Error in ==> main_reduced at 26
 A50(BlinkSet); 
```

在主要功能中，我这样编码，

```
 %A30(BlinkSet);
 A50(BlinkSet); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:52:32.417

在这两个函数中，`rssi_dB`如果执行进入`if`循环中的语句（即，如果`xAnchorID==a && xSourceID==b`在某个点为真），您只创建变量。显然，此代码永远不会在您的`A50`函数中执行。在不知道其中有什么的情况下，`BlinkSet`很难诊断出确切的问题，但这至少是原因。

附带说明：当它们的代码几乎相同时，创建两个单独的函数来完成这项工作并不是一个好主意。您应该向您的函数添加一个输入参数，以允许它完成两者的工作。在这种特殊情况下，所有变化都是 and 的值`xAnchorID`，`xSourceID`因此您可以将这些传入：

```
function srcToAnchorRssi(BlinkSet, xSourceID, xAnchorID)
    % The rest of the function stays the same! 
```

如果你想为这些参数提供一些默认值，你可以这样做，例如：

```
if nargin < 3 || isempty(xAnchorID), xAnchorID = 50; end
if nargin < 2 || isempty(xSourceID), xSourceID = 30; end 
```

`isempty`包含此类 in 语句总是一个好主意，以便您的函数支持类似`myFunction(myArg1, [], myArg3)`. 另请注意，操作数的顺序`||`至关重要；如果你这样做了`if isempty(theArgument) || nargin < theArgumentNumber`并且用户没有通过`theArgument`，那么它会出错，`isempty`因为它`theArgument`不会作为局部变量存在。我们可以通过交换操作数的顺序来解决这个问题，因为 MATLAB 足够聪明，知道如果左操作数是，它不必计算右操作数`true`（请注意，在许多其他编程语言中也是如此）。

# python - Python中对象名称的奇怪错误

> ID：15760457
> 
> 赞同：2
> 
> 时间：2013-04-02T09:22:08.980
> 
> 标签：python, runtime-error

我正在从[这个网页](http://woodpecker.org.cn/abyteofpython_cn/chinese/ch11s06.html)学习Python （它是中文的，请只关注代码。）我想在Windows 7上使用Python 2.7.3自己练习代码。但是我发现对象名称有一个非常奇怪的错误. 代码如下：

```
class Person:
    '''Represents a person.'''
    population = 0

    def __init__(self, name):
        '''Initializes the person\'s data.'''
        self.name = name
        print '(Initializing %s)' % self.name

        # When this person is created, he/she
        # adds to the population
        Person.population += 1

    def __del__(self):
        '''I am dying.'''
        print '%s says bye.' % self.name

        Person.population -= 1

        if Person.population == 0:
            print 'I am the last one.'
        else:
            print 'There are still %d people left.' % Person.population

    def sayHi(self):
        '''Greeting by the person.
       Really, that\'s all it does.'''
        print 'Hi, my name is %s.' % self.name

    def howMany(self):
        '''Prints the current population.'''
        if Person.population == 1:
            print 'I am the only person here.'
        else:
            print 'We have %d persons here.' % Person.population

David = Person('David')
David.sayHi()
David.howMany()

kalam = Person('Abdul Kalam')
kalam.sayHi()
kalam.howMany()

David.sayHi()
David.howMany() 
```

运行这些代码时，我收到了这个错误报告（最后两行）。但是当我用“Swaroop”或其他名称替换对象变量“David”时，代码可以正常工作！我不知道这是怎么发生的。

```
(Initializing David)
Hi, my name is David.
I am the only person here.
(Initializing Abdul Kalam)
Hi, my name is Abdul Kalam.
We have 2 persons here.
Hi, my name is David.
We have 2 persons here.
Abdul Kalam says bye.
There are still 1 people left.
David says bye.
Exception AttributeError: "'NoneType' object has no attribute 'population'" in <bound method Person.
__del__ of <__main__.Person instance at 0x00000000026D91C8>> ignored 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:34:13.273

`__del__()`在解释器关闭期间调用该方法时会出现异常。不能保证此时任何东西都可用，在您的情况下，看起来`Person`变量已经被破坏了。您应该忽略此问题或停止使用`__del__()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:34:29.637

我能找到的唯一解释来自[`__del__`文档](http://docs.python.org/2/reference/datamodel.html#object.__del__)（在警告块中）：

> 由于`__del__()`调用方法的情况不稳定，在执行期间发生的异常将被忽略，`sys.stderr`而是打印警告。**此外，当`__del__()`响应于模块被删除而被调用**时（例如，当程序执行完成时），**该方法引用的其他全局变量`__del__()`可能已经被删除或正在被拆除**（例如，导入机器关闭）。

为了验证这一点，我`print globals()`在`__del__`方法中添加了一个：

*   第一次调用：`Person`出现在具有适当类对象的全局变量中

    ```
    {'kalam': None, '__builtins__': <module '__builtin__' (built-in)>, '__package__': None, 'Person': <class __main__.Person at 0x00000000021D7168>, '__name__': '__main__', 'David': <__main__.Person instance at 0x00000000022B0748>, '__doc__': None} 
    ```

*   第二次调用：`Person`仍然出现，但现在有一个`None`值

    ```
    {'kalam': None, '__builtins__': <module '__builtin__' (built-in)>, '__package__': None, 'Person': None, '__name__': None, 'David': None, '__doc__': None} 
    ```

**现在，为什么更改变量名`David` *会*改变这种行为？**

破坏的顺序可能是确定性的，但没有记录规则：我们处于“定义实现”的领域。在这种情况下，在我的特定 Python 解释器上，重命名`David`为`A`确实会改变销毁顺序，并且`Person`类对象最后被销毁。

这本身不是一个修复，它只是一个奇怪的副作用：你不能合理地依赖破坏顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:36:02.670

`__del__`显示不被调用的示例：

```
class Referencer(object):
    def __init__(self, name):
        self.name = name

    def __del__(self):
        print("__del__ {}".format(self.name))

foo = Referencer('foo')
bar = Referencer('bar')
baz = Referencer('baz')
foo.x = bar
bar.x = foo

del foo
del bar
del baz 
```

你会期望这样的输出：

```
__del__ foo
__del__ bar
__del__ baz 
```

你得到（至少使用 Python 2.7）：

```
__del__ baz 
```

# ios - Objective C 访问其他类的变量值

> ID：15760459
> 
> 赞同：0
> 
> 时间：2013-04-02T09:22:12.467
> 
> 标签：ios, objective-c

我有两个课，主题课和章节课。

我`NSMutable`在主题类中分配了一个数组，例如

```
@property(nonatomic,retain)NSMutableArray *htmlURL; 
```

在 .m 文件中：

```
htmlURL = [[NSMutableArray alloc]init];
[htmlURL addObject:@"1", @"2"]; 
```

在Chapter Class我这样做了，

```
Subject *sub = [[Subject alloc] init];
NSLog(@"%@"sub.htmlURL); 
```

输出为空......我想要章节类中的 htmlurl 数组值......我在这里缺少什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:28:00.897

你必须连接这两个类！！！！

您正在创建两个不同的对象，然后尝试访问另一个对象中一个对象成员的值。做这个。

当您从学科班来到章节班时，您可能正在推动或展示章节班。

```
//in Subject Class, while creating Chapter class

Chapter* newClass = [Chapter alloc] init];
newClass.parentObject = self;
//code for transitioning to chapter controller

// in Chapter Class, create a parent object
@property (nonatomic, assign) Subject* parentObject; 
```

或者，如果**SUBJECT 是一个广义的公共类**，

然后你可以创建一个方法来返回它的一个公共实例。像这样的东西，

```
+ (Subject *) sharedInstance
{
    @synchronized([Subject class]) {
        if (!instance) {
            instance = [[Subject alloc] init];
        }
    }    
    return instance;
} 
```

然后访问主题类成员，

```
Subject *sub = [Subject sharedInstance];
NSLog(@"%@"sub.htmlURL); 
```

# c# - ASP 验证器不工作？

> ID：15760461
> 
> 赞同：0
> 
> 时间：2013-04-02T09:22:18.373
> 
> 标签：c#, asp.net, validation, postback, requiredfieldvalidator

我很尴尬地发布这个，因为我很确定我错过了一些非常简单的东西，而且这肯定不是我第一次使用 asp 验证器。我有以下验证器控件：

```
<asp:RequiredFieldValidator runat="server" ControlToValidate="txtTitle" EnableClientScript="false" ErrorMessage="*" ValidationGroup="groupUpdateAL" />

<asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="txtAbbr" EnableClientScript="false" ErrorMessage="*" ValidationGroup="groupUpdateAL" />

<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="ddlColour" EnableClientScript="false" ValidationGroup="groupUpdateAL" ErrorMessage="*" />

<asp:Button ID="btnSave" runat="server" Text="Save" ValidationGroup="groupUpdateAL" CausesValidation="true" /><br /> 
```

出于某种原因，如果将控件留空，则会出现以下错误：

```
Length cannot be less than zero.
Parameter name: length 
```

似乎验证控件没有捕获无效输入。

**我试过的：**

我怀疑可能是客户端验证拦截了回发，这就是为什么您现在可以看到 EnableClientScript 设置为 false 的原因。没用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:33:46.113

尝试在 btnSave 的 onclick 事件中测试页面有效性：

```
if(Page.IsValid)
{
    //Do your stuff
}
else
{
    Response.Write("error");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-01T20:31:39.640

验证在此图像上的 c# 文件 avalilabel 的新屏幕上 plzz 单击此图像 [在此处输入图像描述](https://i.stack.imgur.com/t5R6I.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-12-01T20:14:44.220

1.  创建数据库以获取查询字符串
2.  在 Visual Studio 中创建连接文件

    ![在此处输入图像描述](https://i.stack.imgur.com/aRCM4.png)

# typescript - 为什么 Typescript 使用关键字“export”来公开类和接口？

> ID：15760462
> 
> 赞同：147
> 
> 时间：2013-04-02T09:22:20.543
> 
> 标签：typescript, module, public, access-modifiers

在涉足 Typescript 时，我意识到我在模块中的类（用作命名空间）对其他类不可用，除非我`export`在它们之前写了关键字，例如：

```
module some.namespace.here
{
   export class SomeClass{..}
} 
```

所以现在我可以像这样使用上面的代码：

```
var someVar = new some.namespace.here.SomeClass(); 
```

但是我只是想知道为什么使用这个关键字而不是仅使用`public`在方法级别使用的关键字来表示方法或属性应该是外部可访问的。那么为什么不直接使用相同的机制来使类和接口等外部可见呢？

这将产生如下代码：

```
module some.namespace.here
{
   public class SomeClass{..}
} 
```

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2013-04-02T10:00:07.930

主要原因是`export`与 ECMAScript 的计划相匹配。您可能会争辩说“他们应该使用”export”而不是“public”，但除了“export/private/protected”是一组匹配不佳的访问修饰符之外，我相信两者之间存在细微的差异可以解释这一点.

在 TypeScript 中，将类成员标记为`public`或`private`对生成的 JavaScript 没有影响。它只是一个设计/编译时工具，你可以使用它来阻止你的 TypeScript 代码访问它不应该访问的东西。

使用`export`关键字，JavaScript 添加一行以将导出的项目添加到模块中。在您的示例中：`here.SomeClass = SomeClass;`.

因此从概念上讲，可见性由工具控制`public`并且`private`仅用于工具，而`export`关键字会更改输出。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-04-02T14:56:33.677

史蒂夫芬顿的回答有几点要补充：

*   `export` *已经*意味着两种不同的东西（取决于它是否在顶级）；让它意味着三分之一可能比添加`public`/`private`
*   绝对不是为了让实现更容易；`public`vs增加的复杂性`export`是微不足道的。我们已经更改了很多关键字；这并不难。
*   类成员的默认可见性*必须*是 public 以符合 ES6 类提案，因此我们需要一些关键字来表示“不公开”。`export`( `unexport`??)没有合适的反义词，因此`private`是合乎逻辑的选择。一旦你有了，不选择作为它的对手`private`会有点疯狂。`public`
*   使用`export`修改内部模块的可见性是与 ES6 模块的最佳对齐方式

# struts2 - Struts2 日期时间选择器大小

> ID：15760463
> 
> 赞同：2
> 
> 时间：2013-04-02T09:22:21.777
> 
> 标签：struts2, datetimepicker, dojo

我想增加日历视图的大小，因为默认大小对于我的 Web 应用程序来说太小了。我尝试将 cssClass 添加到 datetimepicker 标记，但它不起作用，即使我更改宽度或高度，它唯一改变的是字段，而不是日历本身。

我会放一张图片，以便您更好地理解我遇到的问题：

![日期时间选择器问题](https://i.stack.imgur.com/CKqIc.png)

问题是字段中的文本被正确查看，但是当我单击日历按钮时，它显示的视图很小，而且很难选择一个日期。

datetimepicker 的代码是这样的：

```
<sx:datetimepicker name="start_date" displayFormat="dd-MMM-yyyy" value="%{'today'}" /> 
```

有什么猜测吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:05:59.337

好的，终于解决了：

首先我试图找到`datefilepicker.ftl`里面命名的文件，`struts2-core.jar`但我没有找到任何类似的东西。因此，在几个小时试图找到哪个是 datetimepicker 的正确模板但没有任何运气之后，我尝试使用 JQuery 解决我的问题，因为当我搜索答案时，我发现了一个使用这个库的[datepicker 教程。](http://jqueryui.com/datepicker/)

有一个名为[Struts2-JQuery](http://code.google.com/p/struts2-jquery/)的插件，它为您提供 ajax 功能，因此可以在不同的小部件中进行多种自定义。

它很容易安装，我只需要下载正确的 .jar，对我来说它是 3.5.1 版（jQuery 1.8.3，jQuery UI 1.9.2）。下载文件后，我只需将其粘贴到项目内的 lib 文件夹中即可。之后，我在 .jsp 文件的开头添加了这一行：

```
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%> 
```

通过这些步骤，我的 .jsp 文件中有 jquery 功能，所以剩下要做的就是添加 datepicker 小部件：

首先，我为我的小部件选择了我想要的 jquerytheme，就像这样：

```
<head>
<sj:head jquerytheme="flick"/>
...
</head> 
```

然后，我添加了我的 datepicker 小部件：

```
<sj:datepicker name="start_date" displayFormat="dd-MM-yy" value="today"/> 
```

就是这样。

如果您想调整日期选择器日历的大小，请参阅这篇文章的答案：

[如何调整 jQuery DatePicker 控件的大小](https://stackoverflow.com/questions/659588/how-to-resize-the-jquery-datepicker-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:42:56.000

```
<sx:datetimepicker name="start_date" displayFormat="dd-MMM-yyyy" value="%{'today'}" /> 
```

它是一个dojo标签，所以你应该改变这个标签对应的模板文件

**Freemarker 更改** 检查您工作区中的 datetimepicker.ftl 之类的内容。那将是呈现您的日历的文件。任何与演示相关的更改都将仅在该文件中完成。

**使用 firebug 进行调试** 另一种方法是在 Mozilla firefox 中使用 firebug 并手动尝试更改标签呈现的 html。您的问题可能有一些 CSS 解决方案

# php - 在页面上发布帖子的代码会出错

> ID：15760471
> 
> 赞同：1
> 
> 时间：2013-04-02T09:22:50.467
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

以下是我的代码：

```
 <?php
        try {
            $attachment = array(
                'message' => $_POST['message']
            );
            $result = $facebook->api('/$pageid/feed', 'POST', $attachment);
            var_dump($result);
        } catch(FacebookApiException $e) {
            var_dump($e->getType());
            var_dump($e->getMessage());
        }
    ?> 
```

我收到以下错误：“OAuthException” string(78) “(#368) 尝试的操作被视为滥用或以其他方式被禁止”。这里有什么问题？我尝试使用 facebook 的图形 API 资源管理器发布，使用相同的访问令牌并且发布成功。尽管发布了任何消息，但仍会显示错误。

编辑：我认为这个问题是由于我在这篇文章中描述的原因引起的：[OAuthException (#368) 尝试的操作已被视为滥用或被禁止](https://stackoverflow.com/questions/11372890/oauthexception-368-the-action-attempted-has-been-deemed-abusive-or-is-otherwi/15827225#15827225)，但我还不确定。

# sql - SQL UPDATE 在设置之前读取列值

> ID：15760479
> 
> 赞同：5
> 
> 时间：2013-04-02T09:23:15.130
> 
> 标签：sql, sql-update, standards, semantics

我在 SO 和 google 上都搜索过这些信息，但没有找到任何权威的答案。

当您有如下更新语句时：

```
UPDATE table SET rowA = rowB, rowB = NULL ... 
```

看起来：

*   排序不重要 ( `UPDATE table SET rowB = NULL, rowA = rowB`)
*   尽管如此，结果是 rowA 获取 rowB 中的 prev 值，因为 UPDATE 似乎首先读取先前的值，然后更新它们。

我想知道上述两点对于 SQL 是否*普遍*适用，即它们是否是*SQL UPDATE 语义*的一部分，它们是否在*标准*中，或者它是否是一个实现细节（因此可能会发生变化）。谢谢！

> 编辑：让我强调我想要一个“权威”的答案；我已经对一些 SQL 实现进行了测试，这些行为确实是这里描述的行为。我需要的是一个“证明”，证明这实际上是在 SQL 标准/规范/UPDATE 的语义中，并带有指向该标准的链接，或者是一个代理可靠来源（MSDN、dev.mysql.com、Oracle 或 PostgreSQL文档，...）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T07:28:09.997

[James R. Groff、Paul N. Weinberg：SQL The complete reference (Osborne 1999)](http://sirpabs.ilahas.com/ebooks/Computer%20&%20Technology/Database%20Mgmt/SQL%20The%20complete%20reference.pdf)，第 209 页指出

*开始报价*

如果赋值列表中的表达式引用目标表的列之一，则用于计算表达式的值 **是应用任何更新之前**当前行中该列的值。WHERE 子句中出现的列引用也是如此。例如，考虑这个（有点做作的）UPDATE 语句：

```
UPDATE OFFICES
 SET QUOTA = 400000.00, SALES = QUOTA
WHERE QUOTA < 400000.00 
```

更新前，比尔亚当斯的`QUOTA`身价为 350,000 美元，`SALES`身价为 367,911 美元。更新后，他的行的`SALES`价值是 350,000 美元，而不是 400,000 美元。因此 SET 子句中的赋值顺序无关紧要；可以按任何顺序指定分配。

*结束报价*

ANSI-92 SQL 标准 (X3H2-93-004) 草案的第 13.9 章第 6 项第 393 页支持相同，可在[此处](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)找到。

这是迄今为止最独立的实现，也是我能得到的最接近的。

X3H2-93-004 的其他来源可以在[这里](http://www.inf.fu-berlin.de/lehre/SS05/19517-V/FolienEtc/sql-foundation-aug94.pdf)找到，例如（第 590 页，第 15 项）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:40:01.497

这是标准行为。当您引用一行时，您指的是更新前的版本。

`output`在 SQL Server 中，可以使用子句将两个行版本可视化

```
update  YourTable
set     col1 = col1 + 1
output  deleted.col1   -- Pre-update version of row
,       inserted.col1  -- Post-update version of row 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:29:24.660

`update`来自（[http://www.postgresql.org/docs/8.3/static/sql-update.html](http://www.postgresql.org/docs/8.3/static/sql-update.html)）的postgeSQL文档

> ***表达式***
> 要分配给列的表达式。表达式可以使用表中此列和其他列的旧值。

# android - 如何在android中的relativelayout中获取视图坐标

> ID：15760481
> 
> 赞同：2
> 
> 时间：2013-04-02T09:23:27.750
> 
> 标签：android, coordinates, android-relativelayout

我想获得位于 a 内的视图位置`RelativeLayout` ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:54:51.163

您可以使用[getLocationOnScreen](http://developer.android.com/reference/android/view/View.html#getLocationOnScreen%28int%5B%5D%29)方法来检测屏幕上视图和布局的位置。然后只计算相对坐标。

# php - php减去两个不同日期的日期返回错误的结果

> ID：15760484
> 
> 赞同：1
> 
> 时间：2013-04-02T09:23:32.503
> 
> 标签：php, strtotime

我正在尝试使用 php 减去两个日期。Dateone 存储在数据库中，而 datetwo 是当前日期。现在，我有这个奇怪的场景： Dateone 是 23-03-13 日期二是 02-04-13

使用不同的减法方法，给出不同的结果。

**方法一 - 返回 -21**

```
$sqldate ="SELECT exam_date FROM exam_table";
$fetchdate = mysql_query($sqldate);
$rowdate = mysql_fetch_array($fetchdate);
//Fetch the date stored in the database
$dateone = $rowdate['exam_date'];
//Calculate the current date today
$datetwo =date('d-m-y');
//Calculate the diff between the two dates
$datediff = $datetwo-$dateone; 
```

在这种情况下，$datediff 返回 -21

**方法二 - 返回 -7639**

```
$sqldate ="SELECT exam_date FROM exam_table";
$fetchdate = mysql_query($sqldate);
$rowdate = mysql_fetch_array($fetchdate);
//Fetch the date stored in the database
$dateone = $rowdate['exam_date'];
//Calculate the current date
$datetwo =date('d-m-y');
//Calculate the diff between the two dates
$datetime1 = strtotime("$dateone");
$datetime2 = strtotime("$datetwo");
//seconds between the two times
$secs = $datetime2 - $datetime1;
$days = $secs / 86400; 
```

在这种情况下，$days 返回 -7639

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:28:13.453

为什么不把它全部放在 SQL 中呢？

```
"SELECT time_to_sec(datediff(`exam_date`, curdate())) as datedifference FROM exam_table"; 
```

在 PHP 中只有这个：

```
fetch_assoc { $datediff = $row['datedifference']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:28:32.763

试试这个

```
echo $dateone = '02-04-13';
echo $datetwo = '06-04-13';
echo $datediff = $datetwo-$dateone; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:33:30.557

**SQL Query 将是理想的选择**

```
SELECT DATEDIFF(exam_date,CURDATE()) AS DiffDate FROM exam_table 
```

**PHP**

```
$dateone = $rowdate['DiffDate']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:40:27.163

为什么不使用`DateTime::diff`？来源： http: [//php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

```
$datediff = $datetwo->diff($dateone);
echo $datediff; 
```

这种差异将是时代的。您需要将其转换为您想要的格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T09:48:46.053

是的，问题是因为您的日期格式不是标准的以获得差异。您需要告知您当前的格式并将其转换为标准格式以获得正确的差异。

```
$datetime1 = DateTime::createFromFormat('d-m-Y', '23-03-13'); #In you case it is considering 13-03-2023
$datetime1->format('d-m-YY');
$datetime2 = DateTime::createFromFormat('d-m-Y', '02-04-13'); #In you case it is considering 13-04-2002
$datetime2->format('d-m-YY');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); #output +10 days 
```

[CodeViper 演示。](http://codepad.viper-7.com/ckWUxa)

**注意：** PHP 版本应 >= 5.3.0。

# c++ - 在 Windows 服务的通知栏中显示图标？

> ID：15760486
> 
> 赞同：2
> 
> 时间：2013-04-02T09:23:33.643
> 
> 标签：c++, visual-studio, service, notifications, icons

我正在使用本网站的代码创建基本服务 [http://code.msdn.microsoft.com/windowsdesktop/CppWindowsService-cacf4948](http://code.msdn.microsoft.com/windowsdesktop/CppWindowsService-cacf4948)

我希望此服务在工具栏中显示为图标。我可以从图标启动和停止服务吗？

现在我必须进入 SCM 来启动和停止服务，向下滚动列表并找到服务然后启动或停止它需要很长时间。

一些网站说这无法完成，因为您无法与服务交互，这是真的吗？

我不在乎这是一个坏主意还是不应该这样做。我只是想知道代码是否可以这样做，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:55:02.217

我收到了“**请避免在评论中进行扩展讨论**”消息，所以我提出了这个答案。

编写一个图标托盘应用程序；[此链接](http://www.codeproject.com/Articles/74/Adding-Icons-to-the-System-Tray)提供了如何执行此操作的示例（另请参阅文章右侧的“相关文章”）。

当您（右键）单击托盘图标时，图标托盘应用程序应确定服务是否已在运行；如果是，则弹出菜单项停止服务，否则弹出菜单项启动服务。

这个 StackOverflow[问题](https://stackoverflow.com/questions/6126443/programmatically-restart-a-windows-service)的答案提供了如何使用 Windows API 管理服务的指针。

# ios - UITableView 显示数据失败

> ID：15760488
> 
> 赞同：0
> 
> 时间：2013-04-02T09:23:39.193
> 
> 标签：ios, uitableview, storyboard

我有一个 UITableView 必须填充存储在数组中的内容。我在 NSLog 中显示了数组，结果很好，但在 uitableview 中不可见。问题是程序没有进入**cellForRowAtIndexPath**方法。我不确定我应该在这个问题中添加哪些代码以使其更容易理解，所以请向我询问代码。

```
#import "SubList.h"
#import "SubListParser.h"
#import "LoginParser.h"

@implementation SubList
@synthesize theXML1,FolderID,UserID;
NSString *loginUserId;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
  self.FolderID=FolderID ;
    self.UserID=UserID;
}
return self;
}

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
 }

- (void)viewDidLoad
{
[super viewDidLoad];
[self initWithData];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for       this view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

-(void)initWithData{
//[self GetChilds:FolderID UserID:loginUserId];
}

-(void)GetUserLoginId:(NSString *)UserIdReceved{
loginUserId=UserIdReceved;

 }

-(void)GetChilds:(NSString*)FolderIDRecvd UserID:(NSString*)userID{

NSString *_FolderID=FolderIDRecvd;
NSString *_UserID=loginUserId;
//?? what to do here? aa gye bhai yha pe folder id nad user id?  try out now ok

 // NSLog(@"hi yaar response toh aa rha ha that mean s values toh ha hmare pass haan storyboard ka koi laucha hai ny yaar do min de dekhta hu",FolderIDRecvd,loginUserId);

   NSString *soapMsg=[NSString stringWithFormat:@"<?xml version='1.0' encoding='utf-8'?><soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'><soap:Body><TreeDataSubFolder xmlns='http://tempuri.org/'><FolderID>%@</FolderID><UserId>%@</UserId></TreeDataSubFolder></soap:Body></soap:Envelope>",_FolderID,_UserID];

NSLog(@"%@",soapMsg);
NSURL *url=[NSURL URLWithString:@"http://192.168.1.5/interlogicsmobile/interlogics.asmx?op=TreeDataSubFolder"];
xmlparser1 = [[NSXMLParser alloc] initWithContentsOfURL:url];
NSMutableURLRequest *req=[NSMutableURLRequest requestWithURL:url];
NSString *msgLength=[NSString stringWithFormat:@"%d",[soapMsg length]];
NSLog(@"Message Length=%@",msgLength);
[req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[req addValue:@"http://tempuri.org/TreeDataSubFolder" forHTTPHeaderField:@"SOAPAction"];
[req addValue:@"length" forHTTPHeaderField:@"Content-Length"];
[req setHTTPMethod:@"POST"];
[req setHTTPBody: [soapMsg dataUsingEncoding:NSUTF8StringEncoding]];
//[activityIndicator startAnimating];

conn1=[[NSURLConnection alloc]initWithRequest:req delegate:self];

if(conn1){
    webdata1=[NSMutableData data] ;
}
}

-(void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *) response {
NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response; 
int responseStausCode = [httpResponse statusCode]; 
NSLog(@"code: %d", responseStausCode);
[webdata1 setLength: 0];    

 }

 -(void) connection:(NSURLConnection *) connection didReceiveData:(NSData *) data {
[webdata1 appendData:data];
 }
 -(void) connection:(NSURLConnection *) connection didFailWithError:(NSError *) error {

 }
 -(void) connectionDidFinishLoading:(NSURLConnection *) connection {
NSLog(@"DONE. Received Bytes: %d", [webdata1 length]);
theXML1 = [[NSString alloc] 
           initWithBytes: [webdata1 mutableBytes] 
           length:[webdata1 length] 
           encoding:NSUTF8StringEncoding];
//---shows the XML---

//NSLog(@"%@",theXML1);

SubListParser *parserObjForData1=[[SubListParser alloc]init];
SubFolderData=[[NSMutableArray alloc]init];

SubFolderData=[parserObjForData1 UserXMLParser1:webdata1];

[SublistSet reloadData];
 }

 - (void)viewDidUnload
{

[SublistSet reloadData];
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
 }

 - (void)viewWillAppear:(BOOL)animated
 {
[SublistSet reloadData];
[super viewWillAppear:animated];
 }

 - (void)viewDidAppear:(BOOL)animated
 {
[super viewDidAppear:animated];
 }

- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
 {
[super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

// Return the number of sections.
return 1;
 }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

// Return the number of rows in the section.
return [SubFolderData count]/2;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
NSLog(@"*******************called tablevied did load*********************");
int row = [indexPath row]*2;

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
  }

for (int i=0; i<=[SubFolderData count]/2; i++) {

    NSString *filename = [SubFolderData objectAtIndex:row];
    NSString *ext = [filename pathExtension];
    if ([ext isEqualToString:@"doc"] || [ext isEqualToString:@"DOC"]) {
        [cell.imageView setImage:[UIImage imageNamed:@"DOC.png"]];
    } else if ([ext isEqualToString:@"jpg"]|| [ext isEqualToString:@"JPG"]) {
        [cell.imageView setImage:[UIImage imageNamed:@"JPG.png"]];
    }else if([ext isEqualToString:@"pdf"]|| [ext isEqualToString:@"PDF"]){
        [cell.imageView setImage:[UIImage imageNamed:@"PDF.png"]];
    }else if([ext isEqualToString:@""]){
        [cell.imageView setImage:[UIImage imageNamed:@"Folder2.png"]];
    }else if([ext isEqualToString:@"docx"]|| [ext isEqualToString:@"DOCX"]){
        [cell.imageView setImage:[UIImage imageNamed:@"DOCX.png"]];
    }else if([ext isEqualToString:@"TIF"]|| [ext isEqualToString:@"tif"]){
        [cell.imageView setImage:[UIImage imageNamed:@"TIFF.png"]];
    }else if([ext isEqualToString:@"png"]|| [ext isEqualToString:@"PNG"]){
        [cell.imageView setImage:[UIImage imageNamed:@"PNG.png"]];
    }else if([ext isEqualToString:@"gif"]|| [ext isEqualToString:@"GIF"]){
        [cell.imageView setImage:[UIImage imageNamed:@"GIF.png"]];
    }else if([ext isEqualToString:@"jpeg"]|| [ext isEqualToString:@"JPEG"]){
        [cell.imageView setImage:[UIImage imageNamed:@"JPG.png"]];
    }
}

// Configure the cell...
cell.textLabel.text=[SubFolderData objectAtIndex:row];
cell.detailTextLabel.text =[SubFolderData objectAtIndex:row+1];

cell.textLabel.numberOfLines = 0;
cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;

return cell;
}

/*
// Override to support conditional editing of the table view.

 @end 
```

# c# - 为什么没有在 IEnumerable 中分配值？

> ID：15760494
> 
> 赞同：0
> 
> 时间：2013-04-02T09:24:06.803
> 
> 标签：c#, linq-to-xml

我解析一些数据

```
var result = xml.Descendants("record").Select(x => new F130Account
    {
        Account = x.Descendants("Account").First().Value,
    }); 
```

然后我尝试一些更新

```
foreach (var item in result)
    item.Quantity = 1; 
```

在这之后我`result.Sum(a => a.Quantity)`是零......为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T09:27:48.510

那是因为`result`每次开始枚举时都会再次评估您的集合，因此`Sum`在新的`F130Account`对象集上运行，然后`foreach`循环不同。这就是 LINQ 及其惰性的工作方式。

将结果初始化为`List<F130Account>`first：

```
var result = xml.Descendants("record").Select(x => new F130Account
    {
        Account = x.Descendants("Account").First().Value,
    }).ToList(); 
```

之后，两者都`foreach`将`Sum`在同一个对象集合上运行。

# c# - 类中不明确的调用函数

> ID：15760497
> 
> 赞同：1
> 
> 时间：2013-04-02T09:24:09.743
> 
> 标签：c#, class, function, call, ambiguous

如何四处走动？我不想拥有不同名称的函数。

```
public class DataRowSafe
{

    public String Get(String Column)
    {
        return String.Empty;
    }

    public int Get(String Column)
    {
        return 0;
    }
}

    DataRowSafe r=new DataRowSafe();
    String res=r.Get("Column1");
    int res2=r.Get("Column2");//<--- Ambiguous call 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T09:25:25.903

方法的重载要求您的类似名称的方法具有不同的签名。返回值是微不足道的！在这里查看[本](http://www.dotnetperls.com/overload)教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:25:57.883

你不能，没有办法，唯一的办法就是有一个不同的签名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T09:32:41.923

您可以像这样引用参数吗

```
public class DataRowSafe
{

    public void Get(String Column, ref string myParam)
    {
        myParam = String.Empty;
    }

    public void Get(String Column,ref int myParam)
    {
        myParam = 0;
    }
}

int i = 0;
string st = "";
new DataRowSafe().Get("name", ref i);
new DataRowSafe().Get("name", ref st); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T09:33:31.690

你应该得到一个错误，比如

> “DataRowSafe”已经定义了一个名为“Get”的成员，具有相同的参数类型

函数的返回类型并不重要，但在这种情况下，编译器会混淆可用于调用的两种方法，并且不确定要选择哪种方法，也许您可​​以使用泛型来克服这个问题

像这样的样本

```
public static T GetValue<T>(string column)
{    
    string returnvalue="";
    //process the data ...
    return (T)Convert.ChangeType(returnvalue, typeof(T), CultureInfo.InvariantCulture);  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T12:53:55.637

这是不可能的，因为重载仅适用于不同的签名。如果签名相同，则 c# 编译器将返回错误。

# javascript - 预加载图像会超出最大调用堆栈大小，但仅在 android 上

> ID：15760500
> 
> 赞同：0
> 
> 时间：2013-04-02T09:24:20.957
> 
> 标签：javascript, android, html, mobile-application, preloading

我有一个 html5 应用程序，它在启动时加载一些数据，并且在加载完之后，用户可以浏览这些数据。与每个数据对象相关联的是一个图像，一个 png 文件。这将在带宽有限的移动设备上运行良好。当用户浏览数据时，会显示图像，用户体验是图像的显示延迟，因为从服务器加载这些图像需要一些时间。

所以，我想预加载图像，以便在用户浏览数据时立即显示它们。因此，我有一个循环遍历所有数据并为每个图像执行这段代码：

```
 preloadImage: function(url)
    {
        if(url)
        {
            // preload image
            if (document.images) {
                var img1 = new Image();
                img1.src = url;
            }
        }
    } 
```

这是一种相当直接的方法。

我有几百张图片要加载。这在大多数情况下都很有效。

**问题**

当我在装有 Android 4.1.2 的三星 Galaxy SIII 上进行测试时，我得到了

```
"RangeError: Maximum call stack size exceeded". 
```

我在大约 20-30 个 preloadImage 调用后得到了这个。我的猜测是，Android html/javascript 引擎对一次可能挂起的异步调用数量存在某种限制。

我在 PC（IE9、Chrome、Firefox）和任何 Apple 设备上都没有这个问题。

这个问题的任何启示，提示或解决方案？

# java - java xml将节点转换为元素

> ID：15760502
> 
> 赞同：13
> 
> 时间：2013-04-02T09:24:27.400
> 
> 标签：java, xml, xml-parsing

我知道这被问了很多次，但我仍然无法让它工作。我将 xml 字符串转换为 Document 对象，然后解析它。这是代码：

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.*;

DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder;
try
{
  builder = factory.newDocumentBuilder();  
  Document document = builder.parse( new InputSource( new StringReader( result ) ) );
  Node head = document.getFirstChild();
  if(head != null)
  {                  
    NodeList airportList = head.getChildNodes();      
    for(int i=0; i<airportList.getLength(); i++) {
    Node n = airportList.item(i);                        
    Element airportElem = (Element)n;
  }
}
catch (Exception e) {
  e.printStackTrace();
} 
```

当我将 Node 对象 n 转换为 Element 时，我得到一个异常 java.lang.ClassCastException：org.apache.harmony.xml.dom.TextImpl 不能转换为 org.w3c.dom.Element。当我检查 Node 对象的节点类型时，它显示 Node.TEXT_NODE。我相信它应该是 Node.ELEMENT_NODE。我对吗？

那么如何将 Node 转换为 Element，这样我就可以执行 element.getAttribute("attrName") 之类的操作。

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8" ?> 
<ArrayOfCity xmlns:xsd="http://www.w3.org/2001/XMLSchema"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
<City>
  <strName>Abu Dhabi</strName> 
  <strCode>AUH</strCode> 
</City>
<City>
  <strName>Amsterdam</strName> 
  <strCode>AMS</strCode> 
</City>
<City>
  <strName>Antalya</strName> 
  <strCode>AYT</strCode> 
</City>
<City>
  <strName>Bangkok</strName> 
  <strCode>BKK</strCode> 
</City>
</ArrayOfCity> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-02T09:27:44.813

我认为你需要这样的东西：

```
NodeList airportList = head.getChildNodes();
for (int i = 0; i < airportList.getLength(); i++) {
    Node n = airportList.item(i);
    if (n.getNodeType() == Node.ELEMENT_NODE) {
        Element elem = (Element) n;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-02T09:26:12.063

> 当我将 Node 对象 n 转换为 Element 时，我得到一个异常 java.lang.ClassCastException：org.apache.harmony.xml.dom.TextImpl 不能转换为 org.w3c.dom.Element。当我检查 Node 对象的节点类型时，它显示 Node.TEXT_NODE。我相信它应该是 Node.ELEMENT_NODE。我对吗？

可能不是，解析器可能是对的。这意味着您正在解析的某些节点是[**文本节点**](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1312295772)。例如：

```
<foo>bar</foo> 
```

在上面，我们有一个`foo`包含文本节点的元素。（文本节点包含文本`"bar"`。）

同样，考虑：

```
<foo>
    <bar>baz</bar>
</foo> 
```

如果您的 XML 文档**看起来**像上面那样，它包含一个`foo`带有这些子节点的根元素（按顺序）：

*   一个带有一些空格的文本节点
*   一个`bar`元素
*   一个包含更多空格的文本节点

请注意，该`bar`元素不是 的第一个子元素`foo`。如果它看起来像这样：

```
<foo><bar>baz</bar></foo> 
```

*那么*该`bar`元素将是 的第一个子元素`foo`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-02T09:30:33.050

您也可以尝试“保护”您的选角

```
Node n = airportList.item(i);
if (n instanceof Element)
{                        
    Element airportElem = (Element)n;
    // ...
} 
```

但是正如其他人所指出的那样，您有文本节点，这些节点不会被这种方法强制转换，请确保您不需要它们使用条件来使用不同的代码来处理它们

# python - 已安装模块上的“找不到 Python 模块”错误

> ID：15760504
> 
> 赞同：1
> 
> 时间：2013-04-02T09:24:28.270
> 
> 标签：python, scrapy, mysql-python

我在安装了 MAMP 服务器的 Mac 10.6.8 上。我已经在 Python 2.6 下安装了 Scrapy 和 MySQLdb 模块

当我从 python 命令行或另一个项目中导入 MySQLdb 模块时，我没有看到任何错误并且它按预期工作。但是，当我在 Scrapy 项目中导入 MySQLdb 模块时，出现导入错误（“ImportError：没有名为 MySQLdb 的模块”）。

我不是 Python 专家，这种行为是非常出乎意料的。为什么会这样？如何解决这个问题？

```
$ which python
/opt/local/bin/python (which is a symlink to "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/bin/python2.6") 
```

* * *

```
$ which scrapy
/usr/local/bin/scrapy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:37:37.673

您安装了多个 Python 实例（例如，一个是 OS X 内置的，另一个来自 MAMP）。检查这些模块是否实际安装在 MAMP Python 2.6 中（查看它们所在的站点包目录）。

如果您使用内置 Python 中的 easy_install 安装了一个模块，您将无法从其他 Python 实例中使用它。

PS 为什么要使用 MAMP？Mac OS X 已经拥有您需要的所有组件（Apache、MySQL、Python）。

# vb.net - 如何在 VB.Net 中有效地使用多线程

> ID：15760510
> 
> 赞同：0
> 
> 时间：2013-04-02T09:24:35.427
> 
> 标签：vb.net, multithreading, image-processing

我正在 VB.Net 中编写一个带有 WPF GUI 的工具，它可以处理大量图像文件。为了加快这件事的速度并观察当前的处理图像，我想开始使用线程。
我有几个文件夹，其中又包含几个文件夹，其中包含多个文件。我可以为每个图像将一个新线程排队到 ThreadPool，还是启动一个处理文件夹/子文件夹的线程更有效？
我的第一个想法是启动两个 BackgroundWokers 并让每个处理一半的顶级文件夹。但是如果我只有一个顶级文件夹并且我只能对已经处理了多少张图像给出一个不好的估计，这不是很聪明。
您对如何在 VB.Net 中使用哪种类型的线程有任何一般提示吗？我找不到关于效率和场景的合适的东西。
提前致谢！

# java - 黑莓 MapField

> ID：15760516
> 
> 赞同：0
> 
> 时间：2013-04-02T09:24:56.230
> 
> 标签：java, blackberry, blackberry-maps

***使用 BlackBerry MapField 的问题***

这是我用于显示地图的代码：

```
class MapScreen extends FullScreen
{
    public MapScreen() 
    {
        super( FullScreen.DEFAULT_CLOSE | FullScreen.DEFAULT_MENU );
        MapField map = new MapField();
        MapAction action = map.getAction();
        action.setCentreAndZoom(new MapPoint(40, -40), 3);   
        add(map);
    }
} 
```

但只有地图图块出现在屏幕上。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:52:17.120

尝试这个 -

```
MapField mMapField;
Coordinates mCoordinates;
mCoordinates = new Coordinates( -25.900461, 28.135085, 0);
mMapField = new MapField();
mMapField.moveTo(mCoordinates);
add(mMapField); 
```

# android - Google Maps API v2 - 我的显示器上只有白色地图图块

> ID：15760522
> 
> 赞同：0
> 
> 时间：2013-04-02T09:25:13.653
> 
> 标签：android, google-maps, google-maps-api-2

我的谷歌地图有问题：没有地图出现，只有这样的白色地图图块：http: [//oi47.tinypic.com/2uh0sk0.jpg](http://oi47.tinypic.com/2uh0sk0.jpg)

我试图生成一个新的 API 密钥，但它仍然不起作用，我不明白为什么......

这里是logcat：

```
04-02 11:04:07.459: W/dalvikvm(32502): VFY: unable to resolve virtual method 3693: Lcom/fullwipe/bolognacityguide/Mapexample;.getFragmentManager ()Landroid/app/FragmentManager;
04-02 11:04:07.499: W/dalvikvm(32502): VFY: unable to resolve instance field 23
04-02 11:04:07.859: W/dalvikvm(32502): Unable to resolve superclass of Lmaps/p/s; (425)
04-02 11:04:07.859: W/dalvikvm(32502): Link of class 'Lmaps/p/s;' failed
04-02 11:04:07.859: W/dalvikvm(32502): Unable to resolve superclass of Lmaps/y/bo; (3818)
04-02 11:04:07.859: W/dalvikvm(32502): Link of class 'Lmaps/y/bo;' failed
04-02 11:04:07.859: W/dalvikvm(32502): Unable to resolve superclass of Lmaps/i/k; (4206)
04-02 11:04:07.859: W/dalvikvm(32502): Link of class 'Lmaps/i/k;' failed
04-02 11:04:07.859: E/dalvikvm(32502): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
04-02 11:04:07.859: W/dalvikvm(32502): VFY: unable to resolve new-instance 3538 (Lmaps/i/k;) in Lmaps/z/ag;
04-02 11:04:09.449: E/Adreno200-ES20(32502): **** 32547: glUseProgram(0)
04-02 11:04:10.109: E/Adreno200-EGLSUB(32502): Enter: GetBackBuffer(), surface: 0x2ca458, bufid: 0
04-02 11:04:10.109: E/Adreno200-EGLSUB(32502): Return: GetBackBuffer(), TRUE
04-02 11:04:10.119: E/Adreno200-EGLSUB(32502): Enter: GetBackBuffer(), surface: 0x2ca458, bufid: 1
04-02 11:04:10.119: E/Adreno200-EGLSUB(32502): Return: GetBackBuffer(), TRUE
04-02 11:04:11.869: E/Adreno200-EGLSUB(32502): Enter: GetBackBuffer(), surface: 0x2ca458, bufid: 0
04-02 11:04:11.949: E/Adreno200-EGLSUB(32502): Return: GetBackBuffer(), TRUE
04-02 11:04:11.979: E/Adreno200-EGLSUB(32502): Enter: GetBackBuffer(), surface: 0x2ca458, bufid: 1
04-02 11:04:11.999: E/Adreno200-EGLSUB(32502): Return: GetBackBuffer(), TRUE
04-02 11:04:12.069: E/Adreno200-EGLSUB(32502): Enter: GetBackBuffer(), surface: 0x2ca458, bufid: 0
04-02 11:04:12.089: E/Adreno200-EGLSUB(32502): Return: GetBackBuffer(), TRUE
04-02 11:04:12.199: E/Adreno200-EGLSUB(32502): Enter: GetBackBuffer(), surface: 0x2ca458, bufid: 1
04-02 11:04:12.199: E/Adreno200-EGLSUB(32502): Return: GetBackBuffer(), TRUE
04-02 11:04:12.239: E/Adreno200-EGLSUB(32502): Enter: GetBackBuffer(), surface: 0x2ca458, bufid: 0
04-02 11:04:12.249: E/Adreno200-EGLSUB(32502): Return: GetBackBuffer(), TRUE
04-02 11:04:12.279: E/Adreno200-EGLSUB(32502): Enter: GetBackBuffer(), surface: 0x2ca458, bufid: 1
04-02 11:04:12.299: E/Adreno200-EGLSUB(32502): Return: GetBackBuffer(), TRUE 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="9"
                android:targetSdkVersion="16" />
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.CAMERA" />
  <uses-feature android:name="android.hardware.camera" 
                android:required="false"/>
  <uses-feature android:name="android.hardware.camera.any"
                android:required="false" />

  <permission android:name="com.kurtis.myapp.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
  <uses-permission android:name="com.kurtis.myapp.permission.MAPS_RECEIVE"/>
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
  <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  <uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>

    <application
        android:icon="@drawable/icona"
        android:label="@string/app_name" >
        <activity
            android:name="com.kurtis.myapp.Home"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.kurtis.myapp.Mapexample"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:screenOrientation="portrait" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaXXXXXXXXXXXXXXXXXXXXXXXXXq9M" />
    </application>

</manifest> 
```

活动：

```
package com.kurtis.myapp;

import com.example.android.R;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.SupportMapFragment;

import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

@SuppressLint("NewApi")
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class Mapexample extends FragmentActivity {
    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mapexample);

        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);

    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                // The Map is verified. It is now safe to manipulate the map.

            }
        }
    }
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/map"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 class="com.google.android.gms.maps.SupportMapFragment"/> 
```

你有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:38:13.917

您在 android 清单文件中的包名称有问题：

检查这个：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android"
    android:versionCode="1"
    android:versionName="1.0" > 
```

和

```
<permission android:name="com.kurtis.myapp.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
  <uses-permission android:name="com.kurtis.myapp.permission.MAPS_RECEIVE"/> 
```

将其更正为相同。

您已经添加了不同的权限，`MAPS_RECEIVE`然后它如何接收地图？将其更改为

```
<permission android:name="com.example.android.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
      <uses-permission android:name="com.example.android.permission.MAPS_RECEIVE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T00:40:49.733

在 Google API 控制台中，确保您已打开“Google Maps Android API v2”服务，而不仅仅是“Google Maps API v2”服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:11:44.730

当您生成 API 密钥时，请确保您也在 DEBUG 模式下这样做。
我想，这就是你问题的根本原因。

您将需要两个单独的密钥；一个用于 DEV（在模拟器等中使用的未签名应用程序）
和一个用于 LIVE（在签署您的应用程序时使用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:41:28.740

1.  `:com.kurtis.myapp`你在 Manifest 中的包名不应该是`com.example.android`

2.  尝试`class="com.google.android.gms.maps.MapFragment"`在您的布局中使用

3.  在您的主要活动中使用 Activity 而不是 FragmentActivity 并替换
    `mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);`

    有了这个：

    `mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)) .getMap(); mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);`

希望这有帮助

# python - wx.StaticBitmap - 简单的透明度（遮罩、png、bmp？）

> ID：15760525
> 
> 赞同：2
> 
> 时间：2013-04-02T09:25:26.170
> 
> 标签：python, python-2.7, wxpython, png

经过 1 周的不断失败后，我仍然无法完成一项简单的任务：加载一个带有 alpha 通道或白色背景的 png（在下面的示例中），并让它在 wx.StaticBitmap 中保持其透明度。

稍后我需要在 wx.panel 中使用它。它应该保持这样或类似的状态。

这是我的方法之一（白色背景）：

```
def __init__(self, parent):
    wx.Panel.__init__(self, parent)
    self.loc = wx.Image("intro/image.png",wx.BITMAP_TYPE_PNG).ConvertToBitmap()
    z = wx.Mask(self.loc, wx.WHITE) 
    self.loc.SetMask(z) 
    self.locopic = wx.StaticBitmap(self, -1, self.loc, (0, 0)) 
```

我读了很多关于这个话题的文章。我很垃圾。对不起。我想我在这里错过了一些明显的东西。[wx.Mask](http://wxpython.org/docs/api/wx.Mask-class.html) ,[透明图片](https://stackoverflow.com/questions/12029960/transparent-images-in-wxpython-mask)

更新：

[通过 WorkinWithImages](http://wiki.wxpython.org/index.cgi/WorkingWithImages)中的示例，我设法做到了这一点：

```
import ImageConversions
...

    puFilename = "intro/imagealpha.png"
    pilImage = Image.open( puFilename )
    pilImageWithAlpha = ImageConversions.WxImageFromPilImage( pilImage, createAlpha=True )
    self.puWxBitmap = pilImageWithAlpha.ConvertToBitmap()
    self.locopic = wx.StaticBitmap(self, -1, self.puWxBitmap) 
```

这是从带有 alpha 通道的 PNG 创建透明的 wx.image，但是在 wx.StaticBitmap 中，透明度应该是丑陋的黑色。这让我很生气！！！请帮忙！

如果我能设法在 wx.panel 中在正确的位置显示具有透明度的图像谢谢社区！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:33:11.130

正如 Python SO 聊天中所讨论的：

```
class MyPanel(wx.Panel):

    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.Bind(wx.EVT_PAINT, self.OnPaint)

        self.loc = wx.Bitmap("intro/image.png")

    def OnPaint(self, evt):
        dc = wx.PaintDC(self)
        dc.SetBackground(wx.Brush("WHITE"))

        # ... drawing here all other images in order of overlapping
        dc.DrawBitmap(self.loc, 0, 0, True) 
```

诀窍是用`wx.PaintDC`.

此外，它使用起来更方便，`wx.Bitmap`而不是`wx.Image(..., wx.BITMAP_TYPE_PNG).ConvertToBitmap()`从文件系统加载 PNG。

# asp.net - 当路径是 Asp.net 中的临时文件夹时，图像不显示

> ID：15760527
> 
> 赞同：0
> 
> 时间：2013-04-02T09:25:32.310
> 
> 标签：asp.net

我`byteArray`从数据库中获取格式的图像内容并将其显示在 ASP.NET 的内容图像标记中。问题是，当我将图像文件保存在工作文件夹中的特定位置并显示图像时，它是工作正常。但如果我尝试将图像保存在临时文件夹中并将临时文件夹 URL 传递给图像标签，它不会显示图像。

**代码**：

```
 Bitmap bi = new Bitmap(byteArrayToImage(FileUpload1.FileBytes));

 //This code working fine

 string path = Server.MapPath("Images/") + FileUpload1.PostedFile.FileName;
         bi.Save(path , ImageFormat.Jpeg);
        Image1.ImageUrl = "Images/" + FileUpload1.PostedFile.FileName;

//This code didn't displaying the image.

         bi.Save(Path.GetTempPath() + FileUpload1.PostedFile.FileName, ImageFormat.Jpeg);
        Image1.ImageUrl = Path.GetTempPath() + FileUpload1.PostedFile.FileName; 
```

这里的 tempFolder 有什么问题？我使用的是 Windows7 操作系统。这里我使用临时文件夹自动从文件夹中删除创建的图像。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:02:02.610

您是否调试并检查 ImageUrl 是否正确

# oop - 避免意大利面条式代码（gamestatemanager）

> ID：15760529
> 
> 赞同：1
> 
> 时间：2013-04-02T09:25:35.310
> 
> 标签：oop, coding-style

我正在为游戏编写 StateManager（我正在使用 C++ 和 SFML，但我试图隐藏特定于语言的元素，因为这是关于任何 OOP 语言的问题）。我有一个设置，其中 StateManager 更新当前的活动状态。但是，State 必须能够更改活动状态（例如，在菜单中按“Play”会启动 PlayingState），因此我在我的 State 类中保留对 StateManager 的引用。

这是一个让事情更清楚的UML图。 ![UML 图状态管理器](https://i.stack.imgur.com/Ciq1q.png)

如您所见，StateManager 和 State 都相互引用。我怎样才能避免意大利面条代码？我应该将 StateManager 设为单例类吗？当我们这样做时，游戏类应该是单例类吗？我可以轻松做到这一点，但我真的不喜欢我的游戏中的其他类能够访问游戏类或 statemanager 类，即使我是唯一的程序员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:34:25.243

双向引用没有错。查看 Qt 的 QWidgets 的父/子模型。如果每个 State 只能影响一个 StateManager，则让每个 State 在其构造中获取一个指向 StateManager“父级”的指针，或者稍后设置它。StateManager 可以在集合中跟踪它的“孩子”，每个孩子都知道它的父母是谁，所以它可以通知那个父母任何变化。

编辑：我认为首先要看的是打破你的州级。目前，它既代表一种状态，也代表一种转变为该状态的动作。Actions 应该知道 StateMachine，告诉它改变状态。状态应该在 StateMachine 内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:39:36.570

您需要在**合同**中进行设计，也称为接口。例如，状态（原则上）不需要访问状态机。但是，状态的*实现*可能需要访问。C# 中的示例：

```
public interface IState
{
    void Render();
    void Update();
}

public interface IStateMachine
{
    void ChangeState(IState newState);
}

public class MenuState : IState
{
    private IStateMachine _stateMachine;

    public MenuState(IStateMachine stateMachine)
    {
        _stateMachine = stateMachine;
    }

    public void Render()
    {
    }

    public void Update()
    {
    }
}

public class StateMachineImplementation : IStateMachine
{
    public void ChangeState(IState newState)
    {
    }
} 
```

通知`IState`的任何实现都不知道任何`IStateMachine`实现，它们只是在合同上工作。另请注意，`MenuState`不关心“IStateMachine”的来源（控制反转），它只是使用它。

如果需要，您可以在`IStateMachine`for中添加另一个函数。`GetStates()`

最终，您使用这些合约来避免耦合；这意味着您可以完全替换`IStateManager`and 的实现（假设遵守合同），`MenuState`仍然可以正常工作。

# ruby-on-rails - 更改 RDoc 模板以生成 Rails 应用程序文档

> ID：15760530
> 
> 赞同：2
> 
> 时间：2013-04-02T09:25:36.560
> 
> 标签：ruby-on-rails, ruby, rake, rdoc

我刚刚向我的 Rails 3.2.13 应用程序添加了一些文档。我可以通过使用 rake 任务很好地生成文档（运行 RDoc 3.12.2）：

```
# lib/tasks/documentation.rake
Rake::Task["doc:app"].clear
Rake::Task["doc/app"].clear
Rake::Task["doc/app/index.html"].clear

namespace :doc do
    RDoc::Task.new('app') do |rdoc|
        rdoc.rdoc_dir  = 'doc/app'
        rdoc.generator = 'hanna'
        rdoc.title     = 'Stoffi Web App Documentation'
        rdoc.main      = 'doc/Overview'
        rdoc.options << '--charset' << 'utf-8'
        rdoc.rdoc_files.include('app/**/*.rb')
        rdoc.rdoc_files.include('doc/*')
    end
end 
```

...然后运行`rake doc:app`​​. 但我真的不喜欢 Hanna 模板的默认外观。有没有办法编辑 CSS，也许是通过提供我自己的 CSS 文件来覆盖 Hanna 中使用的默认文件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T12:31:15.350

首先找到您的模板所在的位置：

```
⮀ RDPATH=$(dirname $(gem which rdoc))
# ⇒ /home/am/.rvm/rubies/ruby-head/lib/ruby/2.1.0 
```

现在将默认模板从那里复制到所需位置（更改`/tmp`为您的项目目录或类似目录）：

```
⮀ cp -r $RDPATH/rdoc/generator/template/darkfish /tmp/myniftytemplate 
```

最后，让我们教一下`rdoc`：

```
class RDoc::Options
  def template_dir_for template
    "/tmp/#{template}"
  end
end

RDoc::Task.new('app') do |rdoc|
  rdoc.template = 'myniftytemplate'
  …
end 
```

而已。希望能帮助到你。

# c# - 保存列表 不能序列化到文件

> ID：15760533
> 
> 赞同：0
> 
> 时间：2013-04-02T09:25:55.167
> 
> 标签：c#, wpf, xml, serialization, datagrid

我想在 WPF 应用程序上保存和恢复列数据网格的大小和顺序。我将此数据存储在两个列表中：

```
List<DataGridColumn>
List<SortDescription> 
```

DataGridColumn 和 SortDescription 是 MSDN 类不可序列化。我想将这些列表保存在文件中（xml 或 txt...）

请问最简单的方法是什么？

最好的问候，尼克修斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:30:51.523

我强烈建议您不要将其保存为`DataGridColumn`or的列表`SortDescription`。

相反，您应该创建自己的与技术无关的轻量级 POCO，并包含重新创建列布局所需的数据。因为这是您自己的数据对象，它可以以任何您喜欢的方式序列化，但更好的是它不直接绑定到 Microsoft DataGrid。这样，如果您曾经更换过 Microsoft（WPF 扩展工具包）网格，那么您的列设置将很容易转移到您使用的新网格中。

当您从存储数据对象的任何位置重新水化数据对象列表时，您可以简单地遍历列表，为每个数据对象创建一列，并设置适当的列值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:38:38.877

将其存储为例如

```
List<Tuple<string, ListSortDirection, int, etc.>> 
```

其中 string 是列名，ListSortDirection 指定排序方向，int 是索引等。您可以轻松地序列化此类类型。

# iphone - 使用 json 文件折叠展开标题部分

> ID：15760535
> 
> 赞同：1
> 
> 时间：2013-04-02T09:25:58.483
> 
> 标签：iphone, ios, json, uitableview

事实上，我是 iOS 编程的新手，我正在努力自学。

我有一个带有标题部分的分段表视图，但我希望该视图能够在点击此部分时折叠展开部分中的行。

我使用本教程：[http ://blog.paxcel.net/blog/expandablecollapsible-table-for-ios/](http://blog.paxcel.net/blog/expandablecollapsible-table-for-ios/)

但是在我的应用程序中，我有一个`Json`文件而不是`Plist`文件。

所以我在 setCategoryArray() 函数中使用：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
NSData* data = [NSData dataWithContentsOfURL:
                [NSURL URLWithString: @"http://......./catjsonf.php"]];

NSError* error;
json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

jsonResults = [json objectForKey:@"nodes"];
dispatch_async(dispatch_get_main_queue(), ^{
    [self.tableView reloadData];
});

}); 
```

代替 ：

```
 NSURL *url = [[NSBundle mainBundle] URLForResource:@”CategoryList” withExtension:@”plist”];

NSArray *mainArray = [[NSArray alloc] initWithContentsOfURL:url]; 
```

但它不起作用——我应该做点别的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:42:55.130

看看我的博客，它肯定会对你有所帮助。链接在这里。

[适用于 iOS 的可扩展/可折叠表格](http://blog.paxcel.net/blog/expandablecollapsible-table-for-ios/)

你需要做以下事情

1.  首先根据您的 json 文件设计您的类，因为在我的情况下它是“类别”。
2.  完成模型类后，您需要编辑以下方法来准备模型对象数组。

> 提示：从 json 中，我们可以直接找到我们的字典，比如

```
id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

其中 result 可以进一步转换以获得字典对象。而加载数据就像下面的方法一样

```
 - (void) setCategoryArray
    {

          NSURL *url = [[NSBundle mainBundle] URLForResource:@”CategoryList” withExtension:@”plist”];

          NSArray *mainArray = [[NSArray alloc] initWithContentsOfURL:url];

          NSMutableArray *categoryArray = [[NSMutableArray alloc] initWithCapacity:[mainArray count]];

         for (NSDictionary *dictionary in mainArray) 
         {

              Category *category = [[Category alloc] init];

              category.name = [dictionary objectForKey:@"name"];

              category.list = [dictionary objectForKey:@"list"];

              [categoryArray addObject:category];

          }

         self.categoryList = categoryArray;
     } 
```

1.  一旦完成，唯一剩下的就是编辑表格视图的数据源并相应地委托方法。

# android - Android ant build：如何配置库顺序？

> ID：15760536
> 
> 赞同：1
> 
> 时间：2013-04-02T09:26:06.080
> 
> 标签：android, ant, build

我正在使用一个外部 somelibrary.jar 文件构建一个 android 应用程序。在eclipse中我可以通过

1.  配置构建路径
2.  添加外部 somelibrary.jar
3.  更改库顺序，使 somelibrary.jar 在 android 系统库之前。

现在我想用 ant 构建这个项目。我将这个 somelibrary.jar 文件放到 /libs 文件夹中，但是构建不起作用。我猜这是因为 somelibrary.jar 必须在 android 系统库之前。

如何在 ant build 中更改库顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:28:58.730

顺序并不重要。发生的事情是 ANT 看不到 somelibrary.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T20:12:25.573

我无法解决如何在构建顺序中将这个库放在 android.jar 之前。但是我能够解决方法：通过以下步骤将此库合并到 android.jar 中：

1.  将 android.jar 解压到“unzipped_android_jar”文件夹
2.  在这个“unzipped_android_jar”文件夹的顶部解压 somelibrary.jar
3.  通过压缩文件夹重新打包 android.jar
4.  将 zip 文件重命名为 android.jar

您的库现在已合并到系统库 android.jar 中。您可以通过在 SDK_FOLDER/platforms/android-N/android.jar 替换 android.jar 来使用它

# php - 将帖子从另一个自定义数据库导入到 wordpress

> ID：15760540
> 
> 赞同：2
> 
> 时间：2013-04-02T09:26:21.000
> 
> 标签：php, mysql, wordpress

数据库架构。

```
ID    title    keywords    category    body      time
1      XX      demo,tag      main      <html>    NOW()
2      YY      demo2,tag     main      <html>    NOW() 
```

这个数据库经常被另一个 webapp 更新。

我的问题是如何发布创建一个自定义 php 文件，该文件可以处理将该表中的新记录发布到 wordpress 中？

当我四处搜索时，我发现[了 wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post) api，但他们提到如果它不存在，这将不会创建类别。

```
 foreach($data as $db){
  $my_post = array();
  $my_post['post_title'] = $db->title;
  $my_post['post_content'] = $db->body;
  $my_post['post_status'] = 'publish';
  $my_post['post_author'] = 1;

  //$my_post['post_category'] = array(8,39);//how to fetch the category id !
  //$my_post['tags_input'] = explode(',',$db->keywords);///IS THIS CORRECT??

// Insert the post into the database
  wp_insert_post( $my_post );} 
```

那么有人可以解释一下我如何将数据库导出到带有类别（如果不存在则创建）、标签、标题、时间日期和内容的 wordpress 帖子中？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:30:00.003

您可以使用[wp_create_category](http://codex.wordpress.org/Function_Reference/wp_create_category)创建类别- 您的导入脚本应首先分析源数据并在必要时创建类别

# codeigniter - 来自 /public/themes 的 Codeigniter 2.1.3 HMVC 模板

> ID：15760553
> 
> 赞同：1
> 
> 时间：2013-04-02T09:26:53.457
> 
> 标签：codeigniter, templates, views, hmvc

我正在使用带有wiredesignz HMVC的codeigniter 2.1.3，我想知道如何从公共文件夹而不是模块/模块/视图中获取模板？

示例结构

应用程序/项目/项目名称/ciapp结构

应用程序/系统/等/

公共/主题/主题名/布局

公共/主题/主题名/页面

公共/主题/主题名/小部件

公共/主题/主题名/等

我很想使用 html 文件并让我的模板库整理出小部件或模块的标签和位置，所有模块和主题数据都从数据库中提取

比如：$homepage = $this->load->view(FCPATH.'themes/$theme/pages/homepage.html', $data, TRUE);

哦，还有一个简单的问题，我是 HMVC 的新手，我可以调用 modules::run('module/method', $params, $...); 从模板库（/application/projects/project/libraries/template.php）？

我已经尝试了一些事情，但我似乎无法得到任何工作，任何想法都非常感谢！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:05:38.793

首先，`$this->load->view()`加载 带有**.php**扩展名**而不是 .html文件的****视图**，其次，此方法仅加载**views/ 文件夹中的视图。**

 ******因此，您需要首先在文件中配置您的模块文件夹`application/config.php`。把它放在文件的末尾。

```
$config['modules_locations'] = array(
    APPPATH . 'modules/' => '../modules/'
); 
```

接下来，创建第一个以**视图**为子文件夹的模块，并创建以**.php**作为扩展名的**视图文件。**

 **```
- modules/
--- my_module/
------ views/
--------- my_view.php 
```

接下来，在您的控制器中，使用模块的 ubication 加载视图。

```
$this->load->view('my_module/my_view'); 
```

这必须运行，您可以尝试阅读有关文档的更多信息。

希望这对你有帮助！********

# cordova - 如何使用 phonegap 显示纬度和经度

> ID：15760555
> 
> 赞同：0
> 
> 时间：2013-04-02T09:27:00.380
> 
> 标签：cordova, gps, latitude-longitude

当我调用其他功能时，我正在尝试使用 Phonegap 显示（警报）GPS 的位置，但它根本不起作用。

我的代码：

```
var lat=0.0;
var lon=0.0;
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {    
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
}
function onSuccess(position) {
    lat = position.coords.latitude;
    lon = position.coords.longitude;
}

function ShowPosition(){
 alert("Latitude: "+lat+" longitude: "+lon);
} 
```

编辑：在我的 HTML 代码的按钮上的“onclick”事件上调用 showPosition 函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:36:33.620

你必须在某处调用 ShowPosition() 函数，在你的代码中你从未调用过这个函数。这就是问题所在，你的代码是完美的。

希望这可以帮助你。谢谢。

# php - 如何保存从 imagecreatefromstring() 函数创建的图像？

> ID：15760559
> 
> 赞同：19
> 
> 时间：2013-04-02T09:27:23.930
> 
> 标签：php

这是我的代码：

```
$data = 'iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAMAAAB/2U7WAAAABl'
       . 'BMVEUAAAD///+l2Z/dAAAASUlEQVR4XqWQUQoAIAxC2/0vXZDr'
       . 'EX4IJTRkb7lobNUStXsB0jIXIAMSsQnWlsV+wULF4Avk9fLq2r'
       . '8a5HSE35Q3eO2XP1A1wQkZSgETvDtKdQAAAABJRU5ErkJggg==';
$data = base64_decode($data);

$im = imagecreatefromstring($data);
if ($im !== false) {
    header('Content-Type: image/png');
    imagepng($im);
    imagedestroy($im);

}
else {
    echo 'An error occurred.';
} 
```

我想以这种方式生成的图像保存到一个目录中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-02T09:30:40.707

这是正确的语法`imagepng`：

```
imagepng($im, "/path/where/you/want/save/the/png.png"); 
```

根据[PHP 手册](http://php.net/manual/en/function.imagepng.php)：

> bool imagepng ( 资源 $image [, string $filename [, int $quality [, int $filters ]]] )
> 
> 文件名 - 保存文件的路径。
> 
> 如果不设置或为NULL，将直接输出原始图像流。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-09T13:08:53.417

下面的代码会有所帮助：

```
$data = 'code in bytes'; // replace with an image string in bytes
$data = base64_decode($data); // decode an image
$im = imagecreatefromstring($data); // php function to create image from string
// condition check if valid conversion
if ($im !== false) 
{
    // saves an image to specific location
    $resp = imagepng($im, $_SERVER['DOCUMENT_ROOT'].'folder_location/'.date('ymdhis').'.png');
    // frees image from memory
    imagedestroy($im);
}
else 
{
    // show if any error in bytes data for image
    echo 'An error occurred.'; 
} 
```

请建议是否有其他更好的方法！

# tsql - T-SQL/SSRS - 当没有行可用于计数时显示值

> ID：15760564
> 
> 赞同：0
> 
> 时间：2013-04-02T09:27:44.537
> 
> 标签：tsql, reporting-services

我正在使用 SSRS tablix 将数据按小时范围（超过 24 小时）排序，但是，如果该小时内没有行，则 tablix 将不会显示该行/组。

任何建议，我都尝试过 CASE，iif，甚至使用文本框作为占位符，并且没有每小时使用个人 tablix，只是将无数据消息更改为“0”，我没有想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:57:19.147

您可以尝试以下模式：

```
select
    * -- better naming columns
from
    (
        select 0 as [hour]
        union select 1
        union select 2
        union select 3
        union select 4
        union select 5
        union select 6
        union select 7
        union select 8
        union select 9
        union select 10
        union select 11
        union select 12
        union select 13
        union select 14
        union select 15
        union select 16
        union select 17
        union select 18
        union select 19
        union select 20
        union select 21
        union select 22
        union select 23
    ) dimHour
    left join (
        -- you query here cointaining an hour column
    ) facts on dimHour.[hour] = facts.[hour] 
```

这样，您一天中的每个小时都至少有一行。

# c - 内存管理器的数据结构

> ID：15760575
> 
> 赞同：1
> 
> 时间：2013-04-02T09:28:14.730
> 
> 标签：c, algorithm, memory-management, data-structures

我正在写一个内存管理器。我分配了一大块动态内存并将其拆分为各种大小的内存池。大小范围从 8 到 256，是 8 的倍数。当内存请求到来时，根据大小，我从其中一个池中分配一个内存块。我维护一个映射所需大小和内存池的哈希表。
我不想在分配的内存中保留簿记信息，因此我为每个池使用一个单链表来跟踪空闲块。我的问题是 i) 由于内存池中所有块的块大小是统一的，我决定不对这些块进行排序。即当内存请求到来时，我将分配内存池中的第一个块，当它被释放时，我将它插入到空闲列表的前面。这样，内存分配和释放都会更快。此外，由于池中的块大小相同，因此不会发生碎片。你觉得这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:47:57.300

是的，拥有一个 LIFO 堆栈来保存大小相同的未使用内存块是最简单的解决方案。我自己曾经做过一次这样的事情......

我只会给你一个建议。像这样分配内存时，*不要给出指向分配区域开头的指针*。哦，最好有另一个堆栈来推送分配的块，这样你就知道它们是什么了。

# lua - 电晕错误：尝试调用全局“startButtonListeners”

> ID：15760576
> 
> 赞同：0
> 
> 时间：2013-04-02T09:28:14.923
> 
> 标签：lua, coronasdk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:05:06.903

将函数的位置更改`startButtonListeners`到末尾；完成函数定义后：

```
scene:enterScene(event)
    local group = self.view 

    function startButtonListeners(action)
      if(action == 'add') then  
         aboutBtn:addEventListener('tap', showCredits)
         startBtn:addEventListener('tap', startBtn)
      end 

      local function onSceneTouch( self, event )
        if event.phase == "began" then
        storyboard.gotoScene( "scene1", fade, 500 )
        return true
      end
    end 
    startButtonListeners('add')
end 
```

# c# - WebRequest.Create 不正确地解码 url

> ID：15760578
> 
> 赞同：5
> 
> 时间：2013-04-02T09:28:19.853
> 
> 标签：c#, unicode, webrequest

我有一个这样的 url: `http://localhost:8080/search.json?q=L%u00e6r`，这是 Lær 的编码搜索。

不幸的是，从这个 url 创建一个 WebRequest`WebRequest.Create(url)`会产生以下 url: `http://localhost:8080/search.json?q=L%25u00e6r`。

请注意，它错误地解码`%u00e6`并生成`%25u00e6r`. 有没有办法转换这种 unicode 转义值或让 WebRequest.Create 正确处理它？

这很可能会作为错误报告给 .net 团队。如果查询包含 §、æ、ø 或 å（或任何其他非 ascii 字符），`WebRequest.Create()`则无法使用返回的查询字符串。`Request.QueryString.ToString()`这是一个小的 mvc 动作，可以用来测试它。用查询调用它`Query?q=L%C3A6r`

```
public ActionResult Query()
{
    var query = Request.QueryString.ToString();
    var url = "http://localhost:8080?" + query;

    var request = WebRequest.Create(url);
    using (var response = request.GetResponse())
    using (var stream = response.GetResponseStream())
    {
        return new FileStreamResult(stream, "text/plain");
    }
} 
```

**编辑**：

不幸的是，@animaonline 的解决方案不适用于 url 之类`http://localhost:8080/search.json?q=Lek+%26+L%u00e6r`的，这些 url 被解码为`http://localhost:8080/search.json?q=Lek & Lær`，其中`WebRequest.Create`混淆了`&`，并认为它分隔了参数，而不是作为参数的一部分`q`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T09:31:52.547

您必须在执行创建之前解码您的 URL

```
 var decodedUrl = HttpUtility.UrlDecode("http://localhost:8080/search.json?q=L%u00e6r");

        var req = WebRequest.Create(decodedUrl); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:12:38.613

解决方案似乎是将查询字符串拆分为每个单独的组件，对其进行解码，然后将其重新编码为 UTF-8，然后再将它们全部连接在一起。

```
string FixQuery(string query){
  return String.Join("&",
    query.Split(new[] {'&'})
      .Select(
        p =>
          String.Join("=",
            p.Split(new[] {'='})
              .Select(
                q =>
                  HttpUtility.UrlEncode(
                    HttpUtility.UrlDecode(q),
                    Encoding.UTF8
                  )
              )
          )
      )
  );
}

//example usage

var url = "http://localhost:8080/search?"+FixQuery(query); 
```

# cmake - 在“配置”步骤完成之前，在 CMake 中执行命令或宏作为最后一步

> ID：15760580
> 
> 赞同：8
> 
> 时间：2013-04-02T09:28:27.777
> 
> 标签：cmake

CMake（版本> = 2.8.7）是否有可能在配置阶段完成之前作为最后一步执行宏或命令？

该功能应在屏幕上打印以下行之前执行：

```
-- Configuring done
-- Generating done 
```

到目前为止，我无法找到可以用作依赖项的 CMake 目标，以使用`add_custom_command` `add_custom_target`or实现此目标`add_dependencies`。

编辑：我们有一个导出多个 CMake 宏的库，其中一些宏必须`CMakeLists.txt`在所有其他 CMake 命令运行后在每个文件的末尾执行。理想情况下，可以通过在文件`macros.cmake`中包含文件来实现所需的行为，`CMakeLists.txt`而无需在该文件的末尾添加额外的命令`CMakeLists.txt`。

也可以通过在一个宏中收集所有功能来实现这一点，该宏需要在`CMakeLists.txt`. 但是，已经有几个依赖库需要调整，解决这个问题的方法将省略这些额外的工作。此外，可能会忘记添加宏，或者很容易违反将其作为最后一条语句的要求。

示例`macros.cmake`：

```
macro(FINAL_MACRO)
    message(STATUS "Last step before finishing Configure phase")
endmacro()

# HERE: something like add_custom_target(final_steps)
# followed by something like add_dependencies(final_steps cmake_configure_finished) 
```

示例顶层`CMakeLists.txt`：

```
cmake_minimum_required(VERSION 2.8.7)
include(macros.cmake)

add_subdirectory(source)
add_subdirectory(interfaces)

# Here FINAL_MACRO should get executed without explicitly writing it down 
```

如果没有其他选项，我们将不得不要求每个用户在他们的`CMakeLists.txt`文件末尾调用一个特殊的宏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T02:19:34.670

好的 - 这个答案感觉有点脆弱，因为它使用了未记录的 CMake 行为。但是，它似乎确实有效。

在配置过程即将结束时，在处理完 CMakeLists.txt 文件中的所有命令后，CMake 会检查[`CMAKE_BACKWARDS_COMPATIBILITY`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_BACKWARDS_COMPATIBILITY "CMake v2.8.10 文档"). 如果这个变量正在通过[`variable_watch`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3avariable_watch "CMake v2.8.10 文档")命令被监视，那么它将在这里被触发。

所以你可以把这个功能包装成几个函数：

```
function(EOFHook Variable Access)
  if(${Variable} STREQUAL CMAKE_BACKWARDS_COMPATIBILITY AND
     (${Access} STREQUAL UNKNOWN_READ_ACCESS OR ${Access} STREQUAL READ_ACCESS))
    execute_process(COMMAND ${CMAKE_COMMAND} -E echo "In EOF hook command")
    ... do whatever else is required ...
  endif()
endfunction()

function(SetupEOFHook)
  variable_watch(CMAKE_BACKWARDS_COMPATIBILITY EOFHook)
endfunction() 
```

要在任何 CMakeLists 文件中使用它，只需`SetupEOFHook()`在文件中的任何位置调用。

这有点冒险；如果变量也在 CMakeLists.txt 的其他地方被读取，例如通过

```
message(${CMAKE_BACKWARDS_COMPATIBILITY}) 
```

那么它将在`EOFHook`此处*和*最后触发该功能。您可以通过添加一个计数器并检查它是否只被调用一次或发出一个`message(FATAL_ERROR ...)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T12:37:00.880

CMake 命令[`execute_process`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aexecute_process "CMake v2.8.10 文档")将在配置阶段而不是构建阶段执行，因此如果将其放在 CMakeLists.txt 文件的末尾，它将最后执行。

# java - Facebook 的 Android ProGuard 设置

> ID：15760581
> 
> 赞同：29
> 
> 时间：2013-04-02T09:28:31.747
> 
> 标签：java, android, eclipse, proguard

我终于找到了为什么我的应用程序崩溃为发布而构建。ProGuard 确实从我的应用程序中剥离了代码，但我通过在 proguard-android.txt（在 sdk 中找到）中使用 keep 命令手动添加类来防止这种情况发生。

对于 Facebook，我使用：

```
-keep class com.facebook.android.*
-keep class android.webkit.WebViewClient
-keep class * extends android.webkit.WebViewClient
-keepclassmembers class * extends android.webkit.WebViewClient { 
    <methods>; 
} 
```

但我认为我仍然缺少一些东西。该应用程序现在没有崩溃，但我无法登录 Facebook 并使用 Open Graph。当我在调试模式下构建时，一切正常。

您使用 Facebook 和 Facebook 的 Open Graph 的 proguard 设置是什么？

**编辑**

这是我为 ProGuard 手动添加的命令：

```
-dontwarn android.support.**

# ActionBarSherlock 

-keep class android.support.** { *; } 

-keep interface android.support.** { *; } 

-keep class com.actionbarsherlock.** { *; } 

-keep interface com.actionbarsherlock.** { *; } 

# Keep line numbers to alleviate debugging stack traces 

-renamesourcefileattribute SourceFile 

-keepattributes SourceFile,LineNumberTable

-keepclassmembers class * implements java.io.Serializable
{
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
}

-keep class com.facebook.android.*
-keep class android.webkit.WebViewClient
-keep class * extends android.webkit.WebViewClient
-keepclassmembers class * extends android.webkit.WebViewClient { 
    <methods>; 
} 
```

**编辑 2** 所以没有登录的问题是我使用了我的调试哈希键而不是我的发布哈希键。在我的应用程序设置（developers.facebook.com）中更改了它，发现我的应用程序最终登录但登录后崩溃。

不知道这是否仍然是 ProGuard 问题，但它返回了此错误：

```
04-02 11:47:31.815: E/AndroidRuntime(9093): FATAL EXCEPTION: main
04-02 11:47:31.815: E/AndroidRuntime(9093): com.facebook.ab: com.facebook.b.e got an unexpected method signature: public abstract com.facebook.b.b com.facebook.b.b.a(java.lang.Class)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at com.facebook.b.f.a(SourceFile:400)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at com.facebook.b.e.b(SourceFile:546)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at com.facebook.b.e.invoke(SourceFile:470)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at $Proxy1.a(Native Method)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at com.facebook.bb.a(SourceFile:124)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at com.facebook.ar.a(SourceFile:264)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at com.facebook.as.run(SourceFile:1240)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at android.os.Handler.handleCallback(Handler.java:615)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at android.os.Looper.loop(Looper.java:137)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at android.app.ActivityThread.main(ActivityThread.java:4931)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at java.lang.reflect.Method.invoke(Method.java:511)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-02 11:47:31.815: E/AndroidRuntime(9093):     at dalvik.system.NativeStart.main(Native Method)
04-02 11:47:31.820: W/ActivityManager(2130):   Force finishing activity com.xxxxx.xxxx/com.xxxxx.views.MainActivity
04-02 11:47:32.360: W/ActivityManager(2130): Activity pause timeout for ActivityRecord{4289ca58 com.xxxxx.xxxxx/com.xxxxx.xxxxx.MainActivity} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-02T10:08:48.413

固定的：

```
-keep class com.facebook.** {
   *;
} 
```

代替：

```
-keepattributes Signature
-keep class com.facebook.android.*
-keep class android.webkit.WebViewClient
-keep class * extends android.webkit.WebViewClient
-keepclassmembers class * extends android.webkit.WebViewClient { 
    <methods>; 
} 
```

还要确保在您的 Facebook 应用程序设置中检查您的哈希键。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-10-02T16:22:33.577

就我而言，您的解决方案

```
-keep class com.facebook.** {
   *;
} 
```

工作，但我必须保持

```
-keepattributes Signature 
```

为了让一切正常工作。

# asp.net-mvc - MVC 4：将“索引”添加到 url 路径

> ID：15760585
> 
> 赞同：2
> 
> 时间：2013-04-02T09:28:53.443
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, asp.net-mvc-routing

由于某些特定原因，我需要 .NET MVC 4 不要从 URL 中自动删除“索引”。基本上我需要转换

http://example.com/ 到 http://example.com/Index

或者

http://example.com/foo 到 http://example.com/foo/Index

问题是@URL.Action("Index", "Foo") 只是输出 /Foo，我需要它来输出 Foo/Index。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:46:25.517

您应该能够从路由映射中删除默认操作。

所以代替这个：

```
routes.MapRoute(
  name: "Default",
  url: "{controller}/{action}/{id}",
  defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

拿出来`action = "Index"`：

```
routes.MapRoute(
  name: "Default",
  url: "{controller}/{action}/{id}",
  defaults: new { controller = "Home", id = UrlParameter.Optional }
); 
```

# media-player - 在 HTML5 中包含开放标准媒体播放器

> ID：15760590
> 
> 赞同：0
> 
> 时间：2013-04-02T09:29:09.750
> 
> 标签：media-player

我是 HTML5 和 JQuery 的新手。我遇到了以下媒体播放器：Open Standard Media player for HTML5 ( [http://mediafront.org/osmplayer/](http://mediafront.org/osmplayer/) )。但是当我试图在我的 html 页面中包含播放器时，播放器没有运行。可能的原因是什么？PFB 用于包含播放器的代码。

```
<!-- Include the core jQuery and jQuery UI -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

<!-- Include the core media player JavaScript. -->
<script type="text/javascript" src="osmplayer/bin/osmplayer.compressed.js"></script>

<!-- Include the DarkHive ThemeRolller jQuery UI theme. -->
<link rel="stylesheet" href="osmplayer/jquery-ui/dark-hive/jquery-ui-1.8.18.custom.css">
<!-- Include the Default template CSS and JavaScript. -->
<link rel="stylesheet" href="osmplayer/templates/default/css/osmplayer_default.css">
<link rel="stylesheet" href="osmplayer/templates/default/osmplayer.default.js"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T04:44:07.170

对于偶然发现此问题的任何人，或者如果您仍然遇到相同问题的原始用户，这就是问题所在。

本节就在这里。

```
<!-- Include the DarkHive ThemeRolller jQuery UI theme. -->
<link rel="stylesheet" href="osmplayer/jquery-ui/dark-hive/jquery-ui-1.8.18.custom.css">
<!-- Include the Default template CSS and JavaScript. -->
<link rel="stylesheet" href="osmplayer/templates/default/css/osmplayer_default.css">
<link rel="stylesheet" href="osmplayer/templates/default/osmplayer.default.js"> 
```

如果您查看最后一个链接，它是 osmplayer.default.js 而不是样式表。切换到

```
<script type="text/javascript" src="osmplayer/templates/default/osmplayer.default.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:55:10.403

我有同样的问题。我检查了 osmplayer 页面并复制了那里的所有脚本和样式表引用，并在我自己的代码中进行了调整以匹配文件系统。

```
<!-- Include the core media player JavaScript. -->
<script type="text/javascript" src="../../public/osmplayer/bin/osmplayer.compressed.js"></script>

<!-- Include the DarkHive ThemeRolller jQuery UI theme. -->
<link rel="stylesheet" href="../../public/osmplayer/jquery-ui/dark-hive/jquery-ui-1.8.18.custom.css">

<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.compatibility.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.flags.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.async.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.plugin.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.display.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.image.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.file.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.playLoader.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.players.base.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.players.html5.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.players.flash.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.players.minplayer.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.players.youtube.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.players.vimeo.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.players.limelight.js"></script>
<script type="text/javascript" src="../../public/osmplayer/minplayer/src/minplayer.controller.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.parser.default.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.parser.youtube.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.parser.rss.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.parser.asx.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.parser.xspf.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.playlist.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/iscroll/src/iscroll.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.pager.js"></script>
<script type="text/javascript" src="../../public/osmplayer/src/osmplayer.teaser.js"></script>

<!-- Include the Default template CSS and JavaScript. -->
<link rel="stylesheet" href="../../public/osmplayer/templates/default/css/osmplayer_default.css">
<script type="text/javascript" src="../../public/osmplayer/templates/default/js/osmplayer.default.js"></script>
<script type="text/javascript" src="../../public/osmplayer/templates/default/js/osmplayer.controller.default.js"></script>
<script type="text/javascript" src="../../public/osmplayer/templates/default/js/osmplayer.pager.default.js"></script>
<script type="text/javascript" src="../../public/osmplayer/templates/default/js/osmplayer.playLoader.default.js"></script>
<script type="text/javascript" src="../../public/osmplayer/templates/default/js/osmplayer.playlist.default.js"></script>
<script type="text/javascript" src="../../public/osmplayer/templates/default/js/osmplayer.teaser.default.js"></script> 
```

您不必包括所有这些参考。例如，如果您不包括 youtube 视频，那么您可以省略 miniplayer.players.youtube.js 文件等等。希望这可以帮助。

编辑：我的 jQuery 引用在一个通用布局页面上，并且总是被加载。这些是绝对需要的。请注意不要两次引用这些内容。这也给我带来了一个问题。

# java - 如何获取从 JComboBox 中选择的项目的索引？

> ID：15760592
> 
> 赞同：4
> 
> 时间：2013-04-02T09:29:17.670
> 
> 标签：java, swing, selection, jcombobox

这就是我创建 JComboBox 的方式 -

```
String[] options = {"First", "Second" , "Third"};
JComboBox optionsCombo = new JComboBox(options); 
```

When one of these items is selected, how do i get the index of the item which was selected ? 我不想要被选中的项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T09:31:51.343

```
int index = optionsCombo.getSelectedIndex() 
```

将给出选定的索引。在组合框动作监听器中使用它

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T11:46:22.437

索引从 0,1,2,.. 开始

```
optionsCombo.getSelectedIndex() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-02T09:31:34.107

采用 ：[`optionsCombo.getSelectedIndex();`](http://www.java2s.com/Code/JavaAPI/javax.swing/JComboBoxgetSelectedIndex.htm)

在**actionListener**里面像这样：

```
 ActionListener actionListener = new ActionListener() {
      public void actionPerformed(ActionEvent actionEvent) {
        System.out.println("Selected: " + optionsCombo.getSelectedItem());
        System.out.println(", Position: " + optionsCombo.getSelectedIndex());
      }
    };
    optionsCombo.addActionListener(actionListener); 
```

# version-control - ClearCase：在旧标签的视图中移动文件的位置

> ID：15760595
> 
> 赞同：1
> 
> 时间：2013-04-02T09:29:23.050
> 
> 标签：version-control, clearcase

假设我在 ClearCase 中做了以下事情：

1) 将标签应用于视图。

2）将文件从一个目录移动到另一个目录并相应地修改了我的构建相关文件。

3) 在先前创建的标签上创建一个新视图。

移动文件在新视图中的位置是什么？它会在旧目录中吗？还是会在新目录中？如果它在新目录中，如果在创建标签时新目录不存在会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:15:50.780

它将位于**旧**目录中：

移动文件涉及在以下位置创建新版本：

*   源目录（取消引用您要移动的文件）
*   目标目录（引用移动的文件）

这两个版本都*没有*标有“以前创建的标签”：它们不会被您的新视图选中。

# c# - 字符串操作以从数组中排序消息

> ID：15760598
> 
> 赞同：0
> 
> 时间：2013-04-02T09:29:40.163
> 
> 标签：c#, .net, string

```
string[] array = new string[] { "12", "3$4", "5$67", "8$945", "$9484$", "$63$" };
foreach(string message in array)
{
    FindString(message);
}

string remainingString = "";
string tempString = "";
string outputString = ""; 
```

而这`FindString`

```
private void FindString(string message)
{
    if(message.Contains("$"))
    {//remove char ^ process
         int pos = -1;
         pos = message.IndexOf('$');
         outputString = message.Substring(0, pos);
         remainingString = message.Substring(pos + 1);
         if(tempString != "")
         {
             outputString = tempString + outputString;
         objList.Add(outputString);
         tempString = "";
         }
         if(remainingString.Length != 0)
         {
             FindString(remainingString);
         //remainingString = "";
         }
    }
    else
    {
        tempString = tempString + message;
    }
} 
```

我已经构建了另一个应用程序发送的消息数组。“$”字符显示消息的结尾。我必须从数组中整理出实际消息。这些我必须找出“123”“45”，“678”，“945”，“9484”，“63”我写了一个代码，但只得到“123”，“45”，“675”，“945”它跳过“$$”内的“9484”和“63”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:32:56.077

无需丢失代码行。尝试这个：

```
string[] array = new string[] { "12", "3$4", "5$67", "8$945", "$9484$", "$63$" };
string total = string.Join(string.Empty, array);
List<string> outputString = 
                   total.Split(
                            new char[] { '$' },
                            StringSplitOptions.RemoveEmptyEntries).ToList(); 
```

# ruby-on-rails - Rails select_tag 按字母顺序

> ID：15760604
> 
> 赞同：4
> 
> 时间：2013-04-02T09:29:58.910
> 
> 标签：ruby-on-rails, html-select

我有这个`select_tag`

```
select_tag :id, options_for_select(Portal.all.collect{|p| [p.name, portal_datum_path(p.id)]}, [@portal.name, portal_datum_path(@portal)]), :onChange => "window.location=($(this).val());" 
```

它允许用户选择一个门户来查看某些元素，我想按字母顺序显示这些门户。

我尝试在控制器中订购 :name 但没有获胜。

```
def index
  @portals = Portal.with_name_or_subdomain(params[:keyword]).order(:name).limit(100)
end 
```

我查看了 rails 文档 select_tag 本身没有内置选项是否有一些我应该使用的秘密选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T10:16:42.567

一个小时后，您所要做的就是`.sort`传递给 options_for_select 的选项数组。这是我的 hack 它是一个修复但不是很性感

```
select_tag :id, options_for_select(Portal.all.collect{|p| [p.name, portal_datum_path(p.id)]}.sort, [@portal.name, portal_datum_path(@portal)]), :onChange => "window.location=($(this).val());" 
```

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:43:56.730

将其更改为

```
select_tag :id, options_from_collection_for_select(portals,:name, :id, 1), :onChange => "window.location=($(this).val());"**强文本**

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-31T02:36:24.957

正如您所做的那样，将您的选项收集到一个数组中：

```
options = Portal.all.collect{|p| [p.name, portal_datum_path(p.id)]},    [@portal.name, portal_datum_path(@portal)]) 
```

然后排序：

```
options.sort!{ |x, y| x[0] <=> y[0] } 
```

我在 options_for_select 的猴子补丁中执行此操作，这是我为处理各种选择内容而构建的模块的一部分，因为像这样对选择进行排序比不这样做更常见。

```
def options_for_select(options, selected_items:nil, alphabetize: true)
  options.sort!{ |x, y| x[0] <=> y[0] } if alphabetize 
  super(options, selected_items)
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-19T02:55:06.830

试试这个：

```
select_tag :id, options_for_select(Portal.all.order(name: :asc).collect{|p| [p.name, portal_datum_path(p.id)]}.sort, [@portal.name, portal_datum_path(@portal)]), :onChange => "window.location=($(this).val());" 
```

# gamesalad - HTML5 发布后 GameSalad 游戏出现的问题

> ID：15760606
> 
> 赞同：0
> 
> 时间：2013-04-02T09:30:03.783
> 
> 标签：gamesalad

我发布了我正在开发的原型，以便我的朋友可以查看它 ( [http://arcade.gamesalad.com/game/111017](http://arcade.gamesalad.com/game/111017) )。我有两个问题： 1\. 敌人越来越低，直到他们滑到地上 2\. 玩家随机失去射击能力。

当我在我的 GameSalad 副本上使用预览按钮或网页预览按钮时，不会出现这些问题。当最终产品与开发版本不匹配时，我该如何调试游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T19:24:44.230

尝试在*物理*下改变你的两个演员 Enemy 和 Ground的**摩擦力**和**弹性。**降低摩擦力，一点一点地增加弹性，以获得理想的效果。

 *如果您的敌人开始反弹太快或太高，您可以选中“*运动*”下的**“应用最大速度”**框，并为其设置最大速度，例如 300。*

# c++ - 发送消息作为 IPC？

> ID：15760608
> 
> 赞同：1
> 
> 时间：2013-04-02T09:30:13.807
> 
> 标签：c++, winapi

以下代码将一些文本设置为打开的记事本窗口。我的问题是它如何安全工作？

```
int _tmain(int argc, _TCHAR* argv[])
{
      HWND hwnd = FindWindow(_T("Notepad"),_T("Untitled - Notepad"));
      if(hwnd!=NULL)
      {
         wchar_t* pString = L"hi";
         HWND hwndEdit = FindWindowEx(hwnd,NULL,_T("Edit"),NULL);
         SendMessage(hwndEdit,WM_SETTEXT,0,(LPARAM)pString);
      }
       return 0; 
```

}

指针“pString”存在于当前进程空间的虚拟内存中，这在notepad.exe的上下文中可能不是有效的内存地址。但奇怪的是它确实正确设置了文本，这意味着不仅指针在notepad.exe 上下文，但它也指向正确的字符串。这是怎么回事？

这是否意味着我们可以有效地使用 SendMessage 作为 IPC 机制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T10:07:04.503

对于某些消息，系统会自动将数据从一个进程编组到另一个进程——`WM_SETTEXT`这是获得这种特殊处理的消息之一。

如果你真的想要的话，你当然可以将它用作双向数据传输（使用发送`WM_SETTEXT`和接收）的 IPC 机制，但我怀疑它是否会那么有效。`WM_GETTEXT`并且已经有专门为 IPC 设计的消息 - `WM_COPYDATA`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:09:16.277

> 我们可以使用 SendMessage

是的！

> 有效地

不

窗口的设置文本由操作系统处理。在这种情况下，Windows 会自动封送数据。

# spring-data-rest - 春季数据休息

> ID：15760612
> 
> 赞同：1
> 
> 时间：2013-04-02T09:30:28.913
> 
> 标签：spring-data-rest

我知道 Spring Data REST 允许将基于 JPA 的存储库导出为 RESTful 端点。但是，在我的情况下，我在域实体类（用 @Entity 注释）和 REST 表示类（映射被处理）之间有一个映射推土机）。用户可以单独通过 REST 表示访问资源，该表示将在内部映射到实际资源。问题：我可以在不更改域层的情况下使用 spring data REST 将表示类转换为 restful 端点吗？还是仅在可以导出的扩展 CRUDRepository/MongoDB 的存储库接口级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T09:01:51.317

如果我理解正确，您希望 Spring 从您的存储库中自动公开一个 REST 服务，如以下示例所示[http://spring.io/guides/gs/accessing-mongodb-data-rest/](http://spring.io/guides/gs/accessing-mongodb-data-rest/)

但是返回由 Dozer 映射的表示 bean，而不是来自持久层的表示 bean。

恐怕如果你想要那样的话，你需要编写自己的控制器并让它们调用你的存储库方法。

请看一下这个已经回答的帖子：

[Spring HATEOAS 与 Spring Data Rest](https://stackoverflow.com/questions/19514131/spring-hateoas-versus-spring-data-rest/19516776#19516776)

# c - Socket程序文件传输

> ID：15760614
> 
> 赞同：0
> 
> 时间：2013-04-02T09:30:29.300
> 
> 标签：c, linux, sockets

当我使用下面的代码传输二进制文件时，只有一半的文件被传输。当我检查使用具有相同二进制文件的环回地址的相同代码时，它可以正常工作，即整个文件被传输。

以下代码或我的网络有问题吗？

客户端.c：

```
#include<stdlib.h>
#include<stdio.h>
#include<errno.h>
#include<string.h>
#include<sys/types.h>
#include<netinet/in.h>
#include<sys/wait.h>
#include<sys/socket.h>
#include<signal.h>
#include<ctype.h>          
#include<arpa/inet.h>
#include<netdb.h>
#define PORT 20000
#define LENGTH 512

void error(const char *msg)
{
    perror(msg);
    exit(1);
}

int main(int argc, char *argv[])
{
    /* Variable Definition */
    int sockfd, nsockfd;
    char revbuf[LENGTH]; 
    struct sockaddr_in remote_addr;

    /* Get the Socket file descriptor */
    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
        fprintf(stderr, "ERROR: Failed to obtain Socket Descriptor! (errno = %d)\n",errno);
        exit(1);
    }

    /* Fill the socket address struct */
    remote_addr.sin_family = AF_INET; 
    remote_addr.sin_port = htons(PORT); 
    inet_pton(AF_INET, "192.168.103.190", &remote_addr.sin_addr); 
    //inet_pton(AF_INET, "192.168.103.179", &remote_addr.sin_addr);
    bzero(&(remote_addr.sin_zero), 8);

    /* Try to connect the remote */
    if (connect(sockfd, (struct sockaddr *)&remote_addr, sizeof(struct sockaddr)) == -1) {
        fprintf(stderr, "ERROR: Failed to connect to the host! (errno = %d)\n",errno);
        exit(1);
    }
    else
        printf("[Client] Connected to server at port %d...ok!\n", PORT);

    /*send to server*/
    char* fs_name = "/usr/local/context.2848";
    char sdbuf[LENGTH]; 
    printf("[Client] Sending %s to the Server... ", fs_name);
    FILE *fs = fopen(fs_name, "r");
    if(fs == NULL) {
        printf("ERROR: File %s not found.\n", fs_name);
        exit(1);
    }
    bzero(sdbuf, LENGTH); 
    int fs_block_sz,i=0; 
    while((fs_block_sz = fread(sdbuf, sizeof(char), LENGTH, fs)) > 0) {
        printf("Data Sent %d = %d\n",i,fs_block_sz);
        if(send(sockfd, sdbuf, fs_block_sz, 0) < 0) {
            fprintf(stderr, "ERROR: Failed to send file %s. (errno = %d)\n", fs_name,     errno);
            exit(1);
        }
        bzero(sdbuf, LENGTH);
        i++;
    }
    close (sockfd);
    printf("[Client] Connection lost.\n");
    return (0);
} 
```

服务器.c

```
#include<stdlib.h>
#include<stdio.h>
#include<errno.h>
#include<string.h>
#include<sys/types.h>
#include<netinet/in.h>
#include<sys/wait.h>
#include<sys/socket.h>
#include<signal.h>
#include<ctype.h>          
#include<arpa/inet.h>
#include<netdb.h>
#define PORT 20000 
#define BACKLOG 5
#define LENGTH 512 

void error(const char *msg)
{
    perror(msg);
    exit(1);
}

int main ()
{
    /* Defining Variables */
    int sockfd, nsockfd; 
    int num;
    int sin_size; 
    struct sockaddr_in addr_local; /* client addr */
    struct sockaddr_in addr_remote; /* server addr */
    char revbuf[LENGTH]; // Receiver buffer

    /* Get the Socket file descriptor */
    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1 ) {
        fprintf(stderr, "ERROR: Failed to obtain Socket Descriptor. (errno = %d)\n", errno);
        exit(1);
    }
    else 
        printf("[Server] Obtaining socket descriptor successfully.\n");

    /* Fill the client socket address struct */
    addr_local.sin_family = AF_INET; // Protocol Family
    addr_local.sin_port = htons(PORT); // Port number
    addr_local.sin_addr.s_addr = INADDR_ANY; // AutoFill local address
    bzero(&(addr_local.sin_zero), 8); // Flush the rest of struct

    /* Bind a special Port */
    if( bind(sockfd, (struct sockaddr*)&addr_local, sizeof(struct sockaddr)) == -1 ) {
        fprintf(stderr, "ERROR: Failed to bind Port. (errno = %d)\n", errno);
        exit(1);
    }
    else 
        printf("[Server] Binded tcp port %d in addr 127.0.0.1 sucessfully.\n",PORT);

    /* Listen remote connect/calling */
    if(listen(sockfd,BACKLOG) == -1) {
        fprintf(stderr, "ERROR: Failed to listen Port. (errno = %d)\n", errno);
        exit(1);
    }
    else
        printf ("[Server] Listening the port %d successfully.\n", PORT);

    int success = 0;
    while(success == 0)
    {
        sin_size = sizeof(struct sockaddr_in);

        /* Wait a connection, and obtain a new socket file despriptor for single connection */
        if ((nsockfd = accept(sockfd, (struct sockaddr *)&addr_remote, &sin_size)) == -1) {
            fprintf(stderr, "ERROR: Obtaining new Socket Despcritor. (errno = %d)\n", errno);
            exit(1);
        }
        else 
            printf("[Server] Server has got connected from %s.\n", inet_ntoa(addr_remote.sin_addr));
        /*Receive File from Client */
        char* fr_name = "/home/ankita/context.2848";
        FILE *fr = fopen(fr_name, "a");
        if(fr == NULL)
            printf("File %s Cannot be opened file on server.\n", fr_name);
        else {
            bzero(revbuf, LENGTH); 
            int fr_block_sz = 0;
            int i=0;
            while((fr_block_sz = recv(nsockfd, revbuf, LENGTH, 0)) > 0) {
                printf("Data Received %d = %d\n",i,fr_block_sz);
                int write_sz = fwrite(revbuf, sizeof(char), fr_block_sz, fr);
                if(write_sz < fr_block_sz)
                    error("File write failed on server.\n");
                bzero(revbuf, LENGTH);
                i++;
            }
            if(fr_block_sz < 0) {
                if (errno == EAGAIN)
                    printf("recv() timed out.\n");
                else {
                    fprintf(stderr, "recv() failed due to errno = %d\n", errno);
                    exit(1);
                }
            }
            printf("Ok received from client!\n");
            fclose(fr); 
        }
        success = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:34:28.897

send 不保证发送您要求的所有数据，它可能会发送更少。您只检查发送中的错误，而不是检查发送的次数少于您的预期。recv 是一样的。因此，您的实施双方都有相同的错误。对于 localhost，您可能会侥幸成功，因为内核可以很聪明地向自己传输数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:38:45.913

您应该查看 recv 循环中的 if 语句。首先，条件是

```
fr_block_sz == 0 
```

永远不会发生，因为 while 循环检查 > 0。其次，我不明白如果 recv 没有得到 512 个字节，为什么要中断。（如果你真的想要，你应该把它改成 LENGTH。）你应该继续 recv 直到返回码为 0（在这种情况下套接字关闭）或负数（在这种情况下你有一个错误）。使用流套接字，接收方不一定会收到与发送方为每个请求的 IO 发送的相同数量的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:55:25.833

正如乔在他的回答中指出的那样，`send`并不总是发送所有数据。您可以按照[本指南](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#sendall)正确使用`send`.

只有当您尝试发送到另一台机器上的服务器时，您才会注意到这种行为，因为您遇到了[MTU](http://en.wikipedia.org/wiki/Maximum_transmission_unit)（即物理介质可以处理的最大数据大小）。如果我没记错的话，使用环回地址时，MTU 是 8K - 16K。我猜您的二进制文件大小恰好小于这，这就是为什么您仅在尝试发送到真实服务器后才观察到这一点的原因。而以太网介质的 MTU 为 1500 字节，相对而言要低得多。

# ios - 如何在 uitabbar 中弹出视图？

> ID：15760617
> 
> 赞同：0
> 
> 时间：2013-04-02T09:30:42.367
> 
> 标签：ios, objective-c, uitabbar, popviewcontroller

我使用 uitabbar 为 ios 开发了一个应用程序。在标签栏中，我有一些 uitableview 导致一些 uiview。例如：

A:Tabbar 按钮 -> B:Table View -> C:View 相对于用户点击的表格视图的行

标签栏的正常行为是，如果我单击直到我已指示为“C”的视图，然后单击另一个标签栏按钮并单击返回我已指示为“A”的标签栏按钮，我发现打开了查看“C”而不是“B”（由标签栏按钮调用的表格视图）。现在我希望标签栏始终通向它的第一个视图（在这种情况下 B，即使用户单击直到 C）为了做到这一点，我在我的 appdelegate 中使用此代码，以确保它甚至具有相同的行为在“更多按钮”的情况下。

```
UITabBarController* tabBarController2 = (UITabBarController*)self.window.rootViewController;

if ([viewController isKindOfClass:[UINavigationController class]]) {
    [tabBarController2.selectedViewController popToRootViewControllerAnimated:NO];
}
if (tabBarController2.selectedIndex < 4) {
    [tabBarController2.moreNavigationController popViewControllerAnimated:NO];
} 
```

有时，当它尝试弹出时，应用程序崩溃。我究竟做错了什么？

线

```
[tabBarController2.selectedViewController popToRootViewControllerAnimated:NO]; 
```

触发此警告“AppDelegate.m:27:10: 'UIViewController' 可能无法响应 'popToRootViewControllerAnimated:'”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:05:53.800

我建议您的一种方法是，在您的 UIView viewWillDisapear 方法中编写以下代码：

```
[self.navigationController popToRootViewControllerAnimated:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:02:31.203

```
popToRootViewControllerAnimated: 
```

这是 UINavigationController 类的一个方法，您将它用于 UITabBarController，它是 UIViewController 的子类。

尝试：

```
[(UINavigationController *)tabBarController2.selectedViewController popToRootViewControllerAnimated:NO]; 
```

# batch-file - 需要一个批处理文件

> ID：15760618
> 
> 赞同：-2
> 
> 时间：2013-04-02T09:30:48.297
> 
> 标签：batch-file

源路径“S:\nk\Reporting\03.2013”​​ 目标路径“S:\nk\final_reporting

想要将文件“Balance Sheet.xls”从源路径移动到目标路径

注意：（日期文件夹每月更改 ie04.2013、05.2013.... 等）

我可以有一个批处理文件来做这个活动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:23:00.340

```
@ECHO OFF
SETLOCAL
FOR %%i IN (20/11/2012 20/01/2012 20/01/2013 20/01/2009 20/04/2013 
            20/02/2013 20/03/2013 20/08/2012 20/09/2000 20/01/2000
       ) DO CALL :calc %%i
GOTO :eof

:calc
SET dayte=%1
SET today=%dayte:~0,2%-%dayte:~3,2%-%dayte:~-4%
SET /a lastmonth=%dayte:~-4%%dayte:~3,2%-1
IF %lastmonth:~-2%==00 SET /a lastmonth-=88
SET lastmonth=%lastmonth:~-2%.%lastmonth:~0,4%
ECHO with date=%dayte% today=%today% lastmonth=%lastmonth%

GOTO :eof 
```

第一个小问题是`%date%`MAGIC **VARIABLE**。它由操作系统提供。`HOWEVER`如果您分配一个值，`DATE`就像您对您的

```
set date="%date:~7,2%-%date:~4,2%-%date:~10,4%" 
```

然后环境变量`%date%`会覆盖**MAGIC VARIABLE**（所以不要这样做 -`%RANDOM%`和其他人一样......）

所以，我展示的代码使用了我的日期格式——你需要做的就是改变以适应你的。

本质上，`today`正在按照您的设置进行设置`date`

`lastmonth`设置为年份和月份的连接，然后减去一个，因此在 2013 年 4 月`lastmonth`将设置为`/a`表达式的算术结果 (201304 - 1) 那么，如果`lastmonth`现在的最后两个字符是“00”，那么日期是一月，所以减去 88，我们减去 1 年并加上 12 个月。100-12=88。

然后将结果重新格式化为所需的结构，一切就完成了！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T11:41:05.700

您需要从当前日期中提取月份和年份。问题`%date%`在于它没有可预测的格式，因为它可能会被用户更改。更可靠的方法是改用**wmic**。

试试这个代码让你开始

```
@echo off
FOR /F "skip=1 tokens=1-6" %%A IN ('WMIC Path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') DO (
  set /a mm=100+%%D
  set mmyyyy=%mm:~1%.%%F
)
echo move S:\nk\Reporting\%mmyyyy%\balance.xls S:\nk\final_reporting 
```

WMIC 返回没有前导零的月份，因此您必须使用简单的算术对其进行转换。

# javascript - 检查 jQuery 插件是否已应用于 Element

> ID：15760620
> 
> 赞同：6
> 
> 时间：2013-04-02T09:30:56.057
> 
> 标签：javascript, jquery, jquery-plugins

在 jQuery 中，如何检查特定插件是否在元素上处于活动状态？或者，我可以获取特定插件已应用于哪些元素的列表吗？

我无法控制插件的代码。我试过检查一个像

```
$("#example").fancybox 
```

但是对于每个元素都存在此属性，无论是否已应用插件。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:42:01.080

插件没有义务向外界宣传它增加了一个元素的事实。

也就是说，许多插件（包括任何使用[jQuery UI 小部件工厂的插件）使用 jQuery 的](http://api.jqueryui.com/jQuery.widget/)[data()](http://api.jquery.com/data/)工具将它们的名称注册到元素中。再说一次，并非所有插件都这样做。

# android - 方向更改后恢复 GridView 数据

> ID：15760624
> 
> 赞同：1
> 
> 时间：2013-04-02T09:31:06.507
> 
> 标签：android, android-orientation

我正在使用 GridView 将动态数据加载到我的活动中：

```
private ArticuloAdapter articuloAdapter;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);             
    setContentView(R.layout.grid_articulos);

    // get ListaArticulos from the database

    articuloAdapter = new ArticuloAdapter(this,R.layout.lista_articulo, ListaArticulos);
    grdArticulos.setAdapter(articuloAdapter);  
} 
```

我想在方向改变后恢复数据：

```
ArrayList<String> articulosBackup = new ArrayList<String>();   

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);            
    int size = grdArticulos.getChildCount();
    for(int i = 0; i < size; i++) {
        ViewGroup layout = (ViewGroup) this.grdArticulos.getChildAt(i);
        ViewGroup gridChild = (ViewGroup) layout.getChildAt(1);     

        EditText et =(EditText)gridChild.getChildAt(0).findViewById(R.id.Cantidad);           
        EditText et2 = (EditText)gridChild.getChildAt(1).findViewById(R.id.jaulas);           
        EditText et3 =(EditText)gridChild.getChildAt(2).findViewById(R.id.contenedores);          
        CheckBox cb = (CheckBox)gridChild.getChildAt(3).findViewById(R.id.manipulado);

        String dato = et.getText().toString() + ":" + et2.getText().toString() + ":" + et3.getText().toString() + ":" + String.valueOf(cb.isChecked());
        articulosBackup.add(dato);
    }
    outState.putSerializable("articulosBackup", articulosBackup);   
    outState.putInt("items", size);
} 
```

我将数据保存在 ArrayList 中，例如字符串，格式为：data1:data2:data3:data4。这很好用。但是现在当我尝试恢复它们时，我在注释的行中得到了 NullPointerException：

```
@SuppressWarnings("unchecked")
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);   

    articulosBackup = (ArrayList<String>)savedInstanceState.getSerializable("articulosBackup"); 
    items           = savedInstanceState.getInt("items");      

    if (articulosBackup != null) {          
        for(int i = 0; i < items; i++) {
            ViewGroup layout    = (ViewGroup) grdArticulos.getChildAt(i);
            ViewGroup gridChild = (ViewGroup) layout.getChildAt(1); // NULLPOINTEREXECPTION: layout variable is null

            String datos[] = articulosBackup.get(i).split(":");

            // Cantidad
            EditText et =(EditText)gridChild.getChildAt(0).findViewById(R.id.Cantidad);
            et.setText(datos[0]);

            // Jaulas
            EditText et2 = (EditText)gridChild.getChildAt(1).findViewById(R.id.jaulas);
            et2.setText(datos[1]);

            // Contenedores
            EditText et3 =(EditText)gridChild.getChildAt(2).findViewById(R.id.contenedores);
            et3.setText(datos[2]);

            //  Manipulado
            CheckBox cb = (CheckBox)gridChild.getChildAt(3).findViewById(R.id.manipulado);
            cb.setChecked(Boolean.parseBoolean(datos[3]));
        }
    } 
} 
```

所以我的问题是：如何在方向改变后恢复我的动态 GridView？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:37:25.540

您的保存和恢复方法应用于小数据，例如原始值。对于像arraylist、数据库这样的大型数据集，您应该覆盖onRetainNonConfigurationInstance() 并返回对象。

注意：虽然您可以返回任何对象，但绝不应传递与 Activity 相关联的对象，例如 Drawable、Adapter、View 或与 Context 关联的任何其他对象。如果这样做，它将泄漏原始活动实例的所有视图和资源。（资源泄漏意味着您的应用程序会保留它们，并且不能对它们进行垃圾回收，因此可能会丢失大量内存）。

您应该覆盖 onRetainNonConfigurationInstance() 并返回数组列表。

有关更多信息，请查看此处的链接。[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

```
@Override
public Object onRetainNonConfigurationInstance() {

return arraylist;//return arraylist
}

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final ArrayList data = (ArrayList ) getLastNonConfigurationInstance();
if (data == null) { //if data is null populate data to arraylist.
 //do something  
}
// use arraylist
} 
```

一旦方向改变，活动就会重新创建。所以返回 onRetainNonConfigurationInstance() 中的值。在 onCreate() 中提供返回的值。

例子：

```
 @Override
   public Object onRetainNonConfigurationInstance() {

   return mPostingData; 
   } 
```

在 onCreate()

```
 final ArrayList data = (ArrayList) getLastNonConfigurationInstance();
      if (data == null) {
          System.out.println("data is null");
      //populate arraylist with values.
      }
      else
      {
           for(int i=0;i<data.size();i++)
           System.out.println("data is not null..."+data.get(i)); 
      } 
```

# vba - 使用 VBA 将数据从 Excel 导出到现有的 PowerPoint 幻灯片

> ID：15760629
> 
> 赞同：5
> 
> 时间：2013-04-02T09:31:22.890
> 
> 标签：vba, excel, powerpoint

我正在为一些简单的数据分析编写一个小的 excel 插件，但不幸的是我不是 VBA 程序员；）

到目前为止我所做的：

*   从庞大的 Excel 工作簿中获取数据并执行计算
*   将结果写入一个预先格式化好的 excel 'skeleton' 文件

我接下来要做什么：

*   直接从 excel vba 代码将相同的数据写入也**已经准备好的 ppt幻灯片。**

我认为可以在幻灯片中定义某种文本框，然后将值放入其中......只是还没有找到任何东西！

对此的任何帮助表示赞赏；）

这是 excel&powerpoint 2007，但我想尽可能独立于版本。

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:20:47.627

这是我在[Mahipal Padigela 的 VBA 网站上找到的一些代码](http://mahipalreddy.com/vba.htm)

（它也在[StackOverFlow](https://stackoverflow.com/questions/3424712/excel-vba-excel-macro-to-create-table-in-a-powerpoint/3424969#3424969)上被引用）

```
''# Code by Mahipal Padigela
''# Open Microsoft Powerpoint,Choose/Insert a Table type Slide(No.4), then double click to add a...
''# ...Table(3 Cols & 2 Rows) then rename the Table to "Table1", Save and Close the Presentation
''# Open Microsoft Excel, add some test data to Sheet1(This example assumes that you have some data in...
''# ... Rows 1,2 and Columns 1,2,3)
''# Open VBA editor(Alt+F11),Insert a Module and Paste the following code in to the code window
''# Reference 'Microsoft Powerpoint Object Library' (VBA IDE-->tools-->references)
''# Change "strPresPath" with full path of the Powerpoint Presentation created earlier.
''# Change "strNewPresPath" to where you want to save the new Presnetation to be created later
''# Close VB Editor and run this Macro from Excel window(Alt+F8) 

Dim oPPTApp As PowerPoint.Application
Dim oPPTShape As PowerPoint.Shape
Dim oPPTFile As PowerPoint.Presentation
Dim SlideNum As Integer
Sub PPTableMacro()
    Dim strPresPath As String, strExcelFilePath As String, strNewPresPath As String
    strPresPath = "H:\PowerPoint\Presentation1.ppt"
    strNewPresPath = "H:\PowerPoint\new1.ppt"

    Set oPPTApp = CreateObject("PowerPoint.Application")
    oPPTApp.Visible = msoTrue
    Set oPPTFile = oPPTApp.Presentations.Open(strPresPath)
    SlideNum = 1
    oPPTFile.Slides(SlideNum).Select
    Set oPPTShape = oPPTFile.Slides(SlideNum).Shapes("Table1")

    Sheets("Sheet1").Activate
    with oPPTShape.Table
        .Cell(1, 1).Shape.TextFrame.TextRange.Text = Cells(1, 1).Text
        .Cell(1, 2).Shape.TextFrame.TextRange.Text = Cells(1, 2).Text
        .Cell(1, 3).Shape.TextFrame.TextRange.Text = Cells(1, 3).Text
        .Cell(2, 1).Shape.TextFrame.TextRange.Text = Cells(2, 1).Text
        .Cell(2, 2).Shape.TextFrame.TextRange.Text = Cells(2, 2).Text
        .Cell(2, 3).Shape.TextFrame.TextRange.Text = Cells(2, 3).Text
    end with 

    oPPTFile.SaveAs strNewPresPath
    oPPTFile.Close
    oPPTApp.Quit

    Set oPPTShape = Nothing
    Set oPPTFile = Nothing
    Set oPPTApp = Nothing

    MsgBox "Presentation Created", vbOKOnly + vbInformation
End Sub 
```

这里有一些关于[使用 VBA](http://chandoo.org/wp/2011/08/03/create-powerpoint-presentations-using-excel-vba/)和[http://www.mahipalreddy.com/vba/ppvba.htm 自动化 Powerpoint 的额外帮助](http://www.mahipalreddy.com/vba/ppvba.htm)

要获取单个幻灯片的名称，请尝试以下操作：

```
Dim oSlide As Slide

For Each oSlide In ActiveWindow.Presentation.Slides
    Debug.Print oSlide.Name
Next
End Sub 
```

那应该*电源*指向正确的方向！（太可笑了）

菲利普

# c# - 禁用应用程序的鼠标悬停效果

> ID：15760630
> 
> 赞同：0
> 
> 时间：2013-04-02T09:31:24.307
> 
> 标签：c#, winforms, cursor

有没有办法为 winforms 应用程序的所有控件禁用鼠标悬停效果？我知道你可以通过循环所有控件来做到这一点，但我宁愿在应用程序级别上做到这一点。

背景是，我想禁用整个应用程序的输入（我通过`IMessageFilter`）。用户应该仍然能够移动鼠标但不能单击它。这工作得很好，但是控件上的悬停效果仍然存在。

* * *

**编辑：**

例如，如果您将鼠标移到一个按钮上，则表示一旦鼠标移到该控件上，您就可以单击它

该应用程序由多个可能的打开表单组成，每个表单都可以启动一个后台工作者（线程），我需要从中控制应用程序的行为。所以我真的很想避免弄乱 GUI 线程问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:40:26.080

您可以从创建自己的按钮类开始并覆盖 MouseEnter 事件：

```
 protected override void OnMouseEnter(EventArgs e)
 {
     if (shouldBeEnabled)
     {
         base.OnMouseEnter(e);
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:09:50.090

在我看来，您只是想禁用顶级窗口。这将解决您的所有问题并消除对`IMessageFilter`代码的需求。你最终会得到极少量的代码。

您需要 p/invoke[`EnableWindow`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646291.aspx)来自 user32 的 API 调用：

```
[DllImport("user32.dll")]
static extern bool EnableWindow(IntPtr hWnd, bool bEnable); 
```

然后，您可以像这样控制表单的可用性：

```
EnableWindow(MyForm.Handle, false); // disable form
EnableWindow(MyForm.Handle, true);  // enable form 
```

# php - 带有 iframe 的 Javascript 页面加载时间

> ID：15760631
> 
> 赞同：0
> 
> 时间：2013-04-02T09:31:25.760
> 
> 标签：php, javascript

我有这个简单的 javascript，它给了我一个 url 的加载时间：

```
var beforeLoad = (new Date()).getTime();
$('#myiframe').one('load', function() {
    var afterLoad = (new Date()).getTime();
    var result = (afterLoad - beforeLoad) / 1000;
    $("#loadingtime").html(result);
}); 
```

`#myiframe`= iframe 的 id，`#loadingtime`= 我存储结果的 div。

这是其余的代码：

```
<?php $url = 'example.com'; ?>
<iframe width="200" height="200" id="myiframe" src="http://www.<?php echo $url;?>"></iframe>
<div id="loadingtime"></div> 
```

当我只有 1 个 url 时，这一切都很好。我想要一个url数组：

```
$url = array();
$url[] = 'example1.com';
$url[] = 'example2.com'; 
```

然后让它加载第一个 url，计算加载时间，从数组中加载下一个 url 并计算该 url 的加载时间等等。有什么建议我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:41:14.273

PHP

```
$url = array();
$url[] = 'example1.com';
$url[] = 'example2.com';

foreach($url as $u){
   echo '<div class="frame_container">
            <iframe width="200" height="200" id="myiframe" src="http://www.'.$u.'"></iframe>
            <div class="loadingtime"></div>
         </div>';
} 
```

Javascript

```
var beforeLoad = (new Date()).getTime();
$('.frame_container iframe').on('load', function() {
    var afterLoad = (new Date()).getTime();
    var result = (afterLoad - beforeLoad) / 1000;
    $(this).parent().find('div.loadingtime').html(result);
}); 
```

# asp.net - DropDownList 中的 ListItems 属性在回发后丢失？

> ID：15760632
> 
> 赞同：1
> 
> 时间：2013-04-02T09:31:32.157
> 
> 标签：asp.net, vb.net, drop-down-menu, postback, listitem

我在下拉列表数据绑定事件期间手动添加了一些附加属性。但是，回发后该属性丢失。我发现[DropDownList中ListItems属性的相关问题在回发时丢失了？](https://stackoverflow.com/questions/1313447/listitems-attributes-in-a-dropdownlist-are-lost-on-postback?answertab=active#tab-top)我完全按照解决方案。

这就是我所拥有的

下拉列表数据绑定事件 *.aspx.vb，我在每个列表项中添加了属性“类”

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    If Not IsPostBack Then
        ddlCountry.DataBind()
    End If
End Sub

Protected Sub ddlCountry_DataBound(ByVal sender As Object, ByVal e As System.EventArgs) Handles ddlCountry.DataBound
    Dim ddlCountryList As DropDownList = LocationBLL.GetDropDownList("Country", "C", "C", False, "")
    Dim lstPleaseSelect As ListItem = New ListItem("Please Select", "-1")
    Dim lstOthers As ListItem = New ListItem("Others", "0")

    lstPleaseSelect.Attributes("class") = "-1"
    lstOthers.Attributes("class") = "-1"

    ddlCountry.Items.Add(lstPleaseSelect)
    For Each lstItem As ListItem In ddlCountryList.Items
        lstItem.Attributes("class") = lstItem.Value
        ddlCountry.Items.Add(lstItem)
    Next
    ddlCountry.Items.Add(lstOthers)
End Sub 
```

*.aspx

```
<%@ Register TagPrefix="msjNewControls" Namespace="NewControls"%> 
```

*.aspx

```
<msjNewControls:NewDropDownList ID="ddlCountry" runat="server" AutoPostBack="False" >
</msjNewControls:NewDropDownList> 
```

类文件 *.vb

```
Imports System.Collections.Generic
Imports System.ComponentModel
Imports System.Security.Permissions
Imports System.Linq
Imports System.Text
Imports System.Web
Imports System.Web.UI
Imports System.Web.UI.WebControls

Namespace NewControls
<DefaultProperty("Text")> _
<ToolboxData("<{0}:ServerControl1 runat=server></{0}:ServerControl1>")> _
Public Class NewDropDownList
    Inherits DropDownList

    <Bindable(True)> _
    <Category("Appearance")> _
    <DefaultValue("")> _
    <Localizable(True)> _
    Protected Overrides Function SaveViewState() As Object
        ' create object array for Item count + 1
        Dim allStates As Object() = New Object(Me.Items.Count) {}

        ' the +1 is to hold the base info
        Dim baseState As Object = MyBase.SaveViewState()
        allStates(0) = baseState

        Dim i As Int32 = 1
        ' now loop through and save each Style attribute for the List
        For Each li As ListItem In Me.Items
            Dim j As Int32 = 0
            Dim attributes As String()() = New String(li.Attributes.Count - 1)() {}
            For Each attribute As String In li.Attributes.Keys
                attributes(System.Math.Max(System.Threading.Interlocked.Increment(j), j - 1)) = New String() {attribute, li.Attributes(attribute)}
            Next
            allStates(System.Math.Max(System.Threading.Interlocked.Increment(i), i - 1)) = attributes
        Next
        Return allStates
    End Function

    Protected Overrides Sub LoadViewState(ByVal savedState As Object)
        If savedState IsNot Nothing Then
            Dim myState As Object() = DirectCast(savedState, Object())

            ' restore base first
            If myState(0) IsNot Nothing Then
                MyBase.LoadViewState(myState(0))
            End If

            Dim i As Int32 = 1
            For Each li As ListItem In Me.Items
                ' loop through and restore each style attribute
                For Each attribute As String() In DirectCast(myState(System.Math.Max(System.Threading.Interlocked.Increment(i), i - 1)), String()())
                    li.Attributes(attribute(0)) = attribute(1)
                Next
            Next
        End If
    End Sub
End Class
End Namespace 
```

但是我仍然在我的类文件中收到以下错误。

```
Exception Details: System.InvalidCastException: Unable to cast object of type 'System.Collections.DictionaryEntry' to type 'System.Web.UI.WebControls.ListItem'.

Source Error: 

Line 34:                     attributes(System.Math.Max(System.Threading.Interlocked.Increment(j), j - 1)) = New String() {attribute, li.Attributes(attribute)}

Source File: D:\root\App_Code\BLL\CustomDropDownListBLL.vb    Line: 34 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-16T12:47:23.630

我发现 ddl 中唯一保留的值是文本和值。因此，我编写了以下代码来保持用户标记为高优先级的颜色编码和粗体列表项。这在 SelectedIndexChanged 事件中对我有用。由于 HighPriority 标志存储在 SQL 中，我将 ListItem 文本的第一个字符设置为 ! 返回数据行时。Also, I found that when an item is selected that the Forecolor attribute still would not apply, so i used the bSetSelected flag to set the ForeColor to the appropriate color as needed.

```
 Private Sub ddlYourDropDownList_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ddlYourDropDownList.SelectedIndexChanged

    Try
        'do your processing here, then reset the attributes below

        'color code high priority requests in Red
        Dim li As ListItem, bSetSelected As Boolean = False
        For Each li In ddlYourDropDownList.Items
            'see if this is a High Priority item, SQL Proc places the ! at the start of the string
            If li.Text.Substring(0, 1) = "!" Then
                li.Attributes.Add("style", "color:Red; font-weight: bold;")
                'once we set the selected one, no need to change ForeColor anymore
                If Not bSetSelected Then
                    If li.Selected Then
                        ddlYourDropDownList.ForeColor = Drawing.Color.Red
                        bSetSelected = True
                    Else
                        ddlYourDropDownList.ForeColor = Drawing.Color.Black
                    End If
                End If
            Else
                li.Attributes.Add("style", "color:Black; font-weight: normal;")
            End If
        Next

    Catch ex As Exception
        lblMessage.Text = "Error: " & ex.Message
    End Try
End Sub 
```

# browser - 默认浏览器提示

> ID：15760634
> 
> 赞同：0
> 
> 时间：2013-04-02T09:31:42.647
> 
> 标签：browser, windows-7

我想在 IE 中打开一些链接，在 Chrome (Windows 7) 中打开一些链接。我的想法是将我的默认“浏览器”设置为一个简单的（希望是免费的）应用程序，该应用程序有一个对话框，询问我想在哪个浏览器中打开 http:// 链接。有没有人已经找到/制作了这样的实用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:56:01.977

没有人，所以我推出了自己的 - 介绍[OptiBrowser](https://github.com/cawoodm/optibrowser) - BOOM！

# c++ - 使用对指针的引用而不是指向指针的指针（双指针）

> ID：15760637
> 
> 赞同：0
> 
> 时间：2013-04-02T09:31:43.573
> 
> 标签：c++, pass-by-reference

我已经编写了一个函数来查找 3 个指针指向的 3 个变量中的最小值，并且在函数调用之后我想要更新指向 min 的指针。价值。

为了实现这一点，我使用了指向指针的指针。我可以使用对指针变量的引用而不是指向指针（双指针）的指针来使代码干净吗？

```
int findRange(int p1,int p2, int p3)
{
    return max(max(abs(p1-p2),abs(p2-p3)),abs(p3-p1));
}

int** findMin( int **p1,int **p2,int **p3)
{
    int **m = p1;
    if (**m > **p2) m = p2;
    if (**m > **p3) return p3;
    return m;
}

int main()
{
    struct _a{
        int a,b,c;
    } result;
    int a[]={2, 10, 15, 24, 26,-1};
    int b[]={0, 9, 12, 20,-1};
    int c[]={10, 18, 22, 30,-1};
    int i=0;
    int *p1=a,*p2=b,*p3=c;
    int min=INT_MAX;
    int **t;
    while((*p1 != -1)&&(*p2!=-1)&&(*p3!=-1))
    {
        int range=findRange(*p1,*p2,*p3);
        if(range<min){
        result.a=*p1;
        result.b=*p2;
        result.c=*p3;
        min=range;
        }
        t=findMin(&p1,&p2,&p3);

        (*t)++;

    }
    (*t)--;
    cout<<result.a<<"'"<<result.b<<"'"<<result.c<<"' range="<<min<<endl;

    return 0;
} 
```

# jquery - 如何添加选择框表单验证

> ID：15760638
> 
> 赞同：0
> 
> 时间：2013-04-02T09:31:44.493
> 
> 标签：jquery, forms, validation

我在我的网站上使用这个表单验证脚本：

```
$(document).ready(function(){
    // Place ID's of all required fields here.
    required = ["name", "email", "country", "message",];
    // If using an ID other than #email or #error then replace it here
    email = $("#email");
    errornotice = $("#error");
    // The text to show up within a field when it is incorrect
    emptyerror = "Please enter a value in field";
    emailerror = "Please enter a valid e-mail.";

    $("#theform").submit(function(){    
        //Validate required fields
        for (i=0;i<required.length;i++) {
            var input = $('#'+required[i]);
            if ((input.val() == "") || (input.val() == emptyerror)) {
                input.addClass("needsfilled");
                input.val(emptyerror);
                errornotice.fadeIn(750);
            } else {
                input.removeClass("needsfilled");
            }

        }
        // Validate the e-mail.
        if (!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email.val())) {
            email.addClass("needsfilled");
            email.val(emailerror);
        }

        //if any inputs on the page have the class 'needsfilled' the form will not submit
        if ($(":input").hasClass("needsfilled")) {
            return false;
        } else {
            errornotice.hide();
            return true;
        }
    });

    // Clears any fields in the form when the user clicks on them
    $(":input").focus(function(){       
       if ($(this).hasClass("needsfilled") ) {
            $(this).val("");
            $(this).removeClass("needsfilled");
       }
    });
}); 
```

问题是我没有选择框的代码

谁能给我验证选择框的代码？我的选择框名称和 ID 是“国家”，如果选择停留在“国家”，我想要一个错误通知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:48:55.660

使用选定的选项属性

```
var country = $('#country option:selected').val(); 
```

因为你的代码循环会喜欢

```
for (i=0;i<required.length;i++) {
        var input = $('#'+required[i]);

        if(input.attr('id')== 'country' && $('#country option:selected').val() == "") {
            input.addClass("needsfilled");
            input.val(emptyerror);
            errornotice.fadeIn(750);

        }else if ((input.val() == "") || (input.val() == emptyerror)) {
            input.addClass("needsfilled");
            input.val(emptyerror);
            errornotice.fadeIn(750);
        } else {
            input.removeClass("needsfilled");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:33:37.017

尝试

```
var cntry = $("#country").val();
if(empty(cntry))
{
     alert('Select a country');
     return false;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:46:07.470

你在搜索[http://jsfiddle.net/X5r8r/1109/](http://jsfiddle.net/X5r8r/1109/)

```
<select id="ddlViewBy">
<option value=""></option>    
<option value="1">test1</option>
<option value="2">test2</option>
<option value="3">test3</option>
</select>

<button id="submit"> submit </button>

$(document).ready(function(){
    $("#submit").click(function(){
        var select_box_value = $("#ddlViewBy").val();
        if(select_box_value == ""){
            alert('select value')
        }else{
        alert('success')
        }
    });
}); 
```

# asp.net-mvc - 初始化视图模型

> ID：15760641
> 
> 赞同：1
> 
> 时间：2013-04-02T09:31:45.823
> 
> 标签：asp.net-mvc, asp.net-mvc-3

例如，我将展示的所有代码。我有视图模型

```
public class ViewModel
{
    public User SomeUser { get; set; }
    public ViewModel()
    {

    }
    public ViewModel(int id)
    {
        SomeUser = someservice.getUserById(id);
    }
} 
```

我有控制器

```
 public partial class SomeController
    {
        public ActionResult Edit(int id)
        {
            var model = new ViewModel(id);
            return View("Documents/Edit", model);
        }

        [HttpPost]
        public ActionResult Edit(ViewModelmodel model)
        {
            if (ModelState.IsValid)
            {
                TempData["Save"] = true;
                return RedirectToAction("Edit", new { id = model.Id });
            }
            return View("someview", model);
        }
} 
```

在视图中我有形式并且在视图中我显示

```
<b>Model.SomeUser.Name</b> 
```

当我去 SomeController/Edit/3.In viemodel someUser 属性在构造函数中初始化。但是当我回发我的 viewmodel 初始化构造函数时没有参数并且如果模型状态无效，someUser 属性为空。所以我得到空引用异常。处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:01:38.197

您`ViewModel`不应该真正负责调用服务，它应该只是在您的`View`. 我会保持简单。

```
public class ViewModel
{
    public User SomeUser { get; set; }
} 
```

因此，您的常规 Edit 操作可以从您的服务中初始化*SomeUser*属性。

```
public ActionResult Edit(int id)
{
    var model = new ViewModel()
    {
        SomeUser = someservice.getUserById(id);
    };
    return View("Documents/Edit", model);
} 
```

现在来发帖。当`id`您提交表单时，应该仍然在查询字符串中，因此您可以在操作的参数以及保存表单数据的模型中绑定到它。

```
[HttpPost]
public ActionResult Edit(int id, ViewModel model)
{
    if (ModelState.IsValid)
    {
        TempData["Save"] = true;
        return RedirectToAction("Edit", new { id = id });
    }
    return View("someview", model);
} 
```

现在，我现在确定你的`View`样子，但实际上，你的`ViewModel`不包含任何可以提交和绑定的属性。这是一个编辑用户页面，您可能会在`ViewModel`它之后看到您正在编辑的内容。

```
public class ViewModel
{
    public string Username { get; set; }
    public int Age { get; set; }
}

public ActionResult Edit(int id)
{
    var user = someService.getUserById(id)
    var model = new ViewModel()
    {
        Username = user.Username,
        Age = user.Age
    };
    return View("Documents/Edit", model);
} 
```

现在，如果您在表单中使用 Html 助手...

```
@Html.TextBoxFor(m => m.Username)
@Html.TextBoxFor(m => m.Age) 
```

...然后您的属性将自动绑定在 post 操作中。

```
[HttpPost]
public ActionResult Edit(int id, ViewModel model)
{
    if (ModelState.IsValid)
    {
        var user = someService.getUserById(id);

        user.Username = model.Username;
        user.Age = model.Age;

        TempData["Save"] = true;
        return RedirectToAction("Edit", new { id = id });
    }
    return View("someview", model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:00:43.803

这完全取决于您的要求。

对于您问题中的代码，您可以重用您的 GET 方法：

```
[HttpPost]
public ActionResult Edit(int id, ViewModelmodel model)
{
  if ( !ModelState.IsValid ) return Edit( id );
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:06:22.327

应该更详细地描述问题。你用什么模式？

1）如果是 MVC（因为 SomeController 类和 ActionResult），那么：

```
[HttpPost]
public ActionResult Edit(int id, ViewModel model) {
if (ModelState.IsValid) {
TempData["Save"] = true;
return RedirectToAction("Edit", new { id = id });
}
return View("someview", model);
} 
```

这应该有效。

2）如果是 MVVM（因为 ViewModel），那么你可以使用 MVVMlight，它可以通过消息帮助你：

//从你的模型视图发送：

```
Messenger.Default.Send(“Hello world”); 
```

//在另一个模型视图中添加：

```
Messenger.Default.Register<string>(this, DoSomething); 
```

// 更远

```
private void DoSomething(string message) {
// what to do with it...
} 
```

但在这里我遇到了 Galasoft 的问题...Win8.dll

# css - @media screen：视口还是窗口大小？

> ID：15760642
> 
> 赞同：4
> 
> 时间：2013-04-02T09:31:50.607
> 
> 标签：css

再会

我有点困惑，可能是因为我有一段时间没有使用媒体查询了：

使用时

```
@media screen and (max-width:1024px){

} 
```

它是指**视口大小**（页面的可查看部分）还是**窗口大小**（包括滚动条等）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:33:48.790

它指的是视口的宽度：

[http://www.w3.org/TR/css3-mediaqueries/#width](http://www.w3.org/TR/css3-mediaqueries/#width)

[媒体查询最大宽度与视口大小或窗口大小有关？](https://stackoverflow.com/questions/13182201/media-query-max-width-relates-to-the-view-port-size-or-the-windows-size)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T09:36:53.023

```
@media screen

html{
width: 1024px;
} 
```

这可能会帮助你。

# html - 使用css将不同高度但相同宽度的图像对齐到整个div中

> ID：15760648
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:31:56.993
> 
> 标签：html, image, css

大家好，我正在创建一个 div，其中包含相同宽度但不同高度的图像，例如 cutdogpix.com。但是，如果只有宽度和高度相同，它们似乎没有正确对齐和正确对齐。任何Idedas。请它会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:04:41.680

您可以通过多种方式解决这个问题，其中最简单的是 masonry plugin [masonry pluging page](http://masonry.desandro.com/)。在该页面上，您可以找到文档、示例所有内容。玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:45:45.443

## 让方块漂浮

您可以将图像内容拆分为列，并使它们向左浮动。如果你有几个列，你会得到一个非常相似的效果，就像你在那里给的页面一样。

## 例子

在这里你可以找到我为你准备的东西：`(http://jsfiddle.net/AuvGv/1/)`

# android - Android RelativeLayout 参数被忽略

> ID：15760649
> 
> 赞同：1
> 
> 时间：2013-04-02T09:31:58.263
> 
> 标签：android, android-relativelayout, android-custom-view

我遇到了一个奇怪的问题：我有一个从 RelativeLayout 扩展的类。

然后我想像这样添加两个视图：

```
mButtonTip = new ButtonTip(context, attrs);
mToolTip = new ToolTip(context, attrs);

RelativeLayout.LayoutParams params1 = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params1.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);

RelativeLayout.LayoutParams params2 = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params2.addRule(RelativeLayout.ALIGN_BOTTOM, mToolTip.getId());

addView(mToolTip, params1);
addView(mButtonTip, params2); 
```

不幸的是，mToolTip 视图已正确放置，但 mButtonTip 不会从布局的左下角移动。

您知道为什么 mButtonTip 视图忽略了我刚刚设置的布局参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:25:08.073

好的，所以对于那些可能遇到同样问题的人，我找到了一个解决方案：

我需要像这样明确设置不同视图的 id：

```
mButtonTip = new ButtonTip(context, attrs);
mButtonTip.setId(1);

mToolTip = new ToolTip(context, attrs);
mToolTip.setId(2);

RelativeLayout.LayoutParams params1 = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params1.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);

RelativeLayout.LayoutParams params2 = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params2.addRule(RelativeLayout.ALIGN_BOTTOM, mToolTip.getId());

addView(mToolTip, params1);
addView(mButtonTip, params2); 
```

# java - 什么是 WSO2 授权以及它与 Oauth 有何不同？

> ID：15760650
> 
> 赞同：2
> 
> 时间：2013-04-02T09:32:00.927
> 
> 标签：java, authentication, oauth, wso2, wso2is

我对 Oauth 有一些想法，它是一个开放的标准框架，它通过创建一个令牌并使用它来访问一些资源来帮助授权过程。我在 Google 上搜索了一些关于 WSO2 的信息，我了解到它提供了面向服务的解决方案

最近我的学长说我们需要搬到WSO2。我不明白他的意思。所以我再次进行了一些搜索，我发现 WSO2 有一个身份服务器，它有助于授权。

我建议我们可以使用 OAuth 进行授权。但我的前辈坚持说我们必须使用 WSO2。

所以我想知道什么是 WSO2 授权以及它与 OAuth 有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:05:45.817

WSO2 IS 是身份和权利管理服务器。它有助于企业 Web 应用程序、服务和 API 的安全和身份管理，并支持 OpenID、信息卡、XACML 和 SAML 2.0

WSO2 也支持 Oauth2。请参考。

[http://docs.wso2.org/wiki/display/IS410/Managing+OAuth](http://docs.wso2.org/wiki/display/IS410/Managing+OAuth)

[http://blog.facilelogin.com/2012/08/wso2-oauth-20-playground-with-wso2.html](http://blog.facilelogin.com/2012/08/wso2-oauth-20-playground-with-wso2.html)

请参考

[http://docs.wso2.org/wiki/display/IS410/WSO2+Identity+Server+Documentation](http://docs.wso2.org/wiki/display/IS410/WSO2+Identity+Server+Documentation)

对于其他支持的授权机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:11:00.987

是的，您可以使用 WSO2 IS 作为授权。此外，您可以将 Oauth 与 WSO2 IS 一起使用。

以下帖子将得到充分的帮助。

[1] [http://docs.wso2.org/wiki/display/IS410/WSO2+Identity+Server+Documentation](http://docs.wso2.org/wiki/display/IS410/WSO2+Identity+Server+Documentation)

[2] [http://blog.facilelogin.com/2012/08/wso2-oauth-20-playground-with-wso2.html](http://blog.facilelogin.com/2012/08/wso2-oauth-20-playground-with-wso2.html)

[3] [http://blog.facilelogin.com/2012/08/wso2-oauth-20-playground-with-wso2.html](http://blog.facilelogin.com/2012/08/wso2-oauth-20-playground-with-wso2.html)

# ruby-on-rails - 根据另一个字段的存在验证一个字段

> ID：15760652
> 
> 赞同：0
> 
> 时间：2013-04-02T09:32:03.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我有 2 个字段：

```
attr_accessible :in_home #=> boolean, setted at false by default
mount_uploader :carousel_picture, CarouselUploader#=>an image picture with CarrierWave + Rmagick. Nil by default
attr_accessible :carousel_picture 
```

我的问题是：我试图验证这样一个事实，即当用户选中“in_home”复选框时，他应该上传了一个“carousel_picture”

```
 validates :in_home, :if => Proc.new { |obj| (obj.in_home && obj.carousel_picture?) == true }, :presence => {:message => "You should upload a carousel picture to set the item in the home page."}, 
```

但是这个验证不起作用，我可以创建一个对象，检查 in_home 并且 carousel_picture 为空。

当我在我的 Rails 控制台中尝试之后：

```
1.9.3p362 :001 > obj = MyObject.all.last
  => #<Gift id: 22, name: "foo", created_at: "2013-04-02 09:13:00", updated_at: "2013-04-02 09:13:00", carousel_picture: nil, in_home: true>
1.9.3p362 :002 > obj.in_home && obj.carousel_picture?
  => false 
```

所以我认为在我如何验证一个字段时有些东西我不明白。任何帮助都会很有用！先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:56:50.130

试试这个，

```
validates_presence_of :carousel_picture, :if => lambda {|obj| obj.in_home == true} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:01:23.550

我最近试图做类似的事情，我认为下面的代码应该适合你：

```
validates :carousel_picture, :presence => { :if => Proc.new { |a| a.in_home? }, message: "You should upload a carousel picture to set the item in the home page." } 
```

# c# - C#在backgroundworker dowork事件中获取文本框值

> ID：15760654
> 
> 赞同：5
> 
> 时间：2013-04-02T09:32:23.620
> 
> 标签：c#, multithreading, winforms, thread-safety, backgroundworker

在我的 Windows 窗体应用程序中，我有一个`textbox`和`backgroundworker`组件。如果我试图访问文本框的值`dowork`。`backgroundworker`我怎样才能做到这一点？当我尝试访问文本框的值时，dowork 事件处理程序代码中出现以下异常：

```
Cross-thread operation not valid: Control 'txtFolderName' accessed from a thread other than the thread it was created on` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:34:08.537

您只能`textbox / form controls`在*GUI 线程*中访问，您可以这样做。

```
if(txtFolderName.InvokeRequired)
{
    txtFolderName.Invoke(new MethodInvoker(delegate { name = txtFolderName.text; }));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T09:38:03.883

试试这个

```
 txtFolderName.Invoke((MethodInvoker)delegate
            {
                string strFolderName = txtFolderName.Text;
            }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T09:33:58.300

您需要使用[MethodInvoker](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker.aspx)。像：

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += delegate(object sender, DoWorkEventArgs e)
 {
       MethodInvoker mi = delegate { txtFolderName.Text = "New Text"; };
       if(this.InvokeRequired)
           this.Invoke(mi);
 }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T09:34:16.933

您将不得不在主线程上调用您的 TextBox。

```
tb.Invoke((MethodInvoker) delegate
{
    tb.Text = "Update your text";
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T09:35:20.087

试试这个：

```
void DoWork(...)
{
    YourMethod();
}

void YourMethod()
{
    if(yourControl.InvokeRequired)
        yourControl.Invoke((Action)(() => YourMethod()));
    else
    {
        //Access controls
    }
} 
```

希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-09T09:37:17.620

这是我使用的另外两种方法。

```
 //save the text value of txtFolderName into a local variable before run the backgroundworker. 
    string strFolderName;
    private void btnExe_Click(object sender, EventArgs e)
    {
        strFolderName = txtFolderName.text;
        backgroundworker.RunWorkerAsync();
    }

    private void backgroundworker_DoWork(object sender, DoWorkEventArgs e)
    {
        backgroundworkerMethod(strFolderName);//get the value from strFolderName
        ...
    }

    ----------------------------------------------------
    private void btnExe_Click(object sender, EventArgs e)
    {
        backgroundworker.RunWorkerAsync(txtFolderName.text);//pass the value into backgroundworker as parameter/argument
    }

    private void backgroundworker_DoWork(object sender, DoWorkEventArgs e)
    {
        backgroundworkerMethod(e.Argument.ToString());//get the value from event argument
        ...
    } 
```

# ruby-on-rails - 在 Rails 中通过 javascript 提交表单

> ID：15760656
> 
> 赞同：0
> 
> 时间：2013-04-02T09:32:27.770
> 
> 标签：ruby-on-rails

我在 Rails 3 中找到了部分答案[：如何通过 javascript 触发表单提交？](https://stackoverflow.com/questions/4904101/rails-3-how-to-trigger-a-form-submission-via-javascript)

我可以触发表单提交

```
$("#form_id").trigger("submit.rails"); 
```

但是我找不到一种方法来传递一些值来提交，就像我将“back_button”发送到控制器一样

```
<%= f.submit "Back", class: "btn", :name => "back_button" %> 
```

有没有办法在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T21:05:15.327

经过一天的谷歌搜索和测试，我找到了一个可行的解决方案。对于那些可能遇到同样问题的人，这里是代码：

```
var data = $("#my_form_id").serializeArray();
data.push({"name":"your_key_to_add_to_submit","value":"your_value"});

$.post("url_for_submit", $.param(data), null, "script"); 
```

# gis - 使用 Openlayers 在来自外部 KML 文件的 openstreetmap 中显示地标名称

> ID：15760659
> 
> 赞同：0
> 
> 时间：2013-04-02T09:32:32.103
> 
> 标签：gis, openlayers, openstreetmap

我正在尝试加载特定州的 KML 文件并显示县及其名称。我正在使用以下代码。

```
 map = new OpenLayers.Map({
            div: "map_canvas",
            allOverlays: true
        });

        var osm = new OpenLayers.Layer.OSM();
        var styleMap = new OpenLayers.StyleMap({'default':{
            label : "${name}"

        }});
        var sundials = new OpenLayers.Layer.Vector("KML", {
            projection: map.displayProjection,
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: "Minnesota.kml",
                format: new OpenLayers.Format.KML({
                  //  extractStyles: true,
                    extractAttributes: true
                   // kvpAttributes: false
                }),
                styleMap: styleMap

            })
        });

        map.addLayers([osm,sundials]);

        map.addControl(new OpenLayers.Control.LayerSwitcher());

        map.setCenter(new OpenLayers.LonLat(0, 0), 3); 
```

现在 KML 文件已正确显示，但未显示县名。（结果图像已附上）！

![生成的图像](https://i.stack.imgur.com/Hwx0t.png)

XML 文件看起来像

```
<Document>
        <name>United States Counties</name>
        <Style id='Style3-polygon-1'>
            <LabelStyle>
                <scale>0.8</scale>
            </LabelStyle>
            <LineStyle>
                <color>ffa8d7b6</color>
                <width>1</width>
            </LineStyle>
            <PolyStyle>
                <color>ff29c773</color>
            </PolyStyle>
            <BalloonStyle>
                <text>$[description]</text>
            </BalloonStyle>
        </Style>
        <Style id='Style3-polygon-1-hover'>
            <LineStyle>
                <color>ffa8d7b6</color>
                <width>1</width>
            </LineStyle>
            <PolyStyle>
                <color>ff29c773</color>
            </PolyStyle>
            <BalloonStyle>
                <text>$[description]</text>
            </BalloonStyle>
        </Style>
        <StyleMap id='Style3-polygon-1-map'>
            <Pair>
                <key>normal</key>
                <styleUrl>#Style3-polygon-1</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#Style3-polygon-1-hover</styleUrl>
            </Pair>
        </StyleMap>
        <Placemark>
            <name>Aitkin</name>
            <snippet></snippet>
            <description><![CDATA[<div>
MN-Aitkin
</div>]]></description>
            <styleUrl>#Style3-polygon-1-map</styleUrl>
            <ExtendedData>
                <Data name='State Abbr.'>
                    <value>MN-Aitkin</value>
                </Data>
                <Data name='County Name'>
                    <value>mn</value>
                </Data>
                <Data name='State-County'>
                    <value>MN</value>
                </Data>
                <Data name='value'>
                    <value>526.0226226</value>
                </Data>
                <Data name='GEO_ID'>
                    <value>05000US27001</value>
                </Data>
                <Data name='GEO_ID2'>
                    <value>27001</value>
                </Data>
                <Data name='Geographic Name'>
                    <value>Aitkin County, Minnesota</value>
                </Data>
                <Data name='STATE num'>
                    <value>27</value>
                </Data>
                <Data name='COUNTY num'>
                    <value>1</value>
                </Data>
                <Data name='FIPS formula'>
                    <value>27001.0</value>
                </Data>
                <Data name='Has error'>
                    <value></value>
                </Data>
            </ExtendedData><Polygon><outerBoundaryIs><LinearRing><coordinates>-93.05408,46.20649 -93.05421,46.20823 -93.05419,46.20965 -93.05412,46.21283 -93.05409,46.2138 -93.05403,46.21847 -93.054,46.2261 -93.05412,46.24161 -93.05419,46.24676 -93.0541,46.26842 -93.05407,46.28187 -93.0538,46.31176 -93.05374,46.32576 -93.05378,46.32944 -93.05371,46.33036 -93.05376,46.33888 -93.05407,46.36721 -93.05412,46.3804 -93.05418,46.38731 -93.05473,46.4148 -93.05485,46.41927 -93.05489,46.42117 -93.05533,46.43976 -93.05533,46.44373 -93.05531,46.45141 -93.05525,46.46333 -93.05529,46.47313 -93.05536,46.52685 -93.05541,46.53137 -93.05551,46.5389 -93.05575,46.56708 -93.05481,46.59258 -93.06371,46.62103 -93.06388,46.62991 -93.06377,46.63054 -93.06385,46.63295 -93.06447,46.6547 -93.0648,46.67386 -93.0647,46.68015 -93.06454,46.68285 -93.06459,46.68415 -93.06442,46.68815 -93.06414,46.6919 -93.0638,46.69672 -93.0635,46.70887 -93.06286,46.7377 -93.06179,46.76189 -93.06153,46.76655 -93.06153,46.7666 -93.06113,46.78424 -93.06103,46.78869 -93.06101,46.78939 -93.06083,46.79786 -93.05986,46.8421 -93.05947,46.85365 -93.05932,46.85812 -93.05894,46.86951 -93.05884,46.87494 -93.05894,46.88162 -93.05893,46.88191 -93.05889,46.88584 -93.05875,46.8944 -93.05861,46.89914 -93.05827,46.9106 -93.05826,46.91086 -93.05798,46.92368 -93.0579,46.93014 -93.05777,46.93965 -93.05756,46.94973 -93.057,46.98125 -93.05672,46.99994 -93.05658,47.00732 -93.05629,47.0161 -93.05601,47.0244 -93.05594,47.02641 -93.056,47.02641 -93.07411,47.02637 -93.09664,47.02632 -93.17387,47.02546 -93.18728,47.02525 -93.23808,47.02615 -93.25289,47.02641 -93.27663,47.02684 -93.28055,47.02691 -93.28582,47.02701 -93.29009,47.02719 -93.29575,47.02742 -93.30887,47.02797 -93.32855,47.02827 -93.43947,47.02838 -93.56249,47.02944 -93.57709,47.02941 -93.58646,47.02954 -93.59338,47.02966 -93.59822,47.02955 -93.60745,47.0295 -93.62885,47.02934 -93.6533,47.02898 -93.66564,47.02902 -93.67942,47.02914 -93.76285,47.03025 -93.77526,47.03042 -93.77528,47.02869 -93.77492,47.00431 -93.77477,46.98089 -93.77487,46.97538 -93.77503,46.96505 -93.77511,46.95953 -93.77521,46.95727 -93.77521,46.95458 -93.77522,46.95212 -93.77521,46.94862 -93.77525,46.9432 -93.77517,46.93924 -93.77508,46.93543 -93.77502,46.93207 -93.77497,46.92857 -93.77489,46.91516 -93.77508,46.88938 -93.77516,46.88185 -93.77525,46.87495 -93.77531,46.86655 -93.77536,46.86175 -93.77552,46.85637 -93.77555,46.85117 -93.77555,46.84822 -93.77586,46.81778 -93.77601,46.80405 -93.77602,46.80289 -93.77685,46.77329 -93.77714,46.73442 -93.77803,46.67766 -93.77829,46.63291 -93.77821,46.6137 -93.77791,46.59013 -93.79094,46.58774 -93.8028,46.58513 -93.81137,46.56775 -93.81092,46.55284 -93.81076,46.53363 -93.8114,46.51584 -93.81217,46.50219 -93.81169,46.48339 -93.81117,46.45739 -93.81078,46.44177 -93.81015,46.41986 -93.81018,46.41236 -93.81019,46.40837 -93.8103,46.4021 -93.81061,46.34182 -93.81067,46.31164 -93.81042,46.25105 -93.80718,46.24811 -93.80691,46.24797 -93.79946,46.24878 -93.79628,46.2432 -93.79615,46.2432 -93.75984,46.24373 -93.72728,46.24409 -93.70808,46.24442 -93.70126,46.24453 -93.69065,46.24468 -93.68406,46.24478 -93.66084,46.24512 -93.63685,46.24555 -93.62916,46.2456 -93.54353,46.24701 -93.5268,46.24713 -93.505,46.24693 -93.49318,46.24678 -93.43065,46.24641 -93.43047,46.23706 -93.43042,46.23021 -93.43044,46.22114 -93.43011,46.20857 -93.42982,46.19637 -93.4296,46.1832 -93.42989,46.17337 -93.43016,46.16611 -93.43034,46.16178 -93.43129,46.15656 -93.43182,46.15418 -93.43183,46.15399 -93.42058,46.15427 -93.40637,46.15462 -93.38262,46.1557 -93.3268,46.15804 -93.30847,46.15886 -93.30489,46.15891 -93.28945,46.1593 -93.27752,46.15939 -93.2729,46.15937 -93.26847,46.15939 -93.26439,46.15946 -93.25833,46.15921 -93.23084,46.15876 -93.17898,46.15855 -93.15425,46.15833 -93.13983,46.15824 -93.13535,46.15822 -93.12296,46.15829 -93.11547,46.1584 -93.10791,46.15838 -93.10298,46.15835 -93.09377,46.15833 -93.08377,46.15831 -93.07403,46.15829 -93.06795,46.1583 -93.05528,46.15827 -93.05387,46.15812 -93.05387,46.15821 -93.05388,46.16661 -93.05404,46.18284 -93.05417,46.18951 -93.05419,46.19383 -93.05421,46.19823</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
        <Style id='Style3-polygon-2'> 
```

如何在地图上显示县的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:41:23.867

我认为你也需要一个上下文：

```
var styleMap = new OpenLayers.StyleMap({
    "default": new OpenLayers.Style({
        label: "${label}"
    }, {
        context: {
            label: function (feature) {
                return feature.attributes.name;
            }
        }
    })
}); 
```

# android - 从指定号码过滤短信并显示

> ID：15760660
> 
> 赞同：0
> 
> 时间：2013-04-02T09:32:33.797
> 
> 标签：android

在android中是否可以从android中的特定号码中过滤短信。并将其保存在特定的数据库中。短信不应该在收件箱中可见......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:55:10.490

雅是可能的。

在 mainfest 文件中添加以下代码：

```
<receiver android:name="com.example.Sms_BReceiver" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>
</application>

<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.READ_SMS" /> 
```

之后创建一个类使用以下代码

```
 public class Sms_BReceiver extends BroadcastReceiver {

    @Override
        public void onReceive(Context context, Intent intent) {
         Bundle bundle = intent.getExtras();
         SmsMessage[] messageString = null;

        Object[] pdus = (Object[]) bundle.get("pdus");
        messageString = new SmsMessage[pdus.length];
                    for (i = 0; i < messageString.length; i++) {
          messageString[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                    }

        Phone_no = messageString[0].getOriginatingAddress();
        Message_body = messageString[0].getMessageBody();
        Time = messageString[0].getTimestampMillis();

        CharSequence text = str;
        Toast.makeText(context, text, Toast.LENGTH_SHORT).show();
    }

    if (Phone_no.contains(here check no to filter) {
             here delete message form inbox 
             and save in our own db 

    } else  {

    }

 } 
```

我希望这段代码对你有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:02:52.487

您必须分 3 步执行此操作：

1.  从特定号码读取短信，您必须查看此[链接](https://stackoverflow.com/a/15638148/1168654)，然后
2.  您必须创建数据库以存储有关 SMS 的所有信息（如 ID、正文、号码、时间），以便检查此[链接](http://www.vogella.com/articles/AndroidSQLite/article.html)
3.  您必须从收件箱中删除短信检查此[链接](https://stackoverflow.com/a/439486/1168654)以删除短信。

添加以下权限以执行所有步骤：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.READ_SMS" /> 
```

# java - 有多少个字符串对象..？

> ID：15760661
> 
> 赞同：6
> 
> 时间：2013-04-02T09:32:36.690
> 
> 标签：java

我和我的朋友正在讨论字符串，我们坚持这个：

```
String str = "ObjectOne"+"ObjectTwo"; 
```

他说总共将创建三个对象，我说将创建一个对象。

他对 3 个对象的逻辑是：一个用于“ObjectOne”，一个用于“ObjectTwo”，第三个是两个 String 对象的连接版本。

我在一个对象背后的逻辑是在编译时两个字符串对象将在字节码中连接为：

```
String str = "ObjectOneObjectTwo"; 
```

并且在运行时只会以这种方式创建一个对象。这背后的真相是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T09:36:51.100

如果你写（文字或常量）

```
String str = "ObjectOne"+"ObjectTwo"; 
```

相当于

```
String str = "ObjectOneObjectTwo"; // compiler optimize it so one Object 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T09:42:03.893

您可以通过使用该`javap`工具反汇编代码来自己发现这一点，看看编译器是用它做什么的。假设你有这个例子：

```
public class Example {
    public static void main(String[] args) {
        String s = "ObjectOne" + "ObjectTwo";
        System.out.println(s);
    }
} 
```

编译它，然后用`javap -c Example`. 结果是：

```
Compiled from "Example.java"
public class Example {
  public Example();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static void main(java.lang.String[]);
    Code:
       0: ldc           #2                  // String ObjectOneObjectTwo
       2: astore_1
       3: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;
       6: aload_1
       7: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      10: return
} 
```

如您所见，只有一个`String`对象，其中包含“ObjectOneObjectTwo”。因此，确实，编译器在编译时为您进行了连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:54:19.893

您可以自己轻松检查：

1.  编译以下程序：

    ```
    public static void main(String[] args) {
        String str = "ObjectOne"+"ObjectTwo";
        System.out.println(str);
    } 
    ```

2.  检查编译器发出的字节码：

    ```
    javap.exe -v Test.class 
    ```

对于 main 方法，将打印：

```
 public static void main(java.lang.String[]);
    flags: ACC_PUBLIC, ACC_STATIC

    Code:
      stack=2, locals=2, args_size=1
         0: ldc           #16                 // String ObjectOneObjectTwo
         2: astore_1      
         3: getstatic     #18                 // Field java/lang/System.out:Ljava/io/PrintStream;
         6: aload_1       
         7: invokevirtual #24                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        10: return        
      LineNumberTable:
        line 6: 0
        line 7: 3
        line 8: 10
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
               0      11     0  args   [Ljava/lang/String;
               3       8     1   str   Ljava/lang/String;
} 
```

如您所见，程序使用[ldc](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.ldc)字节码指令来引用单个已加载的字符串实例（在 Test.class 时加载）。因此，在执行该行期间不会创建新对象。

[Java 语言规范要求](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)编译器执行此优化：

> String 对象是新创建的（第 12.5 节），除非表达式是编译时常量表达式（第 15.28 节）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:57:49.477

```
String str1 = "ObjectOne";
String str2 = "ObjectTwo";
str1 = str1+str2; 
```

在上述情况下，将创建三个对象。

但是当你定义像

```
String str = "ObjectOne"+"ObjectTwo"; 
```

那么只会创建一个对象。编译器对其进行优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:14:41.117

字符串对象是不可变的。

```
 String str = "ObjectOne"+"ObjectTwo"; 

         is same as

    String str = "ObjectOneObjectTwo"; 
```

不可变是指存储在 String 对象中的值不能更改。然后我们想到的下一个问题是“如果 String 是不可变的，那么我如何能够随时更改对象的内容？” . 好吧，准确地说，反映您所做更改的不是同一个 String 对象。在内部创建了一个新的 String 对象来进行更改。

所以假设你声明了一个 String 对象：

```
 String myString = "Hello"; 
```

接下来，您要将“Guest”附加到同一字符串。你做什么工作？

```
myString = myString + " Guest"; 
```

当您打印 myString 的内容时，输出将是“Hello Guest”。尽管我们使用了相同的对象（myString），但在内部过程中创建了一个新对象。所以 mystring 将引用“Hello Guest”。对 hello 的引用丢失了。

```
 String s1 = "hello"; //case 1 
  String s2 = "hello"; //case 2 
```

在情况 1 中，文字 s1 是新创建的并保存在池中。但是在情况 2 中，文字 s2 引用 s1，它不会创建新的。

if(s1 == s2) System.out.println("equal"); //打印相等

```
 String s= "abc"; //initaly s refers to abc
      String s2 =s;    //s2 also refers to abc
      s=s.concat("def"); // s refers to abcdef. s no longer refers to abc. 
```

![在此处输入图像描述](https://i.stack.imgur.com/vSukL.png)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-02T09:44:20.817

```
String str = "ObjectOne"+"ObjectTwo"; 
```

3 个对象将被创建为

1-“对象一”

2-“对象二”

3-“ObjectOneObjectTwo”

采用

```
StringBuffer tmp = new StringBuffer("ObjectOne");
tmp.append("ObjectTwo");
str = tmp.toString(); 
```

# javascript - AngularJS - 将函数调用推迟到完整的浏览器渲染和视图模型同步周期结束

> ID：15760662
> 
> 赞同：3
> 
> 时间：2013-04-02T09:32:36.997
> 
> 标签：javascript, angularjs, angularjs-scope

我不确定这个问题的正确标题是什么，所以如果我错了，请纠正我。

假设在页面刷新（加载）时，我需要根据当前位置的哈希值执行**动画**滚动以锚定（我知道 ngAnchorScroll，但我需要一个动画 scolling，而 ngAnchorScorll 无法做到）。

为此，我实现了一个服务，它将在控制器初始化时调用：

```
var Ctrl = function ($scope, initAnchorScrolling) {
    initAnchorScrolling($scope);
};

Ctrl.$inject = ['$scope', "initAnchorScrolling"];

applicationServices.factory("initAnchorScrolling",
    ['scroll', '$location', '$timeout', function(scrollUtils, $location, $timeout) {
    return function(scope) {

    /** Some stuff here */

    function scroll() {
        var hash = $location.hash(), elm;

        if (!hash) {
            scrollUtils.scrollTo(0, 0);
        } else if ((elm = getAnchorElement(hash))) {
            scrollUtils.scrollToElement(elm);
        } else {
            scrollUtils.scrollTo(0, 0);
        }
    }

    scope.$watch(function scrollWatch() { return $location.hash(); },
        function scrollWatchAction() {
            $timeout(function () {
                scroll();
            }, 0, true);
        });
    };
}]); 
```

您可能会看到锚点的实现与 ngAnchorScroll 的实现非常相似。主要区别在于我使用 jQuery.animate() 在锚点之间移动。

[正如我从这里](https://github.com/angular/angular.js/issues/734#issuecomment-3657272)理解的那样，将函数执行推迟到那一刻，当浏览器完成渲染时，我们只需要使用延迟参数调用 $timeout 服务，该参数等于 0。但这对我不起作用。偶尔页面滚动到不同的位置。我可以这样解释——在摘要循环完成视图和模型的同步之前调用滚动函数，因此在调用时 HTML 块的高度和位置无效。

所以我的问题是：是否可以将**函数调用推迟到浏览器****完全完成渲染并且摘要周期完成**视图和模型的同步（**应用绑定**）的那一刻？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T02:53:29.637

最初的问题是关于滚动到特定的哈希，而这个解决方案是关于无论如何保留滚动位置。它仍然可以为您提供解决方案

我创建了一个适用于窗口滚动的指令（它可以更新为适用于任何元素）

html用法

```
<div ng-keep-scroll="service.scrollY">
<!-- list of scrolling things here -->
</div> 
```

其中“service.scrollY”必须是服务中的变量。服务保留它们的状态和值，每次加载和清除它们的值时都会重新创建控制器，因此您不能使用它们来存储持久数据。控制器有一个指向服务的范围变量。

指令js

```
app.directive('ngKeepScroll', function ($timeout) {
    return function (scope, element, attrs) {

        //load scroll position after everything has rendered
        $timeout(function () {
            var scrollY = parseInt(scope.$eval(attrs.ngKeepScroll));
            $(window).scrollTop(scrollY ? scrollY : 0);
        }, 0);

        //save scroll position on change
        scope.$on("$routeChangeStart", function () {
            scope.$eval(attrs.ngKeepScroll + " = " + $(window).scrollTop());
        });
    }
}); 
```

# sql-server-2008 - 子查询返回多个值

> ID：15760664
> 
> 赞同：0
> 
> 时间：2013-04-02T09:32:41.407
> 
> 标签：sql-server-2008

```
IF OBJECT_ID('Temp_expo') is not null
begin 
    drop table Temp_expo
end

set @query3 =  'SELECT SPCT_ID_REL_LOW,SPCT_ID_REL_HIGH,ROW_NUMBER() over (order by PDBC_PFX) as TempId  

INTO Temp_expo  
FROM ['+ @FCTServer +'].['+@FCTDBName+'].dbo.CMC_SPCT_SUPP_CONV  
where  SPCT_ID_REL_LOW <> '''' and SPCT_ID_REL_HIGH <> '''''

exec (@query3)

Select @minCount= min(TempId) from Temp_expo   
Select @maxCount= max(TempId) from Temp_expo  

create table #ICD9SPCT
(
    ICD9Code varchar(200)
} 

while @minCount<=@maxCount 
begin
    select @low=SPCT_ID_REL_LOW,@high=SPCT_ID_REL_HIGH 
    from Temp_expo 
    where TempId=@minCount 
    group by SPCT_ID_REL_LOW,SPCT_ID_REL_HIGH

    set  @loworder = (select ISNULL(OrderId,0) from FCT_ICD9_Diag_ORDER where ICD9=@low)
    set  @highorder = (select ISNULL(OrderId,0) from FCT_ICD9_Diag_ORDER where ICD9=@high)

    insert into #ICD9SPCT 
    select ICD9 from FCT_ICD9_Diag_ORDER ordert
    left join #ICD9SPCT icdorder on ordert.ICD9 = icdorder.ICD9Code
    where OrderId between @loworder and @highorder and icdorder.ICD9Code is null

    set @minCount = @minCount+1;
end 
```

以上是我收到此错误的代码。我发现错误是由于下面的代码请帮助

```
set  @loworder = (select ISNULL(OrderId,0) from FCT_ICD9_Diag_ORDER where ICD9=@low)
set  @highorder = (select ISNULL(OrderId,0) from FCT_ICD9_Diag_ORDER where ICD9=@high) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:14:04.840

```
set  @loworder = (select ISNULL(OrderId,0) from FCT_ICD9_Diag_ORDER where ICD9=@low)
set  @highorder = (select ISNULL(OrderId,0) from FCT_ICD9_Diag_ORDER where ICD9=@high) 
```

您可以将其重写为

```
select @loworder = ISNULL(OrderId,0) from FCT_ICD9_Diag_ORDER where ICD9=@low
select @highorder = ISNULL(OrderId,0) from FCT_ICD9_Diag_ORDER where ICD9=@high 
```

如果您确定根据标准只有一个值，并且您只需要一个值。如果有多个记录并且您都需要它们，那么

```
SET  @loworder = STUFF(
       (select DISTINCT ';' + CAST(OrderId AS varchar(20))
       FROM FCT_ICD9_Diag_ORDER where ICD9=@low FOR XML PATH ('')
       ),1,1, '') 
```

@loworder 应该是 varchar(max)

我希望它有帮助！

# groovy - 如何仅将非空项添加到 Groovy 中的列表

> ID：15760667
> 
> 赞同：4
> 
> 时间：2013-04-02T09:32:50.690
> 
> 标签：groovy

我想将非空项目添加到列表中。所以我这样做：

```
List<Foo> foos = []
Foo foo = makeFoo()
if (foo)
    foos << foo 
```

但是有没有办法在单个操作中完成它（在创建列表后不使用 findAll ）。像：

```
foos.addNonNull(makeFoo()) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T14:43:43.637

另一种选择是使用短路表达式：

```
foo && foos << foo 
```

对于要评估的第二部分，该`foo`变量必须评估为真。这在其他一些语言中是一种常见做法，但由于可读性问题和约定，我不愿在 groovy 中广泛使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T09:36:53.190

不，您需要使用`if`，或编写自己的`addNonNull`方法（仅使用`if`）

还：

```
if( foo ) { 
```

可能还不够，因为这将跳过空字符串，或者`0`如果它返回整数

你需要

```
if( foo != null ) { 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-26T19:03:41.650

答案是肯定的！我们可以摆脱分配变量

```
Foo foo = makeFoo()//we can ditch this 
```

答案是否定的，我们无法摆脱这种状况。但是我们可以让它更紧凑。

就是这样

```
List<Foo> foos = []
foos += (makeFoo()?:[]); 
```

诀窍是 groovy 的“+”运算符，它根据“+”的左侧和右侧的内容而有所不同。碰巧的是，如果左侧是列表而右侧是空列表，则左侧列表中不会添加任何内容。

**优点**是打字速度快，结构紧凑。

**缺点**是大多数人发生的事情并不是很明显，我们用额外的操作替换了变量赋值。无论如何，Groovy 都会尝试对 List foos 做一些事情，碰巧在第二种情况下，该操作的结果给了我们想要的结果。

# linux - 知道上周有多少用户连接到我的电脑，每个人连接了多少时间

> ID：15760670
> 
> 赞同：1
> 
> 时间：2013-04-02T09:33:00.757
> 
> 标签：linux, bash, shell

我需要一个脚本来显示上周哪些用户连接到我的计算机以及连接频率的摘要。

我知道我可以使用`last`和过滤时间列`awk`，但是如何？我必须在上周让每个用户连接并计算连接数加上所有连接的总时间。到目前为止，这是我想出的：

```
for USER in `last | awk '{print $1}' | sort -u`; do
    echo "Conexiones de $USER:"
    last | grep $USER | wc -l
    # BUT I NEED T COUNT ONLY LAST WEEK AND PRINT TOTAL TIME
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:13:40.120

我强烈建议不要解析 的输出`last`，因为它的输出可能因实现而异，并且解析登录/注销日期容易出错。此外，似乎几乎所有的实现都不支持`-F`或类似的，没有你完全不走运，因为你需要年份信息。理论上，您可以检查两个连续行上是否存在从一个月到另一个最近的飞跃（例如 Jan->Dec 表示年份变化），但这种启发式方法是有缺陷的 - 您无法猜测正确的年份(s) 正确。例如，以一年没有人登录的罕见情况为例。

如果您绝对必须/想要以任何一种方式解析其输出，请不要仅使用 bash/awk/cut/... 来执行此操作，原因如上所述。要获得会话持续时间，您要么必须自己解析漂亮打印的登录/注销日期，要么解析已经计算的持续时间，这也是漂亮打印的并且可能因实施而异（例如，它不仅仅是小时和分钟。如何获得天数/weeks/years 在该列中表示？）。仅使用 bash/awk 执行此操作将是一场噩梦，甚至比我下面的脚本更容易损坏 - 请不要这样做。

最好和最简单的解决方案是编写一个`wtmp`直接对数据进行操作的小型 C 程序或脚本`man wtmp`（ ; 登录是一条记录，注销是第二条记录）。有关它如何读取内容的参考，请参阅[busybox 的`last`实现](http://git.busybox.net/busybox/tree/miscutils/last_fancy.c)。如果您想以正确的方式进行操作，这就是要走的路。

话虽如此，我想出了下面的快速'n'dirty（perl）解决方案。它不运行`last`命令，你必须自己输入正确的输入，否则它会爆炸。如果您的`last`输出看起来与我的不同，不支持`-F`或`Date::Parse`无法解析您的`last`命令打印的格式，它也会爆炸。有很大的改进空间，但这应该让你开始。

## 笔记

*   `-F`需要`last`打印完整日期（我们需要它来获取年份，否则我们无法从其输出中确定正确的时间戳）
*   `-i`告诉 last 输出 IP 地址，这只会使其输出更易于解析
*   它不解析会话持续时间列，而是解析登录/注销日期，将它们转换为纪元时间并计算差异以获得会话持续时间。除了 using 之外，解析日期没有其他魔法`Date::Parse`，这意味着它必须排除所有没有正确登录/注销日期的会话（即，它们仍处于登录状态或会话因重启、崩溃等），**因此这些会话不会成为计算输出的一部分！**
*   默认为 7 天，但您可以在命令行中使用`-d`开关更改此设置

## 代码

```
#!/usr/bin/perl

use strict;
use warnings;

use Date::Parse;
use Getopt::Std;

our $opt_d;
getopt('d');
my $days = $opt_d || 7;
my $since = time() - (60 * 60 * 24 * $days);

my %data;
while (<>)
{
    chomp;
    next if /ssh|reboot|down|crash|still logged in/;
    # last -Fi gives this on my box
    # username   line        ip   Mon Apr  1 18:17:49 2013 - Tue Apr  2 01:00:45 2013  (06:42)
    my ($user, undef, undef, $date_from, $date_to) = /^(\S+)\s+(\S+)\s+([0-9.]+)\s+([[:alnum:]:\s]+)\s+-\s+([[:alnum:]:\s]+[^\s])\s+\(.+\)/;

    my $time_from = str2time($date_from);
    last if $time_from < $since;
    my $time_to   = str2time($date_to);

    $data{$user}{"count"}++;
    $data{$user}{"duration"} += $time_to - $time_from;

    # print "$user|$line|$ip|$date_from|$date_to\n";
}

print "login history for the last $days day(s):\n\n";

if (keys %data > 0)
{
    foreach my $user (keys %data)
    {
        my $duration = $data{$user}{"duration"};
        printf "%s was logged in %d time(s) for a total of %d day(s), %d hour(s) and %d minute(s)\n",
            $user,
            $data{$user}{"count"},
            ($duration / (24 * 60 * 60)),
            ($duration / (60 * 60 )) % 24,
            ($duration / 60 ) % 60,
    }
}
else
{
    print "no logins during the specified time period\n";
} 
```

## 示例用法

```
$ last -Fi | ./last_parse.pl -d 700
login history for the last 700 day(s):

root was logged in 25 time(s) for a total of 36 day(s), 12 hour(s) and 35 minute(s)
foobar was logged in 362 time(s) for a total of 146 day(s), 17 hour(s) and 17 minute(s)
quux was logged in 3 time(s) for a total of 0 day(s), 0 hour(s) and 4 minute(s)
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:04:40.143

尝试这个

脚步

1.  `last > login.txt`

2.  `last | awk '{print $3}' | sort -u > names.txt`

3.  从 names.txt 迭代每一行并应用`grep "line1" login.txt | wc -l`

您将获得每个用户的计数（每个用户是 names.txt 中的每一行）

# php - 如何在创建/编辑项目时添加用户 ID

> ID：15760671
> 
> 赞同：0
> 
> 时间：2013-04-02T09:33:04.877
> 
> 标签：php, symfony, symfony-2.2

我想将创建/编辑内容的用户的用户 ID 存储到数据库中。我已经创建了实体。

如何将我的控制器中的用户字段添加到实体

在这一点上我要改变什么

```
 $entity  = new Product();
    $form = $this->createForm(new ProductType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();
        $em->persist($entity);
        $em->flush(); 
```

产品实体的用户部分

```
/**
 * @ORM\ManyToOne(targetEntity="User", inversedBy="products")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
protected $user;

/**
 * Set user
 *
 * @param \CJ\BusinessBundle\Entity\User $user
 * @return Product
 */

public function setUser(\CJ\BusinessBundle\Entity\User $user = null)
{
    $this->user = $user;

    return $this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:45:14.820

你会得到当前用户使用`$this->get('security.context')->getToken()->getUser()`.

然后在声明您的实体之后，您将添加用户或 user_id。

所以..

```
$user = $this->get('security.context')->getToken()->getUser();

$entity = new Product();
$entity->setUser($user);
    // or $entity->setUserid($user->getId()) or maybe something
    // else depending on your entity 
```

然后，当您使用实体创建表单时，用户（或用户 ID）将成为其中的一部分。

# vbscript - 从 vbs 同步两个 .bat 的命令

> ID：15760673
> 
> 赞同：2
> 
> 时间：2013-04-02T09:33:11.613
> 
> 标签：vbscript, synchronize

我有两个正在运行的蝙蝠，我必须等待“job.bat”结束后再运行“another.bat”，因为“another.bat”正在使用来自“job.bat”的文件。请问如何在vbs中同步它们？谢谢

```
shell.run "job.bat ""my file""" & " " & myVar
'shell.exit
shell.run "another.bat ""lib.txt""" & " " & outVar 
```

我在这两个 shell.run 之间使用了这个，等待文件输出可从第一个 bat 获得，但它不会改变任何东西

```
 While Not oFSO.FileExists("out") 
   wait 10
   Wend 
```

我很惊讶，因为我一直认为 vbs 程序是顺序访问（顺序指令），而我看到 "another.bat" 在 "job.bat" 终止之前启动了！！！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T11:20:46.107

您可以使用可选的布尔参数`bWaitOnReturn`，以便 Shell.Run*在继续执行 wsh 脚本之前等待命令完成。*

所以，一般语法

```
Shell.Run (strCommand, [intWindowStyle], [bWaitOnReturn]) 
```

在你的情况下可能看起来像这样：

```
shell.run "job.bat ""my file""" & " " & myVar**, , True**
'shell.exit
shell.run "another.bat ""lib.txt""" & " " & outVar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:03:22.543

VBS 的执行*是*顺序的。只是默认情况下，该`Shell.Run`函数不会等待调用的命令/程序完成后再继续。它很可能只是相应系统函数的包装，可能是[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153.aspx "ShellExecute 函数")or [`ShellExecuteEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762154.aspx "ShellExecuteEx 函数")（您可能不需要知道），并且它是底层系统函数的默认行为影响 VBS 的`Shell.Run`.

在这种情况下，最好的解决方案可能是明确指定`Run`函数应该等待第一个批处理文件的终止，根据[@PA 的回答](https://stackoverflow.com/a/15762811/297408)。但请注意，如果您通过*一次调用调用**两个*批处理文件，您可以达到相同的效果，并用与号 ( ) 分隔两个命令。基本上是这样的： *`Shell.Run``&`*

 *```
Shell.Run "*command1* & *command2*"
```

或者，适用于您的特定情况，如下所示：

```
Shell.Run "job.bat ""my file""" & " " & myVar & " **&** another.bat ""lib.txt""" & " " & outVar
```*

# spring - Spring 3.0中通过ajax处理XML

> ID：15760680
> 
> 赞同：2
> 
> 时间：2013-04-02T09:33:35.660
> 
> 标签：spring, jquery, spring-mvc

如何在 Spring 3.0 中的 jQuery 中将 XML（大约 30000 行）作为数据发布。

# cassandra - 将两个结果集合并为一个

> ID：15760684
> 
> 赞同：3
> 
> 时间：2013-04-02T09:33:43.017
> 
> 标签：cassandra, union, resultset, cql

我想知道是否有办法将两个或多个结果集合并为一个。
我实际上需要执行多个查询并只返回一个结果集。我不能使用 UNION 或 JOIN 运算符，因为我正在使用 Cassandra (CQL)
在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:22:35.640

像 Playorm 这样的框架为 Cassandra 中的 JOIN（INNER 和 LEFT JOIN）查询提供支持。

[http://buffalosw.com/wiki/Command-Line-Tool/](http://buffalosw.com/wiki/Command-Line-Tool/)

您可能会在以下位置看到更多示例：

[https://github.com/deanhiller/playorm/blob/master/src/test/java/com/alvazan/test/TestJoins.java](https://github.com/deanhiller/playorm/blob/master/src/test/java/com/alvazan/test/TestJoins.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T10:42:47.513

如果要查询同一列族中的多行，可以使用 IN 关键字：

```
SELECT * FROM testCF WHERE key IN ('rowKeyA', 'rowKeyB', 'rowKeyZ') LIMIT 10; 
```

这将使您从每行返回 10 个结果。

如果您需要连接来自不同 CF 的结果，或者使用不同的 WHERE 子句进行查询，那么您需要运行多个查询并将结果合并到代码中 - cassandra 不适合这种事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T12:26:15.950

PlayOrm 可以进行连接，但您可能需要启用 PlayOrm 分区，以便您仍然可以扩展。（即，您不想将 10 亿行与 10 亿行连接起来）。通常，您将一个分区与另一个分区或 Account 表上的一个分区连接到 Users 表上的一个分区。IE。确保您仍然按比例设计。

# appcode - 同一个文件怎么打开两次

> ID：15760685
> 
> 赞同：1
> 
> 时间：2013-04-02T09:33:43.530
> 
> 标签：appcode

我想知道如何两次打开同一个源文件，这意味着在 2 个编辑器中并排？

当我打开第一个编辑器时，将文件拉到另一个编辑器窗口中，我将被发送到“旧”窗口（我刚刚打开），我无法两次打开同一个文件。

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:45:51.760

拆分编辑器（从选项卡上下文菜单中）允许同时打开同一文件的 2 个副本。

# java - 如何将具有两组元素的列表排序为两个按字母顺序排列的集合列表

> ID：15760687
> 
> 赞同：0
> 
> 时间：2013-04-02T09:33:47.033
> 
> 标签：java, list, sorting, comparator

我有一个包含两种元素的列表 - 免费项目和付费项目。

我想对列表进行排序，使付费项目位于列表的第一部分，免费项目位于列表的第二部分。

我有一组比较器，如 AZ 排序、ZA 排序、类型排序。

无论是哪种排序类型，它都应始终将最终列表显示为列表第一部分中的付费项目和列表第二部分中的免费项目，并且列表中的每个集合都根据比较器（Az 或 ZA. 。ETC）。

敌人例如。

我有三个付费项目和五个免费项目。
当我对 AZ 上的完整列表进行排序时，它应该按 AZ 排序显示三个付费项目，然后按 AZ 排序顺序显示免费项目。

我想知道如何实现这一点。

* * *

使用代码片段更新：

该列表包含名称为 {APaid、MFree、OFree、BPaid、NFree、PFree、CPaid、QFree} 的项目

```
Collections.sort(myList, new UtilityClass.TitleComparatorAtoZ());  

public static class TitleComparatorAtoZ implements Comparator
    {

        public int compare(Object o1, Object o2)
        {
            int result = 0;

            if ((o1 != null) && (o2 != null))
            {
                if (o1 instanceof Item && o2 instanceof Item)
                {
                    Item lmi1 = (Item) o1;
                    Item lmi2 = (Item) o2;

                    if ((lmi1.getName() != null) && (lmi2.getName() != null))
                    {
                        result = lmi1.getName().compareToIgnoreCase(lmi2.getName());
                    }
                }
            }
            return result;
        }
    } 
```

最终列表应该是 {APaid, BPaid, CPaid, MFree, NFree, OFree, PFree, QFree}..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:38:06.150

您可以尝试[使用第二个参数 als Comperator](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)。

它允许您传递 Comparator 的实例以根据您的需要进行排序。例如，您可以创建一个比较器来检查`Name`所有对象的变量，或者创建一个比较器来检查变量`Type`。

使用该比较器，您可以对列表进行排序。

```
public static <T> void sort(List<T> list,
                            Comparator<? super T> c) 
```

[这里有一个很好且简单的例子。](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

例如，你有类`Fruit`。您可以将以下代码放在此类中：

```
public static Comparator<Fruit> FruitNameComparator 
                      = new Comparator<Fruit>() {

    public int compare(Fruit fruit1, Fruit fruit2) {

      String fruitName1 = fruit1.getFruitName().toUpperCase();
      String fruitName2 = fruit2.getFruitName().toUpperCase();

      //ascending order
      return fruitName1.compareTo(fruitName2);

      //descending order
      //return fruitName2.compareTo(fruitName1);
    }

}; 
```

使用该代码，您可以在任何地方比较水果的名称 `Arrays.sort(fruits, Fruit.FruitNameComparator);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:46:35.143

我能想到的一种方法是：

像这样修改每个比较器：

首先根据是付费项目还是免费项目比较两个对象参数，然后根据 AZ 等进行比较...

//算法

比较器（对象 T1，对象 T2）开始

如果 T1 付费并且 T2 是免费的，则返回 1 否则如果 T1 是免费的并且 T2 是付费的 return -1 else //两者都是免费的或付费的，然后根据 AZ 起始字符返回比较（比较起始字符）。

因此，如果您有一个以 Z 开头的付费项目，那么它将在以 A 开头的付费项目之后。

修改的：

Collections.sort(myList, new UtilityClass.TitleComparatorAtoZ());

公共静态类 TitleComparatorAtoZ 实现比较器 {

```
 public int compare(Object o1, Object o2)
    {
        int result = 0;

        if ((o1 != null) && (o2 != null))
        {
            if (o1 instanceof Item && o2 instanceof Item)
            {
                Item lmi1 = (Item) o1;
                Item lmi2 = (Item) o2;

                if ((lmi1.getName() != null) && (lmi2.getName() != null))
                {
                    if(lmi1.getName().endsWith("Paid") 
                       && lmi2.getName().endsWith("Free")) 
                    {
                         result = 1;
                    }
                    else if (lmi1.getName().endsWith("Free") 
                       && lmi2.getName().endsWith("Paid"))
                    {
                         result = -1;
                    }
                    else
                    {
                         result = lmi1.getName().compareToIgnoreCase(lmi2.getName());

                    }

                                        }
            }
        }
        return result;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:51:11.310

1.  将您的清单分类为 2 个单独的清单，哪些是免费项目，哪些是付费项目

    ```
    for ( X x : list ) {
        if ( isFreeItem ) {
            add to freeItemList
        } else {
            add to paidItemList
        }
    } 
    ```

2.  使用您的比较器类分别对每个列表进行排序

    ```
    Collections.sort(freeItemsList);
    Collections.sort(paidItemsList); 
    ```

3.  实例化一个新列表并相应地放置您的paidItemsList 和 freeItemsList

    ```
    List result = new ArrayList();
    for ( X x : paidItemsList ) {
        add to result
    }

    for ( X x : freeItemsList ) {
        add to result
    } 
    ```

# ruby-on-rails - 使用地理编码器 gem 验证经度/纬度

> ID：15760692
> 
> 赞同：0
> 
> 时间：2013-04-02T09:33:56.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, google-maps, rails-geocoder

我遵循了这个[Geocoder Railscast](http://railscasts.com/episodes/273-geocoder) & 我正在玩它，看看我是否可以向 Geocoder Gem 返回的经度和纬度坐标添加验证，以防用户输入不返回任何经度和纬度坐标的错误地址。

我可以使用下面的代码完成这项工作，但是当我输入正确的地址时，它会在用户第一次提交表单时出现验证错误，即使返回的经度和纬度坐标也是如此。用户第二次提交它工作的表单。

我怀疑这种情况正在发生，因为当用户提交表单时没有经度和纬度坐标，但是由于地理编码器 gem 返回了坐标，所以第二次出现。

我的代码有问题还是我应该以不同的方式处理这个问题？

## 模型

```
class Location < ActiveRecord::Base
  attr_accessible :address1, 
                  :country, 
                  :latitude, 
                  :longitude, 
                  :name

  validates :latitude, :presence => {message: "Not a valid location on Google Maps, please check name address & country fields" }

  geocoded_by :address
  after_validation :geocode, :if => :address_changed?

  def address
  [name, address1, country].compact.join(' ')
    end

    def address_changed?
  attrs = %w(name address1 country)
  attrs.any?{|a| send "#{a}_changed?"}
    end
end 
```

终端输出

```
=> Booting WEBrick
=> Rails 3.2.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2013-04-02 02:03:41] INFO  WEBrick 1.3.1
[2013-04-02 02:03:41] INFO  ruby 1.9.3 (2013-02-22) [x86_64-linux]
[2013-04-02 02:03:41] INFO  WEBrick::HTTPServer#start: pid=4316 port=3000

Started POST "/locations" for 127.0.0.1 at 2013-04-02 02:04:04 +0100
Processing by LocationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4HUay+IOgA7JnCSg8ZZ0zVMcHpj7djUPlfqe1emTMSY=", "location"=>{"name"=>"Louch Dan", "address1"=>"Roundwood", "town"=>"", "county"=>"", "state"=>"", "country"=>"Ireland", "latitude"=>"", "longitude"=>""}, "commit"=>"Create Location"}
   (0.1ms)  begin transaction
   (0.1ms)  rollback transaction
  Rendered locations/_form.html.erb (8.9ms)
  Rendered locations/new.html.erb within layouts/application (63.4ms)
Completed 200 OK in 410ms (Views: 156.1ms | ActiveRecord: 6.0ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-04-02 02:04:06 +0100
Served asset /application.css - 304 Not Modified (11ms)
[2013-04-02 02:04:06] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-04-02 02:04:06 +0100
Served asset /jquery_ujs.js - 304 Not Modified (1ms)
[2013-04-02 02:04:06] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-04-02 02:04:06 +0100
Served asset /jquery.js - 304 Not Modified (7ms)

Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2013-04-02 02:04:06 +0100
Served asset /scaffolds.css - 304 Not Modified (1ms)

Started GET "/assets/locations.css?body=1" for 127.0.0.1 at 2013-04-02 02:04:06 +0100
Served asset /locations.css - 304 Not Modified (1ms)
[2013-04-02 02:04:06] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-04-02 02:04:06] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/locations.js?body=1" for 127.0.0.1 at 2013-04-02 02:04:06 +0100
Served asset /locations.js - 304 Not Modified (4ms)
[2013-04-02 02:04:06] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-04-02 02:04:06] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-04-02 02:04:06 +0100
Served asset /application.js - 304 Not Modified (7ms)
[2013-04-02 02:04:06] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started POST "/locations" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Processing by LocationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4HUay+IOgA7JnCSg8ZZ0zVMcHpj7djUPlfqe1emTMSY=", "location"=>{"name"=>"Louch Dan", "address1"=>"Roundwood", "town"=>"", "county"=>"", "state"=>"", "country"=>"Ireland", "latitude"=>"53.07004130000001", "longitude"=>"-6.2804327"}, "commit"=>"Create Location"}
   (0.1ms)  begin transaction
  SQL (15.3ms)  INSERT INTO "locations" ("address1", "country", "county", "created_at", "latitude", "longitude", "name", "state", "town", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["address1", "Roundwood"], ["country", "Ireland"], ["county", ""], ["created_at", Tue, 02 Apr 2013 01:04:22 UTC +00:00], ["latitude", 53.07004130000001], ["longitude", -6.2804327], ["name", "Louch Dan"], ["state", ""], ["town", ""], ["updated_at", Tue, 02 Apr 2013 01:04:22 UTC +00:00]]
   (71.9ms)  commit transaction
Redirected to http://0.0.0.0:3000/locations/10
Completed 302 Found in 236ms (ActiveRecord: 87.3ms)

Started GET "/locations/10" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Processing by LocationsController#show as HTML
  Parameters: {"id"=>"10"}
  Location Load (3.8ms)  SELECT "locations".* FROM "locations" WHERE "locations"."id" = ? LIMIT 1  [["id", "10"]]
  Rendered locations/show.html.erb within layouts/application (9.8ms)
Completed 200 OK in 25ms (Views: 15.5ms | ActiveRecord: 3.8ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Served asset /application.css - 304 Not Modified (0ms)
[2013-04-02 02:04:22] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/locations.css?body=1" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Served asset /locations.css - 304 Not Modified (0ms)
[2013-04-02 02:04:22] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Served asset /jquery_ujs.js - 304 Not Modified (0ms)

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Served asset /jquery.js - 304 Not Modified (6ms)
[2013-04-02 02:04:22] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-04-02 02:04:22] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Served asset /scaffolds.css - 304 Not Modified (0ms)
[2013-04-02 02:04:22] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Served asset /application.js - 304 Not Modified (43ms)

Started GET "/assets/locations.js?body=1" for 127.0.0.1 at 2013-04-02 02:04:22 +0100
Served asset /locations.js - 304 Not Modified (0ms)
[2013-04-02 02:04:22] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-04-02 02:04:22] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:50:15.337

为什么不能在验证之前对位置进行地理编码？:address_changed? 如果这些字段中的任何一个已更改，即使对于新记录也将返回 true。验证它，如果它返回无效的纬度/经度值，那么您的 :latitude 存在验证将失败。

只需将其更改`after_validation`为`before_validation`.

# jquery - 如何在提交处理程序中提交表单？

> ID：15760694
> 
> 赞同：1
> 
> 时间：2013-04-02T09:33:58.510
> 
> 标签：jquery

我想添加一条确认消息，当用户尝试提交表单时会弹出该消息。我想出了以下内容，但这对我来说似乎是一个黑客。

```
$('#someform').submit(function () {
  var form = $(this);
  //a hack so that this handler does not fire again, see below
  if (form.attr('data-confirm') == 'disabled') {
    return true;
  }

  showConfirmPopup({
    message: "Are you sure?",
    success: function () {

      form.attr('data-confirm', 'disabled');
      form.submit();

      hideConfirmPopup();
    }
  });

  return false;
}) 
```

});

因此，当用户提交表单时，此处理程序将捕获事件并阻止、显示弹出窗口并阻止表单提交（通过返回`false`）。当用户确认时，成功处理程序将所有表单提交方法，我们的处理程序将再次触发，但这一次它会返回`true`并提交表单。

这可以在不写`data-confirm`属性的情况下实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:40:27.637

在这种情况下，您可以在成功回调中简单地处理[`unbind`](http://api.jquery.com/unbind/)您的`submit`处理程序，然后重新提交表单。这样的事情应该可以解决问题：

```
...
success: function () {
    hideConfirmPopup();
    form.unbind('submit').submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:39:40.300

简单的有什么问题：

```
$('#someform').submit(function () {
  var submitForm = false;
  showConfirmPopup({
    message: "Are you sure?",
    success: function () {
      submitForm = true;
      hideConfirmPopup();
    });
  return submitForm;
}); 
```

我假设这`showConfirmPopup`是同步的。

# sql - 从 SQL Compact 中的日期时间中选择时间

> ID：15760696
> 
> 赞同：1
> 
> 时间：2013-04-02T09:34:08.447
> 
> 标签：sql, sql-server-ce

很像这个问题：“[如何在 SQL 中从 DateTime 格式获取时间？](https://stackoverflow.com/questions/7710449/how-to-get-time-from-datetime-format-in-sql) ”，我试图*仅从*日期时间中选择时间，但与上述问题不同，我想知道如何在`SQL Server Compact`. 有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:39:59.033

```
SELECT DATEPART(hour, OrderDate), DATEPART(minute, OrderDate) FROM MyOrders 
```

参考。[http://msdn.microsoft.com//library/ms173998%28v=sql.90%29.aspx](http://msdn.microsoft.com//library/ms173998%28v=sql.90%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:55:57.823

解决了。Luigi 的答案实际上不是*正确*的答案，但我赞成它，因为它帮助我找到了答案。

要仅从日期时间中获取时间`SQL Server Compact`，正确的查询是：

`select ltrim(str(DATEPART(hour, columnName))) + ':' + ltrim(str(DATEPART(minute, columnName))) + ':' + ltrim(str(DATEPART(second, columnName))) from table`

# javascript - 使用javascript验证密码

> ID：15760697
> 
> 赞同：0
> 
> 时间：2013-04-02T09:34:08.723
> 
> 标签：javascript, regex, passwords

我需要使用具有以下要求的 javascript 匹配密码字段：

1.  应该是带有至少一个特殊字符的字母数字。
2.  不允许有空格
3.  应最少 10 个字符，最多 20 个字符。
4.  char 的重复次数不超过 2 次。
5.  ~,'.:;^| 不允许

我有一个正则表达式
var 密码 = /^(?=. *[0-9])(?=.* [!@#$%^& *])[a-zA-Z0-9!@#$%^&* ]{ 10,20}$/; 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:45:16.060

这可能是所需的正则表达式

```
^(?=.*[!@#$%^&])(?!.*(.).*\1.*\1)[A-Za-z\d!@#$%^&|]{10,20}$ 
```

`(?=.*[!@#$%^&])`确保至少出现一次列出的字符。

`(?!.*(.).*\1.*\1)`确保没有字符重复超过两次。

`[A-Za-z\d!@#$%^&|]{10,20}`匹配字符类中出现的 10-20 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:53:21.683

我会编写单独的规则（可能对所有规则都使用正则表达式 - 为了一致性 - 除非性能是一个很大的问题），每个规则都与您列表中的规则直接相关。

## 编码

```
var pw = "asddfak@kjg";

/* Should be alpha numaric with at least one special character. */
console.log(null !== pw.match(/[@+#$]/));

/* no spaces to be allowed */
console.log(null !== pw.match(/^\S+$/));

/* should be minimum 10 char and max 20 chars. */
console.log(null !== pw.match(/^.{10,20}$/));

/* No repeate of char more than 2 times. */
console.log(null === pw.match(/(.)(.*\1){2}/));

/* ~,'.:;^| are not allowed */
console.log(null !== pw.match(/^[^~,'.:;^|]+$/)); 
```

尽管可以使正则表达式更简洁，但我认为使规则更符合您的意图更易于维护。如果性能是一个重要问题（通常不是这种事情），那么我会避免使用正则表达式，并使用字符串方法实现规则。

## 正则表达式解释

```
/           // start regex pattern
[           // open character class
@+#$        // match one of these `special` characters
]           // close character class
/           // end regex pattern 

/           // start regex pattern
^           // start matched string
\S+         // one or more (`+`) not spaces (`\S`)
$           // end matched string
/           // end regex pattern 

/           // start regex pattern
^           // start matched string
.{10,20}    // between 10 and 20 of any character (`.`)
$           // end matched string
/           // end regex pattern 

/           // start regex pattern
(.)         // any character captured as group 1
(.*\1){2}   // followed by zero or more of anything (`\.*`) and then the captured group 1 (`\1`) two times (`{2}`)
/           // end regex pattern 

/           // start regex pattern
^           // start matched string
[           // open character class
^~,'.:;^|   // not (`^`) one of these characters
]+          // close character class
$           // end matched string
/           // end regex pattern 
```

***ps 你应该用你使用的正则表达式保留很多评论，因为与书籍不同，它们写起来比读起来容易得多***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:44:45.730

这应该有效：

```
/^(?=.*?[!@#$%^&])(?:([a-zA-Z0-9!@#$%^&])(?!.*?\1.*?\1)){10,20}$/ 
```

（如果重复超过 2 次，则意味着同一个字符不能出现三次）

**解释：**
*第一个条件*：一开始，我们将第一次遍历整个字符串，直到找到一个特殊字符，一旦我们找到它，我们就停止，如果我们没有，它会失败（[来源](http://www.regular-expressions.info/lookaround.html)）：`(?=.*?[!@#$%^&])`
*第二个条件*：无事可做，`[a-zA-Z0-9!@#$%^&]`无论如何不允许空格
*第三个条件*：量词：`{10,20}`
*第四个条件*：微妙的一个：当我们通过字符串时，对于捕获的每个字符，我们检查它是否重复两次（相同来源）：`(?!.*?\1.*?\1)`
*第五个条件*：与空格相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:20:40.897

根据您的要求中的 5 件事，这是您需要的确切模式

```
^(?=.*[!@#$%^&])(?!.*(.).*\1.*\1)[^\s~,'.:;^|]{10,20}$ 
```

# ios - 在 UIAlertView 中更改 UITextField 的键盘类型

> ID：15760699
> 
> 赞同：5
> 
> 时间：2013-04-02T09:34:13.993
> 
> 标签：ios, objective-c, uialertview

我创建了一个 UIAlertView 并将其`alertViewStyle`设置为`UIAlertViewStylePlainTextInput`.

我想更改键盘类型，但不是通过添加子视图。

我的代码：</p>

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"a" message:@"b" delegate:nil cancelButtonTitle:@"cancel" otherButtonTitles:@"aaa", nil];
alert.alertViewStyle = UIAlertViewStylePlainTextInput;  
[alert show]; 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-02T09:49:26.823

如果您想呈现输入样式，首先在您的类中实现[UIAlertViewDelegate 。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)

其次，当您展示 alertView 时，将委托设置为 self。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"a" message:@"b" delegate:self cancelButtonTitle:@"cancel" otherButtonTitles:@"aaa", nil];
alert.alertViewStyle = UIAlertViewStylePlainTextInput;  
[alert show];' 
```

如果您想更改特定字段的键盘类型，请这样做

**例如**，对于第一个字段，它将使键盘数字化。

```
[[alert textFieldAtIndex:0] setKeyboardType:UIKeyboardTypeNumberPad];
[[alert textFieldAtIndex:0] becomeFirstResponder]; 
```

**iOS 8.0 Swift 更新**

从 ios 8.0 起 `UIAlertView`已弃用，因此您可能需要使用`UIAlertController`

```
 var alert = UIAlertController(title: "Title", message: "Your msg", 
                preferredStyle: UIAlertControllerStyle.Alert)

        alert.addAction(UIAlertAction(title: "Close", style: UIAlertActionStyle.Cancel, 
              handler:yourHandler))

        alert.addTextFieldWithConfigurationHandler({(textField: UITextField!) in
            textField.placeholder = "Password"
            textField.secureTextEntry = true  // setting the secured text for using password
            textField.keyboardType = UIKeyboardType.Default
        }) 
```

# android - 如何在 Android 中拥有这种类型的时间选择器？

> ID：15760700
> 
> 赞同：9
> 
> 时间：2013-04-02T09:34:14.267
> 
> 标签：android, layout, timepicker

我正在开发一个应用程序，我想在其中显示时间选择器来设置提醒时间。现在我可以使用这样的首选项屏幕显示时间选择器

```
<org.example.android.TimePreference
 android:defaultValue="12:00"
 android:key="check_time"
 android:summary="Set your desired time for check"
 android:title="Check time" /> 
```

`TimePreference.java`文件是从 PreferenceScreen链接[中的此 TimePicker](https://stackoverflow.com/questions/5533078/timepicker-in-preferencescreen)继承的。但我想在特定活动中单击按钮时显示此内容，并将其设置为 in`EditText`或 in `TextView`。我不想使用首选项。

所以，我想让这个屏幕的布局如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/6kDdi.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:35:26.813

我的答案取决于您使用的 API 级别。

API 级别 < 11：您必须通过在项目中[`NumberPicker`](https://developer.android.com/reference/android/widget/NumberPicker.html)复制其[源代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/NumberPicker.java)并根据您的需要对其进行修改来反向移植

API 级别 >= 11：您可以使用标准实现[`NumberPicker`](https://developer.android.com/reference/android/widget/NumberPicker.html)并将其扩展到您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:57:20.733

请看看这个教程。你会在那里得到项目。 [http://www.zainodis.com/2011/05/android-custom-timepicker.html](http://www.zainodis.com/2011/05/android-custom-timepicker.html)

看看这个示例数字选择器。像这样你可以将它更改为时间选择器。 [Android 号码选择器对话框](https://stackoverflow.com/questions/3359510/android-number-picker-dialog)

# c# - WPF中的绑定数据不更新

> ID：15760706
> 
> 赞同：2
> 
> 时间：2013-04-02T09:34:28.633
> 
> 标签：c#, wpf, data-binding

我有一个显示一些 ListBox 的应用程序。这些列表框绑定到数据。其中一个列表是门列表，而另一个列表是用户列表。

Doors 列表来自与数据库通信的 DataManager 类。用户列表来自另一个进行一些计算的类。

我已经将两个 ListBox 绑定到它们适当的 ObservableList getter setter。

对于门：

```
public ObservableList<Door> Doors
{
    get { return DataManager.Doors; }
} 
```

对于用户：

```
public ObservableList<User> Users
{
    get { return classLogic._users; }
} 
```

问题来了。当我添加或删除门时，UI 上的列表会更新。当我添加或删除用户时，列表不会更新。我必须重新加载视图（重新启动应用程序）才能更新它。我错过了什么？为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:42:36.487

一个可观察的集合会为每个项目的属性引发 PropertyChanged，
就像如果你有一个 IsDoorClosed 属性，它会更新

移除元素会在 Doors 上引发 CollectionChanged 事件，但 UI 不会更新，因为未在 Bound Property Doors 上引发 PropertyChanged 事件。

您需要在 Doors 的每个 CollectionChanged 上引发 PropertyChanged 事件。

大意是这样的：这是 psado 代码，它是为了您的利益而写在这里作为示例的，因此请检查是否有任何语法错误。

```
 Doors.CollectionChanged += OnDoorsCollectionChanged; 

 private static void OnDoorsCollectionChanged(object sender , CollectionChangedEventArgs e)
 {
      PropertyChanged(sender,new PropertyChangedEventArgs("Doors"));
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T06:53:13.870

我发现自己需要完成三个步骤。我认为更新 ListBox 不需要 PropertyChanged 事件。这可能是从 .NET 4.0 开始，因为我在下面的版本中阅读过，数据绑定还不是真正正确的。

第一步是列表必须是`private static ObservableList<...>`. 第二个是这个列表的 getter 也必须是适当的类型。这意味着在我的情况下，以下代码需要在 ClassLogic 中：

```
private static readonly ObservableList<User> _users= new ObservableList<User>();

public static ObservableList<User> Users
{
    get { return _users; }
} 
```

第三件事是，在 DataContext 类中调用此函数（getter）以将数据绑定到 ListBox 时，必须使用类名而不是该类的实例！

因此，在这种情况下，它将是：

```
/// <summary>
/// Gets the Users that are managed by the ClassLogic class
/// </summary>
public ObservableList<User> Users
{
    get { return ClassLogic.Users; }
    //wrong would be:
    //get { return classLogic.Users }
} 
```

这 3 个步骤绑定了我的数据，并确保在更新列表内容时更新 ListBox。

# mysql - MySQL中的每月日期

> ID：15760709
> 
> 赞同：0
> 
> 时间：2013-04-02T09:34:30.557
> 
> 标签：mysql

我目前有点麻烦。我正在尝试实施的系统是一个“回调”系统，它将针对将在指定日期弹出系统的客户设置回调。

其中一项功能是重复发生的回调。这两个选项是每月和每年。我的年度工作正常：

```
SELECT * FROM `callbacks` WHERE (
-- Yearly Callbacks
(DAYOFYEAR(`date_callback`) = DAYOFYEAR(NOW()) AND `occurs` = 'yearly') OR

-- Other Callbacks For Today
(DATE(`date_callback`) = DATE(NOW()))) 
```

但是我无法想象如何检查每月的回调是否到期。它应该只在列表中每 30 天出现一次（使用上述查询。）我正在使用`DAYOFMONTH`，但我意识到如果`31st`为每月回调。

因此，如果设置了一个`March 3rd 2013`并设置为 montly，则它应该出现在查询结果中，如果日期是：

*   `March 3rd 2013`
*   `April 1st 2013`
*   `May 1st 2013`
*   `May 31st 2013`
*   `June 30th 2013`

等等。以前有没有人处理过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:43:59.573

我会考虑使用间隔，比如

. . . （DATE_ADD（现在（），间隔 1 个月））。. .

另见[这篇](https://stackoverflow.com/questions/2793619/mysql-query-working-with-interval-and-curdate)文章。

或者 - 你可以试试（伪代码）

```
now() - pre_saved_date % 30 (module of 30) 
```

对于 % - 使用 MOD 函数，例如

```
select MOD(2, 3);
select 3 % 2; 
```

# python - Python readline 模块在导入期间打印转义字符

> ID：15760712
> 
> 赞同：8
> 
> 时间：2013-04-02T09:34:41.100
> 
> 标签：python, import, stdout, readline, io-redirection

我将`readline`模块与 Python 2.7.3 和 Fedora 17 一起使用。我在 Ubuntu 12.10 上没有这个问题。

在 期间`import readline`，会显示一个转义字符。

```
$ python -c 'import readline' |less
ESC[?1034h(END) 
```

通常当我得到这样的意外输出时，我会使用`stdout/stderr`重定向到一个虚拟文件描述符（下面的示例）来处理它。但这一次，这种方法不起作用。

```
import sys

class DummyOutput(object):
    def write(self, string):
        pass

class suppress_output(object):
    """Context suppressing stdout/stderr output.
    """
    def __init__(self):
        pass
    def __enter__(self):
        sys.stdout = DummyOutput()
        sys.stderr = DummyOutput()
    def __exit__(self, *_):
        sys.stdout = sys.__stdout__
        sys.stderr = sys.__stderr__

if __name__ == '__main__':
    print 'Begin'
    with suppress_output():
        # Those two print statements have no effect
        # but *import readline* prints an escape char
        print 'Before importing'
        import readline
        print 'After importing'
    # This one will be displayed
    print 'End' 
```

如果您在`test.py`脚本中运行此代码段，您将看到在`suppress_output`上下文中，`print`语句确实*被抑制*，但不是转义字符。

```
$ python test.py |less
Begin
ESC[?1034hEnd
(END) 
```

所以这是我的两个问题：

1.  这个逃脱角色怎么可能通过？
2.  如何压制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-31T13:16:05.553

这是我正在使用的（诚然基于@jypeter 的回答），`TERM`仅当输出不进入 tty（例如被重定向到文件）时才清除环境变量：

```
if not sys.stdout.isatty():

    # remember the original setting
    oldTerm = os.environ['TERM']

    os.environ['TERM'] = ''

    import readline

    # restore the orignal TERM setting
    os.environ['TERM'] = oldTerm

    del oldTerm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T14:56:21.563

在导入 readline 之前，我使用了以下 hack

```
import os
if os.environ['TERM'] == 'xterm':
    os.environ['TERM'] = 'vt100'
# Now it's OK to import readline :)
import readline 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T22:33:26.380

回答第一个问题：更改`sys.stdout`实际上并不影响[标准输出的文件描述符指向的文件](http://en.wikipedia.org/wiki/File_descriptor)，而是 Python 认为是标准输出的高级文件对象。换句话说，更改`sys.stdout`会影响您的 Python 代码，但不会（通常）影响您可能正在使用的任何已编译扩展（如 readline 模块）。所有这些也适用`sys.stderr`。

回答第二个：你可以按照[这个答案](https://stackoverflow.com/a/4832902/3920202)的建议去做（这应该很容易移植到 Python）。尽管评论中的建议听起来像是一个更好的方法。

# java - eclipse helios for maven项目的声纳插件安装问题

> ID：15760715
> 
> 赞同：1
> 
> 时间：2013-04-02T09:34:56.723
> 
> 标签：java, eclipse, eclipse-plugin, installation, sonarqube

我在用 ：

> **Eclipse Helios 版本：3.6.2 Sonar Java Analyzer 3.1.0.2**

**在 eclipse 中安装声纳时遵循的步骤：**

1.  帮助 -> 安装新软件
2.  用于安装的网址：http: [//dist.sonar-ide.codehaus.org/eclipse](http://dist.sonar-ide.codehaus.org/eclipse)
3.  使用以下命令从 cmd 重新启动 Eclipse：ecipse -clean

**问题**：在 Windows->Preferences to configure 中找不到声纳。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:09:38.583

Eclipse Helios 仅与 Sonar Eclipse 2.4.0 兼容，您可以在安装页面上看到：http: [//docs.codehaus.org/display/SONAR/Installing+Sonar+in+Eclipse](http://docs.codehaus.org/display/SONAR/Installing+Sonar+in+Eclipse)

如果您想使用 Sonar Eclipse (3.1) 的最新功能，那么您应该将您的 Eclipse 安装至少升级到 Indigo (3.7.x)。

# shell - Ant shell 命令并输出到文件

> ID：15760716
> 
> 赞同：1
> 
> 时间：2013-04-02T09:35:00.373
> 
> 标签：shell, ant, awk

我有一个启动 AWK 命令的 Ant 版本。它可以工作，除了它将结果输出到屏幕而不是保存到文件。

```
<exec executable="awk">
        <arg value="-f" />
        <arg value="shell.sh" />
        <arg value="${SOURCE_DIR}/source.php" />
        <arg value="${BUILD_DIR}/destination.php" />
    </exec> 
```

所以这是最后一个似乎不起作用的参数行：

```
<arg value="${BUILD_DIR}/destination.php" /> 
```

我可能没有正确执行此操作。有人可以告诉我在上面的示例中我需要正确输出到文件吗？

# java - 在 JSP/JSF/HTML 中加载第一个小程序后调用第二个小程序

> ID：15760719
> 
> 赞同：0
> 
> 时间：2013-04-02T09:35:07.137
> 
> 标签：java, html, jsp, jsf, applet

我正在使用标签嵌入两个小程序的 JSP/JSF 页面。问题是第一个小程序有一些将在页面上更新的信息，而第二个小程序必须使用该信息才能正确加载。

我找不到可以控制小程序调用的方法。（这些小程序是第三方小程序，否则我可以结合两个小程序）。我想知道如何知道第一个小程序已加载，然后调用/启用或显示第二个小程序。

以下是我在页面上用于小程序的标签。

```
<object
              name="CSHelper" id="CSHelperId"
              classid="clsid:9C840-044E-11D1-B3E9-5F499D93" 
              width="100%" 
              HEIGHT="0" 
              ALIGN="middle" 
              codebase="http://java.sun.com/update/1.5.0/jinstall-1_5_0_11-windows-i586.cab#Version=1,5,0,11">

              <param name="code" value="ClientUtil"/>
              <param name="ARCHIVE" value="HelperApplet.jar"/>

            </object>

              <object style="display:none"
                  name="ivrTelephonyBarName" id="ivrTelephonyBarId"
                  classid="clsid:89C840-044E-11D1-B3E9-0599D93"
                  width="100%"
                  HEIGHT="75"
                  ALIGN="middle"
                  codebase="http://java.sun.com/update/1.5.0/jinstall-1_5_0_11-windows-i586.cab#Version=1,5,0,11">

                  <param name="code" value="<%=cTIConnectionParams.getAppletJarClass()%>"/>
                  <param name="ARCHIVE" value="<%=cTIConnectionParams.getAppletJar()%>"/>

                  <param id="AGENT_ID" name="AGENT_ID" value="<%=cTIConnectionParams.getAgentID()%>"/>
                  <%--<param id="sAgentID" name="sAgentID" value="0202"/>--%>
                  <param id="AGENT_PASS" name="AGENT_PASS" value="<%=cTIConnectionParams.getAgentPassword()%>"/>
                  <param id="INSTRUMENT" name="INSTRUMENT" value="<%=cTIConnectionParams.getInstrument()%>"/>

                  <param id="params" name="params" value="<%=cTIConnectionParams.getParams()%>"/>

                  <param id="iconsPath" name="iconsPath" value="<%=contextCtiUrl%>images/appletIcons/"/>
                  <param id="configPath" name="configPath" value="<%=contextCtiUrl%>"/>
              </object> 
```

我想先加载“CSHelperId”，然后再加载最后一个不是故意透析的。任何技术都对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T17:59:11.523

你可以在你的第一个小程序中混合 javascript 代码

```
 public void init() {
       JSObject document = JSObject.getWindow(this);
       String evalString = "document.getElementById('secondAppletPanel').innerHTML = ";
       document.eval(evalString + secondAppletHtmlString);
    } 
```

现在您可以使用由您的第一个小程序修改字符串内容计算的参数构建一个字符串，还需要在您希望第二个小程序出现的位置放置并清空 id 为 secondAppletPanel 的 div，并将**mayscript**属性添加到您的第一个小程序（更多信息[JSObject](http://docs.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/java_js.html) )

# jsp - Tomcat 7 不同的行为

> ID：15760720
> 
> 赞同：0
> 
> 时间：2013-04-02T09:35:12.603
> 
> 标签：jsp, tomcat, caching, tomcat7

我在使用 Tomcat 7.0.34 的一些 jsp 页面上遇到问题，可能是因为我不详细了解它的行为。

特别是我正在测试对页面的一些更改，我所做的更改在浏览器上不可见，并非总是如此。使用的浏览器是 IE9 和 Firefox 19。我尝试不同时间清除缓存，但浏览器有时仍显示旧版本，有时显示新版本的页面。

然后我尝试在页面中放置语法错误。多次点击刷新按钮，有时浏览器显示编译问题（如预期的那样），但有时它显示的页面没有问题。

我试图删除工作目录中的 .class 文件，但没有任何改变。

大约 30 分钟不活动后，我再次尝试打开并刷新页面，这一次我总是收到错误，但有时 Tomcat 向我发送语法错误，有时还会向我发送 ClassNotFoundException。

我想知道为什么 Tomcat 有这种行为，以及如何确保它总是将最后编译的页面发送到浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:48:59.740

我认为页面被浏览器缓存的问题。两种选择：

1) 删除浏览器缓存例如，如果是 FireFox，您可以通过按 Ctrl + Shift + Del 来完成

![在此处输入图像描述](https://i.stack.imgur.com/0Sqy4.jpg)

2）防止页面在服务器端缓存。在页面中添加以下内容：

```
<%
    response.setHeader("Pragma", "No-cache");
    response.setHeader("Cache-Control", "no-cache");
    response.setDateHeader("Expires", 0);
%> 
```

# http - 网络服务器如何检测重放的登录尝试？

> ID：15760721
> 
> 赞同：0
> 
> 时间：2013-04-02T09:35:13.513
> 
> 标签：http, fiddler

当我将网络蜘蛛编码到特定网站时，我发现了一件奇怪的事情。

我使用 fiddler 和 chrome（以及其他网络浏览器）登录网站（HTTP，而不是 https）并获取发送和接收的所有包（以及 cookie）：（第一个包“获取”请求登录页面和cookie，然后使用接收到的cookie请求验证码和其他一些图片。然后将带有用户名、密码和验证码的登录请求发送到服务器，服务器以正确的信息响应）

然后我注销并清除所有缓存和 Cookie 并使用 Fiddler 中继（模拟）整个过程（因为我知道我应该发送的所有包的格式）：请求登录页面获取 cookie，使用 cookie 来请求所有图片（包括验证码图像），然后使用 cookie 和验证码请求登录（用户名和密码正确）...但失败。

我确定失败不是由无效的用户名或密码或身份验证码引起的，我相信前端没有什么特别的（检查 html，脚本），但它让我很困惑**服务器如何告诉我使用浏览器或不在后端**..

我不要求任何人解决具体问题。我只是想知道有人遇到过我描述的类似问题吗？

具体的网站并不重要，我必须说整个做法是完全无害的！我没有做任何黑客的事情，相反它会帮助一些人。

==================================================== ==== 我终于找到了原因：登录页面有一个隐藏的 input() 并且我不小心忽略了它，因为它的值每次看起来几乎相同。如果我们模拟了所有必要的 HTTP 请求包，Web 服务器无法检测到重放的登录尝试。谢谢各位~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:31:40.160

服务器无法神奇地判断他们是否在与 Fiddler 交谈。

如果 Fiddler 和您的客户端发送完全相同的请求，这意味着有问题的服务器在其登录表单中使用“一次性令牌”（有时称为随机数）。如果服务器再次看到相同的令牌，它会拒绝登录。有时随机数不是直接发送的，而是用于计算“挑战-响应”，就像在 NTLM 等身份验证协议中发生的那样。在其他情况下，nonce 是一个验证码，它有助于防止您使用机器人自动登录到这样的网站。

除非您可以共享目标站点的更多详细信息（或登录过程的 SAZ 文件），否则人们不太可能为您提供帮助。

# android - Android中带有谷歌地图的语音导航器

> ID：15760722
> 
> 赞同：2
> 
> 时间：2013-04-02T09:35:13.750
> 
> 标签：android, voice, navigator

我有一份针对我国盲人的申请。我想在我的应用程序和导航器中使用地图视图（谷歌地图）。在这里，导航器告诉他们他们走到哪里。如果有左转或右转，这意味着在路上，所以导航器可以告诉我们有左转或右转。如果有人有任何链接/教程源代码，请帮助我。

# java - 使用 Apache POI 读取 excel 文件

> ID：15760724
> 
> 赞同：5
> 
> 时间：2013-04-02T09:35:21.600
> 
> 标签：java, apache-poi

我创建了这段代码来使用 Apache POI 读取 excel 文件的内容。我使用 eclipse 作为编辑器，但是当我运行代码时，我在粗体字的行中遇到了问题。有什么问题？excel的内容如下：

```
Emp ID  Name    Salary

 1.0    john    2000000.0

 2.0    dean    4200000.0

 3.0    sam     2800000.0

 4.0    cass    600000.0 
```

* * *

```
import java.io.*;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class ExcelRead {

public static void main(String[] args) throws Exception {
    File excel = new File ("C:\\Users\\Efi\\Documents\\test.xls");
    FileInputStream fis = new FileInputStream(excel);

    HSSFWorkbook wb = new HSSFWorkbook(fis);
    HSSFSheet ws = wb.getSheet("Input");

    int rowNum = ws.getLastRowNum()+1;
    int colNum = ws.getRow(0).getLastCellNum();
    String[][] data = new String[rowNum][colNum];

    for (int i=0; i<rowNum; i++){
        HSSFRow row = ws.getRow(i);
            for (int j=0; j<colNum; j++){
                HSSFCell cell = row.getCell(j);
                String value = cellToString(cell);
                data[i][j] = value;
                System.out.println("The value is" + value);

            }
       }
    }

public static String cellToString (HSSFCell cell){

int type;
Object result;
type = cell.getCellType();

    switch(type) {

    case 0://numeric value in excel
        result = cell.getNumericCellValue();
        break;
    case 1: //string value in excel
        result = cell.getStringCellValue();
        break;
    case 2: //boolean value in excel
        result = cell.getBooleanCellValue ();
        break;
    default:
        ***throw new RunTimeException("There are not support for this type of               
       cell");***
        }

return result.toString();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T17:03:56.267

除了您在语句中捕获的[单元格类型](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Cell.html)之外，还有其他单元格类型。`switch`您有`0`( `CELL_TYPE_NUMERIC`)、`1`( `CELL_TYPE_STRING`) 和的情况`2`，但是`2`是`CELL_TYPE_FORMULA`。以下是其他可能的值：

*   3：`CELL_TYPE_BLANK`
*   4：`CELL_TYPE_BOOLEAN`
*   5：`CELL_TYPE_ERROR`

`Cell`在 switch 语句中使用单元类型的常量而不是整数文字，并使用所有 6 个常量来捕获所有可能的情况。

正如@Vash 已经建议的那样，`type`在您的`RuntimeException`消息中包含实际的单元格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-03T19:43:50.353

检查我为轻松读取 XLSX、XLS 和 CSV 文件而创建的[这个库。](https://github.com/eaorak/excelr)它使用 Apache POI 处理 excel 文件，并根据您的配置将 excel 行转换为 Java bean 列表。

这是一个例子：

```
RowConverter<Country> converter = (row) -> new Country(row[0], row[1]);

ExcelReader<Country> reader = ExcelReader.builder(Country.class)
     .converter(converter)
     .withHeader()
     .csvDelimiter(';')
     .sheets(1)
     .build();

List<Country> list;
list = reader.read("src/test/resources/CountryCodes.xlsx");
list = reader.read("src/test/resources/CountryCodes.xls");
list = reader.read("src/test/resources/CountryCodes.csv"); 
```

使用以下 excel 和 bean 文件：

```
public static class Country {
  public String shortCode;
  public String name;

  public Country(String shortCode, String name) {
    this.shortCode = shortCode;
    this.name = name;
  }
} 
```

电子表格：

```
 Code    Country
ad  Andorra
ae  United Arab Emirates
af  Afghanistan
ag  Antigua and Barbuda
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-28T14:21:48.443

使用 XSSFWorkbook 和 XSSFSheet 并没有帮助我阅读 .xls，但我使用了这段代码，它帮助我阅读了 .xls 和 xlsx 文件：

```
 public static void readExcelFile(File file) throws IOException, InvalidFormatException {
Workbook workbook = WorkbookFactory.create(new File(file.toString()));
        Integer sheet = workbook.getNumberOfSheets();
        DataFormatter dataFormatter = new DataFormatter();
        for (int i = 0; i < sheet; i++) {
            Sheet s = workbook.getSheetAt(i);
            Iterator<Row> rowIterator = s.rowIterator();
            while (rowIterator.hasNext()) {
                Row row = rowIterator.next();
                Iterator<Cell> cellIterator = row.cellIterator();
                while (cellIterator.hasNext()) {
                    Cell cell = cellIterator.next();
                    printCellValue(cell);
                    // both work perfect
                    // printCellValue(cell);
                    /*String cellValue = dataFormatter.formatCellValue(cell);
                    System.out.print(cellValue + "\t");*/
                }
                System.out.println();
            }

        }
    }

public static void printCellValue(Cell cell) {
        switch (cell.getCellType()) {
            case Cell.CELL_TYPE_BOOLEAN:
                System.out.print(cell.getBooleanCellValue());
                break;
            case Cell.CELL_TYPE_STRING:
                System.out.print(cell.getRichStringCellValue().getString());
                break;
            case Cell.CELL_TYPE_NUMERIC:
                if (DateUtil.isCellDateFormatted(cell)) {
                    System.out.print(cell.getDateCellValue());
                } else {
                    System.out.print(cell.getNumericCellValue());
                }
                break;
            case Cell.CELL_TYPE_FORMULA:
                System.out.print(cell.getCellFormula());
                break;
            case Cell.CELL_TYPE_BLANK:
                System.out.print("  ");
                break;
            default:
                System.out.print("");
        }

        System.out.print("\t");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:40:39.010

您应该使用有关您的 switch 语句不支持的类型的信息来修改 RuntimeException。然后您将能够添加对它的支持，因此不会抛出异常。

因此，要查看您的程序正在做什么的图片，而不是

`throw new RunTimeException("There are not support for this type of cell");`

你应该添加

`throw new RunTimeException("There are not support for type with id ["+type+"] of cell");`

这**只会**告诉你你错过了什么。如何处理这种情况取决于你。

# python - python - 如何在python中用高斯分布对具有2个变量的函数进行加权？

> ID：15760726
> 
> 赞同：2
> 
> 时间：2013-04-02T09:35:30.413
> 
> 标签：python, numpy, scipy, numerical-methods, probability-theory

最近几天我一直在处理这个问题，但我还看不出问题出在哪里。

我正在尝试在具有特定平均值 ( ) 和偏差 ( )`f(q,r)`的高斯分布中使用 2 个变量对函数进行加权。这是必需的，因为理论函数在实验分析时其变量具有一定的分散性。因此，我们使用概率密度函数来衡量我们在变量中的函数。`g(r)``R0``sigma``f(q)``r``r`

我包含了有效的代码，但没有给出预期的结果（加权曲线应该随着多分散性的增长（更高`sigma`）更平滑，如下所示。如您所见，我整合了来自的 2 个函数的`f(r,q)*g(r)`卷积`r = 0`到`r = +inf`.

![不同的多分散体](https://ars.els-cdn.com/content/image/1-s2.0-S0167732206001917-gr2.jpg)

绘制结果以将称重结果与简单函数进行比较：

```
from scipy.integrate import quad, quadrature
import numpy as np
import math as m
import matplotlib.pyplot as plt 

#function weighted with a probability density function (gaussian)
def integrand(r,q):
    #gaussian function normalized
    def gauss_nor(r):
        #gaussian function
        def gauss(r):
            return m.exp(-((r-R0)**2)/(2*sigma**2))
        return (m.exp(-((r-R0)**2)/(2*sigma**2)))/(quad(gauss,0,np.inf)[0])
    #function f(r,q)
    def f(r,q):
        return 3*(np.sin(q*r)-q*r*np.cos(q*r))/((r*q)**3)
    return gauss_nor(r)*f(r,q)

#quadratic integration of the integrand (from 0 to +inf)
#integrand is function*density_function (gauss) 
def function(q):
    return quad(integrand, 0, np.inf, args=(q))[0]

#parameters used in the function
R0=20
sigma=5

#range to plot q
q=np.arange(0.001,2.0,0.005)

#vector where the result of the integral will be saved
function_vec = np.vectorize(function)

#vector for the squared power of the integral
I=[]
I=(function_vec(q))**2

#function without density function
I0=[]
I0=(3*(np.sin(q*R0)-q*R0*np.cos(q*R0))/((R0*q)**3))**2

#plot of weighted and non-weighted functions
p1,=plt.plot(q,I,'b')
p3,=plt.plot(q,I0,'r')
plt.legend([p1,p3],('Weighted','No weighted'))
plt.yscale('log')
plt.xscale('log')
plt.show() 
```

非常感谢。我已经遇到这个问题好几天了，我还没有发现错误。

也许有人知道如何以更简单的方式使用 PDF 来衡量函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:27:49.750

我简化了您的代码，输出与您的相同。我认为它已经很平滑了，log-log图中有一些非常尖锐的峰值，只是因为曲线有零点。所以它在对数对数图中并不平滑，但在正常的 XY 图中却是平滑的。

```
import numpy as np

def gauss(r):
    return np.exp(-((r-R0)**2)/(2*sigma**2))

def f(r,q):
    return 3*(np.sin(q*r)-q*r*np.cos(q*r))/((r*q)**3)

R0=20
sigma=5

qm, rm = np.ogrid[0.001:2.0:0.005, 0.001:40:1000j]
gr = gauss(rm)
gr /= np.sum(gr)
fm = f(rm, qm)
fm *= gr

plot(qm.ravel(), fm.sum(axis=1)**2)
plt.yscale('log')
plt.xscale('log') 
```

![在此处输入图像描述](https://i.stack.imgur.com/rGHur.png)

# crystal-reports - 如果 X 页上的详细信息为空，则禁止部分 - Crystal Reports

> ID：15760729
> 
> 赞同：3
> 
> 时间：2013-04-02T09:35:37.483
> 
> 标签：crystal-reports, sap, crystal-reports-2008

我已经使用 Crystal Reports 2008 有一段时间了，虽然我了解了它的一般要点，但有些事情似乎很难做到，尤其是因为我不知道 CR 中允许使用哪些标签和正确的语法。

无论如何，我的问题如下：我一直在制作发票布局，但有时详细信息部分以页面结尾，但包含发票摘要（包括最终价格等）的部分随后打印在页面上. 这也意味着在下一页打印详细信息标题，标题和摘要之间没有任何内容。

当最后一页的详细信息部分为空时，是否可以有条件地抑制页眉 D？

尝试类似的东西

```
IF {Section Details} = "" AND pagenumber=TotalPageCount
THEN TRUE
ELSE FALSE 
```

如果我没有任何意义，我很抱歉；这里的咖啡严重缺乏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:29:56.440

尝试只`OnLastRecord`为您的页眉抑制公式使用关键字。我不能 100% 确定的唯一情况是当您的最后一页仅包含一条记录（最后一条记录）时......在这种情况下它可能仍会抑制标题，但我认为它可能没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-02T06:44:28.500

右键单击要有条件地抑制的报表页眉。Section Expert -> page Header -> 选中 Suppress 复选框，然后单击右侧的公式按钮，在同一部分专家屏幕和公式中禁止抑制..只需写 Onlastrecord 而不是 Onfirstrecord

完毕 ！！这样，即使有一条记录，页眉也会显示，否则如果相应详细信息部分的下一页上没有更多行，它将被抑制。您可以在详细信息之后添加报告页脚或任何摘要，而不会显示任何丑陋的页眉和行。

如果您不希望在最后一页上报告页脚，也将相同的抑制公式应用于报告页脚部分。

感谢[本](https://answers.sap.com/questions/12142827/suppress-page-header-on-report-footer.html)SAP 论坛中的 Abhilash

# java - 创建一个 j2me 时间触发应用程序

> ID：15760732
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:35:57.580
> 
> 标签：java, java-me

我试图创建一个时间调用的 J2ME 应用程序，它不需要用户手动启动它，但是当某些事件发生时，它会像电话警报或提醒一样被触发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:43:59.513

尝试通过推送注册表执行此操作，这些链接将帮助您 [推送注册表](http://www.developer.nokia.com/Community/Wiki/PushRegistry)、[推送注册表 Java Doc](http://www.oracle.com/technetwork/systems/index-156665.html)

# database - 两个表的联合查询

> ID：15760733
> 
> 赞同：0
> 
> 时间：2013-04-02T09:35:58.697
> 
> 标签：database, sql-server-2005, join

我有如下贸易文件表**：**

```
ID          int
TradeNo     nvarchar(50)    
Scrip_Code  nvarchar(50)    
Inst_Type   nvarchar(50)    
Expirydate  datetime    
Buy_Sell    float   
Trade_Qty   float   
Market_Rate float   
Party_Code  nvarchar(50)    
Sauda_Date  nvarchar(50) 
```

**FO关闭**表为：

```
Cl_Rate         money   
Expirydate      datetime
Trade_Date     datetime
Inst_Type      varchar(6)
Symbol     varchar(12) 
```

我只是触发以下查询以从 tradefile 表中获取数据：

```
SELECT   Scrip_Code,SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END) AS BuyQty, SUM(CASE WHEN Buy_sell = 1 THEN Market_Rate ELSE 0 END) AS BuyRate, SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) AS BuyAmount,SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) AS SellQty, SUM(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS SellRate,(CASE WHEN SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END)>SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) THEN 'BF' ELSE 'BT' END ) as TradeType, SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END) AS SellAmount, SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END)-SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) as NETQTY,SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END)-SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)as NetAmt,SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)-SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) as PNLAmt FROM tradeFile where Inst_Type='FUTIDX' OR Inst_Type='FUTSTK' and Sauda_Date between convert(datetime,'1 Mar 2013') and convert(datetime,'1 Apr 2013') group by Scrip_Code,ExpiryDate,sauda_date 
```

我只是想将 cl_Rate[Closing rate ] 附加到它。

关闭率检查为 `tradeFile.ExpiryDate=flclosing.expirydate`and`tradefile.saudadate=foclosing.tradedate`和`Inst_Type='FUTURISTIK'`

我有这些条件，但是当我尝试在上面的查询中附加这些条件时，它不起作用，因为 group by 已被使用。

谁能帮我在上述查询中附加具有上述条件的 cl_rate 列？？？

**编辑：**

```
try
            {

                con.Open();
                float closingRate = 0;
                DateTime dtExpDate=DateTime.Now.Date;

                da = new SqlDataAdapter("SELECT   ExpiryDate,Scrip_Code,SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END) AS BuyQty, SUM(CASE WHEN Buy_sell = 1 THEN Market_Rate ELSE 0 END) AS BuyRate, SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) AS BuyAmount,SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) AS SellQty, SUM(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS SellRate,(CASE WHEN SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END)>SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) THEN 'BF' ELSE 'BT' END ) as TradeType, SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END) AS SellAmount, SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty ELSE 0 END)-SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty ELSE 0 END) as NETQTY,SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END)-SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)as NetAmt,SUM(CASE WHEN Buy_sell = 2 THEN Trade_Qty * Market_Rate ELSE 0 END)-SUM(CASE WHEN Buy_sell = 1 THEN Trade_Qty * Market_Rate ELSE 0 END) as PNLAmt FROM tradeFile where Inst_Type='FUTIDX' OR Inst_Type='FUTSTK' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToShortDateString() + "') and convert(datetime,'" + dtpToDate.Value.Date.ToShortDateString() + "') group by Scrip_Code,ExpiryDate,sauda_date", con);
                DataSet ds = new DataSet();
                 da.Fill(ds);

                 for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
                 {
                     dtExpDate = DateTime.Parse(ds.Tables[0].Rows[i][0].ToString());
                     if (ds.Tables[0].Rows[i][7].ToString() == "BF")
                     {

                         daClRate = new SqlDataAdapter("select cl_rate,ExpiryDate,symbol from foClosing where Symbol='" + ds.Tables[0].Rows[i][1].ToString() + "' and convert(datetime,convert(varchar(11),ExpiryDate))= '" + dtExpDate.Date.ToString("yyyy-MM-dd") + "' and Inst_Type='FUTSTK' and trade_date between convert(datetime,'" + dtpForDate.Value.Date.ToShortDateString() + "') and convert(datetime,'" + dtpToDate.Value.Date.ToShortDateString() + "')  order by trade_date ", con);
                         dsClRate = new DataSet();
                         daClRate.Fill(dsClRate);
                         for (int j = 0; j < dsClRate.Tables[0].Rows.Count; j++)
                         {
                             closingRate = float.Parse(dsClRate.Tables[0].Rows[j][0].ToString());
                         }

                     }
                     else
                     {
                     }
                 } 
```

通过这种方式，我通过不同的查询获取收盘价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:24:15.087

将您的主要查询更改为

> SELECT tf.ExpiryDate,tf.Scrip_Code,fc.cl_rate, SUM(CASE WHEN tf.Buy_sell = 1 THEN tf.Trade_Qty ELSE 0 END) AS BuyQty, SUM(CASE WHEN tf.Buy_sell = 1 THEN tf.Market_Rate ELSE 0 END) AS BuyRate, SUM(CASE WHEN tf.Buy_sell = 1 THEN tf.Trade_Qty * tf.Market_Rate ELSE 0 END) AS BuyAmount,SUM(CASE WHEN tf.Buy_sell = 2 THEN tf.Trade_Qty ELSE 0 END) AS SellQty, SUM(CASE WHEN tf.Buy_sell = 2 THEN tf.Market_Rate ELSE 0 END) AS SellRate,(CASE WHEN SUM(CASE WHEN tf.Buy_sell = 1 THEN tf.Trade_Qty ELSE 0 END)>SUM(CASE WHEN tf.Buy_sell = 2 THEN tf. Trade_Qty ELSE 0 END) THEN 'BF' ELSE 'BT' END ) 作为 TradeType, SUM(CASE WHEN tf.Buy_sell = 2 THEN tf.Trade_Qty * tf.Market_Rate ELSE 0 END) AS SellAmount, SUM(CASE WHEN tf.Buy_sell = 1 THEN tf.Trade_Qty ELSE 0 END)-SUM(CASE WHEN tf.Buy_sell = 2 THEN tf.Trade_Qty ELSE 0 END) 作为 NETQTY，SUM(CASE WHEN tf.Buy_sell = 1 THEN tf.Trade_Qty * tf.Market_Rate ELSE 0 END)-SUM(CASE WHEN tf.Buy_sell = 2 THEN tf.Trade_Qty * tf.Market_Rate ELSE 0 END)as NetAmt,SUM(CASE WHEN tf.Buy_sell = 2 THEN tf.Trade_Qty * tf.Market_Rate ELSE 0 END)-SUM(CASE WHEN tf.Buy_sell = 1 THEN tf.Trade_Qty * tf.Market_Rate ELSE 0 END) as PNLAmt FROM tradeFile tf,foClosing fc where tf. Inst_Type='FUTIDX' OR tf.Inst_Type='FUTSTK' 和 tf.Sauda_Date 在 convert(datetime,'" + dtpForDate.Value.Date.ToShortDateString() + "') 和 convert(datetime,convert(varchar(11), fc.ExpiryDate))= '" + dtExpDate.Date.ToString("yyyy-MM-dd") + "' 和 convert(datetime,'" + dtpToDate.Value.Date.ToShortDateString() + "') 和 fc。符号 = tf.Scrip_Code 和 fc.Inst_Type='FUTSTK' 和 fc.trade_date=tf。sauda_date 和 fc.ExpiryDate = tf.ExpiryDate 按 Scrip_Code,ExpiryDate,sauda_date 分组

您之前的问题没有说清楚的是外键..您正在匹配`forClosing.Symbol`with `tradeFile.Scrip_Code`。这是缺失的部分。

# ajax - 经典 ASP：如何加快向客户端交付内容的速度？

> ID：15760734
> 
> 赞同：1
> 
> 时间：2013-04-02T09:36:05.157
> 
> 标签：ajax, asp-classic, vbscript

我正在维护一个经典的 ASP 应用程序。它有一些报告，其中很少有大约 25 列和大约 600 行的报告。我通过 AJAX 调用将数据从服务器返回到客户端并显示结果。

我所做的是在服务器端（使用字符串连接）为带有标题和行的表创建 HTML 字符串，并`response.write`在最后执行 a 。

```
if not rsStatus.eof then
        strresult=strresult & "<table class='sort-table' id='table-1'><thead><tr class='gridHeader' style='height:15px;'>"
        strresult=strresult & "<td>S.N.</td>"
        strresult=strresult & "<td>TSPL Job No.</td>"
        strresult=strresult & "<td>Client Name</td>"
        strresult=strresult & "<td>Job Type</td>"
        strresult=strresult & "<td>Govt Office</td>"
        strresult=strresult & "<td>Ref Value</td>"
        strresult=strresult & "<td>Govt File No.</td>"
        strresult=strresult & "<td>Submission Date</td>"
        strresult=strresult & "<td>Days Elasped Since Filing Date</td>"
        strresult=strresult & "<td>Process-Cycle/Status stage</td>"
        strresult=strresult & "<td>Status/  Remarks</td>"
        strresult=strresult & "<td>Status Last Updated on</td>"
        strresult=strresult & "<td>Trigon Bill No</td>"
        strresult=strresult & "<td>Trigon Bill Date</td>"
        strresult=strresult & "<td>Payment Received / Pending</td>"
        strresult=strresult & "</thead></tr><tbody>"
        dim rownum
        rownum = 1
        while not rsStatus.eof
            strresult=strresult & "<tr class='gridrow " & IIf(rownum Mod 2=1,"bgodd","bgeven") &"'>"
            strresult=strresult & "<td>" & rownum & "</td>"
            strresult=strresult & "<td><a href='http://localhost/app/global/weblets/Jobdetails.asp?JobId=" & rsStatus("iJobId") & "' target='new'>" & rsStatus("vJobNo") & "</a></td>"
            strresult=strresult & "<td>" & rsStatus("Client") & "</td>"
            strresult=strresult & "<td>" & rsStatus("vJobType") & "</td>"
            strresult=strresult & "<td>" & rsStatus("GovtOffice") & "</td>"
            strresult=strresult & "<td>" & rsStatus("RefVal") & "</td>"
            strresult=strresult & "<td>" & rsStatus("FileNo") & "</td>"
            strresult=strresult & "<td>" & rsStatus("SubmitedOn") & "</td>"
            strresult=strresult & "<td>" & rsStatus("elapsed") & "</td>"
            strresult=strresult & "<td>" & rsStatus("CurrentStatus") & "</td>"
            strresult=strresult & "<td>" & rsStatus("comment") & "</td>"
            strresult=strresult & "<td>" & rsStatus("dStatusDate") & "</td>"
            strresult=strresult & "<td>" & rsStatus("BillNo") & "</td>"
            strresult=strresult & "<td>" & rsStatus("BillDate") & "</td>"
            strresult=strresult & "<td>" & rsStatus("PymtStatus") & "</td>"
            strresult=strresult & "</tr>"
            rownum = rownum+1
            rsStatus.movenext
        wend
        strresult=strresult & "</tbody></table>"
    else
        strresult=strresult & "<tr class='gridrow'><td colspan=3>No Status Present for the Job</td></tr>"
    end if
    Response.Write(strresult) 
```

随着行数的增加，性能不是很好。

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:02:12.367

VBScript 中的字符串连接性能确实很差，您可以尝试使用[那些](http://www.codeguru.com/csharp/.net/net_asp/tutorials/article.php/c19367/VBScript-String-Concatenation-And-Why-It-Should-Be-Avoided-Like-The-Plague.htm) [文章](http://www.4guysfromrolla.com/webtech/092500-1.shtml)中描述的方法来改进您的脚本。

最简单的情况是创建一个包含所有字符串的数组，然后调用`Join`将它们全部连接起来。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:41:39.803

不需要建立一个字符串，只需写出这些行。

例如

```
<% if not rsStatus.eof then %>
        <table>
            <tr>
                <td>S.N.</td>
            </tr>
        </table>
<% end if %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T07:46:33.773

只是想在这里为我自己的问题添加一个答案，因为这给了我很好的性能提升。

我将我的 SQL 查询转换为`for xml`每列都为“td”的查询，如下所示：

```
Select col1 as [td], col2 as [td], col3 as [td] from table for xmpl path('tr'), root('table') 
```

并将结果返回给浏览器，几乎没有对 ASP 服务器端代码进行处理。

# xss - 这是xss攻击，为什么无效？

> ID：15760735
> 
> 赞同：0
> 
> 时间：2013-04-02T09:36:08.847
> 
> 标签：xss

要测试 xss 攻击，我有以下代码：

```
<html>
    <head><title>test xss</title></head>
    <body>
       <input type="text" id="my_user_name_show" value="">
       <script>
           var s = '"/><script>alert(\'xss\');</script><br class="';
           document.getElementById('my_user_name_show').value= s;
       </script>
    </body>
</html> 
```

为什么代码不能触发警报（xss）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:01:34.560

*当实际的HTML*改变时，必须从后端触发对输入表单值的 XSS 攻击，从而导致

```
 <input type="text" id="my_user_name_show" value=""/>
 <script>alert('xss');</script>
 <br class=""> 
```

要写入，这显然会导致它触发警报。另一方面，您的代码只会导致

```
<input type="text" id="my_user_name_show" value="\"/><script>alert('xss');</script><br class=\""> 
```

被放置在 DOM 中，因此不会引起任何警报，因为没有脚本元素被添加到 DOM 中。

# iphone - UITableViewCell 分隔符样式不会改变

> ID：15760737
> 
> 赞同：1
> 
> 时间：2013-04-02T09:36:12.237
> 
> 标签：iphone, ios, uitableview

我正在制作类似 facebook 应用程序的左面板搜索功能。我有两个 UITableViewControllers。当用户点击 UISearchBar 以显示搜索结果时，我从其中一个中取出一个 tableView 并将其放在另一个之上。当我创建第二个 UITableViewController 时，我告诉它，它的分隔符样式在 ViewDidLoad 方法中将是 none：

```
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

然后，在我将它的tableView 放在第一个UITableViewController 的视图上方之后，它一开始是空的，因为还没有向UISearchBar 输入数据。并且没有任何分隔符。但是，当用户输入任何字母并且表格数据有一些记录时，分隔符样式将恢复为默认样式（白线）。

因此，由于某种原因，我的第二个控制器忘记了分隔符样式应该是什么，并在再次重新加载表格视图分隔符后显示。`What can be the reason?`

编辑：这就是我创建第二个 UITableViewController 并将它的 tableView 放在第一个控制器的视图上的方式：

```
 - (UIView *)searchResultsView
{
    if (! _searchResultsView) {

        _searchResultsView = self.searchResultsViewController.tableView;
        _searchResultsView.frame = CGRectMake(0, 44, 320, self.view.frame.size.height-44);
    }

    return _searchResultsView;
}

- (SearchResultsViewController *)searchResultsViewController
{
    if (! _searchResultsViewController) {

        _searchResultsViewController = [[SearchResultsViewController alloc] init];
        _searchResultsViewController.searchBar = _searchBar;

    }

    return _searchResultsViewController;
}

- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{   
    [self.view addSubview:self.searchResultsView];
} 
```

截屏：

当表格视图没有数据时，它是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/OUOv8.png)

如您所见，没有分隔符。

当有数据时，这就是它的外观。我已删除单元格内容。如您所见，有白色分隔符。

![在此处输入图像描述](https://i.stack.imgur.com/Meart.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:25:14.200

尝试`self.tableView.separatorColor = [UIColor clearColor];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:46:17.823

问题是我使用了 UISearchController 并创建了它自己的 tableView。所以我在那里什至有 3 个 tableViews。在我删除 UISearchController 和它的委托方法后，一切都开始工作了。现在我从 UISearchBar 中获取一个字符串并将其传输到我的第二个 UITableViewController。那里不需要 UISearchController。

```
- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    NSString *searchString = [_searchBar.text stringByReplacingCharactersInRange:range withString:text];
    self.searchResultsViewController.searchString = searchString;

    return YES;
} 
```

我在第二个 UITableViewController 中为 searchString 使用自定义设置器：

```
- (void)setSearchString:(NSString *)searchString
{
    _searchString = searchString;

    [self filterContentForSearchText:searchString];

    [self.tableView reloadData];
} 
```

# ruby-on-rails - Rails 3 中的路由（从 rails 2 升级）

> ID：15760743
> 
> 赞同：1
> 
> 时间：2013-04-02T09:36:30.090
> 
> 标签：ruby-on-rails

```
map.resources :users, 
              :collection => {:access_history => :get }, 
              :member => {:change_access => :any } 
```

您好，上面的代码是用 Rails 2 编写的路由代码的一部分。我无法将这段代码转换为 Rails 3 的等效代码。如果有人能指导我解决这个问题，我会很高兴。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:38:41.557

这应该是这样的：

```
resources :users do
  collection do
    get :access_history
  end

  member do
    match :change_access
  end
end 
```

有关 Rails 3 中路由的更多信息，您应该查看[路由官方教程](http://guides.rubyonrails.org/routing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:42:37.340

较短的版本：

```
 resources :users do
      get 'access_history', :on => :collection
      match 'change_access', :on => :member
 end 
```

# perl - 如何使用 timelocal 和 localtime 根据给定的差异计算时间？

> ID：15760749
> 
> 赞同：0
> 
> 时间：2013-04-02T09:36:50.683
> 
> 标签：perl

我目前正在构建一个处理大量时间相关功能的模块。我经常使用 localtime(time)，因为它返回的数组 (sec,min,hour,dayofmonth,mon,year,weekday,yearday,isDST) 对于时间戳很有用，并且希望尽可能使用它来保持一致性。

我需要创建一种基于给定时差计算时间的方法（即“5 天前的日期是什么？”之类的）。我目前的想法是将差异设置为“差异数组”（例如 [0,0,0,-5,0,0,0,-5,0]）并将其添加到提供新日期的基准时间。但这在边界时间（例如回滚到上个月）和保持一切正确对齐（例如夏令时）方面存在问题。

我的另一个想法是使用 timelocal() 将其转换回时间值，给出一个平坦的差异并将其添加到基本时间以获得结果时间，然后使用 localtime 转换回来使其与模块的其余部分。但这可能是有问题的，因为它可能会不规律地处理潜在的负值。

当然，我可以对第一种方法的数组值进行规范化，或者从时间值中减去一系列值（所以是一个常量列表，Day = 8400，hour = 3600，min = 60 之类的东西）。但这两者都很繁琐，我的问题本质上是我可以采取一种不同（更优雅）的方法来解决这个问题，并且仍然能够将时间恢复到 localtime 使用的数组中，因此它与其余部分一致模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:23:39.750

```
my $dt = DateTime->now( time_zone => 'local' );
$dt->subtract( days => 5 );
say $dt->strftime('%Y-%m-%d'); 
```

`$dt->epoch`返回一个`localtime`接受的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:23:38.020

一种更优雅的方法是使用基于时间的对象。它们允许您在更高、更抽象的级别上进行计算，这将使您免于处理日/月/年边界之间`localtime`的所有转换。`timelocal`

有各种模块可以让你做到这一点。我建议您从[Time::Piece](https://metacpan.org/module/Time%3a%3aPiece)（核心的一部分，并且非常快速和轻量级）开始，如果这不足以满足您的需求，则转向更重的东西。

```
use Time::Piece;    # takes over localtime()
use Time::Seconds;  # use constant ONE_DAY

my $now = localtime();
my $five_days_ago = $now - ONE_DAY * 5;

print $now, "\n";           # same as if you used localtime() w/o Time::Piece
print $now->datetime, "\n"; # 2000-02-29T12:34:56 (ISO 8601)

my $diff = $now - $five_days_ago;
print $diff->pretty, "\n"; 
```

`Time::Piece`以向后兼容的方式覆盖`localtime`，因此您应该能够轻松地将其引入现有代码。

# grails - 在grails 的taglib 定义中使用资源？

> ID：15760754
> 
> 赞同：0
> 
> 时间：2013-04-02T09:36:55.753
> 
> 标签：grails, taglib

我是 grails 的新手，我想编写一个 taglib，但我不知道如何引用 MyTagLib.groovy 文件中的资源。我要检索路径的资源是图片。我尝试了类似于我以前在 gsp 文件中执行的操作，如下所示：

> < g:resource dir="images/icons/flag-icons/" file="gb.png" />

还有这个

> ${resource(dir: 'images/icons/flag-icons/', file: 'gb.png')}

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:31:02.483

标记库可通过与它们的命名空间（字段的值）匹配的变量从其他标记库（和控制器）中获得`static namespace`。对于 Grails 的内置标记库：

```
g.resource(dir: 'images/icons/flag-icons/', file: 'gb.png') 
```

# sharepoint - 在自定义 Web 服务中使用 SharePoint 2013 STS

> ID：15760759
> 
> 赞同：2
> 
> 时间：2013-04-02T09:37:10.273
> 
> 标签：sharepoint, sharepoint-2013

我们有一个使用基于声明的身份验证的 SharePoint 2013 Web 应用程序，其中身份提供者是 windows。IIS 中的 SharePoint 网站内的“子应用程序”中有一些自定义 Web 服务。我们想要的是让那些自定义 Web 服务声明能够感知。因此，在自定义 Web 服务中，我们应该知道谁是 SharePoint 中的当前登录用户，他是否是经过身份验证的 SP 用户等。

当我们使用 AJAX Web 部件访问自定义 Web 服务时，Web 服务知道当前登录的用户，但是使用内容查询 (XSLT) Web 部件，Web 服务将应用程序池的用户显示为当前登录的用户，有点双重跳问题。

知道如何解决此问题或如何在我的自定义 Web 服务应用程序中使用 SharePoint 网站的 STS？

# mysql - Mysql合并行

> ID：15760760
> 
> 赞同：3
> 
> 时间：2013-04-02T09:37:12.853
> 
> 标签：mysql, group-by

我有这张桌子：

```
ip   country

1     A
2     A
3     B
4     B
4     B 
```

我正在尝试编写一个查询，它将返回如下内容：

```
A 1,2
B 3,4 
```

例如`SELECT * FROM table GROUP BY`国家/地区回报：

```
A 1
B 3 
```

但这不是预期的结果。

Ι 可以运行这个简单的查询：

```
SELECT * FROM table ORDER BY ip 
```

并以**编程**方式编写如下内容：

```
$c_ip=0;
while($row=mysql_fetch_array($result,MYSQL_ASSOC)){
if($row['ip'])!=$c_ip)
{
$c_ip=$row['ip'];
//new line!!
}else
{
//don't close <tr> code goes here
}
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T09:44:05.453

试试这个：

```
SELECT country, GROUP_CONCAT(DISTINCT ip SEPARATOR ',') AS ips 
FROM my_table 
GROUP BY country 
```

**[SQL小提琴](http://www.sqlfiddle.com/#!2/3f436/13)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:58:42.153

如果您不希望值 4 重复，您可能需要在 ip 前面添加“DISTINCT”。

```
SELECT country, GROUP_CONCAT(DISTINCT ip SEPARATOR ',') AS ids 
FROM my_table 
GROUP BY country 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:45:34.253

试试这个`Query`，你可以**`STUFF`**在**`SQL SERVER`**

```
 SELECT 
  t1.country,
  STUFF((
    SELECT distinct ', ' + cast(t2.ip as varchar)
    FROM Table1 t2
    WHERE t2.country = t1.country
    FOR XML PATH (''))
  ,1,2,'') AS Names
FROM Table1 t1
GROUP BY t1.country; 
```

***[SQL 小提琴](http://sqlfiddle.com/#!3/3c1d7/6)***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:45:36.083

试试这个：

```
SELECT country, GROUP_CONCAT(ip)
FROM table1
GROUP BY country 
```

[***SQL 小提琴在这里***](http://www.sqlfiddle.com/#!2/3f436/2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T09:47:34.803

试试这个

```
 SELECT DISTINCT country, SUBSTRING(ConcateColumn,2,LEN(ConcateColumn))
    FROM Table t1
   CROSS APPLY ( 
                select substring((SELECT  ','  + ip 
                     FROM Table t2
                     WHERE t2.country = t2.country
                     ORDER BY DescOfFault 
                     FOR XML PATH('')),2,20000)
                      )  D ( ConcateColumn ) 
```

# c# - 需要将以下字符串转换为时间格式

> ID：15760761
> 
> 赞同：1
> 
> 时间：2013-04-02T09:37:21.203
> 
> 标签：c#

我有以下两个字符串格式的日期。

```
1\. 06 Mar 2013 
2\. 26 Mar 2013 
```

我需要比较这两个日期，即`if (06 Mar 2013 < 26 Mar 2013)`

是否有任何内置函数可以将字符串转换为 C# 日期和时间格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:38:05.523

您需要使用带格式的[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)`dd MMM yyyy`将这两个日期解析为 DateTime 对象，然后将两者进行比较。

```
string str1 = "06 Mar 2013";
string str2 = "26 Mar 2013";

DateTime dt1 = DateTime.ParseExact(str1, "dd MMM yyyy", null);
DateTime dt2 = DateTime.ParseExact(str2, "dd MMM yyyy", null);
if(dt1 < dt2)
{
  //dt1 is less than dt2
} 
```

您还可以使用 format`d MMM yyyy`和 single `d`，它适用于一位数和两位数的日子（例如`02`，`2`等`12`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:38:02.587

就在这里。尝试`DateTime.Parse`和`DateTime.ParseExact`方法。这是代码示例：

```
string first = "06 Mar 2013";
string second = "26 Mar 2013";

DateTime d1 = DateTime.Parse(first);
DateTime d21 = DateTime.Parse(second);

var result = d1 > d21; //false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:42:58.293

`DateTime.ParseExact`按以下方式使用：

```
DateTime dt = DateTime.ParseExact(str, "dd MMM yyyy", CultureInfo.InvariantCulture); 
```

[**演示**](http://ideone.com/TajE3L)

`CultureInfo.InvariantCulture`即使当前文化没有英文月份名称，也需要确保它能够成功解析。

# javascript - 如何从 html 图像中获取 base64 编码数据

> ID：15760764
> 
> 赞同：39
> 
> 时间：2013-04-02T09:37:25.630
> 
> 标签：javascript, html, image, base64

我有一个注册表单，用户可以在其中选择头像。他们有两种可能性：

1.  选择默认头像
2.  上传自己的头像

在我的 HTML 页面中，我有这个。

```
<img id="preview" src="img/default_1.png"> 
```

它显示选择的头像。我使用 File Api 让用户上传自己的图像。这使得 HTML 图像的 src 变成了这样。

```
<img id="preview" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgA... /> 
```

当他们发布注册表时。数据将被发送到 REST 服务。当用户自己上传头像时，我可以发送 base64 编码数据。但是如何处理默认头像？它是一个 url 而不是 base64 编码的数据。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-02T10:09:13.000

您可以尝试以下示例 [http://jsfiddle.net/xKJB8/3/](http://jsfiddle.net/xKJB8/3/)

```
<img id="preview" src="http://www.gravatar.com/avatar/0e39d18b89822d1d9871e0d1bc839d06?s=128&d=identicon&r=PG">
<canvas id="myCanvas" /> 
```

* * *

```
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
var img = document.getElementById("preview");
ctx.drawImage(img, 10, 10);
alert(c.toDataURL()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-06T00:31:14.557

您还可以使用 FileReader 类：

```
 var reader = new FileReader();
    reader.onload = function (e) {
        var data = this.result;
    }
    reader.readAsDataURL( file ); 
```

# android - 双击顶部

> ID：15760765
> 
> 赞同：3
> 
> 时间：2013-04-02T09:37:26.727
> 
> 标签：android, listview, android-listview

我在我的通话中看到了这个新功能`Samsung Galaxy S3`，`Double Tap to Top`在滚动到底部时，`listView`用户不需要滚动回顶部，他只需要在电话/设备顶部双击，它就会自动滚动回顶部。有没有可能我也可以`custom listView`在我的应用程序内部做类似的事情？我用谷歌搜索但找不到解决方案。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:04:04.433

从以下代码中获取提示，只需在`onListItemClick`您的`listView`

```
 setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView parent, View view, int <a href='http://viagra365.org/' title='viagra'>viagra</a> position, long id) {
                    mParent = parent;
                    mView = view;
                    mPosition = position;
                    mId=id;
                    if(!mTookFirstEvent) //Testing if first tap occurred
                    {
                        mPositionHolder=position;
                        //this will hold the position variable from first event.
                        //In case user presses any other item (position)
                        mTookFirstEvent=true;
                        mMessage = mMessage == null? new Message() : mHandler.obtainMessage();
                        //”Recycling” the message, instead creating new instance we get the old one
                        mHandler.removeMessages(SINGLE_TAP);
                        mMessage.what = SINGLE_TAP;
                        mHandler.sendMessageDelayed(mMessage, DELAY);
                    }
                    else
                    {
                        if(mPositionHolder == position)
                        {
                            mHandler.removeMessages(SINGLE_TAP);
                            //Removing the message that was queuing for scheduled
                            //sending after elapsed time > DELAY,
                            //immediately when we have second event,
                            //when the time is < DELAY
                            mPosition = position;
                            mMessage = mHandler.obtainMessage();
                            //obtaining old message instead creating new one
                            mMessage.what=DOUBLE_TAP;
                            mHandler.sendMessageAtFrontOfQueue(mMessage);
                            //Sending the message immediately when we have second event,
                            //when the time is < DELAY
                            mTookFirstEvent=false;
                        }
                        else
                        {
                            /* When the position is different from previously
                             * stored position in mPositionHolder (mPositionHolder!=position).
                             * Wait for double tap on the new item at position which is
                             * different from mPositionHolder. Setting the flag mTookFirstEvent
                             * back to false.
                             *
                             * However we can ignore the case when we have mPosition!=position, when we want,
                             * to do something when onSingleTap/onItemClickListener are called.
                             *
                             */
                            mMessage = mHandler.obtainMessage();
                            mHandler.removeMessages(SINGLE_TAP);
                            mTookFirstEvent=true;
                            mMessage.what = SINGLE_TAP;
                            mPositionHolder = position;
                            mHandler.sendMessageDelayed(mMessage, DELAY);
                        }
                    }
            }
      }); 
```

有关更多详细信息，您可以参考 [https://github.com/NikolaDespotoski/DoubleTapListView](https://github.com/NikolaDespotoski/DoubleTapListView)或[https://github.com/NikolaDespotoski/DoubleTapListViewHandler](https://github.com/NikolaDespotoski/DoubleTapListViewHandler)

# matlab - 图例使 Matlab 代码执行时间加倍

> ID：15760768
> 
> 赞同：0
> 
> 时间：2013-04-02T09:37:48.647
> 
> 标签：matlab, optimization, matlab-figure

我注意到，如果我的 Matlab 代码必须显示图例，则运行时间会显着增加。
这是一个例子：

```
clear all
close all
clc

% legend test
x = [0:1:100];
y = x.^(3.123);

figure('Name', 'X-Y and X-X plot')
plot(x,y)
hold all
plot(x,x)
legend('1', '232') 
```

运行时间为 1.1 秒。没有该行的相同代码`legend('1', '232')`的执行时间为 0.4 秒。我觉得很奇怪，一个简单的传说会增加这么多的运行时间。
使用分析器我发现主要负责时间增加的函数被调用`graphics/private/texmex`。它的自时间为 0.12 秒，被调用 4 次。当我不创建图例时，不会调用此函数。

有没有办法加快我的代码，同时仍然在图中生成图例？

我在 Mac OS 10.8.3 上运行 64 位 Matlab 2012b。

当我运行示例中的代码时，`set(0, DefaultTextInterpreter, 'none')`函数`texmex`由 调用`tex>localCallTeXParser`，由 调用`scribe.legend.methods>strsize`，等等......：

```
graphics/private/texmex
tex>localCallTeXParser
scribe.legend.methods>strsize
scribe.legend.methods>getsizeinfo
scribe.legend.methods>getsize
scribe.legend.methods
scribe.legend.legend 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T16:16:24.773

我自己的一个项目也有同样的问题。我想使用滑块快速动态更新一些线图，但注意到激活图例确实扼杀了我获得的性能。

我在这里找到了我的问题的解决方案 - [http://undocumentedmatlab.com/blog/plot-performance/](http://undocumentedmatlab.com/blog/plot-performance/)。

从第二个列出的性能技巧中，我添加了这些行

~~设置（gca，'LegendColorbarListeners'，[]）；~~

```
setappdata(gca,'LegendColorbarManualSpace',1);
setappdata(gca,'LegendColorbarReclaimSpace',1); 
```

到我的代码。我收到了提到的第一行代码的错误消息，所以我在上面删除了它。无论如何，另外两行代码使我的情节更新与图例一样快，因为它们没有图例存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:46:18.810

听起来像是`legend`在使用 TeX 解释器（至少，`texmex`听起来是这样）。在这种情况下，您可以尝试

```
legend({'1', '232'}, 'Interpreter', 'none'); 
```

这将禁用 TeX 解释器，因此可能会提高性能。我可能应该注意到，我从未遇到过`legend`函数速度方面的任何问题，因此它可能与您的绘图和/或 MATLAB 安装/版本有关。

**编辑**：我感觉上面会先用 TeX 解释器绘制图例，然后禁用它并再次绘制它。在绘制图例之前或在绘制图形之前尝试执行以下操作（不确定 MATLAB 会在哪一点将默认属性提升为实际的图形/轴/图例）：

```
set(0, 'DefaultTextInterpreter', 'none'); 
```

# php - 为 foreach 提供的参数无效 - 建立数据库连接时出错

> ID：15760782
> 
> 赞同：0
> 
> 时间：2013-04-02T09:38:20.070
> 
> 标签：php, mysql, wordpress

我的虚拟专用服务器有问题。VPS 托管 2 个 wordpress 网站。从上周开始，服务器有时突然开始产生错误，两个网站都在前端显示以下错误。重新启动 Apache 网络服务器后 1 或 2 天就可以了，但这个时间似乎正在减少。

前端产生的错误是：

`"Warning: Invalid argument supplied for foreach() in /var/www/html/domainname/wp-includes/locale.php on line 117 Warning: Invalid argument supplied for foreach() in /var/www/html/domainname/wp-includes/locale.php on line 159 Error establishing a database connection"`

Locale.php 的内容：（对此没有任何更改）

```
function init() {
    // The Weekdays
    $this->weekday[0] = /* translators: weekday */ __('Sunday');
    $this->weekday[1] = /* translators: weekday */ __('Monday');
    $this->weekday[2] = /* translators: weekday */ __('Tuesday');
    $this->weekday[3] = /* translators: weekday */ __('Wednesday');
    $this->weekday[4] = /* translators: weekday */ __('Thursday');
    $this->weekday[5] = /* translators: weekday */ __('Friday');
    $this->weekday[6] = /* translators: weekday */ __('Saturday');

    // The first letter of each day. The _%day%_initial suffix is a hack to make
    // sure the day initials are unique.
    $this->weekday_initial[__('Sunday')]    = /* translators: one-letter abbreviation of the weekday */ __('S_Sunday_initial');
    $this->weekday_initial[__('Monday')]    = /* translators: one-letter abbreviation of the weekday */ __('M_Monday_initial');
    $this->weekday_initial[__('Tuesday')]   = /* translators: one-letter abbreviation of the weekday */ __('T_Tuesday_initial');
    $this->weekday_initial[__('Wednesday')] = /* translators: one-letter abbreviation of the weekday */ __('W_Wednesday_initial');
    $this->weekday_initial[__('Thursday')]  = /* translators: one-letter abbreviation of the weekday */ __('T_Thursday_initial');
    $this->weekday_initial[__('Friday')]    = /* translators: one-letter abbreviation of the weekday */ __('F_Friday_initial');
    $this->weekday_initial[__('Saturday')]  = /* translators: one-letter abbreviation of the weekday */ __('S_Saturday_initial');

    foreach ($this->weekday_initial as $weekday_ => $weekday_initial_) {
        $this->weekday_initial[$weekday_] = preg_replace('/_.+_initial$/', '', $weekday_initial_);
    }

    // Abbreviations for each day.
    $this->weekday_abbrev[__('Sunday')]    = /* translators: three-letter abbreviation of the weekday */ __('Sun');
    $this->weekday_abbrev[__('Monday')]    = /* translators: three-letter abbreviation of the weekday */ __('Mon');
    $this->weekday_abbrev[__('Tuesday')]   = /* translators: three-letter abbreviation of the weekday */ __('Tue');
    $this->weekday_abbrev[__('Wednesday')] = /* translators: three-letter abbreviation of the weekday */ __('Wed');
    $this->weekday_abbrev[__('Thursday')]  = /* translators: three-letter abbreviation of the weekday */ __('Thu');
    $this->weekday_abbrev[__('Friday')]    = /* translators: three-letter abbreviation of the weekday */ __('Fri');
    $this->weekday_abbrev[__('Saturday')]  = /* translators: three-letter abbreviation of the weekday */ __('Sat');

    // The Months
    $this->month['01'] = /* translators: month name */ __('January');
    $this->month['02'] = /* translators: month name */ __('February');
    $this->month['03'] = /* translators: month name */ __('March');
    $this->month['04'] = /* translators: month name */ __('April');
    $this->month['05'] = /* translators: month name */ __('May');
    $this->month['06'] = /* translators: month name */ __('June');
    $this->month['07'] = /* translators: month name */ __('July');
    $this->month['08'] = /* translators: month name */ __('August');
    $this->month['09'] = /* translators: month name */ __('September');
    $this->month['10'] = /* translators: month name */ __('October');
    $this->month['11'] = /* translators: month name */ __('November');
    $this->month['12'] = /* translators: month name */ __('December');

    // Abbreviations for each month. Uses the same hack as above to get around the
    // 'May' duplication.
    $this->month_abbrev[__('January')] = /* translators: three-letter abbreviation of the month */ __('Jan_January_abbreviation');
    $this->month_abbrev[__('February')] = /* translators: three-letter abbreviation of the month */ __('Feb_February_abbreviation');
    $this->month_abbrev[__('March')] = /* translators: three-letter abbreviation of the month */ __('Mar_March_abbreviation');
    $this->month_abbrev[__('April')] = /* translators: three-letter abbreviation of the month */ __('Apr_April_abbreviation');
    $this->month_abbrev[__('May')] = /* translators: three-letter abbreviation of the month */ __('May_May_abbreviation');
    $this->month_abbrev[__('June')] = /* translators: three-letter abbreviation of the month */ __('Jun_June_abbreviation');
    $this->month_abbrev[__('July')] = /* translators: three-letter abbreviation of the month */ __('Jul_July_abbreviation');
    $this->month_abbrev[__('August')] = /* translators: three-letter abbreviation of the month */ __('Aug_August_abbreviation');
    $this->month_abbrev[__('September')] = /* translators: three-letter abbreviation of the month */ __('Sep_September_abbreviation');
    $this->month_abbrev[__('October')] = /* translators: three-letter abbreviation of the month */ __('Oct_October_abbreviation');
    $this->month_abbrev[__('November')] = /* translators: three-letter abbreviation of the month */ __('Nov_November_abbreviation');
    $this->month_abbrev[__('December')] = /* translators: three-letter abbreviation of the month */ __('Dec_December_abbreviation');

    foreach ($this->month_abbrev as $month_ => $month_abbrev_) {
        $this->month_abbrev[$month_] = preg_replace('/_.+_abbreviation$/', '', $month_abbrev_);
    } 
```

我没有更改 php 或 mysql 配置中的任何内容，我不知道为什么它开始出现这样的行为。

一个临时的解决方案是重新启动 httpd 服务，然后一切都会好起来大约 1 天，但似乎这个时间减少到有时半小时。

起初我认为这个问题是由 Mysql 引起的。但是，我配置了一个测试工具来测试mysql。在 VPS 遇到问题的时候，通过 Mysql 测试工具登录数据库没有问题。

老实说，我不是 php 大师，希望有人能让我走上正轨。我已经自己排查问题和浏览论坛几个小时了，但我现在不知道如何解决它。

如果您需要更多信息，请询问。提前谢谢了。

最好的问候，罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:39:39.463

尝试在 for 循环之前检查它们是否是数组

```
 if(is_array($this->weekday_initial))
     foreach ($this->weekday_initial as $weekday_ => $weekday_initial_) 
```

# javascript - 正则表达式：捕获所有内容，直到特定单词

> ID：15760784
> 
> 赞同：0
> 
> 时间：2013-04-02T09:38:23.027
> 
> 标签：javascript, regex, regex-lookarounds

我有两个字符串的变体，例如：

> The Student's Companion ***作者：Alcock, Pete;May, Margaret;Wright, Sharon** *MIL EAN/ISBN: 9781283333115
> 
> Java 编程：Java 专家***作者：Sarang, Poornachandra** *MIL EAN/ISBN：9781280117268

现在，我想抓住第一作者：Alcock, Pete aand Saran, Pooranachandra。

现在在 Javascript 中，我正在尝试做：

```
var regex = new RegExp("(Author:)\\s(.+)(?=;|MIL)");
var regexVal = value.match(regex);
console.log(regexVal); 
```

或者

```
var regex = new RegExp("(Author:)\\s(.+)(?=MIL)");
var regexVal = value.match(regex);
console.log(regexVal); 
```

如果有一个作者，第二个正则表达式工作得很好，但是，如果有多个作者，我想选择价值直到第一个**；**不是**MIL**

**|** 匹配任一部分，所以，它不应该在第一次时停止；找到了吗？

问候， 狂欢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:59:19.717

你可以使用：

```
var regex = /Author:\s([^;*]+)/; 
```

或者，如果这些`*`不在字符串中：

```
var regex = /Author:\s((?:(?!MIL)[^;])+)/; 
```

或者

```
var regex = /Author:\s([^;])+?)(?=;|MIL)/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:45:27.123

通过将正则表达式修改为解决了我的问题：

```
(Author:)(([^;])+)(;|MIL) 
```

这个正则表达式说： 应该以“作者：”开头，否定 ; 并且应该以 ; 结尾 或 MIL。

谢谢

# c# - 配置 OAuth 创建 DefaultConnection 数据库

> ID：15760786
> 
> 赞同：2
> 
> 时间：2013-04-02T09:38:35.390
> 
> 标签：c#, asp.net, database, oauth, asp.net-membership

在我的应用程序（ASP.NET WebForms 4.5）中，我使用了自定义成员资格提供程序和具有自定义成员资格方案的 MSSQL 数据库。创建新用户时，我只需调用

```
dc.Users.Add(newUser); 
```

在`MembershipUser CreateUser`成员资格提供程序内的方法中，然后返回从接收到的数据构造的新 MembershipUser 实例。（`dc`是我的数据上下文）

现在，我根据[本](http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp-net-application-using-universal-providers.aspx)教程添加了对 OAuth 的支持。问题是，它将新创建的用户的 OAuth 令牌存储到自动创建的数据库 DefaultConnection 中，而不是我自己的数据库中。我不喜欢这种行为。如何告诉 OAuth 将令牌存储到我自己的数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T18:05:43.933

环境

```
OpenAuth.ConnectionString 
```

在 web.config 中我的 connectionString 名称注册后，在 Global.asax 中解决了这个问题。

# image - 用于图像 htaccess 问题的 wordpress 子域

> ID：15760788
> 
> 赞同：3
> 
> 时间：2013-04-02T09:38:37.700
> 
> 标签：image, wordpress, .htaccess, subdomain

我正在尝试为我的 wordpress 图像设置一个子域，并且我一直在设置一个指向默认 wordpress 上传目录的虚拟主机。问题是子域被 wordpress .htaccess 覆盖。

**apache 虚拟主机**

```
<VirtualHost *:80> 
      ServerName img.mydomain.com
      ServerAlias img.mydomain.com
      DocumentRoot C:/inetpub/wwwroot/mydomain.com/wp-content/uploads/ 
</VirtualHost> 
```

如果我调用子域，我会收到 502 错误

我的 .htaccess

```
#RewriteRule ^(.*)-en/?$ /$1/ [L]

RewriteCond %{HTTP_HOST} http://www.mydomain.com [NC]
#RewriteRule ^tag/(.*)$ http://www.mydomain.com/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/\d{2}/(.*)$ http://www./mydomain.com/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/(.*)$ http://www./mydomain.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} http://www./mydomain.co.uk [NC]
#RewriteRule ^tag/(.*)$ http://www./mydomain.co.uk/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/\d{2}/(.*)$ http://www./mydomain.co.uk/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/(.*)$ http://www./mydomain.co.uk/$1 [L,R=301]

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteRule ^news-sitemap.xml /?feed=sitemap-news [L] 

# BEGIN W3TC CDN
<FilesMatch "\.(ttf|otf|eot|woff)$">
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule>
</FilesMatch>
# END W3TC CDN
# BEGIN W3TC Browser Cache
<IfModule mod_mime.c>
    AddType text/css .css
    AddType text/x-component .htc
    AddType application/x-javascript .js
    AddType application/javascript .js2
    AddType text/javascript .js3
    AddType text/x-js .js4
    AddType text/html .html .htm
    AddType text/richtext .rtf .rtx
    AddType image/svg+xml .svg .svgz
    AddType text/plain .txt
    AddType text/xsd .xsd
    AddType text/xsl .xsl
    AddType text/xml .xml
    AddType video/asf .asf .asx .wax .wmv .wmx
    AddType video/avi .avi
    AddType image/bmp .bmp
    AddType application/java .class
    AddType video/divx .divx
    AddType application/msword .doc .docx
    AddType application/vnd.ms-fontobject .eot
    AddType application/x-msdownload .exe
    AddType image/gif .gif
    AddType application/x-gzip .gz .gzip
    AddType image/x-icon .ico
    AddType image/jpeg .jpg .jpeg .jpe
    AddType application/json .json
    AddType application/vnd.ms-access .mdb
    AddType audio/midi .mid .midi
    AddType video/quicktime .mov .qt
    AddType audio/mpeg .mp3 .m4a
    AddType video/mp4 .mp4 .m4v
    AddType video/mpeg .mpeg .mpg .mpe
    AddType application/vnd.ms-project .mpp
    AddType application/x-font-otf .otf
    AddType application/vnd.oasis.opendocument.database .odb
    AddType application/vnd.oasis.opendocument.chart .odc
    AddType application/vnd.oasis.opendocument.formula .odf
    AddType application/vnd.oasis.opendocument.graphics .odg
    AddType application/vnd.oasis.opendocument.presentation .odp
    AddType application/vnd.oasis.opendocument.spreadsheet .ods
    AddType application/vnd.oasis.opendocument.text .odt
    AddType audio/ogg .ogg
    AddType application/pdf .pdf
    AddType image/png .png
    AddType application/vnd.ms-powerpoint .pot .pps .ppt .pptx
    AddType audio/x-realaudio .ra .ram
    AddType application/x-shockwave-flash .swf
    AddType application/x-tar .tar
    AddType image/tiff .tif .tiff
    AddType application/x-font-ttf .ttf .ttc
    AddType audio/wav .wav
    AddType audio/wma .wma
    AddType application/vnd.ms-write .wri
    AddType application/vnd.ms-excel .xla .xls .xlsx .xlt .xlw
    AddType application/zip .zip
</IfModule>
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css A31536000
    ExpiresByType text/x-component A31536000
    ExpiresByType application/x-javascript A31536000
    ExpiresByType application/javascript A31536000
    ExpiresByType text/javascript A31536000
    ExpiresByType text/x-js A31536000
    ExpiresByType text/html A3600
    ExpiresByType text/richtext A3600
    ExpiresByType image/svg+xml A3600
    ExpiresByType text/plain A3600
    ExpiresByType text/xsd A3600
    ExpiresByType text/xsl A3600
    ExpiresByType text/xml A3600
    ExpiresByType video/asf A31536000
    ExpiresByType video/avi A31536000
    ExpiresByType image/bmp A31536000
    ExpiresByType application/java A31536000
    ExpiresByType video/divx A31536000
    ExpiresByType application/msword A31536000
    ExpiresByType application/vnd.ms-fontobject A31536000
    ExpiresByType application/x-msdownload A31536000
    ExpiresByType image/gif A31536000
    ExpiresByType application/x-gzip A31536000
    ExpiresByType image/x-icon A31536000
    ExpiresByType image/jpeg A31536000
    ExpiresByType application/json A31536000
    ExpiresByType application/vnd.ms-access A31536000
    ExpiresByType audio/midi A31536000
    ExpiresByType video/quicktime A31536000
    ExpiresByType audio/mpeg A31536000
    ExpiresByType video/mp4 A31536000
    ExpiresByType video/mpeg A31536000
    ExpiresByType application/vnd.ms-project A31536000
    ExpiresByType application/x-font-otf A31536000
    ExpiresByType application/vnd.oasis.opendocument.database A31536000
    ExpiresByType application/vnd.oasis.opendocument.chart A31536000
    ExpiresByType application/vnd.oasis.opendocument.formula A31536000
    ExpiresByType application/vnd.oasis.opendocument.graphics A31536000
    ExpiresByType application/vnd.oasis.opendocument.presentation A31536000
    ExpiresByType application/vnd.oasis.opendocument.spreadsheet A31536000
    ExpiresByType application/vnd.oasis.opendocument.text A31536000
    ExpiresByType audio/ogg A31536000
    ExpiresByType application/pdf A31536000
    ExpiresByType image/png A31536000
    ExpiresByType application/vnd.ms-powerpoint A31536000
    ExpiresByType audio/x-realaudio A31536000
    ExpiresByType image/svg+xml A31536000
    ExpiresByType application/x-shockwave-flash A31536000
    ExpiresByType application/x-tar A31536000
    ExpiresByType image/tiff A31536000
    ExpiresByType application/x-font-ttf A31536000
    ExpiresByType audio/wav A31536000
    ExpiresByType audio/wma A31536000
    ExpiresByType application/vnd.ms-write A31536000
    ExpiresByType application/vnd.ms-excel A31536000
    ExpiresByType application/zip A31536000
</IfModule>
<IfModule mod_deflate.c>
    <IfModule mod_headers.c>
        Header append Vary User-Agent env=!dont-vary
    </IfModule>
        AddOutputFilterByType DEFLATE text/css text/x-component application/x-javascript application/javascript text/javascript text/x-js text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon application/json
    <IfModule mod_mime.c>
        # DEFLATE by extension
        AddOutputFilter DEFLATE js css htm html xml
    </IfModule>
</IfModule>
<FilesMatch "\.(css|htc|js|js2|js3|js4|CSS|HTC|JS|JS2|JS3|JS4)$">
    FileETag MTime Size
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header set Cache-Control "public, must-revalidate, proxy-revalidate"
         Header set X-Powered-By "W3 Total Cache/0.9.2.8"
    </IfModule>
</FilesMatch>
<FilesMatch "\.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml|HTML|HTM|RTF|RTX|SVG|SVGZ|TXT|XSD|XSL|XML)$">
    FileETag MTime Size
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header set Cache-Control "public, must-revalidate, proxy-revalidate"
         Header set X-Powered-By "W3 Total Cache/0.9.2.8"
    </IfModule>
</FilesMatch>
<FilesMatch "\.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|json|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip|ASF|ASX|WAX|WMV|WMX|AVI|BMP|CLASS|DIVX|DOC|DOCX|EOT|EXE|GIF|GZ|GZIP|ICO|JPG|JPEG|JPE|JSON|MDB|MID|MIDI|MOV|QT|MP3|M4A|MP4|M4V|MPEG|MPG|MPE|MPP|OTF|ODB|ODC|ODF|ODG|ODP|ODS|ODT|OGG|PDF|PNG|POT|PPS|PPT|PPTX|RA|RAM|SVG|SVGZ|SWF|TAR|TIF|TIFF|TTF|TTC|WAV|WMA|WRI|XLA|XLS|XLSX|XLT|XLW|ZIP)$">
    FileETag MTime Size
    <IfModule mod_headers.c>
        Header set Pragma "public"
        Header set Cache-Control "public, must-revalidate, proxy-revalidate"
         Header set X-Powered-By "W3 Total Cache/0.9.2.8"
    </IfModule>
</FilesMatch>
# END W3TC Browser Cache

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

尝试添加

RewriteCond %{HTTP_HOST} !^img.mydomain.com [NC]

仍然被重定向到`www.img.mydomain.com/wp-content/uploads/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:56:43.057

向标准 WP 规则集添加一些条件通常是必需的。在问题文件末尾的当前块中，它将是这样的：

```
# BEGIN WordPress
...
RewriteRule ^index\.php$ - [L]

# Add next lines:
RewriteCond %{HTTP_HOST}  !^img\.mydomain\.com    [NC]
RewriteCond %{REQUEST_URI}  !/wp-content/uploads/ [NC]
...
# END WordPress 
```

在这种情况下，文件顶部有几条规则，在`# BEGIN W3TC CDN`注释之前，它们也可以应用于请求，因为只有其中一些确保它是 to `http://www.mydomain.com`，考虑到这些条件仅对下一条规则有效。

所以我认为这里至少需要另一个排除：

```
# Add next line:
RewriteCond %{HTTP_HOST}  !^img\.mydomain\.com    [NC]
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

不过，也许有必要在`# BEGIN W3TC CDN`注释之前将相同的 2 行添加到其他规则中。我不知道，但这是一般的想法。

# javascript - Google 地球：在运行时禁用 flyToView

> ID：15760789
> 
> 赞同：0
> 
> 时间：2013-04-02T09:38:38.617
> 
> 标签：javascript, google-earth

我目前正在制作一个使用谷歌地球显示路径的应用程序。此路径会定期更新，我使用网络链接将 google earth 连接到 KML 文件。

问题是每次谷歌地球从 KML 收到更新时，它都会重置视图。我想禁用此功能，但仍然能够在启动时“飞”到特定位置。

我尝试在网络链接上使用 setFlyToView(false) ，但这根​​本不会导致飞行。我想要的是，谷歌地球在开始时飞到地标的位置，然后当它更新时——从 KML 文件通过网络链接——它不会飞到任何地方。

当谷歌地球已经运行时，有没有办法访问和更改选项？如果可能的话，我可以在初始化时使用 setFlyToView(true)，然后在 google earth 已经将视图更改为我想要的位置时使用 setFlyToView(false)，从而禁用视图的更新，而不是初始视图位置。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:21:52.710

如果您在 NetworkLink 中设置了 flyToView 1，就会出现这种情况。检查 flyToView 元素是 NetworkLink 而不是 Link 的子元素。您正在使用的 JavaScript API 生成的 KML 可能未正确设置 flyToView 或不受支持。

```
<Document>
  <visibility>1</visibility>
  <NetworkLink>
    <name>NE US Radar</name>
    <refreshVisibility>1</refreshVisibility>
    <flyToView>1</flyToView>
    <Link>...</Link>
  </NetworkLink>
</Document> 
```

此外，您可能希望使用添加到 NetworkLink 的 LookAt 或 Camera 元素来覆盖默认视图以进行飞行。

# database - visual basic：查找匹配的字符串

> ID：15760792
> 
> 赞同：0
> 
> 时间：2013-04-02T09:38:41.743
> 
> 标签：database, visual-studio-2010

我正在使用 VB 2010 Express 访问 .mdb 格式的数据库。我想找到包含特定字符串和数字的行，所以我写了这个 while 循环。我正在使用 If 语句来确保循环不超过最大行数 ( MaxRows ) 并引发错误。即使数据库中确实存在字符串，它仍然给出的结果是：“未找到记录”。我究竟做错了什么？

注意： inc 用于增加行。消息框仅用于查看变量值

代码：

```
 Dim lpn As String
    Dim lpn2 As String

    inc = 0

    lpn = TextBox5.Text

    lpn2 = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(7)

    MsgBox(lpn & " " & lpn2 & " ") 

    While lpn <> lpn2

        If inc <> MaxRows - 1 Then
            inc = inc + 1
            lpn2 = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(7)

            MsgBox(lpn & " " & lpn2)
        Else
            MsgBox("No record found.")
            Exit While
        End If
    End While

    TextBox1.Text = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(1)
    TextBox2.Text = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(2)
    TextBox3.Text = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(3)
    TextBox4.Text = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(4)
    ComboBox1.Text = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(5)
    ComboBox2.Text = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(6)
    TextBox5.Text = ds.Tables("RegisteredCarsDataSet").Rows(inc).Item(7) 
```

# java - 如何继承/替换 java final 类？

> ID：15760793
> 
> 赞同：0
> 
> 时间：2013-04-02T09:38:42.153
> 
> 标签：java, eclipse, osgi, aspectj, hotswap

我正在制作一个工具来在运行时执行多项检查（这将在 CI 服务器中运行），而我需要的一件事就是更改某些类的实现以提供我需要的数据（基本上，我需要知道某些类中何时发生某些特定更改）。

这是一个 OSGi 应用程序（我不知道这是否是正确的名称），我正在使用 AspectJ 来捕获这些信息，但是 AspectJ 不会更改 JDK 类，而且我可以使用 LinkedList 等一些类来解决我的问题（不是具有非最终方法的最终类），我必须对 StringTokenizer 或 StringBuilder 之类的类做同样的事情（我不能继承或注入带有方面的代码）。

经过几次搜索后，我对 HotSwap、自定义类加载器和我发现的一些其他解决方案有很多疑问，我不知道它们是否能满足我的需求。

我正在使用带有 Java 6 的 Eclipse Indigo（如果它是一个仅适用于 IDE 的解决方案也可以）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:58:28.527

查看 Apache BCEL 以方便的方式操作 Java Final 类的字节码。这样，您可以创建自己的自定义类加载器、加载类、操作字节码以包含您自己的检查，然后将修改后的类传递给您的运行时程序。

[http://commons.apache.org/proper/commons-bcel/](http://commons.apache.org/proper/commons-bcel/)

# security - 如何防止来自用 Go 编写的 HTTP 服务器的 DDoS 攻击？

> ID：15760799
> 
> 赞同：1
> 
> 时间：2013-04-02T09:38:57.003
> 
> 标签：security, http, go, ddos

我正在用[Go](http://golang.org/)开发一个 HTTP 服务器，但它似乎无法阻止 DDoS 攻击。我需要为我的服务器实施防火墙吗？

还有另一种解决方案：我可以使用 Nginx 作为代理服务器来防止 DDoS 攻击，但这会使服务器部署复杂化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T09:46:35.430

> 我需要为我的服务器实施防火墙吗？

**天哪！**

但这对 DDOS 帮助不大。为此，您需要能够快速分析攻击和修补响应。使用类似fail2ban的东西可以让这更容易，但是你不确定你是否需要一个防火墙/如果它对DDOS有帮助，这表明你可能很容易通过尝试建立自适应防御来弊大于利，因此在你的情况下，我'd 建议不要担心 DDOS，直到您获得一个 / 找到一家可以在发生此类攻击时提供网络级服务的优秀托管公司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T10:21:03.730

我不认为 N​​ginx 会比你的 Go 服务器更好或更差。你仍然需要一个真正的防火墙。

# c# - 返回值的类型，如参数类型

> ID：15760801
> 
> 赞同：1
> 
> 时间：2013-04-02T09:39:09.053
> 
> 标签：c#, .net, generics

我可以创建一个方法，以便它返回我在参数中指定的类型的值吗？例如：

```
int i = Settings.Get("count", typeof(int));
string s = Settings.Get("count", typeof(string));
Guid g = Settings.Get("count", typeof(Guid)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:40:12.697

```
public T Get<T> (string value)
{
     //read setting and cast

     //or if you have Setting.Get implementation
     return (T)Settings.Get("count", typeof(T));
} 
```

现在你可以

```
int i = Get<int>("count");
string i = Get<string>("count");
Guid i = Get<Guid>("count"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:41:00.047

您可以通过使方法通用来做到这一点：

```
Settings.Get<T>(string name); 
```

在 Get 方法中，您需要加载该值，然后将其转换为`T`：

```
public T Get<T>(string value)
{
    object o = 1; // read setting;
    return (T)o;
} 
```

然后调用它：

```
int i = Get<int>("count"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T09:41:11.827

你为什么不试试这样的泛型

```
 public T Get<T>(string value)
   {
     // do your stuff and cast the value
   } 
```

其中 T 是类型

# html - 嵌套表单的替代方案

> ID：15760804
> 
> 赞同：0
> 
> 时间：2013-04-02T09:39:25.957
> 
> 标签：html, forms, view, codeigniter-2

我需要嵌套表格。我知道它们在 HTML 中是不允许的，所以我决定为一个打开的表单设置几个提交按钮。

在我的控制器中，我需要检查按下了哪个提交按钮。我怎样才能做到这一点？

我正在尝试给按钮起这样的名称：

```
<input class="btn btn-primary" name="editAction" type="submit" value="Save"></button> 
```

然后在我的控制器中，我像这样检查它们：

```
if ($this->input->post('editAction')) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:51:07.957

如果你一定有几个`submit buttons`，`form`那么你可以做两件事：

1) 使用 . 转换`submit buttons`为`normal buttons`并提交表单`ajax`。这将解决您的问题。

2）将提交按钮转换为普通按钮，并在您的表单和`onClick`所有按钮的事件中维护一个隐藏字段，只需将`id`按钮的作为值放在该隐藏字段中，然后使用`jQuery`，提交您的表单，然后在您的`controller`，检查您的隐藏字段值，然后处理表单。

```
if ($this->input->post('hidden_field_name')) 
```

# java - 如何仅在一行中显示数组

> ID：15760806
> 
> 赞同：-3
> 
> 时间：2013-04-02T09:39:27.870
> 
> 标签：java

首先，由于我是西班牙人，请原谅我的英语语法。好吧，我有这个代码：

```
public class practica {
    public static void main(String[] args) {

        Scanner consola = new Scanner(System.in);
        int numero = consola.nextInt();
        if (numero > 0 && numero <= 100) {
            int vector[] = new int[numero];

            for (int y = 0; y < numero; y++) {
                vector[y] = consola.nextInt();
            }
        }
    }
} 
```

在我（通过控制台）读取数字后，我必须只在一行中显示它们。我知道我必须这样做，`System.out.print();`但我不知道我应该在括号中输入什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:46:55.957

```
public class practica {
  public static void main(String[] args) {

    Scanner consola = new Scanner(System.in);
    int numero = consola.nextInt();
    if (numero > 0 && numero <= 100) {
        int[] vector = new int[numero];

        for (int y = 0; y < numero; y++) {
            vector[y] = consola.nextInt();
        }

        //look here
        for(int i = 0; i < vector.length; i++){
            System.out.print(vector[i] + ", ");
       }
    }
  } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:46:25.273

使用此代码：

```
public class practica {
    public static void main(String[] args) {

        Scanner consola = new Scanner(System.in);
        int numero = consola.nextInt();
        if (numero > 0 && numero <= 100) {
            List<Integer> vector = new ArrayList<>();

            for (int y = 0; y < numero; y++) {
                vector.add(consola.nextInt());  
            }
            System.out.println(vector);
        }
    }
} 
```

或这个 ：

```
public class practica {
    public static void main(String[] args) {

        Scanner consola = new Scanner(System.in);
        int numero = consola.nextInt();
        if (numero > 0 && numero <= 100) {
            int vector[] = new int[numero];

            for (int y = 0; y < numero; y++) {
                vector[y] = consola.nextInt();  
                System.out.print(vector[y] + " ");
            }
        }
    }
} 
```

# ios - 将前一帧结果作为输入传递给下一帧

> ID：15760808
> 
> 赞同：0
> 
> 时间：2013-04-02T09:39:29.930
> 
> 标签：ios, gpuimage

所有示例都将一张图像在一帧中转换为其他内容，但是如果我想创建需要反馈的运动模糊之类的东西怎么办？这需要将当前视频帧的结果与前一帧的过滤器结果相结合。如何有效地存储前一帧结果，以便在下一帧中使用它作为输入？

![在此处输入图像描述](https://i.imgur.com/C5yxYcL.png)

我尝试阅读 FilterShowCase 中包含的各种示例着色器并阅读 sunlakesoftware.com 对 GPUImage 的[介绍](http://www.sunsetlakesoftware.com/2012/02/12/introducing-gpuimage-framework)。我注意到 GPUImage 带有 GPUImageTextureOutput 和 GPUImageTextureInput，但我需要做的似乎需要使用相同的纹理作为输入和输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:56:05.547

得到这个工作。变成我认为的“运动模糊”实际上是低通滤镜效果。

GPUImageLowPassFilter 具有处理获取当前帧和前一帧并将它们与 GPUImageDissolveBlendFilter 混合的代码，正是这样做的。

# .net - 从 LAN 运行 EXE 时文件 IO 权限错误

> ID：15760814
> 
> 赞同：0
> 
> 时间：2013-04-02T09:39:43.073
> 
> 标签：.net, winforms, .net-3.5, lan

从网络运行我的 .EXE 文件时出现以下错误。

![在此处输入图像描述](https://i.stack.imgur.com/hdIkq.png)

我已经使用 .net framework 3.5 开发了应用程序。

请帮我删除此错误。

提前问...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:22:03.123

您是否尝试过授予您的应用程序管理权限？

以下是如何做到这一点：
[如何授予我的 C# 应用程序管理权限？清单文件](https://stackoverflow.com/questions/1850768/how-to-give-my-c-sharp-app-administrative-rights-manifest-file)

# php - 将sql php脚本转换为coldfusion

> ID：15760815
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:39:46.623
> 
> 标签：php, coldfusion

我们的开发人员为 php 提供了一个脚本，用于从我们的数据库中生成畅销书列表，但是我们需要它处于冷融合状态！

有没有一种简单的转换方法或者需要完全重写？

提前感谢您的任何建议:-)

```
// // ---------- // Get Top Selling Products (by sku) // ---------- // 
    function CWgetBestSelling($max_products=5, $sub_ids=0)
    {
        $productQuery = '';
        $returnQuery = '';
        $idList = '0';
        $itemsToAdd = '';

        if (!is_numeric($idList[0])) {
                $idList = '0';
        }   
        $q_productQuery = mysql_query( "
        SELECT count(*) as prod_counter,
        p.product_id,
        p.product_name,
        p.product_preview_description,
        p.product_date_modified
        FROM cw_products p
        INNER JOIN cw_order_skus o
        INNER JOIN cw_skus s
        WHERE o.ordersku_sku = s.sku_id
        AND s.sku_product_id = p.product_id
        AND NOT p.product_on_web = 0
        AND NOT p.product_archive = 1
        AND NOT s.sku_on_web = 0
        GROUP BY product_id
        ORDER BY prod_counter DESC
          LIMIT ".$max_products
        ,$_ENV["request.cwapp"]["db_link"]);
        $productQuery = array();
        while ($qd = mysql_fetch_assoc($q_productQuery)) {
            $productQuery[] = $qd;
        }

    // add values to list
        foreach ($productQuery as $values) {
            $idList = $values['product_id'] . "," . $idList;
        }
        // if not enough results, fill in from sub_ids 
        if (count($productQuery) < $max_products) {
                // number needed 
                $itemsToAdd = $max_products - count($productQuery);
                for ($i = 1; $i <= $itemsToAdd; $i++) {
                    if (substr_count($sub_ids, ',') >= $i) { 
                        $idListArray = explode(',', $sub_ids);
                        $idList .= "," . $idListArray[$i];
                    }
                }   
                $q_resultsQuery = mysql_query("
                SELECT 0 as prod_counter,
                p.product_id,
                p.product_name,
                p.product_preview_description,
                p.product_date_modified
                FROM cw_products p
                WHERE p.product_id in(".CWqueryParam($idList).")
                AND NOT p.product_on_web = 0
                AND NOT p.product_archive = 1
                ORDER BY product_date_modified DESC
                ",$_ENV["request.cwapp"]["db_link"]);
        } else {
            $q_resultsQuery = mysql_query("
                SELECT count(*) as prod_counter,
                p.product_id,
                p.product_name,
                p.product_preview_description,
                p.product_date_modified
                FROM cw_products p
                INNER JOIN cw_order_skus o
                INNER JOIN cw_skus s
                WHERE o.ordersku_sku = s.sku_id
                AND s.sku_product_id = p.product_id
                AND NOT p.product_on_web = 0
                AND NOT p.product_archive = 1
                AND NOT s.sku_on_web = 0
                GROUP BY product_id
                ORDER BY prod_counter DESC, product_date_modified
            ",$_ENV["request.cwapp"]["db_link"]);

        }
    while ($qd = mysql_fetch_assoc($q_resultsQuery)) {
            $returnQuery[] = $qd;
        }
        return $returnQuery;

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T10:35:58.877

代码转换问题往往不会长时间保持开放状态，因为它们被视为懒惰。因此，这里有一些参考资料可以帮助您入门。我不是 PHP 专业人士，但在快速浏览您的代码后，我认为此链接列表将为您提供一个良好的开端。

*   [CFF函数](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_21.html)
*   [CF查询](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_p-q_17.html)
*   [CF争论](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_a-b_6.html)
*   [值列表（）](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_t-z_13.html)
*   [CF循环](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_j-l_10.html)
*   [CFif](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_i_01.html)

为了不为你做你的工作并给你学习的机会，我将提供一些示例而不是整个代码，以便你了解你的 PHP 适合 CF 的位置。这也是标签版本，而不是脚本版本。

```
<cffunction name = "CWgetBestSelling" ...>
  <cfargument name = "max_products" default = "5" ...>
  <cfargument ...>

  <cfset var local.productQuery = "">
  <cfset var local.returnQuery = "">
  <cfset ...>
  <cfset ...>

  <cfquery name = "q_productQuery " datasource = "yourDatasource">
    SELECT 
      count(*) as prod_counter,
      p.product_id,
      p.product_name,
      p.product_preview_description,
      p.product_date_modified
    FROM 
      cw_products p
      INNER JOIN cw_order_skus o
      INNER JOIN cw_skus s
    WHERE 
          o.ordersku_sku = s.sku_id
      AND s.sku_product_id = p.product_id
      AND NOT p.product_on_web = 0
      AND NOT p.product_archive = 1
      AND NOT s.sku_on_web = 0
    GROUP BY 
      product_id
    ORDER BY 
      prod_counter DESC
    LIMIT #arguments.max_products#
  </cfquery>

  ...
  ...
  ... 

  <cfreturn yourReturnVariable>
</cffunction> 
```

# maven - Grails：Ivy：Google 代码：如何将 Google 代码依赖项添加到 Grails？

> ID：15760816
> 
> 赞同：0
> 
> 时间：2013-04-02T09:39:52.197
> 
> 标签：maven, grails, dependencies, ivy

我想让 grails 自动解析 Google Code 项目的依赖项：

```
https://code.google.com/p/google-api-java-client/ 
```

Maven 示例如下所示：

```
<project>
  <repositories>
    ...
    <repository>
      <id>google-api-services</id>
      <url>http://google-api-client-libraries.appspot.com/mavenrepo</url>
    </repository>
    ...
  </repositories>
  <dependencies>
    ...
    <dependency>
      <groupId>com.google.apis</groupId>
      <artifactId>google-api-services-storage</artifactId>
      <version>v1beta1-rev21-1.14.1-beta</version>
    </dependency>
    ...
  </dependencies>
</project> 
```

这是我尝试过的命令：

```
grails install-dependency com.google.apis:google-api-services-storage:google-api-services-storage --repository=http://google-api-client-libraries.appspot.com/mavenrepo 
```

失败的结果：

```
There was an error resolving the dependency 'com.google.apis:google-api-services-storage:google-api-services-storage'.
This could be because you have passed an invalid dependency name or because the dependency was not found in one of the default repositories.
Try passing a valid Maven repository with the --repository argument.
spider:cloud-storage-prototype spider$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:12:59.080

如果您使用现代版本的 grails，您应该将以下行添加到您的 grails-app/conf/BuildConfig.groovy：

`grails.project.dependency.resolution = {`

 `[...]

```
repositories { 
```

[...]

```
 mavenRepo "http://google-api-client-libraries.appspot.com/mavenrepo" 
```

[...]

```
dependencies { 
```

[...]

```
 compile 'com.google.apis:google-api-services-storage:v1beta1-rev21-1.14.1-beta' 
````  `但是，如果您希望在 lib/ 文件夹中安装依赖项，您可以使用：

`grails install-dependency com.google.apis:google-api-services-storage:v1beta1-rev21-1.14.1-beta --repository=[http://google-api-client-libraries.appspot.com/mavenrepo](http://google-api-client-libraries.appspot.com/mavenrepo)``

# android - 如何在android中创建一个填字游戏

> ID：15760819
> 
> 赞同：1
> 
> 时间：2013-04-02T09:40:00.213
> 
> 标签：android

我要创建一个填字游戏，但我不知道如何制作表格，我使用表格布局，这不是一个好主意，因为当我在其中一个编辑框中输入一个字母时，所有行都会移动。

任何人都有创意如何制作或以前做过？我应该使用游戏引擎还是类似的？请在您的想法中提供缩放和移动功能

PS拼图是16x16

# python - 相互依赖的默认参数

> ID：15760820
> 
> 赞同：2
> 
> 时间：2013-04-02T09:40:00.173
> 
> 标签：python

我有这样的代码：

```
import random

def helper():
    c = random.choice([False, True]),
    d = 1 if (c == True) else random.choice([1, 2, 3])
    return c, d

class Cubic(object):
    global coefficients_bound

    def __init__(self, a = random.choice([False, True]), 
        b = random.choice([False, True]),
        (c, d) = helper()):
        ...
        ... 
```

引入了 helper() 函数，因为我在函数本身的定义中不能有相互依赖的参数 - Python 抱怨它在计算 d 时找不到 c。

我希望能够像这样创建此类的对象，更改默认参数：

```
x = Cubic(c = False) 
```

但我得到这个错误：

```
Traceback (most recent call last):
  File "cubic.py", line 41, in <module>
    x = Cubic(c = False)
TypeError: __init__() got an unexpected keyword argument 'c' 
```

这可能与我的写作方式有关吗？如果没有，我应该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:45:53.267

简单地说：

```
class Cubic(object):
    def __init__(self, c=None, d=None):
        if c is None:
            c = random.choice([False, True])
        if d is None:
            d = 1 if c else random.choice([1, 2, 3])
        print c, d 
```

# internet-explorer - 使用 python 从 Chrome/Firefox/Explorer 捕获下载

> ID：15760825
> 
> 赞同：4
> 
> 时间：2013-04-02T09:40:02.673
> 
> 标签：internet-explorer, google-chrome, firefox, python-2.7, download

我在 python 中编写了一个小的下载管理器，现在我想从 Chrome Firefox 和 Explorer 中“捕获”下载，以便他们将使用它下载，而不是浏览器本身的每个内置下载管理器。

我想知道每个浏览器何时开始下载文件，所以我可以防止默认行为并使用我自己的管理器。当然，我自己开始下载所需的只是文件网址。

我知道过去有流行的下载管理器，例如“Get Right”，就是这样做的。我想做类似的事情。

有什么想法我会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T00:45:29.973

每个网络浏览器，例如 Firefox、Chrome、IE、Safari，都有插件模型。如果您要真正将管理器集成到 Web 浏览器中，则需要检查它们的插件模型，并让您的下载管理器通过它工作。

# matlab - 如何将双精度值转换为索引的整数以在 MATLAB 中创建稀疏矩阵？

> ID：15760829
> 
> 赞同：2
> 
> 时间：2013-04-02T09:40:11.093
> 
> 标签：matlab, matrix, integer, double

我正在使用 MATLAB 加载一个我想从中制作稀疏矩阵的文本文件。文本文件中的列指的是行索引并且是`double`类型。我需要它们是整数才能将它们用作行和列的索引。我尝试使用`uint8`,`int32`并将`int64`它们转换为整数以使用它们来构建稀疏矩阵，如下所示：

> ？？？“int64”类型的输入参数的未定义函数或方法“稀疏”。==> make_network 在 5 处出错
> 
> 图 =sparse(int64(listedges(:,1)),int64(listedges(:,2)),ones(size(listedges,1),1));

如何将加载为双精度的文本文件条目转换为`sparse`函数使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:47:24.207

不需要任何转换，保留索引`double`：

```
r = round(listedges);
graph = sparse(r(:, 1), r(:, 2), ones(size(listedges, 1), 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:54:27.650

有两个原因可能需要转换为`int`：
第一个，因为您有数据类型限制。
第二，您的输入可能包含分数并且不适合用作整数。

如果您因为第一个原因想要转换 - 那么没有必要：Matlab`double`默认使用类型，并且通常将`doubles`其视为整数（例如，当用作索引时）。

**但是**，如果您因为第二个原因（数字可能是小数）而想要转换为整数，那么您应该使用`round()`,`ceil()`或`floor()`- 最适合您的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T15:30:01.327

还有另一个很好的理由（实际上是主要的......）为什么人们可能想要将任何结构（数组、矩阵等）的索引转换为 int。

如果您曾经使用 Matlab 以外的任何语言进行编程，您就会熟悉想要节省内存空间，尤其是对于大型结构。能够使用非双精度索引来处理此类结构中的元素是关键。

Matlab 的一个主要问题是无法以这种方式更精细地控制多维结构的大小。有稀疏矩阵解决方案，但在许多情况下这些解决方案还不够。元胞数组将在访问时保留数据类型，但是元胞数组中每个元素的存储在存储方面非常浪费（封装在一个元胞中的单个 uint8 需要 113 个字节）。

# android - 机器人：java.lang.NoClassDefFoundError：com.google.android.gms.R$styleable

> ID：15760834
> 
> 赞同：4
> 
> 时间：2013-04-02T09:40:12.820
> 
> 标签：android, xml, google-maps, exception, google-maps-android-api-2

我的活动代码

```
package com.example.testmap;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

xml文件代码

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginRight="150dp"
        class="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

和清单代码

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="17" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<permission
    android:name="android.os.Bundle.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.testmap.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="API_KEY_FROM_GOOGLE_API_CONSOLE" />
</application> 
```

但我收到错误

```
 FATAL EXCEPTION: main
 java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source)
at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:279)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
at android.app.Activity.setContentView(Activity.java:1657)
at com.example.testmap.MainActivity.onCreate(MainActivity.java:13)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:52:02.817

**1.**尝试删除此行：

```
class="com.google.android.gms.maps.SupportMapFragment" 
```

从 XML 文件中的片段中，它不应该存在。

**2.**更改此权限：

```
<permission
android:name="android.os.Bundle.permission.MAPS_RECEIVE"
android:protectionLevel="signature" /> 
```

对此：

```
<permission
android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
android:protectionLevel="signature" /> 
```

如果`com.example.mapdemo`是你的项目包。如果不在此权限中将其更改为您的项目包，则：

```
<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T15:50:41.277

您是否复制了 google-play-services.jar 而不是链接到 google-play-services_lib 项目？

请仔细遵循：[https ://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T23:50:12.763

尝试将项目从 android sdk: **/extras/google/google_play_services_libproject/google_play_services_lib** 导入您的工作区，而不在您的应用程序的文件夹 /lib 中添加任何 lib。

完成此操作后，将它们添加到您的：**project>properties>android>libs add**

# android - 如何在android中同时将文本图像发布到twitter

> ID：15760835
> 
> 赞同：0
> 
> 时间：2013-04-02T09:40:18.370
> 
> 标签：android, android-intent

嗨，我在这里做了一个应用程序，我需要在推特上分享我的分数，我确实使用下面的代码，我的分数很好，但现在我需要与应用程序图标一起分享分数。但我不知道如何与文本一起分享该图像谁能帮帮我，谢谢

```
 TestPost.class: 
public class TestPost extends Activity {
String review;
private TwitterApp mTwitter;

private String username = "";
private boolean postToTwitter = false;

private static final String twitter_consumer_key = "";
private static final String twitter_secret_key = "";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.post);

    Button postBtn              = (Button) findViewById(R.id.button1);
    final EditText reviewEdit   = (EditText) findViewById(R.id.revieew);

    postBtn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
             review = reviewEdit.getText().toString();
            postToTwitter = true;

            onTwitterClick();

        }
    });

    mTwitter = new TwitterApp(this, twitter_consumer_key,twitter_secret_key);

    mTwitter.setListener(mTwLoginDialogListener);

    if (mTwitter.hasAccessToken()) {
        username    = mTwitter.getUsername();
        username    = (username.equals("")) ? "No Name" : username;

    }
}

private void postToTwitter(final String review) {
    new Thread() {
        @Override
        public void run() {
            int what = 0;

            try {
                mTwitter.updateStatus(review);
            } catch (Exception e) {
                what = 1;
            }

            mHandler.sendMessage(mHandler.obtainMessage(what));
        }
    }.start();
}

private Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        String text = (msg.what == 0) ? "Posted to Twitter" : "Post to Twitter failed";

        Toast.makeText(TestPost.this, text, Toast.LENGTH_SHORT).show();
    }
};
private final TwDialogListener mTwLoginDialogListener = new TwDialogListener() {
    @Override
    public void onComplete(String value) {
        username    = mTwitter.getUsername();
        username    = (username.equals("")) ? "No Name" : username;

        postToTwitter = true;
        postToTwitter(review);

        Toast.makeText(TestPost.this, "Connected to Twitter as " + username, Toast.LENGTH_LONG).show();
    }

    @Override
    public void onError(String value) {

        Toast.makeText(TestPost.this, "Twitter connection failed", Toast.LENGTH_LONG).show();
    }
};
private void onTwitterClick() {
    if (mTwitter.hasAccessToken()) {
        final AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setMessage("Delete current Twitter connection?")
               .setCancelable(false)
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       mTwitter.resetAccessToken();

                   }
               })
               .setNegativeButton("No", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();

                   }
               });
        final AlertDialog alert = builder.create();

        alert.show();
    } else {

        mTwitter.authorize();
    }
}

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:07:09.753

这就是我将图像和文本上传到登录的 Twitter 用户帐户的方式。为此，我使用了[TwitPic API](http://dev.twitpic.com/)。您必须在那里登录并注册一个开发者帐户。

该解决方案可以被认为是一个两步解决方案。

首先，当用户点击发布按钮时，我首先抓取图片并上传到 TwitPic。从那里，我获取了 TwitPic ( `String url = upload.upload(finalFile);`) 返回的 URL。

在此代码的第二步中，在一个 String 实例 ( `String finalStatusWithURL`) 中，我获取了 an 的内容，`EditText`然后将步骤 1 中的 URL 附加到它上面。完成此操作后，该帖子最终发布到 Twitter。

```
Configuration conf = new ConfigurationBuilder()
.setOAuthConsumerKey(TWITTER_CONSUMER_KEY)
.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET)
.setOAuthAccessToken(twit_access_token)
.setOAuthAccessTokenSecret(twit_access_token_secret)
.setMediaProviderAPIKey(TWIT_PIC_API)
.build();

// SET THE FILE PATH
File finalFile = new File(getRealPathFromURI(initialURI));
// THIS IS IMPORTANT. TWITPIC NEEDS THE ACTUAL PATH ON THE DEVICE. JUST THE URI DOES NOT WORK!!!!

ImageUpload upload = new ImageUploadFactory(conf).getInstance(MediaProvider.TWITPIC);

String url = upload.upload(finalFile);
Log.e("TWITTER URL RESPONSE", url);

// NOW, UPLOAD TO TWITTER

ConfigurationBuilder builder = new ConfigurationBuilder();

builder.setOAuthConsumerKey(YOUR_TWITTER_CONSUMER_KEY);
builder.setOAuthConsumerSecret(YOUR_TWITTER_CONSUMER_SECRET);

AccessToken accessToken = new AccessToken(your_twit_access_token, your_twit_access_token_secret);
Twitter twitter = new TwitterFactory(builder.build()).getInstance(accessToken);

String finalStatusWithURL = null;

if (finalStatusMessage.trim().length() > 0) {

    finalStatusMessage = editStatusUpdate.getText().toString();
    finalStatusWithURL = finalStatusMessage + ":\n " + url;

} else {
    finalStatusWithURL = url;
}

twitter4j.Status response = twitter.updateStatus(finalStatusWithURL);
Log.e("TWITTER RESPONSE", response.getText()); 
```

这是获取您要上传的图像的真实路径的方法：

```
// HELPER METHOD TO GET REAL PATH FOR THE SELECTED IMAGE
public String getRealPathFromURI(Uri uri) {
    Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
    cursor.moveToFirst(); 
    int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); 
    return cursor.getString(idx); 
} 
```

希望这可以帮助。这是我的应用程序的生产代码。

**更新：**

在代码中更改它：

```
File finalFile = new File(getRealPathFromURI(initialURI)); 
```

对此：

```
Uri tempUri = getImageUri(getApplicationContext(), icon);
File finalFile = new File(getRealPathFromURI(tempUri)); 
```

和*辅助*方法`Uri tempUri = getImageUri(getApplicationContext(), bmpFinal);`：

```
public Uri getImageUri(Context inContext, Bitmap inImage) {
    ByteArrayOutputStream bytes = new ByteArrayOutputStream();
    inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
    String path = Images.Media.insertImage(inContext.getContentResolver(), inImage, "Title", null);
    return Uri.parse(path);
} 
```

您仍然需要传递一个 Bitmap 对象。要将您的应用程序图标转换为位图，请使用以下命令：

```
Bitmap icon = BitmapFactory.decodeResource(context.getResources(), R.drawable.ic_launcher); 
```

**更新2：**

在您提出问题并我回答您的问题后不久，Twitter 结束了在 SF 的开发人员会议。他们介绍了一些我*认为*可能对您的特定用例有用的新*卡片。*它是新鲜的，我还没有开始测试/使用它。但如果它符合您的目的，请查看以下链接：

 *1.  [http://www.engadget.com/2013/04/02/twitter-cards-apps-products-photo-galleries/](http://www.engadget.com/2013/04/02/twitter-cards-apps-products-photo-galleries/)（我在哪里发现了新功能）
2.  [https://dev.twitter.com/blog/mobile-app-deep-linking-and-new-cards](https://dev.twitter.com/blog/mobile-app-deep-linking-and-new-cards)（官方推特博客）
3.  [https://dev.twitter.com/cards](https://dev.twitter.com/cards)（开发者页面了解功能的详细信息以及如何使用它们）*

# automator - 如何创建切换隐藏文件按钮

> ID：15760837
> 
> 赞同：0
> 
> 时间：2013-04-02T09:40:21.497
> 
> 标签：automator, hidden-files

我正在尝试在 automator 中创建一项服务，以帮助我隐藏或取消隐藏文件/文件夹。

我是一个非常新的初学者，对自动机一无所知，我只尝试将不同的服务放在一起，但我什至不知道它们是如何工作的。

我尝试了以下方法，但它不起作用：

**获取选定的 Finder 项目**

**运行外壳脚本：**

```
STATUS = chflags

for f in "$@"

  if [$STATUS = unhidden]

  then

    chflags hidden

  else

    chflags unhidden

  fi

    killall Finder 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:46:32.810

您并没有那么遥远：您的主要困难是如何测试文件当前是否隐藏。（尽管您的 bash 语法是错误的，并且基于 Finder 的服务来切换可见性只有一半是有意义的——您将如何选择一个不可见的文件？）也就是说，这个脚本将工作 [1]，因为您'使用 bash 重新运行它并将输入作为参数传递：

```
for f in "$@"
do
    if ( ls -lO "$f" | grep -wq hidden )
    then
        chflags nohidden "$f"
    else
        chflags hidden "$f"
    fi
done 
```

之后不需要杀死 Finder；它会自动注意到“隐藏”的变化。如果您创建 Automator “服务”工作流程，则不需要在开始时执行“获取选定的查找器项目”操作；您的服务将通过选定的项目作为输入。

[1] 大部分。它不能在名称中“隐藏”的文件上正常工作。解决这个问题，也许通过使用`stat`（1），留给读者作为练习。

# java - 访问电话信息

> ID：15760838
> 
> 赞同：-6
> 
> 时间：2013-04-02T09:40:22.107
> 
> 标签：java, android, qr-code, zxing

我是android和java编程的初学者。目前我正在尝试开发一个扫描二维码的应用程序，这些应用程序可以访问信息（电话号码、IMEI 号码）和被扫描的位置，并将信息和位置发送到数据库中。

现在我不知道如何让应用程序访问电话信息或位置。（我不想在屏幕上显示，只想检索和发送）

你们对我应该在里面放什么功能或活动有任何想法吗？或任何教程来做到这一点？一点指导会非常有帮助。

谢谢你。

顺便说一句，我使用 zxing 作为扫描仪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:58:11.543

您可以将 TelephonyManager 类用于 IMEI 和电话号码，并将 LocationManger 类用于位置。

使用此代码：

TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

// 获取 IMEI

字符串imei = tm.getDeviceId();

//获取电话号码

字符串电话 = tm.getLine1Number();

# c++ - Win32 API 打印不询问用户输入

> ID：15760839
> 
> 赞同：1
> 
> 时间：2013-04-02T09:40:22.667
> 
> 标签：c++, c, winapi

我们有类似[安全打印的东西](http://secureprint.com.au/)的东西。

我去我的控制面板>>打印机和设备>>打印机>>打印机首选项在这里我分配一个4位数的密码..

我从 Word 或 Excel 打印...转到打印机 >> 检索作业 >> 选择我的打印作业并输入我的密码。

只有这样我的工作才会被打印出来。

现在我们的应用程序有两个用于打印的源代码

从我们的应用程序触发打印时，打印会立即完成....即它不会将我的工作存储在队列中并等待 pin ...但只是立即打印

一些源代码

```
bResult = OpenPrinter(szDevice, &hPrinter, NULL);
// szDevice contains printer name
startDocPrtInfo.pDocName = msg;
startDocPrtInfo.pOutputFile = NULL;
startDocPrtInfo.pDatatype = "RAW";
bPrntErr = (StartDocPrinter(hPrinter,1,(LPBYTE)&startDocPrtInfo) == 0);

WritePrinter(hPrinter, &buffer[2], i, &cnt);
EndDocPrinter(hPrinter);
ClosePrinter(hPrinter); 
```

该代码正在打印给定的文档，但它不等待用户输入他的密码

问题 如何让上面的代码像其他应用程序一样等待？我在这里缺少一些设置吗？

给你更多的细节。

我们在同一个应用程序中有另一个 Print 子例程，它的工作原理与 desierd 一样。即等待用户输入他的 PIN

但是子例程使用 TextOut 方法而不是 WritePrinter

知道为什么当我使用 WritePrinter 打印方法时打印不等待吗？

感谢期待CP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:29:22.890

我解决了这个问题。

没有代码更改。在我们的打印机设置中，我们需要取消选中“允许转义序列”

感谢论坛 tho 提出问题。

将经常访问，并针对其他人提出的问题提出更多问题和解决方案

一个无知的程序员祝你好运:)

# java - 样式化/着色生成的二维码

> ID：15760844
> 
> 赞同：1
> 
> 时间：2013-04-02T09:40:28.380
> 
> 标签：java, qr-code, zxing

嗨，我正在使用这个[http://viralpatel.net/blogs/create-qr-codes-java-servlet-qr-code-java/](http://viralpatel.net/blogs/create-qr-codes-java-servlet-qr-code-java/)作为生成 QR 图像的参考。

```
ByteArrayOutputStream out = QRCode.from("Hello World").to(ImageType.PNG).stream(); 
```

QR 图像的默认颜色是黑色，有什么办法可以改变它的颜色吗？

我也发现了这个问题[Creating coloured QR codes using zxing](https://stackoverflow.com/questions/4723588/creating-colored-qr-codes-using-zxing)但我对答案很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:44:28.513

你得到的结果是一张图片，你可以很容易地修改它上面的颜色。但是 QR 码应该保持黑色，以便 100% 覆盖将要读取它的设备。是他们规范 ISO/IEC 18004 的一部分。

# java - JPanel 缩小

> ID：15760849
> 
> 赞同：1
> 
> 时间：2013-04-02T09:40:58.513
> 
> 标签：java, swing, jpanel, zooming

下面的代码非常适合放大和缩小，但缩小有限制。如何改进此代码以允许无限制地缩小。在此示例中，您可以随意放大，但缩小可以将放大的面板返回到其原始状态。

```
public class FPanel extends javax.swing.JPanel {

private Dimension preferredSize = new Dimension(400, 400);    
private Rectangle2D[] rects = new Rectangle2D[50];

public static void main(String[] args) {        
    JFrame jf = new JFrame("test");
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jf.setSize(400, 400);
    jf.add(new JScrollPane(new FPanel()));
    jf.setVisible(true);
}    

public FPanel() {
    // generate rectangles with pseudo-random coords
    for (int i=0; i<rects.length; i++) {
        rects[i] = new Rectangle2D.Double(
                Math.random()*.8, Math.random()*.8, 
                Math.random()*.2, Math.random()*.2);
    }
    // mouse listener to detect scrollwheel events
    addMouseWheelListener(new MouseWheelListener() {
        public void mouseWheelMoved(MouseWheelEvent e) {
            updatePreferredSize(e.getWheelRotation(), e.getPoint());
        }
    });
}

private void updatePreferredSize(int n, Point p) {
    double d = (double) n * 1.08;
    d = (n > 0) ? 1/d : -d;

    int w = (int) (getWidth() * d);
    int h = (int) (getHeight() * d);
    preferredSize.setSize(w, h);

    int offX = (int)(p.x * d) - p.x;
    int offY = (int)(p.y * d) - p.y;
    setLocation(getLocation().x-offX,getLocation().y-offY);

    getParent().doLayout();
}

public Dimension getPreferredSize() {
    return preferredSize;
}

private Rectangle2D r = new Rectangle2D.Float();
public void paint(Graphics g) {
    super.paint(g);
    g.setColor(Color.red);
    int w = getWidth();
    int h = getHeight();
    for (Rectangle2D rect : rects) {
        r.setRect(rect.getX() * w, rect.getY() * h, 
                rect.getWidth() * w, rect.getHeight() * h);
        ((Graphics2D)g).draw(r);
    }       
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T03:21:15.013

如果我是正确的，您希望将面板缩小小于 100%（原始大小或 JFrame 的大小）。检查此代码。

```
public class FPanel extends javax.swing.JPanel {

private static int prevN = 0;
private Dimension preferredSize = new Dimension(400,400);    
private Rectangle2D[] rects = new Rectangle2D[50];

public static void main(String[] args) {        
    JFrame jf = new JFrame("test");
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jf.setSize(400, 400);

    JPanel containerPanel = new JPanel();     // extra JPanel 
    containerPanel.setLayout(new GridBagLayout());

    FPanel zoomPanel = new FPanel();
    containerPanel.add(zoomPanel);

    jf.add(new JScrollPane(containerPanel));
    jf.setVisible(true);
}    

public FPanel() {
    // generate rectangles with pseudo-random coords
    for (int i=0; i<rects.length; i++) {
        rects[i] = new Rectangle2D.Double(
                Math.random()*.8, Math.random()*.8, 
                Math.random()*.2, Math.random()*.2);
    }
    // mouse listener to detect scrollwheel events
    addMouseWheelListener(new MouseWheelListener() {
        @Override
        public void mouseWheelMoved(MouseWheelEvent e) {
            updatePreferredSize(e.getWheelRotation(), e.getPoint());
        }
    });
}

private void updatePreferredSize(int n, Point p) {

    if(n == 0)              // ideally getWheelRotation() should never return 0\. 
        n = -1 * prevN;     // but sometimes it returns 0 during changing of zoom 
                            // direction. so if we get 0 just reverse the direction.

    double d = (double) n * 1.08;
    d = (n > 0) ? 1 / d : -d;

    int w = (int) (getWidth() * d);
    int h = (int) (getHeight() * d);
    preferredSize.setSize(w, h);

    int offX = (int)(p.x * d) - p.x;
    int offY = (int)(p.y * d) - p.y;
    getParent().setLocation(getParent().getLocation().x-offX,getParent().getLocation().y-offY); 
    //in the original code, zoomPanel is being shifted. here we are shifting containerPanel

    getParent().doLayout();             // do the layout for containerPanel
    getParent().getParent().doLayout(); // do the layout for jf (JFrame)

    prevN = n;
}

@Override
public Dimension getPreferredSize() {
    return preferredSize;
}

private Rectangle2D r = new Rectangle2D.Float();
public void paint(Graphics g) {
    super.paint(g);
    g.setColor(Color.red);
    int w = getWidth();
    int h = getHeight();
    for (Rectangle2D rect : rects) {
        r.setRect(rect.getX() * w, rect.getY() * h, 
                rect.getWidth() * w, rect.getHeight() * h);
        ((Graphics2D)g).draw(r);
    }       
  }
} 
```

说明：我添加了一个额外的 JPanel( `containerPanel`)，其中包含`zoomPanel`. 将容纳大小小于 JFrame`containerPanel`时创建的空白空间。`zoomPanel`并且，位置敏感的缩放只是直到 的大小`zoomPanel`大于帧的大小。一旦`zoomPanel`小于 JFrame，它将始终居中（按`GridBagLayout`）。

# javascript - For循环：通过字符迭代 - Javascript

> ID：15760852
> 
> 赞同：1
> 
> 时间：2013-04-02T09:41:02.450
> 
> 标签：javascript, for-loop, char

我正在编写一个国际象棋应用程序，通过我正在使用的整数进行迭代，

```
for(var i =0; i<8; i++) { var ch = convertToCharector(i);  //using ch here... 
```

但如果我喜欢的话，它会更适合我

```
for(var ch='a';ch <= 'h';ch++){ // using ch directly... 
```

这**提高了可读性。**

但是在 javascript 中，char 的增量（在 for loop ch++ 中）是不可能的，因为它们没有作为整数存储在内存中。

我能做些什么来实现这一目标？

`for(var ch='a';ch <= 'h';ch++){ // using ch directly...`直接的方式是否不可能？而不是使用第三个变量 str="abcdefgh"，然后使用 str。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:46:04.773

您可以通过以下方式非常接近：

```
for(var ch = 'a'.charCodeAt(0); ch <= 'h'.charCodeAt(0); ch++ ) { 
```

但是，如果您只追求可读性，我不知道以上是否有帮助。使用以下方法可能会更好：

```
var board = { a: 0, b: 1, c: 2, d: 3, e: 4, f: 5, g: 6, h: 7 };
for(var ch = board.a; ch <= board.h; ch++) {
} 
```

如果你需要一个解析器，它可能看起来像这样：

```
board.get = function(i) { return String.fromCharCode(97+i); }

...

board.get(board.a) // "a"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:46:29.947

您可以使用定义为的字符串：

```
chars = "abcdefgh"; 
```

然后指向该字符串中所需的字符：

```
for (int i = 0; i < 8; i++) {
 canvas.drawText("" + chars.charAt(i), x, y * 30, Paint); // This draws the characters vertically
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:48:58.650

您可以像这样定义全局变量

```
var _LETTERS_='abcdefgh',
    _A_=0,
    _B_=1,
    _C_=2,
    _D_=3,
    _E_=4,
    _F_=5,
    _G_=6,
    _H_=7; 
```

并像那样使用它们...

```
for(var i=_A_;i<=_H_; i++) { var j=_LETTERS_[i]; 
```

# csv - 如何从 CSV 文件中读取熊猫系列

> ID：15760856
> 
> 赞同：14
> 
> 时间：2013-04-02T09:41:11.077
> 
> 标签：csv, pandas, series

我有一个格式如下的 CSV 文件：

```
somefeature,anotherfeature,f3,f4,f5,f6,f7,lastfeature
0,0,0,1,1,2,4,5 
```

我尝试将其作为熊猫系列阅读（使用 Python 2.7 的熊猫每日快照）。我尝试了以下方法：

```
import pandas as pd
types = pd.Series.from_csv('csvfile.txt', index_col=False, header=0) 
```

和：

```
types = pd.read_csv('csvfile.txt', index_col=False, header=0, squeeze=True) 
```

但两者都行不通：第一个给出随机结果，第二个只是导入 DataFrame 而没有挤压。

似乎熊猫只能将格式如下的CSV识别为系列：

```
f1, value
f2, value2
f3, value3 
```

但是当特征键在第一行而不是列时，pandas 不想挤压它。

还有什么我可以尝试的吗？这种行为是有意的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T10:08:17.850

这是我找到的方法：

```
df = pandas.read_csv('csvfile.txt', index_col=False, header=0);
serie = df.ix[0,:] 
```

对我来说似乎有点愚蠢，因为 Squeeze 应该已经这样做了。这是一个错误还是我错过了什么？

/编辑：最好的方法：

```
df = pandas.read_csv('csvfile.txt', index_col=False, header=0);
serie = df.transpose()[0] # here we convert the DataFrame into a Serie 
```

这是将面向行的 CSV 行转换为 pandas 系列的最稳定方法。

顺便说一句，squeeze=True 参数现在没用，因为截至今天（2013 年 4 月）它只适用于面向行的 CSV 文件，请参阅官方文档：

[http://pandas.pydata.org/pandas-docs/dev/io.html#returning-series](http://pandas.pydata.org/pandas-docs/dev/io.html#returning-series)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-10-26T02:21:38.200

这行得通。挤压仍然有效，但它不会单独工作。`index_col`需要设置为零，如下所示

```
series = pd.read_csv('csvfile.csv', header = None, index_col = 0, squeeze = True) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T14:47:33.297

```
In [28]: df = pd.read_csv('csvfile.csv')

In [29]: df.ix[0]
Out[29]: 
somefeature       0
anotherfeature    0
f3                0
f4                1
f5                1
f6                2
f7                4
lastfeature       5
Name: 0, dtype: int64 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-26T15:58:08.237

```
ds = pandas.read_csv('csvfile.csv', index_col=False, header=0);    
X = ds.iloc[:, :10] #ix deprecated 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-17T10:37:23.040

由于 Pandas 值选择逻辑是：

```
DataFrame -> Series=DataFrame[Column] -> Values=Series[Index] 
```

所以我建议：

```
df=pandas.read_csv("csvfile.csv")
s=df[df.columns[0]] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-16T12:51:46.383

```
from pandas import read_csv

series = read_csv('csvfile.csv', header=0, parse_dates=[0], index_col=0, squeeze=True 
```

# javascript - 执行 javascript / jquery / CSS 和其他 HTML 页面渲染控件的顺序应该是什么？

> ID：15760865
> 
> 赞同：-1
> 
> 时间：2013-04-02T09:41:55.267
> 
> 标签：javascript, jquery, html, css, html-rendering

什么应该是快速加载网页的最佳实践。有哪些重要的考虑事项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:54:16.237

1) 压缩/缩小 CSS 和 JS 文件：压缩通过减小 HTTP 响应的大小来缩短响应时间。

2) 将 CSS 放在顶部：将样式表移动到文档 HEAD 元素有助于页面加载速度更快，因为这允许页面逐步呈现。

3）将Javascript置于底层：JavaScript脚本阻止并行下载；也就是说，当一个脚本正在下载时，浏览器不会开始任何其他下载。为了帮助页面加载更快，如果脚本是可延迟的，请将它们移动到页面底部。

4) 减少 DOM 元素的数量：一个复杂的页面意味着要下载更多的字节，这也意味着 JavaScript 中的 DOM 访问速度较慢。减少页面上的 DOM 元素数量以提高性能。

5) 减少 HTTP 请求：减少页面上的组件数量会减少呈现页面所需的 HTTP 请求数量，从而加快页面加载速度。减少组件数量的一些方法包括：合并文件，将多个脚本合并为一个脚本，将多个 CSS 文件合并为一个样式表，以及使用 CSS Sprites 和图像映射。

# c# - 添加到 IEnumerable 的代码

> ID：15760870
> 
> 赞同：23
> 
> 时间：2013-04-02T09:42:07.650
> 
> 标签：c#, ienumerable, add

我有一个这样的枚举器

```
IEnumerable<System.Windows.Documents.FixedPage> page; 
```

如何向其中添加页面（例如：D:\newfile.txt）？我已经尝试过`Add`，等等`Append`，`Concat`但没有什么对我有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T09:43:35.490

`IEnumerable<T>`不包含修改集合的方法。

您将需要实现`ICollection<T>`或者`IList<T>`因为它们包含添加和删除功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T09:59:42.567

**是的，有可能**

可以将序列（IEnumerables）连接在一起并将连接的结果分配给新序列。（您不能更改原始顺序。）

内置[`Enumerable.Concat()`](http://msdn.microsoft.com/en-gb/library/bb302894.aspx)只会连接另一个序列；但是，很容易编写一个扩展方法，让您将一个标量连接到一个序列。

以下代码演示：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace Demo
{
    public class Program
    {
        [STAThread]
        private static void Main()
        {
            var stringList = new List<string> {"One", "Two", "Three"};

            IEnumerable<string> originalSequence = stringList;

            var newSequence = originalSequence.Concat("Four");

            foreach (var text in newSequence)
            {
                Console.WriteLine(text); // Prints "One" "Two" "Three" "Four".
            }
        }
    }

    public static class EnumerableExt
    {
        /// <summary>Concatenates a scalar to a sequence.</summary>
        /// <typeparam name="T">The type of elements in the sequence.</typeparam>
        /// <param name="sequence">a sequence.</param>
        /// <param name="item">The scalar item to concatenate to the sequence.</param>
        /// <returns>A sequence which has the specified item appended to it.</returns>
        /// <remarks>
        /// The standard .Net IEnumerable extensions includes a Concat() operator which concatenates a sequence to another sequence.
        /// However, it does not allow you to concat a scalar to a sequence. This operator provides that ability.
        /// </remarks>

        public static IEnumerable<T> Concat<T>(this IEnumerable<T> sequence, T item)
        {
            return sequence.Concat(new[] { item });
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-07T04:15:36.780

如果您知道 IEnumerable 的原始类型是什么，您可以修改它...

```
List<string> stringList = new List<string>();
stringList.Add("One");
stringList.Add("Two");
IEnumerable<string> stringEnumerable = stringList.AsEnumerable();
List<string> stringList2 = stringEnumerable as List<string>;

if (stringList2 != null)
    stringList2.Add("Three");

foreach (var s in stringList)
    Console.WriteLine(s); 
```

这输出：

```
One
Two
Three 
```

将 foreach 语句更改为迭代`stringList2`，或者`stringEnumerable`，您将得到相同的结果。

反射可能有助于确定 IEnumerable 的*真实*类型。

不过，这可能不是一个好习惯……无论给您 IEnumerable 的内容，都可能不希望以这种方式修改集合。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-02T09:43:43.430

`IEnumerable<T>`是一个只读接口。您应该使用 an `IList<T>`instead，它提供了添加和删除项目的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T09:44:12.607

`IEnumerable`是不可变的。您不能添加项目，也不能删除项目。
来自的类`System.Collections.Generic`返回此接口，因此您可以迭代集合中包含的项目。

来自 MSDN

```
Exposes the enumerator, which supports a simple iteration over a collection of a specified type. 
```

有关 MSDN 参考，请参见[此处](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-02T09:46:36.467

您不能向 中添加元素`IEnumerable<T>`，因为它不支持添加操作。您要么必须使用 的实现`ICollection<T>`，要么尽可能将其强制转换`IEnumerable<T>`为。`ICollection<T>`

```
IEnumerable<System.Windows.Documents.FixedPage> page;
....
ICollection<System.Windows.Documents.FixedPage> pageCollection 
    = (ICollection<System.Windows.Documents.FixedPage>) page 
```

如果演员是不可能的，例如使用

```
ICollection<System.Windows.Documents.FixedPage> pageCollection 
   = new List<System.Windows.Documents.FixedPage>(page); 
```

你可以这样做：

```
ICollection<System.Windows.Documents.FixedPage> pageCollection
    = (page as ICollection<System.Windows.Documents.FixedPage>) ??
      new List<System.Windows.Documents.FixedPage>(page); 
```

后者几乎可以保证您拥有一个可修改的集合。但是，使用 cast 时，有可能成功获取集合，但所有修改操作都将 throw `NotSupportedException`。对于只读集合也是如此。在这种情况下，使用构造函数的方法是唯一的选择。

该`ICollection<T>`接口实现`IEnumerable<T>`，因此您可以`pageCollection`在当前使用的任何地方使用`page`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-02T09:47:44.593

尝试

```
IEnumerable<System.Windows.Documents.FixedPage> page = new List<System.Windows.Documents.FixedPage>(your items list here) 
```

或者

```
IList<System.Windows.Documents.FixedPage> page = new List<System.Windows.Documents.FixedPage>(1);
page.Add(your item Here); 
```

# ios - UISplitViewController - detailView 没有显示

> ID：15760872
> 
> 赞同：2
> 
> 时间：2013-04-02T09:42:11.237
> 
> 标签：ios, ipad, uisplitviewcontroller

在`AppDelegate`我们创建一个`DetailView`时，然后在它上面`loginView`呈现一个 ( `UIModalPresentationFullScreen`)。登录后，`loginView`被解雇。

`DetailView``tableView`当您选择一个单元格/行并`detailView`按下第二个时，有一个和。

到目前为止我做了什么：在`AppDelegate`我要求`UI_USER_INTERFACE_IDIOM()`以及何时`iPad`创建成语时`splitView`：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    FirstDetailViewController* fdvc = [[FirstDetailViewController alloc] initWithNibName:@"FirstDetailViewController" bundle:nil];
    SecondDetailViewController* sdvc = [[SecondDetailViewController alloc] initWithNibName:@"SecondDetailViewController" bundle:nil];

    UINavigationController* fdvcNavigationController = [[UINavigationController alloc] initWithRootViewController:fdvc];
    UINavigationController* sdvcNavigationController = [[UINavigationController alloc] initWithRootViewController:sdvc];

    splitViewController = [[UISplitViewController alloc] init];
    splitViewController.viewControllers = [NSArray arrayWithObjects:fdvcNavigationController, sdvcNavigationController, nil]; 
```

登录后，我的**LoginView**被关闭并显示我的**UISplitViewController**，第一个`DetailView`在左侧（主）。所以这里一切都很顺利。

现在我转到**FirstDetailViewController.m**并搜索**didSelectRowAtIndexPath**，因为我在“iPhone 版本”中找到了对**SecondDetailViewController的 pushView。**

这就是我卡住的地方。我已经尝试了几个`SplitView`教程并阅读了其他人关于`splitview`.

但我认为我的问题是某种“基本”问题，因为我通常是编程/iOS 新手，并不了解我所有的工具。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:10:52.183

在为表格中的项目编写带有表格视图和某种其他类型的“显示”视图的应用程序时，我这样做是为了使其在两种设备上都适用：

```
// In App Delegate...
-(BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    // Create views
    MyTableViewController* myTable = [[MyTableViewController alloc] init];
    MyDetailViewController* myDetail = [[MyDetailViewController alloc] init];
    UINavigationController* tableNav = [[UINavigationController alloc] initWithRootViewController:myTable];
    UINavigationController* detailNav = [[UINavigationController alloc] initWithRootViewController:myDetail];

    // Check device type
    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {

        // Use a split view
        UISplitViewController* splitView = [[UISplitViewController alloc] init];
        split.viewControllers = @[tableNav, detailNav];
        self.window.rootViewController = split;

    } else {

        // Use a single view for iPhone
        self.window.rootViewController = tableNav;

    }

} 
```

.

```
// In table view
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // Check device type
    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {

        // Tell the already visible detail view to load something
        MyData* data = ...; \\ Get your thing to display however you want
        [[NSNotificationCenter defaultCenter] postNotificationName:@"DisplayMyData" object:data];

    } else {

        // No detail controller exists yet, so create it
        MyDetailViewController* myDetail = [[MyDetailViewController alloc] init];
        [self.navigationController pushViewController:myDetail animated:YES];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"DisplayMyData" object:data];

    }

} 
```

.

```
// In detail view
-(void) viewDidLoad {
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(displayData:) name:@"DisplayMyData" object:nil];

}

-(void) displayData:(NSNotification*)notify {

    MyData* data = (MyData*) notify.object;

    ... // Display however...

} 
```

# java - JUnit 中的注解列表

> ID：15760881
> 
> 赞同：29
> 
> 时间：2013-04-02T09:42:37.543
> 
> 标签：java, junit4

最近在研究和实现JUnit框架。因此，我知道 JUnit 中使用的注释很少：- `@Test`, `@Before`, `@After`, `@Ignore`, `@BeforeClass`, `@AfterClass`, `@Runwith(Suite.class)`, `@SuiteClasses({})`, `@Parameters`,`@RunWith(Parameterized.class)`和`@Rule`.

我确信在 JUnit 中使用了更多注释。谁能指导我列出可以使用的更多注释以及在什么情况下使用它们？

谢谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-07-22T02:38:29.973

这个 Github 搜索 ( `@interface`) 为您提供了所有注释的列表：

[https://github.com/junit-team/junit/search?q=%22%40interface%22&type=代码](https://github.com/junit-team/junit/search?q=%22%40interface%22&type=Code)

### 基本注释

[`@Test`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/Test.java) [`@Before`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/Before.java) [`@After`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/After.java) [`@AfterClass`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/AfterClass.java) [`@BeforeClass`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/BeforeClass.java) [`@Ignore`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/Ignore.java) [`@Runwith`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/runner/RunWith.java)

### 参数化测试

对于参数化测试使用`@Parameters`和`@RunWith(Parameterized.class)`
[https://github.com/junit-team/junit/wiki/Parameterized-tests](https://github.com/junit-team/junit/wiki/Parameterized-tests)

### 类别

[`@Category`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/categories/Category.java)
将测试分组。例如快、慢等。

[https://github.com/junit-team/junit/wiki/Categories](https://github.com/junit-team/junit/wiki/Categories)

[`@IncludeCategory`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/categories/Categories.java#L84)
仅运行使用注释给出的类别或该类别的子类型进行注释的类和方法`@IncludeCategory` 。

[`@ExcludeCategory`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/categories/Categories.java#L99)
倒数`@IncludeCategory`

### 规则

[`@Rule`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/Rule.java)
规则允许非常灵活地添加或重新定义测试类中每个测试方法的行为。例如，创建临时文件夹规则以在运行测试时创建临时文件夹。

[https://github.com/junit-team/junit/wiki/Rules](https://github.com/junit-team/junit/wiki/Rules)

### 理论及相关注释

[`@Theory`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/theories/Theory.java)
理论给出更灵活和更有表现力的断言

[https://github.com/junit-team/junit/wiki/Theories](https://github.com/junit-team/junit/wiki/Theories)

[`@DataPoint`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/theories/DataPoint.java)
注释字段或方法`@DataPoint`将导致字段值或方法返回的值用作该类中理论的潜在参数

[`@DataPoints`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/theories/DataPoints.java)

`@Datapoint`
对数组或可迭代类型字段或方法进行注释的扩展`@DataPoints` 将导致数组中的值或给定的可迭代值用作该类中理论的潜在参数

[`@FromDataPoints`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/theories/FromDataPoints.java)

注释`@Theory`方法的参数`@FromDataPoints`会将被视为该参数潜在值的数据点限制为仅 `@DataPoints`具有给定名称的数据点

[`@ParametersSuppliedBy`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/theories/ParametersSuppliedBy.java)
注释`@Theory`方法参数`@ParametersSuppliedBy`会导致`ParameterSupplier`在作为理论运行时为其提供来自命名的值

[`@TestedOn`](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/experimental/theories/suppliers/TestedOn.java)

注释采用`@TestedOn`一组值作为注释参数的数据点。

例如

```
@Theory
public void multiplyIsInverseOfDivideWithInlineDataPoints(
        @TestedOn(ints = {0, 5, 10}) int amount,
        @TestedOn(ints = {0, 1, 2}) int m
) {
    assumeThat(m, not(0));
    assertThat(new Dollar(amount).times(m).divideBy(m).getAmount(), is(amount));
} 
```

# iphone - iPhone 和 iPad 无法通过蓝牙找到对方

> ID：15760882
> 
> 赞同：1
> 
> 时间：2013-04-02T09:42:41.577
> 
> 标签：iphone, ios, ipad, bluetooth, gamekit

我有一部 iPhone 4s 和一部 iPad 2，它们应该能够通过蓝牙建立连接。两台设备上的蓝牙均已激活，并且都在扫描其他设备，但另一台设备上均未显示。

如果我打开 iPhone 上的个人热点，两台设备都能找到对方。

可悲的是，这对我来说不是一个解决方案，因为我正在编写一个应该建立连接的应用程序（使用 GameKit），所以用户在使用应用程序之前不能被迫激活个人热点。

所以我的问题是：有什么我想念的，让两个 iOS 设备在不使用个人热点功能的情况下互相看到吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-24T14:53:15.770

iPad 2**不**支持 BLE 4.0，它有不同的蓝牙硬件模块。也许这就是主要问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:23:37.237

确保两者中的会话 id 相同，否则它们将找不到彼此。

```
- (GKSession *)peerPickerController:(GKPeerPickerController *)picker sessionForConnectionType:    (GKPeerPickerConnectionType)type{
GKSession* session = [[GKSession alloc] initWithSessionID:@"com.cilk.id" displayName:nil sessionMode:GKSessionModePeer];
return [session autorelease]; 
```

}

# html - 谷歌应用域验证问题

> ID：15760884
> 
> 赞同：0
> 
> 时间：2013-04-02T09:42:48.710
> 
> 标签：html, email, dns, google-apps

我很抱歉在这里而不是谷歌的论坛问这个问题，但我发现它们往往根本不会产生任何结果。

我有一个通过`HTML`文件上传在 Google Apps 上验证的域，我目前正在将其用于电子邮件。

我不记得我到底是如何提示验证的，但是大约一周前我收到了提示`address@mydomain.com`，我正在尝试找出如何通过 HTML 取消验证，以便切换到更新的方法的创造`DNS`记录。

最后，个人是否可以通过 Google 取消未经授权的验证？例如，如果有人在较早的时间点验证了您当前拥有的域？Google 不允许普通应用帐户的任何支持联系人。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:29:51.490

尝试验证帐户或域？当您进入控制面板时，您会看到什么？

如果您使用 HTML 验证，然后更改 Web 服务器的 IP，您可能会被要求重新验证。最佳使用 DNS 验证。

祝你好运。

# bash - 指向bash脚本中变量的文件路径

> ID：15760885
> 
> 赞同：1
> 
> 时间：2013-04-02T09:42:50.923
> 
> 标签：bash, file, variables, curl, certificate

我想知道是否可以提供而不是文件路径文件内容本身。例如`curl`需要指定证书的文件路径。当我在变量中有证书时该怎么办？
我不能将它放入标准输入，因为我正在生成要发送到那里的 xml。
为什么我将证书放入变量中？因为最后我只想拥有一个带有脚本的文件，我可以轻松地将其分发给我的同事。
我想到的唯一解决方案是将变量保存到文件，然后提供文件路径`curl`

```
read -d '' CERT << "CERTEND"
-----BEGIN CERTIFICATE-----
### something very secret here ###
-----END CERTIFICATE-----
CERTEND

curl -# -k --cert ??? -d @xml.xml -H "Content-Type: application/soap+xml" -H 'SOAPAction: ""' https://1.1.1.1/EndpointPort` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:08:55.820

您可以使用进程替换：

```
curl --cert <(echo "$CERT") ... 
```

这将为您创建一个管道。括号中的命令输出到这个管道（`echo $CERT`在我们的例子中），并返回管道的文件名。

# php - 我想比较帖子标题，如果找不到匹配项，则在 wordpress 中使用 php 创建新帖子

> ID：15760890
> 
> 赞同：0
> 
> 时间：2013-04-02T09:42:56.490
> 
> 标签：php, wordpress, cj

我创建了以下脚本以从 CJ Web api 创建一个新帖子，如果帖子尚未以健全的广告商名称退出，但脚本在不检查帖子退出与否的情况下执行此操作。IE。他们没有 if...else 效果，那么我该如何解决呢？我是PHP新手，所以请忽略我的noobsense，谢谢。

```
 foreach ($data->products[0] as $product) 
    {
        // Sanitize data.
        $price = number_format((float)$product->price, 2, '.', ' ');
        $image = '<a href="'.$product->{'buy-url'}.'"><img src="'.$product->{'image-url'}.
        '" style="float: right"/></a>';
        $pd =  $image.$product->description .'<a href="'.$product->{'buy-url'}.
        '">...For more details and to buy it click here</a>';

        $post_slug = $product->{'advertiser-name'};
        $args=array(
            'cat' => $_GET['cat'],
            'name' => $post_slug,
            'post_type' => 'post',
            'post_status' => 'publish'
                    );
        $my_query = new WP_Query($args);
        if($my_query->have_posts()) {
            echo 'post already exits';
            wp_reset_query();  // Restore global post data stomped by the_post().
}           
            else{

                $p = array('post_title'    => $product->{'advertiser-name'},
  'post_content'  => $pd,
  'post_status'   => 'publish',
  'post_author'   => 1,
  'post_category'  =>array($_GET['cat']));
    $pr = wp_insert_post( $p, $wp_error );
    echo $pr;
    wp_reset_query();  // Restore global post data stomped by the_post().

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:47:39.697

有什么价值`$my_query->have_posts()`吗？

首先检查一下。

尝试`print_r($my_query->have_posts());`

然后尝试做`if(){ ...}else { ....}`

# r - 模型拟合：glm vs glmmPQL

> ID：15760900
> 
> 赞同：0
> 
> 时间：2013-04-02T09:43:40.137
> 
> 标签：r, glm, anova

我正在拟合一个关于缺勤数据的模型，我想检查随机因素是否显着。为此，应该将 glmm 与 glm 进行比较，并使用 LR 测试检查哪个最重要，如果我理解正确的话。

但是，如果我执行 ANOVA(glm,glmm) ，我会得到偏差表的分析，并且没有比较模型的输出。

如何获得我想要的输出，从而比较两个模型？

在此先感谢，科恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:34:29.083

在某个地方，您对此使用有错误的印象`anova()`。下面`re`适合`glmmPQL()`在 MASS 包中使用。`fe`适合使用`glm()`从基地：

```
> anova(re,fe)
#Error in anova.glmmPQL(re, fe) : 'anova' is not available for PQL fits 
```

该消息似乎`anova.glmmPQL()`是创建的唯一原因。

请参阅此线程以进行验证和模糊解释：

[https://stat.ethz.ch/pipermail/r-help/2002-July/022987.html](https://stat.ethz.ch/pipermail/r-help/2002-July/022987.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-15T03:28:23.530

根本`anova`不适合`glmmPQL`你需要使用`glmer`from lme4 package 才能使用`anova`。

# php - 为 web 2.0 重建网站

> ID：15760902
> 
> 赞同：0
> 
> 时间：2013-04-02T09:43:43.857
> 
> 标签：php, jquery, caching, asp-classic

我想用 PHP 将我自己的旧 ASP 经典网站重建为 web2.0 的新标准（据我所知）。在我的主网站页面上，有一些区域必须显示最后更新的内容，例如：论坛上的最后一个线程、最后一个新闻、最后一个对讲等。现在（在 ASP 版本上）我已经将所有数据从数据库加载到应用程序（内存）和页面每 4 分钟重新加载一次，每次从应用程序获取数据。如果数据已更改（例如添加了新的对讲）应用程序对象设置为 null 并从数据库重新加载数据。

我的问题是关于 web2.0 中的最佳实践：我应该如何让这些区域得到刷新？我需要找到仅刷新页面某些部分的方法。我想到了两种方法：1.将（再次）数据放入内存，将 iframe 放入页面并重新加载它们。2\. 在服务器上的 XML 文件中创建数据并每 4 分钟从那里加载一次，当添加新事物（如新的对讲）时重新创建 XML 文件。是否有解决此类问题的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:57:54.607

您可以使用从 ajax 请求获得的 html 代码替换某些 div 的内容。例如：

```
<script type="text/javascript">
  setInserval(function() {
    $.ajax({
      url: "response.php", // Page url
      data: "querystring=1&ciao=2", // Your querystring
      type: "POST", // Request type
      dataType: "html", // Expected result
      success: function(data) { // On success
        $("#id_div").html(data); // Replace the content of #id_div with the response
      }
  }, 240000);
</script> 
```

该页面`response.php`必须返回要替换的 html，并且需要 jQuery。

# aptana - aptana 2.0.5 & emmet 插件

> ID：15760905
> 
> 赞同：0
> 
> 时间：2013-04-02T09:43:49.680
> 
> 标签：aptana, emmet

安装 emmet（来自[http://emmet.io/eclipse/updates/](http://emmet.io/eclipse/updates/)）后，我收到以下消息：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Emmet for Eclipse 1.0.0.201303162055 (io.emmet.eclipse.feature.group 1.0.0.201303162055)
  Missing requirement: Emmet for Eclipse 1.0.0.201303162055 (io.emmet.eclipse 1.0.0.201303162055) requires 'bundle org.eclipse.core.expressions 3.4.300' but it could not be found
  Cannot satisfy dependency:
    From: Emmet for Eclipse 1.0.0.201303162055 (io.emmet.eclipse.feature.group 1.0.0.201303162055)
    To: io.emmet.eclipse [1.0.0.201303162055] 
```

有了`aptana 3.0`它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:24:09.597

看起来它在 Aptana 2.0 中不起作用，因为它的 Eclipse 核心非常过时。尝试使用最新的 Eclipse 并将 Aptana 作为插件安装到其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T05:16:24.083

只需更新您的[Aptana](http://www.aptana.com/products/studio3/download)！，它会更好地工作:)

# javascript - 将 SVG 的 getCTM 与 getElementById 一起使用

> ID：15760907
> 
> 赞同：2
> 
> 时间：2013-04-02T09:43:50.053
> 
> 标签：javascript, svg

我已经动态生成了 SVG，我需要找到其中一个元素的当前坐标。根据 SVG 文档，这可以通过 getCMT() 函数来完成。我无法让它在 JavaScript 中工作。这是一个示例代码片段：

```
thing = document.getElementById("#bx" + myState.myId);
matrix = thing.getCTM(); 
```

我正确选择了 SVG 元素，它是一个“g”元素，所以它有一个变换矩阵。当我尝试获取矩阵时，它返回一个'null'。这是一个简单的任务，所以它不起作用是非常令人费解的。我花了一些时间寻找示例，但它们似乎都使用直接加载到 HTML 中的静态 SVG。我错过了什么？

我也用 getBBox() 试过这个，结果是一样的。我正在使用当前的 FireFox 版本。

* * *

我发现了问题所在。我将 getElementById 与*可见性*属性结合使用。我在 SVG 结构的根中将可见性设置为*隐藏*，然后在嵌套的 g 元素中将可见性属性设置为*可见。*getElementById 函数在不显示中间节点时返回 null。在更改可见性之前调用 getElementbyId 可以使事情正常进行。

这是我在哪里发现的参考：[https ://bugzilla.mozilla.org/show_bug.cgi?id=756985](https://bugzilla.mozilla.org/show_bug.cgi?id=756985)

细节与是否附加了 SVG 有关。如果没有附加，那么一切都必须可见。如果已附加，则可以使用隐藏/可见。

感谢那些回复的人。在 FireFox 中，如果 getElementId 参数的开头有一个“#”并没有任何区别，但最好知道正确的语法。谢谢。

# javascript - 仅当使用 jQuery 或 Javascript 在 HTML 中有数据时才在 html 中显示边框？

> ID：15760908
> 
> 赞同：1
> 
> 时间：2013-04-02T09:43:53.023
> 
> 标签：javascript, jquery, html

我在 HTML 中有一个这样的表格：

```
<table class="table table-bordered">  
    <thead>  
        <tr>  
            <th>Tag</th> 
            <th>Time Code</th>  
        </tr>  
    </thead>  
    <tbody>  
        <tr>  
            <td>{{ choice.tag1 }}</td>
            <td>{{ choice.time_code1 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag2 }}</td>
            <td>{{ choice.time_code2 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag3 }}</td>
            <td>{{ choice.time_code3 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag4 }}</td>
            <td>{{ choice.time_code4 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag5 }}</td>
            <td>{{ choice.time_code5 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag6 }}</td>
            <td>{{ choice.time_code6 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag7 }}</td>
            <td>{{ choice.time_code7 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag8 }}</td>
            <td>{{ choice.time_code8 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag9 }}</td>
            <td>{{ choice.time_code9 }}</td>                    
        </tr>  
        <tr>  
            <td>{{ choice.tag10 }}</td>
            <td>{{ choice.time_code10 }}</td>                   
        </tr>  
    </tbody>  
</table> 
```

`{{}}`我大多数时候使用的变量都是空的。即使显示的是空的 td 。如果它们是空的，我不会切断空间并且不会显示任何 td。例如，有时我可能只有第 3 个 td 的数据，因此我只想显示第 3 个 td。这可能使用 jQuery 或 JavaScript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:46:11.757

试试喜欢

```
{% if(!empty{choice.time_code1 }) %}
<tr>  
    <td>{{ choice.tag1 }}</td>
    <td>{{ choice.time_code1 }}</td>                    
</tr>
{% end:if %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:48:39.647

你可以试试这个可能会帮助你：

```
$(document).ready(function(){
  $(".table tbody td").each(function(){
    if($(this).html()=="")
      {
       $(this).hide();
      }
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:54:23.207

如果你想隐藏 td 如果它们是空的，如果两个 td 都是空的，则隐藏整个 tr 试试这个：

```
$(function(){
  $(".table tbody tr").each(function(){
     var empty = true;
     $(this).find("td").each(function(){
        if ($(this).html()=="")
           $(this).hide();
        else
           empty = false;
     });
     if (empty){
        $(this).hide();
     }
  });
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-02T09:57:38.420

或者你可以在 javascript 中运行一个 for 循环

# ios - iOS：将 uibutton 通过其标签移动到生成位置之外

> ID：15760912
> 
> 赞同：0
> 
> 时间：2013-04-02T09:44:00.180
> 
> 标签：ios, objective-c, uibutton

是否可以？我在 void 中创建了一组按钮，当在 buttonTapped void 中调用相邻的按钮时，我想移动一个。我移动按下的按钮没有问题，因为它是发件人，但我还需要移动它旁边的按钮，似乎无法让它移动。数组中的每个按钮都有一个标签值，因此它们是唯一的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:48:41.290

合理的直观假设：您生成了按钮，以便它们在数组中排序......

```
- (void)moveButton:(UIButton *)sender // whatever
{
    NSUInteger idx = [buttonArray indexOfObject:sender] + 1;
    UIButton *nextButton = idx < buttonArray.count ? [buttonArray objectAtIndex:idx] : nil;
    // do something with `nextButton`
} 
```

# c# - 解析 XElement - 获取元素

> ID：15760913
> 
> 赞同：0
> 
> 时间：2013-04-02T09:44:04.580
> 
> 标签：c#, xml, linq, linq-to-xml

我目前有一个 XElement。我用它来打印它：

```
System.Diagnostics.Debug.WriteLine(hostedServices); 
```

结果：

```
<HostedServices xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <HostedService>
    <Url>url</Url>
    <ServiceName>testcloudservice2</ServiceName>
    <HostedServiceProperties>
      <Description>New cloud service</Description>
      <Location>West Europe</Location>
      <Label>dGVzdGNsb3Vkc2VydmljZTI=</Label>
      <Status>Created</Status>
      <DateCreated>2013-04-02T09:40:27Z</DateCreated>
      <DateLastModified>2013-04-02T09:40:26Z</DateLastModified>
      <ExtendedProperties />
    </HostedServiceProperties>
  </HostedService>
  <HostedService>
    <Url>url</Url>
    <ServiceName>testtesttest123445</ServiceName>
    <HostedServiceProperties>
      <Description>New cloud service</Description>
      <Location>West Europe</Location>
      <Label>dGVzdHRlc3R0ZXN0MTIzNDQ1</Label>
      <Status>Created</Status>
      <DateCreated>2013-04-02T09:30:34Z</DateCreated>
      <DateLastModified>2013-04-02T09:30:34Z</DateLastModified>
      <ExtendedProperties />
    </HostedServiceProperties>
  </HostedService>
</HostedServices> 
```

我想获取每个`<HostedService>`. 我怎样才能得到这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:50:25.783

您应该`XNamespace`用于选择元素：

```
XDocument xdoc = XDocument.Load(path_to_xml);
XNamespace ns = "http://schemas.microsoft.com/windowsazure";
var hostedServices = 
            from s in xdoc.Descendants(ns + "HostedService")
            select new
            {
                ServiceName = (string)s.Element(ns + "ServiceName"),
                Description = (string)s.Element(ns + "HostedServiceProperties")
                                       .Element(ns + "Description")
            }; 
```

`ServiceName`这将返回具有属性和的匿名对象序列`Description`。用法：

```
foreach(var service in hostedServices)
   Debug.WriteLine(service.ServiceName + ": " + service.Description); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:50:01.823

```
var xml = XDocument.Parse(s);

XNamespace ns = "http://schemas.microsoft.com/windowsazure";

var descriptions = xml.Descendants(ns + "HostedService")
                      .Select(prop => 
                              new { Description =  prop.Element(ns + "ServiceName").Value, 
                                    ServiceName =  prop.Descendants(ns + "Description").First().Value});

//LINQPad specific print call                
descriptions.Dump(); 
```

印刷：

```
Description        ServiceName 
testcloudservice2  New cloud service 
testtesttest123445 New cloud service 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:47:07.160

尝试：

```
var descriptions = hostedServices.Elements().Select(
    x=> x.Descendants(y=>y.Name=="Description").FirstOrDefault());
var serviceNames = hostedServices.Elements().Select(
    x=> x.Descendants(y=>y.Name=="ServiceName").FirstOrDefault()); 
```

如果你想让它们耦合：

```
var descAndNames = hostedServices.Elements().Select(
    x=> new { Name =  x.Descendants(y=>y.Name=="ServiceName").FirstOrDefault(),
              Description = x.Descendants(y=>y.Name=="Description")
                   .FirstOrDefault()
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T10:01:16.397

这里的棘手时刻是您需要考虑**命名空间**：

```
XNamespace ns = "http://schemas.microsoft.com/windowsazure";
var serviceNames = element.Descendants(ns + "ServiceName");
var descriptions = element.Descendants(ns + "Description");

var serviceNameValues = serviceNames.Select(x => x.Value);
var descriptionValues = descriptions.Select(x => x.Value); 
```

# javascript - jQuery 没有响应：JSFiddle？

> ID：15760917
> 
> 赞同：0
> 
> 时间：2013-04-02T09:44:11.280
> 
> 标签：javascript, jquery, css, jquery-events, jsfiddle

这是我的[JsFiddle 链接](http://jsfiddle.net/cjFUf/1/)。我正在测试 jQuery 是否有效，但它没有。我犯过什么错误吗？我检查了 jQuery 的文档，一切似乎都很好。怎么了？

```
$(document).ready(function() {
    //insert code here
    alert("this will flre when the DOM is loaded.");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:54:06.600

首先选择库，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/X8I3G.png)

然后你可以调用jQuery如下

```
$(document).ready(function(){
    alert("All is well");
}); 
```

看看这个现场小提琴[http://jsfiddle.net/mayooresan/TTu3C/](http://jsfiddle.net/mayooresan/TTu3C/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T09:45:34.403

您需要选择左侧的 jQuery 库。它让 jsFiddle 知道你想要加载什么样的库或框架。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T09:46:28.087

您需要在左上方包含 JS 文件。

这会做。

编辑：JSFiddle 的更新版本支持“JavaScipt”部分下的“FRAMEWORKS & EXTENSIONS”。那里的用户可以选择 JQuery 版本。

我已经包含并更新了小提琴。

```
Fiddle Link:http://jsfiddle.net/MarmeeK/cjFUf/51/ 
```

或查看下图以获得更清晰的信息。

[![在此处输入图像描述](https://i.stack.imgur.com/REIIX.png)](https://i.stack.imgur.com/REIIX.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T09:45:31.207

您忘记加载库...在小提琴的左侧..您需要选择要选择的框架..在您的情况下是jquery

```
Frameworks & Extensions 
```

[工作小提琴](http://jsfiddle.net/bipen/cjFUf/4/)...

# javascript - Box2D引擎javascript端口棱柱关节的奇怪行为

> ID：15760919
> 
> 赞同：2
> 
> 时间：2013-04-02T09:44:13.290
> 
> 标签：javascript, box2d, physics, game-physics, physics-engine

棱柱关节上的起重块 (b2PrismaticJointDef) 上点即使起重块根本不移动，也会给放置在起重块表面上的动力体提供冲力。

也许这是javascript端口的错误。但我想修复它，因为我的游戏需要电梯。

# 更新 v1

我使用了 Box2DFlash 2.1a [https://code.google.com/p/box2dweb/的](https://code.google.com/p/box2dweb/)**box2dweb** javascript 端口。

# 更新 v2

[这是关于 flash http://hyzhak.github.com/darlingjs/performance/box2dweb/](http://hyzhak.github.com/darlingjs/performance/box2dweb/)的类似演示，它有同样的问题，所以可能是 flash 或原始 Box2D 引擎上的这个问题。

[http://jsfiddle.net/hyzhak/2kjDZ/](http://jsfiddle.net/hyzhak/2kjDZ/)

```
var b2Vec2 = Box2D.Common.Math.b2Vec2,
    b2BodyDef = Box2D.Dynamics.b2BodyDef,
    b2Body = Box2D.Dynamics.b2Body,
    b2FixtureDef = Box2D.Dynamics.b2FixtureDef,
    b2World = Box2D.Dynamics.b2World,
    b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape,
    b2CircleShape = Box2D.Collision.Shapes.b2CircleShape,          
    b2DebugDraw = Box2D.Dynamics.b2DebugDraw,
    b2PrismaticJointDef = Box2D.Dynamics.Joints.b2PrismaticJointDef;

(function() {    
    var world = buildWorld();

    var leftBlock = buildBlock({world: world, x: 2, y: 8, width: 2, height: 12, static: true});
    var rightBlock = buildBlock({world: world, x: 12, y: 8, width: 2, height: 12, static: true});
    var bottomBlock = buildBlock({world: world, x: 7, y: 13, width: 8, height: 2, static: false});
    var box = buildBlock({world: world, x: 7, y: 10, width: 2, height: 2, static: false});

    var joint = buildPrismaticJoint({world: world, 
                                     anchorA: new b2Vec2(7, 13), 
                                     axis: new b2Vec2(0, 1), 
                                     bodyA: bottomBlock, 
                                     bodyB: world.GetGroundBody()});

    var debugDraw = buildDebugDraw(world);

    setInterval(function(){
        world.Step(1 / 60, 10, 10);
        world.DrawDebugData();
        world.ClearForces();
    },1000/60);
})();

function buildWorld() {    
    return new b2World(
        new b2Vec2(0, 10), //gravity vector
        true
    );
}

function buildBlock(state) {
    var fixDef = new b2FixtureDef;
    fixDef.shape = new b2PolygonShape;
    fixDef.density = 1.0;
    fixDef.friction = 0.5;
    fixDef.restitution = .5;         
    fixDef.shape.SetAsBox(state.width / 2, state.height / 2);
    var bodyDef = new b2BodyDef;
    bodyDef.type = state.static?b2Body.b2_staticBody:b2Body.b2_dynamicBody;
    bodyDef.position.Set(state.x, state.y);
    var body = state.world.CreateBody(bodyDef);
    body.CreateFixture(fixDef);
    return body;
}

//buildPrismaticJoint(world, 9, 15, 0, 1, bottomBlock, world.GetGroundBody());
function buildPrismaticJoint(state) {
    var jointDef = new b2PrismaticJointDef();
    jointDef.Initialize(state.bodyA, state.bodyB, state.anchorA, state.axis);
    jointDef.collideConnected = false;
    jointDef.lowerTranslation = 0.0;
    jointDef.upperTranslation = 5.0;
    jointDef.enableLimit = true;
    jointDef.maxMotorForce = 400.0;
    jointDef.motorSpeed = 3.0;
    jointDef.enableMotor = true;
    return state.world.CreateJoint(jointDef);
}

function buildDebugDraw(world) {
    var debugDraw = new b2DebugDraw();
    debugDraw.SetSprite(document.getElementById("playground").getContext("2d"));
    debugDraw.SetDrawScale(20.0);
    debugDraw.SetFillAlpha(0.5);
    debugDraw.SetLineThickness(1.0);
    debugDraw.SetFlags(
        b2DebugDraw.e_shapeBit | 
        b2DebugDraw.e_jointBit |
        b2DebugDraw.e_aabbBit |
        b2DebugDraw.e_pairBit |
        b2DebugDraw.e_centerOfMassBit |
        b2DebugDraw.e_controllerBit
    );
    world.SetDebugDraw(debugDraw);

    return debugDraw;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T04:19:58.720

我在使用 Box2D v2.2.1 C++ 代码时遇到了同样的问题。我在静态主体和移动（动态）主体之间使用 b2PrismaticJoint 来模拟“电梯”（或电梯）。

当升力沿棱柱接头到达平移的上端时，它似乎停止了。然而，当另一个身体坐在升降机顶部并到达平移的上端时，升降机顶部的身体开始“弹跳”，就好像升降机仍在施加力一样。（我相信这正是正在发生的事情，即电梯的主体不会沿着棱柱接头进一步平移，但棱柱接头的电机仍在转动并向身体施加向上的力）。

我最初通过在到达平移上限时手动将棱柱关节的电机速度设置为 0.0 来解决此问题。在我的主游戏循环中，即以帧速率调用的函数（Box2D 中的“tick:”或 Cocos2D 中的“update:”），我插入了以下内容（我在这里使用 Objective-C，kLiftJointValue 是任意整数常量）：

```
// Iterate over all joints (used to prevent upper end oscillations from psimaticJoints on lifts)
for (b2Joint* j = world->GetJointList(); j; j = j->GetNext())
{
    if ((int)(j->GetUserData()) == kLiftJointValue) // check to see if lift is at upper end of translation 
    {
        CGFloat currentTranslation = ((b2PrismaticJoint*)j)->GetJointTranslation();
        CGFloat lowerLimit = ((b2PrismaticJoint*)j)->GetLowerLimit();
        CGFloat upperLimit = ((b2PrismaticJoint*)j)->GetUpperLimit();
        b2Body *bodyA = j->GetBodyA();
        b2Body *bodyB = j->GetBodyB();
        BOOL notStopped = (bodyA->GetType() == b2_dynamicBody || bodyB->GetType() == b2_dynamicBody);

        if (fabsf(currentTranslation - lowerLimit) <= 0.01*(upperLimit - lowerLimit) && notStopped )
        {
            CCLOG(@"Stopping platform");
            (j->GetBodyA())->SetType(b2_staticBody);
            (j->GetBodyB())->SetType(b2_staticBody);
            ((b2PrismaticJoint*)j)->SetMotorSpeed(0.0);
        }
    }
} 
```

上面的代码简单地遍历世界上的所有关节并寻找那些被适当标记的关节，如果身体已经平移到允许的最大平移的 1% 范围内，那么移动的身体就会变成静态的，并且通过设置电机来禁用电机速度为 0。您还可以使用 Box2D 碰撞检测并将关节的电机速度设置为 0...

然后我意识到实施这种升降机的最佳方法（不干扰升降机顶部的任何东西）是逐渐降低棱柱关节的电机速度。我是这样做的：

```
// Iterate over all joints (used to prevent upper end oscillations from psimaticJoints on lifts)
for (b2Joint* j = world->GetJointList(); j; j = j->GetNext())
{
    if ((int)(j->GetUserData()) == kLiftJointValue) // check to see if lift is at upper end of translation 
    {
        CGFloat currentTranslation = ((b2PrismaticJoint*)j)->GetJointTranslation();
        CGFloat lowerLimit = ((b2PrismaticJoint*)j)->GetLowerLimit();
        CGFloat upperLimit = ((b2PrismaticJoint*)j)->GetUpperLimit();
        b2Body *bodyA = j->GetBodyA();
        b2Body *bodyB = j->GetBodyB();
        BOOL notStopped = (bodyA->GetType() == b2_dynamicBody || bodyB->GetType() == b2_dynamicBody);

        if (fabsf(currentTranslation - lowerLimit) <= 0.25*(upperLimit - lowerLimit) && notStopped)
        {
            // Get current motor speed and update
            CGFloat currentSpeed = ((b2PrismaticJoint*)j)->GetMotorSpeed();
            CGFloat newSpeed;

            if (currentSpeed < 0.0)
            {
                if (fabsf(currentTranslation - lowerLimit) <= 0.01*(upperLimit - lowerLimit) && notStopped )
                {
                    CCLOG(@"Stopping platform");
                    (j->GetBodyA())->SetType(b2_staticBody);
                    (j->GetBodyB())->SetType(b2_staticBody);
                    ((b2PrismaticJoint*)j)->SetMotorSpeed(0.0);
                }
                else
                {
                    CCLOG(@"Decelerating: speed=%f", currentSpeed);
                    newSpeed = 0.95*currentSpeed;
                }
            }
            else if (currentSpeed > 0.0)
            {
                CCLOG(@"Accelerating: speed=%f", currentSpeed);

                newSpeed = 1.05*currentSpeed;

                if (newSpeed > 20.0)
                    newSpeed = 20.0;
            }

            // update motor speed
            ((b2PrismaticJoint*)j)->SetMotorSpeed(newSpeed);
        }            
    }
} 
```

您需要使用各种常量（尤其是常量 0.95 和 1.05），因为它们针对特定的电机属性进行了微调（在我的例子中是 maxMotorForce = 1000 和 motorSpeed = 20）。

当然，在我的项目的其他地方，我有计时器在运行，它根据需要重置升降机主体和关节电机属性（使其向上移动，然后通过将关节的电机速度反转为正值来返回）。

当电梯在另一个（底部）极限附近平移时，我没有实施加速/减速技术，因为我不关心电梯停止时乘坐电梯的东西会在这个方向上施加力。然而，当电梯离开或返回底部时，可以使用与上述相同的方法来平稳地加速或减速......

# android - 改善android上的响应时间

> ID：15760920
> 
> 赞同：0
> 
> 时间：2013-04-02T09:44:18.810
> 
> 标签：android

我正在使用 android 模拟器来测试我的项目。是否有任何特定设置可以在设备上提供更好的响应时间？因为在我的登录页面上输入用户名和密码并单击提交都需要很长时间。需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:47:06.567

尝试使用 x86 模拟器 - 它比 ARM 模拟器快得多。

# excel - ThisWorkbook 不持有全局变量值以取消 ontime()

> ID：15760924
> 
> 赞同：0
> 
> 时间：2013-04-02T09:44:25.853
> 
> 标签：excel, vba

我正在使用以下链接：

[http://www.ozgrid.com/Excel/run-macro-on-time.htm](http://www.ozgrid.com/Excel/run-macro-on-time.htm)

存储我调用函数的时间，`ontime`然后取消它。但是，在我最后一次存储之后，我调用`ontime()`然后我的函数关闭。问题是我刚刚存储的时间超出范围并更改为空。所以使用上面的链接，我说一旦`RunOnTime()`完成，dTime 的值就是空的，因此当我调用`CancelOnTime()`它时它不起作用。我在示例中声明了 dTime。一切都一样，除了我在 ThisWorkbook 中。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:15:33.510

您无法在发布的 ThisWorkbook 模块中运行该代码。ThisWorkbook 是一个类模块，默认情况下，其中的过程在类之外不可用。首先，您需要将 OnTime 调用的任何过程公开，以便可以从类外部访问它（OnTime 存在于类外部）。接下来，对过程的任何引用都需要以类名开头。通过这两项更改，您的代码将如下所示：

```
Public dTime As Date
Dim lNum As Long

Public Sub RunOnTime()
    dTime = Now + TimeSerial(0, 0, 10)
    Application.OnTime dTime, "ThisWorkbook.RunOnTime"

    lNum = lNum + 1
    If lNum = 3 Then
       CancelOnTime
    Else
        MsgBox lNum
    End If

End Sub

Sub CancelOnTime()
    Application.OnTime dTime, "ThisWorkbook.RunOnTime", , False
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:55:50.167

在示例中，变量**dTime**被声明为**Public**。事实上，它不需要是因为只`RunOnTime()`访问它，但是能够使用您编写的函数访问它是有用的。`CancelOnTime()`不依赖于变量。

我认为您可能对 Watch 感到困惑。要查看公共变量，请将上下文设置为 All Procedures - All Modules。

# c++ - 如何清除升压功能？

> ID：15760929
> 
> 赞同：3
> 
> 时间：2013-04-02T09:44:35.003
> 
> 标签：c++, boost, boost-function

有一个非空的`boost::function`，如何让它空（所以当你调用`.empty()`它时你会得到`true`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-26T23:59:44.653

f.clear() 可以解决问题。使用上面的例子

```
#include <boost/function.hpp>
#include <iostream>

int foo(int) { return 42; }

int main()
{
    boost::function<int(int)> f = foo;
    std::cout << f.empty();

    f.clear();
    std::cout << f.empty();

    f = boost::function<int(int)>();
    std::cout << f.empty();
} 
```

将产生相同的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T09:50:57.007

只需分配它`NULL`或默认构造`boost::function`（默认为空）：

```
#include <boost/function.hpp>
#include <iostream>

int foo(int) { return 42; }

int main()
{
    boost::function<int(int)> f = foo;
    std::cout << f.empty();

    f = NULL;
    std::cout << f.empty();

    f = boost::function<int(int)>();
    std::cout << f.empty();
} 
```

输出：`011`

# c# - 使用c#将数据从excel导入mysql

> ID：15760932
> 
> 赞同：-2
> 
> 时间：2013-04-02T09:44:44.943
> 
> 标签：c#, mysql, excel

我有如下所示的 Excel 文件

![在此处输入图像描述](https://i.stack.imgur.com/ufoOk.png)

我想阅读第一个只读所有学校名称和学校地址并将它们插入 mySql 数据库的 SchoolInfo 表中。

之后，我想读取每所学校的数据并将其插入到 StudentInfo 表中，该表具有与 SchoolInfo 表关联的外键。

我正在阅读类似这样的excel表。

public static void Import(string fileName) { string strConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + ";Extended Properties=\"Excel 12.0;HDR=No;IMEX=1\"" ;

```
 var output = new DataSet();

    using (var conn = new OleDbConnection(strConn))
    {
        conn.Open();

        var dt = conn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });

        if (dt != null)
            foreach (DataRow row in dt.Rows)
            {
                string sheet = row["TABLE_NAME"].ToString();

                var cmd = new OleDbCommand("SELECT * FROM [+"+sheet+"+]", conn);
                cmd.CommandType = CommandType.Text;

                OleDbDataAdapter xlAdapter = new OleDbDataAdapter(cmd);

                xlAdapter.Fill(output,"School");
            }
    }

} 
```

现在我在数据集的数据表中有数据，现在如何读取所需的数据并将其插入我的 sql 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:52:03.093

尝试以下步骤：

1.  从 Excel 工作表中读取

首先，您必须创建到 Excel 文件的 OleDB 连接。

```
String connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" +
"Data Source=" + path + ";" +
"Extended Properties=Excel 8.0;";
OleDbConnection xlConn = new OleDbConnection(connectionString);
xlConn.Open(); 
```

这里的路径是指 Excel 电子表格的位置。例如 "D:\abc.xls" 然后你必须查询你的表。为此，我们必须首先为表和列定义名称。点击这里了解如何。现在创建命令对象。

```
OleDbCommand selectCmd = new OleDbCommand("SELECT * FROM [Sheet1$]", xlConn); 
```

现在我们必须使用 DataAdapter 将 select 命令的输出存储到 DataSet

```
OleDbDataAdapter xlAdapter = new OleDbDataAdapter();
objAdapter1.SelectCommand = selectCmd;
DataSet xlDataset = new DataSet();
xlAdapter.Fill(xlDataset, "XLData"); 
```

1.  将数据保存到变量中

现在使用迭代将单元格数据提取到整个表格的变量中

```
variable = xlDataset.Tables[0].Rows[row_value][column_value].ToString() ; 
```

1.  将变量中的数据写入 MySQL 数据库

现在使用 ODBC 连接连接到 MySQL 数据库

```
String mySqlConnectionString = "driver={MySQL ODBC 5.1 Driver};" +
"server=localhost;" + "database=;" + "user=;" + "password=;";
OdbcConnection mySqlConn = new OdbcConnection(mySqlConnectionString);
mySqlConn.Open(); 
```

使用已从 Excel 工作表中存储数据的变量构造您的 INSERT 语句。

```
OdbcCommand mySqlInsert = new OdbcCommand(insertCommand, mySqlConn);
mySqlInsert.ExecuteScalar() 
```

# hibernate - JPA2.0/Hibernate：为什么 JPA 会触发查询以更新所有列的值，即使托管 bean 的某些状态发生了变化？

> ID：15760934
> 
> 赞同：13
> 
> 时间：2013-04-02T09:44:46.120
> 
> 标签：hibernate, jpa-2.0

我正在将 JPA2.0 与 Hibernate 一起使用。

例如，我有下表的 JPA 实体：

```
User [userId, userName, userAddress] 
```

我可以使用 find() 方法获取用户实体：

```
User user = entityManager.find(User.class , 1L); // 1L is user id 
```

现在，如果我在上面获取的同一用户实体上更改任何用户的状态（比如说用户名）：

```
user.setUserName("Narendra"); 
```

并使用 merge() 方法执行合并：

```
entityManager.merge(user); 
```

通过以下查询成功执行合并，该查询在合并时由 JPA/hibernate 触发：

```
Hibernate: update User set USERID =?, USERNAME=?, USERADDRESS=? where USERID=? 
```

我的问题是，如果我只更改了用户实体中的用户名状态，我没有更改 userId、userAddress 等。JPA 应该在查询下方触发（只是为了更改 userName）而不是在查询上方触发。

```
 Hibernate: update User set USERNAME=? where USERID=? 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T09:48:06.163

查看[`dynamic-update`](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-class)物业。

> 动态更新（可选 - 默认为 false）：指定 UPDATE SQL 应在运行时生成，并且只能包含值已更改的那些列。

考虑到动态更新可能会对性能产生一些影响。使用它会产生一些开销，如果您没有一个包含许多不太可能修改的列的大型（可能是遗留）表，它可能会适得其反。请参阅此相关问题[Hibernate：dynamic-update dynamic-insert-Performance Effects](https://stackoverflow.com/q/3404630/851811)。

# 休眠 < 4.0

如果您使用的是 Hibernate Annotations，请使用 Hibernate 特定的[`@Entity`](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/annotations/Entity.html)注释和[JPA](http://docs.oracle.com/javaee/5/api/javax/persistence/Entity.html)注释：

```
@org.hibernate.annotations.Entity(dynamicUpdate = true) 
```

如果您使用 XML 映射：

```
<class name="User" table="user" dynamic-update="true"> 
```

# 休眠 >= 4.0

Hibernate 特定的 @Entity 注解在 Hibernate 4.0 中已被弃用，并计划在 4.1 中消失。使用动态更新的正确方法是现在用[@DynamicUpdate](https://hibernate.atlassian.net/browse/HHH-6398)注释实体（感谢@Tiny 的提醒）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-09T06:28:32.143

也可以用作注解：

```
import org.hibernate.annotations.DynamicUpdate;

@Entity
@DynamicUpdate
@Table(name = "payments")
public class Payment {
    ...
} 
```

# scala - 模式来弥合 Scalas 函数式不可变样式和 JavaFX 2 属性之间的差距？

> ID：15760936
> 
> 赞同：0
> 
> 时间：2013-04-02T09:44:50.273
> 
> 标签：scala, data-binding, javafx-2

目前正在开发一个使用 JavaFX 2 作为框架的 GUI 应用程序。已经用过Java，知道数据绑定的原理。

由于 scala 中的函数式编程提倡使用不可变值（vals），因此存在差距。

除了为 gui 提供一个基于 fx 属性的可变表示模型和为具有转换层的应用程序逻辑提供不可变模型之外，还有其他解决方案吗？

问候，安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:19:22.757

由于您的问题有点含糊，如果这主要基于个人观点，请原谅：据我所知，没有其他方法可以处理可变属性模型。但是，我会争辩说您不想要一个：

首先，至少从纯粹的角度来看，函数式编程试图避免副作用。然而，用户界面完全是为了引起副作用。从那里开始有一个轻微的哲学不匹配。

不可变数据的主要好处之一是您不必处理控制结构来避免并发修改。但是，JavaFX 的事件队列实现了一种非常严格的单线程方法，对读写访问进行了隐式控制。另一方面，用户界面组件比大多数其他编程领域更适合可变对象的想法。毕竟，节点结构是有状态组件的固有层次结构。

考虑到这一点，我认为试图在 JavaFX 上强制使用功能性和不可变的范式是行不通的。相反，我建议基于键路径选择构建一个转换层——例如，绑定一个标签以将一个（不可变的）Person 的名称显示给 Person，而不是 name 属性，并让解析器处理对 name 属性的访问。基本上，这意味着结合使用 Bindings#select 和 JavaBeanStringProperty。

# java - writeShort in little Endian：十六进制显示大，但打开仅适用于 le

> ID：15760938
> 
> 赞同：4
> 
> 时间：2013-04-02T09:44:59.400
> 
> 标签：java, endianness

我对自己的所作所为有点困惑。据我所知，java，尤其是 DataOutputStream 以 Big endian 写入值。

我正在编写一个小信号发生器，并且必须以小端存储文件。到目前为止没问题，只需交换字节即可。

`writeShort()`也说“先写高字节”。

因此，例如十进制“2”通常会存储为：

```
00 02 (big endian)
02 00 (little endian) is what I need. 
```

所以我交换字节：

```
public static short swap (short value)
{
        int b1 = value & 0xff;
        int b2 = (value >> 8) & 0xff;

        return (short) (b1 << 8 | b2 << 0);
} 
```

并写出简短的：

```
dos.writeShort(swap(x[t])); 
```

十六进制编辑器以应为的格式向我显示文件：`02 00`

当我现在尝试打开生成的音频文件时，我什么也听不见。（大胆的原始数据导入和采样率等设置都正确）。

我删除了字节交换，得到一个文件：`00 02`这是大端。

我再次打开大胆，以相同的配置，我听到了语气。确实我配置了小端！

我将文件复制到 Windows（我正在使用 Mac）并在 Cool Edit 2000 中打开文件，再次选择 16khz、16 位无符号 pcm 和小端（16 位 LSB、MSB）。又听到了语气，什么都选大端。

我的失败在哪里？有些事情让我感到困惑，因为这不应该像我描述的那样工作..

生成音调：

```
// x(t) = A*cos (2*pi * f * t + phi)
        // 
        if(null != dos) 
        {
            double sampPeriod = 1.0/16000;
            short x[] = new short[16000]; // 16k samples for 1 second
            for(int t=0; t < x.length; t++)
            {
                double time = t * sampPeriod;
                x[t] = (short) (amplitude * Math.sin(2.0*Math.PI*frequenz*time+phase));
            }

            for(int t=0; t < x.length; t++)
            {
                try {
                    dos.writeShort(x[t]);
                } catch (IOException e) {
                    e.printStackTrace();
                }

            }
        } 
```

于 2013 年 2 月 4 日下午 2:16 编辑：我正在阅读，假设我的理解是失败，我在维基百科上找到了以下图片：

![读取权限](https://i.stack.imgur.com/HYsY2.png)

在下一篇文章中查看问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:18:25.193

好的，所有有兴趣的人都关注这个问题：

失败与小端或大端无关。我从 LE 和 BE 了解到的一切都是正确的。（但不是最后关于读取访问的假设，这在我寻找*任何*解释时欺骗了我的想法......）

失败是关于信号的*幅度*。

如果幅度太低 - 音量本身（通过幅度产生）太低。所以什么也听不见。将写入的大端文件解释为小端使文件中的每个短样本都成为一个更大的样本（回到 zch 的评论：当解释为小端时，00 02 是 512）。

这在当时产生了更高的采样值并让我听到了一些东西。

通过将更高的幅度*和*正确的字节交换设置为小端，我可以再次听到一个东西。所以主要的失败与字节序无关。

zch 的评论让我一次又一次地沉思，导致 windows 上的一些 c++ 代码读取值并看到原生 LE 解释与 zch 所说的相同。这将我带到幅度点，现在我发现了问题。希望没有其他人会犯这种愚蠢的失败，或者将来会找到这篇文章并知道:-)

# c# - DBF 文件名被截断

> ID：15760940
> 
> 赞同：1
> 
> 时间：2013-04-02T09:45:00.707
> 
> 标签：c#, oledb, dbf

我使用下面的代码创建了一个 dbf 文件并填充它，一切正常。问题是文件名被截断为最多 8 个字符。知道为什么或如何保持全名吗？

```
string connectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source="+path+";Extended Properties=dBase IV";
OleDbConnection connection = new OleDbConnection(connectionString);
        connection.Open();
cmd.CommandText = @"CREATE TABLE calendfull(
                                date1 datetime ,
                                day1 int ,
                                month1 int ,
                                year1 int ,
                                dow int ,
                                endmonth int  
                                )";

            cmd.ExecuteNonQuery();

  foreach (DataRow row in calend.Rows)
            {
                day = Convert.ToInt32(row["day"]);
                year = Convert.ToInt32(row["year"]);
                month = Convert.ToInt32(row["month"]);
                dow = Convert.ToInt32(row["dow"]);
                endmonth = Convert.ToInt32(row["endmonth"]);
                date1 = Convert.ToDateTime(row["date1"]);

                cmd.CommandText = @"insert into calendFull  values ('" + date1 + "'," + day + "," + month + "," + year + "," + dow + "," + endmonth + ")";
                cmd.ExecuteNonQuery();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:53:58.457

DBF 文件名遵循 8.3 命名规范，因此名称不能超过 8 个字符。

**但是等等，我已经看到一些名称大于 8 个字符的 dbf 文件。**

是的，这是允许的，但是当您在命令提示符中查看时，它们的实际名称类似于文件名。例如`largef~1`

**那么我该如何阅读它们呢？****您应该使用kernel32.dll**获取他们的简称

 **这是代码：

```
 public string GetShortFileName(string fileDirectory, string fileNameWithExtension)
    {
        StringBuilder temp = new StringBuilder(255);

        string path = System.IO.Path.Combine(fileDirectory, fileNameWithExtension);

        int n = GetShortPathName(path, temp, 255);

        if (n == 0)
            throw new NotImplementedException();

        string extension = System.IO.Path.GetExtension(path);

        return ((temp.ToString().Split('\\')).Last()).ToLower();//.Replace(extension, string.Empty);
    }

    [System.Runtime.InteropServices.DllImport("kernel32.dll", CharSet = System.Runtime.InteropServices.CharSet.Auto)]
            public static extern int GetShortPathName(
        [System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.LPTStr)]    
        string path,
        [System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.LPTStr)]    
        StringBuilder shortPath,
        int shortPathLength); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T12:11:28.680

```
 const string connectionString = @"Provider = vfpoledb; Data Source = {0}; Collating Sequence = general;";
        OleDbConnection conn = new OleDbConnection(string.Format(connectionString, dirName));
        conn.Open();
        OleDbCommand cmd = new OleDbCommand(string.Format("select * from {0}", fileName), conn) 
```

更改 oledb 提供程序：

[使用 Microsoft OLE DB Provider for Visual FoxPro 9.0](https://www.microsoft.com/en-us/download/details.aspx?id=14839)**

# android - Android MediaPlayer/VideoView：达到特定播放时间时触发的事件回调？

> ID：15760952
> 
> 赞同：2
> 
> 时间：2013-04-02T09:45:39.160
> 
> 标签：android, android-mediaplayer, android-videoview

我正在开发一个在 a 中的某些点播放广告的视频播放器`video`，但是我一直在查看 android 文档，似乎没有事件侦听器告诉我 a 何时`MediaPlayer`达到某个点播放时间。

目前我已经通过`Runnable()`调用`getCurrentPosition()`来查看是否达到了我的播放时间目标，并且每秒都会将可运行对象发布到处理程序，但是这种方法显然并不理想，有没有办法设置达到特定播放时间时的回调？

如果没有，除了我如何做之外，是否有更好的方法来检测是否达到了播放时间？

# android - m3u8 文件无法在 Android 模拟器中播放

> ID：15760953
> 
> 赞同：2
> 
> 时间：2013-04-02T09:45:38.937
> 
> 标签：android, android-emulator, android-mediaplayer, android-source

我正在尝试在 Android 模拟器中播放 m3u8 文件。 `http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8`

它无法播放视频，但可以听到音频。
我收到以下错误`E/OMXNodeInstance( 39): OMX_GetExtensionIndex failed`。

我跟踪了这​​些调用，发现视频解码器没有正确实例化，
我发现它`OMXNodeInstance::enableGraphicBuffers`正在被调用，然后调用，
`OMX_ERRORTYPE err = OMX_GetExtensionIndex(...,const_cast<OMX_STRING>("OMX.google.android.index.enableAndroidNativeBuffers"),...);`
然后调用`OMX_ERRORTYPE SoftOMXComponent::getExtensionIndex`，
但是这个函数没有实现。
它只返回 UndefinedError （下面的代码）

```
OMX_ERRORTYPE SoftOMXComponent::getExtensionIndex(const char *name, OMX_INDEXTYPE *index)
{
return OMX_ErrorUndefined;
} 
```

有人可以帮我克服这个 GetExtentionIndex 失败。在下面登录

```
/ChromiumHTTPDataSource( 39): connect to http://devimages.apple.com/iphone/samples/bipbop/gear4/prog_index.m3u8 @0
V/NuPlayer( 39): scanning sources haveAudio=0, haveVideo=0
V/NuPlayer( 39): in instantiateDecoder at 693 audio = 0 
V/NuPlayer( 39): in instantiateDecoder at 693 audio = 1 
I/ESQueue ( 39): found AAC codec config (22050 Hz, 1 channels)
I/avc_utils( 39): found AVC codec config (192 x 144, Baseline-profile level 1.1)
V/MediaPlayer( 583): in getCurrentPosition at : 425
V/MediaPlayerService( 39): getCurrentPosition
V/MediaPlayerService( 39): [1] getCurrentPosition = 0
V/NuPlayer( 39): scanning sources haveAudio=0, haveVideo=0
V/NuPlayer( 39): in instantiateDecoder at 701 mime = video/avc
V/ACodec ( 39): Now uninitialized
V/ACodec ( 39): Now uninitialized
V/ACodec ( 39): onAllocateComponent
I/MediaPlayerService( 39): MediaPlayerService::getOMX()
V/SoftOMXPlugin( 39): makeComponentInstance 'OMX.google.h264.decoder'
V/SoftOMXPlugin( 39): makeComponentInstance at 106 
V/ACodec ( 39): onAllocateComponent
I/MediaPlayerService( 39): MediaPlayerService::getOMX()
V/SoftOMXPlugin( 39): makeComponentInstance at 128 
V/SoftOMXPlugin( 39): makeComponentInstance 'OMX.google.aac.decoder'
V/SoftOMXPlugin( 39): makeComponentInstance at 106 
V/SoftOMXPlugin( 39): makeComponentInstance at 128 
V/ACodec ( 39): [OMX.google.h264.decoder] Now Loaded
V/ACodec ( 39): onConfigureComponent
V/ACodec ( 39): configureCodec at 870 
V/ACodec ( 39): setupVideoDecoder at 1400 
V/ACodec ( 39): setupVideoDecoder at 1402 mime = video/avc 
V/ACodec ( 39): setupVideoDecoder at 1406 
V/ACodec ( 39): setupVideoDecoder at 1414 
V/ACodec ( 39): setupVideoDecoder at 1421 
V/ACodec ( 39): setupVideoDecoder at 1429 
V/ACodec ( 39): setupVideoDecoder at 1437 
V/ACodec ( 39): initNativeWindow at 1962 
V/ACodec ( 39): initNativeWindow at 1967 
E/OMXNodeInstance( 39): OMX_GetExtensionIndex failed
V/OMXNodeInstance( 39): enableGraphicBuffers at 301 OMX_GetExtensionIndex returned 2147487745
V/ACodec ( 39): onStart
V/ACodec ( 39): [OMX.google.h264.decoder] Now Loaded->Idle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:06:42.923

这是一个非常有趣的问题。从你的日志中，我想引用这部分

```
E/OMXNodeInstance( 39): OMX_GetExtensionIndex failed
V/OMXNodeInstance( 39): enableGraphicBuffers at 301 OMX_GetExtensionIndex returned 2147487745 
```

这 2 条错误消息是在`initNativeWindow`调用 的过程中收到的`ACodec`，这是它从状态转换`LOADED`的一部分。`IDLE`从一个`OMX`角度来看，作为`LOADED to IDLE`过渡的一部分，[`ACodec::LoadedState::onConfigureComponent`](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/ACodec.cpp#3257)被调用。作为该函数的一部分，[`initNativeWindow`](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/ACodec.cpp#3288)被调用。

在[`initNativeWindow`](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/ACodec.cpp#2065)中，有**两个**不同的条件。第一种情况是用户向编解码器提供了一个`nativeWindow`或者更确切地说是一个`Surface`或`SurfaceTexture`来将其输出写入其中。另一种情况是当用户没有向引擎提供 a`Surface`时`MediaPlayer`。

```
V/ACodec ( 39): onStart
V/ACodec ( 39): [OMX.google.h264.decoder] Now Loaded->Idle 
```

从这些日志中，可以观察到返回码`initNativeWindow`是正常的，这**只有在控制分支到**[这里](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/ACodec.cpp#2070)`mNativeNativeWindow`观察到的为 NULL的情况下才有可能。案例的返回代码没有被 捕获，这意味着组件成功转换到状态。`false``ACodec``IDLE`

简而言之，这个问题主要是由于`Surface`没有提供给`MediaPlayer`.

**一些建议：**

由于您正在使用`NuPlayer`，我建议您检查是否[`NuPlayer::setVideoSurfaceTexture`](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libmediaplayerservice/nuplayer/NuPlayer.cpp#143)调用了对象以及是否将`non-NULL`对象传递`NuPlayer`给下游组件。

从某个`MediaPlayer`角度来看，您应该将表面设置为`setSurface`调用的一部分。

一般来说，您需要提供一个`sink`用于视频解码器的链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:24:08.490

尝试在真实设备中运行它，因为我知道具有某些特定 sdk（如 3.1）的模拟器在播放 m3u8 文件时会崩溃。如果没有解决问题，也许你可以使用一些第三个插件，比如 Vitamio [http://vitamio.org/](http://vitamio.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:36:41.273

```
E/OMXNodeInstance( 39): OMX_GetExtensionIndex failed
V/OMXNodeInstance( 39): enableGraphicBuffers at 301 OMX_GetExtensionIndex returned 2147487745 
```

**对OMX_GetExtensionIndex**的调用进入 SoftOMXComponent([此处](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/omx/SoftOMXComponent.cpp))，这只是一个存根函数并始终返回**OMX_ErrorUndefined**，这会导致**enableGraphicBuffers失败**

# vala - 在 Genie 中使用 GLib.HashTable

> ID：15760964
> 
> 赞同：3
> 
> 时间：2013-04-02T09:46:13.040
> 
> 标签：vala, genie

如何在 Genie 中访问 GLib.HashTable？我正在尝试为 libsoup HTTP 服务器编写一个处理程序方法。查询参数是一个 GLib.HashTable。当我尝试访问查询时，例如

```
def search_handler (server : Soup.Server, msg : Soup.Message, path : string, 
                query : GLib.HashTable?, client : Soup.ClientContext)
 response_text : string = null
 if query is not null && query.contains("expr")
     response_text = get_search(query.get("expr")) 
```

我得到了错误：

```
error: missing generic type arguments
    response_text = get_search(query.get("expr"))
                               ^^^^^ 
```

我发现的唯一方法是创建一个新的 HashTable 对象：

```
p : GLib.HashTable of string, string = query
expr : string = p.get("expr") 
```

处理这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:48:20.777

你可以试试：字符串字典，字符串

```
var d = new dict of string,string
d["one"]="1"
d["two"]="2"
print "%s",d["one"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T21:31:26.293

像这样的东西

[缩进=4]

```
init
    var h = new HashTable of string, int (str_hash, str_equal)
    h["foo"] = 123
    h["bar"] = 456

    foo ("foo", h)

def foo (key: string, hash: HashTable of string, int)
    // PUT HASHTABLE IN THE END
    if hash.contains (key)
        stdout.printf ("%s => %i", key, hash[key]) 
```

# list - LISP：如何测试两个列表是否具有相同的元素？

> ID：15760966
> 
> 赞同：5
> 
> 时间：2013-04-02T09:46:18.440
> 
> 标签：list, lisp, equality

我想编写一个函数，它将两个列表作为参数，并检查第一个列表中的每个元素是否都包含在第二个列表中（元素的顺序无关紧要）。该函数还将检查两个列表是否具有相同的长度（两个列表不能有重复的元素），因为如果不是，则该函数将返回 nill/false。

例如： (ABCDEF) 和 (BEAFDC) 具有相同的元素 (nil) 和 (nil) 具有相同的元素

(ABCDEF) 和 (ABCDEFG) 没有相同的元素

问题是我只知道一些基本命令，我只能使用那些。这些几乎是我知道的所有命令：

```
CAR, CDR, LENGTH, NULL, MEMBER, NOT, AND, OR, NOT, MAPCAR, APPLY, DO, SETQ, LET 
```

到目前为止，我编写了以下函数，但我不知道如何检查重复成员，并且它不适用于我要检查的所有列表：

```
(defun same-elem-p (lst1 lst2)
  (cond ((not (null lst1))
         (cond ((member (car lst1) lst2)
                (same-elem-p (cdr lst1) lst2))
               (t nil)))
        (t t))) 
```

我希望我能很好地解释这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T10:40:06.593

您可以定义一个在列表包含另一个列表时返回 true 的函数：

```
(defun member (x liste) 
   (cond
      ((null liste) ()) 
      ((equal (car liste) x) liste) 
      (t (member x (cdr liste))))) 

(defun inclus (liste1 liste2) 
   (cond 
      ((null liste1) t) 
      ((member (car liste1) liste2)(inclus (cdr liste1) liste2)) 
      (t ()))) 
```

然后用它来判断两个列表是否相等：

```
(defun compare (liste1 liste2)
   (if ((and (inclus liste1 liste2) (inclus liste2 liste1)))
      (print "the 2 lists are equivalent")
      (print "the 2 lists aren't equivalent"))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-19T18:39:22.747

当一个列表中的每个元素都是另一个列表的成员时，两个列表具有相同的元素，反之亦然。假设您可以使用该`every`功能，一个快速的测试方法如下：

```
(defun same-elements (lst1 lst2)
  (and (= (length lst1) (length lst2))
       (every #'(lambda (x) (member x lst2))
                lst1)
       (every #'(lambda (x) (member x lst1))
                lst2))) 
```

例如：

```
CL-USER> (same-elements '(a b c) '(c a b))
T 
```

请注意，此代码不会处理所有情况。例如，`T`当两个不同的元素在两个列表中重复时，它会返回，如`(a b b c)`和`(a a b c)`。但是，在大多数情况下，它完成了它的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T10:31:22.043

编写一个映射到 list1 和 list1 中每个元素的函数

1.  在 list2 中找到它。如果它不在 list2 中，则它会失败。
2.  否则它将它从 list2 中删除

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-28T07:53:51.057

将列表视为集合以及是否可以使用更多命令，例如：

```
INTERSECTION SET-DIFFERENCE EQ 
```

你可以定义这个函数：

```
(defun equal-lists (list1 list2)
  (and (eq (null (intersection list1 list2)) nil)
       (null (set-difference list1 list2)))) 
```

那么如果交集不是空集，并且差是空的，那么set1等于set2。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-02T02:51:49.143

如果两个列表是彼此的子集，则它们包含相同的元素。

```
(defun same-elements (l1 l2)
  (and (subsetp l1 l2) (subsetp l2 l1))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-27T19:16:17.807

如果您的元素是数字，或者您有一个不错的元素比较器（在这种情况下是按字母顺序排列），您可以简单地对两个列表使用“排序”过程，然后检查它们是否相同。

从理论上讲，整个操作的复杂度将在 O(N log(N)) 左右（因为 'sort' 的 Lisp 实现非常好）。至于 Hedi 的回答，复杂性将类似于 O (N² / 2) （因为“成员”将被调用 N 次，并且每次调用的平均时间为 (N / 2)）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-22T04:22:48.020

```
(defun same ( a b )
`(cond
(( null a )'same )
((member(car a ) b ) (same(cdr a ) b ))
(t'nosame )))

(defun entre ( )
(let(( a ) ( b ))
(princ " list a : " ) (setq a (read ))
(princ " list b : " ) (setq b (read ))
(if (= (length a ) (length b )) (same  a b ) 'nosame ))) 
```

# android - 自适应流 - 平滑流不起作用

> ID：15760971
> 
> 赞同：0
> 
> 时间：2013-04-02T09:46:26.570
> 
> 标签：android, video-streaming, google-tv

来自文档：“自适应流 - 自动适应拥塞或带宽可用性”。但这仅在播放器启动时才有效（我使用 VideoView）。如果播放视频时网速下降 - 什么都不会发生，但最好让播放器根据当前的网速切换视频质量。所以，问题：

android视频播放器是否支持在播放视频时实时切换视频质量？如果是，如何实施？

感谢您的关注。

**更新：** 例如 Youtube 谷歌电视应用。如果在播放视频时带宽发生变化，播放器会自动切换到适当的视频质量，不会有任何延迟。

我必须做些什么才能让它工作？我正在使用 VideoView，它仅在我启动播放器时才有效。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:37:57.137

通常，您会实现自己的 VideoView 子类，该子类利用某种形式的 QoS 来监控网络带宽。如果您正在开发 Google TV 应用程序，您可以使用 GtvVideoView（它支持平滑流）。要了解有关此内容的更多信息，您可以在此处阅读：[https ://developers.google.com/tv/android/articles/hls?hl=en](https://developers.google.com/tv/android/articles/hls?hl=en)

# php - 如何根据特定索引对三维数组进行排序？

> ID：15760972
> 
> 赞同：0
> 
> 时间：2013-04-02T09:46:27.753
> 
> 标签：php, multidimensional-array

即使在谷歌上进行了大量搜索后，我也无法理解如何对 3 维的关联数组进行排序。

实际上，我想根据发布的工作日期对每个用户的警报工作进行排序。

以下是代码：

```
$sql = "SELECT * FROM `bf_alert_stack` WHERE `type` = 'immediately'  order by created desc";

$q   = db_query($sql);

$user_alerts = array();

  while ($row  = db_fetch_array($q)) 
{   
   $user_alerts [$row['uid']]    [$row['alert_id']]  [$row['nid']] = $row['nid'];
} 
```

在 $user_alerts 数组中，$row['nid'] 包含特定用户警报的作业。

当用户当时收到电子邮件警报时，它应该根据日期按排序顺序显示作业。

以下是来自 $user_alerts 数组的示例数据

```
Array
(
    [144320] => Array
        (
            [3568728] => Array
                (
                    [30832] => 30832
                )

            [3568884] => Array
                (
                    [30837] => 30837
                    [30827] => 30827
                    [30828] => 30828
                    [30830] => 30830
                    [30831] => 30831
                    [30832] => 30832
                    [30838] => 30838
                    [30839] => 30839
                    [30826] => 30826
                    [30806] => 30806
                    [30808] => 30808
                    [30807] => 30807
                    [30698] => 30698
                    [30697] => 30697
                    [30601] => 30601
                )

        )

    [144330] => Array
        (
            [3568731] => Array
                (
                    [30827] => 30827
                    [30839] => 30839
                    [30838] => 30838
                    [30837] => 30837
                    [30832] => 30832
                    [30831] => 30831
                    [30830] => 30830
                    [30828] => 30828
                    [30826] => 30826
                    [30806] => 30806
                    [30808] => 30808
                    [30807] => 30807
                    [30698] => 30698
                    [30697] => 30697
                    [30601] => 30601
                )

        )

    [144218] => Array
        (
            [3568753] => Array
                (
                    [30808] => 30808
                )

        )

    [144216] => Array
        (
            [3568732] => Array
                (
                    [30808] => 30808
                )

        )

) 
```

我想根据 row['nid'] 对上面的 user_alerts 数组进行排序，但 row['nid'] 的详细信息在数据库表中。所有 nid 应根据表中存在的 nid 的创建日期重新排列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:03:17.863

这有点令人困惑，但也许偶然这会起作用..？

```
$sql = "SELECT * FROM `bf_alert_stack` WHERE `type` = 'immediately' ORDER BY `created` DESC, `uid` ASC, `alert_id` DESC, `nid` DESC"; 
```

# php - MYSQL 数学运算优先级

> ID：15760978
> 
> 赞同：1
> 
> 时间：2013-04-02T09:46:38.363
> 
> 标签：php, mysql, mathematical-expressions

这是我的代码：

```
$stmt->prepare("UPDATE ".$PapierTableName."  SET nrating=nrating+1,`rating`=(rating+?)/nrating  WHERE `id`=? AND `title`=?");
$stmt->bind_param('iis', $rat,$id,$tit); 
```

我的问题是关于优先级：在这个操作中

```
`rating`=(rating+?)/nrating 
```

将`nrating`使用的是已经增加的那个还是列中存在的那个？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:50:51.760

那已经增加了一个；由于[运算符优先级](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)

> 如有必要，括号可用于强制优先级

# r - 具有特定值的行名和列名

> ID：15760981
> 
> 赞同：4
> 
> 时间：2013-04-02T09:46:46.923
> 
> 标签：r, matrix, rowname

我有这个矩阵，我想得到一个 2 列矩阵，其中一列具有行名，另一列是值为 1 的单元格的列名

```
x

   X1 X2 X3
X1  1 0   1
X2  0 1   0
X3  0 1   1
X4  1 0   0

str(x)
num [1:886, 1:886] 1 0 1 1 1 0 1 1 1 1 
```

我想要这样的矩阵

```
# X1  X1 
# X1  X3   
# X2  X2   
# X3  X2   
# X3  X3   
# X4  X1 
```

哪些是 value=1 的对

在此先感谢，A。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T10:38:14.550

这里有另一个选择：

```
mm <- expand.grid(rownames(mat),colnames(mat))[as.vector(mat==1),]

 Var1 Var2
1    X1   X1
4    X4   X1
6    X2   X2
7    X3   X2
9    X1   X3
11   X3   X3 
```

为了获得 OP display ，我们按第一列排序：

```
 mm[order(mm$Var1),]
   Var1 Var2
1    X1   X1
9    X1   X3
6    X2   X2
7    X3   X2
11   X3   X3
4    X4   X1 
```

我在这里是你的输入，我复制：

```
mat <- data.frame(X1=c(1,0,0,1),X2=c(0,1,1,0),X3=c(1,0,1,0))
rownames(mat)= paste0('X',1:4)

   X1 X2 X3
X1  1  0  1
X2  0  1  0
X3  0  1  1
X4  1  0  0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:24:03.570

你可以这样做：

```
mat <- which(x==1, arr.ind=TRUE)
mat[,"col"] <- names(x)[mat[,"col"]]
mat[,"row"] <- rownames(mat) 
```

这将给出：

```
 row  col 
X1 "X1" "X1"
X4 "X4" "X1"
X2 "X2" "X2"
X3 "X3" "X2"
X1 "X1" "X3"
X3 "X3" "X3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:27:28.960

这是一行答案

```
x
##    X1 X2 X3
## X1  1  0  1
## X2  0  1  0
## X3  0  1  1
## X4  1  0  0

cbind(rownames(x)[row(x) * x], colnames(x)[col(x) * x])
##      [,1] [,2]
## [1,] "X1" "X1"
## [2,] "X4" "X1"
## [3,] "X2" "X2"
## [4,] "X3" "X2"
## [5,] "X1" "X3"
## [6,] "X3" "X3" 
```

# ruby-on-rails-3 - 用 Cucumber 测试的好方法是什么

> ID：15760992
> 
> 赞同：0
> 
> 时间：2013-04-02T09:47:33.877
> 
> 标签：ruby-on-rails-3, cucumber, bdd

我开始学习写 Cucumber 测试，现在我可以写测试了，但是我的测试太傻了；我不知道我应该关注什么而忽略什么。我总是问我的co.op如何用Cucumber写一个好的测试，他们给了我一些建议，但我觉得不够满意。所以，请告诉我您的意见，并给我一些例子，非常感谢！

**编辑**

我有一个带有表格的索引页面，表格的每一行的最后一列有 3 个按钮（编辑、详细信息、删除），表格下方有 1 个按钮创建，导航栏有一个登录表单

那我应该检查什么？

在我看来，我认为我们不应该检查登录功能和导航栏的内容，因为这个控制器中的每个页面都有相同的布局也许我们应该检查总列数、总行数、标题、图标 css、内容按钮的，整个页面的css（表格的边框，宽度，高度，字体系列）......这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:46:15.270

我认为您应该优先考虑页面中的元素，并检查它们。

例如，当您测试登录页面时：

*登录页面的重要元素*

*   用户名、密码文本框
*   登录按钮

不重要的元素（这一切都取决于您的业务需求）

*   取消按钮
*   其他花哨的文字
*   ETC..

然后在 Cucumber 测试中，确保检查用户名、密码文本框和登录按钮的可用性。您可以忽略的其余元素。否则，您将花费不必要的时间来测试不重要的事情。

同样，给定页面的优先级取决于项目的业务需求。

# node.js - 如何在续集中建模一对多关联？

> ID：15760994
> 
> 赞同：15
> 
> 时间：2013-04-02T09:47:34.850
> 
> 标签：node.js, sequelize.js

我是 Sequelize 的新手，我试图弄清楚，我应该如何建模一对多的关系。

我的问题如下：一个学期，多篇论文。

```
var Term = sequelize.define( 'Term', ... );
var Paper = sequelize.define( 'Paper', ... ); 
```

假设我有一个术语。每个学期可以有很多篇论文，我想为我的学期添加/删除论文。我还想拿到这个学期的所有论文。

```
var term;
...
term.getPapers( ... );
term.setPapers( ... );
term.addPaper( paper );
term.removePaper( paper ); 
```

现在，假设我有一张纸。我想为我的论文获取/设置术语。

```
var paper;

...

paper.getTerm();
paper.setTerm(); 
```

使用sequelize如何实现？我已经研究了几个小时的文档，并且还在网上寻找一些胶水，但没有任何结果。我发现这种关联在 sequelize 中记录得很差（一对一和多对多要好得多）。

**更新**：

好吧，几个小时后，我弄清楚了它是如何工作的：

```
Term.hasMany( Paper, { as: 'papers' } );
Paper.hasOne( Term ); 
```

现在我们可以这样做：

```
term.addPaper( paper );
term.removePaper( paper );

paper.getTerm()
  .success( function( term )
  {
    ...
  });
paper.setTerm( term ); 
```

我已经习惯了 Django，而且似乎 Sequelize 在代码和文档方面都不那么成熟......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-11T21:03:20.507

首先，您必须创建关联。你做对了：

```
 Term.hasMany( Paper, { as: 'papers' } );
  Paper.hasOne( Term ); 
```

然后你必须同步这个声明：

```
 sequelize.sync(); 
```

现在持久化数据。您需要先保存对象才能关联它。

```
 term.create()...
  paper1.create()...
  paper2.create()...

  term.setPapers([paper1, paper2]).success(function() {
     // saved!
  }) 
```

参考：[http ://docs.sequelizejs.com/en/1.7.0/docs/associations/#many-to-many-associations](http://docs.sequelizejs.com/en/1.7.0/docs/associations/#many-to-many-associations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:14:43.697

这取决于您如何构建数据库，这会考虑..

```
paper.hasOne(term,{as:"PaperTerm"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-28T20:47:31.113

很好，您已经弄清楚它是如何工作的，但是如果您使用`Paper.belongsTo(Term);`而不是，那将是正确`Paper.hasOne( Term );` 的如果您想了解更多[关于](https://sequelize.org/master/manual/assocs.html#implementation-2)

# asp.net - 在 Apache 2.2.21 中设置 Zend 框架和 mod Asp.net

> ID：15760998
> 
> 赞同：1
> 
> 时间：2013-04-02T09:47:49.007
> 
> 标签：asp.net, apache, zend-framework2

我一直在尝试在 apache 2.2.21 中安装 zend 框架和 mod_aspdotnet。如果我只安装 mod_aspdotnet 而不是 zend，那么一切正常，反之亦然。我需要他们一起跑。任何人都可以建议我一些方法来做到这一点。非常感谢任何帮助。提前致谢。