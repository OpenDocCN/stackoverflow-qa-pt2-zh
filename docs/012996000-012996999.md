# StackOverflow 问答 12996000-12996999

# ios - Cocos2d - 删除opengl绘图而不清除渲染纹理

> ID：12996005
> 
> 赞同：0
> 
> 时间：2012-10-21T07:57:22.200
> 
> 标签：ios, opengl-es, cocos2d-iphone, objective-c-2.0

我试图在这里实现类似聚光灯演示：http: [//www.supersuraccoon-cocos2d.com/2011/09/09/spot-light-demo/](http://www.supersuraccoon-cocos2d.com/2011/09/09/spot-light-demo/)

我设法在渲染纹理中添加了几个聚光灯，但我仍然有一个问题，如何在不清除整个纹理的情​​况下只移除一个聚光灯？

这是 CCSpotLight.m 中的绘图代码：

```
-(void) drawSpotLight 
{   
int segs = 15;
GLfloat *vertices = malloc( sizeof(GLfloat)*2*(segs));
GLfloat *coordinates = malloc( sizeof(GLfloat)*2*(segs));
ccColor4B *colors = malloc( sizeof(ccColor4B)*(segs));

memset(vertices,0, sizeof(GLfloat)*2*(segs));//Set first (3rd param) of the block of memory pointed by vertices to 0

memset(coordinates,0, sizeof(GLfloat)*2*(segs));

colors[0] = ccc4(0, 0, 0, 255);//opaque
for (int i = 1; i < segs; i++)
{
    colors[i] = ccc4(0, 0, 0, 0);//transparent
}

const float coef = 2.0f * (float)M_PI/(segs-2) ;

vertices[0] = self.position.x;
vertices[1] = self.position.y;
coordinates[0] = self.position.x;
coordinates[1] = (contentSize_.height-self.position.y);
for(int i=1;i<=segs;i++)
{
    float rads = i*coef;
    float j = self.spotLightRadius * cosf(rads) + self.position.x;
    float k = self.spotLightRadius * sinf(rads) + self.position.y;

    vertices[i*2] = j;
    vertices[i*2+1] = k;

    coordinates[i*2] = (j);
    coordinates[i*2+1] = (contentSize_.height-k);
}

// Update the render texture
[self.renderTexture begin];

glBindTexture(GL_TEXTURE_2D, (GLuint)self.renderTexture);//bind a named texture to a texturing target (2d texture)
glBlendFunc(GL_ZERO, GL_ONE_MINUS_SRC_ALPHA);

glColorMask(0.0f, 0.0f, 0.0f, 1.0f);//enable and disable writing of frame buffer color components

glVertexPointer(2, GL_FLOAT, 0, vertices);//define an array of vertex data
glTexCoordPointer(2, GL_FLOAT, 0, coordinates);
glColorPointer(4, GL_UNSIGNED_BYTE, 0, colors);

glDrawArrays(GL_TRIANGLE_FAN, 0, segs);

glColorMask(1.0f, 1.0f, 1.0f, 1.0f);
glBlendFunc(CC_BLEND_SRC, CC_BLEND_DST);

[self.renderTexture end];

free(vertices);
free(coordinates);
free(colors);
} 
```

以及 HelloWorldLayer.m 中的实例化代码：

```
renderLayer = [CCRenderTexture renderTextureWithWidth:480
                                                                    height:320];
    renderLayer.position = ccp(240, 160);
    [renderLayer clear:0 
                     g:0
                     b:0
                     a:0.5];
    [[renderLayer sprite] setBlendFunc: (ccBlendFunc) { GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA }];

    [self addChild:renderLayer z:0];

CCSpotLight *spotLight1 = [CCSpotLight initWithRenderTexture:renderLayer
                                                spotLightRadius:60.0f
                                                    renderColor:ccc4(0, 0, 0, 255)
                                                              x:224
                                                              y:160];
    [self addChild:spotLight1 z:1];

//adding another spotlight which should be removed when the user touches the screen
CCSpotLight *spotLight2 = [CCSpotLight initWithRenderTexture:renderLayer
                                                spotLightRadius:60.0f
                                                    renderColor:ccc4(0, 0, 0, 255)
                                                              x:124
                                                              y:160];
    [self addChild:spotLight2 z:1];//for removing it, I tried [spotLight2 removeFromParentAndCleanup:YES] but it didn't work, no change at all 
```

# operating-system - 用餐哲学家的解决方案中的饥饿

> ID：12996012
> 
> 赞同：0
> 
> 时间：2012-10-21T07:58:15.713
> 
> 标签：operating-system, semaphore, monitor

我已经完成了[哲学家就餐](http://en.wikipedia.org/wiki/Dining_philosophers_problem)的解决方案。因为在某个时间点，典型的监视器实现会导致饥饿。我已经完成了[这里给出的餐饮哲学家问题的“礼貌”版本](http://vip.cs.utsa.edu/nsf/pubs/starving/starving.html)

```
monitor diningPhilosophers {
   int[] state = new int[5];
   boolean[] leftHungry = new boolean[5];
   boolean[] rightHungry = new boolean[5];
   static final int THINKING = 0;
   static final int HUNGRY = 1;
   static final int EATING = 2;
   condition[] self = new condition[5];

   public diningPhilosophers {
      for (int i=0;i<5;i++) {
         state[i] = THINKING;
         leftHungry[i] = false;
         rightHungry[i] = false;
      }  
   }   

   public entry pickUp(int i) {
      state[i] = HUNGRY;
      test(i);
      if (state[i] != EATING)
         self[i].wait;
      rightHungry(left(i)) = false;
      leftHungry(right(i)) = false;
   }

   ublic entry putDown(int i) {
      state[i] = THINKING;
      test(left(i));
      if (state[left(i)] == HUNGRY)
         leftHungry[i] = true;
      test(right(i));
      if (state[right(i)] == HUNGRY)
         rightHungry[i] = true;
   }

   private test(int i) {
      if  (state[right(i] != EATING) &&
          (state[i] == HUNGRY) &&
          (state[left(i)] != EATING) &&
             !leftHungry(i) && !rightHungry(i) ) {
             state[i] = EATING;
             self[i].signal;
          }
   }

   private int left(int i) {
      return (i+1)%5;
   }    

   private int right(int i) {
      return (i+4)%5;
   }    

} 
```

那么如果两个相邻的哲学家同时饿了怎么办。因为 test(i) 正在检查它的左右哲学家是否饿了。如果它发现它的相邻的也饿了。这是一种僵局吧？我的意思是他们两个都不能吃，因为他们相邻的哲学家都饿了，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:00:02.363

你是对的。如果两个相邻的哲学家在*彼此的眼中*饿了，就会发生死锁，即。`leftHungry[0] == TRUE && rightHungry[1] == TRUE`.

**但是**，这种状态永远不会发生，因为唯一的时间`leftHungry[x]`or`rightHungry[x]`被设置为调用`TRUE`时，它总是在调用之前，它设置和到。`x``putDown()``x``pickUp()``leftHungry[x]``rightHungry[x]``FALSE`

**例如：** `philosopher0` has`leftHungry[0] == TRUE`和他们的状态是`HUNGRY`，并且`philosopher1`调用`pickUp()`和他们的状态也是 then `HUNGRY`。即使`philosopher1`必须等待，（因为`philosopher2`是`EATING`），`philosopher0`设置`leftHungry[0] == FALSE`，防止任何相邻的哲学家同时*认为*彼此饿了。

# magento - magento 将属性提交到购物车页面

> ID：12996014
> 
> 赞同：0
> 
> 时间：2012-10-21T07:58:50.300
> 
> 标签：magento

我的所有产品都需要选择颜色和尺寸。所以我必须在“常规”选项卡中选择这些意见，这样我就不想再次在“自定义选项”选项卡中设置它们。

例如：在“常规”选项卡中，选择蓝色、红色和粉色作为颜色。选择 8,9 和 10 作为尺寸。而“自定义选项”选项卡什么也没有。所以在前面的产品视图页面中，我如何在选择一种颜色和一种尺寸后将颜色和尺寸的值提交到购物车页面？

有人知道吗？谢谢 。

（我知道，如果我在“自定义选项”选项卡中设置颜色和尺寸，我可以在首页提交值，但我的情况与此不同。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:34:34.857

我不确定，如果我理解正确......如果我理解正确，您想要执行以下操作：您的客户应该根据“尺寸”和“颜色”值选择产品 - 所以目的是了解客户选择的价值观...

这是可配置产品的典型要求。

您必须将每个选项都应用为简单的产品。产品 1：红色，8 / 产品 2：红色，9 / ... / 产品 14：绿色，8 / 产品 15：绿色，9 / ....

然后您必须应用 ONE 可配置产品，选择颜色和尺寸作为“超级”属性，然后将所有简单产品应用到您的可配置产品。

现在您的购物客户必须按颜色和尺寸选择他的衬衫，他的选择将显示在购物车、发票......等中。

# android - 更改单选按钮的位置

> ID：12996015
> 
> 赞同：2
> 
> 时间：2012-10-21T07:59:09.640
> 
> 标签：android, android-layout, android-button, android-checkbox

我可以从左到右更改单选按钮的位置吗？我的意思是绿色选择按钮将在右侧，文本在其左侧。可能吗？（默认按钮左，文本右）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:59:43.067

应该可以使用 getCompoundDrawables() 和 setCompoundDrawables() 重新排列文本周围的可绘制对象。

更进一步，也许您可​​以基于 CheckBox 实现您自己的 CheckBoxRight 小部件，该小部件在调用 super.onDraw() 后在 onDraw() 方法中实现。

最后一种选择是直接从 TextView 构建您自己的小部件，并在维护来自 onClick() 事件处理程序的内部状态后适当地 setCompoundDrawables() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T23:21:07.347

单选按钮不像您（或几乎任何人）想要的那样灵活。您可以构建自己的自定义小部件，如果您不熟悉这样做可能会令人生畏。或者你可以做我最喜欢的解决方法。

像处理常规按钮一样处理 RadioButton——不要使用 RadioGroup 功能。现在*您*必须手动控制检查。通过消除 RadioGroup，您可以随意创建布局。

这是一个示例 xml 布局，它在 TableLayout 中使用 RadioButtons，每个按钮的左侧都有文本，右侧有一个图像：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TableRow
        android:id="@+id/row_1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="button 1" />

        <RadioButton
            android:id="@+id/rb_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/pretty_pic_1" />
    </TableRow>

    <TableRow
        android:id="@+id/row_2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="button 2" />

        <RadioButton
            android:id="@+id/rb_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/pretty_pic_3" />
    </TableRow>

    <TableRow
        android:id="@+id/row_3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="button 3" />

        <RadioButton
            android:id="@+id/rb_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="false" />

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/pretty_pic_3" />
    </TableRow>

</TableLayout> 
```

但你还没有完成。您现在必须手动处理您的单选按钮。我喜欢这样做：

```
class FooActivity extends Activity {
RadioButton m_rb1, m_rb2;
TableRow m_row1, m_row2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    m_rb1 = (RadioButton) findViewById(R.id.rb1);
    m_rb2 = (RadioButton) findViewById(R.id.rb2);

    m_row1 = (TableRow) findViewById(R.id.row_1);
    m_row1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            m_rb1.setChecked(true);
            m_rb2.setChecked(false);            
        }
    });

    m_row2 = (TableRow) findViewById(R.id.row_2);
    m_row2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            m_rb1.setChecked(false);            
            m_rb2.setChecked(true);
        }
    });

} 
```

}

请注意，我希望用户通过选择文本、图片或按钮本身来选择 RadioButton。所以我把整个 TableRows 做成了可点击的对象。

希望这可以帮助！

# html - 关于应用程序设计 winrt xaml 的建议

> ID：12996016
> 
> 赞同：0
> 
> 时间：2012-10-21T07:59:14.140
> 
> 标签：html, xaml, windows-8, windows-runtime, winrt-xaml

我第一次深入研究 winrt/xaml/html5 开发，所以任何一般性的指针都非常感激地接受。我很欣赏这是一个非常开放的问题，基本上是一个思想转储，但欢迎所有意见。

我被要求研究开发一个问卷类型的应用程序来替代当前的纸质问卷。应用程序将在可能/可能没有在线/wifi 访问的 win8 平板设备上运行。

当前设置是“主”系统将问题存储在数据库中。一个简单的电子表格样式输入表单，训练有素的操作员在其中接收纸质问卷并输入数据。我们的目标是消除额外的输入步骤并移除纸张。

基本用户要求是

*   问题应该可以根据需要进行更新——因此问题必须存储在 win8 设备上的本地数据存储中——从现有的主系统数据库导出。由于平板电脑设备可能无法在线访问，因此可以召回平板电脑进行手动更新，而不是通过 OTA 推出新问题）

*   答案可能采用是/否、量表（不快乐/适度快乐/欣喜若狂...）、自由文本输入的形式。

*   部分应该能够被跳过/分支。因此，对 Q2 回答“是”分支到第 2a 部分，对第 2b 部分回答“否”等。

*   将答案存储在本地数据存储中，并提供某种导出方法以将数据导入主数据库（无法保证 wifi，但所有位置都将具有物理 USB 连接，可用于运行要导入数据的“主”应用程序的桌面） .

由于问题是动态的，因此必须在运行时生成页面内容和输入控件 - 还是在问题发生变化时生成和存储？

所以 Q1 可能有 Checkbox 的输入类型 Q2 可能有下拉列表的输入类型 Q2a 可能是自由文本输入。回答 Q2 可能会导致跳到 Q5 等。所有这些规则都将存储在问题数据库中。

问题提示和输入类型将存储在本地数据库中

XAML 是否可以隐藏和显示“部分” - 与“显示部分 2a 或 2b”相关，具体取决于 Q2 等的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:13:47.070

> XAML 是否可以隐藏和显示“部分” - 与“显示部分 2a 或 2b”相关，具体取决于 Q2 等的答案。

是的。

您通过转换器将该部分的可见性绑定到问题的答案：

```
<StackPanel Visibility="{Binding Answer2, Mode=OneWay, Converter={StaticResource AnswerToVisibility})">
    ... Section UI
</StackPanel> 
```

*（为了简单起见，我在`StackPanel`这里使用）*

然后你的转换器需要看起来像这样：

```
public class DateConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // cast value to the correct type
        return value == condition ? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# javascript - 具有每个角色视图的客户端模板

> ID：12996018
> 
> 赞同：4
> 
> 时间：2012-10-21T07:59:25.340
> 
> 标签：javascript, angularjs, template-engine, security-roles

我一直在阅读`AngularJS`它似乎很有希望，这是我唯一想要弄清楚的，不是特定于框架的，但它对于客户端模板是通用的。

假设您有一个具有多个角色的 Web 应用程序，每个角色可能包含附加功能，因此您不能为每个角色使用不同的模板，这将被认为是不好的做法，所以我的问题是使用客户端的最佳方法是什么同时模板，不将您的模板暴露给客户，例如，在`AngularJS`我不必使用`ng-show`？在服务器端生成模板的最佳工具是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T23:24:49.730

您将要在服务器端过滤该医疗数据，然后在 Angular 中相应地显示。ng-show 和 ng-hide 只是切换仍然存在于 DOM 中的元素的显示。换句话说，（我假设）受 HIPAA 保护的数据只是坐在那里任何人都可以“查看源”它。

即使您*确实*想出了一种方法来彻底删除那些您不想根据角色显示的 DOM 元素，也没关系，因为您仍然在技术上将这些数据传输到客户端，并且一个精明的错误 - doer 将简单地嗅探数据包并获取受保护的数据。

事实上，你所有的安全和角色检查都应该在服务器上完成。在任何 JS 框架中，无论是否有 Angular，您都不能相信 JavaScript 应用程序可以在客户端上执行此操作。

至于基于角色隐藏字段（可能是因为您在这些字段中没有要显示的数据），ng-show 或 ng-hide 将是您的朋友。偶尔 ng-switch 会做。如果您出于某种原因需要完全不同的模板，那么我会在每种情况下使用带有自定义指令的 ng-switch，这将允许您模板化每个角色下的内容。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T05:54:54.527

Blesh 仅向在服务器端具有适当角色的用户提供数据是正确的，但听起来您想重用客户端 UI 的各个部分。

在 AngularJS 中，您可以`ng-include`为不同的数据使用和构建不同的部分。所以你可以在你的“医生”和“护士”视图中写这样的东西：

```
<div ng-include="'allergies.html'"></div> 
```

然后有一个单独的 HTML 文件，名为`allergies.html`：

```
<p>Allergy info: {{someData}}</p> 
```

另一种选择是使用指令。

# forecasting - 时间序列预测包

> ID：12996021
> 
> 赞同：2
> 
> 时间：2012-10-21T08:00:11.700
> 
> 标签：forecasting

python中是否有适合时间序列（分析和预测）的包？

它们包括哪些方法？

R 中有一个包含许多功能的预测包。Python中是否有类似的包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:45:06.500

这是一个有趣的问题。

我发现 Python 中有 2 个包：

```
Pandas and you can use for forecasting:
Regression
Some EMA
See more: http://pandas.pydata.org/

Statmodels you can use for forecasting:
AR
ARMA 
VAR
See more: http://statsmodels.sourceforge.net/ 
```

但是我不知道是否所有来自 R 的预测包都可以在 Python 中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:15:00.560

检查`pandas`包裹。[http://pandas.pydata.org/](http://pandas.pydata.org/)。也许这就是你要找的

# mysql - 如何在mysql中合并多个选择

> ID：12996023
> 
> 赞同：0
> 
> 时间：2012-10-21T08:00:27.303
> 
> 标签：mysql, select, join, subquery

我有几个表，命名如下：

```
table_2012_12
table_2012_10
table_2012_07 
```

两者具有相同的结构：

```
id
order_id
account_id 
```

我知道我必须执行这些查询：

```
SELECT * FROM table_2012_12 where id=1
SELECT * FROM table_2012_12 where id=5  
SELECT * FROM table_2012_10 where id=1
SELECT * FROM table_2012_07 where id=22 
```

使用单个查询的最佳（性能）方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:01:43.310

操作员会这样做`UNION`。见：[http ://dev.mysql.com/doc/refman/5.6/en/union.html](http://dev.mysql.com/doc/refman/5.6/en/union.html)

```
SELECT * FROM table_2012_12 where id=1
UNION ALL
SELECT * FROM table_2012_12 where id=5  
UNION ALL
SELECT * FROM table_2012_10 where id=1
UNION ALL
SELECT * FROM table_2012_07 where id=22 
```

通常，您不应该只写`UNION`但是`UNION ALL`. `UNION`具有加入查询结果以及过滤掉任何重复行的效果。`UNION ALL`将简单地合并查询结果，并保留所有行。这效率更高

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:02:15.823

鉴于这种结构，您无法进行任何优化，但您可以进行[联合](http://dev.mysql.com/doc/refman/5.0/en/union.html)查询：

```
SELECT * FROM table_2012_12 where id=1
UNION SELECT * FROM table_2012_12 where id=5  
UNION SELECT * FROM table_2012_10 where id=1
UNION SELECT * FROM table_2012_07 where id=22 
```

`UNION`将自动删除重复项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T08:05:19.443

```
SELECT * FROM table_2012_12 where id=1 OR  id=5
UNION ALL SELECT * FROM table_2012_10 where id=1
UNION ALL SELECT * FROM table_2012_07 where id=22 
```

# android - Android图像选择器ImageView不起作用

> ID：12996025
> 
> 赞同：1
> 
> 时间：2012-10-21T08:01:03.060
> 
> 标签：android, android-imageview, bitmapfactory

我的android应用程序在我选择图片的那一刻就挂了，没有异常，我不明白为什么，请帮助下面的代码

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.widget.Button;
import android.widget.TextView;
import android.view.View;
import android.view.View.OnClickListener;
public class SelectPhoto extends Activity implements OnClickListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photopick_layout);
        Button btn=(Button)findViewById(R.id.clickme);

        btn.setOnClickListener(this);

    }

     public void onClick(View arg0) {
           // TODO Auto-generated method stub
           Intent intent = new Intent(Intent.ACTION_PICK,
             android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
           startActivityForResult(intent, 0);
          }

     @Override
     protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      // TODO Auto-generated method stub

      super.onActivityResult(requestCode, resultCode, data);
      TextView textTargetUri = (TextView)findViewById(R.id.targeturi);
      if (resultCode == RESULT_OK){
       Uri targetUri = data.getData();
       textTargetUri.setText(targetUri.toString());
       Intent mi = new Intent(this , ImgDisplay.class);
       mi.putExtra(getString(R.string.app_name),targetUri);
       startActivity(mi);

      }

     }
     } 
```

**Imagedisplay Activity**这是它应该从其 uri 中显示所选图像的部分

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.widget.ImageView;

public class ImgDisplay extends Activity {
    private String a;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_display);

 a =getIntent().getStringExtra(getString(R.string.app_name));

 Uri myUri = Uri.parse(a);

 ImageView b=(ImageView) findViewById(R.id.image_view);
 Bitmap myBitmap = BitmapFactory.decodeFile(a);
 b.setImageBitmap(BitmapFactory.decodeFile(a));
 b.setImageBitmap(myBitmap);

    }

} 
```

**照片选择布局**这是第一个要求您从图库中选择图像的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
   android:background="#00AEC5">

    <RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:id="@+id/btn2"
>

    <TextView
  android:id="@+id/targeturi"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  />

 <Button android:id="@+id/clickme" 
 android:text="@string/pick" 
 style="@style/style1"
android:layout_centerInParent="true"
 ></Button>

  </RelativeLayout>
</LinearLayout> 
```

**Image_display layout* 这是显示图像的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
   android:background="#00AEC5">

    <ImageView android:id="@+id/image_view"     
  android:layout_width="wrap_content"  
  android:layout_height="wrap_content"  
  android:adjustViewBounds="true"  
  android:maxWidth="42dp"  
  android:maxHeight="42dp"  
  android:scaleType="fitCenter"  
  android:layout_marginLeft="3dp"  

  ></ImageView>
</LinearLayout> 
```

我敢肯定这很容易，但我是新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:59:57.590

好的，谢谢大家，我知道这很可耻，但唯一的问题是我忘记在清单文件中包含“ImgDisplay”活动:) 否则代码工作得很好:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:13:31.957

您应该检查 onActivityResult 中的 requestCode（例如[此处](http://developer.android.com/training/basics/intents/result.html)），如果结果属于您的请求，则处理该结果，仅在不属于您的请求时才调用 super。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:47:08.367

利用

> 意图.ACTION_GET_CONTENT

反而。这是我完美运行的图像选择器代码。

```
public class GalleryActivity extends Activity {

static Bitmap bmp;
ImageView GalImg;
Uri imageUri;
protected static final int PHOTO_PICKED = 0;
// values for scaling image
    protected int outputX = 320;
    protected int outputY = 480;
    protected int aspectX = 2;
    protected boolean scale = true;
    protected int aspectY = 3;
    Bundle extra;

@Override
protected void onCreate(Bundle savedInstanceState) {
    Log.i("gal", "oncreate");
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.gallery_screen);
     extra = getIntent().getExtras();
    Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
    photoPickerIntent.putExtra("crop", "true");
    photoPickerIntent.putExtra("aspectX", aspectX);
    photoPickerIntent.putExtra("aspectY", aspectY);
    photoPickerIntent.putExtra("outputX", outputX);
    photoPickerIntent.putExtra("outputY", outputY);
    photoPickerIntent.putExtra("scale", scale);
    File photo = new File(Environment.getExternalStorageDirectory(), System.currentTimeMillis() + ".jpg");      
    photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
    imageUri = Uri.fromFile(photo);
    photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
    photoPickerIntent.setType("image/*");
    startActivityForResult(photoPickerIntent, PHOTO_PICKED);

}

@Override
protected void onActivityResult(int requestCode, int resultcode, 
        Intent intent) {
    super.onActivityResult(requestCode, resultcode, intent);
    Log.i("gal", "onActivity");
    if (requestCode == 0) {

        if (intent != null && resultcode == RESULT_OK) {
            Log.i("gal", "if request ok");
            //Uri selectedImage = intent.getData();// fetching uri of selected image                                                        // image

            //Bitmap bMap = (Bitmap) intent.getExtras().get("data");

            /*String[] filePathColumn = { MediaStore.Images.Media.DATA };// string data of image                                                                            // containing

            Cursor cursor = getContentResolver().query(selectedImage,filePathColumn, null, null, null);
            cursor.moveToFirst();
            // The cursor query returns with the path, but you don't know
            // which column it's in until you use the columnIndex code.
            // That simply gets the number of the column based on its name,
            // the same one used in the filtering process.
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);// file path of image

            cursor.close();//Closes the Cursor, releasing all of its resources 

            bmp = BitmapFactory.decodeFile(filePath);*/

            //saving this bitmap into static photo which will have camera pic if camera is called otherwise gallery 
            //is selected and gallery image gets saved in it

            //PlayMenuActivity.photo=bmp;========
            //PlayMenuActivity.photo=bMap;

             Uri selectedImage = imageUri;
             getContentResolver().notifyChange(selectedImage, null);                
             ContentResolver cr = getContentResolver();
             Bitmap bitmap;
             try {
                 bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, selectedImage);  
                 PlayMenuActivity.photo=bitmap;
                 Log.i("gal",String.valueOf(bitmap));
                 Log.i("photo", "data.getAction() is not null. setting image.");

             } catch (Exception e) {
                 //Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT).show();
                 Log.i("photo", e.toString());
             }

            Intent i=new Intent(GalleryActivity.this,ShowActivity.class);
            i.putExtra("category","gallery");
            startActivity(i);

        } else {
            Log.i("Status:", "Photopicker canceled");
        }

    }
} 
```

希望这可以帮助 。

# cmake - 如何使用命令行编译 VST 3 或音频单元？

> ID：12996027
> 
> 赞同：0
> 
> 时间：2012-10-21T08:01:14.483
> 
> 标签：cmake, audiounit, vst

我想制作一个音频插件，作为音频单元或 VST 3。但是，在这两个框架下编译插件似乎是一个非常重量级的过程，仅提供 XCode 或 Visual Studio 项目文件作为示例。是否有使用 Makefile 或 CMake 脚本编译的准系统构建示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:22:59.667

您可以随时查看 Xcode 使用的标志，并通过 CMake 将它们提供给 gcc。然而，实际的构建过程通常比构建工具和依赖分析器本身花费更多的时间。众所周知，C++ 编译器非常慢。

# bash - Bash 脚本：将带有引号变量的 find 命令输出到数组

> ID：12996037
> 
> 赞同：0
> 
> 时间：2012-10-21T08:02:10.907
> 
> 标签：bash, shell

我正在尝试将 find 命令的输出存储到数组中。

我尝试了不同的东西，但似乎没有任何效果，其中一些在下面的注释行中。我猜问题在于**“${findNameCmdSubDir[@]}”**正在被标记化，并且打算从搜索中排除的目录被忽略，并且所有目录都被列出。

如果我给出 find 命令而不将它传递给数组，即普通的 find 命令，我会看到列出所有其他目录的预期输出，而没有排除。

```
#! /bin/bash
android_path=$1
excludeDirFromSearch=( doc build test unit-test script hardware prebuilt device . )
let "dirCount = 0"

findNameCmdSubDir=()
for dir in "${excludeDirFromSearch[@]}"; do
    if [ $((dirCount++)) -eq ${#excludeDirFromSearch[@]} ]; then
            findNameCmdSubDir+=(-name "${dir}*")
    else
            findNameCmdSubDir+=(-name "${dir}*" -prune -o)
    fi
done

searchSubDirectories=()
searchSubDirectories=( $(find "${android_path}" -mindepth 1 -maxdepth 1 \
"${findNameCmdSubDir[@]}" -type d ) ) <<-- Not Working!
#find "${android_path}" -mindepth 1 -maxdepth 1 "${findNameCmdSubDir[@]}" \
#    -type d | while read line; do
#        echo "$line"
#done  <-- Not working
find "${android_path}" -mindepth 1 -maxdepth 1 "${findNameCmdSubDir[@]}" \
    -type d -print <-- works as expected !

echo "${searchSubDirectories[@]}" 
```

**更新**

我尝试转义双引号，但仍然没有运气

```
searchSubDirectories=( $(find "${android_path}" -mindepth 1 -maxdepth 1 \"${findNameCmdSubDir[@]}\" -type d ) ) <<-- Not Working! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:19:13.653

定义“不工作”。您期望/想要达到的结果是什么？实际结果是什么？

如果`find`打印带有空格的路径并且您想将它们放入一个新数组中，请尝试使用[进程替换](http://tldp.org/LDP/abs/html/process-sub.html)而不是[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)：

```
findopts="-mindepth 1 -maxdepth 1 -type d"
...
searchSubDirectories=()
while read dir; do
  searchSubDirectories+=("$dir")
done < <(find "${android_path}" $findopts "${findNameCmdSubDir[@]}") 
```

注意两个`<`字符之间的空格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:31:59.243

问题出在这里

```
searchSubDirectories=( $(find "${android_path}" -mindepth 1 -maxdepth 1 \
"${findNameCmdSubDir[@]}" -type d ) ) 
```

你`-print`最后错过了一个。

* * *

另外，关于这个块

```
for dir in "${excludeDirFromSearch[@]}"; do
    if [ $((dirCount++)) -eq ${#excludeDirFromSearch[@]} ]; then
            findNameCmdSubDir+=(-name "${dir}*")
    else
            findNameCmdSubDir+=(-name "${dir}*" -prune -o)
    fi
done 
```

摆脱这个

```
if [ $((dirCount++)) -eq ${#excludeDirFromSearch[@]} ]; then
            findNameCmdSubDir+=(-name "${dir}*") 
```

你不需要它。您需要`-prune -o`所有排除的目录，即您完成的命令字符串应该具有这种形式

```
 find -name EXCLUDE1 -prune -o -name EXCLUDE2 -prune -o -type d -print 
```

将此与您的想法进行比较（这不会按您的预期工作）

```
 find -name EXCLUDE1 -prune -o -name EXCLUDE2 -prune -type d 
```

# objective-c - UIActivityIndi cator 未使用此代码显示在导航栏中

> ID：12996039
> 
> 赞同：-1
> 
> 时间：2012-10-21T08:02:32.433
> 
> 标签：objective-c, ios, multithreading, ios6, uiactivityindicatorview

我尝试使用以下代码在此 MapView 中的 NavigationBar 上显示 UIActivityIndi​​cator。但是，无论我尝试哪种方式，我都无法展示它。这里有什么诀窍？另外，我正在尝试从服务器获取地图注释并在后台显示在地图上，这是这样做的方法吗？

```
 - (void)viewDidLoad
 {
  [super viewDidLoad];

  self.activityIndicatorView = [[UIActivityIndicatorView alloc]                            
              initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
  self.activityIndicatorView.hidesWhenStopped = YES;
  self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc]
                                    initWithCustomView:self.activityIndicatorView];

 [self.activityIndicatorView startAnimating];
 [self performSelectorInBackground:@selector(loadMapAnnotations) withObject: nil];
 [self.activityIndicatorView stopAnimating];
 }

 //=========================================================================
 -(void)loadMapAnnotations
 {
   self.mapView.showsUserLocation = YES;
   if(self.vManager = [VendorManager getVendorManager])
   {
     NSLog(@"VendorManager = %@",[self.vManager description] );

     [self.vManager vendorsNearLocation:userLocation block:^(NSArray *vendors, 
      NSError *error)
      {
          if(vendors && [vendors count])
          {
             for (id v in vendors)
             {
                 Vendor *aVendor = [[Vendor alloc] initWithAttributes:v];
                 NSLog(@"Vendor from Vendors = %@",[aVendor name]);
                 [self.mapView addAnnotation:aVendor];
              }
         }
         else
         {
             NSLog(@"Failed to get vendors: %@", [error description] );
         }

      }];
     }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:06:38.387

您在显示活动指示器后立即隐藏它。

```
[self.activityIndicatorView startAnimating];
[self performSelectorInBackground:@selector(loadMapAnnotations) withObject: nil];
[self.activityIndicatorView stopAnimating]; 
```

问题是你认为`performSelectorInBackground:withObject:`等待方法完成 - 我真的不明白你为什么认为它这样做，因为它*的名字隐含着它的异步行为......*

尽管如此，将`[self.activityIndicatorView stopAnimating];`调用移动到回调块将解决这个“问题”。

# jquery - jquery .aucomplete 限制数组错误

> ID：12996041
> 
> 赞同：0
> 
> 时间：2012-10-21T08:03:19.373
> 
> 标签：jquery, limit, jquery-autocomplete

我正在使用以下代码：

```
$(function(){
        $(".aucomplete").live("keyup", function(){
            var all_analysts = [<TMPL_VAR ALL_TARGETS>];
            $(this).autocomplete({
                    source: all_analysts, //local lookup values
                    delay: 0
            });
        });
    }); 
```

并且“ALL_TARGETS”包含一个字符串，例如：'X'、'Y'、'Z'。

将字符串限制为 1000 个项目时，一切正常。将字符串限制为 5000 个项目时，aucomplete 不起作用，并且在 chrome 上我收到以下错误：“Uncaught SyntaxError: Unexpected string”（在“var all_analysts = [];”行下）。

（firefox 和 Iexplorer 不显示错误，但 aucomplete 仍然不起作用）。

有谁知道可能是什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:55:57.280

我认为您的问题出在自动完成的源属性上，在 jquery 自动完成中，源不是它将在内部搜索的列表，而是服务器的路径，它将使用包含结果的 json 列表进行响应，因此在您的情况下它应该看起来和这个相似

```
$(function(){
    $(".aucomplete").each( function(){
        var all_analysts_path = /path/to_your/server_side_method_or_controller;
        $(this).autocomplete({
                source: all_analysts_path, //local lookup values
                delay: 0
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:09:18.357

一种解决方法是使用[远程功能](http://jqueryui.com/autocomplete)绕过任何限制

```
$(function(){
        $(".aucomplete").live("keyup", function(){
            var all_analysts = [<TMPL_VAR ALL_TARGETS>];
            $(this).autocomplete({
            minLength: 2,
            source: function( request, response ) {
                var term = request.term;
                if ( term in cache ) {
                    response( cache[ term ] );
                    return;
                }
                //Return part of your big array
                $.getJSON( "search.php", request, function( data, status, xhr ) {
                    cache[ term ] = data;
                    response( data );
                });
            },
            delay: 0
            });
        });
    }); 
```

检查 JQueryUI 文档，有几个远程功能[http://jqueryui.com/autocomplete/#remote-with-cache](http://jqueryui.com/autocomplete/#remote-with-cache)

# qt4 - QSettings 是否会再次写入设置文件，即使内容没有更改？

> ID：12996044
> 
> 赞同：0
> 
> 时间：2012-10-21T08:03:30.373
> 
> 标签：qt4

对于以下代码，在类的析构函数中：

```
QSettings sets;
sets.setValue ("Category/Name", "abc"); 
```

设置文件会再次写入吗？

或者我应该这样做以减少磁盘访问：

```
if (sets.value ("Category/Name") != "abc") 
   sets.setValue (...); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:26:49.110

`QSettings::setValue`即使设置没有更改，调用也会强制写入设置文件。因此，如果您试图阻止写入设置文件，建议您使用第二种方法。

# php - apply_filters 有什么作用？

> ID：12996045
> 
> 赞同：2
> 
> 时间：2012-10-21T08:03:37.067
> 
> 标签：php, wordpress

我有一个这样的场景，因为它是一个大代码，我以一种简单的方式问这个问题：

在一个名为 的文件`One.php`中，我有这样的内容：

```
add_filter('eshopaddtocheckout','eshop_extras_checkout');

function eshop_extras_checkout($echo){
    //blah blah..   
} 
```

在一个文件中`Two.php`，我有这样的东西：

```
$echo = apply_filters('eshopaddtocheckout',$echo); 
```

我的疑问是：

1.  我不明白如何`Two.php`与`One.php`文件建立联系？我什至没有找到使用类似文件`include One.php`内部的内容的行`Two.php`（但该功能在两个文件之间完美运行）

2.  apply_filters 是做什么的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T08:06:58.097

没有php函数`apply_filters`。它必须由您正在使用的一些附加软件定义；也许是wordpress？如果是这样，这里有一个答案可能会有所帮助：[apply_filters(...) 实际上在 WordPress 中做了什么？](https://stackoverflow.com/questions/2270989/what-does-apply-filters-actually-do-in-wordpress)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:03:41.043

您可以使用 WordPress 注册过滤器，将名称和函数传递给`add_filter`. 这些可以包含您希望在使用某些数据之前对其执行的操作。在您的示例中`apply_filters`，使用参数调用这些。`$echo`

有关更多详细信息，请参阅[有关过滤器的 WordPress 文档。](http://codex.wordpress.org/Plugin_API#Filters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-04T18:44:07.803

如前所述，没有称为 apply_filters 和 do_action 的 PHP 函数。这些是 Wordpress 事件驱动的钩子；专门用于扩展。

为了更好的理解，请参考： [https ://wpshout.com/apply_filters-do_action/](https://wpshout.com/apply_filters-do_action/)

希望这可以帮助。

# c# - 如何根据调用方法的调用（按钮）发送方（按钮＃）操作变量名称？

> ID：12996052
> 
> 赞同：5
> 
> 时间：2012-10-21T08:05:20.453
> 
> 标签：c#, winforms

我的 C# Winform 面板中有一堆文本框。每行文本框的命名如下：

> tb1 tbNickName1 组合框
> 1 tb2 tbNickName2 组合框2
> tb3 tbNickName3 组合框3

等等。

我在每一行文本框旁边都有一个按钮。但不是让按钮指向每个按钮的不同事件，我想将按钮指向 button1_Click 事件并让它在那里完成所有处理。我知道怎么做，我所有的按钮都指向 button1_Click 事件。

但是我需要能够确定从哪个按钮调用它（我可以这样做），但是我需要操纵事件中文本框的名称，以便我可以根据我所在的行进行处理/我从中调用的按钮。

例如，如果我在 tb2 tbNickName2 comboBox2 文本框所在的第 2 行，那么我需要能够让 button1_Click 事件知道这一点并自动将 tb2 tbNickName2 comboBox2 值分配给我在下面的示例中使用的 tmp 变量.

```
private void button1_Click(object sender, EventArgs e)
{
       Button bt = (Button) sender; //will return 'button1'

       string tmpEmail = null;
       string tmpNickName = null;
       string tmpGroup = null;

       //I don't want to hard code the tb1.Text value here, I want to have
       // the namechange based on which (Button) sender it was called from.

       // For example button1 should assign all the
       // tb1    tbNickName1   comboBox1 values

       //If called from button2, then it should assign the
       //tb2    tbNickName2   comboBox2 values instead

       //How can I do this so tb1.Text is based off of the button # that I am 
       //calling for example tb(bt).Text would be cool but that does not work.

       tmpEmail = tb1.Text; //What do I change tb1.Text to based on button #?

       tmpNickName = tbNickName1.Text; //What do I change tbNickName1.Text to?

       tmpGroup = comboBox1.Text;//What do I change comboBox1.Text to?
} 
```

我知道我没有很好地解释这一点，但这是我能做的最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:18:15.977

您可以执行以下操作（迭代面板中的控件）：

```
 //Get the number of the button control (last digit of the name)
   string strNum = bt.Name.Substring(bt.Name.Lenght -2);
   foreach(Control ctrl in myPanel.Controls)
    {
        if(ctrl is ComboBox) {
           if(ctrl.Name.EndsWith(strNum)) {
             //Do Something with your found ComboBox ...
            }
         }
    } 
```

代码未经测试，但应该给你一个想法......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:27:37.103

```
Button button = sender as Button;
string buttonIndex = button.Name.Substring(6);
string tempEmail = (this.Controls["tb" + buttonIndex] as TextBox).Text;
string tmpNickName = (this.Controls["tbNickName" + buttonIndex] as TextBox).Text;
string tmpGroup = (this.Controls["comboBox" + buttonIndex] as ComboBox).Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:15:42.307

在按钮上，添加 CommandArgument-Property，它看起来像这样

```
bt1.CommandArgument = "1";
bt2.CommandArgument = "2"; 
```

在您的 EventHandler 中，您阅读 CommandArgument 并采取相应措施

```
 private void button1_Click(object sender, EventArgs e)
    {
        Button bt = (Button) sender;
        if(bt.CommandArgument == "1") {
            // bt1 was clicked, handle stuff accordingly
        } else if(bt.CommandArgument == "2") {
            // bt2 was clicked..
        } else {
            //handle rest of possible cases
        }
    } 
```

这只是伪代码，但我想你可以看到这是怎么回事。但是请记住，您的变量命名远非最佳。为您的变量和控件选择名称，这些名称可以为您提供任何类型的信息，而不仅仅是用数字命名它们。如果您稍后查看代码并尝试理解它，那将对您有很大帮助。就像这样，也尝试找到有意义的 CommanArgument-values。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-21T08:21:05.270

首先，为了您自己、我们以及其他任何查看您的代码的人，请更改您的命名约定。

至于解决方案，我建议您在构建复选框和文本框时将它们的引用放入字典中。使按钮包含您在其`CommandArgument`. 现在您可以通过访问字典来检索该行。

例如，在您的构造函数中，您将添加类似这样的内容

```
_rowDictionary = new Dictionary<string, Row> {
    { "identifier of first line", new Row { descriptiveNameOfFirstTextBox, descriptiveNameOfFirstTextBox, descriptiveNameOfButton } },
    // ...
};
descriptiveNameOfButton.CommandArgument = "identifier of first line"; 
```

然后，在您的事件处理程序中

```
Button senderButton = (Button) sender;
Row r = _rowDictionary[senderButton.CommandArgument]; 
```

在这里，我使用了一些容器类`Row`。你可能不需要它

```
class Row {
    TextBox textBoxForInputOfA { get; set; }
    TextBox textBoxForInputOfB { get; set; }
    Button buttonForDoingWhatItDoes { get; set; }
} 
```

# java - 使用反射设置和获取的性能

> ID：12996053
> 
> 赞同：10
> 
> 时间：2012-10-21T08:05:43.647
> 
> 标签：java, reflection

`java.lang.reflect.Field` `get`使用反射（和`set`函数）而不是调用对象本身的`set`and来设置和获取对象属性`get`会导致任何显着的性能差异吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:08:09.500

是的，基准测试很容易在 15 分钟内编写完成。

生成的代码更好，即使你缓存了反射访问器，我也试过了。

这是在 Java 7 64 位下：

```
import java.lang.reflect.Field;

class Data {
   public double _value;
   public double getValue()               { return _value; }
   public void   setValue( double value ) { _value = value; }
}

public class Reflect {
   public static final int LOOP_COUNT = 100_000_000;
   public static void main( String[] args ) throws Throwable {
      Data d = new Data();
      long start = System.currentTimeMillis();
      for( int i = 0; i < LOOP_COUNT; ++i ) {
         d.setValue( i );
      }
      System.err.println( System.currentTimeMillis() - start );
      Field field = Data.class.getDeclaredField( "_value" );
      start = System.currentTimeMillis();
      for( int i = 0; i < LOOP_COUNT; ++i ) {
         field.set( d, new Double( i ));
      }
      System.err.println( System.currentTimeMillis() - start );

      field.setAccessible( true ); // Optimization
      start = System.currentTimeMillis();
      for( int i = 0; i < LOOP_COUNT; ++i ) {
         field.set( d, new Double( i ));
      }
      System.err.println( System.currentTimeMillis() - start );
   }
} 
```

结果：

```
20
37381
1677 
```

比率接近 1870，没有设置可访问标志。设置它会使比率下降到 83。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:28:25.623

是的，它确实会产生显着的性能差异，并且网络上有很多基准测试结果可以支持这一点。

例如： http: [//www.cowtowncoder.com/blog/archives/2007/02/entry_32.html](http://www.cowtowncoder.com/blog/archives/2007/02/entry_32.html) - 这似乎是说对 a `get`or`set`方法的反射调用比直接访问/更新字段慢约 50 倍. （并且使用方法获取/设置`Field`仍然更慢。）

现在这些结果相当陈旧，并且（显然）反射的性能在最近的 HotSpot JVM 中得到了改进。即便如此，粗略的经验法则是“一个数量级*或更*慢”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T19:15:51.430

我运行了一个稍微修改过的版本：

```
public class Test {

    private static class Data {

        public double _value;

        public void setValue(double value) {
            _value = value;
        }
    }

    public static final int LOOP_COUNT = 100_000_000;

    public static void main(String[] args) throws Throwable {

        Data d = new Data();

        Random testing = new Random(5);
        long start = System.currentTimeMillis();
        for (int i = 0; i < LOOP_COUNT; ++i) {
            d.setValue(testing.nextDouble());
        }
        System.err.println(System.currentTimeMillis() - start);

        Field field = Data.class.getDeclaredField("_value");

        testing = new Random(5);
        start = System.currentTimeMillis();
        for (int i = 0; i < LOOP_COUNT; ++i) {
            field.setDouble(d, testing.nextDouble());
        }
        System.err.println(System.currentTimeMillis() - start);

        testing = new Random(5);
        field.setAccessible(true); // Optimization
        start = System.currentTimeMillis();
        for (int i = 0; i < LOOP_COUNT; ++i) {
            field.setDouble(d, testing.nextDouble());
        }
        System.err.println(System.currentTimeMillis() - start);
    }
} 
```

结果（在 Java 1.8.0_121 和我的电脑上）：

```
2714
2741
2625 
```

似乎反射实际上更快。没想到这...

# assembly - 当我在 NASM 的另一个部分中定义标签时，如何在一个部分中调用标签？

> ID：12996055
> 
> 赞同：0
> 
> 时间：2012-10-21T08:05:47.723
> 
> 标签：assembly, nasm

```
section dseg
bits 16
gdt:
code_descriptor:     
.......

section cseg
bits 16
start:
    mov ax, seg dseg 
```

当我编译这个文件时，它说：

> 错误：符号“dseg”未定义。

怎么了？以及如何调用cseg的偏移地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:36:30.783

试试这个：

```
bits 16

section dseg
; ...

section cseg
start:
    mov ax, dseg
; ... 
```

# c - 如何初始化 wchar_t 变量？

> ID：12996062
> 
> 赞同：10
> 
> 时间：2012-10-21T08:06:45.490
> 
> 标签：c, gcc, unicode, wchar-t

我正在阅读这本书：*C: In a Nutshell*，在阅读了讨论宽字符的*字符集部分之后，我编写了这个程序：*

```
#include <stdio.h>
#include <stddef.h>
#include <wchar.h>

int main() {
  wchar_t wc = '\x3b1';
  wprintf(L"%lc\n", wc);
  return 0;
} 
```

然后我使用 gcc 编译它，但 gcc 给了我这个警告：

> main.c:7:15：警告：十六进制转义序列超出范围 [默认启用]

并且程序不输出字符 α（其 unicode 为 U+03B1），这是我想要它做的。

如何更改程序以打印字符 α？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T08:19:13.007

```
wchar_t wc = L'\x3b1'; 
```

是将 wchar_t 变量初始化为 U+03B1 的正确方法。L 前缀用于指定 wchar_t 文字。您的代码定义了一个 char 文字，这就是编译器发出警告的原因。

打印时看不到所需字符的事实取决于本地环境的控制台设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T09:00:35.343

这对我有用

```
#include <stdio.h>
#include <stddef.h>
#include <wchar.h>
#include <locale.h>

int main(void) {
  wchar_t wc = L'\x3b1';

  setlocale(LC_ALL, "en_US.UTF-8");
  wprintf(L"%lc\n", wc);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T08:16:10.297

试试`L'\x03B1'`它可能只是解决你的问题。如果您有疑问，可以尝试：

```
'\u03b1' to initialize. 
```

# python - “： 没有这样的文件或目录”

> ID：12996065
> 
> 赞同：1
> 
> 时间：2012-10-21T08:07:04.573
> 
> 标签：python, linux, unix, ubuntu, ubuntu-12.04

Ubuntu版本：12.04 Python版本：2.7.3

我有一个开始的脚本（prawn.py）：

```
#! /usr/bin/env python
from random import choice
import os
from webbrowser import open_new
import urllib
print("!")
def getsource(url): page=urllib.urlopen(url);sourcecodey=page.read();page.close;return sourcecodey
#etc 
```

当我在终端中运行它时：

```
$ ./prawn.py
: No such file or directory 
```

当我将第一行更改为 #! /usr/bin/python

```
$ which python
/usr/bin/python
$ ./prawn.py
bash: ./prawn.py: /usr/bin/python^M: bad interpreter: No such file or directory 
```

但是当我使用“python prawn.py”运行它时，它可以工作。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T08:10:34.870

`^M`表示您正在使用 DOS 行尾。请改用 UNIX 行结尾。您可以尝试使用以下方式将文件从 DOS 行结尾转换为 UNIX 行结尾`sed`：

```
sed -E 's/\'$'\r''$//' < prawn.py > prawn.unix.py 
```

转换后的文件将在`prawn.unix.py`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:31:39.703

这本质上是相同的错误：您的 shebang 行以回车`\r`/结尾`^M`。`env`打印出来（它打印`python`，它执行回车并在行首打印 `: No such file or directory`。

如果`python`直接调用，`python^M`是找不到的。

对于这两种情况，删除多余的字符；一旦你让它工作，版本`env`是更好的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T08:12:04.063

`^M`您的 shebang 行中似乎有一个，删除您第一行的所有内容，然后`#!/usr/bin/env python`手动重新键入它 ( )。

# php - 如何在 while 循环中创建不确定数量的变量？

> ID：12996071
> 
> 赞同：-1
> 
> 时间：2012-10-21T08:08:06.677
> 
> 标签：php, mysql

我正在使用 php。

只要mysql返回的特定查询值大于0，我就需要运行while循环。

对于循环的每次迭代，我需要将查询值放在不同的变量中。

问题取决于循环从表中的哪个位置开始，它将运行可变的次数。

如何让循环为每次迭代声明一个新的唯一变量？

我试过了：

```
$i = 0
while (condition)
{
    $array[i] = queryresult;
    i++;
} 
```

但我认为它实际上将 $array[i] 作为一个变量，而不是假设“i”是另一个变量。

我敢肯定，有更多经验的人可以告诉我一个简单的答案:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T08:10:27.063

你需要使用

```
$i = 0
while (condition)
{
    $array[$i] = queryresult;
    $i++;
} 
```

以便 PHP 可以将 $i 解释为变量。这样它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:21:27.873

算了`$i`。这样做：

```
$array = array();
while(condition) {
    $array[] = $query_result;
} 
```

如果省略数组索引，它将追加到末尾。

# php - 如何通过函数传递对象并访问数据

> ID：12996075
> 
> 赞同：1
> 
> 时间：2012-10-21T08:08:39.993
> 
> 标签：php, oop

我创建了一个项目类 (item.class.php) 和 itemDAO 类 (itemDAO.class.php)，我还有另一个 php 文件 (test.php)。我想使用 test.php 类中的那些类将数据插入数据库。我还有一个数据库类（db.class.php）。在这里，我坚持将对象的（项目）值传递给 itemDAO 类中的函数。

这是我的 item.class.php

```
<?php

class item {

    private $id;
    private $name;
    private $description;

    public function item($_id,$_name,$_description){

        $this->id=$_id;
        $this->name=$_name;
        $this->description=$_description;

    }

    public function setId( $id )
    {
        $this->id = $id;
    }

    public function setName( $name )
    {
        $this->name = $name;
    }

    public function setDescription( $description )
    {
        $this->description = $description;
    }

    public function getId()
    {
        return $this->id;
    }

    public function getName()
    {
        return $this->name;
    }

    public function getDescription()
    {
        return $this->description;
    }       
}
?> 
```

这是我的 itemDAO.class.php

```
<?php
include("db.class.php");
include("item.class.php");

class itemDAO {

    public function __construct() {
        $d=new db();
    }

    public function AddItem(&$item) { //I am stuck here 

        $result = $db->query("INSERT INTO item VALUES('$i->') ");//Im stuck here 
    }
}
?> 
```

如何获取项目类对象以从对象中获取值并传递给 sql 查询。我不擅长 php 并且很了解 java。在java中我们可以这样调用

```
public boolean addItem(Item I) {

    String query = "insert into Item(Item_Id, Item_Name, Item_Category, Measuring_Unit, Last_Price_Rate)  values ('" + I.getItemID() + "','" + I.getItemName() + "','" + I.getItemCategory() + "','" + I.getMeasuringUnit() + "','" + I.getLastPriceRate() + "')";
    System.out.println(query);
} 
```

这是我的 test.php

```
<?php
include("item.class.php");
include("db.class.php");
include("itemDAO.class.php");
$id="3";
$name="aaa";
$descriptio="hi";
$item= new item($id,$name,$descriptio);

$dao=new itemDAO();
$dao->AddItem($item->getId(),$item->getName(),$item->getDescription());
?> 
```

我的数据库类

```
<?php

class db {

    private $link;
   // private $host="localhost", $username="root", $password="123", $database="item";

    public function __construct(){
        $this->host        = "localhost";
        $this->username    = "root";
        $this->password    = "123";
        $this->database    = "item";

        $this->link = mysql_connect($this->host, $this->username, $this->password)
            OR die("There was a problem connecting to the database.");

        mysql_select_db($this->database, $this->link)
            OR die("There was a problem selecting the database.");

        return true;
    }

    public function query($query) {
        $result = mysql_query($query);
        if (!$result) die('Invalid query: ' . mysql_error());
        return $result;
    }

    public function __destruct() {
        mysql_close($this->link)
            OR die("There was a problem disconnecting from the database.");
    }
}
?> 
```

如何使用面向对象的 PHP 做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:44:39.450

请停止通过引用传递对象。由于 PHP5.x 没有必要，而是默认情况下使用处理程序传递对象。

```
class itemDAO{

    protected $db;

    public function __construct( $db ){
        $this->db= $db;
    }

    public function AddItem( $item ){ 

        $query = 'INSERT INTO Item(Item_Id, Item_Name, Item_Category)  
                  VALUE ( :id, :name, :category )';
        $statement = $this->db->prepare( $query );
        $statement->bindParam( ':id', $item->getId(), PDO::PARAM_INT );
        $statement->bindParam( ':name', $item->getName() );
        $statement->bindParam( ':category', $item->getCategory() );

        return $statement->execute(); // returns false if query fails.
    }

} 
```

如果您了解 PHP 的基础知识，并且有过 Java 的经验，那么我建议您阅读[*“PHP 实战”*](https://rads.stackoverflow.com/amzn/click/com/1932394753)。这将以 Java 友好的方式涵盖 PHP 中的 OOP。

我还怀疑，您可能会从阅读[本文](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)中受益。它将向您解释如何使用 PDO API（假设这是您已经使用的）。

并且您需要学习如何使用`spl_autoload_register()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:19:27.537

这并没有什么不同，只要记住在 PHP 中连接使用句点，访问对象属性使用“->”而不是句点。

```
public function AddItem(&$item)
    $result = $db->query("insert into Item(Item_Id, Item_Name, Item_Category, Measuring_Unit, Last_Price_Rate)  values ('" . $item->getItemID() . "','" . $item->getItemName() . "','" . $item->getItemCategory() . "','" . $item->getMeasuringUnit() . "','" . $item->getLastPriceRate() . "')");
} 
```

另外，请记住，在 PHP 中，构造函数不仅仅是对象名称。您必须创建一个名为`__construct`.

# domain-driven-design - 来自 Web 服务的 DDD 模型更新

> ID：12996076
> 
> 赞同：1
> 
> 时间：2012-10-21T08:08:48.093
> 
> 标签：domain-driven-design

我正在写一个在线商店，当我对域进行建模时，我想到了一个问题，如何对从不同系统以不同粒度更改的对象进行建模。

例如，假设我们有一个带有一些属性的 Product 实体：

*   产品编号
*   姓名
*   描述
*   价格
*   等等

我们从两个系统接收新产品和产品更新：库存管理系统（通过 web 服务）和集成在电子商务产品中的管理 web ui。

从库存管理中，我总是能获得具有所有属性的产品的完整更新（即使不是全部改变）。管理 ui 更新单个属性（crud）。

那么我应该如何在产品实体上建模（和命名）与业务案例相关的更改方法？

像 updateFromIms(price, description, name, ...) 之类的东西，或者我应该为每个属性编写一个设置器（这会破坏“不可修改”实体）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:08:15.337

如有疑问，我通常会查看示例 Shipping DDD 应用程序是如何做到的。可以在 C# 中找到示例应用程序：[http ://code.google.com/p/ndddsample/](http://code.google.com/p/ndddsample/)

因此，在您的情况下，这类似于**Cargo**实体的处理方式，它有一个构造函数来创建实体，然后它具有公共方法，如**BookingService**用于 ChangeDestination 或 BookNewCargo 的**SpecifyNewRoute**。BookingService 由**BookingFacade**使用，该 BookingFacade负责：

> 这个立面保护了领域层——模型、服务、存储库——免受对用户界面和远程处理等事物的关注。

因此，在您的情况下，您的 UI 和 WebService 可以调用一个名为 UpdateProduct 的单一外观方法（我认为从服务或 UI 更新之间没有概念上的区别，因此您不需要像 ChangeDestination 这样的单独方法，但它是您的称呼）。外观方法将调用您的**ProductService::UpdateProduct**方法，该方法将调用**ProductModel::UpdateProduct**

现在我不知道您的应用程序的范围，所以这可能太多了，但无论如何 DDD 不适合小型应用程序。就个人而言，我以 Eric Evans 的书和 NDD 示例作为指导，但我认为摆脱一些复杂性（例如忽略外观）没有问题，没有人比您更了解您的应用程序。

# android - Android Jelly Bean 中的应用程序加密

> ID：12996083
> 
> 赞同：2
> 
> 时间：2012-10-21T08:10:05.213
> 
> 标签：android, encryption

[https://www.youtube.com/watch?v=VuC0i4xTyrI](https://www.youtube.com/watch?v=VuC0i4xTyrI)

转到 34:55。我一直在寻找这个，我什至提出了一个关于它的[SO 问题](https://stackoverflow.com/questions/12866881/how-to-prevent-a-teardown-of-my-apk)，但我仍然不确定 App 加密的作用。有人愿意解释吗？或者有人用过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:24:53.113

[Android Explorations](http://nelenkov.blogspot.com/2012/07/using-app-encryption-in-jelly-bean.html)提供了一个很好的概述。描述它的最简单方法是每个应用程序都有自己的加密文件系统（想想 TrueCrypt），该文件系统在运行时被解密。基本密钥存储在 中`/data/misc/systemkeys/AppsOnSD.sks`，每个设备都有自己的。当应用程序从 Play 加载时，会创建一个新分区并使用该密钥加密，然后再将任何内容写入磁盘，因此不会不安全地留下任何残留物。

安装了应用程序基础数据的所有部分，包括 apk 和资源，除了您选择放置在文档、缓存目录和其他开放区域等位置的任何内容。

# c++ - 打印超出范围的数组内容

> ID：12996084
> 
> 赞同：-6
> 
> 时间：2012-10-21T08:10:07.573
> 
> 标签：c++, arrays

假设我有一个数组：

```
string w[10]; 
```

我有一个声明：

```
if(w.size() > 10)
{
  // How would I print out the 11th character?
  char a = w[11];
  cout << a << endl;
} 
```

我将如何打印出第 11 个字符？我尝试存储到一个字符中，但它似乎没有打印任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:12:23.140

为什么要在数组边界之外打印？打印超出数组大小的任何字符都是未定义的，可能会导致崩溃。

w[11] 实际上也是第 12 个元素。由于数组是基于 0 的，第 11 个元素是 w[10]。

你真的希望数组是动态大小的吗？因为如果您尝试使用字符串，也许您想要一个 stl 字符串？这在标题中定义`<string>`并通过

```
std::string somestring("string you want"); 
```

# php - 迁移具有不同加密的密码（CubeCart 到 Prestashop）

> ID：12996088
> 
> 赞同：1
> 
> 时间：2012-10-21T08:10:32.887
> 
> 标签：php, prestashop, password-encryption

我正在将客户从 CubeCart 转移到 Prestashop，并希望保留客户现有的客户密码。

我在 Prestashop 论坛上找到了一个似乎可以满足我需要的贡献，但是，它是 ZenCart/OScommerce 到 Prestashop 的。因此，我需要帮助的密码结构略有不同，请参见下文：

**ZC/OSC**
格式：1 列，32 个字母数字字符 + 冒号 + 2 个字母数字字符盐。
例如
e56d64755f66a86996b54114bb4102bf:08

**CC**
格式：2 列，32 个字母数字字符 + 一个单独的 6 位随机盐。
例如
密码：e56d64755f66a86996b54114bb4102bf
盐：7pZcAF

所以我想请一点帮助调整以下代码以使用 2 列 CC 密码/盐：

```
// == BEGIN ZEN-CART / OSCOMMERCE TO PRESTASHOP PASSWORD INTEGRATION ==
// == BY João Cunha - this.person@joaocunha.eti.br
// == @ 31/03/2012
// == USE AND MODIFY AT WILL
// == TESTED ON PRESTASHOP V1.4.7X
if (!$result) { //<- INVALID PRESTASHOP LOGIN, IT MAY BE A ZEN-CART / OSCOMMERCE     PASSWORD
//CHECK IF THE GIVEN EMAIL MATCHES A ROW IN OUR LEGACY TABLE AND RETRIEVES THE LEGACY     PASSWORD
$resultZC = Db::getInstance()->getRow('
SELECT `password`
FROM `zc_legacy_passwords`
WHERE `email` = \''.pSQL($email).'\'
AND `updated` = 0');

 if (!$resultZC)
return false; //<- EMAIL NOT FOUND IN NONE OF THE TABLES, SO IT IS AN INVALID LOGIN

//ENCRYPTS THE GIVEN PASSWORD IN ZEN-CART / OSCOMMERCE FORMAT
$salt = substr($resultZC['password'], strrpos($resultZC['password'],':')+1, 2);
$ZCpassword = md5($salt . $passwd) . ':' . $salt;

if ($ZCpassword != $resultZC['password'])
return false; //<- WRONG ZEN-CART/OSCOMMERCE PASSWORD GIVEN

//WE'LL UPDATE THE CUSTOMER TABLE WITH ITS PRESTASHOP ENCRYPTED PASSWORD...
Db::getInstance()->Execute('
                        UPDATE `'._DB_PREFIX_   .'customer`
                        SET `passwd` = \''.md5(pSQL(_COOKIE_KEY_.$passwd)).'\'
                        WHERE `email` = \''.pSQL($email).'\'');

//...AND FLAG IT AS UPDATED, SO THE NEXT TIME HE LOGS IN, HE WON'T ENTER THIS ROUTINE.
Db::getInstance()->Execute('
                UPDATE `zc_legacy_passwords`
                SET `updated` = 1
                WHERE `email` = \''.pSQL($email).'\'');

//USER IS AUTHENTICATED, OVERWRITE THE EMPTY $result VARIABLE
$result = Db::getInstance()->getRow('
SELECT *
FROM `'._DB_PREFIX_ .'customer`
WHERE `active` = 1
AND `email` = \''.pSQL($email).'\'
AND `deleted` = 0
AND `is_guest` = 0');
}
// == END ZEN-CART / OSCOMMERCE TO PRESTASHOP PASSWORD INTEGRATION 
```

此代码还将旧的加盐密码更新为新的 Prestashop 密码类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:27:08.163

这并不重要，因为这只是检查密码：

> `password`从`zc_legacy_passwords`哪里选择`email`= \''.pSQL($email).'\' AND `updated`= 0');

然后这段代码检查表数据库 ZenCart/OScommerce 中的密码，您可以删除或评论（忽略）

> $salt = substr($resultZC['password'], strrpos($resultZC['password'],':')+1, 2); $ZCpassword = md5($salt . $passwd) 。'：' 。$盐；
> 
> if ($ZCpassword != $resultZC['password']) return false;

这很重要，因为将存储和修改 prestashop 的密码（此处不需要 modif）

> Db::getInstance()->Execute(' UPDATE `'._DB_PREFIX_ .'customer`SET `passwd`= \''.md5(pSQL(_COOKIE_KEY_.$passwd)).'\' WHERE `email`= \''.pSQL($email).'\'');

忽略这个：

> Db::getInstance()->Execute(' UPDATE `zc_legacy_passwords`SET `updated`= 1 WHERE `email`= \''.pSQL($email).'\'');

忽略这个 ：

> $result = Db::getInstance()->getRow(' SELECT * FROM `'._DB_PREFIX_ .'customer`WHERE `active`= 1 AND `email`= \''.pSQL($email).'\' AND `deleted`= 0 AND `is_guest`= 0');

因此，代码将如下所示：

> 如果（！$结果）{
> 
> Db::getInstance()->Execute(' 更新`'._DB_PREFIX_ .'customer`集
> 
> `passwd`= \''.md5(pSQL(_COOKIE_KEY_.$passwd)).'\' WHERE `email`=
> 
> \''.pSQL($email).'\'');
> 
> }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-13T07:50:33.150

迁移不同加密的密码非常困难，甚至不可能。因此，对于您的问题，可能为时已晚，我认为任何想要迁移密码的人都应该尝试自动移动它们。此工具不需要您任何技术技能，无需一些简单的点击。[LitExtension](http://litextension.com/prestashop-migration-tools.html)是我的建议之一。当然，你必须付出一点，但也不会太多。

# java - JavaEE 中的配置管理

> ID：12996093
> 
> 赞同：6
> 
> 时间：2012-10-21T08:10:48.263
> 
> 标签：java, configuration, properties, java-ee-6, glassfish-3

## 我的目标

我有一个 JavaEE 环境（在我的特殊情况下是 Glassfish Web Profile），我想要一种独立于容器的方式来配置我的应用程序，并具有以下功能：

1.  未指定其他内容时的默认配置（在 WAR 文件中）
2.  自定义配置（外部 WAR 文件）分为两层：
    *   主机特定设置（在外部属性文件中；例如某个工作目录）
    *   应用程序特定设置（在数据库中；例如邮箱大小）

我的希望是部署和运行我的应用程序（设置 JNDI 数据源，部署 WAR 文件，在某些配置文件夹中有一个可选的 .properties 文件和 -完毕）。

这引出了我的第一个问题：这是一种常见/良好/有用的设置，还是不必要的复杂和/或非常奇特的设置？

## 我的想法（到目前为止）

### 默认配置

默认配置将在属性文件中：

`src/main/resources/config/default.properties`

应用程序范围的 bean 在初始化时读取此属性，如下[所述](https://stackoverflow.com/questions/3160691/how-to-read-properties-file-in-web-application)：

```
@Named
@ApplicationScoped
public class Configuration implements Serializable {

    ...

    @PostConstruct
    public void initConfiguration() {
        loadDefaultConfiguration();
    }

    private void loadDefaultConfiguration() {
        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();

        try (InputStream input = classLoader.getResourceAsStream("/config/default.properties")) {
            properties.load(input);
        } catch(IOException ex) {
            LOGGER.error(...);
        }
    }

} 
```

### 应用程序特定设置

这些设置将存储在具有键和值列的数据库表中。它们将始终通过 EntityManager 访问，希望 JPA 实现的缓存会很聪明:)。这里的优点是，这些设置可以在应用程序运行时轻松更改。

```
@Named
@ApplicationScoped
public class Configuration implements Serializable {

    ...

    public T getProperty(final PropertyKeyEnum key, final Class<T> type) {
        if (key.getSource() == PropertySourceEnum.DATABASE) {
            return configurationDao.getByKey(key.getKey(), type);
        }

        ...
    }
} 
```

### 主机特定设置

最后，这是我的主要**问题**：

如何以容器独立方式访问外部属性文件？用户应该能够将一个`myAppName.properties`文件放入容器的默认配置文件夹中，并且应用程序应该能够找到并加载这个文件（至少在应用程序启动时）。

## 我的环境

*   JavaSE 7
*   JavaEE 6
*   Glassfish 3.1.2 Web（但这不重要;））

## 更新

我在 Glassfish 的管理区域中找到了一个位置，您可以在其中指定一些易于访问的系统属性：

```
System.getProperty("myApp.propertyName"); 
```

这可用于存储外部 .properties 文件的路径，但我不确定这是否是一种*干净的方式*，因为

1.  我不知道是否每个容器（支持 JavaEE）都有这么好的特性
2.  我真的不想从 Web 应用程序访问*纯文件*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:37:50.767

在与我的同事交谈并进行了一些研究后，我为主机特定（外部）配置实现了以下内容。

因为无论如何我的应用程序都需要一个工作目录，所以我决定将此工作目录也用作我的外部配置的位置。因此，我要么使用环境变量（例如`MYAPP_HOME`），或者如果未设置变量，则使用用户的主文件夹（例如`<user.home>/.myapp`）：

```
private Path discoverRootDirectory() {
    String myAppHome = System.getenv("MYAPP_HOME");

    if (myAppHome == null) {
        return Paths.get(System.getProperty("user.home"), ".myapp");
    } else {
        return Paths.get(myAppHome);
    }
} 
```

然后将照常加载属性文件：

```
private void loadConfiguration() {
    properties = new Properties();
    // ...
    try (InputStream inputStream = Files.newInputStream(discoverRootDirectory())) {
        properties.load(inputStream);
    } catch (FileAccessException | IOException ex) {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T01:18:58.150

如果您正在尝试创建一种方法来保持您的应用程序可移植，我的猜测是您正在尝试编写一个程序来处理更快速有效的手动处理（由人类而不是计算机）。每个容器（Glassfish、JBoss、WebSphere 等）并不局限于必须以与另一个容器相同的方式做事。因此，如果您追求的是可移植性，它们的配置文件可以而且通常会大不相同。最好弄清楚如何在不同的服务器上运行应用程序并保存配置文件。充其量你可以在一个地方做我们所做的事情并创建带有占位符的文件，这些文件可以与简单的属性文件一起使用，其中脚本替换每个占位符的值（例如端口号等）。您多久在不同类型的服务器之间切换一次？如果你经常说，那么你会遇到比这更多的问题。最好选择一个平台并坚持下去。这样问题少很多。

如果您在这里没有得到您喜欢的答案，请尝试[服务器故障](https://serverfault.com/%20%22Server%20Fault)（此站点的姊妹站点）。

# c - glibc 在 C 中使用 posix 线程时检测到 free()

> ID：12996098
> 
> 赞同：1
> 
> 时间：2012-10-21T08:11:42.680
> 
> 标签：c, multithreading, posix, free, glibc

我不断收到此“glibc 检测到 free(): invalid next size (fast)”错误，但不知道具体原因。我读到它是因为越界错误，但在我的代码中没有看到可能发生这种情况的任何地方，有没有人看到我错过的任何东西？

这是我的代码：

```
typedef struct
{
int* inputData;
int* histogramData;
int numElements;
pthread_t* tid;
} threadInput;

void* threadRoutine(void* argv)
{

// initializers
int i, avgInputSize, lastInputSize, threadStart, threadEnd, threadNum, numThreadsUsed;

// stores input data into tempData
threadInput* tempData = (threadInput*) argv;

// calculates the required number of threads
numThreadsUsed = NUM_THREADS; 
if(NUM_THREADS > tempData->numElements) 
{
    numThreadsUsed = tempData->numElements;
}

// create histogram
for(threadNum = 0; threadNum < numThreadsUsed; threadNum++)
{
    if(tempData->tid[i] == pthread_self())
    {

        // finds start and end of data set for thread
        if(tempData->numElements > numThreadsUsed)
        {
            avgInputSize = (int)((tempData->numElements)/NUM_THREADS);
            threadStart = threadNum*avgInputSize;
            if(i < (NUM_THREADS-1)) 
            {
                threadEnd = ((threadNum+1)*avgInputSize);
            }
            else if(i == (NUM_THREADS-1)) 
            {
                threadEnd = (tempData->numElements);        
            }
        }
        else
        {
            threadStart = i;
            threadEnd = i + 1;
        }

        // creates histogram
        pthread_mutex_lock(&lock);

        for(i = threadStart; i < threadEnd; i++)
        {
            tempData->histogramData[tempData->inputData[i]]++;
        }

        pthread_mutex_unlock(&lock);
    }
}

pthread_exit(0);
}

void compute_using_pthreads(int *input_data, int *histogram, int num_elements, int histogram_size)
    {
    // initializers
    int i, j;
    threadInput* input = malloc(sizeof(threadInput*));
    input->inputData = malloc(sizeof(input_data));
    input->histogramData = malloc(sizeof(histogram));
input->tid = malloc(NUM_THREADS*sizeof(pthread_t));

// enters data into struct
    input->inputData = input_data;
input->histogramData = histogram;

// Create threads
    for(i = 0; i <  NUM_THREADS; i++)
            pthread_create(&input->tid[i], NULL, threadRoutine, (void*) &input);

// reaps threads
    for(i = 0; i <  NUM_THREADS; i++)
            pthread_join(input->tid[i], NULL);

    pthread_mutex_destroy(&lock);

    // frees space
    free(input->inputData);
    free(input->histogramData);
    free(input->tid);
    free(input);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:29:24.473

这是个错误：

```
threadInput* input = malloc(sizeof(threadInput*)); 
```

因为它只为 分配足够的空间`threadInput*`，所以它应该为 a 分配`threadInput`：

```
threadInput* input = malloc(sizeof(*input)); 
```

`input_data`与和类似的错误是分配`histogram`了 a而不是.`sizeof(int*)``sizeof(int)`

# java - 更新 JSF 中的标签（Primefaces）

> ID：12996108
> 
> 赞同：3
> 
> 时间：2012-10-21T08:13:50.433
> 
> 标签：java, jsf, primefaces

我有一个带有按钮和标签的 JSF 页面。当用户按下`simulateYearButton`按钮时，标签中显示的值`yearLabel`应该递增。

带有按钮和标签的表单如下所示：

```
 <h:form>
        <p:commandButton value="Заресетить" id="resetButton"
            actionListener="#{entryPage.resetButtonAction}" />

        <p:commandButton value="Просимулировать год" id="simulateYearButton"
            actionListener="#{entryPage.simulateYearButtonAction}">
            <f:ajax event="click" render="yearLabel" />
        </p:commandButton>

        <h:outputLabel id="yearLabelLabel" for="yearLabel" value="Год:" />
        <h:outputLabel id="yearLabel" value="#{entryPage.yearLabel}"
            style="font-weight:bold" />
    </h:form> 
```

`entryPage`豆的代码：

```
@ManagedBean(name = "entryPage")
@RequestScoped
public class EntryPageController {
    ...
    private int year;
    private String yearLabel;

    @PostConstruct
    public void init()
    {
        this.yearLabel = "2012";
    }

    ...

    public void simulateYearButtonAction() {
        LOGGER.debug("EntryPageController.simulateYearButtonAction");
        this.year++;
        this.yearLabel = Integer.toString(this.year);
    }

    public String getYearLabel() {
        return yearLabel;
    }
} 
```

当我按下 时`simulateYearButton`，该方法`simulateYearButtonAction`被执行（我在输出中看到日志消息），但标签没有更新。

当我按下按钮时，我应该如何修改代码以更新标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:09:56.687

新答案：

```
 <p:commandButton value="Просимулировать год" id="simulateYearButton"
      actionListener="#{entryPage.simulateYearButtonAction}" update="yearLabel">
 </p:commandButton> 
```

因为 commandbutton 默认情况下是 ajaxed。

接下来，您需要制作 bean @ViewScoped。接下来，您需要将 yearLabel 的值分配给 year：

```
 @PostConstruct
public void init()
{
    this.yearLabel = "2012";
    this.year = Integer.parseInt(yearLabel);
} 
```

# jquery - 如何防止内部点击事件中的切换？

> ID：12996109
> 
> 赞同：0
> 
> 时间：2012-10-21T08:13:58.037
> 
> 标签：jquery

嘿，所以我有这个代码：

```
$('#album_cell' + currentCell).toggle(
    function() {
        $('#album_cell'+currentCell).flip({
            direction:  'lr',
            color:      "#FFF",
            content:    '<?php echo form_open('subjects/insert_caption');?>'
                      + '<textarea id="caption_input' + currentCell + '">'
                      + '   <?php echo $this->lang->line('insert_catpion_text'); ?>'
                      + '</textarea>'
                      + '<input type="submit" id="submit_caption' + currentCell + '" value="<?php echo $this->lang->line('save'); ?>" /> '
                      + '<?php echo form_close(); ?>'
                      + ''
        });
    },
    function() {
        $('#album_cell'+currentCell).revertFlip();
    }
); 
```

我正在使用 CodeIgniter 和[jQuery Flip 插件](http://lab.smashup.it/flip/)，这是不相关的，但向你们中的一些人解释了未知代码。

现在所有数据都是正确的，插件在第一次点击后会创建一些内容，并按预期恢复为原始内容。

现在我的问题是如何在创建的内容上绑定一个事件，以便单击内部文本区域/按钮不会触发该`toggle`方法？

**编辑：**

根据要求，这是输出的 HTML：

```
<form action="http://localhost/ci/index.php/subjects/insert_caption" method="post" accept-charset="utf-8">
    <textarea id="caption_input1">add</textarea>
    <input type="submit" id="submit_caption1" value="save">
</form> 
```

我试过了 ：

```
 $('#album_cell'+currentCell).on(
'click','#caption_input'+currentCell,function() {
                     alert();
                     e.stopPropagation();
                    }); 
```

但这不起作用，它确实触发了事件，但仍然切换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T08:35:02.707

您必须在[.on()](http://api.jquery.com/on/)函数中添加选择器以将事件绑定到动态创建的元素。

尝试类似的东西（哪里`body`过于宽松，使用您加载数据的容器）：

```
$('body').on('click','#caption_input'+currentCell,function(e) {
    e.stopPropagation();
}); 
```

# python - python shell：腌制整个状态

> ID：12996118
> 
> 赞同：4
> 
> 时间：2012-10-21T08:15:13.837
> 
> 标签：python, serialization, memory-management, state, pickle

当使用“ `ipython`”或“ `code.interact(local=locals())`”时，我希望有一种方法可以将整个程序地址空间保存到一个 pickle 文件中，以及类似的一种方法来加载这样的文件，然后在该上下文中开始执行。

由于虚拟内存，这对于简单的脚本应该是完全可能的。

所有定义的名称（以及它们指向的非孤立对象），从本地到全局和全局函数，都将被腌制。在 unpickling 时，这些名称将在其原始范围内再次分配。

假设程序不使用网络，因此避免了那里的状态不连续性。

假设程序对于感知到的系统时钟的不连续性是容错的，所以也没有问题。

唯一的挑战似乎是如何处理文件描述符。理想情况下，如果它不存在，应该有一个简单的“文件描述符pickle”函数来获取它打开的模式位，文件光标的位置，以及文件内容的校验和（如果尝试 unpickle 时校验和不匹配）。

是否有几行可以完成这种“腌制整个会话”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-19T15:15:37.097

为此，我会使用[dill](https://pypi.org/project/dill/)，它可以在 python 中序列化几乎任何东西。

```
>>> import dill
>>> 
>>> def foo(a):
...   def bar(x):
...     return a*x
...   return bar
... 
>>> class baz(object):
...   def __call__(self, a,x):
...     return foo(a)(x)
... 
>>> b = baz()
>>> b(3,2)
6
>>> c = baz.__call__
>>> c(b,3,2)
6
>>> g = dill.loads(dill.dumps(globals()))
>>> g
{'dill': <module 'dill' from '/Library/Frameworks/Python.framework/Versions/7.2/lib/python2.7/site-packages/dill-0.2a.dev-py2.7.egg/dill/__init__.pyc'>, 'c': <unbound method baz.__call__>, 'b': <__main__.baz object at 0x4d61970>, 'g': {...}, '__builtins__': <module '__builtin__' (built-in)>, 'baz': <class '__main__.baz'>, '_version': '2', '__package__': None, '__name__': '__main__', 'foo': <function foo at 0x4d39d30>, '__doc__': None} 
```

Dill 将它的类型注册到`pickle`注册表中，因此如果您有一些使用的黑盒代码`pickle`并且您无法真正编辑它，那么只需导入 dill 就可以神奇地使其工作而无需猴子修补第 3 方代码。

您还想腌制整个解释器会话... dill 也可以这样做。

```
>>> # continuing from above
>>> dill.dump_session('foobar.pkl')
>>>
>>> ^D
dude@sakurai>$ python
Python 2.7.5 (default, Sep 30 2013, 20:15:49) 
[GCC 4.2.1 (Apple Inc. build 5566)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import dill
>>> dill.load_session('foobar.pkl')
>>> c(b,3,2)
6 
```

Dill 还提供[了一些很好的工具](https://github.com/uqfoundation/dill/blob/master/dill/detect.py)，可以帮助您了解在代码失败时导致酸洗失败的原因。

# jquery - 用fancyBox显示后可见的内联div消失

> ID：12996124
> 
> 赞同：6
> 
> 时间：2012-10-21T08:15:52.570
> 
> 标签：jquery, fancybox, inline, fancybox-2

我在这里发布问题和解决方案，以帮助遇到与我相同问题的任何人。

我的页面上有一个`<div>`我想允许用户通过单击图标来“缩放”的页面。`<div>`不隐藏。

我使用 fancyBox（[fancyBox 主页](http://fancyapps.com/fancybox/)）将其显示`<div>`为一种模式窗口。我在其他灯箱类型插件上使用 fancyBox 的原因是它不会复制 的内容`<div>`，而是移动它，因此所有表单元素等继续工作。问题是关闭fancyBox窗口后，在`<div>`主页面上隐藏了。

解决方案：

我使用了fancyBox 2.1.2。

我使用了 JFKDIAZ 在 github ( [https://github.com/fancyapps/fancyBox/issues/103](https://github.com/fancyapps/fancyBox/issues/103) ) 上发布的解决方案，以确保在关闭 fancyBox 窗口后 div 被返回到其父级。

然后我使用 jquery show 功能再次显示 div 内联。

我的初始化花式框的代码如下。注意`beforeLoad`and`afterClose`函数来识别父级`<div>`并将其`<div>`返回给它的父级（感谢 JFKDIAZ）。注意添加`$(inlineTarget).show();`以再次显示`<div>`，使其不会消失。其余的是fancyBox 的标准初始化。

```
 $(document).ready(function() {
        $(".various").fancybox({
            beforeLoad: function() {
                inlineTarget = this.href;
                parentNodename = $(inlineTarget).parent().get(0).tagName.toLowerCase();
                $(inlineTarget).parent(parentNodename).addClass("returnTo");
            },
            afterClose: function() {
                $(inlineTarget).appendTo(".returnTo");
                $(".returnTo").removeClass("returnTo");
                $(inlineTarget).show();
            },
            maxWidth: 880,
            maxHeight: 600,
            fitToView: false,
            width: '70%',
            height: '70%',
            autoSize: false,
            closeClick: false,
            openEffect: 'none',
            closeEffect: 'none'
        });
    }); 
```

我的代码和在 fancyBox 中`<div>`显示的链接如下。`<div>`请注意，父级`<div>`必须有一个`id`，以便代码可以识别它。类`various`是我用来标识`<a>`必须将 fancyBox 应用到哪个元素的标签。

```
 <a href="#application_form" class="various">Zoom</a>
    <div id="application_parent">
        <div id="application_form">
            Contents to display in fancyBox and return back here when complete.
        </div>
    </div> 
```

这对我很有用。所有的表单元素都被移到了 fancyBox 并回到了它们在页面上的原始位置。

**更新**（从评论中移到小提琴的链接） - 有关演示，请参阅：http: [//jsfiddle.net/z8e9q/3/](http://jsfiddle.net/z8e9q/3/)

我希望这可以帮助有同样问题的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T22:56:04.093

我为fancybox v2.0.6 及以下版本编写了该解决方案（我也是JFKDIAZ；）。新版本 v2.1.x + 已修复该问题（已设置临时占位符以将内容返回到其原始位置），但是 v2.1.x + 的**新**问题（迄今为止为 v2.1.2）是内容确实正确返回但*隐藏*了。

新的解决方法（对于 2.1.x + 版本）只是让它`afterClose`像

```
var tarGet; // initialize var at top of script 
```

回调

```
beforeShow: function(){
 tarGet= this.href;
},
afterClose: function(){
 $(tarGet).show();
} 
```

见[分叉小提琴](http://jsfiddle.net/Wm7zc/)

* * *

**编辑（2014 年 3 月 27 日）：为避免@Henrik-Erlandsson 在**[他的回答](https://stackoverflow.com/a/22681722/1055987)中指出的全局变量，您可以简单地执行以下操作：

```
afterClose: function(){
  $(this.href).show();
} 
```

请参阅分叉**[的 JSFIDDLE](http://jsfiddle.net/74yAy/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-27T08:15:56.070

一个避免全局变量、使用多个图像（画廊、滑块）并且不会弄乱图像居中的更短的解决方案是在图像上放置一个类并修改文档中的初始化，如下所示：

```
$(".fancybox").fancybox({
    afterClose: function(){
     $(".fancybox").css("display","block");
    }
}); 
```

display:block 只是上面与 FlexSlider 2 一起使用的场景的一个示例。当然，您可以添加任何您想要的 CSS 修复。

但是 Fancybox 本身的修正是更合适的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-12T07:53:45.447

```
<a href="#application_form" class="various">Zoom</a>
<div id="application_parent" style="display:none">
    <div id="application_form">
        Contents to display in fancyBox and return back here when complete.
    </div>
</div> 
```

# javascript - 记录复杂对象时的内存泄漏

> ID：12996129
> 
> 赞同：12
> 
> 时间：2012-10-21T08:17:06.337
> 
> 标签：javascript, memory-leaks

我目前正忙于编写一个 javascript 库。在那个库中，我想提供一些关于控制台内容的日志记录。

```
function log () {
        if ((window && typeof (window.console) === "undefined") || !enableLogging) {
            return false;
        }

        function currentTime() {
            var time = new Date();
            return time.getHours() + ':' + time.getMinutes() + ':' + time.getSeconds() + '.' + time.getMilliseconds();
        }

        var args = [];

        args.push(currentTime());

        for (var i = 1; i < arguments.length; i++) { 
            args.push(arguments[i]);
        }

        switch (arguments[0]) {
            case severity.exception:
                if (window.console.exception) {
                    window.console.exception.apply(console, args);
                } else {
                    window.console.error.apply(console, args);
                }
                break;
            case severity.error:
                window.console.error.apply(console, args);
                break;
            case severity.warning:
                window.console.warning.apply(console, args);
                break;
            case severity.information:
                window.console.log.apply(console, args);
                break;
            default:
                window.console.log.apply(console, args);
        }
        return true;
    } 
```

上面的代码展示了我的日志功能。当被调用时，我至少提供了一个严重性、一条消息和一些可选的对象（可以是 DOM 对象，如 IDBTransaction、IDBDatabase 等）。

```
log(severity.information, 'DB opened', db); 
```

现在我遇到的问题是这会导致内存泄漏。问题是我传递的对象通过 console.log 方法留在内存中。有没有办法避免这种情况或清理它？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-21T20:38:30.553

传递给的对象没有被 GC 处理是可以理解的，`console.log`因为您需要能够在代码运行后在开发人员工具中检查它们。我根本不会将此称为问题，因为这就是调试应用程序时需要的方式，但生产代码不应执行任何控制台日志记录。

如果您仍然需要在生产中记录东西（或将其发送到某处），我建议您对对象进行[字符串化：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

```
console.log(JSON.stringify(db, null, '\t'));  // '\t' to pretty print 
```

这里的额外好处是您在记录时确实捕获了对象的状态（而记录对象引用[并](http://techblog.appnexus.com/2011/webkit-chrome-safari-console-log-bug/)[不能](https://stackoverflow.com/questions/7389069/console-log-object-at-current-state) [保证](https://stackoverflow.com/questions/4198912/bizarre-console-log-behaviour-in-chrome-developer-tools) ¹）。

由于您正在尝试记录大型对象，请注意这样做可能会降低性能，因此如果您想在生产环境中执行此操作，请三思而后行。

¹ - 似乎[已](http://code.google.com/p/chromium/issues/detail?id=50316)在最新的 Chrome中修复

# matlab - 使用视觉工具箱在matlab中绘制光流

> ID：12996134
> 
> 赞同：2
> 
> 时间：2012-10-21T08:18:05.377
> 
> 标签：matlab, computer-vision, opticalflow, matlab-cvst

我正在尝试使用 quiver 绘制光流。我可以绘制光流线，但不能绘制箭头。此代码与 Matlab 教程中的类似示例。以下是代码

```
function display_optical_flow (video_file_name)
    vid_reader_obj = vision.VideoFileReader(video_file_name,    'VideoOutputDataType','single');

   optical_flow_calculator = vision.OpticalFlow('Method','Lucas-  Kanade','TemporalGradientFilter','Derivative of Gaussian', 'MotionVectorImageOutputPort', ...
    true, 'OutputValue',  'Horizontal and vertical components in complex form', 'NoiseReductionThreshold',0.02);

    screen_size = get(0, 'ScreenSize');
    player_window_pos = [20 screen_size(4)-300 400 400];
    video_display_originalVideo = vision.VideoPlayer('Name', 'Original Input Video',    'Position', player_window_pos);
    player_window_pos(1) = player_window_pos(1) + 500;
    video_display_opticalFlow = vision.VideoPlayer('Name','Optical Flow Vector', 'Position',player_window_pos);
    player_window_pos(1) = player_window_pos(1) + 500;
video_display_of_image = vision.VideoPlayer('Name','Optical Flow image', 'Position',player_window_pos);

shape_inserter_line = vision.ShapeInserter('Shape','Lines', 'BorderColor','Custom','CustomBorderColor', [255 255 0]);

motion_vector_gain=20;
decimFactorRow = 5;
decimFactorCol = 5;
borderOffset   = 5;

flag_first_time = true;

while ~isDone(vid_reader_obj)
   cur_rgb_frame = step(vid_reader_obj);
   cur_gray_frame = rgb2gray(cur_rgb_frame);

   [optical_flow_vector IMV]= step(optical_flow_calculator, cur_gray_frame);
   %magnitude of optical flow vectors by dot product
   %of_magnitude= optical_flow_vector .* conj(optical_flow_vector);

   if true == flag_first_time
       flag_first_time = false;
      [row col] = size(optical_flow_vector);
       rowV = borderOffset:decimFactorRow:(row-borderOffset);
      colV = borderOffset:decimFactorCol:(col-borderOffset);
      [Y X] = meshgrid(rowV, colV);
   end

     lines =videooptflowlines(optical_flow_vector, 20);
   if ~isempty(lines)
      motion_vectors =  step(shape_inserter_line, cur_rgb_frame, lines);
      step(video_display_opticalFlow, motion_vectors);
   end

   %Display 
   step(video_display_originalVideo, cur_rgb_frame);
   step(video_display_of_image, IMV);
% 
   [Xsize Ysize] = meshgrid(1:size(cur_gray_frame, 2), 1:size(cur_gray_frame, 1));

   imshow(cur_gray_frame); hold on;
   Real_part = real(optical_flow_vector(:));
   Imag_part = imag(optical_flow_vector(:));
   quiver(Xsize(:), Ysize(:), Real_part(:), Imag_part(:), 0);
   pause;

end
release (video_display_opticalFlow);
release (video_display_originalVideo);
release (vid_reader_obj); 
```

这不会像我期望的那样通过颤动在每帧图像上看到的箭头显示。我应该做些什么来纠正代码？尼丁

# javascript - PreloadJS 未定义（Windows 8 游戏编程）

> ID：12996137
> 
> 赞同：4
> 
> 时间：2012-10-21T08:18:39.380
> 
> 标签：javascript, debugging, windows-8, microsoft-metro, createjs

我是 Metro 风格编程的新手，所以我在[http://www.sitepoint.com/creating-a-simple-windows-8-game-with-javascript-game-basics-createjseaseljs/](http://www.sitepoint.com/creating-a-simple-windows-8-game-with-javascript-game-basics-createjseaseljs/)中学习使用 createJS 的游戏的教程. 这里的代码

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>game</title>

<!-- WinJS references -->
<link href="//Microsoft.WinJS.1.0.RC/css/ui-dark.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.1.0.RC/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0.RC/js/ui.js"></script>

<!-- game references -->
<link href="/css/default.css" rel="stylesheet" />
<script src="/js/default.js"></script>
<script src="/js/CreateJS/easeljs-0.5.0.min.js"></script>
<script src="/js/CreateJS/preloadjs-0.2.0.min.js"></script>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
</body>
</html> 
```

这是javascript代码

```
// For an introduction to the Blank template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232509
(function () {
"use strict";

var app = WinJS.Application;
var activation = Windows.ApplicationModel.Activation;
WinJS.strictProcessing();

function initialize() {
    canvas = document.getElementById("gameCanvas");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    context = canvas.getContext("2d");

    preload = new PreloadJS();
    preload.onComplete = prepareGame;
    var manifest = [
        { id: "screenImage", src: "images/Backgrounds/gameplay_screen.png" },
        { id: "redImage", src: "images/Catapults/Red/redIdle/redIdle.png" },
        { id: "blueImage", src: "images/Catapults/Blue/blueIdle/blueIdle.png" },
        { id: "ammoImage", src: "images/Ammo/rock_ammo.png" },
        { id: "winImage", src: "images/Backgrounds/victory.png" },
        { id: "loseImage", src: "images/Backgrounds/defeat.png" },
        { id: "blueFire", src: "images/Catapults/Blue/blueFire/blueCatapult_fire.png" },
        { id: "redFire", src: "images/Catapults/Red/redFire/redCatapult_fire.png" },
    ];

    preload.loadManifest(manifest);

    stage = new Stage(canvas);
}

function prepareGame() {
    bgImage = preload.getResult("screenImage").result;
    bgBitmap = new Bitmap(bgImage);
    bgBitmap.scaleX = SCALE_X;
    bgBitmap.scaleY = SCALE_Y;
    stage.addChild(bgBitmap);

    stage.update();
}

function gameLoop() {

}

function update() {

}

function draw() {

}

var canvas, context, stage;
var bgImage, p1Image, p2Image, ammoImage, p1lives, p2lives, title, endGameImage;
var bgBitmap, p1Bitmap, p2Bitmap, ammoBitmap;
var preload;

// Current Display Factor. Because the orignal assumed a 800x480 screen
var SCALE_X = window.innerWidth / 800;
var SCALE_Y = window.innerHeight / 480;
var MARGIN = 25;
var GROUND_Y = 390 * SCALE_Y;

app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }
        args.setPromise(WinJS.UI.processAll());
    }
};

app.oncheckpoint = function (args) {
    // TODO: This application is about to be suspended. Save any state
    // that needs to persist across suspensions here. You might use the
    // WinJS.Application.sessionState object, which is automatically
    // saved and restored across suspension. If you need to complete an
    // asynchronous operation before your application is suspended, call
    // args.setPromise().
};

document.addEventListener("DOMContentLoaded", initialize, false);

app.start();
})(); 
```

现在的问题是，每当我尝试编译代码时，它都会给我 Preload is undefined 错误。我不明白我将脚本包含在 HTML 中并在我的项目中包含文件的原因。有人请帮助这个问题在过去的一个小时里一直在杀死我，我只想制作一个简单的游戏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T22:40:25.387

原因是这些库已放置在“createjs”命名空间下。为了实例化 PreloadJS 对象，请执行以下操作：

```
var preload = new createjs.PreloadJS(); 
```

那应该让你回到快乐的道路上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T04:17:12.290

（在 PreloadJS 0.3.0 发布后于 2013 年 2 月尝试）

我刚刚使用最新版本的 EaselJS 尝试了来自 sitepoint.com 的教程（[http://www.sitepoint.com/creating-a-simple-windows-8-game-with-javascript-game-basics-createjseaseljs/](http://www.sitepoint.com/creating-a-simple-windows-8-game-with-javascript-game-basics-createjseaseljs/)）和 PreloadJS，但一开始我无法让代码在没有错误的情况下运行。

新版 PreloadJS (v0.3.0) 已将旧的 PreloadJS 类重命名为 LoadQueue。

请参阅以下链接中的文档：

*   [http://www.createjs.com/Docs/PreloadJS/classes/PreloadJS.html](http://www.createjs.com/Docs/PreloadJS/classes/PreloadJS.html)
*   [http://www.createjs.com/Docs/PreloadJS/classes/LoadQueue.html](http://www.createjs.com/Docs/PreloadJS/classes/LoadQueue.html)

但是在使用 v0.3.0 的同时简单地使用新类并不能修复项目。较新的版本有额外的不兼容性（例如 image.width 无效），可能可以通过反复试验来修复。

我必须下载旧的 PreloadJS v0.2.0：

*   [https://github.com/CreateJS/PreloadJS/tags](https://github.com/CreateJS/PreloadJS/tags)

**简而言之：**如果我使用 SitePoint 教程，我必须坚持使用 PreloadJS v0.2.0 并使用 createjs 命名空间。

*注意*：之前的回复中提到的示例项目也不起作用，因为它的 WinJS 引用无效。手动添加引用似乎也不起作用。

*   [https://github.com/dave-pointbypoint/CatapultGame](https://github.com/dave-pointbypoint/CatapultGame)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T16:18:20.390

Move your default.js in the HTML to be *after* the preloadjs & easel code.

This is because the order of inclusion is important to JavaScript

# angularjs - 通过 ng-submit 找到触发按钮

> ID：12996138
> 
> 赞同：9
> 
> 时间：2012-10-21T08:18:52.637
> 
> 标签：angularjs

我如何通过***ng-submit在******表单***中找到触发按钮 并在此按钮中获取属性

 *```
<form ng-submit="submit()" ng-controller="Ctrl">
  <input type="submit" att1="A" att2="B" value="Edit" />
  <input type="submit" att1="C" att2="D" value="Delete" />
</form>

<script>
  function Ctrl($scope) {
    $scope.submit = function() {
      alert(this.att1)
      alert(this.att2)
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T23:15:46.410

您可以在提交之前使用 ng-click 更改范围的值

```
<form ng-submit="submit()" ng-controller="Ctrl">
  <input type="submit" ng-click="setAtts('A', 'B')" value="Edit" />
  <input type="submit" ng-click="setAtts('C', 'D')" value="Delete" />
</form>

<script>
  function Ctrl($scope) {
    $scope.submit = function() {
      alert($scope.att1);
      alert($scope.att2);
    };

    $scope.setAtts = function(a1, a2) {
      $scope.att1 = a1;
      $scope.att2 = a2;
    };
  }
</script> 
```

编辑：附带说明`$event`不适用于 ng-submit，如果您有兴趣使用`$event.target`（无论如何可能不应该从控制器完成）*

# c# - 使用 IntegratedSecurity 时出现 SSL 提供程序错误

> ID：12996142
> 
> 赞同：-1
> 
> 时间：2012-10-21T08:19:43.320
> 
> 标签：c#, asp.net, sql-server-2008

```
SqlConnection cnn = new SqlConnection();
cnn.ConnectionString = "Data Source=.;Database = deptStore;Integrated Security = true;";
cnn.Open();
SqlCommand cmd = new SqlCommand();
cmd.CommandText = "insert into Employee values('" + TextBox1.Text + "','" + TextBox2.Text + "','" + TextBox3.Text + "','" + TextBox4.Text + "','" + TextBox5.Text + "','" + TextBox6.Text + "','" + TextBox7.Text + "','" + TextBox8.Text + "','" + TextBox9.Text + "','" + TextBox10.Text + "','" + TextBox11.Text + "','" + TextBox12.Text + "','" + TextBox13.Text + "')";
cmd.Connection = cnn;
cmd.ExecuteNonQuery();
Response.Write("Record Save");
cnn.Close(); 
```

但我收到以下错误：

SqlConnection cnn = new SqlConnection(); cnn.ConnectionString = "数据源 =.;数据库 = deptStore;集成安全 = true;";

```
 cnn.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = "insert into Employee values('" + TextBox1.Text + "','" + TextBox2.Text + "','" + TextBox3.Text + "','" + TextBox4.Text + "','" + TextBox5.Text + "','" + TextBox6.Text + "','" + TextBox7.Text + "','" + TextBox8.Text + "','" + TextBox9.Text + "','" + TextBox10.Text + "','" + TextBox11.Text + "','" + TextBox12.Text + "','" + TextBox13.Text + "')";
            cmd.Connection = cnn;
            cmd.ExecuteNonQuery();
            Response.Write("Record Save");
            cnn.Close(); 
```

但是我收到以下错误：用户代码未处理 SqlException

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

请帮助我理解错误并纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:09:44.433

确保您已在 SQL Server 配置管理器中启用 TCP/IP：在 SQL Server 配置管理器[中启用网络访问](http://msdn.microsoft.com/en-US/library/ms165718%28v=sql.90%29.aspx)

另外，启动 SQL Server Browser 服务：[启动和停止 SQL Server Browser 服务](http://msdn.microsoft.com/en-us/library/ms165734%28v=sql.90%29.aspx)

# java - 在运行时更改可访问性

> ID：12996143
> 
> 赞同：3
> 
> 时间：2012-10-21T08:19:44.410
> 
> 标签：java

[如此处](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)所述：

*“可访问性是可以在**编译时**确定的静态属性；它仅取决于类型和声明修饰符。”*

在这种情况下，函数在**运行时**`java.lang.reflect.Field.setAccessible(boolean)`真正做了什么？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T08:33:00.060

`setAccessible` **不会改变成员的可访问性级别**。它只允许**通过反射**访问某个成员。这并没有明确破坏可访问性规则，因为您的代码并没有真正访问该成员：它**调用了一个反射方法**，该方法在内部执行了一些魔法，代表您访问该成员。

考虑到这一点，还有一个关键点需要注意：Java 还有一个非常强大且不可穿透的安全系统，可以拒绝对外部代码使用反射。每当需要时，这种机制可用于真正防止访问私有成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:34:17.143

您的报价不适用于反射 API。[JLS #1.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-1.html#jls-1.4)明确指出，您可以通过 JLS 未明确授权的反射操作来实现：

> 因此，本规范没有详细描述反射。许多语言结构在反射 API 中都有类似物，但这里一般不讨论。因此，例如，当我们列出可以创建对象的方式时，我们通常不包括反射 API 可以完成此操作的方式。读者应该知道这些额外的机制，即使它们在本文中没有提到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T08:24:48.620

我允许您使用反射更改对象的可访问性，正如您所期望的那样。从类的[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28java.lang.reflect.AccessibleObject%5B%5D,%20boolean%29)`AccessibleObject`：

> 在反射对象中设置可访问标志允许具有足够特权的复杂应用程序（例如 Java 对象序列化或其他持久性机制）以通常被禁止的方式操作对象。**

# iphone - iOS 6 文档文件夹不会自动更新文件

> ID：12996144
> 
> 赞同：2
> 
> 时间：2012-10-21T08:19:56.633
> 
> 标签：iphone, objective-c, ios6, xcode4.5

iOS 6、iPhone 5、Xcode 4.5

我有一个应用程序，让用户可以将文件从 Internet 下载到文档文件夹，然后将它们填充到数组中，然后再填充到 tableview 中。在 iOS 5 中，我的数组和表格视图会在 viewWillAppear 中使用以下代码自动更新：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSArray *dataArray = [[NSBundle bundleWithPath:[paths objectAtIndex:0]] pathsForResourcesOfType:@"mp3" inDirectory:nil]; 
```

在 iOS 6 中，我注意到添加/删除新文件时文档文件夹不会自行更新，除非我退出应用程序（从底部的多任务处理中退出）并重新打开它，然后它将重新加载文档文件夹中的新数据。

即使当我的应用程序使用上面相同的代码加载 viewWillAppear 时，数据仍然很旧。似乎iOS 6现在有一个文档文件夹缓存，并且在应用程序重新启动之前缓存不会更新！

它在 iOS 5 中运行良好。

感谢阅读和帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:17:01.460

You should not use NSBundle to access files in the documents directory. Instead use NSFileManager:

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString* path = [paths objectAtIndex:0];
 NSError* error;
 NSFileManager* fm = [NSFileManager defaultManager];

 for(NSString* filename in [fm contentsOfDirectoryAtPath:path error:&error]) {
    if([filename hasSuffix:@"mp3"]) {
      NSString *filePath = [path stringByAppendingPathComponent:filename];
      [_filelist addObject:filePath];
    }
 } 
```

# c# - 将 EBNF 转换为 C# 以供编译器使用

> ID：12996149
> 
> 赞同：2
> 
> 时间：2012-10-21T08:20:32.227
> 
> 标签：c#, compiler-construction, ebnf

我正在尝试学习将**EBNF**转换为**C# 代码。**

样本：`int <ident> = <expr>`

我理解它的说法“这种数据类型**（int）的变量****（ident）**接受**（=）**一个整数**（expr），**但我不明白如何将其转换为：

 ********来自 Ast 班**

```
public class Int : Stmt
{
    public string Ident;
    public Expr Expr;
} 
```

**来自 Parser 类**

```
 #region INTEGER VARIABLE
    else if (this.tokens[this.index].Equals("int"))
    {
        this.index++;
        Int Integer = new Int();

        if (this.index < this.tokens.Count &&
            this.tokens[this.index] is string)
        {
            Integer.Ident = (string)this.tokens[this.index];
        }
        else
        {
            throw new System.Exception("expected variable name after 'int'");
        }

        this.index++;

        if (this.index == this.tokens.Count ||
            this.tokens[this.index] != Scanner.EqualSign)
        {
            throw new System.Exception("expected = after 'int ident'");
        }

        this.index++;

        Integer.Expr = this.ParseExpr();
        result = Integer;
    }
    #endregion 
```

**来自 CodeGen 类**

```
 #region INTEGER
    else if (stmt is Int)
    {
        // declare a local
        Int integer = (Int)stmt;
        this.symbolTable[integer.Ident] = this.il.DeclareLocal(this.TypeOfExpr(integer.Expr));

        // set the initial value
        Assign assign = new Assign();
        assign.Ident = integer.Ident;
        assign.Expr = integer.Expr;
        this.GenStmt(assign);
    }
    #endregion 
```

有人可以为我指出正确的方向如何正确理解如何转换吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:44:00.037

[为什么不使用像AntLR](http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target)这样的编译器编译器？它会自动完成，而且速度更快:)******

# vim - 默认 Omnicomplete 支持

> ID：12996152
> 
> 赞同：1
> 
> 时间：2012-10-21T08:20:57.147
> 
> 标签：vim, omnicomplete

我刚刚启用了omnicomplete功能（我正在使用Vim7.3），我想尝试一下，所以我写了一个test.c：

```
int main
{
   int appleInc;
   app_
} 
```

“_”是当前光标所在的位置。但是当我按下 Ctrl X 或 Ctrl O 时，什么都没有弹出。它只是说找不到模式。

我对此有点困惑。它至少不应该支持变量自动完成吗？这是我在 .vimrc 中添加的内容：

```
filetype plugin on
ofu=syntaxcomplete#Complete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:17:15.160

The correct shortcut for omnicompletion is `<C-x><C-o>` that's `<C-x>` *then* `<C-o>`.

In this case, you want `<C-n>`/`<C-p>` to complete with a keyword from the current buffer and other sources or `<C-x><C-n>`/`<C-x><C-p>` to complete with a keyword from the current buffer only.

See `:help ins-completion`.

# sql - 如何使一个表中的 SQL 约束影响另一个表

> ID：12996155
> 
> 赞同：1
> 
> 时间：2012-10-21T08:21:28.563
> 
> 标签：sql, oracle, triggers, constraints

我有三张桌子

*   账单
*   记录
*   房子

在录制中，我有一个名为 DateRecored 的列。在 bill 中，我有一个名为 duedate 的列，而在 House 中，我有一个名为 Operational 的列。

我需要做一个限制，以便当账单逾期 60 天时，Operational 列将变为停用。

如果您需要信息，请告诉我，但我觉得这就是您所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:26:10.130

约束仅在您插入/更新/删除记录时生效。在您的情况下，Bill 表中给定记录的年龄应该触发不同表中的更改，并且您需要定期作业来执行此操作。如果没有任何用户触发的 DML 操作，DBMS 不会促进这种自动更新（通过触发器或约束）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:39:24.323

如前所述，您正在寻找的是触发器，而不是约束。在 Oracle 中使用 DBMS_SCHEDULER，触发器将如下所示：

```
BEGIN
  DBMS_SCHEDULER.create_job (
    job_name        => 'update_operational_after',
    job_type        => 'PLSQL_BLOCK',
    job_action      => 'BEGIN UPDATE house set operational=false where id in (select house.id from House join Bill on (bill.house_id=house.id) where duedate > sydate+60; END;',
    start_date      => SYSTIMESTAMP,
    repeat_interval => 'freq=daily; byminute=0;byhour=0;byminute=0;bysecond=0',
    end_date        => NULL,
    enabled         => TRUE,
    comments        => 'Updates all operational to false if they've passed the due date');
END;
/ 
```

这会将给定的更新安排在每天午夜执行。

# c# - C# WebBrowser 不显示图像

> ID：12996156
> 
> 赞同：3
> 
> 时间：2012-10-21T08:21:38.797
> 
> 标签：c#, image, browser

我在 C# 中的 WebBrowser 控件表现得很奇怪，有时它不显示任何图片..

但我可以在 Fiddler 或代理服务器中看到它正在加载它们！

例如 Stackoverflow 网站：

![Stackoverflow 网站](../Images/17b34b332e55c2b850c1069f7fbcf6b0.png)

如您所见，Stackoverflow 徽标不存在，在 android 标签的一侧，图片丢失，并且用户头像丢失..

但是当我在 IE 中打开站点时，一切都很好。

我的浏览器仿真注册表项在 9000 上（也尝试过 9999）..

当然，我也清除了 Internet Explorer 的缓存..

有什么建议么？

# javascript - javascript 字符串作为命令行，为什么不使用 eval()？

> ID：12996158
> 
> 赞同：2
> 
> 时间：2012-10-21T08:21:44.337
> 
> 标签：javascript, string, function, window, eval

> **可能重复：**
> [为什么使用 JavaScript eval 函数是个坏主意？](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)

因此，我已经阅读了许多不同的方法来从字符串调用函数，使用`window[]();`和`eval();`. 我想知道对于我的情况（如下），哪种方法是正确的方法，如果是，请解释原因。还要解释为什么`eval();`这不是一个好的选择，很多人说安全，但是如果您可以获得任何能够让您更改该页面上的脚本的浏览器插件，为什么安全会成为一个问题？（例如：火狐的萤火虫）

我当前的代码：

```
funcOne(target).funcTwo(x, y, z); 
```

如何使用推荐的`window[]();`方式调用它？为什么我不能使用这个？：

```
eval('funcOne(target).funcTwo(x, y, z)'); 
```

我不希望你多次被问到这个问题而烦恼，因为我目前想不出一种方法来调用一个调用它的双重函数。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:32:56.827

在 Javascript 中，语法`a.b`可以替换为`a["b"]`. 所以在你的情况下你可以使用

```
window["funcOne"](target)["funcTwo"](x, y, z); 
```

`"funcOne"`当然，只有在使用变量而不是and时才有意义`"funcTwo"`。

如果一切都是固定的，但您只是想延迟执行，您可以使用带有匿名闭包的“thunking”

```
x = function(){ return funcOne(target).funcTwo(x, y, z); }; 
```

然后您可以评估 with`x()`以在以后获得所需的结果。

即使变量`target`and和是封闭范围的本地变量，最后一个示例也将正常工作，因为 thunking 闭包将“捕获”它们`x`。`y``z`

但是，您应该注意这样一个事实，即在 Javascript 中创建新范围的唯一方法是使用函数（一个被包围的块，`{`而`}`不是像 C++ 和其他语言中那样的范围）。

如果你需要在一个循环中创建几个闭包，这可能会反击，并且是一个非常常见的错误的根源......

```
for (var i=0; i<options.length; i++)
{
    var menu_item = document.createElement("div");
    menu_item.textContent = "Option " + i;
    menu_item.onclick = function () {
        // Warning this will NOT work. All divs will
        // alert using the same number!
        alert("Option " + i + " selected");
    }
    menu.appendChild(menu_item);
} 
```

在这里，我为 div 上的事件使用了一个闭包`onclick`，但这不起作用，因为所有这些函数都将使用相同的`i`变量。因为在 Javascript 中创建作用域的唯一方法是使用函数，所以解决方案是：

```
for (var i=0; i<options.length; i++)
{
    var menu_item = document.createElement("div");
    menu_item.textContent = "Option " + i;
    (function(i){
         menu_item.onclick = function () {
             alert("Option " + i + " selected");
         };
     })(i); // Pass current `i` as parameter
    menu.appendChild(menu_item);
} 
```

这样，处理程序中的变量`i`对于`onclick`每个闭包都是不同的。

当您需要创建许多独立的闭包时，这种创建函数只是为了立即调用它的模式通常在 Javascript 中使用，因此最好了解和理解它。

# java - android 视频录制应用程序的 Frate Rate - 需要大约每秒 30 帧 ..！

> ID：12996161
> 
> 赞同：0
> 
> 时间：2012-10-21T08:21:58.980
> 
> 标签：java, android, camera, android-camera, frame-rate

以下是有助于捕获视频的代码，但问题在于帧速率，因为我已经将帧速率定义为每秒 30 帧。使用前置摄像头录制视频时，每秒输出 8 帧，后置摄像头最多输出 15 到 18 帧

```
private void startRecording() {

    if(mrec != null){
        mrec.reset();   
    }

    mCamera.unlock();
    mrec.setCamera(mCamera);
    mrec.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    mrec.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
    mrec.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mrec.setVideoSize(640, 480);
    mrec.setVideoEncodingBitRate(3000000);
    mrec.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
    mrec.setVideoEncoder(MediaRecorder.VideoEncoder.H264);// MPEG_4_SP

    File dir = new File(SdCardPath + Directory);
    if (!dir.exists()) {
        if (dir.mkdir()) {
            Log.v(STORAGE_SERVICE, "Created directory");
        } else {
            Log.v(STORAGE_SERVICE, "Failed to create Directory");
        }
    }

    FullFilePath = SdCardPath + Directory + RecordFileName;

    mrec.setOutputFile(FullFilePath);
    mrec.setVideoFrameRate(30);
    mrec.setPreviewDisplay(surfaceHolder.getSurface());
    try {
        mrec.prepare();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    mrec.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:21:24.170

根据android文档

```
mrec.setVideoFrameRate(30); 
```

可能无法像您期望的那样工作。如果您的设备无法为您提供每秒 30 帧的速度，那么就会有一些内部剪辑，并且帧速率将设置为设备支持的最大帧速率。

此外，在实践中，我观察到，即使对于合法值，setVideoFrameRate() 调用也不可靠，实际帧速率可能与您传递给此函数的值不同。

# ruby-on-rails - Rails 脚注部分计数始终为零

> ID：12996166
> 
> 赞同：2
> 
> 时间：2012-10-21T08:22:32.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3, debugging, ruby-on-rails-3.2, footnotes

我在 Rails 3.2 应用程序中使用[rails-footnotes](https://github.com/josevalim/rails-footnotes) gem，但我似乎无法获得脚注来注册任何部分的存在：它总是显示零部分计数。

我认为，能够像这样轻松地知道视图上显示了多少和哪些部分非常有用，所以我真的很想让这个工作（其余工作很好），但我不确定是什么问题是并且我希望其他人也有同样的问题并且能够解决它。有没有我可能错过的设置？

我认为这无关紧要，但我使用的是 OSX 10.6.8，并且在让 gem 正确使用 Sublime Text 2 时遇到了一些问题，但它们确实得到了解决（详情见[StackOverflow 答案](https://stackoverflow.com/a/11619954/567863)）。

**更新**：

似乎该问题仅存在于 haml 模板，因为我得到了 erb 模板的预期输出。似乎只有 erb 模板被计算/识别......？

**更新 2**：

@DonHopkins 在下面的回答让我所有的 Haml 模板都可以在 Rails 脚注中注册。我把它放在我的配置文件中，如下所示：

**配置/初始化程序/rails_footnotes.rb**

```
if defined?(Footnotes) && Rails.env.development?
  Footnotes.run! # first of all
  Footnotes::Notes::LogNote::LoggingExtensions.module_eval do
    def add(*args, &block)
      super
      logged_message = args[2] + "\n"
      Footnotes::Notes::LogNote.log(logged_message)
      logged_message
    end
  end

  # ... other init code
  Footnotes::Filter.prefix = 'subl://open?url=file://%s&line=%d&column=%d'
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:06:03.427

我有一个类似的问题，虽然我使用的是 erb 模板，而不是 haml。我用猴子补丁将它固定到rails-footnotes。

查看 rails-footnotes 代码（版本 3.7.9），在我看来问题出在这种方法中：

```
module Footnotes
  module Notes
    class LogNote < AbstractNote
      ...
      module LoggingExtensions
        def add(*args, &block)
          logged_message = super
          Footnotes::Notes::LogNote.log(logged_message)
          logged_message
        end
      end
      ...
    end
  end
end 
```

该`add`方法假设`super`返回正在记录的消息，但在我的测试`super`中返回一个布尔值。为了解决这个问题，我创建了一个名为 footnotes_patch.rb 的文件，其中包含以下内容：

```
Footnotes::Notes::LogNote::LoggingExtensions.module_eval do
  def add(*args, &block)
    super
    logged_message = args[2] + "\n"
    Footnotes::Notes::LogNote.log(logged_message)
    logged_message
  end
end 
```

如果您想尝试解决方案，请将该文件放在 config/initializers 中，然后重新启动您的应用程序。

# android - 如何在lazyadapter->getItem() 中设置onclicklistener 并在onClick 方法中启动活动

> ID：12996168
> 
> 赞同：0
> 
> 时间：2012-10-21T08:23:06.303
> 
> 标签：android, android-layout, button, android-intent

我在列表视图中有两个“编辑”和“删除”按钮，当用户单击一个按钮时，我必须启动一个新活动“EditActivity 或 DeleteActivity”来编辑和删除按钮。

`公共类 DepartmentAdapter 扩展 ArrayAdapter 实现 OnClickListener {

```
int resource;
String response;
Context context;
//Initialize adapter
public DepartmentAdapter(Context _context, int resource, ArrayList<Department> items) {
    super(_context, resource, items);
    this.resource=resource;

    context = _context;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
        LinearLayout deptView;
    //Get the current Department  object
    Department dept = getItem(position);

    //Inflate the view
    if(convertView==null)
    {
        deptView = new LinearLayout(getContext());
        String inflater = Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater vi;
        vi = (LayoutInflater)getContext().getSystemService(inflater);
        vi.inflate(resource, deptView, true);
    }
    else
    {
        deptView = (LinearLayout) convertView;
    }
    //Get the text boxes from the listitem.xml file
    TextView id =(TextView)deptView.findViewById(R.id.Id);
    TextView sname =(TextView)deptView.findViewById(R.id.sname);
    TextView name =(TextView)deptView.findViewById(R.id.name); 
    //Assign the appropriate data from our Department object above
    id.setText(Integer.toString(dept.getID()));
    sname.setText(dept.getDepartmentShortName());
    name.setText(dept.getDepartmentName());

    Button edit = (Button)deptView.findViewById(R.id.edit);
    //del= (Button)deptListView.findViewById(R.id.del);
    ShowDepertment  d = new ShowDepertment();       

    edit.setOnClickListener(this);

}

public void onClick(View v) {

    Intent myIntent = new Intent(context , AddDepertment.class);
    myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(myIntent);        
} 
```

}`

在 onclick() 中，无法启动活动并出现错误：

`10-21 13:15:11.116: E/AndroidRuntime(11718): FATAL EXCEPTION: main 10-21 13:15:11.116: E/AndroidRuntime(11718): java.lang.NullPointerException 10-21 13:15:11.116: E/AndroidRuntime(11718): at my.mewappattendance.myAdapters.DepartmentAdapter.getView(DepartmentAdapter.java:80) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.AbsListView.obtainView(AbsListView.java:2033) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.ListView.measureHeightOfChildren(ListView.java:1244) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.ListView.onMeasure(ListView.java:1155) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.View.measure(View.java:12727) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.LinearLayout.measureVertical(LinearLayout.java:660) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.LinearLayout.onMeasure(LinearLayout.java:553) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.View.measure(View.java:12727) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1196) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.LinearLayout.onMeasure(LinearLayout.java:555) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.View.measure(View.java:12727) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.FrameLayout.onMeasure(FrameLayout.java:293) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.View.measure(View.java:12727) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.LinearLayout.measureVertical(LinearLayout.java:812) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.LinearLayout.onMeasure(LinearLayout.java:553) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.View.measure(View.java:12727) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.widget.FrameLayout.onMeasure(FrameLayout.java:293) 10-21 13:15:11.116: E/AndroidRuntime(11718): at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.View.measure(View.java:12727) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1068) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2446) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.os.Handler.dispatchMessage(Handler.java:99) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.os.Looper.loop(Looper.java:137) 10-21 13:15:11.116: E/AndroidRuntime(11718): at android.app.ActivityThread.main(ActivityThread.java:4424) 10-21 13:15:11.116: E/AndroidRuntime(11718): at java.lang.reflect.Method.invokeNative(Native Method) 10-21 13:15:11.116: E/AndroidRuntime(11718): at java.lang.reflect.Method.invoke(Method.java:511) 10-21 13:15:11.116: E/AndroidRuntime(11718): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 10-21 13:15:11.116: E/AndroidRuntime(11718): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 10-21 13:15:11.116: E/AndroidRuntime(11718): at dalvik.system.NativeStart.main(Native Method)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:35:40.167

发生这种情况是因为当您单击按钮时，GC 会从内存中删除 Adapter 类，因此您必须通过以下方式向按钮添加侦听器：

```
button.setOnClickListener(new OnClickListener(){

@Override
public void onClick(View v) {
}
}); 
```

# sql - 如何将行拆分为列

> ID：12996170
> 
> 赞同：3
> 
> 时间：2012-10-21T08:23:42.037
> 
> 标签：sql, sql-server, sql-server-2000

使用`SQL Server 2000`

表格1

```
ID

A001
A002
A003
A004
A005
A006
A007
....
....
A028 
```

从上表中，我想将 3 行分成 3 列，按顺序排列`id`

行显示如下

预期产出

```
id1 id2 id3

A001 A002 A003
A004 A005 A006
A007 A008 A009
...
...
A025 A026 A027
A028 null null 
```

ID 不固定，id 也可能包含这样的 ( `01A or A001 or 1A1 or etc....`)

表 1 的行数不固定，也可能超过 100 行。第 3 列是固定的。如何查询上述条件。

需要查询帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:42:43.403

我会这样做：

*   替换`A`这些 ID 中的任何内容并将它们转换为整数
*   写三个`SELECT`语句，条件是上面步骤 %3 中计算的整数 ID 分别为 1、2、0，以产生每一行中的记录。
*   现在，我们需要 JOIN 这三个 SELECT 语句的结果，如果您使用的是 SQL Server 2005，那么`ROW_NUMBER()`会很方便，但由于您使用的是 SQL Server 2000，因此您将使用`IDENTITY(INT, 1, 1)`这些 SELECT 中的每一行生成行号声明并加入这个值。

但是由于`IDENTITY`只能在`SELECT`with`INTO`子句中使用，因此您最终会得到包含每列并加入它们的临时表。

```
SELECT IDENTITY(INT, 1, 1) AS 'RowNum', ID FROM INTO #Row1 Table1
WHERE CONVERT(INT, REPLACE(ID, 'A', '')) % 3 = 1

SELECT IDENTITY(INT, 1, 1) AS 'RowNum', ID FROM INTO #Row2 Table1
WHERE CONVERT(INT, REPLACE(ID, 'A', '')) % 3 = 2

SELECT IDENTITY(INT, 1, 1) AS 'RowNum', ID FROM INTO #Row3 Table1
WHERE CONVERT(INT, REPLACE(ID, 'A', '')) % 3 = 0

SELECT 
    r1.ID id1,
    r2.ID id2,
    r3.ID id3
FROM
    #Row1 r1
    FULL OUTER JOIN #Row2 r2
    ON r1.RowNum = r2.RowNum
    FULL OUTER JOIN #Row3 r3
    ON r3.RowNum = r3.RowNum

DROP TABLE #Row1
DROP TABLE #Row2
DROP TABLE #Row3 
```

如果您使用的是 SQL Server 2005 或更高版本，则所有这些都可以在单个查询中完成，如下所示：

```
SELECT 
    R1.ID,
    R2.ID,
    R3.ID
FROM 
    (
        SELECT ROW_NUMBER() OVER (ORDER BY ID ASC) AS RowNum, ID 
        FROM ATABLE 
        WHERE 
            CONVERT(INT, REPLACE(ID, 'A', '')) % 3 = 1
    ) AS R1
    FULL OUTER JOIN (
        SELECT ROW_NUMBER() OVER (ORDER BY ID ASC) AS RowNum, ID 
        FROM ATABLE 
        WHERE 
            CONVERT(INT, REPLACE(ID, 'A', '')) % 3 = 2
    ) AS R2
    ON R1.RowNum = R2.RowNum
    FULL OUTER JOIN (
        SELECT ROW_NUMBER() OVER (ORDER BY ID ASC) AS RowNum, ID 
        FROM ATABLE 
        WHERE 
            CONVERT(INT, REPLACE(ID, 'A', '')) % 3 = 0
   ) AS R3
    ON R2.RowNum = R3.RowNum 
```

# mysql - sql双连接orderby

> ID：12996172
> 
> 赞同：0
> 
> 时间：2012-10-21T08:23:54.887
> 
> 标签：mysql

目前我有一张如下表

```
Table1
   hTeam-----aTeam-------date---

    3----------5 ------2012/01/01

    4 -------- 7 ------2012/01/04

    2 -------- 8 ------2012/01/05 
```

我有一个使用双内连接来获取 id1 和 id2 的值，代码如下：

```
 Select hTeam As col1,
    aTeam As col2
    From fixtures as t
    Join team as d1 On ( d1.teamid = t.col1)
    Join team as d2 On ( d2.team = t.col2 ) 
```

这将创建一个像这样的表

```
Table2
    hTeam-------------aTeam--

    Teamname1-------TeamName1 

    TeamName2 ----- Teamname2 

    TeamName3 ----- TeamName4 
```

我不希望团队名称匹配，即我想要 table1 的精确复制，尽管团队名称如下

```
Table3
    hTeam-------------aTeam--

    Teamname3-------TeamName5 

    TeamName4 ----- Teamname7 

    TeamName2 ----- TeamName8 
```

希望我解释得足够好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:26:40.597

不完全确定问题是什么，因为您似乎几乎有它：

```
SELECT h.name AS home, a.name AS away
FROM   fixtures AS f
  JOIN team AS h ON h.teamid = f.hTeam
  JOIN team AS a ON a.teamid = f.aTeam 
```

# cuda - 从 CUDA 转换到 OpenCL 时我错过了什么？或者为什么我的内核返回的输出与串行代码不同

> ID：12996176
> 
> 赞同：1
> 
> 时间：2012-10-21T08:24:41.063
> 
> 标签：cuda, opencl

这是我以压缩列格式乘以稀疏矩阵的代码

```
__kernel void mykernel(__global int* colvector,
                       __global int* val,
                       __global int* result,
                       __global int* index,
                       __global int* rowptr,
                       __global int* sync )
{   
    __local int vals[1000];
    for(int i=0;i<4;i++)
    {
        result[i]=0;
    }
    barrier(CLK_LOCAL_MEM_FENCE);
    barrier(CLK_GLOBAL_MEM_FENCE);

    const int items_per_row=32;//total threads working in a row

    const int thread_id=get_global_id(0)+get_local_id(0);//total threads in the program

    const int warpid = thread_id/items_per_row;//warp id is actual row

    int lane=thread_id&(items_per_row-1);//thread id within the warp

    int row = warpid;

    if(row<4)
    {
        int sum = 0;

        int row_start = rowptr[row];
        int row_end = rowptr[row+1];

        vals[get_global_id(0)]=0;
        barrier(CLK_LOCAL_MEM_FENCE);
        barrier(CLK_GLOBAL_MEM_FENCE);

        for (int i = row_start+lane; i<row_end; i+=items_per_row)
        {
            vals[get_local_id(0)]+=val[i]*colvector[index[i]];
        }

        barrier(CLK_LOCAL_MEM_FENCE);
        barrier(CLK_GLOBAL_MEM_FENCE);

        if (lane < 16 ) vals[get_local_id(0)] += vals[get_local_id(0) + 16];

        if (lane < 8 ) vals[get_local_id(0)] += vals[get_local_id(0) + 8];

        if (lane < 4 ) vals[get_local_id(0)] += vals[get_local_id(0) +4];

        if (lane < 2 ) vals[get_local_id(0)] += vals[get_local_id(0) + 2];

        if (lane < 1 ) vals[get_local_id(0)] += vals[get_local_id(0) + 1];

        barrier(CLK_LOCAL_MEM_FENCE);
        barrier(CLK_GLOBAL_MEM_FENCE);

        if(lane==0)
        {
            result[row] += vals[get_local_id(0)];
        }
    }
} 
```

上面的 OpenCL 代码是从下面给出的 CUDA 代码转换而来的：

```
spmv_csr_vector_kernel(const int num_rows,
                       const int * ptr,
                       const int * indices,
                       const float * data,
                       const float * x,
                       float * y )
{
    __shared__ float vals[];

    int thread_id = blockDim.x * blockIdx.x + threadIdx.x; // global thread index

    int warp_id = thread_id / 32; // global warp index

    int lane = thread_id & (32 - 1); // thread index within the warp

    // one warp per row

    int row = warp_id;

    if (row < num_rows)
    {
        int row_start = ptr[row];

        int row_end = ptr[row+1];

        // compute running sum per thread

        vals[threadIdx.x] = 0;

        for(int jj = row_start + lane; jj < row_end; jj += 32)
        {
            vals[threadIdx.x] += data[jj] * x[indices[jj]];
        }
        // parallel reduction in shared memory

        if (lane < 16) vals[threadIdx.x] += vals[threadIdx.x + 16];

        if (lane < 8) vals[threadIdx.x] += vals[threadIdx.x + 8];

        if (lane < 4) vals[threadIdx.x] += vals[threadIdx.x + 4];

        if (lane < 2) vals[threadIdx.x] += vals[threadIdx.x + 2];

        if (lane < 1) vals[threadIdx.x] += vals[threadIdx.x + 1];

        // first thread writes the result

        if (lane == 0)
        {
            y[row] += vals[threadIdx.x];
        }
    }
} 
```

CUDA 代码是正确的，但我的 OpenCL 内核没有返回正确的输出。我已经尝试了一个星期，但没有解决方案。有人知道我犯了什么错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:51:14.400

我至少可以看到一个错误。每个代码中的 thread_id 都不相同。CUDA 中的 blockDim.x * blockIdx.x + threadIdx.x == OpenCL 中的 get_global_id(0)，而不是 get_global_id(0)+get_local_id(0)。还有 get_local_id(0) == threadIdx.x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T15:47:30.727

尝试使用 swan，这可能会帮助您理解您的问题。

[你可以在这里](http://gpgpu.org/2010/03/09/swan)找到一篇关于它的文章。

# iphone - 实例变量到底是什么？为什么它们如此重要？

> ID：12996180
> 
> 赞同：2
> 
> 时间：2012-10-21T08:25:31.137
> 
> 标签：iphone, objective-c, ios, xcode, instance-variables

我一直在阅读相当多的 Objective C 书籍，看到了大量的在线视频教程，但我被困在这一点上。我知道实例变量是在接口中的大括号之间编码的，但是为什么它们如此特殊并且与大括号之外的其他变量甚至接口不同。

前任。

```
@interface CustomClassName : NSObject {
  NSString *myString;
}
@end 
```

为什么不：

```
@interface CustomClassName : NSObject {}
NSString *myString;
@end 
```

或者：

```
@interface CustomClassName : NSObject {}
@end
NSString *myString 
```

他们有什么特别之处？有些人告诉我它是语言的语法。我如何知道是否需要在大括号内声明某些变量。我试着用谷歌搜索这个，阅读我书中的章节，（我有**Head First iPhone and iPad Development** & **Objective C for Absolute Beginners**）但徒劳无功。如果有人可以解释其中的区别，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:36:02.093

所以看起来你对 Objective-C 的世界很陌生。您应该查阅有关该主题的现有材料。它将开始解释一个叫做`@property`'s 的东西，你将开始理解实例变量的用途。

至于我，当我想在我的类实现中使用原始类型时，我会使用 ivars，其值必须在对象的整个生命周期中持续存在。所以像：

```
@interface Person : NSObject {
   int age;
 } 
```

# c# - 当用户从 FolderBrowserDialog 中选择文件夹时，如何在 ViewList 中显示图像图标？

> ID：12996181
> 
> 赞同：0
> 
> 时间：2012-10-21T08:25:30.737
> 
> 标签：c#, listview, imageicon, folderbrowserdialog

所以基本上我想要的是用户按下浏览按钮并弹出一个 FolderBroswerDialog。用户然后选择一个文件夹，然后 ViewList 将在图标视图中填充该文件夹中的所有图像。我怎样才能做到这一点？我目前拥有的代码将从文件夹中选择所有文件并将它们显示在 ListView 中，但是没有图标。如何获得图标？
这是我目前拥有的代码...

```
private void button1_Click(object sender, EventArgs e)
{

    FolderBrowserDialog browsefolder = new FolderBrowserDialog();
    if (browsefolder.ShowDialog() == DialogResult.OK)
    {
        listView1.Items.Clear();

        string[] myfiles = Directory.GetFiles(folderPicker.SelectedPath);
        foreach (string file in myfiles)
        {
            string fileName = Path.GetFileNameWithoutExtension(file);
            ListViewItem myitem = new ListViewItem(fileName);
            myitem.Tag = file;
            listView1.Items.Add(myitem);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:59:39.877

要以准确和高效的方式做到这一点并不容易。快速而肮脏的方法是使用 Icon.ExtractAssociatedIcon() 并将返回的图标添加到与列表视图关联的 ImageList 中。但是您不会获得在 Explorer 中看到的完全相同的图标。这需要调用 SHGetFileInfo()，自己做起来很痛苦，但代码很容易用谷歌搜索。

一种完全不同的方法是将资源管理器窗口嵌入到您自己的表单中，而不是使用 ListView。主要优点是您将获得完全相同的外观，并且您将自动获得在程序保持响应时查找图标的后台线程。缺点是这不适用于 XP。您需要的类是[Windows API 代码包](http://archive.msdn.microsoft.com/WindowsAPICodePack)的一部分。

# java - 使用 maven-bundle-plugin 索引 JAR

> ID：12996182
> 
> 赞同：1
> 
> 时间：2012-10-21T08:25:53.977
> 
> 标签：java, maven, bnd, maven-bundle-plugin

`META-INF/INDEX.LIST`我正在尝试使用`maven-bundle-plugin`2.3.7构建一个具有索引 () 的包。

我的插件配置看起来像这样

```
 <plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <extensions>true</extensions>
    <configuration>
      <archive>
        <index>true</index>
      </archive>
      <instructions>
        <!-- other things like Import-Package -->
        <Include-Resource>{maven-resources}</Include-Resource>
      </instructions>
    </configuration>
  </plugin> 
```

但`META-INF/INDEX.LIST`不会出现在 JAR 中。我试着用

```
 <Include-Resource>{maven-resources},META-INF/INDEX.LIST</Include-Resource> 
```

但这将失败

```
[ERROR] Bundle com.acme:project::bundle:1.0.0-SNAPSHOT : Input file does not exist: META-INF/INDEX.LIST
[ERROR] Error(s) found in bundle configuration 
```

这并不奇怪，因为`META-INF/INDEX.LIST`它不在 Maven Archiver 中`target/classes`而是由 Maven Archiver 动态生成的。

**编辑 1**

当我使用`jar`而不是`bundle`包装时，索引就在那里。

**编辑 2**

我正在使用 Maven 3.0.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:53:39.577

在[maven-bundle-plugin 源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.felix/maven-bundle-plugin/2.3.7/org/apache/felix/bundleplugin/BundlePlugin.java?av=f#685)中挖掘，看起来当前版本（2.3.7）*忽略*了存档配置的`index`属性。它还忽略`compress`、`forced`和`pomPropertiesFile`。它需要注意的存档配置的唯一属性是`addMavenDescriptor`、`manifest`、`manifestEntries`、`manifestFile`和`manifestSections`。

我不确定是否有任何其他方法可以仅使用 maven-bundle-plugin 来操作创建的存档。

作为一种可能的解决方法，您可以使用 maven-jar-plugin 在创建捆绑包后对其进行重新打包，告诉 jar 插件创建索引，但使用捆绑插件创建的清单。

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <extensions>true</extensions>
    <configuration>
        <!-- unpack bundle to target/classes -->
        <!-- (true is the default, but setting it explicitly for clarity) -->
        <unpackBundle>true</unpackBundle>
        <instructions>
            <!-- ... your other instructions ... -->
            <Include-Resource>{maven-resources}</Include-Resource>
        </instructions>
    </configuration>
</plugin>
<!-- List this after maven-bundle-plugin so it gets executed second in the package phase -->
<plugin>
    <artifactId>maven-jar-plugin</artifactId>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>jar</goal>
            </goals>
            <configuration>
                <!-- overwrite jar created by bundle plugin -->
                <forceCreation>true</forceCreation>
                <archive>
                    <!-- use the manifest file created by the bundle plugin -->
                    <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
                    <!-- bundle plugin already generated the maven descriptor -->
                    <addMavenDescriptor>false</addMavenDescriptor>
                    <!-- generate index -->
                    <index>true</index>
                </archive>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我对捆绑存档中的要求不太熟悉，因此您可能需要仔细检查一切是否正确。

# .net - 是否有用于 DMX 的 .Net 库，特别是 sACN（流式 ACN）？

> ID：12996186
> 
> 赞同：2
> 
> 时间：2012-10-21T08:26:22.150
> 
> 标签：.net, dmx512

我订购了一个流式 DMX (1.31) 兼容控制器，我想编写一个应用程序来控制我的圣诞灯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:23:19.353

这看起来很有希望：CodePlex 上[的控制网络架构 (ACN)](http://acn.codeplex.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:32:59.593

据我所知，没有 .NET 库，但该协议实现起来非常简单，尤其是传输。对于完整的协议描述，您需要[PLASA/ESTA](http://tsp.plasa.org/tsp/documents/published_docs.php)的（非免费）E1.31 标准，但是 Wireshark 和[sACNView](http://sacnview.sourceforge.net/)（用 Delphi 编写，我开发的一个应用程序）支持它，您可以从我认为这两个的来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-24T11:47:25.880

现在有几个库实现了 sACN 协议。

[Kadmium-sACN](https://github.com/iKadmium/kadmium-sacn)是一个相当简单的工具，可以完成工作，我个人使用它。

# javascript - setTimeout 在 while 循环中

> ID：12996193
> 
> 赞同：6
> 
> 时间：2012-10-21T08:27:46.803
> 
> 标签：javascript, while-loop, settimeout

我已经搜索了如何使用`setTimeOut`for 循环，但是关于如何将它与 while 循环一起使用的内容并不多，而且我不明白为什么会有很大的不同。我编写了以下代码的一些变体，但这个循环似乎使浏览器崩溃：

```
while(src == '')
{ 
    (function(){
        setTimeout(function(){
        src = $('#currentImage').val();
        $("#img_"+imgIdx).attr('src',src);
        }, 500);
     });
} 
```

为什么？

基本上我有一个动态创建的图像，其源属性有时需要时间加载，所以在我显示它之前，我需要继续检查它是否已加载，并且只有当它的路径在 中可用时`$('#currentImage')`，我才会显示它。

这段代码在我使用while循环之前运行良好，当我直接使用时

```
setTimeout(function(){
    src = $('#currentImage').val();
    $("#img_"+imgIdx).attr('src',src);
}, 3000); 
```

但是如果加载速度可能更快，我不想让用户等待 3 秒，因此我将其`setTimeOut`放入 while 循环并缩短了它的间隔，这样我只每半秒检查一次加载的路径。那有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T09:21:56.593

while 循环正在制造麻烦，就像 jrdn 指出的那样。也许您可以将 setInterval 和 setTimeout 结合起来，一旦 src 被填满，清除间隔。我在这里放置了一些示例代码来提供帮助，但不确定它是否完全符合您的目标：

```
 var src = '';
    var intervalId = window.setInterval(
        function () {

            if (src == '') {
                setTimeout(function () {
                    //src = $('#currentImage').val();
                    //$("#img_" + imgIdx).attr('src', src);
                    src = 'filled';
                    console.log('Changing source...');
                    clearInterval(intervalId);
                }, 500);
            }
            console.log('on interval...');
        }, 100);

    console.log('stopped checking.'); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T08:32:03.373

问题可能是您不是每半秒检查一次。

setTimeout 安排一个函数在将来的时间运行，但它不会阻塞，它只是稍后运行。因此，在您的 while 循环中，您正在安排这些函数以尽可能快的速度运行，因为它可以迭代 while 循环，因此您可能会创建大量它们。

如果您真的想每半秒检查一次，请使用不带循环的 setInterval 。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T09:26:26.970

谢谢大家 - 所有的建议都有帮助。最后我使用 setInterval 如下：

```
var timer;
// code generating dynamic image index and doing ajax, etc
var checker = function() {
    var src = $('#currentImage').val();
    if(src !== '') {
    $('#img_' + imgIdx).attr('src', src);
        clearInterval(timer);
    }
};

timer = setInterval(checker, 500); 
```

# objective-c - Apple 是否提供 isEqual 的默认实现：

> ID：12996197
> 
> 赞同：0
> 
> 时间：2012-10-21T08:28:24.793
> 
> 标签：objective-c, cocoa, nsobject

在 C 中有一个相等运算符的默认实现。遍历所有成员并验证它们是否满足相等运算符。默认值有点愚蠢，因为如果一个对象包含指针，那么成员的相等运算符将在指针上执行。

不过，这对我的目的来说已经足够了。

是吗？

或者我们是否希望每次我们创建一个我们可能想要使用 isequal 的自定义对象时实现 isEqual 和相应的哈希。

在我看来，“默认”实现是简单地比较对象的指针而不是它的成员。我在这里正确吗？它甚至比 C++ 标准比较差。这就是我要验证的。

在我看来，如果我们的类是 NSObject 的直接子类，那么 isEqual 将简单地称它为父类的 isEqual 并简单地比较指针。

我在这里正确吗？我只是想确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:35:03.927

我认为`NSObject`' 的实现会进行指针比较，而 SDK 中的各种其他类会做最合适的事情，即。`NSString`对字符串内容进行比较，`NSArray`比较内容相等性等等。如果你想为你的自定义对象定义“更好的”相等性，你必须决定语义并自己实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T09:28:18.777

由于 Apple 在协议和接口之间分离文档的方式，这有点令人困惑。

```
@protocol NSObject

- (BOOL)isEqual:(id)object; 
```

这是实现的必需方法，因此 NSObject（类）肯定实现了这一点，尽管您不会通过查看苹果开发网站上的类定义来知道它。这直接来自 xcode 中的标题。

通常，如果不实现自定义 isEqual，您只会期望获得指针标识，并且在许多情况下没问题。系统需要围绕您识别唯一实例的方式进行设计，而不管哈希和 isEqual 等特定功能的特性如何。如果您需要测试指针之外的对象相等性，那么您只需要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:20:15.183

作为`NSObject`provide `isEqual:`，并且您的所有对象都是 的后代`NSObject`，那么简单的答案是提供了默认实现。

现在您担心此默认使用的算法，并在评论中写下*“我不会仅通过测试来确定”*。让我们看看测试，只是为了好玩;-)

Now`isEqual:`是一种相当基本的方法，如果 Apple 决定改变其语义，后果可能会很严重而且不好。因此，尽管 Apple 可以自由更改其实现方式，但前提是*语义*保持不变，这意味着相同的对象在更改后与以前一样比较相等。现在您已经提到了三种可能的算法`isEqual:`可以使用：

1.  指针比较 - 它是*完全相同的*对象吗
2.  浅比较 - 直接比较对象的字段是否具有相同的值
3.  深度比较 - 直接比较的非指针值字段是否具有相同的值，并使用指针值字段比较相等`isEqual:`

这些都有不同的语义，无论苹果选择了哪一个，它都无法在不破坏大量代码的情况下进行更改。不同的语义意味着你可以测试......

在我键入时进行编码，预计会出现错误！只有重要的部分包括：

```
@implementation A

- (BOOL) isEqual:(id)other
{
   NSLog(@"A.isEqual called");
   return self == other; // true iff same object
}

@end

@interface B

@property (readwrite) int anInteger;
@property (readwrite) A *anA;

@end

@implementation B

@synthesize anInteger, anA;

@end

// Let's test the algorithm

A *myA = [A new];
B *bOne = [B new];
B *bTwo = [B new];

bOne.anInteger = 42;
bOne.anA = myA;

bTwo.anInteger = 42;
bTwo.anA = myA;

// What output is produced (all of it!)
NSLog(@"[bOne isEqual:bTwo] -> %@", [bOne isEqual:bTwo] ? @"Yes" : @"No"); 
```

HTH 一点。

# java - 如何保存 HashSet 到.txt？

> ID：12996199
> 
> 赞同：4
> 
> 时间：2012-10-21T08:28:46.200
> 
> 标签：java, string, file-io, set, hashset

我想将 HashSet 存储到服务器目录。但我现在只能将其存储在 .bin 文件中。但是如何将 HashSet 中的所有 Key 打印到 .txt 文件中呢？

```
static Set<String> MapLocation = new HashSet<String>();

    try {
        SLAPI.save(MapLocation, "MapLocation.bin");
    } catch (Exception ex) {

    }

public static void save(Object obj, String path) throws Exception {
    ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(
            path));
    oos.writeObject(obj);
    oos.flush();
    oos.close();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T08:42:44.863

```
// check IOException in method signature
BufferedWriter out = new BufferedWriter(new FileWriter(path));
Iterator it = MapLocation.iterator(); // why capital "M"?
while(it.hasNext()) {
    out.write(it.next());
    out.newLine();
}
out.close(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T08:42:30.903

这会将字符串保存到 UTF-8 文本文件：

```
public static void save(Set<String> obj, String path) throws Exception {
    PrintWriter pw = null;
    try {
        pw = new PrintWriter(
            new OutputStreamWriter(new FileOutputStream(path), "UTF-8"));
        for (String s : obj) {
            pw.println(s);
        }
        pw.flush();
    } finally {
        pw.close();
    }
} 
```

特别选择 UTF-8 是可取的，因为否则它将使用操作系统使用的任何设置作为默认设置，这会给您带来兼容性问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T08:46:51.137

像这样的东西：

```
public static void toTextFile(String fileName, Set<String> set){
    Charset charset = Charset.forName("UTF-8");
    try (PrintWriter writer = new PrintWriter(Files.newBufferedWriter(fileName, charset))) {
        for(String content: set){
            writer.println(content);
        }
    } catch (IOException x) {
        System.err.format("IOException: %s%n", x);
    }
} 
```

**注意：**此代码是使用 Java 7 中引入的 try-with-resource 结构编写的。但其他版本的想法也相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T17:20:17.370

避免文件末尾换行的另一种解决方案：

```
private static void store(Set<String> sourceSet, String targetFileName) throws IOException
{
    StringBuilder stringBuilder = new StringBuilder();

    for (String setElement : sourceSet)
    {
        stringBuilder.append(setElement);
        stringBuilder.append(System.lineSeparator());
    }

    String setString = stringBuilder.toString().trim();
    byte[] setBytes = setString.getBytes(StandardCharsets.UTF_8);
    Files.write(Paths.get(targetFileName), setBytes);
} 
```

# php - PHP Ajax 成功

> ID：12996206
> 
> 赞同：3
> 
> 时间：2012-10-21T08:31:28.827
> 
> 标签：php, html, jquery

我正在 jquery 中对 php 脚本进行 ajax 调用。但是 php 脚本需要返回什么才能触发 ajax 中的成功/错误处理程序。所以这里是ajax：

```
$.ajax({
        data: $this.serialize(),
        type: "POST",
        url: "/Scripts/script.php", 
        success: function() { 
            alert("script was successful");
        },
        error: function() { 
            alert("script was unsuccessful");
        }
    }); 
```

因此 php 脚本可以返回一些内容，例如：

```
return 0, 1
return true, false
return "true", "false"
echo "true", "false 
```

哪一个会触发 ajax 成功/错误调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T08:34:14.433

只要服务器端脚本发送 HTTP 状态代码 200，它就会始终触发`success`回调。反应根本不重要。只有状态码。在您展示的所有示例中，您正在发送 HTTP 状态代码 200 => 成功回调将始终触发。

您可以使用该[`http_response_code`](http://php.net/manual/en/function.http-response-code.php)函数将状态代码强制为不同于 200 的值。

作为替代方案，您可以让 PHP 脚本返回一些信息，然后在成功函数中测试脚本返回的值，以了解某些服务器端处理是否失败：

```
$.ajax({
    data: $this.serialize(),
    type: "POST",
    url: "/Scripts/script.php", 
    success: function(result) { 
        if (result == 'true') {
            alert("script was successful");
        } else {
            alert("script was unsuccessful");
        }
    },
    error: function() { 
        alert("something very bad went wrong => there's a bug in the script");
    }
}); 
```

现在您的脚本可以 echo`true`或`false`.

如果要发送复杂对象，可以使用该[`json_encode`](http://php.net/manual/en/function.json-encode.php)函数将它们作为 JSON 发送，并将 HTTP Content-Type 标头设置为`application/json`使用该[`header`](http://php.net/manual/en/function.header.php)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:34:47.467

Succes 在请求完成且没有错误的情况下执行`XMLHTTPRequest`，无论您返回什么结果。还有另一个`complete`回调，它在你的 AJAX 脚本完成时执行，不管你是否有 XMLHTTPRequest 错误。

# android - android.view.InflateException: Binary XML file line #2: Error inflating class

> ID：12996210
> 
> 赞同：24
> 
> 时间：2012-10-21T08:32:26.820
> 
> 标签：android, android-emulator, android-memory

我正在开发一个简单的 android 应用程序，刚刚完成了主屏幕。现在，如果屏幕的方向变化超过两次，它就会抛出错误并且应用程序会突然崩溃。

这是我的Java类：

```
public class PasswordActivity extends Activity implements OnClickListener {
  Button login;  
  Button forgot;
  Button register;  

  private static final String PREFERENCES = "prefs";
  private static final String PREFERENCES_NAME = "pref_name"; 
  SharedPreferences settings;
  private Cursor c;

  @Override 
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main); 
      login=(Button)findViewById(R.id.login_login);
      login.setOnClickListener(this);
      register=(Button)findViewById(R.id.login_register);
      register.setOnClickListener(this);

  }
  public void onClick(View v) {
  } 
} 
```

这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical"    
  android:background="@drawable/listpic">

  <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingTop="5dp"
    android:paddingLeft="3dp"
    android:paddingRight="3dp">  

    <TextView 
     android:layout_width="fill_parent"
     android:layout_weight="0.75"
     android:layout_height="wrap_content"
     android:text="@string/login_user_name"
     android:textStyle="bold"/>

    <EditText 
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_weight="0.25"
     android:id="@+id/login_user_name"
     android:inputType="text"/>
  </LinearLayout>

  <LinearLayout 
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal"
     android:paddingLeft="3dp"
     android:paddingRight="3dp">  

     <TextView 
      android:layout_width="fill_parent"
      android:layout_weight="0.75"
      android:layout_height="wrap_content"
      android:text="@string/login_password"
      android:textStyle="bold"/>

     <EditText 
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_weight="0.25"
      android:inputType="textPassword"
      android:id="@+id/login_password"/>
  </LinearLayout>

  <LinearLayout 
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal"
     android:paddingLeft="3dp"
     android:paddingRight="3dp">  

     <Button 
      style="@style/left_button"
      android:text="@string/login_submit"
      android:id="@+id/login_login"/>

     <Button 
       style="@style/right_button"
       android:id="@+id/login_register"
       android:text="@string/register"/>

  </LinearLayout>
</LinearLayout> 
```

日志猫详细信息：

```
10-21 12:05:59.982: D/dalvikvm(622): GC_EXTERNAL_ALLOC freed 774 objects / 56240 bytes in 61ms
10-21 12:06:15.031: D/dalvikvm(622): GC_EXTERNAL_ALLOC freed 737 objects / 30992 bytes in 59ms
10-21 12:06:18.022: E/dalvikvm-heap(622): 7596000-byte external allocation too large for this process.
10-21 12:06:18.022: E/GraphicsJNI(622): VM won't let us allocate 7596000 bytes
10-21 12:06:18.043: D/AndroidRuntime(622): Shutting down VM
10-21 12:06:18.043: W/dalvikvm(622): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-21 12:06:18.092: E/AndroidRuntime(622): FATAL EXCEPTION: main
10-21 12:06:18.092: E/AndroidRuntime(622): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ravi.password/com.ravi.password.PasswordActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-21 12:06:18.092: E/AndroidRuntime(622):  at java.lang.reflect.Method.invokeNative(Native Method)
10-21 12:06:18.092: E/AndroidRuntime(622):  at java.lang.reflect.Method.invoke(Method.java:521)
10-21 12:06:18.092: E/AndroidRuntime(622):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-21 12:06:18.092: E/AndroidRuntime(622):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-21 12:06:18.092: E/AndroidRuntime(622):  at dalvik.system.NativeStart.main(Native Method)
10-21 12:06:18.092: E/AndroidRuntime(622): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
10-21 12:06:18.092: E/AndroidRuntime(622):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
10-21 12:06:18.092: E/AndroidRuntime(622):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.app.Activity.setContentView(Activity.java:1647)
10-21 12:06:18.092: E/AndroidRuntime(622):  at com.ravi.password.PasswordActivity.onCreate(PasswordActivity.java:34)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-21 12:06:18.092: E/AndroidRuntime(622):  ... 12 more
10-21 12:06:18.092: E/AndroidRuntime(622): Caused by: java.lang.reflect.InvocationTargetException
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.widget.LinearLayout.<init>(LinearLayout.java:115)
10-21 12:06:18.092: E/AndroidRuntime(622):  at java.lang.reflect.Constructor.constructNative(Native Method)
10-21 12:06:18.092: E/AndroidRuntime(622):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
10-21 12:06:18.092: E/AndroidRuntime(622):  ... 22 more
10-21 12:06:18.092: E/AndroidRuntime(622): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.graphics.Bitmap.nativeCreate(Native Method)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
10-21 12:06:18.092: E/AndroidRuntime(622):  at android.view.ViewGroup.<init>(ViewGroup.java:285)
10-21 12:06:18.092: E/AndroidRuntime(622):  ... 26 more 
```

使用的图像非常小，大约 5kb。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-21T08:36:05.627

在运行时，Android 根据需要（基于屏幕大小和分辨率）调整图像大小。它使用位图在内部进行大小调整。显然，这非常占用内存（有点像疯了一样分配内存）。解决此类问题的一种快速方法是将所有可绘制文件复制到 drawable-ldpi、mdpi、hdpi 文件夹。这样，android 只会从这些文件夹中提取文件，而不是调整它们的大小。

它是一种随机的异常，很难修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-26T08:22:01.080

请按照背景图片大小

对于支持的设备

```
LDPI:
Portrait: 200x320px
Landscape: 320x200px
MDPI:
Portrait: 320x480px
Landscape: 480x320px
HDPI:
Portrait: 480x800px
Landscape: 800x480px
XHDPI:
Portrait: 720px1280px
Landscape: 1280x720px 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-10T18:00:03.173

对不起，我的英语不好

我有同样的问题，如果你将任何“ **xml** ”文件放入“ **drawable-24** ”，只需将它们移动到“ **drawable** ”，这就是我为解决这个问题所做的解决方案

**祝你今天过得愉快 ：）**

[![在此处输入图像描述](../Images/d528cbd506fcb9cdcd696f9f4fade615.png)](https://i.stack.imgur.com/fogWx.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-20T10:57:23.313

正如其他人所澄清的那样，部分问题是与我为布局设置的背景图像相关的问题。但是，解决了这个问题后，我一直遇到错误：

> 不幸的是，应用程序已停止

经过反复试验，我发现问题是由`<view>`删除它们后的元素引起的，我最终可以运行应用程序。

# c# - 无法获取窗口宽度

> ID：12996216
> 
> 赞同：1
> 
> 时间：2012-10-21T08:34:02.107
> 
> 标签：c#, .net, wpf, xaml, window

我有一个 WPF 窗口，我正在尝试获取该`Width`属性。无论我尝试在哪里显示代码，它总是返回为`NaN`. 我在互联网上查找并读到我实际上应该使用它`ActualWidth`，但无论如何这都会返回 0。

如何摆脱滞后并获得窗口宽度的实际值？

**XAML：**

```
<Window x:Name="TableWindow" x:Class="QueryBuilder.DatabaseTable"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None" Background="Transparent" SizeToContent="WidthAndHeight" ResizeMode="CanResize">
    <Grid>
        <DockPanel>
            <StackPanel Name="titleBar" DockPanel.Dock="Top" Height="28" FlowDirection="RightToLeft" Orientation="Horizontal" Background="AliceBlue">
                <Button x:Name="btnClose" Margin="0,0,5,0" Click="btnClose_Click">
                </Button>
                <Button>
                </Button>
                <Button>
                </Button>
                <Button x:Name="btnAll">ALL</Button>
                <Label Name="lblTableName" FontSize="15" Margin="50,0,0,0"></Label>
            </StackPanel>
            <StackPanel Orientation="Vertical" Name="spFields">
            </StackPanel>
        </DockPanel>
    </Grid>
</Window> 
```

**XAML.cs：**

```
public DatabaseTableWindow(string tableName, DataTable fields, string primaryKey)
        {
            InitializeComponent();
            this.tableName = tableName;
            this.fields = fields;
            this.primaryKey = primaryKey;
            lblTableName.Content = tableName;
            double x = this.ActualWidth;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:42:26.427

是的，`ActualWidth`你需要寻找。但是 window 的构造函数不是获取它的正确位置，因为`window is not rendered yet`. 而是使用`Loaded`事件 -

```
public DatabaseTableWindow(string tableName, DataTable fields, string primaryKey)
{
    InitializeComponent();
    this.tableName = tableName;
    this.fields = fields;
    this.primaryKey = primaryKey;
    lblTableName.Content = tableName;
    Loaded += new RoutedEventHandler(MainWindow_Loaded);        
}

void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    double x = this.ActualWidth;
} 
```

**编辑**

代替`Loaded`，尝试在构造函数中挂钩`ContentRendered`事件 -

```
this.ContentRendered += new EventHandler(MainWindow_ContentRendered);

void MainWindow_ContentRendered(object sender, EventArgs e)
{
   double x = this.ActualWidth;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:49:46.420

假设您正在使用[WPF 多文档界面](http://wpfmdi.codeplex.com/)：

如果它是您需要对其进行宽度属性计算的 MdiChild，那么您可以在将其添加到容器之前绑定到 MdiChild 对象的 Loaded-Event。

```
 var mdiChild = new MdiChild
                           {
                               Title = "Window Using Code",
                               Content = new ExampleControl(),
                               Width = 714,
                               Height = 734,
                               Position = new Point(200, 30)
                           };
    mdiChild.Loaded += new RoutedEventHandler(mdiChild_Loaded);

        Container.Children.Add(mdiChild); 
```

* * *

```
 void mdiChild_Loaded(object sender, RoutedEventArgs e)
    {
        if (sender is MdiChild)
        {
            var width = (sender as MdiChild).Width;
            Debug.WriteLine("Width: {0}", width);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T14:31:37.020

正如我们一直在 WPF 房间里讨论这个问题一样，这是一个看似简单的复杂问题。

如果我们在 mdiChild 上设置宽度/高度，我们最终会失去调整大小的功能。[所以我已经发布了一个修复的要点，根据我们的聊天](https://chat.stackoverflow.com/transcript/message/5962571#5962571)似乎已经解决了这个问题

* * *

所以为了获得大小限制，我使用了普通绑定（这个复制粘贴来自我的测试项目）：

```
<Window x:Class="TestApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:MDI="clr-namespace:WPF.MDI;assembly=WPF.MDI" xmlns:TestApplication="clr-namespace:TestApplication"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" Title="MainWindow">
    <MDI:MdiContainer Name="mainContainer">
        <MDI:MdiChild x:Name="mdiChild" MaximizeBox="False" MinimizeBox="False" Resizable="True" ShowIcon="False" Width="{Binding Width, ElementName=childElement}" Height="{Binding Height, ElementName=childElement}">
            <TestApplication:DatabaseTable x:Name="childElement"/>
        </MDI:MdiChild>
    </MDI:MdiContainer>
</Window> 
```

这解决了主要的宽度和高度问题。

* * *

这段代码需要替换 WPF.MDI 库中的[MdiChild.cs Changeset 81799](http://wpfmdi.codeplex.com/SourceControl/changeset/view/81799#666802) resize handler source（你可以用这个替换现有的相关代码）：

```
/// <summary>
/// Handles the DragDelta event of the ResizeLeft control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.Windows.Controls.Primitives.DragDeltaEventArgs"/> instance containing the event data.</param>
private void ResizeLeft_DragDelta(object sender, DragDeltaEventArgs e)
{
    if (ActualWidth - e.HorizontalChange < MinWidth)
        return;

    double newLeft = e.HorizontalChange;

    if (Position.X + newLeft < 0)
        newLeft = 0 - Position.X;

    Width = ActualWidth - newLeft;
    Position = new Point(Position.X + newLeft, Position.Y);

    if (sender != null)
        Container.InvalidateSize();
}

/// <summary>
/// Handles the DragDelta event of the ResizeTop control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.Windows.Controls.Primitives.DragDeltaEventArgs"/> instance containing the event data.</param>
private void ResizeTop_DragDelta(object sender, DragDeltaEventArgs e)
{
    if (ActualHeight - e.VerticalChange < MinHeight)
        return;

    double newTop = e.VerticalChange;

    if (Position.Y + newTop < 0)
        newTop = 0 - Position.Y;

    Height = ActualHeight - newTop;
    Position = new Point(Position.X, Position.Y + newTop);

    if (sender != null)
        Container.InvalidateSize();
}

/// <summary>
/// Handles the DragDelta event of the ResizeRight control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.Windows.Controls.Primitives.DragDeltaEventArgs"/> instance containing the event data.</param>
private void ResizeRight_DragDelta(object sender, DragDeltaEventArgs e)
{
    if (ActualWidth + e.HorizontalChange < MinWidth)
        return;

    Width = ActualWidth + e.HorizontalChange;

    if (sender != null)
        Container.InvalidateSize();
}

/// <summary>
/// Handles the DragDelta event of the ResizeBottom control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.Windows.Controls.Primitives.DragDeltaEventArgs"/> instance containing the event data.</param>
private void ResizeBottom_DragDelta(object sender, DragDeltaEventArgs e)
{
    if (ActualHeight + e.VerticalChange < MinHeight)
        return;

    Height = ActualHeight + e.VerticalChange;

    if (sender != null)
        Container.InvalidateSize();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T09:52:38.757

尝试窥探窗口并越过树查看值

[窥探](http://snoopwpf.codeplex.com/)

# python - 在python中使用readlines？第一次

> ID：12996220
> 
> 赞同：8
> 
> 时间：2012-10-21T08:34:39.087
> 
> 标签：python, readlines

我有一个包含数据列的文本文件，我需要将这些列转换为单独的列表或数组。这是我到目前为止所拥有的

```
f = open('data.txt', 'r')
temp = []
for row in f.readlines():
    Data = row.split()
    temp.append(float(Data[0])) 
```

当我运行它时，我得到`IndexError: list index out of range`.

以下数据片段：

```
16  0.2000  
17  0.3000  
18  0.4000  
20  0.5000  
21  0.6000  
22  0.7000
24  0.8000  
25  0.9000
26  1.000 
```

如果可能的话，我需要第一列：Data = [16, 17, 18, 20, 21, 22, 24, 25, 26]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:36:30.493

`Data=[]`如果您读取空行，则会得到一个空列表。您尝试使用 获取列表中的第一个元素`Data[0]`，但因为它是一个空列表，它在位置 0 处没有元素，所以您得到一个`IndexError`.

```
Data=''.split()

Data[0]
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-686-0792b03cbbdf> in <module>()
----> 1 Data[0]

IndexError: list index out of range 
```

这将打印出`Data`if`IndexError`事件 - 你可以看到它打印了一个空列表：

```
f=open('file','r')
temp = []
for row in f.readlines():
    Data = row.split()
    try:
        temp.append(float(Data[0]))
    except IndexError:
        print Data 
```

您可以使用`with`语句打开文件，在处理完文件后自动关闭文件。您也可以遍历文件本身，而不使用`readlines()`.

```
with open(file,'r') as f:        
     for row in f:
         Data = row.split()
         try:
            print Data[0]
         except IndexError:
            print 'You have an empty row' 
```

编辑：你最好使用 csv 模块：

```
import csv
with open('file.csv', 'rb') as f:
    reader = csv.reader(f, delimiter=' ')
    print [row[0] for row in reader if len(row)]
>>> 
['16', '17', '18', '20', '21', '22', '24', '25', '26'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T09:06:58.637

用于文件处理程序。

```
with open('path/to/file', 'r') as f:
    for line in f:
        # code. 
```

您的索引错误来自尝试访问`Data`该`[0]`位置。这只是意味着您的行是空的。

您应该在解析行之前快速检查...

```
if len(Data):
    #code
else:
    #empty line? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:02:45.110

```
f = open('data.txt', 'r')
temp = []
for row in f.readlines():
    items = row.split(',')
    temp.append(unicode(items[0])) 
```

我希望它能解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T00:18:48.833

```
def cal(num_list):
    x = 1;
    z = 0;
    while True:
        list1 = list(str(x))
        list2 = [int(a) for a in list1]

        for i in range(len(list2)):
            for j in range(10):
                if(list2.count(j) > num_list[list2[i]]):
                    z = 1;
                    break;
        if(z == 1):   
            save(x);
            break;      
        x = x + 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-22T00:30:38.373

```
#matrix A to B
def show():
    global string_final,list_2,tot
    index=matrix_1.index(num)  # finding index of num

    length=n
    j=(index)%length # the column positon
    i=index/length # the row position

    list_1=[]
    for a in range(length):
        lis=[]
        for b in range(length):

            lis.append(matrix_1.pop(0)) #pop the first element and append the list

        list_1.append(lis)

    tot=0
    list_2=[]

    for a in range(i+1):
        for b in range(j+1):
            tot=tot+list_1[a][b] # add the numbers
            list_2.append(list_1[a][b]) #append to list
            if(b!=length):
                list_2.append(" ")  #append space
        list_2.append("\n")
    string_final="".join([str(a) for a in list_2])  #list to string

    print "matrix B\n",string_final,"\nx: ",str(num),"\nn: ",str(n)+"\ntotal: "+str(tot) # print the result 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-22T00:39:05.437

```
#matrix add zero
def get():
    global b_no
    num_list=[];
    file=open("matrix.txt","r");
    for i in file:
        b_no=0
        if(len(i.split())==1): #check length is 1 or not
            n=int(i)#string to int
        else:
            temp=i.split();
            if(len(temp)!=n):
                b_no+=1
                break
            temp=[0]+[int(a) for a in temp]+[0] #add zero at first and last
            num_list.append(temp);

    zero_list=[]

    for i in range(n+2):
        zero_list.append(0)         #append zero
    num_list.insert(0,zero_list)
    num_list.insert(n+1,zero_list)
    return num_list,n; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-12T06:40:37.997

我会避免使用 Data[0] 或 row[0]，而是使用 ''.join(Data) 或 ''.join(row) 来避免空列表（列表索引超出范围错误）。

# sql - 如何写而不是更新？- 扳机

> ID：12996221
> 
> 赞同：1
> 
> 时间：2012-10-21T08:34:42.043
> 
> 标签：sql, sqlite

我有表`A`，并且有一个列名`COL_A`。

我希望如果有人更改值，让我们说 from `1`to `'X'`（不是常数）触发器会将其从`'X'`to更改回`1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:24:34.273

SQLite 不支持更改`new`列值。更改触发器中的列的唯一方法是运行`UPDATE`命令，但这会再次运行触发器。

您可以做的是首先防止更改列：

```
CREATE TRIGGER IF NOT EXISTS prevent_col_a_change
BEFORE UPDATE OF col_a ON a
BEGIN
    SELECT RAISE(ABORT, 'COL_A must not be changed');
END; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T09:21:09.327

UPDATE 触发器是您的案例的一个很好的解决方案。只需将旧值设置为新值，这将导致您想要的行为。

例如：

```
CREATE OR REPLACE TRIGGER orders_before_update
BEFORE UPDATE
  ON orders
  FOR EACH ROW
BEGIN
  :new.CreatedAt:= :old.CreatedAt;
END; 
```

# numpy - 为散点图中多次出现的点绘制可变大小/颜色热图

> ID：12996225
> 
> 赞同：2
> 
> 时间：2012-10-21T08:35:05.280
> 
> 标签：numpy, plot, matplotlib

我被以下问题困住了，我希望我能连贯地解释它。

所以，我在坐标系上有一些（大约 10 个）离散位置。

现在，我想分析一个程序中的数据，在该程序中，用户可以将每个点标记为 somethingA 和 somethingB。

我提取了每个类的数据点。所以我的somethingA类大约有60分，而其他类则少一点。一类代表好点，一类代表坏点。我想找到标签最好/坏的职位。我用机器学习算法来做到这一点，我只想用图表来可视化它。

我现在想绘制这些点。所以我每班制作一个情节。但是由于在每个类中每个点都至少出现一次，所以这两个图看起来完全一样。但是，出现的数量在不同的位置上有不同的分布。也许 A 点在 A 类中有 20 次出现，在 B 类中有 1 次出现，这两个图看起来都一样。

所以，我的问题是：在 Matplotlib 中绘制散点图时，如何考虑点的出现次数？

要么有不同的颜色（比如热图？），要么有一个很酷的传说。或使用不同的尺寸（例如，更高的数量 = 更大的圆圈）。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:18:57.813

我不知道这是否对您有帮助，但我遇到了一个问题，我想要一个散点图来反映两个位置以及归因于数据点的两个变量。

由于 scatter 函数中的大小和颜色本身不允许变量，这意味着必须以通常的方式指定颜色代码和大小，这意味着某事像

```
 ax.scatter(..., c=whatEverFunction, s=numberOfOccurences, ...) 
```

对我不起作用。

我所做的是将我想要可视化的两个变量的值组合起来。在我的情况下，变量`nodeMass`和另一个变量。

```
for i in range(Number):
    mask[i] = False
    if(lowerBound1<variableOne[i]<upperBound1):
        mask[i] = True & pmask[i]
    if len(positionX[mask])>0:
        ax.scatter(positionX[mask], positionY[mask], positionZ[mask],C='#424242',s=10, edgecolors='none')
for i in range(Number):
    mask[i] = False
    if(lowerBound2<variableOne[i]<upperBound2):
        mask[i] = True & pmask[i]
if len(positionX[mask])>0:
       ax.scatter(positionX[mask], positionY[mask], positionZ[mask],c='#9E0050',s=25,edgecolors='none') 
```

我知道它不是很优雅，但它对我有用。我必须创建与变量中的 bin 一样多的 for 循环。使用 if 查询和掩码，我至少可以避免冗余或“不可读”的情节。

# c# - **使用 Meta.Numeric.Matrices 进行 SVD 计算时，索引超出了数组的范围**

> ID：12996227
> 
> 赞同：1
> 
> 时间：2012-10-21T08:35:25.610
> 
> 标签：c#, arrays, c#-4.0, svd

```
using System;  
using System.Collections.Generic;  
using System.ComponentModel;  
using System.Data;  
using System.Drawing  ;  
using System.Linq;  
using System.Text;  
using System.Windows.Forms;  
using Meta.Numerics.Matrices;  

 double[,] ptsImgOne = new double[3, 5];  
 double[,] ptsImgTwo = new double[3, 5];  

 ptsImgOne = new double[,] { { 0.41726, 0.94478, 0.33771, 0.11120, 0.24169 }, 
{ 0.04965, 0.49086, 0.90005, 0.78025, 0.40391}, 
{ 0.90271, 0.48925, 0.36924, 0.38973, 0.09645 } };  
ptsImgTwo = new double[,] { { 0.13197, 0.57520, 0.35315, 0.04302, 0.73172 },
 { 0.94205, 0.05977, 0.82119, 0.16899, 0.64774 },
 { 0.95613, 0.23477, 0.01540, 0.64911, 0.45092 } };

            RectangularMatrix q1 = new RectangularMatrix(ptsImgOne);
            RectangularMatrix q2 = new RectangularMatrix(ptsImgTwo);

            RectangularMatrix Qmultiply = new RectangularMatrix(5, 9);
            for (int i = 0; i < q2.ColumnCount; i++)
            {
                Qmultiply[i, 0] = q1[0, i] * q2[0, i]; 
                Qmultiply[i, 1] = q1[1, i] * q2[0, i]; 
                Qmultiply[i, 2] = q1[2, i] * q2[0, i]; 

                Qmultiply[i, 3] = q1[0, i] * q2[1, i];
                Qmultiply[i, 4] = q1[1, i] * q2[1, i];
                Qmultiply[i, 5] = q1[2, i] * q2[1, i];

                Qmultiply[i, 6] = q1[0, i] * q2[2, i];
                Qmultiply[i, 7] = q1[1, i] * q2[2, i];
                Qmultiply[i, 8] = q1[2, i] * q2[2, i]; 
            }

SingularValueDecomposition singValDec=    Qmultiply.SingularValueDecomposition();

        }
    }
} 
```

我正在使用 Meta.Numerics.Matrices 处理矩阵并计算 SVD，
但每当编译器到达最后一行代码时：
“SingularValueDecomposition singValDec=Qmultiply.SingularValueDecomposition();”
我收到一条错误消息，说**Index is outisde the bounds of array**。我仔细检查了 Qmultiply 数组和其余部分的边界。我尝试调试它，但错误仍然存​​在。
谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:44:23.350

似乎**Meta 包**在**计算 SVD**时存在**一些错误**。

 **我使用具有相同代码的**MathNet**，它运行良好。

为了安全起见，请使用 MathNet(Math.Numeric)。**

# mongodb - Mongoid 关系属性

> ID：12996229
> 
> 赞同：0
> 
> 时间：2012-10-21T08:35:43.400
> 
> 标签：mongodb, mongoid

保存关系属性的最佳方法是什么？例如，我有模型 Person 和 Project（M:N 关系）。我想在项目中保存人员角色。在关系数据库中，它将是联结表 person_project 中的一个属性。在 Mongoid (RoR) 中实现这一点的最佳方法是什么？

第二个问题：我应该为多对多关系保存ID，还是只保存一侧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:39:46.250

文档： http: [//mongoid.org/en/mongoid/docs/relations.html#has_and_belongs_to_many](http://mongoid.org/en/mongoid/docs/relations.html#has_and_belongs_to_many)

```
class Person
  include Mongoid::Document
  has_and_belongs_to_many :projects
end

class Project
  include Mongoid::Document
  has_and_belongs_to_many :persons
end 
```

Mongoid 使用数组在两个集合中存储 ID。`Person`集合有一个字段`project_ids`，`Project`集合有一个字段`person_ids`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:52:34.717

我不会在项目中存储用户或特定用户角色（超级用户除外，或出于最终缓存原因）。仅仅因为有两个生命周期，当你做项目的时候你可能不会和用户混在一起。因此，作为开始，我会将角色设置存储在如下人员中：

```
{
 _id : Obj{},
 projects : [
   {project_one : role_name}, //use a name if name is unique if not use project_id as key
   {project_two : role_name}
 ]
} 
```

或者更简单但需要更多空间

```
{
_id : Obj{},
projects : [
  {project_id : project_one,
   role : role_name},...
]
} 
```

即使您可以在项目中存储一些与用户相关的内容，我也会始终针对用户测试角色。

# c# - 读取 Excel 文件 (.xls/.xlsx) 的最佳方式

> ID：12996234
> 
> 赞同：84
> 
> 时间：2012-10-21T08:36:10.143
> 
> 标签：c#, excel, oledb, openxml-sdk, excel-interop

我知道有多种读取 Excel 文件的方法：

*   `Iterop`
*   `Oledb`
*   `Open Xml SDK`

兼容性不是问题，因为程序将在受控环境中执行。

我的要求：
将文件读取到`DataTable`/ `CUstom Entitie`s（我不知道如何为对象创建动态属性/字段[列名将在 Excel 文件中变化]）

用于使用`DataTable/Custom Entities`其数据执行一些操作。

更新`DataTable`操作结果

写回`excel file`.

这会更简单。

另外，如果可能的话，建议我使用自定义实体（动态地将属性/字段添加到对象）

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-21T09:17:50.773

Take a look at [Linq-to-Excel](https://github.com/paulyoder/LinqToExcel). It's pretty neat.

```
var book = new LinqToExcel.ExcelQueryFactory(@"File.xlsx");

var query =
    from row in book.Worksheet("Stock Entry")
    let item = new
    {
        Code = row["Code"].Cast<string>(),
        Supplier = row["Supplier"].Cast<string>(),
        Ref = row["Ref"].Cast<string>(),
    }
    where item.Supplier == "Walmart"
    select item; 
```

It also allows for strongly-typed row access too.

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2019-02-18T13:18:14.057

我意识到这个问题是在将近 7 年前被问到的，但它仍然是关于使用 C# 导入 excel 数据的某些关键字的顶级 Google 搜索结果，所以我想根据最近的一些技术发展提供一个替代方案。

导入 Excel 数据已成为我日常工作中的一项常见任务，我简化了流程并在我的博客上记录了该方法：[best way to read excel file in c#](http://www.zoeller.us/blog/2018/10/24/easiest-way-to-import-excel-files-in-c)。

我使用[NPOI](https://www.nuget.org/packages/NPOI/)是因为它可以在没有安装 Microsoft Office 的情况下读取/写入 Excel 文件，并且它不使用 COM+ 或任何互操作。这意味着它可以在云端工作！

[但真正的魔力来自与Donny Tian](https://github.com/donnytian)的 NPOI Mapper 配对，因为它允许我将 Excel 列映射到我的 C# 类中的属性，而无需编写任何代码。很美丽。

这是基本思想：

我创建了一个匹配/映射我感兴趣的 Excel 列的 .net 类：

```
 class CustomExcelFormat
        {
            [Column("District")]
            public int District { get; set; }

            [Column("DM")]
            public string FullName { get; set; }

            [Column("Email Address")]
            public string EmailAddress { get; set; }

            [Column("Username")]
            public string Username { get; set; }

            public string FirstName
            {
                get
                {
                    return Username.Split('.')[0];
                }
            }

            public string LastName
            {
                get
                {
                    return Username.Split('.')[1];
                }
            }
        } 
```

请注意，如果我愿意，它允许我根据列名进行映射！

然后，当我处理 excel 文件时，我需要做的就是这样的：

```
 public void Execute(string localPath, int sheetIndex)
        {
            IWorkbook workbook;
            using (FileStream file = new FileStream(localPath, FileMode.Open, FileAccess.Read))
            {
                workbook = WorkbookFactory.Create(file);
            }

            var importer = new Mapper(workbook);
            var items = importer.Take<CustomExcelFormat>(sheetIndex);
            foreach(var item in items)
            {
                var row = item.Value;
                if (string.IsNullOrEmpty(row.EmailAddress))
                    continue;

                UpdateUser(row);
            }

            DataContext.SaveChanges();
        } 
```

现在，诚然，我的代码不会修改 Excel 文件本身。相反，我使用 Entity Framework 将数据保存到数据库中（这就是您在我的示例中看到“UpdateUser”和“SaveChanges”的原因）。但是关于如何[使用 NPOI 保存/修改文件](https://stackoverflow.com/questions/27507412/edit-existing-excel-file-c-sharp-npoi)已经有了很好的讨论。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-10-21T08:53:17.640

使用 OLE Query，很简单（例如 sheetName 是 Sheet1）：

```
DataTable LoadWorksheetInDataTable(string fileName, string sheetName)
{           
    DataTable sheetData = new DataTable();
    using (OleDbConnection conn = this.returnConnection(fileName))
    {
       conn.Open();
       // retrieve the data using data adapter
       OleDbDataAdapter sheetAdapter = new OleDbDataAdapter("select * from [" + sheetName + "$]", conn);
       sheetAdapter.Fill(sheetData);
       conn.Close();
    }                        
    return sheetData;
}

private OleDbConnection returnConnection(string fileName)
{
    return new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + fileName + "; Jet OLEDB:Engine Type=5;Extended Properties=\"Excel 8.0;\"");
} 
```

对于较新的 Excel 版本：

```
return new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName + ";Extended Properties=Excel 12.0;"); 
```

您还可以使用[Excel 数据阅读器](http://exceldatareader.codeplex.com/)，这是 CodePlex 上的一个开源项目。它非常适合从 Excel 工作表中导出数据。

指定链接上给出的示例代码：

```
FileStream stream = File.Open(filePath, FileMode.Open, FileAccess.Read);

//1\. Reading from a binary Excel file ('97-2003 format; *.xls)
IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
//...
//2\. Reading from a OpenXml Excel file (2007 format; *.xlsx)
IExcelDataReader excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);
//...
//3\. DataSet - The result of each spreadsheet will be created in the result.Tables
DataSet result = excelReader.AsDataSet();
//...
//4\. DataSet - Create column names from first row
excelReader.IsFirstRowAsColumnNames = true;
DataSet result = excelReader.AsDataSet();

//5\. Data Reader methods
while (excelReader.Read())
{
//excelReader.GetInt32(0);
}

//6\. Free resources (IExcelDataReader is IDisposable)
excelReader.Close(); 
```

参考：[如何使用 Microsoft.Office.Interop.Excel 从 Excel 导入数据集？](https://stackoverflow.com/questions/7244971/import-excel-data-into-a-dataset-using-microsoft-office-interop-excel)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-24T10:37:01.657

尝试使用这种免费方式，[https://freenetexcel.codeplex.com](https://freenetexcel.codeplex.com)

```
 Workbook workbook = new Workbook();

 workbook.LoadFromFile(@"..\..\parts.xls",ExcelVersion.Version97to2003);
 //Initialize worksheet
 Worksheet sheet = workbook.Worksheets[0];

 DataTable dataTable = sheet.ExportDataTable(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-19T10:02:15.620

如果您可以将其限制为仅（Open Office XML 格式）*.xlsx 文件，那么最流行的库可能是[EPPLus](https://github.com/JanKallman/EPPlus)。

奖励是，没有其他依赖项。只需使用 nuget 安装：

```
Install-Package EPPlus 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-24T10:17:33.087

**从excel读取，修改并回写**

```
 /// <summary>
/// /Reads an excel file and converts it into dataset with each sheet as each table of the dataset
/// </summary>
/// <param name="filename"></param>
/// <param name="headers">If set to true the first row will be considered as headers</param>
/// <returns></returns>
public DataSet Import(string filename, bool headers = true)
{
    var _xl = new Excel.Application();
    var wb = _xl.Workbooks.Open(filename);
    var sheets = wb.Sheets;
    DataSet dataSet = null;
    if (sheets != null && sheets.Count != 0)
    {
        dataSet = new DataSet();
        foreach (var item in sheets)
        {
            var sheet = (Excel.Worksheet)item;
            DataTable dt = null;
            if (sheet != null)
            {
                dt = new DataTable();
                var ColumnCount = ((Excel.Range)sheet.UsedRange.Rows[1, Type.Missing]).Columns.Count;
                var rowCount = ((Excel.Range)sheet.UsedRange.Columns[1, Type.Missing]).Rows.Count;

                for (int j = 0; j < ColumnCount; j++)
                {
                    var cell = (Excel.Range)sheet.Cells[1, j + 1];
                    var column = new DataColumn(headers ? cell.Value : string.Empty);
                    dt.Columns.Add(column);
                }

                for (int i = 0; i < rowCount; i++)
                {
                    var r = dt.NewRow();
                    for (int j = 0; j < ColumnCount; j++)
                    {
                        var cell = (Excel.Range)sheet.Cells[i + 1 + (headers ? 1 : 0), j + 1];
                        r[j] = cell.Value;
                    }
                    dt.Rows.Add(r);
                }

            }
            dataSet.Tables.Add(dt);
        }
    }
    _xl.Quit();
    return dataSet;
}

 public string Export(DataTable dt, bool headers = false)
    {
        var wb = _xl.Workbooks.Add();
        var sheet = (Excel.Worksheet)wb.ActiveSheet;
        //process columns
        for (int i = 0; i < dt.Columns.Count; i++)
        {
            var col = dt.Columns[i];
            //added columns to the top of sheet
            var currentCell = (Excel.Range)sheet.Cells[1, i + 1];
            currentCell.Value = col.ToString();
            currentCell.Font.Bold = true;
            //process rows
            for (int j = 0; j < dt.Rows.Count; j++)
            {
                var row = dt.Rows[j];
                //added rows to sheet
                var cell = (Excel.Range)sheet.Cells[j + 1 + 1, i + 1];
                cell.Value = row[i];
            }
            currentCell.EntireColumn.AutoFit();
        }
        var fileName="{somepath/somefile.xlsx}";
        wb.SaveCopyAs(fileName);
        _xl.Quit();
        return fileName;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-24T16:33:48.153

尝试使用 Aspose.cells 库（不是免费的，但是试用版就够了），相当不错

**`Install-package Aspose.cells`**

有示例代码：

```
using Aspose.Cells;
using System;

namespace ExcelReader
{
    class Program
    {
        static void Main(string[] args)
        {
            // Replace path for your file
            readXLS(@"C:\MyExcelFile.xls"); // or "*.xlsx"
            Console.ReadKey();
        }

        public static void readXLS(string PathToMyExcel)
        {
            //Open your template file.
            Workbook wb = new Workbook(PathToMyExcel);

            //Get the first worksheet.
            Worksheet worksheet = wb.Worksheets[0];

            //Get cells
            Cells cells = worksheet.Cells;

            // Get row and column count
            int rowCount = cells.MaxDataRow;
            int columnCount = cells.MaxDataColumn;

            // Current cell value
            string strCell = "";

            Console.WriteLine(String.Format("rowCount={0}, columnCount={1}", rowCount, columnCount));

            for (int row = 0; row <= rowCount; row++) // Numeration starts from 0 to MaxDataRow
            {
                for (int column = 0; column <= columnCount; column++)  // Numeration starts from 0 to MaxDataColumn
                {
                    strCell = "";
                    strCell = Convert.ToString(cells[row, column].Value);
                    if (String.IsNullOrEmpty(strCell))
                    {
                        continue;
                    }
                    else
                    {
                        // Do your staff here
                        Console.WriteLine(strCell);
                    }
                }
            }
        }
    }
} 
```

# redirect - htaccess 重定向不适用于某些浏览器

> ID：12996235
> 
> 赞同：0
> 
> 时间：2012-10-21T08:36:10.613
> 
> 标签：redirect, https, cross-browser

这是htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule (.*) https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,NCL] 
```

第一条规则检查您是否有 www ，如果没有重定向到 www + https，下一条规则检查客户端是否通过 https 访问网站，一切正常，除了在 Opera 上，Opera 将我重定向到[https://www .domain.com/https://domain.com/](https://www.domain.com/https://domain.com/) 就像它将域 + 请求 uri 放在 {request_uri} 中，我似乎无法使其工作。关于如何使其正常工作的任何建议？编辑： IE 也不工作。它只是给服务器错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:06:34.727

重定向是由 Apache 完成的，所以 Opera 在这个错误中是无罪的。我测试了你的规则并得到了一个错误：

```
RewriteRule: unknown flag 'NCL' 
```

试试这个：

```
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,NC,L] 
```

# c++ - 如何从 qplaintextedit 获取文本颜色？

> ID：12996236
> 
> 赞同：1
> 
> 时间：2012-10-21T08:36:16.890
> 
> 标签：c++, qt, colors, qplaintextedit

我想从纯文本中获取文本颜色。我可以使用 charFormat() 获得 fontWeight 和其他格式，但是当我调试前景色时，它被设置为无颜色！！？

请帮我 ....

示例代码：

```
QTextCursor c = textCursor();
QTextCharFormat result = c.charFormat();

if (result.fontWeight() == QFont::Bold)
    qDebug() << "bold text";  //worked
else if (result.fontWeight() == QFont::Normal)
    qDebug() << "normal text";  //worked

if (result.foreground().color() == Qt::green)
    qDebug() << "green";  //not worked !!
else if (result.foreground().color() == Qt::blue)
    qDebug() << "blue";  //not worked !!
else
    qDebug() << "no color !!"; 
```

TNX

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T11:43:12.387

如果您使用的是 Qt4，则必须使用 QPalette 类。QPalette 为 GUI 上的不同实体存储不同的颜色（文本颜色、背景等）。它是从父小部件继承的，但可以为您拥有的每个小部件进行更改。

```
QPlainTextEdit *pteEdit; // your text edit
QPalette palette = pteEdit->palette();
QColor textColor = palette.color( QPalette::WindowText ); 
```

阅读 QPalette 文档。根据小部件类型和子类型，它可能是不同的颜色角色。对于非活动文本、普通文本等。

# android - Android 列出私有应用存储中的文件

> ID：12996239
> 
> 赞同：6
> 
> 时间：2012-10-21T08:36:37.217
> 
> 标签：android, load, save

我正在开发 Android 应用程序，我需要保存和加载功能。

我想使用此功能将重要数据保存在私有应用程序存储中：

```
public static void save(Object file, String fileName, Context context)
        throws IOException, FileNotFoundException {
    FileOutputStream fos = context.openFileOutput(fileName,
            context.MODE_PRIVATE);
    ObjectOutputStream oos = new ObjectOutputStream(fos);
    oos.writeObject(file);
    oos.flush();
    oos.close();
    fos.close();
    System.out.println(TAG + ": File saved successful!");
} 
```

我还编写了加载数据的方法。这是有效的，因为我知道文件的确切名称。

我现在需要动态保存文件，动态生成名称。如何列出保存在昂贵的应用程序存储中的文件？所以我可以加载确切的一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T08:49:56.987

干得好！

```
File dir = getFilesDir(); 
File[] subFiles = dir.listFiles();

if (subFiles != null)
{
    for (File file : subFiles)
    {
        // Here is each file
    }
} 
```

# sql - SQL Server：以相反的顺序将一个表复制到另一个表中

> ID：12996240
> 
> 赞同：2
> 
> 时间：2012-10-21T08:36:37.840
> 
> 标签：sql, sql-server, database

我有一张表，新数据以 开头`id=1`并增加`id`，我们得到旧数据，现在的问题是，因为每天都会添加新数据，我想显示从新到旧的结果，会有一个问题。我想颠倒表格的顺序，即使添加了新数据，我也可以显示从新到旧的数据。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:53:12.480

您可以硬编码发生切换的任意数字。假设您现在有 1,000 行（所以 #1 是最新的，但 #1001 在添加时将是最新的）：

```
SELECT (CASE WHEN id < 1000 THEN id * -1 ELSE id END) AS sort_order
ORDER BY sort_order DESC 
```

可能更好的解决方案是添加一个时间戳列，因为依赖自动生成的列来获取真实数据并不好。

**编辑**

要创建一个新表，请将上面的内容与插入一起使用。

```
INSERT INTO [new_table] (col1,col2,col3, ...)
SELECT (col1, col2, col3, ...)
FROM [old_table]
ORDER BY (CASE WHEN id < 1000 THEN id * -1 ELSE id END) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:53:53.037

最好在`datetime`表中添加一个字段。

但是，您的 ID 不能直接用作订单字段，因为到目前为止 ID=1 是最新的，但从现在开始，每条新记录的 ID 都将高于 X。因此，您需要确定 X 是最旧记录的 ID 值，直到现在。然后您可以按两种情况订购：

*   它属于**low-id=new**还是**high-id=new**组？

这是一个示例，其中`X=10`：

```
 SELECT ID 
    FROM dbo.tbl
    ORDER BY CASE WHEN ID <=10 THEN ID ELSE -ID END ASC 
```

这是小提琴：[http ://sqlfiddle.com/#!6/95c9a/3/0](http://sqlfiddle.com/#!6/95c9a/3/0)

* * *

> 但我想将内容复制到新表中，这样我就不需要区别对待它们

然后就可以使用上面的sql按顺序插入到新表中了。我会使用一个新`ID`列`IDENTITY(1,1)`：

```
INSERT INTO dbo.tblCopy
  SELECT ID 
  FROM dbo.tbl
  ORDER BY CASE WHEN ID <=10 THEN ID ELSE -ID END ASC 
```

如果您不想添加另一列并且想要重用旧 id，可以使用`ROW_NUMBER`with above `CASE`：

```
INSERT INTO dbo.tblCopy
  SELECT ID = 
    ROW_NUMBER()OVER(ORDER BY CASE WHEN ID <=10 THEN ID ELSE -ID END ASC)
  FROM dbo.tbl 
```

演示：[http ://sqlfiddle.com/#!6/00213/1/0](http://sqlfiddle.com/#!6/00213/1/0)

# php - imap_open() 问题

> ID：12996247
> 
> 赞同：0
> 
> 时间：2012-10-21T08:38:09.440
> 
> 标签：php

我正在尝试从任何电子邮件服务提供商处获取“电子邮件消息”，例如：yahoo、Gmail、Hotmail。但我无法得到它。它显示错误消息。

**以下是我的php脚本..**

```
<?php

if( $mbox = imap_open("{yoursitename.com:110/pop3/notls}INBOX", "username of mailbox", 
"password of mailbox")){
$path = "set path here for where the attachments are store";
$check = imap_mailboxmsginfo($mbox);     
function getmsg($mbox,$mid) {   
    global $charset,$htmlmsg,$plainmsg,$attachments,$from,$to,$subj,$timages,$path;
    $htmlmsg = $plainmsg = $charset = '';
    $attachments = array();
    // HEADER
    $h = imap_headerinfo($mbox,$mid);
    // add code here to get date, from, to, cc, subject...
    $date = $h->date;
    $from = $h->fromaddress;
    $to = $h->toaddress;
      $subj = htmlspecialchars($h->Subject);
    // BODY
    $s = imap_fetchstructure($mbox,$mid);
    if (!$s->parts)  // simple
    getpart($mbox,$mid,$s,0);  // pass 0 as part-number
    else {  // multipart: cycle through each part
    foreach ($s->parts as $partno0=>$p)
      getpart($mbox,$mid,$p,$partno0+1);
    }
}

function getpart($mbox,$mid,$p,$partno) {
    // $partno = '1', '2', '2.1', '2.1.3', etc for multipart, 0 if simple
    global 
 $htmlmsg,$plainmsg,$charset,$attachments,$partid,$last_mail_id,$patterns,$pic,
 $newstr,$c,$ok,$timages,$subj,$path;
    $patterns = array();
    $pic =  array();
    $image=array();
    $data = ($partno) ? imap_fetchbody($mbox,$mid,$partno) : imap_body($mbox,$mid);    
// simple
    if ($p->encoding==4)
    $data = quoted_printable_decode($data);
    else if ($p->encoding==3)
    $data = base64_decode($data);
    // PARAMETERS    // get all parameters, like charset, filenames of attachments, 
etc.
    $params = array();
    if ($p->parameters)
    foreach ($p->parameters as $x)
        $params[strtolower($x->attribute)] = $x->value;
    if ($p->dparameters)
    foreach ($p->dparameters as $x)
        $params[strtolower($x->attribute)] = $x->value;

    // ATTACHMENT    // Any part with a filename is an attachment,
    // so an attached text file (type 0) is not mistaken as the message.
    if ($params['filename'] || $params['name']) {
    $partid = htmlentities($p->id,ENT_QUOTES);

       // filename may be given as 'Filename' or 'Name' or both
    $filename = ($params['filename'])? $params['filename'] : $params['name'];
    // filename may be encoded, so see imap_mime_header_decode()
     $attachments[$filename] = $data;  // this is a problem if two files have same name
    //store id and filename in array
    $image[$key] = $filename;

    }
    //save the attachments in the directory
    foreach( $attachments as $key => $val){
      $fname = $key;
      $fp = fopen("$path/$fname","w");
      fwrite($fp, $val);
      fclose($fp);
    }
        // TEXT
        if ($p->type==0 && $data) {
        // Messages may be split in different parts because of inline attachments,   
// so append parts together with blank row.
        if (strtolower($p->subtype)=='plain')
            $plainmsg .= trim($data)."\n\n";
        else
            //preg_match_all('/<img[^>]+>/i',$data, $result);
            $htmlmsg .= $data."<br><br>";
            $charset = $params['charset'];  // assume all parts are same charset
        }

    // There are no PHP functions to parse embedded messages, so this just appends the 
raw source to the main message.
    else if ($p->type==2 && $data) {
    $plainmsg .= $data."\n\n";
    }
    // SUBPART RECURSION
    if ($p->parts) {
    foreach ($p->parts as $partno0=>$p2)
        getpart($mbox,$mid,$p2,$partno.'.'.($partno0+1));  // 1.2, 1.2.1, etc.
    }
}

$attachments = array();
$num_msg = imap_num_msg($mbox);
if($num_msg>0) {
    getmsg($mbox,1);
}else {
     echo "Sorry!...No Messages in MailBox...<br>";
}

//imap_delete and imap_expunge are used to delete the mail after fetching....Uncomment 
it if you want to delete the mail from mailbox
//imap_delete($mbox,1); 
//imap_expunge($mbox);
imap_close($mbox);

}else { exit ("Can't connect: " . imap_last_error() ."\n");  echo "FAIL!\n";  };

?> 
```

**错误信息：**

```
Warning: imap_open() [function.imap-open]: Couldn't open stream {yahoo.com:110/pop3
/notls}INBOX in D:\xampp server\xampp\htdocs\practice\php\email.php on line 2

Fatal error: Maximum execution time of 30 seconds exceeded in D:\xampp server\xampp
\htdocs\practice\php\email.php on line 2

Notice: Unknown: Can't connect to yahoo.com,110: Timed out (errflg=1) in Unknown on 
line 0

Notice: Unknown: Can't connect to yahoo.com,110: Timed out (errflg=1) in Unknown on 
line 0

Notice: Unknown: Can't connect to yahoo.com,110: Timed out (errflg=2) in Unknown on line 0 
```

任何人都可以修复它吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:16:13.093

正如 arkascha 所说，**yahoo.com 不在端口 110 上侦听**。

Yahoo 的 POP3 服务器`pop.mail.yahoo.com`位于端口 110（或带有 SSL 的 995）上，[如此 Yahoo 帮助文章中所述](http://help.yahoo.com/kb/index?page=content&id=SLN4247&actp=search&viewlocale=en_CA&searchid=1350810707531&locale=en_CA&y=PROD_MAIL_ML)

# php - 使用 PHP end() 函数分配新 id

> ID：12996248
> 
> 赞同：0
> 
> 时间：2012-10-21T08:38:36.397
> 
> 标签：php, mysql, pdo

我有问题数据库表。我使用整数变量 Id 对表的所有元素进行排序。

**我想要什么？** 无论何时，都会添加一个新问题。它被分配了一个新的 ID，比我数据库中最后一个问题的 ID 大 1。

这是我所做的：

```
include('dbconnect.php');

    $ids = $connection->prepare('SELECT * FROM question ORDER BY id ASC');
    $ids->execute(array());
    $result = $ids->fetchAll(PDO::FETCH_ASSOC);
    $new_id = end($result['id']); //Error in this line.
    $new_id = $new_id + 1; 
```

但是，我总是得到错误

```
Warning: end() expects parameter 1 to be array, null given in /Applications/MAMP/htdocs/question/submit.php on line 20 
```

我正在使用该`FetchAll`语句，所以我觉得应该返回一个数组。任何人都可以找出错误在哪里。

添加到数据库中的每个新问题的 ID 为 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:41:50.657

如[使用`AUTO_INCREMENT`](http://dev.mysql.com/doc/en/example-auto-increment.html)中所述：

> 该`AUTO_INCREMENT`属性可用于为新行生成唯一标识：
> 
> ```
> 创建表动物（
>      id MEDIUMINT NOT NULL AUTO_INCREMENT,
>      名称 CHAR(30) 非空，
>      主键（id）
> );
> 
> 插入动物（名称）值
>     ('狗'),('猫'),('企鹅'),
>     ('松懈'),('鲸鱼'),('鸵鸟');
> 
> 从动物中选择*；
> 
> ```
> 
> 返回：
> 
> ```
> +----+----------+
> | 编号 | 姓名 |
> +----+----------+
> | 1 | 狗 |
> | 2 | 猫 |
> | 3 | 企鹅 |
> | 4 | 松懈|
> | 5 | 鲸鱼|
> | 6 | 鸵鸟|
> +----+----------+
> 
> ```
> 
> 没有为该`AUTO_INCREMENT`列指定值，因此 MySQL 自动分配了序列号。您还可以显式地将`NULL`或 0 分配给列以生成序列号。

# javascript - 带有按钮和文本的 Jquery 单击功能

> ID：12996250
> 
> 赞同：1
> 
> 时间：2012-10-21T08:39:05.720
> 
> 标签：javascript, jquery

大家好，我正在尝试使用点击功能。当用户单击按钮时，将出现第二个文本，第一个文本将显示为无，然后用户再次使用相同的按钮再次单击，这次将出现第三个文本并显示第二个文本，最后再次单击相同的按钮第四次文本将出现第三个显示无。

我有另一个按钮，用户单击此按钮第四个文本将不显示，第三个文本将出现并再次单击此按钮第三个文本将不显示第二个文本将出现最后单击此按钮第二个将不显示第一个文本将出现。这是我的功能：

```
 $("#slider1next").click(function () {

         var $next = $(".text:visible").hide().next();
         $next.length ? $next.show() : $(".text:first").show();

 });

 $("#slider2next").click(function () {

         var $next = $(".text:visible").hide().next();
         $next.length ? $next.show() : $(".text:first").show();

 }); 
```

​ 这是我的html：

```
<button id="slider1next" >Clickme</button>
  <p class="text" id="first_one">This is the first text</p>
    <p class="text" id="second_one" style="display:none">This is the second text</p>
    <p class="text" id="third_one" style="display:none">This is the third text</p>
<p class="text" id="fourth_one" style="display:none">This is the four text</p>

<br/>
<button id="slider2next" >Clickme</button> 
```

你也可以在那里看到

[http://jsfiddle.net/ganymedes/7kxAE/2/](http://jsfiddle.net/ganymedes/7kxAE/2/)

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:47:59.737

您可以使用`prev`方法和`:last`选择器：

```
$("#slider1next").click(function() {
    var $next = $(".text:visible").hide().next();
    $next.length ? $next.show() : $(".text:first").show();
});

$("#slider2next").click(function() {
    var $prev = $(".text:visible").hide().prev();
    $prev.length ? $prev.show() : $(".text:last").show();
}); 
```

[http://jsfiddle.net/dq6rf/](http://jsfiddle.net/dq6rf/)

# ruby-on-rails - 显示所见即所得表单提交的结果的最佳和最安全的方式？

> ID：12996252
> 
> 赞同：0
> 
> 时间：2012-10-21T08:39:10.977
> 
> 标签：ruby-on-rails, forms, wysiwyg

我刚刚以模型的形式实现了[http://xing.github.com/wysihtml5/ ：](http://xing.github.com/wysihtml5/)`Post`

**_form.html.erb：**

```
 <div class="field">
    <%= render 'shared/toolbar' %>
    <%= f.text_area :content, id: "wysihtml5-textarea", placeHolder: "Content" %>
  </div> 
```

**显示.html.erb：**

```
 <span class="post-content">
    <%= @post.content %>
  </span> 
```

显示所见即所得编辑器结果的最佳和最安全的方式是什么？

（现在输出看起来像这样）：

```
text <i>editor</i> <b>test</b>&nbsp;text <u>editor</u> test&nbsp;text editor test 
```

（不确定我是否需要太多安全性，因为它只有`<i><b><u>`标签。在这种情况下，我应该只使用`raw`还是`escape`？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:09:53.400

小心 HTML 插入！看看[消毒宝石](https://github.com/rgrove/sanitize)

当然，使用 raw 来显示您的净化 html：

`<%= raw @post.content %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:06:02.803

我这样做：

```
<%= raw @post.content %> 
```

但是你信任你的用户吗？因为他们也可以插入 HTML（正如我从演示中看到的那样），所以我会说不要。

# python - Python中的多线程编程有什么优势？

> ID：12996254
> 
> 赞同：3
> 
> 时间：2012-10-21T08:39:24.343
> 
> 标签：python, multithreading, eventlet

当我听说多线程编程时，我想到了加速我的程序的机会，但不是吗？

```
import eventlet
from eventlet.green import socket
from iptools import IpRangeList

class Scanner(object):
    def __init__(self, ip_range, port_range, workers_num):
        self.workers_num = workers_num or 1000
        self.ip_range = self._get_ip_range(ip_range)
        self.port_range = self._get_port_range(port_range)
        self.scaned_range = self._get_scaned_range()

    def _get_ip_range(self, ip_range):
        return [ip for ip in IpRangeList(ip_range)]

    def _get_port_range(self, port_range):
        return [r for r in range(*port_range)]

    def _get_scaned_range(self):
        for ip in self.ip_range:
            for port in self.port_range:
                yield (ip, port)

    def scan(self, address):
        try:
            return bool(socket.create_connection(address))
        except:
            return False

    def run(self):
        pool = eventlet.GreenPool(self.workers_num)
        for status in pool.imap(self.scan, self.scaned_range):
            if status:
                yield True

    def run_std(self):
        for status in map(self.scan, self.scaned_range):
            if status:
                yield True

if __name__ == '__main__':
    s = Scanner(('127.0.0.1'), (1, 65000), 100000)
    import time
    now = time.time()
    open_ports = [i for i in s.run()]
    print 'Eventlet time: %s (sec) open: %s' % (now - time.time(),
                                                len(open_ports))
    del s
    s = Scanner(('127.0.0.1'), (1, 65000), 100000)
    now = time.time()
    open_ports = [i for i in s.run()]
    print 'CPython time: %s (sec) open: %s' % (now - time.time(),
                                                len(open_ports)) 
```

和**结果：**

```
Eventlet time: -4.40343403816 (sec) open: 2
CPython time: -4.48356699944 (sec) open: 2 
```

我的问题是，如果我不是在我的笔记本电脑上而是在服务器上运行这段代码并设置更多的工人价值，它会比 CPython 的版本运行得更快吗？线程的优点是什么？

**添加：** 所以我使用原始 cpython 的线程重写应用程序

```
import socket
from threading import Thread
from Queue import Queue

from iptools import IpRangeList

class Scanner(object):
    def __init__(self, ip_range, port_range, workers_num):
        self.workers_num = workers_num or 1000
        self.ip_range = self._get_ip_range(ip_range)
        self.port_range = self._get_port_range(port_range)
        self.scaned_range = [i for i in self._get_scaned_range()]

    def _get_ip_range(self, ip_range):
        return [ip for ip in IpRangeList(ip_range)]

    def _get_port_range(self, port_range):
        return [r for r in range(*port_range)]

    def _get_scaned_range(self):
        for ip in self.ip_range:
            for port in self.port_range:
                yield (ip, port)

    def scan(self, q):
        while True:
            try:
                r = bool(socket.create_conection(q.get()))
            except Exception:
                r = False
            q.task_done()

    def run(self):
        queue = Queue()
        for address in self.scaned_range:
                queue.put(address)
        for i in range(self.workers_num):
                worker = Thread(target=self.scan,args=(queue,))
                worker.setDaemon(True)
                worker.start()
        queue.join()

if __name__ == '__main__':
    s = Scanner(('127.0.0.1'), (1, 65000), 5)
    import time
    now = time.time()
    s.run()
    print time.time() - now 
```

结果是

```
 Cpython's thread: 1.4 sec 
```

我认为这是一个非常好的结果。我以标准的 nmap 扫描时间为标准：

```
$ nmap 127.0.0.1 -p1-65000

Starting Nmap 5.21 ( http://nmap.org ) at 2012-10-22 18:43 MSK
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00021s latency).
Not shown: 64986 closed ports
PORT      STATE SERVICE
53/tcp    open  domain
80/tcp    open  http
443/tcp   open  https
631/tcp   open  ipp
3306/tcp  open  mysql
6379/tcp  open  unknown
8000/tcp  open  http-alt
8020/tcp  open  unknown
8888/tcp  open  sun-answerbook
9980/tcp  open  unknown
27017/tcp open  unknown
27634/tcp open  unknown
28017/tcp open  unknown
39900/tcp open  unknown

Nmap done: 1 IP address (1 host up) scanned in 0.85 seconds 
```

我现在的问题是：据我所知，Eventlet 中的线程是如何实现的，这不是线程，而是 Eventlet 的特别之处，为什么它们不能加速任务？

Eventlet 被 OpenStack 等许多主要项目使用。但为什么呢？只是以异步方式或其他方式对数据库进行繁重的查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T03:37:12.867

**Cpython线程：**

*   每个 cpython 线程都映射到一个操作系统级别的线程（用户空间中的轻量级进程/pthread）

*   如果有多个cpython线程同时执行python代码：由于全局解释器锁，一次只能有一个cpython线程解释python。当需要解释 python 指令时，其余线程将在 GIL 上被阻塞。当有许多 python 线程时，这会大大降低速度。

*   现在，如果您的 python 代码大部分时间都花在网络操作（发送、连接等）中：在这种情况下，争夺 GIL 解释代码的线程将会减少。所以GIL的效果还不错。

**Eventlet/绿色线程：**

*   从上面我们知道cpython对线程有性能限制。Eventlets 尝试通过使用在单核上运行的单线程并为所有事情使用非阻塞 i/o 来解决问题。

*   绿色线程不是真正的操作系统级线程。它们是并发的用户空间抽象。最重要的是，N 个绿色线程将映射到 1 个 OS 线程。这避免了 GIL 问题。

*   绿色线程相互合作让步，而不是抢先调度。对于网络操作，套接字库在运行时进行修补（猴子修补），以便所有调用都是非阻塞的。

*   因此，即使您创建了一个 eventlet 绿色线程池，您实际上也只创建了一个操作系统级别的线程。这个单一的操作系统级线程将执行所有的小事件。这个想法是，如果所有网络调用都是非阻塞的，那么在某些情况下，这应该比 python 线程更快。

**概括**

对于您上面的程序，“真正的”并发恰好比 eventlet 模型（在 1 个处理器上运行的单线程）更快（cpython 版本，5 个线程在多个处理器上运行）。

有一些 cpython 工作负载会在许多线程/内核上表现不佳（例如，如果您有 100 个客户端连接到服务器，每个客户端一个线程）。Eventlet 是用于此类工作负载的优雅编程模型，因此它在多个地方使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T04:06:16.650

您的问题的标题是“Python 中多线程编程的优势是什么？” 所以我给你一个例子，而不是试图解决你的问题。我有一个 python 程序在我 2005 年购买的 pentium core duo 上运行，运行 windows xp，从 Finance.yahoo.com 下载 500 个 csv 文件，每个大约 2K 字节，一个用于标准普尔 500 指数中的每只股票。它使用 urllib2 . 如果我不使用线程，则需要超过 2 分钟，使用标准 python 线程（40 个线程）它在 3 到 4 秒之间，平均每个大约 1/4 秒（这是挂钟时间，包括计算和 I/O ）。当我查看每个线程（挂钟）的开始和停止时间时，会有很大的重叠。我有同样的东西作为java程序运行，python和java之间的性能几乎相同。也与使用 curllib 的 c++ 相同，但 curllib 比 java 或 python 慢一点。我正在使用标准 python 版本 2.2.6

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T03:08:10.007

Python 有一个全局解释器锁[http://en.wikipedia.org/wiki/Global_Interpreter_Lock](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)可以防止两个线程同时执行。

如果您使用的是 cython 之类的东西，C 部分可以同时执行，这就是您看到加速的原因。

在纯 python 程序中没有性能优势（就您可以完成的计算量而言），但有时它是编写执行大量 IO 的代码的最简单方法（例如，当您等待套接字读取完成时，让线程等待做点别的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:08:57.097

使用`threading`or`multiprocessing`模块使您能够使用现代 CPU 中普遍存在的多个内核。

这是有代价的；增加了程序的复杂性，需要规范对共享数据的访问（尤其是写入）；如果一个线程正在迭代一个列表，而另一个线程正在更新它，那么结果将是不确定的。这也适用于 python 解释器的内部数据。

因此，标准 cpython 在使用线程方面有一个重要[限制](http://wiki.python.org/moin/GlobalInterpreterLock)：一次只能有一个线程执行 python 字节码。

如果您想并行化一个不需要在实例之间进行大量通信的作业，`multiprocessing`（尤其是`multiprocessing.Pool`）通常比线程更好，因为这些作业在不相互影响的不同进程中运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T06:08:44.960

无论编程语言如何，多线程编程的主要优点是：

1.  如果您的系统具有多个 CPU 或内核，那么您可以让所有 CPU 同时执行应用程序代码。例如，如果您有一个具有四个 CPU 的系统，则一个进程可能会通过多线程运行速度提高 4 倍（尽管在大多数情况下它不太可能这么快，因为典型的应用程序需要线程来同步它们对共享资源，创造竞争）。

2.  如果进程由于某种原因需要阻塞（磁盘 I/O、用户输入、网络 I/O），那么当一个或多个线程被阻塞等待 I/O 完成时，其他线程可以做其他工作。请注意，对于这种类型的并发，您不需要多个 CPU 或内核，在单个 CPU 上运行的进程也可以从线程中受益匪浅。

这些好处是否可以应用于您的流程将在很大程度上取决于您的流程所做的事情。在某些情况下，您将获得相当大的性能改进，而在其他情况下，您不会，并且线程版本可能会更慢。请注意，编写良好且高效的多线程应用程序很困难。

现在，由于您特别询问 Python，让我们讨论这些好处如何应用于 Python。

1.  由于 Python 中存在全局解释器锁，因此无法在多个 CPU 中并行运行代码。GIL 确保一次只有一个线程在解释 Python 代码，因此实际上没有办法充分利用多个 CPU。

2.  如果一个 Python 线程执行阻塞操作，另一个线程将获得 CPU 并继续运行，而第一个线程被阻塞等待。当阻塞事件完成时，被阻塞的线程将恢复。所以这是在 Python 脚本中实现多线程的一个很好的理由（尽管它不是实现这种并发的唯一方法，非阻塞 I/O 可以实现类似的结果）。

以下是一些受益于使用多线程的示例：

*   执行长时间操作的 GUI 程序可以有一个线程继续保持应用程序窗口刷新和响应，甚至可能显示关于长时间操作的进度报告和取消按钮。

*   需要重复从磁盘读取记录，然后对它们进行一些处理并最终将它们写回磁盘的进程可以从线程中受益，因为当一个线程被阻塞等待从磁盘获取记录时，另一个线程可以处理另一条记录已被读取，但另一个线程可以将另一条记录写回磁盘。当进程读取或写入磁盘时没有线程，其他任何事情都不会发生。对于没有 GIL（比如 C++）的语言，好处更大，因为您还可以有多个线程，每个线程都运行在不同的内核上，都在处理不同的记录。

我希望这有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T08:46:06.047

添加线程不一定会使进程更快，因为与线程管理相关的开销可能超过您从线程获得的任何性能增益。

如果您在一台 CPU 较少而不是 CPU 较多的机器上运行此程序，您可能会发现它运行速度较慢，因为它将每个线程交换进出执行。可能还有其他因素在起作用。如果线程需要访问无法处理并发请求的其他子系统或硬件（例如串行端口），那么多线程不会帮助您提高性能。

# php - 没有多个页面的动态内容

> ID：12996256
> 
> 赞同：0
> 
> 时间：2012-10-21T08:39:43.853
> 
> 标签：php, dynamic-content

首先让我说我是 mysql 和 php 的新手，我确信这是一个菜鸟问题，但我一直在搜索谷歌，找不到任何解决方案。

基本上我想创建 1 个模板文件，该文件将从具有多行和多列的数据库中读取所有表，但一次只显示一行。

一个例子是[http://www.w3schools.com/php/php_mysql_select.asp](http://www.w3schools.com/php/php_mysql_select.asp)滚动到底部显示 peter griffen 和 glen quagmire 我希望它只显示“glen quagmire”或只显示“peter griffen”，具体取决于之前点击了哪个链接。

我是否需要以某种方式为链接 url 分配一个 ID，以便 php 知道要解析哪一行等。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:57:43.633

一种直接的方法是使用查询字符串。制作链接`<a href='stuff.php?id=1'>View #1</a>`。然后在 SQL 查询中使用`where id='$id'`子句，设置`$id`等于查询字符串参数`$_GET['id']`。

# java - 如何以一种不错的方式从 Spring DI 迁移到 OSGi DI？

> ID：12996260
> 
> 赞同：0
> 
> 时间：2012-10-21T08:40:02.857
> 
> 标签：java, eclipse, spring, eclipse-plugin, osgi

我有一个用于 DI 的`Swing`项目`Spring`，现在我正在尝试迁移`Eclipse 4`到`OSGi`.
使用`Spring`用户的配置文件可以注释/取消注释 bean 以添加/删除功能（由这些后端 bean 提供）。
现在我正在寻找`Eclipse`基于. 我知道我可以将 bean 作为服务并在其中定义启动级别，但这并不能解决我的用例，即： 应用程序在*没有*运行这些 bean/模块的情况下启动，并且如果用户从正在运行的 UI 更新配置这些 bean/模块启动，它们也会在应用程序的下一次启动时启动。`OSGi``OSGi`
`OSGi`
 *我的问题有一个很好/干净的方法吗？*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:19:58.623

您可能想要使用[Eclipse Gemini Blueprint](http://www.eclipse.org/gemini/)来管理 Spring 和 OSGi 之间的所有集成方式（Gemini Blueprint 是 Spring Dynamic Modules 的继承者）。特别是，它几乎可以为您处理与动态服务注册相关的所有复杂性；你的豆子可以保持几乎相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:40:36.077

另一种方法是将声明式服务与配置管理一起使用，让配置数据确定要激活哪些服务。[在这里更详细](http://njbartlett.name/2010/07/19/factory-components-in-ds.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:43:01.227

就像您已经发现服务是解决此问题的好方法一样。只需安装所有模块，但不要启动它们。然后，您的 UI 可以在用户选择他想要的功能时启动和停止模块。然后，OSGi 框架会在重新启动时记住已安装和启动的模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T06:54:02.373

绝对最好的方法是声明式服务 (DS)。DS 与 OSGi 的配置管理集成，使得控制服务实例的数量以及它们的配置和服务属性变得微不足道。例如，以下组件（带有 bnd 注释 [很快将类似于 OSGi 规范中的类似功能]）：

```
 @Component(designateFactory=Config.class)
    public MyComp implements MyService {
       interface Config {
         int port();
         String host();
      }
      Config config;
      @Activate
      void activate(Map<String,Object> map) {
        config = Configurable.createConfigurable(Config.class,map);
        start();
      }

      void foo() { ... do the MyService stuff ... }

      @Reference
      void setDataSource( DataSource ds ) { ... }
   } 
```

此组件需要 Configuration Admin*出厂*配置。了解其功能的最佳方式是使用 Apache Felix Webconsole 设置框架。*告诉bnd*在包`designateFactory=Config.class`中创建一个元类型XML 文件。Webconsole 使用它来为配置数据创建一个漂亮的表单，从接口及其方法派生。此表单可识别类型，即您不能为端口号输入非数字值。通过 web 控制台，您现在可以通过创建多个工厂配置来实例化多个组件。删除这些出厂配置会删除服务。在您的应用程序中，您可以在用户的​​控制下自己操作 Configuration Admin。

 *另一个优点是通过 Configuration Admin 你可以控制组件依赖的绑定。在上述示例中，您可以将`dataSource.target`属性设置为过滤器，例如`(db=accounting)`选择会计数据库。所有配置属性都添加为服务属性，因此您可以轻松地在创建数据源的配置上设置“db”服务属性（如果以这种方式实现）。

这是 DS 最不为人知的优势之一，我可以告诉你这是巨大的。要开始使用这个，只需在 bndtools 中创建一个 DS 项目，然后创建一个新的运行描述符并选择 Webconsole 模板。

DS 的另一个优点是它很小，并且不会试图隐藏动态，这在蓝图中可能会很痛苦。**

# jquery - 如何使 jQuery toggle() 在页面之间保持一致？

> ID：12996262
> 
> 赞同：0
> 
> 时间：2012-10-21T08:40:31.263
> 
> 标签：jquery, user-interface, toggle, storage, consistency

我有一个切换开关，可以显示和隐藏我希望在我网站的每个页面上保持一致的电子邮件地址。

这是我现在用于切换效果的代码，效果很好。（别担心，我在我的实际网站上使用了电子邮件混淆技术，为了整洁，我只是简化了下面的代码）。

HTML

```
<a id="contact-switch" href="javascript:void(0);">Contact</a>
<div id="contact-content">xxx@gmail.com</div> 
```

jQuery

```
<script type="text/javascript">
    $("#contact-switch").click(function() {
    $("#contact-content").fadeToggle("fast", "linear");
  });
</script> 
```

假设我网站的每个页面上都有这些相同的元素，那么在我的网站的每个页面上保持此切换状态一致的最佳方法是什么？

换句话说，如果我在一个页面上显示了电子邮件地址，则切换将在我转到的下一页上激活，如果我在下一页将其关闭，然后它将在下一页上保持关闭状态， ETC？

我听说过一些关于存储信息的事情，`window.load`但我不确定这意味着什么。任何帮助将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:47:17.057

您需要一种将数据传递到不同页面的方法。在这种情况下，我认为您最好使用 cookie： [How do I set/unset cookie with jQuery?](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:51:33.660

您需要一个持久存储来为您的切换状态保留一个标志。这可能是您的`database`, `cookies`, `session vars`... 等。您可以尝试使用`window.localStorage`或`window.sessionStorage`其他一些技术，但通常旧浏览器不支持它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:58:47.300

我建议您看一下[PersistJS](http://pablotron.org/?cid=1557) - 它利用更新的 Web 技术在请求之间持久保存数据（但如果需要，可以优雅地回退到 cookie。）

# c++ - 使用静态 const 成员构建类层次结构

> ID：12996267
> 
> 赞同：1
> 
> 时间：2012-10-21T08:41:05.223
> 
> 标签：c++, static, hierarchy

我正在尝试为同余随机数生成器类创建一个合理的类层次结构（这意味着它具有 3 个整数参数 - *M*、*a*、*b*）。我决定基类应该为派生类提供一个接口（所以它应该是抽象的），并且*M*，*a*，*b*应该是派生类中的*静态常量*（因为它们在派生类中是相同的）。

由于*generate()*函数对于所有同余随机数生成器都是相同的，所以它的定义应该放在基类中。问题是这个函数使用了所有的*M*，*a*，*b*，但这些不能在基类中成为*static const 。*

为了说明问题，提供了一种可能的解决方案。但是，我对它并不完全满意，因为它为派生类的每个实例创建了 3 个*超长*变量，所以我想知道是否可以提出更优雅的设计。

```
class RandomGenerator{
   protected:
       unsigned int seed;

       const long long int M;
       const long long int a;
       const long long int b;

   public:
       RandomGenerator(unsigned int, long long, long long, long long);

       virtual long double generate()  const = 0;
};

long double RandomGenerator::generate() const{
   static long long prv = seed;

   return (long double) (prv = (a * prv + b) % M) / (M-1);
} 

class RandU : public RandomGenerator {
    private:
       static const long long M = 2147483648LL;
       static const long long a = 65539;
       static const long long b = 0;

   public:
       RandU(unsigned int);

       virtual long double generate() const;
 };

RandU::RandU(unsigned int nseed): RandomGenerator(nseed, M, a, b){}

long double RandU::generate() const{
    return RandomGenerator::generate();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:48:46.650

实际上你的构造是好的，它不会增加你的`RandU`类的大小。您可以使用以下`sizeof`功能检查是否属实：

```
int main() {
    cout << sizeof(RandomGenerator) << endl;
    cout << sizeof(RandU) << endl;
    return 0;
} 
```

这返回

```
32
32 
```

你可以在这里看到完整的代码：http: [//ideone.com/HNqeOC](http://ideone.com/HNqeOC)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:32:21.690

解决这个问题的一种方法是向层次结构中添加一个类：

```
class RandomGenerator {
protected:
  unsigned int seed;

public:
  RandomGenerator(unsigned int, long long, long long, long long);

  virtual long long getM() = 0;
  virtual long long geta() = 0;
  virtual long long getb() = 0;

  virtual long double generate() const;
};

inline long double RandomGenerator::generate() const {
  static long long prv = seed;
  return (long double) (prv = (a * prv + b) % M) / (M-1);
} 

class GeneralRandomGenerator : public RandomGenerator
{
  const long long int M;
  const long long int a;
  const long long int b;
public:
  virtual long long getM() { return M; }
  virtual long long geta() { return a; }
  virtual long long getb() { return b; }
};

class RandU : public RandomGenerator {
private:
  static const long long M = 2147483648LL;
  static const long long a = 65539;
  static const long long b = 0;

public:
  RandU(unsigned int);

  virtual long long getM() { return RandU::M; }
  virtual long long geta() { return RandU::a; }
  virtual long long getb() { return RandU::b; }

  virtual long double generate() const;
};

RandU::RandU(unsigned int nseed): RandomGenerator(nseed, M, a, b){}

inline long double RandU::generate() const {
  return RandomGenerator::generate();
} 
```

如您所见，我`GeneralRandomGenerator`从`RandomGenerator`. 前者现在包含 , 和 的成员`M`，`a`而`b`后者提供纯虚拟访问功能`getM()`,`geta()`和`getb()`. 在`GeneralRandomGenerator`这些访问函数中，实现了返回成员。

但是在`RandU`仍然从最高级别派生的 中，访问器被定义为返回静态成员的值。

这样，`generate()`最高级别的函数可以通过访问器函数访问它需要的内容，而值实际上来自静态或非静态成员，或者可能来自完全不同的地方。优点显然是`RandU`不会占用任何空间`M`，`a`并且`b`因为这些成员不存在于其中。

然而，*缺点*是即使在`GeneralRandomGenerator`访问`M`等时也是通过调用虚函数来执行的，这意味着性能比直接编码访问静态成员的性能要差。

避免这种情况的一种方法是提供泛化的 for`generate()`作为类之外的单独函数，并 pass`M`和`a`作为`b`参数：

```
namespace general
{
  inline long double generate(long long a, long long b, long long M) const {
    static long double prv = seed;
    return (prv = (a * prv + b) % M) / (M-1);
  }
}

class GeneralRandomGenerator
{
protected:
  unsigned int seed;

public:
  long long a;
  long long b;
  long long M;

  virtual long double generate() const {
    return general::generate(a,b,M);
  }
};

class RandomU
{
private:
  static long long a;
  static long long b;
  static long long M;
public:
  virtual long double generate() const {
    return general::generate(a,b,M);
  }
}; 
```

# java - ClickOnce 重新部署未修改的库

> ID：12996268
> 
> 赞同：3
> 
> 时间：2012-10-21T08:41:15.707
> 
> 标签：java, dependencies, clickonce

假设我有一个依赖于许多库的 Java 代码。我使用 ClickOnce 在客户端机器上部署应用程序。当代码发生变化时，我不希望重新部署依赖库。

目前的组织如下：代码更改时，正在编译，版本号增加，一个文件夹中的许多jar文件被复制到具有适当版本的分发文件夹中。稍后应用程序清单选择最新版本并部署应用程序复制所有库。

*主要问题：*是否可以将永远不会随自定义代码更改的库分开？

我对 ClickOnce 很陌生，搜索了 MSDN 并在 Google 上搜索了一下，但失败了。因此，非常感谢 ClickOnce 依赖管理教程的链接，谢谢！

PS ClickOnce for Java 代码听起来很难看，但这是严格的政治决定，抱歉。

# python - 从 python 3.2 中的文件中的“Content-Length”值获取文件大小

> ID：12996274
> 
> 赞同：9
> 
> 时间：2012-10-21T08:42:21.230
> 
> 标签：python, http, python-3.x, urllib

我想`Content-Length`从元变量中获取值。我需要获取要下载的文件的大小。但最后一行返回错误，`HTTPMessage`对象没有属性`getheaders`。

```
import urllib.request
import http.client

#----HTTP HANDLING PART----
 url = "http://client.akamai.com/install/test-objects/10MB.bin"

file_name = url.split('/')[-1]
d = urllib.request.urlopen(url)
f = open(file_name, 'wb')

#----GET FILE SIZE----
meta = d.info()

print ("Download Details", meta)
file_size = int(meta.getheaders("Content-Length")[0]) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T08:51:37.863

看起来您正在使用 Python 3，并且已经阅读了 Python 2.x 的一些代码/文档。它的文档记录很差，但是 Python 3 中没有`getheaders`方法，只有一种`get_all`方法。

请参阅[此错误报告](http://bugs.python.org/issue4773)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T14:56:41.073

对于`Content-Length`：

```
file_size = int(d.getheader('Content-Length')) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-22T05:42:23.140

将最后一行更改为：

```
file_size = int(meta.get_all("Content-Length")[0]) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-21T08:51:21.743

您应该考虑使用[`Requests`](http://docs.python-requests.org/en/latest/)：

```
import requests

url = "http://client.akamai.com/install/test-objects/10MB.bin"
resp = requests.get(url)

print resp.headers['content-length']
# '10485760' 
```

对于 Python 3，请使用：

```
print(resp.headers['content-length']) 
```

反而。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-23T00:28:29.200

`response.headers['Content-Length']`适用于 Python 2 和 3：

```
#!/usr/bin/env python
from contextlib import closing

try:
    from urllib2 import urlopen
except ImportError: # Python 3
    from urllib.request import urlopen

with closing(urlopen('http://stackoverflow.com/q/12996274')) as response:
    print("File size: " + response.headers['Content-Length']) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-22T17:31:26.357

```
import urllib.request

link = "<url here>"

f = urllib.request.urlopen(link)
meta = f.info()
print (meta.get("Content-length"))
f.close() 
```

适用于 python 3.x

# c++ - 将二维数组传递给函数

> ID：12996280
> 
> 赞同：-2
> 
> 时间：2012-10-21T08:43:04.260
> 
> 标签：c++, function, parameter-passing, multidimensional-array

我在多个网站上查看了很多关于如何将二维数组传递给函数的主题。但由于某种原因，它们似乎都没有正常工作。

```
#include <stdio.h>
#include <iostream>
#include <string>

void display(char maze[NUM_COLS],int NUM_ROWS);

int findpath(int x, int y);

int main(void)

{
 int NUM_ROWS;
 int NUM_COLS;
 std::cin >> NUM_ROWS >> NUM_COLS;
 std::string w;
 char maze[NUM_ROWS][NUM_COLS];

 getline(std::cin, w);

 for (int row = 0; row < NUM_ROWS; row++)
 {
    for(int col = 0; col < NUM_COLS; col++)
    {
        maze[row][col] = w[col + (row * NUM_COLS)];
    }
 }

 if ( find_path(0, 0) == 1 )
 {
  printf("Success!\n");
 }
 else
 {
  printf("Failed\n");
 }

  display(maze[NUM_COLS],int NUM_ROWS);

    return 0;

}

void display(char maze[NUM_COLS],int NUM_ROWS)
{

    printf("MAZE:\n");

    for ( int i = 0; i < num_rows; i++ )

        printf("%.*s\n", NUM_COLS, maze[i]);

    printf("\n");

    return;

}

int findpath(int x, int y)

{

    // If x,y is outside maze, return false.

    if ( x < 0 || x > NUM_COLS - 1 || y < 0 || y > NUM_ROWS - 1 ) 
    {
     return 0;
    }

    // If x,y is the goal, return 1.

    if ( maze[y][x] == 'G' ) 
    {
     return 1;
    }

    // If x,y is not open, return false.

    if ( maze[y][x] != ' ' && maze[y][x] != 'S' ) 
    {
     return 0;
    }

    // Mark x,y part of solution path.

    maze[y][x] = '+';

    // If find_path North of x,y is 1, return 1.

    if ( find_path(x, y - 1) == 1 ) 
    {
     return 1;
    }

    // If find_path East of x,y is 1, return 1.

    if ( find_path(x + 1, y) == 1 ) 
    {
     return 1;
    }

    // If find_path South of x,y is 1, return 1.

    if ( find_path(x, y + 1) == 1 ) 
    {
     return 1;
    {

    // If find_path West of x,y is 1, return 1.

    if ( find_path(x - 1, y) == 1 ) 
    {
     return 1;
    }

    // Unmark x,y as part of solution path.

    maze[y][x] = 'x';

    return 0;
} 
```

我只是找不到任何方法来传递我的二维数组以使一切正常。如果我只是在 main 之外强制一个 2D 数组，这些函数就可以工作。但是当获取信息并将它们传递给函数时，它会给我声明错误。

```
void display(char maze[NUM_COLS],int NUM_ROWS);

  display(maze[NUM_COLS],int NUM_ROWS); 
```

这是我的问题。当我编译时，我的错误是它没有接受我数组的任何部分。我只是不知道传入我的数组的正确方法。代码工作。如果我在全局范围内设置了一个二维数组，这样我就不必传递任何东西，并且函数可以抓取 NUM_COLS 和 NUM_ROWS 以及数组本身并将其弄乱，函数就会编译并运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T08:50:04.237

```
#include <iostream>
#include <cstdio>

template<typename T, size_t rows, size_t cols>
void display(T (&matrix)[rows][cols])
{
    for (int i = 0; i < rows; ++i)
    {
        for (int j = 0; j < cols; j++)
            std::cout << matrix[i][j];
        std::cout << std::endl;
    }
}

int main()
{
    char maze[3][4] = {
        "asd",
        "123",
        "fgh"
    };
    display<char, 3, 4>(maze);
} 
```

# image-processing - histogran 计算的一个非常简化的版本，仍然给出错误

> ID：12996284
> 
> 赞同：0
> 
> 时间：2012-10-21T08:44:02.853
> 
> 标签：image-processing, opencv

我仍在尝试理解直方图计算。正如我在另一篇文章中所说，我无法理解官方教程和我书中的教程。

我正在讨论的教程位于：http: [//docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html)

我真的很难阅读，尤其是绘制计算直方图的部分。它涉及拆分、规范化、没有任何解释的值，例如 hist_w 和 hist_h 的值，以及所有复杂的线函数。

所以我决定用一种简单的方式写下我学到的东西，只是为了看看直方图的工作原理，看看它是如何进行的。这是我写的：

```
int _tmain(int argc, _TCHAR* argv[])
{
Mat src, dst, final;

src = imread("c:\\car.jpg", 0);

int histsize = 256;
float range[] = {0, 256};
const float* histrange = { range };

bool uniform = true; bool accumulate = false;

calcHist(&src, 1, 0, Mat(), dst, 1, &histsize, &histrange, uniform, accumulate);

for(int h= 0; h<histsize; h++)
{
    float value = dst.at<float>(h);

    line(final, Point(h,(histsize-1)), Point(h, value), Scalar(0,0,0));
}

namedWindow("meh",CV_WINDOW_AUTOSIZE);
imshow("meh", final);
waitKey(0);

return 0; 
```

}

图像以灰度加载，因此无需拆分。并且简单地应用了 calcHist 并使用 line 函数来绘制它。

但是它在调用时会出现未处理的异常错误。我相信这一定是因为我的线路功能过于简化。与在线教程一样，坐标的计算太复杂了。

但我认为这应该可行，让我解释一下。在第一个循环中，h 将为 0，因此坐标将为`(0,255) and (0,[value of histogram at 0])`，类似地，在第二个循环中，坐标将为`(1,255) and (1,[value of histogram at 0])`，依此类推..

这在理论上直方图是正确的。它应该工作..为什么不呢？

编辑:: 它在`imshow("meh", final);`

# java - 禁用全局存储库并仅在 Maven 中使用本地存储库

> ID：12996286
> 
> 赞同：0
> 
> 时间：2012-10-21T08:44:42.653
> 
> 标签：java, maven, maven-2

我正在使用 maven，并且本地存储库中有所有项目的依赖项（意味着 .m2/repository），现在，当我每次都想打包项目时，它会通过 Internet 并搜索 maven 存储库以获取依赖项（例如[http://repo1.maven.org](http://repo1.maven.org)），但是，我编辑了 /m2/settings.xml 和 $MAVEN_HOME/conf/settings.xml 文件，并且其中没有任何全局存储库链接，我该如何禁用maven 使用全局存储库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:46:32.077

您可以使用以下`-o`选项：

```
-o,--offline                           Work offline 
```

在这种情况下，Maven 不会连接任何远程存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:47:34.010

您可以使用 maven 作为离线模式。

mvn -o 安装

# c# - 在 WinRT 中调整大小时图像像素化

> ID：12996287
> 
> 赞同：0
> 
> 时间：2012-10-21T08:44:43.803
> 
> 标签：c#, image, windows-runtime

我正在开发一个使用一堆图像的 WinRT 应用程序。在图像的一部分中，我显示了具有较大版本的图像缩略图。

这些缩略图的图像源是相应的大图像，即 1024x768。调整大小是在 C# 中为 Image 元素上的缩略图动态完成的。我也保持了 4:3 的纵横比。

这是 WinRT 调整图像大小的唯一方法，还是有办法以更少的像素化更优雅地动态调整图像元素的大小？

PS：我也无法创建较小版本的图像，原因之一是缩略图的大小是动态的，取决于屏幕上的缩略图数量和屏幕分辨率。

这是我的自动调整大小代码。

```
private void canvasObject()
    {
        for (int i = 1; i <= maxCards; i++)
        {
            objectList.Add(i); 
        }

        Double h,w, hp=0,wp=0,hm;
        w = ((objectCanvas.ActualWidth / 9));
        h = (w * (4 / 3));
        hm = ((objectCanvas.ActualHeight / 3)-h);
        int count = 0;

        for (int i = 0; i <= 3;i++)
        {
            wp = 0;
            for (int j = 0; j < 9 && count < maxCards; j++)
            {
                count++;
                Card c = new Card();
                ImageSource imgSrc1;
                Random rnd = new Random();
                int rNum = rnd.Next(1, objectList.Count);
                imgSrc1 = new BitmapImage(new Uri(@"ms-appx:/Assets/Images/Alphabets/Cards/" + (char)(objectList[rNum-1] + 96) + ".png", UriKind.Absolute));
                c.objectImg.Name = objectList[rNum-1].ToString();
                objectList.Remove(objectList[rNum-1]);
                c.objectImg.SetValue(Image.SourceProperty, imgSrc1);
                c.objectImg.Width = w;
                c.objectImg.Height = h;
                c.objectImg.Margin = new Thickness(10);
                c.objectImg.SetValue(Canvas.LeftProperty,wp);
                c.objectImg.SetValue(Canvas.TopProperty, hp);
                wp += w;
                c.objectImg.Tapped += objectImg_Tapped;
                objectCanvas.Children.Add(c.objectImg);
            }
            hp += h+hm;
        }
    } 
```

以为我不觉得这是代码的问题，因为 XAML 中的一些图像即使被拉伸到统一也看起来像素化。我什至尝试使用更小的图像到它们的确切大小，但显然我的应用程序上的小图像正在像素化。但是在 2560x1440 res 上运行时，图像看起来与预期一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:40:21.037

您是否尝试过使用 ScaleTransform？

```
ScaleTransform st = new ScaleTransform();
st.Scale = 0.20f; 
c.objectImg.RenderTransform = st; 
```

在缩放和旋转图像时，我发现变换最有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T00:32:43.263

我有同样的问题，但找到了一个非常巧妙的解决方案。关键字是[解码像素高度](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.decodepixelheight.aspx)

```
<Image Width="100" Height="100" Stretch="UniformToFill">
   <Image.Source>
     <BitmapImage DecodePixelWidth="100" UriSource="{Binding ImagePath}" />
   </Image.Source>
</Image> 
```

归功于：[http ://www.geekchamp.com/forums/windows-8-development/resizing-an-image-without-losing-any-quality-in-windows-store-app#forum-post-386827](http://www.geekchamp.com/forums/windows-8-development/resizing-an-image-without-losing-any-quality-in-windows-store-app#forum-post-386827)

# python - python 类中的代码行？

> ID：12996289
> 
> 赞同：0
> 
> 时间：2012-10-21T08:45:02.623
> 
> 标签：python, lines-of-code

我正在尝试查找存储在python文件中的类或函数中的代码行数我的代码是这样的......我想要的是在类中找到代码行数而不是所有文件...有什么好的方法吗？

```
import inspect
import foo    
for a,b in inspect.getmembers(foo):
    if inspect.isclass(b):
        print a  # find a class within the file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T08:51:04.347

```
len(inspect.getsourcelines(a)[0]) 
```

从 inspect.getsourcelines 文档：

> 返回对象的源代码行列表和起始行号。

这就是为什么你需要 0 索引

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T08:51:54.980

你仍然可以使用`inspect`，

```
In [6]: from test import A

In [7]: import inspect

In [8]: inspect.getsourcelines(A)
Out[8]: 
(['class A(object):\n',
  '    pass\n',
  '    pass\n',
  '    pass\n',
  '    pass\n',
  '    pass\n',
  '    pass\n',
  '    pass\n',
  '    pass\n'],
 1) 
```

`len(inspect.getsourcelines(A)[0])`会返回你想要的。

# java - 优化筛子的代码

> ID：12996291
> 
> 赞同：0
> 
> 时间：2012-10-21T08:45:21.507
> 
> 标签：java, sieve-of-eratosthenes

这是我为在上限可以大到 1000000000 的范围之间查找素数而编写的代码。我使用了 Hashmap，除了 2 之外没有存储任何偶数，也没有存储 sero 和 1。但仍然当我使用输入 lb = 1 和 ub = 1000000000 运行此代码时，它会给出运行时错误，（内存不足）。请帮助

这是我的代码：-

```
import java.util.HashMap;
import java.util.Iterator;

import java.util.Scanner;

class Samp {

    public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);
        int t, limit, m, n;
        double lb, ub, c;

        t = sc.nextInt();
        while (t > 0) {
            c = 3;
        HashMap<Integer, Boolean> primeflags = new HashMap<Integer, Boolean>();
            primeflags.put(2, true);
            lb = sc.nextDouble();
            ub = sc.nextDouble();
            while (c <= ub) {
                primeflags.put((int) c, true);
                c = c + 2;
            }
            limit = (int) Math.sqrt(ub);

            for (m = 2; m <= limit; m++) {

                for (n = m * m; n <= ub; n += m) {

                    if (primeflags.containsKey(n))
                        primeflags.remove(n);
                }

            }
            Iterator<Integer> iterator = primeflags.keySet().iterator();
            while (iterator.hasNext()) {  
                   Integer key = (Integer) iterator.next(); 

                   if(key >= lb)
                   System.out.println(key); 
                }

            --t;

        }
       sc.close();
     }    
} 
```

好的，在收到答案后，我编码了这个：但它仍然在给 TLE

```
import java.util.BitSet;
import java.util.Scanner;
public class Prime {
    private static BitSet bitSet = new BitSet(1000);
    private static int max = 3;

      public static boolean isPrime(int n) {
          if(n == 2)
                      return true;
          if(n < 3 || n % 2 == 0)
               return false;
          if(n <= max)
              return !bitSet.get(n / 2);
          for(int i = 3; i <= n; i += 2) {
              if(i * 2 > n)
                 break;
              if(!bitSet.get(i / 2)) {
                  int multiple = max / i;
                  multiple *= i;
                  if(multiple <= i)
                multiple = i * 2;
                  clearMultiple(i, multiple, n);  
              }
          }
          max = n;
          return !bitSet.get(n / 2);
      }

    private static void clearMultiple(int prime, int multiple, int max) {
        while(multiple <= max) {
                    setNotPrime(multiple);
                    multiple += prime;
                   }

    }

    private static  void setNotPrime(int n) {

        if(n % 2 == 0)
             return;
              bitSet.set(n / 2, true);
}     

    public static void getPrimeGreaterOrEqual(int n,int upperbound) {
            // make sure we start with an odd number
        if( n == 1 || n == 0){
            System.out.println(2);
            n = 3;
        }    
    if(n % 2 == 0 && n != 2)
                    ++n;
                // loop until we found one
                    while(n <= upperbound) {
                //if the number is registered as prime return it
                if(isPrime(n))
                       System.out.println(n);
                       // else check next one
                        n += 2;

               }  
            }

    public static void main(String args[])
    {
        Scanner sc = new Scanner(System.in);
        int t,lb,ub;
         t = sc.nextInt();
        while(t > 0){
            lb = sc.nextInt();
            ub = sc.nextInt();

            getPrimeGreaterOrEqual(lb, ub);

            --t;
       }
       sc.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T08:49:03.583

将您的算法转换为使用[BitSet](http://docs.oracle.com/javase/6/docs/api/java/util/BitSet.html)，您将看到巨大的性能和内存使用改进。

如果您四处搜索，您会发现该算法的许多变体。例如，您可以看看这个：[http ://www.dreamincode.net/forums/topic/192554-secret-code-vii-prime-numbers/](http://www.dreamincode.net/forums/topic/192554-secret-code-vii-prime-numbers/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T08:55:15.410

我手头没有Java的实现。我用 C++ 编写了以下实现，并用它来计算高达 1.000.000.000.000 的素数：

```
void sieve(std::size_t bound, std::ostream& os)
{
    using uint_t = unsigned int;
    constexpr auto bits = sizeof(uint_t) * CHAR_BIT;
    auto&& index = [](std::size_t i) { return (i - 3) / 2 / bits; };
    auto&& mask = [](std::size_t i) { return uint_t{1} << ((i - 3) / 2 % bits); };
    auto size = index(bound - 1) + 1;
    std::unique_ptr<uint_t[]> crossed{new uint_t[size]};
    std::fill(crossed.get(), crossed.get() + size, uint_t{0});
    for (std::size_t i = 3; i < bound; i += 2) {
        if ((crossed[index(i)] & mask(i)) == 0) {
            auto q = i * i;
            if (q >= bound) {
                break;
            }
            for (; q < bound; q += i) {
                crossed[index(q)] |= mask(q);
            }
        }
    }
    os << "2\n";
    for (std::size_t i = 3; i < bound; i += 2) {
        if ((crossed[index(i)] & mask(i)) == 0) {
            os << i << '\n';
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:04:38.143

您可以在查找后放置素数。所以你不需要更多的内存。您可以使用此选项运行您的代码。 **-Xms512M -Xmx2048M**

# iphone - IO6 不调用 -(BOOL)shouldAutorotate

> ID：12996293
> 
> 赞同：2
> 
> 时间：2012-10-21T08:46:01.667
> 
> 标签：iphone, objective-c, ios, ios6, uiinterfaceorientation

我的应用中有一些我不想支持方向的视图。在`didFinishLaunchingWithOptions`我添加导航：

```
...
UINavigationController *nav = [[UINavigationController alloc]initWithRootViewController:self.viewController];

    self.window.rootViewController = nav;
    [self.window makeKeyAndVisible];
... 
```

在每个`ViewController`我都有`UITabBar`（我不知道这是否重要）。

在第一个视图控制器中，我添加：

```
-(BOOL)shouldAutorotate {
        return NO;
    }

    - (NSUInteger)supportedInterfaceOrientations {
        return UIInterfaceOrientationMaskPortrait;
    } 
```

`supportedInterfaceOrientations`在视图加载时调用，但`shouldAutorotate`在旋转设备时不调用。
我在这里想念什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-21T10:13:45.380

这是因为既没有`UITabBarcontroller`也没有`UINavigationController`将 shouldAutorotate 传递给它的可见视图控制器。要解决这个问题，您可以继承 UITabBarController 或 UINavigationController 并从那里转发 shouldAutorotate：

在您的子类 UITabBarController 添加：

```
- (BOOL)shouldAutorotate
{
    return [self.selectedViewController shouldAutorotate];
} 
```

在您的子类 UINavigationController 添加：

```
- (BOOL)shouldAutorotate
{
    return [self.visibleViewController shouldAutorotate];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:49:42.383

在`AppDelegate`：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window  // iOS 6
{

return UIInterfaceOrientationMaskAll;

} 
```

在您的视图控制器中：

```
- (BOOL)shouldAutorotate {
return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait;
} 
```

# c# - 当我需要服务进行 NTLM 身份验证时如何公开 MEX

> ID：12996299
> 
> 赞同：2
> 
> 时间：2012-10-21T08:46:50.033
> 
> 标签：c#, wcf

我正在开发一个 RESTful 和 SOAP 的 WCF 服务，现在它们都需要使用 NTLM 身份验证。

我还想公开一个 MEX 端点，以便其他人可以轻松引用该服务并使用它。

现在，当我将 IIS 设置为需要 Windows 身份验证时，我可以使用 REST 服务并成功调用该服务，但是当我想使用 SVCUTIL 引用该服务时，它会抛出一个需要匿名的错误。

这是我的 web.config：

```
<system.serviceModel>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
<bindings>
  <basicHttpBinding>
    <binding name="basicHttpBinding" maxReceivedMessageSize="214748563" maxBufferSize="214748563" maxBufferPoolSize="214748563">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Ntlm">

        </transport>
      </security>
    </binding>
  </basicHttpBinding>
  <webHttpBinding>
    <binding name="webHttpBinding" maxReceivedMessageSize="214748563" maxBufferSize="214748563" maxBufferPoolSize="214748563">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Ntlm">

        </transport>
      </security>
    </binding>
  </webHttpBinding>
  <mexHttpBinding>
    <binding name="mexHttpBinding"></binding>
  </mexHttpBinding>
</bindings>
<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="" automaticFormatSelectionEnabled="true" helpEnabled="True">
    </standardEndpoint>
  </webHttpEndpoint>
</standardEndpoints>
<services>
  <service name="Intel.ResourceScheduler.Service" behaviorConfiguration="Meta">
    <clear />
    <endpoint address="soap" name="SOAP" binding="basicHttpBinding" contract="Intel.ResourceScheduler.Service.IResourceSchedulerService" listenUriMode="Explicit" />
    <endpoint address="" name="rest" binding="webHttpBinding" behaviorConfiguration="REST" contract="Intel.ResourceScheduler.Service.IResourceSchedulerService" />
    <endpoint address="mex" name="mex" binding="mexHttpBinding" behaviorConfiguration="" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="REST">
      <webHttp />
    </behavior>
    <behavior name="WCFBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>

  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="Meta">
      <serviceMetadata httpGetEnabled="true"/>
    </behavior>
    <behavior name="REST">
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
    <behavior name="WCFBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
    <behavior name="">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true" />
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T02:53:48.147

尝试更改 mex 服务的绑定，它不会与 mexHttpBinding 一起使用，因为它已禁用安全性。我没有在完全相同的场景中对此进行测试，但在我的情况下，由于安全性，我还必须更改它。

在您的示例中，我会尝试像这样更改它：

```
<endpoint address="mex" contract="IMetadataExchange" binding="basicHttpBinding" bindingConfiguration="basicHttpBinding"/> 
```

为了使 mex 绑定配置更独立于肥皂服务绑定配置，还可以定义和使用单独的 bindingConfiguration ，例如

```
<binding name="secureMexHttpBinding" >
  <security mode="TransportCredentialOnly">
    <transport clientCredentialType="Ntlm">
    </transport>
  </security>
</binding> 
```

然后更改 mex 端点

```
endpoint address="mex" contract="IMetadataExchange" binding="basicHttpBinding" bindingConfiguration="secureMexHttpBinding"/> 
```

# algorithm - 地形三角测量算法

> ID：12996302
> 
> 赞同：4
> 
> 时间：2012-10-21T08:47:19.043
> 
> 标签：algorithm, triangulation, terrain

我有一个由大量点呈现的地形`3D-space`。对其进行三角测量的最佳方法是什么？

我可以将所有点投射到 上`2D-space`，而不是及时进行 Delaunay 三角剖分`O(n * log(n))`并将其提升到之前的高度。但它足够好吗？`O(n * log(log(n))`在某些特殊情况下，我及时听说过 Delaunay 三角测量。在我的情况下可能吗？或者也许我应该使用一些近似算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:00:48.507

2D 中的投影和 Delaunay 三角剖分无疑是一个很好的解决方案，可以生成形状良好的三角形。对于地形，您可能还需要强制执行某些边缘，因此请寻找受约束的 Delaunay 三角剖分。

至于运行时：对于现实世界的数据，您可以假设线性[运行时](http://www.geom.at/fade2d/html/performance.png)。如果性能很重要，请确保您的输入数据没有退化：扫描设备通常会返回网格上的点。您可以通过添加一些噪音来改善这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T08:50:39.083

实际上你做功课没问题，德劳内三角测量是解决你问题的一个很好的方法。

# c# - 如何通过 C# 中的参数获取属性的对象实例？

> ID：12996303
> 
> 赞同：2
> 
> 时间：2012-10-21T08:47:28.140
> 
> 标签：c#, reflection, instance-variables

如何通过 C# 中的参数获取属性的对象实例？我不确定它是否称为变量实例，但这就是我的意思：

在通常情况下，当我们这样做时，我们会在 C# 中获取变量的值：

```
void performOperation(ref Object property) {
   //here, property is a reference of whatever was passed into the variable
}

Pet myPet = Pet();
myPet.name = "Kitty";
performOperation(myPet.name);   //Here, what performOperation() will get is a string 
```

我希望实现的是从类的属性中获取对象，例如：

```
void performOperation(ref Object property) {
   //so, what I hope to achieve is something like this:

   //Ideally, I can get the Pet object instance from the property (myPet.name) that was passed in from the driver class
   (property.instance().GetType()) petObject = (property.instnace().GetType())property.instance();  

    //The usual case where property is whatever that was passed in. This case, since myPet.name is a string, this should be casted as a string
   (property.GetType()) petName = property;   
}

Pet myPet = Pet();
myPet.name = "Kitty";
performOperation(myPet.name);   //In this case, performOperation() should be able to know myPet from the property that was passed in 
```

这`instance()`只是一个演示我想要获取属性的实例对象的虚拟方法。我对 C# 很陌生。这在概念上是我希望实现的，但我不确定如何在 C# 中做到这一点。我查看了反射 API，但我仍然不太确定应该使用什么来执行此操作。

那么，如何通过 C# 中的参数获取属性的对象实例呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:01:57.960

当您将属性值传递给方法时，例如：

```
SomeMethod(obj.TheProperty); 
```

然后实现为：

```
SomeType foo = obj.TheProperty;
SomeMethod(foo); 
```

基本上，您***无法从中获取父对象。***您需要单独传递它，例如：

```
SomeMethod(obj, obj.TheProperty); 
```

此外，请记住，一个值可以是*任意数量*的对象的一部分。字符串实例可以用在零个、一个或“许多”对象中。你问的基本上是不可能的。

# c# - c# cookie 无法将类型 'string' 转换为 'x'

> ID：12996305
> 
> 赞同：1
> 
> 时间：2012-10-21T08:47:41.307
> 
> 标签：c#, asp.net, cookies

我有这条鳕鱼：

```
 [Serializable]
    public class testC
    {
        string sir;
        public testC()
        {
            sir = string.Empty;
        }
        public string GetString
        {
            get { return sir; }
            set { sir = value; }

        }
    }
public class cookieTest
    {
        testC test;
        public cookieTest()
        {
            test = new testC();
        }
        public testC GetTestC
        {
            get
            {
                HttpCookie cookie = HttpContext.Current.Request.Cookies["test"];
                test = cookie["first"] as testC;
                return test;
            }
            set
            {
                HttpCookie cookie = new HttpCookie("test");
                cookie.Expires = DateTime.Now.AddHours(8);
                cookie["first"] = value.ToString();
                System.Web.HttpContext.Current.Response.Cookies.Add(cookie);
            }
        }
    } 
```

我得到这个错误

> 无法通过引用转换、装箱转换、拆箱转换、包装转换或空类型转换将类型“字符串”转换为“testC”

是否可以从 cookie 中获取对象？或者我必须将我的所有数据写入 cookie 以设置和获取所有数据并创建一个新对象来获取？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T08:50:12.137

> 是否可以从 cookie 中获取对象？

不，不是你想要的那样直接。不要考虑 ASP.NET。想一想[HTTP cookie](http://en.wikipedia.org/wiki/HTTP_cookie)实际上是什么。它是一个 HTTP 标头。HTTP 标头只是纯字符串值。HTTP 协议中不存在对象的概念。

因此，您需要将拥有的 .NET 对象序列化为字符串，然后将其反序列化。

.NET 中有不同的序列化程序可供您使用。例如，使用[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)然后[Base64 编码](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)生成的字节数组以存储到 cookie 中。

反序列化是逆过程——您从 cookie 中读取值（始终是字符串），然后[Base64 将](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)其解码为字节数组，然后使用`BinaryFormatter`.

请记住，cookie 的大小是有限的，并且会因不同的浏览器而异。所以不要期望将大对象放入cookies。该值将被剥离，您将获得损坏的数据。如果对象的总序列化值大于 2k 个字符，我不会使用它们。

让我们举例说明前面描述的过程：

```
public class cookieTest
{
    testC test;
    public cookieTest()
    {
        test = new testC();
    }
    public testC GetTestC
    {
        get
        {
            var cookie = HttpContext.Current.Request.Cookies["test"];
            return Deserialize<testC>(cookie.Value);
        }
        set
        {
            var cookie = new HttpCookie("test");
            cookie.Expires = DateTime.Now.AddHours(8);
            cookie["first"] = Serialize(value);
            System.Web.HttpContext.Current.Response.Cookies.Add(cookie);
        }
    }

    private static string Serialize<T>(T instance)
    {
        using (var stream = new MemoryStream())
        {
            var serializer = new BinaryFormatter();
            serializer.Serialize(stream, instance);
            return Convert.ToBase64String(stream.ToArray());
        }
    }

    private static T Deserialize<T>(string value)
    {
        using (var stream = new MemoryStream(Convert.FromBase64String(value)))
        {
            var serializer = new BinaryFormatter();
            return (T)serializer.Deserialize(stream);
        }
    }
} 
```

# functional-programming - 使用 lisp 函数

> ID：12996307
> 
> 赞同：2
> 
> 时间：2012-10-21T08:47:49.357
> 
> 标签：functional-programming, lisp, common-lisp

我正在尝试编写一个返回列表中原子列表的函数，可以说我有一个列表，其中既有原子又有一个列表，当我运行该函数时，它应该返回一个原子列表。

例如：

```
(func '(2 34 5 (12) 7 (A B C) +))
 -> (2 34 7 +) 
```

我想尝试结果中的参数是否为真，这样当我运行时：

```
(ATOM ( (func '(2 34 5 (12) 7 (A B C) +)) )
->T 
```

关于我如何去做的任何想法？书籍或参考资料？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:43:26.893

使用标准 CL 函数，

```
[3]> (remove-if-not #'atom '(1 2 (12) +))
(1 2 +)

[6]> (every #'atom (remove-if-not #'atom '(1 2 (12) +)))
T 
```

如果您想自己编写它们，您可以融合`#'atom`in 并制作两个专门的函数，比如`remove-atoms`and `every-is-atom`。但是“原子”是一个[内置函数`atom`](http://www.lispworks.com/documentation/lw61/CLHS/Body/f_atom.htm)的名称。

写第一个的一种方法是

```
(defun remove-atoms (xs &aux (ys (list 1)))
  (let ((p ys))
    (dolist (x xs (cdr ys))
      (if (atom x) (setf (cdr p) (list x) p (cdr p)))))) 
```

这使用破坏性更新以自上而下的方式构建结果列表，这并不违反*这里*的函数式编程精神，因为它是在本地使用的，作为一种实现技术。这可以看作是来自其他答案的通用函数[*尾递归模数代码的 Common-LISP 特定翻译。*](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)

第二个功能：

```
(defun every-is-atom (xs)
  (dolist (x xs T)
    (if (not (atom x)) 
      (return-from every-is-atom NIL)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T09:30:48.733

所以你想要一个只返回作为参数传递的列表中存在的原子值的函数？

像这样？

```
(defun func (lst)
  (cond 
    ((null lst) '()) 
    ((atom (first lst)) 
     (cons (first lst) (func (rest lst)))) 
    (t (func (rest lst))))) 
```

不是专门针对 Common lisp，但在我看来仍然是一本好书：[SICP](http://mitpress.mit.edu/sicp/ "SICP")

# c# - iTextSharp：进程无法访问文件。文件流似乎已关闭

> ID：12996310
> 
> 赞同：3
> 
> 时间：2012-10-21T08:48:09.433
> 
> 标签：c#, asp.net, iis-7.5, itextsharp

当然，我是 C# 和 Asp.net 的新手。

我的 Web 应用程序在文件夹中创建一个 pdf (iTextSharp) 文件并将结果发布到另一个网页。当任何人返回页面并重新创建具有相同名称的新 pdf（修改）时，您会收到以下错误：

> 该进程无法访问文件“C:\inetpub\wwwroot\RAPC\PDF\10-2012_file1.pdf”，因为它正被另一个进程使用。
> 
> > **说明**：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> > 
> > > **异常详细信息**：System.IO.IOException：该进程无法访问文件“C:\inetpub\wwwroot\RAPC\PDF\10-2012_file1.pdf”，因为它正被另一个进程使用。

**源错误：** 第 132 行：

```
FileStream stream =  new FileStream(path + "/" + subdata + "_" + CodCli + "_" + DrR1_2 + "_" + G_S_2 + "_" + Data_2 + ".pdf", FileMode.Create);* 
```

我的代码：

```
// Filestream and PDF create

            FileStream stream =  new FileStream(path + "/" + subdata + "_" + CodCli + "_" + DrR1_2 + "_" + G_S_2 + "_" + Data_2 + ".pdf", FileMode.Create);

            PdfWriter.GetInstance(doc, stream);

            doc.Open();

            // Table

            PdfPTable tableX = new PdfPTable(2);
            PdfPCell cell = new PdfPCell();
            tableX.WidthPercentage = 100;
            tableX.DefaultCell.Border = 0;
            cell.AddElement(image);
            cell.PaddingLeft = 30f;
            cell.Border = 0;
            tableX.AddCell(cell);           

            ...

             doc.Close();
             stream.Close(); 
```

截图：[https ://docs.google.com/open?id=0ByUzt8ssZaf7Z2YtVXlnRmo3SGM](https://docs.google.com/open?id=0ByUzt8ssZaf7Z2YtVXlnRmo3SGM)

似乎 PDF 已被 w3p IIS 工作进程锁定。几分钟后文件恢复正常。

我希望 pdf 文件立即解锁，以便用户可以修改和重新保存 PDF。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:38:03.277

正如[Ian Kemp](https://stackoverflow.com/users/70345/ian-kemp)[在评论中](https://stackoverflow.com/questions/12996310/itextsharp-the-process-cannot-access-the-file-the-filestream-seems-closed/13013749#comment17641298_12996310)所说，将`FileStream`对象包装在一个`using`块中是个好主意。像这样：

```
using (FileStream stream = new FileStream(path + "/" + subdata + "_" + CodCli + "_" + DrR1_2 + "_" + G_S_2 + "_" + Data_2 + ".pdf", FileMode.Create))
{
    // ...the rest of your code
} 
```

这将确保您的对象得到正确处理，希望每次都释放资源，从而防止该错误发生。

# c# - SQL Server CE 引发不兼容异常

> ID：12996312
> 
> 赞同：1
> 
> 时间：2012-10-21T08:48:25.953
> 
> 标签：c#, sql, sql-server-ce

我的应用程序已打开并立即关闭。它给出了这个错误：

> *应用程序正在尝试加载与版本 8080 的 ADO.NET 提供程序不兼容的版本 5692 的本机组件。不兼容的版本可能导致应用程序不稳定，因此 SQL Server Compact 的加载已中止。安装正确版本的 SQL Server Compact。有关详细信息，请参阅知识库文章 974247。*

问题是什么？任何帮助将不胜感激...

我试过 SQL Server CE 3.5、3.5 sp2、4.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:55:41.380

您是否尝试过查看错误消息中提到的知识库文章？

[http://support.microsoft.com/kb/974247](http://support.microsoft.com/kb/974247)

```
原因
基于 Compact 的应用程序通常针对 Compact ADO.NET 提供程序进行编程
(System.Data.SqlServerCe.dll)。该提供者反过来与
本机紧凑组件。为了避免各种不一致，契约
某个版本的 ADO.NET 提供者只能与 Compact 本机对话
相同版本的组件。以下是一些示例场景，其中
这项政策将被打破，这将导致以前的
提到了两个例外：

```

```
解析度
在任何给定时间点，64 位计算机的正确状态，对于 SQL
服务器紧凑型，将如下：

    x86 和 amd64 MSI 均已安装。
    x86 和 amd64 MSI 的版本相同。

因此，如果您遇到任何类似的问题，请确保计算机同时具有
安装了 Compact 的 x86 和 amd64 MSI，并且它们的版本相同。
如果不是，则从以下安装 Compact SP2 x86 和 x64 MSI
根据需要链接：
http://www.microsoft.com/downloads/details.aspx?familyid=E497988A-C93A-404C-B161-3A0B323DCE24&displaylang=en

```

# c# - EF 多重关系

> ID：12996314
> 
> 赞同：4
> 
> 时间：2012-10-21T08:48:50.167
> 
> 标签：c#, entity-framework

使用实体框架 5

所以我有一个客户。客户可以有许多地址，但至少有一个。其中一个地址也将设置为主地址（必需）。我尝试了各种映射，但到目前为止，我在构建或为数据库播种时遇到错误。

顾客：

```
public class Customer
{
    public int CustomerId { get; set;}
    public String CustomerName { get; set; }
    public int PrimaryAddressId { get; set; }
    public virtual CustomerAddress PrimaryAddress { get; set; }
    public virtual ICollection<CustomerAddress> CustomerAddresses { get; set; }    
} 
```

地址：

```
public class CustomerAddress : Address
{
    public int CustomerAddressId { get; set; }
    public int CustomerId { get; set; }
    public virtual Customer Customer { get; set; }
} 
```

我的这部分映射工作正常。它在客户地址上。

```
 this.HasRequired(c => c.Customer)
            .WithMany(d => d.CustomerAddresses)
            .HasForeignKey(c => c.CustomerId); 
```

但是如何为在 Customer 中设置 PrimaryAddress 指定正确的映射？或者这是错误的方法？

谢谢

**编辑 - 使用 Arnolds 和 LueTM 的答案：**

这段代码现在可以工作了。

顾客：

```
public class Customer
{
    public int CustomerId { get; set;}
    public String CustomerName { get; set; }
    // public int PrimaryAddressId { get; set; } created in mapping
    public virtual CustomerAddress PrimaryAddress { get; set; }
    public virtual ICollection<CustomerAddress> CustomerAddresses { get; set; }    
} 
```

地址：

```
public class CustomerAddress : Address
{
    public int CustomerAddressId { get; set; }
    public int CustomerId { get; set; }
    public virtual Customer Customer { get; set; }
} 
```

客户映射：

```
 modelBuilder.Entity<Customer>
            .HasOptional(c => c.PrimaryAddress)
            .WithOptionalDependent().Map(m => m.MapKey("PrimaryAddressId"));

        modelBuilder.Entity<Customer>
            .HasMany(c => c.CustomerAddresses)
            .WithRequired(c => c.Customer)
            .HasForeignKey(c => c.CustomerId)
            .WillCascadeOnDelete(false); 
```

我使用存储库来确保首先创建一个新地址并保存，然后将其设置为主地址并再次保存。存储库确保主要是“必需的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:23:28.357

由于您没有显示异常，因此我不得不假设您遇到了鸡蛋问题。

如果您设置`PrimaryAddress`为必需的属性，EF 必须有一个现有的地址 Id 才能建立外键（`PrimaryAddressId`在 中设置`Customer`）。但是，由于`Address`需要`Customer`您不能在其客户之前存储地址。如果您尝试一次性保存一个地址和一个客户，EF 无法确定正确的插入顺序，因为它需要使用生成的另一个对象的 Id 插入两个对象。

所以要么`Address`or`Customer`必须有一个可选的外键。

我会`Customer.PrimaryAddressId`选择：

```
modelBuilder.Entity<Customer>().HasOptional(c => c.PrimaryAddress)
    .WithOptionalDependent(); 
```

现在，您可以在单独的交易中存储地址并将主要地址分配给客户。但是您需要业务逻辑来确保 a`Customer`始终具有主地址。

如果您想在一次交易中保存客户和地址，一种方法可能是添加一个`IsPrimary`属性（布尔）`CustomerAddress`并确保始终只有一个地址具有`true`.

# javascript - 如果 Web 服务关闭，如何将错误消息作为 JSON 对象返回

> ID：12996315
> 
> 赞同：1
> 
> 时间：2012-10-21T08:48:59.747
> 
> 标签：javascript, asp.net-mvc

我在调用 Web 服务并将 Json 结果返回到视图的 asp.net mvc Web 应用程序中有以下操作方法：-

```
public ActionResult ListPackages()
{
    using (var client = new WebClient())
    {
        try{
            var query = HttpUtility.ParseQueryString(string.Empty);
            UriBuilder("http://localhost:8080/jw/web/json/workflow/package/list");
            url.Query = query.ToString();
            string json = client.DownloadString(url.ToString());
            Thread.Sleep(500);
            return Content(json, "application/json");
        }
        catch (System.Net.WebException ex) {
            return Content("Error, service is down. please try again later", "application/json");
        }
    }
} 
```

然后在视图上我定义了以下 Ajax.Actionlink：-

```
@Ajax.ActionLink("Get Process List", "ListPackages", "Home",
new AjaxOptions
{
    HttpMethod = "GET",
    LoadingElementId = "tobehide",
    OnSuccess = "getpackagelist"
}) 
```

和以下 getpackagelist java 脚本：-

```
function getpackagelist(result) {
    $('#products').empty();
    $('#title').text("All Processes");
    $.each(result.data, function (key, val) {
        var str = val.packageName;
        $('<li/>', { text: str }).appendTo($('#products'));
    });
    $('#tobehide').hide();

} 
```

我面临的问题是，如果 Web 服务关闭并且`System.Net.WebException`引发异常，则`" Error, service is down. please try again later "`maeeage 将不会显示在视图中，并且在 ajax 加载图像后不会显示任何内容......

**：：：编辑：：：**

我将脚本修改为：-

```
function getpackagelist(result) {

    if (result.error == null) {
        $('#products').empty();
        $('#title').text("All Processes");
        $.each(result.data, function (key, val) {
            var str = val.packageName;
            $('<li/>', { text: str })
                .appendTo($('#products'));
        });
        $('#tobehide').hide();
    }
    else {
        $('<li/>', { text: result.error })
                       .appendTo($('#products'));
    } 
```

动作方法如下：-

```
catch (System.Net.WebException) {

                    return new JsonResult()
                    {
                        Data = new { error = "Error, service is down. please try again later" }
                    }; 
```

但如果引发 WebExsception，仍然不会显示错误。BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:00:54.227

**编辑**

正如 john G 纠正我的那样，当然`OnFailure`不会在这里调用，因为异常被控制器捕获。因此，要返回有效的 JSON 结果，请使用以下命令：

```
return new JsonResult() { 
    Data = new { error = "Error, service is down. please try again later" }
}; 
```

这只是创建了一个匿名类型（以及`JsonResult`）作为返回任意 JSON 的简单方法。然后在`OnSuccess`脚本中，检查`error`属性：

```
function getpackagelist(result) {
    if (result.error) {
        // display error ...
    } else {
        // success ...
    }
} 
```

* * *

使用 的`OnFailure`属性`AjaxOptions`来处理错误场景。

```
new AjaxOptions
{
    // ...
    OnFailure = "packagelisterror"
} 
```

请注意，该函数将传回一个包含`responseText`属性的 JSON 对象。因此，您可以使用以下内容显示错误消息：

```
function packagelisterror(e) {
    $("#products").html(e.responseText);
} 
```

# javascript - 这两个在这里代表什么？

> ID：12996317
> 
> 赞同：0
> 
> 时间：2012-10-21T08:49:12.500
> 
> 标签：javascript

一位面试官要求我解释以下代码中这代表什么。我对此一无所知。因为我以前没有见过这样的代码。请告诉我这两者之间有什么区别，这些代码在什么情况下有用？

```
function A(){
    this.x=1;//No.1
    function B(){
        this.y=2;//No.2
    }
} 
```

我只知道当我使用new创建一个新对象时，它的属性x等于1；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:08:29.203

这取决于您如何调用该函数。如果您将其作为常规函数调用，如下所示：

```
A(); 
```

然后`this`将是`window`文档的对象。

如果将函数用作对象构造函数，如下所示：

```
var a = new A(); 
```

then`this`将是对新创建对象的引用。

`this`函数中的引用`B`永远不会是任何东西，因为不可能调用该函数。`A`它在函数内部是本地的，并且由于`A`函数中没有可用于调用`B`函数的代码，因此永远不会调用它。

如果我们可以调用该`B`函数，则与该`A`函数相同。什么`this`取决于您如何使用该功能。即使您在函数用作构造函数（因此是 中的对象引用）时`B`从函数内部调用该函数，该函数也不会继承自. 它要么是对（何时用作函数）的引用，要么是对新创建对象的引用（如果用作构造函数）。`A``A``this``A``B``this``A``window``B``B`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T08:56:20.103

如果 this 在正常`window`上下文中使用，则两者都`this`引用窗口，即使命名范围不同。

这是您发布的代码的调整版本：

```
function A(){
    this.x=1;//No.1
    function B(){
        this.y=2;//No.2
        console.log(this)      // log `this`
    }
    console.log(this)          // log `this`
    B()                        // Run function B()
}
A()                            // Run function A() 
```

这会将每个记录`this`在控制台中。它返回

```
window
window 
```

如果您从不同的上下文（例如分配为事件处理程序）调用 A()，`this //No.1`将引用相关对象。`this //No. 2`仍然会`window`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:00:08.187

This.x 和 This.y 指的是窗口。但是您不能访问函数 B。它会显示错误，例如 B() 未定义。在萤火虫控制台模式下查看

# android - 通知不重复

> ID：12996327
> 
> 赞同：1
> 
> 时间：2012-10-21T08:50:55.897
> 
> 标签：android, notifications, alarmmanager

我为我的应用程序构建了一个通知。它正在工作，因为它在正确的时间推送，并且在按下时链接到正确的活动。

然而，我用一个重复的警报来称呼它，因为我希望它在特定的日子里发射。在我的初始测试中，我将它设置为每 5 秒推送一次，以便我可以快速检查它是否正确重复。初次推送后，一旦我清除它，通知就不会再次出现。

这是我在主要活动中设置警报管理器的代码：

```
private void notificationAlarm() {
    Calendar cal = Calendar.getInstance();
    cal.set(Calendar.DAY_OF_WEEK, 1);
    cal.set(Calendar.HOUR, 1);
    cal.set(Calendar.MINUTE, 40);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    long interval = cal.getTimeInMillis()+5000;

    Intent alarmIntent = new Intent(this, alarmNotif.class);
    PendingIntent alarmPendingIntent = PendingIntent.getBroadcast(this, 0, alarmIntent, PendingIntent.FLAG_ONE_SHOT);
    AlarmManager notifAlarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    //notifAlarm.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), alarmPendingIntent);
    notifAlarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), interval, alarmPendingIntent);

} 
```

以及我的广播接收器中的代码：

公共类 alarmNotif 扩展 BroadcastReceiver {

```
@Override
public void onReceive(Context context, Intent intent) {
    NotificationManager notifManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    String title = "Don't forget to order sushi from Arbuckle!";
    String subTitle = "Order before 10 AM with Arbuckle App";
    Intent notifIntent = new Intent(context, SecureAppStarter.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, notifIntent, PendingIntent.FLAG_ONE_SHOT);

    NotificationCompat.Builder notifBuilder = new NotificationCompat.Builder(context)
    .setContentTitle(title)
    .setContentText(subTitle)
    .setSmallIcon(R.drawable.ic_launcher)
    .setWhen(System.currentTimeMillis())
    .setContentIntent(pendingIntent);

    Notification notif = notifBuilder.getNotification();
    notifManager.notify(1, notif);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:19:32.937

好吧，我想通了。

问题是 FLAG_ONE_SHOT；它应该是 FLAG_UPDATE_CURRENT。

这允许以期望的间隔重复通知。

瞧！

# svn - 无论如何在没有 svn hook 权限的情况下获得 svn commit 事件吗？

> ID：12996332
> 
> 赞同：2
> 
> 时间：2012-10-21T08:51:23.083
> 
> 标签：svn, hook

我想我需要一个持续集成服务，但是有 svn 存储库权限的人太忙了，无法添加 svn pre-commit 钩子。无论如何都可以在没有特权的情况下获取存储库提交事件吗？如果没有这样的方法，我可以使用爬虫来检查每分钟的更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:53:35.023

用于[`svnsync`](http://svn.apache.org/repos/asf/subversion/trunk/notes/svnsync.txt)将 repo 镜像到一个可以设置钩子的地方。`synsync`在存储库访问库层运行，因此它将像任何其他客户端一样调用目标存储库上的提交（和其他）钩子。

# python - request.is_ajax 在模板中返回 false

> ID：12996336
> 
> 赞同：1
> 
> 时间：2012-10-21T08:52:14.213
> 
> 标签：python, ajax, django

我正在尝试在模板中进行条件扩展：

```
{% extends request.is_ajax|yesno:"base_ajax.html,base.html" %} 
```

在我看来 ：

```
def new(request):
    snippet_form = SnippetForm()
    return render_to_response('new.html', {
        'snippet_form': snippet_form,
    }, context_instance=RequestContext(request)) 
```

但是 request.is_ajax 总是返回 false ！

如果我在我看来调用 request.is_ajax ，它包含了很好的价值。

```
def new(request):
    snippet_form = SnippetForm()
    ajax = request.is_ajax()
    return render_to_response('new.html', {
        'snippet_form': snippet_form,
        'ajax': ajax
    }, context_instance=RequestContext(request)) 
```

在我的模板中：

```
{% extends ajax|yesno:"base_ajax.html,base.html" %} 
```

这是可行的，但我更喜欢使用第一个解决方案！

有任何想法吗 ？

（我正在使用 jquery 加载功能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:18:47.283

您是否启用了“请求”上下文处理器？名为 TEMPLATE_CONTEXT_PROCESSORS 的列表中应包含以下字符串：

```
django.core.context_processors.request 
```

默认情况下它是关闭的。

# android - 如何调整 Android 视频录制应用程序的 SurfaceView 大小？

> ID：12996337
> 
> 赞同：0
> 
> 时间：2012-10-21T08:52:53.497
> 
> 标签：android, android-camera, surfaceview, video-recording

允许应用程序录制大小为 640X480 的视频。

Surface-View 显示相机的拉伸预览。

对于预览尺寸 640X480，Surface-View 的 dp 中的适当高度和宽度应该是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:29:38.960

您应该了解如何将 SP 转换为 DP，例如：

```
float scale = getResources().getDisplayMetrics().scaledDensity; 
```

[http://developer.android.com/reference/android/util/DisplayMetrics.html#density](http://developer.android.com/reference/android/util/DisplayMetrics.html#density)

# css - Twitter Bootstrap - 导航没有响应？

> ID：12996347
> 
> 赞同：0
> 
> 时间：2012-10-21T08:53:58.157
> 
> 标签：css, twitter-bootstrap

我有以下标记：

```
<div class="navbar">
    <div class="navbar-inner">
        <div class="container">
            <ol class="nav">
                <li>
                    <a href="#">One</a>
                </li>
                <li>
                    <a href="#">Two</a>
                </li>
                <li>
                    <a href="#">Three</a>
                </li>
                <li>
                    <a href="#">Four</a>
                </li>
                <li>
                    <a href="#">Five</a>
                </li>
                <li>
                    <a href="#">Six</a>
                </li>
                <li>
                    <a href="#">Seven</a>
                </li>
                <li>
                    <a href="#">Eight</a>
                </li>
                <li>
                    <a href="#">Nine</a>
                </li>
                <li>
                    <a href="#">Ten</a>
                </li>                       
            </ol>
        </div>
    </div>
</div> 
```

这在我的桌面上运行良好，但是一旦我开始调整浏览器的大小，菜单项就会开始换行。我希望它变成垂直导航。难道我做错了什么？

我不想使用 JavaScript 解决方案，即出现按钮的解决方案等。我只想要一个不需要 JS 的简单 CSS 解决方案。我以为 Bootstrap 会为我处理这个问题。

**更新 1：它看起来像什么**

![在此处输入图像描述](../Images/be40fd483ea0f0f9071eef3fe079f1e8.png)

**更新2：我希望它看起来像什么**

![在此处输入图像描述](../Images/7eb1f5614ed9c6a820f0edf2b4df7834.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T14:14:28.057

您需要确保您使用的是页面顶部的响应式元标记，并针对您尝试执行的任何其他操作遵循任何具体建议。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

我还建议查看 Twitter Bootstrap 站点的代码本身以获得额外的指导。

见：http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

**更新**

还要确保在导航栏上使用数据切换并适当地设置类：

```
<div class="container">

  <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </a>

  <!-- Be sure to leave the brand out there if you want it shown -->
  <a class="brand" href="#">Project name</a>

  <!-- Everything you want hidden at 940px or less, place within here -->
  <div class="nav-collapse">
    <!-- .nav, .navbar-search, .navbar-form, etc -->
  </div>

</div> 
```

响应式导航栏需要折叠插件和响应式 Bootstrap CSS 文件。

见：http: [//twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

# c++ - C++ 的 Option/Maybe 类

> ID：12996348
> 
> 赞同：7
> 
> 时间：2012-10-21T08:54:33.430
> 
> 标签：c++, new-operator

我想在 C++ 中实现一个类 Scala 的 Option / Haskell 类的 Maybe 类。出于效率原因，我不想使用动态分配的内存，也不想使用多态性。此外，如果 Option 为 None，我不希望创建任何嵌入类型的对象。

谁能告诉我以下方法是否会导致问题？我必须为我的 Option 类中的嵌入对象静态分配内存，但我无法定义嵌入类型的成员字段，因为即使 Option 为 None，这也会在创建 Option 对象时初始化。

```
template <typename T>
class Option {
private:
    uint8_t _storage [sizeof (T)];
    T * _embedded;
public:
    Option () : _embedded (nullptr) {
    }

    Option (const T & obj) : _embedded (new (_storage) T (obj)) {
    }

    Option (const Option<T> & other)
    : _embedded (
        other->_embedded ? new (_storage) T (other->_embedded) : nullptr
    ) {
    }

    // ...

    ~Option () {
        if (_embedded) _embedded->~T ();
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:02:00.923

我不认为数组需要以与对象类可能需要的相同方式对齐。实际上，除非该类型具有有趣的对齐要求，否则我不会期望任何问题。

使用 C++ 2011，您可以使用 a`union`来保存实际的表示，尽管您仍然需要管理所持有对象的生命周期。有[`boost::optional<T>`](http://www.boost.org/doc/libs/1_51_0/libs/optional/doc/html/index.html)一个[建议](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3406.html)将类似类型添加到标准的下一个修订版中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:58:20.993

对我来说，这看起来不错，除了：

```
uint8_t _storage [sizeof(T)/sizeof(uint8_t)];

Option (const Option & other)
    : _embedded (other->_embedded ? new (_storage)T(other->_embedded) : nullptr)
{
} 
```

# php - 解析错误：语法错误，意外的 T_GOTO，在第 406 行的 a/b/c/function.php 中需要 T_STRING 或 '('

> ID：12996351
> 
> 赞同：0
> 
> 时间：2012-10-21T08:54:43.273
> 
> 标签：php

> **可能重复：**
> [语法错误，意外的 T_GOTO，期待 T_STRING](https://stackoverflow.com/questions/7258697/syntax-error-unexpected-t-goto-expecting-t-string)

我已经上传了这个，但它显示错误：

```
<?
    function goto($url="") {
        echo"<meta http-equiv=\"refresh\" content=\"1;url=$url\">";
    }
?> 
```

> 解析错误：语法错误，意外的 T_GOTO，在第 406 行的 /a/b/p/function.php 中需要 T_STRING 或 '('。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:56:59.073

`goto`是一个 php 关键字，你不能用它作为函数名。只需更改函数的名称，例如：

```
<?php
    function meta_refresh($url = "") {
        echo"<meta http-equiv=\"refresh\" content=\"1;url=$url\">";
    }
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T08:57:00.053

这个词`goto`在 php 中是保留的，因为它是一个内置函数的名称。您只需要为您的函数使用另一个名称，仅此而已。

# c++ - Eigen：使用 SparseMatrix 的 selfAdjointView

> ID：12996352
> 
> 赞同：1
> 
> 时间：2012-10-21T08:54:43.870
> 
> 标签：c++, sparse-matrix, eigen

根据 Eigen[文档](http://eigen.tuxfamily.org/dox/TutorialSparse.html#TutorialSparse_TriangularSelfadjoint)，我希望以下工作：

```
#include "Eigen/Dense"
#include "Eigen/Sparse"
SparseMatrix<double> mymatrix = SomeFunctionReturningASparseMatrix();

SparseMatrix<double> test = mymatrix.selfadjointView<Lower>(); 
```

但是，我得到了编译时错误

```
conversion from 'Eigen::SparseSelfAdjointView<Eigen::SparseMatrix<double>, 2u>' to 
non-scalar type 'Eigen::SparseMatrix<double>' requested 
```

我究竟做错了什么？缺少包括？

第二个问题：据我所知，Eigen 还不支持 SparseSelfadjointViews 与 SparseMatrices 的乘法。我是否遗漏了什么，或者这实际上没有实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:01:59.910

您的函数`mymatrix.selfadjointView<Lower>()`返回一个类型的对象，`SparseSelfAdjointView<SparseMatrix<double>, 2u>`并且您试图将其转换为`SparseMatrix<double>`这一行内的 a：

```
SparseMatrix<double> test = mymatrix.selfadjointView<Lower>(); 
```

你还应该

```
#include <SelfAdjointView.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:33:07.467

Eigen 论坛的成员 ggael 能够回答我的问题。为了完整起见，我将在这里引用他的答案：

* * *

对于第一个问题，以下应该做的工作：

```
 SparseMatrix<double> test; 
 test = mymatrix.selfadjointView<Lower>(); 
```

第二，您是对的，不支持此类产品。

* * *

原始问题已发布并回答[here](http://forum.kde.org/viewtopic.php?f=74&t=108454&p=253073#p253073)。

# c# - 我如何在 C# 中与 C++ NPAPI dll 交谈

> ID：12996353
> 
> 赞同：1
> 
> 时间：2012-10-21T08:54:44.667
> 
> 标签：c#, dllimport, npapi

我有一个开源 C++ DLL

实际上它是来自 CRX 扩展的插件 dll，我试图在 Visual Studio 中使用 C# 调用它的函数

此扩展程序是 Google chrome-screen-capture

我设法创建了与 DLL 对话的代码，但我不知道如何调用它的函数。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace ConsoleApplication1
{
    class Program
    {
        [StructLayout(LayoutKind.Sequential, Pack = 1)]
        private class Sample
        {
            public Int32 length;
            public String value;
        }

        [DllImport("C:\\Users\\Ofir\\Documents\\Visual Studio 2010\\Projects\\ConsoleApplication1\\ConsoleApplication1\\bin\\Debug\\screen_capture.dll")]
        private static extern void NP_Initialize();

        static void Main(string[] args)
        {
            Sample s = new Sample();
            s.length = 0;
            s.value = "Huhu";
            NP_Initialize(); <-- I get an ERROR here : 
        }
    }
} 
```

> 错误：检测到 PInvokeStackImbalance 消息：对 PInvoke 函数“ConsoleApplication1！ConsoleApplication1.Program::NP_Initialize”的调用使堆栈不平衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我能做些什么？

**编辑：**例如，如果我使用 NP_GetEntryPoints() 它将请求一个类型为 NPPluginFuncs 的指针。

例如：`NPError WINAPI NP_GetEntryPoints(NPPluginFuncs* pFuncs)`

这是它要求的类型：

```
typedef struct _NPPluginFuncs {
    uint16 size;
    uint16 version;
    NPP_NewUPP newp;
    NPP_DestroyUPP destroy;
    NPP_SetWindowUPP setwindow;
    NPP_NewStreamUPP newstream;
    NPP_DestroyStreamUPP destroystream;
    NPP_StreamAsFileUPP asfile;
    NPP_WriteReadyUPP writeready;
    NPP_WriteUPP write;
    NPP_PrintUPP print;
    NPP_HandleEventUPP event;
    NPP_URLNotifyUPP urlnotify;
    JRIGlobalRef javaClass;
    NPP_GetValueUPP getvalue;
    NPP_SetValueUPP setvalue;
} NPPluginFuncs; 
```

但我不知道如何构建这种类型并发送它。我想完成在 IE 工具栏中构建一个函数，然后使用这个 DLL 中的函数。这样我就可以在 IE 中使用屏幕截图。

**EDIT2：**当我调用 NP_Shutdown() 函数时，没关系。一切都很清楚，没有例外。所以我想这都是我发送给另一个函数的类型。但我将如何发送这种类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-24T14:51:22.617

这是一个老问题，但我最近对 ​​NPAPI 做了一些小旅行，所以我分享了我的发现。虽然我无法测试你的情况，但我会走这条路。
首先声明一个`_NPPluginFuncs`结构：

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
struct _NPPluginFuncs
{
    UInt16 size;
    UInt16 version;
    IntPtr newp;
    IntPtr destroy;
    IntPtr setwindow;
    IntPtr newstream;
    IntPtr destroystream;
    IntPtr asfile;
    IntPtr writeready;
    IntPtr write;
    IntPtr print;
    IntPtr @event;
    IntPtr urlnotify;
    IntPtr javaClass;
    IntPtr getvalue;
    IntPtr setvalue;
    IntPtr gotfocus;
    IntPtr lostfocus;
    IntPtr urlredirectnotify;
    IntPtr clearsitedata;
    IntPtr getsiteswithdata;
    IntPtr didComposite;
} 
```

然后声明 PInvoke 调用：

```
[System.Runtime.InteropServices.DllImport("C:\\Users\\Ofir\\Documents\\Visual Studio 2010\\Projects\\ConsoleApplication1\\ConsoleApplication1\\bin\\Debug\\screen_capture.dll")]
private static extern void NP_Initialize(ref _NPPluginFuncs nPPluginFuncs);

[System.Runtime.InteropServices.DllImport("C:\\Users\\Ofir\\Documents\\Visual Studio 2010\\Projects\\ConsoleApplication1\\ConsoleApplication1\\bin\\Debug\\screen_capture.dll")]
private static extern IntPtr NP_GetEntryPoints(ref _NPPluginFuncs nPPluginFuncs);

[System.Runtime.InteropServices.DllImport("C:\\Users\\Ofir\\Documents\\Visual Studio 2010\\Projects\\ConsoleApplication1\\ConsoleApplication1\\bin\\Debug\\screen_capture.dll")]
private static extern void NP_Shutdown(); 
```

最后，调用 NPAPI：

```
_NPPluginFuncs nPPluginFuncs = new _NPPluginFuncs();
NP_Initialize(ref nPPluginFuncs);   // all members are 0 (IntPtr.Zero) after the call
IntPtr res = NP_GetEntryPoints(ref nPPluginFuncs);  // memory addresses filled in
NP_Shutdown(); 
```

你能确认这对你有用吗？您将面临另一项重大任务：调用那些返回的`IntPtr`函数`NP_GetEntryPoints`......

# linux - RHEL 5：无法应用补丁

> ID：12996355
> 
> 赞同：1
> 
> 时间：2012-10-21T08:55:15.440
> 
> 标签：linux, rhel

我正在关注这个网站在 Memcached1.4.5 上安装 repcache

[http://forums.famillecollet.com/viewtopic.php?id=252](http://forums.famillecollet.com/viewtopic.php?id=252)

最初我下载了这个 repcached-2.3-1.4.5.patch.gz

我正在使用 RHEL5

然后我跑

```
gunzip repcached-2.3-1.4.5.patch.gz 
```

它生成了一个名为 repcached-2.3-1.4.5.patch 的文件

然后执行

```
patch -p1 -i repcached-2.3-1.4.5.patch 
```

**它开始生产这个**

```
patching file ChangeLog.repcached
can't find file to patch at input line 66
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
|diff -urN memcached-1.4.5/Makefile.am memcached-1.4.5-repcached-2.3/Makefile.am
|--- memcached-1.4.5/Makefile.am        Sat Apr  3 11:07:16 2010
|+++ memcached-1.4.5-repcached-2.3/Makefile.am  Thu Feb 11 19:51:30 2010
--------------------------
File to patch: 
```

请看上面的屏幕截图

![在此处输入图像描述](../Images/ed61f83b5a3fd7657075cc170d26dafc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:10:29.337

如果我没看错，您正在尝试使用源代码补丁来修补二进制 rpm 包。那显然行不通。

您可以尝试通过使用源 rpm 而不是二进制 rpm 来做到这一点。源 rpm 是用于生成可以安装的二进制 rpm 包的“源包”。它通常称为`somesoftware-xxx.src.rpm`. 如果您安装这样的源 rpm 包，您会在 下解压内容`/usr/src/packages/...`，在`SOURCE`文件夹中可以找到 memcached 源存档。您必须解压缩该存档，应用补丁，存档已打包的源并替换`SOURCE`. 或者（更优雅）您将补丁添加到`spec file`控制构建过程以从已安装的源 rpm 包生成二进制 rpm 包。你会发现`spec file`下面的`SPECS`，可能叫做`memcached.spec`或者其他的东西。通常已经包含一些补丁，所以你有一个起点。

如果您以上述方式之一修补了源 rpm 包，则可以使用以下`rpmbuild`命令构建自己的二进制 rpm 包，如下所示：`rpmbuild -bb SPECS/memcached.spec`...

# c - C 宏的创造性/有趣用途；元编程

> ID：12996356
> 
> 赞同：4
> 
> 时间：2012-10-21T08:55:26.737
> 
> 标签：c, macros, metaprogramming, c-preprocessor

我一直在寻找有趣且最好有用的 C 宏/定义示例，这些示例比定义 const 或 min/max 函数更广泛。我的理解是宏应该允许某种程度的元编程（尽管我不确定），但是搜索并不能揭示太多，因此非常感谢使用宏进行元编程的示例，或者解释为什么它不能工作。总的来说，我对任何“酷”的宏用途都很感兴趣。

PS 我知道这个问题很快就会变得“不具建设性和关闭”，但我认为它至少可以成为有趣的社区 wiki 问题。

编辑：我对任何 C++ 都不感兴趣。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T09:19:32.567

受[这个问题](https://stackoverflow.com/questions/12784136/reliably-determine-the-number-of-elements-in-an-array)的启发，前几天我正在尝试宏的其他“创造性”用法，这就是我到目前为止提出的，一组宏来确保它们的参数是某种“类型”。这些可以用作其他宏的一部分：

```
#include <stdio.h>

// Only pointers can be dereferenced.
// This fails to compile if x is
// numeric type (or void*).
#define ACCEPT_PTR(x) \
  ((x) + sizeof(*(x)) * 0)

// sizeof() is evaulated at compile time and
// it will fail if the expression is non-const
// at compile time.
// (void*)&array == (void*)&array[0] is a
// compile-time const.
// (void*)&ptr == (void*)&ptr[0] needs the value of
// ptr and therefore isn't a compile-time const,
// same with (void*)&int == (void*)int.
#define ACCEPT_ARR(x) \
  ((x) + sizeof(struct { int not_an_array: ((void*)&(x) == &(x)[0]); }) * 0)
//  ((x) + sizeof(char[(void*)&(x) == (void*)&(x)[0]]) * 0)

// x can be added to itself or multiplied only
// if it's a numerical type, pointers can't be added.
#define ACCEPT_NUM(x) \
  ((x) * 1)
//  (((x) + (x)) - (x))

// Only integers can be shifted
// (% also applies to integers only).
// This will fail to compile if x isn't integer.
#define ACCEPT_INT(x) \
  ((x) << 0)
//  ((x) + (x) % 2 * 0)

// x will be concatenated with "" at compile
// time only if it's a string literal. Comilation
// will fail if x isn't a string literal.
#define ACCEPT_STR(x) \
  x ""

#define ACCEPT_LVAL(x) \
  (*&(x))

int main(void)
{
  int i = 42;
  int* p = &i;
  int a[1] = { 42 };
  float f = 42.0;

  ACCEPT_NUM(i);
  ACCEPT_NUM(p[0]);
  ACCEPT_NUM(a[0]);
//  ACCEPT_NUM(p);
//  ACCEPT_NUM(a);
//  ACCEPT_NUM("42");

  ACCEPT_INT(i);
  ACCEPT_INT(p[0]);
  ACCEPT_INT(a[0]);
  ACCEPT_INT("a"[0]);
//  ACCEPT_INT(p);
//  ACCEPT_INT(a);
//  ACCEPT_INT("42");
//  ACCEPT_INT(f);

  ACCEPT_PTR(&i);
  ACCEPT_PTR(p);
  ACCEPT_PTR(a);
  ACCEPT_PTR(&a[0]);
  ACCEPT_PTR("42");
  ACCEPT_PTR(&"a"[0]);
//  ACCEPT_PTR(i);
//  ACCEPT_PTR(f);

//  ACCEPT_ARR(a); // doesn't compile with OW :(
//  ACCEPT_ARR(i);
//  ACCEPT_ARR(p);
//  ACCEPT_ARR("42"); // WTF?; compiles with gcc :(
//  ACCEPT_ARR(f);

  ACCEPT_STR("42");
//  ACCEPT_STR(i);
//  ACCEPT_STR(p);
//  ACCEPT_STR(a);
//  ACCEPT_STR(f);

  ACCEPT_LVAL(i);
  ACCEPT_LVAL(p);
  ACCEPT_LVAL(p[0]);
  ACCEPT_LVAL(a); // not exactly lval
  ACCEPT_LVAL(a[0]);
//  ACCEPT_LVAL("42"); // WTF?; compiles with gcc but not with OW :(
  ACCEPT_LVAL(f);
//  ACCEPT_LVAL(0);
//  ACCEPT_LVAL(0.0);
//  ACCEPT_LVAL('a');

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:04:40.060

如果您想查看预处理器的滥用情况，请搜索旧版本的 generic.h。

它基本上是模板之前的模板样式集合。

# teamcity - 您如何删除/更改 Team City 中的统计图表？

> ID：12996362
> 
> 赞同：4
> 
> 时间：2012-10-21T08:56:04.510
> 
> 标签：teamcity, teamcity-7.0

我想删除一些标准的团队城市图表，例如“成功率”和“排队时间”，我该怎么做？它记录[在这里](http://confluence.jetbrains.net/display/TCD7/Customizing+Statistics+Charts#CustomizingStatisticsCharts-Disablingchartsofparticulartypeonprojectlevel)谁来做，但这似乎只允许您删除图表的一个子集，不包括上面提到的那些？

还有无论如何要让范围默认为“全部”而不是“月”，并将x轴更改为时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-14T10:09:15.143

如果您想禁用项目级别的图表，可以这样做，并且在[文档](https://confluence.jetbrains.com/display/TCD9/Customizing+Statistics+Charts#CustomizingStatisticsCharts-disable)中有所介绍。

无法在构建配置级别删除预定义图表。

来自[TeamCity 文档](https://confluence.jetbrains.com/display/TCD9/Statistic%20Charts#StatisticCharts-BCStatistics)：

> 与项目级图表相比，无法在构建配置级别禁用预定义图表。

这个问题用 TC7 标记，但我的回答是基于最新版本 TC 9.0.4。

# delphi - Delphi XE3，丑陋的StringGrid的边框

> ID：12996363
> 
> 赞同：2
> 
> 时间：2012-10-21T08:56:15.553
> 
> 标签：delphi, delphi-xe2, delphi-7, delphi-xe3

与 Delphi7 相比，为什么 XE3 中 StringGrid 的边界如此模糊？如何解决？

![在此处输入图像描述](../Images/596e7bd86a1946f98705e3479caee253.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T12:22:27.777

在 Delphi 2010 之后，所有的网格都是主题的。要禁用网格上的新主题，您必须在对象检查器中将属性 DrawingStyle 设置为 gdsClassic。

# java - 为 java xml 解析器编码时出错

> ID：12996365
> 
> 赞同：2
> 
> 时间：2012-10-21T08:56:28.730
> 
> 标签：java, android, xml-parsing

我有下面的编码：

```
 try{                                
            address = "http://isbndb.com//api/books.xml? 
            access_key=CKEHIG4D&index1=isbn&value1=" +barcode;
            URL url = new URL(address);
            URLConnection conn = url.openConnection();

            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document doc = builder.parse(conn.getInputStream());

            NodeList nodes = doc.getElementsByTagName("BookData");
            for (int i = 0; i < nodes.getLength(); i++) {
                Element element = (Element) nodes.item(i);
                NodeList title = element.getElementsByTagName("LongTitle");
                Element line = (Element) title.item(0);
                titleList.add(line.getTextContent());
            }
        }
        catch (Exception e) {
            e.printStackTrace();
        } 
```

XML 格式是

[http://isbndb.com//api/books.xml?access_key=CKEHIG4D&index1=isbn&value1=1593270615](http://isbndb.com//api/books.xml?access_key=CKEHIG4D&index1=isbn&value1=1593270615)

错误是这一行 --> NodeList title = element.getElementsByTagName("LongTitle");

其实这有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:08:02.977

确保您正在导入正确的 Element 类 ( [org.w3c.dom.Element](http://developer.android.com/reference/org/w3c/dom/Element.html) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:08:58.763

更改 "LongTitle" --> "TitleLong"

在

```
NodeList title = element.getElementsByTagName("LongTitle"); 
```

# c# - 将列表传递给 WCF 中的客户端

> ID：12996366
> 
> 赞同：0
> 
> 时间：2012-10-21T08:56:29.217
> 
> 标签：c#, wcf, entity-framework, list

我的服务功能如下所示：

```
 public List<X> GetAll(string num)
    {
       TheContext  Mycontext = new TheContext();
        IEnumerable<X> MyIEnumerable =
     ((IObjectContextAdapter)Mycontext)
     .ObjectContext.ExecuteStoreQuery<X>("select * from dbo.XXX where y='"+num+"'");

        List<X> MyList = MyIEnumerable.ToList();
        return MyList;
    } 
```

这里列表OK。

我的客户看起来像这样：

```
static void Main(string[] args)
    {
        MyClient proxy = new MyClient ();
        List<X> MyClientList = proxy.GetAll("980").ToList();
        proxy.Close();
        Console.ReadLine();
    } 
```

这里有错误：

接收 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

如果我从这样的函数返回，这个工作：

```
public List<X> GetAll(string num)
 {
   List<x> MyList= new List<x>();
   MyList.Add(new X(){...});
   MyList.Add(new X(){...});
   MyList.Add(new X(){...});   
    return MyList;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:01:18.690

你真的`object`在方法签名中使用类型吗？您应该检查返回类型是否为`Serializable`并用`DataContract`属性标记。大概这就是问题所在。

# windows - 如何在 Windows 8 的 Frame 控件上设置多个控件？

> ID：12996367
> 
> 赞同：0
> 
> 时间：2012-10-21T08:56:37.767
> 
> 标签：windows, windows-8, frame

我在我的 Windows 8 Metro 风格应用程序中有一个 Frame 控件，我想在其中添加多个其他控件，如文本框、组合框等。基本上我想创建一个表单，它接受用户的输入并给出结果。当我单击按钮时，我正在使用框架来显示这些东西，但是在框架中它不允许我放置多个控件。

**它说内容只能设置一次。**

如果有人有任何想法，请提供帮助。我是 Windows 8 的新手，如果我错了，请见谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:20:59.603

您可以使用堆栈面板或网格控件来托管您的嵌套控件

希望能帮助到你

# c# - 如何将文件添加到 MS SQL Server 中的表中

> ID：12996371
> 
> 赞同：-3
> 
> 时间：2012-10-21T08:57:11.340
> 
> 标签：c#, file, sql-server-2005

正如标题，现在我有一个表格来保存数据，数据类型是文件。但我不知道该怎么做。谁能帮我 ？

我正在使用 C#（VS 2010，MS SQL Express 2005）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:02:04.197

在 C# 代码中以二进制形式读取文件并将其存储在具有数据类型的表列中`varbinary(MAX)`

# python - 如何循环字符串中的字符并检查它是否在字典python中

> ID：12996372
> 
> 赞同：2
> 
> 时间：2012-10-21T08:57:22.473
> 
> 标签：python, python-3.x

我可以请你帮忙吗？

我必须在 python 中为 homewrok 编写一个程序，它交替要求两个竞争对手输入一个字母。当字典中没有这样的词时程序结束（我导入了字典，它是我从老师那里得到的文本格式的字典）。

这是它的样子：

> **竞争对手1，字母a：** m
> 
> **竞争对手 2，字母 b：** o
> 
> **竞争对手1，字母a：** u
> 
> **竞争对手 2，字母 b：** s
> 
> **竞争对手 1，字母 a：** e
> 
> **竞争对手 2，字母 b：** i

字典里没有mousei这个词！

这就是我的开始：

```
dictionary=open("dictionary.txt", encoding="latin2").read().lower().split()
a=input("Competitor 1, letter a:")
b=input("Competitor 2, letter b:")
word=a+b

while word in dictonary:
      a=input("Competitor 1, letter a:")
      word=word+a
      b=input("Competitor 2, letter b:")
      word=word+b

print("There is no such word" ,word, "in dictionary!") 
```

但有些不对劲。因为当我启动程序时，我会写前两个字母。它说字典里没有这个词。

请帮我！

还有一件事：游戏必须在第一个错误字符后立即停止。你能告诉我怎么做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:02:22.787

那是因为你的条件不对！您不应该检查 是否`word`在字典中，而是检查字典中是否有以`word`!开头的单词

这是一种可能的解决方案（可能不是最漂亮的解决方案）：

```
word_ok = True
dictionary=open("dictionary.txt", encoding="latin2").read().lower().split()
a=raw_input("Competitor 1, letter a:")
b=raw_input("Competitor 2, letter b:")
word=a+b

while word_ok:
        word_ok = False
        for dict_word in dictionary:
            if dict_word.startswith(word):
                word_ok = True
                break
        if word_ok:                                
            a=raw_input("Competitor 1, letter a:")
            word=word+a
            b=raw_input("Competitor 2, letter b:")
            word=word+b
        else:
            break

print("There is no such word" ,word, "in dictionary!") 
```

编辑：

好的，这是其他答案的一种汇编。请注意，这`encoding`不是内置`open()`函数的有效关键字参数。如果要指定编码，请使用`codecs.open()`. 还要注意`while`，在每个参赛者输入之后，单词检查在循环内进行了两次。

```
import codecs

dictionary = codecs.open('dictionary.txt','r',encoding='latin2').read().lower().split()

# Word we will build
word = ''

while True:
    letter = raw_input("C1: ")
    word = word + letter
    if not any(known_word.startswith(word) for known_word in dictionary):
        break

    letter = raw_input("C2: ")
    word = word + letter
    if not any(known_word.startswith(word) for known_word in dictionary):
        break

print "There is no such word", word, "in dictionary!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:10:30.463

你的规则不一致。考虑这个游戏：

```
 s      # Not a word
 su     # Not a word
 sun    # Word
 sund   # Not a word
 sunda  # Not a word
 sunday # Word 
```

游戏应该什么时候结束？

> 当字典中没有这个词时程序结束

你的规则说它应该在第一步结束，因为结果不是一个词。更好的规则是：

> 当字典中没有以输入开头的单词时，程序结束

* * *

“交替询问两个竞争对手”的实施也是错误的。您的程序要求两个竞争对手提供一封信，然后检查这个词。您想检查玩家之间的单词。

```
dictionary = open("dictionary.txt", encoding="latin2").read().lower().split()
word = ""
c1turn = True

while any(knownword.startswith(word) for knownword in dictonary):
    if c1turn:
        letter = input("Competitor 1:")
    else:
        letter = input("Competitor 2:")

    word = word + letter
    c1turn = not c1turn

print("There is no such word", word, "in the dictionary!") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T09:11:40.787

你必须改变你的 while 条件。你这样做的方式是检查`word`内部是否是`dictionary`一个单词，而不是你想要的单词的一部分。您可以通过以下方式进行操作：

```
while any(x.startswith(word) for x in dictionary): 
```

这样，您可以创建一个布尔值列表，其中每个元素都是`True`如果字典中相同位置的单词以您的`word`. 如果字典的任何单词以`word`条件开头，则为真，玩家应输入另一个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T09:14:45.737

由于这是一个类，我假设它必须有点简单。这是一个如何使用函数工作的超级基本示例（不确定这些是否已包含在您的课程中，如果没有，请忽略）：

```
def CheckWord(word, dictionary):
    # Check if any words in your dictionary start with the current word
    for term in dictionary:
        if term.startswith(word):
            return True
    return False

# Basic dictionary
dictionary = ['mouse', 'louse']

# Word we will build
word = ''

# Keep the loop going until we get a False from our function, at which point it stops
while True:
    a = raw_input("C1: ")
    word += a
    b = raw_input("C2: ")
    word += b

    # Check the current word with our function
    match = CheckWord(word, dictionary)

    # If the function returns False, quit
    if not match:
        print ("There is no such word", word, "in dictionary!")
        break 
```

# javascript - Javascript将图片字节转换为十六进制

> ID：12996374
> 
> 赞同：3
> 
> 时间：2012-10-21T08:57:36.110
> 
> 标签：javascript, image, canvas, binary, hex

我试图通过画布将本地图像文件转换为字符串

```
imgData = canvas.toDataURL("image/jpeg"); 
```

但它只返回一个 Base64 编码的字符串。

有没有办法将图像二进制转换为十六进制**字符串**，如

```
0x310000700008000400efbeee3a851a54... 
```

然而就像`unpack('H*')`perl/ruby 中的函数一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T18:17:03.940

这是来自[https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding](https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding)

在 JavaScript 中有两个函数分别用于解码和编码 base64 字符串：

[atob()](https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64.atob)

[btoa()](https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64.btoa)

```
var encodedData = window.btoa("Hello, world"); // encode a string

var decodedData = window.atob(encodedData); // decode the string

encodedData = window.btoa("011110000100101"); //RESULT is "MDExMTEwMDAwMTAwMTAx" 
```

**或（在 node.js 中）**

```
fs = require('fs');
imgBuffer = fs.readFileSync('public/images/my_image_location.gif');
imgHex = imgBuffer.toString('hex');
console.log(imgHex) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:25:39.367

[http://phpjs.org/functions/base64_decode/](http://phpjs.org/functions/base64_decode/) ...一个JavaScript函数模拟`base64_decode`...有一个jQuery插件[http://hpyer.cn/codes/jquery-plugin-base64-encode-and-解码](http://hpyer.cn/codes/jquery-plugin-base64-encode-and-decode)

# android - 尝试从 v 18.x 更新 Eclipse ADT - v 20.0.0 或更高版本

> ID：12996377
> 
> 赞同：2
> 
> 时间：2012-10-21T08:57:43.957
> 
> 标签：android, eclipse, adt, avd

（我使用的是 Eclipse 3.7.1）

在 tools/android 中手动下载 Jellybean API（而不是通过 Eclipse 中的 ADT）后，我在 Eclipse 中遇到了一些奇怪的行为。

Preferences 中的 Android 文件夹现在不再可指定！错误：此 Android SDK 需要 Android Developer Toolkit 版本 20.0.0 或更高版本。当前版本为 18.0.0.v201203301601-306762。请将 ADT 更新到最新版本。

然后我尝试安装新软件，以获取这个最新版本。这不起作用，显示以下错误：

```
收集要安装的项目时出错
会话上下文是：（profile=SDKProfile，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。
未找到包含以下内容的存储库：osgi.bundle,org.eclipse.emf.common,2.7.0.v20120127-1122
未找到包含以下内容的存储库：osgi.bundle,org.eclipse.emf.ecore,2.7.0.v20120127-1122
未找到包含以下内容的存储库：osgi.bundle,org.eclipse.emf.ecore.change,2.7.1.v20120127-1122
未找到包含以下内容的存储库：osgi.bundle,org.eclipse.emf.ecore.xmi,2.7.0.v20120127-1122
未找到包含以下内容的存储库：osgi.bundle,org.eclipse.emf.edit,2.7.2.v20120130-0943
未找到包含以下内容的存储库：osgi.bundle,org.eclipse.wst.common.frameworks,1.2.102.v201201190400
找不到包含以下内容的存储库：osgi.bundle,org.eclipse.wst.common.project.facet.core,1.4.201.v201201101553
未找到包含以下内容的存储库：osgi.bundle,org.eclipse.wst.validation,1.2.303.v201202090300

```

Eclipse 不能再处理 Android，卸载 API 也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:38:57.787

您的 Eclipse 安装缺少[Eclipse Web 工具](http://www.eclipse.org/webtools/)（用于 ADT 插件内的 XML 编辑）。[Android 文档](http://developer.android.com/guide/faq/troubleshooting.html#installeclipsecomponents)中直接描述了使用旧版本的 Eclipse 安装它们。

如果这些链接对您来说不够用，那么请将您使用的 Eclipse 版本添加到问题中，因为安装 Web 工具的链接取决于该版本。

# matlab - matlab中的均匀分布拟合

> ID：12996380
> 
> 赞同：2
> 
> 时间：2012-10-21T08:58:36.490
> 
> 标签：matlab, distribution, model-fitting

我有一个数据集，希望将它们拟合到均匀分布并使用 Matlab 计算拟合优度。但是，我发现 uniform 不包含在函数“ **fitdist** ”中。有什么方法可以在 Matlab 中进行均匀分布拟合吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T10:30:01.793

当您说要将数据集拟合到制服时，我假设您的意思是您想要估计最适合您的数据集的均匀分布的参数。

这实际上是一个非常有趣的问题。我并不感到惊讶，`fitdist`因为均匀分布有点特殊。例如，可以证明，在某些情况下，均匀分布的参数的最大似然估计不存在，而在其他情况下，没有唯一解。

那么该怎么办？好吧，均匀分布有两个参数`a`和`b`，它们定义了密度的下限和上限。让`X`表示您的数据集（例如，观察的列向量）。`a`和的天真估计`b`是：

```
a = min(X);
b = max(X); 
```

当然，这些估计几乎肯定会高估 (for `a`) 和低估 (for `b`) 真实参数，因为从密度中抽取的随机样本不太可能正好落在边界上。

对于已知`a`为 0 的情况，最小方差无偏估计量`b`为：

```
b = max(X) + (max(X) / length(X)) 
```

这个估计器与著名的[德国坦克问题](http://en.wikipedia.org/wiki/German_tank_problem)有关。对于一般情况，我实际上并不知道任何估计理论（尽管我确信一定有一些）。我的第一个猜测是使用朴素的最小/最大估计器，但减去并添加数据集中观察值之间的平均距离，即：

```
a = min(X) - c;
b = max(X) + c; 
```

在哪里

```
c = (max(X) - min(X)) / length(X) 
```

至于拟合优度，希望 SO 上的其他人知道一些事情，因为我需要自己做一些研究来回答这个问题。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-26T22:10:26.110

将您的变量转换为正态分布变量并使用“kstest”。因此，如果您有一个从 a 到 b 一致的变量 X，请执行以下代码

`X_uni=(X-a)/(b-a); %Uniform 0,1 variable`

```
X_norm=norminv(X_uni); % transform to normal distributed variable
[h,P]=kstest(X_norm) ; %P is the test statistic 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:07:15.083

[根据 Colin 的回答，可以使用Pearson 卡方检验](http://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test#Goodness_of_fit)来计算均匀分布的拟合优度。

如果您可以访问 Matlab 统计工具箱，您可以使用[chi2gof](http://www.mathworks.co.uk/help/stats/chi2gof.html)函数相当简单地执行此操作。文档中的示例 3 显示了如何将其应用于均匀分布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-09T09:10:08.787

只是为了扩展 Alan 的答案，了解如何正确使用[Pearson 的卡方检验](https://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test)

# 设置参数

```
N=100; % sample size
a=0; % lower boundary
b=1; % higher boundary 
```

在 a 和 b 之间采样 N 个均匀分布的值。如果您想测试代码，请在第二行添加一些 bais 使其不统一。

```
x=unifrnd(a,b,N,1);
%x(x<.9) = rand(sum(x<.9),1); 
```

# 使用[`chi2gof`](http://mathworks.com/help/stats/chi2gof.html)

[如此处](https://stackoverflow.com/questions/12996380/uniform-distribution-fitting-in-matlab)所述，使用[`chi2gof`](http://ch.mathworks.com/help/stats/chi2gof.html)，您不能使用“假设分布的 cdf”，需要指定箱、边缘和预期值。

```
nbins = 10; % number of bin
edges = linspace(a,b,nbins+1); % edges of the bins
E = N/nbins*ones(nbins,1); % expected value (equal for uniform dist)

[h,p,stats] = chi2gof(x,'Expected',E,'Edges',edges) 
```

# 使用[`chi2cdf`](http://mathworks.com/help/stats/chi2cdf.html)

使用此函数，您需要提供卡方检验统计量 $\displaystyle \chi ^{2}$ 可以使用以下函数计算`histogramm`：

```
h = histogram(x,edges);
chi = sum((h.Values - N/nbins).^2 / (N/nbins));
k = nbins-1; % degree of freedom
chi2cdf(chi, k) 
```

请注意，如果您不使用边缘来计算每个箱的值的数量，`histogramm`将从较低的值到最高的值选择它们，因此最终得分将与`chi2gof`

最后，您想使用 p 值来回答“我可以安全地*拒绝*原假设（即`x`不是来自均匀分布）吗？”的问题。是的，您可以肯定地说，如果低于[显着水平 (alpha)](https://en.wikipedia.org/wiki/Statistical_significance)`x` ，它就*不是*来自均匀分布。`p`

# java - SQLite，不想获得最大_id，我想获得“下一个”_id

> ID：12996382
> 
> 赞同：1
> 
> 时间：2012-10-21T08:58:40.750
> 
> 标签：java, android, sqlite

假设我在一个 sqlite 数据库中创建了 5 个条目。

```
_id | Name
1    Tom
2    Oskar
3    Matt
4    Mike
5    Ed 
```

如果我删除数字 4 和 5，我只有 1-3。然后我做一个最大_id查询然后我得到数字3。但是，我当然想要下一个自动递增的_id。在这个例子中获得数字“6”的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T10:00:10.653

如果您的`_id`列具有 type [`INTEGER PRIMARY KEY AUTOINCREMENT`](http://www.sqlite.org/autoinc.html)，您可以从表中读取当前序列值[`sqlite_sequence`](http://www.sqlite.org/fileformat2.html#seqtab)，从而确定下一个：

```
SELECT seq + 1 FROM main.sqlite_sequence WHERE name = 'mytablename' 
```

# php - 即使在浏览器关闭后仍然可以保持会话吗？

> ID：12996384
> 
> 赞同：1
> 
> 时间：2012-10-21T08:58:49.123
> 
> 标签：php, session, cookies

由于保存 cookie 不安全。无论如何要保持会话或设置会话到期，所以即使我关闭浏览器并再次打开它。它不会再次重定向我或再次要求我输入我的用户名或密码。

```
public function __construct(){
session_start();
$this->check_login();
}
public function check_login(){
if(isset($_SESSION['user_id'])){
$this->user_id = $_SESSION['user_id'];
$this->logged_in = true;
} else {
unset($_SESSION['user_id']);
$this->logged_in = false;
}
}

if (isset($_POST['submit'])){
$username = $database->escape_value($_POST['username']);
$password = $database->escape_value($_POST['password']);
$found_user = $user->authenticate($username,$password);
if ($found_user){
$session->login();
redirect_to('index.php');
} else {
$message = output_message("Invalid Username or Password <br />");
}
}else{
$username = "";
$password = "";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:08:12.683

[http://www.php.net/manual/en/function.session-cache-expire.php](http://www.php.net/manual/en/function.session-cache-expire.php)

[http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)

制作这个东西的更好方法是仅使用 cookie，因为 setcookie 包含超时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:15:48.973

Session is only saved in the session cookie, so if the user clears the cookies the session will be removed. Cookies are not cleared when the user closes the browser. As per Ali's answer, check the lifetime of the session cookie.

If you are really interested in identifying a returning user without the use of cookies, google for "identifying user without using cookies". You will find interesting things to do, but nothing as reliable as cookie usage.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:24:25.277

`user_id`用户成功登录后，您必须保存在会话中。

```
if ($found_user){
    $session->login();
    $_SESSION['user_id'] = $username;
    redirect_to('index.php');
} 
```

并确保`$username`是独一无二的。

# facebook - 使用 Flash 应用程序获取 facebook 页面信息

> ID：12996386
> 
> 赞同：1
> 
> 时间：2012-10-21T08:59:12.003
> 
> 标签：facebook, json, web-services, actionscript-3

如何通过我在 Adob​​e Flash (ActionScript 3) 中制作的应用程序从 Facebook 页面获取信息（例如关于、id、名字姓氏等）。

到目前为止，我已经这样做了：

```
var request:URL Request = new URLRequest("https://graph.facebook.com/362134400532769?fields=id,name");
var loader:URLLoader = new URLloader();
loader.load(request); 
```

那正确吗？

如果是这样，我猜它会返回一个包含所有元素的数组。那么你如何去吸引元素呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T13:14:05.127

> 那么你如何去吸引元素呢？

使用以下过程：

*   循环遍历数组
*   检查每个索引处元素的类型
*   如果它与您需要的类型匹配，请使用它
*   否则，跳过它

# django - IndexError，除了不起作用。姜戈

> ID：12996387
> 
> 赞同：0
> 
> 时间：2012-10-21T08:59:27.620
> 
> 标签：django, views, try-catch

在`views`我有：

```
 def cars(request, cars_id):
            try:
                 car = Car.objects.filter(id=cars_id).values('model')
                 all_cars = Models.objects.filter(cars_id=cars_id).values('id', 
                 'name', 'cars_id')
            except Car.DoesNotExist:
                 cars_id=1
            except Exception, e:
                 print e
            except IndexError:
                 cars_id=1
            return render_to_response('cars.html', {'all_cars': all_cars, 'car':car[0]['model']}) 
```

因此，在浏览器中我输入例如*car/10000000/*，我有一个错误：

**IndexError: 列表索引超出范围**。

为什么我的“除外”不起作用以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:20:27.703

如果你想捕捉对象的存在，我建议你使用[DoesNotExist](https://docs.djangoproject.com/en/dev/ref/exceptions/#django.core.exceptions.DoesNotExist)异常

```
def cars(request, cars_id):
    try:
        car = Car.objects.get(id=cars_id).values('model')
    except Car.DoesNotExist:
        #other stuff 
```

根据您更新的问题：您正在尝试获取`None`. 您应该在您的 try/except 语句中获取要返回的汽车模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:56:09.910

你的问题在最后一行`car[0]['model']`。当您没有指定的汽车时`cars_id`，`car`列表为空，因此您将获得一个`IndexError`. 修复方法是在请求的汽车不存在时获取默认汽车 - 默认汽车是`id = 1`.

但是，您的行`all_cars`与您的`car`行相同，只是它包含额外的字段。也就是说，无效`all_cars`时会有一辆车或零辆车。`cars_id`

因此，最好`all_cars`列出数据库中的所有汽车：

```
def cars(request, cars_id):
    all_cars = Models.objects.all().values('id',
               'name', 'cars_id')
    car = Car.objects.filter(id=cars_id).values('model')
    if not car:
        car = Car.objects.filter(id=1).values('model')
    return render_to_response('cars.html', {'all_cars': all_cars,
                                            'car':car[0]['model']}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:17:45.807

我猜你的 IndexError 是在其他位置抛出的。出于测试目的，尝试将整个视图包装在一个通用的 try catch 块中。

```
try:
    car = Car.objects.filter(id=cars_id).values('model')
    #include here all the other stuff you are doing
except Exception, e
     print e 
```

您的观点 - 重写：

```
def cars(request, cars_id):
        #to see whether you passed cars_id correctly
        print "cars_id is"
        print cars_id
        all_cars = Models.objects.filter(cars_id=cars_id).values('id', 
             'name', 'cars_id')
        try:
             car = Car.objects.get(id=cars_id).values('model') 
        except Car.DoesNotExist:
             print "the car for the given ID does not exist
        #just return the "entire" car object in the context of the response.
        #in the template you can then access car.model
        return render_to_response('cars.html', {'all_cars': all_cars, 'car':car}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T10:20:03.997

1) 了解 Exceptions hiearchy：如果`except`先有 Exception 块，然后有 IndexError 块，则永远不会捕获 IndexError，因为它是 Exception 的子类（参见 [http://docs.python.org/library/exceptions.html#exception-hierarchy](http://docs.python.org/library/exceptions.html#exception-hierarchy)）

2）`filter()`永远不会引发`DoesNotExist`异常，你必须检查是否有一些记录获取`QuerySet`。

3）你的问题是零索引`return`。

4) 代码应该看起来像这样：

```
def cars(request, cars_id):
    try:
        car = Car.objects.get(id=cars_id)
    except Car.DoesNotExist:
        #anyway - are you sure Car w/ id always exists?
        car = Car.objects.all()[:1] #get first car

    all_cars = Models.objects.filter(cars_id=cars_id).values('id', 'name', 'cars_id')
    return render_to_response('cars.html', {'all_cars': all_cars, 'car':car.model}) 
```

# php - Crossfire DAAP 客户端无法连接到 Firefly

> ID：12996390
> 
> 赞同：2
> 
> 时间：2012-10-21T08:59:48.590
> 
> 标签：php, ajax, itunes, daap

您好 Stackoverflow 社区，我在这里寻求一点帮助.. 我似乎无法解决的问题。

**问题**：我正在尝试设置 Crossfire 客户端（Firefly 的网络客户端（媒体服务器）），但是当上传到我的托管服务器时，客户端似乎无法连接到 Firefly 服务器。我尝试在我的 MAMP（本地服务器）上设置 Crossfire 客户端，它连接良好......

**错误信息**：

```
Failed to load resource: the server responded with a status of 504 (Gateway Timeout) 
```

因此，根据我非常有限的知识，这似乎是一个 php 设置问题（这是唯一可能最不同的问题） - 但如果我不是 100%，我不确定要问我的托管支持什么确定确切的问题是什么。

如果有人可以帮助我，那将非常感激。

有关[Crossfire 客户端的更多信息](http://sourceforge.net/projects/ffmcrossfire/)

# javascript - 如何抓取无限滚动的页面？

> ID：12996392
> 
> 赞同：5
> 
> 时间：2012-10-21T09:00:32.917
> 
> 标签：javascript, ruby, web-crawler

我正在尝试构建一些可以从无限滚动页面中抓取内容的东西。但是，我无法从第一个“休息”下方获得这些东西。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T09:09:01.573

无限滚动几乎总是在 JavaScript 中使用 AJAX 或相关技术完成。因此，您的网络爬虫仅获取 HTML 并对其进行解析是不够的；它必须下载并执行 javascript，或者至少扫描它以查找 AJAX 调用。

执行完整的 javascript 可能是*最好*的（即最能保证工作），但可能是最难做到的。

扫描 javascript 中的 AJAX 请求和/或查找执行 AJAX 调用然后进行 DOM 操作的函数可能是最简单的（相对于完整的 JS 执行）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T22:55:02.570

这个答案应该与大部分无限滚动器相关，显然你的里程可能会有所不同。

大多数无限滚动条通过使用偏移位置来工作，并且只是从偏移处抓取下一个项目块。这与分页的工作方式完全相同

`< Previous 1 2 3 4 5 Next >`除了存储偏移量并用于发出新请求之外。

考虑到这一点，如果您在 Chrome 或 Firefox 中打开开发人员工具栏并查看网络选项卡，您很可能会在向下滚动时看到请求进入。

查看请求上的参数，您很可能会看到类似

```
GET /api/v2/books?offset=100=count=10
GET /api/v2/books?offset=110=count=10
GET /api/v2/books?offset=120=count=10 
```

知道了这一点，您可以很容易地忽略对目标 HTML 的实际抓取，而只需使用它们的内部目标 URI 来发出您的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:56:15.563

ajax 请求与任何其他请求没有什么不同。您只需发出请求，解析结果，然后就可以获得数据。

如果您以前没有做过，可能需要一些经验，但这听起来像是一次很好的学习经历。

# android - Android：自定义视图中的 RectF 参数

> ID：12996395
> 
> 赞同：0
> 
> 时间：2012-10-21T09:01:05.607
> 
> 标签：android, android-layout, android-custom-view

我有一个自定义视图，我在其中绘制饼图。该图表在 RectF 中绘制。但如果我想创建 RectF，我需要设置 xLeft、xRight、yTop、yBottom 参数……但我不知道这个参数！我的自定义视图将包含在具有高度和重量填充父级的线性布局中。那么该怎么做呢？

```
public class PieChart extends View {
private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
private float[] value_degree;
private int[] COLORS;
RectF rectf;

public PieChart(Context context, float[] values, int colors[]) {

    super(context);
    value_degree = new float[values.length];
    COLORS = colors;
    for (int i = 0; i < values.length; i++) {
        value_degree[i] = values[i];
    }

}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);

    rectf = new RectF(// I dont want to hardcode coordinates here);

    for (int i = 0; i < value_degree.length; i++) {
        paint.setColor(COLORS[i]);
        canvas.drawArc(rectf, 270 + 90 * i, value_degree[i], true, paint);
    }
} 
```

}

在我的活动中

```
 @Override
protected void onCreate(final Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
 LinearLayout linearLayout = (LinearLayout) findViewById(R.id.pie_chart);
 linearLayout .addView(new PieChart(this, someValues, someColors)); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:25:25.223

当您实例化`PieChart`对象时，您将其传递给一个数组，`value_degree`. 使用此数组的大小来预先确定大小或您的`RectF`. 您可以在 2（即 ）之间实现恒定关系`rectfHeight = 5 * value_degree.lenght`，或创建某种可变动态关系。

# linux - 使用 sudo 时找不到命令

> ID：12996397
> 
> 赞同：182
> 
> 时间：2012-10-21T09:01:16.973
> 
> 标签：linux, bash, sudo

`foo.sh`我的主文件夹中有一个脚本。

当我导航到此文件夹并输入`./foo.sh`时，我得到

`-bash: ./foo.sh: Permission denied`.

当我使用`sudo ./foo.sh`时，我得到

`sudo: foo.sh: command not found`.

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-10-21T14:17:13.693

**没有权限**

为了运行脚本，文件必须**设置可执行权限位**。

为了完全理解 Linux[文件权限](http://www.gnu.org/software/coreutils/manual/html_node/File-permissions.html#File-permissions)，您可以研究该`chmod`命令的文档。[chmod是](http://www.gnu.org/software/coreutils/manual/html_node/chmod-invocation.html)*change mode*的缩写，是用于更改文件权限设置的命令。

要阅读本地系统的 chmod 文档，请运行`man chmod`或`info chmod`从命令行运行。一旦阅读并理解，您应该能够理解运行的输出......

```
ls -l foo.sh 
```

...这将列出文件所有者、组所有者以及不是文件所有者或文件所属组成员的其他所有人的 READ、WRITE 和 EXECUTE 权限（有时称为最后一个权限组作为“世界”或“其他”）

以下是如何解决您的案例中的**Permission Denied 错误的摘要。**

```
$ ls -l foo.sh                    # Check file permissions of foo
-rw-r--r-- 1 rkielty users 0 2012-10-21 14:47 foo.sh 
    ^^^ 
 ^^^ | ^^^   ^^^^^^^ ^^^^^
  |  |  |       |       | 
Owner| World    |       |
     |          |    Name of
   Group        |     Group
             Name of 
              Owner 
```

Owner 具有读写权限 rw 但 - 表示缺少可执行权限

该`chmod`命令解决了这个问题。（组和其他只对文件设置了读取权限，他们不能写入或执行它）

```
$ chmod +x foo.sh               # The owner can set the executable permission on foo.sh
$ ls -l foo.sh                  # Now we see an x after the rw 
-rwxr-xr-x 1 rkielty users 0 2012-10-21 14:47 foo.sh
   ^  ^  ^ 
```

就 Linux 而言，foo.sh 现在是可执行的。

**使用 sudo 导致找不到命令**

当您使用**sudo**运行命令时，您实际上是以超级用户或 root 身份运行它。

root 用户没有找到您的命令的原因很可能是`PATH`root 的环境变量不包括*所在的**目录`foo.sh`*。因此找不到该命令。

PATH 环境变量包含搜索命令的目录列表。每个用户根据自己的需要设置自己的 PATH 变量。查看它设置为运行什么

```
env | grep ^PATH 
```

这是首先以普通用户身份运行上述`env`命令，然后以 root 用户身份使用 sudo运行的一些示例输出

```
rkielty@rkielty-laptop:~$ env | grep ^PATH
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games

rkielty@rkielty-laptop:~$ sudo env | grep ^PATH
[sudo] password for rkielty: 
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/X11R6/bin 
```

请注意，虽然相似，但在这种情况下，非特权用户 (rkielty) 和超级用户在 PATH 中包含的目录*并不相同*。

`foo.sh`root 用户的 PATH 变量中不存在所在目录，因此找不到*命令*错误。

* * *

## 回答 #2

> 赞同：128
> 
> 时间：2015-04-01T20:53:16.520

到目前为止我在这里看到的其他解决方案是基于一些系统定义的，但实际上可以通过正确调用它来`sudo`使用当前`PATH`（使用`env`命令）和/或环境的其余部分（使用`-E`选项） ：

```
sudo -E env "PATH=$PATH" <command> [arguments] 
```

事实上，可以用它做一个别名：

```
alias mysudo='sudo -E env "PATH=$PATH"' 
```

（也可以命名别名本身`sudo`，替换原来的`sudo`。）

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-09-01T16:46:02.700

检查sudo 上的**secure_path**

```
[root@host ~]# sudo -V | grep 'Value to override'
Value to override user's $PATH with: /sbin:/bin:/usr/sbin:/usr/bin 
```

如果`$PATH`被覆盖使用`visudo`和编辑`/etc/sudoers`

```
Defaults    secure_path = /sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-21T09:08:22.577

1.  检查您是否具有脚本的执行权限。IE`chmod +x foo.sh`
2.  检查该脚本的第一行是否是`#!/bin/sh`这样的。
3.  对于 sudo，您位于错误的目录中。检查`sudo pwd`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-20T20:29:41.750

您还可以`/usr/local/bin`在超级用户 PATH 中的某个目录（例如）中创建指向脚本的软链接。然后它将可供 sudo 使用。

```
chmod +x foo.sh
sudo ln -s path-to-foo.sh /usr/local/bin/foo 
```

查看[此答案](https://askubuntu.com/q/465109/311950)以了解将软链接放入哪个目录。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-28T13:56:34.033

即使您明确给出文件的路径，linux 似乎也会说“找不到命令”。

```
[veeam@jsandbox ~]$ sudo /tmp/uid.sh;echo $?
sudo: /tmp/uid.sh: command not found
1
[veeam@jsandbox ~]$ chmod +x /tmp/uid.sh
[veeam@jsandbox ~]$ sudo /tmp/uid.sh;echo $?
0 
```

这是一个有点误导性的错误，但它在技术上可能是正确的。文件在可执行文件之前不是命令，因此无法找到。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-13T15:09:37.663

如果您对上述指南有疑问，请尝试`chmod u+x foo.sh`代替。`chmod +x foo.sh`当其他解决方案没有时，这对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-01T03:56:05.953

好的，这是我的解决方案：在 ~/.bash_aliases 中添加以下内容：

```
# ADDS MY PATH WHEN SET AS ROOT
if [ $(id -u) = "0" ]; then
   export PATH=$PATH:/home/your_user/bin 
fi 
```

瞧！现在您可以使用 sudo 执行您自己的脚本或设置为 ROOT，而无需每次都执行 export PATH=$PATH:/home/your_user/bin。

请注意，添加 PATH 时我需要明确，因为超级用户的 HOME 是 /root

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-09-14T13:43:48.960

关于使用 sudo 时的“找不到命令”，更简单的方法是编辑secure_path。

这里完美描述： [https ://superuser.com/questions/927512/how-to-set-path-for-sudo-commands](https://superuser.com/questions/927512/how-to-set-path-for-sudo-commands)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2022-01-13T09:39:29.997

在 Ubuntu 中，右键单击可执行文件并选择`Properties`，转到`Permissions`选项卡并突出显示`Allow executing file as program` [![在此处输入图像描述](../Images/2b38912f8ddba9d61c1f178573955365.png)](https://i.stack.imgur.com/WhaN8.jpg)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2020-09-15T21:50:27.720

似乎`sudo`找不到命令

要检查 sudo 包是否安装在您的系统上，请键入`sudo`，然后按 Enter 。如果你已经`sudo`安装了系统会显示一个简短的帮助信息，否则你会看到类似`sudo: command not found`

要安装 sudo，请使用 root 帐户运行以下命令之一：

`apt-get install sudo` # 如果你的系统基于apt包管理器

`yum install sudo` # 如果你的系统基于 yum 包管理器

# vb.net - 在 VB.NET 中使用 Oracle 客户端 OO4O

> ID：12996399
> 
> 赞同：2
> 
> 时间：2012-10-21T09:01:18.073
> 
> 标签：vb.net, oracle, oracle-objects-ole

我已将使用 Oracle 客户端 OO4O 的现有 vb6 应用程序转换为 VB.NET。在我修复了许多错误和警告之后，程序现在运行。但是我在无法解决的构建中收到以下警告：

> “无法确定 COM 引用 OO4OAddin 的依赖关系”。

紧随其后的是许多其他警告，例如：

> “处理 COM 引用 OO4OAddin。导入类型时出错：参数引用了不可用的类型库（类型：'_Connect'；参数：'VBInstance'；方法：'get_VBInstance'）”

和

> “运行时封送处理程序不能封送 '_IOraBlob._ReadCPP' 的至少一个参数。因此，此类参数将作为指针传递，并且可能需要不安全的代码来操作”。

我已经扫描了互联网，但没有找到这些错误的匹配项。OO4O DLL 都已注册。解决这些警告需要什么以及它们的确切含义是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:26:49.910

我知道这不是您要寻找的答案，但是 OO4O 已停产，并且没有来自 Oracle 的任何支持。它在 Windows 7 和任何 64 位环境中都不受支持。我在使用 32 位客户端的 Windows 7 中看到了一些与之相关的奇怪错误，安装程序未正确注册它。（在这种情况下，修复注册通常会使其开始工作，但这不是一个可行的长期解决方案。）

对于 .net 应用程序，处理此问题的最佳方法是彻底放弃它并将应用程序移植到 ODP.net。

# java - 在 Java 中有没有办法在 ArrayList 中命名一个 ArrayList？

> ID：12996401
> 
> 赞同：2
> 
> 时间：2012-10-21T09:01:33.597
> 
> 标签：java, arraylist, nested

当我需要一种在 ArrayList 中轻松识别 ArrayList 的方法时，我只需将标识符放在 0 索引中，然后使用循环打印出所有零索引。现在我想知道是否有办法让嵌套的 ArrayLists 有名字。

例如：

```
ListOfLists.add( new ArrayList<String>() );
ListOfLists.get(ListOfLists.size() -1).add("someIdentifierHumansCanRead"); 
```

有什么办法可以`ListOfLists.add(new ArrayList<String>())`做到 `ListOfLists.add(ArrayList someIdentifierHumansCanRead = new ArrayList<String>)`吗？

或者这完全是荒谬的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:03:43.390

您说的是 map ，其中所有数组列表都以字符串为键 - 但您将失去迭代顺序。或者，您可以将键存储在数组列表中，并将数组列表存储在地图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:10:12.787

实现你自己的`ArrayList`类并为它定义一个标识符属性：

```
class NamedList<T> extends ArrayList 
{
    private String name;

    public NamedList(String name) {
        this.name = name;
    }

    // Getters/Setters and other stuff for identifier, etc.
}

ArrayList<NamedList<String>> superList = new ArrayList<NamedList<String>>();
superList.add(new NamedList<String>("babangida")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T09:17:43.797

如果您需要“命名”您的 ArrayList，那么您真的想创建一个有意义的数据结构而不是使用 hacks。毕竟这是面向对象编程：

```
public void MyNamedBean {
    private String name;
    private final List<String> list = new ArrayList<String>();

    public MyNamedBean(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    // If you don't need to change the name, make the field
    // final and remove this method.
    public void setName(String name) {
        this.name = name;
    }

    // It should have a more meaningful name.
    public List<String> getList() {
        return list;
    }
} 
```

更新，基于我对另一个答案的评论：这是一个 OO 设计问题。如果它是一个有名字的列表，它就*不仅仅是*一个列表，这意味着你不应该直接扩展一个 List 实现，而是创建一个有意义的类。如果您在某个时候需要第二个列表或另一个“名称”（例如人类可读的标签）怎么办？您可以阅读有关何时使用继承和何时使用组合的[Liskov 替换原则。](http://en.wikipedia.org/wiki/Liskov_substitution_principle)另请参阅[优先组合而不是继承](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T09:07:03.087

如果你的意思是参考你不能试试这个

```
ArrayList someIdentifierHumansCanRead = new ArrayList<String>();
ListOfLists.add(someIdentifierHumansCanRead) 
```

或者，`Map<String,List<String>>`如果您想使用标识符检索数组列表，则可以使用。

```
map.put("id",new ArrayList<String>()); 
```

映射可以是 HashMap / LinkedHashMap / TreeMap 等。迭代顺序将取决于选择的实现。

# c# - ASP.NET POST 方法问题

> ID：12996402
> 
> 赞同：0
> 
> 时间：2012-10-21T09:01:38.497
> 
> 标签：c#, asp.net, post, back

我最近尝试使用 asp.net POST 方法并提出了一些问题

当我尝试使用 post 方法时，我在问这个问题，它不允许我更改表单的操作，并且每页只允许使用一个服务器端表单。

我所做的是创建自己的表单控件并在页面上使用它

```
Response.Clear();

        StringBuilder sb = new StringBuilder();
        sb.Append("<html>");
        sb.AppendFormat(@"<body onload='document.forms[""form""].submit()'>");
        sb.AppendFormat("<form name='form' action='{0}' method='post'>", "https://test.com.au/Login/Account/Login.aspx");
        sb.AppendFormat("<input type='hidden' name='AP' value='{0}'>", "99");
        // Other params go here
        sb.Append("</form>");
        sb.Append("</body>");
        sb.Append("</html>");

        Response.Write(sb.ToString());

        Response.End(); 
```

导航到目标 URL 后，我尝试使用浏览器后退按钮，但它不起作用。只是我无法导航到后面？

这是asp.net的问题还是我错过了什么？

实际上我正在处理付款方式，它需要在 POST 方法中传递参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:13:41.370

You try to go back, and you go back - but the previous page is automatic make "post back" and so you move to the page you are again.

So the back work, and you actually move back - what there is done is the issue of you.

The correct way is to "render" that form you show there all ready on a part of your page and with the input click of submit, you just submit that form direct, and not make a second page that make an automatic post.

I know the issue that asp.net allow only one form, but there are some alternative to that. You can read this answer that may help you: [Cross-page posting. Is it a good pratice to use PreviousPage in Asp.net?](https://stackoverflow.com/questions/10124030/cross-page-posting-is-it-a-good-pratice-to-use-previouspage-in-asp-net/10124789#10124789)

Now because you say that you make a payment getaway, the better is to fully render a page with the custom submit form, right after the form of asp.net. You actually not use the asp.net form at all and you just render your parametres, like you do above, and you let the user just click on the submit and move the the gate way.

# android - 有没有办法在 Android 上制作自定义 Spanables？

> ID：12996403
> 
> 赞同：3
> 
> 时间：2012-10-21T09:01:49.900
> 
> 标签：android, linkify, spannablestring, spannable

在我的 Android 应用程序中，我有带有链接的文本视图。他们每个人都在切换一个特定的事件（打开浏览器，开始另一个活动，等等......）。为了解决这个问题，我没有找到比这样做更好的解决方案：

```
hi there!, this is <u>a action</u> and this is <b>another action</b>. This third one goes to <a href="http://google.com>Google</a> 
```

然后，在显示 textview 时，我使用 SpannableStringBuilder 将每个链接转换为自定义的 spannable。

我知道这很hacky。这就是为什么我想知道是否还有其他更好的方法？

我有两个想法：

*   是否可以使用自己的编组系统实现自定义跨度？例如自定义可跨匹配标签，如：

    `<div class="foo"></div>`

然后我会自动检测到`FooClickableSpannable`扩展`ClickableSpan``fromHtml()`

*   我可以使用自定义 url 方案来打开我的活动，但如果有其他选择，我不确定如何强制它不显示应用程序选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:16:22.923

> 是否可以使用自己的编组系统实现自定义跨度？

您可以创建自定义子类`CharacterStyle`吗`ClickableSpan`？是的。

不过，我不知道“他们自己的编组系统”是什么意思。

> 我可以使用自定义 url 方案来打开我的活动，但如果有其他选择，我不确定如何强制它不显示应用程序选择器。

好吧，一个真正的自定义方案（例如，`piel://`代替`http://`or `content://`）不太可能提供选择器，因为不太可能有另一种选择。

除此之外，我过去所做的是：

*   用于`Html.fromHtml()`基本转换
*   使用`getSpans()`结果查找所有`URLSpan`对象
*   `URLSpan`在需要时用其他类型的自定义跨度`removeSpan()`替换这些对象`setSpan()`

另一种方法是为`Html.fromHtml()`. 这是我自己的 TODO 列表的较低级别的东西，以创建更可扩展的东西，处理更多的 HTML 结构等。

# c# - 如何在使用反射的私有方法中使用私有枚举？

> ID：12996408
> 
> 赞同：1
> 
> 时间：2012-10-21T09:02:02.490
> 
> 标签：c#, reflection, enums

我有一个内部方法，其中一个输入参数是内部枚举。如何获取枚举值并将其传递给方法？

例子：

```
internal enum MyEnum
{
    One,
    Two,
    Three
}

internal int InternalTest(string test, MyEnum enumTest)
{
    return test.Length;
} 
```

然后通过这样的东西获得：

```
MethodInfo addInternal = typeof(Class1).GetMethod("InternalTest", BindingFlags.Instance | BindingFlags.NonPublic, null, new Type[] { typeof(string), typeof(?????) }, null); 
```

谢谢！

伊瓦尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:09:50.603

例如，如果它在不同的程序集中，则必须按名称获取类型；

```
Type type = assembly.GetType("SomeNamespace.SomeType+SomeNestedType"); 
```

这可能是（来自示例）：

```
Type type = typeof(Class1).Assembly.GetType("Class1+MyEnum"); 
```

一个更有趣的问题是：如何为枚举获取一个*值*（装箱为正确的类型） - 你需要类似的东西：

```
object val = Enum.ToObject(type, 123); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T09:07:30.663

试试`typeof(Class1).GetNestedTypes()`。它应该返回嵌套到 Class1 中的所有类型的列表 - 就像 MyEnum 一样。因此，查看嵌套类型列表，找到 MyEnum 类型并将其传递给 GetMethod。

MSDN 上的 GetNestedTypes 文档：http: [//msdn.microsoft.com/en-us/library/system.type.getnestedtypes (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.type.getnestedtypes(v=vs.100).aspx)

还有一种`GetNestedType()`方法可以接受类型名称和一些 BindingFlags，它允许您按名称搜索特定的嵌套类型。

要使用反射获取枚举值，请使用以下命令：

```
object enumValue = myEnumType.GetField("ValueName", BindingFlags.Static | BindingFlags.Public); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T09:13:53.487

通过调用`GetNestedTypes()`方法获取：

```
Type type = typeof(Program).GetNestedTypes().FirstOrDefault(x => x.IsEnum); 
```

这将返回类型中的（任意）枚举。如果您想通过名称或其他内容找到它，请使用不同的 lambda。

# html - html5 for IE8 或更低

> ID：12996413
> 
> 赞同：1
> 
> 时间：2012-10-21T09:02:35.730
> 
> 标签：html, internet-explorer, cross-browser

我用 HTML5 标签重建了我的网站

它在 FF、Chorme 和 IE9 上运行良好

它不适用于 IE8 或更低版本。

你知道IE8（或更低）是否有任何强调？

这是网站（希伯来语）：

[http://www.switchbook.co.il](http://www.switchbook.co.il)

提前谢谢大家，

罗伊

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T09:04:24.273

使用 HTML5 Shiv 将兼容性添加回旧浏览器。

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T09:05:10.493

将此 javascript 添加到您的站点，它应该可以在 IE 6、7 和 8 [https://github.com/aFarkas/html5shiv中正常工作](https://github.com/aFarkas/html5shiv)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T13:09:41.650

在 head 部分添加以下代码，

```
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<!--[if lt IE 9]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
<![endif]-->
<script src="html5shiv.js"></script> 
```

[您可以从http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)下载 html5shiv

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T09:07:11.517

IE8 及之前的版本无法识别所有 HTML5 元素。您可以欺骗浏览器使用 Javascript 重新定义它们。如果您愿意，还可以添加默认样式。

本教程向您展示如何： [http ://www.communitymx.com/content/article.cfm?cid=8C170](http://www.communitymx.com/content/article.cfm?cid=8C170)

请注意，需要 Javascript 来解决此问题。如果 Javascript 被禁用，这在 IE6 和 IE7 用户中很常见，您将无法使其正常工作。但是，不要太担心。IE6 已经死了，IE7 和 IE8 现在应​​该是了。这些是旧浏览器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-30T11:06:40.783

尝试以下行

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/> 
```

# delphi - JvTreeView 和 JvCheckTreeView 复选框通知

> ID：12996421
> 
> 赞同：2
> 
> 时间：2012-10-21T09:04:05.110
> 
> 标签：delphi, delphi-xe2, jvcl

我已将 a 设置`JvTreeView.CheckBoxes`为`True`，复选框显示并按预期工作，但在 Windows XP SP3 及更低版本上，`OnNodeCheckedChange`不会触发该事件。我用谷歌搜索了一下，[在 JVCL 问题跟踪器上发现了这个问题](http://issuetracker.delphi-jedi.org/view.php?id=5119)，但我无法将它应用到最新的 JVCL 版本（版本 3.47）。有没有人修复复选框事件？

* * *

更新：当我使用空格键更改复选框时会触发该事件，但当我*单击*复选框时不会触发该事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:54:09.487

从[`discussion`](https://chat.stackoverflow.com/rooms/18359/discussion-between-tlama-and-iman-biglari)我们了解到的情况下，我知道您已经使用 RTL 阅读，`JvTreeView`并且我补充说您还应该将[`TVS_RTLREADING`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760013%28v=vs.85%29.aspx#TVS_RTLREADING)样式包含到控件样式中。所以，这里是如何在后期控制样式（你已经使用过）中做到这一点：

```
procedure TForm1.FormShow(Sender: TObject);
begin
  SetWindowLong(JvTreeView1.Handle, GWL_STYLE, GetWindowLong(
    JvTreeView1.Handle, GWL_STYLE) or TVS_RTLREADING);
  SetWindowLong(JvTreeView1.Handle, GWL_EXSTYLE, GetWindowLong(
    JvTreeView1.Handle, GWL_EXSTYLE) or WS_EX_LAYOUTRTL or WS_EX_RIGHT);
end; 
```

控制通知的问题在于坐标映射（看看[`this answer`](https://stackoverflow.com/a/13019312/960757)为什么会发生）。作为对[`JvComCtrls.pas`](http://jvcl.svn.sourceforge.net/viewvc/jvcl/trunk/jvcl/run/JvComCtrls.pas?view=markup&pathrev=13441)源的修复，您可以将第`ScreenToClient`3094 行的点映射替换为以下内容：

```
MapWindowPoints(0, Handle, Point, 1); 
```

在方法的[`JvComCtrls.pas`](http://jvcl.svn.sourceforge.net/viewvc/jvcl/trunk/jvcl/run/JvComCtrls.pas?view=markup&pathrev=13441)单元中，`CNNotify`它看起来像：

```
3071  procedure TJvTreeView.CNNotify(var Msg: TWMNotify);
....  ...
3091    inherited;
3092    if Windows.GetCursorPos(Point) then
3093    begin
3094      MapWindowPoints(0, Handle, Point, 1);
3095      case Msg.NMHdr.code of
....  ... 
```

# testing - 从测试向 Nancy 模块发送参数

> ID：12996422
> 
> 赞同：2
> 
> 时间：2012-10-21T09:04:17.693
> 
> 标签：testing, nancy

我正在尝试使用参数测试模块（以下仅是我试图解决问题的代码）

```
public class StuffModule : NancyModule
{
    public StuffModule() : base("/Stuff")
    {
        Get["/All/"] = parameters =>
                       {
                           string str = parameters.one;
                           return Response.AsJson(str);
                       };
    }
}

private Browser _browser;

[SetUp]
public void SetUp()
{
    var module = new StuffModule(null);

    var mock = new Mock<IRecipeExtractor>();
    var bootstrapper = new ConfigurableBootstrapper(
            with => with.Dependency(mock.Object)
        );

    _browser = new Browser(bootstrapper);
}

[Test]
public void Can_extract_recipe_as_json()
{
    var result = _browser.Get("/Stuff/All/", with =>
    {
        with.HttpRequest();
        with.Query("one", "yes_one");
    });

    Assert.That(result.StatusCode, Is.EqualTo(HttpStatusCode.OK));
} 
```

运行上面的代码时，我的参数变量中什么也没有。一些提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:13:32.413

为了捕获参数，您需要将它们声明为您的部分的一部分，例如`/profile/{username}`这将导致`parameters.username`可访问。

您正在将一个查询字符串值传递到您的测试中，该值可以访问`Request.Query.one`并且您可以确保它具有一个值`Request.Query.one.HasValue`

你可以在这里阅读更多关于它的信息[https://github.com/NancyFx/Nancy/wiki/Defining-routes](https://github.com/NancyFx/Nancy/wiki/Defining-routes)和这里[https://github.com/NancyFx/Nancy/wiki/Testing-your-application](https://github.com/NancyFx/Nancy/wiki/Testing-your-application)

# mongodb - 在 MongoDB 中存储单击链接的用户列表

> ID：12996424
> 
> 赞同：0
> 
> 时间：2012-10-21T09:04:32.590
> 
> 标签：mongodb, nosql

我正在使用 MongoDB 构建一个 Hacker-News 或 Reddit 风格的社交新闻网站。假设我想存储有多少人点击了每个链接，以便将点击次数计入链接的流行度得分。我应该如何组织我的数据？我可以：

A）在每个链接对象中存储单击链接的用户数组。

B) 存储在每个用户对象中单击的链接数组

C) 两者都做

D）做点别的……（但是什么？）

A) 的优点是获得每个链接的点击次数是微不足道的。另一方面，B) 的优点是您可以轻松地向用户显示他们点击的链接的历史记录。当然，C) 可以让你两者都做，但要以复制数据为代价。

那么我应该选择哪种解决方案以获得最佳性能？有没有“正确”的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:34:06.807

由于文档的最大大小，我可能会添加一个新数据库，例如 redis 数据库，其中包含所有这些信息。你可以通过这样做获得性能。我构建的应用程序遇到了这个问题。事实上，在获得很多赞之后，文档会开始加载变慢。

但如果你只需要 mongodb，我可能会将它们添加到另一个集合中。这会给您一些冗余，但该部分完全是关系部分，并且对于面向 noSQL 文档的数据库可能会有些棘手。

为了便于计数，您当然可以在链接文档上保留点赞数。但我不会尝试保留所有点击那里的用户。也不会将其嵌入到用户中。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:16:43.150

通常，NoSQL 数据库鼓励您以冗余方式存储数据。（这是因为，由于它们不支持关系连接，因此需要对模式进行一定程度的非规范化以促进数据的检索。）在这种情况下，正如您所指出的，如果您只将链接存储在用户记录中，反之亦然，执行您需要的所有查询并不容易或高效（您必须基本上扫描集合中的每个文档）。

因此，我认为最好的方法是`C`双向存储数据，以便于检索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:25:37.813

您可以将文档的每次点击与用户和链接一起存储，然后运行查询以获取每个链接的点击次数和他们点击的链接的历史记录。

（关于性能，我不知道它的价值，也许将索引放在用户和链接上）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T09:53:26.197

将数据存储在两个集合中......但仅具有必要的属性。

在您的应用程序中，如果您需要在某个地方访问该数据......最好在一张地图中获取它......

所以如果我是你，我会毫不犹豫地复制数据......

另一方面，我们正在谈论多少链接或用户？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T20:32:45.287

根据你的问题

只需将链接存储在用户对象中，然后使用链接对象中的数字来计算点击次数。

然后在用户对象中的链接数组上设置索引。

这样你就可以

*   获取用户对象中的所有点击链接。
*   使用链接对象获取点击次数。
*   使用用户对象中的链接索引快速找到谁点击了链接

索引数组示例：[MongoDB 如何索引数组？](https://stackoverflow.com/questions/4059126/how-does-mongodb-index-arrays)

# php - mysqli_stmt_get_result 替代 php 5.2.6

> ID：12996427
> 
> 赞同：3
> 
> 时间：2012-10-21T09:04:42.387
> 
> 标签：php, mysql, mysqli, php-5.2

我不是 php 专家，我开发了一个查询 mysql 数据库的小服务。

但是我用 php 5.4 开发，然后发现我的虚拟主机计划有 5.2.6，所以我在一些未定义的函数上遇到了一些问题。

具体来说，在这种情况下，如何解决 > 5.3 上可用的 mysqli_stmt_get_result 未定义函数？这是代码：

```
 $stmt = mysqli_prepare($con,$db_query);

  if($stmt) {

     mysqli_stmt_bind_param($stmt,'ss',$after,$lang);
     mysqli_stmt_execute($stmt);
     $result = mysqli_stmt_get_result($stmt); // <-- getting undefined error here !!!

     $updated = array();
     $deleted = array();

     while($row = mysqli_fetch_assoc($result)) {

        if($row['status']==1) {
           array_push($updated,$row);
        } else {
           $cardName=$row['cardName'];
           $cardStatus=$row['status'];
           $cardId=$row['cardId'];
           $language=$row['language'];
           array_push($deleted,array(
                    'cardName'=>$cardName,
                                    'status'=>$cardStatus,
                                    'cardId'=>$cardId,
                                    'language'=>$language
                               )
           );
        }
     }

     $response = array(
        'cards'=>array(
           'updated'=>$updated,
           'deleted'=>$deleted
        )
     );

     $json = json_encode($response);
     mysqli_close($con);
     echo $json;

  } 
```

关键是我使用的是准备好的语句，由于我缺乏 php 知识，我发现没有其他方法可以在不重写整个脚本的情况下解决问题。

我想你们中的一些人可能有一个简单易行的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T02:25:17.773

有类似的问题。顺便说一句 - mysqlnd 在 5.3 中可用，但必须在 5.4 中编译，默认情况下它在那里。

就我而言，我能够保留大部分代码并通过替换以下代码使其工作

```
$result = mysqli_stmt_get_result($stmt); // <-- doesn't work without mysqlnd
while($row = mysqli_fetch_assoc($result)) {
    $cardName=$row['cardName'];
    ...
} 
```

和

```
$stmt->bind_result($dbCardId, $dbCardName);  // <-- one param for each field returned
while ($stmt->fetch()) {
    $cardName = $dbCardName;
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T12:51:14.357

该`mysqli_stmt_get_result`函数仅适用于 PHP 5.3 或更高版本。您的 PHP 5.2.x 版本不存在它（顺便说一句，它不再受支持）。

另一种方法是使用[`mysqli_stmt_bind_result`](http://php.net/mysqli-stmt.bind-result)变量绑定。

在您的具体示例中，这甚至具有您不需要将数组成员分配给变量的好处，因为您可以直接绑定变量。

引入该`mysqli_stmt_get_result`函数是因为[有人认为](http://blog.ulf-wendel.de/2007/php-mysqli_stmt_get_result/)这会妨碍您并且获取数组会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-02T19:30:45.770

如果您处于不允许添加 mysqlnd 的情况，这将显示如何在没有 mysqli_stmt_get_result() 的情况下将数据放入关联数组。 [Mysqli - 将结果绑定到数组](https://stackoverflow.com/questions/24363755/mysqli-bind-results-to-an-array)

# jquery - 如何处理 jQuery 中动态创建的锚标签的点击事件？

> ID：12996429
> 
> 赞同：2
> 
> 时间：2012-10-21T09:05:13.603
> 
> 标签：jquery, jquery-selectors

我是 jQuery 的新手，所以这个问题对你们来说可能看起来很幼稚。但请在这里帮帮我。

我正在动态创建许多具有不同标题的锚标记，并将不同的单击事件处理程序分配给那些过于动态的锚标记。

所有锚标记都使用不同的标题完美创建，但问题是它们的事件处理程序都与最后创建的锚标记的事件处理程序相同。因此，当我单击任何链接时，它们都会转到同一页面，即单击最后一个链接时的页面。

这是代码

```
var title;
var node;

for(var i = 0; i < nodes.length; i++){    
  node = nodes[i];
  title = node.getTitle();

  jQuery("#displayNodeDetails")
  .append(jQuery('<a></a>').attr({ href:'#' })
  .html(title).click(function(){
    EPCM.getSAPTop().LSAPI.AFPPlugin.service.navigate(node);
  }));
} 
```

这里的“displayNodeDetails”是划分。我不明白为什么每次循环运行时“节点”的值都在变化时，我的所有链接都具有相同的事件处理程序，我可以确认，因为我的代码正在创建四个链接：“用户管理员”、“系统管理员” ”、“内容管理”和“协作”，但所有链接都指向与“协作”相同的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:14:20.523

这是因为它`node`总是指向最后一个节点。

`click`循环完成后调用处理程序。因此，`node`即使在其他锚点的处理函数中，也会指向最后一个元素。

您需要`node`在创建它时将当前的值传递给处理程序。

```
jQuery("#displayNodeDetails").append(jQuery('').attr({href:'#'}).html(title).click((function(node){
  return function() { EPCM.getSAPTop().LSAPI.AFPPlugin.service.navigate(node); };
})(node));} 
```

这样，`click`处理程序得到一个函数，`node`该函数通过函数调用传递给它正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:30:05.317

以下是我将如何重写您的代码以（希望）使其工作：

```
// This is a quicker way of defining your loop.
for (node in nodes) {
  // Setting the variable inside the loop so it doesn't pollute the global
  // namespace unnecessarily.
  var title = node.getTitle();

  // Firstly build the link as a jQuery element
  var link = jQuery('<a>' + title + '</a>').attr('href', '#');
  // Then append it to the div
  jQuery('#displayNodeDetails').append(link);

  // Then set the click event callback on it inside a closure
  link.click((function(node) {
    return function() {
      EPCM.getSAPTop().LSAPI.AFPPlugin.service.navigate(node);
    };
  })(node));
} 
```

# python - 如何让 pip/setuptools 了解我的包在 ./src 中？

> ID：12996430
> 
> 赞同：4
> 
> 时间：2012-10-21T09:05:27.703
> 
> 标签：python, pip, setuptools, setup.py

我在 Github 中有一个布局如下的库：

```
README
setup.py
src/
   somelibrary.py 
```

注意：我无法更改布局，但可以更改 setup.py。

我希望能够从 requirements.txt 中引用这个库，以便人们可以`pip install -r requirements.txt`自动安装它。所以我在需求中添加了这样一行：

```
-e git+http://blablabla/blabla#egg=somelibrary 
```

这将克隆 ./src/somelibrary 下的存储库，然后`setup.py develop`在其上运行，这只会在 site-packages 下添加指向 ./src/somelibrary 的链接。不幸的是，由于该库实际上位于 ./src/somelibrary/ **src**下，因此 python 似乎无法正确看到该库。

我错过了什么？我想它一定是我没有正确使用的 setup.py 选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T10:57:17.837

你可以把它放在设置函数中：

```
package_dir = {'': 'src'}, 
```

将基本包目录映射到“src”。

# jquery - Jquery 有时无法与 ie8 一起使用

> ID：12996431
> 
> 赞同：0
> 
> 时间：2012-10-21T09:05:28.970
> 
> 标签：jquery, ajax, internet-explorer-8

我有这段代码可以从服务器请求中获取价值

```
var itemPackage = ddlPackages.value;

$.ajax({
    type: 'GET',
    data: ({ itemPacking: itemPackage }),
    url: '/List/ItemCurrentQty/',

    contentType: "application/json; charset=utf-8",
    dataType: "json",
    context: this,
    timeout: 5000,

    success: function (data) {
        $('#OutQty').data('tTextBox').maxValue = data[0].CurrentQty;
        $('#CurrStockQty').text(data[0].CurrentQty);

    }
}); 
```

文本没有用 ie8 更新，但是用 google chrom 没问题， `$('#CurrStockQty')`请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:57:12.910

您的成功函数可能在从服务器返回数据之前触发。您是否尝试过对成功保持警惕？

```
 success: function (data) {
       alert(data[0].CurrentQty);
    } 
```

如果是这种情况，则通过向 ajax async 添加参数来使 ajax 调用同步：false；

# wordpress - is_super_admin() 调用在 wordpress 中产生致命错误

> ID：12996433
> 
> 赞同：0
> 
> 时间：2012-10-21T09:05:35.953
> 
> 标签：wordpress

我有一个 wordpress 网络。我试图在我的插件中使用 is_super_admin() 函数，但 wordpress 给出以下错误：

```
Fatal error: Call to undefined function wp_get_current_user() in /PathToWordpresDir/wp-includes/capabilities.php on line 1373 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:23:23.310

我相信这是`WordPress`. 要解决此问题，请在您的插件/主题中尝试以下操作：

```
require_once(realpath(dirname(__FILE__) . '/../../../')."/wp-includes/pluggable.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-09T10:05:01.860

更好的答案是将您正在做的任何事情包装在一个函数中，并将其挂接到 plugins_loaded 或 init 钩子上。（参见 wp-settings.php 文件）

**例子：**

```
add_action('init','do_stuff');
function do_stuff(){
  if (is_super_admin()) {
    //do stuff
  }
} 
```

请参阅：[https ://stackoverflow.com/a/6127607/794071](https://stackoverflow.com/a/6127607/794071)

# php - 两个提交按钮和 1 个表单不传递值

> ID：12996436
> 
> 赞同：1
> 
> 时间：2012-10-21T09:05:47.617
> 
> 标签：php, html, forms, onclick, submit

我有一个 php 文件，它有一个表单和 2 个提交按钮，单击 1 个按钮它必须传递从下拉列表中选择的值。它没有将值传递给接受 POST 数据的 php 文件。但是，如果我只有 1 个按钮和相同的表单，这可以正常工作。请在下面找到我的代码。

```
<html>
<head>
<title>Invoice Printing</title>

<script type="text/javascript">
function showlink() 
{
window.open('invoiceprint2.php');
} 

function showlink3() 
{
window.open('invoiceprint3.php');
}   

</script>

</head>
<body>
<table width="100%"  border="0" cellpadding="0" cellspacing="0" bgcolor="#026465">
  <tr>
    <td><div align="center"><span class="style1"> Amogh Gases Private Ltd <br></span>
<center class="style5">INVOICE PRINTING</center>
<br><br>
<br>

</td>
  </tr>
</table>

<!--------------VALIDATIONS ------------------->

<br>
<br>

<form name="form1" method="post" action="" target="_blank">
<table width='40%' height='39'  border='0' cellpadding='2' cellspacing='0'     align='center'>
<tr>
<td class='sty1'><div align='left'>Please select Invoice No. to PRINT: <br>
<br>
You can choose more than one invoice number from the options, by holding CTRL key on     your keyboard and select the numbers.</div></td>
<td>
<?php
    $con = mysql_connect("localhost","tech1","te!@#");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("tech1", $con);

$result = mysql_query("SELECT Invno FROM INVHDR", $con);
echo "<select multiple='multiple' size='20' name='invnos[]'>";
while($nt=mysql_fetch_assoc($result))
{//Array or records stored in $nt
echo "<option value=$nt[Invno]>$nt[Invno]</option>";
/* Option values are added by looping through the array */
}
echo "</select>";// Closing of list box

mysql_close($con);
?>

</td>
</tr>
</table><br>

<center><input name="PRINT" type="button" value="PRINT Invoice to Laser Printer!"     onClick='showlink();' /> &nbsp;&nbsp;&nbsp;  <input name="PRINT2" type="button" value="PRINT Invoice to Dotmatrix Printer !" onClick='showlink3();'/>

</form>

<br><br><br><br>
<a href='frameinvoice.php' target='_parent'><input name='Add' type='button'     value='Add'></a>  &nbsp;&nbsp;  &nbsp;&nbsp; <a href='invoice-edit.php' target='_parent'>  <input name='Edit' type='button' value='Edit !'></a> &nbsp;&nbsp; <a href='invoice-cancel.php' target='_parent'><input name='Edit' type='button' value='Cancel !'></a> &nbsp;&nbsp; <a href='index.htm' target='_parent'><input name='Close' type='button' value='CLOSE !'></a><br></center>
</center>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:24:15.020

```
 <html>
            <head>
                <title>Invoice Printing</title>

                <script type="text/javascript">

                    function postData(someValueToEvalute)
                    {

                        switch(someValueToEvalute){

                            case "1":{
                                    document.forms[0].action = 'invoiceprint2.php'
                                    break;
                                }
                            case "2":{
                                    document.forms[0].action = 'invoiceprint3.php'
                                    break;
                                }
                            default: { alert('fail');}

                        }
                        document.forms[0].submit();
                    }

                </script>

            </head>
            <body>
                <table width="100%"  border="0" cellpadding="0" cellspacing="0" bgcolor="#026465">
                    <tr>
                        <td><div align="center"><span class="style1"> Amogh Gases Private Ltd <br></span>
                                <center class="style5">INVOICE PRINTING</center>
                                <br><br>
                                <br>

                                </td>
                                </tr>
                                </table>

                                <!--------------VALIDATIONS ------------------->

                                <br>
                                <br>

                                <form name="form1" method="post" action="" target="_blank">

                                <!-- PHP CODE REMOVED!!!!! --> 
                                    <center>
                                        <input name="PRINT" type="button" value="PRINT Invoice to Laser Printer!"     onClick='postData("1");' /> &nbsp;&nbsp;&nbsp;  
                                        <input name="PRINT2" type="button" value="PRINT Invoice to Dotmatrix Printer !" onClick='postData("2");'/>

                                </form>

                                <br><br><br><br>
                                <a href='frameinvoice.php' target='_parent'><input name='Add' type='button'     value='Add'></a>  &nbsp;&nbsp;  &nbsp;&nbsp; <a href='invoice-edit.php' target='_parent'>  <input name='Edit' type='button' value='Edit !'></a> &nbsp;&nbsp; <a href='invoice-cancel.php' target='_parent'><input name='Edit' type='button' value='Cancel !'></a> &nbsp;&nbsp; <a href='index.htm' target='_parent'><input name='Close' type='button' value='CLOSE !'></a><br></center>
                                </center>

                                </body>
                                </html> 
```

# android - 如何打开 Youtube 应用程序主活动

> ID：12996440
> 
> 赞同：1
> 
> 时间：2012-10-21T09:06:16.543
> 
> 标签：android

我正在尝试使用以下代码打开 YouTube 应用的 MainActivity。

```
 Intent intent = new Intent(Intent.ACTION_MAIN);
             intent.setPackage("com.google.android.youtube");
             intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
             startActivity(intent); 
```

问题是，当 Youtube 应用程序更新到最新版本时，上面的代码可以正常工作，但当用户拥有旧版本的 Youtube 时会失败。

如何在不关心用户拥有什么版本的情况下打开 YouTube 主要活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:51:08.687

您可以使用 ACTION_VIEW 做一个简单的意图：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("your_youtube_link"));
startActivity(intent) 
```

如果您的链接是 youtube 链接，则本机选择器应询问您要使用的应用程序：您的浏览器之一，或 youtube 应用程序（如果可用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T05:10:00.347

我找到了解决方案：

```
Intent i = app.getPackageManager().getLaunchIntentForPackage("com.google.android.youtube");
if (i != null) 
    app.startActivity(i); 
```

# android - 从android应用程序发送电子邮件的源代码

> ID：12996444
> 
> 赞同：0
> 
> 时间：2012-10-21T09:06:45.667
> 
> 标签：android, email

我想在我即将推出的 android 应用程序中提供电子邮件功能。你能告诉我在哪里可以获得一些关于如何从 android 应用程序发送电子邮件的好的源代码示例。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:09:37.610

K9 mail 是一个优秀的开源、全功能的安卓电子邮件客户端。它支持 POP3、IMAP 和 Exchange 帐户。如果您研究它的来源，您会发现制作 android 电子邮件应用程序所需的一切。它托管在 Github 上：

[https://github.com/k9mail/k-9](https://github.com/k9mail/k-9)

这是 google play store 上的免费应用程序：

[https://play.google.com/store/apps/details?id=com.fsck.k9&hl=en](https://play.google.com/store/apps/details?id=com.fsck.k9&hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T12:11:55.173

如果您只是希望用户向您发送邮件，您可以使用此代码。它使用 emailIntent

```
//letting the user write a email to us
            Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
            emailIntent.setType("plain/text");
            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                    new String[] { "abc@xyz.com" });
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                    "subject of mail");
            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                    "Insert your mail content");
            MainMenuActivity.this.startActivity(Intent.createChooser(
                    emailIntent, "Send mail...")); 
```

# django - Django - 应用过滤器时无法访问对象属性

> ID：12996448
> 
> 赞同：3
> 
> 时间：2012-10-21T09:07:29.343
> 
> 标签：django, attributes, django-queryset, attributeerror

我对 Django 有以下问题：

我的模型定义如下：

```
from django.db import models

class SettingSection(models.Model):
    section = models.CharField(max_length=20)
    def __unicode__(self):
        return self.section

class SettingParam(models.Model):
    section = models.ForeignKey(SettingSection)
    param = models.CharField(max_length=20, unique=True)
    description = models.CharField(max_length=200, blank=True)
    def __unicode__(self):
        return self.param

class SettingPreset(models.Model):
    preset = models.CharField(max_length=20, unique=True)
    current = models.BooleanField()
    def __unicode__(self):
        return self.preset

class SettingValue(models.Model):
    preset = models.ForeignKey(SettingPreset)
    param = models.ForeignKey(SettingParam)
    value = models.CharField(max_length=100, blank=True)
    def __unicode__(self):
        return self.value 
```

尝试访问 SettingValue 对象的任何属性时出现以下错误：

```
>>> from settings.models import *
>>> preset = SettingPreset.objects.get(current=True)
>>> for section in SettingSection.objects.all():
...     for param in section.settingparam_set.all():
...             v = SettingValue.objects.filter(preset=preset, param=param)
...             print v.id, v.value
... 
Traceback (most recent call last):
  File "<console>", line 4, in <module>
AttributeError: 'QuerySet' object has no attribute 'id' 
```

但是，属性（“id”和“value”）似乎存在：

```
>>> for section in SettingSection.objects.all():
...     for param in section.settingparam_set.all():
...             v = SettingValue.objects.filter(preset=preset, param=param)
...             print v.values()
... 
[{'value': u'192.168.1.29', 'id': 1, 'preset_id': 1, 'param_id': 1}]
[{'value': u'en1', 'id': 2, 'preset_id': 1, 'param_id': 2}]
[{'value': u'0', 'id': 3, 'preset_id': 1, 'param_id': 3}]
[{'value': u'', 'id': 4, 'preset_id': 1, 'param_id': 4}]
[{'value': u'', 'id': 5, 'preset_id': 1, 'param_id': 5}] 
```

此外，我可以访问任何属性，而无需对我的对象应用过滤器：

```
>>> for v in SettingValue.objects.all():
...     print v.id, v.value
... 
1 192.168.1.29
2 en1
3 0
4 
5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:13:45.110

The variable v is a queryset, and you cannot access your models attributes via the queryset. Therefore you should try this to access the first element in your queryset:

```
for param in section.settingparam_set.all():
    v = SettingValue.objects.filter(preset=preset, param=param)
    print v[0].id, v[0].value #access first element in query set 
```

Or do this to loop over the items in your queryset:

```
for param in section.settingparam_set.all():
    v = SettingValue.objects.filter(preset=preset, param=param)
    for item in v:
        print item.id, item.value 
```

# elasticsearch - 返回用户的顶级标签列表

> ID：12996450
> 
> 赞同：1
> 
> 时间：2012-10-21T09:07:38.750
> 
> 标签：elasticsearch, tire

我正在尝试使用 ElasticSearch 和 Tire 检索用户的顶级标签列表。

我看过[这篇文章](http://www.elasticsearch.org/blog/2011/05/13/data-visualization-with-elasticsearch-and-protovis.html)，但在我的情况下它并不完全有效。

我需要按 user_id 过滤，并且目标是根本不返回命中。我还没有找到一种方法让它与轮胎一起工作。

我尝试了以下方法：

```
Tire.search 'bookmarks' do |s|
  s.query { all }
  s.facet 'tags', facet_filter: { term: { user_id: 1 } } do
    terms :tags, all_terms: true
  end
end 
```

感谢您的帮助，谢谢。

**编辑：**使用上面的代码，返回以下输出。

```
=> #<Tire::Search::Search:0x007fd4b0bed110 @indices=["bookmarks"], 
   @types=[], @options={}, @path="/bookmarks/_search", 
   @query=#<Tire::Search::Query:0x007fd4b0bec5d0 @value={:match_all=>{}}>, 
   @facets={"tags"=>{:terms=>{:field=>:tags, :size=>10, :all_terms=>true}, 
   :facet_filter=>{:term=>{:user_id=>1}}}}> 
```

**编辑2：**我已经完成了我试图用以下代码做的事情：

```
# Public: Returns an array of hashes, which includes the user's top
# tags and a number of items in those tags.
#
# Format follows:
#   [{'term' => 'Some Tag', 'count' => 123}, {'term' => 'Another Tag', 'count' => 321}]
#
def self.top_tag_count(user_id, number_of_tags=10)
  top_tags = tire.search search_type: 'count' do |s|
    s.query { all }
    s.filter :term, user_id: [user_id]
    s.facet 'tags', global: true do
      terms :tags, size: number_of_tags
    end
  end
  top_tags.facets['tags']['terms']
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:41:20.150

面向方面的轮胎[集成测试](https://github.com/karmi/tire/blob/master/test/integration/facets_test.rb)包含许多可能事物的示例。

你似乎走对了——你没有描述输出和你想看到的东西。

# jquery - 在剑道 ui 中打开模式的弹出中心

> ID：12996452
> 
> 赞同：1
> 
> 时间：2012-10-21T09:07:42.400
> 
> 标签：jquery, kendo-ui

我的页面中有 iframe，在 iframe 中有一个按钮，应该在页面中心打开窗口。

```
$(function () {
        var offset = 0;
        var windowWidth = $(document).width();
        var parametrs = 'siteId=@ViewBag.siteId&widgetId=@Model.WidgetId';
        var popupWindow = $(".popupWindow").each(function () {
            var popupWindows = $(this).kendoWindow({
                iframe: true,
                width: $(document).width() - 25,
                height: 300,
                resizable: false,
                draggable: false,
                actions: ["Minimize", "Maximize", "Close"],
                visible: false,
                content: '@Url.Action("Index", "Editor")?' + parametrs,

            }).data('kendoWindow');

            var parent = $(this).parent();
            parent.css("top", parent.offset().top + offset);
            offset += parent.outerHeight();
            popupWindows.open();

        });
        $("#container").sortable();
    }); 
```

我使用剑道 ui 窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:08:48.560

`popupWindows.center()`将您的弹出窗口居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T13:25:57.100

```
$(function () {
    var offset = 0;
    var windowWidth = $(document).width();
    var parametrs = 'siteId=@ViewBag.siteId&widgetId=@Model.WidgetId';
    var popupWindow = $(".popupWindow").each(function () {
        var popupWindows = $(this).kendoWindow({
            iframe: true,
            width: $(document).width() - 25,
            height: 300,
            resizable: false,
            draggable: false,
            actions: ["Minimize", "Maximize", "Close"],
            **open : function() { this.center(); }**
            visible: false,
            content: '@Url.Action("Index", "Editor")?' + parametrs,

        }).data('kendoWindow');

        var parent = $(this).parent();
        parent.css("top", parent.offset().top + offset);
        offset += parent.outerHeight();
        popupWindows.open();

    });
    $("#container").sortable();
}); 
```

添加`open`每次打开弹出窗口时触发的功能。在此功能`center()`中，每次打开它时都将弹出窗口放置在页面的中心。

或者您可以简单地使用语句`popupWindows.center()`后的`popupWindows.open()`语句。

# .htaccess - htaccess 重写。访问 .gif 时提供 .php 文件

> ID：12996453
> 
> 赞同：1
> 
> 时间：2012-10-21T09:07:42.787
> 
> 标签：.htaccess, mod-rewrite, dynamic-image-generation

我有一个动态图像，我希望它看起来像一个静态图像。

例如图像的当前 url 是

```
http://site.co.uk/media/dynamicImage.php 
```

我希望使用访问图像

```
http://site.co.uk/media/dynamicImage.gif 
```

访问 dynamicImage.gif 时，如何使用 .htaccess 来提供 dynamicImage.php 文件？

请注意，我不想按照此示例重写文件夹中的所有文件：[Apache - 使用 .htaccess 将图像重写为 php 文件](https://stackoverflow.com/questions/12925567/apache-rewrite-images-to-php-file-with-htaccess)，我只想重写我指定的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:00:16.450

尝试将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^/?media/image.gif$ /media/image.php [L] 
```

您可以根据`RewriteRules`需要为每个特定图像创建任意数量的图像。这使得当有人请求时`http://site.co.uk/media/image.gif`，他们实际上是在为他们提供内容`/media/image.php`。

如果您需要将这些全部保留在`media`目录中，例如您在媒体目录的 htaccess 文件中已经有一些规则，您可以将规则修改为如下所示：

```
RewriteRule ^image.gif$ image.php [L] 
```

# .htaccess - .Htaccess 通过删除特定单词来重定向各种文件夹和子文件夹中的所有文件

> ID：12996456
> 
> 赞同：3
> 
> 时间：2012-10-21T09:08:12.600
> 
> 标签：.htaccess, url, url-rewriting

我有一个图片库，我想知道是否可以从各种文件夹和子文件夹中每个文件的文件名中去掉 normal_ 这个词，我有大约 500 个文件夹和超过 50,000 个图像文件。

我试图得到 -

[http://www.photos.com/gallery/albums/1/normal_image1.jpg](http://www.photos.com/gallery/albums/1/normal_image1.jpg)到[http://www.photos.com/gallery/albums/1/image1.jpg](http://www.photos.com/gallery/albums/1/image1.jpg)

[http://www.photos.com/gallery/albums/events/10/normal_photo2.jpg](http://www.photos.com/gallery/albums/events/10/normal_photo2.jpg)到[http://www.photos.com/gallery/albums/events/10/photo2.jpg](http://www.photos.com/gallery/albums/events/10/photo2.jpg)

所以基本上我想重定向 301 所有没有单词 normal 的文件。我不确定如何递归地处理其中文件的所有文件夹和子文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:57:34.817

很简单。将`.htaccess`文件放在站点的根目录中，内容如下：

```
RewriteEngine On
RewriteRule ^(.*)normal_(.*)$ /$1$2 [L,R=301] 
```

把它放在根目录下，所有的子文件夹都会继承这个文件中的规则。

# jquery - 如何根据记录总数使用jquery动态添加列

> ID：12996460
> 
> 赞同：0
> 
> 时间：2012-10-21T09:08:34.440
> 
> 标签：jquery, dynamically-generated

我想渲染两行一列的html表格。如果来自 HttpHandler 的记录总数大于 2 ，则额外的记录将插入到第一列的后面。先感谢您。

将呈现 Html 表：

```
RealName    RealName    RealName
Name1       Name3       Name5
Name2       Name4 
```

这是我的js片段：

```
function fillSuccess(rsp) {
 var str = "<table width='100%'><tr><td>RealName</td></tr>";
 for (var i = 0; i < rsp.length; i++) {
     if (i % 2 == 0) {
       // how to implement here 
     }
     else { 
     str += "<tr ><td>" + rsp[i].RealName + "</td>";
     }
 }
 str += "</tr></table>";
 $('#divTitle').append(str); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:36:18.890

这应该适用于奇数或偶数计数：

```
var rsp     = new Array(1,2,3,4,5,6,7);

var count   = rsp.length;
var cols    = Math.ceil(count / 2);

var value    = '<table>';
value       += '<tr>';

for (var i = 0; i < cols; ++i) {
    value       += '<th>RealName</th>';
}
value       += '</tr>';

for (var i = 0; i < 2; ++i) {
    value       += '<tr>';

    for (var j = 0 + i; j < count; j = j+2) {
        value       += '<td>' + j + '--' + rsp[j] + '</td>';
    }
    value       += '</tr>';
} 
```

**演示**

[http://jsfiddle.net/ZmHSY/](http://jsfiddle.net/ZmHSY/)

# php - 如何从以减号开头的字符串中删除所有单词？

> ID：12996461
> 
> 赞同：0
> 
> 时间：2012-10-21T09:08:39.417
> 
> 标签：php

我试过这个，但它似乎只适用于字母数字字符？

```
\ba\w*\b  <- works
\b-\w*\b  <- doesn't work 
```

如何从以连字符开头的字符串中删除所有单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:16:29.183

preg_replace("/-\w+/", "", "-000 aaa -bbb ccc -ddd -eee")

gives: aaa ccc

* * *

**EDITED 3 times:** As noticed in the comments - be it a stretch of the original question or not - all the suggested variants didn't work with -xx-yy-zz or qq-ww-ee, or -äüö. This one :

```
preg_replace("/(\s?)(?<=\s|^)(-)\S*\s*/", "$1", "-000 aaa -bbb ccc -ddd -eee-eee-eee -äüö fff-qqq-rrr äüö2 äüö-äüö-3 -ggg"); 
```

... produced the following:

```
 aaa ccc fff-qqq-rrr äüö2 äüö-äüö-3 
```

Limitations apply: accented characters are acceptable; multibyte ones would certainly be a stretch.

# php - PHP - 访问外部对象的属性和方法

> ID：12996465
> 
> 赞同：2
> 
> 时间：2012-10-21T09:09:10.137
> 
> 标签：php

我是 php 新手，我想知道为什么这不起作用：

```
class A {
      private $containigObject;
      public function __construct($containigObject){
        $this->containigObject = $containigObject;
      }
      public function functionThatAccessOutsideObject(){
        //...
        $this->containgObject->b = 2;
        //...
      }
}

class B {
      public $b = 1;
      public function someFunction(){
        //...
        $a = new A($this);
        $a->functionThatAccessOutsideObject();
        //...
      }
}

$b = new B();
$b->someFunction(); 
```

我正在尝试在 A 类中使用 B 类的属性和方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:55:39.623

```
class A {
  private $**containigObject**;
  public function __construct($containigObject){
    $this->containigObject = $containigObject;
  }
  public function functionThatAccessOutsideObject(){
    //...
    $this->**containgObject**->b = 2;
    //...
  } 
```

}

# objective-c - 我们如何将 double 或 float 重新解释为 NSUInteger 以创建哈希？

> ID：12996466
> 
> 赞同：2
> 
> 时间：2012-10-21T09:09:10.310
> 
> 标签：objective-c, xcode, reinterpret-cast

这是我的 isEqual 和哈希自定义运算符

```
- (BOOL)isEqual:(id)object;
{
    BGSearchParameter * theOther = (BGSearchParameter *)object;

    BOOL isTheOtherEqual;
    isTheOtherEqual = isTheOtherEqual && [self.Location isEqual:theOther.Location];
    isTheOtherEqual = isTheOtherEqual && [self.keyword isEqual:theOther.keyword];
    isTheOtherEqual = isTheOtherEqual && (self.Distance == theOther.Distance);
    isTheOtherEqual = isTheOtherEqual && (self.SortByWhat == theOther.SortByWhat);
    isTheOtherEqual = isTheOtherEqual && (self.startFrom == theOther.startFrom);
    isTheOtherEqual = isTheOtherEqual && (self.numberOfIDstoGrab == theOther.numberOfIDstoGrab);

    return isTheOtherEqual;
}
- (NSUInteger)hash
{
    NSUInteger returnValue=0;
    returnValue ^= self.Location.hash;
    returnValue ^= self.keyword.hash;

    return returnValue;
} 
```

那个做这项工作。但是，假设我想将距离和 startfrom 合并到哈希中。

我想我会简单地添加：

```
returnValue ^= self.Distance; 
```

这是一个错误，因为它不兼容。

那么我应该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T14:05:33.063

我最终把数字变成了 NSNumber 并得到了哈希：

```
 returnValue ^= @(self.Distance).hash;
   returnValue ^= @(self.SortByWhat).hash;
   returnValue ^= @(self.startFrom).hash;
   returnValue ^= @(self.numberOfIDstoGrab).hash; 
```

马丁的回答很好。但是，结果应该是一样的，我不想实现另一个复杂的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T10:13:49.853

这是`CFNumber`/`NSNumber`用作`float`和`double`值的散列值，例如参见 Mac OS X 10.7.5 Source 中的[ForFoundationOnly.h](http://opensource.apple.com/source/CF/CF-635.21/ForFoundationOnly.h)。

```
#define HASHFACTOR 2654435761U

CF_INLINE CFHashCode _CFHashDouble(double d) {
    double dInt;
    if (d < 0) d = -d;
    dInt = floor(d+0.5);
    CFHashCode integralHash = HASHFACTOR * (CFHashCode)fmod(dInt, (double)ULONG_MAX);
    return (CFHashCode)(integralHash + (CFHashCode)((d - dInt) * ULONG_MAX));
} 
```

`CFHashCode`定义为

```
typedef unsigned long CFHashCode; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-27T02:51:21.663

试试这个：

```
static NSUInteger doubleHash(float value) {
    return *(NSUInteger *)&value;//gets bits
} 
```

注意转换为浮动。它会降低精度，但 sizeof(float)==sizeof(NSUInteger)。

# magento - 可配置子产品的属性和库存

> ID：12996469
> 
> 赞同：3
> 
> 时间：2012-10-21T09:09:26.967
> 
> 标签：magento

我正在尝试显示与可配置产品相​​关的简单产品的库存状态列表。这工作正常，除非当相关属性“大小”不显示时数组的第一个实例。

```
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>
<?php $instock = "Next Day"; ?>
<?php $outofstock = "4 to 7 Days"; ?>
<?php $conf = Mage::getModel('catalog/product_type_configurable')->setProduct($_product); ?>
<?php $col = $conf->getUsedProductCollection()->addAttributeToSelect('Size')->addFilterByRequiredOptions(); ?>
<ul>
<?php foreach($col as $simple_product){
    $qty = intval(Mage::getModel('cataloginventory/stock_item')->loadByProduct($simple_product)->getQty());   
    $size = Mage::getModel('catalog/product')->load($simple_product->getId())->getAttributeText('Size');
?>
  <li>
      <?php 
      if ( $qty >= 1 ) 
         {echo $qty, " ",$size," ",$instock;} 
      else 
         {echo $qty, " ",$size," ",$outofstock;}  ?>
  </li>
<?php } ?>
</ul> 
```

结果集如下所示：

```
99 Next Day
99 9 Next Day
99 8.5 Next Day
99 8 Next Day
99 7.5 Next Day
0 7 4 to 7 Days
99 12 Next Day
99 11.5 Next Day
99 11 Next Day
99 10.5 Next Day
99 10 Next Day 
```

关于我错了什么以及如何显示第一个属性的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:21:03.077

解决您的问题比了解导致它的原因要容易得多！但是让我按正确的顺序来解决它：

1.  首先，两者`addAttributeToSelect`实际上`getAttributeText`都使用`attribute_code`， not `attribute_value`（我相信你有**size**，而不是**Size**）。

2.  所以 Magento 第一次在`$product->getData('Size')`里面做`getAttributeText`，它就返回了`null`。

3.  当您将**Size**传递给`getAttributeText`函数时，**大小**代码将替换为特定属性实例的**Size 。**情况如何？非常简单：在方法链的最深层，Magento 向 DB 发出下一个请求：

    ```
    SELECT `eav_attribute`.* FROM `eav_attribute` WHERE (`eav_attribute`.`attribute_code`='Size') AND (entity_type_id = :entity_type_id); 
    ```

    而且，如果您将表格**整理**为*不区分大小写*(*_ci)，则无论实际`attribute_code`为“大小”，它都会获得该值。[您可以在官方文章](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)和[SO](https://stackoverflow.com/questions/3936967/mysql-case-insensitive-select)上阅读有关整理的更多信息。

4.  所以在第一个`getAttributeText('Size')`函数之后，每个连续的`$product->getData('Size')`都会返回正确的值。

现在回到你的脚本。除了**size-Size**问题之外，您还有一些小问题，但最好处理它们以便您更好地理解 Magento 和 php：

1.  首先，`load`在循环中使用函数确实是一种不好的做法——尤其是连续两次，尤其是产品对象。如果您的可配置产品有很多简单点，您将获得不必要的内存和时间损失。最好将您需要的所有数据添加到您的`collection`.，然后在循环中使用加载的产品。顺便说一句，您已经使用函数将**大小**添加到您的集合中`addAttributeToSelect`。**因此，解决您的问题的正确方法是**：

    ```
    $col = $conf->getUsedProductCollection()
        ->addAttributeToSelect('size')
        ->joinField(
        'qty',
        'cataloginventory/stock_item',
        'qty',
        'product_id=entity_id',
        '{{table}}.stock_id=1',
        'left'
    )->addFilterByRequiredOptions();
    foreach($col as $simple_product){
        $qty = (int)$simple_product->getQty();
        $size = $simple_product->getAttributeText('size');
        // do your logic
    } 
    ```

2.  我想提到的第二个问题，因为您在`.phtml`模板文件中，所以您需要遵循 Magento 模板标准 - 为您的循环和案例使用关闭标签：

    ```
    <?php foreach($col as $simple_product):?>
        <li>
        <?php if ( $qty >= 1 ):?>
              <!-- some html -->
        <?php else:?>
              <!-- some html -->
        <?php endif:?>
        </li>
    <?php endforeach;?> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T09:16:44.970

这将在版本中工作。1.7.0.2 你不必自己输入AttributeText，它会自动收集它们。

```
<?php if($_product->getTypeId() == "configurable"):
     $ids = $_product->getTypeInstance()->getUsedProductIds();  ?>
     <?php $instock = "Next Day"; ?>
    <?php $outofstock = "4 to 7 Days"; ?>
    <ul>
    <?php foreach ($ids as $id) :
    $simpleproduct = Mage::getModel('catalog/product')->load($id); 
    $name = $simpleproduct->getName();
    $qty = (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($simpleproduct)->getQty();?>
    <li><?php echo $simpleproduct->getName()." - ".(int)Mage::getModel('cataloginventory/stock_item')
    ->loadByProduct($simpleproduct)->getQty();?>
     </li>   
     <li><?php 
     if ( $qty >= 1 ) 
             {echo $qty, " ",$name," ",$instock;} 
          else 
             {echo $qty, " ",$name," ",$outofstock;}
             ?>
     </li> 
     <?php endforeach;    ?>
     </ul>
    <?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T13:17:38.057

您确定`Size`在第一个产品上设置了该属性吗？我已经使用`shirt_size`作为我的属性测试了您的代码，并且我的结果按预期返回。

# ios - 是否可以在不运行我自己的服务器的情况下将 opengraph 发布到用户的墙/feed/ticker 上？

> ID：12996473
> 
> 赞同：0
> 
> 时间：2012-10-21T09:09:45.990
> 
> 标签：ios, facebook

我是 facebook 开发的新手，我仍在试图弄清楚事情是如何为 facebook 开发工作的。
所以我的应用程序，它是为 iOS 设计的，想`action post`在我用户的 Facebook 页面/feed/ticker 上发布一个。
我希望应用程序发布`action`各种类型的应用程序可以执行的各种可能操作。
我想明白。如果应用程序只是发布到 facebook，并且 facebook 具有我对我的 facebook 应用程序所做的所有定义，这意味着它知道在哪里链接 ACTION，它知道在哪里链接 OBJECT。当我的用户在用户设备上通过应用程序发帖时，将提供 facebook 所需的额外内容......为什么我需要运行服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:15:11.410

这就是 Open Graph Protocol 的定义方式 (ogp.me)。对象作为网页存在，让用户拥有更丰富的网络体验。当一个非移动用户看到他的股票上的动作时，他必须有办法与您的对象进行交互。

> Open Graph 协议使任何网页都可以成为社交图中的丰富对象。例如，这在 Facebook 上用于允许任何网页具有与 Facebook 上的任何其他对象相同的功能
> 
> 要将您的网页变成图形对象，您需要将基本元数据添加到您的页面。我们基于 RDFa 协议的初始版本，这意味着您将在您的网页中放置额外的标签。

# php - 基于数组的PHP路由，如何将*匹配到任何东西

> ID：12996485
> 
> 赞同：3
> 
> 时间：2012-10-21T09:11:09.773
> 
> 标签：php, regex, arrays, url-routing

我有一个包含所有路由/url及其路径的数组，

```
Example : $route = array(
'/' => 'files/index.php',
'pages' => 'files/pages.php',
'pages/add' => 'files/page-add.php',
'posts/*' => 'files/posts.php',
) 
```

使用 array_key_exists() 我检查数组中是否存在路由，如果是，则加载其路径，如果找到直接匹配则它可以工作。

`posts/*`每当向 发出请求时，我都希望它与路径匹配`posts/anything, posts/view/10`，而我不能使用 array_key_exists() 来做到这一点。

你们对我应该使用哪种方法有任何想法/建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:16:43.263

结合使用两种策略：

*   坚持使用您的“路由阵列”进行直接匹配，这是一种性能良好的安全解决方案。
*   对于没有直接匹配的剩余请求，请尝试其他策略，例如基于正则表达式的模式匹配，通常使用 phps`preg_match()`函数。这为您提供了描述模式的无限可能，尽管它显然比寻找直接匹配要慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:19:36.543

您可以使用`array_key_exists()`，但它失败了，然后尝试`*`在密钥中检测到 a 的路线。

```
if (array_key_exists($url, $route)) {
   // Serve normally.
} else {

    $route = array_filter($route, function($route) { 
                     if (substr($route, -1) != "*") {
                        return FALSE;
                     }

                     return (substr($url, 0, strlen($route)) != substr($route, 0, -1));
               });

    if ($route) {
       // Serve normally.
       $route = end($route);

    } else {
       // Route wasn't matched.
    }

} 
```

# scala - Scala参数类型解释

> ID：12996486
> 
> 赞同：4
> 
> 时间：2012-10-21T09:11:12.317
> 
> 标签：scala, playframework

我对 Scala 和 Play Framework 还很陌生，以前从未见过以下参数类型。

```
def IsAuthenticated(f: => String => Request[AnyContent] => Result) 
```

让我困惑的是这个`f: =>`部分。如果那`=>`不存在，我会将其视为将 a 映射`String`到 a`Request`然后映射到 a 的函数`Result`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T09:48:26.657

通常，`=> A`是 A 类型的按名称参数。这意味着该参数仅在函数体中使用时（以及每次）时才被评估。因此，`f`是一个名称参数，其类型是一个函数，该函数接受 a`String`并将函数从 a 返回`Request[AnyContent]`到 a `Result`。以下是如何评估按名称参数的示例：

```
scala> def twice[A](a: =>A) = (a,a)
twice: [A](a: => A)(A, A)

scala> var i = 0
i: Int = 0

scala> twice {
     |   i += 1
     |   i
     | }
res0: (Int, Int) = (1,2) 
```

# ruby-on-rails - 子调用 create 时 Mongoid belongs_to 不持久

> ID：12996487
> 
> 赞同：0
> 
> 时间：2012-10-21T09:11:19.357
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

Ruby noobie 在这里。

在为我的数据库播种时，`Haiku`-> belongs_to ->的关联`User`没有通过 Mongoid 正确持久。`Haiku`没有正确存储`user_id`在 Mongo 中。

### 不工作

```
#seeds.rb

1.upto(100) do
  user = User.create! name: 'foo'
  haiku = Haiku.create! content: 'hello world', user: user
  user.add_point({point_type: :tweet, value: 1, haiku: haiku})
end 
```

### 有用吗

```
1.upto(100) do
  user = User.create! name: 'foo'
  haiku = Haiku.new content: 'hello world'
  haiku.user = user
  haiku.save!
  user.add_point({point_type: :tweet, value: 1, haiku: haiku})
end 
```

在挖掘源代码后，我只能假设`process_attributes`没有正确设置关系。

为什么它在前面部分不起作用，但在后面部分起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:53:56.227

通过关联试试这个

```
1.upto(100) do
  user = User.create! name: 'foo'
  haiku = user.haiku.create! content: 'hello world'
  user.add_point({point_type: :tweet, value: 1, haiku: haiku})
end 
```

假设您的所有验证和回调都已成功通过，上述内容应该可以工作

顺便说一句，以确保您的代码的第一部分有效

确保做

> user.id.to_s

所以第一段代码应该是这样的

```
1.upto(100) do
  user = User.create! name: 'foo'
  haiku = Haiku.create! content: 'hello world', user_id: user.id.to_s
  user.add_point({point_type: :tweet, value: 1, haiku: haiku})
end 
```

**user.id.to_s**将为您提供**bson 哈希**，但 user.id 为您提供 BSON 对象 mongoid 在内部为提供给它的哈希创建一个 bson 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:55:12.230

您通常应该使用 rake 任务将示例数据发布到您的数据库。种子用于您的应用运行*所需的**初始*数据。

 *但是，我会这样做：

```
1.upto(100) do
  user = User.create! name: 'foo'
  haiku = Haiku.create! content: 'hello world', user_id: user.id
  user.add_point({point_type: :tweet, value: 1, haiku: haiku})
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:49:06.400

批量分配正在尝试设置用户，这应该可以工作。

它不工作。

原因是因为`attr_accessible`没有调用供用户参考。此宏需要用于字段和引用。*

# iphone - 自动布局按钮位置

> ID：12996488
> 
> 赞同：1
> 
> 时间：2012-10-21T09:11:22.427
> 
> 标签：iphone, objective-c, ios, interface-builder, autolayout

我对新的自动布局功能有一个简单的问题。我有一个可以在 iphone 4、4s 和 5 上运行的应用程序。我需要在屏幕上放置一个按钮，并且该按钮需要在 4 英寸屏幕上距离按钮 302 像素，在 3.5 英寸时距离按钮 282 像素（都在视网膜上说话解析度）。我该如何做到这一点？

我找到了一些教程，但似乎没有一个涵盖我所追求的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:17:00.440

如果您构建的版本低于 iOS 6.0，那么如果您使用自动布局，应用程序将会崩溃。它仅适用于 iOS 6。

也就是说，我在支持旧版本 iOS 的同时如何处理不同的屏幕高度：

你做一个宏

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

并且可以像这样检查。

```
if( IS_IPHONE_5 )
{ 
    //position the button 302 px from bottom of the screen
}
else
{ 
    //position the button 282 pixels from the bottom of the screen
} 
```

[这个问题帮助了我](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices?lq=1)

# visual-studio-2010 - 如何将内部版本与 Microsoft 测试管理器 (MTM) 2010 中的测试计划相关联？

> ID：12996489
> 
> 赞同：4
> 
> 时间：2012-10-21T09:11:37.823
> 
> 标签：visual-studio-2010, build, tfsbuild, microsoft-test-manager

我是使用 Microsoft 测试工具的新手，请帮助：

尝试从 MTM 运行测试用例时，我收到以下警告消息：

> 无法创建自动化测试运行。需要与活动测试计划关联的构建才能提交自动化测试运行

背景资料：

*   我在 VS 2010 中创建了一个构建定义
*   我创建了一个带有代理的构建服务主机：控制器和代理
*   当我打开 MTM>Testing Center>Properties Build Configurations 时，我可以看到在“Filter for Builds:”中选择了我的构建定义

问题：在 MTM>Testing Center>Properties Build Configurations > " **Build in use:"**设置为**None**，当我打开 Assign Build 部分时，我没有可用的构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T15:31:56.243

就像一个指针，以防有人发现这个（未答复的）帖子：

“要从 Microsoft 测试管理器获得自动化测试，您需要将包含自动化组件的构建与测试计划相关联。这会告诉 MTM 在哪里可以找到自动化测试的代码。然后您还需要一个 MTM 将与之通信的测试环境并运行测试。

以下文章介绍了如何设置测试计划以运行自动化测试：http: [//msdn.microsoft.com/en-us/library/dd553270.aspx](http://msdn.microsoft.com/en-us/library/dd553270.aspx) "

来自[msdn 中的这篇文章。](http://social.msdn.microsoft.com/Forums/en-US/e7605625-847e-493f-b3c0-799d2eb88021/getting-the-following-error-while-running-an-automated-test-case-using-a-test-manager-cannot-create?forum=vstsstart)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:13:19.247

我认为这是您在 TFS 中的权限的问题。您需要对`View builds`您在`Build definition`.

要求您的管理员授予您所需的权限，或者您是否可以自己完成：

1.  打开`Visual Studio 2010`
2.  转到`Team Explorer`--> `Builds`--> 并右键单击所需的构建
3.  选择并授予属于MTM 中的测试计划`Security`的用户适当的权限。`Owner`

# jquery - 使用滚动更改背景图像

> ID：12996491
> 
> 赞同：0
> 
> 时间：2012-10-21T09:12:00.717
> 
> 标签：jquery, image, background, scroll

我有一堆应该适合整个浏览器的图像，当您滚动时，它会更改为下一张图片，依此类推。我是新手，我真的不知道我在做什么。我一直在看这个：[创建网站背景图像，单击时更改，](https://stackoverflow.com/questions/10544270/create-website-background-image-that-changes-on-a-click)这基本上是我想要的，但不是单击更改，而是滚动更改。

不知道是不是同一个概念……有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:16:40.923

您可以使用**$(window).scrollTop()**确定当前滚动量，使用**$(body).css('background-image', '/i/image.jpg')**实际更改背景图像。

```
$(window).scroll(function() {
    var image_url = '/i/image1.jpg'
    if ($(window).scrollTop() > 800) {
        image_url = '/i/image2.jpg';
    }
    $(body).css('background-image', "url('" + image_url + "')");
}); 
```

这只是一个概念。您应该将所有图像放入“数组”（如您的示例中）并确定要动态应用的图像。

# java - InetAddress 类中 isReachable 的替代方案

> ID：12996492
> 
> 赞同：3
> 
> 时间：2012-10-21T09:12:01.133
> 
> 标签：java, networking, icmp

我想检查是否存在活动的互联网连接。为此，我[发现](https://stackoverflow.com/questions/2448666/how-to-do-a-true-java-ping-from-windows)我可以使用 InetAddress 类中的 isReachable() 方法来做到这一点。不幸的是（正如[JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html)所建议的和这篇文章所[证实](https://stackoverflow.com/questions/4779367/problem-with-isreachable-in-inetaddress-class)的那样），这仅适用于 root 权限，这无法解决我的问题。

当我运行以下代码时，isReachable 始终为 false：

```
InetAddress address = InetAddress.getByName("173.194.35.3"); //e.g. google
boolean isReachable = address.isReachable(2000); //ms 
```

因此，我正在寻找一个很好的替代方法来检查活动的 Internet 连接，而无需 root 权限。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:03:16.977

你知道[ICMP](http://www.lincoln.edu/math/rmyrick/ComputerNetworks/InetReference/81.htm)协议吗？我相信这就是 ping 在内部使用的。看看[这个例子](http://timofeybasanov.blogspot.co.at/2007/06/writing-java-icmp-ping-for-windows.html)。（尽管这是 Windows 的解决方案）

另外阅读这篇[文章](https://stackoverflow.com/questions/1402005/how-to-check-if-internet-connection-is-present-in-java)以获得关于这个主题的高级讨论！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:28:50.660

Javadoc 根本没有这么说，您链接的帖子也没有“验证”它。它*实际上*说的是“如果可以获得特权，典型的实现将使用 ICMP ECHO REQUEST，否则它将尝试在目标主机的端口 7（Echo）上建立 TCP 连接。”。

换句话说，您根本不需要特权来调用此方法。您只需要 ICMP 模式的权限*。*如果您没有它们（或者您在 Windows 上，因为没有使用 ICMP 实现），它使用 TCP 到端口 7。请注意，它将连接成功或连接拒绝视为“可达”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T18:24:07.710

它可能很旧，但我遇到了同样的问题，在阅读了这些答案后，我发现了这个惊人的库[icmp 4j](http://www.icmp4j.org/)并解决了我所有的问题。[您可以在此处](http://sourceforge.net/projects/icmp4j/)下载源代码并在您的项目中使用类似这样的东西

```
// request
final IcmpPingRequest request = IcmpPingUtil.createIcmpPingRequest ();
request.setHost ("192.168.0.101");

// repeat a few times
for (int count = 1; count <= 4; count ++) {

// delegate
final IcmpPingResponse response = IcmpPingUtil.executePingRequest (request);

// log
final String formattedResponse = IcmpPingUtil.formatResponse (response);
System.out.println (formattedResponse);

// rest
Thread.sleep (1000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-09T04:22:40.290

## InetAddress.isReachable() - 无需`root`!

您只需为`java`可执行文件分配发送 ICMP 数据包/等的能力。

您按以下方式执行此操作；*（以root身份运行）*

> setcap cap_net_raw+eip $JAVA_HOME/bin/java

你有它......你的java应用程序可以ping而不是root！

* * *

如果您收到以下错误；

> ./java：加载共享库时出错：libjli.so：无法打开共享对象文件：没有这样的文件或目录

你可以用类似的东西来解决这个问题；*（需要以root身份完成，确认`/usr/lib64`对您来说是正确的）*

> ln -s $JAVA_HOME/lib/amd64/jli/libjli.so /usr/lib64/libjli.so

请注意：不幸的是，只是做`export LD_LIBRARY_PATH=$JAVA_HOME/lib/amd64/jli`是行不通的。

# objective-c - 为什么 plist 中的字符串在 UITableView 中的显示顺序不正确？

> ID：12996493
> 
> 赞同：1
> 
> 时间：2012-10-21T09:12:06.190
> 
> 标签：objective-c, ios, uitableview

我的应用程序中有一个 plist，其中包含 Root Dictionary 中的行，当我`NSMutableArray`通过以下代码添加这些行时：

```
NSString * item = [badgeDict objectForKey:[NSString stringWithFormat:@"item%i",indexPath.row+1]];
[badgeArray addObject:item]; 
```

它给了我加扰的排序数组......我希望它的顺序相同......记住那些行的键称为（item1，item2，item3......，等等）......

应该如何修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:43:44.203

在tableView: cellForRowAtIndexPath: 中可以通过这种方式访问​​对象

```
NSArray *keys = [[badgeDict allKeys] sortedArrayUsingSelector:@selector(compare:)];
id value = [badgeDict objectForKey:[keys objectAtIndex:indexPath.row]]; 
```

如果您的 plist 很小，这很好，否则在您的成员变量中保存键顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T11:26:00.543

是的，因为您的代码在 cellForRowAtIndexPath 中，所以它会被打乱。

UITableViewCells 被缓存。由于您没有显示相关的周围代码，因此您很可能正在重新显示缓存的单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T10:43:24.220

我建议您将此代码移动到 viewDidLoad 方法而不是 cellForRowAtIndexPath，这可能是您调用了 reloadRowsAtIndexPaths 之类的方法，如果您的 badgeArray 是实例变量，这将破坏顺序，而且您可能无法完全填充整个数组，因为并非所有行都是立即显示在屏幕上。

您的方法似乎没有效率。如果您的 badgeDict 可能会更改，您可以尝试实施通知。只需将您的 UIViewController 作为观察者添加到 badgeDict 更改并在发生此类事件时重新加载 badgeArray。

为此：

*   在你的 viewController 的 viewDidLoad 添加：

    [[NSNotificationCenter defaultCenter] addObserver:self 选择器:@selector(refreshBadgeArray:) name:@"BadgeChanged" object:nil];

*   在您的 viewController 的 dealloc 中添加：

    [[NSNotificationCenter defaultCenter] removeObserver:self];

*   在更改 badgeDict 的地方：

    [[NSNotificationCenter defaultCenter] postNotificationName:@"BadgeChanged" object:self];

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T10:31:31.000

考虑`tableView:cellForRowAtIndexPath:`在需要新单元格时调用：第一次填充`UITableView`时以及滚动时出现单元格时。因此，以这种方法填充数据源并不是一个好习惯。

我建议您将数据填充到`viewDidLoad`. 如果`UITableView`需要以某种方式刷新包含的信息，则创建一个方法来执行此操作`viewDidLoad`并从刷新发生的位置调用它（例如按下按钮，拉动刷新时......）。

# objective-c - 在为 UIView 设置动画时阻止串行调度队列

> ID：12996495
> 
> 赞同：3
> 
> 时间：2012-10-21T09:12:12.487
> 
> 标签：objective-c, ios, grand-central-dispatch

有没有办法手动阻止队列任务？我想在调度队列任务中使用 UIView 动画，但是这个任务应该只有在动画完成后才能完成。

```
dispatch_queue_t myCustomQueue;
myCustomQueue = dispatch_queue_create("com.example.MyCustomQueue", NULL);

dispatch_async(myCustomQueue, ^{
    [UIView animateWithDuration:myDuration
                          delay:0.0f
                        options:0
                     animations:^{
                         // my changes here
                     }
                     completion:nil];
});

dispatch_async(myCustomQueue, ^{
    // if the animation from the task below is still running, this task should wait until it is finished...
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:36:32.643

使用暂停队列`dispatch_suspend`，然后`dispatch_resume`在动画完成块中恢复（使用）。这将导致所有提交到队列的块在开始之前等待动画完成。请注意，当您暂停该队列时，已经在该队列上运行的块将继续运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T09:19:20.810

1.  不要在主线程以外的任何东西上调用 UIView 动画
2.  如果您想在动画完成后执行某些操作，请将其放入动画的完成块中。这就是它的用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-12T20:16:25.777

**Swift 3 中的问题**

我使用以下代码在 Swift 3 的主线程上执行。动画有效，但时间已关闭：

```
// Animation works, timing is not right due to async
DispatchQueue.main.async {
    // animation code
} 
```

**解决方案**

更新斯文对 Swift 3 的回答后，我可以使用以下代码让我的动画正常运行：

```
DispatchQueue.main.suspend()
// animation code goes here. 
DispatchQueue.main.resume() 
```

# jquery - 所有页面的 jQuery 移动全局弹出窗口

> ID：12996496
> 
> 赞同：9
> 
> 时间：2012-10-21T09:12:27.093
> 
> 标签：jquery, jquery-mobile

如何在一个 html 文件中为所有页面提供全局（通用）弹出窗口？？？
我试试这个。但不工作...

```
<div data-role="page" id="home"></div>
<div data-role="page" id="news"></div>
<div data-role="page" id="details"></div>
<div data-role="popup" id="settings" data-corners="false" data-theme="none" data-shadow="false" data-tolerance="0,0"></div> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-21T13:00:42.733

## 如果您使用的是 jQuery Mobile 1.4.1

[文档](http://demos.jquerymobile.com/1.4.1/popup-outside-multipage/#&ui-state=dialog)说，如果您将其声明为 body 元素的直接子元素，则可以在多个页面上重用相同的弹出窗口。然后它可以出现在文档的任何页面上：

```
<div id="popup-outside-page" data-theme="a">
    <!-- This popup has its theme explicitly defined via data-theme="a"
         because it has no parent from which to automatically inherit
         its theme -->
    <ul data-role="listview">
        <li>Global Menu</li>
        <li><a href="#demo-intro">Intro Page</a></li>
        <li><a href="#other-page">Other Page</a></li>
        <li><a href="#third-page">Third Page</a></li>
    </ul>
</div>
<div id="other-page" data-role="page" data-url="other-page">
    <div data-role="header">
        <a href="#popup-outside-page" data-rel="popup">Menu</a>
        <h1>Another Page</h1>
    </div>
    <div role="main" class="ui-content">
        <p>This is another page that can be reached using the links in the global menu.</p>
    </div>
</div>
<div id="third-page" data-role="page" data-url="third-page">
    <div data-role="header">
        <a href="#popup-outside-page" data-rel="popup">Menu</a>
        <h1>Third Page</h1>
    </div>
    <div role="main" class="ui-content">
        <p>This is a third page that can be reached using the links in the global menu.</p>
    </div>
</div> 
```

如果您在任何页面之外定义弹出窗口，那么您必须注意自己实例化弹出窗口小部件。您可以早在 DOMReady 时执行此操作，因为弹出窗口不在任何页面上：

```
// Instantiate the popup on DOMReady, and enhance its contents
$( function() {
    $( "#popup-outside-page" ).enhanceWithin().popup();
}); 
```

如果您希望从一组链接中打开弹出窗口，那么您还必须手动处理，因为通过**data-rel="popup"**进行的自动处理仅限于活动页面上的弹出窗口。

## 如果您使用的是旧版本的 jQuery Mobile

简短的回答是你不能。该[文件](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html)指出：

> 弹出 div 必须嵌套在与链接相同的页面内

因此，您必须将弹出窗口复制并粘贴到您希望它出现的每个页面，这听起来不是一个好的解决方案。

当我需要一些类似于全局弹出窗口的东西时，我通常会使用一个[对话框](http://jquerymobile.com/demos/1.2.0/docs/pages/dialog/index.html)，它可以从任何页面打开。

对话框本身具有与页面相同的结构：

```
<div id="diag" data-role="dialog">
    <div data-role="header" data-theme="d">
        <h1>Info</h1>
    </div>
    <div data-role="content" data-theme="c">
        <h1>Thank you for your time!</h1>
        <a data-role="button" data-rel="back">Ok</a>
    </div>
</div> 
```

您可以以编程方式打开它：

```
$.mobile.changePage("#diag"); 
```

或者像任何其他 jQuery 移动页面一样单击按钮：

```
<a href="#diag" data-role="button" data-rel="dialog" data-theme="a">Open dialog</a> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-11T08:58:52.463

看看这个回复

[https://stackoverflow.com/a/12092465/591254](https://stackoverflow.com/a/12092465/591254)

有一个插件可以帮助您，同时 jquery 移动团队添加对在使用它们的页面之外定义的弹出窗口的支持。请注意，现场演示不起作用，但在本地并替换 jquery js 时它可以工作。

这是 jqm 请求：

[https://github.com/jquery/jquery-mobile/issues/4565](https://github.com/jquery/jquery-mobile/issues/4565)

显然它可以在 jqm 1.4 中添加

# emacs - Emacs 获取 Perl 文件中的函数列表

> ID：12996499
> 
> 赞同：1
> 
> 时间：2012-10-21T09:12:55.980
> 
> 标签：emacs

我想自动生成一个 HTML 文档，其中包含一个 Perl 文件的文档。要构建它，我需要一个列表函数，包含在文件中。每个函数都有格式“^sub name”。是否有任何函数可以获取所有函数名称？或者怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:11:22.270

Note that extracting all the function names (together with their location in the buffer) is already done by *imenu*. So you may prefer to use that. Just call `imenu--make-index-alist` and then look at the result in `imenu--index-alist`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T11:20:01.850

You can use elisp search functions:

```
(defun find-perl-sub ()
  (let ((subs))
    (with-current-buffer "my-perl-file.pl"
      (goto-char (point-min))
      (while (re-search-forward "^[[:blank:]]*sub[[:blank:]]+\\([a-zA-Z0-9_]+\\)" nil t)
        (push (match-string-no-properties 1) subs)))
    subs
    )) 
```

# struts - Struts (1.2.9) 动作映射错误：无法创建路径“/foo”的动作实例

> ID：12996500
> 
> 赞同：0
> 
> 时间：2012-10-21T09:13:05.170
> 
> 标签：struts, action, struts-config

我收到此错误：无法创建路径“/foopath”的操作实例

**什么时候**

```
-FORM-
package com.company.appname.web.forms;

public class fooForm extends ActionForm {
...

-ACTION-
package com.company.appname.web.actions

public class FooAction extends Action

public ActionForward execute(...) {

    return mapping.findForward("success");

}

**struts-config.xml**

    <form-bean
        name="fooform"
        type="com.company.appname.web.forms.fooForm"/>
    ... 
    <action
        path="/foo"
        type="com.company.appname.web.actions.FooAction"
        name="fooform"
        scope="session"
        input="/WEB-INF/foo.jsp">                        // it tried just 'foo.do' and 'foo.jsp' as well
        <forward name="success" path="/WEB-INF/foo.jsp"/> 
    </action>

**tiles-defs.xml**
    <definition name="Foo.def" extends="reporting.common">
        <put name="body" value="foo.jsp"/>
    </definition> 
```

**和**

```
https://localhost:8080/appname/foo.do 
```

**投掷**

```
HTTP Status 500 - No action instance for path /foo could be created 
```

问题是我有另一个动作（完全相似，由其他人编写）并且它有效:)

**问题**

```
How can I find out what is the real problem ? Is there any solution which shows more related this error ? 
```

*评论：*

我不能做比我上面提到的更多类似的动作，而事实是应用程序的构建系统过于复杂。应用程序日志级别是跟踪并且不显示任何有趣的内容。

我在这里先向您的帮助表示感谢。

CS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:46:20.337

问题已经解决了。

问题是，项目文件夹下有两个应用程序：*用户*和*管理*部分

尽管*'com.company.appname.web.actions.FooAction'*与其他操作完全相似，例如*'com.company.appname.web.actions.SimiliarAction'*

但是*“SimilarAction”*在另一个目录中，并且 ant build 负责根据两种应用程序生成最终*的“struts-config.xml” 。*

# java - 如何在框架中显示图像？

> ID：12996501
> 
> 赞同：4
> 
> 时间：2012-10-21T09:13:21.890
> 
> 标签：java, image, swing, user-interface, jframe

我正在编写一个 gui，我想使用嵌入一些图片，但在将它嵌入到我的主程序之前，我编写了该代码来测试它：

```
 public class guikopie extends javax.swing.JFrame{
        public guikopie() {
            a = new javax.swing.JLabel();
            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
            a.setIcon(new javax.swing.ImageIcon("C:\\Users\\Public\\Pictures\\Sample Pictures\\Tulpen.jpg"));       
            add(a);//here i add it to the jlabel
            pack();
        }

        public static void main(String args[]){
            java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                    new guikopie().setVisible(true);
                }
            });
        }

        private javax.swing.JLabel a;
    } 
```

我的问题是：为什么这段代码不显示图片？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T09:43:05.463

我认为人们可能会因为我重复这一点而讨厌我：P：

*   不要扩展 JFrame 类
*   类名以大写字母开头，即`Guikopie`

还取决于背景的用途，即是否将徽标添加到特定位置，`JPanel`然后使用 a`JLabel`很好，但是，如果将其用作背景，则不是；因为它会随着更多组件的添加而移动，因此我们不应该将背景添加为组件，而是在组件上绘制背景。

至于你的问题：

> 我的问题是：为什么这段代码不显示图片？

您的代码非常适合我，因此您的图片位置一定不正确。

我做了一个简短的例子，展示了如何添加`Image`到`JPanel`背景然后添加`JPanel`到`JFrame`，它还包括`ImgUtils`调整图片大小的类：

![在此处输入图像描述](../Images/c0c740bf9d1f351da1cb6beccf9d8499.png)

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class JFrameWithPicture {

    public JFrameWithPicture() throws MalformedURLException, IOException {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new JFrameWithPicture();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });
    }

    private void initComponents() throws MalformedURLException, IOException {
        JFrame frame = new JFrame("Frame with JPanel and background");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final Image background = ImageUtils.scaleImage(300, 300, ImageIO.read(new URL("http://images2.layoutsparks.com/1/98191/naruto-14-red-design.jpg")));
        final Dimension jpanelDimensions = new Dimension(new ImageIcon(background).getIconWidth(), new ImageIcon(background).getIconHeight());

        frame.add(new JPanel() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);
                grphcs.drawImage(background, 0, 0, this);
            }

            @Override
            public Dimension getPreferredSize() {
                return jpanelDimensions;
            }
        });

        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);
    }
}

class ImageUtils {

    public static BufferedImage scaleImage(int width, int height, String filename) {
        BufferedImage bi;
        try {
            ImageIcon ii = new ImageIcon(filename);
            bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
            Graphics2D g2d = (Graphics2D) bi.createGraphics();
            g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
            g2d.drawImage(ii.getImage(), 0, 0, width, height, null);
        } catch (Exception e) {
            return null;
        }
        return bi;
    }

    static Image scaleImage(int width, int height, BufferedImage filename) {
        BufferedImage bi;
        try {
            bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
            Graphics2D g2d = (Graphics2D) bi.createGraphics();
            g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
            g2d.drawImage(filename, 0, 0, width, height, null);
        } catch (Exception e) {
            return null;
        }
        return bi;
    }
} 
```

或者，您可能想使用[Image#getScaledInstance(int width,int height,int hints)](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29)调整大小，但这[有其危险](http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)，主要问题是：

> `Image.getScaledInstance()`不返回完成的缩放图像。当使用图像像素时，它会将大部分缩放工作留给以后使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:21:15.750

```
import javax.swing.*;
public class guikopie extends javax.swing.JFrame{
    public guikopie() {
        a = new javax.swing.JLabel();
        JPanel panel = new JPanel();
        panel.add(a);
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        a.setIcon(new javax.swing.ImageIcon("C:\\Users\\Public\\Pictures\\Sample Pictures\\Tulips.jpg"));
        getContentPane().add(panel);
        pack();
    }

    public static void main(String args[]){
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new guikopie().setVisible(true);
            }
        });
    }

    private javax.swing.JLabel a;
} 
```

检查此代码。你的路径可能是错误的。

# iphone - 'Receiver ( ) has no segue with identifier 'infoseg'

> ID：12996504
> 
> 赞同：2
> 
> 时间：2012-10-21T09:13:36.377
> 
> 标签：iphone, ios, uistoryboardsegue

Recently my app is crashing when the app switch to the next ViewController.

this is the `prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`

```
 ShowInfoViewController *secondViewController = (ShowInfoViewController *)segue.destinationViewController; 
```

this is how i call the method :

```
 [self performSegueWithIdentifier:@"infoseg" sender:self]; 
```

in the interface builder i have a segue with the same identifier as well.

any idea?

this is the log's Print :

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Receiver (<ViewController: 0x1dda97d0>) has no segue with identifier 'infoseg'' 
```

*** First throw call stack: (0x322982a3 0x31a6a97f 0x34fdbca9 0x1972f 0x1a7fb 0x57d73 0x56ff3 0x5a2f3 0x372c2ef5 0x372029f1 0x3720290d 0x355115df 0x35510ccb 0x35539133 0x321de74d 0x35539593 0x3549d15d 0x3226d683 0x3226cee9 0x3226bcb7 0x321deebd 0x321ded49 0x32f472eb 0x34e24301 0x17427 0x173c8) libc++abi.dylib: terminate called throwing an exception

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:08:44.827

如果您的目标视图控制器位于导航控制器中，您可能想看看这个问题：[How to set the delegate with a storyboard](https://stackoverflow.com/questions/8041237/how-to-set-the-delegate-with-a-storyboard)。

编辑：从错误看来，您尝试执行的 segue 未附加到您开始的视图控制器。尝试删除序列并将其从您的代码所在的视图控制器拖到界面构建器内部的 ShowInfoViewController 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T21:29:16.633

有同样的问题。意识到我正在 AppDelegate.m 和 Storyboard 中设置根控制器。删除 AppDelegate.m 中的代码并修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-05T14:42:49.510

我有一个类似的问题 - 原来我在故事板上的 segue 标识符上有一个尾随空格。

例如。'SequeIdentifier' - 当然这在 XCode 中很难看到

# c# - tfs builder: the process template could not be loaded

> ID：12996506
> 
> 赞同：0
> 
> 时间：2012-10-21T09:13:42.880
> 
> 标签：c#, visual-studio-2010, build

I'm trying to open an existing process template in visual studio tfs,

but get the following error:

![enter image description here](../Images/e78bbe677efc7aef55b251db46f4b5e8.png)

How can I solve this?

**Update** these are my Build Controller's properties:

![enter image description here](../Images/c842b7dc68fe8defe85b02c49b19face.png)

these are one of his Agents' properties:

![enter image description here](../Images/e90934789c9cb6d1d70377d85d602fcb.png)

# java - 退货不正确？

> ID：12996516
> 
> 赞同：1
> 
> 时间：2012-10-21T09:14:23.123
> 
> 标签：java, sql, jdbc

这个结构正确吗？还是有任何错误/坏习惯？

```
public static ResultSet getRecord(String id)
        {
            Connection conn = DataBase.Connect();

            try
            {
                try
                {
                    Statement stm = conn.createStatement();

                    ResultSet data = stm.executeQuery("SELECT * FROM " + GlobalFields.Records + " WHERE id = '" + id + "';");
                    return data;
                }
                finally
                {
                    conn.close();
                }

            }
            catch(SQLException e)
            {
                e.printStackTrace();
            }

            return null;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:18:46.663

1.  关闭基础语句或连接或两者后，您将无法处理结果集。如果您打算稍后处理它，您应该在关闭语句/连接后的某个时间点查看从结果集构建并像结果集一样处理的[CachedRowSet 。](http://docs.oracle.com/javase/7/docs/api/javax/sql/rowset/CachedRowSet.html)

2.  您没有正确关闭语句和结果集。这是必需的，因为关闭 Connection 并不总是意味着关闭物理连接，尤其是在您使用连接池时。

3.  内部的 try 块是不必要的，您也可以在 catch 语句下将 finally 块推出。

不是自己处理连接、语句、结果集，而是像 Spring JdbcTemplate 这样的轻量级框架可以正确关闭资源。

Also, if you are using JDK 7, then you should use the try-with-resources construct for all those closeable resources viz. connection, statement and resultset.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T09:18:35.580

这是不正确的，因为您在未处理结果集的情况下关闭了连接。此方法的调用者将收到一个无用的对象。

纠正这个问题的方法是将所有数据提取到您实例化的对象中，并且永远不会返回 a `ResultSet`，这是一个特定于机制的对象，它的生命周期绑定到语句和连接的生命周期。

处理异常的方式也令人怀疑：实际上应该让异常传播到调用者并进一步向上调用堆栈，直到全局异常屏障。你这样做的方式会强制调用者在`null`返回的情况下使用特殊代码。

# jsp - How to pass JSP variables to servlet?

> ID：12996521
> 
> 赞同：0
> 
> 时间：2012-10-21T09:14:53.977
> 
> 标签：jsp, servlets, requestdispatcher

I am trying to pass two values from my JSP page to servlet using request dispatcher.

Here is the JSP code:

```
<%
            String companyName = (String) request
                    .getAttribute("adminCompnayName");
            String tenantId = (String) request.getAttribute("adminTenantId");

            request.setAttribute("adminCompnayName", companyName);

            request.setAttribute("adminTenantId", tenantId);

request.setAttribute("adminTenantid","my compnay");
            request.setAttribute("adminCompanyname"," my tenant id");
            String servletName="../StoreUserDetails";
            RequestDispatcher dispatcher = request.getRequestDispatcher(servletName);
            if (dispatcher != null){
            dispatcher.forward(request, response);
            } 
```

These two values are received from another servlet.

Here is the servlet code where I am receiving values.

```
String tenantId = (String) request.getAttribute("adminTenantid");
        String companyName = (String) request
                .getAttribute("adminCompanyname");

out.println("--------------------------"
                + request.getAttribute("adminTenantid"));
        out.println("--------------------------"
                + request.getAttribute("adminCompanyname")); 
```

But I am getting null values.

```
--------------------------null 

--------------------------null 
```

How to fix it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:26:48.147

您将属性存储为`adminTenantId`and ，并将它们作为and`adminCompnayName`获取到 servlet 中。检查属性的拼写，或者更好的是，定义常量并在任何地方使用它们，以避免此类拼写错误。`adminTenantid``adminCompanyname`

也就是说，设计良好的应用程序应该从 servlet 分派到 JSP，而不是从 JSP 分派到 servlet。JSP 不应使用 scriptlet，而应仅用于使用 EL、JSTL 和其他自定义标记生成标记。

# azure - Retrieving the etag on an Azure Table storage query

> ID：12996522
> 
> 赞同：0
> 
> 时间：2012-10-21T09:15:34.567
> 
> 标签：azure, azure-storage, azure-table-storage

I need to be able to retrieve the etag from an Azure query, and attach them to my entities. The service will be updating the entities on a separate thread, so I need to store the etag of when the entity was received so that it can be attached to the DataServiceContext on the other thread.

So far, the only method I have found is doing this on the querying DataServiceContext:

```
context.Entities.Single(entityDescriptor =>
                        entityDescriptor.Entity == entity).ETag; 
```

I am looking for a way that could be retreived when the entity is being serialized, or something that could be more streamlined, rather than having to search through the DataServiceContext on every iteration and adding it manually.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:45:12.523

有一种不那么冗长的方式，[在此处指定](https://stackoverflow.com/a/12791623/328397)

```
 DataServiceContext.GetEntityDescriptor(entity).ETag. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-10T22:57:13.297

您无需指定 eTag 即可将实体附加到服务。

您可以将 eTag 值设置为`"*"`，以便在更新操作中盲目地覆盖实体。

# javascript - 如何在单个 li 元素悬停时打开列表，并且仅在鼠标移出 ul 时折叠

> ID：12996529
> 
> 赞同：4
> 
> 时间：2012-10-21T09:16:09.880
> 
> 标签：javascript, jquery

我创建了一个可折叠的菜单，其结构如下：

*   家长
*   家长 2
*   家长 3
    *   子类别

我有以下 javascript

```
 var config = {
        over: function() { $(this).children('ul').slideDown('slow'); },
        timeout: 5,
        out: function() { }
    }

    $("ul.root-tags li").hoverIntent(config);

    $('ul.root-tags').mouseout(function() {
        $(this).children('li ul').each(function () {
            $(this).slideUp('slow');
        });
    }); 
```

基本上我想在父项悬停时打开子类别，但只在整个列表的鼠标悬停时折叠打开的子类别，而不仅仅是父项。我当前的代码不这样做。我需要做哪些改变？

jsfiddle 在这里[http://jsfiddle.net/zkhVC/4/](http://jsfiddle.net/zkhVC/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:35:43.180

这应该解决您的要求：

```
$('#head').mouseleave(function() {

    $(this).find('li ul').each(function () {
        $(this).stop().slideUp('slow');
    });

});

$("ul li").mouseenter(function() {
    $(this).children('ul').stop().slideDown('slow');
});​ 
```

**小提琴**

[这里](http://jsfiddle.net/zkhVC/9/)

**解释**

*   不要使用`hover`事件，因为它会一次又一次地被触发，你已经超过了元素。你想`mouseenter`改用。
*   使用`mouseleave`代替`mouseout`：

> 该`mouseleave`事件不同于`mouseout`它处理事件冒泡的方式。如果`mouseout`在此示例中使用，则当鼠标指针移出 Inner 元素时，将触发处理程序。这通常是不受欢迎的行为。`mouseleave`另一方面，该事件仅在鼠标离开它所绑定的元素而不是后代元素时触发其处理程序。所以在这个例子中，当鼠标离开外部元素而不是内部元素时触发处理程序。

*   深入了解选择器的工作原理：您不需要`children`这里的函数。
*   您想`stop`在调用动画之前使用该函数以防止动画缓冲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:30:32.457

它看起来有点奇怪，但也许我们可以这样解释：

似乎 mouseout () 事件被发送到 ul.root-tags 的子级。所以你应该尝试 event.stopPropagation() 方法避免[冒泡](https://stackoverflow.com/questions/2728252/jquery-stoppropagation-bubble-down)。

```
$('ul.root-tags').mouseout(function(e) {
    e.stopPropagation();
    $(this).children('li ul').each(function () {
        $(this).slideUp('slow');
    });
}); 
```

如果它现在不起作用，使用 e.target，您可能会准确找到谁调用了谁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T09:32:52.870

使用 jQuery`mouseleave`代替`mouseout`：

```
$('ul.root-tags').mouseleave(function() {
    $(this).find('ul').slideUp('slow');
});

$("ul.root-tags li").hover(function() {
    $(this).find('ul').slideDown('slow');
})​ 
```

看到这个[FIDDLE](http://jsfiddle.net/KLKq2/)。

# c# - 菜单导航到 WPF 中的多个“窗口”

> ID：12996536
> 
> 赞同：0
> 
> 时间：2012-10-21T09:17:05.847
> 
> 标签：c#, wpf, menu

我来自VB6。在那里我有一个带有菜单的主窗体。文档（用户界面）是用户控件。用户从菜单中选择了他所需的文档，然后所需的用户控件出现在主窗体上。这是 WPF 中的最佳实践还是有更好的解决方案？（显然 WPF 中的“VB6 的主要形式”是*System.Windows.Window*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:39:56.120

不确定我是否得到你想要做的：但通常你有一个[ContentControl](http://www.wpftutorials.com/2011/03/content-controls.html)。您将所需的 UserControl 加载到其中（使用 myContentControl.Content 属性）。

如果您是 WPF 新手，请务必查看[MVVM 模式](http://www.codeproject.com/Articles/126249/MVVM-Pattern-in-WPF-A-Simple-Tutorial-for-Absolute)。它极大地提高了代码的质量，尽管它使一些事情变得有点棘手:)。

# asp.net-mvc - ASP.NET MVC and Web Forms registration

> ID：12996538
> 
> 赞同：0
> 
> 时间：2012-10-21T09:17:24.500
> 
> 标签：asp.net-mvc, webforms

How does IIS know when to route a requests to the ASP.NET MVC framework and the not the Web Forms framework?

Looking through the Web.config of an MVC project I can't see any modules or handlers that are registered, and nothing the Global.ascx seems to do it. So I am at a bit of a loss as to how the system decides which should be used to route a request.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:50:19.567

在查看 MapRoute 方法后，系统注册了一组路由，这些路由将匹配的请求卸载到 IRouteHandler。IRouteHandler 然后返回一个实际处理最终请求的 IHttpHandler。

到目前为止，这是我的理解，所以它可能不是 100% 正确的。

# jquery - Custom HTML for jQuery Validatation plugin error label

> ID：12996539
> 
> 赞同：0
> 
> 时间：2012-10-21T09:17:41.563
> 
> 标签：jquery, jquery-ui, jquery-validate

So by default, [jQuery Validation](http://docs.jquery.com/Plugins/Validation) creates a 'label' element with the error message after the offending input field with the generic messages (that Im fine with). However, I want the label to look just like the jQuery UI alert message that you see on the themeroller site.

So instead of the default:

```
<label for="fieldname" generated="true">JQUERY VALIDATE ERROR APPEARS HERE</label> 
```

I want validate to use the following "wrapper html":

```
<div class="ui-widget">
  <div class="ui-state-error ui-corner-all">
    <p>
      <span class="ui-icon ui-icon-alert"></span>
      <strong>Alert:</strong> JQUERY VALIDATE ERROR MESSAGE WOULD APPEAR HERE
    </p>
  </div>
</div> 
```

I see several ways of changing error classes, message classes, or even error elements - but not the 'wrapper html' of the error message. Anyone gotten this right?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:17:00.590

您可以在 errorPlacement 方法中执行此操作。注意，在字段正确验证后，我必须编写一些代码来隐藏消息

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.10.0/jquery.validate.min.js"
        type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $('input').bind('keyup', function () {
                if ($(this).valid()) {
                    if ($(this).next().hasClass('ui-widget')) {
                        $(this).next().remove();
                    }
                }
            });

            $('form').validate({
                errorPlacement: function (error, element) {
                    if (!element.next().hasClass('ui-widget')) {
                        $('<div class="ui-widget"><div class="ui-state-error ui-corner-all"><p><span class="ui-icon ui-icon-alert"></span><strong>Alert:</strong> ' + error[0].innerHTML + ' </p></div></div>').insertAfter(element);
                    }
                }
            });

        });
    </script>
</head>
<body>
    <form>
    <input name="one" class="required number" /><br />
    <input type="submit" />
    </form>
</body>
</html> 
```

# android - Android Emulator Throwing Error in Eclipse

> ID：12996545
> 
> 赞同：3
> 
> 时间：2012-10-21T09:17:50.597
> 
> 标签：android, eclipse, android-emulator, emulation

I'm new to android and learning its programming. I created the very first app but got stuck at one point. I created AVD on Eclipse Helios Service Release 2 and ran the application but got below error:

> [2012-10-21 13:56:12 - FirstApp] ------------------------------
> [2012-10-21 13:56:12 - FirstApp] Android Launch!
> [2012-10-21 13:56:12 - FirstApp] adb is running normally.
> [2012-10-21 13:56:12 - FirstApp] Performing com.example.firstapp.MainActivity activity launch
> [2012-10-21 13:56:13 - FirstApp] Automatic Target Mode: launching new emulator with compatible AVD 'Virtual'
> [2012-10-21 13:56:13 - FirstApp] Launching a new emulator with Virtual Device 'Virtual'
> [2012-10-21 13:57:44 - Emulator] Failed to create Context 0x3005
> [2012-10-21 13:57:44 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
> [2012-10-21 13:57:50 - FirstApp] New emulator found: emulator-5554
> [2012-10-21 13:57:50 - FirstApp] Waiting for HOME ('android.process.acore') to be launched...

Below is my code:

AndroidManifest.xml-

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

MainActivity.java-

```
 package com.example.firstapp;  

 import android.os.Bundle;  
 import android.view.Menu;  
 import android.app.*;  

 import android.view.View;  
 import android.view.View.OnClickListener;  
 import android.widget.*;  
 import java.util.*;  
 public class MainActivity extends Activity implements OnClickListener {  

Button btn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        

    btn=new Button(this);
    btn.setOnClickListener(this);
    updateTime();
    setContentView(btn);
    }
    public void onClick(View view) {
    updateTime();
    }
    private void updateTime() {
    btn.setText(new Date().toString());
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onStart(Bundle savedInstanceState)
{
    super.onRestoreInstanceState(savedInstanceState);
}
} 
```

I'm using Android Version 4.1 and have installed Android SDk properly.
I searched internet for solution and tried many options like deleting existing AVD and creating a new one, restarting Eclipse, also set the GPU Emulation property to yes but none of them worked.

Please guide me as in where am I going wrong.

# android - Spinner OnItemSelectedListener selectively triggers depending on focus of other items in view

> ID：12996546
> 
> 赞同：2
> 
> 时间：2012-10-21T09:17:51.787
> 
> 标签：android, android-layout, android-listview, android-widget, android-spinner

I have a custom adapter for displaying and getting user input from a ListView. Rows in the list contain a TextView, EditText and a Spinner. It's the spinner that is causing me trouble. The application concerns sailing race scoring where a competitor's result can be either a finish position (entered in the EditText) or a result code (selected using the spinner from a predetermined set of values). There seem to be a lot of people with similar problems to mine but nothing quite like what I have here.

The problem is that the OnItemSelectedListener is only triggered in certain situations and not every time I need it to trigger and the situations depend on whether or not the corresponding EditText has focus or not or if the EditText in another row has focus.

1.  When the list is first displayed, nothing shows focus and I can select codes using the spinner in any row of the list and the listener is triggered every time.

2.  If an EditText has focus (whether the popup keyboard is shown or not) the spinner in the same row works just fine and the listener triggers. However in the case of the last row of the list I can't get it to trigger at all.

3.  In the case of the last row, if I click in the EditText of a different row and then try selecting using the spinner of the last row, the listener triggers. This is the weirdest part of all.

I have tried out lots of the solutions to other related problems but no luck so far. This includes messing with the focusability of the spinner and the EditText; adding an OnTouchListener to the spinner to forcibly move the focus around between the items or deliberately clearing focus. Any help or suggestions of what to try next greatly appreciated as this is driving me nuts and for now I need to move on to another unrelated bit of functionality in the hope that this is fixable somehow in the future.

Here is the xml for the row

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:orientation="vertical">
 <TextView
     android:id="@+id/race_line"
     android:textSize="16sp"
     android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:paddingRight="10dip"
     android:text="@string/race_line"
 />
 <TextView
     android:id="@+id/race_number"
     android:textSize="16sp"
     android:textStyle="bold"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:paddingRight="10dip"
     android:layout_toRightOf="@id/race_line"
 />
 <EditText
    android:id="@+id/result"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/race_number"
    android:inputType="number"
    android:imeOptions="actionDone"
    android:imeActionLabel="Done"
    android:focusableInTouchMode="true"
    android:focusable="true"
 />
 <Spinner 
    android:id="@+id/result_code_spinner"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:prompt="@string/result_prompt"
    android:layout_toRightOf="@id/result"
    android:focusableInTouchMode="false"
    android:focusable="true"
 />
 </RelativeLayout> 
```

And here is the code

```
public class ResultsEntryListAdapter extends BaseAdapter {
protected static ArrayList<resultObj> combinedList;
private Context mContext;

private LayoutInflater mInflater;
public ResultsEntryListAdapter(Context context, ArrayList<resultObj> listToDisplay) {
    combinedList = listToDisplay;
    mInflater = LayoutInflater.from(context);
    mContext = context;
}

public int getCount() {
    return combinedList.size();
}

public Object getItem(int position) {
    return combinedList.get(position);
}

public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final int pos = position;
    final ViewHolder holder;
    // Add an on click listener to this method that will update the source data in the calling activity when items change
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.result_row, null);
        holder = new ViewHolder();
        holder.race_line = (TextView) convertView.findViewById(R.id.race_line);
        holder.race_number = (TextView) convertView.findViewById(R.id.race_number);
        holder.result = (EditText) convertView.findViewById(R.id.result);
        holder.result_code_spinner = (Spinner) convertView.findViewById(R.id.result_code_spinner);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                mContext, R.array.result_codes, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        holder.result_code_spinner.setAdapter(adapter);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    /* If the user enters a result code using the spinner then put the result code into the
     * data structure and set the numerical result (string) to a null value.
     */
     final OnItemSelectedListener spinnerListener = new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> av, View v, int spinPosition, long id) {
            int spin_position = spinPosition;
            // Stick the result of the selection back into the data bound to the view
            // This stops the selection vanishing when the view is scrolled off the screen
            combinedList.get(pos).setSpinPosition(spin_position);
            int result = 0;
            if (spin_position != 0) {                   result = 0;
                if (spin_position == 11) {
                    // Special case of RDG with score:
                    // Do nothing with the result as we have to take it as entered
                    holder.result_code_spinner.setSelection(11);
                } else if (spin_position == 15) {
                    // Another special case ZFP. Take score as entered here as well
                    holder.result_code_spinner.setSelection(15);
                } else {
                    // put the encoded result into the data structure
                    combinedList.get(pos).setResult(Integer.toString(result));
                    holder.result.setText("");
                }
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // Do nothing, change nothing

        }
    };

    /* The result value needs to be saved if one of several things happen:
     * 1\. The focus moves away from the cell being edited
     * 2\. The done/return key is pressed on the keyboard
     * 3\. The back button is pressed (to dismiss the keyboard)
     */
    class DoneOnEditorActionListener implements OnEditorActionListener {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_DONE) {
                InputMethodManager imm = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
                EditText et = (EditText) v;
                String sResult = et.getText().toString();
                int result = sResult.equals("") ? 0 : Integer.parseInt(sResult);
                if (result > 0 ) {
                    combinedList.get(pos).setResult(sResult);
                } else if (result == 0) {
                    combinedList.get(pos).setResult("");
                }
                // Special case of RDG needs to retain the spin position if a result is then entered
                if (combinedList.get(pos).getSpinPosition() != 11 && combinedList.get(pos).getSpinPosition() != 15) {
                    combinedList.get(pos).setSpinPosition(0);
                }
                holder.result_code_spinner.setSelection(0);
                //holder.result.clearFocus(); //move focus away
                return true;    
            }
            return true;
        }
    }

    final OnFocusChangeListener resultFocusListener = new OnFocusChangeListener() {
        @Override
        // Called when the user touches the editText to enter a score
        public void onFocusChange(View v, boolean hasFocus) {
            EditText et = (EditText) v;
            if (hasFocus == false) {
                String sResult = et.getText().toString();
                int result = sResult.equals("") ? 0 : Integer.parseInt(sResult);
                if (result > 0 ) {
                    combinedList.get(pos).setResult(sResult);
                } else if (result == 0) {
                    combinedList.get(pos).setResult("");
                }
                int spinPosition = combinedList.get(pos).getSpinPosition();
                if (spinPosition != 11 && spinPosition != 15) {
                    combinedList.get(pos).setSpinPosition(spinPosition);
                    holder.result_code_spinner.setSelection(spinPosition);
                    holder.result.clearFocus();
                }
            }
        }

    };

    /* If the user enters a numerical result then check it is positive and put it into the
     * data structure. At the same time set the spin position to 0 to indicate this is a 
     * valid result.
     */

    holder.result_code_spinner.setOnItemSelectedListener(spinnerListener);
    holder.result.setOnEditorActionListener(new DoneOnEditorActionListener());
    holder.result.setOnFocusChangeListener(resultFocusListener);

    // The race_line just says "Race:" for now but in future we may want to allow races to have names and fill in the name here
    holder.race_line.setText(R.string.race_line);
    holder.race_number.setText(combinedList.get(position).getRaceNumber());
    String sResult = combinedList.get(position).getResult();
    int spinPosition = combinedList.get(position).getSpinPosition();
    if (sResult.equals("")) {
        holder.result.setText("");
        holder.result_code_spinner.setSelection(spinPosition); // spin position may be 0 or +ve, display it anyway
    } else { // result is non-zero so need to display either the value or the spin position
        int result = Integer.parseInt(sResult);
        if (spinPosition == 11 || spinPosition == 15) {
            // Display both spinner and result text
            holder.result.setText(Integer.toString(result));
            holder.result_code_spinner.setSelection(spinPosition);
        } else if (result > 0) {
            holder.result.setText(Integer.toString(result));
            holder.result_code_spinner.setSelection(0);
        } else {
            holder.result.setText("");
            holder.result_code_spinner.setSelection(combinedList.get(position).getSpinPosition());
        }
    }
    return convertView;
}

static class ViewHolder {
    TextView race_line;
    TextView race_number;
    EditText result;
    Spinner result_code_spinner;

}
} 
```

# c# - 带有 Ninject 的 WebAPI

> ID：12996547
> 
> 赞同：7
> 
> 时间：2012-10-21T09:17:52.867
> 
> 标签：c#, asp.net-mvc-3, .net-4.0, ninject

我遇到了麻烦，让 Ninject 和 WebAPI.All 一起工作。我会更具体一点：
首先，我使用了 WebApi.All 包，看起来它对我来说很好用。
其次，我`RegisterRoutes`在下`Global.asax`一行添加：

```
routes.Add(new ServiceRoute("api/contacts", new HttpServiceHostFactory(), typeof(ContactsApi))); 
```

所以最终的结果是：

```
 public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.Add(new ServiceRoute("api/contacts", new HttpServiceHostFactory(), typeof(ContactsApi)));

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory());

} 
```

一切似乎都很好，但是当我尝试将用户重定向到特定操作时，例如：

 `````
return RedirectToAction("Index", "Home"); 
```` 

`浏览器中的网址是`localhost:789/api/contacts?action=Index&controller=Home` 哪个不好。我换了行`RegisterRoute`，现在看起来：`

 ````
 public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );
            routes.Add(new ServiceRoute("api/contacts", new HttpServiceHostFactory(), typeof(ContactsApi)));
            ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory());

        } 
```

现在重定向工作正常，但是当我尝试访问我的 API 操作时，我收到错误消息，告诉我 `Ninject couldn't return controller "api"`这是绝对合乎逻辑的，我没有这样的控制器。

我确实搜索了一些如何使 Ninject 与 WebApi 一起工作的信息，但我发现的所有内容都仅适用于 MVC4 或 .Net 4.5。由于技术问题，我无法将我的项目转移到新平台，所以我需要为这个版本找到一个可行的解决方案。

[这个答案](https://stackoverflow.com/questions/7602327/ninject-working-with-wcf-web-api-preview-5?answertab=active#tab-top)看起来像是一个可行的解决方案，但是当我尝试启动项目时，我遇到了编译器错误

```
CreateInstance = (serviceType, context, request) => kernel.Get(serviceType);
```

告诉我：

`System.Net.Http.HttpRequestMessage is defined in an assembly that is not referenced`

关于在程序集中添加引用的一些事情

`System.Net.Http, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35`

我不知道下一步该做什么，我找不到任何关于 .NET 4 和 MVC3 上的带有 webapi 的 ninject 的有用信息。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T09:50:07.093

以下是我为您编译的几个步骤，可以帮助您入门：

1.  使用 Internet 模板创建一个新的 ASP.NET MVC 3 项目
2.  安装以下 2 个 NuGet：`Microsoft.AspNet.WebApi`和`Ninject.MVC3`
3.  定义一个接口：

    ```
    public interface IRepository
    {
        string GetData();
    } 
    ```

4.  和一个实现：

    ```
    public class InMemoryRepository : IRepository
    {
        public string GetData()
        {
            return "this is the data";
        }
    } 
    ```

5.  添加 API 控制器：

    ```
    public class ValuesController : ApiController
    {
        private readonly IRepository _repo;
        public ValuesController(IRepository repo)
        {
            _repo = repo;
        }

        public string Get()
        {
            return _repo.GetData();
        }
    } 
    ```

6.  在你的注册一个 API 路由`Application_Start`：

    ```
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        GlobalConfiguration.Configuration.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
    ```

7.  使用 Ninject 添加自定义 Web API 依赖解析器：

    ```
    public class LocalNinjectDependencyResolver : System.Web.Http.Dependencies.IDependencyResolver
    {
        private readonly IKernel _kernel;

        public LocalNinjectDependencyResolver(IKernel kernel)
        {
            _kernel = kernel;
        }

        public System.Web.Http.Dependencies.IDependencyScope BeginScope()
        {
            return this;
        }

        public object GetService(Type serviceType)
        {
            return _kernel.TryGet(serviceType);
        }

        public IEnumerable<object> GetServices(Type serviceType)
        {
            try
            {
                return _kernel.GetAll(serviceType);
            }
            catch (Exception)
            {
                return new List<object>();
            }
        }

        public void Dispose()
        {
        }
    } 
    ```

8.  `Create`在方法 ( )中注册自定义依赖解析器`~/App_Start/NinjectWebCommon.cs`：

    ```
    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);

        GlobalConfiguration.Configuration.DependencyResolver = new LocalNinjectDependencyResolver(kernel); 
        return kernel;
    } 
    ```

9.  在`RegisterServices`方法 ( `~/App_Start/NinjectWebCommon.cs`) 中配置内核：

    ```
    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IRepository>().To<InMemoryRepository>();
    } 
    ```

10.  运行应用程序并导航到`/api/values`.``

# c++ - 课堂和访问中的外部类

> ID：12996548
> 
> 赞同：0
> 
> 时间：2012-10-21T09:18:12.660
> 
> 标签：c++, class

这是我现在在 MyClass.hpp 中的内容：

```
class CLASS
{
    public:
        class AAA
        {
            public:
                char c_str[1024];
        };

        class BBB
        {
            public:
                int count;
        };
};

extern class CLASS              CLASS;
extern class CLASS::AAA         AAA;
extern class CLASS::BBB         BBB; 
```

我的类.cpp：

```
class CLASS                 CLASS;
class CLASS::AAA            AAA;
class CLASS::BBB            BBB; 
```

访问元素：

```
AAA.c_str = 0;
BBB.count = 0; 
```

但我想获得这个访问变体：

```
CLASS.AAA.c_str = 0;
CLASS.BBB.count = 0; 
```

... 或者 ...

```
CLASS:AAA:c_str = 0;
CLASS:BBB:count = 0; 
```

……那我该怎么办呢？：C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:30:31.303

`AAA`并且`BBB`是独立的对象，而不是`CLASS`类内的对象。您必须在类中声明对象*才能*使其`CLASS`成为可能：

```
class CLASS
{
public:
    class AAA { ... };

    class BBB { ... };

    // Declare object of the above classes
    AAA aaa;
    BBB bbb;
};

CLASS cls;

cls.aaa.c_str[0] = 0;
cls.bbb.count = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:23:23.253

你不能因为 CLASS 没有属性（也没有字段）。

你可以写 CLASS::AAA 但不能写 CLASS.AAA。

# java - 使用 mysql、google maps 进行 web 应用程序所需的提示，

> ID：12996558
> 
> 赞同：0
> 
> 时间：2012-10-21T09:18:53.273
> 
> 标签：java, php, html, google-maps, web-applications

我想制作一个使用 Google Maps API 并将一些数据存储在 MySQL 数据库中的 Web 应用程序。我真的不知道如何开始，我想要一些提示。

我不确定我应该用什么语言写它。我在 Java 方面有相当多的经验，并且过去也制作过一些小型 Java Web 应用程序。但我也不介意学习 PHP、HTML/CSS、...

大家推荐用什么？

我也想知道我是否可以从我的网络空间运行所有内容，尤其是数据存储。我应该为此编写一个 Restful 应用程序吗？

对不起，如果这有点模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:44:22.343

Web 开发与编写独立代码完全不同。无论您决定采用哪种框架，都**需要**了解 HTML 和 CSS。SQL 的基本知识也会有所帮助。

周围有很多 PHP 框架，只需进行 google 搜索即可。对于网络应用初学者来说，这可能是最简单的途径。

如果您已经了解一些 Java，并且想使用 Google 的 API，那么可能值得一试 Google Web Tools (GWT)。它将 Java 编译为 JavaScript，因此您可以直接在 Java 中完成这些巧妙的操作。

我个人目前支持 Ruby on Rails，因为它为您提供了很大的灵活性，并且它拥有强大的支持网络。另外，您可以直接在 Heroku 中部署您的应用程序。

请记住，除非您自己托管 Web 服务器，否则您将受限于托管服务支持的内容。例如，据我所知，Yahoo 只运行 MySQL 和 PHP。

希望这可以帮助。这是一个完整的宇宙，所以花一些时间研究直到你对你要走的路线有信心是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:16:58.630

由于大多数谷歌地图应用程序是使用 javascript 、 php 和 mysql 开发的，这是我将采取的路线。

有许多 使用这些的[演示](https://developers.google.com/maps/documentation/javascript/demogallery)和[教程。](https://developers.google.com/maps/articles/)

# c# - 更改复选框列表中选定项目的样式

> ID：12996564
> 
> 赞同：2
> 
> 时间：2012-10-21T09:20:10.323
> 
> 标签：c#, asp.net, visual-studio-2010

是否可以为呈现为表格的复选框列表中的选定项目定义不同的样式？例如，如果选中了一个项目，我希望将文本更改为粗体/更改颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:58:25.033

另一个有用的注释，正如 Mennan 之前提到的：

```
protected void formViewProducts_DataBound(object sender, EventArgs e)
{    
    CheckBoxList cblProducts = formViewProducts.FindControl("cblProducts") as CheckBoxList;
    var productsList = products.ToList();
    foreach (Product product in productsList)
    {
        cblProducts.Items[product.productCode - 1].Selected = true;
        cblProducts.Items[product.productCode - 1].Attributes.Add("style", "color: red; font-weight: bold");
    }
} 
```

# c# - 如何将包含十六进制字符的字符串转换为字符串

> ID：12996566
> 
> 赞同：1
> 
> 时间：2012-10-21T09:20:20.543
> 
> 标签：c#, string, escaping, hex

例如，我从谷歌得到一个代码。下面的示例在字符串中包含非 ascii 字符。我想要的是编写一个可以将它们全部转换为 ASCII 字符串的函数。

```
{e:"vLuDULDKEomjiAfgo4CwBg",c:0,u:"https://www.google.com/complete/search?client\x3dserp\x26hl\x3den\x26sugexp\x3dles%3B\x26gs_nf\x3d3\x26pq\x3dC%23%20decode%20hex%20string%20to%20string\x26cp\x3d11\x26gs_id\x3d3w8\x26xhr\x3dt\x26q\x3dhow%20to%20conv\x26tch\x3d1\x26ech\x3d78\x26psi\x3dDrqDUKC_I86fiAfLrYCgCw.1350810126009.3",d:"[\x22how to conv\x22,[[\x22how to conv\\u003Cb\\u003Eert pdf to word\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert flv to mp3\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert prc to pdf\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert jpg to pdf\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert pdf to epub\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert cr2 to jpeg\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert pdf to excel\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert amr to mp3\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert prc to epub\\u003C\\/b\\u003E\x22,0,[]],[\x22how to conv\\u003Cb\\u003Eert flv to avi\\u003C\\/b\\u003E\x22,0,[]]],{\x22j\x22:\x223w8\x22,\x22q\x22:\x22HhWOfQJyxGUsSNB1855GU4lNjzU\x22}]"}/*""*/ 
```

这是我拥有的功能，但不适用于上面的字符串：

```
 public static string DecodeHex(string data)
    {
        data = data.Replace("\x22", @"""");
        data = data.Replace("\x23", "#");
        data = data.Replace("\x24", "$");
        data = data.Replace("\x25", "%");
        data = data.Replace("\x26", "&");
        data = data.Replace("\x27", "'");
        data = data.Replace("\x28", "(");
        data = data.Replace("\x29", ")");
        data = data.Replace("\x2a", "*");
        data = data.Replace("\x2b", "+");
        data = data.Replace("\x2c", ",");
        data = data.Replace("\x2d", "-");
        data = data.Replace("\x2e", ".");
        data = data.Replace("\x2f", "/");
        data = data.Replace("\x30", "0");
        data = data.Replace("\x31", "1");
        data = data.Replace("\x32", "2");
        data = data.Replace("\x33", "3");
        data = data.Replace("\x34", "4");
        data = data.Replace("\x35", "5");
        data = data.Replace("\x36", "6");
        data = data.Replace("\x37", "7");
        data = data.Replace("\x38", "8");
        data = data.Replace("\x39", "9");
        data = data.Replace("\x3a", ":");
        data = data.Replace("\x3b", ";");
        data = data.Replace("\x3c", "<");
        data = data.Replace("\x3d", "=");
        data = data.Replace("\x3e", ">");
        data = data.Replace("\x3f", "?");
        return data;
    } 
```

谢谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T09:29:17.667

```
string url = "https://www.google.com/complete/search?client\x3dserp\x26hl\x3den\x26sugexp\x3dles%3B\x26gs_nf\x3d3\x26pq\x3dC%23%20decode%20hex%20string%20to%20string\x26cp\x3d11\x26gs_id\x3d3w8\x26xhr\x3dt\x26q\x3dhow%20to%20conv\x26tch\x3d1\x26ech\x3d78\x26psi\x3dDrqDUKC_I86fiAfLrYCgCw.1350810126009.3";
Uri uri = new Uri(url);
Console.WriteLine(uri.ToString()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T09:33:23.330

您也可以使用以下方法

```
HttpUtility.UrlDecode(String) from System.Web 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T10:04:46.357

```
 var json1 = DecodeHex(json);
    var jsonDes = JsonConvert.DeserializeObject<List<Dictionary<string, object>>>(json1);
    public static string DecodeHex(string data)
    {
        data = data.Replace("\\x22", @"""");
        data = data.Replace("\\x23", "#");
    .......
    } 
```

# jsf - 将 jsf1.2 组件 id 管理为我自己的组件 id

> ID：12996568
> 
> 赞同：1
> 
> 时间：2012-10-21T09:20:29.963
> 
> 标签：jsf, datatable, onchange

我是 jsf1.2 的新手。我想在我的选项中管理组件 ID。

**Q：**在dataTable中，不同行的同类型组件有相同的组件ID，所以当我想`onchangeAction`通过a4j做一些（例如刷新值）时，它会刷新整个组件，这是不对的。我想自己管理组件ID。

> ID：qCol_value_CSLB
> CLIENTID：detailTagForm:query_newentry:id__21e17a4:_21e17a4:data1:0:qCol_value_CSLB detailTagForm:query_newentry:id__21e17a4:_21e17a4:data1:1:qCol_value_CSLB detailTagForm:query_newentry:id__21e17a4:_21e17Col_aLBdata:_21e17Col_a4:

dataTable 中的 id 相同但行不同。

# css - 类似应用程序的光/增亮效果

> ID：12996576
> 
> 赞同：1
> 
> 时间：2012-10-21T09:22:13.883
> 
> 标签：css

有人知道是否有一种方法可以创建`CSS`看起来像用于灯光效果的效果`iPhone apps`吗？我的意思是盒子的上部，较亮的部分。

谢谢，

罗恩

![在此处输入图像描述](../Images/78a134612491dbf57ec9510190ff76da.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:27:39.013

我从未见过你描述的效果（永远不会使用 iPhone），但我认为它是动画的？然后，如果您使用两个图像并将它们“悬停”混合，则可以在 css 中执行此操作。您将“灯光图标”放置在普通图标上方（通常`:after`在 css 中使用伪选择器）并使用 css`:hover`选择器控制它的不透明度值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:56:57.710

不幸的是，由于[规范没有涵盖](http://www.w3.org/TR/2009/CR-CSS2-20090908/generate.html#before-after-content)在元素上使用`:after`和`:before`选择器，纯 CSS 解决方案可能无法正确运行：`img`

> 该规范没有完全定义 :before 和 :after 与替换元素的交互（例如 HTML 中的 IMG）。这将在未来的规范中更详细地定义。

在当前版本的 Chrome 和 Firefox 中，这些选择器似乎被忽略并且根本不适用于`img`元素。

**这是一个带有小型 HTML 包装器的解决方案，**当不支持 CSS 时，它将退回到不呈现。需要在此处指定容器大小，但可以使用 JavaScript 轻松设置。

**CSS**

```
.shine {
    width:223px;
    height:223px;
    position:relative;
    overflow:hidden;
    display:inline-block;
}

.shine:after {
    width:150%;
    height:100%;
    position:absolute;
    top:-45%;
    left:-25%;
    display:block;
    content:"";
    background:rgba(255,255,255,0.1);
    border-radius:100%;
} 
```

**HTML**

```
<span class="shine">
    <img src="" alt="">
</span> 
```

**结果**

为了让它更漂亮一点，您可以在 中添加渐变背景`.shine:after`，但它可以正常工作而无需演示这个想法。

[这是一个 jsFiddle](http://jsfiddle.net/zTvMf/1/)，所以你不必相信我的话。

![CSS 闪耀效果](../Images/c358710e73868b2431ab65b10f08a81a.png)

# macos - 如何告诉 cpanm Image::Magick 关于标题位置？

> ID：12996578
> 
> 赞同：4
> 
> 时间：2012-10-21T09:22:30.383
> 
> 标签：macos, perl, installation, imagemagick, cpan

在 OS X cpanm Image::Magick 上失败

> Magick.xs:60:10：致命错误：找不到“magick/MagickCore.h”文件
> 
> #include <magick/MagickCore.h>

该文件虽然存在。（这个空间是我让它显示在这里的。）

如何告诉 cpanm 和/或 Image::Magick 在哪里可以找到这些标头？

（IM 是从源代码安装的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:00:07.243

解决方法：下载模块，编辑 Makefile.PL（将头目录添加到包含），制作，按照 imagemagick 主页上的说明进行安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-24T01:30:31.423

虽然这个问题相当古老，但我最近仍然遇到了这个问题。

我能够通过自制软件（`brew install imagemagick`安装版本 6.9.5-3）安装新的 ImageMagick 来解决它，然后启动`cpan`并安装`JCRISTY/PerlMagick-6.89-1.tar.gz`包。

它在测试部分失败。因此，我分析了哪些测试失败并决定作弊（我不需要所有 ImageMagick 函数）。我手动编辑了测试文件（用于`look Image::Magick`进入未归档的包）——对我来说，需要完全注释掉 test for `input.miff`( *reference/filter/Segment.miff* ) in`t/filter.t`和 tests for MPEG read in `t/mpeg/read.t`。然后 cpan 最终能够处理*Image::Magick*。

我对一组 GIF 和 PNG 图像进行了自己的测试，这些都可以。希望这可以帮助某人。

# css - Twitter Bootstrap：使用提交表单作为下拉菜单项？

> ID：12996586
> 
> 赞同：3
> 
> 时间：2012-10-21T09:24:30.973
> 
> 标签：css, twitter-bootstrap

我不想在下拉菜单中使用锚点或按钮，而是希望每个项目都有一个表单。该表单包含一些隐藏字段和一个提交按钮。当我将表单放入每个`<li>`标记中时，UI 都搞砸了。Bootstrap 是否支持本机？如果没有，我将重新编码我的应用程序以使用链接。

**更新1：屏幕截图**

![在此处输入图像描述](../Images/d16d9c8e86ea6688177089fc9f3128b2.png)

**更新2：标记**

```
 <div class="btn-group open">
    <button class="btn">Action</button>

    <ul class="dropdown-menu">
      <li>
        <form action="#" method="post">
          <fieldset>
            <input type="submit" value="Favorite"/>
          </fieldset>
        </form>
      </li>

      <li><a href="#">Message</a></li>

      <li>
        <form action="#" method="post">
          <fieldset>
            <input type="submit" value="Smile"/>
          </fieldset>
        </form>
      </li>

      <li>
        <form action="#" method="post">
          <fieldset>
            <input type="submit" value="Block"/>
          </fieldset>
        </form>
      </li>

      <li>
        <form action="#" method="post">
          <fieldset>
            <input type="submit" value="Friend"/>
          </fieldset>
        </form>
      </li>

      <li>
        <form action="#" method="post">
          <fieldset>
            <input type="submit" value="Exclude From Future Search Results"/>
          </fieldset>
        </form>
      </li>
    </ul>
  </div> 
```

更新 3：图标

我希望提交按钮有一个图标。不知道什么是最好的方法，但这是我的解决方案：

```
<label for="foo">
   <i class="icon-ok></i> Favorite
</label>
<input id="foo" style="display:none;" type="submit" value="Favorite"/> 
```

提交表单被隐藏，标签显示为图标，当用户点击标签时，它会起作用。不需要 JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:50:45.837

或者只是使用 Javascript 将值存储在隐藏字段中并提交表单——你可能正在使用 JS 来处理下拉列表的打开/关闭。

我遇到了完全相同的问题，我创建了这个新的“提交”插件：

```
!function ($) {
  "use strict"; // jshint ;_;

  $(document).on('click.submit.data-api', '[data-submit]', function (e) {
    e.preventDefault()

    var form= $('#'+$(this).data('submit'))

    form.find('input[name="'+$(this).data('name')+'"]').val($(this).data('value'))

    form.submit()
  })

}(window.jQuery); 
```

我可以这样使用：

```
<form id="myform" ...>
  <input type="hidden" name="myparam">
  <div class="btn-group">
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
      Action
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a data-submit="myform" data-name="myfield" data-value="myvalue>
          Click here
        </a>
      </li>
    </ul>
  </div>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:44:04.777

不太确定我是否理解您关于提交表单被隐藏但标签显示图标的意思但是我能够用图像覆盖按钮。请参阅随附的 jsBin。我通过在输入中添加一个类来做到这一点

[http://jsbin.com/eboqij/1/edit](http://jsbin.com/eboqij/1/edit)

```
.button{
background-image:url('http://www.nyanicorn.com/res/img/icon_nyan.png');
    background-repeat:no-repeat;
text-indent:-9999px;
  width:40px!important;

} 
```

# algorithm - 大O算法分析

> ID：12996588
> 
> 赞同：-3
> 
> 时间：2012-10-21T09:25:17.243
> 
> 标签：algorithm, big-o

我必须分析以下代码片段的大 O 复杂性：

一个）

```
// loop 1
for(int i = 0; i < n; i++)
  // loop 2
  for(int j = i; j < n; j++)
    sum++; 
```

b)

```
// loop 1
for(int i = 0; i < n; i++)
  // loop 2
  for(int j = i + 1; j > i; j--)
    // loop 3
    for(int k = n; k > j; k--)
      sum++; 
```

我不知道该怎么做，提供的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:30:19.797

要分析 Big-Oh 复杂性，您必须尝试计算代码执行了多少基本操作。

在您的第一个循环中：

```
for(int i = 0; i < n; i++)
    for(int j = i; j < n; j++)
        sum++; 
```

调用了多少次`sum++`？第一个循环发生`n`了多次，而在每一个循环中，第二个循环都发生了`n`多次。这为您提供了围绕`n`*`n`的操作，这相当于`O(n^2)`.

我会让你解决第二个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:51:57.353

第一个是直截了当的（使用第二个代码快照的工具，这有点棘手） - 我将专注于第二个代码快照。

大 O 表示法为算法执行的操作数提供了*渐近上限。*

让我们假设每个内部迭代都执行 1 个操作，让我们忽略计数器和循环的开销。
表示`T(n)`程序中完成的操作总数。

很明显，该程序没有更多的操作：

```
 // loop 1
for(int i = 0; i < n; i++)
   // loop 2
   for(int j = i+1; j > i; j--) //note a single op in here, see (1) for details
      // loop 3
      for(int k = n; k > 0; k--) //we change k > j to j > 0 - for details see (2)
         sum++; 
```

(1) 由于`j`被初始化为`i+1`, 并且每次迭代都减少, 在 loop2 的第一次迭代之后, 你将得到`j == i`, 并且条件将产生 false - 因此 - 完成了一次迭代 (
2) 原始循环不再迭代`n`(since `j >= 0`) - 因此“新程序”比旧程序“不是更好”（就上限而言）。

**简化程序**
的复杂度 上述程序的总复杂度为`O(n^2)`，因为 loop1 和 loop3`n`各重复一次，而 loop2 只重复一次。
如果我们假设每个内部循环都执行单个命令 - 那么执行的命令总数是`n^2`.

**结论：**
由于新程序正在执行`n^2`“操作”（根据假设）并且原始程序“并不比新程序差” - 它正在执行`T(n) <= n^2`步骤。
根据[大 O 表示法的定义](http://en.wikipedia.org/wiki/Big_O_notation#Formal_definition)（c=1，并且对于每个 N）-您可以得出结论，该程序是`O(n^2)`

# android - 如何在 Android 中确定哪个服务器更接近/更快？

> ID：12996589
> 
> 赞同：0
> 
> 时间：2012-10-21T09:25:19.870
> 
> 标签：android

在第一个应用程序启动时，我下载了约 50 mb 的文件，然后解压缩它们。
我有来自世界各地的用户，我有 3 个不同的服务器可以托管文件，所以我想全部使用它们并通过代码检查哪个服务器是最快/最接近用户并使用它的..

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:34:29.337

为什么不使用 Google Play 服务添加“扩展文件”？见这里：http: [//developer.android.com/guide/google/play/expansion-files.html](http://developer.android.com/guide/google/play/expansion-files.html)

我没有亲自尝试过，但它肯定会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:31:02.777

也许向每个服务器发送一个简单的请求到一种`ping.php`脚本，测量读取响应所花费的时间并选择最好的一个。不要忘记向虚拟服务器发送第一个请求或下载网页，以便手机激活网络并将其设置为可能的最佳性能（否则与下一个服务器相比，您的第一台服务器可能总是看起来很慢） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:32:58.883

我以前从未这样做过，所以这只是一个猜测，但如果你想知道哪个更接近：

获取用户的 IP 地址： [如何从代码中获取设备的 IP 地址？](https://stackoverflow.com/questions/6064510/how-to-get-ip-address-of-the-device)

对 IP 地址进行反向 DNS 查找，结果如下：c-24-131-5-42.hsd1.va.comcast.net

通过查看生成的字符串，您可以知道我住在 VA。使用国家/州来确定哪个更接近您的服务器并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T09:34:26.260

自己做这个；您需要使用设备的 IP 地址查询地理 ip 服务以获取其大致位置；然后将其与哪个服务器最好地提供文件进行比较。这有其自身的问题（代理/vpn 隧道就是其中之一）。

其次是ping你的服务器。这里的问题可能是 ping 可能被提供商阻止（特别是如果设备在未连接 wifi 的情况下）；即使他们在 wifi 上，ping 也可能会被外部地址阻止，并且只允许在网络内。在这种情况下; ping 总是会失败。

所以可靠的方法是使用[Content Delivery Network](http://en.wikipedia.org/wiki/Content_delivery_network)。他们将负责自动从最近的服务器提供文件。您不必修改应用程序或管理不同的服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T09:36:04.317

您还可以尝试与您拥有的每台服务器建立 TCP 连接并跟踪执行此操作所花费的时间。然后使用时间最短的那个。

或者让设备从每个服务器中提取一个包含服务器已知可用性的文件。

# c# - 在 C# 中运行 bat 文件会引发无法识别的错误

> ID：12996591
> 
> 赞同：0
> 
> 时间：2012-10-21T09:25:28.453
> 
> 标签：c#, batch-file

我想通过 bat 文件在 c# 程序中添加一些 DNS 记录，所以我在 bat 文件中编写了这些行：

```
 set servername=%1
set siteaddress=%2

"C:\Windows\System32\dnscmd.exe" %servername% /zoneadd %siteaddress% /primary /file  %siteaddress%.dns 
```

我已经用 C# 编写了这些行：

```
Process p = new Process();
                    p.StartInfo.UseShellExecute = false;
                    p.StartInfo.WorkingDirectory = Application.StartupPath;
                    p.StartInfo.FileName = General.DnsBatPath;
                    p.StartInfo.Arguments = string.Format("{0} {1}", General.DnsServerName, txtSiteAddress.Text);
                    p.Start();
                    p.WaitForExit(); 
```

我收到此错误“dnscmd.exe 不被识别为内部或外部命令...”但是当我手动运行 bat 文件（在 C# 之外）时，一切正常。

我更改了我的 C# 代码以检查发生了什么

```
Process.Start(@"C:\Windows\System32\dnscmd.exe"); 
```

我仍然收到“无法识别...”错误。但我可以在“C:\Windows\System32”中看到 dnscmd.exe。我再次更改了我的 C# 代码以检查另一件事：

```
Process.Start(@"C:\Windows\System32\cmd.exe"); 
```

之后将打开 CMD 窗口？？？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:21:20.447

在回答您的第二个问题时，您始终可以检查环境变量`PROCESSOR_ARCHITECTURE`以查看它是否包含 number `64`。

```
set servername=%1
set siteaddress=%2

if "%PROCESSOR_ARCHITECTURE%" equ "%PROCESSOR_ARCHITECTURE:64=%" (
  REM 32bit
  "C:\Windows\System32\dnscmd.exe" %servername% /zoneadd %siteaddress% /primary /file  %siteaddress%.dns
) else (
  REM 64bit
  "%windir%\Sysnative\dnscmd.exe" %servername% /zoneadd %siteaddress% /primary /file  %siteaddress%.dns
) 
```

* * *

可能更可靠的方法是从注册表中获取它：

```
set servername=%1
set siteaddress=%2

for /f "tokens=3" %%x in ('reg Query HKLM\Hardware\Description\System\CentralProcessor\0 /v Identifier') do (
  set arch=%%x
)
if %!arch:~-2!%==64 (
  set dnsPath=%windir%\Sysnative
) else (
  SET dnsPath=C:\Windows\System32
)
"%dnsPath%\dnscmd.exe" %servername% /zoneadd %siteaddress% /primary /file  %siteaddress%.dns 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-23T20:39:30.860

在我的情况下，我创建了一个控制台应用程序来运行带有一些 java 命令的批处理文件，但得到“java”不被识别为内部命令错误。

花了我几个小时，但解决方案是直截了当的。我的服务器在 64 位上运行 JVM，所以我将平台目标更改为 64 位。

x86 是 32 位，x64 是 64 位。项目属性如下：

[![在此处输入图像描述](../Images/308d607a39b036e7e789d958f8720f56.png)](https://i.stack.imgur.com/ox2q0.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:33:44.903

试试这个代码：

```
ProcessInfo psi= new ProcessStartInfo("cmd.exe", string.Format("/c {0} {1} {2}", General.DnsBatPath, General.DnsServerName, txtSiteAddress.Text);
psi.UseShellExecute = false;

process = Process.Start(psi);
process.WaitForExit(); 
```

该`/c`参数表示给定的命令应该运行，然后 cmd.exe 应该退出。有关详细信息，请`cmd /?`在 Windows 控制台中运行。

`ShellExecute`您也可以尝试设置为 true时会发生什么。然后该过程应该以相同的方式开始，就像在资源管理器中双击文件一样。shell 执行的缺点是，如果用户将.BAT 文件默认应用程序更改为（例如）记事本，该文件将不会被执行，而是在记事本中打开。

如果您还想重定向控制台输出，请看这里：[在 C# 中执行批处理文件](https://stackoverflow.com/questions/5519328/executing-batch-file-in-c-sharp)

# java - 是否有用于在运行时设计报告（jasperreport）的组件？

> ID：12996596
> 
> 赞同：1
> 
> 时间：2012-10-21T09:25:57.357
> 
> 标签：java, jasper-reports

我有一些报告（jrxml 文件），用户希望能够在运行时以图形方式修改它们。

是否有用于在运行时设计报告（jasperreport）的组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:09:35.517

您可以使用[JasperDesign](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/design/JasperDesign.html)对象在运行时修改模板。您还可以查看[动态 jasper](http://dynamicjasper.com/)以在运行时创建设计。

# javascript - 是否有 HTML/CSS 的编译器？

> ID：12996597
> 
> 赞同：-1
> 
> 时间：2012-10-21T09:26:07.717
> 
> 标签：javascript, html, css, compiler-construction, google-closure-compiler

今天，许多人使用 Google Closure Compiler 来实际“编译”他们的 JavaScript 代码。高级模式使其能够将 JS 重写为更好、更快、更小的 JS 代码，其功能与原始输入相同。

有没有好的 HTML/CSS 编译器？例如，它可以像 JS 压缩器那样压缩 CSS 类。它可以删除任何没有 JavaScript 实际显示的 div (display: none;) (display: block;)。它可以删除空格。它可以将小图像组合成精灵。它可以将所有页面上包含的文件合并到一个文件中。

名单还在继续。你知道这项工作有什么好的工具吗？（即使它只能压缩 CSS 类等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:33:23.070

连接你的 css 文件，你完成了大部分工作：成本主要与请求的数量有关。

但是为了删除无用的规则，使用工具是没有意义的：需要一个意味着你并不真正了解需要哪些规则以及为什么需要。换句话说，您的代码是一团糟，您**必须**修复，因为此时它可能只会爆炸式增长。

精灵和其他优化也是如此：只有知道应用程序的使用流程，如果人们回来缓存了一些图像，或者只有主页的图像等，你才能知道使用什么策略，即使将一页的所有小图像合并到一个大图像中几乎总是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:01:45.750

据我所知，没有真正的编译器，但有一些工具可以帮助您创建干净的 html 和 css。

例如，对于 css，[less](http://lesscss.org/)是生成漂亮干净的跨浏览器标记的好工具，但您必须从一开始就使用它。同样对于 html，有一些标记框架可以简化生成干净的 html。[降价](http://daringfireball.net/projects/markdown/)是一种非常流行的。

# php - 使用锚元素切换排序顺序。

> ID：12996600
> 
> 赞同：0
> 
> 时间：2012-10-21T09:27:08.930
> 
> 标签：php, html, hyperlink

我想创建一个链接来切换排序顺序。我为此目的使用变量 $order 。当我单击一次链接时，href 应该是“？order=desc”，然后当我再次单击它时，应该是“？order=asc”。希望得到帮助。

```
if ( isset($_GET['order'])) { $order == $_GET['order']; } 
else { $_GET['order']=='asc'; }

$order = $_GET['order'];

<a href="?<?php if ($order='desc'){echo 'order=asc';}else {echo 'order=desc';}?>">order </a> 
```

希望这里的一些人可以帮助我解决上面的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:36:38.353

类似的东西：

```
$order = isset($_GET['order'])?$_GET['order']:'asc'; 

<a href="?order=<?php echo (($order=='desc')?'asc':'desc');?>"> 
```

# jakarta-ee - Java EE 和传出 TCP 连接

> ID：12996601
> 
> 赞同：3
> 
> 时间：2012-10-21T09:27:17.547
> 
> 标签：jakarta-ee, networking, web-applications, tcp

因此，我面临着开发 Web 应用程序的挑战，该应用程序必须显示来自远程服务器的实时数据。要连接到这个远程位置，我需要 TCP 套接字和一些任意协议（不是 HTTP）。

我的目标是让网络服务器连接到另一台服务器，无限期地保持连接并持续读取数据，同时在网站上实时显示该数据。

现在我的问题是，我将如何使用 Java EE 来解决这个问题？我还可以开发完全独立的软件来处理传出的 TCP 连接，但是我将如何处理 Web 应用程序和其他软件之间的通信呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:34:06.360

这是一个相当广泛的问题，有几种方法可以做到这一点。

一种方法是在 webapp 中有一个 mdb，它从外部服务器生成消息的队列中消费。我一直在使用 glassfish 和 activemq messagebroker 来做这件事。

然后 primefaces push 将事件从 webapp 发送到客户端浏览器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T11:45:53.767

解决这个问题的常规方法是创建一个入站资源适配器。查看[IronJacamar 用户指南](http://docs.jboss.org/ironjacamar/userguide/1.0/en-US/html/introduction.html#overview_inbound)，了解如何执行此操作。

# java - 解决 swingworker 应用程序中的并发修改异常

> ID：12996602
> 
> 赞同：0
> 
> 时间：2012-10-21T09:27:18.797
> 
> 标签：java, user-interface, collections, concurrency, swingworker

我正在编写一个应用程序，其中一些模拟在 SwingWorker 中运行。在这个模拟中，一些集合保存了在 SwingWorker 的 doInBackground() 方法中修改的数据。这些数据需要由 GUI 显示，但显然这会失败，因为一旦 GUI 开始访问集合，就会引发并发修改异常，因为 SwingWorker 正在修改相同的集合。

在 SwingWorker 不必等待 GUI 完成数据绘制的情况下，我将如何共享这些数据？我是否必须复制数据然后发布（）那些？这不会大大增加数据量（有很多数据）吗？有没有其他方法可以解决这个问题？

这是一些简化的代码：

```
public class World {
    public Set<Foo> fooSet = new HashSet<Foo>();
}

public class Simulator extends SwingWorker<Void, Void> {
    private World       world;
    private WorldPanel  worldPanel;

    public Simulator(World world, WorldPanel worldPanel) {
        this.world = world;
        this.worldPanel = worldPanel;
    }

    @Override
    protected Void doInBackground() throws Exception {
        while (true) {
            doSomethingWithFooSet() //structurally modifies the set
            publish();
        }
    }

    @Override
    protected void process(List<Void> voidList) {
        worldPanel.repaint();
    }
}

public class WorldPanel extends JPanel {
    private final World             world;

    public WorldPanel(World world) {
        this.world = world;
    }

    @Override
    public void paintComponent(Graphics g) {
        drawWorld() //reads from fooSet in world
    }
} 
```

不要误会我的意思，我理解为什么这不起作用，我只是想知道我应该在这个设计中改变什么才能做我想做的事情：访问我的模拟正在修改的相同数据。process() 是否在 EDT 上运行？如果是这样，是否可以让 process() 更新 WorldPanel 用来绘制数据的世界对象副本中的集合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T12:16:53.847

You cannot simultaneously update and display the world object, so you have two ways out: do update and displaying sequentially, or clone data so that updated and displayed data are different. To implement the first variant, just do not use SwingWorker. In the second variant, if simple cloning the whole world is unacceptable, let the background thread compute not just the new state of the world, but also commands to modify the world's image. `Publish` that commands and then `process` them to update the picture.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:33:25.720

我会在 gui 中添加一个标志，它是否应该显示/访问数据

最初将其设置为 false 并且当您的工作人员完成使用切换标志重新加载访问部分时

# c - 字符串复制（strcpy）

> ID：12996604
> 
> 赞同：0
> 
> 时间：2012-10-21T09:27:32.270
> 
> 标签：c, string, strcpy

我有以下代码。

```
#include <string.h>
#include <stdio.h>

int main()
{
char * l;
*l = 'c';
*(l+1) = 'g';
*(l+2) = '\0';

char *second;
strcpy(second, l);
printf("string: %s\n", second);
} 
```

当我运行它时说：
输出显示“分段错误”......有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:28:40.257

`l`是一个未初始化的指针；你不能取消引用它。您应该分配足够的空间来写入其内容（静态 (1) 或动态 (2)）。

```
char l[3]; /* (1) */

#include <stdlib.h>
char *l = malloc(3); /* (2) */ 
```

与`strcpy`:相同的错误`second`是一个未初始化的指针，你不能写入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:42:43.177

您可以使用 malloc 获取内存或将指针指向一个已经存在的变量。

```
 char word[3];
  char *l;
  l = word; 
```

现在你可以做这样的任务：

```
 *l = 'c';
  *(l+1) = 'g';
  *(l+2) = '\0'; 
```

但是现在你想将它复制到另一个指针，这个指针必须指向另一个字符串，或者你应该为它分配内存。

```
 char *pointer_to_second;
  char second[3];
  pointer_to_second = second; 
```

或者，如果您希望获得动态内存，请将上面的 3 行更改为下面的这一行：

```
 char *pointer_to_second = malloc(sizeof(char) * 3); 
```

之后你可以做你想做的事：

```
 strcpy(pointer_to_second, l); 
```

但是请记住，如果您使用的是 C 编译器，则必须在开始时声明所有变量，否则会出错。如果您使用的是 C++ 编译器，则不必担心它。

当您尝试访问不属于您的向量的字段时，会发生分段错误。例如，如果您尝试这样做：

```
 printf("The value in position 3 of my pointer is %c\n", *(l + 3)); 
```

您可能会收到一个错误，因为您的指针有 3 个位置，而您正试图访问第 4 个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T10:50:17.470

你将学会鄙视`Segmentation Fault`错误...

当您尝试访问不属于您的内存时，通常会调用它。最常见的情况是当您尝试访问超出范围的数组索引时。

`char *l`只是创建一个指向 char 的指针。你想要的是一个字符串，它在 C 中被定义为一个字符数组。因此，当您尝试访问内存中`l`指向的任何内容的下一个位置（可能只是垃圾）时，您将访问不属于您的内存，因此`Segmentation Fault`

# google-app-engine - UnsupportedOnDevError：开发服务器不支持匹配字段“位置”（类型=5）的字段类型

> ID：12996607
> 
> 赞同：0
> 
> 时间：2012-10-21T09:27:48.390
> 
> 标签：google-app-engine

有没有人尝试使用搜索服务进行简单查询，其中要查询的文档有一个`GeoField`？我做到了，我的查询只有像“John Doe”这样的文本要匹配，似乎开发服务器试图将查询文本与包括地理字段在内的每个字段进行匹配。它只是抛出了那个错误，而且似乎没有办法将地理字段排除在外。

生产服务器也会这样吗？我如何告诉它查询除地理字段之外的每个字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:00:49.647

开发服务器目前对 GeoFields 的支持很差，但在生产中它可以正常工作。不过，听起来您发现了一个错误；仅在文档上有一个 GeoField 不会导致您的查询失败。[我在这里为你提交了一个错误](http://code.google.com/p/googleappengine/issues/detail?id=8315)——如果你给它加星标，你会在它被修复时收到通知。

作为一种解决方法，如果您知道要在哪个字段中查找文本，则可以使用“myfield:john myfield:doe”，这将防止错误发生。或者，如果文档在本地运行，您可以输入逻辑以在索引文档时不包含 GeoFields。

# javascript - 骨干网：将变量从路由器传递到视图

> ID：12996614
> 
> 赞同：3
> 
> 时间：2012-10-21T09:28:58.803
> 
> 标签：javascript, backbone.js, coffeescript

我有一个主干路由器

```
@collection = new Backbonedemo.Collections.Posts()
@flashes = new Backbone.Collection.Flashes() 
```

在其`initialize`方法中。

在路由器的`new`方法中，有这样的：

```
new: ->
  view = new Backbonedemo.Views.PostsNew(collection: @collection, flashes: @flashes)
  $('#posts_container').html(view.render().el) 
```

`@collection`变量传入就好了，但是在`render()`，`console.log @flashes`返回`undefined`。

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T09:53:09.510

该`@flashes`变量作为选项传递。所以你必须尝试这样的事情：`console.log @this.options.flashes`

# entity-framework-5 - 在急切加载中过滤导航属性

> ID：12996617
> 
> 赞同：3
> 
> 时间：2012-10-21T09:29:06.887
> 
> 标签：entity-framework-5

我一直在使用软删除，现在我想加载未“删除”的实体的导航属性。我找到了一种方法，这种方法我的问题对我来说不是很清楚，还有另一种方法可以做到这一点。

`Context.CreateSet().Include("Salary").Select(u => new {User= u, Salary = u.Salarys.Where(s => !s.Deleted)}).AsQueryable().Select(a => a.User).AsQueryable();`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:44:26.257

急切加载不支持过滤。您的代码可以简化为：

```
var users = Context.CreateSet<User>()
                   .Select(u => new {
                       User = u,
                       Salary = u.Salaries.Where(s => !s.Deleted)
                    })
                    .AsEnumerable()
                    .Select(a => a.User); 
```

`Include`不需要，因为您正在用自己的查询替换它，并且`AsQueryable`不需要，因为查询`IQueryable`一直在调用，直到`AsEnumerable`选择用户和选定的薪水时，该查询将一直调用。EF 将负责为您正确修复导航属性。

# sml - 了解文本 IO

> ID：12996621
> 
> 赞同：0
> 
> 时间：2012-10-21T09:29:29.793
> 
> 标签：sml, smlnj

我的函数试图逐行读取一个文本文件，并在每一行上执行一个名为 somefn 的预定义函数，并将 somefn 的值附加到函数中。somefn 已经在上面定义并且工作正常。

```
fun extractline(infile:string)=
    let
    val insl=TextIO.inputLine(ins)
    case insl of
    NONE=> []
    |SOME(l)=>somefn(insl)::extractline(infile)
    in
    TextIO.closeIn(ins);
    end
; 
```

我有错误，无法处理。我会很感激一些帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:40:34.523

请记住，在`let ... in ... end`块中，您将需要的声明放在 and 之间`let`，`i n`并将结果表达式放在`in`and之间`end`。

因此，您需要将`case`表达式放在`in`和之间`end`。

您也永远不会打开流，`ins`. 让您的函数打开流，然后在另一个函数中递归地处理该流；您不想为每个递归调用打开文件。

你会想要这个表格上的东西：

```
fun extractline file =
  let
      val ins = TextIO.openIn file

      fun extractline_h () = (* do something with ins here *)
  in
      extractline_h () before
      TextIO.closeIn ins
  end 
```

然后你进行`extractline_h`递归，并在其中建立列表。

# java - 蓝牙流接收建议

> ID：12996622
> 
> 赞同：0
> 
> 时间：2012-10-21T09:29:30.833
> 
> 标签：java, bluetooth

我在 j2se 中开发了应用程序，我的数据来自蓝牙，我的笔记本电脑和 GPS 都通过蓝牙连接。GPS 向我发送由我的笔记本电脑接收的流，但我不知道该流如何进入我的 jese 应用程序。我可以通过类似的应用程序显示此流。对不起我糟糕的英语。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:00:33.700

您需要使用[javax.comm.SerialPort](http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/index.html)类

不幸的是，我失去了图书馆本身的链接。

# resharper - CodeContracts 和 resharper vs2012 不工作

> ID：12996626
> 
> 赞同：6
> 
> 时间：2012-10-21T09:30:17.370
> 
> 标签：resharper, code-contracts

我有 Resharper，它是一个很棒的工具 开始一个项目，我需要使用`CodeContracts`. 然而，Resharper 忽略了它们。在检查了一些博客后，我遇到了这个：

[http://www.infinitec.de/post/2010/11/18/Using-Code-Contracts-Visual-Studio-and-with-Resharper.aspx](http://www.infinitec.de/post/2010/11/18/Using-Code-Contracts-Visual-Studio-and-with-Resharper.aspx)

但是我收到一个错误

```
Error   2   

The command ""C:\Program Files (x86)\Microsoft\Contracts\Bin\ccrewrite" 
"@MyProject.Coreccrewrite.rsp"" exited with code 1. 
```

有没有人设法让 codecontracts 和 resharper 一起工作？

**已编辑**

我正在做的是

尝试使用 codeContract 和 resharper 给出了一个`Method invocation is skipped`等..

谷歌搜索，发现很多人有同样的问题，但没有解决方案。

如您所见，我附上了一个应该可以解决问题的链接，但没有

在 vs2012 中新建一个项目，尝试使用代码契约，resharper 不会让你。它将被禁用，如果启用它，您会收到另一个错误

Resharper 团队对 [http://youtrack.jetbrains.com/issue/RSRP-182553#comment=27-200330的评论](http://youtrack.jetbrains.com/issue/RSRP-182553#comment=27-200330)

> ReSharper 不会*像*在中期未来那样支持“代码合同”。这有两个主要原因：
> 
> 1.  CodeContracts 写在代码块中，此外，还写在单独的程序集中。ReSharper 要求合约处于元数据级别
> 2.  当前的合同过于复杂，不应该实时分析。
> 
> 在 ReSharper 开发过程中，我们分析 CodeContracts 并构建相应的 ReSharper 代码注释标记。我们将扩展我们的注释，并始终使它们与合同保持同步。

我吃饱了！！！

# facebook-graph-api - Facebook PHP SDK 发生致命错误 Facebook:: throwAPIException

> ID：12996631
> 
> 赞同：1
> 
> 时间：2012-10-21T09:30:40.317
> 
> 标签：facebook-graph-api, exception, facebook-php-sdk, fatal-error

```
 try {
        $return = $facebook->api("/" . $userFromDB["username"] . "/feed",
            "post", array(
                message => "",
                picture => "http://blabla.net/blabla1/img/autopost/" . $blabla2 . ".png",
                link => "http://apps.facebook.com/blabla1/?var2=" . $encryptedUserIds[$userFromDB["id"]], //$appPageURL
                caption => "Tikla, begen.",
                description => $var3,
                access_token => $auth["auth_code"],
            ));
        $usersPosted++;
    } catch (FacebookApiException $e) {
        $userProcessError++;
        write_log("blabla");
    } 
```

您好，这是我将帖子发送到用户墙的代码部分。如果没有异常，代码将完美运行。每当发生异常时，我都会收到这个烦人的致命错误。

我尝试了很多事情来纠正，但脚本与我在代码的其他部分调用 facebook api 的地方相同。

我搜索了谷歌和stackoverflow。似乎没有人有这个错误。我是唯一一个？提前致谢。

这是错误：

```
Fatal error:  Call to undefined method Facebook::throwAPIException() in facebook-php-sdk/src/base_facebook.php on line 870 
```

我使用的 Facebook sdk 版本：3.2 Php 版本：5.3

编辑：这就是我为用户获取 access_token 的方式。我将它存储到数据库中：

```
 if(isset($code) && $state==$authState){
        $accessTokenInformation=file_get_contents($accessTokenURL . $code);
        $tmpResult=explode("&", $accessTokenInformation);

        if(sizeof($tmpResult)==2){
            $tmpAT=explode("=", $tmpResult[0]);
            $tmpExp=explode("=", $tmpResult[1]);

            if(sizeof($tmpAT)==2 && sizeof($tmpExp)==2){
                $tmpDBUserAuth=check_db_for_authcode_for_user(...);
                if(empty($tmpDBUserAuth)){
                    insert_authcode_indb(...);
                    write_log(...);
                }else{
                    update_authcode_indb(...)
                    write_log(...);
                }

            }else{
                write_log(...);
                echo(' top.location.href="'. $OAuthURL .'"; ');
            }
        }else{
            write_log(...);
            echo(' top.location.href="'. $OAuthURL .'"; ');
        }
    } 
```

2012/11/06 编辑：问题仍然存在。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:33:55.257

请检查您的 FB API 密钥是否设置正确......我也遇到了这个问题，但是在它运行完美之后我已经更正了密钥。

尝试使用以下脚本

[http://www.9lessons.info/2011/09/update-login-with-facebook-and-twitter.html](http://www.9lessons.info/2011/09/update-login-with-facebook-and-twitter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:59:26.400

> 致命错误：在第 870 行的 facebook-php-sdk/src/base_facebook.php 中调用未定义的方法 Facebook::throwAPIException()

该错误消息没有意义。

如果我在我的 IDE 中转到该文件的第 870 行，并按照方法名称对其声明进行操作，则它位于第 1237 行的同一文件中（全部用于当前版本 3.2.0）。

因此，没有合理的理由导致未定义的方法错误。

您能否检查一下 SDK 文件是否已正确上传到您的服务器，或者只是重新下载并重新上传它们，以确保它不是损坏/截断文件内容的问题？

# python - 在 Python Django 中未读取 Curl Post Json 数据

> ID：12996632
> 
> 赞同：5
> 
> 时间：2012-10-21T09:30:44.703
> 
> 标签：python, json, curl

我在 Windows 中使用 curl exe 与我的 Django 后端进行通信。

以下是正在使用的命令。

```
curl --dump-header - -H "Accept: application/json" -H "Content-Type: application/json" -X POST --data "{\"uid\":12,\"token\":\"asdert\"}" http://localhost:8000/restapi/v1/foo/ 
```

现在这会以错误的格式给出数据。即在视图中，帖子显示此数据打印请求。POST

```
{"{\"uid\":12,\"access_token\":\"asdert\"}": [""]} 
```

发布 json 数据的正确方法是什么？

**编辑：**

我尝试了其他几种方法，例如我正在尝试使用 [http://slumber.in/](http://slumber.in/)与我的 rest api 进行通信。

即使在这里得到与上述相同的结果。

```
import slumber
api = slumber.API("http://localhost/restapi/v1/"
api.foo.post({"uid":"100"}) 
```

视图打印request.POST的摘录

```
 {u'{"uid": "100"}': [u'']} 
```

PS - `curl --dump-header - -H "Accept: application/json" -H "Content-Type: application/json" -X POST --data "uid=12&token=asdert" http://localhost:8000/restapi/v1/foo/`

这行得通。但这不是 Json 格式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T09:40:27.370

[我用http://httpbin.org/post](http://httpbin.org/post)尝试了你的命令，效果很好。

现在，您的问题是您应该从

```
request.raw_post_data 
```

而不是`request.POST`.

（或者，如果您使用的是 Django 1.4+，请改用`request.body`已`request.raw_post_data`弃用的版本）

* * *

详细代码应该是这样的：

```
import json

if request.method == "POST":
    data = json.loads(request.raw_post_data)
    print data 
```

# javascript - 容器内的相对/绝对定位

> ID：12996643
> 
> 赞同：0
> 
> 时间：2012-10-21T09:31:53.617
> 
> 标签：javascript, html, css

我试图将一些 div 放置在另一个容器中，当我设置`position: relative;`这些 div 时，它们被绘制在容器内，但是当我添加`top`和`left`样式属性时，它们没有正确绘制

这是我的代码：

```
<table style="background:black;width:80%;height:90%;">
    <tr>
        <td style="background:yellow;width:15%">Left Pane</td>
        <td style="background:black;width:85%">
            <div id="a" style="background:green;position:relative;top:1px;left:80px;width:20%;height:20%">a</div>
            <div id="b" style="background:blue;position:relative;top:10px;left:14px;width:20%;height:20%">b</div>
            <div id="c" style="background:red;position:relative;top:10px;left:14px;width:20%;height:20%">c</div>
        </td>
    </tr>
</table> 
```

如您所见，由于它们的&属性，div `#b`&`#c`应该彼此放置，但它们是在彼此下方绘制的，如果我设置它们是相互放置的，但它们不是根据它们的容器而是根据屏幕定位的.`top``left``position: absolute;`

有没有办法根据容器将 div 放置在彼此之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:34:29.397

了解相对位置和绝对位置：

[css技巧：相对位置和绝对位置](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

简而言之：

容器元素得到`position: relative;`

其中的元素，获取`position: absolute;`和值`top/bottom/left/right`

这允许您控制定位并且它是跨浏览器兼容的（旧版本的 IE 以可怕的方式处理定位！）

PS 一些通用的建议来提高你的编码技能：

*   尽量避免使用表格进行布局。

*   使用外部 css 文件而不是内联文件 - 从长远来看，它更容易维护和可重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:34:39.157

用于`position: relative`容器和`position: absolute`内部元素。

```
<td style="position: relative">
  <div id="a" style="position: absolute; top:1px;left:80px;width:20%;height:20%">a</div>
  <div id="b" style="position: absolute; top:10px;left:14px;width:20%;height:20%">b</div>
  <div id="c" style="position: absolute; top:10px;left:14px;width:20%;height:20%">c</div>
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:50:56.390

您需要使用相对定位的父级并绝对定位 div：请参见我的 js fiddle：

[http://jsfiddle.net/benedict_w/VeL3c/](http://jsfiddle.net/benedict_w/VeL3c/)

```
<body>
<table>
    <tr>
        <td class="left">Left Pane</td>
        <td class="right">
            <div id="a">a</div>
            <div id="b">b</div>
            <div id="c">c</div>
        </td>
    </tr>
</table>
</body>​ 
```

CSS

```
table {
    background:black; width:80%; height:90%;
}

td.left {
    background:yellow; width:15%;
}

td.right {
    position: relative; background:black; width:85%
}

#a, #b, #c {
    position:absolute; top:0px;
}

#a {
    background:green;left:80px; width:20%;
}

#b, #c {
    left:14px;width:20%;
    background: blue;
}

#c {
    background:red;
} 
```

# javascript - 安装 Tower.js 时出错

> ID：12996645
> 
> 赞同：0
> 
> 时间：2012-10-21T09:32:08.470
> 
> 标签：javascript, node.js, towerjs

努力在我的雪豹 macbook 上安装 tower.js。这是命令和错误：

```
My-Macbook:tower john$ tower new app

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: Object #<Object> has no method 'existsSync'
    at Object.<anonymous> (/usr/local/lib/node_modules/tower/index.js:6:21)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Module.require (module.js:354:17)
    at require (module.js:370:17)
    at Object.<anonymous> (/usr/local/lib/node_modules/tower/bin/tower:15:3)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:31:09.913

从 Node.js 0.8 开始，`path.existsSync()`现在是`fs.existsSync()`- 您正在使用的 tower.js 版本似乎与已安装的 Node.js 版本不兼容。

# wordpress - 检查 Wordpress 循环是否有帖子

> ID：12996646
> 
> 赞同：1
> 
> 时间：2012-10-21T09:32:19.283
> 
> 标签：wordpress, loops, empy

我有一个自定义循环，其中包含从自定义元字段复选框添加的帖子。只有选中复选框，那么帖子只会添加到循环中。我有一个包含该循环的容器。我想要做的是检查该循环是否有任何帖子以及它是否为空 - 只需隐藏该容器。因为否则当循环为空时，容器仍保留在页面上：

```
<div>
  <ul>
  </ul>
</div> 
```

这是循环：

```
<?php 
/* Slider ------- */
$slider = new WP_Query('showposts=-1');
if ( $slider->have_posts() ):
?>  
<div>
    <ul>
    <?php while ( $slider->have_posts() ) : $slider->the_post(); ?>
        <?php if ( get_post_meta($post->ID, "mf_homeslider", true) == 'slider_on' ){ // Check if post was added to slider ?>
        <li>
        <?php if (has_post_thumbnail()) {  ?>
            <a href="<?php the_permalink(); ?>">
                <?php the_post_thumbnail('large'); ?> 
            </a>
        <?php } ?>
            <div>
                <?php get_template_part('includes/post_meta'); ?>
                <h2>
                    <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
                </h2>
            </div>
        </li>
        <?php } ?>
    <?php endwhile; ?>
    </ul>
</div>
<?php 
endif;
wp_reset_query();
?> 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:16:22.397

您应该按自定义字段过滤查询（请参阅[此处](http://codex.wordpress.org/wp_query#Custom_Field_Parameters)的详细信息），它还可以提高性能（SQL 条件与 while-if 循环）。之后，`have_posts()`返回循环是否包含任何帖子。

所以而不是

```
$slider = new WP_Query('showposts=-1'); 
```

采用

```
$slider = new WP_Query(array(
    'meta_key' => 'mf_homeslider',
    'meta_value' => 'slider_on',
    'posts_per_page' => -1)
); 
```

并且不再需要`if ( get_post_meta(...`

（`showposts`已弃用，请`posts_per_page`改用）。

*注意：您正在混合使用大括号和 if-endif 样式，后者在嵌套时会更易读。*

# mysql - 如何使用mysql中的variable选项将表中某个列中的多条记录复制到列中的另一个表中

> ID：12996649
> 
> 赞同：0
> 
> 时间：2012-10-21T09:32:24.547
> 
> 标签：mysql, database, insert, insert-update

如何从表中的某个列复制多条记录并插入以使用 SQL 命令在 mysql 中使用不同选项更新列中的另一个表

列：“targetCategory”条件所有记录包含Top/name_test2、Top/name_test2/%

列“标题”，“父主题参考数据注意：数据有根不同，不导入示例：Top/name_test752

```
 table_exemple1

       ===========================================================================
       |    aliasID    |    title     |    targetCategory     |    parentTopic    |
       ===========================================================================
No     |    1          | name_test752 | Top/name_test752/tel  | Top/name_test752  |
       ---------------------------------------------------------------------------
|-<----|    2          | name_test2   | Top/name_test2        | Top/name_test2    |
|      ---------------------------------------------------------------------------
||-<---|    3          | 5            | Top/name_test2/etc/5  | Top/name_test2/etc|
||      ---------------------------------------------------------------------------
|||-<--|    4          | tesla        |  Top/name_test2/tesla | Top/name_test2    |
|||    ----------------------------------------------------------------------------
|||
|||
|||    **tabla_exemple2 before update**
|||    =====================================================================================================================================================================
|||    |    id         |    topic              |    topicShort         |    parentTopic        |    displayName    |    description    |    lastUpdate        | sitecount  |
|||    =====================================================================================================================================================================
|||    |    1          | Top/name_test/helloo  | helloo                | Top/name_test752      |     Nuul          |     hello         | 2010-06-19 04:10:14  |  324       |
|||    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|||    |    2          | Top/name_test2/nest   | nest                  | Top/name_test2/       |     Nuul          |      nest         | 2010-06-19 04:11:23  |  545435    |
|||    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|||    |    3          | Top/name_test2/etc/57 | 5                     | Top/name_test2/etc/   |     Nuul          |      5            |  2010-06-19 04:15:13 |  54354343  |
|||    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|||    |    4          | Top/name_test2/tesla1 | tesla                 |  Top/name_test2/      |     Nuul          |      tesla        |  2010-06-19 04:10:14 |  676756    |
|||    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|||  
|||
|||  **table_exemple2** after update
|||
|||
|||   =====================================================================================================================================================================
|||    |    id         |    topic              |    topicShort         |    parentTopic        |    displayName    |    description    |    lastUpdate        | sitecount  |
|||    =====================================================================================================================================================================
|||    |    1          | Top/name_test/helloo  | helloo                | Top/name_test752      |     Nuul          |     hello         | 2010-06-19 04:10:14  |  324       |
|||    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|||    |    2          | Top/name_test2/nest   | nest                  | Top/name_test2/       |     Nuul          |      nest         | 2010-06-19 04:11:23  |  545435    |
|||    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|||    |    3          | Top/name_test2/etc/57 | 5                     | Top/name_test2/etc/   |     Nuul          |      5            |  2010-06-19 04:15:13 |  54354343  |
|||    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|||    |    4          | Top/name_test2/tesla1 | tesla                 |  Top/name_test2/      |     Nuul          |      tesla        |  2010-06-19 04:10:14 |  676756    |
|||    ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|||--->|    6          | Top/name_test2        | name_test2            | Top                   |     Nuul          |      name_test2   |  insert data         |  0         |
|      ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|----->|    7          | Top/name_test2/etc/5  | 5                     | Top/name_test2/etc    |     Nuul          |      5            |  insert data         |  0         |
|      ---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|----->|    8          | Top/name_test2/tesla  | tesla                 | Top/name_test2        |     Nuul          |      tesla        |  insert data         |  0         |
       ---------------------------------------------------------------------------------------------------------------------------------------------------------------------

       Data from "targetCategory" wil goo to "topic"
       data from "title" goo to "topicShort"
       Data from "parentTopic" goo to "parentTopic"
       I ned insert new data to column "displayName" well be "Nuul"
       I ned insert new data to column "description" well be idem "topicShort"
       I ned insert new data to column "displayName" well be "Nuul"
       I ned insert new data to column "lastUpdate" well be "data time inserition"
       I ned insert new data to column "displayName" well be "0"

       condition its column targetCategory data like Top/name_test2 and like Top/name_test2/% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:46:04.587

尚不完全清楚您想要什么，但您可以[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)与适当的[字符串函数](http://dev.mysql.com/doc/en/string-functions.html)一起使用。例如，简单地从`column2`第一个冒号之前的所有内容中删除：

```
INSERT INTO table_exemple3 (column4, column5, column6)
SELECT column1, SUBSTRING(column2, LOCATE(':', column2) + 1), column3
FROM   table_exemple2 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/f01f4/1/0)上查看。

# html - XSL 重复相同的 XML 元素/节点，无法正常工作

> ID：12996650
> 
> 赞同：1
> 
> 时间：2012-10-21T09:32:33.527
> 
> 标签：html, xml, xslt, xpath, stylesheet

所以这就是我的 XML 的样子。这非常简单，当然只是想为每个链接布置一堆指向其他 XML 文件的链接，每个链接具有不同的名称/标题：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="index.xsl"?>
<playToc>
    <play>a_and_c.xml</play>
    <play>all_well.xml</play>
    <play>as_you.xml</play>
    <play>com_err.xml</play>
    <play>coriolan.xml</play>
    <play>cymbelin.xml</play>
    <name>Title 1</name>
    <name>Title 2</name>
    <name>Title 3</name>
    <name>Title 4</name>
    <name>Title 5</name>
    <name>Title 6</name>
</playToc> 
```

很简单，对吧？这是我的 XSL：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="playToc">
<html>
<body style="text-align:center;">

<xsl:apply-templates select="play"></xsl:apply-templates>

</body>
</html>
</xsl:template>

<xsl:template match="play">

<xsl:variable name="URL">
    <xsl:value-of select="."/> 
</xsl:variable>

<xsl:variable name="TITLE">
    <xsl:value-of select="../name"/> 
</xsl:variable>

<a href="{$URL}"><xsl:value-of select="$TITLE"/></a>
<br />
</xsl:template>

</xsl:stylesheet> 
```

这是输出：

```
Title 1
Title 1
Title 1
Title 1
Title 1
Title 1 
```

当我希望这是输出时，当然：

```
Title 1
Title 2
Title 3
Title 4
Title 5
Title 6 
```

任何帮助都会很棒！非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:49:10.450

好吧，XML输入的结构很差，但是您可以通过这样做来解决这个问题

```
<xsl:template match="play">
  <xsl:variable name="pos" select="position()"/>
  <a href="{.}">
    <xsl:value-of select="../name[position() = $pos]"/>
  </a>
  <br/>
</xsl:template> 
```

确保将其保留`<xsl:apply-templates select="play"/>`在另一个模板中，否则该方法`position()`将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:56:22.687

> ```
> <xsl:variable name="TITLE">      
>  <xsl:value-of select="../name"/>   
> </xsl:variable> 
> ```

你的问题就在这里。

的字符串值`../name`是初始上下文（当前）节点的父节点*的第一个子节点的字符串值。* `name`

您真正想要的是获取与当前 ( ) 节点`name`位置相同的子节点的值。`play`

**这个完整而短暂的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="play">
   <xsl:variable name="vPos" select="position()"/>
     <a href="{.}">
      <xsl:value-of select="../name[$vPos]"/>
     </a><br />
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当应用于提供的源 XML 文档时**：

```
<playToc>
    <play>a_and_c.xml</play>
    <play>all_well.xml</play>
    <play>as_you.xml</play>
    <play>com_err.xml</play>
    <play>coriolan.xml</play>
    <play>cymbelin.xml</play>
    <name>Title 1</name>
    <name>Title 2</name>
    <name>Title 3</name>
    <name>Title 4</name>
    <name>Title 5</name>
    <name>Title 6</name>
</playToc> 
```

**产生想要的正确结果**：

```
<a href="a_and_c.xml">Title 1</a>
<br/>
<a href="all_well.xml">Title 2</a>
<br/>
<a href="as_you.xml">Title 3</a>
<br/>
<a href="com_err.xml">Title 4</a>
<br/>
<a href="coriolan.xml">Title 5</a>
<br/>
<a href="cymbelin.xml">Title 6</a>
<br/> 
```

**请注意**：

1.  完全*没有*必要使用`xsl:apply-templates`。

2.  只有一个模板。

# jquery-mobile - 使用锚点切换 Google Maps API fusionLayer

> ID：12996653
> 
> 赞同：-2
> 
> 时间：2012-10-21T09:33:19.727
> 
> 标签：jquery-mobile, google-maps-api-3, onclick, toggle, navbar

[http://rickgutierrez.bol.ucla.edu/map_mobile6.htm](http://rickgutierrez.bol.ucla.edu/map_mobile6.htm)

我正在使用谷歌地图 API 和 JQuery Mobile v1.2 制作移动地图。我将空间数据（自行车道折线层和自行车架点层）存储在谷歌融合表中，并将它们显示在地图上。我想使用 JQuery 导航栏中的自行车和公园锚点打开/关闭每一层。我有使用桌面地图上的复选框打开/关闭图层的经验，但更喜欢移动地图的导航栏切换的外观和大小。

我的理想功能是加载地图时打开自行车图层，并且导航栏的自行车部分变暗以表示它已被选中，就像在其他网络应用程序上一样。用户可以使用地图找到带有自行车层的更安全的自行车路线，然后在目的地打开自行车停放层以找到锁定自行车的地方。每一层都可以独立打开和关闭。

我尝试将代码粘贴到此处，但一团糟。请在上面的链接中查看我的源代码。我是编码新手，不胜感激。提前致谢。

更新：我猜有人评论说，如果地理定位被拒绝，地图就不起作用。这是地理位置代码：

```
// allow iPhone or Android to track movement
        if ( useragent.indexOf('iPhone') !== -1 || useragent.indexOf('Android') !== -1 ) {
            navigator.geolocation.watchPosition( 
                displayLocation, 
                handleError, 
                { 
                    enableHighAccuracy: true, 
                    maximumAge: 30000, 
                    timeout: 27000 
                }
            );          

        // or let other geolocation capable browsers to get their static position
        } else if ( navigator.geolocation ) {
            navigator.geolocation.getCurrentPosition( displayLocation, handleError );
        } 
```

我该如何解决？我猜我需要在 else 语句中添加一些备份坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:59:39.930

将监听单击事件的 google.maps.event.addDomListener 添加到要执行切换的元素。在与该侦听器关联的函数中，添加您的代码以切换层。

我会建议：

```
if (layer.getMap() == null) layer.setMap(map); else layer.setMap(null); 
```

其中“地图”是对您的 google.maps.Map 对象的引用。

[工作示例](http://www.geocodezip.com/v3_layertoggle_map_mobile6c.html)

# c - 通过 C 套接字发送原始二进制数据？

> ID：12996657
> 
> 赞同：5
> 
> 时间：2012-10-21T09:33:43.600
> 
> 标签：c, sockets, networking

我正在努力通过 C 中的套接字发送加密数据。一切正常，直到我意识到正在发送的数据的大小比它应该的要大得多。下面的一段代码描述了这种情况：

```
#include <stdlib.h>
#include <stdio.h> 
#include <string.h>

int main() {
    char temp[100], buffer[100];
    int n = 1234567890;
    sprintf(temp, "%d", n);
    printf("Original n has size: %d\n", sizeof(n)); // 4
    printf("Buffer size: %d\n", strlen(temp));      //10
    printf("Buffer: %s", temp);
} 
```

问题是原始数字存储为 4 字节整数，而缓冲区是逐字符存储的，因此通过套接字发送的不是 4 个字节，而是 10 个一字节字符。

我想知道有没有办法将二进制数据作为原始数据发送？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T09:40:06.080

更仔细地检查[send(2)系统调用。](http://linux.die.net/man/2/send)它接受`const void *buf`. 它**不是** `char*`。就目前而言，`void *`您可以发送任何类型的数据。

这应该工作，

```
int n = 1234567890;
int net_n = hton(n);
send(sockfd, const (void *)(&net_n), sizeof(n), 0) 
```

# java - 如何在 Android 中制作 1px 的表面视图

> ID：12996660
> 
> 赞同：0
> 
> 时间：2012-10-21T09:33:55.130
> 
> 标签：java, android, surfaceview

我正在尝试为我的galaxy nexus 制作一个手电筒应用程序，但根据这个[问题](https://stackoverflow.com/questions/9505945/led-flashlight-does-not-work-on-samsung-galaxy-nexus)和它的答案，三星Galaxy Nexus 很难使用使其他手机工作的代码。我不知道我是否正确添加了表面视图。这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/buttonFlashlight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"
        android:text="Torch-ON"  />
    <SurfaceView 
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:visibility="gone"/>
</RelativeLayout> 
```

# c# - 多语言 WinForms 应用程序不适用于 .NET 2.0

> ID：12996664
> 
> 赞同：3
> 
> 时间：2012-10-21T09:34:27.447
> 
> 标签：c#, winforms, multilingual

我正在尝试使用多语言文件开发示例应用程序。
我使用：Windows 7 64 位和 Visual Studio 2012 Express。
我在网上阅读了一些教程，并创建了一个示例应用程序。

在我的 Debug 目录中，我为语言文件创建了文件夹：'en' 和 'pl'
我在这些目录和主目录中创建了文本资源文件，所以我的文件结构是：

```
lang.txt
lang.resouces
multilang.resources.dll
multilang.exe
-en
--lang.en.txt
--lang.en.resources
--multilang.resources.dll
-pl
--lang.pl.txt
--lang.pl.resources
--multilang.resources.dll 
```

我写了一个 .bat 文件来嵌入卫星程序集做我的应用程序 resgen lang.txt al.exe /t:lib /embed:lang.resources /culture:pl-PL /out:multilang.resources.dll

```
resgen en/lang.en.txt
al.exe /t:lib /embed:en/lang.en.resources,multilang.en.resources /culture:en /out:en/multilang.resources.dll

resgen pl/lang.pl.txt
al.exe /t:lib /embed:pl/lang.pl.resources,multilang.pl.resources /culture:pl /out:pl/multilang.resources.dll 
```

在我的应用程序中，我使用 ResourceManager

```
_rm = new ResourceManager("multilang", Assembly.GetExecutingAssembly()); 
```

以及获取文本的 GetString 方法

```
this._rm.GetString(stringFromRm); 
```

当我在 .NET 4.5 框架中编译我的应用程序时它工作正常，但是当我将项目属性中的目标框架更改为 .NET 2.0 时，我总是得到这个异常：

> System.Resources.MissingManifestResourceException

我的应用程序必须在 Windows XP 上运行，因此它必须适用于早期的 .NET Framework 版本。

有人可以告诉我必须更改什么才能在 .NET Framework 2.0 上运行我的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:44:10.253

在运行`resgen.exe`或`al.exe`用于应在 .NET 框架上运行的应用程序时，您必须确保生成的程序集可以被 .NET 2.0 运行时读取。.NET 4 中扩展了程序集格式，因此 2.0 运行时能够加载 4.0 程序集。

因此，请确保您使用的工具都来自较新的框架版本，`C:\Windows\Microsoft.NET\Framework\v2.0.50727`而不是来自较新的框架版本。

# functional-programming - 模式匹配中的变量如何允许参数省略？

> ID：12996668
> 
> 赞同：3
> 
> 时间：2012-10-21T09:34:30.360
> 
> 标签：functional-programming, pattern-matching, ocaml, exponentiation

我正在做一些功课，但我已经被困了几个小时。我确信这真的很微不足道，但在挖掘了所有可用的文档后，我仍然无法理解它。任何人都可以帮我一把吗？基本上，OCaml 编程中的练习要求使用平方算法求幂来定义函数 x^n。

我看过解决方案：

```
 let rec exp x = function
    0 -> 1
   | n when n mod 2 = 0  -> let y = exp x (n/2) in y*y
   | n when n mod 2 <> 0 -> let y = exp x ((n-1)/2) in y*y*x
   ;; 
```

我特别不明白的是如何从 fun 语句中省略参数 n 以及为什么要将它用作与 x 匹配的变量，这与通过平方求幂的定义没有明显的联系。

这是我的做法：

```
 let rec exp x n = match n with
   0 -> 1
   | n when (n mod 2) = 1 -> (exp x ((n-1)/2)) * (exp x ((n-1)/2)) * x
   | n when (n mod 2) = 0 -> (exp x (n/2)) * (exp x (n/2))
   ;; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:45:10.927

您的版本在语法上是正确的，产生了一个很好的答案，但执行时间很长。在您的代码中，`exp`递归调用两次，从而产生两倍的计算量，每次调用产生两倍的计算量，等等`n=0`。在解决方案中，`exp`只调用一次，结果存储在变量`y`中，然后`y`平方。

现在，关于语法，

```
let f n = match n with
  | 0 -> 0
  | foo -> foo-1 
```

相当于：

```
let f = function
  | 0 -> 0
  | foo -> foo-1 
```

该行`let rec exp x = function`是一个函数的请求，该函数接受*两个*参数：`x`和模式匹配中使用的未命名参数。在模式匹配中，行

```
 | n when n mod 2 = 0  -> 
```

命名这个参数`n`。并不是说在模式匹配的每种情况下都可以使用不同的名称（即使这不太清楚）：

```
| n when n mod 2 = 0  -> let y = exp x (n/2) in y*y
| p when p mod 2 <> 0 -> let y = exp x ((p-1)/2) in y*y*x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:09:22.723

关键字“function”不是语法糖

```
match x with 
```

但对于

```
fun x -> match x with 
```

因此

```
let rec exp x = function 
```

可以替换为

```
let rec exp x = fun y -> match y with 
```

这当然与您的解决方案等效

```
let rec exp x y = match y with 
```

请注意，我写了“y”而不是“n”以避免混淆。匹配后引入的n变量是一个新变量，因为匹配它，所以只和函数参数有关。例如，而不是

```
let y = x in ... 
```

你可以写：

```
match x with y -> ... 
```

在这个匹配表达式中，“y”表达式是匹配的“模式”。和任何模式一样，它将其变量（此处为 y）与匹配的值绑定。（这里是 x 的值）和任何模式一样，模式中的变量是新变量，可能会影响先前定义的变量。在您的代码中：

```
let rec exp x n = match n with
  0 -> 1
  | n when (n mod 2) = 1 -> (exp x ((n-1)/2)) * (exp x ((n-1)/2)) * x
  | n when (n mod 2) = 0 -> (exp x (n/2)) * (exp x (n/2))
;; 
```

在这两种情况下，变量 n 会影响参数 n。不过，这不是问题，因为两个具有相同名称的变量具有相同的值。

# javascript - 如何创建可以链接在一起的函数？

> ID：12996671
> 
> 赞同：2
> 
> 时间：2012-10-21T09:34:43.927
> 
> 标签：javascript

如何在 JavaScript 中创建一个函数列表，这些函数可以像这样一起执行操作？

对不起，我不知道它叫什么，但是当你选择一些东西而不是向它添加类时，我不知道它叫什么，而且你可以同时做其他事情！

例如：

```
list.getAll().count() 
```

或者

```
list.getAll().removeLast().dosomthingElse().count() 
```

我尝试了很多方法，但不幸的是，除非我扩展我不想要的函数类，否则我无法让它工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T09:37:33.147

这就是所谓的链接方法。您只需`this`从方法中返回对象引用 ( )：

```
List.prototype.getAll = function() {
  // do something
  return this;
} 
```

或者，如果该方法产生一个新结果，则创建一个相同类型的对象并返回：

```
List.prototype.removeLast = function() {
  var items = this.items.slice(0, items.length - 1);
  return new List(items);
} 
```

（您也可以创建一个不同类型的对象。例如，一个`toCollection`方法可以创建一个`Collection`包含列表中所有项目的新对象并将其返回。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T09:39:13.750

你需要定义一个方法。那是附加到对象的函数。

你这样定义它：

```
window.myMethod = function(){
    alert(this) ;
} 
```

对象不必是`window`. 要将另一种方法链接到最后，请使用`return this`.

```
window.myMethod = function(){
    alert(this) ;
    return this ;
}

window.myOtherMethod = function(){
    console.log(this) ;
    return this ;
}

window.myMethod().myOtherMethod() ; 
```

现在您可以使用方法链，因为第二种方法从第一种方法接收原始对象（`window`在本例中）。

# ios - 仿射变换 + 演示应用

> ID：12996672
> 
> 赞同：2
> 
> 时间：2012-10-21T09:35:01.427
> 
> 标签：ios, uiimage, cgaffinetransform

我在这里有一个演示应用程序[https://github.com/rdeert/image-transform-test](https://github.com/rdetert/image-transform-test)

导入图像后，您可以捏合、缩放、旋转图像。我想要做的是保存一个`640x480`看起来与实时预览相同的图像（横向模式）。因此，如果两侧有 100 像素的空白条，我需要在最终输出中使用相同的空白条（适当缩放）。

事实证明，这比我想象的要困难得多。经过几天的工作，我无法完全让它出来。

生成最终图像的魔术方法称为`-(void)generateFinalImage`

祝你好运！;)

**编辑**

![演示应用截图](../Images/c24a73cc15eb494bd793c3db940bb03d.png)

绿色矩形代表导入图像可以被捏合、缩放和旋转的实际区域。例如，iPhone 4S 的分辨率为 852x640。

蓝色矩形只是用于调试的实时预览，其纵横比与 640x480 相同。由于 Core Image 非常慢，实时预览可能会变得非常慢。

我想要做的是将绿色矩形中的任何内容转换为`640x480`图像。请注意，`852x640`纵横比`640x480`也略有不同，但这不是一个大问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T00:22:50.187

您的目标是获得您正在编辑的内容的精确副本，但具有原始图像的大小吗？我想它可以通过这样的方式获得：

```
- (UIImage *)padImage:(UIImage *)img to:(CGSize)size
{
    if (size.width < img.size.width && size.height < img.size.height) return img;

    size.width = MAX(size.width, img.size.width);
    size.height = MAX(size.height, img.size.height);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(NULL, size.width, size.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);

    CGRect centeredRect = CGRectMake((size.width - img.size.width)/2.0, (size.height - img.size.height)/2.0, img.size.width, img.size.height);
    CGContextDrawImage(context, centeredRect, [img CGImage]);

    CGImageRef imageRef = CGBitmapContextCreateImage(context);

    CGColorSpaceRelease(colorSpace);
    CGContextRelease(context);

    UIImage *paddedImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    return paddedImage;
}

// final image size must be 640x480
- (void)generateFinalImage
{
    float rotatableCanvasWidth = 495.0;
    float rotatableCanvasHeight = 320.0;
    UIImage *tmp = self.importedRawImage;

    CGSize size = self.importedRawImage.size;
    NSLog(NSStringFromCGSize(size));

    tmp = [self padImage:tmp to:CGSizeMake(rotatableCanvasWidth, rotatableCanvasHeight)];
    CIImage *ciImage = [[CIImage alloc] initWithImage:[tmp imageWithTransform:self.importedImageView.transform]];

    CGPoint center = CGPointMake(size.width / 2.0, size.height / 2.0);

    CIContext *context = [CIContext contextWithOptions:nil];
    CGRect r = ciImage.extent;
    r.origin.x = (r.size.width - rotatableCanvasHeight) / 2.0;
    r.origin.y = (r.size.height - rotatableCanvasWidth) / 2.0;
    r.size.width = rotatableCanvasHeight;
    r.size.height = rotatableCanvasWidth;
    self.finalImage = [UIImage imageWithCGImage:[context createCGImage:ciImage fromRect:r] scale:1.0 orientation:UIImageOrientationUp];

    self.finalImage = [self.finalImage resizedImage:CGSizeMake(100.0f, 134.0f) interpolationQuality:kCGInterpolationHigh];

    self.previewImageView.image = self.finalImage;
} 
```

# android - 在 MonoDroid 中创建用户会话

> ID：12996673
> 
> 赞同：2
> 
> 时间：2012-10-21T09:35:19.710
> 
> 标签：android, session, xamarin.android

我正在开发需要用户登录的 android 应用程序。我正在使用 Monodroid 开发这个应用程序。在我的应用程序中，用户登录时将启动许多活动。我已将登录活动设置为主启动器，当用户成功登录时，用户将被发送到主活动。

我想如何为用户保存会话，以便用户每次启动应用程序时都不需要登录。

由于 monodroid 对我来说很新，我无法完成这项工作。人们推荐我使用 SharedPrefrencs 来创建会话，但尝试了很多让它工作，应用程序总是崩溃。当用户处于 mainactivity 时，崩溃的原因是用户的 null 值。正如许多用户所推荐的那样，我将 Main Activity 创建为 main laucher 并检查用户是否从那里登录。但没有什么对我有用。

我已经包含了登录活动和主活动的整个代码。我想将“driverId”保存在首选项中，并且当重新启动应用程序时，主要活动将从首选项中检索“driverId”。

请一些熟悉 monodroid 环境的人可以帮助我解决这个问题。

**登录活动代码**

```
using System;

using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;
using Android.Locations;
using RestSharp;
using TheNorthStar.Api.Requests;
using TheNorthStar.Api.Results;
using NorthStar.Driver.Application;
using Android.Preferences;
using Object = Java.Lang.Object;

namespace NorthStar.Driver
{
    public class DriverLogonAsync : AsyncTask

    {
        private ProgressDialog processDialog;
        private Context m_context;
        private DriverLogon m_driver;

        private bool _resterror;

        public DriverLogonAsync( Context context, DriverLogon driver )
        {
            m_context = context;
            m_driver = driver;

            _resterror = false;
        }

        /*
         * throws
         * should separate out logic and use MyMessagebox..
         */
        private void SetComfirmAlertBox(string carNum, DriverLogonResult result)
        {
            var api = new ConnectToSever(Helper.GetServer(m_context));
            string resultOfCarDetail; CarDetails res;
            try
            {
                resultOfCarDetail = api.ComfirmLogginOn(m_driver);
            }
            catch
            {
                Android.Util.Log.Info("EXC_conflogon1", "confirm logging on failed");
                throw;
            }
            try
            {
                res = Newtonsoft.Json.JsonConvert.DeserializeObject<CarDetails>(resultOfCarDetail);
            }
            catch (Exception ex)
            {
                Android.Util.Log.Info("EXC_conflogon2", "deserialize confirm logging on failed\n" + ex.Message);
                throw;
            }

            if (res.carExists != true)
            {
                MyMessageBox.SetAlertBox("Opps!!!!!!!!", "This Car Number Was Wrong!!!!", "OK", m_context);
            }
            else
            {
                string carType = res.carType;
                string seatNum = res.numOfSeats.ToString();
               // MainActivity act = new MainActivity( result.driverId );
                var mact = new Intent(m_context,typeof(MainActivity) );
                mact.PutExtra( "driverID",  result.driverId.ToString() );
                MyMessageBox.SetAlertBox("Comfirm!", "Your car is a: " + carType + " with " + seatNum + " seats??", "Yes", "No", mact,m_context);

            }
        }

        /*private void ChangeDriverStatues()
        {

        }*/

        protected override void OnPreExecute()
        {
            base.OnPreExecute();
            processDialog = ProgressDialog.Show( m_context, "Driver Loging On...", "Please Wait...", true, true);
        }

        protected override Object DoInBackground(params Object[] @params)
        {
            var api = new ConnectToSever(Helper.GetServer(m_context));

            string res = string.Empty;
            try
            {
                res = api.DriverLogingOn(m_driver);
            }
            catch
            {
                _resterror = true;
                Android.Util.Log.Info("EXC_dlogon1", "driver logon failed");
                return -1;
            }
            return res;
        }

        protected override void OnPostExecute(Object result)
        {
            base.OnPostExecute(result);
            //hide and kill the progress dialog
            processDialog.Hide();
            processDialog.Cancel();

            if (_resterror == true)
            {
                Android.Util.Log.Info("EXC_dlogon2", "logon connection has failed, noop");
                return;
            }

            DriverLogonResult resDriverDetail;
            try
            {
                resDriverDetail = Newtonsoft.Json.JsonConvert.DeserializeObject<DriverLogonResult>(result.ToString());
            }
            catch (Exception ex)
            {
                Android.Util.Log.Info("EXC_dlogon3", "logon deser has failed, noop\n" + ex.Message);
                return;
            }

            if (resDriverDetail.logonSuccess)
            {
                this.SetComfirmAlertBox( m_driver.carNum, resDriverDetail );  
            }
            else
            {
                MyMessageBox.SetAlertBox("Wrong!", "Wrong username or password!!!", "OK!",m_context);
            }
        }
    }

    [Activity(Label = "MyDriver-Driver", MainLauncher = true, Icon = "@drawable/icon", NoHistory = true)]
    public class Activity1 : Activity
    {
        private void CreateAlert()
        {

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.SetTitle("GPS is Off")
                .SetMessage("You need GPS to you this application."+ "\n" +
                             "Do you want to go to settings menu?")
                .SetPositiveButton("Setting",
                    (sender, e) =>
                    {
                        Intent intent = new Intent(Android.Provider.Settings.ActionLocationSourceSettings);
                        StartActivity(intent);
                        this.Finish();
                    })
                    .SetNegativeButton("No", (sender, e) => this.Finish());

            AlertDialog alert = builder.Create();
            alert.Show();
        }
        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            // Set our view from the "main" layout resource
            SetContentView(Resource.Layout.Main);

            Android.Util.Log.Info("EXC_logstart", "**************** starting driver module ****************");

            Boolean isGPSEnabled = false;
            Boolean isNetworkEnabled = false;
            LocationManager _locationManager;
            _locationManager = (LocationManager)GetSystemService(LocationService);
            isGPSEnabled = _locationManager.IsProviderEnabled(LocationManager.GpsProvider);

            // getting network status
            isNetworkEnabled = _locationManager.IsProviderEnabled(LocationManager.NetworkProvider);

            if (!isGPSEnabled && !isNetworkEnabled)
            {
                CreateAlert();
            }

            // Get our button from the layout resource,
            // and attach an event to it
            EditText eTextUsername = FindViewById<EditText>(Resource.Id.UserNameBox);
            EditText eTextPassword = FindViewById<EditText>(Resource.Id.PasswordBox);
            EditText eTextCarNum = FindViewById<EditText>(Resource.Id.CarNumBox);
            Button viewPrefsBtn = FindViewById<Button>(Resource.Id.BtnViewPrefs);
            Button button = FindViewById<Button>(Resource.Id.MyButton);

            button.Click += delegate 
            {
                if (eTextCarNum.Text != "" && eTextPassword.Text != "" && eTextUsername.Text != "")
                {
                    DriverLogon driver = new DriverLogon();
                    driver.userName = eTextUsername.Text;
                    driver.password = eTextPassword.Text;
                    driver.carNum = eTextCarNum.Text;
                    DriverLogonAsync asyDriver = new DriverLogonAsync(this, driver);
                    asyDriver.Execute();
                }
            };

            viewPrefsBtn.Click += (sender, e) =>
            {
                StartActivity(typeof(PreferencesActivity));
            };
        }
    }
} 
```

因此，当用户成功登录时，“driverId”应该被保存，并且可以在重新启动应用程序时从主要活动中检索。

**主要活动代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using Android.Preferences;
using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using RestSharp;
using Android.Locations;
using TheNorthStar.Api.Requests;
using TheNorthStar.Api.Results;
using NorthStar.Driver.Application;
using System.Timers;
using AutoMapper;
using Object = Java.Lang.Object;
using Timer = System.Timers.Timer;

namespace NorthStar.Driver
{
    [Activity(Label = "Home")]
    public class MainActivity : Activity
    {   
        string m_driverId;
        string m_bookingId;
        string m_address;
        int i = 1;
        private Timer _requestWorkTimer;

        /*
         * throws
         */
        private void SetDriverStatues(string status)
        {
            m_driverId = Intent.GetStringExtra("driverID");
            var api = new ConnectToSever(Helper.GetServer(ApplicationContext));
            DriverLogon driver = new DriverLogon();
            //Booking booking = RequestToSever();
            driver.driverID = Int32.Parse(m_driverId);
            driver.driverStatus = status;
            try
            {
                api.SetDriverStatus(driver);
            }
            catch
            {
                Android.Util.Log.Info("EXC_setdstat1", "set driver status failed");
                throw;
            }
        }

        protected override void OnDestroy()
        {
            base.OnDestroy();
            _requestWorkTimer.Stop();
        }

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            SetContentView(Resource.Layout.Mainpage);
            //EditText messageBox = FindViewById<EditText>( Resource.Id.MessagesBox );
            Button button = FindViewById<Button>(Resource.Id.LogOutButton);

            m_driverId = Intent.GetStringExtra("driverID");
            var service = new Intent(this, typeof(NorthStarBackgroundService));
            service.PutExtra("driverId",m_driverId);

            StartService(service);

            ThreadPool.QueueUserWorkItem(state => SetDriverStatues("Available"));
           // this.SetDriverStatues( "Available" );

            _requestWorkTimer = new Timer(15000);
            _requestWorkTimer.Elapsed += (sender, e) =>
            {
                ThreadPool.QueueUserWorkItem(x => RequestWork());
            };
            _requestWorkTimer.Start();

            button.Click += (sender, args) =>
                                {
                                    try
                                    {
                                        SetDriverStatues("Logoff");
                                    }
                                    catch
                                    {
                                        Android.Util.Log.Info("EXC_setdstat2", "set driver status failed");
                                        return;
                                    }
                                    var mact = new Intent(this, typeof(Activity1));
                                    mact.AddFlags(ActivityFlags.ClearTop);
                                    StartActivity(mact);
                                };
        }

        private void CheckMessage()
        {
          /*  if (  )
            {
                //timeout so return home

            }
           /* else
            {
                timerCount--;
                RunOnUiThread(() => { jobTimerLabel.Text = string.Format("{0} seconds to respond", timerCount); });

            }*/
        }

        protected override void OnResume()
        {
            base.OnResume();
            _requestWorkTimer.Start();
        }

        private void CreateAlert()
        {

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.SetTitle("GPS is Off")
                .SetMessage("Do you want to go to settings menu?")
                .SetPositiveButton("Setting",
                    (sender, e) =>
                    {
                        Intent intent = new Intent(Android.Provider.Settings.ActionLocationSourceSettings);
                        StartActivity(intent);
                        this.Finish();
                    })
                    .SetNegativeButton("No", (sender, e) => this.Finish());

            AlertDialog alert = builder.Create();
            alert.Show();
        }

        /*
         * throws
         */
        private void RequestWork()
        {
            _requestWorkTimer.Stop();
            var api = new ConnectToSever(Helper.GetServer(ApplicationContext));
            DriverMoreWorkRequest driver = new DriverMoreWorkRequest();
            driver.driverID = Int32.Parse(m_driverId);
            NorthStarBackgroundService n = new NorthStarBackgroundService();
            driver.Lat = n.currentLattitude;
            driver.Lng = n.currentLongtitude;
            Object result; Booking booking;
            try
            {
                result = api.RequestWork(driver);
            }
            catch
            {
                Android.Util.Log.Info("EXC_reqwork1", "request work failed");
                throw;
            }
            try
            {
                booking = Newtonsoft.Json.JsonConvert.DeserializeObject<Booking>(result.ToString());
            }
            catch (Exception ex)
            {
                Android.Util.Log.Info("EXC_reqwork1", "deserialize request work failed\n" + ex.Message);
                throw;
            }
            if (booking != null)
            {
                m_bookingId = booking.BookingId.ToString();
                //string add = api.GetCustomerAddress(booking);

                RunOnUiThread(() =>
                {
                    var mact = new Intent(this, typeof(NewWorkAvailableActivity));
                    mact.PutExtra("driverID", m_driverId);
                    mact.PutExtra("bookingId", m_bookingId);
                    mact.PutExtra("fullAddress", booking.Address);
                    mact.PutExtra("jobLocation", booking.PickupSuburb);
                    mact.PutExtra("customerPhoneNumber", booking.PassengerPhoneNumber);

                    StartActivity(mact);

                });
            }
            else
            {
                _requestWorkTimer.Start();
            }                     
        }

        public object even { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:51:10.887

我完全确定您在这里尝试做什么，但要从 Shared Preferences 尝试获取驱动程序 ID（来自登录活动）：

```
var prefs = GetSharedPreferences("MyApp",Android.Content.FileCreationMode.Private);
var driverID = 0;
if (prefs.Contains("DriverID"))
{
    driverID = prefs.GetInt("DriverID", 0);
}
else
{
    //Call the Async Task to get the Driver or whatever and when you've got it:
    var prefsEdit = prefs.Edit();
    prefsEdit.PutInt("DriverID", driver.ID);
    prefsEdit.Commit();
    driverID = prefs.GetInt("DriverID", 0);
}

var mact = new Intent(this, typeof(MainActivity))
            .PutExtra("driverID", driverID);
StartActivity(mact); 
```

或者，我会将整个 Driver 对象粘贴在 sqlite db 中，并在您每次进入时将其取回，但显然我不知道您的要求。

# c - 使用 C 字符串函数解析 C 字符串（用户通过控制台输入） - 分段错误

> ID：12996675
> 
> 赞同：2
> 
> 时间：2012-10-21T09:35:29.813
> 
> 标签：c, string-parsing

我正在尝试编写一个一次解析字符串（a `char *`）字符的函数，但由于某种原因，我收到了分段错误。我正在尝试读取用户输入并将其解析为程序名称和参数，但这有点不敬。

安慰：

```
>./mish 
>mish>ls
>command start:ls 
>*tempCommand:l 
>bottom
>Segmentation fault 
```

代码：

```
 ParserData parseCommand(ParserData parserData, char* command)
    {
        char* tempCommand;
        char* currToken = '\0';
        short firstSpace = 0;

        printf("command start:%s \n", command);

        strcpy(tempCommand, command);

        while(*tempCommand)
        {
            printf("*tempCommand:%c \n", *tempCommand);

            if((char)*tempCommand == ' ' && firstSpace == 0)
            {
               printf("currToken: %c \n", (char)*currToken);
               strcpy(parserData.myChildProgramName,currToken);
               printf("after:");
               currToken = '\0';
               firstSpace = 1;
            }
            else if((char)*tempCommand != ' ' && *tempCommand != '-')
            {
              //strcat(currToken, tempCommand); 
            }

            printf("bottom\n");

            printf("currToken: %c \n", *currToken);

            tempCommand++;

       }

       printf("out\n");
       parserData.myChildProgramArguments = currToken;

      return parserData;
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T09:38:26.453

`tempCommand`当`char*`：

```
strcpy(tempCommand, command); 
```

被调用，导致分段错误，因为`strcpy()`它将写入不应该写入的地方。`tempCommand`在调用之前分配内存`strcpy()`：

```
tempCommand = malloc(strlen(command) + 1); /* +1 for terminating null. */
if (tempCommand)
{
    /* Use 'tempCommand' */
} 
```

记住`free(tempCommand);`在不再需要时。

没有理由将`*curToken`or的值`*tempCommand`转换为 a `char`，因为它已经是类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:41:20.213

您需要使用 malloc 为 tempCommand 变量动态分配内存。

就像是：

```
tempCommand = malloc(sizeof(command)); 
```

这应该可以解决问题。祝你好运！

# java - 微调器无法正常工作

> ID：12996682
> 
> 赞同：1
> 
> 时间：2012-10-21T09:36:40.570
> 
> 标签：java, android, android-widget, android-alertdialog, android-spinner

我在 Alertdialog 中使用 3 个微调器。当我使用没有 onitemselectedlistener 的微调器时，它会正确填充，而当我使用 onItemSelectedListener 时，它不会填充值，我尝试了[stackoverflow Questions](https://stackoverflow.com/questions/5624825/spinner-onitemselected-executes-when-it-is-not-suppose-to)的其他一些建议，现在当我单击某个项目时，它第一次填充所有值

我在这里发布了我的警报对话框代码

```
AlertDialog.Builder myDialog = new AlertDialog.Builder(CameraDemo.this);
    myDialog.setTitle("Save");
    TableRow.LayoutParams rowparams = new TableRow.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);

    LinearLayout layout1 = new LinearLayout(CameraDemo.this);
    layout1.setOrientation(LinearLayout.VERTICAL);
    Spinner spin = new Spinner(CameraDemo.this);
    Cursor cursor = placeData.queueAllDoc();
    startManagingCursor(cursor);
    SimpleCursorAdapter cu = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor, new String[]{SQLiteoperations.DOC_TYPE}, new int[]{android.R.id.text1});
    cu.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spin.setAdapter(cu);

    spin.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int position,
                long id) {
            if(mSpinnerInitializedCount < mSpinnerCount){
                mSpinnerInitializedCount++;
                return;                         
            }
            Cursor incursor1 = (Cursor) parent.getItemAtPosition(position);
            int did = incursor1.getInt(incursor1.getColumnIndex(SQLiteoperations.DOC_ID));
            doc_id = did;
            System.out.println(did);
            incursor1.close();
        }
        public void onNothingSelected(AdapterView<?> arg0) {
        return;
        }
    });

    LayoutParams TxtLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    final EditText saveEdt = new EditText(CameraDemo.this);
    LayoutParams locationEdtLayoutParams = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    saveEdt.setLayoutParams(locationEdtLayoutParams);

    final TextView saveTxt = new TextView(CameraDemo.this);
    saveTxt.setLayoutParams(TxtLayoutParams);
    saveTxt.setText("Name");
    TextView groupTxt = new TextView(CameraDemo.this);
    groupTxt.setLayoutParams(TxtLayoutParams);
    groupTxt.setText("Group");
    TextView clientTxt = new TextView(CameraDemo.this);
    clientTxt.setLayoutParams(TxtLayoutParams);
    clientTxt.setText("Client");
    TextView docTxt = new TextView(CameraDemo.this);
    docTxt.setLayoutParams(TxtLayoutParams);
    docTxt.setText("Document Type");

    TableRow grouprow = new TableRow(CameraDemo.this);
    grouprow.setLayoutParams(rowparams);
    final TableRow clientrow = new TableRow(CameraDemo.this);
    clientrow.setLayoutParams(rowparams);
    final TableRow docrow = new TableRow(CameraDemo.this);
    docrow.setLayoutParams(rowparams);
    final TableRow namerow = new TableRow(CameraDemo.this);
    namerow.setLayoutParams(rowparams);

    Spinner spin2 = new Spinner(CameraDemo.this);
    Cursor cursor2 = placeData.queueAllGroup();
    startManagingCursor(cursor2);
    SimpleCursorAdapter cu2 = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor2, new String[]{SQLiteoperations.GROUP_NAME}, new int[]{android.R.id.text1});
    cu2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spin2.setAdapter(cu2);

    spin2.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int position,
                long id) {
            if(mSpinnerInitializedCount < mSpinnerCount){
                mSpinnerInitializedCount++;
                return;                         
            }
            Cursor incursor2 = (Cursor) parent.getItemAtPosition(position);
            int gid = incursor2.getInt(incursor2.getColumnIndex(SQLiteoperations.GROUP_ID));
            group_id = gid;
            System.out.println(gid);
            incursor2.close();
        }
        public void onNothingSelected(AdapterView<?> arg0) {
            return;
        }
    });

    Spinner spin3 = new Spinner(CameraDemo.this);
    Cursor cursor3 = placeData.queueAllClient(1);
    startManagingCursor(cursor3);
    SimpleCursorAdapter cu3 = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor3, new String[]{SQLiteoperations.CLIENT_NAME}, new int[]{android.R.id.text1});
    cu3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spin3.setAdapter(cu3);

    spin3.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int position,
                long id) {
            if(mSpinnerInitializedCount < mSpinnerCount){
                mSpinnerInitializedCount++;
                return;                         
            }
            Cursor incursor3 = (Cursor) parent.getItemAtPosition(position);
            int cid = incursor3.getInt(incursor3.getColumnIndex(SQLiteoperations.CLIENT_ID));
            client_id = cid;
            System.out.println(cid);
            incursor3.close();
        }
        public void onNothingSelected(AdapterView<?> arg0) {
            return;
        }
    });

    grouprow.addView(groupTxt);
    grouprow.addView(spin2);
    clientrow.addView(clientTxt);
    clientrow.addView(spin3);
    docrow.addView(docTxt);
    docrow.addView(spin);
    namerow.addView(saveTxt);
    namerow.addView(saveEdt);

    layout1.addView(grouprow);
    layout1.addView(clientrow);
    layout1.addView(docrow);
    layout1.addView(namerow);

    myDialog.setView(layout1);
    myDialog.show(); 
```

请帮我找到问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:08:54.947

我认为您不应该关闭通过调用获得的光标

```
parent.getItemAtPosition(position); 
```

你没有查询任何东西。它已经由 Activity 管理

# c# - 按代码排序列表，然后按名称

> ID：12996685
> 
> 赞同：3
> 
> 时间：2012-10-21T09:36:55.693
> 
> 标签：c#, sorting, delegates

我有一个对象列表。我通过编写以下行按代码对列表进行排序：

```
Result.Sort(delegate(Position p1, Position p2) { return p1.Code.CompareTo(p2.Code); }); 
```

但我想先按代码然后按名称对这一行进行排序。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T09:39:02.193

为什么不使用 LINQ？

```
var ordered = list.OrderBy(x => x.Code).ThenBy(x => x.Name).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T10:03:13.610

没有 LINQ：

```
Result.Sort(delegate(Position p1, Position p2) 
            { 
                var byCode = p1.Code.CompareTo(p2.Code); 
                return byCode == 0 ? p1.Name.CompareTo(p2.Name) : byCode; 
            }); 
```

或使用比较器的相同逻辑：

```
Result.Sort(new PositionComparer());
class PositionComparer : IComparer<Position>
{
    public int Compare(Position p1, Position p2) 
    { 
        var byCode = p1.Code.CompareTo(p2.Code); 
        return byCode == 0 ? p1.Name.CompareTo(p2.Name) : byCode; 
    }
} 
```

# hibernate - 如何自定义自动生成的模式（或覆盖 Table 类）？

> ID：12996686
> 
> 赞同：1
> 
> 时间：2012-10-21T09:36:55.913
> 
> 标签：hibernate

我在一些测试中使用 Hibernate 的自动模式生成，但它为 FK 约束生成随机名称，而根本没有为其他约束生成名称。这使得 SQL 异常有点难以理解。

我想知道有没有办法自定义输出？我已经检查了 Dialect 和 NamingStrategy，但约束名称不是由这些生成的。Table 的源代码显示格式是硬编码的，所以看来我必须重写 Table。但是，Table 类在很多地方也是硬编码的，所以这似乎很困难。我可以在输出上运行大量的 reg ex 来添加名称，但我真的很想从源头上做。

我正在使用休眠 3.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:52:10.223

你试过注释吗？

```
@org.hibernate.annotations.ForeignKey(name="FK_YOUR_NAME") 
```

# javascript - 事件的骨干不起作用。为什么？

> ID：12996689
> 
> 赞同：2
> 
> 时间：2012-10-21T09:37:25.007
> 
> 标签：javascript, jquery, backbone.js

我正在学习骨干。我正在尝试使用事件进行更改。但它给了我这个错误`Uncaught TypeError: Object function (){ parent.apply(this, arguments); } has no method 'on'`。`line 6`下面是我的代码

```
$(function () {
var ford = new Backbone.Model.extend({
    type: 'car',
    color: 'blue'
});
ford.on('change', function () {
    console.log('something changed');
});
ford.set('type', 'truck');
}); 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:42:03.003

您还没有创建一个 ford 的实例。做类似的事情

```
var f = new ford(); 
```

然后让另一个函数监听它的' [change](http://backbonejs.org/#Model-change) '事件。

```
f.on('change', function () {
    console.log('something changed');
}); 
```

在这里，[extend](http://backbonejs.org/#Model-extend)用于创建构造函数。您必须创建对象才能使模型栩栩如生。

# java - 何时将实例变量设为私有？

> ID：12996692
> 
> 赞同：3
> 
> 时间：2012-10-21T09:38:02.980
> 
> 标签：java, oop

我试图了解类中 getter/setter 方法的用法。假设我们有一个名为 A 的类，其中包含一些*公共*实例变量，然后是一个带有参数的构造函数，其中参数从另一个类（主）传递给它。在构造函数内部，我们让这些实例变量等于传递的值。

现在，如果这个类被另一个程序员使用，没有什么能阻止他们直接访问/更改实例变量为无效的东西。通过将实例变量设为私有，我们可以消除对这些变量的访问。但是，如果我们希望间接或在某些特定条件下更新/更改这些实例变量，或者只是让人们可以访问实例变量，我们将为此创建一个 getter/setter 对。

好处？：
1.在set()方法下，只有在某些正当的理由下才
改变实例变量 2.这样我们就可以显示实例变量实际上是什么，而不给使用这个类的程序员改变它的能力。

这是一个正确的解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T09:45:29.407

**封装**——指将所有相关成员（变量和方法）放在一个对象中。将成员变量指定为私有可以隐藏变量和方法。对象应该从外部视图中隐藏它们的内部运作。**良好的封装通过防止对象以意想不到的方式相互交互来提高代码模块化**，这反过来又使未来的开发和重构工作变得容易。

![在此处输入图像描述](../Images/8e187776886939defe7f0ffe40a52dd6.png)

能够封装类的成员对于**安全性**和**完整性**很重要。我们可以保护变量免受不可接受的值的影响。上面的示例代码描述了如何使用封装来保护*MyMarks*对象不具有负值。*对成员变量vmarks*的任何修改只能通过 setter 方法进行`setMarks(int mark)`。这可以通过引发异常来防止对象*MyMarks*具有任何负值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:41:28.663

你的解释是正确的。另外（在我的脑海中）：

*   它允许更改类的实现（例如，如果您希望删除该字段并替换它），而不会强迫消费者与您的类进行任何不同的交互。
*   它允许 AOP 框架拦截对您的 get/set 方法的调用。
*   您可以通过注释指定访问方法的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T09:59:47.790

是的，你的解释是正确的。**但这是因为语言的限制**。例如，在 python 中，您不需要每次都编写 getter 或 setter，因为您可以覆盖成员变量的行为。例如：

```
class MyClass:
    def __init__(self, myproperty):
        self.myproperty = myproperty 
```

如果每个人都以如下方式使用它：

```
print(new MyClass("test").myproperty) 
```

你仍然可以改变你的吸气剂的行为：

```
class MyClass:
    def __init__(self, myproperty):
        self._myproperty = myproperty

    @property
    def myproperty(self):
        return self._myproperty + " changed behavior" 
```

甚至没有触摸代码的二传手什么使用你的类：

```
 @myproperty.setter
   def myproperty(self, myproperty):
       if len(myporperty) > 0:
            self._myproperty = myproperty 
```

有关更好的示例，请参阅[属性](http://docs.python.org/library/functions.html#property)参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-13T18:03:19.530

如果一个实例变量只能被其类中定义的方法使用，那么它应该被设为私有。如果一个实例变量必须在一定的范围内，那么它应该是私有的并且只能通过访问器方法[getter以及 Setter] 方法。

# java - 关于如何在 Eclipse 4 中使用 IContextFunction 的示例

> ID：12996698
> 
> 赞同：3
> 
> 时间：2012-10-21T09:39:20.007
> 
> 标签：java, eclipse, eclipse-plugin, osgi, eclipse-rcp

我读过`org.eclipse.e4.core.contexts.IContextFunction`但在网上找不到一个实际的例子。
我的理解是一个组件实现了一个`IContextFunction`并且在调用`compute`另一个对象时是延迟创建的。但是我不清楚
如何/何时调用该方法。 例如以下内容： `compute`

```
<?xml version="1.0" encoding="UTF-8"?>  
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0"   
  name="com.example.e4.rcp.todo.contextservice.translate">  

<implementation class="com.example.e4.rcp.todo.contextservice.Test"/>  

 <service>  
   <provide interface="org.eclipse.e4.core.contexts.IContextFunction"/>  
 </service>  

 <property name="service.context.key" type="String"   
   value="com.example.e4.rcp.todo.contextservice.test"/>  

</scr:component> 
```

必须有人要求调用 for，`com.example.e4.rcp.todo.contextservice.test`但`compute`我不清楚它是如何使用的。
有人有示例参考吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:33:57.243

It is what gets injected into your pojos. E.g.

```
public class YourPojo {
   @Inject
   @Named("com.example.e4.rcp.todo.contextservice.test")
   private Object yourObject;
} 
```

OR

```
public class YourPojo {
   @Inject
   public void test(IEclipseContext ctx) {
        Object yourObject = ctx.get("com.example.e4.rcp.todo.contextservice.test");
   }
} 
```

OR

```
public class YourPojo {
   @Inject
   public void test(@Named("com.example.e4.rcp.todo.contextservice.test") Object yourObject) {
      // consume yourObject
   }
} 
```

# arrays - 无法释放内存

> ID：12996699
> 
> 赞同：0
> 
> 时间：2012-10-21T09:39:46.220
> 
> 标签：arrays, malloc, free

我有一个 3 void* 的结构：

```
typedef struct ck{

void * arg1;
void * arg2;
void * arg3;

} argCookie; 
```

后来我实例化了argCookie：

```
argCookie myCookie; 
```

然后我为它的论点赋予一些价值：

```
 unsigned long size;
//give a value to size
unsigned short array[size];
//fill the array

myCookie.arg1=malloc(sizeof(size));
myCookie.arg2=malloc(sizeof(array));
memcpy(myCookie.arg1,&size,sizeof(size));
memcpy(myCookie.arg2,array,sizeof(array)); 
```

到目前为止一切顺利，我现在可以从我的结构中访问数组和大小，没问题。当我尝试释放已分配的内存时会出现问题：

```
free(myCookie.arg1);
free(myCookie.arg2);//something goes bad when this line of code is executed don't know why
free(myCookie.arg3);
myCookie.arg1=NULL;
myCookie.arg2=NULL;
myCookie.arg3=NULL; 
```

当行“free(myCookie.arg2);” 执行我收到以下消息：

“恐慌：断言“（char *）NextSlot（prev）<= p”失败，文件“/usr/src/lib/libc/ansi/malloc.c”，第252行

syslib:panic.c: 堆栈跟踪: 0x468b 0x53b4 0x975a 0x2a33 0x2582 0x100a"

有谁知道为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:45:36.000

free(myCookie.arg1) 正在清理分配给整个结构的内存。

我认为你应该释放整个东西：

```
free(myCookie); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T03:09:53.560

我认为，既然您已分配 arg1 的大小为“size”，而 arg2 分配的大小为“array”，那应该与这些结构成员的数据类型相对应。所以， void * arg1;

应该 ：

无符号长 * arg1;

同样，修改 arg2 和 arg3。

# c# - 返回已处理记录数的 SQL Server 存储过程

> ID：12996705
> 
> 赞同：4
> 
> 时间：2012-10-21T09:40:43.703
> 
> 标签：c#, sql-server, stored-procedures, timer, return

我有一个 Winforms 应用程序，它执行一个检查多行（大约 500k）的存储过程。为了通知用户已经处理了多少行，我需要一个存储过程，它每 n 行返回一个值。例如，每处理 1000 行（大多数是`INSERT`）。

否则我只能在处理所有行时通知。任何提示如何解决这个问题？

我认为使用触发器或某些计划任务可能很有用，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T10:33:51.470

所以这是一个非常有趣的问题。大约 5 年前我尝试过，但没有成功，所以这对我来说是一个小挑战：) 好吧，这就是我为你准备的。

要从 SQL Server 发送消息，您需要使用`raiserror`带有`nowait`选项的命令。所以我写了一个存储过程

```
create procedure sp_test
as
begin
    declare @i bigint, @m nvarchar(max)

     select @i = 1

     while @i < 10
     begin
         waitfor delay '00:00:01'
         select @m = cast(@i as nvarchar(max))
         raiserror(@m, 0, 0) with nowait
         select @i = @i + 1
     end
end 
```

如果您尝试在 SSMS 中执行它，您将看到该消息出现在消息部分，而过程仍然有效。好的，我们收到了来自服务器的消息。现在我们需要在客户端处理它。

为此，我创建了一个这样的 SQLCommand

```
SqlCommand cmd = new SqlCommand("sp_Test");
cmd.Connection = new SqlConnection("Server=HOME;Database=Test;Trusted_Connection=True;"); 
```

现在捕捉我们使用`InfoMessage`的 SqlConnection 对象的消息：

```
cmd.Connection.InfoMessage += Connection_InfoMessage;

static void Connection_InfoMessage(object sender, SqlInfoMessageEventArgs e)
{
    Console.WriteLine(e.Message);
} 
```

现在我们正在尝试显示消息

```
cmd.Connection.Open();
try
{
    SqlDataReader r = cmd.ExecuteReader();
}
finally
{
    cmd.Connection.Close();
} 
```

成功 ：）

顺便说一句，您不能使用`ExecuteNonQuery()`，因为它在执行结束时返回连接的消息。此外，您可能希望在后台模式下运行查询，因此它不会锁定您的 winform 客户端。

# c# - 如何使用 C# 并行发送 Web 请求。

> ID：12996711
> 
> 赞同：1
> 
> 时间：2012-10-21T09:41:32.803
> 
> 标签：c#, parallel-processing, httpwebrequest

我想测试我的几个网络服务。如何并行发送 httpWebRequests？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T09:43:34.137

您是否尝试使用 Task Parallel 库。[您可以在此处](http://msdn.microsoft.com/en-us/library/dd460717.aspx)找到更多信息。

例如，您可以调用 Invoke 方法来并行执行几个委托：

```
Parallel.Invoke(() => DoSomeWork(), () => DoSomeOtherWork()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T10:15:08.223

试试这个：

```
 new List<string>
                    {
                        "http://www.stackoverflow.com",
                        "http://www.google.com"
                    }
                    .AsParallel().ForAll(x =>
                                             {
                                                 var client = new WebClient();
                                                 client.DownloadStringAsync(new Uri(x));
                                                 client.DownloadStringCompleted +=
                                                     (o, e) =>
                                                         {
                                                             var result = e.Result; // html will be here
                                                             Console.WriteLine("Completed");
                                                         };
                                             }); 
```

或这个：

```
Parallel.ForEach(new List<string>
                                 {
                                     "http://www.stackoverflow.com",
                                     "http://www.google.com"
                                 }, x =>
                                        {
                                            var client = new WebClient();
                                            client.DownloadStringAsync(new Uri(x));
                                            client.DownloadStringCompleted +=
                                                (o, e) =>
                                                {
                                                    var result = e.Result; // html will be here
                                                    Console.WriteLine("Completed");
                                                };
                                        } 
```

有关更多信息，请阅读[并行编程](http://www.albahari.com/threading/part5.aspx)

# scala - 向集群提交 Scala 代码

> ID：12996717
> 
> 赞同：4
> 
> 时间：2012-10-21T09:42:31.720
> 
> 标签：scala, cluster-computing, akka

是否可以使用多个节点在 oracle 网格引擎上运行一些 akka 代码？

因此，如果我使用作为“消息传递模型”的 actor-model，是否可以使用 Scala 和 akka 框架在集群或网格等分布式内存系统上运行我的代码？

如果是这样，是否有类似的东西`mpirun`在`mpi -c`不同的节点上运行我的程序？你能举一个使用 oracle Grid Engine 的提交示例吗？

我如何知道我在哪个节点上的 scala 内部以及作业已提交到多少个节点？

是否可以通过actor-model与其他节点通信？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T10:27:53.143

`mpirun`或 (`mpiexec`在某些系统上) 可以运行任何类型的可执行文件（即使它们不使用 MPI）。我目前使用它在集群上启动 java 和 scala 代码。在调用时将参数传递给可执行文件可能很棘手，`mpirun`因此您可以使用中间脚本。

我们使用与 GridEngine 不兼容的 Torque/Maui 脚本，但这是我的同事目前正在使用的脚本：

```
#!/bin/bash
#PBS -l walltime=24:00:00
#PBS -l nodes=10:ppn=1
#PBS -l pmem=45gb
#PBS -q spc
# Find the list of nodes in the cluster
id=$PBS_JOBID
nodes_fn="${id}.nodes"
# Config file
config_fn="human_stability_article.conf"
# Java command to call
java_cmd="java -Xmx10g -cp akka/:EvoProteo-assembly-0.0.2.jar ch.unige.distrib.BuildTree ${nodes_fn} ${config_fn} ${id}"
# Create a small script to pass properly the parameters
aktor_fn="./${id}_aktor.sh"
echo -e "${java_cmd}" >> $aktor_fn
# Copy the machine file to the proper location
rm -f $nodes_fn
cp $PBS_NODEFILE $nodes_fn
# Launch the script on 10 notes
mpirun -np 10 sh $aktor_fn > "${id}_human_stability_out.txt" 
```

# objective-c - 比较两个代表日期的 NSStrings

> ID：12996725
> 
> 赞同：0
> 
> 时间：2012-10-21T09:43:38.680
> 
> 标签：objective-c, cocoa, cocoa-touch, nsstring, nsdate

我`NSSortDescriptor`用来比较两个日期；它运作良好。但我想比较两个日期字符串，如“oct-22,2012 Morning”和“oct-22,2012 Evening”。

我用空格分隔每个字符串并比较没有早/晚字符串的日期，但我想显示上面的整个格式，即即将到来的状态是“oct-22,2012 Morning”。

我比较两个日期的代码如下：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey: @"convertedDate" ascending:YES] ;
[sortArray sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];   
GetBuddiesObject *datewiseSortObj;                                   

if([sortArray count]>0)
{
     datewiseSortObj=[sortArray objectAtIndex:0];
     obj.flying=datewiseSortObj.flying;                  
     obj.when=datewiseSortObj.when;
     obj.herenow=datewiseSortObj.herenow;                  
     obj.convertedDate=datewiseSortObj.convertedDate;
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T12:11:29.580

最安全的方法是使用日期格式化程序将字符串转换为 NSDate 对象，然后使用标准技术进行比较。

# java - java中错误的树类型

> ID：12996735
> 
> 赞同：0
> 
> 时间：2012-10-21T09:44:39.333
> 
> 标签：java, crawler4j

我正在尝试`BasicCrawlController`在 java 中运行以下代码，但出现一些错误：

```
/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package edu.uci.ics.crawler4j.examples.basic;

import edu.uci.ics.crawler4j.crawler.CrawlConfig;
import edu.uci.ics.crawler4j.crawler.CrawlController;
import edu.uci.ics.crawler4j.fetcher.PageFetcher;
import edu.uci.ics.crawler4j.robotstxt.RobotstxtConfig;
import edu.uci.ics.crawler4j.robotstxt.RobotstxtServer;

/**
 * @author Yasser Ganjisaffar <lastname at gmail dot com>
 */
public class MyWebCrawler {

        public static void main(String[] args) throws Exception {
                if (args.length != 2) {
                        System.out.println("Needed parameters: ");
                        System.out.println("\t rootFolder (it will contain intermediate crawl data)");
                        System.out.println("\t numberOfCralwers (number of concurrent threads)");
                        return;
                }

                /*
                 * crawlStorageFolder is a folder where intermediate crawl data is
                 * stored.
                 */
                String crawlStorageFolder = args[0];

                /*
                 * numberOfCrawlers shows the number of concurrent threads that should
                 * be initiated for crawling.
                 */
                int numberOfCrawlers = Integer.parseInt(args[1]);

                CrawlConfig config = new CrawlConfig();

                config.setCrawlStorageFolder(crawlStorageFolder);

                /*
                 * Be polite: Make sure that we don't send more than 1 request per
                 * second (1000 milliseconds between requests).
                 */
                config.setPolitenessDelay(1000);

                /*
                 * You can set the maximum crawl depth here. The default value is -1 for
                 * unlimited depth
                 */
                config.setMaxDepthOfCrawling(2);

                /*
                 * You can set the maximum number of pages to crawl. The default value
                 * is -1 for unlimited number of pages
                 */
                config.setMaxPagesToFetch(1000);

                /*
                 * Do you need to set a proxy? If so, you can use:
                 * config.setProxyHost("proxyserver.example.com");
                 * config.setProxyPort(8080);
                 *
                 * If your proxy also needs authentication:
                 * config.setProxyUsername(username); config.getProxyPassword(password);
                 */

                /*
                 * This config parameter can be used to set your crawl to be resumable
                 * (meaning that you can resume the crawl from a previously
                 * interrupted/crashed crawl). Note: if you enable resuming feature and
                 * want to start a fresh crawl, you need to delete the contents of
                 * rootFolder manually.
                 */
                config.setResumableCrawling(false);

                /*
                 * Instantiate the controller for this crawl.
                 */
                PageFetcher pageFetcher = new PageFetcher(config);
                RobotstxtConfig robotstxtConfig = new RobotstxtConfig();
                RobotstxtServer robotstxtServer = new RobotstxtServer(robotstxtConfig, pageFetcher);
                CrawlController controller = new CrawlController(config, pageFetcher, robotstxtServer);

                /*
                 * For each crawl, you need to add some seed urls. These are the first
                 * URLs that are fetched and then the crawler starts following links
                 * which are found in these pages
                 */

                controller.addSeed("http://www.ics.uci.edu/");
                controller.addSeed("http://www.ics.uci.edu/~lopes/");
                controller.addSeed("http://www.ics.uci.edu/~welling/");

                /*
                 * Start the crawl. This is a blocking operation, meaning that your code
                 * will reach the line after this only when crawling is finished.
                 */
                controller.start(BasicCrawler.class, numberOfCrawlers);
        }
} 
```

错误是：

```
log4j:WARN No appenders could be found for logger (org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "main" java.lang.RuntimeException: Uncompilable source code - Erroneous tree type: <any>
    at mywebcrawler.MyWebCrawler.main(MyWebCrawler.java:107) 
```

代码有什么问题？它完全复制自 crawler4j 的网站！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:52:37.977

您缺少 log4j 属性文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:36:05.163

什么是`BasicCrawler`，那是你自己的课吗？你是如何定义它的，它是一个泛型类吗？你没有忘记指定泛型类型吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T12:24:48.013

BasicCrawler 是我从 crawler4j 文档中复制的一个类：

```
import edu.uci.ics.crawler4j.crawler.Page;
import edu.uci.ics.crawler4j.crawler.WebCrawler;
import edu.uci.ics.crawler4j.parser.HtmlParseData;
import edu.uci.ics.crawler4j.url.WebURL;

import java.util.List;
import java.util.regex.Pattern;

public class BasicCrawler extends WebCrawler {
    private final static Pattern FILTERS = Pattern.compile(".*(\\.(css|js|bmp|gif|jpe?g" + "|png|tiff?|mid|mp2|mp3|mp4"
                    + "|wav|avi|mov|mpeg|ram|m4v|pdf" + "|rm|smil|wmv|swf|wma|zip|rar|gz))$");

    /**
     * You should implement this function to specify whether the given url
     * should be crawled or not (based on your crawling logic).
     */
    @Override
    public boolean shouldVisit(WebURL url) {
            String href = url.getURL().toLowerCase();
            return !FILTERS.matcher(href).matches() && href.startsWith("http://www.aut.ac.ir/");
    }

    /**
     * This function is called when a page is fetched and ready to be processed
     * by your program.
     */
    @Override
    public void visit(Page page) {
            int docid = page.getWebURL().getDocid();
            String url = page.getWebURL().getURL();
            String domain = page.getWebURL().getDomain();
            String path = page.getWebURL().getPath();
            String subDomain = page.getWebURL().getSubDomain();
            String parentUrl = page.getWebURL().getParentUrl();

            System.out.println("Docid: " + docid);
            System.out.println("URL: " + url);
            System.out.println("Domain: '" + domain + "'");
            System.out.println("Sub-domain: '" + subDomain + "'");
            System.out.println("Path: '" + path + "'");
            System.out.println("Parent page: " + parentUrl);

            if (page.getParseData() instanceof HtmlParseData) {
                    HtmlParseData htmlParseData = (HtmlParseData) page.getParseData();
                    String text = htmlParseData.getText();
                    String html = htmlParseData.getHtml();
                    List<WebURL> links = htmlParseData.getOutgoingUrls();

                    System.out.println("Text length: " + text.length());
                    System.out.println("Html length: " + html.length());
                    System.out.println("Number of outgoing links: " + links.size());
            }

            System.out.println("=============");
    }
} 
```

# jquery - 基本 jQuery 动画：省略号（三个点依次出现）

> ID：12996736
> 
> 赞同：7
> 
> 时间：2012-10-21T09:44:50.493
> 
> 标签：jquery, animation, jquery-animate

# 我需要的：

我需要一个动画省略号（...），一个点一个接一个地出现。动画需要循环。我想通过 jQuery 实现这一点

# 动画序列：

**第一帧：**等待您的选择

**框架2：**等待您的选择。

**框架3：**等待您的选择..

**框架 4：**等待您的选择...

# 我试过的：

我一直在研究一个[插件来闪烁文本](http://archive.plugins.jquery.com/project/blink)和[脉动 .effect()](http://jqueryui.com/effect/)。

# 我的问题：

有没有人对实现这一目标的最简单和最可靠的方法有任何建议？我很乐意被指出一种技术或功能。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T10:17:41.750

如果您只需要点一个接一个地出现一次，请尝试以下非常简单的方法：

```
<div id="message">Awaiting your selection</div>​

var dots = 0;

$(document).ready(function() {
    setInterval (type, 600);
});

function type() {
    if(dots < 3) {
        $('#message').append('.');
        dots++;
    }
}​ 
```

[http://jsfiddle.net/fVACg/](http://jsfiddle.net/fVACg/)

如果您希望它们出现多次（被删除然后重新打印），您可以执行以下操作：

```
<div>Awaiting your selection<span id="dots"></span></div>​

var dots = 0;

$(document).ready(function() {
    setInterval (type, 600);
});

function type() {
    if(dots < 3) {
        $('#dots').append('.');
        dots++;
    } else {
        $('#dots').html('');
        dots = 0;
    }
}​ 
```

[http://jsfiddle.net/wdVh8/](http://jsfiddle.net/wdVh8/)

最后，查看我几年前写的[教程。](http://burnmind.com/howto/how-to-create-a-typing-effect-an-eraser-effect-and-a-blinking-cursor-using-jquery)你可能会发现它很有用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-21T10:25:04.173

除了 StathisG 使用 jquery 的答案之外，您还可以通过 CSS3 使用[动画迭代计数](http://www.w3.org/TR/css3-animations/#animation-iteration-count-property)和[动画延迟来实现它](http://www.w3.org/TR/css3-animations/#animation-delay-property)

```
@-webkit-keyframes opacity {
    0% { opacity: 1; }
    100% { opacity: 0; }
}

@-moz-keyframes opacity {
    0% { opacity: 1; }
    100% { opacity: 0; }
}

#loading {
    text-align: center; 
    margin: 100px 0 0 0;
}

#loading span {
    -webkit-animation-name: opacity;
    -webkit-animation-duration: 1s;
    -webkit-animation-iteration-count: infinite;

    -moz-animation-name: opacity;
    -moz-animation-duration: 1s;
    -moz-animation-iteration-count: infinite;
}

#loading span:nth-child(1) {
    -webkit-animation-delay: 100ms;
    -moz-animation-delay: 100ms;
}

#loading span:nth-child(2) {
    -webkit-animation-delay: 300ms;
    -moz-animation-delay: 300ms;
}

#loading span:nth-child(3) {
    -webkit-animation-delay: 500ms;
    -moz-animation-delay: 500ms;
}​ 
```

**演示：http:** [//jsfiddle.net/VXdhG/1/](http://jsfiddle.net/VXdhG/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T09:32:09.887

我为它编写了一个简单的 JQuery 插件： [https ://github.com/karbachinsky/jquery-DotAnimation](https://github.com/karbachinsky/jquery-DotAnimation)

```
//<div class="element">Loading</div>

$(function () {
    // Animation will start at once
    var $el = $('.element');

    $el.dotAnimation({
        speed: 300,
        dotElement: '.',
        numDots: 3
    });
}); 
```

JSFiddle 示例： [https ://jsfiddle.net/bcz8v136/](https://jsfiddle.net/bcz8v136/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T11:36:03.713

以下代码基本上是我最终得到的。

**JavaScript：**

```
var animatedDot;
animatedDot = animatedDot || (function () {
    var dots = 0;
    var animatedDotInterval;
    var selectorAnimatedDot = ".animatedDot";

    return {
        start: function(interval) {
            if (!interval)
                interval = 400;

            animatedDotInterval = setInterval(this.nextFrame, interval);
        },
        stop: function() {
            if (animatedDotInterval)
                clearInterval(animatedDotInterval);
        },
        nextFrame: function() {
            if ($(selectorAnimatedDot).length) {
                if (dots < 3) {
                    $(selectorAnimatedDot).append('.');
                    dots++;
                } else {
                    $(selectorAnimatedDot).html('');
                    dots = 0;
                }
            } else {
                if (animatedDotInterval)
                    clearInterval(animatedDotInterval);
            }
        }
    };
})();

function animatedDotTimeout(timeout) {
    if (!timeout)
        timeout = 10000;

    animatedDot.start();

    setTimeout(animatedDot.stop, timeout);
} 
```

**html:**

```
Loading<span class="animatedDot"></span>

<script type="text/javascript">
    $(document).ready(function() {
        animatedDot.start();
    });
</script> 
```

# jquery - Jquery 发布 json 数据并在服务器端使用 spring 进行解释

> ID：12996737
> 
> 赞同：-2
> 
> 时间：2012-10-21T09:44:52.683
> 
> 标签：jquery, json, spring-mvc

我即将编写一个应用程序，我必须`JSON`使用 post 发送数据`jQuery`并在服务器端的 spring 控制器中解释相同的数据。即使经过这么多的跟踪和错误，我在解释服务器端的数据时也面临着很多问题。我也浏览了很多帖子，`stackoverflow`但无法找到正确的答案。

是否首选将数据`JSON`格式发布到 spring ？请告诉我。

即使您发布一个链接来解释如何在服务器端处理数据，它也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:01:25.977

JSON 是一种在客户端和服务器之间来回传递数据的好格式。查看反序列化以将*格式正确的*JSON 转换为服务器上的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:11:39.970

这实际上取决于您将从客户端传递到服务器的数据。但是，是的，JSON 对于一般数据来说已经足够好了，我自己更喜欢它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:40:08.140

从您的回答中不确定您面临什么类型的问题。假设您的主要问题是从 jquery/任何其他来源发布 json 数据并对其进行解释，则解决方案如下：

1.  创建一个实现 Serializable 接口的模型对象。例如

    公共类Account实现Serializable{

    ```
     private static final long serialVersionUID = 1913207428686438208L;
     String bankAccountNo ;
     String userName ;

    public String getBankAccountNo() {
        return bankAccountNo;
    }

    public void setBankAccountNo(String bankAccountNo) {
        this.bankAccountNo = bankAccountNo;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public void Account(){

    } 
    ```

    }

2.用请求映射路径注释你的控制器，例如

```
@Controller("jsonController")
@RequestMapping("test/")
public class JSONController {
    @RequestMapping(method = RequestMethod.GET, value = "get/account/{name}", headers = "Accept=application/json")
    public
    @ResponseBody
    Account getAccount(@PathVariable String name) {
        // let's suppose findAccount() finds the account
        Account account = findAccount(name);
        return account;
    }

@RequestMapping(method = RequestMethod.POST, value = "post/account", headers = "Content-type=application/json")
    public
    @ResponseBody
    String getAccount(@PathVariable String name) {
        // let's suppose saveAccount() persists the account
        saveAccount(account);
        return "success";
    }

} 
```

1.  将 jackson-mapper-asl.jar 和 jackson-core-asl.jar 添加到库中。
2.  添加`<context:annotation-config/>`到您的 applicationContext.xml 文件中。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:08:20.063

在这里，我要从最后添加缺少的组件....如果以下代码有任何问题，请更正它：上下文 xml 文件：

```
 <mvc:resources location="/custom1/" mapping="/js/**" />
    <mvc:annotation-driven />
    <context:component-scan base-package="com.vk" />
    <context:annotation-config />    
    <bean id="JspViewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />     
</bean> 
```

和下面的javascript代码：

```
 $.ajax({url: "/JSONExample/post/account",
        type: "POST",
        data: {userName: "Sam" },
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function(result) {
        alert(result);
               }
        }); 
```

# streaming - Multiple live stream video publishers using FMS, Wowza, etc.?

> ID：12996748
> 
> 赞同：0
> 
> 时间：2012-10-21T09:46:52.790
> 
> 标签：streaming, video-streaming, rtmp, live-streaming, flash-media-server

I need to develop a web portal with multiple live stream publishers (up to 4), and many viewers, using RTMP.

Live video publishers are well known and always the same, so in the case of using FMS (since I have some experience with Flash and Influxis), I would have no problem of using FMLE for video publishers. But the problem is how to synchronize in the media server all 4 connections to show properly on the client side. I have tested the one-connection live example that brings FMS and works fine.

Video resolution is not an issue, since we don't mind low resolution 320x240 for example. Also, we need to develop the plaform by ourselves, not depending on external platforms of live streaming. Is there any tutorial or example to use as a start point?

What would you suggest?? thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:53:04.370

Ok, I have now found the solution and, I have to say, was extremely easy. I write if someone else has the same problem.

Finally I've solved with Flash Media Live Encoder. You have to create 4 (in my case) video objects in your webpage like below, changing localhost for your hostname.

```
<object width='640' height='377' id='StrobeMediaPlayback' name='StrobeMediaPlayback' type='application/x-shockwave-flash' classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000'>
    <param name='movie' value='swfs/StrobeMediaPlayback.swf' />
    <param name='quality' value='high' />
    <param name='bgcolor' value='#000000' />
    <param name='allowfullscreen' value='true' />
    <param name='flashvars' value='&src=rtmp://localhost/live/livestream&autoHideControlBar=true&streamType=live&autoPlay=true' />
    <embed src='swfs/StrobeMediaPlayback.swf' width='640' height='377' id='StrobeMediaPlayback' quality='high' bgcolor='#000000' name='StrobeMediaPlayback' allowfullscreen='true' pluginspage='http://www.adobe.com/go/getflashplayer' flashvars='&src=rtmp://localhost/live/livestream&autoHideControlBar=true&streamType=live&autoPlay=true' type='application/x-shockwave-flash'> </embed>
</object> 
```

As you can see, by default the stream name is "livestream", you have to change for every object to be different. Ensure "live" folder is created (when you install FMS in localhost by default creates this folder, but in influxis you have to create manually). Every video publisher has to open Flash Media Live Encoder and change the Output value of "Stream" by the value of stream name of the respective video object.

That's it! Works perfectly, great resolution and great performance, better than expected. Hope it helps!

# automated-tests - 使用 Microsoft 测试管理器 (MTM) 2010 成功运行自动化测试的最合乎逻辑的演练是什么？

> ID：12996752
> 
> 赞同：1
> 
> 时间：2012-10-21T09:47:30.057
> 
> 标签：automated-tests, coded-ui-tests, microsoft-test-manager, regression-testing

我是测试新手，老实说，我想重新开始，因为我一直在阅读 msdn 库中的很多文章，现在我很困惑......请帮助！

我做了什么：

*   我在 VS 2010 中创建了一个自动编码的 UI 测试 (CUIT)
*   CUIT 正在从 Excel 文件中获取数据
*   [在此博客](http://blogs.msdn.com/b/mathew_aniyan/archive/2009/03/17/data-driving-coded-ui-tests.aspx)之后创建了 excel 文件和 CUIT 之间的链接

我的 MS 工具

*   微软测试管理器 2010
*   视觉工作室 2010
*   Team Foundation Server 2010 和 Team Foundation Build
*   SQL Server 2008 R2（如果相关）

**目标：使用我的电脑在****物理环境**中运行自动化测试，无需额外工具

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:59:19.637

[我强烈推荐您使用 Visual Studio 2010 进行软件测试](http://www.codeproject.com/Articles/167335/Software-Testing-with-Visual-Studio-2010)这本书。

它将为您提供出色的演练。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:19:28.987

通过 MTM运行`CodedUi Tests`与任何其他自动化测试的过程相同。您必须执行以下操作：

1.  [将您的 CodedUi 测试与适当的测试用例相关联](http://msdn.microsoft.com/en-us/library/dd380741%28v=vs.100%29.aspx)。
2.  在您用于自动化测试的物理机器中，安装一个测试控制器和一个测试代理。[将测试代理配置为与桌面交互](http://msdn.microsoft.com/en-us/library/ee291332%28v=vs.100%29.aspx)。
3.  [在 MTM 中创建一个测试计划](http://msdn.microsoft.com/en-us/library/dd286583%28v=vs.100%29.aspx)并将[您的测试用例添加到适当的测试套件](http://msdn.microsoft.com/en-us/library/dd286719%28v=vs.100%29.aspx#CreateSuite)中。
4.  [选择要运行测试的测试环境](http://msdn.microsoft.com/en-us/library/dd465179%28v=vs.100%29.aspx)。选择您之前安装并配置测试控制器和代理的物理机。
5.  运行你的测试和快乐的测试

有关更多详细信息，请遵循以下指南：

*   [如何：使用 Microsoft 测试管理器从测试计划运行自动化测试](http://msdn.microsoft.com/en-us/library/dd553270%28v=vs.100%29.aspx)
*   [运行自动化测试](http://msdn.microsoft.com/en-us/library/dd286580%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:45:17.323

您需要在要运行测试的环境上安装测试控制器服务和测试代理。

这将允许您在不安装 Visual Studio 的情况下远程执行测试。

查看这些链接了解更多信息

[http://msdn.microsoft.com/en-us/library/vstudio/dd648127(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd648127(v=vs.100).aspx) http://msdn.microsoft.com/en-us/library/dd728093(v=vs. 100).aspx

或者，您可以直接调用 mstest.exe 并为测试项目传递一个参数，但我不确定是什么安装了它。可能是视觉工作室和代理

设置完成后，可以通过 MTM 中的实验室管理代理

# c# - parseInt 如何获取它的值

> ID：12996753
> 
> 赞同：4
> 
> 时间：2012-10-21T09:47:34.037
> 
> 标签：c#, javascript

```
parseInt('bcedfg',16) 
```

基于此代码，我在 JavaScript 中得到*773855 ，*

我浏览了转换表，不知道如何获得这个“773855”值

我的问题是 parseint 是如何得出这个“773855”值的，因为我想把这个小代码翻译成 ac# 代码，并且 c# 中的任何类似方式都允许我得到这个“773855”值

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T09:55:16.343

被`bcedfg`解释为 hex(base: `16`)。`f`然而，十六进制比例会在 javascript 中翻转，`g`然后在转换之前删除它之后的所有内容。话虽如此，转换的工作原理如下：

```
decValueOfCharPosition = decValueOfChar * base ^ posFromTheRight 
```

所以：

```
b = 11 * 16^4 = 11 * 65536 = 720896
c = 12 * 16^3 = 12 * 4096 = 49152
d = 13 * 16^2 = 13 * 256 = 3328
e = 14 * 16^1 = 14 * 16 = 224
f = 15 * 16^0 = 15 * 1 = 15 
```

一旦您知道每个字符位置的十进制值，只需将它们加在一起即可获得转换后的十进制值：

```
b(720896) + c(49152) + d(3328) + e(224) + f(15) = 773855 
```

C 及其后代在输入方面并不那么宽容。C 并没有删除第一个无效字符和后面可能出现的任何字符，而是抛出一个[`Format Exception`](http://msdn.microsoft.com/en-us/library/1k20k614.aspx). 要解决此问题以获取 javascript 功能，您必须首先删除无效字符及其以下内容，然后您可以使用：

```
Convert.ToInt32(input, base) 
```

*我没有包括删除无效字符的方法，因为有多种方法可以这样做，而且我对 C 的了解不足*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T09:49:16.980

使用`Convert.ToInt32`：

```
Convert.ToInt32(theString, 16) 
```

它使用这个重载：

```
public static int ToInt32(string value, int fromBase) 
```

请注意，`FormatException`由于`g`字符串中的 ，您将得到：

> **FormatException**
> **值包含的字符不是 fromBase 指定的基数中的有效数字**。异常消息表明如果 value 中的第一个字符无效，则没有要转换的数字；否则，该消息表明该值包含无效的尾随字符。

[**MSDN**](http://msdn.microsoft.com/en-us/library/1k20k614.aspx)

您不会在 javascript 中遇到错误，因为 js 倾向于“原谅”太多错误，这就是其中之一。

# asp.net - Nuget包管理器下载问题

> ID：12996754
> 
> 赞同：0
> 
> 时间：2012-10-21T09:47:44.857
> 
> 标签：asp.net, c#-4.0

我有 VS 2010，当我转到工具/扩展管理器并开始获取 Nuget 包管理器时，完成安装后我重新启动 .Net，但找不到任何安装，PS：我使用 .NET 4.0 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:21:14.880

你可以从这里直接下载 Nuget 包管理器[http://nuget.codeplex.com/](http://nuget.codeplex.com/)安装后重启 VS。

# php - 不在 mysql 子查询限制中

> ID：12996755
> 
> 赞同：2
> 
> 时间：2012-10-21T09:47:50.120
> 
> 标签：php, mysql, subquery

有没有人知道我该如何解决`#1235`- 这个版本的 MySQL 还不支持`'LIMIT & IN/ALL/ANY/SOME subquery'`错误？

我的查询如下（我读过我可以升级 mysql，但这是不可能的）：

```
$query = @mysql_query("SELECT * FROM posts 
                       WHERE postid NOT IN 
                       ( SELECT postid FROM log 
                         ORDER BY posted DESC
                         LIMIT 10) 
                       ORDER BY (RAND() * Multiplier) 
                       LIMIT 1"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T09:53:01.150

根据这个[错误](http://bugs.mysql.com/bug.php?id=12587)，您可以使用这个丑陋的解决方法：

```
SELECT * FROM t1 WHERE s1 NOT IN 
(SELECT * FROM (SELECT s2 FROM t2 ORDER BY s1 LIMIT 1) AS alias) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T10:04:31.677

您可以使用以下方法重写您的查询`JOIN`：

```
SELECT   *
FROM     posts NATURAL LEFT JOIN (
  SELECT postid FROM log ORDER BY posted DESC LIMIT 10
) t
WHERE    t.postid IS NULL
ORDER BY RAND()
LIMIT    1 
```

但是请注意，这`ORDER BY RAND()`是*非常*昂贵的。不仅必须为每条记录计算一个随机值，而且还必须对结果进行排序。索引没有用。

`col`如果您有一个包含唯一整数的列，那么您会做得更好，然后通过索引`col`您可以非常快速地获得随机记录：

```
SELECT    *
FROM      posts NATURAL LEFT JOIN (
  SELECT postid FROM log ORDER BY posted DESC LIMIT 10
) t JOIN (
  SELECT RAND() * MAX(col) AS rand FROM posts
) r ON posts.col >= r.rand
WHERE     t.postid IS NULL
LIMIT     1 
```

请注意，这种“随机性”的均匀性将取决于在`col`任何其他过滤发生后整数的分布。

# php - PHP mysql 列总和

> ID：12996759
> 
> 赞同：-1
> 
> 时间：2012-10-21T09:48:31.627
> 
> 标签：php, mysql

```
$result = mysql_query("SELECT SUM(TOTAL) AS total FORM price_db");
$row = mysql_fetch_assoc($result);
$sum = $row['total'];

echo $sum; 
```

当我运行此代码时，没有显示任何内容。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:52:04.280

您的查询中有拼写错误，应该`FROM`不是`FORM`.

# c# - 使用 C# 的 SQL 服务器 - 修复 nvarchar(50) 以适合列表视图显示

> ID：12996760
> 
> 赞同：0
> 
> 时间：2012-10-21T09:48:51.543
> 
> 标签：c#, string

我使用 SQL 数据库，并在其中查询数据。我的一些字段属于 nvarcar(50) 类型。因此，当我在列表视图中填充它们时，我会得到烦人的三个点 (...) 例如：[China ...] 我怎样才能摆脱它？

我是新用户，无法上传图片，抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:56:16.087

您需要使用自动调整列大小`AutoResizeColumn()`

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.autoresizecolumn(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.autoresizecolumn(v=vs.90).aspx)

因为您没有指定，所以我假设为 winform。

# performance - 带有许多精灵的 Cocos2d 快速碰撞检测

> ID：12996761
> 
> 赞同：0
> 
> 时间：2012-10-21T09:49:05.597
> 
> 标签：performance, cocos2d-iphone, collision

我有很多精灵（射击游戏），我需要测试与关卡中的许多其他对象（玩家、墙壁、板条箱等）的碰撞，如果我蛮力使用 CGRectIntersectsRect 方法，它工作正常。这种方法的问题非常明显，因为我每帧都针对每个对象检查每个项目符号。我对如何加快速度有所了解，但在我花几天时间实现某种空间分区层次结构之前，我想获得更多经验游戏开发人员的洞察力（也许是 cocos2d 特定的）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:53:43.457

一个非常简单的优化是不要用每个其他对象测试每个对象。因为如果 A 测试与 B 的碰撞，这意味着 B 不必与 A 发生碰撞，因为结果已经获得。

如果您有 200 个对象，那么蛮力方法需要 40,000 次测试来测试所有对象之间的相互关系。如果您对此进行优化以跳过已经执行的测试，您可以将测试数量减少到几千个，因为第一个对象测试其他 199 个，第二个测试剩余的 198 个（因为第二个已经测试过的与第一个发生碰撞），并且很快。

假设您的所有对象都在一个数组中，您遍历所有 200 个对象，并在循环内遍历 current + 1 到 200 个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:03:07.460

我认为我们正在使用相同的方法。我所做的是在我的子弹数组中循环，在该循环内是另一个循环，用于我的其他精灵数组，以检查子弹和其他精灵的碰撞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T10:11:56.767

您可以使用 box2d 来检测和处理所有碰撞。它已经使用了优化。

# javascript - Javascript中带有For循环的innerHTML

> ID：12996763
> 
> 赞同：4
> 
> 时间：2012-10-21T09:49:10.230
> 
> 标签：javascript, innerhtml

这是我的编码。在这个编码中，我想在innerHTML中打印表格

段落标签。这是有效的，但问题是当我单击提交按钮时，此结果仅显示最后一个值，例如“10 * 10 = 100”，但我想运行我在代码中从 1 到 10 定义的完整循环。请解决这个问题问题。

```
<html>
<head>
<title>Table Program</title>
</head>
<body>
<input type="text" id="table" placeholder="Enter table"/>
<input type="button" value="Submit" onClick="table()"/>
<p id="demo"></p>
<!----------------------------------------------------------------------------------------------->
<script type="text/javascript">
function table()
{
    var value = document.getElementById("table").value;
    var demop = document.getElementById("demo");
    var a;
    for(a=1; a <= 10;++a)
    {
        demop.innerHTML=(value+"*"+ a +"="+ value*a);
    }
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T10:06:39.130

您的循环在每次执行时都会`for`覆盖innerHTML 。`demop`因此，当您的`for`循环到达最后一次迭代`a`时，将是 10，因此您只会得到最后一个值“10*10=100”

因此，每次迭代 for 循环时都应该附加结果，就像这样

`demop.innerHTML += (value + "*" + a + "=" + (value*a) + "<br />");`

因此，您将在单独的行上获得输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T09:56:42.137

当你打电话时，`demop.innerHTML = something`你每次都覆盖它。您应该：

*   将整个字符串放在一个临时`result`变量中，然后将其提供给`innerHTML`
*   通过做连接不同的结果

    `demop.innerHTML = demop.innerHTML + (value+"*"+ a +"="+ value*a);`

# arrays - 将数组拆分为 n 个部分，然后再次将它们连接起来形成直方图

> ID：12996764
> 
> 赞同：0
> 
> 时间：2012-10-21T09:49:13.827
> 
> 标签：arrays, matlab, histogram

我是 Matlab 的新手。

假设我有一个数组`a = [1:1:1000]`

我必须把它分成 50 个部分`1-20`；`21-40`...... `981-1000`_

我正在尝试这样做。

```
E=1000X
a=[1:E]
n=50
d=E/n
b=[]
for i=0:n
   b(i)=a[i:d]
end 
```

但我无法得到结果。

我正在研究的第二部分是，根据另一个结果，假设我的答案是 3，那么第一个拆分数组应该有一个计数器并且应该是 +1，如果答案是 45，那么第三个拆分数组的计数器应该是 + 1 依此类推，最后我必须制作所有计数器的直方图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:56:09.520

您可以使用[一个功能](http://www.mathworks.com.au/help/matlab/ref/histc.html)完成所有这些操作：`histc`. 在你的情况下：

```
X = (1:1:1000)';
Edges = (1:20:1000)';
Count = histc(X, Edges); 
```

本质上，`Count`包含`X`属于 中定义的类别的元素数量`Edges`，其中`Edges`是一个单调递增的向量，其元素定义了顺序类别的边界。一个更常见的例子可能是`X`使用概率密度来构建，比如均匀分布，例如：

```
X = 1000 * rand(1000, 1); 
```

`X`玩弄and的规范`Edges`，你应该明白了。如果您想要实际的直方图，请查看该`hist`函数。

至于你问题的第二部分，我不确定你在问什么。

# ios - UIImageView 显示在其父框架之外

> ID：12996766
> 
> 赞同：1
> 
> 时间：2012-10-21T09:49:36.743
> 
> 标签：ios, ipad, uiview, uiimageview

我正在为 iPad 开发 iOs 应用程序，并且正在 UIView 中实现 UIImageView。问题是，如果图像视图的位置在它内部的 UIView 之外有一个位置，你可以看到它。编码：

```
UIView *vistafunda = [[UIView alloc] initWithFrame:CGRectMake(512/2, 48, 525, 651)];
[self.view addSubview:vistafunda];
vistafunda.backgroundColor = [UIColor darkGrayColor];

UIImageView *img = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"hola.png"]];
img.center = CGPointMake(12, 200);
[vistafunda addSubview:img]; 
```

我希望图像视图始终位于视图下方，因此如果图像在视图之外，您将看不到它。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T09:51:51.563

只需将包含的视图剪辑设为子级即可

```
vistafunda.clipsToBounds = YES; 
```

# javascript - 当特定 iframe 加载或任何类型的进程在其中发生时如何隐藏浏览器进度条

> ID：12996772
> 
> 赞同：0
> 
> 时间：2012-10-21T09:50:33.600
> 
> 标签：javascript, asp.net

我在里面有一个页面 在这个 iframe 里面有一个 iframe 我做我的上传文件工作人员我在这里要做的就是如何隐藏进度条或使它在 javascript 中的这个 iframe 内发生回发时不起作用

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:33:54.470

您无法隐藏 iframe 状态，但您可以解决它以获得相同的结果：

您可以通过[XHR2](http://www.w3.org/TR/XMLHttpRequest/)上传文件。由于草案是新的，许多浏览器还不支持这一点。

对于 IE 用户，您可以使用 activeX 创建一个模仿 iframe 但不属于 DOM的`htmlfile`（[更多信息here ）：](http://cometdaily.com/2007/11/18/ie-activexhtmlfile-transport-part-ii/)`new ActiveXObject("htmlfile");`

对于不支持前者的用户，您可以使用 Flash 插件等替代方案。有关这些替代方案的更多信息，请查看[此帖子](https://stackoverflow.com/questions/408735/javascript-file-uploads)。

快速说明一下，jqUploader 和 jquery-multifile-uploader 的后备都是导入 flash 对象。

# java - 关闭应用程序时使手电筒应用程序工作

> ID：12996778
> 
> 赞同：2
> 
> 时间：2012-10-21T09:51:41.040
> 
> 标签：java, android

我有这段代码可以让我按下一个按钮来打开我的手机手电筒。在应用程序关闭时保持灯亮的最佳方法是什么？我听说 asynctask 很好，但我读到它是用于与 UI 通信的后台任务。对于这种类型的“应用程序”，我应该使用什么样的“线程”。

我的 onClickListener 代码：

```
button.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
        //If Flag is set to true
        if (isFlashOn) {
        Log.i("info", "torch is turned off!");
        //Set the flashmode to off                    
        p.setFlashMode(Parameters.FLASH_MODE_OFF);
        //Pass the parameter ti camera object
        camera.setParameters(p);    
        //Set flag to false                
        isFlashOn = false;
        //Set the button text to Torcn-ON
        button.setText("Torch-ON");
        } 
        //If Flag is set to false
        else {
        Log.i("info", "torch is turned on!");
        //Set the flashmode to on
        p.setFlashMode(Parameters.FLASH_MODE_TORCH);
        //Pass the parameter ti camera object
        camera.setParameters(p);
        //Set flag to true
        isFlashOn = true;
        //Set the button text to Torcn-OFF
        button.setText("Torch-OFF");
        }
            }});

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:57:00.820

听起来你需要[服务](http://developer.android.com/guide/components/services.html)

> 服务是一个应用程序组件，代表应用程序希望在不与用户交互的情况下执行更长时间运行的操作，或提供功能供其他应用程序使用

# liferay - jquery 函数无法重定向到我的自定义 portlet 中的 actionURL

> ID：12996785
> 
> 赞同：1
> 
> 时间：2012-10-21T09:52:18.927
> 
> 标签：liferay, portlet, liferay-6

我有一个 jquery 函数，当我单击自定义 liferay portlet 中列的编辑图标时，它将重定向到我的编辑页面。

但是当我单击该图标时，它只是重新加载页面而不是重定向到我想要的页面

这是我的 view.jsp 代码

我的 PORTLET 操作 URL 代码

```
<portlet:actionURL var="editrestaurantURL" >
<portlet:param name="jspPage" value="/jsps/edit_restaurant.jsp"/> 
```

单击该 jquery 时我的列将调用

```
<td class="editable"><%=temprest.getName() %></td> 
```

这是我的脚本代码

```
<script>
                    $(document).ready(function() {     
                        $(".editable").hover(function(){
                            $(this).append("<i class='splashy-pencil_right'></i>")
                        }, function(){
                            $(this).children("i").remove();
                        });                        
                        $(".editable").click(function(){
                            $.colorbox({
                                initialHeight: '0',
                                initialWidth: '0',
                                href: "#confirm_dialog",
                                inline: true,
                                opacity: '0.3',
                                onComplete: function(){
                                    $('.confirm_yes').click(function(e){
                                        e.preventDefault();
                                        window.location.href = "<%=editrestaurantURL.toString() %> ";
                                        $.colorbox.close();
                                    });
                                    $('.confirm_no').click(function(e){
                                        e.preventDefault();
                                        $.colorbox.close(); 
                                    });
                                }
                            });
                        });
                        //* show all elements & remove preloader                        
                        setTimeout('$("html").removeClass("js")',1000);
                    });
                </script> 
```

任何人都可以指导我问题出在哪里？我不知道哪里出了问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:50:42.217

URL的定义：

```
<portlet:actionURL var="editrestaurantURL" >
    <portlet:param name="jspPage" value="/jsps/edit_restaurant.jsp"/>
</portlet:actionURL> 
```

将值存储到 EL 变量中。检查您是否缺少零件。如果您的 javascript 工作正常（尝试输入任何静态 URL，例如 www.google.com），请执行以下操作

```
...
window.location.href = "${editrestaurantURL}";
... 
```

# c++ - 在 C++ 中更改 INI 文件的部分顺序的最简单方法是什么

> ID：12996786
> 
> 赞同：1
> 
> 时间：2012-10-21T09:52:37.040
> 
> 标签：c++, winapi, ini, fileparse

我正在尝试读取一个 INI 文件并编写另一个 INI 文件，其中部分顺序已更改。

Windows API 是否有用于这种 INI 文件处理的工具？是否有首选的开源解决方案？还是我应该尝试手动解析它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:56:28.633

Windows 有自己的 C 的 INI 函数。但既然你提到了 C++，请尝试[Feather INI](http://code.google.com/p/feather-ini-parser/)。[程序选项](http://www.boost.org/doc/libs/1_36_0/doc/html/program_options.html)是 Boost 的另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T14:16:32.040

如评论中所述，您可以使用 winapi 函数来执行此操作。GetPrivateProfileSectionNames 返回 .ini 文件中各部分的名称。然后您可以对其进行迭代并调用 GetPrivateProfileSection() 以获取每个部分的内容。

# ruby-on-rails-3 - 在 active_admin gem 中覆盖 html

> ID：12996790
> 
> 赞同：2
> 
> 时间：2012-10-21T09:52:41.863
> 
> 标签：ruby-on-rails-3, activeadmin

在 Rails 中使用 active_admin gem 时，我想覆盖 html 代码；因为这些 gem 视图中的导航栏和许多元素与我的视图（其他页面）不同。我希望有办法在不手动更改 css 的情况下更改 html 代码！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:25:48.743

这不是很容易，activeadmin 使用 DSL 构建 html（称为“Arbre”）您必须对每个页面类进行修补，而且，它也可能会阻止 css 的自定义。

例如要将侧边栏向左移动，请使用下一个补丁创建初始化程序。

```
class ActiveAdmin::Views::Pages::Base < Arbre::HTML::Document

     def build_page_content
          build_flash_messages
          div :id => "active_admin_content", :class => (skip_sidebar? ? "without_sidebar" : "with_sidebar") do

            build_sidebar unless skip_sidebar?
            build_main_content_wrapper
          end
    end
end 
```

默认方法是

```
 def build_page_content
          build_flash_messages
          div :id => "active_admin_content", :class => (skip_sidebar? ? "without_sidebar" : "with_sidebar") do
            build_main_content_wrapper
            build_sidebar unless skip_sidebar?
          end
        end 
```

可在此处找到用于渲染的完整类列表，因此您需要修补其中的一些。 [https://github.com/gregbell/active_admin/tree/master/lib/active_admin/views](https://github.com/gregbell/active_admin/tree/master/lib/active_admin/views)

准备好完成一项大工作。

UPD。**用于更改 activeadmin 侧边栏位置的 Gem**

[https://github.com/Fivell/active_admin_sidebar](https://github.com/Fivell/active_admin_sidebar)

# git - Git 用户权限

> ID：12996793
> 
> 赞同：2
> 
> 时间：2012-10-21T09:53:22.983
> 
> 标签：git, permissions, ssh, repository

我有一个本地仓库和远程 --bare 仓库集。

我的每个托管包都有自己的用户和组（没有 ssh 访问权限），所以我有权限问题。

我通过将我的远程仓库设置为 ssh://root@... 并创建 post-receive 挂钩来解决这个问题`chown correctuser:correctgroup -R public_html/`

正如您所看到的那样，这并不理想，因为我涉及“root”并且不应该是这种情况。

' `git init --bare --shared`' 有帮助吗？

我希望能够以 root 身份远程推送，并且将“git”添加到我的所有组（包）也没有帮助。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:08:40.130

您可以保留`root`它`chown`以供您的 ssh 访问，但将 ssh 会话限制为仅 git 命令，并使用**[gitolite](https://github.com/sitaramc/gitolite)**之类的**[授权层](http://sitaramc.github.com/gitolite/auth.html)**。

`--shared`当您有多个组时，选项（[man`git init`](http://www.kernel.org/pub/software/scm/git/docs/git-init.html)）并不完全适合：

```
--shared[=(false|true|umask|group|all|world|everybody|0xxx)] 
```

> 指定要在多个用户之间共享 git 存储库。
> 这**允许属于同一组的用户推送到该存储库**。
> 指定后，设置配置变量“ `core.sharedRepository`”，以便`$GIT_DIR`使用请求的权限创建下的文件和目录。
> 如果未指定，git 将使用 umask(2) 报告的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T16:39:43.260

这对我有用：[https ://serverfault.com/questions/133508/how-to-prevent-ssh-git-push-to-set-file-ownership](https://serverfault.com/questions/133508/how-to-prevent-ssh-git-push-to-set-file-ownership)

基本上你设置了 SUID 和 SGID 位。

# nspredicate - NSPredicate：ANY 之后的更多 AND 条件是可能的吗？

> ID：12996796
> 
> 赞同：0
> 
> 时间：2012-10-21T09:53:50.020
> 
> 标签：nspredicate, one-to-many, any

```
[NSPredicate predicateWithFormat:@"ANY (spaceVariableDomains.domain.name = %@ AND spaceVariableDomains.variable.val = %@)", ...]; 
```

我想在 NSPredicate 中写入类似上面的内容，但它无法解析格式字符串。是否有可能在 ANY 之后以某种方式复合条件？我需要使用 SUBQUERY 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T14:09:17.080

最后我使用了 SUBQUERY 方法，基本上这个表达式帮助了我：

```
SUBQUERY(spaceVariableDomains, $x, $x.domain.name = 'xxx' and $x.variable.val = 'yyy').@count > 0 AND SUBQUERY(spaceVariableDomains, $x, $x.domain.name = 'zzz' and $x.variable.val = 'www').@count > 0 
```

# maven - mvn 和 mvn3 命令的区别

> ID：12996797
> 
> 赞同：2
> 
> 时间：2012-10-21T09:54:08.950
> 
> 标签：maven, maven-2, maven-3

我安装了最新版本的 maven，它是 3.0.4。在命令行进行测试，`mvn -version`结果证实了这一点。

对于我正在使用的所有 maven 命令，`mvn`但在互联网上有几次我看到人们使用`mvn3`了这两个命令之间的区别以及为什么我无法使用`mvn3`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T10:12:35.747

似乎（根据[How do I install Maven 3?](https://askubuntu.com/questions/49557)），在 Ubuntu 上默认安装 maven 3 使用`mvn3`符号链接到`mvn`.

`mvn3`我在 3.0.3 和 3.0.4 中都找不到命令。我相信`mvn3`只是用来强调应该使用 maven 3 而不是 maven 2（仍然很流行）。这两个版本有很大不同，因此值得确保使用更新的版本。

# windows-8 - 如何将阴影应用于 Windows 8(RT) 的 xaml 中的控件

> ID：12996799
> 
> 赞同：4
> 
> 时间：2012-10-21T09:54:24.587
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

我看到大多数 WPF 东西都使用例如 DropShadowEffect，但我在 WinRT 中的 xaml 无法识别，还有其他东西可以使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-25T00:20:43.290

然而，给文本添加阴影很容易。作为 Photoshop 老兄，我立即发布了这个：

```
<Grid>
<TextBlock Margin="1,1,0,0" Foreground="<!--Shadow Color-->" Text="Some text"/>
<TextBlock Foreground="<!--Text Color-->" Text="Some text"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:13:15.487

你是对的，DropShadowEffect 在 Windows 应用商店应用程序中不可用。

目前，效果是使用 DirectX 和 C++ 编程的。如果您不想用 C++ 编写自己的互操作库，请查看[sharpdx.org/ 库](http://sharpdx.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-28T11:48:29.263

如果您知道控件的形状，您可以创建一个带有阴影效果的图像（.png 例如），并在九格（[http://msdn.microsoft ）的帮助下将其包含在控件的样式中.com/en-us/library/windows/desktop/bb189722.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb189722.aspx)）

（如果阴影为 5px 宽，您可以将边距设置为 -5，将九格值设置为 5，以使阴影出现在控件周围）

问候

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-21T10:17:33.450

您可以使用`DropShadowBitmapEffect`创建阴影效果。

可以在[此处](http://msdn.microsoft.com/en-us/library/vstudio/ms753350(v=vs.90).aspx)找到文档和示例。

# javascript - webview内容android的限制

> ID：12996801
> 
> 赞同：1
> 
> 时间：2012-10-21T09:54:33.313
> 
> 标签：javascript, android, webview, limit

我正在尝试将 javascript 文件加载到 webview 中。其中一些文件非常大，总共有 344 kB。当我试图调用一些 JS 函数时，该函数的位置似乎很重要。如果我首先使用该函数加载 js 文件，它可以工作，但如果我最后加载它，则什么也没有发生。是否有可能，webview 对加载的数据有一些限制？我有这个 HTML 容器

`private static final String jsHtmlContainer = "<html><head><script type=\"text/javascript\">%s</script></head></html>";`

我将所有文件加载到一个字符串中，并将该字符串而不是 %s 放在此容器中。这个容器我像这样加载到 webview 中

`mWebview.loadData(content, "text/html", "UTF-8");`

我调用的函数不依赖于任何其他函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:36:24.390

好吧，它表明问题出在其他地方。偶然我在stackoverflow上发现了一些关于javascript的问题并且有评论，在javascript函数体中不能以//开头的评论。当 webview 阅读此内容时，请停止加载其他所有内容。在我的函数中有几个这样的评论，所以在删除它们之后调用函数工作。

# ruby-on-rails-3 - Rails 协会 (belongs_to) 困境

> ID：12996802
> 
> 赞同：1
> 
> 时间：2012-10-21T09:54:34.293
> 
> 标签：ruby-on-rails-3, associations, has-many, belongs-to

我有一个用户模型：

```
class User < ActiveRecord::Base

  has_many :cards

end 
```

和卡片模型：

```
 class Card< ActiveRecord::Base

      belongs_to :user, :foreign_key => "owner_id"

   end 
```

卡模型还有一个名为“owner_id”的属性，我想以这样的方式使用它： Card.first.owner 它将检索拥有该卡的用户

我的问题是，我知道rails会自动连接关联中的id，但这不会发生。

在CardController中，rails卡在create action就行了

```
@card=current_user.cards.new(params[:card]) 
```

并说`unknown attribute: user_id`

我已经完成了`db:migrate`，它仍然无法正常工作。

我必须执行以下操作才能使其正常工作吗？

```
@card = Card.new(params[:card])
@card.owner_id=current_user.id 
```

还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:36:41.233

首先，您不需要 owner_id 列。所有你需要的是

```
class User
  has_many :cards
end 
```

这会给你@user.cards

```
class Card
  belongs_to :owner, :class_name => "User", :foreign_key => "user_id"
end 
```

这会给你@card.owner

# objective-c - obj-c 委托方法为空

> ID：12996804
> 
> 赞同：2
> 
> 时间：2012-10-21T09:54:39.867
> 
> 标签：objective-c, ios, uiviewcontroller, delegates, storyboard

我`FetchVenuesView`之前的`VenuesIDController`. `VenuesIDController`是 a 中的第二个标签栏项目`tabbarcontroller`。 `FetchVenuesView`不是标签栏的一部分。

标签栏中的第一项是`tableview`我可以在其中毫无问题地调用代表。但是，当我尝试调用其中的委托时，`VenuesIDController`它总是在日志中显示为 null。

我在这里做什么？我是否连接故事板中的代表？如何？

我有一个`FetchVenuesViewController.h`

```
#import "VenueTableViewController.h" 
#import "VenueIDController.h"

@interface FetchVenuesViewController : UIViewController< VenueTableViewControllerDelegate, VenueIDControllerDelegate>{
    NSDictionary* venueJSON;
    NSDictionary* idJSON;

};

@property (strong) NSDictionary* idJSON;

- (void)VenueFetch;

- (void)IDFetch;

@end 
```

在`FetchVenuesViewController.m`

```
@synthesize idJSON;

- (void)IDFetch {

    //request some webservice 

    NSData *data = [NSURLConnection sendSynchronousRequest:request
                                         returningResponse:&response
                                                 error:&error];
    //save the response

    if (data) {

        id IDJSON = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error];
        if (!IDJSON) {
           //handle error

        }
        else {

        //do something

        }

    } else {
        // fetch failed

    }

    activityIndicator.hidden = NO;
}

-(NSDictionary *)getID{
    [self IDfetch];
    NSLog(@"json%@",idJSON);
    return idJSON;
} 
```

在`VenueIDController.h`

```
@protocol VenueIDControllerDelegate;

@interface VenueIDController : UIViewController{

}

@property (assign) id <VenueIDControllerDelegate> delegate;
-(IBAction)getIDData:(id)sender;

@end

@protocol VenueIDControllerDelegate <NSObject>
-(NSDictionary *)getID;
@end 
```

并且在`VenueIDController.m`

```
@interface VenueIDController (){
        NSMutableArray* IDData;
        UIImage* IDBarcode;
    }
    -(void) displayIDData:(NSDictionary*)data;
    @end

    @implementation VenueIDController
    @synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

        VenueIDController *vid = [[VenueIDController alloc] init]; 
        vid.delegate = self;
        NSLog(@"%@",vid);

    }
    return self;
}

    -(void) displayIDData:(NSDictionary*)data{

        [delegate getID];

        NSDictionary* idJSON = data;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T15:57:46.677

Your `init` on `VenueIDController` appears wrong. you're already in an init, so you don't need to create another one. instead you should have `self.delegate = self`. The `vid` object you are creating there isn't going to be retained.

# c# - 按下 shift 键时输入数字 vb.net

> ID：12996810
> 
> 赞同：0
> 
> 时间：2012-10-21T09:55:46.727
> 
> 标签：c#, wpf, vb.net, keyboard-events, keyboard-hook

我正在使用vb.net来编辑gridview值，当按下shift时我想同时编辑属于一个组的多个单元格值，现在我的问题是按下shift并且我点击一个数字键它会给我一个象征

例如

```
 SHIFT+1 = !
  SHIFT+2 = @
  and so on 
```

但是我希望它是

```
SHIFT+1 = 1
SHIFT+2 = 2
and so on 
```

是否有内置功能可以做到这一点？

如果不是，那么我认为我需要编写一个函数来执行此操作，该函数的功能是当`shift+1`按下时键盘输入是`1`而不是`!`

关于如何在 vb.net 中实现这种行为的任何想法？并且不要告诉我使用 ctrl，因为我已经将它用于另一件事并且在使用 ctrl 时它不会输入：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:16:14.577

您可以使用这样的幼稚例程。如果您需要逗号等，请根据需要进行修改：

```
Private Sub TextBox1_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyDown
    If e.Shift AndAlso
       (Keys.KeyCode And e.KeyData) >= Keys.D1 AndAlso
       (Keys.KeyCode And e.KeyData) <= Keys.D9 Then

        TextBox1.SelectedText = ChrW((Keys.KeyCode And e.KeyData))
        e.SuppressKeyPress = True

    End If
End Sub 
```

# python - Python 作业 - 比较列表

> ID：12996811
> 
> 赞同：1
> 
> 时间：2012-10-21T09:56:03.677
> 
> 标签：python, list

> **可能重复：**
> [如何检查我的列表是否有来自另一个列表（字典）的项目？](https://stackoverflow.com/questions/12989860/how-to-check-if-my-list-has-an-item-from-another-listdictionary)

这实际上是一个标记的作业。

程序的用户必须写下句子。然后程序检查单词并打印错误的单词（如果错误的单词出现不止一次，程序必须只打印一次）。错误的单词必须按照它们在句子中出现的顺序打印。

这是我的做法。但是有一个问题。由于内置函数 sorted，错误的单词不会按照它们在句子中出现的顺序出现。有没有其他方法可以删除列表中的重复项？

而且字典是从dictionary.txt 导入的！！

```
sentence=input("Sentence:")
dictionary=open("dictionary.txt", encoding="latin2").read().lower().split()
import re
words=re.findall("\w+",sentence.lower()) 

words=sorted(set(words)) 
sez=[]
for i in words:
     if i not in dictionary:
         sez.append(i)

print(sez) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:04:47.727

```
words = filter(lambda index, item: words.index(item) == index, enumerate(words)) 
```

它将过滤掉每个重复项并保持顺序。

正如托马斯所指出的，这是一种相当繁重的方法。如果你需要处理更多的单词，你可以使用这个 for 循环：

```
dups = set()
filtered_list = []
for word in words:
    if not word in dups:
        filtered_list.append(word)
        dups.add(word) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:00:57.103

要删除列表中的重复项，请将它们添加到字典中。字典只有 1 个 KEY:VALUE 对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T10:08:35.853

您可以使用[OrderedSet 配方](http://code.activestate.com/recipes/576694/)。

@edit：顺便说一句，如果字典很大，那么最好将字典列表转换为集合——在列表的情况下，检查集合中元素的存在需要恒定时间而不是 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T10:09:35.537

你应该检查这个答案：

[https://stackoverflow.com/a/7961425/1225541](https://stackoverflow.com/a/7961425/1225541)

如果您使用他的方法并停止对`words`数组进行排序（删除该`words=sorted(set(words))`行），它应该符合您的预期。

# regex - 我可以在 HTML5 模式属性中使用包含与号的正则表达式吗？

> ID：12996816
> 
> 赞同：4
> 
> 时间：2012-10-21T09:56:22.187
> 
> 标签：regex, html, escaping, pattern-matching, ampersand

在 HTML5 webapp 中提交表单之前，我使用以下电子邮件验证：

```
<input id="mail" name="mail" type="email" value="" required  placeholder="Email" 
pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"> 
```

但是，正则表达式中的 & 符号似乎使 HTML 无效。检查[http://validator.w3.org/](http://validator.w3.org/)我收到以下错误消息：

```
& did not start a character reference. 
(& probably should have been escaped as &amp;.) 
```

是否有可能在不弄乱正则表达式的情况下逃脱＆符号？在这种情况下验证者是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T10:05:13.060

例如，您可以使用十六进制值：`\x26`

见这里：[http ://regex101.com/r/bF4bZ3](http://regex101.com/r/bF4bZ3)

换句话说，`[....$%&'*....]`会变成`[....$%\x26'*....]`。对其余部分做同样的事情。

# php - 在 PHP 中将对象转换为数组

> ID：12996821
> 
> 赞同：1
> 
> 时间：2012-10-21T09:56:58.557
> 
> 标签：php, arrays, object, typecasting-operator

> **可能重复：**
> [用数字字符串键对数组进行欺骗](https://stackoverflow.com/questions/12846936/diddling-with-arrays-with-numeric-string-keys)

如 PHP 手册中所述，我们可以对对象进行类型转换并将它们转换为数组，如下所示：

```
$arrayResult = (array)$someObject; 
```

但我在文档中发现了非常有趣的评论：

> 如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名称，有一些值得注意的例外：**整数属性是不可访问的**

**“整数属性”**代表什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:20:04.923

以下是示例：

```
$obj = new stdClass;
$obj->{'1'} = 1;
$arr = (array) $obj;
var_dump($arr);
var_dump(isset($arr[1]));  // will get false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:05:04.563

我相信这意味着您不能使用数组的典型整数属性来迭代，例如在 for 循环中。元素不是整数索引的。

# ruby-on-rails - 用于 Restful 后端的 Ember.js 或 Backbone.js

> ID：12996823
> 
> 赞同：98
> 
> 时间：2012-10-21T09:57:12.107
> 
> 标签：ruby-on-rails, rest, backbone.js, ember.js, frontend

我已经知道 ember.js 是一种比backbone.js 更重量级的方法。我读了很多关于两者的文章。

我在问自己，哪个框架更容易作为 rails rest 后端的前端。对于backbone.js，我看到了调用rest后端的不同方法。对于余烬，我似乎必须包含更多的库，如“数据”或“资源”。为什么有两个库呢？

那么更好的选择是什么？也没有很多例子可以将前端与后端连接起来。后端休息调用的一个很好的工作示例：

URI：../restapi/topics 获取身份验证凭据：admin/secrect 格式：json

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-10-21T15:47:35.067

与流行的观点相反，Ember.js 并不是 Backbone.js 的“重量级方法”。它们是针对完全不同的最终产品的不同类型的工具。Ember 的最佳点是用户将应用程序长时间保持打开状态的应用程序，可能是一整天，并且与应用程序视图或底层数据的交互会触发视图层次结构的深刻变化。Ember 比 Backbone 大，但多亏了`Expires`，`Cache-Control`这仅在第一次加载时很重要。经过两天的日常使用，额外的 30k 将被数据传输所掩盖，如果您的内容涉及图像，则更快。

Backbone 非常适合具有少量状态的应用程序，其中视图层次结构保持相对平坦，并且用户倾向于不经常访问应用程序或访问时间较短。Backbone 的代码变得简短而甜蜜，因为它假设支持 DOM 的数据将被丢弃，并且这两个项目都将被内存收集：[https](https://github.com/documentcloud/backbone/issues/231#issuecomment-4452400) ://github.com/documentcloud/backbone/issues/231#issuecomment-4452400 Backbone 的较小尺寸也使其更适合简短的交互。

人们在这两个框架中编写的应用程序都反映了这些用途：Ember.js 应用程序包括[Square 的 Web 仪表板](https://squareup.com/)、[Zendesk](http://www.zendesk.com/)（至少是代理/票务界面）和[Groupon 的调度](http://www.groupon.com/scheduler)程序：用户可能整天都在使用的所有应用程序。

Backbone 应用程序更侧重于简短或随意的交互，这些交互通常只是较大静态页面的一小部分：[airbnb](https://www.airbnb.com/)、[可汗学院](http://www.khanacademy.org/)、[Foursquare 的地图和列表](https://foursquare.com/)。

您*可以*使用 Backbone 来制作 Ember 所针对的应用程序类型（例如[Rdio](http://rdio.com)），方法是 a) 增加您负责的应用程序代码量以避免内存泄漏或僵尸事件等问题（我个人不推荐这种方法）或者 b) 通过添加诸如[主干](http://marionettejs.com/).marionette或[Coccyx 之](https://github.com/onsi/coccyx)类的 3rd 方库——这些库中有许多都试图提供类似的重叠功能，您最终可能会组装自己的自定义框架，该框架更大并且需要更多的胶水代码如果您刚刚使用过 Ember。

最终，“使用哪个”的问题有两个答案。

首先，“在我的职业生涯中，我通常应该使用哪个”：两者都一样，就像您最终会学习任何特定于您将来想做的工作的工具一样。你永远不会问“Backbone 还是 D3？”；“骨干还是余烬”是一个同样愚蠢的问题。

第二，“我应该在下一个项目中具体使用哪个”：取决于项目。两者都可以同样轻松地与 Rails 服务器通信。如果您的下一个项目涉及由服务器生成的页面与 JavaScript 提供的所谓“丰富岛”的混合，请使用 Backbone。如果您的下一个项目将所有交互推送到浏览器环境中，请使用 Ember。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-22T14:53:38.153

给出一个简短的、简化的答案：对于 RESTful 后端，目前，您应该使用 Backbone。

给出一个更复杂的答案：这真的取决于你在做什么。正如其他人所说，Ember 是为不同的事物而设计的，并且会吸引不同的人群。我的简短回答是基于您包含 RESTful 要求。

目前，Ember-Data（这似乎是 Ember 中的默认持久性机制）还远未做好生产准备。这意味着它有很多错误，而且至关重要的是，它不支持嵌套 URI（例如 /posts/2/comments/4556）。如果 REST 是您的要求，那么如果您选择 Ember，那么您将不得不暂时解决这个问题（即，您要么必须破解它，等待，自己从头开始实现类似 Ember-Data 的东西，要么不使用-非常RESTful URI）。Ember-Data 严格来说不是 Ember 的一部分，所以这是完全可能的。

两者之间的主要区别，除了尺寸，基本上是：

Ember 试图为您做尽可能多的事情，这样您就不必编写尽可能多的代码。它是非常分层的，如果您的应用程序也非常分层，那么它可能非常适合。因为它为您做了很多事情，所以很难弄清楚错误来自哪里以及为什么会发生意外行为（有很多“魔法”）。如果您的应用程序自然适合 Ember 期望您构建的应用程序类型，那么这可能不会成为问题。

Backbone 尝试为您做尽可能少的事情，以便您可以推断正在发生的事情并构建适合您的应用程序的架构（而不是构建适合您正在使用的框架架构的应用程序）。上手要容易得多，但除非你小心，否则很快就会一团糟。它不做计算属性、自动解除绑定事件等事情，而是让你自己决定，所以你需要自己实现很多东西（或者至少选择为你做这些的库），尽管那是而是重点。

**更新**：最近看来，Ember 现在确实支持嵌套 URI，所以我想问题归结为您喜欢多少魔法以及 Ember 在架构上是否适合您的应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T10:04:06.387

我认为您的问题很快就会被阻止:) 这两个框架之间存在一些争论。

基本上 Backbone 不会做很多事情，这就是我喜欢它的原因：你必须编写很多代码，但你会在正确的地方编写代码。Ember 做了很多事情，所以你最好看看它在做什么。

服务器讨论是 Backbone 所做的为数不多的事情之一，它在这方面做得很好。所以我会从 Backbone 开始，如果你不完全满意，我会尝试使用 Ember。

您还可以收听[这个播客](http://javascriptjabber.com/004-jsj-backbone-js-with-jeremy-ashkenas)，其中 Backbone 的创建者 Jeremy Ashkenas 和 Ember 的成员 Yehuda Katz 进行了精彩的*讨论*

# javascript - 在 Ext JS 中以编程方式跳转到下一个控件

> ID：12996839
> 
> 赞同：5
> 
> 时间：2012-10-21T09:59:43.627
> 
> 标签：javascript, extjs, keyboard, extjs2

我在 Ext JS 2.x 中编写了一个包装 UX 控件，`Ext.Form.DateField`以稍微不同地处理按键。特别是，当日历显示时，我希望`Tab`键选择突出显示的日期并移动到下一个表单字段。

我已经让密钥处理程序工作了——它选择了突出显示的日期并关闭了日历——但我无法让它进入下一个字段。

我是否必须从标签顺序中确定下一个字段是什么并尝试设置其焦点？这似乎相当令人费解。或者我可以触发一些事件来让我的控件自动切换到下一个字段（即捕获`Tab`日历中的按键并处理它，就像我正在做的那样，然后将它转发到基础日期字段）？

* * *

**编辑：**总之，是否有一种 Ext（或者，至少是跨平台的）方法可以在特定的表单字段中触发键盘事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T16:19:11.723

**方法 I.**只是不要`event.preventDefault()`在您的 keypress/keyup 事件处理程序中执行此操作，这样您就不会阻止浏览器执行默认操作，即选项卡导航。这个例子有效：

```
Ext.create('Ext.form.Panel', {
    title: 'Contact Info',
    width: 300,
    renderTo: Ext.getBody(),
    items: [{
        xtype: 'textfield',
        name: 'name',
        fieldLabel: 'Name',
        listeners: {
            specialkey: function(me, e) {
                if (e.getKey() == e.TAB) {
                        console.log('Tab key pressed!');
                        // do whatever you want here just don't do e.preventDefault() or e.stopEvent() if you want the browser tab to next control
                    }
            }
        }
    }, {
        xtype: 'textfield',
        name: 'email',
        fieldLabel: 'Email Address',
    }]
}); 
```

我在 Ext 4 中尝试过，但自 Ext 2 以来所有基本方法都应该可用。如果您仍然遇到问题，请分享您的一些代码。

不碍事，让浏览器在本地完成它的工作通常是最好和最强大的解决方案......

* * *

**方法二。**如果你有一个包含多个元素的复杂组件，你仍然可以实现**方法一**的情况。通过*强制焦点在主输入元素*（通常是文本字段）上，同时[使用](http://docs.sencha.com/ext-js/2-3/#!/api/Ext.KeyMap)CSS（a *KeyNav* / [KeyMap](http://docs.sencha.com/ext-js/2-3/#!/api/Ext.KeyNav)在主输入元素中会很方便）。您基本上只是捕获了用户可能将焦点设置在弹出窗口上（例如单击它）并将焦点重新定位到您的主要元素的所有情况。

这仍然可以确保 html 元素的自然 tab 顺序，即使其中一些不是组件。我相信这是最好的方法，而且大部分时间都值得努力实现。

这就是[ComboBox](http://docs.sencha.com/ext-js/2-3/source/Combo.html#Ext-form-ComboBox-method-onViewClick)和[DatePicker](http://docs.sencha.com/ext-js/2-3/source/DatePicker.html#Ext-DatePicker-method-update)等组件的工作方式（您可以看到后者总是在更新 vaule 后将焦点设置为主要元素。ComboBox 的焦点逻辑有点复杂。看看源代码链接如果您对如何在组件中实现它感到困惑，那么很有见地。

* * *

**方法三。**最后一招。如果您仍然需要以编程方式关注另一个（邻居）字段，那相对容易做到。Ext 2.3 的代码（虽然没有测试，我使用的是文档）：

```
var formPanel,  // containing form panel
    currentField, // the field you need to navigate away from

    fields,
    currentFieldIdx,
    nextField;

fields = formPanel.getForm().items;
currentFieldIdx = fields.indexOf(currentField);

if(currentFieldIdx > -1) {
    nextField = fields.itemAt(currentFieldIdx + 1);
    nextField && nextField.focus();
} 
```

* * *

PS 您可以通过 dispatchEvent() 人为地触发`Tab`按键，但由于安全原因，它[不会触发选项卡导航操作。](https://stackoverflow.com/questions/1601593/fire-tab-keypress-event-in-javascript)

# encoding - 仅视频流的更快（低网络流量）编码是什么？VP8还是JPEG？

> ID：12996841
> 
> 赞同：0
> 
> 时间：2012-10-21T10:00:02.167
> 
> 标签：encoding, video-streaming, jpeg, gstreamer, vp8

我正在制作一个开源项目，并且正在使用 gstreamer。我想要的是捕获来自摄像机的输入并传输到另一个 IP 地址。做什么比较快？vp8enc 还是 jpegenc？如果是这样，我应该使用什么设置？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:28:59.227

使用非常低的带宽使用的编解码器并不重要，只需在编码器中设置非常低的比特率即可。但是，当然，这会牺牲最终视频的质量。所引用的两个编解码器将在相同比特率下提供更好的图像质量是 VP8。请记住为编码器使用正确的参数（仅在 VP8 中使用帧内可能会导致图像质量比 Motion JPEG 差）

# java - JTextArea 的 append() 方法似乎不起作用

> ID：12996842
> 
> 赞同：4
> 
> 时间：2012-10-21T10:00:03.423
> 
> 标签：java, swing, file-io, append, jtextarea

我们被分配创建一个简单的编译器作为家庭作业，它将接受一组指令（包含变量、条件、跳转等）并评估它们。这已经完成了，但我想我会让我的程序更……“闪亮”，并添加从文本文件加载指令的能力，只是为了用户舒适；但是，似乎`JTextArea`'`append ()`方法似乎并不真正喜欢我，因为它什么也没做。以下是相关代码：

```
BufferedReader bufferedReader;
File file;
FileDialog fileDialog = new FileDialog (new Frame (), "Open File", FileDialog.LOAD);
String line;

fileDialog.setVisible (true);

if (fileDialog.getFile () != null) {
    file = new File (fileDialog.getDirectory () + fileDialog.getFile ());
    input.setText (""); // delete old first

    try {
        bufferedReader = new BufferedReader (new FileReader (file));
        line = bufferedReader.readLine ();

        while (line != null) {
            input.append (line);
            System.out.println (line);
            line = bufferedReader.readLine ();
        }
    } catch (IOException ioe) {
        ioe.printStackTrace ();
    }
} 
```

（我使用的是 Awt 的 FileDialog 而不是 Swing 的 JFileChooser，因为它在 Mac 上看起来更好，正如[Apple 的官方推荐](https://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/07-NativePlatformIntegration/NativePlatformIntegration.html)中所见。）

此代码中使用的`input`变量指向 JTextArea 实例。有趣的是——文件读取部分必须完美无缺，因为我可以看到文件内容被写入标准输出，这要归功于循环`System.out.println ()`内的调用。`while`但是， 中没有出现任何内容`JTextArea`，并且我已经尝试了我在 StackOverflow 上找到的所有现有解决方案——包括调用`repaint ()`,`revalidate ()`和`updateUI ()`方法。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T10:16:27.497

该代码可能在事件处理循环中调用，您无法在其中进行绘图。通常会使用

```
final String line = bufferedReader.relineadLine();
// final+local var so usable in Runnable.

SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        input.append(line + "\n");
    }
} 
```

不幸的是，在哪里放置invokeLatere（作为循环）需要注意。更好地使用@AndrewThompson 的解决方案。

# gwt - gwt - servlet 路径 + url

> ID：12996845
> 
> 赞同：0
> 
> 时间：2012-10-21T10:00:12.117
> 
> 标签：gwt, servlets

我需要从 WAR 目录下的 xml 文件中读取数据。
我`RequestBuilder`用于创建`GET`请求。它看起来像这样：

```
 RequestBuilder requestBuilder = new RequestBuilder(RequestBuilder.GET,"customerRecord.xml");  
   try {  
        requestBuilder.sendRequest(null, new RequestCallback() {  
            public void onError(Request request, Throwable exception) {  
                requestFailed(exception);  
            }  
            public void onResponseReceived(Request request,Response   response) {  
                renderXML(response.getText());  
            }  
        });  
    } catch (RequestException ex) {  
        requestFailed(ex);  
    } 
```

现在，问题是我不想加载所有数据。我想发送一个参数，告诉服务器要带哪个部分，（比方说 - 多少行数据）然后覆盖 servlet 的 doGet 方法并处理参数。
我有 2 个问题：
1）如何声明 servlet 的路径？servlet 和请求之间的连接在哪里？
2）我在`RequestBuilder`（而不是“customerRecord.xml”）的网址中写什么？我是否需要参考那里的 servlet 或者我可以保留它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:30:41.550

可能是您的意思是 GWT 服务？

您需要创建 2 个接口 - Service 和 ServiceAsync 以及在服务器包中实现 Service（与客户端包处于同一级别）。然后您将实现定义为 servlet（在我的 JBoss 7.1 中它只是注释。在旧版本的 servlet 映射中）：

```
@WebServlet(name="YourService", urlPatterns={"/%module%/YourService"})
public class YourServiceImpl extends RemoteServiceServlet implements YourService 
```

在你的 modeule.xml 中写：

```
<servlet path="/YourService" class="org.name.YourServiceImpl"/> 
```

最后您可以从您的代码中调用此服务

```
YourService.App.getInstance().getSomething(new AsyncCallback<Collection<Something>>() {
        @Override
        public void onFailure(Throwable caught) {
            new MessagePopup("Error: " + caught.getMessage()).center();
        }

        @Override
        public void onSuccess(Collection<Something> result) {

        }
    }); 
```

您可以从您心爱的 IDE 中创建界面。简单多了）

一个想法仍然困扰着我 - 我无法在另一个模块中指定 servlet 的路径。

# php - 需要一个我找不到的正则表达式

> ID：12996850
> 
> 赞同：0
> 
> 时间：2012-10-21T10:01:10.320
> 
> 标签：php, regex, validation

什么是正则表达式：`10/04/2012 3:02 AM`在 php

我整天都在找，一个也找不到。我是正则表达式的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:09:45.660

`\d`表示数字。如果您只想检查一般格式，请使用

```
\d{1,2}/\d{1,2}/\d{4} \d{1,2}:\d{2} [AP]M 
```

在 PHP 中，要在字符串中查找时间戳`$subject`：

```
if (preg_match('%\d{1,2}/\d{1,2}/\d{4} \d{1,2}:\d{2} [AP]M%', $subject, $regs)) {
    $result = $regs[0];
} 
```

如果您需要检查整个字符串是否符合这种格式，请使用

```
if (preg_match('%^\d{1,2}/\d{1,2}/\d{4} \d{1,2}:\d{2} [AP]M$%', $subject)) {
    # Successful match
} 
```

而是（然后使用日期库检查日期的有效性）。

# php - 在codeigniter中将array_push中的数据插入数据库

> ID：12996851
> 
> 赞同：0
> 
> 时间：2012-10-21T10:01:15.317
> 
> 标签：php, codeigniter

嗨，我有这样的数组数据：

```
$data = Array
       (
[0] => Array
    (
        [kode_pbt] => PBT3-2012-10-19
        [kodebr] => 8992802618731
        [harga] => 25905.00
        [jml] => 1
        [subtotal_harga] => 25905
    )

[1] => Array
    (
        [kode_pbt] => PBT3-2012-10-19
        [kodebr] => 8992388112401
        [harga] => 1340.00
        [jml] => 1
        [subtotal_harga] => 1340
    )

  ) 
```

我的问题是当我想将这段代码插入数据库时​​： $this->db->insert($table, $data) 我收到一个错误：消息：数组到字符串的转换我已更改为 $this->db- >insert_batch($table, $data)，但我收到错误“500 内部服务器错误”。感谢您的协助。

这是我在控制器中的完整功能代码：

```
function save_pbt($kode = -1) {
    $pbt_detail = array();
    $pbt_data = array(
        'kode_pbt' => trim($this->input->post('kode_pbt')),
        'unit_pemakai' => trim($this->input->post('unit_pemakai')),
        'jml_item' => trim($this->input->post('jml_item')),
        'total_harga' => trim($this->input->post('total_harga')),
        'tgl_pbt' => date('Y-m-d'),
        'status' => 0
    );
    for ($i = 0; $i <= $this->input->post('max_i'); $i++) {
        if ($this->input->post('kodebr' . $i)) {
            $detail_pbt = array(
                'kode_pbt' => $this->input->post('kode_pbt'),
                'kodebr' => $this->input->post('kodebr' . $i),
                'harga' => $this->input->post('beli' . $i),
                'jml' => $this->input->post('jml' . $i),
                'subtotal_harga' => $this->input->post('subtotal' . $i)
            );
            array_push($pbt_detail, $detail_pbt);
        }
    }

    $this->db->trans_begin();
    $this->Pbt_model->insert_pbt($pbt_data);
    $this->Pbt_model->insert_detail_pbt($pbt_detail);
    if ($this->db->trans_status() == FALSE) {
        $this->db->trans_rollback();

        echo "TRANSACTION ROLLBACK";
    } else {
        $pbt_data['detail'] = $pbt_detail;
        $url = SERVER_SIKOPIT . 'service/service?process=pbt&api_key=' . API_KEY;
        $response = json_encode($this->rest_helper($url, $pbt_data, "POST"));
        echo $response;
        $response = json_decode($response);
        if ($response->status == true) {
            $this->db->trans_commit();
            echo "TRANSACTION SUCCESS";
            redirect(site_url('receivings'));
        } else {
            $this->db->trans_rollback();
            echo "INSERT PBT BARU GAGAL !!";
            echo "TRANSACTION ROLLBACK";
        }
    }
} 
```

# matlab - Matlab：透明物体检测

> ID：12996856
> 
> 赞同：1
> 
> 时间：2012-10-21T10:02:31.457
> 
> 标签：matlab, kinect, transparent, matlab-cvst

我正在尝试检测图像中的透明物体（玻璃瓶）。该图像取自 Kinect，因此有 rgb 和深度图像可用。

我从文献中读到透明物体的边界具有“未知深度值”，我可以将其用作检测物体的边界条件。

问题是我无法从我的深度文件中找到该信息，即。图像的深度仅返回零或其他值，但绝不会“未知”

我假设 kinect 将“未知深度值”表示为零，但这引发了另一个问题：图像中有很多零（即边界等）我如何知道对象的哪个零？

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T20:22:40.160

我建议您看一下以下出版物：

他们能够检测到物体（如水瓶和眼镜）。全部在matlab中进行。

通过动作识别进行对象定位。J. Darby、B. Li、R. Cunningham 和 N. Costen。国际植保公约，2012 年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:16:30.410

您可以尝试检测透明对象的主体而不是边框​​。主体应该返回其背后的任何值，但这些值会更嘈杂。取一个运行时间的样本并计算运行标准偏差。寻找比其他地方有更大误差的图像区域。如果您可以访问原始数据 (libfreenect)，这会更简单。如果将数据转换为距离，则误差是距离的函数，因此您需要检测在该距离处比其他区域更嘈杂的区域，而不仅仅是比其他地方更嘈杂的区域。

# c++ - 从 'const char*' 到 'std::basic_ostream 的无效转换 ::char_type {aka char}'

> ID：12996862
> 
> 赞同：1
> 
> 时间：2012-10-21T10:03:24.733
> 
> 标签：c++

无法解决这个问题

```
ofstream out;
out.open("o");
string a[5][5];
//fill array with letters from 'in.get(ch)'...and then i've tryed:
//1
out.put(a[row[0]][col[1]].c_str()); //=>invalid conversion from 'const char*' to 'std::basic_ostream<char>::char_type {aka char}'
//2:
out.put(const_cast<char *>(a[row[0]][col[1]].c_str())); //=>invalid conversion from 'char*' to 'std::basic_ostream<char>::char_type {aka char}' 
//3
char x=const_cast<char *>(a[row[0]][col[1]].c_str());
out.put(x); //=>invalid conversion from 'char*' to 'char' 
```

似乎没有任何工作。你能帮助我吗？我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T10:05:20.970

`ofstream::put()`用于将单个字符而不是字符串放入流中。

如果要将字符串打印到文件流，为什么不简单地使用`<<`：

出 << a[row[0]][col[1]];

# android - AlertDialog EditText 输入验证不起作用

> ID：12996863
> 
> 赞同：1
> 
> 时间：2012-10-21T10:03:46.963
> 
> 标签：android, if-statement, dialog, android-edittext, validation

我创建了一个带有 TextEdit 的对话框作为数字输入，以将其转换为双精度值。我想通过检查 TextEdit 输入是否为空来防止异常，但它总是跳转到 else 语句，因此当 Ed​​itText 为空时会创建异常。

```
final Builder builder = new Builder(this);
            final EditText input = new EditText(this);
            input.setKeyListener(DigitsKeyListener.getInstance(false, true));
            builder
                .setTitle(R.string.dialog_title_addmark)
                .setMessage(R.string.dialog_addmark)
                .setView(input)
                .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        if (input.toString().trim().length() == 0) {

                            Toast.makeText(Marks.this, R.string.input_empty, Toast.LENGTH_SHORT).show();

                        } else {
                            Double value = Double.valueOf(input.getText().toString());
                            db.insertMark(selection, value);
                            getData();
                        }
                    }
                })
                .setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                    }

                })
                .show(); 
```

我也试过检查 (input.toString() != null) 但这也不起作用。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:08:14.297

如果你想要一个`EditText`对象的文本，你应该使用下面的代码行：

```
input.getText().tostring(); 
```

`input`-对象在哪里`EditText`。

使用代码

```
input.toString(); 
```

会给你一个对象的字符串表示，只要对象不是`null`，那个对象的 toString 就不是`null`，所以 using`input.toString() != null`不会给你任何有用的信息。

这意味着您应该进行以下验证：

`if (input.getText().toString().trim().length() == 0)`确定输入对象是否包含一些文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:07:33.610

试试这个方法。。

```
 if (input.toString().trim().length()< 0) {

                            Toast.makeText(Marks.this, R.string.input_empty, Toast.LENGTH_SHORT).show();

                        } else {
                            Double value = Double.valueOf(input.getText().toString());
                            db.insertMark(selection, value);
                            getData();
                        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T10:08:31.030

input.toString() 将返回 Edittext 的参考值，而不是 Edittext 中的文本。

使用以下条件

```
 if(input.getText().toString() != null || !input.getText().toString().isEmpty()) 
```

# django - facebook django应用程序的oauth中的redirect_uri错误

> ID：12996864
> 
> 赞同：4
> 
> 时间：2012-10-21T10:04:01.133
> 
> 标签：django, facebook, oauth

我在从 Facebook 获取我正在尝试编写的 Django 应用程序的访问令牌时遇到问题。我的视图设置如下。

```
from django.http import HttpResponse, HttpResponseRedirect
from django.template import Context, loader
import urllib, json, sys

APP_ID = 'DDDDDDDDDDDDDDD'
APP_SECRET = 'SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS'
MY_URL = 'http://pckandap.com'

def fbauth(request):
    template = loader.get_template('fbauth.html')

    code = request.GET.get('code')
    if code is None:
        redirect_url = 'https://www.facebook.com/dialog/oauth?client_id='+APP_ID+'&redirect_uri='+MY_URL+'&state=pk1&scope=user_likes'
        return HttpResponseRedirect(redirect_url)
    else:
        access_token = urllib.urlopen('https://graph.facebook.com/oauth/access_token?client_id='+APP_ID+'&redirect_uri='+MY_URL+'&client_secret='+APP_SECRET+'&code='+code)
        context = Context({
            'code_url' : 'https://www.facebook.com/dialog/oauth?client_id='+APP_ID+'&redirect_uri=http://test.com'+'&state=pk1&scope=user_likes',
            'token_url' : 'https://graph.facebook.com/oauth/access_token?client_id='+APP_ID+'&redirect_uri='+MY_URL+'&client_secret='+APP_SECRET+'&code='+code,
            'access_token' : access_token.read()
        })
    return HttpResponse(template.render(context)) 
```

在我转储这三个变量的模板中，我得到以下信息：
**code_url**：[https ://www.facebook.com/dialog/oauth?client_id=258585004264349&redirect_uri=http:](https://www.facebook.com/dialog/oauth?client_id=258585004264349&redirect_uri=http://pckandap.com&state=pk1&scope=user_likes)
**//pckandap.com&state=pk1&scope=user_likes token_url**：[https:// graph.facebook.com/oauth/access_token?client_id=258585004264349&redirect_uri=http://pckandap.com&client_secret=0916bad6925f0df7719218bef87b9576&code=AQDiSPeG4wGLSPKLxy2P1gPWv6se46PN_-CPbUeB3ruZKmvPM7enVHc7yiiLe6goFZwG7quOokNGLY6ktOi32VX0SB5lqjbe-kvT_hxhwIYV3VkJklOpFysSWAWrCnOu5w0pYVIC5GAIpOE7QUVzq3GMf-u6W096zn_4h7X9ODjHo1qGdxUTf9KxCpDXJLzRib2YtZfpR2-RZj0tmAXoN139](https://graph.facebook.com/oauth/access_token?client_id=258585004264349&redirect_uri=http://pckandap.com&client_secret=0916bad6925f0df7719218bef87b9576&code=AQDiSPeG4wGLSPKLxy2P1gPWv6se46PN_-CPbUeB3ruZKmvPM7enVHc7yiiLe6goFZwG7quOokNGLY6ktOi32VX0SB5lqjbe-kvT_hxhwIYV3VkJklOpFysSWAWrCnOu5w0pYVIC5GAIpOE7QUVzq3GMf-u6W096zn_4h7X9ODjHo1qGdxUTf9KxCpDXJLzRib2YtZfpR2-RZj0tmAXoN139)
**access_token**: {"error":{"message":"验证验证码时出错。请确保您的 redirect_uri 与您在 OAuth 对话请求中使用的相同","type":"OAuthException","code":100} }

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T12:34:24.270

发现 redirect_uri 需要一个斜杠。以下现在有效。

```
from django.http import HttpResponse, HttpResponseRedirect
from django.template import Context, loader
import urllib, json, sys, cgi

APP_ID = 'DDDDDDDDDDDDDDD'
APP_SECRET = 'SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS'
MY_URL = 'http://pckandap.com/'

def fbauth(request):
    code = request.GET.get('code')
    if code is None:
        args = dict(client_id=APP_ID, redirect_uri=MY_URL, scope="user_likes,friends_likes")
        redirect_url = "https://graph.facebook.com/oauth/authorize?" + urllib.urlencode(args)
        return HttpResponseRedirect(redirect_url)
    else:
        args = dict(client_id=APP_ID, redirect_uri=MY_URL)
        args["client_secret"] = APP_SECRET  
        args["code"] = code
        token_url = "https://graph.facebook.com/oauth/access_token?"+urllib.urlencode(args)
        request.session['access_token'] = urllib.urlopen(token_url).read()[13:-1]
        return HttpResponseRedirect('/dash/likes') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T12:20:56.460

您是否可以使用现有模块（[django-social-auth](https://github.com/omab/django-social-auth)）进行 facebook 登录？

如果没有，我将首先更改`if`循环的逻辑，因为它无法打开。改变它：

```
code = request.GET.get('code', None)

if code is not None:
    access_token = urllib.urlopen...
else:
    redirect_url = ... 
```

在你的`context['code_url']`你有`redirect_uri=http://test.com`，应该用不同的东西代替吗？

# fortran - 使用 Fortran 写入显示输出

> ID：12996868
> 
> 赞同：0
> 
> 时间：2012-10-21T10:04:42.047
> 
> 标签：fortran

我想`Test = 0`使用 Fortran 显示输出，我尝试使用：

`'WRITE(11,*) 'Test =' testdata'`

假设 11 是正确的并且`testdata`是正在计算的参数。

我无法获得输出并且出现错误。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T10:10:59.190

尝试插入逗号并删除撇号：

```
WRITE(11,*) 'Test =', testdata 
```

如果您报告了您看到的错误消息，我可能会让这个答案更贴切。

# javascript - 为什么带有对象的 typeof 数组返回“object”而不是“array”？

> ID：12996871
> 
> 赞同：218
> 
> 时间：2012-10-21T10:05:04.217
> 
> 标签：javascript, jquery, arrays, object, typeof

> **可能重复：**
> [JavaScript：检查对象是否为数组？](https://stackoverflow.com/questions/4775722/javascript-check-if-object-is-array)

为什么对象数组被视为对象，而不是数组？例如：

```
$.ajax({
    url: 'http://api.twitter.com/1/statuses/user_timeline.json',
    data: { screen_name: 'mick__romney'},
    dataType: 'jsonp',
    success: function(data) {
        console.dir(data); //Array[20]
        alert(typeof data); //Object
    }
});​ 
```

[小提琴](http://jsfiddle.net/6JCcj/)

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-10-21T10:05:51.957

Javascript 中奇怪的行为和规范之一是 typeof Array is `Object`.

您可以通过以下几种方式检查变量是否为数组：

```
var isArr = data instanceof Array;
var isArr = Array.isArray(data); 
```

但最可靠的方法是：

```
isArr = Object.prototype.toString.call(data) == '[object Array]'; 
```

由于您使用 jQuery 标记了您的问题，因此您可以使用 jQuery[`isArray`](http://api.jquery.com/jQuery.isArray/)函数：

```
var isArr = $.isArray(data); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-21T10:17:16.343

引用规范

# 15.4 数组对象

> 数组对象对某一类属性名称给予特殊处理。当且仅当 ToString(ToUint32(P)) 等于 P 且 ToUint32(P) 不等于 2^32-1 时，属性名称 P（以字符串值的形式）是数组索引。属性名称为数组索引的属性也称为元素。每个 Array 对象都有一个长度属性，其值始终是小于 2^32 的非负整数。length 属性的值在数值上大于名称为数组索引的每个属性的名称；每当创建或更改 Array 对象的属性时，都会根据需要调整其他属性以保持此不变性。具体来说，每当添加名称为数组索引的属性时，如果需要，长度属性会更改为比该数组索引的数值大一；并且每当更改长度属性时，所有名称为数组索引且值不小于新长度的属性都会被自动删除。此约束仅适用于 Array 对象的自身属性，不受可能从其原型继承的长度或数组索引属性的影响。

这是一张桌子`typeof`

![在此处输入图像描述](../Images/5cd511c1e1b4991046ece92695635f43.png)

* * *

添加一些背景知识，JavaScript 中有两种数据类型：

1.  **原始数据类型**- 这包括 null、未定义、字符串、布尔值、数字和对象。
2.  **派生数据类型/特殊对象**- 这些包括函数、数组和正则表达式。是的，这些都是从 JavaScript 中的“对象”派生的。

JavaScript 中的对象在结构上类似于大多数面向对象语言中的关联数组/字典——即，它具有一组键值对。

可以将数组视为具有以下属性/键的对象：

1.  **长度**- 这可以是 0 或更大（非负）。
2.  **数组索引**。我的意思是“0”、“1”、“2”等都是数组对象的属性。

希望这有助于更多地了解 typeof Array 为什么返回一个对象。干杯!

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-21T10:42:39.733

试试这个例子，你也会明白 JavaScript 中关联数组和对象之间的区别。

**关联数组**

```
var a = new Array(1,2,3); 
a['key'] = 'experiment';
Array.isArray(a); 
```

返回`true`

请记住，这`a.length`将是未定义的，因为`length`被视为键，您应该使用它`Object.keys(a).length`来获取关联数组的长度。

**目的**

```
var a = {1:1, 2:2, 3:3,'key':'experiment'}; 
Array.isArray(a) 
```

返回`false`

JSON返回一个对象......可以返回一个关联数组......但它不是那样的

# c# - 统一 Kinect 未检测到玩家时触发什么事件

> ID：12996873
> 
> 赞同：4
> 
> 时间：2012-10-21T10:05:13.763
> 
> 标签：c#, unity3d, kinect, openni

*我一直在使用 kinect 设置在 unity3D 中进行项目。该设置运行良好。我将 Unity3D 3.4 与 OpenNI、C# 编码，当然还有 kinect 结合使用。

我面临的问题是 openNI 的标准 playermanager 是不够的，因为它无法识别玩家在没有超时的情况下离开。问题是，我试图找出在玩家看不见的那一刻触发了哪个事件。

通常，当玩家走出画面时，软件会开始计数，并且只有在（在我的情况下）20-30 秒后才会释放实际的玩家。

长话短说，我需要知道当玩家不再可见时触发了什么事件。或者，我想要一个解决方案，了解如何在任何给定时间知道视野中有多少活跃玩家。

非常感谢您！*

**解决方案：**

```
private void ExitUserCallback(object sender, UserExitEventArgs e)
    {
        // Put whatever code you want active when player leaves field of view
        Debug.Log("Exit user, userID=" + e.ID);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:49:13.107

答案，如主要问题中所写：

```
private void ExitUserCallback(object sender, UserExitEventArgs e)
    {
        // Put whatever code you want active when player leaves field of view
        Debug.Log("Exit user, userID=" + e.ID);
    } 
```

感谢所有的帮助；）

# python - 如何将属性设置为python文件？

> ID：12996875
> 
> 赞同：0
> 
> 时间：2012-10-21T10:05:30.973
> 
> 标签：python, nosetests, setattr

我知道如何为类设置属性，但找不到如何为文件设置..

```
flow = ['1','4','5','2']

def test_generator(test):
    def test_parser(self):
        print test
    return test_parser

class API_tests(unittest.TestCase):
        pass

for test in flow:
    test_name = 'test_%s' % test
    test = test_generator(test)
    setattr(API_tests, test_name, test) 
```

这会奏效。

我想将 setattr() 上的 API_tests 替换为作为对象而不是类的文件，以便该文件将附加函数 (test_generator X 4) 我动态设置它们

我在命令行上运行“nosetests -v”时的预期结果是它会显示“4 个测试通过”

这个问题可以在其他作品中：how to get the current file as an object

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:22:15.417

与其在模块命名空间中动态创建测试函数（我认为这是您的意图），不如使用测试生成器的鼻子测试支持。

如果鼻子检测到一个生成器并且该生成器产生一个可调用对象和可调用对象所需的任何参数，它将对其进行迭代并为您运行每个测试。

您的示例可以重写为

```
def check_flow_value(val):
    # assert something about val
    assert True

def test_flows():
    flow = ['1','4','5','2']
    for val in flow:
        yield check_flow_value, val 
```

鉴于此，nose 将运行 4 次测试

# php - Codeigniter - 遇到错误 - 无法加载请求的类：加密

> ID：12996881
> 
> 赞同：0
> 
> 时间：2012-10-21T10:06:16.447
> 
> 标签：php, codeigniter, autoload

我继承了一个 CI v2.0.2 项目。

出于开发目的，该项目已移至另一个子域，并且该`database.php`文件已正确重新配置。

登录页面加载正常。但是，在尝试登录后，我收到来自 CI 的错误消息：

```
An Error Was Encountered 
Unable to load the requested class: encrypt 
```

在`autoload.php`中，`database`和`session`库是自动加载的。该文件与主代码库中的文件相同。

如果我`encrypt`在上面的行中添加库，我根本看不到登录页面。

以下是加载登录页面的日志文件 -

```
DEBUG - 2012-10-21 04:15:22 --> Config Class Initialized
DEBUG - 2012-10-21 04:15:22 --> Hooks Class Initialized
DEBUG - 2012-10-21 04:15:22 --> Utf8 Class Initialized
DEBUG - 2012-10-21 04:15:22 --> UTF-8 Support Enabled
DEBUG - 2012-10-21 04:15:22 --> URI Class Initialized
DEBUG - 2012-10-21 04:15:22 --> Router Class Initialized
DEBUG - 2012-10-21 04:15:22 --> Output Class Initialized
DEBUG - 2012-10-21 04:15:22 --> Security Class Initialized
DEBUG - 2012-10-21 04:15:22 --> Input Class Initialized
DEBUG - 2012-10-21 04:15:22 --> XSS Filtering completed
DEBUG - 2012-10-21 04:15:22 --> XSS Filtering completed
DEBUG - 2012-10-21 04:15:22 --> XSS Filtering completed
DEBUG - 2012-10-21 04:15:22 --> Global POST and COOKIE data sanitized
DEBUG - 2012-10-21 04:15:22 --> Language Class Initialized
DEBUG - 2012-10-21 04:15:22 --> Loader Class Initialized
DEBUG - 2012-10-21 04:15:22 --> Helper loaded: url_helper
DEBUG - 2012-10-21 04:15:22 --> Database Driver Class Initialized
DEBUG - 2012-10-21 04:15:23 --> Session Class Initialized
DEBUG - 2012-10-21 04:15:23 --> Helper loaded: string_helper
DEBUG - 2012-10-21 04:15:23 --> Session routines successfully run
DEBUG - 2012-10-21 04:15:23 --> Controller Class Initialized
ERROR - 2012-10-21 04:15:23 --> Unable to load the requested class: encrypt 
```

当从原始域使用登录时，登录工作正常。

我应该从哪里开始寻找任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:36:12.653

据推测，该错误是由以下原因之一引起的。

1）不知何故，库的文件名设法导致 CodeIgniter 无法找到该文件

2）可能文件在服务器上不存在，CodeIgniter 又一次找不到它。

3) 文件名可能与您在代码中引用的不同。

# php - 动态 PHP 图像请求 url

> ID：12996883
> 
> 赞同：0
> 
> 时间：2012-10-21T10:06:25.587
> 
> 标签：php, gd

我有一个使用 GD 生成动态图像的 PHP 脚本。可以通过例如[http://mysite.com/scripts/phpimages.php远程访问图像](http://mysite.com/scripts/phpimages.php)

任何远程网站（例如 example.com）都可以在其客户端 HTML img 标记中呈现此图像。例如：

```
<!-- http://example.com/about.html -->
<img src="http://mysite.com/scripts/phpimages.php" /> 
```

我需要我的脚本能够知道图像请求页面的 URL，即[http://example.com/about.html](http://example.com/about.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:10:12.757

用这个

```
 echo $_SERVER['HTTP_REFERER']; 
```

为了防止错误，

```
if(isset($_SERVER['HTTP_REFERER'])) {
    echo $_SERVER['HTTP_REFERER'];
} 
```

# c# - 实施 Dijkstra 后 2 个节点之间的图中的所有路径

> ID：12996886
> 
> 赞同：1
> 
> 时间：2012-10-21T10:06:56.603
> 
> 标签：c#

我正在研究一个巨大的光网络项目，其中网络表示为可能存在循环的无向图。在某些时候，我想找到图中两个节点之间代表任意光学连接的所有最小跳跃路径。我成功地实现了所有边的权重为 1 的 Djikstra，以找到最小跳跃路径而不是最小权重，并修改了松弛步骤以保存节点的所有父节点而不是一个节点（添加代码以在距离相等而不是更小时保存）。所以现在在下面的示例网络中，我从节点 0 到节点 4：节点 1 有父节点 0，节点 2 有父节点 0，节点 3 有父节点 1,2，节点 4 有父节点 3。每个节点组合都是一个对象单元在二维数组中，每个单元格的许多属性之一是其父级列表（即在单元格 0 中搜索父级，

```
0 ---- 1
|      |
2 ---- 3 --- 4 
```

现在我被困住了。我想以某种方式保存从图中所有源到所有目的地的所有最小跳路径，这样我就可以为任何可能的任意连接提供最小跳路径。你能推荐一个解决方案吗？我已经为此工作了好几天，但我真的被困住了。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:02:06.100

您的主要问题将是存储。

假设您有 10000 个节点。然后对于每个节点 N(i)，您想要存储下一个最小跳到所有可能的目的地。这意味着图中每个节点有 9999 个节点，也就是说，您需要存储 3*N^2 个节点值。

此时，从节点 N(i) 到节点 N(j) 将意味着：

```
k = i
while k is not j:
    h = 0
    while h < length(N(k).NextHops)
        if N(k).NextHops(h).Destination is j:
           k = N(k).NextHops(h).NextNode
           break
        else:
           h = h+1
    # if h == length of NextHops, "No Route To Host" 
```

您可以使用 Dijkstra 初始化 NextHops（一旦找到最短路径就不会终止它）：从第一个节点开始并探索在每个节点中存储到第一个节点的距离的整个图，以及提供该距离的前一个节点。最后，元组 { Dest: i; 成本： ？; 下一个： ？} 将为所有节点初始化。如果图是连接的，则每个节点都有 N-1 个条目，因此您可以在数组的位置 i 处使用 2 元组 { Cost, Next }。

对于连通图，寻路算法变为

```
def findpath(i, j):
    k = i
    p = []
    c = 0
    while k is not j:
        p += i
        c += N[k].NextHops[j].Cost
        k =  N[k].NextHops[j].Next

    return { 'path': p, 'cost': c } 
```

# algorithm - 执行具有数值稳定性的大整数矩阵运算的算法

> ID：12996888
> 
> 赞同：0
> 
> 时间：2012-10-21T10:07:25.183
> 
> 标签：algorithm, matrix, linear-algebra, numerical-stability

我正在寻找一个在不牺牲数值稳定性的情况下对大型稀疏矩阵执行矩阵运算的库。矩阵将是 1000+ x 1000+，矩阵的值将在 0 到 1000 之间。我将执行索引演算算法（en.wikipedia.org/wiki/Index_calculus_algorithm），因此我将生成（稀疏）行向量矩阵串行。在我开发每一行时，我需要测试线性独立性。一旦我用所需数量的线性独立向量填充我的矩阵，我就需要将矩阵转换为简化的行梯形形式。

现在的问题是我的实现使用高斯消除来确定线性独立性（一旦找到我的所有行向量，确保行梯形）。然而，考虑到矩阵的密度和大小，这意味着每个新行中的条目随着时间的推移呈指数增长，因为必须找到前导条目的 lcm 才能执行取消。找到矩阵的简化形式进一步加剧了这个问题。

所以我的问题是，是否有一种算法，或者更好的实现，可以测试线性独立性并解决减少的行梯形，同时保持条目尽可能小？对线性独立性的有效测试尤其重要，因为在索引演算算法中它执行得最多。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:05:47.553

通常，如果您使用大型矩阵，人们会使用 LAPACK：该库包含所有基本矩阵例程并支持许多不同的矩阵类型（稀疏，...）。你可以使用这个库来实现你的算法，我认为它会帮助你

# android - SherlockFragment 的活动

> ID：12996889
> 
> 赞同：2
> 
> 时间：2012-10-21T10:07:32.157
> 
> 标签：android, android-activity, android-fragments, actionbarsherlock

我想将我的应用程序（扩展 Activity）更改为片段（扩展 SherlockFragment）

如果我改变它，我会有很多错误；

```
public class AlarmClock extends SherlockFragment implements OnClickListener { 
```

这是我的 onCreateView：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)

    {
        // sanity check -- no database, no clock
        if (getContentResolver() == null) {
            new AlertDialog.Builder(this)
                    .setTitle(getString(R.string.error))
                    .setMessage(getString(R.string.dberror))
                    .setPositiveButton(android.R.string.ok,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    finish();
                                }
                            })
                    .setOnCancelListener(
                            new DialogInterface.OnCancelListener() {
                                public void onCancel(DialogInterface dialog) {
                                    finish();
                                }
                            }).setIcon(android.R.drawable.ic_dialog_alert)
                    .create().show();
            return;
        }
        View view = inflater.inflate(R.layout.alarm_clock, container, false);
        // menu buttons
        add = (ImageButton) findViewById(R.id.ibAdd);
        snooze = (ImageButton) findViewById(R.id.ibSnooze);

        add.setOnClickListener(this);
        snooze.setOnClickListener(this);
        mFactory = LayoutInflater.from(this);
        mPrefs = getSharedPreferences(PREFERENCES, 0);

        mCursor = Alarms.getAlarmsCursor(getContentResolver());
        mAlarmsList = (ListView) findViewById(R.id.alarms_list);
        mAlarmsList.setAdapter(new AlarmTimeAdapter(this, mCursor));
        mAlarmsList.setVerticalScrollBarEnabled(true);
        mAlarmsList.setItemsCanFocus(true);

        mClockLayout = (ViewGroup) findViewById(R.id.clock);

        mQuickAlarm = findViewById(R.id.ibSnooze);
        mQuickAlarm.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showQuickAlarmDialog();
            }
        });

        setVolumeControlStream(android.media.AudioManager.STREAM_ALARM);
        setQuickAlarmVisibility(mPrefs.getBoolean(PREF_SHOW_QUICK_ALARM, true));
        return view;
    } 
```

有很多错误是因为没有Activity。如果是 Activity 它可以工作。

**我使用“扩展 SherlockFragment”是因为我想将它添加到表中。** 如何解决这个问题？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:33:29.313

如果是正确的，Fragments 肯定必须在 Activity 中使用。

所以不要使用**这个**使用**getActivity();** 获取活动（使用此片段）上下文。

就像是：

```
getActivity.finish(); 
```

如果是**findViewById(//some Id);**

像这样使用它：

```
inflatedView.findViewById(//Id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:41:13.030

A`Fragment`不是 a `Context`（与`Activity`or不同`Application`）。所以很多方法都不可用。

但是，它可以访问它所附加的上下文。通常，您可以`getActivity()`在片段内调用以获取它。您应该`Fragment`使用该`isAdded()`方法检查是否是活动的一部分。

您应该阅读一些有关 Fragments 的信息，将现有活动移植到使用 Fragments，... 可以使用 Google 获得教程。

# javascript - 为什么我无法读取传递给函数的对象的属性？在 JavaScript 中

> ID：12996891
> 
> 赞同：3
> 
> 时间：2012-10-21T10:07:49.740
> 
> 标签：javascript, object, properties

我在函数 getOlder() 中遇到下一个错误：
*TypeError: Cannot read property 'age' of undefined*

有什么问题以及如何解决？

```
function person(name, age) {
    this.name=name;
    this.age=age
}

// Returns the older person in a group of persons.
var getOlder = function(people) {
    if (people.length === 0) {
        return new person();
    }

    var older = people[0]; // The first one is the older for now.

    var value;
    for (var _ in people) {
        value = people[_];
        if (value.age > older.age) {
            older = value;
        }
    }
    return older;
};

// Declare some persons.
var paul = new person("Paul", 23);
var jim = new person("Jim", 24);
var sam = new person("Sam", 84);
var rob = new person("Rob", 54);
var karl = new person("Karl", 19);

var older = getOlder(paul, jim);
if (older.name !== "Jim") {
    console.log("Fail");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T10:10:13.247

查看函数的签名：

```
var getOlder = function(people) { 
```

您没有创建函数以使其接受两个人对象。您显然只接受一个数组，因为您正在使用`people.length`和`people[0]`在函数内部。所以你还必须传递一个数组：

```
var older = getOlder([paul, jim]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:29:08.163

```
var getOlder = function() {
    var people = arguments;
    if (people.length === 0) {
        return new person();
    }

    var older = people[0]; // The first one is the older for now.

    var value;
    for (var _ in people) {
        value = people[_];
        if (value.age > older.age) {
            older = value;
        }
    }
    return older;
   }; 
```

通过在函数定义中不接受任何参数并依靠 JS 的可变参数功能，您可以摆脱调用`getOlder(paul, jim)`.

*arguments*是每个函数的属性，它基本上是在调用时提供给它的变量参数数组。

# javascript - 骨干验证功能不起作用

> ID：12996898
> 
> 赞同：1
> 
> 时间：2012-10-21T10:09:10.597
> 
> 标签：javascript, jquery, backbone.js

我正在使用主干验证功能，但它再次出现此错误`Uncaught TypeError: Object [object Object] has no method 'apply'`。我真的不知道为什么它会给我这个错误。

这是我的代码

```
$(function () {
var Veh = new Backbone.Model.extend({
    validate: function (attrs) {
        var validColors = ['white','red', 'black'];
        var colorIsValid = function (attrs) {
            if(!attrs.color) return true;
            return _(validColors).include(attrs.color);
        }
        if(!colorIsValid(attrs)) {
            return 'wrong color';
        }
    }
});
var car = new Veh();
car.on('error', function (model, error) {
    console.log(error);
});
car.set('foo', 'bar');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:26:57.040

更新：错误是使用新的。使用 Backbone.extend 时不要做 new。这是因为您正在创建一个类而不是一个对象。

```
$(function () {
var Veh = Backbone.Model.extend({
    validate: function (attrs) {
        var validColors = ['white','red', 'black'];
        var colorIsValid = function (attrs) {
            if(!attrs.color) return true;
            return _(validColors).include(attrs.color);
        }
        if(!colorIsValid(attrs)) {
            return 'wrong color';
        }
    }
}); 
```

注意 `var Veh = Backbone.Model.extend`而不是

```
var Veh = new Backbone.Model.extend 
```

有关无意中使用 new 的副作用，请参阅[此问题。](https://stackoverflow.com/questions/383402/is-javascript-s-new-keyword-considered-harmful)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:37:52.183

如果您有未缩小的版本，您可以单步执行代码并查看错误在哪里。无论如何，我会立即做的是更改`colorIsValid`函数的参数名称，使其与外部函数不同......

```
validate: function (attrs) {
    var validColors = ['white','red', 'black'];
    var colorIsValid = function (modelAttrs) {
        if(!modelAttrs.color) return true;
        return _(validColors).include(modelAttrs.color);
    }
    if(!colorIsValid(attrs)) {
        return 'wrong color';
    }
} 
```

# mysql - 仅给定用户 ID 选择固定范围的高分的有效方法

> ID：12996899
> 
> 赞同：2
> 
> 时间：2012-10-21T10:09:23.227
> 
> 标签：mysql, database

我有一个表格，其中包含每个球员参加过的每场比赛的记录。从这个问题的最佳答案开始，我已经有了一个很好的开端：[Ranking with Millions entries](https://stackoverflow.com/questions/5436263/ranking-with-millions-of-entries)，并且目前正在使用这个查询来检索每个玩家的最高分和他们的排名：

```
SET @rank=0;

SELECT user_id, score, rank FROM (
    SELECT *, @rank := @rank + 1 as rank
    FROM high_scores
    JOIN (
        SELECT user_id as user_id2, MAX(score) AS max_score         
        FROM high_scores
        GROUP BY user_id2
        ORDER BY max_score DESC) AS max_score_table                
    ON max_score = high_scores.score AND high_scores.user_id = user_id2) derived_table
ORDER BY rank; 
```

同样，这给了我一个很好的有序列表，列出了每个玩家的最高分和排名；但是，我还希望能够提供一个特定`user_id`的结果并将结果过滤到该用户的分数以及 X 数量的周围更高和更低的分数。

我认为我需要`SELECT ... WHERE`对“derived_table”执行一个`user id`并使用返回的行`'rank'`来过滤顶级`SELECT`语句，但除了查询甚至不被接受（'derived_table 不存在'），我这样做的方式需要我重新查询derived_table 两次（用于大于和小于测试），从而使查询效率甚至低于应有的效率。

如何过滤高分的完整列表并将排名下降到单个`user_id`条目和 X 数量的周围条目？对我试图提出的代码（或我目前拥有的代码）的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:43:27.433

```
SELECT ranks.rank, ranks.user_id, ranks.maxscore FROM (

  -- find the rank of each user by counting the number of
  -- users who have a score greater than that user's highest
  SELECT   currentuser.user_id,
           currentuser.maxscore,
           IFNULL(COUNT(DISTINCT high_scores.user_id),0) rank
  FROM     high_scores JOIN (
    -- current user's highest score
    SELECT user_id, MAX(score) maxscore FROM high_scores GROUP BY user_id
  ) currentuser ON high_scores.score > currentuser.maxscore
  GROUP BY currentuser.user_id

) ranks JOIN (

  -- find the rank of the user we want similarly
  SELECT IFNULL(COUNT(DISTINCT user_id),0) rank
  FROM   high_scores JOIN (
    -- our user's highest score
    SELECT MAX(score) maxscore FROM high_scores WHERE user_id = ?
  ) userscore ON high_scores.score > userscore.maxscore

-- filter for only those who are within given range from our user's rank
) userrank ON ranks.rank BETWEEN userrank.rank - ? AND userrank.rank + ?

-- sort the results
ORDER BY ranks.rank 
```

# c++ - ndk 使用 opencv 构建

> ID：12996903
> 
> 赞同：0
> 
> 时间：2012-10-21T10:09:53.937
> 
> 标签：c++, opencv, android-ndk

我正在构建一个使用 opencv 库的 cpp 文件。我包括 cv.h 和我的 Application.mk 得到

```
LOCAL_LDLIBS := "C:\OpenCV2.1\lib\cxcore210.lib" "C:\OpenCV2.1\lib\highgui210.lib" "C:\OpenCV2.1\lib\cvaux210.lib"  "C:\taucs_full\lib\win32\libtaucs.lib" 
```

但我不能调用任何函数，例如 cvSaveImage。我查看了 opencv 目录并尝试找到实现这些功能但找不到的 cpp 文件。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:40:49.993

您`LOCAL_LDLIBS`列出了 OpenCV 库的 Windows 版本（*我怎么知道？*因为它们有`.lib`扩展名）。要构建您的 Android 原生库，您应该首先使用 NDK 及其 gcc 工具链构建适用于 Android 的 OpenCV。这将产生文件，如`libcxcore210.a`，等等。您将这些文件添加到`LOCAL_LDLIBS`（注意**lib**和**.a**被隐藏）：

```
LOCAL_LDLIBS += -Lc:/opencv2.1/libandroid -lcxcore210 -lhighgui210 -lcvaux210 
```

还要注意，这个定义应该放在`Android.mk`文件中，而不是`Application.mk`！

# python - 如何从 django 模板中删除所有 html 标签？

> ID：12996904
> 
> 赞同：4
> 
> 时间：2012-10-21T10:09:53.453
> 
> 标签：python, django, google-app-engine, django-templates

我想使用 django 模板进行电子邮件发送。但我应该有两个版本的电子邮件 - html 和纯文本。第一个版本生成如下：

```
template_values = {
     'company_id': company.id
     }
template_file = os.path.join(os.path.dirname(__file__), 'templates/email.html')
html = template.render(template_file, template_values) 
```

现在我应该从同一个文件生成纯文本 - `templates/email.html`，但它包含`<div style="font-size:13px; margin: 14px; position:relative">`我应该删除的 html 标签（如 ）（链接应该保留，但应该用纯文本替换，例如，`<a href="http://example.com">Example</a>`应该用类似的东西替换`Example (http://example.com)`）。

我读过我不应该为此使用正则表达式。什么样的内置 GAE 库可以帮助我？或者有什么方法可以使用 django 的[striptags](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#striptags)吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T10:24:39.123

获得 HTML 后，您需要执行以下操作：

```
from django.utils.html import strip_tags

template_values = {
     'company_id': company.id
}
template_file = os.path.join(os.path.dirname(__file__), 'templates/email.html')
html = template.render(template_file, template_values)

plain_text = strip_tags(html) 
```

# sql-server - 通过不查看定义授予用户对扩展属性的访问权限

> ID：12996905
> 
> 赞同：0
> 
> 时间：2012-10-21T10:10:00.013
> 
> 标签：sql-server

在注意到似乎没有人对此有答案之后，我想出了一个适合我的解决方案。所以这是一个答案，而不是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:10:00.013

通常，要让用户访问扩展属性，您必须这样做：

```
GRANT VIEW DEFINITION ON DATABASE::XDB TO AUSER
GRANT SELECT on sys.extended_properties to AUSER 
```

但这意味着用户也可以看到所有源代码 SP 的功能等。我们不希望这样！现在，抛开其他问题不谈，我想做的是允许用户（AUSER）查看一些扩展属性，但不让他们能够查看源代码。

创建一个可以执行此操作的非登录用户：

```
CREATE USER EXTPROP WITHOUT LOGIN
GRANT VIEW DEFINITION ON DATABASE::XDB TO EXTPROP;
GRANT SELECT on sys.extended_properties to EXTPROP
-- use master
-- go
-- GRANT IMPERSONATE on LOGIN::EXTPROP TO AUSER 
```

现在创建一个 AUSER 可以执行的函数。

```
CREATE PROCEDURE ShowVersion
WITH EXECUTE AS 'EXTPROP'
AS
select * from sys.extended_properties
where class_desc = 'DATABASE' and name = 'version'

GRANT EXECUTE ON ShowVersion to AUSER 
```

要进行测试，请以 AUSER 身份登录 SSMS 并执行以下命令：

```
exec showversion -- returns result
select suser_sname() -- returns AUSER (no need to REVERT)
select * from sys.extended_properties  
where class_desc = 'DATABASE' and name = 'version' -- returns no rows 
```

# ruby-on-rails - Rails - Geocoder Gem：geocoded_by 与 2 个表

> ID：12996909
> 
> 赞同：2
> 
> 时间：2012-10-21T10:10:13.367
> 
> 标签：ruby-on-rails, rails-geocoder

我习惯于按照在[http://railscasts.com/episodes/273-geocoder](http://railscasts.com/episodes/273-geocoder)中看到的方式使用地理编码器 gem ，但是我的模型变得比给定的示例更复杂一些。

现在，我想使用 2 个模型：
-“City”，具有“name”属性
和
-“Location”，具有“latitude”、“longitude”和“city_id”属性

这样，位置将具有默认值纬度和经度值，然后我们可以精确它们。

问题是，在 Location 模型中，如何通过 City 模型中的名称指定位置是 geocoded_by ？

我正在寻找一些简单的东西，比如：

```
geocoded_by :city, :name 
```

或者

```
geocoded_by self.city.name 
```

感谢您的帮助。

编辑：以下是当前型号：

```
class Location< ActiveRecord::Base
  attr_accessible :city_id, :latitude, :longitude
  belongs_to :city
  geocoded_by ??? (how to specify the city.name value ?)
  after_validation :geocode  
end

class City < ActiveRecord::Base
  attr_accessible :name
  has_many :locations
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T15:49:28.533

不确定它是否有效，但您可以尝试：

```
geocoded_by lambda{ |obj| obj.city.name } 
```

或者，如果上述方法不起作用：

```
geocoded_by :city_name

def city_name
  self.city.name
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:17:15.063

您需要`has_many`在两个模型之间建立关联。

本指南向您展示如何： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# python - 如何以编程方式设置和启动 Scrapy 蜘蛛（网址和设置）

> ID：12996910
> 
> 赞同：25
> 
> 时间：2012-10-21T10:10:19.420
> 
> 标签：python, scrapy, scrapyd

我已经使用scrapy编写了一个工作爬虫，
现在我想通过一个Django webapp来控制它，也就是说：

*   设置 1 个或多个`start_urls`
*   设置 1 个或多个`allowed_domains`
*   设定`settings`值
*   启动蜘蛛
*   停止/暂停/恢复蜘蛛
*   在运行时检索一些统计信息
*   蜘蛛完成后检索一些统计信息。

一开始我以为[scrapyd](https://scrapy.readthedocs.org/en/latest/topics/scrapyd.html)就是为此而生的，但是在阅读了文档之后，它似乎更像是一个能够管理“打包蜘蛛”的守护进程，也就是“scrapy Eggs”；并且所有设置（`start_urls`, `allowed_domains`, `settings`）仍然必须在“scrapy egg”本身中进行硬编码；所以它看起来不像是我的问题的解决方案，除非我错过了什么。

我也看了这个问题：[How to give URL to scrapy for crawling?](https://stackoverflow.com/questions/9681114/how-to-give-url-to-scrapy-for-crawling/12749782#12749782) ; 但是提供多个 url 的最佳答案被作者 himeslf 限定为“丑陋的 hack”，涉及一些 python 子进程和复杂的 shell 处理，所以我认为在这里找不到解决方案。此外，它可能适用于`start_urls`，但似乎不允许`allowed_domains`或`settings`。

然后我看了一下[scrapy webservices](https://scrapy.readthedocs.org/en/latest/topics/webservice.html?highlight=webservices#topics-webservice-crawler)：这似乎是检索统计数据的好方法。但是，它仍然需要一个正在运行的蜘蛛，并且没有任何改变的线索`settings`

关于这个主题有几个问题，似乎没有一个令人满意：

*   [using-one-scrapy-spider-for-several-websites](https://stackoverflow.com/questions/2396529/using-one-scrapy-spider-for-several-websites) 这个似乎已经过时了，因为从 0.7 开始，scrapy 已经发展了很多
*   [created-a-generic-scrapy-spider](https://stackoverflow.com/questions/9814827/creating-a-generic-scrapy-spider) 没有接受的答案，仍在谈论调整 shell 参数。

我知道scrapy用于生产环境；并且像scrapyd这样的工具表明确实有一些方法可以处理这些要求（我无法想象scrapyd正在处理的scrapy鸡蛋是手工生成的！）

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-15T03:47:20.217

> 一开始我以为scrapyd就是为此而生的，但是在阅读了文档之后，它似乎更像是一个能够管理“打包蜘蛛”的守护进程，也就是“scrapy Eggs”；并且所有设置（start_urls、allowed_domains、settings）仍然必须在“scrapy egg”本身中硬编码；所以它看起来不像是我的问题的解决方案，除非我错过了什么。

我不同意上面的说法，start_urls 不需要硬编码，它们可以动态传递给类，你应该可以像这样将它作为参数传递

```
http://localhost:6800/schedule.json -d project=myproject -d spider=somespider -d setting=DOWNLOAD_DELAY=2 -d arg1=val1 
```

或者您应该能够从数据库或文件中检索 URL。我从这样的数据库中得到它

```
class WikipediaSpider(BaseSpider):
    name = 'wikipedia'
    allowed_domains = ['wikipedia.com']
    start_urls = []

    def __init__(self, name=None, url=None, **kwargs):
        item = MovieItem()
        item['spider'] = self.name
        # You can pass a specific url to retrieve 
        if url:
            if name is not None:
                self.name = name
            elif not getattr(self, 'name', None):
                raise ValueError("%s must have a name" % type(self).__name__)
            self.__dict__.update(kwargs)
            self.start_urls = [url]
        else:
            # If there is no specific URL get it from Database
            wikiliks = # < -- CODE TO RETRIEVE THE LINKS FROM DB -->
            if wikiliks == None:
                print "**************************************"
                print "No Links to Query"
                print "**************************************"
                return None

            for link in wikiliks:
                # SOME PROCESSING ON THE LINK GOES HERE
                self.start_urls.append(urllib.unquote_plus(link[0]))

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        # Remaining parse code goes here 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-04T21:22:38.080

为了以编程方式更改设置并从应用程序中运行刮板，这就是我得到的：

```
from scrapy.crawler import CrawlerProcess
from myproject.spiders import MySpider
from scrapy.utils.project import get_project_settings

os.environ['SCRAPY_SETTINGS_MODULE'] = 'myproject.my_settings_module'
scrapy_settings = get_project_settings()
scrapy_settings.set('CUSTOM_PARAM', custom_vaule)
scrapy_settings.set('ITEM_PIPELINES', {})  # don't write jsons or anything like that
scrapy_settings.set('DOWNLOADER_MIDDLEWARES', {
   'myproject.middlewares.SomeMiddleware': 100,
})
process = CrawlerProcess(scrapy_settings)
process.crawl(MySpider, start_urls=start_urls)
process.start() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-23T23:25:13.250

这其实很简单！

```
from mypackage.spiders import MySpider
from scrapy.crawler import CrawlerProcess

results = []

class MyPipeline(object):
    """ A custom pipeline that stores scrape results in 'results'"""
    def process_item(self, item, spider):
        results.append(dict(item))

process = CrawlerProcess({
    # An example of a custom setting
    'USER_AGENT': 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)',  
    'ITEM_PIPELINES': {'__main__.MyPipeline': 1},   # Hooking in our custom pipline above
})

start_urls=[
    'http://example.com/page1', 
    'http://example.com/page2',
]
process.crawl(MySpider, start_urls=start_urls)
process.start() # the script will block here until the crawling is finished

# Do something with the results
print results 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:17:11.020

我认为你需要看看这个

[http://django-dynamic-scraper.readthedocs.org/en/latest/](http://django-dynamic-scraper.readthedocs.org/en/latest/)

这有点类似于你想要的。它还使用了任务调度的芹菜。您可以查看代码以了解他在做什么。我认为如果你修改他的代码来做你想做的事情会很容易

它还有关于如何使用 django 设置界面的好文档

# ssis - SSIS 2012控制流在并行执行期间数据流任务后暂停

> ID：12996911
> 
> 赞同：2
> 
> 时间：2012-10-21T10:10:23.063
> 
> 标签：ssis, parallel-processing, freeze

我有一个 ETL，用于以完全刷新模式/截断加载加载几个表。有一些元数据可以跟踪哪些表已加载，哪些表已挂起。下图更能说明问题。。 ![在此处输入图像描述](../Images/7a3526a59346990d8c9dd793df3dee8d.png)

问题是，尽管表被设计为并行加载，但更新元数据步骤等待其他数据流任务完成（在其他并行执行线程中）。一旦所有数据流完成，更新步骤就会一次性执行。我不确定幕后发生了什么，以及为什么在数据流任务之后没有立即执行这些步骤。如有线索请回复...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:25:45.587

这已经在这里解释了 - [http://blogs.msdn.com/b/sqlperf/archive/2007/05/11/implement-parallel-execution-in-ssis.aspx](http://blogs.msdn.com/b/sqlperf/archive/2007/05/11/implement-parallel-execution-in-ssis.aspx)

# android - 安卓增强现实

> ID：12996914
> 
> 赞同：3
> 
> 时间：2012-10-21T10:11:29.517
> 
> 标签：android

我正在开发我的第一个 Android 增强现实应用程序。`ARActivity`如果作为文件中的第一个类 ( `android.intent.category.LAUNCHER`)运行，则应用程序运行良好`manifest`。但是，当我添加一个启动画面时，这意味着`ARActivity`将是第二个`run(android.intent.category.DEFAULT)`，相机似乎没有检测到标记。我相信问题都在`manifest`文件中。

这是 manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ar.armarkers"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Splash"
            android:screenOrientation="landscape"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.ar.armarkers.MainActivity"
            android:clearTaskOnLaunch="true"
            android:label="@string/title_activity_main"
            android:noHistory="true"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="com.ar.armarkers.MAINACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

MainActivity.java

```
import edu.dhbw.andar.ARObject;
import edu.dhbw.andar.ARToolkit;
import edu.dhbw.andar.AndARActivity;
import edu.dhbw.andar.exceptions.AndARException;

import edu.dhbw.andar.pub.CustomRenderer;
import android.os.Bundle;

import android.util.Log;

public class MainActivity extends AndARActivity {

    private ARObject someObject;
    private ARToolkit artoolkit;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        CustomRenderer renderer = new CustomRenderer();
        setNonARRenderer(renderer);

        try {
            artoolkit = getArtoolkit();

            someObject = new CustomObject1("test", "marker16.pat", 80.0,
                    new double[] { 0, 0 });
            artoolkit.registerARObject(someObject);

            someObject = new CustomObject2
                    ("test", "marker17.patt", 80.0, new
                    double[]{0,0});
                    artoolkit.registerARObject(someObject);

        } catch (AndARException ex) {
            System.out.println("");
        }
        startPreview();
    }

    public void uncaughtException(Thread thread, Throwable ex) {
        // TODO Auto-generated method stub

        Log.e("AndAR EXCEPTION", ex.getMessage());
        finish();
    }

} 
```

飞溅.java

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;

public class Splash extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        Thread timer = new Thread() {
            public void run() {
                try {
                    sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    Intent i = new Intent(getApplicationContext(),
                            MainActivity.class);
                    startActivity(i);
                }
            }
        };
        timer.start();
    }

} 
```

# php - 连接到 ACCESS 2007 (ODBC) 时如何在 PHP 上设置 UTF8

> ID：12996926
> 
> 赞同：2
> 
> 时间：2012-10-21T10:14:02.130
> 
> 标签：php, utf-8, character-encoding, odbc, ms-access-2007

我在 Access 文件中有泰语、日本、韩国字符（3 个字段）。

我在 PHP 中创建了一个脚本来连接到这个文件

但显示的字符显示？？？？？？？？？？？？和 ？？？？？？

设置什么来显示正常字符

这是我的脚本

```
<html>
<head>
<title>TEST</title>
</head>
<body>
<?
$objConnect = odbc_connect("test","","") or die("Error Connect to Database");
$strSQL = "SELECT * FROM table1";
$objExec = odbc_exec($objConnect, $strSQL) or die ("Error Execute [".$strSQL."]");
?>
<table width="600" border="1">
  <tr>
    <th width="20"> <div align="center">ID </div></th>
    <th width="30"> <div align="center">Thai </div></th>
    <th width="30"> <div align="center">Korea </div></th>
     <th width="30"> <div align="center">Japan </div></th>

  </tr>
<?
while($objResult = odbc_fetch_array($objExec))
{
?>
  <tr>
    <td><?=$objResult["ID"];?></div></td>
    <td><?=$objResult["Thai"];?></td>
    <td><?=$objResult["Korea"];?></td>
    <td><?=$objResult["Japan"];?></div></td>
  </tr>
<?
}
?>
</table>
<?
odbc_close($objConnect);
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:21:59.377

```
 <?
  header('Content-Type: text/html;charset=utf-8');
 ?>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>TEST</title>
</head>
<title>TEST</title>

<body>

<?
$objConnect = odbc_connect("test","","") or die("Error Connect to Database");
odbc_exec($objConnect, "SET NAMES 'UTF8'");
odbc_exec($objConnect, "SET client_encoding='UTF-8'");

... 
```

或尝试排队：

```
<td><?=mb_convert_encoding($objResult["Japan"], "SJIS");?></td> 
```

# php - 如何根据当前被调用的控制器合并 Yii 菜单项（可能使用 CMap）？

> ID：12996927
> 
> 赞同：0
> 
> 时间：2012-10-21T10:14:07.767
> 
> 标签：php, multidimensional-array, yii, array-merge

我有一个这样的主菜单：

```
$main= array(
   array('label'=>'Main Menu'),
   array('label'=>'Posts', 'icon'=>'list', 'url'=>array('post/index') ),
    '--',   
   array('label'=>'Comments', 'icon'=>'comment', 'url'=>array('comment/index')),
  ); 
```

在帖子控制器中，我在帖子中构建一个子菜单，例如

```
 $submenu= array(
    array('label'=>'All Posts', 'icon'=>'list-alt', 'url'=>array("post/index")),
    array('label'=>'Create Post', 'icon'=>'plus', 'url'=>array("post/create")),
        ); 
```

我具有合并两者的功能

$main 数组中的 url`'url'=>array('post/index')`

例如

```
 list($controller,$action)=explode('/',current($link['url']));

   if($controller==$this->owner->getId()){
    $append_to=$menu_id;
    break;
    } 
```

输出：

```
$main= array(
   array('label'=>'Main Menu'),
   array('label'=>'Posts', 'icon'=>'list', 'url'=>array('post/index'), 
     'items'=>array(
         array('label'=>'All Posts', 'icon'=>'list-alt', 'url'=>array("post/index")),
         array('label'=>'Create Post', 'icon'=>'plus', 'url'=>array("post/create")),
       );
     ),
    '--',   
   array('label'=>'Comments', 'icon'=>'comment', 'url'=>array('comment/index')),
  ); 
```

所以想法是在运行时在主菜单项之外插入子菜单。$menu 是全局的，而 $submenu 是在控制器中定义的。

我不确定这是否是最好的方法。

有没有更好的方法或者 Yii 提供了一些内置类来有条件地进行这种合并数组？

我检查了 CMap 类，但没有提供任何此类功能。

你有什么建议来改进这段代码？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:39:10.140

我相信它，因为没有命名键，它不是关联数组而是普通数组，所以**任何**数组合并只会追加新项目。

# java - Java - 比较线性搜索和二分搜索的性能

> ID：12996928
> 
> 赞同：1
> 
> 时间：2012-10-21T10:14:08.937
> 
> 标签：java, arrays, binary-search

> **可能重复：**
> [线性搜索和二分搜索有什么区别？](https://stackoverflow.com/questions/700241/what-is-the-difference-between-linear-search-and-binary-search)

> 编写一个程序，在 0 到 100 的范围内生成 20 个随机整数。按降序对数组进行排序。然后，接受来自用户的整数输入。然后，使用这个数字搜索数组。比较线性搜索和二分搜索的性能。

这是我的代码

```
import java.util.Arrays;    
import java.util.Scanner;

public class search {

    public static void main(String args[]) {
        int[] num = new int[20];
        for (int i = 0; i < num.length; i++) {

            num[i] = (int) (Math.random() * 101);
        }
        System.out.println("A list of 20 random intergers with 0 - 100");
        System.out.println(Arrays.toString(num));
        for (int j = 1; j < num.length; j++) {
            for (int k = 0; k < num.length - 1; k++) {
                if (num[k] < num[k + 1]) {
                    int hold = num[k + 1];
                    num[k + 1] = num[k];
                    num[k] = hold;
                }
            }

        }
        System.out.println("Array in descending order");
        System.out.println(Arrays.toString(num));
        Scanner input = new Scanner(System.in);
        System.out.print("Enter a number to search: ");
        int num2 = input.nextInt();
        int loop = 0;
        for ( int cnt = 0; cnt < num.length; cnt++ )
        {
            if ( num[cnt] == num2 )
            {
                loop = cnt;
                System.out.println(num2+ " found"); 
          }

        }
        System.out.println("Linear search - "+loop+ " loop(s)");
        int loop2 = 0;
        int low = 0;   // low element subscript
        int high = num.length - 1;  // high element subscript
        int middle;    // middle element subscript
        while ( low <= high ) {
            middle = ( low + high ) / 2;
            if ( num2 == num[ middle ] ) { 

            }
            else if ( num2 > num[ middle ] )
            {
              low = middle +1;
               loop2++;
            }
            else{
              high = middle - 1;   
               loop2++;
            }                      
      }
        System.out.println("Binary search - "+loop2+ " loop(s)");
    }
} 
```

我可以获得线性搜索的循环数。但是，我无法获得二进制搜索循环数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:44:15.903

您的二进制搜索缺少一个中断：

```
 if ( num2 == num[ middle ] ) { 

        } 
```

此外，您的二进制搜索是升序，但实际上您有降序！反转排序或调整搜索算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:18:01.487

我建议使用比较计数代替循环计数，因为它更多地反映了算法的成本。您可以轻松计算比较。但在这种特殊情况下，两者恰好是等价的。

```
int comparisons = 0;
while ( low <= high ) {
   middle = ( low + high ) / 2;
   ++comparisons;
   if ( num2 > num[ middle ] ) {
      low = middle +1;
   }
   else if ( num2 < num[ middle ] ) {
      high = middle - 1;   
   }
   else {
      break;
   }               
}
System.out.println( "Binary search - " + comprisons + " loop(s)"); 
```

# firefox - CSS3过滤器属性的Firefox模糊效果中的条带伪影

> ID：12996929
> 
> 赞同：1
> 
> 时间：2012-10-21T10:14:14.577
> 
> 标签：firefox, svg, blur, svg-filters

我正在使用 CSS3 过滤器属性并尝试在 Chrome 和 Firefox 中获得类似的结果，尽管每个浏览器的语法和实现都不同。

在 Chrome 中，我使用以下 CSS 对图像应用模糊效果：

```
#chrome-blur {
    -webkit-filter: blur(10px);
} 
```

在 Firefox 中，我使用以下 CSS 来应用模糊效果，它在页面正文中引用了 SVG 过滤器。

```
#firefox-blur {
    filter: url(#blur);
} 
```

这一切都很好，但是 Firefox 版本在模糊图像中显示条带。我想知道我的 SVG 过滤器是否需要工作，或者 Firefox 中的算法是否存在问题？

[http://codepen.io/vcurd/pen/pDwqr](http://codepen.io/vcurd/pen/pDwqr)的完整示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:45:37.470

在 MacOS 上，这看起来很棒并且没有条纹，所以这似乎只发生在 Windows 上（至少是 Vista）。Firefox 在 Windows 上的渐变实现同样糟糕 - 所以我怀疑这是由于他们使用的任何原生图形调用。您可以通过使用 filterRes 调低过滤器分辨率来消除特定图像中最糟糕的条带，该过滤器具有在模糊图像之前对图像进行下采样的效果。

```
<filter id="blur" filterRes="60"> 
```

似乎是一个不错的结果。缺点是现在在 MacOS 上看起来像素化了。

我已经尝试过添加噪点、置换贴图，甚至将多个不同的模糊合成在一起，以及颜色插值过滤器和图像渲染等 CSS 设置，但除了将其戳到下采样之外，没有任何方法可以修复它。

# java - 以良好的性能处理非常大的文件

> ID：12996935
> 
> 赞同：3
> 
> 时间：2012-10-21T10:15:10.380
> 
> 标签：java, database, file-io, large-files

如果我在一个文件中有 100 万行，我不能直接跳转到第 50000 行而不逐行迭代（这是顺序访问）。这是我在谷歌做一些研究后的理解。

如果是这种情况，数据库有 1TB 的数据如何在几秒钟内搜索一行。在一天结束时，数据库还存储在一些带有自己的元数据的格式化文件中。

有可能在100万行记录的文件中实现如此快速的字符串搜索吗？什么样的实现可以帮助我们处理如此大规模的数据......

注意 每行的长度可能从 10 到 100 不等。

在Java中可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T10:18:00.657

您需要维护行所在位置的索引。我有一个执行此[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle)的库。一旦这些行被索引（它在你编写它们时构建），你可以在短短 100 ns 内随机访问它们。

它旨在处理同一文件中的 TB 数据，或相对少量的文件。如果您有数千个文件，则需要使用不同的方法，因为每个文件的开销会变得很大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T10:29:09.773

1- 只读取一次所有行
2- 将 lineNumber(as Key) 和 startingPostionOfLine 放入 Map 对象。

然后，

你可以得到startingPostionOfLine=map.get(lineNumber)。
找到startingPosition后，用RandomAccessFile.seek(startingPosition)方法跳转。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T11:11:12.807

您可以调整文件结构以进行二进制搜索。每行以唯一标记（行本身未使用的字节序列）开头，后跟行号。寻找一条线，

1.  跳到随机位置；
2.  向前阅读直到标记；
3.  读取行号；
4.  如果它是您正在寻找的那个，那么您就完成了；否则选择另一个随机位置跳转（大于或小于当前位置，取决于您找到的行号）。

你对你的线条的假设越多，跳跃的随机性就越小。例如，您可以根据平均线长估计位置。您还可以缓存一些行位置以改进猜测。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T10:17:31.657

> 如果不逐行迭代，我无法直接跳转到第 50000 行

看看[随机访问文件](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/RandomAccessFile.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T10:18:05.467

如果您知道每行的长度，那么您可以使用[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)，然后[skipBytes](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#skipBytes%28int%29)到您想要的行。

# linux - 来自 gcc 的“无法在标准输出上打开 bfd”错误

> ID：12996936
> 
> 赞同：0
> 
> 时间：2012-10-21T10:15:51.517
> 
> 标签：linux, gcc

我试图通过管道从 gcc 获取输出，但它抛出了上面的错误。命令行是`gcc -pipe -c -o - -xc -`. 代码通过 STDIN 输入。显然，BFD 库需要一个可搜索的描述符。有没有办法解决这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:19:59.737

Object files contain a lot of cross-references to binary offsets in various headers, and since the compiler doesn't know how large the various sections in the object file will be until it's finished writing them out, it follows that it has to go back and fill in these references after it's done writing the actual machine code. As such, most compilers will require that the object file be seekable - otherwise they would need to keep the entire file buffered in memory until they're done compiling everything!

The workaround is simply to compile to a temporary file, then `cat` this file into the rest of whatever pipeline you're trying to use this in.

# sql-server - 如何从 mssql 中的 sp_spaceused 查询中获取选定的字段

> ID：12996938
> 
> 赞同：9
> 
> 时间：2012-10-21T10:16:05.813
> 
> 标签：sql-server

对于我的查询

> exec sp_spaceused 'tablbename'

它返回

姓名 | 行 | 保留 | 数据 | 索引大小 | 没用过

但是，我只需要**保留**字段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T10:23:50.047

试试这个，但我希望有更好的方法

```
DECLARE @spaceUsed TABLE (
    name varchar(255), 
    rows int, 
    reserved varchar(50), 
    data varchar(50), 
    index_size varchar(50), 
    unused varchar(50))

INSERT INTO @spaceUsed
exec sp_spaceused 'YOUR_TABLE'

SELECT reserved FROM @spaceUsed 
```

# vb.net - 使用gridview使用参数将数据提交到mysql数据库，但带有额外的sql语句“重复键更新”

> ID：12996941
> 
> 赞同：0
> 
> 时间：2012-10-21T10:16:20.737
> 
> 标签：vb.net

我无法构建代码，使我能够使用重复键更新 sql 语句将 gridview 数据插入 mysql 数据库。

网格视图只是一个普通的网格视图，它连接到浏览和上传按钮。这使我能够将 excel 电子表格上传到我的网格视图——它不是数据绑定的。

我已经在 VB 中完成了这项工作，但我发现在 vb.net 中编写它是一项艰巨的任务。这是VB中的代码。

```
Dim connectionString As String = "Server=*****;Database=****;Uid=****;Pwd=r*****;allow user variables=true"
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) _
       Handles Button2.Click

    Dim i As Integer = 0
    Dim student id,name,age,adress dbSQL_query As String
    Dim dbSQL_cmd As New SqlClient.SqlCommand
    Dim dbSQL_con As New SqlClient.SqlConnection

    Using SQLConnection As New MySqlConnection(connectionString)

        SQLConnection.Open()

        For i = 0 To DataGridView1.RowCount - 1
            Using sqlCommand As New MySqlCommand()
                student id = DataGridView1.Item(0, i).Value.ToString
                name = DataGridView1.Item(1, i).Value.ToString
                age = DataGridView1.Item(2, i).Value.ToString
               adress = DataGridView1.Item(3, i).Value.ToString.ToLower
                dbSQL_query = "INSERT INTO student)  VALUES  (" + addQoute(student_id) + ", " + _
                      addQoute(name) + ", " + _
                      addQoute(age) + ", " + _
                      addQoute(adress) + ", " + _

                      addQoute(status) + ") on duplicate key update name=(" + addQoute(name) + "),age=(" + addQoute(age) + "),adress=(" + addQoute(adress) + ")"
                With sqlCommand

                    .CommandText = dbSQL_query
                    .Connection = SQLConnection
                    .CommandType = CommandType.Text

                End With
                sqlCommand.ExecuteNonQuery()
                dbSQL_cmd = New SqlClient.SqlCommand(dbSQL_query, dbSQL_con)

            End Using

        Next

        'MessageBox.Show(DataGridView1.RowCount & " student details has been inserted")
        SQLConnection.Close()
    End Using

End Sub

Public Function addQoute(ByVal str As String) As String
    str = Trim(str)
    Return "'" + str + "'"
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:20:46.940

我已更改您的代码以使用 MySql 对象并为您的每个值添加 MySqlParameter（未找到字段状态除外）。

```
Dim i As Integer = 0 
Dim student_id,name,age,adress, dbSQL_query As String 
Dim dbSQL_cmd As MySqlCommand 
Dim dbSQL_con As MySqlConnection 

Using dbSQL_con As New MySqlConnection(connectionString) 
    dbSQL_con.Open() 

    For i = 0 To DataGridView1.RowCount - 1 
        Using dbSQL_cmd As New MySqlCommand() 
            student_id = DataGridView1.Item(i, 0).Value.ToString 
            name = DataGridView1.Item(i, 1).Value.ToString 
            age = DataGridView1.Item(i, 2).Value.ToString 
            adress = DataGridView1.Item(i, 3).Value.ToString.ToLower 
            dbSQL_query = "INSERT INTO student  VALUES  (?id, ?name, ?age, ?adress) " + 
                   " on duplicate key update name=(name=?name, age=?age, adress=?adress)"
            With dbSQL_cmd
                .Parameters.AddWithValue("?id", student_id)
                .Parameters.AddWithValue("?name", name)
                .Parameters.AddWithValue("?age", age)
                .Parameters.AddWithValue("?adress", adress)
                ' .Parameters.AddWithValue("?status", ?????)
                .CommandText = dbSQL_query 
                .Connection = dbSQL_con 
                .CommandType = CommandType.Text 
            End With 
            dbSQL_cmd.ExecuteNonQuery() 
        End Using 
    Next 
    'MessageBox.Show(DataGridView1.RowCount & " student details has been inserted") 
End Using 
```

请不要使用字符串来创建 sql 命令，始终使用参数。
这很重要，因为您的代码可用于创建[Sql Injection Attacks](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)，此外，您不需要创建特殊函数来解析像 AddQuote 这样的 sql 分隔符的字符串。

最后，Using语句对SqlCommand、SqlConnection等实现IDisposable接口的对象进行dispose，在dispose过程中MySqlConnection会自动关闭。

# iphone - 用于从 iPhone 访问 GitHub API 的 GitHub Objective-C SDK

> ID：12996943
> 
> 赞同：1
> 
> 时间：2012-10-21T10:16:27.747
> 
> 标签：iphone, objective-c, api, sdk, github

我试图从 iPhone 中找到一些已经存在的 Objective-C 库/SDK 来与 GitHub 存储库（浏览/发布问题等）进行通信。我很惊讶我没有找到任何东西。

是否有任何不错的 Objective-C 框架/工具包（例如 facebook-ios-sdk）或者我必须自己从头开始开发所有东西（连同 OAuth 自动化等......）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:21:00.110

你可以试试**[cocoapods](http://cocoapods.org/)** 。它对我很有用

您可以使用它来搜索和安装库

它使您的项目干净

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:38:04.827

您不需要使用 OAuth 客户端，只需存储服务提供给您的访问令牌即可。

Github API 实际上有一个包装器：[https](https://github.com/owainhunt/UAGithubEngine) ://github.com/owainhunt/UAGithubEngine 。

确保在发布之前四处搜索。

# javascript - 我可以为我的网站访问者启用 JavaScript 吗？

> ID：12996948
> 
> 赞同：0
> 
> 时间：2012-10-21T10:17:04.423
> 
> 标签：javascript, html, browser

有没有办法告诉浏览器通过 HTML 或 HTML5 启用 JavaScript？就像萤火虫一样： ![在此处输入图像描述](../Images/66c1a132e61f16a6b5b65d03e65ff027.png) 当您单击启用 JavaScript 并刷新链接时，JavaScript 已启用并刷新页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:19:05.107

不，没有办法，想想这种“功能”造成的安全问题。

Firebug 是浏览器的一部分，而不是内容。

# ruby-on-rails-3 - Rails 路由和身份验证？

> ID：12996951
> 
> 赞同：1
> 
> 时间：2012-10-21T10:17:22.967
> 
> 标签：ruby-on-rails-3, authentication, controller, routes

我正在做一个简单的Intranet应用程序，虽然有一些用户，但一般人员不需要登录。他们应该能够从任何计算机访问 Intranet 并在不登录的情况下访问他们需要的内容。

我们的一些用户是远程的，他们应该能够以相同的方式进行交互。

我想要实现的是以下内容；无需登录即可直接进入根 URL 的 IP 和子网列表（管理员仍然可以登录）。任何不在白名单 IP 和子网列表中的访问者都应该看到静态访问被拒绝页面。在该页面上应该是一个登录链接。一旦登录，他们就可以与 Intranet 交互，就像他们在我们的白名单子网中一样。一旦他们注销，他们就会再次看到拒绝访问页面。

我的应用程序控制器中有以下代码：

```
class ApplicationController < ActionController::Base
  before_filter :protect
  protect_from_forgery
  private  

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
    rescue ActiveRecord::RecordNotFound
  end

  helper_method :current_user

  def authorized?
    not current_user.nil?
  end

  def authorize
    redirect_to login_url, alert: "Not authorized" unless authorized?
  end

  def authorize_admin
    redirect_to login_url, alert: "Not authorized" unless authorized? && current_user.admin?
  end

  def protect
    @ips = ['127.0.0.1','123.123.123.12','192.168.5.0/24']
    allowed = false
      bremote_ip = 0
      request.remote_ip.split('.').each { |x| bremote_ip = (bremote_ip << 8) + x.to_i }
      @ips.each do |ipstring|
        ip, mask = ipstring.split '/'
        mask = mask ? mask.to_i : 32
        bip = 0
        ip.split('.').each { |x| bip = (bip << 8) + x.to_i }
        bmask = ((1 << mask) - 1) << (32 - mask)
        if bip & bmask == bremote_ip & bmask
          allowed = true
          break
        end
    end

    if not allowed
       render :template => "static/protect", :layout => "static"
       return
    end
  end

end 
```

任何有关如何实现这一目标的指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:43:44.450

来自：[Rails 3 - 通过路由将 IP 列入白名单](https://stackoverflow.com/questions/5553874/rails-3-whitelisting-list-of-ips-via-routes)

使用`netaddr`宝石：

```
before_filter :protect

def protect
      @ips = []
      @ips << NetAddr::CIDR.create('127.0.0.0/8')
      @ips << NetAddr::CIDR.create('192.168.5.0/24')
      @ips << NetAddr::CIDR.create('123.123.123.12')
      valid = @ips.select {|cidr| cidr.contains?(request.remote_ip) }
      if valid.empty? and !authorized?
        authorize
        return
      end
end 
```

**编辑**

在这种情况下，上面的示例只是跳过了静态保护页面并将用户重定向到登录页面。我不明白中间静态页面的必要性？

注意：为避免“重定向过多”错误，您可以`:except`在`before_filter`语句中添加一个。或者，如果您使用的是 Devise，请将其添加到`config/application.rb`：

```
# In config/application.rb
module YourAppNameHere
  class Application < Rails::Application
  # Whatever else is already here...

    # The part to add
    config.to_prepare do
      Devise::SessionsController.skip_before_filter :protect
    end
  end
end 
```

# jquery - 单击删除父 div

> ID：12996961
> 
> 赞同：1
> 
> 时间：2012-10-21T10:18:22.873
> 
> 标签：jquery, html

我正在尝试在单击链接时删除 div。问题是相同的 div 和链接有多个结构，我尝试制作一个函数，但它删除了所有 div

```
$(document).on("click", ".fd-bxx-cls", function(e) {
  e.preventdefault;
  $(this).parents('.fd-box2').fadeOut(300);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="fd-box2">
  <div class="fd-box3">
    <a href="#" class="fd-bxx-cls"></a>
    <a class="fd-avtar-s" href="#"><img src="images/avatr_s.png" /></a>
    <div class="fd-nme-info">
      <span class="fd-mn-ttl">Robert Porter</span>
      <span class="fd-mncn-ttl">Pheonix, AZ</span>
    </div>
    <a href="#" class="ep-btns fd-msg-btn"></a>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T10:23:59.680

淡出祖父母应该工作。

```
$(this).parent().parent().fadeOut(300); 
```

另一种可能性是使用[`.closest()`](http://api.jQuery.com/closest/).

```
$(this).closest(".fd-box2").fadeOut(300); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:31:47.503

您应该使用[**最接近（）**](http://api.jquery.com/closest/)方法而不是[**parents()**](http://api.jquery.com/parents/)。请参阅文档中的差异。

此外，如果您想**删除**一个元素（而不仅仅是隐藏它），请使用[**remove()**](http://api.jquery.com/remove/)方法。

# java - Spring security 记住我的问题

> ID：12996971
> 
> 赞同：1
> 
> 时间：2012-10-21T10:20:29.093
> 
> 标签：java, spring

我在我的应用程序中使用弹簧安全。现在我试图让记住我的功能正常工作。这是我的spring-security.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:context="http://www.springframework.org/schema/context"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
             http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
             http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.1.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <context:component-scan base-package="core"/>

    <http auto-config="false" use-expressions="true">
        <intercept-url pattern="/views/**" access="permitAll"/>
        <form-login authentication-failure-handler-ref="loginFailure"
                    authentication-success-handler-ref="loginSuccess"/>
        <remember-me key="key"/>
        <logout
                invalidate-session="true"
                delete-cookies="true"/>

    </http>

    <authentication-manager>
        <authentication-provider>
            <password-encoder hash="md5"/>
            <jdbc-user-service data-source-ref="ds"
                               users-by-username-query="SELECT email, password, enabled FROM tuser WHERE email=?"
                               authorities-by-username-query="SELECT tuser, role_id FROM user_role WHERE tuser=?"/>
        </authentication-provider>
    </authentication-manager>

    <global-method-security pre-post-annotations="enabled" secured-annotations="enabled" />

</beans:beans> 
```

这是我的应用程序代码。jsp：

```
<form:form method="POST">

        <table>
            <tr>
                <td>User:</td>
                <td>
                    <input type="text" id="j_username"/>
                </td>
            </tr>
            <tr>
                <td>Password:</td>
                <td>
                    <input type="password" id="j_password"/>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="checkbox" id="_spring_security_remember_me"/>
                </td>
                <td>
                    <s:message code="RememberMe"/>
                </td>
            </tr>
            <tr>
                <td colspan='2'>
                    <input id="loginBtn" name="submit" type="button" onclick="ajaxLogin()" value="Войти"/>
                </td>
            </tr>
        </table>

    </form:form> 
```

和使ajax登录的javascript：

```
function ajaxLogin() {
    $("#errorText").css('display', 'none');
    $('#loginBtn').attr('disabled', 'true');

    var user_name = $("#j_username").val();
    var user_pass = $("#j_password").val();
    var rememberMe = $("#_spring_security_remember_me").prop("checked");

    $.ajax({
        url:"../../j_spring_security_check",
        data:{ j_username:user_name, j_password:user_pass, _spring_security_remember_me:rememberMe},
        type:"POST",
        beforeSend:function (xhr) {

            xhr.setRequestHeader("login-ajax", "true");
        },
        success:function (result) {

            if (result == "ok") {
                window.location.reload()
            } else {
                $("#errorText").css('display', 'block');
            }

        },
        error:function (XMLHttpRequest, textStatus, errorThrown) {
            return false;
        }
    })
    ;
} 
```

问题是即使我没有在登录表单中选中“记住我”选项，spring 也会记住用户。如果我从配置文件中删除，它不记得了。这个参数的存在是否让spring表现得像这样？如何控制记住我的功能？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:08:10.223

标签注销中的属性 delete-cookies="true"

```
<logout delete-cookies="true"/> 
```

不是布尔类型它是逗号分隔的 cookie 文件名列表

在标签中记住我

```
<remember-me/> 
```

存在属性 token-validity-seconds 确定您的令牌有效的秒数

例如

```
<remember-me key="key" token-validity-seconds="2419200" /> 
```

一个月的意思

也许当您第一次登录并在此注销后您的令牌不会被删除并且仍然存在，但是当您删除标签时

```
<remember-me/> 
```

它不起作用，一切都是正确的

# c# - 按参数对集合 linq 查询进行排序

> ID：12996972
> 
> 赞同：-2
> 
> 时间：2012-10-21T10:21:05.460
> 
> 标签：c#, linq

有一个 List，SomeObject 有属性 TargetObject。我需要创建一个列表，其中 SomeObjects 具有以下 TargetObject。

SO_1 (TO_1) | SO_2 (TO_2) | SO_3 (TO_3) | SO_4 (TO_1) | SO_5 (TO_1) | SO_6 (TO_1) | SO_7 (TO_1) | SO_8 (TO_2) | SO_9 (TO_2) | SO_10 (TO_4)

必须变成

SO_1 (TO_1) | SO_2 (TO_2) | SO_3 (TO_3) | SO_10 (TO_4) | SO_4 (TO_1) | SO_8 (TO_2) | SO_6 (TO_1) | SO_9 (TO_2) | SO_7 (TO_1) | SO_5 (TO_1)

最后，我想以 MaxDegreeOfParallelism = 5 运行 Parallel.ForEach(List)，因此 5 个项目的每个循环永远不会同时具有相同的 TargetObject。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:42:33.047

最简单的方法（至少是我能想到的最简单的方法）是首先按 TargetObject 对它们进行排序，然后按 TargetObject 对它们进行分组，并一次使用每个组的一个元素重新构建您的集合。

```
List<SomeObject> CustomSort( List<SomeObject> list)
{

  var ordered = list.OrderBy(x => x.TargetObject); // might not be necessary. Not sure if group by orders the group or not.
  var groups = ordered.GroupBy(x => x.x.TargetObject);
  List<SomeObject> res = new List<SomeObject>();

  int position = 0;
  while(res.Count < list.Count)
  {
    foreach (var grp in groups)
    {
        SomeObject current = grp.ElementAtOrDefault(position);
        if ( current != null) res.Add(current);
    }
    position ++;
  }
  return res;
} 
```

PS：此代码未优化，仅用于演示该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T11:48:28.090

这是`InterlaceBy`我用于不同目的的扩展方法，但它似乎适用于您的情况。

```
List<int> list = new List<int>() {1,2,3,1,1,1,1,2,2,4 }; //your TO's
var newlist = list.InterlaceBy(x => x).ToList(); //1,2,3,4,1,2,1,2,1,1

public static partial class MyExtensions
{
    public static IEnumerable<T> InterlaceBy<T, S>(this IEnumerable<T> input, Func<T, S> selector)
    {
        return input
              .GroupBy(selector)
              .SelectMany(g => g.Select((x, i) => new { key = i, value = x }))
              .OrderBy(x => x.key)
              .Select(x => x.value);
    } 
} 
```

# java - android：listpreference setOnPreferenceClickListener 错误

> ID：12996974
> 
> 赞同：2
> 
> 时间：2012-10-21T10:21:23.873
> 
> 标签：java, android

```
Preference customPreference = (Preference) findPreference("customPreference");

customPreference.setOnPreferenceClickListener(new onPreferenceClickListener)(){
     public boolean onPreferenceClick(Preference preference){
          return false;
     }
}); 
```

我对上面的代码有问题。我正在使用 eclipse，它一直建议我 setOnPreferenceChangeListener，然后当我根据它的建议进行更改时，它反而建议我 setOnPreferenceClickListener。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:33:41.100

`OnPreferenceClickListener`改为使用`onPreferenceClickListener`

```
import android.preference.Preference.OnPreferenceClickListener;

customPreference.setOnPreferenceClickListener(new OnPreferenceClickListener(){
         public boolean onPreferenceClick(Preference preference){
              return false;
         }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:34:31.167

试试这个

```
customPreference.setOnPreferenceClickListener(new Preference.onPreferenceClickListener)(){
     public boolean onPreferenceClick(Preference preference){
          return false;
     }
}); 
```

# javascript - 如何在特定页面上操作 DOM？

> ID：12996976
> 
> 赞同：1
> 
> 时间：2012-10-21T10:21:50.810
> 
> 标签：javascript, jquery

有一个问题，如何在特定页面上操作 DOM 对象。我想要做的是打开一个弹出页面，然后在那里操作一个对象。

以下代码操作初始页面上的对象：

```
cuteLittleWindow = window.open("/calendar/view.html", "littleWindow", "location=no,width=320,height=200");
$('.navbar-inner').hide();

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:26:40.850

你可以做

```
$(cuteLittleWindow.document).find('.navbar-inner').hide(); 
```

您不必在可爱小窗口的页面上包含 jQuery。但请确保两个页面都来自同一个域。这尤其意味着您无法在`file://`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:26:53.473

不太难：

```
$(cuteLittleWindow.document)... 
```

只要打开的文档与发起者运行的域**位于同一域中，就应该这样做。**

# wpf - 如何更改 Stackpanel 中元素的位置？

> ID：12996983
> 
> 赞同：3
> 
> 时间：2012-10-21T10:23:22.807
> 
> 标签：wpf

我有一个有 5 个孩子的 Stackpanel。

```
 <StackPanel Orientation="Horizontal">
        <TextBlock >1</TextBlock>
        <TextBlock >2</TextBlock>
        <TextBlock >3</TextBlock>
        <TextBlock >4</TextBlock>
        <TextBlock >5</TextBlock>
    </StackPanel> 
```

我想改变孩子[2]的位置。

如何在运行时更改元素的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:35:15.150

它可以通过跟踪 StackPanel 的 Children-property 的 index-element 来实现。我向您发送了一些示例代码来演示其工作原理。例如，考虑以下代码：

```
 int currentSelectedIndex = stackPanel1.Children.IndexOf(CurrentSelectedTextBlock);
    int downIndex = currentSelectedIndex + 1;
    int childCount = stackPanel1.Children.Count;
    if (downIndex < childCount)
    {
        stackPanel1.Children.RemoveAt(currentSelectedIndex);
        stackPanel1.Children.Insert(downIndex, CurrentSelectedTextBlock);
    }
    else if (downIndex == childCount)
    {
        stackPanel1.Children.RemoveAt(currentSelectedIndex);
        stackPanel1.Children.Insert(currentSelectedIndex, CurrentSelectedTextBlock);
    } 
```

它获取当前选定的 TextBlock 并将其索引向上移动一格。然后，您需要通过删除并重新插入来更新 StackPanel 的 Children-property。

我质疑您是否想将 StackPanel 用于此类目的。使用 ItemsControl 更容易，例如 ListBox，因为它们可以绑定到 T 的 ObservableCollection。一旦绑定的集合更新，控件也会更新。

我希望这有帮助。示例代码可以在[这里](http://sdrv.ms/X7A2ZR)下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:39:06.140

这个问题有点不清楚，因为意图不是很具体。以下代码允许您根据 Text-content-property 移动 TextBlock：

```
 string number = "4";
    TextBlock textBlockToSearch = null;

    foreach (var child in stackPanel1.Children)
    {
        if (child is TextBlock)
        {
            var textBlock = (TextBlock) child;
            if (textBlock.Text.CompareTo(number) == 0)
                textBlockToSearch = textBlock;
        }
    }

    if (textBlockToSearch != null)
    {
        stackPanel1.Children.Remove(textBlockToSearch);
        int pos = 2;
        stackPanel1.Children.Insert(pos - 1, textBlockToSearch);
    }
    else
    {
        Debug.WriteLine("Could not find TextBlock");
    } 
```

如果您有其他意图，例如在选择 TextBlock 后使用鼠标，您可能需要使用不同的技术，例如在设计时在 Visual Studio 界面中看到的。

希望这可以帮助。

# python - 使用python将一些键发送到非活动窗口

> ID：12996985
> 
> 赞同：19
> 
> 时间：2012-10-21T10:23:43.033
> 
> 标签：python, windows, key, send, sendkeys

我正在尝试使用 Python 将一些键发送到非活动窗口/进程/程序（Win32/64）。已经阅读了`pywinauto`and `SendKeys`，但是它们都在发送密钥之前激活了窗口。

有什么方法可以在不激活非活动窗口的情况下使用它？

如果有人发布了一个简单的示例/片段，那就太好了。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-08-11T05:46:25.147

这是一篇很老的帖子，但这里没有答案，我一直在寻找类似的东西，我花了 6 个小时浏览 Stackoverflow，最后只是阅读了所有 C 文档，因为它更有用。

```
#you will need the win32 libraries for this snippet of code to work, Links below
import win32gui
import win32con
import win32api
from time import sleep

#[hwnd] No matter what people tell you, this is the handle meaning unique ID, 
#["Notepad"] This is the application main/parent name, an easy way to check for examples is in Task Manager
#["test - Notepad"] This is the application sub/child name, an easy way to check for examples is in Task Manager clicking dropdown arrow
#hwndMain = win32gui.FindWindow("Notepad", "test - Notepad") this returns the main/parent Unique ID
hwndMain = win32gui.FindWindow("Notepad", "test - Notepad")

#["hwndMain"] this is the main/parent Unique ID used to get the sub/child Unique ID
#[win32con.GW_CHILD] I havent tested it full, but this DOES get a sub/child Unique ID, if there are multiple you'd have too loop through it, or look for other documention, or i may edit this at some point ;)
#hwndChild = win32gui.GetWindow(hwndMain, win32con.GW_CHILD) this returns the sub/child Unique ID
hwndChild = win32gui.GetWindow(hwndMain, win32con.GW_CHILD)

#print(hwndMain) #you can use this to see main/parent Unique ID
#print(hwndChild)  #you can use this to see sub/child Unique ID

#While(True) Will always run and continue to run indefinitely
while(True):
    #[hwndChild] this is the Unique ID of the sub/child application/proccess
    #[win32con.WM_CHAR] This sets what PostMessage Expects for input theres KeyDown and KeyUp as well
    #[0x44] hex code for D
    #[0]No clue, good luck!
    #temp = win32api.PostMessage(hwndChild, win32con.WM_CHAR, 0x44, 0) returns key sent
    temp = win32api.PostMessage(hwndChild, win32con.WM_CHAR, 0x44, 0)

    #print(temp) prints the returned value of temp, into the console
    print(temp)
    #sleep(1) this waits 1 second before looping through again
    sleep(1) 
```

我看过所有帖子都可以使用

```
hwndEdit = win32gui.FindWindowEx(hwndMain, hwndChild, "Edit", "test - Notepad"); 
```

但我永远无法弄清楚。除此之外，微软网站上的所有文档都含糊不清，所以我添加了我自己的理解方式。

这应该可以帮助您入门，并且应该对其他人有所帮助。如果其他人有修订，请告诉我。

[Win32 Python 库](https://sourceforge.net/projects/pywin32/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-19T23:35:06.233

上面 mmsvsbg / Lithian Coth 的漂亮代码太棒了。我确认它可以在 Intel i7 上的 Windows 10（64 位）上运行。将 win32gui（现在称为 pywin32）编译成 64 位和其他一些小东西太费时间了，但还是可行的。对于需要了解通过 mmsvsbg/Lithian 运行代码的分步说明的人，我在此处进行了详细说明： [https ://forums.whirlpool.net.au/thread/3nkwl0k9?p=-1#bottom](https://forums.whirlpool.net.au/thread/3nkwl0k9?p=-1#bottom)

一个更快的选择是你可以使用一个已经编写好的库来做同样的事情，甚至更多：它叫做 pywinauto： [https ://pywinauto.github.io/](https://pywinauto.github.io/)

Pywinauto pywinauto 是一个用纯 Python 编写的 GUI 自动化库，为 Windows GUI 开发。在最简单的情况下，它允许您将鼠标和键盘操作发送到 Windows 和 Linux 上的对话框和控件，而目前仅在 Windows 上支持更复杂的基于文本的操作（Linux AT-SPI 支持正在开发中）。

pywinauto 0.6.0（10 月 31 日）和 0.6.1（08 年 2 月）这个大版本引入了 MS UI 自动化 (UIA) 支持（WinForms、WPF、Qt、浏览器、商店应用程序等）。现在在 ReadTheDocs 上不断构建文档。另请参阅我们改进的入门指南模块键盘和鼠标现在可以在任何窗口上下文之外使用。它们也可以在 Linux 上运行！多后端架构允许添加新的平台支持。只需实现两个类并注册您的后端！代码风格更接近 PEP8：ClickInput -> click_input。虽然 backend='win32' 与 pywinauto 0.5.4 向后兼容约 80%。win32_hooks 模块的初始实现。可以在系统中注册键盘事件（又名热键）和鼠标操作处理程序。示例：hook_and_listen.py。

# android - 对于不同的屏幕（例如 xlarge = 960dp x 720dp），Android 在 dp 中的不同屏幕尺寸是多少？

> ID：12996991
> 
> 赞同：4
> 
> 时间：2012-10-21T10:24:35.330
> 
> 标签：android, size, dimensions, screens

在[支持的屏幕范围中](http://developer.android.com/guide/practices/screens_support.html#range)，Android 团队提到：

> 当您为不同的屏幕尺寸设计 UI 时，您会发现每种设计都需要最少的空间。因此，上面的每个通用屏幕尺寸都有一个由系统定义的相关最小分辨率。这些最小尺寸以“dp”为单位——您在定义布局时应该使用相同的单位——这使系统可以避免担心屏幕密度的变化。
> 
> *   超大屏幕至少为 960dp x 720dp
> *   大屏幕至少为 640dp x 480dp
> *   普通屏幕至少为 470dp x 320dp
> *   小屏幕至少为 426dp x 320dp

所以，如果我想支持所有 Android 屏幕：

1.  我可以在这些尺寸中创建用于全屏视图的图像，并且这将是支持所有可用屏幕的充分条件吗？
2.  或者它们只是最小尺寸，我需要其他尺寸？
3.  如果需要其他维度，它们是什么？换句话说，我应该要求图形设计师提供给我的尺寸是多少？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:57:40.843

它们只是最小尺寸。理论上，制造商可以制造任何尺寸的屏幕。

# c - 在c中验证字符串

> ID：12996994
> 
> 赞同：2
> 
> 时间：2012-10-21T10:24:47.740
> 
> 标签：c

我有一个字符串数组

我想要做的是检查字符串是否只包含数字，如果没有给出错误：你输入了字符串

```
void checkTriangle(char *side1[],char *side2[],char *side3[])
{
    int i;

    for(i=0;i<20;i++)
        if(isdigit(side1[i]) == 0)
        {
            printf("You entered string");
            break;
        }

} 
```

什么都不打印，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T10:35:04.027

我认为您还没有掌握数组和指针的概念

你的声明`char *side1[]`与说`char **side1`这实际上是一个指向我猜不是你想要的指针的指针是一样的

我认为在您开始使用按引用传递参数创建函数之前，您应该首先使用按值传递。一般来说，学习语言和编程的基础知识会更好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T10:26:52.387

您的参数是指针数组，而不是字符串。的类型`side1`应该是`char*`，不是`char*[]`。

```
void checkTriangle(char *side1, /* ... */)
{
    /* ... */
} 
```

要处理浮点值，您可以检查字符串的格式。

```
#include <ctype.h>
#include <stddef.h>

int checkTriangle(const char *s, size_t n) 
{
    size_t i;
    int p1 = 1;

    for (i = 0; i < n; ++i) {
        if (s[i] == '.')
            p1 = 0;
        else if (!isdigit(s[i]) && !p1)
            return 0;
    }

    return 1;
} 
```

顺便说一句，您的功能设计得不是很好。您应该在调用者中打印并且独立于字符串的大小。

```
#include <ctype.h>
#include <stdio.h>
#include <string.h>

int checkTriangle(const char *s, size_t n) 
{
    size_t i;

    for (i = 0; i < n; ++i)
        if (!isdigit(s[i])) 
            return 0;

    return 1;
}

int main(void)
{
    char s[32];
    size_t n;

    fgets(s, sizeof s, stdin);
    n = strlen(s) - 1;
    s[n] = '\0';

    if (!checkTriangle(s, n))
        puts("You entered string");

    return 0;
} 
```

如果允许完全使用标准 C 库，也可以使用`strtod`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T11:31:07.887

```
 #include <string.h>
  #include <stdio.h>

  void checkTriangle(char *side1)
  {
    int i;
    int found_letter = 0;
    int len = strlen(side1);

    for( i = 0; i < len; i++)
    {
        if(side1[i] < '0' || side1[i] > '9')
        {
            found_letter = 1; // this variable works as a boolean
            break;
        }
    }
    if(found_letter) // value 0 means false, any other value means true
        printf("You entered a string");
    else
        printf("You entered only numbers");
  } 
```

参数“char *side1”也可以作为“char side1[]”传递

# c# - 使用 C# 发送 ASP.NET 简单邮件

> ID：12996995
> 
> 赞同：0
> 
> 时间：2012-10-21T10:24:52.540
> 
> 标签：c#, asp.net

我试图在 asp.net 中发送简单的邮件。它不起作用。

这是代码：

```
protected void Button2_Click(object sender, EventArgs e)
{
    MailMessage mail = new MailMessage();
    SmtpClient SmtpServer = new SmtpClient("smtp.gorenparmak.com");
    mail.From = new MailAddress("radyo@gorenparmak.com");
    mail.To.Add("radyo@gorenparmak.org");
    mail.Subject = "Test Mail - 1";
    mail.Body = "mail with attachment";

    SmtpServer.Port = 587;
    SmtpServer.Credentials = new System.Net.NetworkCredential("radyo@gorenparmak.com", "write password");
    SmtpServer.EnableSsl = true;

    SmtpServer.Send(mail);
} 
```

我运行它时产生的错误：

> 无法解析远程名称：“smtp.gorenparmak.com”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T12:41:14.517

尝试使用 PORT 25，因为 PORT 587 用于 gmail

下面的示例尝试查看它是否有效，否则您的 DNS 有问题

```
 // Set the to and from addresses.
 // The from address must be your GMail account
 mail.From = new MailAddress("gorenparmak.net<radyo@gorenparmak.com>");
 mail.To.Add(new MailAddress(to));

 // Define the message
 mail.Subject = subject;
 mail.IsBodyHtml = isHtml;
 mail.Body = message;

 // Create a new Smpt Client using Google's servers
 var mailclient = new SmtpClient();
 //mailclient.Host = "smtp.gmail.com";//ForGmail
 mailclient.Host = "mail.gorenparmak.com";
 //mailclient.Port = 587; //ForGmail
 mailclient.Port = 25;

 // This is the critical part, you must enable SSL
 //mailclient.EnableSsl = true;//ForGmail
 mailclient.EnableSsl = false;
 mailclient.UseDefaultCredentials = true;

 // Specify your authentication details
 //mailclient.Credentials = new System.Net.NetworkCredential("SomeGmailAccount@gmail.com", "PaswordXYX123");//ForGmail
 mailclient.Credentials = new System.Net.NetworkCredential("noreply@gorenparmak.com", "PaSsWaRd");

 mailclient.Send(mail);
 mailclient.Dispose(); 
```

# objective-c - 属性和实例变量有什么区别？

> ID：12996996
> 
> 赞同：0
> 
> 时间：2012-10-21T10:24:59.267
> 
> 标签：objective-c

在实现文件中，所有属性都表示为私有。
那么它们之间有什么区别：

1.  我的对象

```
 @interface MyObj ()

@property (nonatomic, strong) NSString *name;

@end

@implementation MyObj

@synthesize name = _name;

// Some other codes to use "name" like self.name or _name

@end 
```

2.MyObj.m

```
 @implementation MyObj
{
    NSString *_name;
}

// Some other codes to use _name

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T10:28:53.433

在第一个示例中，您获得了为您创建的访问器

```
- (NSString *)name;
- (void)setName:(NSString *)name; 
```

另请注意，在较新版本的 Xcode 中，这`@synthesize`是隐式的。

在第二个示例中，您只创建了一个 ivar。

除非您有特殊情况，否则通常最好使用访问器，因为它可以在将来为您提供更大的灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T10:42:18.837

我建议您始终将`@property`'s 用于所有班级的数据成员。它们具有内置的内存管理功能，因此您不必担心。属性还为使用该类的对象添加了语法糖。所以如果有`obj`你的班级`MyObj`我可以做

```
obj.name = @"brianSan"; 
```

这将与

```
[obj setName: @"brianSan"]; 
```

此外，访问`name`inside`obj`可以通过 完成`obj.name`，这与`[obj name];`

当您必须访问对象的对象内的方法时，它变得更容易查看`obj.prop.subprop.subsubprop`而不是`[[[obj prop] suprop] subsubprop]`

# python - 如何使用 python 工具包 API 在 Rally 中向测试用例添加步骤

> ID：12996998
> 
> 赞同：1
> 
> 时间：2012-10-21T10:25:07.093
> 
> 标签：python, api, rest, rally

我最近开始使用 Rally python REST API 我尝试创建测试用例，但我遇到的问题是，我不确定如何添加步骤并将内容添加到这些步骤中是否有 JSON 格式？

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:25:50.587

以下是如何执行此操作的简要示例：

```
 #!/usr/bin/env python

    #################################################################################################
    #
    #  createtestcasewithsteps.py -- Create a TestCase, add Test Steps
    #
    USAGE = """
    Usage: createtestcasewithsteps.py
    """
    #################################################################################################

    import sys, os
    from pyral import Rally, rallySettings

    my_server      = "rally1.rallydev.com"
    my_user        = "user@company.com"
    my_password    = "password"
    my_workspace   = "My Workspace"
    my_project     = "My Project"

    rally = Rally(my_server, my_user, my_password, workspace=my_workspace, project=my_project)
    rally.enableLogging('createtestcasewithsteps.log')

    # For a TestCase: Name, Method, Type are required;
    # Workspace cannot be specified in the JSON, it defaults to 
    # the logged in account's Workspace setting
    # The TestCase can optionally be associated to a WorkProduct
    # Project and WorkProduct must be object refs to relevant Rally Entity instances.
    # In this example the WorkProduct is a Defect.

    target_project = rally.getProject()
    target_defect_id = "DE4"
    target_defect   = rally.get('Defect', query='FormattedID = %s' % target_defect_id, instance=True)

    testcase_fields = {
             "Project"     : target_project.ref,
             "WorkProduct" : target_defect.ref,
             "Name"        : "Data Import Automated Test 01",
             "Method"      : "Automated",
             "Type"        : "Regression"
           }

    print "Creating Test Case ..."
    testcase = rally.put('TestCase', testcase_fields)
    print "Created  TestCase: %s   OID: %s" % (testcase.FormattedID, testcase.oid)

    # Add Test Case Steps
    #
    for i in range(3):

        input="Step Input for Step: "+str(i)
        expected_result="Expected Result for Step: "+str(i)

        testcasestep_fields = {
            "TestCase"          : testcase.ref,
            "StepIndex"         : i,
            "Input"             : input,
            "ExpectedResult"    : expected_result
        }

        testcasestep = rally.put('TestCaseStep', testcasestep_fields)
        print "===> Created  TestCaseStep: %s   OID: %s" % (testcasestep.StepIndex, testcasestep.oid) 
```

# xaml - Windows 8 应用程序中的标签控件

> ID：12996999
> 
> 赞同：8
> 
> 时间：2012-10-21T10:25:12.130
> 
> 标签：xaml, windows-8

我是 windows 8 应用程序开发的新手，正在学习 windows 8 中的应用程序开发。我想知道是否有任何标签，如控件可用于 windows 8 应用程序开发？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T10:31:09.707

您可以将[`TextBlock`](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.textblock.aspx)其用作控件之类的标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T19:30:55.390

我们有一个名为 TextBlock 的 UI 控件，它的实现类似于标签的实现。您可以将其属性访问为 TextBox1.Text="your string";