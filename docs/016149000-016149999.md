# StackOverflow 问答 16149000-16149999

# linux - 找出两个 clearcase 标签之间的区别（也需要新创建的元素）

> ID：16149000
> 
> 赞同：1
> 
> 时间：2013-04-22T13:56:57.557
> 
> 标签：linux, find, label, diff, clearcase

我想找出两个透明标签之间的区别，我之前确实使用过这个：

```
cleartool find -all -element "{lbtype_sub(!:1) && lbtype_sub(!:2)}" -version "{lbtype(!:2) && (! lbtype(!:1))}" -print 
```

上面命令的问题是：

*   1/ 如果有任何新创建/删除的文件，该文件将不会被打印。只会打印更高的目录名称。

前任：

```
For label 001:
/directoryA/:
a.cpp b.cpp 

For label 002: 
/directoryA/:
a.cpp b.cpp(new version) c.cpp(new element) 
```

如果我们使用前面的命令，打印的结果只会是

```
/directoryA@@.... 
/directoryA/b.cpp@@... 
```

我也想要一个打印的命令`c.cpp`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:16:37.017

You might need to complete your query with an additional separate query:

You could try to list all versions labeled `LBL2` AND *not* `LBL1` (i.e. new elements)

```
cleartool find -all -element "{(! lbtype_sub(!:1)) && lbtype_sub(!:2)}" -version "{lbtype(!:2)}" -print 
```

Trying to do all in one command is difficult to do because you cannot easily combined all elements with 2 labels, with all elements with only the second label.

# javascript - 在 JavaScript 中维护队列

> ID：16149003
> 
> 赞同：3
> 
> 时间：2013-04-22T13:57:10.747
> 
> 标签：javascript, jquery, asp.net-mvc, data-structures

我正在使用 MVC4 并返回一个对象列表以查看为 Json。实际上 View 对 Controller 进行 Ajax 调用以检索数据。我需要维护该对象的队列并将它们显示在我的页面上，这样每个对象将显示 10 秒，然后它将被队列中的第二个对象替换。我正在使用以下代码进行 Ajax 调用

```
function GetData() {
    $.get("http://localhost:45533/Home/GetData/", function (data) {
        ProcessData(data);
        // Here i need to add [data] to Queue
    });
}

function ProcessData(data) {
    $("#myDiv").append(data.Name+ "<br/>");
}

$("#fetchBtn").click(function() {
    // Here i need to get the next object in data from Queue
}); 
```

目前我正在使用按钮单击来刷新它。谁能建议我如何维护返回数据的队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:05:45.607

尝试这个...

```
var arData = [];

function GetData() {
    $.get("http://localhost:45533/Home/GetData/", function (data) {
        ProcessData(data);
        // Here i need to add [data] to Queue
    });
}

function ProcessData(data) {
    arData.push(data)   //  add it to the end of the array
    $("#myDiv").append(data.Name+ "<br/>");
}

$("#fetchBtn").click(function() {
    // Here i need to get the next object in data from Queue
    var data = arData.shift();  //  get the first item of the array
}); 
```

`arData.push(data)`添加`data`到数组的末尾，同时`arData.shift()`返回数组中的第一项并同时删除它。

# java - 在java中将Object []转换为double []

> ID：16149006
> 
> 赞同：6
> 
> 时间：2013-04-22T13:57:13.450
> 
> 标签：java, arrays, object, double

这可能吗？我已经为此苦苦挣扎了一段时间。我最初是`Long []`先转换为，然后转换为`double []`哪个让我编译，然后给我一个转换错误。我现在被困住了。

在这段代码中，我正在遍历我的哈希图中的条目。

```
 Object[] v = null;
 for(Map.Entry<String,NumberHolder> entry : entries)
 {
       v = entry.getValue().singleValues.toArray(); //need to get this into double []
 } 
```

这是我的 numberHolder 类

```
private static class NumberHolder
{
    public int occurrences = 0;
    public ArrayList<Long> singleValues = new ArrayList<Long>();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T14:00:31.220

非泛型`toArray`可能不是最佳的，我建议您改用`for`循环：

```
Long[] v = new Long[entry.getValue().singleValues.size()];
int i = 0;
for(Long v : entry.getValue().singleValues) {
  v[i++] = v;
} 
```

现在你有一个*对象**数组`Long`*而不是`Object`. 但是，`Long`是整数值而不是浮点数。你应该可以施放，但它闻起来像是一个潜在的问题。

您也**可以直接转换**而不是使用`Long`数组：

```
double[] v = new double[entry.getValue().singleValues.size()];
int i = 0;
for(Long v : entry.getValue().singleValues) {
  v[i++] = v.doubleValue();
} 
```

**概念：**你不能*在这里尝试转换数组*，而是*转换每个元素*并将结果存储在一个*新的数组*中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:01:14.637

为了将类型数组“转换”`Object[]`为`double[]`您需要创建一个新数组`double[]`并用 type 的值填充它`double`，您可以通过分别`Object`从输入数组中强制转换每个值来获得这些值，大概是在一个循环中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:15:49.883

This smells a bit as some bad practice.
First of all, I discourage you to use arrays, use Map or List.

If you need the values as double, make a getter which

```
private List<Long> myList;
//initialize somewhere

double getElementAsDouble(int index){
    return myList.get(index).doubleValue();
} 
```

And add a converter like getMyListAsDoubleArray() where you make the conversion if you really have to use Array. You can check out the solution from the answers here, for example Matthias Meid's.

# sql - 在 Oracle SQL 中取出的七位数字 + 1-2 个字母（如果给出）

> ID：16149007
> 
> 赞同：1
> 
> 时间：2013-04-22T13:57:13.843
> 
> 标签：sql, oracle, words

我不知道这是否可能。我只想要七位数字 + 1-2 个字母（如果有的话）取出。例如：

```
1300165A panadol 5mg
panadol 1% *1370100
panadol 2 mg, CL: 1300232
1330186AA 
```

想得到：

```
1300165A
1370100
1300232
1330186AA 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:28:39.517

```
regexp_substr(your_string, '(^|\W)(\d{7}[A-Z]{0,2})(\W|$)', 1, 1, '', 2) 
```

[小提琴](http://www.sqlfiddle.com/#!4/617f9/1)

# java - 如何使用java处理selenium webdriver中的重叠页面

> ID：16149018
> 
> 赞同：2
> 
> 时间：2013-04-22T13:57:52.257
> 
> 标签：java, selenium, webdriver, overlapping

![在此处输入图像描述](https://i.stack.imgur.com/f6kbj.png)嗨，我有基于 extJS 的用户界面。我面临重叠页面的问题。例如：我有一个带有按钮的页面，该按钮将打开一个面板类型的东西（注意：它不是单独的框架也不是单独的窗口。它在与父页面 DOM 相同的 DOM 中打开）。该面板与基础页面重叠。该面板的样式属性中有一个 z-index。现在我希望识别此面板上的控件。我怎么能在 selenium webdriver 中做到这一点。此外，面板和底层页面可能具有相同的控件（但底层控件未激活）。那么我们如何识别这些控件呢？TIA。嗨，我想添加 UI 的屏幕截图，但我无法添加，因为它说我需要至少 10 个声望才能发布图像。我怎样才能获得10个声望？还有一些控件出现在两个页面上。e 重叠页面和重叠页面。由于它是一个基于 extJS 的 UI，ID 会自动生成，CSSLocator 将识别出现在 UI 上并且相似的两个控件。所以我想我只剩下一个选择，即以某种方式跳入面板然后识别控件。我尝试使用 driver.switchTo.activeElement 假设底层控件处于非活动状态，但它仍然没有帮助我。在这方面的任何帮助。TIA 在这方面的任何帮助。TIA 在这方面的任何帮助。TIA

附上截图。现在正如您所看到的，我将突出显示的面板与基础页面重叠，并且它也存在于重叠页面的 DOM 中。一些建议：1）我尝试使用 XPath，但这无济于事，因为我必须为 UI 中的每个此类控件硬编码 xpath（我正在尝试动态生成 xpath，但它仍在进行中。） 2）无论如何我们可以告诉驱动程序选择具有焦点且处于活动状态的控件。DOM 源太大而无法粘贴。有问题的控件是屏幕截图中显示的“开始查询”按钮，该按钮出现两次，并且可以在页面中出现多次。我正在研究您建议的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:21:57.860

由于屏幕截图中只显示了几行 DOM，所以我只能猜测你有。

我假设你有类似这样的 DOM：

```
<button id='ext-gen343'>Start query</button>
<div id="ext-gen1829" class=" x-window" style="width: 30px; height: 85px; margin: 0px; left: 0px; top: 0px; visibility: visible; display: block;">
    <button id='ext-gen1920'>Start query</button>
</div> 
```

首先找到窗口，然后使用 cssSelector 或 Xpath 找到里面的按钮。

```
// Note that I used 'display: block;' to ensure we are looking for the active/visible window.
WebElement btnStartQueryInside = driver.findElement(By.XPath("//div[contains(@class, 'x-window') and contains(@style, 'display: block;')]//button[text()='Start query']")); 
```

对于您的第 2 点，`driver.switchTo.activeElement`是您想要的，您之前已经提到过。但这不是一个优雅的解决方案，甚至根本不起作用。

# ruby-on-rails - Heroku Rails 无法创建新的连接进程：无法分配内存

> ID：16149021
> 
> 赞同：16
> 
> 时间：2013-04-22T13:58:09.983
> 
> 标签：ruby-on-rails, heroku, rails-postgresql

我有 3 个 Rails 应用程序都使用相同的代码库。2/3 的应用程序运行良好，但其中一个给了我这个错误：

> 无法为连接创建新进程：无法分配内存

在尝试查看 Postgres 日志时，它更具体一点：

> psql: bin//psql-9.2.1-64bit pv: bin//pv-1.1.4-64bit psql-9.2.1-64bit:
> could not fork new process for connection: 无法分配内存
> 无法fork新进程进行连接：无法分配内存
> 无法为连接分叉新进程：无法分配内存
> bin/brie：第 146 行：[：：预期整数表达式 pg_dump：
> bin//pg_dump-9.2.1-64bit psql-9.2.1-64bit：
> 不能fork new process for connection: 无法分配内存
> 无法创建新进程进行连接：无法分配内存
> 无法创建新进程进行连接：无法分配内存

这是一个相对较小的应用程序，尤其是在数据方面。我尝试过重新推送所有内容，我尝试过 heroku-restart，并且 Heroku 的状态页面显示它们很好。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T14:03:24.513

Heroku 的人修复了它。他们的问题

# html - div 没有完全扩展到内容

> ID：16149022
> 
> 赞同：1
> 
> 时间：2013-04-22T13:58:15.147
> 
> 标签：html, css, height

我不是 css 专家，但我已经没有什么想法可以触发这种不需要的行为了。我想使用 a`div`作为我网站主要部分的背景。`div content`一旦我的内容很多，`div content_wrapper`就没有完全展开。这是我的 HTML 的一部分

```
<div class="content_wrapper">
    <div class="content">
        <h1>Some heading</h1>
        <p>lot's of text</p>
    </div>
<footer>
    <div id="foot">
        <a id="disclaimer" href="disclaimer.html"> disclaimer</a> 
    </div>
    </footer>
</div> 
```

还有.css。

```
.content_wrapper{
    position: absolute;
    width: 100%;
    height: 100%;
    top: 215px;
    background-color: #EEE;

}
.content{
    z-index: 5;
    float:left;
    margin: 50px 0 50px 20px;
    width: 75%;
    padding: 20px;
    background-color: #FFF;
    border-left: dashed 1px #CCC;
    border-top: dashed 1px #CCC;

    -webkit-border-top-left-radius: 25px;
    -moz-border-radius-topleft: 25px;
    border-top-left-radius: 25px;
} 
```

任何想法发生了什么，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:22:57.027

`position: absolute`这里的问题是和的组合`width/height: 100%`。

100% 指的是元素的父元素，即`body`. 所以`content_wrapper`会和身体一样大。但它也是绝对定位的，因此被排除在流程之外。这意味着 的大小`body`不随内容的大小而变化。这反过来意味着它`content_wrapper`也不会增长，并且内容只是因为溢出而可见。

不要使用宽度和高度，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:19:18.863

尝试将内容包装器设置为位置：相对而不是绝对。并摆脱 .content 上的浮动。

要么那个，要么在它下面放一个clearing div。

```
.content_wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    top: 215px;
    background-color: #EEE;
}

.content {
    z-index: 5;
    margin: 50px 0 50px 20px;
    width: 75%;
    padding: 20px;
    background-color: #FFF;
    border-left: dashed 1px #CCC;
    border-top: dashed 1px #CCC;
    -webkit-border-top-left-radius: 25px;
    -moz-border-radius-topleft: 25px;
    border-top-left-radius: 25px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:01:18.903

将您的 .content_wrapper 更改为此代码：

```
.content_wrapper{
    width: 100%;
    height: 100%;
    margin-top: 215px;
    background-color: #EEE;
} 
```

您不应该使用 position:absolute 来允许它扩展到其父级。并且，在放弃使用 position:absolute 时，您应该使用 margin-top 而不是 top。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T14:10:58.180

尝试这个

> .content_wrapper{
> 宽度：100%；
> 高度：100%；
> 边距顶部：215px；
> 背景颜色：#EEE；
> z指数：-999；
> 位置：绝对；
> }

z-index 应该在底部分层。
请告诉我这不是您要找的还是不起作用

# javascript - Javascript：将事件附加到JS中的元素或具有元素调用功能

> ID：16149023
> 
> 赞同：1
> 
> 时间：2013-04-22T13:58:20.990
> 
> 标签：javascript, jquery

在“简单”网站上这是更好的做法。（很少有 JavaScript 动作）

a：将事件/动作/函数附加到元素上（div/span/...）

就像如何将此按钮和单击事件添加到某些 div：

```
$( "#create-user" )
  .button()
  .click(function() {
  $( "#dialog-form" ).dialog( "open" );
  }); 
```

b：或在线让元素动作调用函数。

```
<div id=calc onclick="doCalcFunc(this)">calc something</div> 
```

这是来自更多来自 OO 背景的人的质疑，java/c#，所以发现更喜欢 B，很容易找到正在发生的事情。也许它只是在学习更多关于 web 调试工具的知识，但是能够在一个元素上点击 go to source，然后看到，哦，当你点击这个元素时，它会运行函数 X。至于方法“A”，我必须在源上搜索可能附加到元素 ID、类型、类或元素的其他指示符的某些函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:09:44.687

即使对于一个简单的网站，**选项 A**中显示的格式也会更好，因为它将代码与 HTML 标记分开。这也是[Unobtrusive JavaScript](http://www.w3.org/wiki/The_principles_of_unobtrusive_JavaScript#Unobtrusive_JavaScript_defined)的主要原则之一。

根据我的经验，使用 HTML DOM 或 JQuery 等框架替换和修改附加到元素的事件要容易得多，然后是替换标记中的多行内联代码。我工作的大多数网站都有动态生成的内容，使用内联函数维护所有这些代码会很痛苦。

此外，选项 A（将事件附加到元素上）还允许您使用各种函数，例如匿名函数和各种样式的[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)。在选项 B 中，`doCalcFunc`需要在`div`元素之前定义才能起作用。使用选项 A，可以在函数附加到 div 的事件时定义函数。这允许在初始编码和将来维护站点时有更大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:43:06.067

虽然我大部分时间会使用基于 JS 的处理程序分配，但有时处理程序属性可以很好地工作。

重要的是不要丢弃任何潜在的工具，而是要了解这两种技术的优缺点，我将在下面尝试列出。我将尝试给每个“骗局”一个对位以供考虑。

* * *

# 元素属性处理程序

## 优点

*   处理程序在节点创建后立即可用*（零延迟）*。
*   赋值非常简单，并且具有极其广泛的跨平台支持。
*   提供一个不与 CSS 重叠的元素的钩子*（使用样式和行为的类）*
*   附加到元素的行为的标记中的即时可见性。

## 缺点

*   混合行为和表现。
    *   *Counter：*虽然确实如此，但这只是在嵌入大量 JavaScript 时才会出现的问题。单个函数调用并不比给元素添加一个类更显眼。
*   代码`eval`在每个事件上都有。
    *   *计数器：*这个*实际上不是真的*，但它通常被认为是一个骗局，我想我会把它包括在内。事实是，它只`eval`在页面加载时执行一次，就像 JavaScript 的其余部分一样。
*   如果有多个元素具有相同的处理程序，您不会共享一个函数，而是每个元素都有一个唯一的函数。
    *   *计数器：*这是真的。即使函数调用相同，也会为每个元素、每个事件创建一个新函数。但是如果有几个共享同一个处理程序，则可以为事件委托提出一个案例。
*   高维护。对函数的更改意味着必须更改标记以匹配。
    *   *计数器：*这是真的，尽管在 JavaScript 代码中添加处理程序可能会在类名更改或标记更改破坏 DOM 选择时遇到类似的问题。
*   每个元素、每个事件类型只能分配一个处理程序。
    *   *Counter：*这是真的，尽管您可以拥有一个调用其他函数的通用函数，这有点类似于 jQuery 在后台的工作方式。
*   可能与 JavaScript 中分配的处理程序发生冲突。分配`onclick="foo()"`属性时，您实际上是在将函数分配给`element.onclick`. 由于每个元素只能分配一个，因此对 JS 中属性的任何更改都会覆盖您的处理程序。
    *   *计数器：*这是真的。虽然这绝对需要考虑，但不应将其用作`.onclick`完全取消内联或处理程序的理由。有很多情况不会发生冲突。

* * *

# 在 JavaScript 代码中分配的 jQuery 处理程序

## 优点

*   jQuery 使它非常简单和兼容。
*   没有将 JavaScript 与标记直接混合。
*   对处理程序的更改完全在 JavaScript 中完成，当涉及多个元素时不太可能需要重复更改。
*   内置浏览器兼容性修复程序。

## 缺点

*   如果处理程序是在 DOM 准备就绪后分配的，则可能有一段时间元素在没有 JavaScript 行为的情况下可见。
    *   *计数器：*虽然是这样，但这通常不是问题。如果您通过慢速连接发送大页面，这可能是最相关的。在这些情况下，您可以将脚本嵌入到更靠近元素的位置，而不是等待整个 DOM。
*   需要一个过于复杂的 DOM 就绪解决方案。
    *   *计数器：*不是真的。虽然有些人选择使用此类解决方案，但没有理由不能将分配处理程序的脚本简单地放在页面底部。
*   当向一个元素添加第一个处理程序时，jQuery 实际上创建了另一个函数，即使实际的处理程序在多个元素之间共享。
    *   *Counter：*虽然这是真的，但它仅适用于分配给元素的第一个处理程序。分配的其他处理程序可以共享 jQuery 制作的“幕后”处理程序，因此额外开销仅在第一个处理程序上，每个元素。
*   有其自己的“突兀”问题，其中类可能被 JavaScript 和 CSS 团队使用，允许其中一个或另一个通过更改类来破坏代码。
    *   *Counter：*虽然是这样，但在这种情况下，多个类可以与命名约定一起使用，从而为每个团队提供不干涉指标。
*   从标记中看不到该行为。
    *   *计数器：*如果类专门用于处理程序分配，并且使用了良好的命名约定，那么它们可以与内联处理程序一样具有描述性。
*   为 JavaScript 添加一个类并不比添加一个内联处理程序更引人注目。
    *   *Counter：*虽然doing 与doing`class="click_handler"`确实没有太大区别`onclick="handler(this)"`，但如果使用设计良好的DOM，您很可能完全不需要类就可以完成您的作业。*（尽管您会失去标记中的可见性优势。）*

* * *

因此，在努力避免对任何一种方法的任何形式的宗教信仰的同时，我试图提供一些关于两种方式的一些考虑的概述。

虽然您可能会发现自己大部分时间都在使用更流行的 DOM-ready 方法来分配处理程序，但在某些情况下，内联处理程序可以很好地满足要求，尤其是在零延迟方面很重要的情况下。

# c# - 对于具有自定义 UniGrid 的用户网格，导出到 excel 为空

> ID：16149027
> 
> 赞同：0
> 
> 时间：2013-04-22T13:58:33.840
> 
> 标签：c#, asp.net, content-management-system, kentico

我在 cmsdesk 管理部分实现了自定义用户网格。我已将自定义页面添加为 Unigrid.ascx 用于绑定数据集。

A 在 User_List.aspx 页面中添加了 Query 作为

```
<cms:UniGrid ID="gridElem" Query="cms.user.SelectCustomUserSearch" runat="server" GridName="User_List.xml" OrderBy="UserName"
                IsLiveSite="false" /> 
```

在自定义 UniGrid.ascx.cs 页面上绑定数据集的`RetrieveData()`方法为

```
ds = ConnectionHelper.ExecuteQuery(Query, parameters); 
```

搜索、分页、排序工作正常。但是当我导出到 excel 时，它会得到空的 excel 表。

如何使用自定义 UniGrid.ascx 控件编写 excel。

![在此处输入图像描述](https://i.stack.imgur.com/pdJSR.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:14:16.547

以下是您的选择：

1.  调试 AdvancedExport.ascx.cs 以确保导出功能。它还包含 UniGridExportHelper - 检查其公共属性 DataSource。如果它为空，则问题将在于检索数据（其中条件/顶部 n 等），如果不是，则数据可能已损坏（剥离 html 等）

2.  下载[Open XML SDK Tool](http://www.microsoft.com/en-us/download/details.aspx?id=30425)并检查 excel 是否真的为空。（检查共享字符串表等）

3.  如果你有源代码，你可以直接调试 UniGridExportHelper。

4.  检查其他格式 - CSV / XML - 它们也是空的吗？

# php - 如何找到无限深度数组的深度

> ID：16149028
> 
> 赞同：-3
> 
> 时间：2013-04-22T13:58:37.723
> 
> 标签：php, arrays, multidimensional-array, depth

我正在尝试找出多维数组的深度。数组是无限的（深度）。我想找出数组的最大深度。请看下面的数组结构

```
Array
(
    [0] => Array
        (
            [id] => 27
            [cata_key] => 55437c82626479a7b8554532
            [cata_name] => Road
            [app_key] => 3bb4f64af3d25034f0ae35bb
            [parentid] => 0
            [subcategories] => Array
                (
                    [0] => Array
                        (
                            [id] => 28
                            [cata_key] => 6f031dbf1b3a641689277aee
                            [cata_name] => Four Wheelers
                            [app_key] => 3bb4f64af3d25034f0ae35bb
                            [parentid] => 27
                            [subcategories] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 29
                                            [cata_key] => b6c6ef585ba8e3618e05155e
                                            [cata_name] => Cars
                                            [app_key] => 3bb4f64af3d25034f0ae35bb
                                            [parentid] => 28
                                            [subcategories] => Array
                                                (
                                                    [0] => Array
                                                        (
                                                            [id] => 30
                                                            [cata_key] => 6f3e2469551ad89c7f724b9f
                                                            [cata_name] => Hyundai
                                                            [app_key] => 3bb4f64af3d25034f0ae35bb
                                                            [parentid] => 29
                                                            [subcategories] => Array
                                                                (
                                                                )

                                                        )

                                                    [1] => Array
                                                        (
                                                            [id] => 31
                                                            [cata_key] => f2f345824d547e08121b6d54
                                                            [cata_name] => Honda
                                                            [app_key] => 3bb4f64af3d25034f0ae35bb
                                                            [parentid] => 29
                                                            [subcategories] => Array
                                                                (
                                                                )

                                                        )

                                                )

                                        )

                                )

                        )

                    [1] => Array
                        (
                            [id] => 32
                            [cata_key] => 74cec939a64cef188fb04458
                            [cata_name] => Two Wheelers
                            [app_key] => 3bb4f64af3d25034f0ae35bb
                            [parentid] => 27
                            [subcategories] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 33
                                            [cata_key] => 2c31a2bdb12458a4537f3c7a
                                            [cata_name] => Hero Honda
                                            [app_key] => 3bb4f64af3d25034f0ae35bb
                                            [parentid] => 32
                                            [subcategories] => Array
                                                (
                                                    [0] => Array
                                                        (
                                                            [id] => 39
                                                            [cata_key] => e55b2b38218f055b01cd58aa
                                                            [cata_name] => Splender
                                                            [app_key] => 3bb4f64af3d25034f0ae35bb
                                                            [parentid] => 33
                                                            [subcategories] => Array
                                                                (
                                                                )

                                                        )

                                                )

                                        )

                                    [1] => Array
                                        (
                                            [id] => 34
                                            [cata_key] => dbe8c85a694913a33c73acb9
                                            [cata_name] => Bajaj
                                            [app_key] => 3bb4f64af3d25034f0ae35bb
                                            [parentid] => 32
                                            [subcategories] => Array
                                                (
                                                )

                                        )

                                )

                        )

                )

        )

    [1] => Array
        (
            [id] => 35
            [cata_key] => 05f450e3fe710f186517e61a
            [cata_name] => River
            [app_key] => 3bb4f64af3d25034f0ae35bb
            [parentid] => 0
            [subcategories] => Array
                (
                    [0] => Array
                        (
                            [id] => 36
                            [cata_key] => 8cc784f715135661c42733c2
                            [cata_name] => Boats
                            [app_key] => 3bb4f64af3d25034f0ae35bb
                            [parentid] => 35
                            [subcategories] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 37
                                            [cata_key] => 2668efe22245c3e0a897edf8
                                            [cata_name] => 2 seater
                                            [app_key] => 3bb4f64af3d25034f0ae35bb
                                            [parentid] => 36
                                            [subcategories] => Array
                                                (
                                                )

                                        )

                                    [1] => Array
                                        (
                                            [id] => 38
                                            [cata_key] => d90fd97291506cd823713543
                                            [cata_name] => 6 seater
                                            [app_key] => 3bb4f64af3d25034f0ae35bb
                                            [parentid] => 36
                                            [subcategories] => Array
                                                (
                                                )

                                        )

                                )

                        )

                )

        )

) 
```

所需输出为 4

我已经试过了

```
<?php 
```

函数数组深度（数组 $array）{ $max_depth = 1;

```
foreach ($array as $value) {
    if (is_array($value)) {
        $depth = array_depth($value) + 1;

        if ($depth > $max_depth) {
            $max_depth = $depth;
        }
    }
}

return $max_depth; 
```

}

?>

但它运作不佳

提前致谢。

问候，

苏尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:36:26.047

这将是我的看法：

```
<?php

$arr = array(
    'a' => array(
        'b' => array(
            'c' => array(
                'd' => array(
                    'e' => array()//5 deep
                 )
            ),
            'c2' => array(
                'a' => array(
                    'b' => array(
                        'c' => array(
                            'd' => array()//7 deep
                        )
                    )
                )
            )
        )
    )
);

function get_array_depth($arr, $n = 0) {
    $max = $n;
    foreach ($arr as $item) {
        if (is_array($item)) {
            $max = max($max, get_array_depth($item, $n + 1));
        }
    }
    return $max;
}

$depth = get_array_depth($arr);
echo $depth;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:21:49.280

```
<?php
    function array_depth(array $array) {
        $max_depth = 1;
        foreach ($array as $value) {
            if (is_array($value)) {
                $depth = array_depth($value) + 1;
                if ($depth > $max_depth) {
                    $max_depth = $depth;
                }
            }
        }
        return $max_depth;
    }

    echo array_depth(array(array(array('a' => 1))));
 ?> 
```

这产生 3。（使用您的代码 - 刚刚重新格式化。）

顺便说一句：考虑对循环结构设置某种安全性。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-22T17:18:01.080

试试这个人

```
 function array_depth($array, $n = 0) {
                    $max_depth = 1;
                    foreach ($array as $value) {
                        if (isset($value['subcategories'][0])) {
                            $depth = $this -> array_depth($value['subcategories']) + 1;
                            if ($depth > $max_depth) {
                                $max_depth = $depth;
                            }
                        }
                    }
                    return $max_depth;
            } 
```

# android - 应用程序意外停止。（因为tabView）

> ID：16149029
> 
> 赞同：0
> 
> 时间：2013-04-22T13:58:43.437
> 
> 标签：android, tabview

我正在尝试做一个使用标签的应用程序。我遵循这个教程：http: [//mobileorchard.com/android-app-development-tabbed-activities/](http://mobileorchard.com/android-app-development-tabbed-activities/)

我成功地使用一项活动完成了一个选项卡，但我的问题是当我尝试使用一些活动来完成该部分时。

我从android开始，你能帮帮我吗？你能说我用的方法好不好？（对不起我的英语^^）

在应用程序意外停止之前，我遇到了错误：

```
04-22 14:12:39.786: E/AndroidRuntime(319): FATAL EXCEPTION: main
04-22 14:12:39.786: E/AndroidRuntime(319): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.joignabilite/com.example.joignabilite.TabManage}; have you declared this activity in your AndroidManifest.xml?
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.app.Activity.startActivityForResult(Activity.java:2827)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.app.Activity.startActivity(Activity.java:2933)
04-22 14:12:39.786: E/AndroidRuntime(319):  at com.example.joignabilite.Identification$1.onClick(Identification.java:25)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.view.View.performClick(View.java:2485)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.view.View$PerformClick.run(View.java:9080)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.os.Handler.handleCallback(Handler.java:587)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.os.Looper.loop(Looper.java:123)
04-22 14:12:39.786: E/AndroidRuntime(319):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-22 14:12:39.786: E/AndroidRuntime(319):  at java.lang.reflect.Method.invokeNative(Native Method)
04-22 14:12:39.786: E/AndroidRuntime(319):  at java.lang.reflect.Method.invoke(Method.java:507)
04-22 14:12:39.786: E/AndroidRuntime(319):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-22 14:12:39.786: E/AndroidRuntime(319):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-22 14:12:39.786: E/AndroidRuntime(319):  at dalvik.system.NativeStart.main(Native Method) 
```

我的 tab_manage.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@android:id/tabhost"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <TabWidget
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@android:id/tabs"/>
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </FrameLayout>
</TabHost> 
```

我的 tabManage.java：它应该将我的 accueil_mobile 活动“放在”第一个选项卡中，并将标识放在

```
package com.example.joignabilite;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

@SuppressWarnings("deprecation")
public class TabManage extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_manage);

        TabHost tabHost=(TabHost)findViewById(android.R.id.tabhost);
        tabHost.setup();   

        //First Tab
        TabSpec spec1=tabHost.newTabSpec("Mobile");
        Intent in1=new Intent(this, AccueilMobile.class);
        spec1.setContent(in1);
        // Second Tab
        TabSpec spec2=tabHost.newTabSpec("Fixe");
        Intent in2=new Intent(this, Identification.class);
        spec2.setContent(in2);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
    }
} 
```

我的 accueil_mobile.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context=".Identification" >

    <include android:id="@+id/header"
         layout="@layout/header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/>

    <Button android:id="@+id/choix_transfert"
        android:layout_width="@dimen/button_width"
        android:layout_height="@dimen/button_height"
        android:layout_below="@+id/header"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="80dp"
        android:background="@drawable/buttontype1"
        android:text="@string/Transfert" />
    <Button android:id="@+id/choix_filtrage"
        android:layout_width="@dimen/button_width"
        android:layout_height="@dimen/button_height"
        android:layout_below="@+id/header"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="160dp"
        android:background="@drawable/buttontype1"
        android:text="@string/Filtrage" />
    <Button android:id="@+id/choix_parametres"
        android:layout_width="@dimen/button_width"
        android:layout_height="@dimen/button_height"
        android:layout_below="@+id/header"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="240dp"
        android:background="@drawable/buttontype1"
        android:text="@string/Parametres" />

</RelativeLayout> 
```

我的 AccueilMobile.java：

```
package com.example.joignabilite;

import android.app.Activity;
import android.os.Bundle;

public class AccueilMobile extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.accueil_mobile);

    }
} 
```

我的 acivity_identification.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/blue"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/connexion_picture"
        android:layout_width="120dp"
        android:layout_height="60dp"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="@dimen/normal_padding"
        android:src="@drawable/logo2"
        android:contentDescription="@string/BT" />

    <Button
        android:id="@+id/create_account"
        android:layout_width="@dimen/small_button_width"
        android:layout_height="@dimen/button_height"
        android:layout_gravity="center"
        android:layout_marginTop="@dimen/normal_padding"
        android:background="@drawable/buttontype1"
        android:text="@string/create_account" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:paddingTop="@dimen/normal_padding"
        android:text="@string/email"
        android:textSize="@dimen/normal_text_size" />

    <EditText
        android:id="@+id/user_email"
        android:layout_width="@dimen/large_padding"
        android:layout_height="wrap_content"
        android:inputType="textEmailAddress"
        android:layout_gravity="center" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:paddingTop="@dimen/normal_padding"
        android:textSize="@dimen/normal_text_size"
        android:text="@string/password" />

    <EditText
        android:id="@+id/user_password"
        android:layout_width="@dimen/large_padding"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:inputType="textPassword" />

    <Button
        android:id="@+id/connect"
        android:layout_width="@dimen/small_button_width"
        android:layout_height="@dimen/button_height"
        android:layout_gravity="center"
        android:layout_marginTop="@dimen/normal_padding"
        android:background="@drawable/buttontype1"
        android:text="@string/connect" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:18:15.060

答案在堆栈跟踪的第二行。您显然还没有在 AndroidManifest.xml 中定义您的 Activity

# functional-programming - Haskell - 缺少随附的绑定，

> ID：16149031
> 
> 赞同：3
> 
> 时间：2013-04-22T13:58:45.450
> 
> 标签：functional-programming, haskell

我目前正在完成一个使用 Haskell 创建电影评级系统/数据库的项目。

我正在尝试添加允许用户成为电影粉丝的功能。

我有：

```
isFan :: Fan -> Film -> Bool
isFan givenFan (_, _, _, fans) = any (\fan -> fan == givenFan) fans

filmsWithFan :: Fan -> [Film]
filmsWithfan givenFan = filter (isFan givenFan) testDatabase 
```

但这会引发一个错误：“filmswithFan”的类型签名缺少随附的绑定。

有任何想法吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:02:21.253

你有一个错字：

```
filmsWithFan :: Fan -> [Film]
--       ^ upper case F
filmsWithfan givenFan = filter (isFan givenFan) testDatabase
--       ^ lower case f 
```

每当您看到“类型签名缺少随附的绑定”消息时，请**仔细**检查您的函数名称是否有拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:02:08.527

您在两行中以不同的方式大写函数名称，`filmsWithFan`vs`filmsWithfan`

# url - Wicket：资源url映射（文件系统）

> ID：16149037
> 
> 赞同：0
> 
> 时间：2013-04-22T13:59:01.603
> 
> 标签：url, resources, mapping, wicket

我有一个带有 Tomcat 和 Spring 的 Wicket 应用程序。在应用程序内部有一个音频播放节点。音频文件存储在应用程序文件夹之外的文件系统中。当用户要求播放文件时，Tomcat 有一个配置来映射一个 url 并从文件系统中的文件夹中检索文件。

我想将此映射移动到 Wicket 端，但我仍然想将文件存储在文件系统中（确实有很多），并且我希望它具有安全的 url（不显示我的文件系统结构）。我怎样才能以这种方式实现这种映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:01:29.923

阅读[这篇](http://wicketinaction.com/2011/07/wicket-1-5-mounting-resources/)博文，然后实现自定义 Resource 类，检查 DynamicImageResource 的来源

# android - 更改音量和弹出菜单

> ID：16149039
> 
> 赞同：0
> 
> 时间：2013-04-22T13:59:03.647
> 
> 标签：android, android-2.2-froyo, popupmenu

我有一个播放音乐的应用程序。对于每个轨道，我可以调用一个上下文菜单。

问题是Android 2.2，当我调用菜单时，硬件音量键不起作用。在 Android 3.2 版本中可以正常工作，即我可以通过打开的弹出菜单更改音乐音量。是否可以对 2.2 版执行相同的行为？

更新：

对于之前阅读这篇文章的人，我为我的错误道歉。标准上下文菜单和从 PopupWindow 继承的类不会出现此问题。这个类负责显示菜单，当获得焦点时，它不能处理手机上按下按钮的声音（对于 2.2 版，正如我上面写的）。如果您移开焦点，应用程序将无法正常运行。作为一个选项，我想在我们调用菜单时阻止 Activity，就像对标准上下文菜单所做的那样，即能够处理仅在弹出窗口内单击，以及剩余区域有阴影。有人知道怎么做吗？

# c# - 在选择时更改列表视图内文本块的字体颜色

> ID：16149041
> 
> 赞同：0
> 
> 时间：2013-04-22T13:59:09.100
> 
> 标签：c#, xaml, windows-8, datatemplate, listviewitem

我正在尝试更改列表视图项目时，它是列表视图项目的颜色。listview项的数据模板如下：

```
 <DataTemplate x:Key="DataTemplate">
    <Grid Height="47" VerticalAlignment="Stretch" Width="{Binding tbIng.Width}">
      <TextBlock x:Name="tbIng" FontFamily="{StaticResource Neutra2Text-Book}" FontSize="23" Text="50g of butter" HorizontalAlignment="Left" VerticalAlignment="Center" Padding="2"/>
    </Grid> 
  </DataTemplate> 
```

我正在尝试使用混合来查找我需要更改的内容，使用状态窗口，但我似乎找不到文本块。如果我右键单击列表视图-> 编辑模板-> 编辑当前然后我得到数据模板但不能使用状态窗口。这是一个 Windows 8 应用程序。

我想在 xaml 中执行此操作，而不是代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:49:25.523

在您的 StandardStyles.xaml 文件中添加下面提到的代码并更改您想要的颜色：

```
<SolidColorBrush x:Key="ListViewItemSelectedForegroundThemeBrush" Color="Red" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:50:17.603

在 Blend 中，您可以更改生成的项目容器 (ItemContainerStyle) 以覆盖 ListView 项目的所有状态和属性。为此，请使用如图所示的上部菜单：

![在此处输入图像描述](https://i.stack.imgur.com/6AYru.png)

并编辑与按下、选定等相关的状态...

![在此处输入图像描述](https://i.stack.imgur.com/0NNx7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:39:53.713

我可以想到2条路径：

*   您可以使用独立的全局/公共变量并绑定到它。所以当`ViewState`改变时`DataTemplate`，然后`TextBlock`背景将根据这个变量改变颜色。
*   `Binding`仅为此传递对象本身中的变量。例如，如果您绑定到表中的行 - 只需添加另一列具有`TextBlock`背景值并绑定到它

# r - ggplot 0.9.3 与 facet_wrap、free scales 和 coord_flip 的问题

> ID：16149043
> 
> 赞同：7
> 
> 时间：2013-04-22T13:59:20.920
> 
> 标签：r, ggplot2

示例演示中的这个简单代码在 0.9.3 中不再有效。

```
require(ggplot2)
p <- qplot(displ, hwy, data = mpg)
p + facet_wrap(~ cyl, scales = "free_y") + coord_flip() 
```

上面的代码现在产生错误：

```
Error in facet_render.wrap(plot$facet, panel, plot$coordinates, plot_theme(plot),  : 
  ggplot2 does not currently support free scales with a non-cartesian coord or coord_flip. 
```

有什么解决方法可以得到类似的东西。谢谢！

==================================================== ==== 第二次尝试

最后来创建一个小例子。这是一种重现的方法：

数据集：d.csv：

```
"Priority","Owner","Project"
"Medium","owner7","Team4"
"Medium","owner1","Team1"
"Low","","Team3"
"High","owner6","Team3"
"Medium","","Team4"
"Medium","owner3","Team1"
"Medium","owner2","Team1"
"Medium","owner5","Team2"
"Low","owner4","Team2"
"Critical","","Team2"
"Medium","owner2","Team1"
"High","","Team4" 
```

代码：

```
data <- read.csv(file="d.csv",head=TRUE)
attach(data)

p3 <- ggplot(data,aes(x=Owner,fill=Priority))+
geom_bar(aes(y=..count..)) + 
facet_wrap(~ Project, nrow=2, scales="free") +
opts(legend.position="none") 
```

这会创建一个多面图，但我需要翻转轴。以前，添加 coord_flip() 可以解决问题，但现在新的 ggplot 不允许同时使用自由比例和 coord_flip。有没有其他方法可以转动刻面轴？自由秤对我很重要。感谢您的任何指示。

# javascript - 使用没有纬度/经度的 Google 地图 JS SDK 添加地图标记？

> ID：16149044
> 
> 赞同：2
> 
> 时间：2013-04-22T13:59:23.510
> 
> 标签：javascript, google-maps, maps

有没有办法在不使用坐标的情况下使用 Google Maps JS SDK 添加地图标记（即使用完整地址）？

我知道静态图像 API 可以做到这一点：[http ://maps.googleapis.com/maps/api/staticmap?center=501+Diplomat+Parkway+Hallandale+Beach+33009+United+States&zoom=14&size=240x240&maptype=roadmap&markers =颜色：绿色%7C501+外交官+百汇+哈兰代尔+海滩+33009+美国+美国&传感器=false](http://maps.googleapis.com/maps/api/staticmap?center=501+Diplomat+Parkway+Hallandale+Beach+33009+United+States&zoom=14&size=240x240&maptype=roadmap&markers=color:green%7C501+Diplomat+Parkway+Hallandale+Beach+33009+United+States&sensor=false)

不幸的是，我需要更多的交互性，所以静态图像 API 是不够的。

该文档仅指经纬度：[https ://developers.google.com/maps/documentation/javascript/reference#MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

我试图将其设置为地址字符串，但没有奏效。

到目前为止，我唯一的选择似乎是使用地理编码 API。我希望这不是唯一的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:11:28.047

抱歉，但我认为 Google 没有选项或网络服务可以通过传递地址直接添加标记。目前，您必须检索地址的纬度/经度，然后添加您的标记...

也许您可以直接使用以下代码：

```
var geocoder = new GClientGeocoder();

var address = "Your address";
geocoder.getLatLng(address, function(point) {
         var latitude = point.y;
         var longitude = point.x;  

         // use here the lat/lng values to add your marker        
}); 
```

希望这可以帮助 ！再见 ！

# ios - 使用 UIWebview 禁用 IOS 应用程序中的缓存

> ID：16149046
> 
> 赞同：1
> 
> 时间：2013-04-22T13:59:25.527
> 
> 标签：ios, objective-c, caching, request

我有一个应用程序 IOS，它每 5/10 秒加载相同的 url 但内容不同。在我的网站上，我计算了我的应用程序调用我的网址 websie 的频率。当我在浏览器 (safari/chrome/fiefox...) 中调用我的网站时，我的网站计算的次数很多。当我用我的应用程序调用我的网站时。我的网站不计算好次数。它更低。

我认为这是由于缓存。如何在 Uiwebview IOS 应用程序上禁用缓存？我的代码中已经`[[NSURLCache sharedURLCache] removeAllCachedResponses];`包含我的请求，但我认为这是我加载 UIwebview 的时候。

```
NSString *html = @"<head></head><body style='padding:0;margin:0;'><script src='http://url_with_content.com'></SCRIPT></body>";
NSString *script = [[NSString alloc] initWithFormat:@"%@", html];
[adView loadHTMLString:script baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:24:10.080

尝试这个：

```
// Clear all Cookies and cache
[[NSURLCache sharedURLCache] removeAllCachedResponses];
NSHTTPCookie *cookie;
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (cookie in [storage cookies]) {
    [storage deleteCookie:cookie];
} 
```

# itext - 如何使用飞碟显示占据整个页面顶部的图像？

> ID：16149050
> 
> 赞同：2
> 
> 时间：2013-04-22T13:59:47.260
> 
> 标签：itext, flying-saucer, margin

我正在尝试使用带有 itext 5 的飞碟来创建一个 pdf，其中包含文本以及一些占据页面整个上半部分的图像，包括页边距。使用宽度和高度的 css 属性，并通过使图像浮动，我可以让图像显示在页面顶部，但它仍然（当然）在页面的边缘内。当我试图规避这个时，说

```
margin-top: -1in; 
```

图像不会移动到当前页面的边缘，而是移动到前一页。

如何使图像移动到页边距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:57:01.427

如果您的图像是在`body`HTML 页面中定义的，我不知道有什么方法可以将它移到页边距。

但是，您可以将图像定义为页面的背景。

这将是这样的：

```
@page {
    size: A4;
    margin: 20mm; 
    background-image:url('http://xxx/your-image.png');
    background-repeat:no-repeat
} 
```

在这种情况下，徽标位于页面的左上角，从页边距开始。

请注意，即使使用该`no-repeat`选项，图像也会在 PDF 文档的每一页上重复。

* * *

如果您只需要在第一页上显示图像，我会建议另一种方法：为第一页定义一个特定的标题。

例如像这样：

```
<html>
<head>
<style>
   @page {
       size: A4;
       margin: 25mm; 
   }
   /* Display header only on first page */
   @page :first {
       @top-center {content: element(header);}
   }    
   #header {
       position: running(header);
       height:25mm;
       margin-left:-25mm;
   }
</style>
</head>
<body>
    <div id="header">
       <img src="http://xxx/your-image.png" />
    </div>
</body>
</html> 
```

页眉将从页边空白开始并跨越页面的正文。由于只为第一页定义，不再重复。

# java - 一个活动上的第二个按钮关闭 android 应用程序

> ID：16149056
> 
> 赞同：1
> 
> 时间：2013-04-22T14:00:01.243
> 
> 标签：java, android, eclipse

我有一个应用程序，我需要能够从一个活动切换到下一个活动，而且在第一个活动上，有一个温度转换器，它使用一个按钮来计算答案。这个按钮曾经可以工作，但由于我更改了 oncreate 以允许在活动之间切换工作，它已停止工作，现在只是关闭应用程序。

```
public class MainActivity extends Activity {
    private EditText text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button next = (Button) findViewById(R.id.Button01);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), SecondScreen.class);
                startActivityForResult(myIntent, 0);
            }
        });
    }

    // This method is called at button click because we assigned the name to the
    // "OnClick property" of the button
    public void onClick(View view) {
        switch (view.getId()) {
        case R.id.button1:
            RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0);
            RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1);
            if (text.getText().length() == 0) {
                Toast.makeText(this, "Please enter a valid number", Toast.LENGTH_LONG).show();
                return;
            }
            float inputValue = Float.parseFloat(text.getText().toString());
            if (celsiusButton.isChecked()) {
                text.setText(String.valueOf(convertFahrenheitToCelsius(inputValue)));
                celsiusButton.setChecked(false);
                fahrenheitButton.setChecked(true);
            }
            else {
                text.setText(String.valueOf(convertCelsiusToFahrenheit(inputValue)));
                fahrenheitButton.setChecked(false);
                celsiusButton.setChecked(true);
            }
            break;
        }
    }

    // Converts to celsius
    private float convertFahrenheitToCelsius(float fahrenheit) {
        return ((fahrenheit - 32) * 5 / 9);
    }

    // Converts to fahrenheit
    private float convertCelsiusToFahrenheit(float celsius) {
        return ((celsius * 9) / 5) + 32;
    }
 } 
```

logcats 是空的，但这是在另一部分

```
 [2013-04-22 14:45:24 - ddms] Can't bind to local 8888 for debugger
   [2013-04-22 15:04:58 - Unexpected error while launching logcat. Try reselecting the                               device.] device not found
   com.android.ddmlib.AdbCommandRejectedException: device not found
   at com.android.ddmlib.AdbHelper.setDevice(AdbHelper.java:752)
   at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:373)
   at com.android.ddmlib.Device.executeShellCommand(Device.java:462)
   at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:110)
   at java.lang.Thread.run(Unknown Source)
   [2013-04-22 15:07:18 - ddms] Can't bind to local 8888 for debugger

   4-22 15:26:56.392: W/Trace(909): Unexpected value from nativeGetEnabledTags: 0
   04-22 15:26:56.397: W/Trace(909): Unexpected value from nativeGetEnabledTags: 0
   04-22 15:26:56.417: D/AndroidRuntime(909): Shutting down VM
   04-22 15:26:56.417: W/dalvikvm(909): threadid=1: thread exiting with uncaught              exception (group=0x40a70930)
   04-22 15:26:56.447: E/AndroidRuntime(909): FATAL EXCEPTION: main
   04-22 15:26:56.447: E/AndroidRuntime(909): java.lang.IllegalStateException: Could not execute method of the activity
   04-22 15:26:56.447: E/AndroidRuntime(909): at android.view.View$1.onClick(View.java:3597)
   04-22 15:26:56.447: E/AndroidRuntime(909): at android.view.View.performClick(View.java:4202)
   04-22 15:26:56.447: E/AndroidRuntime(909): at android.view.View$PerformClick.run(View.java:17340)
  04-22 15:26:56.447: E/AndroidRuntime(909): at  android.os.Handler.handleCallback(Handler.java:725)
  04-22 15:26:56.447: E/AndroidRuntime(909): at android.os.Handler.dispatchMessage(Handler.java:92)
  04-22 15:26:56.447: E/AndroidRuntime(909): at android.os.Looper.loop(Looper.java:137)
  04-22 15:26:56.447: E/AndroidRuntime(909): at android.app.ActivityThread.main(ActivityThread.java:5039)
  04-22 15:26:56.447: E/AndroidRuntime(909): at java.lang.reflect.Method.invokeNative(Native Method)
  04-22 15:26:56.447: E/AndroidRuntime(909): at java.lang.reflect.Method.invoke(Method.java:511)
  04-22 15:26:56.447: E/AndroidRuntime(909): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
  04-22 15:26:56.447: E/AndroidRuntime(909): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
   04-22 15:26:56.447: E/AndroidRuntime(909): at dalvik.system.NativeStart.main(Native Method)
   04-22 15:26:56.447: E/AndroidRuntime(909): Caused by: java.lang.reflect.InvocationTargetException
   04-22 15:26:56.447: E/AndroidRuntime(909): at java.lang.reflect.Method.invokeNative(Native Method)
   04-22 15:26:56.447: E/AndroidRuntime(909): at java.lang.reflect.Method.invoke(Method.java:511)
   04-22 15:26:56.447: E/AndroidRuntime(909): at android.view.View$1.onClick(View.java:3592)
   04-22 15:26:56.447: E/AndroidRuntime(909): ... 11 more
   04-22 15:26:56.447: E/AndroidRuntime(909): Caused by: java.lang.NullPointerException
   04-22 15:26:56.447: E/AndroidRuntime(909): at com.example.assignment2project.MainActivity.tempConverterClick(MainActivity.java:42)
   04-22 15:26:56.447: E/AndroidRuntime(909): ... 14 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:33:37.083

我认为存在冲突，您似乎没有覆盖该`onClick`方法，因此我假设您已将`onClick`xml 中的属性定义为`onClick`，而不是通用的 click 方法，让我们尝试以下操作：

在 xml 中，将 定义`onClick`为如下所示：`tempConverterClick`

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="tempConverterClick"
    android:text="@string/my_button_txt" /> 
```

* * *

现在在 Java 方面，让我们首先测试一下`Toast`：

```
public void tempConverterClick(View view) {
    Toast.makeText(this, "Temp Converter click worked!", Toast.LENGTH_LONG).show();
} 
```

如果可行，那么让我们在这个新的点击处理程序中尝试您的初始代码：

```
public void tempConverterClick(View view) {
    switch (view.getId()) {
    case R.id.button1:
        RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0);
        RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1);
        if (text.getText().length() == 0) {
            Toast.makeText(this, "Please enter a valid number", Toast.LENGTH_LONG).show();
            return;
        }
        float inputValue = Float.parseFloat(text.getText().toString());
        if (celsiusButton.isChecked()) {
            text.setText(String.valueOf(convertFahrenheitToCelsius(inputValue)));
            celsiusButton.setChecked(false);
            fahrenheitButton.setChecked(true);
        }
        else {
            text.setText(String.valueOf(convertCelsiusToFahrenheit(inputValue)));
            fahrenheitButton.setChecked(false);
            celsiusButton.setChecked(true);
        }
        break;
    }
} 
```

*为避免将来的混淆以及试图提供帮助的人的混淆，我强烈建议您更改命名约定。创建与动作、目的等相关的 ID。拥有`R.id.Button01`并且`R.id.button1`非常令人困惑*

* * *

**编辑**

看来，当您更改时，`onCreate`您可能已经删除了`EditText`实例化。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Add this line with the appropriate ID reference
    text = (EditText)findViewById(R.id.your_edit_text_id);

    Button next = (Button) findViewById(R.id.Button01);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), SecondScreen.class);
            startActivityForResult(myIntent, 0);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:14:41.073

在 oncreate 方法之外定义您的 switch case 方法，并在 oncreate 的 onclick 方法中使用您的参数调用它。它就像 checkbuttonclick(buttonid);

你的checkbuttonclick（int id）在哪里。将包含 switch case 的方法定义。

# salesforce - 如何在 visualforce 页面中为用户显示输入字段？

> ID：16149057
> 
> 赞同：3
> 
> 时间：2013-04-22T14:00:04.843
> 
> 标签：salesforce, visualforce

我只是想显示一个输入字段，它可以让我捕获用户，因此我可以按所有者从自定义对象中过滤列表。CustomObject__c.OwnerId 是不可写的，所以当我将它绑定到输入字段时，我的页面上什么也没有显示！我不想有一个用户的下拉列表（可能有数百个！），我不想创建一个与用户对象相关的带有可写字段的虚假自定义对象。如何获得只读字段的输入字段功能，就好像它是可写的一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:54:01.917

`OwnerId`字段**应该**是可写的。除非您的字段安全权限被弄乱，或者例如该字段被隐藏，因为它是主从关系中的一个细节。

但是当你设法让它工作时，你会发现它很可能是一个有点奇怪的查找，它可以指向用户或队列。

![案例所有者查找字段](https://i.stack.imgur.com/p89vc.png)

如果您对此感到满意 - 太好了，只需检查现场周围的安全性即可。如果您真的只需要查找用户 - 检查您是否有任何自定义`Lookup(User)`字段？您可以在控制器中创建该类型的虚拟记录，并且不对其进行任何 DML，只需使用它会进行查找的事实。

如果您没有任何自定义 - 我认为客户/联系人/机会所有者必须是用户（不能有队列）。您可能必须强制`<apex:input field... required="false"/>`，但除此之外应该可以吗？

# sql - 如何按组而不是数字对列进行排序？

> ID：16149058
> 
> 赞同：0
> 
> 时间：2013-04-22T14:00:05.390
> 
> 标签：sql, db2

嗨，我正在使用 sql db2 创建 age_bands，如下所示：

```
case when age between 0 and 1 then '0-1'
when age between 2 and 3 then '2-3'
.
.
.
when age between 10 and 11 then '10-11' 
```

当然，当您订购时，您会得到以下内容：

```
0-1
10-11
2-3 
```

这不是我想要的。我如何按实际 age_bands 排序以获得：

```
0-1
2-3
10-11 
```

?

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:06:42.213

就这样做

```
ORDER BY age 
```

年龄当然还在上升，即使`age_bands`CASE 表达式不是

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:58:01.990

如前所述，按年龄排序是最简单的。

但是，如果您需要分配波段编号或代码，或者需要按波段的总数或统计数据，或波段内的其他排序，那么您可能需要以不同的方式处理此问题。您可能想要一个 AgeBand 表，定义年龄范围，可能是乐队编号或代码，可能是年龄乐队的名称，或其他“主”数据。

如果是这种情况，你会得到你的乐队代码

```
left join AgeBand ab   on details.age >= ab.FromAge and details.age <= ab.ToAge
...
order by ab.BandID, ... 
```

但是，如果您不需要 AgeBand 表，并且想继续使用 CASE 语句计算年龄段代码，那也可以，并且可能就是您所需要的。

您可以做的是将当前查询放入公共表表达式或 CTE 中以准备数据，然后使用您分配给 CTE 的名称作为源表继续执行 SELECT 语句。

```
WITH q AS
(SELECT ...
        CASE WHEN ...  THEN "00-01"
             WHEN ...  THEN "02-03"
             ...
             WHEN ...  THEN "10-11"
        END as bandcode
   FROM yourinputdata as i
   WHERE ...
)
SELECT bandcode, ...
  FROM q
  ORDER BY bandcode, ...
; 
```

WITH 和引号之间的查询是公用表表达式。它在第一行被命名为“q”，然后在底部被引用。控制最终结果的是底部全选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:00:46.067

我认为最简单的方法是：

```
order by min(age) 
```

# c# - C# XDoc 解析 XML 字符串

> ID：16149059
> 
> 赞同：2
> 
> 时间：2013-04-22T14:00:07.483
> 
> 标签：c#, xml, parsing

我通过 XML API 接收数据，它返回如下节点：

```
<?xml version='1.0' encoding='utf-8' ?>

<location>
  <name>&Oslash;L Shop</name>
</location> 
```

我无法控制响应，但我正在尝试将其加载到 XDocument 中，但由于无效字符而失败。

我能做些什么来正确加载这个负载吗？我想使解决方案尽可能通用，因为可能存在其他无效字符。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:06:16.390

您可以使用更能容忍无效输入的 html 解析器。例如; （使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)）此代码可以正常工作。

```
var doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(xml);
var name = doc.DocumentNode.Descendants("name").First().InnerText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:09:46.427

您不能在 XDocument.Parse 输入文本中使用“ **&** ”符号。将其替换为“ **&** ;” ， 像这样

```
<?xml version='1.0' encoding='utf-8' ?>

<location>
  <name>&amp;Oslash;L Shop</name>
</location> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:05:52.170

为什么不在将响应加载*到*`XDocument`. 您可以为此使用正则表达式，应该相对简单。

请参阅[C# 中的转义无效 XML 字符](https://stackoverflow.com/questions/8331119/escape-invalid-xml-characters-in-c-sharp)

# com - 在 F# 中嵌入互操作类型

> ID：16149063
> 
> 赞同：4
> 
> 时间：2013-04-22T14:00:12.573
> 
> 标签：com, f#, com-interop

我们可以在 F# 中嵌入互操作类型吗？

首先，我在参考资料中看不到这样做的选项。

其次，如果我在 C# 中嵌入类型，它会告诉我引用接口而不是具体类：

```
//DBEngine is the interface DBEngineClass is the concrete class

//if I dont embed the interop

//Valid
var dbe = new Microsoft.Office.Interop.Access.Dao.DBEngineClass();
//Valid
var dbe = new Microsoft.Office.Interop.Access.Dao.DBEngine();

//if I do embed the interop
//Invalid
var dbe = new Microsoft.Office.Interop.Access.Dao.DBEngineClass();
//Valid
var dbe = new Microsoft.Office.Interop.Access.Dao.DBEngine(); 
```

但是，F# 总是希望引用具体类。有没有解决的办法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:31:37.653

Tao Liu 谈到了您必须从 F# 中完成的一些额外工作，以发现要[在此处](http://apollo13cn.blogspot.se/2012/04/trick-in-f-interop.html)实例化的正确类。据我所知，没有办法嵌入互操作类型。我很高兴被证明是错误的。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T22:09:51.797

也许我不明白你的问题，但这工作正常，参考 v14.0：

```
open Microsoft.Office.Interop.Access.Dao
let dbe = DBEngineClass() :> DBEngine 
```

# paypal - 有关 PayFlow Pro API 的问题以及在哪里下载最新版本？（paypal_base.dll，版本 5.6.65.1，运行时 v1.1.4322）

> ID：16149064
> 
> 赞同：0
> 
> 时间：2013-04-22T14:00:13.500
> 
> 标签：paypal, payment-gateway, payflowpro

我经常对 PayPal 感到困惑（x.com 与 developer.paypal.com、API 名称等），需要帮助找到我目前在项目中使用的最新 API。我有一个对此 DLL 的 Visual Studio 2010 C# 引用：

> paypal_base（属性：版本 5.6.65.1，运行时版本：v1.1.4322）

问题：

Q1。最新下载的网址是什么？

Q2。我下载了 payflow_dotnet_setup_v4.33.zip 并且正在阅读“适用于 .NET 开发人员指南的 PayPal Payflow SDK”，但是没有提及我已经在使用的任何当前调用看起来像这样。为什么？

> ```
>  DoCaptureRequestType pp_request = new DoCaptureRequestType();
>         pp_request.AuthorizationID = authorizationId;
>         return (DoCaptureResponseType)caller.Call("DoCapture", pp_request); 
> ```

Q3。这个 API 在 REST API 中被弃用了吗？

我很混乱。

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:09:19.993

X.com 是 PayPal 开发者网站的所在地，但它正在迁移到[developer.paypal.com](http://developer.paypal.com)。[最终，您可以在developer.paypal.com](http://developer.paypal.com)上找到 Payflow、PayPal 等开始处理付款所需的一切。您可以在此处找到最新版本的[PayPal SDK](https://developer.paypal.com/docs/classic/lifecycle/sdks/)。REST API 是较新的 API，也可以使用，但是它们仍然是新的，并且并非每个国家/地区都支持它们，并且并非所有功能都可用。

# python - 为什么 matlab 中的循环比 Python 中的慢？

> ID：16149075
> 
> 赞同：-5
> 
> 时间：2013-04-22T14:00:38.103
> 
> 标签：python, performance, matlab, loops

互联网上有许多帖子，其中指出 Matlab 执行循环如此缓慢，因为它是一种解释性语言。但据我所知，Python 也被解释了。

如果 Python 执行循环，为什么它比 Matlab 快得多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:13:34.990

简而言之：可能 Matlab 和 Python 在循环中实现了相似的速度。

您发现的来源可能是比较旧版本的 Matlab，正如@Eitan 提到的那样，新版本具有适当的即时机制，可以大大加快简单循环的速度。

会有一些循环比 python 更快，而那些 Matlab 更快，但在这两种语言之间做出决定时，循环速度可能不是一个相关的考虑因素。

# ios - KeyboardShrinksView 使失去焦点

> ID：16149083
> 
> 赞同：9
> 
> 时间：2013-04-22T14:00:56.143
> 
> 标签：ios, cordova

我对 Phonegap 2.6 (ios) 中包含的 KeyboardShrinksView 功能有疑问。

当我在要包含文本的文本区域中点击时，会出现键盘，并且 webview 会按我的意愿收缩。

问题是我失去了对文本区域的关注，用户必须再次点击文本区域才能开始在其中书写。

有人对这个新功能有同样的问题吗？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-19T21:04:07.467

在您的输入上添加一个点击（或 touchstart）事件，该事件将专注于您的字段。

```
element.on("tap", function(e){element.focus()}); 
```

问题来自这样一个事实，即使用幽灵点击事件在 ios 上完成了焦点。但是当它被触发时，视图已经改变了（因为键盘）。

这个问题在 ios7 上会更加常见，因为 KeyboardShrinksView 是默认行为......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T07:55:06.777

收缩 Web 视图后，尝试编写此代码。

```
 [TextFieldOnWhichFocusIsExpected BecomeFirstResponder]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T19:49:18.947

从 Phonegap 2.9 升级到 3.1 后，我遇到了 iOS 的这个问题。通过将 height=device-height 添加到我的元标记来解决，所以它现在看起来像这样：

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no"> 
```

# git - 拒绝不是合并提交的提交

> ID：16149087
> 
> 赞同：3
> 
> 时间：2013-04-22T14:01:04.650
> 
> 标签：git, git-branch, git-merge, git-workflow

这是我使用的工作流程：

1.  在分支中进行更改`A`。
2.  结帐分行`B`。
3.  合并从一个分支`A`到另一个分支的更改`B`。
4.  同步（推送和拉取）分支`B`到远程分支。
5.  结帐分行`A`。
6.  返回*第 1 步*。

问题是有时我会忘记第 5 步，而不是分支`A`，而是对分支进行更改`B`。

是否可以配置分支`B`以拒绝“常规”提交并仅允许合并提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:04:28.163

我建议不要手动完成这项工作，而是使用[git-flow 之](http://nvie.com/posts/a-successful-git-branching-model/)类的工作流程。

或者您可以编写一个简单的脚本来为您完成这项工作。

如果您更喜欢手动操作，您可以使用[git-hook](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)自动合并您的`B`分支和拉取操作。

# eclipse-plugin - 不能直接从 weblink 安装 Eclipse 插件

> ID：16149095
> 
> 赞同：0
> 
> 时间：2013-04-22T14:01:15.747
> 
> 标签：eclipse-plugin

我的插件采用 zip 文件的形式，位于[http://scg.unibe.ch/wiki/projects/DoodleDebug/DoodleDebug-update-site?view=PRDownloadView](http://scg.unibe.ch/wiki/projects/DoodleDebug/DoodleDebug-update-site?view=PRDownloadView)。从本地文件下载和安装它非常好。但是，如果我将 URL 粘贴到 Eclipse 的对话框中，它会显示类似“未找到存储库”之类的信息。

Eclipse 是否无法直接从 Web 处理 zip 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:27:27.303

您需要在 Web 服务器上托管更新站点。内容是静态的。然后让您的用户将更新站点 URL 添加到软件站点列表。

# winforms - Simple 样式组合框的 KeyDown 事件被引发两次

> ID：16149101
> 
> 赞同：1
> 
> 时间：2013-04-22T14:01:30.583
> 
> 标签：winforms, combobox, keydown

我有带有选项卡和组合框控件的简单 win 表单应用程序。

*   组合框控件的样式为“简单”。
*   选项卡控件具有按键事件。

当我按下组合控件上的 Enter 键时，它会触发**两个**按键事件。如果您将组合样式更改为任何其他样式，则按键事件只会触发我所期望的一个。

有没有人知道为什么我会为单次输入按键获得两个按键事件？我在 Microsoft 网站上发现了类似的问题，但这与 .NET 1.0 有关。

[http://support.microsoft.com/kb/814970](http://support.microsoft.com/kb/814970)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:50:24.400

它可能与具有 Simple DropDown 样式的预定义行为的 Enter 键有关。

您可以在 KeyDown 事件中尝试此解决方法：

```
void comboBox1_KeyDown(object sender, KeyEventArgs e) {
  e.SuppressKeyPress = true;
  // do stuff
} 
```

您可以猜到，KeyPress 事件现在不会触发。

如果您仍需要处理 KeyPress 事件中的内容，您可以尝试以下解决方法：

```
void comboBox1_KeyPress(object sender, KeyPressEventArgs e) {
  if (e.KeyChar == (char)Keys.Enter) {
    e.Handled = true;
  } else {
    // do stuff
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T16:07:39.143

Combobox 中的 KeyPress 只接受 'char' 键。为了您的目的，请为组合框和 e.Handled 属性使用 KeyDown 事件。

然后你的代码将工作，看起来像：

```
private void comboBox2_KeyDown(object sender, KeyEventArgs e)
        {

            if (e.KeyCode == Keys.Enter)
            {
                comboBox2.KeyDown += new KeyEventHandler(comboBox2_SelectionChangeCommitted);
            }

            if (e.KeyCode != Keys.Enter)
            {

                e.Handled = false;

            }
        } 
```

# excel - 使用 VBA 在单个 Excel 单元格中将文本分成多行

> ID：16149102
> 
> 赞同：1
> 
> 时间：2013-04-22T14:01:34.217
> 
> 标签：excel, vba, cell, line-breaks

所以我一直在寻找如何根据长度划分文本，但找不到任何东西。

我的问题是：在使用 vba 代码的 Excel 中，是否可以在一个单元格中将一行文本分成几行？

我无权访问文本本身，它是通过访问数据库中的查询插入的。话虽如此，我真的不能使用换行符“Chr(10)”来帮助我。

我正在考虑一种方法来区分文本长度是否大于一定数量的字母，可以将其拆分为 2（实际上是更多），然后使用换行符将其连接起来。

我希望我的问题/要求足够清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:06:54.407

如果我没记错 VB 你需要使用 vbLf

如：

```
Dim range
Dim i
Dim split_value
Dim splits() as Variant

range = Range("A1")
split_value = 15
i = 0

' Split them
While( Len(range.Value) > split_value )
    ReDim Preserve splits(i)
    splits(i) = Mid(range.Value, 1, split_value)
    range.Value = Mid(range.Value, split_value + 1)
    i = i + 1
Wend

' Join them
For c = LBound(splits) To UBound(splits)
    range.Value = range.Value & vbLf & splits(c)
Next c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:32:55.843

如果只是为了显示目的，那么我认为有一个更简单的方法。您可以将列宽设置为您喜欢的宽度，并将该列中的单元格设置为 Wrap Text。

您需要注意 Querytable 上的两个设置。“调整列宽”默认不勾选，需要勾选。如果您不这样做，Excel 将使该列更大，并且您选中了 Wrap Text 的事实将无关紧要。“保留单元格格式”默认处于选中状态，需要保持选中状态。这将确保该列的 Wrap text 保持选中状态。

除非您使用固定字体，否则设置列宽并不能保证您获得特定数量的字符。但是，如果您只是想靠近，这应该可行。

# mysql - MySQL中的产量计算

> ID：16149107
> 
> 赞同：0
> 
> 时间：2013-04-22T14:01:49.810
> 
> 标签：mysql, wordpress

我正在尝试根据 Wordpress meta_values 计算产量，并且我正在使用下面的 MySQL 语句，但它不起作用。SUM(returned.meta_value+staked.meta_value)-SUM(staked.meta_value))/SUM(staked.meta_value))*100) 不返回任何值。

有人可以帮我解决下面的表达式有什么问题。

谢谢你。

```
global $post;
$post_author = $post->post_author;
$post_status = 'publish';
$yield = $wpdb->get_var( $wpdb->prepare(
    "
    SELECT (ROUND((((SUM(returned.meta_value+staked.meta_value)-SUM(staked.meta_value))/SUM(staked.meta_value))*100),2),2)
    FROM {$wpdb->posts} p
    JOIN {$wpdb->users} u ON p.post_author = u.ID
    LEFT JOIN {$wpdb->postmeta} staked
        ON p.ID = staked.post_id AND staked.meta_key = 'staked'
    LEFT JOIN {$wpdb->postmeta} returned 
        ON p.ID = returned.post_id AND returned.meta_key = 'returned'
    WHERE p.post_author = %s AND p.post_status = %s
    ",
    $post_author, $post_status
    ) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:31:37.153

您的查询没有意义。该`select`语句使用别名`balance`和`bet`. 该`from`子句具有别名`pm`和`posts`.

你是这个意思吗？

```
SELECT (ROUND((((SUM(pm.meta_value+pm.meta_value)-SUM(pm.meta_value))/SUM(pm.meta_value))*100),2),2)
FROM {$wpdb->postmeta} pm INNER JOIN
     {$wpdb->posts} p
     ON pm.post_id = p.ID
WHERE pm.meta_key = %s AND pm.meta_key1 = %s AND p.post_author = %s AND
      Month(p.post_date) = MONTH(CURRENT_DATE) AND p.post_status = %s 
```

# jsf - h:selectOneMenu 用于所有实体的通用转换器，无需一次又一次地调用 DB

> ID：16149109
> 
> 赞同：3
> 
> 时间：2013-04-22T14:01:59.797
> 
> 标签：jsf, jsf-2, javabeans, converter, selectonemenu

我想从中获取选定的对象`<h:selectOneMenu>`，但问题是我找不到适用于所有类型实体的任何通用转换器。

我的第一个问题是，是否有适用于所有类型实体的通用转换器？我不想再次为每个其他实体编写另一个转换器。我的第二个问题是，有没有办法在没有任何转换器的情况下获得选定的对象？我不想一次又一次地调用数据库。

我有一个具有和属性的`Car`实体。`id``name`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:05:47.973

> *我的第一个问题是，是否有适用于所有类型实体的通用转换器？*

这在标准 JSF 中确实不存在。JSF 实用程序库[OmniFaces](http://omnifaces.org)在其分类中有这样一个转换器，`omnifaces.SelectItemsConverter`. 您需要做的就是将其声明为一个`UISelectOne`或`UISelectMany`组件的转换器，如下所示：

```
<h:selectOneMenu ... converter="omnifaces.SelectItemsConverter"> 
```

[另请`SelectItemsConverter`](http://showcase.omnifaces.org/converters/SelectItemsConverter)参阅[陈列柜](http://showcase.omnifaces.org/converters/SelectItemsConverter)。此转换器依赖于`toString()`对象项的 。还有另一个， the ，它依赖于选项列表中对象项的索引，另[请](http://showcase.omnifaces.org/converters/SelectItemsIndexConverter)`omnifaces.SelectItemsIndexConverter`参见[showcase](http://showcase.omnifaces.org/converters/SelectItemsIndexConverter)。[`SelectItemsIndexConverter`](http://showcase.omnifaces.org/converters/SelectItemsIndexConverter)

当前没有其他 JSF 组件/实用程序库提供相同的功能。

* * *

> *第二个问题是，有没有办法在没有任何转换器的情况下获得选定的对象？*

不，只需使用 OmniFaces 即可，这样您就无需创建自定义转换器来访问数据库。或者，如果您想做得过火，请创建一个自定义渲染器`<h:selectOneMenu>`，将项目索引渲染为选项值并能够将其设置为模型值，但这比简单的转换器要多得多，您仍然需要做一些额外的工作是为了根据索引从列表中获取所需的对象——这没有任何意义。

### 也可以看看：

*   [如何从数据库中填充 h:selectOneMenu 的选项？](https://stackoverflow.com/questions/6848970/how-to-populate-options-of-hselectonemenu-from-database)
*   [“空转换器”的转换错误设置值](https://stackoverflow.com/questions/4734580/conversion-error-setting-value-for-null-converter)
*   [使用 Java 泛型为实体实现转换器](https://stackoverflow.com/questions/17343032/implement-converters-for-entities-with-java-generics)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T19:23:15.770

似乎应该有一个通用转换器，以便您可以轻松地从下拉列表中选择对象，而无需为每种对象类型编写转换器，也无需调用数据库（如大多数示例所示）。但是我不知道，所以我编写了自己的转换器来做到这一点。请注意，转换器希望对象具有`getId()`返回某种唯一 ID 的方法。如果没有，它将失败。`getMethodName()`如果您需要以编程方式确定要用作键的方法的名称，您可以向 中添加逻辑。请注意，我们在项目中使用 Seam。如果你不使用 Seam，NO_SELECTION_VALUE 部分可能会被删除，以及类上的三个注释。

此代码的灵感来自：[http ://arjan-tijms.omnifaces.org/2011/12/automatic-to-object-conversion-in-jsf.html](http://arjan-tijms.omnifaces.org/2011/12/automatic-to-object-conversion-in-jsf.html)

```
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Collection;

import javax.faces.component.UIComponent;
import javax.faces.component.UISelectItem;
import javax.faces.component.UISelectItems;
import javax.faces.context.FacesContext;
import javax.faces.convert.ConverterException;
import javax.faces.model.SelectItem;

import org.jboss.seam.annotations.Name;
import org.jboss.seam.annotations.faces.Converter;
import org.jboss.seam.annotations.intercept.BypassInterceptors;

/**
 * @author: Jason Wheeler
 * @description Converter for lists (SelectOneMenu, SelectManyMenu, etc)
 * @created: 09/05/2013
 */

@Name("listConverter")
@BypassInterceptors
@Converter
public class ListConverter implements javax.faces.convert.Converter {
    private String NO_SELECTION_VALUE = "org.jboss.seam.ui.NoSelectionConverter.noSelectionValue";

    @Override
    public String getAsString(FacesContext facesContext, UIComponent component, Object obj) {
        if (obj == null) {
            return NO_SELECTION_VALUE;
        } else {
            try {
                Method method = obj.getClass().getMethod(getMethodName(obj));
                return String.valueOf(method.invoke(obj));
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        }
    }

    public String getMethodName(Object obj) {
        return "getId";
    }

    @Override
    public Object getAsObject(FacesContext facesContext, UIComponent component, String val) throws ConverterException {
        if (val == null) {
            return null;
        } else if (val.equals(NO_SELECTION_VALUE)) {
            return null;
        } else {
            for (SelectItem item : getSelectItems(component)) {
                if (val.equals(getAsString(facesContext, component, item.getValue()))) {
                    return item.getValue();
                }
            }
            return null;
        }
    }

    protected Collection<SelectItem> getSelectItems(UIComponent component) {
        Collection<SelectItem> collection = new ArrayList<SelectItem>();

        for (UIComponent child : component.getChildren()) {
            if (child instanceof UISelectItem) {
                UISelectItem ui = (UISelectItem) child;
                SelectItem item = (SelectItem) ui.getValue();
                collection.add(item);
            } else if (child instanceof UISelectItems) {
                UISelectItems ui = (UISelectItems) child;
                Object value = ui.getValue();
                collection.addAll((Collection<SelectItem>) value);
            }
        }

        return collection;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T22:25:42.700

我刚刚采用了[@Bigwheels](https://stackoverflow.com/users/280574/bigwheels)代码，对 JSF 2.0 进行了一些更改，它解决了我的问题：

```
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import javax.faces.component.UIComponent;
import javax.faces.component.UISelectItem;
import javax.faces.component.UISelectItems;
import javax.faces.context.FacesContext;
import javax.faces.convert.ConverterException;
import javax.faces.convert.FacesConverter;
import javax.faces.model.SelectItem;
import javax.persistence.Id;

@FacesConverter("selectItemConverter")
public class SelectItemConverter implements javax.faces.convert.Converter {

    private String NO_SELECTION_VALUE = "SELECIONE";

    @Override
    public String getAsString(FacesContext facesContext, UIComponent component, Object obj) {
        if (obj == null) {
            return NO_SELECTION_VALUE;
        } else {
            try {
                Method method = obj.getClass().getMethod(getIdMethodName(obj));
                return String.valueOf(method.invoke(obj));
            } catch (Exception e) {
                throw new ConverterException(e);
            }
        }
    }

    public String getIdMethodName(Object obj) {
        try {
            Field[] fieldList = obj.getClass().getDeclaredFields();

            Field id = null;
            for (Field field : fieldList) {
                if(field.isAnnotationPresent(Id.class)) {
                    id = field;
                    break;
                }
            }
            return "get" + capitalize(id.getName());
        } catch(Exception ex) {
            throw new ConverterException(ex);
        }
    }

    private String capitalize(final String line) {
        return Character.toUpperCase(line.charAt(0)) + line.substring(1);
    }

    @Override
    public Object getAsObject(FacesContext facesContext, UIComponent component, String val) throws ConverterException {
        if (val == null) {
            return null;
        } else if (val.equals(NO_SELECTION_VALUE)) {
            return null;
        } else {
            for (Object item : getSelectItems(component)) {
                if (val.equals(getAsString(facesContext, component, item))) {
                    return item;
                }
            }
            return null;
        }
    }

    protected List getSelectItems(UIComponent component) {
        List list = new ArrayList();
        for (UIComponent child : component.getChildren()) {
            if (child instanceof UISelectItem) {
                UISelectItem ui = (UISelectItem) child;
                SelectItem item = (SelectItem) ui.getValue();
                list.add(item);
            } else if (child instanceof UISelectItems) {
                UISelectItems ui = (UISelectItems) child;
                Object value = ui.getValue();
                list.addAll((Collection<SelectItem>) value);
            }
        }
        return list;
    }
} 
```

# vba - 总和变量列

> ID：16149114
> 
> 赞同：0
> 
> 时间：2013-04-22T14:02:12.633
> 
> 标签：vba, excel

在下面的代码行中，我试图对变量范围（U 列）求和。您能否让我知道我在代码中做错了什么（感谢您的帮助）：

有问题的代码行：

```
Sheets(gcsReportSheetName).Cells(LCounter, 3).FormulaR1C1 = "=sum(" & rng.Value & "!" & Lsumcolumn & ":" & Lsumcolumn & ")" 
```

完整的代码。

```
Sub Report()

Dim rng As Range
Dim LCounter As Long
Dim sLsheet As String
Dim Lsumcolumn As Long
Set gRwksconfigeration = Sheets("Config")
Set gRnct_Funds_2 = gRwksconfigeration.Range(CT_Funds_2)

LCounter = 3

For Each rng In gRnct_Funds_2

    Sheets(gcsReportSheetName).Cells(LCounter, 1) = rng.Value

    If rng.Value = "" Then

            Exit Sub

        Else

            Sheets(gcsReportSheetName).Cells(LCounter, 2) = Sheets(rng.Value).Cells.Find(What:="Value", After:=Cells(1, 1), LookIn:=xlValues, LookAt:= _
                    xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, MatchCase:= _
                    False, SearchFormat:=False).End(xlDown).Value
            Lsumcolumn = Sheets(rng.Value).Cells.Find(What:="illiquid check", After:=Cells(1, 1), LookIn:=xlValues, LookAt:= _
                    xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, MatchCase:= _
                    False, SearchFormat:=False).Column
            Sheets(gcsReportSheetName).Cells(LCounter, 3).FormulaR1C1 = "=sum(" & rng.Value & "!" & Lsumcolumn & ":" & Lsumcolumn & ")"

            LCounter = LCounter + 1

    End If

Next

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:15:26.137

您的工作表名称 ( `rng.Value`) 是否包含空格？如果是这样，您需要在名称周围添加单引号，如下所示：

```
='Test Sheet'!A:A 
```

此外，您使用的是 R1C1 表示法，它与 A1 表示法略有不同（[请参阅此处的更多信息](https://office.microsoft.com/en-us/help/about-cell-and-range-references-HP005198323.aspx)）。以下两个示例都应该有效。

* * *

您使用 R1C1 表示法的代码应如下所示：

```
Sheets(gcsReportSheetName).Cells(LCounter, 3).FormulaR1C1 = "=sum('" & rng.Value & "'!C" & Lsumcolumn & ")" 
```

* * *

您使用 A1 表示法的代码应如下所示：

```
sSumColumn = Choose(Lsumcolumn,"A","B","C","D","E","F","G") ' Expand this to include all column headers.

Sheets(gcsReportSheetName).Cells(LCounter, 3).Formula = "=sum('" & rng.Value & "'!" & sSumColumn & ":" & sSumColumn & ")" 
```

即使您的工作表名称不包含空格，此语法仍应有效。

* * *

`Choose`关于获取列标题的功能的额外说明...

如果您正在查看大量列，写出来这可能会很痛苦，所以我有一个函数可以更简单地获取这个值（**完全公开，我从[互联网上的另一个站点](http://codekeep.net/snippets/1f5693f7-390e-4c9e-ac10-240f5d8b30a6.aspx)抓取了这个，但是自己更新了 2007/2010/2013 版本的 Excel 工作**）：

```
Public Function ColumnLetter(ColumnNumber As Integer) As String

    If ColumnNumber > 26 Then

        If ColumnNumber > 702 Then
            ' Compatible with Excel 2007+ extension of columns
            ColumnLetter = Chr(Int((Int((ColumnNumber - 1) / 26) - 1) / 26) + 64) & _
                Chr((Int((ColumnNumber - 1) / 26) - 1) Mod 26 + 65) & _
                Chr(((ColumnNumber - 1) Mod 26) + 65)
        Else
            ' 1st character:  Subtract 1 to map the characters to 0-25,
            '                 but you don't have to remap back to 1-26
            '                 after the 'Int' operation since columns
            '                 1-26 have no prefix letter

            ' 2nd character:  Subtract 1 to map the characters to 0-25,
            '                 but then must remap back to 1-26 after
            '                 the 'Mod' operation by adding 1 back in
            '                 (included in the '65')

            ColumnLetter = Chr(Int((ColumnNumber - 1) / 26) + 64) & _
                Chr(((ColumnNumber - 1) Mod 26) + 65)
        End If
    Else
        ' Columns A-Z
        ColumnLetter = Chr(ColumnNumber + 64)
    End If
End Function 
```

代替`Choose`上面的公式，您可以使用`sSumColumn = ColumnLetter(Lsumcolumn)`.

# java - RequestDispatcher.include() 来自自定义标签和 IllegalStateExceptions

> ID：16149115
> 
> 赞同：2
> 
> 时间：2013-04-22T14:02:15.077
> 
> 标签：java, jakarta-ee, servlets, character-encoding

在自定义标记中，我想通过 RequestDispatcher 包含其他内容：

```
RequestDispatcher rd = request.getRequestDispatcher(url);
rd.include(request, response); 
```

但我不知道响应输出流的状态。我目前正在通过将响应和可用于标记的 JspWriter 包装在另一个实现 HttpServletRequest 的对象中来解决此问题。当内部调用 getWriter() 时，它可以正常工作。但是，如果处理请求的代码实际上想要获取原始 OutputStream（我也无法安全地在标签中获取），我会得到 IllegalStateException（因为 getOutputStream() 已经被调用）。

现在我还可以创建一个新的 OutputStream 并将其包装在我的请求包装器中，缓冲它直到 include() 返回，然后获取写入其中的字节并将它们写入 JspWriter。

然而，我的问题是：我应该尝试维护字符编码吗？如：我是否应该“模拟”更多的响应对象，以便我至少可以尝试从我传递到包含和底层输出流的请求包装器中的字符编码集进行转换？这会“足够干净”吗？我应该研究任何实用程序类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:50:57.480

您不能在同一响应中同时使用 getServletOutputStream() 和 getWriter()。

我认为在您的代码中某处您正在使用 getServletOutputStream() 并且包括 JSP 的使用 getWriter()。这导致您出现异常。

请参阅重复的问题。

[java.lang.IllegalStateException：已经在使用输出流](https://stackoverflow.com/questions/15676337/java-lang-illegalstateexception-already-using-output-stream/15676991#15676991)

# git - 更改用户名时在 git 中更新什么？

> ID：16149116
> 
> 赞同：1
> 
> 时间：2013-04-22T14:02:16.477
> 
> 标签：git, github, repository

我刚刚在 Github 中更改了我的用户名。现在我正试图让我所有的本地东西再次工作。我已经做了这些事情，但我认为我遗漏了一些东西：

*   更改 Github 中的用户名
*   更改本地存储库中的 git 用户名
*   更新遥控器，使它们指向正确的地址

我读到我还必须更新 gitmodules。这是什么意思/我该怎么做？此外，由于更改了我的用户名，我在“username.github.io”上的博客不再起作用。我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:57:32.390

如果 GitHub 上的电子邮件地址也发生更改，请不要忘记更改本地存储库中的电子邮件地址。

您可以编辑`.gitmodules`文件以更改给定子模块的上游 repo 的 url，然后运行：

```
git submodule sync 
```

# java - 用Java中的所有枚举值填充列表

> ID：16149117
> 
> 赞同：95
> 
> 时间：2013-04-22T14:02:17.660
> 
> 标签：java, list, enums

我想用枚举的所有可能值填写一个列表
自从我最近爱上了`EnumSet`，我利用`allOf()`

```
EnumSet<Something> all = EnumSet.allOf( Something.class);
List<Something> list = new ArrayList<>( all.size());
for (Something s : all) {
    list.add( s);
}
return list; 
```

**有没有更好的方法**（如在非混淆的一个班轮中）来达到相同的结果？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-04-22T14:05:01.800

我不会首先使用列表，因为 EnumSet 更合适，但你可以这样做

```
List<Something> somethingList = Arrays.asList(Something.values()); 
```

或者

```
List<Something> somethingList =
                 new ArrayList<Something>(EnumSet.allOf(Something.class)); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-25T09:08:23.227

[`Class.getEnumConstants()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getEnumConstants%28%29)

```
List<SOME_ENUM> enumList = Arrays.asList(SOME_ENUM.class.getEnumConstants()); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-22T14:04:54.670

有一个构造函数`ArrayList`是

```
ArrayList(Collection<? extends E> c) 
```

现在，`EnumSet`扩展`AbstractCollection`所以你可以做

```
ArrayList<Something> all = new ArrayList<Something>(enumSet) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-22T14:06:20.633

尝试

```
enum E {
    E1, E2, E3
}

public static void main(String[] args) throws Exception {
    List<E> list = Arrays.asList(E.values());
    System.out.println(list);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T14:05:47.490

```
List<Something> result = new ArrayList<Something>(all); 
```

`EnumSet`是一个 Java 集合，因为它实现了`Set`接口：

```
public interface Set<E> extends Collection<E> 
```

所以你可以用 Collection 做的任何事情都可以用`EnumSet`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T14:04:13.183

这更具可读性：

```
Object[] allValues = all.getDeclaringClass().getEnumConstants(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T14:08:45.437

尝试这个：

```
... = new ArrayList<Something>(EnumSet.allOf(Something.class)); 
```

有`ArrayList`一个带有 . 的构造函数`Collection<? extends E>`。但是只有当你真的想使用时才使用这种方法`EnumSet`。

所有枚举都可以访问方法`values()`。它返回一个包含所有枚举值的数组：

```
... = Arrays.asList(Something.values()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-17T14:38:31.023

您还可以使用：

```
Collections.singletonList(Something.values()) 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2018-09-02T11:40:23.467

```
private ComboBox gender;
private enum Selgender{Male,Famle};
ObservableList<Object> observableList  =FXCollections.observableArrayList(Selgender.values()); 
```

# asp.net - 如何在 Web 服务器中上传现有的 ms sql 数据库？

> ID：16149123
> 
> 赞同：-3
> 
> 时间：2013-04-22T14:02:26.117
> 
> 标签：asp.net, webserver

我有一个网站，我想把它上传到服务器上，我还想用那个网页上传 ms sql 数据库。请告诉我如何将其上传到网络服务器....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:08:49.603

这是一个相当笼统的问题，因为可能存在许多不同的问题和差异，但通常，您会先备份服务器。以下是一些关于此的一般信息：

[http://msdn.microsoft.com/en-us/library/ms187510.aspx](http://msdn.microsoft.com/en-us/library/ms187510.aspx)

然后登录您的托管服务提供商，使用他们的工具创建数据库，并将您的数据库备份恢复到新的托管数据库。

接下来，您将更改文件中的数据库配置指向新数据库的位置，然后使用像 Filezilla 这样的 ftp 客户端通过 ftp 访问您的 Web 服务器。托管服务提供商应该能够为您提供用户名和密码。将网页/文件上传到公共目录（通常是 /public 或 /htdocs 或类似的东西）。

# r - 更好的方法来消除 r 中数据帧的两列之间的冗余

> ID：16149128
> 
> 赞同：0
> 
> 时间：2013-04-22T14:02:58.880
> 
> 标签：r, for-loop, dataframe, apply

如果我有一个包含一列名称和另一列站点的数据框，并且我想确定唯一名称与站点关系的数量。

我编写了以下脚本。它可以工作，但对于我的真实数据来说感觉很慢并且速度很慢：

```
df = data.frame(name = c("dave", "bob", "dave", "john", "fred", "dave"), site = c(1,2,2,1,1,1))
redun = vector()
for (i in 1:length(df$name)){
  redun[i] = paste(df$name[i], df$site[i])
}
uniq = length(unique(redun)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:22:37.360

您可以使用聚合。这将方便地告诉您谁的名字有多少个独特的站点；

```
aggregate( site ~ name , data = df , function(x) length( unique(x) ) )
#  name site
#1  bob    1
#2 dave    2
#3 fred    1
#4 john    1 
```

如果您想按名称知道有多少独特的网站，只需总结：

```
sum(aggregate( site ~ name , data = df , function(x) length( unique(x) ) )$site)
[1] 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:07:28.717

您不需要`for`循环，只需执行以下操作：

```
length(unique(with(df, paste(name, site)))) 
```

甚至更短（我认为也更快）是：

```
nrow(unique(df)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:07:30.417

也许你想检查一下`? duplicated`。

```
> duplicated( df )
[1] FALSE FALSE FALSE FALSE FALSE  TRUE
> sum( !duplicated( df ) )
[1] 5 
```

**编辑**或根据您在原始帖子中的评论：

```
> duplicated( df[ c("name", "site" ) ] )
[1] FALSE FALSE FALSE FALSE FALSE  TRUE
> sum( !duplicated( df[ c("name", "site" ) ] ) )
[1] 5 
```

# javascript - 锚标记中的 Onclick 事件在 IE10 中不起作用

> ID：16149131
> 
> 赞同：0
> 
> 时间：2013-04-22T14:03:09.323
> 
> 标签：javascript, onclick, anchor, internet-explorer-10

我在 Asp.Net 用户控件中有一个锚点。我已经将一些代码连接到 onclick 事件。由于 Internet Explorer 10 中的某些原因，该事件未触发。标记的结构如下

```
<a href="#" id="myAnchor" onclick="myFunction();return false;"></a> 
```

其中 myFunction 是一个简单的 JavaScript 函数。对于那些想要查看实际页面的人，这里是链接：

[http://alt.thedominion.ca/TheBrokerAdvantage/LocateABroker.aspx](http://alt.thedominion.ca/TheBrokerAdvantage/LocateABroker.aspx)

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:24:02.640

以下代码适用于所有主流浏览器（我刚刚在 IE10、IE9、Chrome 26.0.1410.64 和最新的 firefox 版本上对其进行了测试）。

```
<a href="#" id="myAnchor" onclick="myFunction();return false;">click me</a> 

<script type="text/javascript">
function myFunction(){
    alert("Anchor was clicked");
}
</script> 
```

换句话说，您的语法很好，但是除非您使用 CSS 强制设置宽度和高度，否则锚标记根本不会在没有内部文本的情况下出现。

**CSS 选项：**

```
a{
    display: block;
    width: 100px;
    height: 20px;
} 
```

# [工作 CSS 示例](http://jsfiddle.net/kT8jZ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:44:14.690

问题在于您的服务器端代码，而不是浏览器或 JavaScript。

如果您在 IE10 中检查 JavaScript 控制台，您将在单击链接时看到以下错误：

> SCRIPT5009：“ValidatorValidate”未定义

指向函数中的第二行：

```
function doSearch() {
    var regExValidate = document.getElementById("ctl00_BrokerSearchMiddle_ctl00_ValidPostalCode");
    ValidatorValidate(regExValidate);

    var postalCode = $find("ctl00_BrokerSearchMiddle_ctl00_PostalCode").get_value();

    if (regExValidate.isvalid && postalCode.indexOf("e.g") == -1) {
        document.location.href = "?postalCode=" + postalCode;
    }
} 
```

这意味着`onclick`它工作得很好，你只是有 JS 错误。

现在的问题是为什么`ValidatorValidate`在其他浏览器（甚至 IE9）中存在但在 IE10 中不存在。好吧，在 IE10[中定义它的脚本](http://alt.thedominion.ca/ScriptResource.axd?d=buq2yireoeeF1nkyw4eh1dqjZ21i8mdtErn7Vh_89mtakBr_CeeaboPnjmR_x7zAxO_8cTar3v43J6QH_Ju0Zw2&t=ffffffffd80ff90f)不包括在内，这意味着服务器永远不会将`<script src="...">`带有该 URL 的行作为输出到浏览器的一部分。

我只能猜测服务器端代码正在检查浏览器版本，并据此包含某些脚本。检查该代码并摆脱这样的事情，因为它从来都不是一个好主意。

经过一番研究，我发现了发生了什么。您正在使用 Sitefinity 3.7 版来构建您的网站（根据您的[这个问题](https://stackoverflow.com/q/15526236/447356)），正如官方[所述](http://www.telerik.com/community/forums/community-forums/about-telerik/sitefinity-3-7-bug-on-ie-10.aspx)：

> 我想通知您，很遗憾 Sitefinity 3.7 不支持 Internet Explorer 10，您的 Sitefinity 3.7 可能无法在此浏览器版本上正常工作。造成的不便，深表歉意

如果您需要 IE10 支持，则必须升级您的 Sitefinity。

# css - Drupal 7 服务器或缓存问题？不更新 CSS 更改

> ID：16149136
> 
> 赞同：4
> 
> 时间：2013-04-22T14:03:33.977
> 
> 标签：css, drupal, drupal-7

所以，我的 Drupal 站点没有反映我所做的任何 CSS 更改。我尝试过对网站进行硬缓存，我尝试过多个浏览器，我检查了服务器上的实际样式表以确保它正在复制（样式表反映了更改，但实际站点没有）。当然，我已经转到管理面板上配置/性能下的​​清除缓存部分。我已经进入 FTP 并手动删除了缓存。我已经清除了自己浏览器的缓存。CSS 文件位于正确的文件夹中（我也检查过！）。我已经做了我能想到的一切。我尝试打开和关闭聚合和压缩 css 选项，清除其间的缓存。我检查了页面源代码，它肯定仍然使用旧的 CSS。

每次调试尝试都让我相信这与 DNS 不刷新有关。我在某处读到有人对 A 姓名记录进行了某种更改。我已将 TTL 设置为 1/2 小时，手动重置 A 名称记录，并删除了我在域上的转发，以防万一。

这些是我做过的*事情*。Stack Overflow 的人们，我错过了什么？我已经在网上搜索了解决方案，没有遇到过这个问题的人找到了解决方案。有人遇到过这个问题并解决了吗？你做了什么？有任何想法吗？

::edit:: 我只是想补充一点，我正在使用 Skeleton Theme 作为基础。

::edit edit:: 我还使用Devel 来重建主题注册表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:24:40.653

这是交叉发布到发行版的问题队列，但我认为它与社区媒体入门工具包发行版本身没有任何关系。

首先，您应该通过在本地设置 DNS 和/或清除 DNS 缓存来排除 DNS。这些是 OSX 的步骤，但您可以找到任何 OS 的类似说明...

[清除本地 DNS 缓存](http://www.hongkiat.com/blog/how-to-clear-dns-cache-in-mac-osx-leopard/)

[Mac OSX Lion DNS 查找顺序](https://stackoverflow.com/questions/6841421/mac-osx-lion-dns-lookup-order)

一旦您确定要通过 ftp 访问的站点是同一个站点，让我们看看发行版是如何加载主题的。使用任何 Drupal 分发/安装配置文件，您可以通过在站点/所有/模块或站点/所有/主题。移动使用 Drupal 注册表的模块时，您会得到一个 WSOD。这通常需要使用 drush rr 或手动清除缓存表] [1](http://www.hongkiat.com/blog/how-to-clear-dns-cache-in-mac-osx-leopard/)，因为 WSOD 将停止加载所有页面，包括管理 > 性能 > 清除缓存。主题真的不太可能需要。

在这个特定的发行版中，您还可以使用 CSS Injector 模块进行 CSS 更改，而无需自己更新 css 文件。该 css 存储在数据库中，因此它会影响您正在查看的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T03:41:01.930

我从未使用过 Skeleton 基本主题，但 Omega 在外观下有一个主题设置，您可以在其中启用和禁用每个主题的样式。也许骷髅有同样的东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T20:27:09.953

我刚开始使用 Drupal，所以我可能完全同意我的答案，但我仍然告诉你我最近几天的经历。所以我安装了 Drupal Commerce Kickstart 并制作了一个 kickstart commerce 的子主题。这是我安装的。而当我修改它的 CSS 并通过 ftp 客户端上传它时，花了半个多小时才使修改生效。所以我搜索并最终使用 Firebug 我发现 Drupal 将它自己的 CSS 放在了站点/默认/文件/css 中。当我使用 Inspector 查看其中的哪个 css 文件来进行我想要的更改时，在将更改后的 css 文件重新加载到 sites/default/files/css 中之后，需要几秒钟才能看到更改发生。所以显然它在主题 css 文件之前需要这些 css 文件。这对我来说是愚蠢的。我不知道这是否可以帮助你。无论如何，我想知道是否真的有必要在 sites/default/files/css 中创建这些文件。我删除了它们进行测试，但它们又回来了。不知道是否有可能停止该过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T15:54:45.837

检查主题 .info 文件的名称是否与中的主题目录完全相同`sites/all/themes/`

如果没有，主题会出现在我面前，但 .info 文件没有效果。

将两者更改为相同，并且在站点外观下看到多个可用主题感到困惑，每个 .info 文件一个。激活另一个主题并看到变化。只需将目录和 .info 文件命名完全相同即可。

当然，清除缓存，关闭 ccs 聚合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-20T01:10:46.483

whois 托管的 Pagespeed（一个站点缓存系统）是我的原因。我登录到客户的托管帐户并将其关闭。问题已解决，但我还实现了这段代码，它允许在每次页面加载时重建主题注册表，这产生了巨大的差异。现在 css 更改是即时的。在网站上线之前，我将禁用此代码。

你确定你不是要重建主题注册表吗？

要在开发期间重建主题注册表和主题 .info 文件，请将其添加到主题的 template.php 文件中：

```
<?php
/**
 * Auto-rebuild the theme registry during theme development.
 */
if (theme_get_setting('rebuild_registry') && !defined('MAINTENANCE_MODE')) {
  // Rebuild .info data.
  system_rebuild_theme_data();
  // Rebuild theme registry.
  drupal_theme_rebuild();
}
?> 
```

并将其添加到您的 {themename}_form_system_theme_settings_alter(&$form, $form_state) 函数中的主题的 theme-settings.php 中：

```
<?php
  $form['rebuild_registry'] = array(
    '#type'          => 'checkbox',
    '#title'         => t('Rebuild theme registry on every page.'),
    '#default_value' => theme_get_setting('rebuild_registry'),
    '#description'   => t('During theme development, it can be very useful to continuously <a href="!link">rebuild the theme registry</a>. WARNING: this is a huge performance penalty and must be turned off on production websites.', array('!link' => 'http://drupal.org/node/173880#theme-registry')),
  );
?> 
```

# c++ - win32 api从带有两个组合框的对话框中读取组合框值

> ID：16149137
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:03:41.157
> 
> 标签：c++, api, winapi, combobox

我在一个对话框中有两个组合框，问题是我想找出选择了哪个字符串并从组合框中获取消息。我有以下代码。但问题是，从这段代码中，我无法区分选择了哪个组合框，并且这段代码导致两个框的索引号相同。

```
if(HIWORD(wParam) == CBN_SELCHANGE){
        _formatIndex = SendMessage((HWND) lParam, (UINT) CB_GETCURSEL, (WPARAM) 0, (LPARAM) IDD_IMAGES_MODE);
        _savingModeIndex = SendMessage((HWND) lParam, (UINT) CB_GETCURSEL, (WPARAM) 0, (LPARAM) IDC_COMBOBOX_TIME_FRAME);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:08:19.320

实际上我只是找到了答案，这是代码：

```
 if(HIWORD(wParam) == CBN_SELCHANGE){
        if(LOWORD(wParam)==IDD_IMAGES_MODE){
        _formatIndex = SendMessage((HWND) lParam, (UINT) CB_GETCURSEL, (WPARAM) 0, (LPARAM) 0);
        }
        if(LOWORD(wParam)==IDC_COMBOBOX_TIME_FRAME){
        _savingModeIndex = SendMessage((HWND) lParam, (UINT) CB_GETCURSEL, (WPARAM) 0, (LPARAM) 0);
        }           
    } 
```

# php - 限制站点仅访问 QR 扫描

> ID：16149138
> 
> 赞同：5
> 
> 时间：2013-04-22T14:03:47.470
> 
> 标签：php, javascript, html, qr-code, privacy

我已经看到了一些关于确保站点访问来自 QR 码扫描的问题，但它们似乎专注于分析目的（跟踪流量来自何处），而我的兴趣是安全/隐私。

我想设置一个只有在扫描提供的二维码时才能访问的站点。换句话说，我不希望 QR 码拥有的 URL 只能手动输入/粘贴以通过其他方式访问站点。

我一直在谷歌上搜索这个问题，但没有任何运气。我正在想办法通过引用 URL 或其他方式来确保通过实际扫描提供的 QR 码来确保一个人到达该站点。

编辑：该解决方案还需要独立于扫描仪（即我不能强迫用户下载和使用特定的 QR 扫描仪应用程序）和跨平台（Android + iOS + WinMo + BlackBerry 等）。

现在我把这个问题提交给你们这些了不起的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:56:11.713

您无法确保 URL 来自扫描二维码，这是不可能的。二维码只是一种对文本进行编码的方法，一旦用户知道了文本，他们就可以用它做任何他们想做的事情。

但是，您可以限制 QR 码的有用性，因此即使它被泄露也无用。如果可能的话，我会首先使用随机种子按需生成 QR 码，然后让它们很快过期。这样即使 QR 码被泄露，它也不会在很长时间内有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:08:58.067

我们公司也有同样的情况。我们提供如下链接：

```
zxing://scan/?ret=http%3A%2F%2Ffoo.com%2Fproducts%2F%7BCODE%7D%2Fdescription&SCAN_FORMATS=UPC_A,EAN_13 
```

其中 {CODE} 是在 QRCode 中返回的代码。所以你可以做的是创建一个像上面这样的 url（查看更多信息以获取链接）。然后在二维码里面放一个加密的数据，所以只有用户点击了这个url，二维码的数据是正确的。人们可以继续访问您的网站。这样，如果 qrcode 泄露，他们将不知道该站点。如果他们知道该站点，代码就会被加密。

如果人们通过单击您的网站来扫描条形码。zxing 将打开一个新的浏览器，其中包含扫描代码的 URL 和 {CODE}。

但是，人们确实需要来自 android 或 iphone 的条形码扫描仪。

更多信息：

*   [zxing下载/主页](https://code.google.com/p/zxing/)
*   [zXing 从 w 扫描](https://code.google.com/p/zxing/wiki/ScanningFromWebPages)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:06:28.437

您能做的最好的事情就是在您的二维码中设置一个查询字符串。就像是：

```
http://www.example.com/myapp 
```

可以改为：

```
http://www.example.com/myapp/?qrcode=1 
```

这可以在 PHP 中处理：

```
if(!isset($_GET['qrcode'])) die(); 
```

当然，这样做的问题是任何拥有该 URL 的人都可以在他们的普通 Web 浏览器中直接导航到该 URL。

然而，这不是你可以阻止的。

您还可以检查是否`$_SERVER['HTTP_USER_AGENT']`声称是手机。这是关于该主题的[另一个问题](https://stackoverflow.com/questions/386046/how-do-i-determine-whether-its-a-mobile-device-with-php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:07:43.693

您可以添加参数，但归根结底，二维码只是一种编码文本的方法，所以如果有人知道编码了什么，您编码的任何内容都可以输入到浏览器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-22T10:12:05.497

如果您从 QR 码对任何 Web URL 进行后调用，那么您发送的任何正文都将不可见，除非用户通过 QR 扫描模式。因此，仅输入 Web URL 用户将无法访问 Web URL 内容.

# mysql - UNION ALL 需要几天时间。加速中？

> ID：16149139
> 
> 赞同：1
> 
> 时间：2013-04-22T14:03:49.910
> 
> 标签：mysql, sql, performance

我有两张表：一张大约有 2 亿行，另一张大约有 1 亿行。我需要将它们连接在一起并选择大约 3/4 的行和 1/6 的列，因此创建了一个新表，并使用以下方法插入其中：

```
INSERT INTO NEWTABLE 
SELECT COLUMN1, COLUMN2, COLUMN3, COLUMN4
FROM TABLE1
UNION ALL 
SELECT COLUMN1, COLUMN2, COLUMN3, COLUMN4
FROM TABLE2 
LOCK IN SHARE MODE; 
```

这需要一段时间。其实天。

我这样做是最快的方式吗？

我的*感觉*是查询不是主要问题 - 将两个源表复制到临时表需要时间。我如何证明这一点？如果是这样的话，我可以绕过它吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:07:59.230

为什么要联合所有？

```
INSERT INTO NEWTABLE
SELECT COLUMN1, COLUMN2, COLUMN3, COLUMN4
FROM TABLE1
LOCK IN SHARE MODE;

INSERT INTO NEWTABLE
SELECT COLUMN1, COLUMN2, COLUMN3, COLUMN4
FROM TABLE2 
LOCK IN SHARE MODE; 
```

达到同样的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:39:11.987

删除 UNION ALL 就足够了。尽管如此，如果您遇到问题，请在此处发布时差。

*   如果 NEWTABLE 有索引，则禁用它
*   运行两个 INSERT DDL。
*   启用索引

# python - 下载附件并将邮件标记为看不见

> ID：16149140
> 
> 赞同：0
> 
> 时间：2013-04-22T14:03:53.907
> 
> 标签：python, email, imap

我想从 Unread Messages 下载附件，但也不希望这些消息被标记为**Seen**。

以下代码有效，但当前将邮件设置为已**查看**

试过了`'(BODY.PEEK[HEADER])'`，但后来连邮件下载都停止了。

```
import upload,checkFileAtServer,sha1sum,email, getpass, imaplib, os
detach_dir = '.'
m = imaplib.IMAP4_SSL("imap.gmail.com")
m.login('myaccount@gmail.com','password')
m.select("inbox")

resp, items = m.search(None, "(UNSEEN)")
items = items[0].split()

for emailid in items:
  #resp, data = m.fetch(emailid, '(BODY.PEEK[HEADER])')
  resp, data = m.fetch(emailid, "(RFC822)")
  email_body = data[0][1]
  mail = email.message_from_string(email_body)
  temp = m.store(emailid,'+FLAGS', '\\Seen')
  m.expunge()

  if mail.get_content_maintype() != 'multipart':
    continue

  print "["+mail["From"]+"] :" + mail["Subject"]

  for part in mail.walk():
    if part.get_content_maintype() == 'multipart':
        continue
    if part.get('Content-Disposition') is None:
        continue

    filename = part.get_filename()
    att_path = os.path.join(detach_dir, filename)

    if not os.path.isfile(att_path) :
        fp = open(att_path, 'wb')
        fp.write(part.get_payload(decode=True))
        fp.close()
        sha1sum = sha1sum.calculateSHA1(att_path)
        print type(sha1sum)
        responseFromServer = checkFileAtServer.responseFromServer(sha1sum)
        if(responseFromServer == "NOT_CHECKED"):
            upload.uploadToSecureServer('root','root',att_path,att_path) 
```

任何人都可以指导我我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:43:06.383

如果您不想将消息标记为`\Seen`，请不要调用`STORE`IMAP 命令并且不要使用`FETCH`记录在案的能够导致隐式标记的项目（是的，这是导致消息被标记`RFC822`的别名`BODY[]`如阅读）。

# c# - 在 WPF MVVM 中通信两个视图模型

> ID：16149146
> 
> 赞同：9
> 
> 时间：2013-04-22T14:04:06.620
> 
> 标签：c#, wpf, mvvm

我正在开发一个 WPF 应用程序，但在将一个视图模型与另一个视图模型通信时遇到了一些问题。

我有：

1.  主视图模型
2.  ChildViewModel1
3.  ChildViewModel2

每次 MainViewModel 中的属性更改时，ChildViewModel1 和 ChildViewModel2 都应该得到通知。

任何人都可以提出解决方法吗？

编辑：我正在考虑一个描述为 MVVM Light 的解决方案（[http://simplemvvmtoolkit.codeplex.com/SourceControl/changeset/view/23821#313594。](http://simplemvvmtoolkit.codeplex.com/SourceControl/changeset/view/23821#313594.)），即实现消息总线。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T14:15:37.293

在大多数情况下，我不建议使用任何集中的地方来共享“事件”/“通知”，例如 EventAggregator 等。这会导致以后出现与 ViewModel 之间关系不明确的问题。当即使在设计阶段也不知道侦听器/发布者之间的关系时，此类通知在非常特殊的情况下是有意义的。我建议用 ViewModels 之间的关系绘制简单的图表，并找到一种使用标准 .NET 事件的方法，所以当你在 ViewModels 之间有明确的关系时，比如 ViewModel1 有对 ViewModel2 的引用，因此可以订阅事件或提供自己的回调，所以它会易于构建此类事件通知。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T14:24:46.650

视图模型之间通信的常用方式是中介者设计模式的实现

这是在 MVVMLight [http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/27aaefff-e463-451c-87d9-37367a343e0e中的完成方式](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/27aaefff-e463-451c-87d9-37367a343e0e)

在棱镜是：http: [//blogs.u2u.be/diederik/post/2011/01/15/Using-the-Prism-40-Event-Aggregator.aspx](http://blogs.u2u.be/diederik/post/2011/01/15/Using-the-Prism-40-Event-Aggregator.aspx)

在 Caliburn 是： http: [//www.mindscapehq.com/blog/index.php/2012/02/01/caliburn-micro-part-4-the-event-aggregator/](http://www.mindscapehq.com/blog/index.php/2012/02/01/caliburn-micro-part-4-the-event-aggregator/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T14:11:33.570

我会使用由每个视图模型实现的 IService。然后在视图模型中，您可以将服务属性传递给实现 INotifypropertychanged 的​​视图模型的属性。例如，我有一个名为 INavigationService 的服务，它由我的视图模型实现，它具有我在视图模型中绑定的 CanNavigate、currentView 等属性。对这些属性的更改可能会导致导航或更改其他视图模型绑定到的属性。

# javascript - highcharts canvas-tools：无法读取未定义的属性“原型”

> ID：16149147
> 
> 赞同：1
> 
> 时间：2013-04-22T14:04:06.923
> 
> 标签：javascript, ruby-on-rails, highcharts

我有一个 ruby​​-on-rails 应用程序，我正在尝试使用 highcharts/modules/canvas-tools.js。我继承了这个应用程序，并且其中不存在 highcharts 文件。我对 javascript 了解不多，所以我什至不确定应用程序如何使用这些资产。应该显示图表的页面没有。尝试查看图表时，我的 Chrome 控制台中出现以下错误：

```
Uncaught TypeError: Cannot read property 'prototype' of undefined 
```

控制台指的是这些行：

```
// Extend CanVG renderer on demand, inherit from SVGRenderer
extend(CanVGRenderer.prototype, SVGRenderer.prototype); 
```

在 highcharts 文件的末尾：

```
}(Highcharts)); 
```

这是我的 application.js：

```
//= require jquery
//= require jquery-ui-1.10.2.custom
//= require twitter/bootstrap
//= require highcharts
//= require highcharts/modules/canvas-tools
//= require highcharts/modules/exporting
//= require bootstrap-typeahead
//= require rails
//= require autocomplete-rails
//= require_tree .

$(document).ready(function()     {
    $('.dropdown-toggle').dropdown();
} );

$(document).ready(function() {
    $('.popover-myasset').popover();
}); 
```

在其他情况下，我收到一个错误，说 highcharts 被多次加载，但我没有使用 Highstock，这显然是这个错误的根源。错误消息链接：http: [//highcharts.com/errors/16](http://highcharts.com/errors/16)

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T20:19:17.997

我也有这个错误-

> 未捕获的类型错误：无法读取未定义的属性“原型”

为了修复它，我将其添加到第 2931 行-

```
CanVGRenderer = (typeof(Highcharts.CanVGRenderer) != "undefined"
    ? Highcharts.CanVGRenderer : {}, 
```

由于扩展函数（highcharts.src.js 的第 128 行）在将变量传递给它时基本上做了完全相同的事情。

也是 canvas-tools.src.js 中的第 2897 行 -

```
if (CanvasRenderingContext2D) 
```

在 IE 中也会引发错误。本节来自于 2013 年 5 月 7 日更新的 canvg.js，但未由 highcharts 更新，现在应该是 -

```
if (typeof(CanvasRenderingContext2D) != 'undefined') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T19:47:38.190

根据开发团队：

> canvas-tools 不应该包含在脚本文件中。相反，Highcharts 会按需延迟加载。请参阅[http://api.highcharts.com/highcharts#global.canvasToolsURL](http://api.highcharts.com/highcharts#global.canvasToolsURL)。

[https://github.com/highslide-software/highcharts.com/issues/2311](https://github.com/highslide-software/highcharts.com/issues/2311)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T13:02:18.570

有几个问题。我所做的可能并不适用于所有情况。

我将 highcharts 要求语句放在以我使用它的视图命名的文件夹和文件中：

```
app/assets/
-javascripts
--foos
---foos.js
--application.js 
```

foos.js 包含：

```
//= require highcharts
//= require highcharts/modules/canvas-tools
//= require highcharts/modules/exporting 
```

# python - 如何使用 Python 计算每个相同键的不同值？

> ID：16149152
> 
> 赞同：1
> 
> 时间：2013-04-22T14:04:19.717
> 
> 标签：python, dictionary, count

我有一个代码可以给我这样的列表：

```
 Name  id number week number
    Piata   4            6    
    Mali    2          20,5    
    Goerge  5           4    
    Gooki   3         24,64,6   
    Mali    5          45,9
    Piata   6           1    
    Piata  12          2,7,8,27,16 etc.. 
```

使用以下代码：

```
import csv
from datetime import date

datedict = defaultdict(set)
with open('d:/info.csv', 'r') as csvfile:
    filereader = csv.reader(csvfile, 'excel')
    #passing the header
    read_header = False
    start_date=date(year=2009,month=1,day=1)
    #print((seen_date - start_date).days)
    tdic = {}
    for row in filereader: 
        if not read_header:
            read_header = True
            continue

    # reading the rest rows
        name,id,firstseen = row[0],row[1],row[3]
        try:
            seen_date = datetime.datetime.strptime(firstseen, '%d/%m/%Y').date()               
            deltadays = (seen_date-start_date).days
            deltaweeks = deltadays/7 + 1
            key = name,id
            currentvalue = tdic.get(key, set())
            currentvalue.add(deltaweeks)
            tdic[key] = currentvalue

        except ValueError:
            print('Date value error')
            pass 
```

现在，我想将我的列表转换为一个列表，该列表为我提供每个名称的 id 数量及其周数，如下面的列表：

```
Name     number of ids      weeknumbers
Mali         2                20,5,45,9
Piata        3               1,6,2,7,8,27,16
Goerge       1                   4
Gooki        1                 24,64,6 
```

谁能帮我写这部分的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:34:14.247

鉴于：

```
tdict = {('Mali', 5): set([9, 45]), ('Gooki', 3): set([24, 64, 6]), ('Goerge', 5): set([4]), ('Mali', 2): set([20, 5]), ('Piata', 4): set([4]), ('Piata', 6): set([1]), ('Piata', 12): set([8, 16, 2, 27, 7])} 
```

然后输出上面的结果：

```
names = {}
for ((name, id), more_weeks) in tdict.items():
  (ids, weeks) = names.get(name, (0, set()))
  ids = ids + 1
  weeks = weeks.union(more_weeks)
  names[name] = (ids, weeks)

for (name, (id, weeks)) in names.items():
  print("%s, %s, %s" % (name, id, weeks) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:14:02.560

既然您的 csv 文件看起来有标题（您目前正在忽略），为什么不使用 a[`DictReader`](http://docs.python.org/2/library/csv.html#csv.DictReader)而不是标准`reader`类？如果您不提供字段名，`DictReader`则会假定第一行包含它们，这也将使您不必跳过循环中的第一行。

这似乎是一个使用模块的`defaultdict`好机会。`Counter``collections`

```
import csv
from datetime import date
from collections import defaultdict, Counter

datedict = defaultdict(set)
namecounter = Counter()
with open('d:/info.csv', 'r') as csvfile:
    filereader = csv.DictReader(csvfile)
    start_date=date(year=2009,month=1,day=1)

    for row in filereader: 
        name,id,firstseen = row['name'], row['id'], row['firstseen']

        try:
            seen_date = datetime.datetime.strptime(firstseen, '%d/%m/%Y').date() 
        except ValueError:
            print('Date value error')
            pass

        deltadays = (seen_date-start_date).days
        deltaweeks = deltadays/7 + 1

        datedict[name].add(deltaweeks)
        namecounter.update([name])  # Without putting name into a list, update will index each character 
```

这假设它`(name, id)`是唯一的。如果不是这种情况，那么您可以使用另一个`defaultdict`for `namecounter`。我还移动了 try-except 语句，因此它在您正在测试的内容中更加明确。

# c# - 通过 tooltip 获取其他系列的值

> ID：16149153
> 
> 赞同：2
> 
> 时间：2013-04-22T14:04:20.643
> 
> 标签：c#, asp.net-4.0, mschart

我有一个图表，其数据来自列表。

此类具有 id 和 count1 和 count2 作为属性...

现在，我有一个类列表......值在哪里......

```
Id Count1 Count2

1    -10    20

2    -15    15 
```

现在，我做了一个简单的绑定......有多个系列

```
Chart1.DataSource = ListObjOfThatClass
Chart1.Series[0].XValueMember = "Id";
Chart1.Series[0].YValueMembers = "Count1";
Chart1.Series[1].YValueMembers = "Count2";
Chart1.DataBind(); 
```

现在，一切正常..

我的问题：当我将鼠标悬停在 DataSeries 上时，我将该特定 YValueMember 的工具提示显示为“#VALY”；

```
Chart1.Series[0].ToolTip = "#VALY"; 
```

有什么方法可以显示其他系列中的价值吗？IE

`Count2`我之前初始化的值`series[1].YValueMember`...??

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:44:14.287

更简单的方法是为系列创建自己的数据点，而不使用数据源。然后，您可以在工具提示中添加任何您想要的内容：

```
foreach (var o in ListObjOfThatClass)
{
    var p1 = new DataPoint();
    p1.SetValueXY(o.Id, o.Count1);
    p1.ToolTip = string.Format("{0}", o.Count2);
    Chart1.Series[0].Points.Add(p1);

    var p2 = new DataPoint();
    p2.SetValueXY(o.Id, o.Count2);
    Chart1.Series[1].Points.Add(p2);
} 
```

# java - 如何将 ArrayList 添加到另一个 ArrayList？

> ID：16149155
> 
> 赞同：0
> 
> 时间：2013-04-22T14:04:24.407
> 
> 标签：java, arraylist

这让我的大脑受伤......
我想将多个变量（例如日期和时间）添加到数组列表中，并将该数组列表添加到另一个包含不同变量（例如姓名和年龄）的数组列表中。

示例：一个 ArrayList 拥有多个帐户。每个帐户都有一个 ID、名称、余额和交易历史。每笔交易都有一个id、日期、时间和交易金额。

因此，帐户 ArrayList 将包含：`(int | String | double | ArrayList)`，
交易 ArrayList 将包含：`(int | Date | Time | double)`。

如果您能帮助我了解如何执行此操作或提供更好的解决方案，我将不胜感激。

编辑：
我无法真正显示我的所有代码，因为我正在使用一个模型视图控制器来访问一个模型和 4 个视图。我可以尝试描述它的作用。

点击“创建账户”按钮：

1.  创建一个新帐户（使用 Account 类）
2.  设置 accountID = 帐户 ArrayList 的长度
3.  设置 accountName = 文本框输入
4.  设置账户余额 = 0
5.  创建交易 ArrayList（使用 Transactions 类）
6.  将所有添加到帐户 ArrayList。

点击“存款”按钮：

1.  将文本框输入添加到 accountBalance
2.  设置 transactionID = 交易 ArrayList 的长度
3.  设置 transactionDate = 当前日期
4.  设置 transactionTime = 当前时间
5.  全部添加到选定账户的交易 ArrayList

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T14:07:47.870

不要只使用列表，使用具体的类，即：

```
class Account {
    String id;
    String name;
    float balance;
    List<Transaction> history;
}

class Transaction {
    String id;
    Date date;
    double amount;
} 
```

最后有一张包含相关数据的地图：

```
Map<Account, List<Transaction>> data = new HashMap<Account, List<Transaction>>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:09:52.247

创建一个 Account 类和一个 Transaction 类。Account 类将有一个交易列表作为属性，在创建列表时只需将其声明如下：

```
List<Account> myAccounts = new ArrayList<Account>(); 
```

当你想添加一个帐户时，只需写：

```
myAccounts.add(new Account()); 
```

# apache - CakePHP 分页中 page:1 的特殊路由

> ID：16149159
> 
> 赞同：0
> 
> 时间：2013-04-22T14:04:35.543
> 
> 标签：apache, .htaccess, cakephp, mod-rewrite, cakephp-1.2

我修改了 CakePHP 的 paginator helper 以打印出没有页面的第一页链接，例如：

> myexample.com/controller/action/id/page:1 将是 myexample.com/controller/action/id/ 其他页面 page:1 将照常进行。

在这一点上，一切正常。但是，我注意到**myexample.com/controller/action/id/page:1**仍然可以访问。我希望它应该在没有*page:1*的情况下访问。以下是我在 config/routes.php 中使用的路由规则

```
Router::connect('/action/:id/:page', array('controller' => 'controller', 'action' => 'action'), array('id' =>'[0-9]+', 'page' => 1, 'pass' => array('id'))); 
```

我需要知道如何消除*page:1*以使其可访问或自动重定向到 action/id，因为这种情况会导致 SEO 问题。

**注意：我使用的是 CakePHP 1.2.10**

**也欢迎任何包含 .htaccess 的解决方案。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:45:44.957

如果我们不希望 page:1 在 1.x/2.x 中错误地路由，我们通常使用另一个路由来解决这个问题：

```
Router::connect('/kuechen/alle', array('controller'=>'kitchens', 'action'=>'index_all'));
Router::connect('/kuechen/alle', array('controller'=>'kitchens', 'action'=>'index_all', 'page'=>1));
Router::connect('/kuechen/alle/*', array('controller'=>'kitchens', 'action'=>'index_all')); 
```

注意第二个。

然后使用规范标签使 /index/ without page:1 成为规范网址。完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T23:35:06.017

[最后我在这个论坛](https://forums.digitalpoint.com/threads/htaccess-how-do-i-remove-the-same-word-from-the-end-of-a-url.2644387/#post-18512832)上找到了答案。我必须在 app/webroot 中找到的 .htaccess 的第一行编写以下代码行

```
RewriteRule ^(.*)page:1(.*)$ /$1 [R=301,L] 
```

最终的 .htaccess 将是：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)page:1(.*)$ /$1 [R=301,L]
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

> **重要通知：**
> 
> 如果您的应用程序位于您服务器的文档根目录的子目录中，您必须将其添加到相关的代码行中，否则会生成 404 not found。例如，假设您的应用程序位于 /myapp 您正在使用它访问它 `http://localhost/myapp/`，因此重写规则将是：
> 
> ```
> RewriteRule ^(.*)page:1(.*)$ /myapp/$1 [R=301,L] 
> ```

# windows - 在 Winjs 中发送推送通知

> ID：16149167
> 
> 赞同：0
> 
> 时间：2013-04-22T14:05:17.840
> 
> 标签：windows, microsoft-metro, windows-store-apps, winjs

我正在使用 html/js 开发一个 windows 商店应用程序，所以我的应用程序是一个小游戏，我希望玩家 1 可以向与同一应用程序连接的玩家 2 发送邀请。所以推送通知出现在 player2 的设备中并且可以选择接受或拒绝。

我想知道是否可以使用 winjs（如 C# ）？如果没有办法实现这个目标，我真的很害怕。任何帮助将不胜感激请提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:32:27.850

有可能，推送通知机制实际上只是 HTTP 调用，所以不确定您关心的问题在哪里。将有一些基础设施来支持这一点，但无论 C# 还是 JavaScript，这都是必需的；我可以看到它正在发生类似的事情：

1.  您将播放器存储库“存储在云端”
2.  每个客户端下载（通过应用程序）可能邀请的其他玩家的列表。
3.  玩家 1 表示他想与玩家 2 开始游戏，这会导致 Web 服务调用您的云服务
4.  您的 Web 服务查找播放器 2 的频道 ID，并通过 WNS 将消息推送到播放器 2 拥有的设备

如果您要使用[Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)，则无需大量工作即可完成此操作。

# c++ - 尝试使用 mex 为 MATLAB 编译多个 c++ 文件时出错

> ID：16149170
> 
> 赞同：2
> 
> 时间：2013-04-22T14:05:19.553
> 
> 标签：c++, matlab, compiler-errors, header-files, mex

我在 Ubuntu 下使用**MATLAB**，并希望使用**mex**编译一组 2 个带有头文件的**c++**文件。我展示了一个基本示例和我遇到的错误。

 **此代码从从 mexFunction 开始并在 MATLAB 中使用 mex 编译的 c++ 函数生成文本“hello”（mex mexTryAlex.cpp）：

```
#include <mex.h>
#include <iostream>
using namespace std;

void newfunc(){
    cout<<"hello\n";   
}
void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) 
{ 
    newfunc();
} 
```

它工作正常。现在我尝试在 mex 中使用*多个*文件和一个头文件。我创建一个头文件`try.h`：

```
#ifndef try_h
#define try_h
void newfunc();
#endif 
```

然后是新函数的文件`try.cpp`：

```
#include <mex.h>
#include <iostream>
#include <try.h>
using namespace std;

void newfunc(){
    cout<<"hello\n";   
} 
```

这 3 个文件不能编译`mex`：

```
>> mex  mexTryAlex.cpp try.cpp try.h

Warning: You are using gcc version "4.4.3-4ubuntu5)".  The version
     currently supported with MEX is "4.3.4".
     For a list of currently supported compilers see: 
     http://www.mathworks.com/support/compilers/current_release/

try.cpp:4:17: error: try.h: No such file or directory
mex: compile of ' "try.cpp"' failed.
??? Error using ==> mex at 208
Unable to complete successfully. 
```

使用该`-I`选项的另一种尝试：

```
>> mex  -I mexTryAlex.cpp try.cpp try.h
Warning: You are using gcc version "4.4.3-4ubuntu5)".  The version
     currently supported with MEX is "4.3.4".
     For a list of currently supported compilers see: 
     http://www.mathworks.com/support/compilers/current_release/

mexTryAlex.cpp:1:17: error: mex.h: No such file or directory
mexTryAlex.cpp:7: error: ‘mxArray’ has not been declared
mexTryAlex.cpp:7: error: ISO C++ forbids declaration of ‘mxArray’ with no type
mexTryAlex.cpp:7: error: expected ‘,’ or ‘...’ before ‘*’ token
mex: compile of ' "mexTryAlex.cpp"' failed.
??? Error using ==> mex at 208
Unable to complete successfully. 
```

我怎样才能让这些文件编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:44:46.500

该错误已通过使用修复

```
#include "try.h" 
```

代替

```
 #include <try.h> 
```

在源文件中。**

# shell - 为什么xinetd不能运行shell服务

> ID：16149174
> 
> 赞同：3
> 
> 时间：2013-04-22T14:05:38.197
> 
> 标签：shell, format, xinetd

伙计们，我在使用 xinetd 时遇到问题，错误消息是 'xinetd[20126]: execv(/home/fulu/download/mysqlchk_status2.sh) failed: Exec format error (errno = 8)'

1.  系统操作为：CentOS release 6.2；
2.  我通过命令“sudo yum install xinetd”安装了 xinetd
3.  我编辑了 /etc/services，为名为“mysqlchk”的服务添加了端口 6033
4.  /etc/xinetd.d/mysqlchk 中的服务“mysqlchk”是

    service mysqlchk { disable = no flags = REUSE socket_type = stream port = 6033 wait = no user = fulu server = /home/fulu/download/mysqlchk_status2.sh log_on_failure += USERID }

5.  外壳文件 /home/fulu/download/mysqlchk_status2.sh 内容为

    回声“测试”

6.我可以直接运行命令 /home/fulu/download/mysqlchk_status2.sh 并得到结果'test'

1.  当我 telnet 127.0.0.1 6033 时，我得到了输出

    正在尝试 127.0.0.1... 连接到 127.0.0.1。转义字符是 '^]'。外部主机关闭连接。

然后我跟踪日志文件/var/log/messages，它显示

```
Apr 22 22:01:47 AY1304111122016 xinetd[20001]: START: mysqlchk pid=20126 from=127.0.0.1
Apr 22 22:01:47 AY1304111122016 xinetd[20126]: execv( /home/fulu/download/mysqlchk_status2.sh ) failed: Exec format error (errno = 8)
Apr 22 22:01:47 AY1304111122016 xinetd[20001]: EXIT: mysqlchk status=0 pid=20126 duration=0(sec) 
```

我不知道为什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:41:00.673

不好意思，问了之后突然找到了答案。如果你想让 shell 在其他程序中运行，你需要在 shell 文件的第一行添加 '#!/bin/echo' （当然可以更改 echo）

# windows - 通过 PowerShell 创建带有路径组件的注册表项

> ID：16149175
> 
> 赞同：8
> 
> 时间：2013-04-22T14:05:40.910
> 
> 标签：windows, powershell, registry, powershell-remoting

对于遗留应用程序，我需要创建一个名称格式为`c:/foo/bar/baz`. （注意：正斜杠，而不是反斜杠。）要清楚：这是一个带有正斜杠的键名，否则看起来像 Windows 路径。因为我需要针对大量服务器编写脚本，所以 PowerShell 似乎是一个不错的选择。

问题是我无法弄清楚如何通过 PowerShell 创建该格式的密钥。 `New-Item -Path HKLM:\SOFTWARE\Some\Key -Name 'c:/foo/bar/baz'`PowerShell 错误认为我将`/`其用作路径分隔符并且找不到路径`HKLM:\Software\Some\Key\c:\foo\bar`，该路径确实不存在（也不应该存在）。我找不到任何其他方式来（ab）使用`New-Item`来获得我想要的东西。

有什么我遗漏的，还是我应该放弃并以老式方式生成并加载注册表转储？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T14:30:34.023

你需要做两件事。首先你需要得到一个可写的`RegistryKey`对象，否则无论如何你都不能修改任何东西。其次，直接在对象上使用`CreateSubKey`方法。`RegistryKey`

```
$writable = $true
$key = (get-item HKLM:\).OpenSubKey("SOFTWARE", $writable).CreateSubKey("C:/test")
$key.SetValue("Item 1", "Value 1") 
```

创建密钥后，您可以使用生成的对象为其添加值。

# css - 使用 codeigniter 渲染 html 页面时缺少 CSS

> ID：16149178
> 
> 赞同：0
> 
> 时间：2013-04-22T14:05:47.487
> 
> 标签：css, codeigniter

我知道这与许多现有帖子相似，但在查看了其他一些帖子后，我无法解决我的问题。我正在尝试加载一个包含我提供的 html 文件的文件夹。我没有编写它们，但我一直在修改它们以将它们集成到现有系统中。

我尝试了三种打开它们的方法，并取得了不同程度的成功：

1) 只需右键单击“index.html”并选择“打开方式”并选择浏览器。这完美！

2) 将整个文件夹内容原封不动地放在我的服务器上的“public_html/cat/html”下并导航到 url“localhost/cat/html/index.html”。这将返回“404 页面未找到错误”。

3) 奇怪的。将 html 文件放在“application/view”文件夹中，将包含的 css 和 javascript 文件分开，并将它们放在现有文件夹“public_html/css”和“public_html/js”中，并在 html 文件中适当地更新它们的链接。这些现在看起来像：

```
<link type="text/css" href="css/cat/style.css" rel="stylesheet" /> 
```

如果我通过运行使用 CodeIgniter 的 $this->load->view(...) 函数的函数来加载此页面，它会找到索引文件，但加载它时没有 css 并且与其他页面的链接断开。我浏览了页面源代码，发现链接与上面完全相同，但单击时会出现错误，显示为“404 Not Found ... The requested URL /css/cat/style.css was not found on this server”。

我尝试像这样使用 base_url() 函数（和 site_url()）：

```
<link type="text/css" href="<? base_url('css/cat/style.css') ?>" rel="stylesheet" /> 
```

它在表面上产生相同的结果，但检查页面源显示链接行已变为：

```
<link type="text/css" href="" rel="stylesheet" /> 
```

这似乎更糟！

有什么提示吗？

谢谢阅读

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:07:40.577

尝试以下操作：

```
<link type="text/css" href="<?php echo base_url('css/cat/style.css') ?>" rel="stylesheet" /> 
```

base_url() 函数只是返回值，您应该注意将返回值显示到输出！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:42:23.083

或速记

```
<link type="text/css" href="<?=base_url('css/cat/style.css') ?>" rel="stylesheet" /> 
```

然后查看您的页面源并将链接从那里复制到您的浏览器，看看您是否可以访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T15:49:48.523

可以试试这个代码`<link type="text/css" href="<?=base_url('css/cat/style.css');?>" rel="stylesheet" />`

如果它不起作用，你可以尝试`<link type="text/css" href="<?=base_url('css/cat');?>/style.css" rel="stylesheet" />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:09:09.213

您是否在 codeIgniter 中正确配置了配置文件？

# magento - Magento - 向导航添加自定义属性

> ID：16149180
> 
> 赞同：5
> 
> 时间：2013-04-22T14:05:49.237
> 
> 标签：magento, magento-1.7

我有以下代码在 Magento 中创建自定义菜单：

```
<?php
/**
 * Catalog navigation
 */

class Infortis_Ultimo_Block_Navigation extends Mage_Core_Block_Template
{
    //NEW:
    protected $_isAccordion = FALSE;

    protected $_categoryInstance = null;

    /**
     * Current category key
     *
     * @var string
     */
    protected $_currentCategoryKey;

    /**
     * Array of level position counters
     *
     * @var array
     */
    protected $_itemLevelPositions = array();

    protected function _construct()
    {
        $this->addData(array(
            'cache_lifetime'    => false,
            'cache_tags'        => array(Mage_Catalog_Model_Category::CACHE_TAG, Mage_Core_Model_Store_Group::CACHE_TAG),
        ));
    }

    /**
     * Get Key pieces for caching block content
     *
     * @return array
     */
    public function getCacheKeyInfo()
    {
        $shortCacheId = array(
            'CATALOG_NAVIGATION',
            Mage::app()->getStore()->getId(),
            Mage::getDesign()->getPackageName(),
            Mage::getDesign()->getTheme('template'),
            Mage::getSingleton('customer/session')->getCustomerGroupId(),
            'template' => $this->getTemplate(),
            'name' => $this->getNameInLayout(),
            $this->getCurrenCategoryKey()
        );
        $cacheId = $shortCacheId;

        $shortCacheId = array_values($shortCacheId);
        $shortCacheId = implode('|', $shortCacheId);
        $shortCacheId = md5($shortCacheId);

        $cacheId['category_path'] = $this->getCurrenCategoryKey();
        $cacheId['short_cache_id'] = $shortCacheId;

        return $cacheId;
    }

    /**
     * Get current category key
     *
     * @return mixed
     */
    public function getCurrenCategoryKey()
    {
        if (!$this->_currentCategoryKey) {
            $category = Mage::registry('current_category');
            if ($category) {
                $this->_currentCategoryKey = $category->getPath();
            } else {
                $this->_currentCategoryKey = Mage::app()->getStore()->getRootCategoryId();
            }
        }

        return $this->_currentCategoryKey;
    }

    /**
     * Get catagories of current store
     *
     * @return Varien_Data_Tree_Node_Collection
     */
    public function getStoreCategories()
    {
        $helper = Mage::helper('catalog/category');
        return $helper->getStoreCategories();
    }

    /**
     * Retrieve child categories of current category
     *
     * @return Varien_Data_Tree_Node_Collection
     */
    public function getCurrentChildCategories()
    {
        $layer = Mage::getSingleton('catalog/layer');
        $category   = $layer->getCurrentCategory();
        /* @var $category Mage_Catalog_Model_Category */
        $categories = $category->getChildrenCategories();
        $productCollection = Mage::getResourceModel('catalog/product_collection');
        $layer->prepareProductCollection($productCollection);
        $productCollection->addCountToCategories($categories);
        return $categories;
    }

    /**
     * Checkin activity of category
     *
     * @param   Varien_Object $category
     * @return  bool
     */
    public function isCategoryActive($category)
    {
        if ($this->getCurrentCategory()) {
            return in_array($category->getId(), $this->getCurrentCategory()->getPathIds());
        }
        return false;
    }

    protected function _getCategoryInstance()
    {
        if (is_null($this->_categoryInstance)) {
            $this->_categoryInstance = Mage::getModel('catalog/category');
        }
        return $this->_categoryInstance;
    }

    /**
     * Get url for category data
     *
     * @param Mage_Catalog_Model_Category $category
     * @return string
     */
    public function getCategoryUrl($category)
    {
        if ($category instanceof Mage_Catalog_Model_Category) {
            $url = $category->getUrl();
        } else {
            $url = $this->_getCategoryInstance()
                ->setData($category->getData())
                ->getUrl();
        }

        return $url;
    }

    /**
     * Return item position representation in menu tree
     *
     * @param int $level
     * @return string
     */
    protected function _getItemPosition($level)
    {
        if ($level == 0) {
            $zeroLevelPosition = isset($this->_itemLevelPositions[$level]) ? $this->_itemLevelPositions[$level] + 1 : 1;
            $this->_itemLevelPositions = array();
            $this->_itemLevelPositions[$level] = $zeroLevelPosition;
        } elseif (isset($this->_itemLevelPositions[$level])) {
            $this->_itemLevelPositions[$level]++;
        } else {
            $this->_itemLevelPositions[$level] = 1;
        }

        $position = array();
        for($i = 0; $i <= $level; $i++) {
            if (isset($this->_itemLevelPositions[$i])) {
                $position[] = $this->_itemLevelPositions[$i];
            }
        }
        return implode('-', $position);
    }

    /**
     * Render category to html
     *
     * @param Mage_Catalog_Model_Category $category
     * @param int Nesting level number
     * @param boolean Whether ot not this item is last, affects list item class
     * @param boolean Whether ot not this item is first, affects list item class
     * @param boolean Whether ot not this item is outermost, affects list item class
     * @param string Extra class of outermost list items
     * @param string If specified wraps children list in div with this class
     * @param boolean Whether ot not to add on* attributes to list item
     * @return string
     */
    protected function _renderCategoryMenuItemHtml($category, $level = 0, $isLast = false, $isFirst = false,
        $isOutermost = false, $outermostItemClass = '', $childrenWrapClass = '', $noEventAttributes = false)
    {
        if (!$category->getIsActive()) {
            return '';
        }
        $html = array();

        // get all children
        if (Mage::helper('catalog/category_flat')->isEnabled()) {
            $children = (array)$category->getChildrenNodes();
            $childrenCount = count($children);
        } else {
            $children = $category->getChildren();
            $childrenCount = $children->count();
        }
        $hasChildren = ($children && $childrenCount);

        // select active children
        $activeChildren = array();
        foreach ($children as $child) {
            if ($child->getIsActive()) {
                $activeChildren[] = $child;
            }
        }
        $activeChildrenCount = count($activeChildren);
        $hasActiveChildren = ($activeChildrenCount > 0);

        // prepare list item html classes
        $classes = array();
        $classes[] = 'level' . $level;
        $classes[] = 'nav-' . $this->_getItemPosition($level);
        if ($this->isCategoryActive($category)) {
            $classes[] = 'active';
        }
        $linkClass = '';
        if ($isOutermost && $outermostItemClass) {
            $classes[] = $outermostItemClass;
            $linkClass = ' class="'.$outermostItemClass.'"';
        }
        if ($isFirst) {
            $classes[] = 'first';
        }
        if ($isLast) {
            $classes[] = 'last';
        }
        if ($hasActiveChildren) {
            $classes[] = 'parent';
        }

        //NEW: add special class if level == 1 and menu is not an accordion.
        if ($this->_isAccordion == FALSE && $level == 1) {
            $classes[] = 'item';
        }

        // prepare list item attributes
        $attributes = array();
        if (count($classes) > 0) {
            $attributes['class'] = implode(' ', $classes);
        }
        if ($hasActiveChildren && !$noEventAttributes) {
             $attributes['onmouseover'] = 'toggleMenu(this,1)';
             $attributes['onmouseout'] = 'toggleMenu(this,0)';
        }

        // assemble list item with attributes
        $htmlLi = '<li';
        foreach ($attributes as $attrName => $attrValue) {
            $htmlLi .= ' ' . $attrName . '="' . str_replace('"', '\"', $attrValue) . '"';
        }
        $htmlLi .= '>';
        $html[] = $htmlLi;

if ($level == 0 && $hasChildren) {
        $html[] = '<a href="javascript:void(0)"'.$linkClass.'>';
        $html[] = '<span>' . $this->escapeHtml($category->getName()) . '</span>';
        $html[] = '</a>';
}
else {
        $html[] = '<a href="'.$this->getCategoryUrl($category).'"'.$linkClass.'>';
        $html[] = '<span>' . $this->escapeHtml($category->getName()) . '</span>';
        $html[] = '</a>';
} 

        // render children
        $htmlChildren = '';
        $j = 0;
        foreach ($activeChildren as $child) {
            $htmlChildren .= $this->_renderCategoryMenuItemHtml(
                $child,
                ($level + 1),
                ($j == $activeChildrenCount - 1),
                ($j == 0),
                false,
                $outermostItemClass,
                $childrenWrapClass,
                $noEventAttributes
            );
            $j++;
        }
        if (!empty($htmlChildren)) {

            //NEW: add opener if menu is used as accordion.
            if ($this->_isAccordion == TRUE)
                $html[] = '<span class="opener">&nbsp;</span>';

            if ($childrenWrapClass) {
                $html[] = '<div class="' . $childrenWrapClass . '">';
            }
            $html[] = '<ul class="level' . $level . '">';
            $html[] = $htmlChildren;
            $html[] = '</ul>';
            if ($childrenWrapClass) {
                $html[] = '</div>';
            }
        }

        $html[] = '</li>';

        $html = implode("\n", $html);
        return $html;
    }

    /**
     * Render category to html
     *
     * @deprecated deprecated after 1.4
     * @param Mage_Catalog_Model_Category $category
     * @param int Nesting level number
     * @param boolean Whether ot not this item is last, affects list item class
     * @return string
     */
    public function drawItem($category, $level = 0, $last = false)
    {
        return $this->_renderCategoryMenuItemHtml($category, $level, $last);
    }

    /**
     * Enter description here...
     *
     * @return Mage_Catalog_Model_Category
     */
    public function getCurrentCategory()
    {
        if (Mage::getSingleton('catalog/layer')) {
            return Mage::getSingleton('catalog/layer')->getCurrentCategory();
        }
        return false;
    }

    /**
     * Enter description here...
     *
     * @return string
     */
    public function getCurrentCategoryPath()
    {
        if ($this->getCurrentCategory()) {
            return explode(',', $this->getCurrentCategory()->getPathInStore());
        }
        return array();
    }

    /**
     * Enter description here...
     *
     * @param Mage_Catalog_Model_Category $category
     * @return string
     */
    public function drawOpenCategoryItem($category) {
        $html = '';
        if (!$category->getIsActive()) {
            return $html;
        }

        $html.= '<li';

        if ($this->isCategoryActive($category)) {
            $html.= ' class="active"';
        }

        $html.= '>'."\n";
        $html.= '<a href="'.$this->getCategoryUrl($category).'"><span>'.$this->htmlEscape($category->getName()).'</span></a>'."\n";

        if (in_array($category->getId(), $this->getCurrentCategoryPath())){
            $children = $category->getChildren();
            $hasChildren = $children && $children->count();

            if ($hasChildren) {
                $htmlChildren = '';
                foreach ($children as $child) {
                    $htmlChildren.= $this->drawOpenCategoryItem($child);
                }

                if (!empty($htmlChildren)) {
                    $html.= '<ul>'."\n"
                            .$htmlChildren
                            .'</ul>';
                }
            }
        }
        $html.= '</li>'."\n";
        return $html;
    }

    /**
     * Render categories menu in HTML
     *
     * @param bool Add opener if menu is used as accordion.
     * @param int Level number for list item class to start from
     * @param string Extra class of outermost list items
     * @param string If specified wraps children list in div with this class
     * @return string
     */
    public function renderCategoriesMenuHtml($isAccordion = FALSE, $level = 0, $outermostItemClass = '', $childrenWrapClass = '')
    {
        //NEW: save additional attribute
        $this->_isAccordion = $isAccordion;

        $activeCategories = array();
        foreach ($this->getStoreCategories() as $child) {
            if ($child->getIsActive()) {
                $activeCategories[] = $child;
            }
        }
        $activeCategoriesCount = count($activeCategories);
        $hasActiveCategoriesCount = ($activeCategoriesCount > 0);

        if (!$hasActiveCategoriesCount) {
            return '';
        }

        $html = '';
        $j = 0;
        foreach ($activeCategories as $category) {
            $html .= $this->_renderCategoryMenuItemHtml(
                $category,
                $level,
                ($j == $activeCategoriesCount - 1),
                ($j == 0),
                true,
                $outermostItemClass,
                $childrenWrapClass,
                true
            );
            $j++;
        }

        return $html;
    }

} 
```

我想为菜单项添加一个自定义类别属性（menu_label）。我已经使用本教程[http://www.atwix.com/magento/add-category-attribute/创建了自定义类别属性](http://www.atwix.com/magento/add-category-attribute/)

该属性在管理员中显示得很好，我可以让它打印在我的普通模板文件上，但不能让它显示在这个菜单中。

我以为 $this->escapeHtml($category->getMenuLabel()) 会做到这一点，但这不会输出任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T12:59:17.280

您必须考虑 Magento 在开/关平面类别上的行为不同的事实。
我想你可能在你的情况下使用平面类别，因为它应该可以正常工作。

（请检查系统>配置>目录>目录>前端字段“使用平面目录类别”。如果它设置为“是”，那么这就是你的问题所在。

要解决它，请将其添加到“前端”节点中的 config.xml 中：

```
<events>
    <catalog_category_flat_loadnodes_before>
        <observers>
            <somemodule>
                <type>singleton</type>
                <class>somemodule/observer</class>
                <method>addMenuAttributes</method>
            </somemodule>
        </observers>
    </catalog_category_flat_loadnodes_before>
</events> 
```

然后在模块的 Model 文件夹中创建一个 Observer.php（当然，模型文件夹也应该在 config.xml 中声明）。

这是观察者代码：

```
<?php
class Somecompany_Somemodule_Model_Observer {

    public function addMenuAttributes(Varien_Event_Observer $observer) {
        $observer->getSelect()->columns(
               array('menu_label')
        );
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T13:44:07.180

你的假设是不正确的：

```
$this->escapeHtml($category->getMenuLabel()) 
```

这假设 $category 确实是一个类别模型（Mage_Catalog_Model_category），而事实上它不是，它是一个 Node 对象。

如果你看这里：

```
Mage_Catalog_Model_Observer::_addCategoriesToMenu() 
```

您会注意到实际目录模型用于创建数组的位置，该数组作为 Varien_Data_Tree_Node 传递给 Navigation 例程。您可以在此处添加自定义属性，然后在块内访问它。

```
$categoryData = array(
    'name' => $category->getName(),
    'id' => $nodeId,
    'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
    'is_active' => $this->_isActiveMenuCategory($category),
    'my_attribute' => $category->getData('my_attribute')
); 
```

然后，您将能够访问自定义菜单块内的属性：

```
$child->getData('my_attribute');
//$this->escapeHtml($category->getData('my_attribute')) 
```

# windows - 配置文件 Windows 应用程序

> ID：16149184
> 
> 赞同：2
> 
> 时间：2013-04-22T14:05:59.097
> 
> 标签：windows, profiling

我想分析一个通用的 Win32 应用程序，我没有高级别的源代码。

我想它是这样工作的：

*   我指定要配置的应用程序
*   我执行特定操作
*   分析器告诉我在哪个 DLL 中花费了多少 CPU
*   I/O 等待或竞争锁的奖励积分

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T16:12:33.837

MS 免费提供了一个“Windows 性能工具包”。它使用内核级事件，因此非常精确，也支持堆栈跟踪。如果符号可用，它将使用符号。

你可以在这里得到它：http: [//blogs.msdn.com/b/ntdebugging/archive/2008/04/03/windows-performance-toolkit-xperf.aspx](http://blogs.msdn.com/b/ntdebugging/archive/2008/04/03/windows-performance-toolkit-xperf.aspx)

# python - 为应用程序保存 python 数据

> ID：16149187
> 
> 赞同：0
> 
> 时间：2013-04-22T14:06:06.143
> 
> 标签：python, file, numpy

我需要保存多个 numpy 数组以及用于计算这些数组包含在单个文件中的数据的用户输入。我很难找到一个好的程序来实现这一点，甚至是使用什么文件类型。我唯一能想到的就是将计算数组与用户输入一起放入一个数组中，然后使用 numpy.save 保存它。有人知道我使用的更好的替代品或好的文件类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:09:22.160

您可以尝试使用[Pickle](http://docs.python.org/2/library/pickle.html)来序列化您的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:10:01.347

如何使用`pickle`然后将腌制数组对象存储在您选择的存储中，例如数据库或文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:55:28.257

Numpy 提供了将数组保存到文件的函数，例如[savez()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savez.html)：

```
outfile = '/tmp/data.dat'
x = np.arange(10)
y = np.sin(x)
np.savez(outfile, x=x, y=y)
npzfile = np.load(outfile)
print npzfile['x']
print npzfile['y'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:10:26.260

我很久以前就遇到过这个问题，所以我附近没有代码可以给你看，但是我在 tmp 文件中使用了二进制写入来完成它。

编辑：就是这样，泡菜是我用的。感谢 SpankMe 和 RoboInventor

# git - 如何显示特定版本的文件？

> ID：16149194
> 
> 赞同：0
> 
> 时间：2013-04-22T14:06:16.583
> 
> 标签：git

正如问题所暗示的那样，我需要在特定提交时显示历史记录中的文件，我如何能够使用命令行来做到这一点？我的仓库是一个 git 远程仓库，有几个推送..

我不需要查看差异，我只是查看该特定提交处的整个文件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:08:18.643

```
git show commitid:path/to/file 
```

# css - @media（颜色）失败的颜色

> ID：16149197
> 
> 赞同：0
> 
> 时间：2013-04-22T14:06:24.260
> 
> 标签：css, colors, media-queries, usability

通过 CSS 将颜色应用于[`@media (color)`](http://www.w3.org/TR/css3-mediaqueries/#color)失败的设备的结果是什么？它类似于转换为灰度吗？还是使用了一些默认的非颜色？蓝色会变成灰色还是不可见？`a`'s 和' 是怎么`img`出现的？

我想大多数`screen`设备都会[支持某种程度的颜色](http://airve.com/mq/#mq-color)，而非颜色更适用于该`tty`类型。任何人都可以放弃一些关于哪些[类型](http://www.w3.org/TR/CSS2/media.html#media-types)可能缺乏颜色的知识吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:08:09.077

Kindle、电子墨水显示设备或早期每个孩子一台笔记本电脑怎么样？

我会想象这将取决于设备来决定如何渲染图像和文本的颜色。

# jquery - 以编程方式更改 Jquery Mobile 组件中的主题

> ID：16149206
> 
> 赞同：0
> 
> 时间：2013-04-22T14:06:52.990
> 
> 标签：jquery, jquery-mobile

为什么主题“e”没有反映在输出中？

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
        <title>title</title>

        <script>
            $(document).bind('pageinit', function() {
                $('input').attr('data-theme', 'e');
            });
        </script>

    </head>

    <body>

        <input type="text" />

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:39:15.013

由于`.textinput`不适用于`refresh`nor `create`，这里有一个简单的方法。

```
$('input').closest('div').removeClass('ui-body-c');
$('input').closest('div').addClass('ui-body-e'); 
```

输入的默认主题是`c`，因此您将其从父 div 中删除并添加主题`e`。但是，`textinput`仍然有`ui-body-c`类，但`ui-body-e`在添加到父 div 时会覆盖它。

**[演示](http://jsfiddle.net/Palestinian/2RkRK/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:02:25.110

似乎没有直接和简单的方法可以做到这一点。

Omar 提出了一个可行的解决方案，但这取决于 JQM 呈现组件的方式。如果他们更改渲染模型，这可能不适用于 JQM 的未来版本。

为什么我们不能考虑更换组件本身？（如下所示）

```
$('selector').html('<input type="text" data-theme="e"/>').trigger('create'); 
```

如果您的组件有很多属性，此方法可能有点奇怪，但它似乎可靠且适用于您希望动态更改的任何 JQM 组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:11:35.647

您可能必须触发刷新。

```
$('input').attr('data-theme', 'e').trigger('refresh'); 
```

# javascript - 回调get函数与事件驱动设计相结合

> ID：16149208
> 
> 赞同：0
> 
> 时间：2013-04-22T14:06:59.877
> 
> 标签：javascript, node.js, listener, event-driven

我想用 get 函数制作一个 API(node.js)。我使用的模块支持写入，所有传入数据都由我也可以订阅的事件发出。底层系统基于轮询。

但我还想添加写入的轮询器（使用 setInterval）。当我添加一个请求 rpm 的侦听器时，我每秒都会获得 RPM 信息。当我同时为 vss 调用 get 时，可能 data.name 和 type 不匹配。这让我现在搞砸了。

所以基本上，我可以在 else 块中填写什么，最佳实践是什么？或者这整个设计是一种不好的做法？在这种情况下不应该支持 get 吗？

```
function get(type, callback) {
    sp.once('dataReceived', function (data) {
        if(data.name === type) {
            switch (data.name) {
                case "rpm":
                    callback(new RPMEvent(data.value));
                    break;
                case "vss":
                    callback(new SpeedEvent(data.value));
                    break;
                default:
                    console.log('Not supported yet.');
                    break;
            }
        } else {
            console.log('Collision with poller and get. Not supported yet.');
            //What to do here? I should addlistener again?
        }
    });

    sp.requestValueByName(type);
} 
```

由于不同变量（rpm/vss）上的轮询器，可以发出更多的“dataReceived”事件。如何获得正确的 get 值？

我想得越久，我就越认为我不应该支持 get 函数，而这个 dataReceived 事件也是由轮询器触发的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:47:31.923

解决了。当有匹配时，我会移除监听器，并且我不再使用一次。

```
function get(type, callback) {
    var getMessageHandler = function (data) {
        if(data.name === type) {
            switch (data.name) {
                case "rpm":
                    callback(new RPMEvent(data.value));
                    break;
                case "vss":
                    callback(new SpeedEvent(data.value));
                    break;
                default:
                    console.log('Not supported yet.');
                    break;
            }
            this.removeListener('dataReceived', getMessageHandler);
        } else {
            console.log('Collision with listener and get. Not supported yet.');
            //Do nothing, let the next thing come in. Will be caught by generalHandler.
        }
    };

    sp.on('dataReceived', getMessageHandler);

    //Request value after callback.
    sp.requestValueByName(type);
} 
```

# jsf-2 - 进度条完成后更新数据表

> ID：16149210
> 
> 赞同：0
> 
> 时间：2013-04-22T14:07:09.340
> 
> 标签：jsf-2, primefaces

我想在进度条完成后触发 JavaScipt 函数。我试图嵌套以下标签：

```
<p:ajax event="complete" oncomplete="refreshTable();"/> 
```

我还尝试通过支持 bean 添加进度条组件，如下面的代码所示：

```
ProgressBar progressBar = new ProgressBar();
progressBar.setAjax(true);
AjaxBehavior ajaxAction = new AjaxBehavior();
ajaxAction.setOncomplete("refreshTable();");
progressBar.addClientBehavior("complete", ajaxAction); 
```

但最终没有调用 JS 函数。

我怎样才能实现这个功能？

使用的技术：*PrimeFaces 3.5、Mojarra 2.1.6 (SNAPSHOT 20111206)、PrimeFaces Extensions 0.6.3、GlassFish 3.1.2.2*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:19:58.943

您应该使用更新属性。如果您的 dataTable id 是 id="myDataTable" 那么您应该使用：

```
<p:progressBar ajax="true" value="#{progressBean.progress}">  
    <p:ajax event="complete" listener="#{...}" update="myDataTable"/>  
</p:progressBar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:32:10.373

正如 PrimeFaces 展示的那样，您应该使用嵌套在其中的[`<p:progressBar>`](http://www.primefaces.org/showcase/ui/progressBar.jsf)with标签。通过替换代码中的省略号，您可以在 的*属性*`<p:ajax>`中指定要在*属性*中*重新呈现的组件 ID`update`*和*客户端回调：`oncomplete`*`<p:ajax>`

```
<p:progressBar ajax="true" value="#{bean.progressVar}">
    <p:ajax event="complete" update="..." oncomplete="..."/>  
</p:progressBar> 
```

请注意，您可能更喜欢通过指定属性由 JSF 重新呈现数据表`update`，而不是通过指定属性在客户端上手动执行某些工作`oncomplete`。后者通常用于触发一些客户端 GUI 更改，例如显示/隐藏组件、切换样式类、打开对话框等，但不执行属于服务器端功能的操作。

* * *

关于以编程方式向组件添加 ajax 行为，您`<p:ajax event="complete" update="table-id" oncomplete="refreshTable()"/>`应该以编程方式等效于：

```
AjaxBehavior ab = new AjaxBehavior();
ab.setUpdate("table-id");
ab.setOncomplete("refreshTable()");
component.addClientBehavior("complete", ab); 
```

# ios - 使用 UIDocumentInteractionController 发布 Instagram 图片

> ID：16149211
> 
> 赞同：2
> 
> 时间：2013-04-22T14:07:11.637
> 
> 标签：ios, cocoa, crop, instagram

我正在使用 UIDocumentInteractionController 将图像发布到 Instagram iOS App，它运行良好。但是，当图像出现在 Instagram 中时，无法对其进行裁剪。跳过第一个裁剪步骤。我试图发布“非平方”图像，但裁剪仍然是不可能的。

有没有办法将图像发布到 Instagram 应用程序并允许用户像其他导入的图像一样裁剪它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T07:57:43.450

我认为现在不可能。

像[DMActivityInstagram](https://github.com/coryalder/DMActivityInstagram)这样的库包括一个他们自己的调整大小的视图控制器来解决这个问题。

# c++ - 标准 C++14 委员会草案是否公开？

> ID：16149212
> 
> 赞同：20
> 
> 时间：2013-04-22T14:07:11.867
> 
> 标签：c++, language-lawyer, c++14

[截至上周六...](http://isocpp.org/blog/2013/04/trip-report-iso-c-spring-2013-meeting)

> 今天下午在英国布里斯托尔，ISO C++ 标准委员会采用了通用 lambda、动态数组（C99 VLA 的改进版本）、变量模板、读/写锁、make_unique、可选、标准库用户定义的文字和一些其他语言和库改进——并批准将结果作为标准 C++14 的功能完整委员会草案 (CD) 分发给其主要的国际审查投票。

我有兴趣阅读有关新功能的详细信息，但我似乎找不到比上面链接中更多的关于它们的文章。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T14:33:38.027

> 这些和其他功能的更新论文以及更新的工作草案预计将在未来两到三周内提供。

从[这里](http://isocpp.org/blog/2013/04/trip-report-iso-c-spring-2013-meeting)。

[这也是一篇有趣的文章](http://meetingcpp.com/index.php/br/items/the-bristol-papers-the-state-of-c.html)

WG21 论文列表（2013）：[这里](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/#mailing2013-03)

标准提案谷歌组：[这里](https://groups.google.com/a/isocpp.org/forum/#!forum/std-proposals)

**更新 - 1：**

C++14 委员会草案 (CD) 公告：[这里](http://isocpp.org/blog/2013/05/c14-committee-draft-cd-published-at-isocpp.org)

C++14 委员会草案 (CD)，文档：[这里](http://isocpp.org/files/papers/N3690.pdf)

**更新 - 2：**

C++14 工作草案，文档：[这里](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf)

*注意：*工作草案和标准之间的区别可以在[这里找到](https://isocpp.org/std/the-standard)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:10:33.873

我不完全确定这是*官方*草案，但似乎是这样：[https ://github.com/cplusplus/draft](https://github.com/cplusplus/draft)

# build - Visual Build Pro - 使用 MySQL 数据源构建 Analysis Services Cube

> ID：16149215
> 
> 赞同：1
> 
> 时间：2013-04-22T14:07:17.363
> 
> 标签：build, ssas, mysql-connector, mysql.data, visual-build-professional

我正在尝试使用 Visual Build Pro v7 为我创建的 Analysis Services 多维数据集创建构建脚本。使用以下构建脚本步骤将多维数据集部署到我的本地计算机没有问题...

除了替换 .dwproj.user 文件中的目标服务器、备份和删除可能以前版本的多维数据集的任何痕迹之外，我的构建脚本只包含以下步骤：

```
Step 1 : "%VS2008IDE%\devenv.exe" "%PROJDIR%\%CUBE_NAME%.sln" /Build 
Step 2 : "%SSAS_Deploy_EXE%" "%PROJDIR%\%CUBE_NAME%\bin\%CUBE_NAME%.asdatabase" /s /o:"%PROJDIR%\deployscript.xmla"
Step 3 : "%ASCMD_LOCATION%" -S %CUBE_SQL_INSTANCE% -U DOMAIN\%UID% -P %PWD% -i "%PROJDIR%\deployscript.xmla" 
```

多维数据集的数据源是 MySQL 数据库。部署到远程服务器时，构建在第 3 步失败。

我已经在服务器上下载并安装了 MySql Connector/Net，但是当我运行构建脚本时出现以下错误：

```
<return xmlns="urn:schemas-microsoft-com:xml-analysis">
    <results xmlns="http://schemas.microsoft.com/analysisservices/2003/xmla-multipleresults">
        <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty"/>
        <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty">
            <Exception xmlns="urn:schemas-microsoft-com:xml-analysis:exception" />
            <Messages xmlns="urn:schemas-microsoft-com:xml-analysis:exception">
                <Error ErrorCode="3238002695" Description="Internal error: The operation terminated unsuccessfully." Source="Microsoft SQL Server 2008 R2 Analysis Services" HelpFile="" />
                <Error ErrorCode="3239116921" Description="Errors in the back-end database access module. The managed provider 'MySql.Data.MySqlClient' could not be instantiated." Source="Microsoft SQL Server 2008 R2 Analysis Services" HelpFile="" />
                <Error ErrorCode="3239182436" Description="Errors in the high-level relational engine. A connection could not be made to the data source with the DataSourceID of 'Linkdex', Name of 'Linkdex'." Source="Microsoft SQL Server 2008 R2 Analysis Services" HelpFile="" />
                <Error ErrorCode="3240034316" Description="Errors in the OLAP storage engine: An error occurred while the dimension, with the ID of 'Keyword', Name of 'Keyword' was being processed." Source="Microsoft SQL Server 2008 R2 Analysis Services" HelpFile="" />
                <Error ErrorCode="3240034317" Description="Errors in the OLAP storage engine: An error occurred while the 'Project Id' attribute of the 'Keyword' dimension from the 'LinkDexCube' database was being processed." Source="Microsoft SQL Server 2008 R2 Analysis Services" HelpFile="" />
                <Error ErrorCode="3239837698" Description="Server: The operation has been cancelled." Source="Microsoft SQL Server 2008 R2 Analysis Services" HelpFile="" />
            </Messages>
        </root>
        <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty"/>
    </results>
</return> 
```

当我检查 .asdatabase 和 .xmla 时，我可以看到我的 ConnectionString 中的用户 ID 和密码详细信息已被删除。我不确定这是为什么或发生在哪里？

有谁知道发生了什么？可能是权限问题还是与mysql连接器有关？还是第三种选择？

# tsql - TSQL将日期时间转换为int错误

> ID：16149216
> 
> 赞同：0
> 
> 时间：2013-04-22T14:07:18.273
> 
> 标签：tsql

SQL 在这一行给出错误：

`IF YEAR(@Var_Report_To)%(4)=0 AND MONTH(@Var_Report_To)>=3`

> 错误：不允许从数据类型 datetime 到 int 的隐式转换。使用 CONVERT 函数运行此查询。

关于如何解决的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-06T18:12:38.513

假设您的变量是合法日期，我认为您的表达没有问题。以下对我来说运行良好：

```
DECLARE @Var_Report_To DATETIME = '2016-03-01';

IF YEAR(@Var_Report_To)%(4)=0 AND MONTH(@Var_Report_To)>=3
SELECT GETDATE() 
```

# javascript - 使弹出式（非模态）浏览器窗口即使在不活动时也保持可见

> ID：16149219
> 
> 赞同：1
> 
> 时间：2013-04-22T14:07:23.143
> 
> 标签：javascript, popup

无论如何使弹出窗口（不是模式）保持可见，即使它处于非活动状态。我知道这听起来像是一个荒谬的问题，我希望这无法做到。

但如果可以的话，任何方向都将不胜感激。我找到了“依赖”属性，它不应该在我正在使用的 OSX 上工作。

[http://www.gtalbot.org/BugzillaSection/Bug195867GDR_WindowOpen.html#GrpFunctionalityFeatures](http://www.gtalbot.org/BugzillaSection/Bug195867GDR_WindowOpen.html#GrpFunctionalityFeatures)

我不需要它与跨浏览器/操作系统兼容，如果它可以在单个平台/浏览器上运行，那没关系。

我不确定“依赖”是否会成功，或者还有另一种/更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:49:20.087

我认为您无法使用浏览器中的 JavaScript 控制浏览器窗口的“始终位于顶部”行为。但是，如果弹出窗口始终位于顶部，则它一定会阻止浏览器窗口的一部分。因此，不要使用新的浏览器窗口，而是将其作为一个`<div>`块`position: fixed;`并将其放置在页面上您想要的位置。这可以通过 JavaScript 控制。

# java - Java EE / Struts 异常处理

> ID：16149220
> 
> 赞同：1
> 
> 时间：2013-04-22T14:07:28.167
> 
> 标签：java, exception, servlets, error-handling, struts

我已经开始主要在 Struts 和 Servlet 上开发 Java EE Web 应用程序。大多数代码在 Servlet 或 Struts Action 类中都有一个 try catch 块。

是否必须为每个 servlet 或操作设置 try catch 块？我看到这种代码模板的唯一优点是堆栈跟踪是日志到应用程序指定的日志框架，例如 log4j。

如果运行时异常上浮，它将被打印在服务器（Tomcat / Glassfish / Weblogic）日志上。

```
public class HelloWorldAction extends Action{

    public ActionForward execute(ActionMapping mapping,ActionForm form,
        HttpServletRequest request,HttpServletResponse response)
        throws Exception {

        try {
            // do all the processing here
        } catch (Exception e) {
            // log all exceptions
        }
    }

}

public class HelloWorldExample extends HttpServlet {

   public void doGet(HttpServletRequest request, HttpServletResponse response)
               throws IOException, ServletException {
     try {
        // do all the processing here
    } catch (Exception e) {
        // log all exceptions
    }
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:15:42.703

1.  捕捉`Exception`几乎从来都不是你真正想做的事情。希望很明显，*总是*有一个 try/catch 块不是强制性的——这取决于底层代码在做什么，以及您希望如何处理它可能抛出的任何异常。

2.  捕获`Exception`消除了使用[Struts 的声明性异常处理](http://struts.apache.org/release/1.2.x/userGuide/building_controller.html#exception_handler)的能力。

我建议*不要*在 Struts 1 中使用过滤器来处理异常，因为它已经内置了一个机制。如果在框架级别存在异常，它们无论如何都会显示出来，它们通常表示开发问题，而不是运行时问题。

我赞同 Andrea 的观点：除非你有一个非常好的理由，否则学习 Struts 1 是没有用的。请考虑使用 Struts 2 或 Spring MVC 进行“传统”框架开发，或者考虑使用 Play、Grails、JRuby on Rails 等进行更现代的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:14:32.237

如果您正在寻找一个地方进行异常日志记录，您可以创建 ServletFilter：

```
public class ExceptionLoggerFilter implements Filter {

    public void doFilter(ServletRequest req, ServletResponse res, FilterChain filterChain) {
        try {
            filterChain.doFilter(req, res);
        }
        catch(Exception e) { // Log exception }
    }
 } 
```

除非您想以特殊方式处理该特定异常，否则您实际上不必在任何地方捕获异常。大多数时候，它只是干扰“真实”代码的噪音。重要的是记录异常和足够的上下文信息，以便找出导致错误的原因。对于用户，您可能应该只显示一般错误页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T10:33:58.437

您可以在中指定**全局异常**`struts-config.xml`。它在整个应用程序中捕获未处理的异常。您需要实现自己的`ExceptionHandler`类。然后写代码想做什么。

**4.5 异常处理** [http://www.jajakarta.org/struts/struts1.2/documentation/ja/target/userGuide/building_controller.html](http://www.jajakarta.org/struts/struts1.2/documentation/ja/target/userGuide/building_controller.html)

# maps - Xpages 选项卡式窗格

> ID：16149228
> 
> 赞同：0
> 
> 时间：2013-04-22T14:07:39.990
> 
> 标签：maps, xpages, pane

我们正在尝试将 Google 地图自定义控件添加到 XPages 中选项卡式窗格的第 4 个选项卡

当我们这样做时，我们得到：

仅在左上角绘制地图的第一个小 10 分之一的地图。

如您所见，只会加载地图的第一部分。

我用谷歌搜索了一下，如果地图不在第一个选项卡上，如果没有“地图初始化功能的选项卡更改召回”，它将无法工作

我已经对此进行了测试，这是真的，当地图是选定的选项卡时，地图可以正常加载。

这是我们的标记：

```
<xe:djTabPane id="djTabPaneMap" title="Map">
            <xp:panel style="height:290px;width:860px" id="panel6">
                <xc:ccGoogleMaps map_height="290" map_width="860"
                    map_width_measurement="px" map_height_measurement="px"
                    map_zoom="5" map_type="ROADMAP" map_center_type="Address"
                    map_center_address="Broadstairs">
                </xc:ccGoogleMaps>
                </xp:panel>
            </xe:djTabPane> 
```

这是我知道的非常基本的东西，但我们似乎无法从切换选项卡中调用初始化映射函数。

有任何想法吗？？？

恐怕尽管多次尝试在选项卡更改时调用构建地图功能 - 使用 ID 或 CSS 类名我们无法完全绘制地图。

当地图位于选项卡式面板之外时，没有问题。

一旦我使用 Firebug 检查面板，地图就会正确呈现

非常感谢！

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:24:03.873

AFAIK，谷歌地图必须在 IFRAME 中。或者是吗？

# c++ - 如何在内容保持关联时按字母顺序对结构数组进行排序

> ID：16149234
> 
> 赞同：1
> 
> 时间：2013-04-22T14:07:47.980
> 
> 标签：c++, struct

```
struct Album {
  string title;
  string year;
  string track;
  vector<string> tracks;
}MyAlbums[5];

int j;
Album temp;
for(int i = 1; i < 5; i++)
{
  j = i - 1;
  while( j >= 0 && strcmp( MyAlbums[j+1].title[0], MyAlbums[j].title[0]) < 0 ){
    temp =  MyAlbums[j + 1];
    MyAlbums[j+1] = MyAlbums[j];
    MyAlbums[j] = temp;
    j--;
  }
} 
```

给我这个：从 'char' 到 'const char*' 的无效转换 [-fpermissive]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:11:17.173

C++

```
struct Album {
  string title;
  string year;
  string track;
  vector<string> tracks;

  bool operator<(const Album &a) const
  {
      return title.compare(a.title) > 0;
  }
} MyAlbums[5];

std::sort(std::begin(MyAlbums), std::end(MyAlbums)); 
```

C++11

```
std::sort(std::begin(MyAlbums), std::end(MyAlbums), [](const Album &a1, const Album &a2 ){
    return a1.title.compare(a2.title) > 0;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:12:22.710

出现错误，因为您正在比较`MyAlbums[j+1].title[0]`；的第一个元素`std::string`，它是 a `char`（或 a `const char`）但不是 a `const char*`！

可能你想要：

```
strcmp(MyAlbums[j+1].title.c_str(), MyAlbums[j].title.c_str())) < 0 
```

这在语法上是正确的，但不确定逻辑。

由于您使用的是 C++，因此您可以考虑使用[`std::sort(..)`](http://www.cplusplus.com/reference/algorithm/sort/).

另一种选择是改变你的设计和使用[`std::map(..)`](http://www.cplusplus.com/reference/map/map/)。在这里，您的所有数据都是*有序*的，可以使用迭代器（向前或向后）进行迭代。另一方面，您可以使用地图键轻松访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:11:24.020

您正在使用 STL 类，那么为什么要在有时`strcmp`使用`title.compare(title2)`？

您还以不正确的方式使用它，因为您试图比较两个`char`( `title[0]`) 而不是那个`char*`。

您可以使用自定义比较器，例如

```
struct cmp_str {
  bool operator()(const Album &a, const Album &b) {
    return a.title.compare(b.title) < 0;
  }
}; 
```

并相应地对集合进行排序`std:sort(..)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:11:54.797

`strcmp`需要一个`const char*`.

`MyAlbums[j+1].title[0]`返回一个`char`。

您最好的选择是使用`std::sort`和定义`operator<()`for `Album`。您也可以`.c_str()`使用`title`.

[有关strcmp](http://www.cplusplus.com/reference/cstring/strcmp/)的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T14:12:49.923

`std::string`有一个可以使用的比较方法。

```
while( j >= 0 && MyAlbums[j+1].title.compare(MyAlumbus[j].title) < 0)
{ ... } 
```

还，

`MyAlumbus[j].title[0]`在 a 上调​​用一个重载`operator[]`的 a`std::string`来取出第一个字符。

`strcmp ( const char * str1, const char * str2 )`是 的签名`strcmp`。它需要一个`char *`, 而你只是提供一个`char`.

# sqlite - Monotouch Sqlite-net 或 ADO.Net

> ID：16149261
> 
> 赞同：4
> 
> 时间：2013-04-22T14:08:55.053
> 
> 标签：sqlite, ado.net, xamarin.ios, sqlite-net

我想在我的 Monotouch 应用程序中使用 Sqlite 数据库。从 [http://docs.xamarin.com/recipes/ios/data/sqlite](http://docs.xamarin.com/recipes/ios/data/sqlite)我看到两个选项。

1.  Sqlite网
2.  网络

做研究我发现 Sqlite-net 易于使用，适用于 ios 和 android 但不支持外键概念。我需要在我的数据库中建立关系。学生表链接到班级、教授、作业表。没那么复杂！！！Sqlite-net 支持这种关系吗？选择 Sqlite-net 或 ADO.Net 哪个更好。赞赏...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:09:07.470

ADO.Net 也没有为您提供开箱即用的关系支持。它只给你像`SQLCommand`和这样的原始类`SQLDataReader`。

我强烈推荐 sqlite-net，因为它是一个 ORM 的巨大节省时间。

您可以通过在 sqlite-net 中调用手动 SQL 语句来设置外键，这与使用 ADO.Net 所做的相同。

因此，使用 sqlite-net，您可以通过多种方式设置数据库：

1.  调用 sqlite-net 的 API 以基于 C# 类创建表，然后添加它不支持手动 SQL 的东西，如外键和索引
2.  在您的应用程序中包含一个空数据库，并已设置完整架构
3.  使用原始 SQL 脚本创建整个数据库

如果我想完全控制数据库架构，我倾向于使用选项 #2（包含我在 SQLite Expert 中创建的数据库文件会更容易一些）。sqlite-net 应该可以很好地与现有数据库一起使用。

# java - 字符串索引超出范围

> ID：16149270
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:09:18.233
> 
> 标签：java, string, char

这是我要添加到二进制字符串的代码，我在`res`字符串中得到了正确的值，但在执行结束时它仍然给我一个异常。字符串`m1`&`m2`的长度相等，每个为 28。我仍然尝试只运行循环 10 次来验证，但错误仍然存​​在。这适用于 的任何值`i`，无论两个字符串的实际长度是大于还是小于。

```
public static String addMantissa(String m1,String m2)
{
    String res=" ";
    int c=0;
    System.out.println("Length is " + m2.length());
    int i=0;
    while(i < m2.length())
    {
        System.out.print(" " + res.charAt(i));
        if(m1.charAt(i)=='1' && m2.charAt(i)=='1')
        {
            if(c==0)
            {
                res+="0";
                c=1;
            }
            else
            {
                res+="1";
                c=1;
            }
        }

        if(m1.charAt(i)=='1' && m2.charAt(i)=='0')
        {
            if(c==0)
            {
                res+="1";
                c=0;
            }
            else
            {
                res+="0";
                c=1;
            }
        }

        if(m1.charAt(i)=='0' && m2.charAt(i)=='1')
        {
            if(c==0)
            {
                res+="1";
                c=0;
            }
            else
            {
                res+="0";
                c=1;
            }
        }

        if(m1.charAt(i)=='0' && m2.charAt(i)=='0')
        {
            if(c==0)
            {
                res+="0";
                c=0;
            }
            else
            {
                res+="1";
                c=0;
            }
        }
        i++;
    }

    return res;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:53:48.960

您的整个方法可以只替换为一行：

```
public static String addMantissa(String m1, String m2) {
    return new BigInteger(m1, 2).add(new BigInteger(m2, 2)).toString(2);
} 
```

您的问题中提到的 28 位大小意味着`Integer`该类可以用于解析，但 using`BigInteger`意味着可以处理*任何大小的字符串。*

您应该使用 JDK 而不是重新发明轮子。

此外，“代码越少越好”是一个很好的口头禅（当然，前提是代码保持清晰），并且该代码具有高密度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:33:35.477

实际上异常来自该行

```
 while(i < m2.length()) 
```

您需要将其更改为

```
while(i < m2.length() && i<m1.length()) 
```

好像 m1（比如 1）的长度低于 m2（比如 4），而您只检查 m2 的值。然后在第二次迭代中，它将以 2<4 的形式进入循环，当它试图获取 m1.carAt(2)（长度为 1）时，它会抛出 String index out of bounds 异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:29:42.183

@ShreyosAdikari 基本上是正确的。

```
System.out.print(" " + res.charAt(i)); 
```

应该在循环结束时调用，因为 res[i] 被填充。也许你的意思是：

```
System.out.print((" " + res).charAt(i)); 
```

但是你不打印最后一个循环的 res。

# d3.js - d3 fisheye(d) 返回未定义的对象

> ID：16149273
> 
> 赞同：0
> 
> 时间：2013-04-22T14:09:22.577
> 
> 标签：d3.js

所以我正在使用 d3 鱼眼插件，我遇到了一些非常基本的问题。我实现了这个非常基本的代码，几乎是从这里直接复制的[https://github.com/d3/d3-plugins/tree/master/fisheye](https://github.com/d3/d3-plugins/tree/master/fisheye)

```
 fisheye = d3.fisheye.circular()
        .radius(200)
        .distortion(2);

    //initialize fisheye
    chart.on("mousemove", function() {
        fisheye.focus(d3.mouse(this));

        dataPoint.each(function(d) { d.fisheye = fisheye(d); })
            .attr('y', function(d){ return d.fisheye.y; })
            .attr('x', function(d){ return d.fisheye.x; });
    }); 
```

但是`d.fisheye.x`和`d.fisheye.y`是未定义的。实际上，查看`fisheye(d)`，它返回：

```
 {x: undefined, y: undefined, z: 1} 
```

另一方面，`d3.mouse(this)`正确地返回一个数组。

有没有人建议为什么会发生这种情况？

更多代码：顺便说一句，代码是这样的，因为它在一个ext-js面板里面，所以每个函数（drawWords是这个对象的一个​​属性）。这有点复杂，这就是为什么我犹豫要全部发布的原因，这仍然不是所有代码，而是我认为的相关部分。我没有包括任何其他全局变量或辅助函数的初始化。

```
//imagine some sort of onload function
    onLoad: function () {
         this.drawWords();
         this.animateVis();
    }

,drawWords: function () {
    toolObject = this;
    var h = this.body.getHeight(),
        w = this.body.getWidth();

    //initialize word text
    this.dataPoint = this.chart.selectAll('text')
        .data(toolObject.termometerData, function (d) {return d.word;})
      .enter().append('text')
        .attr('class', 'points')
        .attr('id', function(d) {return d.word + '-point';})
        .attr('x', function() {
            return toolObject.xScale(toolObject.shiftCount);
        })
        .attr('y', function (d) {
            return toolObject.fanVertical(d, toolObject.shiftCount);
        })
        .attr('transform', function (d) {
            var thisXPosition = toolObject.xScale(toolObject.shiftCount),
                thisYPosition = toolObject.fanVertical(d, toolObject.shiftCount);
            return 'translate(0, 0) rotate(-20 ' + thisXPosition + ' ' + thisYPosition + ')';
        })
        .attr('text-anchor', 'middle')
        .attr('fill-opacity', function (d) {return toolObject.opacityScale(0);})
        .text(function(d) {return d.word;});

    this.applyFisheye();
 }

 ,fisheye: d3.fisheye.circular()
        .radius(200)
        .distortion(2)

 ,applyFisheye: function () {
    var toolObject = this;

    //initialize fisheye
    this.chart.on("mousemove", function() {

        fisheye.focus(d3.mouse(this));

        toolObject.dataPoint.each(function(d) { d.fisheye = toolObject.fisheye(d); })
            .attr('y', function(d){ return d.fisheye.y; })
            .attr('x', function(d){ return d.fisheye.x; })
            .attr('transform', function(d){
                return 'translate(0, 0) rotate(-20 ' + d.fisheye.x + ' '+ d.fisheye.y + ')';
            });
    });
 }
 ,animateVis: function () {
    var toolObject = this;
    var h = this.body.getHeight(),
        w = this.body.getWidth();

    var tick;

    if(this.animationIdArray.length < 1){
        tick = setInterval(function(){
            animate();
        }, this.duration);
        this.animationIdArray.push(tick);
    }

    function animate() {
        if(toolObject.shiftCount < toolObject.numDataPoints){
            toolObject.shiftCount++;

            //animate words
            toolObject.dataPoint.transition()
                .duration(toolObject.duration)
                .ease('linear')
                .attr('x', function(d){ return toolObject.xScale(toolObject.shiftCount - 1); })
                .attr('y', function(d){ return toolObject.fanVertical(d, toolObject.shiftCount - 1); })
                .attr('transform', function(d){
                    var thisXPosition = toolObject.xScale(toolObject.shiftCount - 1),
                        thisYPosition = toolObject.fanVertical(d, toolObject.shiftCount - 1);
                    return 'translate(0, 0) rotate(-20 ' + thisXPosition + ' '+ thisYPosition + ')';
                })
                .attr('fill-opacity', function(d){
                    return toolObject.opacityScale(d.series[toolObject.shiftCount - 1].freq);
                });

            toolObject.applyFisheye();
        }else{
            clearInterval(tick);
            toolObject.animationIdArray.shift();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T20:49:14.167

fisheye 假定对象的 x 和 y 坐标由名为“x”和“y”的键定义。使用它可能就足够了（但可能有点矫枉过正，取决于调用此代码的频率）

```
this.dataPoint
    .each(function(d) { 
        d.x = toolObject.xScale(toolObject.shiftCount);
        d.y = toolObject.fanVertical(d, toolObject.shiftCount)
    .attr('x', function(d) { return d.x; })
    .attr('y', function(d) { return d.y; }); 
```

当你`//initialize word text`

# c - 位运算 - 指示有符号整数的符号

> ID：16149277
> 
> 赞同：0
> 
> 时间：2013-04-22T14:09:39.477
> 
> 标签：c, binary, bit-manipulation

为什么下面的 C 代码不能返回负数的 -1、0 的 0 和正数的 1？

```
(((x >> 31) ^ -1) + 1) | (!x ^ 1); 
```

具体来说，当我传入负数时，它返回 1。似乎如果我有一个负数（即，31 位移位后的最低有效位是 1），用 -1 异或会给我-2（即，所有 1 和最低有效位位置中的 0），加 1 将使其变为 -1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:16:02.163

`>>` will generally do arithmetic shift on signed data, so `((-1) >> 31) == (-1)`, contrary to your assumption. As pointed out by others, this is not guaranteed by the standard, but it is most likely true on modern systems. In any case, be careful with this type of bit twiddling. If portability is a concern or speed is not, you should do it a different way. See [Is there a standard sign function (signum, sgn) in C/C++?](https://stackoverflow.com/questions/1903954/is-there-a-standard-sign-function-signum-sgn-in-c-c) for some ideas.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:02:01.447

根据 C99 标准，`x >> n`如果 x 为负的结果是实现定义的。因此，您遇到问题的原因取决于您的编译器和架构。

但是，当您移动它时，x 很可能是符号扩展的，即重复最高位以保持符号与操作数相同。这就是我的编译器发生的事情。所以对于任何负数，`x >> 31`是`-1`。此外，对于任何非零数`!x`都是 0（即假）。这适用于假设 x 是 32 位整数。如果您将 x 设为无符号整数，它应该可以工作，但请考虑以下替代方案：

```
(x < 0) ? -1 : ((x > 0) ? 1 : 0) 
```

我认为这不那么神秘。

这是一个程序，您可以使用它来查看您的表情在做什么

```
#include <stdio.h>
#define EVALUATE(x)     printf("%s = %d\n", #x, x)
int main(int argc, char** argv)
{
    unsigned        int x = 51;

    EVALUATE(x >> 31);
    EVALUATE(((x >> 31) ^ -1));
    EVALUATE(((x >> 31) ^ -1) + 1);
    EVALUATE(!x);
    EVALUATE(!x ^ 1);
    EVALUATE((((x >> 31) ^ -1) + 1) | (!x ^ 1));
    return 0;
} 
```

# java - 在java代码中用一个替换多个字符串

> ID：16149281
> 
> 赞同：0
> 
> 时间：2013-04-22T14:09:59.727
> 
> 标签：java, string, text, merge, concatenation

我需要更换：

```
myVariable = "sample string is long " +
  "so I put rest of it in 2nd line." +
  " And sometimes in 3rd and so on"; 
```

和：

```
myVariable = "sample string is long so I put rest of it in 2nd line. And sometimes in 3rd and so on"; 
```

附加问题：如何合并像上面这样的实体，我在连接链中有其他变量？

```
myVar = "The number of the beast is " + numberOfTheBeast + " !!! So I said"; 
```

我想做的是将其更改为带有参数的单个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T05:34:12.623

我不是正则表达式专家，但这三个正则表达式替换应该可以解决问题。大多数 IDE 都有正则表达式替换功能。

```
Replace:     With:
\s*\+\s*\n    +   (space, plus, space)
"\s*\+\s*"   nothing
\s*\+\s*      +   (space, plus, space) 
```

如果您在 Windows 上，您可能必须使用 \s*+\s*\r\n 作为第一个正则表达式。

# java - Java 中的方法签名是否包括其返回类型？

> ID：16149285
> 
> 赞同：104
> 
> 时间：2013-04-22T14:10:10.110
> 
> 标签：java, method-signature

Java 类/接口中的方法签名是否包括其返回类型？

例子：

Java是否知道这两种方法之间的区别：

```
public class Foo {
    public int  myMethod(int param) {}
    public char myMethod(int param) {}
} 
```

还是只有方法名称和参数列表才重要？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-04-22T14:17:42.033

引用[Oracle 文档](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)：

> 定义：方法声明的两个组成部分包括***方法签名***——方法的名称和参数类型。

![在此处输入图像描述](https://i.stack.imgur.com/NLlbQ.png)

由于对问题进行了编辑以包含此示例：

```
public class Foo {
    public int  myMethod(int param) {}
    public char myMethod(int param) {}
} 
```

不，编译器不会知道区别，因为它们的签名：`myMethod(int param)`是相同的。第二行：

```
 public char myMethod(int param) {} 
```

会给你错误：**方法已经在类中定义**，这进一步证实了上述说法。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-22T14:12:11.363

> Java中的类方法签名是否包括返回类型？

在 Java 中，它没有，但在这个 JVM 中，它会导致明显的混乱。

> Java中的接口方法签名是否包括返回类型？

与类方法相同。

> 还是只有方法名称和参数列表？

Java 的方法名称和参数类型。例如，参数注释和名称无关紧要。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-22T14:22:39.997

在字节码级别，“返回类型”是方法签名的一部分。考虑这个

```
public class Test1  {
    public Test1 clone() throws CloneNotSupportedException {
        return (Test1) super.clone();
    }
} 
```

在字节码中有 2 个 clone() 方法

```
public clone()LTest1; throws java/lang/CloneNotSupportedException 

public clone()Ljava/lang/Object; throws java/lang/CloneNotSupportedException 
```

它们仅在返回类型上有所不同。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-28T07:11:51.457

不，不是在 Java 中。[方法名称和参数列表仅用于方法签名](http://javalearnsimply.weebly.com/5/post/2014/04/methods-parameters-and-return-types.html)。返回类型不包括。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-22T14:12:25.773

[**Java 语言规范**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)说

> 如果两个方法具有相同的名称和参数类型，则它们具有相同的签名。

因此不，返回类型不是方法签名的一部分。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-10-10T04:48:21.893

在 JAVA 和许多其他语言中，您可以调用不带变量的方法来保存返回值。如果返回类型是方法签名的一部分，则在没有指定保存返回值的变量的情况下，无法知道调用时将调用哪个方法。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-12-01T05:18:15.523

兄弟，在 java 中，我们使用方法的名称和参数来调用方法，只是为了在我们的代码中使用它们，比如

**我的方法(20, 40)**

所以，JAVA 只在其相应的声明（名称+参数）中搜索匹配的类似内容，这就是为什么方法签名只包含方法的名称和参数的原因。:)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-22T14:11:50.243

方法签名只是名称和参数列表。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-04-22T14:13:31.107

不，在 Java 中，方法签名不包含返回类型，但声明包含。

```
public             String         getString(String myString)

^access modifier   ^return type   ^name    ^parameter type and name 
```

根据以下反馈进行编辑:)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-08-02T04:42:54.810

返回类型不包含在方法签名中。只有**方法名称**和**参数**被定义为方法签名。

参考：[Oracle Docs '定义方法'](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-06-26T19:12:53.650

使用 AspectJ (org.aspectj.lang.reflect.MethodSignature)，它确实有返回类型

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-06-08T08:40:56.930

方法签名包括返回类型。

当必须检查重复项时，编译器会忽略它。对于 Java 来说，拥有两个签名仅因返回类型不同的方法是非法的。

试试看：

```
public class Called {
    public String aMethod() {
        return "";
    }
}

public class Caller {
    public static void main(String[] main) {
        aMethod();
    }
    public static void aMethod() {
        Called x = new Called();
        x.aMethod();
    }
} 
```

构建项目，进入 bin 目录，将*Caller.cass*复制到某处。然后改变被调用的方法：

```
public int aMethod() {
    return 0;
} 
```

构建项目，你会看到 Called.class 和 Caller.class 都有一个新的时间戳。替换上面的 Caller.class 并运行项目。你会有一个例外：

```
java.lang.NoSuchMethodError: it.prova.Called.aMethod()Ljava/lang/String; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-02-02T00:01:13.227

如果您尝试运行您在 Eclipse 上提到的代码，您将得到关于 java 编译器寻找哪些元素来区分 java 方法的答案：

```
class Foo {
    public int  myMethod(int param) {
        return param;}
    public char *myMethod*(int param) { //this line throws an error 
        return param;
    }
} 
```

抛出的错误是：重复方法 myMethod(int) in type Foo 。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-10-10T05:16:16.393

方法签名只是方法的名称和参数。但我相信如果他们在同一个班级，你的例子会产生错误。[您可以在任何 ide 上简单地对其进行测试，然后查看编译器会抛出错误](http://i.stack.imgur.com/zAf80.png)

# smtp - 防止电子邮件分组进入 Gmail 中的对话视图

> ID：16149286
> 
> 赞同：7
> 
> 时间：2013-04-22T14:10:10.290
> 
> 标签：smtp, gmail

我正在为客户开发一项功能，以便在他们的网站上发生特定事件时向他们发送电子邮件更新。当邮件显示在 Gmail 中时，即使它们不是同一个对话，它们也会在对话视图中组合在一起。这似乎是因为[Gmail 仅基于主题进行分组](https://webapps.stackexchange.com/q/16095/35772)。客户坚持我们不会更改主题行（不要让我开始）。

有谁知道我可以通过在邮件中发送一个特殊的标题来禁用它，还是我不走运？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:18:55.937

似乎没有办法阻止这种情况，除非关闭对话视图（你考虑过吗？）。

我的猜测是，Gmail 实际上是基于它自己的`Thread-Topic`标头字段进行线程化的，它会添加（覆盖您传递的任何值；它只是复制主题字段） - 但是，除非您可以在事后更改该字段，否则无法判断. 这导致了编写 IMAP 应用程序来下载消息、编辑标题并重新上传的建议。不过，您需要调查这样做的可行性。

# r - R 脚本文件编码 (R Studio)

> ID：16149291
> 
> 赞同：1
> 
> 时间：2013-04-22T14:10:27.657
> 
> 标签：r, encoding

我必须使用哪种文件编码才能在 R 脚本中正确保存此向量（[匹配文本块中的复杂 URL (R) ）？](https://stackoverflow.com/questions/16059050/matching-complex-urls-within-text-blocks-r/16136857#16136857)特殊字符和中文符号似乎使事情变得复杂。

```
x <-   c("http://foo.com/blah_blah",
        "http://foo.com/blah_blah/",
        "(Something like http://foo.com/blah_blah)",
        "http://foo.com/blah_blah_(wikipedia)",
         "http://foo.com/more_(than)_one_(parens)",
         "(Something like http://foo.com/blah_blah_(wikipedia))",
         "http://foo.com/blah_(wikipedia)#cite-1",
         "http://foo.com/blah_(wikipedia)_blah#cite-1",
         "http://foo.com/unicode_(✪)_in_parens",
         "http://foo.com/(something)?after=parens",
         "http://foo.com/blah_blah.",
         "http://foo.com/blah_blah/.",
         "<http://foo.com/blah_blah>",
         "<http://foo.com/blah_blah/>",
         "http://foo.com/blah_blah,",
         "http://www.extinguishedscholar.com/wpglob/?p=364.",
         "http://✪df.ws/1234",
         "rdar://1234",
         "rdar:/1234",
         "x-yojimbo-item://6303E4C1-6A6E-45A6-AB9D-3A908F59AE0E",
         "message://%3c330e7f840905021726r6a4ba78dkf1fd71420c1bf6ff@mail.gmail.com%3e",
         "http://➡.ws/䨹",
         "www.c.ws/䨹",
         "<tag>http://example.com</tag>",
         "Just a www.example.com link.",
         "http://example.com/something?with,commas,in,url, but not at end",
         "What about <mailto:gruber@daringfireball.net?subject=TEST> (including brokets).",
         "mailto:name@example.com",
         "bit.ly/foo",
         "“is.gd/foo/”",
         "WWW.EXAMPLE.COM",
         "http://www.asianewsphoto.com/(S(neugxif4twuizg551ywh3f55))/Web_ENG/View_DetailPhoto.aspx?PicId=752",
         "http://www.asianewsphoto.com/(S(neugxif4twuizg551ywh3f55))",
         "http://lcweb2.loc.gov/cgi-bin/query/h?pp/horyd:@field(NUMBER+@band(thc+5a46634))") 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:53:27.763

运行你的例子，

```
source('file.R', encoding="unknown") 
```

可以正常工作并保存为 R 对象并重新加载也可以：

```
 save(x, file='kk.Rd')
 load('kk.Rd') 
```

您可以获取所有不同的编码`iconvlist()`并对其进行测试，例如：

```
vals <- lapply(iconvlist(), function(x)
                      tryCatch(source('file.R', encoding=x),                
                               error=function(e)return(NULL))) 
```

成为你的`file.R`剧本，然后

```
iconvlist()[which(!sapply(vals, function(x)is.null(x)))] 
```

为您提供加载时未引发错误的所有编码。

这有帮助吗？

# jsf-2 - 当 myfaces.ERROR_HANDLING 设置为 false 时，异常不会重定向到错误页面

> ID：16149292
> 
> 赞同：4
> 
> 时间：2013-04-22T14:10:28.923
> 
> 标签：jsf-2, tomcat7, myfaces, servlet-3.0

我已经实现了一个错误 JSF 页面，它为用户提供了基本信息。它是由`<error-page>`我的标签触发的`web.xml`

```
<error-page>
    <location>/error</location>
</error-page> 
```

这适用于 404 错误。为了将它也用于异常，我在 MyFaces 2.1.10 中禁用了错误处理`web.xml`

```
<context-param>
    <param-name>org.apache.myfaces.ERROR_HANDLING</param-name>
    <param-value>false</param-value>
</context-param> 
```

在[https://cwiki.apache.org/confluence/display/MYFACES/Handling+Server+Errors#HandlingServerErrors-Provideanerrorpage](https://cwiki.apache.org/confluence/display/MYFACES/Handling+Server+Errors#HandlingServerErrors-Provideanerrorpage)它说异常应该触发重定向到`/error`. 但是，当我`RuntimeException`在代码中抛出 a 时，它会显示在日志中，但用户得到的只是一个空白页面。

我似乎无法弄清楚为什么以及如何（如果可能）获得预期的行为。

应用服务器是tomcat-7.0.35

# xcode - Mac App - 从 XCode 导出的 pkg 未在 10.7.5 中打开

> ID：16149297
> 
> 赞同：1
> 
> 时间：2013-04-22T14:10:40.973
> 
> 标签：xcode, macos, osx-lion, pkg-file

我有一个 Mac 应用程序，我使用最新的 XCode 将其导出为 pkg 以进行分发。
部署目标是 10.7.3。

我收到很多用户报告说应用程序无法安装在 10.7.5 “应用程序名称无法安装在这台计算机上”

日志中没有更多信息。
我的理解是，当仅 64 位应用程序安装在 32 位模式操作系统上时，可能会出现此消息，但系统运行的是 64 位内核。

关于如何解决这个问题的任何想法？到目前为止，问题似乎只发生在 10.7.5 上，可能是 10.7.5 的错误，但我仍然需要解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T19:13:13.180

我可以通过按照[使 OS X 安装程序包像 Pro - Xcode 开发人员 ID 就绪 pkg](https://stackoverflow.com/questions/11487596/making-os-x-installer-packages-like-a-pro-xcode4-developer-id-mountain-lion-re)

然而，我不得不稍微绕过这个过程，主要是因为我为应用程序提供了特权帮助工具。

这些是我的步骤，通过绝望的尝试错误地伪造，您的里程可能会有所不同：

```
 # In the release directory built by xcode, app already signed by xcode:
$ pkgbuild --component MyApp.app --install-location /Applications  MyApp.pkg
$ productbuild --synthesize --package MyApp.pkg Distribution.xml
$ productbuild --distribution Distribution.xml --package-path . ./Installer.pkg
$ nano Distribution.xml
  # added attribute customLocation="/Applications" 
  # to the choice-element for my app id.
$ productsign --sign "Developer ID Installer: Jon Larsson (...)" \
    Installer.pkg InstallerSigned.pkg 
```

s 生成了一个可接受的安装程序，虽然有点不完整，我认为这是因为 Distribution.xml 不完整。

# facebook-like - 添加 Facebook 社交插件

> ID：16149299
> 
> 赞同：0
> 
> 时间：2013-04-22T14:10:47.967
> 
> 标签：facebook-like

我觉得问这个问题完全是愚蠢的，尤其是在设计和构建网站这么多年之后。我一直在研究如何让 Facebook 社交插件为我的网站工作大约一周，但我完全陷入了困境。所以，我已经剥离了我能想到的一切，只在这里有一个完全基本的页面。我完全按照 Facebook 开发者工具的要求做了，但我什么也没得到。下面是我的代码，任何建议都会很棒！

只是为了继续解决这个问题，它说'APP_ID'，我确实输入了我的应用程序ID，但我仍然没有得到任何通过。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>

<script src="scripts/JavaScript_v1_9_1.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>

<link href="fonts/OpenSans/stylesheet.css" rel="stylesheet" />
<link href="bootstrap/css/bootstrap.css" rel="stylesheet" />

</head>
<body>
<div id="fb-root"></div>
<script>(function (d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=APP_ID";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="https://www.facebook.com/DippPicks" data-send="true"         data-width="450" data-show-faces="true" data-font="segoe ui"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:58:22.233

[我已经使用此处](https://developers.facebook.com/docs/reference/javascript/#loading)显示的代码成功使用了 FB 插件，即：

```
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'YOUR_APP_ID',                        // App ID from the app dashboard
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel file for x-domain comms
      status     : true,                                 // Check Facebook Login status
      xfbml      : true                                  // Look for social plugins on the page
    });

    // Additional initialization code such as adding Event Listeners goes here
  };

  // Load the SDK asynchronously
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script> 
```

当您单击“获取代码”按钮时，这与 FB 插件页面中显示的代码略有不同，方法是`FB.init`预先包含该块并在其中传递 App Id 而不是在 js.src 属性中。

# xml - (WiX) - 使用预构建事件 (heat.exe) 自动生成 GUID

> ID：16149300
> 
> 赞同：3
> 
> 时间：2013-04-22T14:10:48.640
> 
> 标签：xml, wix, guid, wix3.5, wix3

我为我的目录/文件做了一个预构建事件。现在它创建 source.wxs 很好，但只有'GUID =“*”'，所以现在我得到编译器错误，因为它没有映射到 ProgrammFilesFolder，但每个组件都需要一个唯一的 GUID：

```
Path" %SystemDrive%\st /MIR
"%WIX%\bin\heat.exe" dir %SystemDrive%\st -dr INSTALLDIRECTORYFOLDER -cg    SourceComponentGroup -var var.SourcePath -ag -out "$(SolutionDir).\Setup\source.wxs" 
```

结果：

```
<Component Id="cmp97CD2699CFD0E466AE00E9EE0BC75B3D" Directory="dirE9158D60656EC6CD461378A2C8EDC064" Guid="*">
     <File Id="filD6533D5A559BC86E4704F435FEEE2A5A" KeyPath="yes" Source="$(var.SourcePath)\test1.txt" />
</Component> 
```

我可以更改任何参数以获得所需的效果吗？我找不到有关参数的任何文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:36:34.607

在不知道确切的编译器错误的情况下，我不能说这是否会解决它，但是要获得热量来为您生成 guid，您需要的是`-gg`switch 而不是`-ag`. 仅供参考，命令行选项可以在[这里](http://wix.sourceforge.net/manual-wix3/heat.htm)找到。

# php - 连接来自不同数据库的两个表

> ID：16149301
> 
> 赞同：0
> 
> 时间：2013-04-22T14:10:48.500
> 
> 标签：php, mysql, phpmyadmin

我知道有很多关于此的帖子，但我无法使其适用于我的代码。

正如标题所示，我想将来自两个不同数据库的两个表连接在一起。

这是我的代码：

```
 $dbh1 = mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    $dbh2 = mysql_connect("$host2", "$username2", "$password2", true)or die("cannot connect"); 
    mysql_select_db("$db_name", $dbh1)or die("cannot select DB");
    mysql_select_db("$db_name2", $dbh2)or die("cannot select DB");

//first table  
//$sql = mysql_query("SELECT InterestedEntityId, Score FROM users.`user_interests` WHERE UserId= //$userID ORDER BY Score DESC", $dbh1);

//second table
//$sql = mysql_query("SELECT entities.`Name` FROM tags.`entities` WHERE Id = InterestedEntityId", $dbh2); 
```

我想一次性获取 select 语句中提到的 3 个字段（IE InterestedEntityId、Score、entities. `Name`）

关于如何在一个 sql 查询中连接这两个表的任何想法。我尝试使用内部联接并添加表名（如[该](https://stackoverflow.com/questions/4897954/joining-tables-from-different-database)线程建议的那样），但查询没有返回任何内容。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:15:39.747

Something like this should work.

```
SELECT t1.InterestedEntityId, t1.Score, t2.Name
  FROM DB1.users.`user_interests` t1
  JOIN DB2.tags.`entities` t2 ON t2.UserId = t1.Id 
```

Note: Use PDO as mysql_* is deprecated and not secure enough.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:15:48.523

[**Please, don't use `mysql_*` functions in new code**](https://stackoverflow.com/q/12859942). They are no longer maintained [and are officially deprecated](https://wiki.php.net/rfc/mysql_deprecation). See the [**red box**](http://php.net/mysql-connect)? Learn about [*prepared statements*](http://en.wikipedia.org/wiki/Prepared_statement) instead, and use [PDO](http://php.net/pdo) or [MySQLi](http://php.net/mysqli) - [this article](http://php.net/mysqlinfo.api.choosing) will help you decide which. If you choose PDO, [here is a good tutorial](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers).

* * *

While it is theoretically possible to join tables from two different databases *on the same server*, what you are trying to do cannot possibly work because you appear to be accessing two different servers.

In order to get the result set you want you will need to combine them manually.

For example (using PDO):

```
$dsn1 = "mysql:host=$host;dbname=$db_name";
$dsn2 = "mysql:host=$host2;dbname=$db_name2";

try {
    // Create the connections
    $db1 = new PDO($dsn1, $username, $password);
    $db1->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db1->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $db1->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);

    $db2 = new PDO($dsn2, $username2, $password2);
    $db2->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db2->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $db2->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);

    // Get the initial recordset
    $sql1 = "
        SELECT InterestedEntityId, Score
        FROM `user_interests`
        WHERE UserId = :userId
        ORDER BY Score DESC
    ";
    $stmt1 = $db1->prepare($sql1);
    $stmt1->bindParam('userId', $userID, PDO::PARAM_INT);
    $stmt1->execute();

    // Prepare the statement for the second database
    $sql2 = "
        SELECT Name
        FROM entities
        WHERE Id = :entityId
    ";
    $entityId = 0;
    $stmt2 = $db2->prepare($sql2);
    $stmt2->bindParam('id', $entityId, PDO::PARAM_INT);

    // Loop the first result set
    $result = array();
    foreach ($stmt1 as $row1) {
        // Fetch the related data from the second DB
        $entityId = $row1['InterestedEntityId'];
        $stmt2->execute();
        $row2 = $stmt2->fetch();

        // Construct the final result row and store it
        $result[] = array(
            'InterestedEntityId' => $row1['InterestedEntityId'],
            'Score' => $row1['Score'],
            'Name' => $row2['Name']
        );
    }
} catch(PDOException $e) {
    die($e->getMessage());
}

// The result set you want should now be available
var_dump($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:16:13.203

Pretty much the model is:

```
SELECT dbName1.TableName1.ColumnName1, dbName2.TableName2.ColumnName2 FROM dbName1.TableName1 JOIN dbName2.TableName2 ON dbName1.TableName1.ColumnName1 = dbName2.TableName2.ColumnName2 
```

# visual-studio - 使用 SharePoint 2007 连接到网络上的共享驱动器

> ID：16149303
> 
> 赞同：0
> 
> 时间：2013-04-22T14:10:54.423
> 
> 标签：visual-studio, sharepoint, sharepoint-2007, moss

我需要在 SharePoint 2007 中使用共享驱动器而不是文档库/列表，这主要是由于空间限制。

我的组织使用 MOSS 2007。业务数据目录可以使用数据库或 Web 服务作为数据源。所以看来我可能无法使用此功能连接到共享驱动器。我可以在 .NET 中开发自定义代码并使用它将共享驱动器与 SharePoint 网站集成吗？如果是这样，您能否指导我找到可以帮助我开发此类功能的相关资源？

我需要的功能是：

1.  能够从 SharePoint 站点的共享驱动器上传/下载文件。
2.  能够检测何时在驱动器上创建新文件，或何时修改现有文件，并发送相关警报。
3.  可以与共享驱动器交互的工作流，就像它们与 SharePoint 列表交互一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:36:02.847

我不确定您为什么要为此使用 SharePoint，因为据我了解，您可以简单地创建一个 Web 或 Windows 应用程序并将其链接到您的共享驱动器。如果您仍想使用 SharePoint，请参见下文。

从我的脑海中，这是我可以根据您的要求建议的以下方法：

1.  创建一个已发布的文件夹，并在其中创建一个未发布的文件夹。
2.  创建一个调用[FileWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)应用程序的计划任务，该应用程序监视未发布的文件夹。
3.  FileWatcher 应用程序会将未发布文件夹中的文件移动到已发布文件夹，并使用[SharePoint Web 服务](http://msdn.microsoft.com/en-us/library/ms479390%28v=office.12%29.aspx)（尤其是[列表](http://msdn.microsoft.com/en-us/library/lists%28v=office.12%29.aspx)服务）更新 SharePoint 中的特定列表并将其指向共享驱动器中的路径。
4.  您可以使用 SharePoint 工作流检查是否修改了项目以发送正确的通知。这可以通过 SharePoint 设计器完成，并且不会占用太多空间。这比创建自己的通知应用程序更可取。

# php - 将javascript数组传递给php以打印值不起作用

> ID：16149306
> 
> 赞同：0
> 
> 时间：2013-04-22T14:10:57.660
> 
> 标签：php, javascript, ajax

我想将一个 javascript 数组传递给 php 以打印这些值，但它不起作用。我究竟做错了什么？

javascript

```
 $('#Enviar0').click(function() {
        var buttons0 = [];
        for(var i=0;i<4;i++){
            buttons0[i]+= $('butEnv'+i).val();
            alert($('butEnv'+i).val());
        }
        var array=buttons0.toJSONString();
        $.ajax({ 
               type:"POST",
               url:"pintaParte.php",
               data: {encapsulado:array},
               success: function(data) {
                        $("#pinta").html(data);
               }
        });         
    }); 
```

php

```
$buttons0=parseJSON($_POST['encapsulado']);
foreach ($buttons0 as $value) {
    echo $value.'<br>';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:12:42.320

`JSON.stringify()`在客户端使用：

```
$.ajax({ 
               type:"POST",
               url:"pintaParte.php",
               data: JSON.stringify({encapsulado:array}),
               success: function(data) {
                        $("#pinta").html(data);
               }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:23:21.433

你检查你的数组在 php 端是否正常（在 ajax 调用之后）？

如果您无法在 php 端获取数组，则可能在您的 javascript 中尝试简单地使用...

```
data : "encapsulado=" + array 
```

在您的 php 代码中，尝试将数组的所有值放在一个字符串中，然后只做一个回显然后返回。

```
$str = "";
foreach ($buttons0 as $value) {
    $str = $str.$value.'<br>';
}
echo $str;
return; 
```

尝试使用 firebug 或 Chrome 开发工具等工具查看 http 请求中的参数和响应，并能够定位错误（在客户端或服务器端）。

希望这可以帮助 ！

# android - 2.3.3 和 4+ 版本之间的 android 布局设计差异

> ID：16149309
> 
> 赞同：10
> 
> 时间：2013-04-22T14:11:04.937
> 
> 标签：android, android-layout, android-view, android-xml

在创建一个简单的 xml 设计时，我的项目中遇到了一个奇怪的问题，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:background="#FF0000"
    android:layout_marginLeft="30dp"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="New Button"
        android:id="@+id/button" 
        android:layout_gravity="left|center_vertical"/> 
```

现在看看区别，这是**4.2.2**中的视图：

![2.3.3版本](https://i.stack.imgur.com/8iXuW.jpg)

而这个在**2.3.3**：

![在此处输入图像描述](https://i.stack.imgur.com/6KF6f.jpg)

如果有人可以帮助我，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:24:01.220

它可以工作，如果你把它改成这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:layout_marginLeft="30dp"
    android:background="#FF0000"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="New Button" />

</LinearLayout> 
```

*（我想我知道它为什么会这样，让我检查一下。稍后我会添加解释）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T11:25:34.903

我遇到了同样的问题，就我而言，我有类似的事情

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/match"
    android:background="@color/light"
    android:orientation="vertical"
    android:layout_margin="@dimen/lateral_margin" >

    <ImageView
        android:id="@+id/full_screen_image"
        style="@style/match_width"
        android:scaleType="fitCenter"
        android:layout_gravity="center"
        android:layout_weight="2"
        android:contentDescription="@string/image_content_description"/>

    <TextView
        android:id="@+id/barcode_number"
        style="@style/match_width"
        android:gravity="center"
        android:textColor="@color/dark_text"
        android:textSize="30sp"
        android:visibility="gone" />

</LinearLayout> 
```

我的问题解决了

```
 android:layout_margin="@dimen/lateral_margin" > 
```

和：

```
 android:padding="@dimen/lateral_margin" > 
```

似乎 androids 2.3.3 及更低版本计算边距的方式与 android 4 及更高版本不同。现在他们都以同样的方式行事。

在您的情况下，将黑色布局边距设置为填充可能会有所帮助。

# linux - 文件重命名（取文件名的 1 部分并将其传输到文件名的“开头”）

> ID：16149321
> 
> 赞同：0
> 
> 时间：2013-04-22T14:11:42.043
> 
> 标签：linux, bash

好的，我有很多文件都包含版本号 v1 或 v2。我想将文件名与作为第二个文件组成的其他文件匹配，如下所示：train.v1_GENENAME_ID.debruijn.txt（这就是我想要的）

第一个文件的组成如下：train.GENENAME_ID_v1.debruijn.txt

所以 v1 应该在 GENENAME 之前移动。所有版本标识符都是相同的。即v1或v2

假设我有一个名为：`'train.Glis2_1757.2_v1_deBruijn.txt'`并且我想将其转换为这个文件`'train.v1_Glis2_1757.2_deBruijn.txt'`

有没有一种简单的方法可以从第一个文件名中获取 v1 并将其放在第二个文件名中？

我正在考虑将 grep 与 if 语句结合使用。但仍然没有设法使它工作。

任何提示/提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:28:43.900

使用`rename`perl 分发：

```
rename 's/(train.)(.*_)(v[0-9].)(deBruijn.txt)/$1$3$2$4/' * 
```

在某些系统上，它被称为“ren”或“pren”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:36:33.413

这是一个使用 for 循环并`sed`用于转换文件名的方法

```
for f in *.txt;
do
    nf=$(echo $f | sed -r 's/([^.]+\.)([^.]+\.)([0-9])_([^_]+)(.*)/\1\4_\2\3\5/')
    echo mv $f $nf
done 
```

如果您对结果感到满意，您可以删除`echo`并让重命名发生

根据您的要求，这里是注释版本，解释了如何提取和重新排列各个部分以适应所需的输出

```
echo "train.Glis2_1757.2_v1_deBruijn.txt" | sed -r 
's/([^.]+\.) # match all non-dot characters (+ meaning one or more) followed by a dot and store in group 1 (train.)
   ([^.]+\.) # match all non-dot characters followed by a dot and store in group 2 (Glis2_1757.)
   ([0-9])   # match a single digit and store in group 3 (2)
   _         
   ([^_]+)   # match all non-underscore characters and store in group 4 (v1)
   (.*)      # match all that follow . is a wildcard char in regex and * is for zero or more (_deBruijn.txt)
/\1\4_\2\3\5/' # rearranging the matches to get desired output 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:51:09.327

您可以在 shell 中使用[参数扩展](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_02)执行此操作，特别是后缀和前缀删除：

```
FN=train.Glis2_1757.2_v1_deBruijn.txt
STRIPPED=${FN%_deBruijn.txt}                      # "train.Glis2_1757.2_v1"
GENEVERS=${STRIPPED#train.}                       # "Glis2_1757.2_v1"
VERSION=${GENEVERS##*_}                           # "v1"
GENENAME=${GENEVERS%_v[12]}                       # "Glis2_1757.2"

NEWFN=train.${VERSION}_${GENENAME}_deBruijn.txt   # "train.v1_Glis2_1757.2_deBruijn.txt"

mv $FN $NEWFN 
```

您不必经历上述所有明确的命名步骤，但我认为这更清楚。此外，假设您可以用 shell 模式表示法表示它们，这种技术可以推断为具有任意前缀（“train.”除外）和后缀（“_deBruijn.txt”除外）。

# java - 将全名的字符串拆分器转换为带首字母的逻辑字符串

> ID：16149322
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:11:45.693
> 
> 标签：java

您好我正在寻找一个将长全名字符串拆分为逻辑字符串的函数。为了更清楚，我举一个例子：

```
String Name= "Jorge Peter Wagh"; 
```

如果我调用如下函数：

```
splitedName = getSplitedName("LongSting", maxCharLength); 
```

**场景一：**

```
String finalName = getSplitedName("Name", 6); 
```

那么结果（finalName）应该是：`Jorge`

**场景二：**

```
String finalName = getSplitedName("Name", 11);// Editing, minor correction 
```

那么结果（finalName）应该是：`Jorge P. W.`

**场景 3：**

```
String finalName = getSplitedName("Name", 15); // Editing, minor correction 
```

那么结果（finalName）应该是：`Jorge Peter W.`

谁能帮我。您的帮助将不胜感激。

**编辑：**

在 Dan 的代码中，我在 for 循环中添加了几行额外的行来处理 maxlength 小于 5 的情况：

if(i==0 && (maxCharLength < splitted[i].length()) && (maxCharLength>1)){

finalName += splitted[i].substring(0,1) + "."; 休息;

}

提前致谢。

和我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:49:53.217

我通常不为人们做作业，但我很无聊。

```
String getSplitedName(String s, int len)
{
  if (len >= s.length())
    return s;
  String s2 = s.substring(0, len + 1);
  int index = s2.lastIndexOf(" ");
  if (index == -1)
    return "";
  if (index < s2.length() - 3)
    return s2.substring(0, index + 2) + ".";
  return s2.substring(0, index);
} 
```

为了：

```
String name = "Jorge Peter Wagh";
System.out.println(getSplitedName(name, 6));
System.out.println(getSplitedName(name, 10));
System.out.println(getSplitedName(name, 12));
System.out.println(getSplitedName(name, 15));
System.out.println(getSplitedName(name, 16)); 
```

印刷：

```
Jorge
Jorge P.
Jorge Peter
Jorge Peter W.
Jorge Peter Wagh 
```

# c# - 使用参数调用 Func<>

> ID：16149323
> 
> 赞同：1
> 
> 时间：2013-04-22T14:11:49.550
> 
> 标签：c#, mef

我正在使用`MEF`. 我调用这个方法来获取所有导出的方法：

```
var methods = container.GetExports<Func<int,int,double>,MyMetadata>("contract name"); 
```

注意：有时会`Func<int,int,double>`发生变化。例如，它可能有更多参数：`Func<int,int,int,double>`.

当我触发方法时，我知道要传递多少个参数。我的问题是如何动态地将参数传递给导入的方法？

更新：

```
 IEnumerable<Lazy<Func<int,int,double>,MyMetadata>> Plugins; 
    public IEnumerable RunAllPlugins(int a, int b)
    {
        //my old approach
        foreach (var p in Plugins)
        {
            dynamic a = p;
            var b = a.Value.Invoke(a,b); //here I want to pass parameters dynamically
        }
        //this is new approach which is answer
        //now I can pass parameters like array of objects
        foreach(var lazyMethod in Plugins)
        {
            Delegate d=lazyMethod.Value;
            object[] numbers=new object[]{1,2};
            var result=d.DynamicInvoke(numbers);
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:24:55.417

一旦你`Func<>`得到它的类型：

```
 Type type=someFunction.GetType(); 
```

现在获取`Invoke`成员：

```
 var methodInfo=type.GetMember("Invoke"); 
```

这是执行委托时实际调用的方法。您可以调用`GetParameters`methodInfo 来了解它需要多少个参数。

如果您已经知道要添加多少个参数以及它们的类型，那么事情就容易多了。您只需分配给一个代表并调用`DynamicInvoke`：

```
 Delegate d=someFuncInstance;
    object[] numbers=new object[]{1,2};
    var result=d.DynamicInvoke(numbers); 
```

`result`将是`object`您需要转换的实例。`someFuncInstance`是`Func<>`你从某个地方得到的一个实例。

因此，对于您的 MEF 示例，它将是这样的：

```
var methods=container.GetExports<Func<int,int,double>,MyMetadata>("contract name");
foreach(var lazyMethod in methods)
{
  Delegate d=lazyMethod.Value;
  object[] numbers=new object[]{1,2};
  var result=d.DynamicInvoke(numbers);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:00:23.910

的类型`methods`应该很`IEnumerable<Lazy<Func<int,int,double>>`简单

```
 foreach(var method in methods)
 {
      method.Value(a,b);
 } 
```

应该管用。或者，如果您想保存以供以后使用：

```
Func<int,int,double> mySavedDelegate = methods.First();

//...

mySavedDelegate(a,b); 
```

编辑：导出接口并从导入的接口执行所需的方法而不是直接导出方法也是一种更好的做法。我从来没有做过后者，但从你的问题中假设它首先是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T15:38:29.053

可变参数函数应该在这里工作。

```
double Magic(params int[] args)
{
   switch(args.Count)
   {
     case 2: return args[0]+args[1];
     case 3: return args[0]+args[1]/args[3];
     default: throw new Exception("Not supported");
   }
} 
```

然后只需调用 Magic(1, 2); 或魔法（1,2,3）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:21:48.060

我猜你超载`Func<>`界面...

据我了解，您想要获得的是具有特定签名的方法列表：它必须是返回`double`和接收 2的方法`integers`？那么您可能应该将 (!) a`List<>`作为返回 (!) 值返回吗？

第二：不可能将所有方法都放入特定的`Func<>`or`Action<>`或 else 中。自然有些函数会列出不同的输入参数和不同的返回值。对 ？因此，如果 (!) 您只想处理返回`double`和接收 2的函数，`integers`那么`List<>`对于这些​​类型的方法，只会返回 (!)。请阅读有关*函数签名的更多信息*

第三：我猜这是对 MEF 的错误使用。基本上 MEF 的意思是：在你的应用程序中定义接口，使用它就像它是用它创建的一样`new`，我 (MEF) 将在运行时插入它。所以实际上你*不需要*获取任何方法的列表。只需确保双方都支持/定义/继承这些方法并像在您的应用程序中定义它们一样使用它们

# hadoop - 比较 if 语句中的两个 LongWritable

> ID：16149331
> 
> 赞同：0
> 
> 时间：2013-04-22T14:12:14.403
> 
> 标签：hadoop, mapreduce, key-value

如何在 If 语句中比较两个 LongWritable ??? 喜欢，

```
if(compareTo(key1,new LongWritable(1))
 { 

    //do something;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:40:17.403

LongWritable 实现 Comparable 所以使用 compareTo 方法：

```
if (lw1.compareTo(lw2) == 0) {
  // lw1 has same value as lw2
} 
```

# maven - 将 maven 服务器属性读取为属性

> ID：16149335
> 
> 赞同：1
> 
> 时间：2013-04-22T14:12:17.183
> 
> 标签：maven, maven-3

我有一个`.m2/settings.xml`这样定义的服务器：

```
<server>
    <id>foo</id>
    <username>bar</username>
    <password>baz</password>
</server> 
```

是否可以通过使用类似的东西来访问这些值作为属性`${servers.foo.username}`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:39:43.823

您可以使用

*   ${settings.servers[0].username}
*   ${settings.servers[0].password}
*   ${settings.servers[0].id}

这意味着您必须遵守您无法保证的已定义订单。在测试等情况下，我建议使用属性等而不是 settings.xml 部分。您提供的补充信息听起来像是集成测试。除了已经提到的加密密码等问题。

# c# - 在 C# 中编写带有特殊字符的字符串

> ID：16149340
> 
> 赞同：2
> 
> 时间：2013-04-22T14:12:24.257
> 
> 标签：c#, encoding, streamwriter

我正在尝试使用 StreamWriter 在缓存文件 (.txt) 中写入一个字符串。它正在工作，但是缓存文件中的字符串似乎与我要复制的字符串不同。我的输入字符串包含一个特殊字符'ƒ'，写入缓存文件的输出字符串包含一个经典的'f'。我指定了一个编码：

```
var writer = new StreamWriter(stream, Encoding.GetEncoding("ISO-8859-1")) 
```

我需要指定另一种编码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:14:50.550

该字符（[带有 HOOK 的拉丁小写字母 F](http://www.fileformat.info/info/unicode/char/192/index.htm)）没有出现在[iso-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1#Codepage_layout)中，所以是的，您需要不同的编码；可能是 utf-8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:20:27.227

只需使用 UTF-8 编码。它支持您的字符，并且如果大多数其他字符都在 ASCII 范围内，那么您的文件不会比使用 ISO-8859-1 编码的文件大，因为 UTF-8 编码仅使用 1 个字节对 ASCII 范围内的字符进行编码（如果这是一个问题）。[这是来自维基百科的更多信息](http://en.wikipedia.org/wiki/UTF-8)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:14:55.650

ISO-8859-1 编码没有该字符。

您应该始终使用`Encoding.UTF8`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:15:35.937

您应该使用 UTF8 - ISO-8859-1 中没有所需的字符。

# java - 在 Java 中加载图像时遇到问题

> ID：16149344
> 
> 赞同：0
> 
> 时间：2013-04-22T14:12:35.823
> 
> 标签：java, rgb, bufferedimage, toolkit, loadimage

嗨，我正在学习 Java 课程，并且对编程很陌生。

我正在尝试编写一个程序，要求用户加载不同的图像并在多维数组中返回它们的 RGB 值。我让这两个部分单独工作，但我无法让这两个部分一起工作。

我使用 toolkit.getImage- 在一个类中加载图像

```
void imageload1 () 
    {
        fd.show();
        if(fd.getFile() == null)
        { 
            Label1.setText("Try again");
        }//end if
        else
        {
            String d = (fd.getDirectory() + fd.getFile());
            Toolkit toolkit = Toolkit.getDefaultToolkit();
            image1 = toolkit.getImage(d);
            canvas1.setImage(image1);
            canvas1.repaint();

            GetRGB testRGB;
            testRGB = new GetRGB();
            testRGB.setup(image1, image2);

        }//end else
    }//end imageLoad1 
```

然后将图像发送到不同的类以获取 RGB 值-

```
public void setup(Image image1, Image image2) 
{
    try {
          // get the BufferedImage, using the ImageIO class
          BufferedImage image = 
            ImageIO.read(this.getClass().getResource("imag1"));
          marchThroughImage(image);
        } catch (IOException e) {
          System.err.println(e.getMessage());
        }
      }

    private void marchThroughImage(BufferedImage image) {
    int w = image.getWidth();
    int h = image.getHeight();
    int [][] pixels = new int [h][w];
    int lenRows = pixels.length;
    int lenColums = pixels[0].length;
    System.out.println("width, height: " + w + ", " + h);

    for (int i = 0; i < h; i++) {
        for (int j = 0; j < w; j++) {
            System.out.println("x,y: " + j + ", " + i);
            int pixel = image.getRGB(j, i);
            printPixelARGB(pixel);
            pixels [i][j] = image.getRGB(j,i);
            System.out.println("");
            System.out.println("there are "+lenRows+" rows");
            System.out.println("there are "+lenColums+" colums");
        }
    }
}

public void printPixelARGB(int pixel) {
    int alpha = (pixel >> 24) & 0xff;
    int red = (pixel >> 16) & 0xff;
    int green = (pixel >> 8) & 0xff;
    int blue = (pixel) & 0xff;
    System.out.println("argb: " + alpha + ", " + red + ", " + green + ", " + blue);
} 
```

}

这给了我一个“java.lang.IllegalArgumentException”错误。我认为问题在于它无法读取图像。我不确定是否需要将图像转换为 BufferedImage，或者我是否命名错误，或者尝试错误地读取文件。我已经尝试了很多不同的方法来让它工作，但没有任何运气。任何帮助都会很棒，非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:56:07.337

来自 ImageIO.read javadoc 的：“抛出：IllegalArgumentException - 如果输入为 null。”，因此产生问题是因为 this.getClass().getResource("imag1") 返回 null。首先，您应该指定“imag1”的扩展名（.png、.jpg 等）并对其进行测试，如果问题仍然存在，请检查查找图像的路径（从您的代码中可以看出，它应与包含方法“setup”的类位于同一目录中）。

# java - 无法在 servlet 中获取包含在 <...> 中的文本区域内容

> ID：16149347
> 
> 赞同：3
> 
> 时间：2013-04-22T14:12:41.477
> 
> 标签：java, jsp, jakarta-ee, servlets

我在 HTML 页面中有一个带有 textarea 的表单，我正在尝试通过 POST 将其内容发送到 servlet。问题是，如果我`unenclosed <enclosed>`在 textarea 中编写类似的内容，当我在 servlet（扩展*HttpServlet ）的**service()*`request.getParameter("textareaId")`方法中调用（其中*request*是*HttpServletRequest*对象）时，我只会得到“未封装”作为参数值。有什么方法可以获取 textarea 的完整内容吗？

 **html代码：

```
<form action="MyServlet" method="post">
    <textarea name="MyTextarea" rows="5" cols="50"></textarea>
</form> 
```

小服务程序代码：

```
public class MyServlet extends HttpServlet {
    public void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String contents = request.getParameter("MyTextarea");
        System.out.println(contents);
    }
} 
```

谢谢！

编辑：我通过在将其发送到 servlet 之前转义 JavaScript 函数中的 textarea 内容来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:16:22.447

这`index.jsp`适用于我在 Tomcat 6.0.35 上。我看到`<`并`>`打印到控制台。

```
<%
    String contents = request.getParameter("MyTextarea");
    System.out.println(contents);
%>
<form method="post">
    <textarea name="MyTextarea" rows="5" cols="50"></textarea>
    <input type=submit>
</form> 
```

您使用的是什么 servlet 容器？

容器是否默认开启任何参数转义？

什么是默认字符编码（不能真正看到这是一个问题，`<`并且`>`是常规 ASCII）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:42:32.060

里面`<textarea name="MyTextarea">...</textarea>`应该使用`&lt;`and `&gt;`。这可以通过 apache common 的**EscapeUtils.escapeHTML**（我认为）来完成。这也适用于`<input value="...">`or in `<a href="... .jsp?a=1&amp;b=2">`: `&amp; &lt; &gt; &quot; &apos;`。**

# actionscript-3 - AS3 hitTestObject 结束游戏

> ID：16149353
> 
> 赞同：0
> 
> 时间：2013-04-22T14:12:50.937
> 
> 标签：actionscript-3, adobe, flash-cs5

您好，我尝试创建一个类似于太空入侵者的游戏，但发现很难创建一个 hitTestObject，所以如果外星子弹击中 mc_gun，玩家将失去一条生命，一旦失去三个生命，游戏就结束并被带到一个屏幕，他/她可以在其中输入他们的名字以进入高分表。

我仍然必须执行以下操作，但不知道从哪里开始......

为玩家创造三个生命。当所有生命都消失时结束游戏。采取进入名称屏幕高分表。

任何帮助将不胜感激。

这是我在文档正文中的编码...

```
stop();
var score:Number = 0;
var livesLeft:Number = 3;

var lifesArray:Array = new Array();
lifesArray.push(life1);
lifesArray.push(life2);
lifesArray.push(life3);

addEventListener(Event.ENTER_FRAME, pulse);

function pulse(event:Event):void
{
    checkForHitOnGun();
    checkForHitOnAliens();
    checkForBulletOnBulletHit();
    //checkEndGameCondition 
}

function checkForHitOnGun()
{
    for (var i=0; i<numChildren; i++)
    {
        if (getChildAt(i) is alienbullet)
        {
            var mc_alienbullet:MovieClip = getChildAt(i) as MovieClip;
            for (var j=0; j<numChildren; j++)
            {
                if (getChildAt(j) is gun)
                {
                    var mc_gun:MovieClip = getChildAt(j) as MovieClip;
                    if (mc_alienbullet.hitTestObject(mc_gun))
                    {

                    health -= 10;
                    if (health<1){
                        if(livesLeft<1){
                            gotoAndPlay(2);
                            removeChild(mc_gun);
                            stage.removeEventListener(Event.ENTER_FRAME,pulse);

                        }
                        livesLeft--;
                        lifesArray[livesLeft].visible = false;

                        health=100;
                        if (livesLeft == 0){
                            (endGo);
                            gotoAndPlay(2);
                        }
                    }
                    trace("health =" +health);
                    }
                }
            }
        }
    }
}

function checkForHitOnAliens()
{
    for (var i=0; i<numChildren; i++)
    {
        if (getChildAt(i) is bullet)
        {
            var mc_bullet:MovieClip = getChildAt(i) as MovieClip;
            for (var j=0; j<numChildren; j++)
            {
                if (getChildAt(j) is alien)
                {
                    var mc_alien:MovieClip = getChildAt(j) as MovieClip;
                    if (mc_bullet.hitTestObject(mc_alien))
                    {
                        var tobeDestroyed:MovieClip;
                        if (mc_alien.x > mc_bullet.x)
                        {
                            tobeDestroyed = mc_alien;
                        }
                        else
                        {
                            tobeDestroyed = mc_alien;
                        }
                        var bomb_mc:explosion = new explosion();
                        bomb_mc.x = tobeDestroyed.x;
                        bomb_mc.y = tobeDestroyed.y;

                        var addspaceship:alien = new alien();

                        addspaceship.x = 600;
                        addspaceship.y = Math.random()*(stage.stageHeight);

                        tobeDestroyed.destroy();
                        addChild(bomb_mc);
                        addChild(addspaceship);
                        score++;

                        return;
                    }
                }
                tb_score.text = "" + score;
            }
        }
    }
}

function checkForBulletOnBulletHit()
{
    for (var i=0; i<numChildren; i++)
    {
        if (getChildAt(i) is bullet)
        {
            var mc_bullet:MovieClip = getChildAt(i) as MovieClip;
            for (var j=0; j<numChildren; j++)
            {
                if (getChildAt(j) is alienbullet)
                {
                    var mc_alienbullet:MovieClip = getChildAt(j) as MovieClip;
                    if (mc_bullet.hitTestObject(mc_alienbullet))
                    {
                        var tobeDestroyed:MovieClip;
                        if (mc_bullet.x > mc_alienbullet.x)
                        {
                            tobeDestroyed = mc_bullet;
                        }
                        else
                        {
                            tobeDestroyed = mc_alienbullet;

                        }
                        /*score++;
                        tb_score.text = "" + score;*/
                        var bomb_mc:explosion = new explosion();
                        bomb_mc.x = tobeDestroyed.x;
                        bomb_mc.y = tobeDestroyed.y;

                        tobeDestroyed.destroy();
                        addChild(bomb_mc);
                        /*if (mc_bullet.hitTestObject(mc_alienbullet))
                        {
                        score++;
                        mc_bullet.gotoAndPlay(2);
                        }*/
                        score++;

                        return;
                    }
                    tb_score.text = "" + score;
                }
            }
        }
    }
}
//mc_gun would make the bullet fire only if the gun is clicked. 
//the game is to difficult so i changed it to stage. to make the whole stage the fireing area.
stage.addEventListener(MouseEvent.CLICK, fire);

function fire(event:MouseEvent):void
{
    var bulletfire:bullet = new bullet();
    bulletfire.x = mc_gun.x - 20 + mc_gun.width;
    bulletfire.y = mc_gun.y;
    addChild(bulletfire);
}

mc_banner.addEventListener(MouseEvent.CLICK, startGo);

function startGo(event:MouseEvent):void
{
    mc_banner.visible = false;
    mc_instructions.visible = false;
    mc_highscore.visible = false;
    mc_gun.visible = true;
    tb_score.visible = true;
    addEventListener(Event.ENTER_FRAME, pulse);
    var initialspaceship:alien=new alien();

    initialspaceship.x = 600;
    initialspaceship.y=Math.random()*(stage.stageHeight);
    addChild(initialspaceship);

}

function endGo()
{
    mc_gun.visible = false;
    tb_score.visible = false;
    removeEventListener(Event.ENTER_FRAME, pulse);
    mc_banner.visible = true;
    livesLeft--;
    lifesArray[livesLeft].visible = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:09:00.850

您的`engGo()`功能是负责减少生命的功能。
这是检查玩家是否永远死亡（0 条生命）并结束游戏的最佳场所。
据我了解，阅读您的代码`livesLeft`是您存储玩家生命的地方。
就在`lifesArray[livesLeft].visible = false;`添加以下内容之后：

```
if (livesLeft <= 0)
{
    defeat();
} 
```

现在您必须从 GamePlay 更改为 HighScore。
如果您在 Flash Pro 中的帧中工作，您只需移动到具有 HighScore 的帧

```
function defeat():void
{
    gotoAndStop("HighScore");
} 
```

否则（您需要在一帧中完成所有操作），您需要清除舞台并在其上添加新内容。

```
function defeat():void
{
    // First, remove ALL listeners
    removeEventListener(Event.ENTER_FRAME, pulse);
    stage.removeEventListener(MouseEvent.CLICK, fire);

    // Then, we remove everything
    removeChild(...);

    // Finally, you add the new stuff
    addChild(...);
} 
```

如果您使用第二种方法，我建议您将函数解耦并将它们包装在类中，这样您的游戏逻辑将全部在一个地方（在一个类中），您的高分屏幕将在另一个和您可以轻松交换它们。

# jquery - 保持 img 标签绝对居中并保持比例

> ID：16149358
> 
> 赞同：0
> 
> 时间：2013-04-22T14:13:14.433
> 
> 标签：jquery, html, css

这是问题所在：

我有一个页面全宽的滑块，内容居中。这是一个快速的 HTML 模型供您理解：

```
<div class="slider">
    <div class="slide">
         <img src="01.jpg">
         <div class="wrapper">
              <h1>01</h1>
         </div>
    </div>
    <div class="slide">
         <img src="02.jpg">
         <div class="wrapper">
              <h1>02</h1>
         </div>
    </div>
    <div class="slide">
         <img src="03.jpg">
         <div class="wrapper">
              <h1>03</h1>
         </div>
    </div>
</div> 
```

所以我希望 img 标签在滑块 div 中居中，但要完全填充它。我知道如果我使用背景图像，你可以做到这一点，但在这里我必须更改每张幻灯片上的背景图像，因此我尝试使用 img 标签。

到目前为止，这是我的 CSS：

```
.slider {
    height:370px;
    width:100%;
    float:left;
    text-align: center;
    background-color: grey;
    position:relative;
    text-align: center
}

.slide img {
    height:370px;
    width:100%;
    position:absolute;
    top:0;
    left:0;
    z-index:1;
}

.slide .wrapper {
    position:absolute;
    top:0;
    left:0;
    z-index:2;
} 
```

使用此解决方案，图像会在窗口调整大小时调整大小，我需要它保持固定在中心，并根据屏幕尺寸在需要时显示更多（因此我的图像是 1920 * 370 像素）

这是一个快速解决图像大小问题的方法：http: [//jsfiddle.net/4wZkN/](http://jsfiddle.net/4wZkN/)

提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:26:02.450

[你的小提琴的叉子](http://jsfiddle.net/gBveb/)。我将 img 更改为 position:fixed 并删除了宽度规范。如果您调整框架大小，这可以防止滚动条并显示更多图像。那是你想要的效果吗？

```
.slide img {
    height:370px;
    position:fixed;
    top:0;
    left:0;
    z-index:1;
} 
```

# batch-file - bat 文件将目录和子目录中的所有文件移动到基 于许多扩展名的新文件夹中

> ID：16149364
> 
> 赞同：0
> 
> 时间：2013-04-22T14:13:35.403
> 
> 标签：batch-file, cmd, dos

我将其视为参考：[批处理文件将具有某些扩展名的文件从多个目录复制到一个目录中](https://stackoverflow.com/questions/1224880/batch-file-copy-files-with-certain-extensions-from-multiple-directories-into-one)

我在 [子] 文件夹中包含大约 300k+ 个文件，其中许多文件类型需要根据文件扩展名移动到文件夹中。我需要帮助形成 cmd 以根据扩展名将文件放在相应的文件夹中。

模拟伪代码：

```
for /R C:\Recovery %f.%EXT move %f C:\RecoverySorted\%EXT 
```

上面的代码当然不能正常工作。需要帮助修改。

如果可以对非扩展文件进行错误检查，那也很棒。我注意到一些没有扩展名的文件。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:49:00.403

```
@ECHO OFF
SETLOCAL
FOR /f "delims=" %%i IN ('dir /s /b /a-d') DO (
 IF NOT "%%~xi"=="" MD "c:\destdir\%%~xi" 2>NUL
 ECHO MOVE "%%i" "c:\destdir\%%~xi"
) 
```

`dir`如果您不是从所需的相对根目录开始，请在子句中包含您的源目录名称。改变`destdir`以适应。抑制 make-directory 上的`2>nul`错误消息，因为这将尝试`.ext`多次创建目录。添加`>nul`到该`MOVE...`行以禁止移动报告。删除该`echo`行以实际执行移动，而不是报告要进行的移动。首先在一个小的子树上进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T00:29:11.267

```
@Echo OFF

Set "Folder=C:\windows"
Set "DestDir=C:\MySortedFiles"

FOR /R "%Folder%" %%# in ("*") DO (
    If not exist "%DestDir%\%%~x#" (MKDIR "%DestDir%\%%~x#")
    Echo [+] Moving: "%%~nx#"
    Move "%%#" "%DestDir%\%%~x#\" 1>NUL
)

Pause&Exit 
```

**注意：键入DestDir**路径时不要使用最后一个斜杠 \ 。

# html - 如何为同一页面中的“已访问”锚点设置不同的颜色？

> ID：16149367
> 
> 赞同：1
> 
> 时间：2013-04-22T14:14:00.233
> 
> 标签：html, css

有没有办法为同一页面上的锚设置 a:visited ？

[http://tinker.io/93e4d/3](http://tinker.io/93e4d/3)

现在发生的情况是，我应用到 a:visited 的任何样式都会在我点击之前适用于所有链接。我需要的可能是a:clicked 而不是visited，或者以某种方式突出显示最后点击的链接，但我不知道这样的事情。

有什么我可以做的不需要js的吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:16:07.270

To set different colours for your links you could go

```
#header a:visited {
}
# nav a:visited {
} 
```

Or using a span with a class for each colour

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:22:57.530

> 现在发生的情况是，我应用到 a:visited 的任何样式都会在我点击之前适用于所有链接。

可能是您所有的链接都相同`href`

这些应该工作

```
a {
   color: red;
}

a:visited {
   color: blue;
}

a:hover {
   color: yellow;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:40:21.467

为每个锚点设置不同的类。

```
a.first:visited {}
a.other:visited {} 
```

# javascript - 侦听器调用的 Javascript 函数不会更新全局变量

> ID：16149370
> 
> 赞同：0
> 
> 时间：2013-04-22T14:14:20.727
> 
> 标签：javascript, video, global-variables

好的，所以我在视频播放器上有一个事件监听器来监听“timeupdate”事件，该事件每秒发生 5-10 次，每次更新视频播放器的当前时间码时。我正在编写一个函数，允许我根据视频的播放位置在一定时间内做某事。IE - 在第 320 帧暂停视频并在第 420 帧取消暂停。

为了节省处理能力，我创建了一个名为 notStarted 的全局变量，它基本上告诉函数是启动事件（暂停视频）还是停止事件（取消暂停视频），这样当 notStarted 为真时，我们开始事件，当 notStarted是假的，我们结束事件。

这就是功能。它在开始事件后成功地将 notStarted 设为 false，但之后不会将其更改回 true。

**更新：这是所有相关代码**

```
 var frameRate = 30;

var players=new Array(_V_("video_canvas_1"), _V_("video_canvas_2"));

var canv1 = players[0];
var canv2 = players[1];

var canv1Play = 1; // Autoplay is enabled, so we set the Play state to 1 off the bat.
var canv2Play = 1; // Autoplay is enabled, so we set the Play state to 1 off the bat.
var conchShell = _V_("conch"); // Lord of the Flies, Bitch!

    var token = 0;

function currentFrame(e) {
    return frameRate * e.currentTime();
    console.log('currentTime * frameRate:' + frameRate * e.currentTime());
}

// Accepts player objects as arguments - canv1, canv2
function pause(){
    for (var i = 0, j = arguments.length; i < j; i++){
        arguments[i].pause();
        console.log( arguments[i] + '1 is paused' ); /* TODO: REMOVE CONSOLE LOGS BEFORE DEPLOYMENT */
    }
}

function play(){
    for (var i = 0, j = arguments.length; i < j; i++){
        arguments[i].play();
        console.log( arguments[i] + '1 is playing' );
    }
}
function syncSingleToConch(e) {
    e.currentTime(conchShell.currentTime());
}

function syncToConchShell() {
    async.parallel([
        async.each(players, syncSingleToConch, function(err){ console.log('error with the each function'); }),
        conchShell.currentTime(arguments[0].currentTime()),
        async.each(players, playSingle, function(err){ console.log('error with the each function'); })
    ]);
}
function pauseAtKeyFrame(startStop, player, frameStart, frameEnd) {

    if (startStop === "start") {
        pause(player);
        console.log('pausing player');
    }
    if (startStop === "stop") {
        play(conchShell, canv1, canv2);
        setTimeout(syncToConchShell(canv1), 3500);
        startStop = "start";
        console.log('playing player');
    }
}
var currentEvent = 0;
var notStarted = true;
var frameEvents = [
    {
        "type": pauseShowModal,
        "frameStart": 200,
        "frameEnd": 220,
        "canvas": canv1
    },
    {
        "type": pauseAtKeyFrame,
        "frameStart": 320,
        "frameEnd": 420,
        "canvas": canv1
    },
    {
        "type": showDivAtTime,
        "frameStart": 111,
        "frameEnd": 311,
        "canvas": canv1,
        "div": "frame100"
    }
    ]; 

function keyFrames() {
    if (notStarted === true && frameEvents[currentEvent].frameStart < currentFrame(conchShell) && frameEvents[currentEvent].frameEnd > currentFrame(conchShell)) {
        frameEvents[currentEvent].type("start", frameEvents[currentEvent].canvas, frameEvents[currentEvent].div);
        notStarted = false;
        console.log(notStarted);
    } else if (notStarted === false && frameEvents[currentEvent].frameEnd < currentFrame(conchShell)) {
        console.log(notStarted);
        frameEvents[currentEvent].type("stop", frameEvents[currentEvent].canvas, frameEvents[currentEvent].div);
        currentEvent++;
        notStarted = true;
    }
}

conchShell.addEvent("timeupdate", keyFrames); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:32:49.940

您可能知道，Javascript 使用函数作用域，这意味着每个变量都具有在其中声明的函数的作用域。

同一函数在一种情况下成功更改 notStarted 的值而不是在另一种情况下，这一事实表明正在发生三件事之一。

1) if else 语句中的条件没有按照您期望的方式评估真假，或者

2) 函数内部可能发生错误，导致它在按照您期望的方式设置变量之前停止执行，或者

3）其他一些代码意外地改变了你的变量的值。

如果您没有调试器，您可以附加到逐步执行代码，我建议您添加一些`alert`语句，以便您可以确定您的程序是如何执行的。

# jquery - jquery连续计算复选框的数量

> ID：16149382
> 
> 赞同：1
> 
> 时间：2013-04-22T14:14:53.637
> 
> 标签：jquery, count, checkbox

我有一个如下所示的表格：

```
<table class="authors-list">
      <tr>
         <td style="font-size:10px;"><a class="deleteRow"> <img src="delete2.png" /></a></td>
         <td ><input type="text" id="product1" name="product1" class="rounded"/></td>
         <td ><input type="text" size='5' id="qty1" name="qty1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h09_1" name="h09_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h12_1" name="h12_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h15_1" name="h15_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h18_1" name="h18_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h21_1" name="h21_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h24_1" name="h24_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h27_1" name="h27_1" class="rounded"/></td> 
         <td class="tdcheckbox"><input type="checkbox"  id="h30_1" name="h30_1" class="rounded"/></td> 
         <td><input type="hidden" name="checkedsizes_1" id="checkedsizes_1" value="0"></td>
      </tr>
</table> 
```

我想要一个脚本，当调用用该行`checksizes`中选中复选框的数量填充每个行字段时。

小提琴可以在这里查看：http: [//jsfiddle.net/emL6x/8/](http://jsfiddle.net/emL6x/8/)

我到目前为止的jquery是：

```
countChecks(){
     $('.author-list tr').each(function(){
         var count = 0;
         var hdn = $(this).find('input[name^="checkedsizes"]');
         count = $(this).find(':checkbox:checked').length;
         hdn.val(count);
     });
} 
```

这目前不起作用。感谢您对答案或小提琴的任何帮助。我正在使用 jquery 1.9.1。

请记住，我的表有多行，因此需要遍历每一行。

再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:22:33.860

它有助于声明某事是一个函数并正确引用它

`countChecks(){`必须声明`function countChecks(){`

并且`countchecks();`应该是 `countChecks();`

这也很有用，当你给一个表一个类时`.authors-list`，你使用正确的类名来选择它

`$('.author-list tr')..`应该读 `$('.authors-list tr')...`

[http://jsfiddle.net/emL6x/11/](http://jsfiddle.net/emL6x/11/)

其他一切都很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:25:25.087

您有一些拼写错误/语法错误，我已对其进行了修改：

```
function submitFunction(){
    alert("call countchecks");   
    countChecks();
    alert("checkedsizes populated");      
    alert("continue with submit");      
}

function countChecks(){
     $('.authors-list tr').each(function(){
         var count = 0;
         var hdn = $(this).find('input[name^="checkedsizes"]');
         count = $(this).find(':checkbox:checked').length;
         hdn.val(count);
         alert(count);
     });
} 
```

你会发现你的主要错误是`Uncaught ReferenceError: submitFunction is not defined`你得到的，因为你内联调用你的函数，所以函数必须全局定义，这意味着你不能加载脚本 onLoad。这可以在 jsFiddle 中完成，我已经修改了你的以创建一个工作版本：[jsFiddle](http://jsfiddle.net/emL6x/17/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:30:46.083

你的 JS 中有很多错别字。这是有效的代码，除了从按钮中删除事件侦听器并将其放入它所属的 JS 之外，无需更改任何标记：

```
$(function () {
    var countChecks = function () {
         $('.authors-list tr').each(function(){
             var count,
                 hdn = $(this).find('input[name^="checkedsizes"]');
             count = $(this).find('input:checked').length;
             hdn.val(count);
         });
    }
    $('input[type="button"]').click(function () {
        alert("call countchecks");   
        countChecks();
        alert("checkedsizes populated");      
        alert("continue with submit");      
    });
}); 
```

我已经相应地更新了你的小提琴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T15:00:31.433

这是正确的JS代码：

```
function submitFunction (){
alert("call countchecks");   
countChecks();
alert("checkedsizes populated");      
alert("continue with submit");      
}

function countChecks(){
 $('.author-list tr').each(function(){
     var count = 0;
     var hdn = $(this).find('input[name^="checkedsizes"]');
     count = $(this).find(':checkbox:checked').length;
     hdn.val(count);
 }); 
```

## }

除了错别字，您还需要更改左侧的 Frameworks & Extensions 设置，默认为 'onDomready'，您需要将其更改为 'no wrap - in'。

# python - Cluster high dimensional data with python and DBSCAN

> ID：16149384
> 
> 赞同：7
> 
> 时间：2013-04-22T14:14:58.923
> 
> 标签：python, cluster-analysis, data-mining, dbscan, n-dimensional

I have a dataset with 1000 dimensions and I am trying to cluster the data with DBSCAN in Python. I have a hard time understanding what metric to choose and why.

Can someone explain this? And how should I decide what values to set `eps` to?

I am interested in the finer structure of the data so the `min_value` is set to 2\. Now I use the regular metric that is preset for dbscan in sklearn, but for small eps values, such as `eps` < 0.07, I get a few clusters but miss many points and for larger values i get several smaller clusters and one huge. I do understand that everything depends on the data at hand but I am interested in tips on how to choose eps values in a coherent and structured way and what metrics to choose!

I have read [this question](https://stackoverflow.com/questions/10155542/deciding-input-values-to-dbscan-algorithm) and the answers there are with regards to 10 dimensions I have 1000 :) and I also do not know how to evaluate my metric so it would be interesting with a more elaborate explanation then: evaluate your metric!

Edit: Or tips on other clustering algorithms that work on high dimensional data with an existing python implementation.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:35:39.140

首先，`minPts=2`您实际上并没有进行 DBSCAN 聚类，但结果将**退化为单链接聚类**。

你真的应该使用`minPts=10`或更高。

不幸的是，您没有费心告诉我们您实际使用的距离度量！

Epsilon 确实在很大程度上取决于您的数据集和指标。如果不知道参数和您的数据集，我们将无法为您提供帮助。您是否尝试过绘制距离直方图来查看哪些值是典型值？这可能是选择此阈值的最佳启发式方法：查看距离直方图（或其样本）的分位数。

但是，请注意 OPTICS 确实去掉了这个参数（至少当你有一个正确的实现时）。使用 Xi 方法提取集群时，您只需要足够大的 epsilon 就不会切割您感兴趣的结构（并且足够小以获得您想要的运行时间 - 越大越慢，尽管不是线性的）。然后，Xi 给出了距离的相对增加，这被认为是显着的。

# ruby-on-rails-3.2 - 使用本地人和不使用本地人渲染之间的区别？

> ID：16149385
> 
> 赞同：1
> 
> 时间：2013-04-22T14:15:03.770
> 
> 标签：ruby-on-rails-3.2

我想知道两者的区别

```
 render('shared/comment', comment: @comment) 
```

和

```
 render('shared/comment', locals: {comment: @comment}) 
```

对我来说，有时第一种方法可以工作，但有时第二种方法....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:01:48.440

每当您对 Rails 方法的参数有疑问时，我建议您查看[apidock](http://apidock.com/)，因为它允许您切换 rails 版本，如果随着时间的推移发生变化，这会很方便。

可以看到[ActionController:Base](http://apidock.com/rails/ActionController/Base/render)上有一个 render 方法，我认为最喜欢的是[ActiveView:Template](http://apidock.com/rails/ActionView/Template/render)

该`ActionController`方法具有以下签名：

```
render(options = nil, extra_options = {}, &block) 
```

并且`ActionView`有以下一个：

```
render(view, locals, buffer=nil, &block) 
```

所以基本上你`locals:`在调用不推荐使用的方法时需要使用`ActionController`，并且在使用时不需要传递它`ActionView`。

# javascript - How to create groups in Firebase and then create new users into that group? How do I restrict access to only that group?

> ID：16149387
> 
> 赞同：1
> 
> 时间：2013-04-22T14:15:07.597
> 
> 标签：javascript, firebase, firebase-security

I cant wrap my head around How To create a /location/groupID/users/userName with Firebase. Also, how do I restrict each group to only the users inside of that group?

# vb.net - Linq to entities: new Guid("") for anonymous type creation vs select

> ID：16149388
> 
> 赞同：5
> 
> 时间：2013-04-22T14:15:11.167
> 
> 标签：vb.net, entity-framework, linq-to-entities

Following my previous question ([Only parameterless constructors and initializers are supported in LINQ to Entities](https://stackoverflow.com/questions/16146930/only-parameterless-constructors-and-initializers-are-supported-in-linq-to-entiti/16146972?noredirect=1#comment23072925_16146972)) I'm still having a question. I just want to understand what is going on and why something works in one case and not another.

When you want to cast a string parameter (for example a querystring parameter) in a Linq to entities query, you have to use new Guid(request.querystring("param")) instead of Guid.parse(request.querystring("param")). Guid.parse will throw an exception because Linq cannot translate this into SQL.

I'm using this technique often in my code and it works.

```
dim lstResult = DB.MyTable.Where(function(f) f.key = new Guid(request.querystring("param"))).toList() 
```

But, when I'm trying to create an anonymous type using a Linq query, it will throw an exception:

```
dim lstResult = DB.MyTable.Where(function(f) f.key = new Guid(request.querystring("param"))).Select(function(f) new With { .guid = f.guid, .name = f.name }).toList() 
```

The thrown exception is:

> Only parameterless constructors and initializers are supported in LINQ to Entities

What I could (or should) do is declare the Guid parameter beforehand (and that is maybe good practice) and than using it in the query. It will work:

```
dim myGuid = Guid.parse(request.querystring("param"))
dim lstResult = DB.MyTable.Where(function(f) f.key = myGuid).Select(function(f) new With { .guid = f.guid, .name = f.name }).toList() 
```

So, my question is: why would it work without creating anonymous types and why is the exception raised when trying to create anonymous types? What is the mechanism causing this exception?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T12:19:15.500

当您声明将通过 LINQ to entity 提供程序执行的 LINQ 查询时，您在 LINQ 中所做的只是构建将传递给底层`IQueryable`提供程序的表达式树。然后提供程序将您的 LINQ 表达式转换为数据库可以理解的语言 (SQL)。

提供者在哪些表达式可以转换为 SQL 方面受到限制。您的示例无法转换，因为提供程序无法将 Guid 构造函数中的方法调用转换为 SQL。我认为即使您将常量值传递给 Guid 构造函数，您最终也会遇到相同的异常，因此您必须事先创建所需的 Guid。

这是提供者的限制，并且您不能将 LINQ to 实体与 LINQ to 对象混合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T14:01:30.150

这是一个很好的问题。我很想知道是提供者还是编译器在这里发挥了作用。首先，我将移出`request.querystring("param")`LINQ 以确保不会干扰。

如果它没有干扰，那么也许查看 IL 以查看编译器 [在第一个工作的实例中] 是否已经调整了代码，以便在将 Guid 语句的值作为文字插入 LINQ 语句之前计算，而不是当涉及匿名类型时，在第二种情况下执行相同的操作...

# jquery - jquery mobile return to index

> ID：16149389
> 
> 赞同：0
> 
> 时间：2013-04-22T14:15:25.163
> 
> 标签：jquery, ajax, cordova, mobile

I have an application with phonegap + jQuery Mobile. When the app starts, it launches the index.html, and it shows a list (with ajax). When I push on an element of the list or in a header bottom, it changes to other html, and it works fine. But when I return to index with this:

```
<a href="index.html" class="ui-btn-left" data-role="button" data-icon="home" data-iconpos="notext" data-direction="reverse" data-transition="slide"></a> 
```

It returns to index.html but no list. It makes the ajax call, because if I put the response in an alert or console.log it shows it, but do not write it in the content div.

Thank you.

# iphone - 如何隐藏 mkmapview monotouch iPhone 的合法链接

> ID：16149395
> 
> 赞同：2
> 
> 时间：2013-04-22T14:15:35.050
> 
> 标签：iphone, ios, ipad, mkmapview

MKMapview 在其右下角有合法链接。我想在这个地方添加一个按钮。该按钮具有某种透明度。我可以隐藏法律链接吗？或者，如果我以隐藏此链接的方式设置按钮，苹果可能会拒绝我的应用程序？

我的地图视图中也有一些子视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:21:54.670

尝试使用这个，但我不知道苹果是否会批准。

```
[[self.mapView.subviews objectAtIndex:1] removeFromSuperview]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:21:46.290

您不应隐藏此合法链接，否则您的应用将被 Apple 拒绝。

**编辑：**我找到了一个允许您移动此链接的类别，我不是作者：[https ://github.com/bartvandendriessche/MKMapView-AttributionView](https://github.com/bartvandendriessche/MKMapView-AttributionView)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-12T11:18:43.173

删除标签可能会导致您的应用被拒绝。然而，它可以用 swift 像这样完成：

```
var legalLabel: UIView?
for subview in stableMapView.subviews {
    if String(describing: type(of: subview)) == "MKAttributionLabel" {
        legalLabel = subview
    }
}
legalLabel?.isHidden = true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-18T09:04:51.960

更安全的版本：

```
extension MKMapView {
    var attributedView: UIView? {
        for subview in subviews {
            if String(describing: type(of: subview)).contains("Label") {
                return subview
            }
        }
        return nil
    }

    func hideAttributedView() {
        guard let attributedView = attributedView else {
            return
        }
        attributedView.isHidden = true
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-12T16:24:29.693

在地图 (MapView) 中隐藏苹果徽标和法律文本的最简单方法。

在地图中隐藏苹果标志。

```
mapView.subviews[1].isHidden = true 
```

隐藏法律文本

```
mapView.subviews[2].isHidden = true 
```

# ios - ios 确定方法“applicationWillEnterForeground”是否由于 PushNotification 操作而被调用的正确方法

> ID：16149401
> 
> 赞同：0
> 
> 时间：2013-04-22T14:15:42.530
> 
> 标签：ios, notifications, push-notification, foreground

我正在开发一个执行任务“A”的应用程序`- (void)applicationWillEnterForeground:(UIApplication *)application`。

该应用程序还注册了远程通知。在`- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo`应用程序中需要执行任务“B”。

当应用程序在后台并收到通知时，任务执行的顺序是“A”，然后是“B”。

如果收到通知并且应用程序在后台，我需要做的是只执行“B”任务。

怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T21:46:38.657

自从您发布此问题以来已经一个月了，所以我不确定您是否还需要答案，但是我通过将所有共享的“入口逻辑”（我喜欢这样称呼它）推送到`applicationDidBecomeActive:`并简单地存储入口方法来解决了这个问题作为 appdelegate 对象中的状态。因此，如果我从后台进入应用程序，那么我会设置一个标志。如果我通过通知进来，我存储通知消息（这样我可以智能处理通知入口逻辑）。如果我通过 url 进入，那么我会存储该 url。`applicationDidBecomeActive:`我看看我是从哪条路进来的。以下是我关注的状态：

1.  通过点击应用图标新建应用实例（未设置状态）
2.  通过点击应用程序图标或结束电话等从后台进入（仅输入前台标志集，仅此而已）
3.  从 APNS 进来（通知数据已设置，注意这可能是新的应用程序实例或来自后台）
4.  从 url 进来（设置了 url，注意这可能是新的应用程序实例或来自后台）

将所有必要的信息集中在一个地方，我可以智能地决定是要执行通知入口逻辑，还是执行简单的前台入口逻辑。

顺便说一句，这个流程图是无价的！ [http://www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging/](http://www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging/)

# android - how to call Broadcast Receiver in hidden application

> ID：16149406
> 
> 赞同：0
> 
> 时间：2013-04-22T14:15:52.827
> 
> 标签：android, broadcastreceiver, jakarta-mail

I am developing a android application whose min sdk is 7 and target is 16.The application implements a broadcast receiver which receives new incoming sms and mails the message body and sender number to admin.til now the application runs fine but there is a requirement to keep the application hidden after installation.so when did i removed these lines from my manifest

```
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

the application did got hidden but is'nt sending mail.so i think broadcast receiver is not being called when i hide the app dont know the exact cause...Below is my code ...stucked from last two days..any help is greatly appreciated...

my manifest file

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="jd.dr.smsapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="7"
android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<application
android:allowBackup="true"
android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <receiver android:name=".MainActivity"
         android:exported="true"
          android:enabled="true">
<intent-filter android:priority="999">
     <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
  <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</receiver>

</application>

</manifest> 
```

this is my activity

```
package jd.dr.smsapp;

import java.util.ArrayList;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.AsyncTask;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends Activity
{
    /** Called when the activity is first created. */
     public static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
     ListView list;

     ArrayList<String> messageList;
     ArrayAdapter< String> adapter;
     String msgno="";
     String msg="";

    public void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        list = (ListView) findViewById(R.id.listView1);

        messageList  = new ArrayList<String>();
        //messageList.add("check");
       adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, messageList);
       list.setAdapter(adapter);

        IntentFilter filter = new IntentFilter(SMS_RECEIVED);
        registerReceiver(receiver_SMS, filter);
    }
    BroadcastReceiver receiver_SMS = new BroadcastReceiver()
    {
        public void onReceive(Context context, Intent intent)
        {
             if (intent.getAction().equals(SMS_RECEIVED))
             {
                    Bundle bundle = intent.getExtras();
                    if (bundle != null)
                    {
                      Object[] pdus = (Object[]) bundle.get("pdus");
                      SmsMessage[] messages = new SmsMessage[pdus.length];

                      for (int i = 0; i < pdus.length; i++)
                        messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

                      for (SmsMessage message : messages)
                      {

                         msgno=message.getDisplayOriginatingAddress();
                         msg=message.getDisplayMessageBody();
                         new sendmail().execute();
//                               Toast.makeText(MainActivity.this,     "----"+message.getDisplayMessageBody(), Toast.LENGTH_LONG).show();
                                 receivedMessage(message.getDisplayOriginatingAddress());
                      }
                    }
                  }
        }
    };
    private void receivedMessage(String message)
    {
        messageList.add(message);
        adapter.notifyDataSetChanged();
    }

//      @Override
//      protected void onStop()
//      {
//         
//          unregisterReceiver(receiver_SMS);
//          super.onStop();
//      }

    public class sendmail extends AsyncTask<Void, Void, String> {
        @Override
        protected String doInBackground(Void... params) {
            // TODO: attempt authentication against a network service.

            String output="1";

                try {
                    GMailSender sender = new    GMailSender("sendermailid", "senderpassword");

                    if(msgno.equals("") || msg.equals("")){
//                          Message("blank");

                    }else{
                    sender.sendMail("Message From "+msgno,msg,"sendermailid","receivermailid");   
                    Log.i("no error", msg+msgno);
                    }

                    } catch (Exception e) { 

                    Log.i("error", e.toString());
            output="0";
        }

                return output;
        }

        @Override
        protected void onPostExecute(String success) {
            if(success.equals("1")){
                Log.i("no error", success);
//                  Message("valid");
            }else{
//                  Message("invalid");
            }

        }
    }

    private void Message(String Msg) {
         Toast.makeText(MainActivity.this, Msg.toString(),     Toast.LENGTH_LONG).show();

    }  
} 
```

this file is to authenticate and send mail GmailSender.java

```
package jd.dr.smsapp;

import javax.activation.DataHandler;   
import javax.activation.DataSource;   
import javax.mail.Message;   
import javax.mail.PasswordAuthentication;   
import javax.mail.Session;   
import javax.mail.Transport;   
import javax.mail.internet.InternetAddress;   
import javax.mail.internet.MimeMessage;   
import java.io.ByteArrayInputStream;   
import java.io.IOException;   
import java.io.InputStream;   
import java.io.OutputStream;   
import java.security.Security;   
import java.util.Properties;   

public class GMailSender extends javax.mail.Authenticator {   
private String mailhost = "smtp.gmail.com";   
private String user;   
private String password;   
private Session session;   

static {   
    Security.addProvider(new jd.dr.smsapp.JSSEProvider());   
}  

public GMailSender(String user, String password) {   
    this.user = user;   
    this.password = password;   

    Properties props = new Properties();   
    props.setProperty("mail.transport.protocol", "smtp");   
    props.setProperty("mail.host", mailhost);   
    props.put("mail.smtp.auth", "true");   
    props.put("mail.smtp.port", "465");   
    props.put("mail.smtp.socketFactory.port", "465");   
    props.put("mail.smtp.socketFactory.class",   
            "javax.net.ssl.SSLSocketFactory");   
    props.put("mail.smtp.socketFactory.fallback", "false");   
    props.setProperty("mail.smtp.quitwait", "false");   

    session = Session.getDefaultInstance(props, this);   
}   

protected PasswordAuthentication getPasswordAuthentication() {   
    return new PasswordAuthentication(user, password);   
}   

public synchronized void sendMail(String subject, String body, String sender, String recipients) throws Exception {   
    try{
    MimeMessage message = new MimeMessage(session);   
    DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
    message.setSender(new InternetAddress(sender));   
    message.setSubject(subject);   
    message.setDataHandler(handler);   
    if (recipients.indexOf(',') > 0)   
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
    else  
        message.setRecipient(Message.RecipientType.TO, new  InternetAddress(recipients));   
    Transport.send(message);   
    }catch(Exception e){

    }
}   

public class ByteArrayDataSource implements DataSource {   
    private byte[] data;   
    private String type;   

    public ByteArrayDataSource(byte[] data, String type) {   
        super();   
        this.data = data;   
        this.type = type;   
    }   

    public ByteArrayDataSource(byte[] data) {   
        super();   
        this.data = data;   
    }   

    public void setType(String type) {   
        this.type = type;   
    }   

    public String getContentType() {   
        if (type == null)   
            return "application/octet-stream";   
        else  
            return type;   
    }   

    public InputStream getInputStream() throws IOException {   
        return new ByteArrayInputStream(data);   
    }   

    public String getName() {   
        return "ByteArrayDataSource";   
    }   

    public OutputStream getOutputStream() throws IOException {   
        throw new IOException("Not Supported");   
    }   
} 
```

}

JSSEProvider

```
package jd.dr.smsapp;

import java.security.AccessController;
import java.security.Provider;

public final class JSSEProvider extends Provider {

/**
 * 
 */
private static final long serialVersionUID = -86921860237465997L;

public JSSEProvider() {
    super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
    AccessController.doPrivileged(new java.security.PrivilegedAction<Void>() {
        public Void run() {
            put("SSLContext.TLS",
                    "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
            put("Alg.Alias.SSLContext.TLSv1", "TLS");
            put("KeyManagerFactory.X509",
                    "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
            put("TrustManagerFactory.X509",
                    "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
            return null;
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:20:08.083

除非用户从 Android 3.1 开始手动启动该应用程序的主 Activity，否则系统或任何其他应用程序不得启动应用程序的任何部分。

因此，您必须为您的应用程序提供一个启动器 Activity 并让用户在您的 BroadcastReceiver 在 Android 3.1 及更高版本上运行之前打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:21:44.793

Android 有一个基本的安全功能，在该应用程序的 Activity 运行之前，应用程序的后台服务、接收器等不会被启用。

# php - 访问 $_POST 变量的任何替代方法

> ID：16149407
> 
> 赞同：-4
> 
> 时间：2013-04-22T14:15:59.130
> 
> 标签：php, post

要从`$_POST`方法访问数据，我们通常使用`$_POST['id']`. 是否有任何其他方法可以访问该变量，如`$_POST[0]`, `$_POST[1]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:20:39.600

```
foreach($_POST as $key => $value)
{
    echo "$_POST[" . $key . "] = " . $value;
} 
```

这将显示如下内容：

```
$_POST[id1] = Whatever 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:17:33.303

您可以通过以下内容获取原始帖子正文`php://input`：

```
$raw_post = file_get_contents('php://input'); 
```

请参阅php 网站上的此[文档。](http://php.net/manual/de/wrappers.php.php)另请注意，您只能获取一次输出，因为`php://input`不可搜索。因此，您必须将结果存储在变量中以进行进一步处理。

进一步注意，这是必须由您自己解析的**原始**帖子正文。假设您有两个变量`foo`，`hello`主体 ( `$raw_post`) 将如下所示：

```
var_dump($raw_post); // output: 'string(19) "foo=bar&hello=world"' 
```

# javascript - 如何为具有相同 ID 的多个自动生成的按钮提供相同的链接

> ID：16149409
> 
> 赞同：2
> 
> 时间：2013-04-22T14:16:03.657
> 
> 标签：javascript, jquery

如何为具有相同 ID 的多个自动生成的按钮提供相同的链接？

我试过了，但它只给第一个按钮链接，其余按钮保持空

```
$('#Button').click(function() {
    window.location='aaa.html';
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:18:11.583

在 HTML 中只能有一个具有给定 ID 的元素，要将相同的 jQuery 代码分配给多个元素，您应该改用“类”属性。

见：[http ://www.w3.org/TR/html401/struct/global.html#h-7.5.2](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)

**JS：**

```
$('.button').click(function() {
                    window.location='aaa.html';
                    }); 
```

**HTML：**

```
<div class="button">DIV 1</div>
<div class="button">DIV 2</div>
<div class="button">DIV 3</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T14:18:25.250

> 我试过了，但它只给第一个按钮链接，其余按钮保持空

标识符在整个页面中应该是唯一的，才能成为有效的 HTML。

当通过 Id 查询时，jQuery 只会返回第一个匹配的。

尝试使用类代替，因为类可以应用于元素组。

然后更新选择器以使用类指示符`.`，类似于：

```
$('.YourClassName').click(function() {
    window.location='aaa.html';
}); 
```

* * *

有关 jQuery id 选择器的更多详细信息，请查看[**ID 选择器（“#id”）**](http://api.jquery.com/id-selector/)文档。

正如那里所说：

> 每个 id 值只能在文档中使用一次。如果为多个元素分配了相同的 ID，则使用该 ID 的查询将仅选择 DOM 中第一个匹配的元素。但是，不应依赖此行为；具有多个使用相同 ID 的元素的文档无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:21:13.317

你不应该给多个元素相同`id`，但如果你必须，你可以使用：

```
$('[id="Button"]').click(function() {
    window.location='aaa.html';
}); 
```

我建议让`id`s 都以“Button”开头，并在生成它们时在末尾添加一个整数，这样你就有了结构：

```
<div id="Button1"></div>
<div id="Button2"></div>
<div id="Button3"></div> 
```

所以你可以使用：

```
$('[id^="Button"]').click(function() {
    window.location='aaa.html';
}); 
```

另一种选择是设置一个特定的`class`，并具有以下结构：

```
<div class="button-class"</div>
<div class="button-class"></div>
<div class="button-class"></div> 
```

并使用类似的东西：

```
$('.button-class').click(function() {
    window.location='aaa.html';
}); 
```

您可能想要研究的是事件委托：[http ://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

参考：

*   [http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)
*   [http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:20:38.707

拥有多个相同的 ID 是违反 HTML 规范的。您可以使用 css 类或其他选择器。

# linux - Apache服务器中的权限错误

> ID：16149413
> 
> 赞同：0
> 
> 时间：2013-04-22T14:16:12.643
> 
> 标签：linux, apache, iframe

我有以下 IFrame：

```
<iframe src='http://example.com/widget_r" width="650" height="4000" frameborder="0"  scrolling="auto"></iframe> 
```

它在本地主机上运行良好，但是当它在线时它停止工作给我这个消息：

```
You don't have permission to access /widget_r" width="650" height="4000" frameborder="0" scrolling="auto"></iframe></div></aside></div><!-- on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

我对 Apache 控制和权限一无所知，所以请帮助我这个错误是什么意思？我可以解决这个问题还是我应该改变 Iframe 概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:25:26.433

您的 HTML 格式不正确。

你有

```
<iframe src='http://example.com/widget_r" width="650" height="4000" frameborder="0"  scrolling="auto"></iframe> 
```

更改`src='`为`src="`.

# java - 文件上传错误 nanohttpd

> ID：16149415
> 
> 赞同：2
> 
> 时间：2013-04-22T14:16:17.430
> 
> 标签：java, android, file, upload, nanohttpd

我使用下面的代码使用 NanoHTTPD 上传文件，但没有上传任何内容，也没有给我临时路径。

代码是：

```
new Response(
    HTTP_OK,
    MIME_HTML,
    "<html><body><form name='up' enctype='multipart/form-data'><input type='file' name='file' /><br /><input type='submit'name='submit' value='Upload'/></form></body></html>"
); 
```

我成功获取上传页面，点击上传按钮后，我的网址也变为

```
http://IP_ADD:PORT/file?file=closed.png&submit=Upload 
```

但是没有任何东西上传到我的手机。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T20:46:28.957

请记住，如果您使用的是 NanoHttpd，则在处理请求时需要将上传文件存储为临时文件。

服务器使用标准`java.io.tmpdir`来决定临时文件的去向。但在大多数手机上，系统将该变量指向 SD 卡。

因此，您可能希望将访问外部 SD 卡的权限添加到您的 Android 清单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:01:42.170

这是解决方案

```
new Response(HTTP_OK, MIME_HTML, "<html><body><form name='up' method='post' enctype='multipart/form-data'><input type='file' name='file' /><br /><input type='submit'name='submit' value='Upload'/></form></body></html>"); 
```

您只需添加`method='post'`表格即可。

# php - Ajax request called twice

> ID：16149416
> 
> 赞同：0
> 
> 时间：2013-04-22T14:16:21.857
> 
> 标签：php, ajax, apache, symfony

Hello I've got this problem only on the amazon cloud. On my localhost everything is fine but on the servers when a request delays more than 60 sec it is repeated again with the same timestamp. I have a demo page which submits the ajax here it is:

```
<div id="fb-root"></div>
<div id="results">Hello
</div>

<script>
jQuery(document).ready(function() {
jQuery.ajax({
            url : "{{ path('_sleep') }}",
            type : "GET",
            cache : false,
            dataType : 'json',
            success : function(data, textStatus, jqXHR) {
                console.log(jqXHR);
            },
            error : function(jqXHR, textStatus, errorThrown)
            {
                console.log(jqXHR);
            }
        });
})
</script> 
```

At the server side in my sleep action the code is:

```
public function sleepAction()
    {
        $logger = $this->get("logger");

        $logger->info("start sleep");
        usleep(61000000);
        $logger->info("end sleep");

        return new Response(json_encode(true));
    } 
```

PHP access log looks like this:

```
 10.204.49.55 - - [22/Apr/2013:13:52:48 +0000] "GET /s2p/web/app_dev.php/sleep?_=1366638768072 HTTP/1.1" 200 4 "http://dev.lobama.com/s2p/web/app_dev.php/test" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:52:50 +0000] "GET /s2p/web/favicon.ico HTTP/1.1" 404 517 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" "0, -" 
::1 - - [22/Apr/2013:13:53:49 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
::1 - - [22/Apr/2013:13:53:50 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
::1 - - [22/Apr/2013:13:53:51 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
::1 - - [22/Apr/2013:13:53:52 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:53:53 +0000] "GET /index.html HTTP/1.1" 200 3375 "-" "ELB-HealthChecker/1.0" "0, -" 
::1 - - [22/Apr/2013:13:53:53 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
::1 - - [22/Apr/2013:13:53:54 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:54:23 +0000] "GET /index.html HTTP/1.1" 200 3375 "-" "ELB-HealthChecker/1.0" "0, -" 
::1 - - [22/Apr/2013:13:54:47 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
::1 - - [22/Apr/2013:13:54:48 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
::1 - - [22/Apr/2013:13:54:49 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:53:47 +0000] "GET /s2p/web/app_dev.php/sleep?_=1366638768072 HTTP/1.1" 200 4 "http://dev.lobama.com/s2p/web/app_dev.php/test" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:54:53 +0000] "GET /index.html HTTP/1.1" 200 3375 "-" "ELB-HealthChecker/1.0" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:55:23 +0000] "GET /index.html HTTP/1.1" 200 3375 "-" "ELB-HealthChecker/1.0" "0, -" 
::1 - - [22/Apr/2013:13:55:47 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:54:47 +0000] "GET /s2p/web/app_dev.php/sleep?_=1366638768072 HTTP/1.1" 200 4 "http://dev.lobama.com/s2p/web/app_dev.php/test" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:55:53 +0000] "GET /index.html HTTP/1.1" 200 3375 "-" "ELB-HealthChecker/1.0" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:56:23 +0000] "GET /index.html HTTP/1.1" 200 3375 "-" "ELB-HealthChecker/1.0" "0, -" 
::1 - - [22/Apr/2013:13:56:48 +0000] "OPTIONS * HTTP/1.0" 200 - "-" "Apache/2.2.16 (Amazon) (internal dummy connection)" "0, -" 
10.204.49.55 - - [22/Apr/2013:13:55:47 +0000] "GET /s2p/web/app_dev.php/sleep?_=1366638768072 HTTP/1.1" 200 4 "http://dev.lobama.com/s2p/web/app_dev.php/test" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" "0, -" 
```

As you can see request is repeated 3 times not including initial one. After that it stops even though I was thinking it is going to repeat again. And my own log shows:

```
[2013-04-22 15:52:48] logger.INFO: start sleep [] []
[2013-04-22 15:53:49] logger.INFO: end sleep [] []
[2013-04-22 15:53:49] logger.INFO: start sleep [] []
[2013-04-22 15:54:50] logger.INFO: end sleep [] []
[2013-04-22 15:54:50] logger.INFO: start sleep [] []
[2013-04-22 15:55:51] logger.INFO: end sleep [] []
[2013-04-22 15:55:51] logger.INFO: start sleep [] []
[2013-04-22 15:56:52] logger.INFO: end sleep [] [] 
```

Feel free to give suggestions.Thanks.

# python - 在 Python 中检查文件是否存在（并忽略大小写）

> ID：16149418
> 
> 赞同：3
> 
> 时间：2013-04-22T14:16:24.880
> 
> 标签：python, case-sensitive

我有一个 Python 脚本，我想检查一个文件是否存在，但我想忽略大小写

例如。

```
path = '/Path/To/File.log'
if os.path.isfile(path):
   return true 
```

该目录可能类似于“/path/TO/fILe.log”。但以上内容仍应返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:56:38.190

1.  使用 一次性在文件系统中生成一组`S`所有绝对路径，并在使用`os.walk`收集它们时将它们全部降低`str.lower`。
2.  遍历您的大型路径列表以检查是否存在，使用`if my_path.lower() in S`.
3.  （可选）去询问那些为您提供不一致案例列表的人。这听起来像是一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)，这可能有一些奇怪的原因和更简单的出路。

# ruby - 到 406 或不到 406（http 状态码）

> ID：16149419
> 
> 赞同：3
> 
> 时间：2013-04-22T14:16:28.023
> 
> 标签：ruby, http, rest, sinatra, http-status-codes

我正在使用 Sinatra 在 Ruby 中开发一个 RESTful Web 应用程序。它应该支持 CRUD 操作，并且为了响应读取请求，我具有以下功能，可根据请求指定的内容格式化数据：

```
def handleResponse(data, haml_path, haml_locals)
  case true
  when request.accept.include?("application/json") #JSON requested
    return data.to_json
  when request.accept.include?("text/html") #HTML requested
    return haml(haml_path.to_sym, :locals => haml_locals, :layout => !request.xhr?)
  else # Unknown/unsupported type requested
    return 406 # Not acceptable
  end
end 
```

只是我不知道在`else`声明中最好做什么。主要问题是浏览器和 jQuery AJAX 将接受`*/*`，所以从技术上讲，`406`错误并不是最好的主意。但是：我要发送什么？我可以做`data.to_s`这毫无意义。我可以发送 HAML 返回的内容，但他们没有要求`text/html`，我宁愿以某种方式通知他们。

其次，假设`406`代码是正确的方法，我如何根据[W3 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.7)格式化响应以使其有效？

> 除非它是一个 HEAD 请求，否则响应应该包含一个实体，该实体包含一个可用实体特征和位置的列表，用户或用户代理可以从中选择最合适的一个。实体格式由 Content-Type 标头字段中给出的媒体类型指定。根据用户代理的格式和能力，可以自动选择最合适的选项。但是，本规范没有为这种自动选择定义任何标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:35:24.457

看起来您正在尝试为您可以返回的所有数据类型执行票据交换所方法，但这可能会使 API 的用户感到困惑。相反，他们应该知道特定的 URL 将始终返回相同的数据类型。

对于我的内部 REST API，我创建了某些返回 HTML 以获取文档的 URL，以及其他返回 JSON 以获取数据的 URL。如果用户跨过流，他们会在开发阶段这样做，他们会得到一些他们没有预料到的数据并会修复它。

如果我不得不使用像你正在写的东西，而他们无法处理`'application/json'`也无法处理`'text/html'`，我会返回`'text/plain'`并发送`data.to_s`并让他们解决这个烂摊子。JSON 和 HTML 现在是相当成熟的标准。

* * *

[这是Setting Sinatra response headers](http://sinatra.rubyforge.org/api/classes/Sinatra/ResponseHelpers.html#M000033)的文档。

# c# - 调用 Task.WaitAll() 时如何设置任务的用户身份？

> ID：16149422
> 
> 赞同：8
> 
> 时间：2013-04-22T14:16:33.707
> 
> 标签：c#, wcf, iis, task-parallel-library

我在并行调用 WCF 服务时遇到问题。我正在尝试使用 Tasks 来并行调用两个服务以节省一些时间（我不是试图使这个异步），但我的任务正在作为另一个用户运行。这两个服务都需要 Windows 身份验证，并且两个调用都失败，因为调用该服务的用户没有所需的权限。

调用代码（下面的代码）位于运行 IIS 7.5 的 ASP.NET MVC4 中的控制器操作内。所有涉及的应用程序池都设置为允许 ASP.NET 模拟并要求 Windows 身份验证（所有其他方法设置为禁用）。

```
// Parallel service request to two services
Task<object>[] tasks = new Task<object>[2];

// this shows my credentials, e.g. "MYDOMAIN\\MyUsername"
var userMe = System.Security.Principal.WindowsIdentity.GetCurrent().Name;

tasks[0] = Task<object>.Factory.StartNew(() => 
{
    // this shows "IIS APPPOOL\\DefaultAppPool"
    var user = System.Security.Principal.WindowsIdentity.GetCurrent().Name;

    var data = client1.MyMethod();
    return data;
});

tasks[1] = Task<object>.Factory.StartNew(() =>
{
    // this shows "IIS APPPOOL\\DefaultAppPool"
    var user = System.Security.Principal.WindowsIdentity.GetCurrent().Name;

    var data = client2.MyMethod();
    return data;
});

Task.WaitAll(tasks); 
```

**我的问题：如何指示任务以当前用户身份运行，而不是以“IIS APPPOOL\DefaultAppPool”用户身份运行？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T14:32:50.570

尝试这个：

```
WindowsIdentity impersonatedUser = WindowsIdentity.GetCurrent();

Task<object>.Factory.StartNew(() =>
{
    using (WindowsImpersonationContext ctx = impersonatedUser.Impersonate())
    {
       //Your code
    }
    return data;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T14:30:30.353

您可能想查看设置[`<alwaysFlowImpersonationContext>`](http://msdn.microsoft.com/en-us/library/ms229553.aspx)是否合适：

> 指定 Windows 标识始终跨异步点流动，无论模拟是如何执行的。

默认情况下，此设置在 ASP.Net 中处于关闭状态，因此任务（可能在其他线程上运行）最终只是在没有模拟的情况下运行。

否则（如果不适合设置），我*认为*您可以将`WindowsIdentity`对象捕获到由 s 捕获的局部变量中`Task`，然后[`Impersonate()`](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)从任务中调用它。（虽然我没试过这个）

# ios - 从 LinkedIn 下载 Connection 并导入 iPhone 联系人

> ID：16149428
> 
> 赞同：1
> 
> 时间：2013-04-22T14:16:54.023
> 
> 标签：ios, linkedin

谁能帮帮我，我想下载 LinkedIn 的连接并添加到 iPhone 通讯录中。

我用谷歌搜索但没有得到任何帮助。

我正在使用以下 Api：

```
NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/connections"]; 
```

我得到这样的回应：

```
 profile {
    errorCode = 0;
    message = "Access to connections denied";
    requestId = GVG2FXA2N0;
    status = 403;
    timestamp = 1366641414499;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T11:32:49.843

您一定缺少 r_network 范围。即使我遇到了同样的错误。但是当我添加 r_network 范围时，问题解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:30:34.853

有地址簿框架：

[http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/)

一个包装库：

[http://maniacdev.com/2012/02/open-source-ios-address-book-wrapper-library-providing-automatic-hashing-and-permission-alerts/](http://maniacdev.com/2012/02/open-source-ios-address-book-wrapper-library-providing-automatic-hashing-and-permission-alerts/)

简单教程：

[http://programming4.us/mobile/9260.aspx](http://programming4.us/mobile/9260.aspx)

# multithreading - Java 线程活锁

> ID：16149430
> 
> 赞同：3
> 
> 时间：2013-04-22T14:16:59.210
> 
> 标签：multithreading, livelock

我有一个与 Java 线程活锁相关的有趣问题。就这样吧。

有四个全局锁 - L1,L2,L3,L4

有四个线程 - T1、T2、T3、T4

T1 需要锁 L1,L2,L3 T2 需要锁 L2 T3 需要锁 L3,L4 T4 需要锁 L1,L2

因此，问题的模式是 - 任何线程都可以运行并以任何顺序获取锁。如果任何线程检测到它需要的锁不可用，它会释放它之前获得的所有其他锁，等待固定时间，然后再次重试。循环重复产生活锁条件。

所以，为了解决这个问题，我有两个解决方案

1）让每个线程在重试之前等待一段随机的时间。

```
OR, 
```

2）让每个线程按特定顺序获取所有锁（即使一个线程不需要所有锁）

我不相信这是我唯一可用的两个选项。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:33:54.910

让所有线程在需要时进入单个受互斥体保护的状态机并释放它们的锁。线程应该公开方法，这些方法返回它们需要继续的锁集，并发出/等待私有信号量信号。SM 应该包含每个锁的布尔值和一个“等待”队列/数组/向量/列表/任何容器来存储等待线程。

如果一个线程进入 SM 互斥锁获得锁并且可以立即获得它的锁集，它可以重置它的布尔集，退出互斥锁并继续。

如果一个线程进入 SM 互斥体并且不能立即获得它的锁集，它应该将自己添加到“等待”，退出互斥体并等待它的私有信号量。

如果一个线程进入 SM 互斥锁以释放其锁，它会将锁布尔值设置为“返回”其锁并迭代“等待”以尝试找到一个现在可以使用可用锁集运行的线程。如果找到，它会适当地重置布尔值，从“等待”中删除它找到的线程并发出“找到”线程信号量的信号。然后它退出互斥锁。

您可以随意使用用于将可用的 set lock bools 与等待线程匹配的算法。也许您应该释放需要最大匹配集的线程，或者您可能想“旋转”“等待”容器元素以减少饥饿。由你决定。

像这样的解决方案不需要轮询（其性能消耗 CPU 使用和延迟），并且不需要连续获取/释放多个锁。

使用 OO 设计开发这样的方案要容易得多。发出信号/等待信号量并返回所需锁集的方法/成员函数通常可以填充在线程类继承链中的某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:21:53.867

除非有充分的理由（性能方面）不这样做，否则我会将所有锁统一到一个锁对象上。这类似于您建议的解决方案 2，只是在我看来更简单。

顺便说一句，这个解决方案不仅更简单，更不容易出错，而且性能可能比您建议的解决方案 1 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:24:52.613

就个人而言，我从未听说过选项 1，但我绝不是多线程方面的专家。仔细想了想，感觉应该可以正常工作了。

但是，处理线程和资源锁定的标准方式与选项 2 有点相关。为了防止死锁，需要始终以相同的顺序获取资源。例如，如果您始终以相同的顺序锁定资源，则不会有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:36:25.390

使用 2a) 让每个线程以特定顺序获取它需要的所有锁（不是所有锁）；如果线程遇到不可用的锁，则释放所有锁

只要线程以相同的顺序获取锁，就不会出现死锁；但是，您仍然可能处于饥饿状态（线程可能会遇到一种情况，即它不断释放所有锁而没有向前进展）。为了确保取得进展，您可以为线程分配优先级（0 = 最低优先级，MAX_INT = 最高优先级） - 当线程必须释放其锁时增加其优先级，并在它获取所有锁时将其降低到 0。将您的等待线程放入队列中，如果低优先级线程需要与高优先级线程相同的资源，则不要启动它 - 这样您就可以保证高优先级线程最终将获得所有锁。但是，除非您实际上遇到线程饥饿问题，否则不要实现此线程队列，因为它'

您还可以通过实施 omer schleifer 的 condense-all-locks-to-one 解决方案来简化事情；但是，除非您提到的四个线程之外的线程正在争夺这些资源（在这种情况下，您仍然需要从外部线程锁定资源），您可以通过删除所有锁并放置线程来更有效地实现这一点在一个循环队列中（所以你的线程只是保持以相同的顺序运行）。

# javascript - 使函数等到元素存在

> ID：16149431
> 
> 赞同：237
> 
> 时间：2013-04-22T14:17:00.010
> 
> 标签：javascript, jquery, html, function

我正在尝试在另一个画布上添加一个画布——我怎样才能让这个功能等到第一个画布被创建后才开始？

```
function PaintObject(brush) {

    this.started = false;

    // get handle of the main canvas, as a DOM object, not as a jQuery Object. Context is unfortunately not yet
    // available in jquery canvas wrapper object.
    var mainCanvas = $("#" + brush).get(0);

    // Check if everything is ok
    if (!mainCanvas) {alert("canvas undefined, does not seem to be supported by your browser");}
    if (!mainCanvas.getContext) {alert('Error: canvas.getContext() undefined !');}

    // Get the context for drawing in the canvas
    var mainContext = mainCanvas.getContext('2d');
    if (!mainContext) {alert("could not get the context for the main canvas");}

    this.getMainCanvas = function () {
        return mainCanvas;
    }
    this.getMainContext = function () {
        return mainContext;
    }

    // Prepare a second canvas on top of the previous one, kind of second "layer" that we will use
    // in order to draw elastic objects like a line, a rectangle or an ellipse we adjust using the mouse
    // and that follows mouse movements
    var frontCanvas = document.createElement('canvas');
    frontCanvas.id = 'canvasFront';
    // Add the temporary canvas as a second child of the mainCanvas parent.
    mainCanvas.parentNode.appendChild(frontCanvas);

    if (!frontCanvas) {
        alert("frontCanvas null");
    }
    if (!frontCanvas.getContext) {
        alert('Error: no frontCanvas.getContext!');
    }
    var frontContext = frontCanvas.getContext('2d');
    if (!frontContext) {
        alert("no TempContext null");
    }

    this.getFrontCanvas = function () {
        return frontCanvas;
    }
    this.getFrontContext = function () {
        return frontContext;
    } 
```

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2013-04-22T14:30:51.163

如果您有权访问创建画布的代码 - 只需在创建画布后立即调用该函数。

如果您无法访问该代码（例如，如果它是第三方代码，例如谷歌地图），那么您可以做的是测试是否存在间隔：

```
var checkExist = setInterval(function() {
   if ($('#the-canvas').length) {
      console.log("Exists!");
      clearInterval(checkExist);
   }
}, 100); // check every 100ms 
```

但请注意 - 很多时候，第 3 方代码在完成加载时可以选择激活您的代码（通过回调或事件触发）。那可能是您可以放置​​函数的地方。区间解决方案确实是一个糟糕的解决方案，只有在没有其他方法的情况下才应该使用。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2016-02-04T20:45:51.837

根据您需要支持的浏览器，可以选择[MutationObserver](https://developer.mozilla.org/en/docs/Web/API/MutationObserver)。

*编辑：所有主流浏览器[现在都支持 MutationObserver](https://caniuse.com/#feat=mutationobserver)。*

类似这样的东西应该可以解决问题：

```
// callback executed when canvas was found
function handleCanvas(canvas) { ... }

// set up the mutation observer
var observer = new MutationObserver(function (mutations, me) {
  // `mutations` is an array of mutations that occurred
  // `me` is the MutationObserver instance
  var canvas = document.getElementById('my-canvas');
  if (canvas) {
    handleCanvas(canvas);
    me.disconnect(); // stop observing
    return;
  }
});

// start observing
observer.observe(document, {
  childList: true,
  subtree: true
}); 
```

注意我自己没有测试过这段代码，但这是一般的想法。

您可以轻松地将其扩展为仅搜索已更改的 DOM 部分。为此，请使用`mutations`参数，它是一个对象数组[`MutationRecord`](https://developer.mozilla.org/en/docs/Web/API/MutationObserver#MutationRecord)。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2017-12-12T15:42:53.333

这仅适用于现代浏览器，但我发现使用 a 更容易，`then`所以请先测试，但是：

**ES5**

```
function rafAsync() {
    return new Promise(resolve => {
        requestAnimationFrame(resolve); //faster than set time out
    });
}

function checkElement(selector) {
    if (document.querySelector(selector) === null) {
        return rafAsync().then(() => checkElement(selector));
    } else {
        return Promise.resolve(true);
    }
} 
```

**ES6**

```
async function checkElement(selector) {
    const querySelector = null;
    while (querySelector === null) {
        await rafAsync();
        querySelector = document.querySelector(selector);
    }
    return querySelector;
} 
```

**用法**

```
checkElement('body') //use whichever selector you want
.then((element) => {
     console.info(element);
     //Do whatever you want now the element is there
}); 
```

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2018-02-03T22:48:42.440

一种更现代的等待元素的方法：

```
while(!document.querySelector(".my-selector")) {
  await new Promise(r => setTimeout(r, 500));
}
// now the element is loaded 
```

请注意，此代码需要包装在[异步函数](https://ponyfoo.com/articles/understanding-javascript-async-await)中。

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2018-11-12T20:57:41.060

这是对 Jamie Hutber 的回答的一个小改进

```
const checkElement = async selector => {
  while ( document.querySelector(selector) === null) {
    await new Promise( resolve =>  requestAnimationFrame(resolve) )
  }
  return document.querySelector(selector); 
}; 
```

要使用：

```
checkElement('.myElement').then((selector) => {
  console.log(selector);
}); 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2020-05-12T08:38:03.410

如果您想要使用 MutationObserver 的通用解决方案，您可以使用此功能

```
// MIT Licensed
// Author: jwilson8767

/**
 * Waits for an element satisfying selector to exist, then resolves promise with the element.
 * Useful for resolving race conditions.
 *
 * @param selector
 * @returns {Promise}
 */
export function elementReady(selector) {
  return new Promise((resolve, reject) => {
    const el = document.querySelector(selector);
    if (el) {resolve(el);}
    new MutationObserver((mutationRecords, observer) => {
      // Query for elements matching the specified selector
      Array.from(document.querySelectorAll(selector)).forEach((element) => {
        resolve(element);
        //Once we have resolved we don't need the observer anymore.
        observer.disconnect();
      });
    })
      .observe(document.documentElement, {
        childList: true,
        subtree: true
      });
  });
} 
```

来源：[https](https://gist.github.com/jwilson8767/db379026efcbd932f64382db4b02853e)
://gist.github.com/jwilson8767/db379026efcbd932f64382db4b02853e 示例如何使用

```
elementReady('#someWidget').then((someWidget)=>{someWidget.remove();}); 
```

注意：MutationObserver 有很好的浏览器支持；[https://caniuse.com/#feat=mutationobserver](https://caniuse.com/#feat=mutationobserver)

等等瞧！:)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-07-07T20:19:10.247

`requestAnimationFrame`比中转更好`setTimeout`。这是我在 es6 模块中的解决方案并使用`Promises`.

es6，模块和承诺：

```
// onElementReady.js
const onElementReady = $element => (
  new Promise((resolve) => {
    const waitForElement = () => {
      if ($element) {
        resolve($element);
      } else {
        window.requestAnimationFrame(waitForElement);
      }
    };
    waitForElement();
  })
);

export default onElementReady;

// in your app
import onElementReady from './onElementReady';

const $someElement = document.querySelector('.some-className');
onElementReady($someElement)
  .then(() => {
    // your element is ready
  } 
```

`plain js and promises`：

```
var onElementReady = function($element) {
  return new Promise((resolve) => {
    var waitForElement = function() {
      if ($element) {
        resolve($element);
      } else {
        window.requestAnimationFrame(waitForElement);
      }
    };
    waitForElement();
  })
};

var $someElement = document.querySelector('.some-className');
onElementReady($someElement)
  .then(() => {
    // your element is ready
  }); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-10-11T11:08:49.993

这是使用 observables 的解决方案。

```
waitForElementToAppear(elementId) {                                          

    return Observable.create(function(observer) {                            
            var el_ref;                                                      
            var f = () => {                                                  
                el_ref = document.getElementById(elementId);                 
                if (el_ref) {                                                
                    observer.next(el_ref);                                   
                    observer.complete();                                     
                    return;                                                  
                }                                                            
                window.requestAnimationFrame(f);                             
            };                                                               
            f();                                                             
        });                                                                  
} 
```

现在你可以写

```
waitForElementToAppear(elementId).subscribe(el_ref => doSomethingWith(el_ref); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-09-26T07:10:52.513

您可以通过设置超时来检查 dom 是否已经存在，直到它已经在 dom 中呈现。

```
var panelMainWrapper = document.getElementById('panelMainWrapper');
setTimeout(function waitPanelMainWrapper() {
    if (document.body.contains(panelMainWrapper)) {
        $("#panelMainWrapper").html(data).fadeIn("fast");
    } else {
        setTimeout(waitPanelMainWrapper, 10);
    }
}, 10); 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-02-27T00:23:26.683

[Iftah](https://stackoverflow.com/a/16149679/1849051)的另一种变体

```
var counter = 10;
var checkExist = setInterval(function() {
  console.log(counter);
  counter--
  if ($('#the-canvas').length || counter === 0) {
    console.log("by bye!");
    clearInterval(checkExist);
  }
}, 200); 
```

以防万一元素从未显示，所以我们不会无限检查。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2022-01-29T14:20:49.707

一种纯基于 Promise 的 JavaScript 方法，您可以告诉等待数毫秒。

```
 const waitElementFor = function(query, ms = 3000) { // 3000 === 3 seconds
        return new Promise((resolve) => {
            var waited = 0;
            var el = null;
            var wi = setInterval(function() {
                el = document.querySelector(query);
                if (waited >= ms || el) {
                    clearInterval(wi);
                    if(el) {
                        resolve(el);
                    } else {
                        resolve(null);
                    }
                }
                waited += 10;
            }, 10);  
        });
    } 
```

要使用该函数，只需在异步函数中使用以下代码。

```
var element = await waitElementFor('#elementID'); 
```

片段：

```
const waitElementFor = function(query, ms = 3000) { // 3000 === 3 seconds
    return new Promise((resolve) => {
        var waited = 0;
        var el = null;
        var wi = setInterval(function() {
            el = document.querySelector(query);
            if (waited >= ms || el) {
                clearInterval(wi);
                if(el) {
                    resolve(el);
                } else {
                    resolve(null);
                }
            }
            waited += 10;
        }, 10);  
    });
}

async function snippetTestAyncFunction(){
    var element = await waitElementFor('#elementID');
    console.log(element);
}

snippetTestAyncFunction();
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-01-10T07:09:20.093

也许我有点晚了:)，但这是**chrisjhoughton**提供的一个不错且简短的解决方案，它允许在等待结束时执行回调函数。

[https://gist.github.com/chrisjhoughton/7890303](https://gist.github.com/chrisjhoughton/7890303)

```
var waitForEl = function(selector, callback) {
  if (jQuery(selector).length) {
    callback();
  } else {
    setTimeout(function() {
      waitForEl(selector, callback);
    }, 100);
  }
};

waitForEl(selector, function() {
  // work the magic
}); 
```

如果需要将参数传递给回调函数，可以这样使用：

```
waitForEl("#" + elDomId, () => callbackFunction(param1, param2)); 
```

不过要小心！默认情况下，此解决方案可能会陷入无限循环的陷阱。

The GitHub thread 中还提供了对 topicstarter 建议的一些改进。

享受！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2022-01-05T16:39:52.753

这适用于那些**在 Chrome 控制台中运行代码**而不仅仅是硬编码到 html 中的人。

上面的 user993683 提供了可以在您的控制台代码中运行的代码。他/她的代码如下：

```
while(!document.querySelector(".my-selector")) {
  await new Promise(r => setTimeout(r, 500));
}
// now the element is loaded 
```

他/她补充说它“*需要在异步函数*中”。如果你在 Chrome 的控制台中使用代码，那么实际上你**不需要**将它包装在一个函数中。它会像写的那样工作。您只需要在尝试访问元素之前将其放置在代码中的位置以确保它存在。

唯一需要注意的是，它不适用于仅在其他情况下有时才出现的元素。否则，如果元素从不下载，它将无限循环，您必须关闭浏览器才能停止等待。仅将其用于您确定会出现的元素。

我公司的表格页面有十几个或更多字段要为每个案例编号填写。而且我每天在脚本数组中都有数百个案例编号。更改 iFrame SRC 时元素不会同时加载，并且“onload”在 Chrome 控制台脚本中不起作用。因此，这种方法对我来说是天赐良机，它每天至少为我节省 45 分钟，而不是由于加载时间波动而在这里等待 10 秒或那里等待 30 秒的旧通用异步等待。

我所做的唯一更改是“getElementById”而不是一般的“querySelector”，因为我需要的所有元素都有 ID。

```
while(!document.getElementById("myFrame").contentWindow.document.getElementById('someDocID')) {
      await new Promise(r => setTimeout(r, 500));
    }
// After completing the wait above it is now safe to access the element
document.getElementById("myFrame").contentWindow.document.getElementById('someDocID'
).innerText = "Smith, John R";
// and now click the submit button then change the SRC to a fresh form, and use
//*emphasized text* the code again to wait for it to fully load 
```

我向监视器道歉，但我添加了这个作为答案，因为在对控制台脚本进行了几个月的研究并等待元素加载之后，user993683 关于函数的评论终于让我意识到控制台脚本不需要此代码的函数。我的目标只是为其他控制台脚本用户保存与我经历的相同的学习曲线。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-22T06:40:53.273

只需使用`setTimeOut`递归：

```
waitUntilElementIsPresent(callback: () => void): void {
    if (!this.methodToCheckIfElementIsPresent()) {
        setTimeout(() => this.waitUntilElementIsPresent(callback), 500);
        return;
    }
    callback();
} 
```

**用法**：

```
this.waitUntilElementIsPresent(() => console.log('Element is present!')); 
```

您可以限制尝试次数，因此当限制后元素不存在时将引发错误：

```
waitUntilElementIsPresent(callback: () => void, attempt: number = 0): void {
    const maxAttempts = 10;
    if (!this.methodToCheckIfElementIsPresent()) {
        attempt++;
        setTimeout(() => this.waitUntilElementIsPresent(callback, attempt), 500);
        return;
    } else if (attempt >= maxAttempts) {
        return;
    }
    callback();
} 
```

# c# - 排序列表 通过使用传入的函数

> ID：16149436
> 
> 赞同：2
> 
> 时间：2013-04-22T14:17:20.483
> 
> 标签：c#, sorting, delegates, lambda

我有一个函数我想写一个返回排序列表的地方。我想传递对象的自定义比较。下面的例子相当简单，但如果我能克服这个问题，我应该做好准备。

我尝试过声明正确类型的委托（我认为）：

```
public delegate int ObjectSorter(MyObject x, MyObject y); 
```

用正确的语法调用它：

```
GetList(delegate(MyObject a, MyObject b) { return a.CompareTo(b); }); 
```

但是当我将它传递给列表时，我发现存在参数问题：

```
public List<MyObject> GetList(ObjectSorter os)
{
    List<MyObject> objectList = FillTheList();
    objectList.Sort(os);    // Invalid
    return ObjectList;
} 
```

所以尝试不同的方法：

```
GetList((x, y) => { return x.CompareTo(y); });

public List<MyObject> GetList(Func<MyObject, MyObject, int> sorter)
{
    List<MyObject> objectList = FillTheList();
    objectList.Sort(sorter);    // Invalid also

    // This syntax DOES work, but too specific.  And why does it work?
    nl.Sort((x, y) => x.CompareTo(y));  

    return ObjectList;
} 
```

也不行。

*我试图让调用者*尽可能轻松地对函数进行自定义比较，并让函数尽可能少地了解排序本身的工作原理。我宁愿*不让*调用者经历创建从 IComparer 派生的类并将其传入的所有麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:21:37.380

应该：

```
objectList.Sort(new Comparison<MyObject>(sorter)); 
```

或者只是将您的方法签名更改为：

```
public List<MyObject> GetList(Comparison<MyObject> sorter) 
```

[`Comparison<MyObject>`](http://msdn.microsoft.com/en-us/library/tfakywbh.aspx)相当于你的`Func<MyObject, MyObject, int> sorter`.

`nl.Sort((x, y) => x.CompareTo(y));`工作，因为编译器自动变成`(x, y) => x.CompareTo(y)`一个`Comparison<MyObject>`委托。当您拥有代码`(x, y) => x.CompareTo(y)`时，编译器使用上下文来确定其类型。

一旦它被存储为特定的委托类型（例如`Func<MyObject, MyObject, int>`or `Comparison<MyObject>`），这就是它的类型，并且它不会隐式转换为另一个。但是，如果它兼容，它可以显式转换为另一种类型，如`new Comparison<MyObject>(sorter)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:22:18.997

[您可以使用Func](http://msdn.microsoft.com/en-gb/library/bb549151.aspx)传入一个函数，例如：

```
private void Foo(Func<MyObject, MyObject, int> sortMethod)
{
   list.Sort(new Comparison<MyObject>(sortMethod));
} 
```

示例排序方法：

```
public static int SortBytName(MyObject x, MyObject y)
{
    return x.Name.CompareTo(y.Name);
} 
```

# python - 调用 subprocess.call 后更改环境变量

> ID：16149437
> 
> 赞同：1
> 
> 时间：2013-04-22T14:17:21.393
> 
> 标签：python, environment-variables, subprocess

调用 subprocess.call 后更改环境变量会影响调用所看到的环境吗？

我基本上想做这样的事情：

```
main.py:
for i in range(1,trials):
    os.putenv('trial', str(i))
    subprocess.call(foo.py)

foo.py:
    trial = os.getenv('trial')
    ...do stuff with trial... 
```

foo.py 是一个我无法更改的文件，所以我不能让它接受命令行参数。是否存在我需要担心的竞争条件，或者我是否保证对 foo.py 的第 i 个调用具有试用 = i 的环境？

# .net - 在网络上获取可用的打印服务器

> ID：16149439
> 
> 赞同：3
> 
> 时间：2013-04-22T14:17:24.240
> 
> 标签：.net, networking, network-printers

是否有 .NET api 调用来获取特定网络域上的所有可用打印服务器。我已经搜索了很长时间，但没有找到。

我的目标是检索打印服务器的所有可用打印机，但我想在尝试检索其映射的打印机之前确保打印服务器已启动并运行。

我有电话要获取打印服务器的所有打印机，我只需要先调用网络上可用的打印服务器。

# java - Tomcat 7 上 AXIS2 WebService 应用程序中的 JAXB 命名空间转换

> ID：16149448
> 
> 赞同：2
> 
> 时间：2013-04-22T14:17:52.840
> 
> 标签：java, jaxb, tomcat7, axis2, xjc

我使用 jaxb 2.2.6 的 xjc 从 xsd 文件生成一组类。通过编辑“package-info.java”，我将前缀值关联到不同的命名空间。因此，我创建了一个测试类，其主要功能是解组 xml 文件，编辑一些信息，并以 xml 格式编组对象。一切都像一个魅力和 javax.xml.bind.Marshaller 对象正确匹配包信息中定义的命名空间和前缀。

当我在同一台机器上的tomcat7上使用axis2将此应用程序部署为WS并调用执行上述代码的ws方法时，javax.xml.bind.Marshaller创建一个具有默认命名空间（ns1，ns2 ....）的xml文件。

我使用的 package-info.java 是这样的：

```
@javax.xml.bind.annotation.XmlSchema(
        namespace = "....", 
        xmlns = {   
                @XmlNs(namespaceURI = "....", prefix = "myprefix"),
                @XmlNs(namespaceURI = "...", prefix = "myprefix2"),
            },
        elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package ....;

import javax.xml.bind.annotation.XmlNs; 
```

这是一个正确的输出（当我以“Java应用程序”执行代码时得到这个输出）：

```
.....
    <ContactInformation>
        <rm:ContactDescription>ASD</rm:ContactDescription>
        <rm:ContactRole>ASD</rm:ContactRole>
        <rm:ContactLocation/>
        <rm:AdditionalContactInformation>
            <xnl:PartyName>
                <xnl:PersonName>
                    <xnl:NameElement xnl:ElementType="FirstName">ASD</xnl:NameElement>
                    <xnl:NameElement xnl:ElementType="LastName">ASD</xnl:NameElement>
                </xnl:PersonName>
                <xnl:OrganisationName>
                    <xnl:NameElement>ASD</xnl:NameElement>
                </xnl:OrganisationName>
            </xnl:PartyName>
        </rm:AdditionalContactInformation>
    </ContactInformation>
...... 
```

这是一个错误的输出（当我在“Axis2/Tomcat7 WS Application”中执行代码时获得了这个输出）：

```
.....
  <ContactInformation>
        <ns2:ContactDescription>ASD</ns2:ContactDescription>
        <ns2:ContactRole>ASD</ns2:ContactRole>
        <ns2:ContactLocation/>
        <ns2:AdditionalContactInformation>
            <ns7:PartyName>
                <ns7:PersonName>
                    <ns7:NameElement ns7:ElementType="FirstName">ASD</ns7:NameElement>
                    <ns7:NameElement ns7:ElementType="LastName">ASD</ns7:NameElement>
                </ns7:PersonName>
                <ns7:OrganisationName>
                    <ns7:NameElement>ASD</ns7:NameElement>
                </ns7:OrganisationName>
            </ns7:PartyName>
        </ns2:AdditionalContactInformation>
    </ContactInformation>
...... 
```

对于每种情况，都存在一个 package-info.java，其中声明了名称空间转换。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:06:32.547

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不需要使用注释中定义的前缀`@XmlSchema`。使用的前缀并不重要，并且 JAXB (JAX-WS) 实现之间的名称空间限定将相同，尽管前缀可能不同。

# expression - 正则表达式转 NFA [AE]|[AE] [AE] [AE]|[AE][AE][AE] [AE]

> ID：16149449
> 
> 赞同：0
> 
> 时间：2013-04-22T14:17:53.590
> 
> 标签：expression, openfaces

我有这个正则表达式

```
[A-E]|[A-E]{3}|[A-E]{4} 

[A-E]|[A-E] [A-E] [A-E]|[A-E][A-E][A-E] [A-E] 
```

它识别字符串`A,B, ABC, BCD, BCDE, etc.`

我想构建 NFA 但不知道我是否正确

1.  我已经做到了 ![http://s1.postimg.org/627870q8v/image.png](https://i.stack.imgur.com/bgEBT.png)

2.  或这个

![http://s10.postimg.org/sqbxf2t5l/image.png](https://i.stack.imgur.com/EqpG5.png)

哪一个是正确的？

我的`[A-E]`NFA 是

![http://s17.postimg.org/4b0q1w1mn/image.png](https://i.stack.imgur.com/IyMES.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:41:23.290

最小 DFA 如下

**0 -> 1 -> 2 -> 3 -> 4**

每个过渡拱由 [AE] 签名且最终状态 = {1,3,4}

事实上，这个 DFA 与你的 NFA 是等价的。不过，我发现第二个更清楚。

# javascript - Javascript 模块模式单例和单元测试

> ID：16149450
> 
> 赞同：2
> 
> 时间：2013-04-22T14:17:54.647
> 
> 标签：javascript, singleton, module-pattern

[我正在使用此处](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)描述的标准 javascript 模块模式。我面临的问题是这种方法会创建一个无法实例化的单例。单元测试共享相同的状态，这基本上使它们无用。为每个模块编写一个拆卸函数似乎很乏味，我确定有更好的方法吗？

# dynamics-crm-2011 - 覆盖来自其他发布者的自定义设置

> ID：16149451
> 
> 赞同：0
> 
> 时间：2013-04-22T14:17:54.817
> 
> 标签：dynamics-crm-2011

我们发现自己处于正常情况下，解决方案已通过不同的发布者导入。因此，现在当我们在我们自己的发布者的解决方案中对也包含在该解决方案中的任何组件进行更新时，导入失败。

有什么方法可以让我们获得更新的定制来超越以前解决方案中的定制，最好不删除以前的解决方案？

谢谢

# php - 如果用户在特定时间内不活动，如何使用 codeigniter 自动注销

> ID：16149453
> 
> 赞同：1
> 
> 时间：2013-04-22T14:18:13.740
> 
> 标签：php, codeigniter, logout

如果用户在特定时间内处于非活动状态，则应自动注销。那么我如何使用codeigniter来做到这一点？或者如何在登录该站点后检查用户是否处于活动状态？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T09:31:18.937

```
// Add the following into your HEAD section
var timer = 0;
function set_interval() {
  // the interval 'timer' is set as soon as the page loads
  timer = setInterval("auto_logout()", 10000);
  // the figure '10000' above indicates how many milliseconds the timer be set to.
  // Eg: to set it to 5 mins, calculate 5min = 5x60 = 300 sec = 300,000 millisec.
  // So set it to 300000
}

function reset_interval() {
  //resets the timer. The timer is reset on each of the below events:
  // 1\. mousemove   2\. mouseclick   3\. key press 4\. scroliing
  //first step: clear the existing timer

  if (timer != 0) {
    clearInterval(timer);
    timer = 0;
    // second step: implement the timer again
    timer = setInterval("auto_logout()", 10000);
    // completed the reset of the timer
  }
}

function auto_logout() {
  // this function will redirect the user to the logout script
  window.location = "your_logout_script.php";
}

// Add the following attributes into your BODY tag
onload="set_interval()"
onmousemove="reset_interval()"
onclick="reset_interval()"
onkeypress="reset_interval()"
onscroll="reset_interval()" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:41:29.143

您可以节省用户登录 a`session`或 a 的时间`cookie`

示例：`$this->session->set_userdata('time', time());` 并使用 jQuery 函数 (Exp. `$.getJSON('time.php', function (data) {alert(data.serverTime);});`) 或其他任何东西来检查当前时间。然后，在需要时注销您的用户。

但是，下一次，请放置代码或其他显示您的努力的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T05:57:26.933

```
<?php 
    $minutes=3;//Set logout time in minutes    
    if (!isset($_SESSION['time'])) {
        $_SESSION['time'] = time();
    } else if (time() – $_SESSION['time'] > $minutes*60) {
        session_destroy();
        header(‘location:login.php’);//redirect user to a login page or any page to which we want to redirect.
    }
?> 
```

...最初取自~~Skillrow.com/log-out-user-if-user-is-inactive-for-certain-time-php/~~（现为 404）。

# c - 递归搜索 bst 的非键值

> ID：16149457
> 
> 赞同：0
> 
> 时间：2013-04-22T14:18:38.293
> 
> 标签：c, search, recursion, binary-search-tree

我对这个逻辑有问题。如何搜索整个树（因为我不能依赖任何订单搜索）并且只返回一个匹配值（如果存在）？如果我返回递归调用，一旦它到达第一片叶子并且没有找到匹配项，它会不会失败？

使用下面的函数时，会进行调用，直到找到匹配项或到达树的末尾，并且无论匹配项如何，都会返回最左侧的节点。

我的递归函数，按顺序遍历：

```
tnode *find(tnode *ptr, const char *str)
{
    if (ptr == NULL) return ;

    if(strcmp (str,ptr->str) == 0)
        return ptr;

    else 
    {
        //search left subtree
        if (ptr->left != NULL)
            find(ptr->left, str) ;

        // search right subtree
        if (ptr->right != NULL)
            find(ptr->right, str) ;
    }

   return;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:24:32.790

首先：

```
if (ptr == NULL) return ; 
```

您应该根据函数原型（`tnode *find(tnode *ptr, const char *str)`）返回一个值。

第二：

```
find(ptr->right, str); 
```

您不使用返回值，因此无论如何结果都会不正确。

第三：

```
return; 
```

和第一个一样。

如果你能解决所有问题，它应该可以工作。

BTW`if (ptr->left != NULL)`不是必需的，因为您`ptr == 0`在函数的开头进行检查。

最后一个**请注意编译器警告**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:23:27.263

如果左子树查找返回非 NULL，则您有一个匹配项并且应该返回它。目前，您甚至都不看它是否找到任何东西。

如果它*没有*找到任何东西，你可以返回右子树查找的结果（如果它是 NULL，你到处找，没有找到任何东西）。

```
tnode *find(tnode *ptr, const char *str)
{
    ptr *found;

    if (ptr == NULL) return NULL; /* nothing to see here */

    if(strcmp (str,ptr->str) == 0)
        return ptr; /* it is here! */

    /* try left subtree */
    found = find(ptr->left, str);
    if (found) return found; /* it was on the left */

    /* try right subtree */
    return find(ptr->right, str);
} 
```

# .htaccess - htaccess：网址中的双语言标记（多语言）

> ID：16149458
> 
> 赞同：0
> 
> 时间：2013-04-22T14:18:49.563
> 
> 标签：.htaccess, mod-rewrite, redirect, double, lang

我有htaccess的问题。在我的网站上，我有网址：

> [http://domain.com/de/de/shop/kategorien/andere/angel-2-detail](http://domain.com/de/de/shop/kategorien/andere/angel-2-detail)

代替

> [http://domain.com/de/shop/kategorien/andere/angel-2-detail](http://domain.com/de/shop/kategorien/andere/angel-2-detail)

以下规则不起作用：

> 重写规则 ^de/de/(.*)$ /de/$1 [R=301,L]

如何正确重定向？

# python - 从列表创建列表元组

> ID：16149459
> 
> 赞同：1
> 
> 时间：2013-04-22T14:18:54.403
> 
> 标签：python, tuples, list-comprehension

有没有办法从列表理解中创建列表元组？

就像是：

```
actual_clients_emails, actual_client_names = [partner.email, partner.name for partner in op_client.ResPartner.browse([])] 
```

我想从一个列表中创建 2 个列表。

我可以这样做：

```
actual_clients_emails = [partner.email for partner in op_client.ResPartner.browse([])]
actual_client_names = [partner.name for partner in op_client.ResPartner.browse([])] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:22:40.423

这只需使用[内置`zip()`函数](http://docs.python.org/3.3/library/functions.html#zip)即可完成：

```
actual_clients_emails, actual_client_names = zip(
    *[(partner.email, partner.name)
      for partner in op_client.ResPartner.browse([])]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:21:10.370

是的。

```
client_names = tuple([partner.email, partner.name for partner in op_client.ResPartner.browse([])]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:39:25.627

我喜欢优雅的一行代码，但在这种情况下，为了清楚起见，我更愿意将其拆分：

```
partners = op_client.ResPartner.browse([]) # get the partners list
actual_clients_emails = [p.email for p in partners]
actual_client_names = [p.name for p in partners] 
```

如果“合作伙伴”是一个列表，这应该可以正常工作。

如果否则它是一个生成器，你不应该要求它两次来生成你的合作伙伴序列。在这种情况下，这段代码应该会更好：

```
partners = op_client.ResPartner.browse([]) # get the partners generator
mail_name_generator = ((p.email, p.name) for p in partners) # generator for your info
email, names = zip(*mail_name_generator) # unpack it 
```

第二种解决方案是，IMO，可读性较差，因此更糟。不过，它更 Pythonic，更通用。

# bash - “exec myprog &”意外行为

> ID：16149461
> 
> 赞同：2
> 
> 时间：2013-04-22T14:19:06.937
> 
> 标签：bash, shell, unix

运行这些 shell 命令时：

```
SH1$ bash
SH2$ exec date &
[1] 375
SH2$ Mon Apr 22 15:04:36 BST 2013
[1]+  Done                    exec date
SH2$ 
```

`&`优先于，`exec`并让 SH2 进程继续运行（在 ksh 和 Solaris /bin/sh 中结果相同）。

为什么是这样？它是明确定义（或必需）的行为，还是留给每个实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:34:03.427

是的，这是标准行为。请参阅[POSIX shell 语法](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_10)，并注意`exec`甚至没有明确涵盖；它被视为普通的`cmd_name`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T14:34:30.117

exec 替换当前 shell 并执行命令

```
exec date 
```

有效地运行日期并退出，让你“失去”你原来的外壳

```
exec date & 
```

在子进程中运行 exec。这是 & 运算符的定义行为。结果与

```
( exec date ) 
```

& 和 ( ) 都创建一个新的子进程，然后在新进程的上下文中执行命令。

# timer - 定时器运行时无法让 keyListener 工作

> ID：16149469
> 
> 赞同：1
> 
> 时间：2013-04-22T14:19:38.817
> 
> 标签：timer, keylistener

你好堆栈溢出的人，我的程序有一个驱动程序类 Frogger()，一个 JPanel 类计算所有内容，将所有必要的面板组合在一起，并实现名为 FroggerPanel() 的 keyListener，以及另一个基于元素绘制所有内容的 JPanel 类FroggerPanel() 调用了 FroggerDisplayPanel()。

这是一个包含完整代码的 pastebin：http: [//pastebin.com/Axrbjej6](http://pastebin.com/Axrbjej6)。

当 Timer 未启动时，keyListener 的工作方式与它应该完全一样，但是一旦启动它就根本不会响应！

这是在 Frogger() 类中添加和关注 keyListener 的地方：

```
public static void main(String[]args) throws IOException
{
    frame = new JFrame("CS125 Frogger");
    Frogger startPanel = new Frogger();
    FroggerPanel panel = new FroggerPanel();

    frame.addKeyListener(panel);
    frame.setFocusable(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(panel);
    frame.pack();
    frame.setVisible(true);
} 
```

这是 FroggerPanel() 中的 stepGame() 方法，当定时器延迟到期时调用，它主要关注移动所有汽车；setLocations() 方法中的 Frog Rectangle 是我需要响应 keyListener 的：

```
 private int current_x_step = 0;
private int lane_bounds = 0;
private int new_pos = 0;
private void stepGame() {

    for (int i = 0; i < laneAmt; i++) {
        if(i == 0 || i % 2 == 0){
            current_x_step = X_STEP_SIZE;
            lane_bounds = display.getWidth()+rUnit;
            new_pos = -rUnit;
        }else if((i-1) == 0 || (i-1) % 2 == 0){
            current_x_step = -X_STEP_SIZE;
            lane_bounds = -rUnit;
            new_pos = DISPLAY_DIM + rUnit;
        }

        for(int j = 0; j < cars.get(i).size(); j++){
            cars.get(i).get(j).x += current_x_step;                     
            if (cars.get(i).get(j).x == lane_bounds) {                      
                cars.get(i).get(j).x = new_pos;             
            }
            if(cars.get(i).get(j).intersects(Frog)){
                timer.stop();
                startPause.setText("Retry?");
                break;
            } 
        }
    }           
    display.setLocations(cars, Frog);   
    if(Frog.y == 0){
        stepLevel();            
    }
} 
```

这是 FroggerPanel() 类中的 keyListener 代码：

```
public void keyPressed(KeyEvent e) {
    switch(e.getKeyCode()){
    case KeyEvent.VK_W: Frog.y -= rUnit; break;
    case KeyEvent.VK_S: Frog.y += rUnit; break;
    case KeyEvent.VK_A: Frog.x -= rUnit; break;
    case KeyEvent.VK_D: Frog.x += rUnit; break;         
    }
    display.setLocations(cars, Frog);
}

@Override
public void keyReleased(KeyEvent e) {

}

@Override
public void keyTyped(KeyEvent e) {
    switch(e.getKeyCode()){
    case KeyEvent.VK_W: Frog.y -= rUnit; break;
    case KeyEvent.VK_S: Frog.y += rUnit; break;
    case KeyEvent.VK_A: Frog.x -= rUnit; break;
    case KeyEvent.VK_D: Frog.x += rUnit; break;             
    }   
    display.setLocations(cars, Frog);
} 
```

任何建议表示赞赏，感谢您的帮助！

# android - Mac 上的 Android 箭头键

> ID：16149471
> 
> 赞同：1
> 
> 时间：2013-04-22T14:19:42.860
> 
> 标签：android

我的老师希望我们进行 Snake Android 演示，但我在使用 Mac 的箭头键时遇到了问题。在蛇真正移动之前，我需要按箭头大约 20 次。在我的 2.3.3 AVD 配置中，我启用了`hw.dPad`和`hw.keyboard`. 有人建议我使用 Android 4 rom，但实际上我遇到了更严重的问题。我还可以做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:24:41.913

我猜你正在使用模拟器。
在旧/中等硬件上确实很慢。

一种好的解决方案是使用 x86 Android 映像而不是默认映像，它们的效率明显更高。安装指南：[http ://bryanmarty.com/blog/2012/08/04/faster-android-emulator-mac-android-4-0-3-ice-cream-sandwich-2-3-3-gingerbread/](http://bryanmarty.com/blog/2012/08/04/faster-android-emulator-mac-android-4-0-3-ice-cream-sandwich-2-3-3-gingerbread/)

如果您拥有 Android 手机/平板电脑，另一种方法是直接在您的终端上运行游戏。

# magento - 单选按钮 Magento 中的导入选项

> ID：16149472
> 
> 赞同：0
> 
> 时间：2013-04-22T14:19:44.750
> 
> 标签：magento, import

我有一个使用 Magento 1.7 的网站我已经为我的客户创建了一个自定义导入但是如果我在 csv 中写这个来代替选项

```
CIANO:fixed:0:EP10-CHIP9700C:0|MAGENTA:fixed:0:EP10-CHIP9700VM:0|GIALLO:fixed:0:EP10-CHIP9700Y:0|NERO MATTE:fixed:0:EP10-CHIP9700MB:0| 
```

它在下拉列表中创建选项。

这是在 csv 中创建的文件：A 列：

```
Capacit :drop_down:0:0 
```

还有一个专栏

```
Colore:drop_down:0:0 
```

在此列中的此模式下，它放置了选项，但如果我有收音机和下拉菜单？我是否要在附近创建其他列，例如：

```
Capacit : radio:0:0 
```

或者是什么模式？

如何将指示此选项是单选按钮的值传递给 csv？谢谢

# android - 将形状添加到 LinearLayout Android

> ID：16149475
> 
> 赞同：9
> 
> 时间：2013-04-22T14:19:51.957
> 
> 标签：android, xml, android-layout, layout, shape

我有一个带有一些自动完成和文本框的线性布局。我想在线性布局中插入一个形状（矩形）。我怎样才能做到这一点。我是安卓的新手。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"    
    android:padding="5dp"
    android:id="@+id/layout">

    <AutoCompleteTextView android:id="@+id/autocompleteCountry"
      android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/CONTRY_LABEL"
       />
    <AutoCompleteTextView android:id="@+id/locationAutoCompleteFrom"
      android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/from"
        android:visibility="gone"
       />
   <AutoCompleteTextView android:id="@+id/locationAutoCompleteTO"
      android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/to"
        android:visibility="gone"
       />
 <!--    <Button android:id="@+id/buttonRoute"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:text="@string/buttonRouteText"
       android:enabled="false"
       android:clickable="true"
       />
   --> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T14:44:37.827

您应该使用 ShapeDrawable 作为要添加样式的组件的背景。

使用以下语法在 XML 中创建一个可绘制的形状（这个显示了一个带有圆角的矩形，但是您可以做很多事情来自定义它以使其看起来像您想要的那样）。这个文件（名为 background_square.xml 或其他）应该放在你的 drawable 文件夹中：

```
 <?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners android:radius="5dp" />
    <solid
        android:color="@color/primary_grey" /> 
</shape> 
```

然后，当您想将其添加到视图时，可以在 XML 中使用以下语法：

```
android:background="@drawable/background_square" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:29:23.940

您可以执行以下操作

如果要添加矩形，只需在布局中添加嵌套布局（例如线性布局）并设置`android:background="yourcolor"` //您可以使用哈希颜色值添加颜色

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"    
android:padding="5dp"
android:id="@+id/layout">

<AutoCompleteTextView android:id="@+id/autocompleteCountry"
  android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/CONTRY_LABEL"
   />
<AutoCompleteTextView android:id="@+id/locationAutoCompleteFrom"
  android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/from"
    android:visibility="gone"
   />
//suppose you want to add your rectangle here
<LinearLayout 
android:id="@+id/rectangle"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"    
android:background="yourcolor"
>
</LinearLayout> 
```

您可以根据需要更改所有相关属性，例如大小、边距等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:42:15.483

我可能会建议通过实现 Linearlayout 类来创建自定义视图并覆盖 ondraw() mtd 以绘制你想要的任何形状。希望这可能有助于朝着正确的方向前进

# javascript - 根据入站 HTML 链接自动打开隐藏内容

> ID：16149477
> 
> 赞同：0
> 
> 时间：2013-04-22T14:20:01.943
> 
> 标签：javascript

我继承了[这个网站](http://kalamazoobicycleclub.org/rides/rides.php)，正在寻找解决一些问题。它目前使用 Hideslide.js 来扩展内容的不同部分（星期一、星期二、星期三等...）

以前的管理员试图在主页上设置链接，这些链接将转到该页面并打开给定的内容区域，具体取决于单击的外部链接。这似乎根本不起作用。

简而言之，有没有一种方法可以直接链接到其中一个内容区域并在页面加载时打开它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:54:14.827

是的。您可以使用片段 url 手动编写它并调用 hideslides showHideContent 函数 onload。

深度链接的 url 现在必须包含通缉日的 ID “hideslide_name box”。周二使用

```
http://kalamazoobicycleclub.org/rides/rides.php#hideslide_q2 
```

在您的页面上包含此代码

```
<script>
var divId = window.location.hash.substring(1);

if (divId)
    window.onload += showHideContent(null, divId);
</script> 
```

# android - 无法从 ViewPager 中的另一个片段刷新/更新片段中的列表视图

> ID：16149478
> 
> 赞同：10
> 
> 时间：2013-04-22T14:20:03.390
> 
> 标签：android, android-listview, android-viewpager, fragment, fragmentpageradapter

我很难弄清楚接下来的事情。

**我所拥有的：**我有一个查看器和几个页面。在这个问题中，只有其中两个很重要，我们称它们为 Fragment1 和 Fragment2，它们彼此相邻。Fragment1 包含一个列表视图，其中填充了来自互联网（外部数据库）的数据。Fragment2 包含一个简单的按钮。

**我的目标：**如果我单击 Fragment2 中的按钮，我会向外部数据库添加一个新项目。我想用这个新项目更新/刷新 Fragment1 中的列表视图。

在我的情况下`notifyDataChanged()`不起作用，但到目前为止，我确信它会重新实例化每一页。我将以最清晰的方式介绍我的问题，所以让我们看看我的代码，这是我的`ViewPager`适配器：

```
class MyPagerAdapter extends FragmentStatePagerAdapter {
        public List<String> fragmentsA; 

        public MyPagerAdapter(FragmentManager fm) {
            super(fm);
            fragmentsA = fragments;
        }

        @Override
        public Fragment getItem(int position) {
           return Fragment.instantiate(context, fragmentsA.get(position));

        }

        @Override
        public CharSequence getPageTitle(int position) {
           return mEntries.get(position % CONTENT.length).toUpperCase();
        }

        @Override
        public int getCount() {
          return mEntries.size();
        }

        @Override
        public int getItemPosition(Object object) {
            return POSITION_NONE;
        }
    } 
```

Fragment1 onCreateView()（很快）：

```
public View onCreateView(LayoutInflater inflater, final ViewGroup container,
            Bundle savedInstanceState) {

    getData();
    View view = inflater.inflate(R.layout.latestapps_tab, container, false);
    lw = (ListView) view.findViewById(R.id.lw);
    context = getActivity().getApplicationContext();
    act = this.getActivity();
    m_adapter = new ItemAdapter();
    lw.setAdapter(m_adapter);

return view;
} 
```

我创建了`ViewPager`适配器，然后设置了适配器，`ViewPager`然后在我的 Main 类中用我的片段填充我的 viewpager。在此之后，我将拥有一个带有 2 个片段的功能齐全的 ViewPager。

```
 pager = (ViewPager)findViewById( R.id.viewpager );
  adapter = new MyPagerAdapter(getSupportFragmentManager());
  indicator = (TabPageIndicator)findViewById( R.id.indicator );
  pager.setAdapter( adapter );
  indicator.setViewPager( pager );
  pager.setCurrentItem(INITIAL_PAGE);
  pager.setOffscreenPageLimit(3);

  //adding fragments to the pager
  fragments.add( Fragment1.class.getName());    
  fragments.add( Fragment2.class.getName()); 
```

在 Fragment1 中，我有一个列表视图，每个列表项中都有一些文本视图。加载工作完美：我创建`ArrayLists`并用来自外部数据库的数据填充列表。加载完成后，我用这些大量数据填充列表视图。在片段 2 中，我单击按钮，我希望更新该列表视图，因此应该在列表视图中创建一个新行，其中包含来自外部数据库的一些数据。（当然写入数据库有效）

我的猜测是，我可能不会刷新 ArrayLists 或者我不会重新实例化 Fragment1，因此只有当我退出并再次启动应用程序或者我在 ViewPager 中滑动太多以致 Fragment1 分离时，getDataFromSQL() 方法才不会转动。所以我无法更新或刷新 Fragment1。有人可以帮助解决这个问题吗？

**编辑**

我设法通过向 fragment2 传递消息来更新自身来实现它。但我不确定这是否是一个好的解决方案并且没有更好的方法，即只是以某种方式刷新整个片段。

**解决方案**

好吧，我想这一定是我的懒惰，但我现在解决了。对于仍然想从另一个片段刷新片段或只是在片段之间建立连接的每个人，我告诉您适当的方法：

1.  您必须实现自己的侦听器，以帮助您通过持有者活动在片段之间进行通信。这可以在这里找到：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)。非常简单实用。

2.  您必须检索片段，这又很简单：[从 ViewPager 中检索片段](https://stackoverflow.com/questions/8785221/retrieve-a-fragment-from-a-viewpager)这些 Q 提供了几种可接受的方式，我使用了`SpareArray`解决方案。

无论如何感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T22:04:10.360

您需要能够从活动中获取片段，为此您需要从适配器中获取片段，您需要向页面适配器添加几个方法

```
public Fragment getFragment(ViewPager container, int position, FragmentManager fm) {
    String name = makeFragmentName(container.getId(), position);
    return fm.findFragmentByTag(name);
}

private String makeFragmentName(int viewId, int index) {
    return "android:switcher:" + viewId + ":" + index;
} 
```

然后从您的活动中进行以下方法

```
public Fragment getFragmentbyPosition(int position) {
    return adapter.getFragment(pager, position, getSupportFragmentManager());
} 
```

现在在 fragment2 上调用以下命令：

```
Fragment1 fragment1 = (Fragment1) ((MyActivity)getActivity()).getFragmentbyPosition(0); 
```

现在您将能够从片段 2 调用片段 1 上的公共方法，因此只需在您的 onClick 中使用它并告诉片段 1 更新它的列表视图。

现在 makeFragmentName 起作用的原因是 FragmentPagerAdapter 如何为它制作的片段创建标签。

# java - Hibernate like 查询转义字符

> ID：16149483
> 
> 赞同：4
> 
> 时间：2013-04-22T14:20:16.490
> 
> 标签：java, mysql, hibernate

我正在使用**Mysql**数据库。我获得了某些列的存储数据，其值为`a\"a`. 我使用以下查询进行选择，但失败了：

```
select * from table_name where coloum_name like "%a\"%"; 
```

我花了几个小时寻找要选择的查询，以下查询正在工作：

```
select * from table_name where coloum_name like "%a\\\\\\\\""%"; 
```

我在我的应用程序中使用**休眠**，所以我使用了：

```
criteria.add(Restrictions.ilike("coloum_name","%a\\\\\\\\""%")); 
```

但它不起作用。任何可能的方式来通过标准选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:10:04.477

检查这个。希望这对您有所帮助。 [http://levanhuy.wordpress.com/2009/02/19/providing-an-escape-sequence-for-criteria-queries/](http://levanhuy.wordpress.com/2009/02/19/providing-an-escape-sequence-for-criteria-queries/)

# php - 允许表 1 中的用户编辑表 2 php / mysql 中的内容

> ID：16149486
> 
> 赞同：0
> 
> 时间：2013-04-22T14:20:29.600
> 
> 标签：php, mysql, login

我要求允许 1 个表中的用户编辑第二个表中的记录，其中两个表都在一个 mysql 数据库中。用户的数量与记录的数量完全相同。

例如，表 1 中 id 为 234 的用户应该只能编辑表 2 中 id 为 234 的记录。

谨记我不是专家，非常感谢任何帮助。在发布之前，我花了几个小时搜索结果，但没有找到我可以实现的东西。

提前致谢，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:23:59.393

这个语法怎么样？

```
UPDATE `table1` as `t1`, `table2` as `t2`
SET `t1`.`attribute1`="foo", `t2`.`attribute2`="bar"
WHERE `t1`.`id`=`t2`.`id` AND `t1`.`id`=234 
```

请参阅[mysql 参考](http://dev.mysql.com/doc/refman/5.0/en/update.html)

# asp.net-mvc-4 - Asp.net Mvc 4 多对多关系视图模型

> ID：16149487
> 
> 赞同：0
> 
> 时间：2013-04-22T14:20:33.800
> 
> 标签：asp.net-mvc-4

我读[了这篇](http://codenodes.wordpress.com/2013/04/13/saving-many-to-many-data-in-mvc4-and-ef-4-1-code-first-part-3/)文章。

我的问题是如何在 Index.cshtml 中为用户分配课程？

我添加 `@Html.DisplayFor(modeltItem => item.Courses)`到索引视图，它正确显示了课程的 ID。

我想查看课程的描述（或名称）。

我尝试在 UserProfileViewModel 中使用 CourseDescription 但我不知道如何在控制器索引操作中使用它（在文章中）。

# php - 通过 PHP 获取数据库的列名

> ID：16149495
> 
> 赞同：2
> 
> 时间：2013-04-22T14:20:46.970
> 
> 标签：php, database, postgresql

我有一个 postgresql 数据库，我正在通过 php 连接到它并从中读取。我已经输入了 php 代码，这些代码将结果返回给我从我的代码传递的查询。

Ex- 我的代码：（注意 - 我的 HTML 页面使用了一个表单，它要求输入并在数据库中搜索给定的输入）

```
<?php
        $result = pg_prepare($dbh, "Query1", 'SELECT * FROM test.bact WHERE disease = $1');

        $result = pg_execute($dbh, "Query1", array($disease));
        if (!$result) {
                die("Error in SQL query: " . pg_last_error());
        }
        //$rows = pg_fetch_all($result)

/*// iterate over result set
// print each row*/
            while ($row = pg_fetch_array($result)) {
                    echo $row[0]." ".$row[1]. "<br />";
                } 
```

从上面的代码中，我得到了我的信息作为字符串，用空格 ( `echo $row[0]." ".$row[1]`)分隔

```
example: Information at row[0]<space>Information at row[1] 
```

我想要什么 - 我想要以更有条理的形式检索到的数据，即带有列名。它应该是什么样子 -

```
Name of Column : Data 
Name of column : Data ...and so on. 
```

我知道在 mysql 中有使用 的方法`mysql_fetch_field`，但我想要一些用于 postgresql 的东西。由于我是 php n 数据库的新手，我不确定如何使用它。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:32:59.600

您可以使用[pg_field_name](http://www.php.net/manual/en/function.pg-field-name.php)或[pg_fetch_assoc](http://php.net/manual/en/function.pg-fetch-assoc.php)

# javascript - 如何在绝对布局中允许垂直滚动？

> ID：16149496
> 
> 赞同：0
> 
> 时间：2013-04-22T14:20:51.267
> 
> 标签：javascript, html, layout, scroll, absolute

我现在正在这个网站上工作[http://antoniobrandao.com/v4](http://antoniobrandao.com/v4)

所有对象都放置在绝对位置。不幸的是，这不会启用垂直滚动。

我已经读过`position:static`在父元素中使用（在我的情况下是*DIV* ）可以解决问题，是的，会出现一个滚动条，但是当我在设置为我的*DIV*`sections-wrapper`后尝试滚动时，内容似乎在视觉上被破坏了。`position: fixed``sections-wrapper`

 *我是**HTML5**的新手，所以如果有人能给我提示，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:20:21.530

我找到了自己问题的答案。

解决方案是手动（通过 JavaScript）设置我的“sections-wrapper”和“background”的高度，以匹配“sections-wrapper”中部分内容的高度。

这是因为“sections-wrapper”不能自动知道它自己的东西有多高，所以我们必须自己告诉它。不利的一面是，当包装内的内容更改高度时，我们必须始终更新此值。还不错。

所以如果我的包装中的东西是例如。1200像素：

```
$('.background').css('height', '1200px');
$('#sections-wrapper').css('height', '1200px'); 
```*

# unit-testing - FluentAssertions ShouldBeEquivalentTo() 与 Should().BeEquivalentTo()

> ID：16149497
> 
> 赞同：7
> 
> 时间：2013-04-22T14:20:52.050
> 
> 标签：unit-testing, fluent-assertions

我有一个验证方法的收集输出的测试。测试的这种变体通过：

```
 [TestMethod, TestCategory("BVT")]
    public void TheStatusesAreReturned()
    {
        var expectedUnprocessedStatuses = new List<FileUploadStatus>
            {
                FileUploadStatus.InProcess,
                FileUploadStatus.Pending,
            };

        Sut.GetUnprocessedStatuses()
            .Should()
            .BeEquivalentTo(expectedUnprocessedStatuses);
    } 
```

这种测试变体失败，出现错误“Expected item[0] to be InProcess, but found Pending”：

```
 [TestMethod, TestCategory("BVT")]
    public void TheStatusesAreReturned2()
    {
        var expectedUnprocessedStatuses = new List<FileUploadStatus>
            {
                FileUploadStatus.InProcess,
                FileUploadStatus.Pending,
            };

        Sut.GetUnprocessedStatuses()
            .ShouldBeEquivalentTo(expectedUnprocessedStatuses);
    } 
```

显然，`ShouldBeEquivalentTo`关心收集项目的顺序，而不关心`BeEquivalentTo`。为什么这两种方法的等效概念不同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T18:55:40.017

你是对的。Should().BeEquivalentTo() 正在使用单个项目 Equals() 实现来验证等效性，并且自版本 1 以来一直存在。FA 2.0 中引入的较新的 ShouldBeEquivalentTo() 正在进行深入的结构比较，并报告任何差异. 对于 2.1，我将默认情况下将行为更改为更像集合等效性

# scala - 如何防止 Slick 更新主键列？

> ID：16149498
> 
> 赞同：2
> 
> 时间：2013-04-22T14:21:00.190
> 
> 标签：scala, slick

我正在编写一个用于更新模型用户的 dao；这是代码：

```
 case class User(id: Option[String] = None, username: String, password: String)

  object Users extends Table[User]("user") {

    // .... some column defines

    def * = id.? ~ username ~ password <>(User, User.unapply _)

    def byId(id: String) = Query(Users).filter(_.id === id)

    // user.id will be None since id is passed as parameter.
    def update(id: String, user: User)(implicit session: Session) = {
      byId(id).update(user)
      getById(id)
    } 
```

我收到了这个错误：

```
[error]     JdbcSQLException: NULL not allowed for column "id"; SQL statement:
[error] update "user" set "id" = ?, "username" = ?, "password" = ? where "user".
"id" = 'RBq0kJAs' [23502-168] (DbException.java:169) 
```

似乎 Slick 生成了一条 SQL 语句来更新主列“id”，这没有任何意义。如何从生成的更新查询中删除 id 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:55:25.187

根据[Slick 文档](http://slick.typesafe.com/doc/1.0.0/lifted-embedding.html#updating)：

> 更新是通过编写一个查询来选择要更新的数据，然后用新数据替换它来执行的。

因此，由于您的查询选择`id`，更新语句会尝试替换它。– 您可能需要查看文档中的示例（请参阅上面的链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-17T13:51:14.550

在 Postgres SQL 上运行（在 v9.5 上测试），您可以使用`insertOrUpdate`Slick 调用。

```
// Assuming table query is property `users`
private val users = TableQuery[UsersTable]

def update(id: String, user: User)(implicit session: Session):Future[User] =
    for {
        _ ← db.run(users.insertOrUpdate(user))
        readBack ← getById(id) // Existing query against `users`
    } yield readBack 
```

# mingw - _Gxx_Personality_v0 代码块错误

> ID：16149499
> 
> 赞同：1
> 
> 时间：2013-04-22T14:21:03.197
> 
> 标签：mingw, codeblocks, libstdc++

在尝试使用 MINGW & CODEBLOCKS 运行 C++ 程序时，我收到以下错误：

```
The procedure entry point _gxx_persopnality _v0 could not be located in the dynamic link library libstdcc++-6.dll 
```

这是我正在使用的当前设置的图片。我正在使用`g++`而不是`gcc`：

[![截屏](https://i.stack.imgur.com/tt0tt.png)](https://i.stack.imgur.com/tt0tt.png)

笔记：

1.  我已将 MinGW 的路径添加到`PATH`（环境变量）。
2.  自从我下载了带有自己的 Mingw 和 VC 以及自己的编译器的 QT SDK 和 Visual Studio 2010 后出现此错误。
3.  多次重新安装 Code::blocks 和 MinGW。
4.  我的路径和系统变量都设置为指向 MinGW`bin`目录的安装位置。
5.  我也在使用 Visual Studio 2012。

如何解决此错误？我想全部使用：Code::blocks、Qt 和 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:35:13.377

单独安装 Visual Studio 绝不会导致这样的错误。您的 MinGW 发行版仍然有问题。我觉得可疑的是图书馆的名称`libstdcc++-6.dll`。例如，在我基于 GCC 4.7.2 的 MinGW-w64 中，该库名为`libstdc++-6.dll`，这是正确的名称，它已经存在多年了。

我可以建议的是查看其他一些 MinGW 发行版。例如，您可以尝试过**[MinGW-w64](http://mingw-w64.sourceforge.net/download.php#mingw-builds)**。它已经提供了最前沿的 GCC 4.8.0。更重要的是，它提供了所有可能的变化：

*   64位目标；
*   32 位目标；
*   Win32线程；
*   POSIX 线程；
*   SEH 异常；
*   矮人例外；
*   SJLJ 例外。

所以你的选择非常灵活。要了解有关所有这些变化的更多信息（因为这是非常重要的知识），我鼓励您查看**[这篇文章](http://qt-project.org/wiki/MinGW-64-bit)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T09:50:32.563

也许您应该尝试将 libstdc++-6.dll 从 MinGW\bin 复制到 codeblocks 文件夹内的 mingw\bin 中，并替换其中存在的那个。它对我有用。

# java - JdbcRealm、DatasourceRealm 和 JaasRealm

> ID：16149502
> 
> 赞同：2
> 
> 时间：2013-04-22T14:21:06.443
> 
> 标签：java, security, java-ee-6, jaas

我正在使用 Jboss AS7 服务器，但我一直在做一个安全决定。Java EE6 中这些安全领域的区别（和优势）是什么：[JdbcReal](http://docs.jboss.org/jbossweb/latest/api/org/apache/catalina/realm/JDBCRealm.html)、[DatasourceRealm](http://docs.jboss.org/jbossweb/latest/api/org/apache/catalina/realm/DataSourceRealm.html)和[JaasRealm](http://docs.jboss.org/jbossweb/latest/api/org/apache/catalina/realm/JAASRealm.html)？

我使用了带有 Glassfish 的 DatasourceRealm，使用了 Web 管理控制台，这非常简单，但是我在 JBoss 中找不到这样的功能。

另一方面，JAASRealm 乍一看非常复杂。

第二个问题是：我在哪里可以找到一些**好的和清晰**的教程来解释 Jaas 安全性？

# maven - JBOSS-AS-MAVEN-PLUGIN :- 身份验证失败但 Jboss-cli 身份验证？

> ID：16149503
> 
> 赞同：3
> 
> 时间：2013-04-22T14:21:06.803
> 
> 标签：maven, jboss, hudson, tomcat7, maven-3

我已经设置了一个新的 JBoss 服务器，并且能够使用“jboss-cli.bat”远程访问它。

但是，当我的 Hudson 作业运行并尝试使用 jboss-as-maven-plugin 向服务器部署战争时，它被拒绝访问并出现以下错误；

> 错误：JBREM000200：远程连接失败：javax.security.sasl.SaslException：身份验证失败：所有可用的身份验证机制都失败

我在跑步;

*   视窗服务器 2008 R2
*   JBoss AS 7.1.1.Final
*   哈德逊 3.0.0
*   雄猫 7.0.35
*   JBoss-AS-Maven-Plugin 7.4.Final

我的 POM 包含；

```
<plugin>
  <groupId>org.jboss.as.plugins</groupId>
  <artifactId>jboss-as-maven-plugin</artifactId>
  <version>7.4.Final</version>
  <executions>
    <execution>
      <id>Dev_Deploy</id>
      <phase>install</phase>
      <goals>
        <goal>deploy</goal>
      </goals>
      <configuration>
        <force>true</force>
        <hostname>??.??.??.??</hostname>
        <port>9999</port>
        <name>admin</name>
        <password>password</password>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

我的standalone.xml 包含；

```
<interfaces>
    <interface name="ManagementRealm">
        <any-ipv4-address/>
    </interface>
    <interface name="management">
        <any-ipv4-address/>
    </interface>
    <interface name="public">
        <any-ipv4-address/>
    </interface>
    <interface name="unsecure">
        <inet-address value="${jboss.bind.address.unsecure:127.0.0.1}"/>
    </interface>
</interfaces>

<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/>
    <socket-binding name="management-http" interface="management" port="${jboss.management.http.port:902}"/>
    <socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/>
    <socket-binding name="ajp" port="8009"/>
    <socket-binding name="http" port="8080"/>
    <socket-binding name="https" port="443"/>
    <socket-binding name="osgi-http" interface="management" port="8090"/>
    <socket-binding name="remoting" port="4447"/>
    <socket-binding name="txn-recovery-environment" port="4712"/>
    <socket-binding name="txn-status-manager" port="4713"/>
    <outbound-socket-binding name="mail-smtp">
        <remote-destination host="localhost" port="25"/>
    </outbound-socket-binding>
</socket-binding-group> 
```

谁能让我正确地解决这个问题。非常感谢，

斯图尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:41:11.427

关于[jboss-as:deploy](https://docs.jboss.org/jbossas/7/plugins/maven/latest/deploy-mojo.html)，它提到如下： -

> **name** String 指定用于部署的名称。
> 
> **username** 字符串 - 指定***服务器提示进行身份验证时要使用***的用户名。如果未指定用户名并且服务器请求身份验证，则会提示用户提供用户名，用户属性为：`jboss-as.username`。

然后你的插件配置应该使用`username`如下示例。

```
<plugin>
  <groupId>org.jboss.as.plugins</groupId>
  <artifactId>jboss-as-maven-plugin</artifactId>
  <version>7.4.Final</version>
  <executions>
    <execution>
      <id>Dev_Deploy</id>
      <phase>install</phase>
      <goals>
        <goal>deploy</goal>
      </goals>
      <configuration>
        <force>true</force>
        <hostname>??.??.??.??</hostname>
        <port>9999</port>
        <username>admin</username> <!-- <----Change here -->
        <password>password</password>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

我希望这可能会有所帮助。

# java - 在 JAX-RS 资源方法中获取原始请求正文

> ID：16149507
> 
> 赞同：15
> 
> 时间：2013-04-22T14:21:18.040
> 
> 标签：java, http, rest, jax-rs

如何从 JAX-RS 资源方法访问原始请求正文，如`java.io.InputStream`或`byte[]`？我希望容器绕过任何`MessageBodyReader`特定资源类或方法，但我在项目中有其他资源应该使用一些`MessageBodyReader`.

我已经尝试过了，但它会调用已注册`MessageBodyReader`的 s 并且无法将结果分配给`InputStream`（与 相同的问题`byte[]`）。

```
@POST
public Response post(@Context HttpHeaders headers, InputStream requestBody) {
    MediaType contentType = headers.getMediaType();
    // ... 
} 
```

我也试过这个，但是容器无法初始化并出现这个错误：

```
严重：在资源和/或提供程序类中检测到以下错误和警告：
严重：在索引 0 的参数处缺少方法 public javax.ws.rs.core.Response SomeResource.post(javax.servlet.http.HttpServletRequest) 的依赖项
严重：方法，公共 javax.ws.rs.core.Response SomeResource.post(javax.servlet.http.HttpServletRequest)，用资源的 POST 注释，类 SomeResource，不被识别为有效的资源方法。

```

```
@POST
public Response post(@Context HttpServletRequest request) {
    String contentType = request.getContentType();
    InputStream requestBody = request.getInputStream();
    // ... 
} 
```

该方法位于子资源类中，该子资源类是从具有`@Path`另一个资源类中的注释的方法创建的。

我正在使用泽西岛 1.11。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-06-14T19:44:38.197

以防万一这可以帮助任何人

```
public Response doAThing(@Context HttpServletRequest request, InputStream requestBody){

        BufferedReader reader = new BufferedReader(new InputStreamReader(requestBody));
        StringBuilder out = new StringBuilder();
        String line;
        while ((line = reader.readLine()) != null) {
            out.append(line);
        }
        System.out.println(out.toString());   //Prints the string content read from input stream
        reader.close();

        return Response.ok().entity("{\"Submit\": \"Success\"}").build();

    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-31T09:54:07.893

This works for me:

```
@POST
@Consumes(MediaType.WILDCARD)
@Produces(MediaType.WILDCARD)
public Response doSomething(@Context HttpServletRequest request, byte[] input) {
    log.debug("Content-Type: {}", request.getContentType());
    log.debug("Preferred output: {}", request.getHeader(HttpHeaders.ACCEPT));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T16:30:09.847

我发现注入 HttpServletRequest 不起作用的原因是因为我确实在 Jersey Test Framework 中运行了我的代码，而不是在适当的 Servlet 容器中。如果我在适当的 Servlet 容器中运行它，它就可以工作。

遗憾的是，没有纯粹的 JAX-RS 方式来获取原始请求体。

# sql - 使用 IF THEN SQL 查询生成报告

> ID：16149509
> 
> 赞同：0
> 
> 时间：2013-04-22T14:21:25.057
> 
> 标签：sql, ms-access

我在让 SQL 语句按我需要的方式工作时遇到问题。老实说，当谈到 SQL 时，我是非常绿色的，所以我尝试的尝试来自复制/粘贴代码，我试图编辑它以使其工作并且它没有运行。所以我需要的是一个用于 ACCESS 报告的查询。
以下是数据的样子：

* * *

```
ID   TechID   OccurrenceDate                     OccurrenceName          OccurrenceAmt
 247      9991     Friday, February 15, 2013          Coaching                4.50        
242   9991     Friday, February 08, 2013          Con't Occurrence        0.00      
241   9991     Thursday, February 07, 2013        Unscheduled Absense     1.00      
240   9991     Wednesday, February 06, 2013       Shift Int less 2 hrs    0.50
243   9991     Monday, February 04, 2013          Unscheduled Absense     1.00
246   9991     Monday, January 21, 2013           Unscheduled Absense     1.00
245   9991     Wednesday, January 16, 2013        Con't Occurrence        0.00
244   9991     Tuesday, January 15, 2013          Unscheduled Absense     1.00
 239      9999     Friday, February 08, 2013          Unscheduled Absense    1.00
 237      9999     Wednesday, February 06, 2013       Unscheduled Absense    1.00   
 238      9999     Saturday, February 02, 2013        Coaching               7.00
236   9999     Tuesday, September 11, 2012        Other                   6.00
235   9999     Tuesday, September 11, 2012        Other                   0.00
228   9999     Thursday, August 23, 2012          Unscheduled Absense     1.00
227   9999     Friday, August 10, 2012            Unscheduled Absense     1.00
226   9999     Wednesday, August 08, 2012         Con't Occurrence        0.00
223   9999     Wednesday, February 29, 2012       Unscheduled Absense     1.00
 249      9998     Saturday, February 02, 2013        Unscheduled Absense    1.00
 251      9998     Monday, January 21, 2013           Unscheduled Absense    1.00 
```

因此，基本上，如果在过去 6 个月内出现“Coaching”或“Other”的“OccurrenceName”，则该金额加上过去 6 个月内的任何其他事件应该是他们的技术总数。如果在过去 6 个月内没有发生“指导”或“其他”事件，那么我需要将前 6 个月滚动的 OccurrenceAmount 相加。

希望我很好解释的场景是有意义的。

**编辑＃1：** 好的，我对此数据的预期输出应该是：

* * *

```
TechID     Total
 9991       4.5
 9999       9.0
 9998       2.0 
```

如您所见，TechID 9991 的计算结果为 4.5，因为在过去 6 个月内发生了“教练”事件，但没有任何内容。9999 将有 9 次，因为在过去 6 个月内有 7 次辅导，此后又有两次，使总数达到 9。9998 有 2 次，因为该技术在过去 6 个月内没有任何辅导或任何东西，所以总数为 2。

**编辑#2：** 所以唯一应该计算的行是缩进的行。对于 9999，有 7 次和 2 次以上的常规训练，使他的总数达到 9。这更清楚吗？

**编辑#3：** 好的，走得更远一点。
@lance - 通过反复试验，我越来越接近......现在有这个，但无法让它工作：

`SELECT tblEmployeeData.TechID, tblEmployeeData.LName, tblEmployeeData.FName, Sum(tblOccurrence.OccurrenceAmt), Last(tblOccurrence.CoachingDate) AS LastOfCoachingDate, tblEmployeeData.SupLName FROM tblEmployeeData RIGHT JOIN tblOccurrence ON tblEmployeeData.TechID = tblOccurrence.TechID GROUP BY tblEmployeeData.TechID, tblEmployeeData.LName, tblEmployeeData.FName, tblEmployeeData.SupLName HAVING (((tblOccurrence.OccurrenceAmt))=IIf([tblOccurrence].[CoachingDate]="",[tblOccurrence].[OccurrenceDate] Between Date() And DateAdd('m',-6,Date()),IIf([tblOccurrence].[CoachingDate]<=DateAdd('m',-6,Date()),[tblOccurrence].[OccurrenceDate] Between Date() And DateAdd('d',[tblOccurrence].[CoachingDate],Date()))));`

**编辑#4：** 这个查询是我开始工作的“最好的”开始查询。它提取所有员工数据，然后填充 MaxCoaching 和 MaxDate。因此，我尝试将此查询连接到您的第二个查询以获取查询的总数，但无法使其正常工作。

询问： `SELECT tblEmployeeData.TechID, tblEmployeeData.LName, tblEmployeeData.FName, Max(tblOccurrence.CoachingDate) AS LastCoachingDate, Max([OccurrenceDate]) AS MaxDate, tblEmployeeData.SupLName FROM tblEmployeeData LEFT JOIN tblOccurrence ON tblEmployeeData.TechID = tblOccurrence.TechID GROUP BY tblEmployeeData.SupLName, tblEmployeeData.TechID, tblEmployeeData.LName, tblEmployeeData.FName`

所以这些结果得到最近的教练日期（如果有的话）和最近的事件日期，所以我需要根据 2 个条件对发生次数求和：

1.  如果在过去 6 个月内有辅导/其他日期，则需要该行的发生总数加上辅导/其他日期之后发生的任何其他日期
2.  如果过去 6 个月内没有发生任何辅导/其他日期，那么我需要过去 6 个月内发生的总次数。

更接近于获得有效的查询！谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:34:27.137

@Zamael 如果我理解您的问题和说明，那么 9998 的总和为 9 的原因是 9 月的日期是 6 个月前，并且还有另一个 OccurenceAmt 为 2 的行项目，我们在桌子。

假设这是正确的，我建议您使用以下 SQL 创建一个查询：

```
Select TechID, 
       SUM(IIF([OccurenceName] in ('Coaching','Other'),1,0)) as CoachingOtherCount,     
       SUM(IIF([OccurenceName] in ('Coaching','Other'),OccurenceAmt,0)) as CoachingAmt, 
       SUM(IIF(IIF([OccurenceName] in ('Coaching','Other'),0,OccurenceAmt))) as MiscAmt
From TableName
Where OccurenceDate > = DateAdd("m",-6,Date())
Group By TechID; 
```

然后，使用以下 SQL 创建第二个查询：

```
select TechID,
       IIF(Nz(CoachingOtherCount,0) > 0, CoachingAmt, MiscAmt) as SumOccurenceAmt
from Query1; 
```

**编辑 1 - 澄清后** 我现在理解的是： 第 1 步：在过去 6 个月内找到“教练”或“其他”。如果存在，则转到 2，否则转到 3。 第 2 步：求和第 1 步中最早出现的所有行。 第 3 步：对过去 6 个月的所有行求和。

如果这是您要查找的内容，则以下代码将起作用。

```
SELECT TechID, 
       MIN(IIF([OccurrenceName] in ('Coaching','Other'),OccurrenceDate,NULL)) AS MinCoachingOtherDate, 
       MIN([OccurrenceDate]) AS MinDate
FROM tblOccurrence
WHERE OccurrenceDate >= DateAdd("m",-6,Date())
GROUP BY TechID; 
```

然后，在第二个查询中

```
Select tbo.TechID,
       SUM([OccurrenceAmt]) as Amount

From tblOccurrence tbo
     LEFT JOIN QUERY1 q on q.techid = tbo.techid

WHERE tbo.OccurrenceDate >= IIF(q.MinCoachingOtherDate IS NULL, q.MinDate, q.MinCoachingOtherDate)

GROUP BY tbo.TechID; 
```

第一个查询在第一列中查找 Coaching/Other 的最早日期（如果存在），并在第二列中查找最早的日期。然后，在第二个查询中，我们假设 Coaching/Other 日期，除非它为空，然后我们默认为第二个日期。因为 where 动态约束每个 TechID 的日期，所以您可以将所有 OccurenceAmt 相加。

# html - 添加与正文大小相同的元素时出现滚动条

> ID：16149518
> 
> 赞同：1
> 
> 时间：2013-04-22T14:21:51.460
> 
> 标签：html, css

当我添加一个与 body 标签具有相同大小（宽度 + 高度）的元素时，我总是得到（不必要的？！）水平和垂直滚动条（在 Chrome 和 FF 中测试）。

```
/* css */
html, body {
height: 100%;
width : 100%;
margin: 0;
padding: 0;
}

/* javascript */
$("<canvas>")
.appendTo("body")
.attr("width", $("body").width())
.attr("height", $("body").height()); 
```

[JSFIDDLE 的完整示例。](http://jsfiddle.net/yTwdA/)

为什么会出现这些滚动条？主体应该足够大以适应没有滚动条的元素。当从宽度和高度中删除 4 个像素时，滚动条消失了。为什么正好是 4 个像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:45:20.913

它是否与默认填充为 2px 的 canvas 元素有关？如果您将 css 设置为从画布元素中删除默认边距和填充，会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-22T07:10:53.097

同样的事情发生在我身上，我得到了水平和垂直滚动，我是新手，我不知道为什么会发生这种情况，但是当我设置`overflow-x: 0;`body 元素时它修复了。我的意思是水平和垂直滚动都消失了。当页面在 y 轴溢出时，页面会得到垂直滚动。

# objective-c - 同步请求的 AFJsonRequest 和单元测试需求，

> ID：16149523
> 
> 赞同：0
> 
> 时间：2013-04-22T14:21:57.403
> 
> 标签：objective-c, unit-testing, afnetworking, synchronous

我正在尝试对我的代码进行一些单元测试。我面临一个问题，单元测试功能没有等待异步请求完成。我只想在我测试它时等待它，而不是在我运行它时等待它。

我想出了如何检查这个：

```
if([[[[NSProcessInfo processInfo] environment] objectForKey:@"TARGET"] isEqualToString:@"TEST"]) 
```

在我的项目中设置了相应的环境变量。但我找不到合适的方法来等待它。我尝试使用信号量，并且有效，但是如果有任何其他更容易且对读者友好的方式，我正在徘徊。

编辑 ：

最后，我这样做了：我想我本可以做得更好，但这对我来说很有效并且看起来很公平。

```
static int statusCode;

- (void)requestContent:(NSString*)urlString
{
statusCode = 0;
NSLog(@"Request Content");
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                                                    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
{
    [self ParseGoogleImageSearchResponse:JSON];
    statusCode = 1;
    NSLog(@"Done");
}
failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
{
    NSLog(@"%@", [error userInfo]);
    statusCode = 2;
}];
[operation start];

if([[[[NSProcessInfo processInfo] environment] objectForKey:@"TARGET"] isEqualToString:@"TEST"])
{
    while(statusCode == 0)
    {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate date]];
        NSLog(@"WAITING");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:06:55.973

为 AFNetworking 调用完成异步单元测试的一种方法是使用[GHUnit](http://github.com/gabriel/gh-unit)。

GHUnit 处理旋转运行循环并等待异步操作自动完成，因此您的单元测试代码可以更具可读性。

这是一个[基本教程](http://nscookbook.com/2013/03/recipe-18-unit-testing-with-ghunit-cocoapods/)，涵盖了一起使用 AFNetworking、GHUnit 和[CocoaPods](http://cocoapods.org)。

这是使用 AFNetworking 和 GHUnit 编写的基本测试。

```
- (void)test
{
    [self prepare];

    __block NSError     *responseError  = nil;
    __block id          resposeObject   = nil;

    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                                                        success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
    {
        resposeObject = JSON;       
        [self notify:kGHUnitWaitStatusSuccess forSelector:_cmd];
    }
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
    {
        responseError = error       
        [self notify:kGHUnitWaitStatusSuccess forSelector:_cmd];
    }];
    [operation start];

    // Wait for the async activity to complete
    [self waitForStatus:kGHUnitWaitStatusSuccess timeout:kNetworkTimeout];

    // Check Error
    GHAssertNil(responseError, @"");
    GHAssertNotNil(resposeObservation, @"Response Observation is nil");

    // Validate data...
} 
```

希望有帮助！

# functional-programming - Haskell - testDatabase 应用于一个参数，但其类型“数据库”没有。

> ID：16149527
> 
> 赞同：0
> 
> 时间：2013-04-22T14:22:04.117
> 
> 标签：functional-programming, haskell

我的数据库最多应该包含 25 个这样的数据条目。目前，我只有这些，但我收到以下错误消息：

> testDatabase 应用于一个参数，但其类型“数据库”没有。

或者类似的东西。

我的实际代码如下：

```
testDatabase :: Database
testDatabase = testDatabase [
("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006, ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"])] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:34:10.367

这与我上面的评论相同，但以防万一您想将问题标记为已回答...

尝试删除等号右侧的“testDatabase”，即`testDatabase = [("Casino Royale"...`. 由于类型签名，编译器将 testDatabase 解释为没有参数的函数 - 然后看起来您正在调用该函数：`testDatabase (your-list-as-a-parameter)`

# java - 我有一个应用程序需要向另一部手机发送信息，并在其中输入信息

> ID：16149528
> 
> 赞同：0
> 
> 时间：2013-04-22T14:22:05.727
> 
> 标签：java, android

我在第一个屏幕（活动）上有一个温度转换器应用程序，一旦使用计算按钮进行转换，就会有一个按钮将您带到下一个屏幕（活动）。然后在这个屏幕上会有一个按钮，它将向某人发送一个文本，其中包括在第一个屏幕上以摄氏度和华氏度输入的温度，例如“5 摄氏度的温度是 41华氏度数”。

我将如何获取消息以使用在前一个屏幕上输入的数据，然后实际以这种消息形式将其发送给某人？

谢谢

# php - Magento：将客户的税号添加到帐单地址（地址模板）

> ID：16149529
> 
> 赞同：0
> 
> 时间：2013-04-22T14:22:12.757
> 
> 标签：php, magento, magento-1.7

我想将客户的税号添加到帐单地址。

我想将它添加到客户配置 > 地址模板中，因此它始终可见（pdf 发票，在管理员中查看订单时等）。

我尝试了很多变量（taxvat、customer_taxvat、customer.taxvat 等），但似乎没有任何效果。最糟糕的是，我什至不知道在哪里寻找可用变量的列表（谷歌并没有给我我想要的东西）

Tl;博士我想要这样的东西：

```
{{depend prefix}}{{var prefix}} {{/depend}}{{var firstname}} {{depend middlename}}{{var middlename}} {{/depend}}{{var lastname}}{{depend suffix}} {{var suffix}}{{/depend}}
{{var company}} <br /> Tax number: {{var ???}} 
```

这是否可以通过使用变量轻松实现，还是需要更糟糕的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T14:40:44.127

解决方案似乎是这样的：

`{{depend vat_id}}VAT: {{var vat_id}}{{/depend}}`

但这可能不适用于 OneStepCheckout 扩展。我没有深入研究它，但似乎 OSC 将 vat_id 编号保存为其他字段。

# jsf - 通过 post 在 url 中设置参数

> ID：16149532
> 
> 赞同：2
> 
> 时间：2013-04-22T14:22:19.260
> 
> 标签：jsf, commandbutton

我想通过post在url中设置一个参数，但是这个页面只执行一个方法并使用h：commandButton更新页面。

```
<h:commandButton value="Simular" 
                action="#{simulador.simular()}" 
                style="margin:0 4px 0 0;"   
                immediate="true">
       <f:ajax render="@form" immediate="true"/>
</h:commandButton> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:41:40.010

URL 仅在同步请求时更改。只能在 GET 请求上向 URL 添加查询字符串。在 POST 之后发送重定向是创建同步 GET 请求的一种方法。

```
public String simular() {
    // ...

    return "page.xhtml?foo=42&faces-redirect=true";
} 
```

这将重定向到`/context/page.xhtml?foo=42`.

如果您实际上不需要在基于回发的操作方法中执行任何业务逻辑，那么您也可以只使用普通按钮而不是命令按钮。

```
<h:button value="Simular" outcome="page.xhtml">
    <f:param name="foo" value="42" />
</h:button> 
```

# abap - 内置类型（c、d、i、f 等）是否具有 CONVERSION_EXI_* 函数？如果是这样，如何找到它们？

> ID：16149533
> 
> 赞同：2
> 
> 时间：2013-04-22T14:22:30.027
> 
> 标签：abap

该`WRITE`语句有很多选项，所以我想知道，它是否调用了 CONVERSION_EXIT_* 函数，或者它如何以多种方式打印原始数据类型？

如果它确实使用了 CONVERSION_EXIT_*s，那是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:24:25.263

原始数据类型 ( `DATA foo TYPE n LENGTH 10`) 没有`ALPHA`分配给它们的任何转换出口 ( 等)。

*   您可以手动选择它们，例如使用

    写...到...使用编辑掩码'==ALPHA'。

*   或者可以将它们分配给数据字典域（事务代码`SE11`）。在这种情况下，它们被隐式调用，例如：

    *   由屏幕（dynpro）处理（除非明确关闭）。
    *   通过写

        数据（语言）= CONV 系统语言（'E'）。" 域 SYLANGU 有 conv.exit ISOLA

        数据文本类型 c 长度 2。

        将语言写入文本。" conv.exit ISOLA 将 'E' 转换为 'EN'

除了`WRITE`，ABAP 本身在支持转换退出方面做的很少——这是一件好事，因为转换应该只发生在程序的输入/输出边界而不是内部。

只要您正在处理它，最好将所有数据保留为内部格式，并且仅在输出发生之前对其进行转换。

# c++11 - CUDA 和 Thrust 库：将 .cuh .cu 和 .cpp 文件与 -std=c++0x 一起使用时遇到问题

> ID：16149538
> 
> 赞同：2
> 
> 时间：2013-04-22T14:22:37.907
> 
> 标签：c++11, cuda, parallel-processing, thrust, gpu

我想要一个`.cuh`文件，我也可以在其中声明内核函数和主机函数。这些功能的实现将在`.cu`文件中进行。实施将包括`Thrust`库的使用。

在`main.cpp`文件中，我想使用`.cu`文件内的实现。所以假设我们有这样的事情：

`myFunctions.cuh`

```
#include <thrust/sort.h>
#include <thrust/device_vector.h>
#include <thrust/remove.h>
#include <thrust/host_vector.h>
#include <iostream>

__host__ void show(); 
```

`myFunctions.cu`

```
#include "myFunctions.cuh"

__host__ void show(){
   std::cout<<"test"<<std::endl;
} 
```

`main.cpp`

```
#include "myFunctions.cuh"

int main(void){

    show();

    return 0;
} 
```

如果我这样做编译：

```
nvcc myFunctions.cu main.cpp -O3 
```

然后通过键入运行可执行文件`./a.out`

将`test`打印文本。

但是，如果我决定`-std=c++0x`使用以下命令包含：

```
nvcc myFunctions.cu main.cpp -O3 --compiler-options "-std=c++0x" 
```

我收到很多错误，其中一些如下：

```
/usr/include/c++/4.6/x86_64-linux-gnu/./bits/c++config.h(159): error: identifier "nullptr" is undefined

/usr/include/c++/4.6/x86_64-linux-gnu/./bits/c++config.h(159): error: expected a ";"

/usr/include/c++/4.6/bits/exception_ptr.h(93): error: incomplete type is not allowed

/usr/include/c++/4.6/bits/exception_ptr.h(93): error: expected a ";"

/usr/include/c++/4.6/bits/exception_ptr.h(112): error: expected a ")"

/usr/include/c++/4.6/bits/exception_ptr.h(114): error: expected a ">"

/usr/include/c++/4.6/bits/exception_ptr.h(114): error: identifier "__o" is undefined 
```

这些错误是什么意思，我该如何避免它们？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:46:22.887

如果您查看[此特定答案](https://stackoverflow.com/questions/12073828/c-version-supported-by-cuda-5-0/12598923#12598923)，您会看到用户正在使用您正在使用的相同开关编译一个空的虚拟应用程序，并得到一些完全相同的错误。如果您将该开关的使用限制为编译 .cpp 文件，您可能会得到更好的结果：

我的函数.h：

```
void show(); 
```

myFunctions.cu：

```
#include <thrust/sort.h>
#include <thrust/device_vector.h>
#include <thrust/remove.h>
#include <thrust/host_vector.h>
#include <thrust/sequence.h>
#include <iostream>

#include "myFunctions.h"

void show(){
  thrust::device_vector<int> my_ints(10);
  thrust::sequence(my_ints.begin(), my_ints.end());
  std::cout<<"my_ints[9] = "<< my_ints[9] << std::endl;
} 
```

主.cpp：

```
#include "myFunctions.h"

int main(void){

    show();

    return 0;
} 
```

建造：

```
g++ -c -std=c++0x main.cpp
nvcc -arch=sm_20 -c myFunctions.cu 
g++ -L/usr/local/cuda/lib64 -lcudart -o test main.o myFunctions.o 
```

# c# - LINQ to SQL 获取类型和长度

> ID：16149543
> 
> 赞同：2
> 
> 时间：2013-04-22T14:22:51.810
> 
> 标签：c#, linq-to-sql

我的任务是从 DBML 中查找特定列的类型和长度。

我想传入 DataContext、TableName 和 ColumnName 以返回我正在寻找的值。我找到了以下类似示例，但它没有返回任何内容：

[http://www.codeproject.com/Articles/27392/Using-the-LINQ-ColumnAttribute-to-Get-Field-Length](http://www.codeproject.com/Articles/27392/Using-the-LINQ-ColumnAttribute-to-Get-Field-Length)

但是，我可能执行不正确。对于`obj`参数我应该传入DataContext吗？我发现当我尝试加载`info`（对象数组）时，我什么也没得到......

```
 public static int GetLengthLimit(object obj, string field)
    {
        int dblenint = 0;   // default value = we can't determine the length

        Type type = obj.GetType();
        PropertyInfo prop = type.GetProperty(field);

        // Find the Linq 'Column' attribute
        // e.g. [Column(Storage="_FileName", DbType="NChar(256) NOT NULL", CanBeNull=false)]
        object[] info = prop.GetCustomAttributes(typeof(ColumnAttribute), true);
        // Assume there is just one
        if (info.Length == 1)
        {
            ColumnAttribute ca = (ColumnAttribute)info[0];
            string dbtype = ca.DbType;

            if (dbtype.StartsWith("NChar") || dbtype.StartsWith("NVarChar") || dbtype.StartsWith("VarChar"))
            {
                int index1 = dbtype.IndexOf("(");
                int index2 = dbtype.IndexOf(")");
                string dblen = dbtype.Substring(index1 + 1, index2 - index1 - 1);
                int.TryParse(dblen, out dblenint);
            }
        }
        return dblenint;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:24:46.550

不，您传递了其中一个实体的实例。

我实际上会将其更改为将 a`Type`作为参数，而不是实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-02T13:43:44.253

对于给定的实体，此方法将生成字符串字段长度的字典（LinqToSQL 语法）：

```
public static Dictionary<string, int> GetStrFieldsLen()
{
    Dictionary<string, int> dicFieldLen = new Dictionary<string, int>();
    var myEntity = new myEntity();

    foreach(var m in myEntity.GetType().GetProperties())
    {
        var typeName = myEntity.GetType().GetProperty(m.Name).PropertyType;
        int iLen = 0;

        if (typeName == typeof(string))
        {
            var tv= (m.CustomAttributes).First().NamedArguments.ToArray()[0].TypedValue.ToString(); // Get DbType member

             int idxStart = tv.LastIndexOf("(") + 1;
             if (int.TryParse(tv.Substring(idxStart, tv.LastIndexOf(")") - idxStart), out iLen)==false)
                iLen= int.MaxValue; // Field length is MAX

             dicFieldLen.Add(m.Name, iLen);
         }
    }
    return dicFieldLen ;
} 
```

# php - 如何从 mysql 表格单元格中检索数据并将其放入 php 中的变量中？

> ID：16149546
> 
> 赞同：1
> 
> 时间：2013-04-22T14:23:03.283
> 
> 标签：php, mysql

我正在创建一个函数，该函数将从具有多列的表中检索一个 ID 号，将其放入一个变量中，我想用该变量在电子邮件中将其作为“索赔号”发送给索赔人，并在确认屏幕上回显。这是我到目前为止所拥有的。

```
$sql = "SELECT id FROM warranty_claim where lname=$lname";
$result = mysql_query($sql);
$claim_id = $result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:25:01.430

```
$result = mysql_fetch_array(mysql_query($sql));

$claim_id = $result['id']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:26:46.877

假设您确定您将收到 1 行。

```
$sql = "SELECT id FROM warranty_claim where lname=$lname";
$result = mysql_query($sql);
$c = mysql_fetch_assoc($result);
$claim_id = $c['lname']; 
```

注意*：准备好听讲座。有人会告诉你 mysql 已经过时了。开始使用 MySQLi 或 PDO（推荐）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:27:30.123

尝试 ：

```
$sql = "SELECT id FROM warranty_claim where lname=$lname";
$result = mysql_query($sql);
$row = mysql_fetch_row($result);
$claim_id = $row[0]; 
```

或者

```
$sql = "SELECT id FROM warranty_claim where lname=$lname";
$result = mysql_query($sql);

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
   $claim_id = $row['id'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:29:51.613

`$row = mysql_fetch_array($result);`

`$claim_id = $row['id'];`

请注意，您还应该检查错误（例如`if($result === FALSE)`）。此外，还有其他获取数据的方法 - 我建议查看[mysql_fetch_array](http://www.php.net/manual/de/function.mysql-fetch-array.php)、[mysql_fetch_row](http://www.php.net/manual/de/function.mysql-fetch-row.php)、[mysql_fetch_assoc](http://www.php.net/manual/de/function.mysql-fetch-assoc.php)和[mysql_fetch_object](http://www.php.net/manual/de/function.mysql-fetch-object.php)

此外，不要依赖语句总是只返回一行 - 确保结果符合预期：[mysql_num_rows](http://www.php.net/manual/de/function.mysql-num-rows.php)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T14:31:35.533

试试这个：

```
$sql        = "SELECT id FROM warranty_claim where lname='".$lname."'";
$result     = mysql_query($sql);
$objResult  = mysql_fetch_array($result);  
$claim_id   = $objResult['id']; 
```

# ruby-on-rails - ActiveRecord 可以使用来自 postgres 的特定几何“路径”类型吗？

> ID：16149547
> 
> 赞同：0
> 
> 时间：2013-04-22T14:23:04.737
> 
> 标签：ruby-on-rails, postgresql, activerecord

向大家问好！
正如我[在文档中](http://apidock.com/rails/ActiveRecord/ConnectionAdapters/TableDefinition/column)发现的那样， ActiveRecord 应支持非本地类型。
我尝试创建一个新的“Route”模型然后迁移，但我得到了这个：

```
$ rails g model Route note:text route:path
...
$ rake db:migrate
undefined method `path' for #<ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::TableDefinition
... 
```

也许我错过了什么？

PostgreSQL - 9.2.4，gem 'pg' - 0.15.0

请原谅我奇怪的英语。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:44:32.263

ActiveRecord 仅支持生成迁移的常见本机类型。这些类型被硬编码为：

```
%w( string text integer float decimal datetime timestamp time date binary boolean) 
```

它还支持一些“虚拟”助手类型：`timestamps`和`references`

但是，您可以将列生成为其他内容（例如整数），然后将生成的代码修改为如下所示：

```
create_table :routes do |t|
  t.text :note
  t.column :route, :path
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-23T19:04:05.160

据此，[它](http://edgeguides.rubyonrails.org/active_record_postgresql.html#geometric-types)现在可用。

> 除点外的所有几何类型都映射到普通文本。一个点被转换为一个包含 x 和 y 坐标的数组。

我可以确认我能够创建具有路径类型的模型。该路径在 Rails 中转换为字符串，但在 PostgreSQL 数据库中保存为路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-15T19:54:16.790

从**Rails 5**开始，您可以在运行迁移时使用[特定的几何数据类型](https://github.com/rails/rails/commit/3991ebcb36ac6694b35a3d3ab79a6b9c1e48bed1)命令，所以现在您可以使用

`t.path :coordinates`

代替

`t.column :coordinates, :path`

*   假设你在你的**create_table**块内

[您可以在PostgreSQL 适配器](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb)文件中查看所有可用选项。

在官方 PostgreSQL 文档（当前版本 10.5）中查找有关[几何类型](https://www.postgresql.org/docs/10/static/datatype-geometric.html)（点、线、lseg、框、路径、多边形、圆）和[几何函数](https://www.postgresql.org/docs/10/static/functions-geometry.html)（相交？、包含？、距离等）的更多详细信息。

如果您需要更强大的功能并处理空间数据，请尝试使用[Active Record PostGIS 适配器](https://github.com/rgeo/activerecord-postgis-adapter)gem。

# xaml - 如何在 TopAppBar-WinRT 的文本块中显示当前日期时间

> ID：16149554
> 
> 赞同：0
> 
> 时间：2013-04-22T14:23:30.533
> 
> 标签：xaml, windows-runtime, winrt-xaml

我试图在 Top App 栏中显示当前的 sysdatetime，我想知道无论如何我可以在 XAML 中为 win 商店应用程序执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:53:57.580

```
public class MainViewModel : INotifyPropertyChanged
    {
        private readonly DispatcherTimer _timer = new DispatcherTimer();

    private string _resDateTime;
    public string ResDateTime
    {
        get
        {
            return _resDateTime;
        }
        set
        {
            _resDateTime = value;
            NotifyPropertyChanged("ResDateTime");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this,
                new PropertyChangedEventArgs(propertyName));
        }
    }

    public MainViewModel()
    {
        _timer.Tick += TimerOnTick;
        _timer.Start();
    }

    private void TimerOnTick(object sender, object o)
    {
        ResDateTime = DateTime.Now.ToString();
    }
} 
```

添加到后面的代码

```
public MainPage()
        {
            this.InitializeComponent();
            DataContext = new MainViewModel();
        } 
```

并穿上xaml

```
<Page.TopAppBar>
    <AppBar>
      <TextBlock Text="{Binding ResDateTime}"></TextBlock>
    </AppBar>
  </Page.TopAppBar> 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:10:54.077

在您的页面中，您可以像这样设置 Page.TopAppBar 和 Page.BottomAppBar：

```
<Page.TopAppBar>
    <AppBar>
        <TextBlock Text="Your text" />
    </AppBar>
</Page.TopAppBar> 
```

从那里，您可以绑定 Text 属性（如果您使用的是 MVVM 模式），或者只是在页面后面的代码中分配一个值，方法是为 TextBlock 元素命名。

# actionscript-3 - 在 flash builder 项目中添加 swf 动画的最简单方法

> ID：16149555
> 
> 赞同：0
> 
> 时间：2013-04-22T14:23:39.323
> 
> 标签：actionscript-3, flash-builder, flash, embed

我有一个非常简单的闪光瞄准（基于帧），我只需要运行一次。将它嵌入到 flash builder 4.6 中的最快和最简单的方法是什么。

我已经尝试了大约 5 或 6 种不同的方法，但似乎无法得到它，主要是由于类型不匹配，即使是投射也不起作用。

我绑定了嵌入元表，但我应该使用 loader() 类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:41:40.013

尝试这个：

```
[Embed(source="movie.swf", mimeType="application/octet-stream")]
const movieClass:Class;

var loader:Loader = new Loader();
loader.loadBytes(new movieClass() as ByteArray);
addChild(loader); 
```

# jenkins - Jenkins：使构建成功依赖于测试

> ID：16149556
> 
> 赞同：0
> 
> 时间：2013-04-22T14:23:42.427
> 
> 标签：jenkins, continuous-integration, hudson, jmeter, soapui

我是 Jenkins/Hudson 的新手，但我没有找到提供我正在寻找的功能的插件。

我想让我的 Web 应用程序的构建过程依赖于我已经在 J​​Meter 和 soapUI 中实现的多个功能测试。所以项目建成后，应该开始测试。如果它们失败（达到一定程度），整个构建应该会失败（而不仅仅是包含测试的作业）。

正如我所读到的，构建后操作和 JMeter/soapUI 测试不是问题。唯一缺少的东西似乎是与整个构建成功的联系。是否有适合我要求的插件或解决方法？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T08:54:14.513

您需要[性能插件](https://wiki.jenkins-ci.org/display/JENKINS/Performance+Plugin)：

*   添加 JMeter 报告并定义 jtl 文件的路径。
*   要将构建状态标记为失败，您需要指定`Failed threshold`.

示例：
如果您指定 20% 的阈值：如果 20% 或更多的 jmeter 样本失败，则 jenkins 作业被标记为失败。

# regex - 带有公式通配符重定向的 Htaccess

> ID：16149558
> 
> 赞同：0
> 
> 时间：2013-04-22T14:23:44.537
> 
> 标签：regex, .htaccess, redirect

我有两种类型的链接需要重定向。

链接是顶级的，例如**example.com/p123456234** ，但现在应该是**clients.example.com/p123456234**。

有许多链接遵循相同的顺序（字母然后是 9 个数字），我正在寻找一个通配符重定向来一次处理所有这些，而不必手动输入它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:47:51.983

```
RewriteRule ^([a-z]{1})([0-9]{9})$ http://clients.example.com/$1$2 [R=301,L] 
```

此处的通配符将限制每种类型（字母和数字）的字符数。如果匹配，它将使用 301 重定向转到新目的地。

# ef-code-first - EF Code First 向模型中不再存在的查询添加了额外的列

> ID：16149562
> 
> 赞同：4
> 
> 时间：2013-04-22T14:23:57.320
> 
> 标签：ef-code-first, sql-generation

这是我关于 SO 的第一个问题。

我有一个 ASP.NET 4.0 MVC3 项目，它使用 EF Code First 作为 ORM 和 FluentMigrator 进行版本迁移。我有 Message 实体类，如下所示：

```
public class Message
{
    [Key]
    [Column("Message_Id")]
    public int Id { get; set; }

    public DateTime CreatedTime { get; set; }

    [Required]
    [StringLength(MaxSubjectLength)]
    public string Subject { get; set; }

    [Required]
    [StringLength(MaxBodyLength)]
    public string Body { get; set; }

    public Link Link { get;set; }
} 
```

没有定义自定义映射，以及 MSSQL Server 2012 数据库表消息：

```
CREATE TABLE [dbo].[Messages](
    [Message_Id] [int] IDENTITY(1,1) NOT NULL,
    [CreatedTime] [datetime] NOT NULL,
    [Subject] [nvarchar](78) NOT NULL,
    [BodyHtml] [nvarchar](2000) NOT NULL,
    [Link_Id] [int] NULL,
    [Collection_Id] [int] NULL,
    [MessageType] [nvarchar](30) NOT NULL,
 CONSTRAINT [PK_Messages] PRIMARY KEY CLUSTERED 
(
    [Message_Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Messages]  WITH CHECK ADD  CONSTRAINT [FK_Messages_Collection] FOREIGN KEY([Collection_Id])
REFERENCES [dbo].[Collections] ([Id])
GO

ALTER TABLE [dbo].[Messages] CHECK CONSTRAINT [FK_Messages_Collection]
GO

ALTER TABLE [dbo].[Messages]  WITH CHECK ADD  CONSTRAINT [FK_Messages_Link] FOREIGN KEY([Link_Id])
REFERENCES [dbo].[Links] ([Id])
GO

ALTER TABLE [dbo].[Messages] CHECK CONSTRAINT [FK_Messages_Link]
GO 
```

Link_Id、Collection_Id 和 MessageType 列在该表中，因为我想做一个 TPH 继承（实际上我想做一个 TPT 继承，然后切换到 TPH，我猜它会解决我的问题，但它没有）。

现在我想要 LinkMessage 和 CollectionMessage 类应该是这样的：

```
public class LinkMessage : Message
{
    public int? Link_Id { get;set; }
}

public class CollectionMessage : Message
{
    public int? Collection_Id { get;set; }
} 
```

**所以问题是：**即使没有定义继承（即只存在消息实体），当我删除链接导航属性、重建我的项目（甚至重新创建数据库等）并执行简单查询时，`var a = DBContext.Messages.ToList();` EF 也会生成以下查询：

```
SELECT 
[Extent1].[Message_Id] AS [Message_Id], 
[Extent1].[CreatedTime] AS [CreatedTime], 
[Extent1].[Subject] AS [Subject], 
[Extent1].[BodyHtml] AS [BodyHtml], 
[Extent1].[Link_Id] AS [Link_Id]
FROM [dbo].[Messages] AS [Extent1] 
```

为什么它仍然包含 Link_Id？它不再是模型。这将导致继承问题 - 当我使用上面的子类进行 TPH（或 TPT）继承时，应用程序失败并出现错误“无效的列名 'Link_Id1'”。为什么是 Link_Id1？这怎么可能发生？我完全糊涂了。“Collection_Id”列表现正常。这两列是相同的。**我尝试**重新创建数据库，杀死应用程序的所有进程（甚至重新启动我的电脑），尝试加载以前的修订版并在那里删除 Message.Link_Id 属性，尝试使用数据但没有 - 相同的行为。我试图用谷歌搜索一些东西，但最终一无所获，因为实际上我什至不知道如何进行正确的搜索查询，而我所做的搜索什么也没给我，我正在用它度过第二天......

以下是他们生成的查询和 SQL：

```
var b = DBContext.Messages.OfType<CollectionMessage>();

SELECT 
[Extent1].[Message_Id] AS [Message_Id], 
'0X0X' AS [C1], 
[Extent1].[CreatedTime] AS [CreatedTime], 
[Extent1].[Subject] AS [Subject], 
[Extent1].[BodyHtml] AS [BodyHtml], 
[Extent1].[Collection_Id] AS [Collection_Id], 
[Extent1].[Link_Id1] AS [Link_Id1]
FROM [dbo].[Messages] AS [Extent1]
WHERE [Extent1].[MessageType] = N'CollectionMessage'

var b = DBContext.Messages.OfType<LinkMessage>();

SELECT 
[Extent1].[Message_Id] AS [Message_Id], 
'0X0X' AS [C1], 
[Extent1].[CreatedTime] AS [CreatedTime], 
[Extent1].[Subject] AS [Subject], 
[Extent1].[BodyHtml] AS [BodyHtml], 
[Extent1].[Link_Id] AS [Link_Id], 
[Extent1].[Link_Id1] AS [Link_Id1]
FROM [dbo].[Messages] AS [Extent1]
WHERE [Extent1].[MessageType] = N'LinkMessage'

var b = DBContext.Messages;

SELECT 
[Extent1].[Message_Id] AS [Message_Id], 
CASE WHEN (((CASE WHEN ([Extent1].[MessageType] = N'LinkMessage') THEN cast(1 as bit) ELSE cast(0 as bit) END) <> cast(1 as bit)) AND ((CASE WHEN ([Extent1].[MessageType] = N'CollectionMessage') THEN cast(1 as bit) ELSE cast(0 as bit) END) <> cast(1 as bit))) THEN '0X' WHEN ([Extent1].[MessageType] = N'LinkMessage') THEN '0X0X' ELSE '0X1X' END AS [C1], 
[Extent1].[CreatedTime] AS [CreatedTime], 
[Extent1].[Subject] AS [Subject], 
[Extent1].[BodyHtml] AS [BodyHtml], 
CASE WHEN (((CASE WHEN ([Extent1].[MessageType] = N'LinkMessage') THEN cast(1 as bit) ELSE cast(0 as bit) END) <> cast(1 as bit)) AND ((CASE WHEN ([Extent1].[MessageType] = N'CollectionMessage') THEN cast(1 as bit) ELSE cast(0 as bit) END) <> cast(1 as bit))) THEN CAST(NULL AS int) WHEN ([Extent1].[MessageType] = N'LinkMessage') THEN [Extent1].[Link_Id] END AS [C2], 
CASE WHEN (((CASE WHEN ([Extent1].[MessageType] = N'LinkMessage') THEN cast(1 as bit) ELSE cast(0 as bit) END) <> cast(1 as bit)) AND ((CASE WHEN ([Extent1].[MessageType] = N'CollectionMessage') THEN cast(1 as bit) ELSE cast(0 as bit) END) <> cast(1 as bit))) THEN CAST(NULL AS int) WHEN ([Extent1].[MessageType] = N'LinkMessage') THEN CAST(NULL AS int) ELSE [Extent1].[Collection_Id] END AS [C3], 
[Extent1].[Link_Id1] AS [Link_Id1]
FROM [dbo].[Messages] AS [Extent1] 
```

为什么要查询 Link_Id 和 Link_Id1 列？请有人帮助我，我错过了什么？

**UPD：**当我删除自定义 DBInitializer 并使用 Code First 为我创建数据库时，它会在“消息”表中创建额外的列“Link_Id1”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T10:18:26.943

对不起，伙计们，我知道这应该是一些愚蠢的小错误，但没想到会这么愚蠢。实际上，一个`Link`实体中有一个集合`Messages`。这个属性没有使用太多，所以我们没有注意到它在其他属性中。当我删除它时 - 一切都开始工作了。

所以它开始是一个非常有趣的问题，但最终得到了**非常明显的答案——人为因素**。

对于所有不熟悉 EF 并且掉进同一个洞穴的人，我会留下一条说明：除非引用了某些属性，否则 EF 无法“记住”某些属性。因此，如果您确实遇到类似的麻烦，请仔细检查您的代码并请其他人来做，没有魔法！

我现在不能投票，所以**soadyp**，**Gert Arnold** - 感谢您的帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T14:58:50.117

从这里开始[http://msdn.microsoft.com/en-us/data/jj591583.aspx](http://msdn.microsoft.com/en-us/data/jj591583.aspx) 任何机会

```
public Link Link { get;set; } 
```

正在拖入 Link_Id

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T19:21:29.300

如果您的模型中只有`Message`and （必须`Link`），那么*总会*有一列`Link_Id`可以容纳`Message.Link`。

如果您`Message`的模型中还关闭了派生类`Link_Id`，则始终为属性生成`LinkMessage.Link_Id`。您不能`Link`在派生类中拥有基类和外键值。现在 EF 只注意到有一个属性`LinkMessage.Link_Id`，除此之外还有一个导航属性`Link`。对于后者，`Link_Id`不再可用，因此 EF 创建了`Link_Id1`.

您必须将两者`Link`和`Link_Id`放在同一个类中，以使 EF 将它们视为一个外键（*外键关联*）的两个部分。它可能看起来像这样：

```
public class LinkMessage : Message
{
    [ForeignKey("Link")]
    public int? Link_Id { get; set; }
    public Link Link { get; set; }
} 
```

# asp.net - 在 web.config 中为 ASP.NET 网站中的 WCF Web 服务单独的 httpmodule(s)

> ID：16149563
> 
> 赞同：1
> 
> 时间：2013-04-22T14:23:57.410
> 
> 标签：asp.net, wcf, web-services, web-config

我在 ASP.NET 网站项目中有一个 WCF (RESTful) Web 服务。该服务位于 /WebServices/Registration.svc。我正在尝试创建一个自定义 BasicAuthenticationModule httpModule 来处理基本身份验证，如[https://stackoverflow.com/a/4729555/291323](https://stackoverflow.com/a/4729555/291323)中所述，但该模块正在用于我的整个网站，这是我不想要的。

我尝试使用标签为服务定义模块，但无法让它工作。我尝试将路径设置为“WebServices/Registration.svc”以及“WebServices”。

是否有更好的方法来注册 httpModule 以仅影响网站项目中的 WCF Web 服务？

TIA 寻求帮助！

# ios - 推送下一个 ViewController 时的自定义导航栏 titleView 大小问题

> ID：16149564
> 
> 赞同：1
> 
> 时间：2013-04-22T14:23:58.837
> 
> 标签：ios, size, uinavigationbar, titleview

我正在尝试为 Iphone 应用程序 iOS 5.0+ 自定义 titleView 。所以我放了一个这样的图形：

```
UIView *customTitleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 104, 72)]; 

UIImageView *customTitleGraphics = [[UIImageView alloc] initWithImage:image]; 
[customTitleGraphics setTag:kNavigationImageView]; 
CGRect myFrame = customTitleGraphics.frame; 
myFrame.origin.y = 15.0; 
myFrame.origin.x = -3.0; 

customTitleGraphics.frame = myFrame; 

[customTitleView addSubview:customTitleGraphics]; 
navigationItem.titleView = customTitleView; 
```

它到目前为止有效。我遇到的问题是当我尝试推送另一个 viewController 时：看起来 titleView 在动画开始时突然被切断了。

[https://www.dropbox.com/s/0ysiroxayfld1l3/titleview.mov?v=1mci](https://www.dropbox.com/s/0ysiroxayfld1l3/titleview.mov?v=1mci)

你知道我哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T08:56:05.093

我认为`UINavigationBar`当您将新的 VC 推送到导航堆栈时，标题视图的大小会被调整。我的建议是防止导航视图裁剪到边界……</p>

# asp.net-mvc-3 - 来自会话或数据库的 MVC Web 应用程序下拉数据

> ID：16149573
> 
> 赞同：0
> 
> 时间：2013-04-22T14:24:16.890
> 
> 标签：asp.net-mvc-3, session-variables, lookup, master

我们有一个基于 ASP.Net MVC3 的网络应用程序。我们的数据库中有那些典型的主数据表——我们必须在从我的 SQL 数据库填充下拉列表和自动完成时查找这些表数据（和一些视图）。因此，即使用户刷新页面，它也会从数据库中获取（几乎）未更改的主数据。大多数主数据小于 100 条记录。

如果我放一个

> 将 <master-data-object> 列表到“应用程序级别变量”（或至少“会话级别”）

避免这次往返？为所有主数据做这件事怎么样？我相信“按需”填充应用程序级别变量可以使其初始有效负载不那么激进。在某些情况下，我可以使数据失效/重新填充以刷新数据。

请提出您的想法或任何其他更好的方法来实现这一目标。最后，这种优化真的值得吗（我的意思是，如果与应用程序级别的访问相比，发现数据库之旅并不是什么大不了的事——我的用户访问权限适中，数据库大小约为 10-15MB）。我们努力保持简单和干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:07:50.980

阅读 ASP.Net 输出缓存。当您使用输出缓存时，您是在指示网络服务器记住第一个请求的结果并一遍又一遍地使用它而不进行实际处理（在您的情况下不访问数据库）。

简而言之，这就是你必须做的

创建将提供查找数据并使用输出缓存属性装饰它们的控制器操作

使用 UI 代码中的 Ajax 将查找数据加载到上述控制器操作的列表和下拉列表中

您的 UI 会多次调用网络服务器，但网络服务器会从缓存中提供结果。它不仅会减少数据库上的负载（尽管不是您最关心的问题），而且会在速度及其简单、干净和不显眼方面产生非常好的性能

一个很好的关于这个主题的初读

[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)

快乐编码

# html - 如何定位与输入字段相关的标签标签

> ID：16149585
> 
> 赞同：5
> 
> 时间：2013-04-22T14:25:03.507
> 
> 标签：html, forms, placement

我在整理这个时遇到了问题。

这是我的html

```
<form>
    <p><label for="comp-name">Name:</label>
        <input type="text" name="comp-name"></input>
    </p>
    <p>
        <label for="company-address">Address:</label>
        <textarea name="company-address"></textarea>
    </p>
    <p>
        <label for="postcode">Postcode:</label>
        <input type="text" name="postcode"></input>
    </p>
    <p>
        <label for="phone">Phone Number:</label>
        <input type="text" name="phone"></input>
    </p>
    <p>
        <label for="email">Email:</label>
        <input type="text" name="email"></input>
    </p>
</form> 
```

这是我希望表单的样子： ![在此处输入图像描述](https://i.stack.imgur.com/yOvfl.jpg)

[这是jsfiddle链接。](http://jsfiddle.net/N7e67/)

很难弄清楚如何将标签放在输入/文本区域的左上角。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T14:43:19.023

如果我理解正确，一个简单的：

```
label {
    vertical-align: top;
} 
```

应该给你你想要的结果。

小提琴：http: [//jsfiddle.net/N7e67/2/](http://jsfiddle.net/N7e67/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T14:52:50.843

您可以将标签放在表格的左列，将字段放在右侧，然后将它们放置在它们的单元格中

```
<table>
    <tr>
        <td>(label)</td>
        <td>(input)</td>
    </tr>
    ...
</table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T14:41:19.937

尝试将您的标签和输入类型放在 div 标签内

```
<p><div><label for="comp-name">Company Name:</label></div>
    <div> <input type="text" name="comp-name"></input></div>
 </p> 
```

这应该可以帮助你。如果这不是您所期望的，请详细说明您希望看到的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T14:35:07.650

您可以尝试使用此样板[http://www.csskarma.com/lab/contactForm/](http://www.csskarma.com/lab/contactForm/)或本教程[http://designfestival.com/position-text-labels-on-forms-using%C2%A0css/](http://designfestival.com/position-text-labels-on-forms-using%C2%A0css/)

*   PS：供您参考，标签`for`属性应引用`id`输入的一个。
*   PPS：你可能会觉得这篇文章很有趣[http://www.lukew.com/ff/entry.asp?1502](http://www.lukew.com/ff/entry.asp?1502)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T14:31:24.307

您可以使用此代码来定位您的对象： **style="z-index: 1; left: -3px; top: 202px; position: absolute; height: 132px; width: 494px"**

根据表单设计更改左侧，顶部，高度和宽度。

```
<label for="comp-name" style="z-index: 1; left: -3px; top: 202px; position: absolute; height: 132px; width: 494px>Company Name:</label> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-30T18:33:00.597

最简单的就是把`<input>`里面`<label>`

```
<div>
  <label for="comp-name">Company Name: <input type="text" name="comp-name" />
  </label>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-13T18:12:10.840

您有两个选项用于放置标签和输入。

**1）**您可以将标签和输入作为兄弟姐妹彼此相邻放置。

```
<label for="cheese">Do you like cheese?</label>
<input type="checkbox" name="cheese" id="cheese"> 
```

**2）**您可以将输入元素放置在标签内，使标签成为父元素，输入成为标签的子元素。

```
<label>Do you like cheese?
  <input type="checkbox" name="cheese">
</label> 
```

[根据 MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label) ，这两种解决方案都是有效的 HTML ，但是当您选择解决方案之一时，您需要通过向`id`input 元素和label 元素添加`for`属性来显式地将标签链接到 input 元素。
当您选择第二个选项时，您不需要这样做，因为 DOM 自动知道（由于父子关系）标签和元素彼此相关。**我会考虑第二种解决方案的明显优势。**

* * *

**笔记。** *使用 css，您可以获得这些解决方案中任何一个所需的样式结果，因此我不会将其用作在 1 和 2 之间进行选择的参数。*

# .net - .NET UDP 多播接收

> ID：16149586
> 
> 赞同：0
> 
> 时间：2013-04-22T14:25:08.420
> 
> 标签：.net, c#-4.0, udpclient

我偶尔会看到我的 udp 多播接收器两次接收到一个数据包。我设置多播客户端如下：

```
private static void setupUdpMulticastClient()
    {
        //IPEndPoint ipRXEnd = new IPEndPoint(IPAddress.Any,multicastPort);
        IPEndPoint ipRXEnd = new IPEndPoint(IPAddress.Parse(emulatorIpaddr), multicastPort);
        udpMulticastClient = new UdpClient();
        udpMulticastClient.Client.ExclusiveAddressUse = false;
        udpMulticastClient.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
        udpMulticastClient.Client.Bind(ipRXEnd);
    } 
```

emulatorIpaddr 是一个 192.xxx 地址。

接收器如下所示：

```
public static void MulticastSetBeginReceive()
    {
        //IPAddress ipSSDP = IPAddress.Parse(multicastIP);
        IPAddress ipSSDP = IPAddress.Parse(emulatorIpaddr);
        IPEndPoint ipRXEnd = new IPEndPoint(ipSSDP, multicastPort);
        UdpState udpListener = new UdpState();
        udpListener.e = ipRXEnd;

        if (udpMulticastClient == null)
        { setupUdpMulticastClient();}

        udpListener.u = udpMulticastClient;
        udpMulticastClient.BeginReceive(new AsyncCallback(MulticastReceiveCallback), udpListener);
    } 
```

似乎偶尔会触发异步回调 2 次。为了完整起见，这里是回调代码：

```
public static void MulticastReceiveCallback(IAsyncResult ar)
    {
        try
        {
            UdpClient u = (UdpClient)((UdpState)(ar.AsyncState)).u;
            IPEndPoint e = (IPEndPoint)((UdpState)(ar.AsyncState)).e;

            if (u.Client != null)
            {
                Byte[] receiveBytes = u.EndReceive(ar, ref e);
                string receiveString = Encoding.ASCII.GetString(receiveBytes);
                string from = e.ToString();
                string to = ((UdpState)(ar.AsyncState)).e.ToString();
                msgReceiver(DateTime.Now.ToLocalTime(), from, to, receiveString);
            }
            if (running)
                MulticastSetBeginReceive();
        }
        catch (Exception ex)
        {
            log.Debug(ex.Message);
            log.Debug(ex.StackTrace);
        }
    } 
```

我正在运行 Windows 7 和 .Net 4。

是否有人看到代码存在问题，或者知道 .NET 或 win 7 存在问题，这会导致这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T06:15:06.927

对于接收字符串，使用 Encoding.Unicode.GetString(receiveBytes, 0, receiveBytes.Count())

而不是 ASCII

# ruby-on-rails - Rails 预编译常量未初始化

> ID：16149589
> 
> 赞同：5
> 
> 时间：2013-04-22T14:25:10.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, initialization, asset-pipeline, assets

我想预加载配置（来自“.yml”文件）。在我的一个初始化程序文件（config/initializers/facebook.rb）中，我有以下代码行：

```
FACEBOOK_CONFIG = YAML.load_file("#{Rails.root}/config/facebook.yml")[Rails.env] 
```

所以，它在“开发”模式下就像一个魅力。一旦我切换到生产模式，它就会一直告诉我，如果我想“rake assets:precompile” ，FACEBOOK_CONFIG 是我的“ `facebook.js.coffee.erb`”文件的未初始化常量，位于**assets/javascript （如果重要的话）。**我试过做一些随机的事情，比如：`RAILS_ENV=production bundle exec rake assets:precompile`或

> 耙资产：预编译：全部

，但没有运气

我已经尝试为我的生产环境分配“ `initialize_on_precompile = true`”变量（尽管默认情况下它应该是真的），以防万一。

为什么它在生产模式下不起作用（但是，我想强调的是，它在开发环境中确实起作用（！））。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-06T06:34:38.697

我遇到了完全相同的问题。这是因为您的 javascript(coffescript) 文件引用了在初始化程序中定义的常量。因为它是在初始化程序之前预编译的，所以应用程序会抛出错误。

这是我找到的简单解决方案。将此代码放在配置中 application.rb 文件的底部：

```
module AssetsInitializers
  class Railtie < Rails::Railtie
    initializer "assets_initializers.initialize_rails",
                :group => :assets do |app|
      require "#{Rails.root}/config/initializers/facebook.rb" 
    end
  end
end 
```

它从初始化文件夹手动加载某些文件。它解决了我的问题。

希望这也是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T01:18:00.127

```
module Rails

  class << self
    def facebook_config
      @@facebook_config ||= nil
    end

    def facebook_config=(facebook_config)
      @@facebook_config = facebook_config
    end
  end
end

Rails.facebook_config = YAML.load_file("#{Rails.root}/config/facebook.yml")[Rails.env]

# And you can use it like this in anywhere:
puts Rails.facebook_config 
```

# ruby-on-rails-3 - 默认情况下，如何从 Rails 生成的链接中排除某些参数？

> ID：16149596
> 
> 赞同：0
> 
> 时间：2013-04-22T14:25:40.430
> 
> 标签：ruby-on-rails-3

我们使用 Rails 的`caches_action`方法和 Redis 来实现普通页面的缓存。这是一个非常动态的站点，因此具有不同 URL 参数的页面必须在缓存中保持不同（例如`?page=1`vs `?page=2`）。但只要 URL 匹配，内容就可以被缓存并提供给多个访问者。

由于我们很大一部分流量来自 Adwords 广告，我们的许多用户在访问我们的页面时在 URL 中使用了[gclid](http://www.wordstream.com/gclid)参数，这使得缓存毫无用处。我通过从用于识别唯一 URL 的缓存路径中排除 gclid 来解决此问题：

```
caches_action :search,
              :expires_in => 10.minutes,
              :cache_path => Proc.new { |c| c.params.except('gclid') } 
```

这工作了一段时间，直到我意识到我们的 Analytics 数据已关闭，因为我们缓存的 HTML 包含来自以前访问的 gclid 参数的内部链接。

因此，解决方案非常简单——每次生成链接时，我都需要手动 exclude `gclid`，例如：

```
link_to 'some page', params.except('gclid') 
```

我的问题是：有没有办法自动`gclid`从所有生成的链接中排除？不必在整个站点中手动执行此操作会非常方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:10:05.447

这就是我想出的。事实证明，无论如何`link_to`最终都会调用`url_for`，所以这似乎是连接它的最佳位置。

```
module ActionDispatch
  module Routing
    module UrlFor
      alias :original_url_for :url_for
      def url_for(options = {})
        options = options.except(:gclid) if options.kind_of? Hash
        original_url_for options
      end
    end
  end
end 
```

[@jdc helper 我的这个答案](https://stackoverflow.com/a/6282219/93995)和@MurifoX 的评论一样。

# c# - 如何使用 Webkit 浏览器点击链接？

> ID：16149597
> 
> 赞同：5
> 
> 时间：2013-04-22T14:25:42.207
> 
> 标签：c#, .net, webkit

我想在导航到网站后点击链接

```
 webKitBrowser1.Navigate("http://www.somesite.com"); 
```

假设链接的 id 为 ，如何点击本网站上的链接`lnkId` ？

```
<a href="http://www.google.com" id="lnkId"> Go to Google </a> 
```

在 Visual Studio 附带的默认浏览器控件中，我可以使用以下代码执行此操作：

```
 foreach (HtmlElement el in webBrowser1.Document.GetElementTagName("a")) {
 if (el.GetAttribute("id") == "lnkId") {
 el.InvokeMember("click");
 }
 } 
```

当我使用 WebkitDotNet 控件时，上面的代码等效于什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-02T13:18:07.093

由于`WebKit`不提供`Click()`事件（[有关详细信息，请参见此处](https://code.google.com/p/open-webkit-sharp/issues/detail?id=11)），因此您不能以上述方式执行此操作。`winforms`但是一个小技巧可能与以下原始方式等效：

```
foreach (Node el in webKitBrowser1.Document.GetElementsByTagName("a"))
{
    if (((Element) el).GetAttribute("id") == "lnkId")
    {
        string urlString = ((Element) el).Attributes["href"].NodeValue;
        webKitBrowser1.Navigate(urlString);
    }
} 
```

在这里，我正在做的是将`WebKit.DOM.Node`对象转换为其子类`WebKit.DOM.Element`以获取其`Attributes`. 然后提供`href`给`NamedNodeMap`，即`Attributes`作为`NodeName`，您可以轻松提取`NodeValue`，`target url`在这种情况下就是 。然后，您可以简单地调用实例`Navigate(urlString)`上的方法`WebKitBrowser`来复制`click`事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T18:46:51.227

我不使用 Windows，我的所有经验都在 Webkit GTK 上。以下评论基于该经验。

我不确定您使用的是哪个 webkit .NET 版本。看起来有多种实现。假设您使用的是 Wasif 提到的那个，您可以按照示例[https://code.google.com/p/open-webkit-sharp/source/browse/JavaScriptExample/Form1.cs](https://code.google.com/p/open-webkit-sharp/source/browse/JavaScriptExample/Form1.cs)中的说明评估 javascript 。

实际上，如果实现支持 javascript 执行，那么即使不是所有的 DOM 操作，您也可以完成大部分操作。API 函数通常与 javascript 函数相同，并且大部分时间在内部调用完全相同的函数，尽管它们的起源无关。您的应用程序和 javascript 之间的通信可能没什么挑战性，但如果您可以阅读警报消息，那也可以解决。看起来这个库确实支持警报处理机制。[我在https://github.com/nhrdl/notesMD](https://github.com/nhrdl/notesMD)上写的一个工具将展示一些实现这种通信的例子，尽管它使用 GTK 版本并且是用 python 编写的。

顺便说一句，如果您知道元素的 id，那么 Document.GetElementById 将为您节省循环。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-06T05:03:30.087

```
webKitBrowser1.StringByEvaluatingJavaScriptFromString("var inpt = document.createElement(\"input\");    inpt.setAttribute(\"type\", \"submit\");    inpt.setAttribute(\"id\", \"nut\"); inpt.setAttribute(\"type\", \"submit\");    inpt.setAttribute(\"name\", \"tmp\");   inpt.setAttribute(\"value\", \"tmp\");  var element = document.getElementById(\"lnk\"); element.appendChild(inpt);");
                    webKitBrowser1.StringByEvaluatingJavaScriptFromString("document.getElementById('nut').click();"); 
```

# assembly - 32 位 MASM 程序初始化变量

> ID：16149598
> 
> 赞同：0
> 
> 时间：2013-04-22T14:25:42.323
> 
> 标签：assembly, 32-bit, masm

我正在编写一个 32 位 MASM 程序来执行大量算术运算。我只想在声明中初始化我的程序中的变量，例如 num 、 val 等。而且只有第一次。如何在不重新初始化变量的情况下进行大量算术运算？

前任：

```
num = 122             ; Initialize in declaration
val = 9               ; Initialize in declaration
res = val + num
cout << "res = " << res; 
```

-----------------------------**如何在不重新初始化 num 和 val 的情况下继续计算？？？**

```
num = 42
val = 100
val = val - num
cout << "val = " << val; 
```

所以在程序中只做一次：

```
num dword 122
val dword 9 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:21:13.667

我想到了。它很简单：

```
num dword 122                  ; Initialize num
val dword 9                    ; Initialize val 
```

* * *

```
mov num, 42                    ; NOW num = 42 
mov val, 100                   ; NOW val = 100 
```

感谢您的评论和回复！

# android - Google Maps v2 有时会在恢复应用程序时重置

> ID：16149601
> 
> 赞同：3
> 
> 时间：2013-04-22T14:25:49.987
> 
> 标签：android, google-maps-android-api-2

我在我的 Android 应用程序中使用 Google Maps v2。一切正常，但如果我离开应用程序（使用主页按钮），将设备用于其他内容，然后返回我的应用程序，地图只会自行重置并丢弃我的所有设置和侦听器。

我认为这是因为我的手机没有那么多内存，所以当它需要它来运行其他应用程序时，对我的应用程序至关重要的东西会丢失......如果我同时不使用其他应用程序，它会恢复所有设置和听众完好无损。

所以我有一个成员变量`private GoogleMap map = null;`

我需要以编程方式创建地图，因为我将它放入我还想用于其他片段的`LinearLayout`( ) 中。`fragment_wrapper`所以我在我的`onCreate()`方法中这样做：

```
mapFragment = MapFragment.newInstance();
FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
fragmentTransaction.add(R.id.fragment_wrapper, mapFragment);
fragmentTransaction.commit(); 
```

地图不会很快初始化，所以我需要在`onResume()`方法中设置它的设置和侦听器：

```
if (map == null) {  
    map = mapFragment.getMap();
    UiSettings settings = map.getUiSettings();
    settings.setMyLocationButtonEnabled(false);
    settings.setZoomControlsEnabled(false);
    (...)
    map.setOnMapClickListener((...));
    (...)
} 
```

我最初将*if*块放在那里，这样应用程序就不必在恢复时再次设置地图的设置和侦听器。但后来我注意到它忘记了设置。所以我想如果我删除了*if*块，它只会再次设置地图，因为`onResume()`在应用程序恢复时被调用。但它也不起作用......所以所有地图的设置和监听器都消失了，这使得地图无用，我的应用程序需要重新启动才能再次设置地图。

谁能告诉我问题可能是什么以及如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:57:45.933

我终于能够在 Google Maps v2 示例代码中找到解决方案，该代码位于`<android-sdk-folder>\extras\google\google_play_services\samples\maps\`. 请参阅[https://developers.google.com/maps/documentation/android/intro#sample_code](https://developers.google.com/maps/documentation/android/intro#sample_code)。帮助我的是文件`src\com\example\mapdemo\ProgrammaticDemoActivity.java`。

发生的事情是应用程序完全关闭，因此`onCreate()`再次调用了它的方法。在那里你必须以某种方式找出你是否已经创建了地图片段。解决方案是尝试找到地图片段的标签。如果找不到，则表示该活动是第一次运行。您创建片段并向其添加标签。然后下次`onCreate()`调用时，标签可以找到您的片段，并保留所有设置和侦听器。

例如，您可以在活动中设置最终静态变量：`private static final String MAP_FRAGMENT_TAG = "map";`

然后在您的`onCreate()`方法中使用此代码：

```
mapFragment = (MapFragment) getFragmentManager().findFragmentByTag(MAP_FRAGMENT_TAG);
if (mapFragment == null) {
    mapFragment = MapFragment.newInstance();
    FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
    fragmentTransaction.add(R.id.fragment_wrapper, mapFragment, MAP_FRAGMENT_TAG);
    fragmentTransaction.commit();
}
setUpMapIfNeeded(); 
```

这在`onResume()`方法中：

```
setUpMapIfNeeded(); 
```

该`setUpMapIfNeeded()`方法可能如下所示：

```
if (map == null) {
    map = mapFragment.getMap();
    if (map != null) {
        setUpMap();
    }
} 
```

（所以地图已经设置好`onCreate()`，如果没有，则设置在`onResume()`.）

希望这可以帮助某人。

# iphone - 导航控制器 iphone 和 didload 功能？

> ID：16149602
> 
> 赞同：1
> 
> 时间：2013-04-22T14:25:50.877
> 
> 标签：iphone, ios, objective-c

我创建了一个共享类，程序中的所有类都可以看到它，如果我更改这个共享类中的任何变量，所有类都可以看到这个变化。我使用导航控制器在视图控制器之间导航，并将一些代码放入`viewDidLoad`函数中，但是当我导航到视图控制器时，此代码仅调用一次。每次我导航到这个视图控制器时，我应该怎么做才能让这段代码运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T14:27:37.263

您可以将代码放入**viewWillAppear**或**viewDidAppear**

这些是您可以使用的事件：
– viewWillAppear：
– viewDidAppear：
– viewWillDisappear：
– viewDidDisappear：
– viewWillLayoutSubviews
– viewDidLayoutSubviews

# python - 如何覆盖 selenium 中默认的一组 chrome 命令行开关

> ID：16149610
> 
> 赞同：5
> 
> 时间：2013-04-22T14:26:33.070
> 
> 标签：python, selenium, selenium-webdriver, chromium

默认情况下，chrome 将使用以下命令行运行：

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe"
--disable-hang-monitor
--disable-prompt-on-repost
--dom-automation
--full-memory-crash-report
--no-default-browser-check
--no-first-run
--disable-background-networking
--disable-sync
--disable-translate
--disable-web-resources
--safebrowsing-disable-auto-update
--safebrowsing-disable-download-protection
--disable-client-side-phishing-detection
--disable-component-update
--disable-default-apps
--enable-logging
--log-level=1
--ignore-certificate-errors
--no-default-browser-check
--test-type=ui
--user-data-dir="C:\Users\nik\AppData\Local\Temp\scoped_dir1972_4232"
--testing-channel=ChromeTestingInterface:1972.1
--noerrdialogs
--metrics-recording-only
--enable-logging
--disable-zero-browsers-open-for-tests
--allow-file-access
--allow-file-access-from-files about:blank 
```

我需要覆盖（删除）所有命令`--disable-*`，因为没有等效的命令`--enable-*`。

最后，我想用这个命令行运行浏览器：

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe"    
--dom-automation
--full-memory-crash-report
--no-first-run
--safebrowsing-disable-auto-update
--safebrowsing-disable-download-protection
--enable-logging
--log-level=1
--ignore-certificate-errors
--test-type=ui
--user-data-dir="C:\Users\nik\AppData\Local\Temp\scoped_dir1972_4232"
--testing-channel=ChromeTestingInterface:1972.1
--noerrdialogs
--metrics-recording-only
--enable-logging
--allow-file-access
--allow-file-access-from-files about:blank 
```

例如，我尝试使用翻译信息栏运行浏览器。我找到了选项`--enable-translate`。

```
capabilities = DesiredCapabilities.CHROME.copy()
capabilities['chrome.switches'] = ['--enable-translate'] 
```

但这并没有帮助，信息栏没有出现。在命令行中，有两个命令：`--disable-translate`和`--enable-translate`。这是因为必须删除命令`--disable-default-apps`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T15:28:12.273

您应该**自己启动浏览器**，然后告诉 selenium，您已经通过**传递特殊通道 id**启动了它。像这样的东西：

```
from random import randrange
channel_id = "%032x" % randrange(16**32)

from subprocess import Popen
# HERE YOU PASS ONLY THOSE PARAMETERS YOU WANT (i.e. without --disable-*)
# BUT YOU MAY NEED --dom-automation FOR SOME ROUTINES
chrome = Popen(" ".join([
    PATH_TO_CHROME_EXE,
    "--no-first-run", "--dom-automation",
    ("--testing-channel=\"NamedTestingInterface:%s\"" % channel_id),
]))

try:
    from selenium.webdriver.chrome.service import Service
    chromedriver_server = Service(PATH_TO_CHROMEDRIVER, 0)
    chromedriver_server.start()
    from selenium.webdriver import Remote
    driver = Remote(chromedriver_server.service_url,
        {"chrome.channel": channel_id, "chrome.noWebsiteTestingDefaults": True})

    driver.get(MY_WEBPAGE)
    # DO YOUR WORK

finally:
    chromedriver_server.stop()
    driver.quit()

chrome.kill()
chrome.wait() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-15T16:27:37.947

假设您想在 Python 中执行此操作，您可以添加一个参数，`chromeOptions`以便它*不会*启用这些开关（有点混乱，但没关系）。

假设您要删除以下开关：

```
--disable-hang-monitor
--disable-prompt-on-repost
--disable-background-networking
--disable-sync
--disable-translate
--disable-web-resources
--disable-client-side-phishing-detection
--disable-component-update
--disable-default-apps
--disable-zero-browsers-open-for-tests 
```

您可以像这样设置您的 Chrome 驱动程序：

```
from selenium import webdriver

chromeOptions = webdriver.ChromeOptions()
chromeOptions.add_experimental_option(
    'excludeSwitches',
    ['disable-hang-monitor',
     'disable-prompt-on-repost',
     'disable-background-networking',
     'disable-sync',
     'disable-translate',
     'disable-web-resources',
     'disable-client-side-phishing-detection',
     'disable-component-update',
     'disable-default-apps',
     'disable-zero-browsers-open-for-tests'])

chromeDriver = webdriver.Chrome(chrome_options=chromeOptions) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-18T05:42:19.510

现在您可以使用该`excludeSwitches`属性。

```
 desiredCapabilities: {
        browserName: 'chrome',
        chromeOptions: {
            args: [],
            excludeSwitches: [ "disable-background-networking" ]
        }
    } 
```

请注意缺少“--”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-10T09:09:47.200

从 selenium 中自定义 Chrome 选项的官方方法：

```
 # renaming import in order to avoid collision with Options for other browsers, so that you can also use e.g.
    # from selenium.webdriver.firefox.options import Options as FirefoxOptions

    from selenium.webdriver.chrome.options import Options as ChromeOptions

    options = ChromeOptions()
    options.add_argument("--headless")
    options.add_argument('--disable-gpu')
    options.add_argument('--disable-dev-shm-usage')
    options.add_argument('--disable-extensions')
    options.add_argument('--no-sandbox')
    options.add_argument('window-size=1920,1080')

    # only necessary if you want to use a specific binary location
    # options.binary_location = '/Applications/Chromium.app/Contents/MacOS/Chromium'

    driver = webdriver.Chrome(chrome_options=options) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-15T00:17:32.637

我尝试按照 Nakilions 的回答（[https://stackoverflow.com/a/17429599/4240654](https://stackoverflow.com/a/17429599/4240654)），如下所示：

```
import subprocess 
chrome = subprocess.Popen(["/opt/google/chrome/chrome", "--no-first-run", "--dom-automation", "--testing-channel=NamedTestingInterface:e7379994e192097cde140d3ffd949c92"],  cwd="/")
from selenium.webdriver.chrome.service import Service
chromedriver_server = Service('/usr/lib/chromium-browser/chromedriver', 0)
chromedriver_server.start()
from selenium.webdriver import Remote
driver = Remote(chromedriver_server.service_url,
    {"chrome.channel": 'e7379994e192097cde140d3ffd949c92', "chrome.noWebsiteTestingDefaults": True}) 
```

我在 Python 解释器中运行了这一切。Chromedriver 窗口打开，但未显示“已同步”帐户和图标。这对我来说是必要的，因为我试图在要删除的谷歌语音消息上运行脚本，所以我必须登录。

我也尝试了两种标志方法：

```
from selenium import webdriver
chromeOptions = webdriver.ChromeOptions()
chromeOptions.add_experimental_option(
    'excludeSwitches',
    ['disable-hang-monitor',
     'dom-automation',
     'full-memory-crash-report',
     'no-default-browser-check',
     'no-first-run',
     'safebrowsing-disable-auto-update',
     'safebrowsing-disable-download-protection',
     'disable-component-update',
     'enable-logging',
     'log-level=1',
     'ignore-certificate-errors',
     'disable-prompt-on-repost',
     'disable-background-networking',
     'disable-sync',
     'disable-translate',
     'disable-web-resources',
     'disable-client-side-phishing-detection',
     'disable-component-update',
     'disable-default-apps',
     'disable-zero-browsers-open-for-tests'])

chromeDriver = webdriver.Chrome(chrome_options=chromeOptions)
chromeDriver.get("https://www.google.com/voice/b/1?gsessionid=adebrtbrt&pli=1#inbox/p89") 
```

# javascript - JS正则表达式多行

> ID：16149611
> 
> 赞同：2
> 
> 时间：2013-04-22T14:26:36.243
> 
> 标签：javascript, regex

这似乎有一个非常简单的答案，但我无法在任何地方找到它。我有一个非常大的正则表达式，如何在表达式本身中添加一些换行符，这样我就不必一直水平滚动代码来查看全部内容？

我通常不使用自动换行，而且我使用的 IDE 甚至都不提供它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:30:45.480

字符串中的换行符通常是行尾的 \ ：

```
var mystring "my string \
is on more \
than one line";

var re = new RegExp(mystring, "gim"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:39:35.853

您可以使用`RegExp`and`.join()`来转换和连接字符串。

```
var myRegExp = RegExp(['/^([a-zA-Z0-9_.-])+'
              ,'@([a-zA-Z0-9_.-])+'
              ,'\.([a-zA-Z])+([a-zA-Z])+/'].join('')); 
```

答案也已链接到这里。

[如何在 JavaScript 中将长正则表达式拆分为多行？](https://stackoverflow.com/questions/12317049/how-to-split-a-long-regular-expression-into-multiple-lines-in-javascript)

# python - 在 virtualenv Ubuntu 12.10 中使用 pip 安装 lxml 错误：命令“gcc”失败，退出状态为 4

> ID：16149613
> 
> 赞同：35
> 
> 时间：2013-04-22T14:26:41.773
> 
> 标签：python, django, gcc, lxml

尝试在 Ubuntu 12.10 x64 中将“pip install lxml”运行到 virtualenv 中时出现以下错误。我有 Python 2.7。

我在这里看到了关于相同问题的其他相关问题，并尝试安装 python-dev、libxml2-dev 和 libxslt1-dev。

请查看从我提示命令到发生错误的那一刻的回溯。

```
下载/解压lxml
  为包 lxml 运行 setup.py egg_info
    /usr/lib/python2.7/distutils/dist.py:267：用户警告：未知的分发选项：'bugtrack_url'
      警告。警告（味精）
    构建 lxml 版本 3.1.2。
    没有 Cython 的建筑。
    使用 libxslt 1.1.26 的构建配置
    在以下目录中针对 libxml2/libxslt 构建：/usr/lib

    警告：在目录 'src/lxml/tests' 下找不到匹配 '*.txt' 的文件
安装收集的包：lxml
  为 lxml 运行 setup.py install
    /usr/lib/python2.7/distutils/dist.py:267：用户警告：未知的分发选项：'bugtrack_url'
      警告。警告（味精）
    构建 lxml 版本 3.1.2。
    没有 Cython 的建筑。
    使用 libxslt 1.1.26 的构建配置
    在以下目录中针对 libxml2/libxslt 构建：/usr/lib
    构建“lxml.etree”扩展
    gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/libxml2 -I/home/admin/.virtualenvs/dev.actualito.com/build /lxml/src/lxml/includes -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-x86_64-2.7/src/lxml/lxml.etree.o
    src/lxml/lxml.etree.c：在函数'__pyx_f_4lxml_5etree__getFilenameForFile'中：
    src/lxml/lxml.etree.c:26851:7：警告：变量 '__pyx_clineno' 已设置但未使用 [-Wunused-but-set-variable]
    src/lxml/lxml.etree.c:26850:15：警告：变量 '__pyx_filename' 已设置但未使用 [-Wunused-but-set-variable]
    src/lxml/lxml.etree.c:26849:7：警告：变量 '__pyx_lineno' 已设置但未使用 [-Wunused-but-set-variable]
    src/lxml/lxml.etree.c：在函数'__pyx_pf_4lxml_5etree_4XSLT_18__call__'中：
    src/lxml/lxml.etree.c:138273:81：警告：从不兼容的指针类型传递“__pyx_f_4lxml_5etree_12_XSLTContext__copy”的参数 1 [默认启用]
    src/lxml/lxml.etree.c:136229:52：注意：预期的“struct __pyx_obj_4lxml_5etree__XSLTContext *”，但参数的类型为“struct __pyx_obj_4lxml_5etree__BaseContext *”
    src/lxml/lxml.etree.c：在函数'__pyx_f_4lxml_5etree__copyXSLT'中：
    src/lxml/lxml.etree.c:139667:79：警告：从不兼容的指针类型传递“__pyx_f_4lxml_5etree_12_XSLTContext__copy”的参数 1 [默认启用]
    src/lxml/lxml.etree.c:136229:52：注意：预期的“struct __pyx_obj_4lxml_5etree__XSLTContext *”，但参数的类型为“struct __pyx_obj_4lxml_5etree__BaseContext *”
    src/lxml/lxml.etree.c：在顶层：
    src/lxml/lxml.etree.c:12384:13：警告：“__pyx_f_4lxml_5etree_displayNode”已定义但未使用 [-Wunused-function]
    gcc：内部编译器错误：被杀死（程序 cc1）
    请提交完整的错误报告，
    如果合适，使用预处理的源。
    有关说明，请参阅。
    错误：命令“gcc”失败，退出状态为 4
    命令的完整输出 /home/admin/.virtualenvs/dev.actualito.com/bin/python -c "import setuptools;__file__='/home/admin/.virtualenvs/dev.actualito.com/build/lxml/setup. py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-asDtN5-记录/安装-record.txt --single-version-externally-managed --install-headers /home/admin/.virtualenvs/dev.actualito.com/include/site/python2.7：
    /usr/lib/python2.7/distutils/dist.py:267：用户警告：未知的分发选项：'bugtrack_url'

  警告。警告（味精）

构建 lxml 版本 3.1.2。

没有 Cython 的建筑。

使用 libxslt 1.1.26 的构建配置

在以下目录中针对 libxml2/libxslt 构建：/usr/lib

运行安装

运行构建

运行 build_py

复制 src/lxml/includes/lxml-version.h -> build/lib.linux-x86_64-2.7/lxml/includes

运行 build_ext

构建“lxml.etree”扩展

gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/libxml2 -I/home/admin/.virtualenvs/dev.actualito.com/build /lxml/src/lxml/includes -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-x86_64-2.7/src/lxml/lxml.etree.o

src/lxml/lxml.etree.c：在函数'__pyx_f_4lxml_5etree__getFilenameForFile'中：

src/lxml/lxml.etree.c:26851:7：警告：变量 '__pyx_clineno' 已设置但未使用 [-Wunused-but-set-variable]

src/lxml/lxml.etree.c:26850:15：警告：变量 '__pyx_filename' 已设置但未使用 [-Wunused-but-set-variable]

src/lxml/lxml.etree.c:26849:7：警告：变量 '__pyx_lineno' 已设置但未使用 [-Wunused-but-set-variable]

src/lxml/lxml.etree.c：在函数'__pyx_pf_4lxml_5etree_4XSLT_18__call__'中：

src/lxml/lxml.etree.c:138273:81：警告：从不兼容的指针类型传递“__pyx_f_4lxml_5etree_12_XSLTContext__copy”的参数 1 [默认启用]

src/lxml/lxml.etree.c:136229:52：注意：预期的“struct __pyx_obj_4lxml_5etree__XSLTContext *”，但参数的类型为“struct __pyx_obj_4lxml_5etree__BaseContext *”

src/lxml/lxml.etree.c：在函数'__pyx_f_4lxml_5etree__copyXSLT'中：

src/lxml/lxml.etree.c:139667:79：警告：从不兼容的指针类型传递“__pyx_f_4lxml_5etree_12_XSLTContext__copy”的参数 1 [默认启用]

src/lxml/lxml.etree.c:136229:52：注意：预期的“struct __pyx_obj_4lxml_5etree__XSLTContext *”，但参数的类型为“struct __pyx_obj_4lxml_5etree__BaseContext *”

src/lxml/lxml.etree.c：在顶层：

src/lxml/lxml.etree.c:12384:13：警告：“__pyx_f_4lxml_5etree_displayNode”已定义但未使用 [-Wunused-function]

gcc：内部编译器错误：被杀死（程序 cc1）

请提交完整的错误报告，

如果合适，使用预处理的源。

有关说明，请参阅。

错误：命令“gcc”失败，退出状态为 4

--------------------------------------
命令 /home/admin/.virtualenvs/dev.actualito.com/bin/python -c "import setuptools;__file__='/home/admin/.virtualenvs/dev.actualito.com/build/lxml/setup.py'; exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /tmp/pip-asDtN5-record/install -record.txt --single-version-externally-managed --install-headers /home/admin/.virtualenvs/dev.actualito.com/include/site/python2.7 失败，错误代码 1 在 /home/admin/ .virtualenvs/dev.actualito.com/build/lxml
在 /home/admin/.pip/pip.log 中存储完整的日志

```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-06-14T13:59:35.450

确保您有足够的内存。尝试`dmesg | tail`查看它是否输出如下内容：

```
...
[3778136.277570] Out of memory: Kill process 21267 (cc1) score 557 or sacrifice child
[3778136.277587] Killed process 21267 (cc1) total-vm:365836kB, anon-rss:336228kB, file-rss:0kB 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-22T15:14:33.433

这是我保存的笔记。

```
sudo apt-get install libxml2
sudo apt-get install libxslt1.1
sudo apt-get install libxml2-dev
sudo apt-get install libxslt1-dev
sudo apt-get install python-libxml2
sudo apt-get install python-libxslt1
sudo apt-get install python-dev
sudo apt-get install python-setuptools

easy_install lxml 
```

它适用于我的 ubuntu 12.10

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-04-07T12:20:17.937

根据 lxml 站点，您可以使用这样的构造：

```
CFLAGS="-O0"  pip install lxml 
```

[安装指南](http://lxml.de/installation.html)

*全局安装的注意事项：*使用 sudo 传递环境变量的正确方法是**after** `sudo`：

```
sudo CFLAGS="-O0" pip install lxml 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-07-03T07:21:58.290

今天早上我遇到了类似的问题（错误：命令'gcc'失败，退出状态为4）。看来您需要检查机器的内存。如果内存低于512M，可能是这个原因。尝试暂时关闭一些服务，如apache服务器，然后再次尝试“pip install lxml”。它可能会工作！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-25T17:12:00.800

我曾多次遇到过这个问题。

**简短的回答**

```
Python2: $ python2.7 setup.py clean build --with-cython install
Python3: $ pip-3.3 install lxml 
```

**长答案**

假设是`pip install lxml`，无论您使用的是 Python2 还是 Python3，它都应该适用于所有环境。

还`Cython`需要考虑：由于相关的性能提升，您肯定会喜欢`lxml`编译。`Cython`

由于我不知道的原因，Python2 上的编译找不到 Cython。为了更准确和绝对明确地说明这个问题，下面的两个命令都不使用 Cython：

```
# DO NOT use these commands. I repeat: DO NOT use these commands.
$ pip-2.7 install lxml
$ easy_install-2.7 install lxml 
```

因此，据我所知，在使用 Python2 时，您只有一种选择，那就是：从源代码编译，Luke！

```
# install build environment and dependencies
$ kernel_release=$( uname -r )
$ sudo apt-get install linux-headers-${kernel_release} build-essential -y
$ sudo apt-get install libxml2-dev libxslt1-dev -y

# Download from github and compile from sources
$ git clone --branch lxml-3.2.4 https://github.com/lxml/lxml
$ python2.7 setup.py clean build --with-cython install 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-15T11:48:20.283

对于 ubuntu 12.04 和虚拟环境：

```
sudo apt-get install libxml2-dev libxslt-dev
workon some-virt-env
pip install lxml 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-03-15T17:37:42.413

尝试通过设置 FLAGS 环境变量来禁用 C 编译器优化

```
CFLAGS="-O0"  pip install lxml 
```

这解决了我，而不需要更多的内存

# python - 考虑到 Mayavi 嵌入 wx 问题

> ID：16149615
> 
> 赞同：0
> 
> 时间：2013-04-22T14:26:47.593
> 
> 标签：python, python-2.7, wxpython, enthought, mayavi

起初我的运行系统：

我将存储库中的 Windows 8 Pro 和 Mayavi 4.3 与 Python 2.7.4 中的 wxPython 2.9.4.0 一起使用，但 EPD 包中的 mayavi 4.2.1 也有同样的问题......

当我尝试将 mayavi 嵌入到笔记本面板中时，我遇到了一些 UI 问题。即使在 mayavi 的演示文件中，我也得到了 mayavi 生成的外部帧的相同奇怪行为。

因此，使用设置按钮打开设置窗口。场景也会对我使用设置更改的参数做出反应。但是在点击 OK 或 Chanel 后，窗口并没有关闭。并且 python 会返回一些错误消息。当我通过实施 mlab.show_pipeline() 命令使用管道时，出现了类似的行为。

这种行为也可以在[enthought 网页的示例](http://docs.enthought.com/mayavi/mayavi/auto/example_wx_embedding.html#example-wx-embedding)中找到。

尝试在 enthougth 示例的设置框架中单击“确定”后，您可以在此处看到我的错误消息：

```
C:\my_directory\>python wx_embedding.py
C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\wx\toolkit.py:35: wxPyDeprecationWarning: Using deprecated class PySimpleApp.
 _app = wx.PySimpleApp()

wx_embedding.py:63: wxPyDeprecationWarning: Using deprecated class PySimpleApp.
app = wx.PySimpleApp()

Traceback (most recent call last): File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\wx\ui_live.py", line 360, in _on_ok
self.close( wx.ID_OK )

File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\wx\ui_live.py", line 320, in close

ui.finish()
File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\ui.py", line 264, in finish

self.reset( destroy = True )
File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\ui.py", line 304, in reset
editor.dispose()
File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\wx\instance_editor.py", line 208, in dispose
self._ui.dispose()

File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\ui.py", line 237, in dispose
self.finish()
File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\ui.py", line 264, in finish
self.reset( destroy = True )

File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\ui.py", line 318, in reset
toolkit().destroy_children( self.control )
File "C:\Python27\lib\site-packages\enthougth_development_mayavi_git\traitsui\traitsui\wx\toolkit.py", line 474, in destroy_children
control.DestroyChildren()

File "C:\Python27\lib\site-packages\wx-2.9.4-msw\wx\_core.py", line 9203, in DestroyChildren
return _core_.Window_DestroyChildren(*args, **kwargs)
wx._core.PyAssertionError: C++ assertion "GetEventHandler() == this" failed at .    .\..\src\common\wincmn.cpp(468) in wxWindowBase::~wxWindowBase(): any pushed event handlers must have been removed 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:56:04.127

Mayvi 与 wx 2.9 不兼容。

更多信息： https: [//support.enthought.com/entries/22601196-wxPython](https://support.enthought.com/entries/22601196-wxPython)

请使用 enpkg 恢复到 EPD 附带的 wx 2.8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:12:16.273

至少可以通过与此 PR 相关的更改来解决此特定异常：[https](https://github.com/enthought/traitsui/pull/108) ://github.com/enthought/traitsui/pull/108 。我还不知道 Mayavi 和堆栈的其余部分，但这种变化至少会让 traitsui 与 wxPython 2.9 一起工作。

# angularjs - angularjs 上的 $inject 注解

> ID：16149616
> 
> 赞同：0
> 
> 时间：2013-04-22T14:26:50.227
> 
> 标签：angularjs

我已经看到[Angular Seed](https://github.com/angular/angular-seed)在控制器引用上带有 $inject 注释，这意味着我可以用它声明控制器的依赖项。

[DI 文档](http://docs.angularjs.org/guide/di)显示构造函数需要与当前参数 os Controller 同步。

此外，在[本文档](http://docs.angularjs.org/tutorial/step_05)中，它显示了此注释的一种用法，在缩小的 JS 源代码中很有用。像这样：

```
var MyController = function(renamed$scope, renamedGreeter) {
  ...
}
MyController.$inject = ['$scope', 'greeter']; 
```

[我在这里](https://stackoverflow.com/questions/14361692/why-doesnt-appctrl-have-inject-but-myctrl1-does-in-this-angularjs-example)找到了解释。

所以，我的疑问是：

1.  这个注解还有其他用途吗？
2.  在非缩小的 JS 源上，不使用它有什么优点或缺点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:34:55.193

$inject 的目的是确保在您的代码被缩小时正确注入您的依赖项。

AngularJS中管理依赖的三种方式——AngularJS中的[DI](http://docs.angularjs.org/guide/dev_guide.services.managing_dependencies)

Array Notation 是我的首选方法，因为它比 $inject 方法更简单。

要回答您的具体问题：

1.  不，我不知道 $inject 的其他用途。
2.  如果您不使用链接文章中提到的前两种方法之一，那么如果有人缩小源代码，您的代码将无法运行。数组表示法很简单，它使您的代码与缩小器兼容，所以我不知道您为什么不使用它。

# c# - 列出 windows phone 上的文件

> ID：16149620
> 
> 赞同：0
> 
> 时间：2013-04-22T14:27:16.057
> 
> 标签：c#, windows-phone-7

我想列出我手机上的所有文件。

我的解决方案中有两个文件。一份数据库文件和一份pdf文件。

使用此代码，我只能列出数据库文件。如何使用独立存储列出 PDF 文件？

```
 using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
            {
                string searchPattern = "\\" + "*";
                string[] fileNames = store.GetFileNames(searchPattern);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:31:53.067

pdf 文件不是存储在隔离存储中，而是存储在您的 xap 中您无法枚举 xap 中的文件。

为了能够列出 PDF，您需要先将其复制到独立存储。（例如您的应用程序第一次运行时）

# c# - 以 Excel 为所有者的 Form.ShowDialog 速度很慢

> ID：16149621
> 
> 赞同：0
> 
> 时间：2013-04-22T14:27:25.513
> 
> 标签：c#, winforms, interop

我正在开发一个 Excel 加载项，并且我有一个表单（WinForms），我想成为模态并显示中心父级。我将 Excel 的句柄分配给 a `NativeWindow`，然后`owner`在调用`ShowDialog`. 看起来像这样：

```
NativeWindow excel = new NativeWindow();
excel.AssignHandle(new IntPtr(application.Hwnd)); // interop Excel app
MyWindow window = new Window();
window.ShowDialog(excel); 
```

到这里的调用`ShowDialog`大约需要 5 秒。如果我只是`ShowDialog`正常调用，所有其他代码都完好无损，它会立即出现——所以我有理由相信这是罪魁祸首。

我在这里做傻事吗？是否有我可以提前启动的事件或延迟加载（或 Excel 本身）？

# ios - 在 iOS 应用中检索和显示第三方 Facebook 状态

> ID：16149625
> 
> 赞同：0
> 
> 时间：2013-04-22T14:27:34.713
> 
> 标签：ios, facebook-graph-api, facebook-access-token

我是 Facebook 开发的新手，我遇到了麻烦，似乎这应该是一件容易的事。我正在为客户构建一个 iOS 应用程序，该客户希望在应用程序中显示他们最近的一些状态更新，以及指向他们 Facebook 页面的链接。这些状态应该显示给应用程序的用户，即使他们没有登录 Facebook 或没有在他们的设备上保存 Facebook 帐户。

到目前为止，我的研究似乎表明我需要使用用户访问令牌向 Graph API 发出请求（我可以使用从 Graph API Explorer 复制和粘贴的令牌在应用程序中成功地做到这一点），但似乎从应用程序中获取用户访问令牌的唯一方法是使用他们的帐户凭据将应用程序的用户登录到 Facebook。这不是一个好的解决方案，因为我需要能够向用户显示客户端的状态，无论他们是否已登录 Facebook 帐户。这样的事情有可能吗？如果有，怎么办？我一直在研究文档，但无论哪种方式都找不到确凿的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T04:45:46.947

我知道我们会以完全不同的方式处理它。我们将有自己的网络服务定期从谷歌获取我们需要的内容并将其存储在我们自己的服务器上，然后我们将使用 AFHTTPClient 将这些信息拉到我们的应用程序中。这样我们就不必用 FaceBook 欺骗任何东西或对我们的用户提出任何要求，例如登录 facebook。这将要求您拥有客户维护的服务（或者您可以轻松地签订合同以收取费用）。

# jquery - 设置文本字段的最大长度

> ID：16149630
> 
> 赞同：0
> 
> 时间：2013-04-22T14:27:59.897
> 
> 标签：jquery

我们可以使用以下行来更新所有带有属性的输入`maxlength="100"`

```
$("input").attr("maxlength", 100); 
```

我希望实现的是将`type="text"`maxlength unset 的输入更改为`maxlength=100`，有没有一种简单的方法可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:31:40.320

您可以使用[函数版本`.attr`](http://api.jquery.com/attr/#attr-attributeName-functionindex--attr)查看`maxlength`所有字段的现有属性，`input type="text"`如果旧值为“falsey”，则仅提供新值：

```
$('input:text').attr('maxlength', function(_, val) {
    return val ? val : 100;     // or return val || 100
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:29:35.973

您希望使用[:text 选择器](http://api.jquery.com/text-selector/)

```
$("input:text").filter(function (index) {
    return $(this).attr('maxlength') === 'undefined';
}).attr("maxlength", 100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:32:12.907

属性集：

```
$("input:text").attr("maxlength", 100); 
```

删除属性：

```
$("input:text").removeAttr("maxlength"); 
```

# r - 将行值放在具有相应名称的列中

> ID：16149641
> 
> 赞同：0
> 
> 时间：2013-04-22T14:28:51.313
> 
> 标签：r, match, reshape

我需要通过以下方式更改我的一些数据集。

我有一个面板数据集，其中包含作为标识符 (id) 的唯一公司 ID、观察年份（2002-2012 年）和一些具有相应年份值的公司变量（规模、营业额等）。它看起来有点像：

```
[ID] [year] [size] [turnover] ...
1    2002    14     1200
1    2003    15     1250
1    2004    17     1100
1    2005    18     1350
2    2004    10     5750
2    2005    11     6025
... 
```

我现在需要通过以下方式对其进行转换。

*   我为每个感兴趣的特征创建了一个自己的矩阵，其中每个公司（根据其 id）只有一行，并且每年在单独的列中对应的值。

*   应该提到的是，并非每个公司每年都在数据集中，因为它们可能成立较晚，已经关闭等，如示例所示。最后它应该看起来像下面这样（大小变量的例子）：

> ```
> [ID] [2002] [2003] [2004] [2005]
> 1    14     15     17     18
> 2    -      -      10     11 
> ```

到目前为止，我使用该`%in%`命令进行了尝试，但没有设法获得正确列中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:33:19.177

```
DF <- read.table(text="[ID] [year] [size] [turnover]
1    2002    14     1200
1    2003    15     1250
1    2004    17     1100
1    2005    18     1350
2    2004    10     5750
2    2005    11     6025",header=TRUE)

library(reshape2)
dcast(DF, X.ID.~X.year.,value.var="X.size.")
#   X.ID. 2002 2003 2004 2005
# 1     1   14   15   17   18
# 2     2   NA   NA   10   11 
```

# php - Symfony 1.2 - 返回 sfView::ERROR 重定向到 SUCCESS

> ID：16149642
> 
> 赞同：3
> 
> 时间：2013-04-22T14:28:52.210
> 
> 标签：php, model-view-controller, symfony1, symfony-1.2

我使用 Symfony 编写代码大约两年，但这是我第一次尝试使用`return sfView::ERROR`功能。

问题是，它不起作用。即使我的控制器看起来像：

```
public function executeSomething(){  

  return sfView::ERROR;

} 
```

我在`templates`目录下有两个文件：

```
somethingSuccess.php
somethingError.php 
```

它仍然显示`success`视图。

Symfony 版本是：`1.2`

更新：

这是我的调试日志的一部分：

```
57  Info PHPView    Render "sf_app_dir/modules/project/templates/somethingSuccess.php"
58  Info PHPView    Decorate content with "sf_app_dir/templates/clean.php"
59  Info PHPView    Render "sf_app_dir/templates/clean.php"
60  Info WebResponse    Send status "HTTP/1.1 200 OK"
61  Info WebResponse    Send header "Content-Type: text/html; charset=utf-8" 
```

即使我添加`return 'Blabla';`哪个应该`somethingBlabla.php`作为视图，或者至少产生错误，它仍然会得到`SUCCESS`.

# c++ - Qt 程序挂起（无响应）直到函数结束然后再次开始工作

> ID：16149643
> 
> 赞同：8
> 
> 时间：2013-04-22T14:28:59.253
> 
> 标签：c++, qt

我在 Qt 中有一个 UI 应用程序，我有几个函数可以运行返回数千个结果的大规模 SQL 查询。

当单击运行此查询的按钮时，UI 窗口会立即转到“无响应”，但是我可以从控制台输出中看到所有内容实际上仍在后台运行。一旦函数结束，数据就会按预期呈现，并且 UI 会再次响应并且功能齐全。

我知道这是因为该函数由于大量结果而循环了数千次，但我希望我可以放入一个随着搜索而进行的加载栏，而不是仅仅锁定窗口使它看起来像程序已经崩溃。AFAIK 我没有内存泄漏，所以有人有什么建议吗？

哦，我也认为它不是内存泄漏，因为当我单击该按钮时，任务管理器显示此进程仅使用了几 MB 内存，并且处理器也绝不会最大化

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:37:42.133

在应用程序中，有一个线程负责处理 UI 事件、消息，无论您想如何称呼它们。假设您有一个按钮单击事件。只要您不从回调函数返回，就不会触发其他 UI 事件（重新绘制、更新等）并且 UI 变得无响应。

为了缓解这种情况，您应该考虑在单独的线程中执行耗时的任务，一旦它们完成，相应地更新 UI。如果您需要在处理任务时阻止 UI，您可以禁用控件、显示弹出进度条等，但保持 UI 线程相对空闲以避免“无响应”问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T15:34:34.450

比使用线程更简单的解决方案是使用[QCoreApplication::processEvents()](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#processEvents)。如果您的代码是这样的：

```
void slowFunction()
{
    lostOfResults = makeSqlQuery(...); // quite fast
    for (r in lostOfResults)
        doSomethingWithResult(r); // one call is quite fast
} 
```

如果一个 SQL 查询或一个 doSomethingWithResult() 不需要太多时间，您可以使用 QCoreApplication::processEvents() 处理未决事件，如下所示：

```
void slowFunction()
{
    lostOfResults = makeSqlQuery(...);
    for (r in lostOfResults) 
    {
        doSomethingWithResult(r);
        QCoreApplication::processEvents();
    }
} 
```

现在处理了 GUI 事件并且程序不会冻结。但是，如果单独的 SQL 查询需要大量时间（几秒钟），这将无济于事。那么你应该考虑单独的线程。

# ios - ARC中“副本”的作用是什么

> ID：16149653
> 
> 赞同：8
> 
> 时间：2013-04-22T14:29:41.230
> 
> 标签：ios, objective-c, copy, automatic-ref-counting

`copy`ARC中关键字的作用是什么

我发现`copy`（关键字）可以在 ARC 中使用，而`retain`不能`release`使用。此外，ARC中的角色与MRC`copy`中的角色相同吗？`copy`如果是，是否`copy`会`retainCount`在 ARC 中 +1？

我看过关于 ARCHe 的 mike ash 博客说：

> 您需要显式复制您作为 id 参数传递的块：

```
 [myArray addObject: [^{ DoSomethingMagical(); } copy]]; 
```

但是当我测试这样的代码（不使用`copy`）时，它也运行良好。

```
NSArray *array = [[NSArray alloc] initWithObjects:^{NSLog(@"hahaha");}, nil];

[self test:[array objectAtIndex:0]];

- (void)test:(void (^)(void))completion
{
        completion();
} 
```

`copy`是不是表示作为类型使用时不需要阻塞`id`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:47:01.830

是的，`copy`ARC中的作用与`copy`MRR中的作用相同。

将`copy`调用`copyWithZone:`方法。当它发送给可变对象时，它会返回一个克隆的不可变对象，它的retainCount为1。当它发送给不可变对象时，它不会复制，它会返回对象本身，但retainCount +1。

所以当你在 ARC 中使用 copy 时，你可以这样使用：`object1 = [object2 copy];`ARC 会管理 的 retainCount `object1`，然后`object1`被 ARC 释放时，`object2`的 retainCount 会发生相应的变化。所以你不用担心内存。

关于作为参数传递时的`block`需要。`copy``id`

[苹果文件](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/Blocks/Articles/bxUsing.html)说：

> 通常，您不需要复制（或保留）块。仅当您希望在声明它的范围内销毁块后使用该块时，您才需要制作一份副本。复制将块移动到堆中

正如[ughoavgfhw 所说](https://stackoverflow.com/questions/6065963/do-i-have-to-retain-blocks-in-objective-c-for-ios/6065989#6065989)：

> 块与其他用于内存管理的对象类似，但并不相同。当创建访问局部变量的块时，它会在堆栈上创建。这意味着它仅在其范围存在时才有效。要保存此块以供以后使用，您必须将其复制到堆中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T14:48:25.953

复制就像名字所暗示的那样。它返回对象的副本。假设你有一个可变对象并且你有一个指向它的指针。然后你在代码中的其他地方引用它，ARC 会假设你想指向同一个对象并为你保留它。在这种情况下，如果您修改其中任何一个，都将反映所做的更改。如果你用 a 指向它，`copy`你会得到一个新对象，修改一个不会影响另一个：

```
NSMutableArray* objA = [NSMutableArray new];
NSMutableArray* objB = objA;
/* adding an object to either will be in both since they point to the same object*/
objB = [objA mutableCopy];
/*adding an object to one WILL NOT affect the other, they are different, distinct objects*/ 
```

在这里的文档中：

[http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1)

它提到当块被复制时，它们的所有 Objective-C 对象都会收到一个强引用，这样它们就不会在块执行之前退出范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:47:21.000

当您`copy`在 ARC 中使用时，它的作用与不使用 ARC 相同，即它创建接收副本的对象的副本（它在内存中创建一个新的对象实例），并创建`strong`与执行代码的对象的关系。
这意味着对象的副本现在的保留计数为 1，但这与 ARC 中的您无关，因为这是自动处理的。

# javascript - IE8中的jqGrid异步请求处理

> ID：16149656
> 
> 赞同：1
> 
> 时间：2013-04-22T14:29:45.403
> 
> 标签：javascript, internet-explorer, jquery, jqgrid

这是我在 jqGrid 中看到的问题，使用 jqGrid 版本 4.4.1

我有一个应用程序，它有两个选项卡，每个选项卡内容区域都包含一个 jqgrid。我为 gridurl、editurl 和其他属性提供了 REST web url 以将内容加载到网格中（loadonce=false，contentType=JSON）

当用户在这两个选项卡之间导航时，它只有 HTML 属性（在 HTML 正文的 DIV 元素中）被与当前/活动选项卡相关的新属性替换，这意味着我仍然拥有所有 javascript 组件和 ajax 调用活动在后台不考虑选项卡..（使用骨干路由器实现，使其本质上是一个单页应用程序）考虑到应用程序的上述行为，

*   当用户在当前选项卡尚未完全加载的情况下单击另一个选项卡时（这意味着 ajax 调用尚未完成），IE 会出现与 jqGrid 相关的错误，如下所示（从 IE 复制)

消息：未指定的错误。行：1438 字符：40 代码：0 URI：../assets/js/plugins/jqGrid.js

根据我的假设，这是因为在网格的 ajax 调用完成时，用于渲染网格的 DOM ELEMENT 不再存在（因为加载第二个选项卡正在删除以前的元素），我不确定如何当我使用 gridUrl、editUrl 属性直接将 ajax 与 jqGrid 一起使用时，我在 ajax 调用完成后检查网格是否存在！

我发现上述行为仅适用于 IE，并且我使用 IE8 ..（我在所有似乎都很好的浏览器中对其进行了测试）

任何有助于此的想法表示赞赏.. 非常感谢

# php - 使用 Twilio 获取短信发送者的电话号码

> ID：16149658
> 
> 赞同：2
> 
> 时间：2013-04-22T14:29:56.540
> 
> 标签：php, sms, twilio

我正在尝试检索向我的 Twilio 号码发送 SMS 的用户的电话号码，但我无法在我的程序中获取它。

我试过这些：

```
$message = $client->account->sms_messages->get("$Smssid");
$number = $message->From; 
```

但无论我尝试什么`$number`仍然是空白。我试图得到`$sid`, `sid`, `$SMSSid`. 没有什么。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:24:46.103

当用户向您发送 SMS 时，我们会向您的服务器发出 HTTP 请求。此 HTTP 请求包含有关 SMS 的信息，例如 From、To、Body 等。

要从 PHP 中的 HTTP 请求中检索“From”值，只需执行以下操作：

```
$from_number = $_REQUEST['From']; 
```

或者，您可以从 REST API 中检索它：

```
$message = $client->account->sms_messages->get($_REQUEST['SmsSid']) 
```

尽管这应该是不必要的，因为您需要的所有数据都应该在 HTTP 请求中。

# visual-studio-2010 - Intellisense 是否可以像在 Eclipse 中那样在未导入的命名空间中搜索类？

> ID：16149659
> 
> 赞同：15
> 
> 时间：2013-04-22T14:30:06.440
> 
> 标签：visual-studio-2010, visual-studio, intellisense

在 Eclipse 中，自动完成功能甚至适用于未使用的包或名称空间。这意味着如果我在一个包中有一个名为 DuckWrapper 的类，并且在一个没有导入包 DuckWrapper 的类中我按 ctrl+space，它将显示 DuckWrapper 并在必要时自动导入它的包。

然而，Visual Studio 不会在其自动完成中显示它，除非我首先将它添加到使用列表中。

那可以改变吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2020-01-21T11:07:49.873

This kind of feature exists in current version of Visual Studio 2019 but it is still experimental.

[![IntelliSense without this feature on](https://i.stack.imgur.com/ZH7Ad.png)](https://i.stack.imgur.com/ZH7Ad.png)

As you can see in the image above, you can't see the entity `Student` from the namespace Test2 that's in another project but if you click button in the bottom left corner of IntelliSense window, you will see this.

[![IntelliSense with this feature on](https://i.stack.imgur.com/kRFbt.png)](https://i.stack.imgur.com/kRFbt.png)

Upon accepting Student option that IntelliSense gives, all needed namespaces will automatically be added at the top of your file (or bellow all the existing using statements above the namespace name).

You can turn this option on/off in:

*   *Tools*
*   *Options*
*   *Text Editor*
*   *C#*
*   *IntelliSense*
*   *Check/Uncheck the last option 'Show items from unimported namespaces (experimental)*

EDIT: I embedded the images instead of just hyperlinking them.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-07-23T08:42:01.033

您可以使用 IntelliSense Extender Plugin。对于 Visual Studio 2017：

[https://marketplace.visualstudio.com/items?itemName=Dreamescaper.IntelliSenseExtender](https://marketplace.visualstudio.com/items?itemName=Dreamescaper.IntelliSenseExtender)

对于 VS 2019：

[https://marketplace.visualstudio.com/items?itemName=Dreamescaper.IntellisenseExtender2019](https://marketplace.visualstudio.com/items?itemName=Dreamescaper.IntellisenseExtender2019)

它包括解决方案中所有项目的类型以及所有引用包的类型。从 IntelliSense 中选择未导入的类型将自动导入该类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:20:10.373

这在 Visual Studio 的标准安装中无法更改，因此您需要安装扩展来添加该功能。提供此功能的一个常用扩展是[JetBrain 的 ReSharper](http://www.jetbrains.com/resharper/features/coding_assistance.html#Import_Symbol_Completion)。这是他们文档中的引用。

> 使用 Ctrl+Alt+Space 调用 Import Symbol Completion（以前称为 Type Name Completion）。与符号补全（仅补全在当前位置可访问的类型）不同，ReSharper 显示与指定前缀匹配的所有类型，无论它们属于哪个命名空间，并在必要时自动添加适当的命名空间导入指令。在 C# 代码文件中，Import Symbol Completion 在 dot 之后使用扩展方法工作，并放置必要的 using 指令。

![导入符号完成](https://i.stack.imgur.com/NAMdR.png)

# jquery - 使用 jquery 提交 HTML 表单

> ID：16149664
> 
> 赞同：1
> 
> 时间：2013-04-22T14:30:22.557
> 
> 标签：jquery, html, ajax, forms, submit

我把我的代码放在下面。它基本上有一个文本输入和一个“搜索”按钮（表单）。每当单击搜索按钮（提交表单）时，它必须转到 .submit 函数并执行所需的处理。

**HTML 代码：**

```
<form id="twittersearch" name="twittersearch" method="post" action="">
    <input name="twitterq" type="text" id="twitterq"/>
    <button type="submit" >Search</button>
</form>
<div id="twitter-results"></div> 
```

**jQuery代码：**

```
$(document).ready(function () {
    var twitterq = '';

    function displayTweet() {
        var i = 0;
        var limit = $("#twitter-results > div").size();
        var myInterval = window.setInterval(function () {
            var element = $("#twitter-results div:last-child");
            $("#twitter-results").prepend(element);
            element.fadeIn("slow");
            i++;
            if (i == limit) {
                window.setTimeout(function () {
                    clearInterval(myInterval);
                });
            }
        }, 20000);
    }

    $("form#twittersearch").submit(function () {
        twitterq = $('#twitterq').attr('value');
        $.ajax({
            type: "POST",
            url: "search.php",
            cache: false,
            data: "twitterq=" + twitterq,
            success: function (html) {
                $("#twitter-results").html(html);
                displayTweet();
            }
        });
        return false;
    });
}); 
```

我的问题是表单无法将输入 id= 的“值”发送`#twitterq`到 javascript .submit 函数。因此，var twitterq 具有值“未定义”。但是，如果我像这样手动设置输入的值：

```
<input name="twitterq" type="text" id="twitterq" value="something"/> 
```

var twitterq 现在获取值“某物”。可能是什么问题？

我是 javascript 和 jquery 的新手，所以如果这个问题有点愚蠢，我事先道歉，它已经困扰了我几个小时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:31:49.517

不要这样做：

```
twitterq = $('#twitterq').attr('value'); 
```

相反，请使用以下[`.val()`](http://api.jquery.com/val)方法：

```
twitterq = $('#twitterq').val(); 
```

# android - Sqllite 或共享首选项以保留更改

> ID：16149670
> 
> 赞同：0
> 
> 时间：2013-04-22T14:30:33.713
> 
> 标签：android

我有一个场景，点击一个按钮，我需要显示/隐藏一个`listView`. 我有一个`Activity`12 `ListViews`，如果用户隐藏 5 `listViews`，那么对于整个会话，直到他退出应用程序，活动应该只显示 5 `ListViews`。

在这种情况下，我将如何执行操作，我应该将检查的值保存在 sqllite 中并在每次用户打开该活动时读取它，还是应该采用其他方法。它将如何影响`application`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:38:49.277

你的要求太少了。因此，我建议您使用它，`SharedPreferences`因为它轻巧且易于使用，无需太多额外代码。

SQLIte 也很好，但在你的场景中它太麻烦了，因为你需要为此设置`SQLiteOpenHelper`和准备查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:35:49.877

使用 SQLite 数据库保存设置是相当随意的，更不用说相对慢了。我建议使用[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)类来存储设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:41:21.760

我认为非常简短的答案。

如果您的数据是**结构化**的，例如您想要存储整个对象，那么正确的方法是使用`SQLite`值得一提的是，这需要编写更多的源代码（实现 SQLiteOpenHelper 的子类和 CRUD 操作）。

但在你的情况下，我认为使用[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)就足够了。它提供了非常轻量级的解决方案，这将是一个技巧。

# java - JdbcTemplate 多个结果集

> ID：16149672
> 
> 赞同：7
> 
> 时间：2013-04-22T14:30:35.203
> 
> 标签：java, jdbc, spring-jdbc

我试图找到一种简单的方法来处理返回多个结果集的存储过程/SQL。我一直在使用该`SimpleJdbcOperations#queryForList()`方法，但是这只会将第一个结果集返回为`List<Map<String, Object>>`. 我需要能够获得多个结果集，理想情况下是 a `Collection`of`List<Map<String, Object>>`或其他东西。我正在编写的程序是一个中间件组件，所以我不知道 SQL 将是什么，也不知道结果集的形式。

我想我必须使用`JdbcOperations`可以让我访问更多方法的类，包括 `execute(CallableStatementCreator csc, CallableStatementCallback<T> action)`但现在我被卡住了。

```
 CallableStatementCallback<T> callback = new CallableStatementCallback<T>() {
       @Override
       public T doInCallableStatement(CallableStatement cs) throws SQLException, DataAccessException
       {
           boolean results = cs.execute(request);
           while(results)
           {
               ResultSet result = cs.getResultSet();
               results = cs.getMoreResults();
           }
           return null;
        }
}; 
```

不过，我不确定如何使用该方法，或者如何使用s`ResultSet`来获取我的泛型`List<Map<String, Object>>`s。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:54:37.017

我设法得到了一个`Set<ResultSet>`使用这个代码，

```
private Set<ResultSet> executeProcedure(final String sql)
{
    return jdbc.execute(new CallableStatementCreator() {
        @Override
        public CallableStatement createCallableStatement(Connection con) throws SQLException
        {
            return con.prepareCall(sql);
        }
    }, new CallableStatementCallback<Set<ResultSet>>() {
        @Override
        public Set<ResultSet> doInCallableStatement(CallableStatement cs) throws SQLException
        {
            Set<ResultSet> results = new HashSet<>();

            boolean resultsAvailable = cs.execute();

            while (resultsAvailable)
            {
                results.add(cs.getResultSet());
                resultsAvailable = cs.getMoreResults();
            }
            return results;
        }
    });
} 
```

只是想看看将 a 翻译`ResultSet`成`List<Map<String, Object>>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:57:55.173

您可以使用 resultSet.getMetaData() 方法来计算数据中的列：

```
ResultSetMetaData meta = resultSet.getMetaData();
int colcount = meta.getColumnCount();
for (int i = 1; i <= colcount; i++) 
{
    String name = meta.getColumnLabel(i); // This is the name of the column
    int type = meta.getColumnType(i);     // from java.sql.Types
   // Maybe add to a Map,List, etc...
} 
```

然后，您可以像其他评论者提到的那样通过 ResultSet 循环提取您需要的数据：

```
while (resultSet.hasNext())
{
     resultSet.next();
     // Find the columns you want to extract (via the above method maybe) and add to your row.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T10:01:18.370

我使用以下方法以以下形式获取 ResultSet 列表`List<Map<String, Object>>`

```
public List<List<Map<String, Object>>> executeProcedure(final String sql) {
        return jdbcTemplate.execute(new CallableStatementCreator() {
            @Override
            public CallableStatement createCallableStatement(Connection con) throws SQLException {
                return con.prepareCall(sql);
            }
        }, new CallableStatementCallback<List<List<Map<String, Object>>>>() {
            @Override
            public List<List<Map<String, Object>>> doInCallableStatement(CallableStatement cs) throws SQLException {
                boolean resultsAvailable = cs.execute();
                List<List<Map<String, Object>>> list = new ArrayList<List<Map<String, Object>>>();
                while (resultsAvailable) {
                    ResultSet resultSet = cs.getResultSet();
                    List<Map<String, Object>> subList = new ArrayList<Map<String, Object>>();
                    while (resultSet.next()) {
                        ResultSetMetaData meta = resultSet.getMetaData();
                        int colcount = meta.getColumnCount();
                        Map<String, Object> map = new HashMap<String, Object>();
                        for (int i = 1; i <= colcount; i++) {
                            String name = meta.getColumnLabel(i);
                            map.put(name, resultSet.getString(i));
                        }
                        subList.add(map);
                    }
                    list.add(subList);
                    resultsAvailable = cs.getMoreResults();
                }
                return list;
            }
        });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-25T01:46:33.407

在大多数情况下，此代码可能更易于使用：

```
Map<String,Object> resultSets = new JdbcTemplate(dataSource)
            .call(con -> con.prepareCall(query), new ArrayList<>()); 
```

# sql-server - 在 Join Query 中获取具有标识列的行索引

> ID：16149675
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:30:43.290
> 
> 标签：sql-server

我需要将左连接查询的结果添加到没有将其索引设置为标识的表中，但 int 仍然必须是唯一的。我的插入查询如下所示：

```
INSERT INTO Table1 (S.SubjectID, S.Subject, S.SubjectDescription, S.Status)
SELECT (Select MAX(SubjectID) FROM Table1) + ???? , N.Code, N.Literal, N.Trans
FROM  Table2 N LEFT JOIN Table1 S ON N.Code = S.Subject   
WHERE (N.Code IS NULL OR S.Subject IS NULL OR N.Trans = 'D') 
```

我哪里有？？？是我需要有一些递增值的地方，以便在插入 table1 时，ID 将是唯一的。

我不允许更改表格的结构，我只需要一些可以即时计算他的东西。

一如既往的帮助，非常感谢提示和参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:35:31.370

在大多数数据库中，您可以`row_number()`用于此目的。下面是一个 SQL Server 语法示例：

```
INSERT INTO Table1 (S.SubjectID, S.Subject, S.SubjectDescription, S.Status)
SELECT (Select MAX(SubjectID) FROM Table1) + row_number() over (order by (select NULL)) ,
       N.Code, N.Literal, N.Trans
FROM  Table2 N LEFT JOIN Table1 S ON N.Code = S.Subject   
WHERE (N.Code IS NULL OR S.Subject IS NULL OR N.Trans = 'D') 
```

# javascript - JavaScript 相等操作异常

> ID：16149676
> 
> 赞同：3
> 
> 时间：2013-04-22T14:30:44.770
> 
> 标签：javascript, string, operators, equality, equality-operator

我正在做一个关于难以理解的 JavaScript 代码的讲座，当然 JavaScript 的弱点是知道 == / === 会返回什么。我在堆栈中找到了这个很好的答案，它很好地涵盖了这个主题 - [JavaScript 比较中应该使用哪个等于运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use?answertab=votes#tab-top)

引起我注意的一件事（可能是因为我直到现在才意识到）是您可以使用字符串对象而不是原语，并且您会在您的条件下得到不同的结果 -

```
"abc" == new String("abc")    // true
"abc" === new String("abc")   // false 
```

我想对其进行测试，并使用字符串对象发现了一些不太直观的结果-

```
new String("abc") === new String("abc")    // false 
```

乃至

```
new String("abc") == new String("abc")   // false 
```

一开始我认为这是一个浏览器错误，但我在 chrome 和 Firefox 上都对其进行了测试。因此，如果有人可以分享更多信息，我会非常高兴，如何比较文字字符串和字符串对象是真实的，但比较两个“相等”的字符串对象是虚假的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:32:19.067

> 比较两个“相等”的字符串**对象**将是虚假的

我已经强调了上面的重要词。两个对象引用永远不会彼此相等，除非它们引用*完全相同的对象*。

您正在创建两个新的`String`. 这是两个独立的对象，即使它们确实具有相同的字符串值。

```
var s1 = new String("abc"),
    s2 = new String("abc");

s1 === s1; // true
s1 === s2; // false 
```

这在规范中通过[抽象相等算法](http://es5.github.com/#x11.9.3)和[严格相等算法](http://es5.github.com/#x11.9.6)中的以下行进行了总结：

> `true`如果*x*和*y*引用同一个对象，则返回。否则，返回`false`。

# roles - Episerver 中的角色组合

> ID：16149683
> 
> 赞同：1
> 
> 时间：2013-04-22T14:30:58.387
> 
> 标签：roles, episerver, episerver-6-r2

我有一个网站，我们的客户可以登录以查看他们自己的数据。每个客户只能看到他们自己的数据（当然），不同的用户可以访问一个客户的不同页面。此外 - 编辑必须查看所有数据。

我想根据角色设置访问权限，以确定用户是哪个客户的成员，以及用户可以访问哪些页面。

**团体：**

*   客户1角色
*   客户2角色
*   TicketViewer 角色
*   变更请求角色

**用户：**

*   Cust1_LowLevelUser。**角色**：*Customer1Role、TicketViewerRole*
*   Cust1_HighLevelUser**角色**：*Customer1Role、TicketViewRole、ChangeRequestRole*
*   Cust2_LowLevelUser。**角色**：*Customer2Role、TicketViewerRole*
*   Cust2_HighLevelUser**角色**：*Customer2Role、TicketViewRole、ChangeRequestRole*

**页面结构**

我们创建了一个页面树，每个客户都有自己的“根页面”，只能访问他们各自的角色。在该节点下方，我们创建数据特定页面的实例，这些页面具有基于用户角色和客户角色的访问权限。

```
Customer1 (Customer1Role)
  |--TicketsForCust1 (Customer1Role, TicketViewerRole)
  |--ChangeRequestsForCust1 (Customer1Role, ChangeRequestRole)
Customer2 (Customer2Role)
  |--TicketsForCust2 (Customer2Role, TicketViewerRole)
  |--ChangeRequestsForCust2 (Customer2Role, ChangeRequestRole) 
```

**燃烧的问题：**

我们如何防止用户**Cust2_HighLevelUser**看到`ChangeRequestsForCust1`？

EPiServer 仅检查是否有任何角色足以授予访问权限，并且由于用户属于**ChangeRequestRole**，因此无论客户特定角色如何，他们都将被授予访问权限。是否可以让 EPiServer 同时检查客户角色和页面角色？

还是我必须从另一个角度看待这个？如果您遇到此问题并以另一种方式解决，请告诉我。

对不起，很长的帖子，但希望我能明白我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T05:43:00.750

访问权限模型中没有拒绝标志，因此您需要使用该角色结构自己编写代码。

将代码添加到拒绝访问的模板基类，对于 PageTree 控件，您可以执行以下操作：

```
protected void NavSubPageTreeFilter(object sender, EPiServer.Filters.FilterEventArgs e)
{
    for (int i = e.Pages.Count - 1; i > -1; i--)
    {
        PageData pd = e.Pages[i];

        if (yourUser.IsInRole("blabla") && ... etc)
        {
            e.Pages.RemoveAt(i);
        }
    }
} 
```

# asp.net-mvc - 从 Ajax 调用填充 Webgrid

> ID：16149684
> 
> 赞同：1
> 
> 时间：2013-04-22T14:30:59.307
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

我在从 Ajax 调用中填充 Webgrid 时遇到问题。

我已经按照以下线程中所示的示例进行操作：[mvc3 populating bind webgrid from ajax](https://stackoverflow.com/questions/11351853/mvc-3-populate-bind-webgrid-form-ajax)然而，这并没有产生任何结果。

当我运行网站时，我总是收到消息：“错误：未定义”。

在调试代码时，我很确定问题在于返回的 PartialView 是问题所在，因为我在 ajax 成功方法中的数据对象没有填充数据。

以下是我的代码示例：

阿贾克斯调用：

```
$.fn.getCardResult = function (leerling, kaart) {
        $.ajax({
            type: "GET",
            url: '@Url.Action("GetResults","Kaarten")',
            data: { leerlingID: leerling, cardID: kaart },
            cache: false,
            success: function (data) {
                console.log(data);
                if (!data.ok) {
                    window.alert(' error : ' + data.message);
                }
                else {
                    $('#card').html(data);
                }
            }
        });
    } 
```

部分视图调用：

```
<div class="card-content" id="card">
    @{
        if(Model.Kaart != null && Model.Kaart.Count > 0)
        {
            @Html.Partial("_Kaarten")
        }
        else
        {
            @: Er zijn geen kaarten beschikbaar.
        }
    }
</div> 
```

局部视图：

```
@model List<ProjectCarrousel.Models.KaartenModel>

@{
    var grid = new WebGrid(source: Model,ajaxUpdateContainerId: "card",
        defaultSort: "Topicname");

    grid.GetHtml(
        tableStyle: "webgrid",
        columns: grid.Columns(
            grid.Column("Topicname", "Topic"),
            grid.Column("Taskname", "Taken"),
            grid.Column("Taskpoints", "Punten"),
            grid.Column("Grades", "Resultaat"),
            grid.Column("Date", "Datum"),
            grid.Column("Teachercode", "Paraaf Docent")
        )
    );
} 
```

控制器代码：

```
public ActionResult GetResults(int leerlingID, string cardID)
    {
        try
        {
            int Ovnumber = leerlingID;
            string CardId = cardID;

            List<KaartenModel> kaartlijst = new List<KaartenModel>();

            IEnumerable<topic> topics = _db.topic.Include("tasks.studenttotask").Where(i => i.CardID == CardId);
            foreach (topic topic in topics)
            {
                foreach (tasks task in topic.tasks)
                {
                    KaartenModel ka = new KaartenModel();

                    ka.Topicname = task.topic.Topicname;
                    ka.Taskname = task.Taskname;
                    ka.Taskpoints = task.Taskpoints;
                    ka.Ranks = task.Ranks;
                    ka.Date = task.studenttotask.Where(i => i.Ovnumber == Ovnumber).Select(d => d.Date).SingleOrDefault();
                    ka.Grades = task.studenttotask.Where(i => i.Ovnumber == Ovnumber).Select(d => d.Grades).SingleOrDefault();
                    ka.Teachercode = task.studenttotask.Where(i => i.Ovnumber == Ovnumber).Select(d => d.Teachercode).SingleOrDefault();
                    kaartlijst.Add(ka);
                }
            }

            KVM.Kaart = kaartlijst;

            return PartialView("_Kaarten", KVM.Kaart);

        }
        catch (Exception ex)
        {
            return Json(new { ok = false, message = ex.Message });
        }
    } 
```

如果有人可以提供帮助，将不胜感激。

***更新***

在摆弄了一下之后，我找到了一个对我有用的解决方案。下面是更新的 Ajax 调用的片段：

我找到的解决方案也是以另一种方式制作 Success 方法。这确保了局部视图正确渲染。下面是 Ajax 调用片段。

```
$.ajax({
    url: '@Url.Action("GetAjaxCall","Home")',
    contentType: 'application/html; charset=utf-8',
    type: 'GET',
    dataType: 'html',
    data: { id: id },
})
.success(function (result) {
     $('#sectionContents').html(result);
 })
 .error(function (xhr, status) {
     alert(xhr.responseText);
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:11:30.883

我找到的解决方案也是以另一种方式制作 Success 方法。这确保了局部视图正确渲染。下面是 Ajax 调用片段。

```
$.ajax({
    url: '@Url.Action("GetAjaxCall","Home")',
    contentType: 'application/html; charset=utf-8',
    type: 'GET',
    dataType: 'html',
    data: { id: id },
})
.success(function (result) {
     $('#sectionContents').html(result);
 })
 .error(function (xhr, status) {
     alert(xhr.responseText);
 }); 
```

# asp.net - RequiredFieldValidator 始终无效

> ID：16149685
> 
> 赞同：0
> 
> 时间：2013-04-22T14:31:00.990
> 
> 标签：asp.net, requiredfieldvalidator

我`RequiredFieldValidator`在表单上有三个控件（用于下拉菜单和文本框），即使用户输入数据，它们也总是使页面无效！

```
<div class="control-group">
            <asp:Label ID="HouseTypeLabel" runat="server" Text="Type of home" class="control-label asterisk" meta:resourcekey="HouseTypeLabelResource1"></asp:Label>
            <div class="controls">
                <asp:DropDownList ID="HouseType" runat="server" meta:resourcekey="HouseTypeResource1">
                    <asp:ListItem Value="" Text="please select" meta:resourcekey="ListItemResource1"></asp:ListItem>
                    <asp:ListItem Value="1" Text="rancher" meta:resourcekey="ListItemResource2"></asp:ListItem>
                    <asp:ListItem Value="2" Text="two-storey" meta:resourcekey="ListItemResource3"></asp:ListItem>
                    <asp:ListItem Value="3" Text="bi-level" meta:resourcekey="ListItemResource4"></asp:ListItem>
                    <asp:ListItem Value="4" Text="bungalow" meta:resourcekey="ListItemResource5"></asp:ListItem>
                    <asp:ListItem Value="5" Text="bungalow + basement" meta:resourcekey="ListItemResource6"></asp:ListItem>
                </asp:DropDownList>
                <p class="help-block">
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="HouseType" runat="server" EnableClientScript="False" ErrorMessage="Please indicate type of home" meta:resourcekey="RequiredFieldValidator1Resource1"></asp:RequiredFieldValidator>
                </p>
            </div>
</div>
<div class="control-group">
            <asp:Label ID="TotalBedroomsLabel" runat="server" Text="Total number of bedrooms" class="control-label asterisk" AssociatedControlID="TotalBedrooms" meta:resourcekey="TotalBedroomsLabelResource1"></asp:Label>
           <div class="controls">
              <asp:TextBox ID="TotalBedrooms" runat="server" class="input-xlarge" placeholder="" meta:resourcekey="TotalBedroomsResource1"></asp:TextBox>
            <p class="help-block">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator2" ControlToValidate="TotalBedrooms" EnableClientScript="False" runat="server" ErrorMessage="Please enter total number of bedrooms" meta:resourcekey="RequiredFieldValidator2Resource1"></asp:RequiredFieldValidator>
            </p>
          </div>
</div>
<div class="control-group">
            <asp:Label ID="TotalBathroomsLabel" runat="server" Text="Total number of bathrooms" class="control-label asterisk" AssociatedControlID="TotalBathrooms" meta:resourcekey="TotalBathroomsLabelResource1"></asp:Label>
           <div class="controls">
              <asp:TextBox ID="TotalBathrooms" runat="server" class="input-xlarge" placeholder="" meta:resourcekey="TotalBathroomsResource1"></asp:TextBox>
            <p class="help-block">
                <asp:RequiredFieldValidator ID="RequiredFieldValidator3" EnableClientScript="false" runat="server" ControlToValidate="TotalBathrooms" ErrorMessage="Please enter total number of bathrooms" meta:resourcekey="RequiredFieldValidator3Resource2"></asp:RequiredFieldValidator>
            </p>
          </div>
</div> 
```

因此，无论我输入数据还是不输入任何内容，当我单击提交按钮时，都会显示三个错误消息。

有任何想法吗？谢谢。

编辑：提交按钮在下面

```
<div class="control-group">
<!-- Button -->
<div class="controls">
    <asp:Button ID="SubmitButton" runat="server" Text="Save and Next" class="btn btn-info" meta:resourcekey="SubmitButtonResource1" OnClick="SubmitButton_Click" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T18:51:33.887

对于原始海报来说可能为时已晚，但万一其他人也有同样的问题：

我今天花了一个小时对为什么在 Visual Studio 2012 中看似正确的 RequiredFieldValidator 总是返回 false 感到沮丧。

我尝试重新启动 VS 并清理/重建，但没有任何效果。

最后，我重命名了目标 TextBox 控件的 ID，并将RequiredFieldValidator 指向了新名称。它立即起作用。

我想是那些 VS 的“功能”之一。

我猜在旧的RequiredFieldValidator 对象的自动生成代码中有些东西搞砸了，但我从来没有深入研究过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:36:31.513

您缺少`ValidationGroup`必填字段验证器的属性。

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator2"  
                            ControlToValidate="TotalBedrooms" 
                            runat="server" 
                            ErrorMessage="Please enter total number of  bedrooms" 
                            ValidationGroup="vgSave">      // add this for all your required field validators and also the button event that invokes them
</asp:RequiredFieldValidator> 
```

注意：添加`ValidationGroup`到所有必需的字段验证器以及调用它们的按钮事件。确保不要更改名称。对所有人保持相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T10:33:03.640

我有一个很像这样的问题，我有一个带有验证器和验证组的用户控件。

现在我把这个用户控件两次放在一个页面上，一次只显示一个..

这样做的结果是可见的 ValidationSummary 显示了来自两个控件的错误，因此即使当前可见的用户控件是有效的，它也会导致 ValidationSummary 中出现错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-07T03:37:24.973

更改这部分代码：

```
<asp:DropDownList ID="HouseType" runat="server" meta:resourcekey="HouseTypeResource1">
                    <asp:ListItem Value="" Text="please select" meta:resourcekey="ListItemResource1"></asp:ListItem>

          ....
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="HouseType" runat="server" EnableClientScript="False" ErrorMessage="Please indicate type of home" meta:resourcekey="RequiredFieldValidator1Resource1"></asp:RequiredFieldValidator> 
```

变成这样：

```
<asp:DropDownList ID="HouseType" runat="server" meta:resourcekey="HouseTypeResource1">
                    <asp:ListItem Value="-1" Text="please select" meta:resourcekey="ListItemResource1"></asp:ListItem>
                    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="HouseType" InitialValue="-1"  runat="server" EnableClientScript="False" ErrorMessage="Please indicate type of home" meta:resourcekey="RequiredFieldValidator1Resource1"></asp:RequiredFieldValidator> 
```

我认为您应该以默认值赋予价值。

```
<asp:ListItem Value="-1" Text="please select" meta:resourcekey="ListItemResource1"></asp:ListItem> 
```

所以突出显示这部分：**Value="-1"**

在 asp:RequiredFieldValidator 你应该把**InitialValue**

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="HouseType" InitialValue="-1"  runat="server" EnableClientScript="False" ErrorMessage="Please indicate type of home" meta:resourcekey="RequiredFieldValidator1Resource1"></asp:RequiredFieldValidator> 
```

重试，如果该答案不起作用，请告诉我。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T15:39:10.340

您应该尝试`EnableClientScript="false"`从您的 asp.net 标记中删除。

# php - 如何将网站从 cakephp 1.1 迁移到与 php 5.4 兼容的更新版本 cakephp

> ID：16149688
> 
> 赞同：0
> 
> 时间：2013-04-22T14:31:09.517
> 
> 标签：php, cakephp, migration

如何将使用**cakephp 1.1创建的站点迁移到与我的****PHP 版本 5.4.7**兼容的新版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:50:11.037

阅读所有迁移指南并相应升级： http: [//book.cakephp.org/2.0/en/appendices.html](http://book.cakephp.org/2.0/en/appendices.html)

您还可以利用[cakephp 的升级外壳](http://book.cakephp.org/2.0/en/console-and-shells/upgrade-shell.html)或[增强](https://github.com/dereuromark/upgrade)的外壳（不过，仅供专家使用）。

这应该可以升级。但是 1.1 到 2.3 仍然需要大量工作。

# grails - 为什么grails中的过滤器没有周围的拦截器

> ID：16149694
> 
> 赞同：0
> 
> 时间：2013-04-22T14:31:35.983
> 
> 标签：grails

似乎 grails 中的过滤器没有周围的拦截器。在 Spring 的情况下我们也有相同的情况。如果我们想按照 grails 格式实现它，那么最好的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:19:06.023

你可以稍微模仿一下。在`before`闭包中你可以检查请求、会话等，并决定是否继续进行常规调用。如果您愿意，您可以重定向或在过滤器中呈现响应，并返回`false`以指示不应调用控制器。

如果您想让控制器继续进行，您可以在`after`闭包中进行工作。您可以在闭包的请求范围内存储信息`before`（例如`request.currentRequestNumber = counter.incrementAndGet()`）并在闭包中检索它`after`（例如`int currentRequestNumber = request.currentRequestNumber`），利用使用属性访问来存储和检索请求属性。

但是，您不能“调用”控制器并检查其结果，并选择是发送该响应、修改它还是发送不同的响应。不过，您可能可以使用响应包装器来做到这一点，其中您有一个自定义编写器来捕获呈现的响应。

请注意，使用常规 servlet 过滤器（即实现`javax.servlet.Filter`并在 web.xml 中注册的类）具有更大的灵活性（但对 Grails/Groovy 的帮助更少）。

# android - Android：如何以百分比设置形状可绘制高度？

> ID：16149699
> 
> 赞同：6
> 
> 时间：2013-04-22T14:31:50.440
> 
> 标签：android, android-drawable, layer-list

在我的应用程序中，有多个具有不同高度的组件具有相同的渐变背景（我在图层列表中使用了多个形状和渐变项）。

但是在项目标签中，我必须在 50dip 中指定形状的高度，并且我想在多个具有百分比度量的 UI 组件中重用它。

我发现形状中不支持 weight 属性。那么是否有任何其他替代方法可以使其在不同大小的视图或任何百分比支持的方式下工作？

我想获得 XML 风格的解决方案。

图层列表看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android"
    >
    <item
        android:drawable="@drawable/green_horizontal_gradient"
        android:id="@+id/upper_gradient"
        />
    <item
        android:drawable="@drawable/half_overlay"
        android:id="@+id/lower_overlay"
        android:top="50dp"
        />
</layer-list> 
```

# css - 出现在其他元素后面的引导下拉菜单 - IE7

> ID：16149701
> 
> 赞同：56
> 
> 时间：2013-04-22T14:31:55.980
> 
> 标签：css, internet-explorer, twitter-bootstrap, internet-explorer-7

我正在使用 Bootstrap 2.3.1 [http://twitter.github.io/bootstrap/index.html](http://twitter.github.io/bootstrap/index.html)

所以我使用他们的“下拉菜单”类来创建一些简单的快速使用下拉菜单，但由于某种原因在**IE7**上它们出现在我网站上的文本和其他元素的后面。

**测试链接： http:** [//leongaban.com/_projects/defakto/CDS/](http://leongaban.com/_projects/defakto/CDS/)

我在我的 CSS 中添加了 z-index，但似乎仍然没有做任何事情，请帮忙！

```
.header .header-nav ul#nav-account ul.dropdown-menu,
.header .header-nav ul#nav-library ul.dropdown-menu {
    z-index: 10000;
} 
```

IE9、Chrome、FF 等现代不头痛的浏览器： ![在此处输入图像描述](https://i.stack.imgur.com/pH6DS.gif)

* * *

IE7 >:(
![在此处输入图像描述](https://i.stack.imgur.com/AzPvc.gif)

HTML

```
<div class="header-nav">

<ul id="nav-account" role="navigation" class="pull-right">

    <!-- Language Dropdown Button -->
    <li id="language-btn">
        <a href="#" id="drop1" class="dropdown-toggle" data-toggle="dropdown">English</a>
        <img src="img/header-small-down-arrow.png" alt="grey triangle"/><!-- <span class="grey_triangle"></span>-->

        <!-- Language Dropdown Menu-->
        <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">English</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Spanish</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">German</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Japanese</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Chinese</a></li>
        </ul>
    </li>

    <!-- User Dropdown Button -->
    <li id="account-btn">
        <a href="#" id="drop2" class="dropdown-toggle" data-toggle="dropdown">Logout</a>
        <img src="img/header-small-down-arrow.png" alt="grey triangle"/>
        <!-- <span class="grey_triangle"></span> -->

        <!-- User Dropdown Menu-->
        <ul class="dropdown-menu" role="menu" aria-labelledby="drop2">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://google.com">Logout</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#anotherAction">Account</a></li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-04-22T20:42:35.750

**它是一个[堆叠上下文](https://stackoverflow.com/questions/1287439/ie7-z-index-layering-issues)问题！**

即使您`z-index`在下拉列表中使用，它也仅与同一堆叠上下文中的元素相关。您需要将 a`z-index`和 a添加`position`到父元素才能使其正常工作。在这种情况下，我会推荐`header-top` `div`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-22T20:23:11.813

您只能[`z-index`](http://www.w3.org/wiki/CSS/Properties/z-index)在定位元素（相对、固定/绝对）上使用，因此请尝试添加：

```
.header .header-nav ul#nav-account ul.dropdown-menu,
.header .header-nav ul#nav-library ul.dropdown-menu {
    position: relative;
    z-index: 10000;
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-07-06T23:46:30.973

如果增加父元素的 z-index（如其他答案中所述）对您不起作用，则可能是父元素之一具有以下属性：

```
overflow: hidden; 
```

尝试将其更改为：

```
overflow: visible; 
```

看看它是否有效。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-10-02T07:15:13.190

只需将溢出设置为继承或可见。

它将解决问题。

`overflow: visible !important;`

> 它非常适合我

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-17T14:23:25.647

查看最新版本的 UI-Bootstrap 库中的“[追加到正文与内联示例](https://angular-ui.github.io/bootstrap/#/dropdown)”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-24T02:46:36.963

我在使用时也发生了同样的事情

```
overflow-x: hidden; 
```

在父元素上。不得不关掉它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-10T11:33:41.373

它通过添加菜单 CSS 来解决。

```
position: relative;
z-index: 10000; 
```

# rsa - 获取用于密码加密私钥的密码

> ID：16149702
> 
> 赞同：1
> 
> 时间：2013-04-22T14:31:58.230
> 
> 标签：rsa, private-key, encryption-symmetric, gnutls

我有一个用于 RSA 交换的私钥，受密码保护。我知道密码，所以我可以使用密钥，但是，我不知道使用哪个密码来做密码。

根据[此问题](https://stackoverflow.com/questions/1774469/how-does-the-rsa-private-key-passphrase-work-under-the-hood)的答案，我还有其他密钥，其中密码在解密密钥的标头中命名。但是，加密后的此密钥仅启动：

```
-----BEGIN ENCRYPTED PRIVATE KEY----- 
```

解密时：

```
-----BEGIN RSA PRIVATE KEY----- 
```

没有进一步的标题。

诸如`openssl rsa`gnutls 之类的工具`certtool -k`在给出密码时会解密密钥并提供有关公钥的信息，但不会说明用于密码的对称密码。

据推测，这些应用程序知道密码是什么，因为它们解密了密钥。有没有办法获取这些信息？如果我有密码的话，保守秘密似乎没有多大意义。

使用 gnutls API（但不是 openssl）的编程答案很好，但理想情况下我想知道现有的便携式工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:43:28.080

ASN.1 解码应该给你这样的东西：

```
 0:d=0  hl=4 l=1294 cons: SEQUENCE
    4:d=1  hl=2 l=  64 cons:  SEQUENCE
    6:d=2  hl=2 l=   9 prim:   OBJECT            :PBES2
   17:d=2  hl=2 l=  51 cons:   SEQUENCE
   19:d=3  hl=2 l=  27 cons:    SEQUENCE
   21:d=4  hl=2 l=   9 prim:     OBJECT            :PBKDF2
   32:d=4  hl=2 l=  14 cons:     SEQUENCE
   34:d=5  hl=2 l=   8 prim:      OCTET STRING
   44:d=5  hl=2 l=   2 prim:      INTEGER           :0800
   48:d=3  hl=2 l=  20 cons:    SEQUENCE
   50:d=4  hl=2 l=   8 prim:     OBJECT            :des-ede3-cbc
   60:d=4  hl=2 l=   8 prim:     OCTET STRING
   70:d=1  hl=4 l=1224 prim:  OCTET STRING 
```

IE。在此示例中，使用的是 des-ede3-cbc。这是您可以使用的在线/开源 ASN.1 解码器：

[phpseclib ASN.1 解码器](http://phpseclib.sourceforge.net/x509/asn1parse.php)

只需复制/粘贴您的数据并点击提交按钮！

`openssl asn1parse -inform PEM -in file.ext -i`如果您安装了 OpenSSL，您也可以通过 CLI 进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:54:50.727

使用 ASN.1 查看器之类的工具打开该文件（它们中的大多数也应该处理 base64 编码的数据，但可能您需要先处理 base64 解码的数据）。之后，您将获得（最有可能的）PKCS#8 包装的密钥，并且您将通过查看 OID 获得密码。

# java - 如何在 Java 中获取链表中元素的所有索引

> ID：16149703
> 
> 赞同：0
> 
> 时间：2013-04-22T14:32:03.873
> 
> 标签：java, linked-list

我有一个链接列表。我想为这个列表的每个位置 i 设置一个权重因子 p^i。然后我想获得列表元素的加权值作为这些因素的总和。

让我举个例子让事情变得具体。假设我的列表大小为 5，即它包含从索引 0 到索引 4 的元素。假设 p = 0.5（即 p = 1/2）。因此，位置 0 的权重因子是 p^0 = 1，位置 1 的权重因子是 p^1 = 0.5，位置 2 的权重因子是 p^2 = 0.25，位置 3 的权重因子是 p^3 = 0.125，最后是位置 4是 p^4 = 0.0625。

现在让我们假设我在列表中有以下项目，从位置 0 到位置 4（我给出了这些项目的 ID）： 4 | 4 | 5 | 4 | 5.因此，由于ID=4的item在0、1、3的位置，它的值应该是这些权重因子之和，即p^0 + p^1 + p^3 = 1 + 0.5 + 0.125 = 1.625。同样，对于 ID = 5 的项目，我们有 p^2 + p^4 = 0.25 + 0.0625 = 0.3125。

我的问题是：如何获取这些元素（ID 4 和 ID 5）在列表中的所有索引，以便将这些元素的值计算为与这些索引权重因子相关联的总和？indexOf(Object o) 返回列表中指定元素第一次出现的索引，我需要所有出现的索引。有什么建议吗？

**编辑：更新为几何递减的总和而不是增加**

我对我的代码进行了修改，而不是在我的列表（我称之为 window 并采用 Request 类型的对象）中有一个几何递增的总和以得到一个几何递减的总和。如果我有少量请求（例如 100 - 我在 Main 类的 main 方法中设置请求数 -编码）。但是，如果我使用例如 1000 个请求，则会收到错误消息：

```
 java.lang.IllegalArgumentException: n must be positive 
```

这指的是我的代码中的另一点：

```
if(reqToBeRemoved == null) {

    reqToBeRemoved = 
minKeyList.get((new Random(System.currentTimeMillis()).nextInt(minKeyList.size())));

} 
```

这是我的代码，我希望我在这里发布的内容有用（显然我不能在这里发布整个代码，我猜也不需要）：

```
public void doWindowLookup(Request request) {

    int index = 0;
    double sum = 0;
    double initVal = 0;

    for(Request r : window) {

        if(r.equals(request)) {

            if(index == 0) {

                initVal = 1;

            }

            else {

                request.weight = Math.pow(p, index);
                sum += request.weight;

            }

            request.weightedWinFreq = initVal - sum;

        }

        index++;
    }

    logger.info("TEST: Item: " + request.reqID + " has weightedWinFreq: " +
                 request.getWeightedWinFreq());

} 
```

这个错误信息是什么意思？哪个一般项目n应该是正数？？？我假设当我调用 random.nextInt() 时，我传递了一个零参数（如[线程“main”中的前一个线程异常所示 java.lang.IllegalArgumentException: n must be positive](https://stackoverflow.com/questions/4072594/exception-in-thread-main-java-lang-illegalargumentexception-n-must-be-positiv)），但这怎么可能，因为我的论点是minKeyList.size()?

（如果我的问题需要进一步澄清，请让我提供所需的信息。）

**编辑：关于我的问题的先前更新：这是我在程序的另一部分的错。考虑回答的问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:35:53.920

您始终可以手动遍历列表：

```
double weight = 0.0;
Object target = new Integer(4);
int index = 1;
for (Object elem : linkedList) {
    if (elem.equals(target)) {
        weight += Math.pow(p, index);
    }
    index++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:37:36.837

最好使用迭代器

```
 int n = 1;
    List<Integer> list = new LinkedList<Integer>(Arrays.asList(1, 2, 3, 1));
    ListIterator<Integer> it = list.listIterator();
    List<Integer> indexes = new ArrayList<Integer>();
    while (it.hasNext()) {
        if (it.next().equals(n)) {
            indexes.add(it.nextIndex() - 1);
        }
    }
    System.out.println(indexes); 
```

# maven - 有没有办法级联父 pom 的版本？

> ID：16149706
> 
> 赞同：3
> 
> 时间：2013-04-22T14:32:09.747
> 
> 标签：maven, maven-3

我有一个根 pom.xml，它充当多个子 pom.xml 文件的父级，如果您有一个或两个子 pom.xml 文件，那就太好了。我正在开发一个包含 50 多个子 pom.xml 文件的项目，并且同时发布了多个版本。一切都很好，直到我需要更新父 pom.xml 文件的版本，这可能很乏味。有没有办法将父 pom.xml 的版本级联到所有子 pom.xml 文件？

我的想法是在当前版本的父 pom.xml 中创建一个属性，但这不起作用。

**编辑**

这是我的孩子 pom.xml 文件中的一个示例：

```
<parent>
    <groupId>myGroup</groupId>
    <artifactId>myArtifactId</artifactId>
    <version>1.0</version>  <!-- This is the value that I would like to parameterize in my child pom.xmls -->
    <relativePath>../../pom.xml</relativePath>
</parent> 
```

顺便说一句，我正在使用 Maven 3.0.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:44:48.537

我假设你有这样的事情：

```
+--root (pom.xml)
     +--- module1 (pom.xml)
     +--- 
```

在根 pom.xml 中：

```
<project ..>

  <groupId>the.company.project</groupId>
  <artifactId>the-artifact</artifactId>
  <version>1.0-SNAPSHOT</version>
  ...
</project> 
```

而在孩子们中，您应该拥有：

```
<project ..>

  <parent>         
    <groupId>the.company.project</groupId>
    <artifactId>the-artifact</artifactId>
    <version>1.0-SNAPSHOT</version>
  </parent>

  <artifactId>the-artifact-child</artifactId>

</project> 
```

为此，您应该使用[maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)来处理 root 和 childs 中的版本更新。如果您不使用 maven-release-plugin，您可以使用可以处理相同事情的[versions-maven-plugin 。](http://mojo.codehaus.org/versions-maven-plugin/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T10:36:34.587

你可以这样做：

有一个聚合器 POM 项目，您可以在其中指定所有子模块，然后在此聚合器项目上运行此目标：

```
mvn versions:update-parent 
```

这将使用新的父版本更新所有子模块。

或者，您可以在每个版本之前使用相同的：准备子模块的目标，从而避免创建聚合器模块。

所以如果你想发布一个子模块，你只需运行这个目标：

```
mvn versions:update-parent release:prepare 
```

这将确保父级在准备发布之前使用新版本进行更新。

我在您的评论中读到您缺少 scm 标签。颠覆情况下的使用示例可能是：

```
<scm>
    <developerConnection>scm:svn:https://your.domain/scm/svn/yourModule/trunk/</developerConnection>
</scm>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-release-plugin</artifactId>
            <configuration>
                <tagBase>https://your.domain/scm/svn/yourModule/tags</tagBase>
            </configuration>
        </plugin> 
    </plugins>
</build> 
```

如果没有正确配置的 scm，Release 插件将无法工作。

如果您在 svn 存储库中遵循“主干、标签、分支”最佳实践，则无需在发布插件中配置 tagbase 标签，[请参阅此答案。](https://stackoverflow.com/a/26450262/1920149)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-28T13:37:39.943

我遇到了同样的问题，我所做的与目前所建议的略有不同。假设您的项目具有以下文件夹结构：

```
parent
+-- child1
     +-- child2_of_parent
     +-- child3_of_parent
+-- child4
     +-- child5_of_child4 
```

请注意，除此之外`child5_of_child4`，*所有*其他项目都将顶级项目作为父项目`parent`。这与文件夹结构无关。家长`pom.xml`：

```
<groupId>...</groupId>
<artifactId>...</artifactId>
<version>1.1-SNAPSHOT</version> 
```

`pom.xml`除此以外的所有孩子`child5_of_child4`都作为父母`child4`：

```
 <parent>
  <groupId>...</groupId>
  <artifactId>parent</artifactId>
  <version>1.1-SNAPSHOT</version>
  <relativePath>../parent</relativePath>
 </parent> 
```

您转到父目录并将其版本从 version 从 更改`1.1-SNAPSHOT`为`1.2-SNAPSHOT`。然后你做（更多细节[在这里](http://www.mojohaus.org/versions-maven-plugin/update-child-modules-mojo.html)）：

```
mvn versions:update-child-modules 
```

由于这不是递归的，它仅适用于您父项目的直接子项目。换句话说，所有子模块都将更新为指向父模块，`1.2-SNAPSHOT`除了`child5_of_child4`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T14:44:29.560

在您的孩子 pom.xml 中：

```
<parent>
    <groupId>groupId</groupId>
    <artifactId>parent.artifactId</artifactId>
    <version>version</version>
    <relativePath>../parent-pom</relativePath>
 </parent>
 <artifactId>child.artifactId</artifactId> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T15:39:17.440

只是不要将版本放在子 poms 中。它是自动继承的。如果您在那里编辑，它将在 Eclipse 插件中显示为警告。

# ios - 模态过渡动画之前的自定义视图

> ID：16149709
> 
> 赞同：0
> 
> 时间：2013-04-22T14:32:13.987
> 
> 标签：ios, animation, storyboard, customization, uistoryboardsegue

我有一个我无法理解的问题。我知道加载 .xib 时会调用 viewDidLoad 方法，此时您可以自定义 IBOutlet 对象。好吧，我的问题在于，当此动画正确完成视图显示时，两个视图之间的模态翻转板转换显示目标视图而无需任何自定义。

我在 viewDidLoad 方法中做了一些自定义（标签中的自定义字体并在任何视图中设置背景颜色）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self setupTimeViews];
    [self setupDistanceViews];

    [self animationToColor:[UIColor randomColor] animated:NO];
} 
```

我如何在动画开始之前自定义我的 IBOutlets？

更新：

当我尝试绕过视图角落时，我发现问题发生了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:34:36.290

viewDidLoad 方法仅在视图加载到内存后调用，这有时可能会很晚才能执行 UI 自定义。

尝试在此方法中进行 UI 自定义，`-(void)awakeFromNib`一旦 nib 未归档并且所有插座都已连接，则调用此方法。这是修改 UI 组件最安全的地方。

来自苹果文档

> **awakeFromNib**消息会发送到从存档加载的每个对象，但前提是它可以响应该消息，并且只有在存档中的所有对象都已加载和初始化之后。当一个对象收到一个 awakeFromNib 消息时，它保证设置了它的所有出口实例变量。

# php - 验证错误/边界数据

> ID：16149711
> 
> 赞同：1
> 
> 时间：2013-04-22T14:32:25.277
> 
> 标签：php, javascript, forms, validation

我正在使用它来检查提交时是否已将数据输入到表单中：

```
else if(document.getElementById('fname').value.replace(/^\s+|\s+$/g, '').length == 0) {
    alert('Please Insert your first name.');
    return false;
} else if(document.getElementById('lname').value.replace(/^\s+|\s+$/g, '').length == 0) {
     alert('Please Insert your last name.');
     return false;  
} 
```

我希望它检查是否没有输入任何数字，并且它不超过 10 个字符。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:39:01.757

**检查文本中的数字**

```
// Check given string contain number or not
// Return true is string contain number otherwise false
function containNumbers(text) {
    return /\d/.test(text);
}

if(containNumbers(document.getElementById("fname").value)) { 
      alert('Text contain number'); 
} 
```

**长度限制**

```
// Check text length
if (document.getElementById("fname").value.length >10 ) {

      // Validation code
} 
```

**对于非数字和长度**

```
var first_name = document.getElementById("fname").value;
   if (first_name.length >10 || containNumbers(first_name)) {

             // Validation code
   } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T14:44:58.033

要检查输入的数字是否为数字，请执行以下操作：

```
// first, normalize your parameters (trimming in this case):
var lname = document.getElementById('lname').value.replace(/^\s+|\s+$/g, '');

if ( typeof lname == "number" ) {
    // its a number... float or int
}
if ( lname.length < 10 ) {
    // its too short...
}
if ( lname.length > 100 ) {
    // its too long...
}
// etc 
```

# javascript - 正则表达式和 unicode

> ID：16149712
> 
> 赞同：1
> 
> 时间：2013-04-22T14:32:25.377
> 
> 标签：javascript, regex, unicode, match

我正在尝试使用 JavaScript 验证这个正则表达式。我需要它做的是检查是否输入了至少 2 个单词。我所说的单词是指除了某些特定字符之外的任何字符的字符串。一切都很好，直到我用一个特殊的 unicode 字符结束一个字符串，比如“ā”。然后表达式无法验证。目前，表达式看起来像这样 - `/^([^<>\\\/\?&{};#{}\+\*()"=%@,:0-9]{1,}\w){2,}$/i`

在这种情况下如何验证 unicode 表达式有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:12:06.843

在大多数编程语言上，你会尝试这个 Unicode Regex：

```
/^([^<>\\\/\?&{};#{}\+\*()"=%@,:0-9\s]{1,}\p{L}){2,}$/ims 
```

或者像这样

```
/^([^\P]{1,}\p{L}){2,}$/ims 
```

但是，JS 并不那么容易支持 Unicode :(

例如，请参见此处：[Javascript + Unicode 正则表达式](https://stackoverflow.com/questions/280712/javascript-unicode)

# bash - BASH：在特定位置插入文本

> ID：16149721
> 
> 赞同：1
> 
> 时间：2013-04-22T14:32:47.767
> 
> 标签：bash, text, grep

我想找到一个在字符串中添加一些字符的解决方案

例子

```
folder/dir/directory/file.txt
shares/page.html
etc/downloads/torrent.torrent 
```

应该成为

```
.folder.old/dir/directory/file.txt
.shares.old/page.html
.etc.old/downloads/torrent.torrent 
```

我怎样才能做到这一点？'grep' 会是正确的选择吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:36:10.387

使用`sed`代替`grep`：

```
sed -i.bak 's#^\([^/]*\)#.\1.old#' 
```

请注意，这`-i`会将结果保存在原始文件本身中。`-i.bak`将保存带有`.bak`扩展名的原始文件，以防出现问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T14:39:06.987

`grep`仅搜索，不进行替换。你想要`sed`：

```
sed -i.bak 's#^\([^/]*\)#.\1.old#' 
```

`^`表示该行的开头
`\(...\)`正在捕获括号，它匹配的模式成为`\1`替换。
`[^/]`匹配除`/`
`*`前面的零个或多个 之外的任何内容

# ocaml - Ocaml 编程，示例

> ID：16149726
> 
> 赞同：-2
> 
> 时间：2013-04-22T14:32:54.227
> 
> 标签：ocaml

需要帮忙！！

定义函数“Is_member”，第一个参数是给定的矩阵，第二个参数是 x: int。检查元素 x 是否在 matrix1 中。

```
val Is_member: int list list -> int -> bool = <fun> 
```

例子：

```
#let matrix1 = [[1; 2]; [3; 4]];;
#val matrix1 : int list list = [[1; 2]; [3; 4]]

# Is_member matrix1 3;;
- : bool = true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:49:36.013

我可以将您的问题简化为`just fill blank spaces`：

```
# matrix1;;
- : int list list = [[1; 2]; [3; 4]]
# is_member 1 matrix1;;
- : bool = true
# let is_member x xs = List.____ (fun acc xs -> acc ____ (List.____ x xs)) false xs;;
val is_member : 'a -> 'a list list -> bool = <fun> 
```

现在对你来说很容易！

# c# - 验证数字范围 1300 到 1500 的输入？（使用正则表达式或其他常用方法。）

> ID：16149727
> 
> 赞同：1
> 
> 时间：2013-04-22T14:32:56.107
> 
> 标签：c#, .net, regex, winforms, string-parsing

我想验证用户输入字符串的数字范围从**1300 到 1500**。

我试过了`Regex regxUsrInput = new Regex(@"^(?:[1-9]|1|3[0-9]|0[0-9]|0[0-9]|1500)$");`

..但这并不能验证我预期的方式。

我愿意接受任何建议，包括替代方案。谢谢

如果重要：我的应用程序是用**C#**编写的**Windows 窗体**应用程序。用户输入来自标准**TextBox Control**。

 ***** * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T14:35:11.927

你为什么要使用`Regex`？这个简单的方法怎么样：

```
int value;
if(int.TryParse(yourTexbox.Text, out value))
{
    if(1300 < value && value < 1500)
    {
        //your code
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T14:37:35.220

注意：不要那样做。但方法如下：

```
^1([34]\d{2}|500)$ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T14:39:57.247

根据[Regex_For_Range](http://utilitymill.com/utility/Regex_For_Range)生成器，您的正则表达式应该是：

`^1([34][0-9]{2}|500)$`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T14:38:36.990

其他答案指出您不需要正则表达式，但是-为了完整起见-如果您真的想这样做，请尝试以下操作：

```
@"^1([34][0-9][0-9]|500)$" 
```****

# jqgrid - 分组时忽略大小写

> ID：16149731
> 
> 赞同：1
> 
> 时间：2013-04-22T14:33:16.873
> 
> 标签：jqgrid

有没有办法告诉 jqGrid 在分组时忽略大小写？我不想更改数据，因为有些是大写的，有些是小写的，有些是混合大小写的。

我正在使用 jqGrid 4.4.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:07:57.420

这个问题很好，但是...... jqGrid 中的当前分组实现只允许对**精确**值进行分组。我记得当一个人想按月而不是按确切日期分组时，有严格的要求。

在对 jqGrid 的源代码进行了一些分析之后，我希望我找到了一种非常简单且非常灵活的方式来进行更灵活的分组。我建议修改[线路](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.grouping.js#L109)

```
if( typeof v !== "object" && grp.lastvalues[i] !== v ) { 
```

至

```
if (typeof v !== "object" &&
        ($.isFunction(grp.isInTheSameGroup) ?
            !grp.isInTheSameGroup(grp.lastvalues[i], v) :
            grp.lastvalues[i] !== v)) { 
```

在此之后可以定义`isInTheSameGroup`函数内部`groupingView`：

```
grouping: true,
groupingView: {
    ...
    groupField: ["name"], // the column by which we group
    isInTheSameGroup: function (x, y) {
        return String(x).toLowerCase() === String(y).toLowerCase();
    }
} 
```

[该演示](http://www.ok-soft-gmbh.com/jqGrid/NotExactGrouping.htm)显示以下结果：

![在此处输入图像描述](https://i.stack.imgur.com/vMjnh.png)

我在演示修改版中使用`jquery.jqGrid.src.js`了jqGrid 4.4.5。`jquery.jqGrid.src.js`jqGrid 4.4.4的版本以相同的方式修改，您可以在[此处](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.4/js/jquery.jqGrid.src-groupping.js)找到。

我稍后会将我的建议发布给 trirand。我希望 jqGrid 的下一个版本将包含该功能。

**更新**：按照承诺，我向 trirand发布[了相应的功能请求。](http://www.trirand.com/blog/?page_id=393/feature-request/not-exact-grouping-case-insensitive-or-grouping-by-intervals-of-values/#p28707)

**更新 2**：我发布[了拉取请求](https://github.com/tonytomov/jqGrid/pull/452)，对 jqGrid 的分组模块进行了更多更改。[该演示](http://www.ok-soft-gmbh.com/jqGrid/NotExactGrouping1.htm)演示了如何使用新功能。它使用 2 级分组并显示以下结果：

![在此处输入图像描述](https://i.stack.imgur.com/Rhrly.png)

**更新 3**：我发送给 trirand[的拉取请求](https://github.com/tonytomov/jqGrid/pull/452)现在合并到 jqGrid 的主代码中。`isInTheSameGroup`所以jqGrid 的下一个版本（4.4.5 之后）将`formatDisplayField`支持`groupingView`. 如果你的情况看起来像

```
groupingView: {
    groupField: ['name'],
    formatDisplayField: [
        function (displayValue) { //, value, cm, index, grp) {
            return String(displayValue).toLowerCase();
        }
    ],
    groupColumnShow: [true],
    groupDataSorted: true,
    isInTheSameGroup: [
        function (x, y) {
            return String(x).toLowerCase() === String(y).toLowerCase();
        }
    ]
} 
```

回调`isInTheSameGroup[0]`和`formatDisplayField[0]`将通过分组来使用`groupField[0]`。因为 jqGrid 支持多级分组，`isInTheSameGrou`并且`formatDisplayField`属性是回调函数的数组，而不仅仅是回调函数。

在分组**jqGrid**开始时按分组列对数据进行排序。可以使用`sorttype`定义为函数来自定义第一步（见[答案](https://stackoverflow.com/a/16221518/315935)）。我不知道在写你的答案过程中的步骤。可能使用`sorttype: function (cellvalue) {return String(cellvalue).toLowerCase();}`已经可以解决您的问题。

然后该函数`isInTheSameGroup[level]`将用于将前一行的分组列的值与当前行的相应值进行比较。该函数`isInTheSameGroup[level]`将使用这些值调用。如果您的回调返回`true`，则该行将与前一个分组。

回调`formatDisplayField[level]`允许自定义分组标题中显示的信息。在上面的示例中，我将数据转换为小写。

# c# - Silverlight APP中如何将sql server 2012的数据绑定到datagrid

> ID：16149734
> 
> 赞同：0
> 
> 时间：2013-04-22T14:33:29.643
> 
> 标签：c#, sql-server, silverlight, data-binding

我正在尝试在 SilverLight 应用程序上为 SQL Server 2012 中的数据库投标数据。但是，当我在第 16 步为初学者学习本教程时，我找不到我的“上下文”（教程中的“OrganizationContext”）来从我的数据库中获取数据。

这是那个教程： [http ://code.msdn.microsoft.com/silverlight/Getting-Started-WCF-RIA-1469cbe2](http://code.msdn.microsoft.com/silverlight/Getting-Started-WCF-RIA-1469cbe2)

我不知道从我的数据库生成的代码在我的项目中的什么位置。我试图在本教程的示例中找到“上下文”，它在示例的 HRapp.Web.g.cs 文件中定义，我无法在窗口资源管理器的项目文件夹中找到它。

请有人告诉我如何让我的“上下文”从数据库中获取数据，或者给我一个提示/指南，将数据从 SQL2012 数据库绑定到 SilverLight 中的数据网格。

P/s：我的英语很差。请原谅我。我尝试了很多教程，但没有一个指导我如何在 SilverLight App 中绑定 SQL2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:37:27.673

所以这是一个带图片的例子：

为了找到使用您的数据上下文类，您必须如上所述，添加对包含您的 edmx 文件的项目的引用。在下图中，我的 edmx 文件在 EF 文件夹下的 BOS.Model 项目中。

然后，在我的 Web 服务上，我将添加对该项目和文件夹的引用，如下图左侧所示。

![edmx 文件位置](https://i.stack.imgur.com/7JykP.png)

有了这个参考，我可以创建一个这样的数据上下文：

```
var context = new BOSEntities() 
```

`BosEntities`当我映射我的数据库时，Entity Framework 会自动创建该类。

如果你想知道这个类对你的项目来说是什么，只需单击你的 edmx 文件将其打开，右键单击图表中的任何空白区域，然后单击属性。

您的类的名称将显示在 Entity Container Name 属性中，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/h7CeH.png)

# php - xampp - 当 html 文件的一部分时，php 不会被解释

> ID：16149740
> 
> 赞同：1
> 
> 时间：2013-04-22T14:33:46.803
> 
> 标签：php, xampp

使用 xampp 并遇到一些问题。当我将一段 php 代码放入它自己的带有 php 扩展名的文件中并通过 localhost 运行它时，它就可以工作了。当我将 php 嵌入到带有 html 扩展名的文件中并运行时，似乎 php 没有被解释，而是完全被忽略了。是否有一个 xampp 配置选项可以禁用在 javascript 或 html 文件中解释 php？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:47:34.033

假设您已将 xampp 安装在 C 的根目录（默认位置）...

我不会真的推荐它，因为它会在实际 HTML 文件上增加不必要的开销，但你可以这样做......`C:/xampp/apache/conf/extra/httpd-xampp.conf`你应该会看到如下所示的内容：

```
#
# PHP-Module setup
#
LoadFile "C:/xampp/php/php5ts.dll"
LoadModule php5_module "C:/xampp/php/php5apache2_4.dll"

<FilesMatch "\.php$">
    SetHandler application/x-httpd-php
</FilesMatch>
<FilesMatch "\.phps$">
    SetHandler application/x-httpd-php-source
</FilesMatch> 
```

您*可以*通过添加新的 FilesMatch 指令告诉 Apache 将 .html 文件视为 PHP：

```
<FilesMatch "\.html$">
    SetHandler application/x-httpd-php
</FilesMatch> 
```

或者您可以通过将`.htaccess`文件添加到包含类似`AddHandler application/x-httpd-php .html`

但是有更好的方法可以做到这一点，例如使用 RESTful URL（从而避免甚至暗示文件类型）并将所有 PHP 文件保留为`.php`- 但您可能需要进入[Apache的黑暗艺术mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)为此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:38:43.897

嵌入时您是否使用标签？

例如回声“耶”；

应该

```
<?php echo 'Yay'; ?> 
```

或者您可以将文件的扩展名从 HTML 更改为 PHP，您是否在顶部使用 PHP 代码，在底部使用 html

# python - 在 setup.py 之后，必须从包中显式导入模块

> ID：16149741
> 
> 赞同：0
> 
> 时间：2013-04-22T14:33:47.213
> 
> 标签：python, installation, distutils, setup.py

我刚刚用安装脚本制作了我的第一个 Python 包，我想知道这种行为是否正常。它由一个包含我想访问的类的模块组成。项目结构是这样的：

```
.
|
+ -- __init__.py
+ -- setup.py
my_package
    |
    + __init__.py
    + my_class.py 
```

`__init__.py`总是空的。

当我安装它时，这是我期望的行为：

```
>>> import my_package
>>> my_class.MyClass()
A new object is born! 
```

相反，我只能这样做：

```
>>> from my_package import my_class
>>> my_class.MyClass()
A new object is born! 
```

如果相关的话，我的包和我的类文件的名称相同。这是一个糟糕的包装设计案例吗？我发现我可以通过输入来解决这个问题`from my_class import *`，`__init__.py`但我讨厌使用这样的语句，即使它们留在导入命名空间中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:48:16.747

`import my_package`将导入 中定义的内容`my_package/__init__.py`，因此这种行为是完全正常的。您无法使用`my_class`，因为您没有对该模块的任何引用。

我不知道你的包设计是*好**是坏*，但是如果你想`MyClass`在导入时使用`my_package`，只需将这个类移到脚本中即可`my_package/__init__.py`。

# ios - 如何在上标中渲染注册商标

> ID：16149742
> 
> 赞同：2
> 
> 时间：2013-04-22T14:33:51.797
> 
> 标签：ios, objective-c, unicode, uilabel

如果我有一段文字，`UILabel`我需要在文字中间显示一个注册商标，我应该如何实现？我真的不想使用图像视图。我有点想覆盖`drawRect`或……但还没有弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:41:06.080

`\u2122`您可以在 an 中的任何位置使用 Unicode 字符序列`NSString`，它将由 a 适当呈现`UILabel`：

```
someLabel.text = @"This is some text about a Trademarked Name\u2122"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:38:07.043

正如马特建议的那样，它是 unicode。这就是在 NSLocalizedString 中使用它的简单方法。Unicode 代表[符号](http://en.wikipedia.org/wiki/List_of_Unicode_characters)。NSLocalizedStrings 是使用语言文件处理字符串以支持多种语言时的推荐做法。

```
someText.text = NSLocalizedString(@"iPhone\u2122",nil); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T16:08:06.060

使用字符 REGISTERED SIGN “®” U+00AE（写在字符串文字中，就`\00AE`好像您不能直接键入一样）。请注意，它的外观因字体而异：通常，它看起来像一个上标，但这不是必需的，有些字体在文本基线上显示它，“R”大约是常规“R”大小的一半，使其相当可读。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-19T10:36:41.787

从 iOS6> 我们可以使用 NSAttributedString 概念。请看下面的代码片段。如果有人已经意识到这一点，请忽略。

```
static NSString *html =
    @"<html>"
    "  <body>Here is trademark &reg; </i></body>"
    "</html>";

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 280, 300, 200)];
    NSError *err = nil;
    label.attributedText =
    [[NSAttributedString alloc]
     initWithData: [html dataUsingEncoding:NSUTF8StringEncoding]
     options: @{ NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType }
     documentAttributes: nil
     error: &err];
    if(err)
        NSLog(@"Unable to parse label text: %@", err); 
```

# asp.net - 如何从 web.config 获取 Web 服务代理 url

> ID：16149744
> 
> 赞同：0
> 
> 时间：2013-04-22T14:34:02.880
> 
> 标签：asp.net, web-services

我有一个包含 2 个项目的解决方案 - 网站项目和类库项目。

类库项目调用一个webservice，所以它有一个webservice引用和webservice代理，当我添加webservice引用时自动创建。

网站项目实例化一个类库并调用一个调用 web 服务的方法。

问题 - 如何在网站项目的 web.config 中配置 webservice url 并在调用 webservice 时使用它？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:35:46.733

在库中创建服务引用时，它添加了一个 app.config 文件，其中包含适当的配置信息。您需要做的就是将这些内容复制到您的 Web 项目的 web.config 中。

# asp.net - 将 div 背景图像保持在顶部

> ID：16149748
> 
> 赞同：0
> 
> 时间：2013-04-22T14:34:13.217
> 
> 标签：asp.net, html, css, stylesheet

我需要创建自己的下拉列表，以便可以创建具有其他属性的服务器控件。在大多数情况下，这进展顺利，但我遇到了一个问题。对于下拉箭头，我只使用 CSS 中的背景图像。但是，问题是任何超出图像的文本都会覆盖该图像。有人对如何将背景图像保持在顶部或隐藏超出图像位置的任何文本有任何想法吗？到目前为止，这是我的代码：

```
.tbSearchDefault
    {
    border-top:1px solid #abadb3;
    border-right:1px solid #dbdfe6;        
    border-bottom:1px solid #e3e9ef;
    border-left:1px solid #e2e3ea;
    background-image:url('images/ddlMouseOut.gif');
    background-repeat:no-repeat;       
    background-position:right;   
    cursor:default;
    }

<table cellpadding="0" cellspacing="0" style="border-collapse: collapse;">
  <tr>
    <td>
      <asp:TextBox ID="tbSearchName" runat="server"                     
                CssClass="tbSearchDefault" >
     </asp:TextBox>                      
   </td>
 </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:39:57.293

很难确切地说出您需要什么，但是我相信您正在寻找`z-index`css

[https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index)

这将允许您首先设置堆栈，依此类推。

```
.tbSearchDefault
{
    z-index: 99; // Sets this class to be over any other element unless z -index is higher.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:16:16.433

好吧，似乎没有办法做到这一点。我猜背景图像实际上是背景。我最终做的只是在文本框旁边添加一个 div 并在那里添加图像。

# java - 我得到下一个输出：“misBeans.Datos”类没有可读属性“enlace”

> ID：16149755
> 
> 赞同：4
> 
> 时间：2013-04-22T14:34:29.827
> 
> 标签：java, jsf, javabeans

bean的源代码如下： http: [//pastebin.com/XprXdJsP](http://pastebin.com/XprXdJsP)

facelet 是下一个： http: [//pastebin.com/Z7NKhpwe](http://pastebin.com/Z7NKhpwe)

我得到的输出是下一个：

```
javax.el.ELException: /ajax.xhtml: The class 'misBeans.Datos' does not have a readable property 'enlace'.
at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:94)
at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:302)
at com.sun.faces.renderkit.html_basic.TableRenderer.renderRow(TableRenderer.java:384)
at com.sun.faces.renderkit.html_basic.TableRenderer.encodeChildren(TableRenderer.java:161)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

我真的不知道为什么它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T14:45:18.857

换成`class Datos`_`public class Datos`

您不能访问内部类的属性，除非它是`public class`

# dynamics-crm - MS Dynamics CRM 使用附件。在自定义字段中显示附件

> ID：16149757
> 
> 赞同：0
> 
> 时间：2013-04-22T14:34:36.907
> 
> 标签：dynamics-crm, attachment

我有一个关于附件的问题。我知道附件存储在注释实体中。如何在我的实体中创建自定义字段以显示最后附加的文件？如果可能的话，我可以不在“注释”部分显示附件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-09T17:40:29.713

我正在寻找类似的东西并发现了这个： [https ://mahadeomatre.blogspot.com/2016/10/view-or-download-attachments-for.html](https://mahadeomatre.blogspot.com/2016/10/view-or-download-attachments-for.html)

它似乎打开了一个对话框，其中包含所有附件的列表（它查看每个注释）以及预览或下载的能力。

您也许可以接受并修改它以满足您的需要，以仅显示最新的附件。您可以从最新的笔记中获取附件，而不是获取所有附件。

除了打开对话框，您还可以尝试在表单上创建 iframe，因为您只会显示一个附件。

# javascript - 谷歌分析 _setDomainName 可以用于将事件记录到不同的子域吗？

> ID：16149758
> 
> 赞同：0
> 
> 时间：2013-04-22T14:34:39.733
> 
> 标签：javascript, google-analytics

我有各种子域，并且正在使用不同的谷歌分析配置文件来跟踪每个子域。但是，我遇到了这样一种情况，我想将一个子域的综合浏览量记录到另一个子域，这样它们就会一起显示在一个特定的配置文件中。_setDomainName 可以以这种方式使用（登录到与用户实际所在域不同的域？）如果可以，您可以提供一个示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:52:54.100

不，这不是 _setDomainName 的工作方式。_setDomainName 用于存储 Google Analytics 使用的第一方 cookie。它必须遵循设置 cookie 时使用的域的相同规则。

阅读 Wiki 的[HTTP Cookie 的属性部分](http://en.wikipedia.org/wiki/HTTP_cookie)
或[RFC2965](https://www.rfc-editor.org/rfc/rfc2965)

有官方文档说明在多个域上实施 GA。

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)

# c# - 访问控件：嵌套中继器

> ID：16149759
> 
> 赞同：2
> 
> 时间：2013-04-22T14:34:43.310
> 
> 标签：c#, asp.net, vb.net

如何获得位于另一个中继器中的文本框？

```
<asp:Repeater ID="Repeater1" runat="server">
 <ItemTemplate>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
      <asp:Repeater ID="Repeater2" runat="server">
         ....
       </asp:Repeater>
  </ItemTemplate>
</asp:Repeater> 
```

我在 repeater2 ItemDataBound 中，我需要获取 TextBox1 的值，我该怎么做。

```
 Protected Sub Repeater2_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs)  

??

    End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:39:46.987

`NamingContainer`内部中继器的 是外部`RepeaterItem`的`Repeater`，然后用于`FindControl`获取对 的引用`TextBox`：

```
protected void Repeater2_ItemDataBound(Object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Repeater innerRepeater = (Repeater) sender;
        RepeaterItem outerItem = (RepeaterItem) innerRepeater.NamingContainer;
        TextBox TextBox1 = (TextBox) outerItem.FindControl("TextBox1");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:41:14.847

你应该能够做到：

```
Dim tb = DirectCast(sender, WebControl).NamingContainer.FindControl("TextBox1") 
```

# javascript - 计算谷歌应用脚 本中日期之间的年、月、日

> ID：16149760
> 
> 赞同：13
> 
> 时间：2013-04-22T14:34:47.323
> 
> 标签：javascript, date, datetime, google-apps-script

我已经使用下面的函数进行了计算，它以“X YEARS，Y MONTHS，Z DAYS”的格式给出了 o/p，并且对于某些日期，它给出了一些错误的 o/p。我想我做了一些公式中缺少的计算。

功能是，

```
/**
 * @param {Date} startdate
 * @param {Date} enddate
 * @return {String}
 */
function leasePeriodCalc(startDate,endDate)
{
  var sdate=startDate;
  var edate=endDate;
  edate.setDate( edate.getDate()+1);
  edate=new Date(edate);
  if(sdate.valueOf()>edate.valueOf()){
    return('0');
  }
  else{
    var years=((((edate.getDate()-sdate.getDate())<0 ? -1:0)+((edate.getMonth()+1)-(sdate.getMonth()+1)))< 0 ? -1 : 0)+(edate.getFullYear()-sdate.getFullYear());
    var months=((((edate.getDate()-sdate.getDate())<0 ? -1:0)+((edate.getMonth()+1)-(sdate.getMonth()+1)))< 0 ?12:0)+((edate.getDate()-sdate.getDate())<0 ? -1:0)+((edate.getMonth()+1)-(sdate.getMonth()+1));
    if((edate.getMonth()-1)!=1.0)
    {
      var days=((edate.getDate()-sdate.getDate())< 0 ?new Date(edate.getFullYear(), edate.getMonth(),0).getDate():0)+(edate.getDate()-sdate.getDate());
    }
    else
    {
      var days=((edate.getDate()-sdate.getDate())< 0 ?new Date(edate.getFullYear(), edate.getMonth()+1,0).getDate():0)+(edate.getDate()-sdate.getDate());
    }
    var day;
    var month;
    var year;
    if(years>1)year= years+ 'Years';
    else year=years+'Year';
    if(months>1) month= months+ 'Months';
    else month=months+'Month';
    if(days>1) day= days+ 'Days';
    else day=days+'Day';
    if(years==0&&months!=0&&days!=0) return(month+', '+day);
    else if(years!=0&&months==0&&days!=0) return(year+', '+day);
    else if(years!=0&&months!=0&&days==0) return(year+', '+month);
    else if(years==0&&months==0&&days!=0) return(day);
    else if(years==0&&months!=0&&days==0) return(month);
    else if(years!=0&&months==0&&days==0) return(year);
    else if(years==0&&months==0&&days==0) return(day);
    else if(years!=0&&months!=0&&days!=0) return(year+', '+month+', '+day);
  }
} 
```

如果你给出如下的 i/p，它会返回错误的 o/p：

2013 年 2 月 28 日 - 2014 年 2 月 28 日

预期 o/p : 1 YEAR , 1 DAY

给定 o/p : 1 YEAR , 4 DAYS

但是，如果我选择 2013 年 2 月 28 日 - 2014 年 2 月 27 日的意思，它给出了正确的 o/p：

预期 o/p : 1 年

给定 o/p : 1 年

如果我做了任何事情，请建议纠正我的错误。

而且我必须告诉我，我并没有制定所有规则。一般来说，一个月是按照当月的天数计算的。

例如，如果我们从银行获得贷款，我们将仅每月支付利息，即使该月可能有 30 天或 29 天或 28 天或 31 天。

而且如果我们拿一个房间作为月租手段，我们就按月付房租吗？甚至可以是从 3 月 20 日到 4 月 19 日。即使它包含31天，据说也只有一个月。请帮我总结一下。

Tnx，CL。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-04T22:10:55.207

对于 JavaScript 中复杂的日期/时间操作，我发现[Moment.js](http://momentjs.com/)库确实可以提供帮助。我将它打包到一个 Apps 脚本库中，您可以使用项目密钥[MHMchiX6c1bwSqGM1PZiW_PxhMjh3Sh48](https://script.google.com/macros/library/d/MHMchiX6c1bwSqGM1PZiW_PxhMjh3Sh48/8)将其包含在内。我用它来解决这个问题，尽管我可能错过了一些边缘情况。

```
// Load the library (key: MHMchiX6c1bwSqGM1PZiW_PxhMjh3Sh48).
var moment = Moment.load();

function getDuration(startDate, endDate) {
  var start = moment(startDate);
  var end = moment(endDate);
  var units = ['years', 'months', 'days'];
  var parts = [];
  units.forEach(function(unit, i) {
    var diff = Math.floor(end.diff(start, unit, true));
    if (diff > 0 || i == units.length - 1) {
      end.subtract(unit, diff);
      parts.push(diff + ' ' + unit);
    }
  })
  return parts.join(', ');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-20T09:07:29.623

您可以将`moment.js`其作为外部依赖项包含在内，并在 Google App Script 项目中使用。参考[https://stackoverflow.com/a/45231921/5429123](https://stackoverflow.com/a/45231921/5429123)文章，你可以这样做。

```
eval(UrlFetchApp.fetch('https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js').getContentText());
var date = moment().format("MMM Do YY");
Logger.log(date) 
```

这将为您提供 moment.js 的最新版本（截至 2018/10/25 的 2.22.2），与可用作 GAS 库的旧 2.4.0 相比（如接受的答案所示）。

PS - 这行得通！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T10:44:23.283

跟随代码为我工作确保你在执行之前将 moment.js 关联到脚本中

```
 var moment = Moment.load()

  var StartDate= new Date(StartDate1);
  var DD1 = StartDate.getDate();    
  var MM1 = StartDate.getMonth(); 
  var MM1=MM1+1                 //As Month Start with Zero
  var YYYY1 = StartDate.getYear();

  var EndDate= new Date(EndDate1);
  var DD = EndDate.getDate();    
  var MM = EndDate.getMonth(); 
  var MM=MM+1                 //As Month Start with Zero
  var YYYY = EndDate.getYear();

  var a = moment([YYYY, MM, DD]);
  var b = moment([YYYY1, MM1, DD1]);
  return a.diff(b, 'days')
  Logger.log(a.diff(b, 'days') ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-11T18:46:18.660

Date.Diff 的其他替代方案。xDate 是 Date Javascript 对象的包装器：

```
//-----------------------------------------------------------------------------
// Date Wrapper
//-----------------------------------------------------------------------------
var kDate = function () {
    "use strict";
    var dat = NaN, that = this;
    switch (arguments.length) {
    case 0: dat = new Date(); break;
    case 1: dat = new Date(arguments[0]); break;
    default:
        dat = new Date( arguments[0] || null, arguments[1] || null, arguments[2] || null, arguments[3] || null, 
                        arguments[4] || null, arguments[5] || null,  arguments[6] || null);
    }
    Object.getOwnPropertyNames(Date.prototype).forEach(function(prop) {
        that[prop] = function () { 
            return dat[prop].apply(dat, arguments); 
        };
    });
    return this;
};
Object.getOwnPropertyNames(Date).forEach(function(prop) {
    if (["length", "name", "arguments", "caller", "prototype"].indexOf(prop) < 0) {
        kDate[prop] = Date[prop];
    }
});

kDate.MAXDATE = 8640000000000000;
kDate.MINDATE = -8640000000000000;
kDate.YEARZERO = -62167132800000;
kDate.YEAR = 31536000000;
kDate.MONTH = 2592000000;
kDate.DAY = 86400000;
kDate.HOUR = 3600000;
kDate.MINUTE = 60000;
kDate.SECOND = 1000;

//-----------------------------------------------------------------------------
// kDate.diff()
//-----------------------------------------------------------------------------
kDate.diff = function(date1, date2) {
    var d1, d2;
    d1 = kDate.MAXDATE + (typeof date1 === 'number' ? date1 : date1.getTime());
    d2 = kDate.MAXDATE + (typeof date2 === 'number' ? date2 : date2.getTime());
    diff = new kDate(NaN);
    diff.diffDate1 = new kDate(typeof date1 === 'number' ? date1 : date1.getTime());
    diff.diffDate2 = new kDate(typeof date2 === 'number' ? date2 : date2.getTime());
    diff.diffTotalMilliseconds = d2 < d1 ? d1 - d2 : d2 - d1;
    diff.setTime(kDate.YEARZERO + diff.diffTotalMilliseconds);
    diff.diffTotalSeconds = diff.diffTotalMilliseconds / kDate.SECOND;
    diff.diffTotalMinutes = diff.diffTotalMilliseconds / kDate.MINUTE;
    diff.diffTotalHours =   diff.diffTotalMilliseconds / kDate.HOUR;
    diff.diffTotalDates =   diff.diffTotalMilliseconds / kDate.DAY;
    diff.diffYears =        diff.diffDate1.getUTCFullYear() - diff.diffDate2.getUTCFullYear();
    diff.diffMonth =        diff.diffDate1.getUTCMonth() - diff.diffDate2.getUTCMonth();
    diff.diffDate =         diff.diffDate1.getUTCDate() - diff.diffDate2.getUTCDate();
    diff.diffHours =        diff.diffDate1.getUTCHours() - diff.diffDate2.getUTCHours();
    diff.diffMinutes =      diff.diffDate1.getUTCMinutes() - diff.diffDate2.getUTCMinutes();
    diff.diffSeconds =      diff.diffDate1.getUTCSeconds() - diff.diffDate2.getUTCSeconds();
    diff.diffMilliseconds = diff.diffDate1.getUTCMilliseconds() - diff.diffDate2.getUTCMilliseconds();
    return diff;
};
kDate.prototype.diff = function (date) {
    return kDate.diff(this, date);
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T23:50:23.280

*第二次尝试：*

```
function periodCalc(startDate, endDate) {

  var output = '';

  var sYear = startDate.getFullYear();
  var sMonth = startDate.getMonth();
  var sDay = startDate.getDate() - 1;
  var eYear = endDate.getFullYear();
  var eMonth = endDate.getMonth();
  var eDay = endDate.getDate();

  var tMonths = eYear * 12 + eMonth - sYear * 12 - sMonth;
  var days = eDay - sDay;

  if (days < 0) {
    tMonths--;
    var sDate = new Date(sYear, sMonth + tMonths, sDay);
    var eDate = new Date(eYear, eMonth, eDay);
    days = (eDate.getTime() - sDate.getTime()) / 86400000;
  }

  if (tMonths < 0) return '0';
  var months = tMonths % 12;
  var years = (tMonths - months) / 12;

  output += (years == 0 ? '' : (', ' + years + ' Year' + (years == 1 ? '' : 's')));
  output += (months == 0 ? '' : (', ' + months + ' Month' + (months == 1 ? '' : 's')));
  output += (days == 0 ? '' : (', ' + days + ' Day' + (days == 1 ? '' : 's')));

  return output.substr(2);
} 
```

但是，当开始日期是一个月的第一天，而结束日期是一个月的最后一天时，问题仍然存在。例如，2013 年 1 月 1 日到 2013 年 3 月 31 日将返回 2 个月 31 天。这是想要的结果吗？

* * *

*编辑：第一次尝试（这是有缺陷的，请参阅第一条评论）：*

我必须承认我的大脑在看代码时有点受伤，我敢肯定这只会在某个地方出现逻辑上的小错误。我认为如果我尝试从头开始重写它会更快，但我认为它需要一些进一步的测试（它适用于我迄今为止的有限测试）：

```
function periodCalc(startDate, endDate) {
  var output = '';
  endDate.setFullYear(endDate.getFullYear(), endDate.getMonth(), endDate.getDate() + 1);
  var sYear = startDate.getFullYear();
  var sMonth = startDate.getMonth();
  var sDay = startDate.getDate();

  var eDay = endDate.getDate(); 
  var days = eDay - sDay;
  if (days < 0) {
    var eopm = new Date(endDate);
    eopm.setDate(0);
    days = eDay + eopm.getDate() - sDay;
    endDate.setDate(eDay - days);
  }

  var eMonth = endDate.getMonth();
  var months = eMonth - sMonth;
  if (months < 0) {
    months = eMonth + 12 - sMonth;
    endDate.setMonth(eMonth - months);
  }

  var eYear = endDate.getFullYear();
  var years = eYear - sYear;
  if (years < 0) return '0';

  output += (years == 0 ? '' : (', ' + years + ' Year' + (years == 1 ? '' : 's')));
  output += (months == 0 ? '' : (', ' + months + ' Month' + (months == 1 ? '' : 's')));
  output += (days == 0 ? '' : (', ' + days + ' Day' + (days == 1 ? '' : 's')));

  return output.substr(2);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T02:17:08.113

这是我前段时间写的东西，它没有经过全面测试，但认为它应该做它应该做的事情

[更新]：修复了错误，但当低日期是 2 月 29 日并且差异超过一年时仍然表现得很有趣

```
function dateDiff(a,b){
    var low = (a>b)?b:a,
    heigh = (a>b)?a:b,
    diff = {
        years:0,
        months:0,
        days:0
    },
    tmpDate,
    tmpMonth;
    //if you'd like the diff to be including the the last day
    // of the end date you can do: lob.setDate(low.getDate()+1);
    if(low==heigh){return diff;}//a===b no difference
    diff.years=heigh.getFullYear()-low.getFullYear();
    tmpDate=new Date(low.getTime());
    tmpDate.setFullYear(low.getFullYear()+diff.years);
    if(tmpDate>heigh){
      diff.years--;
    }
    low.setFullYear(low.getFullYear()+diff.years);
    tmpMonth=heigh.getMonth()-low.getMonth();
    diff.months=(tmpMonth<0)?tmpMonth+12:tmpMonth;
    tmpDate=new Date(low.getTime());
    tmpDate.setMonth(low.getMonth()+diff.months);
    if(tmpDate>heigh){
      diff.months--;
    }
    low.setMonth(low.getMonth()+diff.months);
    while(low<heigh){
        low.setDate(low.getDate()+1);
        diff.days++;
        if(low>heigh){
          low.setDate(low.getDate()-1);
          diff.days--;
          break;
        }
    }
    return diff;
}

var a = new Date(2013,9,30);
var b = new Date(2014,1,26);
console.log(dateDiff(a,b));
//next one is a bit buggy, one might say it's
// 1 year and 1 day if considoring end of feb 2000
// to 1st of mar 2001
var a = new Date(2000,1,29);
var b = new Date(2001,2,1);
console.log(dateDiff(a,b)); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-24T01:11:51.897

在此处查看示例：http: [//ditio.net/2010/05/02/javascript-date-difference-calculation/](http://ditio.net/2010/05/02/javascript-date-difference-calculation/)

更简洁的代码，更易于阅读。（它有效！）;-)

# c++ - fstat的任何替代品？

> ID：16149764
> 
> 赞同：1
> 
> 时间：2013-04-22T14:34:53.290
> 
> 标签：c++, c

`fstat()`如果您只需要文件大小和创建日期，是否可以使用函数？
我知道我们可以`ftell()`用来获取文件大小，但我也想要创建时间和日期。我不想使用的原因`fstat()`是如果文件列表很长，它会花费很多时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:33:10.193

如果文件已打开，请使用`fstat`如果您只有文件名并且不关心打开文件，请使用`stat`. 它尽可能快。无论您使用什么其他功能，都将使用`stat`或`fstat`在内部使用或至少在内核中使用它们的等价物。这些系统调用需要从文件系统中读取元数据，如果它不在缓存中，它将进入磁盘并需要时间。没有办法解决它。

# variables - cmd调用powershell“您必须在'-'运算符的右侧提供一个值表达式”

> ID：16149772
> 
> 赞同：0
> 
> 时间：2013-04-22T14:35:06.473
> 
> 标签：variables, powershell, command, call

在我继续之前，我对 Powershell 的体验只有 2 天。

我正在尝试从命令行调用 powershell 脚本，并在命令中添加了四个参数。powershell 脚本只是清理一个 CSV 文件，并在清理的每个阶段制作该文件的副本。

脚本中的变量`a`、`b`和`c`与`d`新文件名（包括完整地址）相关。

PowerShell 脚本

```
param(
  [string]$a,
  [string]$b,
  [string]$c,
  [string]$d

 )

Get-Content $a | ForEach-Object { $_ -replace """""""""""","""""" } | Set-Content $b -Force
Get-Content $b | ForEach-Object { $_ -replace """""""","""" } | Set-Content $c -Force
Get-Content $c | ForEach-Object { $_ -replace """""","" } | Set-Content $d -Force 
```

**命令脚本**

下面的命令脚本是我试图运行的`cmd`（注意：我已经取出了真实地址）。

```
powershell.exe '\\somefileaddress\CleanData.ps1' 
-a "\\someaddress\DrFA-C.csv" 
-b "\\someaddress\DrFA-C_2.csv" 
-c "\\someaddress\DrFA-C_3.csv"
-d "\\someaddress\DrFA-C_4.csv" 
```

我收到的错误消息是：

> 您必须在“-”运算符的右侧提供一个值表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:08:39.030

我相当确定问题不在于您的脚本，而在于您如何调用它。这对我有用（没有为清楚起见插入的换行符）：

```
powershell.exe -Command "& '\\somefileaddress\CleanData.ps1' 
-a '\\someaddress\DrFA-C.csv' 
-b '\\someaddress\DrFA-C_2.csv' 
-c '\\someaddress\DrFA-C_3.csv' 
-d '\\someaddress\DrFA-C_4.csv'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:45:13.823

您正在使用双引号，这使其成为可扩展的字符串（解析器将在字符串中查找 Powershell 运算符，并尝试在解析期间调用这些运算符）。- 是一个 Powershell 运算符，因此它认为您正在尝试进行某种减法运算。

切换到单引号来告诉它您希望该字符串按字面意思解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-24T17:27:37.347

听起来这个答案并没有专门解决这个问题，但以防万一有一天它对某人有所帮助：

在安装了 PowerShell v2（Windows 7 的默认版本）的 Windows 7 计算机上运行为 PowerShell v5 编写的脚本时，我收到此错误消息。这是一个非常复杂的行，它的编写方式与旧版本的 PowerShell 不兼容。

在 PowerShell 中运行此代码：`$PSVersionTable.PSVersion.Major`如果它返回`2`（或者甚至可能`3`？），您可以尝试通过安装[此 Windows 更新来升级您的 PowerShell 版本。](https://www.microsoft.com/en-us/download/details.aspx?id=50395)

# java - 如何使用 FragmentPagerAdapter 让标签具有不同的内容？

> ID：16149778
> 
> 赞同：19
> 
> 时间：2013-04-22T14:35:15.823
> 
> 标签：java, android, android-fragments, fragmentpageradapter

我想要有不同的标签，你可以像在 android 市场中一样在其中滑动。每个选项卡应使用一个片段并为其使用一种方法。

这是我的 FragmentPagerAdapter 类：

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);  
    }

    @Override
    public Fragment getItem(int position) {
        Fragment fragment =null;
        switch (position) {
            case 0:
                fragment = new ConnectionFragment();
                break;
            case 1:
                fragment = new DataFragment();
                break;              
            case 2:
                fragment = new GraphFragment();
                break;          }
        return fragment;    
    }
    @Override
    public int getCount() {
        // Show 3 total pages.
        return 3;
    }
} 
```

每个片段类型/选项卡都有三个类：

```
public static class ConnectionFragment extends Fragment {
    public static final String ARG_SECTION_NUMBER = "section_number";
    public String stringConnectionStatus = "Offline";
    public String stringWiflyIp = "0.0.0.0";

    public ConnectionFragment() {}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View connectionView = inflater.inflate(R.layout.fragment_connection,
                container, false);
        TextView statusView = (TextView) connectionView.findViewById(R.id.status_label);
        statusView.setText("Connection status: " + stringConnectionStatus);
        TextView ipView = (TextView) connectionView.findViewById(R.id.ip_label);
        ipView.setText("WiFly IP: " + stringWiflyIp);
        /**TextView sectionBarView = (TextView) connectionView
                .findViewById(R.id.section_label);
        sectionBarView.setText("pups");"*/

        return connectionView;
    }
}

public static class DataFragment extends Fragment {

    public DataFragment() {}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View dataView = inflater.inflate(R.layout.fragment_data,
                container, false);
        TextView sectionBarView = (TextView) dataView
                .findViewById(R.id.section_label);
        sectionBarView.setText("pups2");
        return dataView;
    }
}

public static class GraphFragment extends Fragment {

    public GraphFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_graph,
                container, false);
        TextView sectionBarView = (TextView) rootView
                .findViewById(R.id.section_label);
        sectionBarView.setText("pups3");
        return rootView;
    }
} 
```

每个片段都应该是可定制的，这就是为什么我有三个类。

然而，应用程序在 getItem 方法中崩溃。有任何想法吗？谢谢！

编辑：完整的 MainActivity.java：

```
import ...
public class MainActivity extends FragmentActivity {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
     * will keep every loaded fragment in memory. If this becomes too memory
     * intensive, it may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;
    public List<String> fragments = new Vector<String>();

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager); //pager
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
            fragments.add(ConnectionFragment.class.getName());
            fragments.add(DataFragment.class.getName());
            fragments.add(GraphFragment.class.getName());
            //fragmentsA = "fragments";

        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            /*Fragment fragment =null;
            switch (position) {
                case 0:
                    fragment = new ConnectionFragment();
                    break;
                case 1:
                    fragment = new DataFragment();
                    break;              
                case 2:
                    fragment = new GraphFragment();
                    break;          }
            return fragment;*/
            return Fragment.instantiate(getBaseContext(), fragments.get(position));

        }
        @Override
        public int getCount() {
            // Show 3 total pages.
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase(l);
            case 1:
                return getString(R.string.title_section2).toUpperCase(l);
            case 2:
                return getString(R.string.title_section3).toUpperCase(l);
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class ConnectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";
        public String stringConnectionStatus = "Offline";
        public String stringWiflyIp = "0.0.0.0";

        public ConnectionFragment() {}

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View connectionView = inflater.inflate(R.layout.fragment_connection,container, false);
            TextView statusView = (TextView) connectionView.findViewById(R.id.status_label);
            statusView.setText("Connection status: " + stringConnectionStatus);
            TextView ipView = (TextView) connectionView.findViewById(R.id.ip_label);
            ipView.setText("WiFly IP: " + stringWiflyIp);
            /**TextView sectionBarView = (TextView) connectionView
                    .findViewById(R.id.section_label);
            sectionBarView.setText("pups");"*/

            return connectionView;
        }
    }
    public static class DataFragment extends Fragment {

        public DataFragment() {}

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View dataView = inflater.inflate(R.layout.fragment_data,
                    container, false);
            //TextView sectionBarView = (TextView) dataView.findViewById(R.id.section_label);
            //sectionBarView.setText("pups2");
            return dataView;
        }
    }
    public static class GraphFragment extends Fragment {

        public GraphFragment() {}

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_graph,
                    container, false);
            //TextView sectionBarView = (TextView) rootView.findViewById(R.id.section_label);
            //sectionBarView.setText("pups3");
            return rootView;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T14:43:30.037

创建适配器：

```
class MyPagerAdapter extends FragmentPagerAdapter {
        public List<String> fragmentsA; 

        public MyPagerAdapter(FragmentManager fm) {
            super(fm);
            fragmentsA = fragments;
        }

        @Override
        public Fragment getItem(int position) {
            //return MyFragment.newInstance();
            return Fragment.instantiate(context, fragmentsA.get(position));

        }

        @Override
        public CharSequence getPageTitle(int position) {
            //return CONTENT[position % CONTENT.length].toUpperCase();
            return mEntries.get(position % CONTENT.length).toUpperCase();
        }

        @Override
        public int getCount() {
           // return CONTENT.length;
            return mEntries.size();
        }

        @Override
        public int getItemPosition(Object object) {
            return POSITION_NONE;
        }
    } 
```

每个片段属于不同的类。

所以你必须定义一个片段列表（这些到主要的 FragmentActivity）：

```
static MyPagerAdapter adapter; 
```

并用片段填充它：

```
fragments.add(ConnectionFragment.class.getName());
fragments.add(DataFragment.class.getName());
fragments.add(Tab3.class.getName());
//..etc 
```

然后你必须像这样将片段添加到适配器：

```
 pager = (ViewPager)findViewById(R.id.viewpager);
 adapter = new MyPagerAdapter(getSupportFragmentManager());
 pager.setAdapter(adapter); 
```

MyPagerAdaper 将遍历`fragments`列表中包含的所有片段，然后实例化每个片段。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-22T20:28:48.960

在您的 FragmentPagerAdapter#getItem 方法中，不要创建片段的对象。您需要通过以下方式返回 Fragment -

```
return Fragment.instantiate(context, ConnectionFragment.class.getName()); 
```

这意味着该方法将如下所示 -

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

  public SectionsPagerAdapter(FragmentManager fm) {
    super(fm);  
  }

  @Override
  public Fragment getItem(int position) {
    Fragment fragment =null;
    switch (position) {
        case 0:
            fragment = Fragment.instantiate(context, ConnectionFragment.class.getName());
            break;
        case 1:
            fragment = Fragment.instantiate(context, DataFragment.class.getName());
            break;              
        case 2:
            fragment = Fragment.instantiate(context, GraphFragment.class.getName());
            break;          }
    return fragment;    
  }

  @Override
  public int getCount() {
    // Show 3 total pages.
    return 3;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T10:04:35.613

看这个例子：

```
 public static class MyPagerAdapter extends FragmentPagerAdapter {
    private static int NUM_ITEMS = 3;

    public MyPagerAdapter(FragmentManager fragmentManager) {
        super(fragmentManager);
    }

    // Returns total number of pages
    @Override
    public int getCount() {
        return NUM_ITEMS;
    }

    // Returns the fragment to display for that page
    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0: // Fragment # 0 - This will show FirstFragment
            return FirstFragment.newInstance(0, "Page # 1");
        case 1: // Fragment # 0 - This will show FirstFragment different title
            return FirstFragment.newInstance(1, "Page # 2");
        case 2: // Fragment # 1 - This will show SecondFragment
            return SecondFragment.newInstance(2, "Page # 3");
        default:
            return null;
        }
    }

    // Returns the page title for the top indicator
    @Override
    public CharSequence getPageTitle(int position) {
        return "Page " + position;
    }        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-12T06:16:24.300

## ViewPager 已弃用，请改用 ViewPager2。

随着[ViewPager2 1.0.0](https://developer.android.com/jetpack/androidx/releases/viewpager2#1.0.0)的发布，用于交互的`FragmentPagerAdapter`和类已被弃用。`FragmentStatePagerAdapter``ViewPager`

`ViewPager2`是`ViewPager`库的改进版本，它提供了增强的功能并解决了使用`ViewPager`.

*   阅读[本文](https://developer.android.com/training/animation/screen-slide-2)以使用实现片段之间的滑动`ViewPager2`
*   阅读[本文](https://developer.android.com/guide/navigation/navigation-swipe-view-2)以使用标签创建滑动视图`ViewPager2`
*   如果您的应用程序已经使用`ViewPager`，[请阅读此页面](https://developer.android.com/training/animation/vp2-migration)以了解有关迁移到`ViewPager2`.

# ruby-on-rails - How to include the gem gon in a haml file

> ID：16149779
> 
> 赞同：2
> 
> 时间：2013-04-22T14:35:16.390
> 
> 标签：ruby-on-rails, haml

In need to put this into my .html.erb file to use gon:

```
<%= include_gon %> 
```

Now what do I put into my .html.haml file that is the equivalent to this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:43:15.723

you can do this by,

```
 = include_gon 
```

# javascript - 如何编辑由 ruby gem 创建/引用的 .js 文件？

> ID：16149780
> 
> 赞同：0
> 
> 时间：2013-04-22T14:35:16.957
> 
> 标签：javascript, ruby-on-rails, asset-pipeline

我有一个想要编辑的 .js 文件，但我找不到它，因为它是由 ruby​​gem 加载的。有没有办法访问这个文件进行编辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:44:02.943

您可以通过运行打开 gem，`bundle open foo`这将在您的编辑器中打开 gem 目录。您可以去那里修改您想要的内容（文件的位置可能会有所不同，但请查看 gem 的 vendor 文件夹）。但是，这可能是个坏主意，因为您只能在本地工作，并且在升级 gem 时可能会丢失所做的更改。更可行的解决方案是分叉 gem，在那里进行更改，然后将分叉的版本包含在 Gemfile 中：

```
gem 'foo', git: 'http://github.com/your_repo/foo.git' 
```

# jquery - 用jquery隐藏列？

> ID：16149781
> 
> 赞同：1
> 
> 时间：2013-04-22T14:35:17.840
> 
> 标签：jquery, checkbox, hide, jsfiddle, dynamic-columns

首先，我是 javascript/jquery 的新手，我在 stackoverflow 上找到了几个用于在 html 表上隐藏列的示例，这就是我需要的：
[通过使用 jQuery 选中复选框来自动隐藏表列](https://stackoverflow.com/questions/4673267/hide-table-columns-automatically-by-checking-a-checkbox-with-jquery)
它适用于 jsfiddle：
[http：/ /jsfiddle.net/highwayoflife/8BahZ/4/](http://jsfiddle.net/highwayoflife/8BahZ/4/)

但我不知道，我做错了什么，为什么当我把它放在一起时它对我不起作用：

 `````
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>tablazat</title>
    <style>
        td, th {
            padding: 6px;
            border: 1px solid black;
        }
        th {
            background-color: #f0eae2;
            font-weight: bold;
        }
        table {
            border: 1px solid black;
        }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script language="javascript">  
        $("input:checkbox:not(:checked)").each(function () {
            var column = "table ." + $(this).attr("name");
            $(column).hide();
        });

        $("input:checkbox").click(function () {
            var column = "table ." + $(this).attr("name");
            $(column).toggle();
        });
    </script>
</head>
<body>

    <p><input type="checkbox" name="first_name" checked="checked" /> First Name</p>
    <p><input type="checkbox" name="last_name" /> Last Name</p>
    <p><input type="checkbox" name="email" checked="checked" /> Email</p>

    <table id="report">
        <thead>
            <tr>
                 <th class="first_name">First Name</th>
                 <th class="last_name">Last Name</th>
                 <th class="email">Email</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                 <td class="first_name">Larry</td>
                 <td class="last_name">Hughes</td>
                 <td class="email">larry@gmail.com</td>
            </tr>
            <tr>
                 <td class="first_name">Mike</td>
                 <td class="last_name">Tyson</td>
                 <td class="email">mike@gmail.com</td>
            </tr>
        </tbody>    
    </table>
</body> 
```` 

任何帮助表示赞赏：请尝试尽可能简单地解释它，就像我写的那样。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:38:56.173

您需要将代码包装在一个`$(document).ready`块中，或者将其移动到页面底部，因为这些复选框尚不存在：

```
<script language="javascript">  
  $(document).ready(function() {
    $("input:checkbox:not(:checked)").each(function () {
        var column = "table ." + $(this).attr("name");
        $(column).hide();
    });

    $("input:checkbox").click(function () {
        var column = "table ." + $(this).attr("name");
        $(column).toggle();
    });
  });
</script> 
```

在 jsFiddle 中，左上角的第二个下拉菜单通常设置为“onLoad”，它会自动触发此行为。`

# php - DOM Selector .text() 中的 PHP 变量不会附加到链接

> ID：16149787
> 
> 赞同：0
> 
> 时间：2013-04-22T14:35:33.263
> 
> 标签：php, wordpress

我正在尝试将文本从 div 中提取出来，然后发布推文。我正在使用以下方法获取文本，但是当我尝试将其添加到下面的推文链接时：

```
 <?php 
                    $include = quotescollection_quote();
                    $html = <<<EOF
<div class="quote">

{$include}
                        </div>

EOF;

// create a document object from your html string
$doc = new DOMDocument();
$doc->loadHTML($html);

// create a xpath selector for the document
$selector = new DOMXPath($doc);

// use xpath query to access the text of <q> node
$quote = $selector
 ->query('//div[@class="quote"]/div/p/q/text()')
 ->item(0)
 ->nodeValue;
 ?>

 <?php echo '<a href="http://twitter.com/home?status=Currently reading' . $quote . 'from the Winifred Paper Blog!" title="Click to send this page to Twitter!" target="_blank">Tweet it</a>' ?> 
```

输出当前是引用变量的内容，作为断开链接的文本。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:58:44.460

如果您在将 $quote 传递到 URL 时遇到问题，请使用 'urlencode'：

```
 <?php echo '<a href="http://twitter.com/home?status=Currently reading' . urlencode($quote) . 'from the Winifred Paper Blog!" title="Click to send this page to Twitter!" target="_blank">Tweet it</a>' ?> 
```

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

# javascript - 使用 raphael js 滚动背景

> ID：16149790
> 
> 赞同：0
> 
> 时间：2013-04-22T14:35:42.980
> 
> 标签：javascript, background, raphael

我正在尝试使用 Raphael.js 制作一个小游戏，并且我希望游戏具有滚动背景，使其看起来无限。我用 Raphael 对象制作了背景：

```
var paper = new Raphael($('#canvas'), 0, 0);
var c = paper.image("sky.jpg", 0, 0, 1000, 1000);
paper.setSize(1000,1000); 
```

但我似乎无法通过 x 坐标实际移动图像，甚至无法重新绘制图像。我试过：

```
paper._left = -2000;
c.attrs.x = -2000;
paper.image("sky.jpg", -2000, 0, 1000, 1000);
var d = document.getElementById('canvas');
d.left = -2000; 
```

我不能让它移动。我只是想把这个语句放在某种循环中，这样它就会不断减少 X 坐标或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:48:08.517

你不能移动纸张（不是不移动所有东西）。因此，要制作滚动背景，您必须这样做：

*   制作一个大坏元素（一个正方形或一组）。
*   把背景放在它上面。
*   移动纸上的元素。

我建议您为此（ag 元素）创建一个组，因为您以后可能会添加其他内容。"g" 元素在 raphael 中没有定义，但是你可以将它与普通的 js+svg 一起使用，或者如果你有这样做的冲动，你可以扩展 raphael。

注 1：既然你说你制作了一款游戏，我觉得有必要告诉你，我在 raphael 中遇到了一些烦人的内存泄漏（关于路径的一些东西......记不清了）。例如，raphael 示例中的“极坐标时钟”在 Firefox 上存在漏洞。我不一定说你会遇到同样的问题，但我建议一些人在开始之前先看看一些画布的东西（看看三个 js：[http](http://threejs.org/) ://threejs.org/ ）。主要优点是基于 web gl 并且更加优化，并且使用视频板，witch raphael 没有。

注意 2：如果你当时还没弄明白，我会在 4-5 小时内输入一些代码。如果你做了请评论;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:00:38.253

请改用`.attr()`Raphael 提供的方法。

Use 可以传入一个对象，因为您可能希望至少同时设置`x`和`y`值。

```
c.attr({
    x: -2000
}); 
```

jsFiddle：http: [//jsfiddle.net/terryyounghk/EmGeE/](http://jsfiddle.net/terryyounghk/EmGeE/)

参考：[http ://raphaeljs.com/reference.html#Element.attr](http://raphaeljs.com/reference.html#Element.attr)

# php - 使用 now() 日期和插入时间进行 php 验证

> ID：16149792
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:35:45.753
> 
> 标签：php

嗨，我目前坚持使用 php 验证，我正在尝试针对 date() 进行日期测试；日期以确保日期是最新的，并且不允许任何小于当前日期的日期（）

```
 public function checkDateField($month, $day, $year)
       {
            if (!is_numeric($month) || !is_numeric($day) || !is_numeric($year) || !checkdate($month, $day, $year)) {
                $msg = '*Invalid date';

// then some where here test the value 
of $month $day $year >= date... 
something like that?
///           
            }
            return $msg;    
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:40:36.500

也许使用 datetime diff 函数将您的日期与 now() 进行比较：[http ://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:44:50.850

```
public function checkDateField($month, $day, $year){

    if (!is_numeric($month) || !is_numeric($day) || !is_numeric($year) return 'Invalid date';

    if (strtotime($year.'-'.$month.'-'.$day.' 23:59:59') < time()){
        return 'Invalid time';
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:41:59.147

像这样*的东西应该可以工作（假设日期格式* `YYYY-MM-DD`）：

```
function isValidFutureDate($date)
{
    if (false === strtotime($date))
    {
        return false;
    }

    list($year, $month, $day) = explode('-', $date);
    if (false === checkdate($month, $day, $year))
    {
        return false
    }

    $now = new DateTime();
    $compare = new DateTime($date);
    if ($compare < $now)
    {
        return false;
    }
} 
```

# macos - 卸载时清理 LaunchAgent

> ID：16149797
> 
> 赞同：2
> 
> 时间：2013-04-22T14:35:59.933
> 
> 标签：macos, cocoa, launchd

我的 Mac OSX 应用程序中有一个 LaunchAgent。
当用户将我的应用拖入垃圾箱进行卸载时，如何清理启动代理 plist 文件？我可以在我的包中创建一个指向 plist 文件的符号链接或类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:41:30.313

正如 Joshua Nozzi 评论的那样，当用户删除您的应用程序时，无法收到通知。不过，这并不能完全阻止您清理已启动的任务。如果这些任务中的任何一个在您的应用程序之外运行可执行文件或 shell 脚本（如果没有，它们可以），则该脚本可以检查该应用程序是否仍然安装，如果没有，则取消调度/删除自身。

# python - 在 python 和 numpy 中处理大数据，没有足够的内存，如何将部分结果保存在磁盘上？

> ID：16149803
> 
> 赞同：64
> 
> 时间：2013-04-22T14:36:25.780
> 
> 标签：python, arrays, numpy, scipy, bigdata

我正在尝试在 python 中实现具有 200k+ 数据点的 1000 维数据的算法。我想使用 numpy、scipy、sklearn、networkx 和其他有用的库。我想执行诸如所有点之间的成对距离之类的操作，并对所有点进行聚类。我已经实现了以合理复杂性执行我想要的工作的算法，但是当我尝试将它们扩展到我的所有数据时，我的 RAM 用完了。当然，我愿意，在 200k+ 数据上创建成对距离矩阵会占用大量内存。

问题来了：我真的很想在 RAM 很少的蹩脚计算机上执行此操作。

有没有一种可行的方法让我在没有低 RAM 限制的情况下完成这项工作？这将花费更长的时间真的不是问题，只要时间要求不去无穷大！

我希望能够让我的算法发挥作用，然后一到五个小时后回来，并且不会因为 RAM 用完而卡住！我想在 python 中实现它，并且能够使用 numpy、scipy、sklearn 和 networkx 库。我希望能够计算到我所有点的成对距离等

这可行吗？我该怎么做，我可以开始阅读什么？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-05-19T09:38:52.013

使用`numpy.memmap`您创建直接映射到文件的数组：

```
import numpy
a = numpy.memmap('test.mymemmap', dtype='float32', mode='w+', shape=(200000,1000))
# here you will see a 762MB file created in your working directory 
```

您可以将其视为常规数组：a += 1000。

甚至可以将更多数组分配给同一个文件，如果需要，可以从相互来源控制它。但我在这里经历了一些棘手的事情。要打开整个数组，您必须先“关闭”前一个数组，使用`del`：

```
del a    
b = numpy.memmap('test.mymemmap', dtype='float32', mode='r+', shape=(200000,1000)) 
```

但是只打开数组的一部分可以实现同时控制：

```
b = numpy.memmap('test.mymemmap', dtype='float32', mode='r+', shape=(2,1000))
b[1,5] = 123456.
print a[1,5]
#123456.0 
```

伟大的！`a`与 一起更改`b`。并且更改已经写入磁盘。

另一个值得评论的重要事情是`offset`. 假设您不想取 中的前 2 行`b`，而是取第 150000 和 150001 行。

```
b = numpy.memmap('test.mymemmap', dtype='float32', mode='r+', shape=(2,1000),
                 offset=150000*1000*32/8)
b[1,2] = 999999.
print a[150001,2]
#999999.0 
```

现在，您可以在同时操作中访问和更新阵列的任何部分。注意偏移量计算中的字节大小。所以对于“float64”这个例子是 150000*1000*64/8。

其他参考：

*   [是否可以使用 python 将磁盘上的不连续数据映射到数组？](https://stackoverflow.com/a/16597695/832621)

*   [`numpy.memmap`文档在这里](http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html#numpy.memmap)。

# php - Codeigniter 加载自定义上传配置

> ID：16149810
> 
> 赞同：0
> 
> 时间：2013-04-22T14:36:43.407
> 
> 标签：php, codeigniter, codeigniter-2

我有一个小问题。我有一个用于上传的自定义配置文件。我想加载设置而不重新定义它们。

好的，我的配置如下所示：

**配置文件**

```
$config['upload_path'] = 'tmp/';
$config['allowed_types'] = 'zip';
$config['file_name'] = '';
$config['max_size'] = '';
$config['encrypt_name'] = false;
$config['remove_spaces'] = true; 
```

**控制器**

```
// Here is my problem $config[]
// How to load settings from config.php without again defining $config array

$config['upload_path'] =   $this->config->item('upload_path');
$config['allowed_types'] = $this->config->item('allowed_types');
$config['file_name'] =     $this->config->item('file_name');
$config['max_size'] =      $this->config->item('max_size');
$config['encrypt_name'] =  $this->config->item('encrypt_name');
$config['remove_spaces'] = $this->config->item('remove_spaces');  

$this->load->library('upload',$config);

if(!$this->upload->do_upload())
{
    $this->session->set_flashdata('error', $this->upload->display_errors());
    redirect('extension/');
} 
```

我想绕过 $config['test] = $this->config->item('test'); 的重新定义

这是不可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:46:08.647

我不确定我是否遗漏了一些东西，但只是不要把这些线放在你的控制器中。这不会有效地重新声明吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:50:55.740

[http://ellislab.com/codeigniter/user-guide/libraries/config.html](http://ellislab.com/codeigniter/user-guide/libraries/config.html)描述了如何加载自定义配置项。我建议按照 CI 网站的建议创建一个自定义配置文件，然后将自定义配置文件加载到您想要的位置。

所以你会有类似的东西`$this->config->load('custom_upload_settings', FALSE, TRUE);`，在那个文件中你会有你想要覆盖的设置。

// 加载名为 custom_upload_settings.php 的配置文件并将其分配给名为“blog_settings”的索引 `$this->config->load('custom_upload_settings', TRUE);`

// 检索包含在 custom_upload_settings 数组中的名为 site_name 的配置项 `$site_name = $this->config->item('site_name', 'custom_upload_settings');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-10T21:52:03.653

是的，Codeigniter 支持自定义上传配置。您可以设置 config/upload.php 初始设置。

另一个控制器；

```
$config['upload_path'] = FCPATH . 'assets/uploads/articles'; // change custom config
$this->upload->initialize($config, FALSE); 
```

最重要的初始化第二个参数是**FALSE**。该参数与 RESET 相关。在保持默认上传设置的同时，您可以更改其他设置。

更多信息; [Codeigniter 文件上传初始化](https://codeigniter.com/user_guide/libraries/file_uploading.html#CI_Upload::initialize)

# c# - Selenium WebDriver - 在 C# 中获取表的第一行

> ID：16149811
> 
> 赞同：0
> 
> 时间：2013-04-22T14:36:45.313
> 
> 标签：c#, css-selectors, selenium-webdriver

我是一个完全硒新手，所以下面的代码远非完美（支持它不起作用的事实）。我想获取表中的第一行并检查它是否分配了某个 CSS 类。

在多次尝试仅获得第一行之后，到目前为止我一直没有成功。这是我尝试过的 -

 ***我在这里使用 (RemoteWebElement) 演员表的原因是因为 (IWebElement) 演员表不起作用。但这不起作用。***

```
IWebElement first_row = (RemoteWebElement)((IJavaScriptExecutor) Driver).ExecuteScript("return $('#headTable > tr:visible:first')"); 
```

***下面的行获取所有可见行的文本。这行得通。***

```
IWebElement first_row = Driver.FindElement(By.CssSelector("#headTable")); 
```

***再次尝试获得第一行。这不起作用***

```
IWebElement first_row = Driver.FindElement(By.CssSelector("#headTable")).FindElement(By.CssSelector("tr:visible:first")); 
```

我一直在查看来自[http://docs.seleniumhq.org/docs/03_webdriver.jsp#introducing-the-selenium-webdriver-api-by-example](http://docs.seleniumhq.org/docs/03_webdriver.jsp#introducing-the-selenium-webdriver-api-by-example)的示例。但它们是非常简单的示例。

谁能看到这里有什么问题？

此外，如果您有指向其他站点的链接，这些站点在 C# 中有有用的示例，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:17:54.897

实际上，BoltClock 是对的，您将 jquery 选择器用于 cssSelector。

```
WebElement table = Driver.FindElement(By.CssSelector("#headTable")); // you have the table
list<WebElement> allElements = table.findElements(By.CssSelector("tr[attribute name='visible']")); // you have all row that are visible 
```

最后，如果您想获得一排，请执行`allElements.get(0)`

**重要的 ：**

看一下，`By.CssSelector("tr[attribute name ='visible']")`因为我刚刚写了`[attribute name='visible']`，因为我不知道它是如何写入你的代码的，所以你可以适应。

PS：有一些关于[cssSelector的规范](http://www.w3schools.com/cssref/css_selectors.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-25T22:04:35.100

任何时候在 WebDriver 中处理 HTML 表格时，都应该考虑使用 TableDriver 扩展 ( [https://github.com/jkindwall/TableDriver.NET](https://github.com/jkindwall/TableDriver.NET) )。对于查看表中的第一行是否具有特定 CSS 类的指定问题，您可以这样做：

```
Table table = Table.Create(driver.FindElement(By.Id("headTable")));
TableRow row = table.FindRow(0);
string rowClasses = row.Element.GetAttribute("class");
Assert.IsTrue(rowClasses.Contains("expected-class")); 
```

# google-app-engine - 无法在 Google App Engine 中调试 dev_appserver

> ID：16149813
> 
> 赞同：9
> 
> 时间：2013-04-22T14:36:47.623
> 
> 标签：google-app-engine, pydev

我不认为这个问题是 PyDev 所独有的，而是任何 python 调试器所独有的。

使用 Eclipse 和 pydev，我无法在 dev_appserver（Google 应用程序引擎开发服务器）进程中中断我的 WSGI 处理程序。我不是 100% 确定，但我认为这是 GAE 1.7.6 或 1.7.7 的回归，因为我几乎可以肯定在升级到 1.7.7 之前我能够调试我的代码

GAE 似乎创建了一个不受 PyDev 控制的新进程（'_python_runtime.py'）。我找不到任何证据表明 PyDev 中提供了“调试子进程”功能，所以现在我有点迷失了。

查看 GAE 代码（1.7.7），似乎子进程是在 tools/devappserver2/http_runtime.py 中创建的，它调用`safe_subprocess.py/start_process`.

胡闹我也没有看到任何明显的方法： 1\. 告诉 GAE 从同一进程中的服务器到用户处理程序。2\. 告诉 GAE 将新项目的命令行从 更改`python _python_runtime.py`为`python pydev.py ... --file _python_runtime.py`（即使那样，也不确定 PyDev 是否​​能够接受它）。

有什么建议吗？这真的是回归吗？

**编辑**（部分答案）：
这是部分答案。在 SDK 1.7.6 中，Google App Engine 有一个全新的服务器。服务器现在是一个多进程。主进程产生子进程（称为运行时）来运行 WSGI 处理程序。这些子流程没有被调试。

这一变化在社区中引起了很多反响，但显然 GAE 社区主要生活在 Google Groups 中，而不是 SO（直到昨天我才意识到这一点）。这是讨论的链接：

[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/ep5BWYKpQpU](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/ep5BWYKpQpU)

基本上有两种解决方案：

1.  最简单的做法是使用旧服务器，从 1.7.7 开始，它仍然可用。而不是 dev_appserver.py，只需启动 old_dev_appserver.py。在 Eclipse PyDev 中，转到 Debug Configuration...，并将“Main Module”替换为 $(GOOGLE_APP_ENGINE)/old_dev_appserver.py，然后启动，就好像新服务器从未发生过一样。此解决方案显然存在运行较旧服务器的缺点，并且不知道此设置将保持多长时间。

2.  第二个解决方案涉及更多一点，我还没有完全破解它。它基于 PyDev 的远程调试功能，以及在运行过程开始时告诉 GAE 运行脚本的能力。所以这是如何做到的：

    1.  创建一个脚本并将其命名为：gae_runtime_startup.py。放是某处（下）。
    2.  在全局 PyDev 首选项中（Window menu -> Preferences -> PyDev -> Interpreter Python -> String Substitution Variables，添加一个新的 PYDEV 变量，并将值设置为 eclipse 的 PyDev 插件（在我的计算机中是 c:\eclipse\插件\org.python.pydev_2.7.1.2012100913）。
    3.  在项目属性中，将 ${PYDEV}/pysrc 添加到 PYTHONPATH。这样，您就可以导入 pydevd
    4.  您需要告诉 GAE 运行 gae_runtime_startup.py。转到启动器，并将以下选项添加到命令行（调试配置 -> 参数）：--python_startup_script=<完整路径>/gae_runtime_startup.py --max_server_instances=1
    5.  启动 PyDev 远程服务器。

    因此，在完成所有这些之后，我在运行时进程上运行的 runtime_startup.py 中获得了一个断点。如果我上栈，我会进入 runtime.py 源代码——所以我认为我的方向是正确的。然而，我在处理程序中设置的断点不会中断 - 所以这条路线对我来说仍然是阻塞的。任何帮助将不胜感激。

```
# gae_runtime_startup.py
import pydevd; 
pydevd.settrace() 
```

一些相关链接：

*   谷歌小组讨论：[https ://code.google.com/p/appengine-devappserver2-experiment/issues/detail?id=28](https://code.google.com/p/appengine-devappserver2-experiment/issues/detail?id=28)*   来自 Google 的文档解释了如何调试（我的第二种方法）：[https ://docs.google.com/a/london.org.il/document/d/1CCSaRiIWCLgbD3OwmuKsRoHHDfBffbROWyVWWL0ZXN4/edit](https://docs.google.com/a/london.org.il/document/d/1CCSaRiIWCLgbD3OwmuKsRoHHDfBffbROWyVWWL0ZXN4/edit)*   来自 PyDev 的文档，解释了如何设置远程调试器。[http://pydev.org/manual_adv_remote_debugger.html](http://pydev.org/manual_adv_remote_debugger.html)*   另请参阅下面@Tim Hoffman 的出色评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T07:04:01.937

这确实是 1.8.3 中修复的回归：[https](https://code.google.com/p/googleappengine/wiki/SdkReleaseNotes) ://code.google.com/p/googleappengine/wiki/SdkReleaseNotes 。

# jquery - ajax 回调和脚本标签

> ID：16149814
> 
> 赞同：0
> 
> 时间：2013-04-22T14:37:05.077
> 
> 标签：jquery, ajax, callback

所以，我终于发现 ajax 回调不会加载脚本标签之间的页面内容。我一直在尝试如何找出问题（这里没有 jquery 专家）。我已经阅读了很多并观看了视频 - 使用 .load 而不是 .html，使用 eval，追加，将脚本放在标题中......

无论如何，这些方法也可能有效，但我正在使用的方法是基于我观看的视频：[http://www.ajaxvideotutorials.com/V11Videos/jquery_evaluateJavascriptInScriptTagsInAjaxResponse.swf][1]

在放入我的大代码块之前，我正在尝试简单的代码。但是为什么我的代码在这里不起作用？我的应用程序是一个 Rails 应用程序。

这是我的 ajax 代码，在 scripts.js 文件中。需要注意的关键线是：

```
$(".page-content .testing").find('script') function(){
    alert(eval(value));
} 
```

到目前为止，所有其他 ajax 的东西都工作得很好——这是我试图用来显示脚本标签之间的内容的代码，在测试类中，它在页面内容中

```
$(document).on("ready", function(){

    var ajax_loaded = (function(response) {             

        $(".page-content")

            .html($(response).filter(".page-content"));             

        $(".page-content .ajax").on("click",ajax_load); 

$(".page-content .testing").find('script') function(){
    alert(eval(value));
}
});

var form_submit = (function(e) {                    
    e.preventDefault();                             

    var url = $(this).attr("action");               
    var method = $(this).attr("method");            

    var data = {}                                   
    $(this).find("input, textarea, select").each(function(i){
        var name = $(this).attr("name");            
        var value = $(this).val();                  

        data[name] =value;                          

    }); 

    $.ajax({                                        
        "url": url,                                 
        "type": method,                             
        "data": data,                               
        "success": ajax_loaded,
        "error": function () {alert("bad");}        
    });
});

var history = [];                                   

var current_url_method;                             

var ajax_load = (function(e) {                      
    e.preventDefault();                             

    history.push(this);                             

    var url =$(this).attr("href");                  
    var method = $(this).attr("data-method");       

    if (current_url_method != url + method) {       
        current_url_method = url + method;          

        $.ajax({                                    
            "url": url,                             
            "type": method,                         
            "success": ajax_loaded,                 
        });
     }
});

$("#menu a").on("click",ajax_load);

$("#menu a.main").trigger("click");
$(".search-box form").on("submit", form_submit);
// $("#t_and_c").trigger("click");

}); 
```

在我的 show.html.erb 文件中，我有：

```
<div class ='page-content'>
<div class = "testing">

<script type="text/javascript">
value=10
</script>
</div>
</div> 
```

谢谢你的帮助！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:40:08.630

如果我没记错的话，如果你想要任何一个类的元素，它们必须用逗号分隔。如果你想要两者都有的元素，就不能有空格。

```
$(".page-content,.testing").find('script') function(){
    alert(eval(value));
} 
```

或者

```
$(".page-content.testing").find('script') function(){
    alert(eval(value));
 } 
```

[http://jsfiddle.net/yatrix/bBBRa/1/](http://jsfiddle.net/yatrix/bBBRa/1/)

# ruby-on-rails - Ruby on Rails 4 - Paperclip AWS 图像 URL 错误？

> ID：16149815
> 
> 赞同：9
> 
> 时间：2013-04-22T14:37:09.037
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, ruby-on-rails-4

我以前一起使用过回形针和 AWS，但我刚刚创建了这个 Rails 4 应用程序，我的 image.url 方法显示在“ [http://s3.amazonaws.com/](http://s3.amazonaws.com/) ”上寻找图像，而它应该正在寻找在“s3-us-west-2.amazonaws.com”上为他们服务。我假设这是因为第一个帐户的区域是美国标准，而新帐户是俄勒冈州。

我有什么办法可以更改配置文件中的区域或其他什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T21:28:51.797

显然曾经有很多解决方法，但现在配置中有一个名为 s3_host_name 的选项。

```
ExampleApp:Application.configure do

  config.paperclip_defaults = {
    :storage => :s3,
    :s3_host_name => 's3-us-west-2.amazonaws.com',
    :s3_credentials => {
      :bucket => '#',
      :access_key_id => '#',
      :secret_access_key => '#'
    }
  }

end 
```

# ruby-on-rails - Rails 3.2 模型在测试环境中的初始化之前加载

> ID：16149816
> 
> 赞同：3
> 
> 时间：2013-04-22T14:37:09.077
> 
> 标签：ruby-on-rails

我正在将 Rails 应用程序从 3.0.20 升级到 3.2.13。似乎当我的测试环境将 cache_classes 设置为 true 时，模型会在初始化程序之前加载。这会导致一些错误，因为我的初始化程序有一些模型的设置代码。同样奇怪的是，在使用 cache_classes=true 的生产环境中，我没有遇到同样的问题。谁能在这里指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-01T20:40:27.063

尝试将此添加到您的 config/environments/test.rb 文件中。它会在类被缓存之前加载你的初始化器：

```
 # Load initializers before models get cached
  config.before_eager_load do
    Dir[File.expand_path "../../initializers/*", __FILE__].each { |file| require file }
  end 
```

或者，您可以检查以确保在调用初始化程序之前没有加载模型的 gem。

# c# - C# ASP MVC：从 HTML 在不同的控制器视图之间导航

> ID：16149817
> 
> 赞同：0
> 
> 时间：2013-04-22T14:37:13.360
> 
> 标签：c#, asp.net, html, asp.net-mvc

我在来自 HTML 的不同控制器视图之间导航时遇到问题

例如，我有两个控制器（用户和事务）

在我的 HTML 中有一个主菜单，其中包含所有主要导航。

所以如果我想导航到用户列表，我的视图将是“用户/列表用户”

如果我在事务视图中

```
(......com/Transaction) 
```

如果我单击用户列表，它将导航到

```
(......com/Transaction/User/List_Users) 
```

而不是去

```
(......com/User/List_Users) 
```

所以我尝试使用 The Html Action 就像

```
<li>@Html.ActionLink("User List","User/List_Users")</li> 
```

但没有做任何好事:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:39:41.613

```
<li>@Html.ActionLink("Link Name", "Action")</li> 
```

这是您的基本 ActionLink。动作是控制器中的特定方法（最终提供视图）。

如果您需要链接到不同的控制器（例如，您需要从用户视图链接到事务视图），您可以执行以下操作：

```
<li>@Html.ActionLink("Link Name", "Action", "Controller")</li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:41:45.683

使用接受控制器名称的重载：

```
@Html.ActionLink("User List","List_Users", "User"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T14:43:55.350

我通常使用以下

```
@Html.ActionLink("Link Text", "Action", "Controller", new { querystringparameter = querystringvalue }, null) 
```

在您的情况下，它将是：

```
@Html.ActionLink("User List", "List_Users", "User", new { querystringparameter = querystringvalue }, null) 
```

# runtime-error - Sage 不允许我为情节添加标题

> ID：16149822
> 
> 赞同：1
> 
> 时间：2013-04-22T14:37:24.000
> 
> 标签：runtime-error, title, sage

我将在这里放两组代码，第一组是我正在处理的没有问题的图表。第二组代码与第一组代码相同，除非我尝试向我得到的图表添加标题

> RuntimeError：行（）中的错误：选项“标题”无效。

第一组：

```
sage: p = plot(log(x),(x,0,10),color='green')
sage: p.axes_labels(['$x$ axis','$y$ axis'])
sage: p 
```

第二套：

```
sage: p = plot(log(x),(x,0,10),color='green',title='ln(x)')
sage: p.axes_labels(['$x$ axis','$y$ axis'])
sage: p 
```

我也试过`p.title('ln(x)')`它返回相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:02:25.400

[正如Graphics object documentation](http://sagemath.org/doc/reference/plotting/sage/plot/graphics.html)中所述，这对我来说很好（特别是第二个有效）。 `p.title()`不支持，但

```
sage: p.show(title='newtitle') 
```

将覆盖您选择的旧标题。

这对您根本没有帮助...除了此功能相对较新。请参阅[原始票证](http://trac.sagemath.org/sage_trac/ticket/10512)，该票证仅在 Sage 5.3 中合并。我怀疑您使用的是旧版本的 Sage。这可能是这里的问题吗？在这种情况下，获得新的二进制文件甚至从源代码构建 Sage 应该不会太困难 - 如果您对此有任何问题，请跟进。

# c - printf char* 指向 long 和 float 的指针

> ID：16149824
> 
> 赞同：1
> 
> 时间：2013-04-22T14:37:30.523
> 
> 标签：c, printf, long-integer

我正在从“理解 C 中的指针”一书中做一些练习。这本书给了你一段代码，并询问你在输出中得到了什么。

其中之一如下：

```
#include <stdio.h>

int main(int argc, char* argv[])
{
    char c, *cc;
    int i;
    long l;
    float f;

    c = 'Z';
    i = 15;
    l = 77777;
    f = 3.14;
    cc = &c;
    printf("c=%c cc=%u\n", *cc, cc);
    cc = &i;
    printf("i=%d cc=%u\n",*cc,cc);
    cc=&l;
    printf("l=%ld cc=%u\n",*cc,cc);
    cc=&f;
    printf("f=%f cc=%u\n",*cc,cc);
    return 0;
} 
```

输出是：

```
c=Z cc=1946293623
i=15 cc=1946293616
l=4294967249 cc=1946293608
f=0.000000 cc=4294967235 
```

我不明白**为什么** `l`并且`f`不打印为`77777`and `3.14`？

我检查了 The C Programming Language 一书，看看`printf`' 的控制字符是否正确，它们是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:04:09.363

正如 Bryan 的回答所说，传递给的参数类型`printf`需要与格式字符串指定的类型相匹配。

打印指针值的格式是`"%p"`-- 并且它需要一个`void*`参数；另一种类型的指针应显式转换为`void*`.

由于类型不匹配，您的程序具有未定义的行为。它也有约束冲突，因为它试图在没有强制转换的情况下分配不兼容的指针类型；`cc = &i;`是非法的（但如果编译器选择，它只能警告它）。你*应该*已经从你的编译器那里得到了几个警告。

我*希望*该计划的目的是展示*不*该做什么。`return`让我们只考虑语句之前的最后两行：

```
cc=&f;
printf("f=%f cc=%u\n",*cc,cc); 
```

`cc = &f;`违反约束并需要诊断（恕我直言，一个好的编译器*应该*给您一个致命错误并拒绝该程序）。`&f`是 类型`float*`, 并且`cc`是 类型`char*`; 这些类型不是赋值兼容的。

大多数接受该语句的编译器都假定它意味着隐式转换，使其等效于合法但棘手的：

```
cc = (char*)&f; 
```

这导致`cc`指向`float`对象的第一个字节`f`。

```
printf("f=%f cc=%u\n",*cc,cc); 
```

这声称打印 的值`f`，但事实并非如此；它打印指向的`char`对象的值`cc`，它恰好是`f`. 它使用该对象的`%f`格式，该`char`对象具有未定义的行为。结果是垃圾。

我打算编写该程序的“更正”版本，但它有很多问题，我无法弄清楚它打算做什么。

> 我检查了 The C Programming Language 一书，看看 printf 的控制字符是否正确，它们是否正确。

不，他们不是。`"%f"`打印一个`float`or`double`参数是正确的（在这种情况下`float`被提升为`double`），但你正在传递一个`char`参数。

这是正确的：

```
printf("*cc = %d, cc = %p\n", *cc, (void*)cc); 
```

但它不会做同样的事情；它将指向的 char 打印`cc`为 an `int`（您可以使用`%c`将其打印为字符，但它可能无法打印），然后将 的值打印`cc`为指针。

看看这本书对这个程序的描述会很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:42:11.077

`printf`（更糟糕的是）的格式说明符`scanf`必须匹配作为参数传递的类型。如果您正在使用，请`gcc`使用该`-Wall`选项，它也会对此发出警告。您的代码应如下所示：

```
printf("c=%c cc=%u\n", *cc, (unsigned int)cc);
cc = &i; 
```

将地址`i`带入`char*`解释不再有意义，对于下面的其他人也没有意义。通过分配指针，您强制执行对相同位表示的错误解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:59:00.450

```
printf("l=%ld cc=%u\n",*(long*)cc,cc);
printf("f=%f cc=%u\n",*(float*)cc,cc); 
```

这有效，但是

```
printf("l=%ld cc=%u\n",*cc,cc);
printf("f=%f cc=%u\n",*cc,cc); 
```

由于以下原因，这并不像预期的那样。

每个指针都是 4 个字节（取决于操作系统而不是它指向的位置。）所以即使是 float 的地址也可以存储到 char * 中。但是当我们进行指针运算或读取指针的值时，`*cc`它会根据指针的类型读取字符数...

假设一个字符有 2 个字节，那么`*cc`将只读取 2 个字节，`cc`其中的地址为浮点数或长整数已存储在 4 个字节（或更多）中。所以它会显示无效数据。

当我们对它进行类型转换时，它会被转换`*(long*)cc`为带有显式类型转换的长指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T14:59:11.860

> 你的程序有很多问题！！！

首先，不要将`%u`格式说明符用于指针。`unsigned integers`并且`pointers`不需要本质上具有相同的大小。始终`%p`用于`pointers`.Eg

```
printf("c=%c cc=%p\n", *cc, cc); 
```

第二个最重要的事情——**永远不要**使用 YK 的那本书“Understanding pointers in C”（由于显而易见的原因，我不能完整地命名作者）。他的另一本书是臭名昭著的“void main”书。

第三，回到您的程序，我很惊讶您在将整数和浮点变量的地址分配给字符指针时没有收到任何警告，而**没有进行强制转换。**.这必然会产生错误，因为您的程序将无法知道要从指定位置解释多少字节。`int`, `float`, 并且`char`大小不一。您可能想知道为什么当时没有出错`int`？正确的？这是因为您的计算机的小端架构，其中最不重要的字节首先存储。

所以这是你的更正：

```
cc =(char*) &i;
printf("i=%d cc=%p\n",*(int*)cc,cc);
cc=(char*)&l;
printf("l=%ld cc=%p\n",*(long*)cc,cc);
cc=(char*)&f;
printf("f=%f cc=%p\n",*(float*)cc,cc); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T14:41:14.877

尝试这个

```
printf("l=%ld cc=%u\n",*(long*)cc,cc);
printf("f=%f cc=%u\n",*(float*)cc,cc); 
```

# javascript - HTML5 Canvas - 计算物体相对于“磁铁”的速度

> ID：16149825
> 
> 赞同：1
> 
> 时间：2013-04-22T14:37:30.627
> 
> 标签：javascript, html, math, canvas

我的画布中间直接有一个“磁铁”，我有点击时添加到画布中的对象。然后它们被磁铁吸引。

我有对象之间的 X 和 Y 距离，大约在 -20 到 20 之间。

这是我用来吸引物体的计算，它有效，但它越接近，力越弱，当它应该反过来时，我该怎么做？

```
impulseX = (distanceX / 100)
impulseY = (distanceY / 100) 
```

例子：

```
Distance = 20, speed = 0.05
Distance = 10, speed = 0.1
Distance = -20, speed = -0.05
Distance = -10, speed = -0.1 
```

我在做什么的例子：http: [//jsfiddle.net/qk8Wk/](http://jsfiddle.net/qk8Wk/)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:51:30.497

你的冲动应该遵循*平方反比定律*，即

```
var distance2 = distanceX * distanceX + distanceY * distanceY;
var mag = n / distance2; 
```

其中`n`是表示场强的一般常数。

那么脉冲需要与该脉冲的*方向成*比例：

```
var theta = Math.atan2(distanceY, distanceX);
var impulseX = mag * Math.cos(theta);
var impulseY = mag * Math.sin(theta); 
```

见[http://jsfiddle.net/alnitak/BH5qL/](http://jsfiddle.net/alnitak/BH5qL/)

或者，避免使用三角函数（根据@JayC）

```
var norm = Math.sqrt(distance2);
var impulseX = mag * (distanceX / norm);
var impulseY = mag * (distanceY / norm); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:47:44.950

怎么样：

```
var distance = Math.sqrt(distanceX*distanceX + distanceY*distanceY)
impulseX = 0.1*distanceX / distance
impulseY = 0.1*distanceY / distance 
```

或者你可以使用距离^2：

```
var distance2 = distanceX*distanceX + distanceY*distanceY
impulseX = 0.1*distanceX / distance2
impulseY = 0.1*distanceY / distance2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:46:53.807

> 但距离越近，力量越弱，

很合乎逻辑，因为差异变小了——所以差异/100 也变小了。

> 当它应该反过来时，我该怎么做？

使您基于因子乘法的值变得更大，而不是更小 - fe

```
impulseX = ( (20 - distanceX) / 100) 
```

# php - 更新数据库并更新变量

> ID：16149827
> 
> 赞同：0
> 
> 时间：2013-04-22T14:37:35.737
> 
> 标签：php, mysql

我对 GET 函数有疑问。我目前有一个带有 get 操作的表单。我正在使用 get 函数在另一个页面中访问该数据。不幸的是，我的每一个值都收到“错误：未定义的索引”。在阅读了类似的问题后，我尝试使用 isset（如下所示）并且它消除了错误，但我不确定我的数据是否存储在变量中，因为如果我回显 4 个变量，则没有任何显示. 有人可以推动我朝着正确的方向前进吗？

表格中的数据：

```
while($row = mysql_fetch_array($result)) {
echo "<div class=\"addform\"><form method='GET' action=\"update.php\">\n";

echo "  <input type=\"text\" value=\"".$row['tfid']."\" name=\"tfid\">\n";

echo "  <input type=\"text\" name=\"fname\"      value=\"".$row['fname']."\"/>\n";

echo "  <input type=\"text\" name=\"lname\" value=\"".$row['lname']."\"/>\n";

echo "  <input type=\"text\" name=\"hca\" value=\"".$row['hca']."\"/>\n";

echo "  <input type=\"text\" name=\"file\" value=\"".$row['file']."\"/>\n";

echo "  <input type=\"image\" src=\"images/update.png\" alt=\"Update Row\" class=\"update\" title=\"Update Row\">\n";

echo "<a href=\"delete.php?tfid=".$row['tfid']."\"><img title='Delete Row' alt=\"Delete\" class='del' src='images/delete.png'/></a></form></div>\n";

}

echo "</table><br />\n"; 
```

和检索代码：

```
$tfid= isset($_GET["tfid"]) ? $_GET["tfid"] : NULL;
$fname = isset($_GET["fname"]) ? $_GET["fname"] : NULL;
$lname = isset($_GET["lname"]) ? $_GET["lname"] : NULL;
$hca = isset($_GET["hca"]) ? $_GET["hca"] : NULL;
echo $tfid;
echo $fname;
echo $lname;
echo $hca; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:39:40.963

# 编辑后：

在您发布表单代码后，我注意到问题可能是您的输入值可能为空，因为语法看起来或多或少是正确的。通过仔细检查值`view-source`以确保其有效性。

* * *

**在您编辑之前：**

发生错误是因为实际上*未*设置变量。确保您的表单如下所示：

```
<form action="yourpage.php">
<input name="fname" type="text" />
<input name="lname" type="text" />
<input name="hca" type="text" />
<input name="tfid" type="text" />
</form> 
```

如上所示，`_GET`变量正在寻找*名称*属性。初学者中的一个常见错误（每个人都曾一度犯过这个错误）是使用`id`in 代替`name`. `id`用于选择器的目的，而`name`通常用于在服务器端检索值。

**要记住的事情....**

正如@George Cummins 所提到的，您还应该知道`$_GET`参数是通过 URL 传递的，如下所示：

```
http://yoururl.com?var1=data1&var2=data2 
```

在某些情况下，您可能不希望用户看到通过您的表单发送的所有数据，因此在这种情况下，您可能希望使用`$_POST`本质上*是表单数据的隐藏传递*。实际上，这些数据并没有真正隐藏，但肯定比使用`$_GET`.

# android - SQLite 不会在 android 中打开数据库

> ID：16149828
> 
> 赞同：0
> 
> 时间：2013-04-22T14:37:35.963
> 
> 标签：android, android-sqlite, sqliteopenhelper

我在使用 sqlite open helper 时遇到问题，我收到此错误：

sqlite3_open_v2("/data/data/lam.ztl.lamztlbologna/databases/ztlBolo.db", &handle, 2, NULL) failed 打开数据库失败。关闭它。android.database.sqlite.SQLiteCantOpenDatabaseException: 无法打开数据库文件我不明白为什么会收到这个错误。

我的开放助手类是：

```
enter code here

public class DBHelper extends SQLiteOpenHelper {
    private final static String DATABASE_NAME = "ztlBolo.db";
    static SQLiteDatabase db;
    //private  static String DB_PATH = "/data/data/lam.ztl.lamztlbologna/databases/";
    static Context context;
    private  static String DB_PATH = "/data/data/"+context.getPackageName()+"/databases/";

    private final static String TABLE_NAME = "manageZtlStreet";
    private final static String SQL_PATH = "databaseZtlBolo.sql";
    MapsActivity ma = new MapsActivity();
    Double LATITUDE= 0.0;
    Double LONGITUDE = 0.0;
    private final Context myContext;
    private final String CREATE_TABLE_ZTL_STREET = "CREATE TABLE manageZtlstreet ("
            + " via text not null,"
            +"latitude DOUBLE," 
            + "longitude DOUBLE);";

    public DBHelper(Context context,int version) {

        super(context, DBHelper.DATABASE_NAME,null,1);
        this.myContext = context;
    }

    @Override
    public void onCreate(SQLiteDatabase database) {
        //  database.openOrCreateDatabase(database.getPath(), null);
        database=SQLiteDatabase.openDatabase(database.getPath(), null, SQLiteDatabase.NO_LOCALIZED_COLLATORS|SQLiteDatabase.OPEN_READWRITE|SQLiteDatabase.CREATE_IF_NECESSARY);
        database.execSQL(this.CREATE_TABLE_ZTL_STREET);

        //DB_PATH = db.getPath();
        try {

            copyDataBase(database);
            Log.e("copy","copy");

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
        database.close();
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase(SQLiteDatabase db) throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(SQL_PATH);
        /*leggo il file*/
        BufferedReader buffread =  new BufferedReader(new InputStreamReader(myInput));
        String line = null;

        while((line = buffread.readLine()) != null) {

            //Log.e("line",""+line);
            //db.execSQL(line);!
            if(!line.equals(new String(""))){
                db.execSQL(line);
            }
        }

        myInput.close();
    }

        public void openDataBase() throws SQLException{
        SQLiteDatabase myDataBase = null;
        String myPath = DATABASE_NAME;
        myDataBase = SQLiteDatabase.openDatabase( DB_PATH+DATABASE_NAME, null, SQLiteDatabase.OPEN_READWRITE);
        Log.e("path",""+myDataBase);

    }

    @Override
    public synchronized void close() {

        /*  if(myDataBase != null)
            myDataBase.close();
         */
        super.close();

    }

    @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
        database.execSQL("DROP TABLE IF EXISTS manageZtlStreet;");
        //database.close();
        this.onCreate(database);
    }

    public Cursor getZtlStreet(){
        String query = "select latitude ,longitude from manageZtlstreet";

        SQLiteDatabase rdb = getWritableDatabase();
        /** Cursor cursor=rdb.rawQuery(query,null);
        rdb.close();
        return cursor;*/return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:02:14.627

您不应该直接使用文件 ztlBolo.db。

馊主意：`private static String DB_PATH = "/data/data/"+context.getPackageName()+"/databases/";`

我的实现：

```
public class UtilDB {

private static final String DATABASE_NAME = "cool_db.db";
private static final int DATABASE_VERSION = 1;

private final String SQL_CREATE_MY_COOL_TABLE = "CREATE  TABLE `cool_table` ...";

private SQLiteDatabase mDB = null;
private MyDBHelper mDBHelper = null;
private static UtilDB mInstance = null;

//Using pattern singleton
public static UtilDB getInstance(Context context) {
    if (mInstance == null) {
        mInstance = new UtilDB(context);
    }

    mInstance.open();

    return mInstance;
}

private UtilDB(Context context) {       
    mDBHelper = new MyDBHelper (context, DATABASE_NAME, null, DATABASE_VERSION);
}

private void open() throws SQLException {
    //If connection to db is not open then will open connection
    if ((mDB == null) || (!mDB.isOpen())) {
        mDB = mDBHelper.getWritableDatabase();
    }
}

public void close() {
    mDB.close();
}

private class MyDBHelper extends SQLiteOpenHelper {

    public MyDBHelper (Context context, String name, CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase _db) {
        _db.execSQL(SQL_CREATE_MY_COOL_TABLE );
    }

    @Override
    public void onUpgrade(SQLiteDatabase _db, int oldVersion, int newVersion) {
        _db.execSQL("DROP TABLE IF EXISTS \"cool_table\"");

        onCreate(_db);
    }
} 
```

}

# javascript - UIWebView 登录表单（iPad 应用）

> ID：16149835
> 
> 赞同：1
> 
> 时间：2013-04-22T14:37:56.127
> 
> 标签：javascript, objective-c, xcode, login, uiwebview

上周我一直在拉我的头发，但仍然没有靠近。

我为我的大学项目构建了一个应用程序，它将所有服务组合成一个，（Blackboard、Intranet、Email）这些都有单独的登录，在单独的网页上。

我的目标是将所有这些服务组合到一个应用程序中，只有一个集中登录。但是登录根本不适合我，他们使用基于表单的登录，具有 javascript 背景。

我试过 ASIHTTP：

```
-(void)startWebViewLoad{
NSString *emailURL = @"https://home.swan.ac.uk";
NSURL *url = [NSURL URLWithString:emailURL];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:@"username" forKey:@"user_name"];
[request setPostValue:@"password" forKey:@"password"];

NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webViewEmail loadRequest:requestObj]; 
```

我可能把它放在代码的错误部分（我在 UIWebView 中登录后显示页面）但这不会让我全部登录。

有没有更好的使用表格登录的方法？或者我是否关闭了我当前的代码

感谢您的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:48:18.013

您创建请求但从不发送。创建`request`对象后添加：

```
 [request setRequestMethod:@"POST"];
    [request setDelegate:self];
    [request start]; 
```

警告：这将在请求运行时阻止 UI。最好使用`[request startAsynchronous]`，但这需要您重构代码。

# c++ - 临时值情况下 push_back 和 emplace_back 的区别

> ID：16149837
> 
> 赞同：0
> 
> 时间：2013-04-22T14:38:08.213
> 
> 标签：c++, vector, c++11

考虑这个片段：

```
#include <vector>

struct A
{
   A(int b): m_b(b) { }

private:
   int m_b;
};

int main()
{
    std::vector<A> vec;

    vec.push_back( A(3) );

    vec.emplace_back( 3 );
} 
```

在传递临时值的特定情况下，编译器不会优化的两个调用之间是否有任何区别？我应该更喜欢其中一个吗？

# windows-7 - ffmpeg 扩展未安装

> ID：16149840
> 
> 赞同：-2
> 
> 时间：2013-04-22T14:38:18.447
> 
> 标签：windows-7, ffmpeg, 64-bit, wamp

我正在使用 wamp 服务器 v2.2 x64 和 php 版本 5.3.13。我试图在两天内安装 ffmpeg。我放松了这个步骤：

*   下载 x64 的 dll 文件（我使用的是 windows7 x64）
*   将 ffmpeg.dll 复制到 bin\php\php5.3.13\ext
*   将其余 dll 文件复制到 system32
*   从 wamp 服务器启用 ffmpeg 扩展。

我检查了 phpinfo() 但它不起作用。顺便说一句，有什么方法可以从视频中获取海报图像的帧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T10:33:02.300

为了开始`php_ffmpeg`工作，您将不得不找到使用 VC9 编译器以线程安全的方式将其重新编译为 64 位的人。

你可能会觉得这很困难，我只是在谷歌上搜索了一下，找不到任何东西。

如果您卸载 WAMP 64 位并安装 WAMP 32 位，您会发现它更容易。在那个环境中有一个`php_ffmpeg.dll`可用的

> PS 在 64 位操作系统上运行 32 位 WAMP 没有问题。

# wordpress - 在 WordPress 循环中显示类别

> ID：16149841
> 
> 赞同：0
> 
> 时间：2013-04-22T14:38:22.430
> 
> 标签：wordpress, post, thumbnails, show, categories

嗨，我在 WP 页面中添加了一个循环代码，以显示帖子的列表。它工作正常，但它显示了我发布的每篇文章，即使不在选择的类别中。这是一个问题，因为有些帖子不应该显示！请问你能帮帮我吗？

```
<?php  $posts = get_posts('category=Products&numberposts=-1'); 
            foreach($posts as $post) : setup_postdata($post);
                ?><li><div class="fotoBoxContent"><a class="fotoBox" href="<?php the_permalink(); ?>"><?php the_post_thumbnail(); the_title(); ?></a></div></li>
            <?php  endforeach; ?> 
```

显示“产品”类别的帖子，也显示“产品”子类别的帖子，但显示其他类别的帖子，包括“未分类”。

PS：是打印的，在页面标题下方，“cat : 11,10,13,14,16,9,12,|”有办法避免这种打印吗？谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:54:40.217

类别必须是 ID 而不是名称。另外，尝试设置`get_posts()`使用参数数组而不是内联：

```
<?php
$args = array(
'category' => '*ID*',
'numberposts' => -1
);

$posts = get_posts($args); 
foreach($posts as $post) : setup_postdata($post); ?>
    <li>
       <div class="fotoBoxContent">
       <a class="fotoBox" href="<?php the_permalink(); ?>">
       <?php the_post_thumbnail(); the_title(); ?>
       </a>
       </div>
    </li>
<?php endforeach; ?> 
```

来自 WordPress Codex -**注意：**类别参数需要是类别的 ID，而不是类别名称。 [http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:51:39.253

“产品”是您要抢夺的类别的实际内容吗？我会仔细检查。您需要类别的 slug，而不是其显示名称。

# php - 如何构建此更新查询

> ID：16149842
> 
> 赞同：0
> 
> 时间：2013-04-22T14:38:23.410
> 
> 标签：php, mysql, sql-update

我有两个值来自`URL`. 这是那些，

```
$_GET['a'] // this variable has a email address
$_GET['b'] // this variable has a code to activate my account. 
```

我正在尝试使用这两个值创建 UPDATE 查询，但问题是这两个值属于两个不同的表。`email`在联系人表中，`active`列在用户表中。

到目前为止，这是我的代码：

```
$q = "UPDATE tutors SET active = NULL 
      WHERE (active='" . mysqli_real_escape_string($dbc, $_GET['z']) . "') 
      LIMIT 1"; 
```

这段代码对我有用。但我需要检查`WHERE`子句中的两个值。谁能帮我建立这个查询？

**更新 ：**

```
$q = "UPDATE tutors t, contact c SET t.active = NULL 
      WHERE t.active = '" . mysqli_real_escape_string($dbc, $_GET['z']) . "' 
          AND c.email = '" . mysqli_real_escape_string($dbc, $_GET['y']) . "' 
          AND t.contact_id = c.contact_id
      LIMIT 1"; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:48:53.000

**猜测一下**`tutors`：如果你的和`contacts`通过表`contact_id`中的a 链接，这样的事情会起作用`tutors`。

```
<?php
$q = "UPDATE tutors T, contacts C SET T.active = NULL 
WHERE T.active = '" . mysqli_real_escape_string($dbc, $_GET['z']) . "' 
AND C.email = '" . mysqli_real_escape_string($dbc, $_GET['a']) . "' 
AND T.contact_id = C.contact_id" 
```

但是...我需要有关您的数据库架构的更多信息，以使其成为更准确的答案。

# sqlite - 如何在sqlite中使用变量

> ID：16149843
> 
> 赞同：2
> 
> 时间：2013-04-22T14:38:27.447
> 
> 标签：sqlite, cordova

在 SQL 中创建了以下代码，但需要在 sqlite 中使用它（特别是 phonegap）。

```
INSERT INTO actions(Action) VALUES ('Go to the pub');
SET @aid = LAST_INSERT_ID();

INSERT INTO statements(statement, Language) VALUES ('Have a pint', 'English');
SET @sid = LAST_INSERT_ID();

INSERT INTO Relationships(SID,AID) VALUES (@sid,@aid); 
```

然而，我们遇到的问题是如何在 sqlite 中声明变量。

LAST_INSERT_ID() 将变为 last_insert_rowid()，但是 SET @aid = 的 sqlite 版本是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:30:56.353

SQLite 没有变量。

在像 SQLite 这样的嵌入式数据库中，没有单独的服务器机器甚至进程，因此当相同的控制流和处理逻辑可以在应用程序中完成时，向 DB 引擎添加编程语言是没有意义的本身。

只需使用三个单独的`INSERT`语句。（在 WebSQL 中，结果对象具有`insertId`属性。）

# xml - 在 XSL 中隐藏 XML 元素？

> ID：16149844
> 
> 赞同：2
> 
> 时间：2013-04-22T14:38:28.250
> 
> 标签：xml, xslt, xml-parsing, rss

我对 xsl 还很陌生，正在尝试找到一种方法来隐藏或静音 wordpress rss 提要的 xml 中除了两个节点之外的所有节点，结构如下：

```
?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:wfw="http://wellformedweb.org/CommentAPI/"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:atom="http://www.w3.org/2005/Atom"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
>
<channel>
    <title>Title</title>
    <atom:link href="http://www.alink.com" rel="self" type="application/rss+xml" />
    <link>http://www.alink.com</link>
    <description>Just another WordPress site</description>
    <lastBuildDate>Sun, 21 Apr 2013 22:13:55 +0000</lastBuildDate>
    <language>en-US</language>
    <sy:updatePeriod>hourly</sy:updatePeriod>
    <sy:updateFrequency>1</sy:updateFrequency>
    <generator>http://wordpress.org/?v=3.5.1</generator>

    <item>
        <title>A Title</title>
        <link>http://www.alink.com</link>
        <comments>comments</comments>
        <pubDate>Sun, 21 Apr 2013 22:13:55 +0000</pubDate>
        <dc:creator>aUser</dc:creator>
        <category><![CDATA[Uncategorized]]></category>
        <guid isPermaLink="false">http://www5.uifoundation.org/news/?p=112</guid>
        <description><![CDATA[Post[...]]]></description>
        <content:encoded> Posted October 10, 2013 </content:encoded>
        <wfw:commentRss>http://www.alink.com</wfw:commentRss>
        <slash:comments>0</slash:comments>
    </item> 
```

但我只想在我的转换中显示频道/标题和频道/链接。我正在考虑在所有节点上使用空模板，就像这样

```
<xsl:template match="channel/* EXCEPTION channel/item/title | channel/item/link" /> 
```

我不确定如何声明异常。如果有更好的方法可以做到这一点，我也会对此持开放态度

我真的只是希望输出是 的无序列表`item/title`，其值为`item/link`，其他所有内容都隐藏。输出的一个例子是：

```
<ul>
  <li>
    <a href= "www.aLink.com">A Title</a>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:43:43.697

您可以使用单独的模板来执行此操作，其中一些是空的，并且具有不同的优先级：

```
<xsl:template match="channel/*" priority="0" /> <!-- swallow these, no output -->

<xsl:template match="channel/item | channel/link" priority="1">
   <xsl:copy-of select="." /> <!-- copy to output -->
</xsl:template> 
```

在 and 的情况下`channel/item`，`channel/link`第二个模板将覆盖第一个模板，因为它的优先级更高。对于 的其他子级`channel`，第一个模板将触发。

（请注意，模板具有基于匹配模式类型的默认优先级；如果两个具有相同优先级的模板匹配同一个节点，也有一些规则。但是，如果您明确优先级，只要有两个模板可能匹配同一个节点，您不必摆弄那些看不见的规则。）

在没有其他模板指定如何处理`<rss>`和`<channel>`的情况下，将应用默认模板，它们将被处理但不会复制到输出中，文本节点除外。那会有点乱。如果要将这两个元素（但不是它们的所有后代）复制到输出，请尝试以下模板：

```
<xsl:template match="rss | channel">
  <xsl:copy>
    <xsl:apply-templates />
  </xsl:copy>
</xsl:template> 
```

# 编辑

既然已经指定了所需的输出，我想说的方法应该完全不同。您的第一个模板可以是：

```
<xsl:template match="/">
  <ul>
    <xsl:apply-templates select="rss/channel/item" />
  </ul>
</xsl:template> 
```

并且您的第二个模板将每个项目转换为`<li>`：

```
<xsl:template match="item">
  <li>
    <a href="{link}"><xsl:value-of select="title" /></a> 
  </li>
</xsl:template> 
```

这更像是一种“拉”而不是“推”的方法。您需要输入中的特定节点，并且输入的结构是高度可预测的。通过使用特定的 apply-templates 选择表达式，而不是通用的`<xsl:apply-templates select="*" />`，您避免了对异常模板的需要，因为只有您选择的节点将被处理。

# c++builder - C Builder 删除 FMX ImageControl 上的边框

> ID：16149845
> 
> 赞同：1
> 
> 时间：2013-04-22T14:38:30.633
> 
> 标签：c++builder, firemonkey

我正在使用 RAD Studio XE3 中的 ImageControl 在我的 Firemoney 桌面表单上显示位图图像。图像显示正确，但周围有边框。图像具有白色背景并显示在白色面板上。

是否可以删除此边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:50:49.367

使用`TImage`“形状”组件选项卡中的控件。

# android - Android ViewPagerIndicator - UnderlinePageIndicator 在顶部而不是底部？

> ID：16149852
> 
> 赞同：1
> 
> 时间：2013-04-22T14:38:55.593
> 
> 标签：android, actionbarsherlock, viewpagerindicator

我正在使用 ActionBarSherlock + HoloEverywhere + ViewPagerIndicator 库。

1.  有没有办法将 UnderlinePageIndicator 放在顶部而不是底部？
2.  在 Jelly Bean 上，UnderlinePageIndicator 不会在几站时自动隐藏，而在 GingerBread 上却可以完美运行。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T05:55:53.520

您可以使用 TabPageIndicator 并通过编辑名为 vpi_tab ???_holo 的九个补丁 PNG 来更改下划线的*外观*。每个屏幕密度有 6 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T13:54:19.783

只需根据需要设置高度：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.viewpagerindicator.UnderlinePageIndicator
    android:id="@+id/pageIndicator"
    android:layout_height="2dp"
    android:layout_width="fill_parent"
    />

<android.support.v4.view.ViewPager
    android:id="@+id/vp_pages"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
</LinearLayout> 
```

# git - 我不明白 git 短列表输出。短日志

> ID：16149855
> 
> 赞同：0
> 
> 时间：2013-04-22T14:38:59.147
> 
> 标签：git, github

我在我的 git repo 上运行以下命令

```
git shortlog -s -n -e --all 
```

它给了我一整页的用户名，但我是唯一一个致力于我的项目的人。

按照以下步骤，您将看到我在说什么

```
git clone git@github.com:xxxx/xxxx.github.com.git
cd git shortlog -s -n -e --all
git shortlog -s -n -e --all 
```

输出将如下所示：

```
73  Jade Dominguez <plusjade@gmail.com>
21  Jade <plusjade@gmail.com>
10  Yuya Saito <studiomohawk@gmail.com>
 4  Andrea Schiavini <andrea.schiavini@gmail.com>
 3  Anton Vattay <3martini@gmail.com>
 2  Abhijeet Kumar <abhijeet.kumar.ak@gmail.com>
 2  David Joos <david.joos@gmail.com>
 2  Laura Cabrera <lzcabrera@gmail.com>
 2  jayraj <jogjayr@gmail.com>
 1  Adam Kerney <adam.w.kerney@gmail.com>
 1  Alessio Caiazza <nolith@abisso.org>
 1  Alistair Hutchison <github@alistairh.co.uk>
 1  Andrew Kraut <akraut@gmail.com>
 1  Brandon Philips <brandon@ifup.org>
 1  Darren Jeacocke <dazonic@me.com>
 1  Hong Xu <xuhdev@gmail.com>
 1  Ian Li <i@techotaku.net>
 1  James Fleeting <twofivethreetwo@gmail.com>
 1  Jeff Kuchta <jkuchta@gmail.com>
 1  Jesse Chan-Norris <jcn@pith.org>
 1  Kori Roys <kori@koriroys.com>
 1  Liu Lantao <liulantao@gmail.com>
 1  Loren Sands-Ramshaw <lorensr@gmail.com>
 1  Lukas Knuth <mr.luke.187@googlemail.com>
 1  Marko Bauhardt <marko.bauhardt@googlemail.com>
 1  Martijn Pieters <mj@zopatista.com>
 1  Matt Swanson <mdswanson@sep.com>
 1  Michael-Keith Bernard <mkbernard.dev@gmail.com>
 1  Pradeep Nayak <pradeep1288@gmail.com>
 1  Simon Starr <simon@starr.cx>
 1  Stephen Ball <sdball@gmail.com>
 1  Tommaso Visconti <tommaso.visconti@gmail.com>
 1  Victor Widell <victor@topmost.se>
 1  christine <piroko@gmail.com> 
```

我不明白为什么？我是唯一一个致力于我的项目的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:41:40.640

看起来你克隆了 Jekyll-Bootstrap。克隆会保留项目的完整历史记录，这就是您在日志中看到的内容。要跳过较旧的历史记录，请执行

```
git log 77fc4c0d57..HEAD 
```

（`77fc4c0d57`是您克隆的提交。）

# ios-simulator - ios 模拟器——永远禁用慢动画？

> ID：16149856
> 
> 赞同：7
> 
> 时间：2013-04-22T14:38:59.907
> 
> 标签：ios-simulator

我每天不小心转动慢速动画大约 50 次（我想这可能是因为我通过 Synergy 使用虚拟键盘）......我怎样才能永远禁用模拟器中的慢速动画？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-30T19:44:00.760

编辑：从带有 iOS 7.0.3 模拟器的 Xcode 5.0.1 开始，现在将`cmd`+`T`声明为切换慢速动画的键盘快捷键，并消除了我原来的答案中列出的观察到的非正式快捷键。

* * *

这也是我遇到的**所有****......**时间**，**但我终于弄清楚我在做什么以使其在我的模拟器中启用。

 ****事实证明，iOS 模拟器有几个快捷键可以启用/禁用在模拟器中导航（例如访问多任务栏）或使用系统快捷键进行屏幕截图时很容易触发的慢速动画。我遇到了两个未记录的键盘快捷键：

*   双击 CMD+Shift（访问多任务栏时很容易不经意地做）
    *   备选：Shift + CMD 双击
*   三按 Shift

无论采用哪种方法，如果您在 Xcode 中运行调试器会话，则当这些快捷方式激活/停用慢动作模式时，您可以轻松查看控制台消息记录。

不幸的是，似乎没有办法禁用 iOS 模拟器的这些“功能”。到目前为止，我所能做的只是稍微改变我的工作流程以避免可能触发慢动作动画的组合键，但现在有一种更快的方法来撤消该行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T16:38:19.970

只需双击 Shift 即可在模拟器中为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T11:28:09.363

对于较新的模拟器，只需按 CMD + T 即可选中/取消选中慢速动画。****

# php - 向 mysql 添加其他字段

> ID：16149859
> 
> 赞同：0
> 
> 时间：2013-04-22T14:39:03.867
> 
> 标签：php, javascript

嗨，我的网站上有一些 Javascript，允许用户向表单添加其他字段。但是我不确定如何将这些附加字段添加到数据库中。

我的代码在这里，任何关于如何将其生成为 php 变量的建议将不胜感激。

```
 function addField(){
 var newContent = "<div class='item'><br><label for='qualification_title'>School   Qualification Title</label><input type='text' name='schoolqualificationtitle[]'/></div><div   class='item last'><br><label for='qualification_result'>Grade<em>*</em></label><input   type='text' id='result' name='schoolqualificationresult[]' />";
  $("#myfields").append(newContent);
  } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:48:13.767

当您发布这些附加字段时，数据将在数组 schoolqualificationtitle 中传递给 PHP。

```
foreach($_POST['schoolqualificationtitle'] as $schoolqualificationtitle){
    // do some database shizzle
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:46:40.970

听起来一个用户可以拥有几个项目。所以这是一个一对多的关系，这意味着您需要为每个添加的项目添加一行。

# paypal - 旧沙盒贝宝帐户 - 定期付款 IPN

> ID：16149865
> 
> 赞同：0
> 
> 时间：2013-04-22T14:39:21.660
> 
> 标签：paypal, paypal-ipn

由于我不记得密码，我无法恢复我的旧沙盒帐户。我不太关心测试帐户，但想停止不断访问我的测试网站的 IPN（定期付款）。

谁能帮我这个？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:11:17.490

你有几个选择。一种是更改 IPN 脚本的路径。如果您没有任何其他有效/实时 IPN 发送给它。更改路径名、重命名文件等。这将导致 IPN 失败。选项 2，如果您可以向我提供您进行此设置的帐户的测试沙箱电子邮件地址，我可以查看该帐户并从我这边禁用它。

# selenium - rails 3.2.12 升级后 Authlogic / Selenium 中断

> ID：16149869
> 
> 赞同：0
> 
> 时间：2013-04-22T14:39:34.650
> 
> 标签：selenium, ruby-on-rails-3.2, authlogic, rspec-rails

我正在使用 Authlogic 并且在升级到 Rails 3.2.12 后很难让我的 Selenium 测试与**:js=>true一起使用。**相同的测试用于在 Rails 3.1.3 下工作。我正在使用 Spork 运行我的测试。

我正在通过 Selenium 登录 Firefox (19.0.2)，填写登录表单，但随后我从 Authlogic 收到权限错误，即标准**“不允许您访问此操作”。**

我可以看到很多人对此有疑问，但正如我所提到的，只有在从 Rails 3.1.3 升级到 Rails 3.2.12 后，这对我来说才是一个问题。我怀疑问题可能出在我的 spec_helper 文件（如下）中，尤其是在

> 模块授权逻辑

我从这里得到的块：

[Capybara + Cucumber + Selenium Driver 的 Authlogic 不工作](https://stackoverflow.com/questions/10775472/authlogic-with-capybara-cucumber-selenium-driver-not-working/12378166#12378166)

```
**spec_helper.rb**

require 'rubygems'
require 'spork'
require 'authlogic/test_case' 

include Authlogic::TestCase

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)

  require 'rspec/rails'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|

    config.color_enabled = true

    ApplicationController.skip_before_filter :activate_authlogic
    config.before(:each, :type => :request) do
      activate_authlogic
    end

    config.include FactoryGirl::Syntax::Methods

    config.include Capybara::DSL

    config.use_transactional_fixtures = false

    config.before(:suite) do
      DatabaseCleaner.clean_with(:truncation)
    end

    config.before(:each) do
      DatabaseCleaner.strategy = :transaction
    end

    config.before(:each, :js => true) do
      Capybara.current_driver = :selenium

      DatabaseCleaner.strategy = :truncation

      module Authlogic
          module Session
            module Activation
              module ClassMethods
                def controller
                  if !Thread.current[:authlogic_controller]
                    Thread.current[:authlogic_controller] = Authlogic::TestCase::MockController.new
                  end
                Thread.current[:authlogic_controller]
              end
            end
          end
        end
       end
    end

    config.before(:each) do
      DatabaseCleaner.start
    end

    config.after(:each) do
      DatabaseCleaner.clean
    end

    config.include(MailerMacros)
    config.before(:each) { reset_email }

    config.mock_with :mocha

    config.infer_base_class_for_anonymous_controllers = false

    config.order = "random"

    config.treat_symbols_as_metadata_keys_with_true_values = true
    config.filter_run :focus => true
    config.run_all_when_everything_filtered = true
  end
end

Spork.each_run do
  FactoryGirl.reload
end 
```

我的理解是 Authlogic 和 Selenium Webdriver 在不同的线程上工作，因此在 spec_helper 文件中需要这个补丁。

在请求规范中，我收到来自 Authlogic 的权限错误。这是有问题的请求规范测试：

```
# UNIT REQUEST SPEC
require 'spec_helper'

describe "Units" do

  describe "GET /admin/units/new" do
    before(:each) do
      activate_authlogic
      UserSession.create FactoryGirl.create(:admin_user, :email => "foo@bar.com", :password => "password", :password_confirmation => "password")      

      visit root_path
      fill_in "user_session[email]", :with => "foo@bar.com"
      fill_in "user_session[password]", :with => "password" 
      click_button "Sign In"    
    end

    it "displays a pop up dialog after unit is created", :focus, :js => true do
      visit new_admin_unit_path
      fill_in "Title", :with => "Unit Title"
      fill_in "Code", :with => "U-TEST"
      fill_in "Learning Outcome", :with => "Some Learning Outcome"
      fill_in "unit[learning_outcomes_attributes][0][assessment_methods_attributes][0][content]", :with => "Some Assessment Criteria"

      click_button "Save and Publish"      
      page.should have_css('div.ui-dialog')
    end
  end
end 
```

我的 Capybara 测试适用于：

```
activate_authlogic
UserSession.create FactoryGirl.build(:user) 
```

在 before(:each) 块中，问题仅在使用 :js=>true 时出现

所以，我的问题是：

*   在 Rails 3.2.x 中，spec_helper 修复（模块 Authlogic ...）是否不再有效。
*   如果情况确实如此，那么让它发挥作用的“正常”方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T22:02:21.020

今天刚刚重温了一遍。当我升级 Rails 时，我还将 capybara 升级到了最新版本（2.1.0）。似乎将 capybara 从这个版本 (2.1.0) 降级到版本 2.0.1 似乎可以解决问题。我可以看到 capybara (2.0.1) 使用 xpath (1.0.0) 而 capybara (2.1.0) 使用 xpath (2.0.0) 以及不同版本的 nokogiri gem。我不知道那里是否有链接，但如果有人愿意看一下，这是我的 gem 文件：

```
source 'http://rubygems.org'

gem 'rails', '3.2.12'

gem 'rack-mini-profiler'        
gem 'authlogic'                 
gem 'rails3-generators'   
gem 'mysql2'  
gem 'declarative_authorization' 
gem 'kaminari'                  
gem "foreigner"                
gem 'validates_timeliness'     
gem "activerecord-import", ">= 0.2.0"
gem 'ezcrypto'                 
gem 'thin'                       
gem 'exception_notification'    
gem 'mail'
gem 'libv8', '~> 3.11.8.0'
gem "therubyracer", :require => 'v8'
gem 'jasmine', :group => [:development, :test]  
gem 'sprockets'
gem 'jquery-rails'
gem 'tinymce-rails'             
gem 'acts_as_list'              
gem 'cocaine'
gem 'rmagick'                   
gem 'carrierwave'               
gem 'remotipart'                
gem 'deep_cloneable', '~> 1.4.0'
gem 'delayed_job_active_record' 
gem 'daemons'
gem 'rb-readline'
gem "jquery-migrate-rails", "~> 1.0.0"
gem 'ransack'
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', "~> 3.2.3"
  gem 'coffee-rails', "~> 3.2.1"
  gem 'uglifier', '>= 1.0.3'
end

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
group :development, :test do
  gem 'cheat'                   
  gem 'ruby-growl'
  gem 'letter_opener'           
  gem 'rspec-rails', "~> 2.0"
  gem 'database_cleaner'        
  gem 'rb-fsevent', '~> 0.9.1'
  gem 'guard-rspec'
  gem 'spork-rails'
  gem 'guard-spork'
  gem 'factory_girl_rails'
  gem 'capybara', '2.0.1'
  gem 'launchy'
  gem 'mocha', :require => false
  gem 'better_errors'
  gem 'binding_of_caller'
  gem 'meta_request'
end 
```

# django - 如何修改查询集并将其保存为新对象？

> ID：16149871
> 
> 赞同：4
> 
> 时间：2013-04-22T14:39:36.363
> 
> 标签：django, django-queryset

我需要查询特定模型的一组对象，更改单个属性/列（“帐户”），然后将整个查询集的对象保存为新对象/行。换句话说，我想复制对象，并在副本上更改单个属性（“帐户”）。我基本上是在创建一个新帐户，然后遍历每个模型并将先前帐户的对象复制到新帐户，因此我将使用不同的模型重复执行此操作，可能使用 django shell。我应该如何处理这个？可以在查询集级别完成还是我需要遍历所有对象？

IE，

```
MyModel.objects.filter(account="acct_1")
# Now I need to set account = "acct_2" for the entire queryset, 
# and save as new rows in the database 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T14:44:35.227

从[文档](https://docs.djangoproject.com/en/1.4/ref/models/instances/#how-django-knows-to-update-vs-insert)：

> 如果对象的主键属性未设置，或者已设置但记录不存在，Django 将执行 INSERT。

因此，如果将`id`or设置`pk`为 None 它应该可以工作，但是我在 SO 上看到了对此解决方案的冲突响应：[Duplicating model instances and their related objects in Django / Algorithm for recursively duplicating an object](https://stackoverflow.com/questions/437166/duplicating-model-instances-and-their-related-objects-in-django-algorithm-for)

该解决方案应该可以工作（感谢@JoshSmeaton 的修复）：

```
models = MyModel.objects.filter(account="acct_1")
for model in models:
  model.id = None
  model.account = "acct_2"
  model.save() 
```

我认为就我而言，我有一个`OneToOneField`正在测试的模型，所以我的测试不适用于这个基本解决方案是有道理的。但是，我相信它应该工作，只要你照顾 OneToOneField 的。

# html - 通过 PhantomJS 将 HTML 页面转换为 SVG 图像

> ID：16149884
> 
> 赞同：3
> 
> 时间：2013-04-22T14:39:58.543
> 
> 标签：html, svg, rendering, phantomjs

我目前正在测试[PhantomJS](http://phantomjs.org/)系统以生成不同网站的屏幕截图...

图像的当前渲染输出是**.png**但我需要的是**SVG 图像**。

有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T09:33:44.357

在这里，我找到了一个将网页转换为矢量格式屏幕截图的工具：[CutyCapt](http://cutycapt.sourceforge.net/) - 它还可以渲染为其他格式，例如 png...

玩得开心！:)

# maven - 带有 maven 的“test-utils”项目 - 如何管理依赖项

> ID：16149893
> 
> 赞同：6
> 
> 时间：2013-04-22T14:40:22.920
> 
> 标签：maven

假设我有很多项目需要的一堆代码，但只是在测试中。

因此，我想为它创建一个单独的 maven 项目，例如，`carlos-test-utils`并将其添加为我的项目中的测试依赖项。

但是，在我的`carlos-test-utils`项目中，我还需要 JUnit。因此，我将其添加为测试依赖项，这显然不起作用，因为我将代码放在`src/main/java`.

我想知道处理这种事情的最佳方法是什么。

按规定放置部门？

`.java`跨项目复制文件的一些肮脏棘手的事情？

还有什么别的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T14:47:47.753

您可以通过[maven-jar-plugin](http://maven.apache.org/plugins/maven-jar-plugin/)进行管理，该插件应通过以下方式用于此类情况：

这应该在应该提供测试类的模块/项目中完成，并且代码应该放在测试代码的常用文件夹*src/test/java*而*不是**src/main/java*中。您的测试代码需要的所有依赖项都应该像通常的依赖项一样添加到范围*test*中。

```
<project>
  ...
  <build>
    <plugins>
      ...
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.6</version>
        <executions>
          <execution>
            <goals>
              <goal>test-jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

在您喜欢使用测试依赖项的项目中，只需像这样使用它：

```
<project>
  ...
  <dependencies>
    <dependency>
      <groupId>groupId</groupId>
      <artifactId>artifactId</artifactId>
      <type>test-jar</type>
      <version>version</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
  ...
</project> 
```

# mysql - 主键索引和非唯一索引之间的 Mysql 索引性能

> ID：16149894
> 
> 赞同：0
> 
> 时间：2013-04-22T14:40:27.293
> 
> 标签：mysql, performance

我有一个包含三列的大表（1 亿个条目）`(id1, id2, id3)`

所有列都是`int(11)`.

id1 是主键。所以它上面有一个默认的唯一索引。

我还在 id2 上创建了一个索引。但是 id2 的值不是唯一的。大约有 500.000 个唯一条目。

现在，当我有以下查询时：

`select count(*) from table where id2 < 100.000`

查询结果约为400万，持续时间为40秒（获取时间为0）。

当我有以下查询

`select count(*) from table where id1 < 4.000.000`

查询结果又是 400 万，但持续时间约为 6 秒。

如果我进行如下查询

`select * from table where id2 < 100.000`

`select * from table where id1 < 4.000.000`

性能差异的比率变得更糟。

这种性能差异的原因可能是什么。两个索引的属性（据我从 SHOW INDEX 命令中了解到）是相同的（例如，两者都是 b 树索引），除了（如上所述）其中一个是主键索引，另一个是主键索引是非唯一索引。

谢谢艾哈迈德

# ember.js - 在测试中重置 ember-data FixtureAdapter 存储/模型

> ID：16149896
> 
> 赞同：9
> 
> 时间：2013-04-22T14:40:30.733
> 
> 标签：ember.js, ember-data

我们的应用程序使用带有 FixtureAdapter 的 ember-data。我们正在使用 Jasmine 和 js-test-driver 测试模型代码（各种 JS 计算）。每个 it 块在 beforeEach 块中创建自己的记录集。

这适用于 ember-1.0.0-rc.1 和在 2013-03-05（rev 7575f5a）本地构建的 ember-data。我目前正在尝试升级到 1.0.0-rc.3 和最新的 ember-data，但是遇到了具有唯一 ID 的障碍。运行所有测试时出现以下错误：

```
Error: assertion failed: The id 1001 has already been used with another record of type .Foo. in http://localhost:56390/js/lib/ember-1.0.0-rc.3.js (line 52) 
```

它看起来像是一个更新版本的 ember-data 断言唯一 ID。不幸的是，我们的测试需要硬编码的 id 用于在每个测试的 beforeEach 块中重新创建的记录。所以每个测试都创建一个 id 为 1001 的 Foo。

有没有一种简单的方法可以让带有 FixtureAdapter 的商店重置其所有数据（从而忘记 Foo 1001）？我尝试使用以下方法重置固定装置：

```
App.Foo.FIXTURES = [] 
```

但是，ember-data 似乎仍然在某处跟踪旧记录。我也试过`App.reset()`了，但似乎没有重置商店。

我们也做

```
App.Store = DS.Store.extend({
    revision: 12,
    adapter: 'DS.FixtureAdapter'
}); 
```

在 beforeEach 块中，假设这将通过创建新存储来清除所有数据，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T15:09:05.360

我最初遇到了完全相同的问题，试图在单独测试之前生成记录。[考虑Rails 意义上](http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures)的固定装置是有帮助的，它们代表一组记录，在所有测试运行之前将被构造一次。

这与在每次测试之前建立个人记录的工厂风格相反，这是您似乎遵循的模式。

与其说是解决方案，不如说是一种解决方法，但我建议将所有固定装置放入一个或多个文件中，然后在所有测试之前加载它们。然后，您将从单独的测试中引用相同的记录，而无需重新构建它们。

夹具方法的最大警告是每次测试后都没有提供任何“回滚”。因此，如果您在测试中依赖原始值，则需要警惕变异记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T04:51:36.177

确保在每次测试运行之间运行 Ember.reset() （通过将它放在你的 jasmine beforeAll 块中）

# symfony - APYDataGridBundle 访问原始查询或项目列表

> ID：16149897
> 
> 赞同：1
> 
> 时间：2013-04-22T14:40:35.090
> 
> 标签：symfony, datagrid

```
$source = new Entity('MyEntity');
/* @var $grid Grid */
$grid = $this->get('grid');
$grid->setSource($source); 
```

任何人都知道这是否有可能获得网格执行的原始学说查询，以用实体中的适当项目填充自己。我需要做的就是在会话中存储将由网格显示的所有项目的有序 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T14:31:55.090

试试这个操作查询（）见文档：

[https://github.com/Abhoryo/APYDataGridBundle/blob/master/Resources/doc/grid_configuration/manipulate_query.md](https://github.com/Abhoryo/APYDataGridBundle/blob/master/Resources/doc/grid_configuration/manipulate_query.md)

# google-apps-script - 如何创建带有特定标签的 Gmail 邮件？

> ID：16149899
> 
> 赞同：3
> 
> 时间：2013-04-22T14:40:35.383
> 
> 标签：google-apps-script, gmail, google-api, gmail-imap, google-reader

我一直在使用[RSS2Email 将 Gmail 变成 Google Reader](http://wcm1.web.rice.edu/turning-gmail-into-google-reader.html)。

我想创建一个 Google Apps 脚本来执行此操作，以获得两个优势：

1.  调度将由 Google Apps 脚本处理。（无需专门的计算机来运行脚本。）

2.  生成的电子邮件将被**标记为 per-feed**，很好地组织事情。

[使用 Google Apps 脚本与Gmail Snooze](http://googleappsdeveloper.blogspot.com/2011/07/gmail-snooze-with-apps-script.html)的实现精神相同。

* * *

我了解如何获取提要。我卡住的地方是如何**使用特定标签**创建电子邮件。到目前为止我研究过的方法：

1.  Google Apps Scripts的[Gmail 服务](https://developers.google.com/apps-script/reference/gmail/)不允许这样做，至少不是很明显。
    *   `GmailApp.sendEmail`不允许您指定标签。这是有道理的，因为这是用于通用电子邮件发送。但 ...
    *   `GmailApp.sendEmail`return `GmailApp`，而不是您可以用来识别消息并稍后更改其标签的东西。
    *   该服务似乎也不允许您以编程方式创建 Gmail 过滤器，从而排除了解决此问题的另一种可能方法。
2.  [Gmail 迁移 API](https://developers.google.com/google-apps/email-migration/)非常适合执行此操作 - 但它不适用于普通的消费者 Gmail 帐户。嘎。
3.  谷歌的[IMAP 扩展](https://developers.google.com/google-apps/gmail/imap_extensions)可能允许这样做，但我不清楚。

我想我可以使用 1，将一些 UID 放入主题中，我可以使用它来查找传递的消息，添加标签（并希望通过删除 UID 来取消主题）。但这似乎有点笨拙。

使用 3，IMAP 扩展，看起来可能不那么笨拙，尽管可能需要更多的代码和测试工作。

其中有什么建议吗？是否有其他 API 或策略？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T19:54:18.987

Google Apps 脚本 GmailApp API 没有提供在您发送邮件时为邮件添加标签的方法，您*可以*通过 UI 执行此操作。这在问题跟踪器中显示为[问题 1859](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1859)，访问并加注星标以获取更新。

一种解决方法是利用线程 api。如果邮件被密送（bcc'd）给发件人，它也将作为新邮件出现在他们的收件箱中，我们可以在其中`getInboxThreads()`找到它。将标签添加到此线程，并可选择将其标记为已读，然后将其存档。

*代码也[可用作要点](https://gist.github.com/mogsdad/6515581)。*

```
/**
 * An alternative to GmailApp.sendEmail(), which applies a
 * label to the message thread in the sender's account.
 *
 * Sends an email message with optional arguments. The email can
 * contain plain text or an HTML body. The size of the email
 * (including headers, but excluding attachments) may not
 * exceed 20KB.
 *
 * @param {String} recipient    the addresses of the recipient
 * @param {String} subject      the subject line
 * @param {String} body         the body of the email
 * @param {Object} options      a JavaScript object that specifies
 *                              advanced parameters, as documented
 *                              for GmailApp.sendEmail()
 * @param {String} label        the label to be applied
 */
function sendAndLabel(recipient, subject, body, options, label) {
  var sender = Session.getActiveUser().getEmail();

  // Add sender to bcc list
  if (options.bcc) {
    options.bcc = options.bcc.split(',').concat(sender).join(',');
  }
  else {
    options.bcc = sender;
  }

  GmailApp.sendEmail( recipient, subject, body, options )

  // Check if label already exists, create if it doesn't
  var newLabel = GmailApp.getUserLabelByName(label);
  if (!newLabel) newLabel = GmailApp.createLabel(label);

  // Look for our new message in inbox threads
  Utilities.sleep(2000); // Wait for message to be received
  var inboxThreads = GmailApp.getInboxThreads();
  for (var t = 0; t < inboxThreads.length; t++) {
    var foundSubject = inboxThreads[t].getFirstMessageSubject();
    var numLabels = inboxThreads[t].getLabels().length;  // Could add more criteria
    if (foundSubject === subject && numLabels === 0) {
      // Found our thread - label it
      inboxThreads[t].addLabel(newLabel)
                     .markRead()
                     .moveToArchive();
      break;
    }
  }
} 
```

使用示例：

```
function test_sendAndLabel() {
  var recipient = Session.getActiveUser().getEmail();
  var subject = "Test Labelling";
  var body = "This email is testing message labelling.";
//  var options = {bcc:"someone@example.com"};
  var options = {};
  var label = "LabelTest";
  sendAndLabel(recipient, subject, body, options, label);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:52:33.813

是的，IMAP 是正确的方法。您可以找到一些第三方 IMAP 库来简化您的工作。

添加标签的命令是：STORE 123 +X-GM-LABELS (yourLabel)

关于 Gmail 标签的官方文档：

[https://developers.google.com/google-apps/gmail/imap_extensions#access_to_gmail_labels_x-gm-labels](https://developers.google.com/google-apps/gmail/imap_extensions#access_to_gmail_labels_x-gm-labels)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-05T23:12:07.860

`GmailApp.sendEmail()`返回一个对象会很方便，`GmailMessage`这样我们就可以获取它的 id 然后分配一个标签。它没有，但您可以使用此解决方法：

1.  使用将消息创建为草稿`GmailApp.createDraft()`

2.  使用 发送草稿消息[`GmailDraft.send()`](https://developers.google.com/apps-script/reference/gmail/gmail-draft#send())。此方法*确实*返回一个`GmailMessage`对象。

3.  分配标签（或者将其分配给整个线程，`GmailMessage.getThread().addLabel()`或者如果您想将其分配给单个邮件，您必须使用[此处](https://stackoverflow.com/a/63964522)所述的高级 Gmail 服务）。

# model-view-controller - ext.net 组合框无法从数据库加载数据

> ID：16149901
> 
> 赞同：0
> 
> 时间：2013-04-22T14:40:39.047
> 
> 标签：model-view-controller, data-binding, combobox, ext.net

我还尝试了以下代码..尝试使用处理程序

在索引.aspx

```
<ext:Store ID="Store1" IsPagingStore="true" runat="server">

             <Proxy>
                        <ext:AjaxProxy Url="../../Shared/JsonHandler.ashx">
                            <ActionMethods Read="GET" />
                            <Reader>

                                <ext:JsonReader Root="names" />
                            </Reader>
                        </ext:AjaxProxy>
                    </Proxy>
           <Model>
            <ext:Model ID="Model1" runat="server">
            <Fields>
            <ext:ModelField Name="name" Type="String" Mapping="nameList"  />

            </Fields>
            </ext:Model>
             </Model>
            </ext:Store>
            </Store> 
```

在 JsonHandler.ashx 中

```
 public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType ="text/json";
        var requestParams = new StoreRequestParameters(context);

        FormExampleController ex=new FormExampleController ();

        var list = ex.getValue();

        context.Response.Write(string.Format("{{'Names':{0}}}",JSON.Serialize(list)));

    } 
```

在表单控制器中

```
public List<string> getValue()
    {
        FormUser user = new FormUser();
        user.nameList = new List<string>
        {
            "A",
            "B",
            "C",
            "D"

        };
        return user.nameList;
    } 
```

这里再次将值传递给处理程序，但组合框显示为空！有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:34:24.707

是的，Store 不支持这种简单的结构。Store 需要对象的集合（对象应包含在模型中定义为字段的属性）

您应该将您的字符串列表转换为对象列表，例如

```
(new List<string>{"a", "b", "s"}).Select(s => new {FieldName = s}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:48:01.213

似乎无法将其绑定`Store`到一个简单的`List`或`Array`字符串。

以下是一个应该有效但无效的测试用例。我正在研究解决方案，并将很快发布更新。

**例子**

```
<%@ Page Language="C#" %> 

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        var store = this.ComboBox1.GetStore();

        store.DataSource = new List<string> { "A", "B", "C", "D" };
        store.DataBind();
    }
</script>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
<form runat="server">
    <ext:ResourceManager runat="server" />

    <ext:ComboBox ID="ComboBox1" runat="server" DisplayField="name">
        <Store>
            <ext:Store runat="server">
                <Model>
                    <ext:Model runat="server">
                        <Fields>
                            <ext:ModelField Name="name" />
                        </Fields>
                    </ext:Model>
                </Model>
            </ext:Store>
        </Store>
    </ext:ComboBox>
</form>
</body>
</html> 
```

以下示例绑定到一个简单`List<object>`的 .

**例子**

```
<%@ Page Language="C#" %> 

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        var store = this.ComboBox1.GetStore();

        store.DataSource = new List<object> { 
            new { name = "A" }, 
            new { name = "B" }, 
            new { name = "C" }, 
            new { name = "D" } 
        };

        store.DataBind();
    }
</script>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
<form runat="server">
    <ext:ResourceManager runat="server" />

    <ext:ComboBox ID="ComboBox1" runat="server" DisplayField="name">
        <Store>
            <ext:Store runat="server">
                <Model>
                    <ext:Model runat="server">
                        <Fields>
                            <ext:ModelField Name="name" />
                        </Fields>
                    </ext:Model>
                </Model>
            </ext:Store>
        </Store>
    </ext:ComboBox>
</form>
</body>
</html> 
```

# ios - ios 的接近配置文件 api

> ID：16149906
> 
> 赞同：1
> 
> 时间：2013-04-22T14:40:45.423
> 
> 标签：ios, sensors, proximity

如果 iPhone 与启用 BLE 的标签的距离超出特定距离，我想发出警报声。为此，我需要实现接近传感器配置文件。我搜索了适用于 ios 的 Proximity sensor profile API，但没有得到任何成功的结果。

# asp.net-mvc - ASP.NET MVC 4 从不同的控制器获取价值

> ID：16149911
> 
> 赞同：0
> 
> 时间：2013-04-22T14:41:04.150
> 
> 标签：asp.net-mvc, models, url-parameters

我有一个班级“学生”和其他班级“成绩单”。

每个教授都应该能够为每个学生填写一份成绩单。我已经能够使用默认的脚手架选项创建、列出、编辑记分表。

但是，当教授被定向到主页/学生时，他会看到默认选项，例如创建、编辑、删除，我还想添加一个“分数”选项，该选项将转到记分表模型的创建选项/控制器。

我能够做到这一点，但我想知道如何将 StudentID/name 传递给记分表控制器，以便知道正在为哪个学生创建记分表。

请指教。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:50:36.147

您可以使用 AJAX 将 id 作为参数发送并调用 Controller Action

# csv - 在 Python 中合并三个具有相同标题的 csv 文件

> ID：16149913
> 
> 赞同：2
> 
> 时间：2013-04-22T14:41:07.380
> 
> 标签：csv, python-3.x, header, merge

我有多个 CSV；但是，我很难合并它们，因为它们都有相同的标题。这是一个例子。

CSV 1：

```
ID,COUNT
1,3037
2,394
3,141
5,352
7,31 
```

CSV 2：

```
ID, COUNT
1,375
2,1178
3,1238
5,2907
6,231
7,2469 
```

CSV 3：

```
ID, COUNT
1,675
2,7178
3,8238
6,431
7,6469 
```

我需要合并 ID 上的所有 CSV 文件，并为每个计数列创建一个带有附加列的新 CSV。

我一直在用 2 个 CSV 对其进行测试，但仍然没有得到正确的输出。

```
with open('csv1.csv', 'r') as checkfile: #CSV Data is pulled from
    checkfile_result = {record['ID']: record for record in csv.DictReader(checkfile)}

with   open('csv2.csv', 'r') as infile:
#infile_result = {addCount['COUNT']: addCount for addCount in csv.Dictreader(infile)}
with open('Result.csv', 'w') as outfile:
    reader = csv.DictReader(infile)
    writer = csv.DictWriter(outfile, reader.fieldnames + ['COUNT'])
    writer.writeheader()
    for item in reader:
        record = checkfile_result.get(item['ID'], None)
        if record:
            item['ID'] = record['COUNT']  # ???
            item['COUNT'] = record['COUNT']
        else:
            item['COUNT'] = None
            item['COUNT'] = None
        writer.writerow(item) 
```

但是，使用上面的代码，我得到了三列，但来自第一个 CSV 的数据填充在两列中。例如。

Result.CSV *注意跳过 CSV 中不存在的 ID 的键

```
ID, COUNT, COUNT
1, 3037, 3037
2, 394, 394
3,141, 141
5,352\. 352
7,31, 31 
```

结果应该是：

```
ID, COUNT, COUNT
1,3037, 375
2,394, 1178
3,141, 1238
5,352, 2907
6, ,231
7,31, 2469 
```

等等等等

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T20:35:34.207

这有效：

```
import csv

def read_csv(fobj):
    reader = csv.DictReader(fobj, delimiter=',')
    return {line['ID']: line['COUNT'] for line in reader}

with open('csv1.csv') as csv1, open('csv2.csv') as csv2, \
     open('csv3.csv') as csv3, open('out.csv', 'w') as out:
    data = [read_csv(fobj) for fobj in [csv1, csv2, csv3]]
    all_keys = sorted(set(data[0]).union(data[1]).union(data[2]))
    out.write('ID COUNT COUNT COUNT\n')
    for key in all_keys:
        counts = (entry.get(key, '') for entry in data)
        out.write('{}, {}, {}, {}\n'.format(key, *tuple(counts))) 
```

输出文件的内容：

```
ID, COUNT, COUNT, COUNT
1, 3037, 375, 675
2, 394, 1178, 7178
3, 141, 1238, 8238
5, 352, 2907, 
6, , 231, 431
7, 31, 2469, 6469 
```

## 细节

该函数`read_csv`返回一个字典，其中 id 作为键，计数作为值。我们将使用这个函数来读取所有三个输入。例如对于`csv1.csv`

```
with open('csv1.csv') as csv1:
    print(read_csv(csv1)) 
```

我们得到这个结果：

```
{'1': '3037', '3': '141', '2': '394', '5': '352', '7': '31'} 
```

我们需要拥有所有的钥匙。一种方法是将它们转换为集合并用于`union`查找唯一的集合。我们也对它们进行排序：

```
all_keys = sorted(set(data[0]).union(data[1]).union(data[2]))

['1', '2', '3', '5', '6', '7'] 
```

在所有键的循环中，我们使用 检索计数`entry.get(key, '')`。如果不包含密钥，我们会得到一个空字符串。查看输出文件。您只看到逗号，并且在输入中未找到任何值的地方没有值。我们使用生成器表达式，因此我们不必重新键入所有内容三次：

```
counts = (entry.get(key, '') for entry in data) 
```

这是其中一个生成器的内容：

```
list(counts)
('3037', '375', '675') 
```

最后，我们写入我们的输出文件。将`*`这样的元组 ('3037', '375', '675') 转换为三个参数，即`.format()` 这样调用`.format(key, '3037', '375', '675')`：

```
out.write('{}, {}, {}, {}\n'.format(key, *tuple(counts))) 
```

# html - 引导最初折叠的元素

> ID：16149923
> 
> 赞同：68
> 
> 时间：2013-04-22T14:41:28.717
> 
> 标签：html, css, twitter-bootstrap, toggle

我正在使用[引导](http://twitter.github.com/bootstrap)模板，我想更改[手风琴](http://twitter.github.io/bootstrap/javascript.html#collapse)的默认工作方式。

第一次看到页面时（加载时）如何关闭切换？

```
<div class="accordion-heading">
    <a class="accordion-toggle"
       data-toggle="collapse"
       data-parent="#accordion2"
       href="#collapseOne">Open!</a>
</div>
<div id="collapseOne" class="accordion-body collapse in">
    <div class="span6">
        <div class="well well-small">
            <div class="accordion-toggle">
                ...some text...
            </div>
        </div>
    </div>
    <div class="span2"></div>                            
</div> 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-22T22:45:28.490

当您展开或折叠手风琴时，它只是添加/删除“in”类并将`height:auto`or`0`设置为手风琴 div。

`[Demo](http://jsfiddle.net/cg8E3/)`

因此，在您的手风琴中，当您定义它时，只需从 div 中删除“in”类，如下所示。每当您展开手风琴时，它只会添加“in”类以使其可见。

如果您使用“in”引导程序呈现页面，则会查找该类，它将使 div 的高度：auto，如果它不存在，它将处于零高度。

```
<div id="collapseOne" class="accordion-body collapse"> 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-04-22T22:15:47.727

您需要从“collapse in”中删除“in”

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-06-20T14:41:35.007

另一种解决方案是将toggle = false添加到折叠目标，这将阻止它随机打开和关闭，如果您只是删除“in”就会发生这种情况

例如

```
<div class="accordion-heading">
    <a class="accordion-toggle"
        data-toggle="collapse"
        data-parent="#accordion2"
        href="#collapseOne">Open!</a>
</div>
<div
    id="collapseOne"
    class="accordion-body collapse"
    data-toggle="false"
    >
    <div class="span6">
        <div class="well well-small">
            <div class="accordion-toggle">
                ...some text...
            </div>
        </div>
    </div>
    <div class="span2"></div>                            
</div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-25T13:26:07.887

只需将类“show”添加到折叠元素的类中，bootstrap 将使用 js 动态删除它以折叠并显示

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-10T08:07:28.433

需要从类中删除**节目：**

```
<div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion"> 
```

它必须是

```
<div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-12T11:22:06.227

我只是在“card-body”之前将类隐藏添加到 div 中，默认情况下它是隐藏的。

`<div id="collapseOne" class="collapse hide" aria-labelledby="headingOne" data-parent="#accordion">`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-31T10:39:26.357

手风琴中有一个类，它只是将高度从 height:auto 或 0 调整到手风琴 div。

如果您删除“in”类并且单击它时，引导程序会再次添加“in”类，现在内容将可见

```
<div id="collapseOne" class="accordion-body collapse">
....
</div> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-17T13:43:54.910

对于 bootstrap v4+，您需要删除“show”类，而不是删除“in”类

```
<div id="accordion">
 <div class="card">
  <div class="card-header" id="headingOne">
   <h5 class="mb-0">
    <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
      Collapsible Group Item #1
    </button>
   </h5>
 </div>

 <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
  <div class="card-body">
    Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
  </div>
</div> 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-08-24T04:51:05.443

如果删除`in`类对您不起作用，例如我的情况，您可以使用 CSS 显示属性强制折叠初始状态：

```
...
<div id="collapseOne" class="accordion-body collapse" style="display: none;">
... 
```

# java - android媒体播放器不会播放音频文件

> ID：16149929
> 
> 赞同：1
> 
> 时间：2013-04-22T14:41:48.693
> 
> 标签：java, android, android-mediaplayer

我制作一个音乐应用只是为了好玩。我可以从 sd 卡读取我所有的音乐文件，但 MediaPlayer 不会播放声音。我有传递给媒体播放器的文件的路径，`setDataSource`但没有任何反应，我也没有例外。这是我使用的代码。

```
Uri songUri;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_player);
        setUpViews();
        MediaPlayer mp = new MediaPlayer();

        try {
            mp.setDataSource(songUri.toString());
            mp.prepare();

        } catch (IllegalArgumentException e) {
            Toast.makeText(this, "ILLEGAL ARGUMENT EXCEPTION", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        } catch (SecurityException e) {
            Toast.makeText(this, "SECURITY EXCEPTION", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        } catch (IllegalStateException e) {
            Toast.makeText(this, "ILLEGAL STATE EXCEPTION", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        } catch (IOException e) {
            Toast.makeText(this, "IO EXCEPTION", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        }
          mp.start();
          Log.d("URI AFTER SET UP", songUri.toString());
    } 
```

正如我之前所说，当我打开此活动时没有任何反应，但我仍然在控制台中获得所有 Log.d。媒体播放器是否有更多配置来播放音乐？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:48:21.110

setDataSource() 需要一个路径参数。您将整个 uri 作为字符串传递。试试这个 ：

```
mp.setDataSource(songUri.getPath());
mp.prepare();
mp.start(); 
```

此外，如果您尝试使用`content://`uri 访问文件，它将无法正常工作。您必须找到文件的真实路径，即`file://`uri。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:27:38.063

我认为您必须将[setAudioStreamType](http://developer.android.com/reference/android/media/MediaPlayer.html#setAudioStreamType%28int%29)添加到您的`MediaPlayer`对象中。您可以`mp.setDataSource(your_URI);`像下面这样在之前添加它

```
mp.setAudioStreamType(AudioManager.STREAM_MUSIC); 
```

还有其他类型，您可以选择`AudioManager.STREAM_MUSIC`音乐播放器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:09:40.233

我刚刚解决了这个问题，我只是不知道它为什么会起作用。我所做的是放一个按钮来停止正在播放的音乐。我不明白为什么它会起作用，所以如果有人能解释它为什么会起作用，我会很感激的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:39:30.403

通过查询**MEDIASTORE-EXTERNAL_URI**获取歌曲的路径。这个字段**MEDIASTORE.AUDIO.MEDIA.DATA**将为您提供歌曲的路径（即字符串）。你可以直接将它设置为**mediaplayer.setDataSource(Your_path_from_mediastore)**。它会比它工作得更好。

# mysql - Mysql Trigger - 当特定列值更改时运行触发器

> ID：16149930
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:41:52.473
> 
> 标签：mysql, sql, ajax, triggers

这可以在特定列上设置触发器吗？例如，我有一个表名 product_deals

我在那里存储交易信息..所有字段都通过ajax从前端更新..当我点击保存按钮时只有最后一列更新，然后在页面刷新后执行计算，这是交易最终价格..

现在因为 ajax ......值射击到 DB ..

有什么方法可以在特定列上设置触发器..

我是新来触发你的知识很少..需要专家建议..

干杯

编辑：我想在 final_price 列上设置触发器

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T15:11:05.597

您可以在 UPDATE 上设置触发器，然后在触发器内部检查指定列是否已更改

```
CREATE TRIGGER sample_trigger AFTER UPDATE ON product_deals
FOR EACH ROW
BEGIN
  IF NEW.final_price <> OLD.final_price THEN
    // put your code here
  END IF
END; 
```

# graphite - 石墨计数器的变换

> ID：16149934
> 
> 赞同：0
> 
> 时间：2013-04-22T14:42:00.433
> 
> 标签：graphite, statsd

我正在使用`incr`来自[python statsd 客户端](http://statsd.readthedocs.org/en/latest/reference.html#incr)的函数。我为该名称发送的密钥已在石墨中注册，但它在图表上显示为一条平线。我需要应用哪些过滤器或转换来获得随时间推移的增量速率？我尝试了一个`apply function > transform > integral`和一个，`apply function > special > aggregate by sum`但还没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T05:06:31.927

您请求的功能是“总结” - 在这里查看：http: [//graphite.readthedocs.org/en/latest/functions.html](http://graphite.readthedocs.org/en/latest/functions.html)

为了随着时间的推移计算总数，只需使用带有“alignToFrom = true”的汇总函数。例如：您可以在 1 天内使用以下指标：summarize(stats_counts.your.metrics.path,"1d","sum",true)

有关更多详细信息，请参阅[石墨汇总数据点](https://stackoverflow.com/questions/13589350/graphite-summarize-datapoints) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:28:36.597

数据就在那里，只需要数以百计的计数就可以在图表上看到它。取积分也有效，并显示随着时间的推移累积命中数，必须将其乘以 x100 才能获得近似正确的值。

# windows-8 - 我是否需要多个二进制文件来支持多分辨率 Windows 8 应用程序？

> ID：16149935
> 
> 赞同：2
> 
> 时间：2013-04-22T14:42:03.930
> 
> 标签：windows-8

我正在开发一个 Windows 8 应用程序，但该应用程序需要在多个分辨率和密度屏幕（平板电脑、笔记本电脑和台式机）上得到支持。我需要为每个分辨率创建多个二进制文件吗？我查看了[http://msdn.microsoft.com/en-US/library/windows/apps/hh780612](http://msdn.microsoft.com/en-US/library/windows/apps/hh780612)但在我跳入解决方案之前需要澄清。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:45:26.063

如果您根据[Windows Store UX Guidelines](http://msdn.microsoft.com/en-us/library/windows/apps/hh465424.aspx)进行设计，则不需要单独的二进制文件，但您确实需要所有图形、徽标等的缩放版本，并且您需要处理应用程序中的方向和布局更改，以便你总是呈现一个合适的用户界面。

我们现在正在经历这种痛苦，设计一些具有固定位置等的静态布局非常诱人，但这非常违反 Windows 应用商店的指导方针。进行设计所花费的时间可能与编写代码所花费的时间一样长。

如果您使用的是 HTML5/Javascript，[MSDN 上有一个有用的自适应布局示例](http://msdn.microsoft.com/en-us/library/windows/apps/jj150600.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:01:46.537

不，你没有。一般来说，它会工作。您可以选择使用此处所述的比例命名约定来提供高分辨率图像：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

我建议您在运行应用程序时使用模拟器选项来测试应用程序在不同分辨率和 dpi 设置下的外观。

# c# - Forms.ComboBox 颜色

> ID：16149936
> 
> 赞同：0
> 
> 时间：2013-04-22T14:42:07.190
> 
> 标签：c#, winforms, combobox

我想在 C# 中更改 System.Windows.Forms.ComboBox 的颜色。我**不是**说`BackColor`或`ForeColor`单击组合框后会控制颜色并显示下拉列表。相反，我想更改控件本身的颜色。

# mysql - Spring MVC + Hibernate 不对数据库做任何事情，没有抛出异常

> ID：16149939
> 
> 赞同：1
> 
> 时间：2013-04-22T14:42:13.870
> 
> 标签：mysql, spring, hibernate, model-view-controller

我不知所措。我一直在玩Spring MVC和Hibernate，我已经和我的数据库建立了连接，拉数据，没问题。

我添加了一个@Entity，可能还做了一些其他的更改，现在 Hibernate 不会做任何事情。无论如何，我的意思是没有执行 SQL（如 tomcat 日志中所示，使用 hibernate 的 show-sql 选项）。也没有抛出任何异常，Hibernate 甚至告诉我它已经更新了 DB 模式（它没有更新，因为没有创建表。）。

我已经检查了 getAllArticles() 方法是否在运行时使用调试器被调用。

我现在真的不知道该检查什么，如果有人有任何想法，我将永远感激不尽。

我的 servlet config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <mvc:resources location="/resources/" mapping="/resources/**" />
    <mvc:annotation-driven />

    <context:component-scan base-package="com.last" />

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean
        class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://10.0.0.2/lastDB" />
        <property name="username" value="dbuser" />
        <property name="password" value="dbpass" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="packagesToScan" value="com.test" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>
</beans> 
```

实体：

```
package com.last.entities;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

@Entity
@Table(name = "ARTICLE")
public class Article {

    private int id;
    private String content;
    private User author;

    @Id
    @GeneratedValue
    @Column(name = "ARTICLE_ID")
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }

    @Column(name = "CONTENT", length=10000)
    public String getContent() {
        return content;
    }
    public void setContent(String content) {
        this.content = content;
    }

    @ManyToOne
    @Column(name="AUTHOR")
    @JoinColumn(name = "USER_USER_ID")
    public User getAuthor() {
        return author;
    }
    public void setAuthor(User user) {
        this.author = user;
    }
} 
```

道：

```
package com.last.dao;

import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Transactional;

import com.last.entities.Article;
import com.last.entities.User;
import com.last.exceptions.DAOException;

@SuppressWarnings("unchecked")
@Component
@Transactional(readOnly = true)
public class DAOImpl implements DAO {

    @Autowired
    SessionFactory sessionFactory;

    private Session currentSession() {
        return sessionFactory.getCurrentSession();
    }

    @Override
    public List<User> getUserList() {
        return currentSession().createCriteria(User.class).list();
    }

    @Override
    public User getUserByID(int id) {
        User result = (User) currentSession().createCriteria(User.class)
                .add(Restrictions.eq("id", id)).uniqueResult();

        if (result == null) {
            throw new DAOException(DAOException.NO_RESULT);
        } else {
            return result;
        }
    }

    @Override
    public List<Article> getAllArticles() {     
        return currentSession().createCriteria(Article.class).list();
    }
} 
```

Tomcat的日志：

```
avr. 22, 2013 4:39:10 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0_15\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;D:\Programmes\LaTeX\MikTeX\miktex\bin;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Haskell\bin;D:\Programming Stuff\Haskell\2010.2.0.0\lib\extralibs\bin;D:\Programming Stuff\Haskell\2010.2.0.0\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\GTK2-Runtime\bin;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;D:\Programmes\PostgreSQL\bin;C:\Program Files\Calibre2\;F:\RailsInstaller\Git\cmd;F:\RailsInstaller\Ruby1.9.2\bin;D:\Programming Stuff\RailsInstaller\Git\cmd;D:\Programming Stuff\RailsInstaller\Ruby1.9.2\bin;F:\Web Server\wamp\ruby\bin;C:\Program Files\Java\jdk1.7.0_02\bin;D:\Programmes\NetBeans\ant\apache-ant-1.8.4\bin;C:\Program Files (x86)\OpenVPN\bin;.
avr. 22, 2013 4:39:11 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
avr. 22, 2013 4:39:11 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
avr. 22, 2013 4:39:11 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1055 ms
avr. 22, 2013 4:39:11 PM org.apache.catalina.core.StandardService startInternal
INFO: Démarrage du service Catalina
avr. 22, 2013 4:39:11 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.37
avr. 22, 2013 4:39:12 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom
INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [128] milliseconds.
avr. 22, 2013 4:39:12 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Déploiement du descripteur de configuration D:\Programming Stuff\Projects\FinalTest\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\conf\Catalina\localhost\Last.xml
avr. 22, 2013 4:39:12 PM org.apache.catalina.startup.SetContextPropertiesRule begin
WARNING: [SetContextPropertiesRule]{Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Last' did not find a matching property.
avr. 22, 2013 4:39:15 PM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
avr. 22, 2013 4:39:15 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
avr. 22, 2013 4:39:15 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started
avr. 22, 2013 4:39:15 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Mon Apr 22 16:39:15 CEST 2013]; root of context hierarchy
avr. 22, 2013 4:39:15 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/last-servlet.xml]
avr. 22, 2013 4:39:16 PM org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'dataSource' of type [class org.apache.commons.dbcp.BasicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
avr. 22, 2013 4:39:16 PM org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
avr. 22, 2013 4:39:16 PM org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.2.0.Final}
avr. 22, 2013 4:39:16 PM org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
avr. 22, 2013 4:39:16 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
avr. 22, 2013 4:39:17 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
avr. 22, 2013 4:39:17 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
avr. 22, 2013 4:39:17 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
avr. 22, 2013 4:39:17 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
avr. 22, 2013 4:39:17 PM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000227: Running hbm2ddl schema export
avr. 22, 2013 4:39:17 PM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000230: Schema export complete
avr. 22, 2013 4:39:17 PM org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'sessionFactory' of type [class org.springframework.orm.hibernate4.LocalSessionFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
avr. 22, 2013 4:39:17 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1312f348: defining beans [org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,mvcContentNegotiationManager,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,mainController,DAOImpl,serviceImpl,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,dataSource,sessionFactory,transactionManager,org.springframework.web.servlet.view.InternalResourceViewResolver#0,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
avr. 22, 2013 4:39:17 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
avr. 22, 2013 4:39:17 PM org.springframework.web.servlet.handler.AbstractHandlerMethodMapping registerHandlerMethod
INFO: Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.last.controllers.MainController.showHomePage(java.util.Map<java.lang.String, java.lang.Object>)
avr. 22, 2013 4:39:18 PM org.springframework.orm.hibernate4.HibernateTransactionManager afterPropertiesSet
INFO: Using DataSource [org.apache.commons.dbcp.BasicDataSource@6192fb7a] of Hibernate SessionFactory for HibernateTransactionManager
avr. 22, 2013 4:39:18 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization completed in 3389 ms
avr. 22, 2013 4:39:18 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'last'
avr. 22, 2013 4:39:18 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'last': initialization started
avr. 22, 2013 4:39:18 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing WebApplicationContext for namespace 'last-servlet': startup date [Mon Apr 22 16:39:18 CEST 2013]; parent: Root WebApplicationContext
avr. 22, 2013 4:39:18 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/last-servlet.xml]
avr. 22, 2013 4:39:18 PM org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'dataSource' of type [class org.apache.commons.dbcp.BasicDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
avr. 22, 2013 4:39:18 PM org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
avr. 22, 2013 4:39:18 PM org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
avr. 22, 2013 4:39:18 PM org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
avr. 22, 2013 4:39:18 PM org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
avr. 22, 2013 4:39:18 PM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000227: Running hbm2ddl schema export
avr. 22, 2013 4:39:18 PM org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000230: Schema export complete
avr. 22, 2013 4:39:18 PM org.springframework.context.support.AbstractApplicationContext$BeanPostProcessorChecker postProcessAfterInitialization
INFO: Bean 'sessionFactory' of type [class org.springframework.orm.hibernate4.LocalSessionFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
avr. 22, 2013 4:39:18 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1b2cc445: defining beans [org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0,org.springframework.web.servlet.handler.SimpleUrlHandlerMapping#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,mvcContentNegotiationManager,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,mainController,DAOImpl,serviceImpl,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,dataSource,sessionFactory,transactionManager,org.springframework.web.servlet.view.InternalResourceViewResolver#0,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@1312f348
avr. 22, 2013 4:39:18 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
avr. 22, 2013 4:39:18 PM org.springframework.web.servlet.handler.AbstractHandlerMethodMapping registerHandlerMethod
INFO: Mapped "{[/],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.last.controllers.MainController.showHomePage(java.util.Map<java.lang.String, java.lang.Object>)
avr. 22, 2013 4:39:18 PM org.springframework.orm.hibernate4.HibernateTransactionManager afterPropertiesSet
INFO: Using DataSource [org.apache.commons.dbcp.BasicDataSource@1583f012] of Hibernate SessionFactory for HibernateTransactionManager
avr. 22, 2013 4:39:19 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'last': initialization completed in 503 ms
avr. 22, 2013 4:39:19 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
avr. 22, 2013 4:39:19 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
avr. 22, 2013 4:39:19 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 7587 ms 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:46:13.920

可能是复制粘贴，但您的休眠会话工厂 bean 正在扫描`com.test`休眠实体而不是`com.last`.

# ios - 将错误向上传播到调用堆栈 - 目标 c

> ID：16149943
> 
> 赞同：0
> 
> 时间：2013-04-22T14:42:34.953
> 
> 标签：ios, objective-c, nserror

在典型的分层架构中，如何有效地将源自数据访问层的错误传达给`UIViewContoller`?

我有以下设计：

> `UIViewController`s --> 数据控制器 --> 特定的serviceproxy --> serviceproxybase

serviceproxybase 启动对 Web 服务的调用。我在对 Web 服务调用操作之前检查网络可用性，并希望在网络出现故障时提醒用户。

最佳实践解决方案是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:06:37.633

按照我的大部分 Cocoa-touch 使用的模式。许多方法返回`nil`或`NO`出现错误时，这些方法有一个`NSError`输出参数，其中包含有关错误的详细信息。

您可以根据需要传播结果并向上层错误。或者一个层可以用一个更特定于层的错误来包装错误并传递新的错误。

遵循此模式的示例方法是：

```
NSFileManager copyItemAtPath:toPath:error:
NSFileManager attributesOfItemAtPath:error: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:47:44.740

您可以使用`NSNotificationCenter`来发布和接收`NSNotification`各种错误状态。

在`serviceproxybase`您将发布通知给任何感兴趣的观察者：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"NoConnectionNotification" object:nil userInfo:someErrorInfoObject]; 
```

通常，您会打包一个对象`someErrorInfoObject`，向观察者提供一些额外的详细信息，例如`NSError`对象、失败的服务请求或服务的错误代码。在视图控制器中，您将在`viewDidLoad`or中侦听该通知`viewWillAppear`：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(handleNoConnectionError:)
                                             name:@"NoConnectionNotification"
                                           object:nil]; 
```

现在，每当发布带有名称的通知时`NoConnectionNotification`，视图控制器都会收到一条`handleNoConnectionError:`带有相应`NSNotification`.

# java - 未加载应用程序特定区域设置变体的 DateFormatProvider 实现

> ID：16149945
> 
> 赞同：3
> 
> 时间：2013-04-22T14:42:46.357
> 
> 标签：java

我有一个使用适当的 java.text.spi.DateFormatProvider 文件将 DateFormatProvider 的实现打包在一个 jar 中，但是不会使用 DateFormatProvider（实际上`LocaleServiceProviderPool.getPool(DateFormatProvider.class).hasEntries()`在下面的测试程序中是错误的。

## DateFormatProvider 的实现：

```
package dateformatproviders;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.text.spi.DateFormatProvider;
import java.util.Arrays;
import java.util.Comparator;
import java.util.Locale;

public class DateFormatProviderImpl extends DateFormatProvider
{
  private static final CompareLocales COMPARE_LOCALES = new CompareLocales();
  private Locale[] availableLocales;
  private static final String VARIANT = "variant_xxx";
  private final String formatString;
  private final Object availableLocalesLock = new Object();

  /**
   * for each available locale create a variant using the given variantString.
   * Return the list of all these locales
   *
   * @param variantString must not be null
   * @return never null nor empty
   */
  public static Locale[] installVariant(String variantString)
  {
    Locale[] availableLocales = Locale.getAvailableLocales();
    Locale[] result = new Locale[availableLocales.length];
    int pos = 0;
    for (Locale locale : availableLocales)
    {
      Locale newLocale = createLocale(locale, variantString);
      result[pos] = newLocale;
      ++pos;
    }
    return result;
  }

  public static Locale createLocale(Locale originalDefaultLocale, String variant)
  {
    Locale modifiedDefaultLocale = new Locale(originalDefaultLocale.getLanguage(), originalDefaultLocale.getCountry(), variant);
    return modifiedDefaultLocale;
  }

  public DateFormatProviderImpl()
  {
    formatString = "HH:mm:ss 't' MM/dd/yy";
  }

  private DateFormat createDateFormat()
  {
    return new SimpleDateFormat(formatString);
  }

  @Override
  public final DateFormat getTimeInstance(int style, Locale locale)
  {
    checkArguments(locale, style);
    return createDateFormat();
  }

  @Override
  public final DateFormat getDateInstance(int style, Locale locale)
  {
    checkArguments(locale, style);
    return createDateFormat();
  }

  @Override
  public final DateFormat getDateTimeInstance(int dateStyle, int timeStyle, Locale locale)
  {
    checkArguments(locale, dateStyle, timeStyle);
    return createDateFormat();
  }

  @Override
  public final Locale[] getAvailableLocales()
  {
    synchronized (availableLocalesLock)
    {
      if (null == availableLocales)
      {
        Locale[] sourceLocales = installVariant(VARIANT);
        availableLocales = Arrays.copyOf(sourceLocales, sourceLocales.length);
        Arrays.sort(availableLocales, COMPARE_LOCALES);
      }
    }
    return availableLocales;
  }

  public final String getVariant()
  {
    return VARIANT;
  }

  private void checkArguments(Locale locale, int... styles)
  {
    for (int style : styles)
    {
      switch (style)
      {
        case DateFormat.SHORT:
        case DateFormat.MEDIUM:

        case DateFormat.LONG:
        case DateFormat.FULL:
          break;
        default:
          throw new IllegalArgumentException("style:" + style + " must be one of{" + DateFormat.SHORT + ',' + DateFormat.MEDIUM + ','
                  + DateFormat.LONG + ',' + DateFormat.FULL + '}');
      }
    }
    checkLocale(locale);
  }

  private void checkLocale(Locale locale)
  {
    if (null == locale)
    {
      throw new IllegalArgumentException("locale must not be null");
    }
    if (Arrays.binarySearch(availableLocales, locale, COMPARE_LOCALES) < 0)
    {
      throw new IllegalArgumentException("locale not supported:" + locale);
    }
  }

  private static class CompareLocales implements Comparator<Locale>
  {
    @Override
    public int compare(Locale lhs, Locale rhs)
    {
      if (null == lhs)
      {
        if (null == rhs)
        {
          return 0;
        }
        return -1;
      }
      if (null == rhs)
      {
        return 1;
      }
      String lhsLang = lhs.getLanguage();
      String rhsLang = rhs.getLanguage();
      int langCompare = lhsLang.compareTo(rhsLang);
      if (0 == langCompare)
      {
        String lhsCountry = lhs.getCountry();
        String rhsCountry = rhs.getCountry();
        int countryCompare = lhsCountry.compareTo(rhsCountry);
        if (0 == countryCompare)
        {
          String lhsVariant = lhs.getVariant();
          String rhsVariant = rhs.getVariant();
          return lhsVariant.compareTo(rhsVariant);
        }
        return countryCompare;
      }
      return langCompare;
    }
  }
} 
```

## META-INF/services/java.text.spi.DateFormatProvider：

```
dateformatproviders.DateFormatProviderImpl 
```

## 测试程序：

```
package datetest;

import dateformatproviders.DateFormatProviderImpl;
import java.text.DateFormat;
import java.text.spi.DateFormatProvider;
import java.util.Date;
import java.util.Locale;
import java.util.concurrent.TimeUnit;
import sun.util.LocaleServiceProviderPool;

public class Main
{
  /**
   * install the given dateFormatProvider for the default locale, using the default variant. <br/>
   * Changes the default locale
   *
   * @param dateFormatProvider
   */
  public static void install(DateFormatProviderImpl dateFormatProvider)
  {
    Locale originalDefaultLocale = Locale.getDefault();
    Locale modifiedDefaultLocale = DateFormatProviderImpl.createLocale(originalDefaultLocale, dateFormatProvider.getVariant());
    Locale.setDefault(modifiedDefaultLocale);
  }

  public static void main(String[] args) throws InterruptedException
  {
    install(new DateFormatProviderImpl());
    LocaleServiceProviderPool pool = LocaleServiceProviderPool.getPool(DateFormatProvider.class);
    boolean hasEntries = pool.hasProviders(); // is false
    while (true)
    {
      System.out.printf("%s\n", DateFormat.getDateTimeInstance().format(new Date()));
      TimeUnit.SECONDS.sleep(2);
    }

  }
} 
```

在包含 DateTest.jar 的目录和包含 DateFormatProvider.jar 的文件夹 lib 中执行：

```
java -cp DateTest.jar:lib/DateFormatProvider.jar dateTest.Main 
```

产生默认的格式化日期

当包含 DateFormatProvider 及其 java.text.spi.DateFormatProvider 文件的 jar 文件被复制到 jre/lib/ext 时，测试程序仍然可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-08T15:13:04.517

根据关于可选包的[官方文档](https://docs.oracle.com/javase/8/docs/technotes/guides/extensions/extensions.html)（这是 JVM 扩展的新名称），有两种方法可以将 JAR 文件用作可选包：

*   通过放置在 Java 2 运行时环境或 JDK 目录结构中的特殊位置 - 在这种情况下，它是一个[*已安装*的可选包](https://docs.oracle.com/javase/8/docs/technotes/guides/extensions/extensions.html#installed)。

*   通过从 applet 或应用程序的 JAR 文件的清单中以指定方式引用 - 在这种情况下，它是一个[*下载*可选包](https://docs.oracle.com/javase/8/docs/technotes/guides/extensions/extensions.html#download)。

仅将 JAR 放在类路径上不足以将其作为可选包加载。但是，当您将 JAR 文件放在`jre/lib/ext`您使用第一种方式的目录中时。

该文档还包含此注释：

> 安装和下载可选包之间的另一个区别是，只有捆绑在 JAR 文件中的小程序和应用程序才能使用下载可选包。未捆绑在 JAR 文件中的 Applet 和应用程序没有可供参考下载可选包的清单。

另请注意，已弃用已安装的可选软件包：

> **已弃用：已弃用对已安装可选包的支持，并且可能会在将来的版本中删除。**

# ios - 如何将 Plist 中的数据类型匹配到核心数据

> ID：16149946
> 
> 赞同：0
> 
> 时间：2013-04-22T14:42:54.033
> 
> 标签：ios, core-data, nsmanagedobject

给定以下数据结构：

```
<dict>
<key>Attachments</key>
<dict>
    <key>__deferred</key>
    <dict>
        <key>uri</key>
            <string>http://myserver/mysite/_vti_bin/listdata.svc/OLPerson(2)/Attachments</string>
    </dict>
</dict>
<key>ContentType</key>
<string>OLPerson</string>
<key>ContentTypeID</key>
<string>0x0100EA6E4D97C50CDB4C969ADE34F3DDD6630008BBD0E63B1D0C438CE98422AB07F904</string>
<key>Created</key>
<string>/Date(1358159519000)/</string>
<key>CreatedBy</key>
<dict>
    <key>__deferred</key>
    <dict>
        <key>uri</key>
            <string>http://myserver/mysite/_vti_bin/listdata.svc/OLPerson(2)/CreatedBy</string>
    </dict>
</dict>
<key>CreatedById</key>
<integer>1</integer>
<key>Id</key>
<integer>2</integer>
<key>Modified</key>
<string>/Date(1365691793000)/</string>
<key>ModifiedBy</key>
<dict>
    <key>__deferred</key>
    <dict>
        <key>uri</key>
            <string>http://myserver/mysite/_vti_bin/listdata.svc/OLPerson(2)/ModifiedBy</string>
    </dict>
</dict>
<key>ModifiedById</key>
<integer>1</integer>
<key>OLPersonBUId</key>
<integer>1</integer>
<key>OLPersonDepartment</key>
<string>Some Text Value</string>
<key>OLPersonEmail</key>
<string>someone@somewhere.com</string>
<key>OLPersonEmployeeID</key>
<string>0000002222</string>
<key>OLPersonFirstname</key>
<string>Some Firstname</string>
<key>OLPersonOfficeId</key>
<integer>1</integer>
<key>OLPersonSurname</key>
<string>Some Surname</string>
<key>Owshiddenversion</key>
<integer>4</integer>
<key>Path</key>
<string>/mysite/Lists/OLPerson</string>
<key>Version</key>
<string>1.0</string>
<key>__metadata</key>
<dict>
    <key>etag</key>
    <string>W/"4"</string>
    <key>type</key>
    <string>Microsoft.SharePoint.DataService.OLPersonItem</string>
    <key>uri</key>
    <string>http://myserver/mysite/_vti_bin/listdata.svc/OLPerson(2)</string>
</dict>
</dict> 
```

在我的核心数据模型中，您可以看到以下实体在我的 json 数据中返回了我在核心数据模型中拥有的更多字段。我只对将json中的匹配字段放入模型中的相应字段放入核心数据感兴趣。例如，OLPersonBUId 值应该进入核心数据中的 olpersonbu。

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface OLPerson : NSManagedObject

@property (nonatomic, retain) NSString * id;
@property (nonatomic, retain) NSDate * olcreatedat;
@property (nonatomic, retain) NSString * olpersonbuid;
@property (nonatomic, retain) NSString * olpersondepartment;
@property (nonatomic, retain) NSString * olpersonemail;
@property (nonatomic, retain) NSString * olpersonemployeeid;
@property (nonatomic, retain) NSString * olpersonfirstname;
@property (nonatomic, retain) NSString * olpersonoffice;
@property (nonatomic, retain) NSData * olpersonphoto;
@property (nonatomic, retain) NSString * olpersonsurname;
@property (nonatomic, retain) NSNumber * olsyncstatus;
@property (nonatomic, retain) NSDate * olupdatedat;

@end 
```

我有一个问题，整数值不会进入我的核心数据模型，因为它需要一个字符串值。正确的数据类型在核心数据中定义，但并不总是在 JSON 中返回正确的数据类型。

我有以下代码：

```
- (void)newManagedObjectWithClassName:(NSString *)className forRecord:(NSDictionary *)record {
NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:className inManagedObjectContext:[[OLCoreDataController sharedInstance] backgroundManagedObjectContext]];
[record enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
    [self setValue:obj forKey:key forManagedObject:newManagedObject];
}];
[record setValue:[NSNumber numberWithInt:OLObjectSynced] forKey:@"olsyncstatus"];
} 
```

但它失败了，因为它所期望的类型不是它从 JSON 数据中获得的类型。

如何检查上述数据中值的数据类型并将该数据放入Core Data，同时只放入匹配的键值并确保进入值的数据是正确的数据类型？

[编辑]

添加以下代码以进一步解释该问题。我现在遇到的问题是我无法使用属性填充属性 NSDictionary：

```
- (void)newManagedObjectWithClassName:(NSString *)className forRecord:(NSDictionary *)record {
NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:className inManagedObjectContext:[[OLCoreDataController sharedInstance] backgroundManagedObjectContext]];

NSDictionary *attributes = [[????????] attributesByName];
    for (NSString *attribute in record) {
        id key = nil;
        id value = [key objectForKey:attribute];
        if (value == nil) {
            // Don't attempt to set nil, or you'll overwite values in self that aren't present in keyedValues
            continue;
        }
        NSAttributeType attributeType = [[record objectForKey:attribute] attributeType];
        if ((attributeType == NSStringAttributeType) && ([value isKindOfClass:[NSNumber class]])) {
            value = [value stringValue];
        } else if (((attributeType == NSInteger16AttributeType) || (attributeType == NSInteger32AttributeType) || (attributeType == NSInteger64AttributeType) || (attributeType == NSBooleanAttributeType)) && ([value isKindOfClass:[NSString class]])) {
            value = [NSNumber numberWithInteger:[value  integerValue]];
        } else if ((attributeType == NSFloatAttributeType) && ([value isKindOfClass:[NSString class]])) {
            value = [NSNumber numberWithDouble:[value doubleValue]];
        }
        [self setValue:value forKey:attribute forManagedObject:newManagedObject];
    } 
```

}

我传入了 className，因此没有初始化允许我访问属性的核心数据对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:57:52.947

您必须逐个属性地手动浏览字典。这是进行此导入的唯一安全方法。

```
newObject.olpersondepartment = [record objectForKey:@"OLPersonDepartment"];
newObject.olpersonemail      = [record objectForKey:@"OLPersonEmail"];
// etc. 
```

# linux - 是否可以生成独立的 haskell 可执行文件

> ID：16149948
> 
> 赞同：11
> 
> 时间：2013-04-22T14:43:04.903
> 
> 标签：linux, haskell, executable, ghc

假设架构相似，是否有任何方法可以生成独立的 haskell 可执行文件以在不同的 linux 机器上运行？

对不起，我应该更清楚。其他机器上可能没有安装 ghc - 有点像 python 的 pyinstaller 是我正在寻找的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T15:10:05.893

在编译 Haskell 项目时，您可以使用这些标志`-static -optl-pthread -optl-static`来避免动态链接的依赖项。这应该可以帮助您在两台没有完全相同库版本的 linux 机器上运行编译后的可执行文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T15:00:52.703

对的，这是可能的。就像 gcc 生成的二进制文件一样，假设动态库和平台匹配，您可以在系统之间复制它们。

实际上，这比 GCC 二进制文件略高，因为默认情况下 GHC 将动态链接更多库（例如：libgmp，除非您使用 integer-simple 构建 GHC）。

# jquery - JSON 中的嵌套数据

> ID：16149949
> 
> 赞同：-1
> 
> 时间：2013-04-22T14:43:08.840
> 
> 标签：jquery, json

我在尝试获取 JSON 文件中的嵌套数据时遇到问题。

任何人都可以帮助我吗？我正在尝试创建一个 megamenu。

```
$.getJSON("js/nav.json", function (data)  {
    $.each(data.navigation, function (i, navigation)  {
        var jsondata = "<li class='top-level'><a href='/" + this.link + "'>" + this.title + "</a></li>";
        $.each(this.headingArray, function ()  {
            alert(hello);
        });
        $(jsondata).appendTo("ul.nav");
    });
  });
}); 
```

这是我从中读取的示例 JSON 文件

```
{
    "navigation": [
            {
                    "title": "Home",
                    "link": ""
 },
            {
                    "title": "Find your ski holiday",
                    "link": "#URLhere",
                    "headingArray": [
                            {
                                    "heading": [
                                            {
                                                    "title": "Destinations",
                                                    "link": "#URLhere",
                                                    "subheading": [
                                                            {
                                                                    "title": "Andorra",
                                                                    "link": "#URLhere"
},
                                                            {
                                                                    "title": "Austria",
                                                                    "link": "#URLhere"
}, 
```

任何帮助将不胜感激？

演示 - [http://dev.thirstythursdays.co.uk/menu-json3](http://dev.thirstythursdays.co.uk/menu-json3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:53:27.887

因为您的对象具有不同的属性，例如等`headingArray`，所以`subheading`在您尝试迭代之前，`this.headingArray`您必须检查它是否已定义。

所以添加类似的东西

```
if (this.headingArray){
    //iterate through this.headingArray
} 
```

演示：http: [//jsfiddle.net/Q2Xy4/1/](http://jsfiddle.net/Q2Xy4/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:59:45.280

这就是您的响应被解析的方式。

请注意，由于 JSON 的结构方式，并非数组中的每个结果元素都包含`headingArray`/`subheading`字段。

![在此处输入图像描述](https://i.stack.imgur.com/IVwQY.png)

例如，如果您查看 JSON 响应数组中的第一个元素，您可以清楚地看到该对象不包含`headingArray`字段：

```
{
    "navigation": [
    {
        "title": "Home",
        "link": "" // No headingArray in here...
    }, {
        "title": "Find your ski holiday",
        "link": "#URLhere",
        "headingArray": [
        { 
```

你应该做的是：

*   要么将您的 json 重组为仅包含同质元素，
*   或重写您的解析逻辑以在尝试访问其值之前检查不存在的字段。

# jquery - 将 jquery 对话框按钮向左移动

> ID：16149955
> 
> 赞同：1
> 
> 时间：2013-04-22T14:43:30.510
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我试图让我的 jquery 对话框按钮组中的一个按钮显示在左侧。但我认为这是不可能的，因为 jquery 将按钮组包装在 . 我试过动态添加 float:left ，但这不起作用。

有任何想法吗？

谢谢

```
<div class="ui-dialog-buttonset">
    <!--this should be on the left-->
    <button id="lbCreateGroup" class="createButton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" type="button" role="button" aria-disabled="false">
    <!--these 2 buttons should be on the right-->
    <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" type="button" role="button" aria-disabled="false">
    <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" type="button" role="button" aria-disabled="false">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:48:13.970

你可以用css来做......

```
#lbCreateGroup { float: left; }
.ui-button { float: right; } 
```

这是一个工作小提琴......

[http://jsfiddle.net/tEKWJ/](http://jsfiddle.net/tEKWJ/)

默认情况下，所有具有`.ui-button`类的元素都会向右浮动，因此您可能需要专门为此添加另一个类。由其 id 指定的元素的 css 将始终覆盖由 class 指定的元素，因此您使用要向左浮动的元素的 id。

顺便说一句，jQueryUI 很可能默认情况下浮动按钮，所以你可能不需要第二行 css :)

# php - 选择一个选项后打开 HTML 选择标签

> ID：16149957
> 
> 赞同：0
> 
> 时间：2013-04-22T14:43:37.980
> 
> 标签：php, javascript, jquery, html, html-select

我有一个这样的 HTML 选择标签：

```
<select name="since_date">
    <option value="<?php $sixmonths = date('Y-m-d', strtotime('-6 months')); echo $sixmonths; ?>">6 months</option>
    <option value="<?php $fivemonths = date('Y-m-d', strtotime('-5 months')); echo $fivemonths; ?>">5 months</option>
    <option value="<?php $fourmonths = date('Y-m-d', strtotime('-4 months')); echo $fourmonths; ?>">4 months</option>
    <option value="<?php $threemonths = date('Y-m-d', strtotime('-3 months')); echo $threemonths; ?>">3 months</option>
    <option value="<?php $twomonths = date('Y-m-d', strtotime('-2 months')); echo $twomonths; ?>">2 months</option>
    <option value="<?php $onemonth = date('Y-m-d', strtotime('-1 month')); echo $onemonth; ?>">1 month</option>
</select> 
```

我希望在选择例如 4 个月时出现一个新的选择标签，如下所示：

```
<select name="until_date_4months">
    <option value="<?php $threemonths = date('Y-m-d', strtotime('-3 months')); echo $threemonths; ?>">3 months</option>
    <option value="<?php $twomonths = date('Y-m-d', strtotime('-2 months')); echo $twomonths; ?>">2 months</option>
    <option value="<?php $onemonth = date('Y-m-d', strtotime('-1 month')); echo $onemonth; ?>">1 month</option>
    <option value="<?php $now = date('Y-m-d'); echo $now; ?>">Now</option>
</select> 
```

每次选择一个时期（例如 6 个月、5 个月）时，必须出现一个新的选择，其中的选项低于所选的选项加上一个新的选项“现在”，如上所示。这怎么可能？方法是什么？我想通过提交按钮使用这些信息。（使用 JQuery 向特定 PHP 文件发送 GET 请求<-我知道如何处理）。例如，我可以像这样使用 JavaScript：

```
function sinceDateValue(selection) {
    if (selection.value == "<?php $fourmonths = date('Y-m-d', strtotime('-4 months')); echo $fourmonths; ?>") {
        document.getElementbyId(until_date_4months).style.display = "block"
    }
} 
```

并用于第二次提交`id="until_date_4months"`和`style="display: none;"`. 同样对于第一次提交`onchange="testValue(this);`，但这只会显示提交，我只想使用表单发送两个信息：since_date 和 until_date...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:06:41.810

您可以使用循环动态创建选项：

```
<?php for ($i = 6; $i >= 0; $i--) { ?> 
  <option value="<?php echo date('Y-m-d', strtotime('-' . $i . ' months')); ?>">
    <?php echo ($i == 0) ? 'Now' : $i . ' months'; ?>
  </option>
<?php } ?> 
```

至于 jQuery，您可以根据所选元素获取元素，并使用这些元素填充您的选择框：

```
$('select[name="since_date"]').on('change', function() {
  var newOpts = $('option:selected', this).nextAll().clone();
  $(newOpts).show().appendTo('#example');   
}); 
```

### [这是一个完整的示例小提琴](http://jsfiddle.net/y9Exa/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:52:57.117

你可以做这样的事情，你需要做的就是设置正确的选项值。

```
$("#one").change(function(){
    var htmlOf2 = "", d;
    for(var i=1;i<parseInt($(this).find("option:selected").text()) + 1;i++)
   {
       d = new Date();
       d = d.setMonth(d.getMonth() + (i * -1));
       // This sets the right month, but is not set as a value yet. I don't know what format you want

       htmlOf2 += "<option value=''>" + (i + " months") + "</option>";
   }
   htmlOf2 += "<option>NOW</option>";
   $("#two").html(htmlOf2);
}).trigger("change"); 
```

现场小提琴：http: [//jsfiddle.net/5qaw7/1/](http://jsfiddle.net/5qaw7/1/)

# java - BlackBerry 上的 HTTP Post 请求

> ID：16149958
> 
> 赞同：1
> 
> 时间：2013-04-22T14:43:42.487
> 
> 标签：java, json, blackberry, httprequest

我正在尝试将 json 字符串从我的 BlackBerry OS < 7.X 应用程序发送到我的服务器。我正在尝试使用 HTTP Post 请求。到目前为止我所做的是：

```
String httpURL = "http://ip_of_my_server/phpServer/receiver2.php/" + jsonString;

try {
    HttpConnection httpConn;
    httpConn = (HttpConnection) Connector.open(httpURL + getConnectionString());
    httpConn.setRequestMethod(HttpConnection.POST);
    httpConn.setRequestProperty("Content-Type", "application/json; charset=utf-8");
    DataOutputStream _outStream = new DataOutputStream(httpConn.openDataOutputStream());
    byte[] request_body = httpURL.getBytes();
    for (int i = 0; i < request_body.length; i++) {
        _outStream.writeByte(request_body[i]);
    }
    DataInputStream _inputStream = new DataInputStream(httpConn.openInputStream());
    StringBuffer _responseMessage = new StringBuffer();
    int ch;
    while ((ch = _inputStream.read()) != -1) {
        _responseMessage.append((char) ch);
    }
    String res = (_responseMessage.toString());
    String response = res.trim();
    System.out.println("!!!!!!!!!!!!!! Response is: " + response);
    httpConn.close();
} catch (Exception e) {
    Dialog.alert("Error - " + e.toString());
} 
```

该代码以我不完全理解的方式工作。上述代码的作者建议使用`httpURL`服务器的 URL + 我的 json 字符串。最终结果是，在我的服务器上，不是到达 json 字符串，而是到达这样的字符串：

```
http://ip_of_my_server/phpServer/receiver2.php/ + jsonString 
```

我对java不熟悉。我以前为 WP7 和 iOS 做过这个，`httpUrl`我把我的服务器 URL，然后用一个命令我将我的 json 字符串*“附加”*到 http 请求，一切都按预期工作。

如何将 json 字符串附加到上面的 HttpRequest ，而不是将其添加到 URL 以便服务器仅到达 JSON 字符串？

## 编辑（提供使用的其余代码）

* * *

```
//used to specify connection type ( wifi - 3g - etc )
public static String getConnectionString() {
    String connectionString = null;
    // Wifi is the preferred transmission method
    if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
        connectionString = ";interface=wifi";
    }
    // Is the carrier network the only way to connect?
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {
        String carrierUid = getCarrierBIBSUid();
        if (carrierUid == null) {
            // Has carrier coverage, but not BIBS. So use the carrier's TCP network
            connectionString = ";deviceside=true";
        } else {
            // otherwise, use the Uid to construct a valid carrier BIBS request
            connectionString = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
        }
    }
    // Check for an MDS connection instead (BlackBerry Enterprise Server)
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {
        connectionString = ";deviceside=false";
    }
    // If there is no connection available abort to avoid hassling the user unnecessarily
    else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
        connectionString = "none";
    }
    // In theory, all bases are covered by now so this shouldn't be reachable.But hey, just in case ...
    else {
        connectionString = ";deviceside=true";
    }
    System.out.println("!!!!!!!!!!!!!! Connection type is: " + connectionString);
    return connectionString;
    }

/**
 * Looks through the phone's service book for a carrier provided BIBS
 * network
 * 
 * @return The uid used to connect to that network.
 */
private synchronized static String getCarrierBIBSUid() {
    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;

    for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
        if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
            if (records[currentRecord].getName().toLowerCase()
                    .indexOf("bibs") >= 0) {
                return records[currentRecord].getUid();
            }
        }
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T17:41:24.570

第一行应该只是您的 URL

```
String httpURL = "http://ip_of_my_server/phpServer/receiver2.php"; 
```

而且您应该只将 json 字符串作为请求发送到服务器。

代替`byte[] request_body = httpURL.getBytes();`

利用 `byte[] request_body = jsonString.getBytes();`

这是OS 5.0及以上的方法

```
public static HttpConnection getHttpConnection(String url, byte[] postData) {
    HttpConnection conn = null;
    OutputStream out = null;
    try {
        conn = (HttpConnection) new ConnectionFactory().getConnection(url).getConnection();
        if (conn != null) {
            if (postData == null) {
                conn.setRequestMethod(HttpConnection.GET);
                conn.setRequestProperty("User-Agent", "Profile/MIDP-2.0 Configuration/CLDC-1.0");
            } else {
                conn.setRequestMethod(HttpConnection.POST);
                conn.setRequestProperty("Content-Length", String.valueOf(postData.length));
                conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
                conn.setRequestProperty("User-Agent", "Profile/MIDP-2.0 Configuration/CLDC-1.0");

                out = conn.openOutputStream();
                out.write(postData);
                out.flush();
            }
            if (conn.getResponseCode() != 0) {
                return conn;
            }
        }
    } catch (Exception e) {
    } finally {
        try {
            out.close();
        } catch (Exception e2) {
        }
    }

    //Only if exception occurs, we close the connection.
    //Otherwise the caller should close the connection himself.
    try {
        conn.close();
    } catch (Exception e1) {
    }
    return null;
} 
```

如果您希望它与 OS 4.2 及更高版本一起使用，这是完整的类。如果你想用 < 4.5 编译它，你可能需要用它的值 1 替换常量 COVERAGE_DIRECT。

```
public class ConnectionHelper {
    /**
     * Returns the working connection type. The connection types can be BIS, BES, TCP, WAP2, TCPIP
     */
    public static HttpConnection getHttpConnection(String url, byte[] postData) {
        int[] preferredOrder = new int[] { CONNECTION_WIFI, CONNECTION_BIS, CONNECTION_BES, CONNECTION_UNITE, CONNECTION_WAP2, CONNECTION_TCPIP, };

        for (int i = 0; i < preferredOrder.length; i++) {
            int type = preferredOrder[i];
            if (isPresent(type)) {
                HttpConnection conn = null;
                OutputStream out = null;
                try {
                    conn = (HttpConnection) Connector.open(convertURL(type, url));
                    if (conn != null) {
                        if (postData == null) {
                            conn.setRequestMethod(HttpConnection.GET);
                            conn.setRequestProperty("User-Agent", "Profile/MIDP-2.0 Configuration/CLDC-1.0");
                        } else {
                            conn.setRequestMethod(HttpConnection.POST);
                            conn.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_LENGTH, String.valueOf(postData.length));
                            conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
                            conn.setRequestProperty("User-Agent", "Profile/MIDP-2.0 Configuration/CLDC-1.0");

                            out = conn.openOutputStream();
                            out.write(postData);
                            out.flush();
                        }
                        if (conn.getResponseCode() != 0) {
                            return conn;
                        }
                    }
                } catch (Exception e) {
                } finally {
                    try {
                        out.close();
                    } catch (Exception e2) {
                    }
                }
            }
        }
        // Only if exception occurs, we close the connection.
        // Otherwise the caller should close the connection himself.
        try {
            conn.close();
        } catch (Exception e1) {
        }

        return null;
    }

    /** Stores transport ServiceBooks if found. Otherwise, null */
    private static ServiceRecord srMDS, srWiFi, srBIS, srWAP2, srUnite;

    private static final int CONNECTION_DEFAULT = 0;
    private static final int CONNECTION_BIS = 1;
    private static final int CONNECTION_BES = 2;
    private static final int CONNECTION_TCPIP = 3;
    private static final int CONNECTION_WIFI = 4;
    private static final int CONNECTION_WAP2 = 5;
    private static final int CONNECTION_UNITE = 6;

    private static final int CONFIG_TYPE_BES = 1;

    private static final String UNITE_NAME = "Unite";

    private static void checkTransportAvailability() {
        initializeTransportAvailability();
    }

    /**
     * Initializes the ServiceRecord instances for each transport (if available). Otherwise leaves it null. Also determines if sufficient coverage is available for each transport
     * and sets coverage* flags.
     */
    private static void initializeTransportAvailability() {
        ServiceBook sb = ServiceBook.getSB();
        ServiceRecord[] records = sb.getRecords();

        for (int i = 0; i < records.length; i++) {
            ServiceRecord myRecord = records[i];
            String cid, uid;

            if (myRecord.isValid() && !myRecord.isDisabled()) {
                cid = myRecord.getCid().toLowerCase();
                uid = myRecord.getUid().toLowerCase();

                // BIS
                if (cid.indexOf("ippp") != -1 && uid.indexOf("gpmds") != -1) {
                    srBIS = myRecord;
                }

                // BES
                if (cid.indexOf("ippp") != -1 && uid.indexOf("gpmds") == -1) {
                    srMDS = myRecord;
                }
                // WiFi
                if (cid.indexOf("wptcp") != -1 && uid.indexOf("wifi") != -1) {
                    srWiFi = myRecord;
                }

                // Wap2.0
                if (cid.indexOf("wptcp") != -1 && uid.indexOf("wifi") == -1 && uid.indexOf("mms") == -1) {
                    srWAP2 = myRecord;
                }

                // Unite
                if (getConfigType(myRecord) == CONFIG_TYPE_BES && myRecord.getName().equals(UNITE_NAME)) {
                    srUnite = myRecord;
                }
            }
        }
    }

    /**
     * Gets the config type of a ServiceRecord using getDataInt below
     * 
     * @param record
     *            A ServiceRecord
     * @return configType of the ServiceRecord
     */
    private static int getConfigType(ServiceRecord record) {
        return getDataInt(record, 12);
    }

    /**
     * Gets the config type of a ServiceRecord. Passing 12 as type returns the configType.
     * 
     * @param record
     *            A ServiceRecord
     * @param type
     *            dataType
     * @return configType
     */
    private static int getDataInt(ServiceRecord record, int type) {
        DataBuffer buffer = null;
        buffer = getDataBuffer(record, type);

        if (buffer != null) {
            try {
                return ConverterUtilities.readInt(buffer);
            } catch (EOFException e) {
                return -1;
            }
        }
        return -1;
    }

    /**
     * Utility Method for getDataInt()
     */
    private static DataBuffer getDataBuffer(ServiceRecord record, int type) {
        byte[] data = record.getApplicationData();
        if (data != null) {
            DataBuffer buffer = new DataBuffer(data, 0, data.length, true);
            try {
                buffer.readByte();
            } catch (EOFException e1) {
                return null;
            }
            if (ConverterUtilities.findType(buffer, type)) {
                return buffer;
            }
        }
        return null;
    }

    private static String convertURL(int connectionType, String url) {
        switch (connectionType) {
        case CONNECTION_BES:
            url += ";deviceside=false";
            break;
        case CONNECTION_BIS:
            url += ";deviceside=false" + ";ConnectionType=mds-public";
            break;
        case CONNECTION_TCPIP:
            url += ";deviceside=true";
            break;
        case CONNECTION_WIFI:
            url += ";interface=wifi";
            break;
        case CONNECTION_WAP2:
            url += ";deviceside=true;ConnectionUID=" + srWAP2.getUid();
            break;
        case CONNECTION_UNITE:
            url += ";deviceside=false;ConnectionUID=" + srUnite.getUid();
            break;
        }

        return url;
    }

    private static boolean isPresent(int connectionType) {
        checkTransportAvailability();

        switch (connectionType) {
        case CONNECTION_BIS:
            return (srBIS != null && CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_BIS_B));

        case CONNECTION_BES:
            return (srMDS != null && CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_MDS));

        case CONNECTION_WIFI:
            return (srWiFi != null && CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_DIRECT, RadioInfo.WAF_WLAN, false));

        case CONNECTION_TCPIP:
            return (CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_DIRECT));

        case CONNECTION_WAP2:
            return (srWAP2 != null && CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_DIRECT));

        case CONNECTION_UNITE:
            return (srUnite != null && CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_MDS));

        case CONNECTION_DEFAULT:
            return true;
        }

        return false;
    }
} 
```

最后发布您的数据。

```
public void sendJson(String jsonString) {
    String httpURL = "http://ip_of_my_server/phpServer/receiver2.php";
    HttpConnection httpConn = null;

    try {
        httpConn = getHttpConnection(httpURL, jsonString.getBytes());

        if(httpConn.getResponseCode() == 200) {
            //If you need the output, then read it. Otherwise comment it.
            byte[] data = IOUtilities.streamToBytes(httpConn.openInputStream());
            String response = new String(data);
            System.out.println("!!!!!!!!!!!!!! Response is: " + response);
        }
    } catch (Exception e) {
    }
    finally {
        try {
            httpConn.close();
        } catch (Exception e2) {
        }
    }
} 
```

# sql-server - 比较 sqlserver 中的 2 个浮点值

> ID：16149966
> 
> 赞同：14
> 
> 时间：2013-04-22T14:44:16.660
> 
> 标签：sql-server

我`variable-field1`在 2 `tables-table1`&中有一个浮点数`table2`。当我查询表并检查字段的值时，两者看起来相同，但是当我发现它们的差异时，它给出的差异不是零。

```
Field1(Table1) value---84.4660194174757
Field2(Table2) value---84.4660194174757

Differnce---1.4210854715202E-14 
```

为什么我会遇到这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-22T14:51:36.783

*   用于[`ROUND`](http://msdn.microsoft.com/en-gb/library/ms175003.aspx)限制小数位
*   使用`ABS(value1-value2) < 0.00001`一些合适的值
*   不要使用浮动

# ruby-on-rails - 使用 Kaminari，Rails 进行分页

> ID：16149967
> 
> 赞同：1
> 
> 时间：2013-04-22T14:44:17.277
> 
> 标签：ruby-on-rails, pagination, kaminari

我在使用 gem Kaminari 进行分页时遇到问题！

例如，我有 18 页，每页用于分页 - 10 页。当我找到第一个链接时，我看到 5 个链接。当位于 4 - 8 个页面链接时，在 7 - 10。我需要始终显示 10 个页面，尽管如果我位于第一页或最后一页（如果我有 10 个或更多页面）。如果我有 7 页 - 我必须在第一页看到 7 个链接。

有什么提议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:56:11.610

没有直接的方法可以做到这一点。一种选择是设置窗口大小，即在当前页面之后和之前显示的页面数。

```
<%= paginate @listings, :window => 3 %> 
```

您可以根据当前页面生成窗口大​​小并将其发送到分页调用。

# eclipse - 集成 Spring MVC Apache Tiles 和 Hibernate

> ID：16149968
> 
> 赞同：0
> 
> 时间：2013-04-22T14:44:17.633
> 
> 标签：eclipse, spring, sql-server-2008, hibernate, apache-tiles

我正在尝试在没有 Maven 或 STS 环境的 Eclipse 中集成 Spring MVC + Apache Tiles + Hibernate

M- Hibernate V- Apache Tiles C- Spring MVC

1）集成Spring MVC + Apache Tiles成功（使用ResourceBundleViewResolver,tiles2.TilesConfigurer）

2）集成Spring MVC + Hibernate成功（使用hibernateTransactionManager,InternalResourceViewResolver,com.microsoft.sqlserver.jdbc.SQLServerDriver）

现在，当我尝试集成 Spring MVC + Apache Tiles + Hibernate 时出现错误处理 XML 'org/springframework/aop/config/AopNamespaceUtils' 时发生错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:17:42.313

它可能是[this](https://stackoverflow.com/questions/12010970/aop-in-spring-aspect-warning)的副本。

您是否已将**aopalliance.jar**添加到您的类路径中？

`com.springsource.org.apoalliance.jar file, which is not included in org.springframework.aop.jar`

你可以从[这里](http://sourceforge.net/projects/aopalliance/files/aopalliance/)得到它。

# variables - Struts2 - 从复杂结构中获取变量

> ID：16149969
> 
> 赞同：0
> 
> 时间：2013-04-22T14:44:18.227
> 
> 标签：variables, struts2

我有一个 JSP，这里是片段：

```
<s:set var="tmpIdObj"
       value="form.dati.assegnazioniAnnualitaAtto[#qid].lista[#k.index].idObj"/>

<s:set var="c6" 
       value="form.datiVersioneQuoteAssegnazione[#tmpIdObj].confermata"/> 
```

我想写在一行中，避免创建 tmpIdObj 变量，如下所示：

```
<s:set var="c6"
       value="form.datiVersioneQuoteAssegnazione[form.dati.assegnazioniAnnualitaAtto[#qid].lista[#k.index].idObj].confermata"/> 
```

我尝试使用单引号或其他 struts sintaxes，但我无法安排它。我正在寻找有效的语法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:27:17.787

**发疯前的一个例子：**

给定的代码太复杂了，所以我创建了一个 bean 用于测试目的：

```
package fr.hbonjour.formulaires.actions;

public class PlaceBean {

    private String name;

    private String adress;

    private Long index;

    public PlaceBean()
    {
        this(null, null, null);
    }

    public PlaceBean(Long id, String name, String adress)
    {
        this.setName(name);
        this.setAdress(adress);
        this.setIndex(id);
    }

        ... (getters and setters)

} 
```

然后我尝试了这个：

```
<s:bean name="fr.hbonjour.formulaires.actions.PlaceBean" var="bean" />

<s:set var="bean.name" value="places[places[0].index].name" />

    <!-- Prompt the name from the created bean -->
<td><s:property value="bean.name"/></td> 
```

places[0].index 返回一个 Long 值，places[places[0].index].name 返回一个 String 值。这是我的列表的值：

```
0   GABRIEL
1   WU 
```

所以 places[places[0].index].name= places[0].name = GABRIEL。确实`<s:property />`标签显示`GABRIEL`。

一个更棘手的例子：

```
<s:bean name="fr.hbonjour.formulaires.actions.PlaceBean" var="bean" />
<s:iterator status="stat" value="places">
    <tr>
        <s:set var="bean.name" value="places[places[#stat.index].index].name" />
        <td><s:property value="bean.name"/></td>
    </tr>
</s:iterator> 
```

所以...对于 #stat.index = 0 例如，places[places[#stat.index].index].name = places[places[0].index].name = places[0].name = GABRIEL。此代码返回以下值：

```
GABRIEL
WU 
```

**让我们检查！**

form.datiVersioneQuoteAssegnazione[form.dati.assegnazioniAnnualitaAtto[#qid].lista[#k.index].idObj].confermata

我们看到 if`#k.index`是一个迭代器索引并`lista[#k.index].idObj`返回一个 Long 值，`lista[#k.index].idObj`有效（`places[#stat.index].index`在我们的示例中有效）。

Wa 看到，如果`lista[#k.index].idObj`返回一个 Long 值，则`datiVersioneQuoteAssegnazione[lista[#k.index].idObj].confermata`有效（`places[places[#stat.index].index].name`在我们的示例中有效）。

**所以 ？**

我建议您像我在示例中所做的那样逐步检查表达式的每个值。因为没有人能够准确地重新制作您的测试用例。也许您应该特别检查`form.dati.assegnazioniAnnualitaAtto[#qid]`表达式的部分。我不怀疑你会设法以这种方式找到答案。

但无论如何，它太丑了。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:05:50.350

通过使用强制 OGNL 评估`%{}`

```
<s:set var="c6"
       value="form.datiVersioneQuoteAssegnazione[%{form.dati.assegnazioniAnnualitaAtto[#qid].lista[#k.index].idObj}].confermata"/> 
```

复制、粘贴、运行并返回此处发布输出：

```
 <div style="border: 5px solid red; width: 100%;">

    form.dati.assegnazioniAnnualitaAtto[#qid].lista[#k.index].idObj: [
    <s:property value="form.dati.assegnazioniAnnualitaAtto[#qid].lista[#k.index].idObj" />]

    form.datiVersioneQuoteAssegnazione[%{form.dati.assegnazioniAnnualitaAtto[#qid].lista[#k.index].idObj}].confermata: [
    <s:property value="form.datiVersioneQuoteAssegnazione[%{form.dati.assegnazioniAnnualitaAtto[#qid].lista[#k.index].idObj}].confermata" />]

    form.datiVersioneQuoteAssegnazione[form.dati.assegnazioniAnnualitaAtto[%{#qid}].lista[%{#k.index}].idObj].confermata: [
    <s:property value="form.datiVersioneQuoteAssegnazione[form.dati.assegnazioniAnnualitaAtto[%{#qid}].lista[%{#k.index}].idObj].confermata" />]

  </div> 
```

# asp.net-mvc - asp.net mvc 控制器将输入从一个控制器调用到另一个控制器

> ID：16149973
> 
> 赞同：0
> 
> 时间：2013-04-22T14:44:30.500
> 
> 标签：asp.net-mvc

例如：我有控制器，联系我有的地方：

```
public ActionResult Index(string alias = "")
{      
    var list = db2.Pages.ToList();
    var PageModel = list.Where(x => x.PageModelID == 14).SingleOrDefault();

    ViewData["ContactTitle"] = PageModel.Title;
    ViewData["ContactContent"] = PageModel.Content;

    return View(ViewData);
} 
```

我想添加页脚控制器，所以我创建了它，如下所示：

```
public ActionResult Index(string alias = "")
{
    var list = db.Pages.ToList();
    var PageModel = list.Where(x => x.PageModelID == 15).SingleOrDefault();

    ViewData["FooterContent"] = PageModel.Content;

    return View(ViewData);
} 
```

现在我想将 footercontroller 添加到每个其他控制器，在我看来一切都很好，你将 response.write 放在它应该在的位置并且它可以工作，但它会写入来自联系人的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:20:48.620

```
 public ActionResult Index(string alias = "") {

    var list = db2.Pages.ToList();
    var PageModel = list.Where(x => x.PageModelID == 14).SingleOrDefault();
    ViewData["ContactTitle"] = PageModel.Title;
    ViewData["ContactContent"] = PageModel.Content;

        var FooterModel = list.Where(x => x.PageModelID == 15).SingleOrDefault();
        ViewData["FooterContent"] = FooterModel.Content;
    return View(ViewData);
} 
```

在页脚控制器中，

```
 var FooterModel = list.Where(x => x.PageModelID == 15).SingleOrDefault();
        ViewData["FooterContent"] = FooterModel.Content; 
```

# c# - 如何在c#winform应用程序中提取包含多个文件夹并覆盖的rar文件

> ID：16149976
> 
> 赞同：2
> 
> 时间：2013-04-22T14:44:32.687
> 
> 标签：c#, winforms, extract, overwrite, winrar

我想将 rar 文件提取到某个位置。问题是，rar 文件包含 4 个文件夹，并且提取失败。我需要将 rar 中的所有文件和文件夹提取到位置文件夹。并提取不存在的文件。

到目前为止我做了什么：

```
Process winrar = new Process();
winrar.StartInfo.FileName = WinrarPath + @"\unrar.exe";
winrar.StartInfo.CreateNoWindow = true;
winrar.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
winrar.EnableRaisingEvents = true;
winrar.ErrorDataReceived += new 
DataReceivedEventHandler(winrar_ErrorDataReceived);
string src = downloadFilPath; // directory , not the file itself
string des = @"D:\"
winrar.StartInfo.Arguments = string.Format("x -o+ {0} {1}", src, des);
winrar.Start();
winrar.WaitForExit(); 
```

如果 rar 文件只包含一个文件夹，它会很好用。问题在于其中包含多个文件夹的 rar 文件。也许它会帮助你为我的问题提供解决方案。

谢谢，修基

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:54:55.723

使用命令行开关“-o+”指定自动覆盖。在您的示例中，参数行将变为：

```
winrar.StartInfo.Arguments = string.Format("x -o+ \"{0}\" \"{1}\"", src, des); 
```

但是，根据您需要此应用程序的可移植性和可靠性，您可能需要考虑使用本机 .NET 库来处理 RAR 和其他存档处理。我过去成功使用过的一个这样的库是[SharpCompress](http://sharpcompress.codeplex.com/SourceControl/changeset/view/fcca5e95eafd#README)。

从 WinRAR 帮助文件：

> **开关 -O[+|-] - 设置覆盖模式**
> 
> * * *
> 
> 提取和更新存档文件时都可以使用此开关。可以使用以下模式：
> 
> -o 覆盖前询问（提取文件的默认值）
> 
> -o+ 覆盖所有（更新归档文件的默认值）；
> 
> -o- 跳过现有文件。

# android - PhoneGap 错误 - “未捕获的 ReferenceError：cordova 未定义”

> ID：16149986
> 
> 赞同：7
> 
> 时间：2013-04-22T14:45:01.253
> 
> 标签：android, cordova

我正在尝试使用 Android 上的菜单按钮和 PhoneGap。问题是我无法使用它，因为日志中出现此错误：

“未捕获的 ReferenceError：cordova 未定义”。

这是来源：

```
<!DOCTYPE html>
<html>
    <head>
            <!--<script type="text/javascript" charset="utf-8" src="js/cordova-2.6.0.js"></script>-->
            <!--<script type="text/javascript" charset="utf-8" src="cordova-2.6.0.js"></script>-->
            <!--<script type="text/javascript" charset="utf-8" src="js/cordova.js"></script>-->
            <script type="text/javascript" charset="utf-8" src="cordova.js"></script>

            <script type="text/javascript">
                function onLoad() {
                    document.addEventListener("deviceready", function () {
                        document.addEventListener("menubutton", function(){
                            alert('Menu button pressed.');    
                        }, true);
                    }, false);
                }
            </script>

    </head>
    <body onload="onLoad()">
            <p>Hello world!</p>
        </body>
</html> 
```

我认为问题在于cordova.js 的导入，所以我尝试使用所有这些已注释的选项。

我不知道是否有任何关系，但是每次我启动脚本时，都会在控制台中出现此错误，并带有红色：

```
E/webview(21743): registerForStylusPenEvent onAttachedToWindow
E/webview(21743): registerForStylusPenEvent START
E/webview(21743): registerForStylusPenEvent END 
```

如果有一些英语错误，我很抱歉，但我正在尝试不使用谷歌翻译。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T14:49:47.810

首先请检查您的cordova.js 的路径和文件名是否正确。然后去掉onLoad事件，`deviceready`在脚本文件中写入事件钩子，如下图：

```
<!DOCTYPE html>
<html>
  <head>
    <!--<script type="text/javascript" charset="utf-8" src="js/cordova-2.6.0.js"></script>-->
    <!--<script type="text/javascript" charset="utf-8" src="cordova-2.6.0.js"></script>-->
    <!--<script type="text/javascript" charset="utf-8" src="js/cordova.js"></script>-->
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript">
      document.addEventListener("deviceready", function () {
        document.addEventListener("menubutton", function() {
          alert('Menu button pressed.');
        }, true);
      }, false);
    </script>
  </head>
  <body>
    <p>Hello world!</p>
  </body>
</html> 
```

# iphone - 为什么即使我在后台请求位置更新，我的 iOS 应用程序也会被杀死？

> ID：16149988
> 
> 赞同：0
> 
> 时间：2013-04-22T14:45:03.537
> 
> 标签：iphone, ios, gps, core-location

我的 iOS 应用程序有时会被杀死，即使我在 plist 中的“必需的后台模式”下放置了“用于位置更新的应用程序注册”。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
 NSDate *dateEnteredIntoBackground = [NSDate date];

 FSLog(@"*** ENTERING BACKGROUND ***");

 [application beginBackgroundTaskWithExpirationHandler:^{ 

    NSDate *dateOfTermination = [NSDate date];              

}];
} 
```

在监视上述代码时，当它被踢出时，NSDate 对象总是相隔 10 分钟。

但是：更令人困惑的是，我经常遇到应用程序乐于在后台运行超过 30 分钟而没有终止的情况。作为附加测试，我将 iPhone 放入法拉第笼中，以确保不会调用位置委托更新（这通过读回写入的日志文件来确认）；所以似乎可以排除。

任何线索/建议？

谢谢

卡尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T15:52:10.513

您实际上必须请求新的位置以防止您的应用程序被暂停。如果您在一定时间内没有请求新的位置，iOS 将暂停您的应用程序。

作为解决方法，您可以执行以下操作：

*   不断请求新位置（最迟在您的过期处理程序中）
*   使用“重大变化位置服务”，只要位置发生变化，它就会唤醒你

更多细节可以在Apple 官方文档的[“App States and Multitasking”](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)和[“Make your App Location Aware”中找到。](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497)

# c# - Foreach 循环/数据表

> ID：16149992
> 
> 赞同：0
> 
> 时间：2013-04-22T14:45:19.790
> 
> 标签：c#, foreach, datatable

我在使用以下代码时遇到了一些困难，当我运行代码时，它通过 for each 没问题，但我的结果不是我想要的，代码的想法是在基于 win-form 上显示按钮关于数据表的结果，但是当代码运行时，表单上没有显示任何按钮，并且应该出现一个，因为有一个“是”值

```
private void formconfig1()
    {
        dtresults = SQLMethods.GetUserNames();

        string scrap;
        string production;
        string change;

        int i = 0;

        foreach (DataRow row in dtresults.Rows)
        {

            scrap = dtresults.Rows[i]["btnscrap"].ToString();
            if (scrap.Equals("yes"))
            {
                btnSREntry.Show();
            }
            else
            {
                btnSREntry.Hide();
            }

            production = dtresults.Rows[i]["btnproduction"].ToString();
            if (production.Equals("yes"))
            {
                btnProductionEntry.Show();
            }
            else
            {
                btnProductionEntry.Hide();
            }

            change = dtresults.Rows[i]["btnchange"].ToString();
            if (change.Equals("yes"))
            {
                btnSRChange.Show();
            }
            else
            {
                btnSRChange.Hide();
            }
            i++;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:53:02.413

我将以这种方式更改您的代码

```
foreach (DataRow row in dtresults.Rows)
{
    btnSREntry.Visible = (row["btnscrap"].ToString().ToLower()  == "yes");
    btnProductionEntry.Visible = (row["btnproduction"].ToString().ToLower() == "yes");
    btnSRChange.Visible = (row["btnchange"].ToString().ToLower() == "yes");
} 
```

首先，我将使用在 foreach 循环中声明的 DataRow，其次，我会将您的字段内容转换为小写，第三，我将使用属性 Visible 而不是 Show/Hide 方法，以方便使用三元运算符

DataRow 扩展字段也是一种优雅的方法

```
foreach (DataRow row in dtresults.Rows)
{
    btnSREntry.Visible = (row.Field<string>("btnscrap").ToLower()  == "yes");
    btnProductionEntry.Visible = (row.Field<string>("btnproduction").ToLower() == "yes");
    btnSRChange.Visible = (row.Field<string>("btnchange").ToLower() == "yes");
} 
```

当然，这假设您的数据库字段是文本类型。
相反，如果它们是布尔值（位），那么您可以大大简化代码

```
foreach (DataRow row in dtresults.Rows)
{
    btnSREntry.Visible = row.Field<bool>("btnscrap");
    btnProductionEntry.Visible = row.Field<bool>("btnproduction");
    btnSRChange.Visible = row.Field<bool>("btnchange");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:50:52.287

假设您的数据列是布尔值（如果不是，它们可能应该是，因为这就是您使用它们的方式），您的代码应该看起来像这样。

```
bool scrap;
bool production;
bool change;

foreach (DataRow row in dtresults.Rows)
{
    scrap = (bool)row["btnscrap"];
    if (scrap)
    {
        btnSREntry.Show();
    }
    else
    {
        btnSREntry.Hide();
    }

    production = (bool)row["btnproduction"];
    if (production)
    {
        btnProductionEntry.Show();
    }
    else
    {
        btnProductionEntry.Hide();
    }

    change = (bool)row["btnchange"];
    if (change)
    {
        btnSRChange.Show();
    }
    else
    {
        btnSRChange.Hide();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:51:13.160

我的猜测是这`dtresults.Rows[i]["btnscrap"]`实际上是一个布尔值。
您必须测试布尔值而不是字符串表示。

```
bool isScrap = (bool)dtresults.Rows[i]["btnscrap"];
if (isScrap )
{
    btnSREntry.Show();
}
else
{
    btnSREntry.Hide();
} 
```

但这只是客人。列的类型是什么`btnchange`，在您的数据库中？`btnproduction``btnscrap`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:07:04.770

您正在循环的事实表明您有不止一行，如果您在特定列的每一行中都没有 true/yes 值，那么您最终将显示一行的按钮，然后将其隐藏在下一行。

例如，这将根据结果的顺序隐藏所有按钮，只有最后一行决定了按钮的状态。

```
btnscrap | btnproduction | btnchange

   yes         yes           yes 
   yes         no            yes
   no          no            no <-- the only row that matters 
```

# android - Android-错误：R 无法解决（Eclipse）

> ID：16149996
> 
> 赞同：-5
> 
> 时间：2013-04-22T14:45:29.150
> 
> 标签：android, eclipse, r.java-file

我清理了我的整个项目，现在 Eclipse 给了我错误... R 无法解决。如果我导入 R，它会给我更多的错误和错误。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:47:29.527

通常，如果您的资源文件中某处出现错误并且无法正确生成 R.java 文件，则会发生这种情况。检查控制台上有关文件问题的任何错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:49:38.757

我发现这个错误可能是由于 R.java 文件没有正确重新生成而发生的。以及无法正确生成它的原因是，您的 XML 文件中可能存在 Eclipse 未检测到/突出显示的错误。确保您一一检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:51:08.607

确保您的资源文件不包含任何错误，还要确保您打开的资源文件中没有“未保存的更改”待处理（主要发生在 XML 文件中）。

之后，如果 R 仍然无法解决，您可以通过按 调用 eclipse 手动生成它`Project > Clean`。