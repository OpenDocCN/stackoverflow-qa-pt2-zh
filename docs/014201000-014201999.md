# StackOverflow 问答 14201000-14201999

# android - 使用大密度屏幕声明

> ID：14201002
> 
> 赞同：0
> 
> 时间：2013-01-07T17:29:43.520
> 
> 标签：android, screen-orientation, samsung-mobile

我正在开发一个 android 应用程序，还没有`layout-large`为我的应用程序的方向开发布局。我想知道除了定义这种屏幕密度的 7 英寸平板电脑之外，是否有人有任何设备类型的详细信息。这是用于 Note 或 Note 2 的屏幕布局吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:52:29.550

You should read through Android's [Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html) document. Especially [How to Support Multiple Screens](http://developer.android.com/guide/practices/screens_support.html#support) and [Configuration Examples](http://developer.android.com/guide/practices/screens_support.html#ConfigurationExamples).

Basically it comes down to this: unless you know that your users have specific device(s), you really shouldn't try to design to specific devices. Instead, design to specific sizes in density-independent pixels (e.g. my tablet layout requires a minimum of 600dp in width to be useful). Then you code your app to change layouts based on some inflection points.

If you're just looking for a general starting point, Google recommends a minimum screen width of 600dp for a 7" tablet and 720dp for a 10" tablet. Anything less than 600dp becomes a "phone" layout.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:42:15.613

不，Note / Note 2 使用 320dpi，这是大多数手机的正常布局，平板电脑使用 240dpi 或更低 (192dpi)。但在大多数情况下，布局会自动调整大小。

# python - 两次打电话检查应该有效吗？

> ID：14201004
> 
> 赞同：3
> 
> 时间：2013-01-07T17:29:48.777
> 
> 标签：python, z3

[请参阅http://rise4fun.com/Z3Py/GTYu](http://rise4fun.com/Z3Py/GTYu)上的 PyZ3 程序。第一次调用`check()`工作正常，但如果我们向求解器添加约束并`check()`再次调用，我们会得到一个不一致的模型！

```
sy_i = Bool('sy_i')
s0_v, s1_v, s2_v, sx_v, sy_v = Reals('s0_v s1_v s2_v sx_v sy_v')

c = [s0_v >= 1,
     sx_v >= 1,

     s1_v >= s0_v * sx_v,

     sy_v >= 1,

     Or(Not(sy_i), s1_v == RealVal(0.0)),

     s2_v >= s1_v * sy_v
]

solver = Solver()
solver.add(c)
print solver.check()
print solver.model()

solver.add(True)
solver.check()
print solver.model() 
```

有人知道发生了什么吗？

不稳定的 Z3 版本得到相同的结果。

附加上下文：

该程序是使用组合`nlsat`和`bool`求解器的更大程序的简化，遵循答案的重要建议：[Z3 真实算术和数据类型理论集成不太好](https://stackoverflow.com/questions/13868156/z3-real-arithmetics-and-data-types-theories-integrating-not-that-well)

请注意，该方法似乎工作得很好，但是当尝试添加更多约束并重用求解器时，就会出现这个问题。也许它错误地检测到了解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:58:32.890

默认求解器对象`Solver()`本质上是一组求解器。它还尝试检测使用模式（增量或非增量）。如果执行了多个`check()`，则假定用户处于“增量”模式，并使用不完整的非线性算术的通用增量求解器。

要强制 Z3 始终使用`nlsat`，我们应该使用创建求解器对象

```
solver = Tactic('qfnra-nlsat').solver() 
```

如果我们这样做，我们仍然可以使用`push()`, `pop()`, multiple `check()`。但是，`nlsat`不会“重用”以前`check()`调用的工作。[这是您的脚本的新版本](http://rise4fun.com/Z3Py/tyBC)。

# string - 如何使用 JSFL (Flash IDE) 读取/写入剪贴板

> ID：14201008
> 
> 赞同：0
> 
> 时间：2013-01-07T17:30:09.770
> 
> 标签：string, flash, clipboard, read-write, jsfl

是否有某个 JSFL 类可用于访问剪贴板的数据？

我调用了这个方法，它复制了在时间线上选择的较新的 Motion Object 补间：

```
timeline.copyMotionAsAS3(); 
```

但是我还没有找到任何可以返回从这个函数复制到剪贴板的字符串。如果我可以从该方法中获取字符串，它会节省我从剪贴板读取它的时间。

知道一种访问它的方法还是很好的！

**注意：我不是在运行时在 AS3 中寻找剪贴板访问 - 我专门研究如何为 Flash 扩展 JSFL 脚本完成此操作（创作时间）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:47:20.290

运动剪贴板是独立的。它会生成一个您可以阅读的文件。我已经在这篇文章中描述了如何访问其内容：http: [//ajarproductions.com/blog/2009/03/04/hacking-the-flash-cs4-motion-model-to-create-extensions/](http://ajarproductions.com/blog/2009/03/04/hacking-the-flash-cs4-motion-model-to-create-extensions/)

# postgresql - 我无法使用 Talend 将 Excel 文件正确映射到 postgreSQL。无法从输入文件中强制输入 id

> ID：14201013
> 
> 赞同：0
> 
> 时间：2013-01-07T17:30:30.013
> 
> 标签：postgresql, talend

我有一个简单的 xls 文件（excel），我有一个 N_ENR 列，其中包含数值（表中的主键）。

我正在使用 Talend。

现在，我想将所有记录保存到 potgreSQL 表（表客户端）中，问题是我的输出表（表客户端）生成了新的 id，其他列映射正确（地址、日期、电话号码……） .

我将主键（id 列）的类型更改为串行，仍然不起作用。

有什么建议么 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:04:38.377

如果您能够更改 PK 列的类型，请将其更改为“int”，然后将源 ID 映射到该列。

# java - 带有预先确定的代码模板的新文件向导 eclipse 插件

> ID：14201015
> 
> 赞同：0
> 
> 时间：2013-01-07T17:30:39.050
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-templates

我想为新文件向导创建一个 Eclipse 插件。该向导询问文件的包名和类名，并基于两个特定的类类型选择（可以从下拉列表中选择）它生成带有预构建模板的 java 文件方法和变量声明（但基于用户选择的类名和包名）。请建议我怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:53:18.660

使用 JET（Java Emitter Templates）可以轻松实现。
步骤：
1) 创建一个具有程序结构的模板文件。在您的情况下，将有用于动态输入（如类名和包名）的占位符。
链接：[Vogella](http://www.vogella.com/articles/EclipseJET/article.html)，[教程 1](http://www.eclipse.org/articles/Article-JET/jet_tutorial1.html)和[教程 2](http://www.eclipse.org/articles/Article-JET2/jet_tutorial2.html)
2) 在运行时传递这些动态值并执行模板将为您提供字符串形式的类内容。
3) 使用 JDT API，您可以轻松地创建包含此内容的包、类等。
链接：[JDT 示例](http://www.vogella.com/articles/EclipseJDT/article.html#jdt_modifyingprojects)和 [JDT API](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/overview-summary.html)

# python - 查询 MySQL 时出现 Python 错误 -- 'int' 不支持缓冲区接口

> ID：14201018
> 
> 赞同：2
> 
> 时间：2013-01-07T17:30:50.587
> 
> 标签：python, mysql

该代码昨天运行良好，作为 cron 作业运行。今天突然，它不是，我收到这个错误：

```
 Traceback (most recent call last):
  File "C:/Users/ac33g1r1/Documents/BD_Scripts/test plist script.py", line 28, in <module>
    [plist[sid], lastQ[0]] )
  File "C:\Python33\pymysql\cursors.py", line 117, in execute
    self.errorhandler(self, exc, value)
  File "C:\Python33\pymysql\connections.py", line 187, in defaulterrorhandler
    raise Error(errorclass, errorvalue)
pymysql.err.Error: (<class 'TypeError'>, TypeError("'int' does not support the buffer interface",)) 
```

我已经搜索过，无法弄清楚为什么这突然改变了。Windows Server 2008 上的 Python 版本是 3.3.0。我真的很想让这个 cron 工作再次工作，但不知道究竟是什么原因。

这是代码：

```
import pymysql

conn = pymysql.connect(host='1.2.3.4', port = 1234, user = 'uname',  passwd='pword', db='db_x')
cur = conn.cursor()

lastQ = [165]
plist = [3327, 2145, 3429, 3442, 2905, 3339, 2628, 1655, 1831, 3202, 2551, 2110]

###Debug statements
print("plist")
print(len(plist))
print ("\n")

print("last[Q]")
print(lastQ[0] )
print ("\n")
lastQ[0] = lastQ[0] + 1
print(lastQ[0] )

# Code that is throwing error

for sid in range(len(plist)):
   lastQ[0] = lastQ[0] + 1
   cur.execute("""INSERT INTO queuelist(itemID, sortID)
               VALUES(%s,%s)""",
               [plist[sid], lastQ[0]] )

cur.close()
conn.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T08:58:28.887

我在 64 位 Windows 7 上也遇到了类似的问题，[这个解决方法](https://code.google.com/p/pymysql/issues/detail?id=55)帮助了我。只需将 pymysql 的**connections.py中的****unpack_int24、unpack_int32 和 unpack_int64**函数替换为

 **```
def unpack_int24(n):
    try:
        return struct.unpack('B',n[0])[0] + (struct.unpack('B', n[1])[0] << 8) +\
            (struct.unpack('B',n[2])[0] << 16)
    except TypeError:
        return n[0]+(n[1]<<8)+(n[2]<<16)

def unpack_int32(n):
    try:
        return struct.unpack('B',n[0])[0] + (struct.unpack('B', n[1])[0] << 8) +\
            (struct.unpack('B',n[2])[0] << 16) + (struct.unpack('B', n[3])[0] << 24)
    except TypeError:
        return n[0]+(n[1]<<8)+(n[2]<<16)+(n[3]<<24)

def unpack_int64(n):
    try:
        return struct.unpack('B',n[0])[0] + (struct.unpack('B', n[1])[0]<<8) +\
        (struct.unpack('B',n[2])[0] << 16) + (struct.unpack('B',n[3])[0]<<24)+\
        (struct.unpack('B',n[4])[0] << 32) + (struct.unpack('B',n[5])[0]<<40)+\
        (struct.unpack('B',n[6])[0] << 48) + (struct.unpack('B',n[7])[0]<<56)
    except TypeError:
        return n[0]+(n[1]<<8)+(n[2]<<16)+(n[3]<<24) \
              +(n[4]<<32)+(n[5]<<40)+(n[6]<<48)+(n[7]<<56) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:54:14.867

Did you upgrade Python or pymysql?

I see in the pymysql issues list that there are various known issues when used with Python 3 that sound similar. Due to the distinction between byte arrays and strings in Python 3 the unpack_* functions in pymysql/connections.py aren't working correctly. See [http://code.google.com/p/pymysql/issues/detail?id=55#c3](http://code.google.com/p/pymysql/issues/detail?id=55#c3) for an example issue description and a provided work-around.**

# php - 枚举数组并报告索引范围内的连续事件

> ID：14201019
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:30:52.553
> 
> 标签：php, arrays, report, indexing, frequency

我必须使用哪种 php 数组枚举来从此数组中获取：

`[0] => 0 [1] => 0 [2] => 0 [3] => 0 [4] => 42 [5] => 42 [6] => 42 [7] => 42 [8] => 36 [9] => 36 [10] => 0 [11] => 36 [12] => 36 [13] => 36 [14] => 36 [15] => 36 [16] => 42 [17] => 42 [18] => 42 [19] => 42 [20] => 42 [21] => 42 [22] => 42 [23] => 0`

对此报告：

```
index 0 to index 4   ... 0
index 4 to index 8   ... 42
index 8 to index 16  ... 36
index 16 to index 23 ... 42
index 23             ... 0 
```

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:42:54.433

```
$startIndex = 0;
$endIndex = 0;
$lastVal = $arr[0];

for($i=1; $i<count($arr); $i++) {
   if ($arr[$i] == $lastVal) {
       $endIndex = $i;
   } else {
       echo "index $startIndex to $endIndex ... $lastVal";
       $startIndex = $i + 1;
       $endIndex = $i + 1;
       $lastVal = $arr[$i + 1]
   }
} 
```

我知道当你到达数组的末尾时会有一些问题，如果索引范围只有 1 长，但这是一般的想法，绝对应该足以让你继续

# php - Wordpress 菜单突出显示

> ID：14201020
> 
> 赞同：0
> 
> 时间：2013-01-07T17:30:53.653
> 
> 标签：php, wordpress

我是 Wordpress 的新手。我的版本是 WP 3.4.2 该网站在我的本地主机上，抱歉我不能分享它。

如何根据当前帖子动态突出显示导航菜单项？这个问题在 Stack Overflow 上出现了很多，但我还没有找到任何可接受的答案。我在这里看到的一些答案使用 Javascript，但我不能，因为 20% 的访问者没有 js。

我找到了一个解决方案，使用过滤器挂钩（对我来说是一个新概念）。我在 header.php 中添加了下面的 filter_hook。

这个钩子在正确的帖子上触发，但最终结果是错误的。我的整个菜单不是在我的菜单中添加一个类名“current-menu-item”，而是字符串：“current-menu-item”；

谁能帮我理解我做错了什么？

```
if(($post->post_type) =="communities")
    add_filter('wp_nav_menu' , 'special_nav_class' , 10 , 2);

function special_nav_class( $item){

     if(true){
             $class = "current-menu-item";
     }
     return $class;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:18:03.663

如果您使用 WordPress[嵌入式菜单功能](http://codex.wordpress.org/Function_Reference/register_nav_menus)（并且您绝对应该），WordPress 会自动将`current-menu-item`类添加到当前项，如果当前项在下拉菜单中，则添加`current-menu-parent`到 main 。`LI`

然后您所要做的就是将您的 CSS 规则应用于这些类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:12:40.053

我喜欢首先查看相关过滤器的源代码，例如[WordPress Trac](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/nav-menu-template.php#L237)上 nav-menu-template.php 的第 237 行的“wp_nav_menu” 。

查看代码，我看到过滤器可以更改 $nav_menu 变量。所以你从这个过滤器返回的任何东西都会变成 html。如果您想更改 CSS 类，您可能需要使用“nav_menu_css_class”过滤器。此过滤器使您能够查看分配的类并以任何方式覆盖它们，即仅使用您指定的类，或添加您的类。

```
if ( $post->post_type == "communities" ) {
    add_filter( 'nav_menu_css_class', 'special_nav_class', 10 , 3 );
}

function special_nav_class( $classes, $item, $args ){
    if ( true ) {
        $classes[] = "current-menu-item";
    }
    return $classes;
} 
```

我认为您可能想要更多地玩弄这个，以便将您的 if 语句移动到 special_nav_class 函数中。我认为 post_type 可以从您从过滤器收到的 $item 变量中确定。但我不是 100% 的。

# c++ - 命名空间中的未命名空间

> ID：14201023
> 
> 赞同：21
> 
> 时间：2013-01-07T17:31:02.840
> 
> 标签：c++, namespaces

我被要求修改的一些代码看起来像这样：

```
namespace XXX {

namespace {

// some stuff

} // end of unnamed

// Some stuff within the scope of XXX

} // end of XXX 
```

我很难看到将未命名的命名空间嵌入另一个命名空间的优势（如果有的话），我正在考虑将其更改为：

```
namespace {

// some stuff

} // end of unnamed

namespace XXX {

// Some stuff within the scope of XXX

} // end of XXX 
```

任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-07T18:23:40.547

它确实有实际的好处。一个未命名的命名空间将名称隐藏在其中以防止**不同的翻译单元**。

上面的代码之所以有效，只是因为 foo 的定义在**同一个**翻译单元中。

假设 main() 和 foo() 的定义在**不同**的翻译单元中。它会编译，因为主文件包含声明的标题。但它不会链接，因为逻辑上没有 X::(未命名的命名空间)::foo 这样的东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T17:32:52.263

好的，结果[`X::<anonymous>::foo()`是可见的`X::foo()`](https://ideone.com/NwD6kt)。我很惊讶。

所以，不，几乎没有实际的好处。虽然可能存在语义或文档含义。

* * *

### 原始答案

好吧，这取决于“东西”，不是吗？

现有代码允许代码`X`拥有“私有”的其他东西，这些东西也在其中`X`但不能从外部访问`X`：

```
#include <iostream>

namespace X {
   namespace {
      void foo() { std::cout << "lol\n"; }
   }

   void bar() { foo(); }
}

int main()
{
   X::bar();
   // X::foo();  // can't do this directly  [edit: turns out we can!]
} 
```

*   输出：`lol\n`

您提出的方法使整个翻译单元都可以使用“私有内容”：

```
#include <iostream>

namespace {
   void foo() { std::cout << "lol\n"; }
}

namespace X {
   void bar() { foo(); }
}

int main()
{
   X::bar();
   foo();     // works
} 
```

*   输出：`lol\nlol\n`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-31T12:37:22.267

从全局的角度来看几乎没有什么好处：如果从其他翻译单元的角度来看，两种方法都有相同的结果：匿名命名空间是不可见的（或无法引用）。

从同一个翻译单元的角度来看，有一个区别：定义顶级命名空间这一事实意味着您减少了导入在其他地方声明的命名空间冲突的可能性，最常见的是全局命名空间（无命名空间函数，想想从 ISO C 继承的任何东西，比如从 stdio.h 或其他）。

例如，如果您在该翻译单元中导入的全局标头具有“无名称空间” abort() 并且您在翻译单元中声明了名称空间 { abort() { ...} }，那么您将有歧义，例如 gcc会抛出编译错误：

```
error: call of overloaded ‘abort()’ is ambiguous 
```

现在，如果您在命名命名空间中命名匿名命名空间，您将获得以下效果：

a) 在命名空间内声明的函数没有歧义，因为它具有优先级：

```
namespace a { namespace { abort() {...} } } 
```

如果你有一个像 a::whatever() 这样的函数并且它引用 abort()，它将在它自己的命名空间中解析，因为它具有优先级。

b) 您将没有 a::abort() 的全局链接，因为它在翻译单元之外不存在，与 namespace { abort(); 相同 } 在顶层但没有上面的潜在冲突。

并且在“b”中存在区别：它与命名空间 a { abort(); 不同。} 因为它没有全局链接，所以你可以在另一个翻译单元中重新定义它而不会发生冲突。祝你好运尝试链接两个定义命名空间 a { abort() { ... } } ... 的翻译单元

所以你得到的正是你的意思：

```
namespace a { // you have a named space, so you don't have conflicts with the nameless one
  namespace { // but you have local visibility and linkage
    whatever(); // for this
  }
} 
```

简而言之：两种方式都有相似之处，但也有区别。有人可能会说这不是很有用，但作为一种风格，它会抢先避免与全局命名空间发生冲突。人们仍然可以争辩说，既然这些会在编译时被捕获（希望至少在签名完全匹配时），为什么还要麻烦。但是，如果您的项目是一个可移植的库，并且您的头文件可能会根据环境头文件本身导入的任何内容而受到污染，那么这是一个有用的概念，否则您的用户将不得不为他们的系统修补您的库，或者您需要#ifdefs这里和那里。

我在 ISO/ANSI C 99 上进行了很多编程，有时我不得不做一些事情，比如：

```
#include <headerA.h>
#define symbol symbolB
#include <headerB.h>
// or some crap alike. And I have linker problems with above. 
```

...因为两个头文件（例如来自不同的库）都设法污染了命名空间，我不能简单地修补别人的库。

C++ 命名空间解决了这个问题，除非其他人不使用它，因此*您*必须采取措施防止（这不是遗留代码的选项）或抵消它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-22T15:16:53.533

在命名命名空间中使用未命名命名空间的好处之一是防止[依赖于参数的查找 (ADL)](https://en.cppreference.com/w/cpp/language/adl)。实际上，如果您在同一个命名空间中定义类型和函数，您可能会遇到[不良影响](https://stackoverflow.com/questions/2958648/what-are-the-pitfalls-of-adl)。下面的例子说明了这个问题：

假设我们有一个简单的头文件，如下所示，我们在其中为我们的命名空间`myfunction`中的自定义类型定义了一个通用函数。`mytype``mynamespace`

```
//header.h
namespace mynamespace {
    struct mytype {};

    static void myfunction(mytype){}
} 
```

现在，在另一个文件`test.cpp`中，我们想要覆盖`myfunction`特定目的（例如打印调试信息，做额外的事情，I18N...），而不改变我们程序的其余部分。以下代码不会与我们的头文件冲突，因为它是不同的命名空间，即全局命名空间。

```
//test.cpp
#include "header.h"

static void myfunction(mynamespace::mytype){}

int main(){
    mynamespace::mytype val = {};
    //error: call of overloaded 'myfunction(mynamespace::mytype&)' is ambiguous
    myfunction(val);
} 
```

令人惊讶的是，由于 ADL，对上面的调用`myfunction`是模棱两可的并且无法编译。为了解决您的问题，您可以通过匿名命名空间来阻止 ADL。

```
//header.h
namespace mynamespace {
    struct mytype {};

    //OK prevents ADL
    namespace {
        static void myfunction(mytype){}
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-30T19:06:53.223

一个简单的好处是，从命名命名空间中的匿名命名空间，可以直接访问命名命名空间的东西：

```
namespace foo {
    class Bar;

    namespace {
        void Baz() {
            Bar bar;  // no need to specify the foo namespace 
            …
        }
    }

    …
} 
```

代替：

```
class foo::Bar;

namespace {
    void Baz() {
        foo::Bar bar;
        …
    }
}

namespace foo {
    …
} 
```

# android - 在 SureLock 应用程序中删除最近的应用程序按钮

> ID：14201024
> 
> 赞同：5
> 
> 时间：2013-01-07T17:31:02.660
> 
> 标签：android, android-intent

任何人都知道如何确定锁定从无根设备上的导航栏中删除最近的应用程序按钮，或者有什么方法可以禁用主页和最近的应用程序图标。

任何回复都会有很大帮助...

谢谢， 安基特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T05:03:23.927

SureLock所做的是在传递给[startActivity(intent)的意图](http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29)[中](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)添加标志[FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS](https://play.google.com/store/apps/details?id=com.gears42.surelock)。[请参阅此处](https://stackoverflow.com/a/13385366/925202)的较早讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T00:13:22.227

通过使您的应用程序成为启动器应用程序，它会禁用主页按钮。我还不确定如何禁用最近的应用程序按钮.. 我会寻找那个

# c - 如何在 C 中调试套接字重置

> ID：14201031
> 
> 赞同：1
> 
> 时间：2013-01-07T17:31:34.057
> 
> 标签：c, sockets, freebsd

我有一些代码可以建立与服务器的连接。有一段时间，我的代码运行正常，一切正常。

但在某些时候，当尝试连接时，我的应用程序会发送一个 SYN 标志，获得一个 SYN/ACK，然后将开始发送一个终止连接的 FIN 标志！

这是使用 FreeBSD 9。我已经检查了所有限制，据我所知，我没有超过任何打开的套接字限制或任何东西，我不会执行打开套接字甚至发送 SYN 标志，如果事情就是这样。

我还能做些什么来调试这个？在一个出站连接发生后，所有出站连接都开始发生，所以我认为这一定是某种系统性问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:01:45.027

它更有可能是一个编码问题，而不是一些复杂、险恶的网络问题。我同意 netcoder，检查你的电话，检查你的返回值。检查你没有做一些愚蠢的事情，比如吃文件描述符！检查两端的防火墙，我之前已经看到防火墙过度保护的效果。或者贴一些代码让我们看看......

# python - NLTK 中内置的 POS 标记器对其决策是否具有置信度值？

> ID：14201036
> 
> 赞同：2
> 
> 时间：2013-01-07T17:31:52.943
> 
> 标签：python, statistics, nltk, tagging, opennlp

我正在使用 NLTK 包中的基本标记器。我之前使用的是 OpenNLP 的标记系统。我正在切换，因为 NLTK 有更多我可以在以后在我的项目中使用的预构建模块。但是我现在缺少的一件事是标记器给出的“信心”值。

最初使用 OpenNLP 设置时，我得到了一个数值（范围从 0 到 1），它告诉我标注器对其决定的信心程度（0 表示完全没有信心，1 表示完全有信心）。我想知道是否有人知道 NLTK 标记系统中可以类似工作的任何值。它不必是相同的系统，但我希望某种数字排名可以让我轻松查看给定标签是否是我应该仔细检查的东西。

我在 NLTK 中确实拥有的一件事类似于 Confidence Value。是标注器的总体准确度评级，但仅提供预先标记的来源，并且适用于整个文档，而不是基于单词的。

我的想法是，也许有一些统计确定为单词选择了哪个标签，如果我能得到它可能可以用作类似的度量，但我找不到任何类似的东西。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T09:55:43.563

NLTK 标注器不为每个标记提供直接的置信度值，但朴素贝叶斯标注器允许传递一个截止概率：

```
tagger = ClassifierBasedPOSTagger(train=training_sentences, cutoff_prob=0.95) 
```

如果 POS 标签的置信度低于 95%，则标注器将返回 None。我发现 0.95 是准确率和召回率之间的一个很好的权衡（当然这取决于您的应用程序的需求）。

# forms - 在哪里以 yii 形式编写 jquery ajax

> ID：14201041
> 
> 赞同：0
> 
> 时间：2013-01-07T17:32:28.870
> 
> 标签：forms, jquery, yii

我正在尝试为文本字段编写自定义自动完成功能。谁能告诉我在哪里写这个 jquery，在 yii 这个文本字段的 ajax 代码。

```
 <div id="output" class="row">
            <?php echo $form->labelEx($model,'id'); ?>
      <?php echo $form->hiddenField($model,'id'); ?>
      <?php echo $form->textField($model,'id');
      '$(function () {
        $("#search").change(function(){

      $.ajax({url:BASE_URL + '/controller/lookup/',
                    type:"POST",
                    data:this.value,
                    success:function(data){
                   $("#output").html(data);
      }
      });

      });
              });'?> 
```

任何帮助请，

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:53:12.603

您应该只创建一个新文件，将其命名为“myFuncs.js”。放在 Yii Web App 的目录中。

然后，在您看来，只需调用 js 文件即可。

```
Yii::app()->clientScript->registerScriptFile(Yii::app()->baseUrl.'/path/to/your/scripts/myFunc.js'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T04:59:17.933

试试*Yii::app()->clientScript->registerScript*而不是*Yii::app()->getClientScript()->registerScript*

# c - 将数据输出到文本文件的问题

> ID：14201044
> 
> 赞同：0
> 
> 时间：2013-01-07T17:32:39.893
> 
> 标签：c, output, text-files

我目前正在尝试构建一个计算值并将这些值输出到文本文件中的程序。在编译时，我收到以下错误：

'ISO C90 禁止混合减速和代码'

我的编译器是 Quincy 2005，它将第 11 行 (int f=10;) 标记为问题：

```
#include <stdio.h>

int main()

{

FILE *output;
output = fopen("inductor.txt","a+");

int f=10;
float l, ir, realir;

printf("What is your inductor value (mH)\n");
scanf("%f", &l);

  while (f< 10000000){
  ir=((2*3.141)*f*l);
  realir = ir/1000;

  printf("If Frequency = %d Hz" ,f);
  printf(" Inductive reactance= %f Ohms\n",realir);

  fprintf(output, "%d Hz : %f Ohms\n ", f, realir);

 f=f*10;

 }

fclose(output);

return 0;
} 
```

令人讨厌的是，更改编译器不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:35:21.793

I believe it's saying you need to declare all variables first, then code.

E.g.:

```
FILE *output;
int f=10;
float l, ir, realir;

output = fopen("inductor.txt","a+");
printf("What is your inductor value (mH)\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:34:51.567

向下移动`output = fopen("inductor.txt","a+");`到其他变量声明的下方。您必须首先声明所有变量，然后使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:43:36.667

根据之前的答案，有两种方法可以否定这一点，因为 ISO C90 不允许混合变量声明和代码。已经提到了一种方法：按照建议移动变量声明。

```
FILE *output;
int f=10;
float l, ir, realir;
output = fopen("inductor.txt","a+");
// More code 
```

还有另一种方式。根据 ISO C90，您只能在块 open 之后在代码中声明变量`{`。由于您可以随时自由地引入代码块，如果您不想过多地更改代码，您可以简单地启动一个块并将代码放在那里。请注意，以这种方式声明的变量仅在包含它们的块内有效。我强烈推荐第一个选项。

```
FILE *output;
output = fopen("inductor.txt","a+");
{
int f=10;
float l, ir, realir;
// More code on this variables.
}
// Variables declared in the block previously will not be valid here. 
```

# mysql - 哪种类型的表存储将提供高性能？

> ID：14201045
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:32:41.553
> 
> 标签：mysql, performance

一个有 3 列，1000000 条记录的表。另一个表有 20 列，5000000 条记录。从上面哪个表在查询数据时提供快速输出。如果两个表都具有自动增量值作为主键？

为了更清楚地表示，可以说，table1 有 3 列，有 100 万条记录，1 个字段被索引。而且 table2 有 30 列有 100 万条记录，有 5 个字段被索引。如果我运行查询以从 table1 中选择数据，然后运行下一个查询以从 table2 中获取数据（列在两个表上都有索引），哪个表比其他表更快地提供输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:43:51.197

根据你提到的尺寸，桌子太小了，没关系。

一般来说，尽管看起来差距似乎一直在缩小，但它`MyISAM`会比几乎任何一张桌子都要快一点。`InnoDB`

请记住，尽管对于较小的性能损失，InnoDB 在 ACID 合规性方面为您提供了很多。

# r - 使用 RPostgreSQL 从 R 平台在 PostgreSQL 中创建表

> ID：14201046
> 
> 赞同：3
> 
> 时间：2013-01-07T17:32:46.063
> 
> 标签：r, postgresql

我正在使用 RPostgreSQL 包将数据库连接到 R。我想用数据库中不存在的那些表来更新数据库。是否可以在 postgresql 中从 R 创建新表并使用即将到来的值更新它？有什么建议吗？

```
Sample of data:

       Date&Time               temp
1 2007-09-30 00:00:00 -0.1153333
2 2007-09-30 01:00:00 -0.4006667
3 2007-09-30 02:00:00 -0.4493333
4 2007-09-30 03:00:00 -0.7540000
5 2007-09-30 04:00:00 -0.5783333
6 2007-09-30 05:00:00 -0.3280000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:13:11.183

我们在包中添加了一些自动转换类型的测试，请参见源代码压缩包。特别是，将 SQL Datetime 转换为 POSIXct 是我启动该包（作为 GSoC 项目）的主要动机。

但我们可能根本不会像你在这里写的那样回信。因此，如果它抱怨缺少 POSIXct 转换器，请尝试将 POSIXct 列转换为数字，然后在 rpostgresql 邮件列表中提供可重现的示例（请参阅 code.google.com 存储库和 wiki）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T10:10:22.727

要创建表，您需要该`dbSendUpdate()`函数。

```
require(rjdbc)
...
dbSendUpdate(conn, "CREATE abc (...)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-30T00:49:46.670

这是一个对我有用的替代解决方案。我使用了 RPostgreSQL 和 sqldf 包。

```
library(RPostgreSQL)
library(sqldf) 

pw <- "password"   

options(sqldf.RPostgreSQL.user = "postgres",
     sqldf.RPostgreSQL.password = pw,
     sqldf.RPostgreSQL.dbname = "some database",
     sqldf.RPostgreSQL.host = "localhost",
     sqldf.RPostgreSQL.port = 5432)

rm(pw) # removes the password

sqldf("CREATE TABLE table_name(
   user_id serial PRIMARY KEY,
   username VARCHAR(50) UNIQUE NOT NULL,
   password VARCHAR(50) NOT NULL,
   email VARCHAR(355) UNIQUE NOT NULL,
   created_on TIMESTAMP NOT NULL,
   last_login TIMESTAMP)") 
```

# logging - 有没有办法列出在 Smalltalk 会话中完成的所有 DoIt？

> ID：14201050
> 
> 赞同：2
> 
> 时间：2013-01-07T17:32:58.853
> 
> 标签：logging, smalltalk, pharo, squeak

有没有办法列出在 Pharo 或 Squeak 的会话中完成的所有 DoIt 以及它们在哪些工作区中完成？

工作空间的内容是否也被跟踪，所以它们可以被区分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:52:56.583

在与您的图像相同的目录中有一个文件，与您的图像同名，但扩展名为“.changes”。该文件包含所有源代码和您执行的所有 doit。除非您执行它，否则不会跟踪工作区文本，在这种情况下它会出现在 .changes 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T21:13:00.043

在最近的 Squeak（至少 4.3）中，您可以选择顶部的 Extras 菜单，然后转到“Recover Changes”。这会询问您想要看多远；对于“我已完成此会话的内容”，这可能是最重要的选择。

这将为您显示直到您上次保存图像时的`ChangeList`所有s（和其他一些内容）。`doIt`（`ChangeList`从 David Buck 提到的 .changes 文件中获取所有信息。）

但是，这不会告诉您在哪些`Workspace`地方进行了评估。`Workspace`s 不对其内容进行版本控制。

# javascript - 将图像保存到数据库

> ID：14201059
> 
> 赞同：0
> 
> 时间：2013-01-07T17:33:32.390
> 
> 标签：javascript, image, sqlite, cordova

我正在尝试设置数据库来存储用户图像和名称。我已将代码放在 jsfiddle [http://jsfiddle.net/Inkers/dZJnG/](http://jsfiddle.net/Inkers/dZJnG/)上。当我在我的设备上运行代码时，我得到了一些错误。代码也在这里：

**HTML**

```
<body onload="onDeviceReady()">
<h3>Enter name and picture</h3>
<div id= "userProfile">
  <button onclick="takePhoto();">Capture Photo</button> <br>    
  <img style="display:none;width:100px;height:100px;" id="smallImage" src="" />
  <p></p>
  <input id="userName" type="text" placeholder="name"> 
  <input id="saveProfile" type="button" value="Save" onClick="insertEntry();""location.href='Createtask.html'"> <br>
  <input id="allUsers" type="button" value="All users" onClick="queryDB();"> <br>
</div> 
```

**JS**

```
 function init(){
  document.addEventListener("deviceready", onDeviceReady, false);
  }

var pictureSource;   // picture source
var destinationType;

function onDeviceReady() {
    var db = window.openDatabase("database", "1.0", "Profiles", 5000);
    if(db) {
      console.log('The database is working');
      alert('The database is working');
      db.transaction(createTable, insertEntry, errorCB, successCB); // only do stuff if db exists
  pictureSource=navigator.camera.PictureSourceType;
      destinationType=navigator.camera.DestinationType;
}
  else{
      console.log('There is a problem');
}
}

function takePhoto(){
  // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50 });
} 

  function onPhotoDataSuccess(imageData) {
  console.log(imageData);
  // Get image handle
  var smallImage = document.getElementById('smallImage');
  // Unhide image elements
  smallImage.style.display = 'block';
  // Show the captured photo
  // The inline CSS rules are used to resize the image
  smallImage.src = "data:image/jpeg;base64," + imageData;
}

function onFail(message) {
alert('Failed because: ' + message);
}

function createTable(tx) {
    var sqlStr =('CREATE TABLE IF NONE EXISTS USERS(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, image BLOB)');
    tx.executeSql(sqlStr,[],successCB, errorCB);
    console.log("Users table created");
}

function insertEntry(tx){
    var tmpName = document.getElementById("userName").value;
    var tmpImage = document.getElementById("smallImage").src;
    var sqlStr=('INSERT INTO USERS (name, image) VALUES (?,?)');
    tx.executeSql = (sqlStr, [tmpName, tmpImage], onSqlSuccess, errorCB);
    alert('record entered');
}
// Query the success callback
function onSqlSuccess(tx, res){
    var len = results.rows.length;
    console.log("USERS table: " + len + " rows found.");
    for (var i=0; i<len; i++){
        console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data);
    }
} 

// Query the database
//
function queryDB() {
    var sqlStr = ('SELECT * FROM USERS; ORDER BY id ASC');
    database.transaction(function (tx){
    tx.executeSql(sqlStr,[],onSqlSuccess, errorCB);
    })
}

// Transaction error callback
//
function errorCB(err) {
    console.log("Error processing SQL: "+err.code);
}

// Transaction success callback
//
function successCB() {
    console.log('');
} 
```

# css - 将 !important 添加到没有 javascript 的小部件的所有样式

> ID：14201060
> 
> 赞同：7
> 
> 时间：2013-01-07T17:33:34.297
> 
> 标签：css, less

我正在构建一个将显示在客户网站上的小部件。我们不能使用 iFrame，所以我不得不使用详尽的 CSS 重置 (https://github.com/premasagar/cleanslate) 以避免干扰他们的样式。要使用该解决方案，我需要将 !important 添加到我的所有样式中，并且因为它们有很多并且我希望使此代码易于维护，所以我正在寻找一个更动态的解决方案。

我可以通过 javascript 将 !important 添加到样式表中，但这对于生产环境来说并不理想。我正在使用 CodeKit 和 LESS，想知道其中任何一个是否能够帮助我在生成 CSS 文件时轻松地将 !important 添加到所有样式中。

混音？CodeKit 配置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T19:09:25.840

## 更新：是的，LESS 可以提供帮助

我讨厌`!important`在最极端的情况下使用。大多数人在应该使用手术刀来完成这项工作时，会像使用电锯一样使用它。尽管如此，我了解像您这样的小部件开发人员所面临的问题，并且您选择使用[https://github.com/premasagar/cleanslate](https://github.com/premasagar/cleanslate)让您别无选择。

[Marc 的回答](https://stackoverflow.com/questions/14201060/add-important-to-all-styles-for-widget-without-javascript/22354353#22354353)指出了 LESS 的一个很好的特性，但他未能证明这对这件事有什么帮助。

如果你***将整个 LESS 代码包装***在一个命名空间的 mixin 中，那么这个特性正是需要的。所以假设你的小部件代码看起来像这样（你提到你已经为你的小部件使用了某种类型的类）：

```
.yourWidgetClass div > p {
  prop: something;
  &:hover {
    prop: some-hover-style;
  }
}

.yourWidgetClass .someClass {
  prop: something;
} 
```

然后你可以这样做（包装你所有的小部件代码，然后使用Marc 的回答中提到`#makeImportant()`的功能调用该 mixin ）：`!important`

```
#makeImportant() {
    .yourWidgetClass div > p {
      prop: something;
      &:hover {
        prop: some-hover-style;
      }
    }

    .yourWidgetClass .someClass {
      prop: something;
    }
}

& {
    #makeImportant() !important;
} 
```

这会产生以下 CSS 输出：

```
.yourWidgetClass div > p {
  prop: something !important;
}
.yourWidgetClass div > p:hover {
  prop: some-hover-style !important;
}
.yourWidgetClass .someClass {
  prop: something !important;
} 
```

对于我的原始（已接受）答案，手动密集程度更高，请参阅编辑历史记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-12T14:17:06.757

我发现 LESS 可以像在 mix-in 调用之后`!important`指定时一样一次性标记 mixin 设置的所有属性。`!important`

```
 .someMixin() {
    background-color: #fff;
    cursor: pointer;
  }

  .someUsages {
    .someMixin() !important;
  } 
```

结果是：

```
 .someUsages {
    background-color: #fff !important;
    cursor: pointer !important;
  } 
```

有关此主题的更多信息，请参阅有关“ [!important 关键字](http://lesscss.org/features/#mixins-feature-the-codeimportantcode-keyword)”的 LESS 文档。

# javascript - 如何删除 Ember 对象的内容或将其设置为 null？

> ID：14201063
> 
> 赞同：2
> 
> 时间：2013-01-07T17:33:42.907
> 
> 标签：javascript, jquery, ember.js

我在我的项目中使用 Ember.js，有时我必须删除所有内容或将每个属性`""`设置`null`为`Ember.Object`.

所以发生的事情是，在模板中，有把手标签链接到一些对象属性（`{{myProperty}}`），所以当对象被清空或每个属性设置为`""`or`null`时，如果属性更新为新的，这个绑定应该仍然存在价值观。

有没有办法做到这一点？有没有办法快速遍历所有属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T08:29:05.900

（开始写这个想法，这`eachAttribute`是一种方法`Ember.Object`，但它却是`DS.Model`。所以......）

如果您的对象恰好是 Ember Data`DS.Model`实例，则有一个`eachAttribute`方法，它采用回调函数。因此，执行您建议的一种方法可能是：

```
modelobj.eachAttribute(function(propName){
    modelobj.set(propName, null);
}); 
```

唯一想到的另一个想法是实例化对象的新“空白”实例，并将其分配到旧的位置......我*认为*如果你这样做，在大多数情况下车把绑定会正确更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:47:35.430

您的应用程序是否可以在模板中使用`{{#if}}`语句来有条件地显示/隐藏您的属性？

**像这样：**

```
{{#if view.showStuff }}
    <p>{{view.myProperty1}}</p>
    <p>{{view.myProperty2}}</p>
    <p>{{view.myProperty3}}</p>
{{else}}
    <p>Not showing content</p>
{{/if}} 
```

如果`showStuff`为 true，则将呈现您的属性，否则将显示其他 html。

示例[http://jsfiddle.net/cteegarden/rHafx/1/](http://jsfiddle.net/cteegarden/rHafx/1/)

# php - 使用 mkdir 创建的文件夹的权限

> ID：14201066
> 
> 赞同：0
> 
> 时间：2013-01-07T17:33:48.397
> 
> 标签：php, windows, mkdir, rmdir

我在 PHP 中创建了一个文件夹：

```
mkdir('../gallery/images/G'.$result_gallery,0777,true); 
```

此文件夹内是用户上传的照片。当我想删除此文件夹或文件时，会出现此警告：

警告：rmdir(../gallery/images/G35): Permission denied in ...

我的平台是 windows 并且基于解释 php 手动模式在 Windows 上被忽略。我应该怎么做才能解决这个问题？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:39:26.710

您不能删除非空目录或直接使用 rmdir() 使用子文件夹使用@DaHaKa 发布的递归方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:35:00.283

你会想看看[PHP chmod](http://php.net/manual/en/function.chmod.php)

# sql-server-2008 - 用表格替换视图

> ID：14201071
> 
> 赞同：0
> 
> 时间：2013-01-07T17:34:28.760
> 
> 标签：sql-server-2008, tsql

我有许多表，我想根据视图动态创建和填充。

我想执行类似这两个帖子的组合：

[从视图创建表](https://stackoverflow.com/questions/6694430/create-table-from-view)

[有没有办法在不使用游标的情况下循环遍历 TSQL 中的表变量？](https://stackoverflow.com/questions/61967/is-there-a-way-to-loop-through-a-table-variable-in-tsql-without-using-a-cursor)

```
Select *
Into dbo.##tblTemp
From databasename.sys.views

Declare @TableName NVARCHAR(128)

While (Select COUNT(*) From #Temp) > 0

Begin

    Select Top 1 @TableName = name from databasename.sys.views

        Select * into @TableName from databasename.sys.views

    Delete databasename.sys.views Where name = @TableName

End 
```

我最好使用动态创建 sql 语句来创建表的存储过程吗？

编辑：

根据 Sebastian，我正在运行以下代码来完成此操作：

```
DECLARE @cmd NVARCHAR(MAX) = ( SELECT TOP 10 'exec sp_rename '
                                    + '@objname =''' + OBJECT_SCHEMA_NAME(object_id)
                                    + '.'
                                    + OBJECT_NAME(object_id) + ''
                                    + ''', @newname = '
                                    + '''v_' + name + ''
                                    + ''';'
                                    + 'SELECT * INTO '
                                    + OBJECT_SCHEMA_NAME(object_id)
                                    + '.'                                   
                                    + OBJECT_NAME(object_id)
                                    + ' FROM '
                                    + OBJECT_SCHEMA_NAME(object_id)
                                    + '.v_'                                 
                                    + OBJECT_NAME(object_id)
                                    + ';'
                                    + 'DROP VIEW '
                                    + OBJECT_SCHEMA_NAME(object_id)
                                    + '.v_' 
                                    + OBJECT_NAME(object_id)
                                    + ';'
                            FROM db.sys.views
                            FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'); 
```

EXEC (@cmd)
--选择@cmd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:57:46.693

复制所有数据似乎是解决问题的错误方法。如果您的问题是由于视图导致的读取过多而导致性能不佳，则首先要注意两件事。

1) 检查您的表是否有适当的索引。您甚至可以为视图添加索引。有很多资源可以告诉您如何进行索引调优。或者你可以聘请一位顾问（比如我）来帮助你解决这个问题。

2) 如果您的查询加入视图，则经常会出现不必要的表混入其中。例如，如果视图 v1 连接表 a 和 b，视图 v2 连接表 b 和 c，然后您的查询将 v1 和 v2 连接起来，它实际上将 a 和 b 连接到 b 和 c。这样的查询通常可以重写以仅加入一次 b 极大地提高性能。因此，如果您有将视图与视图连接的查询，您应该查看这些查询。

如果你仍然想继续复制数据，你可以使用这个：

```
DECLARE @cmd NVARCHAR(MAX) = ( SELECT 'SELECT * INTO '
                                      + QUOTENAME(OBJECT_SCHEMA_NAME(object_id))
                                      + '.'
                                      + QUOTENAME('tbl_'+OBJECT_NAME(object_id))
                                      + ' FROM '
                                      + QUOTENAME(OBJECT_SCHEMA_NAME(object_id))
                                      + '.' + QUOTENAME(OBJECT_NAME(object_id))
                                      + ';'
                               FROM   sys.views
                               FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)');

EXEC (@cmd); 
```

它创建一个命令，该命令使用 SELECT INTO 为数据库中的每个视图创建一个表。因为即使对于不同类型的对象，SQL Server 也不允许名称冲突，所以我在表的名称前加上“tbl_”。

如果您需要在不同的数据库中创建表，则需要在表名前加上“ `dbname.`”前缀。在这种情况下，您可以删除“tbl_”前缀。

* * *

编辑：

您的版本中缺少一些引号。试试这个：

```
DECLARE @cmd NVARCHAR(MAX) = ( SELECT TOP 1 'exec sp_rename '''
                                + QUOTENAME(OBJECT_SCHEMA_NAME(object_id))
                                + '.'
                                + QUOTENAME(OBJECT_NAME(object_id))
                                + ''', '''
                                + QUOTENAME(OBJECT_SCHEMA_NAME(object_id))
                                + '.'
                                + QUOTENAME('v_' +OBJECT_NAME(object_id))
                                + ''';'
                                + 'SELECT * INTO '
                                + QUOTENAME(OBJECT_SCHEMA_NAME(object_id))
                                + '.'                                   
                                + QUOTENAME(OBJECT_NAME(object_id))
                                + ' FROM '
                                + QUOTENAME(OBJECT_SCHEMA_NAME(object_id))
                                + '.'                                   
                                + QUOTENAME('v_' +OBJECT_NAME(object_id))
                                + ';'
                                + 'DROP VIEW '
                                + QUOTENAME(OBJECT_SCHEMA_NAME(object_id))
                                + '.' 
                                + QUOTENAME('v_' +OBJECT_NAME(object_id))
                                + ';'
                        FROM sys.views
                        FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'); 
```

您也可以使用`PRINT @cmd`代替`EXEC(@cmd)`来查看放在一起的命令是否有意义。

# jquery - 在表格中显示高图 x 和 y 轴值

> ID：14201074
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:34:34.040
> 
> 标签：jquery, highcharts, drilldown

我设计了一个使用[Highcharts](http://www.highcharts.com/)向下钻取的列。现在我的目标是以表格格式显示图形数据，当页面第一次加载时，它将显示表格中的第一组数据，当我深入到第二级时，表格应该刷新数据并显示图表中显示的第 2 级数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:43:55.970

Highchart 允许开发人员访问点击事件。例如看看下面的例子。 [http://www.highcharts.com/demo/line-ajax](http://www.highcharts.com/demo/line-ajax)

点击事件告诉你很多关于你点击了哪个点和系列（xAxix、yAxis、seriesName，你甚至可以为你的点添加自定义选项以通过点击事件检索它们）。您可以检索用户单击了哪一列，并根据该列的数据刷新您的表格。由于您在学习了外部图点之后拥有了内部图数据，因此我猜想获取内部数据会简单得多。

# android - socialauth android ResourceNotFound

> ID：14201076
> 
> 赞同：8
> 
> 时间：2013-01-07T17:34:47.107
> 
> 标签：android, socialauth

我正在我的应用程序中实现 socialAuth android。但是当我点击我的分享按钮时出现错误：

```
 01-07 19:25:27.308: D/SocialAuthAdapter(4167): Selected provider is facebook
 01-07 19:25:27.308: D/SocialAuthAdapter(4167): Loading keys and secrets from configuration
01-07 19:25:27.328: I/SocialAuthConfig(4167): Loading application configuration
01-07 19:25:27.358: I/OAuth2(4167): Determining URL for redirection
01-07 19:25:27.358: I/OAuth2(4167): Redirection to following URL should happen : https://graph.facebook.com/oauth/authorize?client_id=447809015285714&response_type=code&redirect_uri=fbconnect%3A%2F%2Fsuccess&scope=publish_stream,email,user_birthday,user_location
01-07 19:25:27.358: D/SocialAuthAdapter(4167): Loading URL : https://graph.facebook.com/oauth/authorize?client_id=447809015285714&response_type=code&redirect_uri=fbconnect%3A%2F%2Fsuccess&scope=publish_stream,email,user_birthday,user_location&type=user_agent&display=touch
01-07 19:25:27.358: D/SocialAuthAdapter(4167): Callback URI : fbconnect://success
01-07 19:25:27.368: W/ResourceType(4167): No package identifier when getting value for resource number 0x00000000
01-07 19:25:27.368: D/AndroidRuntime(4167): Shutting down VM
01-07 19:25:27.378: W/dalvikvm(4167): threadid=1: thread exiting with uncaught exception (group=0x40a9c210)
01-07 19:25:27.378: E/AndroidRuntime(4167): FATAL EXCEPTION: main
01-07 19:25:27.378: E/AndroidRuntime(4167): android.content.res.Resources$NotFoundException: Resource ID #0x0
01-07 19:25:27.378: E/AndroidRuntime(4167):     at android.content.res.Resources.getValue(Resources.java:1023) 
```

更多日志。

```
01-07 19:25:27.378: E/AndroidRuntime(4167):     at android.content.res.Resources.getDrawable(Resources.java:668)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at org.brickred.socialauth.android.SocialAuthDialog.setUpTitle(SocialAuthDialog.java:149)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at org.brickred.socialauth.android.SocialAuthDialog.onCreate(SocialAuthDialog.java:123)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at android.app.Dialog.dispatchOnCreate(Dialog.java:353)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at android.app.Dialog.show(Dialog.java:257)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at org.brickred.socialauth.android.SocialAuthAdapter$3$1.run(SocialAuthAdapter.java:372)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at android.os.Handler.handleCallback(Handler.java:605)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at android.os.Looper.loop(Looper.java:137)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at java.lang.reflect.Method.invokeNative(Native Method)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at java.lang.reflect.Method.invoke(Method.java:511)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
01-07 19:25:27.378: E/AndroidRuntime(4167):     at dalvik.system.NativeStart.main(Native Method) 
```

我不知道为什么会这样。在示例之后，我非常仔细地遵循。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-03T06:05:38.290

Please put Icon for facebook,Google, twitter with name facebook.png,foursquare.png,google.png,linkedin.png,myspace.png,twitter.png,yahoo.png int res folder.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T07:40:40.043

只需放入您的图像（**facebook.png、linkedin.png、twitter.png 或更多您与您的应用程序集成的人**）可绘制文件夹。

出现此问题是因为在您的 lib 文件上需要图标，如果它不在您的包中，则显示错误。

```
No package identifier when getting value for resource number 0x00000000
android.content.res.Resources$NotFoundException: Resource ID #0x0

at android.content.res.Resources.getDrawable(Resources.java:668)
at org.brickred.socialauth.android.SocialAuthDialog.setUpTitle(SocialAuthDialog.java:149) 
```

上面我只是向你展示了当你的drawable上没有文件时发生的主要错误。

# c# - 设置为下拉列表时如何读取组合框文本？

> ID：14201078
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:34:48.250
> 
> 标签：c#, winforms

这是在我切换`dropdownstyle`到`dropdownlist`. 有谁知道我如何重写`comboBox1.Text != "None"`以使用该`SelectedItem`格式？

```
public void Form1_Load(object sender, EventArgs e)
    {
        comboBox1.SelectedItem = "None";
    }

if (comboBox1.Text != "None")
        {
            checkBox1.Checked = true;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:41:51.230

首先，你需要在你的组合框中有一些东西：

```
 comboBox1.Items.Add("None");
        comboBox1.SelectedItem = "None"; 
```

一旦你这样做了，你的 if 语句就会正常工作。

请注意，您还可以通过 DataSource 将项目添加到组合框：

```
 var cList = new List<String>();
        cList.Add("One");
        cList.Add("None");

        comboBox1.DataSource = cList;
        comboBox1.SelectedItem = "None";

        if (comboBox1.Text != "None") 
```

在这种情况下，特别是如果您绑定的是类对象而不是字符串，您将需要使用组合框的 SelectedValue 属性而不是 SelectedItem，因为 SelectedItem 将包含实际的类对象。

# xcode - 视图加载时如何显示某个tableView行

> ID：14201080
> 
> 赞同：0
> 
> 时间：2013-01-07T17:34:51.863
> 
> 标签：xcode, uitableview

我不想从第 0 行开始显示 tableview，而是从显示第 24 行开始，这与初始视图相去甚远。我尝试了下面的代码，但它似乎不起作用。

`[self.tableView setCurrentIndex:[NSIndexPath indexPathForRow:24 inSection:0]];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:38:03.240

使用`scrollToRowAtIndexPath:atScrollPosition:animated:` 而不是`setCurrentIndex:`.

`setCurrentIndex`不是 UITableView 方法，因此在您的代码中使用它会阻止项目的构建。

# plsql - PLSQL 循环遍历层次结构

> ID：14201082
> 
> 赞同：0
> 
> 时间：2013-01-07T17:34:59.383
> 
> 标签：plsql

我试图弄清楚如何通过层次结构循环，我不知道如何放入 PLSQL。我想要实现的目标：我想知道在层次结构中比我高 10 级的是哪个部门：

假设我有一张桌子，上面有一个部门和一个父部门。我想执行这种操作：

```
select my_department from table_departments as v_department
FOR counter in 1...9
LOOP
v_department:=
(SELECT parent_department
FROM table_department_hierarchy
WHERE child_department=v_department)
END LOOP as top_department; 
```

我无法弄清楚正确的语法，有没有勇敢的灵魂可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:49:13.083

Your method with corrected PL/SQL syntax would be something like:

```
begin
  select my_department into v_department from table_departments;
  FOR counter in 1...9
  LOOP
    SELECT parent_department
    INTO v_department
    FROM table_department_hierarchy
    WHERE child_department=v_department;
  END LOOP:
END; 
```

However you could perhaps get it all in one statement something like this:

```
SELECT parent_department
INTO v_department
FROM
( SELECT parent_department, level as lvl
  FROM table_department_hierarchy
  CONNECT BY child_department = PRIOR parent_department
  START WITH child_department = v_department
)
WHERE lvl = 9; 
```

See [Oracle docs on hierarchical queries](http://docs.oracle.com/cd/B28359_01/server.111/b28286/queries003.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:45:40.400

这是我很久以前编写的一个大型 pl/sql 程序，旨在遍历员工/老板报告树一直到顶部（CEO）。这个版本是 Peoplesoft 特有的，但只要您阅读的内容在记录中具有父/子关系，它就可以处理任何事情......我还有其他更动态的版本，但这可能是最容易破译的。我删除了一些你不会关心的绒毛东西。此外，由于报告工具可以使用它，因此该特定解决方案会出于许多不同原因将其交付给表格...

此外，它动态确定级别，因此您不必像使用连接解决方​​案那样知道有多少级别。

希望能帮助到你：

```
CREATE OR REPLACE PROCEDURE DW."SPW_T_RESOURCE_HIERARCHY" (iCommit   In Integer Default 1000,
                                                     pdBegin   In Date Default trunc(Sysdate) - 3,
                                                     pdEnd     In Date Default trunc(Sysdate) + 1,
                                                     vTruncate In Varchar2 Default 'Y' ) Is

   ------------------------------------------------------
   --  DECLARATIONS
   ------------------------------------------------------

   Cursor curDataSource Is

   ---**********************************----
   ---****BEGIN CUSTOMIZE THIS BLOCK****----
   ---**********************************----
      Select
                Eh.empl_id         F_DESCENDANT_ID
               ,Eh.Super_Empl_Id   F_IMMEDIATE_ANCESTOR_ID
        From
               Employee_Header EH
       Where
               EH.SUPER_EMPL_ID IS NOT NULL OR EH.TERM_DATE IS NULL;

   ---**********************************----
   ---****END CUSTOMIZE THIS BLOCK******----
   ---**********************************----

   dNow              Date := Sysdate;
   iTotalRows        Integer := 0;
   iTotalErrors      Integer := 0;

   ---**********************************----
   ---****BEGIN CUSTOMIZE THIS BLOCK****----
   ---**********************************----
   vDescendentID     Varchar2(20);
   iDescendentLevel  Integer := 1;
   iAncestorLevel    Integer := 0;
   vAncestorID       Varchar2(20);
   vTmpAncestorID    Varchar2(20);
   vTmpEmployeeID    Varchar2(20);

   ---**********************************----
   ---****END CUSTOMIZE THIS BLOCK******----
   ---**********************************----

   ------------------------------------------------------
   -- END DECLARATIONS
   ------------------------------------------------------

   ------------------------------------------------------
   -- BEGIN MAIN
   ------------------------------------------------------
Begin
   -- Loop over source records
   For recDataSource In curDataSource
   Loop
      iDescendentLevel := 1;
      vAncestorID := recDataSource.f_Immediate_Ancestor_Id;

      -- Start Transaction
      Begin
         while (Trim(vAncestorID) is not null)
         loop
             Begin
                          -- Fetch Next Ancestor
                 Select EH.SUPER_EMPL_ID
                   Into vTmpAncestorID
                   From
                        EMPLOYEE_HEADER EH
                  Where
                        EH.EMPL_ID = vAncestorID;
             Exception
             When Others Then
                vTmpAncestorID := null;
             End;

              If NVL(vTmpAncestorID,'-XYZ-') = NVL(vAncestorID,'-123-') Then
                 vTmpAncestorID := null;
              End If;

              vAncestorID := vTmpAncestorID;
              iDescendentLevel := iDescendentLevel + 1;
         end loop;

         -- Insert Resource Base
         Insert Into T_RESOURCE_HIERARCHY
            (
                T_RESOURCE_HIERARCHY.F_HIERARCHY_NAME,
                T_RESOURCE_HIERARCHY.F_DESCENDANT_LEVEL,
                T_RESOURCE_HIERARCHY.F_DESCENDANT_ID,
                T_RESOURCE_HIERARCHY.F_ANCESTOR_LEVEL,
                T_RESOURCE_HIERARCHY.F_ANCESTOR_ID
            )
         Values
            (
                'Physical Org Chart',
                iDescendentLevel,
                recDataSource.f_Descendant_Id,
                To_Number(Decode(iDescendentLevel,1,2,iDescendentLevel) - 1),
                NVL(recDataSource.f_Immediate_Ancestor_Id,'ROOT')
            );

      -- Insert MySelf Into Resource Base as well for full hierarchy research
         Insert Into T_RESOURCE_HIERARCHY
            (
                T_RESOURCE_HIERARCHY.F_HIERARCHY_NAME,
                T_RESOURCE_HIERARCHY.F_DESCENDANT_LEVEL,
                T_RESOURCE_HIERARCHY.F_DESCENDANT_ID,
                T_RESOURCE_HIERARCHY.F_ANCESTOR_LEVEL,
                T_RESOURCE_HIERARCHY.F_ANCESTOR_ID
            )
         Values
            (
                'Physical Org Chart',
                iDescendentLevel,
                recDataSource.f_Descendant_Id,
                iDescendentLevel,
                NVL(recDataSource.f_Descendant_Id,'ROOT')
            );

      -- Now Its Time To Climb The Tree
      -- For This Employee
         vAncestorID := recDataSource.f_Immediate_Ancestor_Id;
         iAncestorLevel := iDescendentLevel-1;
         vTmpAncestorID := null;

         -- Loop over parents
         while (Trim(vAncestorID) is not null)
         loop

             Begin
                 -- Fetch Next Ancestor
                 Select EH.SUPER_EMPL_ID
                   Into vTmpAncestorID
                   From
                        EMPLOYEE_HEADER EH
                  Where
                        EH.EMPL_ID = vAncestorID;
             Exception
             When Others Then
                vTmpAncestorID := null;
             End;

             If NVL(vTmpAncestorID,'-XYZ-') = '-XYZ-' Then
                 vTmpAncestorID := null;
             End If;

              vAncestorID := vTmpAncestorID;
              iAncestorLevel := iAncestorLevel - 1;

             If vAncestorID is not null Then
                 -- Insert Resource Base
                 Insert Into T_RESOURCE_HIERARCHY
                    (
                        T_RESOURCE_HIERARCHY.F_HIERARCHY_NAME,
                        T_RESOURCE_HIERARCHY.F_DESCENDANT_LEVEL,
                        T_RESOURCE_HIERARCHY.F_DESCENDANT_ID,
                        T_RESOURCE_HIERARCHY.F_ANCESTOR_LEVEL,
                        T_RESOURCE_HIERARCHY.F_ANCESTOR_ID
                    )
                 Values
                    (
                       'Physical Org Chart',
                        iDescendentLevel,
                        recDataSource.f_Descendant_Id,
                        iAncestorLevel,
                        vAncestorID

                    );
             End If;
         end loop;

         -- TRANSACTION EXCEPTION HANDLING
      Exception
         When Others Then

      End;

      -- ASSIGN HOW MANY RECORDS PROCESSED
      iTotalRows := curDataSource%Rowcount;

      -- CONDITIONAL/INCREMENTAL TRANSACTION COMMIT
      If Mod(iTotalRows, iCommit) = 0
      Then
         Commit;
      End If;

   End Loop;

   -- FINAL COMMIT AND MD UPDATE
   Commit;

   -- MAIN EXCEPTION HANDLING
Exception
   When Others Then
      Begin
         iExceptionCode    := Sqlcode;
         vExceptionMessage := Sqlerrm;
         Raise_application_error(Sqlcode, Sqlerrm);
      End;

   ------------------------------------------------------
   -- END MAIN
   ------------------------------------------------------
End SPW_T_RESOURCE_HIERARCHY;
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T12:20:59.937

请检查以下示例。未经测试，但相信:)

```
DECLARE
G_EMPLOYEE_ID NUMBER:=1880;
FUNCTION GET_MANAGER(V_EMPLOYEE_ID NUMBER) RETURN NUMBER IS 
V_MANAGER_ID NUMBER;
BEGIN
  SELECT ID_MANAGER INTO V_MANAGER_ID FROM EMPLOYEES WHERE EMPLOYEE_ID = V_EMPLOYEE_ID;
  RETURN V_MANAGER_ID;
EXCEPTION
  WHEN OTHERS THEN
  RETURN NULL;
END;
BEGIN
LOOP 
DBMS_OUTPUT.PUT_LINE('EMPLOYEE:' || G_EMPLOYEE_ID);
G_EMPLOYEE_ID := GET_MANAGER(G_EMPLOYEE_ID);
DBMS_OUTPUT.PUT_LINE('MANAGER:' || G_EMPLOYEE_ID);
EXIT WHEN G_EMPLOYEE_ID IS NULL;
END LOOP;
END; 
```

另一个不错的选择（主要）是 CONNECT BY, START WITH

# objective-c - 关于 Objective-C 中的协议

> ID：14201086
> 
> 赞同：2
> 
> 时间：2013-01-07T17:35:22.330
> 
> 标签：objective-c, protocols

我对 OBJ-C 中的协议有一些疑问。我经常看到用协议声明 id 对象的行，例如：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    id  <NSFetchedResultsSectionInfo> secInfo = [[self.fetchedResultsController sections]objectAtIndex:section];
    NSLog(@"%i",[secInfo numberOfObjects]);
    return [secInfo numberOfObjects];
} 
```

我根本不明白以下行：

```
id  <NSFetchedResultsSectionInfo> secInfo = [[self.fetchedResultsController sections]objectAtIndex:section]; 
```

1.  “身份证”是什么意思？
2.  “objectAtIndex:section”返回什么对象？
3.  为什么我可以在对象上调用“[secInfo numberOfObjects]”？我的意思是，方法 numberOfObjects 是如何存在的？

我正在尝试精简 CoreData，但如果不理解这一点，我实际上无法继续。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:38:56.693

> 是什么`id <ProtocolName>`意思？

它的意思是“指向类实现`ProtocolName`协议的任何 Objective-C 对象的指针”。

> 返回什么对象`objectAtIndex:section`？

它返回符合`<NSFetchedResultsSectionInfo>`协议的任何类的对象。

> 为什么我可以调用`[secInfo numberOfObjects]`对象？

为什么不？

> 我的意思是，该方法如何`numberOfObjects`存在？

返回对象的类实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:46:33.487

如果您有 Java 背景，可以将其`NSFetchedResultsSectionInfo`视为 Java 接口而不是具体类，函数内容如下所示：

```
NSFetchedResultsSectionInfo secInfo = this.fetchedResultsController.sections().objectAtIndex(section); 
System.out.println(secInfo.numberOfObjects());
return secInfo.numberOfObjects(); 
```

`numberOfObjects`可以调用，`id <NSFetchedResultsSectionInfo> secInfo`因为这是在 Objective-C 中声明此类事物的等效方式——它不是一个特定的类，而是一个“接口”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:49:21.177

1.  `id` is the generic type for a pointer to any Objective-C object. Declaring a variable of type `id` means it can reference any object; declaring a variable of type `id <SomeProtocol>` means it can reference an object of any class, but it must conform to `SomeProtocol`.

2.  `[self.fetchedResultsController sections]` returns an array, in which each element is an object (whose class is unknown to you) implementing the `NSFetchedResultsSectionInfo` protocol and representing a section in your table. The method you're implementing wants to know the number of rows in the section whose index is passed in as the `section` parameter, so you call `objectAtIndex:section` on that array to get the `id <NSFetchedResultsSectionInfo>` object representing that section.

3.  You can call `[secInfo numberOfObjects]` because you've declared `secInfo` to reference an object which implements the `NSFetchedResultsSectionInfo` protocol; `numberOfObjects` is a method in that protocol. (And it actually works because, at runtime, it really is an object implementing that protocol, as expected from the documented behavior of `-[NSFetchedResultsController sections]`.)

> I'm trying to lean CoreData but I can't actually continue without understanding this.

Protocols aren't just a Core Data thing; if you're having trouble with them I recommend reading up on the [Objective-C language documentation](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40011210).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T17:45:02.367

1.  `id`意思是“任何类型的对象”。`id <NSFetchedResultsSectionInfo>`意思是“任何类型的对象，只要它实现了`NSFetchedResultsSectionInfo`协议。协议只是方法签名的列表，如果一个对象实现了协议，这意味着它**必须**实现该协议的所有必需方法。

2.  你真的不在乎。它可以是实现`NSFetchedResultsSectionInfo`协议的任何对象，但您并不真正关心它是什么类型的对象。您只需要知道您可以从`NSFetchedResultsSectionInfo`协议中向它发送任何所需的消息。

3.  `secInfo`是实现`NSFetchedResultsSectionInfo`协议的对象。如果您查看协议（cmd + 单击该协议将带您进入其定义），您会看到列表中有一条名为`numberOfObjects`. 这意味着可以保证任何实现此协议的对象都将实现`numberOfObjects`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T17:50:50.353

> What does " id " mean?

`id<NSFetchedResultsSectionInfo>` is used to guarantee that the object conforms to the NSFetchedResultsSectionInfo, so that if it's not, you get a compiler warning. It is useful for this.

> What object does "objectAtIndex:section" return?

`id` is the root of all pointer to objects.

Usually `id` is used when there isn't the certainty that the returned object will be of a type. The only thing known is that it conforms to the NSFetchedResultsSectionInfo protocol. So that's the case: you don't know which type of object will be returned, just that it conforms to that protocol.

> Why can I call "[secInfo numberOfObjects]" on the object? I mean, How's the method numberOfObjects exists?

Just see the documentation, it's implemented by the class.

# html - 无法让 iPhone 网站版本缩放/缩放

> ID：14201088
> 
> 赞同：0
> 
> 时间：2013-01-07T17:35:36.960
> 
> 标签：html, css, viewport, meta, handheld

我的网站和手持设备有问题。出于某种奇怪的原因，在尝试了大多数技术之后，我似乎无法缩小页面或缩放以适合设备。

我指向我的特定样式表的链接正在运行，但是元数据似乎不正常！这是一个 Wordpress 网站，目前这是我拥有的所有元数据：

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />

<?php if (is_search()) { ?>
     <meta name="robots" content="noindex, nofollow" /> 
<?php } ?> 
```

在手机上看网站时，它被放大了，你必须用手指平移。您无法放大或缩小。

任何人都知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:38:25.913

您已关闭用户缩放。删除`user-scalable=0`，您应该解决该特定问题。

你也应该去掉这个`maximum-scale`设置，除非你有理由不喜欢默认值，即 5。

> “用户可缩放：确定用户是否可以放大和缩小 - 用户是否可以更改视口的比例。设置为 yes 允许缩放，no 禁止缩放。
> 
> 默认值为是。
> 
> 将 user-scalable 设置为 no 还可以防止网页在输入字段中输入文本时滚动。
> 
> 在 iOS 1.0 及更高版本中可用。”

[http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html)

（注意：1 和 0 有时用来代替真/假和是/否。这里，您的 0 与否相同。）

# wcf - System.ServiceModel：对 SSPI 的调用失败，目标主体名称不正确

> ID：14201098
> 
> 赞同：2
> 
> 时间：2013-01-07T17:36:32.063
> 
> 标签：wcf, x509certificate, userprincipal, upn

我正在尝试访问 WCF 服务端点。但是，每当我尝试访问该服务时，我都会在服务器上不断收到上述异常（当我检查日志时）。
该服务基本上具有相互证书行为。它列出了一个客户端证书和一个服务证书。此外，它在其 web.conf 的 endpoint\identity 部分下指定了一个 userPrincipleName... 类似设置的配置文件示例如下所示...

```
 <endpoint address="<nicelyAddressEndpoint>"
            binding="netTcpBinding" bindingConfiguration="customTcpBinding"
            contract="<service>" name="<smartSoundingCamelCasedServiceName>">
            <identity>
                <userPrincipalName value="<example>@yourMother.net" />
            </identity>
        </endpoint> 
```

将是我描述的端点。

```
 <service name="<NiceServiceName>" behaviorConfiguration="MutualCertificateBehavior">
    <endpoint address="" binding="customBinding" bindingConfiguration="CustomMCBinding" contract="IServiceContractThatIsntWrittenPoorley"/>
  </service>

    <behavior name="MutualCertificateBehavior">
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <serviceMetadata httpGetEnabled="true" />
      <serviceCredentials>
        <clientCertificate>
          <authentication certificateValidationMode="PeerOrChainTrust" revocationMode="NoCheck" includeWindowsGroups="false"/>
          <certificate findValue="<CertName>" storeLocation="LocalMachine" storeName="Root" x509FindType="FindBySubjectName" />
        </clientCertificate>
        <serviceCertificate findValue="<ServiceCert>" storeLocation="LocalMachine" storeName="Root" x509FindType="FindBySubjectName" />
      </serviceCredentials>
    </behavior> 
```

这就是服务和行为。

我正在尽我所能尝试从这件事中获取数据。我遇到了一个症结，我不确定是不是因为我走错了路，还是因为我已经很接近了，我只需要克服一点小麻烦。在我的客户端 web.config 中，我类似地设置了端点行为......

```
 <behavior name="ClientCertificateBehvior">
        <clientCredentials>              
          <clientCertificate findValue="<XXX>"
                             storeLocation="LocalMachine"
                             storeName="My"
                             x509FindType="FindBySubjectName"/>
          <serviceCertificate>
            <authentication certificateValidationMode="PeerOrChainTrust" revocationMode="NoCheck" />
            <defaultCertificate findValue="<XXX>" storeLocation="LocalMachine" storeName="Root" x509FindType="FindBySubjectName" />
          </serviceCertificate>
        </clientCredentials>
      </behavior> 
```

这是我的终点...

```
 <endpoint address="xxx.xxx.xxx"
            behaviorConfiguration="ClientCertificateBehvior" binding="customBinding"
            bindingConfiguration="CustomBinding_IVPOService" contract="VPOServiceEndPoint.IVPOService"
            name="CustomBinding_IVPOService">
            <identity>
                <dns value="xxx" />
                <userPrincipalName value="yyy@xxx.net" />
            </identity>
        </endpoint> 
```

现在，每当我尝试使用此服务时，我都会收到此异常...

```
The identity check failed for the outgoing message. The expected identity is 'identity(http://schemas.xmlsoap.org/ws/2005/05/identity/right/possessproperty: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn)' for the 'xxxxxx' target endpoint. 
```

我会注意到，我的本地计算机上列出了相应商店中的证书，并且我已向该证书授予了相应的写入权限。我到了这样的地步，我意识到我在这里给自己制造了更多麻烦，我试图找出正确的做法，而不是把东西扔在墙上，看看有什么东西会粘住。我错过了什么步骤？从 MutualCertificate 安全服务接收数据的最佳方式是什么？我怎样才能最好地获得正确的用户原则名称？我认为这将是服务 web.config 中列出的内容？我是否以正确的方式解决这个问题？我是在接近还是只是为自己制造更大的混乱？

# jquery - 连续悬停在多个元素上

> ID：14201099
> 
> 赞同：3
> 
> 时间：2013-01-07T17:36:43.997
> 
> 标签：jquery, css, jquery-hover

我有两个相邻的元素`$("#video")`和`$("#progress")`.

我希望在鼠标进入其中一个元素时`$("#time")`显示第三个元素，并在鼠标离开元素时再次隐藏。我可以让它工作，但有一个小问题。`fadeIn``fadeOut`

每当鼠标进入其中一个元素时，从另一个元素中出来，该`$("#time")`元素首先被隐藏然后再次显示，而我希望它始终显示。

[这个 jsfiddle](http://jsfiddle.net/nZ44R/)更清楚地说明了这个问题。

如何解决这个问题？

请注意，这些元素虽然在网页中彼此靠近，但在代码中实际上是相当分离的，因此不可能将它们全部放在一个大 div 中并将鼠标悬停在该 div 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:39:32.367

您可以用另一个 div 包装这两个元素

```
<div id='wrapper'>
  <div id="video" style="background: green; height: 100px;" class="hover">VIDEO</div>
  <div id="progress" style="background:red" class="hover">bar</div>
</div>
<div id="time" style="display: none">01:35</div> 
```

然后将悬停绑定到包装 div

```
$("#wrapper").hover(function () {
  $("#time").fadeIn(300);
}, function () {
  $("#time").fadeOut(300);
}); 
```

[小提琴](http://jsfiddle.net/wirey00/mEppj/ "示例小提琴")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:27:32.833

我知道我迟到了，但我想说我会检查元素是否被悬停，如果没有，则执行淡出。见[小提琴](http://jsfiddle.net/bplumb/nZ44R/5/)。`stop()`如果用户快速进入并存在，我还将添加该方法以避免触发多个动画`div`。

```
$('.hover').hover(function(){
  $('#time').stop(true,true).fadeIn(300);
},function(){
  setTimeout(function(){
    if($('.hover:hover').length == 0){
        $('#time').stop(true,true).fadeOut(300);
    }
  },0);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T17:39:57.270

尝试在整个块周围放置一个 div 并向其添加悬停类

```
<div class="hover">
    <div id="video" style="background: green; height: 100px;"> VIDEO </div>
    <div id="progress" style="background:red"> bar </div>

    <div id="time" style="display: none"> 01:35 </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T18:01:43.163

您可以对淡出代码使用 setTimeout 方法，并使用变量找出是否应该隐藏它。

```
var ShouldBeShown = false;    
$(".hover").hover(fIN, function(){
  ShouldBeShown = false;
  setTimeout(fOUT, 50);
});
function fIN() {
  ShouldBeShown = true;
  $("#time").fadeIn(300);
}
function fOUT() {
  if(!ShouldBeShown)
    $("#time").fadeOut(300);
} 
```

[http://jsfiddle.net/EyFdn/1/](http://jsfiddle.net/EyFdn/1/)

# java - 进度条不起作用

> ID：14201102
> 
> 赞同：-2
> 
> 时间：2013-01-07T17:36:51.300
> 
> 标签：java, swing, jprogressbar

晚上好，我在运行进度条时遇到问题，请检查我的代码并告诉我问题出在哪里：

```
/**
** @author Islam */

public class Register extends javax.swing.JFrame implements Runnable {

static final int MY_MINIMUM = 0;
static final int MY_MAXIMUM = 100;
private Pattern pattern;
private Matcher matcher;
private static final String EMAIL_PATTERN =
        "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@"
        + "[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";
boolean isValidPassord = true;
Thread th;

public Register() {
    initComponents();
    passwordTextF.addKeyListener(new passwordListener());
    passwordMeter = new JProgressBar();
    passwordMeter.setMinimum(MY_MINIMUM);
    passwordMeter.setMaximum(MY_MAXIMUM);
    th = new Thread(this);
    th.start();
}

public void updateBar(int newValue) {
    passwordMeter.setValue(newValue);
    passwordMeter.setStringPainted(true);
    System.out.println(newValue);
}

public void run() {
    for (int i = MY_MINIMUM; i <= MY_MAXIMUM; i++) {
        updateBar(i);
        try {
            Thread.sleep(100);

        } catch (InterruptedException ex) {
            Logger.getLogger(Register.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}

class passwordListener implements KeyListener {

    public void keyPressed(KeyEvent e) {
        passwordLabel.setForeground(Color.BLACK);

    }

    public void keyReleased(KeyEvent e) {

        //  Register.this.validatePassword(passwordTextF.getText());
        if (!isValidPassord) {
            //  new PasswordMeterHandler().start();
        }

    }

    public void keyTyped(KeyEvent e) {
    }
}

public boolean validateEmail(String mailFromForm) {

    pattern = Pattern.compile(EMAIL_PATTERN);
    matcher = pattern.matcher(mailFromForm);
    return matcher.matches();

}

// <editor-fold defaultstate="collapsed" desc="Generated Code">

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    int i = 0;
    this.validateEmail(nameTextF.getText());
    this.validatePassword(passwordTextF.getText());
    if (!matcher.matches()) {
        EMailLabel.setForeground(Color.red);
    }
    if (!isValidPassord) {
        passwordLabel.setForeground(Color.red);
    }

}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
}

public static void main(String args[]) {

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            Register frame = new Register();
            frame.setVisible(true);

        }
    });
}
// Variables declaration - do not modify
private javax.swing.JLabel EMailLabel;
private javax.swing.JTextField EMailTextF;
private javax.swing.ButtonGroup buttonGroup1;
private javax.swing.ButtonGroup buttonGroup2;
private javax.swing.JComboBox countryCombo;
private javax.swing.JComboBox genderCombo;
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JLabel jLabel6;
private javax.swing.JLabel jLabel7;
private javax.swing.JPanel jPanel1;
private javax.swing.JLabel nameLabel;
private javax.swing.JTextField nameTextF;
private javax.swing.JLabel passwordLabel;
private javax.swing.JProgressBar passwordMeter;
private javax.swing.JPasswordField passwordTextF;
private javax.swing.JLabel strengthLabel;
private javax.swing.JLabel userNameLabel;
private javax.swing.JTextField userNameTextF;
// End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:08:10.517

将 JProgressBar 添加到 JFrame，调用 setVisible，在构造函数之外启动线程（用于线程过早结束）。

```
public class Register extends JFrame {

static final int MY_MINIMUM = 0;
static final int MY_MAXIMUM = 100;
private JProgressBar passwordMeter;

public Register() {
    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());
    setBounds(50, 50, 640, 100);
    passwordMeter = new JProgressBar();
    passwordMeter.setMinimum(MY_MINIMUM);
    passwordMeter.setMaximum(MY_MAXIMUM);
    add(passwordMeter, BorderLayout.CENTER);
}

public void start() {
    new PasswordMeterHandler().start();
}

class PasswordMeterHandler extends Thread {

    public void updateBar(final int newValue) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                passwordMeter.setValue(newValue);
                passwordMeter.setStringPainted(true);
            }
        });
        //passwordMeter.setValue(newValue);
        //passwordMeter.setStringPainted(true);
        System.out.println(newValue);
    }

    @Override
    public void run() {
        for (int i = MY_MINIMUM; i <= MY_MAXIMUM; i++) {
            updateBar(i);
            try {
                Thread.sleep(100);
            } catch (InterruptedException ex) {
                Logger.getLogger(Register.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            Register frame = new Register();
            frame.setVisible(true);
            frame.start();
        }
    });
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:22:31.717

让我们从这样一个事实开始，在您的示例中，进度条从未添加到任何内容，然后继续违反最重要的 Swing 规则之一 - 永远不要在事件调度线程之外创建或修改任何 UI 元素.

`KeyListener`不是跟踪文本组件更改的合适方法，它们不会考虑用户是否将文本粘贴到字段中。

您应该使用 a`DocumentListener`来监视对基础文档的更改，`DocumentFilter`如果要更改进入该字段的内容...

```
public class TestPasswordField {

    public static void main(String[] args) {
        new TestPasswordField();
    }

    public TestPasswordField() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JPasswordField password;
        private JProgressBar progressBar;

        public TestPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.HORIZONTAL;

            password = new JPasswordField(10);
            progressBar = new JProgressBar(0, 10);
            password.getDocument().addDocumentListener(new DocumentListener() {

                protected void updateProgress() {
                    progressBar.setValue(password.getPassword().length);
                }

                @Override
                public void insertUpdate(DocumentEvent e) {
                    updateProgress();
                }

                @Override
                public void removeUpdate(DocumentEvent e) {
                    updateProgress();
                }

                @Override
                public void changedUpdate(DocumentEvent e) {
                    updateProgress();
                }
            });

            add(password, gbc);
            gbc.gridy++;
            add(progressBar, gbc);
        }

    }

} 
```

# java - 私有查询方式是否会增加 SQL 注入攻击风险？

> ID：14201103
> 
> 赞同：0
> 
> 时间：2013-01-07T17:36:55.843
> 
> 标签：java, sql, security, sql-injection

我曾经有人指出，使用私有方法来处理由单个类完成的所有查询的查询执行会增加 SQL 注入攻击的风险。

此方法的示例可能如下所示（如下）。我省略了一些细节，以免分散任何人的注意力。

如果您想谈论实施，请随时在评论中。安全审查没有评论方法的内容，但主要是它不应该是自己的方法。

请注意，queryText 是从一个受保护的静态最终字符串生成的，该字符串包含准备好的语句的 SQL 文本。准备好的语句文本中的 ? 是使用 PreparedStatement 的 setString（或设置其他）方法设置的。在准备好的语句上设置的变量以尽可能强的类型进入调用者方法。

然后将 queryText 传递给私有方法。

```
 private ResultSet executeQuery(PreparedStatement stmt) throws SQLException {

    // Declare result set variable
    try{
        try{
            // execute statement and store in variable
        }
        catch(SQLException se){
            // log, close connection, do any special processing, rethrow se
        }

    }
    finally{
                    // This finally block is here to ensure the connection closes if
                    // some special processing (not shown) in the other try generates a runtime exception
        // close connection and statement properly
    }
    // return result set
} 
```

推荐的替代方法是在每个执行查询的方法中基本上内联相同的代码。

我没有将其发布到 security.stackexchange.com，因为我认为它符合特定的安全编程问题。

我想不出为什么将这段代码（从私有方法）复制到许多类中会增加任何保护。会吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:39:07.797

如果此方法正在执行的查询具有 SQL 注入所需的成分，那么无论`private/public`方法如何，都会产生影响。

这个私有方法将被一些从用户（或）数据库获取输入的公共方法调用。如果该输入是恶意的，私有方法无法阻止它执行。

不要使用原始 SQL 字符串，最好使用准备好的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:39:55.617

有一个中央（不重复的）地方来执行查询是个**好**主意。从代码可维护性和安全角度来看。为什么有*可能*多次出现问题的代码？这仅意味着您必须多次维护它！

对我来说似乎很重要（并且已通过对问题的编辑而改变）是用它来执行手工构建的 SQL 字符串应该尽可能困难。

例如，您可以使用自定义枚举替换任何`String`参数（您最初拥有，但后来替换为 a ）：`PreparedStatement`

```
public enum SQLQuery {
  QUERY1("SELECT foo FROM BAR", 0),
  QUERY2("SELECT foo from BAR where baz = ?"; 1);

  private final String sql;
  private final int argumentCount;

  private SQLQuery(final String sql, final int argumentCount) {
    this.sql = sql;
    this.argumentCount = argumentCount;
  }

  public String getSQL() {
    return sql;
  }

  public int getArgumentCount() {
    return argumentCount;
  }
} 
```

然后你可以这样写你的方法：

```
public ResultSet executeQuery(SQLQuery query, Object... arguments) {
  // implementation left as an exercise for the reader
} 
```

通过这种方式，您可以*非常*确定您（或团队中的任何其他人）不会意外地将自构建传递`String`到您的方法中。

^(如有必要，可以扩展此方法以处理不同的参数类型，但在许多情况下使用`setObject()`效果很好。)

为了增加模块化，您可以从该枚举中提取一个接口并允许多个枚举来定义查询（例如，如果您的项目中有单独的模块）。但这有一个缺点，即恶意（或无能）开发人员可以使用动态非枚举实现`SQLQuery`将他们手动构建的 SQL 字符串放入该方法中。

# java - javax.ejb.TransactionRolledbackLocalException (Glassfish 3 + JPA + EclipseLink)

> ID：14201106
> 
> 赞同：1
> 
> 时间：2013-01-07T17:37:25.913
> 
> 标签：java, jakarta-ee, glassfish, ejb, eclipselink

我在使用 Glassfish 3.1.2 + JPA + EclipseLink + MySQL 开发的应用程序上遇到问题，在我部署应用程序后（数据库上没有表）它运行得很好并且显然执行了唯一的查询（计算表中的实体）我进入的。但是如果我重新加载页面，再次调用 servlet 会导致抛出异常：TransactionRolledbackLocalException

显然在用于计算实体的相同方法上。

然后如果我再次重新加载，它运行得很好，然后再次出现异常，很好，异常等等......

这是我的小服务程序：

```
@WebServlet(name="Controller", urlPatterns={"/Controller"})
public class Controller extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @EJB WineDao _wines;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        _wines.countWines();

        RequestDispatcher view = request.getRequestDispatcher("ShowAll.jsp");
        view.forward(request, response);
    }
} 
```

这是酒道：

```
@Stateless
public class WineDao {
    @PersistenceContext private EntityManager em;

    public Long countWines() {
        CriteriaBuilder qb = em.getCriteriaBuilder();
        CriteriaQuery<Long> cq = qb.createQuery(Long.class);
        cq.select(qb.count(cq.from(Wine.class)));
        return em.createQuery(cq).getSingleResult();
    }

} 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="myPU" transaction-type="JTA">
        <jta-data-source>jdbc/MySQLDataSource</jta-data-source>
        <properties>
            <!-- drop and create tables at deployment -->
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
            <!-- log sqls executed in server.log -->
            <property name="eclipselink.logging.level" value="FINE"/>
            <!-- Instruct EclipseLink to not log execeptions it throws. Lets the application decide about it-->
            <property name="eclipselink.logging.exceptions" value="true"/>
        </properties>
    </persistence-unit>
</persistence> 
```

最后是服务器日志，当我没有错误时：

```
[#|2013-01-07T18:32:27.271+0100|FINE|glassfish3.1.2|org.eclipse.persistence.session.file:/opt/glassfish/glassfish/domains/domain1/applications/appname/WEB-INF/classes/_myPU.sql|_ThreadID=21;_ThreadName=Thread-2;ClassName=null;MethodName=null;|SELECT COUNT(ID) FROM Wine|#] 
```

当我收到错误消息时：

```
[#|2013-01-07T18:32:29.582+0100|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=20;_ThreadName=Thread-2;|EJB5184:A system exception occurred during an invocation on EJB WineDao, method: public java.lang.Long it.vitux.java.appname.dao.WineDao.countWines()|#]

[#|2013-01-07T18:32:29.583+0100|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=20;_ThreadName=Thread-2;|javax.ejb.TransactionRolledbackLocalException: Client's transaction aborted
    at com.sun.ejb.containers.BaseContainer.useClientTx(BaseContainer.java:4722)
    at com.sun.ejb.containers.BaseContainer.preInvokeTx(BaseContainer.java:4601)
    at com.sun.ejb.containers.BaseContainer.preInvoke(BaseContainer.java:1914)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:212)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy516.countWines(Unknown Source)
    at it.vitux.java.appname.dao.__EJB31_Generated__WineDao__Intf____Bean__.countWines(Unknown Source)
    at it.vitux.java.appname.controllers.Controller.doGet(Controller.java:43)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ajp.AjpProcessorTask.invokeAdapter(AjpProcessorTask.java:125)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:679)
|#]

[#|2013-01-07T18:32:29.591+0100|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=20;_ThreadName=Thread-2;|StandardWrapperValve[Controller]: PWC1406: Servlet.service() for servlet Controller threw exception
javax.ejb.EJBTransactionRolledbackException
    at com.sun.ejb.containers.BaseContainer.mapLocal3xException(BaseContainer.java:2314)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2096)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy516.countWines(Unknown Source)
    at it.vitux.java.appname.dao.__EJB31_Generated__WineDao__Intf____Bean__.countWines(Unknown Source)
    at it.vitux.java.appname.controllers.Controller.doGet(Controller.java:43)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ajp.AjpProcessorTask.invokeAdapter(AjpProcessorTask.java:125)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:679)
Caused by: javax.ejb.TransactionRolledbackLocalException: Client's transaction aborted
    at com.sun.ejb.containers.BaseContainer.useClientTx(BaseContainer.java:4722)
    at com.sun.ejb.containers.BaseContainer.preInvokeTx(BaseContainer.java:4601)
    at com.sun.ejb.containers.BaseContainer.preInvoke(BaseContainer.java:1914)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:212)
    ... 31 more
|#] 
```

忘记了 Wine 课程：

```
@Entity
public class Wine {
    public static final int UP_ADDED = 0;
    public static final int UP_REMOVED = 1;
    public static final int UP_PRICE = 2;
    public static final int UP_OFFER = 3;

    @Id Long id; 
    private String name;
    private BigDecimal price;
    private BigDecimal offer;
    @Temporal(TemporalType.TIMESTAMP)
    private Date updateTime;
    private int updateStatus = 0;

    // Getters + Setters
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T14:33:43.840

我终于找到了一个解决方案：**重新启动 glassfish 域**-.- 经过一天的尝试，这很奇怪。

# jquery - 动态创建的下拉列表不会触发

> ID：14201107
> 
> 赞同：0
> 
> 时间：2013-01-07T17:37:30.180
> 
> 标签：jquery, ajax

嘿伙计们，我很难用动态创建的值选项来触发我的下拉列表。

```
 <label>Year Level Advisory: </label>
                <select id="org-subject-advisory-level" name="subject_level">

                </select>

                <label>Subjects: </label>
                <select id="subjects-list">

                </select> 
```

jQuery ajax：

```
function get_my_advisory(){

     $.ajax({                
            url:'func_students.php',
            type:'POST',
            dataType:'json',
            data:{'func_num':'4'},
            success: function (data){

               $.each(data, function(i, item) {
                   var options = "<option value="+data[i].sec_level+">"+data[i].sec_level+"</option>";

                     $('#org-subject-advisory-level').append(options);
                   }); 

          }
    });
  }
get_my_advisory();

$('#org-subject-advisory-level').on("change", function(){

    var advisory_year_level = $('#org-subject-advisory-level').val();

alert(advisory_year_level);
    $('#subjects-list').html("");

    $.ajax({
                    type:'POST',
                    url:'add_subject.php',
               dataType:'json',
                   data:{'func_numbr':'9','year_level':advisory_year_level},
                success:function (data){
                  $.each(data, function(i, item) {

                   html = "<option value="+data[i].subj_id+">"+data[i].subj_name+"</option>";

                     $('#subjects-list').append(html);
                   });
                }

                });

  });

  $('#org-subject-advisory-level').trigger("change"); 
```

触发器有效，但它在警报时返回空值，我想知道为什么会这样。希望得到你们的帮助。我是 jquery 和 php 的新手。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:10:50.537

如上所述，在成功回调或 jQuery ajax 的完整回调中触发您的更改事件。

但在触发更改事件之前，请确保默认选择任何选项。对于某些浏览器，默认选择第一个，但对于某些浏览器，没有选择任何内容，这将返回 null。所以最好你明确地选择任何选项。喜欢

```
$('#org-subject-advisory-level').find('option:last').attr('selected',true); 
```

此外，我建议您更改循环方法，使用本机 for 循环而不是 jquery。您可以通过优化代码来提高效率，例如

```
 $.each(data, function(i, item) {

 html = "<option value="+data[i].subj_id+">"+data[i].subj_name+"</option>";

 $('#subjects-list').append(html);
 }); 
```

至

```
var html=[];
for(var i=0; i<data.length; i++){
html.push("<option value="+data[i].subj_id+">"+data[i].subj_name+"</option>");
}
$('#subjects-list').append(html.join('')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:46:10.913

这应该可以正常工作，但初始`.trigger`（底部的那个）是在加载任何选项之前完成的。在到达该代码之前，最初的 ajax 请求很可能尚未完成。移动

```
$('#org-subject-advisory-level').trigger("change"); 
```

`success:`到初始ajax调用的回调内部`<option>`，附加的第一个值应该是警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:46:16.497

正如@Ohgodway 在评论中提到的那样……在调用触发器之前，大多数情况下您的ajax 调用都不会完成，因此在附加选择选项时在ajax 成功函数中调用您的触发器函数。

尝试这个：

```
 $.ajax({                
        url:'func_students.php',
        type:'POST',
        dataType:'json',
        data:{'func_num':'4'},
        success: function (data){

           $.each(data, function(i, item) {
               var options = "<option value="+data[i].sec_level+">"+data[i].sec_level+"</option>";

                 $('#org-subject-advisory-level').append(options);
               }); 

         $('#org-subject-advisory-level').trigger("change");

      }
}); 
```

# objective-c - 将 Chipmunk 身体连接到 UIKit 组件？

> ID：14201111
> 
> 赞同：0
> 
> 时间：2013-01-07T17:37:44.970
> 
> 标签：objective-c, xcode, uibutton, chipmunk, physics-engine

我正在尝试在 iOS 上使用带有 UIKit 组件的 Chipmunk（不是 Obj-C 版本），但仍然在苦苦挣扎。

我试图确定，在文档中的 ChipmunkColorMatch 示例中，UIButton 实例实际上是如何连接到任何物理计算的。我看到 UIButtons 是在 Ball 类中创建的，并且设置了它们的一些属性（类型、图像等），但我不明白 cpBody 或 cpShape 或它实际附加到该 UIButton 的位置. 我认为它需要，否则任何物理都不会反映在 UI 中。

我也查看了网站上的 SimpleObjectiveChipmunk 教程，但由于它使用了我无法使用的库（Obj-C 库），我也无法确定它是如何工作的。同样，我看到一个 UIButton 被创建并定位在屏幕上，但我看不到 cpBody（或者在这种情况下，ChipmunkBody）是如何以任何方式链接到按钮的。

任何人都可以阐明这是如何工作的吗？实际上，我需要的是一些可以轻弹的 UIButton 实例，但我什至还没有弄清楚如何创建力，因为我无法将身体连接到按钮上。

非常感谢，提前感谢。

编辑：还应该指出我不是，也不想在这个项目中使用 cocos2d。我看过使用它的教程，但这是要添加的第三层混乱。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:22:30.003

假设[这个源](https://github.com/slembcke/ChipmunkColorMatch/tree/master/Chipmunk-UIKit/ChipmunkColorMatch)是您要询问的项目，看起来魔法发生在`Ball`'`sync`方法中——它创建一个`CGAffineTransform`表示由物理引擎确定的平移和旋转，并将其应用于按钮。

反过来，该方法由视图控制器的`draw:`方法调用，该方法使用 定时在每一帧上发生，并在告诉每个帧之前`CADisplayLink`更新物理引擎。`Ball``sync`

# php - 使用 jscript 显示/隐藏 div

> ID：14201114
> 
> 赞同：1
> 
> 时间：2013-01-07T17:37:55.480
> 
> 标签：php, javascript, html, show-hide

我环顾了整个网站，但找不到我想要的答案。也许我的知识太少了，但我正在努力学习更多。

事情是这样的，我有这个包含几部电影的网站，在我的数据库中进行搜索后，我只返回用户的基本数据以及与搜索参数相对应的电影，其余数据我想放入具有显示和隐藏相同 div 选项的 div。

这就是我到目前为止所拥有的：

```
<script type='text/javascript'>
function showDiv() {
   document.getElementById('hiddenDiv').style.display = "block";
}
</script>

<div id="hiddenDiv"  style="display:none;" class="answer_list" > WELCOME</div>
<input type="button" name="answer" value="Show Div" onclick="showDiv()" /> 
```

详细信息：我使用 php echo 打印所有内容。

非常感谢你！

附加信息：

所有结果都显示在同一页面中，这意味着所有 div 具有相同的名称。

我已将我的 div 代码更改为：

```
echo "<div id='$dados[id]'  style='display:none;' class='answer_list' >";

$dados[id] returns me the id of the data in my db.

I want to change:

document.getElementById('hiddenDiv') to something like document.getElementById('$dados[id') <-- Shows only the last div. 
```

可以做到吗？

结果来自：

```
while ($dados = mysql_fetch_array($query)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:43:35.913

试试这个：

```
<script type='text/javascript'>
    function showDiv() {
        if (document.getElementById('hiddenDiv').style.display == 'block') {
            document.getElementById('hiddenDiv').style.display = 'none';
        } else {
            document.getElementById('hiddenDiv').style.display = 'block';
        }
    }
</script>
<div id="hiddenDiv"  style="display:none;" class="answer_list" >
    WELCOME
</div>
<input type="button" name="answer" value="Show Div" onclick="showDiv()" /> 
```

一个功能完成所有工作。话虽这么说，jQuery[切换](http://api.jquery.com/toggle/)非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:43:25.410

```
<script type='text/javascript'>
function showDiv() {
   document.getElementById('hiddenDiv').style.display = "block";
   document.getElementById('showDivButton').style.display = "none";
}
function hideDiv() {
   document.getElementById('hiddenDiv').style.display = "none";
   document.getElementById('showDivButton').style.display = "block";
}
</script>

<div id="hiddenDiv"  style="display:none;" class="answer_list" >
  WELCOME
  <input type="button" id="hideDivButton" value="Hide Div" onclick="hideDiv()" />
</div>
<input type="button" id="showDivButton" value="Show Div" onclick="showDiv()" /> 
```

或者使用一个框架，比如 Dojo（或者甚至 jQuery，如果它绝对没有帮助的话）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:54:34.080

示例 Javascript + Html：

```
<script language="javascript"> 
function toggle() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "show";
    } else {
        ele.style.display = "block";
        text.innerHTML = "hide";
    }
} 
</script>

<a id="displayText" href="javascript:toggle();">show</a> <== click Here
<div id="toggleText" style="display: none"><h1>peek-a-boo</h1></div> 
```

注意：术语“切换”表示显示/隐藏元素。

这里还有一些其他很好的例子：

[http://csscreator.com/node/708#xcomment-3123](http://csscreator.com/node/708#xcomment-3123)

[http://psoug.org/snippet/Javascript-Smooth-Div-ShowHide_236.htm](http://psoug.org/snippet/Javascript-Smooth-Div-ShowHide_236.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T04:29:52.050

```
<script type='text/javascript'>
function showadve() {
    if (document.getElementById('hiddenadve').style.display == 'none') {
        document.getElementById('hiddenadve').style.display = 'block';
    } else {
        document.getElementById('hiddenadve').style.display = 'none';
    }
}
</script>
<div id="hiddenadve" class="answer_list" >
    WELCOME
</div>
<input type="button" name="answer" value="Show Div" onclick="showadve()" />
<a href="#" onclick="showadve()">all close</a>` 
```

这是我的

# html - 将 Canvas 放在 Div 上

> ID：14201115
> 
> 赞同：1
> 
> 时间：2013-01-07T17:38:08.420
> 
> 标签：html, html5-canvas

我有一个 html5 页面，我需要在其中开发一个小测试。有 2 列带有多个按钮，每当您单击一个并拖动鼠标时，一条线会跟随鼠标移动，直到它被释放、捕捉到下一个按钮或被删除。
我将 div 用于按钮，因为这将在稍后交付给设计人员，他们需要能够使用 css 更改图像、文本和位置。

我的问题是画布。我不能把它放在 div 上，所以它们不会覆盖线条。我也尝试过 svg，但它有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:46:45.547

一位同事找到了答案。显然我需要在 css 上使用位置和 z-index 才能将画布正确放置在图层上。去搞清楚

# c# - 有什么方法可以强制 Web 客户端在我的 C# Web 服务器中使用安全 SSL 密码（TLS 1.1/TC4），以避免 BEAST 攻击

> ID：14201120
> 
> 赞同：1
> 
> 时间：2013-01-07T17:38:27.427
> 
> 标签：c#, ssl, .net-4.5, beast

我有一个用 C# 编写的专业网络应用程序 - 我的 C# 代码充当网络服务器，接受来自浏览器的连接，并将应​​用程序呈现为网页。

现有应用程序使用 SSL 来保护来自浏览器的连接，但我担心 BEAST，它会使许多旧的 SSL 密码不安全。因此，我想确保我只接受使用 TLS1.1 或更高版本的连接，和/或像 RC4 这样的安全密码。

我已经接受我将不得不放弃我正在使用的 SSL 库，并可能切换到带有 SslStream 的 .NET 4.5。

虽然我看到了如何使用 SslProtocol 和 CipherAlgorithm 检查流的密码，但我找不到强制连接选择更安全算法之一的方法。我错过了什么吗？

为免生疑问，这与 ASP 无关——该服务器是用原始 C# 编写的。我需要一种使 SslStream 更喜欢特定密码的编程方式。我不太可能拥有更改主机服务器上的 ssl 注册表设置的必要权限。

# python - 我无法在 Pyramid 中进行翻译

> ID：14201121
> 
> 赞同：1
> 
> 时间：2013-01-07T17:38:36.987
> 
> 标签：python, internationalization, pyramid

我正在做一个带有 i18n 和本地化的项目，但尝试使用翻译根本行不通。我已经完成了一个示例项目，我在其中遵循[了官方文档](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/i18n.html)：

我的项目是由“pcreate -s starter MyProject”创建的。它可以在[https://bitbucket.org/aguirrel/translation_test/src](https://bitbucket.org/aguirrel/translation_test/src)找到。

我做了很多测试，但没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T10:43:46.300

看来您的项目还可以。可能缺少的一件事是 Pyramid 需要知道语言环境名称才能激活翻译。

有几种方法可以做到[这里](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/i18n.html#setting-the-locale)概述：

测试您的翻译是否正常工作的一种快速方法是将语言环境作为请求参数传递。例如，您可以访问以下网页：

```
http://localhost:6543/?_LOCALE_=es 
```

# jquery - application.js "//= 需要 jquery-ui"

> ID：14201122
> 
> 赞同：0
> 
> 时间：2013-01-07T17:38:43.290
> 
> 标签：jquery, ruby-on-rails, jquery-ui, backbone.js

我所处理的很可能是非常基本的，这就是为什么我想确保我完全理解事情是如何运作的，而不仅仅是猜测幕后发生的事情......

我正在开发一个主干应用程序（rails 用于后端），在我进入图片时已经创建了。我认为理所当然的文件之一是 application.js 文件。该文件有一堆“要求”语句，虽然我知道这些语句加载不同的 javascript 文件，但我不确定一切是如何工作的。谁能给我简要概述一下这些陈述的情况？

更具体地说，最近我尝试使用 jQuery UI spinner 函数并不断收到错误“this.$(...).spinner is not a function”。通过阅读有关此错误的信息，可以清楚地看出 spinner 函数是 jQuery UI 1.9 版本的一部分，我们的应用程序必须使用以前的版本。我不知道如何准确识别哪个版本......查看页面源时，参考是：

```
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script> 
```

我相信应用程序中只有两个地方可能负责加载 jQuery UI。第一个在应用程序的 Gemfile（gem 'jquery-rails'）中，第二个在 application.js 文件中（//= 需要 jquery-ui）。我应该怎么做才能确保加载最新版本的 jQuery UI？

谢谢你的帮助，亚历山德拉

# ssis - 用多个文件解密 PGP 将它们合并 gpg

> ID：14201124
> 
> 赞同：0
> 
> 时间：2013-01-07T17:38:52.087
> 
> 标签：ssis, encryption, gnupg, pgp

我正在使用 SSIS (2008) 进程任务来解密 PGP 文件。它使用 gpg 可执行文件。基本上，我使用 ForEach 循环，将文件名存储为变量，并执行以下表达式作为解密参数： `"--batch --passphrase-fd 0 --decrypt-files \""+ @[User::PGPFile]+ "\""`

我们一直在接收（我知道是不必要的）一个包含多个 pgp 文件的 zip 文件，但现在我们正在接收一个 pgp 文件，其中一个 zip 文件中有许多文本文件。GPG 和整个过程一直以旧方式正常工作。现在，虽然它仍然可以解密 pgp 文件，但它会将所有文本文件合并为一个大文件。我需要它们都是单独的文件并保留它们的原始名称。

有人确切地看到我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:36:33.080

我不知道这`ssis`件事，但`gpg`部分似乎很好。也许您的循环控制是向后的或不需要？

最初，您有一个`zip`包含多个加密文件的存档，因此您将首先提取存档，然后解密每个文件（在 ForEach 循环中）。但是现在你有一个加密文件，它本身包含一个`zip`档案，所以你只需要运行`gpg`一次来​​解密档案，然后用`unzip`.

换句话说，现在你有两个命令要执行，没有循环。

# android - OnTouch 事件的行为如何？

> ID：14201130
> 
> 赞同：2
> 
> 时间：2013-01-07T17:39:23.477
> 
> 标签：android, multi-touch

如果设备上有多个手指，onTouch-listener 是为每个手指运行一次，还是每个事件运行一次（手指向下、移动等）并包含每个活动的触摸指针？

而如果

```
(e.getAction() & MotionEvent.ACTION_MASK == MotionEvent.ACTION_MOVE) 
```

我怎么知道当前哪个指针在移动？

```
final int pointerIndex = e.getActionIndex();
pointerID = e.getPointerId(pointerIndex); 
```

由于某种原因，总是返回 0（而 MotionEvent.ACTION_MOVE）..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:32:41.597

首先，你会得到这些事件：

1.  `MotionEvent.ACTION_DOWN`
    第一次触摸屏幕
2.  `MotionEvent.ACTION_POINTER_DOWN`
    对于所有非主要触摸
3.  `MotionEvent.ACTION_UP`
    最后一次润色
4.  `MotionEvent.ACTION_POINTER_UP`
    对于每个非主要修饰
5.  `MotionEvent.ACTION_MOVE`
    每次触摸的手指在
    这里移动时，您都必须遍历所有手指并检查坐标是否已更改

像这样做：

```
@Override
public boolean onTouchEvent(MotionEvent ev)
{
    final int action = ev.getAction();
    final int pointerIndex = (action & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT; //index of this pointer

    switch (action & MotionEvent.ACTION_MASK)
    {
        case MotionEvent.ACTION_DOWN:
            //your first touch on the screen
            break;

        case MotionEvent.ACTION_MOVE:
            //one of the touches has moved
            for (unsigned int i = 0; i < ev.getPointerCount(); i++)
            {
                //The pointer id is ev.getPointerId(i);
                //for loop through all touches
            }
            break;

        case MotionEvent.ACTION_UP:
            //your last touch has gone up
            break;

        case MotionEvent.ACTION_POINTER_DOWN:
            //non-primary pointer has gone down
            break;

        case MotionEvent.ACTION_POINTER_UP:
            //non-primary pointer has gone up
            break;
        }
    }

    return true;
} 
```

我希望这对你有一点帮助:)

# c++ - 高度可定制的 C++ GUI 库？

> ID：14201135
> 
> 赞同：0
> 
> 时间：2013-01-07T17:39:37.407
> 
> 标签：c++

这里是否有任何 C++ GUI 库，速度快，具有高度可定制的外观（如 Swing），当然，抽象级别比 Win32 高得多？

我是一个完整的 C++ 初学者，但非常喜欢 Java+Swing 组合的可定制性。

简而言之，我希望 lib 易于学习，可以通过简单地继承和覆盖他们的绘画（如 Swing）和免费的方式来定制 :)

请帮我！

PS 我使用带有 32 位 gcc 的 orwell dev-c++ 便携式叉子。如果这很重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T17:42:03.117

Qt 是您正在寻找的：http: [//qt-project.org](http://qt-project.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:43:44.723

有很多：[wxWidgets](http://www.wxwidgets.org/)、[Qt](http://qt-project.org/)、[GTK+](http://www.gtk.org/)等等。使用任何搜索引擎都可以在短时间内轻松找到。

# objective-c - 接收带有特殊字符的 XML

> ID：14201136
> 
> 赞同：0
> 
> 时间：2013-01-07T17:39:38.360
> 
> 标签：objective-c, ios, xcode

我正在尝试使用**é**之类的字符解析 XML ，**ñ**我使用 UTF8 作为编码..

我已经尝试将编码更改为**NSISOLatin1StringEncoding**但它不起作用

代码是：

```
 -(void)connectionDidFinishLoading:(NSURLConnection *)connection
 {
//NSLog(@"DONE. Received Bytes: %d", [webData length]);
NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
//  NSLog(theXML);
[theXML release];
if( xmlParser )
{
    [xmlParser release];
}
xmlParser = [[NSXMLParser alloc] initWithData: webData];
[xmlParser setDelegate:self];
[xmlParser setShouldResolveExternalEntities:YES];
[xmlParser parse];
if (connection) {
    [connection release];
    }
  }

 -(void)callWS {
  NSString *url = @"theUrlHere";
  NSMutableURLRequest *request =[[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:url]];
[request setHTTPMethod:@"GET"];

NSURLConnection *conn=[[NSURLConnection alloc] initWithRequest:request delegate:self];
   if (conn) {
      webData = [[NSMutableData data] retain];
   } 
```

当我收到 xml 响应时...带有特殊字符的结果出现错误...

```
 - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
  {
   if(!soapResults)
{
 ....//the soapResults here appears wrong when It has special chars...

  } 
```

示例：**Caperuçú**出现**çú**，**Indianópolis**出现**ópolis**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:17:08.967

`parser:foundCharacters:`请参阅委托方法的文档：

> 解析器对象可以向委托发送几个 parser:foundCharacters: 消息来报告元素的字符。因为字符串可能只是当前元素的全部字符内容的一部分，所以您应该将它附加到当前的字符累积中，直到元素发生变化。

我假设您的代码不会累积字符，而只是使用*上次* `parser:foundCharacters:`调用的结果。

以下示例程序使用您的输入字符串显示了这种效果：

```
-(void)parse
{
    NSString *xmlString = @"<a><b>Indianópolis</b><c>Caperuçú</c></a>";
    NSData *xmlData = [xmlString dataUsingEncoding:NSUTF8StringEncoding];

    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:xmlData];
    parser.delegate = self;
    [parser parse];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"didStartElement: %@", elementName);
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    NSLog(@"didEndElement: %@", elementName);
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    NSLog(@"foundCharacters: %@", string);
} 
```

*输出：*

```
didStartElement: a
didStartElement: b
foundCharacters: Indian
foundCharacters: ópolis
didEndElement: b
didStartElement: c
foundCharacters: Caperu
foundCharacters: çú
didEndElement: c
didEndElement: a 
```

所以这不是编码问题。

# javascript - 由于炒作，Javascript 无法工作

> ID：14201137
> 
> 赞同：0
> 
> 时间：2013-01-07T17:39:42.410
> 
> 标签：javascript

从我的[小提琴](http://jsfiddle.net/fredang85/GxVFH/)

```
<select id="doesnt-work">
  <option>Apple</option>
  <option>Orange</option>
  <option value="111">Pineapple</option>
  <option>Banana</option>
</select>
<input type="textbox" id="mytextbox"/>
<button onclick="displayResult(doesnt-work)">Click me</button> 
```

**JavaScript**

```
function displayResult(selTag)
{
var x=selTag.options[selTag.selectedIndex].text;
document.getElementById('mytextbox').value = x;
} 
```

我知道它不起作用，因为“不起作用”之间的连字符

我需要使用连字符，因为它是由我的应用程序自动创建的，我无法控制它。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:45:10.333

您依赖于 JavaScript 的错误部分。您不应该使用元素 ID 并让浏览器自动连接它。像设置值时一样使用 getElementById。

HTML：

```
<button onclick="displayResult('doesnt-work')">Click 
```

JavaScript：

```
function displayResult (selId) {
    var selTag = document.getElementById(selId);
    var x=selTag.options[selTag.selectedIndex].text;
    document.getElementById('mytextbox').value = x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:47:23.500

连字符不是问题。您必须将 id 作为字符串传递给函数：

```
<button onclick="displayResult('doesnt-work')">Click me</button> 
```

要获取选定的文本：

```
var selectBox = document.getElementById(selTag);
var x=selectBox.options[selectBox.selectedIndex].text; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:47:34.640

将 id 作为字符串传递，而不是对象本身；

```
<button onclick="displayResult('doesnt-work')">Click me</button> 
```

然后将其解析为函数中的对象

```
function displayResult(id)
{
var selTag = document.getElementById(id);
var x = selTag.options[selTag.selectedIndex].text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T17:47:10.027

如果您可以`document.getElementById`改用：

```
<button onclick="displayResult(document.getElementById('doesnt-work'))">Click me</button> 
```

# java - Java 的本地消息队列 API/库

> ID：14201140
> 
> 赞同：1
> 
> 时间：2013-01-07T17:39:45.593
> 
> 标签：java, message-queue

我正在寻找用于在 java 中本地管理队列的消息队列 api/库。你对我有什么建议？

我不想使用客户端/服务器架构，我宁愿在本地进行，以免添加故障点。此外，目前不需要横向扩展。

[编辑]

是否有用于在 java 中本地管理查询的消息队列 API/库？特点：1）持久队列；2）队列管理；3) 线程安全

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:28:27.717

曾几何时，我在寻找持久队列，但找不到好的实现。我认为你有两个选择：

*   使用 JMS 实现

*   使用带有 Map 实现的嵌入式键值数据库，例如[JDBM3](https://github.com/jankotek/JDBM3)。将队列模拟为 Map，其中 id 在`put`as的时刻分配`previous max id +1`，并`take/poll/get`读取具有最小 id 的值。

# iphone - 使用音频工具箱播放 .wav

> ID：14201141
> 
> 赞同：1
> 
> 时间：2013-01-07T17:39:46.463
> 
> 标签：iphone, objective-c, ios, audio, audiotoolbox

我正在尝试使用音频工具箱播放 .wav 文件。到目前为止我有这个：但是我的文件不会播放。If 条件被正确触发，但它不播放。如果文件不存在，它将打印错误消息。任何线索有什么问题？

```
-(void) playSound : (NSString *) fName : (NSString *) ext
{

    SystemSoundID audioEffect;
    NSString *path  = [[NSBundle mainBundle] pathForResource : fName ofType :ext];
    if ([[NSFileManager defaultManager] fileExistsAtPath : path])
    {
        NSURL *pathURL = [NSURL fileURLWithPath : path];
        AudioServicesCreateSystemSoundID((__bridge CFURLRef) pathURL, &audioEffect);
        AudioServicesPlaySystemSound(audioEffect);
    }
    else
    {
        NSLog(@"error, file not found: %@", path);
    }
    AudioServicesDisposeSystemSoundID(audioEffect);;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:49:51.597

我从 Warrenm 的评论中发现了这一点。我不得不删除最后一行，因为它在设置播放后的几毫秒内杀死了声音，因此听不到。

```
-(void) playSound : (NSString *) fName : (NSString *) ext
    {

        SystemSoundID audioEffect;
        NSString *path  = [[NSBundle mainBundle] pathForResource : fName ofType :ext];
        if ([[NSFileManager defaultManager] fileExistsAtPath : path])
        {
            NSURL *pathURL = [NSURL fileURLWithPath : path];
            AudioServicesCreateSystemSoundID((__bridge CFURLRef) pathURL, &audioEffect);
            AudioServicesPlaySystemSound(audioEffect);
        }
        else
        {
            NSLog(@"error, file not found: %@", path);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:46:12.013

您不能在告诉它播放后立即处理声音 ID，因为这会导致播放停止。这就是为什么你一开始没有听到它的原因。

相反，您应该做的是在负责创建它的任何对象（例如，视图控制器）的属性中保存对 ID 的引用。你会在你的接口声明中这样声明它：

```
@property(nonatomic, assign) SystemSoundID audioEffect; 
```

...然后像这样分配给它：

```
AudioServicesCreateSystemSoundID((__bridge CFURLRef) pathURL, &_audioEffect); 
```

这不仅可以让你在以后知道你已经完成它的时候正确处理它（例如 in `viewDidUnload`），而且还可以防止你每次想要播放它时都必须从磁盘中读取文件返回，因为每个 ID 都可以无限次播放。

最后一个提示：您可以直接请求捆绑资源的 URL，而不是请求字符串然后将其转换为 URL。

```
NSURL *audioURL = [[NSBundle mainBundle] URLForResource:fName withExtension:ext];
if([[NSFileManager defaultManager] fileExistsAtPath:[audioURL path]])
    // ... 
```

# java - 使用 JFrames 的扑克项目

> ID：14201144
> 
> 赞同：-5
> 
> 时间：2013-01-07T17:39:52.277
> 
> 标签：java, swing, jframe, poker

我有一个 Java 扑克项目。我为游戏编写了两个`JFrame`s，当您运行项目时，将`JFrame`s 一起显示而不是第一个，当它完成时显示第二个。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:59:07.977

请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556) 而是对第一个“框架”使用模式对话框。此示例使用`JOptionPane`.

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class TwoStageGUI {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JOptionPane.showMessageDialog(null, "Gratuitous splash screen");
                // the GUI as seen by the user (without frame)
                JPanel gui = new JPanel(new BorderLayout());
                gui.setBorder(new EmptyBorder(20, 200, 20, 200));

                gui.add(new JLabel("Play!"));
                gui.setBackground(Color.WHITE);

                JFrame f = new JFrame("Game");
                f.add(gui);
                // Ensures JVM closes after frame(s) closed and
                // all non-daemon threads are finished
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See https://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

# python - 使用 SocketServer 发送/接收无限循环 - Python - ConnectionAbortedError

> ID：14201147
> 
> 赞同：1
> 
> 时间：2013-01-07T17:40:00.443
> 
> 标签：python, client-server, handle, socketserver

我正在尝试使用 socketserver 创建一个简单的服务器，以通过 TCP 将图像发送到客户端。首先我向客户端发送一个目录，然后它响应一个请求。

在我的服务器的句柄中，我有这个循环：

```
class MainHandler(socketserver.BaseRequestHandler):
def handle(self):

        while 1:
            try:
            # Sending the catalogue
                # Using my methods to get my catalogue with a HTTP header
            response = self.server.genHTTPRequest(self.server.init.catalogue)
            self.request.sendall(response.encode())

            # Response of the client
            self.data = self.request.recv(1024).decode()
            if self.data:
                print("Data received : {}".format(self.data))

        except:
            print("transmission error")
            break; 
```

我主要使用这一行来创建我的服务器（它在另一个文件中）：

```
mainServer = MainServer.MainServer((init.adresse, int(init.port)), MainServer.MainHandler) 
```

当我启动这个程序时，客户端连接成功并接收到目录，但它只发回一些数据并且程序跳转到 try/catch 的异常中。没有 try/catch，我得到了这个错误：

```
self.data = self.request.recv(1024).decode()
ConnectionAbortedError: [WinError 10053] An established connection was aborted by the software in your host machine 
```

我不明白是什么问题，可能是同步丢失或者我可能需要使用线程？

谢谢您的帮助

（我正在使用python 3.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T06:27:04.463

问题是因为`sendall(response.encode())`并且这`self.request.recv(1024).decode()`已经在同一个套接字中完成，它可能导致`ConnectionAbortedError`.

在将其他数据放入套接字之前，您需要从套接字中读取所有数据。就像刷新数据一样。

# c# - Wpf FlowDocumentReader 列属性

> ID：14201149
> 
> 赞同：1
> 
> 时间：2013-01-07T17:40:10.467
> 
> 标签：c#, wpf, flowdocumentreader

有一个问题`FlowDocumentReader`。When the "one page view" selected it looks something like that.

![在此处输入图像描述](../Images/7adb0cd25b6cee3c1a04ea4864558e09.png)

但我只想有一个专栏，谁能告诉我一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:09:07.853

您可以通过设置当前文档的“最小”列宽来控制列数。只需将[FlowDocument.ColumnWidth](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.columnwidth.aspx)属性设置为某个较大的值即可仅获取一列：

```
reader.Document.ColumnWidth = 1000; 
```

文件说

> Double.NaN 的值导致只显示一列，而与页面宽度无关。默认值为 Double.NaN。

但显然前者不正确。

# android - 从 Runtime.exec 使用 Logcat 时不显示任何内容

> ID：14201152
> 
> 赞同：1
> 
> 时间：2013-01-07T17:40:24.180
> 
> 标签：android, runtime, exec, logcat

我正在运行命令

```
logcat -d AndroidRuntime:E *:S 
```

当从我的计算机上的 adb 运行时，它会显示它应该显示的所有内容。当我尝试从 Android 应用程序运行它时

`Runtime.getRuntime().exec("logcat -d AndroidRuntime:E *:S");`

并打印输出，它不会显示除标题之外的任何内容。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:44:57.577

首先，这从未得到支持。

其次，如果您运行在 Android 4.1 及更高版本上，您将只会收到您自己的应用程序记录的任何日志消息，而不是来自其他应用程序的消息，因为[您无法再持有`READ_LOGS`普通 SDK 应用程序的权限](http://commonsware.com/blog/2012/07/12/read-logs-regression.html)。

# c# - 如何按 ID 和父 ID 数据排序

> ID：14201154
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:40:36.860
> 
> 标签：c#, linq

您好，我的数据库中有一个菜单结构，格式如下：

```
Id | Id_Parent | Menu 
```

我需要让这个数据结构按顺序`id`排列`id_parent`。

我如何使用 linq 进行此查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:41:59.280

```
var orderedData = data.OrderBy(i => i.Id).ThenBy(i => i.Id_Parent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:44:32.580

@des 的答案是正确的，但这里是带有查询语法的相同查询（我发现它更具可读性）

```
var orderedData = from x in data
                  orderby x.Id, x.Id_Parent
                  select x; 
```

# javascript - 如果语句被忽略，则 Maps API 保存数据函数

> ID：14201159
> 
> 赞同：2
> 
> 时间：2013-01-07T17:41:04.243
> 
> 标签：javascript, google-maps

我对保存数据有疑问...它将数据保存到数据库中，并且还在地图上显示，所以基本上一切正常，但是当我保存标记的地址和名称然后单击保存按钮时我无法关闭它...

```
downloadUrl(url, function(data, responseCode) {
if (responseCode == 200 && data.length <= 1) {
  infowindow.close();
  document.getElementById("message").innerHTML = "Location added.";
} 
```

从downloadUrl开始有些不好，似乎代码被忽略了，因此我发出警报让用户知道它已保存。

如果有帮助，我会复制整个 javascript（它还包括地理编码器和样式地图）：如果你愿意，我可以给你一个指向地图的链接或你需要的任何东西。

```
var marker;
var infowindow;
var geocoder;
var map;

function initialize() {
  geocoder = new google.maps.Geocoder();

var styles = [
{
  "stylers": [
  { "hue": "#0055ff" },
  { "saturation": 90 },
  { "gamma": 0.39 },
  { "lightness": 48 },
  { "visibility": "on" },
  { "invert_lightness": true }
 ]
 },{
"featureType": "road",
"stylers": [
  { "hue": "#ff4500" }
]
},{
"elementType": "labels",
"stylers": [
  { "hue": "#00ff6f" },
  { "gamma": 6.31 },
  { "weight": 0.2 }
]
}
];

var SajatMap = new google.maps.StyledMapType(styles,
{name: "Saját Map"});

  var image=new google.maps.MarkerImage('resistance2.png',
  new google.maps.Size(23, 30),
  new google.maps.Point(0,0),
  new google.maps.Point(0, 32));

  var latlng = new google.maps.LatLng(47.495632, 19.044748);
    var options = {
      center: latlng,
      zoom: 12,
      mapTypeControlOptions: {
      mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'sajat_map']
      }
    };
  map = new google.maps.Map(document.getElementById("map"), options);

  var infoWindow = new google.maps.InfoWindow();

map.mapTypes.set('sajat_map', SajatMap);
map.setMapTypeId('sajat_map');

var html = "<table>" +
             "<tr><td>Név:</td> <td><input type='text' id='name'/> </td> </tr>" +
             "<tr><td>Hely:</td> <td><input type='text' id='address'/></td> </tr>" +
             "<tr><td></td><td><input id='save' type='button' value='Mentés'    onclick='saveData()'/></td></tr>";
infowindow = new google.maps.InfoWindow({
 content: html
});

google.maps.event.addListener(map, "click", function(event) {
    marker = new google.maps.Marker({
      position: event.latLng,
      map: map
    });
    google.maps.event.addListener(marker, "click", function() {
      infowindow.open(map, marker);
    });
});

  downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      marker = new google.maps.Marker({
        map: map,
        icon:image,
        position: point
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });     
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

  function saveData() {
  var name = escape(document.getElementById("name").value);
  var address = escape(document.getElementById("address").value);
  var latlng = marker.getPosition();

  var url = "phpsqlinfo_addrow.php?name=" + name + "&address=" + address +
            "&lat=" + latlng.lat() + "&lng=" + latlng.lng();
            alert('Successfully saved!');
  downloadUrl(url, function(data, responseCode) {
    if (responseCode == 200 && data.length <= 1) {
      infowindow.close();
      document.getElementById("message").innerHTML = "Location added.";
    }
  });
 }

function codeAddress() {
var address = document.getElementById("kereso").value;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
  } else {
    alert("Sikertelen. A probléma oka: " + status);
  }
});
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:57:24.560

你说对话框没有关闭，这向我表明条件

```
responseCode == 200 && data.length <= 1 
```

快到了`false`。

这可能是因为您从服务器返回的响应包含多个字符，因此`data.length <= 1`也是如此`false`（因为该条件`true`仅适用于长度为一、零或负数的消息）。验证您的响应是否最多包含一个字节的内容。

也许您实际上打算测试非空消息，即`data.length >= 1`. 现在您只允许关闭一个字节*或更短*的响应；我猜你真的想允许关闭一个字节*或更长的消息*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-05T21:34:43.873

这个问题很老，但我来寻找同样的问题，我找到了答案，所以它可能会帮助其他人。

您的代码可能来自[https://developers.google.com/maps/articles/phpsqlinfo_v3](https://developers.google.com/maps/articles/phpsqlinfo_v3)

它在那里说作为使用的解释`if (responseCode == 200 && data.length <= 1)`：

*   *检查返回的状态码是否为 200。这意味着文件被成功检索，我们可以继续处理。*
*   *检查返回的数据字符串的长度 - 一个空的数据文件表示请求没有生成错误字符串。如果长度为零，您可以关闭信息窗口并输出成功消息。*

如果您从中登录`data`，`downloadUrl(url, function(data, responseCode) {`您会看到他们在那里犯了一个错误：

记录`data`对象显示：`XMLHttpRequest {statusText: "OK", status: 200, response: "", responseType: "", responseXML: null…}`

在我看来，他们的意思是`response: ""`：如果有错误，它将进入那里。因此，如果`data.response.length < 1`，则表示没有错误。

我对 Javascript 很陌生，所以如果错了请纠正我，但这对我来说是这样的：

```
 downloadUrl(url, function(data, responseCode) {
    if (responseCode == 200 && data.response.length <= 1) {
      infowindow.close();
      document.getElementById("message").innerHTML = "Location added.";
    }
  }); 
```

# python - 在模板中显示时减小图像大小

> ID：14201160
> 
> 赞同：1
> 
> 时间：2013-01-07T17:41:05.297
> 
> 标签：python, django

我已经习惯`PIL`在保存图像时减小图像大小，如下所示：

```
image = Image.open(filename)
image.thumbnail(size, Image.ANTIALIAS)
image.save(filename) 
```

现在我想在模板中显示一个图像列表，图像列表创建于`views.py`：

```
for company in companies:
   list+='<img src="'+company.logo.url+'" />'
return render_to_response('index',{'list':list}) 
```

在`template`：

```
<span>{{list|safe}}</span> 
```

在模板中显示图像以快速加载图像时，是否可以减小图像的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:43:38.737

> 在模板中显示图像以快速加载图像时，是否可以减小图像的大小？

动态执行此操作几乎肯定会比仅发送图像要慢。当您保存图像时，只需保存另一个较小的版本，然后在您的列表中提供该版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:57:00.013

也许[这](http://djangosnippets.org/snippets/955/)对您正在寻找的东西很有用。使用此代码段，您可以解决在`template`级别调整图像大小的问题。您也可以使用已完成 Ryan Fugger 的版本，可以在[此处访问](https://github.com/rfugger/villagescc/blob/master/cc/general/templatetags/image.py)。希望它可以帮助你。

# windows-8 - Windows 8 认证要求：与运行时动态链接

> ID：14201166
> 
> 赞同：0
> 
> 时间：2013-01-07T17:41:27.870
> 
> 标签：windows-8, visual-studio-2012, static-linking, msvcrt

我们的产品包含发送给客户的 DLL。

在提供 Windows 8 版本时，我注意到我无法静态链接 CRT，否则使用我们的 DLL 的应用程序无法通过认证。

我找不到任何提到这一点的文件。有人知道为什么它不可能或如何实现吗？

我们的产品仅使用 malloc/free 和数学函数。静态链接到 CRT 会简单得多，而不是要求链接到我们的每个应用程序都安装正确的 vc redist。（还有 ffs 为什么不通过 Windows 更新渠道部署 vc redists？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:59:14.323

Windows 应用商店应用只能使用 VS 2012 和当前的 CRT 构建。关键是 Windows 应用商店应用程序不支持 CRT 的静态链接。

以下是有关 CRT 的更多信息：

Windows 应用商店应用程序、Windows 运行时和 C 运行时 [http://msdn.microsoft.com/en-us/library/hh972425.aspx](http://msdn.microsoft.com/en-us/library/hh972425.aspx)

以下是不支持的 crt 例程列表：http: [//msdn.microsoft.com/en-us/library/hh674596.aspx](http://msdn.microsoft.com/en-us/library/hh674596.aspx)

罗布·卡普兰在这里写道：

[http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/0fa0695f-9828-46ac-985b-5ca15f3bee0a](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/0fa0695f-9828-46ac-985b-5ca15f3bee0a)

“如果您的 lib 链接到符合 Metro 风格应用程序的 C 运行时，您将能够调用标准 C 函数，例如 fopen。您可以针对 App Cert Kit 进行测试以确认。早于 VC 2012 的运行时将不起作用。

您的应用仍将受制于安全沙箱，并且无法访问其应用数据和包之外的目录。”

# javascript - IE8中的表格单元格索引问题

> ID：14201168
> 
> 赞同：2
> 
> 时间：2013-01-07T17:41:41.257
> 
> 标签：javascript, internet-explorer-8

在 Chrome 和 Firefox 中工作时，以下行在 IE8 中给我带来了麻烦：

```
this.column = header_index[this.parentNode.rowIndex + "-" + this.cellIndex]; 
```

IE8 返回“对方法或属性访问的意外调用”。我尝试了其他地方推荐的修复，使用`getCellIndex(this)`代替`this.cellIndex`，并添加：

```
function getCellIndex(aCell) {
    aRow = aCell.parentNode;
    for (i = 0; i != aRow.cells.length; i++) {
        if (aRow.cells[i] == aCell) return i;
    }
} 
```

...并被告知“cells.length 为空或不是对象”。

任何有关如何进行的建议将不胜感激。下面函数的相关部分，麻烦在第6行：

```
$tableHeaders = $(c.selectorHeaders, table)
            .wrapInner("<div class='tablesorter-header-inner' />")
            .each(function(index) {
                $t = $(this);
                ch = c.headers[index];
                this.column = header_index[this.parentNode.rowIndex + "-" + this.cellIndex];
                this.order = formatSortingOrder( ts.getData($t, ch, 'sortInitialOrder') || c.sortInitialOrder ) ? [1,0,2] : [0,1,2];
                this.count = -1; // set to -1 because clicking on the header automatically adds one
                if (ts.getData($t, ch, 'sorter') === 'false') { this.sortDisabled = true; }
                this.lockedOrder = false;
                lock = ts.getData($t, ch, 'lockedOrder') || false;
                if (typeof(lock) !== 'undefined' && lock !== false) {
                    this.order = this.lockedOrder = formatSortingOrder(lock) ? [1,1,1] : [0,0,0];
                } 
```

# android - 通过网络浏览器和 webview 下载 pdf

> ID：14201176
> 
> 赞同：17
> 
> 时间：2013-01-07T17:42:17.803
> 
> 标签：android, pdf, android-webview

我正在访问一个包含 .pdf 文档的网站。如果我通过网络浏览器打开该文档，它就会开始下载它。如果我通过 webview 打开它，什么也不会发生。我需要对 webview 应用什么设置才能开始下载？

我已经有了这个。

```
wvA.setDownloadListener(new DownloadListener()
{
    public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimeType,
                    long size)
    {
        Intent viewIntent = new Intent(Intent.ACTION_VIEW);
        viewIntent.setDataAndType(Uri.parse(url), mimeType);

        try
        {
            startActivity(viewIntent);
        }
        catch (ActivityNotFoundException ex)
        {
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-10-02T17:08:50.490

实现一个下载监听器来处理任何类型的下载：

```
webView.loadUrl(uriPath);

webView.setDownloadListener(new DownloadListener() {
    @Override
    public void onDownloadStart(String url, String userAgent,
            String contentDisposition, String mimetype,
            long contentLength) {

        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
    }
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-07T18:25:20.713

您应该创建 WebViewClient 并将其设置为您的 webview。每次单击链接时，都会调用WebViewClient 的[shouldOverrideUrlLoading方法。](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)检查 url 指向 pdf 文件并做你想做的事。例如，您可以查看 pdf。

```
webView.setWebViewClient(new WebViewClient() {
    public boolean shouldOverrideUrlLoading (WebView view, String url) {
        if (url.endsWith(".pdf")) {
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
            // if want to download pdf manually create AsyncTask here
            // and download file
            return true;
        }
        return false;
    }
}); 
```

# javascript - 返回一个自执行函数

> ID：14201180
> 
> 赞同：1
> 
> 时间：2013-01-07T17:42:37.983
> 
> 标签：javascript

说我想这样做：

```
function z(){return function(){a = 4}
}

function b(){
 var a;
 c = z();
 c();
} 
```

我想跳过`c();`但是我想在调用者范围内返回时立即执行返回的函数，以便我可以使用它。

*在这个例子中 a 应该得到值 4*。

有办法吗？干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T17:46:28.613

您应该能够立即执行 return 函数

```
z()(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T20:34:05.937

不，这是不可能的（不使用类似的技巧`eval`）。您不能更改 . 返回的函数的范围`z`。

如果没有关闭，您的示例可能会更简单，您所要求的只是

```
function c() {
    a = 4;
}
function b() {
    var a;
    c(); // should change variable a
    return a;
}
b(); // is expected to return 4, but does not 
```

您不能更改函数的范围，或传递范围对象（如指向变量的指针）。但是，您可以传递一个对象，其属性将被函数更改：

```
function z(obj) {
    return function() {
        obj.a = 4;
    };
}
function b() {
    var o = {};
    z(o)(); // as mike and others said, this is the same as yours
            // - you don't need the c variable
    return o.a;
}
b(); // returns 4 now 
```

escaparello 做了类似的事情，只是他确实使用了对象作为`thisValue`传递给匿名函数的对象，而不是传递给`z`. 我认为我的更容易理解，并且更好地利用了`z`闭包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:48:25.537

试试这个

```
function z(){
    return function(){ 
        return 4;
    }
}

function b(){
    var a;
    a = z()();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T18:01:05.370

看起来很奇怪，但你想做这样的事情吗？

```
function z(){
    return function() {
        this.a = 4;
        return this;
    }
}

function b(){
    var obj = { a : 0 };
    var c = z().apply(obj);
    console.log(c.a);
}

b(); 
```

# c# - 在 Windows 8 应用程序中显示动态图片库？

> ID：14201184
> 
> 赞同：0
> 
> 时间：2013-01-07T17:43:04.870
> 
> 标签：c#, windows, xaml, windows-8, windows-applications

我目前正在开发一个简单的 Windows 8 应用程序，作为更复杂的概念的准系统证明。

目前，我有一个文本框和两个按钮。一个按钮允许您选择一个文件夹（它会在我的文本框中填充文件夹路径）。

另一个按钮应该返回当前所选文件夹中前 5 张图像的绝对路径，但我在使用`FileOpenPicker`Win8 应用程序时遇到了一些问题。

我想要做的是，当单击此按钮时，我不想返回图像的前 5 个路径，而是希望以网格格式显示它们，除了向右延伸，更像是向下延伸一个传统的网站。

![截屏](../Images/6639ca1a7d931f6598fdf9ea19558306.png)

到目前为止我所拥有的：

XAML：

```
<StackPanel Grid.Row="2" Margin="120,0,0,0">
    <StackPanel Orientation="Horizontal" Margin="0,20,0,20">
        <TextBox  x:Name="pictureInput" HorizontalAlignment="Left" Grid.Row="2" TextWrapping="Wrap" Text="Select Image..." VerticalAlignment="Top" Width="300" Height="41" FontSize="24"/>
        <Button Content="Browse" HorizontalAlignment="Left" Grid.Row="1" VerticalAlignment="Top" Height="41" Width="147" Click="Browse_Folder_Click"/>
        <TextBlock x:Name="ImgThumbHere" Grid.Column="2" Width="540"/>
        <Button Content="Find Images" HorizontalAlignment="Left" VerticalAlignment="Top" Height="90"  Width="250" Click="Find_Images"/>
    </StackPanel>
</StackPanel> 
```

Xaml.CS：

```
//method to select folder : 
     private async void Browse_Folder_Click(object sender, RoutedEventArgs e)
        {
            string folderPath = "";
            FolderPicker folderPicker = new Windows.Storage.Pickers.FolderPicker();
            // Create the picker object and set options
            folderPicker.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.PicturesLibrary;
            // Users expect to have a filtered view of their folders depending on the scenario.
            // For example, when choosing a documents folder, restrict the filetypes to documents for your application.
            folderPicker.FileTypeFilter.Add("*");

            StorageFolder folder = await folderPicker.PickSingleFolderAsync();
            if (folder != null)
            {
                if (folder.Path != "" && folder.Path != null)
                {
                    folderPath = folder.Path;
                }
                else
                {
                    folderPath = folder.Name;
                }
            }
            else
            {
                throw new Exception("Folder path null.");
            }
            folderInput.Text = folderPath;
        }

//attempt at method to select first 5 images of selected folder : 

    private async void Find_Images(object sender, RoutedEventArgs e)
        {
            string[] picturePath;
            FileOpenPicker picPicker = new Windows.Storage.Pickers.FileOpenPicker();
            picPicker.ViewMode = PickerViewMode.Thumbnail;
            // Create the picker object and set options
            picPicker.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.PicturesLibrary;
            // Users expect to have a filtered view of their folders depending on the scenario.
            // For example, when choosing a documents folder, restrict the filetypes to documents for your application.
            picPicker.FileTypeFilter.Add(".png");
            picPicker.FileTypeFilter.Add(".jpg");
            picPicker.FileTypeFilter.Add(".jpeg");
            picPicker.FileTypeFilter.Add(".gif");
            picPicker.FileTypeFilter.Add(".bmp");

            for (int i = 0; i < 5; i++)
            {
                StorageFile file = picPicker.//What can be called here to return paths ?
                if (file != null)
                {
                    picturePath[i] = file.path;
                }
                else
                {
                    throw new Exception("File path null.");
                }
            }
        } 
```

谁能帮我解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:42:18.263

看看[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh758319(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh758319(v=win.10).aspx)

问题是，根据设计，您仅限于：

*   访问本地存储
*   访问一些著名的存储位置
*   访问一个特别授权的位置

# ios - 如何解析响应 xml 字符串？

> ID：14201187
> 
> 赞同：2
> 
> 时间：2013-01-07T17:43:18.030
> 
> 标签：ios, xml, xcode, json, parsing

```
<?xml version="1.0" encoding="utf-8"?>
  <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" 
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                 xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
      <VideoListResponse xmlns="http://tempuri.org/">
        <VideoListResult>
          {"List":[{"GUID":"127381638172638173","PageNumber":[2,1]}]}
        </VideoListResult>
      </VideoListResponse>
    </soap:Body>
  </soap:Envelope> 
```

这是我的响应 xml 字符串。如何从此 xml 字符串中解析 PageNumber？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T18:25:18.897

这是一个简单的代码片段，您可以使用它来扩展

ViewController.h 文件

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <NSXMLParserDelegate>

@property(retain,nonatomic)NSString *videoListResult;

@property(retain,nonatomic)NSString *currentElement;

@end 
```

ViewController.m 文件

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)viewDidAppear:(BOOL)animated{
    [self parseXML];
}

-(void)parseXML{
    NSString *xmlString = @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\
    <soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\
    <soap:Body>\
    <VideoListResponse xmlns=\"http://tempuri.org/\">\
    <VideoListResult>{\"List\":[{\"GUID\":\"127381638172638173\",\"PageNumber\":[2,1]}]}\
    </VideoListResult>\
    </VideoListResponse>\
    </soap:Body>\
    </soap:Envelope>";

    NSData *xmlData = [xmlString dataUsingEncoding:NSASCIIStringEncoding];

    NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:xmlData];

    [xmlParser setDelegate:self];

    [xmlParser parse];

}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

    NSLog(@"Element started %@",elementName);
    self.currentElement=elementName;

}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

    NSLog(@"Element ended %@",elementName);
    self.currentElement=@"";

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if([self.currentElement isEqualToString:@"VideoListResult"]){
       // NSLog(@"The characters are %@",string);

        id data = [NSJSONSerialization JSONObjectWithData:[string dataUsingEncoding:NSASCIIStringEncoding] options:0 error:nil];

        NSLog(@"The page numbers are %@",[[[data valueForKey:@"List"] objectAtIndex:0] valueForKey:@"PageNumber"]);

    }
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:05:54.703

您想使用[LibXML](http://www.cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)来解析 XML，然后您想使用[SBJSON](https://github.com/stig/json-framework/)来解析 VideoListResult 中包含的 JSON。

# python - 在列表上迭代函数，并附加返回值

> ID：14201190
> 
> 赞同：1
> 
> 时间：2013-01-07T17:43:25.413
> 
> 标签：python, function, counter, average

我有一个 CSV 数据集，40 列乘 800 行。但作为一个例子，让我们说它看起来像这样：

```
Ref  X  Y
11   1  10 
11   2  9
11   3  8
11   4  7
12   5  6 
12   6  5
12   7  4
13   8  3
13   9  2 
```

您将如何定义一个返回每个 Ref 的平均 X 和 Y 值列表的函数？即产生类似的东西：

```
Ref_list = [11,12,13]        
Av_X = [2.5,6,12.5] 
```

我怀疑这是处理它的最佳方法，但我编写了以下代码：

```
my_data = genfromtxt('somedata.csv', delimiter=',',skiprows=1) 

X=[]
for i in my_data:
    X.append(i[0])
    counter=collections.Counter(X)
    keys=np.sort((counter.keys())) #find and sort ref key values

def getdata():
    X , Y = [], []
    for i in my_data:
       if i[0] == refs:
           X.append(i[1])
           Y.append(i[2])
    AV_X=np.average(X)
    AV_Y=np.average(X)
    return AV_X, AV_Y

for refs in keys: # run function over key range 
    AV_X, AV_Y = getdata() 
```

在这里我卡住了，我试图在 ref no 的范围内迭代函数。（键）并附加返回的值。但除了错误之外，我只能获取最后一个 Ref 的值。在键中。

我想有更好的方法可以做到这一点，但我仍然是这个东西的新手。非常感谢您的任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:16:52.587

您可以使用出色的[pandas](http://pandas.pydata.org/pandas-docs/dev/index.html)库来完成这些工作：

```
from StringIO import StringIO
import pandas as pd

df = pd.read_csv(StringIO('your_data'),
        delim_whitespace=True)

df.groupby('Ref').mean()

       X    Y
Ref          
11   2.5  8.5
12   6.0  5.0
13   8.5  2.5 
```

正如您在最后一行中看到的那样，您在问题中计算错误......

您也可以要求中[位数、总和、最大值等。](http://pandas.pydata.org/pandas-docs/dev/basics.html#descriptive-statistics)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:52:32.250

```
>>> A=np.array([[11,1,10,],[11,2,9],[11,3,8],[11,4,7],[12,5,6,],[12,6,5],[12,7,4],[13,8,3],[13,9,2]])
>>> A
array([[11,  1, 10],
       [11,  2,  9],
       [11,  3,  8],
       [11,  4,  7],
       [12,  5,  6],
       [12,  6,  5],
       [12,  7,  4],
       [13,  8,  3],
       [13,  9,  2]])
#Slice the data
>>> A[:,0]
array([11, 11, 11, 11, 12, 12, 12, 13, 13])
>>> refs=np.unique(A[:,0])
#Unique value of all references.
>>> refs
array([11, 12, 13])
#To get the average of each column
>>> np.average(A,axis=0)
array([ 11.77777778,   5\.        ,   6\.        ]) 
```

我想你想要这个吗？

```
#Create a mask
>>> A[:,0]==11
array([ True,  True,  True,  True, False, False, False, False, False], dtype=bool)
>>> Mask=A[:,0]==11
>>> A[Mask]
array([[11,  1, 10],
       [11,  2,  9],
       [11,  3,  8],
       [11,  4,  7]])
>>> np.average(A[Mask],axis=0)
array([ 11\. ,   2.5,   8.5])
>>> np.vstack([np.average(A[A[:,0]==x],axis=0) for x in ref])
array([[ 11\. ,   2.5,   8.5],
       [ 12\. ,   6\. ,   5\. ],
       [ 13\. ,   8.5,   2.5]]) 
```

所以最后你可以拥有：

```
>>> refs=np.unique(A[:,0])
array([11, 12, 13])
>>> np.vstack([np.average(A[A[:,0]==x],axis=0) for x in ref])
array([[ 11\. ,   2.5,   8.5],
       [ 12\. ,   6\. ,   5\. ],
       [ 13\. ,   8.5,   2.5]]) 
```

有一种更好的方法可以通过引入更高维矩阵来避免列表理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:06:22.867

```
import csv, collections, operator
def j(): return dict(X=[], Y=[])
def mean(inlist): return operator.truediv(sum(inlist),len(inlist))
a = collections.defaultdict(j)
# get all the data
for line in csv.DictReader(open(myfile, 'r')):
    a[line['Ref']]['X'].append(line['X'])
    a[line['Ref']]['Y'].append(line['Y'])

# now, for the averages themselves

def get_avgs(inputlist, xy):
    return [mean(a[item][xy]) for item in inputlist] 
```

采用：

```
get_avgs([11,12,13], 'X')
# returns:
[2.5,6,12.5] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T18:09:44.950

如果您愿意，您可以一次性完成所有操作，而无需先进行排序。

```
counts = {}
averages = {}
for line in data_file:
    ref = line[0]
    data = map(float, line[1:])
    if ref not in counts:
        counts[ref] = 1
        averages[ref] = data
    else:
        counts[ref] += 1
        averages[ref] = map(lambda running, new: ((running * (counts[ref] - 1)) + new) / counts[ref], averages[ref], data) 
```

您可以使用`defaultdict`for`counts`和`averages`，但我认为在这种情况下，它并没有真正有助于清晰或简洁。

如果您分两遍进行，它可能会更有效，尽管仍然没有排序。

```
counts = {}
totals = {}
for line in data_file:
    ref = line[0]
    data = map(float, line[1:])
    if ref not in counts:
        counts[ref] = 1
        totals[ref] = data
    else:
        counts[ref] += 1
        totals[ref] = map(lambda running, new: running + new, averages[ref], data)
averages = {ref : map(lambda total: total / counts[ref], totals[ref]) for ref in counts} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T18:01:23.733

对于低于几十万行的任何内容，我什至不会为 numpy 烦恼......为什么不直接使用它：

```
#assuming your data is a list of lists and you want the average of the 2nd column
avg = sum(x[1] for x in mydata) / len(mydata) 
```

当然，如果您只想要匹配某个表达式的所有项目的平均值，请使用列表推导来过滤数据，然后计算结果列表的平均值：

```
my_specific_data = [x[1] for x in mydata if x[0] == refs]
#... avg as above 
```

# javascript - 三.js 多重渲染

> ID：14201191
> 
> 赞同：0
> 
> 时间：2013-01-07T17:43:25.643
> 
> 标签：javascript, three.js, webgl

我目前有一个函数应该在运行时创建一个 3d 行星球体，但我似乎无法让我的函数多次渲染，如果我在一个页面上多次运行它，它只会完全忽略除最后一次调用该函数，我知道我在编写这个代码时做得很糟糕，它是用来作为概念证明的，但如果我不知道为什么我不能得到 3，我不想去优化任何东西同一页面上的不同渲染。

```
function makePlanet(planetContainer, texture){
        $this = this;

    $this.camera; 
    $this.scene;
    $this.sceneAtmosphere;
    $this.renderer;
    $this.primitive; 
    $this.material;
    $this.stats;

    $this.loop = function() {
        var angle = (Math.PI/180*0.1);

        cosRY = Math.cos(angle);
        sinRY = Math.sin(angle);

        var tempz = $this.camera.position.z;
        var tempx = $this.camera.position.x; 

        $this.camera.position.x = (tempx*cosRY)+(tempz*sinRY);
        $this.camera.position.z = (tempx*-sinRY)+(tempz*cosRY);

        $this.renderer.clear();
        $this.renderer.render( $this.scene, $this.camera );
        $this.renderer.render( $this.sceneAtmosphere, $this.camera );

        setTimeout(function(){
            $this.loop();
        }, 1000 / 60);
    }

        $this.Shaders = {

        'earth' : {

            uniforms: {

                "texture": { type: "t", value: 0, texture: null }

            },

            vertex_shader: [

                "varying vec3 vNormal;",
                "varying vec2 vUv;",

                "void main() {",

                    "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",

                    "vNormal = normalize( normalMatrix * normal );",
                    "vUv = uv;",

                "}"

            ].join("\n"),

            fragment_shader: [

                "uniform sampler2D texture;",

                "varying vec3 vNormal;",
                "varying vec2 vUv;",

                "void main() {",

                    "vec3 diffuse = texture2D( texture, vUv ).xyz;",
                    "float intensity = 1.10 - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) );",
                    "vec3 atmosphere = vec3( 0.75, 0.75, 2.0 ) * pow( intensity, 3.0 );",

                    "gl_FragColor = vec4( diffuse + atmosphere, 1.0 );",

                "}"

            ].join("\n")

        },

        'atmosphere' : {

            uniforms: {},

            vertex_shader: [

                "varying vec3 vNormal;",

                "void main() {",

                    "vNormal = normalize( normalMatrix * normal );",
                    "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",

                "}"

            ].join("\n"),

            fragment_shader: [

                "varying vec3 vNormal;",

                "void main() {",
                    // First float seems to affect opacity, and the last float affects size/strenth of the gradient
                    "float intensity = pow( 0.4 - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), 5.0 );",
                    // This seems to just be a simple colour value
                    "gl_FragColor = vec4( 0.5, 1.0, 1.0, 0.8 ) * intensity;",

                "}"

            ].join("\n")

        }

    };

    $this.camera = new THREE.Camera(30, $(planetContainer).width() / $(planetContainer).height(), 1, 100000);
    $this.camera.position.z = 1000;

    $this.scene = new THREE.Scene();
    $this.sceneAtmosphere = new THREE.Scene();

    $this.texture = ImageUtils.loadTexture('img/planets/textures/'+texture, {}, function() {
        $this.renderer.render($this.scene);
    });
    $this.texture.needsUpdate = true;

    $this.material = new THREE.MeshBasicMaterial( { map: $this.texture });
    $this.geom = new Sphere( 200, 50, 50);

    $this.primitive = new THREE.Mesh($this.geom, $this.material );

    $this.scene.addObject( $this.primitive );

// Atmosphere
    $this.shader = $this.Shaders[ 'atmosphere' ];
    $this.uniforms = Uniforms.clone( $this.shader.uniforms );

    $this.material = new THREE.MeshShaderMaterial( {

        uniforms: $this.uniforms,
        vertex_shader: $this.shader.vertex_shader,
        fragment_shader: $this.shader.fragment_shader

    } );

    $this.primitive = new THREE.Mesh( $this.geom, $this.material );
    $this.primitive.scale.x = $this.primitive.scale.y = $this.primitive.scale.z = 1.12;
    $this.primitive.flipSided = true;
    $this.sceneAtmosphere.addObject( $this.primitive );

    $this.renderer = new THREE.WebGLRenderer();
    $this.renderer.autoClear = false;
    $this.renderer.setClearColorHex( 0x000000, 1.0 );
    $this.renderer.setSize($(planetContainer).width(), $(planetContainer).height());

    $(planetContainer).append($this.renderer.domElement);

    setTimeout(function(){
        $this.loop();
    }, 1000 / 60);
} 
```

谁能解释为什么我不能在一个页面上多次使用此功能？

当我在任何页面上多次运行该函数时，我只看到 1 个 3D 对象，其他应该渲染对象的地方没有出现，我认为我有 3 个部分，每个部分意味着渲染一个不同的星球，如果我运行这个函数用不同的参数 3 次，我最后一次运行这个函数是唯一显示的，其他两个地方什么都不显示，只是一个空的地方。

另外，我已经检查过，如果我删除了第三个，第二个会显示，但不会显示第一个，所以参数不正确不是问题，我相信这是三个.js 不想创建更多的问题比渲染器的一个实例。

**使用示例**

```
$(document).ready(function(){
    var goldilocks = new makePlanet('.goldilocksplanet .planetRender','planet_Jinx1200.png');
    var ocean = new makePlanet('.oceanplanet .planetRender','planet_serendip_1600.jpg');
    var sulfur = new makePlanet('.sulfurplanet .planetRender','planet_Telos1200.png');
}); 
```

* * *

下面是一个网页示例，其中包含 3 个不同的渲染，它们不在同一个场景中，或者我会在一个场景中制作它们，它们被认为是网站中的不同块，这只是一个示例，是绝不是该功能需要工作的唯一方式，但该功能确实需要将每个行星视为自己的场景，我们不能将它们全部放在一个场景中。

[http://i.stack.imgur.com/tooOA.jpg](http://i.stack.imgur.com/tooOA.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T04:44:44.097

所以我想出了自己的问题，显然是因为我在函数中使用了全局变量而不是局部变量。我所要做的就是改变

```
$this = this; 
```

到

```
var $this = this; 
```

这解决了我所有的问题……有时我觉得自己像个白痴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:56:43.140

您可能需要考虑更换：

```
 setTimeout(function(){
            $this.loop();
        }, 1000 / 60); 
```

部分：

```
 function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
    } 
```

主要原因是`requestAnimationFrame`当浏览器窗口不可见时不会浪费渲染能力。

# python - 这个 import_umath 函数是什么？

> ID：14201192
> 
> 赞同：17
> 
> 时间：2013-01-07T17:43:27.370
> 
> 标签：python, numpy, cython

在编译一堆与 Numpy 接口的 Cython 生成的 C 文件时，我收到警告：

```
/usr/lib/pymodules/python2.7/numpy/core/include/numpy/__ufunc_api.h:226:1: warning: ‘_import_umath’ defined but not used [-Wunused-function] 
```

我似乎无法摆脱它。认为这可能类似于`np.import_array()`，它消除了相关警告（实际上是使用 Numpy C API 所[必需](http://wiki.cython.org/tutorials/numpy#C-APIinitalization)`np.import_umath()`的），我在顶层尝试过，但警告仍然存在。我该如何摆脱它？

（Cython 0.17.4，Numpy 1.6.2。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T16:36:29.047

There's a [thread on the Cython mailing list](http://mail.python.org/pipermail//cython-devel/2012-March/002137.html) that discusses this a little bit. I believe that the discussion was concerning the Cython test suite, but I think the same ideas can be applied to generated files.

In essence, the issue involved a hack that was done in order to avoid C compiler warnings about unused functions.

The [code file in question](https://github.com/cython/cython/blob/master/tests/run/numpy_common.pxi) currently looks like this:

```
cdef extern from *:
   bint FALSE "0"
   void import_array()
#   void import_umath()

if FALSE:
    import_array()
#    import_umath() 
```

In the past, the `import_umath()` portions were uncommented, but as it turns out, this was causing errors when building in C++ mode. So it appears that [it was decided](http://mail.python.org/pipermail//cython-devel/2012-March/002156.html) that a compiler warning is much better than a broken build.

In short, it seems this particular warning exists for the sake of C++ compatibility, and can be safely ignored. I suppose if you *really* dislike it, and if you're building in C mode, then you could try to do the same hack, by importing a similar `.pxi` file with a call to `import_umath()` inside of your Cython code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:51:40.867

好吧，它说的是代码中有一个函数，它已声明但未使用，因此它可能已过时且不应该存在。因为它只是一个警告，而且不是很危险（除非你会留下很多这样的功能，破坏代码，增加内存使用，二进制大小等等）我会简单地忽略它 - 很可能它不值得你花时间;)

# c# - WPF在画布上拖动预览

> ID：14201198
> 
> 赞同：0
> 
> 时间：2013-01-07T17:43:43.810
> 
> 标签：c#, wpf, drag-and-drop

我将 Canvas 与 ObsarvableCollection 绑定：

```
<ItemsControl ItemsSource="{Binding Path=MapElements}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Canvas Width="{Binding ElementName=mapWidth, Path=Text}"
                                    Height="{Binding ElementName=mapHeight, Path=Text}"
                                    Background="WhiteSmoke"
                                    AllowDrop="True"
                                    Margin="10,10,10,10"
                                    ClipToBounds="True"
                                    Drop="Mapa_Drop_1"
                                    DragOver="Mapa_DragOver_1"
                                    DragEnter="Mapa_DragEnter_1"
                                    Name="Mapa">
                            </Canvas>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Image Source="{Binding Image}"

                                   Margin="0,0,5,0" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.ItemContainerStyle>
                        <Style>
                            <Setter Property="Canvas.Top"
                                    Value="{Binding Y}" />
                            <Setter Property="Canvas.Left"
                                    Value="{Binding X}" />
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                </ItemsControl> 
```

我实现了将图像拖放到其中。一切正常，但我想在画布上拖动对象时添加预览。我可以在拖动时向我的 observablecollection 添加一个对象，但是如果有人不会将对象放在画布上怎么办（它应该从我的 observablecollection 中删除）。我该如何实施？

# objective-c - 前向声明和头文件的问题

> ID：14201199
> 
> 赞同：3
> 
> 时间：2013-01-07T17:43:43.963
> 
> 标签：objective-c, header-files, forward-declaration

为了缩短构建时间并尽可能保持代码简洁，我一直在头文件中使用前向声明并将`#import`语句放在实现文件中。到目前为止，这一直很好，但是我遇到了一个问题。假设我有一个`MyClass`返回 class 对象的类`Widget`，例如：

```
@interface MyClass : NSObject
-(Widget*)widgetWithName:(NSString*)name;
@end 
```

假设`Widget`有一个方法`-(void)arbitraryMethod;`

现在，假设我正在实现一个类，该类导入`MyClass.h`、实例化一个`MyClass`对象、执行`widgetWithName:`，然后尝试将`arbitraryMethod`消息发送到返回的`Widget`，我得到错误`receiver type "Widget" for instance message is a forward declaration`。所以，我必须继续导入`Widget.h`头文件来修复错误。

当然，当我返回`Foundation`课程时，这从来都不是问题，因为`#import <Foundation/Foundation.h>`在`Prefix.pch`.

最佳做法是什么？我的直觉是，如果我要返回一个类或将该类用作公共方法中的参数，则头文件应该包含在我的头文件中。否则，如果我有一个类在面向公众的方法中使用了十个不同的非基础类，我的用户每次想要使用该方法时都必须寻找并将新的头文件导入到他们的项目中。

这是正确的还是有更好的模式可以使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:48:34.323

您不能跳过在您的标头中导入标头，直到您不为您在返回类型中使用的类导入标头。我假设你会在这种情况下使用`@class Widget;`in的标题。`MyClass`您不能在其类型仅向前声明的对象上调用方法，`@class`因为正如我记得[bbum 所说](https://stackoverflow.com/questions/10019961/objective-c-class-directive-before-interface)，编译器没有必要的数据。除了通过使用“它存在”之外，您基本上没有告诉它该类的任何内容`@class`，它通常不仅仅用于破坏循环引用。我认为尽可能干净的是为您在实现中内部使用的类导入标头，但是，正如您所说，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:56:00.973

你做的一切都是正确的。

`MyClass.h`是的，您需要`Widget.h`在其他类实现文件中都导入。您需要导入`Widget.h`，因为*您实际上是在使用*Widget 类——通过调用对象指针类型的方法`Widget *`。在实现文件中，您应该为实际使用的每个类导入标头；您永远不必关心什么标头`MyClass.h`导入或不导入（它应该尽可能少地导入，就像您所做的那样）。

# ios - NSManagedObject 上的属性为空

> ID：14201204
> 
> 赞同：3
> 
> 时间：2013-01-07T17:43:56.863
> 
> 标签：ios, ipad, core-data, magicalrecord

我在 nil 托管对象上下文中创建 NSManagedObject 的实例，因为我不希望保存对象，除非用户稍后选择。

我通过使用上下文创建实体描述然后在没有上下文的情况下创建对象本身来做到这一点。这如下所示。

```
NZVideo *video = nil;
if ([[tempVideo objectForKey:_kResponseVideoTypeKey] isEqualToString:_kVideoTypeYouTube] == YES)
{
    NSEntityDescription *entityDescription = [NZYouTubeVideo entityDescriptionInContext:[NSManagedObjectContext contextForCurrentThread]];
    video = (NZVideo *)[[NSManagedObject alloc] initWithEntity:entityDescription insertIntoManagedObjectContext:nil];
    [(NZYouTubeVideo *)video setVideoId:[media objectForKey:_kResponseVideoIdKey]];
}
else if ([[tempVideo objectForKey:_kResponseVideoTypeKey] isEqualToString:_kVideoTypeS3] == YES)
{
    NSEntityDescription *entityDescription = [NZS3Video entityDescriptionInContext:[NSManagedObjectContext contextForCurrentThread]];
    video = (NZVideo *)[[NSManagedObject alloc] initWithEntity:entityDescription insertIntoManagedObjectContext:nil];
    [(NZS3Video *)video setAbsoluteVideoUrl:[media objectForKey:_kResponseVideoUrlKey]];
}

[video setTitle:title];
[video setSummary:summary];
[video setDurationValue:duration];

if (tempThumbnails != nil)
{
    NSString *smallThumbnail = [tempThumbnails objectForKey:_kResponseVideoThumbnailSmallKey];

    if (smallThumbnail != nil)
    {
        NSEntityDescription *entityDescription = [NZThumbnail entityDescriptionInContext:[NSManagedObjectContext contextForCurrentThread]];
        NZThumbnail *thumbnail = (NZThumbnail *)[[NSManagedObject alloc] initWithEntity:entityDescription insertIntoManagedObjectContext:nil];
        [thumbnail setAbsoluteImageUrl:smallThumbnail];
        [thumbnail setAbsoluteSizeValue:NZThumbnailSizeSmall];
        [video addThumbnailsObject:thumbnail];
    }
}

if (video != nil)
{
    [videos addObject:video];
} 
```

然后，当我想保存对象时，我将它们添加到托管对象上下文中。我还添加了该对象与之有关系的所有对象。

```
[MagicalRecord saveUsingCurrentThreadContextWithBlock:^(NSManagedObjectContext *context) {
    id _video = nil;
    if ([video isKindOfClass:[NZYouTubeVideo class]])
    {
        _video = (NZYouTubeVideo *)video;
    }
    else if ([video isKindOfClass:[NZS3Video class]])
    {
        _video = (NZS3Video *)video;
    }

    if (((NSManagedObject *)_video).managedObjectContext == nil)
    {
        [context insertObject:_video];
    }

    for (NZThumbnail *thumbnail in ((NZVideo *)_video).thumbnails)
    {
        [context insertObject:thumbnail];
    }

    [playlist addVideosObject:video];
}
completion:^(BOOL success, NSError *error) {
    if (error != nil)
    {
        DDLogVerbose(@"%@", error);
    }
}]; 
```

但是，当重新启动应用程序时，对象已添加到 Core Data，但对象上的所有属性都是`null`.

有谁知道为什么会发生这种情况以及如何让它存储属性？如前所述，对象存在。它们是持久的，但所有属性都是空的。

我认为这没有什么区别，但我使用[MagicalRecord](https://github.com/magicalpanda/MagicalRecord)来创建、保存和检索实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:13:46.730

不要这样做。我以前回答过同样的问题:-)

您应该：

保存所有必需的值和变量，然后当用户按下“保存”时创建并插入托管对象并保存上下文。

或者：

创建对象并将其插入到上下文中。保留对对象的引用并在用户输入信息时更新它们。如果用户按下保存，则保存上下文。如果用户按下取消，那么只需删除该对象。

您不应该在不将其插入上下文的情况下创建托管对象。这真的没有意义。

另请参阅此答案[iPhone Core Data: Initializing Managed Object without a context](https://stackoverflow.com/questions/1488070/iphone-core-data-initializing-managed-object-without-a-context)

# css - 编写超大级联样式表 (CSS) 文件的最佳方法是什么

> ID：14201208
> 
> 赞同：4
> 
> 时间：2013-01-07T17:44:05.590
> 
> 标签：css, asp.net-mvc, asp.net-mvc-3, web-optimization

我们的网站有一些非常复杂的样式，我们希望确保 CSS 不会变得难以管理。

*在生产环境中，我们的理想似乎是通过*公共 CDN 服务器提供尽可能少的外部 CSS 文件（理想情况下是 1 个？） ，并且可能是最小化版本。

在开发中，我们的理想似乎是多个 CSS 文件；每个 CSS 文件将只包含特定概念的样式，例如选项卡或日期时间选择器（只是组成这些，但你明白了）。拥有多个文件可以让开发人员/设计人员快速找到感兴趣的 CSS 类，并且我们也减少了文件争用问题，因为每个人都在更新单独的文件。

我很想保留单个文件以用于开发目的，但有一个外部应用程序可以连接/缩小用于生产的 CSS 文件。但是，我确信这不是第一个面临这些问题的网站，所以我很想听听其他人是如何解决这个问题的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:47:34.373

我强烈推荐 Compass，它是一个支持 Sass 的开源创作框架，除许多其他功能外，它还提供了使用构建过程连接（并缩小！）用于生产的单独文件的能力。

[http://compass-style.org/](http://compass-style.org/)

这是[关于 Compass 的一些好处的简短博客条目](http://www.johng.co.uk/2010/05/06/why-everyone-should-use-compass-instead-of-pure-css/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:29:23.297

ASP.NET 4.5 支持捆绑和缩小。您可以将整个 CSS 文件夹定义为捆绑并缩小到单个文件中。

[http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)

在调试（即开发）时，它不会被缩小，对于产品发布版本，您将获得缩小

# python - 无法初始化 Elixir

> ID：14201210
> 
> 赞同：10
> 
> 时间：2013-01-07T17:44:07.560
> 
> 标签：python, mysql, sqlalchemy, python-elixir

我从 Elixir 和 SQL Alchemy 开始。我已经创建了一个与 Mysql 数据库连接的 python 文件，但是一旦我使用 python 执行，我就会收到以下错误：

```
root@raspberrypi:/Python/mainFlask/yonkiPOPS# python yonki.py
Traceback (most recent call last):
  File "yonki.py", line 1, in <module>
    from elixir import metadata, Entity, Field
  File "/usr/local/lib/python2.7/dist-packages/Elixir-0.7.1-py2.7.egg/elixir/__init__.py", line 29, in <module>
    from elixir.entity import Entity, EntityBase, EntityMeta, EntityDescriptor, \
  File "/usr/local/lib/python2.7/dist-packages/Elixir-0.7.1-py2.7.egg/elixir/entity.py", line 17, in <module>
    from sqlalchemy.orm import MapperExtension, mapper, object_session, \
ImportError: cannot import name ScopedSession 
```

我一直在寻找它，但我找不到原因。这是 yonki.py 文件：

```
 from elixir import metadata, Entity, Field
from elixir import Unicode, UnicodeText   
from elixir import *
class User(Entity): 
        username = Field(String(64))

metadata.bind = 'mysql://root:nomasandroid42@localhost/yonkiPOPS'
session.bind.echo = True
setup_all()
create_all() 
```

我认为这可能是由于未安装所需的模块，但我不知道是哪一个。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T07:29:15.610

Elixir 0.7.1 似乎与最新版本的 SQLalchemy 0.8 不兼容。你可以解决这个问题

```
sudo pip install SQLAlchemy==0.7.8 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-29T03:25:42.620

只需打开 ./elixir/entity.py，找到如下的导入行：

```
from sqlalchemy.orm import ScopedSession, \ 
```

然后将其调整为：

```
from sqlalchemy.orm import scoped_session as ScopedSession, \ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-27T18:45:58.633

好像 sqlalchemy 0.8 改变了 ScopedSession 的位置

[http://elixir.ematia.de/trac/ticket/121](http://elixir.ematia.de/trac/ticket/121)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-01T09:39:12.083

如果您仍然无法从存储库更新您的库，或者没有 root 访问权限来更改文件，只需在您的文件中使用它：

```
import sqlalchemy.orm
sqlalchemy.orm.ScopedSession = sqlalchemy.orm.scoped_session 
```

前

```
from elixir import * 
```

# objective-c - iOS 访问核心数据实体，同时在后台更新它们

> ID：14201212
> 
> 赞同：1
> 
> 时间：2013-01-07T17:44:18.897
> 
> 标签：objective-c, ios, core-data, concurrency, magicalrecord

在我的 iOS 应用程序中，当应用程序加载以检查我的核心数据数据库中各种表（实体）的更新时，我正在访问一个 Web 服务。

我在后台线程中执行此操作，因此用户仍然可以与应用程序交互

我遇到的问题是，当我尝试加载包含我从 Core Data 访问的实体表的视图时 - 应用程序变得无响应并滞后，直到后台更新完成。

例如，如果我在后台更新这些“任务”时触摸以查看“任务”表，是否有可能获得无延迟的体验？

我正在使用 MagicalRecord 并在一个`saveInBackgroundWithBlock`块中执行我的创建/更新

```
 [MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext){      
        //UserTasks
        if([viewName isEqualToString:[[NSString stringWithFormat:@"UserTask_vw_iSales"] lowercaseString]])
        {
            //returns a UserTask or nil if one does not exist
            UserTask *oldUserTask = [UserTask doesExist:[record valueForKey:@"JSONData"]];

            if(oldUserTask)
            {
                NSLog(@"deleting old UserTask");

                [UserTask MR_deleteAllMatchingPredicate:[NSPredicate predicateWithFormat:@"userTaskUID == %@", oldUserTask.userTaskUID] inContext:localContext];
            }

            //create new one 
            UserTask *utt = [UserTask MR_createInContext:localContext];
            [utt initWithJSONSting:[record valueForKey:@"JSONData"]];

            NSLog(@"Creating UserTaskType: %@", utt.userTaskUID);
        }
 }]; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:14:59.953

我最终没有使用 MagicalRecord 来获得我正在寻找的行为——我关注了这篇文章：

[https://stackoverflow.com/a/11814957/480415](https://stackoverflow.com/a/11814957/480415)

现在，在后台更新实体时，我的 UI 没有被锁定。

# java - 整数类的内部工作

> ID：14201222
> 
> 赞同：2
> 
> 时间：2013-01-07T17:45:06.637
> 
> 标签：java, bytecode

我想知道一些`Integer`班级的内部工作。

例如我们可以写：

```
Integer num = 9; 
```

我想知道`Integer`在这种情况下如何创建一个类，因为我们还没有创建任何`Object`. 它在内部如何运作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T17:46:34.097

这称为自动装箱，这是 Java 5 中引入的一项功能。Java 编译器将您的语句转换为：

```
Integer num = Integer.valueOf(9); 
```

您可以在此处阅读有关自动装箱的更多信息：

*   [http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)
*   [http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:47:24.547

这个概念称为自动装箱。编译器会将您的代码更改为

```
Integer num = Integer.valueOf(9); 
```

并从那里继续编译...

# php - 登录模态窗口提交按钮php

> ID：14201237
> 
> 赞同：0
> 
> 时间：2013-01-07T17:46:35.257
> 
> 标签：php, jquery

我有 index.php 里面有登录链接的模态窗口。模态窗口是用 php 在 mysql 中检查用户名和密码。但是当我点击提交按钮 - 没有输入用户名或密码时，它没有显示 php 错误 - “您需要输入用户名”或“您需要输入密码”......何时刷新 index.php，我点击了登录链接正在显示...如何在第一次单击提交按钮时解决此问题正在检查 mysql php 错误？

```
 <div id="basic-modal-content">
            <div id="winsign">

          <form action="" method="post" onSubmit="validate();"> 

           <?php

       include 'core/init.php';

       if (empty($_POST) === false) {
           $username = $_POST['username'];
           $password = $_POST['password'];

       if (empty($username) === true || empty($password) === true) {
        $errors[]= 'You need to enter a username and password';
               } else if (user_exists($username) === false) {
        $errors[]= 'We cant\'t find username. Have you registered?';
        } else if (user_active($username) === false) {
        $errors[]= 'You haven\'t acticated your account!';  
            } else {
        $login = login($username, $password);
        if ($login === false) {
            $errors[] = 'That username/password combination is incorrect';      
            } else {
            $_SESSION['user_id'] = $login;  
            header('Location: sign_in.php');
            exit();
            }
        } 
            print_r($errors);
    }
       ?>

            <span id="tpos">Username:</span><br>
            <input type="text" name="username" class="sbutton" id="modalbox" placeholder="Username">
            <br><br><span id="tpos">Password:</span>
            <br><input type="password" name="password" class="sbutton" id="modalbox" placeholder="Password">
            <br><br><input type="checkbox" name="checkbox" class="cbutton"><span id="ttext">Remember me</span>
            <br><input type="submit" value="Sign In" name="signin" id="bsubmit">
            </input>
            </form> 
```

那是在模态窗口中，当我单击提交按钮时，第一次单击时未检查 php 错误并重新加载 index.php 当我第二次单击时是否有错误，但在第一次单击时未显示错误并重新加载页面索引...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:02:04.450

您应该首先处理信息并使用empty()检查它是否为空。

所以像这样

```
 $error=0; $error_msg =''; 
    $username = $_POST['username'];  
    $password = $_POST['password'];

    if($_POST['submit'])
{
    if(empty($username)){ $error = 1; $error_msg .= //your error msg}
    if(empty($password)){ $error = 1; $error_msg .= //your error msg}
    if($error == 0){//do your login stuff}
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:04:13.193

我认为您正在为您的表单寻找 onSubmit 。

尝试这样的事情：

```
<form name="formname" action="index.php" method="post" onSubmit="validate();">
</form> 
```

# multithreading - Delphi 线程的速度改进

> ID：14201239
> 
> 赞同：2
> 
> 时间：2013-01-07T17:46:40.363
> 
> 标签：multithreading, performance, delphi, delphi-xe2, complexity-theory

我的问题是关于应用程序改进的类型/种类。我想提高我的线程速度（我不能提高线程的复杂性）。我的问题是，如果不是整数/longint 作为函数的参数，我将使用字节作为类型，这会改变/提高我的速度吗？

不是发送数组，而是发送指向这些数组的指针，这种技术会提高我的速度吗？

我可以使用哪些其他技巧来提高线程的速度（复杂性除外）

上面的代码是我使用的简化。

```
Type TArray = array of integer;
Type PArray = ^TArray;

Procedure TMyThread.ProcessFunction(iNr:integer; vArray:PArray);
begin
   vArray^[iNr-2]:=5;
   //......
end;

Procedure TMyThread.Execute;
var vArray:TArray;
    i,iNr:integer;
begin
   Randomize;
   While Not Terminated do
   begin
       iNr:=Random(240);
       SetLength(vArray,iNr);
       for i:=0 to iNr-1 do
          vArray[i]:=i+2

       ProcessFunction(iNr,@Array);
   end;
end; 
```

有什么方法可以改善这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T19:44:42.953

目前尚不清楚所谓的性能问题在哪里，因为我们不知道 ProcessFunction 实际做了什么，但一种可能性是性能被 vArray 的（重新）分配杀死。如果是这种情况，您可能可以通过仅预分配一个 240 数组来加快速度，然后将其连同您在每次迭代中使用的实际大小一起传入。正如 David Heffernan 指出的那样，由于 TArray 已经是一个引用类型，因此没有必要使用显式指针。

# tcl - 将一系列列表附加到另一个列表

> ID：14201241
> 
> 赞同：1
> 
> 时间：2013-01-07T17:46:46.803
> 
> 标签：tcl

```
set mac_list ""
set new_mac_list "1111.1111.1111 2222.2222.2222 3333.3333.3333 4444.4444.4444"
lappend mac_list [lrange new_mac_list $i end] 
```

在我的脚本中，我的值始终为 3 这个概念是我总是想要我的 mac_list 中 lindex 3 的 new_mac_list 列表的 mac_address

当我在 new_mac_list 中有 4 个 MAC 地址时它工作正常，但是当 new_mac_list 的 MAC 地址小于 4 mac_list..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:51:35.393

这就是附加多个元素的方式（tcl8.5+）：

```
lappend mac_list {*}[lrange $new_mac_list $i end] 
```

较旧的 TCL 需要

```
set mac_list [concat $mac_list [lrange $new_mac_list $i end]] 
```

# php - 如何将日期插入数据库？

> ID：14201242
> 
> 赞同：0
> 
> 时间：2013-01-07T17:46:50.460
> 
> 标签：php, mysql, date

我已经查找了如何做到这一点，但我似乎无法做到这一点。请告诉我如何将月、日和年组合成一个日期以插入 mysql 数据库。我的问题实际上并不是将信息发送到数据库。我的问题是我将 3 个单独的字段（月、日、年）发送到数据库。请告诉我在哪里放置您推荐的代码。这是我的代码：

```
<?php
function register_user($register_data) {
array_walk($register_data, 'array_sanitize');

$fields = '`' . implode('`, `', array_keys($register_data)) . '`';
$data = '\'' . implode('\', \'', $register_data) . '\'';

mysql_query("INSER INTO `users` ($fields) VALUES ($data)");
}
?>

<form action="" method="post">
    <ul>
        <li>
            <select name="month">
                <option value="01">January</option>
                //all the other month options
            </select>
            <select name="day">
                <option value="01">1</option>
                //all the other days
            </select
            <select name="year">
                <option value="2013">2013</option>
                //more year options
            </select>
        </li>    
        <li>
    <input type="submit" name="registrationform" value="Sign up">
    </li>
    </ul>
</form>

<?php
if (empty($_POST) === false && empty($errors) === true){
    $register_data = array(
        'Month'     => $_POST['month'],
        'Day'       => $_POST['day'],
        'Year'      => $_POST['year']
    );

    register_user($register_data);
    //redirect
    exit();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:50:52.897

Make your birthday column a DATE or DATETIME field in MySQL, then insert it like so:

```
$_POST['year'] . "-" . $_POST['month'] . "-" . $_POST['day'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:51:22.117

You take the year, month, and then day (in that order) and between each you place a hyphen (ASCII character # 45). And that is it.

Take care you have 4 numbers for year, two numbers for month and two numbers for day (also digits called are these numbers).

It is important that your outcome looks like in the following examples:

```
October 3rd 2011    :=    2011-10-03
1st Feb '13         :=    2013-02-01 
```

Also take care you don't have some date that does not exists, like 31\. Of November or something similar.

And:

[**Please, don't use `mysql_*` functions in new code**](https://stackoverflow.com/q/12859942/). They are no longer maintained [and are officially deprecated](https://wiki.php.net/rfc/mysql_deprecation). See the [**red box**](https://www.php.net/manual/en/function.mysql-connect.php)? Learn about [*prepared statements*](https://en.wikipedia.org/wiki/Prepared_statement) instead, and use [PDO](http://php.net/pdo), or [MySQLi](http://php.net/mysqli) - [this article](https://php.net/manual/en/mysqlinfo.api.choosing.php) will help you decide which. If you choose PDO, [here is a good tutorial](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:51:43.803

我会像这样连接生日字段：

```
$birthday = $_POST['year'] . '-' . $_POST['month'] . '-' . $_POST['day']; 
```

然后你可以插入它：

```
mysql_query("INSERT INTO users (birthday) VALUES ('" . $birthday . "')"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T17:52:27.550

你有很多方法..

`int`您可以将它们拆分为类型为..的数据库中的三个不同字段。

或者

您可以将该字段用作日期

```
CREATE TABLE `date` (
  `dp_date` date NOT NULL default '0000-00-00',
) ;

$query_manual = "INSERT INTO date(dp_date)
VALUES ($_POST['year']-$_POST['month']-$_POST['day']')"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T17:55:04.303

```
<?php
function register_user($register_data) {
$register_data['birthday'] = $register_data['year'] . '-' . $register_data['month'] . '-' . $register_data['day'];
unset($register_data['year']);
unset($register_data['month']);
unset($register_data['day']);
array_walk($register_data, 'array_sanitize');

$fields = '`' . implode('`, `', array_keys($register_data)) . '`';
$data = '\'' . implode('\', \'', $register_data) . '\'';

mysql_query("INSER INTO `users` ($fields) VALUES ($data)");
}
?> 
```

you will then need a column in your table called 'birthday' and it should be of the type 'DATE'

# jquery - MVC3 表单 jQuery PartialView

> ID：14201243
> 
> 赞同：0
> 
> 时间：2013-01-07T17:46:51.927
> 
> 标签：jquery, ajax, asp.net-mvc-3, c#-4.0

有点落后于问题以及我正在努力做的事情。我基本上有一个表格，可以在我的 viewModel 中放置数据。问题是，假设客户公司在一个地址，但联系人在另一个地址我希望用户能够点击他们正在填写的主表单上的单选按钮，输入联系人不同的地址和将其保存到我在主窗体上的模型中。

我有一个控制器，它执行以下操作：

```
 [HttpPost]
    public ActionResult Edit(ClientModel client)
    {
        Domain.Data.EFDbContext context = new Domain.Data.EFDbContext();
        if (ModelState.IsValid)
        {
            client.ClientAddress.AddressTypeId = client.AddressType.AddressTypeId;
            client.Contact.ContactTypeId = client.ContactType.ContactTypeID;

            //Add the address to the ContactAddress table and Contact ID
            if (client.ContactAddress.AddressLine1 != null)
            {
                client.Contact.ContactAddress.Add(client.ContactAddress);
                context.Contacts.Add(client.Contact);
            }
            else
            {
                client.ContactAddress = client.ClientAddress;
            }
            client.Company.Address.Add(client.ContactAddress);
            client.Company.CompanyContact.Add(client.Contact);

            //The attachment to Client is created on a Trigger in the database when a new Company is added
            context.Companies.Add(client.Company);
            context.SaveChanges();

            return RedirectToAction("Index");
        }
        else
        {
            return View(client);
        }
    } 
```

这工作正常，它更新我的数据库表并保存结果，但我已经添加到 client.ContactAddress 部分，所以如果它知道我的表单中的一个字段是空的，它只会将公司地址分配给客户所在的位置并保存在相关领域。（但这不是问题，只是背景）

我试图在控制器中创建一个 partialView

```
 [HttpGet]
    public PartialViewResult AddressPartial()
    {
        return PartialView("_AddressPartial");
    } 
```

在我的edit.aspx中我有

```
$(document).ready(function () {
    $('#Not_Contact_Address').click(function (e) {
        if ($('#Not_Contact_Address').is(':checked')) {

            $('#dialog').dialog({
                autoOpen: false,
                width: 400,
                resizable: false,
                title: 'Add Address',
                modal: true,
                open: function(event, ui) {
                //Load the AddressPartial action which will return 
                // the partial view _AddressPartial
                   $(this).load("@Url.Action("AddressPartial")");
                },
                buttons: {
                    "Save": function() {
                        $('#dialog').dialog('close');
                    },
                    "Cancel": function () {
                        $('#dialog').dialog('close');
                    }
                }
            });

            $('#dialog').dialog('open');
        }
    });
}); 
```

基本上，用户选择一个单选按钮，弹出一个添加地址对话框，我希望用户添加该信息，然后将该信息显示在所选单选按钮下方的表单上，然后他们可以继续，一旦完成点击提交按钮并立即将所有信息保存到数据库中。（如上面的控制器所示）。

```
<fieldset>
    <legend>Main Contact Details</legend>
    <div class="editor-label">
        @Html.LabelFor(model => model.Contact.Title)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Contact.Title)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Contact.FirstName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Contact.FirstName)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Contact.LastName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Contact.LastName)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.Contact.Email)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Contact.Email)
    </div>
     <div class="editor-label">
        @Html.LabelFor(model => model.Contact.Phone)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Contact.Phone)
    </div>
     <div class="editor-label">
        @Html.LabelFor(model => model.Contact.Mobile)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Contact.Mobile)
    </div>
    <div class="editor-label">
         @Html.LabelFor(model => model.ContactType.Name)
    </div>
    <div class="editor-field">
         @Html.DropDownListFor(model => model.ContactType.ContactTypeID, Model.ContactSelectList, " --- Select One --- ", null)
    </div>  

    <b>Contact Address</b> same as <b>Company Address</b> @Html.RadioButton("Not_Contact_Address", "Yes") Yes @Html.RadioButton("Not_Contact_Address", "No") No
</fieldset> 
```

**问题**

我可以打开对话框，这很好，但我无法取消对话框，我单击右上角的 x，然后这会清空我的整个表单并留下空白页，而不是我想要的。

拥有表单的最佳方式是什么，以便用户可以在表单上输入信息，在页面内显示另一个表单以添加地址并将其保存到我拥有的 viewModel 中，然后允许用户继续。

***更新***

```
function openProductEditDialog() {

    $("#ProductDetailsDialogDiv").html("");

    $.ajax({
        type: "GET",
        url: encodeURI('@Url.Action("AddressPartial", "Home")'),
        cache: false,
        dataType: 'html',
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            $("#ProductEditDialogDiv").html(XMLHttpRequest.responseText);
        },
        success: function (data, textStatus, XMLHttpRequest) {
            $("#ProductEditDialogDiv").html(data);
        },
        complete: function (XMLHttpRequest, textStatus) {

            $('#ProductEditDialogDiv').dialog({
                width: '500px',
                modal: true
            });
        }
    });
} 
```

这使我现在可以将信息保存在新窗口中并返回到我的屏幕，任何想法都知道如何将这个 viewModel 保存在主页上。我希望将 AddressPartial 放入调用它的 CreateClient 页面上的 viewModel 中，这样他们就可以继续使用表单而不会丢失任何信息。

我猜我应该将它指向控制器并告诉它将带有 ContactAddress 的 viewModel 重新发送回 CreateClient 页面。目前正在处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:31:00.287

您可以使用 Ajax 请求保存地址并返回密钥。然后将密钥以原始形式保存在隐藏的输入框中。

# view - Zend Framework 2 自定义视图助手 - 跨模块

> ID：14201244
> 
> 赞同：1
> 
> 时间：2013-01-07T17:46:57.383
> 
> 标签：view, frameworks, zend-framework2, helpers

在 Zend Framework 2 中，如何让一个视图助手可用于多个模块？

我想要的是有一些通用函数，比如算法函数，可以被多个模块重用。

我目前在 ZF 2 2.0.3

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:10:00.177

除了 kokx 所说的，您还需要为视图助手管理器添加服务管理器配置。这可以通过以下两种方式之一完成：在您的模块配置中，或在您的模块类中。

```
// module configuration:
return array(
    'view_helpers' => array(
        'invokables' => array(
            'dimmy' => 'DimmyUtil\View\Helper\DimmyUtil',
        ),
    ),
); 
```

或者，在 Module 类中：

```
namespace DimmyUtil;

class Module
{
     public function getViewHelperConfig()
     {
         return array('factories' => array(
             'dimmy' => function ($helpers) {
                  // do some stuff...
                  return $helper;
             }
         ));
     }
} 
```

一旦你这样做了，视图助手将在任何组成模块的应用程序中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:56:51.853

很简单，把它放在你的一个模块中。您可以使用 ZF2 中其他模块的类和函数。因为 ZF2 中的模块不仅仅是名称空间，其中还包含一些类。因此，如果您创建一个名为 的视图助手`\Module\View\Helper\MyHelper`，您可以简单地在另一个模块中使用该视图助手。

# java - 没有生成新的日志文件？

> ID：14201248
> 
> 赞同：1
> 
> 时间：2013-01-07T17:47:17.400
> 
> 标签：java, logging, sunone

今天我把我的 Web 应用程序的所有日志文件备份在`SunOneWebServer`. 我将所有现有日志文件移动到新文件夹 Log_Bkp 中。但是现在没有生成新的日志文件。在我们的代码中

```
(!createLogfile())
 throw exception 
```

但也不例外。无法理解为什么会这样？在我的本地`Apache Tomcat`服务器上它工作正常。如果您需要更多信息，请发表评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:28:37.147

我在服务器仍在运行时移动了文件。当我在 Apache Tomcat 本地服务器中尝试此操作时，它会给出一个错误，表明某些系统正在使用它。但是在服务器上它没有给出任何警告。但是当我们重新启动服务器时，正在创建新文件。

> PS：每当我们移动或删除服务器上的任何文件时，请确保先停止服务器。

# c# - 如何将复杂的字符串解析为数据结构

> ID：14201252
> 
> 赞同：0
> 
> 时间：2013-01-07T17:47:24.563
> 
> 标签：c#, string, parsing

我需要帮助理解将复杂字符串解析为 Tree 数据结构的最简单方法。我试图弄清楚如何使用 C# 解析这个字符串。

这是此字符串的示例：

```
[[Le[[filet|tartare]]|La grillade]]de gateau|Une [[portion|part]] de gateau 
```

[[ ... ]] 是一个集合和 | 是集合中的分隔符

例如，我需要获得

> ```
>  Set 1
>        Set 1-1
>            Le
>            Set 1-1-1
>               filet
>               tartare
>            La grillade
>     Set 2
>        Une 
>        Set 2-1
>           portion
>           part 
>        de gateau 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:38:47.537

```
using System;
using System.Collections.Generic;
using System.IO;

class Tree
{
    int currentIndent;

    public Tree(string s)
    {
        this.Trees = new List<Tree>();
        this.Values = new List<string>();
        this.currentIndent = 0;

        if (s == null)
            throw new ArgumentNullException();

        if (s == "")
            return;

        int beginPos = 0;
        while (beginPos < s.Length)
        {
            if (s[beginPos] == '[')
            {
                string res = "";
                uint openedBraceCount = 1;
                uint closedBraceCount = 0;
                int index = beginPos + 1;
                while (openedBraceCount != closedBraceCount)
                {
                    if (s[index] == '[')
                        openedBraceCount++;
                    if (s[index] == ']')
                        closedBraceCount++;
                    res += s[index];
                    index++;
                }
                beginPos = index;
                this.Trees.Add(new Tree(res.Substring(0, res.Length - 1)));
            }
            else
            {
                int endPos = beginPos + 1;
                while (endPos < s.Length && s[endPos] != '[')
                    endPos++;
                string[] values = s.Substring(beginPos, endPos - beginPos).Split('|');
                for (int i = 0; i < values.Length; i++)
                    values[i] = values[i].Trim();
                this.Values.AddRange(values);
                beginPos = endPos;
            }
        }
    }

    public void Print(TextWriter writer, int indent)
    {
        this.currentIndent = indent;
        Print(writer, 0, this);
        this.currentIndent = 0;
    }

    private void Print(TextWriter writer, int indent, Tree tree)
    {
        foreach (string value in tree.Values)
            writer.WriteLine("{0}{1}", new string(' ', indent), value);
        foreach (Tree t in tree.Trees)
            Print(writer, currentIndent + indent, t);
    }

    public List<Tree> Trees { get; set; }

    public List<string> Values { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        string s = "[[Le[[filet|tartare]]|La grillade]]de gateau|Une [[portion|part]] de gateau";
        var tree = new Tree(s);
        tree.Print(Console.Out, 2);
    }
} 
```

# php - 用于匹配 2 个不同符号的 REGEXP 模式

> ID：14201256
> 
> 赞同：0
> 
> 时间：2013-01-07T17:47:41.707
> 
> 标签：php, regex

我需要如果字符串包含符号`.`并且`@`打印是，队列符号无关紧要，重要的是在字符串中这个符号至少会出现一次，我需要使用正则表达式进行此操作。

我写的：

```
if (preg_match("#(\@.*\.)|(\..*\@)#",$str)) {
    echo "yes";
} 
```

但我怀疑是否可以为此编写更简单的模式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:51:35.503

使用这个正则表达式`(?=.*\.)(?=.*@).+`

```
(?=.*\.) dot exists
(?=.*@) @ exists
.+ any string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:52:40.327

You can use lookahead to separate the two conditions:

```
^(?=.*\.)(?=.*@) 
```

The start-of-string anchor is not needed, but it helps performance.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:54:09.093

Perhaps its a bit easier without a regex.

```
if(strpos($str, ".") !== false || strpos($str, "@") !== false) {
    echo "yes";
} 
```

Then you don't need the regex is perhaps a bit faster. Then you only search if a character is in a string.

# file - 回显一个空行

> ID：14201258
> 
> 赞同：1
> 
> 时间：2013-01-07T17:47:50.770
> 
> 标签：file, batch-file, cmd

当以下代码遇到空行时，我无法将空行回显到文件中。我该怎么办？

```
for /f "tokens=1,* delims=]" %%A in ('"type Setup.ini|find /n /v """') do (
set "line=%%B"
if defined line (
    call set "line=echo.%%line:PRINTER_JAM_SENSOR_PRESENT: TRUE=PRINTER_JAM_SENSOR_PRESENT: FALSE%%"
    for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X >>Setup.ini.replaced%~x1
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:05:18.473

当遇到空行时，`line`变量将被设置为空白，从而删除该变量。您已经检查了它的定义时间。 **只需在未定义时添加检查。**

```
for /f "tokens=1,* delims=]" %%A in ('"type Setup.ini|find /n /v """') do (
    set "line=%%B"
    if defined line (
        call set "line=echo.%%line:PRINTER_JAM_SENSOR_PRESENT: TRUE=PRINTER_JAM_SENSOR_PRESENT: FALSE%%"
        for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X >>Setup.ini.replaced%~x1
    )
    if not defined line echo.>>Setup.ini.replaced%~x1
) 
```

**额外：**这里又是代码，但我建议使用`setlocal EnableDelayedExpansion`.

```
for /F "tokens=1,* delims=]" %%A in ('type Setup.ini ^| find /n /v ""') do (
    set "line=%%B"
    if defined line (
        set "line=!line:PRINTER_JAM_SENSOR_PRESENT: TRUE=PRINTER_JAM_SENSOR_PRESENT: FALSE!"
        echo(!line!>>Setup.ini.replaced%~x1
    )
    if not defined line echo.>>Setup.ini.replaced%~x1
) 
```

# java - Locating the bottleneck of a Java/mySQL application

> ID：14201262
> 
> 赞同：0
> 
> 时间：2013-01-07T17:47:58.447
> 
> 标签：java, mysql, performance

I have an (almost) dedicated system which I'm using for some database stuff. My problem is: A Java application is running pretty slow (taking 2-3 days to complete a task), and I don't know why.

The system is a Xubuntu 12.04.1 LTS, 3.2.0-32-generic x86_64, mySQL 5.5.28, Phenom X2 550, 16 GB RAM and an Intel SSD 520 (utilizing a SandForce processor known for high IOPS).

First, the CPU load is never really at 100%. The htop output looks like this most of the time:

```
 1  : 63.9% sys: 12.9% low:  0.0%        Tasks: 99, 164 thr; 2 running
  2  : 18.5% sys: 21.2% low:  0.7%        Load average: 1.14 1.23 1.22
  Mem[|||||||||||||||||13490/16049MB]     Uptime: 1 day, 06:32:13
  Swp:8188M used:195M                     Time: 18:33:04

  PID USER      PRI  NI  VIRT   RES   SHR S CPU% MEM%   TIME+  Command
16168 micha      20   0 5163M 1595M  4500 S 75.0  9.9 11h36:10 java -jar ./build
16169 micha      20   0 5163M 1595M  4500 R 75.0  9.9 11h31:34 java -jar ./build
 5968 mysql      20   0 11.9G 10.7G  3992 S 31.0 68.4 13h21:10 /usr/sbin/mysqld
 6142 mysql      20   0 11.9G 10.7G  3992 S 31.0 68.4 10h44:50 /usr/sbin/mysqld 
```

Sometimes also mysqld has a higher CPU usage than java, but it never get's close to 100% on both cores.

The database I'm working on is rather big, with a total of 24 GB of InnoDB tables. Every table has a `PRIMARY` key and I also used `EXPLAIN` to get my indexes right. The java tool does rather simple stuff, but tons of it. The tables involved have around 10-20M rows and the java application is doing a magnitude more of queries (`SELECT`, `UPDATE` and `INSERT`). I'm using prepared statements.

These are my settings for InnoDB:

```
mysql> show variables like 'innodb%'
    -> ;
+---------------------------------+------------------------+
| Variable_name                   | Value                  |
+---------------------------------+------------------------+
| innodb_adaptive_flushing        | ON                     |
| innodb_adaptive_hash_index      | ON                     |
| innodb_additional_mem_pool_size | 8388608                |
| innodb_autoextend_increment     | 8                      |
| innodb_autoinc_lock_mode        | 1                      |
| innodb_buffer_pool_instances    | 1                      |
| innodb_buffer_pool_size         | 10737418240            |
| innodb_change_buffering         | all                    |
| innodb_checksums                | ON                     |
| innodb_commit_concurrency       | 0                      |
| innodb_concurrency_tickets      | 500                    |
| innodb_data_file_path           | ibdata1:10M:autoextend |
| innodb_data_home_dir            |                        |
| innodb_doublewrite              | ON                     |
| innodb_fast_shutdown            | 1                      |
| innodb_file_format              | Antelope               |
| innodb_file_format_check        | ON                     |
| innodb_file_format_max          | Antelope               |
| innodb_file_per_table           | OFF                    |
| innodb_flush_log_at_trx_commit  | 0                      |
| innodb_flush_method             |                        |
| innodb_force_load_corrupted     | OFF                    |
| innodb_force_recovery           | 0                      |
| innodb_io_capacity              | 200                    |
| innodb_large_prefix             | OFF                    |
| innodb_lock_wait_timeout        | 50                     |
| innodb_locks_unsafe_for_binlog  | OFF                    |
| innodb_log_buffer_size          | 8388608                |
| innodb_log_file_size            | 5242880                |
| innodb_log_files_in_group       | 2                      |
| innodb_log_group_home_dir       | ./                     |
| innodb_max_dirty_pages_pct      | 75                     |
| innodb_max_purge_lag            | 0                      |
| innodb_mirrored_log_groups      | 1                      |
| innodb_old_blocks_pct           | 37                     |
| innodb_old_blocks_time          | 0                      |
| innodb_open_files               | 300                    |
| innodb_purge_batch_size         | 20                     |
| innodb_purge_threads            | 0                      |
| innodb_random_read_ahead        | OFF                    |
| innodb_read_ahead_threshold     | 56                     |
| innodb_read_io_threads          | 4                      |
| innodb_replication_delay        | 0                      |
| innodb_rollback_on_timeout      | OFF                    |
| innodb_rollback_segments        | 128                    |
| innodb_spin_wait_delay          | 6                      |
| innodb_stats_method             | nulls_equal            |
| innodb_stats_on_metadata        | ON                     |
| innodb_stats_sample_pages       | 8                      |
| innodb_strict_mode              | OFF                    |
| innodb_support_xa               | ON                     |
| innodb_sync_spin_loops          | 30                     |
| innodb_table_locks              | ON                     |
| innodb_thread_concurrency       | 0                      |
| innodb_thread_sleep_delay       | 10000                  |
| innodb_use_native_aio           | OFF                    |
| innodb_use_sys_malloc           | ON                     |
| innodb_version                  | 1.1.8                  |
| innodb_write_io_threads         | 4                      |
+---------------------------------+------------------------+
59 rows in set (0.01 sec) 
```

Finally, when looking at iotop, the disk hovers at around 1% usage, so I think mySQL actually works only in/with system memory most of the time and does not thrash the disk. I *think* this excludes RAM and SSD as bottleneck and only leaves the CPU.

But before investing in a new CPU, I would like to ask for other/more opinions. Is the CPU really my bottleneck? If yes, why is it well below 100% usage?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:52:20.250

在不了解 Java 代码的情况下（此答案将得到更新），我推测您的插入/更新具有以下语法：

```
 openConnection();    
   startTransaction  
   {  
       insertOneRow();  
        commit();  
   }  
   endTransaction();  
   closeConnection(); 
```

此外，我还想象您没有将语句批处理在一起，因此您只调用数据库`X/N`时间，其中`X`批处理的大小是多少。

我能够在不到 3 秒的时间内`2 million`将记录保存到**Oracle**（我知道你的是 MySql）数据库中，所以这不是 CPU 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:56:25.310

也许您可以使用分析器来识别瓶颈？

我使用的是与 NetBeans 捆绑在一起的，发现它们很有帮助。

在这里您可以了解更多信息：http: [//netbeans.org/kb/docs/java/profiler-intro.html](http://netbeans.org/kb/docs/java/profiler-intro.html)

# c++ - How to automatically generate function header comments in eclipse-cdt?

> ID：14201268
> 
> 赞同：7
> 
> 时间：2013-01-07T17:48:29.590
> 
> 标签：c++, c, eclipse-cdt

Is there a way I can automatically generate the function headers for a function in eclipse cdt ? I have seen related posts which ask to use `Alt` + `Shift` + `J` or type `/**` before function header and press `Enter`. However i am wondering if it is possible to get a predefined function header. I tried to define my format in

> C/C++ > Code style > Code templates > Comments > Methods

but could not find a way to use it in code.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T19:02:15.743

I am afraid I have a partial answer for you:

1.  If you go to `window -> preferences -> C/C++ -> Editor` and select `Doxygen` under `Documentation tool comments`, typing `/** + enter` will fill in the comment with param and return tags automatically. I have found no way to add other fields automatically though.
2.  If you go to `windows -> preferences -> C/C++ -> Editor -> Templates`, you will be able to create templates that eclipse will be able to auto-complete, when typing their name.
    For example, you can create a template called 'author', set the context to 'doc comment' and set the tag you need as a pattern. For this example, I used `@author ${user}` (note the use of a variable). Now you can start typing 'aut', press `ctrl+space` for auto-complete, and your tag will be inserted.

I understand this may not be the answer you are looking for, but it might help. I too have struggled with the eclipse settings to automatically generate these, but you *will* become very fast at doing this with templates, *and* you have more control over the actual content.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-02T16:18:20.097

我找到了一些解决方法。

在首选项 >> C/C++ >> 编辑器 >> 模板中创建一个模板 给出唯一名称（如 comfun）像我一样使用变量（${...}

保存模板

现在在函数声明中输入唯一名称并点击 ctrl+space（注意没有标记任何文本），因此 eclipse 可以评估变量您所要做的就是将自动生成的文本移动到函数上方。

我希望这会有所帮助。

```
/*-----------------------------------------------------------------------------+
|    F U N C T I O N   I N F O R M A T I O N                                   |
+------------------------------------------------------------------------------+
|  ToDo: check auto generated function comment                           |
|                                                                              |
|  Function Name:  ${enclosing_method}                                     |
|                                                                              |
|  Prototype at:   ${file_base}_tdf.h                                   |
|                                                                              |
|  Description:    add some useful content                                     |
|                                                                              |
|                                                                              |
|  Parameter:      ${enclosing_method_arguments}         |
|                                                                              |
|  Return Value:   ${return_type} OK               |
|                                                                              |
+-----------------------------------------------------------------------------*/ 
```

# php - 在 Laravel 4 中路由到控制器失败

> ID：14201269
> 
> 赞同：6
> 
> 时间：2013-01-07T17:48:39.850
> 
> 标签：php, laravel

我正在尝试在 Laravel 4 中注册我的控制器。在`routes.php`我有：

```
Route::get("/","HomeController@index");
Route::get("search","SearchController@index"); 
```

现在，家庭控制器路由很好，但是搜索控制器路由给了我一个错误：

```
ReflectionException: Class SearchController does not exist 
```

但是，该类*确实*存在。我什至尝试创建另一个示例控制器，但无济于事，因为出现了相同的消息。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T17:58:33.643

名称在 L4 中区分大小写。并且方法名称应该完全匹配（例如 getIndex，而不是 index() ）。

此外，因为它使用作曲家包，你将需要运行： `php composer dump-autoload` 检测任何新的类/控制器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-21T14:43:04.903

我有同样的问题，作曲家`dump-autoload`没有解决它。

我意识到我的类文件没有在 Composer 生成的 vendor/composer/autoload_classmap.php 中声明。

我清除了缓存文件夹的内容。在 Linux 中，此文件夹为：~/.composer/cache，在 Windows 7 中：C:\Users\\AppData\Local\Composer\files 如果存在 bootstrap/compiled.php，也应将其删除，或运行：`php artisan clear-compiled`。

在此之后，我删除了 composer.lock 和 vendor 文件夹并运行：composer install。这将我的类文件放入 autoload_classmap.php 但是 ReflectionException 仍然被抛出......

作为最后的尝试，我从已经在使用的项目中复制并重命名了另一个控制器，这解决了问题。

# symfony - Doctrine 2 查询导致网页冻结

> ID：14201282
> 
> 赞同：0
> 
> 时间：2013-01-07T17:50:04.443
> 
> 标签：symfony, doctrine

当我尝试在我的操作控制器中运行此查询时，我的浏览器页面冻结：

```
$query = $em->createQuery('SELECT c FROM Baza\BlogBundle\Entity\Conferences c WHERE c.locationid= ?1');
            $query->setParameter(1, 5);
            $id = $query->getResult(); 
```

但是当我执行任何其他查询时：

```
$query = $em->createQuery('SELECT c.title FROM Baza\BlogBundle\Entity\Conferences c WHERE c.locationid= ?1');
            $query->setParameter(1, 5);
            $id = $query->getResult(); 
```

一切似乎都井然有序。唯一的区别是在第一个中我检索整个对象，而不仅仅是单个字段。

这个问题发生在所有表上，而不仅仅是这个。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:46:34.837

查询不太可能导致挂起，而是您对结果的处理方式。如果你曾经'打印'一个 symfony 对象，你的浏览器会因为所有的递归而挂起。您的第二个查询仅获取标题，因此您不会打印对象，只是一个文本字段。

一个简单的解决方法是更改​​第一个查询的最后一行：

```
 $id = ($query->getResult())->getTitle(); 
```

（或任何有意义的功能）。如果这不能解决问题，则需要查看更多代码。

# python - 异构数据记录和分析

> ID：14201284
> 
> 赞同：1
> 
> 时间：2013-01-07T17:50:15.810
> 
> 标签：python, logging, numpy, matplotlib

我正在使用 python 对我正在创建的计算机视觉系统的算法进行原型设计。我希望能够从算法中轻松记录异构数据，例如：图像、numpy 数组、matplotlib 图等，并使用两个键来实现，一个用于当前帧号，另一个用于描述记录的对象. 然后我希望能够从网络浏览器浏览所有数据。最后，我希望能够轻松处理日志以生成摘要，例如检索所有帧号的关键“点”并计算一些关于它们的统计信息。我的目的是使用这个日志子系统来帮助调试算法的行为并生成用于基准测试的摘要。

我准备自己创建这个子系统，但我想先问问是否有人已经做过类似的事情。有人知道我可以用来做我要求的任何 python 包吗？否则，是否有人对自己使用哪些工具来创建它有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:36:42.303

存储的另一种选择可能是使用 hdf5 或 pytables。根据您构建数据的方式，您可以使用 pytables 在关键“点”处查询数据。如评论中所述，我认为不存在现成的解决方案。

# filepicker.io - Changing the UI look for Filepicker upload box

> ID：14201286
> 
> 赞同：0
> 
> 时间：2013-01-07T17:50:32.203
> 
> 标签：filepicker.io

I just started using filepicker for a application and I want to know if it is allowed to change the standard look and feel of the upload modal, and custom content / CSS on it. If yes, then how ? I wasn't able to see any docs around that.

I am using the following code to invoke the modal (from the docs) -

```
 $('input[type="file"]#ajax-upload').click(function(e){
e.preventDefault();
var output = $("#ajax-upload-output");
filepicker.pick({
mimetypes: ['image/*'],
container: 'modal',
services:['COMPUTER', 'FACEBOOK', 'GMAIL'],
},
 function(FPFile){
console.log(JSON.stringify(FPFile));
output.html('Uploaded: '+FPFile.url+'');

filepicker.convert(FPFile,
        {width: 150, height: 150, fit:'crop', align:'faces'},
        function(bigfp) {
            $("#conversion-150").attr("src", bigfp.url);
    });

 },
 function(progress){
    output.text("Uploading... ("+progress+"%)");
},
 function(FPError){
console.log(FPError.toString());
 });

 }); 
```

Would truly appreciate any help.

Kind regards, Titash

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:01:01.053

是的，您可以进入您的开发人员门户并添加 CSS 以与模态一起包含。它在自定义选项卡下

# forms - Drop down input different for Chrome and Firefox

> ID：14201291
> 
> 赞同：0
> 
> 时间：2013-01-07T17:50:53.470
> 
> 标签：forms, css

I am creating a form. The forms drop down input **Date of birth** shows smaller in Firefox while works perfectly fine in Chrome. Please help me out to fix it up in Firefox. Here is what I have done, Find fiddle [here](http://jsfiddle.net/EztZf/).

Code,

```
.appformddl
{

margin: 3px 0px 0px 0px;
width: 140px;
padding: 0px 0px;
border: 1;
height:18px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:00:42.997

似乎在 Firefox 下设置 font-size on option 受到尊重，但在 Chrome 下却没有。*尝试仅*在选择元素上设置所需的字体大小，而不是在选项元素上全局设置。

# javascript - 将最后一个 li 显示为选中状态，最初显示其菜单项

> ID：14201293
> 
> 赞同：0
> 
> 时间：2013-01-07T17:51:07.787
> 
> 标签：javascript, jquery, css

我试图将最后一个 li 显示为选定的，并且最初我需要显示它的子菜单项也被显示。

所以这是我尝试过的[演示链接。](http://jsfiddle.net/gXBsj/)

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8">
        <title>Test Page</title>
        <link rel="stylesheet" href="styles/master.css" type="text/css" media="screen" title="no title" charset="utf-8">

        <script src="js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/modernizr-1.6.min.js" type="text/javascript" charset="utf-8"></script>

    </head>
    <body>
        <div class="page">
            <header>
                <figure>
                    <img src="images/logo.png" width="48" height="49" alt="Logo">
                    <figcaption>
                        <h1>Company Name</h1>
                    </figcaption>
                </figure>
                <nav>
                    <ul>
                        <li><a href="home.html">Home</a></li>
                        <li><a href="aboutus.html">About Us</a></li>
                        <li class="submenuHeader">
                            <a href="products.html">Products</a>
                            <ul class="submenu">
                                <li><a href="webpage.html">Web Page</a></li>
                                <li><a href="mobileapp.html">Mobile App</a></li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </header>
            <section>
                <h1>Lorem Ipsum dolor</h1>
                <h3>Lorem Ipsum dolor sit ame</h3>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>
            </section>
            <form action="Test_submit" method="get" accept-charset="utf-8">
                <h3>Registration Form</h3>
                <label for="first_name">First Name</label><input type="text" name="first_name" value="" id="first_name">
                <label for="Email">Email</label><input type="text/submit/hidden/button" name="" value="" id="">
                <label for="country">Country</label><input type="text/submit/hidden/button" name="country" value="" id="country">
                <p><input type="submit" value="Submit" class="button"></p>
            </form>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:14:31.610

首先，在发布之前摆脱所有 js 错误。当您在线发布时尝试使用托管的 jQuery 链接，因为人们无权访问您的本地目录。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

将这样的内容添加到 head 部分：

```
$(document).ready(function () {
      $('ul.submenu').css({'display':'block'});
}); 
```

您可能希望更改选择器以使其更具动态性。我发布的只是给你一个想法。另外，不要忘记对子菜单项 CSS 进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:19:33.770

为了在链接列表上显示活动选择，您需要更改每个页面的“活动”类。

在下面的这种情况下，“产品”菜单设置为“活动”，“网页”子菜单链接设置为“活动子菜单”。

```
<ul>
  <li><a href="home.html">Home</a></li>
  <li><a href="aboutus.html">About Us</a></li>
  <li class="submenuHeader active"><a href="products.html">Products</a>
    <ul class="submenu">
      <li class="active-submenu"><a href="webpage.html">Web Page</a></li>
      <li><a href="mobileapp.html">Mobile App</a></li>
    </ul>
  </li>
</ul> 
```

这是上面“活动”类的css代码。其中所有活跃的班级都会有一个大胆的班级。

```
.active {
  font-weight: bold;
}
.active-submenu {
  font-weight: bold;
  color: blue;
} 
```

因此，在您拥有的每个 .html 文件上，它会将具有“活动”类的人的外观更改为粗体。

如果您对动态更改类感兴趣，您可能需要使用 javascript/jQuery 来“添加类”或“更改类”。如果您准备好了，这里是链接 - [jquery 更改类名](https://stackoverflow.com/questions/3452778/jquery-change-class-name)。

# c - 理解linux内核中的优先级数组

> ID：14201296
> 
> 赞同：2
> 
> 时间：2013-01-07T17:51:20.393
> 
> 标签：c, linux-kernel, operating-system, scheduler

我正在尝试了解 Linux 内核的调度程序是如何工作的

如本链接所示

[http://books.google.co.in/books?id=NXVkcCjPblcC&lpg=PP1&pg=PA47#v=onepage&q&f=false](http://books.google.co.in/books?id=NXVkcCjPblcC&lpg=PP1&pg=PA47#v=onepage&q&f=false) 和以下链接 [http://www.informit.com/articles/article.aspx?p=101760&seqNum= 2](http://www.informit.com/articles/article.aspx?p=101760&seqNum=2)

struct runque 是调度程序运行的基本数据结构

它是

```
struct runqueue {
    spinlock_t     lock;        /* spin lock which protects this
                                   runqueue */
    unsigned long    nr_running;     /* number of runnable tasks */
    unsigned long    nr_switches;     /* number of contextswitches */
    unsigned long    expired_timestamp;  /* time of last array swap */
    unsigned long    nr_uninterruptible; /* number of tasks in
                                               uinterruptible sleep */
    struct task_struct *curr;        /* this processor's currently
                                      running task */
    struct task_struct *idle;        /* this processor's idle task */
    struct mm_struct  *prev_mm;      /* mm_struct of last running task
                                      */
    struct prio_array  *active;       /* pointer to the active priority
                                        array */
    struct prio_array  *expired;      /* pointer to the expired
                                         priority array */
    struct prio_array  arrays[2];      /* the actual priority arrays */
    int         prev_cpu_load[NR_CPUS];/* load on each processor */
    struct task_struct *migration_thread;  /* the migration thread on this
                                              processor */
    struct list_head  migration_queue;   /* the migration queue for this
                                             processor */
    atomic_t      nr_iowait;      /* number of tasks waiting on I/O
                                   */
} 
```

上面有两个成员

```
struct prio_array  *active;       /* pointer to the active priority
                                    array */
struct prio_array  *expired;      /* pointer to the expired priority array */ 
```

和 struct prio_array 定义为

```
struct prio_array {
    int        nr_active;      /* number of tasks */ 
    unsigned long   bitmap[BITMAP_SIZE]; /* priority bitmap */
    struct list_head queue[MAX_PRIO];   /* priority queues */
}; 
```

我不清楚以下句子

**问题1）**
`Each priority array contains one queue of runnable processors per priority level.`

在上述定义中`struct prio_array` **，可运行处理器的队列在哪里**

然后它说

> ```
> The priority arrays also contain a priority bitmap used to 
> ```
> 
> 高效地发现系统中优先级最高的可运行任务。

然后它说“有 140 个优先级和 32 位字，这是五个。”

怎么得出这五个结论的背后是什么数学计算呢？

以上是本书第 4 章的摘录，在第二个链接中发布，两者都包含相同的文本。为清楚起见，仅在此处发布。

* *UPDATE1 ** 基于评论我只是想澄清我在问作者说什么

> BITMAP_SIZE 是无符号长类型变量数组必须为每个有效优先级提供一个位的大小。有 140 个优先级和 32 位字，这是五个。

**问题 2)**
我不清楚的是每个优先级都给出了一个位，并且有 140 个优先级，所以数组大小是怎么来的 5 我没有得到 BITMAP_SIZE 计算的逻辑不是 140/32=5

它与以下段落有关

```
 When a task of a given priority becomes runnable (that is,  
 its state becomes TASK_RUNNING), the corresponding bit in the 
bitmap is set to one. For example, if a task with priority seven is 
runnable, then bit seven is set 
```

在数组中的链接上

```
 unsigned long   bitmap[BITMAP_SIZE]; /* priority bitmap */ 
```

设置所以基本上我不清楚的是这个数组是如何设置的，如果我能够正确解释，也可以查看问题 1。

**更新2和下面的答案解释**

有了下面的答案，我只是添加了一个小解释，如果他们基本上来到这里，将来可能会对他们有所帮助

调度程序维护一个运行队列和可运行进程列表，每个可运行进程正好在一个运行队列上，我给出的链接的文章考虑了具有许多运行队列的多处理器系统，回到我们的情况，一个处理器和一个运行队列，进程在各种优先级

有 140 个优先级，每个优先级在 TASK_RUNNING 状态下都有不同的进程，例如可以有许多优先级为 8 的进程，依此类推（我以 8 为例） struct runque 指向优先级数组，它告诉

```
btimap[BITMAP] /* this is the priority level 
struct list_head /* points to the start of list of processes of that run level 
```

因此，runque 指向优先级数组，从优先级数组中，您可以轻松获取需要在 O(1) 时间内执行的进程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:25:25.537

您是在问如何在数组中找到正确的位吗？

像这样的东西：

```
int bitmap_idx = priority/BITS_PER_WORD;
int bitmap_bit = priority%BITS_PER_WORD;

isSet = ( bitmap[bitmap_idx]&(1<<bitmap_bit) );  //test
bitmap[bitmap_idx] |= 1<<bitmap_bit;             //set 
```

# ruby-on-rails - Ruby 从数组计算总和

> ID：14201307
> 
> 赞同：1
> 
> 时间：2013-01-07T17:51:55.597
> 
> 标签：ruby-on-rails, ruby, arrays, sum

我正在使用 rails 来尝试计算数据库中特定列的总数。我现在正在使用这个：

```
@total = Product.sum (:cost) 
```

哪个有效并返回表中所有内容的总成本。如果我试图从已经在数组中的数据中做到这一点呢？例如：

```
@products = Product.where('date >= ? AND date <= ?', Date.today.beginning_of_month.to_datetime, Date.today.end_of_month.end_of_day.to_datetime) 
```

然后你能在这一系列产品上做同样的事情吗？

希望有人能帮忙！塔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:54:02.403

您可以简单地附加`.sum`到生成的 ActiveRecord 对象：

```
Product.where('date >= ? AND date <= ?',
 Date.today.beginning_of_month.to_datetime,
 Date.today.end_of_month.end_of_day.to_datetime).sum(:cost) 
```

这将产生一个类似于

```
select sum(cost) from products where (date >= ... and date <= ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:05:42.460

如果你已经有一个实例化的数组（不是关系对象），你可以使用注入：

```
@total = @products.collect(&:cost).inject {|sum, cost| sum += cost } 
```

如果你有这种关系，meagar 的答案会更好。

# c# - MVC2 中的路由。属性不显示

> ID：14201309
> 
> 赞同：1
> 
> 时间：2013-01-07T17:52:14.730
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, asp.net-mvc-routing

美好时光！在输入 URL 浏览器中显示路线时出现问题。到网站上的搜索页面。搜索本身工作正常 - 传递了“密钥”，显示找到的列表。控制器中的搜索方法采用要搜索的字符串类型参数：

```
public ActionResult SearchAllByKey(string key)
        {
            //logic
            return View(<list_of_found>);
        } 
```

在 Global.asax 中规定的路线：

```
routes.MapRoute(
                  "Search",
                  "Search/{key}", 
                  new { controller = "controller_name", action = "SearchAllByKey", key = UrlParameter.Optional } 
              ); 
```

将 Edit 的值从 View 发送到方法的表单：

```
<% using (Html.BeginForm("SearchAllByKey", "controller_name", FormMethod.Post, new { enctype = "multipart/form-data" }))
                           {%>
                        <%: Html.ValidationSummary(true) %>
                        <input type="text" id="keyValue" name="key" />
                        <input type="submit" value="Go!" />
                        <% } %> 
```

当您单击“开始！”时。到搜索结果页面，但 URL（输入行浏览器）显示：

```
http://localhost:PORT/Search 
```

代替：

```
http://localhost:PORT/Search/SOME_KEY 
```

如何确保在 URL-e 中可见“键”？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:36:24.047

您正在发布您的数据。

更改您的 FORM`FormMethod.Get`并确保您的操作只接受 get （虽然这是默认设置）

```
 [HttpGet]
    public ActionResult SearchAllByKey(string key)
    {
        //logic
        return View(new List<string>());
    } 
```

**更新**：

要实现您想要的，您必须在默认值之前配置您的 ruote：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
          "Search",
          "{controller}/SearchAllByKey/{key}",
          new { controller = "Home", action = "SearchAllByKey", key = UrlParameter.Optional }
      );

routes.MapRoute(
"Default", // Route name
"{controller}/{action}/{id}", // URL with parameters
new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

您的**表格**应如下所示：

```
<% using (Html.BeginForm("Search", "Home", FormMethod.Post))
{%>
    <% Html.ValidationSummary(true); %>
    <input type="text" id="key" name="key" value="" />
    <input type="submit" value="Go!" />
<% } %> 
```

你必须像这样改变你的**ActionResult**：

```
[HttpGet]
public ActionResult SearchAllByKey(string key)
{
    //logic
    return View(new List<string>());
}

[HttpPost]
public ActionResult Search(FormCollection form)
{
    return RedirectToAction("SearchAllByKey",  new { key = form["key"] });
} 
```

基本上，您的**FORM**发布到`Search`重定向到`SearchAllByKey`.

# php - 表中的错误opennig对话框JQuery

> ID：14201310
> 
> 赞同：0
> 
> 时间：2013-01-07T17:52:15.227
> 
> 标签：php, jquery

我有这个代码：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    if($i++%2==0){
       $color="#FFFFFF";
    }else{
       $color="#CCCCCC";
    }

    ?>

    <tr bgcolor='<?php echo $color; ?>' onmouseover="this.style.background='#ABFB04';" onmouseout="this.style.background='<?php echo $color; ?>';">
    <?php

echo "<td class=tablelist>";

echo $row["ICAO"] . '</td><td class=tablelist>';

echo $row["Name"] . '</td><td class=tablelist>';

echo $row["WeightEmpty"] . '</td><td class=tablelist>';

echo $row["WeightFull"] . '</td><td class=tablelist>';

echo $row["CargoFull"] . '</td><td class=tablelist>';

echo $row["Range"] . '</td><td class=tablelist>';

echo $row["Price"] . '</td><td class=tablelist>';

echo $row["FirstClassSeats"] . '</td><td class=tablelist>';

echo $row["BusinessClassSeats"] . '</td><td class=tablelist>';

echo $row["EconomyClassSeats"]. '</td><td class=tablelist>';

echo "<img class='editaircraft' src='./images/info.png'></td></tr>"; 

?>
<script>
    $(function() {
        $( "#editaircraftdialog" ).dialog({
            autoOpen: false,
            width: 425
        });

        $( ".editaircraft" ).click(function() {
            $( "#editaircraftdialog" ).dialog( "open" );
            return false;
        });
    }); 
</script>

<div id="editaircraftdialog" title="Edit Aircraft">
    <?php require_once('./edit_aircraft.php?icao=1'); ?> 
</div>

<?php
}

echo "</table>";
$pagination->render();
?> 
```

这是一张桌子。但是当它必须是3时它只显示一行。如果我在editaircraftdialog（）中删除一次require，它会很有趣。但是我还有其他错误，如果我单击 info.png 图像，我会看到对话框，但它显示了以下错误：

> 警告：require_once(./edit_aircraft.php?icao=1)：无法打开流：第 135 行的 C:\xampp\htdocs\airvirtus\albrep\aircrafts_list.php 中没有这样的文件或目录
> 
> 致命错误：require_once()：在 C:\xampp\htdocs\airvirtus\albrep\aircrafts_list 中打开所需的 './edit_aircraft.php?icao=1' (include_path='.;C:\xampp\php\PEAR') 失败.php 在第 135 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:59:14.343

检查文件是否位于相同的路径/位置`edit_aircraft.php`。`aircrafts_list.php`如果是，则更改为：

```
 <?php require_once('edit_aircraft.php?icao=1'); ?> 
```

# mongodb - 查找数组 A 至少包含数组 B 中的 X 个值的条目

> ID：14201312
> 
> 赞同：4
> 
> 时间：2013-01-07T17:52:22.933
> 
> 标签：mongodb, nosql

我有一个对象集合，每个对象都有一个名为指纹的字段，其中包含 20 个哈希：

```
{
    title: 'The Chronicles of Narnia',
    authors: ['C.S. Lewis'],
    fingerprint: ['50e...', 'ae2...', ...]
} 
```

然后我有另外 20 个哈希的查询指纹。我想做的是找到所有共享至少 X 哈希的条目。换句话说，两个数组的交集必须是一定的大小。

我有一个使用 MySQL 的类似系统的旧实现。那里的查询看起来像这样：

```
SELECT *
FROM Document d
INNER JOIN Fingerprint f
    ON d.id = f.document_id
WHERE f.whorl IN (:hashes)
GROUP BY d.id
HAVING COUNT(d.id) >= X 
```

表中的每个条目都`Fingerprint`包含一个文档 ID 和一个来自指纹的单个螺纹。每个文档将有 20 个条目`Fingerprint`。

据我了解，此查询的作用是在每次螺纹匹配时复制文档，然后按唯一文档进行分组。这似乎有点浪费，但它有效。

我正在尝试在 MongoDB 中重新实现该系统，但运气不佳。我可以获得共享至少一个或所有螺纹的所有条目的列表：

```
at least one: db.objects.find({ fingerprint: {$in: [hashes]})
         all: db.objects.find({ fingerprint: {$all: [hashes]}) 
```

而且我知道我可以在应用层扫描这个列表来找到我想要的匹配项。如果我预计会有数百万个对象（目前大约 150 万个），那么这似乎是个坏主意。

我已经查看了`aggregate()`功能，但无法改进我已经拥有的功能：

```
db.objects.aggregate({$match: {fingerprint: {$in: [hashes]}}}) 
```

从这里我想我可以分组和过滤：

```
db.objects.aggregate({$match: {fingerprint: {$in: [hashes]}}}, 
                     {$group: {_id: "$_id", matches: {$sum: 1}}}) 
```

在这里，我试图复制 MySQL 查询所做的事情：为每个匹配项发出一个文档，然后计算文档数。当然，无论有多少匹配项，我们都只会发出一次文档。

然后我想到`$unwind`了匹配列表，但每次都会产生 20 个文档。

理想情况下，会有一个`$some`我可以像这样使用的运算符：

```
db.objects.find(fingerprint: {$some: {from: [hashes], count: X}}) 
```

这样的事情是否可行且有效？我希望能够运行这些查询来响应用户的搜索，所以我想 MapReduce 是不可能的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:25:40.047

使用聚合框架做你想做的事情实际上非常简单。我相信您将能够改进以下内容以完全满足您的需求：

```
db.objects.aggregate([
    {$unwind : "$fingerprint" },
    {$match  : {fingerprint : {$in: [hashes] } } },
    {$group  : {_id:"$title", numMatches: {$sum:1} } },
    {$match  : {numMatches : {$gt: X} } }
]) 
```

# java - 线程在执行期间被打乱

> ID：14201319
> 
> 赞同：1
> 
> 时间：2013-01-07T17:52:37.673
> 
> 标签：java, multithreading, threadpool

在下面的代码段中，我创建了 3 个线程并给它们一个数字来跟踪哪个是哪个。当我执行程序时，除了线程是随机排序的之外，输出与预期的一样。我本来希望它们以与创建和启动相同的顺序出现（1-2-3），但每次我都会得到一个乱码。

为什么是这样？

一个`PrintTask`对象创建一个随机`sleep`时间并在它完成睡眠时打印一条消息。代码很简单，所以我不会发布它。当我使用 an`ExecutorService`而不是单独的线程对象时，也会发生同样的事情。

```
public static void main(String[] args) {
    Thread thread1 = new Thread(new PrintTask("Thread 1"));
    Thread thread2 = new Thread(new PrintTask("Thread 2"));
    Thread thread3 = new Thread(new PrintTask("Thread 3"));

    System.err.println("Starting threads");

    thread1.start();
    thread2.start();
    thread3.start();

    System.err.println("Threads started, main ends\n");
} 
```

输出：

> 线程 2 为 4907 休眠
> 
> 线程 1 为 4779 休眠
> 
> 线程 3 为 537 休眠
> 
> 线程 3 完成睡眠
> 
> 线程 1 已完成睡眠
> 
> 线程 2 完成睡眠

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:54:12.543

> 我希望它们以与创建和启动相同的顺序显示 (1-2-3)

不，不能保证线程执行的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:55:17.920

您唯一的保证是（[JLS 17.4.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5-300)）：

> 线程上的 start() 调用发生在已启动线程中的任何操作之前。

但是不能保证何时涉及多个线程，因此您需要使用某种形式的同步来获得所需的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:56:29.493

> 我希望它们以与创建和启动相同的顺序显示 (1-2-3)

不提供此类保证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T18:16:58.127

线程如何调度运行取决于许多因素，包括任何框架调度程序、操作系统调度程序、硬件等。在没有任何明确协调的情况下，您永远不应依赖并发执行线程之间的特定操作顺序。在启动和实际执行第一条指令之间，调度程序很可能会从 CPU 中取出一个线程。

# php - php code to display list of folders and a delete-button near each of them

> ID：14201320
> 
> 赞同：0
> 
> 时间：2013-01-07T17:52:38.580
> 
> 标签：php

I'm a beginner with php and need to write a code that displays a list of folders and a delete-button near each of them, in order to be able to cancel them. Here's my code: ($array_dir is an array containing the names of the directories in the current folder)

```
$conto=count($array_dir);
echo"<table>";

for ($b=0;$b<$conto;$b++) {
    echo"<tr><td><a href=$array_dir[$b]>".$array_dir[$b].
    "</a><br>";
    echo"<form name='delete_dir_".$b."' action=
    '".$_SERVER['PHP_SELF']."' method='GET'>";
    echo"<input type='submit' name='butdelete".$b."' value='Delete'>";
    echo"</form></td><td>";
    $dir=$array_dir[$b];
    if ((isset($_GET['butdelete".$b."'])) && ($_GET['butdelete".$b."']==$dir)) {
        if(rmdir($dir)) {
            echo"The directory ".$dir." has been removed";
        }
        else  {
            echo"Could not remove directory ".$dir;
        }
    }
} 
```

This output looks fine but when I click on the delete-button it doesn't delete the folder and doesn't even return any error. I can't really understand where the error is !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:54:48.643

Look at the colour coding, and you'll see you have a problem with your `$_GET` access.

In fact, the way your code is now, you are literally looking for a URL like:

```
http://example.com/mypage.php?butdelete%22.%24b.%22=delete-me 
```

Try this instead:

```
$_GET['butdelete'.$b] 
```

Side-note: Never use `$_SERVER['PHP_SELF']` in an `action`. Instead, just use `action=""` to refer to the current page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:18:41.603

您的语法错误导致您出现问题。我已修复并将文件操作移至脚本顶部，以便您在执行删除时列出是最新的。

```
<?php 

//If form has been posted try and delete if dir exists in array
if((isset($_GET['butdelete'.$b])) && (array_search($_GET['butdelete'.$b], $array_dir)))
{
    $dir = array_dir[array_search($_GET['butdelete'.$b], $array_dir)];
    if(rmdir($dir))
    {
        echo "The directory ".$dir." has been removed";
        //Remove Dir from Array if deleted.
        unset($array_dir[array_search($_GET['butdelete'.$b], $array_dir)]);
    }
    else
    {
        echo "Could not remove directory ".$dir;
    }
}

$conto=count($array_dir);

//Output remaining directories

echo"<table>";
for($b=0;$b<$conto;$b++){
   echo"<tr><td><a href=$array_dir[$b]>".$array_dir[$b]."</a><br>";
   echo"<form name='delete_dir_".$b."' action='' method='GET'>";
   echo"<input type='submit' name='butdelete".$b."' value='Delete'>";
   echo"</form></td><td>";
}
echo "</table>";
?> 
```

# java - 带有 OpenJPA 的 Java Rss 阅读器，数据库中的许多条目 - 最佳实践

> ID：14201322
> 
> 赞同：0
> 
> 时间：2013-01-07T17:52:43.507
> 
> 标签：java, memory, rss, db2, openjpa

这是我第一次在这里发帖，我已经找到了很多有用的提示，可以解决我现在正在开发的程序的问题，谢谢！但是我自己还有一个问题，这个问题可能更笼统一些。

我正在为我的毕业论文构建一个 Java 程序，它是一个 RSS 阅读器（我为此使用 ROME），所有 RSS 条目都保存在 DB2 数据库中（我使用 OpenJPA 作为持久层）。所有传入的条目都将被自动标记（使用 MAUI），并根据用户对先前条目的评分（仍在研究该算法）给予“相关性分数”。有一个 SWING GUI，其中将列出所有提要和属于它们的条目，用户可以查看标签，添加新标签（MAUI 机器学习将采用这些标签来改进未来的标签）并为条目评分。

到目前为止，我实现了所有基本功能，并且运行良好。但是，我想知道这个程序的性能，考虑到所有提要都将保存在数据库和 GUI 中，如果我会按照我目前的方法进行操作的话。

为了简化它，我有对象资源和条目。资源是一个 RSS 提要，条目都是“RSS 新闻”，每个资源都有 x 个条目，但一个条目属于一个资源，这就是我在 DB2 中使用 JPA 注释对其进行建模的方式。在运行时，我创建了一个包含所有资源的列表（使用“SELECT * FROM RESSOURCES”作为我使用 Entitymanager 调用的命名查询）。那时我可以访问资源条目并用它们在 GUI 中填写一个列表。很好 - 我喜欢这样，我从一开始就从数据库中获取所有信息，然后将其转换为 Java 对象。到目前为止，我有几百个 RSS 条目，程序需要大约 7MB 的内存 - 很棒。

但是：一旦我们有一万个条目会发生什么，程序不会需要太多内存吗？我如何告诉 JPA 只加载，假设每个资源有 100 个条目（使用 JPA 检索 Ressource 对象时），我如何动态获取更多？

我知道可能有办法通过我自己的查询来解决这个问题，但我希望你知道我的意思——我想使用标准的 JPA 功能，而不会一直将我的所有数据库都变成对象，从而导致巨大的内存需求。

非常感谢您的帮助，马蒂亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:58:20.677

使用分页，就像谷歌一样。不是加载所有条目，而是加载前 100 个条目，并可以加载下一页的 100 个条目，等等。

见`setMaxResults()`和`setFirstResult()`在`Query`课堂上。

还要在您的 GUI 中添加一个搜索表单，因为浏览 10,000 个条目以找到您正在寻找的条目并不是任何人都想做的事情。

# sql - Perl - 在 CSV 文件中连接 SQL 结果

> ID：14201325
> 
> 赞同：0
> 
> 时间：2013-01-07T17:52:56.710
> 
> 标签：sql, perl, concatenation, string-concatenation, export-to-csv

我正在查询数据库中的两列并将它们写入 .csv 文件。我遇到的问题是下面的代码行导致此错误：“在第 105 行的字符串中使用未初始化的值”。

```
打印 $file "$hash_ref->{'UserNM'}" 。join("\t", "$hash_ref->{'EventDT'}" . "\n");
```

我在文件中寻找的是这样的东西：

```
用户 ID    上次登录时间戳
用户12 2012-12-27 12:21:12
用户 49 2011-06-13 12:21:12
用户 43 2010-09-15 12:21:12
用户09 2013-01-07 12:21:12
用户87 2012-08-12 12:21:12
用户 38 2013-01-07 12:21:12
用户 31 2009-04-30 12:21:12

```

只需询问是否需要更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:56:56.573

您的哈希值之一未定义。试试这个：

```
printf $file "%s\t%s\n", $hash_ref->{'UserNM'} // q{}, $hash_ref->{'EventDT'} // q{}; 
```

`q{}`如果值未定义，它将默认为空字符串 ( )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:00:11.763

正如@gpojd 指出的那样，未定义哈希引用之一。您还可以为`IFNULL/ISNULL`查询中的每个字段包含一个语句，该语句可能返回`NULL`只是将它们设置为空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:01:17.700

听起来这仍然不适合您。在尝试打印之前检查是否同时定义了 $hash_ref->{'UserNM'} 和 $hash_ref->{'EventDT'} 可能对您的调试有指导意义。这将允许您为每个变量提供一个备用默认值，并至少让您分析一些输出。

```
my $UserNM;
my $EventDT;

if (defined($hash_ref->{'UserNM'})) {
    $UserNM = $hash_ref->{'UserNM'};
} else {
    $UserNM = "default username";
}

if (defined($hash_ref->{'EventDT'})) {
    $EventDT= $hash_ref->{'EventDT'};
} else {
    $EventDT= "default event date";
}

print $file "$UserNM" . join("\t", "$EventDT" . "\n"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T18:57:28.200

我决定使用以下代码简化连接并将列作为变量传递：

```
    我的 $usernm = "$row->{'UserNM'}";
    我的 $logindt = "$row->{'EventDT'}";

    # 将用户和上次登录时间戳转储到文件中
        打印 MYFILE "$usernm \t $logindt \n";

```

在我看来，这更简单，更干净。它有效。有人不同意吗？

# jquery - 在 jVectorMap 上绘制自定义标记

> ID：14201326
> 
> 赞同：4
> 
> 时间：2013-01-07T17:53:00.560
> 
> 标签：jquery, svg, jvectormap

我是 qQuery 的新手，并没有在 javascript 中做很多事情。

我有一个包含大约 10 个国家/地区的小型 jVectorMap，我想在每个国家/地区的顶部绘制一个小饼图。

我看到您可以创建标记，但我看不到您将如何将自定义标记分配给一个国家/地区。

我很高兴使用 SVG 插件直接在 jVectorMap 上绘制，但我似乎无法让它工作。

例如，使用“jQuery SVG”插件，我尝试在地图上画一个圆圈。这是代码：

```
<html>
<head>
  <link rel="stylesheet" href="jquery-jvectormap-1.1.1.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="jquery.svg.css" type="text/css" media="screen"/>
  <script src="jquery-1.8.0.min.js"></script>
  <script src="jquery-jvectormap-1.1.1.min.js"></script>
  <script src="jquery-jvectormap-north-west-europe.js"></script>
  <script src="jquery.svg.min.js"></script>
  <script>
    function drawCircle(svg) { 
      svg.circle(75, 75, 50, {fill: 'none', stroke: 'red', strokeWidth: 3}); 
    }
  </script>
</head>
<body>
  <div id="europe-map" style="width: 400px; height: 400px"></div>
  <script>
    $(function(){
      $('#europe-map').vectorMap({
        map: 'north-west-europe',
        focusOn: {
        x: 0.3,
        y: 0.4,
        scale: 1.25
    },
      });
    });

    $('#europe-map').svg({onLoad: drawCircle});
  </script>
</body>
</html> 
```

结果如下：

![浏览器中显示的内容 (Firefox 17)](../Images/29c7c32a7bcaacd2448ae05d6b7f05fe.png)

实际上，为 jQuery SVG“画布”创建了一个重复的 div，并且世界地图被下推。是否可以引用 jVectorMap 使用的 SVG 绘图空间来绘制内容？

也许有更好的方法来使用自定义标记或类似的东西来做到这一点？

非常感谢，如果这是一个愚蠢的问题，我们深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T04:42:36.827

您需要使用 CSS 将两层拉到彼此的顶部。创建以下 HTML：

```
<div id="mapContainer" style="position:relative">
    <div id="europe-map" style="position:absolute;top:0px;left:0px"></div>
    <div id="europe-map-overlay" style="position:absolute;top:0px;left:0px"></div>
</div> 
```

现在，而不是申请

```
$('#europe-map').svg({onLoad: drawCircle}); 
```

采用

```
$('#europe-map-overlay').svg({onLoad: drawCircle}); 
```

反而。

这会将圆圈放在地图的顶部。如果要将圆放在特定的经纬度坐标上，请使用 Jvectormap`latLngToPoint()`方法进行转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:00:12.087

如果您不想使用 svg 标记，请使用新图层（地图中 svg 图层上的 div）

获取地图参考

```
map = $("#world-map-gdp").vectorMap('get', 'mapObject'); 
```

并使用函数 map.latLngToPoint() 来定位新层中的点。

```
var newMarkerP = map.latLngToPoint(lat,lng);
$('#marker1').css('top',newMarkerP.x);
$('#marker1').css('top',newMarkerP.y); 
```

如果进行缩放或拖动，您可以重新定位标记，使用相同的功能并应用 css left 和 css top。

也许您可以使用新标记的顶部和左侧，但这是一个简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:07:35.287

可以使用JVectorMap API，绘制的方法是addCircle。

# javascript - How to make search results open specific pages depending on search criteria

> ID：14201332
> 
> 赞同：1
> 
> 时间：2013-01-07T17:53:14.413
> 
> 标签：javascript, jquery, html, jsp

This is a search function that pulls information depending on search criteria and prints it in a table. Also I have a few different pages for different restaurants that I want to open depending on what dish i click on. Basically, when I click on the href I want it to recognize which specific restaurant it is and take me there.

This is my code:

```
<%
        String value=request.getParameter("search");
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection conn = DriverManager.getConnection("**************", "******", "*******");
        Statement st=conn.createStatement();
        ResultSet rs = st.executeQuery("SELECT menu.name, menu.info, menu.price, restaurants.name from menu,"
                + " restaurants where restaurants_restaurantID=RestaurantID AND (menu.name like '%"
                + value
                + "%' "
                + "or menu.info like '%"
                + value
                + "%' or menu.category like '%"
                + value
                + "%' "
                + "or menu.kitchen like '%"
                + value
                + "%' or quick_choose like '%" + value + "%')");
    %>
        <table>
        <tr class="head">
          <td>Name:</td>
          <td>Info:</td>
          <td>Price:</td>
          <td>Restaurant:</td>
          <td>Location:</td>

        </tr>    
      <%

       while (rs.next()){ 
      %>
        <tr class="content">
          <td class="name"><%=rs.getString("name")%></td>
          <td class="info"><%=rs.getString("info")%></td>
          <td class="price"><%=rs.getInt("price")%></td>
          <td class="restaurant"><%=rs.getString("restaurants.name")%></td>
          <td class="location"><a href="#" %>>Show</a>

        </tr>
      <%
       }
      %>
      </table>

    <%conn.close();%>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:00:43.033

您可以使用以下内容。在这里您可以点击餐厅名称进入相应页面

```
 <%
  while (rs.next()){ 
  %>
    <tr class="content">
      <td class="name"><%=rs.getString("name")%></td>
      <td class="info"><%=rs.getString("info")%></td>
      <td class="price"><%=rs.getInt("price")%></td>
      <td class="restaurant"><%=rs.getString("restaurants.name")%></td>
      <td class="location"><a href="ShowRestaurant.jsp?restoid=<%=rs.getString("name")%>">Show</a>

    </tr>
  <%
   }
  %> 
```

现在在`ShowRestaurant.jsp`页面中使用以下代码获取餐厅名称

```
request.getParameter("restoid") 
```

然后从数据库中获取数据并像在主页上一样显示

在这里我假设

1.  您的`"name"`餐厅是独一无二的。
2.  `ShowRestaurant.jsp?restoid=resto1`将显示详细信息 `resto1`

# php - 将日期数组划分为连续的块

> ID：14201333
> 
> 赞同：6
> 
> 时间：2013-01-07T17:53:15.607
> 
> 标签：php, arrays

> **可能重复：**
> [检查集合内的连续日期并作为范围返回](https://stackoverflow.com/questions/8461543/check-for-consecutive-dates-within-a-set-and-return-as-range)

我有一个从 mySQL 查询中获得的日期数组。我需要将数组分成多个数组，以便每个数组中的日期是连续的。

所以，如果我从

```
$datearray = array("2013-05-05", "2013-05-06", "2013-05-07", "2013-05-08", "2013-06-19", "2013-06-20", "2013-06-21"); 
```

我需要能够将其拆分为

```
$firstdatearray = array("2013-05-05", "2013-05-06", "2013-05-07", "2013-05-08");
$seconddatearray = array("2013-06-29", "2013-06-30", "2013-07-01"); 
```

终于可以打印了

> 3 月 5 日至 8 日、6 月 29 日至 7 月 1 日

我怎样才能做到这一点？我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:10:05.347

**这是完整的工作答案。（享受！）**

您必须遍历 $datearray 中的每个值

```
<?php

$datearray = array("2013-05-05", "2013-05-06", "2013-05-07", "2013-05-08", "2013-06-19", "2013-06-20", "2013-06-21");
asort($datearray);
$resultArray = array();
$index = -1;
$last = 0;
$out = "";

foreach ($datearray as $date) {
    $ts = strtotime($date);
    if (false !== $ts) {
        $diff = $ts - $last;

        if ($diff > 86400) {
            $index = $index + 1;
            $resultArray[$index][] = $date;
        } elseif ($diff > 0) {
            $resultArray[$index][] = $date;
        } else {
            // Error! dates are not in order from small to large
        }
        $last = $ts;
    }
}

foreach ($resultArray as $a) {
    if (count($a) > 1) {
        $firstDate = $a[0];
        $firstDateBits = explode('-',$firstDate);
        $lastDate = $a[count($a)-1];
        $lastDateBits = explode('-',$lastDate);

        if ($firstDateBits[1] === $lastDateBits[1]) {
            $out .= intval($firstDateBits[2]) . '-' . intval($lastDateBits[2]) . ' ' . date("M",strtotime($firstDate)) . ', ';  
        } else {
            $out .= date("M d",strtotime($firstDate)) . '-' . date("M d",strtotime($lastDate)) . ', ';  
        }
    }
} 
```

这是输出：

```
5-8 May, 19-21 Jun 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:56:49.740

我无法为您提供 acutal 代码，但您可以执行以下操作：

*   查找范围的起点和终点
*   计算中间步数（1 步 = 1 天）
*   使用 mktime（或 DateTime 或 strftime）根据开始日期 + 步骤天数计算结束日期）
*   随心所欲地打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:00:13.033

您拥有的所有日期都在同一年。您可以将每个日期转换为当年的天数。

然后你会有一个数字数组。对于该数组，您可以像这里概述的那样做：

*   [在连续数字之间使用连字符缩短数字列表](https://stackoverflow.com/q/9448129/367456)

另一种方法是根据前一个日期计算下一个日期，然后将其与数组中的下一个日期进行比较。如果两者相等，则延长当前时间跨度，否则，创建一个新的时间跨度。然后将数组减少到时间跨度：

```
$consecutiveDates = function ($result, $date) {

    if ($count = count($result)) {
        $next = clone $result[$count - 1][1];
        $next->add(new DateInterval('P1D'));
    }

    $date = new DateTime($date);

    if (!$count || $date != $next) {
        $result[$count++] = [$date];
    }

    $result[$count - 1][1] = $date;

    return $result;
};

$reduced = array_reduce($datearray, $consecutiveDates, []); 
```

这给出了以下结果（对于您的数组）：

```
Array
(
    [0] => Array
        (
            [0] => DateTime Object
                (
                    [date] => 2013-05-05 00:00:00
                    [timezone_type] => 3
                    [timezone] => Europe/London
                )

            [1] => DateTime Object
                (
                    [date] => 2013-05-08 00:00:00
                    [timezone_type] => 3
                    [timezone] => Europe/London
                )

        )

    [1] => Array
        (
            [0] => DateTime Object
                (
                    [date] => 2013-06-19 00:00:00
                    [timezone_type] => 3
                    [timezone] => Europe/London
                )

            [1] => DateTime Object
                (
                    [date] => 2013-06-21 00:00:00
                    [timezone_type] => 3
                    [timezone] => Europe/London
                )

        )

) 
```

这两个条目现在可以使用映射函数轻松映射到您的输出样式中：

```
$consecutiveDatesString = function ($pair) {

    list($start, $end) = $pair;

    return $start == $end
        ? $start->format('j M')
        : $start->format($start->format('M') != $end->format('M') ? 'j M' : 'j')
            . $end->format(' - j M');
};

$consecutiveDatesStrings = array_map($consecutiveDatesString, $reduced); 
```

然后导致更紧凑的结果：

```
Array
(
    [0] => 5 - 8 May
    [1] => 19 - 21 Jun
) 
```

最后打印逗号分隔的：

```
echo implode(', ', $consecutiveDatesStrings), "\n"; 
```

这给出了，你猜怎么着：

```
5 - 8 May, 19 - 21 Jun 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T18:06:16.393

这将起作用：

```
$datearray = array("2013-05-05", "2013-05-06", "2013-05-07", "2013-05-08", "2013-06-19", "2013-06-20", "2013-06-21");
$current_date_array_index = 0;
$dates = array();

for($i=0,$c=count($datearray);$i<$c;$i++){
    if(strtotime($dates[$current_date_array_index][count($dates[$current_date_array_index])-1]." +1 day") != strtotime($datearray[$i])){
        $current_date_array_index++;
    }
    $dates[$current_date_array_index][] = $datearray[$i];
}

foreach($dates as $date){
    if(count($date) == 1){
        $output[] = date('j M',strtotime($date[0]));
    }else{
        $output[] = date('j',strtotime($date[0]))." - ".date('j M',strtotime($date[count($date)-1]));
    }
}

echo implode($output,", "); // output: 5 - 8 May, 19 - 21 Jun 
```

值得注意的是，如果日期超过一个月，它会说类似`29 - 5 Mar`- 未定义的第 29 天，所以`5 Mar - 8 Mar`如果我是你，我会这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T18:06:21.130

尝试这样的事情：

```
$prev = null;
$groups = array();
$idx = 0;

foreach($datearray as $day)
{
    if ($prev == null)
    {
        $prev = $day;
    } else {
        $currentDay = strtotime($day);
        $prevDay =strtotime($prev);
        if ($currentDay + 86400 > $prevDay)
        {
        // New Array
        $idx++;
    }

    $groups[$idx][] = $day;

    }
}

// TODO : Sort the array into date order 
```

注意：我没有测试上面的代码，所以它可能包含拼写错误。

我只是在数组中的每一天进行迭代，并确定它是否是前一天的连续一天。如果是，则将其添加到同一组中，如果不是，则将其添加到不同的数组索引中。在此之后，您可能需要使用[php 中的某种排序功能](http://php.net/manual/en/array.sorting.php)对日期进行排序。然后遍历数组组以确定日期范围。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T18:32:15.683

假设 PHP 5.3 或更高版本。

您可以利用 DateTime、DateInterval 和一些算法工作。

```
// create the same array but with DateTime objects to represent the dates
$dt_array = array_map(function ($e) { return new DateTime($e); }, $datearray);

$intervals = array();
$len_dt_array_m1 = count($dt_array) - 1;
if ($len_dt_array_m1 >= 0) {
    $current_interval = &$intervals[];
}

// now we traverse the array left to right.
// if the difference between the current date and the next is not +1 day, we assume a new interval has begun.
for ($i = 0; $i < $len_dt_array_m1; ++$i) {
    $current_dt = $dt_array[$i];
    $next_dt = $dt_array[$i+1];
    $diff = $current_dt->diff($next_dt);
    $current_interval[] = $current_dt->format('Y-m-d');
    if ($diff->days != 1 || $diff->invert != 0) {
        $current_interval = &$intervals[];
    }
}

// add last dt to the interval
if ($len_dt_array_m1 >= 0) {
    $current_interval[] = $dt_array[$len_dt_array_m1]->format('Y-m-d');
}

print_r($intervals); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T20:08:19.013

```
class Date_Array_Split
{
    private $date_arrays = array();

    public function __construct( Array $dates, $split_into = 2 )
    {
        // Sort the array
        asort( $dates );

        // Calculate the array size to pass to array_chunk
        $size = ceil( count( $dates ) / $split_into );

        // Break up the array into pieces
        $dates = array_chunk( $dates, $size );

        $this->date_arrays = $dates;
    }

    public function __toString()
    {
        $string = array();  // Oh, the irony!

        // Iterate through the chunks
        foreach( $this->date_arrays as $date_array )
        {
            // Here's the oldest date in the chunk
            $date_min = min( $date_array );

            // Here's the newest date in the chunk
            $date_max = max( $date_array );

            // Default format for output
            $date_min_format = 'j M';

            // Accomodate the slight formatting change
            if( date( 'my', strtotime( $date_min ) ) === date( 'my', strtotime( $date_max ) ) )
            {
                // Moth and year are the same, omit the month
                $date_min_format = 'j';
            }

            // String-i-fy the dates for output
            $date_min_string = date( $date_min_format, strtotime( $date_min ) );
            $date_max_string = date( 'j M', strtotime( $date_max ) );

            // Add them to the output array
            $string[] = sprintf( '%s - %s', $date_min_string, $date_max_string );
        }

        // Return the output array separated by commas
        return implode( $string, ", " );
    }
}

$dates_array = array(
    "2013-05-05", 
    "2013-06-20", 
    "2013-05-07", 
    "2013-05-08", 
    "2014-05-09", 
    "2013-05-09", 
    "2013-06-19", 
    "2013-06-21"
);

$dates = new Date_Array_Split( $dates_array );

echo( $dates ); 
```

输出：`5 - 9 May, 19 Jun - 9 May`

请注意，这是正确处理年份。这就是为什么输出看起来有点奇怪的原因。可能想在输出中解释这一点。

# wordpress - wordpress: echo custom field into WP_query array

> ID：14201335
> 
> 赞同：1
> 
> 时间：2013-01-07T17:53:22.060
> 
> 标签：wordpress

I have a basic query that displays latest news, but I added a custom field in the post editor so the user can define the Post ID's of the specific latest news they want to display.

```
$relatedpostnums = get_post_meta($post->ID, 'relatedpostnums', true);
$query = new WP_Query( array( 'post_type' => 'post', 'posts_per_page' => 5, 'post__in' => array( 31,7,53,35 ) ) ); while($query->have_posts()) : $query->the_post(); 
```

I have 31,7,53,35 as the posts I want to display. that is manually entered. If I want it to be dynamic, how do I replace those 4 numbers with the output from $relatedpostnums?

I did this (replaced the 4 numbers with $relatedpostnums):

```
$relatedpostnums = get_post_meta($post->ID, 'relatedpostnums', true);
$query = new WP_Query( array( 'post_type' => 'post', 'posts_per_page' => 5, 'post__in' => array( $relatedpostnums ) ) ); while($query->have_posts()) : $query->the_post(); 
```

But it only displays the first number, even if I set it to posts_per_page to 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T00:15:33.080

第三个参数`get_post_meta == true`表示该函数将返回单个结果，作为字符串（您的最新 ID）。

使其为假或不将返回一个数组

[请参阅此参考](http://codex.wordpress.org/Function_Reference/get_post_meta)

# c# - Razor @Html.Raw(model.function())

> ID：14201337
> 
> 赞同：1
> 
> 时间：2013-01-07T17:53:48.207
> 
> 标签：c#, razor

I use this code in a view:

```
@section JavaScript{
...
    @Html.Raw(Model.LoadJavaScriptData())
...
} 
```

LoadJavaScriptData() returns a String (JavaScript Code)

I've got already a view where this works, but with my new view it doesn't load the whole String. At least Firebug shows me that. Is it possible that the site finished loading before @Html.Raw function loaded the String into the view?

I already checked the String of LoadJavaScriptData() when it returns. It's correct.

I've got no clue what to do now.

Are there tools to load the site step by step? Especially can i go through the cshtml step by step?

I use .NET MVC 3

# jsf-2 - ConfigurableNavigationHandler parameter issue

> ID：14201338
> 
> 赞同：1
> 
> 时间：2013-01-07T17:53:50.593
> 
> 标签：jsf-2

Trying to navigation from Page A to Page B. While navigating to page B passing parameter using configurableNavigationHandler like below

```
public void navigate(String outcome) {
    FacesContext fc = FacesContext.getCurrentInstance();
    ConfigurableNavigationHandler nav = (ConfigurableNavigationHandler) fc
            .getApplication().getNavigationHandler();
    nav.performNavigation(outcome+"?faces-redirect=true&includeViewParams=true&oldPage=hello");
} 
```

In Page B when I click on back it has to retrieve the parameter value and navigate the user to the respective page.But getting null value while retrieving the request parameter.

```
public String navigateToOldPage() {
    FacesContext fc = FacesContext.getCurrentInstance();
    String oldPage = fc.getExternalContext().getRequestParameterMap().get("oldPage");
    return oldPage;     
} 
```

Could anyone please suggest me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:59:57.733

您基本上是在尝试访问`oldPage`错误 HTTP 请求中的参数，即在页面 B 中提交的表单之一，而不是显示页面 B 本身的表单。

基本上有2个选项：

1.  在显示页面 B 期间将请求参数设置为 bean 属性`<f:viewParam>`：

    ```
    <f:metadata>
        <f:viewParam name="oldPage" value="#{bean.oldPage}" />
    </f:viewParam> 
    ```

    与（在`@ViewScoped`豆子上）

    ```
    public String navigateToOldPage() {
        return oldPage;
    } 
    ```

    * * *

2.  `UICommand`在负责表单提交的组件中保留请求参数`<f:param>`：

    ```
    <h:commandButton ... action="#{bean.navigateToOldPage}">
        <f:param name="oldPage" value="#{param.oldPage}" />
    </h:commandButton> 
    ```

    或者，如果它只需要是一个真正的 GET 请求，那么使用`<h:button>`(or `<h:link>`)

    ```
    <h:button ... outcome="#{param.oldPage}" /> 
    ```

# mongodb - mongoDB好友关系和原子更新

> ID：14201340
> 
> 赞同：1
> 
> 时间：2013-01-07T17:54:00.153
> 
> 标签：mongodb, spring-data-mongodb

我需要使用 Spring Data 在 MongoDB 中为用户存储朋友关系。我的“模式”解决方案是将朋友的用户名（也是_id）存储在用户文档中。我没有使用 DBRef，因为 Spring Data 和 DBRef 在自我关系上似乎存在问题（朋友是用户：p）。一个简单的用户文档是这样的：

```
{
"_id" : "user1",
"email" : "user1@test.com",
"friendRequests" : {
    "user4" : 0
},
"friends" : ["user2", "user3" ],
"password" : "$2a$10$9iJWLZjBSu3rq19wh7KTduNXIVcXozsNVjwVogO9eoz0uXO52Z2NC"
} 
```

我认为这个模型足够好。但是当有人接受好友请求时，我必须更新两个用户的文档，并且操作不是原子的。在某些情况下，两者中只有一个得到更新。这不是关键数据，但有一个解决方案仍然会很好。这是我想太多了吗？我在 2 阶段提交[http://cookbook.mongodb.org/patterns/perform-two-phase-commits/](http://cookbook.mongodb.org/patterns/perform-two-phase-commits/)上找到了这个文档，但对于这种情况来说似乎太多了，尽管它很容易实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:16:59.357

如果不知道您的应用程序将如何使用数据，就很难回答这些类型的问题。请记住，在 MongoDB 中有许多不同的方式来表示基本相同的数据/模式，因此最适合您的应用程序的方式是适合您的应用程序需求的方式。

一些问题要问自己：
你知道每个用户平均有多少朋友吗？
您将如何显示/查询/更新用户的朋友？
上述哪些操作需要高性能且绝对是最新的，哪些可能需要更长的时间，或者稍后以批处理模式完成？

对于您的数据，每个可能的架构都需要权衡取舍。不断地将用户名添加到每个用户的朋友数组中意味着文档将不断增长（这对于性能更新来说不是最佳的，因为当文档超过其分配的空间时，它需要在下次更新时移动）。为了抵消这一点，您必须考虑以这种方式存储一组朋友时获得的收益。在获取有关用户的所有信息时，它是否使您只能进行一次读取？或者您是否还需要再次阅读（也许再次查询用户集合以获取有关朋友数组中每个用户的其他信息？

您已经在考虑更新的原子性，这有助于保持数据的一致性，但正如您正确指出的那样，这是您的应用程序可以处理的事情（或者您可以有一个后台作业运行并检测任何“部分”友谊更新和清理它们）。

您还应该考虑如何为集合建立索引 - 如果您需要在单个集合上使用多个索引来满足查询的 SLA，那么您的更新/插入必然会变慢（因为需要更新更多索引） . 这可能没问题，但只有您可以做出权衡的决定。

我希望这有帮助。

# assembly - 这个 MMX 内存复制代码需要栅栏吗？

> ID：14201346
> 
> 赞同：0
> 
> 时间：2013-01-07T17:54:23.353
> 
> 标签：assembly, memory-fences, mmx

这个基本的 mmx 内存复制代码在释放模式下会破坏内存，但仅限于某些编译器。具体来说是 Visual Studio 2010。我认为这是因为这段代码需要一个内存围栏，但我不确定它会去哪里或确切原因。此代码与 Visual Studio 2005 完美配合。

```
MMXMemCopy PROC dest:PTR BYTE, src:PTR BYTE, len:DWORD
  mov edi, dest
  mov esi, src
  mov ecx, len
  shr ecx, 6             //divide len by 64
  mov edx, ecx
  shl edx, 6
  mov eax, len
  sub eax, edx
  or  ecx, 0
  jz  lastbytes         //if < 64 bytes, copy 8 bytes at a time

copynext:             //copies 64 bytes
  movq   mm0, mmword ptr [esi]
  movq   mm1, mmword ptr [esi + 8h]
  movq   mm2, mmword ptr [esi + 10h]
  movq   mm3, mmword ptr [esi + 18h]
  movq   mm4, mmword ptr [esi + 20h]
  movq   mm5, mmword ptr [esi + 28h]
  movq   mm6, mmword ptr [esi + 30h]
  movq   mm7, mmword ptr [esi + 38h]
  movntq mmword ptr [edi], mm0
  movntq mmword ptr [edi + 8h], mm1
  movntq mmword ptr [edi + 10h], mm2
  movntq mmword ptr [edi + 18h], mm3
  movntq mmword ptr [edi + 20h], mm4
  movntq mmword ptr [edi + 28h], mm5
  movntq mmword ptr [edi + 30h], mm6
  movntq mmword ptr [edi + 38h], mm7

  add esi, 40h
  add edi, 40h
  dec ecx
  jnz copynext

lastbytes:                //copies last 8 bytes
  or eax, 0
  jz finished
  movq mm0, mmword ptr [esi]
  movntq mmword ptr [edi], mm0
  add esi, 8h
  add edi, 8h
  sub eax, 8h
  jmp lastbytes

finished:
  emms
  ret 
```

MMXMemCopy ENDP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:02:04.953

首先，`esi`并且`edi`是被调用者保存的。我认为您还需要`sfence`内存排序。

# c# - How to get the property value of dynamically generated usercontrol's control?

> ID：14201347
> 
> 赞同：0
> 
> 时间：2013-01-07T17:54:25.473
> 
> 标签：c#, asp.net, user-controls

This is the code of my user control.

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="NewUserControl.ascx.cs"           

  Inherits="usercontrol.NewUserControl" %>
  <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
  <asp:LinkButton ID="LinkButton1" runat="server"  onclick="LinkButton1_Click">LinkButton1</asp:LinkButton> 
```

and on another form on the button click event i am loaoding the user control.like this-

```
 protected void LoadControl_Click(object sender, EventArgs e)
    {
        newuc = LoadControl("NewUserControl.ascx") as NewUserControl;          
        form1.Controls.Add(newuc);
        Session["chksession"] = ((int)Session["chksession"]) + 1;

        if (((int)Session["chksession"]) >= 1)
        {
            for (int i = 1; i < ((int)Session["chksession"]); i++)
            {
                newuc = LoadControl("NewUserControl.ascx") as NewUserControl;
                form1.Controls.Add(newuc);
            }
        }
    } 
```

now user control can be loaded any no of times, now i need the text of all the textboxes present on the form on the click of a Button that is present on the .aspx page. i am new to asp...need guidance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:48:35.217

为什么不向您的 UserControl 添加一个允许您获取/设置文本的属性`TextBox1`：

```
public string Text {
    get { return TextBox1.Text; }
    set { TextBox1.Text = value; }
} 
```

在您的按钮处理程序中像这样访问它：

```
newuc.Text = "Setting the text";
string myString = newuc.Text; //getting the text 
```

**更新：**

由于您正在动态加载 UserControl，因此您必须将它们的值保存在 StateBag（ViewState、Session 等）中。

```
public string Text {
    get {
        //Default to any existing text
        string s = TextBox1.Text;
        //Use TextBox1.UniqueID to ensure a unique string for the ViewState key
        if (TextBox1.Text.Length == 0 & ViewState(TextBox1.UniqueID) != null) {
            //TextBox1.Text is empty, restore from ViewState
            s = ViewState(TextBox1.UniqueID).ToString;
        }
        return s;
    }
    set {
        //Set TextBox1.Text
        TextBox1.Text = value;
        //Store in ViewState as well
        ViewState(TextBox1.UniqueID) = TextBox1.Text;
    }
} 
```

# android - Upload image to vk.com

> ID：14201348
> 
> 赞同：4
> 
> 时间：2013-01-07T17:54:32.573
> 
> 标签：android, api, vk

I can successfully post a message in VKontakte (vk.com), but I can't figure out the way to post a message with an image in the attachment.

**Method:**

```
createWallPost(long owner_id, String text, Collection<String> attachments, String export, boolean only_friends, boolean from_group, boolean signed, String lat, String lon, String captcha_key, String captcha_sid); 
```

So, if I use this method like this:

```
api.createWallPost(account.user_id, message, null, null, false, false, false, null, null, null, null); 
```

It will post a message with some text successfully;

I have to use

```
Collection<String> attachments 
```

parameter and somehow put a bitmap into collection. I can post a link of the picture, but I do not want a link, I want an embedded image. Any suggestions?

[**SDK is here (Russian):**](https://github.com/yaroslav-v/Android-VKontakte-SDK)

[**Method**](http://vk.com/pages.php?o=-1&p=wall.post)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T08:31:42.510

所以，还有一个变种：

1) 下载官方VK android SDK [https://github.com/VKCOM/vk-android-sdk](https://github.com/VKCOM/vk-android-sdk)

2) 授权

3）看一个例子：

```
final Bitmap photo = getPhoto();
VKRequest request = VKApi.uploadWallPhotoRequest(new VKUploadImage(photo, VKImageParameters.jpgImage(0.9f)), 0, 0);
request.executeWithListener(new VKRequestListener() {
    @Override
    public void onComplete(VKResponse response) {
        photo.recycle();
        VKApiPhoto photoModel = ((VKPhotoArray) response.parsedModel).get(0);
        //Make post with photo
    }
    @Override
    public void onError(VKError error) {
        showError(error);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-14T15:04:40.907

更新。我更新它这个答案是因为 VK 发布了官方 sdk [https://vk.com/dev/android_sdk](https://vk.com/dev/android_sdk)。您现在应该将它用于任何目的，它也有满足您所有需求的文档。

好的，这是完美的解决方案，我自己尝试过：

下载适用于 Android 的 Vkontakte SDK：[https](https://github.com/thest1/Android-VKontakte-SDK) ://github.com/thest1/Android-VKontakte-SDK 。

1) 上传图片到服务器，这里有函数形式：[https ://github.com/devindi/Android-VKontakte-SDK/commit/342acbe76e97181fd1f09820504e47249c962640](https://github.com/devindi/Android-VKontakte-SDK/commit/342acbe76e97181fd1f09820504e47249c962640)

```
/**
 * Upload image to user wall. Method requires httpmime library to create POST with image
 * you can download it here:http://hc.apache.org/downloads.cgi
 * direct link: http://mirrors.besplatnyeprogrammy.ru/apache//httpcomponents/httpclient/binary/httpcomponents-client-4.2.3-bin.zip
 * @param filePath absolutely path to image
 * @param userID
 * @return uploaded photo data (photo id and owner id)
 */
public Photo uploadPhotoToWall(String filePath, long userID){
    try {
        String uploadServer=photosGetWallUploadServer(userID, null);
        HttpClient client=new DefaultHttpClient();
        HttpPost httpPost=new HttpPost(uploadServer);
        MultipartEntity albumArtEntity = new MultipartEntity();
        albumArtEntity.addPart("photo", new FileBody(new File(filePath)));
        httpPost.setEntity(albumArtEntity);
        HttpResponse response=client.execute(httpPost);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        StringBuilder builder = new StringBuilder();
        for (String line; (line = reader.readLine()) != null;) {
            builder.append(line).append("\n");
        }
        JSONObject photoObject = new JSONObject(builder.toString());
        return saveWallPhoto(photoObject.get("server").toString(), photoObject.get("photo").toString(), photoObject.get("hash").toString(), userID, null).get(0);
    } catch (IOException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    } catch (JSONException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings  File Templates.
    } catch (KException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
    return null;
} 
```

2）此函数将返回照片ID，因此您将能够使用墙。savePost() 方法来发布位图。像这样：

```
long photoPid = account.api.uploadPhotoToWall(bitmapFilePath, account.user_id).pid;

                Collection<String> attachments = new ArrayList<String>();
                String att = "photo" + account.user_id + "_" + photoPid;
                attachments.add(att);
                api.createWallPost(account.user_id, text, attachments, null, false, false, false, null, null, null, null); 
```

如果您有任何问题随时问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-08T14:23:26.530

```
shareDialog.setAttachmentImages(new VKUploadImage[]{
new VKUploadImage(image, VKImageParameters.pngImage())
            }); 
```

并且不要忘记：检查图像是否为空检查照片的VK权限（这与发布到墙上的权限不同）

# javascript - Check if there are more elements to come in $.each()

> ID：14201351
> 
> 赞同：2
> 
> 时间：2013-01-07T17:54:40.997
> 
> 标签：javascript, jquery

I am using the `$.each()` method of jQuery to loop over a couple of objects. Is there a way to find out if there are more objects to come in the `$.each()` method?

Something like:

```
$.each(data, function(o, myObject) {
    if(data.hasMoreObjects) {
        // append something 
    } else {
        // append nothing
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:57:52.827

传递给回调函数的第一个参数是`index`. 您可以将其与 进行比较`length`以确定是否有更多元素。

```
$.each(data, function(index, myObject) {
    if (index === (data.length - 1)) {
        // this is the last
    } else {
        // there are more coming
    }
}); 
```

根据`data`具体情况，您可能需要使用其他一些属性来代替`data.length`. 例如，如果`data`是一个对象，您将使用`Object.keys(data).length`,

[$.each](http://api.jquery.com/jQuery.each/)的[文档和 Object.keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T17:58:01.267

反过来会更容易。例如，如果您有：

```
a b c d 
```

你想`|`在它们之间插入，你可以这样做：

```
a| b| c| d 
```

换句话说，通过循环并将 a 添加`|`到除最后一个之外的所有内容。但是对于第一个来说，以不同的方式工作会更容易：

```
a |b |c |d 
```

因为你可以这样做：

```
var isfirst = true;
$.each(data, function(o, myObject) {
    if( isfirst) {
        isfirst = false;
    }
    else {
        // do something
    }
}); 
```

但是，如果这是不可能的，您可能必须循环一次来计算元素（除非它是一个数组而不是一个对象，在这种情况下`.length`会很好），然后将一个迭代器添加到您的循环中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T18:04:39.427

所有其他答案似乎都假设它`data`是一个*Array*（或具有某些属性`.length`），但根据[jQuery 页面](http://api.jquery.com/jQuery.each/)，您可以`$.each`在任何*Object*上使用。

这是一种获取对象的最后一个[可枚举](https://developer.mozilla.org/en-US/docs/Enumerability_and_ownership_of_properties)键的方法

```
function lastKey(o) {
    var keys = Object.keys(o);
    return keys[keys.length-1];
} 
```

然后，您可以在`$.each`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T17:58:38.693

```
var howmany = data.length,
    i = 1;
$.each(data, function(o, myObject) {
    if(i == howmany) {
        // do something with the last
    }
    else {
        // do something with the others
    }
    i++;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T18:01:47.273

将索引与长度 od 数据对象进行比较，

尝试这个

```
$.each(data, function(index, myObject) {
 if (index === (data.length - 1)) {
    //append nothing     } else {
    // append something
 }
}); 
```

# ios - CoreMIDI 适用于 iOS 和 MacOS，但不适用于 PC 或 Line6 Mobilizer

> ID：14201364
> 
> 赞同：2
> 
> 时间：2013-01-07T17:55:49.307
> 
> 标签：ios, midi, coremidi

我在我的 iOS 应用程序中使用 PGMidi 实现 MIDI。它工作得很好。但是，我收到了两份报告，称在某些情况下消息无法通过。第一个是在 PC 上使用 Ableton Live 进行无线传输。我知道它可以在带有 Ableton 的 Mac 上通过无线方式正常工作。另一种情况是使用 Line6 Mobilizer II。该设备显示在 MIDI 端口中，但没有注册任何 MIDI 消息。

我假设我对数据做错了什么，导致 PC 无法识别它？任何想法这可能是什么？

这是基本的 MIDI 发送内容（大部分直接来自 PGMidi）

```
-(void)noteOn:(NSUInteger)voice note:(NSUInteger)note{

if(voice == 1){

    UInt8 status = 144 + (UInt8)chordMIDIChannel;
    const UInt8 noteOn[]  = { status, (UInt8)note, chordMIDIVelocity };

    if(chordMIDIDest)[chordMIDIDest sendBytes:noteOn size:sizeof(noteOn)];
    else [midi virtualPortSend:noteOn size:sizeof(noteOn)];

}else{
    UInt8 status = 144 + (UInt8)leadMIDIChannel;
    const UInt8 noteOn[]  = { status, (UInt8)note, leadMIDIVelocity };

    if(leadMIDIDest)[leadMIDIDest sendBytes:noteOn size:sizeof(noteOn)];
    else[midi virtualPortSend:noteOn size:sizeof(noteOn)];
} 
```

}

和 PGMidiDestination 发送字节：

```
- (void) sendBytes:(const UInt8*)bytes size:(UInt32)size
{
assert(size < 65536);
Byte packetBuffer[size+100];
MIDIPacketList *packetList = (MIDIPacketList*)packetBuffer;
MIDIPacket     *packet     = MIDIPacketListInit(packetList);
packet = MIDIPacketListAdd(packetList, sizeof(packetBuffer), packet, 0, size, bytes);

[self sendPacketList:packetList];
}

- (void) sendPacketList:(const MIDIPacketList *)packetList
{
// Send it
OSStatus s = MIDISend(midi.outputPort, endpoint, packetList);
NSLogError(s, @"Sending MIDI");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:50:27.897

一般来说，代码看起来是正确的，但我怀疑你正在使用的端点有什么问题。

一个简单的测试是简单地将您的数据发送到系统上的每个端点并查看会发生什么，这样您就会知道它是您的数据还是您的端点配置。

用这个替换（临时）你的 sendPacketList 函数中的代码，看看你是否在这些目的地获得数据：

```
 // Send it everywhere
    for (ItemCount index = 0; index < MIDIGetNumberOfDestinations(); ++index)
    {
        MIDIEndpointRef outputEndpoint = MIDIGetDestination(index);

        if (outputEndpoint)
        {
            OSStatus s = MIDISend(midi.outputPort, outputEndpoint, packetList);
            // check s for errors
        }
    } 
```

我已经使用上面的代码发送到 MIDI 网络目的地以及 MIDI Mobilizer II 设备，并且它有效。

# c# - 从控制台应用程序更改用户密码

> ID：14201366
> 
> 赞同：0
> 
> 时间：2013-01-07T17:55:59.760
> 
> 标签：c#, .net, uac

我正在编写一个小型 C# (.NET 4) 应用程序，它将在登录到 Windows Server 2012 时作为用户“Shell”的替代品运行。除此之外，我想为用户提供更改他们自己的**本地**帐户的密码。

使用以下代码..

```
 DirectoryEntry directory = new DirectoryEntry("WinNT://" + Environment.MachineName + ",computer");
 DirectoryEntry userEntry = directory.Children.Find(username);
 userEntry.Invoke("SetPassword", new object[] { newPassword });

 userEntry.CommitChanges(); 
```

...如果代码是从提升的命令提示符启动的，则可以正常工作。但是，由于 Shell 替换作为“普通”应用程序运行，我得到一个

> 访问被拒绝

代码运行时出现异常，即使用户设置为本地管理员。

是否有任何代码或机制可以用来以编程方式设置用户自己的本地帐户密码而无需提升？或者（我知道这可能更像是一个 ServerFault 问题：）以任何方式将“替换外壳”作为提升的进程运行而无需禁用 UAC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:02:55.030

更改用户密码是一项高权限操作，因为您不希望任何恶意代码在您不知情的情况下清除您现有的凭据。您可以使用 . 从命令提示符执行程序
`runas /user:<a-priviliged-user> <your-program>.exe`。它当然会提示您输入特权用户的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:35:49.220

这有点麻烦，但是看看[这个页面](http://www.techrepublic.com/blog/window-on-windows/make-vista-launch-uac-restricted-programs-at-startup-with-task-scheduler/616)（虽然它来自 Vista 时代，但它仍然是相关的）。

这个想法是您创建一个具有嵌入式凭据的计划任务，以使用足够的凭据运行应用程序，但实际上并不计划任务运行。然后，您可以使用以下命令按需运行它（例如在登录期间）：

```
\windows\system32\schtasks.exe /run /tn "task name" 
```

就像我说的：一个笨蛋，但它可能足以满足您的要求 - 该程序将以管理员权限运行，而不会提示输入 UAC。

编辑：我刚刚在 Server 2012 上尝试过，由于某种原因，我无法让测试控制台应用程序以交互方式运行（即用户可以看到程序正在运行）。我可能只是我，但可能是 Server 2012 中的行为发生了变化，如果您需要与用户交互，这个技巧可能不适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T06:12:12.763

向您的程序集添加清单以通过 UAC（用户帐户控制）

`VS2010`您可以将清单文件添加到您的项目中。`Right click your project`解决方案资源管理器中的文件，选择`Add`，然后选择`New item`。在那里你可以找到`Application Manifest File`。

修改它，以便您获得以下内容之一：

1.  普通的
2.  最高可用（取决于用户权限）
3.  管理员权限

VS2010 还附带了 2 个工具可供您使用：

1.  MageUI.exe（清单生成和编辑工具，图形客户端）
2.  Mage.exe（清单生成和编辑工具，命令行）

# android-canvas - Android：如何在画布上绘制点数组

> ID：14201369
> 
> 赞同：4
> 
> 时间：2013-01-07T17:56:22.880
> 
> 标签：android-canvas, android-view, ondraw

我正在从另一个活动中读取一系列点并从这些点创建一条路径。我有一个名为“DrawCanvas”的自定义视图，它扩展了 View。目前代码正在投影一个空白的白色画布。有人可以帮我理解为什么画布没有绘制路径吗？

PreviewActivity.java

```
public class Preview extends Activity{

Canvas newCanvas = new Canvas();
MyPointsList object;

protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    getIntentData();
    Path path = new Path();
    if(object.getArrayList().get(0) != null){
        for(int i = 0; i < object.getArrayList().size(); i++){
            path.moveTo(object.getMyPoint(i).getX(), object.getMyPoint(i).getY());  
            path.lineTo(object.getMyPoint(i).getX(), object.getMyPoint(i).getY());
        }
    }

    FrameLayout canvas1  = new FrameLayout(this);

    DrawCanvas view;
    view = new DrawCanvas(Preview.this);
    view.onDraw(newCanvas, path);
    canvas1.addView(view);

    setContentView(canvas1);
}   

public void getIntentData(){
    Intent i = this.getIntent();
    if(i.hasExtra("parcel")){
        Bundle b = getIntent().getExtras();
        object = b.getParcelable("parcel");

        if(object != null){
            Log.d("Debug", object.getArrayList().get(5).getX() + " " + object.getArrayList().get(5).getY());

        }
        else if(object == null){
            Log.d("Debug", "Object is equal to Null");  
        }
    }       
} 
```

画布.java

```
public class DrawCanvas extends View {

public DrawCanvas(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public void onDraw(Canvas canvas, Path path){
    super.onDraw(canvas);
    canvas.drawARGB(255,255,255,255);

    Paint black = new Paint();
    black.setColor(Color.BLACK);
    black.setStyle(Paint.Style.STROKE);
    black.setStrokeJoin(Paint.Join.ROUND);
    black.setStrokeCap(Paint.Cap.ROUND);
    black.setStrokeWidth(3);

    canvas.drawPath(path, black);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-17T08:10:50.297

您不会`onDraw(Canvas canvas)`在自定义视图中覆盖正确的方法。正如我所看到的，您将`onDraw`一个空画布传递给超级。然后，您正在添加路径，但不要使视图无效以绘制您的修改。
而且，其他阻止您的结果可见的事情，您`DrawView`在调用您的`onDraw`. 我的猜测是，视图将“重置”其生命周期（`onMeasure`-> `onLayout`-> `onDraw`...），但会进行基础初始化。（我不确定）。因此，您的所有修改都不会被存储。
此外，您不应该在绘制某些东西时分配新对象。每次视图无效时，这将消耗大量内存。

因此，尝试`Paint`在开始时初始化对象：

```
private Paint paint;
private Path path;

public DrawCanvas(Context c) {
    super(c);
    init();
}

public DrawCanvas(Context c, AttributesSet a) {
    super(c, a);
    init();
}

private void init() {
    // create your paint object
    paint = new Paint();
    paint.setColor(Color.BLACK);
    ...
} 
```

接下来是您`Path`的 s 初始化：

```
public void setPath(Path path) {
    // store your new path
    this.path = path;
    // invalidate the view to call onDraw()
    invalidate();
} 
```

最后，覆盖真实的`onDraw`方法并绘制你的逻辑：

```
@Override
public void onDraw(Canvas canvas) {
    if (paint == null || path == null)
        return;

    canvas.drawPath(path, paint);
} 
```

现在您可以按如下方式设置新`Path`的：`onCreate()`

```
setContentView(canvas1);

DrawCanvas draw = new DrawCanvas(this);
canvas1.addView(draw);
draw.setPath(path); 
```

如果您将“重”处理作为 Path 对象，则应考虑调用`postInvalidate()`，因为`invalidate()`将在主线程中调用。

# javascript - 如何使大小写功能不区分大小写？

> ID：14201373
> 
> 赞同：3
> 
> 时间：2013-01-07T17:56:52.690
> 
> 标签：javascript, case

```
 <script type='text/javascript'>
        function redirect() {
            var input = document.getElementById('userInput').value;
            switch(input) {
                case 'ALCOA':
                    window.location.replace('alcoa-Forms.htm');
                    break;
                case 'alcoa':
                    window.location.replace('/alcoa-Forms.htm');    
                    break; 
```

我怎么做才能使这个函数不区分大小写，所以我可以只写一次？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T17:58:42.270

最简单的方法是使输入全部大写或全部小写。任君挑选：

```
input = input.toUpperCase();
switch (input) {
   case 'ALCOA':
      ... 
```

请记住，这也适用于`Alcoa`,`aLcOa`等。

你也可以只写`case`两次：

```
switch (input) {
   case 'ALCOA':
   case 'alcoa': 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:00:13.080

使输入大写：

```
<script type='text/javascript'>
    function redirect() {
        var input = document.getElementById('userInput').value;
        input = input.toUpperCase()
        switch(input) {
            case 'ALCOA':
                window.location.replace('alcoa-Forms.htm');
                break; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T17:58:51.437

您需要将输入转换为小写或大写。例如：

```
var input = document.getElementById('userInput').value.toLowerCase(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T18:10:55.153

虽然`.toLowerCase()`(or `.toUpperCase()`) 是最简单的方法，但还有一种正则表达式方法：

```
if (/^alcoa$/i.test(input)) {
    // ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T18:00:07.940

使用 .toLowerCase() 或 .toLocaleLowerCase() 请注意，这些函数与土耳其语等语言中的一些模糊异常几乎相同。

## 代码

```
function redirect() {
     var input = document.getElementById('userInput').value.toLowerCase();
     switch (input) {
        case 'alcoa':
            window.location.replace('alcoa-Forms.htm');
            break;
    }
} 
```

## 更详细

函数不“区分大小写”。相反，*您的代码*区分大小写。避免此问题的方法是在检查结果之前将输入*标准化*为单个案例。这样做的一种方法是在检查之前将字符串转换为全小写。

## 替代解决方案

使用 case fallthrough 语法：

```
switch(text) { 
     case 'a':
     case 'A':
         doSomething();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T18:34:02.403

如果你使用 toUpperCase() 那么在 switch(input) 函数里面的 case 字符串应该都是大写的，如下所示：

```
 var input = document.getElementById('userInput').value.toUpperCase();
    switch (input) {
       case 'ALCOA':
               // do something
               break;
    } 
```

如果你使用 toLowerCase() 那么在 switch(input) 函数里面的大小写字符串应该都是小写的，如下所示：

```
 var input = document.getElementById('userInput').value.toLowerCase();
switch (input) {
   case 'alcoa':
           // do something
           break;
} 
```

# r - 如何计算 R 曲线下面积的 95% 可信极限？

> ID：14201375
> 
> 赞同：2
> 
> 时间：2013-01-07T17:53:23.227
> 
> 标签：r, interpolation, integral

我有以下分布：

```
x<-c(22.5,28.14285714,33.78571429,39.42857143,45.07142857,50.71428571,56.35714286,62,67.64285714,73.28571429,78.92857143,84.57142857,90.21428571,95.85714286,101.5,107.1428571,112.7857143,118.4285714,124.0714286,129.7142857,135.3571429,141,146.6428571,152.2857143,157.9285714,163.5714286,169.2142857,174.8571429,180.5,186.1428571,191.7857143,197.4285714,203.0714286,208.7142857,214.3571429,220,225.6428571,231.2857143,236.9285714,242.5714286,248.2142857,253.8571429,259.5,265.1428571,270.7857143,276.4285714,282.0714286,287.7142857,293.3571429,299)
y<-c(0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.00328839614285714,0.00296425985714286,0.002655899,0.00236187857142857,0.002080895,0.00181184271428571,0.00155376085714286,0.00130578928571429,0.001074706,0.000877193,0.000709397142857142,0.000567189714285714,0.000447254,0.000346858571428571,0.000263689142857143,0.000195768428571429,0.000141427,9.92657142857141e-05,6.77857142857142e-05,4.48571428571428e-05,2.86428571428571e-05,1.75142857142857e-05,1.01357142857143e-05,5.52e-06,2.78857142857142e-06,1.27285714285713e-06,5.00714285714284e-07,1.5742857142857e-07,3.29857142857142e-08,2.78857142857137e-09,1.74e-12)

plot(x,y) 
```

我想找到将`x`左侧分布下的 0.95 区域和右侧区域的 0.05 分开的值（单尾 95% 的可信度区间）。

我想我必须将我的经验曲线拟合到一个函数，然后对该函数进行积分，这样我才能获得所需的值，但我真的不知道从哪里开始。

这怎么可能在 R 中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T21:14:58.390

正如其他答案所表明的那样，这是曲线下的积分问题，与确定面积达到总面积的 95% 的位置配对。我采用比[大卫的答案](https://stackoverflow.com/a/14202850/892313)更简单的集成方法。我没有插入曲线并对其进行积分，而是使用梯形积分规则来获得每个区间贡献的面积。然后将这些单独的区域相加以获得总面积。然后找到累积面积超过总面积95%的索引，并以此绘制一条线。

```
piece_area <- c(0, (x[-1] - x[-length(x)])*(y[-1] + y[-length(y)]) / 2)
cum_area <- cumsum(piece_area)
total_area <- cum_area[length(cum_area)]
idx095 <- min(which(cum_area > 0.95 * total_area))

abline(v = x[idx095]) 
```

![在此处输入图像描述](../Images/9e67fb7119089f054f98f4820121b501.png)

可以通过在分布的原始样本中使用更多点来获得交叉 95% 的确切点的更高分辨率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:39:33.097

这是一个积分问题（曲线下的总和）。您可以将您的积分分成正方形一 + 曲线一。但是，您可以通过样条线使用快速而肮脏的近似值：

```
y<-c(0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.003541755,0.00328839614285714,0.00296425985714286,0.002655899,0.00236187857142857,0.002080895,0.00181184271428571,0.00155376085714286,0.00130578928571429,0.001074706,0.000877193,0.000709397142857142,0.000567189714285714,0.000447254,0.000346858571428571,0.000263689142857143,0.000195768428571429,0.000141427,9.92657142857141e-05,6.77857142857142e-05,4.48571428571428e-05,2.86428571428571e-05,1.75142857142857e-05,1.01357142857143e-05,5.52e-06,2.78857142857142e-06,1.27285714285713e-06,5.00714285714284e-07,1.5742857142857e-07,3.29857142857142e-08,2.78857142857137e-09,1.74e-12)
x<-c(22.5,28.14285714,33.78571429,39.42857143,45.07142857,50.71428571,56.35714286,62,67.64285714,73.28571429,78.92857143,84.57142857,90.21428571,95.85714286,101.5,107.1428571,112.7857143,118.4285714,124.0714286,129.7142857,135.3571429,141,146.6428571,152.2857143,157.9285714,163.5714286,169.2142857,174.8571429,180.5,186.1428571,191.7857143,197.4285714,203.0714286,208.7142857,214.3571429,220,225.6428571,231.2857143,236.9285714,242.5714286,248.2142857,253.8571429,259.5,265.1428571,270.7857143,276.4285714,282.0714286,287.7142857,293.3571429,299)

sp=smooth.spline(x,y)
f = function(t)
{
    predict(sp,t)$y
}   

N=500 # this is an accuracy parameter
xBis=seq(x[1],x[length(x)],length=N)
yBis=sapply(x,f)

J = function (input)
{   # This function takes input in 1:N
    Integral = 0
    dx=(x[length(x)]-x[1])/N

    for ( j in 1: input)
{   z=xBis[j]
    Integral=Integral+ f(x[1]+z)*dx
}
J=Integral
}
######
I=J(N) # This is the value of the sum under the curve
# It should be roughly equal (given the shape of the curve) to:
index=max(which(y==y[1]))
I = (x[index]-x[1])*(y[index])*3/2
######
res=sapply(1:N,J)/I
Index5=max(which(res<=.05))
Index95=min(which(res>=.95))

x5=xBis[Index5] # This is the 5% quantile 
x95=xBis[Index95] 
```

高温高压

让我知道是否有任何不清楚的地方

PS我认为有更好的方法来做到这一点..

# jquery - 来自 getJSON 结果的 jQuery 分页（无插件）

> ID：14201376
> 
> 赞同：0
> 
> 时间：2013-01-07T17:57:02.063
> 
> 标签：jquery, json, pagination, getjson

任何能够帮助我解决以下问题的人：

下面的代码是我的脚本的缩短版本，它可以工作并显示大量结果。但是我想为它做某种分页，不知道从哪里开始：示例：显示 10 个结果和下一个链接...单击 n ext 显示下一个 10，然后是 prev 链接等....

希望有人可以帮助我

```
$.getJSON(Url).done(function(data) {
  // Console log the returned data (I used for testing to quickly know what data i wanted to display later)

  // Loop through the results
  $.each(data.photos.photo, function(i, data) {
    $(".results").append($("<a>").attr("href", PhotoUrl).attr("target", "_blank").append($("<img>").attr("src", ThumbUrl)));
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:00:24.653

通常您在查询中使用 LIMIT 子句并将 START 和 END 值保存在脚本中。然后，当用户单击下一个或上一个按钮时，您只需使用 LIMIT 子句的参数调用查询。

# java - UnsupportedOperationException - 此集合不支持 removeAll 方法（Java 集合）

> ID：14201379
> 
> 赞同：12
> 
> 时间：2013-01-07T17:57:11.437
> 
> 标签：java, collections

```
Set<Badge> availableBadges = myService.getAvailableBadges();
List<Badge> allBadges = Arrays.asList(Badge.values());
allBadges.removeAll(availableBadges);
/* Badge is an enumn */ 
```

哪些集合支持全部删除？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-07T17:58:09.817

`Arrays.asList`返回接口的部分不可修改的实现（部分`remove*`方法 - 感谢@LouisWasserman 的评论）`List`。

**编辑1：**在其上使用`ArrayList`包装器：`new ArrayList<Badge>(allBadges);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-12T07:32:18.850

您的收藏可能无法修改。

您需要创建新列表

```
List<T> list = new ArrayList<>(unmodifiableList); 
```

现在您的列表是可修改的，您可以执行删除和`removeAll`操作。

# javascript - 正确嵌套这个 JS

> ID：14201382
> 
> 赞同：0
> 
> 时间：2013-01-07T17:57:24.030
> 
> 标签：javascript

我有这个针对 JS 的移动 userAgent 测试，但不太确定如何正确嵌套它以扩展测试。

基本上现在它测试是移动设备还是桌面设备，我希望它进一步做的是移动设备，检查哪个移动设备并做某事。

```
<script type="text/javascript">
  if( /Android|iPhone|iPod|iPad|BlackBerry|Windows Phone/i.test(navigator.userAgent) ) {
    if ( /Android/i.test(navigator.userAgent) ) {
        var url = window.location.href = 'http://www.google.com';
        url.show(); 
    }
    elseif 
    if ( /iPhone/i.test(navigator.userAgent) ) {
        var url = window.location.href = 'http://www.bing.com';
        url.show(); 
    }
  }
    else
  {

  }
</script> 
```

我知道上面的内容是错误的，但据我所知，它没有解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:00:34.610

而不是重复自己，你可以做这样的事情：

```
if( /big regex here/i.test(navigator.userAgent)) {
    var agents = {
        "Android":"http://google.com/",
        "iPhone":"http://bing.com/"
    }, i, url;
    for( i in agents) {
        if( new Regexp(i,"i").test(navigator.userAgent)) {
            url = window.location.href = agents[i];
            url.show();
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:00:37.020

这里

```
<script type="text/javascript">
  var url="notmobile.html";
  if( /Android|iPhone|iPod|iPad|BlackBerry|Windows Phone/i.test(navigator.userAgent) ) {
    if ( /Android/i.test(navigator.userAgent) ) {
        url = 'http://www.google.com';
    }
    else if ( /iPhone/i.test(navigator.userAgent) ) {
        url = 'http://www.bing.com';
    }
//   url.show(); // some special mobile meaning? - never seen that syntax
    location=url; // this is how I would do it
  }
  else { // not mobile
    // this can be moved out side the ifs with the above location change too
    location = url;
  }
</script> 
```

# java - 如何在执行 Statement.executeQuery() 时处理 Java 冻结？

> ID：14201384
> 
> 赞同：0
> 
> 时间：2013-01-07T17:57:30.087
> 
> 标签：java, mysql, jdbc

您好，我正在编写一个在 Java 中运行并通过 JDBC 与 MySQL 数据库对话的应用程序。我遇到的问题是这个应用程序是一个实时应用程序，在某些时候与数据库的连接是不可避免的。这是代码的草图：

```
int result          = 0;
Statement st        = null;
ResultSet rs        = null;
System.out.println("Obatining reference to main connection");
Connection conne    = Main.connection;
try {
    System.out.println("In try");
    System.out.println("Creating statement");
    st = conne.createStatement();
    System.out.println("Obtaining result");
    rs = st.executeQuery("Properly constructed and tested sql query");
    rs.last();
    result = rs.getRow();
    System.out.println("Exiting try");
}catch(SQLException se){ 
    se.printStackTrace();
}finally{
    System.out.println("In finally");
    try { rs.close();    } catch (Exception e) { /* ignored */ }
    try { st.close();    } catch (Exception e) { /* ignored */ }
}
  return result; 
```

打印获取结果后程序冻结。如果连接处于活动状态，一切运行正常，但我需要保护它免受数据库关闭。我测试这个的方法是在我运行这个方法之前断开与数据库的连接。没有抛出异常，也没有产生错误。一旦它打印出获取结果，程序就会挂起。我希望有人知道如何从这种情况中恢复过来？应用程序再次完美运行，但我需要能够从不可用的数据库中恢复。

更多信息：

断开连接是指我通过 vpn 连接到数据库并关闭 vpn 以使数据库不可用。

有人发帖说 SQL 格式不正确。请允许我澄清一下，这不是实际的 SQL 语句。我宁愿不把实际的陈述放进去，它实际上并不相关，因为任何有效的陈述都会产生同样的不良影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:05:25.380

一种选择是在后台线程上进行数据库工作。这使得可以等待指定的时间量，然后在时间到期时继续进行。

最简单的入门方法是使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。您可以提交单个任务，并在返回的[Future](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)上等待特定的时间。还要检查 [invokeAll](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection,%20long,%20java.util.concurrent.TimeUnit%29)方法和朋友。

您也可以尝试使用[语句 timeout](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#setQueryTimeout%28int%29)，尽管如果存在驱动程序错误或意外的通信问题（例如，执行快速但需要很长时间传输结果的查询），这可能不如 Executor 方法可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:08:50.930

这是桌面应用程序还是 Java EE 应用程序？

如果它是一个桌面应用程序，您可以尝试让您的数据库交互成为一个线程，并为它们设置超时。

如果它是一个 Java EE 应用程序，并且您不愿意使用任何框架，您可以查看一些事务库，并实现对内部事务的显式控制（例如向它们添加超时）。起点：[http ://docstore.mik.ua/orelly/java-ent/ebeans/ch08_05.htm](http://docstore.mik.ua/orelly/java-ent/ebeans/ch08_05.htm)

# php - 在 drupal 7 中安装 superfish 菜单

> ID：14201385
> 
> 赞同：4
> 
> 时间：2013-01-07T17:57:42.453
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-theming

我需要在基于 Drupal 7 的站点中使用[superfish](http://drupal.org/project/superfish)，我安装了库和 superfish 模块并启用了它们。我还安装了 superfish 库，一切正常。

此外，我还添加了一个名为“superfish_menu”的新区域`mytheme.info`。

然后转到块并将 superfish 1 块分配给 superfish_menu 区域，然后将块配置到该块中分配的主菜单。

然后转到 page.tpl.php 并输入此代码

```
 <div style="border:3px solid red">
   <?php print render($page['superfish_menu']); ?>
 </div> 
```

最后，我清除了缓存。但不幸的是我看不到超级鱼菜单。

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:59:27.793

确保父菜单项是`Marked as expanded`. 您可以在菜单项编辑页面中找到，只需确保选中此复选框即可。

还要检查您是否下载了 superFish 库：[https ://github.com/mehrpadin/Superfish-for-Drupal/zipball/master](https://github.com/mehrpadin/Superfish-for-Drupal/zipball/master)

# c# - iPhone/Android 第一次加载页面需要很长时间

> ID：14201388
> 
> 赞同：0
> 
> 时间：2013-01-07T17:58:06.653
> 
> 标签：c#, iphone, asp.net-mvc, iis, asp.net-mvc-4

我在 C#/Razor/MVC 4 中有一个简单的站点，其中有很多 3rd 方 JavaScript 库（jQuery、jQuery Mobile、Google Charts、Modernizr 等）。该站点支持桌面和移动客户端（通过 .Mobile.cshtml 命名约定）。

当我将我的项目部署到 IIS 框并使用桌面浏览器 (Chrome/IE) 访问它时，页面会立即出现。如果我用移动设备（例如 iPhone）点击它，页面加载需要一分钟。但只是第一次，之后所有页面的加载速度都非常快。

我分析了数据库，但不是这样。所以它必须是客户端。任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:12:53.117

如果您的 Android 手机安装了 Chrome 浏览器，则可以使用**Chrome 远程调试。**请参阅此处的说明：[https](https://developers.google.com/chrome/mobile/docs/debugging) ://developers.google.com/chrome/mobile/docs/debugging 这应该允许您检查时间线。也许你可以在那里找到更多的线索。

如果您可以访问 MacOS 设备，那么您也可以尝试**Safari 远程调试**：[首先搜索结果](http://moduscreate.com/enable-remote-web-inspector-in-ios-6/) 并检查时间线/控制台。`console.log`您的 JS 代码中的一些调用可能会有所帮助。

从你向我描述的情况来看，这听起来像

*   移动设备正在缓存页面+资源，这需要很长时间
*   从 MVC4 自动生成视图需要一些时间来初始化

您应该能够通过更改桌面浏览器上的用户代理来模拟 Chrome/Safari Mobile 来验证第二个假设。这应该会触发 MVC4 移动生成，如果这是问题所在，在桌面浏览器上也应该需要 1 分钟。

# javascript - “停止运行这个脚本？” 当用户单击我的 HTML 选择元素时出现消息

> ID：14201390
> 
> 赞同：0
> 
> 时间：2013-01-07T17:58:10.977
> 
> 标签：javascript, jquery, html, internet-explorer-8

我去年创建了一个 ASP.net Web 应用程序。我收到了一个困扰我的错误报告。

有一个 HTML SELECT 元素出现在所有用户的网页中。OPTION 元素是使用 jQuery 填充的。它们没有`data-`属性或任何不寻常的东西，只有内部文本和`value`属性。

我收到（并复制）的错误报告说程序挂起并且“停止运行这个脚本？” 当用户单击 SELECT 元素时出现消息。我能看到这个用户和其他用户之间唯一不同的是，对于这个用户，SELECT 元素包含近 2000 个选项。但是，我不知道这会导致“停止运行此脚本吗？” 要出现的消息。

据我所知，SELECT 上的 .click 处理程序没有附加任何事件，但不知何故，每次单击它时都会运行一堆 JavaScript。

我尝试在我为页面编写的整个 .js 文件中插入断点，但在这种情况下没有一个断点被击中。当用户单击 SELECT 元素时，如何找到正在运行并导致程序挂起的代码？

顺便说一句，我相信我的用户正在使用带有 on 选项的 IE8 来升级或使用任何其他浏览器。

**更新以回应评论：**明确地说，我确信有一些 JavaScript 代码导致程序挂起和“停止运行这个脚本？” 要出现的消息。问题是我无法准确找出导致问题的代码。

提出问题的更简洁的方式是，“什么时候停止运行这个脚本？” 消息出现在 IE8 中，有什么方法可以找出消息出现时解释器正在阅读的 JavaScript 代码的哪个位置？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:17:46.970

可能的原因可能是

1.  用户安装了一些插件来监视 SELECT 更改
2.  用户正在运行 IE 调试器。这会使脚本变慢

IE JavaScript 引擎也很慢

** 您应该考虑将 SELECT 更改为[jQuery 自动完成](http://jqueryui.com/autocomplete/)或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:15:22.840

我想我可能已经弄清楚了。

我认为我的问题的答案是使用 Internet Explorer 内置调试​​器中的“Break All”功能。这停止了​​ jQuery 事件处理代码中的脚本。似乎不知何故，这里有大量事件被触发，即使我不相信任何事件都附加到 OPTION 元素。

经过进一步研究，发现问题与我在页面上使用 jQuery-UI 的方式有关。SELECT 恰好位于 jQuery-UI 对话框中。按照我在此处找到的建议：(http://stackoverflow.com/questions/3239841/jquery-ui-dialog-slow)，我将对话框的可拖动属性设置为 false，它现在可以正常工作了！

# java - Mule：同一会话中的多个流

> ID：14201391
> 
> 赞同：2
> 
> 时间：2013-01-07T17:58:20.913
> 
> 标签：java, web-services, session, esb, mule

我有一个 Mule 应用程序，其目的是发送电子邮件。该应用程序执行 2 个步骤：

1) 在第一个流程中，它接受端点上的请求并将其写入 vm 队列。

2) 在第二个流程中，vm 队列中的消息作为 HTTPPost 发送到 web 服务组件，该组件将发送电子邮件。

所以，到目前为止，我还没有对我的 mule_config.xml 中的“会话”做任何事情。因此，AFAIK，两个流程都将在同一个会话下。

现在，在同一个会话下有多个流是一种好习惯，还是我需要为每个流设置一个不同的会话（如果可能的话）？上述两种流程在同一会话下运行的方法的优缺点是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:54:43.260

首先要记住，Mule 中的会话与 Web 容器中的会话不同：它只是一个可以跨越多个流的特定消息属性范围。

考虑以下：

```
<flow name="SessionDemo">
    <vm:inbound-endpoint path="test.in" />
    <set-session-variable variableName="mySessionVar"
        value="myValue" />
    <vm:outbound-endpoint path="next.in" />
</flow>
<flow name="SessionPropagationDemo">
    <vm:inbound-endpoint path="next.in" />
    <logger message="#[sessionVars.mySessionVar]"/>
</flow> 
```

如果您运行此示例，您将看到`mySessionVar`会话范围的消息属性（也称为会话变量）已通过 VM 队列传播到下一个流。

如果您需要跨多个流携带消息属性，使用会话变量将使您的生活更轻松，否则每次通过传输“跳跃”到下一个流时，您必须手动将属性从入站复制到出站范围（这不会'不适用于`flow-ref`“啤酒花”）。

# quartz-scheduler - 从 Jmx 调用 scheduleJob

> ID：14201398
> 
> 赞同：0
> 
> 时间：2013-01-07T17:58:42.130
> 
> 标签：quartz-scheduler

我正在尝试从 jmx 开始一项石英工作。我已经建立了 jmx 连接，并且可以在 visualvm 上看到quartz/QuartzScheduler/Spring/SchedulerFactory MBean。

有一个名为“scheduleJob”的方法，它接受四个参数 p1、p2、p3、p4 并返回一个日期。

我不确定这些参数应该是什么？我可以用这种方法开始工作吗？我的参数应该是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:39:13.937

在quartz javadoc 中，您可以找到通过MBean 公开的所有方法的列表。

[http://quartz-scheduler.org/api/2.1.5/org/quartz/core/jmx/QuartzSchedulerMBean.html](http://quartz-scheduler.org/api/2.1.5/org/quartz/core/jmx/QuartzSchedulerMBean.html)

HIH

# mysql - SQL - 在父子连接中按子属性排序结果

> ID：14201402
> 
> 赞同：1
> 
> 时间：2013-01-07T17:58:53.113
> 
> 标签：mysql, sql, sql-order-by

我想知道是否有针对以下情况的解决方案。

我有一张桌子`SALE(id, client_name, total)` 和另一张桌子`SALE_ITEM (id, sale_id, item_name, item_price)`。`SALE`和表之间的关系`SALE_ITEM`是1：n。

如果我要在两者之间进行连接`SALE`，`SALE_ITEM`我仍然可以（仅通过 SQL）检索每个销售按 item_name 排序的结果吗？

例如：

```
SALE
id          client_name                  total
1           John                          200
2           Aaron                         1400
3           Christian                     500

SALE_ITEM
id          sale_id               item_name                item_price
1           1                     Ruler                    100
2           1                     Crayon                   100 
3           2                     Bike                     1100
4           2                     Gloves                   300
5           3                     Jeans                    500

SALE JOIN SALE_ITEM (afer the ordering by sale_item#name field)
sale_id     sale_client_name     sale_total     sale_item_id    sale_item_name
2           Aaron                1400           3               Bike
2           Aaron                1400           4               Gloves
1           John                 200            2               Crayon
1           John                 200            1               Ruler
3           Christian            500            5               Jeans 
```

从上面可以看出，结果在`SALE_ITEM#item_name`字段之后排序（参见 Bike, ..., Crayon, ..., Jeans) ，并提到`SALE_ITEM`属于相同的条目`SALE`彼此相邻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:24:59.797

这应该按照您需要的顺序为您提供行：

```
SELECT
  S.*, SI.*
FROM
  SALE S JOIN SALE_ITEM SI
  ON S.id = SI.sale_id JOIN
  (select SALE_ITEM.sale_id, min(item_name) as min_name
   from SALE_ITEM
   group by SALE_ITEM.sale_id) SI_MIN
  ON S.id=SI_MIN.sale_id
ORDER BY SI_MIN.min_name, SI.id 
```

我按`min_name`每笔销售排序，然后按 SI.id 排序。请看[这个小提琴](http://sqlfiddle.com/#!2/dc6e7/9/0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:02:07.727

```
select sale_id, client_Name, total, sale_item.id, item_name
from sale 
inner join sale_item on sale.id = sale_item.sale_id
order by sale.id, item_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:02:22.110

```
SELECT * 
FROM SALE S
 JOIN SALE_ITEM SI
   ON S.id = SI.sale_id
 ORDER BY SI.sale_id, SI.item_name 
```

# java - 没有 cookie 的 OpenCMS 会话？

> ID：14201407
> 
> 赞同：0
> 
> 时间：2013-01-07T17:59:12.580
> 
> 标签：java, cookies, opencms

我在一个基于 OpenCMS 的网页上工作，现在根据荷兰的新法律，我们必须提供一个可以避免 JSESSIONID cookie 的选项，但我在网上没有找到任何东西。

想法？？欢迎任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:55:13.330

OpenCms 模板是简单的 jsp 页面。您可以在那里禁用会话：

```
<%@ page session="false" language="java" contentType="text/html; charset=UTF-8" %> 
```

# python - PYTHON 2.7.3 中的布尔运算符

> ID：14201415
> 
> 赞同：0
> 
> 时间：2013-01-07T17:59:39.677
> 
> 标签：python, python-2.7, boolean-logic

我正在编写一个程序，在其中我要求用户输入。

我希望python检查输入是否是数字（不是单词或标点符号......），以及它是否是一个数字，表示我的元组中的一个对象。如果 3 个条件之一导致 False，那么我希望用户为该变量提供另一个值。这是我的代码

```
colour={'yello':1, 'blue':2, 'red':3, 'black': 4, 'white': 5, 'green': 6}
height_measurements=('centimeter:1', 'inch:2', 'meter:3', 'foot:4')
weight_measurements=('gram:1', 'kilogram:2', 'pounds:3')
print height_measurements
hm_choice = raw_input('choose your height measurement').lower()
while not hm_choice.isdigit() or hm_choice > 0 or hm_choice < len(height_measurements) :
    hm_choice = raw_input('choose your height measurement').lower()        
print weight_measurements
wm_choice = raw_input('choose your weight measurement').lower()
while not wm_choice.isdigit() or wm_choice > 0 or wm_choce < len(weight_measurements) :
    wm_choice = raw_input('choose your weight measurement').lower() 
```

当我对此进行测试时，无论我输入什么，它都会不断地让我为 height_measurement 插入输入

请检查我的代码并为我更正。另外，如果您愿意，请为我提供更好的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:11:47.493

我不会为您完全修复您的代码，但我会向您解释一些您似乎感到困惑的事情。

`raw_input`返回一个字符串。字符串和整数是两种类型，不能相互比较（即使在 python 2 中[this is not raise](http://codrspace.com/durden/comparing-unrelated-python-types/) a `TypeError`）。所以你的变量`hm_choice`是一个字符串，你正确地使用该`isdigit`方法来确保它是一个整数。但是，您随后将字符串与整数进行比较，该整数在其中一种条件下始终评估为 True，这意味着 while 循环将永远不会停止。所以我向你提出这个问题：**如何从字符串中获取整数？**

接下来，您需要检查该循环的逻辑。您是说： While`hm_choice`不是数字或 while`hm_choice`大于 0（我们已经知道这是无效语句）或 while`hm_choice`小于 4（或您的元组的长度）。

因此，如果其中任何一个为 True，则循环不会结束。如果您阅读我上面链接的文章，您会发现其中哪些总是评估为 True。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:37:49.917

> 当我对此进行测试时，无论我输入什么，它都会不断地让我为 height_measurement 插入输入

这是因为`hm_choice > 0`string 和 int 之间的比较，它是[未定义](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)的，可以等于`True`或`False`取决于实现。

我不太明白第三个条件的含义，所以我只是把它放在`THE_OTHER_CONDITION`那里。如果您定义`THE_OTHER_CONDITION = True`代码将起作用。

```
colour={'yello':1, 'blue':2, 'red':3, 'black': 4, 'white': 5, 'green': 6}
height_measurements=('centimeter:1', 'inch:2', 'meter:3', 'foot:4')
weight_measurements=('gram:1', 'kilogram:2', 'pounds:3')

print height_measurements
while True:
    hm_choice = raw_input('choose your height measurement: ').lower()
    if (hm_choice.isdigit() and int(hm_choice) > 0 and THE_OTHER_CONDITION):
        break

print weight_measurements
while True:
    wm_choice = raw_input('choose your weight measurement: ').lower()
    if (wm_choice.isdigit() and int(hm_choice > 0) and THE_OTHER_CONDITION):
        break 
```

# javascript - 退出 iframe html 元素？

> ID：14201419
> 
> 赞同：1
> 
> 时间：2013-01-07T18:00:02.970
> 
> 标签：javascript, html, iframe

我正在开发一个 html5 游戏应用程序，我的页面中有两个部分，菜单和游戏，它位于 iframe 中。当我打开应用程序时，只会出现菜单，如果我单击“播放”，则菜单会被隐藏（使用 jquery），并且它会在游戏部分中写入 iframe 元素：（`<iframe src="Game.html class="GameFrame" ></iframe>`）也在 jquery 中。现在，问题是我找不到退出 iframe 并再次显示菜单部分的方法。有人有想法吗？谢谢你，波阿斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:03:52.350

基本上你想`window`从 inner访问 parent `iframe`。用于`window.parent`访问父窗口。

如果您在父窗口中有 jQuery，您可以通过`window.parent.$`内部 iframe 访问它，并且从那里您知道如何显示/隐藏内容。

例如：

（在 iframe 中）

```
window.parent.$('#menu').hide(); 
```

# mysql - SQL 查询 - 如果 table1 中的行有值，则返回否则不

> ID：14201420
> 
> 赞同：0
> 
> 时间：2013-01-07T18:00:05.693
> 
> 标签：mysql, sql, union, any

我有一个查询，它从名为 的表中返回每一行`posts`，我现在已将照片添加到帖子中，因此当用户上传新照片时，它将在帖子中创建一行，然后显示上传的新照片。我有这一切工作，问题是当用户删除照片时，我不希望从帖子中返回该行。

这就是我到目前为止所得到的，它仍然返回所有行。

```
SELECT p.* FROM posts p WHERE p.toID='$id' AND p.state='0' AND

(
    (
        p.type = '2' AND
        p.post = ANY (SELECT ph.id FROM photos ph WHERE ph.state='0' AND ph.id=p.post)
    ) 
    OR 
    (
        p.type!='2' //I had to add this because it wasn't returning any other posts types 
                        //if there weren't any of the `type=2`, how could I also fix that?
    )
)

ORDER BY p.id DESC LIMIT 10 
```

所以为了知道返回该`post`行需要检查的是是否`ph.state`等于0，如果不等于0则意味着照片已被删除。

**编辑**

还有没有办法强制`p.post`成为一个`intval`？数据库中的列是 varchar，因为它通常存储基于文本的帖子

表结构：

```
CREATE TABLE `photos` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userID` int(11) NOT NULL,
  `photo` varchar(255) NOT NULL,
  `description` longtext NOT NULL,
  `albumID` int(11) NOT NULL,
  `state` int(11) NOT NULL,
  `date` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=651 ;

-- --------------------------------------------------------

CREATE TABLE `posts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `toID` int(11) NOT NULL,
  `fromID` int(11) NOT NULL,
  `post` longtext NOT NULL,
  `type` int(11) NOT NULL,
  `state` int(11) NOT NULL,
  `date` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=380 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:35:39.053

尝试这个：

```
SELECT DISTINCT p.* 
FROM posts p 
LEFT JOIN photos ph ON p.post  = ph.id AND ph.state = 0 
WHERE p.toID='$id' AND p.state = 0 AND 
        ((ph.id IS NULL AND p.type = 2) OR p.type != 2) 
ORDER BY p.id DESC 
LIMIT 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:01:30.973

你把 `'0'`它改成`0`不带引号的地方

你把 `'2'`它改成`2`不带引号的地方

编辑：

让它间隔就这样做

p.type < somenumber 和 p.type > someothernumver

# java - Antlr 语义谓词

> ID：14201432
> 
> 赞同：2
> 
> 时间：2013-01-07T18:00:38.440
> 
> 标签：java, antlr, antlr3

我正在尝试让语义谓词起作用。这似乎很简单，但不知何故不起作用，基于布尔条件我需要执行一个规则（它会吐出一个 AST）或者只是或手动构建一个

下面是解析器规则。

```
displayed_column
  :   
    {columnAliases.containsKey($text)}? 
    =>-> ^(PROPERTY_LIST ^(PROPERTY IDENTIFIER[columnAliases.get($text)])) 
  | sql_expression
  ; 
```

我也尝试了所有门控和消除歧义，但是在运行代码时，它总是进入第二条规则（sql_expression）。

谁能帮帮我？

谢谢

**编辑：** 我刚刚意识到 $text 在谓词运行时为空，这就是为什么它总是匹配第二条规则。我将规则更改为此并且它有效

```
displayed_column
  :
        sql_expression
        -> {columnAliases.containsKey($text)}? ^(PROPERTY_LIST ^(PROPERTY IDENTIFIER[columnAliases.get($text)])) 
        -> sql_expression 
```

但是我现在遇到了一个不同的问题，我意识到手动构建树将不起作用，我需要使用新文本（来自 columnAliases Map 的值）再次重新运行规则显示列，这可能吗？

这是我最初的问题 [https://stackoverflow.com/questions/14170541/antlr-dynamic-input-stream-modification-during-parsing](https://stackoverflow.com/questions/14170541/antlr-dynamic-input-stream-modification-during-parsing)

基本上我正在尝试以交互方式解析和解释 sql，如 statments ex：

```
select a.b.c from pool;
select min(abc.def[*]) from pool; 
```

由于列名可能有点长，我已经为用户提供了别名列名的首选项（通过不同的命令），例如，用户可能会设置首选项，然后运行他的命令

```
set column_alias a.b.c d;
select d from pool; 
```

现在，在解析时，我将首选项（映射）注入到生成的解析器中，我试图将新列替换/映射回原始列，然后继续解释。在解析器中处理它对我来说似乎是唯一的选择，因为我认为树语法很难做到这一点，因为该列跨越多个规则。

我可以发布整个语法，但它有点太长了，这是它的缩小版

```
select_stmt:
  : 'select' displayed_column 'from' pool
  ;

displayed_column
  : sql_expression 
  ;

sql_expression
  : term ( (PLUS^ | MINUS^) term)*
  ;

term  : factor ( (ASTERISK^ | DIVIDE^) factor)*
  ;

... <more_rules> ... 
```

我坚持这一点，使用字符串模板输出翻译后的语句，然后重新解析对我来说似乎是唯一的选择，但这需要将整个语法重写为输出模板（现在我有一个组合语法，输出一个 AST 和一个解释它的树语法）。如果有人能告诉我侵入性较小的方式，将不胜感激。

再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T11:18:32.853

与其将字符串存储为值，不如将实际的 AST 存储在您的地图中？然后可以通过在重写规则中将它们包装在`{`...中来注入这些 AST。`}`

一个演示：

```
grammar T;

options {
  output=AST;
  ASTLabelType=CommonTree;
}

tokens {
  STATS;
  DISPLAYED_COLUMN;
  NAME;
  SELECT;
}

@parser::header {
  import java.util.Map;
  import java.util.HashMap;
}

@parser::members {
  private Map<String, CommonTree> aliases = new HashMap<String, CommonTree>();
}

parse
 : (stmt ';')+ EOF -> ^(STATS stmt+)
 ;

stmt
 : set_stmt
 | select_stmt
 ;

set_stmt
 : 'set' 'alias' name Id {aliases.put($Id.text, $name.tree);} -> /* AST can be omitted */
 ;

select_stmt
 : 'select' displayed_column 'from' name -> ^(SELECT displayed_column name)
 ;

displayed_column
 : sql_expression -> {aliases.containsKey($text)}? ^(DISPLAYED_COLUMN {aliases.get($text)})
                  ->                               ^(DISPLAYED_COLUMN sql_expression)
 ;

sql_expression
 : term (('+' | '-')^ term)*
 ;

term
 : factor (('*' | '/')^ factor)*
 ;

factor
 : Num
 | name
 | '(' sql_expression ')'
 ;

name
 : Id ('.' Id)* -> ^(NAME Id+)
 ;

Id    : 'a'..'z'+;
Num   : '0'..'9'+;
Space : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

解析输入：

```
从池中选择 d；
设置别名 abc d;
从池中选择 d；
```

将导致以下 AST：

![在此处输入图像描述](../Images/01c8918f2cf68c89150aa3c03eed4b15.png)

## 编辑

> 谢谢巴特！唯一的事情是我需要将这些首选项保存在数据存储中，这样用户就不需要再次重新输入它们，希望我可以序列化 CommonTree。

:( 唉，它不是可序列化的。

在这种情况下，您可以将值存储为字符串，并使用小型辅助方法动态创建 AST，`createNameAST(String alias)`并注入此方法创建的 AST：

```
grammar T;

options {
  output=AST;
  ASTLabelType=CommonTree;
}

tokens {
  STATS;
  DISPLAYED_COLUMN;
  NAME;
  SELECT;
}

@parser::header {
  import java.util.Map;
  import java.util.HashMap;
}

@parser::members {
  private Map<String, String> aliases = new HashMap<String, String>();

  private CommonTree createNameAST(String alias) {
    try {
      TLexer lexer = new TLexer(new ANTLRStringStream(aliases.get(alias)));
      TParser parser = new TParser(new CommonTokenStream(lexer));
      return (CommonTree)parser.name().getTree();  
    } catch(Exception e) {
      throw new RuntimeException(e);
    }
  }
}

parse
 : (stmt ';')+ EOF -> ^(STATS stmt+)
 ;

stmt
 : set_stmt
 | select_stmt
 ;

set_stmt
 : 'set' 'alias' name Id {aliases.put($Id.text, $name.text);} -> /* AST can be omitted */
 ;

select_stmt
 : 'select' displayed_column 'from' name -> ^(SELECT displayed_column name)
 ;

displayed_column
 : sql_expression -> {aliases.containsKey($text)}? ^(DISPLAYED_COLUMN {createNameAST($text)})
                  ->                               ^(DISPLAYED_COLUMN sql_expression)
 ;

sql_expression
 : term (('+' | '-')^ term)*
 ;

term
 : factor (('*' | '/')^ factor)*
 ;

factor
 : Num
 | name
 | '(' sql_expression ')'
 ;

name
 : Id ('.' Id)* -> ^(NAME Id+)
 ;

Id    : 'a'..'z'+;
Num   : '0'..'9'+;
Space : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

如果您使用的是 ANTLRWorks 的调试器：该方法可能存在问题，`createNameAST`因为它使用`TParser`. 手动创建一个小测试用例：

```
import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
  public static void main(String[] args) throws Exception {
    String src = 
        "select d from pool; \n" + 
        "set alias a.b.c.x d; \n" +
        "select d from pool;";
    TLexer lexer = new TLexer(new ANTLRStringStream(src));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    CommonTree tree = (CommonTree)parser.parse().getTree();  
    DOTTreeGenerator gen = new DOTTreeGenerator();
    StringTemplate st = gen.toDOT(tree);
    System.out.println(st);
  }
} 
```

并在命令行上运行这一切：

```
java -cp antlr-3.3.jar org.antlr.Tool Tg
javac -cp antlr-3.3.jar *.java
java -cp .:antlr-3.3.jar Main > ast.dot
```

你会得到一个 DOT 文件，它代表之前发布的相同 AST。

# actionscript-3 - AS3 removeChild 提供的 DisplayObject 必须是调用者错误的子对象

> ID：14201436
> 
> 赞同：0
> 
> 时间：2013-01-07T18:00:43.640
> 
> 标签：actionscript-3, flash, air

我有问题，这是我正在使用的代码

```
 public var monsterArray:Array;
    public var score:Number;

    public function MonsterManager()
    {
        score = 0;
        monsterArray = new Array();
    }

public function spawnMonster( waveNumber:Number ):void
    {
        //This code needs to choose the ID not the monster itself
        var id:Number;
        var meleeRanged = Math.floor(Math.random()*2)
        trace("meleeRanged :"+meleeRanged);
        id = Math.floor(Math.random()*3)+1;
        switch(id)
        {
            case 1: var newMonster1:Monster1 = new Monster1();
                        newMonster1.monsterSetup( waveNumber, id );
                        monsterArray.push( newMonster1 );
                        addChild( newMonster1 );
                break;
        }

    }

public function update(  ):void
    {
        //trace("Go To Update");
        var i:number;
        i = 0;
        for each ( var monster:Monster in monsterArray )
        //monster needs a bool variable to say if it is active, if it is dont reuse,
        //if it is not activate, we can use setup and re use it,
        {
            monster.update( );
            if(monster.hp <= 0)
            {
                score += 10;
                removeChild( monster );
                array.splice(i,1);
                //monster.x = -1000;
                //monster.hp = 1;
                i++;
            }
        }
    } 
```

我已经删除了添加文本功能，因为这不会导致问题:)，但是当我调用 removeText 功能时，我在 flash 中收到此错误

```
The supplied DisplayObject must be a child of the caller. 
```

该数组是公开的，所以我不确定为什么不能删除它，请有人对此有所了解。

干杯。

下面的新代码

```
 public function update( heroGra:HeroDisplay ):void
    {
        //trace("Go To Update");
        var count:Number = monsterArray.length;
        var monster:Monster;

        for( var i:int = 0; i<count; i++)
        {
            monster = monsterArray[i];
            monster.update( heroGra );

            if( monster.hp <= 0 )
            {
                score += 10;
                removeChild( monster );
                monsterArray.splice(i,1);
                i--;
            }
        }
    } 
```

帆布。

如果 MonsterArray 中有超过 2 个怪物，则会发生错误，我知道如何让它停止这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:06:16.253

不确定您的每个功能是否都做得很好。尝试这样做：

```
public function update(  ):void
{
    var count:Number = monsterArray.length;
    var monster:Monster;

    for( var i:int = 0; i<count; i++)
    {
        monster = monsterArray[i];
        monster.update( );

        if(monster.hp <= 0)
        {
            score += 10;
            removeChild( monster );
            array.splice(i,1);
            count--;
            i--;
        }
    }
} 
```

# c++ - Qt 打开第二个窗口

> ID：14201438
> 
> 赞同：3
> 
> 时间：2013-01-07T18:00:57.473
> 
> 标签：c++, qt

我无法在 qt 项目中打开新窗口/对话框主窗口。

开启功能：

```
 void MainWindow::on_btDodajProdukt_clicked()
{
    newDialog = new DodajProdukt(this);
    newDialog->show();

} 
```

主窗口包括：

```
#include "dodajprodukt.h" 
```

主窗口.h

```
 DodajProdukt *newDialog; 
```

DodajProdukt 类是设计器中新增的窗口。

我收到此错误：

> mainwindow.obj:-1: błąd:LNK2019: 在函数“private: void __thiscall MainWindow::on_btDodajProdukt_clicked(void)" (?on_btDodajProdukt_clicked@MainWindow@@AAEXXZ)

编辑：

dodajprodukt.cpp

```
 #include "dodajprodukt.h"
#include "ui_dodajprodukt.h"

DodajProdukt::DodajProdukt(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::DodajProdukt)
{
    ui->setupUi(this);
}

DodajProdukt::~DodajProdukt()
{
    delete ui;
} 
```

轮廓：

```
 QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = Hurtownia
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    dodajprodukt.cpp \
    listaproduktow.cpp

HEADERS  += mainwindow.h \
    dodajprodukt.h \
    listaproduktow.h

FORMS    += mainwindow.ui \
    dodajprodukt.ui \
    listaproduktow.ui 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T09:14:05.187

右键单击项目，然后：清理，运行 qmake 并重建为我修复它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:17:16.177

您必须将与 DodajProdukt 相关的所有文件添加到您的 .pro 文件中（如果使用 qmake）：

对于在设计器中创建的 .ui 文件：

```
FORMS += dodajprodukt.ui # assuming that's how it's called 
```

而且您显然也有 .h/.cpp 文件：

```
HEADERS += dodajprodukt.h
SOURCES += dodajprodukt.cpp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:50:44.923

我有同样的错误。创建一个新项目并复制代码。然后创建一个简单的示例代码来检查此方法是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T16:10:17.910

我也有同样的问题。

我在删除 .pro.user 文件并删除项目构建文件夹后修复它

# php - 使用 PHP 格式化 MySQL 日期时间

> ID：14201442
> 
> 赞同：0
> 
> 时间：2013-01-07T18:01:11.387
> 
> 标签：php

我正在使用 PHP 5.3.18。

将以下两个变量转换为以下 5 种输出格式的最佳方法是什么？请注意，$date 派生自标准 MySQL 日期时间和日期列，但是，我不希望使用 MySQL 来格式化它们。

```
$date='2013-12-25 10:51:54'
$date='2013-12-25'

12/25/2013
Week 52 of year 2013
Month 12 of year 2013
Quarter 4 of year 2013
2013 
```

我可以使用以下两种解决方案中的任何一种，但不知道一个是否比另一个更好，或者是否存在更好的解决方案。

```
echo(date("m/d/Y", strtotime($date)));

$dtime = new DateTime($date);
echo($dtime->format("m/d/Y")); 
```

谢谢

编辑 - 这就是我最终做的。

```
$value=$date->format("m/d/Y");break;   // 12/25/2013
$value='Week '.$date->format("w").' of year '.$date->format("Y");break;   // Week 52 of year 2013
$value=$date->format("F").' '.$date->format("Y");break;   // December 2013
$value='Quarter '.ceil($date->format("n")/3).' of year '.$date->format("Y");break;   // Quarter 4 of year 2013
$value=$date->format("Y");break;   // 2013 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:06:53.963

只是在这种情况下更好（考虑性能）将使用日期功能。

有时您需要更复杂的操作 - 然后 DateTime 类可能会更好（肯定更方便和可读的代码）。

这就是我的想法。

# git - 如何在 git 中重命名最后 N 个提交消息？

> ID：14201443
> 
> 赞同：19
> 
> 时间：2013-01-07T18:01:17.417
> 
> 标签：git

我有 30 次提交，我想在所有消息的开头添加“Bug XXXXXXX”，我可以在单个操作/命令中执行此操作吗？

我试图避免挤压它们。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-07T18:05:17.907

使用`git rebase -i HEAD~<N>`其中 N 是要返回的提交数，并`-i`使其具有交互性，即它将在 vim 或任何您的默认编辑器中打开。参见[Scott Chacon 的书](http://git-scm.com/book/ch6-4.html#Changing-Multiple-Commit-Messages)。然后您可以更改提交消息。

如果您需要它自动化，那么您可能需要尝试[filter-branch](http://git-scm.com/book/ch6-4.html#The-Nuclear-Option%3a-filter-branch)：

> 如果您需要以某种可编写脚本的方式重写大量提交，则可以使用另一个历史重写选项

在这种情况下，您将使用：

```
git filter-branch --msg-filter <command> 
```

见[man git-filter-branch](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)

这是手册中给出的将“Acked-by”附加到一系列提交的示例。您可以将其更改为“BUG XXXXXXX”

```
git filter-branch -f --msg-filter '
    echo "Bug XXXXXXX: \c"
    && cat
    ' HEAD~<N>..HEAD 
```

其中 N 是返回并附加“BUG XXXXXXX”的提交次数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-26T13:23:39.203

最好不要依赖以下任何一种：

```
echo -n "Bug XXXXXXX: "

echo "Bug XXXXXXX: \c" 
```

echo 的行为取决于正在使用的 echo 版本。请参阅下面链接的 stackoverflow 问题：

['echo' 在 shell 脚本中没有换行符](https://stackoverflow.com/questions/11193466/echo-without-newline-in-a-shell-script)

更好的解决方案可能是：

```
git filter-branch -f --msg-filter '
    printf "%s" "Bug XXXXXXX: "
    && cat
    ' HEAD~<N>..HEAD 
```

# javascript - 当表单提交不被接受时，依赖选择器被搞砸了

> ID：14201444
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:01:20.427
> 
> 标签：javascript, jquery

我有一个带有选择器/下拉菜单的页面，该菜单依赖于另一个选择器。换句话说

- 选择器 1 包含一些类别，选择器 2 包含选择器 1 中每个类别的一些子类别。

-当页面加载时，选择器 1 具有可用的全部类别，选择器 2 具有可用的全部子类别。

- 在选择器 1 上进行选择时，通过 $('selector1').change(function(){ [...实现的功能...] });

问题是，当用户提交表单时，表单不被接受（即字段中包含错误、字段未填写等），因为“更改”功能没有重新触发，完整的选择器 2 上提供了许多子类别，这使得用户可以通过恶作剧或意外选择一个不适用于选择器 1 上选择的类别的子类别。有关如何最好地处理此问题的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:10:46.917

在没有看到您的代码外观的情况下，我只能猜测。听起来您需要一个函数，该函数将根据列表 1 中当前选定的项目加载第二个列表的项目。如果您已经拥有该函数，只需在页面加载时调用它，只要表单“不被接受”就有意义?

# c++ - Qt4“依赖”错误

> ID：14201448
> 
> 赞同：1
> 
> 时间：2013-01-07T18:01:27.807
> 
> 标签：c++, qt

我的电脑上已经安装了 QtCreator 和 Qt5，但是今天我需要使用 qt4，所以我从[http://qt-project 下载了“Qt libraries 4.8.4 for Windows (VS 2010, 234 MB)”。 org/downloads](http://qt-project.org/downloads)，为 Qt4 添加了 Qt 配置文件并尝试编译我的项目。但我收到以下错误：

> ... C:\Qt\qtcreator-2.6.1\bin\jom.exe -f Makefile.Release
> 
> 错误：依赖的“-”不存在。
> 
> jom: C:\Users\User\Desktop\OS-build-Qt_4_8_4_msvc2010- **__** \Makefile [release] 错误 2 ...

为什么？这是什么意思？

# git - 远程更新和推送导致的 Git 存储库膨胀

> ID：14201450
> 
> 赞同：0
> 
> 时间：2013-01-07T18:01:35.777
> 
> 标签：git, push, synchronize

我正在研究一种以脚本方式将更改推送到备份服务器的方法。最初的尝试旨在进行冗余检查。源服务器将其更改推送到远程服务器。作为备份检查，然后每隔 24 小时对远程服务器上的所有存储库运行一次 git 远程更新。目标是确保更新捕获任何失败/错过或中断的推送。我意识到我会同时看到本地分支和远程分支。由于用户没有使用存储库，给定的提交与相同的 SHA 值相关联，并且管理员有记录的恢复策略来处理它，我愿意处理添加的分支。令我惊讶的是，在运行 git branch -a 时，我不仅看到了双倍的分支，而且事实上，存储库大小增加了一倍。以下是备份推送所有分支后运行 git remote update 的前后影响：

$ du -sk test.git.old/

2419504 test.git.old/

$ du -sk test.git

5120684 测试.git

我正在考虑解决这个问题，但问题仍然存在。既然 SHA 值相同，为什么我看到代码存储了两次，而不是仅仅引用现有的 SHA 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:00:51.197

当您使用自动每日更新时，可能会因拥有大量松散对象而导致 git 对象数据库膨胀。

尝试使用重新打包您的 git objectstore

```
git gc 
```

或者

```
git gc --aggressive 
```

不建议定期运行积极进取，但在蓝月亮中执行一次就可以（但非常慢）。

在两个 repos 上执行此操作后，它们的大小应该大致相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:05:52.660

你是对的，git 每个 sha-1 哈希只会存储一个对象。但是，git 会以不同的方式（和不同的大小）存储对象，这取决于它是否被打包。“git gc”是强制垃圾收集和减少存储库大小的正常方法。仅仅因为一个存储库更大并不意味着它正在复制对象。“裸”回购也将小于工作回购。

对于拥有远程服务器存储库*和*备份存储库的更广泛目标，您可以像任何其他开发人员一样拥有备份“git pull”。请记住，一个克隆的存储库（它是最新的）将包含复制“服务器”存储库的所有信息。

我为您提出的一个想法（不直接使用）是像这样构建设置：

```
developer 1 repo ----->  repo.server  (bare)   <---  repo.backup (bare mirror)
                            ^
developer 2 repo -----------| 
```

如果您像这样设置它，您将很容易拥有“服务器”存储库的镜像，如果您的“服务器”存储库丢失，以后可以直接使用它。

我跑了一遍（下图），因为这是我第一次尝试镜像技术。就我而言，没有存储库“膨胀”。但是，您可能有不同的 git 命令，因此比较一下会很有用。

```
$ mkdir repo.local
$ mkdir repo.server
$ mkdir repo.backup
$ git init repo.local/      # initial repo
Initialized empty Git repository in /home/username/code/gittest/repo.local/.git/
$ cd repo.local/
repo.local$ dd if=/dev/urandom of=garbage.dat bs=1M count=2   # 2MB random file
2+0 records in
2+0 records out
2097152 bytes (2.1 MB) copied, 0.486459 s, 4.3 MB/s
repo.local$ git add garbage.dat
repo.local$ git commit -m "+ added 2MB file"
[master (root-commit) 0664e21] + added 2MB file
 1 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 garbage.dat
repo.local$ cd ..
$ git init --bare repo.server/      # bare server repo
Initialized empty Git repository in /home/username/code/gittest/repo.server/
$ cd repo.local/
repo.local$ git push ../repo.server/ master  # push to bare repo
Counting objects: 3, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 2.00 MiB, done.
Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To ../repo.server/
 * [new branch]      master -> master
repo.local$ # add repo.server as origin remote, just as if repo.local was a clone of repo.server
repo.local$ git remote add origin /home/username/code/gittest/repo.server/
repo.local$ git pull origin master
From /home/username/code/gittest/repo.server
 * branch            master     -> FETCH_HEAD
Already up-to-date.
repo.local$ cd ..
$ git push --mirror repo.backup/
fatal: Not a git repository (or any of the parent directories): .git
$ git init --bare repo.backup/   # bare server repo
Initialized empty Git repository in /home/username/code/gittest/repo.backup/
$ git push --mirror repo.backup/
fatal: Not a git repository (or any of the parent directories): .git
$ cd repo.server/
repo.server$ git push --mirror ../repo.backup/
Counting objects: 3, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 2.00 MiB, done.
Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To ../repo.backup/
 * [new branch]      master -> master
repo.server$ cd ..
$ du -sk repo.*
2180    repo.backup
4272    repo.local
2180    repo.server
$ cd repo.local/
repo.local$ git checkout -b topic1
Switched to a new branch 'topic1'
repo.local$ dd if=/dev/urandom of=garbage.dat bs=1M count=3   # 3MB random file
3+0 records in
3+0 records out
3145728 bytes (3.1 MB) copied, 0.729684 s, 4.3 MB/s
repo.local$ git add .
repo.local$ git commit -m "+ revision 2"
[topic1 d9d12d6] + revision 2
 1 files changed, 12161 insertions(+), 8105 deletions(-)
 rewrite garbage.dat (67%)
repo.local$ git branch -a
  master
* topic1
repo.local$ git push origin topic1
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 3.00 MiB, done.
Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To /home/username/code/gittest/repo.server/
 * [new branch]      topic1 -> topic1
repo.local$ git pull origin topic1
From /home/username/code/gittest/repo.server
 * branch            topic1     -> FETCH_HEAD
Already up-to-date.
repo.local$ git branch -a
  master
* topic1
  remotes/origin/master
  remotes/origin/topic1
repo.local$ cd ..
$ du -sk repo.*
2180    repo.backup
8436    repo.local
5284    repo.server
$ cd repo.server/                                       
repo.server$ git push --mirror ../repo.backup/         
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 3.00 MiB, done.
Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
To ../repo.backup/
 * [new branch]      topic1 -> topic1
repo.server$ cd ..
$ du -sk repo.*
5284    repo.backup
8436    repo.local
5284    repo.server
$ cd repo.server/
repo.server$ git branch -a
* master
  topic1
repo.server$ cd ../repo.backup/
repo.backup$ git branch -a
* master
  topic1
repo.backup$ 
```

# opengl - OpenGL三角形不需要的边缘边框

> ID：14201451
> 
> 赞同：5
> 
> 时间：2013-01-07T18:01:36.700
> 
> 标签：opengl, haskell

我正在尝试用纹理渲染一个正方形。它正在工作，除了我在两个三角形相交的对角线边缘上得到一条像素化线。

质地：

![正方形上使用的纹理](../Images/dff3ce7af65e24b4c206d199a8929876.png)

三个正方形的渲染结果，每个正方形由两个三角形组成：

![渲染结果](../Images/cc59599fa8d28e2b32333ab6fe3418de.png)

这条线只出现在对角线上。垂直或水平边缘上不显示任何内容。

代码：

```
import qualified Graphics.Rendering.OpenGL as GL
import qualified Graphics.UI.GLFW          as GLFW 
```

初始化：

```
GL.lineSmooth    $= GL.Enabled
GL.polygonSmooth $= GL.Enabled
GL.blend         $= GL.Enabled -- A
GL.blendFunc     $= (GL.SrcAlpha, GL.OneMinusSrcAlpha)
GL.lineWidth     $= 1.5 
```

加载纹理：

```
GL.texture GL.Texture2D $= GL.Enabled
(texName:_) <- GL.genObjectNames 1
GL.textureBinding GL.Texture2D $= Just texName
GL.textureFilter GL.Texture2D $= ((GL.Nearest, Nothing), GL.Nearest)
_ <- GLFW.loadTexture2D "wall.tga" [GLFW.BuildMipMaps] 
```

渲染四边形：

```
GL.textureBinding GL.Texture2D $= Just texName
GL.renderPrimitive GL.TriangleStrip $ do
    GL.texCoord $ GL.TexCoord2 0 (1::GL.GLfloat)
    GL.vertex $ vertex3 20 0 0
    GL.texCoord $ GL.TexCoord2 0 (0::GL.GLfloat)
    GL.vertex $ vertex3 20 20 0
    GL.texCoord $ GL.TexCoord2 1 (1::GL.GLfloat)
    GL.vertex $ vertex3 0 0 0
    GL.texCoord $ GL.TexCoord2 1 (0::GL.GLfloat)
    GL.vertex $ vertex3 0 20 0
GL.textureBinding GL.Texture2D $= Nothing 
```

我试过渲染`GL.Polygons`和`GL.Quads`：相同的结果。

当我评论带有`-- A`. 为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T20:55:17.963

问题出在线路上`GL.polygonSmooth $= GL.Enabled`。它似乎平滑了多边形的所有边缘，即使它上面还有另一条边缘。

删除这条线有效，甚至保持`GL.blend $= GL.Enabled`.

[OpenGL wiki 上](https://www.opengl.org/wiki/Common_Mistakes#glEnable.28GL_POLYGON_SMOOTH.29)的常见错误页面说：

> [多边形平滑]不是抗锯齿的推荐方法。请改用多重采样。

# r - RStudio 在启动时找不到我的库

> ID：14201452
> 
> 赞同：5
> 
> 时间：2013-01-07T18:01:39.397
> 
> 标签：r, rstudio

几周前，我在[RStudio 支持论坛](http://support.rstudio.org/help/discussions/problems/4367-rstudio-cant-find-my-library-on-startup)上问了这个问题，但那里没有解决，所以我在这里尝试。

我在 Windows 7 和 R 2.15.2 上使用 RStudio 0.97.248（当前版本）。

当我打开 RStudio 时，在正常的 R 版本信息之后，我遇到了两个错误：

```
Error in packageVersion("knitr") : package ‘knitr’ not found  Error in
packageVersion("Rcpp") : package ‘Rcpp’ not found 
```

但我可以毫无问题地使用`require()`. （也就是说，在启动 RStudion 时出现错误后，我可以进入`require(knitr)`并`knitr`加载成功。真正的问题是我无法在 R Markdown 文档上使用例如 Knit HTML 命令，即使在手动加载后也是如此`knitr`。如果我加载`knitr`，`require(knitr)`然后打开一个新的 R Markdown 文档（RStudio 默认为一个不错的模板），保存它并尝试编织 HTML，RStudio 在 R Markdown 文档的顶部给了我一个小错误消息

> R Markdown 需要 knitr 包（版本 0.5 或更高版本）

我假设 RStudio 没有查看正确的库路径。

```
> .libPaths()
[1] "\\\\gregorp.homedir.nebula.washington.edu/homes/R/win-library/2.15"
[2] "C:/Program Files/R/R-2.15.2/library"                               
[3] "C:/Program Files/RStudio/R/library" 
```

第一个条目是我可以安装包的地方（以及我的`Rcpp`和`knitr`安装所在的位置）。我想我和[这个人](http://support.rstudio.org/help/discussions/problems/2837-knitr)有同样的问题，但那个讨论是不连贯的。

我尝试添加该行

```
.Library.site <- "\\\\gregorp.homedir.nebula.washington.edu/homes/R/win-library/2.15" 
```

到我`Rprofile.site`文件`R-2.15.2/etc/`夹中的文件，但问题仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T22:26:02.093

我决定重新开始，我重新安装了 R 和 RStudio，并删除了我的旧库。

一个有风险的选项是以管理员身份运行 R（或 RStudio）——这允许我安装到默认库中，这避免了使用单独库的问题。

在较新版本的 RStudio 中，我使用单独的库没有问题，在我的 Rprofile.site 文件中指定站点库。

# c# - 从 DateTime.Now 中获取高分辨率时间戳

> ID：14201458
> 
> 赞同：5
> 
> 时间：2013-01-07T18:01:54.627
> 
> 标签：c#, .net, datetime

给定从另一台机器 A 到机器 B 的时间戳字符串（例如`hh:mm:ss.fff`）并假设两台机器的时钟同步，我如何让机器 B 计算其时钟与来自机器 A 的字符串中的时间之间的时间跨度？

我试过比较`DateTime.Now.Ticks`，但分辨率似乎是 10-20 毫秒。我想计算接近 1 毫秒的分辨率。

一段时间以来，我已经成功地使用`Stopwatch.GetTimestamp()`了高分辨率计时，但请记住，这并不是那么简单，因为我只有机器 B 中可用的字符串，并且没有`Stopwatch.GetTimestamp`用实际系统时间校准的好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:11:29.567

DateTime.Now 使用底层操作系统的日期，其分辨率约为 15 毫秒，在 Windows XP 之前的系统中甚至更差。你能得到的最好的就是秒表和它的滴答声/时钟中完全可用的高分辨率计时器。

您必须首先同步时钟，但这并不意味着**“**设置系统的日期”。同步时钟意味着计算读数之间的差异，可选地验证它是否随着时间流逝而恒定（即检查是否没有时钟比其他时钟计数更快），然后**使用计算出的偏移量**来..偏移读数，以便“实际值”是在同一时基上相对的——这是您的选择。

谷歌“时钟同步算法”阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T19:15:35.880

你不能做这样的事情：

*   在机器 A 上调用 Stopwatch.GetTimestamp()
*   将结果发送到机器 B
*   在机器 B 上调用 Stopwatch.GetTimestamp()
*   将结果发送到机器 A
*   在机器 A 上调用 Stopwatch.GetTimestamp()
*   计算调整因子（机器 A 的平均结果与机器 B 的结果之间的差异）
*   比较机器 A 和 B 上的后续结果时使用此调整因子

# swing - 异常处理“AWT-EventQueue-0”java.lang.ArrayIndexOutOfBoundsException：-1

> ID：14201462
> 
> 赞同：0
> 
> 时间：2013-01-07T18:02:14.820
> 
> 标签：swing, jdbc

我的程序中出现以下错误：

```
run:
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: -1
    at java.util.Vector.elementData(Vector.java:730)
    at java.util.Vector.elementAt(Vector.java:473)
    at javax.swing.DefaultListModel.elementAt(DefaultListModel.java:266)
    at bfpl.BFPL$1$2$13.actionPerformed(BFPL.java:851)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

我的代码是：

```
final JFrame f8=new JFrame("New Schedule");
                                    f8.setVisible(true);
                                    f3.setVisible(false);
                                    f8.setSize(1000,1000);
                                    f8.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                                    final JPanel p8=new JPanel(new GridBagLayout());
                                    GridBagConstraints g8=new GridBagConstraints();
                                    g8.insets=new Insets(2,2,2,2);
                                    JButton b21=new JButton("Back");
                                    JButton b22=new JButton("Save");
                                    JLabel l40=new JLabel("Match No");
                                    JLabel l41=new JLabel("Home Team");
                                    JLabel l42=new JLabel("Away Team");
                                    JLabel l43=new JLabel("Stadium");
                                    JLabel l44=new JLabel("Date");
                                    JLabel l45=new JLabel("mm/dd/yyyy");
                                    JLabel l56=new JLabel("City");
                                    final JTextField t38=new JTextField(15);
                                    JTextField t39=new JTextField(15);
                                    DefaultListModel dl1=new DefaultListModel();
                                    DefaultListModel dl2=new DefaultListModel();
                                    DefaultListModel dl3=new DefaultListModel();
                                    DefaultListModel dl9=new DefaultListModel();
                                    String query1="Select Stadium,Location from Stadiums";
                                    try{
                                        try {
                                            Class.forName("com.mysql.jdbc.Driver");
                                        } catch (ClassNotFoundException ex) {
                                            Logger.getLogger(BFPL.class.getName()).log(Level.SEVERE, null, ex);
                                        }
                                        Connection con1=DriverManager.getConnection("jdbc:mysql://127.0.0.1/BFPL","root","ilovepepsi");
                                        Statement stm=(Statement) con1.createStatement();
                                        ResultSet rs=stm.executeQuery(query1);
                                        while(rs.next()){
                                            String std=rs.getString("Stadium");
                                            String std1=rs.getString("Location");
                                            dl1.addElement(std);
                                            dl9.addElement(std1);
                                        }

                                    }   
                                    catch(SQLException ae){
                                        System.out.println("SQLException:"+ae.getMessage());
                                        System.out.println("SQLState:"+ae.getSQLState());
                                        System.out.println("VendorError:"+ae.getErrorCode());
                                        JOptionPane.showMessageDialog(p8,"Error in submitting data!");
                                    }
                                    String query2="Select Team_Name from Team";
                                    try{
                                        Connection con2=DriverManager.getConnection("jdbc:mysql://127.0.0.1/BFPL","root","ilovepepsi");
                                        Statement stm1=con2.createStatement();
                                        ResultSet rs1=stm1.executeQuery(query2);
                                        while(rs1.next()){
                                            String t=rs1.getString("Team_Name");
                                            dl2.addElement(t);
                                            dl3.addElement(t);
                                        }
                                    }
                                    catch(SQLException ae){
                                        System.out.println("SQLException:"+ae.getMessage());
                                        System.out.println("SQLState:"+ae.getSQLState());
                                        System.out.println("VendorError:"+ae.getErrorCode());
                                        JOptionPane.showMessageDialog(p8,"Error in submitting data!");
                                    }
                                    JList li1=new JList(dl1);
                                    JList li2=new JList(dl2);
                                    JList li3=new JList(dl3);
                                    JList li9=new JList(dl9);
                                    li1.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
                                    li1.setVisibleRowCount(2);
                                    li2.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
                                    li2.setVisibleRowCount(2);
                                    li3.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
                                    li3.setVisibleRowCount(2);
                                    li9.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
                                    li9.setVisibleRowCount(2);
                                    f8.add(p8);
                                    g8.gridx=0;
                                    g8.gridy=0;
                                    p8.add(l40,g8);
                                    g8.gridx=1;
                                    g8.gridy=0;
                                    p8.add(t38,g8);
                                    g8.gridx=0;
                                    g8.gridy=1;
                                    p8.add(l41,g8);
                                    g8.gridx=1;
                                    g8.gridy=1;
                                    p8.add(new JScrollPane(li3),g8);
                                    g8.gridx=0;
                                    g8.gridy=2;
                                    p8.add(l42,g8);
                                    g8.gridx=1;
                                    g8.gridy=2;
                                    p8.add(new JScrollPane(li2),g8);
                                    g8.gridx=0;
                                    g8.gridy=3;
                                    p8.add(l43,g8);
                                    g8.gridx=1;
                                    g8.gridy=3;
                                    p8.add(new JScrollPane(li1),g8);
                                    g8.gridx=0;
                                    g8.gridy=4;
                                    p8.add(l56,g8);
                                    g8.gridx=1;
                                    g8.gridy=4;
                                    p8.add(new JScrollPane(li9),g8);
                                    g8.gridx=0;
                                    g8.gridy=5;
                                    p8.add(l44,g8);
                                    g8.gridx=1;
                                    g8.gridy=5;
                                    p8.add(t39,g8);
                                    g8.gridx=2;
                                    g8.gridy=5;
                                    p8.add(l45,g8);
                                    g8.gridx=0;
                                    g8.gridy=6;
                                    p8.add(b21,g8);
                                    g8.gridx=1;
                                    g8.gridy=6;
                                    p8.add(b22,g8);

                                    int a1=li1.getSelectedIndex();
                                    int a2=li2.getSelectedIndex();
                                    int a3=li3.getSelectedIndex();
                                    int a10=li9.getSelectedIndex();
                                    final String st1=(String) dl1.elementAt(a1);
                                    final String st2=(String) dl2.elementAt(a2);
                                    final String st3=(String) dl3.elementAt(a3);
                                    final String st10=(String)dl9.elementAt(a10); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:57:08.353

那么 BFPL.java 第 851 行是什么？那是你的问题。在调用 Vector#elementAt(n) 之前检查向量的大小。

# c# - 如何为 Xbox（使用 XNA）适配 480p（宽屏）？

> ID：14201465
> 
> 赞同：0
> 
> 时间：2013-01-07T18:02:27.470
> 
> 标签：c#, xna, xbox

我在 MSDN 上阅读了有关 Xbox 360 编程注意事项的信息，它显示 480p（宽屏）和 480p（正常）都使用 640x480。我的游戏在所有 16:9 分辨率下都能正常运行，它也适用于其他分辨率，但游戏看起来非常不同（因为它是 2D 的）。我在 720p 和 1080p 上对其进行了测试，发现如果我将分辨率设置为 1080p，它仍然适用于 720p 电视，并且一切看起来都与 1080p 完全相同（我认为 Xbox 会自动调整整个游戏的大小以适应 720p）。

但我想知道 Xbox 支持的其他宽高比。另外我想知道如何修复分辨率以使其适合 480p（宽屏）

编辑：我目前正在使用下面的代码（因为我的游戏是为 1080p 设计的）

```
 float ratio = graphics.GraphicsDevice.DisplayMode.AspectRatio;
    if (ratio == (float)16 / (float)9)
    {
        graphics.PreferredBackBufferWidth = 1920;
        graphics.PreferredBackBufferHeight = 1080;
    }
    else if (ratio == (float)4 / (float)3)
    {
        graphics.PreferredBackBufferHeight = 1080;
        graphics.PreferredBackBufferWidth = 1440;
    }
    else
    {
        graphics.PreferredBackBufferHeight = 1080;
        graphics.PreferredBackBufferWidth = (int)(1080 * ratio);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:28:41.603

“Xbox 360 系统支持 HDTV 和普通电视机，具有多种分辨率（480p、720p、1080i 和 1080p）和多种纵横比（4:3、16:9 和 16:10）。控制台自动缩放游戏输出到所有者显示器的分辨率，如果游戏使用宽屏纵横比，如果所有者的显示器不是宽屏，控制台会自动添加“黑条”（信箱）。

来源：http: [//msdn.microsoft.com/en-us/library/bb203938.aspx](http://msdn.microsoft.com/en-us/library/bb203938.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T04:44:19.927

如果游戏分辨率低于 Xbox360，请转到 Xbox 上的设置，找到屏幕尺寸并使其适合您的电视。如果这不起作用并且您没有看到更好的改进，请尝试通过使用对比度/亮度/清晰度/颜色来调整您的电视以更好地执行。如果这仍然不能改善游戏的外观，那么它可能是游戏映射。如果地图设置得更高，它看起来会更好，但会减慢系统的渲染速度，随着时间的推移降低其完整性，直到您遇到严重的关闭或“死亡之环”。所以有时纹理看起来不完美，或者凹凸贴图看起来很糟糕，这是因为控制台一次只能处理这么多的变量和渲染。参考Fallout3，看贴图，远看会很好看，

这可能有点跑题了，但我想我今天应该参与一些事情。

此致： Joel DV c2002-2013

# java - Java 日期和夏令时

> ID：14201469
> 
> 赞同：2
> 
> 时间：2013-01-07T18:02:43.940
> 
> 标签：java, date, dst

我正在尝试使用 for 循环打印一天中的所有时间并增加 Date 对象。但我不能有“Sun Mar 25 02:00:00”，我只有这些：

```
Sun Mar 25 01:00:00 CET 2012
Sun Mar 25 03:00:00 CEST 2012
Sun Mar 25 03:00:00 CEST 2012
Sun Mar 25 04:00:00 CEST 2012
Sun Mar 25 05:00:00 CEST 2012 
```

我对拥有 TimeZone 不感兴趣。我认为问题出在夏令时，但我需要“Sun Mar 25 02:00:00”。我该怎么做才能创建那个日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:44:03.907

您可能想要一个为 UTC 设置的 DateFormat 对象（不遵守夏令时），使用设置为 UTC 的日历也会大大简化事情。

```
public static void main(String[] args) {
    TimeZone utc = TimeZone.getTimeZone("UTC");
    Calendar date = Calendar.getInstance(utc);
    DateFormat format = DateFormat.getDateTimeInstance();
    format.setTimeZone(utc);
    date.set(2012, 02, 24, 23, 00, 00);
    for (int i = 0; i < 10; i++) {
        System.out.println(format.format(date.getTime()));
        date.add(Calendar.HOUR_OF_DAY, 1);
    }
} 
```

这提供了以下输出：

```
Mar 24, 2012 11:00:00 PM
Mar 25, 2012 12:00:00 AM
Mar 25, 2012 1:00:00 AM
Mar 25, 2012 2:00:00 AM
Mar 25, 2012 3:00:00 AM
Mar 25, 2012 4:00:00 AM
Mar 25, 2012 5:00:00 AM
Mar 25, 2012 6:00:00 AM
Mar 25, 2012 7:00:00 AM
Mar 25, 2012 8:00:00 AM 
```

当然，您可以使用格式化程序来格式化您喜欢的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:10:14.893

该类`Calendar`允许您在转换`Date`值时指定时区。请参阅[API 文档](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)

# php - 我应该尽可能隐藏脚本的网址吗？

> ID：14201471
> 
> 赞同：0
> 
> 时间：2013-01-07T18:02:55.693
> 
> 标签：php, html, url

我对 php 还很陌生，我想知道该怎么做。

对于我网站上的几个功能，我有一个 php 脚本来处理用户单击某些内容后的操作。IE：

```
<a href='/php/delete.php?id=xxx'>delete</a>

<form action='/php/handleregistration.php' method='post'></form> 
```

在我的代码中，当您查看源代码时，这些链接很容易看到，但是查看其他网站的代码，这些引用就更难找到了。我想大多数是由相同类型的 php 脚本处理的，但通过一些 javascript/jQuery 处理。

所以，我的问题是，我应该这样做吗？为什么以及最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:05:45.357

不，URI 是公共信息。它们必须被发送到浏览器，以便浏览器向它们发出请求。如果浏览器得到一些信息，用户也会得到它。当您必须调试事物时，混淆 URI 只会让您的生活更加困难。

OTOH，你应该做的是：

1.  在让某人编辑数据之前执行身份验证/授权（包括“*此*用户是否允许删除*此*内容？”之类的测试）。
2.  对更改服务器上数据的请求（例如删除内容）使用 POST 请求（因此不是链接）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:06:16.577

我不相信你需要担心。您应该始终编写安全代码，并在对数据进行任何操作之前验证和清理您的数据。IE：不要假设 id=xxx 是有效的，因为有人可以手动输入知道脚本 URL 的内容。

您看到的大多数网站可能都在使用框架或某种 url 重写。这使得 URL 看起来更好（甚至是脚本）。不过，它并没有增加太多的安全性，这可以被认为是通过默默无闻的安全性。它只会阻止不知道自己在做什么的人受到简单的攻击。它永远不会阻止熟练的攻击者，这就是为什么应该在服务器端实施安全性。

编辑：

作为旁注，您可能希望使用 POST 进行删除，以防止一些令人讨厌的不可预见的后果。正如蒂姆所说，您应该有一个删除确认页面，因为即使用户登录，也不意味着他们可以控制。

想象一个网站的 iframe 设置为 width=0 和 height=0 src=http://yoursite.com/php/delete.php?id=xxx

这将导致登录用户删除他们的帐户。（或更改密码、从信用卡扣款等）在他们不知情的情况下。

当然，将 GET 更改为 POST 并不能完全解决这个问题，但它是保护 Web 应用程序的众多步骤之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:04:41.543

始终在服务器上强制执行安全性。最终，在客户端（Web 浏览器）上所做的事情无关紧要。

但是，您可能希望（强烈建议这样做）使用不同的 HTTP 方法，例如 GET、POST、PUT 和 DELETE，以更好地表示操作。这可能会稍微影响您的标记/JavaScript，例如将您的删除按钮放在一个表单中，以便您可以使用 HTTP DELETE 方法。

见[http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T18:05:02.803

没有什么不同的。任何人都可以查看浏览器开发工具的网络选项卡，并查看发送到您的服务器的内容。

无论您的代码多么模糊，客户端都没有安全性。

相反，验证服务器上的所有内容。

# node.js - Node.js - 获取当前文件名

> ID：14201475
> 
> 赞同：146
> 
> 时间：2013-01-07T18:03:32.847
> 
> 标签：node.js

如何获取当前文件名、函数名和行号？

我想用它来记录/调试，相当于`__FILE__`，`__LINE__` 在c

* * *

## 回答 #1

> 赞同：279
> 
> 时间：2015-02-04T10:31:22.753

Node.js 提供了一个标准 API 来执行此操作：[Path](http://nodejs.org/api/path.html)。

获取当前脚本的名称很容易：

```
var path = require('path');
var scriptName = path.basename(__filename); 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-09-22T10:02:08.303

在模块中，您可以执行以下任何操作来获取带有文件名的完整路径

```
this.filename;
module.filename;
__filename; 
```

如果您只想要没有路径或扩展名的实际名称，您可以这样做。

```
module.filename.slice(__filename.lastIndexOf(path.sep)+1, module.filename.length -3); 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-08-06T12:45:54.203

仅获取文件名。简单地没有额外的模块：

```
// abc.js
console.log(__filename.slice(__dirname.length + 1));

 // abc
console.log(__filename.slice(__dirname.length + 1, -3)); 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-08-31T11:41:45.453

```
'use strict';

const scriptName = __filename.split(/[\\/]/).pop(); 
```

# 解释

```
console.log(__filename);
// 'F:\__Storage__\Workspace\StackOverflow\yourScript.js'
const parts = __filename.split(/[\\/]/);
console.log(parts);
/*
 * [ 'F:',
 *   '__Storage__',
 *   'Workspace',
 *   'StackOverflow',
 *   'yourScript.js' ]
 *
**/ 
```

这里我们使用带有[正则表达式的](https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Regular_Expressions)[split](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split)函数作为第一个参数。 我们想要用于分隔符的正则表达式是(split by or ) 但必须对符号进行转义以将其与正则表达式终止符区分开来，所以.
`[\/]``/``\``/``/``/[\\/]/`

```
const scriptName = __filename.split(/[\\/]/).pop(); // Remove the last array element
console.log(scriptName);
// 'yourScript.js' 
```

# 不要使用这个

你真的应该`path.basename`改用（首先[记录在 Node.js v0.1.25 中](https://nodejs.org/docs/v0.1.25/api.html)），因为它可以处理你不想知道的所有极端情况，比如内部带有斜线的文件名（例如，在 unix 上名为“foo\bar”的文件）。请参阅[上面](https://stackoverflow.com/a/28319077/521957)`path`的答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-08T07:26:34.873

您还可以查看[console-plus](https://github.com/itadakimasu/console-plus/blob/master/console-plus.js)。这会将文件名和行号添加到任何日志记录文本中，并且 .log、.info 和 .error 具有不同的颜色。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-03T18:58:59.907

好吧，我想使用文件名作为记录器的标签，所以最直接的，我想要的是：

```
__filename.substring(__dirname.length + 1, __filename.lastIndexOf(".")) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-10T10:20:39.497

我知道已经很久了，但我所做的是`__filename.split('\\').pop()`。这将获得带有文件名的完整路径，然后将其拆分，`\`然后得到最后一个索引，这将是您的文件名。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-27T15:32:09.080

你可以使用这个函数来获取文件名：

```
/**
 * @description 
 * get file name from path
 * @param {string} path path to get file name
 * @returns {string} file name
 * @example 
 * getFileName('getFileName/index.js') // => index.js
 */
export default function getFileName(path) {
    return path.replace(/^.*[\\\/]/, '');
}
```

如果你使用 nodejs，你可以安装包含这个功能的包 [https://www.npmjs.com/package/jotils](https://www.npmjs.com/package/jotils)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-09T19:06:49.430

只是因为我没有看到它在这里列出，另一种选择是`__dirname`从`__filename`.

```
__filename.replace(`${__dirname}/`, '') 
```

如果您不想导入`path`模块，我认为这很有用。但是，我相信这`path.basename(__filename)`是最合适的。

# c# - 使整个屏幕变暗

> ID：14201478
> 
> 赞同：0
> 
> 时间：2013-01-07T18:04:10.510
> 
> 标签：c#, opengl, opentk

我正在使用 C# 中的 OpenTK 开发游戏。目前正在尝试实现暂停菜单系统。

我需要您帮助的一项功能是在菜单出现时使整个屏幕变暗。

渲染完所有内容后，有什么方法可以对每个像素（RGB 的一半？）进行最终修改？如果不是，我知道在屏幕上绘制一个四边形是可行的，但我似乎无法弄清楚如何获得半透明以使用 OpenTK 四边形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:06:50.063

可以做的是创建一个半不透明的灰色图像。当游戏暂停时，只需在所有内容的顶部绘制该纹理（但可能在暂停文本下方，这样它也不会显示为灰色）所有游戏元素仍将显示出来（因为纹理是不透明的），但是它们实际上会“变灰”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:41:57.410

一个简单的效果，它只使用 100% 和 0% 的 alpha，但使屏幕“变暗”，是具有黑色和清晰像素的棋盘图案（暗 50%），并将其渲染到屏幕上。

这样做的缺点是它不会完美地“变暗”屏幕，但它比处理部分透明度更快，并且可以产生很好的效果（有点多样性）。

# flash - 是否有人在 Flash Builder 或 Flash Professional 项目中实现了 TestFlight SDK？

> ID：14201480
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:04:14.003
> 
> 标签：flash, sdk, flash-builder, testflight

有没有人设法让它与 FB 或 Flash Pro 项目一起使用？我希望将 TestFlight 的增强功能用于 iPad 应用程序。

TestFlight 软件开发工具包 (SDK) 是一个库，可以添加到任何 iOS 应用程序中，用于在 beta/内部测试中跟踪分析，也可以与生产中的应用程序一起使用（可在 App Store 中获得）。

[http://help.testflightapp.com/customer/portal/articles/829549-what-is-the-testflight-sdk-](http://help.testflightapp.com/customer/portal/articles/829549-what-is-the-testflight-sdk-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:41:33.913

最简单的方法是使用 NativeExtension：SDK 的包装器。检查此链接并确保您在最后一条评论中描述了 eh 步骤：

[http://extensionsforair.com/extensions/test-flight/](http://extensionsforair.com/extensions/test-flight/)

我正在使用它来将 2 个 Flash Builder 应用程序的构建分发给一个团队。

# iphone - UITableView 无明显原因变得缓慢且无响应

> ID：14201483
> 
> 赞同：3
> 
> 时间：2013-01-07T18:04:29.143
> 
> 标签：iphone, objective-c, ios, xcode

似乎在使用了一点之后，我的应用程序在`UITableViewController`. 有一些非常密集的方法，但一旦完成，就没有理由影响应用程序的整体性能。

我一直在使用仪器来确定它可能是什么，但事实证明它非常不确定。首先，我无法通过一种方法重新创建问题，它似乎只是从一般用法中发生的。`cellForRowAtIndexPath`根据线程使用情况，使用 CPU 的主要内容是我的。虽然我确实做了很多计算，但它并不能解释两件事。1）为什么这个问题会随着时间的推移而发展。当我第一次启动应用程序时，我可以上下滚动`TableViewController`几次，一切都非常流畅。2）即使我删除了除 3 或 4 个单元格之外的所有单元格，仍然没有响应。

另一个观察结果是，`modal ViewController`当应用程序第一次加载时，a 有一个非常流畅的动画，但最终会出现这种可怕的锯齿状动画，有时只有 1 或 2 帧，后来。同样，有几个相当复杂的计算解除这个 Modal （包括一个 managedObjectContext 保存），它确实接近揭示`UITableView`下面（意思是 some `cellForRowAtIndexPath`）但是没有办法单独这两个东西可以使动画虚拟0 帧/秒。所有这一切让我相信资源正在被耗尽并且不会返回。现在可悲的是，我对 iOS 环境的了解还不够，无法确定下一个假设，但这里有：

*   记忆。简单地说，不可能真的是这样吧？尽管我的应用程序非常占用内存，并且包含大量图像，但我很确定 iOS 会在 RAM 开始用完时将其从 RAM 中删除。最重要的是，诊断显示当我在应用程序中遇到大量延迟时，我有 50MB 的可用空间。

*   中央处理器。我认为可能是某些东西耗尽了我所有的 CPU，就像我上次遇到性能问题时一样（我调用了一个方法的无限循环，哎呀）但是，该应用程序似乎只在需要时才使用 CPU。换句话说，当应用程序空闲时，它会回到 0 使用量。只是为了解释这有多重要；如果作为资源的 CPU 被某种东西吞噬了，那么它就可以解释为什么`cellForRowAtIndexPath`随着时间的推移而挣扎。但是，由于它没有被吃掉，因此没有理由长时间使用该应用程序会导致`cellForRowAtIndexPath`使用过多的 CPU。因此，我看不出我的问题是如何由 CPU 占用引起的。

当然，因为这是我能想到的仅有的两种资源，我完全被难住了。我不知道为什么应用程序会随着时间的推移变得缓慢。实际上，我看不到它是如何成为代码的，因为应用程序在首次启动时运行良好，而且当似乎还剩很多时，我看不到它如何成为资源。

由于我是 Objective-C/iOS 开发的新手，我怀疑我缺少一些东西。如果您能帮助我识别它，我将不胜感激。

**更新：**发布我的代码`cellForRowAtIndexPath`和`willDisplayCell`：

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
myEntityForConfigureCell = [self.fetchedResultsController objectAtIndexPath:indexPath];

searchResultForConfigureCell = [searchResults objectForKey:myEntityForConfigureCell.trackId];

// Example of how I fill in cell information. There are far more than shown.
nameLabelForConfigureCell = (UILabel *)[cell viewWithTag:1001];
nameLabelForConfigureCell.text = myEntityForConfigureCell.name;

genreLabelForConfigureCell = (UILabel *)[cell viewWithTag:1002];
genreLabelForConfigureCell.text = searchResultForConfigureCell.genre;

// Example of how I do the ImageViews using AFNetworking
imageForConfigureCell = (UIImageView *)[cell viewWithTag:1000];
[imageForConfigureCell setImageWithURL:[NSURL URLWithString: searchResultForConfigureCell.artworkURL60]];
imageForConfigureCell.layer.cornerRadius = 9.4;
imageForConfigureCell.layer.masksToBounds = YES;

// The RateView for showing a start rating
rateViewForConfigureCell = [[DYRateView alloc] initWithFrame:CGRectMake(73, 44, 75, 12) fullStar:[UIImage imageNamed:@"StarFullSmall.png"] emptyStar:[UIImage imageNamed:@"StarEmptySmall.png"]];
rateViewForConfigureCell.rate = [searchResultForConfigureCell.rating floatValue];
rateViewForConfigureCell.alignment = RateViewAlignmentLeft;
[cell.contentView addSubview:rateViewForConfigureCell];

// Setting Sections for all Core Data entries only if BOOL isLoading is YES, but **has** finished downloading informaton, i.e. just before completion.

if ([searchResults count] == [fetchedResultsController.fetchedObjects count]) {

    if (isLoading) {
        NSLog(@"Is loading so Setting Sections");
        isLoading = NO;
        [self cycleThroughEntriesAndSetSection];
    }
    else if (!isLoading){
        [loadingHudView removeFromSuperview];
    }

}

} 
```

现在为`willDisplayCell`：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
myEntityForDisplayCell = [self.fetchedResultsController objectAtIndexPath:indexPath];
searchResultForDisplayCell = [searchResults objectForKey:myEntityForDisplayCell.trackId];

UILabel *currentPrice = (UILabel *)[cell viewWithTag:1003];

if ([myEntityForDisplayCell.price1 floatValue] == [searchResultForDisplayCell.price2 floatValue]) {
   currentPrice.textColor = [UIColor blackColor];
}
else if ([myEntityForDisplayCell.price1 floatValue] > [searchResultForDisplayCell.price2 floatValue])
{
    currentPrice.textColor = [UIColor colorWithRed:0 green:0.9 blue:0 alpha:1];
}
else if ([myEntityForDisplayCell.price1 floatValue] < [searchResultForDisplayCell.price2 floatValue])
{
    currentPrice.textColor = [UIColor redColor];
}

cell.backgroundColor = nil;

if (isLoading) {
    loadingHudView.numOne = [searchResults count];
    loadingHudView.numTwo = [fetchedResultsController.fetchedObjects count];
    [loadingHudView setNeedsDisplay];
}

if ([searchResults count] == [fetchedResultsController.fetchedObjects count]) {

    [loadingHudView removeFromSuperview];

    if ([myEntityForDisplayCell.price1 floatValue] < [searchResultForDisplayCell.price2 floatValue]) {

        cell.backgroundColor = nil;
    }
    else
    {
        cell.backgroundColor = [UIColor colorWithRed:1 green:0.85 blue:0 alpha:0.45];
    }
}

} 
```

**更新 2：**使用分析器工具找到了一些东西。我不完全确定它是如何泄漏的，但无论如何都会发生。

```
SearchResult *searchResult = [[SearchResult alloc] init];

for (id i in fetchedResultsController.fetchedObjects) {
    MyEntity *myEntity = i;
    searchResult = [searchResults objectForKey:myEntity.id]; 
```

每次将新实体添加到 Core Data 数据库时，这段代码可能会执行一次，即不是特别频繁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:50:05.873

三个观察：

1.  你说“很多图像我很确定 iOS 在内存开始用完时会从内存中删除东西”——仅供参考，如果你正在使用`imageNamed`，那么管理内存并不是很好。当我进行图像缓存时，我使用自己的`NSCache`. 如果您使用大图像，这一点尤其重要。

2.  请参阅[WWDC 2012 - Building Concurrent User Interfaces on iOS](https://developer.apple.com/videos/wwdc/2012/?id=211)，了解如何使用 Instruments 来确定性能瓶颈所在的实际示例。

3.  最后，请参阅[使用 Instruments 查找泄漏以](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html#//apple_ref/doc/uid/TP40004652-CH11-SW4)获取有关如何使用 Instruments 查找泄漏的指南。另外，不要忽视[静态分析器](http://developer.apple.com/library/ios/#recipes/xcode_help-source_editor/Analyze/Analyze.html)，如果您不使用 ARC，或者如果您使用任何 Core Foundation 调用，这很重要。

除此之外，如果不查看代码，就很难确定问题的根源。

* * *

**更新：**

既然您已经提供了一些源代码，那么让我眼前一亮的一件事`addSubview`就是`rateViewForConfigureCell`. 鉴于单元格被重复使用，您将重复将其添加到单元格中。所以，我建议更换：

```
// The RateView for showing a start rating
rateViewForConfigureCell = [[DYRateView alloc] initWithFrame:CGRectMake(73, 44, 75, 12) fullStar:[UIImage imageNamed:@"StarFullSmall.png"] emptyStar:[UIImage imageNamed:@"StarEmptySmall.png"]];
rateViewForConfigureCell.rate = [searchResultForConfigureCell.rating floatValue];
rateViewForConfigureCell.alignment = RateViewAlignmentLeft;
[cell.contentView addSubview:rateViewForConfigureCell]; 
```

和：

```
// The RateView for showing a start rating
rateViewForConfigureCell = (DYRateView *)[cell.contentView viewWithTag:1005]
if (!rateViewForConfigureCell) {
    rateViewForConfigureCell = [[DYRateView alloc] initWithFrame:CGRectMake(73, 44, 75, 12) fullStar:[UIImage imageNamed:@"StarFullSmall.png"] emptyStar:[UIImage imageNamed:@"StarEmptySmall.png"]];
    rateViewForConfigureCell.alignment = RateViewAlignmentLeft;
    rateViewForConfigureCell.tag = 1005;
    [cell.contentView addSubview:rateViewForConfigureCell];
}
rateViewForConfigureCell.rate = [searchResultForConfigureCell.rating floatValue]; 
```

要么这样做，要么将其添加`DYRateView`到您的单元原型中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:14:58.683

正如怀疑的那样，您在每次配置运行时都向单元格添加一个新的子视图。这部分代码：

```
// The RateView for showing a start rating
rateViewForConfigureCell = [[DYRateView alloc] initWithFrame:CGRectMake(73, 44, 75, 12) fullStar:[UIImage imageNamed:@"StarFullSmall.png"] emptyStar:[UIImage imageNamed:@"StarEmptySmall.png"]];
rateViewForConfigureCell.rate = [searchResultForConfigureCell.rating floatValue];
rateViewForConfigureCell.alignment = RateViewAlignmentLeft;
[cell.contentView addSubview:rateViewForConfigureCell]; 
```

每次调用的都是分配和添加新视图。经过足够多的循环后，您的单元格将有数十个这样的单元格，这*看起来*非常正常，并且可能不会占用大量内存，但绝对会降低您的性能，因为合成引擎在滚动时必须将它们全部考虑在内桌子上下。

任何像这样的子视图都应该添加*一次*，然后在您的 configureCell 方法中重新配置。`nil`当您从出列单元格返回时添加它们，或者在`init...`您的单元格子类的方法中，或者在您用于设计单元格的笔尖中添加它们。

你似乎已经在用你的其他子视图（所有这些`viewWithTag:`调用）做了类似的事情，所以我不确定为什么这个不是这样。

请注意，这可能仍然无法解决您的性能问题 - 如果“远远超过”问题中显示的内容，那么无论如何您都不会获得 60fps - 在之前的单元格中您只能拥有一定数量的子视图性能就消失了。这里似乎发生了很多事情。你说你是一个初学者——也许一个不那么雄心勃勃的介绍项目可能是为了？

# java - Java小程序闪烁

> ID：14201489
> 
> 赞同：1
> 
> 时间：2013-01-07T18:05:00.800
> 
> 标签：java, swing, applet

> **可能重复：**
> [iframe over applet 闪烁](https://stackoverflow.com/questions/14185056/iframe-over-applet-flickering)

当我把`iframe`它放在小程序上时，它会闪烁并闪烁很多。

这就是我认为造成它的原因。

```
 // Create a timer that will handle the canvas updates, effectively drawing it at the desired FPS
    tickTimer = new javax.swing.Timer(1000/Constants.APPLET_FRAMERATE, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            update(AvatarClient.instance.getGraphics());               

        }
     });

    // Start the timer
    tickTimer.start(); 
```

这是源代码：

```
 package main;

   import java.applet.Applet;
   import java.awt.Dimension;
   import java.awt.Graphics;
   import java.awt.MediaTracker;
   import java.awt.event.ActionEvent;
   import java.awt.event.ActionListener;
   import javascript.JavascriptCommands;

   import javax.swing.JOptionPane;
   import javax.swing.Timer;

   import client.GraphicsHandler;
   import client.avatar.AvatarController;
   import client.guiboxes.QuestionBox;
   import client.moods.MoodController;
   import client.rooms.RoomController;
   import client.tools.StuffPreloader;
   import networking.ConnectionHandler;
   import networking.NetworkMessage;
   import networking.NetworkingConstants;

   import misc.Constants;
   import misc.Language;

  public class AvatarClient extends jApplet{

/**
 * 
 */
private static final long serialVersionUID = 3792036962966286054L;
public GraphicsHandler canvas;
public ConnectionHandler connection;
Timer tickTimer;
public MediaTracker mediaTracker;

public String userName = "a"; //$NON-NLS-1$
public String localizationFolder = "";

public static AvatarClient instance;

/* called when the Applet is loaded */
public void init()    {
    instance = this;

    //setSize(new Dimension( Constants.APPLET_WIDTH,  Constants.APPLET_HEIGHT ) );
    // SET THE APPLET SIZE

    // Get the applet parameters
    userName = getParameter("userName"); //$NON-NLS-1$
    String password = getParameter("password"); //$NON-NLS-1$
    localizationFolder = getParameter("localization");

    // Create a mediatracker for image loding
    mediaTracker = new MediaTracker(this);

    System.out.println("Jesper er sej!");

    canvas = new GraphicsHandler(this);// Create a canvas, all the drawing is done within the canvas        
    canvas.setStatusMsg(Language.getString("AvatarClient.connectMessage")); // Apply a status message //$NON-NLS-1$
    canvas.setPreferredSize(new Dimension(Constants.APPLET_WIDTH,  Constants.APPLET_HEIGHT));

    // Adjust the applet options as well ( THIS SHOULD REMOVE THE BLINKING )
    setBackground(new java.awt.Color(229, 229, 229));
    setMaximumSize(new java.awt.Dimension(Constants.APPLET_WIDTH,  Constants.APPLET_HEIGHT));
    setPreferredSize(new java.awt.Dimension(Constants.APPLET_WIDTH,  Constants.APPLET_HEIGHT));
    setSize(new java.awt.Dimension(Constants.APPLET_WIDTH,  Constants.APPLET_HEIGHT ));
    setLayout(null);
    this.setIgnoreRepaint(true);
    this.add(canvas);
    validate();

    // FINALLY, create a connection handler thread ( It tries to connect to the as the first thing it does )
    connection= new ConnectionHandler(this, userName, password);
    new Thread(connection).start();

    // Create a timer that will handle the canvas updates, effectively drawing it at the desired FPS
    tickTimer = new javax.swing.Timer(1000/Constants.APPLET_FRAMERATE, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            update(AvatarClient.instance.getGraphics());               

        }
     });

    // Start the timer
    tickTimer.start();

    // Add mouse and keyboard listeners to the canvas of this applet
    canvas.addMouseListener(EventsHandler.getInstance());
    canvas.addKeyListener(EventsHandler.getInstance());
    canvas.addMouseMotionListener(EventsHandler.getInstance());
    //System.out.println(canvas.);
    //this.setFocusable(false);

    new JavascriptCommands();

    // Preload some of the gui elements
    StuffPreloader.instance.loadStuff();

    // TO OVERCOME THE SECURITY PROBLEMS FOR CALLING NEW NOTIFICATIONS FROM JS
    Timer notif = new javax.swing.Timer(100, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if(newNotif)    {
                GraphicsHandler.instance.addQbox(notif_title, notif_text, QuestionBox.QUESTION_TIPBOX, 0);
                newNotif = false;
            }

        }
     });

    // Start the timer
    notif.start();
    notif.setRepeats(true);

    // Get focus to this applet
    getFocusBack();

}

boolean newNotif = false;
String notif_text, notif_title;

// START AND WHEN USER RETURNS
public void start() {
    //setSize(new Dimension( Constants.APPLET_WIDTH,  Constants.APPLET_HEIGHT ) );
    getFocusBack();

    GraphicsHandler.instance.stepsToDraw = 30;

}

public void stop()  {
    //connection.closeConnection();
}

/* Applet termination */
public void destroy()    {
    tickTimer.stop(); // Stop the update timer
}

// OVERRIDE
public void update(Graphics g)    {
    canvas.update(g);
}

public void paint(Graphics g)    {
        //canvas.requestFocus(); // Try to get focus so the user doesnt have to click for chat input
}

public void showError(String message)   {
JOptionPane.showMessageDialog(this,
        "Error:\n\n" + message, //$NON-NLS-1$
        "Error!", //$NON-NLS-1$
        JOptionPane.ERROR_MESSAGE);
}

public void getFocusBack()  {
    canvas.requestFocus(); // Try to get focus so the user doesnt have to click for chat input
    canvas.requestFocusInWindow();
}

/**************************
/** JAVASCRIPT COMMANDS
 * *****************************/

public void changeRoom(int id)  {
    getFocusBack();

     NetworkMessage msg = new NetworkMessage();
     msg.add(NetworkingConstants.N_ROOMCHANGE);
     msg.add((int)id); // REquest for data
     msg.send(connection.out);
}

public void changeMood(int id)  {
    getFocusBack();

    MoodController.instance.SetMoodByIndex(id);
}

public void nextMood()  {
    getFocusBack();

    MoodController.instance.SetNextMood();
}

public void previousMood()  {
    getFocusBack();

    MoodController.instance.SetPreviousMood();
}

public void openLogView()   {
    getFocusBack();
    AvatarController.instance.outputLog();
}

public void refreshSidebar()    {
    RoomController.instance.updateSidebarInfo(true);
}

public void openWardrobe()  {
    getFocusBack();

    // OPEN WARDROBE
    NetworkMessage msg = new NetworkMessage();
    msg.add(NetworkingConstants.N_WARDROBEUPDATE);
    msg.add((short)-2);
    msg.send(ConnectionHandler.instance.out);
}

public void notifyB()   {
    System.out.println("addnotification: ");
}

public void addNotification(String title, String text)  {
    getFocusBack();
    notif_title = title;
    notif_text = text;
    newNotif = true;

    //GraphicsHandler.instance.addQbox("This is a test message lores ipsum testing the line flow with a longer text, I wonder how it will work", QuestionBox.QUESTION_APARTMENT, 123); //$NON-NLS-1$ //$NON-NLS-2$
    //GraphicsHandler.instance.addQbox(text, title, QuestionBox.QUESTION_TIPBOX, 0); 

}

public void placeItem(int itemID)   {
    NetworkMessage msg = new NetworkMessage();
    msg.add(NetworkingConstants.N_ITEMPLACEMENT);
    msg.add((short)1); // Placing the item
    msg.add((short)itemID);
    msg.send(ConnectionHandler.instance.out);
}

public void forceFocus() {

    Timer focusBack = new javax.swing.Timer(150, new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            getFocusBack();           

        }
     });

    // Start the timer
    focusBack.start();
    focusBack.setRepeats(false);

}

   } 
```

但有可能以另一种方式实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:09:49.157

双缓冲可以解决这个问题。

基本上，您应该在未显示的画布上绘制，而不是在实时画布上绘制。绘制后立即交换两个画布实例，使“隐藏”画布成为显示的画布。

[http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics](http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics)将提供更多细节。

您可以在例如[http://www.apl.jhu.edu/Notes/LMBrown/courses/605-481/notes/Concurrent-Programming/Double-Buffer-Example.html](http://www.apl.jhu.edu/Notes/LMBrown/courses/605-481/notes/Concurrent-Programming/Double-Buffer-Example.html)找到有关如何执行此操作的示例，但是基本上，您要查找的关键字是“双缓冲”，以找到解决闪烁问题的大量细节。

# ruby-on-rails - 命名空间路由不起作用

> ID：14201493
> 
> 赞同：0
> 
> 时间：2013-01-07T18:05:18.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我在我的 rails 应用程序中有一个管理部分，在 admin 的名称空间中，我的路线似乎半断了。在我的管理部分，我设置了一个用户资源，以便我可以管理我的用户。索引视图可以正常工作，编辑视图可以正常工作，但是创建操作被破坏，新视图可以工作，但是添加一个表单会因为我的视图而破坏它。

举个例子。这是我的路线：

```
namespace :admin do
  root :to => "home#index"

    resources :users do
        resources :reports, :only => ['show', 'destroy']
    end
        resources :reports, :only => ['show', 'destroy']
end 
```

我的用户控制器有：

```
 class Admin::UsersController < Admin::HomeController
  def index
        @users = User.all
  end

  def new
        @user = User.new
  end

    def create
        @user = User.new(params[:user])

        if @user.save
            redirect_to(edit_admin_user_path(@user), :notice => 'report was successfully created.')
        else
            render :action => "new"
        end
    end

  def edit
        @user = User.find(params[:id])
  end

    def update
        @user = User.find(params[:id])

        if @user.update_attributes(params[:user])
            redirect_to(edit_admin_user_path(@user), :notice => 'report was successfully created.')
        else
            render :action => "edit"
        end
    end

    def show
        @user = User.find(params[:id])
    end

    def destroy
        @user = User.find(prams[:id])
        @user.destroy

        redirect_to admin_users_path()
    end

end 
```

HomeController 只是 admin 部分的主页，它继承自 ApplicationController

这是我的模型：

```
 belongs_to :user
    has_many :receipts

  attr_accessible :cash_advance, :company, :description, :end_date, :mileage, :report_name,
  :start_date, :receipts_attributes

    validates_presence_of :company, :description, :end_date, :report_name#, :start_date
    validates_uniqueness_of :report_name

    accepts_nested_attributes_for :receipts, :allow_destroy => :true

class Receipt < ActiveRecord::Base
  belongs_to :report
  attr_accessible :account_code, :amount, :company_card, :date, :description, :lobbying_expense, :vendor

    validates_presence_of :date, :vendor, :amount, :description, :account_code
end

class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable, :validatable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

    has_many :reports, :dependent => :destroy
end 
```

我的 form_for 在新看起来像

```
<%= form_for [:admin, @user] do |user| %> 
```

我也像我的编辑表单一样尝试过：

```
<%= form_for @user do |user| %> 
```

但这给了我路由错误：

```
No route matches {:action=>"show", :controller=>"admin/users",....} 
```

并尝试编辑（提交表单）给我这个错误：

```
uninitialized constant UsersController 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:08:36.617

从您提供的路由错误来看，它似乎正在尝试发布到“显示”操作。

尝试使用以下内容：

```
<%= form_for @user, :url => { :action => "create" } do |user| %> 
```

# hibernate - 休眠：无法访问 hql 中映射的键或值

> ID：14201495
> 
> 赞同：1
> 
> 时间：2013-01-07T18:05:20.933
> 
> 标签：hibernate, map

假设我有以下课程：

```
@Entity
public class CompanyImpl extends BaseEntity {

    @OneToMany(cascade=CascadeType.ALL)
    private Map<Cat,Flight> flightCats; 
```

Cat 和 Flight 类都有一个“name”属性。我怎样才能：

1.  选择一家名为“Tech”的公司及其一对名为“Meow”的猫的地图
2.  选择一家名为“Tech”的公司及其成对的地图，其中包含名为“Ocean”的航班？

我想到了类似的东西

> from CompanyImpl co left join fetch co.flightCats fc where co.name='Tech' and fc.cat.name='Meow'

但它不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:07:20.410

[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html#queryhql-expressions](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html#queryhql-expressions)

如果您通读文档，您会发现您不能做您想做的事。您只能根据地图的内容选择公司，但您不能真正将地图与查询一起子集。

# email - 电子邮件作为 HTML 垃圾发送

> ID：14201498
> 
> 赞同：0
> 
> 时间：2013-01-07T18:05:29.700
> 
> 标签：email, html-email, zend-mail

多年来我一直在成功使用 Zend_Mail，但是最近一些客户报告说电子邮件是通过“损坏”发送的，当他们将其转发回来时，它看起来像这样：

```
MIME-Version: 1.0

Content-type: text/html; charset=iso-8859-1

        X-Mailer: PHP/5.3.2-1ubuntu4.18
        Message-Id: <20130107172629.F2A16E2011C@SERVER ADDRESS HERE>
        Date: Mon,  7 Jan 2013 17:26:29 +0000 (UTC)
        X-pstn-neptune: 0/0/0.00/0
        X-pstn-levels:     (S:75.53812/99.90000 CV:99.9000 FC:95.5390 LC:95.5390 R:95.9108 P:95.9108 M:97.0282 C:98.6951 )
        X-pstn-dkim: 0 skipped:not-enabled
        X-pstn-settings: 3 (1.0000:1.0000) s cv gt3 gt2 gt1 r p m c 
        X-pstn-addresses: from <EMAIL IT WAS SENT FROM BY THE SYSTEM> [2948/119] 
    <html>
        <body>
            <p>Welcome to <i>, HTML HERE </p>
</body> 
```

我一直无法复制它，不知道 x-pstn 是什么，也不知道如何为这些客户解决这个问题。

任何人都可以解释一下吗？（如果有帮助，我愿意分享我的 Zend Mail 代码，但我认为这可能是别的）。

# python - python中的局部/全局变量混淆

> ID：14201499
> 
> 赞同：3
> 
> 时间：2013-01-07T18:05:30.810
> 
> 标签：python

> **可能重复：**
> [在python中的赋值错误之前引用](https://stackoverflow.com/questions/855493/referenced-before-assignment-error-in-python)

我在 python 中遇到了一个奇怪的错误。以下 ipython 日志总结了它：

```
In [10]: def confused(stuff):
   ....:     print huh
   ....:     return stuff
   ....: 

In [11]: confused(87)
0
Out[11]: 87

In [12]: def confused(stuff):
   ....:     print huh
   ....:     huh += 1
   ....:     return stuff
   ....: 

In [13]: confused(9)
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
/home/max/verk/btr-email/build/x86_64/bin/ipython in <module>()
----> 1 confused(9)

/home/max/verk/btr-email/build/x86_64/bin/ipython in confused(stuff)
      1 def confused(stuff):
----> 2     print huh
      3     huh += 1
      4     return stuff

UnboundLocalError: local variable 'huh' referenced before assignment 
```

有效的函数和抛出错误的函数之间的唯一区别是 +=1 行，即使这样，它也会在之前有效的行上抛出错误！如果我在方法的第二个版本中`global huh`引用之前放置，它也不会引发错误。`huh`

为什么添加一行我向变量添加一个突然将其从全局变量更改为局部变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T18:07:49.387

在您的脚本中，`huh`指的是**全局**变量。如果不明确告诉 python 你想要做什么，你就不能在函数中更改对全局变量的*引用：*

```
def confused(stuff):
    global huh
    print huh
    huh += 1
    return stuff 
```

对于整数、字符串、浮点数等不可变对象，这意味着您不能对对象进行任何更改而不将其声明为`global`. 对于可变对象，您可以更改对象项或属性，但您仍然不能更改对象的*引用*。

* * *

这都是**范围**的问题。由于`huh`不在 的本地范围内`confused`，python 会在全局范围内找到它。由于它是在全局范围内找到的，除非您明确表示您想要（使用我上面所做的） ，否则您不能*分配给它。*`global`但是，如果它是`list`，则一旦找到列表，您就可以访问该列表的所有方法（包括`__setitem__`、`append`等）

* * *

至于错误的位置，可以稍微`dis`组装一下：

```
>>> def confused(stuff):
...    print huh
... 

>>> import dis
>>> dis.dis(confused)
  2           0 LOAD_GLOBAL              0 (huh)
              3 PRINT_ITEM          
              4 PRINT_NEWLINE       
              5 LOAD_CONST               0 (None)
              8 RETURN_VALUE

>>> def confused2(stuff):
...    print huh
...    huh += 1
... 

>>> dis.dis(confused2)
  2           0 LOAD_FAST                1 (huh)
              3 PRINT_ITEM          
              4 PRINT_NEWLINE       

  3           5 LOAD_FAST                1 (huh)
              8 LOAD_CONST               1 (1)
             11 INPLACE_ADD         
             12 STORE_FAST               1 (huh)
             15 LOAD_CONST               0 (None)
             18 RETURN_VALUE 
```

你可以看到，在函数的第一行`confused2`，python 已经在尝试`LOAD_FAST`（意思是寻找一个局部变量）。但是，不存在局部变量`huh`，因此存在异常。

# jquery - 使用jquery更改标签标签中for属性的值

> ID：14201501
> 
> 赞同：0
> 
> 时间：2013-01-07T18:05:37.293
> 
> 标签：jquery, forms

是否可以使用 jquery 更改标签标签中 for 属性的值？

例如

```
<label for="xxx">I am not changing</label>
to 
<label for="yyy">I am not changing</label> 
```

我一直在动态更改关联输入的名称/ID，但我无法弄清楚如何更改值的标签。

这就是我更改姓名/身份证的方式

```
$('#myinput_'+oldidnum).attr("name","myinput_"+newidnum);
$('#myinput_'+oldidnum).attr("id","myinput_"+newidnum); 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:12:39.307

看看你的标签是不是这样：http: [//jsfiddle.net/QTM45/](http://jsfiddle.net/QTM45/)

```
<label for="xxx">I am not changing</label> 
```

如果要更改`for`属性值，请使用以下命令：

```
$('label').attr('for','yyy'); 
```

如果您为该标签分配一个ID，那么

```
$('#labelID').attr('for','yyy'); 
```

# eclipse - eclipse pydev中未解决的导入

> ID：14201504
> 
> 赞同：7
> 
> 时间：2013-01-07T18:05:48.543
> 
> 标签：eclipse, import

我刚刚为python正确安装了google gdata库（脚本实际上运行良好）。我在 Eclipse 中使用 pydev。我导入了一个模块，但导入命令仍然带有红色下划线，如您在屏幕截图中看到的那样。

![在此处输入图像描述](../Images/d21a4f5b20da0f7c6a5662bbba791a5a.png)

我添加了以下 und ProjectName->Properties，但它不起作用（尽管路径绝对正确）： ![在此处输入图像描述](../Images/d68df5e5cac17795a9568f31a69e86f6.png)

我该怎么做才能让eclipse正确解析导入？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T22:21:15.643

如果你有这样的 import 语句：`import gdata.spreadsheet.service`那么你需要确保`PYTHONPATH`有一个包含`gdata`子目录的目录（并且`gdata`应该有`spreadsheet`带有`service.py`模块文件的子目录）。

在你的情况下：如果你`gdata`的目录`site-packages`在 python 发行版的目录中，那么你需要确保它`site-packages`在 PYTHONPATH 上（而不是`site-packages/gdata/spreadsheet`你试图放在那里）。

查看“6.4 包”部分中的[http://docs.python.org/2/tutorial/modules.html示例和参考。](http://docs.python.org/2/tutorial/modules.html)

在 PyDev 中，您可以在两个地方修改 PYTHONPATH 的内容：

*   窗口 -> PyDev -> 解释器 - Python
*   在您使用的窗口中

我建议您首先检查该`site-packages`目录是否在您的`Window -> PyDev -> Interpreter - Python settings -> System PYTHONPATH`. 默认情况下它应该在那里，所以如果你没有改变它，它应该在那里（可能这就是你的应用程序工作的原因！）。

现在，由于某些原因，PyDev 在添加新库后经常遇到“刷新”可用库信息的问题`site-packages`（例如，它使用该信息来检查是否应该在导入语句上放置错误标记）。

有几种方法可以强制刷新此信息。对我来说最可靠的方法是通过以下方式删除python解释器：`Window -> PyDev -> Interpreter - Python -> Remove`然后将其添加回同一视图中。然后`site-packages`重新扫描目录并且 PyDev 看到更新的库集，因此错误标记应该消失。

旁注：老实说，到目前为止，我还不需要使用此`External Libraries`视图。在解释器设置中拥有站点包对于 99% 的情况来说已经足够了，因为应该放置 Python 外部库。

# c# - 在另一个窗口文本框中加载 wpf Datagrid 数据

> ID：14201508
> 
> 赞同：1
> 
> 时间：2013-01-07T18:05:59.170
> 
> 标签：c#, sql-server, wpf, datagrid

我想在另一个窗口的文本框中重复数据网格数据。数据已保存在 sql 数据库中，并希望通过单击一个数据网格行在新窗口中检索它们。可以做？

```
<DataGrid Margin="0,23,0,0" AutoGenerateColumns="False" EnableRowVirtualization="True" 
                  ItemsSource="{Binding}" Name="grdPeople" VerticalContentAlignment="Center" 
                  IsReadOnly="True" DataContext="{Binding}">

            <DataGrid.Columns>                
                <DataGridTextColumn Binding="{Binding Path=Name}" Header="Name" Width="Auto" ></DataGridTextColumn>
                <DataGridTextColumn Binding="{Binding Path=Job}" Header="Job" Width="Auto"></DataGridTextColumn>
                <DataGridTemplateColumn Header="Picture" Width="45" >
                    <DataGridTemplateColumn.CellTemplate >
                        <DataTemplate >
                            <Image Source="{Binding Path=Picture}" Width="30" Height="30" Stretch="Uniform">                                
                            </Image>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:54:28.143

由于您已经在使用数据绑定来填充 DataGrid 控件中的单元格，因此通过改组您的 UI 代码绑定到的数据结构（您的 DataContext 绑定到的对象），您应该能够实现您的目标再去。

我整理了一个快速、简化的示例。我创建了 MyViewModel 类作为“绑定目标”，并创建了 MyView 类来表示您的视图/xaml。首先，与您上面的代码类似，MyView 有一个 DataGrid。我还在 DataGrid 下方的同一个用户控件中添加了几个文本框。两个是所选项目的名称和工作字段。另外两个应该是您要根据用户的选择填充的*其他字段。*例如，当用户选择一行时，它们*可能是*您从数据库中查找的额外数据。这是 MyView.xaml：

```
<UserControl x:Class="WpfApplication1.MyView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Items}" 
              IsReadOnly="True" SelectedItem="{Binding SelectedItem}" 
              SelectionMode="Single">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Name" Binding="{Binding Name}"/>
            <DataGridTextColumn Header="Job" Binding="{Binding Job}"/>
        </DataGrid.Columns>
    </DataGrid>
    <StackPanel Orientation="Horizontal" Grid.Row="1">
        <TextBox Width="100" Text="{Binding SelectedItem.Name, Mode=OneWay}" Margin="2"/>
        <TextBox Width="100" Text="{Binding SelectedItem.Job, Mode=OneWay}" Margin="2"/>
        <TextBox Width="100" Text="{Binding ExtraStuff.ExtraIntegerField, Mode=OneWay}" Margin="2"/>
        <TextBox Width="100" Text="{Binding ExtraStuff.ExtraDoubleField, Mode=OneWay}" Margin="2"/>
    </StackPanel>
</Grid> 
```

现在，对于 DataGrid 的绑定，我将 ItemsSource 绑定到控件的 DataContext 上的特定集合。所以在这里，DataContext 不是集合本身，而是一个包含行的项目和一些其他信息的对象。我还将 SelectedItem 绑定到一个名为 SelectedItem 的属性，该属性应具有公共 getter 和 setter。然后将 MyView 的 DataContext 设置为 MyViewModel 的一个实例。这是 MyViewModel.cs：

```
public sealed class MyViewModel : INotifyPropertyChanged
{
    private readonly ObservableCollection<LightItem> _items = new ObservableCollection<LightItem>();

    private LightItem _selectedItem;
    private ExtraInformation _extraStuff;

    public MyViewModel()
    {
        this._items.Add(new LightItem("Tim", "Dish Washer"));
        this._items.Add(new LightItem("Bob", "Window Washer"));
        this._items.Add(new LightItem("Jill", "Widget Washer"));
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public ExtraInformation ExtraStuff
    {
        get { return this._extraStuff; }
        private set
        {
            this._extraStuff = value;
            this.OnPropertyChanged("ExtraStuff");
        }
    }

    public ReadOnlyObservableCollection<LightItem> Items { get { return new ReadOnlyObservableCollection<LightItem>(this._items); } }

    public LightItem SelectedItem
    {
        get { return this._selectedItem; }
        set
        {
            this._selectedItem = value;
            this.OnPropertyChanged("SelectedItem");
            this.ExtraStuff = new ExtraInformation(value);
        }
    }

    private void OnPropertyChanged(string name)
    {
        if (null != this.PropertyChanged)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(name));
        }
    }

    public sealed class ExtraInformation
    {
        private readonly double _extraDoubleField;
        private readonly int _extraIntegerField;

        public ExtraInformation(LightItem light)
        {
            // you could get more info for your record from the db
            // but here we just get some random numbers
            var rnd = new Random();
            this._extraDoubleField = rnd.NextDouble();
            this._extraIntegerField = rnd.Next();
        }

        public double ExtraDoubleField { get { return this._extraDoubleField; } }

        public double ExtraIntegerField { get { return this._extraIntegerField; } }
    }

    public sealed class LightItem
    {
        private readonly string _job;
        private readonly string _name;

        public LightItem(string name, string job)
        {
            this._name = name;
            this._job = job;
        }

        public string Job { get { return this._job; } }

        public string Name { get { return this._name; } }
    }
} 
```

在这里，属性 SelectedItem 与我们绑定到 DataGrid 上的 SelectedItem 依赖属性的属性相同。它的类型与我的 Items 集合中的项目类型相同，该集合绑定到 DataGrid 的 ItemsSource。现在，当调用 SelectedItem 的设置器时，不仅要更新它并引发 PropertyChanged 事件。我还构造了一个新的 ExtraInformation 对象并将其分配给 ExtrStuff。回顾一下 MyView.xaml，您会看到底部的两个文本框的 TextProperty 绑定到该对象上的 integer 和 double 字段。每次用户选择其中一项时，都会显示一组新的随机数。

虽然这不会带您一路从数据库中查找有关所选项目的信息，但希望它为您指明正确的方向，即如何使用 WPF 数据绑定干净地完成此操作。文本字段位于哪个窗口无关紧要 - 在大多数情况下，您应该能够将两个窗口的 DataContext 连接到相同的底层 MyViewModel。这就是这种方法最酷的部分。MyViewModel 类封装了如何查找存储在数据库中的有关所选项目的信息。MyView 只是看到它绑定的一些数据被更新，并让 MyViewModel 知道用户何时单击了 DataGrid 中的不同项目。实际上，您在绑定目标中逻辑地构建数据的外观。然后，您只需告诉视图部分如何使用绑定“锁定”。这也意味着不同的观点可以以不同的方式“锁定”。也许 Window1 有一个绑定到 Items 的 DataGrid，Window2 有一些文本字段绑定到 SelectedItem 和 ExtraStuff 的信息，也许 Window3 显示了一个与 SelectedItem 相关联的图像。每个窗口/视图只是绑定目标（此处为 MyViewModel 实例）中数据的不同视觉表示。

这是一个演示这个想法的简单图表：

![在不同窗口上从两个视图到一个视图模型的数据绑定的快速绘制图](../Images/61a244434360c7ad4f1a474dc4970d8b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:01:36.013

我使用了这个方法，制作了一个 ChildWindow 并使用了 LINQ to SQL 类

```
<TextBox Width="100" Height="40" Name="txtName" Text="{Binding Name, UpdateSourceTrigger=Explicit}" 
                 Margin="371,192,84,29"></TextBox>
        <TextBox Width="100" Height="40" Name="txtFamily" Text="{Binding Family, UpdateSourceTrigger=Explicit}" 
                 Margin="228,192,226,29"></TextBox> 
```

和一个包含 DataGrid 的主页按钮：

```
private void btnNewWin_Click(object sender, RoutedEventArgs e)
        {
            if (this.dataGrid1.SelectedItems.Count == 1)
            {
                ChildWindow chWin = new ChildWindow { Owner = this, DataContext = this.dataGrid1.SelectedItem };
                chWin.ShowDialog();

            }
        } 
```

单击按钮时，文本框上也会显示数据，但是当我以这种方式添加图片时，不起作用！

# python - 来自 csv 文件的 xgettext

> ID：14201517
> 
> 赞同：0
> 
> 时间：2013-01-07T18:06:22.997
> 
> 标签：python, xgettext

我有一个包含所有要翻译的值的 csv...我想读取 csv 文件并生成一个 .pot 文件，但是当我加载并尝试调用 print _(value) 时，没有生成 .pot。不知道为什么不能从 csv 生成包含动态内容的 .pot 文件。

这是我的代码片段：

```
import csv
import gettext

t = gettext.translation('api_trans', '/path/to/locale/', fallback=True)
_ = t.ugettext

string_list = []
with open('/path/to/csv/file') as csvfile:
  reader = csv.reader(csvfile, delimiter=',', quotechar='"')
  for row in reader:
    if row:
        if row[0] != '':
            print _(%row[0]) 
```

当我运行此脚本时，我会看到列出的所有值，但是如果我运行则不会生成 .pot 文件：

```
xgettext -d api_trans -o api_trans.pot api_trans.py 
```

指定实际字符串与具有字符串值的变量（例如 print _('hello')）确实有效......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:56:48.940

发生这种情况的原因是因为`xgettext`它实际上并没有执行您的 Python 文件，而是读取为纯文本并尝试识别必须翻译的字符串。当您添加 a`_(varaible)`而 not`_("literal string that xgettext understands")`时，它不会将其识别为应翻译的文本。

为此，我能想到的最直接的方法是生成一个您将提供给的虚拟文件，该文件`xgettext`将包含所有实际值。现在考虑到您的 csv 文件不是很大，您可以尝试生成一个文件，该文件将包含类似的行，`print _("the value of the thing you want to translate")`并且可以被`xgettext`. 现在当然这不是最佳方式，但它是最直接的，无需担心解析。

```
import csv
import gettext

t = gettext.translation('api_trans', '/path/to/locale/', fallback=True)
_ = t.ugettext

string_list = []
with open('/path/to/csv/file') as csvfile:
  with open('/path/to/some/other/file', 'w') as out:
    reader = csv.reader(csvfile, delimiter=',', quotechar='"')
    for row in reader:
      if row:
          if row[0] != '':
              out.write("print _(%s)\n" % (repr(row[0],)) 
```

然后你会执行`xgettext -d api_trans -o api_trans.pot /path/to/that/file`.

同样，这是次优的。您可能想研究[Babel](http://babel.edgewall.org/)并提出更有效的解决方案，我也会研究它。

这就是我使用 Babel 得到的：

```
def extract_csv(fileobj, keywords, comment_tags, options):
    """Extract messages from XXX files.
    :param fileobj: the file-like object the messages should be extracted
                    from
    :param keywords: a list of keywords (i.e. function names) that should
                     be recognized as translation functions
    :param comment_tags: a list of translator tags to search for and
                         include in the results
    :param options: a dictionary of additional options (optional)
    :return: an iterator over ``(lineno, funcname, message, comments)``
             tuples
    :rtype: ``iterator``
    """
    import csv

    reader = csv.reader(fileobj, delimiter=',', quotechar='"')
    for row in reader:
        if row and row[0] != '':
            yield (lineno, ',', row[0], 'No comment') 
```

然后，您需要将其作为提取方法包含在内。最简单的方法是将它放在一个包中`PYTHONPATH`并按如下方式使用它：

```
# Some custom extraction method
[extractors]
csv = mypackage.module:extract_csv
[csv: **.ctm]
some_option = foo 
```

我不完全确定最后一点，您可以[在此处](http://babel.edgewall.org/wiki/Documentation/messages.html#writing-extraction-methods)查看更多详细信息:)

# php - chrome div内容在滚动时没有得到更新

> ID：14201520
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:06:38.953
> 
> 标签：php, javascript, ajax, google-chrome, html

我有一个站点，我一直在该站点上实现将站点页面的 ajax 加载到 div 中，以替代 iframe 的使用。一切运行良好，除了 chrome 无法正确呈现 div 内的滚动内容。chrome 对 div 下部的显示不会在滚动时刷新并保持静态（视频没有被重新渲染），而其余内容会按照滚动动作的预期移动。使所有内容正常显示的唯一方法是手动调整浏览器窗口的大小，强制 chrome 刷新整个页面的显示。我仔细看了看，chrome 禁止在任何不是 window.open'd 的窗口上调整 javascript 窗口的大小，这是我的第一个修复方法，所以就这样了。那么这是如何解决的呢？有更好的`overflow:`设置吗？

这是网站：

[http://tablapusher.com](http://tablapusher.com)

非常感谢任何帮助，例如：

```
window.resizeTo(theWidth+1,theHeight+1) 
```

不起作用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:03:30.983

在 ajax 中的 200 响应之后通过自由设置的 setTimeout 间隔调整 div 的像素大小可以解决问题...像素需要更改每次页面点击，但...底部：1px > 0px > 1px > 等希望这对任何人都有帮助有同样的问题。

# parsing - javacc 添加操作导致问题

> ID：14201523
> 
> 赞同：1
> 
> 时间：2013-01-07T18:06:50.640
> 
> 标签：parsing, conflict, choice, lookahead, javacc

我正在尝试创建一个简单的解析器，但是在尝试考虑第一个元素之前的可选符号时遇到了一些麻烦：

```
 void expr5() : {}
    {
        [addop()] expr6() (addop() expr6())*
    } 
```

例如 [-] 5 + 3 - 4

这里的问题是第一个可选的 [addop()] 定义为：

```
 void addop() : {}
    {
        <PLUS> | <MINUS>
    } 
```

我目前遇到选择冲突，建议使用 LOOKAHEAD()，但是 javacc 在使用 LOOKAHEAD() 时没有识别出选择冲突

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:57:41.170

我认为需要进一步澄清。我与以下内容没有冲突

```
void sum() : {}
{
  [ addOp() ]
  term()
  ( addOp()  term() )*
}

void addOp() : {}
{     < PLUS > | < MINUS > }

void term() : {}
{
  element()
  ( ( < MULTIPLY > | < DIVIDE > ) element() )*
}

void element() : {}
{
    < CONSTANT > | "(" sum() ")"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:57:46.217

您通常希望给予 unary-minus 和 -plus 比它们的二进制对应物更高的优先级。所以，我想你会想要这样的东西：

```
// ...

void add() : {}
{
  mul() ( <PLUS> mul() | <MINUS> mul() )*
}

void mul() : {}
{
  unary() ( <MULTIPLY> unary() | <DIVIDE> unary() )*
}

void unary() : {}
{
  <PLUS> atom() | <MINUS> atom() | atom()
}

// ... 
```

这不需要任何`LOOKAHEAD(...)`.

# vb.net - 设置字符串并在表单取消隐藏后获取其值

> ID：14201526
> 
> 赞同：1
> 
> 时间：2013-01-07T18:07:05.210
> 
> 标签：vb.net

我目前正在尝试制作地址簿应用程序。它会在加载时检查应用程序目录中是否有默认地址簿。如果没有，则用户可以打开选定的地址簿。我将所选文件设置为当前文件时遇到问题。在我打开将新联系人添加到文件并添加它的第二个表单之前，一切都很好。联系人添加到第一个表单中选择的文件，但是当我关闭此“添加表单”时，当前的 xml 路径会重置，程序要求再次打开通讯录，而不是打开我在“添加联系人表单”中修改的 xml 文件。即使我在“添加联系表单”中设置了 xmlCurrentPath，在再次显示联系表单后仍然很清楚。这是我的代码：

```
Public Class Form2
Private myTable As New DataTable()
Dim path = My.Application.Info.DirectoryPath
Dim xmlDefaultPath As String = path + "\address.xml"
Dim xmlCurrentPath As String
Dim fileDlg As New OpenFileDialog
Public isXml As Boolean = False

'Sets current xml path
Public Sub setCurrentPath(ByVal path As String)
    xmlCurrentPath = path
End Sub

Public Sub XmlExistence(ByVal xmlpath As String)
'Checks if current xml path exists and if not then checks if there is a default address book file in root directory
    If IsNothing(xmlCurrentPath) Then
        If System.IO.File.Exists(xmlpath) Then
            xmlCurrentPath = xmlDefaultPath
        Else
            xmlCurrentPath = ""
        End If
    End If
End Sub

Public Sub LoadForm(sender As Object, e As EventArgs) Handles Me.Shown
'checks if there is current xml path and if not asks if you want to choose from file
    If IsNothing(xmlCurrentPath) Then
        XmlExistence(xmlDefaultPath)
        If Not xmlCurrentPath = "" Then
            CreateTable()
            LoadXml(xmlCurrentPath)
        Else
            CreateTable()
            Dim addressfile = MessageBox.Show("Brak pliku adresów w katalogu głównym programu. Czy chcesz wybrać plik z dysku ? Jeśli wybierzesz nie zostanie utworzony nowy plik.", "Pytanie", MessageBoxButtons.YesNo)
            If addressfile = Windows.Forms.DialogResult.Yes Then
                fileDlg.Title = "Otwórz plik adresów"
                fileDlg.Filter = "XML Files|*.xml"
                fileDlg.ShowDialog()
                xmlCurrentPath = fileDlg.FileName
                LoadXml(xmlCurrentPath)
            End If
        End If
    End If

End Sub 
```

如何在将新联系人添加到先前选择的通讯录后，当添加联系人表单关闭时，通讯录表单将再次显示此通讯录。

# r - 使用 R 在给定间隔内选择随机日期的好方法是什么？

> ID：14201530
> 
> 赞同：4
> 
> 时间：2013-01-07T18:07:25.577
> 
> 标签：r, date

我找不到类似的问题，所以我认为它可能对其他人有用和/或引发一些讨论。我想随机抽取一些日常数据，以便快速验证我所做的一些处理。问题是，给定开始日期和结束日期的间隔，如何计算该间隔内的随机日期向量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:16:35.053

一个简单的选择是生成您想要的一组日期，然后`sample()`以通常的方式从它们中生成：

```
Start <- as.Date("2013-01-01")
End <- as.Date("2013-01-31")
dates <- seq(from = Start, to = End, by = 1)

set.seed(1)
draw1 <- sample(dates, 5)
draw2 <- sample(dates, 5)

> draw1
[1] "2013-01-09" "2013-01-12" "2013-01-17" "2013-01-26"
[5] "2013-01-06"
> draw2
[1] "2013-01-28" "2013-01-29" "2013-01-20" "2013-01-18"
[5] "2013-01-02" 
```

如果间隔很长，因为您需要生成所有日期，可能不是最有效的，但是代码非常干净且易于 grep 含义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T18:09:54.647

我会用`sample`

```
dates <- Sys.Date() - 20:1
sample(dates) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T18:31:30.047

我会使用`sample.int`：

```
Start <- as.Date("2013-01-01")
End <- as.Date("2013-01-31")
Samp <- Start + sample.int(End-Start, 5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T18:07:25.577

这是我想出的：

```
as.Date("1979-01-01") + 
  runif( 10, 
    max=as.integer( 
      as.Date( "2012-12-31") - 
        as.Date( "1979-01-01")))

[1] "1997-03-07" "2009-01-11" "1983-02-04" "1999-11-11" "2006-03-26"
[6] "2005-06-04" "2001-03-18" "1994-09-17" "1995-11-28" "1985-04-19" 
```

当然，这可以很容易地封装为一个函数来参数化输出向量的开始日期、结束日期和长度。这样做的优势在于它只使用基本函数；一个缺点可能是它只持续一整天。如果您需要更大的分辨率，则需要更多的参与。

# backbone.js - Backbone.js 中的内联表达式 <%= %>

> ID：14201533
> 
> 赞同：0
> 
> 时间：2013-01-07T18:07:43.943
> 
> 标签：backbone.js, underscore.js

（我确信这个问题不仅仅适用于 Backbone.js，但我不确定要包括哪些其他类别）

在 Backbone.js 上的以下视频中 - [http://www.youtube.com/watch?v=2BDGBJUtAmo](http://www.youtube.com/watch?v=2BDGBJUtAmo) 在 20:30 标记处，程序员使用以下代码和内联表达式 -

```
<script type="text/template" id="tweet-template">
   <span class="author"><%= author %>:</span>
   <span class="status-update"><%= status %></span>
</script> 
```

我的理解是内联表达式标签 -

```
<%=  %> 
```

将与 VB.NET 和 C# 代码一起使用，例如 -

```
<%= DateTime.Now.ToString() %> 
```

但是程序员*并不是*在创建一个 .NET 应用程序。有人能告诉我他为什么使用那些内联表达式标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:10:00.587

这是 underscore.js 模板系统。有据可查[here](http://underscorejs.org/#template)

# c# - 导航服务不能用？

> ID：14201535
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:07:52.670
> 
> 标签：c#, service, navigation, windows-phone

我正在构建这个应用程序，它将根据用户的姓名、年龄和位置为用户提供一些信息。

如果应用程序是第一次启动，我想将用户重定向到 FirstTimePage.xaml，他可以在其中保存他的姓名、年龄和位置。

如果用户不是第一次打开应用程序，应用程序会从独立存储中检索姓名、年龄和位置，因此无需访问 FirstTimePage.xaml

目前，如果存在隔离存储上的数据，我正在检查 MainPage.xaml。如果它们存在，用户将停留在 MainPage.xaml。如果它们不存在，则将用户重定向到 FirstTimePage.xaml。

我的问题：

用户第一次打开应用程序时，即使他们被重定向到 FirstTimePage.xaml，也会在几帧中看到 MainPage.xaml。连一秒都没有，却是有些难看。所以我尝试将“检查”代码放入 app.xaml.cs（在应用程序启动时执行的代码块内）

问题是它无法识别导航代码。它给了我一个粗体字“NavigationService.Navigate ....”的错误

我能做些什么来解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:02:04.017

为了控制导航，您需要调用`Application.Current.RootFrame`来访问`NavigationService`实际加载页面之前的访问权限。

```
private void Application_Launching(object sender, LaunchingEventArgs e)
    {
            //Logic should go here to determine what page needs to load
            Uri nUri = new Uri("/Page1.xaml", UriKind.Relative);
            ((App)Application.Current).RootFrame.Navigate(nUri);

    } 
```

请参阅：[设置起始页](http://debugmode.net/2011/09/05/setting-start-page-of-windows-phone-dynamically-through-code/)以进行更深入的讨论。

# javascript - 为什么当我的持久标头处于初始状态且未修复时，平滑滚动对它不起作用？

> ID：14201540
> 
> 赞同：1
> 
> 时间：2013-01-07T18:08:17.200
> 
> 标签：javascript, html, persistent

这是我正在开发的网站

[http://www.denisstritar.com/DEV/DS3/index.html](http://www.denisstritar.com/DEV/DS3/index.html)

当标题固定到该位置时，平滑滚动开始工作。

**坚持.js：**

```
function UpdateTableHeaders() {
$(".persist-area").each(function() {

   var el             = $(this),
       offset         = el.offset(),
       scrollTop      = $(window).scrollTop(),
       floatingHeader = $(".floatingHeader",  this)

   if ((scrollTop > offset.top) && (scrollTop < offset.top + el.height())) {
       floatingHeader.css({
        "visibility": "visible"
       });
   } else {
       floatingHeader.css({
        "visibility": "hidden"
       });      
   };
});
}

// DOM Ready      
$(function() {

var clonedHeaderRow;

$(".persist-area").each(function() {
   clonedHeaderRow = $(".persist-header", this);
   clonedHeaderRow
     .before(clonedHeaderRow.clone())
     .css("width", clonedHeaderRow.width())
     .addClass("floatingHeader");

});

$(window)
.scroll(UpdateTableHeaders)
.trigger("scroll");

}); 
```

**平滑滚动位：**

```
$(document).ready(function() {

  $('ul.mainNavScroll a').smoothScroll();

  $('p.subnav a').click(function(event) {
    event.preventDefault();
    var link = this;
    $.smoothScroll({
      scrollTarget: link.hash
    });
  });

  $('button.scrollsomething').click(function() {
    $.smoothScroll({
      scrollElement: $('div.scrollme'),
      scrollTarget: '#findme'
    });
    return false;
  });
  $('button.scrollhorz').click(function() {
    $.smoothScroll({
      direction: 'left',
      scrollElement: $('div.scrollme'),
      scrollTarget: '.horiz'
    });
    return false;
  });

}); 
```

先感谢您！

# php - Codeigniter ajax 访问用户数据

> ID：14201542
> 
> 赞同：0
> 
> 时间：2013-01-07T18:08:27.570
> 
> 标签：php, ajax, codeigniter

我正在填充一个选择框字段，具体取决于另一个选择框的选定选项。

```
$.get(window.location + '/controller/load_options?options=' + option, function(data) {
  ...   
}

```

在我的控制器中：

```
函数加载选项（）{
  $this->user = $this->session->userdata('user');
  var_dump($this->user); // 返回空
}

```

`user`数据已设置并可在其他控制器中查看，但当我尝试通过 ajax 请求访问它时，它似乎被重置。为什么会这样？

# c# - 如何访问 LINQ 结果

> ID：14201544
> 
> 赞同：1
> 
> 时间：2013-01-07T18:08:29.903
> 
> 标签：c#, linq

我是使用 LINQ 的新手，无法访问此查询的结果。目标是在其他地方使用结果的值。

```
var orderFacts = new OrdersFactsController().getOrderFacts(base.ModuleId);
var f = (from x in orderFacts 
         where x.Language == lang 
         select new 
                { 
                  x.PRN, 
                  x.ProdCode, 
                  x.KeyCodes,  
                  x.JobNumber, 
                  x.OfferingCode, 
                  x.Currency, x.ID, 
                  x.OrderSourceCode 
                }); 
```

查询正在返回结果，因为我在调试时可以看到它们，但我不知道如何使用结果。

我认为它会像这样简单：

```
var prn = f.PRN 
```

但似乎并非如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:12:47.230

的类型`f`不是您选择的投影属性的单个值。

相反，类型`f`是您新创建的对象`IEnumerable<T>`在哪里`T`（您可以在 Visual Studio 中通过将鼠标悬停在*var*上来查看）。如果您确定只有一个结果对象可以像这样`SingleOrDefault()`使用`f`：

```
var obj = f.SingleOrDefault(); 
```

如果可以包含多个对象，您可以使用语句`f`遍历它们：`foreach`

```
foreach(var obj in f)
{
    var prn = obj.PRN;
} 
```

# python - 我的系统需要超过 32 个 USB 声卡

> ID：14201551
> 
> 赞同：6
> 
> 时间：2013-01-07T18:08:53.097
> 
> 标签：python, linux, alsa, udev, soundcard

我正在开展一个教育性多座位项目，我们需要将 36 个键盘和 36 个 USB 声卡连接到一台计算机。我们正在运行带有 3.6.3-030603 通用内核的 Ubuntu Linux 12.04。

到目前为止，我们已经设法从 36 个键盘获取输入，并识别了 36 个声卡，而没有出现内核恐慌（在更新内核之前发生）。我们知道 36 声卡已经被识别，因为`$ lsusb | grep "Audio" -c`输出`36`。

但是，`$ aplay -l`总共列出了 32 个播放设备（包括“内部”声卡）。另外，`$ alsamixer -c 32`说“无效的卡片索引：32”（仅从 0 到 31 工作；总共也有 32 个）。

所以我的问题是，如果这些命令甚至没有列出其他声卡，我该如何访问它们？我正在用 python 编写一个应用程序，并且有一些库可供选择，但我担心它们也会因此被限制为总共 32 个设备。任何指导都会很有用。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T18:41:57.697

您提出的问题基本上是：ALSA控制的系统中可以有超过32个声卡吗？显然，虽然您的 USB 控制器知道您连接的所有声卡，但 ALSA 系统却不知道。

让我们进入内核源代码来检查这里发生了什么。在`/sound/core/sound.c`您将找到有关最大声卡问题的更多信息：

```
 39 static int cards_limit = 1;
  40 
  41 MODULE_AUTHOR("Jaroslav Kysela <perex@perex.cz>");
  42 MODULE_DESCRIPTION("Advanced Linux Sound Architecture driver for soundcards.");
  43 MODULE_LICENSE("GPL");
  44 module_param(major, int, 0444);
  45 MODULE_PARM_DESC(major, "Major # for sound driver.");
  46 module_param(cards_limit, int, 0444);
  47 MODULE_PARM_DESC(cards_limit, "Count of auto-loadable soundcards.");
  48 MODULE_ALIAS_CHARDEV_MAJOR(CONFIG_SND_MAJOR);
  49 
  50 /* this one holds the actual max. card number currently available.
  51  * as default, it's identical with cards_limit option.  when more
  52  * modules are loaded manually, this limit number increases, too.
  53  */
  54 int snd_ecards_limit;
  55 EXPORT_SYMBOL(snd_ecards_limit); 
```

从代码及其注释中，我读到了两件事：

1.  变量cards_limit 是一个模块参数。我假设在您的安装中，此参数设置为 32。如果内核中内置了 ALSA 支持，您可以在更改此选项的位置构建自定义内核。如果 ALSA 支持不是内置的，而是作为模块加载的，您可以在模块加载期间设置此参数。为此，您可以更改系统配置 ( `man modprobe.d`) 或卸载模块，然后使用选项 ( `man modprobe`) 重新加载它。

2.  该限制被描述为仅限制自动加载的声卡的数量。为了克服这个限制，手动加载负责声卡的模块就足够了。内核中对手动添加的声卡没有设置限制。

来源：[内核 2.8 Git](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=sound/core/sound.c;h=70ccdab7415320e3b20a2aba6c5837f42962f758;hb=HEAD)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T20:25:58.723

声卡限制定义为 中的符号`SNDRV_CARDS`。`include/sound/core.h`

当我七年前增加这个时，我并没有超过 32，因为卡片索引被用作变量`snd_cards_lock`in的位索引`sound/core/init.c`，我不想改变太多。

如果您创建`snd_cards_lock`一个 64 位变量，将所有访问更改为使用 64 位类型，并调整我可能忘记的任何其他副作用，您应该能够让内核拥有更多的 ALSA 卡。

这个限制也存在于`alsa-lib`包中；您至少必须更改签到`snd_ctl_hw_open`。`src/control/control_hw.c`

# apt-get - valgrind 没有这样的文件或目录

> ID：14201552
> 
> 赞同：1
> 
> 时间：2013-01-07T18:08:54.147
> 
> 标签：apt-get

我刚刚安装了 valgrind `apt-get`，它是`/usr/bin/valgrind`根据`which`. 然而...

```
$ valgrind
bash: /usr/local/bin/valgrind: No such file or directory 
```

这里发生了什么？

```
$ /usr/bin/valgrind 
valgrind: no program specified
valgrind: Use --help for more information. 
```

另外... valgrind 不会在提供文件时运行...

```
$ /usr/bin/valgrind ex3
valgrind: ex3: command not found 
```

编辑：我没有适用于 valgrind 的别名。中的文件`/usr/bin/valgrind`不是符号链接。

但是，运行`/usr/bin/valgrind ./ex3`确实可以正常运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:15:06.880

首先，检查您的 shell 中是否有任何别名将 valgrind 重定向到`/usr/local/bin`In bash，您可以通过键入来执行此操作`alias`（或者`alias | grep valgrind`，如果您想变得花哨——如果它什么都不返回，则没有别名）。

其次，程序运行的路径必须是可解析的。除非`ex3`在您的 上`$PATH`，否则您需要执行以下任一操作：

```
 $ /usr/bin/valgrind ./ex3 
```

如果您与`ex3`或在同一目录中

```
 $ /usr/bin/valgrind /path/to/ex3 
```

从文件系统上的任何地方。

# javascript - 来自 UL LI 的 JQuery 自动完成（作为源）

> ID：14201553
> 
> 赞同：4
> 
> 时间：2013-01-07T18:09:16.347
> 
> 标签：javascript, jquery, html, html-lists

这是我的 ul li：

```
<ul id="red" class="treeview-red">
        <li><span>Item 1</span>
            <ul>
                <li><span>Item 1.0</span>
                    <ul>
                        <li><span>Item 1.0.0</span></li>
                    </ul></li>
                <li><span>Item 1.1</span></li>
                <li><span>Item 1.2</span>
                    <ul>
                        <li><span>Item 1.2.0</span>
                            <ul>
                                <li><span>Item 1.2.0.0</span></li>
                                <li><span>Item 1.2.0.1</span></li>
                                <li><span>Item 1.2.0.2</span></li>
                            </ul></li>
...............
.................. 
</ul> 
```

我想从这里的项目中获得一个自动完成的文本字段。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:20:29.250

您要做的是遍历每个跨度（基于您的标记），获取每个跨度的文本，然后将 和 对推入一个`key:value`数组。`label``value`

```
var sources = [];
$('span').each(function(i,ele){
    sources.push({'label': $(ele).text(), 'value' : $(ele).text()});
}); 
```

然后，当您完成构建它时（在 $.each() 之后），我们将简单地使用新数组作为输入源。

```
$('input').autocomplete({
    source: sources
}); 
```

[你可以在这里看到一个快速而肮脏的工作示例](http://jsfiddle.net/VMSEt/)

# javascript - Javascript中的日期比较

> ID：14201554
> 
> 赞同：-2
> 
> 时间：2013-01-07T18:09:23.400
> 
> 标签：javascript, validation, date

我正在尝试将 JS 中的日期与今天的日期进行比较。这就是我的代码的样子。但是当我尝试比较 2014 年 1 月 7 日的日期时，这是行不通的。我究竟做错了什么？

```
var chsRedirectDate = "04/01/2013" ; //new Date("1 Apr 2013");
var today = new Date();
var dd    = today.getDate();
var mm    = today.getMonth()+1; //January is 0!
var yyyy  = today.getFullYear();

if(dd<10){dd='0'+dd};
if(mm<10){mm='0'+mm};

today = mm+'/'+dd+'/'+yyyy;

if (ee_value.toUpperCase() == 'TEST123') && (today >= chsRedirectDate))
   var url = "test.php" ;
   var newtab = window.open("url", null, "top=190,left=450, dependent=yes, directories=no,location=no,menubar=no,status=no,toolbar=no,titlebar=no,scrollbars=no,width=500,height=250,resizable=yes");
   window.close();
   newtab.location = url;
   newtab.focus();

   return false;

}

if (ee_value.toUpperCase() == 'TEST123') && (today < chsRedirectDate))
{
   alert('Testing');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:06:45.297

```
var today = new Date();
var otherDay = new Date("04/01/2013");

alert(today >= otherDay); 
```

# python - pypy 是否支持 cython 扩展？

> ID：14201555
> 
> 赞同：8
> 
> 时间：2013-01-07T18:09:32.870
> 
> 标签：python, cython, pypy

我有一个在 pypy 中运行的项目（并且已经比它的 python 对应物实现了很好的加速）。但是，我确实有一个功能的 Cython 实现，它比 pypy 版本快得多。所以我想包括这个功能。

问题是 pypy 似乎没有找到这个模块（即使 .so 与执行的 .py 脚本位于同一文件夹中）：

```
ImportError: No module named foo 
```

因此，pypy 是否支持 cython？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T18:57:04.280

如果你想让 Cython 扩展在 PyPy 下可用，你必须重新编译它并在 PyPy 下重新安装它。我建议首先使用 virtualenv。但是，如果这纯粹是为了加速，我真的不鼓励你这样做。CPyext（CPython C API 仿真）真的很慢，你很可能最终会变慢。另一方面，优化的 Python 在 PyPy 下的运行速度应该与优化的 Cython（带类型）一样快。

干杯，菲亚尔

# magento-1.7 - magento 1.7.0.2 无法重新索引产品价格

> ID：14201556
> 
> 赞同：2
> 
> 时间：2013-01-07T18:09:38.493
> 
> 标签：magento-1.7

我无法重新索引产品价格，请帮助我
Zend_Db_Statement_Exception 对象（ [_previous:Zend_Exception:private] => [message:protected] => SQLSTATE[21S01]：插入值列表与列列表不匹配：1136 列计数与第 1 行的值计数不匹配 [字符串：异常： private] => 异常 'PDOException' 带有消息 'SQLSTATE[21S01]: Insert value list does not match column list: 1136 Column count doesn't match value count at row 1' in /public_html/lib/Zend/Db/Statement/ Pdo.php:228 堆栈跟踪：#0 /public_html/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array) #1 /public_html/lib/Varien/Db/Statement/Pdo/ Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array) #2 /public_html/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array) #3 /public_html/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array) #4 /public_html/lib/Zend/Db/Adapter/Pdo/Abstract.php( 238）：Zend_Db_Adapter_Abstract->查询（'插入到`ca...', Array) #5 /public_html/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO`ca...', Array) #6 /public_html/app/code/local/Innoexts/StorePricing/Model/Mysql4/Downloadable/Indexer/Price.php(125): Varien_Db_Adapter_Pdo_Mysql->query('INSERT INTO `ca.. .') #7 /public_html/app/code/core/Mage/Downloadable/Model/Resource/Indexer/Price.php(47): Innoexts_StorePricing_Model_Mysql4_Downloadable_Indexer_Price->_prepareFinalPriceData() #8 /public_html/app/code/core/Mage/目录/模型/资源/产品/索引器/Price.php(385): Mage_Downloadable_Model_Resource_Indexer_Price->reindexAll() #9 /public_html/app/code/core/Mage/Index/Model/Indexer/Abstract.php(143): Mage_Catalog_Model_Resource_Product_Indexer_Price ->reindexAll() #10 /public_html/app/code/core/Mage/Index/Model/Process.php(209): Mage_Index_Model_Indexer_Abstract->reindexAll() #11 /public_html/app/code/core/Mage/Index/Model/Process.php(255): Mage_Index_Model_Process->reindexAll() #12 /public_html/app/code/core/Mage/Index/controllers/ Adminhtml/ProcessController.php(178): Mage_Index_Model_Process->reindexEverything() #13 /public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Index_Adminhtml_ProcessController->massReindexAction() #14 / public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('massReindex') #15 /public_html/app/code/core/Mage/Core/Controller /Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http)) #16 /public_html/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch() #17 /public_html/app/Mage.php(683): Mage_Core_Model_App->run(Array) #18 /public_html/index.php(87): Mage::run('', 'store') #19 {主要的}

# jquery - ajax jqueryUI 大表 IE8 Internet Explorer 慢

> ID：14201559
> 
> 赞同：1
> 
> 时间：2013-01-07T18:09:49.160
> 
> 标签：jquery, ajax, performance, jquery-ui, html-table

我现在对此感到困惑，我需要帮助。我正在通过 AJAX 拉入一个大型 html 表（大约 250 行，15 列）每行的 7 列包含更多的子表，这些子表隐藏在单元格的 div 中，并在单元格悬停时显示在悬停时（要显示的更多数据）

在所有最近的浏览器（IE9、FF、Chrome）上都运行良好。我开始添加数据表 jquery 插件，以便能够动态地对列等进行排序，这也很好。

然后我意识到这个应用程序的用户将通过虚拟化操作系统使用 IE8，所以我开始测试。马上，我在开发笔记本电脑的 virtualbox 中在 IE8 下进行测试时发现了一些问题。

似乎发生的情况是，第一次发送 ajax 请求时，浏览器会收集返回的数据并以相当快的速度将其呈现在屏幕上。如果我然后尝试重新提交具有相同数据的表单，浏览器将挂起一段时间，然后出现“此脚本处理时间太长......你想......”

所以我开始整理我的页面，试图看看是什么导致了这种减速。好像 IE 第二次在桌子上窒息并显示错误消息，但是为什么！？！？

我遵循 MSN 关于优化 IE 渲染表的建议，并为此表和子表添加了固定宽度，我还添加了`<colgroups>`. 这影响很小。

不久之后，我意识到如果我在脚本中删除对 JQuery UI 的调用，错误就会消失，并且 virtualbox 下的 IE8 将毫无问题地呈现每个 ajax 响应！

那么，有人可以提供一些建议，为什么包含 JQueryUI 会导致 ajax 表加载速度非常慢并影响浏览器。

顺便说一句 - jqueryUI 存在的唯一原因是因为我在搜索表单中使用了 JQueryUI 日期选择器。据我所知，JQueryUI 不应该干扰 IE 的渲染过程，但似乎确实如此！

在下面找到 ajax 请求的代码示例：

当服务器返回响应后“单击搜索”时，“数据”将包含一个长字符串，其中包含一个表：

```
$.get("<?= config_item('base_url') ?>"+linky, $("#quote").serialize(),
   function(data) 
   {
    //$("#quoteresults").show();
    $("#ajaxloading").hide();
    //$("#ajaxloadingscr").hide();
    //alert(data);
    $('#dvResult').html(data);
   }); 
```

这是一些示例数据，这是我表中的一行...

```
<tr>
  <td><a target="_blank" href="\Anantara Bo Phut"><img src="/assets/images/contractlink.png"></a> <span class="result_HotelName">Anantara Bophut Resort and Spa</span></td>
  <td><a target="_blank" onClick="fnLoadRoomData('5173')" class="result_RoomName">Anantara Suite</a></td>
  <td nowrap="nowrap">2</td>
  <td>BB</td>
  <td nowrap="nowrap" align="right" class="result_PricePound">£0.00</td>
  <td nowrap="nowrap" align="right"><div class="containerprice">
      <div class="pricedate"><span class="result_Price">THB 0.00</span></div>
      <div class="pricext">
        <table class="subtable" style="table-layout:fixed;" width="600" border="0">
          <colgroup>
          <col>
          <col>
          <col>
          <col>
          <col>
          </colgroup>
          <tbody>
            <tr>
              <td colspan="3">Anantara Bophut Resort and Spa - Anantara Suite - #2013-08-08#</td>
            </tr>
            <tr>
              <td>STD Total</td>
            </tr>
            <tr>
              <td>0</td>
            </tr>
            <tr>
              <td colspan="3"><table style="table-layout:fixed;" border="0">
                  <tbody>
                    <tr>
                      <td nowrap="nowrap">Age 35 (1)</td>
                      <td nowrap="nowrap">Age 35 (2)</td>
                    </tr>
                    <tr>
                      <td nowrap="nowrap">0</td>
                      <td nowrap="nowrap">0</td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div></td>
  <td nowrap="nowrap"><div class="containerprice">
      <div class="pricedate"><a href="" class="price_normal">0</a></div>
      <div class="pricext">
        <table class="subtable" width="600" border="0">
          <tbody>
            <tr>
              <td colspan="5">Anantara Bophut Resort and Spa - Anantara Suite - #2013-08-02#</td>
            </tr>
            <tr>
              <td>Total</td>
              <td>STD Rate</td>
              <td>STD Supps</td>
              <td>SNG</td>
              <td>Extra</td>
            </tr>
            <tr>
              <td><a href="" class="price_normal">0</a></td>
              <td></td>
              <td>0</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td colspan="5"><table width="100%" border="0">
                  <tbody>
                    <tr>
                      <td nowrap="nowrap">Age 35 (1)</td>
                      <td nowrap="nowrap">Age 35 (1) Supps</td>
                      <td nowrap="nowrap">Age 35 (2)</td>
                      <td nowrap="nowrap">Age 35 (2) Supps</td>
                    </tr>
                    <tr>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr>
              <td colspan="5">2 2 2# Age 35 2 # EBO I(-15.00%PP) = -0<br></td>
            </tr>
            <tr>
              <td>StdOcc: 2</td>
              <td>AdultBasis: PR</td>
              <td>AdultAgeFrom: 12</td>
              <td colspan="2">RoomBoardCode: BB</td>
            </tr>
            <tr>
              <td></td>
              <td>RoomID: 5173</td>
              <td>ContractID: 511</td>
              <td colspan="2">Total: <span class="grandtotal">0</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div></td>
  <td nowrap="nowrap"><div class="containerprice">
      <div class="pricedate"><a href="" class="price_normal">0</a></div>
      <div class="pricext">
        <table class="subtable" width="600" border="0">
          <tbody>
            <tr>
              <td colspan="5">Anantara Bophut Resort and Spa - Anantara Suite - #2013-08-03#</td>
            </tr>
            <tr>
              <td>Total</td>
              <td>STD Rate</td>
              <td>STD Supps</td>
              <td>SNG</td>
              <td>Extra</td>
            </tr>
            <tr>
              <td><a href="" class="price_normal">0</a></td>
              <td></td>
              <td>0</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td colspan="5"><table width="100%" border="0">
                  <tbody>
                    <tr>
                      <td nowrap="nowrap">Age 35 (1)</td>
                      <td nowrap="nowrap">Age 35 (1) Supps</td>
                      <td nowrap="nowrap">Age 35 (2)</td>
                      <td nowrap="nowrap">Age 35 (2) Supps</td>
                    </tr>
                    <tr>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr>
              <td colspan="5">2 2 2# Age 35 2 # EBO I(-15.00%PP) = -0<br></td>
            </tr>
            <tr>
              <td>StdOcc: 2</td>
              <td>AdultBasis: PR</td>
              <td>AdultAgeFrom: 12</td>
              <td colspan="2">RoomBoardCode: BB</td>
            </tr>
            <tr>
              <td></td>
              <td>RoomID: 5173</td>
              <td>ContractID: 511</td>
              <td colspan="2">Total: <span class="grandtotal">0</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div></td>
  <td nowrap="nowrap"><div class="containerprice">
      <div class="pricedate"><a href="" class="price_normal">0</a></div>
      <div class="pricext">
        <table class="subtable" width="600" border="0">
          <tbody>
            <tr>
              <td colspan="5">Anantara Bophut Resort and Spa - Anantara Suite - #2013-08-04#</td>
            </tr>
            <tr>
              <td>Total</td>
              <td>STD Rate</td>
              <td>STD Supps</td>
              <td>SNG</td>
              <td>Extra</td>
            </tr>
            <tr>
              <td><a href="" class="price_normal">0</a></td>
              <td></td>
              <td>0</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td colspan="5"><table width="100%" border="0">
                  <tbody>
                    <tr>
                      <td nowrap="nowrap">Age 35 (1)</td>
                      <td nowrap="nowrap">Age 35 (1) Supps</td>
                      <td nowrap="nowrap">Age 35 (2)</td>
                      <td nowrap="nowrap">Age 35 (2) Supps</td>
                    </tr>
                    <tr>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr>
              <td colspan="5">2 2 2# Age 35 2 # EBO I(-15.00%PP) = -0<br></td>
            </tr>
            <tr>
              <td>StdOcc: 2</td>
              <td>AdultBasis: PR</td>
              <td>AdultAgeFrom: 12</td>
              <td colspan="2">RoomBoardCode: BB</td>
            </tr>
            <tr>
              <td></td>
              <td>RoomID: 5173</td>
              <td>ContractID: 511</td>
              <td colspan="2">Total: <span class="grandtotal">0</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div></td>
  <td nowrap="nowrap"><div class="containerprice">
      <div class="pricedate"><a href="" class="price_normal">0</a></div>
      <div class="pricext">
        <table class="subtable" width="600" border="0">
          <tbody>
            <tr>
              <td colspan="5">Anantara Bophut Resort and Spa - Anantara Suite - #2013-08-05#</td>
            </tr>
            <tr>
              <td>Total</td>
              <td>STD Rate</td>
              <td>STD Supps</td>
              <td>SNG</td>
              <td>Extra</td>
            </tr>
            <tr>
              <td><a href="" class="price_normal">0</a></td>
              <td></td>
              <td>0</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td colspan="5"><table width="100%" border="0">
                  <tbody>
                    <tr>
                      <td nowrap="nowrap">Age 35 (1)</td>
                      <td nowrap="nowrap">Age 35 (1) Supps</td>
                      <td nowrap="nowrap">Age 35 (2)</td>
                      <td nowrap="nowrap">Age 35 (2) Supps</td>
                    </tr>
                    <tr>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr>
              <td colspan="5">2 2 2# Age 35 2 # EBO I(-15.00%PP) = -0<br></td>
            </tr>
            <tr>
              <td>StdOcc: 2</td>
              <td>AdultBasis: PR</td>
              <td>AdultAgeFrom: 12</td>
              <td colspan="2">RoomBoardCode: BB</td>
            </tr>
            <tr>
              <td></td>
              <td>RoomID: 5173</td>
              <td>ContractID: 511</td>
              <td colspan="2">Total: <span class="grandtotal">0</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div></td>
  <td nowrap="nowrap"><div class="containerprice">
      <div class="pricedate"><a href="" class="price_normal">0</a></div>
      <div class="pricext">
        <table class="subtable" width="600" border="0">
          <tbody>
            <tr>
              <td colspan="5">Anantara Bophut Resort and Spa - Anantara Suite - #2013-08-06#</td>
            </tr>
            <tr>
              <td>Total</td>
              <td>STD Rate</td>
              <td>STD Supps</td>
              <td>SNG</td>
              <td>Extra</td>
            </tr>
            <tr>
              <td><a href="" class="price_normal">0</a></td>
              <td></td>
              <td>0</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td colspan="5"><table width="100%" border="0">
                  <tbody>
                    <tr>
                      <td nowrap="nowrap">Age 35 (1)</td>
                      <td nowrap="nowrap">Age 35 (1) Supps</td>
                      <td nowrap="nowrap">Age 35 (2)</td>
                      <td nowrap="nowrap">Age 35 (2) Supps</td>
                    </tr>
                    <tr>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr>
              <td colspan="5">2 2 2# Age 35 2 # EBO I(-15.00%PP) = -0<br></td>
            </tr>
            <tr>
              <td>StdOcc: 2</td>
              <td>AdultBasis: PR</td>
              <td>AdultAgeFrom: 12</td>
              <td colspan="2">RoomBoardCode: BB</td>
            </tr>
            <tr>
              <td></td>
              <td>RoomID: 5173</td>
              <td>ContractID: 511</td>
              <td colspan="2">Total: <span class="grandtotal">0</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div></td>
  <td nowrap="nowrap"><div class="containerprice">
      <div class="pricedate"><a href="" class="price_normal">0</a></div>
      <div class="pricext">
        <table class="subtable" width="600" border="0">
          <tbody>
            <tr>
              <td colspan="5">Anantara Bophut Resort and Spa - Anantara Suite - #2013-08-07#</td>
            </tr>
            <tr>
              <td>Total</td>
              <td>STD Rate</td>
              <td>STD Supps</td>
              <td>SNG</td>
              <td>Extra</td>
            </tr>
            <tr>
              <td><a href="" class="price_normal">0</a></td>
              <td></td>
              <td>0</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td colspan="5"><table width="100%" border="0">
                  <tbody>
                    <tr>
                      <td nowrap="nowrap">Age 35 (1)</td>
                      <td nowrap="nowrap">Age 35 (1) Supps</td>
                      <td nowrap="nowrap">Age 35 (2)</td>
                      <td nowrap="nowrap">Age 35 (2) Supps</td>
                    </tr>
                    <tr>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr>
              <td colspan="5">2 2 2# Age 35 2 # EBO I(-15.00%PP) = -0<br></td>
            </tr>
            <tr>
              <td>StdOcc: 2</td>
              <td>AdultBasis: PR</td>
              <td>AdultAgeFrom: 12</td>
              <td colspan="2">RoomBoardCode: BB</td>
            </tr>
            <tr>
              <td></td>
              <td>RoomID: 5173</td>
              <td>ContractID: 511</td>
              <td colspan="2">Total: <span class="grandtotal">0</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div></td>
  <td nowrap="nowrap"><div class="containerprice">
      <div class="pricedate"><a href="" class="price_normal">0</a></div>
      <div class="pricext">
        <table class="subtable" width="600" border="0">
          <tbody>
            <tr>
              <td colspan="5">Anantara Bophut Resort and Spa - Anantara Suite - #2013-08-08#</td>
            </tr>
            <tr>
              <td>Total</td>
              <td>STD Rate</td>
              <td>STD Supps</td>
              <td>SNG</td>
              <td>Extra</td>
            </tr>
            <tr>
              <td><a href="" class="price_normal">0</a></td>
              <td></td>
              <td>0</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td colspan="5"><table width="100%" border="0">
                  <tbody>
                    <tr>
                      <td nowrap="nowrap">Age 35 (1)</td>
                      <td nowrap="nowrap">Age 35 (1) Supps</td>
                      <td nowrap="nowrap">Age 35 (2)</td>
                      <td nowrap="nowrap">Age 35 (2) Supps</td>
                    </tr>
                    <tr>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                      <td nowrap="nowrap"></td>
                    </tr>
                  </tbody>
                </table></td>
            </tr>
            <tr>
              <td colspan="5">2 2 2# Age 35 2 # EBO I(-15.00%PP) = -0<br></td>
            </tr>
            <tr>
              <td>StdOcc: 2</td>
              <td>AdultBasis: PR</td>
              <td>AdultAgeFrom: 12</td>
              <td colspan="2">RoomBoardCode: BB</td>
            </tr>
            <tr>
              <td></td>
              <td>RoomID: 5173</td>
              <td>ContractID: 511</td>
              <td colspan="2">Total: <span class="grandtotal">0</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div></td>
</tr> 
```

这是日期选择器初始化 ondomload

```
$(function() {
$.ajaxSetup({ cache: false });

$("#quote").submit(function(e){
    e.preventDefault();
  });

   $( "#datefrom" ).datepicker({
            dateFormat: "dd-mm-yy",
            changeMonth: false,
            numberOfMonths: 1,
            minDate: 0,
            onSelect: function(dateText, inst) { 

                var aDates=dateText.split("-");
                var strSelectedDate=aDates[1]+'/'+aDates[0]+'/'+aDates[2];
                var oSelectDate=new Date(strSelectedDate);

                //$( "#dateto" ).datepicker( "option", "minDate", $("#datefrom").val() );

                oSelectDate.setDate(oSelectDate.getDate()+1);
        $("#dateto").val(Convert(oSelectDate.getDate())+'-'+Convert(parseInt(oSelectDate.getMonth())+1)+'-'+oSelectDate.getFullYear());
                $( "#drNoOfNights" ).val(1);

            }
        }); 
        $( "#dateto" ).datepicker({
            dateFormat: "dd-mm-yy",
            changeMonth: false,
            numberOfMonths: 1,
            onSelect: function(dateText, inst) { 

                var aDates=$( "#datefrom" ).val().split("-");
                var strSelectedDate=aDates[1]+'/'+aDates[0]+'/'+aDates[2];
                var start=new Date(strSelectedDate);

                aDates=dateText.split("-");
                var strSelectedDate=aDates[1]+'/'+aDates[0]+'/'+aDates[2];
                var end=new Date(strSelectedDate);

                var diff = 0;
                if (start && end) {
                    diff = Math.floor((end.getTime() - start.getTime()) / 86400000); // ms per day
                }

                $('#drNoOfNights').val(diff);

            }
        });

}); 
```

# mysql - 如何使用 Hibernate 和 log4j 仅记录插入和更新？

> ID：14201562
> 
> 赞同：1
> 
> 时间：2013-01-07T18:09:53.993
> 
> 标签：mysql, spring, hibernate, log4j

我有一个基于 Spring 的 webapp，使用 Hibernate 来查询 mysql。当我使用 启用跟踪日志记录时`log4j.logger.org.hibernate.type=TRACE`，所有带有参数的查询都会记录到控制台。这使得 webapp 的搜索查询速度变慢。

我只需要记录对数据库的修改。最好是向 mysql 服务器发出插入/更新查询。这样做的最简单和最可靠的方法是什么？

我可以只要求 log4j 只记录插入查询吗？

P6SPY 对我来说似乎有点过分了。 [http://sourceforge.net/projects/p6spy/](http://sourceforge.net/projects/p6spy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:48:50.143

log4j 2 扩展过滤器支持。您可能想[`RegexFilter`](http://logging.apache.org/log4j/2.x/manual/filters.html#RegexFilter)尝试一下。

对于 log4j 1.2.x，[`StringMatchFilter`](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/varia/StringMatchFilter.html)这是“附加”包的一部分。

[这是一个在网上](http://www.webdeveloper.com/forum/showthread.php?t=91074)找到的简单示例：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
  <appender name="CustomAppender" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="custom.log"/>
    <param name="Append" value="true"/>
    <param name="MaxFileSize" value="5000KB"/>
    <param name="maxBackupIndex" value="5"/> 
          <layout class="org.apache.log4j.PatternLayout">
                  <param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss} [%t] %-5p - %m%n" />
          </layout>

          <filter class="org.apache.log4j.varia.StringMatchFilter">
                  <param name="StringToMatch" value="Here is DEBUG" />
                  <param name="AcceptOnMatch" value="true" />
          </filter>
  </appender>

  <root>
    <appender-ref ref="CustomAppender"/>
  </root>
</log4j:configuration> 
```

但是，AFAIU 它不允许你匹配通配符，这意味着我猜你的情况是死路一条。如果您深入研究过滤器源代码，编写自己的代码应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T13:32:01.243

您可以将过滤应用于：org.hibernate.type.descriptor.sql.BasicBinder

# jasper-reports - 在 iReport 中增加（或减少）每个数据集的变量值

> ID：14201565
> 
> 赞同：0
> 
> 时间：2013-01-07T18:10:02.620
> 
> 标签：jasper-reports, ireport

我有一个 Oracle 查询，用于`sysdate - N`获取`N`几天前的信息。我想使用 iReport 中的变量制作一个包含 3 个数据集的报告： `sysdate - N`、、 。我不清楚如何做到这一点。我相信查询应该在所有三个数据集中完全相同，但变量的值应该每次递增，即, , 。我需要什么类型的增量器来完成这个？`sysdate - N - 1``sysdate - N - 2``1``sysdate - (N + 0)``sysdate - (N + 1)``sysdate - (N + 2)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:32:38.543

你有没有尝试过这样的事情？

```
 SELECT DATECOL, COL1, COL2
 FROM THETABLE
 WHERE DATECOL BETWEEN (SYSDATE-($P{N}+0)) AND (SYSDATE-($P{N}+2))
 ORDER BY DATECOL 
```

然后，在 iReport 中，为 DATECOL 创建一个分组带，并将 COL1 和 COL2 放入您的 Detail 1 带。这将分离每个时间段的结果。

# javascript - 使用外部 JavaScript 中的 getElementById 到 asp 文字变量

> ID：14201567
> 
> 赞同：0
> 
> 时间：2013-01-07T18:10:08.230
> 
> 标签：javascript, asp.net, html

我正在尝试使用 将名为的变量读取`ID="_errors"`到我的 javascript 中`getElementById`，但是关于我的实现的某些内容会导致我的 JS 文件被忽略。

这是 HTML：

```
...
    <asp:TextBox ID="_password" CssClass="login" runat="server" TextMode="Password" />
    <label class="mylabel" for="<%=_errors.ClientID%>"></label>
    <table id="table1">      
        <tr>
            <td style="width: 100px;"></td>        
            <td><span class="response1" runat="server"><asp:Literal ID="_errors" runat="server" /></span></td>                           
        </tr>
        <tr>
            <td style="width: 280px;"></td>
            <td><asp:Button ID="_login" CssClass="mybutton" runat="server" Text="Login" /></td>
        </tr>
    </table>
... 
```

这就是我`_errors`在 .js 文件中引用的方式：

```
var PassWord            = document.getElementById('_login__password').value;
var Errors              = document.getElementById('_login__errors').value; 
```

我`PassWord`在这里引用了我的值，因为它工作得很好。通过查看我的页面源，我使用 ClientID 来了解 ID 是什么。我`_errors`对`PassWord`. 让我担心的事情（以及错误的可能来源）是该部分`<asp:Literal ID="_errors" runat="server" />`根本没有出现在页面源中。关于这里可能是什么问题的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:18:35.160

如前所述，您无法通过其 ID 访问文字。

您可以简单地在周围设置 ID`<span>`并使该元素“在服务器上运行”：

```
...
    <asp:TextBox ID="_password" CssClass="login" runat="server" TextMode="Password" />
    <label class="mylabel" for="<%=_errors.ClientID%>"></label>
    <table id="table1">      
        <tr>
            <td style="width: 100px">&nbsp;</td>        
            <td><span ID="_errors" class="response1" runat="server" /></td>                           
        </tr>
        <tr>
            <td style="width: 100px">&nbsp;</td>
            <td><asp:Button ID="_login" CssClass="mybutton" runat="server" Text="Login" /></td>
        </tr>
    </table>
... 
```

笔记：

*   我还添加`&nbsp;`到您原本为空的`td`元素中，以防止显示问题
*   您不能在同一列中的单元格上设置不同的大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:22:01.507

当您在页面中放置文字控件时，它只是呈现内容而不将其包含在任何 html 元素中

例如：

```
<Asp:literal runat="Server" Text="Hello" /> 
```

将呈现为：

```
 Hello 
```

因此，调用`document.getElementById`失败，因为没有具有该 id 的元素......

如果您希望文字控件呈现为带有 id 的跨度，则将 Text 属性设置如下：

```
<asp:literal runat="server" Text="<span id='_errors'>Hello</span>" /> 
```

# python - 我想使用正则表达式来检查名称中有空格的文件并用下划线替换空格

> ID：14201569
> 
> 赞同：1
> 
> 时间：2013-01-07T18:10:11.137
> 
> 标签：python, regex

我编写了一个应用程序，它使用 ffmpeg 将文件转换为特定文件夹中的不同格式。该文件夹包含 .mpg、.mp3、.avi、.flv ... 或任何决定添加的音频/视频文件。当我使用我的应用程序选择名称中包含空格的要转换的文件时，就会出现问题；该应用程序会立即关闭，而无需将文件转换为其他格式。目前，我必须重命名名称中包含空格的所有文件，然后才能通过我的 app->ffmpeg 进行转换。我正在尝试编写一个函数，该函数将从我的应用程序开始检查特定文件夹中的文件名是否有空格，用下划线（'_'）替换这些空格。我在使用正则表达式时遇到了一些问题；我不擅长编写/配置它们来解决问题。有人可以建议我使用正确的正则表达式来查找文件名中的空白/空格吗？以下是我到目前为止的内容：

```
import os
import re

pattern = r"([^\s]+(?=\.(mp3|mov|mpg|mp4|flv|avi|mpeg4|mkv|mpeg|mpg2|.wav))\.\2)"

def replace_Wspace(self, fName):
    if re.match(pattern, fName):
        fname = fName.replace(' ', '_')
    return fname 
```

我正在根据要求从我的应用程序中添加处理对 ffmpeg 的调用的代码部分：

```
def convertButton(self, e):

    unit1 = self.format_combo1.GetValue()
    #Media Formats
    unit2 = self.format_combo2.GetValue()
    unit3 = self.format_combo3.GetValue()
    unit4 = None
    unit5 = self.format_combo5.GetValue()
    bitRate = self.format_combo6.GetValue()
    unit6 = bitRate
    if unit3 == '-qmax':
        unit4 = self.format_combo4.GetValue()
    else:
        pass

    os.chdir("c:\\d-Converter\\ffmpeg\\bin")
    wrkdir = os.getcwd()

    newfile = unit1
    stripped = newfile.strip('mpeg3aviovfl4w2c.') #Strips the extension from the original file name

    progname='c:\\d-Converter\\ffmpeg\\bin\\ffmpeg.exe' + ' -i '

    preset1_a='-vn -ar 44100 -ac 2 -ab'
    preset1_b='-f mp3 '
    preset_mp3='.mp3'

    chck_unit1 = self.my_endswith(unit1)

    while True:    
        if unit5 == 'video to mp3':

            if unit6 == 'k/bs' or unit6 == '':
                amsg = wx.MessageDialog(None, 'You must select a bit rate.', 'Media Converter', wx.ICON_INFORMATION)
                amsg.ShowModal()
                amsg.Destroy()
                break

            elif unit5 == 'video to mp3' and unit6 != 'k/bs' or unit6 != '':
                self.button.Disable()
                self.button2.Enable()
                self.format_combo1.Disable()
                self.format_combo2.Disable()
                self.format_combo3.Disable()
                self.format_combo4.Disable()
                self.format_combo5.Disable()
                self.format_combo6.Disable()
                startWorker(self.LongTaskDone, self.LongTask3, wargs=(progname, wrkdir, unit1, preset1_a, unit6, preset1_b, stripped, preset_mp3))
                break
            elif unit1 != unit1.endswith(".mpg") or unit1.endswith(".mpeg") or unit1.endswith(".avi") or unit1.endswith(".mp4") or unit1.endswith(".flv"):
                bmsg = wx.MessageDialog(None, 'You must select a valid format to convert to .mp3.', 'Media Converter', wx.ICON_INFORMATION)
                bmsg.ShowModal()
                bmsg.Destroy()
                break

        else:
            pass

        if unit1 == 'Select Media' or unit1 == '':
            amsg = wx.MessageDialog(None, 'You must select a media file!', 'Media Converter', wx.ICON_INFORMATION)
            amsg.ShowModal()
            amsg.Destroy()
            break

        elif unit2 == 'Select Format' or unit2 == '' or unit2 == chck_unit1:
            amsg = wx.MessageDialog(None, 'You must select a valid format', 'Media Converter', wx.ICON_INFORMATION)
            amsg.ShowModal()
            amsg.Destroy()
            break

        elif unit3 == 'Select Quality' or unit3 == '':
            amsg = wx.MessageDialog(None, 'You must select quality', 'Media Converter', wx.ICON_INFORMATION)
            amsg.ShowModal()
            amsg.Destroy()
            break

        elif unit3 != 'Select Quality' or unit3 != '':
            self.format_combo5.Disable()

            if unit3 == '-qmax':
                if unit4 == '0' or unit4 == '':
                    amsg = wx.MessageDialog(None, 'You must select number between 1-8.', 'Media Converter', wx.ICON_INFORMATION)
                    amsg.ShowModal()
                    amsg.Destroy()
                    break
                else:
                    self.button.Disable()
                    self.button2.Enable()
                    self.format_combo1.Disable()
                    self.format_combo2.Disable()
                    self.format_combo3.Disable()
                    self.format_combo4.Disable()
                    self.format_combo5.Disable()
                    startWorker(self.LongTaskDone, self.LongTask2, wargs=(progname,wrkdir,unit1,unit3,unit4,stripped,unit2))
                    break
            elif unit3 == '-sameq':
                self.button.Disable()
                self.button2.Enable()
                self.format_combo1.Disable()
                self.format_combo2.Disable()
                self.format_combo3.Disable()
                self.format_combo4.Disable()
                self.format_combo5.Disable()
                startWorker(self.LongTaskDone, self.LongTask, wargs=(progname,wrkdir,unit1,unit3,stripped,unit2))
                break   

def LongTask(self, progname, wrkdir, unit1, unit3, stripped, unit2):
    convert_file1 = progname + wrkdir + '\\' + unit1 + ' ' + unit3 + ' ' + stripped + unit2
    self.statusbar.SetStatusText("Converting: " + unit1 + "...")
    os.system(convert_file1)
    print convert_file1

def LongTask2(self, progname, wrkdir, unit1, unit3, unit4, stripped, unit2):
    convert_file2 = progname + wrkdir + '\\' + unit1 + ' ' + unit3 + ' ' + unit4 + ' ' + stripped + unit2
    self.statusbar.SetStatusText("Converting: " + unit1 + "...")
    os.system(convert_file2)

def LongTask3(self, progname, wrkdir, unit1, preset1_a, unit6, preset1_b, stripped, preset_mp3):
    convert_file3 = progname + wrkdir + '\\' + unit1 + ' ' + preset1_a + ' ' + unit6 + ' ' + preset1_b + stripped + preset_mp3
    self.statusbar.SetStatusText("Converting: " + unit1 + "...")
    os.system(convert_file3)
    print convert_file3

def LongTask4(self, progdir, wrkdir, prog_dir, progdir3, f_string, s_string2, vid_format):
    convert_file4 = progdir + f_string + prog_dir + s_string2 + progdir3 + f_string.strip('mpegaviw24ofl.') + vid_format
    self.statusbar.SetStatusText("Converting: " + f_string + "...")
    os.system(convert_file4)
    print convert_file4 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:18:34.133

代替正则表达式，使用 use ，您可以提供一个元组作为所有音频扩展的参数，如果以其中任何一个结尾，[`fName.endswith()`](http://docs.python.org/2/library/stdtypes.html#str.endswith)它将返回，例如：`True``fName`

```
audio = ('.mp3','.mov','.mpg','.mp4','.flv','.avi','.mpeg4','.mkv','.mpeg','.mpg2','.wav')
if fName.endswith(audio) and ' ' in fName:
    return fName.replace(' ', '_')
return fName 
```

如果没有空格或有不同的扩展名，它将返回原始字符串而不做任何更改。

或者，您可以使用[`os.path.splitext()`](http://docs.python.org/2/library/os.path.html#os.path.splitext)：

```
audio = set(('.mp3','.mov','.mpg','.mp4','.flv','.avi','.mpeg4','.mkv','.mpeg','.mpg2','.wav'))
if os.path.splitext(fName)[1] in audio and ' ' in fName:
    return fName.replace(' ', '_')
return fName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:18:17.343

我认为您不需要正则表达式。你可以简单地使用`if ' ' in file:`

像这样：

```
import os
dir = '.'
for file in os.listdir(dir)
  if ' ' in file:
    os.rename(file,file.replace(' ','_')) 
```

在尝试批量重命名之前，可能要`print file`测试您是否位于正确的目录中。

如果您需要确保它是可接受的文件格式，请使用 os.path.splitext() 获取扩展名：

```
extensions = ('.mp3','.mov','.mpg','.mp4','.flv','.avi','.mpeg4','.mkv','.mpeg','.mpg2','.wav')
fname, ext = os.path.splitext(file)
if ext in extensions:
  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:01:16.437

FJ的[回答](https://stackoverflow.com/a/14201687/298607)很棒。如果您真的很关心空间，并且确实想像 iTunes 一样更改它们，我只想补充一点，您可能想做这样的事情：

```
audio = ('.mp3','.mov','.mpg','.mp4','.flv','.avi','.mpeg4','.mkv','.mpeg','.mpg2','.wav')
spaces=['\t',' ','\r','\n','\v']  # etc -- other nasty space like characters...
if fName.endswith(audio) and any(space in fName for space in spaces):
    return ''.join(c if c not in spaces else '_' for c in fName)
... 
```

您正在将 fName 中的所有潜在空间（如字符）捕获到“_”中

因此，如果您有：

```
fName='file name\twith\nstuff\vin it' 
```

它变成：

```
file_name_with_stuff_in_it 
```

# c# - 将表添加到现有的 LINQ 查询

> ID：14201570
> 
> 赞同：1
> 
> 时间：2013-01-07T18:10:13.680
> 
> 标签：c#, asp.net-mvc, linq

我有一个查询：

```
model.Queue = _db.Orders
                .Join(_db.Tool,
                    a => a.PART_KEY,
                    b => b.PART_KEY,
                    (a, b) => new { a, b })
                .Where(r => (r.a.PART_KEY == r.b.PART_KEY) && (r.b.Site == Site))
                .Where(r => (r.a.Start > 0) && (r.a.Finish == 0))
                .GroupBy(r => new { r.a.GROUP })
                .Select(r => new Queue
                {
                    name = r.Key.GROUP,
                    count = r.GroupBy(g => g.a.PART_KEY).Count(),
                    average = r.Average(g => g.a.DaysInSequence)
                }); 
```

该查询当前用于为用户生成指标。用户现在希望扩展指标以包含表中已完成的订单`OrdersCompleted`。在数据库中，当一个订单完成时，整个订单会从 移动`Orders`到`OrdersComplete`。两个表具有相同的结构，即相同的列和相同的模型类。

看起来我需要使用的扩展方法 is `Concat`，但我在弄清楚语法以使其与此特定查询一起使用时遇到问题。似乎添加`.Concat(_db.OrdersComplete)`为第一个扩展方法应该可以工作，但似乎并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:20:00.040

问题在于，即使两个表具有完全相同的列，具有完全相同的类型和名称，生成类的工具也会创建两个具有不同名称的类型。由于类型不*完全相同*，`Concat`因此不起作用。您需要做一些事情来映射一个或两个表，以便它们共享一个类型。

一种选择是将它们都映射到匿名类型。添加类似：

```
.Select(o => new
{
    o.PART_KEY,
    o.GROUP
    //Any other columns you need from each order
}); 
```

在两者`_db.Orders`以及之后`_db.OrdersComplete`。然后`Concat`意志起作用。

另一种选择是，如果您认为需要处理所有组合订单很常见，则可以解决数据库类不相关的潜在问题。您可以修改实际的 DB 对象，以便在所有查询中更轻松。

一种选择是创建两个类都可以扩展/实现的接口或基类型。如果您使用两种类型共享的所有列创建一个接口，并让它们都实现该接口，那么您可以使用它`Concat`来创建该接口的枚举。（但不确定它与 Linq-To-Sql 的效果如何。）

第三种选择是在数据库中创建一个视图，在后台，它只是`Union All`这两个表上的一个，可能从一个或两个表中提取列的子集。然后，您可以查询该视图，而不是自己连接表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:19:50.593

Servy 的[回答](https://stackoverflow.com/a/14201711/285002)是正确的：最简单的方法是从两个查询中的每一个中创建一个匿名类。只要匿名类具有相同的属性，两者都`Concat`可以`Union`工作。

一种可能的替代方法是在两个表上运行相同的查询（因为您已经将结果投影到一个新`Queue`对象中，以及`Concat`来自两个查询的结果。

# mustache - Pystache：部分后换行

> ID：14201572
> 
> 赞同：2
> 
> 时间：2013-01-07T18:10:22.870
> 
> 标签：mustache

在 Pystache 模板中包含分部时，会在分部之后添加换行符。例如，模板包含：

```
blah = {{> partial}}; 
```

`partial.mustache`单行文件在哪里，例如：

```
{{#blubb}} "{{.}}" {{/blubb}} 
```

结果是：

```
blah = "blubb1" "blubb2"
; 
```

有没有办法在部分之后抑制换行符？（这甚至是预期的行为吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:04:23.007

预期的行为是这样的：

*   `' "{{.}}"\n'`是您的 ('blubb') 部分标签的内容。
*   用列表扩展“blubb”部分`[ 'blubb1', 'blubb2' ]`应该产生`' "blubb1"\n "blubb2"\n'`
*   因此，扩展模板中的部分应该会产生`blah =  "blubb1"\n "blubb2"\n;`

应该可以通过将部分标签重写为单行来删除插页式换行符，例如`{{#blubb}} "{{.}}"{{/blubb}}`. 但是，如果部分文件包含尾随换行符，这将产生非常类似于您报告的结果。

# php - PHP 代码嗅探器和骆驼帽

> ID：14201575
> 
> 赞同：2
> 
> 时间：2013-01-07T18:10:27.627
> 
> 标签：php, codesniffer

我刚刚开始使用 Code Sniffer 来清理我的代码。

我发现 Code Sniffer 将 php 的内置函数名称作为错误捕获。例如：

在网上`if($mysqli->connect_error === true) {`我收到一条消息：

变量“connect_error”不是有效的驼峰大写格式。

我选择使用 Zend 标准，因为它显示了很多清理要点，并且希望在将来使用它。

所以问题是——你怎么做呢？- 忽略这些错误 - 修复 php 代码嗅探器以忽略 php 内置函数名称 - 使用其他标准？- 还要别的吗？

感谢您的建议！

安德里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T23:35:36.190

这是由于 Zend 标准不完整且不经常更新。PHP_CodeSniffer 中的 Zend 标准实际上根本不是一个完整的标准。它只是一些在 Zend 工作的人（很久以前）编写的嗅探集合。

如果您想开始清理您的代码，我建议您从 PEAR 或 PSR2 标准开始。PEAR 相当成熟，而 PSR2 非常新，但两者都将帮助您获得漂亮干净的代码。PEAR 标准将有助于保持文档注释的一致性，而 PSR2 则不会，因此请记住这一点。这些都不会抱怨 mysqli 函数。

PHP_CodeSniffer 也带有 Squiz 标准，但这是非常严格的。可能一开始就太严格了。

您还可以通过混合所有部分来创建自己的标准，但最好先从一个完整的标准开始，这样您就可以了解所有检查的完成位置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T18:13:52.813

> 你怎么办？- 忽略这些错误 - 修复 php 代码嗅探器以忽略 php 内置函数名称 - 使用其他标准？- 还要别的吗？

好问题。

小心忽略错误，通常你也会忽略一些你确实想知道的东西。

我的建议是，在您忽略任何错误报告之前，您应该多浏览一下 Code Sniffer 文档，看看是否可以找到此设置。

另外，请记住，仅仅因为错误消息说明了一件事，它可能并不一定意味着它所说的内容。例如，当您收到“意外字符串”之类的错误时，通常意味着您忘记了某个`;`或某事。因此，请查看您的代码以确认没有任何语法错误。（即@DavidHoude 提出了一个很好的观点：“ `$mysqli>connect_error === true`”可能需要 a`->`而不是 a `>`）

# javascript - 是否有所有月份的 javascript switch 语句片段

> ID：14201576
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:10:37.780
> 
> 标签：javascript, jquery, twitter-bootstrap, switch-statement

我正在尝试显示当前月份的选项卡式窗格。使用 Bootstrap 的选项卡方法。想知道是否有人看到此代码中的任何缺陷？到目前为止，它正在按照我想要的方式工作，使用和测试自己。

**的HTML**

```
<ul class="nav nav-tabs" id="monthsTab">
   <li><a href="#January" id="janLink" data-toggle="tab">January</a></li>
   <li><a href="#February" id="febLink" data-toggle="tab" >February</a></li>
   <li><a href="#March" id="marLink" data-toggle="tab">March</a></li>
   <li><a href="#April" id="aprLink" data-toggle="tab">April</a></li>
   <li><a href="#May" id="mayLink" data-toggle="tab">May</a></li>
   <li><a href="#June" id="junLink" data-toggle="tab">June</a></li>
   <li><a href="#July" id="julLink" data-toggle="tab">July</a></li>
   <li><a href="#August" id="augLink" data-toggle="tab">August</a></li>
   <li><a href="#September" id="sepLink" data-toggle="tab">September</a></li>
   <li><a href="#October" id="octLink" data-toggle="tab">October</a></li>
   <li><a href="#November" id="novLink" data-toggle="tab">November</a></li>
   <li><a href="#December" id="decLink" data-toggle="tab">December</a></li>
</ul> 
```

**和 JS：**

```
var currentMonth = function () {
        var myMonth=new Date();
        var theMonth = myMonth.getMonth();
        var target = '';
        var month = '';
        switch (theMonth) {
         case 0:
            target = "janLink";
            month = "January";
         break;
         case 1:
            target = "febLink";
            month = "February";
         break;
         case 2:
            target = "marLink";
            month = "March";
         break;
         case 3:
            target = "aprLink";
            month = "April";
         break;
         case 4:
            target = "mayLink";
            month = "May";
         break;
         case 5:
            target = "junLink";
            month = "June";
         break;
         case 6:
            target = "julLink";
            month = "July";
         break;
         case 7:
            target = "augLink";
            month = "August";
         break;
         case 8:
            target = "sepLink";
            month = "September";
         break;
         case 9:
            target = "octLink";
            month = "October";
         break;
         case 10:
            target = "novLink";
            month = "November";
         break;
         case 11:
            target = "decLink";
            month = "December";
         break;
        }
        $('#monthsTab, ' + '#' + target).parent().addClass('active');
        $('#'+month).addClass('active');
    };
    currentMonth(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:13:24.147

而不是那个 looooooooooooong 开关盒，我会使用一个对象数组：

```
var months = [
   {name: "January" , link: "janLink"}, 
   {name: "February" , link: "febLink"}, 
   ...
];

var currentMonth = function () {
    var myMonth = new Date();
    var theMonth = myMonth.getMonth();
    $('#monthsTab, #' + months[theMonth].link).parent().addClass('active');
    $('#' + months[theMonth].name).addClass('active');
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:16:32.773

要显示正确的内容，您应该在所选选项卡上触发点击事件。您为此类任务编写了相当长的代码 - 只要选项卡按顺序排列，您就可以确定按顺序激活哪个选项卡（查看[jQuery.eq()](http://api.jquery.com/eq/)）

```
$('#monthsTab li').eq(myMonth.getMonth()).trigger('click'); 
```

# c# - 2 个不同的独立表中的基类和子类模型

> ID：14201580
> 
> 赞同：1
> 
> 时间：2013-01-07T18:10:54.373
> 
> 标签：c#, .net, entity-framework

我应该缓存传入的数据。我有 2 个模型 OrderModel 和 OrderDetailedModel，其中 OrderModel 是一个基类，而 OrderDetailedModel 是一个子类。

用户首先打开一个订单列表 - 仅检索一些数据（订单模型列表）。这个列表应该被缓存。

当用户选择特定订单时，所有信息都在（OrderDetailedModel）中，这也应该被缓存。

重要的是，当再次下载列表时，我不希望缓存的 OrderDetailedModel 行被 OrderModel 覆盖。（不想清除详细信息）

我尝试创建 2 个不同的 DbSet：

```
public DbSet<OrderModel> Orders { get; set; }
public DbSet<OrderDetailedModel> OrderDetails { get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{

    modelBuilder.Entity<OrderDetailedModel>().Map(m =>
    {
        //m.MapInheritedProperties(); // this doesn't help either
        m.ToTable("OrderDetails");
    });

modelBuilder.Entity<OrderModel>().Map(m =>
        {
            //m.MapInheritedProperties();
            m.ToTable("Orders");
        });

} 
```

但似乎它们仍然以某种方式联系在一起。这是每个 DbSet 的“内容”：

命令：

```
FROM  [Orders] AS [Extent1]
LEFT OUTER JOIN  (SELECT 
    [Extent2].[Id] AS [Id], 
    .....
    cast(1 as bit) AS [C1]
    FROM [OrderDetails] AS [Extent2] ) AS [Project1] ON [Extent1].[Id] = [Project1].[Id]} 
```

订单详细信息：

```
{SELECT 
N'0X0X' AS [C1], 
[Extent1].[Id] AS [Id], 
... 
[Extent1].[StoreContact] AS [StoreContact], 
...
FROM  [OrderDetails] AS [Extent1]
INNER JOIN [Orders] AS [Extent2] ON [Extent1].[Id] = [Extent2].[Id]} 
```

这会导致错误：

```
var a = Entry<T>(detailedOrderObject); 
```

> “System.InvalidOperationException：当请求 OrderDetailedModel 类型的实体时，找到的实体属于 OrderModel 类型。

发生这种情况是因为详细订单与列表中下载的订单之一具有相同的 ID。（ID来自服务器）

去这里的正确方法是什么？

*   2 个完全独立的桌子。这该怎么做？
*   把所有东西都放在详细的订单表中。同样，如何做到这一点以避免覆盖我上面提到的？
*   也许还有别的？

**编辑**

模特班：

```
public class OrderModel
    {
        [Key, Column(Order=0), DatabaseGenerated(DatabaseGeneratedOption.None)]
        [JsonProperty(PropertyName = "order_id")]
        public int Id { get; set; }

        [JsonProperty(PropertyName = "order_number")]
        public String Number { get; set; }

        //... only properties, like the one above

public class OrderDetailedModel :OrderModel
    {
        [JsonProperty(PropertyName="store_contact")]
        public string StoreContact { get; set; }

        //... only properties, like the one above 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:21:54.283

您的类仍然是连接的，因为您的 OrderDetailedModel 类是从 OrderModel 派生的，并且 EF 在您查询表时会感到困惑。

话虽如此，我认为您绝对应该将它们分成 2 个单独的表，如果除了规范化数据库之外没有其他原因。要将其拆分，您需要在代码中包含 ForeignKey 属性，并停止从 OrderModel 派生 OrderDetailedModel 类。

假设 OrderModel : OrderDetailedModel 是 1:1，您将执行以下操作：

将此添加到 OrderModel：

```
public virtual OrderDetailedModel OrderDetails { get; set; } 
```

并且对于您的 OrderDetailedModel 具有以下内容（任何其他注释，如 JsonProperty 也可以保留 - 我只是向您展示您需要拥有的 EF 注释）：

```
public class OrderDetailedModel
{

  [Key, ForeignKey("Order")]
  public int OrderID { get; set; }

  //some properties

  public virtual OrderModel Order { get; set; }

} 
```

让我知道它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:57:51.820

以防万一有人需要保持继承，我发布了我创建的解决方法：

```
public class OrderModel
{
    protected bool _detailed;

    [Key, Column(Order=0), DatabaseGenerated(DatabaseGeneratedOption.None)]
    [JsonProperty(PropertyName = "order_id")]
    public int Id { get; set; }

    [Key, Column(Order = 1), DatabaseGenerated(DatabaseGeneratedOption.None)]
    [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
    public bool Detailed
    {
        get { return _detailed; }
        set
        {
            if( (this.GetType() == typeof(OrderModel) && value== true) ||
                (this.GetType() == typeof(OrderDetailedModel) && value==false))
                throw new ArgumentException("This property is restricted");
            _detailed = value;
        }
    }

    //....

    public OrderModel()
    {
        _detailed = false;
    }
}

public class OrderDetailedModel :OrderModel
{
    //.....

    public OrderDetailedModel()
    {
        _detailed = true;
    }
} 
```

它不漂亮，但有效。

# php - 在 PHP 中，如何在另一个类的静态变量中引用一个类

> ID：14201590
> 
> 赞同：0
> 
> 时间：2013-01-07T17:05:30.317
> 
> 标签：php, unit-testing

在 PHP 中使用静态类/方法时，我不确定如何执行以下操作。此代码不会运行，但应该让您了解我想要做什么。

```
类帐户{
   静态公共 $emailer = Site_Emailer;
   静态函数添加（$id）{
       self::$emailer::send('新帐户创建');
   }
}

```

然后在单元测试中，我想测试调用这个方法会发送一封电子邮件：

```
功能 testAccountsAddEmails() {

    Accounts::$email = Mock_Emailer;
    帐户::add( 1 );

    $this->assertTrue(count(Mock_Emailer::$sent) === 1);
}

```

我遇到的问题是 Accounts 的静态变量`$emailer`不能只保存类，我可以让它保存类名的字符串，然后使用`call_user_func()`，但这似乎有点乱。

我希望能澄清我遇到的问题，如果需要更多说明，请告诉我！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:23:42.637

```
class Accounts {
   static public $emailer = 'Site_Emailer'; // String representation of class name
   static function add( $id ) {
       call_user_func(
           array(self::$emailer, 'send'),
           'New account created' 
       );
   }
} 
```

同样，您必须在将字符串分配给测试用例中的变量时使用它：

```
Accounts::$email = 'Mock_Emailer`; 
```

但考虑使用真实对象和依赖注入。

# jquery - 使用 AJAX 加载页面的一部分后如何执行 JavaScript

> ID：14201591
> 
> 赞同：1
> 
> 时间：2013-01-07T18:11:44.567
> 
> 标签：jquery, javascript-events

在使用 jQuery 加载文件的某个部分后，如何在文件的头文件中执行 JavaScript 使用此代码加载页面的某个部分`$("#code_block").load('newexpenses.php #deposit_table');`。例如，下面是已加载的代码部分。

```
<table id=""><td><span class="f3">Cheque No</span></td>
    <td><input type="text" name="ch_no" id="ch_no" value=""></td>
</tr><tr>
    <td></td>
    <td><input type="submit" name="save_expenses" id="save_expenses" value="Save Expenses"></td> 
```

文件 newexpenses.php 在其标题中包含一些 JavaScript 和 Jquery，当单击提交按钮时应该执行这些 JavaScript 和 Jquery。例如下面

```
var urldata = 'r='+rno+'&d='+desc+'&a='+amt+'&e='+exp_type+'&p='+paymode+'&c='+ch_no+'&save=1';
            //alert(urldata);

            $.ajax({
                type : "GET",
                data : urldata,
                url:"save.php",
                cache: false,
                success:function(result2){
                    $(".div1").html(result2);
                } // ends success function
            }); // ends ajax call 
```

但是在将部分html加载到页面后......提交按钮将不起作用..

请建议正确的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:31:05.717

如果`#save_expenses`是异步加载的，我相信你想委托你正在绑定的事件。例如，您可能有：

```
$("#save_expenses").on('click' ... 
```

但是，由于`#save_expenses`this 绑定时不存在，因此您需要委托它：

```
$("#code_block").on('click', '#save_expenses', function () { ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:28:51.180

您可以在 HTML 中添加 javascript，它将被执行：

```
<table id="">
  <tr>
    <td><span class="f3">Cheque No</span></td>
    <td><input type="text" name="ch_no" id="ch_no" value=""></td>
  </tr>
  <tr>
    <td></td>
    <td><input type="submit" name="save_expenses" id="save_expenses" value="Save Expenses">
    </td>
  </tr>
</table>

<script type="text/javascript"> 
    $('#save_expenses').click(function(){
    var urldata = 'r='+rno+'&d='+desc+'&a='+amt+'&e='+exp_type+'&p='+paymode+'&c='+ch_no+'&save=1';
        //alert(urldata);

        $.ajax({
            type : "GET",
            data : urldata,
            url:"save.php",
            cache: false,
            success:function(result2){
                $(".div1").html(result2);
            } // ends success function
        }); // ends ajax call
    });
 </script> <!-- OR --> <script src="yourfile.js"></script> 
```

或者您应该使用事件委托（这是正确的方法），因此加载代码的时间并不重要：

```
$(document).on('submit', '#save_expenses', function(){
  // will work forever
  var urldata = 'r='+rno+'&d='+desc+'&a='+amt+'&e='+exp_type+'&p='+paymode+'&c='+ch_no+'&save=1';
        //alert(urldata);

        $.ajax({
            type : "GET",
            data : urldata,
            url:"save.php",
            cache: false,
            success:function(result2){
                $(".div1").html(result2);
            } // ends success function
        }); // ends ajax call
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:10:56.413

非常感谢您的快速回复，我无法在此处发布所有代码供您查看..

我试图做的是创建一个动态选择菜单，自动填充存储在数据库表中的选项。这就是为什么我试图使用负载来重新加载页面，以便它包含菜单。

第1步![图 1](../Images/fa4bbca603c02d071ccb35fb4acd60a7.png)

第2步![图 2](../Images/2f1ecac4950893640a131ea075cb68bc.png)

第 3 步![图 3](../Images/1db903adc8e3228abbf57dc9a0dd97dc.png)

我感谢大家的努力。我很感激

# javascript - CSS - 将页面水平分成两半

> ID：14201594
> 
> 赞同：8
> 
> 时间：2013-01-07T18:12:30.990
> 
> 标签：javascript, html, css

我正在尝试将页面水平分成两半。我只想通过 HTML/CSS 来完成它，我不想使用 JS。我究竟做错了什么？

谢谢

## CSS

```
#container {
min-height:100%;
}

#top_div {
height:50%;
width:100%;
background-color:#009900;
margin:auto;
text-align:center;
}

#bottom_div {
height:50%;
width:100%;
background-color:#990000;
margin:auto;
text-align:center;
color:#FFFFFF;
} 
```

## HTML

```
<div id="container">

<div id="top_div">top</div>    
<div id="bottom_div">bottom</div>

</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T18:17:46.577

尝试这个：

```
body, html, #container {
  height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T18:17:41.860

尝试`#container`像这样更改您的第一个 CSS 块

```
#container {
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
} 
```

比容器具有窗口高度和窗口宽度...

要获得更好的解决方案，请对容器内的顶部和底部元素执行相同的操作。将它们设置为位置，并将所有顶部、左侧、... 属性设置为零。对于顶部元素，将底部设置为 50%，对于底部元素，将顶部设置为 50%。

```
#top_div {
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    bottom: 50%;
    background-color:#009900;
    text-align:center;
}

#bottom_div {
    position: absolute;
    top: 50%;
    right: 0;
    left: 0;
    bottom: 0;
    background-color:#990000;
    text-align:center;
    color:#FFFFFF;
} 
```

[演示](http://jsfiddle.net/algorhythm/EKB3u/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-27T08:41:09.773

**视口单位！**是的，视口单位。[自 IE9 以来所有浏览器都支持](https://caniuse.com/#feat=viewport-units)，不需要您设置`height: 100%`每个父容器。

添加该属性`height: 50vh;`只会将其大小调整为`v`iewport `h`8 的 50%。

```
.top {
  height: 50vh;
  background-color: tomato;
}

.bottom {
  height: 50vh;
  background-color: brown;
}
```

```
<div class='top'></div>
<div class='bottom'></div>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T18:48:22.023

如果我说得对，那么这就是您要尝试做的事情：-创建两列页面。

只需将一个 div 元素作为父元素和两个子 div 元素，分配位置：相对于父元素，因为这将使其成为容器和位置：绝对子元素，使用宽度分配特定区域。

# java - Spring - 调用了错误的方法

> ID：14201602
> 
> 赞同：2
> 
> 时间：2013-01-07T18:12:58.567
> 
> 标签：java, spring

我在我的 spring 配置文件中提供了以下定义：

```
<bean id="path" class="java.nio.file.Paths" factory-method="get">
    <constructor-arg>
        <value type="java.lang.String">${limits.path}</value>
    </constructor-arg>
</bean> 
```

`Paths.get`可以使用 String 参数或 URI 参数调用。在上面的示例中，SPring 将其解析为 URI，这是错误的……知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:30:01.943

尝试使用特定索引，它可能会出现问题，因为它在方法签名中有可变参数。

来自 oracle[文档](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html)：

```
get(String first, String... more) 
```

尝试这样的事情：

```
<bean id="path" class="java.nio.file.Paths" factory-method="get">
    <constructor-arg index="0"
                     type="java.lang.String" 
                     value="${limits.path}" />    
</bean> 
```

如果它不起作用，请尝试使用空列表：

```
<bean id="path" class="java.nio.file.Paths" factory-method="get">
    <constructor-arg index="0">
        <value type="java.lang.String">${limits.path}</value>  
    </constructor-arg>
    <constructor-arg index="1">
        <list></list>
    </constructor-arg>
</bean> 
```

# javascript - 检查对象属性和调用方法的更好方法

> ID：14201605
> 
> 赞同：3
> 
> 时间：2013-01-07T18:13:11.307
> 
> 标签：javascript, typeof

*（对不起，如果之前查询过，我没有找到）*

我曾经**检查**一个对象和方法是否存在并以这种方式**调用它：**

```
 obj && obj.method && obj.method() 
```

但是，我怀疑某些情况下这会在 IE 上造成一些麻烦。

我需要检查它`typeof undefined/function/object` 吗？

```
 typeof obj === 'object' && typeof obj.method === 'function' && obj.method() 
```

我想知道什么是最安全和最清晰的编码风格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:18:21.587

为确保您可以正确执行在名为`method`的对象上命名的方法`object`，这是最短的安全检查：

```
if (typeof object === 'object' && typeof object.method === 'function') {
    object.method();
} 
```

您需要首先检查该对象是否存在，然后确保您想要的属性是一个函数。任何其他检查都是多余的。

请注意，如果您尝试执行的属性有一些奇怪的东西，例如数字`0`或布尔值，那么这将分崩离析，但如果您将属性附加到布尔值和数字，则可能会遇到更大的问题。`false``method`

# classification - Weka动态句子分类

> ID：14201608
> 
> 赞同：2
> 
> 时间：2013-01-07T18:13:22.840
> 
> 标签：classification, weka, categorization, sentence

您能否给我一些提示，我是否（以及如何）可以在 WEKA 中做到这一点？

我有很多句子，然后我收到一个必须分类的新句子。

现有类别是在现有句子的基础上产生的。首先，如何创建这些类别？

然后，当新句子出现时，我如何将其归类为先前创建的类别之一（不是新的类别）。

# grails - 在 Grails 的 beforeInsert 事件中访问一个值

> ID：14201611
> 
> 赞同：0
> 
> 时间：2013-01-07T18:13:45.603
> 
> 标签：grails, grails-orm

有没有办法访问`beforeInsert`事件内部的值？

例如：

控制器：

```
def save () {
   user = new User(params)
} 
```

领域：

```
String name
String job
String name_and_job

beforeInsert {
  name_and_job = name+job
} 
```

在上述`beforeInsert`事件中，我想获取当前`name`并将`job`它们添加到`name_and_job`. 但是，这不起作用。

请注意，这只是我正在处理的更大问题的一个例子。这种类型的东西应该在控制器中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:14:15.780

控制器应该是这样的：

```
def save () {
   user = new User(params).save()
} 
```

如果没有 save() 调用，您只是实例化了一个瞬态 User 对象。这就是为什么您的`beforeInsert`活动从未被激活的原因。

# objective-c - 解析 Objective-C printf 格式字符串？

> ID：14201612
> 
> 赞同：10
> 
> 时间：2013-01-07T18:13:48.830
> 
> 标签：objective-c, c, printf

`NSString`我想获得内置的成员范围`+[NSString stringWithFormat:]`。解析objective-c格式字符串的最佳方法是什么？我不能只使用 C 格式字符串解析器，因为`%@`. 我还需要确保它支持格式排序：`%1$d`、、`%2$@`等。

例如，对于用 构建的字符串`[NSString stringWithFormat:@"foo %2$@ bar %1$@", @"Heath", @"Borders"]`，理想情况下我会喜欢以下内容`NSArray`：`@[NSMakeRange(15, 5), NSMakeRange(4, 6)]`。第一个数组对象对应于格式字符串中的第一个数据元素，第二个数组对象对应于第二个数据元素，依此类推。

在这种情况下，API 看起来像`+ (NSString *) stringWithFormatRanges:(NSArray **)outFormatRanges withFormat:(NSString *)format, ... NS_FORMAT_FUNCTION(1,2);`它会返回一个`NSString`just like `+[NSString stringWithFormat:]`，但它也会返回每个格式数据元素的一个`NSArray`with `NSRange`s。

**- 编辑 -**

鉴于这个问题已经存在 3 年了，此时我对仅 C 的实现感到满意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:35:25.930

几年前我研究过这个。如果我理解您的问题，则没有简单的方法可以从 C 或 Cocoa 格式字符串的格式字符串中获取 AST。

我编写了 NSXMLElement+elementWithXMLFormat ，它允许将 NSXMLElements 非转义插入到具有特殊`%%%@`格式代码的格式字符串中，这需要扩展 Cocoa 的格式。我的技术可能对你有帮助：

[https://github.com/rentzsch/nsxmlelement-elementwithxmlformat/blob/937b54b2a830a8fbbd72d6bc5e48bafd495ddcbd/NSXMLElement%2BelementWithXMLFormat.m#L41](https://github.com/rentzsch/nsxmlelement-elementwithxmlformat/blob/937b54b2a830a8fbbd72d6bc5e48bafd495ddcbd/NSXMLElement%2BelementWithXMLFormat.m#L41)

我只提取格式代码并对其进行 NUL 分隔，以传统方式运行它，然后重新组装。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-21T20:03:29.357

我为我的工具[SwiftGen](https://github.com/AliSoftware/SwiftGen/)用 Swift 编写了一个解析器（这样我就可以检测其中的占位符`Localizable.strings`并提取在使用这些字符串调用时应该给出哪些类型）`stringWithFormat:`

[您可以在我的 GitHub 上](https://github.com/SwiftGen/SwiftGen/blob/b1e1b06c110c509ebdb554ce3321dc0678bbe6fb/Sources/SwiftGenKit/Parsers/Strings/PlaceholderType.swift#L44-L120)看到执行解析的部分代码。

*   当然，它是 Swift 而不是 Objective-C，但我想它很容易转换为 ObjC，只要你保持算法的逻辑。
*   我的代码也没有返回这些函数的输出范围——只有类型——但是`typesFromFormatString`函数中的代码肯定可以访问这些占位符的范围，并且除了检测到的类型之外，还可以完全返回它们（这是一个简单的改变，我只是不需要这些范围，所以我没有将它们包含在返回类型中）

*`%d`（一旦有了or等​​占位符的范围`%2$@`，就很容易推断出字符串参数的范围：第一个范围将与`.location`第一个占位符相同，但替换值的长度，第二个范围将有第二`.location`个占位符的 + (firstValue.length-firstRange.length) 将偏移量考虑在内，等等）*

HTH。

# php - 在保存具有 HABTM 关系的帖子之前自动插入标签

> ID：14201613
> 
> 赞同：1
> 
> 时间：2013-01-07T18:13:52.187
> 
> 标签：php, cakephp, has-and-belongs-to-many

我有一个系统设置，一个帖子可以有很多标签，反之亦然。这是一种 HABTM 关系。一切正常，并且有一个输入框供我在添加帖子时选择相关标签。

但是我想实现一个像 StackOverflow 这样的系统，如果我输入一个不存在的标签，Cake 首先在我的`tags`表中创建该标签，然后保存帖子（以及连接表中的关系）。

[此处概述了](http://mrphp.com.au/blog/working-habtm-form-data-cakephp)我发现的唯一方法（向下滚动到“HABTM 文本添加”），我手动检查标签是否存在，如果不存在，我将其插入。我想知道 Cake 是否有这样做的“内置”方式，或者有更好的方式符合 Cake 的“胖模型苗条控制器”约定。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:42:32.230

最好的方法是使用[模型回调方法](http://book.cakephp.org/2.0/en/models/callback-methods.html)。这将允许您说，在您`afterSave()`查找标签，然后添加它，然后保存新数据。

因为您正在使用您的模型，所以您仍然可以使用以下方式访问模型数据`$this->data`

# firefox-addon-sdk - 同一页面上的两个页面模块可以共享代码吗？

> ID：14201615
> 
> 赞同：0
> 
> 时间：2013-01-07T18:13:53.800
> 
> 标签：firefox-addon-sdk

假设我正在编写一个扩展，它有两个匹配不同 URL 模式的页面模块，它们有时会重叠。如果两个页面模块共享一些 JS 库，我的扩展是否有办法只将这些共享的 JS 库加载到特定页面一次并让两个页面模块都使用它们？

在我看来，扩展加载到页面中的每个页面模块都有自己的全局范围/命名空间，这阻碍了代码共享。但是，[文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.12/dev-guide/guides/content-scripts/communicating-with-other-scripts.html#Content%20Scripts)似乎表明同一页面中的内容脚本应该能够直接相互访问：

> 加载到同一文档中的内容脚本可以直接相互交互，也可以与 Web 内容本身交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:26:18.243

加载到同一个文档中的内容脚本可以直接相互交互，也可以与 Web 内容本身交互，*只要它们是通过同一个 PageMod 实例加载的*。

这就是为什么 PageMod 的 contentScriptFile 选项采用一个可以列出多个文件的数组，以便您可以加载例如 jQuery，然后在您自己的单独代码中使用 jQuery。

不起作用的是为多个 PageMod 实例提供一些共享范围，因为每个 PageMod 都加载到单独的沙箱中。

如果您需要简单的通信，一个可能的 wqorkaround 方法是通过 SDK 的 EventEmitter 'port' 对象从单独的 PageMod 实例路由消息。

不幸的是，没有办法在沙箱之间共享脚本资源，因为没有共享的跨沙箱范围。

# php - 存储在数据库中的 php 变量不在 html 中回显

> ID：14201616
> 
> 赞同：0
> 
> 时间：2013-01-07T18:13:56.493
> 
> 标签：php, html, parsing, variables, echo

我显然正在尝试做一件基本的事情：回显存储在数据库中的变量。我的文档定义了要显示的变量内容：

```
<?php
$myvar = "this_is_my_content";
?> 
```

$myvar（出于另外 100 个原因）存储在数据库中 html 代码内的“my_fied”中，并通过查询检索。

```
$con = "SELECT LEFT(my_field, 2), my_otherfield FROM my_table";
$res = mysql_query($con);
while (list($my_field, $my_otherfield) = mysql_fetch_array($res)) {
    if ($my_field != "XX"){
        echo $my_field;
        }
} 
```

结果应该是：

```
Some html content here and this_is_my_content 
```

但我能得到的只有：

```
Some html content here and $myvar 
```

我正在尝试 100 种组合，包括更改单引号、双引号、连接字符串和变量、变量变量。有人看到有什么问题吗？非常感谢任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:25:18.643

尝试使用 eval()。

```
echo eval($my_field); 
```

另外，请注意。在数据库中存储 PHP 代码是一个可怕的想法。

# tidesdk - 与桌面应用程序通信，调用 DLL 函数

> ID：14201617
> 
> 赞同：1
> 
> 时间：2013-01-07T18:14:15.473
> 
> 标签：tidesdk

我需要在我的 TideSDK 应用程序中使用一些窗口操作功能（例如：调整记事本窗口大小），从应用程序执行 SendMessage/PostMessage/DllCall（例如：控制 Winamp）。

是否可以在 TideSDK 应用程序和一些 AutoIt/AutoHotkey 脚本之间建立通信，以调用 .dll 函数？afaik 在 WebKit 中无法使用 ActiveXObject() 创建 ActiveX COM 对象

请在这方面提供一些建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T02:52:54.040

您可以考虑通过在您的应用程序中使用 python 并使用 win32com 模块处理 com 对象来处理这个问题。

# rally - 回溯 API：错误 403 访问被拒绝

> ID：14201619
> 
> 赞同：3
> 
> 时间：2013-01-07T18:14:17.510
> 
> 标签：rally, lookbackapi

最近，我无法使用使用过去与我的帐户一起使用的 Lookback API 的应用程序。查看控制台后，似乎在向服务器发出请求时收到错误 403。我让一些同事也尝试访问 API，但我们都收到了同样的错误。

Lookback API 现在有问题吗？还是我们这边的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:54:06.647

该错误表明查询涉及用户无权查看的项目。将 _ProjectHierarchy 添加到标准会更改范围并将结果限制在该层次结构内的项目中。例如，如下查询：

`{ "PlanEstimate" : 5 }`

将尝试返回计划估计为 5 的工作区中的所有快照。将其更改为：

`{ "PlanEstimate" : 5, "_ProjectHierarchy" : 1234 }`

将结果更改为项目 1234 或其子项目中的所有快照，计划估计为 5，这可能是一组非常不同的结果。如果用户可以访问工作区中的所有项目，那么他们应该不会收到错误消息。用户可以通过对正在查找 (ObjectID = 1177026886) 的项目等执行 ALM WSAPI (https://rally1.rallydev.com/slm/doc/webservice) 查询来检查。我认为如果用户无权访问该项目。

如果相同的查询在新的一年之前工作，则可能从那时起新项目已添加到工作区而没有所需的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:53:53.333

似乎现在必须指定“_ItemHierarchy”（RPM）或“_ProjectHierarchy”（项目）。我在 Lookback API 查询中添加了以下行，请求成功完成：

```
 { property: '_ProjectHierarchy', value: this.getContext().getProject().ObjectID } 
```

# mysql - 修改枚举列成功，但值无效

> ID：14201620
> 
> 赞同：5
> 
> 时间：2013-01-07T18:14:20.047
> 
> 标签：mysql, enums

当我执行此语句时：

```
ALTER TABLE person MODIFY COLUMN subcommittee
  ENUM('Arts','Bus','HC','IA','Pol','ST','Floater','Student') NULL DEFAULT NULL; 
```

回应是

```
2801 row(s) affected Records: 2801  Duplicates: 0  Warnings: 0 
```

但是这个声明：

```
update person set subcommittee = 'Student' where person_pk = 1381; 
```

总是导致此错误消息：

```
Error Code: 1265\. Data truncated for column 'subcommittee' at row 1 
```

（如果您想知道，数据库中有 1381 人，否则我什至不会收到此错误消息。）

选择另一个枚举有效：

```
update person set subcommittee = 'Floater' where person_pk = 1381;

1 row(s) affected Rows matched: 1  Changed: 1  Warnings: 0 
```

当我使用 PDO 从我的 PHP 应用程序中收到错误时，我首先注意到了这一点，但随后在 MySQLWorkbench 中复制了它，上面的内容是从中获取的。

也许完全删除该列并重新定义它可以解决问题，但这是一个实时数据库，我只想在其中添加一个额外的枚举值（学生）。

我尝试重新键入 alter 语句，将其复制到文本编辑器以检查字符，以及其他一些事情以排除值中奇怪的不可见字符。我还重新排列了值：

```
ALTER TABLE person MODIFY COLUMN subcommittee
  ENUM('Arts','Bus','HC','IA','Pol','ST', 'Student','Floater') NULL DEFAULT NULL; 
```

没有喜悦。

当我搜索了一下时，我看到了一些与修改枚举列相关的错误。有谁知道这是否是 MySQL 错误？

（MySQL 版本 5.5.28。）

* * *

一些人要求的一些数据：

```
mysql> describe person;
+------------------------------+-------------------------------------------------------------+------+-----+---------+----------------+
| Field                        | Type                                                        | Null | Key | Default | Extra          |
+------------------------------+-------------------------------------------------------------+------+-----+---------+----------------+
| person_pk                    | int(11)                                                     | NO   | PRI | NULL    | auto_increment |
| name_last                    | varchar(255)                                                | NO   | MUL |         |                |
| name_first                   | varchar(255)                                                | YES  |     | NULL    |                |
| name_index                   | int(11)                                                     | NO   |     | 0       |                |
| name_middle                  | varchar(255)                                                | YES  |     | NULL    |                |
| name_spouse_or_partner_first | varchar(255)                                                | YES  |     | NULL    |                |
| name_spouse_or_partner_last  | varchar(255)                                                | YES  |     | NULL    |                |
| name_legal_first             | varchar(255)                                                | YES  |     | NULL    |                |
| name_legal_middle            | varchar(255)                                                | YES  |     | NULL    |                |
| name_legal_last              | varchar(255)                                                | YES  |     | NULL    |                |
| prefix                       | varchar(255)                                                | YES  |     | NULL    |                |
| suffix                       | varchar(255)                                                | YES  |     | NULL    |                |
| salutation                   | varchar(255)                                                | YES  |     | NULL    |                |
| home_street1                 | varchar(255)                                                | YES  |     | NULL    |                |
| home_street2                 | varchar(255)                                                | YES  |     | NULL    |                |
| home_city                    | varchar(255)                                                | YES  |     | NULL    |                |
| home_state                   | varchar(255)                                                | YES  |     | NULL    |                |
| home_zip                     | varchar(255)                                                | YES  |     | NULL    |                |
| home_country                 | varchar(255)                                                | YES  |     | NULL    |                |
| work_org                     | varchar(255)                                                | YES  |     | NULL    |                |
| work_street1                 | varchar(255)                                                | YES  |     | NULL    |                |
| work_street2                 | varchar(255)                                                | YES  |     | NULL    |                |
| work_city                    | varchar(255)                                                | YES  |     | NULL    |                |
| work_state                   | varchar(255)                                                | YES  |     | NULL    |                |
| work_zip                     | varchar(255)                                                | YES  |     | NULL    |                |
| work_country                 | varchar(255)                                                | YES  |     | NULL    |                |
| phone_home                   | varchar(255)                                                | YES  |     | NULL    |                |
| phone_work                   | varchar(255)                                                | YES  |     | NULL    |                |
| phone_mobile                 | varchar(255)                                                | YES  |     | NULL    |                |
| phone_fax                    | varchar(255)                                                | YES  |     | NULL    |                |
| phone5                       | varchar(255)                                                | YES  |     | NULL    |                |
| phone6                       | varchar(255)                                                | YES  |     | NULL    |                |
| email                        | varchar(255)                                                | YES  |     | NULL    |                |
| email2                       | varchar(255)                                                | YES  |     | NULL    |                |
| website                      | varchar(255)                                                | YES  |     | NULL    |                |
| preferred_communication      | enum('home','work','mobile','email','mail','special')       | YES  |     | NULL    |                |
| preferred_communication_text | varchar(255)                                                | YES  |     | NULL    |                |
| preferred_address            | enum('home','work')                                         | YES  |     | NULL    |                |
| use_housing                  | tinyint(1)                                                  | YES  |     | NULL    |                |
| smoker                       | tinyint(1)                                                  | YES  |     | NULL    |                |
| pet_allergies                | tinyint(1)                                                  | YES  |     | NULL    |                |
| pets                         | tinyint(1)                                                  | YES  |     | NULL    |                |
| kids                         | tinyint(1)                                                  | YES  |     | NULL    |                |
| physical_considerations      | text                                                        | YES  |     | NULL    |                |
| dietary_needs                | text                                                        | YES  |     | NULL    |                |
| appellation                  | varchar(255)                                                | YES  |     | NULL    |                |
| bio                          | text                                                        | YES  |     | NULL    |                |
| photo                        | varchar(255)                                                | YES  |     | NULL    |                |
| include_in_directory         | tinyint(1)                                                  | YES  |     | NULL    |                |
| participant_notes            | text                                                        | YES  |     | NULL    |                |
| contact_notes                | text                                                        | YES  |     | NULL    |                |
| available_1A                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_1P                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_2A                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_2P                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_3A                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_3P                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_4A                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_4P                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_5A                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| available_5P                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| interest_x_dis               | tinyint(1)                                                  | YES  |     | NULL    |                |
| interest_arts                | tinyint(1)                                                  | YES  |     | NULL    |                |
| interest_bus                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| interest_hc                  | tinyint(1)                                                  | YES  |     | NULL    |                |
| interest_ia                  | tinyint(1)                                                  | YES  |     | NULL    |                |
| interest_med                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| interest_pol                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| interest_st                  | tinyint(1)                                                  | YES  |     | NULL    |                |
| venue_manager                | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_arts               | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_bus                | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_hc                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_ia                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_pol                | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_st                 | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_students           | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_housing            | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_moderator          | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_volunteer          | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_fundraising        | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_office             | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_other              | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_notes              | text                                                        | YES  |     | NULL    |                |
| houser_fk                    | int(11)                                                     | YES  | MUL | NULL    |                |
| housed_fk                    | int(11)                                                     | YES  | MUL | NULL    |                |
| contact_fk                   | int(11)                                                     | YES  | MUL | NULL    |                |
| hyphen_fk                    | int(11)                                                     | YES  | MUL | NULL    |                |
| introduced_by_fk             | int(11)                                                     | YES  | MUL | NULL    |                |
| committee_contact_fk         | int(11)                                                     | YES  | MUL | NULL    |                |
| donor                        | tinyint(1)                                                  | YES  |     | NULL    |                |
| houser                       | tinyint(1)                                                  | YES  |     | NULL    |                |
| moderator                    | tinyint(1)                                                  | YES  |     | NULL    |                |
| producer                     | tinyint(1)                                                  | YES  |     | NULL    |                |
| committee_member             | tinyint(1)                                                  | YES  |     | NULL    |                |
| participant                  | tinyint(1)                                                  | YES  |     | NULL    |                |
| fan                          | tinyint(1)                                                  | YES  |     | NULL    |                |
| student                      | tinyint(1)                                                  | YES  |     | NULL    |                |
| volunteer                    | tinyint(1)                                                  | YES  |     | NULL    |                |
| staff                        | tinyint(1)                                                  | YES  |     | NULL    |                |
| companion                    | tinyint(1)                                                  | YES  |     | NULL    |                |
| id_number                    | int(11)                                                     | YES  |     | NULL    |                |
| deceased                     | tinyint(1)                                                  | YES  |     | NULL    |                |
| load_donation                | tinyint(1)                                                  | YES  |     | NULL    |                |
| load_panel                   | tinyint(1)                                                  | YES  |     | NULL    |                |
| load_participant             | tinyint(1)                                                  | YES  |     | NULL    |                |
| conversion_note              | text                                                        | YES  |     | NULL    |                |
| replacedby_fk                | int(11)                                                     | YES  | MUL | NULL    |                |
| companion_to_fk              | int(11)                                                     | YES  | MUL | NULL    |                |
| name_for_program             | varchar(255)                                                | YES  |     | NULL    |                |
| gender                       | enum('male','female')                                       | YES  |     | NULL    |                |
| subcommittee                 | enum('Arts','Bus','HC','IA','Pol','ST','Student','Floater') | YES  |     | NULL    |                |
| companion_type               | enum('spouse/partner','child','friend')                     | YES  |     | NULL    |                |
| days_here                    | varchar(6)                                                  | YES  |     | NULL    |                |
| new_or_returning             | enum('new','returning')                                     | YES  |     | NULL    |                |
| confirmation_sheet           | tinyint(1)                                                  | YES  |     | NULL    |                |
| bio_in                       | tinyint(1)                                                  | YES  |     | NULL    |                |
| photo_in                     | tinyint(1)                                                  | YES  |     | NULL    |                |
| birthday                     | date                                                        | YES  |     | NULL    |                |
| date_topics_letter_sent      | date                                                        | YES  |     | NULL    |                |
| topics_received              | tinyint(1)                                                  | YES  |     | NULL    |                |
| rating                       | enum('A','B','C','D','F')                                   | YES  |     | NULL    |                |
| flight_info_received         | tinyint(1)                                                  | YES  |     | NULL    |                |
| transportation_email_sent    | tinyint(1)                                                  | YES  |     | NULL    |                |
| bringing_children            | tinyint(1)                                                  | YES  |     | NULL    |                |
| date_address_verfied         | date                                                        | YES  |     | NULL    |                |
+------------------------------+-------------------------------------------------------------+------+-----+---------+----------------+
126 rows in set (0.01 sec)

mysql> select person_pk, subcommittee from person where person_pk = 1381;
+-----------+--------------+
| person_pk | subcommittee |
+-----------+--------------+
|      1381 | Floater      |
+-----------+--------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:29:36.530

这是 MySQL 的一个非常敏感的主题

我在 DBA StackExchange 中写过关于更改 ENUM 列表的帖子

*   `Jan 24, 2012`:[**是否可以更改 ENUM() 列表？**](https://dba.stackexchange.com/questions/11484/is-it-possible-to-change-enum-lists/11485#11485)
*   `Oct 05, 2011`:[**我可以在一个查询中重命名 MySQL ENUM 列中的值吗？**](https://dba.stackexchange.com/questions/6547/can-i-rename-the-values-in-a-mysql-enum-column-in-one-query/6548#6548)

使用填充数据执行此操作是有风险的。您应该使用空表完成此操作，然后重新加载表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:54:43.823

我得出结论，这是一个错误。MySQL 在进行更改时没有报告错误，并且在显示列的详细信息时显示了新值，但它不相信新值存在。RolandoMySQLDBA 证实这是一个“敏感话题”（他的话）。

所以，我所做的是：

1.  创建一个名为“subcommittee2”的新枚举列。

2.  用旧列的值更新新列的值（更新人员集 subcommittee = subcommittee2）。

3.  将“subcommitte”重命名为“subcommittee_old”。

4.  将“subcommittee2”重命名为“subcommittee”。

由应用程序运行确认新值现在已被接受。

* * *

更新：现在客户要求另一个枚举，并且使用上面的技术不起作用。这次创建一个新列、传输值并重命名它不起作用。相同的错误信息。

UPDATE2：所以我创建了新列“subcommittee2”，从旧列填充它，然后就这样离开了。在我的应用程序中，我更改为使用新的列名。很糟糕，但是必须完成自己的工作...

UPDATE3：我尝试添加到另一个字段的枚举值，并且它起作用了，所以现在我有了这个理论：新添加的值不能长于现有值。例如，在这种情况下，最长的值是“接受”，我添加了值“保持”和“等待”，效果很好。（回想一下，最初的错误是“数据被截断”。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:28:50.967

从[这个答案](https://stackoverflow.com/a/1508860/1222076)来看，似乎 ENUM 的先前顺序必须相同，最后是新的可能。所以我会说看看原始订单是什么`SHOW CREATE TABLE`，然后附加`Student`到该列表的末尾。

# c# - C# 虚拟方法覆盖返回类型和方法参数

> ID：14201621
> 
> 赞同：2
> 
> 时间：2013-01-07T18:14:20.103
> 
> 标签：c#, polymorphism, virtual, overriding

我想在抽象类中用确切的名称初始化虚拟方法。

在类中，这是继承者覆盖方法，我可以覆盖：

*   基本方法的返回类型
*   方法的参数

为了向您展示，我真正想做的是这样的：

```
abstract class A
{
    public virtual void Func1() { }
}

class B : A
{
    override string Func1(int a, int b)
    {
         return (a + b).ToString();
    }
} 
```

我知道，C# 需要在基类中使用返回类型/参数，但在这种情况下可能有一些关键字提示`new`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:18:35.867

您只能`override`提供确切的名称和参数。你可以`new`随心所欲，但这并不是压倒一切的——只是在完全匹配的情况下隐藏。

我认为在您的情况下，您要么希望为所有可能的组合创建重载，要么创建一个单一的基本抽象方法，该方法采用可以包含所需参数的单一类型。

例子：

```
public abstract void Func1( MyArgumentsType input ); 
```

现在派生类被迫重写一个方法，但您可以将一组健壮的参数传递给可以处理更多场景的方法。

多态在这里对您有利，因为您可以将派生的参数类型传递给具有特定于情况的属性的方法。当然，这需要实现方法理解更多派生的参数类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:18:45.830

你不能这样做。重写方法需要具有完全相同的签名，包括参数和返回类型。您无法告诉编译器使用不同的参数和返回类型覆盖方法。

如果你想要多态行为，你需要有兼容的签名。否则编译器不能保证，所需的方法将以多态方式找到。

没有可行的方法来处理签名`void Func1()`和`string Func1(int a, int b)`多态性。您可以使用内部传递 lambda 的参数来概括它们`out`，但无论如何 - 要利用多态行为，您需要将它们带到一个共同的签名中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T18:19:39.037

方法覆盖意味着修改继承成员的虚拟*实现，而不是它的**签名*。正如您所指出的，该`new`关键字将隐藏基类对同名成员的实现。然而它只是可选的，看看
[在派生类成员中使用新关键字的好处与基类成员同名](https://stackoverflow.com/questions/8229171/benefit-of-using-new-keyword-in-derived-class-member-having-same-name-with-base)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-07T18:26:50.030

看起来您想要实现类似于对不同类型（如和）`ToString`具有许多不同风格的方法的行为。`.ToString()``float.ToString("c")`

在这种情况下，不同的实现`ToString`不是`Object.ToString`基于参数适当解析的派生对象上的正常附加方法的实现。所有派生类最终都有一个虚拟`ToString`方法（来自基类并可能在当前类中实现）和可选的其他类似命名的非虚拟方法。

请注意，在 C# 结果类型中，在函数解析时间中考虑了更新，因此您不能真正拥有 2 个具有相同名称和相同参数的函数，并期望“正确”选择一个。如果两者同时可见，则会出现编译时错误。`new`方法前面的关键字仅使该方法对该类（和派生类）可见，并隐藏具有相同签名的基类方法。不幸的是，当一个人使用基类的变量持有派生类来调用这个方法时，这样做几乎保证了很多混乱——尽管所有努力都隐藏了一个来自基类的虚拟变量，但仍将被调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T18:35:24.003

想一想……它将如何工作？假设您有一个静态类型为`A`但动态类型为的引用`B`，如下所示：

```
foo(B b) { bar(b); }
bar(A a) { 
} 
```

覆盖背后的想法是您在 super/base 上调用一个方法，它会解析为覆盖的实现。按照这种逻辑，您应该能够 in`bar`调用`a.Func1()`并且它应该调用 in 的方法`B`：

```
a.Func1(???) 
```

**但这在这里是不可能的，因为缺少参数。**

有参数逆变和返回类型协方差的概念；[这](https://stackoverflow.com/a/837178/18573)是 SO 中的一个有趣的答案，带有指向 Eric Lippert 的帖子的链接，应该是一个有趣的阅读。

# c# - 如何使用 C# GData API 按键请求单个电子表格？

> ID：14201622
> 
> 赞同：2
> 
> 时间：2013-01-07T18:14:28.337
> 
> 标签：c#, gdata-api

我有一个程序可以进行身份​​验证，并且可以获取使用 GData API 的 C# 实现版本 3 的所有电子表格的列表（它遵循文档中[的示例](https://developers.google.com/google-apps/spreadsheets/#retrieving_a_list_of_spreadsheets)）。我很难弄清楚如何通过它的文档键获取单个资源。[我可以在Google Documents List API](https://developers.google.com/google-apps/documents-list/#searching_for_documents_and_files)中看到很多检索文档列表的示例，并且我可以看到如何通过[精确名称搜索](https://stackoverflow.com/questions/4726209/spreadsheet-authentication-in-gdata-api)将特定文档归零，但我正在尝试生成一些在电子表格被重命名后仍然存在的代码。这是我到目前为止编写的代码：

```
using System;
using Google.GData.Client;
using Google.GData.Spreadsheets;
using Microsoft.VisualBasic;

namespace q14201622
{
  class Program
  {
    static void Main(string[] args)
    {
      //OAuth 2 Stuff
      var parameters = new OAuth2Parameters() {
        ClientId = CLIENT_ID,
        ClientSecret = CLIENT_SECRET,
        RedirectUri = REDIRECT_URI,
        Scope = SCOPE
      };
      Process.Start(OAuthUtil.CreateOAuth2AuthorizationUrl(parameters));
      var response = Interaction.InputBox("Enter oAuth Code:", "q14201622", "", 0, 0);
      parameters.AccessCode = response;
      OAuthUtil.GetAccessToken(parameters);
      var accessToken = parameters.AccessToken;

      //Fetch Documents
      var requestFactory = new GOAuth2RequestFactory(null, "q14201622-v1", parameters);
      var service = new SpreadsheetsService("q14201622-v1");
      var query = new SpreadsheetQuery();
      query.Title = "Exact Title";
      query.Exact = true;

      //Iterate over the results
      var feed = service.Query(query);
      foreach (var entry in feed.Entries)
      {
        Console.WriteLine(entry.Id + ":"+ entry.Title.Text);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T00:17:19.950

我已经针对 Google.Apis.Drive.v2 客户端库 nuget 包版本 1.9.2.1890 对此进行了测试。但是，需要注意的一点是，您现在需要使用 Google API 注册开发人员帐户，并通过[此处](https://console.developers.google.com)的 Google 开发人员控制台为您的应用程序设置 API 访问权限和凭据。

如果您只想将其用于服务帐户，也就是不代表用户访问文件，而是用于自动化或内部工具，请使用以下内容：

（如果我没记错的话，服务帐户仍然需要人工通过 OAuth 浏览器弹出窗口进行一次性 OAuth 批准交互，以将应用程序添加到服务帐户上的授权应用程序中）

```
private const string SERVICE_ACCOUNT_EMAIL = "YOUR_SERVICE_ACCOUNT_EMAIL_HERE"; //looks like XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX@developer.gserviceaccount.com;

static DriveService BuildServiceAccountService()
{
  var certificate = new X509Certificate2(PATH_TO_YOUR_X509_CERT,
      "notasecret", X509KeyStorageFlags.Exportable);
  var credential = new ServiceAccountCredential(
      new ServiceAccountCredential.Initializer(SERVICE_ACCOUNT_EMAIL)
      {
          Scopes = new[] { DriveService.Scope.Drive },
          User = "ACTUAL_EMAIL_ADDRESS" // this should be the normal xxxxxx@gmail account that has the google drive files
      }.FromCertificate(certificate));

  // Create the service.
  var service = new DriveService(new BaseClientService.Initializer()
  {
      HttpClientInitializer = credential,
      ApplicationName = "Drive API Service Account Sample",
  });

  return service;
}

public static void DownloadSpreadsheetAsXlsx(string spreadsheetName, string filePath)
{
  var service = BuildServiceAccountService();
  var request = service.Files.List();
  request.Q = String.Format("title = '{0}'", spreadsheetName);
  var files = request.Execute();
  var file = files.Items.FirstOrDefault();

  var dlUrl = String.Format("https://docs.google.com/spreadsheets/d/{0}/export?format=xlsx&id={0}", file.Id);

  File.WriteAllBytes(filePath, service.HttpClient.GetByteArrayAsync(dlUrl).Result);
} 
```

要代表用户访问文件，您将需要这样的东西来构建您的服务：

```
static DriveService BuildUserAccountService(string userEmail)
{
  UserCredential credential = GoogleWebAuthorizationBroker.AuthorizeAsync(
  new ClientSecrets
  {
     ClientId = "YOUR_CLIENT_ID", // your client Id
     ClientSecret = "YOUR_CLIENT_SECRET", // Your client secret
  },
  new[] { DriveService.Scope.Drive },
  userEmail,
  CancellationToken.None).Result;

  // Create the service.
  var service = new DriveService(new BaseClientService.Initializer()
  {
      HttpClientInitializer = credential,
      ApplicationName = "Drive API User Account Sample",
  });

  return service;
} 
```

**为后代着想的旧答案（旧的 Google GData API 已被弃用，低于此点的任何内容都不再相关，不应期望工作）：**

我在查找文档密钥时遇到了同样的问题。我最终在 AlternateUri 中找到了它。这是我所做的（这已被编译并确认可以在新项目中工作并使用 NuGet 添加 GData.Spreadsheets）：

```
//Use your authentication method here:    
SpreadsheetsService service = new SpreadsheetsService("DownloadSpreadsheet");
service.setUserCredentials("your username", "your password");

SpreadsheetQuery query = new SpreadsheetQuery();
SpreadsheetFeed feed = service.Query(query);
SpreadsheetEntry fileEntry = feed.Entries.Cast<SpreadsheetEntry>().FirstOrDefault(entry => entry.Title.Text == "Name of spreadsheet");

//This is the good part
string key = fileEntry.AlternateUri.Content.Substring(fileEntry.AlternateUri.Content.IndexOf("?key="));
string dlUrl = "https://docs.google.com/feeds/download/spreadsheets/Export" + key + "&exportFormat=xlsx&format=xlsx";
Stream stream = service.Query(new Uri(dlUrl));
using (FileStream fstream = new FileStream("something.xlsx", FileMode.Create, FileAccess.ReadWrite, FileShare.ReadWrite))
{
    stream.CopyTo(fstream);
    fstream.Flush();
} 
```

我应该提一下，由于`.Cast<SpreadsheetEntry>().FirstOrDefault()`线路原因，这需要 LINQ（.NET Framework 3.5 或更高版本）。这可以在没有 LINQ 的情况下完成，您只需要手动枚举电子表格并找到您正在寻找的电子表格，而不是使用一行代码来完成。我只是想确保每个人在开始报告它不起作用之前都知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:49:49.570

我没有对此进行测试，但根据此[https://developers.google.com/gdata/client-cs](https://developers.google.com/gdata/client-cs)您可以使用其 URL 请求特定条目：

```
FeedQuery singleQuery = new FeedQuery();
singleQuery.Uri = new Uri(newEntry.SelfUri.ToString()); 
AtomFeed newFeed = service.Query(singleQuery);
AtomEntry retrievedEntry = newFeed.Entries[0]; 
```

现在，如果你有文档密钥，你也有 URL (https://docs.google.com/spreadsheet/ccc?key=[insert key here]) 你可以使用一个简单的

```
string docKey = "nice doc key";
string  gDocsURL = "https://docs.google.com/spreadsheet/ccc?key={0}";
string docURL = String.Format(gDocsURL,docKey); 
```

接着

```
FeedQuery singleQuery = new FeedQuery();
singleQuery.Uri = new Uri(docURL); 
AtomFeed newFeed = service.Query(singleQuery);
AtomEntry retrievedEntry = newFeed.Entries[0]; 
```

您应该能够检索文档。如果要将文档保存到硬盘，只需添加

```
string docFormat ="xlsx";// or xls or csv or pdf etc.
string gDocsDownloadURL="https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key={0}&exportFormat={1}"
string downloadUrl = String.format(gDocsDownloadURL,docKey,docFormat);
Stream stream = service.Query(new Uri(downloadUrl)); 
```

# sql-server - Sql案例不返回值

> ID：14201623
> 
> 赞同：0
> 
> 时间：2013-01-07T18:14:29.933
> 
> 标签：sql-server

我正在尝试根据结果数量在两个选择语句之间进行选择。在以下 case 语句之外进行测试时，每个语句都会返回有效数据。

```
SELECT CASE 
         WHEN Count(base.id) > 0 THEN base.id 
         ELSE (SELECT id 
               FROM   tablea 
               WHERE  pid = @val) 
       END 
FROM   (SELECT id 
        FROM   tablea 
        WHERE  id = @val) AS base 
```

当 base.Id >0 它返回正确，否则 Null 时它应该从我的表中有 7 行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:24:30.290

`WHEN COUNT(base.id) >0`总是正确的，因为您`FROM`过滤掉了 id <>@val 的行。除非我误解了您想要的内容，否则以下内容将为您提供所需的结果：

```
SELECT id               
FROM   tablea 
WHERE  id = @val OR pid = @val 
```

**更新 ：**

```
SELECT id               
FROM   tablea 
WHERE  id = @val OR (pid = @val 
AND NOT EXISTS (SELECT NULL FROM tablea WHERE id = @val)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:29:48.810

听起来您想选择一组行，或者如果失败，则选择第二组。一种方法是`union`两组，然后选择你想要的：

```
select id from (
  select id, 1 as Selector
    from tablea
    where id = @val
  union
  select id, 2
    from tablea
    where pid = @val ) as Placeholder
  where Selector = case when exists ( select 42 from tablea where id = @val ) then 1 else 2 end 
```

我假设那`id`是不可为空的。

# android - 如何在 PocketSphinx 中可靠地拒绝不合语法的单词

> ID：14201625
> 
> 赞同：3
> 
> 时间：2013-01-07T18:14:36.133
> 
> 标签：android, cmusphinx

我在 Android 上成功使用了 PocketsphinxDemo。我有一组非常有限的单词要识别，说 3 个不同的单词。我目前得到很多误报——说话时，Pocketsphinx 认出了我的三个词之一，尽管它们没有被说出来。

由于我找不到任何关于 pocketsphinx 正在使用的参数的参考，这是我的问题：

是否有一个参数可以让 Pocketsphinx 做出更严格的反应？

我希望它仅在 Pocketsphinx 高度“确定”匹配正确的单词时返回其识别猜测。

以下是我目前使用的默认参数：

```
c.setFloat("-samprate", 8000.0);
c.setInt("-maxhmmpf", 2000);
c.setInt("-maxwpf", 10);
c.setInt("-pl_window", 2);
c.setBoolean("-backtrace", true);
c.setBoolean("-bestpath", false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:35:40.330

目前不支持在 pocketpshinx 中简单地拒绝不合语法的单词，尽管它可能很快就会出现。有关更多信息，请参阅

[http://cmusphinx.sourceforge.net/wiki/faq#qcan_pocketsphinx_reject_out-of-grammar_words_and_noises](http://cmusphinx.sourceforge.net/wiki/faq#qcan_pocketsphinx_reject_out-of-grammar_words_and_noises)

您仍然可以使用电话循环来模拟不合语法的单词，这可能会给您一些拒绝。为此，您需要以特殊方式构造语法并在其中添加垃圾电话。有关更多详细信息，请参阅

[http://sourceforge.net/p/cmusphinx/discussion/help/thread/1c6cb941/?limit=50#efa9](http://sourceforge.net/p/cmusphinx/discussion/help/thread/1c6cb941/?limit=50#efa9)

语法格式在那里搞砸了，但想法很简单，你只需在循环中添加电话：

```
 <result> = word1 | word2 | (phone1 | phone2 | .... | phone 39)* 
```

对于 iPhone Openears 实现了一个特殊的拒绝模块，它不是主要分布的一部分：

[http://www.politepix.com/rejecto/](http://www.politepix.com/rejecto/)

# php - Magento：如何将报价项目属性转换为订单项目属性

> ID：14201626
> 
> 赞同：1
> 
> 时间：2013-01-07T18:14:43.920
> 
> 标签：php, magento, magento-1.7, gomage

我添加了一个报价项目属性和一个名为“parent_info”的订单项目属性（以及发票和装运）：

```
$installer->addAttribute("quote_item", "parent_info", array("type"=>"varchar"));
$installer->addAttribute("order_item", "parent_info", array("type"=>"varchar"));
$installer->addAttribute("invoice_item", "parent_info", array("type"=>"varchar"));
$installer->addAttribute("shipment_item", "parent_info", array("type"=>"varchar")); 
```

我能够将用户输入保存到报价项目，但我无法将其转换为订单项目。我试图在我的配置文件中的全局下添加此代码：

```
 <fieldsets>
        <sales_convert_quote_item>
            <parent_info>
                <to_order_item>*</to_order_item>
                <to_invoice_item>*</to_invoice_item>
                <to_shipment_item>*</to_shipment_item>
            </parent_info>
        </sales_convert_quote_item>
    </fieldsets> 
```

但是当我去结账时什么也没发生

我还尝试添加一个观察者：

```
<sales_convert_quote_item_to_order_item>
            <observers>
                <extra_options>
                    <type>model</type>
                    <class>test/observer</class>
                    <method>onSalesConvertQuoteItemToOrderItem</method>
                </extra_options>
            </observers>
        </sales_convert_quote_item_to_order_item> 
```

但它没有被调用（我已经向观察者方法添加了一个日志）。

可能是什么问题？可能是因为我使用了结帐扩展程序（gomage lightcheckout）吗？

# function - gcc 的奇怪行为，以及它的 ld （链接器）选项来删除未使用的函数

> ID：14201630
> 
> 赞同：1
> 
> 时间：2013-01-07T18:15:10.533
> 
> 标签：function, gcc, ld, dead-code

我试图在我的代码中删除未使用的函数（没有对它们进行调用），该代码使用 gcc/g++ 在 x86 / Linux 上构建。从 gcc 手册中阅读时，我使用以下选项：

```
CCFLAGS = -ffunction-sections -fdata-sections -Wl,--gc-sections,--print-gc-sections 
```

Make 命令输出确实显示了一些未使用的部分已删除消息，如下所示：

```
/usr/bin/ld: Removing unused section '.text._ZN14myclass30myunusedfuncEPPNS_8device_sE' in file './myproject/x86-linux/release/file1.o' 
```

但为了确保，我试图找出该符号是否存在于 *.o 目标文件中，所以当我这样做时：

```
strings --all -f file1.o|grep myunusedfunc 
```

我看到输出如下

```
myproject/x86-linux/debug/file1.o: [] myclass::myunusedfunc()
myproject/x86-linux/debug/file1.o: myunusedfunc
myproject/x86-linux/debug/file1.o: _ZN14myclass30myunusedfuncEPPNS_8device_sE
myproject/x86-linux/debug/file1.o: .rel.text._ZN14myclass30myunusedfuncEPPNS_8device_sE
myproject/x86-linux/debug/file1.o: _ZN14myclass30myunusedfuncEPPNS_8device_sE 
```

这是怎么回事？

这些 gcc/ld 选项是否真的删除了未使用的功能：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:19:39.543

您正在查看`.o`文件，但这是链接器的*输入*，而不是输出。该`.o`文件将包含所有函数，链接器不应将未使用的函数发送到链接输出中。但它不会编辑`.o`文件。

# python - 侦听多个网络上的多播流量

> ID：14201631
> 
> 赞同：1
> 
> 时间：2013-01-07T18:15:18.483
> 
> 标签：python, sockets, networking, multicast

我目前有以下接收多播数据的代码。

```
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
sock.bind(('', 24003))
mreq = struct.pack("=4sl", socket.inet_aton("238.210.10.1"), socket.INADDR_ANY)
sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq) 
```

我有两个网卡，但代码只收听发送到 127.0.0.1 的消息。如何收听任何网卡上的所有多播消息？无需对它们进行硬编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:39:37.227

[`struct ip_mreq`](http://www.kernel.org/doc/man-pages/online/pages/man7/ip.7.html)允许您选择*一个*接口来加入所需的多播组。指定`INADDR_ANY`允许系统通过在路由表中查找匹配路由上的接口来为您执行此操作（这意味着*任何*接口，而不是*所有*接口）。如果您在 Unix 上，您可以使用[`netstat -ng`](http://www.manpagez.com/man/1/netstat/).

如果你想在*所有*接口上加入同一个组，然后枚举它们[`if_nameindex(3)`](http://man7.org/linux/man-pages/man3/if_nameindex.3.html)（你必须弄清楚如何在 Python 中做到这一点），为每个接口创建一个套接字，并使用接口索引或地址`bind(2)`加入（ ）组`setsockopt(2)`，然后使用 轮询套接字`select`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T22:07:19.167

1.  UDP 套接字上没有“监听”。这是一个 TCP 术语。您需要*通过所有适用的接口，*通过循环*加入*多播组。这可确保将 IGMP JOIN 消息发送到所有需要的网络，因此他们会知道向您发送多播。

**   根据您的平台，您需要绑定到多播地址本身 (Linux) 或 INADDR_ANY = 0.0.0.0 (Windows)。我不确定 Unix 属于哪个阵营，但我怀疑在这种情况下它是 Windows 阵营。这确保您可以通过任何接口接收数据报。*

# java - 如何在 JPanel 中使内容变为半透明？

> ID：14201634
> 
> 赞同：1
> 
> 时间：2013-01-07T18:15:29.593
> 
> 标签：java, swing, graphics, awt

我对 JPanel 中组件的显示感到困惑。

假设如果我创建一个半透明度为 0.8f 的自定义 JPanel，如下所示：-

```
JPanel panel=new JPanel(){
        @Override
        public void paint(Graphics g)
        {
            super.paint(g);
            BufferedImage img=(BufferedImage)createImage(getWidth(),getHeight());
            Graphics2D g2=(Graphics2D) g.create();
            g2.setComposite(AlphaComposite.SrcOver.derive(0.8f));
            g2.drawImage(img,0,0,null);
        }
        @Override
        public Dimension getPreferredSize()
        {
            return new Dimension(300,300);
        }
    }; 
```

现在我将它设置为框架的 contentPane。

```
frame.setContentPane(panel); 
```

现在我向它添加一些按钮。

```
 frame.add(new JButton("Click Here"));
    frame.add(new JButton("Click Here"));
    frame.add(new JButton("Click Here"));
    frame.add(new JButton("Click Here")); 
```

1）然后在输出中为什么我得到半透明按钮？由于 JPanel 是单层的，当我覆盖它的`paint`方法然后添加按钮时，我首先绘制了半透明图像，所以按钮不能是半透明的，因为它们应该越过它。

2）这4个按钮中也只有2个是半透明的。为什么会有这样的偏见？

3）如果我在添加这 4 个按钮之前还添加了一个表格，那么一切都会变成半透明的。为什么？

```
Object[] names = new Object[] {
             "Title", "Artist", "Album"
         };
         String[][] data = new String[][] {
             { "Los Angeles", "Sugarcult", "Lights Out" },
             { "Do It Alone", "Sugarcult", "Lights Out" },
             { "Made a Mistake", "Sugarcult", "Lights Out" },
             { "Kiss You Better", "Maximo Park", "A Certain Trigger" },
             { "All Over the Shop", "Maximo Park", "A Certain Trigger" },
             { "Going Missing", "Maximo Park", "A Certain Trigger" }
         };
         JTable table = new JTable(data, names);
         frame.add(table); 
```

4）如果我使用`paintComponent(Graphics g)`JPanel 则没有任何东西是半透明的，无论我是否添加表格或添加了多少按钮。为什么？

（我问的是应用程序运行时的即时输出。我知道当鼠标悬停在这些按钮上或单击表格中的任何行时，它会变得不透明，这是由于 Swing 的绘画机制。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T23:50:55.873

> 1）然后在输出中为什么我得到半透明按钮？由于 JPanel 是单层的，当我覆盖它的绘制方法然后添加按钮时，我首先绘制了半透明图像，所以按钮不能是半透明的，因为它们应该越过它。

实际上，您在按钮上绘制了半透明效果。 `paint`来电

*   `paintComponent`
*   `paintBorder`
*   `paintChildren`

然后你在已经画过的东西（孩子们）的顶部画了你的半透明效果。添加组件时不会有任何区别，Swing 会在多种情况下绘制组件，第一次是在组件首次实现时（在屏幕上可见）以及响应脏区域的更改（以及很多其他人）......不要欺骗你自己，你无法控制这个......

将绘画过程视为一种分层方法。首先你画背景，然后你画中间地面，最后，前地面，然后你去泼水......

![在此处输入图像描述](../Images/526b8888b1e28a0696a8c09705267318.png)

```
public class TestTranslucentControls {

    public static void main(String[] args) {
        new TestTranslucentControls();
    }

    public TestTranslucentControls() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private BufferedImage background;

        public TestPane() {
            setLayout(new GridBagLayout());
            try {
                background = ImageIO.read(new File("C:/Users/shane/Dropbox/MegaTokyo/poster.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
            add(new JButton("1"));
            add(new JButton("2"));
            add(new JButton("3"));
            add(new JButton("4"));
            add(new JButton("5"));
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                Graphics2D g2 = (Graphics2D) g.create();
                g2.setComposite(AlphaComposite.SrcOver.derive(0.25f));
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g2.drawImage(background, x, y, this);
                g2.dispose();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? new Dimension(300, 300) : new Dimension(background.getWidth(), background.getHeight());
        }
    }
} 
```

我想你可能会发现...

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

有用;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:24:32.777

通常，您要覆盖`paintComponent()`not `paint()`。这可能是您的透明度问题的原因。其次，您可能想要更改布局。默认情况下，面板使用 FlowLayout。您可能想要使用 BorderLayout 或 GridBagLayout 或两者的混合。

# c++ - 检查 int 数据类型的输入是否有效

> ID：14201637
> 
> 赞同：0
> 
> 时间：2013-01-07T18:15:42.180
> 
> 标签：c++, validation

我有一个名为`i`.

阅读时`cin`：

```
cin >> i; 
```

如何确认用户输入是有效整数，而不仅仅是任何字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:30:48.650

您可以检查最后一个（一组）输入是否成功

```
if (cin) { /* still good */ } 
```

或者

```
if (cin.good()) { /* still good */ } 
```

您还可以一次性获取输入并检查成功：

```
if (cin >> i) { /* still good */ } 
```

所有这些方法都有一个缺点，那就是不会删除`cin`有问题的输入，也无法告诉 mow 有多少。

获取用户输入并对其进行验证的一种更可靠的方法是首先将一行输入读入字符串，然后从该字符串中提取信息。例如：

```
string line;
int i;
if (getline(cin, line))
{
  stringstream ss(line);
  if (ss >> i)
  {
    /* we have got our int */
  }
  else
  {
    /* That was not an integer entered by the user */
  }
}
else
{
  /* The user did not enter anything */
} 
```

# android - Android 水平“进度条”样式指示器

> ID：14201639
> 
> 赞同：0
> 
> 时间：2013-01-07T18:15:45.947
> 
> 标签：android, drawing, progress-bar

我需要在我正在组合的 Android 应用程序中创建一些“条形图”样式指标。我正在尝试确定解决问题的最佳方法。

基本上，我需要在我的一个视图中创建它：

[http://imgur.com/3yMoN](http://imgur.com/3yMoN)

这将随着接收数据时值的变化而实时更新。使用水平进度条执行此操作是否有意义，或者我最好尝试使用画布绘制矩形？

我应该使用更好、更直接的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:26:01.653

除非您有一些更具体的要求，否则很难确切地说出哪种方法是合适的。如果您的图表必须实时更改，那么值更改的频率很重要。如果值可能在毫秒级的时间段内发生变化，并且您的图表应该平滑地反映这一点，那么您可能希望使用`Canvas`. 另一方面，如果您只需要每秒左右更新一次，`ProgressBar`应该可以正常工作并免费为您提供很多功能。

# javascript - 确定 JS 对象的原型

> ID：14201641
> 
> 赞同：4
> 
> 时间：2013-01-07T18:15:52.573
> 
> 标签：javascript, prototype, instanceof

确定 JavaScript 对象原型的最佳方法是什么？我知道以下两种方法，但我不确定在跨浏览器支持方面哪个是“最佳”方式（或者是否有更好的首选方式）。

```
if (obj.__proto__ === MY_NAMESPACE.Util.SomeObject.prototype) {
    // ...
} 
```

或者

```
if (obj instanceof MY_NAMESPACE.Util.SomeObject) {
    // ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:18:54.597

`instanceof`是首选。`__proto__`是非标准的——具体来说，它在 Internet Explorer 中不起作用。

`Object.getPrototypeOf(obj)`是一个 ECMAScript 5 函数，与`__proto__`.

请注意，`instanceof`搜索整个原型链，而`getPrototypeOf`仅向上查找一步。

一些使用说明：

```
new String() instanceof String  // true

(new String()).__proto__ == String // false!
                                   // the prototype of String is (new String(""))
Object.getPrototypeOf(new String()) == String // FALSE, same as above

(new String()).__proto__ == String.prototype            // true! (if supported)
Object.getPrototypeOf(new String()) == String.prototype // true! (if supported) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:19:09.170

[`instanceof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)是标准的，而[`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)不是（目前 -[它很可能是 ECMAScript 6 中的标准](http://javascript.spec.whatwg.org/#object.prototype.__proto__)）。

# java - 比较枚举 jstl el

> ID：14201643
> 
> 赞同：1
> 
> 时间：2013-01-07T18:16:08.623
> 
> 标签：java, enums, jstl, el

```
 <c:forEach items="${availableBadges}" var="badge">
 <div>
 <c:choose>
 <c:when test="${badge} == ${user.activeBadge};"> 
```

徽章是带有两个字符串字段的枚举。

用户有正确的 getter 并返回一个 Badge 实例。foreach 工作正常，但我无法正确使用 synatx 来比较枚举？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:27:04.380

您的 EL 语法无效。`==`运算符必须与两个操作数在同一范围`${}`内，并且不应有尾随分号。

```
<c:when test="${badge == user.activeBadge}"> 
```

这与枚举无关。所有其他类型都应使用相同的语法。

### 也可以看看：

*   [如何在 JSF 中测试枚举相等性？](https://stackoverflow.com/questions/2524420/how-to-testing-for-enum-equality-in-jsf/2524901#2524901)
*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [标记为`[enums]`+的问题`[el]`](https://stackoverflow.com/questions/tagged/enums+el)

# c - C 结构说明

> ID：14201645
> 
> 赞同：2
> 
> 时间：2013-01-07T18:16:15.070
> 
> 标签：c, struct

我正在阅读 aircrack-ng 源代码，并注意到 struct 的许多不同用途。例如：

> 结构选项 {...} 选择；
> 
> typedef struct {...} 投票；

我认为 struct 的一般格式是

> 结构变量 {...};

或者

> typedef struct var {...} foo;

目的是什么`opt`，为什么`vote`没有定义类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:21:50.527

`typedef`创建一个类型别名。和：

```
typedef struct { /* ... */ } vote; 
```

我们创建一个*匿名结构*，其中`vote`是一个别名。

```
struct option { /* ... */ } opt; 
```

它声明了类型和类型`struct option`的变量。`opt``struct option`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:21:08.807

在 C 中，创建变量的方式是：

```
<type>  <variable-name>; 
```

这很明显，例如：

```
int foo; 
```

虽然不太明显，但它与

```
struct option {...} opt; 
```

类型是`struct option {...}`，变量名是`opt`。

所以这一行只创建了一个名为 的变量`opt`，它是一个结构，其中包含所有描述的成员。

在该行之后，您还描述了结构`option`，因此您可以再次重用该名称而无需重新描述结构的成员：

```
{
    /* make structure, and variable opt */
    struct option { int alpha; int beta; } opt;

    /* Use the structure previously defined */
    struct option second_opt;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:25:14.913

类型定义为名称提供别名，`struct`尤其是当名称`struct`很长并且您想将其重命名为更短的名称时。

说你有

```
struct very_large_screen_metrics_info{}; 
```

您可以稍后将其重命名为：

```
typedef struct very_large_screen_metrics_info screen_info; 
```

定义中发生的`struct`是类型定义与结构定义一起提供。因此，示例中的命名约定是完全有效的，是常规命名约定的替代方案。类型如您所料`opt`，并且`vote`

# java - Java 中的 DecimalFormat applyPattern 不会覆盖区域设置

> ID：14201648
> 
> 赞同：1
> 
> 时间：2013-01-07T18:16:30.607
> 
> 标签：java, internationalization, decimalformat

我正在尝试调试涉及`DecimalFormat#applyPattern(String)`Java 1.6 的问题。默认的语言环境是法语，所以默认的小数点分隔符是','。但是，该模式指定应用“。” 到它似乎没有的十进制格式实例。我尝试调试`applyPattern()`但看不到变量值。我不太熟悉模式和正则表达式，所以我不确定问题是模式还是其他问题。是模式不正确还是代码有其他问题？

这是代码片段：

```
public class DecimalFormatTester
{
   static private final DecimalFormat doubleFormat = (DecimalFormat) NumberFormat.getInstance();

     static 
     {
       doubleFormat.applyPattern("############.00");
     }

  public static String toString(double value) 
  {
    synchronized (doubleFormat) 
    {
        return doubleFormat.format(value);
    }
  }
} 
```

`Junit`这是失败的示例代码行：

```
assertEquals("String values aren't equal", "2179005635.00", DecimalFormatTester.toString(2.179005635E9)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:26:31.450

**`.`**in 模式是（当前设置的）十进制字符的**`############.00`**占位符。

如果你想**`.`**作为十进制字符，那么你还必须设置十进制字符，例如。通过设置`Locale.US`

您可以保存您当前的语言环境，然后设置为`Locale.US`，然后重新设置您的 saved `Locale`，但要确保您的应用程序不是多线程的。

你也可以使用

```
DecimalFormatSymbols.getInstance().setDecimalSeparator("."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:37:46.740

更改适当输出的语言环境。另一方面，您可以使用自定义[`DecimalFormatSymbols`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormatSymbols.html).

```
###,###.###      123,456.789     en_US
###,###.###      123.456,789     de_DE
###,###.###      123 456,789     fr_FR 
```

[在区域设置敏感格式](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)中查看更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:30:00.760

在模式`############.00`中，'.' 表示您的语言环境的小数点分隔符。

在您的情况下，我理解它是法语小数分隔符，即“，”。

# jquery - jquery 验证文本框，然后在 sql server 中提交代码

> ID：14201651
> 
> 赞同：0
> 
> 时间：2013-01-07T18:16:35.753
> 
> 标签：jquery, validation, asp-classic

在我的 Web 应用程序中，我想将文本框的值插入到我的数据库中 - 但首先，验证所有字段是否都已填写。

目前，我的代码依赖于大量的`if {}`条件，我想让它更优雅。这是我到目前为止所拥有的：

```
$(function () {
    $('#BtnInquiryPageSave').click(function () {
        if ($("#TbFirstName").val().toLowerCase() == "") {
            $('#TbFirstName').addClass('RequiredField');
            $('#ErrorLable').css('visibility', 'visible');
        }

        if ($("#TbRequestedCharterDate").val().toLowerCase() == "") {
            $('#TbRequestedCharterDate').addClass('RequiredField');
            $('#ErrorLable').css('visibility', 'visible');
        }
        if ($("#TbEndDate").val().toLowerCase() == "") {
            $('#TbEndDate').addClass('RequiredField');
            $('#ErrorLable').css('visibility', 'visible');
        }
        if ($("#ddlPersons").val().toLowerCase() == "-1") {
            $('#ddlPersons').addClass('RequiredFieldDdl');
            $('#ErrorLable').css('visibility', 'visible');
        }
        if ($("#ddlCabin").val().toLowerCase() == "-1") {
            $('#ddlCabin').addClass('RequiredFieldDdl');
            $('#ErrorLable').css('visibility', 'visible');
        }
        if ($("#ddlBoatSize").val().toLowerCase() == "-1") {
            $('#ddlBoatSize').addClass('RequiredFieldDdl');
            $('#ErrorLable').css('visibility', 'visible');
        }
        if ($("#ContentPlaceHolder2_ContentPlaceHolder4_ddlBoatType").val().toLowerCase() == "-1") {
            $('#ContentPlaceHolder2_ContentPlaceHolder4_ddlBoatType')
                .addClass('RequiredFieldDdl');
            $('#ErrorLable').css('visibility', 'visible');
        }
        if ($("#ContentPlaceHolder2_ContentPlaceHolder4_ddlSource").val().toLowerCase() == "-1") {
            $('#ContentPlaceHolder2_ContentPlaceHolder4_ddlSource')
                .addClass('RequiredFieldDdl');
            $('#ErrorLable').css('visibility', 'visible');
        }
        if ($("#TbOther").val().toLowerCase() == "") {
            $('#TbOther').addClass('RequiredField');
            $('#ErrorLable').css('visibility', 'visible');
        }
    });
}); 
```

我真的想要一种更简单的方法来测试所有这些条件。理想情况下，一个`if`/`else`或类似的东西很容易。我只需要能够单击`submit`并让它验证...如果失败 - 显示失败消息，如果成功 - 将数据发送到数据库。

更好的方法可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:36:18.533

你可以试试这个：http: [//jsfiddle.net/B8yQs/](http://jsfiddle.net/B8yQs/)

```
$('form').submit(function (e) {

   $(':text').each(function () {
       if ($(this).val() == '') {
        $(this).css({
            'border': 'solid 1px red',
             'color': 'red'
        }).val('required.');
       e.preventDefault(); // stops the form from submit
      }
    $(this).focus(function () {
        $(this).css({
            'border': 'solid 1px black',
             'color': 'grey'
           }).val('');
        });
      });
}); 
```

你也可以根据你的情况试试这个，但几乎没有修改：

```
$('form').submit(function (e) {

   $(':text').each(function () {
       if ($(this).val() == '') {
        $(this).addClass('RequiredField');
        $(this).next('.ErrorLable').css('visibility', 'visible');
        //------------^^^^^^^^^^^------------------------use class instead of ids
       e.preventDefault(); // stops the form from submit
      }
    $(this).focus(function () {
        $(this).removeClass('RequiredField');
        $(this).next('.ErrorLable').css('visibility', 'hidden');
        });
      });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:20:32.783

你为什么不使用更稳定的 jQuery 验证插件来实现你想要做的事情呢？例如：http: [//jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:24:48.353

我建议使用 Jquery Validator 插件：[http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

这很简单，用 $('#formToValidate').validate(); 初始化

在表单上的字段中，添加如下类：

```
<form action="" id="formToValidate">
<input type="text" name="name" id="name" class="required" />
</form> 
```

更多内容： http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# c# - 将 BitArray 转换为具有相同长度的字符串

> ID：14201653
> 
> 赞同：1
> 
> 时间：2013-01-07T18:16:46.697
> 
> 标签：c#, bytearray, byte, bit, bitarray

我正在利用这个问题的算法：[Convert List<boolean> to String](https://stackoverflow.com/questions/9233132/convert-listboolean-to-string) (the selected answer)

但我正在处理`BitArray`反转时的长度。我的意思是如果我的`BitArray`长度是 12，当我反转它时，我需要长度为 12 而不是 16。

我可以想象我需要将计数信息添加到字符串结果中。但我不确定这是否正确。我怎样才能得到相同长度的相同 bitArray？

当前代码：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    var values = new BitArray(12);
    values[0] = true;
    values[1] = true;
    values[2] = true;
    values[3] = true;
    values[4] = true;
    values[5] = true;
    values[6] = true;
    values[7] = true;
    values[8] = false;
    values[9] = true;
    values[10] = true;
    values[11] = false;

    var bytes = new byte[(values.Length + 7) / 8];
    values.CopyTo(bytes, 0);
    var result = Convert.ToBase64String(bytes);

    var bytes2 = Convert.FromBase64String(result);
    var values2 = new BitArray(12);

    for (int i = 0; i < values2.Count; i++)
    {
        var temp = bytes - 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:33:45.033

为什么不这样做：

```
bool[] vals = new[]{false, true, false, true, false, true};

StringBuilder sb = new StringBuilder();
foreach(var b in vals){
    sb.Append(b ? "1" : "0");
}
sb.ToString(); 

// prints out "010101" 
```

编辑：不确定您最初是否有 bool[] 或 BitArray。该方法同样适用于 BitArray：

```
var values = new BitArray(12);
values[0] = true;
values[1] = true;
values[2] = true;
values[3] = true;
values[4] = true;
values[5] = true;
values[6] = true;
values[7] = true;
values[8] = false;
values[9] = true;
values[10] = true;
values[11] = false;

StringBuilder sb = new StringBuilder();
foreach(var b in values){
    sb.Append((bool)b ? "1" : "0");
}
sb.ToString();

// prints out "111111110110" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:12:14.783

我认为没有办法避免填充 0，当您尝试反转数组时它会成为一个问题，我认为解决此问题的方法是创建自己的类型，该类型将有一个存储数字的变量字节数，这应该允许您在执行反向操作或其他操作时执行代码以忽略填充。

您可以在做之前存储填充位的数量`values.CopyTo(bytes, 0);`，然后在做之后`var bytes2 = Convert.FromBase64String(result);`，您可以使用适当的位数进行位移（以修剪填充位）

**编辑：**

您可以对生成的位数组进行位移：

```
public static BitArray ShiftRight(this BitArray instance)
{
    return new BitArray(new bool[] { false }.Concat(instance.Cast<bool>().Take(instance.Length - 1)).ToArray());
} 
```

（取自[https://stackoverflow.com/a/7696793/1279594](https://stackoverflow.com/a/7696793/1279594)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:08:08.810

在使用转换回来`Convert.FromBase64String()`时，您会得到一个长度为**2 字节**的字节数组，即**16 位**。现在，当您最初从 BitArray 创建字节数组时，虽然转换后的 ByteArray 的长度再次为 2 个字节，即**16 位**，但是，您的实际 BitArray 的长度为**12 位**。*您*知道这一事实，而不是考虑长度为 16 的字节数组并创建长度为 16 的 BitArray 的底层实现。

# jquery - 如何在 jquery 的 getjson 方法中将 ID 列表作为参数发布？

> ID：14201654
> 
> 赞同：0
> 
> 时间：2013-01-07T18:16:48.673
> 
> 标签：jquery, asp.net-mvc-4, getjson

大家好，我在选择下拉列表时有一个多选 dropdwon 我正在调用 api 控制器，因为它是一个多选下拉列表我有一组要传递给 api 的 id ..我一直在尝试一种方法，但我遇到了一个异常

```
this is what i have been trying

     function GetProducts(obj) {
      var SelProdids = [];
      var selIds = $(obj).val();          
      if (selIds.length > 0) {
         for (var i = 0; i < selIds.length; i++) {
          SelProdids.push(parseInt(selIds[i]));           
          }
        }

     var params = {};
     params.CatIds = SelProdids;

      $.getJSON('http://localhost:6098/api/Marketing/GetProducts', {    CategoryIds:params}, function (key,Products) {

       });
   }

and my api method looks like this

    Public Product GetAllProducts(long[] CategoryIds)
    {
    } 
```

但我得到一个例外说

```
 **Exception**

    {"ExceptionType":"System.InvalidOperationException","Message":"No MediaTypeFormatter is available to read an object of type 'Int64[]' from content with media type ''undefined''." 
```

谁能帮我解决这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:21:56.040

由于`GetAllProducts`期望`CategoryIds`是一个数组，您应该只传递一个数组而不是具有数组属性的对象。

```
$.getJSON('http://localhost:6098/api/Marketing/GetProducts', {CategoryIds:SelProdids}, function (key,Products) { 
```

# charts - asp.net 柱形图未与自定义标签对齐，并且不显示列之间的空格

> ID：14201656
> 
> 赞同：0
> 
> 时间：2013-01-07T18:16:56.627
> 
> 标签：charts

我正在尝试生成一个图表来查看这个 ![在此处输入图像描述](../Images/1db568796c3fc0b40d4dcfdb779e2bbd.png)

我快到了，但有几个问题我无法解决。显示的列之间没有空格分隔！最底部的自定义标签也没有与每一列对齐！

这是我从现有代码中得到的输出

![在此处输入图像描述](../Images/343139893312400e86b987c6fbbee888.png)

所以 1）我需要将列分布在 x 轴上 2）将自定义标签与每一列对齐！

感谢您对此问题的任何帮助或反馈

这是生成当前图像的代码。请记住我的数据集“ds”有这样的值

新兴 28.45646456 凹痕 14.1456465 音频 27.456456 化妆品 43.44564456 兽医 35.15465646645

公共无效生成图表（）{

```
 //ds is generated and has values

    Chart2.Series.Clear();
    Chart2.Legends.Clear();
    Chart2.Titles.Clear();

    //if (ConfigurationManager.AppSettings["RunOnLocalhost"] == "True") {
    if(HttpContext.Current.Request.Url.Host.ToLower() == "localhost"){
        Chart2.ImageStorageMode = ImageStorageMode.UseImageLocation;
    }

    Chart2.Width = 1000;
    Chart2.Height = 700;
    Chart2.BorderlineDashStyle = ChartDashStyle.Solid;
    Chart2.Titles.Add("Usage Impact By Industry");
    Chart2.ChartAreas[0].AxisX.MajorGrid.LineColor = Color.LightGray;
    Chart2.ChartAreas[0].AxisY.MajorGrid.LineColor = Color.LightGray;
    Chart2.ChartAreas[0].AxisX.Interval = 1;
    Chart2.ChartAreas[0].AxisY.Interval = 5;
    Chart2.ChartAreas[0].AxisX.LabelStyle.Angle = -45;
    Chart2.ChartAreas[0].AxisY.Title = "(%) Usage Lift";
    Chart2.ChartAreas[0].AxisX.TitleFont = new Font("Arial", 16, FontStyle.Bold);
    Chart2.ChartAreas[0].AxisY.Minimum = -5;

    string tmp = "";
    string sName = "";
    double percentage = 0;
    int i = 1;
    int x = 1;
    double index = 0.1;
    foreach (DataRow Row in ds.Tables[0].Rows) {

        if (tmp != Row["Industry"].ToString()) {

            sName = Row["Industry"].ToString();
            Chart2.Series.Add(sName);
            Chart2.Legends.Add(sName).DockedToChartArea = "ChartArea1";

            i++;
        }

        if (Convert.ToDouble(Row["B4"]) > 0) {
            percentage = (Convert.ToDouble(Row["After4"]) - Convert.ToDouble(Row["B4"])) / Convert.ToDouble(Row["B4"]) * 100;
            percentage = Math.Round(percentage, 0);
        }
        else {

            percentage = 0;
        }

        Chart2.Series[sName].Points.AddXY(Row["Industry"].ToString(), percentage);
        Chart2.Series[sName].ChartType = SeriesChartType.Column;
        Chart2.Series[sName]["PointWidth"] = ".5";
        Chart2.Series[sName].IsValueShownAsLabel = true;
        Chart2.Series[sName].LabelFormat = percentage + "%";

        CustomLabel label = new CustomLabel();

        label.FromPosition = 0 + index;
        label.ToPosition = .01 + index;
        label.Text = Row["Industry"].ToString();
        label.RowIndex = 0;

        Chart2.ChartAreas[0].AxisX.CustomLabels.Add(label);

        x++;
        index += 0.2;
        tmp = Row["Industry"].ToString();
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:45:34.643

我认为您为 X 轴采用了不同的系列。在图表中取一个系列，例如，

```
<asp:Chart ID="Chart1" runat="server">
<Series>
         <asp:Series Name="Series1" XValueType="Auto" YValueType="Int32">
         </asp:Series>
</Series>
<ChartAreas>
         <asp:ChartArea Name="ChartArea1">                                
         </asp:ChartArea>
</ChartAreas>
</asp:Chart> 
```

在这里，我在图表中采用了“Series1”。

现在用“Series1”替换你的“sName”

```
Chart2.Series[sName].Points.AddXY(Row["Industry"].ToString(), percentage); 
```

至

```
Chart2.Series["Series1"].Points.AddXY(Row["Industry"].ToString(), percentage); 
```

我认为问题应该得到解决。

# matlab - 如何在 Matlab 上估计下一个值

> ID：14201662
> 
> 赞同：0
> 
> 时间：2013-01-07T18:17:09.903
> 
> 标签：matlab, prediction, kalman-filter

我有一个与测量数据相对应的值向量，我想预测下一个值。我怎样才能做到这一点？我知道卡尔曼滤波器可以做到这一点，但这可能是一种更简单的方法。这是数据图，我想预测下一个值： ![测量数据](../Images/ea52471901894b2054b81345fdfce6c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:33:19.307

尝试[指数平滑](http://en.wikipedia.org/wiki/Exponential_smoothing)法，例如双指数平滑法或 Holt-Winters 方法。基本上，您尝试了解数据的趋势。

我在[这篇](https://stackoverflow.com/questions/11845055/predicting-from-previous-datevalue-data/13409899#13409899)文章中有一些示例`python`代码。

另一方面，如果你知道下划线变量的运动/观察模型，卡尔曼肯定会给你更好的预测，正如@tomasz74 指出的那样。

# java - 带有 JavaScript 的下拉链接的 HtmlUnit webscraping Anchor 标记

> ID：14201665
> 
> 赞同：2
> 
> 时间：2013-01-07T18:17:14.150
> 
> 标签：java, javascript, html, web-scraping, htmlunit

当您将鼠标悬停在初始链接上时，当该链接具有链接下拉列表时，是否可以使用 HtmlUnit 单击链接。如果您单击初始链接，除了您在鼠标悬停时获得下拉链接列表之外，什么都不会发生。我想单击其中一个下拉链接并获取与该链接关联的网页。

问题似乎是 Anchor 有 JavaScript，而且它也是一个下拉列表。如果 Anchor 没有 JavaScript 并下拉，那么我不会有任何问题。

以下是相关的 JavaScript 代码：

```
<script language='JavaScript' type='text/javascript'>
<!--
function mmLoadMenus(){
 window.mm_menu_0805151542_0 = new Menu("root",211,23,"Arial, Helvetica, sans-serif",11,"#FFFFFF","#FFFFFF","#056CB9","#014D98","left","middle",3,0,1000,-5,7,true,false,true,2,true,false);
  mm_menu_0805151542_0.addMenuItem("View&nbsp;Tax&nbsp;Sales","window.open('TCTaxSaleBrief.asp', '_blank','width=800,height=580,scrollbars=1,resizable=yes,top=50,left=100');");
  mm_menu_0805151542_0.addMenuItem("Registration&nbsp;Renewal&nbsp;Reprint","window.open('vrRenewal.asp', '_blank','width=800,height=580,scrollbars=1,resizable=yes,top=50,left=100');");
  mm_menu_0805151542_0.addMenuItem("Drivers&nbsp;License","window.open('http://www.dds.ga.gov/', '_blank');");
  mm_menu_0805151542_0.addMenuItem("Online&nbsp;Tag&nbsp;Renewals","location='../TaxCommissioner/TagRenewal.html'");
   mm_menu_0805151542_0.hideOnMouseOut=true;
   mm_menu_0805151542_0.bgColor='#CCCCCC';
   mm_menu_0805151542_0.menuBorder=0;
   mm_menu_0805151542_0.menuLiteBgColor='#FFFFFF';
   mm_menu_0805151542_0.menuBorderBgColor='#015BA7';

</script> 
```

这是相关的锚点：

```
<a href="#" name="link11" class="nav" id="link10" onmouseover="MM_showMenu(window.mm_menu_0805151542_0,104,0,null,'link11')" onmouseout="MM_startTimeout();">Online Services</a><br /> 
```

这是我用来完成这项工作的 Java 代码片段。

```
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_10);
    String webPage="http://website.html";
    try {
        HtmlPage taxComPage = webClient.getPage(webPage);
        HtmlElement htmlElement = taxComPage.getDocumentElement();
            //HtmlAnchor anchor = taxComPage.getAnchorByText("View Tax Sales");
        //HtmlAnchor htmlAnchor = taxComPage.getHtmlElementById("link10");
        HtmlAnchor anchor = taxComPage.getAnchorByText("Online Services"); 

        HtmlPage page = anchor.click();
    }catch 
```

如果 HtmlUnit 不适用于 JavaScript，请告诉我！

谢谢

我知道有一个名为：mmLoadMenus() 的函数，它具有在鼠标悬停时显示的文本，但我对这个函数与锚点的关联方式有疑问。在锚点中有一个叫做 MM_showMenu 的东西。创建它的 MM_showMenu 是什么，这是一个 JavaScript 关键字，我没有看到它在任何地方定义。我已经搜索了整个页面，唯一提到的地方是锚点。它似乎是某种类型的函数，其参数为：window.mm_menu_0805151542_0,104,0,null,'link11' 被传递给它。我可以在函数 mmLoadMenus() 和锚点之间建立的唯一联系是锚点中有 mm_menu_0805151542_0。我对 JavaScript 不是很精通，也许这就是为什么我没有与 JavaScript 函数和锚点建立密切联系的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:39:24.480

数据已经在页面上，所以为什么不从 JavaScript 函数本身抓取它。只是解析文本的问题 - 比试图强制它加载要容易得多。

# java - Android中完全受控的线程队列

> ID：14201669
> 
> 赞同：3
> 
> 时间：2013-01-07T18:17:39.183
> 
> 标签：java, android, multithreading, thread-safety, threadpool

我在控制线程队列时遇到问题。我的应用程序使用 MySQL 数据库读取部分数据，对其进行处理并在屏幕上显示结果。队列中大约有 20 个任务，但一次只有一个正在处理。用户也可以取消当前队列，并从数据库中“询问”另一部分数据。现在我正在使用带有“丢弃最旧策略”的 ThreadPoolExecutor，因为我正在从队列中删除“最旧”部分数据，并在用户需要时将其替换为“新”部分。我的问题是，即使 corePoolSize 设置为 1，有时也会有 4 个线程同时运行。我不知道如何彻底清空未启动任务的队列。现在我正在使用 getQueue() 并从列表中删除所有项目，但我读到它是不好的方式。

结论：
1.有没有办法强制 ThreadPoolExecutor 一次只运行 1 个任务？
2.如何检查队列以防止任务重复（它们以String值区分）？
3\. 如何从队列中删除干净的“旧”任务？

或者也许我应该使用其他机制？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:45:55.977

```
1\. Is there any way to force ThreadPoolExecutor to run just 1 task at once? 
```

Executors.newSingleThreadExecutor()

```
2\. How to check queue to prevent duplicates of tasks (they are distinguished by String 
```

创建您自己的任务名称列表。在将任务发送给执行者之前将任务名称添加到此列表中，并在任务执行后删除任务名称。

```
3\. How to remove cleanly 'old' tasks from queue? 
```

当您将任务添加到执行程序时，您将获得 Future 对象。您可以使用 future 取消任务。或者您可以关闭执行程序并创建新的执行程序）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:21:11.500

也许使用`Executors.newSingleThreadExecutor()`会给你一个更好的保证，池中只有一个线程。

# authentication - ServiceStack : BasicAuth 和安全性

> ID：14201671
> 
> 赞同：1
> 
> 时间：2013-01-07T18:17:43.290
> 
> 标签：authentication, servicestack

我想对尝试使用我的 SS Web 服务的用户进行身份验证。我找到了示例代码并遵循了 PLURALSIGHT 教程，但我想知道在第一次连接期间使用的用户/密码是否被加密或网络上的某些东西？

在这个时候，我们曾经用证书来保护我们的 WCF，但那是一个真正的痛苦！同时在每个 WS 上传递用户/密码是安全故障。

SS 如何管理认证参数的安全性？我可以这样使用它而不用担心可能的安全故障吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:42:47.100

[ServiceStack](http://www.servicestack.net)只是一个标准的 ASP.NET 或 HttpListener Web 应用程序。在任何 Web 应用程序中加密 HTTP 流量的标准方法是通过 https 调用您的服务。HTTPS 在您的 ServiceStack 服务（即 Web 应用程序层）之外启用/配置，因此在启用 SSL 时，ServiceStack 本身不需要任何特别注意。

在 ServiceStack 上设置 HTTPS 与任何其他 IIS/ASP.NET 或 HttpListener 应用程序相同。在这两种情况下，HTTPS 都是在 Web服务器/主机级别（例如 IIS）而**不是**在您的 Web 应用程序（例如 ServiceStack）中启用的[传输层安全 (TLS)协议。](http://en.wikipedia.org/wiki/Transport_Layer_Security)因此，在寻求如何启用 SSL 时，您应该查看如何在 WebServer 主机级别启用它，例如 IIS、Nginx、HttpListener 等（而不是 ServiceStack）。

 **例如，如果您将 ServiceStack 托管在 ASP.NET 主机中，那么[在 Google 上简单地搜索 IIS SSL将提供大量的说明和](https://www.google.com/search?q=iis%20ssl&oq=iis%20ssl&aqs=chrome.0.57j60j64l2j62l2.1485&sugexp=chrome,mod=3&sourceid=chrome&ie=UTF-8)[类似这样](http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis)的演练。如果您将 ServiceStack 托管在自托管 HTTP 侦听器中，[请改为查看此答案](https://stackoverflow.com/a/8280413/85785)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:54:04.027

凭证将以纯文本形式发送，您需要为身份验证流量配置 SSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T23:26:14.603

如果您的服务正在企业环境中使用并且您有 AD，则可以考虑使用 WSHttpSecurity 绑定和绑定配置集以使用 Windows 凭据。这可以消除证书的使用。如果你的服务是跨企业的，而且你没有AD，你就得做证书

如果您使用的是 Windows 凭据类型，这里有一个示例配置

```
<security mode="Transport">
   <message clientCredentialType="Windows" />
</security> 
```**

# events - 如何触发观看的无控制器核心 Magento 模块 在 在来自外部脚本的 config.xml

> ID：14201677
> 
> 赞同：2
> 
> 时间：2013-01-07T18:18:03.023
> 
> 标签：events, magento, controller, external, observers

背景参考参见：[Magento：如何让观察者在外部脚本中工作？](https://stackoverflow.com/questions/2817489/magento-how-do-i-get-observers-to-work-in-an-external-script)

我想问从外部脚本“复制”前端控制器操作的首选方法是什么。我正在为 Magento EE 1.12 创建一个外部 SSO 登录。

我的代码在 php 文件中如下所示。您可以通过创建 test.php 并将我的用户 (185) 替换为您的用户 ID 来测试它。导航到该页面，然后再次导航。您会注意到您已登录和退出，但是在管理员中它不会显示您在线。继续阅读...

```
<?php

    umask(0);
    require_once 'app/Mage.php';

    Mage::app("default");

    // Set the session to frontend according to many suggestions
    Mage::getSingleton("core/session", array("name" => "frontend"));

    // Alan Storm suggestion to load specific area in Magento (frontend)
    Mage::app()->loadArea(Mage_Core_Model_App_Area::AREA_FRONTEND);

    // Load My Specific User
    $user = Mage::getModel('customer/customer')->load(185)->setWebsiteId(Mage::app()->getStore()->getWebsiteId());

    // Get the session object
    $session = Mage::getSingleton('customer/session');

    // Make it look good for debugging
    echo "<PRE>";

    // Toggle the customer logged in / logged out upon page load
    if ($session->isLoggedIn())
    {
        try
        {
            $session->session->setCustomer($user);
            echo "LOGGED IN<br>";
            var_dump($session->getCustomer()->getIsJustConfirmed());
        } catch (Mage_Core_Exception $e) {
            $message = $e->getMessage();
            var_dump($message);
        }

    } else {
        $session->logout();
    }

    var_dump($session->getCustomer());
    echo $session->isLoggedIn() ? $user->getName().' is online!' : 'not logged in';

?> 
```

此代码登录用户，但是没有依赖于 config.xml 中前端区域的 controller_action_predispatch 和 controller_action_postdispatch 事件的控制器的 Mage_Log、Mage_Persistent 或任何其他模块都**不会触发。**

Mage_Log 是这种情况的一个完美示例，它监视 customer_login 并触发 bindCustomerLogin() 函数（因为我使用了上面 Alan Storm 的建议）但控制器调度没有触发，导致模块无法正常工作。

这些其他模块怎么可能被外部脚本（或观察 controller_front_init_routers 事件的全局观察者）触发？

**编辑：解决方案** 这是上述 benmarks 建议的最终结果......我正在模拟 Mage_Customer 控制器。下面的脚本演示了如何执行一个完整的 magento 登录。它没有经过广泛测试，但确实显示用户已在后端登录。这是迄今为止我见过的最完整的解决方案。

```
public function autoMageLogin() {
                // Include the controller itself so the object can be used
                include ('/var/www/app/code/core/Mage/Customer/controllers/AccountController.php');

                // Configure Magento to think its using the frontend
                Mage::getSingleton("core/session", array("name" => "frontend"));
                Mage::getConfig()->init();
                Mage::getConfig()->loadEventObservers('frontend');
                Mage::app()->addEventArea('frontend');
                Mage::app()->loadArea(Mage_Core_Model_App_Area::AREA_FRONTEND);

                // Prepare the request as if it were coming from the specific
                // controller (I've chosed Mage_Customer as my chosen controller
                // to 'emulate' in php code
                $request = Mage::app()->getRequest();
                $request->setRouteName('customer');
                $request->setControllerModule('Mage_Customer');
                $request->setRoutingInfo('');
                $request->setModuleName('customer');
                $request->setControllerName('account');
                $request->setModuleKey('module');
                $request->setControllerKey('account');
                $request->setActionName('loginPost');
                $request->setActionKey('action');

                $response = Mage::app()->getResponse();

                // Instantiate a new AccountController object using the modified request
                // and the modified response (see the include() above)
                $accountControl = new Mage_Customer_AccountController($request, $response);

                // Dispatch events associated to the controller
                Mage::dispatchEvent('controller_action_predispatch', array('controller_action' => $accountControl));
                Mage::dispatchEvent('controller_action_predispatch_customer', array('controller_action' => $accountControl));
                Mage::dispatchEvent('controller_action_predispatch_customer_account_loginPost', array('controller_action' => $accountControl));

                // Load the current user
                $user = Mage::getModel('customer/customer')->load(185)->setWebsiteId(Mage::app()->getStore()->getWebsiteId());

                // Grab the current session
                $session = Mage::getSingleton('customer/session');

                // From this point forward, emulate the controller actions    
                if (!$session->isLoggedIn()){
                        try{

                                $session->setCustomerAsLoggedIn($user);
                                $session->renewSession();
                                echo "LOGGED IN<br>";
                        } catch (Mage_Core_Exception $e) {
                                $message = $e->getMessage();
                                var_dump($message);
                        }

                } else {
                        echo "LOGGED OUT<br>";

                        $session->logout();
                }

                    // Now fire the post controller action events
                    Mage::dispatchEvent('controller_action_postdispatch_customer_account_loginPost', array('controller_action'=>$accountControl));
                    Mage::dispatchEvent('controller_action_postdispatch_customer', array('controller_action'=>$accountControl));
                    Mage::dispatchEvent('controller_action_postdispatch', array('controller_action'=>$accountControl));

                // log to the screen and be done
                var_dump($session->getCustomer());
                echo $session->isLoggedIn() ? $session->getCustomer()->getName().' is online!' : 'not logged in';

                die();

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:26:13.713

您将需要使用原始参数手动分派事件，例如

```
Mage::dispatchEvent(
    'controller_action_predispatch',
    array('controller_action',Mage::app()->getRequest()
); 
```

有关更多信息，请参阅[`Mage_Core_Controller_Varien_Action::preDispatch()`（链接）](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L528)。请注意，pre-dispatch 和 post-dispatch 方法基于 routename 参数调度动态事件，这可能是也可能不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:24:56.437

如果您将外部脚本重写为自定义控制器和操作，那么所有事件都会自然触发。但是，您首先必须有理由将其设为外部。

# android - 首选项：点击首选项时能否找到输入类型

> ID：14201678
> 
> 赞同：1
> 
> 时间：2013-01-07T18:18:04.057
> 
> 标签：android, android-preferences

偏好屏幕 XML；请注意，一种偏好是“numberDecimal”。

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <EditTextPreference
        android:inputType="textCapWords"
        android:key="tsName"
        android:title="@string/pref_common_test_name_title" />
    <EditTextPreference
        android:inputType="numberDecimal"
        android:key="tsSledWeightValue"
        android:title="@string/pref_cof_test_sled_weight" />
</PreferenceScreen> 
```

Preference onClick 方法：现在我想确定该首选项的输入类型是否为“numberDecimal”，因为我想调用自定义编辑器。

```
private static Preference.OnPreferenceClickListener sBindEditorToPreferenceClickListener = new Preference.OnPreferenceClickListener() {
    public boolean onPreferenceClick(Preference preference) {
        boolean isHandled = false;
        if (preference instanceof EditTextPreference) {
// *******  CAN I FIND THE PREFERENCE'S "inputType" HERE?
// ******* EXAMPLE: if(preference.inputType == android:numberDecimal) {}
        }
        return isHandled;
   }
}; 
```

编辑：或者有更好的方法来实现这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:25:00.150

```
 if(preference instanceof EditTextPreference) {
    EditText prefText = ((EditTextPreference) preference).getEditText();
    int type = prefText.getInputType();
    //do stuff
 ) 
```

虽然看起来有点奇怪。你真正想做什么？弄清楚点击了哪一个？只需分配不同的点击监听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:25:30.230

你可能会做这样的事情：

```
 private static Preference.OnPreferenceClickListener sBindEditorToPreferenceClickListener = new Preference.OnPreferenceClickListener() {
    public boolean onPreferenceClick(Preference preference) {
        boolean isHandled = false;
        if (preference instanceof EditTextPreference) {
            EditTextPreference editTextPreference = (EditTextPreference) preference;
            EditText editText = editTextPreference.getEditText();
            if( editText.getInputType() == InputType.TYPE_NUMBER_FLAG_DECIMAL ) {
                /**********************
                   Do your thing here 
                **********************/
                isHandled = true;
            }
        }
        return isHandled;
   }
}; 
```

您的代码和上面的代码片段之间的最大区别在于它是......

1.  投射`preference`到`EditTextPreference`
2.  抓取`EditText`来自`editTextPreference`
3.  检查以便`EditText`匹配的输入类型`InputType.TYPE_NUMBER_FLAG_DECIMAL`（对应`android:numberDecimal`于 XML）

如果您愿意，您可能可以将其写得更紧凑，但我选择将其分解以便更容易理解。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:26:45.360

你应该做这个：

```
private static Preference.OnPreferenceClickListener sBindEditorToPreferenceClickListener = new Preference.OnPreferenceClickListener() {
    public boolean onPreferenceClick(Preference preference) {
        boolean isHandled = false;
        if (preference instanceof EditTextPreference) {
              if (((EditTextPreference)preference).getEditText().getInputType()==InputType.TYPE_NUMBER_FLAG_DECIMAL)
              {}
        }
        return isHandled;
   }
}; 
```

可用的输入类型：[这里](http://developer.android.com/reference/android/text/InputType.html)

# c - 为什么 C 语言不支持列主数组？

> ID：14201679
> 
> 赞同：9
> 
> 时间：2013-01-07T18:18:08.170
> 
> 标签：c

它只是一个随机的设计选择，还是 C 支持行优先而不是列优先的任何具体原因？我知道 Fortran 使用列专业。那么这些设计选择背后的原因（如果有的话）是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T18:39:51.060

基于我对问题的一些评论以及其他一些答案（以及我自己的一些反思 - 但特别是对 C 语言设计过程一无所知......），我相信这是一个仅基于做出这个决定的人（里奇？）需要什么。

如果将多维数组的索引解释为矩阵索引，则将第一个索引作为行索引，将第二个索引作为列索引是有意义的 - 即列优先结构。如果您的应用程序将大量使用线性代数或其他矩阵繁重的计算，那么以一种可以高效地一次遍历一列的方式存储这些结构也是有意义的，因为许多算法都这样做。出于这个原因，诸如 Matlab 和 Fortran 之类的编程语言受益于列优先——它使编写高效的代码变得更容易，同时考虑到矩阵和矩阵算法。

另一方面，C 比 Matlab 或 Fortran 更通用。如果您不打算`int**`专门用于*矩阵*，那么哪个索引是哪个并不重要。`a`if is an `int**`, then`a[2]`返回 an`int*`并`a[2][1]`返回 an似乎很自然`int`——您“深入”地挖掘多维数组。为了效率，我们现在只关心如果我们选择`a[2]`并想要迭代它，它应该被有效地缓存。*无论您是程序员，是`a[2]`与矩阵行还是矩阵列相关联都没有关系 - 我们不使用矩阵！*

因此，没有充分的理由（我可以从我的头顶看出）C 是列主要的。在实现第一个版本时，将其设为行优先可能*更容易*——也许是因为底层的低级语言（汇编程序？）已经是行优先的——就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:03:51.957

在 C 中，数组元素保证是连续的内存元素，二维数组是数组的数组，比如数组`int a[10][20]`；`a[0]`本身就是一个数组，它的元素必须是连续的。同样`a[0]`与 相邻`a[1]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:26:02.117

C 只定义数组，并允许数组的元素反过来也是数组。对于数组数组，第一个索引选择一个数组元素，第二个索引选择该数组中的一个值元素。将它们的含义颠倒过来会产生不合逻辑的语法。

将第一个索引解释为行号，将第二个索引解释为某些 2D 矩阵数据结构的列号就是这样，一种解释。

请注意，Fortran 的（主要列）数组不是通过应用两个单独的索引运算符来索引的。

编辑：为了给出权威引用，C 标准在 §6.5.2.1 (C99) 中解释了下标多维数组的结果如何是一个 n-1 维数组之后

> **由此**得出，数组以行优先顺序存储

（强调我的）

# css - Div 100% 高度不起作用

> ID：14201682
> 
> 赞同：0
> 
> 时间：2013-01-07T18:18:19.247
> 
> 标签：css

我试图在页面内放置一个内容 div，但我不知道为什么高度 100% 不适合正文内的内容 div？这是我的代码示例：

```
*{ margin:0;padding: 0;}
html{height:100%; width:100%;}
body{height:100%; width:100%;}
#content{ position:relative; height:100%; width:65%; margin: 0 auto; background-color:#345C54;} 
```

和 HTML

```
<!DOCTYPE HTML>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="content"></div>
</body>
</html> 
```

[这](http://jsfiddle.net/Behseini/yLmnx/)是 jsFiddle 上的示例链接。如您所见，内容 div 的高度不适合 100% 的身体，您能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:28:32.503

我将填充更改为 0px（在 jsfiidle 链接上），它看起来是正确的（垂直滚动条消失了）...

```
 #page{
    position:relative;
    height:100%;
    width:65%;
    margin: 0 auto;
    background-color:#345C54;
    padding-top: 0px;
    } 
```

那是你想要的吗？

编辑： `padding: 0px;`//而不是填充顶部

# javascript - “Uncaught TypeError: Cannot call method 'shift' of null - all.js:54”是什么意思？

> ID：14201685
> 
> 赞同：3
> 
> 时间：2013-01-07T18:18:26.050
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我的 FB 画布应用程序已启动并正常运行，但我在 JS 调试控制台中收到此错误：

“未捕获的 TypeError：无法调用 null 的方法‘shift’”all.js:54

我想知道这是否是我的代码有问题，或者是因为 FB 团队一直在处理 jdk。我应该担心吗？

提前致谢，

罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:21:53.470

我遇到了同样的问题，并根据这些[Facebook 说明](https://developers.facebook.com/docs/reference/javascript/)实现了 Javascript SDK ，它修复了我的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T05:10:21.820

我遇到了同样的问题...在我的代码中，我有一个`<script>`标签引用了一个不存在的 javascript 文件（我还没有创建）。一旦我创建了一个空的 js 文件，错误就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T09:33:23.173

我通过添加解决了这个问题

```
<div id="fb-root"></div> 
```

# vba - Visio 300 多页，分成 300 多个单独的文档，或打印为 pdf，导出为 jpg/gif

> ID：14201692
> 
> 赞同：3
> 
> 时间：2013-01-07T18:18:50.023
> 
> 标签：vba, visio

我通过导入数据创建了 300 多页的 Visio 绘图以创建 300 多个“组织结构图”。

我说“组织结构图”，因为它们实际上是将 Crystal Report 绘制为“CEO”，并将其数据源表和字段绘制为“员工”。

我现在有一个包含 300 多页的巨大 Visio 文件，每一页都是一个报表及其数据源。但我的目标是获得 300 多个单独的文档，每个文档都以适当的方式命名。使用 vba 我可以根据需要重命名每个页面或从页面获取所需的名称。

理想情况下，我想要 pdf 文件，而不是 visio 文件，但在紧要关头会这样做，最后一个可取的是 jpg/gif。

我试过了：

*   将每个页面导出/保存为 jpg/gif/html 但出现 920 错误.. 在详尽搜索如何修改每个页面的分辨率以避免 920 错误后，我完全被难住了，我的意思是需要什么“完美”分辨率？可用的文档非常模糊。

    ```
    Sub ExportPagesAsFiles()

    Dim PagsObj As Visio.Pages
    Dim PagObj As Visio.Page
    Dim ExportName As String
     Dim ExportPath As String

    Set PagsObj = ActiveDocument.Pages

    'Open "C:\temp\exportLog.txt" For Output Shared As #1

     For Each PagObj In PagsObj
        ExportPath = "c:\Report_Visio\"
         ExportName = ExportPath & PagObj.Name & ".jpg"
        ' ".gif"
        ' ".wmf"
         ' ".html"
        'Print #1, ExportName
        PagObj.Export ExportName

    Next PagObj

    'Close #1

    End Sub 
    ```

*   打印到 pdf 打印机但点击 pdf 软件对话框 (CutePDF)。我没有修改系统注册表的管理员权限，而且我在 Windows 7 机器上，并且 sendkeys 是非法的。

*   vba 创建新文档，将页面绘图复制/粘贴到其中，命名新文档，用名称保存。但是一些 Visio 怪癖只复制粘贴页面对象，而不是它们后面的标题和数据，因此它们是空白形状。详尽搜索后，我不清楚复制整个页面内容。

*   vba 以第一页的名称保存 300 多个文档的副本，然后删除其余页面。第二次打开原始页面，保存为第二页，然后删除其余页面，重复300+次。我在大约 10 页和 3 小时后退出了这个。

似乎每条可能的解决方案路径都会遇到陷阱、沼泽、悬崖......

作为一般说明，Internet 上提供的 Visio 信息要么非常简陋，要么技术晦涩难懂。对于任何其他 Office 产品，论坛等中有大量信息、示例等。但 Visio 是它的蟋蟀。

所以想知道是否有任何 Visio 开发人员可以帮助我选择和导航这些解决方案路径！

谢谢。

编辑添加：我正在使用 Visio Standard 2003 版本编辑添加 Visio 导出到使用的文件代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:54:15.233

您可以尝试使用[PDFCreator](http://sourceforge.net/projects/pdfcreator/)（它的开源）。

它是一个虚拟打印机，可以打印成 PDF、JPG、BMP、PNG（对图表非常有用）和许多其他格式。

它具有自动保存选项、可配置的文件名，并且可以将打印的文档页面保存为单独的文件。

配置虚拟打印机的应用程序的一些屏幕截图（这是 PDFCreator 0.9.6）。

将每一页打印到单独的文件中

![将每一页打印到单独的文件中](../Images/9c5bf58275e1cd2f956851006830bce7.png)

自动保存选项：

![在此处输入图像描述](../Images/157cce11491dfca77fe79629a48c0213.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:35:04.297

我决定采取不同的方法。

我使用 VBA 和 Access 分别创建每个 Visio 页面，而不是创建 300 多页的 Visio 文档。Visio 的组织结构图导入数据向导功能强大，但正如我在上面概述的那样，让一个选项卡在了导出单个页面的选项上。

因此，在 Access 中，我遍历了 300 多个报表记录，一次选择每个报表的数据，为该报表创建 Visio 绘图，将 Visio 文件命名为报表名称，然后保存并关闭它。

然后我得到了 300 多个 Visio 文件，每个文件都显示了报表的数据源表和字段。够好了。

使用 VBA 从数据“orgwiz”创建图表 [http://office.microsoft.com/en-ca/visio-help/make-visio-organization-charts-from-personnel-files-HA001077464.aspx](http://office.microsoft.com/en-ca/visio-help/make-visio-organization-charts-from-personnel-files-HA001077464.aspx)

代码是

```
 Set objVisio = CreateObject("Visio.Application")
    Set objAddOn = objVisio.Addons.ItemU("OrgCWiz")

    strCommand = "/DATASOURCE=c:\temp\MyDatabase.mdb, " _
    & " TABLE=MyVisioDataSource, " _
    & " DBQUALIFIER=Microsoft.Jet.OLEDB.4.0 " _
    & " /NAME-FIELD=Data_Object_Name " _
    & " /UNIQUEID-FIELD=Data_Object_ID " _
    & " /MANAGER-FIELD=Data_Object_Parent_ID " _
    & " /DISPLAY-FIELDS=" & strDisplayFields _
    & " /CUSTOM-PROPERTY-FIELDS=" & strPropertyFields _
    & " /SYNC-ACROSS-PAGES " _
    & " /HYPERLINK-ACROSS-PAGES " _
    & " /SHAPE-FIELD=MASTER_SHAPE " _
    & " /PAGES=" & strReportName

    objAddOn.Run ("/S-INIT")

    Dim cmdArray, i
    cmdArray = Split(strCommand, "/")
    For i = LBound(cmdArray) To UBound(cmdArray)
    objAddOn.Run ("/S-ARGSTR /" + cmdArray(i))
    Next

    objAddOn.Run ("/S-RUN ") 
```

# google-chrome - Chrome/webkit 未在输入时呈现 css 显示更改：已检查 + 元素 + 元素

> ID：14201694
> 
> 赞同：13
> 
> 时间：2013-01-07T18:18:53.163
> 
> 标签：google-chrome, css, safari, webkit

## 设想

我有一个 CSS 选择器，它应该在单击标签时显示子内容。选择器的思路是`input:checked + element + element`为最终元素提供块显示（默认为无）。问题是它适用于除 webkit 之外的所有主要浏览器。Chrome、Safari 和 android 的移动浏览器（v2.2 抱歉，我落后于时代）都无法显示该元素。当我在 Chrome 中检查元素时，它显示它应该是`display: block`但它没有呈现它。我可以在开发人员工具中取消选中并检查该属性，它会显示，但之前不会。

我认为这是 webkit 中的一个错误。

## 问题

这是一个多部分的问题：这是 webkit 中的一个已知错误吗？我的选择器有什么问题吗？以及如何解决 webkit 浏览器的问题（任何创意建议）？

## 代码

HTML

```
 <input id="c1" type="checkbox">
  <label for="c1">Ein</label>
  <section>Content</section>

  <input id="c2" type="checkbox">
  <label for="c2">Zwei</label>
  <section>Content</section>

  <input id="c3" type="checkbox">
  <label for="c3">Drei</label>
  <section>Content</section> 
```

CSS

```
input {
  float:left;
  clear:left;
  visibility: hidden;
  position:absolute;
}

label {
  color:green;
  display:block;
  cursor:pointer;
}

section {
  display:none;
}

label:after {
  content:" +";
}

input:checked + label:after {
  content:" -";
}

input:checked + label + section {
  display:block;
} 
```

## 演示

演示： http: [//jsbin.com/epibin/2](http://jsbin.com/epibin/2)
来源：http: [//jsbin.com/epibin/2/edit](http://jsbin.com/epibin/2/edit)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-20T17:55:10.247

## 链A伪类

[这表明](http://jsbin.com/epibin/26)此代码修复了错误（注意`nth-child(n)`匹配任何元素，但将其添加到链中会使其工作）：

```
input:checked + label:nth-child(n) + section {
  display:block;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-28T22:49:47.303

@ScottS 提供了一个可靠的解决方案。另一种可能的方法对我有用，并且从局外人“他们为什么这样做”的角度来看更有意义：

```
input:checked ~ section {
  display:block;
} 
```

它选择之后的每个“部分”，并且是“输入：检查”的兄弟姐妹。

有两个条件我可以想到@ScottS 的版本优越的地方，因为在我的解决方案中也选择了“标签”位置的元素：（1）“输入”的兄弟 #1 和 #2 是相同的元素（而不是'label' & 'section') (2) 你试图通过使用 '*' 选择器来概括。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T18:27:18.810

听起来与[错误 45168 相匹配 - 如果前缀为伪类选择器，则忽略 CSS 多个相邻兄弟选择器序列](https://bugs.webkit.org/show_bug.cgi?id=45168)

如果您在标记中交换`<label>`and结构（并相应地调整 CSS），它就可以工作。`<input>`

[http://jsbin.com/epibin/10/edit](http://jsbin.com/epibin/10/edit)

（但现在`+` `-`不要切换）

编辑：

将`<label>`and`<section>`放入 div 容器中可以工作：http: [//jsbin.com/epibin/12/edit](http://jsbin.com/epibin/12/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-01T16:21:22.420

如前所述`mdmullinax`，这是 chrome 中的一个突出错误。

这个黑客从接受的答案中的链接为我工作：

```
 body { -webkit-animation: bugfix infinite 1s; }
 @-webkit-keyframes bugfix { from { padding: 0; } to { padding: 0; } } 
```

# iphone - 如何让 asl_log 出现在 iOS 系统控制台输出中？

> ID：14201699
> 
> 赞同：8
> 
> 时间：2013-01-07T18:19:17.843
> 
> 标签：iphone, ios, logging

我正在调查我是否可以从 asl_log 获得比 iPhone/iOS 上的 NSLog 更好的性能（可能......），但我被困在一个点上，似乎 asl 的日志输出不会出现在系统控制台中（许多应用程序（如 System Console、iConsole 等）都可以查看）。我知道我设置它是正确的，因为我使用 ASL_OPT_STDERR 打开，并且当设备连接时我在 XCode 中看到日志条目。

我在网上探索了很多有趣的东西（例如[http://boredzo.org/blog/archives/2008-01-20/asl-logging](http://boredzo.org/blog/archives/2008-01-20/asl-logging)，[https://github.com/robbiehanson/CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack)），最好的希望似乎成为 asl_open() 与“com.apple.console”的设施，但唉，输出仍然没有出现在控制台中。NSLog 是唯一的选择吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-28T01:30:20.737

将 STDERR 添加到 ASL，然后它会显示在控制台中

```
asl_add_log_file(NULL, STDERR_FILENO); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T07:13:25.333

您需要使用 ReadUID 或 ReadGID 设置消息的读取权限。将任一设置为 -1 将允许任何用户/组根据头文件文档查看消息。

```
aslmsg msg = asl_new(ASL_TYPE_MSG);
asl_set(msg, ASL_KEY_READ_UID, "-1");
asl_log(NULL, msg, ASL_LEVEL_NOTICE, "Hello, world!");
asl_free(msg); 
```

# ios - 在在线游戏的服务器上对 Game Center 玩家进行身份验证

> ID：14201700
> 
> 赞同：7
> 
> 时间：2013-01-07T18:19:26.373
> 
> 标签：ios, game-center

《部落冲突》使用 Game Center 对玩家进行身份验证并将其链接到现有的远程存储游戏状态。

据我所知，游戏仅在客户端提供了玩家标识符。是否有一种受支持的技术可以安全地验证用户身份，而不仅仅是发送标识符（这相当于只使用用户名进行身份验证）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-24T11:52:28.383

自从我提出这个问题以来，Apple 已经引入了一个新的 API，并且可以在以下位置找到答案：[设置第三方服务器以与 Game Center 交互](https://stackoverflow.com/q/15755489/39974)（谢谢，user2949759）和其他一些地方。

[具体来说](https://stackoverflow.com/a/20619751/39974)，从 iOS 7（[Wayback Machine 上的 Apple 文档](http://web.archive.org/web/20150325062831/https://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLocalPlayer_Ref/index.html#//apple_ref/occ/instm/GKLocalPlayer/generateIdentityVerificationSignatureWithCompletionHandler:)）开始：

> `-[GKLocalPlayer generateIdentityVerificationSignatureWithCompletionHandler:]`
> 
> 生成允许第三方服务器对本地玩家进行身份验证的签名。

相关回调块的参数包括`NSURL *publicKeyUrl`, `NSData *signature`, `NSData *salt`, `uint64_t timestamp`. 这些以及玩家的`playerID`和`bundleID`应该作为“登录信息”发送到服务器。

*   此时，服务器端应该使用`publicKeyURL`来获取公钥
*   服务器端，验证此公钥是否已由 Apple 签名
*   服务器端，连接 UTF-8 编码`playerID`、、`bundleID`大端`uint64`时间戳和逐字`salt`
*   服务器端，生成上面的SHA-256来产生`digest`
*   [服务器端，使用](https://crypto.stackexchange.com/a/9897)之前下载的公钥验证`signature`发送到服务器的信息是否正确，以及`signature``digest`

[在 pseudo-PHP](https://stackoverflow.com/a/30395238/39974)中有一个[例子，一个如何在 Objective-C 中实现它](https://stackoverflow.com/a/19202727/39974)的例子（这对逐字使用没有什么意义），一个[Go 实现](https://stackoverflow.com/a/32692503/39974)，一个[Ruby 实现](https://stackoverflow.com/a/31038160/39974)，还有其他语言的各种实现在同一问题。

不出所料，Go 中的实现似乎特别易读，但它并没有验证公钥是由 Apple 发布的。链接的 Ruby 实现包含一个相当清晰的示例来说明如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:38:17.723

由于您使用自己的服务器进行身份验证，因此这是您的客户端和服务器之间要实现的东西。Game Center 将无法为您提供帮助。

一个简单的想法是`playerID`使用只有您知道的函数计算散列，然后让服务器将其与客户端发送的内容进行比较。

避免在您的客户端第一次运行时生成随机密钥，因为当重新安装客户端时，用户将被锁定。

# uitableview - 在 Monotouch 中单击 SegmentedControl 到 UITableViewCell 会导致 SIGABRT

> ID：14201701
> 
> 赞同：0
> 
> 时间：2013-01-07T18:19:26.907
> 
> 标签：uitableview, xamarin.ios, sigabrt

在我用于 iPhone 的 Monotouch 应用程序中，我试图将分段控制器添加到 UITableViewCell 以充当每行中值的切换。一切都正确显示，并且第一行在单击时最初会正常工作。但是，在该行离开屏幕并重新加载后，如果我再次单击分段控制器，则会收到异常：

由于未处理的异常而终止运行时 [错误] FATAL UNHANDLED EXCEPTION: System.Exception: Selector 从objective-c 对已被 GC 处理的 MonoTouch.UIKit.UIControlEventProxy (0x16D793C0) 类型的托管对象调用---> System.MissingMethodException : 没有找到 MonoTouch.UIKit.UIControlEventProxy::.ctor(System.IntPtr) 的构造函数

我听说过使用 Monotouch 的人尝试将按钮放在表格单元格中的类似问题。一般建议是将每个表格单元格添加到列表中以防止其被垃圾收集，但这对我不起作用。

有没有办法解决这个问题？

这是我的 GetCell 代码的简化版本：

```
public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
        {

            Hashtable rowData = dataList [indexPath.Row];
            FilterListToggleCell cell;
            cell = (FilterListToggleCell)tableView.DequeueReusableCell ("FilterTogglePlusCell");

            cacheList.Add(cell.Toggle);//cache only the segcontrol
                            //cacheList.Add(cell);//also previously tried caching the whole cell

            cell.Title.Text = (string)rowData["title"];
            if(additionalFields.Contains((string)rowData["key"])){
                cell.Toggle.SelectedSegment = 0;
            } else {
                cell.Toggle.SelectedSegment = 1;

            }

            cell.Toggle.ValueChanged += (sender, e) => {
                UISegmentedControl toggle = (UISegmentedControl)sender;

                if(toggle.SelectedSegment == 0){
                    Console.WriteLine("Toggle YES");
                } else {
                    Console.WriteLine("Toggle NO");
                }

            };

            cell.Toggle.Tag = indexPath.Row;

            return cell;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:30:09.703

根据来自以下问题的信息，我能够在不需要额外缓存的情况下完成这项工作：[如何从事件中删除/注销事件处理程序？](https://stackoverflow.com/questions/7430467/how-do-i-remove-unregister-event-handler-from-an-event)

ValueChanged 行被替换为：

```
cell.Toggle.AddTarget(this, new Selector("ToggleChange"),UIControlEvent.ValueChanged); 
```

另一个方法被添加到我的 UITableViewDataSource

```
[Export ("ToggleChange")]
void OnChange(UISementedControl toggle){
    if(toggle.SelectedSegment == 0){
        Console.WriteLine("Toggle YES");
    } else {
        Console.WriteLine("Toggle NO");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:10:15.690

你说的*基本*情况是对的。发生这种情况是因为没有对您从方法返回的的**托管**引用。因此，GC 可以收集并释放它（这将导致诸如想要回调托管实例的事件之类的问题）。有关更多详细信息，请参阅此[答案](https://stackoverflow.com/a/12353010/220643)。`UITableViewCell``GetCell`

现在我不确定为什么这种方法对你不起作用。但是您上面的代码似乎不完整，例如

```
cell = (FilterListToggleCell)tableView.DequeueReusableCell ("FilterTogglePlusCell"); 
```

可以返回`null`，这是您应该创建更多单元格的时间（实际上，没有条件可以实际创建任何新单元格，因此没有任何东西可以重复使用）。

您的下一行将抛出一个`NullReferenceException`when `cell`is null （因为`cell.Toggle`）。

请注意，这并不能解释您的崩溃 - 我怀疑缺少一些使其工作的代码（创建单元格）并且可能无法正确缓存它们。

# sql - SQL 错误，列不存在

> ID：14201703
> 
> 赞同：1
> 
> 时间：2013-01-07T18:19:32.423
> 
> 标签：sql, join

以下错误：

```
Unknown column 'Customers.Customer_ID' in 'on clause' 
```

是这段代码的结果：

```
SELECT First_Name, Last_Name, Orders.Order_ID, Orders.Order_Date, Orders.Plant_ID, Orders.Plant_Qty, Orders.Price, Orders.Employee_ID
FROM Customers, Orders
INNER JOIN Orders as t2
ON Customers.Customer_ID = t2.Order_ID; 
```

我不知道为什么；Customers.Customer_ID 是客户表中的一个字段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:21:12.890

可能是因为模棱两可。您需要删除`FROM .. Orders`，因为看起来您正在尝试进行显式连接。我还建议在列列表中为所有列名添加前缀。您还应该在连接中使用别名或表名。

```
SELECT customers.first_name, 
       customers.last_name, 
       orders.order_id, 
       orders.order_date, 
       orders.plant_id, 
       orders.plant_qty, 
       orders.price, 
       orders.employee_id 
FROM   customers 
       INNER JOIN orders  
               ON customers.customer_id = orders.order_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:23:36.963

我相信`Customers -> Orders` *（一对多关系）*并且您正在尝试加入表*中的一对一关系*，如果我错了，请纠正我。所以查询应该是这样的。

```
SELECT First_Name, Last_Name, Orders.Order_ID, Orders.Order_Date, Orders.Plant_ID, Orders.Plant_Qty, Orders.Price, Orders.Employee_ID
FROM Customers
INNER JOIN Orders as t2
ON Customers.Customer_ID = t2.Customer_ID; 
```

# c# - 如何从非致命的 .NET 异常中区分致命的

> ID：14201705
> 
> 赞同：4
> 
> 时间：2013-01-07T18:19:33.633
> 
> 标签：c#, .net, c#-4.0, exception, fatal-error

我正在用 C# 编写一个通用的离散事件系统模拟库。我将在此基础上编写另一个库，以实现特定类型的离散事件模拟。这是代码的完整版本。

```
static class Engine
{
    [ThreadStatic] internal static uint time;
    //...

    public static void Run(OnException onException = OnException.PauseAndRethrow,
                           IList<Type> exceptionsToPass = null)
    {
        //...
        while (!stop)
        {
            Event e = currentTimeEventQueue.PopEvent();
            if (e == null) break;
            try {
                e.Activate();
            }
            catch (EngineException ex)
            {
                // An engine method that shouldn't have been called
                // was called, and Activate didn't handle that

                // handle this situation...
            }
            catch (/* fatal exception type*/ ex)
            {
                throw;
            }
            catch (Exception ex)
            {
                // code to decides whether to dismiss exception
                // pause, stop, reset based on parameters to this method
            }
        }
    }
} 
```

问题是：我是否应该专门捕获已知不可恢复的异常类型（我不应该尝试以任何方式处理）。那些例外是什么（我能想到`OutOfMemoryException`和`StackOverflowException`）。是否有致命例外列表？我记得其中一些是无法捕获的。**所以我对可以捕获的致命异常列表感兴趣**。我只想重新扔掉它们，而不做任何事情。另一方面，我想处理任何其他类型的异常。或者也许我需要另一个角度。

* * *

**编辑：**好的，我在写这个问题时做了很大的疏忽。`Activate()`是抽象的。我正在编写一个通用的离散事件系统模拟库。该引擎正在使用完全未知的`Event`. 所以它调用了一个绝对未知的方法`Activate()`，它可能会抛出任何类型的异常。我可以忽略这个问题，但我想将过程控制权交给调用者。从方法的参数可以看出`Run()`，调用者决定引擎在调用到异常时会做什么`Activate()`（它可以指示引擎忽略并继续，或暂停并重新抛出，或...）。这就是为什么我试图将致命异常与所有其他异常区分开来。如果调用者已指示引擎忽略来自`Activate()`捕获和忽略致命异常是不明智的。（有龙:)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:23:46.880

> 我是否应该专门捕获已知不可恢复的异常类型

不，你不应该。如果它们不可恢复，则不应尝试从它们中恢复。

关于异常的规则是 - 捕获并处理您知道如何从中恢复的异常。让任何其他冒泡 - 如果这意味着应用程序崩溃，这可能是最好的。

以下是代码异味，不应编码：

```
catch (/* fatal exception type*/ ex)
{
    throw;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:37:34.213

没有 throwable 是真的“无法捕获”；任何可以在 .NET 中抛出的东西都派生自 Exception，因此可以被捕获。但是，很多东西*不应该*被抓住。因此你的问题；如何区分？

我遵循的一般规则是“捕获您期望并知道如何处理的异常”。这需要你首先知道你的代码*会*抛出什么。MSDN 文档通常非常擅长说明各种框架方法在什么情况下会抛出什么；除非您正在开发一个供其他编码人员使用的中间库（或者您的管理/领导对适当的文档非常感兴趣），否则您自己的代码库可能没有那么完善的文档记录。

一旦你知道代码*可以*抛出什么，确定你应该捕获什么（如果有的话）。异常捕获，又名“Pokemon 处理”（Gotta catch 'em all）通常是一件坏事，因为有正当的理由让您的应用程序死气沉沉并让用户重新启动它。示例包括 StackOverflowExceptions、OutOfMemoryExceptions 和各种 Win32Exceptions，详细说明了为您的程序提供请求的资源的一些内部故障。你通常无法以任何有意义的方式从这些中恢复过来。

然而，大多数错误并不那么严重。当找不到文件，或者网络连接被拒绝或意外关闭，或者当你尝试对一个类型做某事而不检查 null 时抛出异常（当检查 null 失败时会发生什么？通常你可以'不要继续，必须抛出你自己的异常）。这些是您应该期待、捕捉并至少以某种可以理解的方式与最终用户交流的东西。

在许多情况下，try/throw/catch 对于预期但不是日常情况是有用的工具；如果您在等待结果时收到超时异常，而通常获取结果没有问题，那么甚至不要告诉用户有问题；再试一次。如果您可以（应该？）在无法评估计算时插入一些默认值（除以零，可能产生非真实结果但代码无法处理它们的数学等），然后这样做。

但是，我可以想到一种情况，您必须捕获并重新抛出，那就是在涉及数据库事务的情况下。如果您正在执行一个大型“工作单元”，其中一个数据库事务处理多个持久性操作，那么如果出现*任何*问题，您应该回滚数据库事务。在这种情况下，操作应该被包围在一个 try-catch(Exception) 块中，该块捕获异常、回滚事务并重新抛出。您可以正常处理的任何异常都应使用嵌套的 try-catch 进行处理，或者应在可能以这种方式失败的操作之前检查条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T19:39:46.207

您的问题是一个合理的问题，但遗憾的是，通常没有真正好的答案。C++ 中异常范式的一个主要弱点是它在异常对象的*类型*中封装了太多，不幸的是，它一直延续到其他语言和框架中。在 C++ 中，这是可以理解的，因为 Bjarne Stroustrup 希望避免将任何非原始类型“硬编码”到语言中；鉴于这种限制，C++ 设计可能是最好的。尽管如此，这样的设计施加了一些严重的限制。

最大的问题是正在考虑捕获和处理异常，然后吞下或重新抛出异常的代码可能对许多事情感兴趣：

1.  发生了什么阻止代码按预期运行
2.  针对这种情况应该采取什么行动
3.  采取各种措施后，是否应将条件视为“已解决”
4.  如果人们对系统状态的任何方面的假设进行调整，超出方法失败所暗示的范围（例如，如果文件“foo/bar”无法读取，则失败的性质可能会影响是否尝试读取“foo”的决定/boz”）。

在 Java 和 .net 中，期望应该使用异常类型来指示上面的 #1，并且没有标准的异常方法来回答 #2 和 #3，*即使它们在许多情况下远比“什么”重要得多发生了”*。如果尝试加载文档但出现问题，99% 的时间系统将处于与加载尝试之前相同的状态，因此该异常，无论其类型如何，基本上意味着“文件不是可读且无法加载”。此外，在剩下的 1% 的时间里，除了加载文件失败之外发生了“坏”的事情，异常类型完全有可能与 99% 中抛出的异常类型相同。

如果没有一些新的异常处理功能，最好的办法可能是，在可能的范围内，具有指示状态损坏的异常使系统状态的损坏部分无效，以便将来对这些部分的所有操作同样会引发异常。这种行为意味着代码无法处理的异常最终会导致系统崩溃（因为代码将继续尝试使用已损坏的部分状态），同时允许代码从它应该恢复的事物中恢复（例如，如果由于正在构建的对象中的损坏而发生异常，并且如果异常导致代码放弃正在构建的对象，则这种放弃足以“处理”异常，因此可以并且应该继续执行）。

# php - 使用 Codeigniter 对查询结果进行分页

> ID：14201708
> 
> 赞同：0
> 
> 时间：2013-01-07T18:19:46.747
> 
> 标签：php, mysql, codeigniter, pagination

一般来说，我是 Codeigniter 和 PHP 的新手，所以请耐心等待。

我正在尝试使用 codeigniter 分页类对查询返回的结果进行分页。下面的代码适用于不需要传递任何参数的静态查询。但是，当尝试将变量作为 URL 中的参数传递时，它似乎崩溃了，例如

```
localhost/index.php/termsbyletter/index/a 
```

其中“a”是传递给控制器​​/模型的 $letter 变量。

PHP 没有输出任何错误，并且查询按预期执行，模型中的 record_count 函数也是如此。结果是所有的查询结果都显示出来了，但都在同一个页面上，点击分页链接时保持不变。

此外，在模型中，是否有比运行两次查询更有效的返回行数的方法？我在这里读到这是必要的，我没有成功尝试以任何其他方式传递这个值。

这是我的控制器：

```
 <?php

class Termsbyletter extends CI_Controller
{
    public function __construct() {
        parent:: __construct();
        $this->load->helper("url");
        $this->load->model("terms_by_letter");
        $this->load->library("pagination");
    }

    public function index($letter) {

        $config = array();
        $config["base_url"] = base_url() . 'index.php/termsbyletter/index/' . $letter;
        $config["total_rows"] = $this->terms_by_letter->record_count($letter);
        $config["per_page"] = 3;
        $config["uri_segment"] = 5;

        $this->pagination->initialize($config);

        $page = ($this->uri->segment(5)) ? $this->uri->segment(5) : 0;
        $data["results"] = $this->terms_by_letter->term($config["per_page"], $page, $letter);
        echo $this->pagination->create_links();

        $this->load->view("/templates/header"); 
        $this->load->view("/terms/index", $data);  
        $this->load->view("/templates/footer"); 
       }
} 
```

和模型：

```
class Terms_by_letter extends CI_Model
 {
    public function __construct() {
        parent::__construct();
            $this->load->database();
          }

    public function record_count($letter) {

          $query = $this->db->query("SELECT * FROM news WHERE LEFT(slug, 1) = '$letter'");
             return $query->num_rows();      
          }

    public function term($limit, $start, $letter) {

          $this->db->limit($limit, $start);
          $query = $this->db->query("SELECT * FROM news WHERE LEFT(slug, 1) = '$letter'");

              if ($query->num_rows() > 0) {
              foreach ($query->result() as $row) {
                 $data[] = $row;

            }
            return $data;
        }
        return false;

    }
 } 
```

我正在使用这样的东西在视图中输出结果：

```
 <?php
foreach($results as $data) {
    echo $data->slug "<br>";
}
?>
   <p><?php echo $links; ?></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:28:24.670

您正在尝试将活动记录与普通 CI 查询混合使用，但这是行不通的。将查询更改为：

```
$query = $this->db->query("SELECT * FROM news WHERE LEFT(slug, 1) = '$letter' LIMIT $start, $limit"); 
```

要么完全走活动记录路线：

```
$this->db->limit($limit, $start);
$this->db->where('LEFT(slug,1)',$letter);
$this->db->get('news'); 
```

据我所知，没有办法通过单个查询返回您需要的所有结果，控制器需要总记录来计算分页，然后它只需要选择一页的记录。

但是，您可以只编写一次查询并稍微更改参数。

```
public function term($limit, $start, $letter) {
if($limit > 0)
{
    $this->db->limit($limit, $start);
}
$this->db->where('LEFT(slug,1)',$letter);
$this->db->get('news'); 
```

然后在你的控制器中你会得到这样的计数：

```
$config["total_rows"] = $this->terms_by_letter->term(0,0,$letter); 
```

# c++ - 创建单个 .o 文件

> ID：14201710
> 
> 赞同：0
> 
> 时间：2013-01-07T18:19:55.650
> 
> 标签：c++, compiler-construction, makefile, g++

> **可能重复：**
> [如何在 linux 中编译静态库](https://stackoverflow.com/questions/2734719/howto-compile-a-static-library-in-linux)

我正在尝试编译一个将被进一步使用的库。

对于这个库的每个 cpp 文件，都生成一个 .o 文件。如何仅使用一个 .o 文件进行相同的编译？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:39:09.590

您不能从多个 C++ 源文件构建单个 .o 文件。编译器无法处理。

如果库带有适当的构建基础设施（如 Makefiles），则应该创建一个`libXXX.a`或`libXXX.so`文件，您可以从自己的项目中引用该文件。

如果库本身*没有*创建 lib 文件，您可以使用

```
ar -r libXXX.a <list of .o files> 
```

# php - 如何转换各种“hm s” Excel 时间格式？

> ID：14201712
> 
> 赞同：0
> 
> 时间：2013-01-07T18:20:06.533
> 
> 标签：php, cakephp, time, formatting

我有一个要导入的 Excel 表，但我希望将一些数据转换为分钟。虽然格式各不相同，但我`5h 5m 6.64s`如何`6.64s`能够在 PHP 中将其转换为仅几分钟？（我肯定`DateTime::createFromFormat()`不会工作，因为它的范围是从 0 到 59。）

是否将转换为分钟是一种更容易在 PHP 应用程序中操作和绘制图形的格式，或者将其转换为 PHP 类中的某个时间对象更好？

请记住，必须对数据进行格式化，然后将其导入 MySQL 服务器，然后读回 PHP 应用程序以绘制图表以用于统计目的。我也在使用 cakePHP 框架来构建应用程序。感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:29:37.290

如果所有时间都有像 hms 这样的格式（其中任何一个都是可选的），我认为提取数字一点也不难。这可以通过一个简单的正则表达式来完成，例如：

```
/(([0-9]{1,2})h)?(([0-9]{1,2})m)?(([0-9]{1,2}\.[0-9]{0,2})s)?/ 
```

然后您可以简单地将这些数字放入 PHP 的`DateTime`对象中。并将其转换为存储在数据库中的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T12:05:05.883

如果字符串的不同部分总是用空格分隔，您可以简单地使用：

```
$timeParts = explode(' ', $timestring); //Separates your time string in parts
//To sum these parts into a total number of minutes:
//First make an array with all multiplication factors to go from part of string to a number of minutes
$factors = array(1/60, 1, 60, 60*24); //Last value is for days, which are probably not necessary.

//Iterate through the $timeParts array
$minutes = 0;  //Create $minutes variable, so we can add minutes to it for each string part
while($part = array_pop($timeParts)) { //Process each part of the string, starting from the end (because seconds will always be there even if minutes aren't)
    $part = floatval($part);   //I guess your numbers will technically be strings, so we need to convert them to floats (because the seconds need to be floats). Also, this function should strip off any letters appended to your numbers.
    $factor = array_shift($factors);  //Take the first part of the $factors array (because in that array the seconds are first, then minutes and so on)
    $minutes += ($part * $factor);  //Multiply the string part by its matching factor and add the result to the $minutes variable.
} 
```

我还没有测试过，所以你需要自己调试它。

# java - JavaFX 2 - GridPane 上的 ProgressIndicator 覆盖

> ID：14201715
> 
> 赞同：1
> 
> 时间：2013-01-07T18:20:08.467
> 
> 标签：java, javafx-2, javafx, progress

在`JavaFX 2`您可以使用 a`ProgressInidicator`来显示一些后台任务正在进行中。

我想以`ProgressIndicator`a 为中心显示`GridPane`，以便它覆盖`GridPane`. 在 Swing 中，您可以使用`GlassPane`它。我如何在 JavaFX 2 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:29:23.080

您可以使用 StackPane。有关布局的信息，请参阅[内置布局窗格](http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm)。

# testing - 如何在没有提交按钮的 Geb (WebDriver) 中提交表单

> ID：14201716
> 
> 赞同：5
> 
> 时间：2013-01-07T18:20:10.930
> 
> 标签：testing, groovy, web, webdriver, geb

我正在 Geb (WebDriver) 中建立一个测试，该测试需要使用没有提交按钮的表单。从用户的角度来看，使用起来就像输入搜索词并按键盘上的回车键一样简单。

以纯脚本形式使用 Geb，我可以通过将特殊键代码附加到正在输入的文本中来解决此问题，如下所示：

```
import org.openqa.selenium.Keys

$('input[id=myInputField]') << "michael"+Keys.ENTER 
```

这很好用。但是如果我想使用 Geb 推荐的页面对象模式 (http://www.gebish.org/manual/0.7.1/pages.html#the_page_object_pattern)，我看不出我应该做什么。我在 EmployeeSearchPage 对象的内容部分定义什么来复制丢失的 searchButton 及其告诉 Geb 如何处理结果页面的“to”对象引用？

```
class EmployeeSearchPage extends Page {
    static url = "http://localhost:8888/directory/"
    static at = { title == "Employee Directory" }
    static content = {
        searchField { $("input[id=myInputField]") }
        // THE FOLLOWING BUTTON DOESN'T EXIST IN MY CASE
        searchButton(to: EmployeeListPage) { $("input[value='SUBMIT']") }
    }
} 
```

我意识到我可以在表单中添加一个提交按钮来进行测试，并使用 CSS 将其置于用户视图之外，但为什么我必须让应用程序适应测试呢？事情应该反过来。

我一直在评估许多 Web 测试框架，发现这种类型的表单对其中许多人来说是个问题——至少就他们的文档而言。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T13:06:58.253

你不需要使用js集成来实现你想要的。

您还可以在页面类上定义方法，而不仅仅是内容。您可以实现一个提交方法，该方法将通过以下方式执行您正在寻找的内容：

```
class EmployeeSearchPage extends Page {
    static url = "http://localhost:8888/directory/"
    static at = { title == "Employee Directory" }
    static content = {
        searchField { $("input[id=myInputField]") 
    }

    void submitForm() {
        searchField << Keys.ENTER
        browser.page EmployeeSearchResultsPage
    }
} 
```

然后使用它：

```
to EmployeeSearchPage
searchField << 'michael' // searchField = 'michael' would have the same effect
submitForm() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T07:56:31.987

Geb 支持在浏览器上下文中执行 JavaScript，详细信息可以[在 Geb 文档](http://www.gebish.org/manual/0.7.2/javascript.html)中找到。

您可以使用它来提交表单，就像在 webapp 本身中使用 JavaScript 提交表单一样。例如，如果您使用 jQuery，它会很简单：

```
js.exec('$("#myForm").submit()') 
```

# ruby-on-rails - 用于为 Web 应用程序创建左/右滚动通知查看器的 Gem？

> ID：14201717
> 
> 赞同：0
> 
> 时间：2013-01-07T18:20:13.197
> 
> 标签：ruby-on-rails, ruby, notifications, alerts

我是 Ruby on Rails 的新手，所以请多多包涵。

我正在为用户创建一个用于交易卡的网络应用程序，并希望在用户的主页中包含一个通知部分，该部分根据可能的交易匹配和其他内容（如新消息）为用户显示相关警报。该功能需要根据某些触发器生成警报（用户 B 接受交易，向用户 A 提议交易，用户 B 向用户 A 发送消息，甚至可能包含赞助帖子）。这基本上就像iOS上的“通知中心”一样。

我做了一个快速的模型：http: [//i.imgur.com/hQ3Fc.jpg](http://i.imgur.com/hQ3Fc.jpg)（或者如果它太大了——> [http://imgur.com/hQ3Fc）——](http://imgur.com/hQ3Fc)不允许我嵌入图像，因为我是新来的 ：（

所以想法是视图在任何给定时间（给予或接受）可能会有 5-15 个警报，并且可以使用这些左/右箭头滚动它们。警报将是一条基本消息，带有指向相关页面的链接，或者对于诸如交易评级之类的内容，具有“打开”消息以填充查看器并显示必要的功能。

希望我解释得很好。任何人都知道任何可能使构建变得更容易的事情吗？请让我知道我在问这个问题时是否遗漏了任何信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:34:33.383

不确定我是否得到您想要做的事情，但如果我理解正确，这可能会有所帮助。我使用[了 swipe.js](http://swipejs.com/)，它很容易使用，应该让你开始使用可滑动/可滚动的界面。

# c++ - 动态 2D Ogre3D 纹理

> ID：14201718
> 
> 赞同：3
> 
> 时间：2013-01-07T18:20:21.107
> 
> 标签：c++, objective-c, ipad, 3d, ogre

我正在尝试为我的 Ogre 场景创建一个 2D 背景，为 QCAR SDK 渲染相机帧。这是在装有 iOS 6 的 iPad 上。

目前我正在renderFrameQCAR中检索像素数据：

```
const QCAR::Image *image = camFrame.getImage(1);

if(image) {
    pixels = (unsigned char *)image->getPixels();
} 
```

这将返回 RGB888 格式的像素，然后在 renderOgre() 函数中将其传递给我的食人魔场景：

```
if(isUpdated)
     scene.setCameraFrame(pixels);
scene.m_pRoot->renderOneFrame(); 
```

setCameraFrame(pixels) 函数包括：

```
void CarScene::setCameraFrame(const unsigned char *pixels)
{
    HardwarePixelBufferSharedPtr pBuffer = m_pBackgroundTexture->getBuffer();

    pBuffer->lock(HardwareBuffer::HBL_DISCARD);
    const PixelBox& pBox = pBuffer->getCurrentLock();

    PixelBox *tmp = new PixelBox(screenWidth, screenHeight, 0, PF_R8G8B8, &pixels);
    pBuffer->blit(pBuffer, *tmp, pBox);
    pBuffer->unlock();

    delete tmp;
} 
```

在这个函数中，我试图创建一个新的 PixelBox，将像素复制到其中，然后将其复制到 pixelBuffer 上。

当我第一次创建我的 Ogre3D 场景时，我像这样设置 m_pBackgroundTexture 和背景 rect2d：

```
void CarScene::createBackground()
{
    m_pBackgroundTexture = TextureManager::getSingleton().createManual("DynamicTexture", ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME, TEX_TYPE_2D, m_pViewport->getActualWidth(), m_pViewport->getActualHeight(), 0, PF_R8G8B8, TU_DYNAMIC_WRITE_ONLY_DISCARDABLE);

    m_pBackgroundMaterial = MaterialManager::getSingleton().create("Background", ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME);

    m_pBackgroundMaterial->getTechnique(0)->getPass(0)->createTextureUnitState("DynamicTexture");
    m_pBackgroundMaterial->getTechnique(0)->getPass(0)->setSceneBlending(SBT_TRANSPARENT_ALPHA);
    m_pBackgroundMaterial->getTechnique(0)->getPass(0)->setDepthCheckEnabled(false);
    m_pBackgroundMaterial->getTechnique(0)->getPass(0)->setDepthWriteEnabled(false);
    m_pBackgroundMaterial->getTechnique(0)->getPass(0)->setLightingEnabled(false);

    m_pBackgroundRect = new Rectangle2D(true);

    m_pBackgroundRect->setCorners(-1.0, 1.0, 1.0, -1.0);
    m_pBackgroundRect->setMaterial("Background");
    m_pBackgroundRect->setRenderQueueGroup(RENDER_QUEUE_BACKGROUND);

    AxisAlignedBox aabInf;
    aabInf.setInfinite();

    m_pBackgroundRect->setBoundingBox(aabInf);

    SceneNode* node = m_pSceneManager->getRootSceneNode()->createChildSceneNode();
    node->attachObject(m_pBackgroundRect); 
```

}

在这之后，我得到的只是一个没有纹理的白色背景，我不知道为什么这不显示输出！我的目标只是让相机在后台渲染，这样我就可以将我的 3d 模型投影到它上面。

谢谢，哈利。

# hlsl - 模板缓冲区测试设置 DirectX9

> ID：14201722
> 
> 赞同：0
> 
> 时间：2013-01-07T18:20:37.920
> 
> 标签：hlsl, directx-9, stencil-buffer

我有一个函数可以呈现所需颜色的三角形。我正在尝试渲染一个黄色三角形，然后在其上渲染一个红色三角形，并启用模板测试。我使用一个圆圈作为我的模板窗口。我的模板测试方程和操作应该是什么以获得以下输出。仅在 DirectX09 中进行所有渲染。 [期望的输出](http://i.stack.imgur.com/LzUMM.jpg) 请指导以下 API 的几个好的和简单的示例......

`SetRenderState(D3DRS_STENCILFUNC,`
`SetRenderState(D3DRS_STENCILREF,`
`SetRenderState(D3DRS_STENCILMASK,`
`SetRenderState(D3DRS_STENCILWRITEMASK,`
`SetRenderState(D3DRS_STENCILZFAIL,`
`SetRenderState(D3DRS_STENCILFAIL`,
`SetRenderState(D3DRS_STENCILPASS,`

我们如何在 DirectX09 着色器效果文件（vs_3_0 和 ps_3_0）中使用 Stencil 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T11:12:38.583

渲染状态的[文档](http://msdn.microsoft.com/de-de/library/windows/desktop/bb172599%28v=vs.85%29.aspx)应该回答您的大部分相关问题。

要创建模板蒙版，您需要方法

```
SetRenderState(D3DRS_STENCILZFAIL,D3DSTENCILOP_KEEP)
SetRenderState(D3DRS_STENCILFAIL,D3DSTENCILOP_INCRSAT)
SetRenderState(D3DRS_STENCILPASS,D3DSTENCILOP_INCRSAT)
SetRenderState(D3DRS_STENCILFUNC,D3DCMP_ALWAYS) 
```

因为他们在渲染你的圆圈时增加了模板缓冲区。然后你在不使用模板缓冲区的情况下绘制你的黄色三角形。之后你用

```
SetRenderState(D3DRS_STENCILZFAIL,D3DSTENCILOP_KEEP)
SetRenderState(D3DRS_STENCILFAIL,D3DSTENCILOP_KEEP)
SetRenderState(D3DRS_STENCILPASS,D3DSTENCILOP_KEEP)
SetRenderState(D3DRS_STENCILFUNC,D3DCMP_LESS)    
SetRenderState(D3DRS_STENCILREF,0) 
```

所以你的 stenciltest 只返回 true，你的圆圈之前已经画过（应该有 stencilvalue 更大的 0）。如果在那之后没有正确绘制，您应该尝试停用 Z-Test，也许您的三角形顺序不正确。

> 我们如何在 DirectX09 着色器效果文件（vs_3_0 和 ps_3_0）中使用 Stencil 操作？

模板操作仅在您的主程序代码中使用。着色器不能对模板测试产生任何影响。

# javascript - 在 JavaScript 中动态创建变量

> ID：14201723
> 
> 赞同：0
> 
> 时间：2013-01-07T18:20:39.087
> 
> 标签：javascript, variables

我有一个脚本，它创建一个名为`eventData1`. 在事件部分，`events`创建。我想动态地完成这项工作，而不是静态地放在 html 文件中。

```
 var eventData1 = {
          options: {
            timeslotsPerHour: 4,
            timeslotHeight: 20,
            defaultFreeBusy: {free: true}
          },
          events : 
            {'id':1, 'start': new Date(year, month, day, 12), 'end': new Date(year, month, day, 13, 30), 'title': 'Lunch with Mike', userId: 0},
            {'id':2, 'start': new Date(year, month, day, 14), 'end': new Date(year, month, day, 14, 45), 'title': 'Dev Meeting', userId: 1},
            {'id':3, 'start': new Date(year, month, day+1, 18), 'end': new Date(year, month, day+1, 18, 45), 'title': 'Hair cut', userId: 1},
            {'id':4, 'start': new Date(year, month, day+2, 8), 'end': new Date(year, month, day+2, 9, 30), 'title': 'Team breakfast', userId: 0},
            {'id':5, 'start': new Date(year, month, day+1, 14), 'end': new Date(year, month, day+1, 15), 'title': 'Product showcase', userId: 1}
          ]
    }; 
```

因此，我的文件创建了另一个名为 的变量`appointments`，其设置与您在上面看到的完全一样：

```
[{'id': 25, 'start': new Date( '2013-01-07 14:45:00'), 'end': new Date('2013-01-07 15:45:00'), 'title': 'test appointment from javascript', userId: 0},{'id': 26, 'start': new Date( '2013-01-10 11:15:00'), 'end': new Date('2013-01-10 12:15:00'), 'title': 'test appointment from javascript', userId: 0}] 
```

如何用我的`appointments`变量替换静态创建的事件？

我试过了，但没有奏效：

```
 var eventData1 = {
          options: {
            timeslotsPerHour: 4,
            timeslotHeight: 20,
            defaultFreeBusy: {free: true}
          },
          events : appointments
    }; 
```

编辑：马特是对的，约会变量在范围内，但尚未设置：

```
 var appointments = "[";
  var counter = 0;
   $.getJSON('link', function(data) {
        console.log('entered getJSON()');
        console.log(data);
        $.each(data, function(i, appointment) {
            var id = appointment.appointmentId;
            var start = appointment.start;
            var end = appointment.end;
            var title = appointment.prename;
            var userid = appointment.workerid;

            appointments += "{'id': " + id + ", 'start': new Date( '" + start+ "'), 'end': new Date('" + end + "'), 'title': 'test appointment from javascript', userId: 0}";

            if (i === (data.length - 1)) {
                // this is the last                    
            } else {
                appointments += ",";
            }             
            counter++;
        });

        appointments += "]";

    console.log(appointments);
    }); 
```

知道在其他代码使用它之前我可以做些什么来设置它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:01:56.853

我对文件中代码的哪一部分有点困惑，但我猜你向服务器发出请求，然后设置`eventData1`并处理服务器响应。

Javascript 字符串是不可变的，因此当您修改时`appointments` `eventData1.events`不会更新。看这个例子：

```
var str = "hi";
var obj = {myString: str}; // obj.myString = "hi"
str = "hello"; // obj.myString is still "hi" 
```

“hi”字符串不更新，因为它是不可变的，它被一个新字符串覆盖。

因此，您可以做的一件事是`eventData.events`显式更新并为其分配新值`appointments`。

但是既然`appointments`是 Javascript 数组的字符串表示，为什么不使用数组来代替呢？所以而不是

```
appointments += "{'id': " + id + ", 'start': new Date( '" + start+ "'), 'end': new Date('" + end + "'), 'title': 'test appointment from javascript', userId: 0}"; 
```

利用

```
appointments = []; // Do this outside of the $.each
... 
appointments.push(appointments += "{'id': " + id + ", 'start': new Date( '" + start+ "'), 'end': new Date('" + end + "'), 'title': 'test appointment from javascript', userId: 0}"); 
```

# ruby-on-rails - Datamapper IS NOT NULL 查询

> ID：14201724
> 
> 赞同：0
> 
> 时间：2013-01-07T18:20:45.930
> 
> 标签：ruby-on-rails, ruby, datamapper

如何编写activerecord语句，

```
Comments.where("attachment IS NOT NULL") 
```

在数据映射器中

即，我想`"SELECT * FROM comments WHERE attachment IS NOT NULL;`在 Rails 中使用 DataMapper 执行。

请帮忙; 我对DM不太熟悉！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T19:08:26.750

使用旧的 AR 2.3 语法应该适合你

```
Comment.all(:conditions => 'attachment IS NOT NULL') 
```

或者，您可以使用`not`符号上可用的方法进行 DataMapper 查询：

```
Comment.all(:attachment.not => nil) 
```

# javascript - 如何使 onchange 事件发生在 ASP.NET 的代码隐藏中？

> ID：14201727
> 
> 赞同：0
> 
> 时间：2013-01-07T18:21:08.120
> 
> 标签：javascript, asp.net

假设我有一个文本框 Mytbx，并且我有一个用于其 onchange 事件的 javascript。我将它连接到 Page_Load 事件后面的代码中，例如：

```
Mytbx.Attributes.Add("onchange", "test();") 
```

然后我更改了此文本框的代码隐藏文本，例如（在按钮单击事件中）：

```
Mytbx.Text = MyValue 
```

我希望 onchange 事件被触发。但实际上，并非如此。当我单击按钮更改 Mytbx 的值时，没有任何反应。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:32:46.790

仅当您直接键入内容并离开文本框时，才会在客户端触发 onchange。因此，当您在后面的代码中设置文本框值时，什么都不会发生。

如果要在客户端处理文本更改事件：

```
<script>  
     function test(txt){
         alert(txt.value);
     };
</script>

<asp:TextBox ID="txt" runat="server" onchange="test(this);"></asp:TextBox> 
```

如果要在服务器端处理文本更改事件，可以这样做：

HTML：

```
<asp:TextBox ID="txt" runat="server" OnTextChanged="txt_OnTextChanged" AutoPostBack="true"></asp:TextBox> 
```

CS：

```
protected void txt_OnTextChanged(object sender, EventArgs e)
{
     // Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:25:40.053

您正在混合客户端和服务器处理。如果您更改服务器上的文本框，则没有客户端代码可以运行，因为您还没有将表单发回。如果您在服务器上更改某些内容时必须运行 javascript 代码，则需要注册该 Javascript 函数以在回发完成后页面加载时运行。看看这个：http: [//msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.registerstartupscript(v=vs.110).aspx)

# javascript - 使用 JavaScript 和 HTML5 扭曲信封

> ID：14201731
> 
> 赞同：0
> 
> 时间：2013-01-07T18:21:19.237
> 
> 标签：javascript, html, css, canvas

是否可以使用 JavaScript 和 HTML5 对图片或路径进行信封变形。有没有可用的图书馆，或者你能指出我正确的方向。

这是使用 flash 和 actionscript 的示例。 [http://www.neuroproductions.be/experiments/envelope-distort-with-actionscript/](http://www.neuroproductions.be/experiments/envelope-distort-with-actionscript/)

[http://www.neuroproductions.be/uploads/blog/examples/envelope_distort/EnvelopeDistortTest.swf](http://www.neuroproductions.be/uploads/blog/examples/envelope_distort/EnvelopeDistordTest.swf)

提前致谢。

# emacs - 用在区域上调用函数的结果替换区域

> ID：14201740
> 
> 赞同：3
> 
> 时间：2013-01-07T18:22:10.630
> 
> 标签：emacs, elisp

我将如何编写一个交互式函数，该函数接受一个函数并将当前选定的区域替换为在该区域上调用该函数的结果。

我看到了这个答案： [https ://stackoverflow.com/a/6539916/625365](https://stackoverflow.com/a/6539916/625365)

但这是每行调用一次函数，而不是给它区域作为参数，而且它看起来像很多代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T19:08:38.410

我认为你可以做一些诡计`filter-buffer-substring`，但这似乎是一个晦涩的功能，至少对我来说。另一方面，直接在 Emacs Lisp 中这样做似乎并不复杂：

```
(defun apply-function-to-region (fn)   
  (interactive "XFunction to apply to region: ")   
  (save-excursion
    (let* ((beg (region-beginning))
           (end (region-end))
           (resulting-text 
            (funcall 
             fn 
             (buffer-substring-no-properties beg end))))
      (kill-region beg end)
      (insert resulting-text)))) 
```

然后，您可以使用接受和生成文本的函数（例如`capitalize`），并将区域大写。该函数将要求应用一个函数。最后，将删除的文本保存在 kill ring 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:57:08.303

```
(defun apply-to-region (func)
  (unless (use-region-p)
    (error "need an active region"))
  (delete-region (region-beginning) (region-end))
  (insert (funcall func)))

(defun foo ()
  ""
  "foobar")

(defun my/test ()
  (interactive)
  (apply-to-region 'foo)) 
```

要对其进行测试，请选择一些文本并运行`M-x``my/test``RET`.

# javascript - 鼠标悬停在 TD 上时更改 CSS 的颜色

> ID：14201744
> 
> 赞同：3
> 
> 时间：2013-01-07T18:22:32.310
> 
> 标签：javascript, css, html-table

我正在开发一个带有大表（18 行 x 11 列）的站点。为了让正在查看该表格的人更容易，我将其悬停在 TR 的不同颜色上：

```
.responsive tr:hover {
    background-color: red;
} 
```

但我想对专栏做同样的事情。但如果我使用`.responsive td:hover {background-color: blue;}`，它只会悬停单个 TD，而不是整个列。至少，每个 TD 都有类`col1`,`col2`等。

悬停 TD 时如何更改 CSS 属性。如果可能的话，我可以在悬停TD时更改`background-color`from 类。`col1``col1`

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:26:29.120

HTML 或 CSS 中没有列的概念。

您必须使用 javascript 来做到这一点。

这是使用 jQuery 的解决方案：

```
var clean = function(){
   $('td').removeClass('colHover');
}
$('td').hover(
    function() {
       clean();
       $('td:nth-child('+($(this).index()+1)+')').addClass('colHover');
    }, clean
); 
```

[示范](http://jsfiddle.net/KCDzX/)

* * *

现在，主要是为了好玩，如果你想处理 colspan，你可以这样做：

```
var clean = function(){
   $('td').removeClass('colHover');
}
$('td').hover(
    function() {
       clean();
       var col = 0;
      $(this).prevAll().each(function(){col += parseInt($(this).attr('colspan')||'1')});
      $('tr').each(function(){
        var c = 0, done = false;
        $('td',this).each(function(){
          if (c>col && !done) {
            $(this).prev().addClass('colHover');
            done = true;
          }
          c += parseInt($(this).attr('colspan')||'1');
        });
        if (!done) $(this).find('td:last-child').addClass('colHover');
      });
    }, clean
); 
```

[示范](http://jsfiddle.net/7VWjk/)

# php - 使用 HTML 表单、cURL 和 PHP 将文件上传到 Imageshack API

> ID：14201745
> 
> 赞同：3
> 
> 时间：2013-01-07T18:22:47.913
> 
> 标签：php, curl, imageshack

我在将文件上传到 Imageshack 的 API 时遇到了一些问题。我使用 multipart/form-data 表单来获取文件。

索引.php：

```
<form method="post" enctype="multipart/form-data" action="upload.php">
    <input type="file" name="fileupload"/>
    <input type="submit" value="Go"/>
</form> 
```

通常我对此没有任何问题，但是必须将数据发送到[http://imageshack.us/upload_api.php](http://imageshack.us/upload_api.php)并且响应会在他们服务器上的 XML 样式的 HTML 页面中返回，所以我真的无能为力它。所以我决定通过 PHP cURL 脚本传递表单并在同一页面上获得响应。

上传.php：

```
<?php
    $url = 'http://imageshack.us/upload_api.php';
    $key = '4BEILRTV5ff57ecb70867e8becb2c4b5e695bdb4';
    $max_file_size = '5242880';
    $temp = $_FILES["fileupload"]["tmp_name"];
    $name = $_FILES["fileupload"]["name"];

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_VERBOSE, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, true);

    $post = array(
        "fileupload" => '@' . $temp,
        "key" => $key,
        "max_file_size" => $max_file_size
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
    $response = curl_exec($ch);
    echo $response;
?> 
```

起初我收到一堆错误，但现在我没有得到任何回应。甚至没有错误。

任何有关使用此方法的建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:04:18.207

我必须在帖子选项中包含“格式”=>“json”并使用 json_decode 来解析信息。这是upload.php 脚本。

```
<?php
    $url = 'http://imageshack.us/upload_api.php';
    $key = '4BEILRTV5ff57ecb70867e8becb2c4b5e695bdb4';
    $max_file_size = '5242880';
    $temp = $_FILES["fileupload"]["tmp_name"];

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_URL, $url);

    $post = array(
        "fileupload" => '@' . $temp,
        "key" => $key,
        "format" => 'json',
        "max_file_size" => $max_file_size,
        "Content-type" => "multipart/form-data"
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
    $response = curl_exec($ch);
    $json_a=json_decode($response,true);
    echo $json_a[links][image_link];
?> 
```

# asp.net - 引导模式 + 不显眼的客户端验证

> ID：14201749
> 
> 赞同：1
> 
> 时间：2013-01-07T18:23:26.390
> 
> 标签：asp.net, twitter-bootstrap, unobtrusive-validation

在我们的 ASP.NET MVC 4 项目中，我们使用引导模式弹出来获取用户的一些输入，是否有可能使用不显眼的客户端验证在弹出窗口中显示验证摘要中的错误？

# angularjs - 如何/何时使用 ng-click 调用路由？

> ID：14201753
> 
> 赞同：244
> 
> 时间：2013-01-07T18:23:39.677
> 
> 标签：angularjs, routes, angularjs-routing, angularjs-ng-click, angularjs-ng-route

假设您正在使用路线：

```
// bootstrap
myApp.config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {

    $routeProvider.when('/home', {
        templateUrl: 'partials/home.html',
        controller: 'HomeCtrl'
    });
    $routeProvider.when('/about', {
        templateUrl: 'partials/about.html',
        controller: 'AboutCtrl'
    });
... 
```

在您的 html 中，您希望在单击按钮时导航到 about 页面。一种方法是

```
<a href="#/about"> 
```

...但似乎 ng-click 在这里也很有用。

1.  这个假设正确吗？使用 ng-click 代替锚点？
2.  如果是这样，那将如何运作？IE：

`<div ng-click="/about">`

* * *

## 回答 #1

> 赞同：432
> 
> 时间：2013-01-07T19:14:38.933

路由监控`$location`服务并响应 URL 的变化（通常通过哈希）。要“激活”路由，您只需更改 URL。最简单的方法是使用锚标签。

```
<a href="#/home">Go Home</a>
<a href="#/about">Go to About</a> 
```

不需要更复杂的了。但是，如果您必须从代码中执行此操作，则正确的方法是使用该`$location`服务：

```
$scope.go = function ( path ) {
  $location.path( path );
}; 
```

例如，一个按钮可以触发：

```
<button ng-click="go('/home')"></button> 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2013-06-27T16:12:29.420

这是一个没有人提到的很棒的提示。在该功能所在的控制器中，您需要包含位置提供程序：

```
app.controller('SlideController', ['$scope', '$location',function($scope, $location){ 
$scope.goNext = function (hash) { 
$location.path(hash);
 }

;]);

 <!--the code to call it from within the partial:---> <div ng-click='goNext("/page2")'>next page</div> 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-09-25T02:00:04.540

使用自定义属性（通过指令实现）可能是最简洁的方式。这是我的版本，基于@Josh 和@sean 的建议。

```
angular.module('mymodule', [])

// Click to navigate
// similar to <a href="#/partial"> but hash is not required, 
// e.g. <div click-link="/partial">
.directive('clickLink', ['$location', function($location) {
    return {
        link: function(scope, element, attrs) {
            element.on('click', function() {
                scope.$apply(function() {
                    $location.path(attrs.clickLink);
                });
            });
        }
    }
}]); 
```

它有一些有用的功能，但我是 Angular 的新手，所以可能还有改进的空间。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-16T12:36:57.383

请记住，如果您使用 ng-click 进行路由，您将无法右键单击元素并选择“在新选项卡中打开”或 ctrl 单击链接。在导航时，我尝试使用 ng-href。ng-click 更适合用于按钮进行操作或折叠等视觉效果。但关于我不会推荐。如果您更改路线，您可能需要更改很多放置在应用程序中。有一个返回链接的方法。例如：关于。您放置在实用程序中的此方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-08T12:50:43.753

我使用**`ng-click`**指令来调用一个函数，同时请求路由模板Url，以决定哪个`<div>`必须在路由模板Url页面内`show`或`hide`用于不同的场景。

`**`AngularJS 1.6.9`**`

让我们看一个例子，在路由页面中，我需要 add`<div>`或 edit `<div>`，我使用父控制器模型`$scope.addProduct`和`$scope.editProduct`布尔值来控制它。

**路由测试.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Testing</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular-route.min.js"></script>
    <script>
        var app = angular.module("MyApp", ["ngRoute"]);

        app.config(function($routeProvider){
            $routeProvider
                .when("/TestingPage", {
                    templateUrl: "TestingPage.html"
                });
        });

        app.controller("HomeController", function($scope, $location){

            $scope.init = function(){
                $scope.addProduct = false;
                $scope.editProduct = false;
            }

            $scope.productOperation = function(operationType, productId){
                $scope.addProduct = false;
                $scope.editProduct = false;

                if(operationType === "add"){
                    $scope.addProduct = true;
                    console.log("Add productOperation requested...");
                }else if(operationType === "edit"){
                    $scope.editProduct = true;
                    console.log("Edit productOperation requested : " + productId);
                }

                //*************** VERY IMPORTANT NOTE ***************
                //comment this $location.path("..."); line, when using <a> anchor tags,
                //only useful when <a> below given are commented, and using <input> controls
                $location.path("TestingPage");
            };

        });
    </script>
</head>
<body ng-app="MyApp" ng-controller="HomeController">

    <div ng-init="init()">

        <!-- Either use <a>anchor tag or input type=button -->

        <!--<a href="#!TestingPage" ng-click="productOperation('add', -1)">Add Product</a>-->
        <!--<br><br>-->
        <!--<a href="#!TestingPage" ng-click="productOperation('edit', 10)">Edit Product</a>-->

        <input type="button" ng-click="productOperation('add', -1)" value="Add Product"/>
        <br><br>
        <input type="button" ng-click="productOperation('edit', 10)" value="Edit Product"/>
        <pre>addProduct : {{addProduct}}</pre>
        <pre>editProduct : {{editProduct}}</pre>
        <ng-view></ng-view>

    </div>

</body>
</html>
```

**测试页面.html**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .productOperation{
            position:fixed;
            top: 50%;
            left: 50%;
            width:30em;
            height:18em;
            margin-left: -15em; /*set to a negative number 1/2 of your width*/
            margin-top: -9em; /*set to a negative number 1/2 of your height*/
            border: 1px solid #ccc;
            background: yellow;
        }
    </style>
</head>
<body>

<div class="productOperation" >

    <div ng-show="addProduct">
        <h2 >Add Product enabled</h2>
    </div>

    <div ng-show="editProduct">
        <h2>Edit Product enabled</h2>
    </div>

</div>

</body>
</html>
```

两个页面 - `RoutingTesting.html`（父），`TestingPage.html`（路由页面）都在同一个目录中，

希望这会对某人有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-12T13:42:45.070

另一种解决方案，但不使用 ng-click ，即使对于除以下标签之外的其他标签仍然有效`<a>`：

```
<tr [routerLink]="['/about']"> 
```

这样你也可以将参数传递给你的路由：[https ://stackoverflow.com/a/40045556/838494](https://stackoverflow.com/a/40045556/838494)

（这是我使用 Angular 的第一天。欢迎提供温和的反馈）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-19T11:33:41.380

您可以使用：

```
<a ng-href="#/about">About</a> 
```

如果你想在**href**中添加一些动态变量，你可以这样做：

```
<a ng-href="{{link + 123}}">Link to 123</a> 
```

其中**link**是 Angular 范围变量。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-12T20:39:27.143

只需在您的 html 中执行以下操作：

```
<button ng-click="going()">goto</button> 
```

在你的控制器中，添加 $state 如下：

```
.controller('homeCTRL', function($scope, **$state**) {

$scope.going = function(){

$state.go('your route');

}

}) 
```

# perforce - 你写的代码行

> ID：14201754
> 
> 赞同：4
> 
> 时间：2013-01-07T18:23:40.500
> 
> 标签：perforce, lines-of-code

出于好奇，有什么方法可以获取您编写的代码行数（在特定项目中）？

我尝试使用 perforce `p4 describe #CLN | wc -l`，但除了这么多边缘情况（包括注释、添加新行等）之外，它也跳过了新添加的文件。如果我们尝试显示物理代码行但新添加的文件仍然会导致问题，则可以忽略边缘情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-31T22:23:39.873

我继续编写了一个 Python 脚本，它打印出用户添加/更改的代码行数以及每次更改的平均行数。

使用 Python 2.7.2 在 Windows 上测试。您可以从命令行运行 - 它假定您的路径中有 p4。

用法：codestats.py -u [用户名]

它也适用于 git：codestats.py -u [authorname] -g。

它做了一些黑名单来删除批量添加（例如您刚刚添加了一个库），并且还对某些类型的文件（例如 .HTML 文件等）强加了一个黑名单。否则，它工作得很好。

希望这可以帮助！

```
########################################################################
# Script that computes the lines of code stats for a perforce/git user.
########################################################################

import argparse
import logging
import subprocess
import sys
import re

VALID_ARGUMENTS = [
    ("user", "-u", "--user", "Run lines of code computation for the specified user.", 1),
    ("change", "-c", "--change", "Just display lines of code in the passed in change (useful for debugging).", 1),
    ("git", "-g", "--git", "Use git rather than perforce (which is the default versioning system queried).", 0)
]

class PrintHelpOnErrorArgumentParser(argparse.ArgumentParser):
  def error(self, message):
    logging.error("error: {0}\n\n".format(message))
    self.print_help()
    sys.exit(2)

def is_code_file(depot_path):
  fstat_output = subprocess.Popen(['p4', 'fstat', depot_path], stdout=subprocess.PIPE).communicate()[0].split('\n')
  text_file = False
  head_type_regex = re.compile('^... headType (\S+)\s*$')
  for line in fstat_output:
    head_type_line = head_type_regex.match(line)
    if head_type_line:
      head_type = head_type_line.group(1)

      text_file = (head_type.find('text') != -1)

  if text_file:
    blacklisted_file_types = ['html', 'css', 'twb', 'twbx', 'tbm', 'xml']

    for file_type in blacklisted_file_types:
      if re.match('^\/\/depot.*\.{}#\d+$'.format(file_type), depot_path):
        text_file = False
        break

  return text_file

def parse_args():
  parser = PrintHelpOnErrorArgumentParser()

  for arg_name, short_switch, long_switch, help, num_args in VALID_ARGUMENTS:
    if num_args != 0:
        parser.add_argument(
            short_switch,
            nargs=num_args,
            type=str,
            dest=arg_name)
    else:
        parser.add_argument(
            long_switch,
            short_switch,
            action="store_true",
            help=help,
            dest=arg_name)

  return parser.parse_args()

file_edited_regex = re.compile('^... .*?#\d+ edit\s*$')
file_deleted_regex = re.compile('^... .*?#\d+ delete\s*$')
file_integrated_regex = re.compile('^... .*?#\d+ integrate\s*$')
file_added_regex = re.compile('^... (.*?#\d+) add\s*$')
affected_files_regex = re.compile('^Affected files ...')
outliers = [] # Changes that seem as if they weren't hand coded and merit inspection

def num_lines_in_file(depot_path):
  lines = len(subprocess.Popen(['p4', 'print', depot_path], stdout=subprocess.PIPE).communicate()[0].split('\n'))
  return lines

def parse_change(changelist):
  change_description = subprocess.Popen(['p4', 'describe', '-ds', changelist], stdout=subprocess.PIPE).communicate()[0].split('\n')

  parsing_differences = False
  parsing_affected_files = False

  differences_regex = re.compile('^Differences \.\.\..*$')
  line_added_regex = re.compile('^add \d+ chunks (\d+) lines.*$')
  line_removed_regex = re.compile('^deleted \d+ chunks (\d+) lines.*$')
  line_changed_regex = re.compile('^changed \d+ chunks (\d+) / (\d+) lines.*$')
  file_diff_regex = re.compile('^==== (\/\/depot.*#\d+)\s*\S+$')
  skip_file = False

  num_lines_added = 0
  num_lines_deleted = 0
  num_lines_changed_added = 0
  num_lines_changed_deleted = 0
  num_files_added = 0
  num_files_edited = 0

  for line in change_description:
    if differences_regex.match(line):
      parsing_differences = True
    elif affected_files_regex.match(line):
      parsing_affected_files = True
    elif parsing_differences:
      if file_diff_regex.match(line):
        regex_match = file_diff_regex.match(line)
        skip_file = not is_code_file(regex_match.group(1))
      elif not skip_file:
        regex_match = line_added_regex.match(line)
        if regex_match:
          num_lines_added += int(regex_match.group(1))
        else:
          regex_match = line_removed_regex.match(line)

          if regex_match:
            num_lines_deleted += int(regex_match.group(1))
          else:
            regex_match = line_changed_regex.match(line)

            if regex_match:
              num_lines_changed_added += int(regex_match.group(2))
              num_lines_changed_deleted += int(regex_match.group(1))

    elif parsing_affected_files:
      if file_added_regex.match(line):
        file_added_match = file_added_regex.match(line)
        depot_path = file_added_match.group(1)

        if is_code_file(depot_path):
          lines_in_file = num_lines_in_file(depot_path)

          if lines_in_file > 3000:
            # Anomaly - probably a copy of existing code - discard this
            lines_in_file = 0

          num_lines_added += lines_in_file

        num_files_added += 1
      elif file_edited_regex.match(line):
        num_files_edited += 1

  return [num_files_added, num_files_edited, num_lines_added, num_lines_deleted, num_lines_changed_added, num_lines_changed_deleted]

def contains_integrates(changelist):
  change_description = subprocess.Popen(['p4', 'describe', '-s', changelist], stdout=subprocess.PIPE).communicate()[0].split('\n')

  contains_integrates = False
  parsing_affected_files = False

  for line in change_description:
    if affected_files_regex.match(line):
      parsing_affected_files = True
    elif parsing_affected_files:
      if file_integrated_regex.match(line):
        contains_integrates = True
        break

  return contains_integrates

#################################################
# Note: Keep this function in sync with 
# generate_line.
#################################################
def generate_output_specifier(output_headers):
  output_specifier = ''

  for output_header in output_headers:
    output_specifier += '| {:'
    output_specifier += '{}'.format(len(output_header))
    output_specifier += '}'

  if output_specifier != '':
    output_specifier += ' |'

  return output_specifier

#################################################
# Note: Keep this function in sync with 
# generate_output_specifier.
#################################################
def generate_line(output_headers):
  line = ''

  for output_header in output_headers:
    line += '--' # for the '| '
    header_padding_specifier = '{:-<'
    header_padding_specifier += '{}'.format(len(output_header))
    header_padding_specifier += '}'
    line += header_padding_specifier.format('')

  if line != '':
    line += '--' # for the last ' |'

  return line

# Returns true if a change is a bulk addition or a private change
def is_black_listed_change(user, changelist):
  large_add_change = False
  all_adds = True
  num_adds = 0
  is_private_change = False
  is_third_party_change = False

  change_description = subprocess.Popen(['p4', 'describe', '-s', changelist], stdout=subprocess.PIPE).communicate()[0].split('\n')

  for line in change_description:
    if file_edited_regex.match(line) or file_deleted_regex.match(line):
      all_adds = False
    elif file_added_regex.match(line):
      num_adds += 1

    if line.find('... //depot/private') != -1:
      is_private_change = True
      break

    if line.find('... //depot/third-party') != -1:
      is_third_party_change = True
      break

  large_add_change = all_adds and num_adds > 70

  #print "{}: {}".format(changelist, large_add_change or is_private_change)
  return large_add_change or is_third_party_change

change_header_regex = re.compile('^Change (\d+)\s*.*?\s*(\S+)@.*$')

def get_user_and_change_header_for_change(changelist):
  change_description = subprocess.Popen(['p4', 'describe', '-s', changelist], stdout=subprocess.PIPE).communicate()[0].split('\n')

  user = None
  change_header = None

  for line in change_description:
    change_header_match = change_header_regex.match(line)

    if change_header_match:
      user = change_header_match.group(2)
      change_header = line
      break

  return [user, change_header]

if __name__ == "__main__":
  log = logging.getLogger()
  log.setLevel(logging.DEBUG)

  args = parse_args()
  user_stats = {}
  user_stats['num_changes'] = 0
  user_stats['lines_added'] = 0
  user_stats['lines_deleted'] = 0
  user_stats['lines_changed_added'] = 0
  user_stats['lines_changed_removed'] = 0
  user_stats['total_lines'] = 0
  user_stats['files_edited'] = 0
  user_stats['files_added'] = 0

  change_log = []

  if args.git:
    git_log_command = ['git', 'log', '--author={}'.format(args.user[0]), '--pretty=tformat:', '--numstat']
    git_log_output = subprocess.Popen(git_log_command, stdout=subprocess.PIPE).communicate()[0].split('\n')

    git_log_line_regex = re.compile('^(\d+)\s*(\d+)\s*\S+$')
    total = 0
    adds = 0
    subs = 0
    for git_log_line in git_log_output:
      line_match = git_log_line_regex.match(git_log_line)

      if line_match:
        adds += int(line_match.group(1))
        subs += int(line_match.group(2))

    total = adds - subs
    num_commits = 0

    git_shortlog_command = ['git', 'shortlog', '--author={}'.format(args.user[0]), '-s']
    git_shortlog_output = subprocess.Popen(git_shortlog_command, stdout=subprocess.PIPE).communicate()[0].split('\n')

    git_shortlog_line_regex = re.compile('^\s*(\d+)\s+.*$')
    for git_shortlog_line in git_shortlog_output:
      line_match = git_shortlog_line_regex.match(git_shortlog_line)
      if line_match:
        num_commits += int(line_match.group(1))

    print "Git Stats for {}: Commits: {}. Lines of code: {}. Average Lines Per Change: {}.".format(args.user[0], num_commits, total, total*1.0/num_commits)
    sys.exit(0)
  elif args.change:
    [args.user, change_header] = get_user_and_change_header_for_change(args.change)
    change_log = [change_header]
  else:
    change_log = subprocess.Popen(['p4', 'changes', '-u', args.user, '-s', 'submitted'], stdout=subprocess.PIPE).communicate()[0].split('\n')

  output_headers = ['Current Change', 'Num Changes', 'Files Added', 'Files Edited']
  output_headers.append('Lines Added')
  output_headers.append('Lines Deleted')

  if not args.git:
    output_headers.append('Lines Changed (Added/Removed)')

  avg_change_size = 0.0
  output_headers.append('Total Lines')
  output_headers.append('Avg. Lines/Change')

  line = generate_line(output_headers)
  output_specifier = generate_output_specifier(output_headers)

  print line

  print output_specifier.format(*output_headers)
  print line

  output_specifier_with_carriage_return = output_specifier + '\r'

  for change in change_log:
    change_match = change_header_regex.search(change)

    if change_match:
      user_stats['num_changes'] += 1

      changelist = change_match.group(1)

      if not is_black_listed_change(args.user, changelist) and not contains_integrates(changelist):
        [files_added_in_change, files_edited_in_change, lines_added_in_change, lines_deleted_in_change, lines_changed_added_in_change, lines_changed_removed_in_change] = parse_change(change_match.group(1))
        if lines_added_in_change > 5000 and changelist not in outliers:
          outliers.append([changelist, lines_added_in_change])
        else:
          user_stats['lines_added'] += lines_added_in_change
          user_stats['lines_deleted'] += lines_deleted_in_change
          user_stats['lines_changed_added'] += lines_changed_added_in_change
          user_stats['lines_changed_removed'] += lines_changed_removed_in_change
          user_stats['total_lines'] += lines_changed_added_in_change
          user_stats['total_lines'] -= lines_changed_removed_in_change
          user_stats['total_lines'] += lines_added_in_change
          user_stats['files_edited'] += files_edited_in_change
          user_stats['files_added'] += files_added_in_change

      current_output = [changelist, user_stats['num_changes'], user_stats['files_added'], user_stats['files_edited']]

      current_output.append(user_stats['lines_added'])
      current_output.append(user_stats['lines_deleted'])

      if not args.git:
        current_output.append('{}/{}'.format(user_stats['lines_changed_added'], user_stats['lines_changed_removed']))

      current_output.append(user_stats['total_lines'])
      current_output.append(user_stats['total_lines']*1.0/user_stats['num_changes'])

      print output_specifier_with_carriage_return.format(*current_output),

  print
  print line

  if len(outliers) > 0:
    print "Outliers (changes that merit inspection - and have not been included in the stats):"
    outlier_headers = ['Changelist', 'Lines of Code']
    outlier_specifier = generate_output_specifier(outlier_headers)
    outlier_line = generate_line(outlier_headers)

    print outlier_line
    print outlier_specifier.format(*outlier_headers)
    print outlier_line

    for change in outliers:
      print outlier_specifier.format(*change)

    print outlier_line 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T18:29:01.680

是的，有很多方法可以计算代码行数。

**tl;dr**安装[Eclipse Metrics 插件](http://www.stateofflow.com/projects/16/eclipsemetrics)。[这](https://stackoverflow.com/questions/6924158/eclipse-count-lines-of-code)是如何做的说明。如果您想在没有 Eclipse 的情况下执行此操作，下面有一个简短的脚本。

**外壳脚本**

我将向您介绍非常通用的方法。它适用于 Linux，但它可以移植到其他系统。将这 2 行保存到`lines.sh`文件中：

```
#!/bin/sh
find -name "*.java" | awk '{ system("wc "$0)  }' | awk '{ print $1 "\t" $4; lines += $1; files++ } END { print "Total: " lines " lines in " files " files."}' 
```

这是一个使用 的 shell 脚本`find`，`wc`而且很棒[`awk`](http://en.wikipedia.org/wiki/AWK)。添加执行权限：

`chmod +x lines.sh`

现在我们可以执行我们的shell脚本了。

假设您保存`lines.sh`在`/home/you/workspace/projectX`.
脚本计算文件中的行数`.java`，这些文件位于`/home/you/workspace/projectX`.

所以让我们用`./lines.sh`. 您可以更改`*.java`任何其他类型的文件。

样本输出：

```
adam@adam ~/workspace/Checkers $ ./lines.sh 
23  ./src/Checkers.java
14  ./src/event/StartGameEvent.java
38  ./src/event/YourColorEvent.java
52  ./src/event/BoardClickEvent.java
61  ./src/event/GameQueue.java
14  ./src/event/PlayerEscapeEvent.java
14  ./src/event/WaitEvent.java
16  ./src/event/GameEvent.java
38  ./src/event/EndGameEvent.java
38  ./src/event/FakeBoardEvent.java
127 ./src/controller/ServerThread.java
14  ./src/controller/ServerConfig.java
46  ./src/controller/Server.java
170 ./src/controller/Controller.java
141 ./src/controller/ServerNetwork.java
246 ./src/view/ClientNetwork.java
36  ./src/view/Messages.java
53  ./src/view/ButtonField.java
47  ./src/view/ViewConfig.java
32  ./src/view/MainWindow.java
455 ./src/view/View.java
36  ./src/view/ImageLoader.java
88  ./src/model/KingJump.java
130 ./src/model/Cords.java
70  ./src/model/King.java
77  ./src/model/FakeBoard.java
90  ./src/model/CheckerMove.java
53  ./src/model/PlayerColor.java
73  ./src/model/Checker.java
201 ./src/model/AbstractPiece.java
75  ./src/model/CheckerJump.java
154 ./src/model/Model.java
105 ./src/model/KingMove.java
99  ./src/model/FieldType.java
269 ./src/model/Board.java
56  ./src/model/AbstractJump.java
80  ./src/model/AbstractMove.java
82  ./src/model/BoardState.java
Total: 3413 lines in 38 files. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T09:48:19.357

其他答案似乎错过了源代码控制历史方面的事情。

来自[http://forums.perforce.com/index.php?/topic/359-how-many-lines-of-code-have-i-written/](http://forums.perforce.com/index.php?/topic/359-how-many-lines-of-code-have-i-written/)

分多个步骤计算答案：

1）添加文件：

```
p4 filelog ... | grep ' add on .* by <username>'
p4 print -q foo#1 | wc -l 
```

2）更改的文件：

```
p4 describe <changelist> | grep "^>" | wc -l 
```

将所有计数组合在一起（脚本...），您将得到一个总数。

您可能还想用 grep 删除空白行或没有字母数字字符的行？

此外，如果您定期执行此操作，则在 P4Python 中编写代码并逐步执行会更有效 - 保留历史记录并仅查看新提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T18:40:34.297

找一个应用程序来计算行数，计算行数有很多微妙之处 - 注释、空白行、每行多个运算符等。

Visual Studio 具有“计算代码指标”功能，因为您没有提到一种语言，我无法更具体地说明要使用哪种工具，只是说“查找”和“grep”可能不是要走的路。

还要考虑代码行不能衡量实际进度的事实。路线图上已完成的功能衡量进度，代码行数越低越好。如果一个自豪的开发人员声称他的 60,000 行代码非常了不起，只是发现有一种方法可以在 1000 行中做同样的事情，这并不是第一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T18:43:38.010

看看[SLOCCount](http://www.dwheeler.com/sloccount/)。它只计算实际的代码行数并执行一些额外的计算。

在 OSX 上，您可以通过 Homebrew 轻松安装它`brew install sloccount`。

我的一个项目的示例输出：

```
$ sloccount .
Have a non-directory at the top, so creating directory top_dir
Adding /Users/padde/Desktop/project/./Gemfile to top_dir
Adding /Users/padde/Desktop/project/./Gemfile.lock to top_dir
Adding /Users/padde/Desktop/project/./Procfile to top_dir
Adding /Users/padde/Desktop/project/./README to top_dir
Adding /Users/padde/Desktop/project/./application.rb to top_dir
Creating filelist for config
Adding /Users/padde/Desktop/project/./config.ru to top_dir
Creating filelist for controllers
Creating filelist for db
Creating filelist for helpers
Creating filelist for models
Creating filelist for public
Creating filelist for tmp
Creating filelist for views
Categorizing files.
Finding a working MD5 command....
Found a working MD5 command.
Computing results.

SLOC    Directory   SLOC-by-Language (Sorted)
256     controllers     ruby=256
66      models          ruby=66
10      config          ruby=10
9       top_dir         ruby=9
5       helpers         ruby=5
0       db              (none)
0       public          (none)
0       tmp             (none)
0       views           (none)

Totals grouped by language (dominant language first):
ruby:           346 (100.00%)

Total Physical Source Lines of Code (SLOC)                = 346
Development Effort Estimate, Person-Years (Person-Months) = 0.07 (0.79)
 (Basic COCOMO model, Person-Months = 2.4 * (KSLOC**1.05))
Schedule Estimate, Years (Months)                         = 0.19 (2.28)
 (Basic COCOMO model, Months = 2.5 * (person-months**0.38))
Estimated Average Number of Developers (Effort/Schedule)  = 0.34
Total Estimated Cost to Develop                           = $ 8,865
 (average salary = $56,286/year, overhead = 2.40).
SLOCCount, Copyright (C) 2001-2004 David A. Wheeler
SLOCCount is Open Source Software/Free Software, licensed under the GNU GPL.
SLOCCount comes with ABSOLUTELY NO WARRANTY, and you are welcome to
redistribute it under certain conditions as specified by the GNU GPL license;
see the documentation for details.
Please credit this data as "generated using David A. Wheeler's 'SLOCCount'." 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-04T07:28:31.877

有一种更简单的方法可以做到这一切，顺便说一下，它比使用 grep 更快：

首先获取特定用户的所有更改列表，这是一个命令行命令，您可以使用 os.system() 在 python 脚本中使用它：

```
p4 changes -u <username> > 'some_text_file.txt' 
```

现在您需要提取所有更改列表编号，我们将使用正则表达式，这里使用 python 完成：

```
f = open('some_text_file.txt','r')
lists = f.readlines()
pattern = re.compile(r'\b[0-9][0-9][0-9][0-9][0-9][0-9][0-9]\b')

labels = []
for i in lists:
    labels.append(pattern.findall(i))

changelists = []
for h in labels:
    if(type(h) is list):
        changelists.append(str(h[0]))
    else:
        changelists.append(str(h)) 
```

现在您在“标签”中拥有所有更改列表编号。我们将遍历列表并为每个更改列表查找添加的行数和删除的行数，获得最终差异将为我们提供添加的总行数。以下代码留置权正是这样做的：

```
for i in changelists:
    os.system('p4 describe -ds '+i+' | findstr "^add" >> added.txt')
    os.system('p4 describe -ds '+i+' | findstr "^del" >> deleted.txt')

added = []
deleted = []

file = open('added.txt')
for i in file:
    added.append(i)

count = []
count_added = 0
count_add = 0
count_del = 0

for j in added:
    count = [int(s) for s in j.split() if s.isdigit()]
    count_add += count[1]
    count = []

file = open('deleted.txt')
for i in file:
    deleted.append(i)

for j in labels:
    count = [int(s) for s in j.split() if s.isdigit()]
    count_del += count[1]
    count = []

count_added = count_add - count_del

print count_added 
```

count_added 将包含用户添加的行数。

# c# - 具有更改的ctor参数的延迟初始化字段？

> ID：14201759
> 
> 赞同：1
> 
> 时间：2013-01-07T18:23:51.740
> 
> 标签：c#, .net, .net-4.0, lazy-initialization

这是延迟初始化的 Field 的语法。

```
public class MyClass
{
    string _cat;
    public MyClass(string Category)
    {
        _cat=Category;
    }

    MyExpensive _expensive;
    public MyExpensive Expensive
    {
        get 
        {
            LazyInitializer.EnsureInitialized(ref _expensive, () = > new MyExpensive ());
            return _expensive;
        }
    }
} 
```

但是如果我需要`new MyExpensive` 使用*运行时 ctor params*创建呢？（根据流程逻辑）

我不想创建一个标志字段，然后做很多`IF's`

我的意思是，有时我需要跑步`new MyExpensive ("picture")`，有时`new MyExpensive ("flowers")`

我怎样才能做到这一点 ？

*（不包括为每个类别创建一个惰性字段 - ）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:26:30.430

如果你正在做任何*昂贵*的事情，你应该用方法而不是属性来做。

属性应该*快速*且*便宜*，因为这是大多数程序员的正常期望（最小惊讶原则）。

在您的情况下，没有吸气剂 - 使用：

```
public MyExpensive GetExpensive()
{
    LazyInitializer.EnsureInitialized(ref _expensive, () = > new MyExpensive ());
    return _expensive;
} 
```

当然，你有参数化的重载。

# c++ - 将 asm 指令编码为操作码

> ID：14201760
> 
> 赞同：1
> 
> 时间：2013-01-07T18:23:55.500
> 
> 标签：c++, c, assembly, x86, x86-64

我需要编码一些指令，比如

```
mov eax, edx
inc edx 
```

到相应的 x86_64 操作码。是否有任何库（不是整个 asm 编译器）可以轻松完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:34:35.773

您可以采用开源[FASM](http://en.wikipedia.org/wiki/FASM)或[NASM](http://en.wikipedia.org/wiki/Netwide_Assembler)并使用它们的解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:41:46.457

如果您已经将其编译为二进制文件（来自您的 asm 或带有嵌入式 asm 的 c）：

objdump -S your_binary，它将列出每条指令及其二进制代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:43:10.483

假设您只是在翻译简单的指令之后，编写一个简单的汇编程序不会有那么多工作。我以前做过 - 你可能有你的反汇编组件的大部分逻辑和表格（例如指令名称的操作码表和名称的寄存器编号 - 只需反过来使用它）。我并不一定意味着您可以直接反向使用表格，但是以合适的方式重新排列表格的内容应该可以完成大部分艰苦的工作并不算太糟糕。

变得困难的是符号和搬迁之类的东西。但是由于您可能并不真正需要“查找此代码序列”，因此我想您可以不使用这些部分。您也不需要生成符合某些规范的目标文件 - 您只需要一组字节。

现在，如果你想找到它会变得有点棘手：

```
here:
     inc eax
     jnz here
     jmp someplace_else
....
...
someplace_else:
     .... 
```

因为您必须将跳转编码到它们的相对位置 - 至少，它需要两遍方法，首先计算指令的长度，然后实际填充跳转目标。如果“someplace_else”远离跳转本身，它也可能是绝对跳转，在这种情况下，您的“搜索”必须了解它与正在搜索的位置之间的关系 - 因为每个地址的顺序都不同.

我已经编写了汇编程序和反汇编程序，如果您不必处理具有您不知道的奇怪定义的可重定位地址和文件格式，这并不难[直到您研究了格式的 200 页定义]。

# regex - 如何用标签捕捉价值？

> ID：14201761
> 
> 赞同：0
> 
> 时间：2013-01-07T18:23:57.063
> 
> 标签：regex, preg-match-all

> <!--dle_image_begin:http://some_url.com/uploads/posts/2012-12/1.png|--><img src="some_url.com/uploads/posts/2012-12/1.png" alt=" ***" title="*** " /><!--dle_image_end--> bla bla bla bla <!--dle_image_begin:http://some_url.com/image/2.png|--><img src=" some_url.com/uploads/image/2.png" alt=" ***" title="*** " /><!--dle_image_end--> bla bla bla <!--dle_image_begin:http://some_url.com/asfafsdsaf|- -><img src="some_url.com/asfafsdsaf" alt=" ***" title="*** " /><!--dle_image_end-->

如何抓住每`<!--dle_image_begin: ... <!--dle_image_end-->`一个`prey_match_all`？`dle_image_begin`和之间的内容真的无关紧要`dle_image_end`- 我只需要将它们中的每一个放在数组中（包括`dle_image_begin`和`dle_image_end`标签）。

`<!--dle_image_begin:.*([^|]dle_image_end-->)`我试过：和之类的东西`<!--dle_image_begin:.*?(<--dle_image_end-->)`，但仍然无法理解它是如何工作的......有人可以给点提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:16:32.997

有两个问题。 `<--dle_image_end`应该是`<!--dle_image_end`，你可以省略括号：

```
<?php

  $source = <<<SOURCE_HEREDOC
<!--dle_image_begin:http://some_url.com/uploads/posts/2012-12/1.png|--><img src="some_url.com/uploads/posts/2012-12/1.png" alt="" title=""  /><!--dle_image_end--> bla bla bla bla <!--dle_image_begin:http://some_url.com/image/2.png|--><img src="some_url.com/uploads/image/2.png" alt="" title=""  /><!--dle_image_end--> bla bla bla <!--dle_image_begin:http://some_url.com/asfafsdsaf|--><img src="some_url.com/asfafsdsaf" alt="" title=""  /><!--dle_image_end-->
SOURCE_HEREDOC;

  $regex = "/<!--dle_image_begin:.*?--dle_image_end-->/";

  preg_match_all($regex,trim($source),$matches);

  echo "\n";
  foreach($matches as $match) {
    foreach($match as $part) {
      echo "\n";
      echo "  -> ".$part;
      echo "\n";
    }
  }
  echo "\n";
?> 
```

输出：

```
 -> <!--dle_image_begin:http://some_url.com/uploads/posts/2012-12/1.png|--><img src="some_url.com/uploads/posts/2012-12/1.png" alt="" title=""  /><!--dle_image_end-->

  -> <!--dle_image_begin:http://some_url.com/image/2.png|--><img src="some_url.com/uploads/image/2.png" alt="" title=""  /><!--dle_image_end-->

  -> <!--dle_image_begin:http://some_url.com/asfafsdsaf|--><img src="some_url.com/asfafsdsaf" alt="" title=""  /><!--dle_image_end--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:22:17.503

只需使用这个正则表达式

```
/(<!--dle_image_begin.*?dle_image_end-->)/ 
```

与`preg_match_all( '/(<!--dle_image_begin.*?dle_image_end-->)/', $code, $matches )`. `$matches`将包含所有匹配项。

它将匹配以它之间的任何内容开头`<!--dle_image_begin`和结尾的模式`dle_image_end-->`。周围的括号必须匹配整个表达式，而不仅仅是一部分。

# icons - 使用 Sunburst 主题更改 Plone 中的内容类型图标

> ID：14201762
> 
> 赞同：0
> 
> 时间：2013-01-07T18:24:19.727
> 
> 标签：icons, plone

我想更改文件夹和文档类型的默认图标。使用 Sunburst 运行 Plone 4.2。我尝试自定义 portal_skins/plone_images/folder_icon.png 来保存文件 myfolder.png 但这没有效果。

我还尝试将文件夹类型的图标属性设置为指向我在其他类型的图标属性 ${portal_url}/myfile.png 中看到的备用文件。如果我然后转到[http://mysite.com/myfolder/myfile.png](http://mysite.com/myfolder/myfile.png)，我会看到该图标，但它不会显示在内容列表中——在文本“myfolder”旁边仍然有正常的文件夹图标。

我还尝试进入并更改 sunburst 主题的自定义副本中的 URL，它使用 contenttypes-sprite.png 的 url，但这只是让图标消失了。

如果有剩下的，我会把头发拉出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:37:41.570

制作“contenttypes-sprite.png”的副本，使用您选择的图像处理程序（我的是 GIMP）对其进行编辑，以“重绘”精灵中的文件夹图标并将其放入皮肤文件夹中您的产品（或在 ZMI 的自定义文件夹中）。重新加载时清除浏览器缓存。

使用 Plone-4.2.0 这非常好，奇怪的是使用 Plone-4.2.1 我需要稍微调整背景位置。

# ios - iOS白色是一种颜色

> ID：14201763
> 
> 赞同：0
> 
> 时间：2013-01-07T18:24:23.130
> 
> 标签：ios, colors, uicolor

所以我有一个我已经创建的颜色，我试图返回一个它是多么白的值......

```
color1 = [UIColor colorWithRed:188/255.f green:50/255.f blue:219/255.f alpha:1]; 
```

我可以使用以下方法返回色相、饱和度、亮度的值：

```
[color1 getHue:&hue saturation:&saturation brightness:&brightness alpha:&alpha]; 
```

它工作得很好，我得到了各种浮点值

但是当我尝试使用 Apple 的“GetWhite”方法时，无论我输入哪种颜色，返回的值始终为 0.00000。

```
[color1 getWhite:&white alpha:&alpha]; 
```

我究竟做错了什么？我需要先将颜色转换为灰度吗？如果是这样，我该怎么做？是否有更简单的方法来检测某物的白度……只需平均红/绿/蓝值然后除以 255？谢谢！

**（*另外，我的声誉还不够高，无法在其中添加标签“getWhite”，有人可以创建它吗...当我搜索此问题的答案时，什么都没出现...也许创建该标签会帮助其他有需要的人.)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:32:42.353

您的问题表明您可能不了解 getWhite 的目的。从文档：

> 如果颜色在兼容的颜色空间中，则颜色将转换为灰度格式...

所以这个函数的目的是获取灰度的颜色值。如果您描述了获得此价值的目的，我们或许能够更详细地为您提供帮助。

也就是说，如果这确实是您要使用的函数，您还应该测试 getWhite 的返回值。文档提到了有关返回值的内容：

> 如果可以转换颜色，则为 YES，否则为 NO。

# c - 服务器地址为 FQDN 时无法打开 FTP 连接

> ID：14201766
> 
> 赞同：1
> 
> 时间：2013-01-07T18:24:30.253
> 
> 标签：c, sockets, networking, ftp

我用 C 语言编写的 FTP 程序仅在服务器地址为 IP 地址时才有效。但是，当服务器地址是完全限定域名 (FQDN) 时，连接会失败。当 ftp_host 为 FQDN 时，ftp 连接无法打开。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:25:24.197

我强烈建议使用该`getaddrinfo()`函数，因为[gethostbyname() 已过时](http://www.kernel.org/doc/man-pages/online/pages/man3/gethostbyname.3.html)。这还有一个优点，即现在或以后都可以轻松转换为 IPv6。

我假设您只关心 IPv4 地址，所以这里有一个函数示例，它将以主机名作为其参数并`struct sockaddr_in`为您填写 a：

```
int get_ftp_addr(const char *hostname, struct sockaddr_in *addr)
{
  char host_buffer[256];
  struct addrinfo hints;
  struct addrinfo *result;
  struct sockaddr_in *res_addr;
  int error = -1;
  char *colon;

  snprintf(host_buffer, sizeof(host_buffer), "%s", hostname);

  memset(&hints, 0, sizeof(hints));
  hints.ai_family = AF_INET;
  hints.ai_socktype = SOCK_STREAM;

  colon = strchr(host_buffer, ':');
  if (colon) {
    *colon = '\0';
    error = getaddrinfo(host_buffer, colon + 1, &hints, &result);
  } else {
    error = getaddrinfo(host_buffer, "ftp", &hints, &result);
  }

  if (error != 0 || !result) {
    return error;
  }

  res_addr = (struct sockaddr_in*)(result->ai_addr);
  memcpy(addr, res_addr, sizeof(struct sockaddr_in));

  freeaddrinfo(result);
  return 0;
} 
```

请注意，我只获取字符串的副本以避免修改调用者中的版本 - 如果您不想保留该部分，则不必保留，但我个人认为它使界面更清晰。

此函数将同时接受点分四边形表示法的 IP 地址和完全限定的主机名，因为`getaddrinfo()`两者都接受。如果一个端口用冒号指定，它将被使用，否则将使用默认的 FTP 端口。

返回值为零表示成功。可以传递正返回`gai_strerror()`以获取字符串错误代码，或者您可以查看[getaddrinfo() 手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/getaddrinfo.3.html)以获取可能的错误代码。返回`-1`表示来自结果结构的成功结果，`getaddrinfo()`但没有结果结构 - 我认为这不会发生，但我不喜欢留下任何可能的返回代码未处理。

这里有几个警告，其中两个最重要的是：

*   这段代码只支持 IPv4，尽管`getaddrinfo()`它也很容易支持 IPv6。如果您想同时支持两者`AF_INET`，则将提示结构中的 更改为`AF_UNSPEC`，您将获得所有地址族。不过，您需要遍历地址，并仅过滤掉 IPv4 和 IPv6 的地址（请参阅我的下一点）。
*   DNS 查找可能会查找多个 IP 地址——这在 Google 等大型站点中很常见，因为它们使用此功能来实现跨主机的负载平衡以及冗余。理想情况下，您的代码应该遍历所有返回的地址，并尝试连接到每个地址，直到一个有效。对于 FTP 客户端来说，这可能有点矫枉过正，但我​​认为意识到这一点很重要。

如果您想支持 IPv6，或支持多 A 记录（即从 DNS 查询返回的多个地址），那么您需要遵循结构`ai_next`中的指针`struct addrinfo`- 如下所示：

```
struct addrinfo *res;

/* Assume result is initialised as above via getaddrinfo() */

for (res = result; res != NULL; res = res->ai_next) {
    ...
} 
```

# apache - Apache将子域重定向到文件夹，保留参数

> ID：14201769
> 
> 赞同：0
> 
> 时间：2013-01-07T18:24:46.917
> 
> 标签：apache, .htaccess, mod-rewrite, wildcard-subdomain, url-redirection

我在 .htaccess 中有这段代码：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !\.(css|gif|ico|jpg|js|png|swf|txt)$

# If empty subdomain, replace with "www"
RewriteCond %{HTTP_HOST} ^example.com$ 
RewriteRule ^(.*) http://www.example.com/$1 [QSA,L,R=301]

# If subdomain isn't empty and not "www", redirect to "folder"
RewriteCond %{HTTP_HOST} !^www\.example\.com
RewriteCond %{HTTP_HOST} ^(.*)\.example\.com$
RewriteRule (.*) http://www.example.com/%1/$1 [QSA,R=301]

#PAGES REDIRECTION
RewriteRule ^(.*)/register/ /index.php?sub=$1&page=register
RewriteRule ^(.*)/register  /index.php?sub=$1&page=register
RewriteRule ^(.*)/lostpass/ /index.php?sub=$1&page=lostpass
RewriteRule ^(.*)/lostpass  /index.php?sub=$1&page=lostpass
... 
```

（通配符子域的规则已经到位并且正在运行）

如果我浏览到**http://test.example.com**它会正确重定向到***http://www.example.com/test***但是当我尝试浏览到**http://test.example.com/register**时，它实际上会重定向到**http://www.example.com/test/index.php?sub=http://www.example.com/test&page=register**应该重定向到**http://www.example.com/test/register**

我在这里做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:07:45.030

尝试将`L`标志添加到您的第二个重定向规则，类似于第一个重定向规则。

```
RewriteRule (.*) http://www.example.com/%1/$1 [QSA,R=301,L] 
```

看起来您重写的 URI 正在[传递到下一条规则](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_r)。

另外，我认为您的前两个不在`RewriteCond`正确的位置。

# javascript - 使用 jQuery Mobile 的一个标签和三个输入

> ID：14201771
> 
> 赞同：3
> 
> 时间：2013-01-07T18:24:49.830
> 
> 标签：javascript, css, jquery-mobile

我想知道是否可以像下面的原型一样使用 jQuerymobile 制作表格线。

![在此处输入图像描述](../Images/8a1fb521e28e07a2bb824b2d92007e1c.png)

我尝试使用具有四列的布局网格，例如下面的一列，但是生日标签比第二列大并增加了它的大小。

```
<div class="ui-block-a">
    <label for="idnumber" style="width:50%">
        ID:
    </label>
    <input name="idnumber" id="idnumber" placeholder="(ID Number)" value="" type="text">
</div>
<div class="ui-block-b">
    <label for="month" style="width:10%">
        Birthday:
    </label>
    <input name="month" id="month" placeholder="MM" value="" type="text">
</div>
<div class="ui-block-c" style="width:10%">
    <label for="day">
        &nbsp;
    </label>
    <input name="day" id="day" placeholder="DD" value="" type="text">
</div>
<div class="ui-block-d" style="width:30%">
    <label for="year">
        &nbsp;
    </label>
    <input name="year" id="year" placeholder="YYYY" value="" type="text">
</div> 
```

![在此处输入图像描述](../Images/ba5a5d492eb5f6eec08fd9ee7bac4ebc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:41:40.453

几分钟后，我发布了这个问题，我意识到问题出在哪里。我错误地将`style="width:XX%"`标签放在前两个字段的内部，而不是将它们放在块 div 中。

正确的代码如下：

```
<div class="ui-block-a" style="width:40%; margin-right: 10px;">
    <label for="idnumber">
        ID:
    </label>
    <input name="idnumber" id="idnumber" placeholder="(ID Number)" value="" type="text">
</div>
<div class="ui-block-b" style="width:15%; margin-right: 5px;">
    <label for="month">
        Birthday:
    </label>
    <input name="month" id="month" placeholder="MM" value="" type="text">
</div>
<div class="ui-block-c" style="width:15%; margin-right: 5px;">
    <label for="day">
        &nbsp;
    </label>
    <input name="day" id="day" placeholder="DD" value="" type="text">
</div>
<div class="ui-block-d" style="width:20%">
    <label for="year">
        &nbsp;
    </label>
    <input name="year" id="year" placeholder="YYYY" value="" type="text">
</div> 
```

正确的结果如下：

![在此处输入图像描述](../Images/932f69a8df5d9387889d9dc68016f8fc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:57:40.100

试试这个：

```
<div data-role="content" class="ui-grid-a"> 
    <div class="ui-block-a">
        <label for="idnumber">
           ID:
        </label>
        <input name="idnumber" id="idnumber" placeholder="(ID Number)" value="" type="text" style="width:90%">
    </div>
    <div class="ui-block-b ui-grid-b">
        <div class="ui-block-a" style="width:20%">
            <label for="month">
            Birthday:
            </label>
            <input name="month" id="month" placeholder="MM" value="" type="text" style="width:90%">
        </div>
        <div class="ui-block-b" style="width:20%">
            <label for="day">
            &nbsp;
            </label>
            <input name="day" id="day" placeholder="DD" value="" type="text" style="width:90%">
        </div>
        <div class="ui-block-c" style="width:60%">
            <label for="year">
            &nbsp;
            </label>
            <input name="year" id="year" placeholder="YYYY" value="" type="text">
        </div>     
    </div>
</div> 
```

我认为这更简单。我在第二个中使用 2 个网格和 3 个网格。

# c - 使用 setfsuid() 创建文件时出现分段错误？

> ID：14201773
> 
> 赞同：0
> 
> 时间：2013-01-07T18:25:10.733
> 
> 标签：c, file, permissions, segmentation-fault

我有这个创建文件的 c 代码。

```
#include <stdio.h>
int main(int argc, char *argv[])
{
    FILE *fp;
    fp=fopen("/home/sss/test3.file","w");
    fprintf(fp, "hi hi hi\n" );
    fclose(fp);
    return 0;   
} 
```

当我在文件 fopen() 调用之前添加 setfsuid() 命令并执行程序时，我遇到了分段错误。

```
#include <stdio.h>
#incldde <unistd.h>
int main(int argc, char *argv[])
{
    FILE *fp;
    setfsuid(1002);
    fp=fopen("/home/sss/test3.file","w");
    fprintf(fp, "hi hi hi\n" );
    fclose(fp);
    return 0;   
} 
```

setfsuid() 命令需要 root 权限，我在带有服务器操作系统的 linux 系统上。什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:32:40.777

您需要检查结果`fopen`并确保它不是`NULL`. `setfsuid`更改`UID`用于文件系统访问检查的方法。进行此更改后，您可能无权打开该文件进行写入，从而导致`fopen`返回 NULL。当`segfault`您尝试使用`fprintf`. **始终在使用返回值之前检查它们。**

# java - 字节数组：如何准确知道接收到的字节数

> ID：14201775
> 
> 赞同：1
> 
> 时间：2013-01-07T18:25:16.263
> 
> 标签：java, bytearray

我正在使用字节数组来存储从另一台计算机接收到的数据包。

```
receivedData = new byte[1024];
receivedPacket = new DatagramPacket(receivedData, receivedData.length);
socket.receive(receivedPacket);
receivedData = receivedPacket.getData();
String res = new String(receivedData);  // PROBLEM HERE 
```

问题出在最后一行：因为我声明`receivedData`为长度为 1024 的字节流。所以，最后一行总是会从整个数组创建一个新字符串，尽管它不知道我收到了多少真实字节。所以，我遇到了沮丧的错误：`res`没有收到我希望的。（因为我收到的实际字节长度不能修复整个数组）

所以，我的问题是：我该如何解决这个问题，我怎么知道我真正收到了多少字节来转换为字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:32:43.857

尝试使用`DatagramPacket.getLength()`.

```
receivedData = new byte[1024];
receivedPacket = new DatagramPacket(receivedData, receivedData.length);
socket.receive(receivedPacket);
receivedData = receivedPacket.getData();
String charsetName = "US-ASCII"; // set to desired charset
String res = new String(receivedData, 0, receivedPacket.getLength(), charsetName); 
```

编辑添加字符集。谢谢，[帕西法尔](https://stackoverflow.com/users/1919251/parsifal)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:29:36.823

从[javadoc](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html#receive%28java.net.DatagramPacket%29)为`DatagramSocket.receive()`：

> 数据报包对象的长度字段包含接收到的消息的长度

然后，您可以`String`使用带有字节数组和偏移量的构造函数来构造您的构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T18:30:14.907

调用[DatagramPacket.getLength()](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramPacket.html#getLength%28%29)以查明实际收到了多少字节。

并且当您`String`从这些字节构造时，请*务必指定编码*（实际上，您使用的是 JDK 默认编码，这可能与服务器的编码不同）。

# java - 在Java中，如果递归方法可以返回混合值，我应该如何声明返回类型？

> ID：14201785
> 
> 赞同：0
> 
> 时间：2013-01-07T18:25:45.050
> 
> 标签：java, android, json, return, type-conversion

我有以下方法定义，旨在搜索给定键的 JSON 对象并返回 JSONObject 或该键的字符串值。为了确保它搜索 JSON 对象的每个级别，我将其设为递归，但仅在可以返回更深的 JSONObject 的情况下。编译器抱怨这必须返回一个 Object，因为我已经声明了该返回类型。美好的。在两种情况下，我返回一个对象，但我认为它的问题是在某些情况下它不会返回任何东西。如果我添加最终返回 false 或其他内容，它将通过编译器检查，但对该方法的调用将始终（最终）返回 false 使其无用。我不习惯像 Java 这样的严格类型的语言，所以我以前没有遇到过类似的问题。任何指针将不胜感激。

```
public Object find(String contentId, JSONObject node) {
    JSONObject currentNode = (node != null) ? node : this.txtContent;
    Iterator<?> nodeKeys = currentNode.keys();

    while ( nodeKeys.hasNext() ){

        try {
            String key = (String) nodeKeys.next();

            if (key.equals(contentId)) {
                if (currentNode.get(key) instanceof JSONObject) {
                    return currentNode.getJSONObject(key);
                } else {
                    return currentNode.getString(key);
                }
            } else if (currentNode.get(key) instanceof JSONObject) {
                find(contentId, currentNode.getJSONObject(key));
            }
        } catch (JSONException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:42:09.977

让我们看看，您应该使用 find 调用返回的值，如果没有找到则返回 null：

```
public Object find(String contentId, JSONObject node) {
    JSONObject currentNode = (node != null) ? node : this.txtContent;
    Iterator<?> nodeKeys = currentNode.keys();

    while ( nodeKeys.hasNext() ){

        try {
            String key = (String) nodeKeys.next();

            if (key.equals(contentId)) {
                if (currentNode.get(key) instanceof JSONObject) {
                    return currentNode.getJSONObject(key);
                } else {
                    return currentNode.getString(key);
                }
            } else if (currentNode.get(key) instanceof JSONObject) {
                Object foundObj = find(contentId, currentNode.getJSONObject(key));
                if (foundObj!=null) {
                    return foundObj;
                }
            }
        } catch (JSONException e) {
            throw new RuntimeException(e);
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:06:41.003

这`Either`门课就是为这样的情况而设计的。请参阅[此处的文档](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/data/Either.html)

用法：

```
Either<OneResultType,OtherResultType> result; 
```

这避免了昂贵的 instanceOf 检查。`null`如果找不到对象，则返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:34:58.540

添加返回空值；在while循环下方

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T18:40:15.447

如果这个方法不断地点击 else if 直到 while 循环条件结束并且你得到你的“return false”，这个方法只会一直返回 false。

而不是 return false 有 return null; 在最后和调用方法中检查返回的对象是否为空，这意味着什么都没有找到

# ember.js - 更新部分样式内容

> ID：14201790
> 
> 赞同：1
> 
> 时间：2013-01-07T18:26:23.350
> 
> 标签：ember.js

我想做以下车把脚本：

color:{{object.labelColor}} 似乎不起作用（参见其他帖子）。

一种解决方案似乎在“javascript 端”绑定了完整的样式属性，但我想避免在该端管理样式的“固定”部分（文本对齐：左）。

有没有一种解决方案可以制作类似于我的示例代码的东西（js 端的动态部分，html 视图上的固定部分）？

```
<div class="label" style="color:{{object.labelColor}};text-align:left">{{object.name}}</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:58:33.443

您可以使用“classNameBindings”，并为相应的类定义一组 css 规则。

# JS

```
Ember.View.create({
 classNameBindings: ['isUrgent'] // array of class names
 isUrgent: true //conditional to set class name
}); 
```

# css

```
.is-urgent{
 background-color: #356aa0;
} 
```

# 资源

[http://emberjs.com/api/classes/Ember.ContainerView.html#property_classNameBindings](http://emberjs.com/api/classes/Ember.ContainerView.html#property_classNameBindings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:15:55.330

如果您**必须**使用样式而不是类，并且当时只想更改样式字符串的一部分，那么一种替代方法是使用[`$.css`](http://api.jquery.com/css/)，应用您想要的样式更改。[**例如**](http://jsfiddle.net/schawaska/jTS6w/)：

```
<script type="text/x-handlebars">
  <h1>App</h1>
  {{view App.SomeView}}
</script>

<script type="text/x-handlebars" data-template-name="some-view">
  <div style="color:#00F;text-align:left">
    Some View<br />
    <button {{action changeColor on="click"}}>Change Color</button>
  </div>
</script>

<script type="text/javascript">

App = Em.Application.create();

App.SomeView = Em.View.extend({
  templateName: 'some-view',
  changeColor: function(e) {
    console.log('changing color');
    this.$('div').css('color', '#F00');
  }
});

</script> 
```

在上面的脚本中，我使用 jQuery 的`css`函数来更改`color`属性，无论我的选择器从`SomeView`实例中返回什么元素（在这种情况下，因为我只有一个 div，所以我使用该元素作为选择器）。还有其他（可能更好）的方法可以做到这一点，但我希望这会有所帮助。

这个解决方案的问题在于，你不能保持`style`属性的状态，因为它没有绑定到任何属性，这就是为什么我认为从长远来看绑定类会更好。

# jquery - jQuery UI 可排序 - 在 X 轴上滑动 div

> ID：14201800
> 
> 赞同：0
> 
> 时间：2013-01-07T18:27:08.873
> 
> 标签：jquery, jquery-ui

我一直在寻找解决方案，但没有任何运气。

我有一个容器，里面有一堆 div，并让它们在 X 轴上可排序。我希望找到的是当用户拖动而不是“弹出”它们到位时会“滑动”或“缓解”其他 div 的东西。

任何帮助将不胜感激，干杯！

[http://jsfiddle.net/V43Qd/1/](http://jsfiddle.net/V43Qd/1/)

**代码**

```
 $( "#dragBubbleContainer" ).sortable({ 
        tolerance: "pointer",
        axis: "x",
        opacity: 0.5,
     });

 $( "#dragBubbleContainer" ).disableSelection(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T03:54:28.013

通过隐藏/显示占位符，我能够将滑动动画添加到可排序列表中。

在这里找到答案：[jQuery Sortable with animation](https://stackoverflow.com/questions/5060357/jquery-sortable-with-animation)

**演示** [http://jsfiddle.net/V43Qd/3/](http://jsfiddle.net/V43Qd/3/)

```
 $( "#dragBubbleContainer" ).sortable({ 
        tolerance: "pointer",
        axis: "x",
        opacity: 0.5,
        start: function(e, ui){
            $(ui.placeholder).hide(300);
        },
        change: function (e,ui){
            $(ui.placeholder).hide().show(300);
        }
     });
    $( "#dragBubbleContainer" ).disableSelection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:39:55.823

CSS 过渡和 jQuery 缓动是两种可能的方法。请参阅[使用 CSS3 过渡动画 jQueryUI 可排序](https://stackoverflow.com/questions/13261889/animating-jqueryui-sortable-using-css3-transitions/13283200#13283200)。

# javascript - 通过javascript重定向页面

> ID：14201801
> 
> 赞同：1
> 
> 时间：2013-01-07T18:27:15.937
> 
> 标签：javascript, redirect, meta-tags

似乎使用元重定向更合适：

```
<meta http-equiv="refresh" content="0;url=$new_url" /> 
```

但是javascript重定向没有页面滞后（在标题中）

```
document.location.href = $new_url; 
```

我的问题是，哪个有最好的回报？我实际上并不希望 SEO 忽略此页面，我只是希望用户在他们到达这里时被重定向。我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:37:48.677

SEO 友好的重定向发送 HTTP 响应代码 301 或 302（永久移动）。您不能通过 javascript 发送 301 响应。该页面将加载，给出 200“找到页面”响应，然后它将运行 javascript。另外，我不确定搜索引擎是否遵循 javascript 重定向。

元标签也不是最适合 SEO。页面加载（给出 200“找到的页面”）然后加载一个新页面。失去了 SEO 的好处。

最好使用服务器端重定向来对 SEO 友好。您可以使用 Apache Web 服务器上的 .htaccess 文件来执行此操作。

以下是 SEO 友好重定向的一些最佳实践：

*   [http://www.seomoz.org/learn-seo/redirection](http://www.seomoz.org/learn-seo/redirection)

# ruby-on-rails - Ruby on rails 助手：如果 nil 则显示 mdash

> ID：14201806
> 
> 赞同：3
> 
> 时间：2013-01-07T18:27:31.837
> 
> 标签：ruby-on-rails, ruby, erb

对不起我的英语不好。

我在太多地方，显示相关对象的值：

```
= post.category.name 
```

并且这个类别可能是空的（在 Ruby 中是 nil）。在 Django 中有`default`过滤器，它的工作成本是任何未知变量都变为 None (nil)，我们可以设置默认值。

在 Rails 中，这种情况下会出现异常 NoMethodError，因为我们试图访问的类别名称的含义并不存在。

我想编写一个捕获异常并返回的助手，`&mdash;`但`post.category.name`在将其传递给助手之前计算该值（原则上是合乎逻辑的）。

一般来说，我想在这里制作以下代码：

```
= post.category.nil? ? raw ('-'): post.category.name 
```

以更方便的形式，像这样

```
= mdash(post.category.name) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:30:58.623

那么这个而不是三元运算符呢？

```
post.category.try(:name) || raw('-') 
```

[对象#try](http://api.rubyonrails.org/classes/Object.html#method-i-try)

# c++ - 用于电话号码反向搜索的具有多个子项的 C++ 树

> ID：14201808
> 
> 赞同：1
> 
> 时间：2013-01-07T18:27:33.883
> 
> 标签：c++, search, tree, children, inverse

我正在尝试编写一个程序来对电话号码进行反向搜索（用户给出一个号码，程序打印出相应的人+属于它的其他号码）。现在我已经将这些人的数据保存在一个链接列表中，并正在尝试制作一棵树。

每个树元素将保存一个指向个人数据的指针、一个索引（对应于电话号码的一部分，例如如果号码以“0”开头，则根的第一个子节点的索引为“0”）和指向它的孩子的指针向量。

到目前为止，我可以做的是在树中保存第一个给定的数字，但是在尝试在树中保存多个数字时似乎存在问题。也许问题出在指向子节点的指针上，但我不确定那里。这是代码的上述部分：

```
class Tree {

public:

    Datensatz *data; //data stored in node
    char number; //index of node - part of a telephone number
    Tree* wurzel; //root

    vector<Tree*> nextEls; //vector of children of node

    Tree(int zahl);

    /*
     div. functions
    */

    void add(vector<char>); //called to add telephone number to tree

};

void Tree::hinzufRek(vector<char> telNum)
    {   
    Tree *aktEl = new Tree(); //latest node
    aktEl=this->wurzel; //starts with root

    int check = 0;

    for (int i=0; i<telNum(); i++) { 

    char h = telNum(i);

    if(aktEl->nextEls.size()!=0){
        int j;
        for (j = 0; j<aktEl->nextEls.size(); j++) {         
            if (h == aktEl->nextEls[j]->number) { //if latest number already exists in node children...
                aktEl = aktEl->nextEls[j];
                check = 1;
                break;
            }
        }
        if (check == 0) {
            aktEl->nextEls.push_back(new Tree(h));
            aktEl = aktEl->nextEls[j];
        }
    }
    else { //if there are no current children to latest node
        aktEl->nextEls.push_back(new Tree(h));
        aktEl = aktEl->nextEls[0];
        }
    }
  }
} 
```

此外，我认为在函数末尾删除 Tree* aktEl 对象是个好主意，但这只会导致非常奇怪的结果。我不确定上面的代码是否非常清晰或者是否易于理解，但我希望你们中的一个可以帮助我......

也许我只是在监督一些事情......

先感谢您！

roboneko42

# mongodb - 是否可以对 mongodb.conf 使用变量替换

> ID：14201809
> 
> 赞同：0
> 
> 时间：2013-01-07T18:27:35.233
> 
> 标签：mongodb

有没有办法在 mongodb.conf 中使用变量替换，例如

```
dbpath=${mongodb_home}/db
keyFile=${mongodb_home}/key/keyfile
logpath=${mongodb_home}/log/mongodb.log 
```

我知道这可以通过 mongod 命令行作为参数来完成，但我有兴趣在配置中包含所有内容，以便我可以使用运行 mongodb

```
mongod -f etc/mongodb.conf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:07:04.193

不幸的是，没有办法在 mongodb.conf 文件中进行变量替换。

# php - CodeIgniter $_POST 数据为空

> ID：14201815
> 
> 赞同：1
> 
> 时间：2013-01-07T18:28:07.660
> 
> 标签：php, codeigniter

一、相关代码：

* * *

**看法**

```
<div id="search">
    <?= form_open('sheet/search') ?>

    <?= form_input('search_query', '', 'id="search_query" placeholder="Search Sheet Music"') ?>
    <?= form_submit('submit', 'Search!', 'class="hidden"') ?>

    <?= form_close() ?>
</div> 
```

**控制器表/搜索**

```
public function search()
{
    if ($this->input->post('search_query'))
    {
    // blah
    // [ ... ] 
```

`$_POST`完全是空的。

* * *

到底怎么回事？烦人的是，其他形式在我的网站上工作得很好。此外，这在我的测试服务器上完美运行......所以我猜我的配置文件、.htaccess 或其他东西有些不正常。但是，我不知道是什么原因造成的。

如果您有想法并需要更多信息，请随时指定。我只是不知道去哪里看，或者改变什么！任何帮助将不胜感激。

谢谢！

* * *

# 编辑 2013 年 1 月 8 日

好吧，我发现了。当我的索引页面从**config/config.php**中删除时，搜索不起作用。但是，当它被添加时，它确实有效。

它仍然没有任何意义。

下面是我的 .htaccess 文件。认为我需要以某种方式对其进行修改？我完全不知道为什么它仍然不起作用，但这是朝着正确方向迈出的一步。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|assets|sheet|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T03:09:24.810

# 啊哈，我明白了！

这个问题很狡猾。显然，因为我的`.htaccess`文件不包括 `sheet`目录，并且控制器具有相同的名称，所以 CodeIgniter 路径变得很糟糕。究竟是什么，我不知道。但这显然很糟糕！

对于将来遇到此问题的任何人...确保您的`.htaccess`文件没有弄乱您的控制器！

# bash - Shell 脚本逐行读取文件

> ID：14201816
> 
> 赞同：4
> 
> 时间：2013-01-07T18:28:09.827
> 
> 标签：bash, shell, unix

我是新手`shell scripting`。我需要读取一个可以在所有定义了变量的 shell 中工作的文件。就像是：

```
variable1=test1
variable2=test2
    .... 
```

我必须逐行读取此文件并准备用空格分隔的新字符串，例如：

```
variable=variable1=test1 variable2=test2 .... 
```

我尝试使用以下代码：

```
while read LINE
do
$VAR="$VAR $LINE"
done < test.dat 
```

但它给我这个错误：

```
command not found Test.sh: line 3: = variable1=test1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:38:44.003

您的脚本的问题是初始化`$`之前的前导，请尝试：`var`

```
#/bin/bash

while read line; do 
    var="$var $line"
done < file

echo "$var" 
```

但是，您可以`tr`通过用空格替换换行符来使用命令执行此操作。

```
$ tr '\n' ' ' < file
variable1=test1 variable2=test2

$ var="$(tr '\n' ' ' < file)"

$ echo "$var"
variable1=test1 variable2=test2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T18:56:41.307

定义 shell 变量时，必须省略 $。所以`VAR="bla"`是对的，`$VAR="bla"`是错的。$ 仅在使用变量时是必需的，如`echo $VAR`;

```
while read LINE
do
  VAR="$VAR $LINE"
done < test.dat 
```

# git - 添加带有“-p2”标志的二进制文件时，git apply 失败？

> ID：14201818
> 
> 赞同：3
> 
> 时间：2013-01-07T18:28:12.787
> 
> 标签：git, patch

我创建了一个补丁文件，其中包含一个二进制文件，使用：

```
$ git format-patch --stdout myref^ > patch.diff 
```

但是当我尝试应用它时：

```
$ git apply -p2 patch.diff 
```

我得到错误：`fatal: git diff header lacks filename information when removing 2 leading pathname components (line 2868)`。

第 2868 行是`new file mode 100755`，这里是一些上下文的差异：

```
2866 … 上一个大块头的结束…
 第2867章
 2868 新文件模式 100755
 2869 索引 00000000000000000000000000000000000000000..3c137aa6ba759f2267f75203d6d248be89043beb
 2870 GIT 二进制补丁
 2871 字面意思 363713
 2872 zcmV(@K-RyBP)xh;3K|Lk000e1NJLTq00UqE008_50ssI2p1e?20000PbVXQnQ*UN;

```

这是怎么回事？有什么方法可以在不手动修复的情况下应用此补丁？

笔记：

*   该错误显然是不正确的，因为从`a/some/path/foo.png`yield中删除了 2 个主要路径组件`path/foo.png`，这是有效的。
*   我最终通过手动删除不需要的前导路径组件“修复”了这个问题：`%s:\([ab]\)/some:\1:g`.
*   我确信在删除前两个路径组件的情况下，*不会*产生无效路径。

这是 Mac 上的 git 版本 1.7.3.1，补丁是在 Linux 上创建的。

这是一个演示该问题的补丁文件：

```
From 174c35d2f4a8794608eccd31b9f7d361b5ee58c3 Mon Sep 17 00:00:00 2001
From: David Wolever <david@wolever.net>
Date: Mon, 7 Jan 2013 13:31:42 -0500
Subject: [PATCH] Added binary file

---
 subdir/binfile.tgz |  Bin 0 -> 153 bytes
 1 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 subdir/binfile.tgz

diff --git a/subdir/binfile.tgz b/subdir/binfile.tgz
new file mode 100644
index 0000000000000000000000000000000000000000..f71f21d3357260edea2fb7b4641a35031c759393
GIT binary patch
literal 153
zcmb2|=3wX(c^$yO{Pz4_zC#KUZV%7Jv4$u7$b3+>V$q5W-=o(~i~CwxWXP!KJ&(NC
zT4Pyq@_6dLr^}Qym*z%)j7Wc5++E4Nw&l{L%+*`M!aP!Y3VSD*E>64d{mt2P<}Z<B
z277AFj|yCBw_ZPA$o~DBBju}0Z{$4AtM@n_Tp#zxnu7rue3)vzamprF1`P%V0B|lt
AD*ylh

literal 0
HcmV?d00001

-- 
1.7.3.1 
```

（取自[http://git.661346.n2.nabble.com/Using-git-am-p-2-with-binary-patches-td5122345.html](http://git.661346.n2.nabble.com/Using-git-am-p-2-with-binary-patches-td5122345.html)）

# sql - 错误 [22P02] 错误：整数的无效输入语法：“”；

> ID：14201826
> 
> 赞同：6
> 
> 时间：2013-01-07T18:28:47.077
> 
> 标签：sql, postgresql, types, sql-update

从未见过这样的错误：

> 错误 [22P02] 错误：整数的无效输入语法：“”；执行查询时出错

创建表：

```
 Public Function PrimkCreate(ByVal myPrimkTable As String, ByVal nCon As OdbcConnection) As Integer
    Dim ans As Integer
    Dim cCommand As OdbcCommand = New OdbcCommand("CREATE TABLE IF NOT EXISTS " + myPrimkTable + "(" & _
            "prm_id int NOT NULL, " & _
            "pkni text, " & _
            "pdatum text, " & _
            "pdatumnaplate text, " & _
            "pdanaodgode int, " & _
            "puldok text, " & _
            "puldokbroj text, " & _
            "pdatumk text, " & _
            "pvrijemek text, " & _
            "pdobid int, " & _
            "pdoboib text, " & _
            "pnabc double precision, " & _
            "purab double precision, " & _
            "ppdv double precision, " & _
            "ppnak double precision, " & _
            "pprodc double precision, " & _
            "pvrstaprimke int, " & _
            "pzapisniktekst text, " & _
            "prez text, " & _
            "CONSTRAINT " & myPrimkTable & "_pkey PRIMARY KEY(prm_id))", nCon)

    ans = cCommand.ExecuteNonQuery()
    cCommand.Dispose()
    Return ans
End Function 
```

更新代码：

```
 Public Function update_LPrimk(ByRef primk As Integer, ByVal mCon As OdbcConnection) As Integer

    Dim retval As Integer
    Dim uCmd As OdbcCommand = New OdbcCommand("UPDATE " & myPrimkTable & " SET " & _
                "prm_id=" & primk & ", " & _
                "pkni='" & prm.pKni & "', " & _
                "pdatum='" & prm.pDatum & "', " & _
                "pdatumnaplate='" & prm.pDatumNaplate & "', " & _
                "pdanaodgode=" & prm.pDanaodgode & ", " & _
                "puldok='" & prm.pUlDok & "', " & _
                "puldokbroj='" & prm.pUlDokBroj & "', " & _
                "pdatumk='" & prm.pDatumk & "', " & _
                "pvrijemek='" & prm.pVrijemek & "', " & _
                "pdobid='" & prm.pDobID & "', " & _
                "pdoboib='" & prm.pDobOib & "', " & _
                "pnabc='" & Replace(prm.pNabc.ToString, ",", ".") & "', " & _
                "purab='" & Replace(prm.pURab.ToString, ",", ".") & "', " & _
                "ppdv='" & Replace(prm.pPdv.ToString, ",", ".") & "', " & _
                "ppnak='" & Replace(prm.pPnak.ToString, ",", ".") & "', " & _
                "pprodc='" & Replace(prm.pProdc.ToString, ",", ".") & "', " & _
                "pvrstaprimke=" & prm.pVrstaPrimke & ", " & _
                "pzapisniktekst='" & prm.pZapisnikTekst & "', " & _
                "prez='" & prm.pRez & "' " & _
                "WHERE prm_id=" + primk.ToString, mCon)

    retval = uCmd.ExecuteNonQuery()
    uCmd.Dispose()
    Return retval
End Function 
```

查询看起来完全像这样：

```
UPDATE primke SET prm_id=1, pkni='U', pdatum='07.01.2013', pdatumnaplate='10.01.2013',
pdanaodgode=3, puldok='ghkzug gugug', puldokbroj='jkhk', pdatumk='', pvrijemek='', 
pdobid='', pdoboib='', pnabc='0', purab='0', ppdv='0', ppnak='0', pprodc='0', 
pvrstaprimke=0, pzapisniktekst='', prez='' WHERE prm_id=1 
```

我有很多表运行类似的命令，但从未见过这样的错误。
可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:17:13.120

我建议阅读[手册中的](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS)[**常量**](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS)一章。这是一个简短而内容丰富的阅读。
错误消息的原因`''`是一个**空字符串**，它没有像`integer`.

@a_horse_with_no_name：准确地说，`'0'`它是 PostgreSQL 的一个*字符串*常量，可以转换`integer`为 也可以转换为`text`，只是`text`字符串常量的默认值。考虑这个演示：

```
CREATE TEMP TABLE t (i int);
INSERT INTO t VALUES (1);
INSERT INTO t VALUES ('2');        -- single row inserts to make sure ..
INSERT INTO t VALUES ('3'::int);   -- .. type is not coerced to type
INSERT INTO t VALUES (4::bigint);  -- .. of first row by VALUES expression.
INSERT INTO t VALUES (5::numeric);
INSERT INTO t VALUES (6);

UPDATE t SET i = '0' WHERE i = '6';
SELECT * FROM t; 
```

[SQL小提琴。](http://www.sqlfiddle.com/#!12/2ce7f/1)

# python - 基于 Flask-wtf 的登录表单的 csrf 失败错误

> ID：14201835
> 
> 赞同：3
> 
> 时间：2013-01-07T18:29:20.297
> 
> 标签：python, flask, csrf, jinja2, wtforms

```
{csrf_token': [u'CSRF failed']} 
```

在 Windows 8 上运行的 chrome 浏览器中显示错误。Firefox 不会给出此错误。这是一个烧瓶应用程序，登录表单是使用 wtforms 制作的。

```
 <form action="{{url_for('login')}}" name="login" method="post" class="form-horizontal">
  {{form.csrf_token}}
  <h2>{{form_title}}</h2>
  <hr>
  <ul><li class="label">{{form.username.label  }}</li>
    <li class="input">{{render_field(form.username)}}</li>
    <li class="desc">{{form.username.description}}</li>
  </ul>
  <ul><li class="label">{{form.password.label  }}</li>
    <li class="input">{{render_field(form.password)}}</li>
    <li class="desc">{{form.password.description}}</li>
  </ul>
  <ul><li class="label">{{form.remember.label  }}</li>
    <li class="input">{{render_field(form.remember)}}</li>
    <li class="desc">{{form.remember.description}}</li>
  </ul>
  <input type="submit" class="sbutton" value="Log In" />
</form> 
```

无法追踪其他任何内容...form.errors 的打印输出显示了上述 csrf_token 错误。

巧合的是，当我尝试使用相同的 chrome 浏览器登录到 stackoverflow 时，它说第三方 cookie 已禁用....这可能是上述行为的原因吗？任何指针都有帮助...

这是意见：

```
class Login(MethodView):
def __init__(self):
    self.form = LoginForm()

def get(self):
    return render_template('login.html',form=self.form,form_title="Login User")

def post(self):
    username = self.form.username.data
    password = self.form.password.data

    log_handle.debug(self.form.data.items())
    if self.form.validate_on_submit():
        qstr = "SELECT * FROM user_account WHERE email='%s'"%(username)
        try:
            cursor.execute(qstr)
        except Exception:
            log_handle.exception("Could not execute:%s"%(qstr))
            flash("Could not log you on. Consult admin")
            redirect(url_for("index"))

        try:
            a = cursor.fetchall()
        except Exception:
            log_handle.exception("Could not fetch of data from:%s"%(qstr))
            flash("Could not log you on. Consult admin")
            redirect(url_for("index"))

        #now create a object understood by the flask-login
  #now create a object understood by the flask-login
        fuser = Login_user(name=a[0]['username'],id=a[0]['id'],active=a[0]['is_active'],user_role=a[0]["role"])

        remember = request.form.get("remember", "no") == "yes"
        if login_user(fuser,remember):
            session['language'] = app.config['BABEL_DEFAULT_LOCALE']
            #set customer type session variables
            a = SessionVar()
            a.set_customer_type()

            flash("Logged in!")
            return redirect(url_for("campaign_mod"))
        else:
            flash("Sorry, but you could not log in.")
    else:
        flash("failed csrf token")
        log_handle.debug(self.form.errors)
        log_handle.debug(self.form.data.items())
        return render_template('403.html'), 403 
```

和表格：

```
class LoginForm(Form):
username   = TextField(_(u"Email"),[validators.Required(),validators.Email()],description="use your email as your username")
password   = PasswordField(_(u"password"),[validators.Required()],description="Your password")
remember   = BooleanField(_(u"Remember Me."),default=True,
                                     description=_(u"This will store a cookie so as to restore it when you revisit the site."))
def validate_password(form,field):
    #now check if the username and password are correct combination.
    qstr = "SELECT * FROM user_account WHERE email='%s'"%(form.username.data)
    cursor.execute(qstr)
    a = cursor.fetchall()

    if len(a) > 0:
        hpasswd = a[0]['password']
        if bcrypt.hashpw(form.password.data, hpasswd) != hpasswd:
            log_handle.debug('password did not  match')
            raise ValidationError('cannot find a valid combination of username / password. Please try again.')
    else:
        raise ValidationError('cannot find a valid username. Please try again.') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T13:43:36.693

尝试替换`{{form.csrf_token}}`为`{{form.hidden_tag()}}`

我的假设是chrome没有发送隐藏标签的csrf_value。

要检查这个假设是否正确，您需要在发布表单后检查您在 flask.request.form["csrf_token"] 获得的内容。如果你什么都没得到，那么我的假设可能是正确的。

至于可能导致它的原因，我知道在 XHTML 中[您不能将 input 元素嵌套在 form element](https://stackoverflow.com/questions/2158303/in-xhtml-1-1-element-input-cannot-be-nested-within-element-form-why)中。这就是为什么 Flask-WTF 有一种特殊的添加隐藏标签的方法，请参阅[这个文档页面](http://pythonhosted.org/Flask-WTF/api.html)。

# c# - Encoding.UTF8.GetBytes 似乎插入了一个虚假字节

> ID：14201838
> 
> 赞同：1
> 
> 时间：2013-01-07T18:29:25.457
> 
> 标签：c#, .net

我有以下代码，从旧的 VB6 程序转换为 C#。VB6 使用了旧的 Winsock，它可以接受字符串参数，但 C# 程序使用`System.Net.Socket which`需要一个`byte`数组。

```
byte[] msg = Encoding.UTF8.GetBytes(tempString); 
_TCPConn.Send(msg); 
```

`tempString`拥有

```
0x0002 (' ')
0x0000 ('\0')
0x0000 ('\0')
0x0000 ('\0')
0x0080 (' ')
0x006d ('m')
0x0068 ('h') 
```

但是`msg`得到一个额外的字节

```
0x02 
0x00
0x00
0x00
**0xc2**
0x80
0x6d
0x68 
```

那个“c2”来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:35:01.017

这就是 UTF8 所做的。从 0x80 到 0x7FF 的值使用 2 个字节进行编码。从 0x800 到 0xFFFF 的值使用 3 个字节进行编码。0xC2 0x80 告诉解码器只输出 0x80。

编辑：如果接收者只期望每个字符的低字节并且字符值 0x80-0xFF 是有效的，则您必须一次转换每个字符。

```
int len = tempString.Length;
byte[] msg = new byte[len];
for ( int idx = 0; idx < len; ++idx )
{
  msg[idx] = (byte) tempString[idx];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:39:49.010

这是由 UTF8 编码本身完成的。这可以。

然后您可以使用[UTF8.GetString(Byte[])](http://msdn.microsoft.com/en-us/library/system.text.utf8encoding.getstring.aspx)方法对其进行解码。

# javascript - 大量的 javascript 会影响页面的加载时间吗？

> ID：14201845
> 
> 赞同：1
> 
> 时间：2013-01-07T18:29:42.380
> 
> 标签：javascript, jquery, ios

我有我所假设的（基于我对 js 的相对较新）我的脚本标签中有相当多的代码，我有超过 10 个 if 语句，每个循环大约 6-10 次，以及其他基于下拉的简单计算添加到大约 150 行代码。然后将计算出的变量发送到重定向的可打印页面。

问题是，有没有办法减轻页面的重量？当然，除了从代码中删除。

我担心大量代码会混淆，比如 iPad/iPhone 浏览器，并在可打印页面中提供错误的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:32:08.953

您应该考虑缩小 JavaScript 代码： http: [//www.minifyjavascript.com/](http://www.minifyjavascript.com/)

# scala - 为什么不将不可变 Map 具体类定义为案例类？

> ID：14201846
> 
> 赞同：1
> 
> 时间：2013-01-07T18:29:43.707
> 
> 标签：scala, map, pattern-matching

如果有人想在整个`Map`对象上应用模式匹配，那该怎么办？

示例（尽管未编译）将是：

```
def main(args: Array[String]) {
    val m: Map[String, Int] = Map("a" -> 1, "b" -> 2) //scala.collection.immutable.Map2
    m match {
      case Map2("a",1,"b",2)  => println("matched")   //conceptual code line 
      case _ => println("not matched")
    }
} 
```

`Map2`阻止定义为案例类的可能原因是什么？

*   防止封装内部字段的案例类？（喜欢`key1`和`value1`...）
*   案例类不适用于泛型类型参数？
*   很少使用匹配整个地图（通常是无意义的）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:11:41.333

一个突出的原因是从案例类派生新类充其量是不推荐的，最坏的情况是危险的。为了允许用户（或 Scala 标准库作者）从这些类派生，它们可能不是案例类。

# objective-c - 在运行时创建证书和通行证类型 ID

> ID：14201853
> 
> 赞同：3
> 
> 时间：2013-01-07T18:30:08.163
> 
> 标签：objective-c, ios, certificate, passbook

我的 Passbook 相关应用最近根据准则 23.3 被拒绝：

> 23.3：通行证必须由将以其自己的名称、商标或品牌分发通行证的实体签名，否则应用程序将被拒绝，并且存折凭证可能会被吊销

我有几个问题，并与苹果公司的某个人通了电话。他们告诉我，为了解决我的问题，我可以在我的应用程序中创建一个注册表单。然后，此注册表单可用于创建证书并根据用户的凭据为用户传递类型 ID。但是，我一直在梳理文档，但没有发现任何允许人们在没有付费开发人员会员资格的情况下创建通行证类型 ID 或证书的内容。这是正确的吗，**我的用户是否需要付费的开发人员会员才能创建自己的通行证类型 ID？**

如果他们不这样做，是否甚至可以在运行时创建 PassType ID？例如，使用注册表单中的信息，我可能会向 PassKit / 某种 Passbook 服务器发出 API 请求，以创建 Pass Type ID：

```
PassID *ID = [PassKit createIDWithName:@"USER_INFO"]; 
```

有没有类似的事情，还是苹果技术人员在谈论其他事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:08:59.210

> 我的用户是否需要付费开发者会员才能创建自己的通行证类型 ID

听起来很疯狂——是的！完全满足此准则的唯一方法是支付 Apple 税并注册成为开发者。Apple 开发者论坛中有几个很长的帖子讨论了这一点的原因和含义。虽然它不受欢迎，但我们大多数人都承认这样做有很好的理由，从长远来看，这将保护平台的完整性（以及在短期内让苹果律师高兴）。

主要原因是因为在大多数司法管辖区；优惠券、车票、旅行证件和其他典型存折内容对发行人构成约束性义务。在法律上，如果不履行，通行证发行人对消费者负责。为了保护自己，Apple 需要确保在任何情况下，他们都不会被视为任何 Passbook 通行证的发行人。

Apple Developer 计划注册可验证被接受的任何个人或公司的身份。它还强制开发者签署开发者协议的条款，该协议有一个完整的附件，专门说明您可以使用 Passbook 和您的 PassID 证书做什么和不能做什么。这为 Apple 提供了足够的法律保护，以防止与任何 Passbook 通行证相关的未履行商品或服务的任何索赔。

尽管有很多反对意见，并呼吁采用更快、更少以美国为中心的流程（您不会相信为美国以外的小型实体获得 DUNS 号码是多么困难），但我预计这种情况不会改变很快。

至于自动配置。在 iOS6 发布之前，我自己和其他主要存折平台的创建者就一直在呼吁这样做。我有一个日期为 8 月 7 日的开放式雷达，请求一个简单的 API 来颁发和撤销 Pass Type ID 证书。我对您的 Apple 技术人员所指的内容很感兴趣，因为据我所知，没有此类服务。

```
// rant 
```

令人沮丧的是，有*许多*批准的应用程序允许完全自定义，但在应用程序开发人员的证书下颁发通行证。

苹果似乎也对某些根据自己的证书颁发通行证的服务视而不见，这些服务带有主要品牌的徽标和商标（然后大胆地呼吁这些品牌“认领他们的通行证”）。

甚至 Passtools（现在的 Urban Airship）也声称提供“来自 PassTools 的唯一 Apple 开发者证书”，这在技术上违反了 Apple 开发者协议。

所以底线是，在这种情况下，你可能只是不走运。

```
// end rant 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:46:02.920

我不确定技术人员在说什么，但 23.3 是指服务器（可能是您的服务器）在将 pkpass 文件发送到设备之前通过通行证进行签名过程。

有关高级信息，请查看存折编程指南的“[签名和压缩通行证](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/YourFirst.html#//apple_ref/doc/uid/TP40012195-CH2-SW28)”部分。

# maven - 我在使用 maven 在 slave 中运行 jenkins 作业时遇到问题（Maven home 不存在）

> ID：14201855
> 
> 赞同：3
> 
> 时间：2013-01-07T18:30:10.003
> 
> 标签：maven, jenkins, master, slave

我在使用奴隶运行 Jenkins 作业时遇到问题。该作业是一个 Maven 作业，它从 svn 更新代码，然后构建和运行测试，这个项目作为一个独立项目在 master 和 slave 中运行良好。问题是当Master在slave中启动这个项目时，在这种情况下我看到：

```
...
Svn Update OK
Error: Maven Home c:\maven doesn´t exist 
```

两台服务器在该目录上都有 maven，并且两台服务器都能够在没有主/从设置的情况下运行构建。

你能看到发生了什么吗？有什么线索吗？

非常感谢，

圣地亚哥

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-04T09:03:52.343

最后，我解决了这个问题。“错误：Maven Home c:\maven 不存在”的原因是您的从节点使用了主节点的 maven 设置。如果从站想要使用自己的设置，它必须覆盖它。覆盖设置如下： **System Management** -> **Node Management** -> your slave setting -> **Node Properties** -> check the *Tools Locations* -> **Add**，然后设置slave maven选项，*别名*选择“maven”，*目录*用slave maven写入目录。你可以试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T17:07:55.207

You need to invoke your top-level maven targets and set the goals and path to pom, for instance: goals: clean install Pom: /home/merbel/sth/pom.xml

# linqpad - 如何将大型结果集从 SQL 查询直接传输到 LINQpad 中的 CSV？

> ID：14201857
> 
> 赞同：1
> 
> 时间：2013-01-07T18:30:21.617
> 
> 标签：linqpad

我们将 Linqpad 用于我们的数据管理员，作为 SSMS 的替代报告工具。我们的大多数管家仍然坚持使用 SQL（我们正在慢慢地将其中的一些转换为 LINQ，但一次一步）。但是，我们在 LINQPad 中遇到了一个限制，我不确定如何处理。对于大型结果集，由于 LINQPad 在推送到屏幕之前首先将查询拉入内存，因此在大型结果集上内存不足。有没有办法将 LINQPad 中的 SQL 查询直接推送到 CSV？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T07:26:38.873

LINQPad 没有为此的内置方法（我应该添加它），但它很容易编写。将以下内容放入“我的扩展”中：

```
public static class MyExtensions
{
    public static void WriteCsv<T> (this IEnumerable<T> elements, string filePath)
    {
        var fields = typeof (T).GetFields();

        var props = typeof (T).GetProperties()
            .Where (p => IsSimpleType (p.PropertyType))
            .ToArray();

        using (var writer = new StreamWriter (filePath))
        {
            string header = string.Join (",", 
                fields.Select (f => f.Name).Concat (props.Select (p => p.Name)))

            // Work around bug in Excel
            if (header.StartsWith ("ID")) header = " " + header;

            writer.WriteLine (header);
            foreach (var element in elements)
            {
                var values =
                    fields.Select (f => Format (f.GetValue (element))).Concat (
                    props.Select (p => Format (p.GetValue (element, null))));

                writer.WriteLine (string.Join (",", values));
            }
        }
    }

    static string Format (object value)
    {
        if (value == null) return "";

        // With DateTimes, it's safest to force a culture insensitive format:
        if (value is DateTime) return ((DateTime)value).ToString ("s");
        if (value is DateTimeOffset) return ((DateTimeOffset)value).ToString ("s");

        string result = value.ToString();
        result = result.Replace ("\"", "\"\"");
        if (result.Contains (",") || result.Contains ("\"") || result.Any (c => c < 0x20))
            result = "\"" + result + "\"";

        return result;
    }

    public static bool IsSimpleType (Type t)
    {
        if (t.IsGenericType && t.GetGenericTypeDefinition () == typeof (Nullable<>))
            t = t.GetGenericArguments() [0];

        return t.IsPrimitive || Type.GetTypeCode (t) != TypeCode.Object ||
               typeof (IFormattable).IsAssignableFrom (t);
    }
} 
```

请注意，这使用当前区域性格式化值（日期除外）。如果你想使用不变的文化，这很容易改变。

在调用它之前，您必须禁用对象跟踪以避免将对象缓存在内存中，方法是设置`ObjectTrackingEnabled`为`false`：

```
ObjectTrackingEnabled = false;
Customers.WriteCsv (@"c:\\temp\\customers.csv"); 
```

# c# - 加载文件不起作用 - GZip 标头中的幻数不正确

> ID：14201858
> 
> 赞同：4
> 
> 时间：2013-01-07T18:30:26.003
> 
> 标签：c#, serialization, gzip, deserialization, binaryformatter

我正在尝试创建一个保存/加载类，该类具有保存和加载文件压缩文件的选项。以下是我到目前为止所拥有的。单步执行它似乎工作得很好，除了我得到一个“GZip 标头中的幻数不正确”异常。我不明白这是怎么回事，因为我正在检查以确保在传递它之前该数字在那里，并且我已经通过外部程序验证它是一个 GZip 文件。

任何帮助找出我出错的地方将不胜感激。总是欢迎对我的代码提出建设性的批评 - 谢谢！

```
public static class SaveLoad
{
    public static void Save(string fileName, object savefrom, bool compress)
    {
        FileStream stream = new FileStream(fileName, FileMode.Create);

        BinaryFormatter formatter = new BinaryFormatter();
        if (compress)
        {
            GZipStream compressor = new GZipStream(stream, CompressionMode.Compress);
            formatter.Serialize(compressor, savefrom);
            compressor.Close();
        }
        else { formatter.Serialize(stream, savefrom); }

        stream.Close();
    }

    public static object Load(string fileName)
    {
        object loadedObject = null;

        try
        {
            FileStream stream = new FileStream(fileName, FileMode.Open);

            BinaryFormatter formatter = new BinaryFormatter();

            if (stream.Length > 4)
            {
                byte[] data = new byte[4];
                stream.Read(data, 0, 4);

                if (BitConverter.ToUInt16(data, 0) == 0x8b1f) //GZIP_LEAD_BYTES == 0x8b1f
                {
                    GZipStream decompressor = new GZipStream(stream, CompressionMode.Decompress);
                    loadedObject = formatter.Deserialize(decompressor); //Exception
                    decompressor.Close();
                }
                else { loadedObject = formatter.Deserialize(stream); }
            }
            stream.Close();
        }
        catch (Exception e)
        {
            Logger.StaticLog.AddEvent(new Logger.lEvent(null, Logger.lEvent.EventTypes.Warning, "Failed to load file: " + fileName, e)
            {
                SendingObject = "SaveLoad"
            });
            Logger.StaticLog.WriteLog();
            throw;
        }

        return loadedObject;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T18:36:18.377

似乎您在将流传递给解压缩器之前读取了幻数（那时它不会读取幻数，因为您已经阅读过它）。

`stream.Seek(0,SeekOrigin.Begin)`解压前使用。

# android - 谷歌分析Phonegap v1.9

> ID：14201867
> 
> 赞同：0
> 
> 时间：2013-01-07T18:30:57.913
> 
> 标签：android, cordova, google-analytics

大家好，我已将 GA 集成到我的 phonegap 1.9 项目中。大约 3 天前，当我在我的 GA 帐户中看到会话时，它开始工作了。但是，它似乎不再显示任何会话或活动用户。有人可以告诉我显示 48 小时统计数据的修复时间范围是多少？还有我如何让它工作以显示实时使用情况。谢谢。

附言。在我的 LogCat 中，我看到它已成功启动并且似乎正在跟踪...

```
 window.plugins.analytics.start("UA-XXXXXXXX-1", function(){console.log("Analytics: start success");}, function(){console.log("Analytics: start failure");}) 
        window.plugins.analytics.trackPageView("index.html", function(){console.log("Track: start success");}, function(){console.log("Track: failed");}); 
```

提前致谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:36:20.237

如果您看到代码中的日志，您应该立即看到统计信息。转到您的兴奋剂主页，单击`Home`“标准报告”旁边的 ，然后单击`Real-Time`，单击`Overview`。如果您正确编写了 UA-ID 和所有内容，您应该会立即看到用法...

在`iOS`and`Titanium`中，由于 API 实现有 20 秒的延迟，但我不确定`PhoneGap`.

# cmake - CMake 无法编译简单测试，错误 5 Access denied

> ID：14201870
> 
> 赞同：0
> 
> 时间：2013-01-07T18:31:09.093
> 
> 标签：cmake, mingw

我对 CMake 还很陌生，当我尝试编译时，我得到了以下输出。我整天都在这无济于事 - 有没有人有这方面的经验？相关目录和文件的权限似乎很好。非常感谢任何帮助！谢谢

```
The C compiler identification is GNU 4.6.2
The CXX compiler identification is GNU 4.6.2
Check for working C compiler: C:/MinGW/bin/gcc.exe
Check for working C compiler: C:/MinGW/bin/gcc.exe -- broken
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:61 (message):
  The C compiler "C:/MinGW/bin/gcc.exe" is not able to compile a simple test
  program.

  It fails with the following output:

   Change Dir: C:/buildtemp/CMakeFiles/CMakeTmp

  Run Build Command:C:/MinGW/bin/mingw32-make.exe
  "cmTryCompileExec2665670929/fast"

  C:/MinGW/bin/mingw32-make.exe -f
  CMakeFiles\cmTryCompileExec2665670929.dir\build.make
  CMakeFiles/cmTryCompileExec2665670929.dir/build

  process_begin: CreateProcess(C:\MinGW\bin\mingw32-make.exe,
  C:/MinGW/bin/mingw32-make.exe -f
  CMakeFiles\cmTryCompileExec2665670929.dir\build.make
  CMakeFiles/cmTryCompileExec2665670929.dir/build, ...) failed.

  make (e=5): Access is denied.

  mingw32-make.exe: *** [cmTryCompileExec2665670929/fast] Error 5

  CMake will not be able to correctly generate this project.
Call Stack (most recent call first):
  CMakeLists.txt:2 (project)

Configuring incomplete, errors occurred! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:45:12.597

问题可能是由 make 删除和创建 helper .bat 文件引起的。在 windows 上，当删除的文件仍然被其他应用程序（防病毒、windows 索引等）引用时，不可能创建同名文件。（[C++/Win32：如何等待挂起的删除完成？](https://stackoverflow.com/questions/3764072/c-win32-how-to-wait-for-a-pending-delete-to-complete)）Make 对新创建的 .bat 文件使用与刚刚删除的文件相同的名称，并出现“DELETE PENDING”错误。

```
Date & Time:    29.3.2013 11:11:14
Event Class:    File System
Operation:  IRP_MJ_CREATE
Result: DELETE PENDING
Path:   D:\<truncated>\Debug\make6436-1.bat
TID:    6120
Duration:   0.0000149
Desired Access: Generic Read/Write
Disposition:    Create
Options:    Synchronous IO Non-Alert, Non-Directory File
Attributes: NT
ShareMode:  None
AllocationSize: 0 
```

因此禁用防病毒软件会有所帮助，但修复 make 会好得多。您也可以尝试在您的防病毒软件中破例。

# angularjs - Angular Seed::控制器的使用示例

> ID：14201872
> 
> 赞同：1
> 
> 时间：2013-01-07T18:31:15.157
> 
> 标签：angularjs

[种子应用程序](https://github.com/angular/angular-seed)使用引用控制器的路由，控制器的定义如下：

```
function MyCtrl1() {} 
MyCtrl1.$inject = []; 
```

寻找一个更好的例子（即）显示注入，也许是一个 HTTP 获取和更新范围？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:31:20.313

我不确定你到底想要什么，但这里有一个更复杂的例子。

**控制器：**

```
function MyCtrl1 ( $scope, $http ) {
  $http.get( '/some/location' ).success( function ( data ) {
    $scope.items = data;
  });
}
MyCtrl1.$inject = [ '$http' ]; 
```

**看法：**

```
<div ng-controller="MyCtrl1">
  <ul>
    <li ng-repeat="item in items">{{item.name}}</li>
  </ul>
</div> 
```

**评论：**

在现实世界的场景中，$http 调用将位于您自己的服务中，而该服务将被注入到控制器中。另外，我建议不要在全局空间中定义控制器。定义相同控制器的更好方法如下：

```
angular.module('myApp', [])
.controller( 'MyCtrl', [ '$http', function MyCtrl1 ( $scope, $http ) {
  $http.get( '/some/location' ).success( function ( data ) {
    $scope.items = data;
  });
}]); 
```

**更新：**

没有作用域的控制器是无用的——真的什么都做不了——所以 Angular 会自动将 $scope 注入到每个控制器中。必须请求注入所有其他服务。和`MyCtrl1.$inject`数组语法都是在缩小后仍然保持功能所必需的。如果您使用我的代码创建示例文件并删除该`$inject`行，它仍然可以工作。但是当您缩小 Javascript 时，变量名称会减少，因此我们将重要信息放在字符串中。

我建议阅读本[教程](http://docs.angularjs.org/tutorial)以及观看[AngularJS YouTube 频道](http://www.youtube.com/user/angularjs/videos?view=0)上的一些视频，例如[这个](http://www.youtube.com/watch?v=k4qVkWh1EAo)。

# php - Eclipse 的 PHP 开发工具在 Windows 7 64 位上不起作用

> ID：14201877
> 
> 赞同：0
> 
> 时间：2013-01-07T18:32:10.003
> 
> 标签：php, eclipse, java, eclipse-pdt

我刚刚下载了 Eclipse 的 PHP 开发工具，但我无法打开它，它会打开一个警告窗口：

```
a java runtime environment jre or java development kit jdk must
be available in order to run eclipse for PHP-developers 
```

我安装了 jre 和 jdk，但仍然收到相同的警报消息。我的电脑上运行着 Windows 7 Ultimate 64bit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:40:05.963

试试这个[http://www.eclipse.org/forums/index.php/t/288821/](http://www.eclipse.org/forums/index.php/t/288821/)或[http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example](http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Windows_Example) 这可能会解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:38:44.160

请安装 jreX86，卸载 jre64。PHP开发工具（eclipse-php-3.0.2.v20120611144）是

# java - 在表格单元格中查找单击按钮的行索引

> ID：14201879
> 
> 赞同：1
> 
> 时间：2013-01-07T18:32:13.703
> 
> 标签：java, swt

我的表格的最后一列填充了一个按钮。当用户单击按钮时，我想打开一个与按钮也在同一行的文件。

![在此处输入图像描述](../Images/774599f77f875f39fac2836a0b8042ae.png)

这是按钮的列代码。

```
 case 6:
               Map<Object, Button> buttons = new HashMap<Object, Button>();   
               TableItem item = (TableItem) cell.getItem();
               Button button;
               if(buttons.containsKey(cell.getElement())) {
                  button = buttons.get(cell.getElement());
               }
               else
               {
                 button = new Button((Composite) cell.getViewerRow().getControl(),SWT.PUSH);
                 //button.setText("Adobe");
                 button.setImage(loadImage("/images/AdobeIcon.png"));

                 buttons.put(cell.getElement(), button);
               }
               TableEditor editor = new TableEditor(item.getParent());
               editor.grabHorizontal  = true;
               editor.grabVertical = true;
               editor.setEditor(button , item, cell.getColumnIndex());
               button.addListener(SWT.Selection, new SelectionListener(item, button, cell.getElement()));
               editor.layout(); 
```

1.  是否可以将选定的索引发送到侦听器类？如果他们点击第一个按钮 - 发送 0 如果他们点击第二个按钮 - 发送 1

2.  我什至需要 TableEditor 吗？

如果可能的话，它会使侦听器代码变得简单。

这就是我在侦听器代码中正在尝试的。

```
 @Override
  public void handleEvent(Event event) {
     AplotSaveDataModel.SaveData selected = (( AplotSaveDataModel.SaveData)element);
     int index = AplotSaveDataModel.getInstance().getIndexOf(selected);
     final File viewerFile = new File(AplotSaveDataModel.getInstance().getSelectedPDFFileName(index));
     try {
        Desktop.getDesktop().open(viewerFile);
     }
     catch (IOException e) {
        e.printStackTrace();
     }
  } 
```

3.  为什么上面的代码总是返回 0 的索引？

***编辑***

我不完全理解如何在按钮的数据中获取行索引。

```
button.setData("row.id", rowId); 
```

我假设“row.id”是一个键，rowId 是值。所以我需要用代码填充 rowId 来获取行索引。

```
int rowId = "Some code to get the Row Index"? 
```

如果我想获取列索引，我可以这样做

```
int rowId = cell.getColumnIndex(); 
```

我不知道如何填充 rowId 以获取行索引/编号？

这是获取列号的代码（不需要）

```
 case 6:
               Map<Object, Button> buttons = new HashMap<Object, Button>();   
               TableItem item = (TableItem) cell.getItem();
               Button button;
           ***int rowId = cell.getColumnIndex();***
               if(buttons.containsKey(cell.getElement())) {
                  button = buttons.get(cell.getElement());
               }
               else
               {
                 button = new Button((Composite) cell.getViewerRow().getControl(),SWT.PUSH);
                 //button.setText("Adobe");
                 button.setImage(loadImage("/images/AdobeIcon.png"));
              ***button.setData("row.id", rowId);***
                 buttons.put(cell.getElement(), button);
               }
               TableEditor editor = new TableEditor(item.getParent());
               editor.grabHorizontal  = true;
               editor.grabVertical = true;
               editor.setEditor(button , item, cell.getColumnIndex());
               button.addListener(SWT.Selection, new SelectionListener(item, button, cell.getElement()));
               editor.layout();
              } 
```

监听类

```
 @Override
    public void handleEvent(Event event) {
     if (event.widget instanceof Button) {
        int rowId = (Integer) event.widget.getData("row.id");
        System.out.println("Row Int " + rowId + "\n");
     } 
```

请帮我完成这项工作 - 这是我项目中非常重要的一部分

***编辑 2*********

```
 public class AplotPDFResultsTableViewer extends TableViewer {

 public AplotPDFResultsTableViewer(Composite parent, int style) {
  super(parent, style);
  Table table = getTable();
  GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
  table.setLayoutData(gridData);
  createColumns();
  table.setHeaderVisible(true);
  table.setLinesVisible(true);
  setContentProvider(new ArrayContentProvider());
}

public static Image loadImage(String path)
{
  Image newImage = null;
  try {
     newImage = new Image(null, AplotPDFResultsTableViewer.class.getClassLoader().getResourceAsStream(path));
  }
  catch(SWTException ex) {
      System.out.println("Couldn't find " + path);
      ex.printStackTrace();
  }
  return newImage;
}

private void createColumns() {

  TableViewerColumn col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(150);
  col.getColumn().setText("Creation Date");
  col.setLabelProvider(new ColorColumnLabelProvider());

  col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(150);
  col.getColumn().setText("ItemId");
  col.setLabelProvider(new ColorColumnLabelProvider());

  col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(50);
  col.getColumn().setText("RevId");
  col.setLabelProvider(new ColorColumnLabelProvider());

  col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(50);
  col.getColumn().setText("PRL");
  col.setLabelProvider(new ColorColumnLabelProvider());

  col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(200);
  col.getColumn().setText("File Location");
  col.setLabelProvider(new ColorColumnLabelProvider());

  col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(200);
  col.getColumn().setText("File Name");
  col.setLabelProvider(new ColorColumnLabelProvider());

  col = new TableViewerColumn(this , SWT.NONE);
  col.getColumn().setWidth(50);
  col.getColumn().setText("");
  col.setLabelProvider(new ColorColumnLabelProvider());
}

public class ColorColumnLabelProvider extends ColumnLabelProvider {
  @Override
  public void update(final ViewerCell cell) {

      Object element = cell.getElement();
      if(element instanceof AplotSaveDataModel.SaveData) {

         AplotSaveDataModel.SaveData p = (AplotSaveDataModel.SaveData) element;
         switch(cell.getColumnIndex()) {

            case 0:
               cell.setText(p.getDateTime());
               break;
            case 1:
               cell.setText(p.getItemId());
               break;
            case 2:
               cell.setText(p.getRevId());
               break;
            case 3:
               cell.setText(p.getPRL());
               break;
            case 4:
               //cell.setForeground(black);
               cell.setText(p.getFileDir());
               break;
            case 5:
               //cell.setForeground(black);
               cell.setText(p.getfileName());
               break;
            case 6:
               Map<Object, Button> buttons = new HashMap<Object, Button>();   
               TableItem item = (TableItem) cell.getItem();
               Button button;
               int rowId = cell.getColumnIndex();
               if(buttons.containsKey(cell.getElement())) {
                  button = buttons.get(cell.getElement());
               }
               else
               {
                 button = new Button((Composite) cell.getViewerRow().getControl(),SWT.PUSH);
                 //button.setText("Adobe");
                 button.setImage(loadImage("/images/AdobeIcon.png"));
                 button.setData("row.id", rowId);
                 buttons.put(cell.getElement(), button);
               }
               TableEditor editor = new TableEditor(item.getParent());
               editor.grabHorizontal  = true;
               editor.grabVertical = true;
               editor.setEditor(button , item, cell.getColumnIndex());
               button.addListener(SWT.Selection, new SelectionListener(item, button, cell.getElement()));
               editor.layout();
              }
          }
      }
}// End ColorColumnLabelProvider Class

// ===============================================================
//
//    SelectionListener Class
//
// ===============================================================
class SelectionListener implements Listener {
  TableItem item;
  Button editButton;
  Object element;

  //////////////////////////////////////////////////////////////////////////
  //                         Constructor                                  //
  //////////////////////////////////////////////////////////////////////////
  public SelectionListener(TableItem item, Button editButton, Object element) {
      this.item = item;
      this.editButton = editButton;
      this.element = element;
   }

  //////////////////////////////////////////////////////////////////////////
  //                         handleEvent                                  //
  //////////////////////////////////////////////////////////////////////////
  @Override
  public void handleEvent(Event event) {
     if (event.widget instanceof Button) {
        int rowId = (Integer) event.widget.getData("row.id");
        System.out.println("Row Int " + rowId + "\n");
     }
     //AplotSaveDataModel.SaveData selected = (( AplotSaveDataModel.SaveData)element);
     //int index = AplotSaveDataModel.getInstance().getIndexOf(selected);
     //final File viewerFile = new   File(AplotSaveDataModel.getInstance().getSelectedPDFFileName(index));
     //try {
     //   Desktop.getDesktop().open(viewerFile);
     //}
     //catch (IOException e) {
     //   e.printStackTrace();
    //}
  }
}// End SelectionListener Class
}  // End AplotPDFTableViewer Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T10:52:10.137

对于每个按钮实例，您可以在小部件上设置一个数据，以帮助您识别按下了哪一行的按钮。创建按钮时：

```
Button button = ...
button.setData("row.id", rowId); // Can also use row index here or something 
```

您也可以将文件路径直接保存为数据。在听众中：

```
@Override
public void handleEvent(Event event) {
    if (event.widget instanceof Button) {
        String rowId = event.widget.getData("row.id");
        ...
    }
    ...
} 
```

# java - 使用java搜索子字符串的SQL

> ID：14201882
> 
> 赞同：0
> 
> 时间：2013-01-07T18:32:19.030
> 
> 标签：java, sql

我有以下 SQL 行（在循环中）：

```
ResultSet rs = stmt.executeQuery("SELECT * FROM item WHERE itemName='"+ string.get(1) +"'"); 
```

`string.get(1)`每次循环执行时都包含不同的字符串。在当前 SQL 行中，我将仅恢复等于 的行`string.get(1)`，但我想获取所有属于 我知道它应该去`string.get(1)`的子字符串的行：但是我不知道确切的语法。`itemName``%string.get(1)%`

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:35:47.357

**在 SQL 中使用`LIKE`子句。**

```
ResultSet rs = stmt.executeQuery
    ("SELECT * FROM item WHERE itemName LIKE '%"+ string.get(1) +"%'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:36:09.227

你是这个意思？

```
SELECT * FROM TABLE WHERE COL LIKE '%SOME_TEXT%'; 
```

# php - 使用 cURL 对我的联系人进行字母排序

> ID：14201885
> 
> 赞同：0
> 
> 时间：2013-01-07T18:32:39.157
> 
> 标签：php, sorting, curl

我正在使用此方法接收我在 Google 通讯录上的所有联系人：

```
session_start();

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://www.google.com/accounts/ClientLogin');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);

$data = array(
    'accountType' => 'GOOGLE',
    'Email' => 'email',
    'Passwd' => 'password',
    'source' => 'sourcetest',
    'service' => 'cp'
);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

$responses = explode("\n", curl_exec($ch));
$_SESSION['auth'] = str_replace('Auth=', '', $responses[2]);
$_SESSION['email'] = 'email';

$url = 'https://www.google.com/m8/feeds/contacts/default/full';
$url .= '?group=http://www.google.com/m8/feeds/groups/'.$_SESSION['email'].'/base/6';
$url .= '&max-results=500&alt=json';

$ch = curl_init($url);

$header[] = 'Authorization: GoogleLogin auth='.$_SESSION['auth'];
$header[] = 'GData-Version: 3.0';

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, false);

$response = curl_exec($ch);
curl_close($ch);

/** **** **** **** **** **** **** **** **** **** **** **/

# CONTROL
if(isset($response_as_array['feed']) AND isset($response_as_array['feed']['entry'])) {

    # TABLE
    echo '<table width="100%" cellpadding="0" cellspacing="0">';
    echo '<tr>';
        echo '<td align="left" class="padding-td" width="180">';
            echo '<b>Namn</b>';
        echo '</td>';

        echo '<td align="left" class="padding-td">';
            echo '<b>Telefon-nummer</b>';
        echo '</td>';
    echo '</tr>';

    # LOOP
    foreach($response_as_array['feed']['entry'] AS $i => $entry) {

        # CONTROL: Hide my name
        if(utf8_decode($entry['gd$name']['gd$fullName']['$t']) != 'Erik Edgren') {

            echo '<tr>';
                echo '<td align="left" class="padding-td">';
                    echo utf8_decode($entry['gd$name']['gd$fullName']['$t']);
                echo '</td>';

                echo '<td align="left" class="padding-td">';
                    echo isset($entry['gd$phoneNumber'][0]) ? $entry['gd$phoneNumber'][0]['$t'] : '';
                echo '</td>';
            echo '</tr>';

        }

    }

    echo '</table>';

} 
```

它工作正常，但它没有按字母顺序对联系人进行排序。我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:43:59.740

我假设您有一个`$response_as_array['feed']['entry']`包含所有联系人的数组，那么您可以使用：

```
usort($response_as_array['feed']['entry'], function($a, $b) { 
    return strcmp($a['gd$name']['gd$fullName']['$t'], $b['gd$name']['gd$fullName']['$t']);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:37:49.487

你可以试试`asort()`： http: [//php.net/manual/en/function.asort.php](http://php.net/manual/en/function.asort.php)

您可能需要重新安排来自 Google 的数据才能临时执行此操作。

老实说，我会想象谷歌会提供一些额外的条件，你可以使用它们来让他们为你排序。它将附加到请求 URL。

# r - 如何使用 R 中的“循环”包在玫瑰图中移动箱柜

> ID：14201891
> 
> 赞同：5
> 
> 时间：2013-01-07T18:32:43.730
> 
> 标签：r, rose-diagram

我使用 R 中的 'circle' 包和 rose.diag 函数创建了位置数据的度数方面的玫瑰图，具有 N、NE、E 等的基本方面，总共 8 个 bin。然而，这些箱子不跨越这些方面。换句话说，第一个 bin 从 0 到 45，第二个从 45 到 90，依此类推，这以奇怪的方式汇集了方面数据。有什么方法可以移动垃圾箱，使 0、45、90 等成为垃圾箱的中心，而不是边缘？

```
rose.diag(Degrees$Degrees, bins=8,zero=pi/2, units = 'degrees', rotation='clock') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T06:48:29.790

我认为 Ben 是正确的，它不能轻易完成`rose.diag`，所以这里有一个使用的解决方案`ggplot2`：

```
library(ggplot2)
Degrees <- runif(100, 0, 360)
rose <- ggplot(mapping = aes(x = Degrees)) +
  stat_bin(breaks = (0:8 - 0.5)/8 * 360) +
  scale_x_continuous(
    breaks = 0:7/8*360, 
    labels = c("N", "NE", "E", "SE", "S", "SW", "W", "NW")
    ) +
  coord_polar(start=-pi/8)
rose 
```

![在此处输入图像描述](../Images/b0f912330dff8dfc06f092aeea0a163e.png) 这可能并不理想，因为并非所有功能`rose.diag`在 ggplot2 中都有简单的等价物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:44:45.213

您可以使用 package.json 获得类似的东西`gridBase`。一旦我们处于良好视口的空间中，我们就会继续使用`rose.diag`并绘制情节。`hack`

![在此处输入图像描述](../Images/d9735f171aa1573cac469c1ea323da60.png)

```
require(grid)
#grid.newpage()
##generate some data 
x <- circular(runif(50, 0, 2*pi))
bins <- 8
rotation <- 'clock'
##tcl =0(no ticks), tcl.text=-2 to write away the ticks marks
rose.diag(x, bins=bins,zero=0,  rotation='clock',
          tcl=0,tcl.text=-2,col='#80FF00FF')
library(gridBase)
## I use the plot viewport
vp <- baseViewports()$plot
pushViewport(vp)           ## here we go!
## radial transformation 
at <- (0:bins - 0.5)/bins * 2 * pi

## ticks
grid.segments( x0 =  .95*sin(at),  y0 = 0.95*cos(at),
               x1 = 1.05*sin(at),  y1 = 1.05*cos(at),
               default.units = "native")
## ticks labels
grid.text(x = 1.1*sin(at),   default.units = "native",
          y = 1.1*cos(at),   gp=gpar(col='red'),
          label = c("N", "NE", "E", "SE", "S", "SW", "W", "NW")) 
```

对于视觉方面，我添加了一些调整，但上面的一些代码已经回答了这个问题。

```
## dashed lines from the center for visual aspect 
grid.segments( x0 =  .95*sin(at),  y0 = 0.95*cos(at),
               x1 = 0,  0,
               gp = gpar(lty="dashed"),
               default.units = "native")

## circle just to get the same color of text
grid.circle(r=1,x=0,y=0,gp=gpar(col='red',fill=NA,lwd=2), default.units = "native")
## remove the viewport
popViewport(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T07:58:12.483

为什么不旋转原始数据？cdat 以下的 Nb 以度为单位（零 = pi / 2），而零以 2*pi 为单位

rose.diag(cdat - 10, bins = 20, col="darkgrey", prop=1.3, axes=FALSE, add=TRUE, zero = pi/2-pi/20)

复制/粘贴我正在处理的内容：

```
library(circular)

raw <-read.csv("C:\\Users\\Andy\\Desktop\\business\\research\\Oxford\\MichelDish\\r.csv", header=T)
raw <-na.omit(raw)

cdat <- circular(raw [, c ("kandUnknown")],type="angles",units="degrees", rotation="clock", zero=pi/2)

plot(cdat, cex=1.1, bin=720, stack=TRUE, sep=0.035, shrink=1.8, tcl.text=.2)

ticks.circular(circular(seq(0,2*pi,pi/8)), zero=pi/2, rotation='clock', tcl=0.075)

rose.diag(cdat - 10, bins = 20, col="darkgrey", prop=1.3, axes=FALSE, add=TRUE, zero = pi/2 - pi/20)

lines(density.circular(cdat, bw=40), lwd=2, lty=1) 
```

[![在此处输入图像描述](../Images/e90d67ebda25ca34c1093a66a063fd03.png)](https://i.stack.imgur.com/7Zgcl.jpg)

注意下面的代码为您提供了旧图（左上图）：

```
rose.diag(cdat, bins = 20, col="darkgrey", prop=1.3, axes=FALSE, add=TRUE) 
```

ps 对于好奇的人，我们正在使用这样的统计数据，例如[http://www.sciencedirect.com/science/article/pii/S0950329315001068](http://www.sciencedirect.com/science/article/pii/S0950329315001068)

# c# - 在 C# 应用程序中显示 tcp 视频流（来自 FFPLAY / FFMPEG）

> ID：14201894
> 
> 赞同：5
> 
> 时间：2013-01-07T18:33:03.927
> 
> 标签：c#, video, stream, ffmpeg

我试图让我的 Parrot AR Drone 2.0 在 Windows 机器上工作。

我有一个简单的 C# 应用程序来控制它 - 但现在我想要我的应用程序中的视频流。

如果我执行`ffplay tcp://192.168.1.1:5555`它会连接到视频流并显示一个带有视频的窗口。

如何在我的应用程序中获取此视频？比如，一个简单的“框架”或“图像”填充了这些内容？

我从来没有在 C# 上工作过那么多，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-11T01:26:08.877

您可以启动该`ffplay`过程，然后 PInvoke`SetParent`将播放器窗口放置在您的表单`MoveWindow`中并定位它。

为此，您需要定义以下内容。

```
[DllImport("user32.dll", SetLastError = true)]
private static extern bool MoveWindow(IntPtr hWnd, int X, int Y, int nWidth, int nHeight, bool bRepaint);

[DllImport("user32.dll")]
private static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent); 
```

然后你可以像这样使用这两种本机方法。

```
// start ffplay 
var ffplay = new Process
    {
        StartInfo =
            {
                FileName = "ffplay",
                Arguments = "tcp://192.168.1.1:5555",
                // hides the command window
                CreateNoWindow = true, 
                // redirect input, output, and error streams..
                RedirectStandardError = true,
                RedirectStandardOutput = true,
                UseShellExecute = false    
            }
    };

ffplay.EnableRaisingEvents = true;
ffplay.OutputDataReceived += (o, e) => Debug.WriteLine(e.Data ?? "NULL", "ffplay");
ffplay.ErrorDataReceived += (o, e) => Debug.WriteLine(e.Data ?? "NULL", "ffplay");
ffplay.Exited += (o, e) => Debug.WriteLine("Exited", "ffplay");
ffplay.Start();

Thread.Sleep(200); // you need to wait/check the process started, then...

// child, new parent
// make 'this' the parent of ffmpeg (presuming you are in scope of a Form or Control)
SetParent(ffplay.MainWindowHandle, this.Handle);

// window, x, y, width, height, repaint
// move the ffplayer window to the top-left corner and set the size to 320x280
MoveWindow(ffplay.MainWindowHandle, 0, 0, 320, 280, true); 
```

该`ffplay`过程的标准输出，您通常在命令窗口中看到的文本是通过`ErrorDataReceived`. 将 设置`-loglevel`为类似于`fatal`传递给 ffplay 的参数中的内容可以减少引发的事件数量并允许您仅处理真正的失败。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-26T13:24:26.980

您是否尝试过使用媒体播放器进行流式传输？只需从表单的工具箱中添加控件，然后将以下代码添加到您的 form.cs

```
 private void Form1_Load(object sender, EventArgs e)
    {
        axWindowsMediaPlayer1.URL = "your URL";
    }
} 
```

以下链接中的详细信息

```
http://msdn.microsoft.com/en-us/library/bb383953%28v=vs.90%29.aspx 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-09T15:25:24.700

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Diagnostics;
using System.Threading;
using System.IO;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Drawing.Text;
using System.Text.RegularExpressions;
using System.Configuration;
using Microsoft.Win32;
using System.Windows.Forms.VisualStyles;

namespace FfplayTest
{
    public partial class Form1 : Form
    {
        [DllImport("user32.dll", SetLastError = true)]
        private static extern bool MoveWindow(IntPtr hWnd, int X, int Y, int nWidth, int nHeight, bool bRepaint);

        [DllImport("user32.dll")]
        private static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

        [DllImport("user32.dll", EntryPoint = "SetWindowPos")]
        public static extern IntPtr SetWindowPos(IntPtr hWnd, int hWndInsertAfter, int x, int Y, int cx, int cy, int wFlags);

        public Form1()
        {
            InitializeComponent();
            Application.EnableVisualStyles();
            this.DoubleBuffered = true;
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        public Process ffplay = new Process();
        private void xxxFFplay()
        {

            ffplay.StartInfo.FileName = "ffplay.exe";

            string _argString = "-fflags nobuffer \"rtsp://admin:admin@192.168.0.163/live0.264\" -x 640 -y 480";
            string _newArgString = _argString.Replace("\",\"", ";");
            ffplay.StartInfo.Arguments = _newArgString;

            ffplay.StartInfo.CreateNoWindow = true;
            ffplay.StartInfo.RedirectStandardOutput = true;
            ffplay.StartInfo.UseShellExecute = false;

            ffplay.EnableRaisingEvents = true;
            ffplay.OutputDataReceived += (o, e) => Debug.WriteLine(e.Data ?? "NULL", "ffplay");
            ffplay.ErrorDataReceived += (o, e) => Debug.WriteLine(e.Data ?? "NULL", "ffplay");
            ffplay.Exited += (o, e) => Debug.WriteLine("Exited", "ffplay");
            ffplay.Start();
            IntPtr intPtr = ffplay.MainWindowHandle;
            Thread.Sleep(200); // you need to wait/check the process started, then...

            // child, new parent
            // make 'this' the parent of ffmpeg (presuming you are in scope of a Form or Control)
            SetParent(ffplay.MainWindowHandle, this.Handle);

            // window, x, y, width, height, repaint
            // move the ffplayer window to the top-left corner and set the size to 320x280
            MoveWindow(ffplay.MainWindowHandle, 0, 0, 320, 280, true);

        }

        private void button1_Click(object sender, EventArgs e)
        {
            xxxFFplay();
        }

        private void Form1_FormClosed(object sender, FormClosedEventArgs e)
        {
            try { ffplay.Kill(); }
            catch { }
        }
    }
} 
```

我的代码是这样的，它如何加载 ffplay 但不要移入面板或不将其定位到给定

# ruby-on-rails - Kaminari 与 AJAX，无法分页

> ID：14201895
> 
> 赞同：0
> 
> 时间：2013-01-07T18:33:10.333
> 
> 标签：ruby-on-rails, ruby, ajax, kaminari, pagination

我在这里遵循了 AJAX Kaminari 示例：[https ://github.com/amatsuda/kaminari_example/tree/ajax](https://github.com/amatsuda/kaminari_example/tree/ajax)

我已经成功生成了部分和表格。但是，按分页中的页面不会更新我的表格。事实上，在按下时，查询是完全相同的数据。

我发现了一个类似的问题，但解决方案仍未得到解答： [kaminari ajax pagination not updated the paginate](https://stackoverflow.com/questions/5518616/kaminari-ajax-pagination-not-updating-the-paginate)

我可以验证我正在使用#paginator 元素。

我做了一些不同的事情，而不是创建一个单独的 js.erb 文件，我补充说

```
<script>

$('#paginator').html('<%= escape_javascript(paginate(@pending_requests, :remote => true).to_s) %>');
$('#requests').html('<%= escape_javascript render (@pending_requests) %>');

</script> 
```

在我的 html.erb 文件的末尾。

此外，在一个视图中，我使用 ajax 请求来选择表中的不同数据。例如，我有一个 select_tag，它在选择用户时，会在视图中使用 AJAX 呈现相应的表。该表不是部分的，它在控制器中有自己的视图和方法。起初我怀疑正因为如此，表没有被更新。但是，如果我转到表格 url，我仍然无法使用分页！

编辑：我可以右键单击分页链接并将它们打开到另一个选项卡。单击它们仍然没有任何作用。

编辑：

我想补充一点，我正在使用 Twitter Bootstrap。我注意到如果我在控制器中设置

```
format.html { render :layout => false } 
```

然后我打开一个分页链接到另一个页面，我可以成功分页。我正在使用 Kaminari 引导主题但是......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:04:14.340

我没有看到添加评论的地方，所以这不是一个真正的答案。

是否只使用 AJAX 渲染表格？是另一个页面的部分吗？或者是一个单独的视图？

我有一个类似的问题（你在 Kaminari 标签页面[链接](https://stackoverflow.com/questions/14187892/kaminari-index-from-both-data-remote-and-html-messing-with-links)之前的最后一篇文章，我可以选择将表格呈现为显示视图中的一部分或作为单独的页面。这把事情搞砸了。我结束了，就像你添加一个脚本标签，但你的标签没有包含在文档就绪函数中，所以页面可能没有完全加载。试试看。

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
    $('#paginator').html('<%= escape_javascript(paginate(@pending_requests, :remote => true).to_s) %>');
    $('#requests').html('<%= escape_javascript render (@pending_requests) %>');
  })
</script> 
```

# perforce - perforce 中的时间规则

> ID：14201896
> 
> 赞同：2
> 
> 时间：2013-01-07T18:33:11.377
> 
> 标签：perforce, clearcase

我想将 main 中的文件限制为早于 2013 年 1 月 4 日。`clearcase`我可以使用`time`命令完成此操作：

```
time 04-Jan-2013.01:00:00
element * /main/LATEST 
```

我想知道如何做到这一点`perforce`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:41:28.460

[perforce 同步页面](http://www.perforce.com/perforce/r11.1/manuals/p4web/help/sync.html)提到您可以使用日期：

```
Label or Date 
```

> 同步到特定的符号修订版本（标签或日期）。在提供的空白处输入标签或日期。

这似乎比 a 更合适[`p4 rollback`](http://www.perforce.com/perforce/doc.current/manuals/p4v/Working_with_changelists.html)，它对每个更改列表应用更改列表。

来自[`p4 sync`](http://www.perforce.com/perforce/r12.2/manuals/cmdref/sync.html)：

```
p4 sync @2011/06/24 
```

> 自 2011 年 6 月 24 日午夜起，使工作区与库同步。（即，包括 6 月 23 日期间所做的所有更改。）

# javascript - AngularJS - 无法访问 RootScope

> ID：14201899
> 
> 赞同：3
> 
> 时间：2013-01-07T18:33:28.847
> 
> 标签：javascript, controller, scope, angularjs

奇怪的问题，我无法访问在 CtrlA 中设置的 CtrlB 变量中的 $rootScope。

**HTML**：

```
<div role="main" class="container_9" ng-controller="CountryCtrl" ng-init="updateToken('<?php echo $TOKEN; ?>')"> 
```

**CtrlA**

```
app.controller('CountryCtrl', function ($scope,$rootScope, $http) {
  $scope.updateToken = function(token) {
        $rootScope.token = token;
  } 
}); 
```

**CtrlB**

```
app.controller('DealerListCtrl', function ($scope, $http, $rootScope, dealerService) {
  $scope.dealer = [];
    $http.get('files/framework/dealer/'+ $rootScope.token).success(function(data) {
        $scope.dealerall = data;
    });
  //$scope.dealerall = dealerService.api.get({token: $scope.token});
  $scope.orderProp = 'name';

}); 
```

**错误信息：**

```
/framework/dealer/undefined 500 (Internal Server Error) 
```

我究竟做错了什么？

**更新**
Plunker 代码：
[http ://plnkr.co/edit/r559zyMKjA64xSdmrTem](http://plnkr.co/edit/r559zyMKjA64xSdmrTem)

跑不动了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:23:47.283

这里有两个关键问题：首先，您在应该使用服务时使用了 $rootScope，其次，您假设了控制器的执行顺序。如果只是一秒钟的事情，您可以设置 $watch 命令来监视更改，以确保您的第二个控制器在设置时具有更新的值。

但是你不应该污染全局范围。将您的令牌包装到可以注入的服务中，您可以在该服务上 $watch 以查看更改。也就是说，在不知道您的控制器在什么上下文中运行的情况下，我无法发布任何更具体的内容（即代码）。

但我希望这会有所帮助！如果你愿意，可以用更多信息更新你的帖子，我会更深入一点。实际上，如果您可以创建一个我可以直接修改的 Plunker 或 jsFiddle，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:58:14.923

它访问`$rootScope`就好了。如果不是，您将收到有关 $rootScope 未定义的 javascript 错误。相反，它将“未定义”附加到请求 URL 的末尾，意思`$rootScope.token`是未定义。做任何你需要确保`$rootScope.token`定义的事情。

我怀疑 CtrlB 在 CtrlA 之前被调用，因此`$rootScope.token`尚未设置。

# android - 横向自动完成未获得位置

> ID：14201900
> 
> 赞同：2
> 
> 时间：2013-01-07T18:33:30.440
> 
> 标签：android, autocompletetextview

当我单击该项目时，填充 AutoComplete 下拉列表的 ArrayAdapter 对于横向位置大于 5 的位置返回“-1”。当我的应用程序纵向运行时，单击和项目时会返回正确的索引。下面是 2 个屏幕截图，展示了适配器如何在每个方向上填充数据：

编辑：有没有办法强制使用我的下拉列表而不是手机的横向？

![横向自动完成](../Images/8f07da2f15a04a9a76451eb60a5ca8d1.png)

![纵向自动完成](../Images/1fd58ff424e72f64bf2401b63f7e3e42.png)

不知道这可能是什么罪魁祸首？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:34:19.320

一种解决方法，并不理想，因为如果小屏幕手机与三星 Galaxy S III 一样（返回数组第 6 位之外的 -1 索引），那么崩溃仍然会发生，我在下面的代码中有.

```
if (!((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_SMALL)) {
            mQuery.setImeOptions(EditorInfo.IME_FLAG_NO_EXTRACT_UI);
} else {
            mQuery.setImeOptions(EditorInfo.IME_ACTION_SEARCH);
} 
```

HTC Wildfire 具有与三星相同的下拉菜单，但返回的位置超过了索引 5。

我将继续调查为什么 S III 不工作，但我猜测它是在操作系统级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-20T13:34:39.880

这是一个非常古老的问题，但我遇到了同样的问题（我在三星 Galaxy S5 上注意到了这个错误）。`performFiltering`我在我的方法中添加了以下代码`ArrayAdapter`

```
@Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults filterResults = new FilterResults();
            ArrayList<PlaceAutocomplete> queryResults;

            if (constraint != null && constraint.length() > 0) queryResults = getPredictions(constraint);
            else queryResults = new ArrayList<>(); // empty list/no suggestions

            //HERE'S THE IMPORTANT STUFF
            int orientation = context.getResources().getConfiguration().orientation;
            if ((queryResults !=null) && (queryResults.size() >4) && (orientation ==Configuration.ORIENTATION_LANDSCAPE)) {
                // if user in landscape and more than four suggestions offered by Google Places
                PlaceAutocomplete item1 = queryResults.get(0);
                PlaceAutocomplete item2 = queryResults.get(1);
                PlaceAutocomplete item3 = queryResults.get(2);
                PlaceAutocomplete item4 = queryResults.get(3);
                // empty the suggestion list
                queryResults.clear();
                // add the only first four suggestion
                queryResults.add(item1);
                queryResults.add(item2);
                queryResults.add(item3);
                queryResults.add(item4);
            }

            filterResults.values = queryResults;
            if (queryResults !=null) filterResults.count = queryResults.size();

            return filterResults;
        } 
```

然后为了安全起见，我在

```
private final AdapterView.OnItemClickListener mAutocompleteClickListener =new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        try {
            final PlaceArrayAdapter.PlaceAutocomplete item = placeArrayAdapter.getItem(position);
            final String placeId = String.valueOf(item != null ? item.placeId : null);
            final String placeDesc = String.valueOf(item != null ? item.description : null);
            PendingResult<PlaceBuffer> placeResult = Places.GeoDataApi.getPlaceById(googleApiClient, placeId);
            placeResult.setResultCallback(mUpdatePlaceDetailsCallback);
        } catch (Exception | Error exception) {
            //handle the exception (bug)
        }
    }
}; 
```

我测试了 try/catch 和 adaper 更改。两者都有效。

# ios - 在应用程序中下载“应用程序”？

> ID：14201907
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:34:15.477
> 
> 标签：ios, iphone, app-store, itunes

我正在开发一个新的应用程序，我快完成了！

在我的应用程序中，我使用 URLScheme 安装了新的“应用程序”（不是真正的应用程序，但我不知道如何调用它）。

因此，您使用 URLScheme 安装“应用程序”（“应用程序”包括图标和应用程序的功能，例如，它将 HTML 内容下载到我的应用程序，并通过单击现在安装的图标，打开 HTML 内容):

所以我的问题是，我可以发布这样的应用程序吗？还是我在使用 Apple 时遇到问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:21:18.513

引用[Apple 的 App Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)：

```
2.7    Apps that download code in any way or form will be rejected
2.8    Apps that install or launch other executable code will be rejected 
```

# dynamic - 动态 Flot 图表 - 通过单击图表上的图例文本或框显示隐藏系列

> ID：14201911
> 
> 赞同：16
> 
> 时间：2013-01-07T18:34:57.293
> 
> 标签：dynamic, graph, show-hide, flot, series

我正在研究 3 系列的动态浮点图。我需要在单击图例时隐藏/显示系列。我已经看到了不同的示例，它们适用于静态图，但适用于动态图，即使它是第一次工作，但是当使用新数据值更新图时，所有内容都使用默认选项显示。一旦我隐藏了系列，我希望它被隐藏，直到我再次单击以显示它。

这是我的代码。基本上，我从 JSON 中获取数据并以 10 秒的间隔动态更新浮点图。所以新数据将每 10 秒显示一次，这就是该系列再次显示的地方。

```
 <div id="placeholder4" style="width:1000px;height:300px;background:#C89175"></div>

 <script type="text/javascript">
     $(function() {
         somePlot = null;

         togglePlot = function(seriesIdx)
         {
              var someData = somePlot.getData();
              someData[seriesIdx].lines.show = !someData[seriesIdx].lines.show;
              somePlot.setData(someData);
              somePlot.draw();

         }

// Initilizaiton of Series and Counter
         var i = 0;
         var data_Total = [[], [], []];
         // data_Total[0] : Stip Data
         // data_Total[1] : Decline Data
         // data_Total[2] : Volume Data
//Setting Options for Graph Display
         var options = {

             points: { show: true },
             //legend: {toggle: true },
             series: {
        lines: { show: true }
                 },
              legend: {
        labelFormatter: function(label, series){
          return '<a href="#" onClick="togglePlot('+series.idx+'); return false;">'+label+'</a>';
        }
    },

            grid: {backgroundColor: "#FCFCFC", labelMargin:12,hoverable: true,tickColor:"#AD5C5C" },
              xaxis: { mode: "categories", show:true,color:"white",axisLabel:'Time Series' },
                         yaxis:{show:true,color:"white",min:0,max:10000,axisLabel:'Total/ Stip/ Decline'}

         }

//Function that will be called recursively with specified Time Interval
         function fetchData() {
//Function that will push data in to Series1 thru an ajax call
             function getDPSStipData(series) {
                 var stipItem = [series.data[i][0], series.data[i][1]];
                 data_Total[0].push(stipItem);
             }
             $.ajax({
                 url: "./JSon/stipdpssec.json",
                 method: 'GET',
                 dataType: 'json',
                 success: getDPSStipData
             });
//Function that will push data in to Series2 thru an ajax call
             function getDPSDeclineData(series) {
                 var declineItem = [series.data[i][0], series.data[i][1]];
                 data_Total[1].push(declineItem);
             }
             $.ajax({
                 url: "./JSon/declinedpssec.json",
                 method: 'GET',
                 dataType: 'json',
                 success: getDPSDeclineData
             });
//Function that will push data in to Series3 thru an ajax call
             function getDPSTotalVolumeData(series) {
                 var totalVolItem = [series.data[i][0], series.data[i][1]];
                 data_Total[2].push(totalVolItem);
             }
             $.ajax({
                 url: "./JSon/totaldpssec.json",
                 method: 'GET',
                 dataType: 'json',
                 success: getDPSTotalVolumeData
             });
//Moving forward the ticks if size > 10
             if (data_Total[0].length > 10)
             {
                 data_Total[0] = data_Total[0].splice(1,10);
                 data_Total[1] = data_Total[1].splice(1,10);
                 data_Total[2] = data_Total[2].splice(1,10);
             }

// Plotting of Graph
             //$.plot($("#placeholder4"), [{ data: data_Total[2], label: "TotalVolume"},{ data: data_Total[0], label: "Stip",yaxis:2 }, { data: data_Total[1], label: "Decline",yaxis:2 }], options);
 somePlot=$.plot($("#placeholder4"), [{ data: data_Total[2], label: "TotalVolume",idx:0},{ data: data_Total[0], label: "Stip",color: "green",idx:1 }, { data: data_Total[1], label: "Decline",color:"red",idx:2 }], options);

             i++;
 } 

//fetchData

setInterval(fetchData, 10000);

     });
</script> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-09T02:14:06.180

这是我为您整理的一个[简单示例。](http://jsfiddle.net/AcuC7/1/)

```
somePlot = null;

togglePlot = function(seriesIdx)
{
  var someData = somePlot.getData();
  someData[seriesIdx].lines.show = !someData[seriesIdx].lines.show;
  somePlot.setData(someData);
  somePlot.draw();
}

var data = [
    {
    label: 'foo',
    color: 'red',
    data: [[1, 300], [2, 300], [3, 300], [4, 300], [5, 300]],
      idx: 0},
{
    label: 'bar',
    color: 'blue',
    data: [[1, 800], [2, 600], [3, 400], [4, 200], [5, 0]],
      idx: 1},
{
    label: 'baz',
    color: 'yellow',
    data: [[1, 100], [2, 200], [3, 300], [4, 400], [5, 500]],
      idx: 2},
{
    label: 'dart',
    color: 'green',
    data: [[1, 500], [2, 350], [3, 400], [4, 700], [5, 50]],
      idx: 3}
    ];

somePlot = $.plot($("#placeholder"), data, {
    series: {
        lines: {
            show: true
        }
    },
    legend: {
        labelFormatter: function(label, series){
          return '<a href="#" onClick="togglePlot('+series.idx+'); return false;">'+label+'</a>';
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-20T22:16:31.730

您可以以一种在重新渲染图形后仍然存在的方式提供图例点击，如下所示：

HTML：

```
<div id=graph></div> 
```

JS：

```
$('#graph').on('click', 'div.legend tr', function() {
    var tr = $(this);
    var index = tr.parent().find('tr').index(tr);
    // Do something with the fact they clicked item (index)
}); 
```

图例中没有存储任何内容来标记每行代表的内容，因此您需要从其他地方将该信息带入 - 以上代码所做的只是让您获得单击的图例项的索引。

为了可用性，您应该告诉用户这是可点击的：

CSS：

```
#graph div.legend tr {
    cursor: pointer;
} 
```

# jquery - Jquery中的渐进式页面加载

> ID：14201917
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:35:15.440
> 
> 标签：jquery

我目前有一个大页面，其中有很多正在加载的项目。

我遇到的最大问题是我有一个正在加载 3000 多行的表，并且需要一段时间才能获取所有数据。

以下是我需要帮助的内容：

1.  如何让页面的其余部分在表格之前加载。
2.  当页面的其余部分正在加载时，即使在我的大表正在加载时，我如何显示“正在加载”消息或图像。

任何帮助，将不胜感激。我很想为此使用 jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:41:05.660

我喜欢的一个选择是使用[jquery blockUI 插件](http://jquery.malsup.com/block/)来阻止表，然后做一个最小的`setTimeout`，基本上将加载所有表数据的操作放在 js 执行堆栈的末尾，例如：

```
$("#myTableId").block({
   onBlock: function () {
      setTimeout(function() {
         mytable.data.costlyLoadFunction();
      },100);
   }
}); 
```

注意：如果您的负载是单独的 ajax 请求，则不需要`setTimeout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:42:44.197

也许你可以使用[数据表 jquery 插件](http://www.datatables.net)。它有一个选项来创建通过 ajax 添加数据的表。并且功能很多。（分页等）

# bash - 在bash中执行以下步骤

> ID：14201922
> 
> 赞同：-2
> 
> 时间：2013-01-07T18:35:26.563
> 
> 标签：bash, shell

这是我一次又一次地执行的步骤，我想知道是否可以编写一个脚本来执行此操作。

我有两个本地帐户：

1.  推力
2.  高清用户

现在，我正在我的`thrust`帐户中的 Eclipse 中编写 Java 代码。代码运行令人满意后，我这样做：

```
mvn clean
cp -r /home/thrust/projectA -r /tmp/
su - hduser
cp -r /tmp/projectA /home/hduser/
cd /home/hduser/projectA
mvn package 
```

有没有办法可以自动化所有这些步骤？

或者有没有办法可以在这个`thrust`帐户上编写代码并且代码会自动与该帐户同步`hduser`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:10:04.567

鉴于您正在编写代码（并且您正在“一次又一次地”编写代码），您似乎应该使用带有本地存储库或托管服务的修订控制系统（如 Subversion 或 Git）（例如： GitHub 或 Bitbucket）。

如果你不想使用 RCS，你可以创建一个 shell 脚本来自动化你已经在做的事情，正如@iamnotmaynard 所建议的那样。

另外，看看`rsync`or `ssh`。它们可以帮助您更轻松地将文件从一个用户复制到另一个用户（`rsync`也可以帮助您保持这些文件同步）。

# php - 引用 PHP 中的静态函数

> ID：14201927
> 
> 赞同：2
> 
> 时间：2013-01-07T18:35:52.503
> 
> 标签：php, syntax, static-functions

是否可以引用静态函数并运行？像这样：

```
namespace vendor\foo;

class Bar
{
    public static function f1()
    {
        echo 'f1';
    }
    public static function f2($id)
    {
        echo 'f2: '.$id;
    }

} 
```

和

```
$fs = array(
    'f1'=>\vendor\foo\Bar::f1,
    'f2'=>\vendor\foo\Bar::f2
);

$fs['f1']();
$fs['f2']('some id'); 
```

还是唯一的方法是`call_user_func`？

**注意：** php 5.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:18:50.567

我不记得 PHP 5.3 是否支持此功能，但您可以在 5.4 中执行此操作：

```
<?php
namespace Vendor;

class Foo
{
  public static function bar()
  {
    echo "bar\n";
  }
}

$funcs = [
  'bar' => ['\Vendor\Foo', 'bar']
];

$funcs['bar'](); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:48:34.103

在 PHP 5.3 中，它取决于所使用的回调类型。您给出的示例是对象的*方法*，不能以所述方式调用。如果该示例是一个过程*函数*，您可以使用您提供的代码调用它。

我不确定为什么从技术上理解会出现这种情况，但我的猜测是 PHP 解析器会查找名为的函数`\vendor\foo\Bar::f1`但找不到。如果您希望调用变量函数，即`$var()`，则`$var` **必须**是函数而不是对象方法。如果您想调用变量*方法*，请查看下面的示例。

* * *

以下示例是调用可变*静态对象方法的有效方法*：

```
<?php

class Foo {

    public static function a() {
        echo 'Foo::a()';
    }

    public static function b() {
        echo 'Foo::b()';
    }

}

$foo = 'Foo';
$aFunc = 'a';
$bFunc = 'b';

$foo::$aFunc();
Foo::$bFunc();
call_user_func('Foo::' . $aFunc);
call_user_func(array($foo, 'b'));

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:02:00.117

您有多种选择可以做到这一点

1.  使用字符串变量作为类名和方法名
2.  将回调与 call_user_func() 一起使用
3.  使用反射

以下示例将演示这些选项：

```
<?php

namespace vendor\foo;

class Bar {

    public static function foo($arg) {
        return 'foo ' . $arg;
    }   
} 
```

选项 1：对类名和方法名使用字符串变量：

```
/* prepare class name and method name as string */
$class = '\vendor\foo\Bar';
$method = 'foo';
// call the method
echo $class::$method('test'), PHP_EOL;
// output : foo test 
```

选项 2：Perpare 一个回调变量并将其传递给`call_user_func()`：

```
/* use a callback to call the method */
$method = array (
    '\vendor\foo\Bar', // using a classname (string) will tell call_user_func()
                       // to call the method statically
    'foo'
);

// call the method with call_user_func()
echo call_user_func($method, 'test'), PHP_EOL;
// output : foo test 
```

选项 3：使用 ReflectionMethod::invoke() ：

```
/* using reflection to call the method */
$method = new \ReflectionMethod('\vendor\foo\Bar', 'foo');

// Note `NULL` as the first param to `ReflectionMethod::invoke` for a static call.
echo $method->invoke(NULL, 'test'), PHP_EOL;
// output : foo test 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T18:47:11.077

是的，这是可能的。但是你尝试的方式是行不通的。您必须使用[可调用](http://php.net/manual/en/language.types.callable.php)的：

```
$fs = array(
    'f1'=>array('\vendor\foo\Bar', 'f1'),
    'f2'=>array('\vendor\foo\Bar', 'f2')
);

$fs['f1']();
$fs['f2']('some id'); 
```

# php - 我在哪里可以获得亚马逊 MWS 产品类别的完整列表？

> ID：14201930
> 
> 赞同：3
> 
> 时间：2013-01-07T18:36:08.753
> 
> 标签：php, amazon-web-services, amazon-mws

我需要开发通过亚马逊 mws 发送提要提交的应用程序。但是我目前遇到了麻烦，因为当您向亚马逊发送新产品时，您必须指定产品类别。[我在Amazon Marketplace Web Service Products API Section Reference](https://images-na.ssl-images-amazon.com/images/G/01/mwsportal/doc/en_US/products/MWSProductsApiReference._V398148948_.pdf)中找到了不同端点的类别列表，但我认为这不是完整的类别列表，因为这些主要类别还有未列出的子类别。

我搜索了整个互联网，但我仍然卡住了。如果我可以发送请求以列出所有可用类别但还没有运气，还查看了 api 文档。欢迎任何帮助。

对不起，我的英语不好 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T19:17:05.623

对于产品类别（和子类别）列表，您需要登录卖家中心，然后帮助 -> 管理库存 -> 参考 -> 树指南。

或者[这里是链接](https://sellercentral.amazon.com/gp/help/help.html/ref=au_1661_cont_help?ie=UTF8&itemID=1661&language=en_US)。请注意，您仍然需要对该链接进行身份验证才能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-21T09:36:30.110

我们知道 Country BTG 文件包含所有类别，例如： [https ://d1c723f3ouvz7y.cloudfront.net/US_btg.xlsx](https://d1c723f3ouvz7y.cloudfront.net/US_btg.xlsx)

您现在可以确定扣除其他国家的 BTG URL...例如对于加拿大，它将是：

[https://d1c723f3ouvz7y.cloudfront.net/CA_btg.xlsx](https://d1c723f3ouvz7y.cloudfront.net/CA_btg.xlsx)

# c# - 在 C# 中为多线程锁定 DataTable 的正确方法？

> ID：14201939
> 
> 赞同：5
> 
> 时间：2013-01-07T18:36:28.920
> 
> 标签：c#, multithreading, datatable

这是锁定和修改`DataTable`由多个线程共享的正确方法吗？如果不是，那么正确的方法是什么？

```
private void DoGeocodeLookup(object info)
{
    ParameterRow data = (ParameterRow)info;
    DataRow dr = data.Dr;
    int localIndex = data.Index;
    ManualResetEvent doneEvent = data.m_doneEvent; 

    Geocode_Google.GeoCode gc = new GeoCode();

    gc.Addr_In = m_dtAddress.Rows[localIndex]["AddressStd_tx"].ToString();

    gc.GeoCodeOne();

    if (gc.Status == "OK")
    {
        //write back to temporary datatable
        lock( m_TempTable.Rows.SyncRoot )
        {
            m_TempTable.Rows[localIndex]["GL_Address"] = gc.Thoroughfare_tx; 
        }
    }
    doneEvent.Set(); 
} 
```

我的结构：

```
struct ParameterRow
{
    private DataRow m_row;
    private int m_index;

    public DataRow Dr
    {
        get { return m_row; }
        set { m_row = value; }
    }

    public int Index
    {
        get { return m_index; }
        set { m_index = value; }
    }

    public ManualResetEvent m_doneEvent;

    public ParameterRow( DataRow row, int index, ManualResetEvent doneEvent)
    {
        m_row = row;
        m_index = index;
        m_doneEvent = doneEvent; 
    }
} 
```

我开始所有线程的片段：

```
//make temporary table
m_TempTable = new DataTable();
m_TempTable = m_dtAddress.Copy();

for (int index = 0; index < m_geocodes; index++)
{
    doneEvents[index] = new ManualResetEvent(false);
    ThreadPool.QueueUserWorkItem(DoGeocodeLookup, new ParameterRow( m_dtAddress.Rows[index], index, doneEvents[index]));  
}

WaitHandle.WaitAll(doneEvents); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T20:00:20.120

您的示例不需要任何锁定`DataTable`. 你的内心`DoGeocodeLookup`只是对`DataTable`. 您对表执行的唯一访问是查找一行，这算作一次读取。[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)类被标记为对多线程读取操作是安全的。如果您在其中执行诸如添加新行之类的操作，`DoGeocodeLookup`则需要锁定。

您唯一要更改的是由`DataRow`指定的单个数据中的数据`localIndex`。由于每次调用都`DoGeocodeLookup`使用不同的行 - 表中的单行只会由一个线程更新，因此您不会有同步问题。所以这也不需要锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:18:50.967

该[线程](https://stackoverflow.com/questions/154551/volatile-vs-interlocked-vs-lock)信息量很大，可能对您的问题有所帮助。普遍的共识是使用 Interlock.Increment(object to be updated)。锁定很慢，您必须记住您可能已锁定正在更新的对象的所有位置。而且 volatile 并不一定意味着 CPU A 会立即看到 CPU B 刚刚更改的内容。

# sql - SQL 服务器查询中的 NULL 值

> ID：14201940
> 
> 赞同：3
> 
> 时间：2013-01-07T18:36:31.563
> 
> 标签：sql, sql-server, tsql

我在一个表中有一个状态列，它有 3 个值 - 'N/A' ， 'Single' ，'Multiple' 。某些行具有`NULL`状态列的值。

我需要提取所有 Status 不为 null 且不是“N/A”的行。基本上，我需要所有状态为“单”或“多”的行。

我一直在阅读有关 NULL 实际上等同于“未知”的信息。

如果我说

```
SELECT *
FROM t_userstatus
WHERE status <> 'N/A' 
```

我得到了结果（所有行只包含“Single”或“Multiple”）。

我想知道的是，上述`WHERE`子句是否总是排除具有 NULL 值的行？这是预期的行为吗？

**即使我没有明确指定它，是什么导致它排除空行？**

在我的查询中，我是否必须明确地说状态`IS NOT NULL`？

我对编程比较陌生，感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:38:47.067

这不是正常行为，因为`N/A`( `Single`&`Multiple`也是) 是一个与 . 无关的字符串`NULL`。即使`NULL`被评估为 unknown 并且可能不会返回，您也**应该**明确使用`IS NOT NULL`.

```
SELECT [column_list] FROM t_userstatus
WHERE status IS NOT NULL AND status <> 'N/A' 
```

我还建议您养成指定列列表的习惯。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T18:41:32.773

SQL 使用[三值逻辑](http://en.wikipedia.org/wiki/Null_%28SQL%29)：真、假和未知。任何与`null`结果的比较`unknown`。

所以`null <> 'N/A'`评估为`unknown`。由于`unknown`不正确，这意味着该行被排除在外。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T18:39:09.030

是的，这是正常行为。一个`NULL`值没有价值，所以它不满足一个`WHERE`条件。如果您还想包含空值，则还需要指定`IS NOT NULL`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T18:43:14.287

有点不明显，SQL 具有三个值逻辑（真/假/未知）。任何直接比较`NULL`都将导致子句中的值被认为是不正确的`unknown`。`WHERE`您的情况；

```
WHERE status <> 'N/A' 
```

换句话说，将永远不会匹配空值，因为`NULL`它永远不会“不等于”任何东西。

`NULL`使用比较匹配 a 的唯一方法是使用特殊的 null 操作`IS NULL`或`IS NOT NULL`。

作为旁注，[生活自然从来没有那么简单。](http://en.wikipedia.org/wiki/Three-valued_logic#SQL)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T18:48:50.383

正如其他人所说， null 通常是不可比较的。因此，当状态为空时，状态 != 'N/A' 会返回为假。

But what others haven't mentioned yet is that that is controlled through the Ansi_nulls setting. By default it is on and nulls are not comparable (as you state in the question, the principal behind this is that they are unknown so it is false that they are not necessarily N/A). But you can use

```
SET ANSI_NULLS OFF 
```

To change this behavior in which case a null will be equal to a null and not equal to anything else. There is more details on MSDN [here](http://msdn.microsoft.com/en-us/library/aa259229%28v=sql.80%29.aspx).

# javascript - Jquery 的 index() 函数返回 -1 而不是在其父级中单击的列表项位置

> ID：14201941
> 
> 赞同：1
> 
> 时间：2013-01-07T18:36:36.487
> 
> 标签：javascript, jquery, indexing

每次单击列表项后我尝试使用它时，它都会返回-1。有人可以启发我吗？我将不胜感激：/谢谢。这是我一直在做的，需要创建一个带有缩略图的图像滑块。

```
function create_thumbs() {
    imagesUl.children('li').each(function() {
        $('<li class="thumbs"><img src="images/thumb.png" alt="thumb"/></li>').addClass('thumb').hide().appendTo('ul#thumbs').fadeIn(300)
        .click(function() {
            goToSlide();
            return false;
        });
    });
} 
```

这是为幻灯片中的每个图像创建缩略图的功能。下面是我将创建的函数的开始，以便在单击拇指后转到相应的图像。

```
function goToSlide() {
    var thumbClicked = $(this);
    alert(thumbClicked.parent('ul#thumbs').index());
} 
```

警报始终返回 -1。我尝试了几种方法。可能是什么问题呢 ？

由于有人要求一些 html，这就是唯一重要的问题：

```
<div id="slider">
                    <ul id="images">
                        <li><img src="images/slideshow/1.jpg" alt="1" title="1"/></li>
                        <li><img src="images/slideshow/2.jpg" alt="2" title="2"/></li>
                        <li><img src="images/slideshow/3.jpg" alt="3" title="3"/></li>
                    </ul>
                    <ul id="thumbs">

                    </ul>
                </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:38:43.413

`this`goToSlide 函数中是全局范围，`window`. 您可以使用以下方式显式设置执行上下文[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

```
goToSlide.call(this); 
```

或者，您可以将单击的元素作为参数传递：

```
goToSlide(this);
....
function goToSlide(thumbClicked){
    alert(thumbClicked.parent('ul#thumbs').index());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:42:36.037

始终尝试将最低版本发布到[http://jsfiddle.net/](http://jsfiddle.net/)，以便我们更轻松地为您提供帮助。另请阅读[http://dailyjs.com/2012/06/25/this-binding/](http://dailyjs.com/2012/06/25/this-binding/)

尝试这个

```
function create_thumbs() {
    imagesUl.children('li').each(function() {
        $('<li class="thumbs"><img src="images/thumb.png" alt="thumb"/></li>').addClass('thumb').hide().appendTo('ul#thumbs').fadeIn(300)
        .click(function() {
            goToSlide($(this));
            return false;
        });
    });
}

function goToSlide(thumbClicked) {
    alert(thumbClicked.parent('ul#thumbs').index());
} 
```

# visual-studio-2010 - 使用 Visual Studio 2010 / ClickOnce 将应用程序定位到 .NET Framework：为“当前用户”而不是“所有用户”安装

> ID：14201942
> 
> 赞同：2
> 
> 时间：2013-01-07T18:36:37.447
> 
> 标签：visual-studio-2010, windows-7, clickonce, user-permissions, .net-framework-version

有没有办法告诉 ClickOnce 安装程序，如果目标框架在 PC 上不可用，只为当前用户而不是所有用户安装它？

将 .NET Framework 4 安装到某些 Windows 7 PC 上的 ClickOnce 安装失败，我很确定这是因为它是为所有用户安装的，而不仅仅是当前用户，并且当前用户无权进行更改PC 上的所有用户。因此，我们必须访问这些 PC 并以域管理员身份登录，然后运行安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:48:00.310

.NET Framework 不像 ClickOnce。它不能“按用户”安装到他们的个人资料文件夹中。该框架必须安装在机器级别，并且必须由管理员安装。

# java - void 方法不会操作字符串

> ID：14201943
> 
> 赞同：0
> 
> 时间：2013-01-07T18:36:43.360
> 
> 标签：java

我有一个 void 方法，它应该采用一个字符串并根据分隔符将其拆分为两个字符串。使用调试器后，该方法似乎工作正常，但是我为存储结果的方法传入的两个空字符串似乎没有得到更新。我必须在这里做一些愚蠢的事情，但感谢任何帮助！

```
public static void main(String[] args) {
    String dictFile = "/Users/simonrhillary/Desktop/Dictionary(3).txt";
    String synFile = "/Users/simonrhillary/Desktop/Synonyms(2).txt";
    fileReader dictFR = new fileReader();
    fileReader synFR = new fileReader();
    dictFR.filePath = dictFile;
    synFR.filePath = synFile;
    dictFR.openFile(dictFile);
    synFR.openFile(synFile);
    String[] dictionary = dictFR.fileToArray();
    String[] synonyms = synFR.fileToArray();
    String regx = "^[aflmptu]+$";
    String regexTemplate = "^[]+$";
    String word1 = "";
    String word2 = "";
    synToWords(synFR.getLine(3), word1, word2);//error seems to be here. 
                                                       //word1 and word 2 stay ""
    System.out.println(word1 +" " + word2);
    printArray(findCombos(dictionary, word1, word2));

}

public static void synToWords(String syn, String wordI, String wordII){
    String[] words = syn.split("\\t");
    wordI = wordI + words[0];
    wordII = wordII + words[1];
} 
```

还有其他方法我没有发布，但它们都工作正常。这只是 synToWords 方法的问题。非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T18:39:23.620

Java[按值传递引用](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)。所以这一行：

```
wordI = wordI + words[0]; 
```

分配一个新的字符串，`wordI`但它只是更改的引用的本地（方法内）副本。原始`word1`变量仍然引用原始字符串。

为了使它工作，你可以使用一个数组来代替：

```
public static void synToWords(String syn, String[] word1And2){
    String[] words = syn.split("\\t");
    word1And2[0] = word1And2[0] + words[0];
    word1And2[1] = word1And2[1] + words[1];
} 
```

并在您的主要代码中：

```
String[] words = { "", "" };
synToWords(synFR.getLine(3), words);
System.out.println(words[0] +" " + words[1]); 
```

或者你可以简单地返回一个字符串数组：

```
public static String[] synToWords(String syn){
    String[] words = syn.split("\\t");
    return new String[] {words[0], words[1]};
}

String[] words = synToWords(synFR.getLine(3));
System.out.println(words[0] +" " + words[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:40:45.380

Java 完全是按值调用的。wordI 和 wordII 是两个引用表达式的值的副本。引用表达式要么是 null，要么是指向对象的指针。当您在 synToWords 中分配给例如 wordI 时，您只是在更改 synToWords 的本地副本指向的内容。

一种解决方案是让该方法返回包含这两个部分的 String[]。然后调用者可以将结果的元素分配给它的变量。

# mysql - 是否可以插入然后依次选择插入的行？

> ID：14201947
> 
> 赞同：4
> 
> 时间：2013-01-07T18:37:09.240
> 
> 标签：mysql, select, insert

**我一个接一个**地执行两个查询：一个是 INSERT，另一个是 SELECT，它选择插入的行。尽管该行已成功插入（我可以在数据库中看到它），但选择查询无法返回该行。

当我再次执行 SELECT 查询时，它会返回正确的结果。

**插入：**

```
 $stmt = $pdo->prepare('INSERT INTO user (id ,name, lastname ,birthday, social_type, social_id) VALUES(NULL, :name, :lastname, :birthday, :social_type, :social_id)');
    $success=$stmt->execute(array(
        ':name' => $user['name'],
        ':lastname' => $user['lastname'],
        ':birthday' => $user['birthday'],
        ':social_type' => $user['social_type'],
        ':social_id' => $user['social_id']      
    )); 
```

**选择**

```
 $stmt = $pdo->prepare('SELECT * FROM user WHERE social_id = :social_id AND social_type = :social_type LIMIT 1');
    $stmt->execute(array(
        'social_id' => $user['social_id'],
        'social_type' => $user['social_type'] ));
    $result = $stmt->fetch(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:44:03.603

如果您使用的是 INNODB：

如果您使用的是 INNODB，由于您验证了该行已插入，因此只要 SELECT 正在查询插入的实际行的键，它就应该与 SELECT 一起返回。（你确定你没有使用像 INSERT DELAYED 这样的功能吗？这可能会阻止该行被返回。）

如果您使用的是 MYISAM：

由于 MyISAM 不支持事务，因此 SELECT 应该返回插入，但我找不到任何说明这实际上是有保证的。

注意：下面列出的第一个 URL 说明如果您使用的是 MISAM（根据此链接的默认值），INSERTS 将锁定表。但是，第二个 URL 声明插入所放置的锁是可读锁，因此不应该阻止读取表。

[http://www.sitepoint.com/mysql-mistakes-php-developers/](http://www.sitepoint.com/mysql-mistakes-php-developers/)

[http://aarklondatabasetrivia.blogspot.com/2009/04/how-to-lock-and-unlock-tables-in-mysql.html](http://aarklondatabasetrivia.blogspot.com/2009/04/how-to-lock-and-unlock-tables-in-mysql.html)

如果您使用的是 INNODB（续）：

您确定第一次执行的 SELECT 查询与第二次执行的查询相同吗？

您确定`$user['social_id']`在 INSERT 之后和 SELECT 时的值相同吗？

[http://blogs.innodb.com/wp/2011/04/get-started-with-innodb-memcached-daemon-plugin/](http://blogs.innodb.com/wp/2011/04/get-started-with-innodb-memcached-daemon-plugin/)

声明“您需要执行“读取未提交”选择以查找刚刚插入的行：”

IE设置会话TRANSACTION ISOLATION LEVEL读取未提交；

[http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)

（此功能可能取决于使用的 MYSQL 版本）

* * *

注意：根据此 URL，如果您已启动事务，则所选行将显示在下一个 SELECT 语句中（不是在 PHP 中）：

[http://zetcode.com/databases/mysqltutorial/transactions/](http://zetcode.com/databases/mysqltutorial/transactions/)

这个语句意味着如果你开始一个事务，你不需要设置 AUTOCOMMIT：

“MySQL 还会自动提交不属于事务的语句。”

此 URL 描述了如何在 PHP 中启动事务：

[PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)

# selenium - 如何使用 webdriver 阻止所有弹出窗口？

> ID：14201949
> 
> 赞同：2
> 
> 时间：2013-01-07T18:37:10.257
> 
> 标签：selenium, selenium-webdriver

如何使用 webdriver+java 阻止所有弹出窗口？我知道如何处理弹出窗口，但我根本不想弹出，我想阻止所有弹出窗口，就像浏览器中的弹出窗口阻止程序一样......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-11T11:23:04.013

```
FirefoxProfile profile = new FirefoxProfile();
profile.setPreference("dom.popup_maximum", 0);
profile.setPreference("privacy.popups.showBrowserMessage", false);
FirefoxDriver fd = new FirefoxDriver(profile);
fd.get("http://example.com"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-13T17:31:20.870

尝试

```
fp = webdriver.FirefoxProfile()
fp.set_preference("privacy.popups.disable_from_plugins", 3) 
```

阻止所有插件弹出窗口。

有关其他选项，请参阅[https://superuser.com/questions/697018/how-to-disable-popups-in-firefox-without-add-ons](https://superuser.com/questions/697018/how-to-disable-popups-in-firefox-without-add-ons)。

# php - 文档根目录；登录变量

> ID：14201950
> 
> 赞同：1
> 
> 时间：2013-01-07T18:37:12.887
> 
> 标签：php, mysql, mysqli

我最近在这里发布了一个问题；但是，在我得到的很好的答案中，我被告知我的连接查询不安全且已弃用。

```
$con = mysql_connect("localhost", "userX", "passX") or die('Could not connect to server');
    mysql_select_db("dbX", $con) or die('Could not connect to database');      
    $query="SELECT fieldX,filedX2 FROM tableX WHERE varX";
    $result=mysql_query($query);
    while($row=mysql_fetch_array($result,MYSQL_ASSOC)) 
```

显然，我从中学到的材料是旧的。所以我研究了这个问题并遇到了这两个项目：

1\. *“在实际实践中，最好将用户名和密码放在 Apache Web 服务器路径之外的文件夹中，这样就无法通过 Web 访问。”*

2\. *“将用户名和密码放入不在Web应用程序文档根目录中的文件中”*

```
<?php

include("connection.php");

$link = mysql_connect($connection_server, $connection_user,$connection_password);
if (!$link) {
die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully';
mysql_close($link);

?>

-----

/* --- Connection Variables ---*/

$connnection_server = "[server]";

$connection_database = "[db]";

$connection_user =  "[username]";

$connection_password = "[password]"; 
```

我知道这听起来像是一个愚蠢的问题（显然，我是新手），但是文档根是什么？“在文档根目录之外”和“在 Apache Web 服务器之外”是什么意思？

目前，在我学习的过程中，我只是在 MAMP 上，但是当我在商业服务器上使用时，比如 Godaddy's，这意味着什么？

另外，我假设

```
$connnection_server = "[server]";

$connection_database = "[db]";

$connection_user =  "[username]";

$connection_password = "[password]"; 
```

在上面的例子中意味着这些变量在一个单独的文件中（例如，connection_var.php），对吗？

提前感谢您的知识和帮助。

仁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:56:20.490

文档根目录是浏览器可以直接从中请求文件或页面的最高目录（顶层）。举个例子：

```
http://example.com/index.php 
```

`index.php`位于文档根目录中。浏览器无法请求更高级别。

```
http://example.com/images/mrcode.jpg 
```

`mrcode.jpg`不在文档根目录中，因为它位于`images`目录中。

> “在文档根目录之外”和“在 Apache Web 服务器之外”是什么意思？

文档根目录之外是指存储在此目录之上的文件，因此浏览器不能直接请求。例如，您的目录结构可能如下所示：

```
/websites/example.com/public_html/index.php 
```

如果您要将数据库凭据存储在：

```
/websites/example.com/dbdetails.php 
```

这将超出（或高于）文档根目录。将连接凭据存储在文档根目录中不被视为漏洞，但是将它们存储在外部可能会稍微好一些。PHP 仍然可以访问文档根目录之上的文件（假设您有权限）。共享主机通常允许您访问文档根目录之上的一级。

Your immediate problem is that you're using the deprecated `mysql_*` library. The problem with this is it is being removed from newer versions of PHP and so if you continue to use it, your applications will eventually become completely unusable. The [MySQLi](http://uk3.php.net/manual/en/book.mysqli.php) and [PDO](http://php.net/manual/en/book.pdo.php) libraries also offer [Prepared Statements](http://php.net/manual/en/pdo.prepare.php) which should be used instead of the escaping methods to prevent [SQL Injection](http://en.wikipedia.org/wiki/SQL_injection) because they offer greater security. See [here for a good PDO tutorial](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers). If you were told your queries are unsafe then they probably contain [SQL Injection](http://en.wikipedia.org/wiki/SQL_injection) vulnerabilities.

# security - 带有认证的 ssh 隧道：如何？

> ID：14201952
> 
> 赞同：1
> 
> 时间：2013-01-07T18:37:19.193
> 
> 标签：security, ssl, ssh, tunnel, tunneling

我已经了解了一些关于通过 putty 设置 SSH 隧道的基础知识。问题一：如何让两个SSH端基于证书相互认证？例如，使用 SSH 隧道进行远程 VNC 访问......

```
VNC == SSH (A) ===== SSH (B) === VNC 
```

我希望 A 和 B 相互验证。有争议的是，VNC 可以有自己的保护密码。但这不是重点。我可以在 A 和 B 上运行许多不一定具有 usr/pwd 保护的应用程序。

我检查了腻子配置，似乎没有使用证书的选项。有人建议使用 stunnel，但我想看看是否可以直接使用 SSH。谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:07:56.863

您需要使用证书的任何特殊原因，而不仅仅是 ssh 密钥？我知道的唯一原因是，它减轻了主机管理员的负担，无需在`authorized_keys`有很多用户登录的主机上管理复杂的文件配置。

OpenSSH 在 5.4 版本中引入了证书，因此请确保您至少在服务器端运行该版本。客户端也必须支持 SSH 证书，目前我不清楚 putty 是否支持它。但是，它确实支持 ssh 密钥，除非您特别需要证书，否则您只需要基于密钥的身份验证。

这是关于 SSH 证书的好读物：http: [//blog.habets.pp.se/2011/07/OpenSSH-certificates](http://blog.habets.pp.se/2011/07/OpenSSH-certificates)

如果您只需要在不提示输入密码的情况下登录，那么只需使用 ssh 密钥（这就是证书所使用的）。

你这样说：

> 我希望 A 和 B 相互验证。

无论您使用密钥还是证书，您都已经从 ssh 协议本身获得了这一点。当客户端连接到服务器时，它会将主机密钥与其本地`known_hosts`文件进行比较。如果这是您第一次访问该服务器，它会询问您是否要接受它。如果在您登录后服务器的密钥发生了变化，您会收到中间人警告，并根据您的客户端配置询问您是否可以继续或根本不允许您继续。

这是服务器向客户端验证自身身份的过程，该过程发生在客户端尝试向服务器进行身份验证之前。

# sql - MS Access 中的标准表达式中的数据类型不匹配

> ID：14201956
> 
> 赞同：2
> 
> 时间：2013-01-07T18:37:38.690
> 
> 标签：sql, ms-access, cascadingdropdown

我在访问中创建表单，我必须在其中实现级联组合框，下部组合框中的数据取决于用户选择的父值。这是表格![在此处输入图像描述](../Images/b035ad1a36a84d6b01fde4f525bd4bcf.png)

左边是表格的结构，右边是表格。问题是我收到数据类型不匹配的错误，无法理解为什么会这样。在钻头直径的更新后事件中，我正在填充切削速度。每当我按下切割速度的下拉菜单时，都会出现“标准表达式中的数据类型不匹配”。这是**Diametre of Drill更新后事件的代码**

```
Private Sub cboDiameterDrilling_AfterUpdate()
cboCuttingSpeedDrilling.RowSource = "Select DISTINCT tblDrilling.cuttingSpeed " & _
"FROM tblDrilling " & _
`"WHERE tblDrilling.materials = '" & cboMaterialDrilling.Value & "' AND tblDrilling.diaOfDrill = '` `cboDiameterDrilling.Value ' " & _`
"ORDER BY tblDrilling.cuttingSpeed;"

End Sub 
```

我认为问题出在 WHERE 子句中。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:44:55.487

您已将对象值 (cboDiameterDrilling.Value ) 的引用括在单引号中。

```
 AND tblDrilling.diaOfDrill = ' & cboDiameterDrilling.Value & "'" 
```

解决方案 ：`AND tblDrilling.diaOfDrill = " & cboDiameterDrilling.Value & " " & _`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:42:29.993

我认为您错过了“。尝试：

```
Private Sub cboDiameterDrilling_AfterUpdate()
cboCuttingSpeedDrilling.RowSource = "Select DISTINCT tblDrilling.cuttingSpeed " & _
"FROM tblDrilling " & _
`"WHERE tblDrilling.materials = '" & cboMaterialDrilling.Value & "' AND tblDrilling.diaOfDrill = '" & cboDiameterDrilling.Value & "' " & _
"ORDER BY tblDrilling.cuttingSpeed;"

End Sub 
```

# dart - 将 IFRAME 内容转换为图像

> ID：14201957
> 
> 赞同：0
> 
> 时间：2013-01-07T18:37:40.077
> 
> 标签：dart

我将 URL 提取到 IFRAME 中，现在想捕获结果的缩略图，以便稍后向用户显示他们所关注的链接。

```
void receiveHtml(Event e) {
  ...
  iframe.convertToImage... // <----- ????? How to do this?
}

IFrameElement iframe = query('#iframehtml') as IFrameElement;
...
iframe.on.load.add(receiveHtml);
...
iframe.src = url; // E.g. url='http://someplace.com/dir/' 
```

DART 中有没有办法将 iframe 文档捕获到图像中？（然后我可以缩小为缩略图并存储以备后用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T07:45:18.097

您不能在客户端执行此操作，至少在 iframe 位于同一来源（“同一网站”）的情况下不能这样做。否则，这将是一个安全风险，因为它为许多可能性打开了大门，例如用用户的银行账户详细信息截取银行网站。

但是，您可以在服务器端执行此操作，但这并不容易。

您可以做的一件事是安装[webkit2png](http://www.paulhammond.org/webkit2png/)并让它制作网站的屏幕截图。你可以这样称呼它：

```
import 'dart:io';

main() {
  Process.run('python', ['/path/to/webkit2png', 'http://google.com']).then((result) {
    // Here you can open and do whatever you want with the screenshots.
    // The files are placed in the current directory.
    print(new File('somescreenshot.png').readAsBytesSync());
  });
} 
```

# objective-c - 如何从循环中添加 UILabel？

> ID：14201958
> 
> 赞同：-5
> 
> 时间：2013-01-07T18:37:41.233
> 
> 标签：objective-c, ios, xcode, uikit

对不起我的英语不好。

我想显示以字符分隔的单词。我在包含单个字符的“chars”数组中有不同的字符串。我试过这个：

```
int x = 20;
int y = 20;
int screenx = self.view.bounds.size.width - 14;
for (NSString *string in chars){
    for (int i=0; i<messageLength; i++) {
        UILabel *display;
        display.text = [chars objectAtIndex:i];
        display.frame = CGRectMake(x, y, 14, 22);
        display.textColor = [UIColor whiteColor];
        x = x + 14;
        if (x >= screenx){
            x = 20;
            y = y + 20;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:42:55.873

您实际上应该创建标签并将其放置在您的视图上。

```
UILabel *display = [[UILabel alloc] init];
display.text = [chars objectAtIndex:i];
display.frame = CGRectMake(x, y, 14, 22);
display.textColor = [UIColor whiteColor];
[self.view addSubView:display]; 
```

# xamarin.android - ActionBar 选项卡监听器

> ID：14201959
> 
> 赞同：0
> 
> 时间：2013-01-07T18:37:42.417
> 
> 标签：xamarin.android, android-actionbar, android-tabs

我有一个带有 ActionBar 的简单布局，我想在用户选择选项卡时显示一条消息。我已经实现了 ActionBar.ITabListener 和 OnTabSelected 但它不起作用。代码有什么问题？这是代码：

```
namespace ICSTabs

    {
        [Activity (Label = "ICSTabs", MainLauncher = true)]
        public class Activity1 : Activity, ActionBar.ITabListener
        {

            protected override void OnCreate (Bundle bundle)
            {
                base.OnCreate (bundle);

                // Set our view from the "main" layout resource
                SetContentView (Resource.Layout.Main);

                ActionBar bar = ActionBar;

                bar.NavigationMode = ActionBarNavigationMode.Tabs;

                bar.AddTab (bar.NewTab ().SetText ("TEXT1")
                            .SetTabListener (this));
                bar.AddTab (bar.NewTab ().SetText ("TEXT2")
                            .SetTabListener (this));
                bar.AddTab (bar.NewTab ().SetText ("TEXT3")
                            .SetTabListener (this));

            }

            public void OnTabSelected (ActionBar.Tab tab, FragmentTransaction ft) 
            {
                Toast.MakeText(this, "Some text", ToastLength.Short);
            }

            public void OnTabUnselected (ActionBar.Tab tab, FragmentTransaction ft)
            {
            }

            public void OnTabReselected (ActionBar.Tab tab, FragmentTransaction ft)
            {
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:46:59.753

构造`Toast`对象后，需要调用`show()`方法来实际显示Toast。这是代码。

```
public void OnTabSelected (ActionBar.Tab tab, FragmentTransaction ft) 
{
    Toast.MakeText(this, "Some text", ToastLength.Short).Show();
} 
```

# javascript - 使用 jQuery 的 data() 和 Mustache.js 模板

> ID：14201973
> 
> 赞同：1
> 
> 时间：2013-01-07T18:38:28.650
> 
> 标签：javascript, jquery, mustache

我正在构建一个 Web 应用程序，我想在其中显示一个复杂的模型（名为 Answer）。我正在使用 Mustache 模板来格式化数据，但现在我遇到了无法将任何复杂数据附加到生成的 html 的问题，这通常可以使用 jQuery 的 .data() 方法来实现。

我当前的（不正确的）实现应该展示我想要完成的事情：

```
// (part of) the template
{{#answers}}
    <input type="checkbox" data-answer="{{.}}">{{text}}
{{/answers}}

// js on the page
$(document).on('change', 'input[type="checkbox"]', function (event) {
    console.log($(this).data('answer'));
}) 
```

现在我希望在控制台中引用原始答案对象，而不是我得到了相当无用的字符串“[object Object]”。当用户选中复选框时，我有什么方法可以检索原始对象吗？

**编辑**：另见[http://jsfiddle.net/sebastianv89/jQBpN/](http://jsfiddle.net/sebastianv89/jQBpN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:55:26.743

我认为问题可能是 HTML`data-`属性用于存储文本数据，而不是实际的 Javascript 对象，因此使用 Mustache 模板尝试设置`data-answer`只会导致您的答案对象的文本表示被存储

您可以尝试的另一种方法是将您的答案对象缓存在地图中（作为 JS 对象）并使用您的`data-answer`属性将键存储到该地图中。

# grails - 我可以确定何时添加域类吗？

> ID：14201974
> 
> 赞同：2
> 
> 时间：2013-01-07T18:38:31.457
> 
> 标签：grails, grails-orm, grails-2.0

如果我有 2 个（或更多）具有 hasMany of 的域类，`C`我如何确定是否`C`添加了一个实体？

```
class A {
    String name
    static hasMany = [cs: C]
class B {
    String name
    static hasMany = [cs: C]
}
class C {
    String someProperty
}

// In CController add Action
//...
genericInstance.addToCs(cInstance) 
```

我正在寻找更多我可以处理的事件。`CController`用于`A`and的内联表单`B`，但我需要运行两个不同的进程，具体取决于`C`添加的域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:48:51.060

你可以`addToCs`在你的类`A`和`B`.

```
class A {
    String name
    static hasMany = [cs: C]
    def addToCs = {
        // Do what you want with your value
        cs.add(C)
    }
} 
```

注意默认情况下会发生什么`addToCs`： [DomainClassGrailsPlugin.groovy:289 @github](https://github.com/grails/grails-core/blob/651454b5a1ed0d8bf8be5e0c59980f7ae296b106/grails-plugin-domain-class/src/main/groovy/org/codehaus/groovy/grails/plugins/DomainClassGrailsPlugin.groovy#L289)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:40:14.100

既然 A 和 B 具有相同的属性，为什么不将它们合并到一个域中呢？

我建议这样做：

```
class AB {
    char type
    String name
    static hasMany = [cs: C]

    static constraints = {
        type inList:['A','B']     //you can extend to 'C', 'D'... easily with this
    }
}
class C {
    String someProperty
} 
```

在控制器中，您可以执行以下操作：

```
abInstance.addToCs(cInstance)
def domainTag = abInstance.type 
```

那么 domainTag 就是你想要的。

# facebook - 如何指定用于在 facebook 上分享帖子的应用程序？

> ID：14201976
> 
> 赞同：0
> 
> 时间：2013-01-07T18:38:36.260
> 
> 标签：facebook, facebook-graph-api

从 Youtube 在 Facebook 上分享视频时，您可以在帖子下方看到“通过 Youtube”。如何指定我用来张贴在墙上的应用程序，例如“Via Lomse”。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:47:34.807

当应用程序向用户墙或时间线发布某些内容时，Facebook API 会免费为您执行此操作。该帖子由您的应用程序名称标识为发布。

# asp.net-mvc-4 - Bool、DateTime 和 Int 是必需的，但没有必需的属性？

> ID：14201979
> 
> 赞同：1
> 
> 时间：2013-01-07T18:38:44.980
> 
> 标签：asp.net-mvc-4, mvc-editor-templates

我正在使用像下面这样的 Object.cshtml，出于某种原因，`public int MyInt { get;set; }`即使它们缺少必需的属性，也需要像这样的普通 int 属性，怎么会？我的编辑器模板中是否缺少某些内容？

```
@foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm => pm.ShowForEdit && !ViewData.TemplateInfo.Visited(pm))) {
    if (prop.HideSurroundingHtml) {
        <text>@Html.Editor(prop.PropertyName)</text>
    } else {
        <div>
            <div class="editor-label">
                @if(prop.IsRequired) {
                    @Html.LabelFor(m => prop, @<em>(mandatory)</em>, prop.GetDisplayName())
                } else {
                    @Html.Label(prop.PropertyName)
                }
            </div>
            <div class="editor-field">
                @Html.Editor(prop.PropertyName)
            </div>
        </div>
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:49:27.873

尝试将不需要的字段更改为可为空：

```
public int? MyInt { get;set; }
public DateTime? MyDateTime { get;set; }
public bool? MyBool { get;set; } 
```

# jquery - 使用 AJAX 获取部分 HTML

> ID：14201980
> 
> 赞同：5
> 
> 时间：2013-01-07T18:38:46.440
> 
> 标签：jquery

我正在尝试使用 AJAX 调用获取另一个页面的内容。我能够获得整个文档，但是否有可能获得更好的精度并仅获得目标 div 内的部分？

```
<div class="myTarget">content that I need</div> 
```

这是我现在得到它的方式：

```
$.ajax({
    type: "GET",
    url: "/dir/targetPage",
    dataType: "html",
    success: function(data)
    {
      $('#dropHere').html(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T18:40:19.693

```
$('#dropHere').load('/dir/targetPage #ele'); 
```

其中 '#ele' 是一个元素，其 id`ele`和所有它的内部子级。

# java - 如何在 Android 设备上正确使用 DPI 绘制精确的英寸长度？

> ID：14201983
> 
> 赞同：1
> 
> 时间：2013-01-07T18:38:46.270
> 
> 标签：java, android, dpi

目前我测量设备的 DPI，然后根据 DPI 在一定数量的像素处画一条线（如果 DPI 为 320，那么我每 320 像素显示一条线）。

我可以在某些设备上使用它，但是其他设备却很遥远，这让我很困惑...

关于我做错了什么的任何建议？

这是我用来获取设备 DPI 的代码（以及其他各种内容）

```
 metrics = context.getResources().getDisplayMetrics();
    width = metrics.widthPixels;
    height = metrics.heightPixels;
    xdpi = metrics.xdpi;
    ydpi = metrics.ydpi;
    densityDpi = metrics.densityDpi; 
```

然后这是我在屏幕顶部绘制线条的方式。

```
 x = 0;
    while (x <= width) {
        canvas.drawLine(x, 0, x, lineHeight, paint);
        x = x + xdpi;
    } 
```

起初我使用变量 densityDpi 来绘制线条，但后来我发现那只是一个估计的 DPI。所以我将代码更改为 xdpi，它应该基于屏幕的实际像素，但在某些设备上仍然不准确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:58:55.113

我遇到了同样的问题，需要画出与现实生活中完全相同大小的硬币。每个设备都应报告其正确的 DPI，但一些（少数）设备只是提供错误的数据。我最终允许用户手动调整图像大小。

# java - 如何在sqlite中获取受影响的行数

> ID：14201986
> 
> 赞同：0
> 
> 时间：2013-01-07T18:39:02.550
> 
> 标签：java, sqlite

嗨，我有这样的查询：

```
PreparedStatement prep = conn.prepareStatement("update Products set amount=? where codebar=? and price=?;"); 
```

sqlite 有什么方法可以获取受影响的行数吗？我怎样才能得到它？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:08:49.627

尝试这个 -

```
 PreparedStatement prest = con.prepareStatement("update Products set amount=? where codebar=? and price=?");
  prest.setDouble(1, 10.00);
  prest.setInt(2, 1);
  prest.setDouble(1, 50.00);
  int rowCount =  prest.executeUpdate(); 
```

的返回值`executeUpdate()`是一个 int 值，指示更新了表的多少行。

检查以下链接以获取更多信息 -

[http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:44:25.527

根据[Java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)，您可以使用`executeUpdate()`方法来获取更新的行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:42:37.730

你不能在更新之前运行一个 select 语句来计算有多少行符合条件吗？

# tsql - 如何在 TSQL 中跨年份边界按周分组

> ID：14201989
> 
> 赞同：3
> 
> 时间：2013-01-07T18:39:13.300
> 
> 标签：tsql, group-by, datepart

我使用 tsql 来汇总每周数据（开始日期是星期一）。上周跨越了 2012 年和 2013 年的边界，这意味着我每周得到两个总和。有没有办法在 tsql 中对数据进行分组，以便我每周获得 2012-12-31 到 2013-01-06 的总和？

示例数据和 sql： [http ://sqlfiddle.com/#!6/52b25/13/0](http://sqlfiddle.com/#!6/52b25/13/0)

下面没有链接示例。假设表有一列，“创建”日期时间类型。每周有多少行？我想得到两个结果行，一个是 2012 年最后一周的结果，另一个是 2013 年开始的那一周（从 2012 年 12 月 31 日星期一开始）。

```
select 
min(created) as 'First Date',
count(*) as 'Count',
datepart(wk,created) as 'Week Number'
from items
group by  datepart(wk,created), datepart(yy,created)
order by min(created) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T19:17:12.000

一种解决方法是手动计算周数

```
select 
min(created) as 'First Date',
count(*) as 'Count',
 datediff(dd,'2012-01-02',created)/7 AS week_number
from items
group by  datediff(dd,'2012-01-02',created)/7  -- You may replace '2012-01-02' to any date that is Monday (start day of the week)
order by min(created) 
```

# python - Python Pygtk 在文本视图中动态制作彩色标签

> ID：14201992
> 
> 赞同：0
> 
> 时间：2013-01-07T18:39:22.107
> 
> 标签：python, colors, tags, textview, pygtk

我已经看到了一些在 Python pygtk 中的 textview 中制作彩色文本的方法。问题似乎是它只会以该颜色打印文本或使整行具有该颜色，而不是某些项目使它们具有某种颜色。

我希望它在我输入“”的地方，即颜色为蓝色。或者如果文本视图中有“字符串”，它将是橙色或任何类型的

如果有一个“#comment”，那么它将是斜体和灰色。

不确定它是否有帮助，但我有一部分在我输入时会将文本写入页面。是否可以保持这种语法着色处于活动状态？

我希望这是有道理的。

任何帮助深表感谢！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:31:00.980

用于[`GtkSourceView`](http://projects.gnome.org/gtksourceview/)语法高亮。不要重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:50:30.983

一般来说，我想说的是，你正在寻找的是使用正则表达式（`re`模块，这里有很多关于这个的问题......可能有些是你需要的确切模式）来找到你上面提到的模式你的`TextBuffer`. 这意味着您需要将信号连接到缓冲区，以便查看用户键入的内容。然后，您将需要一组`TextTag`s（每个格式化规则/模式一个标记）来应用于正则表达式与您描述的模式匹配的缓冲区区域。最后，您希望[将标签](http://www.pygtk.org/docs/pygtk/class-gtktextbuffer.html#method-gtktextbuffer--apply-tag)应用于缓冲区，并且这些`TextTag`s 可以以多种方式重新格式化文本显示`TextView`（[如文档所述here](http://www.pygtk.org/docs/pygtk/class-gtktexttag.html)）。

如果没有任何提供的代码，很难准确确定您可能遇到问题的位置。

希望它为您指明正确的方向...

请注意，如果您覆盖 GTK 主题，其他用户可能会在 s 中有一个带有橙色背景的主题`TextView`，因此您应该小心确保它在视觉上独立于您拥有的主题。

# haskell - 将变量保存在 Haskell 的另一个函数中

> ID：14201994
> 
> 赞同：1
> 
> 时间：2013-01-07T18:39:27.620
> 
> 标签：haskell

我迷失在这个概念中。这是我的代码，它的作用只是询问你的名字。

```
askName = do
  name <- getLine
  return ()

main :: IO ()
main = do
       putStrLn "Greetings once again.  What is your name?"
       askName 
```

但是，如何访问我`main`在 askName 中使用的变量名？

这是我的第二次尝试：

```
askUserName = do
  putStrLn "Hello, what's your name?"  
  name <- getLine  
  return name

sayHelloUser name = do
  putStrLn ("Hey " ++ name ++ ", you rock!")

main = do
  askUserName >>=  sayHelloUser 
```

我现在可以以回调方式重新使用`name`，但是如果在 main 中我想再次调用 name，我该怎么做？`name <- getLine` （显然，避免放在主要内容中）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T23:42:28.313

我们可以想象你问名字是为了打印它，然后让我们重写它。
在伪代码中，我们有

```
main =   
    print "what is your name"  
    bind varname with userReponse    
    print varname 
```

然后，您的问题涉及第二条指令。
看看这个的语义。

1.  **userReponse**是一个返回用户输入的函数（getLine）
2.  **varname**是一个 var
3.  **bind** *var* **with** *fun* : 是将 var(varname) 与函数 (getLine) 的输出相关联的函数

或者正如你在 haskell 中所知道的，一切都是函数，那么我们的语义不太适合。
为了尊重这个成语，我们需要重新审视它。根据后面的反思，我们的**bind**函数的语义变成了**bind** *fun* **with** *fun*

由于我们不能有变量，因此要将参数传递给函数，乍一看，我们需要调用另一个函数来生成它们。因此，我们需要一种链接两个函数的方法，而这正是**bind**应该做的事情。此外，正如我们的示例所暗示的，应该尊重评估顺序，这导致我们**使用** *fun* **bind** *fun进行以下重写*

这表明 bind 更像是一个函数，它是一个运算符。
然后对于所有函数 f 和 g，我们有**f**绑定**g**。
在haskell中，我们注意到这一点如下

```
f >>= g 
```

此外，正如我们所知，函数接受 0、1 或更多参数并返回 0、1 或更多参数。
我们可以改进我们对**绑定**运算符的定义。
事实上，当 f 没有返回任何结果时，我们将**>>=**记为**>>**
Applying，这些对我们的伪代码的反思导致我们

```
main = print "what's your name" >> getLine >>= print 
```

等一下，绑定运算符与用于组合两个函数的点运算符有何不同？

它有很大的不同，因为我们省略了一个重要信息，bind 不是链接两个函数，而是链接两个**计算单元**。这就是理解我们为什么要定义这个操作符的全部意义所在。

让我们把一个**全局计算写成一个****计算单元**序列。

```
f0 >>= f1 >> f2 >> f3 ... >>= fn 
```

在这个阶段，**全局计算**可以定义为一**组**具有两个运算符**>>=**、**>>**的**计算**单元。

 ****我们如何表示计算机科学中的**集合？**
通常作为**容器**。

那么全局计算是一个**包含**一些**计算单元**的容器。在这个容器上，我们可以定义一些运算符，允许我们从一个**计算单元**移动到下一个计算单元，考虑或不考虑后者的结果，这是我们的**>>=**和**>>**运算符。

由于它是一个**容器**，我们需要一种向其中**注入**值的方法，这是由**return**函数完成的。它将一个对象注入到一个**计算**中，你可以通过签名来检查它。

```
return :: a -> m a -- m symbolize the container, then the global computation 
```

由于这是一种**计算**，我们需要一种管理故障的方法，这由**fail**函数完成。
实际上**计算**的接口是由一个类定义的

```
class Computation  
    return  -- inject an objet into a computation 
    >>=     -- chain two computation
    >>      -- chain two computation, omitting the result of the first one
    fail    -- manage a computation failure 
```

现在我们可以改进我们的代码如下

```
main :: IO ()
main = return "What's your name" >>= print >> getLine >>= print 
```

在这里，我特意包含了 main 函数的签名，以表达我们在全局**IO 计算**中的事实以及使用 be **()**生成的输出（作为练习，在 ghci 中输入**$ :t print ）。**
如果我们更多地关注**>>=**的定义，我们可以出现以下语法

```
f >>= g <=> f >>= (\x -> g)  and f >> g <=> f >>= (\_ -> g) 
```

然后写

```
main :: IO ()
main =
    return "what's your name" >>= \x ->
    print x                   >>= \_ -> 
    getLine                   >>= \x -> 
    print x 
```

正如您应该怀疑的那样，我们当然有一种特殊的语法来处理计算环境中的**绑定运算符。**没错这就是**do 语法**
的目的 那么我们之前的代码就变成了，用 do 语法

```
main :: IO ()
main = do
    x <- return "what's your name"
    _ <- print x  
    x <- getLine              
    print x 
```

如果您想了解更多信息，请查看[monad](http://www.haskell.org/tutorial/monads.html)

* * *

**正如leftaroundabout所说，我最初的结论有点过于热情**

你应该感到震惊，因为我们违反了**参照透明**法则（x 在我们的指令序列中取两个不同的值），但这不再重要了，因为我们进入了一个**计算**，而后面定义的**计算是一个****容器**我们可以派生一个接口，这个接口旨在管理与现实世界相对应的**不纯**世界。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:47:04.627

从 askname 返回名称。在 Haskell 中，访问“全局”变量并不习惯：

```
askName :: IO String
askName = do
  name <- getLine
  return name

main :: IO ()
main = do
       putStrLn "Greetings once again.  What is your name?"
       name <- askName
       putStrLn name 
```

现在唯一的问题是 askName 函数有点毫无意义，因为它现在只是`getLine`. 我们可以通过将问题放在 askName 中来“解决”这个问题：

```
askName :: IO String
askName = do
  putStrLn "Greetings once again.  What is your name?"
  name <- getLine
  return name

main :: IO ()
main = do
       name <- askName
       putStrLn name 
```

* * *

最后，只有两点：在学习时放置类型声明通常是一个好主意，使事情变得明确并帮助编译器错误消息。另一件事是要记住“return”函数仅用于一元代码（它*与*传统的 return 语句不同！）有时我们可以省略一些中间变量：

```
askName :: IO String
askName = do
  putStrLn "Greetings once again.  What is your name?"
  getLine 
```****

# android - getSherlockActivity().startActionMode 返回 null

> ID：14201995
> 
> 赞同：2
> 
> 时间：2013-01-07T18:39:33.590
> 
> 标签：android, android-actionbar, actionbarsherlock, contextual-action-bar

我正在尝试在 4.2 设备上启动操作模式，但结果为空。我不确定这是一个夏洛克问题，因为本地调用是失败的。

任何帮助将不胜感激。

```
@Override
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id{
   CustomCell cell = (CustomCell) view.getTag();
   if (cell == null) {
        return false;
    }
    mGridView.setChocieMode(LibraryGridView.CHOICE_MODE_MULTIPLE);

    if (mActionMode != null) {
        return false;
    }
   mActionMode = getSherlockActivity().startActionMode(mActionCallback);
   cell.setSelected(true);
   return true;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T21:20:28.690

原来ActionMode.Callback中的onCreateActionMode返回false，将返回值设置为true解决了这个问题

# .net - 是否有启用 > < 和所有其他比较运算符的界面？

> ID：14201996
> 
> 赞同：7
> 
> 时间：2013-01-07T18:39:36.933
> 
> 标签：.net, vb.net, interface, operator-overloading, syntactic-sugar

我正在搞砸，制作一个泛型类，并且一直以来我都在考虑使用`IComparable`使用比较运算符实现的类型。

我知道`.CompareTo()`可以在功能上执行相同的操作，但我有一种唠叨的感觉，必须有一个实现比较运算符的接口。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:55:15.220

这不是通过实现接口，而是通过[运算符重载](http://msdn.microsoft.com/en-us/library/ms379613%28v=vs.80%29.aspx)来实现。因此，要重载大于和小于比较运算符，例如，您可以执行以下操作：

```
Public Class MyNumber
    Public Value As Integer

    Public Overloads Shared Operator >(ByVal x As MyNumber, ByVal y As MyNumber) As Boolean
        Return (x.Value > y.Value)
    End Operator

    Public Overloads Shared Operator <(ByVal x As MyNumber, ByVal y As MyNumber) As Boolean
        Return (x.Value < y.Value)
    End Operator
End Class 
```

由于运算符重载定义为`Shared`，因此它们不能由接口声明。VB.NET 中的接口只能声明实例成员。他们不能声明共享成员。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T18:42:52.560

不可以。不能通过接口指定操作员。

> [接口](http://msdn.microsoft.com/en-us/library/28e2e18x.aspx)定义了类可以实现的属性、方法和事件[但不是运算符]。

如前所述，最接近的接口是`IComparable`.

有些语言有更多的糖映射（例如 Scala），但没有 VB.NET 或 C#。

# javascript - 使用 .on 绑定到动态生成的内容

> ID：14201998
> 
> 赞同：1
> 
> 时间：2013-01-07T18:39:43.040
> 
> 标签：javascript, jquery

我正在使用 Infinite Scroll 来显示一些内容，但我无法将一些 mouseenter/mouseleave 事件绑定到新生成的项目。

我知道我需要将 .on 绑定到页面上已经存在的容器，但是我无法弄清楚改变当前切换的 jQuery 的语法。

这是当前的js：

```
$(document).ready(function() {
    $('.grid-box .actions').hide();

    $('.grid-box').on({
        mouseenter: function () {
            $(this).find('.actions').show();
        },
        mouseleave: function () {
            $(this).find('.actions').hide();
        }
    });

}); 
```

主容器是#grid-container，每个单独的项目是.grid-box。如何更改上述内容，以便在进入/离开 .grid-box 时显示/隐藏操作？

我想我需要一些类似的东西：

```
$('#grid-container').on('mouseenter mouseleave', '.grid-box', function(e) {

// some action

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:43:31.607

确切地说，这称为事件委托，它等待事件冒泡，然后根据选择器匹配事件。这更有效，因为只注册了一个处理程序，而不是元素数量的 N 倍。此外，您只需绑定一次，而不是每次更改动态内容。

```
$('#grid-container').on('mouseenter', '.grid-box', function(e) {

    // some action

}).on('mouseleave', '.grid-box', function(e) {

    // some action

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:44:26.440

选择器作为第二个参数仍然有效：

```
$('#grid-container').on({ ...}, '.grid-box'); 
```

[http://jsfiddle.net/QkFTz/1/](http://jsfiddle.net/QkFTz/1/)

另一种方法是单独绑定它们，我个人认为更清楚：

```
$("#grid-container").on('mouseenter', '.grid-box', function () {})
   .on('mouseleave', '.grid-box', 'function () {}); 
```

# php - 使用 php 要求另一个 Windows 应用程序关闭

> ID：14201999
> 
> 赞同：0
> 
> 时间：2013-01-07T18:39:43.667
> 
> 标签：php, windows, winapi

我是一名 php 开发人员，想使用 php + 一些 windows api 来执行任务。

任务是：很好地要求正在运行的 Windows 应用程序自行关闭。

用 php 做这件事当然不自然，但我正在用 php 编写我的小脚本，因为这是我这些天使用的语言并且很熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:14:55.373

php.net 网站提供了一些指导：

[http://php.net/manual/en/book.w32api.php](http://php.net/manual/en/book.w32api.php)

w32api_deftype w32api_init_dtype w32api_invoke_function w32api_register_function w32api_set_call_method

最简洁的方法是将 WM_CLOSE 消息发送到 Windows 程序。

我更残酷但有效的杀死Win32进程的方法是使用pskill.exe。

你可以在这里下载： [http ://technet.microsoft.com/en-us/sysinternals/bb896683.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896683.aspx)

您还可以调用 vbscript 程序，如下所示：

```
' ProcessKillLocal.vbs
' Sample VBScript to kill a program
' Author Guy Thomas http://computerperformance.co.uk/
' Version 2.7 - December 2010
' ------------------------ -------------------------------' 
Option Explicit
Dim objWMIService, objProcess, colProcess
Dim strComputer, strProcessKill 
strComputer = "."
'YOU NEED TO REPLACE calc.exe WITH THE APP YOU WISH TO KILL
strProcessKill = "'calc.exe'" 

Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" _ 
& strComputer & "\root\cimv2") 

Set colProcess = objWMIService.ExecQuery _
("Select * from Win32_Process Where Name = " & strProcessKill )
For Each objProcess in colProcess
objProcess.Terminate()
Next 
WSCript.Echo "Just killed process " & strProcessKill _
& " on " & strComputer
WScript.Quit 
' End of WMI Example of a Kill Process 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:44:18.073

PHP中有[一些](http://php.net/manual/en/book.w32api.php)支持调用win32 API。但是，该扩展程序的稳定性似乎不是很好。

我认为你能做的最好的就是使用[系统](http://php.net/manual/en/function.system.php)调用。