# StackOverflow 问答 12807000-12807999

# php - 我可以为我的应用程序使用 cron 作业吗（需要具有极高的可扩展性）？

> ID：12807005
> 
> 赞同：0
> 
> 时间：2012-10-09T19:26:13.893
> 
> 标签：php, linux, api, cron, cron-task

我即将开展一个大型项目，我需要计划任务（cron 作业）来运行一个脚本，该脚本将遍历我的整个实体数据库并每 10 分钟调用多个 API，例如 Facebook、Twitter 和 Foursquare . 我需要这个应用程序是可扩展的。

**我已经可以预见到一些潜在的陷阱......**

1.  从 API 获取数据很慢..
2.  在我的数据库中有数千条记录（不断增加），在 10 分钟内处理每条记录将花费太多时间。
3.  一些共享服务器仅在 30 秒后停止运行脚本。
4.  由于不断运行密集的脚本而导致的服务器问题。

**我的问题是如何构建我的应用程序......？**

1.  我可以创建多个 cron 作业来处理我的数据库的一小部分（这必须是自动化的）吗？
2.  这可能需要数千个 cron 工作。这是否可持续？
3.  如何绕过某些服务器的 30 秒问题？
4.  有没有更好的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:00:45.497

> 我即将开展一个大型项目，我需要计划任务（cron 作业）来运行一个脚本，该脚本将遍历我的整个实体数据库并每 10 分钟调用多个 API，例如 Facebook、Twitter 和 Foursquare . 我需要这个应用程序是可扩展的。

您最好的选择是将应用程序设计为使用分布式数据库，并将其部署在多个服务器上。

您可以将其设计为在两个“等级”服务器中工作，这与 map-reduce 方法不同：仅执行查询和“预消化”某些数据（“map”）的轻量级服务器，以及聚合数据的服务器（“减少”）。

一旦你这样做了，你就可以建立一个性能基线并计算出来，比如说，如果你每分钟可以生成 2000 个查询并且你可以处理尽可能多的响应，那么你需要每 20,000 个用户使用一个新服务器。在“每分钟生成 2000 个查询”中，您需要考虑：

*   从数据库中检索数据
*   进出控制服务器的流量带宽
*   到 Facebook、Foursquare、Twitter 等的流量带宽。
*   必须在本地登录（可能会提取日志摘要并将其上传到命令和控制）

这种架构的一个优点是您可以从小处着手——可以使用一台同时运行连接器、映射器、减速器、命令和控制以及持久性的机器来构建测试平台。当您成长时，您只需将不同的服务外包给不同的服务器。

在几个分布式计算平台上，这还允许您通过在地理或连接方面明智地分配 Mapper 来更快地运行查询，并通过使用例如亚马逊“区域”（亚马逊还有一个消息服务，您可能会发现在任务之间进行通信很有价值）

一个注意事项：我不确定 PHP 是否适合整个事情。我宁愿认为Python。

不过，在每个实例 20,000 个用户的流量水平上，我认为您最好与 Facebook、Foursquare 等公司的人一起讨论这个问题。至少您可能会收集一些策略，例如将连接器脚本作为独立任务运行，每个连接器根据*该服务的用户 ID*对其队列进行排序，以利用可能存在的少量数据局部性，并利用流水线来压缩更多带宽更少的服务器负载。最多，他们可能会向您指出批量 API 或不同的协议，或者以 1 万亿美元的价格购买您 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T19:54:00.190

请参阅[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)绕过 30 秒限制。

对于 PHP 中的调度作业，请查看：

1.  [http://www.phpjobscheduler.co.uk/](http://www.phpjobscheduler.co.uk/)
2.  [http://www.zend.com/en/products/server/zend-server-job-queue](http://www.zend.com/en/products/server/zend-server-job-queue)

我个人会考虑一个更强大的框架来处理作业调度（参见 Grails with Quartz），而不是重新发明轮子并编写自己的作业调度器。不要忘记您可能需要不时检查任务的状态，因此您将需要围绕任务的日志记录解决方案。

# html - 基于文本自动调整大小的 HTML 按钮，无需表格

> ID：12807006
> 
> 赞同：0
> 
> 时间：2012-10-09T19:26:16.490
> 
> 标签：html, button, autoresize

```
<table align="center" cellpadding="0" cellspacing="0" border="0" height="32px">
    <tr>
        <td>
            <img src="http://img203.imageshack.us/img203/8052/lefto.png" border="0" />
        </td>
        <td style="background:url(http://img24.imageshack.us/img24/2825/centervw.png); background-repeat: repeat-x; color:#FFFFFF;">
            Press Me Press Me Press Me Press Me Press Me Press Me Press Me Press Me Press Me
        </td>
        <td>
            <img src="http://img23.imageshack.us/img23/4676/rightk.png" />
        </td>
    </tr>
</table> 
```

我有一个不错的按钮，可以根据中间表格列中的文本长度自动重新调整大小，在这里试试[http://jsfiddle.net/QaFTc/2/](http://jsfiddle.net/QaFTc/2/)

我需要的是在不使用表格和**居中**的情况下做同样的事情。

我试过了，要么我没有居中，要么我必须指定按钮的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:34:57.577

这就是我得到的：http: [//jsfiddle.net/nqGX8/](http://jsfiddle.net/nqGX8/)

没有表，只有 div。您可以使用图像而不是颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:41:54.577

我使用`button`并`span`修改[了 jsfiddle添加了一个按钮](http://jsfiddle.net/QaFTc/7/)

# c - 将数字存储在 C 中给定的十六进制位置

> ID：12807012
> 
> 赞同：0
> 
> 时间：2012-10-09T19:26:28.200
> 
> 标签：c, pointers

假设有一个函数`store_at(int)`应该将传递的数字存储在给定的十六进制位置，如下所示：

```
void store_at(int val)
{
int *ptr;
ptr = (int *)0x261;

// logic goes here

return;
} 
```

我们如何编写逻辑以将 val 存储在给定的十六进制位置（在本例中为 0x261）？

说`*ptr = val;`有用吗？我隐约记得在某处读到 C 中不允许这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:25:55.507

`*ptr = val;`作品。但是您必须确保已分配此地址，并且可以访问更多地址。在不知道您正在编写 C 的情况下，我可以建议一些防止访问您没有权限的地址的方法。因此，这在很大程度上取决于您使用的架构和/或操作系统。

例如，在 ATMEGA32 微控制器中，您对其主存储器的访问没有任何限制。您可以从中/为它读取、编写和执行代码：

```
PORTB = 1;
// Knowing that PORTB is stored at 0x38, you can do the equivalent:
*((unsigned int *)0x0038) = 1; 
```

但那是在嵌入式系统上。现在，如果您想要完全访问内存空间（只要它在您的应用程序沙箱中），您可以`VirtualProtect`在 Windows 和`mprotect`Linux 上使用：

```
int val = 123;
DWORD oldprotection;

VirtualProtect((LPVOID)0x261, sizeof(int), PAGE_EXECUTE_READWRITE, &oldprotection);

*(int *)0x261 = val; 
```

以下是您可以使用的保护类型：[内存保护常量](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366786.aspx)。

还有一个[`mprotect`](http://www.kernel.org/doc/man-pages/online/pages/man2/mprotect.2.html)例子：

```
int val = 123;

mprotect((const void *)(((int)(0x261) / PAGESIZE) * PAGESIZE), sizeof(int), PROT_WRITE | PROT_READ | PROT_EXEC);

*(int *)0x261 = val; 
```

请注意，此`mprotect`示例未经测试，您可能需要增加大小以进行保护或其他一些事情。

除以`PAGESIZE`那里只是一个正确对齐地址的技巧。`PAGESIZE`另请注意，您的地址对 Linux 无效，因为如果大于它，它的除法将导致 0 （与*"it will be"*相同）。

* * *

根据使用指针访问地址的语法，所有这些工作：

```
*(int *)0x261 = val;

int *ptr = (int *)0x261;
*ptr = val; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:52:14.897

是的，表达式`*ptr = val`（甚至更多，`*(int *)0x261 = val;`）在 C 中完全有效。但是您将面临运行时环境的技术限制。

现代操作系统通常在虚拟内存沙箱中运行进程（因此进程无法访问和破坏其他进程的内存），从技术上讲，进程的虚拟内存看起来像一组您可以访问的区域，其中一些以只读方式, 有些不允许从这里执行代码等等。当您尝试访问不可用的 VM 区域时，您将遇到`SIGSEGV`类 Unix 系统或`Access Violation`Windows 系统上的错误，写入只读内存区域并尝试在操作系统禁止的区域中执行代码也是如此（例如，您可以使用 pid in 看到 linux 进程的虚拟内存映射`/proc/$PID/maps`。

进程的内存通常由操作系统管理（您可以使用操作系统提供的函数从堆中获取新内存，例如`malloc()`, `calloc()`；堆栈内存区域由操作系统在进程启动时分配），因此在用户空间编程中，您几乎永远不会需要通过字面量指针来引用数据。

另一种可能的环境是内核空间或裸机 C 程序，您可以在其中拥有所有可用的物理内存，但您仍然必须了解您访问的内容（可能是端口、物理内存中的间隙，也可能是由硬件等保留）。对这样的环境进行编程是一个高级主题，需要良好的 C 经验。

# php - 什么 RegEx 会界定从网页复制和粘贴的列表？

> ID：12807015
> 
> 赞同：1
> 
> 时间：2012-10-09T19:26:36.453
> 
> 标签：php, regex

我有一个接受关键字列表的表单。然后，我使用 PHP 将列表转换为数组`mb_split`以输入数据库。但是，我找不到成功分隔列表的 RegEx。用户通常会粘贴从网页列表中复制的数据。这是我正在尝试的：

```
mb_split('/\s+/', $keywords) 
```

这是数据库中的结果：

```
keyword1¶keyword2¶keyword3 
```

我会认为 ¶ 字符会被认为是由`\s+`. 我尝试专门处理 ¶ 字符，但它不起作用：

```
mb_split('/\s+\u00B6/', $keywords) 
```

那么什么 RegEx*会*在这里工作呢？

**解决方案**

我最终使用了这个：

```
mb_split('\n|\r|¶', $keywords) 
```

我需要添加`|`（逻辑或）并将 ¶ 符号实际粘贴到正则表达式中。我也改用`\n`and`\r`而不是`\s`避免丢失涉及空格的多词条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:28:56.103

您的实现是空格，后跟 ¶ 。您需要空格*或*¶ ：

```
/(\s|\u00B6)+/ 
```

¶ 字符不是空格，因为您可以看到它。它确实具有作为空格的语义含义，但除非正则表达式引擎正在寻找这样的语义，否则它不会成为空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:31:09.300

只是为我使用`¶`作品。 `mb_split`不同于`preg`它的正则表达式也不应该被分隔。

# vba - 如何复制文件并粘贴到另一个工作表中

> ID：12807016
> 
> 赞同：0
> 
> 时间：2012-10-09T19:26:36.980
> 
> 标签：vba, excel

我需要从外部驱动器复制文件并将其粘贴到我的 excel 中，我可以浏览文件但我无法将这些值粘贴到新工作表中......在同一个 excel 中我的代码：

```
Dim fileStr As String
Sub GetOpenFile()

fileStr = Application.GetOpenFilename()
Worksheets("Sheet2").TextBox1.Value = fileStr

End Sub
Sub Button3_Click()

Workbooks.Open fileStr
ActiveSheet.Paste

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:38:35.100

您试图在没有复制任何内容的情况下粘贴到活动工作表。此外，活动工作表可能不是您要粘贴到的工作表。

试试这个：

```
Sub Button3_Click()

Dim wbToCopy As Workbook

Set wbToCopy = Workbooks.Open(fileStr)
wbToCopy.Worksheets("Sheet1").Range("A1:H100").Copy

ThisWorkbook.Worksheets("Sheet1").Range("A1").PasteSpecial

wbToCopy.Close

End Sub 
```

`ThisWorkbook`始终引用运行宏的工作簿

# sql - sql排序，默认值总是在最前面

> ID：12807021
> 
> 赞同：1
> 
> 时间：2012-10-09T19:27:07.503
> 
> 标签：sql, sql-server-2008

我想对存储人员姓名首字母的列首字母进行排序。该列的默认值为“N/A”。排序后，应首先显示具有默认值的所有行，然后对其余行进行排序。所以如果我有类似的东西..

AB ZY EG UI FE EE N/A UY N/A YX

排序后应该是

不适用 不适用 AB 。. ZY

简单排序将在中间显示所有“N/A”。我将如何实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T19:28:45.010

```
select ...
from ...
order by case mycol when 'N/A' then 0 else 1 end, mycol 
```

# mongoid - 如何使用 rails_admin 覆盖 mongoid 的默认范围？

> ID：12807023
> 
> 赞同：4
> 
> 时间：2012-10-09T19:27:07.717
> 
> 标签：mongoid, rails-admin

目前我为我的班级设置了 default_scope，但我希望 rails_admin 使用 .unscoped 执行列表查询

有没有办法做到这一点？我看不到覆盖 rails_admin 执行的查询的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-06T21:05:24.020

您可以命名 rails_admin 为列表操作提供的范围，它们将在列表操作中显示为选项卡：

```
list do
   scopes [:unscoped, :all, :any_other_scope]
end 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-14T15:24:55.003

您可以使用**unscoped**：

来自 mongoid 文档：

```
Band.unscoped.where(name: "Depeche Mode")
Band.unscoped do
  Band.where(name: "Depeche Mode")
end 
```

请参考： [mongoid 作用域](http://mongoid.org/en/mongoid/docs/querying.html#scoping)

# android - PhoneGap - 播放声音文件的最佳方式

> ID：12807024
> 
> 赞同：1
> 
> 时间：2012-10-09T19:27:12.617
> 
> 标签：android, cordova

我正在使用 PhoneGap (Cordova) 并尝试播放单个声音文件，然后在导航到不同页面时正确释放资源。

这就是我播放声音文件的方式

```
var my_media = null;

 function playAudio(src) {
        // Create Media object from src
        if(my_media == null){
            my_media = new Media(src, onSoundSuccess, onSoundError);
        }

        // Play audio
        my_media.play();
    }

    // Audio - onSuccess Callback
    //
    function onSoundSuccess() {
        console.log("Audio played");
    }

    // Audio - onError Callback 
    //
    function onSoundError(error) {
        console.log('sound error - code: '    + error.code);
        console.log('sound error - message: ' + error.message);
        if(my_media != null){
            my_media.release();
        }
    } 
```

这是我离开页面时调用的代码

```
if(my_media != null){
        my_media.release();
    } 
```

但是，在离开页面并释放资源后，我总是在 logcat 中收到以下错误

```
10-09 12:09:07.843: D/MediaPlayer(32246): release() in
10-09 12:09:07.853: D/MediaPlayer(32246): release() out
10-09 12:09:07.853: V/MediaRecorderJNI(32246): native_reset
10-09 12:09:07.853: V/MediaRecorderJNI(32246): getMediaRecorder E
10-09 12:09:07.853: V/MediaRecorderJNI(32246): process_media_recorder_call
10-09 12:09:07.853: V/MediaRecorderJNI(32246): release
10-09 12:09:07.863: V/MediaRecorderJNI(32246): setMediaRecorder E: mr = null
10-09 12:09:07.863: V/MediaRecorderJNI(32246): setMediaRecorder X
10-09 12:09:07.903: D/CordovaWebView(32246): >>> loadUrl(file:///android_asset/www/page.html)
10-09 12:09:07.903: D/CordovaWebView(32246): >>> loadUrlNow()

10-09 12:09:07.903: W/System.err(32246): java.net.SocketException: Socket closed
10-09 12:09:07.903: W/System.err(32246):    at org.apache.harmony.luni.platform.OSNetworkSystem.accept(Native Method)
10-09 12:09:07.903: W/System.err(32246):    at dalvik.system.BlockGuard$WrappedNetworkSystem.accept(BlockGuard.java:262)
10-09 12:09:07.903: W/System.err(32246):    at org.apache.harmony.luni.net.PlainSocketImpl.accept(PlainSocketImpl.java:95)
10-09 12:09:07.903: W/System.err(32246):    at java.net.ServerSocket.implAccept(ServerSocket.java:264)
10-09 12:09:07.903: W/System.err(32246):    at java.net.ServerSocket.accept(ServerSocket.java:150)
10-09 12:09:07.903: W/System.err(32246):    at org.apache.cordova.CallbackServer.run(CallbackServer.java:195)
10-09 12:09:07.903: W/System.err(32246):    at java.lang.Thread.run(Thread.java:1027) 
```

显然我做错了什么，但我不确定它可能是什么。

我尝试不释放使错误消失的媒体对象，但是在使用该应用程序一段时间后，由于资源堆积且未正确释放而出现错误。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:23:10.553

您是否尝试过以下网址中的代码： [https](https://gist.github.com/2380994) : //gist.github.com/2380994 即将 mp3 放入 www 并在 android 上加载“/android_asset/www/test.mp3”。它在这里工作。

# wordpress - Magento 和 Wordpress - $_GET 变量从 query_string 中消失

> ID：12807026
> 
> 赞同：0
> 
> 时间：2012-10-09T19:27:22.897
> 
> 标签：wordpress, url, magento, redirect, get

在 Wordpress+Magento 集成环境中，我在 Wordpress 中有一个表单，可以提交到另一个 wordpress 页面。此表单有一个名称为“zip”的输入字段。当此表单提交时，“zip”似乎无法到达接收页面。我可以在网络控制台中看到它通过，但是在 $_GET （在接收页面上）上执行 var_dump 是空的。

我查看了在线解决方案，包括安装插件并尝试将变量添加到 query_vars 中，但这些似乎都不能解决问题。

我怀疑在 Magento/Apache 或 Wordpress 中发生了一些重定向，正在剥离 GET 参数。

想法/解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:24:37.243

发现问题：

IndexController.php 被修改，它没有转发 POST/GET 变量。

我能够修改代码以转发变量并且问题已经解决。

# c# - 为什么我们会收到冗余可访问性修饰符的编译时错误？

> ID：12807034
> 
> 赞同：1
> 
> 时间：2012-10-09T19:27:46.030
> 
> 标签：c#, compiler-construction

编译时错误

> set 访问器的可访问性修饰符必须比属性或索引器更具限制性

在像这样的场景中

> 私有字符串 TestString { 获取；私人套装；}

为什么这会导致编译错误？我理解**更严格**。不过，这不应该引起任何真正的问题。这是不必要的修改，而不是构建问题。为什么要终止构建而不是发出警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:35:19.303

如果有的话，最好将错误消息理解为“找到冗余代码”或类似的东西，因为：

`private string TestString { get; private set; }`

真的是一样的：

`private string TestString { get; set; }`

但是，因为编译器强制执行规则，所以你得到它确实有意义，因为`private`当然，不能比它自己*更*受限制。

# android - 在图库中设置 CENTER.CROP 图像的自定义位置。剪切图像的底部而不是顶部

> ID：12807040
> 
> 赞同：2
> 
> 时间：2012-10-09T19:28:10.383
> 
> 标签：android, android-layout, android-imageview, android-gallery

我在画廊中居中图像时遇到问题。我希望它们填充画廊中可用的最大空间，但不希望它们在屏幕顶部被剪切。我想看看他们的顶部而不是底部。

**我的问题是如何设置位置以便我可以在图库中看到图像的“顶部”？**

```
images.setScaleType(ImageView.ScaleType.CENTER_CROP) 
```

将图像设置为填充所有可用空间并保持其比例。问题是我的图像比宽度更高，因此它们的顶部不可见。

我有一个自定义画廊：CustomGallery，其布局是：

```
android:id="@+id/photos_gallery"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fadingEdge="none"
android:spacing="0dp" 
```

图库使用适配器：GalleryAdapter，它扩展了 BaseAdapter。它的 getView 方法如下：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView image = new ImageView(mcontext);
    image.setLayoutParams(new Gallery.LayoutParams(
        android.widget.Gallery.LayoutParams.FILL_PARENT,
        android.widget.Gallery.LayoutParams.FILL_PARENT));      
    image.setScaleType(ImageView.ScaleType.CENTER_CROP);        

    image.setImageBitmap(getImgSource(position));   

    return image;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:39:26.170

```
images.setScaleType(ImageView.ScaleType.FIT_START) 
```

从文档中：

> 计算将保持原始 src 纵横比的比例，但也将确保 src 完全适合 dst。至少一个轴（X 或 Y）将完全适合。START 将结果与 dst 的左边缘和上边缘对齐。

[http://developer.android.com/reference/android/graphics/Matrix.ScaleToFit.html#START](http://developer.android.com/reference/android/graphics/Matrix.ScaleToFit.html#START)

# python - numpy.where() 函数的可用输出

> ID：12807042
> 
> 赞同：0
> 
> 时间：2012-10-09T19:28:26.243
> 
> 标签：python, numpy

我在 python 脚本中调用一个函数，我想返回一组索引。基本上我想`(array([index1]),array([index2]))`从 numpy.where() 中删除返回，所以我只有 `([index1],[index2])`.

我尝试转换为字符串并使用`arr.strip('array')`，但这没有用。

我想我应该澄清一些事情。我希望函数返回一个值，然后返回两个索引`[val, index1, index2]`

实际上，返回看起来更像这样：`[val, (array([index1]), array([index2]))]`

基本上，我搜索两个数组 Lat 和 Lon，看看它们在哪里具有相同的索引，每个索引都满足自己的要求。然后我计算这些点和给定点之间的距离并将其附加到列表中。

```
 for i in range(len(smalllat)):
            temp = [smalllat[i], smalllon[i]]
            loc = N.where((lat==smalllat[i]) & (lon==smalllon[i]))
            smallset.append([dist_calc.distance(temp, [lat1, lon1]), loc]) 
```

然后我按第一个值（距离）对列表进行排序并返回前四个数组。

```
 dset = sorted(smallset)
    return dset[:4] 
```

这给了我一些形式：

```
[[3.3883810544766138, (array([72]), array([232]))], 
 [25.248157869075957, (array([72]), array([231]))],
 [34.31977394077627, (array([71]), array([232]))], 
 [42.651294795468786, (array([71]), array([233]))]] 
```

我想将它们存储在`(x, 4, 3)`numpy 数组中，其中 x 是我运行该函数的次数。

所需的输出将类似于：

```
[[[3.3883810544766138, 72, 232], 
 [25.248157869075957, 72, 231],
 [34.31977394077627, 71, 232], 
 [42.651294795468786, 71, 233]],
 ...,
 [[3.3883810544766138, 72, 232], 
 [25.248157869075957, 72, 231],
 [34.31977394077627, 71, 232], 
 [42.651294795468786, 71, 233]]] 
```

随意问的问题。

有什么建议么？

* * *

**更新**

我通过将函数更改为：

```
 for i in range(len(smalllat)):
            temp = [smalllat[i], smalllon[i]]
            loc = N.where((lat==smalllat[i]) & (lon==smalllon[i]))
            loc = [map(int, x) for x in loc]
            loc1 = loc[0]
            loc2 = loc[1]
            smallset.append([dist_calc.distance(temp, [lat1, lon1]), loc1[0], loc2[0]]) 
```

不过我敢肯定有更好的方法。

# csv - BMC Remedy 用户 7.5 我可以制作一个可以读取 .csv 文件的宏吗？

> ID：12807050
> 
> 赞同：0
> 
> 时间：2012-10-09T19:28:46.640
> 
> 标签：csv, macros, remedy

我需要在 BMC 补救用户 7.5 中创建一个宏，它可以读取 csv 文件并更新 csv 文件中包含的所有项目？

可能吗 ？

我必须制作一大堆物品并在那里编辑位置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:34:58.820

您无法创建宏。但是您可以使用补救导入工具。它具有自动导入 CSV 文件的功能。它将映射文件和 CSV 文件（当然包含完整路径）作为输入。

查看标题为“BMC Remedy Action Request System 7.6.04 配置指南”的指南。你应该在那里找到你要找的东西。

祝你好运，

麦克风

# ios - 滚动时取消 UITableView 中的动画

> ID：12807051
> 
> 赞同：1
> 
> 时间：2012-10-09T19:28:50.253
> 
> 标签：ios, uitableview

我有点困惑，没有什么可以求助的。我有一个 iOS 应用程序，它从服务器获取消息并将其填充到 UITableView 中的单元格中。每次从服务器更新某个对象时，该更新都会触发单元动画。在我们的例子中，我们有一个游戏得分表。如果有人失去一分，他们的单元格将闪烁红色，如果他们获得一分，他们的单元格将闪烁绿色。简单的概念效果很好，我们的用户喜欢反馈。他们不喜欢的是，当他们滚动时，他们看到单元格具有与之相关的随机颜色并在那里停留大约一秒钟。我相信这与细胞被回收的方式有关。我尝试了有关此问题的各种检查，检查单元格是否具有相同的值，手动将颜色设置为白色等。

总而言之，我试图仅在单元格处于视图中时才显示动画，而不是在用户滚动 UITableView 时显示动画。有人有什么建议或想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:02:43.613

## 怎么了

由于表格视图重用了它们的单元格，因此您最终会重复使用正在闪烁的单元格，即使它们不应该。

## 如何解决

您可以在`preprareForReuse:`自定义表格视图单元格或`tableView:willDisplayCell:forRowAtIndexPath:`委托方法（如[ACB](https://stackoverflow.com/users/1730272/acb)所述）中将重用单元格恢复为其默认状态。

由于您是使用 UIView 动画制作动画，因此您只需要更改动画属性的值即可取消动画并返回默认状态。

### 如果您有 Flash 的用户核心动画

如果动画是使用 Core Animation 完成的，那么您将调用`removeAllAnimations`动画层。（对于闪烁的动画，您可能不会更改图层上的属性，而是告诉动画自动反转。这意味着删除动画会将颜色更改回其原始值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:40:46.243

一种选择是删除动画并将`willDisplayCell`委托方法中的颜色重置为默认颜色。如果这不起作用，您可以设置`dequeueReusableCellWithIdentifier`如下，

```
NSString *aCellIdentifier = [NSString stringWithFormat:@"%d",indexPath.row];
UITableViewCell *aCell = [tableView dequeueReusableCellWithIdentifier:aCellIdentifier]; 
```

但是，如果您有很多数据要显示，这将是一个问题，因为它会产生内存问题。请注意，在这种情况下，您不会重复使用表格单元格。

# c# - 仅通过一张表访问多个表的数据（C# + SQL Server）

> ID：12807058
> 
> 赞同：0
> 
> 时间：2012-10-09T19:29:01.877
> 
> 标签：c#, sql-server, relationship, foreign-key-relationship, natural-join

几个月前，我试图使用 Sql Server + C# 来做一个应用程序。该程序是一种“神奇宝贝议程”，用户可以在其中添加和编辑神奇宝贝及其能力、类型和照片，以及搜索记录等其他功能。这是表单和表格图中的打印屏幕：

![在此处输入图像描述](../Images/452a823c78d893a010374c45523de0d2.png)

![在此处输入图像描述](../Images/82e99828279798b9d2820f1f687fa165.png)

这是我的问题：我试图通过仅使用表“Kanto”中的 ID（AbilityID 和 TypeID）直接访问表“Abilities”和“Types”中的名称。换句话说，我试图**从不同的表中访问许多数据**，基本上， **只有一张表！**但是，我不确定这是否完全可行。我想到了两种可能性：

1.  使用**数据集关系**（虽然这个解决方案对我来说还不太清楚），例如：

    ds.Relations.Add("PokéAbility", ds.Tables["Abilities"].Columns["AbilityID"], ds.Tables["Kanto"].Columns["AbilityID"]);

2.  使用**Natural Join**，所以我可以创建更多表并使用它们来处理我想要的数据。

注意：表格“类型”和“能力”应该已经填写了所有必要的信息，因此在执行表格期间不会对其进行编辑。

我不会粘贴整个代码，因为它有点长，但是，如果您想查看其中的特定部分，请询问我会提供它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:46:30.290

这应该创建一个合并视图。我没有测试过 SQL，所以可能有错字。这应该让你开始。您需要了解视图并加入。

```
Create View Pokedata as
    Select name_,  t1.type as Type1, t2.type as Type2, ability
    From Kanto 
    inner Join Abilities on Kanto.abilityId = Abilities.abilityId
    inner join KantoType as kt1 on Kanto.pokémonid = kt1.pokémonid and kanto.typeid1 = kt1.typeid
    inner join on types as t1 on kt1.typeid = t1.typeid
    inner join KantoType as kt2 on Kanto.pokémonid = kt2.pokémonid and kanto.typeid2 = kt2.typeid
    inner join on types as t2 on kt2.typeid = t2.typeid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:47:25.077

这并不能真正回答您的问题，因为它有点含糊不清，无法提供任何具体建议，但我建议您看看 ADO.NET Entity Framework。使用实体框架，您可以拥有包含来自其他表的对象的类。例如（我在这里猜你的数据结构......）

```
public class Pokemon
{
int Id {get; set;}
ICollection<PokeAbility> Abilities {get; set;}
ICollection<PokeType> Types {get; set;}
} 
```

在实体框架中，您定义一个数据上下文类，如下所示：

```
 public PokeContext : DbContext
    {
    DbSet<Pokemon> Kanto {get;set;}
    DbSet<PokeAbility> Abilies {get; set;}
    DbSet<PokeType> Types {get; set;}
    } 
```

那么在你的程序中，一旦你有了一个 Pokemon 对象，你就可以像这样访问其他表中的数据：

```
var context = new PokeContext();
Pokemon instance = context.Kanto.First(); // Fetch first item from the Kanto table in the database
foreach (var ability in instance.Abilities)
  {
  Console.WriteLine(ability);  // Or whatever you want to do with it.
  } 
```

我建议你看看微软在 Visual Studio 2012 中发布的一些流媒体视频，例如，这个：http:
[//msdn.microsoft.com/en-us/data/jj193542](http://msdn.microsoft.com/en-us/data/jj193542)
有一大堆这里的资源：http:
[//msdn.microsoft.com/en-us/data/aa937723](http://msdn.microsoft.com/en-us/data/aa937723)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:35:09.090

看看使用 SQL Server 视图。

# java - Eclipse 的 $FALL-THROUGH$ 注释标准吗？

> ID：12807059
> 
> 赞同：11
> 
> 时间：2012-10-09T19:29:04.893
> 
> 标签：java, eclipse, netbeans

我使用 Eclipse，所以对我来说，我使用`//$FALL-THROUGH$`注释是 switch 语句等的常见做法。但是我的同事使用 Netbeans 并质疑我到底在用这些做什么。试图用谷歌搜索任何带有符号的东西就像试图用一双冰冻的手套而不用任何工具拔牙......

使用`//$FALL-THROUGH$`注释、美元符号等等，是标准的 java 事物，还是某种 Eclipse 魔法？如果我在 Netbeans 或另一个 IDE 中加载相同的代码，或者通过独立的 java 编译器运行它，是否会通过 switch 语句仍然标记有警告，即使有上述注释？*除了使用注释之外，有没有*一种标准的方法可以做到这一点`@SupressWarning`（考虑到你必须如何使用它，这只会使代码变得混乱）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T19:38:02.457

像这样的事情取决于 IDE/style-check-tool。没有“标准 Java 注释”。

^(（好吧，Javadocs 是标准的，但它们不控制编译/错误报告。）)

[eclipse发布文档](http://archive.eclipse.org/eclipse/downloads/drops/R-3.5-200906111540/eclipse-news-part2.html)`$FALL-THROUGH$`中提到了该构造的解释：

> 现在可以通过在下面的 case 语句前面加上以 $FALL-THROUGH$ 开头的注释来抑制 switch case 语句中预期的失败的编译器问题。这对于不能使用 J2SE-5.0 样式的 @SuppressWarnings("fallthrough") 注释的代码特别有趣。

请注意，注释的警告名称[`@Suppresswarnings`](http://docs.oracle.com/javase/7/docs/api/java/lang/SuppressWarnings.html)取决于编译器，而不是 Java 语言标准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T19:44:59.317

我见过采用类似评论方案的其他工具（例如 FindBugs）。但没有什么是标准化的。

在大多数情况下，仅当 case 语句包含失败之前的代码时才会引发这些警告。在大多数情况下，您可以通过分解公共代码来避免这种情况。

例如，这通常不会触发警告：

```
switch (foo) {
  case 1:
  case 2:
    doSomething();
    break;
  ...
} 
```

但这会：

```
switch (foo) {
  case 1:
    doSomething();
  case 2:
    doSomethingElse();
    break;
  ...
} 
```

我个人认为这些警告是有原因的。我认为重构通用代码并且没有非空的失败更易读（和安全）：

```
switch (foo) {
  case 1:
    doSomething();
    doSomethingElse();
    break;

  case 2:
    doSomethingElse();
    break;
  ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T19:54:43.533

此注释是特定于 IDE 的，可能会在其他 ide 和代码检查器中失败，尽管 findbugs 足够聪明，可以检查带有单词的注释。但是，无论如何，除了指导其他程序员之外，您不应该依赖注释来做更多的事情，您只是在创建要维护的另一件事。

# php - PHP 使用 MD5 密码登录？

> ID：12807060
> 
> 赞同：1
> 
> 时间：2012-10-09T19:29:05.390
> 
> 标签：php, mysql

我有一个现有的用户数据库，每个用户的密码都存储为 MD5 哈希。

我试图使用 PHP 创建一个登录表单（我也很新），但我似乎无法让它工作，我知道我的用户名和密码是正确的，但我仍然收到错误的错误，我是否必须转换我的在检查表中的用户名之前输入 MD5 的密码？

我目前有...

```
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'"; 
```

如果我回显我的密码，它会输出为文本而不是哈希

```
$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:48:10.123

除了在与数据库中的密码进行比较之前对您的密码进行哈希处理之外，您还应该在密码哈希处理中添加一个“盐”。这个“盐”只不过是您连接到密码的随机任意字符串，它会使您的散列密码“唯一”。我的意思是，如果有人知道什么是 md5('12345') 是字符串 'A'，那么这个 salt 将使您的用户密码 '12345' 成为数据库中的字符串 'B'。因此，外人将无法很容易地识别出他们。因此，我建议您使用自定义函数 myHashMD5() 对密码进行哈希处理，该函数调用 md5() 添加正确的“盐”。除此之外，在 mysql 中，您应该将字符串与运算符 LIKE 进行比较，而不是 =。另外，我使用函数[http://php.net/manual/en/function。](http://php.net/manual/en/function.mysql-real-escape-string.php)为了避免 SQL 注入，你的代码很容易受到它的攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:35:09.770

只需将此行添加到您的代码旁边`$mypassword=$_POST['mypassword'];`

```
$mypassword = md5($mypassword); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:32:21.387

您应该将密码的*哈希**值*与存储在数据库中的哈希值进行比较：

```
$hashedPassword = md5($password); 
```

# python - if __name__ == __main__ 的范围

> ID：12807069
> 
> 赞同：8
> 
> 时间：2012-10-09T19:29:26.030
> 
> 标签：python, scope

范围是`if __name__ == __main__`什么？这个声明是否涵盖了全局空间中的所有内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T19:30:35.057

块没有什么特别之处`if __name__ == '__main__'`。也就是说，它的范围是由它发生的地方决定的。由于此类块通常发生在顶层，因此它们的范围是全局的。

如果这个块出现在一个完全合法的函数中，它的作用域将是本地的——除了它`__name__`仍然会解析为模块中定义的全局值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T19:31:52.947

```
>>> if __name__ == '__main__':
...     x = 1
... print 'x' in globals()
True 
```

**编辑**：user4815162342 提出了一个很好的观点，即这个 if 语句可以在*任何*范围内编写。它最常写在全局范围内。

这是一个函数内部：

```
>>> def foo():
...     if __name__ == '__main__':
...         bar = 1
... foo()
... print 'bar' in globals()
False 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T19:32:27.440

Python 没有块本地范围，因此您在`if`块内使用的任何变量都将添加到最近的封闭“真实”范围。（对于一个`if..main`块，它们通常是模块的属性。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T19:52:55.020

只要满足以下条件，它就在全局范围内：

1.  它在全局范围内调用，即不在函数内调用
2.  它在正在执行的代码文件中。

**为了说明（2）**：

假设您的代码是 in `foo.py`，并且 in `bar.py`，您有语句`from foo import *`。在这种情况下，不执行`if __name__ == "__main__":`块 in 。`foo.py`此块仅在运行时`foo.py`执行

# mysql - SQL根据不同的表关系查找重复次数最多的元素

> ID：12807072
> 
> 赞同：1
> 
> 时间：2012-10-09T19:29:43.887
> 
> 标签：mysql, sql

我有一个关于如何进行 SQL 查询的问题。我写了一个我在这里使用的示例数据库，我试图为所有希望提供帮助的人保持简单。

```
Officer              Permit               Vehicle              Dispatch

Oid | Dname | Rank   Oid | Type | Model   Vid | Type | Model   Did | Oid | Location
------------------   ------------------   ------------------   --------------
1   | John  |  Jr    1     D1     Ford    1     D1     Ford    1     1      Hill
2   | Jack  |  Sr    1     D2     Ford    2     D2     Ford    2     2      Beach
3   | Jay   |  Jr    2     D1     Ford    3     D3     Ford    3     3      Post
4   | Jim   |  Jr    3     D1     Ford    4     D4     Ford    4     1      Beach
5   | Jules |  Sr    5     D1     Ford    5     D5     Ford    5     2      Hill
                     1     D3     Ford                         6     4      Post
                     2     D2     Ford                         7     5      Hill
                     4     D1     Ford                         8     5      Beach
                     1     D5     Ford                         9     2      Post 
```

表之间的关系是：

```
Officer - lists the officer by OID(officer ID)/Name/Rank where Sr is highest, Jr is lowest.
Permit - Officers are required to have a permit depending on the vehicle they will be using, Oid for Officer ID, Type for the vehicle and Model.
Vehicle - Vid for vehicle ID, Type and Model
Dispatch - Did for Dispatch ID, keeps track of which officer (Oid) was dispatched to which location (Location) 
```

问：我需要从这里知道一些事情。首先是我如何知道允许哪个警官驾驶所有类型的车辆？二是我怎么知道哪个官员被派到所有派出地点？

编写这两个查询对我来说是一场噩梦，我试图加入不同的表，但我仍然无法从任何一个中获得最经常出现的元素（我不知道如何！）任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:45:52.160

第一个问题：

```
select Oid, count(*) type_count
from Permit
group by Oid
having type_count = (select count(distinct Type, Model) from Vehicle) 
```

第二：

```
select Oid, count(*) location_count
from Dispatch
group by Oid
having location_count = (select count(distinct Location) from Dispatch) 
```

看到图案了吗？

# javascript - 我如何加载作为参数传递的循环变量？

> ID：12807073
> 
> 赞同：0
> 
> 时间：2012-10-09T19:29:43.423
> 
> 标签：javascript, google-apps-script

```
function Qnt_Box(e) {
  var app = UiApp.getActiveApplication();
  var Vpanel = app.getElementById('Vpanel');
  app.getElementById('button2').setVisible(false);
  var qnt = e.parameter.Quant;
  var grid2 = app.createGrid(qnt, 2);
  for (var i = 0; i < qnt ; i++) {
    grid2.setWidget(i, 0, app.createLabel(i + 1 + ' :'));
    grid2.setWidget(i, 1, app.createTextBox().setName('x' + i)); HERE!!!
  }
  Vpanel.add(grid2);
  return app;
} 
```

如何加载在循环中命名的变量，彼此循环？

我的想法是：

```
function example() {
for(var i =0; i < qnt+1; i++)
  var aux = e.parameter.'x' + i;
} 
```

但不工作 XS

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:36:57.983

我不完全遵循您的代码，但是如果您尝试使用变量名访问属性，则可以使用数组表示法。

```
function example() {
for(var i =0; i < qnt+1; i++)
  var aux = e.parameter['x' + i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:42:55.007

如果名称在 的属性中`e.parameter`，您可以使用比尔的建议

```
e.parameter['x' + i]; 
```

如果是全局变量，可以通过window对象访问

```
window['x' + i] 
```

# php - 如何在 PHP 中构造类

> ID：12807075
> 
> 赞同：7
> 
> 时间：2012-10-09T19:30:04.103
> 
> 标签：php, oop, class, object

我一直在努力转移到 PHP 中的 OOP。我在 php.net 上阅读了解释，但我希望我能在这里得到一些具体的答案。

我试图创建以下示例来说明我的问题。假设我有“数据库”、“产品”和“用户”类，如果用户有权访问，我想显示产品。

所以我将“Products”类称为“showProducts()”函数，该函数依次创建“User”类的实例，该实例创建“Database”对象的实例并检查用户访问级别。

如果用户有权访问，则“showProducts()”函数创建“Database”对象的另一个实例，并查询数据库。

```
class Database{

   public function query(){ 
      //runs query here 
   }

   public function __construct() { 
      //sets up connection here 
   }

}

class User{

   public function checkAccess(){ 
      $db = new Database(); 
      $db->query( //pass in query to check access )
      //does stuff, then returns true or false
   }

}

class Products{

   public function showProducts(){

      $user = new User();

      if($user->checkAccess())
         $db = new Database(); 
         $db->query( //pass in query to get products )
      }

} 
```

我希望有人可以说明如何以正确的方式做到这一点。

我想要某种控制器类，它创建一个“数据库”对象，可供所有需要访问它的类使用，而不必创建“数据库”对象的多个实例。我想要用户类也一样，所以有一个所有类都可以访问的 $users 对象，而不必每次我需要在“用户”类中使用某些东西时都创建一个新对象。

如果我的问题不清楚，我深表歉意，并提前感谢您的任何回复！

感谢大家的回复！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T19:56:39.680

当从过程形式转移到面向对象编程时，您应该掌握的不仅仅是如何构建类。OOP 不是编写类，它是关于遵循 OOP 中的最佳实践、原则和模式。

您不应该在另一个内部实例化新对象，您应该通过构造函数或 setter 方法提供 User 对象，即 User 所依赖的 Database 对象。这就是所谓的依赖注入。目标是通过构造函数或 setter 方法将对象提供给需要它们的类。并且它们应该从该类外部实例化，因此更容易配置类。并且在构建一个类时，您希望轻松查看该类具有哪些依赖项。您可以在此处阅读有关控制反转原理的信息：[IoC](http://en.wikipedia.org/wiki/Inversion_of_control)

那么您的代码将如下所示：

```
<?php

// User object that depends on Database object, and expects it in constructor.

class User
{
    protected $database;

    public function __construct($database)
    {
        $this->database = $database;
    }

    // -- SNIP --
}

?> 
```

现在要使用该用户类，您可以这样做：

```
<?php

    $database = new Database($connParams);
    $user = new User($database);

?> 
```

您还可以使用 setter 方法使用依赖注入来设置依赖项，但我会让您自己搜索 :)

就是这样，请阅读有关 Inversion of Controll 原理以及有关 Dependency Injection 和 Dependency Injection Containers 的内容，这些是管理类的最佳方法。

我见过很多“OOP”的 PHP 代码，实际上它们只使用类作为功能名称空间:) 所以请学习 OOP 原则和模式。

玩得开心！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T19:42:26.343

不要在构造函数或其他方法中实例化对象。将它们作为参数传递，最好在称为工厂的不同类中传递。这将使测试您的代码变得容易，同时也使创建对象变得容易。

另外，不要尝试使用单例。这是“全局变量”的面向对象版本，您不想使用全局变量。它使您的代码测试变得非常困难，几乎是不可能的。

观看此视频[http://www.youtube.com/watch?v=-FRm3VPhseI](http://www.youtube.com/watch?v=-FRm3VPhseI)以了解为什么使用单例是不好的。尤其是 19:00 的 CreditCard 示例值得一看。

如果你真的想做最先进的，看看“依赖注入”的概念。从本质上讲，将需要的东西从外部传递到一个类中是整个秘密，但是有些框架会自动为你做这件事，所以你不必再自己编写工厂了。这些被称为“依赖注入容器”或“DIC”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:40:16.483

要为所有代码创建一个对象，请使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式：

```
class Database{
   private $db_descriptor;

   private function __construct(){
       /* connect and other stuff */
   }
   public static function getInstance(){
       static $instance;
       if($instance === null){
          $instance = new self();
       }
       return $instance;
   }
} 
```

您可以对用户使用相同的技术，我说更多使用 php 5.4 您可以将 1 特征用于单例模式。最后一个提示：当您使用数据库和其他繁重的事物时，请使用称为[延迟初始化](http://en.wikipedia.org/wiki/Lazy_initialization)的技术。当您提高 OOP 技能时，请查看[Doctrine Project](http://www.doctrine-project.org/)，他们会大量使用该技术！

# python - 如何确定二维列表是否包含值？

> ID：12807079
> 
> 赞同：15
> 
> 时间：2012-10-09T19:30:22.673
> 
> 标签：python, list, python-2.7

我有一个如下列表

```
mylist = [('value1', 'value2', 'value3'), ('secval1', 'secval2', 'secval3')] 
```

如何查看列表是否包含“value2”？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-09T19:31:48.270

使用[`any()`](http://docs.python.org/library/functions.html#any)：

```
any('value2' in sublist for sublist in mylist) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-09T19:31:44.690

您可以简单地检查所有子列表[`any`](http://docs.python.org/library/functions.html#any)：

```
any('value2' in subl for subl in mylist) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T20:01:33.280

```
'value2' in (item for sublist in mylist for item in sublist) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T19:34:40.077

类似于`any()`，也支持短路的解决方案：

```
>>> from itertools import chain
>>> mylist = [('value1', 'value2', 'value3'), ('secval1', 'secval2', 'secval3')]
>>> 'value2' in chain(*mylist)
True 
```

证明它短路如下`any()`：

```
>>> it=chain(*mylist)
>>> 'value2' in it
True
>>> list(it) #part of iterable still not traversed
['value3', 'secval1', 'secval2', 'secval3'] 
```

# java - android onClick没有触发？

> ID：12807085
> 
> 赞同：0
> 
> 时间：2012-10-09T19:30:53.353
> 
> 标签：java, android, onclick

**编辑**：onClick 现在工作正常。问题是该按钮试图从 Parent 类中触发 onClick。现在这是固定的。当然，这意味着正在发生一个新问题，即永远不会调用 onActivityResult。

所以我不太确定到底发生了什么，当我按下按钮时什么都没有发生，logcat 中什么也没有，什么都没有，好像没有代码一样，但我很确定这是正确的，有什么想法吗？

```
public class myClass extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.store_selector);
    Button getStore = (Button)findViewById(R.id.getStore);

    getStore.setOnClickListener(buttonGetStoreOnClickListener);
}

Button.OnClickListener buttonGetStoreOnClickListener
= new Button.OnClickListener(){

    public void onClick(View arg0) {

    Intent intent = new Intent("com.blah.Blah.client.android.SCAN");
    intent.setPackage("com.blah.Blah");
    intent.putExtra("com.blah.Blah.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
    startActivityForResult(intent, 0);
};
};  

@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent)
{
    if (requestCode == 0)
    {
        if (resultCode == RESULT_OK)
        {
            String contents = intent.getStringExtra("SCAN_RESULT");
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
            Log.i("debug tag", "contents: "+contents+" format: "+format);
            Intent myIntent = new Intent(this, Ads.class);
            myIntent.putExtra("key", contents);
            startActivity(myIntent);
            setContentView(R.layout.activity_ads);

            // Handle successful scan
        }
        else if (resultCode == RESULT_CANCELED)
        {
            // Handle cancel
            Log.i("xZing", "Cancelled");
        }
    }
}

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:46:00.187

这是您需要导入的类：

```
import android.view.View.OnClickListener; 
```

这是你应该有的方法：

```
OnClickListener onButtonListener = new OnClickListener() {

  @Override
  public void onClick(View v) {
    // Your code here   
  }
}; 
```

测试它，让我知道它是否有效。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:51:20.147

你确定你有正确的按钮吗**Button getStore = (Button)findViewById(R.id.getStore);** ?

如果是，那么这可能是有时发生在我身上的事情。发生这种情况时，我的 logcat 不会显示任何内容。我解决这个问题的方法是打开设备视图（窗口、显示视图、其他、Android、设备）并选择我的设备。然后当我再次查看 logcat 时，一切都在那里。

# javascript - 如何与主干同步加载外部模板

> ID：12807088
> 
> 赞同：0
> 
> 时间：2012-10-09T19:31:06.350
> 
> 标签：javascript, backbone.js, coffeescript, sprockets

我正在尝试使用phonegap、backbone.js 和coffeescript 构建一个移动应用程序。我想做这样的事情：

```
class MyApplication.Views.EntriesIndex extends Backbone.View
  template: load('my/template') //It will load the external file my/template.tpl

  render: ->
    $(@el).html(@template())
    this 
```

我想同步加载它。我已经看过 require.js，但我觉得这个简单的想法太复杂了。我看到我可以将 JST 用于 Rails 应用程序，但我不知道如何在没有 sprocket 的情况下使用它，而且我的应用程序必须只能在客户端工作。

同步加载模板的更好方法是什么？

我认为最好是预加载它。

我的应用程序将托管在客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:35:35.010

我这样做了：

```
class HomeView extends Backbone.View
  template: ->
    template = "views/home.html"
    cache = window.templates[template]
    return cache if cache

    cache = $.ajax(
      url: "views/home.html"
      async: false).responseText

    window.templates[template] = cache
    return cache

  render: ->
    @$el.html(@template()) 
```

而且，在我的应用程序的初始化中：

```
window.templates = {} 
```

所以我可以异步加载模板并缓存它。显然，我会进行一些重构，并且可能会将其放入 JQuery 函数中。

感谢您的帮助。

**编辑**

我改变我的代码来做到这一点：

```
class Loader
  @files: {}
  @load: (path) ->
    return @files[path] ||= $.ajax(url: path, async: false).responseText 
```

现在我可以这样做了：

```
class HomeView extends Backbone.View
  template: ->
    Loader.load("views/home.html")

  render: ->
    @$el.html(@template()) 
```

这是javascript的版本：

```
var Loader;

Loader = (function() {

  function Loader() {}

  Loader.files = {};

  Loader.load = function(path) {
    var _base;
    return (_base = this.files)[path] || (_base[path] = $.ajax({
      url: path,
      async: false
    }).responseText);
  };

  return Loader;

})(); 
```

我可能会在github上发布代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:16:53.330

我以这种方式加载我的模板：

```
 $.ajax({
            url     : 'my/template.tpl',
            async   : false,
            success : function(tpl) {
                //do something with the template
            }
        }); 
```

也许它的解决方案也适用于您..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:22:01.063

如果您的应用程序作为 phonegap 应用程序运行，您不妨在 HTML 中包含您的模板：

[<script type = "text/template"> ... </script> 的解释](https://stackoverflow.com/questions/4912586/explanation-of-script-type-text-template-script)

# android - 从android执行http GET请求时抛出异常

> ID：12807095
> 
> 赞同：0
> 
> 时间：2012-10-09T19:31:35.767
> 
> 标签：android

> **可能重复：**
> [Android HttpClient：NetworkOnMainThreadException](https://stackoverflow.com/questions/11736530/android-httpclient-networkonmainthreadexception)

我在接收 get 请求并邮寄内容的服务器上有一个 php 脚本。所以假设我们有[http://url.com/testmail.php?message=somemessage](http://url.com/testmail.php?message=somemessage)

“消息”的内容将通过电子邮件发送。

我希望我的应用程序能够调用这个脚本，并在请求中插入它自己的消息。它将主要用于用户反馈。我知道使用POST会更好，如果有一些可以原生处理邮件的android功能，请赐教，因为我是新手。

这是我目前在我的主要活动“onCreate”中拥有的代码，它正在生成异常：

```
HttpClient httpClient = new DefaultHttpClient();  
    String url = "http://someurl/testmail.php?message=eventualjavavariable";
    HttpGet httpGet = new HttpGet(url);
    try {
        HttpResponse response = httpClient.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        if (statusLine.getStatusCode() == HttpStatus.SC_OK) {
            HttpEntity entity = response.getEntity();
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            entity.writeTo(out);
            out.close();
            String responseStr = out.toString();
            // do something with response 
        } else {
            // handle bad response
        }
    } catch (ClientProtocolException e) {
        // handle exception
    } catch (IOException e) {
        // handle exception
    } 
```

我还在我的 Android 清单文件中添加了这一行：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

我究竟做错了什么？

这是我的 LogCat：

```
10-09 15:12:33.185: E/AndroidRuntime(5561): java.lang.RuntimeException: Unable to start activity    ComponentInfo{com.example.android.fragments/com.example.android.fragments.MainActivity}: android.os.NetworkOnMainThreadException
10-09 15:12:33.185: E/AndroidRuntime(5561):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-09 15:12:33.185: E/AndroidRuntime(5561):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-09 15:12:33.185: E/AndroidRuntime(5561):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-09 15:12:33.185: E/AndroidRuntime(5561):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:34:38.080

由于主 UI 线程上的网络活动，应用程序正在崩溃，这本身并不是一个很好的做法，因为应用程序可能会停止响应并可能被操作系统杀死。您应该始终尝试在某个单独的线程中进行后台处理，而不是在主 UI 线程中。

您需要在后台线程上创建 HttpConnection ，可能使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:35:11.133

正如异常名称所示，不允许您在主线程上执行网络操作。请参阅[参考文档](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:44:35.127

当应用程序尝试在其主线程上执行网络操作时，会引发**NetworkOnMainThreadException 。**这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。ICS 和 HoneyComb 不允许您在 UI 线程上执行的其他一些操作示例如下：

1.  打开一个 Socket 连接（即 new Socket()）。
2.  HTTP 请求（即 HTTPClient 和 HTTPUrlConnection）。
3.  尝试连接到远程 MySQL 数据库。
4.  下载文件（即 Downloader.downloadFile()）。

如果您尝试在 UI 线程上执行任何这些操作，则必须将它们包装在工作线程中。最简单的方法是使用***AsyncTask***，它允许您在用户界面上执行异步工作。***AsyncTask***将在工作线程中执行阻塞操作并将结果发布到 UI 线程上，而无需您自己处理线程和/或处理程序。

# mysql - 如何从表中选择 * WHERE 日期 = 当前日期，并且不会错过 31 日的用户

> ID：12807097
> 
> 赞同：1
> 
> 时间：2012-10-09T19:31:38.493
> 
> 标签：mysql, cron

我有一个 cron 工作，每月通过电子邮件发送用户列表。cron 每天运行并在 users 表中搜索 signup_date。我们的想法是在用户注册后 1 个月向他们发送邮件，并在他们的帐户生命周期内继续这样做。我正在考虑做这样的事情：

```
SELECT *
FROM users 
WHERE DAYOFMONTH(signup_date) = DAYOFMONTH(now()); 
```

问题是这将错过每隔一个月在 31 日注册的用户（更不用说 2 月的闰年问题）。是否有 sql 语句可以确保每个用户在每天运行时每月至少被选中一次？我也不想在数据库中创建一个额外的字段（例如 date_last_emailed）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:40:43.970

也许在该月的最后一天包括当天**或更晚**注册的所有用户？

```
WHERE IF(
  DAY(NOW()) == DAY(LAST_DAY(NOW())),
  DAY(signup_date) >= DAY(NOW()),
  DAY(signup_date) = DAY(NOW())
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:46:37.300

```
SELECT a, b
  FROM tbl
 WHERE DAYOFMONTH(signup_date) = DAYOFMONTH(CURRENT_DATE)
       OR
       -- special handling for end of month
       (LAST_DAY(CURRENT_DATE) = CURRENT_DATE
        AND
        DAYOFMONT(signup_date) > DAYOFMONTH(CURRENT_DATE)) 
```

在非闰年的 2 月 28 日，这将向在任何一个月的 29 日、30 日或 31 日注册的人发送电子邮件。

**更新** 根据评论更正。

# f# - NuGet 更新 UI 是否有效？

> ID：12807109
> 
> 赞同：5
> 
> 时间：2012-10-09T19:32:18.653
> 
> 标签：f#, nuget-package

让我感到困惑的是，即使更新出现在“管理 NuGet 包 UI”中以获取解决方案，单击更新按钮会导致一个看起来应该工作的过程，然后最终无缘无故地失败。我总是不得不手动卸载，删除库的项目引用，并从项目文件中手动删除引用。（为什么删除不这样做我不知道。）

我的设置：

VS2012RC - 也许这适用于 VS2012RTM？

NuGet v2.1 - 据我所知的最新版本

F# - 我最近才在 F# 中工作，也许问题是 F# 特有的？

FSharpx.Core - 这是我一直在更新的库，但我和其他人一起体验过

起初，消息看起来正在运行（从 1.6.78 升级到 1.6.83）

```
Added file 'FSharpx.Core.1.6.83.nupkg' to folder 'FSharpx.Core.1.6.83'.
etc.

Successfully installed 'FSharpx.Core 1.6.83'.
'FSharpx.Core 1.6.83' already installed.
Looking for updates for 'FSharpx.Core'...
Updating 'FSharpx.Core' from version '1.6.78' to '1.6.83' in project 'DS_Benchmark'.
'packages.config' already exists. Skipping...
Successfully removed 'FSharpx.Core 1.6.78' from DS_Benchmark.
'packages.config' already exists. Skipping... 
```

也许跳过“packages.config”是问题所在，因为应该在该文件中更新版本。

然后消息开始看起来很糟糕。刚安装的文件开始被删除。

```
Removed file 'FreebaseTypeProvider.htm' to folder 'C:\Users\Jack\Documents\GitHub\DS_Benchmark\packages\FSharpx.Core.1.6.83\...
etc.
Successfully uninstalled 'FSharpx.Core 1.6.83'. 
```

（顺便说一句，NuGet 能否在他们的消息中使用正确的介词来表示“删除”？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T20:52:22.430

这是 NuGet 2.1 中的错误，或者是 VS 2012 中对 F# 项目系统的更改破坏了 NuGet。

[http://nuget.codeplex.com/discussions/395351](http://nuget.codeplex.com/discussions/395351)

他们已经承认了这个问题，并承诺在 NuGet 2.2 中修复它。同时，您可以通过[投票支持该错误](http://nuget.codeplex.com/workitem/2667)以及[其他 NuGet/F#/VS2012 错误](http://nuget.codeplex.com/workitem/2149)来提供帮助。

# java - Maven 安装后的问题 - mvn install 尝试下载无法访问的文件

> ID：12807112
> 
> 赞同：1
> 
> 时间：2012-10-09T19:32:23.247
> 
> 标签：java, maven, deployment, build

安装 maven（`mvn -v`工作正常）后，我尝试`mvn install`在一个`pom.xml`我知道可以工作的 Maven 项目的根目录中进行操作。

我得到底部显示的输出，基本上表明它试图从在线 maven 存储库下载文件但失败了。该文件似乎是面向 Maven 的，我认为它与我的项目无关。

此外，如果我`mvn install`在没有 的目录中运行`pom.xml`，我理解它应该会失败，我会遇到同样的问题。我猜我的 Maven 还没有完全设置好，它的配置本身可能吗？

**谁能告诉我为什么它需要这些文件，以及为什么它可能会失败？**

我似乎可以访问 chrome 中的 URL，并且目标文件在那里，所以即使它确实需要它，我对下载失败的原因感到困惑。

```
C:\>mvn install
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Default Project
[INFO]    task-segment: [install]
[INFO] ------------------------------------------------------------------------
Downloading: http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.3/maven-resources-plugin-2.3.pom
[WARNING] Unable to get resource 'org.apache.maven.plugins:maven-resources-plugin:pom:2.3' from repository central (http://repo1.maven.org/maven2): Error transferring file: Connection timed out: conne
ct
Downloading: http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.3/maven-resources-plugin-2.3.pom
[WARNING] Unable to get resource 'org.apache.maven.plugins:maven-resources-plugin:pom:2.3' from repository central (http://repo1.maven.org/maven2): Error transferring file: Connection timed out: conne
ct
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).

Project ID: org.apache.maven.plugins:maven-resources-plugin

Reason: POM 'org.apache.maven.plugins:maven-resources-plugin' not found in repository: Unable to download the artifact from any repository

  org.apache.maven.plugins:maven-resources-plugin:pom:2.3

from the specified remote repositories:
  central (http://repo1.maven.org/maven2)

 for project org.apache.maven.plugins:maven-resources-plugin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:26:38.007

您的网关阻止 Maven 下载依赖项。

尝试检查您是否能够手动下载此 pom 文件。

> [http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.3/maven-resources-plugin-2.3.pom](http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.3/maven-resources-plugin-2.3.pom)

如果您从浏览器打开上述 URL，请检查您的防火墙设置（有时防火墙设置也会阻止 maven 下载依赖项，尤其是在企业环境中时）。

如果是这种情况，您需要使用代理绕过您的网关并下载依赖项

或者

从 maven 中央或 nexus 存储库手动下载插件，并在本地 .m2 目录中使用 maven install 命令安装它。

> maven install -DartifactId="你的依赖" -DgroupId="依赖的组ID" -DFile="你的文件位置"

正如您在评论中提到的，您可以从 chrome 打开网站，您可以使用上述命令安装依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T08:46:34.143

无法从任何存储库 Maven 下载工件：

检查代理：如果您有一些与您的公司项目相关的自定义 jar 文件，它需要您的防火墙，如果您在 setting.xml 文件中使用任何代理，则阻止它以下载它。

# bash - 字符串操作 Bash 扩展

> ID：12807113
> 
> 赞同：1
> 
> 时间：2012-10-09T19:32:26.240
> 
> 标签：bash

在我的脚本中，我试图获取一个字符串，然后输出一个字符串的扩展名（如果有的话）。所以基本上我取文件的基本名称，然后输出一段时间后出现的任何内容。

做这样的事情的语法是什么？

例如

```
dotcutter.sh
file=testfile.jpg 
```

脚本应该输出 .jpg

编辑：

我现在解决了我的问题：

```
file=$(basename "$1" )
stub=${file%.*}
echo ${file#"$stub"} 
```

这将我的论点简化为一个基本名称，谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:34:48.210

```
$ file=testfile.jpg
$ echo ${file##*.}
jpg
$ file=testfile.ext1.ext2
$ echo ${file##*.}
ext2
$ file=noextension
$ echo ${file##*.}
noextension 
```

请注意，如果文件没有扩展名，则它不起作用。如果这很重要，请尝试以下两步解决方案：

```
$ file=testfile.ext1.ext2
$ stub=${file%.*}
$ echo ${file#"$stub"}
.ext2 
```

`echo`或者这个基于正则表达式的，只有在实际存在扩展时才会调用。（`&&`是“如果那么”的简写。）

```
$ regex='(\.[^.]*)$'
$ file=testfile.ext1.ext2
$ [[ $file =~ $regex ]] && echo ${BASH_REMATCH[1]}
.ext2
$ file=noextension
$ [[ $file =~ $regex ]] && echo ${BASH_REMATCH[1]} 
```

也可以看看：

*   [基本名称(1)](http://linux.die.net/man/1/basename)
*   [目录名(1)](http://linux.die.net/man/1/dirname)
*   [Bash 常见问题解答](http://mywiki.wooledge.org/BashFAQ/073)：如何使用参数扩展？如何获取子字符串？我怎样才能得到一个没有扩展名的文件，或者只得到一个文件的扩展名？]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:33:41.323

试试下面的代码：

```
file=testfile.jpg
echo .${file#*.} 
```

使用[参数扩展](http://wiki.bash-hackers.org/syntax/pe)

# c++ - 什么会'std:;' 在 C++ 中做吗？

> ID：12807115
> 
> 赞同：89
> 
> 时间：2012-10-09T19:32:27.717
> 
> 标签：c++, std, colon

我最近正在修改一些代码，并在函数内的一行中发现了一个预先存在的错误：

```
std:;string x = y; 
```

此代码仍可编译并且一直按预期工作。

字符串定义有效，因为这个文件是`using namespace std;`，所以`std::`首先是不必要的。

问题是，为什么要`std:;`编译，如果有的话，它在做什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-09T19:34:00.413

`std:`它是一个标签，可用作`goto`.

正如*@Adam Rosenfield*在评论中指出的那样，它是一个合法的标签名称。

*C++03 §6.1/1：*

> 标签有自己的名称空间，不会干扰其他标识符。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-09T19:34:28.523

它是一个标签，后跟一个空语句，然后是一个字符串的声明`x`。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-09T19:38:40.530

它是一个标签，后面跟着字符串

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-09T19:47:06.923

```
(expression)std: (end of expression); (another expression)string x = y; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-15T10:57:14.800

编译器会告诉你发生了什么：

```
#include <iostream>
using namespace std;
int main() {
  std:;cout << "Hello!" << std::endl;
} 
```

gcc 和 clang 都给出了非常明确的警告：

```
std.cpp:4:3: warning: unused label 'std' [-Wunused-label]
  std:;cout << "Hello!" << std::endl;
  ^~~~
1 warning generated. 
```

**从这个故事中得出的结论：总是在启用警告的情况下编译您的代码**（例如`-Wall`）。

# c++ - 如何使用继承的方法和相同的基类方法？

> ID：12807116
> 
> 赞同：0
> 
> 时间：2012-10-09T19:32:29.473
> 
> 标签：c++, class, inheritance, virtual

假设我有一个类动物和一个继承动物的类狗。假设我想调用一个特定于狗的名为 'eat()' 的方法，但所有动物之间有一些共享的吃代码，所以我知道我可以将 'eat()' 设为虚拟但它不会使用基类代码，例如，我是否应该只调用我的基类“eatAll()”，然后特定动物的每个吃方法都必须调用它？我只是在寻找最好的设计。这是在 C++ 中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T19:35:47.627

这是经典的[**模板方法模式**](http://en.wikipedia.org/wiki/Template_method_pattern)。基本上：

```
class Animal
{
    void Eat() 
    {
       //stuff specific to all animals

       SpecificEat();
    }
    virtual void SpecificEat() = 0;
};

class Dog : Animal
{
    virtual void SpecificEat()
    {
        //stuff specific to dog
    }
}; 
```

使用这种方法，您不必在派生类的覆盖中显式调用基类方法。它由非自动调用`virtual` `Eat()`，具体功能由 实现`virtual SpecificEat()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T19:36:37.207

我建议你的基类接口有钩子来调用派生类型的特定功能。这称为[模板方法模式。](http://en.wikipedia.org/wiki/Template_method_pattern) 这是一个例子：

```
class Animal
{
public:
   void eat()
   {
      std::cout << "Mmmm... It's ";
      do_eat();
   }

private:
   virtual void do_eat() = 0;
};

class Dog
   : public Animal
{
   virtual void do_eat()
   {
      std::cout << "Dog Food!\n";
   }
};

class Human
   : public Animal
{
   virtual void do_eat()
   {
      std::cout << "Pizza!\n";
   }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T19:35:26.093

只需调用基类的方法。

```
class Dog : public Animal
{
public :
  void Eat()
  {
    // .. MAGIC
    Animal::Eat();
  }
}; 
```

请注意，如果您的 Animal 类的`Eat`方法是纯虚拟的（我对此表示怀疑），则不会链接。

# java - 线程“main”中的异常 java.lang.NullPointerException 错误。使用 Gpdraw

> ID：12807124
> 
> 赞同：0
> 
> 时间：2012-10-09T19:33:05.523
> 
> 标签：java, exception, nullpointerexception

好的，所以我的程序应该根据用户输入的坐标（X、Y、宽度、长度）自动绘制一个矩形。当我运行我的程序时，我在线程主错误中得到一个异常。

这是确切的错误：

```
Exception in thread "main" java.lang.NullPointerException
at rectangle.draw(rectangle.java:31)
at rectangle.main(rectangle.java:52) 
```

请告诉我我做错了什么！

谢谢！

代码：`import gpdraw.*; 导入 java.util.Scanner；

公共类矩形{

```
private static double myX;
private static double myY;
private static double myWidth;
private static double myHeight;
private DrawingTool myPencil;
private SketchPad myPaper;

public double getPerimeter(){

    double perimeter;
    perimeter = myWidth * 2 + myHeight * 2;

    return perimeter;   
}
public double Area(){
    double area;

    area = myHeight * myWidth;
    System.out.println("Area: " + area);

    return area;

}
public void draw(){
    myPencil.up();
    myPencil.move(myX , myY);
    myPencil.down();
    myPencil.move(myX + myWidth, myY);
    myPencil.move(myX + myWidth, myY + myHeight);
    myPencil.move(myX , myY);
}

public static void main(String[] args){

    Scanner input = new Scanner(System.in);
    System.out.println("Enter X Value: ");
    myX = input.nextInt();
    System.out.println("Enter Y Value: ");
    myY = input.nextInt();
    System.out.println("Enter Width: ");
    myWidth = input.nextInt();
    System.out.println("Enter Height: ");
    myHeight = input.nextInt();
    rectangle picture = new rectangle();
    picture.draw();
} 
```

} `

第 51 行：图片.draw(); 第 31 行：myPencil.up();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:34:37.980

您永远不会为该`myPencil`字段分配值，因此它将具有默认值`null`. 然后，当您尝试在此处取消引用它时：

```
myPencil.up(); 
```

...这将引发异常。

大概您*打算*给出`myPencil`一个值，例如

```
private DrawingTool myPencil = new Pencil(); 
```

...或者也许在构造函数中这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:35:37.240

您需要实例化`myPencil`：

```
myPencil = new DrawingTool(); 
```

# iphone - Objc - 在objective-c 语言中是否需要@private 指令？

> ID：12807126
> 
> 赞同：2
> 
> 时间：2012-10-09T19:33:21.940
> 
> 标签：iphone, objective-c, private-members

我只是想知道除了向后兼容性之外是否还需要将@private 关键字保留在objective-c 中，因为类扩展提供了一种更好的方式来声明您的私有iVar。保留@private 指令还有其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:35:12.430

32 位 x86 架构仍然需要在主`@interface`块中声明 ivars。合成 ivars 的能力（通过属性或类扩展或在`@implementation`.

# linux - 在编译后上传存储库

> ID：12807132
> 
> 赞同：1
> 
> 时间：2012-10-09T19:33:28.610
> 
> 标签：linux, git, unix, github

我只是想知道当特定文件编译成功时是否有办法（Linux / Unix）更新 Github 存储库？

例如，我有一个名为“Work”的存储库，如果我编译了该文件`main.cpp`并且它编译成功，它会自动同步 Github 上的文件/存储库。

我希望这是有道理的，有人可以帮助我:)！

谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:47:13.410

你可以用另一种方式。如果你写了正确的[钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Client-Side-Hooks)`main.cpp`提交，只有在编译时才会成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:55:26.007

> 我只是想知道当特定文件编译成功时是否有办法（Linux / Unix）更新 Github 存储库？

如果您可以获取并分析运行 gcc（退出代码或 grepping 输出）的结果，那么您可以在相当简单且小型（2-3-liner）的 shell 脚本中做**您想做**的事情，在这里看不到任何麻烦。

从我的角度来看，我认为您的工作流程不是万无一失的（如果您偶尔推送，那么在发生灾难的情况下，您很有可能会失去很多本地工作），为了方便起见，我更喜欢“推送所有，标记可编译的变更集”

# java - 检索位序列并将其用于查询

> ID：12807135
> 
> 赞同：0
> 
> 时间：2012-10-09T19:33:39.077
> 
> 标签：java, postgresql, jdbc

我有一个表，其中一列，我们称之为`source_id`，具有 type `bit(64)`。

我想获取此值并将其用于后续查询：

```
ResultSet rs = statement.executeQuery("....");
rs.next();
ResultSet rs2 = statement.executeQuery(".... where source_id = " + rs.getBinaryStream("source_id")); 
```

此代码不起作用，问题似乎是输入错误`rs.getBinaryStream`，但我也可能是错误的。

我能做些什么？哪种数据类型适合使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:41:38.153

我认为，`rs.getString()`应该如下工作，因为您正在形成`String`要执行的查询语句。

```
 ResultSet rs2 = 
     statement.executeQuery(".... where source_id = '" + rs.getString("source_id")+"'"); 
```

# wordpress - 尝试在 Wordpress 中创建缩略图库

> ID：12807142
> 
> 赞同：0
> 
> 时间：2012-10-09T19:34:00.567
> 
> 标签：wordpress

我在 Wordpress (gallery.php) 中创建了一个页面，并尝试从媒体库中将各种图像附加到此页面。我该怎么做？我不太确定如何在没有帖子的情况下仅将图像调用到页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:37:41.877

如果您将图像附加到您的画廊页面（以gallery.php 作为模板的页面？）那么您应该能够使用get_children。

[http://codex.wordpress.org/Function_Reference/get_children](http://codex.wordpress.org/Function_Reference/get_children)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:46:08.487

添加图像或单击“添加媒体”按钮时，您可以看到“图库”选项卡，在图库选项卡底部有一个名为“插入图库”按钮的按钮，可将附加的图像图库添加到帖子或页面

这是一些有用的参考网址 - [http://en.support.wordpress.com/images/gallery/](http://en.support.wordpress.com/images/gallery/) - [http://codex.wordpress.org/Gallery_Shortcode](http://codex.wordpress.org/Gallery_Shortcode) - [图库插件] [http://wordpress.org/扩展/插件/nextgen-gallery/] [3](http://wordpress.org/extend/plugins/nextgen-gallery/)

问候， Wordpress 自由开发者 [http://www.santoshkori.com](http://www.santoshkori.com)

# iphone - iOS 6：Youtube 在浏览器中嵌入视频 (MPAVController) 可以在横向模式下锁定应用

> ID：12807143
> 
> 赞同：4
> 
> 时间：2012-10-09T19:34:04.033
> 
> 标签：iphone, youtube, ios6, uiinterfaceorientation, landscape-portrait

我在浏览器中嵌入了一个 Youtube 视频，它是全肖像应用程序的一部分。当您启动 youtube 视频时，它会在 MPAVController 中播放，并且允许横向旋转。这对我来说不是问题，但问题是如果视频是横向的，我按“确定”关闭视频；我返回浏览器，但 iPhone 状态栏现在卡在横向模式，在应用程序顶部留下一个空白区域，并且状态栏根据旋转方向与我的应用程序的右侧或左侧部分重叠。

我的包含 UIWebView 的视图控制器被锁定为纵向：

```
- (BOOL) shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

请注意，使用 6.0 之前的 SDK 进行编译时不会出现此问题。

有类似问题的任何人都有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T16:00:16.037

我面临同样的问题。这是我解决它的方法：

首先在持有 UIWebView 的 ViewController 上注册接收 ExitFullscreenNotification：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // For FullSCreen Exit
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(youTubeVideoExit:) 
                                                 name:@"UIMoviePlayerControllerDidExitFullscreenNotification"
                                               object:nil];
} 
```

然后，在“退出全屏”处理程序上，强制纵向模式：

```
- (void)youTubeVideoExit:(id)sender {
  [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationPortrait animated:NO];
} 
```

当视频以横向模式结束时，用户会看到状态栏在一瞬间改变其位置。这可能不是最好的解决方案，但至少解决了问题。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:49:29.173

事实证明我的视图嵌入在 UINavigationController 中，所以我需要在那里处理我的旋转。

我创建了一个类别并将我的轮换代码放在那里

UINavigationController+Autorotate.m

```
#import "UINavigationController+Autorotate.h"

@implementation UINavigationController (Autorotate)

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

@end 
```

UINavigationController+Autorotate.h

```
#import <UIKit/UIKit.h>

@interface UINavigationController (Autorotate)

- (NSUInteger)supportedInterfaceOrientations;

@end 
```

# web-crawler - 如何从多个国家抓取网站？

> ID：12807145
> 
> 赞同：2
> 
> 时间：2012-10-09T19:34:11.943
> 
> 标签：web-crawler

我在美国，正在对一个根据访问国家/地区提供不同版本的网站进行轻量级爬网。

从多个国家爬行的最佳方式是什么？是否有代理服务可以路由我的 http 请求？还是我需要在每个国家/地区租用轻量级虚拟机并安装自己的代理服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:58:02.770

您可以使用像 www.hidemyass.com 这样的免费网络代理 - 但不要期望太多。

那里也有一些免费的公共代理，只需使用您选择的搜索引擎即可找到它们。（或看这里[http://www.hidemyass.com/proxy-list/](http://www.hidemyass.com/proxy-list/)）

或者使用[TOR](https://www.torproject.org/)（虽然我不确定您是否可以选择特定的退出节点）。

如果您真的考虑租用虚拟机，您还可以订阅专业的代理服务（这意味着更多的带宽等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:51:41.200

那么我使用这个 curl，如果你的主要编程语言是 php，你可以在你的服务器上这样做：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_PROXY, '195.175.37.72:80')
echo curl_exec($ch); 
```

在互联网上，很多免费的代理服务器都使用谷歌。有些人让您可以通过代理获得金钱，但他们的服务更好。当然，您可以在其他国家购买机器，但我这样做的方式更便宜、更容易。

# c#-4.0 - 给定要删除的键列表，从字典中删除键、值对

> ID：12807150
> 
> 赞同：5
> 
> 时间：2012-10-09T19:34:32.867
> 
> 标签：c#-4.0, dictionary

我有一个`List<string> AllowedList`和一个`Dictionary<string,List<string>> MyDictionary`。

对于字典中的每个键，我想检查它是否在 上`AllowedList`，如果不是，我想从字典中删除键和值。

我凭直觉尝试了这似乎是我想要的：

```
foreach (string key in MyDictionary.Keys)
{
    if (!AllowedList.Contains(key)) MyDictionary.Remove(key);
} 
```

但是，我遇到了一个`InvalidOperationException`：

> 收藏已修改；枚举操作可能无法执行。

我确信可能有一个简单的方法可以解决这个问题，但我没有立即看到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T19:47:00.530

您可以使用`Enumerable.Except`查找不在字典中的键：

```
foreach (var key in MyDictionary.Keys.Except(AllowedList).ToList())
    MyDictionary.Remove(key); 
```

`ToList()`创建设置差异的新列表并防止异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:41:53.957

您可以/应该将要删除的键存储在临时列表中，然后在额外的 for 循环中进行所有删除。

```
List<TKey> templist = new List<TKey>();

foreach (var x in MyDictionary)
{
    if (!AllowedList.Contains(x.Key))
        templist .Add(x.Key);
}
foreach (TKey item in templist )
{
    MyDictionary.Remove(item);
} 
```

这也可能有帮助： [如何使用值从字典中删除条目](https://stackoverflow.com/questions/2992001/how-to-delete-entries-from-a-dictionary-using-the-value)

# java - 根据条件更改 JSlider 的最小值和最大值

> ID：12807151
> 
> 赞同：4
> 
> 时间：2012-10-09T19:34:35.990
> 
> 标签：java, swing, user-interface, jslider, affinetransform

我正在 Netbeans 中创建一个 Swing GUI。此 GUI 的目的是打开（缓冲的）图像（在 JLabel 中作为图标）并对其应用仿射变换。现在有 4 个转换，我正在做如下。

![在此处输入图像描述](../Images/e7a8664f8358e385fe6e885633938d6c.png)

现在，每个变换都需要两个滑块来更改 X 和 Y 值，旋转的除外，它只需要一个。我这样做是因为它比必须为所有 4 种类型的转换执行四个选项卡要好得多。我也希望它是这样的，例如，如果旋转图像，则可以通过从下拉列表中选择剪切来剪切相同的旋转图像。

问题是（是）：我如何重绘标签图标并在同一个重绘图像上应用不同的变换？另外，如何根据所选效果更改 JSlider 的最小值和最大值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T19:38:45.710

您应该存储最初加载的 BufferedImage，并创建它的副本 - 这样您就不会“破坏”它。

至于更改值，有方法 setMaximum 和 setMinimum - 将侦听器添加到列表中，如[Oracle 教程](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)中所述并修改值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T20:55:46.950

作为@Daniel 回答的一个具体示例，文章[*Image processing with Java 2D*](http://www.javaworld.com/javaworld/jw-09-1998/jw-09-media.html)描述了该程序[`ImageDicer`](http://www.javaworld.com/jw-09-1998/media/ImageDicer.java)。它构造 a ，其中的`TreeMap<String, BufferedImageOp>`每一个都可以从 a 中选择`JComboBox`并应用于 a `BufferedImage`。

另请参阅[此处](https://stackoverflow.com/a/5864503/230513)和[此处](https://stackoverflow.com/a/10208380/230513)的相关示例。

# jquery - 对选定文本执行动画

> ID：12807160
> 
> 赞同：0
> 
> 时间：2012-10-09T19:34:54.227
> 
> 标签：jquery, html

我希望能够显示/隐藏特定文本（使用 jqery）。问题是我将拥有多个具有相同 id 的文本标签版本，并且我希望能够在将鼠标悬停在父对象上时对特定子对象执行动画，而不是对所有文本执行动画具有相同 id 的块。

这是我的代码：

HTML：

```
<p>Move your cursor over the posts below to read more.</p>
<div id="postContainer">
    <div id="post">
        <h4>Title 1</h4>
        <h5>Date goes here</h5>
        <p id="postDetails">Blah Blah Blah, this text is hidden until you hover over it's own parent.</p>
    </div>
</div>
<div id="postContainer">
    <div id="post">
        <h4>title 2</h4>
        <h5>Date goes here</h5>
        <p id="postDetails">This is the second hidden text, but it is revealed when you hover over the first post as well.</p>
    </div>
</div> 
```

CSS：

```
#post
{
    background:#DDDDDD;
}
#postDetails
{
    display"none;
} 
```

查询：

```
<script>
    $('#post').mouseenter(function() {
      $('#postDetails').slideDown("slow");
    });
    $('#post').mouseleave(function() {
      $('#postDetails').slideUp("slow");
    });
</script> 
```

有没有办法只显示一个而不创建一堆不同的 div id，每个 div 都有不同的名称？有 20 个这样的框（它们应该看起来都一样），我希望一次只能显示一个，当用户将鼠标悬停在随后的框上时，因为同时显示所有 20 个将大大扩大页面长度并惹恼用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:46:41.853

如果您有多个元素，则使用 id 的使用类。

请参阅jsfiddle。我更改了一些标记。

**演示**

[http://jsfiddle.net/saorabhkr/xtrpK/1/](http://jsfiddle.net/saorabhkr/xtrpK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:42:59.913

这是工作演示

[http://jsfiddle.net/CLgYB/](http://jsfiddle.net/CLgYB/)

解释：

你需要为它使用类..

代码

```
<p>Move your cursor over the posts below to read more.</p>
<div class="postContainer">
    <div class="post">
        <h4>Title 1</h4>
        <h5>Date goes here</h5>
        <p class="postDetails">Blah Blah Blah, this text is hidden until you hover over it's own parent.</p>
    </div>
</div>
<div class="postContainer">
    <div class="post">
        <h4>title 2</h4>
        <h5>Date goes here</h5>
        <p class="postDetails">This is the second hidden text, but it is revealed when you hover over the first post as well.</p>
    </div>
</div>​ 
```

jQuery 脚本

$

```
('.post').mouseenter(function() {
      $(this).children('.postDetails').slideDown("slow");
    });
    $('.post').mouseleave(function() {
     $(this).children('.postDetails').slideUp("slow");
    });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T19:47:28.567

你会想要使用类而不是 id。ID 只能用于唯一元素。您可以循环浏览所有帖子并向每个帖子添加 mouseenter 和 mouseleave 事件。使用 this 引用来定位单个帖子和 postDetails 像这样

```
$('.post').each(function(){
    $(this).mouseenter(function() {
      $(this).children('.postDetails').slideDown("slow");
    }).mouseleave(function() {
      $(this).children('.postDetails').slideUp("slow");
    });
});
​ 
```

我在这里整理了一个 jsfiddle 示例[http://jsfiddle.net/pimlinders/b2ASK/](http://jsfiddle.net/pimlinders/b2ASK/) ​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T19:39:29.477

```
$('#post').mouseenter(function() {

// while in here, the particular $('#post') which has been entered can be accessed as $(this)

     $(this).find('#postDetails').slideDown("slow");
}); 
```

...但你真的应该使用不同的 div id。这就是为什么它们被称为 ids。

# asp.net-mvc-4 - 在选中的复选框中发布表单时，ModelState 无效

> ID：12807170
> 
> 赞同：4
> 
> 时间：2012-10-09T19:35:23.223
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我遇到以下问题：如果我通过 AJAX 向 api 控制器提交包含复选框中选中值的表单，则 ModelState 对象说它无效。

先决条件：

1.  视觉工作室 2012
2.  ASP.NET MVC 4 最终版
3.  最新的 jQuery 和 jQuery 不显眼的验证东西（版本 1.8.2 和 1.9.0.1）

重现步骤：

1.  为表单创建了一个 ViewModel，包含布尔字段： ````
    public class CheckboxViewModel
    {
    [Display(Name="Test checkbox")]
    public bool TestCheckbox { get; set; }
    }

    ```` 
2.  创建了简单地准备 ViewModel 并呈现表单的控制器操作： ````
    public ActionResult Index()
    {
        return View(new CheckboxViewModel());
    }

    ```` 
3.  用表单创建了一个视图 ````
    @using (Ajax.BeginForm("Post", "api/Values", null, new AjaxOptions { HttpMethod = "POST" }, new { id = "form" }))
    {
        @Html.ValidationSummary(true)
        @Html.LabelFor(model => model.TestCheckbox)
        @Html.EditorFor(model => model.TestCheckbox)
        @Html.ValidationMessageFor(model => model.TestCheckbox)
        <input type="submit" value="Submit" />
    }

    ```` 
4.  创建的 Web API 操作检查模型状态是否有效并返回状态代码 200，否则返回 400： ````
    public HttpResponseMessage Post(CheckboxViewModel model)
    {
        if (!ModelState.IsValid)
            return new HttpResponseMessage(HttpStatusCode.BadRequest);
        return new HttpResponseMessage(HttpStatusCode.OK);
    }

    ```` 

我做了一些谷歌搜索，我知道复选框的编辑器会呈现额外的隐藏字段，但它似乎没问题，并且是模型绑定所必需的。因此，当我取消选中复选框并提交表单时一切正常，服务器响应状态为 200，这要归功于隐藏字段，我想。但是，当我选中复选框并提交表单时，服务器以状态 400 响应，这意味着 ModelState 处于无效状态。在这种情况下，ModelState 包含带有空 ErrorMessage 的错误和以下异常消息：

```
`{System.InvalidOperationException: The parameter conversion from type 'System.Collections.Generic.List`1[System.String]' to type 'System.Boolean' failed because no type converter can convert between these types.
   в System.Web.Http.ValueProviders.ValueProviderResult.ConvertSimpleType(CultureInfo culture, Object value, Type destinationType)
   в System.Web.Http.ValueProviders.ValueProviderResult.UnwrapPossibleArrayType(CultureInfo culture, Object value, Type destinationType)
   в System.Web.Http.ValueProviders.ValueProviderResult.ConvertTo(Type type, CultureInfo culture)
   в System.Web.Http.ValueProviders.ValueProviderResult.ConvertTo(Type type)
   в System.Web.Http.ModelBinding.Binders.TypeConverterModelBinder.BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)}` 
```

`我不知道如何正确处理这个问题。我应该创建自定义模型绑定器吗？还是我错过了什么？任何帮助，将不胜感激。谢谢。`

 `我创建了重现我的问题的[解决方案。](https://github.com/hjarvard/Checkbox-WebAPI-Test)

**更新：**我发现表单实际上包含值`TestCheckbox: true`和`TestCheckbox:false`，所以我认为这可能会影响活页夹并引发异常。仍然没有选择如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:23:16.163

我在使用 JavaScript 向 Web API 发送表单时遇到了同样的问题。这是可用于解决此问题的基本修复程序。我知道这有点简单，甚至丑陋——如果你有很多复选框，那就不太实用了。然而，这个想法很简单，可以很容易地扩展以满足您的要求。

在发布表单之前添加这个（使用 jQuery）：

```
if ($('[name="MyCheckbox"]:checked').length > 0)
    $('[name="MyCheckbox"]:hidden').detach();
else if ($('[name="MyCheckbox"]:hidden').length < 1)
    $('#myForm').append('<input type="hidden" name="MyCheckbox" value="false" />');

// Etc...
$.ajax({ }); 
```

因此，如果选中复选框，则删除隐藏字段，如果未选中复选框并且隐藏字段已被删除，则添加它。

看到这个小提琴：http: [//jsfiddle.net/Hsfdg/](http://jsfiddle.net/Hsfdg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T03:43:00.790

我试图实现这个

```
if ($('[name="MyCheckbox"]:checked').length > 0)
    $('[name="MyCheckbox"]:hidden').detach();
else if ($('[name="MyCheckbox"]:hidden').length < 1)
    $('#myForm').append('<input type="hidden" name="MyCheckbox" value="false" />'); 
```

但最终模型属性在隐藏复选框被分离时被删除。

Instad 将隐藏的 chechbox 值设置为 true 会导致将模型属性设置为 true 预期的值，否则默认为 false。

```
if ($('[name="MyCheckbox"]:checked').length > 0)
    $('[name="MyCheckbox"]:hidden').val(true); 
````

# java - 使用 Java 从串口接收 C 结构

> ID：12807171
> 
> 赞同：-2
> 
> 时间：2012-10-09T19:35:22.697
> 
> 标签：java, c, struct, serial-port

我有两个程序。一种是用 C 语言编写的，通过串行端口发送未签名字符的结构。

另一个是用 Java 编写的，应该接收这些数据。

我正在使用从串行端口读取后返回字节数组的 jSSC 库。我现在如何提取原始值？

发送什么：1,99,23,15,16,17,18 字节我收到：[B@c1c428 字节转换为字符：[C@13526b0

发送数据正常。我还编写了一个 C 程序来读取正确接收它的数据，因此问题似乎出在 Java 程序中。

```
 System.out.println("Port " + PortName + " opened: " + serialPort.openPort());
               //serialPort.setParams(9600, 8, 1, 0);

               byte[] input;
               if((input = serialPort.readBytes()) == null){
                       System.out.println("No data to be read");
                       System.exit(0);
               }

               char[] chars = new String(input).toCharArray();

               System.out.println("Bytes read: " + input.length);
               System.out.println("Byteoutput: " + input);

               System.out.println("Charoutput: " + chars); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:46:04.523

为了实际输出字节数组，您需要执行以下操作：

```
System.out.print("Byte output: ");
for(int i=0; i < input.length; ++i)
    System.out.print(((int)input[i]) + ", ");

System.out.println(); 
```

# asp.net-mvc - 带有下拉列表的 MVC 3 Webgrid，在回发时获取选定的值

> ID：12807173
> 
> 赞同：0
> 
> 时间：2012-10-09T19:35:26.763
> 
> 标签：asp.net-mvc, drop-down-menu, postback, viewmodel, webgrid

我有一个带有下拉列表的 webgrid 并 onchange 它回发页面。我正在尝试获取下拉列表的选定值。

**以下是我的控制器。**

```
 public ViewResult Index()
            {
                //var albums = db.Albums.Include(a => a.Artist).Include(a => a.Genre);

                var model = new AlbumActionModel { Actions = new[] { new SelectListItem { Text = "Accept", Value = "Accept" }, new SelectListItem { Text = "Deny", Value = "Deny" } }, Albums = db.Albums.Include(a => a.Artist).Include(a => a.Genre) };
                return View(model);
            } 
```

**以下是我的观点。**

```
<div>
   @{
    WebGrid grid = new WebGrid(Model.Albums, defaultSort: "Title", selectionFieldName: "SelectedRow");
    }
   @using (Html.BeginForm("Index", "Album", FormMethod.Post, new { id = "TheForm" }))
   {
    @grid.GetHtml(columns: grid.Columns(grid.Column("Edit",
                                                    format: @<text> @Html.ActionLink("Edit", "Edit", new { id = item.AlbumId })></text>),
                           grid.Column("AlbumId"),
                           grid.Column("Title"),
                           grid.Column("Action",
                                        format:
                                            @<span>
                                            @{var index = item.AlbumId.ToString();}
                                            @Html.DropDownList("Actions" +((string)index), Model.Actions, "--Select One--", new { onchange = "this.form.submit();" })
                                            </span>),
                           grid.Column("Delete",
                                        format: @<text> @Html.ActionLink("Delete", "Delete", new { id = item.AlbumId })></text>)))
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:24:01.077

在您的下拉列表中尝试以下语句：

```
@Html.DropDownList("Actions" +((string)index), Model.Actions, "--Select One--",new { @onchange = "Submit(this.value);" }) 
```

现在在您的标签中编写一个函数以将`<script>`其发布到页面

```
 <script type="text/javascript">
    function Submit(e)
    {
    //write it to post to the controller using ajax 
    $.ajax({
                    type: 'POST',
                    dataType: 'json',
                    url: '@Url.Action("Submit", "ControllerName")',
                    data: ({ value: e}), 
                    success: function (result) {
                        //do something
                    }
                        ,
                    error: function (result) {
                        //do something
                    }
                });
    }
</script> 
```

希望这可以帮助。

# php - PHP：编写一个简单的 removeEmoji 函数

> ID：12807176
> 
> 赞同：37
> 
> 时间：2012-10-09T19:35:33.333
> 
> 标签：php, instagram, emoji

我正在寻找一个简单的功能，可以从 instagram 评论中删除表情符号字符。我现在尝试过的（使用我在 SO 和其他网站上找到的示例中的大量代码）：

```
// PHP class
public static function removeEmoji($string)
{
    // split the string into UTF8 char array
    // for loop inside char array
        // if char is emoji, remove it
    // endfor
    // return newstring
} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-10T16:29:41.287

我认为 preg_replace 函数是最简单的解决方案。

As [EaterOfCode](https://stackoverflow.com/q/12807176/229088#comment17320341_12807176) suggests, I read the [wiki page](http://en.wikipedia.org/wiki/Emoji) and coded new regex since none of SO (or other websites) answers seemed to work for Instagram photo captions (API returning format) . Note: /u identifier is mandatory to match \x unicode chars.

```
public static function removeEmoji($text) {

    $clean_text = "";

    // Match Emoticons
    $regexEmoticons = '/[\x{1F600}-\x{1F64F}]/u';
    $clean_text = preg_replace($regexEmoticons, '', $text);

    // Match Miscellaneous Symbols and Pictographs
    $regexSymbols = '/[\x{1F300}-\x{1F5FF}]/u';
    $clean_text = preg_replace($regexSymbols, '', $clean_text);

    // Match Transport And Map Symbols
    $regexTransport = '/[\x{1F680}-\x{1F6FF}]/u';
    $clean_text = preg_replace($regexTransport, '', $clean_text);

    // Match Miscellaneous Symbols
    $regexMisc = '/[\x{2600}-\x{26FF}]/u';
    $clean_text = preg_replace($regexMisc, '', $clean_text);

    // Match Dingbats
    $regexDingbats = '/[\x{2700}-\x{27BF}]/u';
    $clean_text = preg_replace($regexDingbats, '', $clean_text);

    return $clean_text;
} 
```

The function does not remove all emojis since there are many more, but you get the point.

Please refer to [unicode.org - full emoji list](http://unicode.org/emoji/charts/full-emoji-list.html) (thanks [Epoc](https://stackoverflow.com/questions/12807176/php-writing-a-simple-removeemoji-function#comment67832624_12824140))

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-11-26T03:44:12.887

As apple continues to add emojis to new versions of ios, i will be updating and maintaining this answer.

This answer has been updated for ios 12.1\. If you have problems, then please check the edit history for previous versions of this answer (having multiple regex in this answer exceeds SO's max post body length)

**Beta Version for ios 12.1 (Nov, 2018)**

```
public static function removeEmoji($string)
    return preg_replace('/[\x{1F3F4}](?:\x{E0067}\x{E0062}\x{E0077}\x{E006C}\x{E0073}\x{E007F})|[\x{1F3F4}](?:\x{E0067}\x{E0062}\x{E0073}\x{E0063}\x{E0074}\x{E007F})|[\x{1F3F4}](?:\x{E0067}\x{E0062}\x{E0065}\x{E006E}\x{E0067}\x{E007F})|[\x{1F3F4}](?:\x{200D}\x{2620}\x{FE0F})|[\x{1F3F3}](?:\x{FE0F}\x{200D}\x{1F308})|[\x{0023}\x{002A}\x{0030}\x{0031}\x{0032}\x{0033}\x{0034}\x{0035}\x{0036}\x{0037}\x{0038}\x{0039}](?:\x{FE0F}\x{20E3})|[\x{1F415}](?:\x{200D}\x{1F9BA})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F467}\x{200D}\x{1F467})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F467}\x{200D}\x{1F466})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F467})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F466}\x{200D}\x{1F466})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F466})|[\x{1F468}](?:\x{200D}\x{1F468}\x{200D}\x{1F467}\x{200D}\x{1F467})|[\x{1F468}](?:\x{200D}\x{1F468}\x{200D}\x{1F466}\x{200D}\x{1F466})|[\x{1F468}](?:\x{200D}\x{1F468}\x{200D}\x{1F467}\x{200D}\x{1F466})|[\x{1F468}](?:\x{200D}\x{1F468}\x{200D}\x{1F467})|[\x{1F468}](?:\x{200D}\x{1F468}\x{200D}\x{1F466})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F469}\x{200D}\x{1F467}\x{200D}\x{1F467})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F469}\x{200D}\x{1F466}\x{200D}\x{1F466})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F469}\x{200D}\x{1F467}\x{200D}\x{1F466})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F469}\x{200D}\x{1F467})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F469}\x{200D}\x{1F466})|[\x{1F469}](?:\x{200D}\x{2764}\x{FE0F}\x{200D}\x{1F469})|[\x{1F469}\x{1F468}](?:\x{200D}\x{2764}\x{FE0F}\x{200D}\x{1F468})|[\x{1F469}](?:\x{200D}\x{2764}\x{FE0F}\x{200D}\x{1F48B}\x{200D}\x{1F469})|[\x{1F469}\x{1F468}](?:\x{200D}\x{2764}\x{FE0F}\x{200D}\x{1F48B}\x{200D}\x{1F468})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F9BD})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F9BC})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F9AF})|[\x{1F575}\x{1F3CC}\x{26F9}\x{1F3CB}](?:\x{FE0F}\x{200D}\x{2640}\x{FE0F})|[\x{1F575}\x{1F3CC}\x{26F9}\x{1F3CB}](?:\x{FE0F}\x{200D}\x{2642}\x{FE0F})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F692})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F680})|[\x{1F468}\x{1F469}](?:\x{200D}\x{2708}\x{FE0F})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F3A8})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F3A4})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F4BB})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F52C})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F4BC})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F3ED})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F527})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F373})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F33E})|[\x{1F468}\x{1F469}](?:\x{200D}\x{2696}\x{FE0F})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F3EB})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F393})|[\x{1F468}\x{1F469}](?:\x{200D}\x{2695}\x{FE0F})|[\x{1F471}\x{1F64D}\x{1F64E}\x{1F645}\x{1F646}\x{1F481}\x{1F64B}\x{1F9CF}\x{1F647}\x{1F926}\x{1F937}\x{1F46E}\x{1F482}\x{1F477}\x{1F473}\x{1F9B8}\x{1F9B9}\x{1F9D9}\x{1F9DA}\x{1F9DB}\x{1F9DC}\x{1F9DD}\x{1F9DE}\x{1F9DF}\x{1F486}\x{1F487}\x{1F6B6}\x{1F9CD}\x{1F9CE}\x{1F3C3}\x{1F46F}\x{1F9D6}\x{1F9D7}\x{1F3C4}\x{1F6A3}\x{1F3CA}\x{1F6B4}\x{1F6B5}\x{1F938}\x{1F93C}\x{1F93D}\x{1F93E}\x{1F939}\x{1F9D8}](?:\x{200D}\x{2640}\x{FE0F})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F9B2})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F9B3})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F9B1})|[\x{1F468}\x{1F469}](?:\x{200D}\x{1F9B0})|[\x{1F471}\x{1F64D}\x{1F64E}\x{1F645}\x{1F646}\x{1F481}\x{1F64B}\x{1F9CF}\x{1F647}\x{1F926}\x{1F937}\x{1F46E}\x{1F482}\x{1F477}\x{1F473}\x{1F9B8}\x{1F9B9}\x{1F9D9}\x{1F9DA}\x{1F9DB}\x{1F9DC}\x{1F9DD}\x{1F9DE}\x{1F9DF}\x{1F486}\x{1F487}\x{1F6B6}\x{1F9CD}\x{1F9CE}\x{1F3C3}\x{1F46F}\x{1F9D6}\x{1F9D7}\x{1F3C4}\x{1F6A3}\x{1F3CA}\x{1F6B4}\x{1F6B5}\x{1F938}\x{1F93C}\x{1F93D}\x{1F93E}\x{1F939}\x{1F9D8}](?:\x{200D}\x{2642}\x{FE0F})|[\x{1F441}](?:\x{FE0F}\x{200D}\x{1F5E8}\x{FE0F})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1E9}\x{1F1F0}\x{1F1F2}\x{1F1F3}\x{1F1F8}\x{1F1F9}\x{1F1FA}](?:\x{1F1FF})|[\x{1F1E7}\x{1F1E8}\x{1F1EC}\x{1F1F0}\x{1F1F1}\x{1F1F2}\x{1F1F5}\x{1F1F8}\x{1F1FA}](?:\x{1F1FE})|[\x{1F1E6}\x{1F1E8}\x{1F1F2}\x{1F1F8}](?:\x{1F1FD})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1EC}\x{1F1F0}\x{1F1F2}\x{1F1F5}\x{1F1F7}\x{1F1F9}\x{1F1FF}](?:\x{1F1FC})|[\x{1F1E7}\x{1F1E8}\x{1F1F1}\x{1F1F2}\x{1F1F8}\x{1F1F9}](?:\x{1F1FB})|[\x{1F1E6}\x{1F1E8}\x{1F1EA}\x{1F1EC}\x{1F1ED}\x{1F1F1}\x{1F1F2}\x{1F1F3}\x{1F1F7}\x{1F1FB}](?:\x{1F1FA})|[\x{1F1E6}\x{1F1E7}\x{1F1EA}\x{1F1EC}\x{1F1ED}\x{1F1EE}\x{1F1F1}\x{1F1F2}\x{1F1F5}\x{1F1F8}\x{1F1F9}\x{1F1FE}](?:\x{1F1F9})|[\x{1F1E6}\x{1F1E7}\x{1F1EA}\x{1F1EC}\x{1F1EE}\x{1F1F1}\x{1F1F2}\x{1F1F5}\x{1F1F7}\x{1F1F8}\x{1F1FA}\x{1F1FC}](?:\x{1F1F8})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1EA}\x{1F1EB}\x{1F1EC}\x{1F1ED}\x{1F1EE}\x{1F1F0}\x{1F1F1}\x{1F1F2}\x{1F1F3}\x{1F1F5}\x{1F1F8}\x{1F1F9}](?:\x{1F1F7})|[\x{1F1E6}\x{1F1E7}\x{1F1EC}\x{1F1EE}\x{1F1F2}](?:\x{1F1F6})|[\x{1F1E8}\x{1F1EC}\x{1F1EF}\x{1F1F0}\x{1F1F2}\x{1F1F3}](?:\x{1F1F5})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1E9}\x{1F1EB}\x{1F1EE}\x{1F1EF}\x{1F1F2}\x{1F1F3}\x{1F1F7}\x{1F1F8}\x{1F1F9}](?:\x{1F1F4})|[\x{1F1E7}\x{1F1E8}\x{1F1EC}\x{1F1ED}\x{1F1EE}\x{1F1F0}\x{1F1F2}\x{1F1F5}\x{1F1F8}\x{1F1F9}\x{1F1FA}\x{1F1FB}](?:\x{1F1F3})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1E9}\x{1F1EB}\x{1F1EC}\x{1F1ED}\x{1F1EE}\x{1F1EF}\x{1F1F0}\x{1F1F2}\x{1F1F4}\x{1F1F5}\x{1F1F8}\x{1F1F9}\x{1F1FA}\x{1F1FF}](?:\x{1F1F2})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1EC}\x{1F1EE}\x{1F1F2}\x{1F1F3}\x{1F1F5}\x{1F1F8}\x{1F1F9}](?:\x{1F1F1})|[\x{1F1E8}\x{1F1E9}\x{1F1EB}\x{1F1ED}\x{1F1F1}\x{1F1F2}\x{1F1F5}\x{1F1F8}\x{1F1F9}\x{1F1FD}](?:\x{1F1F0})|[\x{1F1E7}\x{1F1E9}\x{1F1EB}\x{1F1F8}\x{1F1F9}](?:\x{1F1EF})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1EB}\x{1F1EC}\x{1F1F0}\x{1F1F1}\x{1F1F3}\x{1F1F8}\x{1F1FB}](?:\x{1F1EE})|[\x{1F1E7}\x{1F1E8}\x{1F1EA}\x{1F1EC}\x{1F1F0}\x{1F1F2}\x{1F1F5}\x{1F1F8}\x{1F1F9}](?:\x{1F1ED})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1E9}\x{1F1EA}\x{1F1EC}\x{1F1F0}\x{1F1F2}\x{1F1F3}\x{1F1F5}\x{1F1F8}\x{1F1F9}\x{1F1FA}\x{1F1FB}](?:\x{1F1EC})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1EC}\x{1F1F2}\x{1F1F3}\x{1F1F5}\x{1F1F9}\x{1F1FC}](?:\x{1F1EB})|[\x{1F1E6}\x{1F1E7}\x{1F1E9}\x{1F1EA}\x{1F1EC}\x{1F1EE}\x{1F1EF}\x{1F1F0}\x{1F1F2}\x{1F1F3}\x{1F1F5}\x{1F1F7}\x{1F1F8}\x{1F1FB}\x{1F1FE}](?:\x{1F1EA})|[\x{1F1E6}\x{1F1E7}\x{1F1E8}\x{1F1EC}\x{1F1EE}\x{1F1F2}\x{1F1F8}\x{1F1F9}](?:\x{1F1E9})|[\x{1F1E6}\x{1F1E8}\x{1F1EA}\x{1F1EE}\x{1F1F1}\x{1F1F2}\x{1F1F3}\x{1F1F8}\x{1F1F9}\x{1F1FB}](?:\x{1F1E8})|[\x{1F1E7}\x{1F1EC}\x{1F1F1}\x{1F1F8}](?:\x{1F1E7})|[\x{1F1E7}\x{1F1E8}\x{1F1EA}\x{1F1EC}\x{1F1F1}\x{1F1F2}\x{1F1F3}\x{1F1F5}\x{1F1F6}\x{1F1F8}\x{1F1F9}\x{1F1FA}\x{1F1FB}\x{1F1FF}](?:\x{1F1E6})|[\x{00A9}\x{00AE}\x{203C}\x{2049}\x{2122}\x{2139}\x{2194}-\x{2199}\x{21A9}-\x{21AA}\x{231A}-\x{231B}\x{2328}\x{23CF}\x{23E9}-\x{23F3}\x{23F8}-\x{23FA}\x{24C2}\x{25AA}-\x{25AB}\x{25B6}\x{25C0}\x{25FB}-\x{25FE}\x{2600}-\x{2604}\x{260E}\x{2611}\x{2614}-\x{2615}\x{2618}\x{261D}\x{2620}\x{2622}-\x{2623}\x{2626}\x{262A}\x{262E}-\x{262F}\x{2638}-\x{263A}\x{2640}\x{2642}\x{2648}-\x{2653}\x{265F}-\x{2660}\x{2663}\x{2665}-\x{2666}\x{2668}\x{267B}\x{267E}-\x{267F}\x{2692}-\x{2697}\x{2699}\x{269B}-\x{269C}\x{26A0}-\x{26A1}\x{26AA}-\x{26AB}\x{26B0}-\x{26B1}\x{26BD}-\x{26BE}\x{26C4}-\x{26C5}\x{26C8}\x{26CE}-\x{26CF}\x{26D1}\x{26D3}-\x{26D4}\x{26E9}-\x{26EA}\x{26F0}-\x{26F5}\x{26F7}-\x{26FA}\x{26FD}\x{2702}\x{2705}\x{2708}-\x{270D}\x{270F}\x{2712}\x{2714}\x{2716}\x{271D}\x{2721}\x{2728}\x{2733}-\x{2734}\x{2744}\x{2747}\x{274C}\x{274E}\x{2753}-\x{2755}\x{2757}\x{2763}-\x{2764}\x{2795}-\x{2797}\x{27A1}\x{27B0}\x{27BF}\x{2934}-\x{2935}\x{2B05}-\x{2B07}\x{2B1B}-\x{2B1C}\x{2B50}\x{2B55}\x{3030}\x{303D}\x{3297}\x{3299}\x{1F004}\x{1F0CF}\x{1F170}-\x{1F171}\x{1F17E}-\x{1F17F}\x{1F18E}\x{1F191}-\x{1F19A}\x{1F201}-\x{1F202}\x{1F21A}\x{1F22F}\x{1F232}-\x{1F23A}\x{1F250}-\x{1F251}\x{1F300}-\x{1F321}\x{1F324}-\x{1F393}\x{1F396}-\x{1F397}\x{1F399}-\x{1F39B}\x{1F39E}-\x{1F3F0}\x{1F3F3}-\x{1F3F5}\x{1F3F7}-\x{1F3FA}\x{1F400}-\x{1F4FD}\x{1F4FF}-\x{1F53D}\x{1F549}-\x{1F54E}\x{1F550}-\x{1F567}\x{1F56F}-\x{1F570}\x{1F573}-\x{1F57A}\x{1F587}\x{1F58A}-\x{1F58D}\x{1F590}\x{1F595}-\x{1F596}\x{1F5A4}-\x{1F5A5}\x{1F5A8}\x{1F5B1}-\x{1F5B2}\x{1F5BC}\x{1F5C2}-\x{1F5C4}\x{1F5D1}-\x{1F5D3}\x{1F5DC}-\x{1F5DE}\x{1F5E1}\x{1F5E3}\x{1F5E8}\x{1F5EF}\x{1F5F3}\x{1F5FA}-\x{1F64F}\x{1F680}-\x{1F6C5}\x{1F6CB}-\x{1F6D2}\x{1F6D5}\x{1F6E0}-\x{1F6E5}\x{1F6E9}\x{1F6EB}-\x{1F6EC}\x{1F6F0}\x{1F6F3}-\x{1F6FA}\x{1F7E0}-\x{1F7EB}\x{1F90D}-\x{1F93A}\x{1F93C}-\x{1F945}\x{1F947}-\x{1F971}\x{1F973}-\x{1F976}\x{1F97A}-\x{1F9A2}\x{1F9A5}-\x{1F9AA}\x{1F9AE}-\x{1F9CA}\x{1F9CD}-\x{1F9FF}\x{1FA70}-\x{1FA73}\x{1FA78}-\x{1FA7A}\x{1FA80}-\x{1FA82}\x{1FA90}-\x{1FA95}]/u', '', $string);
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-01-24T15:22:38.983

Updated the correct answer with more codes, just a few emojis are left.

```
public static function removeEmoji($text) {

    $clean_text = "";

    // Match Emoticons
    $regexEmoticons = '/[\x{1F600}-\x{1F64F}]/u';
    $clean_text = preg_replace($regexEmoticons, '', $text);

    // Match Miscellaneous Symbols and Pictographs
    $regexSymbols = '/[\x{1F300}-\x{1F5FF}]/u';
    $clean_text = preg_replace($regexSymbols, '', $clean_text);

    // Match Transport And Map Symbols
    $regexTransport = '/[\x{1F680}-\x{1F6FF}]/u';
    $clean_text = preg_replace($regexTransport, '', $clean_text);

    // Match Miscellaneous Symbols
    $regexMisc = '/[\x{2600}-\x{26FF}]/u';
    $clean_text = preg_replace($regexMisc, '', $clean_text);

    // Match Dingbats
    $regexDingbats = '/[\x{2700}-\x{27BF}]/u';
    $clean_text = preg_replace($regexDingbats, '', $clean_text);

    // Match Flags
    $regexDingbats = '/[\x{1F1E6}-\x{1F1FF}]/u';
    $clean_text = preg_replace($regexDingbats, '', $clean_text);

    // Others
    $regexDingbats = '/[\x{1F910}-\x{1F95E}]/u';
    $clean_text = preg_replace($regexDingbats, '', $clean_text);

    $regexDingbats = '/[\x{1F980}-\x{1F991}]/u';
    $clean_text = preg_replace($regexDingbats, '', $clean_text);

    $regexDingbats = '/[\x{1F9C0}]/u';
    $clean_text = preg_replace($regexDingbats, '', $clean_text);

    $regexDingbats = '/[\x{1F9F9}]/u';
    $clean_text = preg_replace($regexDingbats, '', $clean_text);

    return $clean_text;
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-12-07T10:03:36.630

It is also possible to remove the emojis using iconv. It's pretty similar to the solution based on mb_convert_encoding in this thread, but iconv offers the //IGNORE option, so there's no need to protect/restore the "?". The emojis are replaced with a space, so the function is replacing multiple consecutive spaces with a single one.

It only works well with texts that are Latin-9 + emoji

But:

*   It's about 100x faster than the best answer (as of dec. 2020),
*   For Latin texts, it's more reliable (the best answer leaves unwanted characters with some "Dark Skin Tone" emojis, for instance ‍♂️ ‍♂️ ‍♂️ ‍♀️ ‍♂️ ‍♀️ ‍♂️ ‍♂️ ‍♂️ ‍♂️, or even ),
*   Future emojis will also be removed.

```
function removeEmoji(string $text): string
{
    $text = iconv('UTF-8', 'ISO-8859-15//IGNORE', $text);
    $text = preg_replace('/\s+/', ' ', $text);
    return iconv('ISO-8859-15', 'UTF-8', $text);
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-01-06T18:43:27.500

I developed a funtcion using the parser from UTF-8 for ISO-8859-1 in php ( who returns a ? character for invalid characters in conversion ).

```
function removeEmojis( $string ) {
    $string = str_replace( "?", "{%}", $string );
    $string  = mb_convert_encoding( $string, "ISO-8859-1", "UTF-8" );
    $string  = mb_convert_encoding( $string, "UTF-8", "ISO-8859-1" );
    $string  = str_replace( array( "?", "? ", " ?" ), array(""), $string );
    $string  = str_replace( "{%}", "?", $string );
    return trim( $string );
} 
```

Explanation:

*   convert the string from utf-8 to iso-8859-1

*   return back to utf-8 (mb_ function replace invalid characters to ''?''remove non-valid characters )

*   Replace ? to none

*   Return back the ''?'' character from the original string

Make sure you are using UTF-8 to work.

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-07-03T07:32:13.980

While all of these approaches are valid, they are fundamentally a blocklist of characters over regex: this is hardly maintainable, and prone to error.

Emojis are actually one of various different code blocks that see large use as icons on the web and elsewhere: [Miscellaneous Symbols and Pictographs](https://en.wikipedia.org/wiki/Miscellaneous_Symbols_and_Pictographs), [Emoticons](https://en.wikipedia.org/wiki/Emoticons_(Unicode_block)), [Transport and Map Symbols](https://en.wikipedia.org/wiki/Transport_and_Map_Symbols) are only the most used, but I could go on with symbols like Mahjong tiles and alchemical ones, all belonging to the Supplementary Multilingual Plane.

Unicode has a definite structure for allocating code points (that is, symbol encodings) that won't presumably change across versions, and you may very well leverage that:

*   Between 1F000 and 1F0FF you are -only- going to find game symbols
*   Between 1F300 and 1FBFF you are -never- going to find an alphabetic or language writing symbol, enclosed or otherwise
*   Between E0000 and E007D you are going to find the mysterious *Tags* code block: when encapsulated by 1F3F4 (Which is this: ) and E007F they allow rendering flags, acting as modifying characters. if you filter out the black flag, filter this ones out too!

So, instead on relying on hacky preg_replaces implementations which are **not** safe for multibyte strings (and that is the reason we have [mb_ereg_replace](https://www.php.net/manual/en/function.mb-ereg-replace.php)), use the Intl module:

```
/**
  * Removes all characters within a Unicode codepoint range, *extremes included*, from a given UTF-8 string
  * @param string $text The text to filter
  * @param int $rangeStart The beginning of the Unicode range
  * @param int $rangeEnd The end of the Unicode range
  * @return string The filtered string
 */
function SanifyUnicodeRange(string $input, int $rangeStart, int $rangeEnd) {
     /*
     If you have php >= 7.4, use mb_str_split in place of the following 7 lines 
     If you are using another UTF encoding and you're not using mb_str_split, 
     remember to change it below
     */
     $inputLength = mb_strlen($input);
     $charactersArray = array();
     while ($inputLength) { 
         $charactersArray[] = mb_substr($input, 0, 1, "UTF-8");
         $input = mb_substr($input, 1, $inputLength, "UTF-8"); 
         $inputLength = mb_strlen($input);
     }
     //Iterate over the characters array, and implode (which is mb-safe) it back into a string
     return implode('', array_filter($charactersArray, function ($unicodeCharacter) use ($rangeStart, $rangeEnd) {
         $codePoint = IntlChar::ord($unicodeCharacter);
         //Does it fall within the code block we're filtering?
         return ($codePoint < $rangeStart || $codePoint > $rangeEnd);
     }));
 } 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-09-09T13:36:22.043

use below pattern to remove all of emojis

```
function removeEmoji($text) {
    return preg_replace('/([0-9|#][\x{20E3}])|[\x{00ae}|\x{00a9}|\x{203C}|\x{2047}|\x{2048}|\x{2049}|\x{3030}|\x{303D}|\x{2139}|\x{2122}|\x{3297}|\x{3299}][\x{FE00}-\x{FEFF}]?|[\x{2190}-\x{21FF}][\x{FE00}-\x{FEFF}]?|[\x{2300}-\x{23FF}][\x{FE00}-\x{FEFF}]?|[\x{2460}-\x{24FF}][\x{FE00}-\x{FEFF}]?|[\x{25A0}-\x{25FF}][\x{FE00}-\x{FEFF}]?|[\x{2600}-\x{27BF}][\x{FE00}-\x{FEFF}]?|[\x{2600}-\x{27BF}][\x{1F000}-\x{1FEFF}]?|[\x{2900}-\x{297F}][\x{FE00}-\x{FEFF}]?|[\x{2B00}-\x{2BF0}][\x{FE00}-\x{FEFF}]?|[\x{1F000}-\x{1F9FF}][\x{FE00}-\x{FEFF}]?|[\x{1F000}-\x{1F9FF}][\x{1F000}-\x{1FEFF}]?/u', '', $text);
} 
```

[refrence](https://gist.github.com/chuehnone/c0a3868a3c72906373ba02098e6aef76)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-08-31T10:39:01.740

We had a really long fight with emojis at my work, we found a few regex for this problem but none of them worked. This one is working:

Edit: This does not cover ALL the emojis. I'm still searching for the Holy Grail of Emoji Regexp, but not found it yet.

```
return preg_replace('/([0-9|#][\x{20E3}])|[\x{00ae}\x{00a9}\x{203C}\x{2047}\x{2048}\x{2049}\x{3030}\x{303D}\x{2139}\x{2122}\x{3297}\x{3299}][\x{FE00}-\x{FEFF}]?|[\x{2190}-\x{21FF}][\x{FE00}-\x{FEFF}]?|[\x{2300}-\x{23FF}][\x{FE00}-\x{FEFF}]?|[\x{2460}-\x{24FF}][\x{FE00}-\x{FEFF}]?|[\x{25A0}-\x{25FF}][\x{FE00}-\x{FEFF}]?|[\x{2600}-\x{27BF}][\x{FE00}-\x{FEFF}]?|[\x{2900}-\x{297F}][\x{FE00}-\x{FEFF}]?|[\x{2B00}-\x{2BF0}][\x{FE00}-\x{FEFF}]?|[\x{1F000}-\x{1F6FF}][\x{FE00}-\x{FEFF}]?/u', '', $text); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-09-01T08:11:30.927

It's a simple regex but supports it all!

```
$re = '/[
(\x{1F600}-\x{1F64F})|
(\x{2700}-\x{27BF})|
(\x{1F680}-\x{1F6FF})|
(\x{24C2}-\x{1F251})|
(\x{1F30D}-\x{1F567})|
(\x{1F900}-\x{1F9FF})|
(\x{1F300}-\x{1F5FF})
]/mu'; 
```

Check out the result in [here (regex101)](https://regex101.com/r/uti7OU/1).

So your php function can be:

```
function removeEmojis($input) {
    $re = '/[
(\x{1F600}-\x{1F64F})|
(\x{2700}-\x{27BF})|
(\x{1F680}-\x{1F6FF})|
(\x{24C2}-\x{1F251})|
(\x{1F30D}-\x{1F567})|
(\x{1F900}-\x{1F9FF})|
(\x{1F300}-\x{1F5FF})
]/mu';
    $result = preg_replace($re, "", $input);
    return $result;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-08-13T23:20:26.310

I have solved this issue by using the same code WordPress uses to replace emojis by images

here is the code that I used and it worked perfectly as it has a comprehensive list of the most used emojis

The full code exists here [https://pastebin.com/8MqGdD6p](https://pastebin.com/8MqGdD6p)

here is how it works but make sure to copy the code from pastebin as this is the non-complete code

```
$content ='<span class="do">⚫&lt;/span> where emojis exist';
$partials = array('&#x1f469;&#x200d;); // the list of emojis 

foreach ( $partials as $emojum ) {
    if ( version_compare( phpversion(), '5.4', '<' ) ) {
        $emoji_char = html_entity_decode( $emojum, ENT_COMPAT, 'UTF-8' );
    } else {
        $emoji_char = html_entity_decode( $emojum );
    }
    if ( false !== strpos( $content, $emoji_char ) ) {
        $content = preg_replace( "/$emoji_char/", '', $content );
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-12-01T12:29:13.233

PHP remove Emojis or 4 byte characters

Emojis or BMP character have more than three bytes and maximum of four bytes per character. To store this type of characters, UTF8mb4 character set is needed in MySQL. And it is available only in MySQL 5.5.3 and above versions.

Otherwise, remove all 4 byte characters and store it in DB. Example script follows:

```
#to remove 4byte characters like emojis etc..
function replace_4byte($string) {
    return preg_replace('%(?:
          \xF0[\x90-\xBF][\x80-\xBF]{2}      # planes 1-3
        | [\xF1-\xF3][\x80-\xBF]{3}          # planes 4-15
        | \xF4[\x80-\x8F][\x80-\xBF]{2}      # plane 16
    )%xs', '', $string);    
} 
```

Test with:

```
$string = "We test those emojis     ";
$string = replace_4byte($string);
echo $string; 
```

Output:

`We test those emojis`

Credits go to [http://scriptsof.com/php-remove-emojis-or-4-byte-characters-19](http://scriptsof.com/php-remove-emojis-or-4-byte-characters-19)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-09T20:16:50.623

由于 Emoji 字符使用 unicode 的私人使用区域，您可以使用从to`preg_replace()`删除整个编码字符区域。`U+E000``U+F8FF`

```
function removeEmoji($string) {
    return preg_replace('/&#x(e[0-9a-f][0-9a-f][0-9a-f]|f[0-8][0-9a-f][0-9a-f])/i', '', $string);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-30T08:23:55.430

```
function emojiFilter($text){
$text = json_encode($text);
preg_match_all("/(\\\\ud83c\\\\u[0-9a-f]{4})|(\\\\ud83d\\\u[0-9a-f]{4})|(\\\\u[0-9a-f]{4})/", $text, $matchs);
if(!isset($matchs[0][0])) { return json_decode($text, true); }

$emoji = $matchs[0];
foreach($emoji as $ec) {
    $hex = substr($ec, -4);
    if(strlen($ec)==6) {
        if($hex>='2600' and $hex<='27ff') {
            $text = str_replace($ec, '', $text);
        }
    } else {
        if($hex>='dc00' and $hex<='dfff') {
            $text = str_replace($ec, '', $text);
        }
    }
}

return json_decode($text, true);  } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-12T19:54:47.283

@sglessard since the code is outdated, here the full list of all Emoji for 07/12/2018 You will be able to generate it, by running the source code i posted

Please let me know if you find any kind of issue, thank you.

```
public static function removeEmoji($text) {
    $regexEmoticons = [
        '/[\x{0023}]/u',
        '/[\x{002A}]/u',
        '/[\x{00A9}]/u',
        '/[\x{00AE}]/u',
        '/[\x{200D}]/u',
        '/[\x{203C}]/u',
        '/[\x{2049}]/u',
        '/[\x{20E3}]/u',
        '/[\x{2122}]/u',
        '/[\x{2139}]/u',
        '/[\x{2194}-\x{2199}]/u',
        '/[\x{21A9}-\x{21AA}]/u',
        '/[\x{231A}-\x{231B}]/u',
        '/[\x{2328}]/u',
        '/[\x{23CF}]/u',
        '/[\x{23E9}-\x{23F3}]/u',
        '/[\x{23F8}-\x{23FA}]/u',
        '/[\x{24C2}]/u',
        '/[\x{25AA}-\x{25AB}]/u',
        '/[\x{25B6}]/u',
        '/[\x{25C0}]/u',
        '/[\x{25FB}-\x{25FE}]/u',
        '/[\x{2600}-\x{2604}]/u',
        '/[\x{260E}]/u',
        '/[\x{2611}]/u',
        '/[\x{2614}-\x{2615}]/u',
        '/[\x{2618}]/u',
        '/[\x{261D}]/u',
        '/[\x{2620}]/u',
        '/[\x{2622}-\x{2623}]/u',
        '/[\x{2626}]/u',
        '/[\x{262A}]/u',
        '/[\x{262E}-\x{262F}]/u',
        '/[\x{2638}-\x{263A}]/u',
        '/[\x{2640}]/u',
        '/[\x{2642}]/u',
        '/[\x{2648}-\x{2653}]/u',
        '/[\x{265F}-\x{2660}]/u',
        '/[\x{2663}]/u',
        '/[\x{2665}-\x{2666}]/u',
        '/[\x{2668}]/u',
        '/[\x{267B}]/u',
        '/[\x{267E}-\x{267F}]/u',
        '/[\x{2692}-\x{2697}]/u',
        '/[\x{2699}]/u',
        '/[\x{269B}-\x{269C}]/u',
        '/[\x{26A0}-\x{26A1}]/u',
        '/[\x{26AA}-\x{26AB}]/u',
        '/[\x{26B0}-\x{26B1}]/u',
        '/[\x{26BD}-\x{26BE}]/u',
        '/[\x{26C4}-\x{26C5}]/u',
        '/[\x{26C8}]/u',
        '/[\x{26CE}-\x{26CF}]/u',
        '/[\x{26D1}]/u',
        '/[\x{26D3}-\x{26D4}]/u',
        '/[\x{26E9}-\x{26EA}]/u',
        '/[\x{26F0}-\x{26F5}]/u',
        '/[\x{26F7}-\x{26FA}]/u',
        '/[\x{26FD}]/u',
        '/[\x{2702}]/u',
        '/[\x{2705}]/u',
        '/[\x{2708}-\x{270D}]/u',
        '/[\x{270F}]/u',
        '/[\x{2712}]/u',
        '/[\x{2714}]/u',
        '/[\x{2716}]/u',
        '/[\x{271D}]/u',
        '/[\x{2721}]/u',
        '/[\x{2728}]/u',
        '/[\x{2733}-\x{2734}]/u',
        '/[\x{2744}]/u',
        '/[\x{2747}]/u',
        '/[\x{274C}]/u',
        '/[\x{274E}]/u',
        '/[\x{2753}-\x{2755}]/u',
        '/[\x{2757}]/u',
        '/[\x{2763}-\x{2764}]/u',
        '/[\x{2795}-\x{2797}]/u',
        '/[\x{27A1}]/u',
        '/[\x{27B0}]/u',
        '/[\x{27BF}]/u',
        '/[\x{2934}-\x{2935}]/u',
        '/[\x{2B05}-\x{2B07}]/u',
        '/[\x{2B1B}-\x{2B1C}]/u',
        '/[\x{2B50}]/u',
        '/[\x{2B55}]/u',
        '/[\x{3030}]/u',
        '/[\x{303D}]/u',
        '/[\x{3297}]/u',
        '/[\x{3299}]/u',
        '/[\x{FE0F}]/u',
        '/[\x{1F004}]/u',
        '/[\x{1F0CF}]/u',
        '/[\x{1F170}-\x{1F171}]/u',
        '/[\x{1F17E}-\x{1F17F}]/u',
        '/[\x{1F18E}]/u',
        '/[\x{1F191}-\x{1F19A}]/u',
        '/[\x{1F1E6}-\x{1F1FF}]/u',
        '/[\x{1F201}-\x{1F202}]/u',
        '/[\x{1F21A}]/u',
        '/[\x{1F22F}]/u',
        '/[\x{1F232}-\x{1F23A}]/u',
        '/[\x{1F250}-\x{1F251}]/u',
        '/[\x{1F300}-\x{1F321}]/u',
        '/[\x{1F324}-\x{1F393}]/u',
        '/[\x{1F396}-\x{1F397}]/u',
        '/[\x{1F399}-\x{1F39B}]/u',
        '/[\x{1F39E}-\x{1F3F0}]/u',
        '/[\x{1F3F3}-\x{1F3F5}]/u',
        '/[\x{1F3F7}-\x{1F3FA}]/u',
        '/[\x{1F400}-\x{1F4FD}]/u',
        '/[\x{1F4FF}-\x{1F53D}]/u',
        '/[\x{1F549}-\x{1F54E}]/u',
        '/[\x{1F550}-\x{1F567}]/u',
        '/[\x{1F56F}-\x{1F570}]/u',
        '/[\x{1F573}-\x{1F57A}]/u',
        '/[\x{1F587}]/u',
        '/[\x{1F58A}-\x{1F58D}]/u',
        '/[\x{1F590}]/u',
        '/[\x{1F595}-\x{1F596}]/u',
        '/[\x{1F5A4}-\x{1F5A5}]/u',
        '/[\x{1F5A8}]/u',
        '/[\x{1F5B1}-\x{1F5B2}]/u',
        '/[\x{1F5BC}]/u',
        '/[\x{1F5C2}-\x{1F5C4}]/u',
        '/[\x{1F5D1}-\x{1F5D3}]/u',
        '/[\x{1F5DC}-\x{1F5DE}]/u',
        '/[\x{1F5E1}]/u',
        '/[\x{1F5E3}]/u',
        '/[\x{1F5E8}]/u',
        '/[\x{1F5EF}]/u',
        '/[\x{1F5F3}]/u',
        '/[\x{1F5FA}-\x{1F64F}]/u',
        '/[\x{1F680}-\x{1F6C5}]/u',
        '/[\x{1F6CB}-\x{1F6D2}]/u',
        '/[\x{1F6E0}-\x{1F6E5}]/u',
        '/[\x{1F6E9}]/u',
        '/[\x{1F6EB}-\x{1F6EC}]/u',
        '/[\x{1F6F0}]/u',
        '/[\x{1F6F3}-\x{1F6F9}]/u',
        '/[\x{1F910}-\x{1F93A}]/u',
        '/[\x{1F93C}-\x{1F93E}]/u',
        '/[\x{1F940}-\x{1F945}]/u',
        '/[\x{1F947}-\x{1F970}]/u',
        '/[\x{1F973}-\x{1F976}]/u',
        '/[\x{1F97A}]/u',
        '/[\x{1F97C}-\x{1F9A2}]/u',
        '/[\x{1F9B0}-\x{1F9B9}]/u',
        '/[\x{1F9C0}-\x{1F9C2}]/u',
        '/[\x{1F9D0}-\x{1F9FF}]/u',
        '/[\x{E0062}-\x{E0063}]/u',
        '/[\x{E006C}]/u',
        '/[\x{E006E}]/u',
        '/[\x{E007F}]/u'
    ];

    return preg_replace($regexEmoticons, '', $text);
} 
```

And here the code to generate it :

```
<?php

$emojisAsHex = [];
$emojisasAsDecHex = [];

preg_match_all(
    "/(?:>|\s)+(U\+)(?'emojis'[0-9ABCDEF]{4,5})(?:<|\s)+/",
    file_get_contents('http://unicode.org/emoji/charts/full-emoji-list.html'),
    $emojisAsHex
);

//flip it, to remove duplication
$emojisAsHex = array_flip(array_flip($emojisAsHex['emojis']));

foreach ($emojisAsHex as $emojiAsHex) {
    $emojisasAsDecHex[hexdec($emojiAsHex)] = $emojiAsHex;
}

ksort($emojisasAsDecHex);

$outputHexa = '';
$else = '';

$startI = key($emojisasAsDecHex);
$endI =max(array_keys($emojisasAsDecHex)) + 1;

for ($i = $startI; $i < $endI; $i++) {
    if (isset($emojisasAsDecHex[$i]) && isset($emojisasAsDecHex[(1 + $i)])) {

        $outputHexa .=  "'/[\x{" . $emojisasAsDecHex[$i] . '}';
        while (isset($emojisasAsDecHex[(1 + $i)])) {

            $i++;
        }

        $outputHexa .=  '-\x{' . $emojisasAsDecHex[$i] . "}]/u'," . PHP_EOL;
    } else if (isset($emojisasAsDecHex[$i])) {
        $outputHexa .= "'/[\x{" . $emojisasAsDecHex[$i] . "}]/u'," . PHP_EOL;
    }
}

var_dump($outputHexa); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-05-06T18:30:08.523

You can use this **regex** too:

```
$text = preg_replace('([*#0-9](?>\\xEF\\xB8\\x8F)?\\xE2\\x83\\xA3|\\xC2[\\xA9\\xAE]|\\xE2..(\\xF0\\x9F\\x8F[\\xBB-\\xBF])?(?>\\xEF\\xB8\\x8F)?|\\xE3(?>\\x80[\\xB0\\xBD]|\\x8A[\\x97\\x99])(?>\\xEF\\xB8\\x8F)?|\\xF0\\x9F(?>[\\x80-\\x86].(?>\\xEF\\xB8\\x8F)?|\\x87.\\xF0\\x9F\\x87.|..(\\xF0\\x9F\\x8F[\\xBB-\\xBF])?|(((?<zwj>\\xE2\\x80\\x8D)\\xE2\\x9D\\xA4\\xEF\\xB8\\x8F\k<zwj>\\xF0\\x9F..(\k<zwj>\\xF0\\x9F\\x91.)?|(\\xE2\\x80\\x8D\\xF0\\x9F\\x91.){2,3}))?))',' ',$text); 
```

I searching many times and find it, Hope it will be useful.

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2012-10-09T19:42:42.020

你可以只使用`str_replace()`.

```
$emojiArray = array("&0123","&0234",etc. for all emoji);
$strippedComment = str_replace($emojiArray,"",$originalComment); 
```

# xslt - XSLT 如果 body 有一个类然后做一些事情

> ID：12807178
> 
> 赞同：0
> 
> 时间：2012-10-09T19:35:36.837
> 
> 标签：xslt

我希望我的 xslt 显示一些 html，具体取决于“视频”类是否显示在 body 标签上。这可能吗？由于许多原因，我不能使用 Javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T12:10:52.657

**在 XSLT 中，几乎可以完全避免显式条件指令：**

```
<xsl:template match=
  "/html/body[contains(concat(' ', @class, ' '),' video ')]">
 <!-- Wanted processing here -->
</xsl:template> 
```

当然，为了被选中执行，这个模板需要匹配一个节点集中的节点，该节点在相应的 select 属性中指定`<xsl:apply-templates>`——显式地或作为 XSLT 默认处理的一部分（作为内置的一部分）在 XSLT 模板中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:00:35.343

```
<xsl:if test="contains(/html/body/@class, 'video')">
</xsl:if> 
```

当然，这也将评估为 true for`my-video`和其他类。如果可能发生此类冲突，请考虑使用

```
<xsl:if test="/html/body/@class = 'video' or
              contains(/html/body/@class, ' video ' or
              starts-with(/html/body/@class, 'video ' or
              ends-with(/html/body/@class, ' video')">
</xsl:if> 
```

如果使用 XSLT 2.0，还可以使用该`matches()`函数

# c# - 获取 auth cookie 的 ASP MVC + HttpWebRequest 应用程序，我如何强制它工作？

> ID：12807180
> 
> 赞同：0
> 
> 时间：2012-10-09T19:35:41.000
> 
> 标签：c#, asp.net-mvc, httpwebrequest

**这篇文章末尾的最终更新**

我整天都在工作，但我无法让它工作：

```
private void button1_Click(object sender, EventArgs e)
{
    var loginUri = new Uri(@"http://localhost:5898/Account/Login");
    const string strLoginData = "Login=ojejq&Password=ojejqjejq&returnUrl=%2F";

    var cookie = GetAuthCookie(loginUri, strLoginData);
}

public CookieContainer GetAuthCookie(Uri loginUri, string data)
{
    var cookieJar = new CookieContainer();
    var request = (HttpWebRequest)WebRequest.Create(loginUri);
    request.Method = "POST";
    request.CookieContainer = cookieJar;
    request.ContentLength = data.Length;
    request.ContentType = "application/x-www-form-urlencoded";

    var myWriter = new StreamWriter(request.GetRequestStream());
    myWriter.Write(data);
    myWriter.Close();
    request.GetResponse();

    return cookieJar;
} 
```

在我的`ASP MVC`应用程序中，我有一个`/Account/Login` `POST`控制器，它甚至没有被上面的代码击中。我究竟做错了什么？

编辑：我的 asp mvc 应用程序中的两个登录操作：

```
[AllowAnonymous]
public ActionResult Login()
{...} 
```

和

```
[HttpPost]
[AllowAnonymous]
public ActionResult Login(LoginModel model, string returnUrl)
{...} 
```

第二次更新：增加登录模式

```
public class LoginModel
{
    [Required]
    [Display(Name = "Login", ResourceType = typeof(NameResources))]
    [StringLength(16, ErrorMessageResourceName = "LoginLengthError", ErrorMessageResourceType = typeof(NameResources), MinimumLength = 4)]
    public string Login { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password", ResourceType = typeof(NameResources))]
    [StringLength(32, ErrorMessageResourceName = "PasswordLengthError", ErrorMessageResourceType = typeof(NameResources), MinimumLength = 8)]
    public string Password { get; set; }
} 
```

第三次更新：我忘了提，在我的 web.config 中我设置了 cookieless="AutoDetect" 选项。不知道会不会有变化？

**最后更新：**首先，感谢你们的时间，所有试图帮助我的人都会获得支持。我发现问题不在于代码，而在于我的 Visual Studio 开发服务器。它以某种方式重定向了我的 button1 **POST**请求，在此过程中丢失了数据，并将该请求更改为**GET**请求。我知道，很奇怪，但代码没问题。感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T19:53:58.220

我认为您应该尝试在“登录”中插入“用户名”：

```
const string strLoginData = "UserName=ojejq&Password=ojejqjejq&returnUrl=%2F"; 
```

也试试这个：

```
public CookieCollection GetAuthCookie(Uri loginUri, string data)
{
    var cookieJar = new CookieContainer();
    var request = (HttpWebRequest)WebRequest.Create(loginUri);
    request.Method = "POST";
    request.CookieContainer = cookieJar;
    request.ContentLength = data.Length;
    request.ContentType = "application/x-www-form-urlencoded";

    var myWriter = new StreamWriter(request.GetRequestStream());
    myWriter.Write(data);
    myWriter.Close();

    var webResponse = request.GetResponse() as HttpWebResponse;
    return webResponse.Cookies;
} 
```

# android - 更新多个 AppWidget 的歧义

> ID：12807186
> 
> 赞同：0
> 
> 时间：2012-10-09T19:35:59.307
> 
> 标签：android, android-appwidget

我有多个小部件。在每次更新时，我都会在服务中启动一个服务代码：

```
for (int widgetId : allWidgetIds) {

// Register an onClickListener for DisplayActivity
            Intent clickIntentUpdate1 = new Intent(
                    this.getApplicationContext(), DisplayActivity.class);
            clickIntentUpdate1.putExtra("widgetid", widgetId);
            clickIntentUpdate1.putExtra(DisplayActivity.WHAT, what);
            clickIntentUpdate1.putExtra(DisplayActivity.WHAT_COLOR, prefs
                    .getString(QuoteConfigure.PREF_PREFIX_KEY_QUOTE_COLOR
                            + widgetId, "Transparent"));
            clickIntentUpdate1.putExtra(DisplayActivity.WHO, who);
            clickIntentUpdate1.putExtra(DisplayActivity.WHO_COLOR, prefs
                    .getString(
                            QuoteConfigure.PREF_PREFIX_KEY_QUOTE_BY_COLOR
                                    + widgetId, "Transparent"));
            clickIntentUpdate1.putExtra(
                    DisplayActivity.BG_COLOR,
                    prefs.getString(QuoteConfigure.PREF_PREFIX_KEY_QUOTE_BG
                            + widgetId, "Transparent"));
            PendingIntent pendingIntentUpdate1 = PendingIntent.getActivity(
                    getApplicationContext(), 0, clickIntentUpdate1,
                    PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViews.setOnClickPendingIntent(R.id.what,
                    pendingIntentUpdate1);
            Log.d("quoteSERVICE", what + " -> " + who);
            Log.d("quoteSERVICE", "what inside intent:"+clickIntentUpdate1.getExtras().getString(DisplayActivity.WHAT));
            Log.d("quoteSERVICE", "widgetid:"+widgetId);
            Log.d("quoteSERVICE", "--------------------");

            // Register an onClickListener for Who search
            Intent clickIntentSearch = new Intent(Intent.ACTION_VIEW);
            clickIntentSearch.setData(Uri
                    .parse("http://www.google.com/search?q=" + who));
            PendingIntent pendingIntentSearch = PendingIntent.getActivity(
                    getApplicationContext(), 0, clickIntentSearch, 0);
            remoteViews.setOnClickPendingIntent(R.id.who,
                    pendingIntentSearch);

            appWidgetManager.updateAppWidget(widgetId, remoteViews);
}
stopSelf(); 
```

现在的问题是：

我有两个小部件，当它们更新 R.id.who 上的意图时，它应该与所需的数据一起被触发。然而，R.id.what 的事件并没有按预期触发。在此事件上发送的数据是发送*内容*和发送*者*的最后一个值（即最后一个要更新的小部件中的值。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T16:32:11.743

关于需要区分 PendingIntents，Tim 的回答是正确的。唯一性要求是设计使然，它是功能而不是错误。当它们不是唯一的时，Android 会重用它们。

当 PendingIntent 的至少**一个**参数与其他 PendingIntent 不同时，PendingIntent 是唯一的。在您的代码中

```
PendingIntent pendingIntentUpdate1 = PendingIntent.getActivity(
                    getApplicationContext(), 0, clickIntentUpdate1,
                    PendingIntent.FLAG_UPDATE_CURRENT); 
```

您的 PendingIntents 是相同的，因为它们是使用相同的参数启动的，是的，似乎 extras 中的不同内容不算在内。Tim 的解决方案之所以有效，是因为它为每个小部件实例发送不同的操作：“foobar1”、“foobar2”等。这使得每个意图都不同。

我在尝试区分日历小部件中每个日期的 PendingIntents 时发现了这一点。由于它每周有 6 周和 7 天，并且可能有多个小部件实例，因此我需要区分小部件 #1 上的日期 i,j 与小部件 #2 上的日期 i,j 中的每个可能的点击42种组合。

我通过`requestCode`为每个资源标识符（日期）分配不同的（第二个参数）来解决这个问题：

```
Intent dateTapIntent = new Intent(Consts.WIDGET_CLICK_DATE)
                   .putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, awId)
                   .putExtra(Consts.SELECTED_DATE_EXTRA, getSelectedDate(awId, i-1, j-1));
int request = awId * 100 + i * 10 + j;
rv.setOnClickPendingIntent(identifier,
        PendingIntent.getBroadcast(mContext, request,
                                   dateTapIntent, PendingIntent.FLAG_UPDATE_CURRENT)); 
```

该公式`awId * 100 + i * 10 + j`为所有小部件实例中的每个日期带来唯一性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:32:56.433

我可能是错的，但 IIRC Android 有一个错误/怪癖/功能，它不允许您拥有多个相同的未完成 PendingIntents。

这意味着，如果您创建两个仅在附加方面有所不同的待处理意图，则第一个将被遗忘，并且当意图触发时，它将发送设置的最后一个意图。

我认为您可以通过设置一个虚假的“动作”来区分它们，虽然未使用，但会导致 android 不认为这两个意图是相同的，并且您的代码将按照您的预期工作。

您可以尝试在下面插入此语句，看看是否能解决您的问题？

```
Intent clickIntentUpdate1 = new Intent(
                this.getApplicationContext(), DisplayActivity.class);

clickIndentUpdate1.setAction("foobar" + String.valueOf(widgetId)); //NEW LINE 
```

动作字符串本身并不重要，你只需要每个appwidget的intent都有一个**唯一的**字符串，这样intent就不会被合并。

# java - 使用 Apache commons 的 SFTP

> ID：12807188
> 
> 赞同：-1
> 
> 时间：2012-10-09T19:35:59.247
> 
> 标签：java, sftp, apache-commons

我正在寻找使用 Java 进行 SFTP 的代码。我找到[了一个使用 Apache VFS 的教程](http://blog.iparissa.com/javasnippets/using-commons-vfs-to-do-sftp/)，但它对我帮助不大。

如果有人有任何想法或代码。请提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:38:20.790

使用[jftp](http://j-ftp.sourceforge.net/)。

它包含更多协议并且易于理解。

# excel - Excel VBA - 链接来自不同工作表的行

> ID：12807198
> 
> 赞同：2
> 
> 时间：2012-10-09T19:37:06.593
> 
> 标签：excel, vba, copy, selection

场景：由于敏感材料，我无法发布实际的工作簿，但我会尽可能地解释它。

每个Sheet都分为分支，即：Sheet2是Branch 2，Sheet3是Branch 3，依此类推。对于每张纸，列是相同的。A 列中包含分支编号。B 列有不相关的信息，所以我只是隐藏该列。C 列有一个系统编号（特定于每个帐户。

意图：我想创建另一个名为`CallOuts`. 我想复制一些行（来自各个分支）并将它们粘贴到“主工作表”（`CallOuts`）我可以在工作`CallOuts`表上工作，而不是去每个分支。因此，每当我编辑一个单元格时，它也会更新/更改分支表中完全相同的单元格，反之亦然。

问题：我知道 MS Exccel 有一个“选择性粘贴”功能，它可以在其中添加单元格。问题在于它链接了单元格#，因此如果我对主表进行排序，它将将该行替换为错误的分支表。

例如：如果 System# J112 在分支 2 表的第 2 行中，并且我将链接粘贴在主表的第 4 行中，如果我在主表上进行更新然后重新排序，系统 # 现在移动到行2（在主表上）第 4 行（在主表上）中的任何内容现在都将在第 2 行，第 2 行表中。

我在想也许是一个宏，我可以在其中复制和粘贴主表中的整行。进行某种类型的案例选择以检查 A 列中的哪个分支，然后在分支表上找到相同的系统 #，然后粘贴整行。

我的 VBA 水平充其量只是新手，因此将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:42:45.837

好的，所以我在下面看到了您的尝试。我不确定您的代码是如何工作的，但似乎您走在了正确的轨道上。但是，我认为 Case 语法不适合这种情况。您只需要一个宏来读取“CallOuts”表中的内容并使用该数据更新您的各个分支表。这个宏应该适合你：

```
Sub UpdateRecordsFromMasterSheet()

Dim wksht As Worksheet
Dim wkb As Workbook
Dim row As Range
Dim Row_to_Update As Range

Dim sysnum As Variant

Set wbk = ThisWorkbook

Application.ScreenUpdating = False

For Each row In Sheets("CallOuts").UsedRange.Rows
    row.EntireRow.Copy
    sysnum = row.Cells(1, 3).Value
    For Each wksht In ActiveWorkbook.Worksheets
        For Each Row_to_Update In wksht.UsedRange.Rows
            If Row_to_Update.Cells(1, 3).Value = sysnum Then
                Row_to_Update.PasteSpecial
            End If
        Next Row_to_Update
    Next wksht
Next row

Application.ScreenUpdating = True

End Sub 
```

这假设您在“C”列中有您的系统编号。所以这就是我的想象：每次您为员工分配一堆行时 - 您的员工会更新这些行 - 然后您将这些数据粘贴回“CallOuts”表中。然后运行此宏，它将根据“CallOuts”表中的内容更新各个分支表。

如果你是一个有视觉的人，它会是这样的：

这是更新的标注表： ![标注表](../Images/b063ae916b2fcfc226ec3422b975a502.png)

以下是分支在宏之前的外观： ![之前的宏](../Images/54a03307807a61610d88a021709ffcb7.png)

这是宏运行后更新的分支： ![后宏](../Images/e5c4acb493a88e073768db3b473201f5.png)

试试看，让我知道它是如何工作的。注意：这只是向您展示如何执行此类操作的开始 - 您可以通过使宏循环通过员工提交给您的实际工作簿来提高此过程的效率，这样您就不必复制和粘贴每次都将数据放入您的“CallOuts”表中。祝你好运。

# java - InputStream、HashMap和ArrayList的内部实现？

> ID：12807205
> 
> 赞同：0
> 
> 时间：2012-10-09T19:37:26.730
> 
> 标签：java

**InputStream**，**HashMap**和**ArrayList**是如何在java内部实现的？实际上，这个问题是在面试时向我的一位朋友提出的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:40:27.217

`HashMap`并且`ArrayList`是具体的实现，你可以很容易地找到它们的源代码。但这个问题的原因是不同的。你的朋友应该知道实现背后的原理，什么数据结构和算法。它们如何影响大 O 符号？

关于的问题`InputStream`没有多大意义，它是一个抽象类。它有几个基于不同后端的实现。

# iphone - 在 viewDidLoad 中获取 IB 中的视图框架？

> ID：12807207
> 
> 赞同：1
> 
> 时间：2012-10-09T19:37:28.350
> 
> 标签：iphone, xcode, ios6

当我在 Interface Builder 中创建标签并将插座连接到 viewController 时，并将标签记录在 viewDidLoad 中，如下所示：

> NSLog(@"label: %@",self.label);

它给了我一个（0,0,0,0）的框架。self.view 给了我一个大于 0 的大小。一个旧程序的标签也给了我一个大于 0 的大小。它会将文本记录在标签中，所以它是正确的。这是 Xcode 4.5 的变化吗？如何访问我在 Interface Builder 中设置的框架？

这是日志：

UILabel: 0x754e1b0; 帧 = (0 0; 0 0); text = '这是一个标签'; clipsToBounds = YES; 不透明=否；自动调整大小 = TM+BM；用户交互启用 = 否；层=...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:41:13.930

试试这个：

```
NSLog(@"Label Frame: %@",NSStringFromCGRect(self.label.frame)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:24:27.900

通常框架布局在`viewDidLoad`. 在笔尖的情况下，这应该不是问题。您是否有机会使用 AutoLayout？

也请在 中记录相同的值`viewWillAppear`，这肯定会有正确的值。我通常`viewWillLoad`用来启动我的 UI 元素，并`viewWillLoad`正确放置它们。

# java - 带有分叉测试的maven surefire报告插件

> ID：12807209
> 
> 赞同：2
> 
> 时间：2012-10-09T19:37:37.623
> 
> 标签：java, maven, selenium, surefire

我有两个 TEST-*.xml 文件是由并行运行的分叉测试生成的——这是两个 junit 测试类。出于某种奇怪的原因，surefire 将这两个文件合并为一份报告。此报告还缺少一些信息，例如包名称和类信息。

以下是 TEST-*.xml 的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<testsuite failures="0" time="0.002" errors="0" skipped="0" tests="12" name="com.fidelity.mobile.core.RunCukesTest2">
<properties>
    <property name="java.runtime.name" value="Java(TM) SE Runtime Environment" />
    <property name="sun.boot.library.path" value="C:\Program Files\Java\jdk1.7.0_03\jre\bin" />
    <property name="java.vm.version" value="22.1-b02" />
    <property name="java.vm.vendor" value="Oracle Corporation" />
    <property name="java.vendor.url" value="http://java.oracle.com/" />
    <property name="path.separator" value=";" />
    <property name="guice.disable.misplaced.annotation.check" value="true" />
    <property name="java.vm.name" value="Java HotSpot(TM) 64-Bit Server VM" />
    <property name="file.encoding.pkg" value="sun.io" />
    <property name="user.script" value="" />
    <property name="user.country" value="US" />
    <property name="sun.java.launcher" value="SUN_STANDARD" />
    <property name="sun.os.patch.level" value="Service Pack 1" />
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification" />
    <property name="user.dir" value="C:\Workspaces\Fidelity\mobileTests" />
    <property name="java.runtime.version" value="1.7.0_03-b05" />
    <property name="java.awt.graphicsenv" value="sun.awt.Win32GraphicsEnvironment" />
    <property name="java.endorsed.dirs" value="C:\Program Files\Java\jdk1.7.0_03\jre\lib\endorsed" />
    <property name="os.arch" value="amd64" />
    <property name="java.io.tmpdir" value="C:\Users\pguindon\AppData\Local\Temp\" />
    <property name="line.separator" value=" " />
    <property name="java.vm.specification.vendor" value="Oracle Corporation" />
    <property name="user.variant" value="" />
    <property name="os.name" value="Windows 7" />
    <property name="classworlds.conf" value="C:\Workspaces\Fidelity\.metadata\.plugins\org.eclipse.m2e.core\launches\m2conf8811353436624661573.tmp" />
    <property name="sun.jnu.encoding" value="Cp1252" />
    <property name="java.library.path" value="C:\Program Files\Java\jdk1.7.0_03\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\;C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\80\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\;C:\Program Files (x86)\Microsoft SQL Server\90\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies\;c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Microsoft Team Foundation Server 2010 Power Tools\;C:\Program Files (x86)\Microsoft Team Foundation Server 2010 Power Tools\Best Practices Analyzer\;c:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\;c:\Program Files\Microsoft SQL Server\110\Tools\Binn\;c:\Program Files\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files (x86)\QuickTime\QTSystem\;c:\Python32;c:\Python32\Scripts;c:\selenium-2.24.0\;C:\Program Files\Java\jdk1.7.0_03;C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\;C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE;C:\Users\pguindon\android-sdks;C:\Users\pguindon\android-sdks\platform-tools;C:\Users\pguindon\android-sdks\tools;C:\Program Files (x86)\Sikuli X\libs;C:\Program Files (x86)\Java\jre6\\bin;." />
    <property name="java.specification.name" value="Java Platform API Specification" />
    <property name="java.class.version" value="51.0" />
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers" />
    <property name="os.version" value="6.1" />
    <property name="user.home" value="C:\Users\pguindon" />
    <property name="user.timezone" value="America/New_York" />
    <property name="java.awt.printerjob" value="sun.awt.windows.WPrinterJob" />
    <property name="java.specification.version" value="1.7" />
    <property name="file.encoding" value="Cp1252" />
    <property name="user.name" value="pguindon" />
    <property name="java.class.path" value="/C:/Eclipse_Juno/plugins/org.eclipse.m2e.maven.runtime_1.1.0.20120529-1956/jars/plexus-classworlds-2.4.jar" />
    <property name="java.vm.specification.version" value="1.7" />
    <property name="sun.arch.data.model" value="64" />
    <property name="java.home" value="C:\Program Files\Java\jdk1.7.0_03\jre" />
    <property name="sun.java.command" value="org.codehaus.plexus.classworlds.launcher.Launcher -B clean test -Pparallel site" />
    <property name="java.specification.vendor" value="Oracle Corporation" />
    <property name="user.language" value="en" />
    <property name="awt.toolkit" value="sun.awt.windows.WToolkit" />
    <property name="java.vm.info" value="mixed mode" />
    <property name="java.version" value="1.7.0_03" />
    <property name="java.ext.dirs" value="C:\Program Files\Java\jdk1.7.0_03\jre\lib\ext;C:\Windows\Sun\Java\lib\ext" />
    <property name="sun.boot.class.path" value="C:\Program Files\Java\jdk1.7.0_03\jre\lib\resources.jar;C:\Program Files\Java\jdk1.7.0_03\jre\lib\rt.jar;C:\Program Files\Java\jdk1.7.0_03\jre\lib\sunrsasign.jar;C:\Program Files\Java\jdk1.7.0_03\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.7.0_03\jre\lib\jce.jar;C:\Program Files\Java\jdk1.7.0_03\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.7.0_03\jre\classes" />
    <property name="java.vendor" value="Oracle Corporation" />
    <property name="maven.home" value="C:\Workspaces\Fidelity\mobileTests\EMBEDDED" />
    <property name="file.separator" value="\" />
    <property name="java.vendor.url.bug" value="http://bugreport.sun.com/bugreport/" />
    <property name="sun.cpu.endian" value="little" />
    <property name="sun.io.unicode.encoding" value="UnicodeLittle" />
    <property name="sun.desktop" value="windows" />
    <property name="sun.cpu.isalist" value="amd64" />
</properties>
<testcase time="0.002" classname="Given I am on Google     " name="Given I am on Google     " />
<testcase time="0" classname="When I search for &quot;Orange&quot;      " name="When I search for &quot;Orange&quot;      " />
<testcase time="0" classname="Then I should see &quot;Wikipedia, the free encyclopedia&quot; in the search results       " name="Then I should see &quot;Wikipedia, the free encyclopedia&quot; in the search results       " />
<testcase time="0" classname="| &quot;Orange&quot; | &quot;Wikipedia, the free encyclopedia&quot; |    " name="| &quot;Orange&quot; | &quot;Wikipedia, the free encyclopedia&quot; |    " />
<testcase time="0" classname="Given I am on Google         " name="Given I am on Google         " />
<testcase time="0" classname="When I search for &quot;Banana&quot;          " name="When I search for &quot;Banana&quot;          " />
<testcase time="0" classname="Then I should see &quot;Wikipedia, the free encyclopedia&quot; in the search results           " name="Then I should see &quot;Wikipedia, the free encyclopedia&quot; in the search results           " />
<testcase time="0" classname="| &quot;Banana&quot; | &quot;Wikipedia, the free encyclopedia&quot; |        " name="| &quot;Banana&quot; | &quot;Wikipedia, the free encyclopedia&quot; |        " />
<testcase time="0" classname="Given I am on Google Maps               " name="Given I am on Google Maps               " />
<testcase time="0" classname="When I search for &quot;North Pole&quot;                " name="When I search for &quot;North Pole&quot;                " />
<testcase time="0" classname="Then I should see &quot;North Pole&quot; in the search results                 " name="Then I should see &quot;North Pole&quot; in the search results                 " />
<testcase time="0" classname="| &quot;North Pole&quot; | &quot;North Pole&quot; |              " name="| &quot;North Pole&quot; | &quot;North Pole&quot; |              " /> 
```

这是我的pom配置：

```
 <plugins>
        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <configuration>
                <includes>
                    <include>**/Run*.java</include>
                </includes>
                <threadCount>${junit.threadCount}</threadCount>
                <forkMode>perthread</forkMode>
            </configuration>
        </plugin>
    </plugins>
</build>
<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-report-plugin</artifactId>
            <version>2.12.4</version>
        </plugin>
    </plugins>
</reporting> 
```

# r - 在R中拆分一个数字

> ID：12807217
> 
> 赞同：6
> 
> 时间：2012-10-09T19:38:04.883
> 
> 标签：r

在`R`我有一个号码，比如说`1293828893`，叫`x`。

我想拆分这个数字，去掉中间的4位数字`3828`并返回，伪代码如下：

```
splitnum <- function(number){
     #check number is 10 digits
     if(nchar(number) != 10){
          stop("number not of right size");
     }
     middlebits <- middle 4 digits of number
     return(middlebits);
} 
```

这是一个非常简单的问题，但我发现的唯一解决方案适用于字符串，而不是数字。

如果有兴趣，我正在尝试创建[Middle-square 方法](http://en.wikipedia.org/wiki/Middle_square_method)`R`的实现，但这一步特别棘手。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T19:45:36.543

您可以使用`substr()`. 请参阅其帮助页面`?substr`。在您的功能中，我会这样做：

```
splitnum <- function(number){
    #check number is 10 digits
    stopifnot(nchar(number) == 10)
    as.numeric(substr(number, start = 4, stop = 7))
} 
```

这使：

```
> splitnum(1293828893)
[1] 3828 
```

删除`as.numeric(....)`您希望将数字作为字符串的最后一行的换行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T19:43:02.050

只需使用整数除法：

```
> x <- 1293828893
> (x %/% 1e3) %% 1e4
[1] 3828 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-09T19:45:31.667

这是一个完全避免将数字转换为字符的函数

```
splitnum <- function(number){
     #check number is 10 digits
     if(trunc(log10(X))!=9) {
          stop("number not of right size")
     }
     (number %/% 1e3) %% 1e4
}

splitnum(1293828893)
# [1] 3828 
```

# php - 使用 TCPDF 的多行文本？

> ID：12807218
> 
> 赞同：2
> 
> 时间：2012-10-09T19:38:05.273
> 
> 标签：php, pdf, tcpdf

我正在尝试生成包含多行文本区域、非 HTML 的 PDF。使用 Text() 方法将所有内容放在一行上，使用 MultiCell() 有效，但无论我将边框设置为什么，它都会在每个“单元格”周围添加粗黑线。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T11:15:02.247

根据[此处的文档，](http://www.tcpdf.org/doc/classTCPDF.html#aa81d4b585de305c054760ec983ed3ece)您必须设置`$border = 0`. 因此，恕我直言，如果您编写如下内容，您将实现您想要的：

```
$pdf->AddPage();
$txt = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.. aliqua.';
$pdf->MultiCell(55, 5, $txt, 0, '', 0, 1, '', '', true);
$pdf->lastPage();
$pdf->Output('example.pdf', 'I'); 
```

如果这没有帮助，请发布您的代码，以便我们可以进一步帮助您..

# android - android中的音乐开/关选项

> ID：12807219
> 
> 赞同：0
> 
> 时间：2012-10-09T19:38:06.267
> 
> 标签：android, menu

嗨，我是 Android 新手，需要您为我正在开发的游戏提供帮助等有人可以帮助我如何实现这一目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:42:13.043

在我看来，这`PreferenceActivity`就是你正在寻找的东西。

它使您可以使用简单的 xml 文件非常轻松地定义设置项。它还可以`SharedPreferences`自动为您保存它们，这使它变得更好。

[你可以在这里](http://developer.android.com/reference/android/preference/PreferenceActivity.html)阅读更多关于它的信息。有一个示例显示您必须`PreferenceActivity`在 XML 中实现和定义设置布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:53:59.837

当您开发移动应用程序时，您很可能会发现自己想要创建一个设置页面。用户使用设置页面设​​置配置参数，这些参数即使在程序关闭后也会保存。要实现这一点，您必须使用**Preference** Framework，请参阅[本](http://www.aviyehuda.com/2011/05/08/android-development-preferences/)教程以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:48:20.593

[设置](http://www.kaloer.com/android-preferences)试试这个链接，我认为它会对你有所帮助，并在 android 开发中搜索偏好活动

# python - 为什么在 Django 中使用 admin 时不会自动调用 admin.autodiscover()，为什么它被设计为显式调用？

> ID：12807220
> 
> 赞同：13
> 
> 时间：2012-10-09T19:38:10.213
> 
> 标签：python, django

无需`admin.autodiscover()`输入 urls.py 即可显示管理页面`You don't have permission to edit anything`（[请参阅 SO 线程](https://stackoverflow.com/questions/3718077/django-you-dont-have-permission-to-edit-anything)）。

为什么会这样？如果您总是需要`admin.autodiscover()`使用管理员添加编辑信息，即使您有超级用户名和密码以确保安全，为什么 Django 开发人员不`admin.autodiscover()`自动触发？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-09T20:10:43.997

在 Django 1.7 之前，建议将`admin.autodiscover()`调用放在 urls.py 中。这允许它在必要时被禁用。要求`admin.autodiscover()`而不是自动调用它是 Python 哲学[“显式优于隐式”](http://www.python.org/dev/peps/pep-0020/)的一个例子。请记住，该`django.contrib.admin`应用程序是可选的，它并非安装在每个站点上，因此始终运行自动发现是没有意义的。

大多数情况下，自动发现工作得很好。但是，如果您需要更多控制权，您可以手动导入特定应用的管理文件。例如，您可能希望注册[多个管理站点](https://docs.djangoproject.com/en/1.0/ref/contrib/admin/#multiple-admin-sites-in-the-same-urlconf)，每个站点具有不同的应用程序。

应用程序加载在 Django 1.7 中进行了[重构。](https://docs.djangoproject.com/en/1.8/releases/1.7/#app-loading-refactor)已`autodiscover()`移至管理应用程序的默认应用程序配置。这意味着自动发现现在在加载管理应用程序时运行，无需添加`admin.autodiscover()`到您的 urls.py。如果您不想要自动发现，现在可以使用 禁用它[`SimpleAdminConfig`](https://docs.djangoproject.com/en/1.8/ref/contrib/admin/#django.contrib.admin.apps.SimpleAdminConfig)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-09T21:09:15.247

（编辑：在 Django 1.7+ 之后已过时，不需要更多，请参阅 Alasdair 的回答）

我认为这是为了给你更好的控制。考虑以下代码`contrib.admin.autodiscover`：

```
def autodiscover():
    """
    Auto-discover INSTALLED_APPS admin.py modules and fail silently when
    not present. This forces an import on them to register any admin bits they
    may want.
    """

    import copy
    from django.conf import settings
    from django.utils.importlib import import_module
    from django.utils.module_loading import module_has_submodule

    for app in settings.INSTALLED_APPS:
        mod = import_module(app)
        # Attempt to import the app's admin module.
        try:
            before_import_registry = copy.copy(site._registry)
            import_module('%s.admin' % app)
        except:
            # Reset the model registry to the state before the last import as
            # this import will have to reoccur on the next request and this
            # could raise NotRegistered and AlreadyRegistered exceptions
            # (see #8245).
            site._registry = before_import_registry

            # Decide whether to bubble up this error. If the app just
            # doesn't have an admin module, we can ignore the error
            # attempting to import it, otherwise we want it to bubble up.
            if module_has_submodule(mod, 'admin'):
                raise 
```

所以它会自动加载 INSTALLED_APPS admin.py 模块并在找不到时静默失败。现在，有些情况下您实际上不希望这样，例如使用自己的`AdminSite`：

```
# urls.py
from django.conf.urls import patterns, url, include
from myproject.admin import admin_site

urlpatterns = patterns('',
    (r'^myadmin/', include(admin_site.urls)),
) 
```

在这种情况下，您不需要调用`autodiscovery()`.

还有其他时候，您只想通过管理员查看或编辑项目的一部分应用程序，而调用`autodiscovery()`不会让您这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T00:48:45.537

Django 不需要你使用 django。**每个站点上的contrib** .admin - 它不是核心模块。

# c - 如何为 Coldfire 工具链编译程序？

> ID：12807226
> 
> 赞同：1
> 
> 时间：2012-10-09T19:38:20.150
> 
> 标签：c, linux, cross-compiling, toolchain, coldfire

我正在尝试编译一个简单的 hello world 应用程序以在 uCLinux (2.4) 上运行，该应用程序在带有飞思卡尔 Coldfire (MCF5280C) 处理器的板上运行……我不太确定在这里做什么。

我知道我需要使用来自飞思卡尔的正确版本/工具进行编译以针对此硬件，因此我下载并安装了 Coldfire 工具链并验证我拥有的工具链适用于我的目标：

```
mike@linux-4puc:/usr/local/m68k-elf/bin> ./gcc -v
Reading specs from /usr/local/lib/gcc-lib/m68k-elf/2.95.3/specs
gcc version 2.95.3 20010315 (release)(ColdFire patches - 20010318 from http://fiddes.net/coldfire/)(uClinux XIP and shared lib patches from http://www.snapgear.com/) 
```

我尝试了一个简单的`gcc "file"`类型命令：

```
mike@linux-4puc:/home/mike> /usr/local/m68k-elf/bin/gcc test.c
/usr/local/m68k-elf/bin/ld.real: cannot open crt0.o: No such file or directory
collect2: ld returned 1 exit status 
```

这根本不起作用..所以它显然比这更复杂。输出几乎看起来像是要我在使用它之前构建工具链？以前有人做过吗？不知道我需要做什么，或者我是否只需要一些标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:43:36.053

您也可以尝试查看是否有调用命令`m68k-elf-gcc`或类似的东西。这是交叉编译器的常用命名。

至于您的问题，听起来您的编译器设置有问题。crt0.o 是包含 C 运行时设置代码的目标文件。如果设置正确，链接器（实际上是什么给出了错误）应该知道这个文件在哪里。

安装后，您应该`make install`作为最后一步运行，而自该步骤以来没有修改任何内容`make`。配置步骤将根据应该安装的路径设置某些变量等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:55:27.497

您从哪里获得飞思卡尔工具链？我查看了他们的网站，似乎只有第三方提供了 C++ 交叉编译器。在我从 NetBurner 获得的工具链中（用于他们的硬件），crt0.o 文件存在于 gcc-m68k\m68k-elf\lib 目录下。

# ruby-on-rails - 正确急切加载空数组被忽略

> ID：12807228
> 
> 赞同：1
> 
> 时间：2012-10-09T19:38:37.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, eager-loading

`images`我的模型上有一个多对一的关系`vehicle`。我已经设置了一个类似于`Vehicle.includes(:images).find(ids)`几个的查询，正确地加载了一个空数组，因为这些`vehicles`没有图像。但是，它会返回到 Mongo 服务器，试图找出是否有任何图像。身份映射已启用，所有爵士乐。急切加载似乎适用于非空数组。

我将如何向 Mongoid 发出空数组正确且不尝试再次加载它们的信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T23:59:31.027

从来没有找到解决这个问题的好方法。似乎身份映射不会存储空数组，当我手动将一个空数组填充到 IdentityMap 中时，它按预期工作。

这是我们的工作，以防其他人有这个问题：

我们确保模型中有一个索引，然后`vehicle_id`在`image`单独的查询中加载所有图像并将它们粘贴到相关的车辆对象中。我们从不通过这种方法一次加载超过 25 辆汽车，因此我们从 26 个查询变为 2 个。

如果在内存中加载相当数量的元素，则可能无法执行。

# visual-studio - 在没有焦点的情况下在 VS 中逐步执行

> ID：12807231
> 
> 赞同：2
> 
> 时间：2012-10-09T19:38:49.493
> 
> 标签：visual-studio

我发现自己正在使用 GUI 代码，其中 GUI 程序需要输入焦点并保持在最上面的窗口，但是每当我使用 VS 调试时，使用 F5/F10/F11 单步执行都需要 VS 具有焦点。

是否有可能在被调试者有焦点时让 VS 拦截 F 键？如果 VS 没有这个功能，我想应该可以编写一个简单的程序或 VS 插件，它有一个键盘书并相应地命令调试器 - 有没有人开发过这样的程序？

我正在使用一个 GUI 测试自动化框架，它通过移动光标来发送鼠标点击和其他事件。当被调试程序失去焦点时，对其表面的任何单击都会将主窗口向前移动，但不会激活任何控件，但自动化框架会假定其应用程序的焦点永远不会被中断。因此，如果我在单击以打开“文件”菜单之前设置断点，则发送的单击只会恢复被调试者的焦点，而不会打开“文件”菜单（如果有意义的话）。

我已经进行了一些搜索，但无法立即找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:47:40.143

为什么需要保持专注？你在 GotFocus/LostFocus 中有特定的钩子吗？

我之前遇到过问题，一旦按下 F5 就会调用 Paint 事件，导致调试器再次显示，因此需要再次重新绘制。我只是通过安排我的窗户来解决这些问题，这样它们就不会重叠。我很确定当窗户以这种方式排列时，LostFocus/GotFocus 对也不会触发。

# postgresql - PL/pgSQL 在 EXECUTE 中创建或替换

> ID：12807235
> 
> 赞同：2
> 
> 时间：2012-10-09T19:39:08.037
> 
> 标签：postgresql, plpgsql, dynamic-sql, materialized-views

我有以下脚本可以动态地在 PostgreSQL 数据库中创建视图。

```
CREATE OR REPLACE FUNCTION cs_refresh_mviews() RETURNS integer AS $$
DECLARE
    mviews RECORD;
    query text;
    park_name text;
    ppstatements int;
BEGIN
    RAISE NOTICE 'Creating views...';

    FOR mviews IN SELECT name FROM "Canadian_Parks" LOOP
        park_name := mviews.name;
        RAISE NOTICE 'Creating or replace view %s...', mviews.name; 
        query := 'CREATE OR REPLACE VIEW %_view AS
          SELECT * from "Canadian_Parks" where name=''%'';
          ALTER TABLE %_view OWNER TO postgres', park_name, park_name, park_name;
      --  RAISE NOTICE query;
        EXECUTE query;
    END LOOP;

    RAISE NOTICE 'Done refreshing materialized views.';
    RETURN 1;
END;
$$ LANGUAGE plpgsql; 
```

我已确认字符串的完整性，例如

```
CREATE OR REPLACE VIEW Saguenay_St__Lawrence_view AS
SELECT * from "Canadian_Parks" where name='Saguenay_St__Lawrence';
ALTER TABLE Saguenay_St__Lawrence_view OWNER TO postgres 
```

通过手动将其提交到数据库并获得成功的响应来分配给查询变量。

但是，如果我尝试使用

```
SELECT cs_refresh_mviews(); 
```

显示以下错误：

```
ERROR:  query "SELECT 'CREATE OR REPLACE VIEW %_view AS SELECT * from "Canadian_Parks" where name=''%''; ALTER TABLE %_view OWNER TO postgres', park_name, park_name, park_name" returned 4 columns
CONTEXT:  PL/pgSQL function "cs_refresh_mviews" line 32 at assignment

********** Error **********

ERROR: query "SELECT 'CREATE OR REPLACE VIEW %_view AS SELECT * from "Canadian_Parks" where name=''%''; ALTER TABLE %_view OWNER TO postgres', park_name, park_name, park_name" returned 4 columns
SQL state: 42601
Context: PL/pgSQL function "cs_refresh_mviews" line 32 at assignment 
```

为什么这被转换为 SELECT 语句，而不是纯粹的 CREATE？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T01:16:34.287

你的设置很扭曲。为什么要将视图名称的一部分保存在表的*复合类型*中，而不是将其保存在纯文本列中？

无论如何，它可以像这样工作：

## 设置匹配问题：

```
CREATE SCHEMA x;  -- demo in test schema
SET search_path = x;
CREATE TYPE mviews AS (id int, name text); -- composite type used in table

CREATE TABLE "Canadian_Parks" (name mviews);
INSERT INTO "Canadian_Parks"(name) VALUES
 ('(1,"canadian")')
,('(2,"islandic")');  -- composite types, seriously?

SELECT name, (name).* from "Canadian_Parks";

CREATE OR REPLACE FUNCTION cs_refresh_mviews()
  RETURNS int LANGUAGE plpgsql SET search_path = x AS  -- search_path for test
$func$
DECLARE
    _parkname text;
BEGIN

FOR _parkname IN SELECT (name).name FROM "Canadian_Parks" LOOP
   EXECUTE format('
      CREATE OR REPLACE VIEW %1$I AS
      SELECT * FROM "Canadian_Parks" WHERE (name).name = %2$L;
      ALTER TABLE %1$I OWNER TO postgres'
      , _parkname || '_view', _parkname);
END LOOP;

RETURN 1;

END
$func$;

SELECT cs_refresh_mviews();

DROP SCHEMA x CASCADE; -- clean up 
```

### 要点

*   当您使用 execute 执行文本时，您**需要**防范*SQL 注入*。我将[`format()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)函数用于*标识符*和*文字*

*   我使用语法`SELECT (name).name`来应对您奇怪的设置并`name`立即提取我们需要的内容。

*   同样，需要读取 VIEW 才能`WHERE (name).name = ..`在此设置中工作。

*   我删除了很多与问题无关的噪音。

*   拥有该功能也可能毫无意义`RETURN 1`。只需用 定义函数`RETURNS void`。不过，我保留了它以匹配问题。

## 解开的设置

它应该是怎样的：

```
CREATE SCHEMA x;
SET search_path = x;

CREATE TABLE canadian_parks (id serial primary key, name text);
INSERT INTO canadian_parks(name) VALUES ('canadian'), ('islandic');

SELECT * from canadian_parks;

CREATE OR REPLACE FUNCTION cs_refresh_mviews()
  RETURNS void LANGUAGE plpgsql SET search_path = x AS
$func$
DECLARE
    parkname text;
BEGIN

FOR parkname IN SELECT name FROM canadian_parks LOOP
   EXECUTE format('
      CREATE OR REPLACE VIEW %1$I AS
      SELECT * FROM canadian_parks WHERE name = %2$L;
      ALTER TABLE %1$I OWNER TO postgres'
      , parkname || '_view', parkname);
END LOOP;

END
$func$;

SELECT cs_refresh_mviews();

DROP SCHEMA x CASCADE; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:29:43.413

您误解了赋值表达式中逗号的用法。它变成`query`数组 ( `RECORD`) 而不是标量。使用串联：

```
park_name := quote_ident(mviews.name||'_view');
query := 'CREATE OR REPLACE VIEW '||park_name||' AS SELECT * from "Canadian_Parks" where name='||quote_literal(mviews.name)||'; ALTER TABLE '||park_name||' OWNER TO postgres'; 
```

# r - 取消调试所有功能

> ID：12807237
> 
> 赞同：31
> 
> 时间：2012-10-09T19:39:18.980
> 
> 标签：r, debugging

考虑我们已经调用`debug()`了几个函数来在它们上设置断点。当我们发现并解决错误时，是否`undebug()`所有功能都已`debug()`由单个命令标记？

这是一个很好的基准，可以查看您提出的方法是否真的完美运行：

```
> library(limma) # bioconductor
> debug(read.ilmn)
> read.ilmn("a.txt") # No problem if this file does not exist
Browse[2]> debug(.read.oneilmnfile) # This is the debug browser for read.ilmn()
Browse[2]> Q # To exit debug browser
> undebug.all() # Here run your proposed function to undebug everything!
> read.ilmn("a.txt")
# Now if the debug browser is not started, you are lucky to pass this test! 
```

您可能会在下面看到接受的答案。任何此答案不起作用的情况或更清洁的版本都非常受欢迎。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T20:04:17.697

`undebug()`不，所有功能都没有完全可靠的方法。（我之所以这么说，是因为我已经在 R-devel 和 R-help 上看到过多次讨论。）

[在本次讨论](https://stat.ethz.ch/pipermail/r-help/2005-May/071119.html)中，Brian Ripley 参与了讨论，并指出：

> 调试是函数对象的一个​​属性（在 sxpinfo 中有一点），因此您必须遍历所有可访问的对象（如 gc 所做的那样）才能找到它们。

[这是一个片段，其中 Robert Gentleman 回答了](https://stat.ethz.ch/pipermail/r-help/2001-October/015808.html)[一个问题](https://stat.ethz.ch/pipermail/r-help/2001-October/015736.html)（是否定的）“是否有一种方便的方法可以随时知道在R 会话中`debug()`或`trace()`在 R 会话中标记的函数”：

> 您可能没有得到答案，因为答案是否定的，没有简单的方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-09T20:06:04.360

这是我的解决方案...

**编辑**：修改以处理在命名空间中查找对象。代码已经变得有点笨拙了，因为我不太了解操作/查询命名空间的方法，而且我一直在反复试验。更清洁的版本将受到欢迎。几乎可以肯定还有其他极端情况会失败。

```
## return the names of the objects (from a vector of list of
## names of objects) that are functions and have debug flag set
isdebugged_safe <- function(x,ns=NULL)  {
    g <- if (is.null(ns)) get(x) else getFromNamespace(x,ns)
    is.function(g) && isdebugged(g)
}

which_debugged <- function(objnames,ns=NULL) {
    if (!length(objnames)) return(character(0))
    objnames[sapply(objnames,isdebugged_safe,ns=ns)]
}

all_debugged <- function(where=search(), show_empty=FALSE) {
    ss <- setNames(lapply(where,function(x) {
        which_debugged(ls(x,all.names=TRUE))
        }),gsub("package:","",where))
    ## find attached namespaces
    ## (is there a better way to test whether a 
    ##    namespace exists with a given name??)
    ns <- unlist(sapply(gsub("package:","",where),
                 function(x) {
                     if (inherits({n <- try(getNamespace(x),silent=TRUE)},
                         "try-error")) NULL else x
                 }))
    ss_ns <- setNames(lapply(ns,function(x) {
        objects <- ls(getNamespace(x),all.names=TRUE)
        which_debugged(objects,ns=x)
        }),ns)
    if (!show_empty) {
        ss <- ss[sapply(ss,length)>0]
        ss_ns <- ss_ns[sapply(ss_ns,length)>0]
    }
    ## drop overlaps
    for (i in names(ss))
        ss_ns[[i]] <- setdiff(ss_ns[[i]],ss[[i]])
    list(env=ss,ns=ss_ns)
}

undebug_all <- function(where=search()) {
    aa <- all_debugged(where)
    lapply(aa$env,undebug)
    ## now debug namespaces
    invisible(mapply(function(ns,fun) {
        undebug(getFromNamespace(fun,ns))
    },names(aa$ns),aa$ns))
} 
```

该代码也发布在[http://www.math.mcmaster.ca/bolker/R/misc/undebug_all.R](http://www.math.mcmaster.ca/bolker/R/misc/undebug_all.R)

例子：

```
library(nlme)
debug(lme)
## define functions
source(url("http://www.math.mcmaster.ca/bolker/R/misc/undebug_all.R"))
undebug_all()
fm1 <- lme(distance ~ age, data = Orthodont) # from ?lme 
```

在这种情况下`lme`，无需进入调试器即可运行。

另一个更难的例子：

```
library(limma)
source(url("http://www.math.mcmaster.ca/bolker/R/misc/undebug_all.R"))
debug(read.ilmn)
debug(limma:::.read.oneilmnfile)
all_debugged()
undebug_all()
read.ilmn()
read.ilmn("a.txt") 
```

*请注意*，从调试的角度来看`read.ilmn()`，`read.ilmn("a.txt")`它的行为似乎有所不同（我不明白为什么......）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-09T20:02:37.110

这是一种选择，假设您正在调试的功能位于工作区或全局环境中。可以指定任何特定的环境，使其具有适应性，但这不会一次性适用于所有已加载包中的任何功能。

首先通过全局环境中的几个函数来说明：

```
> bar <- function() {}
> foo <- function() {} 
```

用于`lsf.str()`返回工作区中的函数（供我们稍后使用`unclass()`并将其转换为列表）：

```
> funlist <- as.list(unclass(lsf.str()))
> funlist
[[1]]
[1] "bar"

[[2]]
[1] "foo" 
```

接下来，为这些函数生成一个关于它们是否被调试的指示器：

```
> debugged <- sapply(funlist, isdebugged)
> debugged
[1] FALSE FALSE 
```

好的，所以`debug()`其中一个功能并重新运行：

```
> debug(bar)
> 
> debugged <- sapply(funlist, isdebugged)
> debugged
[1]  TRUE FALSE 
```

最后，调试应用于它们`sapply()`的`funlist`函数：`undebug()`

```
> sapply(funlist[debugged], undebug)
[[1]]
NULL 
```

这当然可以封装成一个函数

```
undebugFuns <- function() {
    funs <- unclass(lsf.str())
    dbg <- sapply(funs, isdebugged)
    if(isTRUE(any(dbg))) {
        writeLines(paste("Un-debugging:", funs[dbg]))
        sapply(funs[dbg], undebug)
    } else {
        writeLines(paste("Nothing to debug"))
    }
    invisible()
}

> debug(bar)
> undebugFuns()
Un-debugging: bar 
```

* * *

一种未被采用的调试`isdebugged()`是通过以下方式制定的`debugonce()`：

```
> debug(bar)
> isdebugged(bar)
[1] TRUE
> undebugFuns()
Un-debugging: bar
> debugonce(bar)
> isdebugged(bar)
[1] FALSE 
```

这再次说明了乔什在他的回答中的观点。

# php - PDO 绑定参数

> ID：12807243
> 
> 赞同：1
> 
> 时间：2012-10-09T19:39:49.960
> 
> 标签：php, mysql, pdo

我正在构建简单的查询生成器，我有两个问题：

1.  是否可以将具有正常功能的 mysql 查询保护到与使用类似的级别`->execute(array(':param:' => ...`？

2.  是否可以在一个查询中使用多个变量，给它们起相同的名称（分号后面的那些），然后将它们一一绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:45:13.233

1.  如果我对您的理解正确，您想知道是否可以`bindParam`使用标准功能复制`mysql_*`功能？

    简短的回答是**否定**的。请完全不要使用 mysql 功能，使用`mysqli`or`PDO`因为它们为您提供真正的安全性`prepared statements`。它们还可以提供更好的查询性能，因为 SQL 能够针对数据库进行预先优化。

2.  您必须分别定义每个参数（即使它是相同的值）。您也可以将一个简单的数组传递给`execute()`方法调用，但是您没有显式定义参数类型的选项。

在你的函数中使用这样的东西：

```
$name = "fred";
$statement = $pdo->prepare("SELECT id FROM contacts WHERE first_name = ? OR last_name = ?");
for ($x = 1; $x <= 2; $x++) {
  $statement->bindParam($x, $name, PDO::PARAM_STR);
}
$statement->execute(); 
```

# java - 如何使用页面从 Java 正则表达式 DIV

> ID：12807244
> 
> 赞同：3
> 
> 时间：2012-10-09T19:39:50.790
> 
> 标签：java, regex, regex-greedy

我的问题是我想`<div> xxx </div>`从 HTML 的任意页面中删除一个。

所以给了一个页面......

```
<div> foo <div> bar <div> xxx </div> foo </div> bar </div> 
```

我想结束

```
<div> foo <div> bar  foo </div> bar </div> 
```

我以为这样`replaceFirst("<div.*?xxx.*?</div>", "")`就可以了。我假设了魔法？会使比赛变得懒惰并留下最初的 div。但是它坚持从第一个 div 开始贪婪和匹配。

由于我花了一个小时才找到解决方案，因此我在下面发布我的答案以保存后续答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:45:20.167

我认为这可能是使用正则表达式完成此任务的更正确方法，假设您想要最后一个`<div>`：

```
"<div>((?!<div>).)*?xxx((?!<div>).)*?</div>" 
```

尽管我倾向于说，如果您使用这样的负面环顾四周，您可能会更好地找到更适合该任务的工具。这是学术，真的。也许很有趣。但是，如果您从提供的示例中稍微提高复杂性，那么这个以及任何提供的解决方案都不会做得很好。

关于它们的更多信息，这里有一个关于它们的奇妙答案： [正则表达式匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:39:50.790

我想出的答案是

```
.replaceFirst("<div[^(div)]*?xxx.*?</div>", ""); // WARNING - THIS IS BROKEN !!! 
```

如果有更好的解决方案，我很乐意支持它。我仍然不明白为什么我的原始版本不起作用，但一切都很好，结果很好。

编辑：正如许多人指出的那样，当内部 div 包含 di 或 v 时，上述解决方案不起作用。

我结束了

```
.replaceFirst("(?s)(<div.*)<div.*xxx.*?</div>","$1"); 
```

共识是正则表达式和 HTML 就像卷心菜和奶油冻。虽然我确信这是个好建议，但我的具体情况是（a）我可以控制所有的 HTML，并且（b）我不能引入外部库。考虑到这些具体的考虑，我很满意正则表达式对我有用。

我希望后面的人会发现这个线程很有用，并感谢所有的贡献。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:52:25.757

贪婪的匹配并不完全符合您的预期。它将尝试使子字符串匹配尽可能短，但仍会从它看到的第一个实例开始匹配。您也不想成功`[^(div)]`，根据[Pattern 文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)，它不会匹配任何字符`d`, `i`, `v`, `(`, or `)`。

我赞同反对在 HTML 上使用正则表达式的建议；从字面上看，它的表现力不足以很好地解析 HTML。相反，使用 HTML 解析器和 XPath 查询。

如果您确定您的 DIV 没有孩子，您最接近的近似值是执行以下操作：

```
.replaceFirst("<div[^<]+?xxx.*?</div>") 
```

...其中`[^<]+?`将阻止前半部分找到任何带有子标签的 DIV。

# xsd - 用于 xhtml 的自定义 XSD

> ID：12807246
> 
> 赞同：-1
> 
> 时间：2012-10-09T19:40:00.223
> 
> 标签：xsd

我尝试以下但收到错误

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xhtml="http://www.w3.org/1999/xhtml">   
    <xsd:import namespace="http://www.w3.org/1999/xhtml" schemaLocation="xhtml.xsd" />

    <xsd:element name="book" type="bookType"/>

    <xsd:complexType name="bookType">
        <xsd:all>
            <xsd:element name="title" type="xsd:string"/>
            <xsd:element name="author" type="xsd:string"/>
            <xsd:element ref="xhtml:pre"/>
            <xsd:element ref="xhtml:ul"/>
        </xsd:all>
    </xsd:complexType>
</xsd:schema> 
```

它返回一个错误`<xsd:element ref="xhtml:pre"/>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:58:58.517

尝试这个：

```
 <xsd:import namespace="http://www.w3.org/1999/xhtml" schemaLocation="http://www.w3.org/2002/08/xhtml/xhtml1-strict.xsd" /> 
```

而不是你的进口。它将在 XML Spy 中进行验证。

# php - PHP 在多个字符之间拆分字符串

> ID：12807247
> 
> 赞同：0
> 
> 时间：2012-10-09T19:40:07.207
> 
> 标签：php, split, explode

我有一个脚本可以记录您的 WAN 和 LAN IP，但在打印的答案周围也有一堆不必要的字符。如何拆分 IP 并摆脱这些字符？

打印答案：`{"ip":[["WANIP","LANIP"]]}` 我想要的是 2 个不同的变量，1 个打印 wan，1 个打印 lan。

我已经尝试过 str_split 和爆炸，也许我做得不对或者我不能用这些做，所以任何答案都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:53:21.620

```
$json = '{"ip":[["WANIP","LANIP"]]}';
$decoded = json_decode($json, true); // true means it will format it into an assoc array 
```

然后你就可以通过简单地使用`$decoded['ip'][0][0]`and 来访问你想要的字符串`$decoded['ip'][0][1]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:42:15.997

看起来您的“打印答案”是 JSON。在这种情况下，解析 json 然后提取所需的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T19:47:34.600

你可以使用类似[json_decode()](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T19:50:44.053

试试这个代码：

```
$data = "{\"ip\":[[\"WANIP\",\"LANIP\"]]}";
$jdecode = json_decode($data,true);

echo $jdecode['ip'][0][0];
echo $jdecode['ip'][0][1]; 
```

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T19:54:41.853

我会先去掉一些不必要的混乱，然后分解：

```
$response =  '{"ip":[["WANIP","LANIP"]]}'; //or however you load your variable
$arryRemove = array('"', 'ip:[[', ']]}'); //specify an array of things to remove
$response = str_replace($arryRemove, "", $response);

$arryIPs = explode(",", $response); 
```

`$arryIPs[0]`将包含 WANIP， `$arryIPs[1]`将包含 LANIP

# android - Eclipse 显示未知设备

> ID：12807248
> 
> 赞同：1
> 
> 时间：2012-10-09T19:40:16.210
> 
> 标签：android, eclipse

我`HCL ME U1`用于测试我的 android 应用程序。但是当我尝试在我的设备上运行我的应用程序时，它显示未知设备并且无法在设备上安装。
我按照[这个问题接受了答案](https://stackoverflow.com/q/7419964/1139398)，但在设备管理器中没有找到任何设备。
第一次，当我将设备连接到我的计算机时，它显示“设备驱动程序已成功安装”。
我正在使用 Windows 7 32 位操作系统。
![在此处输入图像描述](../Images/0b739b9e7d060edada33bf2690a573cd.png)

我在设备管理器中没有找到任何安卓设备。
当我使用 cmd 查找设备时，它会显示在列表中。
我还在我的 hcl 平板电脑中启用了 USB 调试和未知源。

请给我一些提示或参考。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:14:15.680

不要重新启动手机，而是转到任务管理器（Windows）并杀死 adb.exe 进程。10-15 秒后，它会自行重新启动。然后它应该检测到您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:15:12.690

我最近通过更新我的 Android SDK 在 Ubuntu 中解决了一个类似的问题。一年前，我还记得我很难让另一部手机连接到 Windows。我记得，尽管收到“设备驱动程序已成功安装”消息，但我不得不从 SDK 工具管理器 手动安装[USB 驱动程序。](http://developer.android.com/sdk/win-usb.html)

您也可以尝试“adb devices”来查看您的设备是否显示在那里。我希望它在 adb 的 Windows 设备管理器中可以看到。您提到设备管理器中没有 Android 设备：检查它可能显示为的其他未知设备。我相信我的在更新驱动程序之前显示为 USB 大容量存储。可以在[此处](http://forum.xda-developers.com/showthread.php?t=1631663)找到这样做的替代指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:12:08.300

一旦我遇到这个问题，除了一个简单的技巧之外，没有任何事情可以解决我的问题。我关掉了手机，弹出了SD卡，清理了一下，然后又放回了手机里。

打开手机后，一切正常。您还有其他选择：

*   在手机连接到互联网时将手机连接到电脑（以更新其 USB 驱动器）
*   从设备管理器更新您的 ADB 驱动程序（当手机连接到电脑时）
*   某些 USB 电缆没有调试功能。一定要使用正确的。

# .htaccess - 使用 .htaccess 为移动设备重定向 - 仅在主页上

> ID：12807250
> 
> 赞同：1
> 
> 时间：2012-10-09T19:40:18.073
> 
> 标签：.htaccess, redirect, mobile, wildcard, http-host

我首先使用[此处](https://stackoverflow.com/questions/3680463/mobile-redirect-using-htaccess)描述的方法来创建移动重定向，并且效果很好。

然而，我接下来需要做的是防止它发生在主页以外的任何页面*上*。换句话说：如果用户从移动设备加载主页，则应该发生重定向 - 但如果他们从移动设备加载任何其他页面，则不应发生重定向。

我希望社区能够就如何有效地实现这一目标提供任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:43:47.373

您需要通过签出 User-Agent 来重定向：

[基于用户代理的移动网站重定向](https://stackoverflow.com/questions/8362539/mobile-website-redirection-based-on-user-agent)

或在 PHP 上：

```
<?php

$useragent = $_SERVER['HTTP_USER_AGENT'];

//mobile example
if( strpos($useragent,"Blackberry") ) { 
header("Location: http://m.nickyeoman.com/");
}

//css example
if( strpos($useragent,"wii") ) { ?>
<link rel="stylesheet" href="/css/wii.css" type="text/css" media="all" />
<php } else { ?>
<link rel="stylesheet" href="/css/global.css" type="text/css" media="all" />
<php } ?> 
```

通过[http://www.nickyeoman.com/blog/php/64-php-redirect](http://www.nickyeoman.com/blog/php/64-php-redirect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:08:15.197

我只需要添加

```
[OR]
RewriteCond %{HTTP_HOST}  ^(mydomain\.com|www\.mydomain\.com)$ [NC] 
```

就是这样。所以，最后，它看起来像

```
# Check if we're not already on the mobile site AND just going to the homepage
RewriteCond %{HTTP_HOST}    !^m\. [OR]
RewriteCond %{HTTP_HOST}    ^(mydomain\.com|www\.mydomain\.com)$ [NC]
# Can not read and write cookie in same request, must duplicate condition 
```

确保你也得到了[或]。希望我的新手建议有一天会帮助某人

# glassfish - Glassfish 部署失败 - “引用错误：此捆绑包没有名称为 [ClientBean] 的 bean”

> ID：12807258
> 
> 赞同：1
> 
> 时间：2012-10-09T19:41:07.823
> 
> 标签：glassfish, ejb, remote-client

我正在尝试从此页面运行示例：[GlassFish-to-GlassFish Remote EJB Invocation](https://blogs.oracle.com/chengfang/entry/glassfish_to_glassfish_remote_ejb)

但是当我尝试在 glassfish 上部署客户端时出现此错误（“asadmin> deploy client-ejb.jar”）：“部署应用程序时出现异常 [client-ejb]：引用错误：此捆绑包没有名称 [客户端豆]"

我需要帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:21:30.927

我在尝试部署我的应用程序时遇到了类似的问题（部署应用程序时出现异常 [my-app]：引用错误：此捆绑包没有名称为 [myBeanFacade] 的 bean）。相当奇怪，但解决这个问题所需要做的就是转到构建类别树下 [my-app] 的属性，选择 compile 并勾选 compile on save 选项。重新部署了我的应用程序和中提琴！注意 [my-app] 包含 2 个 ejb jar 和一个 Web 应用程序，其中一个 ejb 是 Web 应用程序中的一个库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T22:28:13.260

出现此问题是因为该人忘记`ServiceIF.class`在`client-ejb.jar`.

执行命令：

```
jar cvf client-ejb.jar test/ServiceIF.class test/ClientIF.class test/ClientBean.class META-INF/glassfish-ejb-jar.xml 
```

获取新的 .jar，它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-13T22:40:45.367

如果您使用的是部署描述符，那么两个描述符文件中的 EJB 名称应该相同。

```
 <ejb-jar>
  <enterprise-beans>
    <session>
      <ejb-name>Hello</ejb-name>
      <home>com.ejb.test.HelloHome</home>
      <remote>com.ejb.test.HelloObject</remote>
      <ejb-class>com.ejb.test.HelloBean</ejb-class>
      <session-type>Stateless</session-type>
      <transaction-type>Container</transaction-type>
    </session>
  </enterprise-beans>
  <assembly-descriptor>
    <container-transaction>
      <method>
        **<ejb-name>Hello</ejb-name>**
        <method-name>*</method-name>
      </method>
      <trans-attribute>Required</trans-attribute>
    </container-transaction>
  </assembly-descriptor>
</ejb-jar>

<glassfish-ejb-jar>
    <enterprise-beans>
        <ejb>
            **<ejb-name>Hello</ejb-name>**
            <jndi-name>jndi/Hello</jndi-name>
        </ejb>
    </enterprise-beans>
</glassfish-ejb-jar> 
```

# linux - 制作 Linux 发行版有多容易？

> ID：12807259
> 
> 赞同：4
> 
> 时间：2012-10-09T19:41:08.107
> 
> 标签：linux, configuration, software-distribution

从我一直在阅读的内容来看，Linux 发行版只不过是一个包含各种软件包和一些有限配置细节的内核打包，例如默认使用哪个窗口管理器和 GUI（假设你甚至想要一个 GUI，blech）。在过去，发行版显然有一些独特的优势。例如，Red Hat 有 Red Hat Package Manager (rpm)。当然，如今 rpm 已不再是 Red Hat 的独特优势。

那么，为什么还要打扰分发呢？为什么不安装一个内核和一堆自己选择的包呢？有什么复杂性？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-09T20:41:41.687

基本上，GNU/Linux 发行版是一个内核和一个人选择的“一堆包”（GNU 包）。人们创建发行版来执行特定任务，例如服务器、桌面发行版、面向多媒体的发行版等。

创建 linux 发行版可能是一项真正的教育任务，因为您可以了解如何从头开始构建 linux 系统。

我建议你检查[LFS (Linux From Scratch)](http://www.linuxfromscratch.org/)。它是一个指导您从头开始组装自己的 linux 发行版的项目，相信我，它非常有趣，而且您确实会学到很多东西。如果您对了解 linux 发行版的工作原理感兴趣，请不要错过。该网页说：

许多人想知道，当他们可以下载现有的 Linux 发行版时，为什么还要经历从头开始构建 Linux 系统的麻烦。但是，构建 LFS 有几个好处。考虑以下：

LFS 教人们 Linux 系统如何在内部工作 构建 LFS 会教你所有使 Linux 运转的知识，事物如何协同工作和相互依赖。最重要的是，如何根据自己的口味和需求对其进行定制。

> 构建 LFS 会产生一个非常紧凑的 Linux 系统 当您安装常规发行版时，您通常最终会安装许多您可能永远不会使用的程序。他们只是坐在那里占用（宝贵的）磁盘空间。将 LFS 系统安装在 100 MB 以下并不难。这听起来还是很多吗？我们中的一些人一直致力于创建一个非常小的嵌入式 LFS 系统。我们安装了一个足以运行 Apache Web 服务器的系统；总磁盘空间使用量约为 8 MB。通过进一步剥离，可以减少到 5 MB 或更少。尝试使用常规分布。
> 
> LFS 非常灵活 建筑 LFS 可以比作完成的房子。LFS 将为您提供房屋的骨架，但由您来安装管道、电源插座、厨房、浴室、墙纸等。您可以将其变成您需要的任何类型的系统，完全定制为你。
> 
> LFS 为您提供额外的安全性 您将从源代码编译整个系统，从而允许您审核所有内容（如果您愿意），并应用您想要或需要应用的所有安全补丁。您不必等待其他人提供（希望）修复安全漏洞的新二进制包。通常，除非您自己动手，否则您永远不会真正知道安全漏洞是否已修复。

当然，还有其他工具可以根据您的 HD 安装创建 linux 发行版，可能是出于备份目的。

*   [Linux 直播](http://www.linux-live.org/)

还有很多其他脚本可以帮助您入门，只需 google 即可。当然，它们都是面向用户的自动工具，所以不要期望从它们身上学到很多东西。

那里有很多，成千上万的 linux 发行版，因此尝试制作“理想”的 linux 发行版并与 ubuntu、mint 等竞争显然是浪费时间。

我仍然建议您查看 Linux From Scratch，就像周末的教育项目一样。相信我，你会学到很多东西。

它还涵盖了嵌入式 linux 发行版创建、针对 ARM 处理器等。

如果你在嵌入式世界，[Yocto Project](http://www.yoctoproject.org/)值得一看。

# javascript - 防止uglifyjs重命名某些函数

> ID：12807263
> 
> 赞同：5
> 
> 时间：2012-10-09T19:41:20.483
> 
> 标签：javascript, uglifyjs

我有一个函数，里面有一个构造函数。它创建一个新对象并返回它：

```
function car() {
   function Car() {}
   return new Car();
} 
```

结果 uglify 将 Car 重命名为某个字母，当它返回时，它看起来对象名称只是某个字母。例如，在 chrome 中，它会说对象的类型是“t”。

有没有办法告诉 uglify 保留某些函数的名称？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T19:44:19.330

您需要使用`reserved-names`参数：

```
--reserved-names “Car” 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T19:48:47.207

即使您遵循比尔的建议，您的方法仍然存在问题。

```
car().constructor !== car().constructor 
```

人们会期望那些是平等的

我会改变你创建构造函数并给它一个工厂构造函数的方法

```
/** @private */
function Car() {
   ...
}

Car.create = function() {
    return new Car();
} 
```

或以下（模块模式），结合比尔的方法。然后你不会每次都返回一个具有不同原型的对象

```
var car  = (function() {
   function Car() {...}
   return function() {
       return new Car();
   }
})();

// car().constructor === car().constructor // true 
```

# android - 来自其他类的 AlerDialog 调用

> ID：12807264
> 
> 赞同：0
> 
> 时间：2012-10-09T19:41:22.153
> 
> 标签：android, android-alertdialog

我正在尝试从同一文件中的另一个类调用我的 alertdialog。我这里哪里错了？只是想扩展 AlertDialog，但我不知道该怎么做，我不想在我的公共主类中尝试并工作，但如果可能的话，我需要在可分离类中。

```
class MyDialog extends AlertDialog {
public static Context context;
public static int theme;
protected MyDialog(Context context, int theme) {
    super(context, theme);
    MyDialog.context = context;

    theme = THEME_HOLO_DARK;
    MyDialog.theme = theme;
}

public void onCreateAlertDialog() {
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);
    alertDialog.setTitle("Auto Start")
    .setMessage("Start playing after: 30 sec")
    .setIcon(R.drawable.info)
    .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            Toast.makeText(context, "Auto start cancaled!", Toast.LENGTH_SHORT).show();
            dialog.cancel();
            }
        }
    );
    alertDialog.show();
}
} 
```

我像这样从主类调用它：

```
Context context = MyDialog.context;
int i = MyDialog.theme;
MyDialog md = new MyDialog(context, i);
md.onCreateAlertDialog(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:52:08.283

我认为它来自您没有初始化它的上下文变量。您应该从调用对话框的活动中获取它：

```
class MyActivity extends Activity{
    ...
    Context context = this;
    MyDialog md = new MyDialog(context, i);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:55:41.177

您正在使用 AlertDialog.Builder ，它在您构建它时将始终返回 AlertDialog 类的实例。您必须覆盖静态构建器以返回您的类的实例，但这实际上是不可能的。

您要做的是扩展 Dialog 类并创建自己的 AlertDialog 实现，如 HoloEverywhere 库中所示。

[https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/library/src/com/WazaBe/HoloEverywhere/app/AlertDialog.java](https://github.com/ChristopheVersieux/HoloEverywhere/blob/master/library/src/com/WazaBe/HoloEverywhere/app/AlertDialog.java)

```
public class AlertDialog extends Dialog implements DialogInterface {
    public static class Builder {
        private final AlertController.AlertParams P;

        public Builder(Context context) {
            this(context, resolveDialogTheme(context, 0));
        }

        public Builder(Context context, int theme) {
            P = new AlertController.AlertParams(new ContextThemeWrapper(
                    context, resolveDialogTheme(context, theme)));
            P.mTheme = theme;
        }

        public AlertDialog create() {
            final AlertDialog dialog = new AlertDialog(P.mContext, P.mTheme);
            P.apply(dialog.mAlert);
            dialog.setCancelable(P.mCancelable);
            if (P.mCancelable) {
                dialog.setCanceledOnTouchOutside(true);
            }
            dialog.setOnCancelListener(P.mOnCancelListener);
            if (P.mOnKeyListener != null) {
                dialog.setOnKeyListener(P.mOnKeyListener);
            }
            return dialog;
        }

        public Context getContext() {
            return P.mContext;
        }

        public Builder setAdapter(final ListAdapter adapter,
                final OnClickListener listener) {
            P.mAdapter = adapter;
            P.mOnClickListener = listener;
            return this;
        }

        public Builder setCancelable(boolean cancelable) {
            P.mCancelable = cancelable;
            return this;
        }

        public Builder setCheckedItem(int checkedItem) {
            P.mCheckedItem = checkedItem;
            return this;
        }

        public Builder setCursor(final Cursor cursor,
                final OnClickListener listener, String labelColumn) {
            P.mCursor = cursor;
            P.mLabelColumn = labelColumn;
            P.mOnClickListener = listener;
            return this;
        }

        public Builder setCustomTitle(View customTitleView) {
            P.mCustomTitleView = customTitleView;
            return this;
        }

        public Builder setIcon(Drawable icon) {
            P.mIcon = icon;
            return this;
        }

        public Builder setIcon(int iconId) {
            P.mIconId = iconId;
            return this;
        }

        public Builder setIconAttribute(int attrId) {
            TypedValue out = new TypedValue();
            P.mContext.getTheme().resolveAttribute(attrId, out, true);
            P.mIconId = out.resourceId;
            return this;
        }

        public Builder setInverseBackgroundForced(boolean useInverseBackground) {
            P.mForceInverseBackground = useInverseBackground;
            return this;
        }

        public Builder setItems(CharSequence[] items,
                final OnClickListener listener) {
            P.mItems = items;
            P.mOnClickListener = listener;
            return this;
        }

        public Builder setItems(int itemsId, final OnClickListener listener) {
            P.mItems = P.mContext.getResources().getTextArray(itemsId);
            P.mOnClickListener = listener;
            return this;
        }

        public Builder setMessage(CharSequence message) {
            P.mMessage = message;
            return this;
        }

        public Builder setMessage(int messageId) {
            P.mMessage = P.mContext.getText(messageId);
            return this;
        }

        public Builder setMultiChoiceItems(CharSequence[] items,
                boolean[] checkedItems,
                final OnMultiChoiceClickListener listener) {
            P.mItems = items;
            P.mOnCheckboxClickListener = listener;
            P.mCheckedItems = checkedItems;
            P.mIsMultiChoice = true;
            return this;
        }

        public Builder setMultiChoiceItems(Cursor cursor,
                String isCheckedColumn, String labelColumn,
                final OnMultiChoiceClickListener listener) {
            P.mCursor = cursor;
            P.mOnCheckboxClickListener = listener;
            P.mIsCheckedColumn = isCheckedColumn;
            P.mLabelColumn = labelColumn;
            P.mIsMultiChoice = true;
            return this;
        }

        public Builder setMultiChoiceItems(int itemsId, boolean[] checkedItems,
                final OnMultiChoiceClickListener listener) {
            P.mItems = P.mContext.getResources().getTextArray(itemsId);
            P.mOnCheckboxClickListener = listener;
            P.mCheckedItems = checkedItems;
            P.mIsMultiChoice = true;
            return this;
        }

        public Builder setNegativeButton(CharSequence text,
                final OnClickListener listener) {
            P.mNegativeButtonText = text;
            P.mNegativeButtonListener = listener;
            return this;
        }

        public Builder setNegativeButton(int textId,
                final OnClickListener listener) {
            P.mNegativeButtonText = P.mContext.getText(textId);
            P.mNegativeButtonListener = listener;
            return this;
        }

        public Builder setNeutralButton(CharSequence text,
                final OnClickListener listener) {
            P.mNeutralButtonText = text;
            P.mNeutralButtonListener = listener;
            return this;
        }

        public Builder setNeutralButton(int textId,
                final OnClickListener listener) {
            P.mNeutralButtonText = P.mContext.getText(textId);
            P.mNeutralButtonListener = listener;
            return this;
        }

        public Builder setOnCancelListener(OnCancelListener onCancelListener) {
            P.mOnCancelListener = onCancelListener;
            return this;
        }

        public Builder setOnItemSelectedListener(
                final AdapterView.OnItemSelectedListener listener) {
            P.mOnItemSelectedListener = listener;
            return this;
        }

        public Builder setOnKeyListener(OnKeyListener onKeyListener) {
            P.mOnKeyListener = onKeyListener;
            return this;
        }

        public Builder setOnPrepareListViewListener(
                OnPrepareListViewListener listener) {
            P.mOnPrepareListViewListener = listener;
            return this;
        }

        public Builder setPositiveButton(CharSequence text,
                final OnClickListener listener) {
            P.mPositiveButtonText = text;
            P.mPositiveButtonListener = listener;
            return this;
        }

        public Builder setPositiveButton(int textId,
                final OnClickListener listener) {
            P.mPositiveButtonText = P.mContext.getText(textId);
            P.mPositiveButtonListener = listener;
            return this;
        }

        public Builder setRecycleOnMeasureEnabled(boolean enabled) {
            P.mRecycleOnMeasure = enabled;
            return this;
        }

        public Builder setSingleChoiceItems(CharSequence[] items,
                int checkedItem, final OnClickListener listener) {
            P.mItems = items;
            P.mOnClickListener = listener;
            P.mCheckedItem = checkedItem;
            P.mIsSingleChoice = true;
            return this;
        }

        public Builder setSingleChoiceItems(Cursor cursor, int checkedItem,
                String labelColumn, final OnClickListener listener) {
            P.mCursor = cursor;
            P.mOnClickListener = listener;
            P.mCheckedItem = checkedItem;
            P.mLabelColumn = labelColumn;
            P.mIsSingleChoice = true;
            return this;
        }

        public Builder setSingleChoiceItems(int itemsId, int checkedItem,
                final OnClickListener listener) {
            P.mItems = P.mContext.getResources().getTextArray(itemsId);
            P.mOnClickListener = listener;
            P.mCheckedItem = checkedItem;
            P.mIsSingleChoice = true;
            return this;
        }

        public Builder setSingleChoiceItems(ListAdapter adapter,
                int checkedItem, final OnClickListener listener) {
            P.mAdapter = adapter;
            P.mOnClickListener = listener;
            P.mCheckedItem = checkedItem;
            P.mIsSingleChoice = true;
            return this;
        }

        public Builder setTitle(CharSequence title) {
            P.mTitle = title;
            return this;
        }

        public Builder setTitle(int titleId) {
            P.mTitle = P.mContext.getText(titleId);
            return this;
        }

        public Builder setView(View view) {
            P.mView = view;
            P.mViewSpacingSpecified = false;
            return this;
        }

        public Builder setView(View view, int viewSpacingLeft,
                int viewSpacingTop, int viewSpacingRight, int viewSpacingBottom) {
            P.mView = view;
            P.mViewSpacingSpecified = true;
            P.mViewSpacingLeft = viewSpacingLeft;
            P.mViewSpacingTop = viewSpacingTop;
            P.mViewSpacingRight = viewSpacingRight;
            P.mViewSpacingBottom = viewSpacingBottom;
            return this;
        }

        public AlertDialog show() {
            AlertDialog dialog = create();
            dialog.show();
            return dialog;
        }
    }

    public static final int THEME_HOLO_DARK = 1;
    public static final int THEME_HOLO_LIGHT = 2;

    static int resolveDialogTheme(Context context, int resid) {
        if (resid == THEME_HOLO_DARK) {
            return R.style.Holo_Theme_Dialog_Alert;
        } else if (resid == THEME_HOLO_LIGHT) {
            return R.style.Holo_Theme_Dialog_Alert_Light;
        } else if (resid >= 0x01000000) {
            return resid;
        } else {
            TypedValue outValue = new TypedValue();
            context.getTheme().resolveAttribute(R.attr.alertDialogTheme,
                    outValue, true);
            return outValue.resourceId;
        }
    }

    private final AlertController mAlert;

    protected AlertDialog(Context context) {
        this(context, false, null, resolveDialogTheme(context, 0));
    }

    protected AlertDialog(Context context, boolean cancelable,
            OnCancelListener cancelListener) {
        this(context, cancelable, cancelListener,
                resolveDialogTheme(context, 0));
    }

    protected AlertDialog(Context context, boolean cancelable,
            OnCancelListener cancelListener, int theme) {
        super(context, resolveDialogTheme(context, theme));
        setCancelable(cancelable);
        setOnCancelListener(cancelListener);
        mAlert = new AlertController(context, this, getWindow());
    }

    protected AlertDialog(Context context, int theme) {
        this(context, false, null, theme);
    }

    public Button getButton(int whichButton) {
        return mAlert.getButton(whichButton);
    }

    public ListView getListView() {
        return mAlert.getListView();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mAlert.installContent();
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (mAlert.onKeyDown(keyCode, event)) {
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if (mAlert.onKeyUp(keyCode, event)) {
            return true;
        }
        return super.onKeyUp(keyCode, event);
    }

    @Deprecated
    public void setButton(CharSequence text, Message msg) {
        setButton(BUTTON_POSITIVE, text, msg);
    }

    @Deprecated
    public void setButton(CharSequence text, final OnClickListener listener) {
        setButton(BUTTON_POSITIVE, text, listener);
    }

    public void setButton(int whichButton, CharSequence text, Message msg) {
        mAlert.setButton(whichButton, text, null, msg);
    }

    public void setButton(int whichButton, CharSequence text,
            OnClickListener listener) {
        mAlert.setButton(whichButton, text, listener, null);
    }

    @Deprecated
    public void setButton2(CharSequence text, Message msg) {
        setButton(BUTTON_NEGATIVE, text, msg);
    }

    @Deprecated
    public void setButton2(CharSequence text, final OnClickListener listener) {
        setButton(BUTTON_NEGATIVE, text, listener);
    }

    @Deprecated
    public void setButton3(CharSequence text, Message msg) {
        setButton(BUTTON_NEUTRAL, text, msg);
    }

    @Deprecated
    public void setButton3(CharSequence text, final OnClickListener listener) {
        setButton(BUTTON_NEUTRAL, text, listener);
    }

    public void setCustomTitle(View customTitleView) {
        mAlert.setCustomTitle(customTitleView);
    }

    public void setIcon(Drawable icon) {
        mAlert.setIcon(icon);
    }

    public void setIcon(int resId) {
        mAlert.setIcon(resId);
    }

    public void setIconAttribute(int attrId) {
        TypedValue out = new TypedValue();
        getContext().getTheme().resolveAttribute(attrId, out, true);
        mAlert.setIcon(out.resourceId);
    }

    public void setInverseBackgroundForced(boolean forceInverseBackground) {
        mAlert.setInverseBackgroundForced(forceInverseBackground);
    }

    public void setMessage(CharSequence message) {
        mAlert.setMessage(message);
    }

    @Override
    public void setTitle(CharSequence title) {
        super.setTitle(title);
        mAlert.setTitle(title);
    }

    public void setView(View view) {
        mAlert.setView(view);
    }

    public void setView(View view, int viewSpacingLeft, int viewSpacingTop,
            int viewSpacingRight, int viewSpacingBottom) {
        mAlert.setView(view, viewSpacingLeft, viewSpacingTop, viewSpacingRight,
                viewSpacingBottom);
    }
} 
```

# ios - 带有相机图片的 UIImageView 的奇怪行为，全部放大

> ID：12807271
> 
> 赞同：0
> 
> 时间：2012-10-09T19:41:32.050
> 
> 标签：ios, uiimageview, uiimage, zooming, clipped

我有一个奇怪的行为，这表明我可能只是错过了一些东西。我有以下代码：

```
UIImage *anyImage = [UIImage imageWithContentsOfFile:path];
self.imageView   = [[UIImageView alloc] initWithImage:newImage];
[self.imageView setImage:newImage];
self.imageView.center = self.view.center;
self.imageView.contentMode = UIViewContentModeScaleAspectFit;
self.imageView.userInteractionEnabled=YES;
self.imageView.clipsToBounds=YES;
[self.view addSubview:self.imageView]; 
```

当anyImage是从互联网下载的较小尺寸的图片时，它可以正确显示。但是，当 anyImage 是从我的 iPhone 相机拍摄的图片时，它会被放大，并且只显示放大的图片的一部分，覆盖整个窗口。我尝试了不同的方法来调整 imageView 的大小，但没有效果。例如，一张人的照片可能会将头部或身体的一部分全部放大以覆盖整个窗口，而身体的其余部分则未显示。我该如何解决这个问题？

# javascript - 从 URL 中获取数字

> ID：12807275
> 
> 赞同：-1
> 
> 时间：2012-10-09T19:41:44.843
> 
> 标签：javascript, regex, selenium-ide

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

我试图在测试期间从 URL 获取页码。URL 如下所示：

[http://www.site.com/objects/search/8765XX/results?page=2&sort_att=posted_dt&sort_dir=desc](http://www.site.com/objects/search/8765XX/results?page=2&sort_att=posted_dt&sort_dir=desc)

我想要得到的是 url 中 'page=' 之后的页码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:43:49.803

在一行中，通过拆分 url。[jsfiddle](http://jsfiddle.net/TdS78/)

```
var url = "http://www.site.com/objects/search/8765XX/results?page=2&sort_att=posted_dt&sort_dir=desc";

var pageNumber = parseInt(url.split("page=")[1].split("&")[0], 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:43:32.797

我有这个小功能来获取 URL 参数（我多年前在互联网上找到了它）：

```
function getUrlParameter(name, defaultValue) {
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec( window.location.href );
    if( results == null ) return defaultValue;
    else return results[1];
} 
```

我这样使用它：

```
pageNumber = parseInt(getUrlParameter('page'), 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T19:46:55.967

我能想到的一个简单的纯 JavaScript 实现如下所示：

```
 var url = http://www.site.com/objects/search/8765XX/results?page=2&sort_att=posted_dt&sort_dir=desc
 var matchedPos =  url.search("page=\\d");
 var matched = url.substr(matchedPos);
 var num = matched.split("=")[1]; //might need to parse 
```

# c# - 如何获取当前的项目模板名称？

> ID：12807277
> 
> 赞同：0
> 
> 时间：2012-10-09T19:41:53.440
> 
> 标签：c#, visual-studio, add-in, visual-studio-addins

我有 DTE.Project 对象 - 我如何从那里获得项目模板名称？

我正在尝试检测项目模板，以便以后能够以编程方式重新创建它。如果我有名字，我可以做到。这是正确的方法吗？

我已经看过[http://www.mztools.com/articles/2007/mz2007016.aspx](http://www.mztools.com/articles/2007/mz2007016.aspx)，但并非所有项目都有“projectTypeGuids”，例如 Windows 窗体应用程序和控制台应用程序，而 ProjectType 和 OutputType 属性没有帮助我，因为它们与上述模板相同。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:23:08.187

答案可以在这里找到：（这是希伯来语）

[http://blogs.microsoft.co.il/blogs/shlomo/archive/2012/10/10/how-do-i-get-the-current-project-template.aspx](http://blogs.microsoft.co.il/blogs/shlomo/archive/2012/10/10/how-do-i-get-the-current-project-template.aspx)

# html - HTML CSS min-width 流体宽度

> ID：12807279
> 
> 赞同：0
> 
> 时间：2012-10-09T19:41:58.403
> 
> 标签：html, css, fluid-layout

无论如何我可以设置我的 CSS 样式以使我的 jsfiddle 示例包含流体宽度吗？

[http://jsfiddle.net/x2qk7/99/](http://jsfiddle.net/x2qk7/99/)

```
$(document).ready(function(){

$('a.next').click(function(){  
    $('.slide').animate({"left": "-=480"}, 500);
})
$('a.back').click(function(){  
    $('.slide').animate({"left": "+=480"}, 500);
})

});​

.form-slides {width:480px; overflow:hidden; border: 1px solid #ccc;}
.wrap { width: 9999px; }
.slide {width:480px; float:left; position: relative; background:#eee;}
.next {float:right;}

<div class="form-slides">
<div class="wrap">

    <div class="slide">
        <p>Lipsum blah blah blah</p>
        <a href="#" class="next">Next</a> 
    </div>
    <div class="slide">
        <p>Lipsum blah blah blah</p>
        <a href="#" class="next">Next</a> 
        <a href="#" class="back">back</a> 
    </div>
    <div class="slide">
        <p>Lipsum blah blah blah</p>
        <a href="#" class="back">back</a> 
    </div>

</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:45:30.967

是的。替换`width:480px`为`width: 100%`，并将边界声明移动到`.wrap`div：

```
.form-slides { width:100%; }
.wrap { border: 1px solid #ccc; }
.slide { width:100%; float:left; background:#eee; }
.next { float:right; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:46:15.453

容器是流体宽度。幻灯片是父宽度的 100%。动画是 -(slideId * 100)% 请参见此处的示例：http: [//psofe.com/mhealth/](http://psofe.com/mhealth/)

示例具有流体宽度（使用此方法）和最大宽度的幻灯片。

# lua - 从lua中的函数返回多个值

> ID：12807281
> 
> 赞同：21
> 
> 时间：2012-10-09T19:42:04.273
> 
> 标签：lua

我正在尝试以下 lua 代码：

```
function test() return 1, 2 end
function test2() return test() end
function test3() return test(), 3 end

print(test()) -- prints 1 2
print(test2()) -- prints 1 2
print(test3()) -- prints 1 3 
```

我希望 test3 返回 1, 2, 3

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-09T20:31:16.547

如果您不确定某个函数可能返回多少个值，您可以这样做。

```
function test() return 1, 2 end
function test2() return test() end
function test3()
    local values = {test2()}
    table.insert(values, 3)
    return unpack(values)
end

print(test3()) 
```

这输出：

```
1   2   3 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-09T20:14:45.757

```
...
function test3()
    local var1, var2 = test()
    return var1, var2, 3
end

print(test3()) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-10T23:17:28.233

我还发现，使用列表末尾的函数调用，返回值不会被截断。如果参数的顺序无关紧要，这很好用。

```
function test() return 1, 2 end
function test2() return test() end
function test3() return 3, test() end

print(test()) -- prints 1 2
print(test2()) -- prints 1 2
print(test3()) -- prints 3 1 2 
```

# c# - EF 5 Database First 使用自定义验证

> ID：12807282
> 
> 赞同：2
> 
> 时间：2012-10-09T19:42:04.580
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, entity-framework

为了体验 Entity Framework 的新功能，我创建了一个新的 MVC 4 互联网应用程序。
我将它连接到现有数据库并使用 dbContext 生成器生成模型类。

通过运行应用程序，我在编辑表单时遇到了一些验证错误。作为 DateTime 字段的示例，如果将日期插入为“12/10/2012”而不是 2012-10-12（如在 SQ Server 表示法中），系统会抱怨。
我试图在项目中找到验证代码，但在生成的代码中的任何地方都找不到。

我的模型类之一如下：

```
public partial class Artist
{
    public Artist()
    {
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public Nullable<System.DateTime> DateOfBirth { get; set; }

    public virtual Countries Countries { get; set; }
} 
```

如果使用数据库优先方法，如何自定义验证错误？
如果我用我的验证属性装饰模型，那么一旦再次生成模型类，它们就会被删除。

此外，在强制使用现有数据库的“现实世界”项目中，开发模型类的最佳方法是什么？
通过添加具有相同名称的部分类来扩展自动生成的类？

编辑（介绍了视图的一部分）：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(false)

<fieldset>
    <legend>Movie</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.DateOfBirth)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DateOfBirth)
        @Html.ValidationMessageFor(model => model.DateOfBirth)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T19:50:20.027

好吧，你总是可以使用元数据类

```
public partial class ArtistMetaData
{
   [Required]
   [StringLength(20)]
   public string Name;//it can be a field instead of a property, must just have the same name and type than in your Model class
} 
```

和部分课程

```
[MetadataType(typeof(ArtistMetaData)]
public partial class Artist {
} 
```

或者（我的首选解决方案）您可以使用外部验证库，例如出色的[FluentValidation](http://fluentvalidation.codeplex.com/)

默认情况下，您有一个“基本”验证（可以在 global.asax 中删除），检查：非 nullables 值...不为 null（如默认的 Required 属性），并且值是正确的类型.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:14:08.360

检查您的浏览器和机器文化设置，然后检查 jquery 验证文化。

因为我有西班牙语配置，所以我倾向于遇到这个问题，但是 mvc 带有英文日期和货币格式等。例如 dd/mm/yyyy vs mm/dd/yyyy

您还可以根据需要使用正则表达式属性来验证字段。

# sql-server - 创建数据库脚本中的变量声明

> ID：12807287
> 
> 赞同：0
> 
> 时间：2012-10-09T19:42:17.207
> 
> 标签：sql-server, variables, sqlcmd

我有一个大型数据库创建查询，其开头如下：

```
USE Master
GO

IF EXISTS(SELECT * FROM sys.sysdatabases where name = 'MyDatabase')
    DROP DATABASE MyDatabase
GO
CREATE DATABASE MyDatabase
GO
USE MyDatabase
GO 
```

我想在开头声明一个变量，如下所示：

```
DECLARE @MainDB VARCHAR(30) = NULL
USE Master
GO

IF EXISTS(SELECT * FROM sys.sysdatabases where name = @MainDB)
    DROP DATABASE @MainDB
GO
CREATE DATABASE @MainDB
GO
USE @MainDB
GO 
```

我将从命令行执行此查询，并使用 sqlcmd 工具分配新的数据库名称。但是 sql 告诉我变量 @MainDB 没有声明。这是我能做的吗？如果不是，您将如何建议我解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:53:55.147

抱歉，您不能这样做，因为 SQL 变量只有“批处理”范围，而那些“GO”命令指示您的批处理边界。因此，每次通过 GO 时，所有变量都会被清除（它们甚至不再被声明）。

有几种方法可以解决这个问题：

1.  摆脱 GO：当我们需要存储过程（其中不能有任何 GO）而不是脚本时，我们会这样做，但它是一系列相当复杂的复杂技巧，必须相互包裹在为了把它拉下来。您必须非常熟练地使用 T-SQL 才能使用它。

2.  使用 #temp 表来保存您的值。这是有效的，因为 #temp 表有会话范围，或者只是批处理范围。

3.  我相信您也可以从 SQLCMD 使用和操作 NTDOS 环境变量，尽管我不熟悉具体如何操作。

如果您想追求其中任何一个，请告诉我哪一个，我可以通过示例更详细地解释。

* * *

糟糕，我错过了其中的“变量数据库名称”部分。也可以这样做，但是您必须将动态 SQL 添加到组合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:54:31.383

您有多个问题... `GO` 结束当前批次。所以你的变量不再可见。您需要移动声明。此外，您不能`DROP DATABASE @MainDB`，您必须使用动态查询。例如，

```
GO 
DECLARE @MainDB VARCHAR(30) = 'MyDB';
IF EXISTS(SELECT * FROM sys.sysdatabases where name = @MainDB)
BEGIN
  EXECUTE ('DROP DATABASE '+@MainDB);
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T22:00:00.003

你说你需要从命令行运行它，所以如果你有很多依赖于你已经构建的结构的代码，你可以执行以下操作：

1.  创建脚本的临时副本
2.  搜索 @MainDB 并将其替换为您作为临时脚本中的参数传入的数据库名称
3.  使用 sqlcmd 工具运行临时脚本

显然，如果您喜欢此选项，请从脚本中删除 DECLARE @MainDB varchar(30) = NULL。

如果您选择这种方法，您可以使用各种不同的技术（powershell、python、批处理文件、VBScript ...）来实现您的 3 个步骤。

VBScript 文件方法：

```
set obj = CreateObject("Scriptlet.TypeLib")  
tempsqlfile = obj.GUID & ".sql" 'get a new name for your sql file

set fso = CreateObject("Scripting.FileSystemObject")
set objFile = objFSO.OpenTextFile(tempsqlfile, ForReading) 'open the template file
strSQLText = objFile.ReadAll
objFile.Close

strNewSQLText = Replace(strSQLText, "@MainDB", Wscript.Arguments(1)) 'replace the db name
Set objFile = objFSO.OpenTextFile(tempsqlfile, ForWriting)
objFile.WriteLine strNewText 'write the new file
objFile.Close

Set Shell = WScript.CreateObject("WScript.Shell")
commandLine = "osql -E -i " & Wscript.Arguments(0) & -o " & tempsqlfile & ".rpt"
Set oExec = Shell.Exec(commandLine) 
```

为变量名道歉 - 我从不同的地方剪切和粘贴了点点滴滴，但你应该明白要点。

（另外 - 很抱歉从所有这些选项中选择了 VBScript，并且请注意，对于缺少的参数没有错误检查）

如上所述，如果您将该脚本保存为“runmystuff.vbs”，那么您可以执行以下操作：

runmystuff.vbs sqlfile.sql MagicNewDB

这将在脚本中的任何地方用 MagicNewDB 替换 @MainDB，然后使用 osql 运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T19:47:40.710

这个问题有点重提。

[如何在 T-SQL 中使用变量作为数据库名称？](https://stackoverflow.com/questions/727788/how-to-use-variable-for-database-name-in-t-sql)

简短的回答是你不能有一个可变的数据库名称。您必须将 T-SQL 放入字符串/VARCHAR(MAX)，进行查找和替换，然后执行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T18:34:49.943

找到了一种使 cmdline 变量等于 t-sql 变量的方法

```
USE master
GO
DECLARE @Mydb VARCHAR(30) = "$(mydb)"

IF EXISTS(SELECT * FROM sys.sysdatabases where name = @Mydb)
    print @Mydb
    Execute('create database ' + @Mydb) 
```

我运行的批处理文件如下所示。

```
sqlcmd -S %1 -i CreateDatabases.sql -v mydb="%2" 
```

我现在可以从 sqlcmd 运行并为 %1 输入我的服务器，为 %2 输入所需的数据库名称。

感谢大家的回复，他们都帮助我找到了正确的解决方案。

# android - Android Ant 包含 Java 库项目

> ID：12807289
> 
> 赞同：2
> 
> 时间：2012-10-09T19:42:27.287
> 
> 标签：android, ant

我正在尝试使用 Ant 编译一个 Android 项目，以便它与构建机器一起工作，但我遇到了问题。我总共有五个项目：三个只是 java 库项目，另外两个是实际的 Android 项目。实际上只有一个项目被编译和安装，但它从其他项目中提取以进行编译。

我尝试使用`android update project --name <name> --target <target> --path <path>`来生成我的 build.xml 文件。它生成 build.xml 就好了，但是当我去运行它时，它不能正确地包含我的其他项目作为依赖项。

然后我尝试使用 Eclipse 导出 build.xml 文件，该文件将正确包含依赖项，但不会生成我的 R.java 文件。

我更喜欢第二种方法，因为 Eclipse 已经处理了我的依赖项设置，但是我可以添加到 build.xml 文件中来正确生成我的 R.java 文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:36:06.877

我最终弄清楚了这一点。我最终做的是使用 Eclipse 导出工具为三个 Java 库项目导出一个 ant 构建脚本。然后我创建了一个名为 build-custom.xml 的文件，其中包含用于复制 jar 的其他目标。

接下来，我在 Android 库项目上使用 android update lib-project 命令为该项目生成 build.xml（如[http://developer.android.com/tools/projects/projects-cmdline.html](http://developer.android.com/tools/projects/projects-cmdline.html)中所指定）。为了在构建中包含 Java 库项目，您必须将它们复制到 Android 项目的 libs 文件夹中。所以我在 Android 库项目中创建了一个名为 custom_rules.xml 的构建文件，将 jar 复制到 lib 文件夹中。重要提示：还要编写一个规则，在完成后删除 jar，否则当您尝试在 Eclipse 中运行时，您将收到 Davlik Error 1。

您可能有也可能没有 Android 库项目，但主项目的步骤与库项目的步骤几乎相同。只需使用 android update project 命令，然后创建一个 custom_rules.xml 来复制相应的 jar。

编辑：

在使用 Eclipse 生成基本 Java 库项目的构建脚本后，我创建了一个 common.xml ant 构建文件。这个文件基本上是这样的：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project name="common">     
    <target name="clean">
        <delete dir="build/libs" />
        <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary1" target="clean" />
        <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary1" target="cleanup-jars" />
            <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary2" target="clean" />
        <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary2" target="cleanup-jars" />
            <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary3" target="clean" />
        <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary3" target="cleanup-jars" />
            <ant antfile="build.xml" dir="./AndroidSubProject" target="clean" />
    </target>

    <target name="samplesublibrary1">
        <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary1" target="all" />
    </target>

    <target name="samplesublibrary2">
        <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary2"     target="all" />
    </target>

    <target name="samplesublibrary3" depends="samplesublibrary2">
        <ant antfile="build.xml" dir="./SubJavaLibrary/SampleSubLibrary3" target="all" />
    </target>

    <target name="android-sub-project-copy-jars" depends="samplesublibrary1, samplesublibrary2, samplesublibrary3">
        <ant antfile="build.xml" dir="./AndroidSubProject" target="android-project-copy-jars" />
    </target>

    <target name="android-sub-project-debug" depends="android-project-copy-jars">
        <ant antfile="build.xml" dir="./AndroidSubProject" target="debug" />
    </target>

    <target name="android-sub-project-release" depends="android-project-copy-jars">
        <ant antfile="build.xml" dir="./AndroidSubProject" target="release" />
    </target>

    <target name="android-sub-project-remove-jars">
        <ant antfile="build.xml" dir="./AndroidSubProject" target="android-project-remove-jars" />
    </target>
</project> 
```

然后在 Android-Sub-Project 中，我添加了一个 custom_rules.xml 文件，其中包含以下内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?eclipse.ant.import?>
<project default="android-project-copy-jars" name="Copy required jars to lib folder">
  <target name="android-project-copy-jars">
    <copy file="../../build/libs/SampleSubLibrary1.jar" todir="libs"/>
    <copy file="../../build/libs/SampleSubLibrary2.jar" todir="libs"/>
    <copy file="../../build/libs/SampleSubLibrary3.jar" todir="libs"/>
  </target>
  <target name="android-project-remove-jars">
    <delete file="./libs/SampleSubLibrary1.jar" />
    <delete file="./libs/SampleSubLibrary2.jar" />
    <delete file="./libs/SampleSubLibrary3.jar" />
  </target>
</project> 
```

然后，我在项目根目录中创建了一个主 build.xml，其中包含并运行所有其他子 build.xml 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="all">
    <target name="debug" depends="clean, main-debug, android-project-remove-jars" />
    <target name="release" depends="clean, main-release, android-project-remove-jars" />

    <import file="common.xml" />

    <target name="clean" depends="common.clean">
        <ant antfile="build.xml" dir="./Main" target="clean" />
    </target>

    <target name="main-debug" depends="android-sub-project-debug">
        <ant antfile="build.xml" dir="./Main" target="debug" />
        <copy file="./Main/bin/main-debug.apk" todir="./build/bin" />
    </target>

    <target name="main-release" depends="android-sub-project-release">
        <ant antfile="build.xml" dir="./Main" target="release" />
        <copy file="./Main/bin/main-release-unsigned.apk" todir="./build/bin" />
    </target>
</project> 
```

希望这可以帮助！

# mysql - MySql 将日期存储为 Date 或 BigInt (Epoch)

> ID：12807314
> 
> 赞同：0
> 
> 时间：2012-10-09T19:44:21.140
> 
> 标签：mysql, sql, date, epoch

使用 MySql 时，使用`DATE`, `DATETIME`,`TIMESTAMP`数据类型存储日期和时间还是使用`BIGINT`带有纪元时间戳的数据类型更好？

各自有什么优势，性能差异是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T19:46:58.937

`date`如果您只需要日期，请使用。如果您需要日期和时间，
请使用。如果您需要对记录进行版本控制，请 使用。 如果您正在使用该格式并且不需要 1970 年之前的日期，请使用该格式。`datetime`
`timestamp`
`epoch time`

# objective-c - 以编程方式加载 Nib

> ID：12807322
> 
> 赞同：1
> 
> 时间：2012-10-09T19:45:14.883
> 
> 标签：objective-c, ios, xcode, ios5, nib

我在 Xcode 4.3.2 中工作。

我正在尝试以编程方式加载 Nib，而不是使用 Storyboard。Storyboards 似乎要简单得多，但不幸的是它们与 iOS 4 不兼容，我正在构建一个需要向后兼容的应用程序。

这是我的问题：我正在尝试加载主视图 - 一个带有绿色背景的简单视图。目前没有默认视图。

我的文件是：

AppDelegate.h/.m GreenViewController.h/.m SwitchViewController.h/.m

我想在应用程序开始时加载绿屏，所以在 AppDelegate.m 我有：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.switchViewController = [[SwitchViewController alloc] initWithNibName:@"GreenView" bundle:nil];

    //UIView *switchView = self.switchViewController.view;

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

在 SwitchViewController.m 我有：

```
- (void)viewDidLoad
{
    self.greenViewController = [[GreenViewController alloc] initWithNibName:@"GreenView" bundle:nil];
    [self.view insertSubview:self.greenViewController.view atIndex:0];
    [super viewDidLoad];
} 
```

用简单的 initWithNibName 填充默认代码。

在 GreenViewController.m 我有：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

这是一切的主要功能。当我运行该应用程序时，我立即收到错误消息：

```
2012-10-09 12:34:35.586 MyViewSwitcher[5210:f803] -[AppDelegate setSwitchViewController:]: unrecognized selector sent to instance 0x6c6c310
2012-10-09 12:34:35.587 MyViewSwitcher[5210:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[AppDelegate setSwitchViewController:]: unrecognized selector sent to instance 0x6c6c310' 
```

有人可以帮我理解我的错误的原因吗？我确保 GreenView.xib 的“自定义类”是身份检查器中的“GreenViewController”。此外，我确保“视图”的引用出口是文件的所有者。我想在我的应用启动时加载 GreenView 笔尖。最终，我将通过添加一个按钮来切换视图，但到目前为止我什至无法加载主视图。我不确定我在误解什么。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:40:04.820

问题不在于加载笔尖。问题出在这一行：

```
self.switchViewController = [[SwitchViewController alloc] initWithNibName:@"GreenView" bundle:nil]; 
```

在这里，您使用的是“点语法”，这在[*The Objective-C Programming Language*](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW17)中进行了说明。当您使用该语法设置属性时，编译器会将其转换为常规的 Objective-C 消息，如下所示：

```
[self setSwitchViewController:[[SwitchViewController alloc] initWithNibName:@"GreenView" bundle:nil]]; 
```

在运行时，系统会告诉您您的`AppDelegate`对象不理解该`setSwitchViewController:`方法。您需要使用[*The Objective-C Programming Language*](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW9)`@synthesize`中解释的指令来告诉编译器为您实现该方法：[](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW9)*`setSwitchViewController:`*

 *```
@synthesize switchViewController = _switchViewController; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:47:32.763

```
 '-[AppDelegate setSwitchViewController:]: unrecognized selector sent to instance 0x6c6c310' 
```

`setSwitchViewController:`您正在向/在您的 AppDelegate中发送消息（调用方法） 。这就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T01:25:07.473

1.  使用前请确保您`UIWindow`有`rootViewController``makeKeyAndVisible`

    [self.window setRootViewController:self.switchViewController]; [self.window makeKeyAndVisible];

2.  确保按照上面的说明合成属性。

3.  在子类中实现方法时，比如你的`SwitchViewController.m`，什么时候调用`super`方法很重要。除非您有任何特殊意图，否则几乎总是调用`super`实现先于本地`self`实现。`- (void)viewDidLoad`所以，我建议你改成`SwitchViewController.m`如下

    *   (void)viewDidLoad { [超级 viewDidLoad];

        self.greenViewController = [[GreenViewController alloc] initWithNibName:@"GreenView" bundle:nil];

        [self.view insertSubview:self.greenViewController.view atIndex:0]; }*

# asp.net-mvc - 405 消息，Web Api 不允许使用的方法

> ID：12807331
> 
> 赞同：17
> 
> 时间：2012-10-09T19:45:55.967
> 
> 标签：asp.net-mvc, asp.net-web-api

我在 API 控制器上有以下内容：

```
public void UpdateClient(Client client)
    {
        try
        {
            if (ModelState.IsValid)
            {
                db.Entry(client).State = EntityState.Modified;
                db.SaveChanges();
            }
        }
        catch
        {
            throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
        }
    } 
```

页面上有以下内容：

```
$.ajax({
            url: "api/client/UpdateClient",
            type: "PUT",
            contentType: 'json',
            data: ko.toJSON(model.selectedClient()),
            success: function (result) {
                getClients();
                $("#loader").hide();
            },
            failure: function (result) {
                alert(result.d);
                $("#loader").hide();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("An error occurred, please try again.");
                $("#loader").hide();
            }
        }); 
```

但这给出了错误 405 Method Not Allowed，任何人都可以看到我可能出错的地方吗？作为参考，api 的 url 可以，因为我也将相同的 api 控制器用于其他功能。

selectedClient() 也是通过 WebApi 接收的 Client 对象，因此应该与 PUT 完美匹配。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-29T07:17:14.257

如果您使用 IIS7 并安装了 WebDav，请尝试将其删除。我只在使用 PUT 动词时遇到了同样的错误，它解决了这个问题

更新：您可以在此处阅读有关 WebDav 的信息：[http ://www.iis.net/learn/get-started/whats-new-in-iis-7/what39s-new-for-webdav-and-iis-7](http://www.iis.net/learn/get-started/whats-new-in-iis-7/what39s-new-for-webdav-and-iis-7)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T20:45:30.717

您的 UpdateClient 操作是否有 [HttpPut] 属性？另外，您是否有将 {action} 作为 routeTemplate 的路由？例如：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

还有一件事，在你的 ajax 代码中尝试使用 'application/json' 而不是 'json'。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T20:44:27.990

看起来这两行是错误的，我将它们更改如下：

```
contentType: 'application/json',
data: "{client: " + ko.toJSON(model.selectedClient()) + "}", 
```

现在进去了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-20T23:49:10.347

给未来的疑难解答者的注意事项：当我的“Put”控制器无意中期待一个未使用的附加参数时，我收到了这个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-10T15:40:04.670

我的问题是，在项目属性下，我使用的是本地 IIS 而不是 IIS Express，它默认为端口 80，它阻止了 DELETE 请求。更改为 IIS Express 修复了它。

# javascript - 放置 Facebook 评论后重定向到网页

> ID：12807337
> 
> 赞同：1
> 
> 时间：2012-10-09T19:46:23.087
> 
> 标签：javascript, facebook

我计划在网页上安装 Facebook 评论模块/插件，假设：

[http://www.example.com/](http://www.example.com/)

是否可以将用户重定向到网站内的另一个登录页面？假设我想在点击发表评论后将它们发送到这里：

[http://www.example.com/landing-page/](http://www.example.com/landing-page/)

这可以通过 Facebook API 或其他脚本实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:00:50.227

您可以订阅 comment.create 事件，该事件在用户添加如下评论时触发：

在里面

```
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function() {
FB.init({
    appId  : 'sensored-app-id',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true  // parse XFBML
});

/* All the events registered */
FB.Event.subscribe('comment.create', function (response) {
    // Redirect to http://www.example.com/landing-page/
    window.location = "http://www.example.com/landing-page/";
});

};

(function() {
var e = document.createElement('script');
 e.src = document.location.protocol + '//connect.facebook.net/fi_FI/all.js';
e.async = true;
document.getElementById('fb-root').appendChild(e);
  }());
</script> 
```

在您的 fb 评论中，您必须像这样设置 notify="true"

```
<fb:comments numposts="10" notify="true"></fb:comments> 
```

# c# - POST 还是 GET 方法？

> ID：12807338
> 
> 赞同：1
> 
> 时间：2012-10-09T19:46:23.533
> 
> 标签：c#, asp.net

我们有一个服务提供商，允许我们连接到他的支付页面进行支付，但是他使用的代码是 php，但我们想在 asp.net 中进行。

问题是我真的不明白该方法应该是什么，`POST`或者`GET`，基本上我们需要使用底层参数（而不是查询字符串）重定向到客户端，然后我们当前调用请求的页面必须重定向到客户端页面参数也一样。

我确实得到响应女巫基本上是标记，但这不是我想要的，我希望它重定向到付款页面，有人可以告诉我我做错了什么。谢谢这是我用于该`POST`方法的代码：

```
string query = string.Format("description={0}&amount={1}&merchantIdent={2}&email={3}&transaction={4}&merchantKey={5}",
                             description.ToString(), amount.ToString(), merchantIdent.ToString(), email.ToString(), id.ToString(), merchantKey.ToString());

// Create the request back
string url = "https://www.webcash.co.za/pay";
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);

req.Method = "POST";
req.AllowAutoRedirect = true;
req.ContentType = "application/x-www-form-urlencoded";
req.ContentLength = query.Length;
req.AllowAutoRedirect = true;

StreamWriter stOut = new StreamWriter(req.GetRequestStream(),System.Text.Encoding.ASCII);
stOut.Write(query);
stOut.Close();

// Do the request
StreamReader stIn = new StreamReader(req.GetResponse().GetResponseStream());
string response = stIn.ReadToEnd();
stIn.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:50:26.847

不确定我是否完全理解您的问题，但正如您的标题所示，这是 POST 和 GET 之间的区别： GET 方法通过 url 传递变量。这可能是实际的或不切实际的（例如，如果您计划将敏感材料传递到另一个页面） POST 方法不会通过 url 传递变量，它会在幕后传递变量。您需要决定哪个更适合您的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T19:50:49.557

通常 GET 是幂等的（意味着它们不会更改数据）。如果您希望能够发出请求而不更改任何内容，请使用 GET。如果您正在执行某种更新/处理/等，请使用 POST。

# algorithm - 在近似的树皮尺度上获得等距间隔

> ID：12807340
> 
> 赞同：2
> 
> 时间：2012-10-09T19:46:26.010
> 
> 标签：algorithm, matlab, math, octave, numerical

维基百科说我们可以用以下等式近似 Bark 尺度：

`b(f) = 13*atan(0.00076*f)+3.5*atan(power(f/7500,2))`

如何在 Bark 尺度上将频谱划分`n`为相同长度的区间（区间划分点在 Bark 尺度上是等距的）？

最好的方法是解析反函数（`x`用 的函数表示`y`）。我试图在纸上做，但失败了。WolframAlpha 搜索栏也做不到。我尝试了 Octave`finverse`函数，但出现错误。

Octave 说（举个简单的例子）：

```
octave:2> x = sym('x');
octave:3> finverse(2*x)
error: `finverse' undefined near line 3 column 1 
```

这是`finverse`来自 Matlab 的描述：http: [//www.mathworks.com/help/symbolic/finverse.html](http://www.mathworks.com/help/symbolic/finverse.html)

也可以有数字方式来做到这一点。我可以想象你只是从等分`y`轴开始，通过二分搜索寻找理想的划分。但也许有一些现有的工具可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:54:25.820

这个函数不能解析倒置。您将不得不使用一些数字程序。二进制搜索会很好，但是有更有效的方法来做这些事情：研究[寻根算法](http://en.wikipedia.org/wiki/Root-finding_algorithm)。您可以将您选择的算法`b(f) = f_n`应用于每个频率间隔端点的方程`f_n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:00:41.957

您需要对这个方程进行数值求解（没有解析反函数）。设置`b`等间距的值并求解方程以找到各种`f`. 二分法有点慢，但一个很好的替代方法是布伦特的方法。见[http://en.wikipedia.org/wiki/Brent%27s_method](http://en.wikipedia.org/wiki/Brent%27s_method)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T08:40:12.380

我最终决定不使用 Bark 值近似值，而是使用临界带中心的理想值（定义为`n=1..24`）。我用`gnuplot`和 在同一张图上绘制了它们，我为更高密度的点（对于所需的`n>24`）绘制了任意选择的值。我调整了点值，`Hz`直到两条曲线大致相同。

当然**rpsmi**和**David Zaslavsky**的答案更加通用和可扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T12:11:28.033

就像你知道的那样，在（比如说）八度音程中实现 rpsmi 或 David Zaslavsky 的答案，你会做这样的事情：

```
global x0 = 0.

function res = b(f)
   global x0
   res = 13*atan(0.00076*f)+3.5*atan(power(f/7500,2)) - x0
end

function [intervals, barks] = barkintervals(left, right, n)
    global x0
    intervals = linspace(left, right, n);
    barks     = intervals;
    for i = 1:n
        x0 = intervals(i);
         # 125*x0 is just a crude guess starting point given the values
        [barks(i), fval, info] = fsolve('b', 125*x0);
    endfor
end 
```

并像这样运行它：

```
octave:1> barks
octave:2> [i,bx] = barkintervals(0, 10, 10)
[... lots of output from fsolve deleted...]
i =

 Columns 1 through 8:

    0.00000    1.11111    2.22222    3.33333    4.44444    5.55556    6.66667    7.77778

 Columns 9 and 10:

    8.88889   10.00000

bx =

 Columns 1 through 6:

   0.0000e+00   1.1266e+02   2.2681e+02   3.4418e+02   4.6668e+02   5.9653e+02

 Columns 7 through 10:

   7.3639e+02   8.8960e+02   1.0605e+03   1.2549e+03 
```

# visual-studio-2010 - 如何使用 Visual Studio 2010 创建 Oracle 数据库项目？

> ID：12807342
> 
> 赞同：1
> 
> 时间：2012-10-09T19:46:34.397
> 
> 标签：visual-studio-2010, oracle

全部，

我在 VS2008 中有 Oracle 数据库项目。现在我将我的项目升级到 VS2010。在尝试创建数据库项目时，我可以看到我无法选择除 SQL Server 之外的任何其他数据源。但在 VS2008 中，我可以选择不同的数据源。

我阅读了有关 Visual Studio 的 Toad Extension 的信息，但它也不再受支持。

[http://www.toadworld.com/Blogs/tabid/67/EntryId/519/Creating-an-Oracle-Project-with-Toad-Extension-for-Visual-Studio.aspx](http://www.toadworld.com/Blogs/tabid/67/EntryId/519/Creating-an-Oracle-Project-with-Toad-Extension-for-Visual-Studio.aspx)

[http://toadworld.com/Blogs/tabid/67/EntryId/876/What-happened-to-Toad-Extension-for-Visual-Studio.aspx](http://toadworld.com/Blogs/tabid/67/EntryId/876/What-happened-to-Toad-Extension-for-Visual-Studio.aspx)

如何在VS2010中设置oracle数据库项目。有没有办法通过TFS？

有什么建议么？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:50:40.370

我相信您可能想要安装 Oracle Data Provider for .NET。(ODP.NET)

[http://www.oracle.com/technetwork/topics/dotnet/index-085163.html](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)

编辑：您也可能想检查支持实体框架的这个

[http://www.devart.com/news/2008/directs475.html](http://www.devart.com/news/2008/directs475.html)

# visual-studio-2010 - 抑制代码分析应用程序错误

> ID：12807346
> 
> 赞同：6
> 
> 时间：2012-10-09T19:46:40.680
> 
> 标签：visual-studio-2010, crystal-reports, code-analysis

我们的winform应用程序引用的Crystal库导致代码分析出错：

> 警告 1 CA0060：找不到间接引用的程序集“BusinessObjects.Licensing.KeycodeDecoder，Version=13.0.2000.0，Culture=neutral，PublicKeyToken=692fbea5521e1304”。分析不需要此组件，但分析结果可能不完整。此程序集由以下位置引用：C:\Program Files\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Common\SAP BusinessObjects Enterprise XI 4.0\win32_x86\dotnet\CrystalDecisions.CrystalReports.Engine.dll。

在几个不同的线程中，SAP“*支持*”已经承认这是他们最终的问题 ( [http://scn.sap.com/thread/2153539](http://scn.sap.com/thread/2153539) )，尽管他们很快指出这不会影响他们的产品直接，因此修复它是低优先级的。它已被分配参考号 ADAPT01629826，但关于他们何时真正解决问题似乎仍然悬而未决。

这是**代码分析应用程序警告**( [http://msdn.microsoft.com/en-us/library/ms245349.aspx](http://msdn.microsoft.com/en-us/library/ms245349.aspx) )，而不是正常的代码分析警告。

因此，**Visual Studio 不提供通常的“Suppress Message(s)”上下文菜单**。我希望有一种方法可以使用*GlobalSuppressions*或类似的东西，但可以使用一些帮助......

即使 SAP 认为错误的装配参考对他们的产品没有功能影响是正确的，它仍然困扰着我。像原始海报一样，**我不希望代码分析中出现任何错误/警告。**

我敢肯定，其他人也遇到过这种情况——或者至少是类似的情况。你是怎么处理的呢？**有没有办法从代码分析中排除这个特定的警告，所以它不再显示？**

虽然我不喜欢硬编码排除，但它似乎是一个比等待 SAP 实际推出修复更可靠的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-17T12:58:45.073

如果不包装 fxcpcmd 或覆盖代码分析目标以拦截输出并忽略警告，则无法抑制这些。

# sql-server - T-SQL 使用 EXISTS 作为列

> ID：12807347
> 
> 赞同：13
> 
> 时间：2012-10-09T19:46:51.073
> 
> 标签：sql-server, tsql, exists

我想知道我是否可以在这样的列中使用 EXISTS （或类似的东西）：

```
SELECT Column1,
       Column2,
       EXISTS (SELECT 1 FROM Table2 T2 WHERE T2.Column = T1.Column) AS IsFlag
FROM Table1 
```

我知道我可以用 Count() 做类似的事情

```
SELECT Column1,
       Column2,
       (SELECT Count(*) FROM Table2 T2 WHERE T2.Column = T1.Column) AS IsFlag
FROM Table1 
```

但是当 Table2 很大时，这可能不是很有效

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-09T19:50:33.303

试试这个

```
SELECT Column1,
       Column2,
       CASE WHEN EXISTS (SELECT 1 FROM Table2 T2 
       WHERE T2.Column = T1.Column) then 1 ELSE 0 END AS IsFlag
FROM Table1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-09T19:50:55.453

```
CASE 
    WHEN 
        EXISTS (SELECT 1 FROM Table2 T2 WHERE T2.Column = T1.Column) 
    THEN 1 
    ELSE 0 
END AS IsFlag 
```

# jquery - jquery mobile gallery 仅显示 alt 描述的第一个单词

> ID：12807348
> 
> 赞同：0
> 
> 时间：2012-10-09T19:46:54.307
> 
> 标签：jquery, image, gallery, bind, attr

我正在使用一个名为[jQuery Mobile Gallery](http://www.irinavelychko.com/tutorials/jquery-mobile-gallery)的很棒的照片库，但是有一个问题。

如果您像这样手动将文本放入 alt 属性或 title 属性中：

`alt="Picture 1"`工作正常，但如果文本是从数据库中获取的，如下所示：

`alt= row['description']`它只取文本图片，而不是“图片 1”（`row['description']`具有正确的值，经过测试）。

所以，对于更复杂的图像描述，我总是得到第一个词；

这是代码：

```
$(function(){   

    function gonext() {
        var current = $('a.selectedimg');
        if (current.hasClass('last')) {
            if (current.hasClass('first')) {
                $('#nextbtn').button("disable");
                $('#prevbtn').button("disable");
            }else {
                var next = $('a.first')
            }
        } else {
            var next = current.next();
        }

        var src = next.find('img').attr("src");
        var alt = next.find('img').attr("alt");
        var title = next.find('img').attr("title");
        alert("gonext.title: "+ title);
        next.addClass('selectedimg');
        current.removeClass('selectedimg');
        $('#dialogcontent').empty().append('<a href="#gallerypage"><img src="' + src + '" style="width:100%; height:100%;"/></a>' );
        $('#dialoghead').empty().append('<center><h6>' + title + '</h6></center>' );

    } 

    function goprev() {
        var current = $('a.selectedimg');
        if (current.hasClass('first')) {
            if (current.hasClass('last')) {
                $('#nextbtn').button("disable");
                $('#prevbtn').button("disable");
            }else {
                var prev = $('a.last')
            }

        } else {
            var prev = current.prev();
        }
        var src = prev.find('img').attr("src");
        var alt = prev.find('img').attr("alt");
        var title = prev.find('img').attr("title");
        prev.addClass('selectedimg');
        current.removeClass('selectedimg');
        $('#dialogcontent').empty().append('<a href="#gallerypage"><img src="' + src + '" style="width:100%; height:100%;"/></a>' );
        $('#dialoghead').empty().append('<center><h6>' + title + '</h6></center>' );
    }

    $('.gallerycontent img').bind('tap',function(event, ui){
        var src = $(this).attr("src");
        var alt = $(this).attr("alt");
        var title = $(this).attr("title");

        alert("gallerycontent.title: "+title );

        $('#dialogcontent').empty().append('<a href="#gallerypage"><img src="' + src + '" style="width:100%; height:100%;"/></a>' );
        $('#dialoghead').empty().append('<center><h6>' + title + '</h6></center>' );
        $(this).parent().addClass('selectedimg');
    });

    $('#nextbtn').bind('tap',function(event, ui){
        gonext();
    });

    $('#imgshow').bind('swipeleft',function(event, ui){
        gonext();
    });

    $('#prevbtn').bind('tap',function(event, ui){
        goprev();
    });

    $('#imgshow').bind('swiperight',function(event, ui){
        goprev();
    });
}); 
```

知道为什么会这样吗？或如何解决？

谢谢。

这是 php 文件中的代码（2012 年 11 月 11 日）：

```
 $index = 1;
                    while ($row = mysql_fetch_array($result)) {
                        if ($index == 1) {
                            if ($n_reg == 1) {
                                echo "<a href=\"#imgshow\" data-transition=\"pop\" data-rel=\"dialog\" class=\"first last\" ><img src=" . $row['foto'] . " alt=" . $row['descripcion'] . " title=" . $row['descripcion'] . "/></a>"; 
                            } else {
                                echo "<a href=\"#imgshow\" data-transition=\"pop\" data-rel=\"dialog\" class=\"first\"><img src=" . $row['foto']  . " alt=" . $row['descripcion'] . " title=" . $row['descripcion'] . "/></a>";
                            }
                        } else if ($index == $n_reg) {
                            echo "<a href=\"#imgshow\" data-transition=\"pop\" data-rel=\"dialog\" class=\"last\"><img src=" . $row['foto'] ."  alt=" . $row['descripcion'] . " title=" . $row['descripcion'] . "/></a>";
                        } else {
                            echo "<a href=\"#imgshow\" data-transition=\"pop\" data-rel=\"dialog\" ><img src=" . $row['foto'] . " alt=" . $row['descripcion'] . " title=" . $row['descripcion'] . " /></a>";
                        }
                        $index++;
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:03:07.027

Without seeing the backend code, I have to guess. It looks like you are missing double quotes around the text that you want for the `alt` tag.

you have this:

```
alt=Picture 1 
```

you want this:

```
alt="Picture 1" 
```

# c# - 当发现返回一个端点列表时，它的顺序是否一致

> ID：12807352
> 
> 赞同：0
> 
> 时间：2012-10-09T19:47:02.060
> 
> 标签：c#, .net, wcf

支持发现5台服务器，S1，S2..，S5。并且有 2 个客户端，启动发现，C1 和 C2。发现完成后（假设成功），C1 和 C2 上的两个已发现代理列表的顺序是否相同？

从这个意义上说，如果 C1 重新启动发现，它的新列表是否会按照内容和顺序与原始列表匹配？

更新：要求提供代码，我挖掘了我们使用的库并找到了这个回调。这让我认为这实际上是关于它的作用，而不是其他任何东西。

```
 discoveryClient.FindProgressChanged += new EventHandler<FindProgressChangedEventArgs>(ClientFindProgressChanged); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:27:23.870

您使用的是[Ad-hoc 还是托管模式？](http://msdn.microsoft.com/en-us/library/dd456791.aspx) 在 Ad-Hoc 模式下，我看不出如何保证任何订单。在托管模式下......也许。

如果顺序很重要，则将 Linq 查询添加到发现的结果中。

# .net - .Net 移动中间件

> ID：12807360
> 
> 赞同：-3
> 
> 时间：2012-10-09T19:47:31.000
> 
> 标签：.net, mobile, middleware

我们正在寻求在 .NET 环境中实现**移动中间件解决方案。**我们希望能够编写**.NET 适配器**，从后端获取数据，然后将其传递给 Middleware 以作为**JSON**发送。

是否有任何**现有的系统**（开源或商业）提供这种移动中间件基础设施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:45:42.857

使用 MVC 4 Web API 被证明是最好的选择

# c# - 使用 OleDb 写入 excel

> ID：12807362
> 
> 赞同：2
> 
> 时间：2012-10-09T19:47:33.263
> 
> 标签：c#, oledb, export-to-excel, oledbdataadapter

我正在尝试将数据行从 sql 导出到 excel，但我的插入命令似乎每次都失败。我花了很多时间试图创建这个，但我最终还是碰壁了。

excel 文档是由 IRS 生成的，我们不能大声修改第 16 行以上的任何内容。第 16 行是标题行，下面的所有内容都需要是来自 sql 的数据。标题名称中都有空格，这似乎是我遇到麻烦的地方。

从第 16 行开始，列名称为：参加者名字、参加者姓氏、参加者 PTIN、计划编号、CE 小时奖励计划、完成日期

这就是我试图写到excel的方式

```
private void GenerateReport()
{
    FileInfo xlsFileInfo = new FileInfo(Server.MapPath(CE_REPORTS_PATH + CE_PTIN_TEMPLATE + EXTENSION));

    string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties='Excel 8.0;HDR=Yes'", xlsFileInfo.FullName);

    //create connection
    OleDbConnection oleDBConnection = new OleDbConnection(connectionString);
    oleDBConnection.Open();

    //create the adapter with the select to get 
    OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [Sheet1$A16:F16]", oleDBConnection);

    // Create the dataset and fill it by using the adapter.
    DataTable dataTable = new DataTable();
    adapter.FillSchema(dataTable, SchemaType.Source);
    adapter.Fill(dataTable);

    string[] colNames = new string[dataTable.Columns.Count];
    string[] colParms = new string[dataTable.Columns.Count];

    for (int i = 0; i < dataTable.Columns.Count; i++)
    {
        colNames[i] = String.Format("[{0}]", dataTable.Columns[i].ColumnName);
        colParms[i] = "?";
    }

    // Create Insert Command
    adapter.InsertCommand = new OleDbCommand(String.Format("INSERT INTO [Sheet1$] ({0}) values ({1})", string.Join(",", colNames), string.Join(",", colParms)), oleDBConnection);

    // Create Paramaters
    for (int i = 0; i < dataTable.Columns.Count; i++)
    {
        OleDbParameter param = new OleDbParameter(String.Format("@[{0}]", dataTable.Columns[i].ColumnName), OleDbType.Char, 255, dataTable.Columns[i].ColumnName);
        adapter.InsertCommand.Parameters.Add(param);
    }

    // create a new row
    DataRow newCERecord = dataTable.NewRow();

    // populate row with test data
    for (int i = 0; i < dataTable.Columns.Count; i++)
    {
        newCERecord[i] = "new Data";
    }
    dataTable.Rows.Add(newCERecord);

    // Call update on the adapter to save all the changes to the dataset
    adapter.Update(dataTable);

    oleDBConnection.Close();     
} 
```

调用 adapter.Update(dataTable) 时发生的错误如下

```
$exception  {"The INSERT INTO statement contains the following unknown field name: 'Attendee First Name'. Make sure you have typed the name correctly, and try the operation again."}   System.Exception {System.Data.OleDb.OleDbException} 
```

这令人沮丧，因为我直接从 colNames[i] = String.Format("[{0}]", dataTable.Columns[i].ColumnName) 获得的列名中提取每个字段。我发现我需要 [] 来说明列名中的空格，但此时我不确定问题出在哪里。当我查看 excel 文件时，一切对我来说似乎都是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:53:37.140

实际上，我为您找到了一篇已完成整个代码的 Microsoft 文章 - 您可以复制和粘贴您最喜欢的任何解决方案。这是链接：

[http://support.microsoft.com/kb/306023](http://support.microsoft.com/kb/306023)

`CopyRecordset`虽然他们确实解释了我提到的那个（使用制表符分隔的文件），但似乎是你最简单的方法。

**编辑**：为了完整起见，这是我的原始答案。请参阅上面的链接以获取更多详细信息以及可能的更好解决方案。

这不是对您问题的回答，而是对改变您的方法的建议（如果可以的话）。通过 COM 调用添加数据时，Excel 往往非常慢，我假设 OleDB 在内部使用 COM。根据我的经验，将数据输出到 Excel 的最快（同时也是最不痛苦的方法）是生成一个包含所有数据的制表符分隔的文本文件，然后将文件导入 Excel 并使用 COM 互操作在工作表上执行任何格式设置. 当我以这种方式生成 Excel 报告时，我的大多数报告的生成速度比使用 Excel COM 对象模型快近 100 倍。（我不知道这对于 OleDB 调用是否相同，因为我从未将 OleDB 与 Excel 一起使用，但我愿意打赌 OleDB 适配器在内部使用 COM。）

这也可以解决您的嵌入空间问题，因为制表符将是列分隔符。

在您的特定情况下，我会将文本文件导入 Excel 到新工作表中，然后将其复制并粘贴到 IRS 工作表中的正确位置。完成后，可以删除临时工作表。

# createprocess - 创建进程错误代码 18

> ID：12807364
> 
> 赞同：4
> 
> 时间：2012-10-09T19:47:36.867
> 
> 标签：createprocess

错误代码 18 后`CreateProcess`。为什么？

```
#include <iostream>
#include <windows.h>
#include <stdio.h>
#include <tchar.h>
using namespace std;

int main()
{
    STARTUPINFO si;   
    PROCESS_INFORMATION  pi;
    ZeroMemory(&si, sizeof(si)); // macro fills a block of memory with zeros
    ZeroMemory(&pi, sizeof(pi)); 
    si.cb = sizeof(si);

    BOOL create_proc = CreateProcess(L"c:\\windows\\system32\\cmd.exe", NULL, NULL, NULL, FALSE, 0, NULL, NULL, &si, &pi);
    //printf("Error (%d)\n", GetLastError());
    if(!create_proc)
         printf("CreateProcess failed (%d).\n", GetLastError());

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );

    //check
    printf("Error (%d)\n", GetLastError());

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-03T20:59:39.607

从这里：[https ://msdn.microsoft.com/en-us/library/ms681382(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/ms681382(v=vs.85).aspx)

您的错误代码似乎对应于，

ERROR_NO_MORE_FILES 18 (0x12) 没有更多文件。

可能是权限。

# bash - Cron 无法读取属性文件

> ID：12807372
> 
> 赞同：-1
> 
> 时间：2012-10-09T19:48:18.237
> 
> 标签：bash, shell, unix, cron, aix

我从 cron 收到这些错误消息（当我检查邮件时）

```
/usr/Mytest/Log_Deleter.sh[3]: ./Log_Deleter.prop:  not found. 
```

在我的脚本中，我...

```
#!/bin/ksh
. ./Log_Deleter.prop 
```

我的脚本和属性文件位于 /usr/Mytest

我不确定为什么 cron 不能识别这个文件。当我从文件夹执行时，它工作正常，但我不明白它为什么会导致错误。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:49:14.617

你必须这样做：

```
#!/bin/ksh

cd /usr/Mytest
. ./Log_Deleter.prop 
```

或者给出完整的 PATH ：

```
. /usr/Mytest/Log_Deleter.prop 
```

# javascript - 将 CSS 样式应用于 Javascript 中的文本？

> ID：12807373
> 
> 赞同：0
> 
> 时间：2012-10-09T19:48:19.610
> 
> 标签：javascript, html, css

有没有办法在 Javascript 中应用 CSS 样式？

假设我有一个名为“InfoFont”的 CSS 样式，我想将其应用于从 编写的文本`document.write("Information");`，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T19:53:22.883

您需要使用包含所需 CSS 类的标签来包装您要动态添加的内容。

你真的是通过添加内容`document.write`吗？

看到这样的东西会更常见：

```
var newDiv = document.createElement( "div" );

newDiv.className = "InfoFont";
newDiv.innerHTML = "[YOUR CONTENT HERE]";

document.getElementById( "[RELEVANT CONTAINER ID]" ).appendChild( newDiv ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T19:52:37.020

您需要一个像 span 或 div 这样的文档元素来封装您的文本。然后，您可以将样式应用于封装元素。

正如评论所述，您应该避免使用 document.write。如果您可以访问它们，我建议您使用 jquery 或其他框架来操作 DOM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T19:55:19.937

试试这种方式： -

```
var ele = document.createElement('div');
ele.setAttribute('id', 'ELEMENTID');
ele.setAttribute('className', 'InfoFont'); // OR  ele.className = 'InfoFont';
ele.innerHTML = "CONTENT"; 
```

> **@Matt 的评论答案是最好的答案。**

# php - AJAX/PHP 元素删除教程

> ID：12807383
> 
> 赞同：0
> 
> 时间：2012-10-09T19:48:48.237
> 
> 标签：php, ajax

我的目标有三个：

1.  使用 AJAX 将链接页面（术语表）动态加载到 index.php 的 div.sidepanel 中。词汇表术语（链接）在加载的 terms.php 中作为一个列表存放在 div.glossary 中。

2.  将 span.definition1 加载到 div.glossary 中，在它定义的术语旁边，再次使用 AJAX。span.definition1 是在单击第一个词汇表术语时生成的 php 字符串。

3.  将 span.definition2 加载到 div.glossary 中，在它定义的词汇表术语旁边，同时在单击加载定义 2 的链接时**删除**span.definition1。

我已经成功实现了这三个目标中的每一个，直到在单击新词汇表术语时删除先前加载的定义。是否有说明如何完成此操作的教程？我提供了来自 terms.php 的简短摘录，可以通过单击我网站[http://postmaterial.org/index.php](http://postmaterial.org/index.php)上的词汇表链接来加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:20:44.310

没有代码不确定。但是您应该能够使用`element.removeChild(child);`where element 是父元素，而 child 是您要删除的节点。所以：

```
<div id="parent">
   <span id="word1">Word (click me)</span>
   <span id="definition1">I am a definition, I should be deleted when necessary</span>
</div>

<script type="text/javascript">
function removedefinition() {
   var parent = document.getElementById('parent');
   var child = document.getElementById('definition1');
   parent.removeChild(child);
 }
 </script> 
```

[https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)

# java - 创建特定长度的通用数组

> ID：12807384
> 
> 赞同：2
> 
> 时间：2012-10-09T19:48:56.703
> 
> 标签：java

我需要创建一个特定长度的通用数组。

我有通用数组 T[] originalArray 并且在我的代码中的某些时候我会将 originalArray 复制到一个新数组中，所以我需要执行以下操作：

```
T[] newArray = new T[originalArray.length()]; 
```

我读过我不能在 Java 中做到这一点，但我无法提出解决方案。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:50:20.730

```
T[] newArray = Arrays.copyOf(originalArray, originalArray.length); 
```

或者

```
T[] newArray = (T[])Array.newInstance(
          originArray.getClass().getComponentType(),
          originArray.length ); 
```

（第一个解决方案是物化安全的——没关系）

# jenkins - 在詹金斯中更改报告的颜色

> ID：12807394
> 
> 赞同：2
> 
> 时间：2012-10-09T19:49:35.693
> 
> 标签：jenkins, jenkins-plugins

早上好！

是否有可能或有一些插件可以改变通过 jenkins 发送的电子邮件中的颜色，当项目构建错误时是否可以改变颜色？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:05:18.507

至少有两种方法可以处理这个问题：

1.  **根据来自 Jenkins 的电子邮件主题**在您的邮件客户端中设置规则**
    （应该在主题中找到“失败”或“成功”）**

***   使用**[Email-ext Plugin*](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)**为“成功”或“失败”发送不同的电子邮件格式 -
    只需确保将电子邮件格式设置为 HTML
    （这将允许您根据颜色格式化邮件**正文**,
    或在每个案例的主题中都有一个特殊的指示）。** 

 ***) 使用**Email-ext Plugin**设置它，安装它然后编辑你的工作：
在' **Post-build Actions** '下选择' **Editable Email Notification** '然后选择[ **Advanced...** ]
为不同的情况定义不同的邮件模板
（每个案例也可以有不同的邮件列表）。**

# html - 将许多基于属性的图像加载到 div 中

> ID：12807396
> 
> 赞同：1
> 
> 时间：2012-10-09T19:50:00.120
> 
> 标签：html, c, image, webserver, relationship

我没有服务器端编程知识，所以我有一个问题。情况如下：

我有一大组图片，大约 1000 张，它们以某种方式相互关联。我用 C 语言编写了一个函数，用于创建每张图片之间关系的索引表。很长很复杂，不用放在这里，你要知道：如果没有任何关系，索引为0，如果很接近，则上升到99，100相同图片。我可以将表格输出到任何对在线检索有用的文件中。

现在，我想将这个想法用于网站。我有一个域和一个文件系统，但我没有弄乱任何服务器脚本或任何东西，因为我不知道从哪里开始。I have an html/css setup with several divs set up in decreasing size, and my goal is that when a certain picture is selected, it will be loaded by the biggest div, and then subsequently load related images in descending order into the smaller divs . 我不确定如何做到这一点，无论是在“关系”属性方面还是在检索所述属性方面。感谢您抽出宝贵时间，我知道这是一个很长的问题，非常抱歉。

编辑：为避免混淆，我只有几个总 div，而不是一千个，哈哈

# c - “##”在C语言中是做什么的？

> ID：12807401
> 
> 赞同：0
> 
> 时间：2012-10-09T19:50:24.470
> 
> 标签：c, operators, c-preprocessor

> **可能重复：**
> [C 预处理器和连接](https://stackoverflow.com/questions/1489932/c-preprocessor-and-concatenation)
> [C 预处理器 # 和 ## 运算符](https://stackoverflow.com/questions/6595082/c-preprocessor-and-operators)

在搜索我使用（在嵌入式项目上）开发的操作系统的一些 C 代码时，我发现了以下定义语句：

```
#define concatn(s1, s2) s1 ## s2 
```

我从未见过“##”运算符，经过一番认真的谷歌搜索后，我找不到任何对它的引用。这里发生了什么？

我搜索了操作系统源代码，但找不到任何对字符串“##”的引用，该字符串被定义为其他形式的 C 运算符。这是标准 C，还是可能/可能是编译器的一个特性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:51:38.483

它是**预处理器**的一部分，标记的串联，`concatn(x,y)`并被替换为`xy`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T19:55:32.043

`##`是 C 中的*标记粘贴运算符*。它用于连接两个标记。

例子：

```
#define PASTE(front, back) front ## back 
```

然后

```
PASTE(name, 1) 
```

创建令牌`name1`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T19:51:47.137

这是标准的 c 预处理器字符串连接运算符

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T19:51:47.347

它用于连接两个标记（在本例中为 s1 和 s2）。更多细节[在这里](http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html#Concatenation)。它是标准的 C 预处理，因此每个符合标准的编译器都应该处理它。

例如：

```
concatn(a_, b) = 1; 
```

将宏变为：

```
a_b = 1; 
```

# google-bigquery - 进行 GROUP BY 时获取聚合中的第一项或最后一项

> ID：12807408
> 
> 赞同：2
> 
> 时间：2012-10-09T19:50:47.220
> 
> 标签：google-bigquery

我在 Google Groups 上遇到了以下关于在聚合中选择第一个/最后一个值的能力的旧讨论：

[https://groups.google.com/forum/?fromgroups=#!msg/bigquery-discuss/1WAJw1UC73w/_RbUCsMIvQ4J](https://groups.google.com/forum/?fromgroups=#!msg/bigquery-discuss/1WAJw1UC73w/_RbUCsMIvQ4J)

我想知道给出的答案是否仍然是最新的。更具体地说，是否有可能在不进行 JOIN 或使用嵌套记录的情况下执行以下操作：
SELECT foo, LAST(bar) last_bar FROM table GROUP BY foo HAVING last_bar = b
用于下表：

```
foo, bar  
1, a  
1, b  
2, b  
2, c  
3, b 
```

会返回：

```
foo, last_bar  
1, b  
3, b 
```

如果不可能，我正在考虑使用以下组合来做同样的事情

`GROUP_CONCAT`并`REGEXP_MATCH`在连接结束时：

```
SELECT foo, GROUP_CONCAT(bar) concat_bar from table GROUP BY foo HAVING REGEXP_MATCH(concat_bar, "b$") 
```

但这仅在按行的顺序进行聚合时才有效。是这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-01-18T00:33:26.437

我喜欢使用数组聚合来获取第一个/最后一个值：

```
SELECT foo, ARRAY_AGG(bar)[OFFSET(0)] AS bar FROM test GROUP BY foo; 
```

您还可以添加`LIMIT`到聚合：`ARRAY_AGG(bar LIMIT 1)`以使其更快。

`ORDER BY`如果要按列对其进行排序或获取最后一个值，则 可以使用它：`ARRAY_AGG(bar ORDER BY foo DESC)`

你也可以过滤掉空值`ARRAY_AGG(bar IGNORE NULLS)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:31:38.073

我试图解决类似的问题并使用 GROUP_CONCAT 得出相同的结论

试试这个：

```
SELECT foo, REGEXP_REPLACE(group_concat(bar),".*,","") as last_bar 
FROM [dataset.table] 
GROUP BY foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:14:36.707

无法保证存储在 BigQuery 中的记录的顺序，因此这可能会在某些时候失败。“最后一个条目”会永远是最大的吗？如果是这样，也许以下是您正在寻找的？

```
SELECT foo, MAX(bar) FROM test GROUP BY foo 
```

# jquery - 如何使用复选框和 .next() 在表单中显示/隐藏/切换 div

> ID：12807411
> 
> 赞同：3
> 
> 时间：2012-10-09T19:50:58.920
> 
> 标签：jquery, checkbox, toggle, next

我正在尝试使用 jquery 切换 div - 基本上想要隐藏表单的一部分，并且仅在用户选择特定复选框时显示它。

现在，我在下面有这段代码，它工作得很好，但无法弄清楚编辑它的内容和位置，以便与复选框而不是链接一起使用。另外，我宁愿不使用 ID。

这是示例代码：

```
.answer { display:none; }

$("a.question").click(function(){
 $(this).next(".answer").toggle();
}); 

<a href="#" class="question">Queston 1</a>
<div class="answer">Answer 1</div>

<a href="#" class="question">Queston 2</a>
<div class="answer">Answer 2</div> 
```

任何帮助都将不胜感激，因为这让我发疯了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:55:07.543

```
<label>Question 1:</label><input type="checkbox" class="question"/>
<div class="answer">Answer 1</div> 
```

```
$("input[type=checkbox].question").change(function(){
    $(this).next(".answer").toggle(this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:01:16.550

怎么样：

```
<input class="check" type="checkbox" >
<div class="answer">Answer 1</div>

<input class="check" type="checkbox" >
<div class="answer">Answer 2</div>​
<style type="text/css">
.answer { display:none; }
.check:checked+.answer{
display:block;
}
​
</style> 
```

并且不需要js。演示： http: [//jsfiddle.net/V9d2W/](http://jsfiddle.net/V9d2W/)
浏览器支持 '+' css 选择器 - [http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T17:33:22.863

ASP.NET：

```
 <asp:CheckBox ID="addinfoChk" runat="server" onclick="javascript:OpenPopup(this,'addinfopanel');" />
 <div id="addinfopanel" style="display: none"></div>

<asp:CheckBox ID="addChk" runat="server" onclick="javascript:OpenPopup(this,'addpanel');" />
 <div id="addpanel" style="display: none"></div> 
```

JavaScript：

```
<script type="text/javascript">
    function OpenPopup(obj, divid) {
        if (obj.checked == true)
            document.getElementById(divid).style.display = 'block';
        else {
            document.getElementById(divid).style.display = 'none';
        }
    }

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T19:54:20.043

尝试这个

```
.answer { display:none; }​

<input type="checkbox" class="question" /> : Queston 1
<div class="answer">Answer 1</div>

<input type="checkbox" class="question" /> : Queston 2
<div class="answer">Answer 2</div>​

    $(".question").click(function() {
        if ($(this).is(':checked')) {
            $(this).next(".answer").show();
        }
        else{
            $(this).next(".answer").hide();
        }
    });​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/fCarQ/1/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T19:57:09.667

修改代码：[jsfiddle](http://jsfiddle.net/86eNK/1/)

html:

```
Queston 1 <input type=checkbox />
<div class="answer">Answer 1</div>

 Queston 2<input type=checkbox />
<div class="answer">Answer 2</div>​ 
```

JS：

```
$("input[type='checkbox']").click(function(){
    if(this.checked){
            $(this).next(".answer").show();
    }
    else{
        $(this).next(".answer").hide();
    }
}); ​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T19:55:48.680

[http://jsfiddle.net/h87K2/](http://jsfiddle.net/h87K2/) ：工作小提琴

代码：

```
Queston 1<input type="checkbox" class="question" />
<div class="answer">Answer 1</div>

Queston 2<input type="checkbox" class="question" />
<div class="answer">Answer 2</div>​

$("input.question").click(function(){
 $(this).next(".answer").toggle();
}); 
​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-09T19:56:53.253

**CSS**：

```
.answer { display:none; }​ 
```

**HTML**：

```
<input type="checkbox">Question 1</input>
<div class="answer">Answer 1</div>
<br/>
<input type="checkbox">Question 2</input>
<div class="answer">Answer 2</div>​ 
```

**jQuery** :

```
$("input[type='checkbox']").on("change", function(){
 $(this).next(".answer").toggle();
}); ​ 
```

**[例子](http://jsfiddle.net/4HrXY/1/)**

# ruby-on-rails-3 - 无法使用 has_many 关联批量分配受保护的属性并创建

> ID：12807423
> 
> 赞同：0
> 
> 时间：2012-10-09T19:52:07.433
> 
> 标签：ruby-on-rails-3, activerecord

这非常奇怪。我正在升级 Rails 2.3.12 应用程序并一遍又一遍地遇到同样的问题。我被难住了，似乎没有其他东西可以触及它。

我有两个模型：

```
class User < ActiveRecord::Base
   has_many :logs, :class_name => 'UserLog'
end 
```

和

```
class UserLog < ActiveRecord::Base
  attr_accessor :site_id, :controller, :action, :url, :session

  belongs_to :user

  validates_presence_of :user
end 
```

然后在另一个控制器中我这样做：

```
def log_user_activity
   @current_user.logs.create(:site_id => @site.id, :controller => params[:controller],
   :action => params[:action], :url => request.path,
   :session => request.session_options[:id]) if @current_user
end 
```

如您所见，这非常简单，但是当我调用 log_user_activity 时，我得到了这个：

```
Can't mass-assign protected attributes: site_id, controller, action, url, session 
```

但是，如果我将所有创建或构建更改为此：

```
def log_user_activity
   log = @current_user.logs.new
   log.site_id = @site.id
   log.controller = params[:controller]
   log.action = params[:action]
   log.url = request.path
   log.session = request.session_options[:id]
   log.save
end 
```

那么它工作正常！？

有人见过这个吗？有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T19:57:29.523

在 UserLog 类中，添加以下内容：

```
attr_accessible :site_id, :controller, :action, :url, :session 
```

您必须使用的原因`attr_accessible`很可能是因为您正在使用依赖于模型存在的插件。它发生在我们所有人身上，是皇家皮塔饼）

Once `attr_accessible` is designated for a class, then any attribute that is not specified as 'accessible' will not be allowed to be updated.

# java - CDI - CODI - ViewAccessScoped on 产生 = 错误

> ID：12807427
> 
> 赞同：0
> 
> 时间：2012-10-09T19:52:15.983
> 
> 标签：java, jsf, primefaces, cdi, codi

在一个jsf页面中，我从这样的烘焙豆中获取数据

```
<p:dataList value="#{userArtifacts}" var="art" itemType="artifact" type="inset"> 
```

我有一个 java.lang.StackOverflowError，

我的支持 bean 看起来像这样，我希望有一个生产者来缓存数据，然后可能会覆盖它......

我只想在 ViewAccessScope 期间维护列表

顺便说一句，如果将我的 Producer 更改为 SessionScope 我没有问题

```
@Named
@ViewAccessScoped
public class FArtifacts  implements Serializable{

@PostConstruct
public void init()
{
    artifacts= getArtifactController().getArtifact(15);
    System.out.println("[INIT] Get All Art");

}

@Produces
@ViewAccessScoped
@Named("userArtifacts")
public List<Article> getMyArtifacts()
{

    System.out.println("[CUSTOM] Return all");
    return  artifacts;

} 
```

servlet 异常是：

```
javax.servlet.ServletException
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
    org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) 
```

循环的堆栈错误如下所示：

```
org.jboss.weld.bean.AbstractReceiverBean.getReceiver(AbstractReceiverBean.java:77)
    org.jboss.weld.bean.AbstractProducerBean$AbstractProducer.produce(AbstractProducerBean.java:317)
    org.jboss.weld.bean.AbstractProducerBean.create(AbstractProducerBean.java:307)
    org.apache.myfaces.extensions.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:69)
    org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.AbstractConversationBeanEntry.createNewBeanInstance(AbstractConversationBeanEntry.java:139)
    org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.AbstractConversationBeanEntry.getBeanInstance(AbstractConversationBeanEntry.java:84)
    org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.DefaultConversation.getBean(DefaultConversation.java:163)
    org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.GroupedConversationContext.resolveBeanInstance(GroupedConversationContext.java:185)
    org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.resolve(AbstractGroupedConversationContext.java:114)
    org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.create(AbstractGroupedConversationContext.java:79)
    org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:81)
    org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:599)
    org.jboss.weld.bean.AbstractReceiverBean.getReceiver(AbstractReceiverBean.java:77)
    org.jboss.weld.bean.AbstractProducerBean$AbstractProducer.produce(AbstractProducerBean.java:317)
    org.jboss.weld.bean.AbstractProducerBean.create(AbstractProducerBean.java:307)
    org.apache.myfaces.extensions.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:69)
    org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.AbstractConversationBeanEntry.createNewBeanInstance(AbstractConversationBeanEntry.java:139)
    org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.AbstractConversationBeanEntry.getBeanInstance(AbstractConversationBeanEntry.java:84)
    org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.DefaultConversation.getBean(DefaultConversation.java:163)
    org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.GroupedConversationContext.resolveBeanInstance(GroupedConversationContext.java:185)
    org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.resolve(AbstractGroupedConversationContext.java:114)
    org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.create(AbstractGroupedConversationContext.java:79)
    org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:81)
    org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:599) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:32:05.207

PrimeFaces 的旧版本会导致 Window-ID 参数出现问题。如果您使用的是新版本，您应该将问题报告给 PrimeFaces 团队。

# asp.net-mvc - 尝试将 FxCop 与反复升级的 MVC 一起使用

> ID：12807431
> 
> 赞同：2
> 
> 时间：2012-10-09T19:52:34.953
> 
> 标签：asp.net-mvc, fxcop

我正在尝试在已从 MVC 1 升级到 MVC 3 的项目上使用 FxCop。我第一次运行我的项目时，它要求我为其定位 MVC 3。一旦我这样做了，它会继续运行一段时间，然后让我找到 MVC 1，我觉得这很奇怪，因为我不再在这台机器上安装它并且网站运行正常。这是它给我的信息：

![FxCop 想要 System.Web.Mvc 1](../Images/0a4ca3a6468b8e49a565bd012015b074.png)

在我们的 Web.config 文件中，我们有以下内容，它是在您升级 MVC 版本时自动创建的：

```
<dependentAssembly>
  <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
  <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
</dependentAssembly> 
```

有谁知道如何摆脱这个错误，以便 FxCop 完成对这个项目的分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:11:48.553

FxCop 也有同样的问题。您是否检查过其他可能依赖于 MVC1 的程序集？AFAIK MVC1 需要 3 个程序集：

```
System.Web.Mvc  
System.Web.Routing  
System.Web.Abstractions 
```

也许路由或抽象留在您的参考文献中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:11:42.203

作为让 FxCop 运行的解决方法，您可以更新 FxCop 配置并设置以下内容：

```
<appSettings>
    <add key="AssemblyReferenceResolveMode" value="StrongNameIgnoringVersion" />
</appSettings> 
```

它目前最有可能设置为 StrongName。

允许的值为：

> **无**- 根本不匹配强名称，任何具有相同文件名的程序集都被视为匹配。
> 
> **StrongName** - 包括程序集名称、版本、文化和公钥标记在内的强名称必须完全匹配。
> 
> **StrongNameIgnoringVersion** - 包括程序集名称、文化和公钥标记在内的强名称必须完全匹配。具有相同或更高版本的程序集被视为匹配。`

但是，我会用[DotPeek 之](http://www.jetbrains.com/decompiler/)类的东西查看您的程序集，以尝试确定它为什么仍然引用旧版本。

# .net - Windows 7 64 上的 .net process.start() 32 位应用程序

> ID：12807436
> 
> 赞同：2
> 
> 时间：2012-10-09T19:52:54.827
> 
> 标签：.net, windows-7

我们创建了一个应用程序来更改 .ini 文件的 3rd 方应用程序，因此企业级用户可以访问我们安装的各种环境。在使用 Windows XP 时，这对我们来说效果很好。我最近着手使应用程序对 Windows 7 更友好，并在 c:\users\public 下查找第 3 方应用程序 .ini 文件。

3rd 方应用程序已安装并正常运行，但是当我们从 Windows 7 机器运行以下代码时，它抱怨它找不到它的 .ini 文件。

```
 manager.EnableRaisingEvents = true;
 manager.StartInfo.FileName = iniChange.getBinPath() + "\\eimngr.exe";
 manager.Start();
 appOpen++;
 magOpen++; 
```

我想知道我们是否错过了设置 StartInfo 或 Process 的某些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:19:03.250

我最好的猜测是目标应用程序找不到 INI 文件，因为它在内部使用相对路径。尝试明确设置工作目录：

```
string targetFilePath = @"c:\folder\another_folder\myapp.exe";
string targetWorkingDirectory = System.IO.Path.GetDirectoryName(targetFilePath);

ProcessStartInfo startInfo = new ProcessStartInfo()
{
    WorkingDirectory = targetWorkingDirectory,
    FileName = targetFilePath,
};

Process targetProcess = new Process();
targetProcess.StartInfo = startInfo;

targetProcess.EnableRaisingEvents = true;

// ...

targetProcess.Start(); 
```

# c# - 虚拟方法逻辑不起作用 C# .NET 4.0

> ID：12807437
> 
> 赞同：1
> 
> 时间：2012-10-09T19:52:59.173
> 
> 标签：c#, methods, virtual

我正在研究书中的一个例子，但`Pro C# and the .NET Platform`我在看不到的地方犯了一个错误。程序编译并运行，但`Manager`此示例中的对象没有返回正确的“StockOptions”值。为了简洁起见，我将尝试只发布相关代码，因为这个示例都是关于类层次结构的，并且有六个不同的类。类中的虚拟方法未`GiveBonus`在`Employee`类中正确覆盖`Manager`。

```
class Manager : Employee
{
    private int numberOfOpts;
    //the properties are inherited from Employee

    public int StockOptions { get; set; }

    //***METHODS*** this is returns the StockOptions amount as it is in the
    //  constructor, there's no logic being applied
    public override void GiveBonus(float amount)
    {
        base.GiveBonus(amount);
        Random r = new Random();
        numberOfOpts += r.Next(500);    
    }

    public override void DisplayStats()
    {
        base.DisplayStats();
        Console.WriteLine("you have {0} stock options", StockOptions);
    }

    public Manager() { }

    public Manager(string fullName, int age, int empID, float currPay, 
        string ssn, int numbofOpts) : base(fullName, age, empID, currPay, ssn)

    {
        ID = empID;
        Age = age;
        Name = fullName;
        Pay = currPay;
        StockOptions = numbofOpts;
    }
} 
```

我的 Main() 方法的片段

```
Manager chucky = new Manager("chucky", 50, 92, 100000, "333-33-3333", 9000);
chucky.GiveBonus(300);
chucky.DisplayStats();
Console.WriteLine(); 
```

我在问问题时犯了一个错误。我应该问的是为什么我必须使用

```
Console.WriteLine("you have {0} stock options", numbOfOpts); 
```

代替

```
Console.WriteLine("you have {0} stock options", StockOptions); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:56:42.253

这并不是要在 9000 中添加一个随机数 - 它是为了提供随机数的*股票期权*以及“基本”薪酬奖金：

```
public override void GiveBonus(float amount)
{
    base.GiveBonus(amount);
    Random r = new Random();

    // Note numberOfOpts, not currPay
    numberOfOpts += r.Next(500);
} 
```

不幸的是，由于我们有两个单独的字段 - 一个由自动实现的属性创建 - 它*实际上*不会更新`StockOptions`... . （我不喜欢这段代码的其他各种事情，但是嘿......）

# youtube-api - 服务不可用 503 错误，来自 Google App Engine 应用的请求

> ID：12807440
> 
> 赞同：2
> 
> 时间：2012-10-09T19:53:08.403
> 
> 标签：youtube-api

我已经使用 Google App Engine 应用程序中的 YouTube 数据 API 5 个月了，但没有收到服务不可用、503 错误响应。但是今天，我得到了这个：

```
YouTubeError: {
    'status': 503,
    'body': '<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">\n<html>\n<head><meta http-equiv="content-type" content="text/html; charset=utf-8"><title>http://gdata.youtube.com/action/GetUploadToken</title></head>\n<body style="font-family: arial, sans-serif; background-color: #fff; color: #000; padding:20px; font-size:18px;" onload="e=document.getElementById(\'captcha\');if(e){e.focus();}">\n<div style="max-width:400px;">\n <hr noshade size="1" style="color:#ccc; background-color:#ccc;"><br>\n \n \n  <div style="font-size:13px;">\n   Our systems have detected unusual traffic from your computer network.  Please try your request again later.  <a href="#" onclick="document.getElementById(\'infoDiv0\').style.display=\'block\';">Why did this happen?</a><br><br>\n   <div id="infoDiv0" style="display:none; background-color:#eee; padding:10px; margin:0 0 15px 0; line-height:1.4em;">\n    This page appears when Google automatically detects requests coming from your computer network which appear to be in violation of the <a href="http://www.google.com/accounts/TOS">Terms of Service</a>. The block will expire shortly after those requests stop.<br><br>This traffic may have been sent by malicious software, a browser plug-in, or a script that sends automated requests.  If you share your network connection, ask your administrator for help &mdash; a different computer using the same IP address may be responsible.  <a href="http://www.google.com/support/bin/answer.py?answer=86640">Learn more</a><br><br>Sometimes you may see this page if you are using advanced terms that robots are known to use, or sending requests very quickly.\n   </div><br>\n \n IP address: 74.125.19.24<br>Time: 2012-10-09T17:48:20Z<br>URL: http://gdata.youtube.com/action/GetUploadToken<br>\n </div>\n</div>\n</body>\n</html>\n',
    'reason': 'Service Unavailable'
} 
```

我正在使用 YouTube 上传用户的视频，也用于显示现有视频（用户只输入视频 URL）。有人知道它不起作用的可能原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:01:05.200

我正在使用 gdata python 库。我在视频模型中定义了 yt_service 属性：

```
def yt_service(self):
    try:
        return self._yt_service
    except AttributeError:
        yt_service = gdata.youtube.service.YouTubeService()            
        yt_service.developer_key = settings.SYNCR_YT_DEVKEY
        yt_service.email = settings.SYNCR_YT_EMAIL
        yt_service.password = settings.SYNCR_YT_PASS
        yt_service.ProgrammaticLogin()
        self._yt_service = yt_service
        return yt_service 
```

然后在创建上传表单时，查看调用`yt_service.GetFormUploadToken`以检索上传令牌。在这里失败了。

# facebook-graph-api - 我可以通过小书签生成的 div 提示用户登录 facebook 吗？

> ID：12807444
> 
> 赞同：0
> 
> 时间：2012-10-09T19:53:22.317
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, bookmarklet

我希望查看有关我的 facebook 联系人的一些信息，并且我希望将这些信息覆盖在当前打开的网站上。

目前，我正在尝试通过书签来做到这一点。

我是否可以在当前打开的网页上覆盖一个 div 并使用功能正常的 facebook 登录按钮填充它（如果用户未登录）？是否有这样的公开可用的工作示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:06:31.687

可能无法简单地将 Facebook 嵌入 iframe，因为 Facebook 通过将其放入响应标头“X-Frame-Options: DENY”来阻止人们将其页面嵌入框架或 iframe。这最有可能防止点击劫持和类似的安全漏洞。

要对此进行测试，请将 Facebook 的任何页面输入[http://savanttools.com/testframe](http://savanttools.com/testframe)

Facebook 有一个 API 可以让你做很多事情，但它需要服务器端代码，并且不能简单地用一个小书签来完成。

总有一种蛮力方法，您的服务器从您想要的任何网站上抓取数据。然后可以将该数据放入书签中。

最后，同样的事情可以通过编写插件或用户脚本来实现，而完全不使用书签。

# c - 生成范围内的随机数 [lu]

> ID：12807459
> 
> 赞同：3
> 
> 时间：2012-10-09T19:54:17.293
> 
> 标签：c, random

> **可能重复：**
> [如何从一个范围内生成一个随机数 - C](https://stackoverflow.com/questions/2509679/how-to-generate-a-random-number-from-within-a-range-c)

[我从编程珍珠](http://www.cs.bell-labs.com/cm/cs/pearls/sort.cpp)中看到了以下代码

```
int randint(int l, int u)
{   return l + (RAND_MAX*rand() + rand()) % (u-l+1);
} 
```

谁能帮我解释一下？

我们可以使用

```
return l + rand() % (u-l+1); 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:02:36.870

使用`rand() % n`获取 0 到 n-1 之间的数字的问题在于，当 n 不是 RAND_MAX 的精确除数时，它有一些偏差。n 的值越高，这种偏差就越强。

为了说明为什么会发生这种情况，让我们假设 rand() 将使用六面骰子来实现。所以 RAND_MAX 将是 5。我们想用这个骰子生成 0 到 3 之间的随机数，所以我们这样做：

```
x = rand() % 4 
```

rand 的六个结果中的每一个的 x 值是多少？

```
0 % 4 = 0
1 % 4 = 1
2 % 4 = 2
3 % 4 = 3
4 % 4 = 0
5 % 4 = 1 
```

如您所见，数字 0 和 1 的生成频率是数字 2 和 3 的两倍。

当您的用例不允许偏差时，这是计算随机数的更好方法：

```
 (int)((double)rand() / (double)RAND_MAX * (double)n) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:58:40.823

是的，没关系，检查 u>l 你只能这样做：

```
return l + (RAND_MAX*rand()) % (u-l+1); 
```

***解释：***

如果我们想在联合分布中生成一个随机整数，`[0,N]`我们`N>0`将使用：

```
 return (RAND_MAX*rand()) % (N+1); 
```

由于在您的情况下范围是一个恒定值`l`，因此我们只需将其添加到最终结果中即可。

*蟒蛇模型：*

```
>>> import random
>>> import sys
>>> for i in xrange(20):
    int(random.random()*sys.maxint%4)

0
1
2
3
1
1
2
2
3
0
3
3
0
2
3
3
1
2
2
3 
```

# javascript - 如何让 jQuery DataTables 在多个 DOM 表之间切换？

> ID：12807463
> 
> 赞同：1
> 
> 时间：2012-10-09T19:54:33.177
> 
> 标签：javascript, jquery, datatables

我有一个`<select>`并且每次用户更改其选择的选项时，我都想要一个不同的 jQuery Datatable 来绘制（使用隐藏的 DOM`<table>`作为数据源）：

```
<!-- Assume I have included jquery.dataTables.css and jquery.dataTables.js correctly. -->

<style>
    #hidden-tables {
        display: hidden;
    }
</style>

<script type="text/javascript">
    $(document).ready(function () {
        $("#table1").dataTable();
        $("#table2").dataTable();
    });
</script>

<select id="my-sel">
    <option selected="selected" id="opt1">Nothing selected</option>
    <option id="opt1">Opt1</option>
    <option id="opt2">Opt2</option>
</select>

<div id="hidden-tables">
    <table id="table1">
        <!-- Omitted for brevity -->
    </table>
    <table id="table2">
        <!-- Omitted for brevity -->
    </table>
</div>

<!-- When the user selects opt1 or opt2 in the "my-sel" <select>, then display its corresponding table here. -->
<div id="table-to-show"></div> 
```

基本上，当页面加载时，我希望`my-sel`选择显示“ *Nothing selected* ”并且不绘制表格。*当用户选择“ Nothing selected* ”以外的任何内容时，我希望适当的 jQuery DataTable 在`table-to-show`div内绘制。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:28:25.450

一种解决方案可能是

```
<div class="show">
    <table id="table1">
        <!-- Omitted for brevity -->
    </table>
</div>
<div class="hide">
    <table id="table2">
        <!-- Omitted for brevity -->
    </table>
</div> 
```

在哪里

```
.hide {display:none;} 
```

和

```
.show {display:block;} 
```

当您从选择下拉列表中选择不同的选项时，您所要做的就是切换类...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:44:55.883

尝试这个...

换这个...

```
<script type="text/javascript">
$(document).ready(function () {
    $("#table1").dataTable();
    $("#table2").dataTable();
});
</script> 
```

有了这个..

```
<script type="text/javascript">
$(document).ready(function () {
    $('#my-sel').change(function () {
        var opt = $(this).find('option:selected').html();
        if (opt !== 'Nothing selected') {
            $('#table-to-show').html('');
            var tableName;
            switch (opt) {
                case 'Opt1':
                    tableName = 'table1';
                    break;
                case 'Opt2':
                    tableName = 'table2';
                    break;
            }
            $('#' + tableName).clone(true).appendTo('#table-to-show');
            $('#table-to-show table').dataTable();
        }
    });
});
</script> 
```

还将您的更改`display:hidden;`为`display:none;` “隐藏”用于css属性“可见”而不是“显示”

希望有帮助！

# asp.net - JSON MVC 更改内容类型

> ID：12807466
> 
> 赞同：1
> 
> 时间：2012-10-09T19:54:42.147
> 
> 标签：asp.net, asp.net-mvc, razor

我有我的基本控制器并希望将 JSON 数据作为字符串返回。它不会在 AJAX 中使用。

在我看来，我有这个：

```
<script>
    var myJson = @Html.Action("JsonMethod","Controller")
    // Some JS that need JSON data...
</script> 
```

我的控制器看起来像这样

```
public ActionResult JsonMethod() {
    return Content(Json("Test").ToString());
} 
```

似乎我只需要触摸 Json 对象，它就会转到`HttpContext.Current.Response`并更改内容类型，这样`application/json`会使视图无法使用。我对 Json 对象需要一个 HttpContext 是否正确，并将通过使用它来更改内容类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:58:33.560

```
Json("Test") 
```

上面实际上是控制器上的一个方法，当调用它时，它不仅仅是将对象转换为 JSON，就像改变你找到的内容类型一样。

您可能想直接使用 JavaScriptSerializer 并将序列化的字符串放在 ViewBag 或模型中。

您也可以直接在视图中创建一个扩展方法来完成此操作。

```
public static class Helpers
{
    public static MvcHtmlString GetJson(this HtmlHelper helper, object obj)
    {
        return new MvcHtmlString(new JavaScriptSerializer().Serialize(obj));
    }
} 
```

然后在视图中。

```
<script type="text/javascript">
    var myJson = @Html.GetJson(new {test="Test Value"});

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:08:25.027

看起来是控制器上的 Content 方法根据 json 字符串解释内容类型。

尝试使用内容类型重载[http://msdn.microsoft.com/en-us/library/dd492713(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/dd492713(v=vs.98).aspx)告诉它您想要文本/纯文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T21:19:41.443

请试试这个：

```
return Content(Json("Test").Data.ToString()); 
```

您的 javascript 代码将是这样的：

```
var myJson = Test 
```

# ios - 屏幕更改后的默认 UIAccessibilityElement

> ID：12807468
> 
> 赞同：3
> 
> 时间：2012-10-09T19:54:47.937
> 
> 标签：ios, accessibility, uiaccessibility

有没有办法决定哪个元素首先获得焦点？我尝试在以下方法中使用第二个参数

```
UIAccessibilityPostNotification(
    UIAccessibilityLayoutChangedNotification, 
    element
) 
```

但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-05T15:58:12.487

使用该`UIAccessibilityPostNotification`方法是达到目的的[正确方法](http://a11y-guidelines.orange.com/mobile_EN/dev-ios.html#notify-a-content-change)。

有几种类型的更改通知，但最常用的两种是：

*   **UIAccessibilityLayoutChangedNotification**：通知页面的一部分已经改变，有 2 个可能的传入参数*（一个 NSString 或一个 UIObject）*。使用 NSString，通知的行为类似于带有 VoiceOver 发声的 UIAccessibilityAnnouncementNotification。使用 UIObject，焦点转移到用户界面元素。此通知与 UIAccessibilityAnnouncementNotification 非常相似，但应该是动态内容被删除或添加到当前视图的结果。
*   **UIAccessibilityScreenChangedNotification**：通知整个页面已更改，包括 nil 或 UIObject 作为传入参数。使用 nil 时，页面中的第一个可访问元素将获得焦点。使用 UIObject，焦点转移到带有 VoiceOver 的指定元素。此通知伴随着声音，包括宣布新页面的声音。

**您的问题显然可能是您在代码行中`element`指定的类型**，因为它看起来完全正确。

# objective-c - 使用 NSRange rangeOfString

> ID：12807470
> 
> 赞同：1
> 
> 时间：2012-10-09T19:54:51.650
> 
> 标签：objective-c, cs193p

有人可以解释 NSRange 的位置和长度代表什么。如果我在这种情况下使用它

```
NSRange range = [self.display.text rangeOfString:@"."];
if(range.location == NSNotFound){
self.display.text = [self.display.text stringByAppendingString:@"."]; 
```

该位置代表什么，有人可以解释此代码。另外，我在哪里可以找到有关位置等属性的更多信息> 我在头文件中找到了它作为 NSUInteger，但它没有描述位置的实际作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:00:05.780

根据[官方文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)：

> `rangeofString`用于查找并返回给定字符串在接收器中第一次出现的范围。
> 
> 原始字符串中第一次出现的索引将存储`location`在*`NSRange`*. 如果没有发现该方法将返回`NSNotFound`。

因此，您的代码将使用“。”附加您正在测试的字符串。如果在其中找不到此字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:00:18.213

该`location`字段是 NSRange 的位置或索引 - 在您的情况下，它是字符串“。”的索引。在原始字符串中。该`length`字段是`NSRange`实现的范围的长度。

您还可以在[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html)文档中找到定义。

# java - 如何从源代码构建 JBoss Developer Studio？

> ID：12807472
> 
> 赞同：0
> 
> 时间：2012-10-09T19:54:58.090
> 
> 标签：java, jakarta-ee, maven, jboss, redhat

再见，

有人尝试从[JDBS source-zip](https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&product=eval)（需要免费申请）提供的 source-zip 构建**JBoss Developer Studio** 吗？

在 /build-directory 中，如果我只是这样做

```
 mvn clean install 
```

它会抱怨缺少子项目。

所以我在pom中找到了评论：

```
<!-- for bootstrapping the parent and target-platform poms via Mead, we need to be able to fetch from this folder and run
    this profile (excluding all others); currently parent pom includes target-platform build too, so only need to build the parent
    mvn clean install -P parent,\!libs,\!tests,\!jmx,\!archives,\!as,\!common,\!jst,\!xulrunner,\!vpe \
    -P \!jsf,\!freemarker,\!hibernatetools,\!portlet,\!struts,\!cdi,\!birt,\!seam,\!examples \
    -P \!maven,\!ws,\!gwt,\!deltacloud,\!runtime,\!usage,\!central,\!aggregate-coverage
--> 
```

并尝试了该 mvn-command，但随后它抱怨：

```
 Child module .\parent\..\target-platform of .\parent\pom.xml does not exist 
```

我从来没有用过 Mead，也不明白关于引导和目标平台的东西......

无论如何，使这个构建工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:08:28.510

坦率地说，从来没有人要求过。

构建 JBDS 6 是一个三步过程：

*   从 github 源代码构建 JBoss Tools 组件项目（主要是从 git 获取源代码，然后`mvn clean install`

*   从 github 源构建 JBoss Tools 聚合站点（从[https://github.com/jbosstools/jbosstools-build-sites](https://github.com/jbosstools/jbosstools-build-sites)获取源）

*   从 SVN 源构建 JBDS 聚合站点 + 安装程序（从 SVN 获取源或使用源 zip）

我为此请求打开了一个 JIRA：

[https://issues.jboss.org/browse/JBDS-2456](https://issues.jboss.org/browse/JBDS-2456)

# c++ - 通过批处理文件在多个文件上添加标题

> ID：12807476
> 
> 赞同：2
> 
> 时间：2012-10-09T19:55:13.347
> 
> 标签：c++, c, windows, file, batch-file

我有一个要在其中添加标题的 .c 文件列表。这些文件位于一个文件夹中，批处理文件应为该文件夹中的每个 .c 文件添加一个标题。我很想知道，我们怎么能做到这一点。

我想插入的标题示例如下：

> ///////////////////////////////////////// ////////////////////////
> 
> 名称：汤姆沃尔沃谜语
> 卷编号：56/BS/352
> 
> ///////////////////////////////////////// ///////////////////////

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:57:31.443

您可以使用批处理脚本`for`循环来输出每个 C 源文件的头文件的内容。输出将被重定向到一个新文件中。

需要进行一些重命名才能将原始文件替换为包含标题的新文件。

要进行设置，您可以将标题文本放在文件中`header.txt`。批处理文件、标题文本文件和 C 源文件都应位于同一文件夹中。

在此过程中将备份原始 C 文件。

```
@echo off
for %%F in (*.c) do (
  echo Adding header text to C file %%F
  type header.txt "%%F" > "%%~nF.temp"
  rename "%%F" "%%~nF.bak"
  rename "%%~nF.temp" "%%F"
) 
```

# c - 使用多处理从c中的文本文件逐行读取字符

> ID：12807484
> 
> 赞同：0
> 
> 时间：2012-10-09T19:55:42.083
> 
> 标签：c, file-io, multiprocessing, fseek

您好，`null`我在阅读时遇到字符问题，并尝试`fseek()`在多进程程序中使用函数打印文件的字符。这是我的简单代码，

```
#include <stdio.h>     /* basic I/O routines.   */
#include <unistd.h>    /* define fork(), etc.   */
#include <sys/types.h> /* define pid_t, etc.    */
#include <sys/wait.h>  /* define wait(), etc.   */
#include <signal.h>    /* define signal(), etc. */
#include <pthread.h>
#include <time.h>

void print_screen(int i);
int counter=0;

int main(int argc, char* argv[]) {

    FILE* fptr;
    fptr = fopen("sample.txt","w");

    int counter = atoi(argv[1]);
    int i,k;
    int temp;
    pid_t child_pid;
    int child_status;
    char array[counter];

    srand ( time(NULL) );

    for(i=0; i<counter; i++){
        temp = rand()%4;

        if( temp==0 ) {

            fprintf(fptr,"A\n");
            array[i]='A';
            }
        else if( temp==1 ) {

            fprintf(fptr,"C\n");
            array[i]='C';
            }
        else if( temp==2 ) {

            fprintf(fptr,"G\n");
            array[i]='G';
            }
        else if( temp==3 ) {

            fprintf(fptr,"T\n");
            array[i]='T';
            }
    }
    fclose(fptr);

                for(i=1; i<=counter; i++){

                    child_pid = fork();

                       switch(child_pid) {

                        case -1:
                            printf("Error occured with fork()\n");
                            exit(1);

                        case 0: 
                            print_screen(i); /* Child Process */
                            exit(0);
                             }
            }

    wait(&child_status);
    execl("/usr/bin/killall","killall","tail",(char *) 0);
    return 0;
}

void print_screen(int i){

    char* str;
    FILE* fptr;
    fptr=fopen("sample.txt","r");

        fseek(fptr,i,SEEK_SET);
        fscanf(fptr,"%s",str);
        printf("Process Number %d, Character = %s\n",i,str);
        sleep(1);

    fclose(fptr);
    return;
    } 
```

假设我进入`./sample 10`命令行，所以程序将在 sample.txt 中打印 10 个字符，然后将创建 10 个子进程，每个子进程都尝试选择一个字符并打印到屏幕上。此外，如您所见，我发送`i`为设置偏移量的参数。但正如我提到的，它打印为空。这是该计划的前景。

```
Process Number 7, Character = (null)
Process Number 6, Character = (null)
Process Number 5, Character = (null)
Process Number 3, Character = (null)
Process Number 8, Character = (null)
Process Number 4, Character = (null)
Process Number 9, Character = (null)
Process Number 10, Character = (null)
Process Number 2, Character = (null)
Process Number 1, Character = (null) 
```

txt文件是这样的。

```
G
A
A
T
G
C
C
A
A
T 
```

如果您能提供帮助，我将不胜感激，无论如何，谢谢。

编辑：我意识到我编译就像`$ gcc sample.c -o sample -lpthread`它打印出空值一样。另一方面，我编译它时没有`-lpthread`打印字符但不正确，例如这是文本文件。

```
T
G
G
T
G 
```

终端给出这样的输出。

```
Process Number 1, Character = G
Process Number 2, Character = G
Process Number 3, Character = G
Process Number 4, Character = G
Process Number 5, Character = T 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:14:39.850

看看这个[http://www.cs.nmsu.edu/~jcook/Tools/pthreads/pthreads.html](http://www.cs.nmsu.edu/~jcook/Tools/pthreads/pthreads.html)

您可能知道 fork() 会生成调用过程的副本，并且该副本（几乎）与原始副本相同-它们仅在 child = 1 中的 fork() 不同

尝试（并告诉我它是否有效，我无法测试它:)

```
 for(i=1; i<=counter; i++){

                child_pid = fork();

                   switch(child_pid) {

                    case -1:
                        printf("Error occured with fork()\n");
                        exit(1);
                    case 0: 
                        print_screen(i); /* Child Process */
                        exit(0);
                    default: 
                        printf("...\n");
                         }
        } 
```

编辑：为我工作

编辑：好的，我做了一些测试，应该使用`if`而不是`case`（还添加了文件内容的直接输出 - 如果文件大小增长，应该删除它）；现在这就是我的代码：

```
#include <stdio.h>     /* basic I/O routines.   */
#include <unistd.h>    /* define fork(), etc.   */
#include <sys/types.h> /* define pid_t, etc.    */
#include <sys/wait.h>  /* define wait(), etc.   */
#include <signal.h>    /* define signal(), etc. */
#include <pthread.h>
#include <time.h>

void print_screen(int i);
int counter=0;

int main(int argc, char* argv[]) {

FILE* fptr;
fptr = fopen("sample.txt","w");

int counter = atoi(argv[1]);
int i,k;
int temp;
pid_t child_pid;
int child_status;
char array[counter];

srand ( time(NULL) );

for(i=0; i<counter; i++){
    temp = rand()%4;

    if( temp==0 ) {

        fprintf(fptr,"A\n");
        printf("A\n");
        array[i]='A';
        }
    else if( temp==1 ) {

        fprintf(fptr,"C\n");
        printf("C\n");
        array[i]='C';
        }
    else if( temp==2 ) {
        fprintf(fptr,"G\n");
        printf("G\n");
        array[i]='G';
        }
    else if( temp==3 ) {
        fprintf(fptr,"T\n");
        printf("T\n");
        array[i]='T';
        }
}
fclose(fptr);
            for(i=1; i<=counter; i++){

                child_pid = fork();

                    if (child_pid == -1){
                        printf("Error occured with fork()\n"); exit(-1);
                    }
                    else if (child_pid == 0){
                         print_screen(i); exit(0);
                    }
                    else{ printf("something \n"); }
        }

wait(&child_status);
execl("/usr/bin/killall","killall","tail",(char *) 0);
return 0;
}

void print_screen(int i){

char* str;
FILE* fptr;
fptr=fopen("sample.txt","r");

    fseek(fptr,i,SEEK_SET);
    fscanf(fptr,"%s",str);
    printf("Process Number %d, Character = %s\n",i,str);
    sleep(1);

fclose(fptr);
return;
} 
```

它不能正常工作（我很确定当 pthreads 同时从文件中读取时会发生某种冲突），但至少你会有一些东西可以继续使用。

我得到了这个输出：

一个

吨

一个

吨

某物

某物

某物

某物

进程号 4，字符 = A

进程号 3，字符 = A

进程号 2，字符 = T

进程号 1，字符 = T

tail：没有找到进程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T01:07:42.690

您没有在 print_screen 中为 str 分配任何内存。fscanf 要求这样做。

尝试像这样的黑客：

```
void print_screen(int i){

char str[256];  /* plenty large enough for this example */ 
```

# ios - 找不到 Facebook.h

> ID：12807489
> 
> 赞同：6
> 
> 时间：2012-10-09T19:56:05.967
> 
> 标签：ios, xcode, facebook

我正在尝试通过我从亚马逊获得的 Facebook SDK 书籍来工作。编码从 `#import "Facebook/Facebook.h"` And 开始，您几乎立即创建了 Facebook 对象。我的 SDK 中似乎没有这个文件。这本书是不是已经过时了？去年秋天刚出版...

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T20:02:32.540

以下是最新的，对我来说是一个很好的资源： [Facebook SDK 入门](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

我使用以下导入来访问 Facebook SDK：

```
#import <FacebookSDK/FacebookSDK.h> 
```

您的环境似乎没有 Facebook 框架。在这里下载[。](https://github.com/downloads/facebook/facebook-ios-sdk/FacebookSDK-3.1.1.pkg)

***更新***

我已经找到了官方的 Facebook 答案。显然，这些已弃用的标头仍可用于向后兼容。

请注意，在底部，如果在完成以下步骤后 Xcode 无法识别导入，请重新启动 XCode。

> 通过将 DeprecatedHeaders 文件夹从 FacebookSDK.framework/Versions/A/DeprecatedHeaders 文件夹拖到 Project Navigator 的 Frameworks 部分来添加标头。
> 
> 选择“为任何添加的文件夹创建组”并取消选择“将项目复制到目标组的文件夹（如果需要）”。这会将标题添加为参考。
> 
> 现在，打开您的应用程序委托头文件并将 Facebook 框架导入替换为 Facebook 头导入。
> 
> 改变：

```
#import <FacebookSDK/FacebookSDK.h> 
```

> 到：

```
 #import "Facebook.h" 
```

> 这允许您调用 FBDialog 类。Facebook.h 标头包括头文件。
> 
> 注意：如果您在 Xcode 识别 Facebook.h 文件时遇到任何问题，只需关闭并重新打开您的 Xcode 项目。

[来源](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-04T11:44:48.153

**第 1 步**：选择蓝色图标 vidhyasalai，如屏幕截图 1 所示。

**步骤 2：** 选择`Targets-> vidhyasalai -> build settings - > Search paths`（如果找不到搜索路径，请使用搜索点按搜索）

**第三步：** 选择Serch paths->Framework search paths

**第四步：** 选择并按回车（回车）键

**第5步：** 现在删除`$(PROJECT_DIR)`并按return（enter）键。现在它将为空，同时展开并检查调试，即席和发布，确保所有内容都为空。

**第6步：**对这个目标第二个图标重复5,6,7的截图步骤，展开并检查debug，adhoc和release，确保所有都是空的。

**第7步：** 右键单击框架，删除并选择移动到垃圾箱

**第 8 步：** 再次在此邮件中拖放附加的框架，您将获得类似于屏幕截图 2 的屏幕，确保“目的地”根据屏幕截图参考选择给定的单选按钮

**第 9 步：**

将框架拖到框架文件夹下的位置。清洁和建造。希望错误已清除

![在此处输入图像描述](../Images/a2b41ed0cd669edf59c7885bde8cb81c.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-02T08:17:53.297

这本书没有过时。可能您将框架添加为 cocoapods 吗？

然后要在项目中找到这个文件，你应该写：

```
#import <Facebook-iOS-SDK/FacebookSDK/FacebookSDK.h> 
```

然后只需按住“命令”按钮并按下它，您就会到达它的位置

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T20:04:30.467

您需要下载并安装 SDK，然后将 Facebokk 框架添加到您的项目中。

完成该部分后，您将能够导入 FacebookSDK。

继承人的链接[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

看视频

# .net - 如何使用 IKVMC 编译 java7 代码以获得 .NET 框架 3.5 支持？

> ID：12807490
> 
> 赞同：0
> 
> 时间：2012-10-09T19:56:10.280
> 
> 标签：.net, sql-server, clr, java-7, ikvm

我正在尝试从一些编译的代码中生成 Microsoft SQL Server 2008 Express R2 存储过程 (C#) CLR，这些代码引用使用 IKVMC 交叉编译的 dll。原始代码是用java7编写的。问题是 IKVM 给了我一个 .NET 框架 4.0 程序集。SQL Server 2008 不支持 .NET 框架 4.0！我想知道是否有办法让我的程序集交叉编译为 .NET 框架 3.5 而不是 4.0？

列出了 IKVM 支持的平台，包括我想要定位的“.NET 2.0 SP2 x64 Windows”： [http ://weblog.ikvm.net/PermaLink.aspx?guid=692505a6-f9e7-45ec-90b9-ec7a75d3b509](http://weblog.ikvm.net/PermaLink.aspx?guid=692505a6-f9e7-45ec-90b9-ec7a75d3b509)

一直在这里查看 IKVMC 选项：http: [//sourceforge.net/apps/mediawiki/ikvm/index.php ?title=Ikvmc](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Ikvmc)

我不清楚如何指定“.NET 2.0 SP2”或框架 3.5？

此外，我坚持使用 SQL Server 2008，所以我不能简单地升级到新版本来获得框架 4.0 支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:20:17.943

IKVM 是为 .net 2.0 编译的。这意味着它适用于 .NET 2.0 到 3.5 没有问题。如果您使用 .NET 4.0，那么您需要处理 app.config 文件。

如果所有需要的 dll 都在同一个目录中，那么静态加载 dll 应该不会有任何问题。

编译 dll 可能会出现问题。有关详细信息，请参阅[类加载器 wiki](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=ClassLoader)。

如果这没有帮助，您收到的错误消息可能会有所帮助。您通过邮件列表收到的对 IKVM 的最佳帮助。

# c# - XAML 布局 ItemsControl

> ID：12807491
> 
> 赞同：2
> 
> 时间：2012-10-09T19:56:13.033
> 
> 标签：c#, wpf, xaml

我在 Google 上进行了广泛搜索，并且正在努力寻找一个简单的示例来遵循 ItemsControl，我认为我需要能够执行以下操作。

我目前有一个带有可滚动列表框的网格，其中包含复选框，使用以下 XAML 布局按预期工作

```
<Grid>
    <ListBox ScrollViewer.VerticalScrollBarVisibility="Auto" 
ItemsSource="{Binding Selections}" Margin="12,22,12,94">
    <ListBox.ItemTemplate>
            <DataTemplate>
                <CheckBox IsChecked="{Binding IsChecked}" 
        Content="{Binding Path=Item.SelectionName}">
                </CheckBox>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

我现在想在每个 Checkbox 的右侧添加一个 TextBox，使其与每行 1 个 Checkbox 和 1 个 Textbox 水平对齐。我以为我必须使用 ItemsControl 来允许两个控件但使用 ItemsControl 如下我失去了滚动的能力

```
<Grid>
    <ItemsControl ScrollViewer.VerticalScrollBarVisibility="Auto" 
    ItemsSource="{Binding Selections}" Margin="12,22,12,94">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <CheckBox IsChecked="{Binding IsChecked}" 
        Content="{Binding Path=Item.SelectionName}">
                </CheckBox>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

另外，如果我尝试添加一个类似于

```
 <DataTemplate>
        <CheckBox IsChecked="{Binding sChecked}" Content="{Binding Path=Item.BookieName}" />
        <TextBox />
    </DataTemplate> 
```

我收到一个错误`The object 'DataTemplate' already has a child and cannot add 'TextBox'`

本质上，我希望它看起来像这样

![在此处输入图像描述](../Images/9bf3f7c09d1a3fc95523fead00a0643c.png)

谁能给我一些关于如何在 XAML 中构造控件以获得我想要的布局的指示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T19:59:08.230

只需在 DataTemplate 中使用 StackPanel 并将方向设置为水平。

```
 <DataTemplate>
    <StackPanel Orientation="Horizontal">
    <CheckBox IsChecked="{Binding sChecked}" Content="{Binding Path=Item.BookieName}" />
    <TextBox />
    </StackPanel>
</DataTemplate> 
```

# r - 为 r 中现有矩阵的列标题添加名称

> ID：12807493
> 
> 赞同：-1
> 
> 时间：2012-10-09T19:56:24.307
> 
> 标签：r, header, matrix

我有一个带标题的矩阵，我想将“基因”一词添加到矩阵列标题的第一个位置，基本上将该词附加到列标题的开头。

到目前为止，这是我所拥有的：我在 R 中输入了一个矩阵，

```
matrix_a <- read.table(args[1], sep='\t', header=T, row.names=1); 
```

并使用 heatmap.2 从该矩阵生成热图。然后我使用地毯变量提取相应热图的数据。

这是用于生成热图的代码：

```
result <- heatmap.2(mtscaled, Rowv=T, scale='none', dendrogram="row", symm = T, col=bluered(16), breaks = my.breaks) 
```

在将原始矩阵通过 heatmap.2 之后，我在这里提取了聚集矩阵的值：

```
new_matrix <- result$carpet
old_name <- colnames(new_matrix) 
```

在这里，我试图将名称“基因”附加到列名

```
old_name <- cat("genes",old_name)
colnames(new_matrix) <- old_name;
write.table(new_matrix, file="data_result3.txt",sep = " \t",col.names = T, row.names = T); 
```

当我尝试使用以下方法将“基因”附加到标题时：

```
old_name <- cat("genes",old_name) 
```

标题已正确打印到屏幕上，但是当我检查结果文件时，会打印矢量编号：

“V1” “V2” “V3” “V4” “V5” “V6”

相反，我希望结果看起来像：

基因 Pacs-11 Pacs-2 PC06E7.3 PC49C3.3 Pceh-60 PF52C6.12

通过这种方式，基因出现在矩阵标题的其余部分之前。

这是我的数据集的链接： [完整数据集](http://pastebin.com/xaXbPpFM)

这是运行`dput(head(new_matrix))` [dput 输出后的数据集](http://pastebin.com/gN8vy6Hu)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:11:59.983

```
# to have a space between gene and column_name 
old_name <- paste("genes", old_name, sep=" ") 
```

编辑（根据您的新评论），也许您需要：

```
old_name <- c("genes", old_name) 
```

这是一个简单的例子

```
> test <- matrix(1:50, ncol=5)
> test
      [,1] [,2] [,3] [,4] [,5]
 [1,]    1   11   21   31   41
 [2,]    2   12   22   32   42
 [3,]    3   13   23   33   43
 [4,]    4   14   24   34   44
 [5,]    5   15   25   35   45
 [6,]    6   16   26   36   46
 [7,]    7   17   27   37   47
 [8,]    8   18   28   38   48
 [9,]    9   19   29   39   49
[10,]   10   20   30   40   50
> colnames(test) <- c("genes", paste("V", 1:4))
> test
      genes V 1 V 2 V 3 V 4
 [1,]     1  11  21  31  41
 [2,]     2  12  22  32  42
 [3,]     3  13  23  33  43
 [4,]     4  14  24  34  44
 [5,]     5  15  25  35  45
 [6,]     6  16  26  36  46
 [7,]     7  17  27  37  47
 [8,]     8  18  28  38  48
 [9,]     9  19  29  39  49
[10,]    10  20  30  40  50

# to only add "genes" as the first column's name
colnames(test) <- c("genes", colnames(test)[-1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:33:21.083

我能够通过打印出第一行的基因然后剩下的来让它工作：

```
new_matrix <- result$carpet
old_name <- colnames(new_matrix)
sink("data_result3.txt")

cat(c("genes",old_name), "\n")

for (i in 1:nrow(new_matrix))
{
    cat (old_name[i], new_matrix[i,], "\n")
}

sink() 
```

# r - 使用 R、RCurl 和 SSOAP 访问 Web 服务 - '.getClassFromCache(Class, where) 中的错误'

> ID：12807496
> 
> 赞同：3
> 
> 时间：2012-10-09T19:56:34.423
> 
> 标签：r, soap, ubuntu-12.04

我对使用 R 比较陌生，我正在尝试访问 Web 服务（AILUN），但我遇到了错误，这可能是相当简单的事情。

我正在使用 Ubuntu 12.04 和 R 版本 2.15.1

[我已经从http://www.omegahat.org](http://www.omegahat.org)安装了包“SSOAP”的所有先决条件

这是 R 命令行的分步操作。这些文件是从[http://ailun.stanford.edu/webservice.php下载的](http://ailun.stanford.edu/webservice.php)

```
getwd()
[1] "/home/gserver/Webservice"
library(SSOAP)
platformAnnotation_FindGPL <- function(array_send,ratio)
 {
 AILUN <- SOAPServer("http://ailun.stanford.edu/WebServ/Platform_Annotation.php")
 gpl_info <- .SOAP(AILUN, "platformAnnotation_FindGPL",templfile=array_send ,matchRatio=ratio, action="/Platform_Annotation.php")
 return (gpl_info)

 }
 con <- file("probe_ID.txt", "r")
 array1 <- readLines(con)
 ratio <- 30
 result <- platformAnnotation_FindGPL(array1,ratio)
Error in .getClassFromCache(Class, where) : 
  attempt to use zero-length variable name 
```

非常感谢任何建议或帮助！

# jquery - 可以将 jquery 对话框与 asp.net 用户控件一起使用吗？

> ID：12807498
> 
> 赞同：1
> 
> 时间：2012-10-09T19:56:40.293
> 
> 标签：jquery, asp.net, jquery-ui, jquery-ui-dialog

我试图在 jquery 对话框弹出窗口中打开一个用户控件，但是当我这样做时，没有任何服务器端事件触发，我猜 UpdatePanels 也将被禁用。

以前有人遇到过这个问题，有没有办法确保用户控件按预期工作？

这是我的代码。用户控件本身是一个图像上传器，具有三个更新面板，以及一些带有服务器端点击事件的按钮/图像按钮。

```
<a href="#" id="imgDialog">Open Gallery</a>  
<div id="ImagePopup" style="display:none">
    <uc1:ImageGallery ID="ImageGallery1" ImageSectionID="1" runat="server" />    
</div>  
<script type="text/javascript">
    $(document).ready(function () {

        $("#imgDialog").click(, function (e) {
            $('#ImagePopup').dialog({
                bgiframe: true,
                modal: true,
                show: ("slide", { direction: "down" }, 200),
                hide: ("slide", { direction: "up" }, 200),
                showOpt: { direction: 'up' },
                width: 700,
                close: function (event, ui) {
                }
            });
            e.preventDefault();
        });
    });
</script> 
```

我很高兴将控件移动到 aspx 页面并在必要时使用 iframe，但在我这样做之前想先检查一下。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:24:49.997

您需要将对话框附加到表单才能触发事件。通过添加 appendTo 行来做到这一点，如下面的代码：

```
$("#imgDialog").click(, function (e) {
            $('#ImagePopup').dialog({
                bgiframe: true,
                ...........
                close: function (event, ui) {
                }
            });
            e.preventDefault();
            $('#ImagePopup').parent().appendTo(jQuery("form:first"));
        }); 
```

我已将 Juery UI 对话框与服务器控件一起使用，包括用于文件上传的控件。我向你保证这是可能的。

我不确定，但也许你的对话框只会打开一次。如果发生这种情况，请尝试定义关闭函数，例如：

```
close: function (event, ui) {
                    $(this).remove();
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:01:35.123

The problem is when you put the server controls in the jQuery popup it will remove the controls from the `form runat="server"` and place it outside the form..

So because your controls are not inside the `form runat="server"` the server side events will not fire.

One workaround for this kind of issues is explicitly clone the wrapper after the usercontrol is loaded and append it to the `form runat="server"` . This should solve your problem..

You can check this with Firebug or any developer tools that the popup will be outside the form..

# android - Adobe AIR Captive 运行时很大.. 反正要缩小吗？

> ID：12807501
> 
> 赞同：2
> 
> 时间：2012-10-09T19:56:51.210
> 
> 标签：android, apache-flex, air, adobe, flex-mobile

我正在使用 Adob​​e AIR，并开发了一个利用空气和本机功能 (Android) 的应用程序。应用程序编译良好，一切正常，但应用程序的大小存在问题。

目前该应用程序约为 24.2MB。我们已经尽我们所能在 Native/Air 级别缩小它，但我们仍然希望进一步缩小它。我似乎找不到太多关于如何缩小强制运行时（当前为 8+MB）或我们可以采取哪些其他步骤来使其更小的信息。任何人都可以提供一些可用于解决此问题的选项吗？

谢谢阅读，

JoxTraex

# data-binding - Windows 8 中的 XAML 模板绑定

> ID：12807503
> 
> 赞同：1
> 
> 时间：2012-10-09T19:56:55.810
> 
> 标签：data-binding, windows-8, datatemplate

我正在浏览 Windows Store Sample Application XAML Twitter Client 1，以在我自己的应用程序中获得相同的功能。但我无法在 1 对 1 示例页面中进行绑定工作。

这是我显示朋友的网格：

```
 <GridView x:Name="FriendsGrid" 
                  Grid.Row="2" 
                  Grid.Column="1" 
                  HorizontalAlignment="Left" 
                  VerticalAlignment="Top" 
                  Margin="10,10,0,0"
                  ItemsSource="{Binding Friends}" 
                  ItemTemplate="{StaticResource FriendItemTemplate}" 
                  Grid.ColumnSpan="2">
        <GridView.DataContext>
            <Model:FriendsViewModel/>
        </GridView.DataContext> 
```

绑定模板：

```
<Page.Resources>
    <DataTemplate x:Key="FriendItemTemplate">
        <Grid Height="200" Width="300">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Image HorizontalAlignment="Left" 
                       Height="80" Width="130" 
                       Margin="10,10,0,0" 
                       VerticalAlignment="Top" 
                       Source="{Binding RealPhoto}" 
                       Stretch="UniformToFill"/>

            <TextBlock Grid.Column="1" 
                           HorizontalAlignment="Left" 
                           Margin="10,10,0,0" 
                           TextWrapping="Wrap" 
                           VerticalAlignment="Top" 
                           Height="80" 
                           Width="130" 
                           Text="{Binding FirstName}"/>

            <TextBlock HorizontalAlignment="Left"
                           Margin="10,10,0,0" 
                           Grid.Row="1" 
                           TextWrapping="Wrap"
                           Text="{Binding LastName}"
                           VerticalAlignment="Top"
                           Width="280" Height="80"
                           Grid.ColumnSpan="2" />
        </Grid>
    </DataTemplate>
</Page.Resources> 
```

在我的代码隐藏文件中：

```
 private FriendsViewModel _model;

    public MyPage()
    {
        this.InitializeComponent();
        _model = new FriendsViewModel();

        FriendsGrid.DataContext = _model;
    } 
```

比我填充模型，在应用程序中我看到我添加的项目数完全相同，但项目是空的。使用调试我看到，该模型不是空的。此外，当我在模板中硬编码值时，它们是可见的。

[GitHub上的测试项目](https://github.com/xyligan/App3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:09:57.620

我忘记将 getter 和 setter 添加到模型的属性中。最初我有这个：

```
public double Uid; 
```

比我加的 {get; 放;}

```
[DataContract]
public class Friend
{
    [DataMember(Name = "uid")] 
    public double Uid { get; set; }

    [DataMember(Name="first_name")]
    public string FirstName { get; set; }

    [DataMember(Name="last_name")]
    public string LastName { get; set; }

    [DataMember(Name="online")]
    public bool Online { get; set; }

    [DataMember(Name = "photo")]
    public string Photo { get; set; }

    public ImageSource RealPhoto { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:19:13.490

要查看视图模型中的更改，您需要实现`INotifyPropertyChanged`. `NotifyPropertyChanged`这样做的一部分是在其值更改时调用属性。

# c++ - c++ DLL\静态库名称问题

> ID：12807504
> 
> 赞同：0
> 
> 时间：2012-10-09T19:56:56.677
> 
> 标签：c++, dll, static-libraries

我有一个让我完全目瞪口呆的问题，我希望有人能指出我正确的方向。

我有一个 DLL，其中链接了一个静态库。在 DLL 中，我有一个具有以下签名和开头的函数：

```
CellMatrix BasisSwapFlows(double spread, const std::string & convention, int startDate, int endDate, bool forceEOM, const CellMatrix & returnSide, bool explode)
    CashFlow::Vector flows(basisSwapFlows(spread, getBasisSwapConvention(convention), XLDate(startDate), XLDate(endDate), forceEOM));
    .... 
```

在那里，我从带有签名的静态库中调用一个函数：

```
CashFlow::Vector basisSwapFlows(double spread, const BasisSwapConvention & convention, const XLDate & startDate, const XLDate & endDate, bool forceEOM) 
```

当我在发布模式下编译并运行它时，然后在调用静态库期间，第一个参数（spread）似乎未初始化。但是，在调用站点（在 DLL 中）显然是这样。这在调试模式下不会发生。此外，如果在调用静态库之前我制作了参数的副本，即：

```
double spread_loc(spread);
CashFlow::Vector flows(basisSwapFlows(spread_loc, getBasisSwapConvention(convention), XLDate(startDate), XLDate(endDate), forceEOM));
    .... 
```

并通过，问题不会发生。最后，如果我将静态库函数的名称修改为 basicSwapFlows_v2，问题再次消失。但是，对参数重新排序没有任何作用。

我正在使用 VS2010 C++ 编译器。如果我可以提供任何其他信息，请告诉我。

编辑：我还发现，当我在两个库的发布版本中关闭优化时，这个问题就消失了。事实上，只要禁用 DLL 中的优化，问题就会消失。

编辑2：还发现只是关闭整个程序优化但离开每个项目的完全优化可以解决问题。

编辑 3：保留所有优化但通过 const ref 获取参数也可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:01:16.060

这很可能是使用不同版本的 stl 的问题。当您使用运行时 c++ 库时，在客户端和链接库中使用具有相同选项的相同编译器至关重要。您是否有可能使用客户端的发布版本或 Visa versea 调用库的调试版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:22:16.027

DLL 和静态库必须在相同的条件下编译，即内存对齐（字节、字、长）、调用内容（这里可能满足）和相同的类型长度（例如`int`在一个编译器上可能需要 4 个字节/开关和另一个 2 个字节）。

# java - 休眠集合未在子移动时更新

> ID：12807511
> 
> 赞同：2
> 
> 时间：2012-10-09T19:57:39.727
> 
> 标签：java, hibernate

我继承了休眠映射，并且无法将子节点从一个父节点移动到另一个父节点。要么我得到一个重复的引用，要么我得到一个错误。

我在一棵树上有位置。我想将一个叶子节点移动到另一个叶子位置。在代码中我试图这样做：

```
GeographicLocation oldParent = location.getParent();
location.setParent(newParent);
newParent.getChildren().add(location);
oldParent.getChildren().remove(location); 
```

原因：

```
org.hibernate.ObjectDeletedException: deleted object would be re-saved by cascade (remove deleted object from associations): [com.test.GeographicLocation#11] 
```

如果我删除 line `oldParent.getChildren().remove(location)`，`newParent`节点正确指向孩子，但`oldParent`仍然有对孩子的引用（！）。

来自休眠配置文件的片段：

```
<class name="GeographicLocation" table="GeographicLocation">
  <id column="GeographicLocationId" name="geographicLocationId" type="java.lang.Long">
    <generator class="native">
      <param name="sequence">GeographicLocationId</param>
    </generator>
  </id>

<many-to-one class="com.test.GeographicLocation"
   foreign-key="ParentFK" name="parent">
  <column name="parent"/>
</many-to-one>

<bag cascade="all,delete-orphan" inverse="true" lazy="false" name="children">
  <key column="parent" not-null="true"/>
  <one-to-many class="com.test.GeographicLocation"/>
</bag> 
```

我使用 Hibernate 的时间不长。我的理解是`location`，作为托管对象的节点在修改时会自行保存。由于休眠配置文件指定`cascade=all`对集合的更改也将保存对子项的更改。但是，我似乎找不到删除旧参考的合法方法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:11:09.080

我会`delete-orphan`从映射中删除 ，因为它说一旦你从集合中删除一个元素，它就应该被删除（这显然不是你想要的）。

# c++ - lcov 问题：奇怪的重复构造函数标记为未覆盖和函数未标记为已覆盖，即使它的行已被执行

> ID：12807512
> 
> 赞同：5
> 
> 时间：2012-10-09T19:57:48.487
> 
> 标签：c++, constructor, code-coverage, definition, lcov

在我寻求通过启动一个小型 C++ 测试项目并以 100% 的覆盖率运行来了解更多关于自动化测试的信息时，我遇到了以下问题——即使我所有的实际代码行和所有执行分支都被测试覆盖了, lcov 仍然报告两行未经测试（它们只包含函数定义），以及一个“重复”构造函数方法，即使它与我的“真实”构造函数（唯一一个曾经定义和使用过的构造函数）完美匹配，也应该是未经测试的。

（跳至编辑最小复制案例）

如果我使用 gcovr python 脚本生成相同的覆盖率统计信息（来自相同的确切来源，.gcno 和 .gcda 文件）并将结果传递给 Jenkins Cobertura 插件，它在所有方面都给了我 100% - 行、条件和方法.

这就是我的意思：

Jenkins Cobertura 覆盖页面：[http://gints.dyndns.info/heap_std_gcovr_jenkins_cobertura.html](http://gints.dyndns.info/heap_std_gcovr_jenkins_cobertura.html)（一切都是 100%）。

使用 lcov 处理的相同 .gcda 文件：http://gints.dyndns.info/heap_std_lcov.html [（](http://gints.dyndns.info/heap_std_lcov.html)两个函数定义行标记为未执行，即使这些函数中的行被完全覆盖，以及函数 Hit = functions Total - 1）。

来自 lcov 的该源文件的函数统计信息：http://gints.dyndns.info/heap_std_lcov_func （显示了两个相同的构造函数定义，都引用文件中的同一行代码，其中一个标记为命中 5 次，另一个0 次）。

如果我查看中间 lcov .info 文件：[http://gints.dyndns.info/lcov_coverage_filtered.info.txt](http://gints.dyndns.info/lcov_coverage_filtered.info.txt)我看到那里也有两个构造函数定义，两者都应该在同一行：FN:8 ,_ZN4BBOS8Heap_stdC1Ev & FN:8,_ZN4BBOS8Heap_stdC2Ev。

哦，不要介意 .uic 包含/析构函数周围的混乱，这只是处理[gcov 报告的析构函数中的分支是什么的一种肮脏方式？](https://stackoverflow.com/questions/7199360/what-is-the-branch-in-the-destructor-reported-by-gcov)当我拍摄这些文件快照时，我碰巧正在尝试。

有人对如何解决这个问题有建议吗？C++ 编译器在这里做了一些“幕后”魔术吗？（出于特殊目的，我应该确保从我的测试中调用的构造函数的额外副本，也许？）常规函数定义呢？即使主体已经过全面测试，定义行怎么可能未经测试？这仅仅是lcov的问题吗？欢迎提出任何建议 - 我想了解*为什么*会发生这种情况，以及我的测试是否确实有一些功能未被发现并且 Cobertura 没有抱怨......或者如果没有，我如何让 lcov 理解这一点？

编辑：在下面添加最小的重现场景

lcov_repro_one_bad.cpp：

```
#include <stdexcept>
class Parent {
public:
    Parent() throw() { }
    virtual void * Do_stuff(const unsigned m) throw(std::runtime_error) =0;
};

class Child : public Parent {
public:
    Child() throw();
    virtual void * Do_stuff(const unsigned m)
        throw(std::runtime_error);
};

Child::Child()
    throw()
    : Parent()
{
}

void * Child::Do_stuff(const unsigned m)
    throw(std::runtime_error)
{
    const int a = m;
    if ( a > 10 ) {
        throw std::runtime_error("oops!");
    }
    return NULL;
}

int main()
{
    Child c;
    c.Do_stuff(5);
    try {
        c.Do_stuff(11);
    }
    catch ( const std::runtime_error & ) { }
    return 0;
} 
```

生成文件：

```
GPP_FLAGS:=-fprofile-arcs -ftest-coverage -pedantic -pedantic-errors -W -Wall -Wextra -Werror -g -O0

all:
    g++ ${GPP_FLAGS} lcov_repro_one_bad.cpp -o lcov_repro_one_bad
    ./lcov_repro_one_bad
    lcov --capture --directory ${PWD} --output-file lcov_coverage_all.info --base-directory ${PWD}
    lcov --output-file lcov_coverage_filtered.info --extract lcov_coverage_all.info ${PWD}/*.*
    genhtml --output-directory lcov_coverage_html lcov_coverage_filtered.info --demangle-cpp --sort --legend --highlight 
```

这是我从中得到的报道： http: [//gints.dyndns.info/lcov_repro_bin/lcov_coverage_html/gints/lcov_repro/lcov_repro_one_bad.cpp.gcov.html](http://gints.dyndns.info/lcov_repro_bin/lcov_coverage_html/gints/lcov_repro/lcov_repro_one_bad.cpp.gcov.html)

如您所见，所谓的未命中行是函数可能抛出的异常的定义，并且 Child 的额外未命中构造函数仍然存在于函数列表中（单击顶部的函数）。

我尝试从函数定义中删除 throw 声明，这会处理函数声明中未执行的行：http: [//gints.dyndns.info/lcov_repro_bin/lcov_coverage_html/gints/lcov_repro/lcov_repro_one_v1.cpp。 gcov.html](http://gints.dyndns.info/lcov_repro_bin/lcov_coverage_html/gints/lcov_repro/lcov_repro_one_v1.cpp.gcov.html)（如您所见，额外的构造函数仍然存在）。

我尝试将函数定义移动到类主体中，而不是稍后定义它们，这样就摆脱了额外的构造函数：http: [//gints.dyndns.info/lcov_repro_bin/lcov_coverage_html/gints/lcov_repro/lcov_repro_one_v2.cpp。 gcov.html](http://gints.dyndns.info/lcov_repro_bin/lcov_coverage_html/gints/lcov_repro/lcov_repro_one_v2.cpp.gcov.html)（不过，Do_stuff 函数定义仍有一些奇怪之处，如您所见）。

然后，当然，如果我同时做上述两个，一切都很好： http: [//gints.dyndns.info/lcov_repro_bin/lcov_coverage_html/gints/lcov_repro/lcov_repro_one_ok.cpp.gcov.html](http://gints.dyndns.info/lcov_repro_bin/lcov_coverage_html/gints/lcov_repro/lcov_repro_one_ok.cpp.gcov.html)

但我仍然不知道这是什么根本原因......而且我仍然希望将我的方法（包括构造函数）定义在一个单独的 .cpp 文件中，而不是在类主体中，我确实想要我的具有明确定义的异常的函数可以抛出！

这是源代码，以防你想玩这个： http: [//gints.dyndns.info/lcov_repro_src.zip](http://gints.dyndns.info/lcov_repro_src.zip)

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T11:20:01.550

好的，在四处寻找和阅读 C++ 异常声明之后，我想我明白发生了什么：

*   就未命中的 throw 声明而言，这里似乎一切实际上都是正确的：函数 throw 声明应该向输出对象文件添加额外的代码，以检查是否抛出了非法（就 throw 声明而言）异常抛出. 由于我没有测试发生这种情况的情况，因此该代码从未执行过，并且这些语句被标记为未命中是有道理的。尽管无论如何这里的情况远非理想，但至少可以看出这是从哪里来的。

*   就重复的构造函数而言，这似乎是 gcc 的一个众所周知的事情，并且有长期的讨论（以及各种尝试解决由此产生的目标代码重复的补丁）： http: [//gcc.gnu.org/bugzilla/show_bug .cgi?id=3187](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=3187) - 基本上，创建了两个版本的构造函数 - 一个用于此类，一个用于子类，如果你想要 100% 的覆盖率，你需要同时练习这两个版本。

# knockout.js - 在 foreach 期间正在触发单击，但在渲染完成后不会触发

> ID：12807513
> 
> 赞同：2
> 
> 时间：2012-10-09T19:57:52.597
> 
> 标签：knockout.js

这是正在发生的事情的一个jsfiddle。

这不是我正在寻找的行动。

我想要它，以便在呈现表格并且用户单击 tr 后应该显示信息......

渲染期间不应调用信息。

有人知道我在做什么错吗？

**编辑** [http://jsfiddle.net/yG6Tg/2/](http://jsfiddle.net/yG6Tg/2/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T20:22:41.720

没关系，我想通了。

因为我有：

```
<tbody data-bind="foreach: venue">
    <tr data-bind="click:$parent.info($data)"> 
```

它会自动调用该事件。我现在意识到我不需要手动传递数据，因为“this”将与函数本身绑定到数据。以下是解决方案：

```
<tbody data-bind="foreach: venue">
        <tr data-bind="click:$parent.info"> 

info = function() {alert(this.name);} 
```

# sql - SELECT 中表名后的 SQL Server 额外文本

> ID：12807514
> 
> 赞同：2
> 
> 时间：2012-10-09T19:57:58.400
> 
> 标签：sql, sql-server-2008

我发现了一条 SQL 语句，其效果如下：

```
SELECT * FROM Users x 
```

我的问题是：什么是`x`？我以前从未见过这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T19:58:33.847

`x`是表的别名`Users`。

[使用表别名](http://msdn.microsoft.com/en-us/library/ms187455%28v=sql.105%29.aspx)

> 通过为表指定别名（也称为相关名称或范围变量）可以提高 SELECT 语句的可读性。可以使用或不使用 AS 关键字来分配表别名：

```
SELECT * FROM Users x

SELECT * FROM Users AS x 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T19:58:49.697

这是一个别名。该`AS`关键字是可选的，已被省略，但与以下内容相同：

```
SELECT * FROM Users AS x 
```

这意味着您可以（在 SQL 的某些实现中，SQL Server 是其中之一，*必须*）`x`在查询的其余部分中使用来引用`Users`此处指定的表。例如：

```
SELECT x.MyColumn
FROM Users x
WHERE x.AnotherColumn = 42 
```

别名有三种一般用例：

1.  可读性。对于较长的表名或名称会被多次使用时，可以提高可读性。例如，想象以下没有别名的情况：

    ```
    SELECT x.SomeColumn, x.SomeOtherColumn, x.AThirdColumn
    FROM [my crAzy Table Name with spaces in it] x
    WHERE x.AnotherColumn = 42 
    ```

2.  消歧。常用于自连接，注意两次使用同一张表。您必须使用别名来区分`Users`表的两个实例：

    ```
    SELECT x.SomeColumn, COUNT(y.SomeColumn)
    FROM Users x
    INNER JOIN Users y ON x.SomeOtherColumn < y.SomeOtherColumn
    GROUP BY x.SomeColumn 
    ```

3.  FROM 或 JOIN 子句（也称为派生表）中的子查询*必须*具有名称。这是通过指定别名来完成的：

    ```
    SELECT x.SomeColumn
    FROM
    (
        SELECT SomeColumn
        FROM Users
    ) x 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T19:58:45.593

它只是用户的别名，可以在查询中使用。

想象 ：

您想从 2 个表中检索数据，两个表中都有一个 Id 列

如果您想检索这些 Id，则必须在列名前加上前缀以避免混淆。

使用别名：

```
select t1.Id, t2.Id
from mytableWithAReallyComplicatedName t1
inner join mySecondtableWithAReallyComplicatedName t2 on t1.Id = t2.Id 
```

无别名

```
select mytableWithAReallyComplicatedName.Id, mySecondtableWithAReallyComplicatedName.Id
from mytableWithAReallyComplicatedName 
inner join mySecondtableWithAReallyComplicatedName on mytableWithAReallyComplicatedName.Id = mySecondtableWithAReallyComplicatedName .Id 
```

如果表名很长，则使用第二个版本，查询可能会较不实用。

# jquery - 两个事件触发，我如何忽略禁用/取消绑定另一个

> ID：12807534
> 
> 赞同：0
> 
> 时间：2012-10-09T19:59:16.483
> 
> 标签：jquery, jquery-selectors

我有这个 sudo html

```
<ul>
<li id="434" class="home-page-item" >
<div id="x_434" class="home-page-item-foot remove-tile"></div>
<div class="home-page-item-div">
    </li>
 </ul> 
```

然后我有这些点击

```
$( '.remove-tile').live("click", function(event){
      event.preventDefault();
      removeTile();
});  

$( ".home-page-item" ).live("click", function(event){
      console.log("Here as well");
      do_some_otherstuff():
}); 
```

我遇到的问题是，如果该人点击了 remove-tile div，则 .home-page-item onclick 也会在之后触发。有没有办法防止第二个主页项目被触发？我想也许解绑，但不知道如何使用它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:03:10.927

```
$( '.remove-tile').live("click", function(event){
      event.stopImmediatePropagation();
      removeTile();
});  

$( ".home-page-item" ).live("click", function(event){
      console.log("Here as well");
      do_some_otherstuff():
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:01:18.303

在函数中添加return false；这是因为事件传播而发生的。在`jQuery`您可以使用 return false 来防止默认 ( `preventDefault`) 和事件传播。

```
$( '.remove-tile').live("click", function(event){
      removeTile();
      return false;
});  

$( ".home-page-item" ).live("click", function(event){
      console.log("Here as well");
      do_some_otherstuff():
      return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:05:57.817

这是因为事件冒泡.. 添加 `event.stopPropagation();` 到您的点击事件中

```
$('.remove-tile').live("click", function(event) {
    event.stopPropagation();
    removeTile();
}); 
```

# lambda - Moq：返回值作为值传递给方法作为 IEnumerable

> ID：12807535
> 
> 赞同：1
> 
> 时间：2012-10-09T19:59:24.757
> 
> 标签：lambda, mocking, moq

我发现标题为[MOQ：返回值的帖子被传递到一个方法](https://stackoverflow.com/questions/996602/moq-returning-value-that-was-passed-into-a-method)中，这非常有帮助，因为我可以获取传入的值之一作为返回值。

我面临的问题是我需要将值（字符串）转换为 IEnumerable 作为枚举中唯一的一项，并且我在这样做的语法上遇到了麻烦。

这是我到目前为止所拥有的：

```
var aggregator = new Mock<IUrlAggregator>();
        aggregator
            .Setup(x => x.ProcessUrl(It.IsAny<IUrlFileLineInfo>()))
            .Returns((IUrlFileLineInfo x) => x.Url); <-- Need to return IEnumerable<string> here, not string 
```

ProcessUrl 签名如下所示：

```
IEnumerable<string> ProcessUrl(IUrlFileLineInfo urlInfo); 
```

和 IUrlFileLineInfo 接口：

```
public interface IUrlFileLineInfo
{
    string Url { get; set; }
    string Mode { get; set; }
} 
```

那么如何在 Lamba 表达式的上下文中将字符串值转换为 IEnumerable（通过 .Returns() 方法）？

**更新**

这就是我最终的结果。谢谢您的帮助。希望这将帮助其他不熟悉 lambdas 的人。

```
var aggregator = new Mock<IUrlAggregator>();
        aggregator
            .Setup(x => x.ProcessUrl(It.IsAny<IUrlFileLineInfo>()))
            .Returns((IUrlFileLineInfo x) => new List<string>() { x.Url }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:04:37.303

返回一个包含一项的数组怎么样`x.Url`？

```
var aggregator = new Mock<IUrlAggregator>();
        aggregator
            .Setup(x => x.ProcessUrl(It.IsAny<IUrlFileLineInfo>()))
            .Returns((IUrlFileLineInfo x) => new [] { x.Url }); 
```

# asp.net-mvc - MVC 框架可以在当前使用 ASP .NET 的 Web 应用程序中使用吗？

> ID：12807536
> 
> 赞同：5
> 
> 时间：2012-10-09T19:59:24.970
> 
> 标签：asp.net-mvc, asp-classic

我最近加入了一个管理经典 ASP Web 应用程序的组。它一直很好地满足我们团队的需求。然而，在我加入之前，我决定迁移到 ASP .Net。由于我们主要是 ASP 开发人员，因此我们在 ASP .Net 中编写代码就像在 Classic ASP 中一样（大部分情况下）。是否可以将 MVC 引入此应用程序/项目？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:01:09.337

简短的回答是肯定的，这是可能的。

Scott Hanselman 之前写过关于[这个话题](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)的文章。

根据您团队中的技能，您可能会发现很难跟上进度 - 可以在 Classic ASP 中编写干净的 MVC 样式代码，但大多数人不这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:34:12.940

是的，可以在传统的 WebForms 项目中使用 MVC。几年前，我将一个大型 WebForms 项目迁移到 MVC 2，这是我的发现（我已经更新它们以反映 MVC 3）

1.  确保您已安装 .NET 4.0，以及 MVC 3 框架和 VS 扩展。
2.  创建一个新的空白 MVC 项目以用作参考。
3.  查看参考项目的默认 web.config。您基本上想使用参考 web.config，并从当前项目中合并您需要的东西。
4.  查看参考 global.asax.cs。与上述类似，您希望将引用 .cs 中的更改合并到当前应用程序的 global.asax.cs 中。
5.  您需要将以下引用添加到您的 Web 项目中：

    System.Web.Abstractions、System.Web.Extensions、System.Web.Helpers、System.Web.Mvc、System.Web.Routing

6.  您可以通过更改 ProjectTypeGuids 来启用 VS 扩展：

    *   在解决方案资源管理器中，右键单击项目名称并选择卸载项目。然后再次右键单击项目名称并选择 Edit ProjectName.csproj。
    *   找到 ProjectTypeGuids 元素并添加 {E53F8FEA-EAE0-44A6-8774-FFD645390401}。
    *   保存更改，右键单击项目，然后选择重新加载项目。
7.  为 MVC 内容添加以下标准文件夹：

    *   〜/视图
    *   〜/视图/共享
    *   ~/控制器
    *   ~/Models（用于您的视图模型，可选）
    *   ~/Content（用于 CSS 和图像，可选）
    *   ~/Scripts（对于 JS，可选）

补充笔记：

1.  如果您现有的 WebForms 依赖于 web.config 设置进行授权（例如阻止未经授权的用户），则 MVC 操作将无法识别这一点，因为路由与 WebForms 授权完全分开工作。使用[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)要求授权，或将操作限制到某些角色或用户。您甚至可以[指定全局过滤器](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvcglobalanddynamicactionfilters.aspx)，这样您就不必在每个控制器或操作上应用此属性。
2.  使 MVC 与 7 之前的 IIS 版本或使用经典管道的应用程序池一起工作可能还有其他注意事项。考虑使用带有集成管道的 IIS 7+。
3.  我上面的笔记主要涉及让 MVC 工作的基线，它使用 ASPX 视图。ASPX 视图使用与您在 WebForms 中使用的 ASPX 文件相同的标记。您还可以使用我强烈推荐的新 Razor 语法 ( [primer](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) )。您可以同时使用 ASPX 和 Razor 视图页面。但是，您不能在 Razor 视图上使用 ASPX 母版页（反之亦然）。此外，MVC 将在 Razor 视图之前查找和使用 ASPX 视图，因此如果将视图升级到 Razor，请删除原始 ASPX。您需要做一些额外的工作来启用 Razor 视图。我正在尝试查找启用 Razor 的笔记。当我找到它们时，我会更新。一旦你安装了 Razor 并开始工作，你可以使用[Telerik](https://github.com/telerik/razor-converter)的这个工具将 ASPX 转换为 Razor。
4.  [这是一个](https://stackoverflow.com/questions/1979066/migrating-legacy-asp-net-to-mvc-2-rc-httpapplication-events-not-firing-user)关于我在升级时遇到的问题的问题。我之所以提供它，是因为它更详细地涵盖了我上面提到的一些要点。但是，当时我正在升级到 MVC 2，所以其中一些东西已经过时了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:02:34.750

这当然在技术上是可行的。然而，这听起来像是一种文化冲击，因为 MVC 的工作方式与 Classic ASP 或 ASP.NET WebForms 有很大不同。我认为这样做是值得的——或者如果这看起来更自然的话，就坚持使用 ASP.NET WebForms。但是，如果您还没有完全致力于 WebForms，那么 MVC 似乎也很容易迁移到 IMO。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T20:03:56.597

是的。我从事的项目最初是纯 ASP.NET，后来添加了一些 ASP.NET MVC 页面。最终，我们更喜欢 MVC，以至于我们最终将所有 WebForms 页面迁移到使用 MVC。但自始至终，这两个系统都很好地协同工作。

这是我能记得遇到的唯一真正的问题：WebForms 的工作原理是将整个页面封装在一个大`<form>`标签中。由于 HTML 不允许您有嵌套`<form>`标签，因此您通常不能在 WebForms 页面内使用 MVC 表单。将 WebForms 页面与 MVC 内容分开，避免在可能出现在 WebForms 页面上的 MVC 内容中使用 HTML 表单，或者为在 WebForms DOM 区域之外创建的表单使用弹出对话框。

# sql - 如何从许多记录中获取 xml？

> ID：12807537
> 
> 赞同：0
> 
> 时间：2012-10-09T19:59:34.390
> 
> 标签：sql, xml, sql-server-2008, xquery

所以我有下面的内容，可以让我从表中的一条记录中获取 xml `Products`。

但是，我需要能够从`Products`表中的所有记录中获取 XML 及其`ProductId`.

我对如何开始感到困惑。

```
DECLARE @MyXML XML
SET @MyXML =
    (SELECT ProductsXML
     FROM Products
     WHERE ProductId= 1)
SELECT 
    a.b.value('@upccode','int') as UPC,
    a.b.value('@dateadded','date') as DateAdded
FROM
    @MyXML.nodes('xml/Product/UPC')a(b); 
```

我正在使用 SQL Server 2008。

测试数据：

```
ProductId: 1
ProductsXML:
<xml>
        <Product>
            <UPC upccode="1237" dateadded="10/9/2012"/>
            <UPC upccode="1236" dateadded="10/8/2012"/>
            <UPC upccode="1235" dateadded="10/7/2012"/>
            <UPC upccode="1234" dateadded="10/6/2012"/>
        </Product>
    </xml>

ProductId: 2
ProductsXML:
<xml>
        <Product>
            <UPC upccode="9876" dateadded="9/9/2012"/>
            <UPC upccode="9877" dateadded="9/8/2012"/>
            <UPC upccode="0998" dateadded="9/7/2012"/>
            <UPC upccode="7877" dateadded="9/6/2012"/>
        </Product>
    </xml> 
```

我正在寻找的结果是这样的：

```
ProductId      UPC        DateAdded
---------      ---        ---------
1              1237       10/9/2012
1              1236       10/8/2012
....
2              9876       9/9/2012
2              9877       9/8/2012 
```

现在我可以得到上述但只能通过一次指定一个`PoductId`。我希望能够在不指定每个条目的情况下运行所有​​“产品”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:31:51.960

我猜你正在寻找这样的东西。

```
SELECT ProductId,
    a.b.value('@upccode','int') as UPC,
    a.b.value('@dateadded','date') as DateAdded
FROM Products
  CROSS APPLY ProductsXML.nodes('xml/Product/UPC')a(b); 
```

那里不需要有 XML 变量。直接查询`Products`表并使用`CROSS APPLY`反对`ProductsXML`字段来粉碎您的 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:42:12.523

```
hi u can try using Linq to xml to create an entity from the xml, see the sample code below

XDocument somedoc = XDocument.Load("your xml path");

var somelist = from somevariable in somedoc.Descendants("Product")
               select new Product {
                                    UPC = somevariable.Attribute("upccode").value
                                    DateAdded = somevariable.Attribute("dateadded").value
                                  }

so now somelist is  a collection thru which u can iterate and add to List<Product>, create product b4 u start tryinh this 
```

# python - 如何将 python 中的命令行参数转换为字典？

> ID：12807539
> 
> 赞同：12
> 
> 时间：2012-10-09T19:59:55.457
> 
> 标签：python, command-line, argv, sys

我正在编写一个应用程序，它采用任意命令行参数，然后将它们传递给 python 函数：

```
$ myscript.py --arg1=1 --arg2=foobar --arg1=4 
```

然后在 myscript.py 中：

```
import sys
argsdict = some_function(sys.argv) 
```

`argsdict`看起来像这样：

```
{'arg1': ['1', '4'], 'arg2': 'foobar'} 
```

我确定某处有一个图书馆可以做到这一点，但我找不到任何东西。

**编辑：** argparse/getopt/optparse 不是我要找的。这些库用于定义每个调用都相同的接口。我需要能够处理任意参数。

除非，argparse/optparse/getopt 具有执行此操作的功能...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T14:09:15.827

这是一个使用 的示例`argparse`，虽然它是一个延伸。我不会称之为完整的解决方案，而是一个好的开始。

```
class StoreInDict(argparse.Action):
    def __call__(self, parser, namespace, values, option_string=None):
        d = getattr(namespace, self.dest)
        for opt in values:
            k,v = opt.split("=", 1)
            k = k.lstrip("-")
            if k in d:
                d[k].append(v)
            else:
                d[k] = [v]
        setattr(namespace, self.dest, d)

# Prevent argparse from trying to distinguish between positional arguments
# and optional arguments. Yes, it's a hack.
p = argparse.ArgumentParser( prefix_chars=' ' )

# Put all arguments in a single list, and process them with the custom action above,
# which convertes each "--key=value" argument to a "(key,value)" tuple and then
# merges it into the given dictionary.
p.add_argument("options", nargs="*", action=StoreInDict, default=dict())

args = p.parse_args("--arg1=1 --arg2=foo --arg1=4".split())
print args.options 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T20:19:44.123

你可以使用这样的东西：

**我的脚本.py**

```
import sys
from collections import defaultdict

d=defaultdict(list)
for k, v in ((k.lstrip('-'), v) for k,v in (a.split('=') for a in sys.argv[1:])):
    d[k].append(v)

print dict(d) 
```

**结果：**

```
C:\>python myscript.py  --arg1=1 --arg2=foobar --arg1=4
{'arg1': ['1', '4'], 'arg2': ['foobar']} 
```

注意：该值将始终是一个列表，但我认为这更一致。如果你真的想要最终的字典

```
{'arg1': ['1', '4'], 'arg2': 'foobar'} 
```

那么你可以运行

```
for k in (k for k in d if len(d[k])==1):
    d[k] = d[k][0] 
```

然后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:27:51.447

..我可以问你**为什么**要重写（一堆）轮子，当你有：

*   [http://docs.python.org/library/getopt.html](http://docs.python.org/library/getopt.html)
*   [http://docs.python.org/library/optparse.html](http://docs.python.org/library/optparse.html)
*   [http://docs.python.org/library/argparse.html](http://docs.python.org/library/argparse.html)
*   ……等等……等等……

?

编辑：

作为对您的编辑的回复，optparse/argparse（后者仅在 >=2.7 中可用）足够灵活，可以扩展以满足您的需求，同时保持一致的界面（例如，用户希望能够同时使用`--arg=value`and`--arg value`和等。使用预先存在的库，您不必担心支持所有这些语法等）。`-a value``-avalue`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T20:12:37.803

像这样的东西？

```
import sys

argsdict = {}

for farg in sys.argv:
    if farg.startswith('--'):
        (arg,val) = farg.split("=")
        arg = arg[2:]

        if arg in argsdict:
            argsdict[arg].append(val)
        else:
            argsdict[arg] = [val] 
```

与指定的略有不同，该值始终是一个列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-04T20:58:19.727

这是我今天使用的，它占：

`--key=val`, `--key`, `-key`,`-key val`

```
def clean_arguments(args):
    ret_args = defaultdict(list)

    for index, k in enumerate(args):
        if index < len(args) - 1:
            a, b = k, args[index+1]
        else:
            a, b = k, None

        new_key = None

        # double hyphen, equals
        if a.startswith('--') and '=' in a:
            new_key, val = a.split('=')

        # double hyphen, no equals
        # single hyphen, no arg
        elif (a.startswith('--') and '=' not in a) or \
                (a.startswith('-') and (not b or b.startswith('-'))):
            val = True

        # single hypen, arg
        elif a.startswith('-') and b and not b.startswith('-'):
            val = b

        else:
            if (b is None) or (a == val):
                continue

            else:
                raise ValueError('Unexpected argument pair: %s, %s' % (a, b))

        # santize the key
        key = (new_key or a).strip(' -')
        ret_args[key].append(val)

    return ret_args 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-01T18:20:27.150

> 或类似的东西）对不起，如果这很愚蠢，我是新手:)
> 
> $ python3 Test.py a 1 b 2 c 3

```
import sys

def somefunc():
    keys = []
    values = []
    input_d = sys.argv[1:]

    for i in range(0, len(input_d)-1, 2):
        keys.append(input_d[i])
        values.append(input_d[i+1])

    d_sys = dict(zip(keys, values))

somefunc() 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-09T20:13:32.040

如果您真的想编写自己的东西而不是适当的命令行解析库，那么对于您的输入，这应该有效：

```
dict(map(lambda x: x.lstrip('-').split('='),sys.argv[1:])) 
```

你会想要添加一些东西来捕获没有'='的参数。

# c4 - 在 XCODE 中编译 c4iOS 应用程序时出错

> ID：12807541
> 
> 赞同：2
> 
> 时间：2012-10-09T20:00:05.437
> 
> 标签：c4

终于被注册为 iOS 开发人员 - 尝试编译我为 iPAD 编写的应用程序。应用程序在模拟器中运行良好，编译时会抛出此错误。

这是错误 ld：文件是通用的（2 片），但不包含 a(n) armv7s 片：/Users/YourMom/Documents/_.programming/c4iOS_APPS/test2/test2/Library/libC4.a for architecture armv7s clang ：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

当前版本：

[https://github.com/dubpixel/test2](https://github.com/dubpixel/test2)

谢谢

-jf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:43:33.473

项目 -> 构建设置 -> 从“有效架构”中删除 arm7s 架构

这行得通，并且让 xcode 不会想知道它的第二个切片在哪里！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T04:06:58.770

该错误似乎提到您正在构建的项目是通用的。目前，只有 iPhone / iPad 项目可以使用 C4 构建。创建通用应用程序项目模板的过程非常复杂（并且完全没有文档记录）。通用模板是近期要做的最重要的事情。

我检查了你的 git'd Xcode 项目，它也不会为我构建。所以，我将您的代码和媒体复制到一个新的 C4 项目中，针对 iPad……而且，它成功了！我来回拖拽，电影的帧在变化。

另外，我注意到您的项目包括单元测试。我建议您在创建新的 C4 项目时取消选中单元测试选项。

# objective-c - 为什么我的 UIBeizerPath 对象没有在与我的 CALayer 对象相同的矩形范围内绘制？

> ID：12807543
> 
> 赞同：0
> 
> 时间：2012-10-09T20:00:21.713
> 
> 标签：objective-c, ios, cocoa-touch

我要做的是使用`UIBezierPath`drawRectWithRounderCorners 方法在视图周围绘制一个框架。所以我决定做的是从 draw rect 方法中获取 rect，应用一个`UIEdgesInset`值为负数的对象并尝试像这样绘制它。到目前为止，`UIBezierPath`对象没有在传递给绘制矩形的矩形边界之外绘制。当我将相同的矩形应用于`CALayer`对象时，图层会按照我的需要进行绘制。那么为什么我不能让`UIBezierPath`对象绘制与对象相同的矩形`CALayer`呢？

```
- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];
    UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:
               UIEdgeInsetsInsetRect(rect, UIEdgeInsetsMake(-5,-5, -5, -5)) 
           byRoundingCorners:UIRectCornerTopLeft|UIRectCornerBottomLeft
                 cornerRadii:CGSizeMake(5, 5)];

    [[UIColor blueColor]setFill];
    [[UIColor blueColor]setStroke];
    [path stroke];
    [path fill];

    CALayer *backGround = [CALayer layer];
    [backGround setOpacity:.2];
    [backGround setFrame:UIEdgeInsetsInsetRect(rect, 
                                   UIEdgeInsetsMake(-5,-5, -5, -5))];
    [backGround setBackgroundColor:[UIColor greenColor].CGColor];
    [self.layer addSublayer:backGround];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:48:51.487

一个视图不能在它自己的边界之外绘制。这就是你`UIBezierPath`没有出现的原因。

如果超层的`maskstoBounds`属性为 NO，则层可以在其超层边界之外绘制。该`masksToBounds`属性对应于视图的`clipsToBounds`属性，默认值为`NO`。

# c# - ASP.NET 以强类型方式引用图像或 asp 文件

> ID：12807544
> 
> 赞同：2
> 
> 时间：2012-10-09T20:00:23.017
> 
> 标签：c#, asp.net, strong-typing

很多时候我们需要引用服务器上的另一个文件。无论它只是一个图像，还是另一个asp页面。例如：

```
 if (success)
 {
    img1.ImageUrl = "RightArrow.jpg"
 } 
```

这里的问题是，如果有人不小心将字符串“RightArrow.jpg”更改为“RghtArrow.jpg”，它不会导致编译时错误。并且可能需要很长时间才能注意到运行时错误。

那么这里有什么最佳实践吗？当然，我可以为此建立自己的小机制......但如果有任何内置的东西，我会徘徊。

可能是强类型的东西：

```
img1.ImageUrl = Images.RightArrow; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:04:06.667

Why not use Settings? If you did your code would be strongly typed, for example:

```
img1.ImageUrl = Settings.Default.Images.RightArrow 
```

If you have a limited number of these resources this could be a good solution as you could even change the path/name without recompiling...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:05:01.360

Can you just keep a List of the names of the pictures?

```
List<string> CollectionPictureUri = new List<string>(); 
CollectionPictureUri.Items.Add("RightArrow.jpg"); 

if (success)
 {
    img1.ImageUrl = CollectionPictureUri[0]; 
 } 
```

Or if you use a Map, then the key could just be `[RightArrow]`

Then you can initialize all the items in one block of code and make sure they are correct in one place.

EDIT: You can also use asserts to validate that your strings resolve to the correct name. [http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.assert%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.assert%28v=vs.110%29.aspx)

There are other testing techniques that might be useful to you. With visual studio you can prevent your code from building until errors like this are resolved.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:06:51.987

您总是可以使用 T4 模板为实际存在的文件生成一个带有常量的类。这类似于 T4 MVC 模板对 /Content 目录的脚本和内容所做的事情；它在运行时扫描这些目录，并创建常量。

# excel - 复制不同的工作表并将它们制作成一张工作表

> ID：12807545
> 
> 赞同：-1
> 
> 时间：2012-10-09T20:00:25.537
> 
> 标签：excel, vba

我有两张表 1 和 2。在表 1 中我有一个按钮可以浏览文件并将其粘贴到第二张表中，因此我需要帮助才能浏览第二张表并将其粘贴到第一张表下这已经存在于表 2 中。感谢您的帮助

```
Sub hh()
'
' hh Macro
'

'
    Range("A1:A11").Select
    Selection.Copy
    Sheets("Sheet1").Select
    Range("B19").Select
    ActiveSheet.Paste
    ActiveWindow.SmallScroll Down:=9
    Sheets("Sheet2").Select
    Range("A2:A5").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Sheet1").Select
    Range("B30").Select
    ActiveSheet.Paste
End Sub 
```

我手动重新编码了这段代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:07:55.620

*注意：此答案适用于原始问题，`Sub hh`该问题已被编辑为创建新问题*

首先，您的原始代码可以重写为：

```
Sub hh()

Sheets("Sheet2").Range("A1:A11").Copy
Sheets("Sheet1").Range("B19").Paste
Sheets("Sheet2").Range("A2:A5").Copy
Sheets("Sheet1").Range("B30").Paste

End Sub 
```

现在您可以根据我相信您所要求的“最后一行”修改粘贴位置。最后一行会像这样找到：

（行内评论）

```
Sub hh()

'Varible to store the last row in
Dim iLastRowSheet1 As Long

'copy initial data to memory
Sheets("Sheet2").Range("A1:A11").Copy

'find current last row
With Sheets("Sheet1")
    iLastRowSheet1 = .Range(B & .Rows.Count).End(xlUp).Row
End With

'paste using last row found + 1
Sheets("Sheet1").Range("B" & (iLastRowSheet1 + 1)).Paste

'repeat
Sheets("Sheet2").Range("A2:A5").Copy
With Sheets("Sheet1")
    iLastRowSheet1 = .Range(B & .Rows.Count).End(xlUp).Row
End With
Sheets("Sheet1").Range("B" & (iLastRowSheet1 + 1)).Paste

End Sub 
```

# jquery - jQuery - 如果不在 Web 服务器上，则无法加载

> ID：12807548
> 
> 赞同：4
> 
> 时间：2012-10-09T20:00:38.017
> 
> 标签：jquery, html

我正在尝试从我的桌面加载一个页面，我们将其命名为`loadme.htm`.

现在我有一个`index.htm`文件，它将加载`loadme.htm`.

`index.htm`为什么我从桌面打开时无法加载？一些 jQuery 函数在这里工作，如`.trim()`,`.show()`等。但如果我把它放在 WAMP 上，它会成功加载。

编辑：这就是我加载“loadme.htm”的方式 `$.("#content").load("loadme.htm");`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T20:05:21.287

我假设您已经使用 jquery ajax 加载函数来加载您的文件。除非您为此使用 http 调用，否则它将不起作用。当您从桌面打开时，它正在使用文件协议并且失败。其他 jquery 函数，如 trim()、show() 之所以有效，是因为它对协议类型没有任何依赖，并且浏览器本身可以处理这些调用。

# java - 我是否以正确的方式使用 switch 语句

> ID：12807551
> 
> 赞同：0
> 
> 时间：2012-10-09T20:00:48.087
> 
> 标签：java, switch-statement

这是一个 yahtzee 游戏，这个方法应该计算并返回五个骰子的值。但这是一种愚蠢的做法吗，有一个 switch 语句通过参数传递用户选择的类别，然后为每个可能的类别进行 for 循环。有没有比我的设计理念更容易做到这一点的方法？

```
private int assignScoreToCategory(int category)
{
    int computedScore = 0;
    println("dice: "+dice1+" "+dice2+" "+dice3+" "+dice4+" "+dice5);

    //  Switches on the category the user has selected.
    switch (category)
    {
    case ONES: 
        for (int i = 0; i < 4; i++){
            if (diceArray[i] == ONES){
                println(computedScore);
                computedScore++;
            }
        }break;

    case TWOS: 

        break;
    case THREES: break;
    case FOURS: break;
    case FIVES: break;
    case SIXES: println("cat 6");   break;
    case UPPER_SCORE: break;
    case UPPER_BONUS: break;
    case THREE_OF_A_KIND: break;
    case FOUR_OF_A_KIND: break;
    case FULL_HOUSE: break;
    case SMALL_STRAIGHT: break;
    case YAHTZEE: break;
    case CHANCE: break;
    case LOWER_SCORE: break;
    case TOTAL: break;
    default: return 0; 
    }
    return computedScore;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T20:06:04.117

您绝对应该使用`enum`而不是`int`. 然后，作为进一步的改进，将 switch 语句中包含的逻辑移动到枚举的实例方法中。`switch`然后，您只需一个方法调用即可替换。有很好的语法为每个枚举成员提供不同的实现。将这个想法与一个覆盖尽可能多的领域的单一通用方法实现结合起来，可能在一些实例变量的帮助下：

```
enum Category {
  private final int score;
  ... 
  ONES(1) { 
    public int score() { 
      int computedScore = 0;
      for (int i = 0; i < 4; i++) {
       if (diceArray[i] == ONES) {
          println(computedScore);
          computedScore++;
       }
      }
      return computedScore;
    }
  },
  ...,
  SIXES(6),
  ...;

  private Category(int score) { this.score = score; }

  public int score() { return this.score; }
} 
```

我想给你一个更完整的例子，但你没有提供太多具体的逻辑。

# php - 可以同时使用 mysqli 准备好的语句和事务吗？

> ID：12807555
> 
> 赞同：6
> 
> 时间：2012-10-09T20:00:52.573
> 
> 标签：php, mysqli, prepared-statement, rollback, execute

我只想知道你是否可以同时使用 mysqli 的`prepare`, `execute`, and `rollback`？

```
$m = new mysqli($dbhost,$dbuser,$dbpassword,$dbname);

$m->autocommit(FALSE);
$stmt = $m->prepare("INSERT `table` (`name`,`gender`,`age`) VALUES (?,?,?)");
$stmt->bind_param("ssi", $name, $gender, $age);
$query_ok = $stmt->execute();

$stmt = $m->prepare("INSERT `table` (`name`,`gender`,`age`) VALUES (?,?,?)");
$stmt->bind_param("ssi", $name, $gender, $age);
if ($query_ok) {$query_ok = $stmt->execute();}

if (!$query_ok) {$m->rollback();} else {$m->commit();} 
```

你能做这个吗？假设上面的代码有一个循环，或者变量在其中获取新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-05T08:24:10.293

处理此问题的最佳方法是处理异常（一如既往，该死的 PHP 错误/警告内容）。仅仅是因为我们的`commit()`调用也可能失败。请注意，`finally`仅在较新的 PHP 版本中可用。

```
<?php

// Transform all errors to exceptions!
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);

try {
  $connection = new \mysqli($dbhost, $dbuser, $dbpassword, $dbname);
  $connection->autocommit(false);

  $stmt = $connection->prepare("INSERT `table` (`name`, `gender`, `age`) VALUES (?, ?, ?)");
  $stmt->bind_param("ssi", $name, $gender, $age);
  $stmt->execute();

  // We can simply reuse the prepared statement if it's the same query.
  //$stmt = $connection->prepare("INSERT `table` (`name`, `gender`, `age`) VALUES (?, ?, ?)");

  // We can even reuse the bound parameters.
  //$stmt->bind_param("ssi", $name, $gender, $age);

  // Yet it would be better to write it like this:
  /*
  $stmt = $connection->prepare("INSERT `table` (`name`, `gender`, `age`) VALUES (?, ?, ?), (?, ?, ?)");
  $stmt->bind_param("ssissi", $name, $gender, $age, $name, $gender, $age);
   */

  $stmt->execute();
  $connection->commit();
}
catch (\mysqli_sql_exception $exception) {
  $connection->rollback();
  throw $exception;
}
finally {
  isset($stmt) && $stmt->close();
  $connection->autocommit(true);
} 
```

# grails - test.datasource 的外部化配置

> ID：12807565
> 
> 赞同：0
> 
> 时间：2012-10-09T20:01:27.527
> 
> 标签：grails

通过更新 Config.groovy 中的 grails.config.locations 然后在 .grails/${appName}-config.properties 中设置特定配置，我已经能够为开发环境外部化 DataSource 配置，如下所示：

```
dataSource.driverClassName = com.mysql.jdbc.Driver
dataSource.url = jdbc:mysql://localhost/db-dev
dataSource.username = root
dataSource.password = pass 
```

对于“测试”环境，我有不同的数据库，所以我想相应地更新 test.dataSource.url 但这不起作用。运行“grails test”模式（即grails test dgm-update）时，它仍然需要“dev”dataSource.url。如何外化测试环境DataSource配置？

谢谢你的帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:10:56.147

```
grails.config.locations = ["file:${userHome}/.grails/${appName}-config-${grails.util.Environment.current.name}.properties"] 
```

然后为每个环境放置嵌套文件：

```
/home/me/.grails/myapp-config-dev.properties
/home/me/.grails/myapp-config-test.properties
/home/me/.grails/myapp-config-production.properties 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:25:22.620

尝试使用 Groovy 外部配置，即“.grails/${appName}-config.groovy”和环境特定的 DSL：

```
environments {
    test {
        dataSource {
            ...
        }
    }
} 
```

# asp-classic - 经典 ASP 错误：关闭对象时不允许操作

> ID：12807568
> 
> 赞同：1
> 
> 时间：2012-10-09T20:01:34.577
> 
> 标签：asp-classic, vbscript, adodb

我已经从对这个问题的其他一些回复中浏览并实施了代码，但我仍然没有运气。我仍然收到错误消息。

```
 If ((bReport And bIsDate And CheckPermissions("lotsales")) Or Request.QueryString("report")) Then
    OpenDB
    Dim oRs, sSQL, sSQL2, iCancellations, iSales, sDate, sInitDate, sEndDate, iPhaseID, iPhaseNumber, rowCount

    sInitDate = Request("startDate")
    sEndDate = Request("endDate")
    sSQL = "sp_get_lot_sales_test '" & sInitDate & "', '" & sEndDate & "', " & sPhase & ", '" & sReportView & "'"

    'response.write vbNewLine & "<!-- sql: " & sSQL & "-->" & vbNewLine
    'response.write sSQL
    'response.Flush
    Set oRs = ExecuteCommand(sSQL,1) 
End If 
```

然后这是发生错误的地方 -

```
If (oRs.EOF) Then <-- fails here
       Response.Write("<TR><TD ALIGN=""center"">There is no data to report on!</TD></TR>")
    Else
        Do While Not oRs.EOF 
```

作为最后的手段，我将回到存储过程并解构它以确保一切正常。有没有人知道为什么我可能会收到错误？我不会在任何地方发出关闭消息。

这是 ExecuteCommand 函数 -

```
Function ExecuteCommand(s,i)
    On Error Resume Next
    Set ExecuteCommand = oDBc.Execute(s, , i)
End Function 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-17T20:35:22.997

这可能很旧，但我经常遇到该错误（关闭对象时不允许操作）。

我所做的是在存储过程中，我添加了以下内容：

**设置无计数**

**设置 ANSI_WARNINGS 关闭**

**在过程中的AS**正下方。

That's all I do and the problem goes away.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-02T23:45:39.153

I am maintaining some old Classic ASP code for a client, code that we took over from a prior developer, and this bug drove me crazy for 4 hours.

I finally discovered a few PRINT statements in the associated SQL stored procedure, which were there for troubleshooting or checking values but don't actually return rows, yet they caused this to fail:

```
Set cnContentDB = Server.CreateObject("ADODB.Connection")
cnContentDB2.Open sString

sSQL = "EXEC YourStoredProc"

Set oRS2 = Server.CreateObject("ADODB.Recordset")
oRS2.Open sSQL, cnContentDB

if not oR2.EOF then   'THIS WAS GIVING THE ERROR,
                      'EVEN THOUGH THE STORED PROC ALWAYS RETURNS RECORDS 
```

I removed the Print statements, and the error went away.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-20T23:08:08.280

Although this is years old, we still end up here looking for solutions. The cause of this error for me was that the User did not have Execute permission on the Stored Procedure. Granting Execute permission resolved the error.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T20:05:14.090

您需要一个连接对象。

```
set conn = server.CreateObject("adodb.connection")
set oRs = conn.execute(sSql) 
```

# html - 水平左对齐表单的问题

> ID：12807570
> 
> 赞同：0
> 
> 时间：2012-10-09T20:01:43.547
> 
> 标签：html, css, css-float

我正在尝试在我的第一个表格下方制作第二个表格。问题是我似乎无法将第二种形式向下移动。我已经在我的 CSS 中尝试过填充和边距。我在 .label2 #input2 和影响我的第二个表单的其他字段中做到了。我似乎无法在#form2 的css 中包含属性。我尝试在我的#form2 css 中添加多个属性，但没有一个是相似的。我引用它的方式与我的#form1（有效）完全相同，所以我不确定为什么我在#form2 中的 padding-top 不起作用。

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">

* {
 margin:0px;
 padding:0px;
}

body {
 background-image: url(/img/bamboo.png);
 background-repeat:repeat-x;
 background-color:black;
 text-align:center;
}

#container {
 margin:0 auto;
 margin-top:0px;
 width:920px;
 height:920px;
 text-align:left;
 background-color:00000;
}

.twoCol {
 height:55em;
 margin:2%;
 width:46%;
 background-color:0000;
 float:left;
}

#logo {
 margin:0px;
 float:left;
}

#whatis {
 font-family: rockwell;
 text-align:left;
 font-size:1.4em;
 padding-top:2em;
 color:#cccccc;
}

#about {
 font-family: rockwell;
 letter-spacing:.1em;
 line-height:1.3em;
 text-align:left;
 font-size:1.1em;
 padding-top:.2em;
 color:#ffff99;
}

#equal {
 padding-top:1em;
 padding-left: 9em;
}

#signup {
 font-family:rockwell;
 float:left;
 font-size:1.5em;
 padding-top:2em;
 padding-bottom:100px;
 color:#339900;
}

#form1 {
 padding-top:6em;
 width:450px;
}

#form2 {
 width:450px;
}

#formleft {
 float:left;
}

#formright {
 float:right;
}

.label {
display:block;
margin-left:1em;
margin-bottom:-.3em;
font-size:.85em;
color:white;
font-family: Avenir;
text-shadow: px px px white;
}

.label2 {
 margin-top:13px;
 display:block;
 margin-left:0em;
 margin-bottom:0em;
 font-size:1em;
 color:white;
 font-family: Avenir;
 text-shadow: px px px white;
}

input {
 font-family: Courier New;
 font-size: 1em;
 height:1.4em;
 margin:2% 5% 5% 5%;
 width:90%;
 border-color:#555555;
 -webkit-appearance: none;
 -webkit-border-radius: 15px;
 -moz-border-radius: 15px;
 border-radius: 5px;
 -moz-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
 -webkit-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
 box-shadow: inset 0 3px 8px rgba(0,0,0,.24);
}

#input2 {
 font-family: Courier New;
 font-size: 1em;
 height:1.4em;
 margin:-4% 0% 0% 15%;
 width:75%;
 border-color:#555555;
 -webkit-appearance: none;
 -webkit-border-radius: 15px;
 -moz-border-radius: 15px;
 border-radius: 5px;
 -moz-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
 -webkit-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
 box-shadow: inset 0 3px 8px rgba(0,0,0,.24);
}

.inset {
 -moz-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
 -webkit-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
 box-shadow: inset 0 3px 8px rgba(0,0,0,.24);
}

button {
 height:2em;
 margin:0% 5% 5% 5%;
 width:92%;
 background-color:#00aeff;
 font-size: 1.5em;
 cursor: pointer;
 -webkit-appearance: none;
 -webkit-border-radius: 15px;
 -moz-border-radius: 15px;
 border-radius: 15px;
 border-color:#008aff;
 -moz-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
 -webkit-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
 box-shadow: inset 0 3px 12px rgba(0,0,0,.24);
 text-shadow: 1px 1px 5px grey;
}

button:active {
 position: relative;
 top: 1px;
}

.submit input2{
 margin-left: 1em;
}

text{
 font-family: Avenir;
 font-size: 1.5em;
}

</style>
</head>

<body>
 <div id="container">

    <div id="left" class="twoCol">

    <div id="logo"><img src="/img/logo.png" height= "150px" width="257px" alt="">

    <div id="whatis">
      <p>What is Epic Swap?</p></div>

    <div id="about">
      <p>Epic Swap is the opportunity to share<br> an  experience, make a friend and do<br> it all over again.</p></div>

    <div id="equal">
      <img src="/img/equal.png" height="56" width="100" alt=""></div>

    </div>
    </div>

    <div id="right" class="twoCol">
        <form id="form1">
       <div id="formleft"><label class="label">Username:</label>
          <input type="text" /></div>
       <div id="formright"><label class="label">Password:</label>
          <input type="text" /></div>
        <div id="signup">
          <p>Sign Up Now!!</p></div>

        <form id="form2">
           <p><label class="label2" for="name">Name</label2> 
           <input id="input2" type="text" id="name" /></p>

           <p><label class="label2" for="e-mail">E-mail</label2>
           <input id="input2" type="text" id="e-mail" /></p>
           <p class="submit"><input type="submit" value="Submit" /></p>
       </form>
    </div>

 </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:03:35.207

尝试添加`clear: both`到您的#form2 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:04:39.850

我需要你的 HTML 代码，但我最初的猜测是你的第二个表单需要一个 (clear: left;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T09:48:41.533

**您的代码中的错误：**

1.  `#form1`标签已打开，但未在任何地方关闭
2.  `<label>`标签有错误的关闭，即`</label2>`
3.  标签关闭不正确

检查[修改后的代码](http://jsbin.com/uhunuc/1/edit)，看看[结果](http://jsbin.com/uhunuc/1)

# devise - Require username at registration

> ID：12807576
> 
> 赞同：0
> 
> 时间：2012-10-09T20:02:11.760
> 
> 标签：devise

Ive been searching and cant seem to find a question that answers this. Im pretty new to devise. Ive added a username column to my users model, and added the username field to the registration form.

But how can I require that the username field be filled out upon registration? Also check thats its unique?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:41:09.063

如果您希望通过用户名（而不是设计默认电子邮件）登录，Ryan Bates 在他的[RailsCasts 第 210 集：自定义设计](http://asciicasts.com/episodes/210-customizing-devise)中介绍了您，请参阅自定义登录要求的最后一节。

但是，如果用户名是 User 表中的附加字段，请将其添加为 attr_accessible 并编写正常的 rails 验证。例子：

```
validates :username, :presence => true, :uniqueness => true 
```

它可能还需要对视图进行一些自定义以标准化验证错误显示。

# android - 是否可以在 Service 类中有一个 AlarmManager？

> ID：12807577
> 
> 赞同：-1
> 
> 时间：2012-10-09T20:02:13.003
> 
> 标签：android, android-service, android-alarms

例如我的应用程序，它启动并运行服务（用于检查数据库是否有新消息），但据我所知，`AlarmManager`如果未打开服务，您可以继续打开服务。

但是您可以`AlarmManager`在 Service 类内部继续检查数据库中的新消息吗？而不是重新打开服务类只是继续检查数据库？

我想知道是否可以在 Service 类中有一个 AlarmManager 以每隔 X 秒检查一次数据库，因为启动应用程序时 Service 将打开

**真正的问题：** 是否可以在运行 Method() 来检查数据库的 Service 类中使用 AlarmManager？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:52:19.440

用一个`Timer`

```
 Timer myTimer = new Timer();
    myTimer.schedule(new TimerTask() {          
        @Override
        public void run() {
                 /**
                  *
                  *Do something. CODE HERE
                  */
        }           
    }, 0, 30000); //30000 = 30 Seconds Interval. 
```

# javascript - new Highcharts.Chart creating trouble. Why?

> ID：12807578
> 
> 赞同：0
> 
> 时间：2012-10-09T20:02:14.757
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript, highcharts

I have the following code:

**assets/javascript/activities.js.coffee**

```
jQuery ->
    graph = new Highcharts.Chart
        chart: 
            renderTo: "activity_graph"
            type: 'column'

        exporting:
            buttons:
                printButton:
                    enabled: true   
.... 
```

**assets/javascript/activity_groups.js.coffee**

```
jQuery -> 
    $('ul').children('ul').hide() 
```

The activity_group file does not work if I have new Highcharts.Chart in my activities file. If I comment new Highcharts.Chart it works fine. Both files load properly. Why does this happen?

**[Edit1]**

I was playing around I also noticed that If I place `$('ul').children('ul').hide()` before `graph = new Highcharts.Chart` it also works as expected. I don't want to place it in the same file though and I don't want to have to place it in front of the graph variable necessarily.

**[Edit2]**

Found one error why I assume it is not working. I am not very knowledgable with javascript. Uncaught Highcharts error #13:

Highcharts Error #13

Rendering div not found

This error occurs if the chart.renderTo option is misconfugured so that Highcharts is unable to find the HTML element to render the chart in.

My markup only contains the activity_graph div where I need it( In my activities show view). It is not included anywhere else. That is why I assume I am getting this error. I don't want to use it anywhere else though... Any thoughts?

**[Edit3]**

This is the markup that I am generating with rails:

```
= content_tag :div, "", id: "activity_graph", data: {name: graph.name, minutes: graph.minutes, year: graph.year, month: graph.month, day: graph.day, data_hash: graph.data_hash} 
```

I get my div with id activity_graph and the graph is displayed without problems. The error doesn't pop up when I am on this page... However If I navigate on a different page then the error pops up because I don't have this div and the id anymore...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:36:47.630

我最终提出了一个条件。只有当 div 元素存在时，我才应该 renderTo。当我这样做时，错误消失了。

# ruby - Ruby gems installation error

> ID：12807591
> 
> 赞同：8
> 
> 时间：2012-10-09T20:03:02.470
> 
> 标签：ruby, ruby-on-rails-3, rubygems

When I am trying to install a gem or run anything with gem command, I see this warning,

```
Error loading RubyGems plugin "/Users/ender/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-0.9.0/lib/rubygems_plugin.rb": undefined method `first' for #<String:0x007ffedc0964f0> (NoMethodError) 
```

I searched it but I could not find anything out.

What is the problem and how can I fix it?

Note: I cannot install any gems.

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:45:04.713

尝试删除`/Users/ender/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-0.9.0`目录。这个宝石似乎有问题。

# javascript - jQuery click events erratic, placeholder stuck

> ID：12807599
> 
> 赞同：0
> 
> 时间：2012-10-09T20:03:36.793
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

I'm messing around with porting an image selection tool into jQuery. I'm having a couple little issues that are annoying me--

First, the sortable placeholder appears to be stuck at the top of the UL-- it doesn't move down to show the proposed new position if the item were dropped.

Second, the click events attached to the buttons don't fire reliably-- sometimes they work fine, other times it takes 2, 3 or 4 clicks before they fire.

I have been reading a ton of tutorials and the jQuery docs, and I believe I've done this properly, but I'm sure there's better ways to handle what I've attempted.

Here's a jsfiddle showing the behaviour. Any help appreciated!

[http://jsfiddle.net/Y2tRW/9/](http://jsfiddle.net/Y2tRW/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:33:37.763

测试了第一个问题

*   ie9（如果文档以 ie8 兼容模式加载，则占位符按预期工作）
*   chromium21（在一台电脑上可以工作而在另一台上不行，我很失望）
*   歌剧11

占位符按预期工作，第二个问题是您需要准确单击 <i> 元素，如果您单击按钮而不是图像，它只会滚动到页面顶部。

这将解决问题，改变

```
$("#sortable").on("click", "i.icon-pencil", function(e) { 
```

至

```
$("#sortable").on("click", "a.btn:has(i.icon-pencil)", function(e) { 
```

编辑：找到它

你`float:left;`所有的 li 元素都有（它在 bootstrap-combined.min.css 中，用于 .span12），但不是突出显示

将它添加到您的小提琴中，它将起作用。

它在家里工作，因为我总是将兼容性设置为 IE8，现在我摆脱了那个设置，它不起作用。顺便说一下ie8不适`float:left`用于`display:list-item;`

# iphone - Saving images then displaying them in a table

> ID：12807602
> 
> 赞同：1
> 
> 时间：2012-10-09T20:03:58.430
> 
> 标签：iphone, ios

Can anyone point me towards an example or tutorial for this? I basically want to save images to the documents folder then have a table that contains them for user review later on.

I've got it working but only when I go and add each image to an array then generate the table with contents of said array first. Is there a quicker or more automated way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:33:40.487

这是一个很好的教程，提供了一个你可以适应的项目：

[http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

虽然它实际上是关于在辅助线程上进行延迟加载和其他图像操作（保持 UI 响应），但您也可以以这种方式在表格中显示图像。

您将进行的主要修改是首先查找本地存储的图像，然后在不可用时进行网络获取。进一步的改进是检查与每个本地图像一起存储的时间戳，如果有更新的图像可用，则从网络更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:17:23.777

没错，您首先准备数据源（即图像数组），然后将其传递给 tableview 并重新加载它。如果您正在处理大量图像，请考虑延迟加载。

苹果[在这方面有一个例子](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)。

# javascript - Setting title attribute with Javascript function

> ID：12807603
> 
> 赞同：15
> 
> 时间：2012-10-09T20:03:58.467
> 
> 标签：javascript, html

I am trying to find, if I can pass a value on the `title` attribute of a `label` element using Javascript?

I have tried the following Javascript code:

```
function myFunction()
{
    return "Hello!";
} 
```

And a piece of HTML code:

```
<label title="myFunction()">TEST</label> 
```

But, this isn't working. It just show the 'myFunction()' as a text.

Is it possible, what I am trying to do? If yes, what is the correct syntax?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-09T20:07:48.940

```
<label id='mylabel'>TEST</label>
<script>
    function myFunction() {
        return "Hello!";
    }

    document.getElementById('mylabel').setAttribute('title', myFunction());
</script> 
```

应该做的工作。它首先选择标签，然后设置属性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-09T20:06:02.967

你不能像这样内联javascript。

你可以做的是

1）给你的标签一个id，把它放在你身体的最后

```
<script>
   document.getElementById('myId').title = myFunction();
</script> 
```

[示范](http://jsfiddle.net/9L4zN/)

2）如果您真的想内联调用，请在您想要标签的位置写下：

```
<script>
     document.write('<label title="'+myFunction()+'">TEST</label>');
</script> 
```

（这个真的不推荐）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-09T20:11:27.830

试试这种方式： -

## HTML：

```
<label id="lab">TEST</label>​ 
```

## JS：

```
window.onload = function() {
    document.getElementById('lab').setAttribute('title','mytitle');
    alert(document.getElementById('lab').title);
}​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/Jw3sU/)**

# php - 比较 php 类中的会话变量？

> ID：12807608
> 
> 赞同：0
> 
> 时间：2012-10-09T20:04:18.290
> 
> 标签：php, ajax, class, session

我正在尝试从类函数中设置会话变量的值，并稍后在同一类的不同函数中比较该会话值。这些函数都不在`__construct()`函数中。

问题似乎是比较永远不会返回true。

```
<?php
session_start();
$class = new Class();
?>

blah blah blah

<script type="text/javascript">
    // Ajax function to call PHP that creates new Class isntance and executes a Class->function();
    setInterval('checkNew()', 10000);
</script>

blah blah blah

// Another Ajax Function that calls creates a new Class isntance and executes the initial Class->function();
<body onload="getMessages();">

blah blah blah 
```

下一个函数摘录是从`<body onload="">`ajax 调用的脚本中运行的。这是为了`$_SESSION['last_sms']`稍后在不同的函数中进行比较。

```
// Check the now() stamp of the most recent message loaded
$recent_msg_query = "SELECT date_received FROM messages ORDER BY date_received DESC LIMIT 1";
$recent_statement = $this->db_handle->prepare($recent_msg_query);
$recent_statement->execute();
$most_recent = $recent_statement->fetch(PDO::FETCH_NUM);
$_SESSION['last_sms'] = $most_recent[0]; 
```

这是 Class 内的函数，应该每十秒进行一次比较（通过`setInterval('checkNew()', 10000);`）

```
public function checkNew()
{
    // Check the now() stamp of the most recent message loaded and compares it
    // to a stored now() stamp.
    $recent_msg_query = "SELECT date_received FROM messages ORDER BY date_received DESC LIMIT 1";
    $recent_statement = $this->db_handle->prepare($recent_msg_query);
    $recent_statement->execute();
    $most_recent = $recent_statement->fetch(PDO::FETCH_NUM);

    if (!isset($_SESSION['last_sms'])) {
        $_SESSION['last_sms'] = $most_recent[0];
    }

    if ($_SESSION['last_sms'] !== $most_recent[0]) {
        echo "New message(s) available, refresh.";
    } else {
        echo "No new messages yet.";
    }
} 
```

当我发送新消息时，页面仍然显示“还没有新消息”。你们能帮我弄清楚我在哪里偏离了这条路吗？这`$_SESSION stuff`是迄今为止唯一不起作用的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:15:52.143

`session_start()`不只是充当会话发起者。必须在尝试读取或写入的*每个*`$_SESSION`脚本上调用它。由于您的 AJAX 处理程序脚本与生成调用它们的页面的主要 PHP 脚本分离，并且它们作为完全独立的 PHP 脚本运行，因此您还必须调用`session_start()`AJAX 处理 PHP 脚本。

# terminal - Bad: modifier error when installing RVM

> ID：12807609
> 
> 赞同：0
> 
> 时间：2012-10-09T20:04:29.393
> 
> 标签：terminal, rvm

I'm trying to run `source /Users/alastair/.rvm/scripts/rvm`, but keep getting:

`Bad : modifier in $ (").`

Where would the problem be? Happy to paste other files in if these would help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:12:15.247

在任何情况下，您都在运行不是**Bash**或**ZSH**的外壳吗？`Bash >= 3.2.25`或者`ZSH >= 4.3.10`是必需的。

您的问题看起来像您使用的是**RVM**`sh`不支持的简约外壳。

 **您可以检查用户 shell`/etc/passwd`并更改它`chsh -s /path/to/new/shell`- 允许的 shell 列表可用`/etc/shells`- 但请确保选择 Bash/ZSH，还请注意，像 sh->bash 这样的链接将不起作用，因为 bash 根据名称更改行为调用。**

# c++ - How to allocate CGAL's Halfedge struture in shared memory?

> ID：12807616
> 
> 赞同：2
> 
> 时间：2012-10-09T20:04:40.600
> 
> 标签：c++, geometry, ipc, shared-memory, cgal

I want to continue my previous question which was misunderstood as related to 2D geometry and as a result I get no satisfying answer ([Share CGAL's geometry between processes in C++](https://stackoverflow.com/questions/12657030/share-cgals-geometry-between-processes-in-c)) and ask it once again, but this time properly, highlighting, I'm talking about 3D Cgals Polyhedron Geometry.

In CGAL manual I read that it’s possible to instantiate HalfedgeDS. I want to place it in shared memory so that other process could use it (please note, it has to be shared between processes, not threads). How to make my custom allocator that suit my needs, so I could put it as Alloc parameter? And what about other parameters – “Traits” and “Items” – normally you don’t have to worry about it when you use only top level classes. Below I post the most interesting fragment, that I've found uin the CGALs manual, which I think could be helpful:

> A HalfedgeDS is a class template and will be used as argument for other class templates, for example CGAL::Polyhedron_3. The template parameters to instantiate the HalfedgeDS will be provided by this other class template. Therefore, the three template parameters and their meaning are mandatory. We distinguish between the template HalfedgeDS and an instantiation of it.

Note that I am interested only in solutions related to 3D geometry.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:08:43.693

我猜你有兴趣使用[CGAL::HalfedgeDS_list](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/HalfedgeDS_ref/Class_HalfedgeDS_list.html)，这是 Polyhedron 类默认使用的。作为 HalfedgeDS 概念的所有模型，它有一个分配器作为模板参数。

然后使用共享内存分配器（如[boost 进程间分配器](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess.html)）将完成这项工作。

# c# - ASP.NET MVC4 多语言数据注释

> ID：12807617
> 
> 赞同：10
> 
> 时间：2012-10-09T20:04:45.250
> 
> 标签：c#, .net, asp.net-mvc, data-annotations, multilingual

在标准应用程序中，我有以下内容：

```
[Required]
[DisplayName("Email Address")]
public string EmailAddress { get; set; } 
```

...这反过来又会自动为这个表单域生成一个英文标签。

现在，如果我需要我的应用程序支持 5 种语言，那么 ASP.NET MVC 应用程序处理这个问题的最佳方法是什么？

应用范围约为400-600个数据字段。

更新：我还需要支持更新应用程序中的小部分文本，例如页面名称和每个表单的介绍（小段落）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T23:50:17.933

不是将实际值分配给属性属性，而是为资源字符串分配键。然后，您可以使用`ModelMetadataProvider`知道本地化上下文并提供适当字符串的自定义。为了获得更好的解决方案，您可以制定自定义`ModelMetadataProvider`推断约定（这减少了对详细属性的需求）。

Phil Haack 有一篇名为[Model Metadata and Validation Localization using Conventions](http://haacked.com/archive/2011/07/14/model-metadata-and-validation-localization-using-conventions.aspx)的博客文章解释了这是如何工作的。还有一个名为[ModelMetadataExtensions](http://nuget.org/packages/ModelMetadataExtensionsWithBugfix)的相应 NuGet 包，其源代码可在 github 上[https://github.com/Haacked/mvc-metadata-conventions](https://github.com/Haacked/mvc-metadata-conventions)获得。

*作为旁注，我建议回顾一下我在一个老问题上得到的一些很棒的答案：[.NET 中本地化的有效策略](https://softwareengineering.stackexchange.com/questions/98358/effective-strategies-for-localization-in-net)。它们没有专门解决您的问题，但如果您正在开发多语言 .NET 应用程序，它们会非常有帮助。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T20:25:30.690

我会制作自定义属性，例如**[MyDisplayName("Section", "Key")]** 这将提供基于所选语言的翻译。还可以查看数据库驱动的资源管理器，例如[http://www.west-wind.com/presentations/wwDbResourceProvider/](http://www.west-wind.com/presentations/wwDbResourceProvider/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-12T20:45:28.527

本地化的最佳方法是将字符串存储在数据库中，而不是资源文件中，除非，

1.  您的应用非常静态
2.  您的语言集非常静态

您可以使用自定义属性来装饰您的模型，您可以在其中为资源设置默认字符串和数据库 ID，例如

```
[MyResource("email", 123)] 
```

您可以编写自定义 http 委托处理程序以从缓存中获取资源（例如）。验证客户端后，您就知道客户端的语言需求和资源 ID。因此，具有西班牙语和资源 id = 1 的客户端将获得“Si”，具有英语的客户端将获得“是”。资源 id 将映射到特定于语言的字符串。

# maven - 恢复 Maven 加密密码？

> ID：12807618
> 
> 赞同：10
> 
> 时间：2012-10-09T20:04:47.433
> 
> 标签：maven, password-encryption, password-recovery

我已经设置了 Maven 使用主密码进行密码加密，前段时间我用它加密了一个密码并将其存储在我的`settings.xml`. 密码已被 Maven 插件成功使用。

现在我想恢复该密码以在 Maven 之外使用（使用 Web 浏览器手动执行操作）。是否有一个命令可以简单地打印服务器密码的解密版本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-03-07T07:28:19.997

使用[maven-settings-decoder](https://github.com/jelmerk/maven-settings-decoder)工具。

# c - Sendto() still return me 0 bytes sent

> ID：12807619
> 
> 赞同：0
> 
> 时间：2012-10-09T20:04:53.970
> 
> 标签：c, sockets, gentoo, sendto

Some days ago i wrote a post about an error returned from sendto() . It returned me 0 bytes written tough i pass a non-null value as length.

```
void caught_packet(u_char *user_args,const struct pcap_pkthdr *cap_header,const u_char *packet){
    int bcount,sockfd; //Bytes written and Socket Descriptor
    char new_packet[sizeof(struct ip_hdr) + sizeof(struct tcp_hdr)]; //New Packet
    struct ip_hdr *iphdr; //IP Header
    struct tcp_hdr *tcphdr; //TCP Header
    struct ip_hdr *iphdr_new; //New IP Header
    struct tcp_hdr *tcphdr_new; //New TCP Header
    struct sockaddr_in sin; //sockaddr_in
    u_long src_ip,dest_ip; //source ip,dest ip
    int src_port,dest_port; //source port,dest port

    //Initialize New_Packer
    memset(new_packet,0,(sizeof(struct ip_hdr) + sizeof(struct tcp_hdr)));

    //Assign to sockfd argument passed by callback function
    sockfd = *((int *)user_args);

    //Assign old header to iphdr and tcphdr
    iphdr = (struct ip_hdr *)(packet + sizeof(struct ether_header));
    tcphdr = (struct tcp_hdr *)(packet + sizeof(struct ether_header) + sizeof(struct ip_hdr));

    //Assign new header to buffer new_packet converting its address in structs
    iphdr_new = (struct ip_hdr *) new_packet;
    tcphdr_new = (struct tcp_hdr *) (new_packet + sizeof(struct ip_hdr));
    src_ip = ntohl(iphdr -> ip_src_addr);
    dest_ip = ntohl(iphdr -> ip_dest_addr);
    src_port = ntohs(tcphdr -> tcp_src_port);
    dest_port = ntohs(tcphdr -> tcp_dest_port);
    sin.sin_family = AF_INET;

    //pretends to be source port
    sin.sin_port = htons(src_port);

    //pretends to be source address
    sin.sin_addr.s_addr = inet_addr(inet_ntoa(*((struct in_addr *)&src_ip)) );

    //Filling up new_iphdr
    //TOS
    iphdr_new->ip_tos = IPTOS_LOWDELAY;
    //TOT_LEN
    iphdr_new->ip_len = sizeof(struct ip_hdr)+sizeof(struct tcp_hdr);
    //ID
    iphdr_new->ip_id = htons((u_int16_t)random_number(3));
    //FRAG_OFF
    iphdr_new->ip_frag_offset = htons((u_int16_t)random_number(3));
    //TTL
    iphdr_new->ip_ttl = IPDEFTTL;
    //PROTOCOL
    iphdr_new->ip_type = IPPROTO_TCP;
    //Source address (Dest) <-->
    iphdr_new->ip_src_addr = htonl(dest_ip);
    //Destination address (Source) <-->
    iphdr_new->ip_dest_addr = htonl(src_ip);

    //Filling up new_tcphdr
    //Source port (Dest) <-->
    tcphdr_new->tcp_src_port = htons(dest_port);
    //Destination port (Source) <-->
    tcphdr_new->tcp_dest_port = htons(src_port);
    //SEQ (ACK) <-->
    tcphdr_new->tcp_seq = tcphdr->tcp_ack;
    //ACK  (SEQ) <-->
    tcphdr_new->tcp_ack = (tcphdr->tcp_seq + 1) ;
    //Flags  
    tcphdr_new->tcp_flags = TCP_SYN|TCP_ACK;
    //Window Size
    tcphdr_new->tcp_window = htons((u_int16_t)random_number(3));
    //Checksum (Done by Kernel)
    tcphdr_new->tcp_checksum = 0;
    //Urgent Pointer
    tcphdr_new->tcp_urgent = 0;
    //CheckSum Ip header
    iphdr_new->ip_checksum = csum((unsigned short *)new_packet,sizeof(struct ip_hdr) + sizeof(struct tcp_hdr));

    //Deliver packet to destination
    if(bcount = sendto (sockfd,new_packet,iphdr_new->ip_len,0,(struct sockaddr *)&sin,sizeof(sin))<0)
        printf("Couldn't send RESET Packet\n");
    else{
        printf("Bing! ");
        printf("(%d) bytes sent \n",bcount);
    }
} 
```

This is my code. the ip_hdr and tcp_hdr structs are my structs to make a simple ip and tcp header. It's so weird.It always worked in other softwares . Please help me.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:11:49.867

你忘了括号：

```
if( ( bcount = sendto (sockfd,new_packet,iphdr_new->ip_len,0,(struct sockaddr *)&sin,sizeof(sin))<0) ) 
```

由于赋值运算符 ( `=`) 的优先级低于小于运算符 ( `<`)，因此表达式

```
if (bcount = sendto( .. ) < 0 ) 
```

等于`

```
if (bcount = (sendto( .. ) < 0) ) 
```

并且由于发送了多个字节，因此它等于

```
if (bcount = 0 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:12:23.447

`bcount = sendto (sockfd,new_packet,iphdr_new->ip_len,0,(struct sockaddr *)&sin,sizeof(sin))<0`

问题是由运算符优先级引起的，您需要括号。

`(bcount = sendto (sockfd,new_packet,iphdr_new->ip_len,0,(struct sockaddr *)&sin,sizeof(sin))) < 0`

# c# - C# - 表单构造函数中的代码未执行

> ID：12807624
> 
> 赞同：6
> 
> 时间：2012-10-09T20:05:15.840
> 
> 标签：c#, winforms

C# 相对较新；希望我只是忽略了一些简单的事情。

我有一个名为“Exercise1”的表单，其中包含一个名为“drawingArea”的图片框和几个按钮。练习1的构造函数代码如下：

```
public Exercise1()
{
    InitializeComponent();
    paper = drawingArea.CreateGraphics();
    balloon = new Balloon("redBalloon", Color.Red, drawingArea.Width / 2, 
        drawingArea.Height / 2, 30);
    paper.Clear(Color.White);
    balloon.Display(paper);   
}
... 
```

'paper' 和 'balloon' 在构造函数上方创建为全局变量，用于表单上的其他方法。'paper' 和 'balloon' 都按照在构造函数中在表单上定义的其他方法中初始化的方式工作。

无论出于何种原因，命令

```
paper.Clear(Color.White); 
```

和

```
balloon.Display(paper); 
```

应该清除图片框并显示一个红色椭圆，不要执行（至少是可见的）。是什么赋予了？

**更新：** 我想我会喜欢这个网站的……你们很快！
@Nitesh：Exercise1 的构造函数是从另一种形式调用的。代码如下：

```
private void button1_Click(object sender, EventArgs e)
        {
            int exSelector = (int)numericUpDown1.Value;
            switch (exSelector)
            {
                case 1:
                    Exercise1 form1 = new Exercise1();
                    form1.Show();
                    break;
... 
```

@Sean Dunford：是的，是的。
@RBarryYoung：玩了一下，但没有运气。什么命令触发了练习 1 的 Form_Load 事件？

**更新：**此更改后的代码按预期工作：

```
public Exercise1()
        {
            InitializeComponent();
            paper = drawingArea.CreateGraphics();
            drawingArea.BackColor = Color.White;
            drawingArea.Paint += new PaintEventHandler(this.drawingArea_Paint);
            balloon = new Balloon("redBalloon", Color.Red, drawingArea.Width / 2, drawingArea.Height / 2, 30); 
        }
        private void drawingArea_Paint(object sender, PaintEventArgs e)
        {
            e.Graphics.Clear(Color.White);
            balloon.Display(e.Graphics);
        } 
... 
```

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:10:39.567

您不能在构造函数中进行绘图。要进行正确的绘图，您需要在屏幕上显示表格。您可以尝试使用该`Shown`事件来进行渲染（不过，当重新绘制表单时，这可能会丢失）。

通常最好的方法是在构造函数中设置你需要的任何标志，然后使用[`Paint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)表单的事件来完成所有的绘制。稍后，当您需要重新绘制某些内容时，设置需要呈现的任何状态，使您的表单无效（这会导致一个[`Paint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)事件），然后您可以重新绘制新状态。

如果您尝试进行自定义绘图（在您的[`Paint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)活动之外），您将面临随机变为空白的风险，或者当您调整/最小化表单时您的绘图可能会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:10:11.387

您在构造函数中使用 Graphics，这意味着您只在纸上绘制一次，无论出于何种原因在构造函数之后发生的任何重绘都将以原始方式绘制绘图区域。尝试将 PaintEventHandler 添加到 drawingArea 然后在 balloon.Display(e.Graphics); 内部调用

```
 public Exercise1()
    {
        InitializeComponent();

        balloon = new Balloon("redBalloon", Color.Red, drawingArea.Width / 2, 
        drawingArea.Height / 2, 30);

        drawingArea.Paint += new PaintEventHandler(drawingArea_Paint);
    }

    void drawingArea_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.Clear(Color.White);
        baloon.Display(e.Graphics);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:12:42.577

您应该覆盖表单[`OnPaint`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint%28v=vs.100%29.aspx)事件处理程序。这样做，您可以获得将重新绘制纸张和气球区域的图形上下文。

# vb.net - 在使用 Interop Services 时不断获得 Excel 和 Windows 提示

> ID：12807631
> 
> 赞同：0
> 
> 时间：2012-10-09T20:05:54.990
> 
> 标签：vb.net, excel, excel-interop

**所有这些都是在 VB.NET 中使用 Excel 14.0 互操作服务完成的**

我已经黔驴技穷了。在批处理运行过程中，我不断收到来自 Windows 和 excel 的提示。

我的程序接收一个带有批处理记录的工作簿，然后对每个批处理记录运行模拟，然后将结果写回 excel 文件。

步骤：

1.  打开工作簿
2.  检查工作簿是否已被另一个程序使用。
    1.  如果它正在使用中。我们尝试关闭工作簿。然后我们等待一段时间再试一次。
    2.  如果工作簿没有被使用，我们继续。
3.  获取内容
4.  将记录标记为正在处理
5.  保存并关闭文件。
6.  处理记录。
7.  执行上述相同的过程以打开工作簿。
8.  将结果保存到工作簿。
9.  关闭工作簿。
10.  循环这些过程，直到所有记录都被模拟。

好的，可能出现的问题：工作簿已在使用中，或者两个程序正在尝试同时与保存工作簿进行交互。

现在好了，我遇到的问题。当工作簿同时被两个程序交互时。提示将显示该文件当前正在使用中。

另一个我无法解释的问题是excel会显示一个提示，说明文件现在可以使用读写、通知、取消选项进行修改。

我需要找到一种以编程方式处理这些提示的方法。如果有人能指出我正确的方向，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:36:02.707

您可以通过设置阻止提示出现：

```
Dim xlApp As Excel.Application = New Excel.Application
xlApp.DisplayEvents = False 
```

但是我还没有找到一种方法来真正“捕捉”提示并做一些有用的事情。我注意到，如果 Interop 通常无法获取文件，那么它会抛出异常。该异常很少包含任何区分实际错误的方法，但有时您可以根据当时可能发生的情况来解决它。

# javascript - cfform 目标 iframe 页面丢失

> ID：12807632
> 
> 赞同：1
> 
> 时间：2012-10-09T20:05:55.270
> 
> 标签：javascript, ajax, forms, coldfusion

我有一个通过单击按钮由 javascript 提交的表单。这是一个 ajax 提交到 iframe。一切正常，直到我将标签从“form”更改为“cfform”。据我了解，这不应该引起问题，但显然，我错了。我需要cfform，因为我想使用带有richtext 属性的cftextarea。使用 cfform 标签，提交时 iframe 会显示 404，这完全让我难以置信。这是我的代码。

冷融合：

```
//In my code, the lines are not broken like this
<cfform action="<cfif IsDefined('URL.itemID')>
    actionEditItem.cfm
<cfelse>
    actionAddItem.cfm</cfif>"
method="post" target="my_iframe" name="itemForm" enctype="multipart/form-data">

//the button that submits the form, again, lines aren't broken
<input type="button" <cfif IsDefined('URL.itemID')>
    value='Update Item' onClick='javascript:updateItem();'
<cfelse>
    value='Add Item' onClick='javascript:validateItem();'
</cfif>> 
```

javascript:

```
 itemForm.submit(); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:41:24.683

您不能`cfform`像现在这样在标签内放置 CFIF。它试图渲染`cfform`和破坏。这不是常规 html 表单的问题。对于这种情况，我会设置一个临时变量并在`action`属性中使用它。

```
<cfif structkeyexists(url,"itemID")>
    <cfset formAction = "actionEditItem.cfm">
<cfelse>
    <cfset formAction = "actionAddItem.cfm">
</cfif>
<cfform action="#formAction#" method="post" target="my_iframe" name="itemForm" enctype="multipart/form-data">
... 
```

或者，如果您不想使用临时变量，则可以使用`IIF`.

```
<cfform action="#iif(structkeyexists(url,'itemID'),de('actionEditItem.cfm'),de('actionAddItem.cfm'))#"> 
```

# c#-4.0 - 需要知道如何在 C# 中进行指纹访问控制系统

> ID：12807634
> 
> 赞同：0
> 
> 时间：2012-10-09T20:05:58.610
> 
> 标签：c#-4.0, sdk, access-control, biometrics

我正在使用 C# 开发会员软件，但我需要实现访问控制并使用指纹技术搜索会员。有什么想法我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:13:21.243

[SourceAFIS](http://sourceforge.net/projects/sourceafis/)运行良好并且是 C#。我知道一家 Java 商店主要用 C# 编写他们的客户端代码，以便他们可以使用它。

# wpf - 为高度嵌套的样式颜色设置动画

> ID：12807644
> 
> 赞同：0
> 
> 时间：2012-10-09T20:06:37.947
> 
> 标签：wpf, xaml, animation

以下样式按预期工作（剥离了不相关的道具）：

```
<Style TargetType="PasswordBox">
    <Setter Property="Background">
        <Setter.Value>
            <VisualBrush>
                <VisualBrush.Visual>
                    <Canvas>
                        <Path>
                            <Path.Stroke>
                                <SolidColorBrush Color="{x:Static SystemColors.HighlightColor}"/>
                            </Path.Stroke>
                        </Path>
                    </Canvas>
                </VisualBrush.Visual>
            </VisualBrush>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <EventTrigger RoutedEvent="FrameworkElement.GotFocus">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimation Storyboard.TargetProperty="Background.Visual.Children[0].Stroke.Color"
                                    To="{x:Static SystemColors.WindowColor}"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Style.Triggers>
</Style> 
```

...但我怀疑这是最好的方法。这里有一件丑陋的事情是必须从一路到笔画颜色`ColorAnimation`进行长时间的`PropertyPath`遍历。`PasswordBox`

有没有办法缩写或整理这段代码？有没有办法重构它以使`PropertyPath`遍历更短？

到目前为止，我已经尝试将情节提要移入`Path.Resources`（但后来我无法从中引用它`Style.Triggers`）；并放入一个共享画笔`Style.Resources`并为其颜色设置动画（但随后我得到与线程/冻结相关的异常）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:12:33.187

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms748266.aspx)

> ...只有定义了样式的框架元素才能直接定位。

所以没有办法以命名样式部件为目标。

它建议您从样式目标向下点到要更改的属性，这就是您所做的。鉴于此，我认为这是你能做的最好的。

* * *

使用`Storyboard.TargetProperty`谷歌搜索词找到的结果

# php - Vqmod 通过添加错误所指的父文件名来改进错误记录

> ID：12807649
> 
> 赞同：1
> 
> 时间：2012-10-09T20:07:01.400
> 
> 标签：php, opencart

使用 vqmod 的默认错误记录如下：

```
---------- Date: 2012-10-09 19:46:06 ~ IP : 127.0.0.1 ----------
REQUEST URI : /oc/
MOD DETAILS:
   modFile   : C:\wamp\www\oc\vqmod\xml\templace.xml
   id        : Template
   version   : 1.5.2 - 1.5.2.1
   vqmver    : 1.0.8
   author    : templace.com
SEARCH NOT FOUND (ABORTING MOD): require_once(foo . 'library/template.php');

---------------------------------------------------------------------- 
```

导致错误的示例 vqmod

```
<modification>
    <id>Templace</id>
    <version>1.5.2 - 1.5.2.1</version>
    <author>templace.com</author>   
    <vqmver>1.0.8</vqmver>

    <file name="system/startup.php">
        <operation>
            <search position="before"><![CDATA[
            require_once(foo . 'library/template.php');
            ]]></search>
            <add><![CDATA[
            require_once(DIR_SYSTEM . 'library/templace.php');
            ]]></add>
        </operation>
    </file>
</modification> 
```

要解决此问题，我必须打开 vqmod 文件`templace.xml`并搜索`file[name]`此错误所指的内容。

**问题：**我如何添加`file[name]`实际错误所指的父级？

例如，在错误消息中添加：“system/startup.php”以使其更易于调试。

vqmod.php

```
/**
 * VQMod
 * @description Main Object used
 */
final class VQMod {
    private $_vqversion = '2.1.7';
    private $_modFileList = array();
    private $_mods = array();
    private $_filesModded = array();
    private $_cwd = '';
    private $_doNotMod = array();
    private $_virtualMode = true;

    public $useCache = false;
    public $logFilePath = 'vqmod/vqmod.log';
    public $vqCachePath = 'vqmod/vqcache/';
    public $protectedFilelist = 'vqmod/vqprotect.txt';
    public $logging = true;
    public $cacheTime = 5; // local=5secs live=60secs
    public $log;

    /**
     * VQMod::__construct()
     *
     * @param bool $path File path to use
     * @param bool $logging Enable/disabled logging
     * @return null
     * @description Startup of VQMod
     */
    public function __construct($path = false, $logging = true) {
        if(!class_exists('DOMDocument')) {
            die('ERROR - YOU NEED DOMDocument INSTALLED TO USE VQMod');
        }

        if(!$path){
            $path = dirname(dirname(__FILE__));
        }
        $this->_setCwd($path);

        $this->logging = (bool) $logging;
        $this->log = new VQModLog($this);

        $this->_getMods();
        $this->_loadProtected();
    }

    /**
     * VQMod::modCheck()
     *
     * @param string $sourceFile path for file
     * @return string
     * @description Checks if a file has modifications and applies them, returning cache files or the file name
     */
    public function modCheck($sourceFile) {

        if(!preg_match('%^([a-z]:)?[\\\\/]%i', $sourceFile)) {
            $sourcePath = $this->path($sourceFile);
        } else {
            $sourcePath = realpath($sourceFile);
        }

        if(!$sourcePath || is_dir($sourcePath) || in_array($sourcePath, $this->_doNotMod)) {
            return $sourceFile;
        }

        $stripped_filename = preg_replace('~^' . preg_quote($this->getCwd(), '~') . '~', '', $sourcePath);
        $cacheFile = $this->_cacheName($stripped_filename);

        if($this->useCache && file_exists($cacheFile)) {
            //return $cacheFile; // useCache being Deprecated in favor of cacheTime
        }

        if(isset($this->_filesModded[$sourcePath])) {
            return $this->_filesModded[$sourcePath]['cached'] ? $cacheFile : $sourceFile;
        }

        $changed = false;
        $fileHash = sha1_file($sourcePath);
        $fileData = file_get_contents($sourcePath);

        foreach($this->_mods as $modObject) {
            foreach($modObject->mods as $path => $mods) {
                if($this->_checkMatch($path, $sourcePath)) {
                    $modObject->applyMod($mods, $fileData);
                }
            }
        }

        // START QPHORIA CACHELOCK CODE
        //
        if (sha1($fileData) != $fileHash) {
            $writePath = $cacheFile;
            $cacheLock = false;
            if(file_exists($writePath) && ((filemtime($writePath) + (float)$this->cacheTime) >= time())) {
                $cacheLock = true;
                $changed = true;
            }
            if(!$cacheLock && (!file_exists($writePath) || is_writable($writePath))) {
                file_put_contents($writePath, $fileData);
                $changed = true;
            } else {
                //file_put_contents('./cachelock.txt', "$writePath \r\n", FILE_APPEND); // debugging only.
            }
            //file_put_contents('./cachetotal.txt', "$writePath \r\n", FILE_APPEND);
        } // END QPHORIA CACHELOCK CODE

        /* Original Code
        if(sha1($fileData) != $fileHash) {
            $writePath = $this->_virtualMode ?  $cacheFile : $sourcePath;
            if(!file_exists($writePath) || is_writable($writePath)) {
                file_put_contents($writePath, $fileData);
                $changed = true;
            }
        }*/

        $this->_filesModded[$sourcePath] = array('cached' => $changed);
        return $changed ? $writePath : $sourcePath;
    }

    /**
     * VQMod::path()
     *
     * @param string $path File path
     * @param bool $skip_real If true path is full not relative
     * @return bool, string
     * @description Returns the full true path of a file if it exists, otherwise false
     */
    public function path($path, $skip_real = false) {
        $tmp = $this->_cwd . $path;
        $realpath = $skip_real ? $tmp : realpath($tmp);
        if(!$realpath) {
            return false;
        }
        if(is_dir($realpath)) {
            $realpath = rtrim($realpath, DIRECTORY_SEPARATOR) . DIRECTORY_SEPARATOR;
        }
        return $realpath;
    }

    /**
     * VQMod::getCwd()
     *
     * @return string
     * @description Returns current working directory
     */
    public function getCwd() {
        return $this->_cwd;
    }

    /**
     * VQMod::_getMods()
     *
     * @return null
     * @description Gets list of XML files in vqmod xml folder for processing
     */
    private function _getMods() {

        $this->_modFileList = glob($this->path('vqmod/xml/') . '*.xml');

        if($this->_modFileList) {
            $this->_parseMods();
        } else {
            $this->log->write('NO MODS IN USE');
        }
    }

    /**
     * VQMod::_parseMods()
     *
     * @return null
     * @description Loops through xml files and attempts to load them as VQModObject's
     */
    private function _parseMods() {

        $dom = new DOMDocument('1.0', 'UTF-8');
        foreach($this->_modFileList as $modFileKey => $modFile) {
            if(file_exists($modFile)) {
                if(@$dom->load($modFile)) {
                    $mod = $dom->getElementsByTagName('modification')->item(0);
                    $this->_mods[] = new VQModObject($mod, $modFile, $this);
                } else {
                    $this->log->write('DOM UNABLE TO LOAD: ' . $modFile);
                }
            } else {
                $this->log->write('FILE NOT FOUND: ' . $modFile);
            }
        }
    }

    /**
     * VQMod::_loadProtected()
     *
     * @return null
     * @description Loads protected list and adds them to _doNotMod array
     */
    private function _loadProtected() {
        $file = $this->path($this->protectedFilelist);
        if($file && is_file($file)) {
            $protected = file_get_contents($file);
            if(!empty($protected)) {
                $protected = preg_replace('~\r?\n~', "\n", $protected);
                $paths = explode("\n", $protected);
                foreach($paths as $path) {
                    $fullPath = $this->path($path);
                    if($fullPath && !in_array($fullPath, $this->_doNotMod)) {
                        $this->_doNotMod[] = $fullPath;
                    }
                }
            }
        }
    }

    /**
     * VQMod::_cacheName()
     *
     * @param string $file Filename to be converted to cache filename
     * @return string
     * @description Returns cache file name for a path
     */
    private function _cacheName($file) {
        return $this->path($this->vqCachePath) . 'vq2-' . preg_replace('~[/\\\\]+~', '_', $file);
    }

    /**
     * VQMod::_setCwd()
     *
     * @param string $path Path to be used as current working directory
     * @return null
     * @description Sets the current working directory variable
     */
    private function _setCwd($path) {
        $realpath = realpath($path);
        if(!$realpath) {
            die('COULDNT RESOLVE CWD REALPATH');
        }
        $this->_cwd = rtrim($realpath, DIRECTORY_SEPARATOR) . DIRECTORY_SEPARATOR;
    }

    /**
     * VQMod::_checkMatch()
     *
     * @param string $modFilePath Modification path from a <file> node
     * @param string $checkFilePath File path
     * @return bool
     * @description Checks a modification path against a file path
     */
    private function _checkMatch($modFilePath, $checkFilePath) {
        $modFilePath = str_replace('\\', '/', $modFilePath);
        $checkFilePath = str_replace('\\', '/', $checkFilePath);

        $modFilePath = preg_replace('/([^*]+)/e', 'preg_quote("$1", "~")', $modFilePath);
        $modFilePath = str_replace('*', '[^/]*', $modFilePath);
        $return = (bool) preg_match('~^' . $modFilePath . '$~', $checkFilePath);
        return $return;

    }
}

/**
 * VQModLog
 * @description Object to log information to a file
 */
class VQModLog {
    private $_sep;
    private $_vqmod;
    private $_defhash = 'da39a3ee5e6b4b0d3255bfef95601890afd80709';
    private $_logs = array();

    /**
     * VQModLog::__construct()
     *
     * @param VQMod $vqmod VQMod main class as reference
     * @return null
     * @description Object instantiation method
     */
    public function __construct(VQMod $vqmod) {
        $this->_vqmod = $vqmod;
        $this->_sep = str_repeat('-', 70);
    }

    /**
     * VQModLog::__destruct()
     *
     * @return null
     * @description Logs any messages to the log file just before object is destroyed
     */
    public function __destruct() {
        if(empty($this->_logs) || $this->_vqmod->logging == false) {
            return;
        }

        $txt = array();

        $txt[] = str_repeat('-', 10) . ' Date: ' . date('Y-m-d H:i:s') . ' ~ IP : ' . (isset($_SERVER['REMOTE_ADDR']) ? $_SERVER['REMOTE_ADDR'] : 'N/A') . ' ' . str_repeat('-', 10);
        $txt[] = 'REQUEST URI : ' . $_SERVER['REQUEST_URI'];

        foreach($this->_logs as $count => $log) {
            if($log['obj']) {
                $vars = get_object_vars($log['obj']);
                $txt[] = 'MOD DETAILS:';
                foreach($vars as $k => $v) {
                    if(is_string($v)) {
                        $txt[] = '   ' . str_pad($k, 10, ' ', STR_PAD_RIGHT) . ': ' . $v;
                    }
                }

            }

            foreach($log['log'] as $msg) {
                $txt[] = $msg;
            }

            if ($count > count($this->_logs)-1) {
                $txt[] = '';
            }
        }

        $txt[] = $this->_sep;
        $txt[] = str_repeat(PHP_EOL, 2);

        $logPath = $this->_vqmod->path($this->_vqmod->logFilePath, true);
        if(!file_exists($logPath)) {
            $res = file_put_contents($logPath, '');
            if($res === false) {
                die('COULD NOT WRITE TO LOG FILE');
            }
        }

        file_put_contents($logPath, implode(PHP_EOL, $txt), FILE_APPEND);
    }

    /**
     * VQModLog::write()
     *
     * @param string $data Text to be added to log file
     * @param VQModObject $obj Modification the error belongs to
     * @return null
     * @description Adds error to log object ready to be output
     */
    public function write($data, VQModObject $obj = NULL) {
        if($obj) {
            $hash = sha1($obj->id);
        } else {
            $hash = $this->_defhash;
        }

        if(empty($this->_logs[$hash])) {
            $this->_logs[$hash] = array(
                'obj' => $obj,
                'log' => array()
            );
        }

        $this->_logs[$hash]['log'][] = $data;

    }
}

/**
 * VQModObject
 * @description Object for the <modification> that orchestrates each applied modification
 */
class VQModObject {
    public $modFile = '';
    public $id = '';
    public $version = '';
    public $vqmver = '';
    public $author = '';
    public $mods = array();

    private $_vqmod;
    private $_skip = false;

    /**
     * VQModObject::__construct()
     *
     * @param DOMNode $node <modification> node
     * @param string $modFile File modification is from
     * @param VQMod $vqmod VQMod object as reference
     * @return null
     * @description Loads modification meta information
     */
    public function __construct(DOMNode $node, $modFile, VQmod $vqmod) {
        if($node->hasChildNodes()) {
            foreach($node->childNodes as $child) {
                $name = (string) $child->nodeName;
                if(isset($this->$name)) {
                    $this->$name = (string) $child->nodeValue;
                }
            }
        }

        $this->modFile = $modFile;
        $this->_vqmod = $vqmod;
        $this->_parseMods($node);
    }

    /**
     * VQModObject::skip()
     *
     * @return bool
     * @description Returns the skip status of a modification
     */
    public function skip() {
        return $this->_skip;
    }

    /**
     * VQModObject::applyMod()
     *
     * @param array $mods Array of search add nodes
     * @param string $data File contents to be altered
     * @return null
     * @description Applies all modifications to the text data
     */
    public function applyMod($mods, &$data) {
        if($this->_skip) return;
        $tmp = $data;

        foreach($mods as $mod) {
            $indexCount = 0;
            $tmp = $this->_explodeData($tmp);
            $lineMax = count($tmp) - 1;

            switch($mod['search']->position) {
                case 'top':
                $tmp[$mod['search']->offset] =  $mod['add']->getContent() . $tmp[$mod['search']->offset];
                break;

                case 'bottom':
                $offset = $lineMax - $mod['search']->offset;
                if($offset < 0){
                    $tmp[-1] = $mod['add']->getContent();
                } else {
                    $tmp[$offset] .= $mod['add']->getContent();
                }
                break;

                case 'all':
                $tmp = array($mod['add']->getContent());
                break;

                default:

                $changed = false;
                foreach($tmp as $lineNum => $line) {
                    if($mod['search']->regex == 'true') {
                        $pos = @preg_match($mod['search']->getContent(), $line);
                        if($pos === false) {
                            if($mod['error'] == 'log' || $mod['error'] == 'abort' ) {
                                $this->_vqmod->log->write('INVALID REGEX ERROR - ' . $mod['search']->getContent(), $this);
                            }
                            continue 2;
                        } elseif($pos == 0) {
                            $pos = false;
                        }
                    } else {
                        $pos = strpos($line, $mod['search']->getContent());
                    }

                    if($pos !== false) {
                        $indexCount++;
                        $changed = true;

                        if(!$mod['search']->indexes() || ($mod['search']->indexes() && in_array($indexCount, $mod['search']->indexes()))) {

                            switch($mod['search']->position) {
                                case 'before':
                                $offset = ($lineNum - $mod['search']->offset < 0) ? -1 : $lineNum - $mod['search']->offset;
                                $tmp[$offset] = empty($tmp[$offset]) ? $mod['add']->getContent() : $mod['add']->getContent() . "\n" . $tmp[$offset];
                                break;

                                case 'after':
                                $offset = ($lineNum + $mod['search']->offset > $lineMax) ? $lineMax : $lineNum + $mod['search']->offset;
                                $tmp[$offset] = $tmp[$offset] . "\n" . $mod['add']->getContent();
                                break;

                                default:
                                if(!empty($mod['search']->offset)) {
                                    for($i = 1; $i <= $mod['search']->offset; $i++) {
                                        if(isset($tmp[$lineNum + $i])) {
                                            $tmp[$lineNum + $i] = '';
                                        }
                                    }
                                }

                                if($mod['search']->regex == 'true') {
                                    $tmp[$lineNum] = preg_replace($mod['search']->getContent(), $mod['add']->getContent(), $line);
                                } else {
                                    $tmp[$lineNum] = str_replace($mod['search']->getContent(), $mod['add']->getContent(), $line);
                                }
                                break;
                            }
                        }
                    }
                }

                if(!$changed) {
                    $skip = ($mod['error'] == 'skip' || $mod['error'] == 'log') ? ' (SKIPPED)' : ' (ABORTING MOD)';

                    if($mod['error'] == 'log' || $mod['error'] == 'abort') {
                        $this->_vqmod->log->write('SEARCH NOT FOUND' . $skip . ': ' . $mod['search']->getContent(), $this);
                    }

                    if($mod['error'] == 'abort') {
                        $this->_skip = true;
                        return;
                    }

                }

                break;
            }
            ksort($tmp);
            $tmp = $this->_implodeData($tmp);
        }

        $data = $tmp;
    }

    /**
     * VQModObject::_parseMods()
     *
     * @param DOMNode $node <modification> node to be parsed
     * @return null
     * @description Parses modifications in preparation for the applyMod method to work
     */
    private function _parseMods(DOMNode $node){
        $files = $node->getElementsByTagName('file');

        foreach($files as $file) {
            $fileToMod = $file->getAttribute('name');
            $error = ($file->hasAttribute('error')) ? $file->getAttribute('error') : 'log';
            $fullPath = $this->_vqmod->path($fileToMod);

            if(!$fullPath){
                if(strpos($fileToMod, '*') !== false) {
                    $fullPath = $this->_vqmod->getCwd() . $fileToMod;
                } else {
                    if ($error == 'log' || $error == 'abort') {
                        $skip = ($error == 'log') ? ' (SKIPPED)' : ' (ABORTING MOD)';
                        $this->_vqmod->log->write('Could not resolve path for [' . $fileToMod . ']' . $skip, $this);
                    }

                    if ($error == 'log' || $error == 'skip') {
                        continue;
                    } elseif ($error == 'abort') {
                        return false;
                    }
                }
            }

            $operations = $file->getElementsByTagName('operation');

            foreach($operations as $operation) {

                $error = ($operation->hasAttribute('error')) ? $operation->getAttribute('error') : 'abort';

                $this->mods[$fullPath][] = array(
                    'search'        => new VQSearchNode($operation->getElementsByTagName('search')->item(0)),
                    'add'           => new VQAddNode($operation->getElementsByTagName('add')->item(0)),
                    'error'         => $error
                );
            }
        }
    }

    /**
     * VQModObject::_explodeData()
     *
     * @param string $data File contents
     * @return string
     * @description Splits a file into an array of individual lines
     */
    private function _explodeData($data) {
        return explode("\n", $data);
    }

    /**
     * VQModObject::_implodeData()
     *
     * @param array $data Array of lines
     * @return string
     * @description Joins an array of lines back into a text file
     */
    private function _implodeData($data) {
        return implode("\n", $data);
    }
}

/**
 * VQNode
 * @description Basic node object blueprint
 */
class VQNode {
    public $trim = 'false';

    private $_content = '';

    /**
     * VQNode::__construct()
     *
     * @param DOMNode $node Search/add node
     * @return null
     * @description Parses the node attributes and sets the node property
     */
    public function  __construct(DOMNode $node) {
        $this->_content = $node->nodeValue;

        if($node->hasAttributes()) {
            foreach($node->attributes as $attr) {
                $name = $attr->nodeName;
                if(isset($this->$name)) {
                    $this->$name = $attr->nodeValue;
                }
            }
        }
    }

    /**
     * VQNode::getContent()
     *
     * @return string
     * @description Returns the content, trimmed if applicable
     */
    public function getContent() {
        $content = ($this->trim == 'true') ? trim($this->_content) : $this->_content;
        return $content;
    }
}

/**
 * VQSearchNode
 * @description Object for the <search> xml tags
 */
class VQSearchNode extends VQNode {
    public $position = 'replace';
    public $offset = 0;
    public $index = 'false';
    public $regex = 'false';
    public $trim = 'true';

    /**
     * VQSearchNode::indexes()
     *
     * @return bool, array
     * @description Returns the index values to use the search on, or false if none
     */
    public function indexes() {
        if($this->index == 'false') {
            return false;
        }
        $tmp = explode(',', $this->index);
        foreach($tmp as $k => $v) {
            if(!is_int($v)) {
                unset($k);
            }
        }
        $tmp = array_unique($tmp);
        return empty($tmp) ? false : $tmp;
    }
}

/**
 * VQAddNode
 * @description Object for the <add> xml tags
 */
class VQAddNode extends VQNode {
} 
```

还有一些其他想法可以使调试更加容易：

1.  列出以前编辑过此相同文件的任何其他 vqmod 文件。这是另一个常见问题，我发现两个扩展程序正在编辑同一个文件，而后者导致错误，但了解任何其他 vqmods 编辑同一个文件会很有用。是的，我想我可以添加`error="skip"`所有内容，但不认为这是隐藏所有错误的最佳方法，应该让用户知道存在错误......

2.  “建议修复”，也许是一些聪明的方法可以测试它是什么类型的错误。与我上面所说的相矛盾，但即使是最基本的形式，如果它不是必需的，你也可以建议隐藏错误。这样任何人都可以阅读它并了解它是如何修复它的。例如

    ```
    OPEN: vqmod/xml/templace.xml (line:23)
    FIND: <operation>
    REPLACE <operation error="skip"> 
    ```

3.  在 XML 文件中添加错误来自的行号。不必一直搜索并且可以快速转到 vqmod 中的行号会很可爱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:43:26.387

正在编辑的文件的问题肯定是一个过期的问题，我计划在下一版本的 vQmod 中添加一个问题。至于其他建议

1.  有趣的想法，当然可以考虑。我看到的唯一问题是它可能会使一些日志文件变得巨大
2.  这几乎是不可能合并的
3.  如果没有一些非常昂贵的运行时，这是不可能的。错误并不在于 XML 本身，因此需要重新打开已解析的 xml，逐行搜索有问题的行，然后报告。这听起来很简单，但您必须记住，xml 可以为多个操作使用相同的搜索参数 - 所以在这种情况下，您最好自己搜索文件

# jpa - 如何在 JPA 中分离关联对象

> ID：12807650
> 
> 赞同：2
> 
> 时间：2012-10-09T20:07:03.883
> 
> 标签：jpa, datanucleus, detach

我已经使用 em.clear() 分离了所有实体，但我没有看到关联的对象被分离？如何分离关联的对象？

```
 I have a method as : 

 public CustomerSurvey getSurveyByRequest(long requestNo)
        throws WorkServiceException {
    logger.debug("Inside getSurveyByRequest : " + requestNo);
    EntityManager em = entityManagerFactory.createEntityManager();
    Query query = em.createNamedQuery("customerSurvey.findByRequest")
            .setParameter("srNo", requestNo);
    List<CustomerSurvey> surveys = query.getResultList();
    **em.clear();**
    em.close();
    return surveys.get(0);
} 
```

客户调查.java：

```
@Entity
@Table(name = "CUSTOMER_SURVEY", uniqueConstraints = { @UniqueConstraint(columnNames 
= "SERVEYID") })
@SequenceGenerator(name="CUSTOMER_SURVEY_SEQUENCE", 
sequenceName="CUSTOMER_SURVEY_SEQUENCE", initialValue=1, allocationSize=100)

@NamedQueries({
@NamedQuery(name="customerSurvey.findByRequest",
        query="SELECT survey FROM CustomerSurvey survey " +
                "WHERE survey.serviceRequest.srNo = :srNo")
})

public class CustomerSurvey implements Serializable {

@Id @GeneratedValue(strategy=GenerationType.SEQUENCE, 
generator="CUSTOMER_SURVEY_SEQUENCE")
@Column(name = "SURVEYID", nullable = false)
private String surveyId;

     @ManyToOne(fetch=FetchType.LAZY, cascade=CascadeType.DETACH)
@JoinColumn(name="CUSTNO", referencedColumnName="CustNO")
private Customer customer;

@Column(name="AVGRATINGS")
private int avgRatings;

@Column(name="COMMENTS")
private String comments;

@Column(name="SENTON")
private Date sentOn;

@Column(name="RESPONDEDON")
private Date respondedOn;

@OneToMany(fetch=FetchType.LAZY,mappedBy="customerSurvey")
private Set<SurveyResponse> responses;

@OneToOne(fetch=FetchType.LAZY)
@JoinColumn(name="SRNO")
private ServiceRequest serviceRequest; 
```

我的测试课：

```
CustomerSurvey survey = workService.getSurveyByRequest(request.getSrNo());
        System.out.println("survey = " + survey);
        System.out.println("survey id = " + survey.getSurveyId());
        System.out.println("survey customer = " + survey.getCustomer()); 
```

错误信息：

调查 = com.ge.dsp.iwork.entity.CustomerSurvey@36b88ea5 调查 id = 131 线程“SpringOsgiExtenderThread-134”中的异常 org.springframework.beans.factory.BeanCreationException：创建 URL [bundle 中定义的名称为“testCloseRequest”的 bean 时出错://178.124:0/META-INF/spring/module-context.xml]：init 方法调用失败；嵌套异常是 javax.jdo.JDODetachedFieldAccessException：**您刚刚尝试访问字段“客户”，但在分离对象时该字段未分离。要么不要访问此字段，要么在分离对象时将其分离。** AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320) at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132) at java.lang.Thread.run(Thread.java: 662）原因：javax.jdo.JDODetachedFieldAccessException：您刚刚尝试访问字段“客户”，但在您分离对象时该字段未分离。要么不要访问此字段，要么在分离对象时将其分离。在 com.ge.dsp.iwork.entity.CustomerSurvey.jdoGetcustomer(CustomerSurvey.java) 在 com.ge.dsp.iwork.entity.CustomerSurvey.getCustomer(CustomerSurvey.java:89) 在 com.ge.dsp.iwork.test .WorkServiceTest。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:16:22.320

**当前加载**的所有字段都被分离。您的字段未急切加载，并且您似乎没有访问过它，因此未加载它，因此未分离。您显然可以访问它，或将其设为 EAGER，或使用 DataNucleus 提取组扩展来加载它。您也可以只查看日志以查看分离过程

# javascript - 将 Nodejs 和 oauth 与 gmail 一起使用

> ID：12807651
> 
> 赞同：3
> 
> 时间：2012-10-09T20:07:06.170
> 
> 标签：javascript, node.js, oauth, gmail

我在很大程度上理解 oauth 的概念。我做了很多研究，但我很难理解如何使用 oauth 来访问 Gmail。我似乎找不到任何具体的文档。

我知道有很多用于 oauth 的节点库，您会推荐我使用哪一个？有没有关于使用 node 和 oauth 的新手友好教程？

只是一般的东西；我只需要从某个地方开始，这样我就可以了解如何将 oauth 与 nodejs 一起应用。

我以前用过nodejs，但我不能说我是这方面的专家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:18:38.503

首先按照[Web 服务器应用程序流程](https://developers.google.com/accounts/docs/OAuth2WebServer)获取访问令牌。您可以查看[node-oauth](https://github.com/ciaranj/node-oauth)来完成此操作。

然后你需要一个支持 Google 的[XOAUTH2 认证机制](https://developers.google.com/google-apps/gmail/xoauth2_protocol#the_sasl_xoauth2_mechanism)的 IMAP 库。幸运的是，最近添加了这个[node-imap 。](https://github.com/mscdex/node-imap)

# mobiscroll - 带有轮子选项的 Mobiscroll 使用 display:inline 中断

> ID：12807653
> 
> 赞同：0
> 
> 时间：2012-10-09T20:07:15.463
> 
> 标签：mobiscroll

刚刚找到这个插件，到目前为止非常喜欢它。但是，我遇到了麻烦。当我使用轮子选项时，我无法正常使用 display:inline 选项。如果我删除 display:inline 选项并让它默认显示输入，我可以单击它，它会以模态方式显示所有内容并正确滚动。使用 inline 选项，滚动条将无法正常工作。希望有人可以提供一些帮助。谢谢！这是我的代码：

```
 var options = [{
        'Wheel 1': {
            Option1: 'Option1'
                , Option2: 'Option2'
                , Option3: 'Option3'
                , Option4: 'Option4'
                , Option5: 'Option5'
                , Option6: 'Option6'
                , Option7: 'Option7'
        }
            , 'Wheel 2': {
                Option1: 'Option1'
                , Option2: 'Option2'
                , Option3: 'Option3'
                , Option4: 'Option4'
            }
            , 'Wheel 3': {
                Option1: 'Option1'
                , Option2: 'Option2'
                , Option3: 'Option3'
            }
    }];

    $('#ProjectSpinner').scroller({
       theme: 'default',
       preset: 'select',
       rows:3,
       //display: 'inline' <-- This is what kills it,
       mode: 'scroller',
       showLabel: true,
       headerText: '<p style="font-weight:bold;font-size:1.3em;">Automagically Spin Up Your Project</p>',
       wheels: options,
       onShow: function (html, instance) {
           $("input[id$='_dummy']").hide();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:24:33.090

问题是您正在使用带有自定义轮子的选择预设。您不应该同时使用两者。您要么使用不带轮子选项的选择预设，要么使用不带预设选项的自定义轮子。

# ios - IOS中YouTube的搜索功能

> ID：12807654
> 
> 赞同：0
> 
> 时间：2012-10-09T20:07:37.837
> 
> 标签：ios, uisearchbar, uinavigationitem

[http://coolappsman.com/wp-content/uploads/2012/09/YouTube-App-Search.jpg](http://coolappsman.com/wp-content/uploads/2012/09/YouTube-App-Search.jpg)

您好，我正在寻找一些 YouTube 搜索功能的实现技巧。我想实现完全相同的东西，但没有“根据搜索词显示提示”功能。

换句话说，我想要一个更简单的版本。当用户单击“搜索按钮”时，如何使 NavigatorBar 消失，然后在用户搜索他们要查找的内容后使 NavigatorBar 再次出现？如果您已经看过该应用程序，那么我要解释的内容就很清楚了。

任何人都知道一个很好的教程来实现这样的东西？这需要什么方法？我很感激所有的提示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:27:13.380

杰斯珀。你要实现的概念很难做到，那就是高度定制化的控制。不是在同一个视图中显示结果，而是使用结果表推送一个新控制器。

但是，您可以从 UISearchDisplayController 开始。请参阅[Apple 的 TableSearch 示例。](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html)

# android - 是否有用于查看时刻和相册的 Google+ API？

> ID：12807655
> 
> 赞同：-1
> 
> 时间：2012-10-09T20:07:40.937
> 
> 标签：android, google-plus

可能重复：[是否已有 Google+ API？](https://stackoverflow.com/questions/6518150/is-there-already-a-google-api)

我知道最近出现了一个新的 Google+ API：http: [//developers.google.com/+/](http://developers.google.com/+/)

但是，它仅限于写作时刻、分享、+1。我希望能够查看 Facebook/Twitter 等提要/图片。

它不可用吗？还是我看的地方不对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:48:31.797

Currently the [Google+ History API](https://developers.google.com/+/history/) only supports writing moments. The history API is still in developer preview, which means it is not yet final and subject to changes.

If you follow the [Google+ Developers page](https://plus.google.com/+GooglePlusDevelopers/posts), you'll hear about any updates as soon as they are released. You can also sign up for the [platform preview group](http://www.google.com/+/learnmore/platform-preview/) to test upcoming changes and hear about updates.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T02:25:35.027

什么是“片刻”？G+ 将图片存储在 Picasa 上，因此您可以使用 Picasa API 来获取图片。AFAIK 没有“完整”的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:59:33.003

要从 Google+ API 读取，您需要使用 REST 端点。它记录在这里：

[https://developers.google.com/+/api/](https://developers.google.com/+/api/)

这里有一个在 Android 中使用 REST api 的示例：

[https://developers.google.com/+/mobile/android/](https://developers.google.com/+/mobile/android/)

该示例使用 REST api 编写了片刻，但应该直接使用它从公共数据 api 中读取。

# url - 向搜索引擎机器人隐藏网页

> ID：12807657
> 
> 赞同：1
> 
> 时间：2012-10-09T20:07:46.587
> 
> 标签：url, hide, robots.txt, web-crawler

我需要向所有蜘蛛机器人隐藏我的所有网站页面，除了应该从机器人解析的主页（www.site.com）。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:18:52.173

添加到您不想索引标签的所有页面`<meta name="robots" content="noindex" />`

或者你可以`robots.txt`在你的文档根目录中创建并放上类似的东西：

```
User-agent: *
Allow: /$
Disallow: /* 
```

# c++ - boost::intrusive::unordered_set 的存储桶中使用了什么存储策略？

> ID：12807659
> 
> 赞同：2
> 
> 时间：2012-10-09T20:07:48.380
> 
> 标签：c++, performance, boost, hashmap, unordered-map

我知道内部提升存储桶是作为喜欢列表实现的，对吗？至少根据[http://www.boost.org/doc/libs/1_50_0/doc/html/unordered/buckets.html](http://www.boost.org/doc/libs/1_50_0/doc/html/unordered/buckets.html)似乎是这样。

我的问题是，这些桶中元素的顺序是什么？如果它们是无序的，是否有任何方法可以对这些存储桶中的项目顺序执行 MRU（最近使用的）或其他一些向前移动的启发式方法？

编辑：我理解反对在存储桶内执行 MRU 的论点。但在我的具体情况下，我知道，执行 MRU [或什至具有后进先服务] 将优于负载因子较小的情况。问题是，顺序是什么？有没有一种简单的方法来强制至少最后插入先出和服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:40:12.617

桶未排序。桶未排序的原因令人信服。虽然我确信您已经意识到这一点，但我将列举几个来帮助该网站的未来访问者。

1.  哈希映射类型的数据结构不应使迭代器无效，除非插入导致重新哈希
2.  为了保持快速查找，桶应该很小；理想情况下，每个桶应该只有一个元素。

在我看来，强制执行桶的 MRU 排序似乎首先违背了哈希映射类型结构的整个想法。这个想法是保持桶小，这样平均来说，桶中的第一个项目就是你真正要找的那个。

因此，我怀疑是否有任何内置方法可以在存储桶中强制执行 MRU 排序。我建议改为调整您的哈希算法，也许会降低您的最大负载因子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T00:12:02.143

经过一些黑客攻击，回答我自己的问题。

Boost buckets 的实现位于： http: [//www.boost.org/doc/libs/1_51_0/boost/unordered/detail/buckets.hpp](http://www.boost.org/doc/libs/1_51_0/boost/unordered/detail/buckets.hpp)。

尽管这是特定于实现的并且可能随时更改，但目前，对于侵入性 unordered_set，桶遍历 [in .find()]*从最后插入的项目开始*。

例如，如果您要声明一个包含 1000 个存储桶的 unordered_set：

```
class A : public unordered_set_base_hook<> { ... }
unordered_set<A>::bucket_type buckets[1000];
unordered_set<A> a(unordered_set<A>::bucket_traits(buckets, 1000)); 
```

并插入 10000 个随机抽样的项目 [负载因子 10 高得离谱]，*最后插入的项目将具有更快的 [按数量级] 访问 [查找] 时间*。

# ios - iOS照片库库？

> ID：12807660
> 
> 赞同：0
> 
> 时间：2012-10-09T20:07:52.487
> 
> 标签：ios, open-source, photo-gallery

两个月前我找到了一个图书馆，现在我不记得它的名字了。它基本上是这样做的：

![在此处输入图像描述](../Images/5fb2da9897b5eddbca2b33c748c9a2ab.png)

我有多个不同大小的矩形，我想将它们添加到这个可滚动视图中。

有人知道那个图书馆的名字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T19:16:33.173

这是 pinterest 风格的布局，我建议看这里：

[https://www.cocoacontrols.com/tags/pinterest](https://www.cocoacontrols.com/tags/pinterest)

CocoaControls.com 是我搜索自定义 ios 控件的第一个地方，我非常推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T18:50:53.310

看起来像合理的视图。在这里获取：

[https://www.cocoacontrols.com/controls/justified-view](https://www.cocoacontrols.com/controls/justified-view)

[https://github.com/jhsonzhi/JustifiedView](https://github.com/jhsonzhi/JustifiedView)

# nopcommerce - nopCommerce 有日志文件吗？如果是这样，它存储在什么位置？

> ID：12807663
> 
> 赞同：2
> 
> 时间：2012-10-09T20:08:00.973
> 
> 标签：nopcommerce

我一直在等待 nopCommerce 安装大约半小时（安装到免费级别的 AWS 服务器上），我很想看看安装是否仍在继续，或者它是否在某个时候崩溃了。

nopCommerce 是否输出我可以使用 bartail 之类的工具查看的日志文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:44:10.030

首先，NopCommerce 的安装令人头疼。这需要很长时间，没有人知道它是否在做某事。但是，根据我使用 NopCommerce 的经验，我已经安装了 10 多次，而且从未失败过。所以，这只是一个等待的问题。

要回复您对日志的回答，有一个存储所有错误的 SQL 表“日志”，管理员还可以选择查看该表的报告。这真的很好。

但是，由于正在安装 NopCommerce 并且此表可能尚不存在，您也可以使用事件查看器检查 Windows 事件日志。

# javascript - 如何删除 jQuery 手风琴的一部分？

> ID：12807668
> 
> 赞同：1
> 
> 时间：2012-10-09T20:08:23.750
> 
> 标签：javascript, jquery, html, accordion, jquery-ui-accordion

所以，我有一个手风琴菜单，在每个 div 中都有一个红色方块。我正在努力做到这一点，以便当我单击红色方块时，特定的 div 和 < h3 > 链接都消失了。我可以让 div 离开，但标题总是保持不变，我不知道如何选择和删除它。一如既往地感谢。

我的 HTML：

```
<div id="accordion">

    <h3><a href="#">Section 1</a></h3>
    <div class="squares">
            <a href="#" class="green">1</a>
            <a href="# "class="red">2</a>
            <a href="#" class="blue">3</a>  
            <p>
            Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
            ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
            amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
            odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
            </p>
    </div>
</div> 
```

这是我的 JS：

```
$('document').ready(function(){
  $('#accordion .red').click(function(){
    $(this).parent('div').remove();

    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:10:20.323

```
$('document').ready(function(){
  $('#accordion .red').click(function(){

    $(this).parent('div').prev( 'h3' ).remove();
    $(this).parent('div').remove();

    return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:22:28.077

这是一个更优雅的解决方案，使用[andSelf()](http://api.jquery.com/andSelf/)：

```
$('#accordion .red').click(function(e) {
  e.preventDefault();
  $(this).parent('div').prev('h3').andSelf().remove();
}); 
```

[这是一个小提琴](http://jsfiddle.net/QTQQx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:10:34.460

首先使用删除 h3 元素

```
$(this).parent('div').prev('h3').remove(); 
```

然后删除你的 div

尝试这个

```
$('document').ready(function(){
  $('#accordion .red').click(function(){
   $(this).parent('div').prev('h3').remove();
    $(this).parent('div').remove();

    return false;
  });
}); 
```

# algorithm - 如何将 RGB 颜色转换为最匹配的 8 位颜色？

> ID：12807669
> 
> 赞同：14
> 
> 时间：2012-10-09T20:08:26.260
> 
> 标签：algorithm, colors, rgb

我有一个应用程序可以索引视频中出现的前 16 种颜色。

我正在尝试编写另一个允许用户选择颜色的应用程序，然后该应用程序会找到该颜色出现的所有视频。

问题是因为我只为每个视频索引 16 种颜色，所以用户选择了 RGB 颜色。这种颜色被索引的可能性非常低，所以我的应用程序几乎总是不返回任何结果。

我想了一种方法来完成这项工作——我可以索引视频中出现的颜色并将它们转换为最接近的 8 位颜色。

然后，当用户选择 RGB 颜色时，我可以将用户选择转换为相同的 8 位最接近颜色。

这样我总是有比赛的。

我现在唯一的主要问题是如何将 RGB 颜色转换为最接近的 8 位颜色？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T21:48:30.683

要转换为 web 安全调色板，您需要将每个 r、g、b 组件的范围从 0-255 转换为 0-5 并将它们组合起来：

```
color = (r*6/256)*36 + (g*6/256)*6 + (b*6/256) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T21:43:53.257

您需要做的是将 RGB 转换为 HSB（色相饱和度亮度）值。HSB 是 3 个字节，就像 RGB 一样，不同之处在于 HSB 值比 RGB 更容易比较。

您的下一步是确定“重要性”权重。例如，如果您只关心“颜色/色调”，而不是饱和度或亮度，那么您可以丢弃 S 和 B 字节而只使用颜色字节。

如果是我并且我被限制为 8 位，我将使用 4 位颜色信息（16 种不同颜色）、3 位饱和度（8 种不同值）和 1 位亮度信息（亮或暗）。

本文介绍了如何在 Java 中进行 HSB：

[http://java.sys-con.com/node/43559](http://java.sys-con.com/node/43559)

本文的源代码有一个 Java 中的 RGB 到 HSB 转换器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-28T20:00:24.400

一种可能性是简单地将 24 位颜色缩小为 8 位颜色空间。正如 cHao 所提到的，您可以将 RRRGGGBB 用于您的 8 位数字。然后可以通过简单的缩放算法计算每个颜色分量，例如：

```
byte red = (originalColor.red * 8) / 256;
byte green = (originalColor.green * 8) / 256;
byte blue = (originalColor.blue * 4) / 256; 
```

8、4 和 254 是每个颜色分量中可能值的数量。在你原来的 24 位颜色中，红色、绿色和蓝色都可以有 256 个可能的值，所以这是缩放方程的除数。在示例 8 位颜色中，红色和绿色各为 3 位（8 个可能值），蓝色为 2 位（4 个可能值）。

获得这三个组件后，您可以将它们与一些简单的位移算法结合起来：

```
byte eightBitColor = (red << 5) | (green << 2) | blue; 
```

然后您可以简单地比较这些 8 位颜色。它们大幅降低的分辨率可能会对您有所帮助。

或者，您可以执行 Tyler 建议的操作，先转换为 HSB 或 HSV，然后仅比较色调（取决于您是否需要亮度和饱和度信息）。根据您的目标，这实际上可能是一个更理想的解决方案。

编辑：修改缩放算法以解决 Mark Ransom 指出的缺点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-10T03:13:00.857

tmux 具有将 24 位 RGB 转换为 256 色的逻辑。它使用最接近的 6x6x6 或最接近的灰色。 [https://github.com/tmux/tmux/blob/dae2868d1227b95fd076fb4a5efa6256c7245943/colour.c#L57](https://github.com/tmux/tmux/blob/dae2868d1227b95fd076fb4a5efa6256c7245943/colour.c#L57)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-25T10:17:10.520

这是几年前我发现的一个非常有用的 Python 脚本。所有功劳**归于 Micah Elliott**。

## 如何使用：

1.  复制整个代码并创建一个`.py`具有所需名称的文件。
2.  该程序可以转换 (Hex -> RGB) 和 (RGB -> Hex)
3.  运行该程序并进行如下论证：`python file.py 9CE445`获取最接近的 8 位颜色值并`python file.py 204`获取准确的 Hex 值。

    ```
    """ Convert values between RGB hex codes and xterm-256 color codes.
    Nice long listing of all 256 colors and their codes. Useful for
    developing console color themes, or even script output schemes.
    Resources:
    * http://en.wikipedia.org/wiki/8-bit_color
    * http://en.wikipedia.org/wiki/ANSI_escape_code
    * /usr/share/X11/rgb.txt
    I'm not sure where this script was inspired from. I think I must have
    written it from scratch, though it's been several years now.
    """

    __author__    = 'Micah Elliott http://MicahElliott.com'
    __version__   = '0.1'
    __copyright__ = 'Copyright (C) 2011 Micah Elliott.  All rights reserved.'
    __license__   = 'WTFPL http://sam.zoy.org/wtfpl/'

    #---------------------------------------------------------------------

    import sys, re

    CLUT = [  # color look-up table
    #    8-bit, RGB hex

        # Primary 3-bit (8 colors). Unique representation!
        ('00',  '000000'),
        ('01',  '800000'),
        ('02',  '008000'),
        ('03',  '808000'),
        ('04',  '000080'),
        ('05',  '800080'),
        ('06',  '008080'),
        ('07',  'c0c0c0'),

        # Equivalent "bright" versions of original 8 colors.
        ('08',  '808080'),
        ('09',  'ff0000'),
        ('10',  '00ff00'),
        ('11',  'ffff00'),
        ('12',  '0000ff'),
        ('13',  'ff00ff'),
        ('14',  '00ffff'),
        ('15',  'ffffff'),

        # Strictly ascending.
        ('16',  '000000'),
        ('17',  '00005f'),
        ('18',  '000087'),
        ('19',  '0000af'),
        ('20',  '0000d7'),
        ('21',  '0000ff'),
        ('22',  '005f00'),
        ('23',  '005f5f'),
        ('24',  '005f87'),
        ('25',  '005faf'),
        ('26',  '005fd7'),
        ('27',  '005fff'),
        ('28',  '008700'),
        ('29',  '00875f'),
        ('30',  '008787'),
        ('31',  '0087af'),
        ('32',  '0087d7'),
        ('33',  '0087ff'),
        ('34',  '00af00'),
        ('35',  '00af5f'),
        ('36',  '00af87'),
        ('37',  '00afaf'),
        ('38',  '00afd7'),
        ('39',  '00afff'),
        ('40',  '00d700'),
        ('41',  '00d75f'),
        ('42',  '00d787'),
        ('43',  '00d7af'),
        ('44',  '00d7d7'),
        ('45',  '00d7ff'),
        ('46',  '00ff00'),
        ('47',  '00ff5f'),
        ('48',  '00ff87'),
        ('49',  '00ffaf'),
        ('50',  '00ffd7'),
        ('51',  '00ffff'),
        ('52',  '5f0000'),
        ('53',  '5f005f'),
        ('54',  '5f0087'),
        ('55',  '5f00af'),
        ('56',  '5f00d7'),
        ('57',  '5f00ff'),
        ('58',  '5f5f00'),
        ('59',  '5f5f5f'),
        ('60',  '5f5f87'),
        ('61',  '5f5faf'),
        ('62',  '5f5fd7'),
        ('63',  '5f5fff'),
        ('64',  '5f8700'),
        ('65',  '5f875f'),
        ('66',  '5f8787'),
        ('67',  '5f87af'),
        ('68',  '5f87d7'),
        ('69',  '5f87ff'),
        ('70',  '5faf00'),
        ('71',  '5faf5f'),
        ('72',  '5faf87'),
        ('73',  '5fafaf'),
        ('74',  '5fafd7'),
        ('75',  '5fafff'),
        ('76',  '5fd700'),
        ('77',  '5fd75f'),
        ('78',  '5fd787'),
        ('79',  '5fd7af'),
        ('80',  '5fd7d7'),
        ('81',  '5fd7ff'),
        ('82',  '5fff00'),
        ('83',  '5fff5f'),
        ('84',  '5fff87'),
        ('85',  '5fffaf'),
        ('86',  '5fffd7'),
        ('87',  '5fffff'),
        ('88',  '870000'),
        ('89',  '87005f'),
        ('90',  '870087'),
        ('91',  '8700af'),
        ('92',  '8700d7'),
        ('93',  '8700ff'),
        ('94',  '875f00'),
        ('95',  '875f5f'),
        ('96',  '875f87'),
        ('97',  '875faf'),
        ('98',  '875fd7'),
        ('99',  '875fff'),
        ('100', '878700'),
        ('101', '87875f'),
        ('102', '878787'),
        ('103', '8787af'),
        ('104', '8787d7'),
        ('105', '8787ff'),
        ('106', '87af00'),
        ('107', '87af5f'),
        ('108', '87af87'),
        ('109', '87afaf'),
        ('110', '87afd7'),
        ('111', '87afff'),
        ('112', '87d700'),
        ('113', '87d75f'),
        ('114', '87d787'),
        ('115', '87d7af'),
        ('116', '87d7d7'),
        ('117', '87d7ff'),
        ('118', '87ff00'),
        ('119', '87ff5f'),
        ('120', '87ff87'),
        ('121', '87ffaf'),
        ('122', '87ffd7'),
        ('123', '87ffff'),
        ('124', 'af0000'),
        ('125', 'af005f'),
        ('126', 'af0087'),
        ('127', 'af00af'),
        ('128', 'af00d7'),
        ('129', 'af00ff'),
        ('130', 'af5f00'),
        ('131', 'af5f5f'),
        ('132', 'af5f87'),
        ('133', 'af5faf'),
        ('134', 'af5fd7'),
        ('135', 'af5fff'),
        ('136', 'af8700'),
        ('137', 'af875f'),
        ('138', 'af8787'),
        ('139', 'af87af'),
        ('140', 'af87d7'),
        ('141', 'af87ff'),
        ('142', 'afaf00'),
        ('143', 'afaf5f'),
        ('144', 'afaf87'),
        ('145', 'afafaf'),
        ('146', 'afafd7'),
        ('147', 'afafff'),
        ('148', 'afd700'),
        ('149', 'afd75f'),
        ('150', 'afd787'),
        ('151', 'afd7af'),
        ('152', 'afd7d7'),
        ('153', 'afd7ff'),
        ('154', 'afff00'),
        ('155', 'afff5f'),
        ('156', 'afff87'),
        ('157', 'afffaf'),
        ('158', 'afffd7'),
        ('159', 'afffff'),
        ('160', 'd70000'),
        ('161', 'd7005f'),
        ('162', 'd70087'),
        ('163', 'd700af'),
        ('164', 'd700d7'),
        ('165', 'd700ff'),
        ('166', 'd75f00'),
        ('167', 'd75f5f'),
        ('168', 'd75f87'),
        ('169', 'd75faf'),
        ('170', 'd75fd7'),
        ('171', 'd75fff'),
        ('172', 'd78700'),
        ('173', 'd7875f'),
        ('174', 'd78787'),
        ('175', 'd787af'),
        ('176', 'd787d7'),
        ('177', 'd787ff'),
        ('178', 'd7af00'),
        ('179', 'd7af5f'),
        ('180', 'd7af87'),
        ('181', 'd7afaf'),
        ('182', 'd7afd7'),
        ('183', 'd7afff'),
        ('184', 'd7d700'),
        ('185', 'd7d75f'),
        ('186', 'd7d787'),
        ('187', 'd7d7af'),
        ('188', 'd7d7d7'),
        ('189', 'd7d7ff'),
        ('190', 'd7ff00'),
        ('191', 'd7ff5f'),
        ('192', 'd7ff87'),
        ('193', 'd7ffaf'),
        ('194', 'd7ffd7'),
        ('195', 'd7ffff'),
        ('196', 'ff0000'),
        ('197', 'ff005f'),
        ('198', 'ff0087'),
        ('199', 'ff00af'),
        ('200', 'ff00d7'),
        ('201', 'ff00ff'),
        ('202', 'ff5f00'),
        ('203', 'ff5f5f'),
        ('204', 'ff5f87'),
        ('205', 'ff5faf'),
        ('206', 'ff5fd7'),
        ('207', 'ff5fff'),
        ('208', 'ff8700'),
        ('209', 'ff875f'),
        ('210', 'ff8787'),
        ('211', 'ff87af'),
        ('212', 'ff87d7'),
        ('213', 'ff87ff'),
        ('214', 'ffaf00'),
        ('215', 'ffaf5f'),
        ('216', 'ffaf87'),
        ('217', 'ffafaf'),
        ('218', 'ffafd7'),
        ('219', 'ffafff'),
        ('220', 'ffd700'),
        ('221', 'ffd75f'),
        ('222', 'ffd787'),
        ('223', 'ffd7af'),
        ('224', 'ffd7d7'),
        ('225', 'ffd7ff'),
        ('226', 'ffff00'),
        ('227', 'ffff5f'),
        ('228', 'ffff87'),
        ('229', 'ffffaf'),
        ('230', 'ffffd7'),
        ('231', 'ffffff'),

        # Gray-scale range.
        ('232', '080808'),
        ('233', '121212'),
        ('234', '1c1c1c'),
        ('235', '262626'),
        ('236', '303030'),
        ('237', '3a3a3a'),
        ('238', '444444'),
        ('239', '4e4e4e'),
        ('240', '585858'),
        ('241', '626262'),
        ('242', '6c6c6c'),
        ('243', '767676'),
        ('244', '808080'),
        ('245', '8a8a8a'),
        ('246', '949494'),
        ('247', '9e9e9e'),
        ('248', 'a8a8a8'),
        ('249', 'b2b2b2'),
        ('250', 'bcbcbc'),
        ('251', 'c6c6c6'),
        ('252', 'd0d0d0'),
        ('253', 'dadada'),
        ('254', 'e4e4e4'),
        ('255', 'eeeeee'),
    ]

    def _str2hex(hexstr):
        return int(hexstr, 16)

    def _strip_hash(rgb):
        # Strip leading `#` if exists.
        if rgb.startswith('#'):
            rgb = rgb.lstrip('#')
        return rgb

    def _create_dicts():
        short2rgb_dict = dict(CLUT)
        rgb2short_dict = {}
        for k, v in short2rgb_dict.items():
            rgb2short_dict[v] = k
        return rgb2short_dict, short2rgb_dict

    def short2rgb(short):
        return SHORT2RGB_DICT[short]

    def print_all():
        """ Print all 256 xterm color codes.
        """
        for short, rgb in CLUT:
            sys.stdout.write('\033[48;5;%sm%s:%s' % (short, short, rgb))
            sys.stdout.write("\033[0m  ")
            sys.stdout.write('\033[38;5;%sm%s:%s' % (short, short, rgb))
            sys.stdout.write("\033[0m\n")
        print ("Printed all codes.")
        print ("You can translate a hex or 0-255 code by providing an argument.")

    def rgb2short(rgb):
        """ Find the closest xterm-256 approximation to the given RGB value.
        @param rgb: Hex code representing an RGB value, eg, 'abcdef'
        @returns: String between 0 and 255, compatible with xterm.
        >>> rgb2short('123456')
        ('23', '005f5f')
        >>> rgb2short('ffffff')
        ('231', 'ffffff')
        >>> rgb2short('0DADD6') # vimeo logo
        ('38', '00afd7')
        >>> rgb2short('3D3D3D')
        ('237', '3a3a3a')
        >>> rgb2short('070707')
        ('232', '080808')
        """
        rgb = _strip_hash(rgb)
        # Break 6-char RGB code into 3 integer vals.
        parts = [ int(h, 16) for h in re.split(r'(..)(..)(..)', rgb)[1:4] ]

        incs = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff]

        if parts[0] == parts[1] == parts[2]:
            gs_incs = range(0x08, 0xee, 10)
            incs = sorted(incs + gs_incs + [0xee,])

        res = []
        for part in parts:
            i = 0
            while i < len(incs)-1:
                s, b = incs[i], incs[i+1]  # smaller, bigger
                if s <= part <= b:
                    s1 = abs(s - part)
                    b1 = abs(b - part)
                    if s1 < b1: closest = s
                    else: closest = b
                    res.append(closest)
                    break
                i += 1
        #print '***', res
        res = ''.join([ ('%02.x' % i) for i in res ])
        equiv = RGB2SHORT_DICT[ res ]
        #print '***', res, equiv
        return equiv, res

    RGB2SHORT_DICT, SHORT2RGB_DICT = _create_dicts()

    #---------------------------------------------------------------------

    if __name__ == '__main__':
        import doctest
        doctest.testmod()
        if len(sys.argv) == 1:
            print_all()
            raise SystemExit
        arg = sys.argv[1]
        if len(arg) < 4 and int(arg) < 256:
            rgb = short2rgb(arg)
            sys.stdout.write('xterm color \033[38;5;%sm%s\033[0m -> RGB exact \033[38;5;%sm%s\033[0m' % (arg, arg, arg, rgb))
            sys.stdout.write("\033[0m\n")
        else:
            short, rgb = rgb2short(arg)
            sys.stdout.write('RGB %s -> xterm color approx \033[38;5;%sm%s (%s)' % (arg, short, short, rgb))
            sys.stdout.write("\033[0m\n") 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T21:42:10.590

您熟悉[Floyd-Steinberg 抖动](http://en.wikipedia.org/wiki/Floyd-Steinberg_dithering)吗？这用于将高阶颜色转换为低阶颜色，例如 24 位 RGB 到 3 位（8 色）RGB 或将 RGB 图像限制为 8 位（256 色）以进行 GIF 转换。

该算法在链接的维基百科页面上进行了描述。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-14T20:29:36.097

如果要将 24 bpp 图像转换为 8 bpp 图像，请尝试此算法：

```
for y = 0 to ImageHeight - 1
   for x = 0 to ImageWidth - 1
      GetPixel(x,y,red,grn,blu)
      {read RGB data from 24bpp file}
      d0 = red^2 + grn^2 + blu^2
      ColorIndex = 0
      for cl = 0 to 255
         GetPaletteData(p_red,p_gre,p_blu)
         {read RGB data from 8bpp palette}
         d = (red - p_red)^2 + (grn - p_grn)^2 + (blu - p_blu)^2
         if d0 >= d then
            ColorIndex = cl
            d0 = d
         end if
      next cl
        {use ColorIndex to create your 8bpp file}
     next x
   next y 
```

在此步骤之前，请从 Wikipedia 或其他来源阅读有关 8bpp 文件的更多信息。

祝你好运！

# cookies - 在 Varnish 中，如何读取 Set-Cookie 响应标头？

> ID：12807677
> 
> 赞同：0
> 
> 时间：2012-10-09T20:09:07.207
> 
> 标签：cookies, http-headers, varnish, varnish-vcl

我正在尝试检测我的应用程序是否设置了一个 cookie，该 cookie 为下一页上的用户保存了一条“警报消息”，如果检测到，Javascript 会在其中显示它。

在我的 vcl_fetch() 中，我需要检测特定的 cookie 值“alert_message”是否出现在 Set-Cookie 标头中的任何位置（大概在 VCL 变量**beresp.http.Set-Cookie**中）。如果检测到，那么我不想缓存该下一页（因为 Varnish 默认会去除 Set-Cookie 标头，这会在警报消息返回浏览器之前将其删除）。

所以这是我的简单测试：

```
if(beresp.http.Set-Cookie ~ "alert_message") {
    set req.http.no_cache = 1;
} 
```

奇怪的是，它无法评估为真。

因此，我将变量放入 Server 标头中以查看它的外观：

```
set beresp.http.Server = " MyApp Varnish implementation - test reading set-cookie: "+beresp.http.Set-Cookie; 
```

但由于某种原因，这仅在响应标头中显示 FIRST Set-Cookie 行。

以下是相关的响应标头：

```
Server: MyApp Varnish implementation - test reading cookie: elstats_session=7d7279kjmsnkel31lre3s0vu24; expires=Wed, 10-Oct-2012 00:03:32 GMT; path=/; HttpOnly
Set-Cookie:app_session=7d7279kjmsnkel31lre3s0vu24; expires=Wed, 10-Oct-2012 00:03:32 GMT; path=/; HttpOnly
Set-Cookie:alert_message=Too+many+results.; expires=Tue, 09-Oct-2012 20:13:32 GMT; path=/; domain=.my.app.com
Set-Cookie:alert_key=flash_error; expires=Tue, 09-Oct-2012 20:13:32 GMT; path=/; domain=.my.app.com
Vary:Accept-Encoding 
```

如何在所有 Set-Cookie 标题行上读取和运行字符串检测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:35:36.653

[您可以使用vmod 标头](https://github.com/varnish/libvmod-header#get)中的 header.get 函数解决它（清漆版本> = 3）

例如，我有一个简单的 PHP 脚本和多个 Set-Cookie：

```
 <?php
 setcookie ("Foo", "test", time() + 3600);
 setcookie ("Bar", "test", time() + 3600);
 setcookie ("TestCookie", "test", time() + 3600);
 ?> 
```

默认情况下，只有第一个 Set-Cookie 标头会被解析为 'if(beresp.http.Set-Cookie ~ "somedata" '。当然，我们可以使用 vmod [std](https://www.varnish-cache.org/docs/trunk/reference/vmod_std.html#collect)中的 std.collect 过程（已经在 Varnish 3 中提供，而不是需要编译）将我们所有的 Set-Cookie 标头折叠为一个，但它会破坏 cookie - Bar 和 TestCookie 不会设置。

header.get 避免了这个缺陷：它将检查所有标题是否匹配正则表达式：

```
 if (header.get(beresp.http.set-cookie,"TestCookie=") ~ "TestCookie")
 {
     set beresp.http.cookie-test = 1;
     return(hit_for_pass);
 } 
```

因此，有了它，我得到了第一个和下一个请求的响应标头：

```
cookie-test:1
Set-Cookie:Foo=test; expires=Tue, 09-Oct-2012 22:33:37 GMT
Set-Cookie:Bar=test; expires=Tue, 09-Oct-2012 22:33:37 GMT
Set-Cookie:TestCookie=test; expires=Tue, 09-Oct-2012 22:33:37 GMT
X-Cache:MISS 
```

如果我为 cookie TestCookie 注释掉 setcookie，那么我将在下一个请求中获得 HIT。

# php - 根据链接将表单数据提交到各个位置

> ID：12807679
> 
> 赞同：1
> 
> 时间：2012-10-09T20:09:20.770
> 
> 标签：php, javascript, html, forms

我有一个多页表格。每个页面一个接一个地发布数据，PHP 将 POST 数据存储为会话数据。在表的末尾，此会话数据显示在汇总表中，然后最终提交将该会话数据存储在 MySQL 数据库中。

有两种方法可以离开表单页面：两种选项都可以提交表单数据。

1) 提交按钮，执行表单操作，并将用户导航到后续表单页面。

2) 页面菜单，用户可以从该菜单进入任何其他表单页面。我在菜单导航上使用 JavaScript 来提示提交：

```
$('#menu a').onclick {
    $('#myform').submit();
}); 
```

但是表单的提交操作是：

```
<form id="myform" method="post" action="?page=survey-2">
...form fields...
</form> 
```

因此，煽动提交只会将更新的数据发布到后续页面。

在用例中：用户填写表单，到达摘要页面，看到并出错使用菜单导航回页面，更改它并使用菜单跳回摘要页面：没有任何变化，显然是因为更新的数据仅提交到以下页面，而不是其导航的目的地。

有没有一种方法可以使用 js（或任何东西），以便在单击菜单中的链接时，该导航链接的 DESTINATION 也接收表单数据？或者，表单的操作可以一次提交到所有页面（但默认导航仅到后续页面）？

感谢您的考虑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:17:04.000

使用 AJAX 将数据发布到处理程序，然后使用回调去任何你想去的地方

```
$('#menu a').onclick {
    var data = $('#myForm').serialize();
    var handler = '?page=survey-2';
    $.post(handler,data,function(){
        window.location.href='http://www.google.com';
    })
}); 
```

有关 jQuery POST 的更多信息：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# c# - 如何在多线程应用程序中使用锁定？

> ID：12807683
> 
> 赞同：-1
> 
> 时间：2012-10-09T20:09:59.410
> 
> 标签：c#, multithreading, sockets, locking

请检查我的多线程代理检查器代码。它总是检查相同的代理。我想我需要为此使用锁？但是当我使用锁时，它只使用一个线程。但通常它是多线程的。这是什么问题？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Net;
using System.Threading;

namespace ProxyChecker
{
    public partial class Main : Form
    {

        public Main()
        {
            InitializeComponent();

        }

        private void clearButton_Click(object sender, EventArgs e)
        {
            proxyList.Items.Clear();
        }

        private void clearButton2_Click(object sender, EventArgs e)
        {
            checkedList.Items.Clear();

        }

         Thread[] checkerThread;
        int checking;
        int beenChecked;
        private bool isRunning;
        private delegate void filterProxyHandler(int Index, bool Valid);
        static readonly object _locker = new object();

        private void startButton_Click(object sender, EventArgs e)
        {
            checkerThread = new Thread[Convert.ToInt32(threadBox.Text)];
            checking = proxyList.Items.Count;
            isRunning = true;
            beenChecked = 1;

            for (int i = 0; i <= Convert.ToInt32(threadBox.Text) - 1; i++)
            {

                checkerThread[i] = new Thread(new ParameterizedThreadStart(checkProxys));
                checkerThread[i].Start(i);
            }
        }

        public void checkProxys(object Index)
        {

                int index = (int)Index;

                while (isRunning)
                {

                    if (beenChecked >= checking)
                        isRunning = false;
                    if (index >= proxyList.Items.Count)
                    {
                        checkerThread[index].Abort();
                    }

                    string occoultProxy = proxyList.Items[index].ToString();
                    object[] validArgs = { index, true };
                    object[] invalidArgs = { index, false };

                    try
                    {
                        WebProxy proxy;

                            proxy = new WebProxy(occoultProxy.Split(':')[0], Convert.ToInt32(occoultProxy.Split(':')[1]));

                        WebRequest web = WebRequest.Create(serverBox.Text.ToString());
                        web.Proxy = proxy;
                        web.Timeout = Convert.ToInt32(timeoutbox.Text);
                        web.GetResponse();
                        if (proxyList.InvokeRequired)
                        {
                            proxyList.Invoke(new filterProxyHandler(filterProxy), validArgs);
                        }
                        else
                        {
                            filterProxy(index, true);
                        }

                            beenChecked++;

                    }

                    catch (Exception ex)
                    {
                        Console.WriteLine(ex.Message);
                        if (proxyList.InvokeRequired)
                            proxyList.Invoke(new filterProxyHandler(filterProxy), invalidArgs);
                        else
                            filterProxy(index, false);

                        beenChecked++;

                    }

                }

        }
        void filterProxy(int index, bool Valid)
        {
            try
            {
                if (Valid)
                {
                    checkedList.Items.Add(proxyList.Items[index]);
                    //proxyList.Items.RemoveAt(index);
                }
                else
                {
                    //proxyList.Items.RemoveAt(index);
                }
            }
            catch
            {
            }
        }

        private void stopButton_Click(object sender, EventArgs e)
        {
            isRunning = false;

            for (int i = 0; i <= Convert.ToInt32(threadBox.Text) - 1; i++) {
                checkerThread[i].Abort();
            }
        }

        private void Main_Load(object sender, EventArgs e)
        {
            CheckForIllegalCrossThreadCalls = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:14:52.367

一个问题：`beenChecked++;`不是线程安全的。
改为使用`Interlocked.Increment(ref beenChecked);`。

还，

```
 checkedList.Items.Add(proxyList.Items[index]); 
```

不安全。你需要一个`lock() { ... }`围绕这个或使用并发集合。

其余的似乎相当安全，但不能保证这一点。

> 但是当我使用锁时，它只使用一个线程。

您没有发布该代码，因此无法发表评论。有很多方法可以使锁定错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:15:07.177

每个线程都在检查自己的代理，因此看起来您不需要任何锁定。

不过，您`beenChecked`确实需要某种形式的锁定。`Interlocked.Increment`， 例如。你也可以`lock`在那里使用，但这对于那个目的来说是不必要的沉重。`Interlocked`是为进行这种操作而设计的。

另一个注意事项；您在某一时刻调用`Abort`正在运行的线程本身。这不是必需的；您需要做的就是`return`从方法中停止线程。

# java - 对 java set 和 get 方法感到困惑

> ID：12807685
> 
> 赞同：-2
> 
> 时间：2012-10-09T20:10:13.007
> 
> 标签：java, methods, setter, getter

我真的无法弄清楚，如何在不同的类中使用 set 和 get 方法。我只需要上两节课——第一节课，第二节课。在第一类中，我已经设置和获取，它们可以正常工作，但是我想在第二类中使用 get 方法，这将返回与第一类中的 get 方法相同的文本。

第一课很好，但我应该把什么放在第二课上？

```
public class one {

private String name;

public one() {
}

public void setName(String name) {
    this.name = name;
}

public String getName() {
    return this.name;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:14:38.983

我认为作为一个新人，你可能试图一次做太多事情。

首先要理解，类只是对象的模板或蓝图。除此之外，“Get”ters 和“Set”ters 实际上只是类中私有数据的公共“包装器”。这使您作为课程作者可以控制进入和离开班级的数据。这就是它的全部。

考虑到这一点，Getter 和 Setter 对任何其他类或实例没有任何想法或概念（除非它们恰好是该类的成员，我认为这里不是这种情况）。因此，在一个类中有一个“getter”从另一个类返回一个值的想法并没有完全加起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:13:54.013

对于这两个类，setter 和 getter 方法将是单独的。

```
Class1 { 
    int a; float b;

    void setA(int a) { this.a = a; }

    int getA() { return this.a; }
}

Class2 { 
    String s;

    void setS(string str) { this.s = str; }

    String getS() { return this.s; }
} 
```

除此之外，setter 和 getter 方法并没有那么复杂。

如果对您有任何特殊要求，您总是希望返回`Class1`getter 给出的值，

然后在`Class2`getter() 方法中，执行

```
String getS()
{
    return obj1.getA().toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:16:17.387

Setter 和 Getter 是用于获取类字段值的方法。它们是一种代码实践，使您独立于该值背后的逻辑，因为您可以返回一个简单的值

```
public String getName() {
    return value; 
} 
```

或者做一些更复杂的事情：

```
public String getName() {
    String modValue = new String();
    //Lots of code here
    return modValue;
} 
```

如果您需要返回其他内容或执行不同操作，与此特定类交互的类仍将调用 setter 和 getter 而不会受到影响（除非您进行重大更改，例如更改值的类型......）。

```
One classOne = new One();
one.getValue(); //returns the value or executes some logic before. It doesn't matter
                //if it changes because the method is the same. Your classes do not
                //depend on each other. 
```

吸气剂的替代方案是......这个......

```
classOne.value; 
```

您可以直接访问该字段，这是代码味道、灾难和许多我没有同义词库的形容词。这样，如果您需要在返回之前做一些有价值的事情（想象一下，如果您返回一个数字，现在需要对其进行四舍五入......您必须更改所有代码或每次获取它时对其进行四舍五入。用一个吸气剂，您可以在返回之前对其进行舍入）。

你应该在这里考虑你的设计，因为如果你想返回一个与其他类的值完全相同的值，你可以考虑将一个类的实例`one`放入类中`two`，并且只有当它们以某种方式相关时才委托 getter 调用证明了这一点。如果对象不相关，您应该自己设置该值。

为每个类定义了 setter 和 getter，因为它们与每个特定的上下文相关。您不能定义一个被调用或与另一个类相关的 getter，除非这些类是相关的，因为一个包含另一个或者因为它们之间存在某种联系，例如（举一些例子）：

1.  外部代理重复值
2.  两个类共享的外部对象
3.  两个类要处理的通用数据源
4.  一个类是另一个类的扩展，第二个类是覆盖方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T20:13:42.860

如果要重用 中的方法`one`，请将类`two`设为 as 的子类`one`：

```
 public class two extends one {
 } 
```

最好使用正确的命名约定（将类名中的首字母设为大写）：

```
public class One {
}

public class Two extends One {
} 
```

希望这对你有用。

# delphi - stringgrid 中选定单元格的总和值

> ID：12807687
> 
> 赞同：6
> 
> 时间：2012-10-09T20:10:25.900
> 
> 标签：delphi

如何获取所选单元格的总和值或范围`stringgrid`？请注意，有时这些单元格包含字符串值！

我尝试过`GridCoord`，但效果不佳，因为有时会有“隐藏列”。

```
procedure TMainShowForm.StgSelectionChanged(Sender: TObject; ALeft, ATop,
 ARight, ABottom: Integer);
var
i: Integer;
gc: TGridCoord;
sum:double;
begin
  for i := 1 to stg.SelectedCellsCount do
    begin
      gc := stg.SelectedCell[i - 1];
      sum:=sum+stg.floats[(gc.X),(gc.Y)];
    end;
  AdvOfficeStatusBar1.Panels[0].Text:='Sum = '+ formatfloat('#,##0.',sum);
  AdvOfficeStatusBar1.Panels[1].Text:='Count = '+ inttostr(stg.SelectedCellsCount);
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T20:25:17.960

***如何获取 TStringGrid 中选择的浮点值的总和？***

对于标准的 Delphi [`TStringGrid`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Grids.TStringGrid)，例如这种方式：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Sum: Double;
  Val: Double;
  Col: Integer;
  Row: Integer;
begin
  Sum := 0;
  for Col := StringGrid1.Selection.Left to StringGrid1.Selection.Right do
    for Row := StringGrid1.Selection.Top to StringGrid1.Selection.Bottom do
      if TryStrToFloat(StringGrid1.Cells[Col, Row], Val) then
        Sum := Sum + Val;
  ShowMessage('Sum of the selection is ' + FloatToStr(Sum) + '.');
end; 
```

***如何在 TAdvStringGrid 中获取选择（包括不可见单元格）的浮点值的总和？***

因此，您很可能正在使用[`TAdvStringGrid`](http://www.tmssoftware.com/site/advgrid.asp)您可以尝试以下尚未测试或优化的代码。到目前为止，我发现，`AllFloats`无论隐藏的列或行如何，您都可以使用属性将所有网格单元格作为浮点数访问。假设您想在隐藏某列后对连续选择求和，您可以尝试以下代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Sum: Double;
  Col: Integer;
  Row: Integer;
begin
  Sum := 0;
  for Col := AdvStringGrid1.Selection.Left to AdvStringGrid1.Selection.Right do
    for Row := AdvStringGrid1.Selection.Top to AdvStringGrid1.Selection.Bottom do
      Sum := Sum + AdvStringGrid1.AllFloats[Col, Row];
  ShowMessage('Sum of the selection is ' + FloatToStr(Sum) + '.');
end; 
```

# selenium - 硒与 HtmlUnit？

> ID：12807689
> 
> 赞同：47
> 
> 时间：2012-10-09T20:10:38.413
> 
> 标签：selenium, htmlunit, automated-tests

我正在尝试更好地理解测试框架并一直在研究 Selenium。我以前使用过[HTMLUnit](http://htmlunit.sourceforge.net/)，主要是当我需要从网站或类似网站上抓取一些信息时。

在编写测试自动化的上下文中，Selenium 与 HTMLUnit 的优点/缺点是什么？在我看来，Selenium 的设置比 HTMLUnit 更复杂，尽管同时有一个用于 Selenium 的 HTMLUnitDriver，我认为它的行为方式与 HTMLUnit 本身完全相同？

Selenium 显然提供了更强大的框架，它具有用于并行测试的 Selenium RC，它还具有可以使用的不同浏览器驱动程序 - 尽管当您使用浏览器驱动程序时，测试实际上将打开/关闭浏览器应用程序而不是无头。

可能是我没有正确理解 Selenium。一些方向和指针会很棒！

在另一个注意事项 - 一个单独的问题 - 我也在考虑在移动浏览器上进行自动化测试，我看到 Selenium 有一个[IPhoneDriver](http://code.google.com/p/selenium/wiki/IPhoneDriver)，但这也不是无头测试，因为它需要实际的 iOS 模拟器。

无论如何在移动网站上进行无头测试？改变用户代理就足够了吗？我看过一些关于更改用户代理的帖子，这些帖子似乎有自己的挑战，例如。[在 Selenium RC 中设置用户代理](https://stackoverflow.com/questions/4565250/set-user-agent-in-selenium-rc)

非常感谢！

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-10T17:28:04.730

好吧，会尝试详细解释差异。

说到并行测试，最好使用 selenium 网格。硒 RC 和硒网格的基本概念。 ![传统的硒设置](../Images/e5ab7ffa4a8a5e5e8ce26c58f027baf7.png) ![硒网格设置](../Images/010fb57981a6b8dbd8ee519e7181e20a.png) ![selenium 网格：请求特定环境](../Images/a63d867322cb50eaf5d578b10b7b1937.png) 您可以[在此处了解更多详细信息](http://selenium-grid.seleniumhq.org/how_it_works.html)

**关于selenium webDriver 的**一些话：

*Selenium 2.0 的主要新特性是 WebDriver API 的集成。WebDriver 旨在提供更简单、更简洁的编程接口，同时解决 Selenium-RC API 中的一些限制。Selenium-WebDriver 是为了更好地支持动态网页而开发的，其中页面元素可能会更改而无需重新加载页面本身。WebDriver 的目标是提供一个设计良好的面向对象的 API，为现代高级 Web 应用程序测试问题提供改进的支持。*

**与 Selenium-RC 相比，WebDriver 如何“驱动”浏览器？**

*Selenium-WebDriver 使用每个浏览器对自动化的原生支持直接调用浏览器。这些直接调用的方式以及它们支持的功能取决于您使用的浏览器。本章稍后将提供有关每个“浏览器驱动程序”的信息。对于熟悉 Selenium-RC 的人来说，这与您习惯的完全不同。Selenium-RC 对于每个支持的浏览器都以相同的方式工作。它在浏览器加载时将 javascript 函数“注入”到浏览器中，然后使用其 javascript 在浏览器中驱动 AUT。WebDriver 不使用这种技术。同样，它使用浏览器内置的自动化支持直接驱动浏览器。*

**WebDriver 和 Selenium-Server**

*您可能需要也可能不需要 Selenium 服务器，具体取决于您打算如何使用 Selenium-WebDriver。如果您只使用 WebDriver API，则不需要 Selenium-Server。如果您的浏览器和测试都将在同一台机器上运行，并且您的测试只使用 WebDriver API，那么您不需要运行 Selenium-Server；WebDriver 将直接运行浏览器。将 Selenium-Server 与 Selenium-WebDriver 一起使用是有一些原因的。*

*   您正在使用 Selenium-Grid 将测试分布在多台机器或虚拟机 (VM) 上。
*   您想要连接到具有特定浏览器版本的远程计算机，该版本不在您当前的计算机上。
*   您没有使用 Java 绑定（即 Python、C# 或 Ruby）并希望使用 HtmlUnit 驱动程序

**Selenium-WebDriver 的驱动程序** *WebDriver 是编写测试的关键接口的名称，但有几种实现。这些包括：*

**HtmlUnit Driver** 这是目前最快最轻量级的WebDriver实现。顾名思义，这是基于 HtmlUnit。HtmlUnit 是一个基于 Java 的 WebBrowser 实现，没有 GUI。对于任何语言绑定（Java 除外），Selenium Server 都需要使用此驱动程序。

优点

*   最快的 WebDriver 实现
*   纯 Java 解决方案，因此它与平台无关。
*   支持 JavaScript

缺点

*   模拟其他浏览器的 JavaScript 行为（见下文）

*HtmlUnit 驱动程序中的 JavaScript 没有一个流行的浏览器使用 HtmlUnit (Rhino) 使用的 JavaScript 引擎。如果您使用 HtmlUnit 测试 JavaScript，结果可能与那些浏览器有很大不同。当我们说“JavaScript”时，我们实际上是指“JavaScript 和 DOM”。尽管 DOM 是由 W3C 定义的，但每个浏览器在 DOM 的实现以及 JavaScript 与它的交互方式方面都有自己的怪癖和差异。HtmlUnit 有一个令人印象深刻的完整的 DOM 实现，并且对使用 JavaScript 有很好的支持，但它与任何其他浏览器没有什么不同：它与 W3C 标准和主要浏览器的 DOM 实现都有自己的怪癖和差异，尽管它模仿其他浏览器的能力。使用 WebDriver，我们必须做出选择；我们是否启用了 HtmlUnit 的 JavaScript 功能并冒着团队遇到问题的风险，这些问题只在那儿表现出来，或者我们是否知道有越来越多的网站依赖于 JavaScript，而禁用 JavaScript？我们采取了保守的方法，在使用 HtmlUnit 时默认禁用支持。随着 WebDriver 和 HtmlUnit 的每个版本，我们重新评估这个决定：我们希望在某个时候在 HtmlUnit 上默认启用 JavaScript。*

要深入研究 webDriver 的设置，请参阅[此](http://seleniumhq.org/docs/03_webdriver.html#htmlunit-driver)

来自[HtmlUnit 文档](http://htmlunit.sourceforge.net/)： *HtmlUnit 不是通用单元测试框架。它专门是一种模拟浏览器以进行测试的方法，旨在用于另一个测试框架，例如 JUnit 或 TestNG。*

所以**总结一下 Selenium 和 HtmlUnit 的区别**： *HtmlUnit 是一个基于 java 的 WebBrowser 实现，没有 GUI*和*一种模拟浏览器以进行测试的方法*，*Selenium-WebDriver 使用每个浏览器对自动化的本机支持直接调用浏览器。*我们可以看到 HtmlUnit 提供了没有 GUI 自动化可能性的 API，而 WebDriver 提供了内部浏览器自动化的可能性。

说到移动自动化，Selenium 还有一篇 iPhone Driver [iPhone Driver wiki 文章](http://code.google.com/p/selenium/wiki/IPhoneDriver) 和 Android Driver [Android Driver wiki 文章](http://code.google.com/p/selenium/wiki/AndroidDriver)

另请参阅[此演示文稿](http://www.slideshare.net/operationmobile/automated-ui-testing-for-web-and-native-apps-on-ios-and-android-10261455)

不幸的是，当我处理网络自动化（非移动设备）时，我无法给你我对移动驱动程序的工作经验评估。也知道`Cucumber`（自动化工具）在移动自动机中很流行。看到[这个](https://github.com/cucumber/cucumber/wiki)和[这个](http://rhburrows.com/2010/11/04/testing-mobile-sites-with-cucumber/)。

希望它现在对你来说更清楚一点=）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T01:05:15.580

Selenium 和 HTMLUnit 在概念上有些相似，但 Selenium 更成熟/更强大，并且具有更多功能。

请注意，Selenium 包含用于 Firefox 的记录 (IDE) 插件，它允许您记录测试和本质上驱动浏览器的 RC/WebDriver 自动化框架。两者可以一起使用，使测试创建变得非常容易。

我可以看到使用 HTMLUnit 的唯一优势是它占用的资源更少，因此您可以在更少的硬件上运行测试，但是有了 Selenium 的并行支持，即使这不再是真的了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T13:45:15.810

在夜间从**Jenkins**运行测试时，您通常无法访问诸如 X11 或 Windows 之类的窗口系统来运行 Web 浏览器。因此，我看到了在这种情况下使用 HTMLUnit Web 驱动程序的好处，因为它不需要访问窗口系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-20T10:40:45.700

我使用 Selenium WebDriver 进行自动化。有一种非常简单的方法可以使浏览器无头。只需应用 ChromeOptions （在我的情况下，其他 DriverOptions 可用） [ChromeOptions("Headless")](https://i.stack.imgur.com/IWlAS.png)

使用选项或服务可以提供许多熟练的方法，作为另一个示例，这将阻止驱动程序/命令提示符窗口“出现”，因此它将保持“静默”且不暴露。 [ChromeDriverServices（“静默”）](https://i.stack.imgur.com/oXfqj.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-17T20:50:20.413

根据我的经验，HtmlUnit 在浏览自动化方面做得很好，但在处理 Javascript 时可能会出现一些问题。实际上，我遇到了一个案例，其中我无法使用 HtmlUnit 自动下载图像，不得不求助于 Selenium，它的表现超出了我的预期。该案例实际上是在一个[SO 线程](https://stackoverflow.com/questions/60099762/downloading-javascript-image-with-htmlunit)中注册的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-22T15:54:18.637

至少在 UX 系统中，您可以使用例如 Xvfb 并将浏览器指向该显示器以使其“无头”另见[http://infiniteundo.com/post/54014422873/headless-selenium-testing-with-firefox-and- xvfb](http://infiniteundo.com/post/54014422873/headless-selenium-testing-with-firefox-and-xvfb) 或[如何在 Xvfb 中运行 Selenium？](https://stackoverflow.com/questions/6183276)

# android - 在两个不同的EditText上写android

> ID：12807694
> 
> 赞同：-1
> 
> 时间：2012-10-09T20:11:03.700
> 
> 标签：android, input, android-edittext

我需要解决这个问题，我有两个编辑文本，一个名为 Edit(X) 和 Edit(Y)，因此，我可以在 Edit(X) 中编写和设置输入的长度，但是当我想在另一个我不能，因为我得到了相同的 Edit(X) 值，我如何设置 Edit(x) 例如只有两个 6 位数字并完成写入然后传递给 Edit(Y) 并开始写入，a独立于 Edit(X) 的新输入。这是我的一些代码。

```
private class BtnListener implements OnClickListener {

    public void onClick(View view) {
       switch (view.getId()) {
           case R.id.btnNum0Id:
           case R.id.btnNum1Id:
           case R.id.btnNum2Id:
           case R.id.btnNum3Id:
           case R.id.btnNum4Id:
           case R.id.btnNum5Id:
           case R.id.btnNum6Id:
           case R.id.btnNum7Id:
           case R.id.btnNum8Id:
           case R.id.btnNum9Id:
                String inDigit = ((Button) view).getText().toString();
                String inDiget = ((Button) view).getText().toString();
                if (inStr.equals("0")) {
                    inStr = inDigit; 
                } else {
                    inStr += inDigit;
                }
                if(inCtr.equals("0")){
                    inCtr = inDiget;
                } else {
                    inCtr += inDiget;
                }
                editX.setText(inStr);
                //editY.setText(inCtr);
                editX.addTextChangedListener(new TextWatcher() {
                    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                        button2.setOnClickListener( new OnClickListener(){
                            public void onClick(View arg0) {
                                // TODO Auto-generated method stub
                                //String input = editX.getText().toString();
                                // String toEditText1 = input.substring(0,2); 
                                // editZ.setText(toEditText1);
                                //String toEditText2 = input.substring(2);
                                //inputContent2.setText(toEditText2);  
                            }
                        });
                    }
                    public void onTextChanged(CharSequence s, int start, int before, int count) {

                    }
                    public void afterTextChanged(Editable s) {
                        if(s.length() == 4){
                            button2.setOnClickListener( new OnClickListener() {          
                                public void onClick(View v){
                                    editY.requestFocus();
                                    editY.setText(inStr);
                                }
                            });
                        }else{
                        }
                   }
                });
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:17:39.553

我认为您需要做的是使用 Edit(X).addTextChangedListener(...) 并在 Edit(X) 上的文本具有所需大小时在其中调用 Edit(Y).requestFocus() 。

还要在您的 xml 文件上使用 android:maxLength="6" 。

# asp.net - ASP.NET 在 vi ewchange 上丢失列表框绑定？

> ID：12807697
> 
> 赞同：1
> 
> 时间：2012-10-09T20:11:12.900
> 
> 标签：asp.net, vb.net, data-binding, formview

好吧，看起来一个基本的问题是让我变得更好，而我在谷歌上的广泛努力却失败了。也许我不够了解，无法提出正确的问题。

这是我的问题：

我有一个表单视图控件，或者更确切地说是其中的一系列控件，每个页面都显示以前表单的条目，以便根据需要进行更高级别的批准/编辑。所以，在表格“B”上，我要填写表格“A”的内容和“B”的空白部分......所以页面上有两个单独的视图......“A”和“B”

效果很好，问题是当我更改模式以编辑上一个条目时。因此，如果我有一个按钮或默认链接按钮可以从 ReadOnly 更改为 Edit，我不仅会丢失绑定，而且在回发时任何抵消的努力都会给我留下问题。

***由于篇幅原因，我遗漏了一些代码***

在我的按钮上，我使用 FormView2.ChangeMode(FormViewMode.Edit) 来更改视图，默认链接按钮我没有更改

我的列表框上的绑定设置如下：

```
If Not Page.IsPostBack Then
    'pulling bindings from table
    cmd = New OleDbCommand("SELECT * FROM mslToi", objCon)
    objReader = cmd.ExecuteReader
    lst1.DataValueField = "listing"
    lst1.DataTextField = "listing"
    lst1.DataSource = objReader
    lst1.DataBind()

    'pre-selecting input data from form "A"
    cmd = New OleDbCommand("SELECT [type_of_injury] FROM S2childToi WHERE ID = " & qs & "", objCon)
    objReader = cmd.ExecuteReader
        Do While objReader.Read

            For Each y As ListItem In lst1.Items
                If y.Text = objReader.Item(0) Then
                    y.Selected = True
                End If
            Next
        Loop

end if 
```

在页面加载事件中。

***要求的 FORMVIEW 标记***

```
<asp:FormView ID="FormView2" runat="server" 
    Width="100%" DataSourceID="AccessDataSource4">

<ItemTemplate>
</ItemTemplate>

<EditItemTemplate>
</EditItemTemplate>

</asp:FormView> 
```

'''这是所要求的 formview 标记的简短和甜蜜。还可能值得注意的是，我从什么模式开始并不重要，如果我改变模式它等于相同的结果'''

到目前为止效果很好......当我将视图更改为编辑时，我的列表框似乎不再被绑定（控件出现但没有内容）。我的想法是，显然我正在阻止回发事件中的代码（我有这个原因）。我可以使用此代码（没有 If Not Page.IsPostBack）来强制选择和绑定，但是每当我回发它们时，它们都会默认为表数据，这是不可能发生的，每个列表框都需要回发，以便我可以检查某个选择。所以发生的事情是用户输入被打败了。短而甜。

很抱歉，我无法更好地解释，非常感谢任何建议。如果我可以回答任何问题或发布代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:37:06.357

试试这个：

```
<asp:FormView ID="FormView1" runat="server">
    <ItemTemplate>
        <asp:ListBox ID="ListBoxReadonly" runat="server"></asp:ListBox>
    </ItemTemplate>
    <EditItemTemplate>
        <asp:ListBox ID="ListBoxEdit" runat="server"></asp:ListBox>
    </EditItemTemplate>
</asp:FormView> 
```

然后，在 FormView 的数据绑定事件中，根据当前视图将数据绑定到列表框中。

```
Protected Sub FormView1_DataBound(sender As Object, e As EventArgs) Handles FormView1.DataBound
    Dim myListBox As ListBox

    If FormView1.CurrentMode = FormViewMode.ReadOnly Then
        myListBox = DirectCast(FormView1.FindControl("ListBoxReadonly"), ListBox)
    ElseIf FormView1.CurrentMode = FormViewMode.Edit Then
        myListBox = DirectCast(FormView1.FindControl("ListBoxEdit"), ListBox)
    End If

    If myListBox IsNot Nothing Then
        myListBox.DataValueField = "listing"
        myListBox.DataTextField = "listing"
        myListBox.DataSource = GetListingData()
        myListBox.DataBind()

        ' your pre-select code here...
    End If
End Sub 
```

# python - Python函数将图像从R垂直镜像到L

> ID：12807712
> 
> 赞同：4
> 
> 时间：2012-10-09T20:12:37.920
> 
> 标签：python, function, mirror

我正在尝试编写一个 python 函数来将图片的右半部分镜像到左半部分。到目前为止，我有这段代码，但它以相反的方式工作（它从 L 镜像到 R）我知道它必须是一些简单的更改，但我现在似乎有一个障碍。任何帮助表示赞赏。

```
def mirrorVertical(source):
  mirrorPoint = getWidth(source) / 2
  width = getWidth(source)
  for y in range(0,getHeight(source)):
    for x in range(0,mirrorPoint):
      leftPixel = getPixel(source,x,y)
      rightPixel = getPixel(source,width - x - 1,y)
      color = getColor(leftPixel)
      setColor(rightPixel,color) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:16:22.800

似乎您是从左上角迭代到中间，而不是从右上角迭代到中间。可能想为 x 尝试 range(getWidth(), mirrorPoint) 并使 y 保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:17:53.610

```
 color = getColor(rightPixel)
  setColor(leftPixel,color) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:08:28.730

在更改 的颜色之前`rightPixel`，您应该将此颜色保存到某个位置以便将其设置在`leftPixel`.

就像是

```
color_left = getColor(leftPixel)
color_right = getColor(rightPixel)
setColor(leftPixel, color_right)
setColor(rightPixel, color_left) 
```

应该做的伎俩。

# ruby-on-rails - Ruby on rails - 检索 id 数组并使用该数组查询不同的模型

> ID：12807714
> 
> 赞同：0
> 
> 时间：2012-10-09T20:12:43.553
> 
> 标签：ruby-on-rails, ruby, erb

我有一个模型“ ”，每个事件都包含一个“ ”（不同模型）`Events`的 id 数组。`Genre`当我创建一个事件时，我会选中一堆框并将选中的流派保存到数据库中。这一切都很好。

当我运行循环以显示所有事件时，该字段`genre_ids`返回一个数组，其中包含需要从`genres`表中检索的每个选定类型的 id。

我尝试了我发现但尚未成功的建议。

流派型号：

```
class Genre < ActiveRecord::Base
  has_and_belongs_to_many :events
end 
```

事件模型：

```
class Event < ActiveRecord::Base
  belongs_to :user
  has_many :genres
end 
```

事件控制器：

```
class EventsController < ApplicationController

  def index
    @event_all = Event.all
  end

 def get_genres(event_id)
   @event_genre = Event.find(event_id).genre_id
 end
 helper_method :get_genres

end

 ------- 
```

最后是循环：

```
<div id="index-events-wrap">
   <% @event_all.each do |ea| %>
     <div class="item">
     <div class="event-image">
       image here
     </div>
    <ul>
      <li><%= ea.name %></li>
      <li><%= get_genres(ea.id)  %></li>
      <li><%= ea.venue_name %></li>
      <li><%= ea.venue_address %></li>
      <li><%= ea.venue_postcode %></li>
    </ul>
  </div>
<% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:17:16.563

尝试：

```
@event_all = Event.includes(:genres).all 
```

它将再进行一次查询（以避免多次实例化 Genre 实例）并自动填充所有关联。所以在视图中你可以：

```
<li><%= ea.genres %></li> 
```

顺便说一句，你应该`has_and_belongs_to_many`在两个类中都有，否则 Rails 不会理解它。

```
class Event < ActiveRecord::Base
  belongs_to :user
  has_and_belongs_to_many :genres # <- this one
end 
```

如果需要，请为联接表添加迁移，请参阅[是否需要为 HABTM 联接表手动创建迁移？](https://stackoverflow.com/questions/564306/do-i-need-to-manually-create-a-migration-for-a-habtm-join-table)

# ajax - AJAX 请求在设置标头时失败，但在没有它们的情况下成功

> ID：12807716
> 
> 赞同：2
> 
> 时间：2012-10-09T20:12:54.007
> 
> 标签：ajax, jquery, asp.net-web-api

我有一个在我的本地 IIS 实例上运行的 ASP.NET Web API 应用程序。Web 应用程序配置了 CORS。我调用的 Web API 方法如下所示：

```
[POST("/API/{foo}/{bar}")]
public String DoSomething(String foo, String bar)
{
    return "Hello, World!";
} 
```

客户端，我正在运行以下请求：

```
$.ajax({
    url: "http://machine/API/Foo/Bar",
    type: "POST",
    success: function (data) {
        console.log("Success: " + data);
    },
    error: function (xhr, status, message) {
        console.log("Failure: " + status + ", " + message);
    }
}); 
```

Firefox 15.0.1 中相应的控制台日志内容如下：

```
test.html (line 38)
POST http://machine/API/Foo/Bar

200 OK
        112ms   
jquery-1.7.2.js (line 8240)

Success: "Hello, World!" 
```

当我访问我的本地 IIS 服务器以及让它访问 Visual Studio 中 IIS Express 开发实例的相应 URL 时，这可以完美地工作。

当我添加单个请求标头时**，对我的本地 IIS 服务器发出**以下请求时会失败：

```
$.ajax({
    url: "http://machine/API/Foo/Bar",
    type: "POST",
            onBeforeSend: function (xhr, settings) {
                xhr.setRequestHeader("A", "B");
            },
    success: function (data) {
        console.log("Success: " + data);
    },
    error: function (xhr, status, message) {
        console.log("Failure: " + status + ", " + message);
    }
}); 
```

我看到的非常冗长的日志消息是：

```
Failure: error, 
```

`POST`在 Visual Studio 中针对 IIS Express 开发实例发出相同的请求时成功。

在 Fiddler 中，无论我的目标是完整的 IIS 服务器还是 Visual Studio 中的 IIS Express，前两个请求都会顺利通过：

```
// Request
POST http://machine/Foo/Bar HTTP/1.1
Host: machine
Content-Length: 0

// Response
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Length: 38
Content-Type: application/json; charset=utf-8
Expires: -1
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Tue, 09 Oct 2012 20:16:29 GMT

"Hello, World!" 
```

这些排列`{With Headers, Without Headers} x {Full IIS, IIS Express}`都在 Fiddler 中产生相同的输出。

简而言之：**为什么设置请求标头会导致 AJAX 调用对我的本地完全成熟的 IIS 实例失败？**

此外，为什么我的请求在 Fiddler 中成功，但在我的 Javascript 代码中却没有？如果我无法在正确的 IIS 实例中设置请求标头，这将是一个严重的交易破坏者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:40:33.270

这可能与跨源资源共享有关。在最近的一个项目中，我们遇到了类似的问题，使用自定义 http 标头的跨源资源共享被证明是问题所在。

**仅当 javascript的**域与正在进行的 ajax 调用的域不同时才会发生这种情况。

要确定是否是这种情况，您可以尝试在 Global.asax 中添加类似的内容：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");

    if (HttpContext.Current.Request.HttpMethod == "OPTIONS" )
    {
        //These headers will handle the HTTP OPTIONS call sent by the browser
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods" , "GET, POST" );
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "A, Foo, Bar");
        HttpContext.Current.Response.End();
    }
} 
```

**小心**不要做这样的事情。将 Access-Control-Allow-Origin 标头设置为“*”值存在安全风险。

附加材料： [http ://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:35:49.093

我的 CORS 问题的实际潜在问题与 IIS 7 使用的管道有关。

当 IIS 7 在经典管道下运行时，请求未与请求一起预检`OPTIONS`。正如我在问题中描述的那样，他们会默默地失败。我在 Firebug 的 Net 选项卡中看到了这一点，并通过交互式调试与[Thinktecture IdentityModel](http://thinktecture.github.com/)库明确包含在我的解决方案的项目中。

但是当 IIS 7 在集成管道下运行时，CORS 受到尊重。`POST`请求和具有自定义标头的请求已正确预检。

# internet-explorer - 为什么在 IE 所有版本中以 Quirks 模式打开网站？

> ID：12807719
> 
> 赞同：0
> 
> 时间：2012-10-09T20:13:05.213
> 
> 标签：internet-explorer, layout, quirks-mode

当我在 IE（所有版本 7、8、9）中打开我的网站时，它以 Quirks 模式打开，我没有找到任何解决方案来解决这个问题。

所以请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:21:51.890

```
<body onLoad="blinkFont()">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb">
<head> 
```

我的钱花在了那个美丽上……紧随其后的`script`是结束语`html`和标签之外的`body`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:20:04.940

确保您的站点在 doctype 声明之前没有以空行开头。但这也可能是其他一些事情。

也许[维基百科](http://en.wikipedia.org/wiki/Quirks_mode)也可以帮助你（有一个可以触发怪癖模式的文档类型错误列表）。

**编辑**

在您的特定情况下：文档类型应该是第一行。不是`<body onLoad="blinkFont()">`。

您可以从此处验证您的网站中受益：http: [//validator.w3.org/check ?uri=http%3A%2F%2Fgsateams.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fgsateams.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

# mysql - 如何在不创建新数据库的情况下导入 mySQL 数据库

> ID：12807720
> 
> 赞同：5
> 
> 时间：2012-10-09T20:13:06.293
> 
> 标签：mysql

我正在尝试将 mySQL 数据库导入托管在 PHP Admin 中的权限极其有限的客户端。

我无法创建新数据库，只能使用他们给我的数据库。

当我上传包含数据库详细信息的文件时。我收到一条错误消息，告诉我数据库已经存在。

当我尝试上传包含新数据库详细信息的数据库时...我收到错误消息，提示我不允许创建新数据库。

我该怎么做才能将此数据库的内容上传到新数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:21:39.100

编辑您的 SQL 转储文件并删除数据库创建语句（以及删除数据库，如果有的话）。然后导入。

# java - onActivityResult 没有被击中 Android

> ID：12807721
> 
> 赞同：0
> 
> 时间：2012-10-09T20:13:08.887
> 
> 标签：java, android, android-intent

我有一段代码，我从 startActivityForResult 开始，但 onActivityResult 方法没有被命中，我已经输入了 Log.d 注释，所以我知道代码是否被命中是我的代码：

```
 public class myClass extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.store_selector);
    Button getStore = (Button)findViewById(R.id.getStore);

    getStore.setOnClickListener(buttonGetStoreOnClickListener);
}

Button.OnClickListener buttonGetStoreOnClickListener
= new Button.OnClickListener(){

    public void onClick(View arg0) {

    Intent intent = new Intent("com.blah.Blah.client.android.SCAN");
    intent.setPackage("com.blah.Blah");
    intent.putExtra("com.blah.Blah.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
    startActivityForResult(intent, 0);
    Log.d("debug tag", "started activity");
};
};  

@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent)
{
   Log.d("debug tag", "inside onActivityResult");
    if (requestCode == 0)
    {
        if (resultCode == RESULT_OK)
        {
            String contents = intent.getStringExtra("SCAN_RESULT");
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
            Log.i("debug tag", "contents: "+contents+" format: "+format);
            Intent myIntent = new Intent(this, Ads.class);
            myIntent.putExtra("key", contents);
            startActivity(myIntent);
            setContentView(R.layout.activity_ads);

            // Handle successful scan
        }
        else if (resultCode == RESULT_CANCELED)
        {
            // Handle cancel
            Log.i("xZing", "Cancelled");
        }
    }
}

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:27:14.787

您可能需要在“com.blah.Blah”活动中调用 finish() 之前调用 setResult()

# apache-flex - 在 Flex3 UI 中移动滚动条

> ID：12807722
> 
> 赞同：0
> 
> 时间：2012-10-09T20:13:10.417
> 
> 标签：apache-flex, layout, flex3, scrollbar

我需要在可见时显示垂直滚动条，而不是在右侧（默认），而是在屏幕的左侧。该应用程序是用 Java 编写的，在 Websphere 上运行，在 Flex 3 中具有 UI。带有滚动条的容器是 VBox，从 VBox 扩展而来的自定义对象，在另一种情况下是 DataGrid。这是我迄今为止尝试过的：

这会在初始渲染时在左侧绘制滚动条，然后立即将其移动到右侧。

```
 if( verticalScrollBar && verticalScrollBar.visible )
     {
       verticalScrollBar.x = -verticalScrollBar.width;
     } 
```

这似乎被完全忽略了：

```
protected override function updateDisplayList( unscaledWidth:Number, unscaledHeight:Number ):void
{
    super.updateDisplayList( unscaledWidth, unscaledHeight );
    if( verticalScrollBar && verticalScrollBar.visible )
    {
        verticalScrollBar.x = -verticalScrollBar.width;
    }
} 
```

也试过设置

```
verticalScrollBar.x = 0; 
```

没有任何区别。

这些是我在[网上](http://yourpalmark.com/2008/06/18/reposition-scrollbars-in-flex-components/)和[Stackoverflow](https://stackoverflow.com/questions/615074/flex-change-position-of-scrollbar-to-the-top-of-a-horizontallist-component)上找到的唯一建议。
如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:05:31.310

尝试这样的事情：

```
override public function validateDisplayList():void {
    super.validateDisplayList();
    if (verticalScrollBar && verticalScrollBar.visible) {
        verticalScrollBar.x = 0;
    }
} 
```

# c# - VSTO 默认设置不起作用

> ID：12807724
> 
> 赞同：1
> 
> 时间：2012-10-09T20:13:30.277
> 
> 标签：c#, visual-studio-2005, ms-word, vsto

我只是为 Word AddIn 创建了一个 VSTO 第二版项目并构建了安装项目。

安装后发现错误：

```
Could not load file or assembly 'WordAddIn1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. Failed to grant permission to execute. (Exception from HRESULT: 0x80131418)

************** Exception Text **************
System.IO.FileLoadException: Could not load file or assembly 'WordAddIn1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. Failed to grant permission to execute. (Exception from HRESULT: 0x80131418)
File name: 'WordAddIn1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' ---> System.Security.Policy.PolicyException: Execution permission cannot be acquired.
   at System.Security.SecurityManager.ResolvePolicy(Evidence evidence, PermissionSet reqdPset, PermissionSet optPset, PermissionSet denyPset, PermissionSet& denied, Boolean checkExecutionPermission)
   at System.Security.SecurityManager.ResolvePolicy(Evidence evidence, PermissionSet reqdPset, PermissionSet optPset, PermissionSet denyPset, PermissionSet& denied, Int32& securitySpecialFlags, Boolean checkExecutionPermission)
   at Microsoft.VisualStudio.Tools.Applications.Runtime.AppDomainManagerInternal.HandleOnlineOffline(Exception e, String basePath, String filePath)
   at Microsoft.VisualStudio.Tools.Applications.Runtime.AppDomainManagerInternal.LoadStartupAssembly(EntryPoint entryPoint, Dependency dependency, Dictionary`2 assembliesHash)
   at Microsoft.VisualStudio.Tools.Applications.Runtime.AppDomainManagerInternal.ConfigureAppDomain()
   at Microsoft.VisualStudio.Tools.Applications.Runtime.AppDomainManagerInternal.LoadAssembliesAndConfigureAppDomain(IHostServiceProvider serviceProvider)
   at Microsoft.VisualStudio.Tools.Applications.Runtime.AppDomainManagerInternal.LoadEntryPointsHelper(IHostServiceProvider serviceProvider)

************** Loaded Assemblies **************
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll
----------------------------------------
Microsoft.VisualStudio.Tools.Applications.Runtime
    Assembly Version: 8.0.0.0
    Win32 Version: 8.0.50727.891
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.VisualStudio.Tools.Applications.Runtime/8.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualStudio.Tools.Applications.Runtime.dll
----------------------------------------
System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll
----------------------------------------
System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll
----------------------------------------
Microsoft.Office.Tools.Common
    Assembly Version: 8.0.0.0
    Win32 Version: 8.0.50727.891
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/Microsoft.Office.Tools.Common/8.0.0.0__b03f5f7f11d50a3a/Microsoft.Office.Tools.Common.dll
----------------------------------------
System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5460 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
----------------------------------------
System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.5462 (Win7SP1GDR.050727-5400)
    CodeBase: file:///C:/Windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
---------------------------------------- 
```

我对项目没有任何改变。

我发现一些对 SetSecurity C# 项目的引用，这些项目添加为 Custon Action on install 更改此属性，但 Microsoft 站点已将其删除以供下载。我在[代码项目文章](http://www.codeproject.com/Articles/79285/Deploying-Office-2003-Solutions-with-Auto-update-F)中找到了它。

我按照微软教程进行操作，但出现错误： ![错误！](../Images/a969ad4bcb87482b10424cf8cb8cb148.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:14:40.090

DLL 必须具有权限授予。

在自定义操作安装中使用命令行：

```
caspol -m -q -ag "All_Code" -strong -file "<Full path to DLL>" -noname -noversion  FullTrust -n "<Code group unique name>" -d "<Code group description>" 
```

代码项目[文章](http://www.codeproject.com/Articles/79285/Deploying-Office-2003-Solutions-with-Auto-update-F)代码包含错误。要修复，请在调用上替换上面的命令行。

# java - 从复选框组中识别第 n 个复选框

> ID：12807726
> 
> 赞同：0
> 
> 时间：2012-10-09T20:13:38.660
> 
> 标签：java, selenium, webdriver

在我自动化的 Web 应用程序之一中，复选框组中有 10 个复选框，其中包含组 ID 和组名。现在我必须使用 Selenium WebDriver 选择第 7 个复选框。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:03:05.507

您可以为您的复选框编写一个基于索引的 xpath，并且如注释中所述的 rao_555，如果每个复选框都有一个关联的值，您可以根据复选框值编写一个 xpath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:21:54.450

为您的复选框使用命名约定：CB01、CB02 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T14:37:15.307

XPath 定位器

```
//*[@id='checkbox_group_id']/input[7] 
```

应该做的伎俩。`id`这将选择带有of的元素的第 7 个输入子元素`checkbox_group_id`。

# android - 使用 Android WebView 通过客户端证书连接到安全服务器

> ID：12807742
> 
> 赞同：4
> 
> 时间：2012-10-09T20:14:46.697
> 
> 标签：android, cordova, webview, android-4.0-ice-cream-sandwich, client-certificates

WebView 或更具体地说，PhoneGaps CordovaWebView 可以使用客户端证书对服务器进行身份验证吗？

我了解本机浏览器可以使用客户端证书，但我试图让 PhoneGap Android 应用程序与需要客户端证书才能工作的服务器通信，但看不到如何操作。我尝试了各种我在 google 上看到的方法，但它们不适用于 Android 4.0 或更高版本。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T23:23:28.483

这不可能。sdk 中没有回复客户端证书质询所需的代码。如果您在 android sdk 中查看 WebViewClient 的源代码，您将看到此方法

```
/**
 * Notify the host application to handle a SSL client certificate
 * request (display the request to the user and ask whether to
 * proceed with a client certificate or not). The host application
 * has to call either handler.cancel() or handler.proceed() as the
 * connection is suspended and waiting for the response. The
 * default behavior is to cancel, returning no client certificate.
 *
 * @param view The WebView that is initiating the callback.
 * @param handler An ClientCertRequestHandler object that will
 *            handle the user's response.
 * @param host_and_port The host and port of the requesting server.
 *
 * @hide
 */
public void onReceivedClientCertRequest(WebView view,
        ClientCertRequestHandler handler, String host_and_port) {
    handler.cancel();
} 
```

你在文档部分看到@hide 了吗？这意味着“不要将其提供给公众”。我们需要能够覆盖此方法并利用 ClientCertRequestHandler，但我们不能。不确定谷歌什么时候会打开这个 API，但它在 JellyBean 中不可用。

# java - 如何在 C++ 或 Java 中创建 RichTextBox

> ID：12807745
> 
> 赞同：-3
> 
> 时间：2012-10-09T20:15:05.347
> 
> 标签：java, c++, richtextbox

有人可以给我一个简单的例子来说明如何在 RichTextBox 中编写文本吗？我在网上查找了一些示例代码，但没有找到太多帮助。

我发现的唯一一件事是我必须声明一个 RichTextBox 变量：

```
//Using C++
RichTextBox richbox = gcnew RichTextBox; 
```

但是，这根本不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:05:16.320

丰富的编辑框控件由许多不同的框架提供。它们如何以任何一种语言实现取决于您选择的语言。

对于 C++，有流行的特定于 Windows 的 Win32 API 或 MFC，或者如果您正在深入研究 .NET 框架，则有 WinForms。还有跨平台库，如 wxWidgets 或 Qt。

对于 Java，JDK 有 AWT 和 Swing。还有 Standard Widget Toolkit[等](https://stackoverflow.com/q/7358775/416627)。

选择语言和框架后，尝试使用富编辑控件创建应用程序。如果您遇到问题，请返回您的代码，我们可以帮助您解决更具体的问题。

# ruby-on-rails - 使用 ruby on rails 活动记录关联重新创建 Stackoverflow 的标记系统

> ID：12807749
> 
> 赞同：1
> 
> 时间：2012-10-09T20:15:36.283
> 
> 标签：ruby-on-rails, associations

我想知道 StackOverflow 的标记系统是如何工作的。

Stackoverflow 有`Question`模型和`Tag`模型。

`Question`属于多个`tags`，如 Javascript、Ruby 等。

`Tag`有很多[关于 Javascript](https://stackoverflow.com/questions/tagged/javascript)`questions`的问题和[关于 Ruby](https://stackoverflow.com/questions/tagged/ruby)的问题。

您将如何设置数据库表以反映这种关系？

* * *

我目前的解决方案。

`Question`有一个名为 的属性`tags`。`tags`包含引用不同`Tag`模型的整数列表。当您尝试查询标签模型的所有问题时，这种方式**非常糟糕**，因为您必须遍历每个问题模型的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:19:34.987

使用正常的、经典的、标准的多对多关联：

[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

# google-app-engine - HTTP Get with 204 No Content: 正常吗

> ID：12807753
> 
> 赞同：87
> 
> 时间：2012-10-09T20:16:03.567
> 
> 标签：google-app-engine, http, get, http-status-codes, channel-api

**HTTP GET 请求**有状态码响应是否正常`204 - No Content`？就像，关于 HTTP GET 应该完成什么，这在语义上是否正确？我知道 a对于**HTTP POST-Request**`204 - No Content`是*可以*的。对于 GET 请求，如果没有数据要发回，204 状态码是否合适？我应该使用 404，还是坚持使用 200 才能成功，但响应却空无一物？

 **这个问题的**用例**是我正在为 Google App Engine 编写的 Java 应用程序。我正在向 servlet 发送请求，但是要发送回客户端的数据将通过 Channel API 套接字而不是 HTTP 响应传输。目前，我的客户端在请求正文中发送一个没有内容的 POST，并在轮询 Channel API 套接字之前等待来自 servlet 的 204 响应。因为在请求正文中没有发送任何数据，所以我正在讨论发送 GET 而不是 POST 对我来说是否更有意义。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-09T21:07:58.410

> ### 204 无内容
> 
> 服务器已完成请求，但不需要返回实体主体，并且可能希望返回更新的元信息。响应可能包括实体头形式的新的或更新的元信息，如果存在，应该与请求的变体相关联。

根据[状态代码 204 的 RFC 部分，在](https://www.rfc-editor.org/rfc/rfc2616#section-10.2.5)我看来，它是 GET 请求的有效选择。

A `404 Not Found`，`200 OK`空的身体，`204 No Content`完全不同的意思，有时我们不能使用正确的状态码，而是*违反规则，他们会在一天或更晚的时候回来咬你*。因此，如果您可以使用正确的状态码，请使用它！

我认为 GET 或 POST 的选择非常个人化，因为它们都可以完成工作，但我建议您保留 POST 而不是 GET，原因有两个：

*   您希望另一部分（如果我理解正确的话是 servlet）执行一个操作而不是从中检索一些数据。
*   默认情况下，如果 URL 中没有参数，则 GET 请求是可缓存的，而 POST 则不是。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2017-12-30T18:23:53.047

我将 GET/204 与一个 RESTful 集合一起使用，该集合是一个已知固定长度但带有孔的位置数组。

```
GET /items
    200: ["a", "b", null]

GET /items/0
    200: "a"

GET /items/1
    200: "b"

GET /items/2
    204:

GET /items/3
    404: Not Found 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-08-26T16:35:50.353

您当前的 POST 与 HTTP 204 响应的组合很好。

RFC 不支持使用 POST 作为 GET 的通用替代品，因为每个都有自己的特定目的和语义。

GET 的目的是检索资源。因此，虽然允许，但 HTTP 204 不会是最佳选择，因为响应中预期有内容。如果服务器无法提供请求的资源，则[HTTP 404 Not Found](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.5)或[HTTP 410 Gone将是更好的选择。](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.11)

RFC 还专门调用 HTTP 204 作为对 PUT、POST 和 DELETE 的适当响应，但对 GET 省略了它。

有关 GET 的语义，请参阅[RFC](https://www.rfc-editor.org/rfc/rfc2616#section-9.3)。

还有其他响应代码也可以返回，表示没有内容，这比 HTTP 204 更合适。

例如，对于条件 GET，您可能会收到不包含正文内容的[HTTP 304 Not Modified响应。](https://www.rfc-editor.org/rfc/rfc2616#section-10.3.5)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-12-22T07:24:26.360

乍一看，带有 204 的 POST/GET 似乎很好，并且也可以工作。

文档说，2xx - 此类状态代码表示客户端请求的操作已成功接收、理解、接受和处理。而 4xx —— 4xx 类状态码用于客户端似乎出错的情况。

因为，请求已在服务器上成功接收、理解和处理。结果是找不到资源。因此，在这种情况下，这不是客户端的错误，或者客户端没有错误。

因此，这应该是系列 2xx 代码而不是 4xx。在这种情况下发送 204（无内容）将比 404 或 410 响应更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-18T15:05:49.343

返回 204 的 Http GET 非常好，返回 404 也是如此。

*重要的是您为 API 定义设计标准/指南，以便所有端点一致地使用状态代码。*

例如：

*   如果集合为空，您可以指示返回资源集合的 GET 端点将返回 204。在这种情况下`GET /complaints/year/2019/month/04`，如果 2019 年 4 月没有投诉，可能会返回 204。这不是客户端错误，因此我们返回成功状态码 (204)。OTOH，`GET /complaints/12345`如果投诉号 12345 不存在，可能会返回 404。
*   如果您的 API 使用 HATEOAS，则 204 可能不是一个好主意，因为响应应该包含导航到其他状态的链接。**

# java - 为什么HashSet 在 contains() 和 remove() 中不将参数类型限制为 E

> ID：12807755
> 
> 赞同：6
> 
> 时间：2012-10-09T20:16:06.503
> 
> 标签：java

> **可能重复：**
> [Map.get(Object key) 不是（完全）通用的](https://stackoverflow.com/questions/857420/what-are-the-reasons-why-map-getobject-key-is-not-fully-generic)
> [原因是什么 Java 的 TreeSet<E> remove(Object) 不采用 E](https://stackoverflow.com/questions/8015720/why-does-javas-treesete-removeobject-not-take-an-e)

为什么 HashSet 在这里不将参数类型限制为 E：

```
public boolean contains(Object o)
public boolean remove(Object o) 
```

就像对 add() 所做的那样

```
public boolean add(E e) 
```

我的意思是，如果编译器强制只添加 E 类型的对象，那么该集合不能包含/删除任何其他类型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:20:03.750

不同之处在于添加必须是类型安全的以保持集合的完整性，而项目检查/删除可以承受“类型宽容”而不会有损害集合类型安全的风险。换句话说，如果你添加了一个错误类型的元素，这个集合就会失效；另一方面，如果您检查是否存在错误类型的元素，您将简单地返回一个`false`. 同样适用`remove`：如果你传递一个不兼容类型的元素，它不会在集合^+中，所以删除将是一个空操作。

* * *

^+除非您通过利用类型擦除的 hack 将其放入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:19:07.160

> 那么该集合不能包含/删除任何其他类型

当然可以。阅读[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)或将您的`HashSet<E>`转换为非泛型`HashSet`并添加一个不是类型的对象`E`。

看看这段代码：

```
Integer testInt = new Integer(3);

// First, create a generic set of strings
HashSet<String> set = new HashSet<String>();
set.add("abc");

// Then make it non-generic and add an integer to it
((HashSet) set).add(testInt);

// Now your set-of-strings contains an integer!
System.out.println(set); // prints: [abc, 3]

// Remove the integer
set.remove(testInt);
System.out.println(set); // prints: [abc] 
```

这种奇怪的原因是泛型类型的信息在运行时被删除了，你的集合变成了一个简单的对象集合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T21:00:13.113

`contains`和的参数`remove`不能被限制，`E`因为你应该能够给它们相等的对象，这非常有用。更准确地说，API`HashSet.remove`说：

> ...更正式地说，如果该集合包含这样的元素，则删除元素 e 使得 (o==null ? e==null : o.equals(e))。

`Object.equals`作为参数，这对于启用不同类型之间`Object`的相等性也非常有用。

因此，为了启用`contains`and的更一般的功能`remove`（在等价类上，而不仅仅是对象身份），它们必须`Object`作为参数。

* * *

例子：

```
 HashSet<ArrayList<String>> set = new HashSet<ArrayList<String>>();
    ArrayList<String> list = new ArrayList<String>();
    list.add("foo");
    LinkedList<String> equalList = new LinkedList<String>();
    equalList.add("foo");
    set.add(list);

    System.out.println(list.equals(equalList)); // prints: true
    System.out.println(set.contains(equalList)); // prints: true

    System.out.println(set); // prints: [[foo]]
    set.remove(equalList);
    System.out.println(set); // prints: [[]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T20:19:18.157

您不会使用这两种方法向集合中添加任何内容，因此不需要限制类型参数。如果类型不匹配，则方法只能返回 false。

# javascript - 用一个替换几个滚动条

> ID：12807757
> 
> 赞同：0
> 
> 时间：2012-10-09T20:16:11.037
> 
> 标签：javascript, jquery-ui, scroll, jquery-jscrollpane, tinyscrollbar

我有一种情况，我有两个带有滚动条的 div，我需要摆脱它们，并且两个 div 都只有一个统一滚动。我正在使用 JavaScript 来同步两个窗格的滚动，并使用溢出隐藏其中一个滚动条：隐藏。可见的滚动条使用脚本滚动两个窗格。

[http://jsfiddle.net/Amnesiac/ekT3h/5/](http://jsfiddle.net/Amnesiac/ekT3h/5/)

我想知道是否有更好的方法来实现这一点。我愿意使用任何外部库或 q jQuery 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:38:42.930

我多年来一直在使用这个插件：http: [//blogs.msdn.com/b/matt/archive/2009/03/19/synchronizing-scrollbars-using-jquery.aspx](http://blogs.msdn.com/b/matt/archive/2009/03/19/synchronizing-scrollbars-using-jquery.aspx)

```
jQuery.fn.synchronizeScroll = function() {

               var elements = this;
               if (elements.length <= 1) return;

              elements.scroll(
              function() {
                  var left = $(this).scrollLeft();
                  var top = $(this).scrollTop();
                  elements.each(
                  function() {
                      if ($(this).scrollLeft() != left) $(this).scrollLeft(left);
                      if ($(this).scrollTop() != top) $(this).scrollTop(top);
                  }
                  );
              });
          } 
```

# delphi - 为什么组合框会在字体更改时将其文本更改为项目文本？

> ID：12807758
> 
> 赞同：4
> 
> 时间：2012-10-09T20:16:11.520
> 
> 标签：delphi, winapi, windows-7, delphi-2009, delphi-xe3

这显然是一个错误，但我无法追查为什么会发生。这是一个要重现的简约代码。只需在表单上放置一个组合框和按钮，然后编写以下事件处理程序：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  ComboBox1.Items.Add('A Item');
  ComboBox1.Items.Add('B Item');
  ComboBox1.Items.Add('C Item');
  ComboBox1.Style := csDropDown;
  ComboBox1.AutoComplete := False;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ComboBox1.Text := 'B';
  ComboBox1.Font.Color := clRed;
  ShowMessage(IntToStr(ComboBox1.ItemIndex));
end; 
```

当您第一次单击该按钮时，您将在组合编辑中看到第二个项目的完全选定文本，但消息框会显示项目索引等于 -1。当您下拉它时，似乎选择了第二个项目。第二次单击将设置正确的文本，但其余部分与第一次单击时相同。因此，在这种情况下，组合框的行为就像启用了一些奇怪的自动完成功能。

我已经追踪到`EditWndProc`字体更改后收到`WM_SETTEXT`带有第二项文本的消息的位置，但我不知道它来自哪里以及为什么使用第二项的文本。

所以，我的问题非常具体 - 什么（哪种方法）发送`WM_SETTEXT`at 字体更改以及在禁用自动完成时它如何知道第二项文本匹配？

到目前为止，我可以在安装了最新更新的 Windows 7 Home Premium 64 位上的 Delphi 2009 和 Delphi XE3 中重现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:16:53.713

只需启用 Debug DCU，然后进入`Font.Color`属性设置器，您就可以在几秒钟内自行追踪到这一点。

当由于`Font`任何原因更改时，将`TFont.OnChange`触发事件。 `TControl`有一个事件处理程序分配给它，即使它可以向自己发送一条`CM_FONTCHANGED`消息以允许后代类对更改做出反应。当`TWinControl`收到该消息时，它会向`WM_SETFONT`自己发送一条消息，然后触发 ComCtl32 发送`WM_SETTEXT`您正在查看的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:59:00.923

我不认为这是 VCL 问题，查看调用堆栈，似乎消息似乎是通过 comctl32.dll 处理的。您可以通过在设置文本之前设置字体颜色来解决问题：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ComboBox1.Font.Color := clRed;
  ComboBox1.Text := 'B';
  ShowMessage(IntToStr(ComboBox1.ItemIndex));
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-28T08:46:02.427

我对 Delphi XE8 的实验似乎表明，只要您第一次开始使用 TComboBox 并且在您第一次编写文本之前，强制更改字体请求（例如，只需将颜色设置为 clBlack，即使它已经是）就足够了给它。我认为 WM_SETTEXT 选择错误的文本只会在第一次写入字体颜色（或其他字体属性）时发生。之后，一切正常。无论是 Windows 还是 Delphi 中的错误，我都懒得去发现，因为这个技巧为我解决了问题。:) 但是，我怀疑这是“初始化前的操作”的另一种情况 因为当您为用户提供大量构建后的配置属性（例如更改尚未使用的 TCombobox 中的字体和文本）时，编码人员没有考虑到事情并不总是以方便的顺序被调用。如果这确实是“万灵药”，那么也许我们应该说服 Delphi 团队为我们将其放入 TCombobox（或祖先）构造函数中。顺便说一句，这个相同的“错误”导致 SelLength 从零变化 - 非常烦人，因为它最终将文本框着色为蓝色，暗示焦点，当焦点不是！因此，如果您的表单上有很多组合框都显示为蓝色并声称有焦点 - 这也是特别令人头疼的根源！那么也许我们应该说服 Delphi 团队为我们将其放入 TCombobox（或祖先）构造函数中。顺便说一句，这个相同的“错误”导致 SelLength 从零变化 - 非常烦人，因为它最终将文本框着色为蓝色，暗示焦点，当焦点不是！因此，如果您的表单上有很多组合框都显示为蓝色并声称有焦点 - 这也是特别令人头疼的根源！那么也许我们应该说服 Delphi 团队为我们将其放入 TCombobox（或祖先）构造函数中。顺便说一句，这个相同的“错误”导致 SelLength 从零变化 - 非常烦人，因为它最终将文本框着色为蓝色，暗示焦点，当焦点不是！因此，如果您的表单上有很多组合框都显示为蓝色并声称有焦点 - 这也是特别令人头疼的根源！

顺便说一句，我已经向 Embarcadero 提出了这个问题，并提出了一个解决方案，将上述技巧合并到基本构造函数中。他们将其传递给编码人员，但新版本的 Delphi 是否会包含必要的修复还有待观察。

# c++ - C++ 用 typedef 的 std::vector 重载 << 运算符

> ID：12807759
> 
> 赞同：6
> 
> 时间：2012-10-09T20:16:12.523
> 
> 标签：c++, operator-overloading

我有一些问题让我感到奇怪。我已经 typedef'ed a`std::vector`其中包含一些自己的类：

```
typedef std::vector<data::WayPoint> TWayPointList; 
```

这是结构内部的嵌套类型，`DataHandler`它在某些命名空间中具有抵抗力`data`。

所以，现在我想打印出向量的单个内容。为此，我的想法是重载 << 运算符并循环遍历 typedef'ed 向量的单个元素。所以我在结构中声明了以下输出运算符`DataHandler`：

```
namespace data
{
    structure DataHandler
    {

        // ... some code
        typedef std::vector<data::WayPoint> TWayPointList;

        // ... some more code

        /**
         * @brief Globally overloaded output operator
         *
         * @param[in] arOutputStream Reference to output stream.
         * @param[in] arWayPointList WayPoint which should be printed to output stream.
         */
         LIB_EXPORTS friend std::ostream& operator<<(std::ostream& arOutputStream, const data::DataHandler::TWayPointList& arWayPointList);
    } // structure DataHandler
} // namespace data 
```

并在相应的源文件中定义它：

```
namespace data
{
   std::ostream& operator<<(std::ostream& arOutputStream, const DataHandler::TWayPointList& arWayPointList)
    {
        for(DataHandler::TWayPointList::const_iterator lIterator = arWayPointList.begin(); lIterator < arWayPointList.end(); ++lIterator)
        {
            arOutputStream << *lIterator << std::endl;
        }

        return arOutputStream;
    }
} // namespace data 
```

这编译得很好。但是如果我添加这样的东西

```
int main(int argc, char *argv[])
{
    // create Waypoint
    data::WayPoint lWayPoint;

    // create waypoint list
    data::DataHandler::TWayPointList lWayPointList;

    // append two elements
    lWayPointList.push_back(lWayPoint);
    lWayPointList.push_back(lWayPoint);

    std::cout << lWayPointList << std::endl;

    return 0;
} 
```

在我`testmain.cpp`的 中，编译器提到，它找不到正确的`operator<<`（并做出很多假设，它找到了哪一个......包括我自己在其他类中定义的一些）。像这样的一些错误

```
src/main.cpp:107: error: no match for 'operator<<' in 'std::cout << lWayPointList'
src/main.cpp:107:18: note: candidates are:
... a long list of canditates... 
```

我认为这与 ADL 有关，但我没有明白这一点。

那么，有什么想法和建议可以让代码正常工作吗？

[编辑] 我在源代码和错误输出中添加了一些文件以进行澄清。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T20:23:40.423

朋友声明在具有此类朋友声明的类的命名空间中的命名空间级别声明一个函数。从运算符的定义来看，您似乎是在全局命名空间中定义它（顺便说一句，您在朋友声明中的评论说的是，太糟糕的编译器不阅读评论）。您需要`operator<<`在正确的命名空间中定义：

```
std::ostream& mkilib::operator<<(std::ostream& arOutputStream,
            /*^^^^^^^^*/         const mkilib::DataHandler::TWayPointList& arWayPointList) 
```

或者：

```
namespace mkilib {
    std::ostream& operator<<(std::ostream& arOutputStream,
                             const DataHandler::TWayPointList& arWayPointList) {...}
} 
```

在您的程序中，有两个`operator<<`声明了`TWayPointList`对象，一个在全局命名空间中（定义是一个自我声明），一个在`::mkilib`命名空间中（来自朋友声明）。依赖于参数的查找正在查找 中的那个`::mkilib`，但从未在代码中定义过。

* * *

更新后，这似乎不是真正的问题，因为编译器无法找到重载（上面的答案是关于已编译但未链接的代码）。您已经从您的代码更改为您对命名空间的要求。如果在同一个命名空间中定义了 和 ，那么 ADL 将找到正确的重载`Waypoint`。请注意，定义的名称空间没有任何作用。`operator<<``std::vector<Waypoint>``DataHandler`

* * *

实际上，现在我考虑一下，原来的答案确实适用。友元声明对查找没有任何影响，因为 ADL 不会在内部`DataHandler`搜索该运算符，因此唯一的声明`operator<<`是定义中的自我声明。

请注意，朋友声明在命名空间级别声明了一个实体，但该声明仅*在*具有朋友声明的类中可见。

一条建议：避免使用指令，它们只会带来混乱和痛苦。如果需要，重新打开命名空间或限定标识符......使用指令使查找的推理更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:54:37.510

正如我从您的代码片段中看到的那样，您不是`using namespace data`，但您的运算符是在`data`命名空间中定义的。你可以使用`data`命名空间，但我相信你有自己的理由。

您可以在命名空间之外定义一个通用运算符，而不是声明特定于您的数据类型的运算符，如下所示：

```
template<typename T>
std::ostream& operator<<(std::ostream& out, const std::vector<T>& list)
{
    for(std::vector<T>::const_iterator iter = list.begin(); iter != list.end(); ++iter)
    {
        out << *iter;
    }
} 
```

# nlp - lingPipe - 情绪分析

> ID：12807761
> 
> 赞同：0
> 
> 时间：2012-10-09T20:16:16.213
> 
> 标签：nlp, sentiment-analysis

我正在使用 LingPipe 进行情绪分析。我正在尝试从 LingPipe 运行示例文件，该文件在构造函数中给出错误 -

```
class PolarityBasic {
File mPolarityDir;
String[] mCategories;
DynamicLMClassifier mClassifier;

PolarityBasic(String[] args) {
    System.out.println("\nBASIC POLARITY DEMO");
    mPolarityDir = new File("polarity_dir/txt_sentoken");
    System.out.println("\nData Directory=" + mPolarityDir);
    mCategories = mPolarityDir.list();
    int nGram = 8;
    boolean bounded = false;
    mClassifier = new DynamicLMClassifier(mCategories,nGram,bounded); // error..
} 
```

// 其他方法..

}

创建 mClassifier 给出错误：con 找不到符号构造函数 DynamicLMClassifier(String[],int,boolean)..

我不知道这个类的构造函数语法，我刚刚添加了 .jar 文件。

而且在程序中我也找不到在哪里传递要分析的文本。有谁知道如何消除这个错误。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:16:00.777

您使用的不是当前版本的 LingPipe 教程。请查看[http://alias-i.com/lingpipe/demos/tutorial/sentiment/read-me.html上的情绪教程](http://alias-i.com/lingpipe/demos/tutorial/sentiment/read-me.html)

相关的 Javadoc 位于：

[http://alias-i.com/lingpipe/docs/api/com/aliasi/classify/DynamicLMClassifier.html](http://alias-i.com/lingpipe/docs/api/com/aliasi/classify/DynamicLMClassifier.html)

# php - 如果设备是移动设备，则为页面呈现不同的模板

> ID：12807764
> 
> 赞同：0
> 
> 时间：2012-10-09T20:16:22.860
> 
> 标签：php, wordpress, mobile

我正在 wordpress 中创建一个新模板，我希望能够根据请求页面的设备为页面呈现不同的模板。

例如。

```
page request = "/home"
if desktop render template-home.php
if mobile browser render template-mobile-home.php 
```

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:25:34.113

实际上有很多`Mobile Theme Switcher`插件可以为你完成这项工作。您可以使用更适合您的任何一种。这些插件只是通过检测设备来切换主题。只需看看[Any Mobile Theme Switcher](http://wordpress.org/extend/plugins/any-mobile-theme-switcher/)和[Mobile Theme Switch](http://wordpress.org/extend/plugins/mobile-theme-switcher/)插件。希望能帮助到你。

还可以查看一些[免费的 wordpress 移动主题](http://slodive.com/freebies/free-wordpress-mobile-themes/)。我正在为我的博客使用[WPtouch](http://wordpress.org/extend/plugins/wptouch/screenshots/)。您可能也喜欢[这个](http://www.obox-design.com/wpmobile.cfm)，它只是将 wordpress 主题转换为移动友好主题。

# cloudbees - 在 CloudBees 上运行 PHP 应用程序作为 Jenkins 构建的一部分

> ID：12807766
> 
> 赞同：0
> 
> 时间：2012-10-09T20:16:39.540
> 
> 标签：cloudbees

我想在 Jenkins/Cloudbees 上针对我的应用程序运行一些集成测试。在 Quercus 上部署不是一种选择，因为应用程序的某些部分 (nusoap) 无法正常工作。

我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:28:53.977

只有命令行 PHP 可用于构建从属服务器，因此您必须将应用程序部署在 php 托管服务上才能运行此类集成测试。

请注意最近的 php 版本可以[运行一个基本的 http 服务器](http://php.net/manual/en/features.commandline.webserver.php)，所以你可以启动你的 web 应用程序。

# php - 在 php 中使用 for 循环解析 XML

> ID：12807769
> 
> 赞同：1
> 
> 时间：2012-10-09T20:16:56.387
> 
> 标签：php, xml, xml-parsing

我正在尝试并尝试解析 XML 文档。当我查看 var_dump 时，我可以获得所有信息，但我需要做的是从文档中提取 Id 和图像 url。我尝试使用 for each 循环，它会以正确的次数通过循环，但我需要的 Id 号永远不会改变。XML 文档是：

```
<?xml version="1.0"?>
<GetMatchingProductForIdResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetMatchingProductForIdResult Id="9781124028491" IdType="ISBN" status="ClientError">
 <Error>
<Type>Sender</Type>
<Code>InvalidParameterValue</Code>
<Message>Invalid ISBN identifier 9781124028491 for marketplace ATVPDKIKX0DER</Message>
</Error>
</GetMatchingProductForIdResult>
<GetMatchingProductForIdResult Id="9780030114687" IdType="ISBN" status="Success">
<Products xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
<Product>
  <Identifiers>
    <MarketplaceASIN>
      <MarketplaceId>ATVPDKIKX0DER</MarketplaceId>
      <ASIN>0030114683</ASIN>
    </MarketplaceASIN>
  </Identifiers>
  <AttributeSets>
    <ns2:ItemAttributes xml:lang="en-US">
      <ns2:Author>Turk, Jonathan.</ns2:Author>
      <ns2:Binding>Unknown Binding</ns2:Binding>
      <ns2:Label>Saunders College Publishers, USA</ns2:Label>
      <ns2:Manufacturer>Saunders College Publishers, USA</ns2:Manufacturer>
      <ns2:ProductGroup>Book</ns2:ProductGroup>
      <ns2:ProductTypeName>BOOKS_1973_AND_LATER</ns2:ProductTypeName>
      <ns2:PublicationDate>2004-12-07</ns2:PublicationDate>
      <ns2:Publisher>Saunders College Publishers, USA</ns2:Publisher>
      <ns2:SmallImage>
        <ns2:URL>http://g-ecx.images-amazon.com/images/G/01/x-site/icons/no-img-sm._V192198896_.gif</ns2:URL>
        <ns2:Height Units="pixels">40</ns2:Height>
        <ns2:Width Units="pixels">60</ns2:Width>
      </ns2:SmallImage>
      <ns2:Studio>Saunders College Publishers, USA</ns2:Studio>
      <ns2:Title>Introduction to Environmental Studies.</ns2:Title>
    </ns2:ItemAttributes>
  </AttributeSets>
  <Relationships/>
  <SalesRankings/>
</Product> 
```

为了简洁起见，我把它删掉了。我的php是这样的：

```
 foreach($parsed_xml->GetMatchingProductForIdResult as $item ) {
 //$ean =$parsed_xml->GetMatchingProductForIdResult->attributes()->Id; var_dump($ean);//->attributes()->Id
 $current = $parsed_xml->GetMatchingProductForIdResult->Products;

        print_r(" passed the foreach statement ");

 //$status = $parsed_xml->GetMatchingProductForIdResult->attributes()->status;

     //$isbn13 = $ean;print_r($isbn13);
      if(isset($parsed_xml->GetMatchingProductForIdResult, $current, $current->Product, $current->Product->AttributeSets)){
        $amazonResult = array(
                            'isbn' => $parsed_xml->GetMatchingProductForIdResult->attributes()->Id,//$isbn13,
            'ImageURL' => str_replace('SL75','SL200',$current->Product->AttributeSets->children('ns2', true)->ItemAttributes->SmallImage->URL),
                            );
   print_r(" Success was true ");

     }  else {

$amazonResult = array(
                            'isbn' => $parsed_xml->GetMatchingProductForIdResult->attributes()->Id,//$isbn13,
            'ImageURL' => "Jim",
                            );
    print_r(" Success was false ");
}    
    //update image in images table
    print_r(" at the insert statement ");
$conn->query("INSERT INTO images (isbn, image) VALUES ('" . $amazonResult['isbn'] . "', '" . $amazonResult['ImageURL'] . "')"); 
```

通过循环时如何获取每个单独的 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:47:26.037

经过多次试验和错误后的最终解决方案是：

```
 $parsed_xml = ProductId_xml($isbn);

  foreach($parsed_xml->GetMatchingProductForIdResult as $item ) {
 $ean =$item->attributes()->Id;
$current = $item->Products;

 $status = $item->attributes()->status;

      if (stristr($status, "Success") == true)
{
        $amazonResult = array(
                            'isbn' => $ean,//$parsed_xml->GetMatchingProductForIdResult->attributes()->Id,
            'ImageURL' => str_replace('SL75','SL200',$current->Product->AttributeSets->children('ns2', true)->ItemAttributes->SmallImage->URL),
                            );

     }  else {

$amazonResult = array(
                            'isbn' => $ean,
            'ImageURL' => "",
                            ); 
```

}

我需要在 foreach 语句之后使用 $item 。

# asp.net-membership - Visual Studio 2012 中的网站管理工具

> ID：12807770
> 
> 赞同：9
> 
> 时间：2012-10-09T20:17:00.450
> 
> 标签：asp.net-membership, asp.net-mvc-4, visual-studio-2012

我不知道如何配置我的 web.config 以使网站管理工具与 Visual Studio 2012 中的 MVC 4 项目一起使用。

以下是重现此行为的步骤

*   在 Visual Studio 2012 中创建一个新的 MVC4 项目
*   运行项目（ctrl+f5）
*   注册自己并登录。您会注意到在 app_data 文件夹中创建了一个新文件。例如 aspnet-MvcApplication6-20121009211525.mdf
*   如果您打开 mdf 文件（在 Visual Studio 中），您将能够在服务器资源管理器窗口中浏览架构。

*   现在启动网站管理工具（项目->asp.net 配置）。尝试转到安全选项卡。你应该看到我这样的消息：

> 您选择的数据存储存在问题。这可能是由无效的服务器名称或凭据或权限不足引起的。这也可能是由于未启用角色管理器功能造成的。单击下面的按钮可重定向到您可以选择新数据存储的页面。以下消息可能有助于诊断问题：无法连接到 SQL Server 数据库。

我已经用谷歌搜索了我的问题的解决方案，但似乎大多数答案都是针对旧版本的 MVC / Visual Studio，所以我还没有成功。令我惊讶的是，当您使用标准 MVC 4 模板时，web.config 中既没有成员资格也没有 roleManager 部分（而如果您创建一个 ASP.NET Forms 应用程序，您将看到这两个部分。不幸的是，我遇到了同样的错误ASP.NET WebForms 模板，所以我没有继续调查。）。此外，roleManager 或成员资格配置部分通常定义来自 System.Web.Provider 程序集的提供程序。MVC 4 模板甚至没有引用 System.Web.Provider 程序集，所以我想知道角色/成员资格在 MVC 4 中是如何工作的。它可能在新版本中已经过时，但我没有找到关于这个主题的信息（系统.Web。安全程序集似乎取代了 System.Web.Provider）。我的错误也可能与我只安装了 LocalDB 而没有其他 SQL 服务器实例有关。

所以我的问题是：你能重现这个错误并且你能修复它吗？这是什么原因？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:37:07.077

我在这里找到了答案：[ASP.NET 网站管理工具 (WSAT) 与 SimpleMembership 不兼容](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

# ftp - ftp Put *.ext 只传输第一个文件

> ID：12807778
> 
> 赞同：6
> 
> 时间：2012-10-09T20:17:42.337
> 
> 标签：ftp, wildcard, put

所以我有一个批处理文件，它将一些 ftp 命令通过管道传输到主机中，我想将具有特定扩展名的本地目录中的每个文件复制到主机。

i ftp 之后发生的所有事情都是目录更改

放 *.ext 退出

它将把找到的任何给定文件的第一个实例放在主机上，但忽略所有后续实例。有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:36:44.077

没关系，我发现'put'只会处理一个文件。我正在寻找的命令是'mput'！

# sql - Microsoft Access 2007 运行查询

> ID：12807780
> 
> 赞同：0
> 
> 时间：2012-10-09T20:17:47.953
> 
> 标签：sql, ms-access, ms-access-2007

我正在 Microsoft Access 2007 上运行查询。我正在尝试使用多个表。运行查询后，报告中显示的数据重复且错误。我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T14:46:25.083

听起来您没有链接表格并且正在获得*笛卡尔积*（所有可能的结果）。

在查询页面中，尝试将链接字段（外键或主键）从一个表拖动到另一个表，您将看到一条线绘制。这意味着表格将链接字段值（和数据类型）相等的地方，并且您最终应该得到您期望的结果。

理解这一点是使用关系数据库的关键，在早期可能有点难以掌握。

跳这有助于作为一个起点。

如果没有，请发布更多信息。

# ipad - 更新 ipad 应用程序中的 plist

> ID：12807782
> 
> 赞同：0
> 
> 时间：2012-10-09T20:17:52.403
> 
> 标签：ipad

我制作了一个使用 plist 的应用程序。我现在想做的是能够将 plists 作为更新推送，以便用户可以下载它们并将它们添加到应用程序中的当前 plist 中。如果有人能阐明我如何实现这一点，我将不胜感激。

# html - 放在父元素的底部

> ID：12807787
> 
> 赞同：0
> 
> 时间：2012-10-09T20:18:25.610
> 
> 标签：html, css

 我相信这是一个简单的修复，但到目前为止我找不到它。

（考虑下面的截图）

我有一个`<a class="addcomment">`在 a 内`<p>`，我只是希望`<a>`始终位于 的左下方`<p>`，无论其高度如何。

即使 `position: relative; left: 0px; bottom: 0px;`我确定 the`<p>`是`<a>`.

这是元素的当前 CSS 样式：

```
a.addcomment:link,
a.addcomment:visited {
  text-decoration: none;
  border-bottom: 1px dotted #820106;
  color: #820106;
}

a.addcomment:hover,
a.addcomment:active {
  text-decoration: none;
  border-bottom: none;
  color: #820106;
} 
``` 

[这看起来不错，因为无论如何 a 标签都在底部](http://captainscall.site11.com/temp_stuff/a-tag-1.png)

[这不是因为 a 标签不在我想要的底部](http://captainscall.site11.com/temp_stuff/a-tag-2.png)

提前感谢您的知识和建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:20:27.843

给`position:relative`p 和 a with`position absolute; bottom:0; left:0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:38:54.833

您可以尝试“P”元素的最小高度。

# java - Java获取可用内存

> ID：12807797
> 
> 赞同：87
> 
> 时间：2012-10-09T20:19:14.233
> 
> 标签：java, performance, web-services, memory, operating-system

有什么好方法可以在运行时让 JVM 可用的剩余内存？这样做的用例是让 Web 服务在接近其内存限制时优雅地失败，通过拒绝新连接并显示一个很好的错误消息“太多人使用这个，稍后再试”，而不是因为 OutOfMemory 错误而突然死亡.

请注意，这与事先计算/估计每个对象的成本无关。原则上，我可以估计我的对象占用了多少内存并根据该估计拒绝新的连接，但这似乎有点老套/脆弱。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-10-09T20:22:45.263

[William Brendel 的这个样本可能有一些用处。](https://stackoverflow.com/questions/25552/using-java-to-get-os-level-system-information)

编辑：我最初提供了这个示例（链接到 William Brendel 对另一个主题的回答）。该主题的创建者 (Steve M) 想要创建一个多平台 Java 应用程序。具体来说，用户试图找到一种方法来评估正在运行的机器的资源（磁盘空间、CPU 和内存使用情况）。

这是该主题中给出的答案的内嵌文字记录。但是，有人指出，尽管我的回答被标记为已接受，但这并不是理想的解决方案。

```
public class Main {
  public static void main(String[] args) {
  /* Total number of processors or cores available to the JVM */
  System.out.println("Available processors (cores): " + 
  Runtime.getRuntime().availableProcessors());

  /* Total amount of free memory available to the JVM */
  System.out.println("Free memory (bytes): " + 
  Runtime.getRuntime().freeMemory());

  /* This will return Long.MAX_VALUE if there is no preset limit */
  long maxMemory = Runtime.getRuntime().maxMemory();
  /* Maximum amount of memory the JVM will attempt to use */
  System.out.println("Maximum memory (bytes): " + 
  (maxMemory == Long.MAX_VALUE ? "no limit" : maxMemory));

  /* Total memory currently in use by the JVM */
  System.out.println("Total memory (bytes): " + 
  Runtime.getRuntime().totalMemory());

  /* Get a list of all filesystem roots on this system */
  File[] roots = File.listRoots();

  /* For each filesystem root, print some info */
  for (File root : roots) {
    System.out.println("File system root: " + root.getAbsolutePath());
    System.out.println("Total space (bytes): " + root.getTotalSpace());
    System.out.println("Free space (bytes): " + root.getFreeSpace());
    System.out.println("Usable space (bytes): " + root.getUsableSpace());
  }
 }
} 
```

用户 Christian Fries 指出，假设它`Runtime.getRuntime().freeMemory()`为您提供了在发生内存不足错误之前可能分配的内存量是错误的。

从[文档](https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#freeMemory--)中，签名返回`Runtime.getRuntime().freeMemory()`如下：

***返回：****当前可用于未来分配的对象的内存总量的近似值，以字节为单位。*

但是，用户 Christian Fries 声称此功能可能会被误解。他声称，在发生内存不足错误（可用内存）之前可能分配的大致内存量可能由下式给出：

```
long presumableFreeMemory = Runtime.getRuntime().maxMemory() - allocatedMemory; 
```

被`allocatedMemory`给予：

```
long allocatedMemory = 
  (Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory()); 
```

这里的关键是空闲内存的概念之间的差异。一件事是操作系统为 Java 虚拟机提供的内存。另一个是由 Java 虚拟机本身实际使用的内存块组成的总字节数。

考虑到分配给 Java 应用程序的内存是由 Java 虚拟机按块管理的，Java 虚拟机可用的*可用内存*量可能与 Java 应用程序可用的内存量不完全匹配。

具体来说，Christian Fries 表示使用`-mx`or`-Xmx`标志来设置 Java 虚拟机可用的最大内存量。他指出以下功能差异：

```
/* Returns the maximum amount of memory available to 
   the Java Virtual Machine set by the '-mx' or '-Xmx' flags. */
Runtime.getRuntime().maxMemory();

/* Returns the total memory allocated from the system 
   (which can at most reach the maximum memory value 
   returned by the previous function). */
Runtime.getRuntime().totalMemory();

/* Returns the free memory *within* the total memory 
   returned by the previous function. */
Runtime.getRuntime().freeMemory(); 
```

克里斯蒂安以他的回答结束他的陈述，`Runtime.getRuntime().freeMemory()`事实上返回了可以称为假定的自由记忆的东西。即使未来的内存分配没有超过该函数返回的值，如果 Java 虚拟机还没有收到主机系统分配的实际内存块，a[`java.lang.OutOfMemoryError`](https://docs.oracle.com/javase/8/docs/api/java/lang/OutOfMemoryError.html)仍然可能产生。

最后，正确使用的方法将在不同程度上依赖于您的应用程序的具体情况。

我提供了另一个可能有用的链接。这是用户 Richard Dormand 提出的一个问题，stones333 回答了[关于确定使用的默认 Java 堆大小的问题。](https://stackoverflow.com/questions/4667483/how-is-the-default-java-heap-size-determined)

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-08-21T19:43:09.207

注意：到目前为止，所有答案，即使是被接受的答案，似乎都通过说`Runtime.getRuntime().freeMemory()`给你在发生内存不足错误之前可能分配的内存量来回答这个问题。然而：这是错误的。

在发生内存不足错误之前可能分配的*大约*内存量，即空闲内存可能

```
long presumableFreeMemory = Runtime.getRuntime().maxMemory() - allocatedMemory; 
```

在哪里

```
long allocatedMemory      = (Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory()); 
```

*说明：* 如果通过 -mx 参数（或 -Xmx）启动 JVM，则指定 JVM 可用的最大数量。`Runtime.getRuntime().maxMemory()`会给你这个数额。JVM 将从这个系统内存量中以块的形式分配内存，例如 64 mb 的块。开始时，JVM 只会从系统中分配这样一个块，而不是全部。`Runtime.getRuntime().totalMemory()`给出从系统分配的总内存，同时给出分配的总内存*中*`Runtime.getRuntime().freeMemory()`的空闲内存。

 *因此：

```
long definitelyFreeMemory = Runtime.getRuntime().freeMemory(); 
```

是 JVM 已经保留的空闲内存，但它可能只是一小部分。你很可能会得到`presumableFreeMemory`. 当然，即使您尝试分配的数量小于`presumableFreeMemory`. 如果 JVM 没有从系统中获取下一个内存块，则可能会发生这种情况。但是，在大多数系统上，这永远不会发生，系统宁愿开始交换 - 您希望避免这种情况。回到原来的问题：如果 -mx 设置为一个合理的值，那么`presumableFreeMemory`它是空闲内存的一个很好的指标。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-04-10T18:03:26.990

要获取操作系统范围内的可用内存，请[`OSHI`](https://mvnrepository.com/artifact/com.github.dblock/oshi-core)使用以下 maven 依赖项添加：

```
<dependency>
    <groupId>com.github.oshi</groupId>
    <artifactId>oshi-core</artifactId>
    <version>LATEST</version>
</dependency> 
```

然后在 Java 中，使用以下代码：

```
SystemInfo si = new SystemInfo();
HardwareAbstractionLayer hal = si.getHardware();
long availableMemory = hal.getMemory().getAvailable(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-09T23:11:03.547

除了使用 Runtime 方法之外，您还可以使用以下方法获取一些额外的内存信息

```
MemoryMXBean memBean = ManagementFactory.getMemoryMXBean();
MemoryUsage heap = memBean.getHeapMemoryUsage();
MemoryUsage nonheap = memBean.getNonHeapMemoryUsage(); 
```

每个[MemoryUsage](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/MemoryUsage.html)都提供了 init、used、committed 和 max 值。如果创建一个内存监视器线程来轮询内存并记录它，这可能很有用，为您提供一段时间内的内存使用历史记录。有时，查看导致错误的内存使用情况会很有帮助。

如果您真的想将其发挥到极致，请创建一个堆转储线程。随着时间的推移监控您的内存使用情况，当它超过某些阈值时执行以下操作（这适用于 JBoss 5.0 - 您的里程可能会有所不同）：

```
// init code
MBeanServer server = ManagementFactory.getPlatformMBeanServer();
HotSpotDiagnosticMXBean diagBean = ManagementFactory.newPlatformMXBeanProxy(server, "com.sun.management:type=HotSpotDiagnostic", HotSpotDiagnosticMXBean.class); 

// loop code
// add some code to figure if we have passed some threshold, then

File heapFile = new File(outputDir, "heap-" + curThreshold + ".hprof");
log.info("Dumping heap file " + heapFile.getAbsolutePath());
diagBean.dumpHeap(heapFile.getAbsolutePath(), true); 
```

[稍后您可以使用 eclipse内存分析器](http://www.eclipse.org/mat/)或类似工具查看这些堆转储文件，以检查内存泄漏等。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-09T20:25:22.713

除了其他答案之外，我想指出这样做不一定是一个好主意，因为您的应用程序中可能有一个使用[SoftReferences](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/SoftReference.html)的缓存。

一旦 JVM 达到其内存限制，这样的缓存就会释放内存。分配内存，即使没有足够的空闲内存，也会首先导致内存被软引用释放，并使其可用于分配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-09T20:21:27.760

你可以随时打电话`Runtime.getRuntime().freeMemory()`。

问题的另一半，获取对象的成本，对我来说似乎更成问题。

我认为更好的解决方案是弄清楚如何集群和扩展您的 Web 服务，以便它们可以优雅地接受 150% 的额定负载，而不会拒绝新的连接。听起来，规模练习会给你带来比代码破解更好的解决方案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-01T10:41:17.423

要获取物理机**总**内存、已**用**内存和**可用内存**信息，我们也可以通过 java`Runtime.exec()`使用命令参数获取它`free -m`，然后将其解释如下：

```
Runtime runtime = Runtime.getRuntime();

BufferedReader br = new BufferedReader(
    new InputStreamReader(runtime.exec("free -m").getInputStream()));

String line;
String memLine = "";
int index = 0;
while ((line = br.readLine()) != null) {
  if (index == 1) {
    memLine = line;
  }
  index++;
}
//                  total        used        free      shared  buff/cache   available
//    Mem:          15933        3153        9683         310        3097       12148
//    Swap:          3814           0        3814

List<String> memInfoList = Arrays.asList(memLine.split("\\s+"));
int totalSystemMemory = Integer.parseInt(memInfoList.get(1));
int totalSystemUsedMemory = Integer.parseInt(memInfoList.get(2));
int totalSystemFreeMemory = Integer.parseInt(memInfoList.get(3));

System.out.println("Total system memory in mb: " + totalSystemMemory);
System.out.println("Total system used memory in mb: " + totalSystemUsedMemory);
System.out.println("Total system free memory in mb: "   + totalSystemFreeMemory); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-09T20:21:47.047

`Runtime.getRuntime().freeMemory()`是一种在运行时[为 JVM 获取空闲内存的方法。](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html)这是好方法（或）不是完全取决于您的应用程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-09T20:22:38.163

```
long freeMemory = Runtime.getRuntime().freeMemory(); 
```*

# php - PHP GD2 如何在不修改标题的情况下显示动态生成的图像？

> ID：12807800
> 
> 赞同：1
> 
> 时间：2012-10-09T20:19:22.570
> 
> 标签：php, wordpress, header, png, gd2

我正在使用自己的签名生成器。如何在不修改标题的情况下显示即时生成的图像？我需要知道它，因为我的网站（基于 WordPress）已经发送了标题，我无法修改它。当然我可以修改主题，但我只是从 PHP 开始。如果我修改标题一切正常[（几乎工作脚本）](http://wot-mods.eu/snippets/signature.snippet.php)，但是当我想在[WordPress](http://wot-mods.eu/generator-en/)中打开它时，不会生成图像。我还有第二个问题：如何添加到我生成的任何扩展中以在任何论坛上显示它（这是示例） - 在这种情况下：png？我不想保存生成的图像，但如果我必须在保存图像后删除。

```
<?php
if( ! empty($_GET['nick']) ){
    //default
    $nick = $_GET['nick'];
    if(empty($_GET['server']))
        $server = 'eu';
        else $server = $_GET['server'];
    if(empty($_GET['font']))
        $font = 'calibri';
        else $font = $_GET['font'];
    //generacja
    $szerokosc = 350;
    $wysokosc = 19;
    $rozmiar = 13;
    $ob = imagecreatetruecolor($szerokosc, $wysokosc);
    $czarny = imagecolorallocate($ob, 0, 0, 0);
    $bialy = imagecolorallocate($ob, 255, 255, 255);
    putenv('GDFONTPATH=/home/p221366/public_html/snippets/fonts');
    imagettftext($ob, $rozmiar, 0, ($szerokosc/2), (($wysokosc-$rozmiar)/2)+$rozmiar, $bialy, $font, $nick.' '.$server);
    Header('Content-type: image/png'); 
    imagepng($ob/*, $local*/);
    imagedestroy($ob);
} else {//bez arg
    if ( isset($_GET['nick']) )
        echo '<p color=#ff0000>Invalid nickname!</p>';
    echo '<form method=get>
        <table align="center" border=0>
            <tr>
                <td bgcolor=#aaaaaa align="right">Nick</td>
                <td bgcolor=#cccccc align="center"><input type="text" name="nick" size="15" /></td>
            </tr>
            <tr>
                <td bgcolor=#aaaaaa align="right">Server</td>
                <td bgcolor=#cccccc align="center">
                    <select name="server">
                        <option value="eu">European</option>
                        <option value="ru">Russian</option>
                        <option value="com">American</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td bgcolor=#aaaaaa align="right">Font</td>
                <td bgcolor=#cccccc align="center">
                    <select name="font">
                        <option value="arial">Arial</option>
                        <option value="calibri">Calibri</option>
                        <option value="consola">Consolas</option>
                        <option value="courier">Courier New</option>
                        <option value="segoe">Segoe Script</option>
                        <option value="verdana">Verdana</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center"><input type="submit" value="Submit" /></td>
            </tr>
        </table>
    </form>';
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:27:45.417

图像是在来自 HTML 页面的单独请求中请求的。如果您想即时创建图像，则不能在发送 HTML 页面本身的同一请求中将它们发送到浏览器。您必须生成适当的标签，其中包含将生成图像的脚本的 URL。

请注意，您的图像脚本会产生某种负载，因此除非图像必须是超级动态的，否则请考虑将图像存储在永久位置，并在以后的任何请求时简单地读取此文件。

这个规则只有一个例外：如果你使用“data:”伪协议，那么你可以直接将图像数据包含在这个伪协议中，只有这样你才能将图像数据包含在HTML。考虑到由于图像数据必须与通常的 URL 约定兼容，因此必须进行 base64 编码，这显着增加了传输的数据量。此外，此类 URL 不能在浏览器中缓存，因为它们必须完全存在于每个图像标签中，以防浏览器还没有缓存条目。

所以基本上，除了需要浏览器的支持之外，数据 url 应该只用于非常小的图像，比如著名的“透明 gif 像素”，因为为导致 43 字节图像数据的单独图像请求添加 HTTP 开销是巨大的这种情况（每个请求大约 1 kb）。

# makefile - 使用 CMake 生成的 makefile 并行作业（没有速度提升）

> ID：12807806
> 
> 赞同：5
> 
> 时间：2012-10-09T20:19:40.573
> 
> 标签：makefile, cmake, fortran

我一直在对最近开始使用 CMake 构建的项目进行一些测试。在转向 CMake 之前，我注意到在使用我的手写 Makefile的`-j`选项时，构建时间有了显着改善。`make`

现在使用 CMake 我做同样的事情并且速度没有任何明显的提高。无论我是否运行`-j`，我都会得到四个进程`make.exe`，尽管其中只有一个正在计时 CPU 时间，并且从不使用超过 25% 的 CPU。

一般来说，CMake 生成的 Makefile 比我手写的 Makefile 慢得多。`-j`快速测试显示了带有和不带有标志的 CMake 和手写 makefile 的构建时间：

```
CMake: "make -j all" = 7min
CMake: "make all" = 7min
Handwritten: "make -j all" = 2min
Handwritten: "make all" = 4min 
```

一般来说，CMake 要慢得多，而且似乎没有利用并行作业。

谁能解释为什么我没有看到任何改进？

（使用 gfortran 构建 Fortran 程序并使用 CMake 的自动检测依赖项功能......虽然我不知道这是否与我所看到的有关）。

这是我的 CMakeLists.txt 文件：

```
## CMake Version
cmake_minimum_required(VERSION 2.8)

## Project Name
project(PROJECT)

## Use FORTRAN
enable_language(Fortran)

## Release compiler options
set (CMAKE_Fortran_FLAGS_RELEASE "-O3 -cpp -ffree-line-length-none -fimplicit-none")

## Debug compiler options
set (CMAKE_Fortran_FLAGS_DEBUG "-g -cpp -ffree-line-length-none -fimplicit-none")

## Set directory for FORTRAN modules
set (CMAKE_Fortran_MODULE_DIRECTORY "${PROJECT_BINARY_DIR}/modules")

## Build Executable
add_executable(EXE 
           Source1.f90 
           Source2.f90         
           .
           .
           . 
           Source219.f90
           Source220.f90) 
```

这是我原来的 Makefile：

```
PROG = PROGRAM.exe

SRCS = Source1.f90 Source2.f90 ... Source219.o Source220.o

OBJS = Source1.o Source2.o ... Source219.o Source220.o

LIBS =  

VPATH = src
BUILDDIR = debug
F90 = gfortran
F90FLAGS = -g -cpp -ffree-line-length-none -fimplicit-none

all: $(PROG)

$(PROG): $(OBJS)
    $(F90) -o $@ $(OBJS) $(LIBS)

clean:
    erase -f $(BUILDDIR)$(PROG) $(BUILDDIR)\$(OBJS) $(BUILDDIR)\*.mod

.SUFFIXES: $(SUFFIXES) .f90

.f90.o:
     $(F90) $(F90FLAGS) -c $<

Source1.o: Dependency1.o Dependency2.o ... DependencyN.o

Source2.o: Dependency1.o Dependency2.o ... DependencyN.o

.
.
.

Source219.o: Dependency1.o Dependency2.o ... DependencyN.o

Source220.o: Dependency1.o Dependency2.o ... DependencyN.o 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T00:37:18.567

这是在窗户上吗？如果是这样，那是因为 gmake 的 windows 版本没有作业服务器，并且递归 makefile 不是并行的。我假设当您编写 make.exe 时，这意味着 Windows。我认为 CVS gmake 现在有一个工作服务器。cygwin gmake 也支持作业服务器。

此链接可能会帮助您：

[http://lists.gnu.org/archive/html/make-w32/2011-07/msg00002.html](http://lists.gnu.org/archive/html/make-w32/2011-07/msg00002.html)

# java - Socket同时读写

> ID：12807808
> 
> 赞同：9
> 
> 时间：2012-10-09T20:19:41.707
> 
> 标签：java, multithreading, sockets

我正在尝试编写一个非常简单的套接字程序，我基本上想要的是客户端在 while(true) 循环中不断侦听来自服务器的通信。现在我还希望客户端能够在监听的过程中将一些数据发送回服务器。

我能想到的唯一解决方案是为读取和写入创建一个线程，并在每次我必须进行写入时中断读取线程。

有更好的解决方案还是这是我能做到的唯一方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T20:22:04.693

您可以使用两个线程。一个用来读，一个用来写。这样写线程可以随时写（不需要停止读取）。

另一种方法是`setSoTimeout(timeoutMs)`在调用 read 之前在套接字上使用。如果读取时间超过 timeoutMs 毫秒，这将导致它抛出一个`SocketTimeoutException`错误，从而允许您随心所欲地编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:30:52.000

查看 FTP 协议规范。它使用两个套接字/通道来完成您打算做的事情，一个用于命令，一个用于数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T20:30:00.207

您可以使用两个不同的端口，一个用于侦听，一个用于写入。并使用不同的线程来执行操作，那么您的 while(true) 循环不会产生问题。

# sql - 无需重新编码即可将数据库从 DBF 转换为 SQL

> ID：12807811
> 
> 赞同：2
> 
> 时间：2012-10-09T20:20:02.257
> 
> 标签：sql, dbf, data-conversion

我已经看到了许多关于如何将 DBF 文件转换为 SQL 数据库的解决方案，但是无论如何都可以在不重新编码引用 DBF 文件的程序的情况下转换表？

例如，将 DBF 文件转换为 SQL 表，然后只保留指向 SQL 数据库的指针的 dbf 文件？

目标是允许现有应用程序运行（直到我们迁移代码）但将数据保留在 SQL 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:31:54.170

我不认为您会找到一个工具，该工具将在 DBF 上下文中链接到 SQL，并允许您的代码无缝地通过 DBF 流向您的 SQL Server，同时保持两者都是最新的。

根据您日常事务的复杂程度或范围，我建议您设置一些定期运行的 SSIS 包，以保持 DBF 文件中的数据流向您的 SQL 表，直到您准备好全职提交 SQL。

另一种选择可能是朝着另一个方向接近它。设置[链接服务器](http://msdn.microsoft.com/en-us/library/aa337084%28v=sql.105%29.aspx)或从 SQL 中[打开行集到 DBF 文件，然后在 SQL 端构建一些存储过程，使用](https://stackoverflow.com/questions/52822/how-to-import-a-dbf-file-in-sql-server)[tsql 合并](http://msdn.microsoft.com/en-us/library/bb510625%28v=sql.105%29.aspx)语句或您必须构建的其他查询定期合并数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:45:17.613

应用程序使用驱动程序与数据库交互。两个数据库（DBF 和任何其他数据库，例如 MySQL）如果没有它们之间的应用程序将无法相互交互，该应用程序会告诉驱动程序该做什么。因此，您现有的应用程序可以与 DBF 以及 SQLDatabase 交互，但不能使 DBF 文件与 SQL 数据库交互。
正如其他人建议的那样，您可以为此目的使用 SSIS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:14:54.437

我认为您会找到最接近的方法是使用 SyBase 的 iSQLAnywhere。他们专门挑选并集成了他们的 SQL 数据库以直接识别 .DBF 文件。但是，正如其他人所提到的，您仍然需要创建与数据库的连接才能获取数据。您可以在 iSQLAnywhere 中创建一个指向空闲表的“数据库”，而不是嵌入到单个“数据库”中，例如其他数据库...

我已经完成了一些 DBF 到 sql 的转换，并且我为保持前端一致而采取的一种方法是创建一组基于 .PRG 的过程。如果您的应用程序是 VFP 并且您始终拥有私有与默认数据会话，那么任何类都尊重表单的“数据会话”，因此如果您在“默认”数据会话下创建一个类，然后运行一个私有的表单，然后调用您的通用类来查询和打开一个表，打开的表将在“默认”会话中被识别，而不是您的表单之一。

现在，也就是说，我做的另一件事是有一个函数来打开连接并分别返回 true/false 并允许中心位置进行调试。如果连接有效，则运行给定的 sql 命令。现在，如果您希望打开给定的“别名”名称，例如“person”表，请使用 sqlexec( lcSomeCommand, "AliasYouWant" )，其余大部分将用于显示和编辑。您仍然必须使用 SQL 插入/更新来推回更改，但是使用参数化 SQL 传递非常简单。

# php - 当源是数据库时，如何格式化自定义数据并在自动完成中显示

> ID：12807822
> 
> 赞同：0
> 
> 时间：2012-10-09T20:21:05.450
> 
> 标签：php, jquery, sql

所以我试图在自动完成小部件中获取一些信息，就像它在 JQuery UI 演示[Demo](http://jqueryui.com/autocomplete/#custom-data)中显示的那样，唯一的问题是他们使用一个变量来填充他们想要显示的数据，我反而想访问数据以及在 MySQL 中使用数据库的不同描述和内容，为此我已更改源以使用另一个查找信息的 php 页面。这是自动完成的代码，我真的不明白这些方法，所以我没有从基本搜索中更改它。

这是JS：

```
$(document).ready((function(){
            $( "#completa" ).autocomplete({
        source: "buscar.php",
        minLength: 1,
                    focus: function (event, ui){
                        $("#completa").val(ui.item.val);
                        return false;
                    };
        })); 
```

这就是我在 buscar.php 中的内容：

```
<?php

    $conec = mysql_connect(localhost, root, admin);
    if(!$conec)
    {
        die(mysql_error());
    }
    else
    {
        $bd = mysql_select_db("ve_test",$conec );
        if(!$bd)
        {
            die(mysql_error());
        }
    }

$termino = trim(strip_tags($_GET['term']));//Obtener el termino que envia el autocompletar

$qstring = "SELECT name, descripcion FROM VE_table WHERE name LIKE '%".$termino."%'";
$result = mysql_query($qstring);//Solicitud a la Base de Datos

while ($row = mysql_fetch_array($result,MYSQL_ASSOC))//Realizar un LOOP sobre los valores obtenidos
{
                $row['value']=htmlentities(stripslashes($row['name']));
                $row_set[] = $row;//build an array
}
echo json_encode($row_set);//Enviar los datos al autocompletar en codificacion JSON, Altamente Necesario. 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:33:22.173

jQuery UI 自动完成选项“源”是一个字符串或字符串数​​组。它无法从 PHP 页面获取此信息。您必须使用 AJAX 调用来读取 PHP 页面的输出。如果您之前没有使用过 AJAX，那么您应该使用 Google 获取教程。我要做的是让 PHP 脚本输出由分隔符分隔的所有数据（---，例如..任何不在您的数据列表中的东西）。然后通过使用 AJAX 调用检索数据，并使用 split() 将输出按分隔符 (---) 拆分为字符串数组。然后这个数组应该作为你的自动完成源。为确保您的 Javascript 没有问题，请使用以下命令：

```
$(document).ready(function(){
    $( "#completa" ).autocomplete({
        source: ["string","sample","test","preset values","thisiswhereyourarraywillgo"],
        minLength: 1,
        focus: function (event, ui){
            $("#completa").val(ui.item.val);
            return false;
        }
    });
}); 
```

如果这可以预测 Array 中这 5 个单词中的任何一个，那么 AJAX 调用就有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T21:35:49.503

好的，所以我找到了问题的答案，这里是：

在 buscar.php 中，我只需要添加一个我希望在 JQ 中接收的名称的变量：

```
<?php

    $conec = mysql_connect(localhost, root, admin);
    if(!$conec)
    {
        die(mysql_error());
    }
    else
    {
        $bd = mysql_select_db("ve_test",$conec );
        if(!$bd)
        {
            die(mysql_error());
        }
    }

$termino = trim(strip_tags($_GET['term']));//Obtener el termino que envia el autocompletar

$qstring = "SELECT name, descripcion FROM VE_table WHERE name LIKE '%".$termino."%'";
$result = mysql_query($qstring);//Solicitud a la Base de Datos

while ($row = mysql_fetch_array($result,MYSQL_ASSOC))//Realizar un LOOP sobre los valores obtenidos
{
                $row['value']=htmlentities(stripslashes($row['name']));
                $row['desc']=  htmlentities(stripcslashes($row['descripcion'])); //This is the line I Changed
                $row_set[] = $row;//build an array
}
echo json_encode($row_set);//Enviar los datos al autocompletar en codificacion JSON, Altamente Necesario.?> 
```

这是我使用的 JQ：

```
 $(document).ready((function(){
            $( "#completa" ).autocomplete({
        source: "buscar.php",
        minLength: 1,
                    focus: function( event, ui ) {
                    $( "#completa" ).val( ui.item.label );
                    return false;
                    },
                    select: function( event, ui ) {
                    $( "#completa" ).val( ui.item.value );
                    $( "#completa-description" ).html( ui.item.desc );
                    return false;
                }
            })
            .data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.value + "<br>" + item.desc + "</a>" )
                .appendTo( ul );
            };
        })); 
```

我希望这对其他人也有帮助。

# jquery - 无法删除列表元素

> ID：12807824
> 
> 赞同：1
> 
> 时间：2012-10-09T20:21:19.933
> 
> 标签：jquery, html

我有这个由 JavaScript 函数生成的 html 代码，在这个简单的例子中，我只有一个级别的 ul 和 2 个 li 元素

```
<ul id="criteria">
    <li>Goal
    <img id="add_criterion" class="add_criterion" src="../images/icons/add-icon.png">
        <ul id="1" class="criteria">
            <li id="1">criteria 1</li>
            <li id="2">criteria 2</li>
        </ul>
    </li>
 </ul> 
```

和我的 JavaScript 函数来删除对应于 id 和 level(id of ul) 的 li

```
if($("ul[id="+level+"][class=criteria] li").length ==1){
    $("ul[id="+level+"][class=criteria]").remove();
}else{
    $("ul[id="+level+"][class=criteria] li#"+i).remove();
} 
```

我的问题是当我从第一个 li 开始时我无法删除它，但是当我从第二个开始时我删除它并删除第一个没有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:23:56.200

作为不修复唯一 id 问题的快速修复，您应该能够简单地将 else remove 替换为`$("ul[id="+level+"][class=criteria] li[id="+i+"]").remove();`

显然，从长远来看，更好的解决方案是不使用重复的 id。

# jsf - 如何将 ajax 验证添加到以编程方式生成的 primefaces 组件

> ID：12807840
> 
> 赞同：0
> 
> 时间：2012-10-09T20:22:09.717
> 
> 标签：jsf, jsf-2, primefaces

我正在尝试将正常的 bean 验证附加到以编程方式生成的 Primefaces UIComponent 上的模糊事件。

如果我使用 xhtml 手动创建组件，效果很好，它看起来像这样：

```
<p:inputText id="customerName" value="#{editCustomerBean.name}" label="Name">
    <p:ajax async="true" event="blur" update="customerName, customerNameMsg" />
</p:inputText> 
```

不幸的是，我需要动态生成这个组件，因为一些动态属性将根据运行时数据填充。我编写的代码试图准确地复制这个组件：

```
UIInput input = new InputText();

AjaxBehavior ajax = new AjaxBehavior();
ajax.setAsync(true);
ajax.setUpdate("customerName, customerNameMsg");
input.addClientBehavior("blur", ajax);
input.setId("customerName");
input.setValueExpression("value", expressionFactory.createValueExpression(elContext, "#{editCustomerBean.name}", String.class)); 
```

当我以这种方式生成此组件时，我看到在 blur 事件中向服务器发送了一个请求，但没有进行验证。发布的请求看起来与我在 xhtml 中指定组件时发送的请求相同：

```
javax.faces.partial.ajax=true&javax.faces.source=mainForm%3AcustomerName&javax.faces.partial.execute=mainForm%3AcustomerName&javax.faces.partial.render=mainForm%3AcustomerName+mainForm%3AcustomerNameMsg&javax.faces.behavior.event=blur&javax.faces.partial.event=blur&mainForm%3AcustomerName=&javax.faces.ViewState=8176624577669857830%3A-4154840965136338204 
```

我在这个网站和 Primefaces 论坛上看到过类似的问题，但它通常涉及将侦听器方法附加到 AjaxBehavior，这不是我在这里想要做的。我希望行为与未指定侦听器时的标记相同，即验证字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:58:34.917

动态添加 onBlur 事件示例

```
 Message message=new Message();
    message.setId("msg");
    InputText it = new InputText();
    it.setId("input1");
    it.setRequired(true);
    message.setFor(it.getId());

    //******Setting validation render at onBlur event
    AjaxBehavior ajaxBehavior=new AjaxBehavior();
    ajaxBehavior.setAsync(true);
    ajaxBehavior.setUpdate(message.getId());
    it.addClientBehavior("blur", ajaxBehavior);
    //************************************************ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:37:24.703

原来我在看 ajax 组件时叫错了树。我今天意识到我的组件在提交时也没有得到验证。事实证明，当您动态创建 JSF 组件时，您需要手动向组件注册 BeanValidator。感谢 victor herrera 对这个问题的回答：[https ://stackoverflow.com/a/7055586/1535568](https://stackoverflow.com/a/7055586/1535568)

# javascript - 使用 CSS 和 Javascript 组织代码

> ID：12807849
> 
> 赞同：0
> 
> 时间：2012-10-09T20:22:47.290
> 
> 标签：javascript, css, code-organization, enyo

我正在使用 Enyo 构建一个 Web 应用程序；组织文件的“正常”方式可能如下所示：

CSS：`webapp/css`
JS： `webapp/js`
其他东西：`webapp/assets`

我的一位同事有一个看似不错的想法，将 Javascript 和 CSS 放在一起，以便 Javascript 文件（例如`webapp/js/MyView.js`）将其 CSS 模拟与其位于同一文件夹中（`webapp/js/MyView.css`）。这似乎是一个好主意，但因为在我想从互联网上获得第二意见之前我从未见过这样做。

那么，互联网，这是组织 Javascript 和 CSS 代码的好方法吗？为什么/为什么不？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:24:10.073

你可以随意组织你的东西。我只是认为在标有 js 的文件夹中包含 css 非常具有误导性。如果您想将它们放在同一个文件夹中，请将其称为媒体或其他名称，而不是每个人与 javascript 文件相关联的名称。

就个人而言，我将图像、js、css 分成这些名称的文件夹，它对我来说很好，我认为它是相当标准的。如果您愿意，另一种方法是 media/js、media/css、media/images。正如我所说的个人偏好，但一些可以理解和一致的东西。

# javascript - 算法：基于属性总和提取子集

> ID：12807855
> 
> 赞同：14
> 
> 时间：2012-10-09T20:23:20.830
> 
> 标签：javascript, algorithm

我想要一种算法（没有特定语言）从一组整数中找到一个子集，使它们的总和在一定范围内。

例如，如果我有一群人，他们的权重如下。

```
var people:{
   jane:126,
   julia:112,
   charles:98,
   john:182,
   bob:213,
   edgar: 237,
   jay: 223,
   dan: 191,
   alex: 210,
   david: 196
} 
```

现在，从这些人中，我想找到一个总重量在 818-822 磅之间的子集（如果你想算一下……别打扰，这些数字超出了我的想象，并且我什至不知道这个数据集是否有解决方案）。组中的人数无关紧要，只是较大集合中的一组。真的，任何组都可以（尽管在我的情况下随机更好）。

请注意，这只是一个简单的示例……实际上会有数百人，并且可能没有适合此标准的组合。因为实际数字会比这大得多，所以我担心一个^n 问题并运行数千次迭代，即使我需要它运行得非常快。

也许那天我在计算机科学课上睡着了，但是除了蛮力方法之外，我什么都想不出来。

我将其标记为 javascript，仅仅是因为它最接近我的实际实现（而且它更容易阅读）。对其他解决方案持开放态度，只要它们不以某处的某些 Cthulhu 功能为基础。

我知道这是一个奇怪的问题，但这里的任何帮助都将不胜感激。

* * *

好吧，我难住了。23 小时内发布赏金，我可以在代码方面理解 - 我的背景肯定不在这个领域，我什至很难辨别用于描述问题的符号，更不用说解决方案了。

有人想帮助我，给我一些可以修改到最终项目的示例 javascript 代码吗？我会尽可能增加 250pt 的赏金......但如果有一个体面的解决方案，我会在时机成熟时分发它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T20:32:23.020

这类似于[0-1 背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)或[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)。

如果权重不是非常大的整数，则动态规划解决方案应该是有效的。

* * *

这是动态编程算法的javascript实现。如果您想要随机组，只需在应用此算法之前随机打乱人员列表。

```
var p = {
   jane:126,
   julia:112,
...
};

function subset(people, min, max)
{
  var subsets = [];
  subsets[0] = '';

  for (var person in people)
  {
    for (var s = min-1; s >= 0; --s)
    {
      if (s in subsets)
      {
        var sum = s + people[person];

        if (!(sum in subsets))
        {
          subsets[sum] = subsets[s] + ' ' + person;

          if (sum >= min && sum <= max)
          {
            return subsets[sum];
          }
        }
      }
    }
  }

  return 'Not found';
}

print(subset(p, 818, 822)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T20:32:57.553

它看起来像是“二元背包问题”的一种变体，增加了一个界限，即如果最佳拟合仍在可接受的范围之外，则答案将被拒绝。

您可能想研究“多项式时间近似”。

一种方法是按重量对集合进行排序。然后你开始从中间向下和向上看：你得到 dan、john、david、alex，你在 779。你加上 jane，发现自己在 905，到 87 太多了；所以你检查下面的名字，朱莉娅，那是 112，看看差异之间最接近的匹配。与 Julia (210-112) 交换 Alex 将失去 98，与 Julia 交换 David 将失去 84。泡沫，冲洗，重复。

该算法是 O(n log n) 进行排序，然后取决于集合大小。它有几个缺点（不能保证会聚，群体往往是连续的，会在起点附近聚集人等），但如果你只想要“一个群体”，那可能就足够了。

您还可以递归地实现该算法。最坏的情况是 O(n^3 log n)，但如果你真的在与人类一起工作（权重聚集在相当小的范围内，曲线平滑），收敛可能会很快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T21:11:05.180

这就是我所说的“排序和括号”问题。解决方法是对数据进行排序，然后将目标值或目标范围括起来。

例如，在这种情况下，排序顺序为：

98
112
126
182
191
196
210
213
223
237

现在你对列表进行平均：178.8。因此起始括号是 (126,182)。从这个平均值开始移动：sum(126,182,112,191,98) = 709，太小了。把98删掉，换成另一边的值：196，即sum(126,182,112,191,196) = 807，还是太小了。转到高端的下一个值，sum(126,182,112,191,210)=821。好的，找到一个匹配项。通过继续此过程，您可以找到每个匹配项。基本上，括号的作用是帮助您仅搜索所有可能组合的子集，因此您不必检查每个组合。您是从平均值向外生成组合，而不是从一端或另一端生成组合。

每当您的总和超过/低于该范围时，您就会终止高/低端的组合生成并切换到另一个。这是问题的最佳解决方案。

实现方法：要实现这个算法，你需要一个按“字典”顺序工作的组合生成器。然后，您从 n（例如 5 个）项目开始，并确定中值组合，如上所示。然后你得到下一个较低的组合，如果你是低的，你切换到下一个更高的组合，依此类推。

-------------- 附录 -------

在考虑了这一点之后，最好为此使用普通的更改类型算法，而不是字典组合器。这种类型的算法将生成所有组合，但仅在给定时间切换任意 2 个元素。基本上，您修改此算法以在超出范围（超出范围或低于范围）时切换方向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-15T14:33:51.610

这是对类似问题的回答[Find combination(s) sum of element(s) in array which sum equal to a given number](https://stackoverflow.com/questions/12837431/find-combinations-sum-of-elements-in-array-whose-sum-equal-to-a-given-number?rq=1)

```
<?php

$limit = 12;
$array = array(6,1,10,4,1,3,11,2,15,5,12,10,17);

echo implode(', ',$array).'<br>';

// remove items 15 and 17 because they are great then $limit = 12
$array = array_filter($array, function($var) use ($limit) {
  return ($var <= $limit);
});

rsort($array);
echo implode(', ',$array);

// the algorithm is usable if the number of elements is less than 20 (because set_time_limit)
$num = count($array); 

//The total number of possible combinations 
$total = pow(2, $num);

$out = array();

// algorithm from http://r.je/php-find-every-combination.html
// loop through each possible combination  
for ($i = 0; $i < $total; $i++) {  

    $comb = array();

    // for each combination check if each bit is set 
    for ($j = 0; $j < $num; $j++) { 
       // is bit $j set in $i? 
        if (pow(2, $j) & $i){
          $comb[] = $array[$j];
        }      
    } 

    if (array_sum($comb) == $limit)
    {
      $out[] = $comb;
    }
}

array_multisort(array_map('count', $out), SORT_ASC, $out);

$out = array_unique($out, SORT_REGULAR);

foreach($out as $result) echo implode(', ', $result).'<br>'; 
```

此代码的输出是总和仅为 $limit(12) 的组合列表...

```
12
10, 2
11, 1
5, 4, 3
6, 4, 2
6, 5, 1
10, 1, 1
5, 4, 2, 1
6, 3, 2, 1
6, 4, 1, 1
5, 3, 2, 1, 1 
```

# jquery - Jquery scrolltop 在两点之间触发一个函数？

> ID：12807856
> 
> 赞同：2
> 
> 时间：2012-10-09T20:23:23.430
> 
> 标签：jquery, class, scroll, height, pixels

我只在窗口顶部在 500 到 900 像素之间而不是之前或之后才尝试将类应用于 div。这可能吗？

我当前的代码仅适用于过去 500 像素：

```
if($(this).scrollTop() >= 500) {
  $('#01').addClass('selected');    
} else {
  $('#01').removeClass('selected');
} 
```

有没有可能有这样的东西？：

```
if($(this).scrollTop() >= 500 <= 900) {
  $('#01').addClass('selected');    
} else {
  $('#01').removeClass('selected');
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:26:53.787

```
var windowPosY = $(this).scrollTop();

if(windowPosY >= 500 && windowPosY <= 900)
{
   //do things
} 
```

我必须承认我很好奇你如何检查所说的位置。您将此逻辑绑定到什么事件？

# ruby-on-rails-3 - 保存模型时自动从 id + 模型名称创建哈希

> ID：12807857
> 
> 赞同：0
> 
> 时间：2012-10-09T20:23:26.150
> 
> 标签：ruby-on-rails-3, hash, generator

我这里有一个“鸡还是蛋”的问题......

我有一个具有唯一字段的模型，该字段是使用记录 ID（模型的 ID）和一个字符串创建的，我在迁移该字段（哈希）时有一个 :null=>false 所以...这个哈希应该在使用例如 before_validation 保存对象时自动生成，但问题是我需要数据库中的 id 来创建哈希，但是在保存对象之前我没有这个 id ......所以我该怎么做解决这个？这不是更改数据库限制的选项，因为这已经在生产中，也不是更改哈希种子的选项，我必须使用 ID ...

我现在正在做的（我知道这不是一个好的解决方案）是在哈希字段中保存一个虚拟对象并保存记录，之后我创建哈希并再次保存对象......但这是在控制器，我想拥有模型中的所有业务逻辑......

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:44:03.530

在模型中使用 an `after_create`：

```
after_create :generate_hash

... your model's code ...

private

def generate_hash
  # hash generation code goes here
  self.save
end 
```

这将保存记录两次，就像您在控制器中所做的一样，只是它将在模型中进行。

# lua - Redis 链接命令

> ID：12807860
> 
> 赞同：2
> 
> 时间：2012-10-09T20:23:53.327
> 
> 标签：lua, redis

所以我已经阅读了有关流水线和多/执行命令的信息。但一直无法回答这个问题。我可以在redis内部的操作B中使用操作A的结果，以免将它们从redis中取出。这可以用 Lua 脚本完成吗？这是在redis中自然完成的吗？我可以以特定方式映射结果吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T08:58:00.293

是的，你可以使用 Scripting，但它不能很好地与 Redis Cluster 配合使用（反正它还没有发布）。

这是 Ruby 中的一个示例，但如果您的 Redis 客户端支持 EVAL，您可以使用任何语言执行此操作：

```
require "redis"
redis = Redis.new

redis.hset("foo","bar","baz")
redis.set("baz",42)

script = <<EOS
local k = redis.call("hget","foo",ARGV[1])
return redis.call("get",k)
EOS

puts redis.eval(script,keys:[],argv:["bar"]) 
```

此代码段打印`42`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:33:43.700

这不是基于 lua 的答案，但您可能想查看一些在 redis 上存储操作结果的标准命令：

*   [SDIFFSTORE](http://redis.io/commands/sdiffstore)
*   [烧结店](http://redis.io/commands/sinterstore)
*   [联合商店](http://redis.io/commands/sunionstore)
*   [ZINTERSTORE](http://redis.io/commands/zinterstore)
*   [ZUNION 商店](http://redis.io/commands/zunionstore)

# sql - 如何构造这个 Oracle SQL 查询？

> ID：12807862
> 
> 赞同：4
> 
> 时间：2012-10-09T20:24:01.173
> 
> 标签：sql, oracle

我正在 Oracle 中编写一个类似这样的 sql 查询：

```
 SELECT *
   FROM ( SELECT testid,
                 max(decode(name, 'longitude', stringvalue, NULL)) as longitude,  
                 max(decode(name, 'latitude', stringvalue, NULL)) as latitude
            FROM test_av 
           GROUP  BY testid
        ) av
  INNER JOIN ( 
                  SELECT id,
                          ((ACOS(
                                 SIN(16.15074 * 3.141592653 / 180) 
                                 * SIN(latitude * 3.141592653 / 180) 
                                 + COS(16.15074 * 3.141592653 / 180) 
                                 * COS(latitude * 3.141592653 / 180)
                                 * COS((-22.74426 - longitude)*3.141592653 / 180)
                          )*6373)) as distance
                    FROM test 

        ) t ON t.id = av.testid
  WHERE t.distance <= 100 
```

当我执行这个查询时，Oracle 说`'longitude invalid identifier'`。我试图访问子查询别名，但查询失败。

如何将一个子查询的“别名”访问到另一个子查询中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:49:48.953

如果我正确理解您正在尝试做的事情，那么您实际上并不需要`INNER JOIN`，因为您没有从中获取任何真实`test`信息`test_av`。所以，你可以写：

```
SELECT *
  FROM ( SELECT id,
                longitude,
                latitude,
                ((ACOS( SIN(16.15074 * 3.141592653 / 180)
                        * SIN(latitude * 3.141592653 / 180)
                        + COS(16.15074 * 3.141592653 / 180)
                        * COS(latitude * 3.141592653 / 180)
                        * COS((-22.74426 - longitude) * 3.141592653 / 180)
                )*6373)) AS distance
           FROM ( SELECT testid AS id,
                         max(decode(name, 'longitude', stringvalue, NULL)) as longitude,
                         max(decode(name, 'latitude', stringvalue, NULL)) as latitude
                    FROM test_av
                   GROUP
                      BY testid
                )
       )
 WHERE distance <= 100
; 
```

如果你想明确地确保你只得到存在于的记录`test`——也就是说，如果你有记录在`test_av`其中没有父母`test`，并且你想过滤掉它们——那么你可以在最里面的子查询中处理它，之后你的`FROM test_av`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:55:03.270

好吧，我是 SQL Server 专家，而不是 Oracle 专家，但我认为你想要这样的东西：

```
SELECT *
   FROM ( SELECT testid,
                 max(decode(name, 'longitude', stringvalue, NULL)) as longitude,  
                 max(decode(name, 'latitude', stringvalue, NULL)) as latitude
            FROM test_av av
           GROUP  BY testid
        ) av,
  TABLE ( CAST (MULTISET( 
                  SELECT id,
                          ((ACOS(
                                 SIN(16.15074 * 3.141592653 / 180) 
                                 * SIN(latitude * 3.141592653 / 180) 
                                 + COS(16.15074 * 3.141592653 / 180) 
                                 * COS(latitude * 3.141592653 / 180)
                                 * COS((-22.74426 - longitude)*3.141592653 / 180)
                          )*6373)) as distance
                    FROM test ti
                    WHERE ti.id = av.testid
                    )
        )) t  
  WHERE t.distance <= 100 
```

您将需要检查整个 CAST(MULTISET(..)) 事情，因为我对此一无所知，只是在过去的项目中给了我一些黑魔法，以使 SQL Server CROSS APPLY 查询在 Oracle 上工作.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:58:39.337

您询问了如何将一个子查询的别名访问到另一个子查询中……快速浏览一下，这是使用两个“模拟表”的一种方法。您可以像这样的表使用 select 语句。不确定这是否是您的最佳解决方案，但应该让您走上正轨。

```
SELECT testav.*, testt.*
FROM 
    ( SELECT av.testid as id,
         max(decode(av.name, 'longitude', stringvalue, NULL)) as longitude,  
         max(decode(av.name, 'latitude', stringvalue, NULL)) as latitude
      FROM test_av av
      GROUP BY av.testid
    ) testav,
    (SELECT  t.id as id,
             ((ACOS(
                 SIN(16.15074 * 3.141592653 / 180) 
               * SIN(t.latitude * 3.141592653 / 180) 
               + COS(16.15074 * 3.141592653 / 180) 
               * COS(t.latitude * 3.141592653 / 180)
               * COS((-22.74426 - t.longitude)*3.141592653 / 180)
                  )*6373)) as distance
     FROM test t
    ) testt
WHERE testav.id = testt.id
and testt.distance <= 100 
```

子查询的另一种方法只是为经纬度两列添加两个选择，并通过别名引用外部查询。这似乎性能很差，但 Oracle 在这种类型的查询方面做得很好。单列选择不需要组。除非您需要，否则我会考虑返回空字符串而不是 null。我不确定 Oracle 是否会因为“其他”情况而喜欢 null。我想它一定对你有用。

```
SELECT id,
          ACOS(..snipped details..)*6373) as distance,
          (SELECT max(decode(av.name, 'longitude', stringvalue, NULL)) 
           FROM test_av
           WHERE test_av.testid = av.id) as longitude,  
          (SELECT max(decode(av.name, 'latitude', stringvalue, NULL)) 
           FROM test_av
           WHERE test_av.testid = av.id) as latitude
      FROM test_av av
      WHERE av.distance <= 100 
```

添加最终评论。第二个查询不会得到 OP 想要的，因为计算中使用了经度和纬度值。这是嵌套查询的一个示例，但不是 OP 问题的解决方案。对不起，如果它误导了任何人。

# ruby - 找不到包 ruby 1.9.3

> ID：12807864
> 
> 赞同：1
> 
> 时间：2012-10-09T20:24:08.263
> 
> 标签：ruby, ubuntu, installation, ubuntu-10.04

我正在使用 Ubuntu 10.04 LTS，并试图安装 Ruby 的最新版本 1.9.3。然而，命令

```
sudo apt-get install ruby1.9.3 
```

返回“找不到包 ruby​​1.9.3”。

我不确定为什么会这样，因为它适用于 ruby​​1.9.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:36:32.907

在 Ubuntu 中安装 Ruby 的最佳（至少更简单）方法是安装 RVM（Ruby 版本管理器）。

Ryann Bigg[在他的博客上](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)有一个非常好的和简单的指南。只需按照每一步，它应该工作！

# ios - CADisplayLink 没有足够频繁地触发

> ID：12807868
> 
> 赞同：0
> 
> 时间：2012-10-09T20:24:16.260
> 
> 标签：ios, ios5, core-animation, cadisplaylink

我`CADisplayLink`用来执行声音和动画之间的同步。同步需要非常精确，并且当前`CADisplayLink`以`frameInterval`1 运行并不能足够频繁地调用选择器。

有没有办法增加它的粒度？（`frameInterval`是一个整数属性，所以我显然不能低于 1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T12:23:37.547

老问题，但它提出了有趣的观点，所以我会给我 2 美分。

如[文档](https://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)所述，

```
A CADisplayLink object is a timer object that allows your application to synchronize its drawing to the refresh rate of the display. 
```

因此，您将无法获得超过每秒 60 次的更新频率，即 LCD 屏幕显示速率。动画本身没有刷新率，它们代表了一个连续的运动，每次屏幕更新时恰好可见。

我对声音播放没有太多经验，但我很惊讶`CADisplayLink`刷新率不够。1/60 秒对用户的耳朵真的有影响吗？也许您用于声音播放的方法会导致某种滞后？

无论如何，如果您想与动画更精细地同步声音，我建议您设置一个`NSTimer`适合您的重复间隔，而不是`CADisplayLink`.

你需要的其他东西是：

*   `CACurrentMediaTime()`函数，它返回 Core Animation 在它被调用时使用的时间
*   the`CAAnimation`的`beginTime`属性（它从`CAMediaTiming`协议中获得）

设置`beginTime`为偏移量`CACurrentMediaTime`将允许您创建以非常精确和受控的时间开始的动画。如果将动画添加到图层时将其保留为 0（默认值），它将`CACurrentMediaTime`在 runloop 结束时自动设置为 ，从而导致控制时间较少。

您还可以`beginTime`从运行中读取`CAAnimation`以了解它开始的确切时间，这可能不是您将其添加到图层的确切时间（见上文）。

# c++ - Arduino：命令 Serial.print("some string text") 占用 SRAM 吗？

> ID：12807871
> 
> 赞同：5
> 
> 时间：2012-10-09T20:24:35.033
> 
> 标签：c++, arduino, ram

我有一个相当大的 Arduino 项目（在 eclipse 中）使用 Serial.print("some string text") 命令进行大量调试消息，以便我可以一路调试。

我注意到的一件事是我在项目中可以拥有多少这样的限制。如果我放太多，程序会在非常奇怪的地方停止。即：通常在我最新添加的打印命令应该执行之前很久。

我的项目 .hex 文件目前大约 20k。Arduino Uno 限制在 30kb 左右，对吧？所以它不应该太大。

所以我觉得实际的问题可能是这些串行命令正在填满我的 sram。这只有 2kb。我正在使用很多库。

命令 Serial.print("some string text") 是否占用 SRAM？gcc 肯定会将这些字符串 cnstants 放在程序空间中吗？但也许他们不是？

或者是别的什么？我有另一种理论，即某处有一个 serial.print 缓冲区，我可能只是用太多消息填充它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T21:52:05.103

是的，字符串默认存储在 RAM 中。虽然它们也在闪存中，但是当 Arduino 启动时它们被加载到 RAM 中。

`F()`但是，如果您使用 Arduino IDE 1.0 或更高版本，您可以告诉编译器直接从 Flash 读取字符串，而不是使用宏将它们加载到 RAM 中：

```
Serial.Println(F("This string is read from Flash!")); 
```

这将节省 RAM，这是一件好事，因为 RAM 比 Flash 少得多。有关详细信息，请参见此处：* [http://www.arduino.cc/playground/Main/Printf](http://www.arduino.cc/playground/Main/Printf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T04:18:40.367

这不是我的代码，但我发现： [http](http://www.utopiamechanicus.com/article/low-memory-serial-print/) ://www.utopiamechanicus.com/article/low-memory-serial-print/ 的解决方案 非常适合调试。printf、闪存使用和宏的体面组合，因此转换通常像删除“。”一样简单。来自 Serial.print()。

不过，我对 C++ 和 arduino 完全是个菜鸟，希望有人觉得它有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:33:30.597

请尝试将字符串标记为 PROGMEM，这应该将它们放在闪存中。Arduino 似乎没有为 PROGMEM 实现 Serial.write，因此需要一个 mem-copy。有关详细信息，请参阅[http://arduino.cc/en/Reference/PROGMEM](http://arduino.cc/en/Reference/PROGMEM)（字符串数组）。

编辑：[http](http://deans-avr-tutorials.googlecode.com/svn/trunk/Progmem/Output/Progmem.pdf) : //deans-avr-tutorials.googlecode.com/svn/trunk/Progmem/Output/Progmem.pdf 很好地解释了 PROGMEM 参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T05:38:38.830

是的，它默认存储在 RAM 中。您可以使用@Marty 的解决方案。

或者，您也可以使用[MemoryFree](http://hardwarefun.com/projects/memoryfree)库来跟踪您的记忆。

# python - Qt4：为 QIcon 着色

> ID：12807875
> 
> 赞同：4
> 
> 时间：2012-10-09T20:25:02.390
> 
> 标签：python, qt4, pyqt4, tint, qicon

`QIcon`在 Qt4/PyQt4 中将颜色应用于 a 的最简单方法是什么？我有几个单色`QPixmaps`，我想根据它们相关对象的属性重新着色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T04:22:34.330

您可以在像素图上绘画。只需选择适合您目标的[构图模式即可。](http://qt-project.org/doc/qt-4.8/qpainter.html#CompositionMode-enum)

下面是一个简单的`Tinter`工具。`applyTint`方法是有趣的部分。这使用`Overlay`组合。

```
import sys
from PyQt4 import QtGui, QtCore

class Tinter(QtGui.QWidget):
    def __init__(self, image, parent=None):
        super(Tinter, self).__init__(parent)

        self.pixmap = QtGui.QPixmap(image)

        self.normal = QtGui.QLabel()
        self.normal.setPixmap(self.pixmap)
        self.tinted = QtGui.QLabel()

        self.red = QtGui.QSlider(QtCore.Qt.Horizontal)
        self.red.setRange(0, 255)
        self.red.sliderMoved.connect(self.applyTint)
        self.green = QtGui.QSlider(QtCore.Qt.Horizontal)
        self.green.setRange(0, 255)
        self.green.sliderMoved.connect(self.applyTint)
        self.blue = QtGui.QSlider(QtCore.Qt.Horizontal)
        self.blue.setRange(0, 255)
        self.blue.sliderMoved.connect(self.applyTint)
        self.alpha = QtGui.QSlider(QtCore.Qt.Horizontal)
        self.alpha.setRange(0, 255)
        self.alpha.setValue(128)
        self.alpha.sliderMoved.connect(self.applyTint)

        controlLayout = QtGui.QFormLayout()
        controlLayout.addRow('red', self.red)
        controlLayout.addRow('green', self.green)
        controlLayout.addRow('blue', self.blue)
        controlLayout.addRow('alpha', self.alpha)

        layout = QtGui.QHBoxLayout()
        layout.addWidget(self.normal)
        layout.addWidget(self.tinted)
        layout.addLayout(controlLayout)
        self.setLayout(layout)

        self.applyTint()

    def applyTint(self):
        temp = QtGui.QPixmap(self.pixmap)
        color = QtGui.QColor(self.red.value(),
                             self.green.value(),
                             self.blue.value(),
                             self.alpha.value())
        painter = QtGui.QPainter(temp)
        painter.setCompositionMode(painter.CompositionMode_Overlay)
        painter.fillRect(temp.rect(), color)
        painter.end()
        self.tinted.setPixmap(temp)

app = QtGui.QApplication(sys.argv)

main = Tinter('so.jpg')
main.show()

sys.exit(app.exec_()) 
```

![在此处输入图像描述](../Images/f3d43d8e97139afe305c1a918aa8454c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T00:16:12.287

如果图标可以显示在它自己的小部件中（例如 a `QLabel`），那么一个简单的解决方案是应用[QGraphicsColorizeEffect](http://qt-project.org/doc/qt-4.8/qgraphicscolorizeeffect.html)。

这是一个简单的演示：

```
from random import randint
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.label = QtGui.QLabel(self)
        self.label.setPixmap(QtGui.QPixmap('image.jpg'))
        self.button = QtGui.QPushButton('Tint', self)
        self.button.clicked.connect(self.handleButton)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.label)
        layout.addWidget(self.button)

    def handleButton(self):
        if self.label.graphicsEffect() is None:
            self.effect = QtGui.QGraphicsColorizeEffect(self)
            self.effect.setStrength(0.6)
            self.label.setGraphicsEffect(self.effect)
        self.effect.setColor(QtGui.QColor(
            randint(0, 255), randint(0, 255), randint(0, 255)))

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

# sql - Compare values from 2 tables based on Dates from one of the 2 tables?

> ID：12807881
> 
> 赞同：0
> 
> 时间：2012-10-09T20:25:36.287
> 
> 标签：sql, sql-server-2008

I have 2 tables that have similar data and I need to compare the values of one table with the other where the dates are equal.

Example tables:

```
CREATE TABLE [data].[ProfileReconciliation] (
[ProfileName] varchar(100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL ,
[OriginalFeedDate] datetime NOT NULL ,
[AggregationDate] datetime NOT NULL ,
[TotalDescription] varchar(200) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL ,
[TotalSalesAmount] decimal(18,2) NOT NULL ,
[LoadKey] int NULL 
)
ON [DATA]
GO

CREATE TABLE [data].[Aggregation] (
[ColumnName] varchar(100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL ,
[dataDate] date,
[profileDate] datetime  ,
[aggregationType] varchar(200) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL ,
[dataValue] decimal(18,2) NOT NULL ,

)
ON [DATA]
GO 
```

So, the `dataValue` in the `Aggregation` table needs to be compared to the `TotalSalesAmount` in the `ProfileReconciliation` table. The `dataDate` in the `Aggregation` table matches up with the `AggregationDate` in the `ProfileReconciliation` table. The ProfileReconciliation table only contains data from a daily feed, so we only need to compare the dates that are in the ProfileReconciliation with the Aggregation table. I need to indicate weather the values of each table are equal and if not I need to show a flag indicating so. I started by selecting the data from the Aggregation table where the dataDate was in AggregationDate. I obviously have to cast the AggregationDate. I just have no clue where to head next or what the best approach to this is.

Example Data: From ProfileReconciliation table

```
OPDCost 2012-10-08 17:43:51.000 2012-10-07 00:00:00.000 SUM(Total_Net_Cost_Amt) 21323923.00 5307

OPDS    2012-10-08 17:43:51.000 2012-10-07 00:00:00.000 SUM(Total_Net_Sales_Amt)    70753228.00 5307 
```

From Aggregation table:

```
SPVData.fact.DayStoreProdCost   2012-10-07  2012-10-09 09:06:20.9167944     20970788.131400 
SPVData.fact.DayStoreProdExtra   2012-10-07     2012-10-09 09:03:19.1558724     70642458.910000 
```

So as you can see the amounts do not match up so we wwould want teh results to look like this:

```
**ProfileName  Date                      ProfileAmount AggregationAmount   Equal**
OPDCost      2012-10-07 00:00:00.000   21323923.00   20970788.13         0
OPDS         2012-10-07 00:00:00.000   70753228.00   70642458.91         0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:01:37.543

```
Select p.ProfileName, p.AggregationDate,
p.TotalSalesAmount as ProfileAmount, a.DataValue as AggregationAmount,
Case When p.SalesAmount <> a.DataValue Then 1
else 0
end as Equal
From Aggregation a 
Inner Join ProfileReconcilation p On Convert(Date,p.AggregationDate) = a.DataDate 
```

If I've understood correctly, which I'm not sure I have...

Not sure the Convert is necessary either, from your example looks like your DateTime has a data in it anyway.

# jquery - 将 tinyscrollbar 与 ajax 一起使用

> ID：12807882
> 
> 赞同：1
> 
> 时间：2012-10-09T20:25:38.153
> 
> 标签：jquery, ajax

我正在尝试将 tinyscrollbar ( [http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/) ) 与 ajax 加载的内容一起使用。我的原始页面有一个这样的 div：

```
<div id="content-wrap" style="display:none;">        
</div> 
```

我使用此函数进行 ajax 调用：

```
$('#nav li a').click(function(){
    var toLoad = $(this).attr('href')+' #content';
    $('#content-wrap').load(toLoad,showNewContent);
    function showNewContent() {
        $('#content-wrap').fadeIn(1000).css("display", "block");
        $('#scrollbar1').tinyscrollbar();
        $("#scrollbar1").tinyscrollbar_update();
    } 
```

被调用的内容如下所示：

```
<div id="content">
    <div id="scrollbar1">
    <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
    <div class="viewport">
    <div class="overview">
        //some content
        //some more content
    </div></div></div>  
</div> 
```

但它根本不起作用。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:11:52.457

我首先创建了一个名为 content.htm 的文件，如下所示

```
<html>
<body>
<div id="content">
    <div id="scrollbar1">
    <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>
    <div class="viewport">
    <div class="overview">
        <p>//some content</p>
        <p>//some content</p>
        <p>//some content</p>
        <p>//some content</p>
        <p>//some content</p>
        <p>//some content</p>
    </div></div></div>  
</div>
</body>
</html> 
```

然后我像这样创建了另一个名为 test.htm 的文件

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://baijs.nl/tinyscrollbar/js/jquery.tinyscrollbar.js"></script>
<style>
#scrollbar1 { width: 520px; clear: both; margin: 20px 0 10px; }
#scrollbar1 .viewport { width: 500px; height: 200px; overflow: hidden; position: relative; }
#scrollbar1 .overview { list-style: none; position: absolute; left: 0; top: 0; }
#scrollbar1 .thumb .end,
#scrollbar1 .thumb { background-color: #003D5D; }
#scrollbar1 .scrollbar { position: relative; float: right; width: 15px; }
#scrollbar1 .track { background-color: #D8EEFD; height: 100%; width:13px; position: relative; padding: 0 1px; }
#scrollbar1 .thumb { height: 20px; width: 13px; cursor: pointer; overflow: hidden; position: absolute; top: 0; }
#scrollbar1 .thumb .end { overflow: hidden; height: 5px; width: 13px; }
#scrollbar1 .disable{ display: none; }
.noSelect { user-select: none; -o-user-select: none; -moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; }

</style>
</head>
<body>
<div id="content-wrap" style="display:none;">        
</div>
<input type="button" value="Load Content" id="btnLoad"/>

<script language="javascript">
    $('#btnLoad').click(function(){
        var toLoad = "http://localhost/tinyscrollbar/Content.htm #content";
        $('#content-wrap').load(toLoad,function(){
            $('#content-wrap').fadeIn(1000).css("display", "block");
            $('#scrollbar1').tinyscrollbar();
            $("#scrollbar1").tinyscrollbar_update();
        });
    });
</script>
</body>
</html> 
```

它对我来说很好。

我认为您应该逐步缩小问题范围。首先检查内容是否从内容 div 正确加载，然后检查 tinyscrollbar。我假设您在以下代码块中做错了什么

```
$('#nav li a').click(function(){
    var toLoad = $(this).attr('href')+' #content';
    $('#content-wrap').load(toLoad,showNewContent); 
```

# menu - Kindle Fire 自定义软键菜单

> ID：12807883
> 
> 赞同：1
> 
> 时间：2012-10-09T20:25:39.567
> 
> 标签：menu, key, kindle-fire

有谁知道如何从软键菜单中删除或隐藏菜单和搜索按钮。我想完成在隐藏搜索按钮的 Pulse 应用程序或隐藏搜索和菜单按钮的 Kindle Fire 帮助和反馈应用程序中所做的事情。

我很好奇他们是否真的在修改软键菜单，或者使应用程序全屏并在其位置放置菜单图形。

我知道[这篇文章](https://stackoverflow.com/questions/10956808/how-to-suppress-search-icon-on-kindle-fire-menu-actionbar)没有充分回答这个问题，因为有一些应用程序的例子似乎是修改过的软键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:41:48.460

您无法自定义软键工具栏上显示的内容，但您可以从溢出菜单中添加/删除项目以及拦截返回和搜索按钮。

溢出菜单在 API15 及更高版本中应该会*自动*消失，但它并不总是可靠的（在任何具有溢出/操作菜单的 Android 设备上）

在我的 FireHD 上的 Pulse 应用程序中，工具栏仍然可见（通常带有搜索按钮）

有关他们最新博客文章和 SDK 文档的更多信息，请参阅 [http://www.amazonappstoredev.com/2012/10/optimizing-for-soft-key-support-on-kindle-fire-hd.html](http://www.amazonappstoredev.com/2012/10/optimizing-for-soft-key-support-on-kindle-fire-hd.html)

# html - IE浮动权利问题

> ID：12807889
> 
> 赞同：2
> 
> 时间：2012-10-09T20:26:05.410
> 
> 标签：html, css, internet-explorer, css-float

我在 IE9 中遇到了一个跨度（`span.share`）的问题，我试图将它放在一个跨度内的所有这些`float:right`div 旁边。`float:left`

jsfiddle（记得在IE中查看）：http: [//jsfiddle.net/MgW6R/2/](http://jsfiddle.net/MgW6R/2/)

这是它在 IE9 中的样子：

![在此处输入图像描述](../Images/d172b3f0f2a1d2c258411dee9946e3dd.png)

这就是它的外观（并且在其他浏览器中看起来像）：

![在此处输入图像描述](../Images/b77a87b946f4bb072349591a6a0a3bf2.png)

**html**

```
<div class="contentWrapper">
    <div class="content">
        <span class="contentItem">
            <a href="javascript: void(0);">
                <img src="http://www.example.com/image1.jpg">
            </a>
            <div class="detailsWrapper">
                <div class="name-date">
                    <span class="date">Jul 04: </span>
                    <span class="userName">Christie</span>
                </div>
                <span class="share"></span>
                <div class="clear"></div>
                <div class="caption">Watching the fireworks in NY without the crowds, heat and concussion via tv #cahs</div>
            </div>
        </span>
        <span class="contentItem">
            ...
        </span>
    </div>
</div> 
```

**css**

```
.contentWrapper {
    overflow: hidden;
    position: relative;
}
.content {
    margin-left: 256px;
    padding-top: 14px;
    position: relative;
    white-space: nowrap;
}   
.contentItem {
    display: inline-block !important;
    margin: 0 14px 0 0;
    vertical-align: top;
}
.contentItem a {
    display: block;
}
.contentItem img {
    height: 450px;
}
.contentItem .detailsWrapper {
    color: #E3E3E3;
    position: relative;
}
.contentItem .detailsWrapper .name-date {
    float: left;
    padding: 5px 0 0;
}
.contentItem .detailsWrapper .share {
    background: url("http://www.connectionsacademy.com/_images/teenWebsite/share-btn-sprite.png") no-repeat scroll 0 0 transparent;
    cursor: pointer;
    float: right;
    height: 23px;
    width: 91px;
}
.clear { clear: both; }
.contentItem .detailsWrapper .caption {
    margin-top: 10px;
    white-space: normal;
    width: 450px;
    word-wrap: break-word;
} 
```

**注意：** 我最初有`span.share` `position:absolute`，但我不得不更改它，因为它会导致页面上的其他元素出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:24:35.240

从外观上看，您需要在某个点指定宽度。由于它们都设置为自动，因此它占用了尽可能多的空间。我会尝试设置一些特定的宽度以及 100% 的宽度`.detailsWrapper`。

这应该确保宽度永远不会超过父级，但这也意味着您需要确保零​​件宽度有界限。

如果宽度是动态的，请尝试使用`jQuery`将它们设置为加载图像并使用图像宽度来设置`.contentItem`宽度，它应该确保所有内容都保持相同的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:00:16.843

如果容器宽度未知，您可以使用绝对位置而不是浮动作为共享按钮。只需将其放在流中的图像之后并仅设置正确的坐标（不要设置为顶部）。这将是：

```
.container {position:relative;border:2px solid blue;...}
.button-share {position:absolute;right:0;...} 
```

要根据内容调整容器大小，请使用 display:inline-block|table、float 或 position:absolute。

# java - 休眠异常 LockAcquisitionException：无法更新

> ID：12807890
> 
> 赞同：13
> 
> 时间：2012-10-09T20:26:08.773
> 
> 标签：java, hibernate, deadlock

在我的应用程序中，我使用 Java、Hibernate(Annotations) 和 mySQL。它大部分时间都运行良好，但偶尔会发生此错误：

```
SEVERE: Could not synchronize database state with session
org.hibernate.exception.LockAcquisitionException: could not update: [myPack.Analysis$TestRun#5191]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:107)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2596)
    at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2478)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2805)
    at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:114)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:268)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:260)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:180)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:375)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)
    at myPack.Analysis.fileHelper(Analysis.java:977)
    at myPack.Analysis.dirHelper(Analysis.java:702)
    at myPack.Analysis.dirHelper(Analysis.java:714)
    at myPack.Analysis.dirHelper(Analysis.java:714)
    at myPack.Analysis.dirHelper(Analysis.java:714)
    at myPack.Analysis.dirHelper(Analysis.java:714)
    at myPack.Analysis.dirHelper(Analysis.java:711)
    at myPack.Analysis.parseLog(Analysis.java:682)
    at myPack.Analysis.main(Analysis.java:614) 
```

最可疑的行`Analysis.java`是：

```
dbPerson = (Person) session.get(Person.class, dbPersonId, LockOptions.READ); 
```

我所做的是使用 获取行并`dbPersonId`根据需要更新/更改行内容。例如：

```
dbPerson.Name = "Jack";
dbPerson.Age ++;
session.saveOrUpdate(dbPerson); 
```

我猜有什么问题，`LockOptions`我尝试使用不同的锁定选项，例如`NONE, UPGRADE`......但仍然没有运气。

最令人沮丧的是我什至无法手动重现此错误。只有在多次调用 Analysis.java 时才会发生一次。

我知道会话不是线程安全的，但我不确定这是否与此有关。

任何想法将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:39:03.763

由于它使用了`READ`锁定选项，因此我捕获了异常，让线程休眠一段时间，然后再次尝试获取锁定，从而解决了问题：

```
try {
  dbPerson = (Person) session.get(Person.class, dbPersonId, LockOptions.READ);
} catch (RuntimeException e) {
  if (e instanceof LockAcquisitionException) {
    try {
      Thread.sleep(15000);
      dbPerson = (Person) session.get(Person.class, dbPersonId, LockOptions.READ);                      
     } else {
      throw e;
     } 
```

# excel - 当单元格值为 TRUE 时检索单元格值并输出到另一个工作表的函数/宏

> ID：12807891
> 
> 赞同：0
> 
> 时间：2012-10-09T20:26:13.883
> 
> 标签：excel, excel-2007, excel-formula, vba

我昨天提出了这个问题，想向 VertexVortex 大喊他的解决方案。当我在工作表的工作副本上实现我的演示公式时，我无法让它工作——第一行之外的第二张工作表上的公式没有正确输出。原始线程在这里：

[原始线程](http://www.reddit.com/r/excel/comments/115ci1/macro_to_loop_through_fields_and_output/)

本工作手册的目的是，当测试人员运行每个步骤时，他们会标记产品是通过还是失败。如果该步骤失败，测试人员会记录发生此情况的原因。在第二张表“执行摘要”上，我需要它输出所有失败步骤的列表以及失败原因的说明。

[这是工作簿](http://www.kimronemusdesign.com/wp-content/uploads/2012/10/Master_workbook.xls)

[这是第一个工作表的屏幕截图——“步骤”和通过/失败复选框](http://www.kimronemusdesign.com/wp-content/uploads/2012/10/worksheet1.jpg)

[这是第二个工作表——应该输出失败的步骤和注释](http://www.kimronemusdesign.com/wp-content/uploads/2012/10/worksheet2.jpg)

第二张工作表上的前两个公式 - 返回失败的第一步和该步骤的注释。对于这些单元格，感谢 VertexVortex，我使用了：

```
=INDEX(tests,MATCH(TRUE,fails,0))    ///formula for 'section/step' cell
=INDEX(notes,MATCH(TRUE,fails,0))   ///formula to output notes from first fail 
```

我还应该提到，有人告诉我在第一个工作表上创建命名范围——“tests”是记录部分/步骤的列，“fails”是包含失败复选框的列的命名范围，“notes”是包含有关步骤失败原因的注释的列的命名范围。

除此之外的行让我感到困惑——该公式适用于我在上一篇文章中设置的演示，但不再返回任何值。我有的公式是：

```
=IFERROR(INDEX(OFFSET(tests,MATCH(K57,tests,0),0),MATCH(TRUE,OFFSET(fails,MATCH(K57,tests,0),0),0)),"") ///formula for outputting the second 'section/step' cell that has failed
=IFERROR(INDEX(OFFSET(notes,MATCH(K57,tests,0),0),MATCH(TRUE,OFFSET(fails,MATCH(K57,tests,0),0),0)),"")  //formula to output the notes from the second fail 
```

如果有一种方法可以让这种情况发生，涉及到一个宏或不同的解决方案，我会全力以赴。我感谢大家对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:00:37.587

`OFFSET`不能在整列上工作，因此您应该将命名范围更改为实际的单元格范围。使`fails`（和其他范围）相等`=Testing!$R$1:$R$10000`（您可以通过按 CTRL+F3 来编辑它），这使它对我有用。

但是再进一步测试一下，如果有同名的测试/步骤，这个公式就会中断，比如`25\. Enter City/equivalent`，因为“历史”查找依赖于从上一个找到的测试的名称开始。

我建议使用稍微不同的方法，`TRUE`通过在执行摘要工作表中添加一个实用程序列（我使用 H 列）来缩小每次找到后的范围。

在 Step 和 Notes 列中，使用

```
=IFERROR(INDEX(tests,$H57),"")
=IFERROR(INDEX(notes,$H57),"") 
```

并在新列中，在第一个单元格（H57）中，将`=MATCH(TRUE,fails,0)`和 在以下行中，

```
=MATCH(TRUE,OFFSET(fails,$H57,0),0)+$H57 
```

这应该可以解决问题。

编辑：我故意不在`IFERROR`后一栏中使用，以便在需要时进行调试会更容易。

# jquery - jQuery克隆带有id的元素

> ID：12807892
> 
> 赞同：0
> 
> 时间：2012-10-09T20:26:14.287
> 
> 标签：jquery, html

> **可能重复：**
> [意见：在 HTML 中，可能重复的 ID 或非标准属性？](https://stackoverflow.com/questions/165783/opinion-in-html-possible-duplicate-ids-or-non-standard-attributes)

我目前正在编写一个工具，它使用 jQuery clone 来克隆一个带有 id 的元素。这个克隆的元素可能有也可能有 id 的子元素。到目前为止，我并没有使任何克隆的元素 id 都是唯一的。我很好奇这是否会导致任何与浏览器相关的问题，除了明显无法使用 Id 选择器找到单个元素。特别是我很好奇旧浏览器是否会出现重复 ID 的问题。

需要明确的是，我没有看到任何问题，但我只能将本机 IE8 作为最旧的浏览器进行测试。

我的假设是，由于它是无效的 HTML，它可能会导致一些小的显示问题，仅此而已。

对具有 id 的元素使用 clone 并且不使它们的 id 除了无效的 HTML 之外是唯一的，是否有任何影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:29:25.940

您可能根本不需要该元素的 id - 否则您将分别更改它们。

所以我建议只删除该`id`属性：

```
$e.removeAttr('id') 
```

`id`并为所有后代删除：

```
$e.find('*').removeAttr('id') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:32:11.023

HTML 将是无效的，但 99% 的时间实际上不会导致任何呈现问题。

如果您使用`getElementById`. 你只会得到元素的第一次出现。[见这里](http://jsfiddle.net/qxfR9/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:29:59.433

是的，未来的 jQuery/javascript 选择器会在这些元素上行为不端。

# events - 在 Matplotlib 的 hexbin 中获取一个 tile 中的所有点

> ID：12807898
> 
> 赞同：2
> 
> 时间：2012-10-09T20:26:47.593
> 
> 标签：events, matplotlib, interactive

我想创建一个交互式 hexbin 图，其中单击图块会导致打印该图块中的所有点。如何检索这些索引？我知道我可以`picker=True`在调用时设置`hexbin`启用事件，创建一个回调函数`on_pick(event)`，然后注册它`gcf().mpl_connect(on_pick)`，但我不知道如何解释`event`我收到的。如果我使用`scatter`而不是`hexbin`，`event.ind`将对应于我的目标，但内容似乎不同`hexbin`。

谢谢！

# ruby-on-rails-3 - Rails 3 RESTful PUT 调用是否应该返回更新资源的 JSON 表示？

> ID：12807901
> 
> 赞同：0
> 
> 时间：2012-10-09T20:27:25.347
> 
> 标签：ruby-on-rails-3, rest

为了与实践 RESTful 服务开发和现有的用于与 RESTful 服务集成的 AngularJS 和 Ember.js 等 Javascript MVC 框架最兼容，是否应该将资源从仅更新资源的 RESTful PUT 调用反序列化为 JSON？

例如，Rails 3.2.8 似乎提倡只使用它只`respond_with @foobar.update_attributes(...)`返回一个 HTTP 状态代码 204。但是，您可以指定您希望 respond_with 或 respond_to 返回资源。

但是，这意味着除了 PUT 调用中指定的更新之外，还必须进行另一个调用以获取资源以获取资源上可能发生的任何更新。一方面，最好不要返回任何东西，因为您可能不在乎它是否已更改，这与 POST 不同，您在其中创建新资源并且可能需要具有新 id 的完整表示。然而，在 PUT 之后必须进行另一个 GET 调用以获取更新的资源，虽然这是有意的，但这是额外的开销（即，对于需要更新资源的 PUT，您必须先 PUT 然后 GET）。

我知道 REST 在实现方面留下了很多开放的空间，但我想了解人们同意在这方面的良好做法，至少截至 2012 年 10 月，在 AngularJS 和 Ember.js 使用的所述上下文中，以及为什么。

# excel - 安装 Excel AddIn 时弹出“插入智能卡”窗口

> ID：12807902
> 
> 赞同：2
> 
> 时间：2012-10-09T20:27:33.973
> 
> 标签：excel, vba, installation, add-in

我的 Excel 插件是用 C# 编写的，它使用 Excel DNA、AddIn Express RTD、NetOffice 安装程序是用高级安装程序创建的，加上 VBA，VBA 代码在 install.xls

```
Private Sub Workbook_Open()

    Dim quit As Integer
    Dim added As Boolean
    Add_Addin

    If Workbooks.Count = 1 Then
        Application.quit
    Else
        Me.Close
    End If

End Sub

Private Sub Add_Addin()
    On Error GoTo ERR_

    Dim addinFile As String
    addinFile = ThisWorkbook.Path & "\" & "MyAddIn.xll"

    If Len(addinFile) > 0 Then
            Dim LEA As AddIn
            Set LEA = Application.AddIns.Add(addinFile)
            If (Not LEA Is Nothing) Then
                LEA.Installed = True
            Else
                MsgBox "Failed to add XLL"
            End If
    Else
        MsgBox "XLL file not found"
    End If

    Exit Sub

ERR_:
    MsgBox ("Error " & Err.Number & " " & Err.Description)

End Sub 
```

一切正常。而且我没有更改安装程序现在当一个用户安装我的插件的新版本时，当 install.xls 在 Excel 中运行时，会弹出一个窗口说“插入智能卡”

我想了想，发现唯一改变（与以前的版本相比）是 install.xls b/c 的数字签名 以前的签名文件最近过期了 我用新证书签署了 install.xls

现在安装过程中会弹出奇怪的窗口。
有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:57:49.670

也许您可以尝试按照以下链接上的说明添加受信任的位置。

[http://office.microsoft.com/en-us/word-help/add-remove-or-modify-a-trusted-location-for-your-files-HA010354311.aspx#BM1](http://office.microsoft.com/en-us/word-help/add-remove-or-modify-a-trusted-location-for-your-files-HA010354311.aspx#BM1)

这是我正在为类似问题寻求的解决方案。

# css - 当绝对定位的 jCarousel 在较小的浏览器窗口上与第二个 div 重叠时该怎么办

> ID：12807906
> 
> 赞同：0
> 
> 时间：2012-10-09T20:27:59.823
> 
> 标签：css, jcarousel

如果您查看此站点并缩小浏览器窗口的大小，前两个主要块（图像轮播和“最新消息”）将重叠：[http ://africanstudies.stanford.edu/](http://africanstudies.stanford.edu/)

我已经尝试了多种方法来解决这个问题，但我想不出任何不重叠且看起来很糟糕的东西。（我还必须为轮播添加一些宽度/高度设置，因为我认为 jCarousel 可能存在一个错误，例如，如果您不指定高度，则不会显示整个图像。）

我真正希望发生的是随着浏览器的扩展，这两个块都缩小了，但恐怕这超出了我目前的能力。

有人对如何处理这个有任何想法吗？我可以发布 HTML/CSS，但它非常难看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:38:32.580

您已将高度设置`#views_slideshow_singleframe_main_home_banner_cycle-block_1`为`270px`，如果将其删除，则似乎没问题。顺便说一句，您在水平方向上存在基本相同的问题，即幻灯片放映在一定宽度上与最新消息重叠。

# excel - VBA 中的多个 Range.Find()

> ID：12807907
> 
> 赞同：2
> 
> 时间：2012-10-09T20:28:10.770
> 
> 标签：excel, excel, vba, excel-2007

我今天遇到了这个有趣的问题。我在另一个循环中有一个循环，两者都`Find`用于不同的目的。发生的事情是`Find`在内部循环中使用会破坏`Find`外部循环。我猜[excel](/questions/tagged/excel "显示标记为“excel”的问题")只会记住一个搜索实例。有没有办法解决这个问题或者这是一个设计问题？

这是我的代码的一些缩短版本。

```
Sub Main()
    'Some boring stuff

    Set lst_rapports = Worksheets("mappingTRANSIT").range("lst_rapports")
    Set first_result = lst_rapports.Find(rap_choisi)
    Set active_result = first_result

    Sheets("req01").Unprotect "shoobidoowap"
    If Not first_result Is Nothing Then
        ' ...            
        Do
            Sheets("req01").Select            
            ' ...
            For i = 0 To 4
                Set rubrique_cell = range("E:E").Find(rub(i))
                If Not rubrique_cell Is Nothing Then
                    ' ...
                End If
            Next i                
            ' Yet more boring stuff...

            Set active_result = lst_rapports.FindNext(active_result)
        Loop Until active_result.Address = first_result.Address
    Else
        MsgBox "Impossible de trouver """ & rap_choisi & """ !"
    End If
    Sheets("req01").Protect "shoobidoowap"
End Sub 
```

注意`.Find`for 循环中的第二次使用。

有什么方法可以在某种临时变量中保留第一次搜索并在此之后将其恢复？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T21:12:03.217

当您运行`FindNext`[(MSDN for FindNext)](http://msdn.microsoft.com/en-us/library/office/ff196143.aspx)时，它会自动使用与`what`上次调用相同的方法`Find`，即使用于不同的范围也是如此。

为了纠正这一点，而不是使用

`Set active_result = lst_rapports.FindNext(active_result)`

采用

`Set active_result = lst_rapports.Find(rap_choisi,active_result)`

# coderush - 调整 CodeRush 的等效命名空间

> ID：12807915
> 
> 赞同：3
> 
> 时间：2012-10-09T20:29:23.017
> 
> 标签：coderush

Resharper 具有[调整命名空间](http://www.jetbrains.com/resharper/webhelp/Refactorings__Adjust_Namespaces.html)，它允许您更正文件夹、项目或解决方案中所有文件的命名空间。

是否有可用于 CodeRush/Refactor 的功能或插件可与 Resharper 的调整命名空间功能相媲美。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:51:32.677

目前没有内置的等效功能。

然而，CodeRush 有一个丰富的插件生态系统，其中包括[CR_SyncNamespacesToFolder](http://code.google.com/p/dxcorecommunityplugins/wiki/CR_SyncNamespacesToFolder)

这似乎提供了您正在寻找的功能。

# jquery - 显示隐藏多个 div

> ID：12807916
> 
> 赞同：3
> 
> 时间：2012-10-09T20:29:22.523
> 
> 标签：jquery, click, toggle, show-hide

这个想法是，当我点击一张图片时，会显示另一张图片和一些文字。我已经成功了：

jQuery

```
$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".show_hide").show();

$('.show_hide').click(function(){
$(".slidingDiv").slideToggle();
});

}); 
```

HTML

```
 <a href="#" class="show_hide"
   ><img src="images/owl.png" id="owl" width="200" height="200"  alt="owl"></a>

  <div class="slidingDiv">
  Philip to the rescue!! <img src="images/cola.jpg"
     width="256" height="320" alt="cola  Philip">
  <a href="#" class="show_hide">Hide</a></div> 
```

CSS

```
.slidingDiv {
   height:300px;
   padding:20px;
   margin-top:10px;
}

.show_hide {
   display:none;
} 
```

但是我对如何用多张图片做到这一点有点困惑？

例如，如果我有 8 个不同的可点击图像，那将显示 8 个不同的图像和文本。

而且，有没有办法让它上升而不是下降？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:43:16.430

一个优雅的解决方案是像这样包装切换链接和切换的内容：

```
<div class="toggler-wrap">
    <a href="#" class="toggler">Toggle content</a>
    <div class="content">This text can be toggled.</div>
</div> 
```

然后您可以使用以下代码切换任何内容 div：

```
$(function(){
    $('.toggler').click(function(event){
        event.preventDefault();
        $(this).parent().find('.content').slideToggle();
    });
}); 
```

例如，请参阅[http://jsfiddle.net/TW5Eq/](http://jsfiddle.net/TW5Eq/)！练习愉快！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:32:33.927

您可以使用数据属性来抽象类名：

```
<a href="#" data-target="someclass" class="show_hide">

$('.show_hide').click(function(){
     var myClass=$(this).attr('data-target');
     $("."+myClass).slideToggle();
} 
```

# objective-c - 如何检查当前是否正在显示 UIViewController？

> ID：12807922
> 
> 赞同：22
> 
> 时间：2012-10-09T20:29:34.380
> 
> 标签：objective-c, ios, uiviewcontroller, nsnotificationcenter, nsnotification

如何检查`UIViewController`当前是否正在显示？

我`UIViewControllers`正在听`NSNotifications`- 即使它们没有显示（即未显示）。所以我可以`UIViewController`在后台观察10`NSNotifications`个`NSNotificationCenter`。当 an`NSNotification`被发布和接收时`UIViewController`，我想知道它当前是否正在显示。如果不是，我将设置一个布尔值，以便在呈现视图时对其进行处理。如果它当前正在显示，我会做更多的事情，比如立即更新表格，等等......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-09T22:26:23.670

您需要检查您的视图控制器是否位于导航控制器的视图控制器数组堆栈的顶部。示例代码是，

```
if (self.navigationController.topViewController == self) {
    //the view is currently displayed
} 
```

您可以在`viewWillAppear`方法内部使用它来检查当前视图是否可见。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-09T20:56:11.617

检查它是否附着在窗口上。如果不是`nil`，它在附加到屏幕的层次结构中（当然它可能超出屏幕的边界，被其他视图覆盖或设置了隐藏标志）

```
if (myViewController.view.window) {
  // I'm attached to the window
} else {
  // not attached to the window
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T22:34:34.860

您可以为此使用标志`viewWillAppear`和`viewWillDisappear`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T20:37:17.853

为什么不把viewWillDisappear中的通知监听器去掉，添加到viewWillAppear中呢？

编辑：误读了他的问题，对不起。

建议答案：在 viewDidDisappear 和 viewDidAppear 中设置自己的标志 (BOOL)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-19T09:15:09.547

为每个 ViewController 指定标题，然后通过下面给出的代码获取当前 ViewController 的标题。

```
NSString *currentController = self.navigationController.visibleViewController.title;

Then check it by your title like this

if([currentController isEqualToString:@"myViewControllerTitle"]){

    //write your code according to View controller. 

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T20:45:02.683

我认为检查`viewController.view.superview`应该有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-25T09:01:09.160

重温这个问题为时已晚。

要检查 a 的实例`UIViewController`当前是否**在屏幕顶部**或检查它是否**显示在 screen 上**，您可以进行如下检查：

```
// Get the topmost view showing on the screen as below
    UIViewController * currentVC = ((UINavigationController*)app.window.rootViewController).visibleViewController;

// Now check whether the viewcontroller you want to show is the same as the currently showing view controller.
    if (currentVC.class == myVC.class) {  // Here myVC is any/new instance of the viewcontroller you would like to check or show (if not shown).
         // If both are same then it returns true and executes this block of code.
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-03T08:44:28.113

另一种基于检查`window`属性的选择

```
if viewController.viewIfLoaded?.window != nil {
    // visible
} 
```

# jboss - 有什么方法可以实现完全可移植的 Java EE 6 部署？

> ID：12807927
> 
> 赞同：0
> 
> 时间：2012-10-09T20:29:44.997
> 
> 标签：jboss, java-ee-6

是否可以在任何 Java EE 6 容器（如 JBoss 或 GlassFish 等）上部署 Java EE 6 应用程序而不使用它们的模块/库？

例如，如果我想要 Hibernate 或 Weld，则将它们添加到我的 Maven pom.xml 中。

换句话说，是否有任何“香草”容器，或者 JBoss 或 GlassFish 是否可以成为“香草”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:40:56.057

对不起...但老实说我不明白你的问题。

Java EE 应用程序在大多数情况下都可以部署在所有容器中——只要它们不使用特定于所选容器的包或配置。即使您在 POM 中添加库并将应用程序打包为 WAR 或 EAR，这*也应该可以*工作。

不需要 Weld，因为 API 是 Java EE 6 的一部分。如果你想使用 JPA，你也不需要休眠。

# javascript - 使用原型 Form.serialize() 有多安全？

> ID：12807928
> 
> 赞同：0
> 
> 时间：2012-10-09T20:29:52.270
> 
> 标签：javascript, forms, serialization, prototypejs

不知何故，当使用 Prototype`Form.serialize()`提交复杂的表单时，我总是有点不确定这是否适用于所有情况。

我担心的可能问题是引号/字符串转义问题，或者可能是提交不寻常的字符代码，任何可能扰乱流程的事情。

所以问题是：

使用 Prototype 从表单中收集所有数据然后通过 AJAX 将其发送到服务器是否安全（在客户端），或者是否有任何浏览器已知在以这种方式发送表单时存在问题 - 或者可能缺乏支持为了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:52:56.070

虽然我知道没有浏览器在内部使用 Javascript 来提交表单，但应该如何提交表单的**确切**细节都有很好的文档记录。

完全可以用 Javascript 编写完全遵循协议的表单提交代码。另一方面，有经验的编码员可能会错过一些边缘情况——比如禁用的复选框控件。

我不能代表这个`prototype`库，因为我从来没有使用过它，但是如果有一个表单没有正确提交，或者一个服务器没有接受提交的表单，那么它应该作为一个错误报告提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:53:09.230

我不确定你为什么最初被否决，这是一个有效的问题。

不过，我认为真正的答案是安全方面确实发生在后端。序列化整个表单并通过请求发送它是可以的，但您需要验证您在另一端收到的信息。

例如，您不想这样做（或其他语言的等价物）：（假设`$form`是序列化形式）

```
foreach ($form as $key => $value) {
  $object->$key = $value;
}

save($object); 
```

# vb.net - VB.NET 用 Levenshtein 算法比较文件

> ID：12807933
> 
> 赞同：1
> 
> 时间：2012-10-09T20:30:36.417
> 
> 标签：vb.net, comparison

我想使用 Levenshtein 算法来比较 VB.NET 中的两个文件。我知道我可以使用 MD5 哈希来确定它们是否不同，但我想知道这两个文件有多大不同。我正在使用的文件都在 250 兆左右。我已经尝试了不同的方法来做到这一点，我意识到我真的无法将两个文件都加载到内存中（各种与字符串相关的问题）。所以我想我只是流式传输我需要的字节。美好的。但是我发现的 Levenshtein 算法的实现都是一个长度为 1 * 长度为 2 的矩阵，在这种情况下是不可能使用的。我听说有一种方法可以只用两个向量而不是整个矩阵来做到这一点。

如何在不声明作为文件大小乘积的矩阵的情况下计算两个大文件的 Levenshtein 距离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:36:51.143

请注意，Levenshtein 矩阵的每一行中的值仅取决于其上方行中的值。这意味着您只需要两个一维数组：一个包含当前行的值；另一个包含当前行的值。另一个填充了您可以从当前行计算的新值。然后，您交换他们的角色（“新”行变为“当前”行，反之亦然）并继续。

请注意，这种方法只允许您计算 Levenshtein 距离（这似乎是您想要的）；它无法告诉您必须执行哪些操作才能将一个字符串转换为另一个字符串。该算法有一个非常巧妙的修改，可以让您在不使用*nm*内存的情况下重建编辑操作，但我忘记了它是如何工作的。

# php - 参考事务中的 PNREF 能否用作另一个参考事务中的 ORIGID？

> ID：12807942
> 
> 赞同：6
> 
> 时间：2012-10-09T20:31:22.927
> 
> 标签：php, paypal, payflowpro

我无法从 PayPal 文档中找到明确的答案。

根据文档：

> 原始交易中返回的 PNREF 在参考交易中的有效期为 12 个月。

我想避免要求我的客户每 12 个月重新输入一次他们的信用卡信息。

所以我想做的是做一个零美元的授权来存储一个初始的 PNREF，然后每次他们做一个参考交易时更新那个客户的 PNREF 值。因此，只要客户没有连续 12 个月没有交易，他们就不必重新输入他们的卡信息。

无法通过 Google 找到答案是否可行。有谁知道您是否可以将参考交易中的 PNREF 用作另一个参考交易的 ORIGID？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T12:27:44.667

好吧，我继续尝试了一下，我**可以**将参考事务的 PNREF 用作另一个参考事务中的 ORIGID。

现在百万美元的问题是，在零美元授权一年后，这仍然有效吗？大概一年后我会告诉你...

* * *

# 一年之后...

已经一年了，这对我们来说一直很成功。我们最初使用零美元授权 (ZDA) 保存客户的信用卡信息。稍后，我们使用 ZDA 的 PNREF 作为新事务的 ORIGID 执行参考事务（称为 T1）。

一段时间后，当客户想要进行另一笔交易（称为 T2）时，我们使用 T1 的 PNREF 作为新交易的 ORIGID。然后我们存储 T2 的 PNREF 以供下一次交易使用。因此，每次我们进行交易时，我们都会存储新的 PNREF 以供下一次交易使用。

这就是我们一直链接交易的方式，我们已经确认（我们自己和代表通过电话）只要 12 个月没有任何交易，我们可以无限期地继续链接它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T20:57:47.880

我们有同样的问题，或者希望做 Travesty3 发布的同样的事情，PayFlow Pro 电子邮件支持向我们指出了这个线程。

但是，在我们收到他们的电子邮件支持团队的回复之前，我们最终致电 PayFlow Pro 电话支持并得到以下解释：

**可能没有一种简单的方法来永久或“链接”不断更新 PNREF。尤其是在使用零美元授权 (ZDA) 时。虽然 ZDA 返回的 PNREF 可能有效，但它们只能持续很短的时间（+- 14 天）。接听我们电话的技术支持人员咨询了一位资深技术人员以确认这一点。**

现在，延迟捕获或销售交易返回的 PNREF 显然会持续 12 个月，但这些对我们来说并不是好的解决方案，因为我们不想在没有实际购买的情况下向客户的卡收费。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T13:43:58.597

是的，您确实可以使用参考交易（ZDA 或非 ZDA）的 PNREF 作为新参考交易的 ORIGID。

但是需要注意的是，如果您使用的是 PayPal Payments Pro（因此；PayPal 被设置为您的处理器），那么我需要对此进行一些额外的检查，因为我不完全确定它是否在那种情况下受支持。
如果您将 Payflow Pro 与您自己的处理器一起使用，那么它绝对受支持。

# java - java查找NY和UTC之间的偏移量

> ID：12807945
> 
> 赞同：2
> 
> 时间：2012-10-09T20:31:45.407
> 
> 标签：java, time, timezone

我正在尝试获取 NY（美国/东部）和 UTC 之间的当前偏移量。无论我的服务器位于哪个时区以及其他任何时间，我如何才能获得此值。我只想要以毫秒为单位的偏移量。我确信有一种快速的方法可以做到这一点，但我还没有找到。

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T20:54:56.480

注意：这未经测试。

使用：

[日历类](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)

[时区类](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html)

```
//Get NY time zone instance
TimeZone ny_tz = TimeZone.getTimeZone("America/New_York");

//Get NY calendar object with current date/time
Calendar ny_cal = Calendar.getInstance(ny_tz);

//Get offset from UTC, accounting for DST
int ny_offset_ms = ny_cal.get(Calendar.ZONE_OFFSET) + ny_cal.get(Calendar.DST_OFFSET); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T20:57:18.910

我们可以得到它：

森林：

```
 TimeZone est = TimeZone.getTimeZone("America/New_York");
    System.out.println("Offset ="+est.getRawOffset()); 
```

对于太平洋标准时间：

```
 TimeZone pst = TimeZone.getTimeZone("America/Los_Angeles");
    System.out.println("Offset ="+pst.getRawOffset()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:45:19.717

[Java API 时区](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html)

使用 getOffset() 函数获取一个时区和 GMT 的偏移量，然后是另一个和 GMT 的偏移量，然后减去它们，你就准备好了。不过要小心，有人确实提到这取决于当前日期！这不是微不足道的，因为每天都有几个小时，两个时区在不同的日期！这可能很重要，例如，如果两个时区在这几个小时内位于不同的 DST 区域（例如 DST 更改时间），这可能会导致显示不正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T13:47:23.317

您可以使用 getRawOffset() 函数来获取任何两个时区之间的偏移量...但是您必须了解一件事，偏移量将是 UTC 和给定时区之间的差异。考虑您的服务器在加拿大，那么偏移量必须由加拿大和用户时区之间的时区差异来确定..

```
 int offset = TimeZone.getTimeZone ('Asia/calcutta').getRawOffset() - TimeZone.getDefault().getRawOffset(); 
```

这里的 'TimeZone.getDefault()' 是服务器的时区，即）加拿大......所以需要减去它以获得所需的偏移量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-12T03:44:21.607

我尝试了@Geoff Montee 的答案，但它对我不起作用。这就是最终解决的问题：

```
public static long getOffsetFromUTCInMilliseconds(TimeZone timezone) {
        long offset =  timezone.getOffset(DateTimeHelper.nowUTC().toEpochSecond(ZoneOffset.UTC)) + timezone.getDSTSavings();
        return offset;
    } 
```

方便的是，如果时区晚于 UTC（GMT-1、GMT-2 等），则答案返回否定答案，如果时区早于 UTC（GMT+1、GMT+2 等），则返回肯定答案。

# wix - 如何在使用 WiX DTF 提取 MSI 时修改文件夹结构

> ID：12807946
> 
> 赞同：0
> 
> 时间：2012-10-09T20:31:48.483
> 
> 标签：wix, dtf

我需要将 MSI 中的文件提取到一个文件夹中，但是更改文件的目录结构，所有这些都来自 C# 应用程序（即：不是通过管理员安装或任何其他 MSI 安装）。从概念上讲，我想将 MSI 的嵌入式 cab 解压缩到我选择的文件夹中。要进行提取，我使用的是 WiX 3.6 DTF 库，但无法确定如何更改文件夹结构。

因此，例如，如果我运行 MSI 安装程序，“Component1”的目标文件夹将为`c:\Program Files(x86)\Company Name\Demo Product Installer\Component1\`，但在我的提取器应用程序运行时，我想将其更改为`c:\SomeOtherPlace\Demo Product Installer\Component1\`，最好通过更改`APPLICATIONFOLDER`目录路径（见下文） .

对于 MSI，我定义了这样的目录结构：

```
<Fragment>
  <Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="ProgramFilesFolder">
      <Directory Id="APPLICATIONFOLDER" Name="Company Name">
        <Directory Id="ProductFolder" Name="Demo Product Installer">
          <Directory Id="Cmp1Folder" Name="Component1" />
          <Directory Id="Cmp2Folder" Name="Component2" />
        </Directory>
      </Directory>
    </Directory>
  </Directory>
</Fragment> 
```

然后，在需要提取文件的代码中，我这样做了：

```
var msiFilePath = "myInstallerFile.msi";
var targetFolder = @"c:\SomeOtherPlace\";
using (var msiPackage = new InstallPackage(msiFilePath, DatabaseOpenMode.ReadOnly))
{
    msiPackage.WorkingDirectory = targetFolder;

    var dirMapping = msiPackage.Directories;    
    if (dirMapping.ContainsKey("APPLICATIONFOLDER"))                    
    {
        //This doesn't work, but represents what I hope to do:
        var oldInstallPath = dirMapping["APPLICATIONFOLDER"];                        
        oldInstallPath.TargetPath = targetFolder;                   
    }

    msiPackage.UpdateDirectories();                    
    msiPackage.ExtractFiles();                    
    msiPackage.Close();
} 
```

有没有办法在运行时使用 DTF 对象修改这样的文件夹结构？我知道我可以在事后移动文件，但如果我能这样做，它会更干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:17:34.817

提取后移动文件肯定会更容易。您可能能够将数据库复制到临时文件，打开它进行编辑和操作表，然后将其作为包打开并解压缩。您也可以在不提交到磁盘的情况下对表（临时表）进行内存更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:34:39.767

根据 Chirtopher 的回答中的提示（“您可能会在内存中更新表格......”），我能够找到一个可行的解决方案：

```
var msiFilePath = "myInstallerFile.msi";
var targetFolder = @"c:\SomeOtherPlace\";
using (var msiPackage = new InstallPackage(msiFilePath, DatabaseOpenMode.Transact))
{
    msiPackage.WorkingDirectory = targetFolder;

    var dirMapping = msiPackage.Directories;    
    if (dirMapping.ContainsKey("APPLICATIONFOLDER"))                    
    {
        //**** Modified code starts here ***//           
        // Changed the "APPLICATIONFOLDER" entry from "Company Name" to ".",
        // which is a special value to denote the extracted folder.
        var record = new Record(".", "APPLICATIONFOLDER");
        msiPackage.Execute("UPDATE `Directory` SET `DefaultDir` = ? WHERE `Directory` = ?", record);
        //**** Modified code ends here ***//
    }

    msiPackage.UpdateDirectories();                    
    msiPackage.ExtractFiles();  

    //Close **without** calling Commit() to ensure changes are not persisted                  
    msiPackage.Close();
} 
```

**请注意，我还将 DatabaseOpenMode 更改为 Transact。**

当然，如果您想对文件夹结构进行更高级的更改，则必须从 Directory 表中修改/插入/删除其他记录。（参见[http://msdn.microsoft.com/en-us/library/windows/desktop/aa368295(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368295%28v=vs.85%29.aspx)供参考）

# objective-c - 在 iOS 的 Objective-C 中创建带有完成块的可中断动画？

> ID：12807947
> 
> 赞同：3
> 
> 时间：2012-10-09T20:31:50.413
> 
> 标签：objective-c, cocoa-touch, animation, uiviewanimation

我正在尝试创建动画行为，其中视图顺时针旋转 45 度，然后当用户将其中心拖动到某条线上方时添加一个红色圆圈。将同一视图拖回同一行下方会将其恢复为原始方向，然后删除红色圆圈。视图应该需要 3 秒才能使用动画曲线旋转 45 度`UIViewAnimationCurveEaseInOut`：

![所需行为的可视化](../Images/dcd89eef0810a4d5eac427590b796235.png)

我有两个体现这种行为的函数，当用户将视图拖到线的上方或下方时，它们会被调用`- (void)viewHasMovedAboveLine:(UIView *)view`。`- (void)viewHasMovedBelowLine:(UIView *)view`这两个函数都包含带有完成处理程序的动画，即`+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion`. 完成处理程序会根据需要添加或删除红色圆圈。

如果用户碰巧在动画中间将视图拖回线，我可以让动画正确旋转，方法是设置`options:`并`UIViewAnimationOptionBeginFromCurrentState`检查`view.layer.animationKeys.count`执行动画之前的值并删除所有动画（如果有任何当前通过`[view.layer removeAllAnimations]`.

但是，即使在使用`[view.layer removeAllAnimations]`. **如果动画当前正在执行，有没有办法停止动画及其完成处理程序？**

我更喜欢一些更优雅的东西，而不是必须为每个动画创建私有属性，例如，`@property (nonatomic) BOOL animation01IsCurrentlyExecuting`和`@property (nonatomic) BOOL animation02IsCurrentlyExecuting`. 理想的解决方案将包含各种动画场景，其中包含动画代码和完成处理程序。

**ALSO：有没有办法查看动画被打断时的进度？**我自己对时间更感兴趣（例如，动画在 2.1 秒后被中断），这样我就可以确保任何进一步的动画都被正确地计时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T19:52:39.280

UIView 动画块的 'finished' 参数对于这种情况非常有用。

```
[UIView animateWithDuration:0.5 animations:^{
    //set your UIView's animatable property
} completion:^(BOOL finished) {
    if(finished){
       //the animation actually completed
    }
    else{
       //the animation was interrupted and did not fully complete
    }
}]; 
```

为了找出动画在被中断之前进行了多长时间，NSDate 上的一些方法可以派上用场。

```
__block NSDate *beginDate = [NSDate new];
__block NSTimeInterval timeElapsed;

[UIView animateWithDuration:0.5 animations:^{
    //your animations
    beginDate = [NSDate date];
} completion:^(BOOL finished) {
    if(finished){
        //the animation actually completed
    }
    else{
        //the animation was interrupted and did not fully complete
        timeElapsed = [[NSDate date] timeIntervalSinceDate:beginDate];
        NSLog(@"%f", timeElapsed);
    }
}]; 
```

# python - 在 python 中使用管道

> ID：12807949
> 
> 赞同：0
> 
> 时间：2012-10-09T20:31:51.320
> 
> 标签：python, subprocess, pipe

我正在尝试将我拥有的一些代码转换为 python。当前代码位于 gnu Makefile 中。我在这条线上遇到了一些麻烦。

```
cat $$dir/cpr/work/$(DATE)/output/XmlOutTxt*/part-r-000* | ./verify_testgen.py 
```

我所做的是：

```
p1 = subprocess.Popen(["cat", directory+"cpr/work/"+DATE+"/output/XmlOutTxt*/part-r-000*"], stdout=subprocess.PIPE)
p2 = subprocess.Popen(["./verify_testgen.py"],stdin=p1.stdout, stdout=subprocess.PIPE)
p1.stdout.close()
output = p2.communicate()[0] 
```

我想知道是否有更好的方法来解决这个问题，因为我仍然遇到一些问题。

# android - 什么是视图层次结构和 SurfaceView？

> ID：12807951
> 
> 赞同：2
> 
> 时间：2012-10-09T20:31:56.477
> 
> 标签：android, android-view

Android中“视图层次结构”的目的是什么？举个例子：

> SurfaceView 存在于普通视图层次结构之外。它实际上存在于普通窗口的后面，通过在您的应用中的视图布局上打一个洞使其可见。然后 SurfaceView 可以独立于您的其余视图进行更新，而无需等待 UI 线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:37:25.717

Android 的 View Hierarchy 是一个结构（通常是[ViewGroup](http://developer.android.com/reference/android/view/ViewGroup.html)），它以树状形式包含活动屏幕的所有[View 。](http://developer.android.com/reference/android/view/View.html)与任何其他 UI 管理器一样，它的目的是在给定应用程序的所有视图中委派操作和绘图的责任。

在您给定的示例中，这意味着您创建了一个不属于应用程序父/主 ViewGroup 的视图，并且实际上没有任何责任，不能做任何有用的事情。

# iphone - iPhone iOS 如何以幻灯片形式显示存储在应用程序中的照片？

> ID：12807952
> 
> 赞同：0
> 
> 时间：2012-10-09T20:32:03.490
> 
> 标签：iphone, objective-c, ios, uiimage, slideshow

我有一个应用程序，允许用户使用前置摄像头拍照并将它们存储在应用程序中。我想为用户提供查看所有照片的能力，以便一张一张地拍摄。

我知道这应该很容易实现，但是根据我过去的经验，可能存在隐藏的方向问题等。 **我想知道是否有一些开源库或苹果提供的类可以用来显示向用户展示照片的幻灯片？**

谢谢您的意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:43:55.027

虽然我通常使用以下

> NSArray *animationImages = [[NSArray alloc] initWithObjects:
> [UIImage imageNamed:@"image.ext"],
> [UIImage imageNamed:@"image2.ext"],
> .... nil];
> _imageView.animationImages=动画图像；
> [_imageView 开始动画];

这就是我认为您可能会喜欢我从这里可耻地复制的内容[Stack Overflow](https://stackoverflow.com/questions/6372389/ios-building-a-slideshow-with-fullscreen-images)

您可以使用[`Three20 photo viewer`](http://www.cocoacontrols.com/platforms/ios/controls/three20-photo-viewer). 您可以查看[`this`](http://www.raywenderlich.com/1430/how-to-use-the-three20-photo-viewer)教程以获取有关使用它的帮助。

还有一个[`WWDC video`](https://developer.apple.com/videos/wwdc/2010/?id=104)来自去年的，它让您了解如何实现这一点。

有[`other tools`](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=photo&commit=Search)你可以调查的。[`Cocoa Controls`](http://www.cocoacontrols.com/)有一个相当详尽的工具列表，可用于您的项目。

# c - 评估表达式时是否总是发生整数提升？

> ID：12807953
> 
> 赞同：9
> 
> 时间：2012-10-09T20:32:08.073
> 
> 标签：c, integer-promotion

> **可能重复：**
> [分配给较大宽度整数时的 C 整数溢出行为](https://stackoverflow.com/questions/728847/c-integer-overflow-behaviour-when-assigning-to-larger-width-integers)

我在谷歌搜索中没有找到明确的答案。假设您有两个表达式：

```
int16_t a16 = 100;
int16_t b16 = 2000;
int16_t result16 = (a16 * b16) / a16;

int8_t a8 = 100;
int8_t b8 = 20;
int8_t result8 = (a8* b8) / a8; 
```

在评估表达式时`(a16 * b16) / a16`，`(a8 * b8) / a8`它们是否总是`int`在评估期间提升到，然后在赋值之前将最终结果转换回所需的类型（`int16_t`或`int8_t`），或者这个整数提升完全是可选的？是否总是在评估整数表达式时进行整数提升，还是只是允许？

如果它总是完成，那么我可以预期这两个操作不会溢出（假设`int`是 32 位）。如果只允许完成（而不是要求），那么操作可能会溢出。我想更好地了解这种行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T20:37:53.493

```
int16_t result16 = (a16 * b16) / a16;
int8_t result8 = (a8* b8) / a8; 
```

这些声明与以下内容相同：

```
int16_t result16 = (int16_t) ((int) a16 * (int) b16) / (int) a16);
int8_t result8 = (int8_t) ((int) a8 * (int) b8) / (int) a8); 
```

符合要求的实现需要整数提升。默认情况下，一些嵌入式编译器不执行整数提升以提高代码密度（例如：MPLAB C18 编译器），但这些编译器通常也具有要符合的*ANSI模式。*

现在对于 C，行为是用抽象机器来描述的，其中*优化问题是无关紧要的。*如果编译器可以在不执行整数提升的情况下为程序实现相同的可观察行为，则可以不这样做。

假设你`int`是 32 位的，你是对的，这个表达式：`(a16 * b16) / a16`不能溢出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T20:46:20.543

首先，我们有*整数促销*，6.3.1.1/2。脚注 58 说：

> 整数提升仅适用于：作为通常算术转换的一部分，适用于某些参数表达式，适用于一元 +、- 和 ~ 运算符的操作数，以及移位运算符的两个操作数，由它们各自的子条款指定。

其次，我们有*通常的算术转换*（6.3.1.8）：

> [T] 整数提升在两个操作数上执行。然后将以下规则应用于提升的操作数：
> 
> *   如果两个操作数具有相同的类型，则不需要进一步转换。

最后，我们有操作员。例如，乘法表示 (6.5.5)：

> 通常的算术转换是在操作数上执行的。

因此，在表达式`a8 * b8`中，两个操作数都`int`被整数提升提升为，然后“不需要进一步转换”，因此表达式的结果也具有类型`int`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T20:38:02.407

没有必要执行整数提升，如果没有它们的结果与使用整数提升的结果完全相同（这是 as-if 规则的一个实例，实现可以做任何它想做的事情，如果它是与标准规定的方式没有区别）。

算术运算符（6.5.5、6.5.6）的规范说整数提升是在操作数上执行的，所以你可以依赖“好像”。

但是，您不能绝对确定`int16_t`操作不会溢出，因为`int`它本身可能只有 16 位。

# android - 水平滚动网格列表？

> ID：12807964
> 
> 赞同：4
> 
> 时间：2012-10-09T20:33:04.830
> 
> 标签：android, android-layout

这里有很多关于水平滚动 GridView 的问题。一些人的答案导致一些自定义类设法做到这一点，但谷歌清楚地表明有一种标准方法可以做到这一点。他们[在设计部分有一个完整的页面：网格列表](http://developer.android.com/design/building-blocks/grid-lists.html)。此页面说明了水平滚动的网格，并强烈暗示这是正常的、受支持的行为（应该如此）。他们详细介绍了何时使用它。不幸的是，他们忽略了如何去做。我已经搜索了一整天，以找到一个如何使用 GridView 或任何其他标准 Android UI 类来完成此操作的示例，无论 SDK 版本如何。他们的文件有问题吗？这个页面指的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:39:16.283

> 然而谷歌清楚地表明有一种标准方法可以做到这一点

不，他们没有。

> 他们在设计部分有一个完整的页面：网格列表。

他们在设计部分有材料，在 Android SDK 中没有开箱即用的实现。其他示例包括[抽屉](http://developer.android.com/design/patterns/actionbar.html)、一些[手势](http://developer.android.com/design/patterns/gestures.html)和[列表中的部分标题](http://developer.android.com/design/building-blocks/lists.html)。

> 他们的文件有问题吗？

它是设计文档。在这种情况下，设计需要水平滚动的设计并不是“错误的” `GridView`。Android SDK 不提供一个这一事实——至少在撰写本文时——并不排除有人创建一个。

> 这个页面指的是什么？

网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T20:40:40.307

尝试使用以下内容的 xml；

```
<HorizontalScrollView
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">
<GridView
    //your layout
     >
</GridView>
</HorizontalScrollView> 
```

# installation - pip 安装到本地文件夹

> ID：12807969
> 
> 赞同：6
> 
> 时间：2012-10-09T20:33:22.960
> 
> 标签：installation, python-2.7, pip

是否可以将软件包安装到任意文件夹？例如，我试图将一个包安装到本地文件夹，但它抛出错误，同样的错误出现在任何其他包中

```
/tmp$  pip install --install-option="--prefix=mypython" IPy
Downloading/unpacking IPy
  Downloading IPy-0.75.tar.gz
  Running setup.py egg_info for package IPy

Installing collected packages: IPy
  Running setup.py install for IPy

Exception:
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/pip-1.1-py2.7.egg/pip/basecommand.py", line 104, in main
    status = self.run(options, args)
  File "/usr/local/lib/python2.7/dist-packages/pip-1.1-py2.7.egg/pip/commands/install.py", line 250, in run
    requirement_set.install(install_options, global_options)
  File "/usr/local/lib/python2.7/dist-packages/pip-1.1-py2.7.egg/pip/req.py", line 1133, in install
    requirement.install(install_options, global_options)
  File "/usr/local/lib/python2.7/dist-packages/pip-1.1-py2.7.egg/pip/req.py", line 604, in install
    f = open(os.path.join(egg_info_dir, 'installed-files.txt'), 'w')
IOError: [Errno 2] No such file or directory: 'mypython/lib/python2.7/site-packages/IPy-0.75-py2.7.egg-info/installed-files.txt' 
```

[这个问题](https://stackoverflow.com/questions/2915471/pip-how-do-i-install-a-python-package-into-a-different-directory?rq=1)也表明它应该可以工作，那么这里有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T21:03:57.830

`--prefix=`必须是绝对路径。正在做：

```
$ pip install --install-option="--prefix=/tmp/mypython" IPy 
```

例如，应该可以正常工作。

# php - 将 Yii 项目置于版本控制之下时，我应该忽略哪些文件和目录？

> ID：12807970
> 
> 赞同：4
> 
> 时间：2012-10-09T20:33:26.540
> 
> 标签：php, yii, version-control, mercurial, hgignore

使用[Yii PHP 框架](http://www.yiiframework.com/)和[Mercurial](http://mercurial.selenic.com/)作为版本控制。

将 Yii webapp 项目置于版本控制之下时，我应该忽略哪些文件和目录（即在 .hgignore 中放置什么）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:43:26.150

[示例之一](http://www.tipstank.com/2010/06/10/adding-yii-php-framework-project-into-git-repository/)（对于 Git，但您可以将其调整为 Mercurial）建议忽略：

*   `swp`- VIM 交换文件
*   `.buildpath`, `.project`, `.settings`– Eclipse 生成的文件和文件夹
*   `.idea`– JetBrains PhpStorm 生成的文件夹
*   `assets/*`– assets 下的所有内容都是 Yii 在运行时生成的
*   `runtime/*`– 同样适用于运行时的所有内容，我们不想对它们进行版本控制
*   `protected/data/*.db`- 对于 sqlite 用户，停止版本控制 sqlite 数据库
*   `protected/tests/report/*`– 代码覆盖率测试报告（刚开始练习 TDD，因此这个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T12:03:49.520

先前答案的综合和概括（没有确切的文件列表，但有共同的原则）

对于任何工具和任何 SCM 被广泛接受的规则是“不要在 repo 中存储工作工件，存储最少的对象集，这样您就可以在任何新地方继续工作”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T20:56:49.837

这是[来自 github 的 Yii 的默认设置](https://github.com/github/gitignore/blob/master/Yii.gitignore)，它不是用于 mercurial，但您可以移植它。还有其他框架和IDE

# php - 喜欢按钮 - 来自 Facebook 新域的错误 500

> ID：12807972
> 
> 赞同：1
> 
> 时间：2012-10-09T20:33:32.207
> 
> 标签：php, javascript, facebook

我在我正在构建的新网站上遇到了 Facebook 点赞按钮的奇怪行为：点赞按钮在网站 URL 上不起作用，但对其他 URL 有效。

网站是@http: [//bit.ly/RbMDcZ](http://bit.ly/RbMDcZ)。

更具体地说，无论我使用什么版本的按钮（HTML5 / XFBML / iFrame ），都会出现同样的问题：like 按钮不会在墙上发送评论，like 甚至不会在 Facebook 和 javascript 上显示错误上升：

```
POST https://www.facebook.com/plugins/like/comment 500 (Internal Server Error) 
```

App ID 和其他东西似乎都很好，因为使用其他链接不会导致链接/推荐问题。

该网站使用的子域是新创建的，我想知道它是否与 DNS 相关，所以传播问题，Facebook 不允许链接它无法访问的 URL？

我发现了一些与[Facebook 相关的问题，例如 servererror 500](https://stackoverflow.com/questions/11932700/facebook-like-server-error-500)或[Facebook “Like” button error](https://stackoverflow.com/questions/9045825/facebook-like-button-error)，但没有一个能真正帮助我解决这个问题。我真的不习惯使用 Facebook API，我可能做错了什么，但我找不到。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:37:20.463

这可能是一个跨域问题。这种类型的问题需要使用类似按钮的 jsonp 版本来解决。您可能会发现获取像 Charle 这样的 Web 调试代理很有用，您可以使用它来查看点赞按钮发出的请求的性质和呈现的响应。然后，您可以就所引发的错误类型提出更具体的问题。祝你好运。

# php - multiple days of week selection from Javascript checkbox to PHP and SQL

> ID：12807975
> 
> 赞同：0
> 
> 时间：2012-10-09T20:33:42.390
> 
> 标签：php, string, checkbox, connection-string

Is there a quick and elegant way of selecting one or more day(s) of week from Javascript checkbox, move it to PHP and get queries from SQL accordingly after processing, which boxes are checked, in PHP side-e.g. if I checked monday and wednesday, `extract (dow from timestamp) = 1 or extract(dow from timestamp) = 3` should be added to my query string on the PHP end-

I had implemented a quick and dirty solution in C++/Qt before -in this question of mine:

[Day(s) of week selection from QT checkbox to Postgresql](https://stackoverflow.com/questions/12632667/days-of-week-selection-from-qt-checkbox-to-postgresql)

Then got an answer showing the shortest way to do it- and now I wonder if a similar way of such a short way is possible in PHP.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:29:45.887

If the checkboxes are given, there aren't too many ways to implement this. Actually it's always the same: Read the values of the selected checkboxes and use them to build the query string.

Example (could be done easier with e.g. jQuery of course...):

```
var checkboxes = document.getElementById("checkboxes").getElementsByTagName("input"),
    query = [];
for (var i = 0, l = checkboxes.length; i < l; ++i) {
    // Get value of each selected checkbox and build the query string
    if (checkboxes[i].checked) {
        query.push("extract(dow from timestamp) = ", checkboxes[i].value, " or ");
    }
}
if (query.length > 0) {
    // Remove last "or"
    query = query.slice(0, -1);
}
// Join "string builder" array to get the final query string
query = query.join("");
console.log(query); 
```

[**DEMO (JSFiddle)**](http://jsfiddle.net/Aletheios/vsTwc/)

I don't quite understand though why you want JavaScript to build the string; SQL runs server-side, so why not just sending the values to the server and create the query string there?

# ios - Xcode 4.5 - 在我的设备上无线构建应用程序

> ID：12807979
> 
> 赞同：2
> 
> 时间：2012-10-09T20:33:56.603
> 
> 标签：ios, xcode, xcode4, build, wireless

所以最近我的 iPhone 4 决定停止工作，我不能再用 USB 将它连接到我的 Mac 或 PC（只有当我将它连接到墙上插座中的 USB 并且我必须按下 30 针时，它才会充电插入时连接器向上）但这是另一个问题。

问题是我无法再在我的设备上构建和测试我的应用程序。我已经用 iTunes 设置了我的设备，所以我可以进行无线同步。所以除了在我的设备上测试我的应用程序之外，手机仍然是 100% 可用的。

我正在阅读另一篇文章[Xcode 4.2 Support Wirelessly Connected Devices](https://stackoverflow.com/questions/7266391/what-does-the-xcode-4-2-preference-support-wirelessly-connected-devices-do)似乎是在谈论在设备上无线构建应用程序。但他们也说它在 Xcode 4.3.1 中被删除了。

我从来没有在以前的 Xcode 中真正使用过这个特性，所以我不确定这是否是它们的实际用途/它们是否运作良好或不运作。

基本上我在问是否有人知道一种将我的应用程序无线构建到我的设备的方法。

我想我可以构建一个 AdHoc 版本，将应用程序文件放在我的 iTunes 中并在那里同步我的设备，但那时我宁愿借朋友的设备进行测试。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T20:48:55.377

你当然可以做到这一点。制作自己的应用商店 :)

首先，将您的应用程序构建为存档 (.IPA) 文件。接下来，导出您的项目 PLIST 文件。

这应该看起来像这样：

```
<plist version="1.0">
<dict>
    <key>items</key>
    <array>
        <dict>
            <key>assets</key>
            <array>
                <dict>
                    <key>kind</key>
                    <string>software-package</string>
                    <key>url</key>
                    <string>[URL]</string>
                </dict>
            </array>
            <key>metadata</key>
            <dict>
                <key>bundle-identifier</key>
                <string>com.usaa.FileTransfer</string>
                <key>bundle-version</key>
                <string>2.21</string>
                <key>kind</key>
                <string>software</string>
                <key>title</key>
                <string>File Transfer</string>
            </dict>
        </dict>
    </array>
</dict>
</plist> 
```

最后：

1.  确保 [URL] 的字符串条目包含存档 (IPA) 的正确路径。
2.  创建一个带有指向该 plist 文件的下载链接的小型 HTML 页面。（见下文）一定要包括下面的哑剧类型！

3.  通过您的 iPhone 导航到该下载链接并安装！

    a href=itms-services://?action=download-manifest&url=YOURURLGOESHERE>下载应用

MIME 类型

```
application/octet-stream ipa
text/xml plist 
```

如果您尝试在 iPhone 以外的任何设备上导航，您将收到有关无法识别 itms 协议的错误消息。您可以通过右键单击链接在桌面上进行测试，然后选择复制快捷方式。粘贴到 url 浏览器中，然后删除除 plist URL 位置之外的所有内容。这应该会在您的浏览器上开始下载，您应该会收到 ipa 文件（您可以解压缩并签出）

[在这里](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)找到更多信息！

# joomla - Joomla 管理员重定向到公共站点

> ID：12807984
> 
> 赞同：4
> 
> 时间：2012-10-09T20:34:16.080
> 
> 标签：joomla

我有一个在 Windows 机器上运行的 Joomla 站点。当一些更新请求进来时，该站点的版本为 1.6。我决定更新该站点，但自动化过程不起作用，所以我开始手动将文件上传到那里。

一旦我将网站升级到 1.6.5，我就按照[http://docs.joomla.org/Upgrading_1.6.5_to_1.7](http://docs.joomla.org/Upgrading_1.6.5_to_1.7)上的手动升级说明进行操作，但在此之前我的问题已经开始了。

现在，当我访问 mysite.com/administrator 时，大多数图像都不存在，当我尝试登录时，我会被踢到我的站点根目录而不是 /administrator 文件夹。我借此机会查看了代码，并且没有图像 src 属性或表单操作属性包含“/administrator”。

Soooo 我需要一些关于为什么会发生这种情况的建议。我宁愿不必从备份中恢复并从 1.6 重新开始。我有点希望这是我的第一个 Joomla 3 网站。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:46:37.927

1.  您说您在通过管理面板更新 Joomla 时遇到问题，但是您是否检查过这些文件夹是否可写？`Site -> System Information -> Directory Permissions`安装 Joomla 后请务必检查此页面，因为这就是很多人无法安装更新或正常扩展的原因。
2.  然后您提到您必须通过 FTP 手动上传文件，但这不是必需的。只需将 update.zip 上传到您的 Joomla 站点并解压缩即可。

至于正确的答案，我建议你先更新到1.6系列的最新版本（1.6.6），然后你下载一个Joomla 1.6.6的新副本，解压“管理员”文件夹，压缩那个文件夹，通过 FTP 上传到您的 Joomla 根文件夹，然后解压缩。这将覆盖所有默认管理员文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:19:52.570

最后，我让这个客户将他们的 Joomla 安装从 Windows 移到了 Linux 机器上。安装后情况变得更糟，我认输了。感谢 Lodder 提供的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T10:15:05.110

如果您使用 JSecure 插件，可能会发生这种情况。它需要 URL 中的令牌才能进入管理面板，例如：

```
http://www.yoursite.com/administrator?token 
```

解释：

[http://forum.joomla.org/viewtopic.php?p=2198164](http://forum.joomla.org/viewtopic.php?p=2198164)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-30T20:09:52.130

`$live_site`我可以通过删除我在 configuration.php 文件中的变量中的值来解决这个问题。我也在 Windows 服务器上运行它。

# google-maps - 在 Firefox 中显示谷歌地图时出错

> ID：12807986
> 
> 赞同：-3
> 
> 时间：2012-10-09T20:34:19.473
> 
> 标签：google-maps

我在 Firefox 中显示谷歌地图时遇到问题。

![图片](../Images/20450ef94c6ba8e0864f0a10df838b1f.png)

如何在 Firefox 中显示地图？
以及如何设置地图以在地图中间显示经度和纬度？

这是我的代码：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:04:08.673

您需要在显示地图 div 之前为其指定大小，或者在地图显示后触发调整大小事件（`google.maps.events.trigger(map, 'resize');`其中“地图”是 google.maps.Map 对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:31:54.287

这是您显示地图的方式：

**HTML**

```
<div id="map_go"></div> 
```

**JS**

```
<script>
directionsService = new google.maps.DirectionsService();
directionsDisplay = new google.maps.DirectionsRenderer();

var PortoAlegre = new google.maps.LatLng(-30.034176, -51.229212);
var myOptions = {
    zoom: 14,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: PortoAlegre
}

map = new google.maps.Map(document.getElementById("map_go"), myOptions);
directionsDisplay.setMap(map);
</script> 
```

**CSS**

```
#map_go {border: 1px solid red; width: 95%; height: 350px;} 
```

看到它在这里工作：http: [//jsfiddle.net/RASG/PfggR/](http://jsfiddle.net/RASG/PfggR/)

就像[geocodezip](https://stackoverflow.com/a/12808406/982924)说的，你必须设置你的`div`（宽度和高度）的大小

# regex - 正则表达式更改缩进级别中的空格数

> ID：12807987
> 
> 赞同：19
> 
> 时间：2012-10-09T20:34:22.860
> 
> 标签：regex

假设您有一些看起来像这样的行

```
1  int some_function() {
2    int x = 3;  // Some silly comment 
```

等等。缩进是用空格完成的，每个缩进是两个空格。

您想将每个缩进更改为*三个*空格。简单的正则表达式

```
s/ {2}/   /g 
```

对您不起作用，因为这会改变一些非缩进空格；在这种情况下，它将之前的两个空格更改`// Some silly comment`为三个空格，这是不希望的。（如果在行尾对齐表格或注释，情况会变得更糟。）

你不能简单地使用

```
/^( {2})+/ 
```

因为你会用什么来代替它？我不知道有一种简单的方法可以找出 a 在正则表达式中匹配了多少次`+`，所以我们不知道要插入多少个更改的缩进。

您总是可以逐行切断缩进，测量它们，构建一个新的缩进字符串，然后将其粘贴到线上，但是如果有正则表达式会简单得多。

如上所述，是否有正则表达式来替换缩进级别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T20:57:05.337

在某些正则表达式风格中，您可以使用后视：

```
s/(?<=^ *)  /   /g 
```

在所有其他风格中，您可以反转字符串，使用前瞻（所有风格都支持）并再次反转：

```
 s/  (?= *$)/   /g 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-22T19:09:13.847

我需要将缩进的空格数量减半。也就是说，如果缩进是 4 个空格，我需要将其更改为 2 个空格。我想不出一个正则表达式。但是，幸运的是，其他人做到了：

```
//search for
^( +)\1 
//replace with (or \1, in some programs, like geany)
$1 
```

来自[源](http://www.conandalton.net/2010/09/fun-with-regex-shrinking-indentation.html)："`^( +)\1`表示“在行首的任何非零长度空格序列，后跟相同的空格序列。`\1`模式中的 和替换`$1`中的 都是对初始空格序列的反向引用。结果：压痕减半。”

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-18T13:36:19.050

这是另一个，而不是利用[`\G`](http://www.rexegg.com/regex-anchors.html#G)它*支持 NET、PCRE（C、PHP、R…）、Java、Perl 和 Ruby*：

```
s/(^|\G) {2}/   /g 
```

> `\G`[...] 可以在以下两个位置之一进行匹配：
> ✽ 字符串的开头，
> ✽ 紧跟上一个匹配结尾的位置。

^(来源：[http ://www.rexegg.com/regex-anchors.html#G](http://www.rexegg.com/regex-anchors.html#G))

我们利用它在紧跟上一场比赛结束后的位置进行匹配，在这种情况下，该位置将位于一行的开头，后跟 2 个空格（或遵循上述规则的前一场比赛）。

参见示例：[https ://regex101.com/r/qY6dS0/1](https://regex101.com/r/qY6dS0/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T21:06:37.113

你可以试试这个：

```
^(\s{2})|((?<=\n(\s)+))(\s{2}) 
```

分解：

```
^(\s{2})  = Searches for two spaces at the beginning of the line
((?<=\n(\s)+))(\s{2}) = Searches for two spaces
    but only if a new line followed by any number of spaces is in front of it.
    (This prevents two spaces within the line being replaced) 
```

我对 perl 并不完全熟悉，但我会试试看它是否有效：

```
s/^(\s{2})|((?<=\n(\s)+))(\s{2})/\s\s\s/g 
```

正如@Jan 指出的那样，可能还有其他非空格空白字符。如果这是一个问题，试试这个：

```
s/^( {2})|((?<=\n( )+))( {2})/   /g 
```

# python - 如何以 Tornado 的风格为 Cyclone 编写测试？

> ID：12807992
> 
> 赞同：4
> 
> 时间：2012-10-09T20:34:43.857
> 
> 标签：python, unit-testing, migration, tornado, cyclone

我一直在谷歌搜索并询问 IRC 无济于事。[Cyclone](http://cyclone.io/)应该是 Twisted 的类似 Tornado 的协议。但是，Cyclone 存储库中没有测试，也没有人写过如何将`tornado.testing.AsyncHTTPTestCase`测试转换为针对 Cyclone 编写的练习代码。

1.  如何启动服务器来测试 Web 界面？
2.  在哪里`self.fetch()`？
3.  Cyclone 中描述如何转换现有 Tornado 应用程序的文档在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:31:10.430

不幸的是，目前没有像`tornado.testing.AsyncHTTPTestCase`旋风这样的东西。你最好的选择是使用[Twisted Trial](http://twistedmatrix.com/trac/wiki/TwistedTrial)来编写单元测试。一种（有点笨拙）`self.listener = reactor.listenTCP(<someport>, YourCycloneApplication())`的方法是在`setUp`测试用例中显式调用方法并调用`self.listener.stopListening()`该`tearDown`方法。

然后，在您的测试方法中，您可以使用它`cyclone.httpclient.fetch`来获取页面。这远非理想。但就目前而言，这是唯一的出路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:47:54.053

这是我们目前用来测试 cylcone 处理程序的内容，就像我们对 tornado 所做的那样：

```
from twisted.trial.unittest import TestCase
from twisted.internet import defer, reactor
from cyclone import httpclient

# copied from tornado
_next_port = 10000
def get_unused_port():
    """Returns a (hopefully) unused port number."""
global _next_port
    port = _next_port
    _next_port = _next_port + 1
    return port

class TxTestCase(TestCase):

    def get_http_port(self):
        """Returns the port used by the HTTPServer.

        A new port is chosen for each test.
        """
        if self.__port is None:
            self.__port = get_unused_port()
        return self.__port

    def setUp(self, *args, **kwargs):
        self.__port = None
        self._app = self.get_app()
        self._listener = None
        if self._app:
            self._listener = reactor.listenTCP(self.get_http_port(), self._app)
        return TestCase.setUp(self, *args, **kwargs)

    def get_app(self):
        return None

    def tearDown(self):
        if self._listener:
            self._listener.stopListening()

    @defer.inlineCallbacks
    def fetch(self, url, *args, **kwargs):
        response = yield httpclient.fetch('http://localhost:%s%s'%(self.get_http_port(), url), *args, **kwargs)
        defer.returnValue(response) 
```

这样，您就可以找回`fetch`方法；）

并且不再需要使用试用版。

这是一个使用示例：

```
from twisted.internet import defer

class Test(TxTestCase):

    def get_app(self):
        return MyApplication()

    @defer.inlineCallbacks
    def some_test_method(self):
        res = yield self.fetch('/path/to/resource')
        self.assertEquals(200, res.code) 
```

希望对您有所帮助。

# c# - 将 SSRS 的输出作为 PDF 直接发送到打印机

> ID：12807995
> 
> 赞同：0
> 
> 时间：2012-10-09T20:35:11.237
> 
> 标签：c#, printing, ssrs-2008

我正在尝试从 SSRS 导出中获取输出并将其直接发送到服务器端打印机而不调用打印对话框

```
ReportingService.ReportExporter.Export("basicHttpEndpoint", new NetworkCredential("userNmae", "*********"), reportName, parameters.ToArray(), reportFormat, out output, out extension, out mimeType, out encoding, out warnings, out streamIds); 
```

在这种情况下，导出类型是图像；我正在尝试获取输出（这是一个字节数组）并设置一个内存流，然后尝试使用`PrintDocumen()`如下方式直接打印

```
Stream stream = new MemoryStream(output);
StreamReader streamToPrint = new StreamReader(stream);

var pd = new PrintDocument();
pd.PrintPage += pd_PrintPage;
pd.PrintController = new StandardPrintController();
pd.Print(); 
```

在`pd_PrintPage`web 和 MSDN 上有很好的记录

```
private void pd_PrintPage(object sender, PrintPageEventArgs ev)
{
  float linesPerPage = 0;
  float yPos = 0;
  int count = 0;
  float leftMargin = ev.MarginBounds.Left;
  float topMargin = ev.MarginBounds.Top;
  string line = null;

  // Calculate the number of lines per page.
  linesPerPage = ev.MarginBounds.Height /
     printFont.GetHeight(ev.Graphics);

  // Print each line of the file. 
  while (count < linesPerPage &&
     ((line = streamToPrint.ReadLine()) != null))
  {
      yPos = topMargin + (count *
         printFont.GetHeight(ev.Graphics));
      ev.Graphics.DrawString(line, printFont, Brushes.Black,
         leftMargin, yPos, new StringFormat());
      count++;
  }

  // If more lines exist, print another page. 
  if (line != null)
      ev.HasMorePages = true;
  else
      ev.HasMorePages = false;
} 
```

我无法获取数据的格式，它只是将图像数据打印为字符。我需要将输出数据转换为另一种格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:41:58.443

因为您告诉打印命令将字节作为文本而不是*呈现*输出。为了将流渲染到打印机，您需要一个 PDF 打印驱动程序（例如 Acrobat）。以下是一些选项：

[https://stackoverflow.com/questions/8338953/print-in-memory-pdf-without-saving-directly-without-a-printer-dialog-or-user-i](https://stackoverflow.com/questions/8338953/print-in-memory-pdf-without-saving-directly-without-a-printer-dialog-or-user-i)

[使用流在 c# 中打印 PDF ...可以完成吗？](http://bytes.com/topic/c-sharp/answers/591589-printing-pdf-c-using-stream-can-done)

# session - 如何跨域使用 flash[:notice]？

> ID：12807997
> 
> 赞同：2
> 
> 时间：2012-10-09T20:35:14.173
> 
> 标签：session, heroku, sinatra

我有一个通过 HTTP 提供的网站，在[Heroku](http://www.heroku.com/)上有一个自定义域（例如 mywebsite.com） 。

当用户想要登录时，我通过 HTTPS 将他们重定向到我的 Heroku 应用程序的非自定义 URL（使用[Piggyback SSL](https://devcenter.heroku.com/articles/ssl#piggyback-ssl)，因为我很便宜并且不想为[SSL Endpoint](https://devcenter.heroku.com/articles/ssl-endpoint)付费）。

然后，在他们登录后，我将用户重定向回我的自定义域，因为他们的流量不再需要加密。

唯一的问题是，在重定向它们之前，我使用`flash[:notice]`(with [sinatra-flash](http://rubysource.com/sinatra-flash/) ) 显示一条消息（例如，“您已成功登录！” ）。但我相信，由于用户在此过程中从一个域跨越到另一个域，尽管仍在同一台服务器上，但他们看不到该消息，因为无法从域 Y 访问来自域 X 的会话数据。

*   我对问题的理解正确吗？
*   修复它的正确方法是什么？

* * *

**2012-10-12 更新**：

所以，我最终采用的解决方案有点老套：

首先，我添加了一个新的数据模型，`OneTimeFlash`其中`token`包含一个包含每个记录的随机字符串的字段。然后我做了它，以便在用户登录域 X 后，我创建一个新`OneTimeFlash`实例并使用查询字符串中的令牌重定向到域 Y：

```
# The model automatically generates a token before being created.
one_time_flash = OneTimeFlash.create(:message => "You've successfully logged in!")
redirect "#{DOMAIN_Y}/flash/#{one_time_flash.token}" 
```

然后当服务器在请求中检测到这个令牌时，它会显示 flash：

```
get "/flash/:token" do |token|
  one_time_flash = OneTimeFlash.first(:token => token)
  flash[:notice] = one_time_flash.message unless one_time_flash.nil?
  one_time_flash.destroy
  redirect "/
end 
```

（ORM 是[DataMapper](http://datamapper.org/)，以防有人感到困惑。）

就像我说的：它很hacky，但它有效。谁能想到这种方法有什么严重的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:21:44.533

在这种情况下，您不能在域之间使用 flash，因为 flash 只为下一个请求保存。

你可以使用 HTML5 localstorage -[一些随机的 localstorage 解释](http://www.bennadel.com/blog/2105-Exploring-HTML5-s-localStorage-Persistent-Client-Side-Key-Value-Pairs.htm)或[html5 localstorage 上的 w3schools 网站](http://www.w3schools.com/html/html5_webstorage.asp)